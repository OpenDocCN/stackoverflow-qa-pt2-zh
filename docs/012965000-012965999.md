# StackOverflow 问答 12965000-12965999

# php - 使用 jquery 在同一个 ajax 请求中发送和接收数据

> ID：12965000
> 
> 赞同：7
> 
> 时间：2012-10-18T22:56:48.237
> 
> 标签：php, jquery, ajax

发送数据和接收依赖于该数据的响应的最佳方式是什么？

考虑用于请求的 PHP 文件：

```
$test = $_POST['test'];

echo json_encode($test); 
```

我曾尝试通过以下方式实现这一目标，但未成功：

```
$.ajax({
    type: "POST",
    dataType: "json",
    data: '{test : worked}',
    url: 'ajax/getDude.php',
    success: function(response) {
        alert(response);
    }
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T23:19:23.937

丢失引号以传递对象：

```
$.ajax({
  type: "POST",
  dataType: "json",
  data: {test : worked},
  url: 'ajax/getDude.php',
  success: function(data) {
    alert(data);
  }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T22:58:53.620

而不是这个

```
data: '{test : worked}' 
```

尝试

```
data: {"test" : worked} // Worked being your data you want to pass..
 data: {"test" : "worked"} // Else enclose worked in quotes 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T22:59:22.343

问题似乎是您提交的是字符串而不是 json 对象 - 更改`data: '{test : worked}'`为`data: {test : 'worked'}`

# android - Android 资源选择布局和值不一致

> ID：12965002
> 
> 赞同：38
> 
> 时间：2012-10-18T22:56:50.390
> 
> 标签：android, android-layout, android-resources, android-screen-support

我遇到的问题表明，为给定活动的`layout`XML 选择的资源存储桶与从文件夹中选择的资源不一致，`values`尽管在每组文件夹中使用了完全相同的资源限定符。

## 例子

在我的应用程序的抽象父活动中放置一些日志记录代码后，我可以看到，当通过 Nexus 7 类型的模拟器（Android 4.1）启动我的应用程序时，最小宽度确实是 600dp，该`layout-sw600dp-*`文件夹用于获取活动的 UI，但是用于`values`is的文件夹`values-large-*`。我期望这会`values-sw600dp-*`因此为我提供有关活动在哪个资源桶下运行的重要信息。

在我的应用程序的父活动中为所有`android.app.Activity`s进行日志记录的代码

```
 protected void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    final Configuration config = getResources().getConfiguration();
    Log.i(this.getClass().getSimpleName(), String.format("Smallest width is [%s]", config.smallestScreenWidthDp));
    configurationContext = SupportedDeviceConfiguration.fromResourceQualifer(getString(string.resourceQualifier));
    Log.i(this.getClass().getSimpleName(), String.format("Running under the [%s] configuration context.", configurationContext.getResourceQualifier()));
... 
```

当我在 Nexus 7 类型的设备上运行此代码时记录输出；

```
[Logging fluff] Smallest width is [600]
[Logging fluff] Running under the [layout-large-land] configuration context. 
```

我知道你在想什么 -*大地布局的*推导是从哪里来的？继续阅读...

## 背景

我正在试用[此处](https://stackoverflow.com/a/11670441/1348379)概述的一种方法，该方法允许我在运行时检查正在使用的资源桶。本质上，我实施的方法具有以下资源限定符结构；

```
- res
  + layout                   // Default portrait layout.
  + layout-land              // Default landscape layout
  + layout-large-land        // pre 3.2 phablet landscape layout (Galaxy Note at v2.3.3)
  + layout-xlarge-land       // pre 3.2 tablet landscape layout
  + layout-xlarge-port       // pre 3.2 tablet portrait layout
  + layout-sw520dp-port      // post 3.1 phablet portrait layout (Galaxy Note at v4.0.3)
  + layout-sw520dp-land      // post 3.1 phablet landscape layout
  + layout-sw600dp-port      // post 3.1 mini-tablet portrait layout (Nexus 7)
  + layout-sw600dp-land      // post 3.1 mini-tablet-landscape layout 
  + layout-sw700dp-port      // post 3.1 tablet portrait layout
  + layout-sw700dp-land      // post 3.1 tablet landscape layout
  - values                   // Contains the root strings.xml
     strings.xml
  - values-land
     default-config.xml            
  - values-large-land
     default-config.xml        
  - values-xlarge-land
     default-config.xml     
  - values-xlarge-port
     default-config.xml     
  - values-sw520dp-port
     default-config.xml     
  - values-sw520dp-land
     default-config.xml     
  - values-sw600dp-port
     default-config.xml     
  - values-sw600dp-land
     default-config.xml     
  - values-sw700dp-port
     default-config.xml     
  - values-sw700dp-land
     default-config.xml 
```

所以本质上，`values`限定词反映了`layout`限定词。在每个`values-*`文件夹下，我定义了一个名为`device-config.xml`内容的 XML 文件；

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="resourceQualifier">layout-{qualifier of values folder}</string>
</resources> 
```

因此，例如，`values-sw600dp-land`文件夹`device-config.xml`包含一个带有 value 的字符串`layout-sw600dp-land`。这里的目标是让我的代码与屏幕上显示的资源布局保持同步。这是必需的，这样我的代码就不会“通过 id 查找”某些由于涉及的房地产而在显示的布局上不存在的项目。

### （可选）对我为什么这样做的更深层次的推理

想要知道在运行时使用的存储桶的更深层次的原因是因为意识到我的单一片段的所有配置代码变得难以使用各种基于开关的逻辑进行管理，这些逻辑不透明并且经常重复来自其他布局...好像我需要某种[片段继承](https://dl.dropbox.com/u/17614325/SwellFragments.png)...如果您点击链接，这正是我所做的。这样做的缺点是，在指示框架实例化 x、y 或 z 片段之前，我需要知道我正在使用哪个屏幕，确保正在创建的片段永远不会与它的布局不同步是为了膨胀。这种继承有效并允许更易于管理的片段堆栈（Sonar 也更快乐，这很好）。

## 概括

但是，我被框架选择的布局文件夹和值文件夹之间的明显差异所挫败。每个都有相同的限定符，因此为什么利用 `layout-sw600dp-land`UI XML 的 Activity 不使用`values-sw600dp-land`资源？我希望我有问题，因为它是我在上面链接到的 SO 讨论中发布的最简洁的潜在解决方案。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-22T04:44:59.637

我确定您正在处理用于选择的资源优先级。

如果您提供文件夹：

```
layout-sw600dp-*
values-large-*
values-sw600dp-* 
```

Android 没有义务将*values* selection 文件夹与*layout*匹配，而是对 layout 和 values 文件夹分别使用相同的优先级逻辑。

您可以在此处了解此选择算法：http: [//developer.android.com/guide/topics/resources/providing-resources.html#BestMatch](http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T11:21:41.313

我正在为 android 4.0.3 做一个应用程序。如果使用sw600dp、sw720dp，是否需要使用下一个？： - values-sw600dp-port default-config.xml
- values-sw600dp-land default-config.xml
- values-sw700dp-port default-config.xml
- values-sw700dp-land default-config.xml 因为我没有使用 res/values-XXX 并且它似乎工作正常。

# ios - 游戏中心语音聊天鸭声音

> ID：12965006
> 
> 赞同：1
> 
> 时间：2012-10-18T22:57:10.150
> 
> 标签：ios, voip, game-center, gamekit

我有一个多人游戏，我正在创建一个 Game Center 语音频道，并且两个玩家都加入了该频道。但是，只要两个玩家都在频道中，Game Center 就会避开我的背景音乐。当创建频道并且没有人说话时，这已经发生了（我有一个一键通模型）。

有谁知道我怎样才能防止这种情况发生。当有人真正说话时，Game Center 会避开其余的声音，但我不希望所有声音都因为有人说话而明显降低增益。

# mysql - LOAD DATA LOCAL INFILE 自定义值

> ID：12965008
> 
> 赞同：1
> 
> 时间：2012-10-18T22:57:20.513
> 
> 标签：mysql

如何使用 LOAD DATA LOCAL INFILE 添加自定义值？time_add 列是第 7 列，文件的第一列和第二列只有 2 个值。对于第 7 列，time_added 我想在从文件加载时使用 unix 时间戳。

此代码不起作用：

```
$result = mysql_query("LOAD DATA LOCAL INFILE '{$myFile}' INTO TABLE {$table} FIELDS TERMINATED BY ':' LINES TERMINATED BY '\n' SET `time_added`=unix_timestamp()"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:09:58.980

为什么这行不通？

```
LOAD DATA INFILE 'file.txt'
  INTO TABLE t1
  (column1, column2)
  SET column7 = unix_timestamp(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-24T05:51:57.937

@iouri 给出的答案指出了解决您的问题的关键要素，即`.csv`文件填充的列的显式列表，`(column1, column2)`. 此行通知`LOAD`函数在从文件加载数据时仅考虑这些列，`.csv`并避免类似于`Row 1 doesn't contain data for all columns`.

您仍然需要在表定义中列出所有列，包括自定义列。此外，括号中列出的列名应与表定义中定义的列名匹配。例如，如果表定义指定了两个名为的列`user`，`id`那么您需要将行放在行的`(user, id)`上方`SET column7 = unix_timestamp()`。

您可能还想仔细检查您想要的，`LOAD DATA LOCAL INFILE`而不是`LOAD DATA INFILE`(no `LOCAL`)。[正如load-data](http://dev.mysql.com/doc/refman/5.7/en/load-data.html)文档中所指定的，`LOCAL`关键字会影响文件的预期位置，并且必须正确配置服务器和客户端以允许使用该`LOCAL`选项。

# c# - 带有 dotnetopenauth 的 Google 混合 OpenID+OAuth

> ID：12965009
> 
> 赞同：3
> 
> 时间：2012-10-18T22:57:21.633
> 
> 标签：c#, dotnetopenauth, google-openid, google-oauth

在过去的两天里，我花了大约 10 多个小时试图了解如何使用 Google Hybrid OpenID+OAuth（[联合登录](https://developers.google.com/accounts/docs/OpenID?hl=vi-VN#oauth)）实现用户登录

要触发我使用的授权请求：

```
InMemoryOAuthTokenManager tm = new InMemoryOAuthTokenManager( ConfigurationManager.AppSettings["googleConsumerKey"], ConfigurationManager.AppSettings["googleConsumerSecret"]);
using (OpenIdRelyingParty openid = new OpenIdRelyingParty())
{
  Realm realm = HttpContext.Current.Request.Url.Scheme + Uri.SchemeDelimiter + ConfigurationManager.AppSettings["googleConsumerKey"] + "/";
  IAuthenticationRequest request = openid.CreateRequest(identifier, Realm.AutoDetect, new Uri(HttpContext.Current.Request.Url.Scheme + "://" + HttpContext.Current.Request.Url.Authority + "/OAuth/google"));

  var authorizationRequest = new AuthorizationRequest
  {
    Consumer = ConfigurationManager.AppSettings["googleConsumerKey"],
    Scope = "https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/plus.me",
  };

  request.AddExtension(authorizationRequest);

  request.AddExtension(new ClaimsRequest
  {
    Email = DemandLevel.Request,
    Gender = DemandLevel.Require
  });

  request.RedirectToProvider();
} 
```

要检索我使用的访问令牌：

```
using (OpenIdRelyingParty openid = new OpenIdRelyingParty())
{
  IAuthenticationResponse authResponse = openid.GetResponse();
  if (authResponse != null)
  {
    switch (authResponse.Status)
    {
      case AuthenticationStatus.Authenticated:
        HttpContext.Current.Trace.Write("AuthenticationStatus", "Authenticated");
        FetchResponse fr = authResponse.GetExtension<FetchResponse>();

        InMemoryOAuthTokenManager tm = new InMemoryOAuthTokenManager(ConfigurationManager.AppSettings["googleConsumerKey"], ConfigurationManager.AppSettings["googleConsumerSecret"]);

        ServiceProviderDescription spd = new ServiceProviderDescription {
          spd.RequestTokenEndpoint = new DotNetOpenAuth.Messaging.MessageReceivingEndpoint("https://accounts.google.com/o/oauth2/token", HttpDeliveryMethods.AuthorizationHeaderRequest | HttpDeliveryMethods.GetRequest);
          spd.AccessTokenEndpoint = new DotNetOpenAuth.Messaging.MessageReceivingEndpoint("https://accounts.google.com/o/oauth2/token", HttpDeliveryMethods.AuthorizationHeaderRequest | HttpDeliveryMethods.GetRequest);
          spd.UserAuthorizationEndpoint = new DotNetOpenAuth.Messaging.MessageReceivingEndpoint("https://accounts.google.com/o/oauth2/auth?access_type=offline", HttpDeliveryMethods.AuthorizationHeaderRequest | HttpDeliveryMethods.GetRequest);
          spd.TamperProtectionElements = new ITamperProtectionChannelBindingElement[] { new HmacSha1SigningBindingElement() };

        WebConsumer wc = new WebConsumer(spd, tm);
        AuthorizedTokenResponse accessToken = wc.ProcessUserAuthorization();

        if (accessToken != null)
        {
          HttpContext.Current.Trace.Write("accessToken", accessToken.ToString());
        }
        else
        {
        }
        break;
      case AuthenticationStatus.Canceled:
        HttpContext.Current.Trace.Write("AuthenticationStatus", "Canceled");
        break;
      case AuthenticationStatus.Failed:
        HttpContext.Current.Trace.Write("AuthenticationStatus", "Failed");
        break;
      default:
        break;
    }
  }
} 
```

不幸的是，我得到了`AuthenticationStatus.Authenticated`但是。`wc.ProcessUserAuthorization()``null`

我究竟做错了什么？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:45:08.987

不要使用`WebConsumer`，而是使用[DotNetOpenAuth.OpenIdOAuth](http://nuget.org/packages/DotNetOpenAuth.OpenIdOAuth) NuGet 包`WebConsumerOpenIdRelyingParty`中提供的类。此类提供了辅助方法，用于将 OAuth 请求附加为 OpenID 扩展（无论如何您自己都做得很好）并在返回的路上提取 OpenID 扩展响应。

查看[上述类的源代码](https://github.com/DotNetOpenAuth/DotNetOpenAuth/blob/master/src/DotNetOpenAuth.OpenIdOAuth/OAuth/WebConsumerOpenIdRelyingParty.cs)可能有助于启发您。DotNetOpenAuth 中还有一个专门针对 Google OpenID 登录和 OAuth 扩展的示例。 [从 SourceForge 获取示例](http://sf.net/projects/dnoa/)，然后查看 OpenIdRelyingPartyWebForms 示例项目的 loginPlusOAuth.aspx 页面（以及代码隐藏和支持类）。

# ios - 如何在 Xcode/iOS 中设置 UIView 的标识符以调试自动布局？

> ID：12965014
> 
> 赞同：30
> 
> 时间：2012-10-18T22:58:01.450
> 
> 标签：ios, xcode4.5, autolayout

在 WWDC 2012（掌握自动布局的最佳实践）的一次演讲中，演讲者说您可以在 Xcode 中设置 UIView 标识符来帮助调试自动布局：

![UIView 的标识符](../Images/67fd7446276b8cee7030596462243014.png)

这似乎是一个非常好的主意，但在我的 iOS 项目的 Xcode 4.5.1 中，我看不到设置 UIView 的标识。

![ ](../Images/ab59dad956b6bc95690228b92495f704.png)

如何在 Xcode 4.5.1 中设置 UIView 的标识？如果这在 iOS 项目中是不可能的，我怎样才能获得相同的功能？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-07-02T17:08:02.520

设置`accessibilityIdentifier`就`UIView`可以了。在 Xcode 6.4、iOS 8.4 上测试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-23T08:05:16.977

似乎**标识符**仅在 Mac OSX中的**NSView上可用。**它在 iOS 的 UIView 上不可用。

> 找到一个或多个坏约束。
> 
> 要获取影响特定视图的约束，请使用 constraintsAffectingLayoutForOrientation:。然后，您可以检查调试器中的约束。它们使用视觉格式符号打印。如果您的视图有标识符**（请参阅标识符 (NSView)）**，它们会使用描述中的标识符打印出来，如下所示：

如此处所述：http: [//developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/debugging.html](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/debugging.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T16:50:12.913

不幸的是，似乎没有任何方法可以做到这一点。我已经尝试填充几乎所有东西，但没有任何效果。restoreId 和 Accessibility 特征都对此没有任何影响。如果您查看屏幕截图，您会看到实际上他正在设置一个 NSView，它确实具有标识符属性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-10T15:58:25.100

设置代码，为我工作：

**代码**：

```
imageView.accessibilityIdentifier = "profileImageView" 
```

* * *

**输出**：

```
<NSLayoutConstraint:0x17028eec0 profileImageView.width == 40   (active, names: profileImageView:0x10fd48110 )> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-20T00:33:29.207

不是您正在寻找的答案，但有帮助的是在调试器中执行以下操作：

```
expr [(UIButton*)0x12345 setBackgroundColor:[UIColor purpleColor]] 
```

这有助于识别视图。确保在调试器上运行以查看它是否生效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-19T19:15:14.310

这是一个方便的技巧，可以帮助您进行 AutoLayout 调试。您可以通过类别添加自己的`name`属性，并重载其方法以包含您的新. 这并不能在 AutoLayout 调试信息中为您提供一个可见的名称，但可以让您轻松地从其地址查看并查看其给定名称。`UIView``description``name``po`

然后只需在视图控制器中分配适用的名称：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.firstView.name = @"MyViewController.firstView";
    self.secondView.name = @"MyViewController.secondView";
} 
```

现在当你看到这样的东西时：

```
<NSAutoresizingMaskLayoutConstraint:0x175086220 h=-&- v=-&- UIView:0x147533250.height == UIView:0x14760b4a0.height> 
```

您可以只`po`查看地址：

```
po 0x147533250
MyViewController.firstView <UIView: 0x147533250>
po 0x14760b4a0
MyViewController.secondView <UIView: 0x14760b4a0> 
```

这是类别代码：

**UIView+名称.h**

```
#import <UIKit/UIKit.h>

@interface UIView (Name)

@property (strong, nonatomic) NSString *name;

- (NSString *)description;

@end 
```

**UIView+名称.m**

```
#import "UIView+Name.h"
#import <objc/runtime.h>

@implementation UIView (Name)

- (NSString *)name {
    return objc_getAssociatedObject(self, @selector(name));
}

- (void)setName:(NSString *)name {
    objc_setAssociatedObject(self, @selector(name), name, OBJC_ASSOCIATION_RETAIN_NONATOMIC); 
}

- (NSString *)description {
    return [NSString stringWithFormat:@"%@ %@", self.name, [super description]];
}

@end 
```

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2012-11-03T19:57:27.200

代替`Identifier`，使用`Storyboard`ID 字段。这是相同的。

# java - 无法用java下载pdf

> ID：12965015
> 
> 赞同：2
> 
> 时间：2012-10-18T22:58:04.940
> 
> 标签：java, pdf, download

我正在尝试从 [http://aula.au.dk/main/document/document.php?action=download&id=%2F%D8velsesvejledning+2012.pdf](http://aula.au.dk/main/document/document.php?action=download&id=%2F%D8velsesvejledning+2012.pdf)下载文件， 但它似乎不是 pdf，当我尝试使用此代码下载它时

```
import java.io.*;
import java.net.*;

public class DownloadFile {

public static void download(String address, String localFileName) throws IOException {
    URL url1 = new URL(address);

    byte[] ba1 = new byte[1024];
    int baLength;
    FileOutputStream fos1 = new FileOutputStream(localFileName);

    try {
        // Contacting the URL
        System.out.print("Connecting to " + url1.toString() + " ... ");
        URLConnection urlConn = url1.openConnection();

        // Checking whether the URL contains a PDF
        if (!urlConn.getContentType().equalsIgnoreCase("application/pdf")) {
            System.out.println("FAILED.\n[Sorry. This is not a PDF.]");
        } else {
            try {

                // Read the PDF from the URL and save to a local file
                InputStream is1 = url1.openStream();
                while ((baLength = is1.read(ba1)) != -1) {
                    fos1.write(ba1, 0, baLength);
                }
                fos1.flush();
                fos1.close();
                is1.close();

            } catch (ConnectException ce) {
                System.out.println("FAILED.\n[" + ce.getMessage() + "]\n");
            }
        }

    } catch (NullPointerException npe) {
        System.out.println("FAILED.\n[" + npe.getMessage() + "]\n");
    }
}
} 
```

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:15:12.823

[http://aula.au.dk/main/document/document.php?action=download&id=%2F%D8velsesvejledning+2012.pdf](http://aula.au.dk/main/document/document.php?action=download&id=%2F%D8velsesvejledning+2012.pdf)不是pdf。该网站给出了一个错误，这就是脚本不起作用的原因：

> 第 70 行文件 /data/htdocs/dokeos184/www/main/inc/tool_navigation_menu.inc.php 中的 SQL 错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T11:19:16.333

**2 个库的 2 步过程。**

```
// 1\. Use Jsoup to get the response.
Response response= Jsoup.connect(location)
                   .ignoreContentType(true)
                   // more method calls like user agent, referer, timeout 
                   .execute();

// 2\. Use Apache Commons to write the file 
FileUtils.writeByteArrayToFile(new File(path), response.bodyAsBytes()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T23:08:20.483

正如 Marti 所说，问题的根本原因是脚本失败。我在一个有效的 pdf 链接上测试了你的程序，它工作得很好。

在这种情况下，这对您没有帮助，但是[HttpURLConnection](http://docs.oracle.com/javase/7/docs/api/java/net/HttpURLConnection.html)是 URLConnection 的一个特殊子类，它使与 http 服务器的通信变得更加容易 - 例如直接访问错误代码等。

```
HttpURLConnection urlConn = (HttpURLConnection) url1.openConnection();
// check the responsecode for e.g. errors (4xx or 5xx) 
int responseCode = urlConn.getResponseCode(); 
```

# cmake - 为目标生成程序集

> ID：12965019
> 
> 赞同：23
> 
> 时间：2012-10-18T22:58:44.190
> 
> 标签：cmake

我正在尝试将`-S`我的一个可执行文件传递给 GCC。我试过这个：

```
set_target_properties(MyTarget PROPERTIES COMPILE_FLAGS "-S") 
```

但我得到“文件格式无法识别；视为链接器脚本”

（没有那条线它构建得很好）

`-S`像这样通过有什么问题吗？还是有另一种方法让 CMake 输出程序集 .s 文件？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-16T10:34:09.380

CMake 为汇编器和预处理器输出内置了目标。对于名为 的文件`src.cpp`，CMake`src.s`为汇编器输出和`src.i`预处理器输出生成目标。如果编译标志不同，它会分别为每个目标生成汇编器/预处理器输出。为您的 CMake 项目使用 make 生成器，您可以获得汇编器和预处理器输出，如下所示：

```
make src.s   # assembler output
make src.i   # preprocessor output 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-19T20:49:26.080

如果您尝试实际构建`MyTarget` *并*保留生成的程序集，您可以替换`-S`为`-save-temps`然后执行`make MyTarget`

# python - Python 子进程 Popen.communicate() 等价于 Popen.stdout.read()？

> ID：12965023
> 
> 赞同：29
> 
> 时间：2012-10-18T22:59:05.663
> 
> 标签：python, subprocess, wait, popen, communicate

非常具体的问题（我希望）：**以下三个代码有什么区别？**

（我希望只是第一个不会等待子进程完成，而第二个和第三个会等待。但我需要确定这是*唯一*的区别......）

我也欢迎其他评论/建议（尽管我已经很清楚`shell=True`危险和跨平台限制）

请注意，我已经阅读了[Python 子进程交互，为什么我的进程可以使用 Popen.communicate，而不是 Popen.stdout.read()？](https://stackoverflow.com/questions/9674511/python-subprocess-interaction-why-does-my-process-work-with-popen-communicate)并且我不想/不需要之后与程序交互。

另请注意，我已经阅读[了 Python Popen.communicate() 内存限制的替代方案？](https://stackoverflow.com/questions/6880090/alternatives-to-python-popen-communicate-memory-limitations)但我并没有真正明白...

最后，请注意，我知道当一个缓冲区使用一种方法填充一个输出时，某处存在死锁的风险，但我在互联网上寻找明确的解释时迷路了......

第一个代码：

```
from subprocess import Popen, PIPE

def exe_f(command='ls -l', shell=True):
    """Function to execute a command and return stuff"""

    process = Popen(command, shell=shell, stdout=PIPE, stderr=PIPE)

    stdout = process.stdout.read()
    stderr = process.stderr.read()

    return process, stderr, stdout 
```

第二个代码：

```
from subprocess import Popen, PIPE
from subprocess import communicate

def exe_f(command='ls -l', shell=True):
    """Function to execute a command and return stuff"""

    process = Popen(command, shell=shell, stdout=PIPE, stderr=PIPE)

    (stdout, stderr) = process.communicate()

    return process, stderr, stdout 
```

第三个代码：

```
from subprocess import Popen, PIPE
from subprocess import wait

def exe_f(command='ls -l', shell=True):
    """Function to execute a command and return stuff"""

    process = Popen(command, shell=shell, stdout=PIPE, stderr=PIPE)

    code   = process.wait()
    stdout = process.stdout.read()
    stderr = process.stderr.read()

    return process, stderr, stdout 
```

谢谢。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-18T23:27:56.003

如果您查看 的来源`subprocess.communicate()`，它显示了一个完美的差异示例：

```
def communicate(self, input=None):
    ...
    # Optimization: If we are only using one pipe, or no pipe at
    # all, using select() or threads is unnecessary.
    if [self.stdin, self.stdout, self.stderr].count(None) >= 2:
        stdout = None
        stderr = None
        if self.stdin:
            if input:
                self.stdin.write(input)
            self.stdin.close()
        elif self.stdout:
            stdout = self.stdout.read()
            self.stdout.close()
        elif self.stderr:
            stderr = self.stderr.read()
            self.stderr.close()
        self.wait()
        return (stdout, stderr)

    return self._communicate(input) 
```

您可以看到`communicate`确实使用了对 and 的 read 调用`stdout`，`stderr`并且还调用了`wait()`。这只是操作顺序的问题。在您的情况下，因为您同时使用`PIPE`标准输出和标准错误，它进入`_communicate()`：

```
def _communicate(self, input):
    stdout = None # Return
    stderr = None # Return

    if self.stdout:
        stdout = []
        stdout_thread = threading.Thread(target=self._readerthread,
                                         args=(self.stdout, stdout))
        stdout_thread.setDaemon(True)
        stdout_thread.start()
    if self.stderr:
        stderr = []
        stderr_thread = threading.Thread(target=self._readerthread,
                                         args=(self.stderr, stderr))
        stderr_thread.setDaemon(True)
        stderr_thread.start()

    if self.stdin:
        if input is not None:
            self.stdin.write(input)
        self.stdin.close()

    if self.stdout:
        stdout_thread.join()
    if self.stderr:
        stderr_thread.join()

    # All data exchanged.  Translate lists into strings.
    if stdout is not None:
        stdout = stdout[0]
    if stderr is not None:
        stderr = stderr[0]

    # Translate newlines, if requested.  We cannot let the file
    # object do the translation: It is based on stdio, which is
    # impossible to combine with select (unless forcing no
    # buffering).
    if self.universal_newlines and hasattr(file, 'newlines'):
        if stdout:
            stdout = self._translate_newlines(stdout)
        if stderr:
            stderr = self._translate_newlines(stderr)

    self.wait()
    return (stdout, stderr) 
```

这使用线程一次从多个流中读取。然后它`wait()`在最后调用。

所以总结一下：

1.  此示例一次从一个流中读取，并且不等待它完成该过程。
2.  此示例通过内部线程同时从两个流中读取，并等待它完成该过程。
3.  此示例等待进程完成，然后一次读取一个流。正如您所提到的，如果流中写入的内容过多，则可能会出现死锁。

此外，您在第二个和第三个示例中不需要这两个导入语句：

```
from subprocess import communicate
from subprocess import wait 
```

它们都是`Popen`对象的方法。

# asp.net-mvc-3 - 在视图中显示多个图像时，MVC4 EF 4.1 偶尔出现“必须打开连接”错误

> ID：12965031
> 
> 赞同：0
> 
> 时间：2012-10-18T22:59:40.453
> 
> 标签：asp.net-mvc-3, image, ef-code-first, structuremap

我当前的应用程序使用带有 EF 4.1 Code First 和 Oracle 后端的 .NET MVC3。除了在一个场景中，我们有一个显示多个图像的视图，几乎所有时间都运行良好。有时所有图像都加载正常，有时其中一些无法加载，我收到 2 条错误消息之一 - “连接未关闭”或“必须打开连接”。图像作为 BLOB 存储在数据库中，而不是在服务器的文件系统中。我有一个包含文档集合（即图像）的视图模型，并使用 EditorTemplate 在视图中呈现集合。呈现的代码调用 Controller 操作以检索集合中的每个图像。这是呈现集合的 Razor 代码：

父视图：

```
<div  id="carousel1" class="data-carousel">
    @Html.EditorFor(x => x.Documents)
</div> 
```

编辑器模板：

```
<div>
    <img style="border: solid; border-color: lightgrey; border-width: thin" src="@Url.Action("GetImage", "Product", new {docId = Model.DocumentID, width = 250, height = 250})" alt=""/>           
</div> 
```

所以这段代码被写入浏览器

```
<img style="border: solid; border-color: lightgrey; border-width: thin" src="http://localhost:9613/Product/GetImage?docId=1&width=250&height=250" alt=""/>
<img style="border: solid; border-color: lightgrey; border-width: thin" src="http://localhost:9613/Product/GetImage?docId=2&width=250&height=250" alt=""/>
<img style="border: solid; border-color: lightgrey; border-width: thin" src="http://localhost:9613/Product/GetImage?docId=3&width=250&height=250" alt=""/>
<img style="border: solid; border-color: lightgrey; border-width: thin" src="http://localhost:9613/Product/GetImage?docId=4&width=250&height=250" alt=""/> 
```

如您所见，这创建了一个链接，该链接将包括 id 在内的一些参数传递给 action 方法，该方法将图像作为字节数组返回：

```
public void GetImage(int docId, int width, int height)
{
    // Load image from database
    var doc = productRepository.Documents.SingleOrDefault(f => f.DocumentID == docId);
    var image = doc.FileContent;

    new WebImage(image)
   .Resize(width, height, true, true)
   .Crop(1, 1)
   .Write();
} 
```

我很确定正在发生的事情是每个图像（可能多达 10 个）都调用了 Controller 操作，并且在下一个请求到来之前没有关闭 db 连接。我尝试在存储库上创建一个方法来创建在“使用”语句中创建一个新的上下文实例，看看这是否会改善事情，但事实并非如此。那么有什么我可以做的吗？我应该查看新的异步，还是可以使用其他模式来检索视图中的多个图像？

TIA

**编辑：**

该应用程序托管在 IIS7 中，并在经典管道模式下拥有自己的应用程序池。我使用 StructureMap 作为 IoC 容器，因此它控制 DbContext 的创建和生命周期。实例化发生在控制器被实例化时：

SM设置：

```
public static class StructuremapMvc 
{
    public static void Start() 
    {
        var container = (IContainer)IoC.Initialize();
        DependencyResolver.SetResolver(new SmDependencyResolver(container));
    }
}

public static IContainer Initialize() 
{
    ObjectFactory.Initialize(x =>
    {
        x.Scan(scan =>
        {
            scan.TheCallingAssembly();
            scan.WithDefaultConventions();
        });
        x.For<IProductRepository>().Use<ProductRepository>();
        x.For<IProductContext>().Use<ProductContext>();
    });

    return ObjectFactory.Container;
} 
```

控制器：

```
public class ProductController : Controller
{
    private readonly IProductRepository productRepository;

    public ProductController(IProductRepository productRepository)
    {
        this.productRepository = productRepository;
    }

    public void GetImage(int docId, int width, int height)
    {
        // Load image from database
        var doc = productRepository.Documents.SingleOrDefault(f => f.DocumentID == docId);
        var image = doc.FileContent;

        new WebImage(image)
       .Resize(width, height, true, true)
       .Crop(1, 1)
       .Write();
    }

    // etc.
} 
```

存储库：

```
public class ProductRepository : IProductRepository
{
    private readonly IProductContext productContext;

    public ProductRepository(IProductContext productContext)
    {
        productContext = productContext;
    }

    public IQueryable<Document> Documents
    {
        get { return productContext.Documents; }
    }

    // etc.
} 
```

语境：

```
public class ProductContext : DbContext, IProductContext
{
    // DbSets
    public IDbSet<Document> Documents { get; set; }

    public void SetModified(object entity)
    {
        Entry(entity).State = EntityState.Modified;
    }   

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        // etc.
    }

    // etc. 
} 
```

# excel - 使用 Excel VBA 控制 Internet Explorer 本地 Intranet

> ID：12965032
> 
> 赞同：19
> 
> 时间：2012-10-18T22:59:45.477
> 
> 标签：excel, vba, internet-explorer

我正在使用 Excel VBA 代码单击我们网站上的按钮。我知道这不是最好的事情，但它是我可用的最不令人反感的选择。

我可以使用这段代码，成功加载imdb.com、google等。但是当我加载我们的本地站点时，我失去了对ie对象的控制，我无法检查readyState，我无法退出。

这是我得到的错误。

> 运行时错误“-2147023179 (800706b5)”：
> 自动化错误
> 接口未知

每隔一段时间，我就会收到以下消息：

> 运行时错误“-2147417848 (80010108)”：
> 自动化错误
> 调用的对象已与其客户端断开连接。

单击 Debug 表示`ie.readyState`，我将其注释掉，然后它指向`ie.Quit`

```
Sub dothestuff()
    Dim ie As InternetExplorer
    Set ie = New InternetExplorer
    ie.Visible = True

    ie.Navigate "http://www.google.com/"
    anerror = webload(ie)

    ie.Quit
    Set ie = Nothing
End Sub

Function webload(ie)
    Do Until ie.ReadyState = READYSTATE_COMPLETE
        DoEvents
    Loop
End Function 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-10-07T09:33:10.007

这是此问题的快速简便的解决方案：

代替：

```
set IE = createobject("internetexplorer.application") 
```

采用：

```
Set IE = New InternetExplorerMedium 
```

无需调整 IE 设置

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-01-05T17:39:50.063

这是正在发生的事情。当您的浏览器在内部“跳转”到不同的安全区域时 - 从本地地址到 InTRAnet 地址或到 Internet 地址 - IE 关闭/删除 IE 的当前进程并打开另一个具有更严格安全性的进程。旧的和新的 IE 进程是父 IE 任务的 IE 子进程，因此您不会通过查看浏览器或在任务管理器中查看进程来看到它发生。如果您使用 Process Explorer（Microsoft 免费提供），您可以看到这种情况。

在这种类型的环境中，您需要做的是使用上面的 Anup Upadhyay 的解决方案。他的代码片段查看所有 IE 任务（父子任务没有区别），并找到指向原始进程的网址的新 IE 进程。只要您没有对同一个地址打开多个浏览器，它就会可靠地找到新进程并按照您的预期继续运行。

注意：您可能还需要使用**InternetExplorerMedium**对象，而不是**InternetExplorer**对象。它也更擅长“坚持”一个会话。

这是我的版本，与 Anup 的版本几乎相同。

MS Office VBA 的参考资料：

*   微软互联网控制

*   Microsoft Shell 控件和自动化

n

```
Dim IE As InternetExplorerMedium ' This object (the "medium" variety as opposed to "InternetExplorer") is necessary in our security climate
Dim targetURL As String
Dim webContent As String
Dim sh
Dim eachIE

targetURL = "[your URL here]"
Set IE = New InternetExplorerMedium
IE.Visible = False ' Set to true to watch what's happening
IE.Navigate targetURL

While IE.Busy
  DoEvents
  Wend

Do
  Set sh = New Shell32.Shell
  For Each eachIE In sh.Windows
    If InStr(1, eachIE.LocationURL, targetURL) Then
      Set IE = eachIE
      'IE.Visible = False  'This is here because in some environments, the new process defaults to Visible.  
      Exit Do
      End If
    Next eachIE
  Loop
Set eachIE = Nothing
Set sh = Nothing

While IE.Busy  ' The new process may still be busy even after you find it
  DoEvents
  Wend 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-07-15T19:12:01.350

试试这个：

```
Set IE = GetObject("new:{D5E8041D-920F-45e9-B8FB-B1DEB82C6E5E}") 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-28T16:42:34.420

我们在使用 IE9 时遇到了这个问题。它是由于安全设置而出现的。在“Internet 选项”对话框（工具...Internet 选项）的“安全”选项卡上有一个名为“启用保护模式”的设置。每个“区域”可以有不同的“启用保护模式”设置我们取消选中“启用保护模式”，这解决了我们的问题。我认为正在发生的事情是，当切换到处于保护模式的区域时，IE 会启动一个新进程来处理该区域中的流量（可能会杀死旧进程）。当这种情况发生时，您在 VBA 中的 IE 对象变量与 Internet Explorer 断开连接。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-19T16:35:16.837

好吧，刚刚找到解决办法，无奈之下决定尝试加载127.0.0.1而不是localhost，果然没有问题，于是解决了本地内网服务器的ip地址，现在我可以走了。我真的不明白为什么，但这已经解决了我的问题。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-11-05T05:44:11.933

```
Dim IE As Object
Set IE = CreateObject("InternetExplorer.Application")
IE.Visible = False
IE.Navigate "C:\abc.html" 
```

'我们在这里遇到错误，我找到了一个小棘手的替代解决方案，如下所示'参考 Microsoft Shell 控件和自动化'使用下面的代码重新分配 IE 对象以解决丢失的连接问题

```
Dim sh
Dim eachIE
Do

    Set sh = New Shell32.Shell
    For Each eachIE In sh.Windows
        ' Check if this is the desired URL

' Here you can use your condition except .html
' If you want to use your URL , then put the URL below in the code for condition check.
    ' This code will reassign your IE object with the same reference for navigation and your issue will resolve.
' 
        If InStr(1, eachIE.locationurl, ".html") Then 
        Set IE = eachIE
        Exit Do
        End If
    Next eachIE
Loop 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-03-30T15:14:11.573

对我来说，以下工作：

1.  打开互联网浏览器
2.  转到工具
3.  转到互联网选项
4.  切换到安全选项卡
5.  单击受信任的站点
6.  点击网站
7.  您将看到网站网址，选择它
8.  单击删除
9.  单击关闭，应用和确定

附言。我在 IE 8 浏览器上测试了这些步骤。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-19T13:55:44.217

也许您在绑定时遇到问题？这是一个奇怪的错误。

试试这个代码（改编自[http://www.excely.com/excel-vba/ie-automation.shtml](http://www.excely.com/excel-vba/ie-automation.shtml)）。希望它有所帮助：

```
Option Explicit

' lasts for the life of Excel being open
Dim ie As Object

Sub dothestuff()
    Set ie = CreateObject("InternetExplorer.Application")
    ie.Visible = True
    ie.Navigate "http://www.google.com/"

    Do While ie.Busy
        DoEvents
    Loop

    ie.Quit
    Set ie = Nothing
End Sub 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-07-17T13:28:06.460

我在使用我们公司内部网中的网站时遇到了完全相同的问题，该网站也包含在我的受信任网站中。禁用保护模式允许我检查 ReadyState，但前提是我禁用了 Internet 区域以及 Intranet 和受信任的站点。

为什么在受信任站点上检查 ReadyState 时，为 Internet 区域启用保护模式会导致自动化错误？有没有办法在不禁用互联网区域的保护模式的情况下解决这个问题？

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-02-26T00:52:09.073

另一个解决方案..

```
Set IE = CreateObject("InternetExplorer.Application")
IE.Navigate ("http://URLOnMyIntranet/site.html")
IE.Visible = True

Set IE = nothing
Set objShellApp = CreateObject("Shell.Application")
For Each objWindow In objShellApp.Windows
    Debug.Print objWindow.LocationName
     If LCase(objWindow.LocationName) = LCase("Your windows name, use debug to find out") Then
            Set IE = objWindow
     End If
Next 
```

请注意，使用 InternetExplorerMedium（请参阅其他答案）通常是您所需要的，仅供参考，您也可以使用 Url 属性 obj.LocationURL 而不是更准确的窗口名称。查看其他答案。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-12-21T02:53:43.347

```
Dim IE As InternetExplorer
Set IE = New InternetExplorerMedium
IE.Navigate "yousite.org"
IE.Visible = True

Do While IE.Busy
    DoEvents
Loop    

Set HTML = IE.document
Do
var8 = HTML.DocumentElement.innerHTML
v3 = var8
v4 = InStrRev(v3, "the class or ID you are looking for when the _    
page final loads", -1)
Loop While v4 = 0

Do While IE.Busy
    DoEvents
Loop 

'Your in the new page look for elements and click rinse and repeat
'the Do loop. This method works with my intranet corporate site 
```

# android - 未找到 Android Restlet 404 错误

> ID：12965033
> 
> 赞同：0
> 
> 时间：2012-10-18T22:59:49.563
> 
> 标签：android, rest, http-status-code-404, restlet

我正在为 android 做一个休息客户端并使用[restlet](http://www.restlet.org)。

因此，当我运行我的应用程序时，我得到 404 错误 - 尝试存储我的数据时未找到。我的启动并运行正常。

```
 package com.example.app;

 import org.restlet.resource.ClientResource;

 import android.util.Log;

 import com.example.app.models.Accounts;
 import com.example.app.models.AccountsResource;

 public class ServerConection {

    private AccountsResource resource;

        public ServerConection(){

        ClientResource cr = new ClientResource("http://192.168.1.2:8080/api/accounts/");
        resource = cr.wrap(AccountsResource.class);
    }

    public void send(Accounts account){
        resource.store(account);    
    }

}

public interface AccountsResource {
    @Get
    public Accounts retrieve();

    @Put
    public void store(Accounts account);

    @Delete
    public void remove();
} 
```

日志猫

```
10-18 19:55:12.658: E/AndroidRuntime(10290): FATAL EXCEPTION: Timer-0
10-18 19:55:12.658: E/AndroidRuntime(10290): Not Found (404) - Not Found
10-18 19:55:12.658: E/AndroidRuntime(10290):    at org.restlet.resource.ClientResource$1.invoke(ClientResource.java:1663)
10-18 19:55:12.658: E/AndroidRuntime(10290):    at $Proxy4.store(Native Method)
10-18 19:55:12.658: E/AndroidRuntime(10290):    at com.example.app.ServerConection.send(ServerConection.java:26)
10-18 19:55:12.658: E/AndroidRuntime(10290):    at com.example.app.AccountIntentService.sendAccount(AccountIntentService.java:56)
10-18 19:55:12.658: E/AndroidRuntime(10290):    at com.example.app.AccountIntentService.access$1(AccountIntentService.java:55)
10-18 19:55:12.658: E/AndroidRuntime(10290):    at com.example.app.AccountIntentService$2.run(AccountIntentService.java:44)
10-18 19:55:12.658: E/AndroidRuntime(10290):    at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T09:57:26.737

您应该检查服务器端应用程序的日志，您的应用程序中的 URL 可能有误。

正如安迪在他对帐户的评论中提到的那样，您确定该 URL 可能不是`http://192.168.1.2:8080/api/account/`（单数）吗？

仔细检查 URL，如果问题仍未解决，那么我们需要查看服务器日志。

# php - ftp_fput() 可以接受远程文件路径吗？

> ID：12965036
> 
> 赞同：0
> 
> 时间：2012-10-18T23:00:02.060
> 
> 标签：php, file-upload, ftp

假设我有以下代码：

```
$file="http://example.com/path/to/file.zip";
$in = fopen($file, "r");
var_dump($in);             // result - resource(8) of type (stream)

$put = ftp_fput($ftp->getConnectionId(), $file, $in, FTP_BINARY);
var_dump($put);           // result - bool(false) 
```

我收到以下错误：

`Warning: ftp_fput(): http://example.com/path/to/file.zip: No such file or directory in /var/www/inc/application.php`

连接建立正确，因为我可以更改目录和读取文件，但是当我想像上面那样上传文件时出现问题。我究竟做错了什么？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:03:13.277

的第二个参数`ftp_fput`允许您定义远程文件路径和名称。

您正在尝试对第二个参数使用 URL 而不是路径。

它应该是这样的：

```
$put = ftp_fput($ftp->getConnectionId(), '/path/to/file.zip', $in, FTP_BINARY); 
```

来源：[http ://au.php.net/ftp_fput](http://au.php.net/ftp_fput)

# ruby-on-rails - 如何在使用前通过“创建”控制器操作来处理 Rails 测试夹具？

> ID：12965040
> 
> 赞同：0
> 
> 时间：2012-10-18T23:00:23.400
> 
> 标签：ruby-on-rails, ruby-on-rails-3, testing, fixtures

我有一个带有两个模型的 Rails 应用程序：数据和请求。数据有一个名为“路径”的属性，该属性在“创建”控制器操作期间被分配。请求belongs_to 数据。

我的数据测试夹具没有指定路径属性。

当我测试请求的创建时，它会在数据库中找到适当的数据测试夹具，但未设置“路径”属性。所以看起来测试夹具直接进入数据库。是否可以强制测试装置由控制器“创建”操作来处理？还是我错过了更大的东西？

我正在使用 ActionController::TestCase 并且是在 Rails 中进行测试的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:06:48.110

正确的方法是继续并`path`在测试夹具中设置属性。您的固定装置只是将一些模型放入数据库以用于测试的一种方式。

当你测试你的 Request 控制器时，你希望它在数据库中有一些有效的 Data 对象来测试。`path`如果没有该属性集，这些对象实际上并不有效。

# java - 如何验证实例字段值？

> ID：12965041
> 
> 赞同：1
> 
> 时间：2012-10-18T23:00:27.753
> 
> 标签：java, forms, validation

我如何确保这些字段在用户填写时不会留空？这是一个类文件，填写的信息会被另一个主文件调用。我想确保信息已填写，但要等到最后所有其他内容都已完成（我正在处理其他类文件）。如果名称留空，那么我希望程序说明名称字段留空并且需要填写，然后我才能单击完成按钮。任何和所有的帮助表示赞赏。

```
import java.util.Scanner;
public class fillInfo
{
public String name;
public String address;
public String telephone;
public void readInput()
{
    Scanner keyboard = new Scanner(System.in);
    System.out.println("What is the customers name?");
    name = keyboard.nextLine();
    System.out.println("What is the customers telephone number?");
    telephone = keyboard.nextLine();
    System.out.println("What is the customers address?");
    address = keyboard.nextLine();
}
public void writeOutput()
{
System.out.println("Sold to: "+ name);
System.out.println("Telephone: "+ telephone);
System.out.println("Address: "+ address);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:08:14.227

也许如果你做了类似的事情：

```
Scanner keyboard = new Scanner(System.in);
System.out.println("What is the customers name?");
name = keyboard.nextLine();
while(name="")//empty string (nothing) entered
{
System.out.println("Please enter a valid name");
name = keyboard.nextLine();
} 
```

. . .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T23:11:56.930

对于每个字段变量，您可以执行以下操作：

```
while (name == null || name.trim().isEmpty()) {
   System.out.println("What is the customers name?");
   name = keyboard.nextLine();
} 
```

**更新：**可以在程序结束之前检查值并调用这样的辅助方法：

```
if (name == null || name.trim().isEmpty()) {
   name = getInputValue("What is the customers name?");
} 
```

使用相应的辅助方法：

```
private String getInputValue(String prompt) {
   System.out.println(prompt);
   Scanner keyboard = new Scanner(System.in);
   return keyboard.nextLine();
} 
```

**注意：**与第一种方法相比，这在资源上的效率较低，因为`Scanner`每个缺失的字段变量都会创建一个新实例。

# api - EWS GetRoomsList 在 Exchange Server 2007 SP1 中不起作用

> ID：12965046
> 
> 赞同：1
> 
> 时间：2012-10-18T23:01:10.047
> 
> 标签：api, exchange-server, exchangewebservices

我正在尝试以编程方式从 Exchange Server 2007 SP1 获取房间列表（资源调度程序）。

当我从以下链接运行代码时， http: [//msdn.microsoft.com/en-us/library/exchange/hh532566 (v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/exchange/hh532566%28v=exchg.80%29.aspx)

得到一个像这样的异常：

***服务请求 GetRoomLists 仅对 Exchange 版本 Exchange2010 或更高版本有效。***

知道如何在 Exchange Server 2007 SP1 中获取 RoomsList 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:38:22.167

在 Exchange 2007 中，房间被归类为资源。如果您想获取房间时间表，则可以使用 EWS API 调用 GetUserAvailability。

[http://msdn.microsoft.com/en-us/library/aa564001.aspx](http://msdn.microsoft.com/en-us/library/aa564001.aspx)

当您拨打此电话时，您需要为您感兴趣的房间/资源提供正确的别名。我已经在 Ex 2007 上构建了一个应用程序，它使用可用性呼叫来完成您所说的事情。

# java - 在某些情况下如何允许忽略 javax.validation

> ID：12965049
> 
> 赞同：3
> 
> 时间：2012-10-18T23:01:20.437
> 
> 标签：java, hibernate, validation

给定以下课程

```
public class Website {

    @NotNull
    String owner:

    @ValidUrl
    String url;

} 
```

当我们验证这一点（例如使用@Valid）并且如果Website.url 不遵守我的自定义@ValidUrl 约束，我们将得到一个约束违规（例如“url 无法访问”）。

我想知道如果用户愿意，是否可以忽略该验证。

脚步：

1.  第一次验证表格
2.  抛出约束违规并将其显示给用户
3.  用户选择“我知道，仍然添加”并重新提交
4.  第二次验证表单，验证除@ValidUrl 之外的所有内容

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T23:20:56.967

您可以通过结合使用[验证组](http://in.relation.to/Bloggers/BeanValidationSneakPeekPartIIIGroupsAndPartialValidation)和[编程验证](https://stackoverflow.com/questions/4533130/using-hibernate-validator-without-calling-annotation)来做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-25T07:44:39.397

这是一种可以从一组违规中删除违规的方法。

```
public static <T> Set<ConstraintViolation<T>> removeViolation(final Set<ConstraintViolation<T>> constraintViolations, final String propertyName, final Class annotationClass) {
    return constraintViolations.stream().filter(p ->
            !(((NodeImpl) (((PathImpl) (p.getPropertyPath())).getLeafNode())).getName().equals(propertyName))
                    || !((ConstraintDescriptorImpl) p.getConstraintDescriptor()).getAnnotationType().getSimpleName().equals(annotationClass.getSimpleName()))
            .collect(Collectors.toSet());
} 
```

# javascript - 建立一个 从 js 文件中列出

> ID：12965053
> 
> 赞同：-3
> 
> 时间：2012-10-18T23:01:51.403
> 
> 标签：javascript, backbone.js

我需要从 js 端创建以下代码，因为我不确定要打印多少个列表项，我需要从后端设置 data-ids ......但基本上输出需要看起来像这样；

```
<ul id="myList">
<li><a data-id="Prev" href="#">Prev</a></li>
<li><a data-id="1" href="#">1</a></li>
<li><a data-id="2" href="#">2</a></li>
<li><a data-id="3" href="#">3</a></li>
<li><a data-id="4" href="#">4</a></li>
<li><a data-id="Next" href="#">Next</a></li>
 </ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:26:49.000

试试这个代码

```
// Lets say you get this array from ypur backend..

var arr= ['Prev' , '1','2','3','4','Next'];

var html = '<ul id="myList">';

for(var i =0;i<arr.length ; i++){
    html +=  '<li><a data-id="' + arr[i] + '" href="#">'+arr[i] + '</a></li>' ; 
}

html += '</ul>';

// Append to your div

$('#list').append(html); 
```

[检查小提琴](http://jsfiddle.net/sushanth009/hJswU/)

# flash - 在 Flash 中创建一个包含常量的类可以吗？

> ID：12965057
> 
> 赞同：2
> 
> 时间：2012-10-18T23:02:11.743
> 
> 标签：flash, flashdevelop

所以，我试图让我的 ActionScript 3 程序中的每个类都可以访问一些常量。我使用 FlashDevelop，并创建了这个：

```
package
{
    public class ConstClass
    {
         public static const alpha : int = 30;
         public static const beta : Boolean = true;
    }
} 
```

我可以像这样在我的程序中使用它：`sigma = ConstClass.alpha + 10`例如。现在，我的问题是： 1\. 它会对我的程序的性能产生负面影响吗？2\. 有没有更好的方法以更快的方式实现相同的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:30:03.693

你是说静态的？const 修饰符使您的字段不可变，但 static 提供类访问权限。

1.  这取决于您的程序或您如何使用静态字段。例如访问局部变量要快得多。尽管如此，通常的做法是使用静态字段来保存原始不可变数据或实用程序函数。

2.  更快是什么意思？打字或性能更快？同样，这取决于您的代码。

[有趣的测试](http://jacksondunstan.com/articles/1690)，但无论如何，对性能的影响很小。

# mysql - Mysql 子查询返回多于一行，我需要插入选定的数据

> ID：12965058
> 
> 赞同：1
> 
> 时间：2012-10-18T23:02:14.330
> 
> 标签：mysql

我正在尝试“修复”此查询：

```
INSERT INTO tblmypagepop (DID,MyPageName,GID) 
VALUES(77568,(SELECT PGID FROM `tblpageindex77568` 
WHERE PageName like "%new_vehicle_list%"),4741) 
```

该查询仅在子查询时有效：

```
(SELECT PGID FROM `tblpageindex77568` WHERE PageName like "%new_vehicle_list%") 
```

只有一个值，当我有多个时不买。我已经检查了其他有类似问题的帖子，他们查询的购买方式不同，如下所示：

```
SELECT * FROM t1 WHERE column1 = (SELECT column1 FROM t2); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:04:43.743

```
INSERT INTO tblmypagepop (DID,MyPageName,GID)
(SELECT 77568, PGID, 4741 FROM `tblpageindex77568`
  WHERE PageName like "%new_vehicle_list%") 
```

试试看。

# flex4.5 - Flex 4.5 blendShader，Pixel Bender 不刷新

> ID：12965061
> 
> 赞同：1
> 
> 时间：2012-10-18T23:03:08.707
> 
> 标签：flex4.5, pixel-bender

我正在关注 Joe Ward 的[Flex 和 AIR](http://www.adobe.com/devnet/flex/articles/pixel_bender_basics_flex_air.html)教程的 Pixel Bender 基础知识，并为 Flex 4.5 Flashplayer 11 更新它。在grainBlend 部分工作时，如果我弹出“警报”消息，它效果很好。否则，当 HSlider 更改时，着色器不会刷新/更新。

换句话说：如果我有一个活动的警报消息，脚本就会运行。如果我删除警报消息，blendShader 只能工作一次，之后就不会更新。

脚本流：

初始化（）好的

创建着色器确定

检测 HSlider Change OK

updateFilter() 确定

更新 Shader 的湍流值 OK

更新图像“噪声”着色器并重绘不工作

我相信本教程的以下摘录可能是问题所在。“...因为在设置显示对象的 blendShader 属性时会克隆着色器对象，所以不能简单地更改原始 Shader 对象的参数。您还必须将更新后的 Shade 对象重新分配给 blendShader 属性...。”

```
 shader.data.turbulence.value = [turbulence.value];
noise.blendMode = BlendMode.SHADER;
noise.blendShader = shader; 
```

弹性代码

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
           xmlns:s="library://ns.adobe.com/flex/spark"
           xmlns:mx="library://ns.adobe.com/flex/mx"
           contentCreationComplete="init()" 
           backgroundColor="0x666666">
<fx:Script>
    <![CDATA[
        import mx.controls.Alert;
        import mx.events.SliderEvent;

        //Embed the Pixel Bender kernel in the output SWF
        [Embed(source="kernels/grainblend.pbj", mimeType="application/octet-stream")]
        private var GrainBlendKernel:Class;

        //Create the Shader object
        [Bindable]
        private var shader:Shader = new Shader( new GrainBlendKernel() );

        private function init():void
        {   
            //Set the slider values based on the parameter metadata
            turbulence.minimum = shader.data.turbulence.minValue;
            turbulence.maximum = shader.data.turbulence.maxValue;
            turbulence.value   = shader.data.turbulence.defaultValue;
            turbulence.addEventListener( SliderEvent.CHANGE, updateFilter );
            //Apply the blend
            noise.blendShader = shader;
        }

        private function updateFilter( event:Event ):void
        {
            trace(turbulence.value);//print slider
            //Alert.show("Hit");
            shader.data.turbulence.value = [turbulence.value];
            trace("shader's value: "+shader.data.turbulence.value);
            noise.blendMode = BlendMode.SHADER;
            noise.blendShader = shader;

        }

    ]]>
</fx:Script>
<s:VGroup width="100%">
    <s:HGroup width="100%" height="100%" horizontalAlign="center" verticalAlign="top">
        <s:VGroup>
            <mx:Canvas width="195" height="194" backgroundColor="#663300"/>
            <s:Label text="Background" textAlign="center" width="196"/>
        </s:VGroup>
        <s:VGroup>
            <s:Image source="img/noise.jpg" width="195"  height="194"/>
            <s:Label text="Perlin noise" width="196" textAlign="center"/>
        </s:VGroup>
        <s:VGroup>
            <mx:Canvas width="195" height="194" backgroundColor="#663300">
                <s:Image source="img/noise.jpg" id="noise" width="195" height="194"/>
            </mx:Canvas>
            <s:Label text="Grain blend" width="196" textAlign="center"/>                
        </s:VGroup>
    </s:HGroup>
    <s:HGroup width="100%" horizontalAlign="center" verticalAlign="top">
        <s:Label text="{turbulence.value}"/>
        <s:HSlider id="turbulence" width="200"/>
    </s:HGroup>
</s:VGroup> 
```

像素弯曲内核

```
<languageVersion: 1.0;>

kernel GrainBlend
<   namespace : "com.adobe.example";
vendor : "Adobe Systems Inc.";
version : 1;
description : "Creates a wood grain or marbleing effect"; >
{
input image4 background;    
input image4 noise;

output pixel4 dst;
parameter float turbulence
<
    maxValue : 500.0;
    minValue : 0.0;
    defaultValue : 150.0;
>;

void evaluatePixel()
{   
    pixel4 a = sampleNearest(background, outCoord());
    pixel4 b = sampleNearest(noise, outCoord());

    float alpha = a.a; //save the original alpha

    if( (b.a > 0.0) && (a.a > 0.0)){
        float seed = outCoord().x + (((b.r + b.g + b.b)/3.0)  * turbulence);

        float grain = (0.7 * sin(seed) + 0.3 * sin(2.0 * seed + 0.3) + 0.2 * sin(3.0 * seed + 0.2));
        dst = sampleNearest(background, outCoord()) * (grain + 0.5);
        dst.a = alpha; //restore the original alpha           
    }
    else {
        //Just copy the background pixel outside the area of the noise image
        dst = sampleNearest(background, outCoord());
    }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:04:38.567

我放弃了 blendShader。我使用过滤器重新创建了它。现在可以了。此外，我动态地创建了棕色背景和柏林噪声。见下文！

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
           xmlns:s="library://ns.adobe.com/flex/spark"
           xmlns:mx="library://ns.adobe.com/flex/mx"
           creationComplete="init()"
           backgroundColor="0x666666">
<fx:Script>
    <![CDATA[
        import mx.events.SliderEvent;

        import spark.filters.ShaderFilter;

        //Embed the Pixel Bender kernel in the output SWF
        [Embed(source="kernels/grainblend.pbj", mimeType="application/octet-stream")]
        private var GrainBlendKernel:Class;

        //Create the Shader object
        private var shader:Shader = new Shader( new GrainBlendKernel() );
        private var shaderFilter:ShaderFilter =  new ShaderFilter(shader);
        private var myBrown:BitmapData;
        private var myPerlin:BitmapData;

        private function init():void
        {   
            myPerlin = new BitmapData(200, 200, false, 0x00CCCCCC);
            myBrown = new BitmapData(200, 200, false, 0x00663300);
            //Set the slider values based on the parameter metadata
            turbulence.minimum = shader.data.turbulence.minValue;
            turbulence.maximum = shader.data.turbulence.maxValue;
            turbulence.value   = shader.data.turbulence.defaultValue;
            turbulence.addEventListener( SliderEvent.CHANGE, updateFilter );
            myPerlin.perlinNoise(100, 80, 6, Math.floor(Math.random() * 10), false, true, 7, true, null);
            //Set the displayed images to the perlinNoise
            perlinNoise.source = myGrain.source =myPerlin;
            //Set the background image to Brown
            backGround.source = myBrown;
            shader.data.background.input = myBrown;
            myGrain.filters = [shaderFilter];
        }

        private function updateFilter( event:Event ):void
        {
            shader.data.turbulence.value = [turbulence.value];
            myGrain.filters = [shaderFilter];
        }
    ]]>
</fx:Script>
<s:VGroup width="100%">
    <s:HGroup width="100%" height="100%" horizontalAlign="center" verticalAlign="top">
        <s:VGroup>
            <s:BitmapImage id="backGround" width="200" height="200"/>
            <s:Label text="Background" textAlign="center" width="200"/>
        </s:VGroup>
        <s:VGroup>              
            <s:BitmapImage id="perlinNoise" width="200" height="200"/>
            <s:Label text="Perlin noise" width="200" textAlign="center"/>
        </s:VGroup>
        <s:VGroup>
            <s:BitmapImage id="myGrain" width="200" height="200" />
            <s:Label text="Grain blend" width="200" textAlign="center"/>                
        </s:VGroup>
    </s:HGroup>
    <s:HGroup width="100%" horizontalAlign="center" verticalAlign="top">
        <s:Label text="{turbulence.value}"/>
        <s:HSlider id="turbulence" width="200"/>
    </s:HGroup>
</s:VGroup>
    </s:Application>` 
```

# jquery - 为什么我不能从 jQuery UI 对话框中触发提交按钮？

> ID：12965066
> 
> 赞同：16
> 
> 时间：2012-10-18T23:03:59.460
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog, form-submit

*编辑：*

有些人建议直接在表单上调用提交。这不是我想要达到的目标。具体来说，我希望能够在输入 type='submit' 上调用 click() 事件并让它像往常一样提交表单。jQuery UI 对话框似乎干扰了这种正常行为。请查看我创建的 jsFiddle 链接，因为问题可以在那里重新创建。

* * *

（首先我已经在 StackOverflow 上看到过这个问题，但答案在我的情况下不起作用： [带有 ASP.NET 按钮回发的 jQuery UI 对话框](https://stackoverflow.com/questions/757232/jquery-ui-dialog-with-asp-net-button-postback)）

**期望的行为：**

在我的页面上，我有一个隐藏字段和一个提交按钮（通过 CSS 隐藏）。

我想要做的是使用 JavaScript 以编程方式单击此按钮，从而导致提交表单。最重要的是......我想从 jQuery UI 对话框中触发所有这些。基本上，用户将在 jQuery UI 对话框中进行选择，这将导致整个页面被提交并重新加载。

**问题陈述**

像这样触发按钮单击通常可以很好地提交表单。但是，当从 jQuery UI 对话框中触发操作时，它会失败。

*正如您在我的 jsFiddle 代码中看到的那样*，我在提交按钮上调用了 jQuery 的 click() 函数......但表单实际上并没有提交！该按钮确实被 JavaScript 点击了，但“表单提交行为”本身并没有发生。该页面未发布。

我相信 jQuery UI 对话框会以某种方式干扰我试图以编程方式单击的按钮的表单提交行为。

**我想以编程方式触发按钮单击的原因：**

我不能让位于对话框*内*的按钮本身是提交按钮。在我的例子中，我创建了一个包含 jQuery UI 对话框的可重用 JavaScript 控件。这个 JS 控件允许用户选择员工。然而，当一个员工被选中时，期望的行为*并不总是*：表单提交。（有时我可能想在页面上显示选择的员工而不执行提交。）

**额外细节：**

这个问题不是特定于 ASP.NET，但这里有一些额外的细节来帮助解释我为什么要尝试所有这些。我正在使用 .NET 4.5 编写一个 ASP.NET Web 窗体应用程序。我已经开始越来越多地为我的页面使用 JavaScript，但是在这个特定的页面上，我想触发一个实际的回发到服务器，这样我就可以处理来自 ASP.NET 页面生命周期的按钮单击事件并填充一个 GridView。这就是为什么我希望能够使用 JavaScript 来单击一个 asp:button，这反过来会导致表单提交。

**最重要的是......自己试试 ---> 请参阅下面的 jsFiddle 链接......**

同样，此问题并非特定于 ASP.NET。我已经能够使用常规 HTML 和 jQuery UI 在 JsFiddle 上重新创建相同的问题。这是 JsFiddle 链接：

[http://jsfiddle.net/fENyZ/18/](http://jsfiddle.net/fENyZ/18/)

正如您在代码中看到的，我已经尝试使用通过 jQuery DOM 操作在表单内移动 jQuery UI 对话框的“修复”。这似乎无法解决问题。

谢谢！我很感激任何帮助！

**HTML**

```
<html>
<head></head>
<body>

    <form action="http://www.google.com/index.html" method="post">

        <input type="button" value="Open jQuery dialog" id="btnOpenDialog" />
        <br /><br /><br />

        The button below submits the form correctly if you click it.<br />
        However, when I try to trigger click() event on this button <u>from within the jQuery UI Dialog above</u> then the form <b>fails to be submitted.
        </b><br />

        <input type="submit" value="Submit Form" id="btnSubmitForm" />  
        <input type="hidden" id="hdnEmployeeChosen" value="" />            
    </form>    

    <div id="divPopup" class="dialogClass" style="display: none;">
        Picking an employee below <b>ought to</b> cause the form to submit, but sadly it does not...
        <br /><br />

        <div class="divOptions">
            <input type="button" value="Pick" class="pickButton" employeeName="Weird Al" />
            Weird Al Yankovic
        </div>
        <div class="divOptions">            
            <input type="button" value="Pick" class="pickButton" employeeName="Dracula" />
            Count Dracula
        </div>
        <div class="divOptions">          
            <input type="button" value="Pick" class="pickButton" employeeName="David" />
            David Copperfield
        </div>        
    </div>

</body> 
```

**JavaScript**

```
$(document).ready(function ()
{
    var jqueryDialog = $('#divPopup')
                .dialog({
                    autoOpen: false,
                    modal: true,
                    title: 'My Dialog',
                    width: 300,
                    height: 300,
                    draggable: false,
                    resizable: false
                });

    // This "fix" does not appear to help matters..........
    jqueryDialog.parent().appendTo($("form:first"));

    $('#btnOpenDialog').click(function () {
        jqueryDialog.dialog('open');    
    });    

    $('.pickButton').click(function () {

        // Put picked value into hidden field
        var pickedEmployee = $(this).attr('employeeName');
        $('#hdnEmployeeChosen').val(pickedEmployee);

        // Try to cause a submit (ASP.NET postback in my case)        
        // THIS PART DOES NOT WORK.................
        $('#btnSubmitForm').click();

        //alert($('#hdnEmployeeChosen').val());
    });    

}); 
```

**CSS**

```
form {
margin: 5px;
    border: 1px solid black;
    background-color: #EEE;
    padding: 15px 5px;
}

.dialogClass {
 border: 1px solid black;
padding: 5px;
margin: 5px;
    background-color: LightBlue;
    font-size: 14px;
}

.pickButton {
  margin-right: 5px;   
}

.divOptions {
   margin-bottom: 3px;   
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-14T20:40:25.847

只是有一个类似的问题，我可以逐步执行正确的提交按钮，但表单只是没有提交。在单步执行 jquery 对话框代码并没有找到它如何阻止事件传播之后，我只是决定做显而易见的事情并在提交之前隐藏对话框。也适用于您的小提琴：http: [//jsfiddle.net/Q4GgZ/1/](http://jsfiddle.net/Q4GgZ/1/)

```
jqueryDialog.dialog('close'); // <- THIS WORKS
$('#btnSubmitForm').click(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-10T17:18:54.390

我遇到了同样的问题，以下一组建议对我有用。

1.  将对话框附加到表单`$(this).parent().appendTo("form:first");`
2.  将对话框附加到对话框`open`选项中的表单

[归功于 Homam](https://stackoverflow.com/users/322355/homam)和他对另一个[问题的](https://stackoverflow.com/questions/757232/jquery-ui-dialog-with-asp-net-button-postback)[评论](https://stackoverflow.com/questions/757232/jquery-ui-dialog-with-asp-net-button-postback/768163#comment6418333_768163)。

见下文 JavaScript

```
 var jqueryDialog = $('#divPopup')
        .dialog({
            autoOpen: false,
            modal: true,
            title: 'My Dialog',
            width: 300,
            height: 300,
            draggable: false,
            resizable: false,
            open: function() {
                $(this).parent().appendTo('form:first');
            }
        }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T02:17:46.343

如果有人仍在寻找答案，那么这对我有用。

setTimeout("$('#" + id + "').click();", 0);

id 是 e.currentTarget.id ，其中事件是点击提交按钮。将该 id 传递给必须触发点击事件的方法。

.trigger("click") 不会触发回发，但上面的代码会。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-14T20:00:48.140

正如 LouD 所提到的，解决方法是在“单击”按钮之前关闭对话框。至于**为什么**这会解决任何问题，您需要深入研究 JQuery UI 源代码。在 1.8.9 版本中，模态覆盖有以下代码：

```
events: c.map("focus,mousedown,mouseup,keydown,keypress,click".split(","), function (a) {
    return a + ".dialog-overlay"
}).join(" "),

...

c(document).bind(c.ui.dialog.overlay.events, function (d) {
    if (c(d.target).zIndex() < c.ui.dialog.overlay.maxZ) return false
}) 
```

它为“下方”元素上的所有输入事件返回 false （基本上`preventDefault()`）。它不仅仅是一个巨大的 div，它通过“越过”它们来阻止用户点击它们。它还手动阻止所有输入事件，无论是用户还是您的 JS 生成它们。

关闭你的模态对话框会破坏覆盖层，它允许你的 JS 点击事件完全传播，提交表单。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T23:23:08.177

为您的表单分配一个 id 属性：

```
<form id="myForm" action="http://www.google.com/index.html" method="post"> 
```

然后提交表格：

```
$('.pickButton').click(function (e) {
  e.preventDefault();
  $('#myForm').submit();
  // more code
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-09T23:46:54.157

问题是由使用 id 元素作为选择器引起的......当调用 jquery ui 对话框时，它会将所需的块复制到生成的容器中，这意味着像 #form_name 这样的特定标识符现在会有重复混淆 jquery 选择器...

我的解决方案是切换到类标识符，然后使用更具体的路径来选择按钮 ex： $(jQuery_dialog_box.class name).submit() （或 click() ）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-05T17:11:07.970

我来到这里时遇到了一个非常相似的问题，但是由于这个问题我浪费了几个小时，所以我将它发布给未来的读者。

这段代码有一些问题：

1.  如果对话框是模态的，似乎您无法为对话框之外的其他元素触发事件。如果您使用选项 modal 进行对话框：false，则触发器将正常工作。我希望对话框是模态的，所以这个解决方案不是一个选项。

2.  由于对话框是模态的，您必须将按钮放在对话框内。您可以隐藏它并通过您的分类按钮触发。我修改了 javacript 部分并尝试了小提琴并适用于您的情况。

HTML

```
<form action="http://www.google.com/index.html" method="post">

    <input type="button" value="Open jQuery dialog" id="btnOpenDialog" />
    <br /><br /><br />

    The button below submits the form correctly if you click it.<br />
    However, when I try to trigger click() event on this button <u>from within the jQuery UI Dialog above</u> then the form <b>fails to be submitted.
    </b><br />

    <input type="hidden" id="hdnEmployeeChosen" value="" />            

    <div id="divPopup" class="dialogClass" style="display: none;">
    Picking an employee below <b>ought to</b> cause the form to submit, but sadly it does not...
    <br /><br />

    <div class="divOptions">
        <input type="button" value="Pick" class="pickButton" employeeName="Weird Al" />
        Weird Al Yankovic
    </div>
    <div class="divOptions">            
        <input type="button" value="Pick" class="pickButton" employeeName="Dracula" />
        Count Dracula
    </div>
    <div class="divOptions">          
        <input type="button" value="Pick" class="pickButton" employeeName="David" />
        David Copperfield
    </div>     

       <input type="submit" value="Submit Form" id="btnSubmitForm" style="display:none"/>  
</div>

</form>    

</body> 
```

JAVASCRIPT

```
$(document).ready(function ()
{
var jqueryDialog = $('#divPopup')
            .dialog({
                autoOpen: false,
                modal: true,
                title: 'My Dialog',
                width: 300,
                height: 300,
                draggable: false,
                resizable: false
            });

// This "fix" does not appear to help matters..........
jqueryDialog.parent().appendTo($("form:first"));

$('#btnOpenDialog').click(function () {
    jqueryDialog.dialog('open');    
});    

$('.pickButton').click(function () {

    // Put picked value into hidden field
    var pickedEmployee = $(this).attr('employeeName');
    $('#hdnEmployeeChosen').val(pickedEmployee);

    console.log("click button dialog");
    // Try to cause a submit (ASP.NET postback in my case)        
    // THIS PART DOES NOT WORK.................
    $('#btnSubmitForm')[0].click();

    console.log("after click");        
    //alert($('#hdnEmployeeChosen').val());
});    

}); 
```

你可以在[这里看到小提琴](http://jsfiddle.net/fENyZ/54/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-05T08:42:30.713

因为它复制了多个对象。所以你可以使用：`$('[id="btnCreate"]').last().trigger('submit');`

last 方法获取最后一个元素。

你更新`$('#btnSubmitForm').click();`

试试这个：`$('[id="btnSubmitForm"]').last().trigger('click');`

`$('[id="btnSubmitForm"]')`为 btnSubmitForm 获取所有相同的 id。

例如：

```
$("#dialog").dialog({
            autoOpen: false,
            //maxWidth: 600,
            //maxHeight: 500,
            minWidth: 580,
            width: 580,
            height: 500,
            title: "titleDemo",
            show: {
                effect: "blind",
                duration: 1000
            },
            hide: {
                effect: "explode",
                duration: 1000
            },
            modal: true,
            buttons: {
                "Create": {
                    text: "OK",
                    id: "btnCreates",
                    click: function (event) {
                        $('[id="btnCreate"]').last().trigger('submit');
                    }
                },
                Cancel: function () {
                    $(this).dialog("close");
                }
            }
        }); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-18T23:08:48.017

我没有看到提交按钮的 Click 事件的代码。

代替

```
$('#btnSubmitForm').click(); 
```

尝试

```
$('form').submit(); 
```

或者在提交按钮的单击事件处理程序中提交表单。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-18T23:10:23.743

*正在*单击提交按钮。我将以下代码添加到您的脚本中...

```
$("#btnSubmitForm").on("click", function() {
    console.log("submit!");
}); 
```

这表明该按钮已被单击。

正如 Sushanth 所说，使用`submit()`表单的方法，或者如果您想触发 asp.net 的回发，请查看`__doPostBack()`

[如何使用 __doPostBack()](https://stackoverflow.com/questions/3591634/how-to-use-dopostback)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-18T23:16:52.200

这可能是一个错误，取决于您的 jQuery 版本

[看看这篇关于同样问题的文章](http://forum.jquery.com/topic/click-on-submit-button-doesn-t-trigger-form-s-jquery-submit-handler)

在任何情况下，当您要提交表单时，最短的方法是使用该`.submit()`方法。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-12-11T00:25:49.417

默认情况下，Jquery UI 对话框会阻止任何按钮提交（至少根据我目前的经验）。话虽如此，我发现如果您通过 Visual Studio 将任何按钮上的“提交行为”更改为“False”，它就会起作用。我知道这与它应该是完全相反的，但如果你这样做，那么 JQuery UI 对话框中的按钮将返回并工作。

几个小时后，我还发现 JQUI 对话框中的任何字段在回发时都无法在 ASP.net 中识别，除非您在 Jquery UI 对话框对象上调用 destroy 方法。

我真的很喜欢这个控件，直到我开始深入了解在实际应用程序中使用它的细节，除了基本的弹出窗口之外，我不确定这个控件是否已完全准备好迎接黄金时段。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-08-26T16:33:18.930

解决这个问题的简单方法是在对话框打开***后设置提交事件。***没有必要在提交事件触发之前关闭对话框。

当对话框在 .open() 方法期间被覆盖时，所有事件都被禁用。因此，在打开对话框后设置您需要的事件。

```
$('#btnOpenDialog').click(function () {
        jqueryDialog.dialog('open');   
     // now setup events 
        $('#btnSubmitForm').on('click', function() {
            // process submit event 
        });
}); 
```

# python - Python单元测试：鼻子@with_setup失败

> ID：12965067
> 
> 赞同：1
> 
> 时间：2012-10-18T23:04:01.170
> 
> 标签：python, unit-testing, decorator, nose

我正在做一些测试。我的一堆测试函数有共同的设置，所以我决定我应该使用`@with_setup`来自`nose.tools`. 我已将我的问题简化为：

```
from nose.tools import with_setup

class TestFooClass(unittest.TestCase):
   def setup_foo_value(self):
      self.foo = 'foobar'

   @with_setup(setup_foo_value)
   def test_something(self):
      print self.foo 
```

我收到以下错误：

```
$ python manage.py test tests/test_baz.py

E
======================================================================
ERROR: test_something (project.tests.test_baz.TestFooClass)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/user/Coding/project-backend/project/../project/tests/test_baz.py", line 17, in test_something
    print self.foo
AttributeError: 'TestFooClass' object has no attribute 'foo'

---------------------------------------------------------------------- 
```

就像`setup_foo_value`根本没有运行一样。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T23:15:27.110

根据文档：

*   [编写测试](http://nose.readthedocs.org/en/latest/writing_tests.html)：“请注意，子类*不*支持方法生成器`unittest.TestCase`”
*   [测试工具](http://nose.readthedocs.org/en/latest/testing_tools.html#nose.tools.with_setup)：“*仅对*`with_setup`测试函数有用，对测试方法或 TestCase 子类内部无效”

 *所以你可以将你的测试方法移动到一个函数中，或者将一个[`setUp`](http://docs.python.org/dev/library/unittest.html#unittest.TestCase.setUp)方法添加到你的类中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-22T01:42:09.070

试试这个修改。它对我有用。

```
from nose.tools import with_setup

def setup_foo_value(self):
    self.foo = 'foobar'

@with_setup(setup_foo_value)
def test_something(self):
    print self.foo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-18T12:35:14.383

最初的想法可以通过以下方式实现

```
import wrapt

@wrapt.decorator
def setup_foo_value(wrapped, instance, args, kwargs):
   instance.foo = 'foobar'
   return wrapped(*args, **kwargs)

class TestFooClass(unittest.TestCase):
   @setup_foo_value
   def test_something(self):
      print self.foo 
```

**重要**的是它还使用了[wrapt](http://www.slideshare.net/GrahamDumpleton/pycon-nz-2013-advanced-methods-for-creating-decorators) *Python*模块*

# android - 谷歌电视上的安卓应用怎么在过扫描区显示（youtube可以为什么我不能？）

> ID：12965068
> 
> 赞同：4
> 
> 时间：2012-10-18T23:04:10.030
> 
> 标签：android, layout, fullscreen

这是针对谷歌电视的...

我已经通过布局xml多屏的东西，这就是我想出的：

在我的布局文件中：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:background="#000000"
    android:padding="0px"
    android:layout_marginTop="0px"
    android:layout_marginBottom="0px"
    android:layout_marginLeft="0px"
    android:layout_marginRight="0px"
    android:layout_weight="1"
    android:overScrollMode="never"
    >

    <SurfaceView android:id="@+id/surface"
        android:layout_width="1920dp"
        android:layout_height="1080dp"

        >
    </SurfaceView>

    <WebView
        android:layout_width="1920dp"
        android:layout_height="1080dp"
        android:id="@+id/webView" />

<TextView
    android:id="@+id/tv1"
    android:text=" "
    android:layout_width="4dp"
    android:layout_height="4dp"/>

</RelativeLayout> 
```

把它放到我的清单中：

```
<supports-screens android:xlargeScreens="true" /> 
```

在我的 java main 中添加了“特殊酱汁”。

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

而且我可以很好地显示在“允许”显示区域的边缘。但我的屏幕空间边缘比 youtube 少了大约 10%。文档说“我不允许”确实使用该区域，但显然 youtube 和 Netflix 使用。他们如何做到这一点？

# python - matplotlib 散点图颜色作为第三个变量的函数

> ID：12965075
> 
> 赞同：30
> 
> 时间：2012-10-18T23:05:31.837
> 
> 标签：python, matplotlib, scatter

我想知道如何通过第三个变量制作 matplotlib 的散点函数颜色点。

[对 matplotlib 中的 gnuplot linecolor 变量有](https://stackoverflow.com/questions/8945699/gnuplot-linecolor-variable-in-matplotlib)疑问 ？和[Matplotlib 散点图；作为第三个变量的函数的颜色](https://stackoverflow.com/questions/8202605/matplotlib-scatterplot-colour-as-a-function-of-a-third-variable) 提出了类似的查询，但是，这些问题的答案并没有解决我的问题：`c=arraywhichspecifiespointcolour`在 scatter 函数中的使用只设置填充颜色，而不是边缘颜色。这意味着在使用`c=arr...`时使用失败`markersymbol='+'`，例如（因为该标记没有填充，只有边缘）。无论使用哪个符号，我都希望点由第三个变量可靠地着色。

有没有办法用 Matplotlib 的 scatter 函数来实现这一点？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-19T00:33:05.560

这对我有用，使用 matplotlib 1.1：

```
import numpy as np
import matplotlib.pyplot as plt

x = np.arange(10)
y = np.sin(x)

plt.scatter(x, y, marker='+', s=150, linewidths=4, c=y, cmap=plt.cm.coolwarm)
plt.show() 
```

结果：

![在此处输入图像描述](../Images/4ed077d42e96fe0ed1b3a230d1b3caf1.png)

或者，对于 n 个点，创建一个形状为 (n, 3) 的 RGB 颜色值数组，并将其分配给 的`edgecolors`关键字参数`scatter()`：

```
import numpy as np
import matplotlib.pyplot as plt

x = np.linspace(0, 20, 100)
y = np.sin(x)
z = x + 20 * y

scaled_z = (z - z.min()) / z.ptp()
colors = plt.cm.coolwarm(scaled_z)

plt.scatter(x, y, marker='+', edgecolors=colors, s=150, linewidths=4)
plt.show() 
```

结果： ![在此处输入图像描述](../Images/d50e19b690110b95d6e37ed92e37afea.png)

该示例通过将值缩放到范围 [0,1] 并使用缩放值`z`调用颜色图来获取 RGBA 值。`plt.cm.coolwarm`当以这种方式调用时，matplotlib 颜色图返回一个 RGBA 值数组，每一行给出相应输入值的颜色。例如：

```
>>> t = np.linspace(0, 1, 5)
>>> t
array([ 0\.  ,  0.25,  0.5 ,  0.75,  1\.  ])
>>> plt.cm.coolwarm(t) 
array([[ 0.2298,  0.2987,  0.7537,  1\.    ],
       [ 0.5543,  0.6901,  0.9955,  1\.    ],
       [ 0.8674,  0.8644,  0.8626,  1\.    ],
       [ 0.9567,  0.598 ,  0.4773,  1\.    ],
       [ 0.7057,  0.0156,  0.1502,  1\.    ]]) 
```

# javascript - 嵌入 javascript 片段：标签注入与完整标签

> ID：12965078
> 
> 赞同：2
> 
> 时间：2012-10-18T23:06:15.943
> 
> 标签：javascript, code-snippets

在 facebook 开发者文档中，我看到：

```
<html>
    <head>
      <title>My Great Web page</title>
    </head>
    <body>

      <div id="fb-root"></div>
      <script>
        // Load the SDK Asynchronously
        (function(d){
           var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
           if (d.getElementById(id)) {return;}
           js = d.createElement('script'); js.id = id; js.async = true;
           js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
           ref.parentNode.insertBefore(js, ref);
         }(document));
      </script>

      <div class="fb-like"></div>

    </body>
 </html> 
```

像谷歌分析一样，这会生成一个脚本标签，并将其插入到 dom 中。

为什么不一`<script type="text/javascript" src="someUrl.com/etc"></script>`开始就写呢？

我假设它通过在页面加载（又名异步）后加载/注入来防止阻塞行为。异步是唯一的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T23:11:06.183

这种加载脚本的形式将其异步添加到页面中。

较旧的浏览器不支持该属性`js.async = true;`，因此即使在较旧的浏览器上也可以使用该属性。

工作原理：它将脚本添加到头部或 dom 的已加载部分，以防止浏览器在继续之前下载此脚本。

# sql - 有没有办法在 DSN 中设置 ODBC 连接选项？

> ID：12965080
> 
> 赞同：0
> 
> 时间：2012-10-18T23:06:41.433
> 
> 标签：sql, sql-server, sql-server-2008, cursor, odbc

我的应用程序（一个测试用例自动化工具）不支持调用 ODBC 的[SQLSetStatmentOption](http://msdn.microsoft.com/en-us/library/ms130794.aspx)。我需要将游标选项[SQL_SOPT_SS_CURSOR_OPTIONS 设置为 SQL_CO_FFO_AF](http://msdn.microsoft.com/en-us/library/ms131361.aspx)。现在我使用连接字符串（无 DSN）连接到服务器。我正在使用[sqlsrv32.dll 或 Sqlncl10.dll](http://msdn.microsoft.com/en-us/library/ms131291.aspx)。

有没有办法在我的工具和 MSSQL 服务器之间的 DSN（或其他层）中设置光标选项？该工具处理创建游标（或结果集）并以似乎掩盖任何直接管理它的能力的方式遍历结果集。它确实允许调用 SQLSetConnectAttr() 但据我所知，没有办法在那里设置游标选项。

所有这些都是为了加快通过远程连接检索数据的速度。在 SQL Management Studio 中，我得到了与本地或远程数据库相当的响应时间，但在自动化工具中，远程查询花费的时间要长数百倍，可能是因为它似乎每行都往返于服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:00:04.137

没有办法在我知道的连接字符串中设置语句选项。在 ODBC 1.0 和 2.0 中，您可以调用 SQLSetConnectOption 以获取语句属性，并且它们会在该连接中创建的每个语句中设置这些属性，但是 a）这是 API 的旧版本（尽管它可能仍然有效） b）您仍然不能这样做它来自 DSN。在 unixODBC 中，您可以在 DSN 中设置一些环境和连接属性，但显然是 Windows。

无论如何，我不相信您已经正确识别了问题，即使您有，您怎么知道您的应用程序不使用 SQLGetData（设置 SQL_CO_FFO_AF 时禁用）。你确定你没有启用 MARs。您是否尝试获取 ODBC 跟踪以查看应用程序在做什么？

# c++ - 如何创建容器和类型都是参数的模板函数？

> ID：12965082
> 
> 赞同：0
> 
> 时间：2012-10-18T23:06:48.143
> 
> 标签：c++, templates

这可能是一个微不足道的问题，但让我发疯。我想定义一个`foo()`可以与不同容器一起使用的函数，例如 ：`vector<int>`、和.`vector<double>``set<int>``set<double>`

我试图这样定义 foo ：

```
template<typename CONT, typename T>
   int foo(CONT<T>){
      //evaluate x
      return (int) x ;
   } 
```

这种定义不起作用，但我不明白为什么。

我怎样才能实现类似的目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T23:11:45.323

指定容器类模板及其实例化的方法是使用模板模板参数：

```
template <template <typename...> class Cont, typename T>
int foo(Cont<T>) {
    ...
} 
```

Note that `Cont` is using a variable number of arguments because otherwise it wouldn't cover the unknown number of defaulted template arguments the standard containers have.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T23:10:59.140

考虑一下：

```
template< class ContainerT >
int foo( ContainerT const& c ) {
} 
```

然后`ContainerT`可以是任何事物，包括`std::vector<int>`，`std::vector<std::string>`甚至`std::map<std::string, int>`。所以你不需要添加一个新的模板参数，如果你需要知道类型只是使用`value_type`你的容器：

```
typedef typename ContainerT::value_type container_type; // Or T in your foo 
```

# c# - MonoTouch.Dialog 中的图像或视频附件字段

> ID：12965083
> 
> 赞同：1
> 
> 时间：2012-10-18T23:07:12.113
> 
> 标签：c#, ios, xamarin.ios, monotouch.dialog, xamarin

我有一个正在 MonoTouch.Dialog 中构建的 UI。我想要一个 UI 字段，用户可以在其中单击并将 iPad 上图库中的照片或视频附加到表单中。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:35:59.743

您可以使用简单的 ImageElement 作为 UI 字段和[UIImagePickerController](http://docs.xamarin.com/index.php?title=ios/recipes/Media/Video_and_Photos/Choose_a_Photo_From_the_Gallery&action=source)来允许用户选择图像或视频。

# java - 发现错误后退出我的程序

> ID：12965085
> 
> 赞同：0
> 
> 时间：2012-10-18T23:07:22.277
> 
> 标签：java, exit, exit-code

我的程序假设发生任何错误后退出！它获取 3 个命令行并验证并检查它们是否在范围内。如果不是，则必须打印错误并退出程序！

我这样做了`System.exit();` 但是，如果程序有 2 个错误条目，它只会打印第一个错误并跳出程序！

在显示所有错误后，还有其他方法可以跳出我的程序吗？

这是我的代码：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:18:47.253

您是否可以不将错误消息添加到字符串数组并在退出之前在程序结束时打印该数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T23:26:31.823

您可以删除所有 System.exit() 并创建带有消息错误的标志 String[]，并添加打印 String[] 以显示错误。

# google-maps - 获取城市中所有路口的列表

> ID：12965090
> 
> 赞同：8
> 
> 时间：2012-10-18T23:07:39.557
> 
> 标签：google-maps, maps, openstreetmap, google-places-api, google-places

获取主要城市所有十字路口列表的最佳来源和方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-22T15:45:40.573

If one doesn't mind a few false positives the following Overpass API script gets road intersections out of OpenStreetMap data pretty easily:

[http://overpass-turbo.eu/s/QD](http://overpass-turbo.eu/s/QD)

(the script can't detect false intersections – where only two lines meet, though, e.g. when a road is represented by multiple way objects in the OSM data)

*In case that the script goes offline a more readable version directly here:*

*   Dependent on which kind of ways you are interested in, add the types of ways which should not count as intersection to the *regv* attribute (at two script sections). The type of ways can be found here: [highway tags](https://wiki.openstreetmap.org/wiki/Key:highway).
*   The BoundingBox is the part of the map you are viewing on the Overpass-tourbo Website.

**Sample Script:**

```
<!-- Only select the type of ways you are interested in -->
<query type="way" into="relevant_ways">
  <has-kv k="highway"/>
  <has-kv k="highway" modv="not" regv="footway|cycleway|path|service|track"/>
  <bbox-query {{bbox}}/>
</query>

<!-- Now find all intersection nodes for each way independently -->
<foreach from="relevant_ways" into="this_way">  

  <!-- Get all ways which are linked to this way -->
  <recurse from="this_way" type="way-node" into="this_ways_nodes"/>
  <recurse from="this_ways_nodes" type="node-way" into="linked_ways"/>
  <!-- Again, only select the ways you are interested in, see beginning -->
  <query type="way" into="linked_ways">
    <item set="linked_ways"/>
    <has-kv k="highway"/>
    <has-kv k="highway" modv="not" regv="footway|cycleway|path|service|track"/>
  </query>

  <!-- Get all linked ways without the current way --> 
  <difference into="linked_ways_only">
    <item set="linked_ways"/>
    <item set="this_way"/>
  </difference>
  <recurse from="linked_ways_only" type="way-node" into="linked_ways_only_nodes"/>

  <!-- Return all intersection nodes -->
  <query type="node">
    <item set="linked_ways_only_nodes"/>
    <item set="this_ways_nodes"/>
  </query>
  <print/>
</foreach> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-22T13:13:29.080

您可以使用 OpenStreetMap 数据来完成。

1.  下载城市的数据（使用导出链接：[http](http://www.openstreetmap.org/export) ://www.openstreetmap.org/export或从此处获取数据：http: [//metro.teczno.com/](http://metro.teczno.com/)；还有其他来源，但这不是列出它们的地方）。

2.  [为“highway”标签 ( http://wiki.openstreetmap.org/wiki/Key:highway](http://wiki.openstreetmap.org/wiki/Key:highway) )找到所有具有适当值的元素。

3.  对于每一种这样的方式，获取组成它的节点 ID。

4.  创建一个数组，其中包含由高速公路信息（名称等）和一个节点组成的条目，每个节点一个节点。

5.  根据节点 ID 对数组进行排序。这按节点对条目进行分组，因此具有重复节点的一组条目表示一个交集。

6.  遍历数组，提取其中包含多个条目的每组条目，并将新条目添加到交叉点列表中。此时，您可以提取高速公路信息，以便可以通过在该处相遇的高速公路来表征交叉口。

这是一个简短的总结，我知道。但我知道它有效，因为它是我在地图渲染库中用于在创建路线数据时识别交叉点的系统。

# django - STATIC_URL 问题

> ID：12965091
> 
> 赞同：1
> 
> 时间：2012-10-18T23:07:45.303
> 
> 标签：django, django-staticfiles

Django 的静态文件让我发疯。我成功地能够从 TEMPLATE_DIRS 中指定的目录加载我的模板，但是当我尝试从 STATICFILES_DIRS 加载我的 css 和 js 文件时它不起作用。

以下是我的 settings.py 文件的相关部分：

```
MEDIA_ROOT = ''
MEDIA_URL = ''

STATIC_ROOT = ''

STATIC_URL = '/static/'

STATICFILES_DIRS = (
    '/home/jrubins/Documents/crowdcluster/crowdcluster/Design/websiteDesign/website/',
)

STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
)

TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
)

TEMPLATE_CONTEXT_PROCESSORS = (
    'django.core.context_processors.debug',
    'django.core.context_processors.i18n',
    'django.core.context_processors.media',
    'django.core.context_processors.static',
    'django.contrib.auth.context_processors.auth',
    'django.contrib.messages.context_processors.messages',
)

TEMPLATE_DIRS = (
    '/home/jrubins/Documents/crowdcluster/crowdcluster/Design/websiteDesign/website/',
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'items'
) 
```

如果您需要更多信息或发现有问题，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:13:17.440

看起来我没有在我的 render_to_response() 中添加 RequestContext 。解决了这个问题，应该仔细查看 django 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T23:13:07.487

我遇到了同样的问题，但我发现这个网站有很多信息可以帮助 [http://www.b-list.org/weblog/2006/jun/14/django-tips-template-上下文处理器/](http://www.b-list.org/weblog/2006/jun/14/django-tips-template-context-processors/)

# audio - 音频延迟 - 包装变量？

> ID：12965097
> 
> 赞同：0
> 
> 时间：2012-10-18T23:08:33.317
> 
> 标签：audio, delay

我可能遗漏了一些简单的东西——但我似乎无法让它发挥作用。我有一个简单的音频延迟 - 具有 [65536] 的固定数组大小 - 它完美地工作 - 问题是 - 如果我尝试使数组大小 - 更短或更长 - 它会爆炸！

这是工作代码：

```
 float b[65536]; // initialisation
    int p, r0, r1;
    float len, d, feedback; // d = decimal part of length
    int leni; // integer value of length

    if (len > 65534) len = 65534; 
    else if (len < 1) len = 1;
    leni = (int) len; // float to INT conversions are cpu intensive. 

    d = len - leni;
    r0 = p - leni; // loop
    r1 = r0 - 1;
    if (r0 < 0) r0 += 65536;
    if (r1 < 0) r1 += 65536;

 output = b[r0] + d * (b[r1] - b[r0]);
    b[p] = input + output * feedback;
    p++;
    if (p > 65535) p = 0; 
```

现在这里是非工作代码：

```
 float b[16384]; // initialisation
    int p, r0, r1;
    float len, d, feedback; // d = decimal part of length
    int leni; // integer value of length

    if (len > 16382) len = 16382;
    else if (len < 1) len = 1;
    leni = (int) len; // float to INT conversions are cpu intensive. 

    d = len - leni;
    r0 = p - leni; // loop
    r1 = r0 - 1;
    if (r0 < 0) r0 += 16384;
    if (r1 < 0) r1 += 16384;

 output = b[r0] + d * (b[r1] - b[r0]);
    b[p] = input + output * feedback;
    p++;
    if (p > 16383) p = 0; 
```

不知道该怎么做，我是不是把它包装错了——还是 65536 是一个特殊的 int 案例？

提前感谢安德鲁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T15:40:42.877

您的代码有点难以理解——例如，我不清楚为什么您需要将浮点数更改为整数，变量的初始值（如 len）是什么或循环发生的位置。我什至不确定它是什么语言（python？），也许这些事情对于了解该语言的人来说是显而易见的，在这种情况下，我为我的无知道歉。

但是，我可以推测它适用于 65536 的事实可能与 65536 是 2 的幂有关，并且不知何故，该属性可以解决您拥有的任何其他错误。

我不会尝试修复您的代码，因为正如我所说，我无法遵循它 - 再次抱歉。相反，请参阅我的答案here，它告诉您如何编写延迟和回声。它是类似 c 的伪代码，应该很容易移植，而且代码行数很少：

[如何使用objective-c在音频文件上添加回声效果](https://stackoverflow.com/questions/11793310/how-to-add-echo-effect-on-audio-file-using-objective-c)

# assembly - 汇编器 64b 划分

> ID：12965098
> 
> 赞同：4
> 
> 时间：2012-10-18T23:08:36.453
> 
> 标签：assembly, x86, numbers, 64-bit, division

我需要一些简单的方法来在 x86 的汇编程序中划分 64b 无符号整数。我的号码保存在两个 32b 寄存器 EDX:EAX 中，我需要将结果放回 EDX:EAX。因子是 32b 整数。请给一些代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T10:17:12.710

如果我正确解释了您的问题（尤其是 part `Factor is in 32b integer`），您希望将 64 位被除数除以 32 位除数并得到 64 位商。

如果这种解释是正确的，那么在 32 位代码中实际上很容易做到。

这个想法是你将除数的两个“一半”除以除数，然后将第一个除法的剩余部分重用于第二个除法。

说明如何执行此操作的 C 代码：

```
#include <stdio.h>
#include <limits.h>

#define C_ASSERT(expr) extern char CAssertExtern[(expr)?1:-1]

#if UINT_MAX >= 0xFFFFFFFF
typedef unsigned int uint32;
#else
typedef unsigned long uint32;
#endif
typedef unsigned long long uint64;

typedef unsigned long ulong;

// Make sure uint32=32 bits and uint64=64 bits
C_ASSERT(sizeof(uint32) * CHAR_BIT == 32);
C_ASSERT(sizeof(uint64) * CHAR_BIT == 64);

int div64by32eq64(uint64* dividend, uint32 divisor)
{
  uint32 dividendHi = (uint32)(*dividend >> 32);
  uint32 dividendLo = (uint32)*dividend;
  uint32 quotientHi;
  uint32 quotientLo;

  if (divisor == 0)
    return 0;

  // This can be done as one 32-bit DIV, e.g. "div ecx"
  quotientHi = dividendHi / divisor;
  dividendHi = dividendHi % divisor;

  // This can be done as another 32-bit DIV, e.g. "div ecx"
  quotientLo = (uint32)((((uint64)dividendHi << 32) + dividendLo) / divisor);

  *dividend = ((uint64)quotientHi << 32) + quotientLo;

  return 1;
}

int main(void)
{
  static const struct
  {
    uint64 dividend;
    uint32 divisor;
  } testData[] =
  {
    { 1 , 0 },
    { 0xFFFFFFFFFFFFFFFFULL, 1 },
    { 0xFFFFFFFFFFFFFFFFULL, 2 },
    { 0xFFFFFFFF00000000ULL, 0xFFFFFFFFUL },
    { 0xFFFFFFFFFFFFFFFFULL, 0xFFFFFFFFUL },
  };
  int i;

  for (i = 0; i < sizeof(testData)/sizeof(testData[0]); i++)
  {
    uint64 dividend = testData[i].dividend;
    uint32 divisor = testData[i].divisor;

    printf("0x%016llX / 0x%08lX = ", dividend, (ulong)divisor);

    if (div64by32eq64(&dividend, divisor))
      printf("0x%016llX\n", dividend);
    else
      printf("division by 0 error\n");
  }

  return 0;
} 
```

输出（[ideone](http://ideone.com/aVoNoh)）：

```
0x0000000000000001 / 0x00000000 = division by 0 error
0xFFFFFFFFFFFFFFFF / 0x00000001 = 0xFFFFFFFFFFFFFFFF
0xFFFFFFFFFFFFFFFF / 0x00000002 = 0x7FFFFFFFFFFFFFFF
0xFFFFFFFF00000000 / 0xFFFFFFFF = 0x0000000100000000
0xFFFFFFFFFFFFFFFF / 0xFFFFFFFF = 0x0000000100000001 
```

现在汇编中的等效除法代码（NASM 语法）不检查除以 0：

```
; 64-bit dividend
mov edx, 0xFFFFFFFF
mov eax, 0xFFFFFFFF

; 32-bit divisor
mov ecx, 0xFFFFFFFF

push eax
mov eax, edx
xor edx, edx
div ecx ; get high 32 bits of quotient
xchg eax, [esp] ; store them on stack, get low 32 bits of dividend
div ecx ; get low 32 bits of quotient
pop edx ; 64-bit quotient in edx:eax now
; edx:eax should now be equal 0x0000000100000001 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T23:25:04.583

使用[div](http://msdn.microsoft.com/en-us/library/windows/hardware/ff561504%28v=vs.85%29.aspx)指令怎么样？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T02:26:36.987

快速术语回顾：分子/除数 = 结果 + 余数/除数

首先检查除数是否为零（如果是则中止）。

```
 test eax,eax
     jne .ok
     test edx,edx
     je .divisionByZero
.ok: 
```

将除数向左移动，直到设置 MSB，同时跟踪您做了多少次班次：

```
 xor ebp,ebp            ;ebp = bits shifted so far
    test edx,(1 << 31)
    jne .l2
.l1:
    shld edx,eax,1
    shl eax,1
    inc ebp
    test edx,(1 << 31)
    jne .l1
.l2: 
```

将当前结果设置为零：

```
 xor esi,esi
    xor edi,edi 
```

现在将除数移回其原始位置；从剩余分子中减去当前除数并在当前除数小于当前分子时在结果中设置一个位：

```
.nextBit:
    shld edi,esi,1
    shl esi,1

    cmp ecx,edx
    jb .doneBit
    ja .subtract
    cmp ebx,eax
    jb .doneBit

.subtract:
    sub ecx,edx
    sbb ebx,eax
    or esi,1

.doneBit:
    sub ebp,1
    jnc .nextBit 
```

此时 EDX:EAX 与之前的值相同，EDI:ESI 是结果，ECX:EBX 是余数。

警告：以上所有内容均未经测试。这只是一个示例/描述。

注意：如果数字是有符号的，您需要先从分子和除数中删除符号位；然后在结果中设置符号位，稍后设置余数 ( `sign = numerator_sign XOR divisor_sign`)。

# html - 导航宽度不随内容变化

> ID：12965103
> 
> 赞同：0
> 
> 时间：2012-10-18T23:08:53.737
> 
> 标签：html, css, width, nav

我有一个导航栏，当我有 5 个导航对象时显示正常，但是当我再添加 3 个时，它会下降到主标题下方，为什么？

**5个对象：**

![在此处输入图像描述](../Images/f7d8654c833b899105c88000536e7b58.png)

**7个对象：**

![在此处输入图像描述](../Images/1775ecdc55306c4bd146425404d9eb3f.png)

**HTML：**

```
<div id="header">
    <div class="w960">
        <div id="logo">
            <h2>Text</h2>
            <p>Text</p>
        </div>
        <nav>
            <ul>
                <li class="first active">
                    <a href="#">1</a>
                </li>
                <li>
                    <a href="#">2</a>
                </li>
                <li>
                    <a href="#">3</a>
                </li>
                <li>
                    <a href="#">4 </a>
                </li>
                <li class="last">
                    <a href="#">5</a>
                </li>
            </ul>
        </nav>
    </div>
</div><!-- end of header --> 
```

​</p>

**CSS：**

```
#header{background:#2d2d2f;width:100%; height:120px;clear:both;font-family:Signika,Arial,sans-serif;}

.w960 { width:960px; margin:auto; }

nav{width:auto; float:right;line-height: 50px;}
nav ul li{font-size:14px; float:left;display: inline-block;padding: 0px 11px;text-transform:uppercase;}
nav ul li a{padding: 0px 10px; color:#ffb400; text-decoration:none;}
nav ul li a:hover, .active a{color:#fff}

#logo{width: 40%;float: left;height: 90px;}
#logo h2{line-height: 41px;color:#FFB400;font-size:28px;}
#logo h2 span{color:#FFB400;}
#logo p {margin-top: -25px;color:#b8bbbc;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:11:32.683

如果你的意思是问为什么标题容器的背景没有出现在链接后面，那是因为浮动`li`的s。

您将需要添加一个`clearfix`类。

```
.clearfix:before,
.clearfix:after {
    content: "";
    display: table;
}
.clearfix:after {
    clear: both;
}
.clearfix {
    *zoom: 1;
} 
```

并将该类应用于您的标题：

```
<div id="header" class="clearfix"> 
```

如果您的意思是他们为什么要分解一条线，那是因为`<div class="w960">`容器上的固定宽度。

```
.w960 { width:960px; margin:auto; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T23:39:18.510

您在同一行中有两个浮动元素，如果两个宽度之和大于可用空间，它们将打破该行并将第二个浮动元素放置在前一个下方：在您的情况下，导航位于徽标下方。给它们每一个添加边框，你会发现它们太大了。

一种替代方法是：http: [//jsfiddle.net/Bs93k/](http://jsfiddle.net/Bs93k/)

```
nav{width:auto; /*float:right;*/ overflow:auto; line-height: 50px;} 
```

这将使 nav 占用可用空间，但是，我认为它的内容不会像你喜欢的那样表现。

第二种选择是：http: [//jsfiddle.net/PU7hV/](http://jsfiddle.net/PU7hV/)

```
#header{display:table;}
.w960 {position:relative;}
nav{/*float:right;*/ position:absolute; top:0; right:0;} 
```

请注意，我写了您必须添加的内容并评论了要删除的内容，其余的，让它们保持原样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T23:17:14.117

只要您没有下拉子菜单，我建议您使用溢出：隐藏。

```
nav ul {
    overflow: hidden;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T23:23:05.007

如果您无法更改 HTML（例如，您无权访问输出 HTML 的脚本）添加 clearfix，您可以像这样更改 CSS：

```
#header {
    background: none repeat scroll 0 0 #2D2D2F;
    clear: both;
    float: left;
    font-family: Signika,Arial,sans-serif;
    height: auto;
    width: 100%;
} 
```

# c# - 如何检查我在 textBox 中输入的 url 是否出现在列表中？

> ID：12965111
> 
> 赞同：0
> 
> 时间：2012-10-18T23:09:45.883
> 
> 标签：c#

我有一个列表类型的字典>，称为 LocalyKeyWords。我有一个新表单，其中有一个文本框，我可以在其中键入一个新的 url 地址，它称为 cl.getText()。

当我单击按钮时，它显示一个只有一个文本框的新表单。

```
private void button2_Click(object sender, EventArgs e)
        {
            cl = new ChangeLink();
            cl.StartPosition = FormStartPosition.CenterParent;
            DialogResult dr = cl.ShowDialog(this);
            if (dr == DialogResult.Cancel)
            {
                cl.Close();
            }
            else if (dr == DialogResult.OK)
            {    
                    label4.Text = cl.getText();
                    mainUrl = cl.getText();
                    for (int i = 0; i < LocalyKeyWords.Count(); i++ )
                    {
                        if (LocalyKeyWords[i].Contains(cl.getText()))
                        {

                        }
                    }
                    OptionsDB.set_changeWebSite(cl.getText());
                    cl.Close();
            } 

        } 
```

我想检查用户在 cl.getText() 中输入的 url 是否已经存在于 LocalyKeyWords 列表中，所以我尝试了这个：

```
for (int i = 0; i < LocalyKeyWords.Count(); i++ )
                    {
                        if (LocalyKeyWords[i].Contains(cl.getText()))
                        {

                        }
                    } 
```

但它不起作用。我想遍历 List 中的所有项目，最后如果 cl.getText() 不存在于 List 中的任何项目中，则执行某些操作。

我该怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:21:26.113

您的样本不完整，但您可以使用它

```
 Dictionary<int, string> LocalyKeyWords = new Dictionary<int, string>();
        LocalyKeyWords.Add(0, "dog");
        LocalyKeyWords.Add(1, "lizard");
        LocalyKeyWords.Add(2, "cat");

        for (int i = 0; i < LocalyKeyWords.Count()-1; i++)
        {
            if (LocalyKeyWords[i].Contains( "lizard" ) )
            {
                Console.WriteLine( "Found the lizard");

            }
        } 
```

# android - 如何将视图返回到选定的索引。flex（闪存生成器）

> ID：12965112
> 
> 赞同：0
> 
> 时间：2012-10-18T23:09:55.927
> 
> 标签：android, apache-flex, pushviewcontroller, flash-builder, selectedindex

我有一个显示在我的应用程序主屏幕上的 ArrayCollection。我以前有我的代码在选定的索引上推送视图。现在我已经为这个数组集合实现了我的搜索栏。所选索引与搜索索引不匹配。前任。selected index == 0 曾经是 A1c 计算器，如果有人搜索 BMI 计算器，它就会变成 A1c，因为它现在在 selected index == 0 中。

我如何通过在选择 A1c 时总是拉 A1c 来解决这个问题，依此类推，无论它是什么索引。这是代码。

```
 '<?xml version="1.0" encoding="utf-8"?>
            <s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
                    xmlns:s="library://ns.adobe.com/flex/spark" title="iCalculate">

                <fx:Declarations>
                    <!-- Place non-visual elements (e.g., services, value objects) here -->
                </fx:Declarations>

                <s:layout>  
                    <s:VerticalLayout paddingTop="10"/>
                </s:layout>
                <fx:Script>
                    <![CDATA[
                        import mx.collections.ArrayCollection;
                        import mx.collections.ArrayList;
                        import mx.events.IndexChangedEvent;
                        import mx.utils.object_proxy;

                        import spark.collections.Sort;
                        import spark.collections.SortField;
                        import spark.components.Image;
                        import spark.components.ViewMenu;
                        import spark.events.IndexChangeEvent;

                        // This method contains the selection assignments for the                                Calculator Views
                        protected function calcList_changeHandler(event:IndexChangeEvent):void
                        {

                            if (calcList.selectedIndex == 0)//A1c Calculator
                            {
                                navigator.pushView(views.A1CCalculator);
                            }
                            else if (calcList.selectedIndex ==1)//BMI Calculator
                            {
                                navigator.pushView(views.BMI_Calculator);
                            }
                            else if (calcList.selectedIndex ==2)//GPA Calculator
                            {
                                navigator.pushView(views.GPA_Calculator);
                            }
                            else if (calcList.selectedIndex ==3)//TIP Calculator
                            {
                                navigator.pushView(views.TipCalculator);
                            }

                        }

                    //Below This Line is the code for the Filter Feature
                    private function filterList():void{
                        calcListCollection.filterFunction=searchList;
                        calcListCollection.refresh();

                    }
                    private function searchList(item:Object):Boolean{
                        var isMatch:Boolean = false
                            if(item.name.toLowerCase().search(search.text.toLowerCase())!=-1){
                                isMatch = true
                            }
                            return isMatch;
                    }
                    private function clearSearch():void{
                        calcListCollection.filterFunction=null;
                        calcListCollection.refresh();
                        search.text=""; 

                    }

                    ]]>
                </fx:Script>
                <s:HGroup width="100%" height="43">
                    <s:TextInput id="search" width="100%" prompt="Search iCalculate" textAlign="center" change="filterList()"/>

                </s:HGroup>

                <s:List id="calcList" alternatingItemColors="[#e5e4e4,#ffffff]"
                        width="100%"
                        height="98%"
                        labelField="name"
                        change="calcList_changeHandler(event)">
                    <s:dataProvider>

                        <s:ArrayCollection id="calcListCollection">  
                            <fx:Object name="A1c Calculator" />
                            <fx:Object name="BMI Calculator" />
                            <fx:Object name="GPA Calculator" />
                            <fx:Object name="Tip Calculator" />

                        </s:ArrayCollection>
                    </s:dataProvider>
                </s:List>

                <s:Label width="100%" click="navigator.pushView(views.CompanyDetail)" color="#1021C7" 
```

'

先感谢您。

瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:22:09.490

我认为原因是：您不能使用 selectedIndex 来识别视图。

因此，您可以向 ArrayList 的对象添加“viewId”属性：

```
<fx:Object viewId="A1c" name="A1c Calculator"/> 
```

并且您的列表更改事件处理程序可以使用“viewId”来识别视图：

```
 if (calcList.selectedItem.viewId == "A1c")//A1c Calculator
 {
   navigator.pushView(views.A1CCalculator);
 } 
```

# actionscript-3 - JSFL 命令将文本字段拆分为单词 - Flash 数组顺序错误

> ID：12965113
> 
> 赞同：1
> 
> 时间：2012-10-18T23:10:02.940
> 
> 标签：actionscript-3, split, flash-cs5, textfield, jsfl

此命令应该在 Flash 中获取选定的文本字段，并根据文本字段中的单词或空格将其分成不同的组。该命令混淆了单词的顺序。（在下面的代码中，我取出了将组分配到不同层的部分。）

如果我输入单词“Test of the command”并运行该命令，它会反转字符数并将文本字段从后到前切开。

例如，第一个单词“ **TEST** ”有四个字母。错误是它将从单词“ **command** ”末尾的“d”处的文本字段的末尾开始计数。

所以结果是在应该切割“TEST”时切割“ **mand ”，依此类推。**如果你从后往前数，你可以看到拆分对应的字母数量是正确的，但它是相反的......

我的第一个直觉是尝试使用 .reverse() 反转其中一个数组的顺序。但它没有用。

我正在使用 Flash CS 5.5、AS3。请帮忙！

这是我正在谈论的图片...

![在此处输入图像描述](../Images/e9a89dff1c0febe57e6012b3c62b8339.png)

```
var doc = fl.getDocumentDOM();

var mystring = doc.getTextString();

var numberOfWords = mystring.split(" ").length;
var wordArray = new Array();
for (var k = 0; k < numberOfWords; k++){
    wordArray[k] = new Array();
}

cntrNew = i = j = 0;
for (var ctr = 0; ctr < mystring.length; ctr++){
    if (mystring.charAt(ctr) == " "){
        i++;
    }
    else{
        wordArray[i].push(cntrNew);
        cntrNew++;
    }
}

doc.breakApart();
var selectionArray = new Array();
var tempArray = new Array();
var finalArray = new Array();

selectionArray = doc.selection;
doc.selectNone();

for (var i in wordArray){
    for (var k = 0; k < wordArray[i].length; k++){
        fl.trace(wordArray[i][k]);
        //wordArray.reverse();
        tempArray[k] = selectionArray[wordArray[i][k]];
     }
    fl.trace("break");

    doc.selection = tempArray;
    doc.group();
    finalArray[i] = doc.selection;
    doc.selectNone();
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:20:07.950

也许这会有所帮助。我稍微简化了你的过程。我在一个 AS3 项目中测试了一个名为“txt”的舞台上的文本字段

```
var mystring:String = txt.text;
var words:Array     = mystring.split(" ");

for (var i = 0; i < words.length; i++)
{
    for (var k = 0; k < words[i].length; k++)
    {
        trace("letter:",words[i].charAt(k));
    }
    trace("-");
} 
```

它输出：

```
letter: t
letter: e
letter: s
letter: t
-
letter: o
letter: f
-
letter: t
letter: h
letter: e
-
letter: c
letter: o
letter: m
letter: m
letter: a
letter: n
letter: d
letter: s
- 
```

# sql-server - 如果没有游标或循环，我怎么能做到这一点？

> ID：12965114
> 
> 赞同：0
> 
> 时间：2012-10-18T23:10:05.380
> 
> 标签：sql-server, tsql, sql-server-2005, declarative

我听说要使用声明式编程，但我不知道如何在 sql server 2005 中做这样的事情（我输入得非常快，所以我不确定所有语法是否正确，但我想你会明白我的意思米找）

```
declare curs cursor for
select @Name, @Description, @Id FROM TableA
open curs
while(1=1) 
begin
    fetch next from curs into
        @Name,
        @Description,
        @Id
    if(@@fetch_status<>0) break

    set @recordCount = (SELECT COUNT(*) As RecordCount FROM Class1 WHERE          
            Class1Id = @Id)
    if(@recordCount > 0)
    begin

        if(@Name = 'BAD NAME') CONTINUE
        UPDATE Class1 SET 
            Name = @Name
            , Description = @Description
            WHERE Class1Id = @Id
    end
    else
    begin
        INSERT INTO Class1 (Class1Id, Name, Description)
        VALUES (@Id, @Name, @Description)
    end

end
close curs
deallocate curs 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:17:22.900

```
UPDATE Class1 
SET Name = t.Name, 
Description = t.Description
FROM Class1 c 
JOIN TableA t ON c.id=t.id
WHERE t.name <> 'BAD NAME'

INSERT INTO Class1 (Class1Id, Name, Description)
select t.Id, t.Name, t.Description
FROM TableA t
LEFT JOIN Class1  c on t.id=c.id
where c.id IS NULL 
```

# php - $.getJSON 返回未定义的结果

> ID：12965117
> 
> 赞同：1
> 
> 时间：2012-10-18T23:10:38.563
> 
> 标签：php, javascript, json, undefined

我正在尝试打印简单的 JSON 数据以了解和了解 JSON。我无法弄清楚我在这里做错了什么。

我在这里关注本教程 [http://www.youtube.com/watch?v=rncW-74VL7U](http://www.youtube.com/watch?v=rncW-74VL7U)

这是我的 JavaScript：

```
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script>
$.getJSON("json.php", function(data)
{
    //json.php get the JSON data from here
    //function(data) callback function
    var itemslist = data.items[0];

    document.write(itemslist.key);
});
</script> 
```

这是PHP

```
<?php

// Set up the PHP to return the data in JSON format
header("content-type: application/json; charset=UTF-8" );

// This is a array of objects [key:"value", key2 : {k:"val", k2:"val2"}]
$myobj = '{items : [key:"value", key2 : {k:"val", k2:"val2"}]}';

$count = 2;

// Encode the above variables in JSON
echo json_encode(array("items" => $myobj, "count" => $count)); 
```

非常感谢您的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:32:16.220

首先，您的 json 中有两个 items 节点。json_encode 中的项目和 myobj 字符串（现在是数组）中的项目。这就是 data.items[0] 不起作用的原因，它必须是 data.items.items[0]。也就是说，我首先发送给您的是使用键而不是索引，因此它确实需要是 data.items.items.key。综上所述，我所包含的当前结构应该更好。

其次，尝试更多地使用console.debug。我刚刚在我的开发盒上复制了您的代码并运行它，并通过查看对象的外观发现了大部分 json 问题（我在 javascript 的注释中包含了当前的 console.debug(data) 输出）。这是有关 chrome 调试信息的链接：[https ://developers.google.com/chrome-developer-tools/docs/console](https://developers.google.com/chrome-developer-tools/docs/console)

**PHP**

```
<?php

// Set up the PHP to return the data in JSON format
header("content-type: application/json; charset=UTF-8" );

// This is a array of objects [key:"value", key2 : {k:"val", k2:"val2"}]
$myobj= array(
          "value",
           array("k"=>"val","k2"=>"val2")
          );

$count = 2;

// Encode the above variables in JSON
echo json_encode(array("items" => $myobj, "count" => $count));
?> 
```

**Javascript**

```
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script>
$.getJSON("json.php", function(data){
    console.debug(data);
    var itemslist = data.items[0];
            console.debug(itemslist);
    document.write(itemslist);
});

/*
Object
    count: 2
    items: Object
        0: "value"
        1: Object
            k: "val"
            k2: "val2"
*/

</script> 
```

# javascript - 如何让两个 Javascript div 在彼此重叠时都可以拖动？

> ID：12965121
> 
> 赞同：0
> 
> 时间：2012-10-18T23:11:11.020
> 
> 标签：javascript, html, css

我有几个`div`s 在彼此之上。顶部的需要可拖动，而其下方的仍应可单击。我附上下面的图片，以便您可以更多地理解我的意思：

![http://i.stack.imgur.com/ZqYzF.png](../Images/cbe8323439b6093c00d606653144331d.png)

绿色`div`的 s 在其中一个单元格中。当我单击其中一个单元格时，我会得到上面的菜单。我希望能够抓取绿色 div，如果我点击`mouseclick`事件内部，将在不是父 div 后面的单元格上触发。

这是 div 的 html，以便您更好地理解结构：

```
<!-- Spot 00,30 --->
<div id="2_0" class="spot"> </div>

<!-- Spot 15,45 --->
<div id="2_0_1" class="spot"> </div>
<!-- Spot 00,30 --->
<div id="2_1" class="spot" style="background: none repeat scroll 0% 0% transparent;"> </div>
<!-- Spot 15,45 --->
<div id="2_1_1" class="spot" style="background: none repeat scroll 0% 0% transparent;"> </div>
<!-- Spot 00,30 --->
<div id="2_2" class="spot" style="background: none repeat scroll 0% 0% transparent;"> </div>
<!-- Spot 15,45 --->
<div id="2_2_1" class="spot" style="background: none repeat scroll 0% 0% transparent;"> </div>
<!-- Spot 00,30 --->
<div id="2_3" class="spot" style="background: none repeat scroll 0% 0% transparent;">
<div class="wc-event green ui-draggable" ondblclick="showAppointment(20)" style="display: block; height: 210px;" data-id="20" data-type="booking">
</div>
<!-- Spot 15,45 --->
<div id="2_3_1" class="spot" style="background: none repeat scroll 0% 0% transparent;"> </div>
<!-- Spot 00,30 --->
<div id="2_4" class="spot" style="background: none repeat scroll 0% 0% transparent;"> </div>
<!-- Spot 15,45 --->
<div id="2_4_1" class="spot" style="background: none repeat scroll 0% 0% transparent;"> </div>
<!-- Spot 00,30 --->
<div id="2_5" class="spot" style="background: none repeat scroll 0% 0% transparent;"> </div>
<!-- Spot 15,45 --->
<div id="2_5_1" class="spot" style="background: none repeat scroll 0% 0% transparent;"> </div>
<!-- Spot 00,30 --->
<div id="2_6" class="spot" style="background: none repeat scroll 0% 0% transparent;"> </div> 
```

这是为深绿色`div`。

我怎样才能使它顶部的 div 是可拖动的，而底部的仍然是可点击的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:14:18.127

虽然您可以使用事件委托在一个位置捕获多个元素的事件，但您将无法触发被另一个元素遮挡的 div 的单击事件。

# matrix - 重复平方 - 使用 NEWMAT 的矩阵乘法

> ID：12965126
> 
> 赞同：2
> 
> 时间：2012-10-18T23:11:37.087
> 
> 标签：matrix, matrix-multiplication

我正在尝试使用重复平方算法（使用递归）来执行矩阵求幂。我已经包含了 NEWMAT 库中的头文件，而不是使用数组。原始矩阵具有 (-5,5) 范围内的元素，所有数字均为浮点类型。

```
# include "C:\User\newmat10\newmat.h"
# include "C:\User\newmat10\newmatio.h"
# include "C:\User\newmat10\newmatap.h"

# include <iostream>
# include <time.h>
# include <ctime>
# include <cstdlib>
# include <iomanip>

using namespace std;

Matrix repeated_squaring(Matrix A, int exponent, int n) //Recursive function
 {
    A(n,n);
    IdentityMatrix I(n);

    if (exponent == 0) //Matrix raised to zero returns an Identity Matrix
    return I;

    else 
    {

        if ( exponent%2 == 1 ) // if exponent is odd
        return (A * repeated_squaring (A*A, (exponent-1)/2, n));

        else //if exponent is even
        return (A * repeated_squaring( A*A, exponent/2, n));
    }
  }

 Matrix direct_squaring(Matrix B, int k, int no) //Brute Force Multiplication
  {
B(no,no);
Matrix C = B;
for (int i = 1; i <= k; i++)
    C = B*C;
return C;
   }

    //----Creating a matrix with elements b/w (-5,5)----

float unifRandom()
{
int a = -5;
int b = 5;
float temp = (float)((b-a)*( rand()/RAND_MAX) + a);
return temp;
}

Matrix initialize_mat(Matrix H, int ord)
{
H(ord,ord);
for (int y = 1; y <= ord; y++)
    for(int z = 1; z<= ord; z++)
        H(y,z) = unifRandom();

return(H);
}
//---------------------------------------------------

void main()
{
int exponent, dimension;

cout<<"Insert exponent:"<<endl;
cin>>exponent;
cout<< "Insert dimension:"<<endl;   
cin>>dimension;

cout<<"The number of rows/columns in the square matrix is: "<<dimension<<endl;
cout<<"The exponent is: "<<exponent<<endl;

Matrix      A(dimension,dimension),B(dimension,dimension);
    Matrix C(dimension,dimension),D(dimension,dimension);

B= initialize_mat(A,dimension);

cout<<"Initial Matrix: "<<endl;

cout<<setw(5)<<setprecision(2)<<B<<endl;
//-----------------------------------------------------------------------------

cout<<"Repeated Squaring Result: "<<endl;

clock_t time_before1 = clock();

C = repeated_squaring (B, exponent , dimension);
cout<< setw(5) <<setprecision(2) <<C;

clock_t time_after1 = clock();
float diff1 = ((float) time_after1 - (float) time_before1);
cout << "It took " << diff1/CLOCKS_PER_SEC << " seconds to complete" << endl<<endl;

//---------------------------------------------------------------------------------

cout<<"Direct Squaring Result:"<<endl;

clock_t time_before2 = clock();

D = direct_squaring (B, exponent , dimension);
cout<<setw(5)<<setprecision(2)<<D;

clock_t time_after2 = clock();
float diff2 = ((float) time_after2 - (float) time_before2);
cout << "It took " << diff2/CLOCKS_PER_SEC << " seconds to complete" << endl<<endl;

} 
```

我面临以下问题：

1.  随机数生成器仅返回“-5”作为输出中的每个元素。
2.  矩阵乘法通过蛮力乘法和使用重复平方算法产生不同的结果。

我正在计时我的代码的执行时间，以比较蛮力乘法和重复平方所花费的时间。

有人可以找出递归和矩阵初始化有什么问题吗？

**注意：**在编译这个程序时，确保你已经导入了 NEWMAT 库。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:49:08.667

`rand()`返回一个 int 所以`rand()/RAND_MAX`将截断为一个`integer = 0`. 手动尝试重复平方算法`with n = 1, 2 and 3`，您会发现`surplus A *` 效率低下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:39:06.260

最终工作代码具有以下改进：

```
Matrix repeated_squaring(Matrix A, int exponent, int n) //Recursive function
{
    A(n,n);
    IdentityMatrix I(n);

    if (exponent == 0) //Matrix raised to zero returns an Identity Matrix
    return I;

    if (exponent == 1)
        return A;

    {

        if (exponent % 2 == 1) // if exponent is odd
        return (A*repeated_squaring (A*A, (exponent-1)/2, n));

        else //if exponent is even
        return (repeated_squaring(A*A, exponent/2, n));
    }
}

Matrix direct_squaring(Matrix B, int k, int no) //Brute Force Multiplication
{
B(no,no);
Matrix C(no,no);
C=B;
for (int i = 0; i < k-1; i++)
    C = B*C;
return C;
} 
```

//----创建一个包含元素 b/w (-5,5) 的矩阵----

```
float unifRandom()
{
int a = -5;
int b = 5;

float temp = (float) ((b-a)*((float) rand()/RAND_MAX) + a);
return temp;
} 
```

# ruby-on-rails - Rails 资产管道路径问题

> ID：12965132
> 
> 赞同：2
> 
> 时间：2012-10-18T23:12:07.270
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, asset-pipeline

我有一个 Rails 应用程序在我的根目录下名为“mintrus-ror/”的文件夹下的共享 Web 主机上运行。有一个符号链接“public_html/”指向“mintrus-ror/public/”。我的 Rails 应用程序在浏览器中加载，但不加载样式表。查看渲染的源代码，我注意到它使用的资产路径是“/mintrus-ror/assets/application.css”。我试图弄清楚如何更改它，使其不包括资产路径中的“mintrus-ror/”目录。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T06:31:01.053

您可以尝试`config.assets.manifest`使用`config/environments/production.rb`. 还有其他变量会影响这一点，其中一个是 Web 服务器配置。我最近（不到六年前）没有使用共享主机的经验，但我在某些系统上读过，您可以编辑`.htaccess`文件。

我还假设您正在生产模式下运行，并且之前已经`rake assets:precompile`在部署步骤中编译了资产。Capistrano 会在资产管道集成打开时自动执行此操作。

[资产管道上](http://guides.rubyonrails.org/asset_pipeline.html)的Rails 指南可能很有用。

您最好的选择可能是在 Heroku 上托管。它对小型网站是免费的，而且麻烦少了很多。

# .net - 组件/目录的延迟加载

> ID：12965137
> 
> 赞同：5
> 
> 时间：2012-10-18T23:13:37.300
> 
> 标签：.net, assemblies, lazy-loading, mef, .net-4.5

我的应用程序由几个核心程序集和几个扩展/插件程序集组成。为了让 MEF 知道插件必须提供的所有部分，我必须加载这些程序集，即使我永远不会使用它们的任何部分。这使得应用程序需要更多时间来启动（如果我要在启动时加载所有程序集）并且还会增加内存占用。

理想情况下，在我真正需要它们之前，我不必加载程序集。我只会加载插件的导出数据，当我真正需要导入一个零件时，MEF 会加载程序集并提供该零件。

我发现有些东西几乎可以完成我刚写的所有内容，但是在[MEF CachedAssemblyCatalog - Lazy Loading of Assemblies](https://stackoverflow.com/q/10833262/389966)中询问后，我意识到这段代码并不稳定，并且没有由 MEF 团队维护，所以我'已经决定不使用它。

我的问题是如何实现这种行为：

*   无需加载整个程序集即可访问插件程序集的导出元数据。
*   与导入部件的代码透明集成；即像往常一样使用导入 - 其他人（专门的目录？）将在必要时负责加载程序集并提供请求的部分。
*   不会丢失任何现有的 MEF 功能，例如重组、惰性类型等。

我完全可以接受需要提前解析插件以创建元数据程序集、XML 文件或诸如此类的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T22:33:12.177

如果您刚刚延迟加载程序集，那么您可能会使用[该问题](https://stackoverflow.com/questions/12328243/how-to-persist-mef-import-and-export-information-to-disk)的部分解决方案。您不需要获取在该解决方案中检索到的所有信息。可能只有合同名称、程序集名称以及零件是导出还是导入合同。然后，您可以编写一个目录，根据需要加载程序集，例如：

```
public sealed class DelayLoadingCatalog : ComposablePartCatalog
{
    // List containing tuples which have the 'contract name' 
    // and the 'assembly name'
    private readonly List<Tuple<string, string>> m_Plugins 
        = new List<Tuple<string, string>>();
    private readonly Dictionary<string, AssemblyCatalog> m_Catalogs 
        = new Dictionary<string, AssemblyCatalog>();

    public DelayLoadingCatalog(IEnumerable<Tuple<string, string>> plugins)
    {
        m_Plugins.AddRange(plugins);
    }

    public override IEnumerable<Tuple<ComposablePartDefinition, ExportDefinition>> GetExports(ImportDefinition definition)
    {
        var partsToLoad = m_Plugins
            .Where(t => t.Item1.Equals(definition.ContractName));
        foreach (var part in partsToLoad)
        {
            if (!m_Catalogs.ContainsKey(part.Item2.Name))
            {
                var assembly = Assembly.Load(new AssemblyName(part.Item2.Name));
                m_Catalogs.Add(part.Item2.Name, new AssemblyCatalog(assembly));
            }
        }

        return m_Catalogs.SelectMany(p => p.Value.GetExports(definition));
    }

    public override IQueryable<ComposablePartDefinition> Parts
    {
        get 
        { 
            throw new NotImplementedException(); 
        }
    }
} 
```

然后你可以像这样使用它

```
class Program
{
    public void Init()
    {
        var domainSetup = new AppDomainSetup
        {
            ApplicationBase = Directory.GetCurrentDirectory(),
        };

        var scanDomain = AppDomain.CreateDomain(
            "scanDomain", 
            null, 
            domainSetup);
        var scanner = scanDomain.CreateInstanceAndUnwrap(
            typeof(MyScanner).Assembly.FullName, 
            typeof(MyScanner).FullName) as MyScanner;
        var plugins = scanner.Scan(myPluginsPath);

        // Make sure we don't have the assemblies loaded anymore ...
        AppDomain.Unload(scanDomain);

        var catalog = new DelayLoadingCatalog(plugins);
        var container = new CompositionContainer(catalog);

        container.ComposeParts(this);
    }

    [Import("MyCoolExport")]
    public object MyImport
    {
        get;
        set;
    }
} 
```

示例 DelayLoadCatalog 不是很聪明，因为它会不断搜索元组列表。不过，优化代码应该不会太难。例如，您可以检查是否所有程序集都已加载并在此时停止搜索该列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-21T20:25:55.247

如果有人感兴趣，我自己实现了一个解决方案，最近在 GitHub 上发布了它。LazyAssemblyLoading[解决](https://github.com/lestera/LazyAssemblyLoading)方案允许用户序列化程序集的部件信息，然后使用它来初始化`LazyAssemblyCatalog`仅在实际需要其中一个部件时才加载程序集，同时仍然允许在程序集未加载时照常使用其元数据.

# php - Mysql NOT ON 语句

> ID：12965141
> 
> 赞同：0
> 
> 时间：2012-10-18T23:13:55.240
> 
> 标签：php, mysql, join, left-join

我有以下查询可以提取属于博客的帖子

```
SELECT p.* 
FROM  `Posts` p
INNER JOIN Blogs b ON b.id = p.blog_id 
```

是否有与“ON”相反的 MySQL 函数？如果我想在“博客”数据库表中查询不属于博客的帖子？例如，如果博客被删除。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T23:15:36.923

您需要使用任一`LEFT JOIN - NULL`组合，如下所示：

```
 SELECT p.*
           FROM Posts p
LEFT OUTER JOIN Blogs b
             ON b.id = p.blog_id
          WHERE b.id IS NULL 
```

...或`NOT IN`从属查询（使用所谓的“反连接”）：

```
 SELECT * 
         FROM Posts 
        WHERE blog_id NOT IN (SELECT id FROM Blogs) 
```

我承认我几乎只使用第一种形式，但实际上它们具有相似的性能：我建议至少浏览[**一下这篇文章**](http://explainextended.com/2009/09/18/not-in-vs-not-exists-vs-left-join-is-null-mysql/)，详细解释这些查询之间的异同；这是一本很有启发性的读物。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T23:15:55.833

这都是关于 JOIN 的。

```
SELECT p.* 
FROM  `Posts` p
LEFT OUTER JOIN Blogs b ON b.id = p.blog_id

WHERE b.Id IS NULL 
```

应该为您解决问题。

Jeff Atwood对连接有[很好的概述](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

在这种情况下，LEFT OUTER JOIN 所做的是将 Blogs 中的所有行与具有相同 blog_id-Id 组合的 Posts 中的所有行以及在 Blogs 中没有匹配 Id 的 Posts 中的所有行匹配。在这种情况下，对于博客中的条目，这些行是 NULL（因为没有任何！），这就是我们过滤的原因`b.Id IS NULL`

还有其他一些方法可以实现这一点；例如：

```
SELECT * FROM Posts WHERE blog_id NOT IN (SELECT Id FROM Blogs) 
```

实际上，这会查询文章中所有具有不在博客表中的 blog_id 的行。

# sql - 带有临时字段的查找表？

> ID：12965149
> 
> 赞同：1
> 
> 时间：2012-10-18T23:14:44.680
> 
> 标签：sql, sql-server, join, lookup

我有一个产生以下结果的查询：

**表格1：**

```
degree_code  occupation_code  degree_completions  degree_level
1.0000       20-2021          10                  1
1.0000       20-2022          10                  1
1.1051       52-2095          2                   3
1.1051       52-2095          41                  2
1.5010       15-1100          2                   3 
```

我有另一个小的查找表，它将 degree_level 与我需要使用的自定义类别相关联：

**表2**

```
degree_level  degree_level_recode
1             AADEGREE
2             AADEGREE
3             BACHDEGREE 
```

我想构建第一个查询的输出以报告以下格式：

```
degree_code  occupation_code  degree_completions  degree_level AADEGREE BACHDEGREE
1.0000       20-2021          10                  1            10       0
1.0000       20-2022          10                  1            10       0
1.1051       52-2095          2                   3            3        0
1.1051       52-2095          41                  2            0        41
1.5010       15-1100          2                   3            2        1 
```

基本上，在原始查询中创建新的临时重新编码字段，当它们与 degree_level_recode 匹配时报告它们下面的 degree_completions，如果不匹配则输入 0。这是高度简化的；我将针对查询中每个元素中的其他字段对重新编码字段执行操作。

我已经展示了 degree_completions 字段以供参考，但出于明显的冗余原因，我将在最终查询中省略它。

我想我需要使用 CASE 语句或类似的东西进行比较检查，但我是 SQL 新手。

**编辑：**

参考下面 Cha 的回答，采用修改后的 table1 输出（映射重新编码后）：

```
degree_code  degree_level  degree_completions  degree_level_recode
01.0601      2             11                  LESSCOLL
01.0601      3             22                  AADEGR
01.0605      2             3                   LESSCOLL 
```

考虑这段代码（table2 在编辑上方引用）：

```
SELECT degree_code
    ,degree_level
    ,[LESSCOL] AS LESSCOL
    ,[AADEGR] AS AADEGR
    ,[BACHDEGR] AS BACHDEGR
    ,[MADEGR] AS MADEGR
    ,[DOCDEGR] AS DOCDEGR
FROM 
    (
    SELECT degree_code
        ,table1.degree_level
        ,degree_level_recode
        ,degree_code
     FROM table1
          ,table2 
     WHERE table1.degree_level = table2.degree_code
     ) AS p
     PIVOT
         (
         SUM (degree_completions)
         FOR degree_level_recode IN ([LESSCOL], [AADEGR], . . .)
         ) AS pvt 
```

这会产生以下结果：

```
degree_code  degree_level  LESSCOL  AADEGR  BACHDEGR  MADEGR  DOCDEG  
01.0601      2             NULL     NULL    NULL      NULL    NULL
01.0601      3             NULL     22      NULL      NULL    NULL
01.0505      2             NULL     NULL    NULL      NULL    NULL 
```

我试图达到：

```
degree_code  degree_level  LESSCOL  AADEGR  BACHDEGR  MADEGR  DOCDEG  
01.0601      2             11       NULL    NULL      NULL    NULL
01.0601      3             NULL     22      NULL      NULL    NULL
01.0505      2             3        NULL    NULL      NULL    NULL 
```

此外，将 NULL 替换为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:52:26.233

这就是您所追求的（假设：您的第一个表称为#temp1，您的第二个表称为#temp2）：

```
SELECT *
FROM
#temp1,
(SELECT degree_level, [AADEGREE] as col1, [BACHDEGREE] as col2
FROM 
(SELECT degree_completions, #temp1.degree_level, degree_level_recode
FROM #temp1, #temp2 WHERE #temp1.degree_level = #temp2.degree_level) AS p
PIVOT
(
SUM (degree_completions)
FOR degree_level_recode IN
([AADEGREE], [BACHDEGREE])
) AS pvt
) as V
WHERE #temp1.degree_level = V.degree_level
ORDER BY 1 
```

# xpath - xpath下一个按钮隐藏

> ID：12965150
> 
> 赞同：0
> 
> 时间：2012-10-18T23:15:01.150
> 
> 标签：xpath, web-scraping

我正在使用 xpath 转到下一页（用于抓取）

但最终“下一步”按钮隐藏了我如何确保 xpath 不会再次选择“下一步”......

现在它的：

```
//A[.='Next'] 
```

LI 具有显示无属性

```
//LI[.='Next'] 
```

我试过了

```
//LI[.='Next'][not(contains(@style,'display:none'))]//A[.='Next'] 
```

但它没有工作......

解决这个问题的最好方法是什么...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T11:17:08.567

我用

//LI[not(contains(@style,'display: none'))]/A[.='Next']

# php - Wordpress - 在循环中发布缩略图

> ID：12965152
> 
> 赞同：0
> 
> 时间：2012-10-18T23:15:10.123
> 
> 标签：php, wordpress, wordpress-theming

所以我想在我的帖子中添加一个缩略图，但我无法让它工作。

```
<?php get_header(); ?>

<div id="main-content">
    <?php get_sidebar(); ?>
    <?php
        $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
        query_posts('posts_per_page=3&paged=' . $paged);
    ?>
    <?php if (have_posts()) : while ( have_posts()) : the_post(); ?>
        <div <?php post_class() ?> id="post-<?php the_ID(); ?>">
            <h2><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h2>
            <?php the_post_thumbnail();?>

            <div class="entry">
                <?php the_excerpt(); ?>
                <a class="read-more" href="<?php the_permalink() ?>">Read More ...</a>
            </div>

            <?php include (TEMPLATEPATH . '/inc/meta.php' ); ?>

            <div class="postmetadata">
                <?php the_tags('Tags: ', ', ', '<br />'); ?>
                Posted in <?php the_category(', ') ?> |
                <?php comments_popup_link('No Comments &#187;', '1 Comment &#187;', '% Comments &#187;'); ?>
            </div>
        </div>
    <?php endwhile; endif; ?>

    <div class="navigation">
        <div class="next-posts"><?php next_posts_link('&laquo; Older Posts') ?></div>
        <div class="prev-posts"><?php previous_posts_link('Newer Posts &raquo;') ?></div>
    </div>
</div>
<!-- end div main-content -->

<?php get_footer(); ?> 
```

在我的functions.php中我添加了 -`add_theme_support('post-thumbnails');`

当我发帖时，它让我可以选择发布缩略图，但它没有显示出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:50:28.617

您使用的是什么主题或父主题？我通常在循环中做这样的事情：

```
<?php

if ( function_exists( 'add_image_size' ) ) {
  add_image_size( 'custom-thumb', 180, 115, true ); //add a custom image size
}

echo get_the_post_thumbnail(get_the_ID(), 'custom-thumb', $attr); //echo the thumbnail with the new custom image size

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:19:35.210

```
<?php 
if ( has_post_thumbnail() ) { // check if the post has a Post Thumbnail assigned to it.
  the_post_thumbnail();
} 
?> 
```

在循环中添加上面的代码

然后将以下代码添加到functions.php

```
add_theme_support( 'post-thumbnails' ); 
```

最后，如果您希望将缩略图链接到帖子 ID，以便在单击图像后打开您的帖子，请将以下代码添加到 functions.php

```
set_post_thumbnail_size( 50, 50 );
add_filter( 'post_thumbnail_html', 'my_post_image_html', 10, 3 );

function my_post_image_html( $html, $post_id, $post_image_id ) {

  $html = '<a href="' . get_permalink( $post_id ) . '" title="' . esc_attr( get_post_field( 'post_title', $post_id ) ) . '">' . $html . '</a>';
  return $html;

} 
```

set_post_thumbnail_size（高度，宽度）；这用于添加高度和宽度，在上面的示例中我添加了 50、50。用您需要的值更改它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-22T03:15:07.693

使用新的 wordpress 版本，您可以从 settings > media 设置缩略图。并为缩略图提供个人尺寸然后使用它来获取具有您喜欢的尺寸的缩略图

```
<?php the_post_thumbnail('thumbnail');?> 
```

# c# - 使用 .Distinct() 从文本框中删除重复项；

> ID：12965155
> 
> 赞同：0
> 
> 时间：2012-10-18T23:15:12.227
> 
> 标签：c#, .net, linq, textbox, distinct

我让我们说这个richtextbox

```
teddyinwonderland
KristinaAlex33
MariamPetkova
VladislavMladenov
Odanessy
tvatieigrata
VaninaDimova
LillyRadevaa
disbalanced
AdriyanMinchev
vampirelove
blqblqlq
jakitoo
AdriyanMinchev
LillyRadevaa
ToshkoPulov
MaqGeorgieva
katiiig
NataliaNikolova393
Mila1305
pyfpafpyfpaf
GabriiellaDobreWa
galiinkaa
paffwinchester06
AlexFlip
iskocetegi
AdriyanMinchev
LillyRadevaa
ToshkoPulov
MaqGeorgieva
katiiig
NataliaNikolova393
Mila1305
pyfpafpyfpaf
GabriiellaDobreWa
galiinkaa
paffwinchester06
AlexFlip
iskocetegi
AdriyanMinchev
LillyRadevaa
ToshkoPulov
MaqGeorgieva
katiiig
NataliaNikolova393
Mila1305
pyfpafpyfpaf
GabriiellaDobreWa
galiinkaa
paffwinchester06
AlexFlip
iskocetegi
AchyyWee
simeonov91
DavidWilla
teddyinwonderland
katiiig
VladislavMladenov
AtanasVirishapkov
yeahhx
MartinaPetrowa855
GizemYasinAlaca
IOANAAAAA
yonii9
Odanessy
AchyyWee
simeonov91
DavidWilla
teddyinwonderland
katiiig
VladislavMladenov
AtanasVirishapkov
yeahhx
MartinaPetrowa855
GizemYasinAlaca
IOANAAAAA
yonii9
Odanessy
AchyyWee
simeonov91
DavidWilla
teddyinwonderland
katiiig
VladislavMladenov
AtanasVirishapkov
yeahhx
MartinaPetrowa855
GizemYasinAlaca
IOANAAAAA
yonii9
Odanessy
AchyyWee
simeonov91
DavidWilla
teddyinwonderland
katiiig
VladislavMladenov
AtanasVirishapkov
yeahhx
MartinaPetrowa855
GizemYasinAlaca
IOANAAAAA
yonii9
Odanessy 
```

我想删除重复项，但我不知道如何。

我试过了

```
var asd = richtextbox1.Text.Distinct().ToList()/ToArray();
foreach (string s in asd)
{
    richtextbox1.text = richtextbox1.text + s;
} 
```

尝试了其他一些毫无意义的事情，但没有任何帮助，从这个我得到了一些奇怪的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:20:48.807

这将为您带来`List<string>`不同的价值：

```
var distinctItems = richTextBox1.Lines.Distinct().ToList(); 
```

请注意，我们正在使用[`Lines`](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.lines.aspx)RichTextBox 的属性。该`Lines`属性将 RichTextBox 的内容作为字符串数组返回，每行作为数组中的一个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T23:21:08.890

我建议您这样做`richtextbox1.Lines.Distinct().ToArray()`，然后将其分配回去

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T23:18:33.517

当你 to 时`.Text`，你会得到一个字符串中的整个文本，而不是一个单词列表。先把单词分开，然后`.Distinct()`就可以了。

您只需在调试器中单步执行代码即可注意到这一点。

# android - 获取直系亲属（姓名、生日和关系）的 FQL 查询

> ID：12965159
> 
> 赞同：0
> 
> 时间：2012-10-18T23:15:39.903
> 
> 标签：android, facebook, facebook-fql

我试图使用 FQL 从 facebook 获取我的直系亲属数据。我运行这个语句：

```
SELECT first_name, middle_name, last_name, birthday_date 
from user 
where uid IN (SELECT uid 
              FROM family 
              WHERE profile_id = me() 
              and (relationship = 'brother' 
                   or relationship = 'sister' 
                   or relationship = 'father' 
                   or relationship = 'mother' 
                   or relationship = 'son' 
                   or relationship = 'daughter' 
                   or relationship = 'wife' 
                   or relationship = 'husband')) 
```

但我也想在数据中有关系。它只给我**first_name、middle_name、last_name、birthday_date**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:07:48.610

你必须做一个来获取这些数据，你需要做一个 FQL 多查询：

```
{"my_family": "SELECT uid, relationship FROM family WHERE profile_id = me() AND
       (relationship = 'brother' OR ...)".
"family_details": "SELECT first_name, middle_name, last_name, birthday_date FROM
       user WHERE uid IN (SELECT uid FROM #my_family)"} 
```

您需要`uid`在脚本中将两个结果对象连接在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:10:06.680

您需要使用 FQL 吗？现在有一个嵌套字段 Graph API 语法，可以让您一次性获得所需的内容：

```
https://graph.facebook.com/me?fields=id,name,family.fields(first_name,middle_name,last_name,birthday) 
```

然后，结果是一个嵌套的 JSON 对象，其中包含您需要的关系字段 - 例如：

```
{
  "id": "738229837", 
  "name": "James Pearce", 
  "family": {
    "data": [
      {
        "first_name": "Bob", 
        "last_name": "Pearce", 
        "birthday": "09/21/1965", 
        "id": "12345", 
        "relationship": "cousin"
      }, 
      {
        "first_name": "Clara", 
        "last_name": "Pearce", 
        "birthday": "12/08", 
        "id": "67890", 
        "relationship": "mother"
      }
      ...
    ], 
    "paging": {
      "next": "https://graph.facebook.com/..."
    }
  }
} 
```

希望有帮助。玩得开心。

# opengl - 渲染无限大的平面

> ID：12965161
> 
> 赞同：14
> 
> 时间：2012-10-18T23:15:52.873
> 
> 标签：opengl, rendering, linear-algebra, plane

我想渲染一个平面，使它看起来好像在各个方向都无限远。我希望远处的平面边界是地平线。

使用简单的网格是行不通的——计算机无法渲染无限多的三角形。即使这是可能的，相机平截头体也会切掉远处的多边形，并在平面边界和地平线之间产生间隙。

一种解决方法是用数学方法计算地平线：在平面上找到点，这些点也位于无穷远处的平面上。连接这些点和视口的两个角会创建一个梯形，代表所寻找的平面。然而，这种方式不能正确地照亮飞机，或者应用纹理，或者任何其他需要精细三角测量的东西......

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-19T00:24:29.117

您可以使用标准光栅化管道绘制无限平面。它使用的齐次坐标可以像常规欧几里得点一样愉快地表示“理想”点（也称为消失点或无穷远点），同样，建立一个将远平面置于无穷远的投影矩阵也是非常实用的。

一种简单的方法是每个象限使用一个三角形，如下所示：

```
vertices [x,y,z,w], for drawing an (x,y) coordinate plane, at (z==0):
  0: [ 0, 0, 0, 1 ]
  1: [ 1, 0, 0, 0 ]
  2: [ 0, 1, 0, 0 ]
  3: [-1, 0, 0, 0 ]
  4: [ 0,-1, 0, 0 ]

draw 4 triangles using indices:
  (0,1,2); (0,2,3); (0,3,4); (0,4,1) 
```

如果您想要一个测试图案（如无限棋盘），您将不得不处理将三角形拉伸到无限会扭曲任何标准纹理的事实。但是，您可以编写一个像素着色器，它根据实际的 3D 点（即使用`x`和`y`来自世界空间`(x,y,z)`坐标）确定颜色，完全忽略（扭曲的）纹理坐标。

您可以根据奇偶性（对于棋盘格）在两种恒定颜色之间进行选择，或者通过根据所选坐标的小数部分对其进行采样来平铺纹理。

* * *

请注意，对于 x、y 和 z 中的每一个，OpenGL 的剪辑空间都是 [-1..1]。您可以通过在远剪辑距离无限制地增加时评估限制来计算适当的[投影矩阵](http://www.songho.ca/opengl/gl_projectionmatrix.html)`f`：

```
clip coords: [x]  =  [ n/r             ]  * view coords [x]
             [y]     [     n/t         ]                [y]
             [z]     [          -1 -2n ]                [z]
             [w]     [          -1   0 ]                [w] 
```

其中（如链接中所示）： `n`是近剪裁平面，`r`是近剪裁平面的截锥体宽度的一半，是近剪裁平面`t`的截锥体高度的一半。

我没有测试过上面的矩阵，所以你付出的代价是值得的。另请注意，当您接近无穷大时，深度值将失去其精度......

虽然，更近的距离的精度可能会很好——例如，在任何给定的距离，（近：无限）情况下的深度分辨率应该比（近：远）比率为的情况低约 10% (1:10)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T23:44:49.900

您的视锥体是一个有盖的金字塔，由侧面和顶部/底部的 4 个剪辑平面构成，在近平面和远平面上是“无限的”（它*不是无限*的，但是因为您看不到任何东西之外的东西截锥体，它是无限的）。

因此，绘制带顶金字塔（一个四边形或两个三角形）的底边是一个“无限”的平面，指向地平线。或者，就此而言，其角点位于近平面和远平面上的*任何四边形。*

# python - 需要帮助理解 Python 的 WebKit

> ID：12965162
> 
> 赞同：0
> 
> 时间：2012-10-18T23:15:53.680
> 
> 标签：python, browser, webkit

今天我遇到了WebKit。我试图了解它是什么？是否可以在没有 gtk 的情况下使用 webkit？我找不到任何有关如何使用 WebKit 的信息。所以我找到了这个例子：

```
#! /usr/bin/python

import gtk, webkit

def update(view, frame, resource, request, response):
    url=request.get_uri()
    print url

win=gtk.Window()
win.connect('destroy', lambda w: gtk.main_quit())
win.show()

box1=gtk.HBox()
win.add(box1)

web=webkit.WebView()
web.connect('resource-request-starting', update)
box1.pack_start(web)

web.open('http://python.org')

box1.show_all()
gtk.main() 
```

我在哪里可以找到文档`webkit.WebView`或`.open()`方法？还想知道是否可以打开页面并在控制台中显示 html 代码？就像我通常使用 urllib2 或 mechanize 和 BeautifulSoup 一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T05:50:23.620

这是 PySide 的完整 api 文档：

[http://srinikom.github.com/pyside-docs/](http://srinikom.github.com/pyside-docs/)

有一个专门用于 webkit 的小节：

[http://srinikom.github.com/pyside-docs/PySide/QtWebKit/index.html](http://srinikom.github.com/pyside-docs/PySide/QtWebKit/index.html)

那是一个临时镜像，原来的镜像可能位于并将位于此处：

[http://pyside.org/docs/pyside/PySide/QtWebKit/index.html](http://pyside.org/docs/pyside/PySide/QtWebKit/index.html)

还有 PyQt 的文档，但这不是 Python 的：

[http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/index.html](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/index.html)

# knockout.js - 淘汰赛'optionsValue'不起作用

> ID：12965164
> 
> 赞同：3
> 
> 时间：2012-10-18T23:15:55.927
> 
> 标签：knockout.js

我有一个不起作用的代码。这是这里[http://jsfiddle.net/JPBarbosa/uxwTM/4/](http://jsfiddle.net/JPBarbosa/uxwTM/4/)。

数据绑定参数**optionsValue**不像参数**optionsText**那样工作。

我对两者都使用相同的功能！

```
<select data-bind="options: times, optionsText: function(item) { return item.toLocaleTimeString(); }, optionsValue: function(item) { return item.toLocaleTimeString(); }, value: selectedTime"></select> 
```

问候，JP。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T23:41:35.987

您传入的对象`optionsValue`必须是与要用作值的属性名称相对应的字符串。您不能将其设置为这样的值，`optionsText`不幸的是它的工作方式不同。

将`times`数组映射到您想要的值会更容易。

```
<select data-bind="options: ko.utils.arrayMap(times(), function (time) { return time.toLocaleTimeString(); }), value: selectedTime"></select> 
```

尽管您希望将映射代码保持在您的视野之外。因此，将计算的 observable 添加到返回映射值的视图模型中。

```
var ViewModel = function() {
    // ...
    self.mappedTimes = ko.computed(function () {
        return ko.utils.arrayMap(self.times(), function (time) {
            return time.toLocaleTimeString();
        });
    })
}; 
```

```
<select data-bind="options: mappedTimes, value: selectedTime"></select> 
```

[更新的小提琴](http://jsfiddle.net/jeff1203/uxwTM/5/)

# vb.net - 在 vb.net 中设置值后，声明的变量要求值

> ID：12965165
> 
> 赞同：0
> 
> 时间：2012-10-18T23:15:57.830
> 
> 标签：vb.net

我的变量有问题。我通过来自外部程序的参数接收变量 email 的值。在 For Next 循环中时，它包含正确的值，但当它退出循环时，它突然没有值了。我将如何退出循环并维护 email 变量的值。

```
Option Strict On

Imports MySql.Data.MySqlClient
Imports System.Runtime.Serialization

Module jrConnect

    Sub Main(ByVal cmdArgs() As String)
        Dim cs As String = "serverinfo"
        Dim conn As New MySqlConnection(cs)
        Dim entID As String
        Dim email As String

        Dim returnValue As Integer = 0

        If cmdArgs.Length > 0 Then
            For argNum As Integer = 0 To UBound(cmdArgs, 1)
                Console.Write("your email address is " & cmdArgs(argNum))
                email = cmdArgs(argNum)
                'value of email is set
            Next argNum

        End If

        Try

            conn.Open()
            Console.Write("Connected")
            Dim stm As String = "SELECT ###### FROM ###### WHERE email =" & "'" & email & "'"
            'the email variable at this point has no value

            Dim cmd As MySqlCommand = New MySqlCommand(stm, conn)
            Dim reader As MySqlDataReader = cmd.ExecuteReader()

            While reader.Read()
                entID = reader.GetString(0)
            End While
            reader.Close()

            Dim stm2 = "SELECT value FROM ###### WHERE ###### = " & entID
            Dim cmd2 As MySqlCommand = New MySqlCommand(stm2, conn)
            Dim reader2 As MySqlDataReader = cmd2.ExecuteReader()
            Dim counter As Integer = 0

            While reader2.Read() And counter < 3
                Console.WriteLine(reader2.GetString(0) & "%")
                counter = counter + 1
            End While
            reader.Close()

        Catch ex As MySqlException
        Finally
            conn.Close()
        End Try

    End Sub

End Module 
```

我得到的错误...... [http://hostthenpost.org/uploads/a66f3efbf2eba24cef0f4e8536111b54.png](http://hostthenpost.org/uploads/a66f3efbf2eba24cef0f4e8536111b54.png)

我对其进行了一些更改，并将所有数据库进程添加到一个函数中，并尝试将电子邮件变量传递给该函数，但它正在打印电子邮件地址但不将其发送到该函数。这是新代码。

```
Option Strict Off

Imports MySql.Data.MySqlClient
Imports System.Runtime.Serialization

Module jrConnect

    Sub Main(ByVal cmdArgs() As String)
        Dim temp As String = "spkelly86@gmail.com"
        'MsgBox("The Main procedure is starting the application.")
        Dim returnValue As Integer = 0
        ' See if there are any arguments.
        If cmdArgs.Length > 0 Then
            temp = cmdArgs(0)
            Console.Write(temp & " IN VB!")
            DBConnect(temp)
        End If
        ' Insert call to appropriate starting place in your code.
        'MsgBox("The application is terminating.")

    End Sub

    Function DBConnect(ByVal email As String)

        Dim cs As String = "serverinfo"
        Dim conn As New MySqlConnection(cs)
        Dim entID As String
        Try

            conn.Open()
            Dim stm As String = "SELECT ****** FROM ******** WHERE email =" & "'" & email & "'"
            Dim cmd As MySqlCommand = New MySqlCommand(stm, conn)
            Dim reader As MySqlDataReader = cmd.ExecuteReader()

            While reader.Read()
                entID = reader.GetString(0)
            End While
            reader.Close()

            Dim stm2 = "SELECT value FROM ****** WHERE ****** = " & entID
            Dim cmd2 As MySqlCommand = New MySqlCommand(stm2, conn)
            Dim reader2 As MySqlDataReader = cmd2.ExecuteReader()
            Dim counter As Integer = 0

            While reader2.Read() And counter < 3
                Console.WriteLine(reader2.GetString(0) & "%")
                counter = counter + 1
            End While
            reader.Close()

        Catch ex As MySqlException
        Finally
            conn.Close()
        End Try
        Return 0
    End Function
End Module 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:54:52.397

设置变量时，您不会退出循环。

尝试这个：

```
Dim email As String = "dummy@email.com"
For argNum As Integer = 0 To UBound(cmdArgs, 1)
    Console.Write("your email address is " & cmdArgs(argNum))
    email = cmdArgs(argNum)
    'value of email is set
    Exit For
Next argNum 
```

或等价物：

```
Dim email As String = "dummy@email.com"
If cmdArgs.Length > 0 Then
    Console.Write("your email address is " & cmdArgs(0))
    email = cmdArgs(0)
End If 
```

# ruby - Ruby array to hash

> ID：12965167
> 
> 赞同：5
> 
> 时间：2012-10-18T23:16:10.577
> 
> 标签：ruby

I have the following array:

```
myarray = [
  ['usa','primary', 'john'],
  ['france','primary', 'lira'],
  ['usa', 'secondary', 'steve'],
  ['germany', 'primary', 'jeff'],
  ['france', 'secondary', 'ben']
] 
```

I want to convert it to an array of hash like:

```
[
  {:country => 'usa', :primary => 'john', :secondary => 'steve'},
  {:country => 'france', :primary => 'lira', :secondary => 'ben'},
  {:country => 'germany', :primary => 'jeff', :secondary => ''}
] 
```

I can do it by looping through the array and putting the values into a hash for "primary". How can I add "secondary" to the existing hash that may already be inserted into the array?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T23:29:38.220

With a bit of Higher order programming:

```
myarray.reduce({}) do |accu, (country, func, name)| 
  accu[country] ||= {}
  accu[country][func.to_sym] = name
  accu 
end.map{|k, h| h[:country] = k; h} 
```

### Explanation:

Reduce will take an accumulator, in this case we start with an empty hash and go through the array. We match the triples in the array to the variables `country, func, name`. Since we want to group things by country we create that as our first Hash key. It should contain a hash so we make sure that is corresponds to an array with `accu[country] ||= {}`.

Then we add our key value pair converting `func` to a symbol. Finally we return our modified accumulator that will be passed to the next iteration.

This will return a data structure like this:

```
{"usa"=>{:primary=>"john", :secondary=>"steve"}, 
 "france"=>{:primary=>"lira", :secondary=>"ben"}, 
 "germany"=>{:primary=>"jeff"}} 
```

Now we need to transform it into a array of hashes rather than a big hash. We do this by calling `map` on it and in the process we add `country` as a key to the hash.

Now one thing that the algorithm above doesn't do is to check for missing values, resp. it doesn't guarantee that both `:primary` and `:secondary` are present. You can do that by modifying the `map` to this:

```
.map do |k, h|
  h[:country] = k
  h[:primary] ||= ""
  h[:secondary] ||= ""
  h
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T00:22:24.017

Here's a fun, albeit confusing, way to do it.

```
format = Hash.new{ |h,k| h[k] = {:country => k, :primary => '', :secondary => ''} }

myarray.inject(format){ |result, (c,k,v)| result[c][k.to_sym] = v; result }.values

# => [
  {:country=>"usa", :primary=>"john", :secondary=>"steve"},
  {:country=>"france", :primary=>"lira", :secondary=>"ben"},
  {:country=>"germany", :primary=>"jeff", :secondary=>""} ] 
```

Basically the `format` hash defines the way you want to generate your output. The `inject` call collects the results by country. The `values` call just grabs the actual results without the country hash keys.

# php - 在数组中打印一个数组（在 WordPress 中使用 MapPress 生成地图）

> ID：12965168
> 
> 赞同：1
> 
> 时间：2012-10-18T23:16:12.367
> 
> 标签：php, arrays, wordpress, multidimensional-array

**精简版：**

我需要从中创建一个数组：

```
$locations = array(
    [0] => 'first location',
    [1] => 'second location'
); 
```

对此：

```
$locations = array( 'first location', 'second location' ); 
```

**长版**

我在 WordPress 中使用了一个名为 MapPress 的插件来动态生成地图。我需要将一组值打印到另一个数组中，以便它可以生成地图。[文档](http://wphostreviews.com/mappress-documentation#toc-creating-maps-dynamically)表明我可以动态地做到这一点，但这似乎意味着我可以生成地图，只要我知道我需要多少地图点。我想根据这些自定义帖子中的许多内容来生成地图。

我正在从帖子中提取自定义信息以填充字段并将收集的数组存储到另一个数组中。我正在使用这里讨论的方法来提取我需要的每个帖子的信息，并将其存储在一个名为 $locations 的数组中。根据文档，我需要在没有键值的情况下将数组打印到这个数组中（“[0] =>”），但我似乎无法找到如何有效地做到这一点。似乎[这是另一个人遇到的问题](https://stackoverflow.com/questions/6423565/merge-array-to-array-without-key)，但由于她的特定需求而得到解决，而这对我的不起作用。

用于执行所有这些操作的代码如下。

```
// Let's make a new map.
$mymap = new Mappress_Map(array("width" => 800));

// Run a loop to grab all posts of type "location"
global $post;
$tmp_post = $post;
$args = array( 'post_type' => 'location', 'posts_per_page'=> -1 );
$myposts = get_posts( $args );

$locations = array();
foreach( $myposts as $post ) : setup_postdata($post);

    // Grab all the post's necessary data for creation of the map 
    $title = get_the_title();
    $id = get_the_ID();
    $location_address = get_field("location_address");
    $location_excerpt = get_field("location_excerpt");

    // Plug that data into Mappress' stuff, using dynamic variables
    $mypoi = new Mappress_Poi(array(
        "title" => $title, 
        "body" => $location_excerpt, 
        "address" => $location_address .'<a href="'.$id.'">More Information >></a>'
    ));

    // This converts the address to a longitude/latitude location for the plugin's use
    $mypoi->geocode(); 

    // this is where I get hung up. I need to print the array without the key values
    $locations[] = $mypoi;
endforeach;

$post = $tmp_post; 
// print_r($locations); when I print_r them like they are, they have key values

$mymap->pois = array($locations); //this generates all the maps POIs to create the map
echo $mymap->display(array("directions"=>"none")); // this just displays the map 
```

长篇大论，我知道。但这是一个特定问题，使用所有可用信息可能更容易解决。

谢谢！

**编辑：**

$locations 正在打印我想要的内容，但@mario 让我意识到它应该按原样接受数组。正如我设置的那样，它是这样的：

```
$locations = array();
$mymap->pois = array($locations); 
```

这意味着它打印出来：

```
$mymap->pois = array( array('location info 1', 'location info 2')); 
```

我需要做的就是这个；

```
$mymap->pois = $locations; 
```

它工作得很好。我觉得好傻 我需要这个才能最终得到我的答案。谢谢大家的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:27:33.320

这将根据需要打印任何数组（在本例中`$locations`）。`$o`包含您应该打印的输出。

```
$a = $locations;
$o = '$locations = array(';
foreach ($a as &$v)
    $v = "'$v'";
$o .= implode(', ', $a);
$o .= ');'; 
```

# r - ggplot2 binwidth 在 facet_wrap 直方图中没有响应

> ID：12965170
> 
> 赞同：7
> 
> 时间：2012-10-18T23:16:17.893
> 
> 标签：r, ggplot2

将不胜感激有关如何使我的代码或 binwidth 行为的任何想法。我的数据集包含每隔几个小时“4”和每天“24”收集的时间戳数据点。我正在尝试在左侧绘制 4 小时堆叠直方图，在右侧绘制 24 小时堆叠直方图。因此，我希望右边的 binwidth 比左边的 binwidth 宽 6 倍。但是我用 binwidth 尝试过的一切都没有奏效。x 轴数据 data3$dts 似乎是连续的而不是离散的，但也许我做的不对。

关于数据的重要说明：在右侧绘制的数据，即 hours=24 数据，具有始终为整数的 dts 值。左边的数据，hours=4 数据，具有非整数 dts 值。

```
 "dts"  "Yes" "No" "Maybe" "hours"  "days"
"258"   15627.668   8       0   1       4   "7 Days"
"259"   15627.832   13      11  18      4   "7 Days"
"260"   15628       34      47  89      4   "7 Days"
"261"   15628       37      47  90      24  "7 Days"
"262"   15628.168   3       0   1       4   "7 Days"
"40"    15571       345     419 674     24  "90 Days"
"41"    15571.5     91      145 130     4   "90 Days"
"42"    15571.668   158     149 284     4   "90 Days"
"43"    15571.832   96      125 260     4   "90 Days"
"44"    15572       55      33  137     4   "90 Days"
"45"    15572       1050    1119 2660   24  "90 Days" 
```

从 pastebin 中提取数据的代码：

```
library (ggplot2)
library (scales)
library(grid)
library(gridExtra)

color3 <- c("mediumspringgreen","red","grey44")
titles.days <-  c( "7 Days", "90 Days") 
names.facetby <- c ("dts", "hours", "days")

data3 <- read.table ("http://pastebin.com/download.php?i=wUQQUXP4", header=TRUE)
data3.melt <- melt (data3 , id = names.facetby )   
data3.melt$days <- factor (data3.melt$days, levels = titles.days)   #  put the factor in the right order, so the graphs are in the right order

 a <- ggplot     ( data3.melt 
        , aes (       x =  dts  #as.Date( dts , date1970) 
                , y =  value 
                , fill = variable)) +
        opts (axis.text.x=theme_text(angle=0, hjust=1)) +
        scale_fill_manual(values = color3) +
        scale_x_date(labels = date_format("%m/%d\n    %a") ) +
        geom_histogram (stat = "identity", position = "stack", binwidth=6.2) +  
        facet_wrap( days ~ hours, ncol=2, scales="free")            

print(a) 
```

当前结果，显示右侧图表的 binwidth 太窄：

![在此处输入图像描述](../Images/5f5aaa008141ddebfbea747499b871fc.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T15:06:59.777

@justin[指向 Hadley Wickham 帖子的链接](https://groups.google.com/forum/?fromgroups=#!topic/ggplot2/aQQ2hTYRQF8)有答案，即在不同的层中绘制左右图。

更新了在 ggplot 中使用 2 条新的 geom_histogram 线正确绘制的代码：

库（ggplot2） 库（尺度） 库（网格） 库（gridExtra）

```
color3 <- c("mediumspringgreen","red","grey44")
titles.days <-  c( "7 Days", "90 Days") 
names.facetby <- c ("dts", "hours", "days")

data3 <- read.table ("http://pastebin.com/download.php?i=wUQQUXP4", header=TRUE)
data3.melt <- melt (data3 , id = names.facetby )   
data3.melt$days <- factor (data3.melt$days, levels = titles.days)   #  put the factor in the right order, so the graphs are in the right order

 a <- ggplot     ( data3.melt 
        , aes (       x =  dts  #as.Date( dts , date1970) 
                , y =  value 
                , fill = variable)) +
        opts (axis.text.x=theme_text(angle=0, hjust=1)) +
        scale_fill_manual(values = color3) +
        scale_x_date(labels = date_format("%m/%d\n%a") ) +

    # bad idea, good ideas follow   geom_histogram (stat = "identity", position = "stack", binwidth=6.2) +  #, breaks = breaks.x
        geom_histogram (data =  subset(data3.melt, hours == 4),  stat = "identity", position = "stack", binwidth=0.3) + #, breaks = breaks.x
        geom_histogram (data =  subset(data3.melt, hours == 24),  stat = "identity", position = "stack", binwidth=0.9) +    #, breaks = breaks.x

        facet_wrap( days ~ hours, ncol=2, scales="free")            

print(a)        # plot the thing 
```

修正图： ![http://imgur.com/9j1Xz](../Images/59efb4a1d46a4a858b48e84f32209421.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T14:12:47.877

这些垃圾箱实际上是相同的宽度。不同之处在于 90 天的地块中有更多的 bin。

您可以通过设置看到这`scales="free_y"`一点`facet_wrap`

你也可以看看[这篇文章](https://groups.google.com/forum/?fromgroups=#!topic/ggplot2/aQQ2hTYRQF8)，它描述了一种潜在的技术来做你正在寻找的事情。

# c++builder - 在具有 std::vector 的结构中使用 C++ Builder UnicodeString

> ID：12965171
> 
> 赞同：1
> 
> 时间：2012-10-18T23:16:25.253
> 
> 标签：c++builder, stdvector

我正在使用涉及一些 POD 和 UnicodeString 的结构，例如

```
struct TMyStruct
{
int value1;
bool value2;
UnicodeString mystring;
} 
```

现在把它变成我使用的数组`std::vector`

```
std::vector<TMyStruct> myarray;
myarray.push_back(TMyStruct());
... etc. 
```

我需要知道我是否需要更多的东西才能像这样使用它——比如 UnicodeString 部分的复制构造函数、深拷贝、结构的析构函数以及类似的东西，或者上面是否足以将 UnicodeString 用作结构数组？

当向量超出范围时，UnicodeString(s) 会自动销毁吗？换句话说，它会减少所有这些的引用计数器吗？

此外，是否有更类似于 VCL 的方式在数组中使用这样的结构。有没有更好的方法将结构中的非 POD 数据用作结构数组？

示例和其他方法表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T04:27:58.810

不，您不需要定义自己的复制构造函数或析构函数。 `UnicodeString`有自己的拷贝构造函数和析构函数。在您的示例中，默认编译器生成的复制构造函数和析构函数`TMyStruct`将自动调用的构造函数和析构函数。`UnicodeString`

# html - 为什么 localhost:3000 呈现 css 的方式与我在 Heroku 上托管的应用程序不同？

> ID：12965173
> 
> 赞同：2
> 
> 时间：2012-10-18T23:16:43.227
> 
> 标签：html, css, ruby-on-rails-3, heroku, github

在本地运行的 localhost:3000 中检查我的 GUI（rails 服务器）时，一切看起来都正确，但是当我将代码推送到 Github 然后到 Heroku 时，CSS 的呈现方式似乎有所不同。具体来说，我遇到的问题是这段css：

```
#searchfield {
    float: left;
    left: 10%;
    top: 1em;
    position:relative;
} 
```

和视图中的代码：

```
<div id="searchfield">
    <form method="get" action="http://www.amongu.com/search.rb"> 
        <input type="text" name="search" size="40px" placeholder="Search"> 
    </form>
</div> 
```

无论出于何种原因，在线页面中的 css 似乎被部分忽略了，因此搜索框与其他元素重叠。有谁知道是什么原因造成的？

谢谢

编辑：这是我的布局助手：

```
# These helper methods can be called in your template to set variables to be used in the layout
# This module should be included in all views globally,
# to do so you may need to add this line to your ApplicationController
#   helper :layout
module LayoutHelper
  def title(page_title, show_title = true)
    content_for(:title) { h(page_title.to_s) }
    @show_title = show_title
  end

  def show_title?
    @show_title
  end

  def stylesheet(*args)
    content_for(:head) { stylesheet_link_tag(*args) }
  end

  def javascript(*args)
    content_for(:head) { javascript_include_tag(*args) }
  end

end 
```

# android - Visual Studio 中的 Android 文档

> ID：12965180
> 
> 赞同：2
> 
> 时间：2012-10-18T23:17:51.370
> 
> 标签：android, visual-studio-2012, xamarin.android

我正在 Visual Studio 2012 中尝试 Mono for Android。如何直接从 Visual Studio 访问 Android 文档（通过按 F1 获取 Android 函数名称）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:01:13.880

目前你不能。唯一正确的文档来源是：

*   [http://androidapi.xamarin.com/](http://androidapi.xamarin.com/) API 文档
*   [http://docs.xamarin.com/](http://docs.xamarin.com/)一般文档
*   [http://developer.android.com/guide/components/index.html](http://developer.android.com/guide/components/index.html)来自 Android 的旧 API 指南

不过有功能会很好:-)

# sql-server - 如何在数据库表中创建通用列？

> ID：12965181
> 
> 赞同：1
> 
> 时间：2012-10-18T23:17:53.207
> 
> 标签：sql-server, sql-server-2008, entity-framework

我有一个包含大量非常具体的列的表，这些列主要是“字符串”。我相信这种硬编码的名字会在以后规则改变时让我感到悲伤。我正在研究使用第二个表的选项，其中每一行都是主表中的一列，每个表的名称都有一个查找键。

我知道这可能看起来是反 ER 最佳实践，但它会很灵活。我可以使用带有子选择的视图，即从 Table1 中选择 (SQL1)、(SQL2) 等。不确定是否可以在 SQLServer 中更新多表视图。

对上述想法不胜感激。

谢谢，

埃德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T23:31:39.200

听起来您正在寻找的是[`Entity-Attribute-Value`（EAV）表之类的东西。](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)

当涉及到允许进一步定制的灵活性时，EAV 允许一个更加动态的过程，但糟糕的实现可能意味着它不能很好地遵守关系模型。[这个 SO question](https://stackoverflow.com/questions/2224234/database-eav-pros-cons-and-alternatives?rq=1)很好地概括了这种解决方案固有的一些问题。

您最好重构列以使用较少上下文特定的命名约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T23:24:59.203

避免[内平台效应](http://en.wikipedia.org/wiki/Inner-platform_effect)。SQL Server 已经使您能够查询表中的哪些列。请参阅[sys.tables](http://msdn.microsoft.com/en-us/library/ms187406%28v=sql.100%29.aspx)和[sys.columns](http://msdn.microsoft.com/en-us/library/ms176106%28v=sql.100%29.aspx)。

使用这些查询您拥有哪些列，并根据需要使用标准 DDL 命令添加和删除列。不要害怕规范化、连接等。

当您需要做一些在正常设计中微不足道的事情时，“数据库中的数据库”几乎总是会导致失败。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T23:27:37.330

您可以将该列存储为[SQL_VARIANT](http://msdn.microsoft.com/en-us/library/ms173829.aspx)类型。
这不是世界上最好的做法，但你可以使用它。

```
create table t  (anything sql_variant);
insert t values (current_timestamp);
insert t values (current_timestamp+1);
insert t values (1);
insert t values ('some text');
insert t values (current_timestamp-3);
insert t values (null);
insert t values (2.1234);
insert t values (cast(2 as decimal(10,5)));
insert t values ('some more text');

-- sample based on type
select *
  from t
 where CAST(sql_variant_property(anything, 'BaseType') as varchar(20)) like '%char'; 
```

根据您的问题，您将存储存储在另一列或链接表列中的类型。

# android - Android WebView - 如何从本地 HTML 加载在线图片（电子邮件内容）

> ID：12965188
> 
> 赞同：5
> 
> 时间：2012-10-18T23:18:36.623
> 
> 标签：android, email, webview

我正在用 Javamail 开发一个简单的电子邮件客户端。我正在获取 HTML 电子邮件内容，并使用以下方法加载它们：

```
mWebView.loadData(html, "text/html",  "ISO-8859-2"); 
```

来自电子邮件源的图片不会加载，因为它们不是本地的（它们甚至不是在线直接链接）。来自电子邮件源的示例 img（带有图片的垃圾邮件/商业类型消息）：

```
<img src="cid:18697_DesignPBCfinal_u35_PL_03.gif" alt="kliknij tutaj" style="display: block;" border="0"> 
```

有没有一种简单的方法来加载这些图片？

# curl - 如何使用 Wget 或 Curl 自动化和重命名（根据服务器日期）文件下载

> ID：12965190
> 
> 赞同：0
> 
> 时间：2012-10-18T23:18:49.553
> 
> 标签：curl, wget

我有一个 PDF 文件，它几乎每天（几乎）都以相同的名称和相同的 url 发布。

我想做的是：

1.  仅在远程文件更新时才下载文件（这对我来说很困难，因为即使更新文件也始终保持相同的名称，可以检查文件大小吗？）；
2.  根据服务器的日期重命名文件（不是我的系统日期：我与服务器相差9小时）；
3.  自动化脚本以每 12 小时检查一次文件。

PS：我有一台Mac，两者都`CURL`安装`WGET`了。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:22:53.537

这里的解决方案是时间戳：[http ://www.gnu.org/software/wget/manual/html_node/Time_002dStamping.html#Time_002dStamping](http://www.gnu.org/software/wget/manual/html_node/Time_002dStamping.html#Time_002dStamping)

使用 wget -N 每 12 小时设置一次 cron 作业应该可以解决问题。这将检查 PDF 的标题，查看它是否是新的，如果不是，则不下载。由于它将使用 PDF 的时间戳下拉，因此您可以编写一个 bash 脚本来获取 ls -l 的输出，查找 mtime，并使用它来重命名文件。

# sql - ST_PointN 从几何列中获取点

> ID：12965191
> 
> 赞同：0
> 
> 时间：2012-10-18T23:19:04.363
> 
> 标签：sql, sql-server, sql-server-2008, gis, geospatial

我有一个 Shapefile 从中提取几何列并将其存储到表中。这是存储在具有 432 个点的几何列中的示例数据。

> 0x000000000104AC010000AB3E57ABBBC4384127A08938705B57414F401361C3C43841C9E53F846C5B574190A0F8E1F6C438410F0BB5766E....

现在我想从几何列中提取每个点，即 432 个点并将其存储到另一个表中。为此，我正在使用`ST_PointN`列，但它一次只能给我 1 分。`ST_NumPoint`会给我 432 个数字，但不是所有的分数。

如何从几何列中提取每个点并将其存储到数据库中？

干杯，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T09:41:16.150

查看 ST_PointN 文档的第一个示例： [https](https://postgis.net/docs/ST_PointN.html) ://postgis.net/docs/ST_PointN.html 并注意 generate_series 部分。

看来，您的几何图形是线串？假设，您的几何图形在“线”表中，并且您想创建“点”表，这样的东西应该可以工作：

```
SELECT ST_PointN(a.the_geom, generate_series(1, ST_NPoints(a.the_geom)))
INTO points
FROM lines a; 
```

如果您的原始几何图形是多边形，则必须稍微调整该查询，因为 ST_PointN 将线串作为参数：

```
SELECT ST_PointN(
    ST_ExteriorRing(a.the_geom), 
    generate_series(1, ST_NPoints(a.the_geom) - 1)
)
INTO points
FROM lines a; 
```

多边形的 ExteriorRing 中的第一个点和最后一个点将相同。这取决于您的需求，无论您使用`ST_NPoints(a.the_geom) - 1`还是`ST_NPoints(a.the_geom)`. 在第一种情况下，第一个点也将作为最后一个点出现。

# magento - 自定义模块 Magento 未显示在第二个网站中

> ID：12965200
> 
> 赞同：0
> 
> 时间：2012-10-18T23:20:00.810
> 
> 标签：magento

我正在为 Magento (1.7.1.0) 构建一个自定义模块，我需要它来支持多个网站、商店和商店视图。我已经在第一个 website_id 的所有商店中运行它，但不知何故它不适用于第二个网站。

```
Setup:
-> website_id:1
----> store_id:1  works!
----> store_id:2  works!
----> store_id:3  works!
-> website_id:2
----> store_id:4  doesn't work :( 
```

所有“设计”代码（布局和模板）都在基本/默认文件夹中所有“代码”都在社区文件夹中

layout.xml 文件内容：

```
<?xml version="1.0"?>
<layout version="0.1.0">
    <catalog_category_layered>
        <reference name="left">
            <remove name="catalog.leftnav"/>
            <block type="catalog/layer_view" name="catalog.betterlayers" before="-" template="betterlayers/layer.phtml" />
        </reference>
    </catalog_category_layered>
</layout> 
```

不知何故，新功能没有显示在第二个网站上。事实上，唯一从我的自定义模块中调用的是主块的 _construct() 函数（但这总是会发生）。模板文件永远不会包含在 website_id:2 的任何地方

任何人都可以通过指出 website_id:1 和 website_id:2 之间的可能差异来帮助我吗？

到目前为止，我已经排除了：

*   不同的设计基础（两个网站都使用基础/默认）
*   存储特定问题（如果我尝试其他模块，两个网站都可以正常工作，并且我正在使用只有这个模块的自定义测试商店，一些自定义 website_ids 和 store_ids，以及 Magento 示例数据）
*   冲突的设计布局 xml 文件
*   Magento 缓存、Magento 编译器和 APC / Memcached

谢谢你的帮助！

PS：这里没有提供您需要的任何信息，请问！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:14:48.643

原来我只是愚蠢。

第二个网站的所有类别都没有锚定。上面的 layout.xml 清楚地表明只有分层视图应该包含模块模板文件......

# blackberry - 使用黑莓 http 连接将图像上传到服务器

> ID：12965202
> 
> 赞同：-1
> 
> 时间：2012-10-18T23:20:34.087
> 
> 标签：blackberry, file-upload, blackberry-eclipse-plugin, httpconnection, multipartform-data

嗨，下面是将文件上传到服务器的简单代码，它工作正常......但是当我通过黑莓将图像发送到服务器时，它会做一些工作，但服务器中没有图像文件，请指导我哪里出错了......

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title></title>
</head>

<body>
    <form enctype="multipart/form-data" method="post" action="img.php">
        <input type="file" name="image"/>
        <input type="submit" name="upload"/>
    </form>
        </body>
</html> 
```

这是bb的java代码

```
public HttpMultipartRequest(String url, Hashtable params, Hashtable headers, String fileField,
            String fileName, String fileType, byte[] fileBytes)
            throws Exception {

        this.url = url;

        String boundary = getBoundaryString();

        String boundaryMessage = getBoundaryMessage(boundary, params,
                fileField, fileName, fileType);

        String endBoundary = "\r\n--" + boundary + "--\r\n";

        ByteArrayOutputStream bos = new ByteArrayOutputStream();

        bos.write(boundaryMessage.getBytes());

        bos.write(fileBytes);

        bos.write(endBoundary.getBytes());

        this.postBytes = bos.toByteArray();

        bos.close();

    }

    String getBoundaryString() {
        return BOUNDARY;
    }

    String getBoundaryMessage(String boundary, Hashtable params,
            String fileField, String fileName, String fileType) {
        StringBuffer res = new StringBuffer("--").append(boundary).append(
                "\r\n");

        Enumeration keys = params.keys();

        while (keys.hasMoreElements()) {
            String key = (String) keys.nextElement();
            String value = (String) params.get(key);

            res.append("Content-Disposition: form-data; name=\"").append(key)
                    .append("\"\r\n").append("\r\n").append(value).append(
                            "\r\n").append("--").append(boundary)
                    .append("\r\n");
        }
        res.append("Content-Disposition: form-data; name=\"").append(
                fileField).append("\"; filename=\"").append(fileName)
                .append("\"\r\n").append("Content-Type: ").append(fileType)
                .append("\r\n\r\n");

        return res.toString();
    }

    public byte[] send() 
    {
        HttpConnection hc = null;

        InputStream is = null;

        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        String login = test:test;
        byte[] res = null;

        boolean keepGoing = true;
        boolean needAuth = false;

        try {
            byte[] encoded = Base64OutputStream.encode(login.getBytes(), 0, login.length(), false, false);

            Logger.log("Trying to connect to "+url);
            hc = (HttpConnection) Connector.open(url);

            while (keepGoing) {
                // headers needed specifically for upload
                hc.setRequestProperty("Content-Type",
                        "multipart/form-data; boundary=" + getBoundaryString());
                hc.setRequestProperty(
                        HttpProtocolConstants.HEADER_CONTENT_LENGTH, Integer
                                .toString(postBytes.length));
                hc.setRequestProperty("x-rim-transcode-content", "none");

                hc.setRequestProperty("Authorization", "Basic " + new String(encoded));

                hc.setRequestMethod(HttpConnection.POST);

                OutputStream dout = hc.openOutputStream();

                dout.write(postBytes);

                dout.close();

                int responseCode = hc.getResponseCode();
                if (responseCode == HttpConnection.HTTP_UNAUTHORIZED) {
                    hc.close();
                    hc = (HttpConnection) Connector.open(url);
                    needAuth = true;

                    throw new Exception("Exception when uploading. RC: "+String.valueOf(responseCode)+", Unauthorized.");

                } else if (responseCode == 422) {
                    throw new Exception("Exception when uploading. RC: "+String.valueOf(responseCode)+".");
                } else if (responseCode == HttpConnection.HTTP_OK) {
                    int ch;
                    bos.reset();

                    is = hc.openInputStream();

                    while ((ch = is.read()) != -1) {
                        bos.write(ch);
                    }
                    res = bos.toByteArray();

                    keepGoing = false;
                } else {
                    int ch;
                    bos.reset();
                    is = hc.openInputStream();

                    while ((ch = is.read()) != -1) {
                        bos.write(ch);
                    }
                    res = bos.toByteArray();

                    keepGoing = false;
                    throw new Exception("Exception when uploading. RC: "+String.valueOf(responseCode)+", "+new String(res));
                }

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T11:20:20.567

几天前，我遇到了同样的问题，现在我通过以下[链接](http://github.com/cleverua/blackberry_multipart_post)解决了这个问题......也许这会对你有所帮助..!!!

# python - 如何将网页中的 JSON 转换为 Python 脚本

> ID：12965203
> 
> 赞同：243
> 
> 时间：2012-10-18T23:20:37.113
> 
> 标签：python, json

在我的一个脚本中得到以下代码：

```
#
# url is defined above.
#
jsonurl = urlopen(url)

#
# While trying to debug, I put this in:
#
print jsonurl

#
# Was hoping text would contain the actual json crap from the URL, but seems not...
#
text = json.loads(jsonurl)
print text 
```

我想要做的是获取`{{.....etc.....}}`我在 Firefox 中将 URL 加载到脚本中时在 URL 上看到的内容，以便从中解析出一个值。我已经用谷歌搜索了很多，但我还没有找到一个很好的答案来说明如何`{{...}}`从一个以结尾的 URL 实际获取内容`.json`到 Python 脚本中的对象中。

* * *

## 回答 #1

> 赞同：389
> 
> 时间：2012-10-18T23:26:29.200

从 URL 获取数据，然后调用`json.loads`eg

**Python3 示例**：

```
import urllib.request, json 
with urllib.request.urlopen("http://maps.googleapis.com/maps/api/geocode/json?address=google") as url:
    data = json.loads(url.read().decode())
    print(data) 
```

**Python2 示例**：

```
import urllib, json
url = "http://maps.googleapis.com/maps/api/geocode/json?address=google"
response = urllib.urlopen(url)
data = json.loads(response.read())
print data 
```

输出将导致如下所示：

```
{
"results" : [
    {
    "address_components" : [
        {
            "long_name" : "Charleston and Huff",
            "short_name" : "Charleston and Huff",
            "types" : [ "establishment", "point_of_interest" ]
        },
        {
            "long_name" : "Mountain View",
            "short_name" : "Mountain View",
            "types" : [ "locality", "political" ]
        },
        {
... 
```

* * *

## 回答 #2

> 赞同：153
> 
> 时间：2012-10-18T23:26:28.873

我猜您实际上想从 URL 获取数据：

```
jsonurl = urlopen(url)
text = json.loads(jsonurl.read()) # <-- read from it 
```

或者，查看[请求](http://docs.python-requests.org/en/latest/)库中的[JSON 解码器。](http://docs.python-requests.org/en/latest/user/quickstart/#json-response-content)

```
import requests
r = requests.get('someurl')
print r.json() # if response type was set to JSON, then you'll automatically have a JSON response here... 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2015-02-28T20:40:57.320

这会从带有 Python 2.X 和 Python 3.X 的网页中获取 JSON 格式的字典：

```
#!/usr/bin/env python

try:
    # For Python 3.0 and later
    from urllib.request import urlopen
except ImportError:
    # Fall back to Python 2's urllib2
    from urllib2 import urlopen

import json

def get_jsonparsed_data(url):
    """
    Receive the content of ``url``, parse it as JSON and return the object.

    Parameters
    ----------
    url : str

    Returns
    -------
    dict
    """
    response = urlopen(url)
    data = response.read().decode("utf-8")
    return json.loads(data)

url = ("http://maps.googleapis.com/maps/api/geocode/json?"
       "address=googleplex&sensor=false")
print(get_jsonparsed_data(url)) 
```

另请参阅：[JSON 的读写示例](https://stackoverflow.com/a/37795053/562769)

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2016-02-23T19:59:52.207

我发现这是使用 Python 3 时从网页获取 JSON 的最简单和最有效的方法：

```
import json,urllib.request
data = urllib.request.urlopen("https://api.github.com/users?since=100").read()
output = json.loads(data)
print (output) 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2020-07-16T07:53:16.567

您需要`import requests`并使用 json() 方法：

```
source = requests.get("url").json()
print(source) 
```

当然，这种方法也有效：

```
import json,urllib.request
data = urllib.request.urlopen("url").read()
output = json.loads(data)
print (output) 
```

`json.loads`[将使用此表](https://docs.python.org/3/library/json.html#json-to-py-table)将其解码为 Python 对象，例如 JSON 对象将变为 Python `dict`。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-10-18T23:26:20.263

调用`urlopen()`所做的所有事情（根据[docs](http://docs.python.org/library/urllib2.html#urllib2.urlopen)）都是返回一个类似文件的对象。一旦你有了它，你需要调用它的`read()`方法来真正通过网络拉取 JSON 数据。

就像是：

```
jsonurl = urlopen(url)

text = json.loads(jsonurl.read())
print text 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-06-23T15:33:27.363

在 Python 2 中， json.load() 将代替 json.loads() 工作

```
import json
import urllib

url = 'https://api.github.com/users?since=100'
output = json.load(urllib.urlopen(url))
print(output) 
```

不幸的是，这在 Python 3 中不起作用。 json.load 只是 json.loads 的包装器，它为类文件对象调用 read() 。json.loads 需要一个字符串对象，而 urllib.urlopen(url).read() 的输出是一个字节对象。因此，必须获取文件编码才能使其在 Python 3 中工作。

在此示例中，我们查询编码的标头，如果没有得到则回退到 utf-8。Python 2 和 3 之间的 headers 对象不同，因此必须以不同的方式完成。使用[requests](http://docs.python-requests.org/en/master/)可以避免这一切，但有时您需要坚持使用标准库。

```
import json
from six.moves.urllib.request import urlopen

DEFAULT_ENCODING = 'utf-8'
url = 'https://api.github.com/users?since=100'
urlResponse = urlopen(url)

if hasattr(urlResponse.headers, 'get_content_charset'):
    encoding = urlResponse.headers.get_content_charset(DEFAULT_ENCODING)
else:
    encoding = urlResponse.headers.getparam('charset') or DEFAULT_ENCODING

output = json.loads(urlResponse.read().decode(encoding))
print(output) 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-02-24T07:17:01.503

因为`python>=3.6`你可以使用：

```
import dload

j = dload.json(url) 
```

* * *

安装[`dload`](https://pypi.org/project/dload/)：

```
pip3 install dload 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-06-25T21:44:36.160

无需使用额外的库来解析 json...

`json.loads()`返回[字典](http://docs.python.org/2/library/stdtypes.html#dict)。

所以在你的情况下，就做`text["someValueKey"]`

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-07-14T21:34:47.447

不知道为什么所有早期的答案都使用`json.loads`. 所有你需要的是：

```
import json
from urllib.request import urlopen

f = urlopen("https://www.openml.org/d/40996/json")
j = json.load(f) 
```

这是有效的，因为`urlopen`返回一个类似文件的对象，它与`json.load`.

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-03-23T18:51:58.163

你可以使用`json.dumps`：

```
import json

# Hier comes you received data

data = json.dumps(response)

print(data) 
```

对于加载 json 并将其写入文件，以下代码很有用：

```
data = json.loads(json.dumps(Response, sort_keys=False, indent=4))
with open('data.json', 'w') as outfile:
json.dump(data, outfile, sort_keys=False, indent=4) 
```

# ruby-on-rails - ModelObject.find_or_create_by_id() 的 Django 版本

> ID：12965205
> 
> 赞同：0
> 
> 时间：2012-10-18T23:20:49.827
> 
> 标签：ruby-on-rails, django

我使用 Django 框架编写了大部分 Web 应用程序。最近我研究了 Ruby on rails 并发现了一些有趣的东西。像 ModelObject.find_or_create_by_id()

这是我的一些 Django 代码

```
 try:
            phone = request.POST.get('phone')
            customer = Customer.objects.get(phone=phone)
            updating customer...     
    except: 
            customer=Customer(
                creating customer...            
            )
            customer.save() 
```

这段代码看起来很难看。有没有更好的方法来用 Django 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:25:43.477

您可以使用`get_or_create`：

```
customer, created = Customer.objects.get_or_create(phone=phone) 
```

第二个值 ( `created`) 是一个布尔值，指示是检索现有对象还是创建新对象。

文档：

[https://docs.djangoproject.com/en/1.4/ref/models/querysets/#get-or-create](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#get-or-create)

# perl - www::mechanize perl，可执行

> ID：12965208
> 
> 赞同：0
> 
> 时间：2012-10-18T23:21:24.657
> 
> 标签：perl, executable, www-mechanize

我在 stackoverflow.com 上阅读了您大约 5 个月前提出的一个问题，更确切地说是： [使用 WWW::Mechanize 在亚马逊网站上导航表单](https://stackoverflow.com/questions/10634444/using-wwwmechanize-to-navigate-forms-on-amazon-site)

我正在创建一个进入站点并输入我的凭据的脚本，以最终保存站点源代码，以便我可以解析信息。

我有一个问题，我的脚本在用作 .pl 脚本或在 Eclipse 上运行时完全正常。但是，一旦我将它打包成 .exe，它就不起作用了。我注意到它与我的站点类型有关，更准确地说，任何需要凭据的站点我都无法将它们打包成一个正常运行的可执行文件。你有没有机会知道问题可能是什么？

非常感谢！

这是我的代码：

```
#!/usr/local/bin/perl

use Spreadsheet::WriteExcel;
use WWW::Mechanize;

use Win32::Registry;
use LWP::Protocol::https;
use LWP;
use HTTP::Cookies;
use HTTP::Server::Simple;
use Net::HTTP;
use Pod::Usage;
use HTTP::Status;
use HTML::Form;
use Bundle::WWW::Mechanize::Shell;

# kills cmd prompt when .exe used on win32
BEGIN {
  if ($^O eq 'MSWin32') {
    require Win32::Console;
    Win32::Console::Free( );
  }
}

# Create a new instance of Mechanize
my $bot = WWW::Mechanize->new();

$bot->agent_alias( 'Windows Mozilla' );

# Connect to the login page
my $response = $bot->get('https://siteWithCredentials.com/' );
die "GET failed url" unless $response->is_success;

# Get the login form. You might need to change the number.
$bot->form_number(3);

# Enter the login credentials.
$bot->field( username => 'a username' );
$bot->field( password => 'a password' );
$response = $bot->click();

$bot->get('http://sitewithCredentials/directoryIamParsing.html' );
my $content = $bot->content();

my $outfile = "out.txt";
open(OUTFILE, ">$outfile");
print OUTFILE  $content;
close(OUTFILE);

open(FILE,$outfile);
my @releasesAU;
my @releasesAU3G;

while (<FILE>) {
    chomp;
    my $lineDATA = $_;
        if(index($lineDATA, "HN+_US_AU3G") != -1){

            if( $lineDATA =~ /">([_+\w]*)<\/a>/){
                print $1, "\n";
                push(@releasesAU3G,$1);
            }
        }

        if(index($lineDATA, "HN+R_US_AU") != -1){

            if( $lineDATA =~ /">([_+\w]*)<\/a>/){
                print $1, "\n";
                push(@releasesAU,$1);
            }
        }   
}
close(FILE);

my $row = 0;
my $col=0;
my $workbook = Spreadsheet::WriteExcel->new("test.xls");
my $worksheet = $workbook->add_worksheet();
$worksheet->write($row,  $col, "Releases HN+R_US_AU3G");
$worksheet->write($row,  $col+1, "Releases HN+R_US_AU3G");
$row=2;

foreach my $SOP (@releasesAU){
    $worksheet->write($row,   $col, $SOP);
    $row = $row+1;
}
$row =2;

foreach my $SOP (@releasesAU3G){
    $worksheet->write($row,   $col+1, $SOP);
    $row = $row+1;
}   

$workbook->close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:44:40.680

意见建议：
1）是报错的“require”行吗？
因为你知道你要编译成一个 windows exe，所以测试 MSWin32 是多余的。删除测试并将“require”转换为“use”语句，看看是否有帮助。
2）请使用任何错误消息更新您的问题。
3) PERL 101 - 使用严格和警告。
4) 添加代码来检查可能失败的语句的结果，例如打开、打印和关闭。
5) 真的需要写入文件内容吗？将 <FILE> 替换为 $content 上的拆分
6) 不鼓励使用类型全局变量（例如 FILE、OUTFILE）。尝试打包 FileHandle。

# .net - SSIS 脚本任务 COMException / FileNotFoundException 错误

> ID：12965210
> 
> 赞同：2
> 
> 时间：2012-10-18T23:21:53.570
> 
> 标签：.net, vbscript, ssis

嗨，如果我将它放在 .vbs 文件中并运行它，我有以下 VBS 运行没有任何问题。

```
Dim objshell
Set objshell = CreateObject("Shell.Application")
objshell.NameSpace("C:\Temp").CopyHere(objshell.NameSpace("C:\Temp\Test.zip").Items())
Set objshell = Nothing 
```

但是，如果我将其剪切并粘贴到 SSBI 2008 中的脚本任务中，它会运行并出现错误

```
Error: 0x1 at Script Task: System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.Runtime.InteropServices.COMException (0x80020003): Member not found. (Exception from HRESULT: 0x80020003 (DISP_E_MEMBERNOTFOUND))
   at Microsoft.VisualBasic.CompilerServices.LateBinding.InternalLateSet(Object o, Type& objType, String name, Object[] args, String[] paramnames, Boolean OptimisticSet, CallType UseCallType)
   at Microsoft.VisualBasic.CompilerServices.NewLateBinding.LateSet(Object Instance, Type Type, String MemberName, Object[] Arguments, String[] ArgumentNames, Type[] TypeArguments, Boolean OptimisticSet, Boolean RValueBase, CallType CallType)
   at Microsoft.VisualBasic.CompilerServices.NewLateBinding.LateSetComplex(Object Instance, Type Type, String MemberName, Object[] Arguments, String[] ArgumentNames, Type[] TypeArguments, Boolean OptimisticSet, Boolean RValueBase)
   at ST_a4312d30d99b4cc4b02a2198afbc77d9.vbproj.ScriptMain.Main()
   --- End of inner exception stack trace ---
   at System.RuntimeMethodHandle._InvokeMethodFast(Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeTypeHandle typeOwner)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at System.RuntimeType.InvokeMember(String name, BindingFlags bindingFlags, Binder binder, Object target, Object[] providedArgs, ParameterModifier[] modifiers, CultureInfo culture, String[] namedParams)
   at Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTATaskScriptingEngine.ExecuteScript()
Task failed: Script Task 
```

我相信必须在 SSBI 内部进行一些配置，而不是默认运行才能使其正常工作。我是否必须改用 C# 也没关系。但只是不要让我使用和安装任何 3rd 方的东西。系统正在运行安装了 .NET 4.5 的 Windows 7。

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T08:13:51.467

我弄清楚了配置，但它有点复杂。

1.  打开您的脚本任务，编辑脚本。当脚本编辑窗口打开时，将上面的脚本放置到 Sub Main 并稍作改动：

    > 暗淡的 objshell

    变成

    > 将 objshell 调暗为 Shell

2.  转到项目-> st_xxxxx 属性，签名，勾选签署程序集，选择新建，输入任何文件名，取消勾选使用密码保护我的文件。

3.  转到引用，添加，COM，选择 Microsoft Shell 控件和自动化，确定。

    ** 你应该会看到一个弹出窗口说没有找到模板信息...，忽略它。**

4.  突出显示您刚刚添加的 Microsoft Shell 控件并查看右下角的属性部分，确保“强名称”为 True。

    （如果您还没有完成第 2 步，这应该是 False，重做第 2 步并确保这是 True）

5.  打开我的电脑，进入生成的Microsoft Shell Controls dll的路径（见突出显示的路径，通常是C:\Users\xxxxxxx\AppData\Local\Temp\SSIS\yyyyyyyyyyyyyyyyy\obj\Debug\Interop.Shell32.dll ）。将其复制到其他地方（这是因为每次编辑脚本时都会随机生成原始路径 yyyyyyyyyyyyy，导致签名的 dll 每次都消失）。

6.  返回 Project->st_xxxxx 属性，删除突出显示的 Microsoft Shell 控件。点击添加，浏览，选择刚才复制的Interop.Shell32.dll，OK。再次确保强名称属性为 True。如果没有，请从步骤 2 重做。

7.  仍然在 References 中的 Imported namespaces 下，向下滚动以勾选 Shell32 旁边的框。

8.  转到签名，取消勾选签署程序集。转到右上角的项目资源管理器，删除您在步骤 2 中创建的密钥文件 (xxxx.snk)（删除项目资源管理器中的密钥文件，而不是从您的文件夹中，确保它不再包含在您的项目资源管理器或您的脚本中任务不会运行）。

9.  全部保存并关闭脚本编辑窗口。

10.  在您的计算机中找到“gacutil.exe”。您应该将它与 SSIS 的安装一起安装。它位于 C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\x64 下。键入 gacutil -i“步骤 5 中复制的 Interop.Shell32.dll 的路径”。

    > 例如 gacutil -i F:\Code\Interop.Shell32.dll

在所有这些步骤之后，您的脚本任务应该可以正常运行。当然，如果您使用其他 COM 引用，则需要这些步骤。让我知道是否有一些更简单的方法来完成这项工作。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T20:17:16.817

SSIS 中的脚本任务运行 .NET 代码，而不是 VBScript 代码。[`File`只需使用Class](http://msdn.microsoft.com/en-us/library/system.io.file.aspx)和您需要的任何其他类在 VB.NET 中重新编写代码。

或者，保留您的 VBS 脚本并使用执行进程任务运行它。

# javascript - 如何重新加载/替换外部javascript onclick？

> ID：12965212
> 
> 赞同：2
> 
> 时间：2012-10-18T23:22:01.200
> 
> 标签：javascript, jquery, ajax

我有一个从 github 获得的 jQuery 游戏（简单的卡片记忆游戏）。

它没有“新游戏”按钮，所以一旦游戏结束，不刷新页面就无法重新开始游戏。

我不想刷新整个页面，所以我尝试创建这样的点击事件。

```
<li style="color:black; font-weight:600"><a href="#">new game</a></li>

$(document).ready(function() {
    $('a').click(function() {
            $("body").load("game.js");
            });

}); 
```

单击时，外部 .js 不会被替换。

我用谷歌搜索但没有找到任何东西。

也许这是不可能的？我已经读过，一旦加载了 .js，就无法使用 .click 删除该 .js。

真的吗？

如果加载的.js无法替换，如何构建“新游戏”功能？

感谢您为我回答这个简单但令人费解（令像我这样的新手感到困惑）的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:53:07.420

会有不好的副作用，变量仍设置为旧值等。重新加载脚本与刷新页面不同。

例如，如果您有一个`currentScore`从 0 开始的变量，然后在您玩游戏时升高，重新加载脚本不一定会将其重置为 0，它可能仍然是 51245 或任何最后一个分数，基本上把一切都搞砸了。这也适用于无数其他事情。原来的间隔现在将加倍。事件将再次添加，旧的不会取消，重复调用所有内容。名单还在继续。

基本上这个游戏的架构似乎很差，需要工作才能正确重置。当某事物的逻辑和架构存在根本缺陷时，通常不像快速修复使其工作那么简单。重新启动游戏等功能通常必须从输入的第一行代码开始作为编码的一部分进行计划。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T06:24:30.973

You can remove js file using this jQuery.

```
$j('script[src=game.js]').remove(); 
```

I try this in page load only.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T23:36:02.120

即使您再次获取并运行脚本，我猜您也可能会因全局变量或 DOM 中遗留的垃圾而产生一些奇怪的挥之不去的副作用。最好让脚本自行清理，game.js 中是否有某种重置函数可以调用？

* * *

如果没有重置，那么再次运行 javascript 文件可能会成功：

```
var script = document.createElement( 'script' );
script.type = 'text/javascript';
script.src = 'game.js';
$(document.head).append( script ); 
```

如果游戏表现良好并且仅在其画布内操作事物，您可能需要尝试从 dom 中移除画布并在导入脚本之前重新创建它`$('#gameWrapper').remove(); $(document.body).append('<div id="gameWrapper"></div>')`：这将有助于清除一些残留的事件处理程序和 DOM 垃圾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T23:29:22.837

看看`jQuery.getScript()`- [jQuery.getScript()](http://api.jquery.com/jQuery.getScript/) url

# c# - 关闭第二个应用程序循环的正确方法是什么？

> ID：12965213
> 
> 赞同：0
> 
> 时间：2012-10-18T23:22:02.057
> 
> 标签：c#, winforms, multithreading

```
 public static void Main()
    {
        Form formOnThisMessageLoop = new Form();
        formOnThisMessageLoop.Show();

        Form formOnOtherMessageLoop = new Form();

        Task.Factory.StartNew(
            () =>
            {                                        
                Application.Run(formOnOtherMessageLoop);                    
            }
         );
        //Thread.Sleep(50);
        formOnOtherMessageLoop.HandleCreated += (obj, args) =>
        formOnOtherMessageLoop.Invoke(new Action(() => { formOnOtherMessageLoop.Close(); })); //Value Close() cannot be called while doing CreateHandle().
        Application.Run();                         

        Console.Read();
    } 
```

我正在尝试各种方法来关闭第二个消息循环上的表单。在这种情况下如何正确同步我的线程？另外，我需要打`Application.Exit()`两次电话还是 Form.Close() 是我能做的最好的？我看到 Application.Run() 使我的死线程保持活力。这是我的担心。假设主线程可以存活很长时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:30:15.503

`Form.Close()`只要将表单作为参数传递给`Application.Run(formOnOtherMessageLoop)`您，就会退出该其他消息循环。相反，如果您编写`Application.Run()`并调用`Form.Close()`应用程序将不会退出。

但是为什么你*需要*另一个消息循环呢？尤其是您这样做的方式，因为这将消耗一个线程池线程来运行所述其他消息循环。

这几乎总是一个坏主意——这来自于使用多个消息循环实现的对延迟非常敏感的应用程序的人（通常很糟糕，有很多错误）。

# iphone - 在 iOS 6 中，状态栏色调颜色更改为黑色

> ID：12965214
> 
> 赞同：5
> 
> 时间：2012-10-18T23:22:03.153
> 
> 标签：iphone, ios, uikit, uistatusbar

我显然不明白如何在 iOS 6 中使用状态栏色调。我读过这个问题： [更改状态栏色调颜色](https://stackoverflow.com/questions/11276729/change-statusbar-tint-colour) 但实施建议的解决方案并没有解决问题。

我已经在目标摘要窗格中配置了设置（样式和着色的默认设置）并将状态栏色调参数字典添加到我的 info.plist 中，如 WWDC 2012 高级外观自定义中所述。

我的状态栏在启动时正确着色，但是一旦我导航到另一个视图控制器，状态栏就会变为黑色。

第二个视图控制器嵌入在它自己的导航控制器中。这可能是问题的根源吗？

不管是什么原因，我希望有人能提供一个解决方案，让我在整个应用程序中使我的状态栏保持一致。

如果有任何需要澄清的地方，请告诉我，并提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T17:54:53.843

今天我遇到了同样的问题，但没有一个建议的答案对我有帮助。

由于我定义了自己的颜色（红色、蓝色、绿色、alpha），我不想通过 IB 添加 UIStatusBar，我需要一个单行解决方案。

经过一段时间的测试，以下对我有用：

1.  在项目摘要中，从下拉菜单中选择状态栏样式黑色半透明。
2.  在`application: didFinishLaunchingWithOptions:`输入以下代码行：

    `self.window.backgroundColor = [UIColor redColor]; //example color`

通过代码设置样式时，这对我不起作用`application: didFinishLaunchingWithOptions:`

享受！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T20:37:25.883

一种解决方案是在界面前面放置一个不可见的导航栏。如果您已经在导航界面中，则可能必须继承 UINavigationController。例如：

```
UINavigationBar* nav = [[UINavigationBar alloc] initWithFrame:CGRectMake(0,0,320,1)];
nav.tintColor = [UIColor redColor];
nav.alpha = 0;
[self.navigationBar.superview addSubview:nav]; 
```

这会导致状态栏变为红色，而不管导航栏的色调或背景颜色如何。如果没有导航栏，这也有效。

信用到期的信用；我从[https://stackoverflow.com/a/13587525/341994](https://stackoverflow.com/a/13587525/341994)`alpha`得到了设置为 0的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T23:44:09.513

> 第二个视图控制器嵌入在它自己的导航控制器中。这可能是问题的根源吗？

这很可能是问题所在 - 但我也曾认为 plist 条目会使其成为全球性的。您是否尝试过使用 UIAppearance 以编程方式设置它（假设您只支持 ios6+）？

```
[[UITabBar appearance] setTintColor:[UIColor redColor]]; 
```

# javascript - 打开新选项卡/窗口并关闭旧选项卡/窗口

> ID：12965221
> 
> 赞同：0
> 
> 时间：2012-10-18T23:22:47.613
> 
> 标签：javascript, jquery, internet-explorer-8

这是我当前的代码，但该`closeWindow`函数在新选项卡打开之前执行。

```
 $(document.body).append('<iframe width="500px" height="500px" id="pcl_frame" style="display:none;"></iframe>');
    $('#pcl_frame').attr('src', data['url']);
    $('#pcl_frame').load(function() {
        // Load page
        document.getElementById('pcl_frame').contentWindow.CreateCBTPlayer(data['code'],"new");

        // Close current windows after the above tab/window opens
        closeWindow(); // has a 2 second delay
}); 
```

有没有办法等待上面的命令先打开新选项卡/窗口，然后关闭用于打开新窗口的当前选项卡。

我也无法更改`CreateCBTPlayer`功能。

### 免责声明

我知道我正在做的事情不是很合乎逻辑，但必须这样做才能绕过我必须使用的旧系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:03:59.447

我不完全确定，但我认为你可以这样做：

```
(function(old_window) { 
    $(new_window).load(function() {
         old_window.close();
    });
})(window); 
```

外部自调用匿名函数用于将局部变量绑定`old_window`到当前窗口对象。内部函数是一个捕获该绑定并关闭窗口的闭包。此关闭绑定到新窗口的`onload`事件。所以当新窗口被加载时，它会关闭当前窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T00:09:38.387

我不知道您要做什么，但是我猜您必须在 onload 函数之后设置源才能使其正常触发，并且由于`load()`已弃用并且您无论如何都在使用本机对象，为什么不只是用纯js做：

```
var iframe = document.createElement('iframe');
    iframe.width = '500px';
    iframe.height = '500px';
    iframe.id = 'pcl_frame';
    iframe.style.display = 'none'; //note that not all browsers load hidden content
    iframe.onload = function() {
        this.contentWindow.CreateCBTPlayer(data['code'],"new");
        closeWindow();
    }

$('body').append(iframe).attr('src', data['url']); 
```

# uiviewcontroller - iOS - 尝试从 RootViewController 推送情节提要

> ID：12965227
> 
> 赞同：0
> 
> 时间：2012-10-18T23:23:10.490
> 
> 标签：uiviewcontroller, storyboard, ios6

我正在尝试将 Apple 的简单 Collection View 示例集成到一个项目中。

我有这个代码：

```
-(IBAction)buttonTapped:(id)sender {
    NSLog(@"%s", __FUNCTION__);

    ImageViewController *ivc = [[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:NULL] instantiateViewControllerWithIdentifier:@"images"];

    NSLog(@"1");
    [self.navigationController pushViewController:ivc animated:YES];
    NSLog(@"2");

} 
```

我看到了日志语句，但没有推送任何视图。我已将“图像”设置为情节提要 ID。这是我第一次使用 Storyboard，所以如果我做错了什么，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T15:07:09.690

在 lnafziger 的诊断帮助下，我使用以下代码解决了这个问题：

```
-(IBAction)photoButtonTapped:(id)sender {

UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"ImageStoryboard" bundle:nil];

ImageViewController *ivc = [storyboard instantiateViewControllerWithIdentifier:@"ImageView"]; 

[self presentViewController:ivc animated:YES completion:nil];    
} 
```

# php - JQuery Ajax POST不发送数据

> ID：12965228
> 
> 赞同：-1
> 
> 时间：2012-10-18T23:23:55.680
> 
> 标签：php, jquery, ajax, forms

问题是，POST 似乎没有向 PHP 脚本发送信息。firebug 控制台显示信息是从 JavaScript 传递的，并且格式似乎正确，但我没有得到响应，PHP 脚本也没有运行。

然而，PHP 本身运行良好。

jQuery：

```
$(function(){
        $('#submit-item').live("click",function(){
            var productName = $(".add-item-form #productName").val();
            var category = $(".add-item-form #categorySelect").val();
            var brandName = $(".add-item-form #brandName").val();
            var volume = $(".add-item-form #volumeType").val();

            $.post("addNewProduct.php",{productName:productName ,category: category, brandName: brandName, volume: volume});
        });
    }); 
```

和 HTML 表单：

```
<section id="add-item-pane" class="secondary">
    <header>
        <h1>add item</h1>
        <a href="#" class="close-secondary"></a>
    </header>
    <form class="add-item-form" method="POST" action="" accept-charset=utf-8>
        <div class="input">
            <label for="productName">product name</label>
            <input type="text" name="productName" id="productName" placeholder="Product Name">
        </div>
        <div class="input">
            <label for="categorySelect" required>category</label>
            <select name="categorySelect" id="categorySelect" placeholder="Category" required>
                <option value="1">ATERIA-AINEKSET JA KASTIKKEET</option>
            </select>
        </div>
        <div class="input">
            <label for="brandName">brand name</label>
            <input type="text" name="brandName" id="brandName" placeholder="Brand Name">
        </div>
        <div class="input">
            <label for="volumeType">volume type</label>

            <label for="volumeTypeKG">g/kg</label>
            <input type="radio" name="volumeType" id="volumeType" value="1">
            <label for="volumeTypeL">ml/l</label>
            <input type="radio" name="volumeType" id="volumeType" value="2">

        </div>

        <input type="submit" value="Add it" id="submit-item">

    </form>
</section> 
```

接收PHP：

```
$productName =  $_POST['productName'];
$categoryId =  $_POST['category'];
$brandId =  $_POST['brandName'];
$volumeId =  $_POST['volume']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:38:08.290

您的代码中有一些错误：

1）您有 2 个具有相同**id**的输入，根据定义，一个 ID 在页面中应该是唯一的。

```
<input type="radio" name="volumeType" id="volumeType" value="1">
<input type="radio" name="volumeType" id="volumeType" value="2"> 
```

如果要检索**所选**单选的值，应向每个单选按钮添加一个 CSS 类，如“myRadioGroup”，并使用以下命令检索值：

`$(".myRadioGroup:checked").val()`

2）您有一个指向自身的表单（带有`action=""`），并且您有一个`input type="submit"`. 因此，当您单击“添加”按钮时，侦听器会启动作业，但您不会停止提交事件，该事件会提交表单并重新加载同一页面。

尝试替换您的：

```
<input type="submit" value="Add it" id="submit-item"> 
```

带有一个不会启动任何提交事件的简单按钮。

```
<button type="button" id="submit-item">Add it</button> 
```

此外，该表单在您的情况下是无用的，因为您不使用它来序列化您的数据。您也可以删除表格。

当您单击该按钮时，它不会提交任何内容，并且您的 AJAX 调用将被发送。

# android - 在 android 媒体播放器中播放歌曲后如何显示消息？

> ID：12965230
> 
> 赞同：0
> 
> 时间：2012-10-18T23:23:56.410
> 
> 标签：android, android-mediaplayer

**嗨，大家好**

好的，所以我想在 android 媒体播放器中播放歌曲后显示一条消息

因为我希望每次用户在媒体播放器中播放一些歌曲

它会在屏幕上弹出一些消息。

例如：

```
the user want to play a song in the media player , so A message like "You just played a song !" will pop up to the screen 
```

有可能的？

抱歉英语不好:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:27:27.297

我不认为你的意思是你想“覆盖”它，你只是想在你自己的活动中使用它并让你的应用程序相应地运行。

看看这里是如何工作的：http: [//developer.android.com/reference/android/widget/VideoView.html](http://developer.android.com/reference/android/widget/VideoView.html)

# android - 应用程序不会在 Nook 上启动，ClassNotFoundException

> ID：12965237
> 
> 赞同：2
> 
> 时间：2012-10-18T23:24:34.070
> 
> 标签：android, classnotfoundexception, nook

我已经向 Nook 开发者门户网站提交了一个应用程序。它在我根深蒂固的角落颜色和所有不同的模拟器以及 Play 商店中的数千种设备上运行良好。问题是当我提交它时，它无法在他们的任何设备上启动。下面是我的清单和我的启动活动，它说它是由以下原因引起的：java.lang.ClassNotFoundException: com.bfreq.dice.SplashScreen in loader dalvik.system.PathClassLoader[/data/app/com.bfreq.dice-1。 APK]

是找不到我的主类还是找不到 SplashScreen 加载的类？

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.bfreq.dice"
    android:installLocation="auto"
    android:versionCode="11"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="11" />

    <supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:resizeable="true"
        android:smallScreens="true"
        android:xlargeScreens="true" />

    <meta-data
        android:name="ADMOB_ALLOW_LOCATION_FOR_ADS"
        android:value="true" />

    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:icon="@drawable/icon"
        android:label="@string/app_name" >
        <activity
            android:name=".SplashScreen"
            android:label="@string/app_name"
            android:theme="@style/Theme.Sherlock" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ViewPagerMain"
            android:label="@string/app_name"
            android:theme="@style/Theme.Sherlock"
            android:windowSoftInputMode="stateHidden" >
            <intent-filter>
                <action android:name="com.bfreq.dice.VPM" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".CustomDiceHandler"
            android:label="@string/app_name"
            android:windowSoftInputMode="stateHidden|adjustPan" >
            <intent-filter>
                <action android:name="com.bfreq.dice.CDH" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".AdProvider"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.Wallpaper"
            android:windowSoftInputMode="stateHidden|adjustPan" >
            <intent-filter>
                <action android:name="com.bfreq.dice.ADP" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.google.ads.AdActivity"
            android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize" >
        </activity>
    </application>

</manifest> 
```

这是我的启动画面

```
package com.bfreq.dice;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.SherlockActivity;

import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.DialogInterface.OnCancelListener;
import android.content.pm.ActivityInfo;
import android.content.res.Configuration;
import android.os.Bundle;
import android.util.Log;
import android.view.WindowManager;

public class SplashScreen extends SherlockActivity {

    AdProvider adTime = new AdProvider();
    DicePreferences prefs = new DicePreferences();
    static int ori = 0;
    static int time = 1000;
    static boolean firstLoad = true;

    Thread splashThread = new Thread() {
        @Override
        public void run() {
            try {
                int waited = 0;
                while (waited < time) {
                    sleep(100);
                    waited += 100;
                }
                Log.d("Hi", "I'm your thread, you should only see me once");
            } catch (InterruptedException e) {
                // do nothing
            } finally {
                Intent intent = new Intent("com.bfreq.dice.VPM");
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(intent);
                Log.d("Finished", "I just launch your intent, yay!");
                finish();
            }
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        ActionBar actionbar = getSupportActionBar();
        actionbar.setTitle("D&D Dice");
        actionbar.setSubtitle("by b.freq");
        actionbar.hide();
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

        prefs.loadArrayLists(this);
        prefs.loadStrings(this);
        prefs.loadSettings(this);
        prefs.loadDemo(this);

        if (adTime.getCurrentTime() > ViewPagerMain.endDemo
                && VersionCheck.demo) {
            VersionCheck.demo = false;
            ViewPagerMain.startDemo = 0;
            ViewPagerMain.endDemo = 0;
            prefs.saveDemo(this);
        }
        if (DialogFonts.sizeMain < 10 || DialogFonts.sizeDL < 10) {
            DialogFonts.sizeMain = 20;
            DialogFonts.sizeDL = 15;
            prefs.saveSettings(this);
        }

        // This is for manually changing orientation
        if (firstLoad) {
            prefs.loadOrientation(this);
            ViewPagerMain.ori = ori;
        }
        switch (ViewPagerMain.ori) {
        case 0:
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_NOSENSOR);
            break;
        case 1:
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
            break;
        case 2:
            setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
            break;
        }

        setContentView(R.layout.splash);

        // Dumping assets into their sdcard
        try {
            copyStream("CustomSheet - BlankSheet.csv", this);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        // This stops hardware keyboard orientation change
        if (((getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) < 3)
                & (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE)) {
            // setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
            AlertDialog alertDialog = new AlertDialog.Builder(this).create();
            alertDialog.setTitle("Orientation not Supported on your device!!!");
            alertDialog.setMessage("Close your KEYBOARD!!!");
            alertDialog.show();
            alertDialog.setOnCancelListener(new OnCancelListener() {
                @Override
                public void onCancel(DialogInterface dialog) {
                    finish();
                }
            });
        } else {
            splashThread.start();
        }

    } 
```

最后，这是他们发给我的错误日志。

```
Files: Rejected: NOOK Color, NOOK Tablet, NOOK HD, NOOK HD+
Your app has failed to launch or crashed. Please see the log that is
attached for more information.
1\. Install and boot the app.
Result: The app fails to boot and displays the message " Unfortunately,
D&D Dice by b.freq has stopped."

10-10 12:57:50.670 I/ActivityManager(  958): Starting activity: Intent {
act=android.intent.action.MAIN
dat=content://applications/applications/com.bfreq.dice/com.bfreq.dice.SplashScreen
flg=0x14000000
cmp=com.android.providers.applications/.ApplicationLauncher (has extras)
}

10-10 12:57:50.720 I/ApplicationLauncher( 3546): Launching
ComponentInfo{com.bfreq.dice/com.bfreq.dice.SplashScreen}

10-10 12:57:50.732 I/ActivityManager(  958): Starting activity: Intent {
act=android.intent.action.MAIN flg=0x10200000
cmp=com.bfreq.dice/.SplashScreen }

10-10 12:57:50.763 I/SurfaceFlinger(  958):

10-10 12:57:50.763 I/SurfaceFlinger(  958):
SurfaceFlinger::createSurface() : layer->mIdentity=244, LayerName=
Starting com.bfreq.dice

10-10 12:57:50.763 I/SurfaceFlinger(  958):
SurfaceFlinger::createSurface() : layer->clientIndex=1,
surfaceHandle->mToken=0x1

10-10 12:57:50.826 I/ActivityManager(  958): Start proc com.bfreq.dice
for activity com.bfreq.dice/.SplashScreen: pid=5006 uid=10051
gids={1015, 3003}

10-10 12:57:51.092 D/AndroidRuntime( 5006): Shutting down VM

10-10 12:57:51.092 W/dalvikvm( 5006): threadid=1: thread exiting with
uncaught exception (group=0x4001d888)

10-10 12:57:51.105 E/AndroidRuntime( 5006): FATAL EXCEPTION: main

10-10 12:57:51.105 E/AndroidRuntime( 5006): java.lang.RuntimeException:
Unable to instantiate activity
ComponentInfo{com.bfreq.dice/com.bfreq.dice.SplashScreen}:
java.lang.ClassNotFoundException: com.bfreq.dice.SplashScreen in loader
dalvik.system.PathClassLoader[/data/app/com.bfreq.dice-1.apk] 
```

它继续疯狂的很长一段时间......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T03:27:36.840

我不会在我的启动画面或任何其他活动中调用睡眠，那段代码有异味。尝试改变它。为什么不使用**Handler.postDelayed()**如果你使用 sleep 很长一段时间，你可能会得到 ANR。

这很简单，只需执行以下操作。

```
Runnable splashRunnable = new Runnable() {

    @Override
    public void run() {
        Intent intent = new Intent("com.bfreq.dice.VPM");
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
        finish();
    }
} 
```

在你的 onCreate() 方法中：

```
new Handler().postDelayed(splashRunnable, SPLASH_DELAY); 
```

现在，你完成了。

还要记住，**try catch**块不应该用于处理程序逻辑，它应该只用于从问题中恢复。有时可能会有例外，但这种情况是不合适的。

# python - wxPython py2exe 应用程序未正确捆绑？

> ID：12965238
> 
> 赞同：0
> 
> 时间：2012-10-18T23:24:38.623
> 
> 标签：python, dll, wxpython, py2exe

我有一个 wxPython 应用程序，我正在尝试使用 py2exe 将它制作成一个 exe，但我遇到了一些麻烦。我`MSVCP90.dll`与脚本位于同一目录中，py2exe 完成后，它在启动 exe 时显示“程序无法启动，因为 MSVCR90.dll 丢失......”。为什么找不到呢？

虽然它是 py2exe'ing，但我还得到以下信息：

```
The following modules appear to be missing
['Carbon', 'Carbon.Files']
...
Your executable(s) also depend on these dlls which are not included,
you may or may not need to distribute them.
...
  OLEAUT32.dll - C:\PATH
  USER32.dll - C:\PATH
...
  MSVCP90.dll - C:\PathToTheDllInMyScriptsFolder 
```

我在这里缺少什么吗？将 .py wxPython 应用程序转换为 .exe wxPython 应用程序有多难？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-28T00:29:26.980

我对 py2exe 也有类似的问题。我的项目使用额外的库，如 wxPython 和 Requests。

这对我有用：

1.  使用 gui2exe 创建项目

2.  指定非常基本的设置，如目标类和数据文件（在我的情况下 - 图像、sqlite 数据库等）并编译项目。

3.  在`dist`目录中，您将找到应该在我们的机器上运行的编译项目。

4.  接下来的步骤是这两个教程的混合：[py2exe](http://www.py2exe.org/index.cgi/Tutorial#Step52)和[cx_freeze](http://cx_freeze.readthedocs.org/en/latest/overview.html)

5.  在`dist`创建目录`Microsoft.VC90.CRT`

6.  复制到这个目录文件`msvcm90.dll`，，，从`msvcp90.dll``msvcr90.dll``C:\WINDOWS\WinSxS\x86_Microsoft.VC90.CRT_1fc8b3b9a1e18e3b_9.0.21022.8_x-ww_d08d0375`

7.  也复制`C:\WINDOWS\WinSxS\Manifests\x86_Microsoft.VC90.CRT_1fc8b3b9a1e18e3b_9.0.21022.8_x-ww_d08d0375.manifest`，但重命名为`Microsoft.VC90.CRT.manifest`

    我已经使用 Win XP 32 位和 Python 2.7.3 完成了这项工作，并在另一台 xp 机器和 Windows 7 上成功启动了编译的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T06:58:38.770

你有任何尝试[pyinstaller](http://www.pyinstaller.org/)的愿望吗？我也曾为 wxPython 项目尝试过 py2exe，但收到了许多晦涩难懂的错误。Pyinstaller 在第一次尝试时就出现了，我认为它更容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-08T17:39:35.770

经过近一年的尝试建立一个没有成功。终于明白了。您必须排除两个文件“msvcp90.dll”、“msvcr71.dll”。

dll_excludes = ['libgdk-win32-2.0-0.dll', 'libgobject-2.0-0.dll', 'tcl84.dll', 'tk84.dll', 'msvcp90.dll', 'msvcr71.dll']

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T18:27:18.417

处理这个问题的方法是从 py2exe 包中排除 MSVCP90.dll。这是我执行此操作的设置脚本之一的一部分：

```
dll_excludes = ['libgdk-win32-2.0-0.dll', 'libgobject-2.0-0.dll', 'tcl84.dll',
                'tk84.dll','MSVCP90.dll']

setup(
    data_files = data_files,
    options = {"py2exe": {"compressed": 2,
                          "optimize": 2,
                          "includes": includes,
                          "excludes": excludes,
                          "packages": packages,
                          "dll_excludes": dll_excludes,
                          "bundle_files": 1,
                          "dist_dir": "dist",
                          "xref": False,
                          "skip_archive": False,
                          "ascii": False,
                          "custom_boot_script": '',
                         }
              },
    zipfile = None,
    windows = [filename]
    ) 
```

然后，您将负责确保 MS Visual C++ 运行时安装在最终用户的机器上。你可以在这里得到它：

[http://www.microsoft.com/en-us/download/details.aspx?id=29](http://www.microsoft.com/en-us/download/details.aspx?id=29)

我的经验是，很难找到缺少 Visual c 运行时的 Windows 机器，但您需要做好准备以防万一。

祝你好运，迈克

# perl - 过滤由 Perl 脚本生成的所有邮件

> ID：12965240
> 
> 赞同：0
> 
> 时间：2012-10-18T23:24:49.840
> 
> 标签：perl

是否可以过滤由 Perl 脚本生成的所有外发邮件，或者删除 Perl 一起发送邮件的能力？

[如记录所有由 php 创建的传出邮件](https://serverfault.com/questions/250325/log-all-outgoing-mail-created-by-php)中所述，我已经完成了与 PHP 类似的事情 。这只是 sendmail 的一个包装器，但效果很好。

我的系统是带有 Postfix 和 Perl v5.10.1 的 Ubuntu 10.04 LTS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:14:53.640

您正在保护错误的点。哦，你的 php 解决方案甚至不适用于所有常见的地方。

您可以通过（至少）发送邮件：

*   直接 SMTP
*   调用 sendmail（在类 unix 系统上）
*   调用使用上述之一的包装器

您的 php 解决方案仅捕获其中之一。

所以 - 你想要做的是：

1.  除邮件服务器外，防火墙到端口 25/465 (SMTP/SMTPS) 的传出连接
2.  为您的邮件服务器打开 SMTP AUTH
3.  向每个需要发送电子邮件的网站发出用户名+密码

您现在可以轻松地从您的邮件日志中验证谁在发送垃圾邮件，也可以禁用他们的外发邮件。

这仍然不能阻止某人通过 HTTP 服务发送邮件，但是阻止垃圾邮件成为提供该服务的人的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T23:30:39.233

我想你可以在[这篇法语文章](http://articles.mongueurs.net/magazines/perles/perles-43.html)中找到如何写`proxy`with 。将 URL 放入[http://translate.google.com](http://translate.google.com)进行翻译。`Perl`

请参阅[http://bent.latency.net/smtpprox/](http://bent.latency.net/smtpprox/)。

**编辑**

我认为没有一种可靠的方法可以像 PHP for Perl 中的变量那样执行此操作。看看[http://www.mailscanner.info/postfix.html](http://www.mailscanner.info/postfix.html)它可能会有所帮助。

# c# - 使用 C# 的单选按钮的 onclick 事件

> ID：12965243
> 
> 赞同：0
> 
> 时间：2012-10-18T23:25:10.513
> 
> 标签：c#, javascript, button, onclick, radio

如何使用 JavaScript 为 C# 类中的单选按钮控件实现“onclick”事件，以更改隐藏的服务器控件文本框文本值以反映单击了哪个按钮？这些按钮是在客户端上运行的 html 控件。

假设我有 2 个单选按钮：Button1 和 Button2。在我的 C# 代码中，我需要替换下面的警报调用来更新我的 Textbox 控件，此隐藏中的值将在 PostBack 上处理。

```
Button1.Attributes.Add("onclick", "alert(' You clicked Button 1\. How do I update textBox.Text? in here?');");       
Button2.Attributes.Add("onclick", "alert('You clicked Button 2\. How do I update textBox.Text? in here?');"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:59:06.690

```
Button1.Attributes.Add("onclick", "javascript:document.getElementById('" + TextBox1.ClientID + "').value = 'Button1'");

      Button2.Attributes.Add("onclick", "javascript:document.getElementById('" + TextBox1.ClientID + "').value = 'Button2'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T23:35:05.390

试试这个

```
document.getElementById('myTextbox').value = 'Button1'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T23:45:19.480

因为您的隐藏文本框在服务器端运行，所以它的 ID 是未知的。您需要获取客户端 ID。

```
Button1.Attributes.Add("onclick", "javascript:document.getElementById('" + Textbox1.ClientId + "').value = this.ID");

Button2.Attributes.Add("onclick", "javascript:document.getElementById('" + Textbox1.ClientId + "').value = this.ID"); 
```

请记住，您需要使用 JavaScript 隐藏文本框或使用 hiddenInput 控件。

# c# - 访问 RSA 密钥容器

> ID：12965244
> 
> 赞同：2
> 
> 时间：2012-10-18T23:25:26.463
> 
> 标签：c#, .net, cryptography, rsa

我使用 aspnet_regiis.exe 生成了一个 RSA 密钥并将其安装在目标机器上。如何使用 C# 代码访问它？

我想要它的类型`System.Security.Cryptography.RSA`。

当我弄清楚时，我会更新这个问题。同时，任何指针都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:29:19.700

选择特定容器的*关键*[`CspParameters`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.cspparameters.aspx)是创建实例并在创建`RSACryptoServiceProvider`.

困难在于设置正确的参数。您可能必须深入研究较旧的 CryptoAPI 文档才能找到每个标志（除非 MSDN 文档在过去几年变得更好）。

# php - PHP错误：注意：未定义的变量

> ID：12965250
> 
> 赞同：1
> 
> 时间：2012-10-18T23:25:43.117
> 
> 标签：php, javascript

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T23:28:04.570

`$displayTimes`只有在满足条件时才会声明，它是由以下原因引起的：

```
if($_REQUEST["countIt"]) <------------------- Condition 
{
    $displayTimes = $_REQUEST["countIt"];
} 
```

将以上内容替换为：

```
$displayTimes = isset($_REQUEST["countIt"]) ? $_REQUEST["countIt"] : 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T23:29:35.333

`$displayTimes`必须设置变量才能使用它。如果`$_REQUEST["countIt"]`未设置，则`$displayTimes`未设置。

将其更改为以下内容：

```
$displayTimes = isset($_REQUEST['countIt']) ? $_REQUEST['countIt'] : 0; 
```

这样，如果`$_REQUEST['countIt']`未设置，则不会执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T23:35:19.300

# .net - C# 列表的 COM 等效类型

> ID：12965251
> 
> 赞同：0
> 
> 时间：2012-10-18T23:25:44.433
> 
> 标签：.net, com

我有一个想要作为 COM 对象公开的 .NET 类。该类为 .NET 集合类型 List。

.NET 集合类型如何暴露给 COM 客户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:35:08.530

没有等价物。您将获得的最接近的是特定类型的数组。

# ios - 警告：移位计数 >= 类型宽度

> ID：12965261
> 
> 赞同：0
> 
> 时间：2012-10-18T23:26:55.410
> 
> 标签：ios, xcode

我确实有这样的代码

```
data = new uint[2] { (uint)ul, (uint)(ul >> 32) }; 
```

xCode 在其上对`ul >> 32`带有主题警告的一段代码大喊大叫。如何解决？

或者更好的是，如何禁用这些警告，因为我在 C++ 代码中有 16 个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:16:12.837

好吧，解决方案很简单。C# 中的`ulong`类型是 64 位数字，而在 iOS 中是 32 位数字。将 ios 中的类型更改为`unsigned long long`所有工作并根据需要编译后。

# javascript - Facebook Graph API 在 iPhone 4s 上登录后不断重新加载

> ID：12965262
> 
> 赞同：2
> 
> 时间：2012-10-18T23:27:18.987
> 
> 标签：javascript, iphone, facebook-graph-api, facebook-javascript-sdk

我正在尝试使用 Facebook Graph API 登录我的网站。它在我测试过的四款不同的 iPhone 4（运行 iOS 5）和一台 iPhone 5（运行 iOS 5）设备上运行良好。

在 iPhone 4s（运行 iOS 5）设备上，在我在 Facebook 上输入凭据并单击登录后，它会不断重新加载 Facebook 页面。

这是页面在不断重新加载时的外观截图：

![](../Images/c37a87724afc92cd406fc1181343884b.png)

我该如何解决这个问题？

这是我正在使用的 Facebook 登录代码：

```
<div id="fb-root"></div>
<script type="text/javascript">
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'xxxxxxxxxxxx',
      status     : true,
      cookie     : true,
      xfbml      : true
    });
    FB.getLoginStatus(function(response) {
      if (response.status == "connected") {
        // do something
      }
    });

    FB.Event.subscribe("auth.login", function(response) {
      if (response.status == "connected") {
        // do something
      }
    });

    FB.Event.subscribe('auth.authResponseChange', function(response) {
      if (response.authResponse) {
        // do something
      }
    });
  };

  function loginUser() {
    FB.login(function(response) { }, {});
  }
  function logout() {
    FB.logout(function(response) {
      // do something
    });
  }
  (function() {
  var e = document.createElement('script'); e.async = true;
      e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
      document.getElementById('fb-root').appendChild(e);
      }());
</script>
<a href="#" onclick="loginUser(); return false;">Login</a> 
```

# networking - 哪个操作系统支持wifi直连？

> ID：12965265
> 
> 赞同：0
> 
> 时间：2012-10-18T23:27:27.923
> 
> 标签：networking, operating-system, driver, linux-device-driver, wifi-direct

我读过，我们只需要一个*特殊*的软件（驱动程序）就可以在特定的操作系统中支持WiFi Direct，也就是说，我们不需要购买新的网络接口，所以关键是软件。

假设是真的，我想知道支持 WiFi Direct 的操作系统有哪些？我知道Android有支持，但我想了解其他操作系统

像一个开源爱好者一样，我想阅读 Linux 支持 Wifi Direct，但 Windows 是否支持并不重要：D

来自墨西哥的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:09:45.563

我很确定 wifi direct 需要对硬件进行认证......可能是 MAC 层规范的一个小补充，以支持新功能，但没有确切的细节。

无论如何 - 一堆现代 wifi 芯片组现在已经过认证......所以如果你有一台现代计算机，你应该能够找出芯片组是否兼容以及芯片组制造商是否有驱动程序和软件。

我可以确认我的运行 win7 x64 的 HP Elitebook 8460p 能够下载并安装其芯片组的英特尔 wifi 直接驱动程序和管理软件。

# java - 从文件读取时出现 NullPointerException

> ID：12965270
> 
> 赞同：0
> 
> 时间：2012-10-18T23:27:41.280
> 
> 标签：java, exception, pointers, null

我在运行我的 Java 程序时遇到了 java.lang.NullPointerException 错误，在阅读了它之后，我想我理解了这个错误的含义，但我仍然不确定如何修复它。

```
import java.util.ArrayList;
import java.io.FileInputStream;
import java.io.DataInputStream;
import java.io.BufferedReader;
import java.io.FileOutputStream;
import java.io.InputStreamReader;
import java.io.IOException;
import java.io.PrintStream;
public class readFile {

public static ArrayList<String> pullFirst(String fileName) throws IOException{
    String filen = "C:\\Users\\Steven\\Desktop\\Tests\\wunderground\\outputTweetsWeather.txt";
    ArrayList<String> arl = new ArrayList<String>(); // java 6 ArrayList 

    FileInputStream fs = new FileInputStream(filen); // this is how you access a file in java
    DataInputStream din = new DataInputStream(fs);
    BufferedReader bin = new BufferedReader(new InputStreamReader(din));

    String line;    
    while(!(line = bin.readLine()).startsWith("String index out of range")){ // read each line in the file while they exist
        arl.add(line);                // add them to the array list
    }

    return arl;                                  // return the array list
}

public static void main(String[] args, int j) {

    // this is just demo code to prove it works so you can check the output.
    try{
    ArrayList<String> rVal = pullFirst("testFile.txt");
        for(String a : rVal){
            //System.out.println(a + "\n"); // insert write to file code here
           if(a.startsWith("+t")){
       //          System.out.println(a);
           }
        }
        int i = 36;

        PrintStream out5 = new PrintStream(new FileOutputStream("forpopUp1.txt", true));

        System.setOut(out5);
     System.out.println(rVal.get(2 + j*i)); // Display Value

    }catch(Exception e){
        System.out.print("Problem in readFile" + e);
    }

}
} 
```

现在我不确定这是否与我的主线是

```
public static void main(String[] args, int j) { 
```

但是，据我所知，我必须这样，因为这个类是在另一个类的 if 条件运行后执行的，使用该行

```
readFile.main(args, counterForreadFile); 
```

这是 StackTrace 的结果：

```
java.lang.NullPointerException
at readFile.pullFirst(readFile.java:22)
at readFile.main(readFile.java:33) 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:36:40.107

我相信错误是您阅读的文件已用尽：

读取文件时：

```
while(!(line = bin.readLine()).startsWith("String index out of range")){ 
  ...
} 
```

当文件用完时，`BufferedReader`将返回`null`。

当你这样做时，`(line=bin.readLine()).startsWith(..)`你实际上尝试在这种情况下调用`startsWith()`on `null`- 因此是错误。

要解决这个问题，您应该迭代为：

```
while ((line = bin.readLine()) != null) { 
  if (line.startsWith("String index out of range")) break; 
  //rest of the code
} 
```

`null`当读者筋疲力尽时，这可以为您提供安全。

虽然这绝对是一个问题 - 在您提供完整的堆栈跟踪之前，我无法确定这是您遇到的确切问题。

* * *

PS 正如我在评论中已经说过的 - 获取堆栈跟踪（提供有关该问题的更多信息），您可以添加到您的`catch`块中，所以它将是这样的：

```
}catch(Exception e){
    System.out.print("Problem in readFile" + e);
    e.printStackTrace();
} 
```

另一种方法是声明`main()`为`throws Exception`，并删除`catch`块（以及`try`块）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T23:44:23.040

在 catch(Execption e) 中替换

```
System.out.print("Problem in readFile" + e); 
```

经过

```
e.printStackTrace(); 
```

这显示了行错误。

# javascript - 制作默认 DIV（JS 代码）

> ID：12965271
> 
> 赞同：1
> 
> 时间：2012-10-18T23:27:54.160
> 
> 标签：javascript, css

这是一个小问题。

[http://jsfiddle.net/fkling/TpF24/](http://jsfiddle.net/fkling/TpF24/) 在这个例子中，我需要 <div>Bar 1</div> 默认打开...

我怎样才能做到这一点？

就是这样，非常感谢！:D

JS代码：

```
var current = null;

function showresponddiv(messagedivid){
    var id = messagedivid.replace("message-", "respond-"),
        div = document.getElementById(id);

    // hide previous one
    if(current && current != div) {
        current.style.display =  'none';
    }   

    if (div.style.display=="none"){
        div.style.display="inline";
        current = div;
    }
    else {
        div.style.display="none";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T23:31:52.300

默认情况下删除`display: none`HTML 中的。演示：[jslint](http://jsfiddle.net/TpF24/76/)。或者正如 Gaby 建议的那样，通过调用`showresponddiv('message-1')`on来隐藏 div `windiw.load`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T23:47:31.320

只需添加

```
window.onload = function(){
    showresponddiv('message-1'); 
} 
```

演示在[http://jsfiddle.net/TpF24/79/](http://jsfiddle.net/TpF24/79/)

# compression - 以良好的拼写和规范的霍夫曼代码压缩文本

> ID：12965283
> 
> 赞同：1
> 
> 时间：2012-10-18T23:29:29.420
> 
> 标签：compression, prefix, huffman-code, prefix-tree

我想通过使用单词作为符号而不是字符来压缩文本，我真的不知道这是否是一个好主意，但我只想测试它（用于科学）。

问题是，我不能真正存储英语的所有单词，所以我收集了一个非常常见的单词列表（大约 1600 个单词），我打算像拼写检查器存储派生形式的单词一样对其进行更改。（例如：kill、kill-ing、kill-er、kill-s 取决于它是动词、形容词等）

[http://en.wikipedia.org/wiki/Canonical_Huffman_code](http://en.wikipedia.org/wiki/Canonical_Huffman_code)

我想知道这个特殊版本的霍夫曼编码是否适合我的需要，因为“字典”不会经常更改并且可以与解压缩工具一起分发。在创建原始霍夫曼树之前，我似乎还必须指定单词的频率，然后再将其变成规范的霍夫曼树。

如果我在这里遗漏了一点，或者这是一个好主意还是坏主意，你能纠正我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:07:23.067

这里要注意的一点是，这种特殊变体的优点是*只有*更小的码本而不是压缩数据。因此，*只要*您需要包含霍夫曼密码本以及您的数据，只要您替换的部分是连续的，就可以使用它。由于单词自然可以按顺序排序 - 你可以，因此你应该 - 使用 Canonical Huffman Code。

# java - Drawable 不会在 SurfaceView、Thread 实现上绘制，无需覆盖 onDraw

> ID：12965286
> 
> 赞同：0
> 
> 时间：2012-10-18T23:29:38.127
> 
> 标签：java, android, multithreading, drawable, surfaceview

老实说，我很难理解为什么这不起作用。尝试使用布局中的 SurfaceView 和要绘制的线程将简单的 PNG 绘制到屏幕上，而不是覆盖 onDraw 函数。它与 LunarLander 示例项目的实现本质上完全相同（我几乎沮丧地撕掉了整个代码集）。

我已经通过日志对其进行了测试，我知道精灵正在被“绘制”到画布上，但窗口中没有显示任何内容。

这是代码，希望它不会太长（去掉不重要的部分）：

activity_pannenkoekenhuis.xml（布局/）

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<com.example.pannenkoekenhuis.MainView
    android:id="@+id/pannenkoekenhuis_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Pannenkoekenhuis" >
</RelativeLayout>

</FrameLayout> 
```

主视图（SurfaceView）：

```
public class MainView extends SurfaceView implements SurfaceHolder.Callback {

class MainThread extends Thread {
    SurfaceHolder surfaceHolder;
    Context context;
    Handler handler;

    HandleResources hResources;
    HandleGame hGame;

    public MainThread(SurfaceHolder surfaceHolder, Context context,
            Handler handler) {
        this.surfaceHolder = surfaceHolder;
        this.context = context;
        this.handler = handler;
        hResources = new HandleResources(context);
        hGame = new HandleGame();

        init();
    }

    @Override
    public void run() {
        while (true) {
            Canvas canvas = null;
            try {
                canvas = surfaceHolder.lockCanvas(null);
                synchronized (surfaceHolder) {
                                            Drawable d = context.getResources().getDrawable(R.drawable.s_char);
                    d.draw(canvas);
                }
            } finally {
                if (canvas != null) {
                    surfaceHolder.unlockCanvasAndPost(canvas);
                }
            }
        }
    }
}

MainThread thread;

public MainView(Context context, AttributeSet attrs) {
    super(context, attrs);

    SurfaceHolder surfaceHolder = getHolder();
    getHolder().addCallback(this);

    thread = new MainThread(surfaceHolder, context, new Handler());

    setFocusable(true);
}
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:12:48.640

嘎，想通了。出于某种原因需要删除 setBackgroundColor()，因为它可能正在绘制图形。愚蠢的错误。

# java - JSON 数组的累加器

> ID：12965287
> 
> 赞同：0
> 
> 时间：2012-10-18T23:29:41.367
> 
> 标签：java, android, json

我有一个 json 对象，其中包含 json 对象的 json 数组（我知道令人困惑，但是）在对象中是键（名称，值）我想将给定键的所有值相加，但我不清楚该怎么做[javadoc的](http://www.json.org/javadoc/org/json/JSONObject.html)帮助不大。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:43:34.437

据我了解，JSONArray 是一个与 JSONObject 中的键匹配的值。

您需要使用 JSONObject 的`get`方法提取 JSONArray，然后使用`get`JSONArray 的方法对其进行迭代。

例子：

```
int ans = 0;
JSONObject jObj;
jArr = (JSONArray) jObj.get("arr");
for(int i=0; i<jArr.length(); i++)
{
    JSONObject o = (JSONObject) jArr.get(i);
    ans += (int) o.get(theGivenKey);
} 
```

当然，您需要在任何地方处理空值。祝你好运。:-)

# c++ - 如何改进基于 sse 的矩阵乘法

> ID：12965291
> 
> 赞同：1
> 
> 时间：2012-10-18T23:30:23.087
> 
> 标签：c++, performance, matrix, sse, simd

```
float** matrix::mult(float** matrix1){
  float** result=new float *[n];
  int i,j,k;
  for(i=0;i<n;i++){
    result[i]=new float [n];
  }
  vect v1;
  vect v2;
  vect v3;
  vect total;
  clock_t start, end;
  start = clock();
  float result_ij=0;
  for(i=0;i<n;i++){   
    for(j=0;j<n;j++){
      result_ij=0;
      total.v=_mm_set1_ps(0);
      for(k=0;k<n;k=k+4){
        v1.v=_mm_set_ps(user_matrix[k][j],user_matrix[k+1][j],user_matrix[k+2][j],user_matrix[k+3][j]);
        v2.v=_mm_set_ps(matrix1[i][k],matrix1[i][k+1],matrix1[i][k+2],matrix1[i][k+3]);
        v3.v=_mm_mul_ps(v1.v,v2.v);
        total.v=_mm_add_ps(total.v,v3.v);
      }
      result[i][j]=total.a[1]+total.a[0]+total.a[2]+total.a[3];
    }
  }
  end = clock();
  cout<<(double)(end-start)/CLOCKS_PER_SEC<<endl;
  return result;
} 
```

此代码与标量代码的速度几乎完全相同。我不明白为什么会这么慢，它是用 g++ 编译的，而 vect 类型是联合。

```
union vect {
__m128 v;    
float a[4];  
} ; 
```

对于作为多维数组的矩阵，将其加载到 SSE 寄存器中的最快方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:32:59.953

我不确定你是否想自己实现这个，但英特尔提供了很多有趣的代码：

[http://www.intel.com/design/Pentiumiii/sml/index.htm](http://www.intel.com/design/Pentiumiii/sml/index.htm)

他们有代码用于乘以 4x4、6x6 矩阵，找到它们的逆矩阵和其他矩阵。对于带有和不带有 SSE 的两个版本，它们还显示了一些基准测试等

# javascript - 如何获得最大文档滚动顶部值

> ID：12965296
> 
> 赞同：21
> 
> 时间：2012-10-18T23:30:43.080
> 
> 标签：javascript, jquery, scrolltop

我正在制作一些插件，我需要获得`scrollTop`文档的最大值。最大值`scrollTop`是`2001`，但`$(document).height()`返回`2668`并`$('body')[0].scrollHeight`给我`undefined`。

如何`2001`通过javascript/jquery？！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-18T23:42:28.343

您评论中的代码应该可以工作：

```
$(document).height() - $(window).height() 
```

这是一个在您滚动到最大滚动位置时发出警报的示例：http: [//jsfiddle.net/DWn7Z/](http://jsfiddle.net/DWn7Z/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-14T02:00:25.983

这是我写的答案[https://stackoverflow.com/a/48246003/7668448](https://stackoverflow.com/a/48246003/7668448)，它是关于 scrollTopMax 的 polyfill，它是 Element 对象的本机属性。（仅限Mozilla）。看看回复，你真的很喜欢。

贝娄只是一个快速的片段。链接里的答案比较丰富（一定要看）。

```
(function(elmProto){
    if ('scrollTopMax' in elmProto) {
        return;
    }
    Object.defineProperties(elmProto, {
        'scrollTopMax': {
            get: function scrollTopMax() {
              return this.scrollHeight - this.clientTop;
            }
        },
        'scrollLeftMax': {
            get: function scrollLeftMax() {
              return this.scrollWidth - this.clientLeft;
            }
        }
    });
}
)(Element.prototype); 
```

使用示例：

```
var el = document.getElementById('el1');
var max = el.scrollLeftMax; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T23:54:28.597

如果您想“猜测”最大滚动顶部值，也许您应该比较文档的高度和视口高度（窗口大小）。

```
/**
 * Return a viewport object (width and height)
 */
function viewport()
{
    var e = window, a = 'inner';
    if (!('innerWidth' in window))
    {
        a = 'client';
        e = document.documentElement || document.body;
    }
    return { width : e[ a+'Width' ] , height : e[ a+'Height' ] }
}

// Retrieve the height of the document, including padding, margin and border
var documentHeight = $(document).outerheight(true);
var viewPortData = viewport();

var maxScrollTop = documentHeight - viewPortData.height; 
```

当然，在你的插件中，你还应该在resize事件上添加一个监听器，并重新计算最大scrollTop。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-02T03:22:15.490

在 vanilla Javascript 中，我目前正在这样做：

```
getScrollTopMax = function () {
  var ref;
  return (ref = document.scrollingElement.scrollTopMax) != null
      ? ref
      : (document.scrollingElement.scrollHeight - document.documentElement.clientHeight);
}; 
```

如果存在，则返回[Gecko 的非标准 scrollTopMax ，否则计算它。](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollTopMax)我在`document.scrollingElement`这里使用，它只存在于特定的浏览器上，但很[容易 polyfill](https://github.com/mathiasbynens/document.scrollingElement)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-26T07:01:55.263

试试这个，一个简单易行的解决方案：-

`document.body.getBoundingClientRect().bottom;`

在 W3 学校找到这个......

# c++ - C++ std:sort() 使用不同的标准

> ID：12965300
> 
> 赞同：0
> 
> 时间：2012-10-18T23:31:24.537
> 
> 标签：c++, stl, function-object

我搜索了很多，我不确定这是否是重复的查询，但我用[它](https://stackoverflow.com/q/4450095/1410711)作为参考来为我创建一个排序，`std::vector`它需要以下类型的数据。

```
typedef struct {
    int size;
    int type;
    int id;
} AC; 
```

我能够为每个标准编写单独的函数对象。但是，我的项目要求说我只需要一个类或结构来包含所有用于根据 和 排序的`size`函数`type`对象`id`。是否可以`std::sort`在一个类中包含所有功能对象？

我的意思是

```
Comparator com;
sort(iVec.begin(),iVec.end(),com.sortbysize);
sort(iVec.begin(),iVec.end(),com.sortbytype);
sort(iVec.begin(),iVec.end(),com.sortbyid); 
```

我也考虑`binary_functions`满足我的要求，但是当我在一个类中声明多个函数对象时，我遇到了错误。

此外，函数对象`std::sort`（以及任何涉及比较的 STL 算法）是否必须是函数对象，`bool operator()`或者它们可以是返回的普通函数`bool`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T23:37:00.573

两者都是：

```
struct Comparator
{
    static bool sortbysize(const AC &lhs, const AC &rhs) { /*...*/ }
    static bool sortbytype(const AC &lhs, const AC &rhs) { /*...*/ }
    static bool sortbyid(const AC &lhs, const AC &rhs) { /*...*/ }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T23:39:32.160

是的，如果你想拥有一个类，你可以在它上面定义静态函数：

```
class MyComparator {
    public:
        static bool sortbysize( const AC & elem1, const AC & elem2 ){ ... }
        static bool sortbytype( const AC & elem1, const AC & elem2 ){ ... }
        static bool sortbyid  ( const AC & elem1, const AC & elem2 ){ ... }
} 
```

然后使用适当的语法使用 sort 来调用静态函数：

```
sort(iVec.begin(),iVec.end(),MyComparator::sortbysize); 
```

如果您真的更喜欢遵循常规的可比较类样式，您可以做一些事情（尽管看起来有点愚蠢），例如在类中使用静态标记来指定比较运算符的工作方式：

```
typedef struct {
    int size;
    int type;
    int id;

    enum marker { SIZE, TYPE, ID };
    static AC::marker comparisonType;

    bool operator() (const AC & i,const AC & j) 
    { 
        // Work here to make the enum thing work with the switch-case... 
        // it's all about integers
        switch(AC::comparisonType){
        case SIZE:
            return (i.size < j.size);
        ...
        }
    }
} AC; 
```

# rdf - Freebase 主题的 RDF

> ID：12965303
> 
> 赞同：5
> 
> 时间：2012-10-18T23:31:50.230
> 
> 标签：rdf, freebase

我正在使用 python 库`rdflib`来查询 Freebase 的主题。

我发现Freebase返回的主题数据不完整。例如，当我查询时：

`http://rdf.freebase.com/rdf/en.barack_obama`

*`place_of_birth`*虽然我可以在使用 MQL 查询该属性时验证数据是否存在，但结果不包含有关的数据。

我的问题是：**我可以依靠对 RDF 服务的查询来返回给定主题的所有 rdf 三元组吗？**

如果没有，有没有办法确保我得到所有的三元组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T01:02:55.483

不幸的是，答案是否定的。某些主题链接到 Freebase 中的数千个其他主题，如果我们不对返回的三元组数量施加限制，我们的 API 将超时。我们将在不久的将来发布 Freebase 的完整 RDF 转储。这将是获取所有 RDF 数据的最佳方式。

# java - JSR303 - 仅在填充时验证

> ID：12965307
> 
> 赞同：0
> 
> 时间：2012-10-18T23:32:30.020
> 
> 标签：java, spring, bean-validation

我在 Java Bean 中有一个字段（公斤）不是强制性的，但如果用户确实输入了它，它显然需要是一个数字。

是否有可以强制执行该规则的 JSR303 注释组合？我试过

```
@Min(value=0) 
```

但这显然不允许空，这是允许的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:12:50.107

文档说空值被认为是有效的。看

[http://jackson.codehaus.org/javadoc/bean-validation-api/1.0/javax/validation/constraints/Min.html](http://jackson.codehaus.org/javadoc/bean-validation-api/1.0/javax/validation/constraints/Min.html)

您需要使用对象类型（整数）而不是原始类型。如果您有问题，请向我们展示您的 bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T15:45:31.210

您不能使用 Bean Validation 1.0 进行 OR 组合。Hibernate Validator 有一个特性可以让你这样做。它被称为“自定义约束的布尔组合” - [http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#d0e3701](http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#d0e3701)

所以你需要一个自定义约束，你显然不会符合标准，但它可以工作。

对于 Bean Validation 1.1，有一个讨论是否应该将布尔组合纳入标准 ( [BVAL-260](https://hibernate.onjira.com/browse/BVAL-260) )，但不能保证。

# php - 在 PHP 中对流设置读取超时的规范方法是什么？

> ID：12965312
> 
> 赞同：5
> 
> 时间：2012-10-18T23:33:23.737
> 
> 标签：php, sockets

这是一些示例代码：

```
<?php
$fp = fsockopen($host, $port, $errno, $errstr, $connectTimeout);

if (!$fp) {
    echo "$errstr ($errno)<br />\n";
} else {
    echo "connected\n"; 
    while (!feof($fp)) {
        echo fgets($fp, 128);
    }
    fclose($fp);
} 
```

我见过 `stream_set_timeout($fp, 5);`and
`socket_set_option($fp, SOL_SOCKET, SO_RCVTIMEO, array("sec"=>5, "usec"=>0));`，但读取永远不会超时。

我在 PHP 文档中看到了几个警告`stream_set_timeout()`：

> 此函数不适用于 stream_socket_recvfrom() 等高级操作，请改用带有 timeout 参数的 stream_select()。

我宁愿不使用`select()`或循环。进行超时阻塞读取的规范方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T18:26:37.613

`socket_set_option`用于创建的套接字`socket_create`。

`stream_set_timeout`用于流，例如由`fopen`or创建的`fsockopen`。

[Php 文档](http://php.net/manual/en/function.stream-set-timeout.php)包含有关如何将其与 fsockopen 一起使用的示例代码。

# mysql - MySQL Workbench 不保存 EER 图

> ID：12965313
> 
> 赞同：2
> 
> 时间：2012-10-18T23:34:01.527
> 
> 标签：mysql, diagram, workbench

我已经使用 WB 很长时间了，图表功能绝对是我最喜欢的功能之一，在我的一个项目中，超过 50 个表格在图表中得到了很好的布局，当我打印了 4x4 A4 页的图表时我真的感觉很好！

但是今天当我不小心关闭了“EER 图”选项卡时，我意识到我丢失了所有的图表？！！！我看不到任何地方可以打开封闭图，它就消失了吗？！！！

尽管我的源代码版本控制保存了我以前的大部分作品，但我只需要几分钟就可以添加我修改过的内容，我发现 WB 没有图表的保存/打开按钮真的很奇怪。

我尝试用谷歌搜索它，但没有找到任何提到类似问题的帖子，我是否从软件界面中遗漏了什么？还是只有我一个人用了这么多功能，突然失去了工作？！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T11:02:33.960

在 MySQL Wokbench 中，每个图表都属于一个模型（模型位于单独的选项卡中），因此它可以让您关闭图表而不要求您保存模型。当您尝试关闭具有未保存更改的打开模型时，它确实会要求您保存模型。

因此，简而言之，如果您在尝试使用未保存的更改关闭模型时没有被要求保存模型，那么您应该在[http://bugs.mysql.com](http://bugs.mysql.com)中报告这是一个错误。否则，您可以通过打开其父模型并双击该模型中的图表图标来恢复您的图表。

祝你今天过得愉快。

# python - 一种在简单接口后面转换和组合多种数据类型的模式

> ID：12965314
> 
> 赞同：3
> 
> 时间：2012-10-18T23:34:02.913
> 
> 标签：python, django, design-patterns, abstraction

我很难为小型事件日志记录框架概念化一个理智的抽象，并且在野外没有遇到任何适用于此的可比较的东西。

概述：我们的 Web 应用程序需要从服务器端记录事件。事件数据经过 json 编码以写入平面文件。事件可能是页面浏览、注册、错误条件等。

所有事件都将包含一组核心数据，例如 Web 请求信息和会话状态。任何事件都应该能够定义要记录的附加数据。

理想情况下，触发事件的界面将非常小。事件定义和数据要求应在单个配置文件中定义。数据验证和数据转换应该隐藏在这个配置文件后面。换句话说，记录事件的接口应该只需要事件名称和要在事件中转换和记录的数据结构。

我最初的想法是，将单个数据结构映射到单个函数，其职责是将数据结构转换为字典，最终将合并到最终的事件对象中，然后进行 json 编码并写入文件。我将这些称为“作曲家”功能。在 Django 术语中，配置文件中的某些内容会映射，例如，传递给视图的 HTTP 请求对象到“request_composer”函​​数。该函数将构造一个从该请求对象中提取的数据字典。从视图发出的事件需要传入那个“请求”对象。

我想我的问题是，是否存在我忽略的模式或抽象可以干净地转换任意数据结构并将它们合并到最终数据结构中。我觉得这种“单一数据类型映射到单一转换函数”有点笨拙和不雅。当单个转换器接受多个参数是有意义的时，它也会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:48:42.487

亚伦没有硬性规定。我的建议是你开始想象如果你有整个设计并且你想从一个视图中触发一个事件，那么实现会是什么样子。

所以这是我的建议，它有这些特定的目标：

*   必须明确引用事件（Django 的设计）
*   事件可以重复使用或特定于应用程序
*   每个事件都需要一个请求实例
*   每个事件都可以收集额外的任意参数或关键字参数，它们所要做的就是为事件处理器提供一个上下文
*   事件处理器将提取请求数据，将其与上下文序列化为 JSON，并将其附加到日志文件

所以假设你在你的项目中创建了应用程序，`myproj.events`并且你有一些应用程序在`myproj.myapp`.

让我们在以下位置创建事件处理器和默认项目范围的实例`myproj/events/__init__.py`：

```
import 

class Events(object): pass  # Use your imagination

events = Events(logfile=StringIO.StringIO)  # Say I wanted to log to a file-like object 
```

您可以在单个模块`myproj/myapp/events.py`中配置所有特定于应用程序的事件：`myproj.myapp`

```
from myproj.events import events

@events.register_event
def view_requested(request)
    return request

@events.register_event
def user_signed_in(request)
    user = request.user
    return request, dict(username=user.username, gravatar=user.profile.gravatar) 
```

然后在您的观点中，您可以：

```
from django.http import HttpResponse
from myproj.myapps import events

def foo(request):
    events.view_requested(request)
    return HttpResponse 
```

[这种方法从Django 的 Signals](https://docs.djangoproject.com/en/dev/topics/signals/)中获得了很多设计提示，它提供了一个直观的界面，通过简单地在发生的上下文中调用相关信号来重用接收器回调中隔离的行为。

实际上，我什至建议您查看它的实现，看看您是否可以实际使用或扩展它以满足您的特定需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:42:32.883

这听起来很像 Facade（复杂实现的简单接口），可能与 Strategy（在运行时或配置/启动期间在进程的几个具体实现之间切换）和 Builder（提供一个复杂对象的通用抽象描述）结合策略可以转换为实际的表示）。您可能会发现，一旦使用了 Strategy，就没有必要使用 Facade。

[http://en.wikipedia.org/wiki/Builder_pattern](http://en.wikipedia.org/wiki/Builder_pattern)

[http://en.wikipedia.org/wiki/Facade_pattern](http://en.wikipedia.org/wiki/Facade_pattern)

[http://en.wikipedia.org/wiki/Strategy_pattern](http://en.wikipedia.org/wiki/Strategy_pattern)

所以更具体一点：

Facade 将有两种方法：Log 和 SetLogger。

如果您使用 Prototype，您将有一个事件类型，以及事件的每个组件的类型。如果您有一个非常复杂的事件要记录，或者需要以几种非常不同的方式记录它，您只会使用 Prototype。

将有一个记录器（策略）的接口。这在外观中用于 SetLogger 方法。如果您使用 Prototype，Facade.Log 和 Logger.Log 的接口可能会有一个类似 log(PrototypeEvent e) 的方法。

按照下面的链接获取不使用原型但使用策略的简单记录器。这里没有 Facade，因为前端类实际上只跟踪当前记录器。

[我将使用 C# 创建简单的记录器，那么我可以使用哪些设计模式来创建它作为最佳实践？](https://stackoverflow.com/questions/12833436/i-am-going-to-create-simple-logger-using-c-sharp-so-what-are-the-design-patterns/12833915#12833915)

# java - HashMap 和类

> ID：12965317
> 
> 赞同：0
> 
> 时间：2012-10-18T23:34:12.080
> 
> 标签：java, hashmap

我正在尝试使用 HashMap 来存储一些类。这是我的简化代码的视图。

```
HashMap<Integer, MyClass> map = new HashMap<Integer, MyClass>
MyClass myClass = new MyClass();
for (int i = 0; i<MAX;i++){
    myClass.counter=i;
    map.put(i, myClass);
    myClass.modifySomeInternalParameters(i);
    myClass.anotherCounter+(i*2);
} 
```

每当我到达最后一条语句时，anotherCounter 都会针对 Map 中的所有条目进行更新。（实际上与计数器相同）我尝试将 put 语句更改为

```
map.put(i, new MyClass (myClass)); 
```

无济于事。我感觉 HashMap 并没有创建 myClass 的副本来存储它，而是查看它在内存中的内容。如果我不想重新创建 myClass 并每次都重新填充它，有没有办法防止这种情况发生。在我的循环中使用“克隆”听起来很丑。

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:39:01.680

您一遍又一遍地将同一个对象放入地图中 - 在循环内移动 MyClass 声明。

# xaml - Microsoft AdControl 窃取焦点 - Windows 8 MonoGame

> ID：12965318
> 
> 赞同：1
> 
> 时间：2012-10-18T23:34:16.627
> 
> 标签：xaml, windows-8, focus, ads, monogame

我目前正在使用 MonoGame 为 Windows 8 编写一个简单的蛇克隆游戏。我正在使用 XAML - MonoGame 模板并尝试包含广告支持。我发现了一个问题，很确定它与 AdControl 本身有关，而不是 MonoGame，但是每次加载广告时它都会窃取键盘焦点。

我试图重新初始化 MonoGame 'MetroGameWindow' 实例以尝试重新获得焦点但没有运气。例如，

```
void GamePage_LostFocus(object sender, RoutedEventArgs e)
{
    MetroGameWindow.Instance.Initialize(Window.Current.CoreWindow,this)
    // 'this' is 'GamePage' which inherits from 'SwapChainBackgroundPanel'
} 
```

有谁知道这个问题的任何解决方法？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:43:57.820

这是 AdControl 的一个已知问题。截至目前，最好的解决方案是将 AdControl 的 IsEnabled 属性设置为`false`. 这样做会阻止 AdControl 在保持可点击状态的同时专注于广告重新加载。请参阅必应广告论坛上的以下讨论：http: [//community.bingads.microsoft.com/ads/en/publisher/f/63/t/73548.aspx](http://community.bingads.microsoft.com/ads/en/publisher/f/63/t/73548.aspx)

# java - 在android中绘制路径？

> ID：12965320
> 
> 赞同：0
> 
> 时间：2012-10-18T23:34:31.183
> 
> 标签：java, android, google-maps-api-3

我正在开发一个应用程序，我必须在其中绘制从一个点到另一个点的路径。早些时候我为此使用 KML，一切正常，但随后 KML 停止工作。我现在只有谷歌方向api为此目的，即，

```
 http://maps.googleapis.com/maps/api/directions/json?origin=chandigarh&destination=mohali&sensor=false 
```

现在我正在做的是在该服务返回的每两个点之间绘制路径。但问题是，这个服务只给出了一定数量的坐标。所以路径并不完美。所以我的问题是，有没有更准确的api或服务？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:56:54.530

这是您的答案，您必须使用 xml 或 json 响应-

[https://stackoverflow.com/a/11700881/1233606](https://stackoverflow.com/a/11700881/1233606)

# django - 将 django 应用程序与 turbogears 集成

> ID：12965321
> 
> 赞同：2
> 
> 时间：2012-10-18T23:34:31.510
> 
> 标签：django, mod-wsgi, wsgi, cherrypy, turbogears

我正在使用基于 Turbogears 1.1 (CherryPy 2.3) 的遗留 Web 应用程序，我想将它与 Django 1.4 Web 应用程序集成。理想情况下，我想做的是找到一些方法让两个应用程序共享身份验证/会话状态，以便用户无缝体验。两个应用程序可以在同一台服务器上运行，并且在技术上可以访问同一个 mysql 数据库实例。

最初的想法是，这可以通过以下方式实现：

*   将会话数据存储在共享数据库中
*   将 Django 应用程序用作“master”，通过 http 向 turbogears 应用程序发出请求
*   通过内部 CherryPyWSGIServer 从 Cherrpy 中运行 Django 应用程序

欢迎任何其他建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T22:18:12.087

我建议考虑创建一个自定义 Django[身份验证](https://docs.djangoproject.com/en/1.5/topics/auth/customizing/#writing-an-authentication-backend)和[会话](https://docs.djangoproject.com/en/1.5/topics/http/sessions/#configuring-the-session-engine)后端，以重用现有的 Turbogears 数据。您可能还会发现有必要使用 Django 1.5 的[可配置用户模型](https://docs.djangoproject.com/en/dev/releases/1.5/#configurable-user-model)。

# html - 修复了具有透明背景 CSS 奇怪的标题

> ID：12965322
> 
> 赞同：0
> 
> 时间：2012-10-18T23:34:39.270
> 
> 标签：html, css, header, z-index

我对一个带有固定标题的 CSS 问题感到困惑，所以我将直接进入它。

基本上，我对 header 和`div`中的 a 使用相同的图像固定位置`body`，以使其看起来像无缝背景。然后，当您向下滚动时，其中的内容`div`会位于透明标题下方。`div`但是，一旦我滚动到带有背景图像的末尾，就会出现问题。我玩过`z-index`，但 Chrome/Safari 似乎不喜欢这样。（我只能想象 IE 会如何处理这个问题）。在 Firefox 16 上按预期工作。

无论如何，该网站本身[位于 www.meeker.io](http://www.meeker.io)。非常感谢您在正确方向上的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:45:25.017

尝试改变你的CSS：

```
.topBar {
    background: url(bgRailsColor3.png) no-repeat top left;
}
.rails {
    background: url(bgRailsColor3.png) no-repeat top left fixed;
} 
```

# c - no-gui-app 的 app-icon 在 Dock 中弹跳了几分钟

> ID：12965327
> 
> 赞同：1
> 
> 时间：2012-10-18T23:35:04.177
> 
> 标签：c, macos

我即将部署一个没有 GUI 或控制台输出的应用程序。它完美无瑕，但应用程序图标在 Dock 中启动后会弹跳 5 分钟。

我想保留停靠图标（所以没有 LSUIElement=1）但摆脱弹跳。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:16:34.640

如果你的应用程序出现在 Dock 中，它需要有一个 Cocoa 事件循环和一些 GUI（我相信它至少需要一个菜单​​栏，并且应该至少能够处理一个退出事件）。

根据您的应用程序是什么以及它是如何工作的，这可能可行，也可能不可行。您必须提供更多信息，以便我们提供更具体的建议。

# meteor - 将用户输入的文本（输入）写回它的文档（在 mongo 中）

> ID：12965336
> 
> 赞同：3
> 
> 时间：2012-10-18T23:36:30.823
> 
> 标签：meteor

我有一个流星模板，它渲染了一个从 mongo db 出来的文档。文档的某些部分是可编辑的（它们呈现为 html 输入元素）。现在我需要将数据流回文档（和 mongo），

做这个的最好方式是什么 ？

如果我想写回 doc.a 的值，答案很简单：

`doc = {a: "hello"}`

使用 doc.a[0].z 不太容易

`doc = {a: [{z: "hello"}]}`

因为为了进行更新，必须记住路径才能编写更新语句。每当字段更改时更新整个文档看起来很简单，但效率低下......

这是一个非常常见的用例，一些框架（EmberJs）具有神奇的绑定，每当小部件的值发生变化时都会修改模型。

这是如何在流星中完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:30:01.733

正如您所指出的，每当输入更改时运行 db update 命令可能效率低下。对于像滑块这样的可拖动元素尤其如此。

您可以做的一件事是将 db 查询分离到一个函数中，然后使用[underscore.js](http://underscorejs.org)去抖动它，就像这样（未经测试）：

```
var debouncedUpdate = _.debounce(function(newObject) {
    CollectionName.update({_id: newObject._id},newObject);
},300,true);

Template.objectInput.events({
    'keydown #text-input': function(event) {
        var newValue = $(this.find('#text-input')).val();
        var self = this;
        self.value = newValue;
        debouncedUpdate(self);
    }, 
}); 
```

# sql - 如何使用 ON DELETE CASCADE 删除元组并将其设置为 null

> ID：12965339
> 
> 赞同：2
> 
> 时间：2012-10-18T23:36:43.080
> 
> 标签：sql, cascade

我是使用 SQL 开发人员的新手。

这是我班级的硬件，我创建了员工-经理关系表。

对于案例 a。如果经理失去工作，则经理字段应设置为空。

对于案例 b。如果经理失去工作，那么他的员工也会失去工作。

我的桌子看起来像这样

```
lastName | jobTitle | Department | employeeID | fk_employeeID | fk_employeeID1 
```

我不知道为什么我会得到 2 个员工 ID。

这是我的 DDL 代码：

```
CREATE TABLE Employee
(
    lastName varchar (255),
    jobTitle varchar (255),
    Department varchar (255),
    id_Employee integer,
    fk_Employeeid_Employee integer NOT NULL,
    fk_Employeeid_Employee1 integer,
    PRIMARY KEY(id_Employee),
    UNIQUE(fk_Employeeid_Employee),
    FOREIGN KEY(fk_Employeeid_Employee) REFERENCES Employee (id_Employee),
    FOREIGN KEY(fk_Employeeid_Employee1) REFERENCES Employee (id_Employee)
) 
```

我想我必须对a和b使用“删除级联”，如果你知道怎么做，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T04:02:45.360

你的作业可能有点晚了，但以防其他人来。

```
CREATE TABLE Employee
(
    lastName varchar (255),
    jobTitle varchar (255),
    Department varchar (255),
    id_Employee integer,
    fk_Employeeid_Employee integer NOT NULL,
    fk_Employeeid_Employee1 integer,
    PRIMARY KEY(id_Employee),
    UNIQUE(fk_Employeeid_Employee),
    FOREIGN KEY(fk_Employeeid_Employee) REFERENCES Employee (id_Employee)
    ON UDPATE CASCADE ON DELETE SET NULL,
    FOREIGN KEY(fk_Employeeid_Employee1) REFERENCES Employee (id_Employee)
    ON UDPATE CASCADE ON DELETE SET NULL
) 
```

我不确定您为什么有多个 fk_employeeID... 我假设这是员工经理的 ID。如果是这种情况，上面的代码应该做你想做的事。如果经理被删除，fk_employeeID 字段将被设置为空。此外，对经理 ID 的任何更改都将反映在外键字段中。

希望有帮助，

# php - 与 MySQL 的远程连接不起作用

> ID：12965345
> 
> 赞同：3
> 
> 时间：2012-10-18T23:37:34.523
> 
> 标签：php, mysql, xampp, codeigniter-2

我面临一个大问题，我在 cestacerta.com 上有一个使用 CodeIgniter 和 MySQL 运行的应用程序。

我有两个版本，一个正在生产中并且可以完美运行，另一个正在开发中。这在我的机器和其他开发人员本地运行。

嗯，开发版我需要远程连接数据库。它突然停止工作。

我已授予访问服务器上任何 IP 设置的权限。我可以通过 Mysql Gui Tools 访问数据库。我测试了对几个不同代码的访问，包括新下载的 CodeIgniter 版本，并且总是得到相同的错误：

> 发生数据库错误
> 
> 无法使用提供的设置连接到您的数据库服务器。
> 
> 文件名：C:\xampp\htdocs\cestacerta\system\database\DB_driver.php
> 
> 行号：119

我需要知道是否有任何测试我可以做我所揭示的错误是否在我的机器上（以及开发人员，因为他们都有相同的错误）或者错误是否与我签约的服务器有关。

- 编辑 -

> $active_group = '默认';
> 
> $active_record = TRUE;
> 
> $db['default']['hostname'] = 'mysql.cestacerta.com';
> 
> $db['default']['username'] = 'db_username';
> 
> $db['default']['password'] = 'pass';
> 
> $db['default']['database'] = 'db_name';
> 
> $db['default']['dbdriver'] = 'mysql';
> 
> $db['default']['dbprefix'] = '';
> 
> $db['default']['pconnect'] = TRUE;
> 
> $db['default']['db_debug'] = TRUE;
> 
> $db['default']['cache_on'] = FALSE;
> 
> $db['default']['cachedir'] = '';
> 
> $db['default']['char_set'] = 'utf8';
> 
> $db['default']['dbcollat​​'] = 'utf8_general_ci';
> 
> $db['default']['swap_pre'] = '';
> 
> $db['default']['autoinit'] = TRUE;
> 
> $db['default']['stricton'] = FALSE;

# windows-8 - 如何将 appbar 命令左对齐？

> ID：12965346
> 
> 赞同：1
> 
> 时间：2012-10-18T23:37:42.230
> 
> 标签：windows-8, winjs

我的应用栏上有几个命令。我想将其中两个对齐到左侧。我该怎么做？

我正在使用 Html5/JS

基本上你如何在 HTML5/JS 中做到这一点？

```
<Page.BottomAppBar>
<AppBar x:Name="bottomAppBar" Padding="10,0,10,0">
    <Grid>
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
            <Button Style="{StaticResource EditAppBarButtonStyle}" Click="Button_Click"/>
            <Button Style="{StaticResource RemoveAppBarButtonStyle}" Click="Button_Click"/>
            <Button Style="{StaticResource AddAppBarButtonStyle}" Click="Button_Click"/>
        </StackPanel>
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Style="{StaticResource RefreshAppBarButtonStyle}" Click="Button_Click"/>
            <Button Style="{StaticResource HelpAppBarButtonStyle}" Click="Button_Click"/>
        </StackPanel>
    </Grid>
</AppBar>
</Page.BottomAppBar> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T01:19:44.590

请参阅下面的示例，`section:'global'`将元素向右`section:'selection'`对齐并将元素向左对齐。

**向右对齐按钮**

```
<button id="mybutton2" 
    data-win-control=
                "WinJS.UI.AppBarCommand"
    data-win-options="{label:'Delete',
                 icon:'delete',
                 section:'global',
                 tooltip:'Delete item'}">
  </button> 
```

**将按钮向左对齐**

```
<button id="mybutton3" 
        data-win-control=
                     "WinJS.UI.AppBarCommand" 
        data-win-options="{id:'cmdCamera',
                  label:'Camera',
                  icon:'camera',
                  section:'selection',
                  tooltip:'Take a picture'}">
     </button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-11T01:09:20.993

由于`global`不推荐使用，我无法弄清楚如何从左到右对齐命令按钮。我找到的唯一解决方案是添加额外的按钮并删除它们的标签和图标。
我知道这很丑，但必须找到解决方法，这是我必须选择的。

```
<div class="toolbar" data-win-control="WinJS.UI.ToolBar">
        <!-- Primary commands -->
        <button data-win-control="WinJS.UI.Command" data-win-options="{
            id:'cmdMentions',
            label:'Mentions',
            type:'button',
            icon: 'accounts'
            }"></button>
        <button data-win-control="WinJS.UI.Command" data-win-options="{
            id:'cmdBlocked',
            label:'Blocked Accounts',
            type:'button',
            icon: 'blockcontact'
            }"></button>
        <button data-win-control="WinJS.UI.Command" data-win-options="{
            id:'cmdConfig',
             label:'Configuration',
            icon: 'edit'
            }"></button>
        <button data-win-control="WinJS.UI.Command" data-win-options="{
            id:'cmdConfig1'
            }"></button>
        <button data-win-control="WinJS.UI.Command" data-win-options="{
            id:'cmdConfig2'

            }"></button>
        <button data-win-control="WinJS.UI.Command" data-win-options="{
            id:'cmdConfig3'

            }"></button>
        <button data-win-control="WinJS.UI.Command" data-win-options="{
            id:'cmdConfig4'

            }"></button>
    </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-05T12:07:15.180

只需通过 CSS 设置它就可以了。HTML：

```
<button data-win-control="WinJS.UI.AppBarCommand" data-win-options="{id:'cmdEdit',label:'Edit',icon:'edit'}"></button> 
```

CSS：

```
#cmdEdit{
    position:absolute;
    left:50px;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-07-14T19:47:24.863

这是来自 CodeShow 的一个很好的示例。这完美地工作。

```
 <button
            data-win-control="WinJS.UI.AppBarCommand"
            data-win-options="{id:'cmdAdd',label:'Add',icon:'add', section:'global',tooltip:'Add item'}"></button>
        <button
            data-win-control="WinJS.UI.AppBarCommand"
            data-win-options="{id:'cmdRemove',label:'Remove',icon:'remove', section:'global',tooltip:'Remove item'}"
            onclick="appbar2.remove()"></button>
        <hr />

            data-win-control="WinJS.UI.AppBarCommand" 
            data-win-options="{type:'separator',section:'global'}" />
        <button 
            data-win-control="WinJS.UI.AppBarCommand" 
            data-win-options="{id:'cmdDelete',label:'Delete',icon:'delete', section:'global',tooltip:'Delete item'}"></button>
        <button 
            data-win-control="WinJS.UI.AppBarCommand" 
            data-win-options="{id:'cmdCamera',label:'Camera',icon:'camera', section:'selection',tooltip:'Take a picture'}"></button> 
```

# mysql - MySQL UPDATE 基于值

> ID：12965347
> 
> 赞同：-1
> 
> 时间：2012-10-18T23:37:51.883
> 
> 标签：mysql

我需要一个查询来更新行，但首先检查是否有特定的数字。

```
Example: 
number = 10 
```

如果该行包含数字 10，则不要更新。它需要只是查询。像这样的东西。

```
SELECT `number` FROM `users`;
if row.number == 10 then don't update
else update set number=12 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:39:38.500

```
UPDATE users
SET number = 12
WHERE number <> 10 
```

# payment-gateway - FORCE 在信用卡交易中做了什么？

> ID：12965352
> 
> 赞同：3
> 
> 时间：2012-10-18T23:38:15.830
> 
> 标签：payment-gateway, credit-card, payment-processing

从一些API规范我有：

> **强制**将**Auth**交易放入当前批次 (PostAuth) 或将未通过 LUCY Gateway™ 处理的交易放入当前批次 (ForceAuth)

所以“AUTH”只是将资金搁置。如果您想将资金转移到您的商业银行，您需要执行“销售”或“捕获”或其他操作。但是“FORCE”的意义何在？“AUTH”不会立即冻结资金吗？你需要做“FORCE”来做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T01:23:15.410

FORCE is also known as [CAPTURE ONLY](http://www.authorize.net/support/CNP/helpfiles/Tools/Virtual_Terminal/Submitting_a_credit_card_charge.htm). This transaction type allows you to manually capture funds for transactions that were previously authorized outside the payment gateway. Additionally, because a Capture Only requires the Authorization Code of an original, successfully authorized transaction, you can use this transaction type to force captures for transactions that were declined by the payment gateway as a result of Address Verification Service (AVS) or Card Code Verification (CCV) rejection settings. Though they were declined by the payment gateway, an Authorization Code is usually still issued by the credit card issuing bank.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T00:49:14.400

来自[商家账户 101](http://www.merchant-account-services.org/article/merchant-accounts-101/5)

> 强制（捕获）
> 
> Force 交易采用从 Auth Only 交易中获得的现有授权号并强制销售通过，以便商家可以收到这些资金。授权中未使用的资金会立即释放给客户使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-22T05:33:58.910

强制是信用卡处理中的一种特殊交易。当您无法通过正常方式获得授权时，您将使用强制信用卡交易。例如，当信用卡收费金额很大并且信用卡公司希望在授权交易之前通过电话与商家交谈时。还有其他原因。通过电话，如果获得批准，信用卡公司将给出一个批准号。现在您需要将信用卡交易作为“强制”交易收取费用才能通过。

# winapi - Windows API 挂钩，自定义另存为文件对话框，通过 POST 直接保存到网络服务器

> ID：12965354
> 
> 赞同：1
> 
> 时间：2012-10-18T23:38:50.527
> 
> 标签：winapi, hook, save-as

我想编写一个自定义的另存为对话框，该对话框连接到大多数 Windows 程序的文件 - >“另存为”。此自定义对话框将允许用户输入他们的用户名、密码、目标文件夹并通过 POST 将文件上传到 Web 服务器。如果用户单击取消，它将调用原始文件对话框。

我一直在阅读有关 Windows API 挂钩的信息，这模糊地是我认为我会如何处理这个问题：

1.  拦截“另存为”
2.  显示我的自定义对话框，返回驱动器上的一些临时路径
3.  让程序将文件写入临时路径，假设它现在调用 WINAPI CreateFile(...)
4.  读取临时文件并上传到网络服务器
5.  清理临时文件

但我仍然无法理解实现这一目标所需的步骤。假设我可以拦截“另存为”和 CreateFile 函数，我如何检测 CreateFile 是从“另存为”调用的，而不仅仅是任何随机文件创建？我可以想到一个技巧，我可以跟踪打开文件对话框和调用 CreateFile 的时间差。

我的替代解决方案是使用现有的文件对话框并在磁盘上创建一个特殊的文件夹，该文件夹会受到持续监控。当一个文件被写入那里时，它将调用一个上传文件的外部程序。我还没有研究如何做到这一点。我怀疑这更容易。

**更新**

作为第一步，我编写了一个 .NET 任务托盘应用程序，它允许用户输入他们的登录详细信息和一个要监视的文件夹。每当一个文件被放在那里时，它都会上传到网络服务器。到目前为止，它似乎工作。现在我只需要弄清楚如何在文件对话框的左窗格中添加一个不错的快捷方式。一旦完成，我想我得到了一个我满意的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T03:58:52.563

无需挂钩或修补任何东西。`IStorage::CreateStream`创建一个外壳命名空间扩展，通过返回一个将其数据发布到 Web 服务器的流来支持和实现它。然后，用户可以选择将文件保存到您的命名空间扩展名以上传文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T02:49:45.217

挂钩标准保存对话框需要您将 DLL 注入每个正在运行的进程，并让它替换`GetSaveFileName()`进程 PE 标头中 Win32 API 函数的导入存根（防病毒和反恶意软件应用程序不太可能对此感到满意） ）。

然后是在 Vista 中引入的新型保存对话框，它使用新的`IFileSaveDialog`COM 接口而不是`GetSaveFileName()`. 为此，您必须卸载 Microsoft 的默认 FileDialog COM 对象并将其替换为自定义实现。

这不包括定制的保存对话框，您不太可能挂钩。

如果奇迹般地，您可以挂钩对话框并让它返回您自己创建的自定义路径，您不需要挂钩`CreateFile()`自己，只需监控您为您的目的创建的文件夹。将其放置在除您之外的任何其他应用程序（或用户）不太可能向其写入文件的位置。为此，您可以在用户或系统的文件夹中创建自定义子`AppData`文件夹。您可以使用`SHGetSpecialFolderPath()`和/或`SHGetKnownFolderPath()`查找这些文件夹。

棘手的部分将是检测文件何时完成写入并已关闭。您将必须监视文件夹的更改，例如使用`ReadDirectoryChangesW()`or `SHChangeNotifyRegister()`，并定期打开新的/修改的文件以进行独占访问。如果文件仍被其他人打开，您将无法自己打开它。但是一旦你打开它，你可以用它做任何你想做的事情。

# opengl - 纹理有一条重复的边界线

> ID：12965355
> 
> 赞同：1
> 
> 时间：2012-10-18T23:39:00.463
> 
> 标签：opengl, textures, vertex

这是我设置纹理坐标以绘制对称四边形的代码：

```
GLfloat defaultTexCoords[] = {
    0.0f, 0.0f, // 0 (0,0)
    1.0f, 0.0f, // 1 (1,0)
    1.0f, 1.0f, // 2 (1,1)
    0.0f, 1.0f  // 3 (0,1)
};

// VERTEX ARRAY
GLfloat mainVertexArray[] = {
    0.0f,              0.0f,              // 0 1
    0.0f /* size_x */, 0.0f,              // 2 3
    0.0f /* size_x */, 0.0f /* size_y */, // 4 5
    0.0f,              0.0f /* size_y */  // 6 7
};

// VERTEX & TEXTURE INDEXES
GLushort defaultIndices[] = { 0, 1, 3, 2 };

glEnable( GL_TEXTURE_2D );
glEnableClientState( GL_TEXTURE_COORD_ARRAY );
glBindTexture( GL_TEXTURE_2D, m_texId );
glTexCoordPointer( 2, GL_FLOAT, 0, defaultTexCoords );

// Here the cells size_x, size_y, etc. in VERTEX ARRAY
// are overwritten with dimensions of quad to draw
// ... some mainVertexArray[...] = ...

glEnableClientState( GL_VERTEX_ARRAY );
glVertexPointer(2, GL_FLOAT, 0, mainVertexArray);
glDrawElements(GL_TRIANGLE_STRIP, 4, GL_UNSIGNED_SHORT, indices); 
```

问题是在绘制的四边形中，顶部的单行基本上是从纹理底部复制的。可以清楚地看到 y=0 线的亮度变化与底部（复制的）线相同。

可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:14:54.750

将换行模式切换为[`GL_CLAMP_TO_EDGE`](http://www.opengl.org/wiki/Common_Mistakes#Texture_edge_color_problem).

# wordpress - 无法通过 twitter API “登录”

> ID：12965357
> 
> 赞同：0
> 
> 时间：2012-10-18T23:39:04.303
> 
> 标签：wordpress, twitter, gigya

[我使用名为“ Simple Twitter Connect](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCEQFjAA&url=http://wordpress.org/extend/plugins/simple-twitter-connect/&ei=dJKAUPeXIqnO0QX9hIHgBQ&usg=AFQjCNHNZKqD3rcYzGoRLKUCYJbj8XBXYQ) ”的插件为我的网站实现了一个 twitter 登录。

现在这个插件所做的是在评论部分上方为我的网站创建一个 twitter 登录功能，允许用户使用他们的 twitter 详细信息，而不是填写姓名和电子邮件框。

现在我遇到的问题是当它到达 twitter.com 上的授权页面时，在输入详细信息然后返回加载 solicitialize.gigaya.com 页面的站点时。在页面的内容上它说

> 连接失败。请稍后再试

我最初认为这一定是插件有问题，但是我已经联系了插件作者，他说 gigya 与他的插件无关，他的插件也没有链接到它。

我还没有注册 gigya，也没有在我的网站上实现他们的任何功能，所以我不确定这个网站是如何进入这个等式的。

如果有人想重新创建问题，请单击[此处](http://tinyurl.com/9sfzyyd)并通过 twitter 登录。谁能提出问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T06:33:05.227

成功 OAuth 登录后，您将被重定向到与您的使用者密钥关联的回调 URL。回调 URL 可以配置 - 以下是您的操作方法：

*   登录[https://dev.twitter.com/apps](https://dev.twitter.com/apps)
*   选择您在博客中使用的应用程序
*   转到“设置”选项卡，您将在“应用程序类型”下找到回调 URL

将 URL 设置为您的博客基目录（index.php 所在的位置）。

# c# - 为什么我不能禁用新表单中的 false button2 和红色 x？

> ID：12965358
> 
> 赞同：0
> 
> 时间：2012-10-18T23:39:13.757
> 
> 标签：c#

解决了：

在Form1中我做了：

```
private void button2_Click(object sender, EventArgs e)
        {
            cl = new ChangeLink();
            cl.StartPosition = FormStartPosition.CenterParent;
            DialogResult dr = cl.ShowDialog(this);
            if (dr == DialogResult.Cancel)
            {
                cl.Close();
            }
            else if (dr == DialogResult.OK)
            {    
                    label4.Text = cl.getText();
                    mainUrl = cl.getText();
                    if (!LocalyKeyWords.ContainsKey(mainUrl))
                    {
                        newUrl = true;
                        KeysValuesUpdate();
                    }
                    else
                    {
                        newUrl = false;
                        KeysValuesUpdate();
                    }
                    OptionsDB.set_changeWebSite(cl.getText());
                    cl.Close();
            } 

        } 
```

检查用户在新表单文本框中输入的文本的值是否存在或存在于列表中。如果存在显示新的表单，用户可以取消或关闭表单。如果列表中不存在新表单中的文本，则这次显示新表单 button2 为 false，ControlBox 也为 false。

在新表单中，我需要检查构造函数中的 Form1.newUrl 是否为真，而不是在 button1 单击事件中。由于单击按钮后按钮单击事件被触发。我希望在新表单出现时进行检查。

```
if (Form1.newUrl == true)
            {
                button2.Enabled = false;
                this.ControlBox = false;
                DialogResult = DialogResult.OK;
                Form1.newUrl = false;
            } 
```

这是在新的 Form 构造函数中。

无论如何，它现在正在工作。谢谢。

# c - 如何获取双指针指向的二维数组的大小？

> ID：12965359
> 
> 赞同：8
> 
> 时间：2012-10-18T23:39:14.163
> 
> 标签：c, multidimensional-array, double-pointer, pointer-to-array

我试图从指向数组的双指针中获取二维数组的行数和列数。

```
#include <stdio.h>
#include <stdlib.h>

void get_details(int **a)
{
 int row =  ???     // how get no. of rows
 int column = ???  //  how get no. of columns
 printf("\n\n%d - %d", row,column);
} 
```

上面的函数需要打印尺寸的详细信息，哪里出错了。

```
int main(int argc, char *argv[])
{
 int n = atoi(argv[1]),i,j;
 int **a =(int **)malloc(n*sizeof(int *)); // using a double pointer
 for(i=0;i<n;i++)
   a[i] = (int *)malloc(n*sizeof(int));
 printf("\nEnter %d Elements",n*n);
 for(i=0;i<n;i++)
  for(j=0;j<n;j++)
  {
   printf("\nEnter Element %dx%d : ",i,j);
   scanf("%d",&a[i][j]);
  }
 get_details(a);
 return 0;
 } 
```

我正在使用 malloc 创建数组。

* * *

如果我使用这样的东西怎么办

列 = sizeof(a)/sizeof(int) ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T00:22:36.343

C不做反射。

指针不存储任何元数据来指示它们指向的区域的大小；如果您只有指针，那么就没有（便携式）方法来检索数组中的行数或列数。

您需要将该信息与指针一起传递，或者您需要在数组本身中使用一个标记值（类似于 C 字符串如何使用 0 终止符，尽管这只会为您提供字符串的*逻辑*大小，即可能小于它所占据的阵列 的*物理大小）。*

在[The Development of the C Programming Language](http://cm.bell-labs.com/who/dmr/chist.html)中，Dennis Ritchie 解释说，他希望像数组和结构这样的聚合类型不仅代表抽象类型，而且代表会占用内存或磁盘空间的位集合；因此，该类型中没有元数据。这是您应该跟踪自己的信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T23:44:41.470

```
void get_details(int **a)
{
 int row =  ???     // how get no. of rows
 int column = ???  //  how get no. of columns
 printf("\n\n%d - %d", row,column);
} 
```

恐怕你不能，因为你得到的只是指针的大小。

您需要传递数组的大小。将您的签名更改为：

```
void get_details(int **a, int ROW, int COL) 
```

# c++ - 偶尔得到分段错误

> ID：12965362
> 
> 赞同：1
> 
> 时间：2012-10-18T23:39:17.647
> 
> 标签：c++

我正在尝试为一个 uni 项目制作一个随机数生成器。

我正在尝试实现一个函数来获取生成的这个数字列表的周期（数字开始重复之前的时间）。

当我编译并运行它时，它返回 507（这是正确的句点）。

然而，大约 50% 的时间它会返回分段错误。知道发生了什么：

```
#include<iostream>
#include<fstream>
#include<vector>
#include<math.h>
#include<ctime>

using namespace std;

class Random
{
public:
// Constructor
Random(int a, int b, int m)
{
    this->setMagicNumbers(a,b,m);
}

// Function to set the magic numbers of the random number generator
void setMagicNumbers(int a, int b, int m)
{
    this->A = a;
    this->B = b;
    this->M = m;
}

// Function that returns a list of uniformly distributed random numbers
vector<double> GetUniform(int N, double initialValue = time(0))
{
    double currentNumber = initialValue;
    vector<double> RandomNumbers;
    for(int i = 0; i <= N; i++)
    {
        currentNumber = fmod((this->A*currentNumber) + this->B, this->M);
        RandomNumbers.push_back(currentNumber / this->M); // The number is normalised here
    }
    return RandomNumbers;
}

private:
int A, B, M;
};

class NumberList
{
public:
// Function to add an element to the list
void push(double x)
{
    this->v.push_back(x);
}

// Function to pop an element off the list
double pop()
{
    if(v.size() > 0)
    {
        int popped = v.back();
        v.pop_back();
        return popped;
    }
    else
    {
        cout << "Cannot pop element off empty list." << endl;
        return 0;
    }
    return 0;
}

// Function to get the value at a given location on the list
double getAt(int i)
{
    return this->v[i];
}

    // Function to set the value at a given location on the list
void setAt(int i, double value)
{
    this->v[i] = value;
}

// Function to find the size of the list
unsigned int size()
{
    return this->v.size();
}

// Function to get the vector itself
vector<double> getvector()
{
    return this->v;
}

// Function to set the value of the vector itself
void setVector(vector<double> vec)
{
    this->v = vec;
}

// Function to print the list of numbers as coordinates to a data file
void printCoordinates()
{
        ofstream data("coordinates.dat");
        for(unsigned int i = 0; i <= this->v.size(); i++)
        {
                data << this->v[i] <<  " " << this->v[i + 1] <<  "\n";
        }
        data.close();
}

// Function to print the list of numbers to the terminal
void print()
{
        for(unsigned int i = 0; i <= this->v.size(); i++)
        {
                cout << this->v[i] << endl;
        }
}

// Function to get the period of the list of numbers
int getPeriod()
{
    int i = 2;
    while(true)
    {
        if(isPeriod(i) == true)
        {
            return i;
        }
        else
        {
            i = i + 1;
        }
    }
}

private:
// Vector to hold the values for the list
vector<double> v;

// Function to test if 'i' is the period of the list
bool isPeriod(int i)
{
    for(int j = 0; j != (i-1); j++)
    {
        if(this->getAt(j) != this->getAt(i + j))
        {
            return false;
        }
    }
    return true;
}
};

int main()
{
Random RandNumGenerator(100,104001,714025);                // Create a new random number generator with given magic numbers
NumberList numbers;                                        // Create a blank list of numbers
numbers.setVector(RandNumGenerator.GetUniform(10000));     // Add 10000 random numbers to the list
numbers.printCoordinates();                                // Print out the random numbers as coordinates to a data file
cout << numbers.getPeriod() << endl;                       // Print out the period of the random number list
return 0;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T23:42:47.737

此行可能会导致问题

```
for(unsigned int i = 0; i <= this->v.size(); i++) 
```

有了它，您使用 size 作为最后一个索引，它是溢出的，请尝试为此更改它：

编辑：实际上改变这个

```
for(unsigned int i = 0; i < this->v.size()-1; i++) 
```

在循环中，您正在访问向量的第 i+1 个元素。

编辑：

这可能不会导致崩溃，但不是创建 N 个元素，而是创建 N+1

```
for(int i = 0; i <= N; i++) 
```

如果为此更改：

```
for(int i = 0; i < N; i++) 
```

编辑：修复

```
#include<iostream>
#include<fstream>
#include<vector>
#include<math.h>
#include<ctime>

using namespace std;

class Random
{
public:
// Constructor
Random(long a, long b, long m)
{
    this->setMagicNumbers(a,b,m);
}

// Function to set the magic numbers of the random number generator
void setMagicNumbers(long a, long b, long m)
{
    this->A = a;
    this->B = b;
    this->M = m;
}

// Function that returns a list of uniformly distributed random numbers
vector<double> GetUniform(int N, double initialValue = time(0))
{
    double currentNumber = initialValue;
    vector<double> RandomNumbers;
    for(int i = 0; i < N; i++)
    {
        currentNumber = fmod((this->A*currentNumber) + this->B, this->M);
        RandomNumbers.push_back(currentNumber / this->M); // The number is normalised here
    }
    return RandomNumbers;
}

private:
long A, B, M;
};

class NumberList
{
public:
// Function to add an element to the list
void push(double x)
{
    this->v.push_back(x);
}

// Function to pop an element off the list
double pop()
{
    if(v.size() > 0)
    {
        int popped = v.back();
        v.pop_back();
        return popped;
    }
    else
    {
        cout << "Cannot pop element off empty list." << endl;
        return 0;
    }
    return 0;
}

// Function to get the value at a given location on the list
double getAt(int i)
{
    return this->v[i];
}

    // Function to set the value at a given location on the list
void setAt(int i, double value)
{
    this->v[i] = value;
}

// Function to find the size of the list
unsigned int size()
{
    return this->v.size();
}

// Function to get the vector itself
vector<double> getvector()
{
    return this->v;
}

// Function to set the value of the vector itself
void setVector(vector<double> vec)
{
    this->v = vec;
}

// Function to print the list of numbers as coordinates to a data file
void printCoordinates()
{
        ofstream data("coordinates.dat");
        for(unsigned int i = 0; i < this->v.size()-1; i++)
        {
                data << this->v[i] <<  " " << this->v[i + 1] <<  "\n";
        }
        data.close();
}

// Function to print the list of numbers to the terminal
void print()
{
        for(unsigned int i = 0; i < this->v.size(); i++)
        {
                cout << this->v[i] << endl;
        }
}

// Function to get the period of the list of numbers
int getPeriod()
{
    int i = 2;
    while(true)
    {
        if(isPeriod(i) == true)
        {
            return i;
        }
        else
        {
            i = i + 1;
        }
    }
}

private:
// Vector to hold the values for the list
vector<double> v;

// Function to test if 'i' is the period of the list
bool isPeriod(int i)
{
    std::cout << "trying period " << i << endl;
    if (i >= v.size()) return true;
    for(int j = 0; j < v.size()-1; j++)
    {
        if(this->getAt(j) == this->getAt(i + j))
        {
            std::cout << "value at j " << this->getAt(j) << "value at i+j " << this->getAt(i+j) <<endl;
            return true;
        }
    }
    return false;
}
};

int main()
{
Random RandNumGenerator(100,104001,714025);                // Create a new random number generator with given magic numbers
NumberList numbers;                                        // Create a blank list of numbers
numbers.setVector(RandNumGenerator.GetUniform(10000));     // Add 10000 random numbers to the list
numbers.printCoordinates();                                // Print out the random numbers as coordinates to a data file
cout << numbers.getPeriod() << endl;                       // Print out the period of the random number list
return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T00:41:33.977

玩了一下这个，我最初认为你的双打向量不知何故被破坏了。我发现如果你将它的大小调整到你想要的确切值——这是一个已知值——段错误就会停止：

```
vector<double> RandomNumbers(N); // In GetUniform() 
```

运行它`gdb`是不确定的，因为它看起来好像堆栈被损坏了。我还发现，当我将`push_back()`just 更改为 0 时：

```
RandomNumbers.push_back(0.0); 
```

而不是标准化的数字，即使没有向量的初始大小（上图），它也可以正常工作，这表明正在使用的变量之一存在问题。

我还发现，如果我设置`currentNumber`为 1，而不是调用`fmod()`- 即使一切都是原来的样子，我也没有出现 seg 错误：

```
currentNumber = 1; 
```

这种暗示可能与使用`fmod()`

有趣的是，然后我把电话完全拿出来`push_back`，发现它*仍然*有段错误。抱歉，我无法提供更多帮助，但看起来这个地区的某个地方确实发生了某种腐败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T00:58:49.707

在`C++`数组的索引中，`vector`将从 0..size - 1 开始，并且您在整个代码中都滥用了它（inside `GetUniform`， inside `printCoordinates`，...），除此之外，在`printCoordinates`您最后编写的代码`this->v[i + 1]`中，它将被转换`this->v[this->v.size() + 1]`为 2 索引之后最后一个有效索引。

但我认为你的错误的来源在`getPeriod`and `isPeriod`，看看你从 0 开始到`i - 1`并检查索引是否匹配 index 的项目`i + j`，所以如果`i`变成`size() - 1`并且大小为 500，那么在更糟糕的情况下，你正在访问`v[499 + 498]`它比最后一个大有效的索引，您肯定会遇到分段错误。现在要解决它，请检查您的索引并且永远不要超出`vector`大小的末尾，这意味着您永远不应该使用 index >`v.size() - 1`

# android - 在地图上的某个地方获取高度

> ID：12965365
> 
> 赞同：0
> 
> 时间：2012-10-18T23:39:32.273
> 
> 标签：android, android-maps, altitude, geopositioning

我使用以下代码来获取坐标和高度，只需点击地图上的某个地方......例如，如果我点击纽约街，应用程序会返回给我纽约坐标

```
public void onLocationChanged(Location location) {
    double lat = (double) (location.getLatitude());
    double lng = (double) (location.getLongitude());
    double alt = (double) (location.getAltitude());
} 
```

我使用这种方法来检索有关触摸位置的数据

```
@Override
public boolean onTap(GeoPoint p, MapView map) {     

    List<Overlay> overlays = map.getOverlays();

    Message message = new Message();

    Bundle data = new Bundle();

    data.putInt("latitude", p.getLatitudeE6());

    data.putInt("longitude", p.getLongitudeE6());

    message.setData(data);

    handler.sendMessage(message);       

    return super.onTap(p, map);
} 
```

不幸的是，似乎 GeoPoint 对象没有类似`p.getAltitudeE6()`经度和纬度的方法。

因此，点击地图获取纬度和经度可以正常工作，但高度在每个点击的地方都会返回 0。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:32:57.843

映射数据不包括海拔信息。您可以使用[Google Elevation API](https://developers.google.com/maps/documentation/elevation/)获取您拥有的纬度和经度并获取海拔。这是一个在线查找，因此不一定非常敏感。

添加了代码示例。

```
public double getAltitudeFromNet(double def, Location loc) {
Log.v(TAG, "Looking up net altitude");
double result = -100000.0;
HttpParams httpParameters = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParameters, 5000);
HttpConnectionParams.setSoTimeout(httpParameters, 5000);

HttpClient httpClient = new DefaultHttpClient(httpParameters);
HttpContext localContext = new BasicHttpContext();
String url = "http://maps.googleapis.com/maps/api/elevation/" + "xml?locations="
    + String.valueOf(loc.getLatitude()) + "," + String.valueOf(loc.getLongitude()) + "&sensor=true";
HttpGet httpGet = new HttpGet(url);
try {
  HttpResponse response = httpClient.execute(httpGet, localContext);
  HttpEntity entity = response.getEntity();
  if (entity != null) {
    InputStream instream = entity.getContent();
    int r = -1;
    StringBuffer respStr = new StringBuffer();
    while ((r = instream.read()) != -1)
      respStr.append((char) r);
    String tagOpen = "<elevation>";
    String tagClose = "</elevation>";
    if (respStr.indexOf(tagOpen) != -1) {
      int start = respStr.indexOf(tagOpen) + tagOpen.length();
      int end = respStr.indexOf(tagClose);
      String value = respStr.substring(start, end);
      result = (double) (Double.parseDouble(value));

    }
    instream.close();
  }
} catch (ClientProtocolException e) {
  Log.w(TAG, "Looking up net altitude ClientProtocolException", e);
} catch (IOException e) {
  Log.w(TAG, "Looking up net altitude IOException", e);
}

Log.i(TAG, "got net altitude " + (int) result);
if (result > -1000) {
  return result;
} else {
  return def;
}
} 
```

# facebook - 简单标签应用程序错误 191

> ID：12965369
> 
> 赞同：1
> 
> 时间：2012-10-18T23:40:08.493
> 
> 标签：facebook, tabs

> **可能重复：**
> [Facebook API 错误 191](https://stackoverflow.com/questions/4691782/facebook-api-error-191)

我是 Facebook 的新手。

我正在尝试在我的业务 Facebook 页面上放置一个标签。这是我遵循的步骤的链接。

```
facebook.com/docs/appsonfacebook/pagetabs/ 
```

当我尝试

```
facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=YOUR_URL 
```

我明白了

```
API Error Code: 191
API Error Description: The specified URL is not owned by the application
Error Message: redirect_uri is not owned by the application. 
```

根据我的阅读，我有某种类型的配置问题。

任何想法或建议。

[这](http://sbhousevalues.com/191_facebook_problem.pdf)是一个带有 4 个屏幕截图的*PDF文件的链接。*

基本信息/标签信息`Facebook`应用程序信息。

[sbhousevalues_b](https://sbhousevalues.com/sbhousevalues_b/)和[sbhousevalues](https://sbhousevalues.com)的结果。

错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:51:16.150

您可能需要添加`sbhousevalues-com`到应用程序基本设置的“应用程序域”部分。

您可以访问[developers.facebook.com](http://developers.facebook.com)，点击“应用程序”，选择您的应用程序并点击“编辑此应用程序”来访问正确的部分。

# c# - .net 4.0 等效的 BindingOperations.EnableCollectionSynchronization()

> ID：12965372
> 
> 赞同：3
> 
> 时间：2012-10-18T23:40:30.760
> 
> 标签：c#, .net, wpf, multithreading, c#-4.0

将一些操作移至后台线程并立即遇到 UI 异常，其中 UI 控件绑定到 ObservableCollection

.net 4.5 通过新的 BindingOperations.EnableCollectionSynchronization() 解决了这个问题

但是还不能迁移到 4.5，所以希望 .net 4.0 世界有一些东西可以使 ObservableCollection 线程安全？

# ninject - Ninject InSingletonScope for asp.net mvc 4

> ID：12965373
> 
> 赞同：2
> 
> 时间：2012-10-18T23:40:45.580
> 
> 标签：ninject

我正在尝试将 InSingletonScope 用于我的服务接口之一。但是，它仍在为每个 Web 请求创建对象的新实例。基本上它的行为类似于我的 asp.net mvc 4 应用程序中的 InRequestScope。

我认为 InSingletonScope 是 IIS 进程的生命周期？

我在我的一个 NinjectModule 中为该接口注册了以下实现。如果我马上解决它，repo1 和 repo2 实际上是同一个实例。但是，在我的控制器中，每个请求都会产生一个新实例。

-------------------- 模块注册

```
public class RepositoryModule : NinjectModule
{
    #region Overrides of NinjectModule

    public override void Load()
    {
        Bind<IFakeRepository>().To<FakeRepository>().InSingletonScope();

        // following code onle execute the constructor once
        var repo1String = Kernel.Get<IFakeRepository>().GetString();
        var repo2String = Kernel.Get<IFakeRepository>().GetString();
    }

    #endregion
} 
```

-------------------- 存储库接口和实现

```
public interface IFakeRepository
{
    string GetString();
}

public class FakeRepository : IFakeRepository
{
    public FakeRepository()
    {
        // every web request execute this constructor
        Debug.Write("FakeRepository constructor called");
    }

    #region Implementation of IFackRepository

    public string GetString()
    {
        return "dummy string";
    }

    #endregion
} 
```

------------------ web api控制器

```
public class TestRepoController : ApiController
{
    public IFakeRepository FakeRepository { get; set; }

    public TestRepoController(IFakeRepository fakeRepository)
    {
        FakeRepository = fakeRepository;
    }

    public string Get()
    {
        return FakeRepository.GetString();
    }
} 
```

----------------- web api 路由注册

```
config.Routes.MapHttpRoute(
         name: "TestTakeRoutePost",
         routeTemplate: "Fake",
         defaults: new { controller = "TestRepo" }
        ); 
```

----------------- NinjectWebCommon

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(PNI.MediaServer.Application.App_Start.NinjectWebCommon), "Start")] 
```

[程序集：WebActivator.ApplicationShutdownMethodAttribute(typeof(PNI.MediaServer.Application.App_Start.NinjectWebCommon), "Stop")]

```
public static class NinjectWebCommon 
{
    private static readonly Bootstrapper bootstrapper = new Bootstrapper();

    /// <summary>
    /// Starts the application
    /// </summary>
    public static void Start() 
    {
        DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
        DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
        bootstrapper.Initialize(CreateKernel);
    }

    /// <summary>
    /// Stops the application.
    /// </summary>
    public static void Stop()
    {
        bootstrapper.ShutDown();
    }

    /// <summary>
    /// Creates the kernel that will manage your application.
    /// </summary>
    /// <returns>The created kernel.</returns>
    private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();

        //load all Binds defined in the classes that inherit NinhectModule
        kernel.Load(Assembly.GetExecutingAssembly());

        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

        // Set Web API Resolver
        GlobalConfiguration.Configuration.DependencyResolver = new PniNinjectDependencyResolver(kernel);

        return kernel;
    }
} 
```

# simd - SIMD 与向量架构

> ID：12965377
> 
> 赞同：11
> 
> 时间：2012-10-18T23:41:34.300
> 
> 标签：simd, computer-architecture

SIMD 和向量处理器有什么区别？我目前的理解是向量处理是 SIMD 的一个子集。但有人告诉我“SIMD 不限于向量”，我不知道这到底是什么意思。有什么具体的例子吗？

另外，为什么标量架构比向量架构更受欢迎？是因为它们更容易实现和编程吗？

我知道我们有 SISD（常规 1 核 CPU）、SIMD（单核/多核处理器上的 SSE 扩展）、MIMD（errmm .. 我猜大概类似于 MPI，所以集群！）和 MISD（已被视为不切实际/不可行）。除此之外，我读过的其他一些内容是向量处理和超标量架构。有什么我错过并且应该知道的新架构吗？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T13:22:57.320

[弗林分类法](http://en.wikipedia.org/wiki/Flynn%27s_taxonomy)是计算机体系结构的分类。根据 Flynn 的分类法，向量处理属于 SIMD 类。有些架构不是矢量处理器，但属于 SIMD 类。示例是[连接机器](http://en.wikipedia.org/wiki/Connection_Machine)和许多[GPU](http://en.wikipedia.org/wiki/Graphics_processing_unit)，其中多个处理器执行相同的指令。

MMX、SSE、Altivec 等属于矢量处理以及 SIMD 类。有许多名称指代相同的概念：子字并行、小规模 SIMD、短向量处理、寄存器内的 SIMD (SWAR) 或最常见的多媒体扩展。

[传统上，像Cray](http://en.wikipedia.org/wiki/Cray-1)或[STAR](http://en.wikipedia.org/wiki/CDC_STAR-100)这样的矢量处理器使用更大且可变的矢量大小。

[超标量](http://en.wikipedia.org/wiki/Superscalar)是一种实现处理器的方法，但不像 Flynn 的分类法那样对其指令集做出任何声明。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-20T21:02:37.753

从 ARM Neon 与 ARM VFP 的比较中可以找到一个实际示例。第一个是更经典的 SIMD 并行评估 2、4、8 或 16 个项目（或大部分并行）。另一个是浮点扩展，它被编程为顺序迭代两组连续的寄存器（可能允许跳过 2），例如。S0..S3, S8..S11 并将结果写入 S12..S15。

后一种架构使用相同的指令处理可变数量（1-4）的操作，使用 1-4 个时钟周期来完成任务。如果该架构允许每条指令执行 128 次操作，那么系统之间的概念差异会更加清晰——即使两者都是向量和 SIMD 架构。

# regex - 正则表达式 - 匹配整个字符串或模式

> ID：12965379
> 
> 赞同：2
> 
> 时间：2012-10-18T23:41:49.857
> 
> 标签：regex, expression

我正在进行文件搜索，我想排除其中包含`min`的文件，但我不想匹配部分单词。

所以我想排除：

一个名为的目录，一个名为`min` 的文件`jhkjahdf-min.txt`

但我不想排除：

一个名为`mint.txt`

感谢您在高级方面的帮助。您给出的正则表达式的解释将有很多额外的帮助。

我正在使用 PHP 的 preg_match() 函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:45:10.940

有一些东西叫做单词边界（`\b`）。它们不消耗字符，但如果您从单词字符（字母、数字、下划线）转换为非单词字符，则匹配，反之亦然。所以这是第一个很好的近似值：

```
`\bmin\b` 
```

现在，如果您也想将数字和下划线视为单词边界，它会变得有点复杂。然后，您需要所有正则表达式引擎都不支持的负前瞻和后瞻：

```
`(?<![a-zA-Z])min(?![a-zA-Z])` 
```

这些也不会包含在匹配中（如果您完全关心它的话），而只是断言`min`既不在字母之前也不在其后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T23:45:03.297

你会想用它来锚定你的正则表达式，`\b`这意味着“单词边界”。

# string - 相当于将字符串添加到循环中，对于字符串（matlab）？

> ID：12965381
> 
> 赞同：0
> 
> 时间：2012-10-18T23:42:16.937
> 
> 标签：string, matlab, loops, for-loop, matrix

我怎么能用字符串做同样的事情：

```
a = [1 2 3; 4 5 6];
c = [];
for i=1:5
b = a(1,:)+i;
c = [c;b];   
end

c =

 2     3     4
 3     4     5
 4     5     6
 5     6     7
 6     7     8 
```

基本上希望将几个字符串组合成一个矩阵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T05:56:03.200

您正在循环中增加一个变量，这在 Matlab 中是一种罪恶 :) 所以我将向您展示一些更好的方法来进行数组连接。

有细胞串：

```
>> C = {
    'In a cell string, it'
    'doesn''t matter'
    'if the strings'
    'are not of equal lenght'};

>> C{2}
ans = 
    doesn't matter 
```

您可以像这样在循环中使用它：

```
% NOTE: always pre-allocate everything before a loop
C = cell(5,1);

for ii = 1:5
    % assign some random characters
    C{ii} = char( '0'+round(rand(1+round(rand*10),1)*('z'-'0')) );
end 
```

有普通数组，它的缺点是您必须事先知道所有字符串的大小：

```
a = [...
    'testy'     % works
    'droop'
];

b = [...
    'testing'              % ERROR: CAT arguments dimensions 
    'if this works too'    % are not consistent. 
    ]; 
```

对于这些情况，请使用`char`：

```
>> b = char(...
      'testing',...
      'if this works too'...
      );
b =
   'testing          '
   'if this works too' 
```

注意如何`char`用空格填充第一个字符串以适应第二个字符串的长度。再说一遍：**不要在循环中使用它**，除非你已经预先分配了数组，或者如果真的没有其他方法可以走。

在 Matlab 命令提示符下键入`help strfun`以获取 Matlab 中可用的所有与字符串相关的函数的概述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T00:01:55.410

你的意思是在每个矩阵位置存储一个字符串？你不能这样做，因为矩阵是在基本类型上定义的。您可以在每个位置上都有一个 CHAR：

```
>> a = 'bla';
>> b = [a; a]  

b <2x3 char> =

bla
bla

>> b(2,3) = 'e'

b =

bla
ble 
```

如果要存储矩阵，请使用元胞数组（[MATLAB 参考](http://www.mathworks.es/es/help/matlab/ref/cell.html "MATLAB 参考")，[Loren Shure 的博客](http://blogs.mathworks.com/loren/2006/06/21/cell-arrays-and-their-contents/ "Loren Shure 的博客")），它们*有点*相似，但使用“{}”而不是“()”：

```
>> c = {a; a}

c = 

    'bla'
    'bla'

>> c{2}

ans =

bla 
```

# mysql - UNION 不想返回不同的值

> ID：12965382
> 
> 赞同：0
> 
> 时间：2012-10-18T23:42:26.267
> 
> 标签：mysql, full-text-search, distinct, union

我通过一些对象的描述来编写全文搜索脚本。但是我对布尔模式下的默认全文搜索算法并不满意，所以我尝试以某种方式对其进行修改。我想将 3 个搜索合并为一个。第一个查询我搜索“确切的短语”，第二个 - 短语的所有单词，第三个 - 至少一个单词存在。然后优先归还。我必须做这样的事情：

```
SELECT
    description,
    MATCH(description) AGAINST ('"my search"' in boolean mode) FROM search
    WHERE MATCH(description) AGAINST ('"my search"' in boolean mode)

UNION DISTINCT

SELECT
    description,
    MATCH(description) AGAINST ('+my +search' in boolean mode) FROM search
    WHERE MATCH(description) AGAINST ('+my +search' in boolean mode)

UNION

SELECT
    description,
    MATCH(description) AGAINST ('my* search*' in boolean mode) FROM search
    WHERE MATCH(description) AGAINST ('my* search*' in boolean mode) 
```

如您所见，第一个行块将包含最相关的结果 - 确切的短语。第二个块将包含不太相关的行，第三个将包含所有其余的行。

但是这个查询返回重复的行，换句话说，存在于第一个块中的行，可以在第二个块或第三个块中再次重复，即使我使用 UNION DISTINCT。但我想为所有三个子选择获取全局不同的行集。如果行出现在第一个块中，那么它在秒和第三个中一定不存在。我怎样才能做到这一点？或者您可以为这种搜索提供更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:12:33.280

OK 重读问题。联合所有会给你所有的结果，联合应该给你不同的结果

或者你可以使用

```
`Select distinct * from 
(SELECT
    description,
    MATCH(description) AGAINST ('"my search"' in boolean mode) FROM search
    WHERE MATCH(description) AGAINST ('"my search"' in boolean mode)

UNION DISTINCT

SELECT
    description,
    MATCH(description) AGAINST ('+my +search' in boolean mode) FROM search
    WHERE MATCH(description) AGAINST ('+my +search' in boolean mode)

UNION

SELECT
    description,
    MATCH(description) AGAINST ('my* search*' in boolean mode) FROM search
    WHERE MATCH(description) AGAINST ('my* search*' in boolean mode)) B` 
```

# visual-studio-2010 - 摩尔似乎需要对摩尔方法进行哈希处理

> ID：12965390
> 
> 赞同：1
> 
> 时间：2012-10-18T23:43:22.960
> 
> 标签：visual-studio-2010, moles

我正在一个家庭项目中尝试 Moles，以（希望）能够推荐它在工作项目中采用。我正在使用 VS 10.0.30319 和 Moles 1.0.0.0。

我创建了以下类：

```
public class DeveloperTestControlBL
{
    public static bool VerifyCurrentDevelopmentStatus(int tpid, int testStatusID) 
    {
        return false;   // For this example, always return false, 
                    // so that a return of true means the delegation worked
    }
} 
```

在我的测试类中，我创建了一个测试来测试一个调用 VerifyCurrentDevelopmentStatus 方法的类。我本来希望有一个表格声明：

```
[TestMethod]
[HostType("Moles")]
public void TestPreTCIToEditReady_WithMoles()
{
   var devTCBL = new SDeveloperTestControlBL();
   devTCBL.VerifyCurrentDevelopmentStatus = delegate(int tpid, int testStatusID) 
       {
            return true;
       }

// rest of the test here
} 
```

我发现要设置委托，我必须这样做：

```
 [TestClass]
    public class MyTest
    {

    [TestMethod]
    [HostType("Moles")]
    public void TestPreTCIToEditReady_WithMoles()
    {

   DelegateExample.Moles.MDeveloperTestControlBL.VerifyCurrentDevelopmentStatusInt32Int32 =
       VerifyCurrentDevelopmentStatusAlwaysTrue;

       // Rest of the test here
    }

    private bool VerifyCurrentDevelopmentStatusAlwaysTrue(int tpid, int status)         
    {
       return true;
    } 
```

有人对我做错了什么有任何建议吗？我有使用 Microsoft.Moles.Framework; 声明并在测试项目中引用 DeveloperTestControlBL.Moles。

在此先感谢，罗恩 L

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:30:26.023

尝试这个

```
 devTCBL.VerifyCurrentDevelopmentStatus (delegate(int tpid, int testStatusID) 
       {
            return true;
       }); 
```

它对我有用。

# mysql - 需要帮助调整 codeigniter 好友查询

> ID：12965393
> 
> 赞同：1
> 
> 时间：2012-10-18T23:43:40.043
> 
> 标签：mysql, codeigniter

你好，知识渊博的部落。这里很新，试图写一个简单的“朋友”查询。我已经搜索了 SO 基础，无法从其他问题/解决方案中得到答案。

我有两个看似标准的表，一个用于 id/firstname/lastname 等的成员资格，另一个用于 id/inviter_id/friend_id/status 的友谊表。我选择（任意）将友谊结构为每个关系一行而不是每个关系两行。（似乎这个问题每两行会更容易/不存在，但感觉它会导致其他问题，如果可能的话，想用一个来解决它。）

我正在尝试为所有与当前用户成为朋友的人返回一个名字/姓氏数组，并且大部分成功，除了我还为每个查找列出了用户本人，因此 8 行包括当前用户的 4 个，例如这是我的codeigniter查询：

```
$id = $this->session->userdata('id');
$this->db->select('first_name, last_name')->from("members");
$this->db->join('friendship', 'friendship.id_inviter = members.id OR friendship.id_friend = members.id');   
$where1 = "friendship.status = 'accepted' AND friendship.id_friend = $id";
$where2 = "friendship.status = 'accepted' AND friendship.id_inviter = $id";
$this->db->where($where1);
$this->db->or_where($where2);
$query = $this->db->get();
return $query; 
```

我想这是我看不到的优雅技巧。有什么想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:04:34.690

尝试添加`"members.id != $id"`到您的 where 子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:36:45.003

试试这个：

```
$this->db->select('members.first_name, members.last_name')->from("friendship");
$this->db->join('members', 'members.id = friendship.friend_id');
$this->db->where('friendship.inviter_id',$id);  
$this->db->get(); 
```

# shell - 在“find -exec”中多次使用当前文件名（“{}”）？

> ID：12965400
> 
> 赞同：40
> 
> 时间：2012-10-18T23:44:11.743
> 
> 标签：shell, find

许多消息来源说 {} 的每个实例都将替换为通过 find 找到的文件名，但是当我尝试运行以下命令时，我只得到一个文本文件，其名称为“.txt”

```
find /directory -name "*pattern*" -exec cut -f8 {} > {}.txt \; 
```

目标是创建一个文本文件，其中只有找到的每个文件的第八列，并且每个文本文件都将以其父文件命名。关于第二组 {} 的某些内容不会替换为每个找到的文件的文件名。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-18T23:49:36.953

尝试：

```
find /directory -name "*pattern*" -exec sh -c 'cut -f8 {} > {}.txt' \; 
```

但请注意，某些版本的 find 需要`{}`是一个不同的参数，否则不会扩展`{}`为文件名。您可以通过以下方式解决此问题：

```
find /directory -name "*pattern*" -exec sh -c 'cut -f8 $0 > $0.txt' {} \; 
```

（此替代命令会将输出文件放在包含匹配文件的子目录中。如果需要，您可以通过重定向到`${0#*/}`

问题是`find`没有做重定向，shell 是。您的命令完全等同于：

```
# Sample of INCORRECT code
find /directory -name "*pattern*" -exec cut -f8 {} \; > {}.txt 
```

请注意标准中的以下内容：

*如果存在多个仅包含两个字符“{}”的参数，则行为未指定。*

如果实用程序名称或参数字符串包含两个字符 "{}" ，而不仅仅是两个字符 "{}" ，则由实现定义 find 是否替换这两个字符或使用字符串而不进行更改。

 ** * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-19T00:13:22.457

要处理 William Pursell 在他的回答中提到的警告，请使用以下内容：

```
find /directory -name "*pattern*" -exec sh -c 'cut -f8 "$1" > "$1.txt"' x {} \; 
```

使用时`sh -c`，它会从要执行的字符串后面的参数中获取位置参数。多余的`x`填写`$0`，替换的文件名将变为`$1`.

双引号允许它与包含空格和其他特殊字符的文件名正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-06T12:51:03.217

```
find /directory -name "*pattern*" | xargs awk '{z=FILENAME".txt";print $8>z}' 
```*

# python - 如何在 Python/flask 中将 twitter 元数据从服务器流式传输到客户端浏览器

> ID：12965401
> 
> 赞同：1
> 
> 时间：2012-10-18T23:44:19.823
> 
> 标签：python, mongodb, twitter, flask, tweepy

我试图向客户端返回一个 twitter 元数据流，客户端以由 tweepy 的“轨道”过滤的形式输入该元数据。

我遇到的问题是没有任何东西返回给浏览器，即使服务器接收到它并处理了请求。到目前为止，这是我的代码：

主.py：

```
import flask
from flask.views import MethodView
from tweetStreamsRT import StreamerRt

app = flask.Flask(__name__)
app.secret_key = "asecret"

class View(MethodView):

def get(self):
    return flask.render_template('index.html')

def post(self):
    results = StreamerRt().filter(track = (flask.request.form['event']))
    flask.flash(results)
    return self.get()

 app.add_url_rule('/', view_func = View.as_view('index'), methods=['GET', 'POST'])
 app.debug = True
 app.run() 
```

连接到 Twitter Streaming API 的类：

```
import sys
import tweepy
import json
import time
#from textwrap import TextWrapper
import pymongo

CONSUMER_KEY = ''
CONSUMER_SECRET = ''

ACCESS_TOKEN = ''
ACCESS_TOKEN_SECRET = ''

auth = tweepy.OAuthHandler(CONSUMER_KEY,CONSUMER_SECRET)
auth.set_access_token(ACCESS_TOKEN,ACCESS_TOKEN_SECRET)

connection = pymongo.Connection()  
db = connection.twitterStream

class Listener(tweepy.StreamListener):

    def on_status(self, status):
        message = {}

        if status.author.lang == 'en':
            try:
                message = {
                           'Author': status.author.screen_name,
                           'Author_id': status.id,
                           'Time_normal': str(status.created_at),
                           'geo_enabled': status.author.geo_enabled,
                           'Geo': status.geo,
                           'Place' : status.place,
                           'Coordinates': status.coordinates}

                db.tweetStream.insert(message)

            except Exception, e:
                print >> sys.stderr, 'Encountered Exception:', e
                pass

        def on_error(self, status_code):

            waitPeriod = 60
            if status_code == 420:
                print >> sys.stderr, 'Encountered a %i Error, will retry in %i minutes'     % \
                (status_code, waitPeriod/60)
                time.sleep(waitPeriod)
                waitPeriod *= 2
                return waitPeriod
            else:            
                print >> sys.stderr, 'Encountered error with status code:', status_code
                return True 

        def on_timeout(self):
            print >> sys.stderr, 'Timeout...'
            return True 

def StreamerRt():
    return tweepy.streaming.Stream(auth, Listener(), timeout=60) 
```

我的 html 文件继承自基础并形成 html 文件：

```
{% extends "base.html" %}
{% import "forms.html" as forms %}

{% block page_header %}
  <div class="page-header">
    <h1>Welcome</h1>
  </div>
{% endblock %}
{% block content %}
  <h2>Enter the Event you would like to follow</h2>
      <form action="/" method="post">
            <input type="text" name="event" />
            <input type="submit" value="Submit Query" />
          </form>
        {% with messages = get_flashed_messages() %}
    {% if messages %}
                Results:
                <pre>
                    {% for message in messages %}
{{ message }}
                    {% endfor %}
                  </pre>
               {% endif %}
             {% endwith %}        
           {% endblock %} 
```

似乎我无法将任何流数据返回给客户端。

您如何将某些元数据从 Twitter Streaming API 返回到浏览器，同时将其写入数据库。

谢谢

此外，StreamerRt 函数不会按轨道作为来自客户端的输入进行过滤，但似乎会返回整个公共时间线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:55:18.003

我认为[Flask-Sijax](http://packages.python.org/Flask-Sijax/)是您正在寻找的。[Hookbox](http://pypi.python.org/pypi/hookbox/0.3.0)是另一种选择，[这里](http://charlesleifer.com/blog/writing-a-real-time-chat-app-using-hookbox-and-flask/)有一个关于如何将 hookbox 与烧瓶集成的教程。另一个选择是[gevent](http://www.gevent.org/) [这里](https://stackoverflow.com/questions/7697255/how-to-implement-comet-via-gevents-event)是关于使用 gevent 和烧瓶的 SO 帖子。我能想到的最后一个是[龙卷风](http://www.tornadoweb.org/)。

# scheme - 测试具有意外输出的函数

> ID：12965403
> 
> 赞同：1
> 
> 时间：2012-10-18T23:44:24.490
> 
> 标签：scheme, racket

我编写了一个程序来计算列表形式的表达式的导数，因此`4x^3`表示为`(* 4 (expt x 3))`，并且我正在编写一个测试套件来打印结果。我有一个函数`runtest`，它接受一个表达式并计算关于它的导数`x`并返回结果

```
(define (runtest test)
  (display "diff x ")(display test)(display " => ")(display (diff 'x test))) 
```

以便显示结果`diff x expression => result`

我将以下定义为测试：

```
(define test1 '4)
(define test2 '(* 2 x))
(define test3 '(* 2 y))
(define test4 '(+ x (* x x)))
(define test5 '(expt x 4)) 
```

然后我将所有测试放在一个列表中，这样我就可以映射列表并返回结果：

```
(define test-suite (list test1 test2 test3 test4 test5)) 
```

当我运行`(map runtest test-suite)`而不是单独返回每个时，我会得到一个没有换行符的长列表，而我想要的是：

```
diff x 4 => 0
diff x '(* 2 x) => '(+ (* 0 x) (* 2 1))
diff x '(* 2 y) => '(+ (* 0 y) (* 2 0))
diff x '(+ x (* x x)) => '(+ 1 (* 2 x))
diff x '(expt x 4) => '(* 4 (expt x 3)) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T01:02:58.397

我想你正在寻找`newline`：

```
(define (runtest test)
  (display "diff x ")
  (display test)
  (display " => ")
  (display (diff 'x test))
  (newline)) 
```

顺便说一句，很少有充分的理由调用`display`字符串以外的任何东西。我建议使用`write`for`test`和`(diff 'x test)`。

[在Racket](http://racket-lang.org)中编写它的一种更惯用的方式是：

```
(define (runtest test)
  (printf "diff x ~s => ~s\n" test (diff 'x test))) 
```

或者，在任何带有[SRFI-28](http://srfi.schemers.org/srfi-28/srfi-28.html)的方案中，这个：

```
(define (runtest test)
  (display (format "diff x ~s => ~s~%" test (diff 'x test))) 
```

# image - 在 Windows 8 应用程序中查找匹配的图像

> ID：12965405
> 
> 赞同：0
> 
> 时间：2012-10-18T23:44:33.863
> 
> 标签：image, windows-8, matching

我想为 Windows 8 / Windows Store 构建一个应用程序，用户可以在其中使用他的设备拍照，该应用程序将从数据库中返回一个看起来最接近它的图像。例如，您扫描一本书的正面并从数据库中获得正确的产品图像。现在，我知道这不是一件容易的事，所以我想知道是否有任何可用于 Win8 的库。我听说过 OpenCV、SURF 和 AForge.net 等工具，但我可以在 Windows 8 上使用这些工具吗？我希望你们能给我一个起点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:44:27.883

这是一个非常笼统的问题，因此只能得出一个非常笼统的答案。由于您的目标是平板设备，因此您需要记住它们几乎没有普通 PC 的处理能力。提供此类功能的其他设备上的其他应用程序通常会将大量工作卸载到其服务器上。我相信他们中的大多数人在设备上做的预处理很少（标准化为正确的分辨率或生成一些直方图），然后将其上传到具有数据库和重型分析工具的服务器进行比较。

从 Windows 8 的角度来看，启动此类应用程序的最简单方法是获取一个可以拍摄照片并将其标准化为特定分辨率的应用程序。一旦你有了它，构建将它上传到服务器的功能。然后，您需要实现服务器代码以使用 AForge 之类的工具来执行允许您比较图像的图像处理。

有大量关于如何比较图像的重要资源，您将不得不浏览它们并找到适合您的资源。首先，您可能需要阅读此线程：

[图像比较 - 快速算法](https://stackoverflow.com/questions/843972/image-comparison-fast-algorithm)

最后，您需要决定哪种算法最适合您要比​​较的图像。

# c++ - “错误：构造函数可能不是 cv 限定的？

> ID：12965406
> 
> 赞同：1
> 
> 时间：2012-10-18T23:44:36.590
> 
> 标签：c++, class

我认为这是因为我在下面编写的代码。但我无法解决。

```
classname::smt() {;}

classname::smt1(int x, double y, string name)
{
    x = xprivate;
    y = yprivate;
    name = nameprivate;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T23:48:39.153

这意味着您不能拥有执行此操作的代码：

```
class classname
{
    classname() const
    classname() volatile
    classname() const volatile
}; 
```

cv 限定符适用于存储和方法，而不是构造函数或析构函数（因为您仍然必须初始化 cv 限定存储）。

# batch-file - 从文件名递归地标记mp3文件批处理文件

> ID：12965408
> 
> 赞同：1
> 
> 时间：2012-10-18T23:44:39.383
> 
> 标签：batch-file, mp3

我有这个批处理文件来从那里的文件名标记我的 mp3，我如何使它递归，以便它拾取不同目录中的所有 mp3 文件

```
TAG.exe --remove --auto --scheme "A - T+L+Y" --rename "T" C:\music\*.mp3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:15:42.370

```
for /r "c:\music" %%D in (.) do TAG.exe --remove --auto --scheme "A - T+L+Y" --rename "T" "%~fD\*.mp3" 
```

如果在批处理文件中使用，则将百分比加倍。

# magento - Magento 通讯表格不起作用

> ID：12965410
> 
> 赞同：2
> 
> 时间：2012-10-18T23:44:41.337
> 
> 标签：magento, newsletter

我正在尝试向我的 Magento 站点 creativeinfusion.com.au/shop 添加时事通讯注册表单 问题是电子邮件地址未添加到订阅者列表中。

我在我的内容块中尝试了以下两种方法。

```
{{block type="core/template" template="newsletter/subscribe.phtml"}}

{{block type="newsletter/subscribe" template="newsletter/subscribe.phtml"}} 
```

没有人将订阅者的电子邮件地址添加到 CMS。我假设上面的代码没有链接到正确的文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-22T10:35:36.577

这段代码：

```
{{block type="newsletter/subscribe" template="newsletter/subscribe.phtml"}} 
```

适用于 V-1.7.xx

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:23:28.763

添加到 cms 的正确行如下：

```
{{block type="newsletter/subscribe" template="newsletter/subscribe.phtml"}} 
```

因为时事通讯/订阅是正确的块。我将它添加到一个干净的 Magento 安装中，它运行良好。

你怎么了？订阅表格根本没有显示吗？不是发帖吗？它不存储输入的电子邮件地址吗？

由于它是开箱即用的，因此听起来可能是其他模块或 js/css 干扰了该过程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-12T13:13:19.037

`{{block type="newsletter/subscribe" template="newsletter/subscribe.phtml"}}`<- 这对我有用。

# php - 来自 db 的随机图像，带有链接槽 id

> ID：12965416
> 
> 赞同：2
> 
> 时间：2012-10-18T23:45:13.740
> 
> 标签：php, sql, random, limit

有一些问题，基本上我有一个随机的图片库。

这是随机缩略图的代码：

```
<?php
include('../../connect.php');
$result = mysql_query("SELECT *
                       FROM picture AS r1
                       JOIN
                       (
                          SELECT ROUND(RAND() * (SELECT MAX(id)
                                                 FROM picture) ) AS id
                       ) AS r2 
                       WHERE r1.id >= r2.id 
                          AND public_approved=1
                       ORDER BY r1.id ASC 
                       LIMIT 4;")
or die(mysql_error());

while($row = mysql_fetch_array( $result ))  
{
echo "<div style='float:left; margin:2px;' >";
echo '<a href="pictures.php?id=' . $row['id'] .'"><img src="../../files/small/thumb0_'. $row['file_name'] . '.' . $row['file_extension'] . '" border="0"></br>';
echo "</div>";
}
?> 
```

单击其中一个缩略图时，页面会重新加载并使用以下命令来加载主要内容：

```
<?php
include('../../connect.php');

$passed_id = $_GET['id']; 

$result1 = mysql_query("SELECT * FROM picture where id='$passed_id' ")
  or die(mysql_error());

while($row = mysql_fetch_array( $result1 ))     
{?> 
```

这通过显示较大图像和标题等的表格继续进行。

我遇到两个问题：

1 - 即使我在限制中指定 4，有时也只显示 1 2 或 3 个拇指。

2 - 有时当我点击缩略图时使用了错误的 id，即缩略图 id 2 但触发 id 8。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T23:50:25.457

您获得 1,2 或 3 个拇指的原因是因为 r1.id >= r2.id 其中 r1.public_aprove 1 只有结果集 1 或 2 或 3。原因是您的 RAND()。

对于问题 2，您使用的是 r1.id 还是 r2.id 的哪一行 [id] - 我怀疑它的 r2.id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T23:56:00.310

假设 X 是您要显示的图像数量，您应该将 [MAX(id) - X] 作为 RAND() 乘数。这样结果集就会有足够的结果。

第二个问题似乎很简单，有人可能会发布一个很好的答案，但请记住，这通常是您的 php/html 代码中的列/参数混淆。

祝你好运！

# jsf - 在其 URI 中带有参数的页面中不会触发 commandLink

> ID：12965422
> 
> 赞同：0
> 
> 时间：2012-10-18T23:46:20.800
> 
> 标签：jsf

当我在其 URI 中使用参数调用页面中的方法时，除非我再次传递 uri 的参数，否则不会调用该方法。例如，如果我有：

```
http://maywebsite/myapp/mypage.xhtml?mykey=myvalue
```

此方法会导致错误（显然是因为它在没有参数的情况下再次呈现页面，但从未调用方法 foo）：

```
<h:commandLink value="Do Action" actionListener="#{mybean.foo}"/> 
```

所以我添加了一个 ajax 来只更新组件，但按钮没有被触发：

```
<h:commandLink value="Do Action" actionListener="#{mybean.foo}">
    <f:ajax render="somecomponent"/>
</h:commandLink> 
```

当我再次传递参数值时，按钮调用该方法就好了：

```
 <h:commandLink value="Do Action" actionListener="#{mybean.foo}">
     <f:param name="mykey" value="myvalue"/>
     <f:ajax render="somecomponent"/>
 </h:commandLink> 
```

但是，此按钮包含 (ui:include) 在具有不同参数键和值的许多页面中。如何在不传递参数值的情况下调用该方法？

我正在使用 glassfish 3.1.2、jsf 2.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T01:44:09.517

显然，bean 是请求范围的，并且参数在如何呈现命令链接的方式中发挥作用（例如，通过`rendered`其父组件之一上的属性，或通过包含命令链接的模板的动态包含）。

所有这些条件都在表单提交的应用请求值阶段重新评估。开发人员必须确保所有这些条件与将表单呈现给最终用户时完全相同。因此，当 bean 是请求范围且参数不存在时，命令链接在组件树中显示为未呈现，这样就不会调用它的操作。

将 bean 放在视图范围内是解决此问题的最简单方法（除非您使用动态`<ui:include>`，否则会更复杂，您需要关闭特定视图的部分状态保存）。

### 也可以看看：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)- 第 5 点

# java - 为什么 JUnit MethodRule 和 TestWatchman 已被弃用？

> ID：12965423
> 
> 赞同：15
> 
> 时间：2012-10-18T23:47:05.637
> 
> 标签：java, unit-testing, testing, junit

org.junit.rules.MethodRule 和 org.junit.rules.TestWatchman 已被弃用。

一个有趣的注释位于：[https](https://github.com/junit-team/junit/pull/519) ://github.com/junit-team/junit/pull/519 ，部分原因是：“许多开发人员有正当理由坚持使用 MethodRule，JUnit 团队没有计划取消对 MethodRule 的支持。 ..”

[http://junit-team.github.io/junit/javadoc/4.10/org/junit/rules/TestWatchman.html](http://junit-team.github.io/junit/javadoc/4.10/org/junit/rules/TestWatchman.html)文档：“已弃用。MethodRule 已弃用。使用 TestWatcher 实现 TestRule。” 并提供了一些示例代码。

将这些标记为已弃用的原因是什么？TestWatcher 和已弃用的 TestWachman 之间的权衡是什么？您是否有关于此特定主题的概要或概述的良好链接？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-19T08:10:17.163

原因很简单，`TestRule`本来打算换`MethodRule`的。`MethodRule`在 4.7 中实现了引入，它是一个具有一种方法的接口：

```
Statement apply(Statement base, FrameworkMethod method, Object target) 
```

`FrameworkMethod`（几乎）是一个内部 JUnit 类，它本来就不应该被公开。`object`是将运行该方法的对象，例如，您可以使用反射修改测试的状态。

`TestRule`然而，在 4.9 中引入的是：

```
Statement apply(Statement base, Description description) 
```

`Description`是一个包含测试描述的不可变 POJO。在测试中修改状态的方法是使用`TestRule`. 这是一个完全清洁的设计。

`TestWatchman(MethodRule)`和之间的具体区别`TestWatcher(TestRule)`很小，只是 TestWatcher 有更好的错误处理，所以应该优先使用它。两者都有可覆盖的方法，例如`succeeded()`, `failed()`, `starting()`, `finished()`。

```
public static class WatchmanTest {
   private static String watchedLog;

   @Rule
   public TestWatcher watchman= new TestWatcher() {
     @Override
     protected void failed(Throwable e, Description description) {
       watchedLog+= description + "\n";
     }

     @Override
     protected void succeeded(Description description) {
       watchedLog+= description + " " + "success!\n";
     }
   };

   @Test
   public void fails() {
     fail();
   }

   @Test
   public void succeeds() {
   }
} 
```

`TestWatcher(TestRule)`处理覆盖方法中的异常。如果抛出异常，则测试方法在测试执行后失败，而不是在测试期间失败。

有关详细信息，请参阅[TestWatcher](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/rules/TestWatcher.java)和[TestWatchman](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/rules/MethodRule.java)

# debugging - 如何在 EBCDIC 中获取 JavaMail 跟踪？

> ID：12965424
> 
> 赞同：0
> 
> 时间：2012-10-18T23:47:11.830
> 
> 标签：debugging, jakarta-mail

我打开了跟踪我的基于 JavaMail 的应用程序，我可以看到跟踪，但它看起来像垃圾，因为它是 unicode 并且我的机器只知道 EBCDIC。无论如何我可以使用我的机器的默认编码（EBCDIC）打印出跟踪吗？这是我激活跟踪的方法：

```
session.setDebug(true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T01:23:19.977

By default the trace goes to System.out. If System.out isn't converting to EBCDIC, you can create your own PrintStream that does so and use the session.setDebugOut(ps) method to set it.

# python - 使用入口点定义的命令强制 python 解释选项

> ID：12965426
> 
> 赞同：2
> 
> 时间：2012-10-18T23:47:24.187
> 
> 标签：python, entry-point

我想强制使用 python -S 运行脚本，我正在使用 setup.py 中的 entry_points 定义脚本。有这个选项吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:14:37.793

我认为 setuptools 中没有这样的选项。您可以创建一个存根脚本并在`scripts`distutils 选项中指定它。基于[是否可以在脚本中设置 python -O（优化）标志？](https://stackoverflow.com/a/7527983/4279)：

```
#!/usr/bin/env python
from your_package.script import main

if __name__=="__main__":
   import os, sys
   sentinel_option = '--dont-add-no-site-option'
   if sentinel_option not in sys.argv:
      sys.argv.append(sentinel_option)
      os.execl(sys.executable, sys.executable, '-S', *sys.argv)
   else:
      sys.argv.remove(sentinel_option)
      main() 
```

# c# - 调用 IExtractImage.GetLocation() 失败并出现 NullReference 异常

> ID：12965429
> 
> 赞同：1
> 
> 时间：2012-10-18T23:47:38.100
> 
> 标签：c#, windows-shell

我有以下代码来导入 IExtractImage 接口。

```
[ComImport]
[InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
[Guid("BB2E617C-0920-11d1-9A0B-00C04FC2D6C1")]
public interface IExtractImage
{
  [PreserveSig]
   Int32 GetLocation([MarshalAs(UnmanagedType.LPWStr)] out StringBuilder pszPathBuffer, 
     int cch, 
     ref int pdwPriority, 
     SIZE prgSize, 
     int dwRecClrDepth, 
     ref int pdwFlags);

  [PreserveSig]
    Int32 Extract(out IntPtr phBmpThumbnail);
} 
```

我还导入了 IShellFolder，为简洁起见，我在这里不提。我的目的是使用 shellfolder 访问文件的缩略图。所以这是我检索缩略图的代码。但是我对 IExtractImage.GetLocation() 的调用因 NullReference 异常而失败，说明

“在 CCDash.exe 中发生了‘System.NullReferenceException’类型的异常，但未在用户代码中处理

附加信息：对象引用未设置为对象的实例。”

有人可以帮我确定我错过了什么吗？

```
public Bitmap GetThumbNail(string mediaFileName)
{
  IShellFolder shellDesktop;
  SHGetDesktopFolder(out shellDesktop);

  IntPtr pidlRoot;
  uint attribute = 0;
  string mediaPath = "C:\\Users\\<user>\\Videos"; // I have hard-coded the path for now
  uint pchEaten = 0;
  // Get the pidl of the media folder
  shellDesktop.ParseDisplayName(IntPtr.Zero, IntPtr.Zero, mediaPath, ref pchEaten, out pidlRoot, ref attribute);

  Guid mediaFolderGuid = new Guid("000214E6-0000-0000-C000-000000000046");
  shellDesktop.BindToObject(pidlRoot, IntPtr.Zero, mediaFolderGuid, out shellMediaFolder);

  IntPtr pidlMediaFolder;
  // Get the pidl of the media file
  shellMediaFolder.ParseDisplayName(IntPtr.Zero, IntPtr.Zero, mediaFileName, ref pchEaten, out pidlMediaFolder, ref attribute);

  Guid mediaFileImgGuid = new Guid("BB2E617C-0920-11d1-9A0B-00C04FC2D6C1");      
  uint rfgRes = 0;
  IExtractImage extractImage;
  shellMediaFolder.GetUIObjectOf(IntPtr.Zero, 1, out pidlMediaFolder, mediaFileImgGuid, ref rfgRes, out extractImage);

  SIZE size = new SIZE
  {
    cx = 40,
    cy = 40
  };

  int flags = 0x40 | 0x40;
  StringBuilder location = new StringBuilder(260, 260);
  int priority = 0;
  int requestedColourDepth = 0x20;
  IntPtr hBmp = IntPtr.Zero;
  // Now get the image
  extractImage.GetLocation(out location, location.Capacity, ref priority, size, requestedColourDepth, ref flags);
  extractImage.Extract(out hBmp);

  Bitmap thumbnail = Image.FromHbitmap(hBmp);

  return thumbnail;
} 
```

编辑：

我现在修改了我的代码，如下所示。与第一个版本没有太大区别，但有更多的错误处理和更好的文档和变量名，可以帮助我们更好地理解我的代码。这是修改后的代码：

```
public Bitmap GetThumbNail(string mediaFileName)
{
  Bitmap thumbnail = null;

  //Step 1: Use SHGetDesktopFolder to get the desktop folder.
  IShellFolder shellDesktop;
  SHGetDesktopFolder(out shellDesktop);

  if (shellDesktop != null)
  {
    IntPtr pidlMediaFolder;
    try
    {
      uint attribute = 0;
      string mediaPath = Path.GetDirectoryName(mediaFileName);
      uint pchEaten = 0;
      // Step 2: Using the desktop's IShellFolder, pass the file's parent folder path name into ParseDisplayName to get its PIDL.
      shellDesktop.ParseDisplayName(IntPtr.Zero, IntPtr.Zero, mediaPath, ref pchEaten, out pidlMediaFolder, ref attribute);
    }
    catch (Exception)
    {
      Marshal.ReleaseComObject(shellDesktop);
      return null;
    }

    if (pidlMediaFolder != IntPtr.Zero)
    {
      Guid mediaFolderGuid = new Guid("000214E6-0000-0000-C000-000000000046");
      IShellFolder shellMediaFolder;
      // Step 3: Using the desktop's IShellFolder, pass the PIDL into the BindToObject method 
      // and get the IShellFolder interface of the file's parent folder.          
      try
      {
        shellDesktop.BindToObject(pidlMediaFolder, IntPtr.Zero, mediaFolderGuid, out shellMediaFolder);
      }
      catch (Exception)
      {
        Marshal.ReleaseComObject(shellDesktop);
        return null;
      }

      if (shellMediaFolder != null)
      {
        IntPtr pidlMediaFile;
        uint attribute = 0;
        uint pchEaten = 0;
        // Step 4: Using the parent folder's IShellFolder, pass the file name into ParseDisplayName to get its PIDL.            
        int ret = shellMediaFolder.ParseDisplayName(IntPtr.Zero, IntPtr.Zero, mediaFileName, ref pchEaten, out pidlMediaFile, ref attribute);

        Guid mediaFileImgGuid = new Guid("BB2E617C-0920-11d1-9A0B-00C04FC2D6C1");
        uint rfgRes = 0;
        IExtractImage extractImage;
        // Step 5: Using the parent folder's IShellFolder, pass the file's PIDL 
        // into the GetUIObjectOf. method to get the IExtractImage interface.            
        ret = shellMediaFolder.GetUIObjectOf(IntPtr.Zero, 1, out pidlMediaFile, mediaFileImgGuid, ref rfgRes, out extractImage);

        SIZE size = new SIZE
        {
          cx = 40,
          cy = 40
        };

        uint flags = 0x0200;
        StringBuilder location = new StringBuilder(260, 260);
        int priority = 0;
        int requestedColourDepth = 0x20;
        IntPtr hBmp = IntPtr.Zero;
        // Now get the image
        extractImage.GetLocation(out location, location.Capacity, ref priority, size, requestedColourDepth, ref flags);
        extractImage.Extract(out hBmp);

        thumbnail = Image.FromHbitmap(hBmp);
      }
    }
  }
  return thumbnail;
} 
```

我看到在第 4 步，pidlMediaFile 没有被正确检索，并且在 ParseDisplayName() 调用之后它的值仍然是 0。这就是问题的开始。我不确定为什么文件名的 pidl 没有被检索到，而文件的父文件夹却成功检索到了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:55:18.047

看起来像是`extractImage`从`null`. `GetUIObjectOf()`尝试检查`HRESULT`返回值`GetUIObjectOf()`以找出返回值的原因`null`。

编辑：

来自[http://msdn.microsoft.com/en-us/library/windows/desktop/aa378137%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378137%28v=vs.85%29.aspx)：

```
E_INVALIDARG    One or more arguments are not valid 0x80070057 
```

根据[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775073%28v=vs.85%29.aspx)，第三个参数是一个`[in]`参数，而不是一个`[out]`参数。

# haskell - 哪种函数式语言方法最容易转移到 Boost Phoenix？

> ID：12965430
> 
> 赞同：1
> 
> 时间：2012-10-18T23:47:55.837
> 
> 标签：haskell, functional-programming, ocaml, boost-lambda, boost-phoenix

我希望通过 am 学习函数式编程，以便将 Boost.phoenix 集成到我的项目中。

哪种语言最相似，因此我可以找到能够以可以在该上下文中轻松应用的方式说明函数式编程概念的书籍... haskell 和 ocaml 相似吗？

或者，有没有什么好的函数式编程书籍可以应用到 Boost.phoenix？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T23:51:36.767

Phoenix 支持 C++ 中的函数式编程 (FP)。因此，最协同的语言将是 C++。

如果您想按照自己的方式学习函数式编程，Haskell 和 Scheme 等语言可能是更好的选择。

[http://www.boost.org/doc/libs/1_51_0/libs/phoenix/doc/html/index.html](http://www.boost.org/doc/libs/1_51_0/libs/phoenix/doc/html/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T02:20:30.303

我对 Phoenix 没有任何经验（我浏览过文档），但我确实有一些使用 C++、OCaml 和 Haskell 的经验，所以我可以在那里提供帮助。

首先，如果你学习函数式编程，你会发现它并不能很好地翻译成 C++——它最终会比使用实际的函数式语言更混乱、更冗长。尽管如此，仍然值得学习这些技术，因为它们将为您提供更多工具和不同的心态。

> haskell 和 ocaml 相似吗？

它们都受到 ML 的影响，因此它们非常相似（嗯，有点像，请参阅评论）。由于 OCaml 的命令式和 OO 特性，OCaml 更接近 C++，但我建议您学习 Haskell，因为它更实用、更令人费解并且拥有更多资源。关于类 ML 语言的一个有趣的事情，它们可以很好地转换为模板元编程。

> 或者，有没有什么好的函数式编程书籍可以应用到 Boost.phoenix？

Phoenix 的文档似乎使用了相当标准的术语。可能令人困惑的一件事是他们使用了“函子”这个词——在 C++ 中它表示函数对象，但在 Haskell 等语言中则是另一回事。

以下是您应该寻找的一些术语：

*   lambda / 匿名函数
*   一级功能
*   功能应用
*   部分应用和柯里化
*   作品
*   严格/非严格/惰性评估
*   递归
*   关闭

这里有两本我推荐阅读的免费书籍，因为它们是函数式编程的一个很好的介绍：

[http://learnyouahaskell.com/chapters](http://learnyouahaskell.com/chapters) (Haskell)

[http://mitpress.mit.edu/sicp/full-text/book/book.html](http://mitpress.mit.edu/sicp/full-text/book/book.html)（方案）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T08:33:34.610

我对 Phoenix 了解不多，但我认为 Okasaki 的纯函数式数据结构可以让您或多或少地了解如何以函数式风格编写程序。

# linux - svn，不能删除目录

> ID：12965432
> 
> 赞同：4
> 
> 时间：2012-10-18T23:48:09.133
> 
> 标签：linux, svn, fedora

我在 Fedora 17 上尝试使用 svn 版本 1.7.6

我已经创建了一个存储库，`/home/el/svnworkspace`并签出了一个工作副本`/workspace`

使用命令时出现此错误：

```
[root@defiant workspace]# svn remove TestProject --force 
```

给出错误：

```
svn: E155035: '/workspace/TestProject' 
              is the root of a working copy and cannot be deleted 
```

错误消息部分正确，`TestProject`之前是根。但我删除了它，现在`/workspace`是根目录。所以不知何故它很困惑。我不再希望 TestProject 成为根，我希望工作区成为根。svn 很困惑，我想解开它，也许你们中的一个人知道`/workspace/TestProject`作为工作副本的根删除的正确巫师咒语？我只是希望它再次成为一个普通文件夹。

也许我修复它的唯一方法是将所有内容吹走并重新添加所有内容。也许常驻巫师知道更好的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T00:05:59.307

SVN 有时会对目录感到困惑。

除非您有很多需要签入的更改，否则我建议从您的文件系统 (rm -rf) 中删除有问题的层次结构，然后从看起来合适的地方再次签出。这似乎总是为我处理 SVN 目录混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T00:14:19.630

**我能够通过以下步骤解决问题：**

对我来说，确保没有任何文件锁定了相关文件：Eclipse IDE。所以关闭任何可能锁定文件的 IDE 或编辑器。

确保您对工作副本和存储库具有写入权限。

```
chmod -R 775 /workspace
chown -R your_user_name.your_user_name 775 /workspace
chmod -R 775 /home/el/svnworkspace
chown -R your_user_name.your_user_name 775 /home/el/svnworkspace 
```

如果您正在使用带有 GUI 的程序，例如`rapidsvn`添加/删除/提交文件，请将其关闭并仅使用命令行 svn 命令。GUI 可能与我在命令行上尝试执行的操作相冲突。

**最后，我认为这部分解决了我的问题：**

进入我要添加但不会添加的目录。手动`rm -rf`将其中的所有`.svn`文件。然后尝试 svn 删除它然后 svn 添加它。它成功添加，然后我可以提交它，一切都很好。

# image - 如何最有效地用 1 个主图像和缩放的填充图像填充打印页面？

> ID：12965439
> 
> 赞同：1
> 
> 时间：2012-10-18T23:48:53.620
> 
> 标签：image, printing, scaling, packing, space-efficiency

我正在打印纵横比在 1.7:1 和 8:1 之间的全景图。一个常见的情况是图像缩放到 18" x 8"，在标准的 12x18 英寸页面上留下 4 英寸。纸张只有这么多种尺寸，但我的图像几乎可以是任何尺寸。

我讨厌浪费 4x18 英寸的打印空间，而且我一直在关注其他可以缩放以填满大部分房间的库存图像，并且具有最小的空白或失真。我只是把我的网站和版权放在上面，然后把它们用作名片。

每次我做印刷工作时，我都必须找到新的、有创意的组合。好像有人已经剥了这只猫的皮。我已经搜索了几个小时，但找不到对该算法的任何参考。

我编写了一个很小的半快（？）脚本，它采用图像文件规范和页面大小，将其缩放以适合页面，计算空白并给我空白的纵横比。然后，我会寻找一些具有大致 AR 效果的库存图像并将其缩放以适应。

如果没有适合的单个图像，那么我会寻找适合的 2 个。我已经使用了3。多么反复出现的痛苦。

你为什么要花几个小时来节省几美元的纸张？有些印刷品的体积相当大，有些印刷品的长度超过 3 英尺，因此可以叠加。另外，我可以获得免费赠品，我可以分发这些赠品，将真正的产品送到人们手中。

而且，有些全景图最多需要 34 张 HDR 图像，每张都必须经过手工 Photoshop 处理才能匹配，并且每张 HDR 图像通常是 7、36 MPix、D800E 图像。是的，制作一幅巨大的全景图需要多达 238 个单独的 NEF 文件和数万亿个 CPU 周期。

我已经在每张照片上投入了很多时间，一旦我制作了一个打包的大师，我就可以从那时起使用它，缩放以适应。将约 30% 的废物转化为有用的产品直接增加了利润。

一旦完成了繁重的计算和组合，使用 ImageMagick 即时缩放它们并将它们闪现到你面前，这样你就可以选择你最喜欢的一个。这可能很有趣。

最重要的是，这是一个智力挑战，迄今为止我还没有找到一个好的解决方案。

有任何想法吗？

# c++ - 返回值指向

> ID：12965447
> 
> 赞同：-1
> 
> 时间：2012-10-18T23:50:05.850
> 
> 标签：c++, class, accessor

假设我们有两个类

```
class A
{
    public:
        Course ( int num ) ;
        int getAnum();

        int num;
}

A::A( int num )
{
    this->num = num;
} 

int A::getAnum()
{
    return this->num;
} 
```

和其他班级

```
class B
{
    public:
        B ( A * a  = NULL);
        A * getA();      
    A * a;
}

B::B( Course * a )
{
    this->a = new A;
    this->a = a;
}
A * B::getA() { return this->a; } 
```

主要是

```
A* a = new A(12);
B* b = new B(a); 
```

问题是我如何打印数字

```
cout << b.getA->getAnum(); 
```

或者

```
 cout <<b.a->getAnum(); 
```

哪一个是正确的？我可以通过返回值指向另一个函数吗？两个代码示例中发生了什么，为什么？请不要注意语法错误。对于不适当的代码和糟糕的英语，我们深表歉意。感谢您的回答:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:44:32.220

您的代码中有许多错误，通过解决这些错误，您可能会发现找到答案的更有用的东西，但除此之外，在 C++ 中为了调用您需要使用的函数`operator()`，因此您应该编写`b->getA()->getAnum()`而不是`b->getA->getAnum()`. 在你的版本`b->getA`中是一个函数，你不能应用`operator->`它！但是`b->getA()`调用那个函数并返回一个`A*`你可以用它来调用的`getAnum()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T23:54:27.387

cout << ba->GetAnum(); 由于您的 a 变量是公开的，因此可以访问它。

# mongodb-java - 使用 Java API 将日期字段从 JSON 存储到 MongoDB

> ID：12965448
> 
> 赞同：0
> 
> 时间：2012-10-18T23:50:11.983
> 
> 标签：mongodb-java

我正在使用 java api for mongodb 将 JSON 字符串解析为 Java 对象并将其存储到 MongoDB 中。

我的 JSON 字符串将包含如下所示的日期字段。“创建”：“2012-10-17 21:39:06.385987 +0000”

当我尝试将解析的 java 对象保存到 MongoDB 中时，它将值存储为字符串。我想存储它有一个日期时间字段。有人可以对此有所了解吗？

谢谢和问候， Balaji.R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:18:56.980

Java 驱动程序和其他默认驱动程序一样，将基本语言类型映射到 MongoDB 类型，因此要将日期保存到 mongo，您只需要保存 Date 对象，而不是日期字符串。 这是来自 MongoDB 文档[的简单示例。](http://www.mongodb.org/display/DOCS/Java+Types#JavaTypes-Dates/Times)

# debugging - Word 插件调试

> ID：12965450
> 
> 赞同：0
> 
> 时间：2012-10-18T23:50:23.100
> 
> 标签：debugging, ms-word, add-in

我为 MS Word 2010 创建了一个 Word 插件。我想调试代码。当我按 Debug 时，会打开一个新的 word 实例，但似乎没有加载任何 Addin。通过 setup(.msi) 安装后，我可以看到我的插件。
我的插件在 mscoree.dll 中作为 COM 对象加载，而不是 vsto。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T01:56:23.743

您的安装程序可能正在为加载项放入必要的注册表项：HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Office\Word\Addins（或者在此路径下但在 HKCU 中）。或者，如果此键已经存在，请确保 HKCU 条目（如果存在）已将 LoadBehavior 设置为 3

# javascript - javascript公式计算

> ID：12965455
> 
> 赞同：0
> 
> 时间：2012-10-18T23:51:02.633
> 
> 标签：javascript, jquery, jquery-calculation

我有一个相当复杂的公式，我想用代码重新创建，我设置了一个[小提琴](http://jsfiddle.net/bloodygeese/qZfuT/1/) 但我不知道从哪里开始使用 JavaScript/jQuery？

任何帮助我开始并指出我正确方向的帮助都会很棒。

我需要的公式是

```
(1/(1 - A %)) - 1 = B %
A = Percentage drop (#input)
B = Percentage gain (#output) 
```

例如：如果 A 下跌 25%，B 必须增加 33% 才能收支平衡

我希望在单击计算 div 时显示输出，然后将来我想使用 jQuery 滑块来更改输入值并动态更改输出。

```
<div id="calc">
<div id="inputlabel">INPUT</div>
<input id="input">%</>
<div id="calculation">CALCULATE</div>
<h1 class="output">%</h1>
</div>​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T00:00:59.690

此代码将起作用：

```
$(document).ready(function() {
    $('#calculation').click(function() {
        var inp = parseFloat($('#input').val());
        var out = parseFloat((1 / (1 - (inp / 100))) - 1);
        out = parseInt(out * 100);
        $('h1.output').text(out + ' %');
    });
}); 
```

检查更新的[小提琴](http://jsfiddle.net/qZfuT/10/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T00:11:48.740

在此处查找执行此操作的 JSFiddle：http: [//jsfiddle.net/LC8qE/](http://jsfiddle.net/LC8qE/)

```
function calculate()
{
    var A = parseInt(jQuery('#input').val()) / 100;
    var B = (1/(1 - A)) - 1;
    return Math.round(B * 100);
}

jQuery('#calculation').on('click', function(){
    if(jQuery('#input').val() == '')
        { alert('enter a value!'); return false; }          
    var result = calculate();
    jQuery('.output').text(result + '%');
}); 
```

# java - 在 JPanel 上居中 JButton

> ID：12965456
> 
> 赞同：1
> 
> 时间：2012-10-18T23:51:03.150
> 
> 标签：java, swing, layout, jframe, jpanel

我正在开发一个 GUI，但是我正在尝试格式化以使其看起来对用户更具吸引力；我遇到了一些障碍，一个是我不知道如何在现有的 JPanel 中正确地将 JButtons 居中，我已经设法将它们排列成行，我想知道更多关于我如何真正做到格式化这些。（如果您有兴趣帮助我解决其他问题，请看这里，[如何将输出流设置为 TextArea](https://stackoverflow.com/questions/12945537/how-to-set-output-stream-to-textarea)）

[这就是我目前所拥有的。](http://i46.tinypic.com/2r2vyv5.png)

如果您单击链接，它将向您显示我当前在我的一个选项卡中拥有的内容，我希望图片中的 JButtons 以 X 轴为中心而不是左侧，因为它们是我想的默认设置.

所以这是我的代码，它垂直排列，但我需要所有行都居中。

```
package guipanel;

import javax.swing.*;
import java.awt.*;
import java.io.*;
import java.net.*;
import java.util.logging.Level;
import java.util.logging.Logger;

/**
 *
 * @author Dan
 */
public class GUIPanel extends JFrame {
    /**
     * Creates new form GUIPanel
     */
    public GUIPanel() {
        initComponents();
    }
    private void setOutputStream(boolean catchErrors) throws IOException {
        System.setOut(new PrintStream(new FilterOutputStream(new ByteArrayOutputStream()))); // catches System.out messages
        setVisible(true);
        requestFocus();
        if (catchErrors) {
               System.setErr(new PrintStream(new FilterOutputStream(new ByteArrayOutputStream())));
        }
    }
    private void setPosition(JPanel jPanel) {
        GridBagLayout layout = new GridBagLayout();
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.fill = gbc.CENTER;
        layout.setConstraints(jPanel, gbc);
        jPanel.setLayout(layout);
    }
    private void addTabs(JTabbedPane jTabbedPane1) throws IOException {
        jTabbedPane1.add("Main", jPanel);
        jPanel.add(textArea1);
        jTabbedPane1.add("Commands", jPanel1);
        jTabbedPane1.add("Rules", jPanel2);
        jTabbedPane1.add("Links", jPanel3);
        jPanel3.add(website);
        jPanel3.add(jSeparator1);
        jPanel3.add(youtube);
        jPanel3.add(jSeparator2);
        jPanel3.add(webclient);
        jPanel3.add(jSeparator4);
        jPanel3.add(forums);
        jTabbedPane1.add("Information", jPanel4);
        jTabbedPane1.add("Shutdown", jPanel5);
        jPanel5.add(Shutdown);
        jPanel3.setLayout(new BoxLayout(jPanel3, BoxLayout.PAGE_AXIS));
        setPosition(jPanel5);
        setOutputStream(true);
    }
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        textArea1 = new java.awt.TextArea();
        jLabel1 = new javax.swing.JLabel();
        website = new javax.swing.JButton();
        youtube = new javax.swing.JButton();
        forums = new javax.swing.JButton();
        jSeparator1 = new javax.swing.JSeparator();
        jSeparator2 = new javax.swing.JSeparator();
        jSeparator3 = new javax.swing.JSeparator();
        jSeparator4 = new javax.swing.JSeparator();
        webclient = new javax.swing.JButton();
        Shutdown = new javax.swing.JButton();
        jTabbedPane1 = new javax.swing.JTabbedPane();
        jMenuBar1 = new javax.swing.JMenuBar();
        jMenu1 = new javax.swing.JMenu();
        jMenuItem2 = new javax.swing.JMenuItem();

        textArea1.setPreferredSize(new java.awt.Dimension(432, 300));
        textArea1.getAccessibleContext().setAccessibleParent(jTabbedPane1);

        jLabel1.setText("Evolution-X™ Programmed by Musicmasta.");
        jLabel1.setVerticalAlignment(javax.swing.SwingConstants.TOP);
        jLabel1.setVerticalTextPosition(javax.swing.SwingConstants.TOP);

        website.setText("Website");
        website.setMaximumSize(new java.awt.Dimension(133, 37));
        website.setPreferredSize(new java.awt.Dimension(133, 37));
        website.setVerticalAlignment(javax.swing.SwingConstants.TOP);
        website.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                websiteActionPerformed(evt);
            }
        });

        youtube.setText("Youtube");
        youtube.setMaximumSize(new java.awt.Dimension(133, 37));
        youtube.setPreferredSize(new java.awt.Dimension(133, 37));
        youtube.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                youtubeActionPerformed(evt);
            }
        });

        forums.setText("Forums");
        forums.setMaximumSize(new java.awt.Dimension(133, 37));
        forums.setPreferredSize(new java.awt.Dimension(133, 37));
        forums.setVerticalTextPosition(javax.swing.SwingConstants.TOP);
        forums.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                forumsActionPerformed(evt);
            }
        });
        forums.getAccessibleContext().setAccessibleName("Forums");

        webclient.setText("Webclient");
        webclient.setMaximumSize(new java.awt.Dimension(133, 37));
        webclient.setName(""); // NOI18N
        webclient.setPreferredSize(new java.awt.Dimension(133, 37));
        webclient.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                webclientActionPerformed(evt);
            }
        });
        webclient.getAccessibleContext().setAccessibleName("");

        Shutdown.setText("Shutdown");
        Shutdown.setMaximumSize(new java.awt.Dimension(221, 81));
        Shutdown.setPreferredSize(new java.awt.Dimension(221, 81));
        Shutdown.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ShutdownActionPerformed(evt);
            }
        });

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Evolution-X 639");
        setBounds(new java.awt.Rectangle(0, 0, 400, 450));
        setPreferredSize(new java.awt.Dimension(450, 420));
        getContentPane().setLayout(new java.awt.FlowLayout());

        try {
            addTabs(jTabbedPane1);
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }
        jTabbedPane1.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        jTabbedPane1.setFocusable(false);
        jTabbedPane1.setOpaque(true);
        getContentPane().add(jTabbedPane1);
        jTabbedPane1.getAccessibleContext().setAccessibleName("");

        jMenu1.setText("File");
        jMenu1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenu1ActionPerformed(evt);
            }
        });

        jMenuItem2.setText("Exit");
        jMenuItem2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenuItem2ActionPerformed(evt);
            }
        });
        jMenu1.add(jMenuItem2);

        jMenuBar1.add(jMenu1);

        setJMenuBar(jMenuBar1);

        pack();
    }// </editor-fold>

    private void jMenu1ActionPerformed(java.awt.event.ActionEvent evt) {                                       
        System.exit(0);
    }                                      

    private void jMenuItem2ActionPerformed(java.awt.event.ActionEvent evt) {                                           
        System.exit(0);
    }                                          

    private void youtubeActionPerformed(java.awt.event.ActionEvent evt) {
        Desktop desktop = Desktop.getDesktop();
        try {
            youtubelink = new URI("http://youtube.com/user/theevolutionx10");
            try {
                desktop.browse(youtubelink);
            } catch (IOException ex) {
                Logger.getLogger(GUIPanel.class.getName()).log(Level.SEVERE, null, ex);
            }
        } catch (URISyntaxException ex) {
            Logger.getLogger(GUIPanel.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    private void websiteActionPerformed(java.awt.event.ActionEvent evt) {
        Desktop desktop = Desktop.getDesktop();
        try {
            websitelink = new URI("http://evolutionx.x10.mx/");
            try {
                desktop.browse(websitelink);
            } catch (IOException ex) {
                Logger.getLogger(GUIPanel.class.getName()).log(Level.SEVERE, null, ex);
            }
        } catch (URISyntaxException ex) {
            Logger.getLogger(GUIPanel.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    private void forumsActionPerformed(java.awt.event.ActionEvent evt) {

        Desktop desktop = Desktop.getDesktop();
        try {
            forumlink = new URI("http://www.evolutionx.x10.mx/forum/index.php");
            try {
                desktop.browse(forumlink);
            } catch (IOException ex) {
                Logger.getLogger(GUIPanel.class.getName()).log(Level.SEVERE, null, ex);
            }
        } catch (URISyntaxException ex) {
            Logger.getLogger(GUIPanel.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    private void webclientActionPerformed(java.awt.event.ActionEvent evt) {
        Desktop desktop = Desktop.getDesktop();
        try {
            webclientlink = new URI("http://evolutionx.x10.mx/play.html");
            try {
                desktop.browse(webclientlink);
            } catch (IOException ex) {
                Logger.getLogger(GUIPanel.class.getName()).log(Level.SEVERE, null, ex);
            }
        } catch (URISyntaxException ex) {
            Logger.getLogger(GUIPanel.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    private void ShutdownActionPerformed(java.awt.event.ActionEvent evt) {
        System.exit(0);
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(GUIPanel.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(GUIPanel.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(GUIPanel.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(GUIPanel.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new GUIPanel().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JButton Shutdown;
    private javax.swing.JButton forums;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JMenu jMenu1;
    private javax.swing.JMenuBar jMenuBar1;
    private javax.swing.JMenuItem jMenuItem2;
    private javax.swing.JSeparator jSeparator1;
    private javax.swing.JSeparator jSeparator2;
    private javax.swing.JSeparator jSeparator3;
    private javax.swing.JSeparator jSeparator4;
    private javax.swing.JTabbedPane jTabbedPane1;
    private java.awt.TextArea textArea1;
    private javax.swing.JButton webclient;
    private javax.swing.JButton website;
    private javax.swing.JButton youtube;
    // End of variables declaration
    private JPanel jPanel = new JPanel();
    private JPanel jPanel1 = new JPanel();
    private JPanel jPanel2 = new JPanel();
    private JPanel jPanel3 = new JPanel();
    private JPanel jPanel4 = new JPanel();
    private JPanel jPanel5 = new JPanel();
    private URI webclientlink, youtubelink, forumlink, websitelink;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T00:19:43.510

您只需在将按钮添加到选项卡之前添加此行：

```
website.setAlignmentX(Component.CENTER_ALIGNMENT);
youtube.setAlignmentX(Component.CENTER_ALIGNMENT);
webclient.setAlignmentX(Component.CENTER_ALIGNMENT);
forums.setAlignmentX(Component.CENTER_ALIGNMENT); 
```

# sql - 混合单词和数字字符串的人性化或自然数排序

> ID：12965463
> 
> 赞同：34
> 
> 时间：2012-10-18T23:51:41.717
> 
> 标签：sql, postgresql, sorting, collation, natural-sort

跟进[Sivaram Chintalapudi](https://stackoverflow.com/users/1176139/sivaram-chintalapudi)提出的[这个问题](https://stackoverflow.com/q/12916212/398670)，我感兴趣的是在 PostgreSQL 中对包含多位数字和单词/字母混合的字符串进行[自然或“人性化”排序](http://www.codinghorror.com/blog/2007/12/sorting-for-humans-natural-sort-order.html)是否可行。没有固定的字符串中的单词和数字的模式，并且字符串中可能有多个多位数字。

我经常看到这样做的唯一地方是在 Mac OS 的 Finder 中，它自然地对包含混合数字和单词的文件名进行排序，将“20”放在“3”之后，而不是之前。

所需的整理顺序将由一种算法产生，该算法将每个字符串在字母数字边界处分成块，然后对每个部分进行排序，将具有正常整理的字母块和数字块视为整数以进行整理。所以：

`'AAA2fred'`将成为`('AAA',2,'fred')`并将`'AAA10bob'`成为`('AAA',10,'bob')`。然后可以根据需要对这些进行排序：

```
regress=# WITH dat AS ( VALUES ('AAA',2,'fred'), ('AAA',10,'bob') )
regress-# SELECT dat FROM dat ORDER BY dat;
     dat      
--------------
 (AAA,2,fred)
 (AAA,10,bob)
(2 rows) 
```

与通常的字符串排序规则相比：

```
regress=# WITH dat AS ( VALUES ('AAA2fred'), ('AAA10bob') )
regress-# SELECT dat FROM dat ORDER BY dat;
    dat     
------------
 (AAA10bob)
 (AAA2fred)
(2 rows) 
```

然而，记录比较方法并没有推广，因为 Pg 不会比较 ROW(..) 构造或不等数量条目的记录。

鉴于[此 SQLFiddle](http://sqlfiddle.com/#!12/c1700/1)中的示例数据，默认的 en_AU.UTF-8 排序规则会产生排序：

```
1A, 10A, 2A, AAA10B, AAA11B, AAA1BB, AAA20B, AAA21B, X10C10, X10C2, X1C1, X1C10, X1C3, X1C30, X1C4, X2C1 
```

但我想要：

```
1A, 2A, 10A, AAA1BB, AAA10B, AAA11B, AAA20B, AAA21B, X1C1, X1C3, X1C4, X1C10, X1C30, X2C1, X10C10, X10C2 
```

我目前正在使用 PostgreSQL 9.1，但只有 9.2 的建议就可以了。我对如何实现有效的字符串拆分方法以及如何在所描述的交替字符串-然后-数字排序规则中比较生成的拆分数据感兴趣。或者，当然，在不需要拆分字符串的完全不同和更好的方法上。

PostgreSQL 似乎不支持比较器函数，否则这可以通过递归比较器和类似函数的东西相当容易地`ORDER USING comparator_fn`完成`comparator(text,text)`。唉，这种语法是虚构的。

**更新：** [关于该主题的博客文章](http://blog.ringerc.id.au/2012/10/natural-sorting-example-of-utility-of.html)。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-19T01:22:27.217

以您的测试数据为基础，但这适用于任意数据。这适用于字符串中的任意数量的元素。

为每个数据库注册一次由一个`text`和一个值组成的复合类型。`integer`我称之为`ai`：

`CREATE TYPE ai AS (a text, i int);`

诀窍是`ai`从列中的每个值形成一个数组。

`regexp_matches()`使用模式`(\D*)(\d*)`和`g`选项为每个字母和数字组合返回一行。加上一个带有两个空字符串的不相关的悬空行`'{"",""}'`过滤或抑制它只会增加成本。将组件中的空字符串 ( `''`)替换为( 因为不能转换为)后，将其聚合到一个数组中。`0``integer``''``integer`

`NULL``STRICT`值首先排序-或者您必须对它们进行特殊处理-或者在@Craig建议的函数中使用整个shebang 。

## Postgres 9.4 或更高版本

```
SELECT data
FROM   alnum
ORDER  BY ARRAY(SELECT ROW(x[1], CASE x[2] WHEN '' THEN '0' ELSE x[2] END)::ai
                FROM regexp_matches(data, '(\D*)(\d*)', 'g') x)
        , data; 
```

*db<>[在这里摆弄](https://dbfiddle.uk/?rdbms=postgres_11&fiddle=0f53af444360677724068636723a69ea)*

## Postgres 9.1（原始答案）

使用 PostgreSQL 9.1.5 进行测试，其`regexp_replace()`行为略有不同。

```
SELECT data
FROM  (
    SELECT ctid, data, regexp_matches(data, '(\D*)(\d*)', 'g') AS x
    FROM   alnum
    ) x
GROUP  BY ctid, data   -- ctid as stand-in for a missing pk
ORDER  BY regexp_replace (left(data, 1), '[0-9]', '0')
        , array_agg(ROW(x[1], CASE x[2] WHEN '' THEN '0' ELSE x[2] END)::ai)
        , data         -- for special case of trailing 0 
```

添加`regexp_replace (left(data, 1), '[1-9]', '0')`为第一`ORDER BY`项以处理前导数字和空字符串。

~~如果可能出现特殊字符`{}()"',`，您必须相应地转义这些字符。~~
@Craig 使用`ROW`表达式的建议可以解决这个问题。

~~顺便说一句，这不会在 sqlfiddle 中执行，但它会在我的数据库集群中执行。JDBC 不适合它。sqlfiddle 抱怨：~~

> ~~方法 org.postgresql.jdbc3.Jdbc3Array.getArrayImpl(long,int,Map) 尚未实现。~~

这已经得到修复：[http ://sqlfiddle.com/#!17/fad6e/1](http://sqlfiddle.com/#!17/fad6e/1)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-18T19:49:11.177

我遇到了同样的问题，我想将解决方案包装在一个函数中，以便我可以轻松地重用它。我创建了以下函数以在 Postgres 中实现“人性化”排序顺序。

```
CREATE OR REPLACE FUNCTION human_sort(text)
  RETURNS text[] AS
$BODY$   
  /* Split the input text into contiguous chunks where no numbers appear,
     and contiguous chunks of only numbers. For the numbers, add leading 
     zeros to 20 digits, so we can use one text array, but sort the 
     numbers as if they were big integers.

       For example, human_sort('Run 12 Miles') gives
            {'Run ', '00000000000000000012', ' Miles'}
  */
  select array_agg(
    case
      when a.match_array[1]::text is not null 
        then a.match_array[1]::text         
      else lpad(a.match_array[2]::text, 20::int, '0'::text)::text                                      
    end::text)
    from (
      select regexp_matches(
        case when $1 = '' then null else $1 end, E'(\\D+)|(\\d+)', 'g'
      ) AS match_array      
    ) AS a  
$BODY$
  LANGUAGE sql IMMUTABLE; 
```

经测试可在 Postgres 8.3.18 和 9.3.5 上运行

*   没有递归，应该比递归解决方案更快
*   可以只在 order by 子句中使用，不必处理主键或 ctid
*   适用于任何选择（甚至不需要 PK 或 ctid）
*   比其他一些解决方案更简单，应该更容易扩展和维护
*   适合在功能索引中使用以提高性能
*   适用于 Postgres v8.3 或更高版本
*   允许在输入中无限数量的文本/数字交替
*   仅使用一个正则表达式，应该比具有多个正则表达式的版本更快
*   超过 20 位的数字按前 20 位排序

这是一个示例用法：

```
select * from (values 
  ('Books 1', 9),
  ('Book 20 Chapter 1', 8),
  ('Book 3 Suffix 1', 7),
  ('Book 3 Chapter 20', 6),
  ('Book 3 Chapter 2', 5),
  ('Book 3 Chapter 1', 4),
  ('Book 1 Chapter 20', 3),
  ('Book 1 Chapter 3', 2),
  ('Book 1 Chapter 1', 1),
  ('', 0),
  (null::text, 0)
) as a(name, sort)
order by human_sort(a.name)
-----------------------------
|name               |  sort |
-----------------------------
|                   |   0   |
|                   |   0   |
|Book 1 Chapter 1   |   1   |
|Book 1 Chapter 3   |   2   |
|Book 1 Chapter 20  |   3   |
|Book 3 Chapter 1   |   4   |
|Book 3 Chapter 2   |   5   |
|Book 3 Chapter 20  |   6   |
|Book 3 Suffix 1    |   7   |
|Book 20 Chapter 1  |   8   |
|Books 1            |   9   |
----------------------------- 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-19T09:52:29.167

较晚添加这个答案是因为看起来其他人都在展开数组或类似的东西。显得过分了。

```
CREATE FUNCTION rr(text,int) RETURNS text AS $$
SELECT regexp_replace(
    regexp_replace($1, '[0-9]+', repeat('0',$2) || '\&', 'g'), 
    '[0-9]*([0-9]{' || $2 || '})', 
    '\1', 
    'g'
)
$$ LANGUAGE sql;

SELECT t,rr(t,9) FROM mixed ORDER BY t;
      t       |             rr              
--------------+-----------------------------
 AAA02free    | AAA000000002free
 AAA10bob     | AAA000000010bob
 AAA2bbb03boo | AAA000000002bbb000000003boo
 AAA2bbb3baa  | AAA000000002bbb000000003baa
 AAA2fred     | AAA000000002fred
(5 rows)

(reverse-i-search)`OD': SELECT crypt('richpass','$2$08$aJ9ko0uKa^C1krIbdValZ.dUH8D0R0dj8mqte0Xw2FjImP5B86ugC');
richardh=> 
richardh=> SELECT t,rr(t,9) FROM mixed ORDER BY rr(t,9);
      t       |             rr              
--------------+-----------------------------
 AAA2bbb3baa  | AAA000000002bbb000000003baa
 AAA2bbb03boo | AAA000000002bbb000000003boo
 AAA2fred     | AAA000000002fred
 AAA02free    | AAA000000002free
 AAA10bob     | AAA000000010bob
(5 rows) 
```

我并不是说两个正则表达式是最有效的方法，但是 rr() 是不可变的（对于固定长度），因此您可以对其进行索引。哦 - 这是 9.1

当然，使用 plperl 您可以一次性评估替换以填充/修剪它。但是，使用 perl，您总是比任何其他方法都多一个选项 (TM) :-)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-19T01:08:06.973

以下函数将字符串拆分为任意长度的 (word,number) 对数组。如果字符串以数字开头，则第一个条目将包含一个`NULL`单词。

```
CREATE TYPE alnumpair AS (wordpart text,numpart integer);

CREATE OR REPLACE FUNCTION regexp_split_numstring_depth_pairs(instr text)
RETURNS alnumpair[] AS $$
WITH x(match) AS (SELECT regexp_matches($1, '(\D*)(\d+)(.*)'))
SELECT
  ARRAY[(CASE WHEN match[1] = '' THEN '0' ELSE match[1] END, match[2])::alnumpair] || (CASE 
  WHEN match[3] = '' THEN
    ARRAY[]::alnumpair[]
  ELSE 
    regexp_split_numstring_depth_pairs(match[3]) 
  END)
FROM x;$$ LANGUAGE 'sql' IMMUTABLE; 
```

允许 PostgreSQL 的复合类型排序发挥作用：

```
SELECT data FROM alnum ORDER BY regexp_split_numstring_depth_pairs(data); 
```

并根据[此 SQLFiddle](http://sqlfiddle.com/#!12/f4243/1)产生预期的结果。我采用 Erwin 替换`0`所有以数字开头的字符串中的空字符串，以便数字首先排序；它比使用更干净`ORDER BY left(data,1), regexp_split_numstring_depth_pairs(data)`。

虽然该函数可能非常慢，但它至少可以在表达式索引中使用。

那很有趣！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-19T02:08:53.633

```
create table dat(val text)
insert into dat ( VALUES ('BBB0adam'), ('AAA10fred'), ('AAA2fred'), ('AAA2bob') );

select 
  array_agg( case when z.x[1] ~ E'\\d' then lpad(z.x[1],10,'0') else z.x[1] end ) alnum_key
from (
  SELECT ctid, regexp_matches(dat.val, E'(\\D+|\\d+)','g') as x
  from dat
) z
group by z.ctid
order by alnum_key;

       alnum_key       
-----------------------
 {AAA,0000000002,bob}
 {AAA,0000000002,fred}
 {AAA,0000000010,fred}
 {BBB,0000000000,adam} 
```

为此工作了将近一个小时，并没有看就发布了——我看到 Erwin 到达了一个类似的地方。遇到与@Clodoaldo 相同的“找不到数据类型文本 [] 的数组类型”的问题。在我想到按 ctid 分组之前，让清理练习不聚合所有行有很多麻烦（这感觉真的像是在作弊——并且在 OP 示例中的伪表上不起作用`WITH dat AS ( VALUES ('AAA2fred'), ('AAA10bob') ) ...`）。如果 array_agg 可以接受产生集合的子选择，那就更好了。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-19T00:14:52.987

我不是 RegEx 专家，但我可以在某种程度上做到这一点。足以产生这个答案。

它将处理内容中最多 2 个数值。我认为 OSX 不会走得更远，如果它甚至可以处理 2。

```
WITH parted AS (
  select data,
         substring(data from '([A-Za-z]+).*') part1,
         substring('a'||data from '[A-Za-z]+([0-9]+).*') part2,
         substring('a'||data from '[A-Za-z]+[0-9]+([A-Za-z]+).*') part3,
         substring('a'||data from '[A-Za-z]+[0-9]+[A-Za-z]+([0-9]+).*') part4
    from alnum
)
  select data
    from parted
order by part1,
         cast(part2 as int),
         part3,
         cast(part4 as int),
         data; 
```

[SQLFiddle](http://sqlfiddle.com/#!12/ace2d/15/0)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-12T18:25:04.403

以下解决方案是其他答案中提出的各种想法的组合，以及[经典解决方案](http://www.rhodiumtoad.org.uk/junk/naturalsort.sql)中的一些想法：

```
create function natsort(s text) returns text immutable language sql as $$
  select string_agg(r[1] || E'\x01' || lpad(r[2], 20, '0'), '')
  from regexp_matches(s, '(\D*)(\d*)', 'g') r;
$$; 
```

这个函数的设计目标是简单和纯字符串操作（没有自定义类型和数组），所以它可以很容易地用作一个插入式解决方案，并且很容易被索引。

*注意：*如果您希望数字多于`20`数字，则必须将`20`函数中硬编码的最大长度替换为合适的更大长度。请注意，这将直接影响结果字符串的长度，因此不要使该值大于所需值。

# ocaml - ocaml 固定点函数

> ID：12965464
> 
> 赞同：-2
> 
> 时间：2012-10-18T23:51:58.160
> 
> 标签：ocaml

所以我正在做一个关于 ocaml 的作业，我对如何编写一个函数 fixpoint 感到困惑，它应该比较一个函数和一个 int x, f(x) 并像 f(f(x) 一样继续递归地比较它们)), f(f(f(x))) 直到两个连续的值相等，然后打印该值。

我们应该使用我们之前编写的 wwhile 函数，它是

```
let rec wwhile (f,b) = match f(b) with
|(integer, boolean) -> if boolean == false then integer 
                       else wwhile (f, integer) 
```

链接可以在这里找到

[http://cseweb.ucsd.edu/classes/fa12/cse130-a/homeworks/hw2.html](http://cseweb.ucsd.edu/classes/fa12/cse130-a/homeworks/hw2.html)

它是我坚持的定点功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:42:59.083

如前所述，您不应该只有一个火柴盒。

之后，考虑以下事项：

*   避免无限循环会很有趣
*   你有两种情况：f(x) = x 和 f(x) != x，你可以在比赛中使用这个测试，但不仅仅是。
*   您可以匹配两个表达式：

    匹配 value1, value2 = value3 与

    | v1case1, v2vase1 -> ... | v1case2, v2case2 -> ...

我的功能有效，但这是你的功课，所以你必须工作一点;-)

# sql-server - 无法打开登录请求的数据库“DigitSite.mdf”。登录失败。用户 'Lenaire-PC\Lenaire' 登录失败

> ID：12965465
> 
> 赞同：3
> 
> 时间：2012-10-18T23:52:46.550
> 
> 标签：sql-server, connection-string

连接字符串：

```
Server=(local);Database=DigitSite.mdf;Integrated Security=true 
```

我尝试了一堆其他连接字符串，但它们有相同的错误，或者甚至没有尝试登录到我提供的数据库。我不确定此时这是 IIS 问题还是 sql 问题或连接字符串问题。

在 IIS7 中，此应用程序池设置为本地系统

我的虚拟目录映射正确

对于路径凭据，我使用了“应用程序用户（直通身份验证）并且我指定了一个用户但都没有工作，在身份验证中我关闭了匿名身份验证并打开了模拟

在 sql 中，我已确保我尝试登录的用户作为“数据库所有者”对该数据库具有适当的安全性。我已经尝试创建一个用户以（sql Server 2008R2）身份登录到 sql，但是在尝试登录该用户时出现错误。有什么建议吗？

这似乎是一个常见问题，但我确实花了 5 个多小时来研究这个问题并搞砸了设置，所以我对如何让它发挥作用有点不知所措。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T05:06:03.137

SQL Server 通常使用逻辑数据库名称，例如，您在服务器实例上创建一个数据库（或者您在 SQL Server Management Studio 中附加一个现有`.mdf`文件并给它一个逻辑数据库名称），而您实际上不必处理文件名等.

所以你的连接字符串应该是这样的：

```
Server=(local);Database=DigitSite;Integrated Security=true 
```

仅使用**逻辑**数据库名称`DigitSite`- 而不是实际文件名（SQL Server 将为您管理文件 - 不要乱用它！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T00:01:31.757

SQL Server 有两个为登录分配权限的地方。一种在服务器级别，一种在数据库级别。您必须在这两个位置都具有适当的权限。

对于这个错误，看起来服务器上的登录很好，但数据库不喜欢登录。您正在使用“Lenaire-PC\Lenaire”的 Windows 登录名，因此请确保该用户是“db_owner”角色的成员。

```
USE [DigiSite]
GO
EXEC sp_addrolemember N'db_owner', N'Lenaire-PC\Lenaire' 
```

如果这不起作用，您将需要提供有关您的设置、SQL 版本等的更多信息。这似乎不寻常。

此外，请确保构建过程或 Visual Studio 魔法不会在您每次构建项目时覆盖您的数据库更改。为了解决这个问题，我将数据库永久附加到服务器。

# jquery - JQuery 选择一个表的第三列，并在这个 td 中添加一个带有特殊类的 span

> ID：12965469
> 
> 赞同：1
> 
> 时间：2012-10-18T23:53:30.260
> 
> 标签：jquery, jquery-selectors, datatables

我正在使用 play 1.2.5 并使用此代码创建我的表

```
 <div class="pdx_std_north_panel">
    <table id="table_id" class="display">
    <thead>
        <th>Property</th>
        <th>Value</th>      
        <th></th>
    </thead>
    <tbody>
        <button id="create-property">Create new property</button>
        #{list items:paras, as:'elem' }
        <tr >
            <td>${elem.sendAllKey}</td>
            <td id="${elem.sendAllKey}" >${elem.sendAllValue}</td>      
            <td><span class="ui-icon ui-icon-trash" id="deleteRow" name="${elem.sendAllKey}"></span></td>                       
        </tr>       
        #{/list}
    </tbody>    
    </table>        

</div> 
```

要添加一行，我使用 Datatables jquery 插件的函数 fnAddData 添加它。这可行，但我的新行的第三列是空的。我需要在这个单元格中添加一个带有特殊类的跨度。否则我的删除按钮不可见。

我想我可以通过使用 jquery 并以某种方式添加跨度来做到这一点。有人可以告诉我如何选择我新添加的行的第三列吗？

另外，如果我选择了这个单元格，我如何添加给定类的跨度？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T23:57:42.003

这是如何选择：

```
$("#table_id td:eq(2)") 
```

这是如何添加：

```
var tableData=$("#table_id td:eq(2)"),
span=$('<span class="specialClass">some text</span>');
tableData.append(span); 
```

对于您的评论问题，这里是一个工作示例[http://jsfiddle.net/umXWW/](http://jsfiddle.net/umXWW/)

html代码：

```
<table>
  <tr>
    <td>abcd1</td>
    <td>abcd2</td>
    <td>abcd3</td>
  </tr>
  <tr>
    <td>aaaa</td>
    <td>bbbb</td>
    <td></td>
  </tr>
</table> 
```

jQuery代码：

```
$('td:contains("aaaa")').css({border:'1px solid red'}).parent().find('td:eq(2)').append($('<span class="specialClass">some text</span>')); 
```

# java - 扩展 Java 的链表供个人使用

> ID：12965470
> 
> 赞同：0
> 
> 时间：2012-10-18T23:53:31.497
> 
> 标签：java, list, linked-list, adt, extend

所以我需要一个链表来存储多个变量，所以我想用我手工制作的Linked List ADT，还想要Java的Linked List的Comparator Sort from collections.sort();

所以我尝试并编辑了我的代码如下：

```
public class HLinkedList <HTreeNode>  extends LinkedList <HTreeNode>
{

public class HTreeNode {

    public HTreeNode left;
    public HTreeNode right;
    public HTreeNode next;
    public int frequency;
    public char value;
    public String code;
    public HTreeNode(int freq, char val, HTreeNode l, HTreeNode r, HTreeNode n, String code) // code is the path taken to this node, how to explain it in code?
    {
        value = val;
        frequency = freq;
        left = l;
        right = r;
        next = n;
        code = ""; // just initialized ,but have to think through logic.
    }
} 
```

但是如果我这样做，而不仅仅是`public class HLinkedList`（这很好，除了我不能使用 `Collections.sort(HList, comparatorA)`，我需要有 Java 的链接列表的一行代码。

无论如何，如果我的代码如上所示，它会返回一个

```
cannot make static reference to non-static type HTreeNode in following line, 
```

在 HTreeNode 下带有红色衬里。如果我不尝试扩展 LinkedList，则不会发生这种情况。

```
public static void insertIntoPosition(HTreeNode node, int position) 
```

也遵循上述错误是一个错误

```
public HLinkedList() //constructor
{
    head = null; //inital value
    nItem = 0;//counter

} 
```

其中代码中的多次出现表明它们不能静态引用非静态头。通常当这样的东西出现时，我点击“使头部静态”，但在这种情况下，当我这样做时，会弹出更多错误，现在指向所有“头部”引用。

我只想知道当我尝试扩展LinkedList但失败时发生了什么，或者我是否应该不扩展但可能做其他事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:41:31.073

另一个问题是您不应该在`HLinkedList`. 它没有做你认为的那样。您指定的是创建一个存储“某物”的类，这不是内部类。相反，您需要将`HTreeNode`类移到外面`HLinkedList`，然后改用它：

```
public class HLinkedList extends LinkedList <HTreeNode> 
```

否则，泛型类型会隐藏内部类，我还可以创建一个`HLinkedList`存储字符串的类型。

```
HLinkedList<String> hll = new HLinkedList<String>();
hll.add("Hello World"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T00:01:27.793

以下方法是*类方法*：

```
 public static void insertIntoPosition(HTreeNode node, int position) 
```

因此，它不需要一个实例`HLinkedList`就可以被调用。

但是，您的类`HTreeNode`是一个*内部类*- 并且需要一个“附加”实例`HLinkedList`才能被实例化。

这两个事实相互矛盾（您不能在此方法中实例化此类型的对象）

您可以将`static`关键字添加到声明`HTreeNode`中以克服此问题：

```
public static class HTreeNode { //note the static keyword usage
    ....
} 
```

# svn - 在 Jenkins 中从 svn 运行 java 程序

> ID：12965481
> 
> 赞同：-1
> 
> 时间：2012-10-18T23:55:20.980
> 
> 标签：svn, jenkins

我在 Jenkins 上有一份工作，负责运行功能测试并生成测试结果。在我得到结果后，我需要运行一个新作业，该作业将从 svn 触发一个 java 程序。该程序在错误跟踪数据库中更新了测试结果。我的问题是如何在 Jenkins 上设置会触发 Java 程序的新工作？我需要某种类型的脚本吗？欢迎所有建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:04:15.867

创建一个从 svn 中签出内容的作业，就像您为进行编译的作业所做的那样。

然后创建Execute *Windows 批处理命令*或*Execute shell* build 步骤，在其中放置运行 java 程序的命令，可能是`java -jar ...`.

# javascript - JS中的计数点

> ID：12965490
> 
> 赞同：1
> 
> 时间：2012-10-18T23:56:31.167
> 
> 标签：javascript

我目前正在尝试用 JS 制作一个简单的骰子游戏，但我被困在计数部分。

我需要掷骰子，并像在扑克中一样数数（对子、双对子、布雷兰、同花等）。

这是一个2人游戏。这是我的代码：

```
 var boulier = [1, 2, 3, 4, 5, 6];
    var done = false;

    for (var i = 1; i < 6; i++)
    {
        var number = Math.floor((Math.random() * 6) + 1);
        tabWinner[i] = number;
        document.getElementById("p1_de_"+i).src = "de_" + number + ".jpg";
        if (i == 5)
        {
            done = true;
        }
    } 
```

它只是在 1 和 6 之间获得 5 个随机数并显示链接的图像。

我需要像扑克一样计算点数，但我不知道如何比较多个数组项......

如果有人可以帮助我计算这些要点，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T11:35:52.543

所以你有一手牌（tabWinner？） - 数字数组

```
var hand = [n1, n2, n3, n4, n5] 
```

您想先对其进行排序，因为使用排序数组，一切都变得容易得多

```
hand.sort() 
```

然后你从大的开始检查特定的组合

```
// five of a kind
hand[0] == hand[4]

// straight (dunno, there may be a shorter way)
hand[4] - 1 == hand[3] && hand[3] - 1 == hand[2] && hand[2] - 1 == hand[1] && hand[1] - 1 == hand[0]

// four of a kind
hand[0] == hand[3] || hand[1] == hand[4]

// full house
hand[0] == hand[1] && hand[3] == hand[4] && (hand[2] == hand[1] || hand[2] == hand[3])

// and so on 
```

在途中分配积分等。

# php - php mt_rand 和谷歌分析

> ID：12965499
> 
> 赞同：1
> 
> 时间：2012-10-18T23:58:06.137
> 
> 标签：php, google-analytics, ab-testing, multivariate-testing

我一直在使用`mt_rand(1,6)`，根据生成的随机整数，将使用不同的 CSS 样式（对于 MVT）。

就 PHP 函数而言，为什么 Analytics 会说*唯一身份*访问者（总共约 5K）存在巨大差异（在某些情况下 > 5%）？我认为这应该更接近于 0。

那么，这更有可能是谷歌端的一些统计数据的结果，而**不是**php的*错*，还是我应该使用更好的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:16:09.910

`mt_rand()`不会平均分配流量/选项。恰恰相反。可能是随机选择的选项将流量传递到：`1,1,6,6,6,6,6,6,3`

您最好的选择是使用“循环”方法，通过您的 MVT（多变量测试）平均分配流量 - 循环：`1,2,3,4,5,6`并重复。

在 PHP 中有很多方法可以做到这一点，但简单地说，伪代码是：

```
Render v1,
Write increment to file/DB
Render v2,
Write increment to file/DB
etc..
Reaching v6, reset to v1 
```

对每个（6 个？）施加大约相等的负载应该会产生更准确的结果，因为每个潜在的选项/版本都将收到相同的结果。这里不需要更复杂的 MVT。

有趣的是，在我之前使用过的地方，我们总是按百分比（而不是随机）分配流量，因为我们可以根据结果做出合格的决定。如果您没有平等地提供每个选项，那么您将无法比较结果！

希望这有助于进一步。

# ruby - 解析 JSON 重定向到初始化点 Ruby

> ID：12965501
> 
> 赞同：1
> 
> 时间：2012-10-18T23:58:16.660
> 
> 标签：ruby, ruby-on-rails-3, json, parsing

使用此代码：

```
result = JSON.parse(mp_data.to_json) 
```

我在结果中保存了以下 JSON：

```
{"payment_methods"=>{}, "init_point"=>"https://www.mercadopago.com/mla/checkout/pay?pref_id=126967384-e4abf2e6-79c5-47c6-8c0d-fce045278336", "collector_id"=>126967384, "back_urls"=>{"failure"=>"http://www.site.com/failure", "pending"=>"https://www.site.com/pending", "success"=>"http://www.site.com/success"}, "sponsor_id"=>nil, "expiration_date_from"=>nil, "additional_info"=>"", "marketplace_fee"=>0, "date_created"=>"2012-10-18T19:46:13.791-04:00", "subscription_plan_id"=>nil, "id"=>"126967384-e4abf2e6-79c5-47c6-8c0d-fce045278336", "expiration_date_to"=>nil, "expires"=>false, "external_reference"=>"OPERATION-ID-14288", "payer"=>{"email"=>"buyer@email.com", "name"=>"John", "surname"=>"Mikel"}, "items"=>[{"id"=>"123", "currency_id"=>"ARS", "title"=>"Example T-Shirt", "picture_url"=>"http://www.site.com/image/123.png", "description"=>"Red XL T-Shirt", "quantity"=>1, "unit_price"=>10.5}], "client_id"=>"963", "marketplace"=>"NONE"} 
```

如何对“init_point”网址进行“redirect_to”调用？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:00:28.590

非常简单，只需访问该哈希键：

```
redirect_to result['init_point'] 
```

`JSON.parse`返回一个常规哈希。所以从技术上讲，说你得到了“结果保存的 JSON”是不准确的。您*解析*了 JSON 并在“结果”处返回了一个哈希值。

但我对此感到困惑：

```
result = JSON.parse(mp_data.to_json) 
```

为什么要将数据转换为 json，然后再返回解析呢？为什么不直接使用`mp_data`，像这样？

```
redirect_to mp_data['init_point'] 
```

# ruby-on-rails - 在我的捆绑安装中，我出错了“gem install pg -v '0.14.1”

> ID：12965508
> 
> 赞同：2
> 
> 时间：2012-10-19T00:00:41.613
> 
> 标签：ruby-on-rails, heroku, pg

免责声明：我刚刚开始学习 Rails，所以我完全承认我是一个菜鸟！话虽这么说，请帮忙！

这是我尝试捆绑安装时抛出的错误：

```
my name :) $ bundle install
Fetching gem metadata from https://rubygems.org/.
Error Bundler::HTTPError during request to dependency API
Fetching full source index from https://rubygems.org/
Using rake (0.9.2.2) 
Using i18n (0.6.1) 
Using multi_json (1.3.6) 
Using activesupport (3.2.8) 
Using builder (3.0.3) 
Using activemodel (3.2.8) 
Using erubis (2.7.0) 
Using journey (1.0.4) 
Using rack (1.4.1) 
Using rack-cache (1.2) 
Using rack-test (0.6.2) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.1.3) 
Using actionpack (3.2.8) 
Using mime-types (1.19) 
Using polyglot (0.3.3) 
Using treetop (1.4.11) 
Using mail (2.4.4) 
Using actionmailer (3.2.8) 
Using arel (3.0.2) 
Using tzinfo (0.3.33) 
Using activerecord (3.2.8) 
Using activeresource (3.2.8) 
Using bundler (1.1.5) 
Using coffee-script-source (1.3.3) 
Using execjs (1.4.0) 
Using coffee-script (2.2.0) 
Using rack-ssl (1.3.2) 
Using json (1.7.5) 
Using rdoc (3.12) 
Using thor (0.16.0) 
Using railties (3.2.8) 
Using coffee-rails (3.2.2) 
Using jquery-rails (2.1.3) 
Installing pg (0.14.1) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb 
checking for pg_config... yes
Using config values from /usr/bin/pg_config
checking for libpq-fe.h... yes
checking for libpq/libpq-fs.h... yes
checking for pg_config_manual.h... yes
checking for PQconnectdb() in -lpq... yes
checking for PQconnectionUsedPassword()... yes
checking for PQisthreadsafe()... yes
checking for PQprepare()... yes
checking for PQexecParams()... yes
checking for PQescapeString()... yes
checking for PQescapeStringConn()... yes
checking for PQescapeLiteral()... yes
checking for PQescapeIdentifier()... yes
checking for PQgetCancel()... yes
checking for lo_create()... yes
checking for pg_encoding_to_char()... yes
checking for pg_char_to_encoding()... yes
checking for PQsetClientEncoding()... yes
checking for PQlibVersion()... yes
checking for PQping()... yes
checking for rb_encdb_alias()... yes
checking for rb_enc_alias()... no
checking for PGRES_COPY_BOTH in libpq-fe.h... no
checking for PGRES_SINGLE_TUPLE in libpq-fe.h... no
checking for struct pgNotify.extra in libpq-fe.h... yes
checking for unistd.h... yes
checking for ruby/st.h... yes
creating extconf.h
creating Makefile

make
compiling pg.c
pg.c: In function ‘Init_pg_ext’:
pg.c:384: error: ‘PQPING_OK’ undeclared (first use in this function)
pg.c:384: error: (Each undeclared identifier is reported only once
pg.c:384: error: for each function it appears in.)
pg.c:386: error: ‘PQPING_REJECT’ undeclared (first use in this function)
pg.c:388: error: ‘PQPING_NO_RESPONSE’ undeclared (first use in this function)
pg.c:390: error: ‘PQPING_NO_ATTEMPT’ undeclared (first use in this function)
make: *** [pg.o] Error 1

Gem files will remain installed in /usr/local/rvm/gems/ruby-1.9.3-p194/gems/pg-0.14.1 for inspection.
Results logged to /usr/local/rvm/gems/ruby-1.9.3-p194/gems/pg-0.14.1/ext/gem_make.out
An error occured while installing pg (0.14.1), and Bundler cannot continue.
Make sure that `gem install pg -v '0.14.1'` succeeds before bundling. 
```

我尝试安装 pg 但它抛出了上面输出的后半部分。当我最初安装 Rails（大约 2 周前）时，我使用了 Rails 安装程序，如果这有什么帮助的话。我的理解是，它为应该安装的东西抛出了一个代码，并且它必须处理 GCC，所以我为 Mountain Lion 安装了那个包 GCC-10.7-v2.pkg 无济于事。

我首先使用 pg 的原因是部署到 Heroku。在我的 Gemfile 中，它看起来像这样：

```
 group :development do
    gem 'sqlite3'
end

group :production do
    gem 'pg'
end 
```

任何帮助是极大的赞赏。谢谢！

我只是尝试在没有生产的情况下进行捆绑安装（似乎已正确安装）后推送到 Heroku，我收到了这个，我认为这只是因为 sqlite gem：

```
Installing sqlite3 (1.3.6) with native extensions
       Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
       /usr/local/bin/ruby extconf.rb
       checking for sqlite3.h... no
       sqlite3.h is missing. Try 'port install sqlite3 +universal'
       or 'yum install sqlite-devel' and check your shared library search path (the
       location where your sqlite3 shared library is located).
       *** extconf.rb failed ***
       Could not create Makefile due to some reason, probably lack of
       necessary libraries and/or headers.  Check the mkmf.log file for more
       details.  You may need configuration options.
       Provided configuration options:
       --with-opt-dir
       --without-opt-dir
       --with-opt-include
       --without-opt-include=${opt-dir}/include
       --with-opt-lib
       --without-opt-lib=${opt-dir}/lib
       --with-make-prog
       --without-make-prog
       --srcdir=.
       --curdir
       --ruby=/usr/local/bin/ruby
       --with-sqlite3-dir
       --without-sqlite3-dir
       --with-sqlite3-include
       --without-sqlite3-include=${sqlite3-dir}/include
       --with-sqlite3-lib
       --without-sqlite3-lib=${sqlite3-dir}/lib
       --enable-local
       --disable-local
       Gem files will remain installed in /tmp/build_24aj2xfn24yk/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6 for inspection.
       Results logged to /tmp/build_24aj2xfn24yk/vendor/bundle/ruby/1.9.1/gems/sqlite3-1.3.6/ext/sqlite3/gem_make.out
       An error occurred while installing sqlite3 (1.3.6), and Bundler cannot continue.
       Make sure that `gem install sqlite3 -v '1.3.6'` succeeds before bundling.
 !
 !     Failed to install gems via Bundler.
 !     
 !     Detected sqlite3 gem which is not supported on Heroku.
 !     http://devcenter.heroku.com/articles/how-do-i-use-sqlite3-for-development
 !
 !     Heroku push rejected, failed to compile Ruby/rails app

To git@heroku.com:secret-citadel-6046.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:secret-citadel-6046.git' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T02:56:47.633

好的，我得到了这个工作。

我从 [https://developer.apple.com/downloads/index.action?name=for%20Xcode%20-#][1] 为 Mountain Lion 安装了 Xcode 开发人员工具

已安装 pg。

运行 rake db：迁移。

捆绑安装。

Heroku 推。

哇！现在很开心：）

# java - Spring webflow booking-faces项目中import.sql的名称是否重要

> ID：12965515
> 
> 赞同：0
> 
> 时间：2012-10-19T00:01:26.497
> 
> 标签：java, spring, hsqldb, spring-webflow

我一直在玩 Spring Webflow 示例项目之一，booking-faces (Spring webflow + JSF + primefaces)

部署应用程序后，我就可以从数据库中搜索酒店，这对我来说非常棒。我想我需要先执行 import.sql 中的 sql 来填充数据库。

然后我搜索了整个项目，没有发现其他配置文件引用的这个import.sql在哪里。

所以我很自然地认为 hsqldb 会查找类路径上的所有 .sql 文件并执行它们以填充内存数据库。

但是，当我将 sql 文件名从**import.sql**更改为**import123.sql**时，数据不会插入到数据库中。即使更改为**Import.sql**也不再有效。

所以我的问题是

1.  这个sql文件的名字重要吗？必须是**import.sql**吗？还有其他选择吗？
2.  如何让 hsqldb 执行任意 sql 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:14:53.670

是的，正如您所发现的，这个名字很重要。Hibernate 在类路径中找到 import.sql 文件，并在创建数据库模式后运行它。据我所知，文件名是不可配置的，必须是import.sql

编辑 - 我在[http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/session-configuration.html找到了文档](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/session-configuration.html)

显然，您可以将 hibernate.hbm2ddl.import_files 设置为以逗号分隔的要执行的 sql 文件列表。

# html - htaccess 带方括号

> ID：12965519
> 
> 赞同：0
> 
> 时间：2012-10-19T00:01:34.817
> 
> 标签：html, regex, .htaccess, mod-rewrite

大家好，我的`.htaccess`文件有一个严重的问题。问题是它似乎不允许在 URL 中使用方括号。

我有这两条线：

`RewriteRule ^mp3/([a-zA-Z0-9-/]+).html$ index.php?dir=$1.`

`RewriteRule ^mp3/([a-zA-Z0-9-/]+)/([a-zA-Z0-9-/]+).html$ index.php?dir=$1/$2 [L]`

这应该允许我有一个类似的 URL：http: [//veqhite.info/mp3/mp3/Mp3-Shqip-2012/dffds.html](http://veqhite.info/mp3/mp3/Mp3-Shqip-2012/dffds.html)

Where`Mp3-Shqip-2012`和`dffds`是单独的目录。但是当我有一个带有方括号 [] 的 URL 时，如下所示： `http://veqhite.info/mp3/mp3/Mp3-Shqip-2012/meda-shqip-[2012].html`

我收到一个未找到的页面`The requested URL /mp3/mp3/Mp3-Shqip-2012/meda-shqip-[2012].html was not found on this server.`

我想我应该修改`.htaccess`重写规则以允许这样做，但我不知道如何......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:09:24.147

试试这个

```
RewriteRule ^mp3/([A-Za-z0-9\-\[\]]+).html$ index.php?dir=$1.

RewriteRule ^mp3/([A-Za-z0-9\-\[\]]+)/([A-Za-z0-9\-\[\]]+).html$ index.php?dir=$1/$2 [L] 
```

希望这会有所帮助

# android - 片段中的 GestureScaleListener

> ID：12965523
> 
> 赞同：3
> 
> 时间：2012-10-19T00:02:09.543
> 
> 标签：android, android-fragments

我正在尝试使用 GestureScaleListener 增加 WebView 中的字体缩放。我的 WebView 在片段内。当我在片段上尝试 GestureScaleListener 时，它不起作用。我的代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    scaleGestureDetector = new ScaleGestureDetector(getActivity(), new simpleOnScaleGestureListener());
}

public boolean onTouchEvent(MotionEvent event) {
        Toast.makeText(getActivity(), "scaling", Toast.LENGTH_SHORT).show();
    scaleGestureDetector.onTouchEvent(event);
            return true;
}
public class simpleOnScaleGestureListener extends SimpleOnScaleGestureListener {

    @Override
    public boolean onScale(ScaleGestureDetector detector) {
        Toast.makeText(getActivity(), ""+detector.getScaleFactor(), Toast.LENGTH_SHORT).show();
        WebView wv = (WebView) getView().findViewById(R.id.chaptercontent);
        WebSettings settings = wv.getSettings();
        settings.setTextZoom((int)(settings.getTextZoom() * detector.getScaleFactor()));
        return true;
    }
} 
```

当我在 Activity 上尝试相同的代码时，它工作正常。我如何让它在片段中工作？

# couchdb - _changes 视图

> ID：12965528
> 
> 赞同：0
> 
> 时间：2012-10-19T00:02:44.077
> 
> 标签：couchdb, couchapp

我有一个沙发应用程序。

在客户端，我正在显示`hot`视图的前 10 个结果：

```
GET /_design/superapp/_view/hot?skip=0&limit=10 
```

--

如何监听该视图的前 10 个结果**的**[_changes](http://guide.couchdb.org/draft/notifications.html)？我试过：

 **```
GET /_changes?feed=continuous&_view=superapp/hot&skip=0&limit=10 
```

但它似乎不起作用：看来我已经获得了所有更新，既不限于该视图也不限于 10 个第一个结果......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:28:01.283

*目前，在 1.1 版本中，*您只能将[视图用作](https://github.com/apache/couchdb/commit/56086f07c425bd272bda5a6609ed9db3758178ba)更改提要的过滤器 - 尚无监听视图更改的功能。[Refuge](http://refuge.io/)是 CouchDB 的分支，具有监听[视图更改](http://lists.refuge.io/refuge/0154.html)的功能，但我不确定它是否能够处理所有视图查询参数，例如 startkey/endkey 等。**

# android - 我应该使用哪种跨平台应用程序构建工具？

> ID：12965529
> 
> 赞同：0
> 
> 时间：2012-10-19T00:03:03.587
> 
> 标签：android, ios, cordova, cross-platform, mosync

我需要构建一个适用于 的应用程序，它`IPhone`涉及发送*SMS*（或打开带有预加载联系人和消息的本机 SMS 服务）、访问联系人和推送通知。`Android``Blackberry`

 *该应用程序易于构建，但我之前从未构建过应用程序，这就是我研究跨平台工具的原因。我目前正在为 UI 使用 Sencha touch，并且我已经研究`Phonegap`了`Mosync`.

`Phonegap`不支持推送通知和发送*短信*。使用 PIM获取联系人`Mosync`很慢，而且我还没有使用 c/c++ 编程。确实有插件，`Phonegap`但它们是不同的插件`Android`，这违背了跨平台应用程序的意义。`iOS``Blackberry`

所以我很困惑如何去构建这个应用程序，对其他工具或一般建议的任何建议都会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T00:32:28.450

> Phonegap 确实有插件，但它们是适用于 Android、iOS 和黑莓的不同插件，这违背了跨平台应用程序的意义

不，不是的。这意味着大约 90% 的应用程序无需修改即可运行，而大约 10% 的应用程序必须针对每个平台进行定制。大多数开发人员都会对此感到满意。

一个完美的 100% 跨平台应用程序是一个很好的目标，就像永远活着是一个很好的目标一样。然而，就像永远活着一样，完美 100% 跨平台的应用程序并不是特别常见。*

# windows - 自动启动和当前目录

> ID：12965531
> 
> 赞同：0
> 
> 时间：2012-10-19T00:03:36.227
> 
> 标签：windows, winapi

我对 WindowsAPI 函数很困惑

> 获取当前目录

当我的应用程序从自动启动 (HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run) 启动时，当前目录总是：%windir%\system32

这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T00:40:42.593

正如预期的那样。默认情况下，应用程序从父进程继承当前目录，大多数系统组件使用system32作为当前目录。

当您通过双击启动应用程序时，Explorer 会费力地显式设置当前目录。当应用程序从 Run 键启动时，它不会。可能没有特别的原因为什么不这样做，只是编写用于处理 Run 键的代码的程序员要么没有考虑它，要么认为它不值得付出努力。

# ruby - 使用纤维进行事件迭代？

> ID：12965534
> 
> 赞同：3
> 
> 时间：2012-10-19T00:03:48.313
> 
> 标签：ruby

作为我的 CS 教育的一部分，我正在构建一个多人 Android yatzy 游戏，客户端通过基于 Ruby/EventMachine 的 TCP 服务器链接在一起，JSON 消息表示来回传递的游戏事件。

但是，我对如何以最佳方式处理游戏回合管理感到不确定。

一个典型的 yatzy 游戏包括 15 轮。我的实现将处理多达 4 个玩家。掷骰子、掷骰子和得分选择等事件被发送到 Ruby 服务器并广播给其他玩家。

目前，我的服务器正在处理游戏回合。每次从客户端接收到新的分数选择时，它都会将分数广播给其他客户端。随后，它会广播一条消息，其中包含下一个掷骰子的玩家的用户 ID。

我希望我的系统能够处理玩家退出而不结束剩余玩家的游戏，这是一个严峻的副作用。我想出了一个解决方案，但我不确定它是否理想。

```
@turnfiber = Fiber.new do
  15.times do
    @players.each do |key, value|
      Fiber.yield value
    end
  end
end 
```

`@turnfiber`是属于代表正在运行的游戏的游戏对象的实例变量。`@players`是一个散列，它使用玩家的唯一 ID 作为键，并使用相应的玩家对象作为值。

`@turnfiber.resume`每次回合结束时（通过分数选择提交）调用以检索下一位掷骰子的玩家并广播他的掷骰许可。这个想法是，如果玩家在第 4 回合离开游戏，他的客户端将发送退出消息，将离开的玩家从`@players`散列中删除，广播他的离开，并且由于玩家不再驻留在`@players`散列中，阻止后续迭代从将骰子控制权交给“死”玩家，从而避免僵局。到目前为止，我的 Android 客户端还不完整，所以我还没有测试过这个理论在实践中是否真的有效。

我选择 Fiber 类的原因是希望能够迭代 15 次`@players`并让他们一次掷一个骰子。Fibers 使这成为可能，因为它们每次`yield`调用都会暂停循环并返回播放器。

我想听听您对这种方法的看法，特别是它有哪些弱点，以及您认为我应该考虑哪些替代方案来解决这个转弯管理问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:49:24.030

Ruby 有[Enumerators](http://www.ruby-doc.org/core-1.9.3/Enumerator.html)，这是一种有限形式的协程。他们是这样工作的：

```
infinite_set = Enumerator.new do |yielder|
  i = 0
  loop do
    yielder.yield(i += 1)
  end
end

puts infinite_set.next
puts infinite_set.next
puts infinite_set.next

# Output:
# 1
# 2
# 3 
```

枚举器允许外部迭代、列表的惰性求值以及函数的多个入口/出口点。如果您深入了解，您将看到 Ruby 使用纤维实现它们。

我对您的原始代码的看法是您想要这样的东西：

```
(1..15).each do |round|
  # round code
  players.each do |player|
    next unless player.active?
    # do network IO with the player object
    # if the player times out or drops, change the player active state
  end
end 
```

我认为添加另一个光纤会增加不必要的复杂性，除非您的服务器同时运行多个游戏，或者需要某种进程内后台队列。在那种情况下，fibers 和 Eventmachine 会很棒。

# objective-c - 自定义表格单元格 iOS 6

> ID：12965535
> 
> 赞同：2
> 
> 时间：2012-10-19T00:03:53.557
> 
> 标签：objective-c, xcode, uitableview, ios6

现在在 iOS 6 中，他们重用了单元格，但我也不想要它，因为它会擦除我在单元格中的数据。细胞都是定制的。他们里面有 UITextFields，但是当我向上滚动时，它会在顶部添加另一个。继承人如何我注册：`[SettingsTable registerClass:[TextFieldTableCell class] forCellReuseIdentifier:@"textFieldCell"];`

并继承代码 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath,

```
TextFieldTableCell *textFieldCell = (TextFieldTableCell *)[tableView dequeueReusableCellWithIdentifier:@"textFieldCell"];
        [textFieldCell textFieldWithLabel];
        textFieldCell.textLabel.text = @"Homepage";
        textFieldCell.textLabel.backgroundColor = [UIColor clearColor];
        textFieldCell.accessoryType = UITableViewCellAccessoryNone;
        [textFieldCell sendSubviewToBack:textFieldCell.textLabel];
        textFieldCell.textField.text = [[NSUserDefaults standardUserDefaults] objectForKey:@"Homepage"];
        textFieldCell.textField.returnKeyType = UIReturnKeyDone;
        [textFieldCell.textField addTarget:self action:@selector(dismissHomepageKeyboard:) forControlEvents:UIControlEventEditingDidEndOnExit]; 
```

这是 UITableViewCell 子类中的代码，

标题：

```
 @interface TextFieldTableCell : UITableViewCell {

    UITextField *textField;

}
@property (nonatomic, retain) UITextField *textField;

-(void)fullTextField;
-(void)textFieldWithLabel;

@end 
```

主要的：

```
`@implementation TextFieldTableCell
@synthesize textField;

-(void)fullTextField {
    self.textField = [[UITextField alloc] initWithFrame:CGRectMake(10, 0, 295, 43)];
    self.textField.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    self.textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    [self.contentView addSubview:self.textField];
}

-(void)textFieldWithLabel {
    self.textField = [[UITextField alloc] initWithFrame:CGRectMake(123, 0, 177, 43)];
    self.textField.autoresizingMask = UIViewAutoresizingFlexibleWidth;
    self.textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    [self.contentView addSubview:self.textField];
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

-(NSString*)reuseIdentifier {
    return @"textFieldCell";
}

@end` 
```

我怎么能修复它只调用一个，因为每次我滚动它都会将它重置为默认值？如果我检查单元格中的某些内容是否为零，例如文本字段“没有重复使用表格单元格的索引路径”，但在 1 个视图控制器中，使用相同的代码只是获取文本字段初始文本的不同位置，它将以这种方式工作都应该

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T04:54:29.637

`dequeueReusableCellWithIdentifier:`请参阅iOS 6的文档：

> 如果您为指定的标识符注册了一个类并且必须创建一个新单元格，则此方法通过调用其 initWithStyle:reuseIdentifier: 方法来初始化该单元格。

您已经注册了一个课程

```
[SettingsTable registerClass:[TextFieldTableCell class] forCellReuseIdentifier:@"textFieldCell"]; 
```

因此`dequeueReusableCellWithIdentifier:`永远不会返回`nil`。

`initWithStyle:reuseIdentifier:`您应该在类的方法中创建表格视图单元格的子视图`TextFieldTableCell`，例如：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        self.textField = [[UITextField alloc] initWithFrame:CGRectMake(10, 0, 295, 43)];
        self.textField.autoresizingMask = UIViewAutoresizingFlexibleWidth;
        self.textField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
        [self.contentView addSubview:self.textField];
    }
    return self;
} 
```

另一种方法是`prepareForReuse`在您的`TextFieldTableCell`类中实现以“清理”单元格内容以供重用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T00:49:33.873

> “我也不想要它，因为它会擦除我在单元格中的数据。”

如果发生这种情况，那么你没有正确地做到这一点。试试这个模式：

```
TextFieldTableCell *textFieldCell = (TextFieldTableCell *)[tableView dequeueReusableCellWithIdentifier:@"textFieldCell"];
if (textFieldCell == nil) {
  //create your cell
  //not sure how your subclass does this, but you need to alloc and init here
}
//set up your cell data
[textFieldCell textFieldWithLabel]; //What does this actually do? It might cause some of your problems
textFieldCell.textLabel.text = @"Homepage";
textFieldCell.textLabel.backgroundColor = [UIColor clearColor];
textFieldCell.accessoryType = UITableViewCellAccessoryNone;
[textFieldCell sendSubviewToBack:textFieldCell.textLabel];
textFieldCell.textField.text = [[NSUserDefaults standardUserDefaults] objectForKey:@"Homepage"];
textFieldCell.textField.returnKeyType = UIReturnKeyDone;
[textFieldCell.textField addTarget:self action:@selector(dismissHomepageKeyboard:) forControlEvents:UIControlEventEditingDidEndOnExit]; 
```

# java - 输出最大值和最小值的程序

> ID：12965536
> 
> 赞同：0
> 
> 时间：2012-10-19T00:03:57.877
> 
> 标签：java, for-loop, io, max, min

//基本上在这个程序中，你必须向用户询问一个终止值，然后是一组数字。当您输入您的终止号码时，程序结束。然后，您输出您输入的数字的最大值和最小值，但不是终止值。我正在为我的 for 语句寻求帮助，因为循环只运行了两次。请只有 IO。

```
public class smalllargest {     
    public static void main(String[] args) {
        System.out.println("Enter any number, then re-enter that number when you wish to be done.");
        int t = IO.readInt();
        System.out.println("Enter your set of numbers");
        int s = IO.readInt();
        int max = s;
        int min = s;
        for(int i = 0; i!=t; i++) {
            int n = IO.readInt();
            if(n > max) {
                max = n ;
            }
            if(n< max) {
                min = n;
            }
            if(n == t){
                break;
            }
            System.out.println("max:");
            IO.outputIntAnswer(max);
            System.out.println("min:");
            IO.outputIntAnswer(min);
        }       
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:14:39.850

用while循环代替for怎么样，

```
while(s!=t) {
 s = IO.readInt();
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T00:15:20.920

你的循环应该是

```
while (s !=t ) 
```

并且 println 应该在循环之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T00:15:39.797

对于我在此代码中看到的内容，第一个插入的数字不用作终止值。

```
for(int i = 0; i!=t; i++) 
```

在退出之前将运行 t 次。

如果您希望 t 成为终止值而不是使用 for 循环，则可以使用 while。

不是 Java 专家，但类似：

```
int t = IO.readInt();    
int s = t + 1; // just to be sure s != t
int min = 999999999;
int max = 0;
System.out.println("Enter your set of numbers");
while (s != t) {
  int s = IO.readInt();
  if (s != t) { // to exclude t from the output
    if (min > s) min = s;
    if (max < s) max = s;
  }
}

System.out.println("max: ");
IO.outputIntAnswer(max);
System.out.println("Min: ");
IO.outputIntAnswer(min); 
```

再说一次，我不是 Java 程序员，所以你应该检查我的代码是否有语法错误，但它应该让你知道如何去做。

# php - PHP DOMXpath 不抓取 URL

> ID：12965541
> 
> 赞同：1
> 
> 时间：2012-10-19T00:04:14.783
> 
> 标签：php, xpath, web-scraping, domxpath

我正在尝试获取这些标签之间的数据：

```
<item><title>White Paper and Sales copy writer by stelladonsai</title>
<link>http://www.freelancer.com/projects/Technical-Writing-Academic-Writing/White-Paper-Sales-copy-writer.html</link>
<description>I need native English speaker to write a piece of white paper and a Sales copy.    *you must have experience.   *you must be native English speaker  *you must have sample to be attached with your cover... (Budget: &#36;30-&#36;250 USD, Jobs: Academic Writing, Technical Writing)</description>
<pubDate>Thu, 18 Oct 2012 17:23:10 -0400</pubDate>
<guid isPermaLink="false">Freelancer.com_project_2578329</guid>
</item> 
```

我使用的 PHP 代码是：

```
$html = new DOMDocument();
@$html->loadHTML($txt);
$xpath = new DOMXPath( $html );

/*Begin Get Titles*/
$bquery = $xpath->query( "//item/title" );
$i=0;
foreach ($bquery as $b){
    $i=$i+1;
    $title[$i] = $b->nodeValue; 
}
/*End Get Titles*/

/*Begin Get Links*/
$bquery = $xpath->query( "//item/link" );
$i=0;
foreach ($bquery as $b){
    $i=$i+1;
    $link[$i] = $b->nodeValue;  
}
/*End Get Links*/ 
```

$txt 来自我用 CURL 抓取的一个 RSS 提要。上面的代码可以很好地获得标题，以及我想要的任何其他字段。但是当我尝试抓取并回显链接字段时，我什么也得不到。（我尝试用其他字段替换 //item/link 并且它们都有效）。

不知道我在这里做错了什么，非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:13:07.170

使用[`loadXML`](http://www.php.net/manual/en/domdocument.loadxml.php)而不是[`loadHTML`](http://www.php.net/manual/en/domdocument.loadhtml.php)加载 XML 而不是 html。

[http://codepad.org/0FYXiwMy](http://codepad.org/0FYXiwMy)

# php - Codeigniter / 电子商务钻取菜单与 Active Record / MySQL

> ID：12965543
> 
> 赞同：2
> 
> 时间：2012-10-19T00:04:46.797
> 
> 标签：php, mysql, ajax, codeigniter, e-commerce

我正在为销售定制毕业生装备的客户创建一个定制电子商务系统。我的产品布局有以下屏幕截图...

![经济形象](../Images/edc04280fffd1bd81df50cd50a63caf7.png)

我在页面右侧有一个表格，上面有最高价格、颜色和材料。当您单击更新选项时，它会通过 jquery 的 ajax 函数将所有数据发送到我的 codeigniter 控制器，我需要在其中提取一个新的产品列表，其中包含他们选择的选项以及他们选择的价格范围内的产品。然后，我将 products 数组传递给 codeigniter 视图，并将视图返回到带有 ajax 成功变量的购物车。

因此，我可以仅使用颜色或仅使用材料来完成此工作，但我的问题是弄清楚如何提取具有我需要的所有材料和选项的一组产品。我想我只是想不出最好的方法。我考虑过使用正确颜色的列表，然后是正确材料的列表，然后是正确定价的列表，然后删除合并数组中的重复项，但这并不是最好的方法.

这个特定的客户只需要“颜色”和“材料”作为选项，因此我的产品表设置为在产品表中包含颜色的 ID 和材料的 ID。然后我有一个颜色和材料表，其中包含 id 和颜色或 id 和材料。

你们对最好的方法有什么想法？我想使用 codeigniters 活动记录来做 mysql 的东西。

# ///// 编辑 /////////////////////////////////

这是我的产品表的图像： ![产品表](../Images/8dadbd79a291120a30f4cfe0146c2770.png)

此外，这是我的 jquery 控制向 codeigniter 控制器提交数据的方式：

```
//Filter Options Ajax 
```

$('#updateOptions').click(function(event) {

```
//Prevent the default href action
event.preventDefault();

var filterOptions = $('#filterForm').serialize();

//Get the site url
var siteUrl = $('#siteUrl').val();

//Roll up the product listing div and show a loader
$('div.products').slideUp( 500, 'easeInExpo' );
$('div.loader').delay(500).fadeIn();

//Get a new list of products and repopulate the information
$.ajax({
     type: "POST",
     url: siteUrl + "category/filterProducts",
     data: { filterOptions: filterOptions },
     success: function(data) {
        $('div.loader').fadeOut(500);
        $('div.products').html(data).delay(500).slideDown( 500, 'easeOutExpo' );
     } 
}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:12:22.427

像这样的东西：

```
if ($min_price = $this->input->get_post('min_price')) {
    $this->db->where('price <', $min_price);
} 
```

然后该网址`prices.php?min_price=100`将添加`WHERE price < 100`到您的查询中。

对于颜色（我使用`|`的是分隔符，但使用适合您的颜色）：

```
if ($colors = $this->input->get_post('colors')) {
    $colors = explode($colors, '|');
    $this->db->where_in('color', $colors);
} 
```

然后 url`prices.php?min_price=100&colors=red|blue`将添加

```
WHERE price < 100 AND color IN ('red', 'blue') 
```

如果您使用数组（复选框）发布颜色，请尝试以下操作：

```
if ($colors = $this->input->post('colors')) {
    $this->db->where_in('color', $colors);
} elseif ($colors = $this->input->get('colors')) {
    $colors = explode($colors, '|');
    $this->db->where_in('color', $colors);
} 
```

这使您可以使用 url 或 POST 添加颜色，具体取决于您的操作方式。

# design-patterns - 感兴趣的区域是一个好的设计模式吗？

> ID：12965544
> 
> 赞同：3
> 
> 时间：2012-10-19T00:04:56.430
> 
> 标签：design-patterns, opencv, language-agnostic

图像处理库 OpenCV 有一个称为 RegionOfInterest 的概念，它导致大多数函数仅在该区域上运行。可以设置、移动、取消设置区域等。

我正在处理类似的应用程序数据，并且正在考虑使用类似的模式，选择一个区域并在该区域内进行分析和处理。

感兴趣的区域是推荐的设计模式吗？我知道它可以提高 OpenCV 的性能，这是一个需要高性能的应用程序。我的应用程序将受益于高性能，但它不像在 OpenCV 中那么重要。

有哪些选择？我正在考虑创建一个解决相同问题的 Region 对象，但例如，可以从同一组数据创建多个区域。这种方法有什么严重的缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:45:44.483

感兴趣区域实际上与您正在处理的对象的性质有关：图像，它们是连续的 2D（或更高维）晶格或定期采样点（像素）。在图像处理中只处理图像的某些部分，即感兴趣的区域非常有用：它可以加快处理速度，如果只保留 ROI，甚至可以节省一些内存。ROI 的一大优势是它们绑定到简单的几何形状，例如矩形，因此非常容易处理。

如果您的数据没有图像这样的结构，您始终可以使用适当的设计模式，例如[Composite](http://en.wikipedia.org/wiki/Composite_pattern)。使用复合模式，您可以设置（子）数据组，并对应用于组中每个单个元素的组执行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:39:44.667

根据您的描述，它听起来像是 Observer 的变体。这些功能仅“观察”系统状态的特定部分，并且仅针对该部分被激活。

所以我的回答是肯定的：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T00:11:33.333

对我来说，“感兴趣的区域”对应于你所谓的“区域”对象的单例。因此，您的决定归结为决定您是否想要/需要/能够负担一个或多个“区域”对象。

线程安全或重入是一个问题吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T00:14:50.607

感兴趣的区域可能不是*设计*模式[http://en.wikipedia.org/wiki/Software_design_pattern](http://en.wikipedia.org/wiki/Software_design_pattern)。*设计*模式（加上或减去一些）是[http://en.wikipedia.org/wiki/Design_Patterns_%28book%29](http://en.wikipedia.org/wiki/Design_Patterns_%28book%29)中的内容。还有很多*其他*类型的模式。见[http://hillside.net/patterns/](http://hillside.net/patterns/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T10:38:41.710

要*确定*投资回报率，关键是执行我们感兴趣的实际算法。

我从事条形码识别工作，鉴于开源库的可用性实际上解决了解码阶段，我经历了在*没有*ROI 的情况下执行任务的困难。

算法被设计为在某些*特定*类型的数据上运行良好，我会说 ROI 识别在实际图像处理中几乎*是必不可少的。*

# php - 首次加载后设置 phpsessid cookie

> ID：12965545
> 
> 赞同：1
> 
> 时间：2012-10-19T00:04:56.220
> 
> 标签：php, cookies, opencart

我在两个具有不同域的前端的 opencart 中制作共享购物车。

我分享了 phpsessid 来实现这一点。

# 主意

我在前端 1 (abc.com) 上挑选一些东西，将其放入购物车，然后转到前端 2 (xyz.com) 进入购物车并在那里付款。

问题是在第二个前端的第一次加载后，我看到空的购物车，我必须重新加载页面才能改变它。我通过我的网络开发人员看到**`phpsessid`**已设置但无法通过`$_COOKIE['PHPSESSID']`变量访问，但在重新加载页面后我很难过它可以工作。是否有一些解决方法可以使它在我第一次加载页面时工作？

现在我已经设置在第一次访问后重新加载页面，但我认为这是非常肮脏的解决方案..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:14:40.837

当您最初在 xyz.com 上加载页面时，尚未设置 cookie。cookie 在第一个有效负载中传递，只有在往返完成后才能读取。

如果您必须依赖 cookie 数据，则需要在初始页面加载时设置 cookie，然后立即重定向到用户看到的购物车前端。cookie 数据将在第一页设置，然后可以在第二页显示值。

如有必要，您可以使用 Javascript 完成此重定向。

# windows - 在每个子文件夹中创建 txt 文件

> ID：12965546
> 
> 赞同：1
> 
> 时间：2012-10-19T00:05:11.687
> 
> 标签：windows, cmd

我正在运行 Windows Server 2003。我有一个包含数百个子文件夹的目录。我想在每个子文件夹中自动创建 txt 文件，该文件将列出该子文件夹中的所有文件。一些文件夹使用特殊/中文字符。我怎样才能用 CMD 做到这一点？或任何其他语言或工具

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:40:10.347

使用批处理：

```
@echo off
chcp 65001 >nul
for /r "C:\your\dir" %%d in (.) do dir /a:-d "%%~fd" > "%%~dpnd\dirlist.txt" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T00:34:45.093

Windows Scripting 包含您需要的`FileSystemObject`一切，但您需要编写一些 VBScript 代码来将它们连接在一起：

1.  创建并分配`FileSystemObject`使用类似`Set fso = CreateObject("Scripting.FileSystemObject")`.

2.  `For Each Folder In fso.GetFolder(...).SubFolders`遍历所有子文件夹。对于深度迭代，使用递归。

3.  还有`Files`列出所有文件的`Folder`.

4.  `CreateTextFile`做它所承诺的，并且还有一个 unicode 选项。

如果您不需要深度迭代，CMD 解决方案可能会更短，但我怀疑您会遇到 Unicode 问题。

# mysql - mysql命令中的多个SELECT

> ID：12965549
> 
> 赞同：0
> 
> 时间：2012-10-19T00:05:25.603
> 
> 标签：mysql, select

我有 MySQL 命令

```
SELECT Name FROM `User_Info` WHERE username="USERNAME" AND password="PASSWORD" 
```

但我想知道如何指定多个 SELECTS。

例如：

```
SELECT Name AND email FROM `User_Info` WHERE username="USERNAME" AND password="PASSWORD" 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:09:32.843

您可以用逗号分隔返回字段。

```
SELECT Name, email 
FROM User_Info WHERE username="USERNAME" 
AND password="PASSWORD" 
```

您可能需要考虑寻找 SQL 教程。对于这类问题，这并不是真正合适的论坛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T00:09:29.477

您可以在[手册](http://dev.mysql.com/doc/refman/5.5/en/select.html)中找到它。

你需要什么

```
SELECT Name, email
FROM `User_Info`
WHERE username="USERNAME"
    AND password="PASSWORD" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T00:10:00.070

您是否尝试过使用逗号？

```
SELECT Name, email FROM `User_Info` WHERE username="USERNAME" AND password="PASSWORD" 
```

如果您对此感到困惑，那么您真的需要投资一个体面的 SQL 参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T00:10:10.913

您只需要用逗号分隔字段。

```
Select name, email, password from user_info where username = "USER" and password = "PASS" 
```

如果您只想选择所有字段，请使用 *

```
Select * from user_info 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T00:12:56.687

您将执行以下操作：

```
SELECT Name, email FROM `User_Info` WHERE username="USERNAME" AND password="PASSWORD" 
```

可以在此处找到有关 SELECT 语句的完整详细信息：http: [//dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)

# android - Android NDK - 在配置更改时强制库重建

> ID：12965550
> 
> 赞同：3
> 
> 时间：2012-10-19T00:05:25.767
> 
> 标签：android, eclipse, android-ndk, makefile, rebuild

**在 Eclipse 中更改构建配置时，有没有办法强制 Android NDK 重新构建特定库？**

我正在使用 Android NDK 构建一个 Android 项目来构建 C++ 库。我正在使用带有 Sequoyah 插件的 Eclipse。一切都已设置并且运行良好。

但是，我遇到了构建配置的问题。您可以通过右键单击项目-> 属性来管理构建配置，然后转到 C/C++ 构建部分。这允许您创建大多数 C++ 库以某种方式依赖的传统调试和发布版本。

这是我的“调试”配置的示例：

```
V=1 NDK_DEBUG=1 NDK_APPLICATION_MK=config/debug/Application.mk 
```

这些运行良好，除了当我在配置之间来回切换时，它不会触发我正在构建的库的重建。这对于像 Visual Studio 这样的东西来说是可以预期的，其中每个构建配置都转储到不同的目录，但在 Eclipse 中，所有内容都会转储到同一个目录。我被迫实际更改相关的源文件以触发重建。所以最终发生的事情是我最终在调试配置中运行（例如），但链接到在 Release 中构建的库。

所以我的问题是：**有没有办法在更改配置时强制 NDK 重建库？**我知道我可以添加 -B 命令，但是每次都会重建*所有**内容*。如果我可以只为*一个特定*的库（在本例中为 libBootInfo）进行重建，我每次都可以重建。

 **这是我的根 Android.mk 文件的样子：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := game$(MY_BUILD_CONFIG_EXTENSION)

# Include files are relative to the NDK root directly (fix by prepending with $(LOCAL_PATH))
# Source files are relative $(LOCAL_PATH)

#LOCAL_LDLIBS    := -landroid

# Add all source file names to be included in lib separated by a whitespace
LOCAL_SRC_FILES :=  ../../../../../../engine/code/main/mainandroid.cpp

# Module dependencies are expressed with LOCAL_STATIC_LIBRARIES and LOCAL_SHARED_LIBRARIES.
# we're building the "main" entry point, so it doesn't depend on much
LOCAL_STATIC_LIBRARIES := libDebug$(MY_BUILD_CONFIG_EXTENSION) libCore$(MY_BUILD_CONFIG_EXTENSION)

include $(BUILD_SHARED_LIBRARY)

$(call import-module,libBdCore)
$(call import-module,libDebug)

##################################################################
## In addition to the core game library, we also build another
## *.so file here: "libBootInfo". This very small library is used
## by Java to find out which version of game to load based on
## the current build configuration.
##

LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := libBootInfo

# Add all source file names to be included in lib separated by a whitespace
# TODO: This path is relative to "android-ndk\build\core" which seems
#       different from the LOCAL_SRC_FILES in game above. It seems like
#       the build process leaves us in a different directory than we started.
#       We make need to look into a way to make sure that this path always 
#       works regardless of what came before it.
#
LOCAL_SRC_FILES := ../../../../engine/code/main/bootinfo.cpp

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T10:06:47.777

NDK 构建始终刷新**.so**中的库`lib/armeabi`。`obj`另一方面，该目录包含用于每个模块的调试和发布构建的单独树。

`Android.mk`不幸的是，如果你做了一些 tge 框架不支持的事情，那么很容易搞砸这个设置。

例如，在您的情况下，cpp 文件 ( `../../../..`) 的长上行路径可能不是一个好主意。我建议`LOCAL_PATH`为每个模块设置，并避免`../`在`LOCAL_SRC_FILES`.

这是我对 Android.mk 的建议更改：

```
ANDROID_MK_PATH := $(call my-dir)
LOCAL_PATH := $(ANDROID_MK_PATH)/../../../engine/code/main

include $(CLEAR_VARS)

LOCAL_MODULE := game$(MY_BUILD_CONFIG_EXTENSION)
LOCAL_SRC_FILES :=  mainandroid.cpp
LOCAL_STATIC_LIBRARIES := libDebug$(MY_BUILD_CONFIG_EXTENSION) libCore$(MY_BUILD_CONFIG_EXTENSION)

include $(BUILD_SHARED_LIBRARY)

##################################################################
## In addition to the core game library, we also build another
## *.so file here: "libBootInfo". This very small library is used
## by Java to find out which version of game to load based on
## the current build configuration.
##

include $(CLEAR_VARS)

LOCAL_MODULE := libBootInfo
LOCAL_SRC_FILES := bootinfo.cpp

include $(BUILD_SHARED_LIBRARY)

$(call import-module,libBdCore)
$(call import-module,libDebug) 
```

**更新**：实际上，在我看来，使用模块名称后缀来分隔构建配置是最好的解决方案。这种方法允许您一次构建和部署多个配置。例如，当我必须针对 Tegra（不带 Neon）或 Snapdragon（带 Neon）优化库时，我会使用它：直到最近，在 Play 商店中放置两个单独的 APK 并不容易，因此我将两者都打包`libv-neon.so`并`libv-tegra.so`进入`lib/armeabi-v7a`.

我不知道你的**BootInfo**库包含什么逻辑，但如果你只部署一个库，你可以避免在 Java 类静态构造函数中使用以下代码的所有麻烦：

```
static {
    boolean loaded = false;
    while (!loaded) {
        try {
            System.loadLibrary("game" + nextExtensionAttempt);
            loaded = true;
        } 
        catch (Exception ex) {
        }
    }
} 
```

另一种方法是覆盖输出目录`./obj`。为此，您可以将以下行添加到`Application.mk`文件中：

```
NDK_APP_OUT := obj$(MY_BUILD_EXTENSION) 
```

这样，所有`.obj`、`.a`和`.so`文件（在它们被*安装*到之前`libs/armeabi`）将被放置在每个配置的单独目录中。更简单的是，您可以在命令行上提供`NDK_OUT`参数，例如`ndk-build`

```
ndk-build V=1 NDK_OUT=obj${MY_BUILD_EXTENSION} 
```

如果您使用 Eclipse 来维护和选择您的配置，这将非常容易。这使得 Java 很容易加载模块，因为它总是具有相同的名称。但是您一次只能部署一个配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:48:08.247

我从来没有能够让这个工作完全正确。最后我只是创建了一个批处理文件，它写出了一个空的源文件。该批处理文件在 Eclipse 中作为构建步骤的一部分执行。然后我将该源文件包含在我的库中。由于每次构建时时间戳都会更改，因此它会欺骗 ndk 每次都重新构建该库。我确保该库保持较小，并且大多数代码都存在于其他库中，从而使构建时间非常短。**

# python - 在 Python 函数中更改字符串

> ID：12965551
> 
> 赞同：0
> 
> 时间：2012-10-19T00:05:47.943
> 
> 标签：python, string, function

所以我有一个基本问题；我让用户调用一个函数，该函数接受一个字符串输入，例如在这种情况下是苹果。所以函数get_view被称为get_view('apples')，它的工作是将apples中的所有字符转换为隐藏字符，例如'apples'-->'^^^^^^'，hello world会变成' ^^^^^ ^^^^^'等等，我的问题是，在我下面的代码中，它确实转换了所有字母和数字等，但它不会在你好世界之间留下空白，它也没有考虑 （'）。如何修改我的代码以使其功能齐全？

代码 ：

```
def get_view(puzzle):

    view = puzzle
    length = len(puzzle)
    for index in range(0,length):
        if ((puzzle[index]) != '' or '-' ):
            view = view[: index] + HIDDEN + view[index+1:] 
```

HIDDEN = '^' （它是一个常数）

谢谢，网站的新手<3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:28:30.980

对于大多数非平凡的字符串操作，我使用像[re.sub()这样的](http://docs.python.org/library/re.html#re.sub)[正则表达式](http://regular-expressions.info/)函数，如下所示：

```
import re
print(re.sub("[a-zA-Z0-9_']", "^", "Hello world, what's up?"))
#                                   ^^^^^ ^^^^^, ^^^^^^ ^^? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T00:08:27.430

你想做这样的事情吗？

```
view = ''.join((HIDDEN if c.isalnum() else c) for c in puzzle) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T00:51:45.700

假设您不想更改空白字符（空格、制表符、换行符），这是使用 for 循环的一种方法：

```
def get_view(puzzle, hide_char='^'):
    view = []
    for c in puzzle:
        if not c.isspace():
            view.append(hide_char)
        else:
            view.append(c)
    return ''.join(view) 
```

或者（更好）是使用列表推导：

```
def get_view(puzzle, hide_char='^'):
    view = [c if c.isspace() else hide_char for c in puzzle]
    return ''.join(view) 
```

要不就：

```
def get_view(puzzle, hide_char='^'):
    return ''.join(c if c.isspace() else hide_char for c in puzzle) 
```

# python - 南模式迁移期间 Django SlugFields 发生变化

> ID：12965553
> 
> 赞同：1
> 
> 时间：2012-10-19T00:05:54.620
> 
> 标签：python, django, django-south

我刚刚做了一个 South schemamigration，它输出了所有 Slug 字段都已更改，但我没有更改 slug 字段的任何代码。

原始的南迁移文件的 slug 字段为：

```
'slug': ('django.db.models.fields.SlugField', [], {'db_index': 'True', 'unique': 'True', 'max_length': '50', 'blank': 'True'}) 
```

但现在，South 的蛞蝓领域如下：

```
'slug': ('django_extensions.db.fields.AutoSlugField', [], {'populate_from': "'name'", 'allow_duplicates': 'False', 'max_length': '50', 'separator': "u'-'", 'blank': 'True', 'unique': 'True', 'overwrite': 'False', 'db_index': 'True'}) 
```

有谁知道为什么会发生这种变化？

# python - 按自引用关系排序

> ID：12965555
> 
> 赞同：1
> 
> 时间：2012-10-19T00:06:02.200
> 
> 标签：python, sqlalchemy

假设以下模型。注意自引用关系“父”。

```
class Widget(object):
    __tablename__ = 'widgets'

    id = Column(Integer, primary_key=True)
    name = Column(String(100), nullable=False)
    parent_id = Column(Integer, ForeignKey('widgets.id'), nullable=True)
    parent = relationship("Widget", remote_side=[id]) 
```

我正在尝试制定一个允许我按“parent.name”排序的查询。在查询上指定连接似乎对生成和执行的 SQL 没有任何影响。

到目前为止，我会更具体地说明我所尝试的内容，但问题是，我已经为此苦苦挣扎了一整天，并且几乎用尽了可用的文档。

关于我应该尝试什么的任何 WAG？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:37:08.960

查看[自引用结构的 SA 文档](http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#self-referential-query-strategies)- 特别是查看`Node`自引用部分开始之前的声明。

我不是这些分层设置的专家（它们可能有点冒险），但看起来你已经建立了与文档中的示例相反的关系。这并不是说您做错了，而是`Node/Parent/Children`文档中的示例似乎映射到您正在尝试做的事情。您*应该*能够以与示例`Widget`相同的方式设置您的，进入您的查询，然后进行排序。`Node``parent`

# oracle - 工作簿无法在 OracleBI Discoverer 中展开

> ID：12965558
> 
> 赞同：3
> 
> 时间：2012-10-19T00:06:57.013
> 
> 标签：oracle, reporting, business-intelligence

我有许多 Oracle Discoverer 工作簿，大多数用户都无法访问这些工作簿。这些工作簿现在只有具有 Discoverer 管理访问权限的用户才能访问。

当普通用户尝试打开工作簿时，他们会收到错误消息：

```
This workbook cannot be expanded.
Unable to open workbook 
```

Metalink 说明建议禁用扇形陷阱检测和禁用多连接路径检测。进行这些更改后，将显示不同的错误：

```
Item "Folder.itemname" used by the workbook is missing. Would you like to continue? 
```

在多次点击 OK 并且错误循环显示报告中的每个项目名称后，我遇到了另一个模棱两可的错误：

```
Item dependency "" not found in the EUL. Attempt to open workbook failed. 
```

我还尝试在全新的用户帐户下访问它们，并将报告保存在新帐户下/重新共享，但没有成功。

我正在使用以下版本：

*   OracleBI Discoverer 10g (10.1.2.3) Oracle 商业智能
*   Discoverer Plus 10g (10.1.2.55.26)
*   最终用户层 - 5.1.1.0.0.0
*   Oracle 数据库 11g 11.1.0.7.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:51:37.680

事实证明，应用程序已撤销分配给 Discoverer 文件夹的角色。

通过进入**OracleBI Discoverer Administrator**并单击**Tools** > **Security** > 选择**Business Area -> User**选项卡已解决此问题

每个业务领域下都有一个角色：

![eul 角色](../Images/c073bc63cf7bcea921956e7d5bbf9282.png "EUL 角色图标") （不要问我那个图标是什么）

授予相关用户识别的每个角色允许他们访问业务领域。例如：

```
GRANT eul_role TO testuser; 
```

或者，您可以授予每个人访问业务领域的权限，而不是使用角色。

# perl - 使用 Test::More 测试 Perl 模块（Perl 中级，第 14 章）

> ID：12965559
> 
> 赞同：10
> 
> 时间：2012-10-19T00:07:05.843
> 
> 标签：perl, testing, module

这是我对 Stack Overflow 的第一个问题。如果我违反了一些规则，请提前道歉。

我一直在阅读 Intermediate Perl，第 2 版的第 14 章，其中讨论了测试 Perl 模块和使用来自 Test::More 的特性。我指的是直接在本书中标题为“添加我们的第一个测试”的部分中发布的代码。

对于某些背景知识，在本章中，`Animal`在同名模块中创建了一个示例类。这个类有一个简单的`speak`方法，如下所示：

```
sub speak {
    my $class = shift;
    print "a $class goes ", $class->sound, "!\n";
} 
```

该`sound`方法是为特定动物返回的简单字符串，例如，Horse 的`sound`方法将是简单`sub sound { "neigh" }`的，它的`speak`方法应输出以下内容：

```
A Horse goes neigh! 
```

我遇到的问题如下：在我在 ./Animal/t/Animal.t 创建的测试代码中，我被指示使用裸块并`Test::More::is`测试该`speak`方法是否有效。测试文件中的代码如下所示：

```
[test code snip]
{
    package Foofle;
    use parent qw(Animal);

    sub sound { 'foof' }
    is( Foofle->speak, 
        "A Foofle goes foof!\n", 
        "An Animal subclass does the right thing"
    );
} 
```

测试失败。我运行了所有的构建命令，但是在运行“构建测试”时，动物测试失败了：

```
Undefined subroutine &Foofle::is called at t/Animal.t line 28. 
```

当我尝试显式使用`Test::More::is`而不仅仅是 plain`is`时，测试仍然失败并显示以下消息：

```
#   Failed test 'An Animal subclass does the right thing'
#   at t/Animal.t line 28.
#          got: '1'
#     expected: 'A Foofle goes foof!
# ' 
```

我的方法似乎完全按照我解释的方式定义。我认为第一个错误是由于裸块导致的范围问题，但不是 100% 肯定。我不确定的第二个错误，因为如果我要创建一个`Foofle`类作为其子类`Animal`并调用`speak`它，我不会得到 1 响应，而是得到预期的输出。

有人可以帮助解决我可能做错的事情吗？对于可能相关的软件版本，我使用的是 perl v5.16、Test::More v0.98 和 Module::Starter v1.58。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T00:20:07.327

您已经非常正确地解释了第一个错误的原因，并正确修复了它（指定正确的包名称）。但是您似乎错过了一个简单的事实：`speak`Animal 类的方法没有`return`这个`a $class goes...`字符串 - 它返回打印它的结果（即`1`）！

看，这个子程序：

```
sub speak {
    my $class = shift;
    print "a $class goes ", $class->sound, "!\n";
} 
```

...没有明确的`return`声明。在这种情况下，返回的是评估子例程的最新调用语句的结果 - 即评估的结果`print something`，实际上[是](http://perldoc.perl.org/functions/print.html) `1`( `true`)。

这就是测试失败的原因。您可以通过测试来修复它`1`（但我想这太微不足道了）或更改方法本身，以便它返回它打印的字符串。例如：

```
sub speak {
    my $class = shift;
    my $statement = "a $class goes " . $class->sound . "!\n";
    print $statement;
    return $statement;
} 
```

......而且，坦率地说，这两种方法看起来都有点......可疑。后者虽然显然更完整，但实际上并不会涵盖此`speak`方法的所有功能：它不仅测试语句是否正确，而且不测试它是否被打印。)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T04:13:22.017

您已经发现您拨打电话的问题在于您拨打电话时`is`使用了错误的包裹。完全指定函数名称，就像`is`通过说导入到命名空间一样

```
use Test::More; 
```

测试包中的某处。

其余问题的答案在于您正在测试的内容和正在做的事情之间的区别。什么`speak` *是*打印，但是当您询问时`is(speak, ...)`，您是在询问`speak`返回的内容，这与打印的内容无关。实际上，它是 的不太有用的返回值`print`。

由于 的目的`speak`是打印一个特定的字符串，一个测试`speak`应该测试它确实打印了一个字符串并且它是正确的字符串。但是，要让测试做到这一点，您需要一些方法来捕获打印的内容。

实际上有几种方法可以做到这一点，从使用`IO::File`强制您指定要打印的文件句柄到猴子修补替换为`print`您的类，但以下技术不需要对系统进行任何修改测试以提高其可测试性。

`select`内置允许您更改`print`打印位置。默认输出通道是`STDOUT`，尽管您通常应该假装您不知道这种事情。幸运的是，您也可以使用它`select`来发现原始文件句柄，尽管您可能应该确保恢复默认文件句柄（毕竟，这是一个全局变量），即使您的测试由于某种原因而终止。所以你需要管理异常。而且您需要一个文件句柄，您可以检查其中的内容，而不必实际打印任何内容；`IO::Scalar`可以在那里提供帮助。

使用这种方法，您最终能够测试原始代码

```
package AnimalTest;
use IO::Scalar;

use Test::More tests => 1;
use Try::Tiny;

{
    package Foofle;
    use base qw(Animal);

    sub sound { 'foof' }
}

{
    my $original_FH = select;
    try {
        my $result;
        select IO::Scalar->new(\$result);

        Foofle->speak();
        is(
            $result, "A Foofle goes foof!\n",
            "An Animal subclass does the right thing"
        );
    } catch {
        die $_;
    } finally {
        select $original_FH;
    };
} 
```

`Try::Tiny`确保您不会在`speak`碰巧导致`Animal`动脉瘤时乱扔垃圾，`print`被重定向以修改标量而不是实际打印到屏幕上，现在测试由于正确的原因而失败，即：字符串的大小写不匹配。

您会注意到其中涉及很多设置；这是因为被测系统的可测试性设置得不是特别好，因此我们必须进行补偿。在我自己的代码中，这不是我会选择的方法，而是选择使原始代码更易于测试。然后对于测试，我经常使用[TMOE](https://metacpan.org/module/Test%3a%3aMockObject%3a%3aExtends)进行猴子补丁（即覆盖测试中的方法之一） 。这种方法看起来更像这样：

[在动物中：]

```
sub speak {
    my $class = shift;
    $class->print("a $class goes ", $class->sound, "!\n");
}

sub print {
    my $class = shift;
    print @_;
} 
```

[之后：]

```
{
    package Foofle;
    use base qw(Animal);

    sub sound { 'foof' }

    sub print {
        my ($self, @text) = @_;

        return join '', @text;
    }

}

is(
    Foofle->speak(), "A Foofle goes foof!\n",
    "An Animal subclass does the right thing"
); 
```

您会注意到这看起来更像您的原始代码。主要区别在于，不是`print`直接调用 built-in ，而是`Animal`调用`$class->print`，而后者又调用 built-in `print`。然后子类`Foofle`覆盖该`print`方法以返回其参数而不是打印它们，这使测试代码可以访问*将*要打印的内容。

这种方法比必须修改全局变量来确定要打印的内容要干净得多，但它确实有两个缺点：它需要修改被测代码以使其更具可测试性，并且它从不实际测试打印是否发生。它只是测试`print`用正确的参数调用的。因此，Animal::print 必须如此微不足道，以至于通过检查显然是正确的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T00:21:25.137

我想象你的代码看起来像：

```
package SomeTest;   # if omitted, it's like saying "package main"
use Test::More;
...
{
    package Foofle;
    is( something, something_else );
} 
```

该`use Test::More`语句会将 的一些`Test::More`函数导出到调用命名空间，在这种情况下是`SomeTest`（或`main`）。这意味着将为符号`main::is`, `main::ok`,`main::done_testing`等定义函数。

在以 开头的块中`package Foofle`，您现在位于`Foofle`名称空间中，因此现在 Perl 将查找与符号 对应的函数`Foofle::is`。它不会找到一个，所以它会抱怨并退出。

一种解决方法是也导入`Test::More`到`Foofle`'s 命名空间。

```
{
    package Foofle;
    use Test::More;
    is( something, something_else );
} 
```

另一种是使用完全限定的方法名称来调用`is`：

```
{
    package Foofle;
    Test::More::is( something, something_else );
} 
```

# iphone - iOS：为什么我的模态视图上有白色的圆角？

> ID：12965560
> 
> 赞同：14
> 
> 时间：2012-10-19T00:07:06.280
> 
> 标签：iphone, ios, ipad

我的 iPad 应用程序中弹出了一个模态视图，由于某种原因，它有白色的圆角。

值得注意的是，我在故事板中构建了这个模型视图，而不是以编程方式。但是，在我的 viewWillAppear 方法中，我正在像这样设置角半径......

```
- (void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];
    self.view.layer.cornerRadius = 6.0f;
} 
```

当我将值设置为 6 以上时，白色角变得可见。如何在不显示这些白色圆角的情况下将值设置得更高？

非常感谢您的智慧！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-02-12T18:15:03.340

您的问题对于您为视图控制器使用的演示文稿类型模棱两可，所以我假设您使用的是表单。解决方法是将superview的背景色设置`[UIColor clearColor]`为防止出现半透明背景：

```
- (void) viewDidAppear:animated
{
    [super viewDidAppear:animated];

    self.view.layer.cornerRadius = 10;
    self.view.layer.masksToBounds = YES;
    self.view.superview.backgroundColor = [UIColor clearColor];
} 
```

设置前`backgroundColor`：

![前](../Images/ad9d43ab9806bd04eb970ee140525872.png)

设置后`backgroundColor`：

![后](../Images/7910186df6066f9af4069898a1059ba3.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-06T09:07:34.380

尝试

```
[self.view superview].layer.cornerRadius = 21.0f;
[self.view superview].layer.masksToBounds = YES; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T15:01:19.993

我意识到这是一个老问题，但它值得一个答案......

在 iPad 上，模态视图（使用 UIModalPresentationFormSheet）有一个默认背景，它是一个带有白色狗耳朵角的白色边框图像。无论如何，如果您的模态视图背景具有圆角或透明角，则默认背景将显示出来。

我花了相当多的时间试图弄清楚如何在没有默认背景显示的情况下显示我的背景视图。诀窍是使超级视图小于您的视图：

```
vc.view.clipsToBounds = NO;
vc.view.superview.bounds = CGRectMake(vc.view.superview.bounds.origin.x, vc.view.superview.bounds.origin.y, 300, 480); 
```

注意： vc 是您呈现的视图。不要使视图太小，否则您的触摸事件将不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T00:42:29.553

这很奇怪。尝试`self.view.layer.masksToBounds = YES;`。不过，您可能会失去视图的阴影。

想一想，那个白色的东西可能来自导航栏下方的视图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T00:30:18.717

我是我的情况，白色的东西隐藏在图层背景颜色的阴影视图中。通过将背景更改为清除颜色来解决：

```
//Monotouch code
View.Superview.Layer.BackgroundColor = UIColor.Red.CGColor; 
```

如果没有去掉白角继续搜索，记得查看View、SuperView和BackgroundViews的一些属性：

*   背景颜色
*   图层的背景颜色
*   图层的边框宽度和颜色
*   标题
*   剪辑到边界

注意：DropShadow 作为 View 的 SuperView 可见于`ViewWillApper`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T02:59:48.343

在应用程序委托中尝试：`[[self window] setBackgroundColor:[UIColor blackColor]];`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-26T15:09:32.897

为了使模态视图透明并使透明发生在视图出现之前将 self.view.superview.backgroundColor = [UIColor clearColor] 从 viewDidAppear 移动到以下内容：

*   (void)viewWillLayoutSubviews{ [super viewWillLayoutSubviews];

    self.view.superview.backgroundColor = [UIColor clearColor]; }

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-22T20:58:29.327

我同意@PeterPurple 的回答，但我花了一些时间才想出真正有效的代码。我的示例显示了一个水平居中的模态视图，但更多地位于屏幕顶部，因此视图不会阻碍键盘。当然，当键盘显示时，我可以将视图向上移动，但我很懒。无论如何，这就是我的做法。

我创建了一个自定义模态序列，并在该序列中覆盖了 perform: 方法，如下所示：

```
@implementation CustomSegue

static const CGFloat TOP_MARGIN = 40;
static const CGFloat SUPER_VIEW_GAP = 10;

- (void)perform {
    UIView *destView = [self.destinationViewController view];

    [self.destinationViewController setModalPresentationStyle:UIModalPresentationPageSheet];
    [self.destinationViewController setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
    [[self sourceViewController] presentViewController:[self destinationViewController] animated:YES completion:nil];

    CGFloat x, y, width, height, yCenter;
    CGSize contentSize = [self.destinationViewController contentSizeForViewInPopover];

    x = destView.superview.frame.origin.x;
    y = destView.superview.frame.origin.y;
    width = contentSize.width;
    height = contentSize.height;
    yCenter = (height / 2.0) + TOP_MARGIN;

    destView.superview.frame = CGRectMake(x + SUPER_VIEW_GAP, y + SUPER_VIEW_GAP, width - (SUPER_VIEW_GAP * 2), height - (SUPER_VIEW_GAP * 2));
    destView.superview.autoresizingMask = UIViewAutoresizingNone;
    destView.superview.autoresizingMask = UIViewAutoresizingFlexibleBottomMargin;
    destView.superview.center = CGPointMake([[self.sourceViewController view] center].x, yCenter);
    destView.frame = CGRectMake(-SUPER_VIEW_GAP, -SUPER_VIEW_GAP, width, height);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-18T17:16:41.183

如果您使用 popoverpresentationcontroller 来显示视图控制器，请尝试将 popoverpresentationcontroller 的 backgroundcolor 设置为 clear

```
 examplePopUpController = exampleViewController.popoverPresentationController!
    examplePopUpController?.backgroundColor = UIColor.clear 
```

# python - 使用 python 无头浏览器通过 https 查询下载文件

> ID：12965562
> 
> 赞同：1
> 
> 时间：2012-10-19T00:07:43.450
> 
> 标签：python, web-scraping, spynner

我尝试在网站上的 python 中进行网络抓取（使用 spynner 和 BeautifulSoup）。在某些时候，我想测试由以下 html 查询触发的 zip 文件下载：

```
https://mywebsite.com/download?from=2011&to=2012 
```

如果在浏览器 (chrome) 中明确使用，这将触发下载具有给定名称的 zip 文件。我无法使用无头浏览器重现此行为。我知道这不是正确的方法，而是使用 spynner 之类的方法：

```
from spynner import Browser
b = Browser()
b.load(webpage,wait_callback=wait_page_load, tries=3)
b.load_jquery(True)
...
output = b.load("https://website.com/download?from=2011&to=2012")
print b.html
>> ... 
```

当然不起作用（没有 zip 文件下载）。最后一个打印语句显示我最终出现在一个错误页面上，并带有一个 java 异常堆栈。

有没有办法

1.  在不使用 spynner 加载机制的情况下正确调用 html 查询？
2.  捕获生成的 zip 文件？
3.  用选定的名称下载它？

谢谢你的帮助。

在使用 java 调试器对 chrome 进行一些测试后，最后一件事是在浏览器中执行此操作时出现以下警告：

```
Resource interpreted as Document but transferred with MIME type application/zip "https://mywebsite.com/download?from=2011&to=2012" 
```

**编辑：**

发现拨打的电话是：

```
https://mywebsite.com/download?from=10%2F18%2F2011&to=10%2F18%2F2012 
```

可以在浏览器中使用，应替换为

```
https://mywebsite.com/download?from=10/18/2011&to=10/18/2012 
```

不能在 python 中使用，因为 URL 编码会映射`%2F`到`%252F`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:12:46.903

我不确定这是否能处理你的情况，但试试看：

```
def download_finished(reply):
    try:
        with open('filename.ext', 'wb') as downloaded_file:
            downloaded_file.write(reply.readAll())
    except Exception:
        pass

    b.manager.finished.disconnect(download_finished)

download_url = spynner.QUrl(url)
request = spynner.QNetworkRequest(download_url)

# requires: from PyQt4.QtCore import QByteArray
request.setRawHeader('Accept', QByteArray(
    'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'))

b.manager.finished.connect(download_finished)
reply = b.manager.get(request)
b.wait_requests(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T00:17:15.510

你犯了一个错误`spynner`。

脚本应如下所示：

```
from spynner import Browser
b = Browser()
b.load(webpage,wait_callback=wait_page_load, tries=3)
b.load_jquery(True)
...
b.load("https://website.com/download?from=2011&to=2012")
# print b.html
f = open("/tmp/foo.zip", "w")
f.write(b.html)
f.close() 
```

参见[spynner 文档](https://github.com/makinacorpus/spynner)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T00:18:13.117

以下代码有效吗？

```
import urllib, os, urlparse

url = YOUR_URL

file = urllib.URLopener()
file.retrieve(url, os.path.basename(urlparse.urlparse(url).path))
print 'downloading:', url 
```

# android - 如何从广播接收器开始意图？

> ID：12965568
> 
> 赞同：0
> 
> 时间：2012-10-19T00:08:30.413
> 
> 标签：android, android-intent

1.  当我尝试通过广播接收器的意图启动活动时，会出现崩溃消息。

2.  如果我从广播中使用 Toast，则会发生崩溃。我看到 toast 消息然后崩溃，然后我从 android 短信应用程序获取消息。

也许它与上下文的问题？

谢谢。

代码：

```
 public class SmsReceiver extends BroadcastReceiver 
    {
        public void onReceive( Context context, Intent intent ) 
    {   
        Bundle extras = intent.getExtras();      
            Intent i=new Intent(context,DisplayActivity.class);
            i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
            context.startActivity(i);
            Log.i("MESSSAGE", messages);
     }
    }

XML:

    <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="org.secure.sms"
      android:versionCode="1"
      android:versionName="0.1" >

    <uses-sdk android:minSdkVersion="8" />

    <uses-permission android:name="android.permission.WRITE_SMS" />
    <uses-permission android:name="android.permission.READ_SMS" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />

    <application android:icon="@drawable/icon" 
                 android:label="@string/app_name" >

        <activity android:name=".SecureMessagesActivity"
                  android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name=".SmsReceiver" android:exported="true" > 
            <intent-filter> 
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            </intent-filter> 
        </receiver>

    </application>

</manifest> 
```

# go - Go：使用自动返回值初始化地图

> ID：12965569
> 
> 赞同：6
> 
> 时间：2012-10-19T00:08:46.357
> 
> 标签：go

如果我`map[string]string`在函数定义中声明了一个返回值，我是否必须在使用它之前创建它，就像我在函数体中声明它一样？[http://play.golang.org/p/iafZbG2ZbY](http://play.golang.org/p/iafZbG2ZbY)

```
package main

import "fmt"

func fill() (a_cool_map map[string]string) {
    // This fixes it: a_cool_map = make(map[string]string)
    a_cool_map["key"] = "value"
    return
}
func main() {
    a_cool_map := fill()
    fmt.Println(a_cool_map)
} 
```

`panic: runtime error: assignment to entry in nil map`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-19T00:48:34.653

> [地图类型](http://golang.org/ref/spec#Map_types)
> 
> 未初始化映射的值为`nil`。
> 
> 使用内置函数创建一个新的空映射值`make`。
> 
> 除了不能添加任何`nil`元素之外，地图等同于空地图。

是的。

# c# - 与 Fluent EF 映射 1 对 1 关系

> ID：12965571
> 
> 赞同：0
> 
> 时间：2012-10-19T00:08:52.783
> 
> 标签：c#, asp.net, entity-framework

我希望这将是相当直截了当的，但我没有太多的运气。我正在使用的数据库有一个用于用户的表和一个用于令牌的表，它们以 1 对 1 的关系相互关联，据我所知，令牌是*principal*。

```
public class Token
{
    public int ID { get; set; }
    public string Location { get; set; }

    public virtual User Contact { get; set; }
}

public class User
{
    public int ID { get; set; }
    public int TokenID { get; set; }
    public string Name { get; set; }

    public virtual Token Token { get; set; }
} 
```

因此，每个用户都有一个仅属于该用户的关联令牌，还有其他与其他对象相关的令牌，我也将以类似的方式映射这些令牌。

到目前为止，我已经尝试了以下以及一些变体，但它没有按预期工作，我不断为用户获取不正确的位置，因为它似乎使用 User.ID 映射到 Token.ID 而不是使用 User.TokenID。

```
modelBuilder.Entity<User>()
    .HasRequired(p => p.Token)
    .WithOptional(p => p.Contact); 
```

我在想我实际上错过了指定用于映射的列？我只是不确定从这里去哪里。

**编辑**以前在映射使用 WithRequired() 扩展方法的关系时，我可以在之后指定 HasForeignKey() 但 WithOptional() 似乎没有此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:32:38.747

我有一个不理想的解决方案，但目前它对我来说工作正常。

我已经更改了模型和映射，如下所述，指定了一对多的关系，即使情况并非如此。

```
public class Token
{
    public int ID { get; set; }
    public string Location { get; set; }

    public virtual List<User> Contact { get; set; }
}

public class User
{
    public int ID { get; set; }
    public int TokenID { get; set; }
    public string Name { get; set; }

    public virtual Token Token { get; set; }
} 
```

然后这个映射。

```
modelBuilder.Entity<User>()
    .HasRequired(u => u.Token)
    .WithMany(t => t.Contact)
    .HasForeignKey(u => u.TokenID); 
```

# drupal - 覆盖drupal的theme_item_list

> ID：12965572
> 
> 赞同：0
> 
> 时间：2012-10-19T00:08:57.323
> 
> 标签：drupal, overriding

我有一个由 drupal(7) 的 item-list 主题钩子呈现的列表，输出类似于：

```
<div class="item-list">
  <ul> 
    <li> ... </li> 
  </ul>
</div> 
```

这不是我需要的结构，有没有办法可以覆盖这个特定的钩子，以便我可以实现我想要的渲染？

概括地说，有没有办法覆盖由drupal核心定义的任何主题挂钩？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:00:19.580

将覆盖放在您的 template.php 文件中，并在完成后重建您的主题注册表：

```
function mytheme_item_list($variables) {
  // Copy code from 
  // http://api.drupal.org/api/drupal/includes!theme.inc/function/theme_item_list/7
  // and make any desired changes
} 
```

# ruby-on-rails - 自定义插值更改时强制回形针重命名文件

> ID：12965573
> 
> 赞同：4
> 
> 时间：2012-10-19T00:08:59.457
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

我使用 Paperclip 来管理 Rails 3 中某个模型的上传图像。这个模型是`belongs_to`另一个模型。我希望我的图像路径能够反映这种关系，所以我为此创建了一个自定义插值。

问题是，我还希望能够编辑`belongs_to`对象的名称，并且我希望 Paperclip 相应地重命名文件。

这是一个简单的例子：

```
class Make < ActiveRecord:Base
  attr_accessible :name

  has_many :models
end

class Model < ActiveRecord:Base
  attr_accessible :img, :make, :name

  belongs_to :make
  has_attached_file :img, :style => { :thumb => "100x100" },
                    :path => "/cars/:make_name/:name/:style/:hash.png",
                    :hash_secret => "blabla"

  Paperclip.interpolates :make_name do |attachment, style|
    attachment.instance.make.name
  end

  Paperclip.interpolates :name do |attachment, style|
    attachment.instance.name
  end
end 
```

所以假设我创建了一个 make`Chevrolet`和一个 Model `Camaro`，我的图像路径将是`/cars/chevrolet/camaro/thumb/my_hash.png`

如果我决定将`Chevrolet`条目名称更改为`Chevy`，Rails 会尝试将图像定位在`/cars/chevy/camaro/thumb/my_hash.png`，但由于图像未重命名，因此找不到。

重命名条目时，如何强制 Paperclip 更新所有图像路径？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T07:22:48.490

更健壮的文件路径可以使用 make id 而不是 make name。即，`/cars/:make_id/:name/:style/:hash.png`当品牌名称更改时将继续工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T11:24:15.493

我找到了几种方法。让我解释。

首先，我认为我们中的许多人都遇到过这个问题，将其设为默认回形针功能是有意义的。

有两种解决方案：

1.  将文件移动/重命名为新逻辑：更干净，使用更少的 CPU（无图像重新处理），但更多的是逐案（取决于插值、本地存储与 S3 存储等）和风险（当有生产服务器时）

    以下是人们决定移动文件时的答案：

    *   [回形针在保存文件后重命名文件](https://stackoverflow.com/questions/2708115/paperclip-renaming-files-after-theyre-saved)
2.  创造一个新的，并摧毁前一个。这是我选择的那个。

因此，首先，您需要在文件逻辑移动时进行拦截。就我而言，我有一个`before_save :generate_slug`方法可以在`slug`用户更改时重新生成用户。这是我应该放置回形针再生逻辑的地方，因为我的`interpolation`contains `slug`。

我唯一需要做的就是添加`http://localhost:3000`到，`user.avatar.url`因为它在本地时返回文件的本地路径，而不是`URI`用于执行`URI.parse`. 我在生产中使用 S3，所以在这种情况下它可以工作。

这是我的`generate_slug`方法：

```
 def generate_slug
    if !(self.slug == self.fullname.parameterize) # Changed
      if self.avatar.exists? # There actually is an avatar to move
        if self.avatar.url.include? "http"
          avatar_url = self.avatar.url
        else # means url is local path ==> needs to add localhost to have a correct URI
          avatar_url = 'http://localhost:3000' + self.avatar.url
        end
        self.avatar.clear # To remove the former file
      end

      self.slug = self.fullname.parameterize

      if !avatar_url.blank?
        self.avatar = URI.parse(avatar_url)
      end
    end
  end 
```

希望它有帮助，希望有一个更清洁的解决方案！

# blackberry - 导航运动与移动焦点

> ID：12965576
> 
> 赞同：1
> 
> 时间：2012-10-19T00:09:32.460
> 
> 标签：blackberry

我是黑莓开发的新手。我想知道这些方法**navigationMovement**和**moveFocus**有什么区别。何时何地可以使用它。对于以下场景，我应该使用哪个来获得在自定义 ListView 上滚动时的突出显示功能：我有一个自定义垂直字段管理器，其中包含自定义 listView（包含 listItem 的列表，其中 on focus 和 unFocus 方法被覆盖以突出显示背景颜色列表项）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T04:16:35.597

navigationMovement 是比 moveFocus 更低级别的 UI 机制。为每个触控板动作调用导航移动。如果导航移动事件没有被当前处于焦点的任何管理器或字段消耗，则该移动将转换为焦点移动，它显示为 moveFocus 事件。

# php - 在wordpress中缩短上传的图片和视频网址

> ID：12965583
> 
> 赞同：0
> 
> 时间：2012-10-19T00:10:10.847
> 
> 标签：php, .htaccess, wordpress

我想向用户显示上传的图片和视频的短网址。如果用户下载图片，他们不会获得图片和视频的实际路径。用户无法知道图片和视频的实际位置。请让我知道如何在 wordpress 中做到这一点？这可能在 htaccess 文件中吗？

例如。 [http://example.com/images/pic.jpg](http://example.com/images/pic.jpg)

我想。

[http://example.com/pic.jpg](http://example.com/pic.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:16:05.393

1.  您必须只公开短 URL。您指向这些图像的所有链接，但看起来像`http://example.com/pic.jpg`表格。

2.  您可以通过检查这样的文件是否存在来在内部重写`http://example.com/pic.jpg`to ，然后在内部重写以便保留浏览器上的 URL，但它们从以下位置获得图像：`/images/pic.jpg``http://example.com/pic.jpg``/images/pic.jpg`

    ```
    RewriteEngine On
    # check that it's an image
    RewriteCond %{REQUEST_URI} \.(jpe?g|png|gif|bmp)$ [NC]
    # check that the resource actually exists in the /images/ directory
    RewriteCond %{DOCUMENT_ROOT}/images%{REQUEST_URI} -f
    # internally rewrite:
    RewriteRule ^ /images%{REQUEST_URI} [L] 
    ```

# vmware - 如何在 NONE intel-vt 机器上使用 micro cloud Foundry vm 映像

> ID：12965587
> 
> 赞同：0
> 
> 时间：2012-10-19T00:11:09.053
> 
> 标签：vmware, cloud-foundry

我的笔记本：HP CQ40（intel i3 处理器），windows 7 64bit。在我的系统上的 vmare 工作站 9 中运行 micro cloud Foundry 时，我会收到“需要 intel vt 支持”之类的错误，我阅读了有关“intel vt”的 VMWARE 官方文档，但在我的 BIOS 中找不到该选项，并且在HP论坛搜索这个，发现它不支持intel vt。

如何在我的系统中使用 Micro cloud Foundry？有没有办法克服这个障碍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:18:55.663

恐怕我认为没有。您是否在 VMWare Workstation 中尝试过另一个 64 位操作系统？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:03:25.927

您可能没有在您的处理器上启用（或可能）虚拟化。没有这个，您将无法运行 64 位虚拟机。虽然32位会很好。因此，请确保您没有为您的 vm 实例分配超过 1.2 GB 的空间。如果可能，请使用单独的 32 位 vmware 工作站或播放器。

# jquery - JQUERY-UI-MAP“未捕获的类型错误：对象 [对象对象] 没有方法 'gmap'”

> ID：12965588
> 
> 赞同：0
> 
> 时间：2012-10-19T00:11:10.447
> 
> 标签：jquery, asp.net-mvc-3, google-maps, asp.net-mvc-4, jquery-ui-map

我正在使用 jquery-ui-map 3.0 RC 来简化使用 json 使用 javascript api v3 在谷歌地图上放置标记的过程。

当我使用 html 文件进行原型设计时，它运行良好。一旦我开始在 MVC4 项目中使用嵌入代码并使用 iis express 进行调试，我会在 Google Chrome 开发人员工具中出现错误“未捕获的类型错误：对象 [对象对象] 没有方法 'gmap'。

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?key=MYBROWSERAPIKEYISHERE&sensor=true"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" src="../../Scripts/jquery.ui.map.js"></script>
<script type="text/javascript" src="../../Scripts/gmap3.js"></script>
<script type="text/javascript">

$(document).ready(function () {
    initialize();
});

function getMarkers() {
    // This URL won't work on your localhost, so you need to change it
    // see http://en.wikipedia.org/wiki/Same_origin_policy
    $.getJSON('../../Data/Australia-WA-Perth.json', function (data) {
        $.each(data.markers, function (i, marker) {
            $('#map_canvas').gmap('addMarker', {
                'position': new google.maps.LatLng(marker.latitude, marker.longitude),
                'bounds': true
            }).click(function () {
                $('#map_canvas').gmap('openInfoWindow', { 'content': marker.content }, this);
            });
        });
    });
}

function initialize() {
    var pointCenter = new google.maps.LatLng(-31.95236980, 115.8571791);

    var myMapOptions = {
        zoom: 17,
        center: pointCenter,
        mapTypeId: google.maps.MapTypeId.ROADMAP  //TERRAIN
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"), myMapOptions);

    google.maps.event.addListenerOnce(map, 'idle', function () {
        getMarkers();
    });

}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T02:24:03.540

您正在包括 gmap3 但正在调用`.gmap(...)`. gmap3 文档中的示例使用`.gmap3(...)`.

此外，我找不到任何证据表明您可以使用标准`google.maps`API 初始化地图，然后使用 gmap3 添加标记等。

据我所知，没有混合这两个 API 的机制，至少不是你尝试的方式。

如果有*像*这样混合这两个 API 的机制，那么似乎有必要以某种方式通知 gmap3`map`返回的变量`new google.maps.Map(...);`。否则，我猜，gmap3 无法解决已经建立的地图。

因此，请尝试重新编写代码以使用 100% 的一种 API 或 100% 的另一种。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T00:37:28.460

问题可能是谷歌地图还没有准备好。您已经使用了 jQuery 就绪函数，但我建议您改用两者的组合。

请张贴小提琴或示例，以便我们进一步调查

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T01:11:26.927

我有同样的问题，发现这是由于多个 jquery 引用。

我的 _layout.cshtml 通过正文部分中的以下行加载 jquery：@Scripts.Render("~/bundles/jquery") @RenderSection("scripts", required: false)

看来这实际上覆盖了我认为的参考。由于最好只在一个地方加载引用，因此我将其从视图中删除，但是随后出现了一个错误，即 jQuery 没有定义。我不得不将 @Scripts.Render 从正文部分（由 nuget 放置在那里）移动到该部分，一切正常。

因此，如果您遇到相同的错误，请查看该页面并执行“查看源代码”。查看是否有多个 jquery 脚本引用。

这个线程给了我线索： [“gmap is not a function”when using Google's map api](https://stackoverflow.com/questions/9397907/gmap-is-not-a-function-when-using-googles-map-api)

# java - OSGI 传递依赖级别

> ID：12965589
> 
> 赞同：2
> 
> 时间：2012-10-19T00:11:28.323
> 
> 标签：java, apache, maven, osgi, bundle

我目前正在尝试捆绑一个 nonOSGI maven 项目。现在，我有类似的东西，

```
 <?xml version="1.0" encoding="UTF-8"?>
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<!-- The Basics -->
<artifactId>Project1</artifactId>
<version>1.0</version>
<packaging>jar</packaging>
<dependencies>
    <dependency>
        <groupId>internal.commons</groupId>
        <artifactId>internalcommons</artifactId>
        <version>1.5</version>
    </dependency>
    <dependency>
        <groupId>jdom</groupId>
        <artifactId>jdom</artifactId>
        <version>1.0</version>
    </dependency>
</dependencies> 
<parent>
    <groupId>internal</groupId>
    <artifactId>jar-project</artifactId>
    <version>1.0</version>
</parent>
<name>Project 1</name>

<build> 
    <directory>${basedir}/bundles</directory>
    <plugins>
        <plugin>
            <artifactId>maven-jar-plugin</artifactId>
            <configuration>
                <archive>
                    <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
                </archive>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <version>2.3.7</version>
            <extensions>true</extensions>
            <configuration>
                <instructions>
                    <Bundle-SymbolicName>${project.groupId}.${project.artifactId}</Bundle-SymbolicName>
                    <Bundle-Name>${project.name}</Bundle-Name>
                    <Bundle-Version>1.0</Bundle-Version>
                    <Import-Package>*;resolution:=optional</Import-Package>
                    <Embed-Dependency>*</Embed-Dependency>
                    <Embed-Transitive>true</Embed-Transitive>
                </instructions>
            </configuration>
        </plugin>       
    </plugins>  
</build> 
```

然而，我的 nonOSGI 包依赖于各种不同的 jar，其中一些 jar 也有依赖关系。当我捆绑 nonOSGI maven 项目时，我只能获取此捆绑包的直接依赖项，当我使用 bundleall 时，我收到与 xml-apis:xml-apis:jar:2.6.2 相关的错误。如果没有其他选项但依赖项太多，我可以创建所有依赖项的捆绑包。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:55:07.463

出色地，

根据发布的堆栈跟踪，[中央](http://search.maven.org/#search%7Cga%7C1%7Ca%3a%22xml-apis%22)`xml-apis:xml-apis:2.6.2`仓库中没有工件。我想应该是[xerces:xmlParserAPIs:2.6.2](http://search.maven.org/#search%7Cga%7C1%7Ca%3a%22xmlParserAPIs%22%20AND%20v%3a%222.6.2%22)。这是更新的 pom，它没有嵌入 deps 的问题：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <!-- The Basics -->
    <groupId>internal</groupId>
    <artifactId>Project1</artifactId>
    <version>1.0</version>
    <packaging>bundle</packaging>

    <name>Project 1</name>

    <dependencies>
        <dependency>
            <groupId>jdom</groupId>
            <artifactId>jdom</artifactId>
            <version>1.0</version>
        </dependency>
        <dependency>
            <groupId>xerces</groupId>
            <artifactId>xmlParserAPIs</artifactId>
            <version>2.6.2</version>
        </dependency>
    </dependencies> 

    <build> 
        <plugins>
            <plugin>
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
                <version>2.3.7</version>
                <extensions>true</extensions>
                <configuration>
                    <instructions>
                        <Bundle-SymbolicName>${project.groupId}.${project.artifactId}</Bundle-SymbolicName>
                        <Bundle-Name>${project.name}</Bundle-Name>
                        <Bundle-Version>1.0</Bundle-Version>
                        <Import-Package>*;resolution:=optional</Import-Package>
                        <Embed-Dependency>*</Embed-Dependency>
                        <Embed-Transitive>true</Embed-Transitive>
                    </instructions>
                </configuration>
            </plugin>       
        </plugins>  
    </build>

</project> 
```

注意使用`packaging=bundle`. 构建只需执行`mvn package`.

尽管 maven-bundle-plugin 有助于嵌入依赖项，但如果可以实现更高的项目模块化，我强烈建议您不要这样做。有预建 osgi bundles 的 repos，例如：[apache servicemix bundles](http://repo2.maven.org/maven2/org/apache/servicemix/bundles/)、[spring enterprise bundle repository](http://ebr.springsource.com/repository/app/bundle)等。

# mod-rewrite - 从友好的 url 隐藏目录

> ID：12965591
> 
> 赞同：0
> 
> 时间：2012-10-19T00:11:35.793
> 
> 标签：mod-rewrite

我将如何使用以下规则删除两个目录？

```
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !=/favicon.ico
RewriteRule ^/subdir/([^/]*)/([^/]*)/([^/]*)/([^/]*)$ /subdir/jadehttp.dll?Www_MySite&Action01=$1&H04=$2&cats=$3&states=$4 [L,NC] 
```

目前友好的 url 成功输出到`http://mysite.com/subdir/landingpage/1/packages/vic`. 我希望它看起来像：有`http://mysite.com/subdir/packages/vic` 什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:16:37.573

你有你现有的规则，这很好：

```
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !=/favicon.ico
RewriteRule ^/subdir/([^/]*)/([^/]*)/([^/]*)/([^/]*)$ /subdir/jadehttp.dll?Www_MySite&Action01=$1&H04=$2&cats=$3&states=$4 [L,NC] 
```

然后在它们*后面*添加这些以说明 URL 中缺少 2 个路径节点：

```
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !=/favicon.ico
RewriteRule ^/subdir/([^/]*)/([^/]*)$ /subdir/jadehttp.dll?Www_MySite&cats=$1&states=$2 [L,NC] 
```

该规则将接受一个 URL 请求，`http://mysite.com/subdir/packages/vic`并在内部将其重写为`/subdir/jadehttp.dll?Www_MySite&cats=packages&states=vic`. Action01**和****H04**参数因此丢失。

> 如果它必须获取 Action01 和 H04 的参数但从新传递的 url 中隐藏，你能告诉我它会是什么样子吗？

您可以嵌入一些默认值，例如：

```
RewriteRule ^/subdir/([^/]*)/([^/]*)$ /subdir/jadehttp.dll?Www_MySite&Action01=FOO&H04=BAR&cats=$1&states=$2 [L,NC] 
```

将`FOO`and替换为`BAR`一些默认值。但是由于 URI 中没有其他内容可供提取，因此您无法从 URI 中获取这些参数。如果它们不是 URI 的一部分，则没有其他东西可以从中提取它们。

# sql-server - Group By 包括非聚合字段

> ID：12965596
> 
> 赞同：3
> 
> 时间：2012-10-19T00:12:37.663
> 
> 标签：sql-server

我有一个包含重复值的表，`field2`并且`field1`有我想在查询中保留的值。

```
field1  field2
 Bob       2
 Bob       2
 Bob       3
 Bob       3 
```

此查询使用 group by 子句：

```
select field2
rom table
group by field2 
```

众所周知，我不能包含`field1`在选择中。我需要包含`field1`在我的输出中。不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:22:44.017

你想保留`field1`什么？最小值？

```
 select field2, min(field1) field1
    from table
group by field2 
```

也许是 MAX 值？

```
 select field2, max(field1) field1, count(field2) total
    from table
group by field2 
```

你必须对它进行聚合，否则它没有意义。考虑以下数据：

```
field1   field2
Bob      2
Jim      2
Tim      2 
```

好的，所以你想要`field1`. `field2`您分组，以在输出中`field2`为您提供单行。`field2`您不能在行中包含所有 3 个 (Bob,Jim,Tim)，这就是为什么您必须对其进行聚合以在逻辑上仅选择一个值（或多个值的聚合，例如数字列的平均值） ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T03:11:59.847

另一种选择是

```
select * 
from table T
join
   (select field2
    from table
    group by field2)A
on T.field2=A.field2 
```

# css - 防止边界底部“泄漏”到侧面边界？

> ID：12965602
> 
> 赞同：3
> 
> 时间：2012-10-19T00:13:13.763
> 
> 标签：css

我有`ul`一个 1px 的左边框和一个 2px 的`li`子边框。问题是我想在每个`li`元素的底部边框之间保留 1px 空间。这是它目前的样子：

![例子](../Images/92cdc7eb73b5a64319846ac21ec0d57e.png)

我希望它看起来如何：

![例子](../Images/467d48a351a44a9547e7ac21a4688512.png)

如您所见，一旦`border-left`结束，`border-bottom`继续并填充 1px 的间隙。有没有办法防止这种情况？

这是相关的HTML：

```
 <div id="mainNav">
          <ul>
            <li>
                <a href="#" class="mainNavLink">Leaderboards</a>
            </li>
            <li>
                <a href="#" class="mainNavLink">Statistics</a>
            </li>
            <li id="mainNavSearch">Search</li>
        </ul>
      </div> 
```

和CSS：

```
#mainNav{
    width: 100%;
    height: 35px;
    background-color: #202020;
    border-bottom: 1px solid #444;
    position: relative;
    overflow: hidden;
}

#mainNav ul{
    width: 960px;
    height: 35px;
    margin: 0 auto 0 auto;
    display: block;
    position: relative;
}

#mainNav ul li{
    float: left;
    position: relative;
    height: 25px;
    padding: 10px;
    padding-top: 8px;
    padding-bottom: 0;
    font-size: 17px;
    border-left: 1px solid #444;
    border-bottom: 2px solid #00a4ff;
    background: -moz-linear-gradient(top,  rgba(24,24,24,0) 60%, rgba(24,24,24,0.38) 90%, rgba(0,0,0,0.5) 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(60%,rgba(24,24,24,0)), color-stop(90%,rgba(24,24,24,0.38)), color-stop(100%,rgba(0,0,0,0.5)));
    background: -webkit-linear-gradient(top,  rgba(24,24,24,0) 60%,rgba(24,24,24,0.38) 90%,rgba(0,0,0,0.5) 100%);
    background: -o-linear-gradient(top,  rgba(24,24,24,0) 60%,rgba(24,24,24,0.38) 90%,rgba(0,0,0,0.5) 100%);
    background: -ms-linear-gradient(top,  rgba(24,24,24,0) 60%,rgba(24,24,24,0.38) 90%,rgba(0,0,0,0.5) 100%);
    background: linear-gradient(to bottom,  rgba(24,24,24,0) 60%,rgba(24,24,24,0.38) 90%,rgba(0,0,0,0.5) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00181818', endColorstr='#80000000',GradientType=0 );
}

#mainNavSearch{
    border-right: 1px solid #444;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:20:46.810

为内部`a`元素设置样式

现场演示可以在这里看到：http: [//jsbin.com/welcome/36341](http://jsbin.com/welcome/36341)

```
* { margin: 0; padding: 0; }

#mainNav{
    width: 100%;
    height: 35px;
    background-color: #202020;
    border-bottom: 1px solid #444;
    overflow: hidden;
}

#mainNav ul{
   height: 35px;
  list-style: none;
}

#mainNav ul li{
    float: left;
    height: 35px;
    padding-bottom: 0;
    font-size: 17px;
    border-right:1px solid #444;
    background: -moz-linear-gradient(top,  rgba(24,24,24,0) 60%, rgba(24,24,24,0.38) 90%, rgba(0,0,0,0.5) 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(60%,rgba(24,24,24,0)), color-stop(90%,rgba(24,24,24,0.38)), color-stop(100%,rgba(0,0,0,0.5)));
    background: -webkit-linear-gradient(top,  rgba(24,24,24,0) 60%,rgba(24,24,24,0.38) 90%,rgba(0,0,0,0.5) 100%);
    background: -o-linear-gradient(top,  rgba(24,24,24,0) 60%,rgba(24,24,24,0.38) 90%,rgba(0,0,0,0.5) 100%);
    background: -ms-linear-gradient(top,  rgba(24,24,24,0) 60%,rgba(24,24,24,0.38) 90%,rgba(0,0,0,0.5) 100%);
    background: linear-gradient(to bottom,  rgba(24,24,24,0) 60%,rgba(24,24,24,0.38) 90%,rgba(0,0,0,0.5) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00181818', endColorstr='#80000000',GradientType=0 );
}

#mainNav a {
  height: 33px;
  display: block;
  line-height: 33px;
  border-bottom: 2px solid #00a4ff;
  color: #fff;
  padding-left: 10px; padding-right: 10px;
  text-decoration: none;
  font-weight: bold;
  font-family: sans-serif;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T00:39:59.473

由于我找不到防止边框泄漏的方法以及我不希望`a`成为整个`li`元素的大小这一事实，我不得不插入一个额外`div`的并将`border-bottom`and`padding-left/right`样式应用于它：

HTML：

```
 <div id="mainNav">
        <ul>
            <li>
                <div>
                    <a href="#" class="mainNavLink">Leaderboards</a>
                </div>
            </li>
            <li>
                <div>
                    <a href="#" class="mainNavLink">Statistics</a>
                </div>
            </li>
            <li id="mainNavSearch">Search</li> <!-- I did not include a div here as I plan on changing this to a search bar later -->
        </ul>
    </div> 
```

CSS：

```
#mainNav{
    width: 100%;
    height: 35px;
    background-color: #202020;
    border-bottom: 1px solid #444;
    position: relative;
    overflow: hidden;
}

#mainNav ul{
    width: 960px;
    height: 35px;
    margin: 0 auto 0 auto;
    display: block;
    position: relative;
}

#mainNav ul li{
    float: left;
    position: relative;
    height: 27px;
    font-size: 17px;
    border-left: 1px solid #444;
    padding-top: 8px;
}
#mainNav div{
    display: block;
    position: relative;
    height: 25px;
    padding: 0 10px 0 10px;
    border-bottom: 2px solid #00a4ff;
    background: -moz-linear-gradient(top,  rgba(24,24,24,0) 60%, rgba(24,24,24,0.38) 90%, rgba(0,0,0,0.5) 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(60%,rgba(24,24,24,0)), color-stop(90%,rgba(24,24,24,0.38)), color-stop(100%,rgba(0,0,0,0.5)));
    background: -webkit-linear-gradient(top,  rgba(24,24,24,0) 60%,rgba(24,24,24,0.38) 90%,rgba(0,0,0,0.5) 100%);
    background: -o-linear-gradient(top,  rgba(24,24,24,0) 60%,rgba(24,24,24,0.38) 90%,rgba(0,0,0,0.5) 100%);
    background: -ms-linear-gradient(top,  rgba(24,24,24,0) 60%,rgba(24,24,24,0.38) 90%,rgba(0,0,0,0.5) 100%);
    background: linear-gradient(to bottom,  rgba(24,24,24,0) 60%,rgba(24,24,24,0.38) 90%,rgba(0,0,0,0.5) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00181818', endColorstr='#80000000',GradientType=0 );
}
#mainNavSearch{
    border-right: 1px solid #444;
    padding: 0 10px 0 10px;
} 
```

输出：

![输出](../Images/2d673613b6de49b5f1e9441475a97844.png)

* * *

如果有人知道如何在没有额外`div`且不将样式应用于`a`标签的情况下执行此操作，请分享。

# if-statement - 你如何构建你的 if 语句，你认为两者中哪一个更容易阅读？

> ID：12965603
> 
> 赞同：0
> 
> 时间：2012-10-19T00:13:13.280
> 
> 标签：if-statement, structure

你如何构建你的 if 语句，你认为两者中哪一个更容易阅读？如：

```
if(condition){
    //... 
} 
```

相比

```
if(condition)
{
   //...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:14:23.317

我使用第一种方法。它更易于阅读，在某些情况下，您可以省略 {}（如果 if 语句后面有一行）。

Visual Studio 可以设置为自动执行此操作，我确信其他平台也可以设置为格式化代码。

# .net - 为什么多核 JIT 在 .net 4.5 中没有“默认开启”？

> ID：12965606
> 
> 赞同：17
> 
> 时间：2012-10-19T00:13:29.480
> 
> 标签：.net, multicore, jit

在 .net 4.5 中有一个名为 Multicore JIT 的新功能

[http://blogs.msdn.com/b/dotnet/archive/2012/10/18/an-easy-solution-for-improving-app-launch-performance.aspx](http://blogs.msdn.com/b/dotnet/archive/2012/10/18/an-easy-solution-for-improving-app-launch-performance.aspx)

它可以提高应用程序启动时间的性能。

但是，您需要在代码中启用它。

那么为什么默认不开启呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-19T06:02:39.820

我写了你链接到的博客文章，万斯在 30:15 左右在嵌入式视频中解决了你的问题。

Silverlight 5 和 ASP.NET 应用程序默认启用多核 JIT，但桌面应用程序不启用。主要原因是 CLR 需要一个地方来保存和加载包含 JIT 配置文件信息的文件。

Silverlight 5 和 ASP.NET 应用程序是托管应用程序，并且主机提供了一个存储配置文件信息的好地方。我们还知道，所有这些应用程序都有类似的启动路径，并且能够利用 MCJ。对于桌面应用程序，我们没有放置配置文件的好位置，并且并非所有应用程序都会在进程启动时受益于 MCJ。对于桌面应用程序，我们选择提供一组 API，如果它有利于您的应用程序，可用于“选择加入”。

感谢您阅读这篇文章，如果您看到使用该功能的任何结果，我很想听听！

# php - Perl和PHP之间的解码/编码openssl aes cbc字符串

> ID：12965607
> 
> 赞同：3
> 
> 时间：2012-10-19T00:13:54.120
> 
> 标签：php, perl, openssl, aes, cbc-mode

我正在用 PHP 编写一些服务器代码，并且我有一个用 Perl 编写的离线进程，它们需要通过加密字符串进行通信。在 PHP 中我一直在使用：

```
$encrypted_string = openssl_encrypt($my_string, "aes-128-cbc", "my_password", true, "1234567812345678");

```

我基本上想使用 Perl 实现完全相同的字符串输出。任何有关我将如何做到这一点的帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T19:33:02.020

我想通了，现在可以重现在 Perl 和 PHP 中加密字符串的相同输出：

珀尔：

```
使用地穴::CBC；
使用 MIME::Base64；

我的 $cipher = Crypt::CBC->new(
    {
        'key' => 'length16length16',
        '密码' => 'Crypt::OpenSSL::AES',
        'iv' => '1234567812345678',
        'literal_key' => 1,
        '标题' => '无'，
        键大小 => 128 / 8
    }
);

打印 encode_base64($cipher->encrypt($my_string), "");

```

PHP：

```
echo openssl_encrypt($my_string, "aes-128-cbc", "length16length16", true, "1234567812345678");

```

# macos - Sublime Text 2 Mac Markdown 预览键绑定

> ID：12965615
> 
> 赞同：2
> 
> 时间：2012-10-19T00:14:50.383
> 
> 标签：macos, markdown, key-bindings, sublimetext

我在 Sublime Text 2 中设置简单的键绑定时遇到了一些困难，我只使用了几个小时。

我设法安装了[Markdown Preview](https://github.com/revolunet/sublimetext-markdown-preview)并学习了如何在一个简单的 markdown 文本文件上调用它。我的下一个愿望是设置一个简单的键绑定来调出浏览器预览，而不必通过命令面板，我觉得这有点麻烦。

上面链接中的说明相当清楚，我设法按照指示修改了我的用户设置，使它们看起来像这样：

```
// Settings in here override those in "Default/Preferences.sublime-settings", and
// are overridden in turn by file type specific settings.
{
    "keys": ["alt+m"], 
        "command": "markdown_preview", 
        "args": 
            {
                "target": "browser"
            }
} 
```

但是，由于某种原因，ALT-m 没有显示预览。相反，希腊字母 mu 被插入到我的文本文件中。

我认为这是因为 Mac 上的 Option 键存在一些特殊性，所以我尝试尝试将其绑定到另一个键，如“f7”，但这似乎也不起作用。

谁能想到我可能忽略的涉及 MacOS X 上 Sublime Text 2 的键绑定的任何问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:39:31.630

用户键绑定在`.sublime-keymap`文件中定义，我认为您在`.sublime-settings file`. 只需将其放入正确的文件中，它就可以工作。我在 Windows 上，所以我不确定它是否与 Mac 相同，但我可以从 Preferences 菜单（Key Bindings - User）访问该文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T09:05:57.413

我想添加一些东西，sublime text2 和 os x 10.8

检查下图，进入 sublime text 2 的菜单， `Sublime Text 2`-> `Preference`-> `Key Binds Default`- 然后在文件中根据需要进行编辑，

![在此处输入图像描述](../Images/026ae676ffb1fd1c212c5a1af1f5eb21.png)

# r - R中的成对交互矩阵

> ID：12965618
> 
> 赞同：7
> 
> 时间：2012-10-19T00:14:55.170
> 
> 标签：r, matrix

我正在尝试计算 R 中的成对矩阵，该矩阵计算个体与其他个体交互的次数（因此该矩阵将包括与个体数量相对应的 N 行和列）。我有一个数据框，在不同的列中列出了“参与者”和“合作伙伴”。

```
nn <- data.frame(actors=c('DOL','DOL','DOL','DOL','DOL','NOR','NOR','NOR','NIN','JOJ'),partners=c('JOJ','JOJ','NOR','NOR','NIN','NIN','DOL','JOJ','NOR','NOR')) 
```

数据使得交互的方向无关紧要，因此每个单元格应计算单个 X 作用于 Y 的次数加上 Y 作用于 X 的次数。理想情况下，上面的数据框应该给出一个看起来像这样的矩阵：

```
 DOL JOJ NOR NIN
DOL    0   2   3   1
JOJ    2   0   2   0
NOR    3   2   0   2
NIN    1   0   2   0 
```

我开始编写一个循环来循环遍历我的数据集中的每个人，并计算他/她从 actor->partner 和 partner->actor 的交互。我确信这会起作用，但并不理想，因为完整的数据集非常大。有没有更好的办法？

* * *

更新：感谢您的回复！两种解决方案都很好用！我正在发布我对 Josh 建议的实施，这非常有帮助。

```
x <- with(nn, table(actors, partners))
y <- t(x)

# unique individuals
u <- unique(c(rownames(x),colnames(x)))

m <- matrix(0,ncol=length(u),nrow=length(u),dimnames=list(u,u))

i1 <- as.matrix(expand.grid(rownames(x),colnames(x)))
i2 <- as.matrix(expand.grid(rownames(y),colnames(y)))

m[i1] <- x[i1]
m[i2] <- m[i2] + y[i2] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T01:21:13.620

Base R`table()`将为您提供您所追求的：

```
x <- with(nn, table(actors, partners))
x + t(x)
#       partners
# actors DOL JOJ NIN NOR
#    DOL   0   2   1   3
#    JOJ   2   0   0   2
#    NIN   1   0   0   2
#    NOR   3   2   2   0 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-19T00:28:12.067

在图论领域，您正在寻找的是*邻接矩阵*：

```
library(igraph)
g <- graph.edgelist(as.matrix(nn), directed = FALSE)
get.adjacency(g)
#     DOL JOJ NOR NIN
# DOL   0   2   3   1
# JOJ   2   0   2   0
# NOR   3   2   0   2
# NIN   1   0   2   0 
```

# c# - ASP.net删除SQL表C#中的索引

> ID：12965622
> 
> 赞同：0
> 
> 时间：2012-10-19T00:15:32.117
> 
> 标签：c#, asp.net, sql-server-2012, delete-row

我有一个名为学生的表，我想删除一个学生信息，但首先我需要他/她在从表中删除他/她之前重新输入他/她的登录详细信息（有点像停用您的帐户）

```
protected void btnLDelete_Click(object sender, EventArgs e)
{
    {
        string strcon = "Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\VC_temps.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";
        SqlConnection con = new SqlConnection(strcon);

        SqlCommand com = new SqlCommand("CheckUser", con);
        com.CommandType = CommandType.StoredProcedure;
        SqlParameter p1 = new SqlParameter("StudCode", TextBox1.Text);
        SqlParameter p2 = new SqlParameter("Pword", TextBox2.Text);
        com.Parameters.Add(p1);
        com.Parameters.Add(p2);
        con.Open();
        SqlDataReader rd = com.ExecuteReader();
        if (rd.HasRows)
        {

            string command = @"DELETE FROM Student WHERE StudCode= StudCode";
            SqlCommand com2 = new SqlCommand(command, con);
            SqlParameter q1 = new SqlParameter("StudCode", Session["StudCode"]);
            com.Parameters.Add(q1);
            Response.Redirect("Default.aspx");
        }

        else
        {
            Labelinfo.Text = "Invalid username or password.";

        }
    }
} 
```

我也尝试使用 SP，但结果相同，我没有收到错误消息，但只要单击删除，我就会被重定向到我的登录页面，似乎我仍然可以登录

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:19:55.993

在您的`if`语句中，您没有执行`DELETE`，只是设置了一个新命令，`com2`.

然后将参数添加到旧的`com`命令对象。

您需要决定是要使用旧命令，还是继续使用新的 com2，然后将参数添加到正确的命令中。然后您必须执行该命令。

我也很确定您的变量`StudCode`需要`@`在前面。完成后看起来会`if`像那时一样

```
rd.Close();

string command = @"DELETE FROM Student WHERE StudCode = @StudCode";
SqlCommand com2 = new SqlCommand(command, con);
SqlParameter q1 = new SqlParameter("@StudCode", Session["StudCode"]);
com2.Parameters.Add(q1); // Also com2 now
com2.ExecuteNonQuery(); // Added to run the query
Response.Redirect("Default.aspx"); 
```

* * *

根据返回的数据，最初调用以查找特定值而不是存储过程是否为您返回一行`CheckUser`可能是一个更好的主意。`ExecuteScalar``CheckUser`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T00:35:22.613

如果有人对未来感兴趣，我会在一些帮助下修复它

```
 protected void btnDelete_Click(object sender, EventArgs e)
{
    {
        string strcon = "Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\VC_temps.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";
        SqlConnection con = new SqlConnection(strcon);

        SqlCommand com = new SqlCommand("CheckUser", con);
        com.CommandType = CommandType.StoredProcedure;
        SqlParameter p1 = new SqlParameter("StudCode", TextBox1.Text);
        SqlParameter p2 = new SqlParameter("Pword", TextBox2.Text);
        com.Parameters.Add(p1);
        com.Parameters.Add(p2);
        con.Open();
        SqlDataReader rd = com.ExecuteReader();
        if (rd.HasRows)
        {
            con.Close();
            con.Open();
            string command = @"DELETE FROM Student WHERE StudCode = @StudCode";
            SqlCommand com2 = new SqlCommand(command, con);
            SqlParameter q1 = new SqlParameter("@StudCode", Session["StudCode"]);
            com2.Parameters.Add(q1); // Also com2 now
            com2.ExecuteNonQuery(); // Added to run the query
            Response.Redirect("Default.aspx");
        }

        else
        {
            Labelinfo.Text = "Invalid username or password.";

        }
    }

} 
```

# javascript - PreviewImage 使用 JavaScript 和 HTML5

> ID：12965623
> 
> 赞同：2
> 
> 时间：2012-10-19T00:15:33.907
> 
> 标签：javascript, html, css, filereader

现在，我正在研究一个多媒体项目。任务是创建一个众筹平台。我的问题是“创建项目”页面上的本地预览图像。我使用论坛搜索并遇到了这个：

[http://www.xul.fr/en/html5/filereader.php](http://www.xul.fr/en/html5/filereader.php)

我复制了代码并将其放入我的 HTML/JS 文件中，如下所示：

到目前为止，这是我的 HTML 代码：

```
<div class="header">
ICH BIN DER HEADER, HIER KOMMT HEAD-KRAM REIN
</div> <!-- HEADER GESCHLOSSEN -->

<!-- -------------------------1------------------------------- -->

<div class="slideshow">

    <div id="titelbild">

        <input type="file" id="getimage">
        <fieldset><legend>Your image here</legend>
        <div id="imgstore"></div>
        </fieldset> 

    </div> <!-- TITELBILD GESCHLOSSEN -->

    <div id="projektinfos">

        <input type="text" id="titel" maxlength="60" value="Titel" onFocus="if(this.value=='Titel') this.value='';" onBlur="if(this.value=='')this.value='Titel';">

        <select id="rewardfarbe">
            <option selected>Kategorie wählen   </option>
            <option>Rot         </option>
            <option>Grün        </option>
            <option>Blau        </option>
        </select>

        <input type="text" class="textbox" maxlength="60" value="Betrag" onFocus="if(this.value=='Betrag') this.value='';" onBlur="if(this.value=='')this.value='Betrag';">
        <input type="text" class="textbox" maxlength="60" value="Ort" onFocus="if(this.value=='Ort') this.value='';" onBlur="if(this.value=='')this.value='Ort';">  

    </div> <!-- PROJEKTINFOS GESCHLOSSEN -->

</div> <!-- SLIDESHOW GESCHLOSSEN -->

<!-- -------------------------2------------------------------- -->

<div id="details">
</div>

<!-- -------------------------3------------------------------- -->

<div class="footer">
</div> 
```

还有我的 JavaScript 代码：

```
<script>
function imageHandler(e2) 
{ 
  var store = document.getElementById('imgstore');
  store.innerHTML='<img src="' + e2.target.result +'">';
}

function loadimage(e1)
{
  var filename = e1.target.files[0]; 
  var fr = new FileReader();
  fr.onload = imageHandler;  
  fr.readAsDataURL(filename); 
}

window.onload=function()
{
  var x = document.getElementById("filebrowsed");
  x.addEventListener('change', readfile, false);
  var y = document.getElementById("getimage");
  y.addEventListener('change', loadimage, false);
}
</script> 
```

还有我的 CSS 代码：

```
.body {

    width: 1280px;
    height: 2000px;
    background-image:url(images/fabric_patterns_2_source_SMALL.jpg); 

} 

/* -------------------------0------------------------------- */

.header {

    margin: auto;
    width: 900px;
    height: 80px;
    background-color:#FFBD91;

}

/* -------------------------1------------------------------- */

.slideshow {

    margin: auto;
    width: 1024px;
    height: 300px;
    background-color: #ACB6FF;

}

#titelbild {

    float: left;
    width: 400px;
    height: 300px;
    background-image:url(images/bildhinzufuegen.gif);

}

#titelbildhinzufuegen {

    width: 400px;
    height: 300px;
    opacity: 0;

}

#projektinfos {

    float: right;
    width: 624px;
    height: 300px;
    background-color:#B6FF98;

}

/* -------------------------2------------------------------- */

#details {

    margin: auto;
    width: 900px;
    height: 1500px;
    background-color: #C0E3FF;

}

#titel {

    font-family: Helvetica,Verdana,Arial,sans-serif;
    font-size: 18px;
    margin-left: 112px;
    margin-top: 20px;
    width: 400px;
    height: 50px;

}

#rewardfarbe {
    width: 200px;
    height: 50px;
    margin-top: 20px;
    margin-left: 312px;

}

.textbox {

    font-family: Helvetica,Verdana,Arial,sans-serif;
    font-size: 18px;
    margin-left: 312px;
    margin-top: 20px;
    width: 200px;
    height: 50px;

}

/* -------------------------3------------------------------- */

.footer {

    margin: auto;
    width: 900px;
    height: 80px;
    background-color: #B0BAFF;

} 
```

就像我说的，我直接从帖子开头的链接中复制了代码，但它不起作用……我不明白。有没有可能，这必须在真正的服务器上运行，因为现在，我正在使用 XAMPP 测试我所有的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:40:24.230

您的代码不完整，因此无法正常工作。这不是一个jsfiddle问题。[您可以在此 HTML5rocks 页面](http://www.html5rocks.com/en/tutorials/file/dndfiles/)中找到有关您尝试执行的操作的良好文档。实际上代码非常相似。

您也可以在另一个类似的问题中查看[这个不错的回放。](https://stackoverflow.com/a/4459419/743203)它有一个工作示例。

# ruby-on-rails - 如何将表单构建器中的 f.submit 分解为 rails 3 中的部分布局？

> ID：12965624
> 
> 赞同：0
> 
> 时间：2012-10-19T00:15:34.967
> 
> 标签：ruby-on-rails, ruby-on-rails-3, partial-views, renderpartial

我正在构建一个多步骤表单，我想在多个视图中重用按钮代码。这是我想分解成部分布局的代码：

```
<div class="actions">
<%= link_to "Back", previous_wizard_path, :class => 'btn btn-large' %>
<%= f.submit "Next", class: "btn btn-large btn-primary" %>
</div> 
```

我已将此代码复制到名为“_action_buttons.html.erb”的新部分布局中。

我正在尝试使用以下代码呈现此部分：

```
<%= render 'multi_form/action_buttons' %> 
```

但是，当我尝试运行它时，由于 f.submit，我收到以下错误：

```
undefined local variable or method `f' for #<#<Class:0x007fbae16c1dc8>:0x007fbae13b33e8> 
```

提取的源代码（在第 3 行附近）：

```
1: <div class="actions">
2:     <%= link_to "Back", previous_wizard_path, :class => 'btn btn-large' %>
3:     <%= f.submit "Next", class: "btn btn-large btn-primary" %>
4:   </div> 
```

**如何修改我的渲染调用，以免发生此错误？**我意识到这可能是一个常见问题；帮助一个菜鸟！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:50:30.970

1.  您不应该破坏表单标签，因为它可能会导致一些意外行为，并且会破坏代码的可读性。
2.  如果您真的想遵循这种方法，一种技术是您可以将表单变量传递到您的模板中，您可以尝试执行以下操作：

    ```
    <%= render :partial => 'multi_form/action_buttons', :locals => {:f => f} %> 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:55:59.613

您可以使用不带关键字的更简洁的形式`:partial`。

检查这个问题[Rails：对将局部变量传递给局部变量的语法感到困惑](https://stackoverflow.com/questions/4402556/rails-confused-about-syntax-for-passing-locals-to-partials)

# class - 在 CoffeeScript 中，在类级别声明的实例属性可以在其定义中引用另一个实例属性吗？

> ID：12965633
> 
> 赞同：3
> 
> 时间：2012-10-19T00:16:15.873
> 
> 标签：class, syntax, properties, coffeescript

在 CoffeeScript 中，如果我在类构造函数中定义一个实例属性，该属性可以在其定义中引用其他实例属性，例如：

```
class Foo
    constructor: (data) ->

        @One = 1

        @Two = @One + 1 
```

但是在类级别声明的实例属性呢？以下不起作用：

```
class Foo

    One: 1

    Two: @One + 1 
```

在这种情况下，@ 符号指的是“类”本身，而不是实例。同样，简单地删除 @ 也不起作用。

有没有办法让在类级别声明的一个实例属性可以在其定义中引用另一个实例属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T00:50:27.083

当你这样说时：

```
class Foo
    one: 1 
```

您正在设置`one`'`Foo`原型，因此您只需查看`@`' 原型即可返回到位置`one`：

```
class Foo
    one: 1
    two: @::one + 1 
```

[演示](http://coffeescript.org/#try:class%20C%0A%20%20%20%20a%3A%201%0A%20%20%20%20b%3A%20%40%3A%3Aa%20%2B%201%0Ac%20%3D%20new%20C%0Aconsole.log(c.a%2C%20c.b)%0A)

请注意，这甚至适用于子类，因此您可以这样做：

```
class Pancakes extends Foo
    three: @::two + 1 
```

你会得到预期的三个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T00:49:41.887

是的，您可以为此使用辅助变量：

```
class Foo
  uno = 1
  One: uno
  Two: uno + 1 
```

（变量也可以被称为`One`，我只是用另一个名字来区分它和属性）

但是请记住，这些属性将在 Foo 的原型中，而不是在 Foo“类”本身中。这是生成的 JS：

```
var Foo;

Foo = (function() {
  var uno;

  function Foo() {}

  uno = 1;

  Foo.prototype.One = uno;

  Foo.prototype.Two = uno + 1;

  return Foo;

})(); 
```

如果您希望它们成为类属性，您可以在类级别使用 @：

```
class Foo
  @One = 1
  @Two: @One + 1 
```

这样你就可以访问那些 as`Foo.One`和`Foo.Two`.

# vb.net - vb.net图片上传/存储

> ID：12965635
> 
> 赞同：1
> 
> 时间：2012-10-19T00:16:22.520
> 
> 标签：vb.net, login, ftp

你好，在任何人回复“搜索它在那里”之前，我已经搜索过了，我已经用谷歌搜索了，所以这里是：

除了使用 FTP 之外，有没有更简单的方法可以将图像上传到网站？我在想也许可以使用 MySQL（连接到我的虚拟主机 MySQL？）但不确定我是否有一个带有上传脚本的网站，你可以登录等

如果我可以说从 vb 登录一个帐户，然后通过该帐户上传图像，那真是太好了

我已经尝试了几件事，但没有成功，我可以尝试任何建议或链接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:20:09.880

我不太确定，但既然你说你有一个上传脚本，只是一个想法。难道你不能（假设上传脚本在 PHP 中），将文件名请求为 $_REQUEST，并将其传递给文件类型的输入。然后使用 webrequest 访问 PHP 脚本？我不确定这是否可行，但这只是一个想法。希望这个想法对你有帮助:)

# javascript - 更改 src 属性

> ID：12965638
> 
> 赞同：2
> 
> 时间：2012-10-19T00:16:37.737
> 
> 标签：javascript, html

我想更改嵌入对象的 src 属性。我有：

```
<embed class="flash "id="flash" src="swf/pano.swf?panoSrc=images/a.jpg" 
                     allowFullScreen="true" 
                     width="1280" height="640" quality="high" 
                     pluginspage="http://www.macromedia.com/go/getflashplayer" 
                     type="application/x-shockwave-flash" bgcolor="#DDDDDD"/> 
```

我试过了

```
function change() 
{
   document.getElementById("flash").setAttribute('src', 'swf/pano.swf?panoSrc=b.jpg');
} 
```

但它在 Chrome 中不起作用，“仅”在 Firefox、IE 和 Opera 中起作用。我该如何修复它（使其在 Chrome 中工作）？我做错什么了吗？

编辑：这是整个 HTML 文件

```
<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title></title>
    <script>
        function change() {
            document.getElementById("flash").setAttribute('src', 'swf/pano.swf?panoSrc=a.jpg');
        }
    </script>

</head>
<body>

    <embed class="flash" id="flash" src="swf/pano.swf?panoSrc=images/sau.jpg" allowFullScreen="true" 
                     width="1280" height="640" quality="high" 
                     pluginspage="http://www.macromedia.com/go/getflashplayer" 
                     type="application/x-shockwave-flash" bgcolor="#DDDDDD"/>

     <script>
         change();
     </script>

</body> 
```

页面链接：[http ://chin.comli.com/test.html](http://chin.comli.com/test.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T00:22:50.457

您需要调用您的函数。

`change();`

工作演示：http: [//jsfiddle.net/LUfUx/](http://jsfiddle.net/LUfUx/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T00:26:57.253

~~将您的脚本调用移动到它打算影响的代码之后，或者将它放在 window.onload 调用中。正如你所拥有的，它试图在元素存在之前对其执行。~~

长话短说，基于[通过 jquery 更改对象嵌入源](https://stackoverflow.com/questions/7072065/changing-object-embed-source-via-jquery)、[在 IE/Chrome 中动态更改嵌入视频 src（适用于 Firefox）](https://stackoverflow.com/questions/2985205/dynamically-change-embedded-video-src-in-ie-chrome-works-in-firefox)、[JavaScript：更改 embed-tag 的 src-attribute](https://stackoverflow.com/questions/2493706/javascript-changing-src-attribute-of-a-embed-tag)和[http://code.google.com /p/chromium/issues/detail?id=69648](http://code.google.com/p/chromium/issues/detail?id=69648)，看起来这是 Chrome 中的一个错误，唯一的解决方法是删除整个`<embed>`元素，然后使用更改的 src 重新插入它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T00:18:53.470

尝试这个

```
function change() {
   document.getElementById("flash").src =  'swf/pano.swf?panoSrc=b.jpg';
   // OR  document["flash"].src =  'swf/pano.swf?panoSrc=b.jpg';
} 
```

# rotation - 仿射变换旋转，缓冲图像被剪切

> ID：12965643
> 
> 赞同：2
> 
> 时间：2012-10-19T00:17:35.953
> 
> 标签：rotation, bufferedimage, cut, affinetransform

我正在制作游戏，最近遇到了使用仿射变换旋转缓冲图像时出现的问题。图像围绕它们自己的中心旋转。例如，当旋转 45 度时，朝上和朝左的角被切断，所有低于图像原始 x 或 y 位置的像素都不会显示。

这是我用于旋转缓冲图像的代码：

```
setRad();
AffineTransform at = new AffineTransform();
at.rotate(-rad, width/2, height/2);
AffineTransformOp op = new AffineTransformOp(at, AffineTransformOp.TYPE_BILINEAR);
bImage = op.filter(startImage, null); 
```

setRad() 根据 x 和 y 速度给出角度
startImage 是加载的图像
bImage 是返回到主类的图像。

我想出了一个解决这个问题的方法是放大图像文件，在它周围添加空白空间，这样我就不会使用被切割的角落。但这会降低一些性能，如果可能的话，我宁愿坚持使用适当的解决方案。希望一切都清楚！

//打鼾鸟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-06T19:51:58.197

问题是您的源图像不完全是二次的。当您使用 实现 AffineTransform 旋转时`at.rotate(-rad, width/2, height/2);`，它与以下内容相同：

```
at.translate(width/2,height/2);
at.rotate(rads);
at.translate(-width/2,-height/2); 
```

因此，当它执行最后一行时，它会转换为原点。如果宽度大于 y（反之亦然），则变换的原点将被转换为比长度更大的一侧更小的距离。

例如，如果您的宽度为 30，高度为 60，则原点将设置为 (-15,-30)，从原来的变换设置。所以，当你翻译它时，比如说，90度，图像最终会得到“宽度”60和“高度”30，但是根据原点，图像原始底部将被绘制在（-30,0），所以它在 X 轴上溢出了 -15 的 AffineTransform。然后这部分图像将被剪切。

要更正此问题，您可以改用以下代码：

```
 double degreesToRotate = 90;
    double locationX =bufferedImage.getWidth() / 2;
    double locationY = bufferedImage.getHeight() / 2;

    double diff = Math.abs(bufferedImage.getWidth() - bufferedImage.getHeight());

    //To correct the set of origin point and the overflow
    double rotationRequired = Math.toRadians(degreesToRotate);
    double unitX = Math.abs(Math.cos(rotationRequired));
    double unitY = Math.abs(Math.sin(rotationRequired));

    double correctUx = unitX;
    double correctUy = unitY;

    //if the height is greater than the width, so you have to 'change' the axis to correct the overflow
    if(bufferedImage.getWidth() < bufferedImage.getHeight()){
        correctUx = unitY;
        correctUy = unitX;
    }

    int posAffineTransformOpX = posX-(int)(locationX)-(int)(correctUx*diff);
    int posAffineTransformOpY = posY-(int)(locationY)-(int)(correctUy*diff);

    //translate the image center to same diff that dislocates the origin, to correct its point set
    AffineTransform objTrans = new AffineTransform();
    objTrans.translate(correctUx*diff, correctUy*diff);
    objTrans.rotate(rotationRequired, locationX, locationY);

    AffineTransformOp op = new AffineTransformOp(objTrans, AffineTransformOp.TYPE_BILINEAR);

    // Drawing the rotated image at the required drawing locations
    graphic2dObj.drawImage(op.filter(bufferedImage, null), posAffineTransformOpX, posAffineTransformOpY, null); 
```

希望它有所帮助。

# google-analytics - Google Analytics（分析）显示实时访问者，但历史上反映 0 个访问者

> ID：12965646
> 
> 赞同：38
> 
> 时间：2012-10-19T00:17:53.480
> 
> 标签：google-analytics

在我的 Google Analytics（分析）帐户中，我可以在我的实时流中看到数据（如浏览量、访问者），但所有非实时数据（标准报告）都显示 0 次浏览量、0 个访问者。

有没有其他人遇到过这个问题或知道可能的问题/解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-19T19:08:49.817

标准报告中的数据最长可能需要 24 小时才能显示。

> 据谷歌称，网站统计信息每 24 小时更新一次，但该公司并未具体说明更新可能与您的谷歌分析帐户相关的其他信息需要多长时间。例如，您可能还使用 Google 的 AdWords 在其他网站上购买基于文本的广告。互联网营销顾问 Talal Melhem 等专业人士建议，流量数据每三到四个小时更新一次，AdWords 可能需要长达 24 小时，而您的 Google Analytics（分析）仪表板中的电子商务数据则进一步滞后，最长可达 72 小时。-- 资料来源：[Google Analytics（分析）多久更新一次？](http://smallbusiness.chron.com/frequently-google-analytics-update-33562.html)

此外，请检查您的[个人资料过滤器](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033162)以确保您没有根据@Eduardo 排除流量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-22T17:00:48.610

这可能有很多原因。

我现在实际上正在调查一个案例，可能是使用 GA 来分析应用程序的使用情况。我看到的是实时流量，但历史上存储了一个大大减少的流量集。

到目前为止，我有：

*   将用户代理更改为自定义
*   从推荐排除列表中删除域
*   将所有请求更改为普通页面视图，无需自定义（例如）源、媒体等

还没弄好，等我弄好了再更新！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-25T05:14:13.760

正如@TomFuertes 在评论中所说，谷歌分析仪表板的“用户图表”默认显示从昨天开始的最后 7 天的用户。因此，如果您从今天开始跟踪您的网站，您肯定会看到图表中的活跃用户将显示 0 个用户。只需从时间范围下拉列表中选择今天，即可查看今天访问您网站的用户数量。

# c - 将 C 文件指针传递给 curl_easy_setopt 函数的正确方法

> ID：12965650
> 
> 赞同：1
> 
> 时间：2012-10-19T00:18:01.927
> 
> 标签：c, curl, libcurl

我正在基于以下示例程序在 RHEL 4 Linux 上用 C 语言创建一个 SMTP 客户端程序：

[http://curl.haxx.se/libcurl/c/simplesmtp.html](http://curl.haxx.se/libcurl/c/simplesmtp.html)

每当我通过标准输入将消息正文传递给程序时，程序都可以正常工作。但是，当我尝试将 FILE 指针传递给 curl_easy_setopt() 函数时，我遇到了段错误。注释（来自示例程序 simplesmtp.c）表明可以将文件指针而不是标准输入传递给 curl_easy_setopt 函数。

**来自 simplesmtp.c 的相关评论部分**

```
/* You provide the payload (headers and the body of the message) as the
 * "data" element. There are two choices, either:
 * - provide a callback function and specify the function name using the
 * CURLOPT_READFUNCTION option; or
 * - just provide a FILE pointer that can be used to read the data from.
 * The easiest case is just to read from standard input, (which is available
 * as a FILE pointer) as shown here.
 */ 
curl_easy_setopt(curl, CURLOPT_READDATA, stdin); 
```

这些是设置了 CURLOPT_VERBOSE 选项的控制台中的错误行。

```
< 250 2.1.5 <myname@mydomain.com>... Recipient ok
> DATA
< 354 Enter mail, end with "." on a line by itself
./r: line 5: 21282 Segmentation fault      ./mysmtpcli -r rcp.txt -m msg.txt 
```

顺便说一句：**./r**是我的 shell 脚本，它正在调用 ./mysmtpcli -r rcp.txt -m msg.txt

**我的代码片段**

```
FILE *f_msg;
f_msg = fopen(msg_file, "r");
if(!f_msg){
  fprintf(stderr, "Could not load message file: %s\n", msg_file);
  return 1;
}

curl_easy_setopt(curl, CURLOPT_READDATA, f_msg);

fclose(f_msg); 
```

注意：msg_file 变量由命令行参数填充，是一个有效的文本文件，包含：

> 主题：测试消息
> 
> 这是一条测试消息！

当使用“cat msg.txt | ./mysmtpcli -r rcp.txt”通过标准输入将同一文件传递给程序时，程序将正确执行。不过，这需要用标准输入替换 f_msg。

```
curl_easy_setopt(curl, CURLOPT_READDATA, f_msg); 
```

我是否正确传递了 FILE 指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:27:07.363

是的，您确实正确传递了文件指针。尽管您似乎立即将其关闭。如果您这样做，curl 稍后将尝试从该文件中读取并崩溃。只有在不再需要它时才需要关闭它。

# c# - 在启用属性验证之前，gridview 内的 OnClinetClick 会触发

> ID：12965652
> 
> 赞同：0
> 
> 时间：2012-10-19T00:18:15.107
> 
> 标签：c#, javascript, asp.net, gridview

我在gridview 中有一个带有链接按钮模板字段的gridview。enabled 属性具有根据状态字段的值禁用按钮的验证。链接按钮有一个 OnClientClick 属性，它显示一个确认框。如果用户确认，则会触发 OnCommand 事件。

> ' OnCommand="lnkBtnDeleteItem_Command" ToolTip='删除项目' 启用='<%# (Eval("Status") + string.Empty).Equals("5") ? 假：真 %>'>

问题是即使按钮被禁用，也会弹出 OnclientClick 验证 - 这是由 Enabled 属性验证完成的。如何在 onclientClick 之前触发 Enabled 属性验证？或任何其他选择？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:46:08.730

You can pop onclick event using code:

```
if (status == 5)
  lbtnDelete.Attributes.Add("onClick", "return !this.disabled;");
else
  lbtnDelete.Attributes.Add("onClick", "return confirm('Are you sure?');"); 
```

# grails - Grails 将默认主页更改为 Spring Security Core 登录屏幕

> ID：12965654
> 
> 赞同：0
> 
> 时间：2012-10-19T00:18:52.023
> 
> 标签：grails

我安装了 Grails Spring Security Core 插件。由于它现在工作，用户首先被带到列出控制器的默认 index.gsp 页面。一旦他们单击控制器，就会提示他们登录。

如何修改 Grails 以首先显示登录屏幕，并在成功后重定向到默认的 index.gsp 页面？

这是我的 Config.groovy：

```
// Added by the Spring Security Core plugin:
grails.plugins.springsecurity.userLookup.userDomainClassName = 'com.example.app.security.SecUser'
grails.plugins.springsecurity.userLookup.authorityJoinClassName = 'com.example.app.security.SecUserSecRole'
grails.plugins.springsecurity.authority.className = 'com.example.app.security.SecRole'

grails.plugins.springsecurity.securityConfigType = SecurityConfigType.InterceptUrlMap
grails.plugins.springsecurity.interceptUrlMap = [
'/attendance/*':        ['IS_AUTHENTICATED_REMEMBERED'],
'/class/*':             ['IS_AUTHENTICATED_REMEMBERED'],
'/county/*':            ['IS_AUTHENTICATED_REMEMBERED'],
'/person/*':            ['IS_AUTHENTICATED_REMEMBERED'],
'/state/*':             ['IS_AUTHENTICATED_REMEMBERED'],
'/**':                  ['IS_AUTHENTICATED_ANONYMOUSLY']
] 
```

UrlMappings.groovy：

```
static mappings = {
    "/$controller/$action?/$id?"{ constraints { // apply constraints here
        } }

    "/"(view:"/index")
    "500"(view:'/error')

    "/login/$action?"(controller: "login")
    "/logout/$action?"(controller: "logout")
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T01:34:47.267

添加

```
'/': ['IS_AUTHENTICATED_FULLY'] 
```

到你的interceptUrlMap。

然后，当访问者转到“/”时，spring security会拦截并重定向到登录页面，然后在登录后重定向到“/”。

# gwt - GWT RequestFactory 不平凡的例子

> ID：12965661
> 
> 赞同：0
> 
> 时间：2012-10-19T00:20:06.327
> 
> 标签：gwt, requestfactory

有人可以指出一个使用 RequestFactory 的重要 GWT 应用程序的源代码吗？我似乎找不到关于该主题的好的教程/文档/书籍。所有官方示例都太琐碎，无法应用于现实世界的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T08:46:04.193

我遇到的唯一不平凡的例子是[http://greatlogic.com/?p=33](http://greatlogic.com/?p=33)。其余的只是一些 hello world 示例。

T Broyer 回答了很多 Google Group Discussions 或 StackOverflow 问题以供阅读。我的经验法则是，在了解请求工厂概念、编辑器和各种异常处理之前需要将近一个月的阅读、试验和错误编码，然后才能遇到性能问题 :) 像[GWT Requestfactory 性能建议](https://stackoverflow.com/questions/12977922/gwt-requestfactory-performance-suggestions/13009238#13009238)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:03:13.260

您可以尝试以下链接：

[http://javaasylum.blogspot.gr/2010/11/gwt-21-request-factory.html](http://javaasylum.blogspot.gr/2010/11/gwt-21-request-factory.html)

[http://code.google.com/p/gwt-examples/source/browse/#svn%2Ftrunk%2FDemoRequestFactory](http://code.google.com/p/gwt-examples/source/browse/#svn/trunk/DemoRequestFactory%253Fstate%253Dclosed)

[这里](http://demogwtrequestfactory.appspot.com/)还有一个实现后一个示例的演示。

希望能帮助到你！

# javascript - Firefox 16.0 中的 Javascript 漏洞

> ID：12965664
> 
> 赞同：0
> 
> 时间：2012-10-19T00:20:08.850
> 
> 标签：javascript, exploit

有人可以解释一下这个 javascript 漏洞是如何工作的吗？？？:D 这是一个将从打开的推特窗口中获取数据（用户名）的漏洞......

```
alert('Hello '+/^https:\/\/twitter.com\/([^/]+)/.exec(win.location)[1]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:40:15.173

这不是一个漏洞，它是一个非常非常简单的正则表达式。

如果您当前在 Twitter 上，则该 RegEx 会将您当前的地址与该部分进行比较`twitter.com/<USERNAME>/<...>`并提取该`username`部分。

*这就是*它所做的 100% 。

因此，如果我在`https://twitter.com/nerdswguitars/`，RegEx 会检查我在`https://twitter.com/`，然后它会查找不是另一个字符之后的***每个***`/`字符，并收集它们。

当它完成收集它们时（即：当它`/`到达或到达你所在地址的末尾时），它会吐出收集到的结果。

```
var twitterRegEx = /https:\/\/twitter.com\/([^\/]+)/;
var twitterURL   = "https://twitter.com/nerdswguitars/";

// (...) collect whatever is in here, to return if it matches
// [ ]   compare against any of the characters inside
// [a-z] = compare against all lowercase letters in the English language
// [A-Z] = compare against all uppercase letters in the English language
// [_\-\*] = compare against "_" "-" and "*"
// [^...] = NOT -- compare against all characters NOT in this set
// so [^\/] = compare against any character that's NOT "/"
// + = 1 or more
// [^\/]+ = compare against one or more characters which are NOT "/"
// ([^\/]+) = collect every character which does not match "/"

var regExArray = twitterRegEx.exec(twitterURL); // ["https://twitter.com/nerdswguitars/", "nerdswguitars"]
var userName = regExArray && regExArray[1] || ""; // avoids an error - lots of ways to do this 
```

（`exec`或者`match`如果您想以其他方式执行并使用字符串）过程：

1.  找到“https://twitter.com/”——> TRUE：继续
2.  查看下一个字符 --> "n" !== "/" --> TRUE: 收集并继续
3.  查看下一个字符 --> "e" !== "/" --> TRUE: 收集并继续
4.  查看下一个字符 --> "r" !== "/" --> TRUE: 收集并继续

13.查看下一个字符 --> "s" !== "/" --> TRUE：收集并继续
14.查看下一个字符 --> "/" !== "/" --> FALSE ：返回所有收集的信件

PS：如果你不小心，你的代码会导致严重的问题。如果 RegEx 失败（比如根本没有匹配项），它不会返回数组，而是返回`null`.
如果你尝试`null[1];`JS 会生你的气并抛出一个错误。

# javascript - 等到 foreach 完成

> ID：12965672
> 
> 赞同：2
> 
> 时间：2012-10-19T00:21:42.563
> 
> 标签：javascript, node.js

目前我正在使用 node-mysql (https://github.com/felixge/node-mysql)，对于从数据库返回的每个结果，我必须执行几个函数。目前，它试图一次完成所有事情，但是有没有让它等到每个函数完成后再从 mysql 移动到下一个结果？

```
connection.query('select * from data', function(err, rows) {
for (var i = 0; i < rows.length; i++) {
     doThis(rows[i].axn, rows[i].dnq, rows[i].bgq);
 }
}); 
```

在 doThis 函数中，如果满足某些要求，它会将数据传递给另一个函数。如何确保在移动到下一个查询行之前先*完成这些操作？*

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T00:30:12.527

如果您的函数支持在其工作完成时调用的回调参数，那么您可以使用库的[`forEachSerial`](https://github.com/caolan/async#foreachseriesarr-iterator-callback)方法非常干净地完成此操作。`async``doThis`

像这样的东西：

```
connection.query('select * from data', function(err, rows) {
    async.forEachSeries(rows, function(row, callback) {
        doThis(row.axn, row.dnq, row.bgq, callback);
    }, function(err) {
        // All done
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:04:32.860

`result`每行数据都会触发事件，请参阅[文档](https://github.com/felixge/node-mysql/#streaming-query-rows)

```
connection.query('select * from data')
  .on('result', function(row) {
     doThis(row.axn, row.dnq, row.bgq);
  }); 
```

# perforce - Perforce 从分支合并到标签

> ID：12965677
> 
> 赞同：1
> 
> 时间：2012-10-19T00:22:24.733
> 
> 标签：perforce, perforce-integrate

我正在尝试将私有分支中的代码合并到标签。但我不知道该怎么做。我是否需要从标签中创建一个新分支并使用分支映射来完成它？

谢谢

# php - Jquery Sortable 将 portlet 恢复到保存的设置

> ID：12965681
> 
> 赞同：1
> 
> 时间：2012-10-19T00:22:39.353
> 
> 标签：php, jquery, jquery-ui-sortable, smarty3

这里和网上有很多关于如何保存 jquery 可排序列表状态的帖子，但是恢复一个呢？

就我而言，我正在组织页面布局，而不是列表，所以我将有一个左右列（或更多）。

这是我过去所做的（使用 php+smarty）：

```
<div id="leftsort">
    {section loop=$leftSort name="ls"}
        {if $leftSort[ls]}{include file="index/sort/`$leftSort[ls]`.tpl"}{/if}
    {/section}
</div>
<div id="rightsort">
    {section loop=$rightSort name="rs"}
        {if $rightSort[rs]}{include file="index/sort/`$rightSort[rs]`.tpl"}{/if}
    {/section}
</div> 
```

每个 portlet 都有自己包含的模板文件。当我保存可排序列表的状态时，我将左右列分开保存，以便于恢复。

**您将如何恢复可排序列表？**

我更喜欢纯 jquery 的方式，例如 - 将 portlet 隐藏在页面上，将 json 数组传递给可排序列表，并在“创建”时对其进行排序并显示 portlet

```
$( ".selector" ).sortable({
   create: function(event, ui) { 
     -- load sortable positions in a json array --
     -- parse the array and move the hidden portlets into position --
     -- show portlets --
   }
}); 
```

对我来说，并不完全需要特定的代码，因此任何概念或想法都会受到赞赏。

谢谢！

-- 像这样思考：http: [//jsfiddle.net/8gYsy/](http://jsfiddle.net/8gYsy/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T02:29:40.680

我已经设法编写了我的概念，但我确实希望有更多的答案！ [http://jsfiddle.net/Qwjp9/](http://jsfiddle.net/Qwjp9/)

这将允许您根据 json 数组恢复保存的位置。所有 portlet 元素都将加载到隐藏的 div 中并移动。我也添加了一个保存示例。

```
var cols=jQuery.parseJSON('{"col1":["p1","p2"],"col2":["p3"]}');
$( ".column" ).sortable({
    connectWith: ".column",
    create: function(){
        var colid=this.id;      
        var col=cols[colid];
        $.each(col, function(index, value) {
           $('#'+value).appendTo($('#'+colid));
        });
    }, 
    update: function() {
         $.get('saveSortable.php',
              {col: this.id, sort:$(this).sortable('toArray').toString()});
    }                       
});​ 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-19T00:34:39.490

[http://jsfiddle.net/veLhT/](http://jsfiddle.net/veLhT/)的工作示例

html代码：

```
<ul>
  <li>a</li>
  <li>b</li>
  <li>c</li>
  <li>d</li>
  <li>e</li>
</ul> 
```

jQuery代码：

```
// store elements
var d=$('ul').html();
// alter data (in your case sort the data)
$('ul li').eq(2).remove();
// reset contents
$('ul').html(d); 
```

# git - 列出已解决的冲突

> ID：12965683
> 
> 赞同：0
> 
> 时间：2012-10-19T00:22:46.467
> 
> 标签：git

当我们检测到冲突并希望通过接受我们的版本来解决冲突时。

```
git checkout HEAD -- file-name 
or 
git checkout --ours -- file-name 
```

如果我不使用提交消息提交，git 会自动在提交消息中显示该文件，即它显示我已解决的文件。

但是 git status/diff 没有显示出来，或者我似乎无法获取此类别中的文件列表？

.git/MERGE_MSG 似乎从合并中捕获了冲突的文件。

# python - 如何完成python时间元组中的信息？

> ID：12965686
> 
> 赞同：4
> 
> 时间：2012-10-19T00:23:07.727
> 
> 标签：python

想知道python中是否有一个函数可以在时间元组中获取部分信息并返回具有完整信息的时间元组。例如，当我打字时，日期是 2012 年 10 月 18 日星期四。这意味着一年中的第 292 天是第 3 天，工作日数是 3。我希望能够执行以下操作：

```
>>> part_tuple=2012,10,18,0,0,0,0,0,0   
>>> complete_time_tuple=unknown_mod.unknown_func(part_tuple)
>>> complete_time_tuple
>>> (2012, 10, 18, 0, 0, 0, 292, 3, 0) 
```

或者，我想做：

```
>>> part_tuple=2012,0,0,0,0,0,292,0,0
>>> complete_time_tuple=unknown_mod.unknown_func(part_tuple) 
```

并再次获得 complete_tuple 。当然可以编写代码来执行此操作，但我猜它已经隐藏在 python 模块中——时间、日期时间、日历或其他东西——某处。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:36:25.827

对于您的第一个问题，您可以使用`datetime`（至少需要 Y、M、D）：

```
from datetime import datetime

dt = datetime(2012, 10, 18)
print dt.timetuple()
# time.struct_time(tm_year=2012, tm_mon=10, tm_mday=18, tm_hour=0, tm_min=0, tm_sec=0, tm_wday=3, tm_yday=292, tm_isdst=-1) 
```

第二个应该很容易：

```
from datetime import timedelta
print datetime(2012, 1, 1) + timedelta(days=291)
# datetime.datetime(2012, 10, 18, 0, 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T00:40:29.670

`datetime.timetuple`似乎正是您所要求的：

```
>>> import datetime
>>> d = datetime.date(2012, 10, 18)
>>> d.timetuple()
time.struct_time(tm_year=2012, tm_mon=10, tm_mday=18, tm_hour=0, tm_min=0, tm_sec=0, tm_wday=3, tm_yday=292, tm_isdst=-1)
>>> tuple(d.timetuple())
(2012, 10, 18, 0, 0, 0, 3, 292, -1) 
```

# php - jquery AJAX发送和接收数据请求中的未定义索引

> ID：12965690
> 
> 赞同：1
> 
> 时间：2012-10-19T00:23:20.630
> 
> 标签：php, javascript, jquery, ajax

测试.php

```
$aaa = $_POST['aaa'];

echo $aaa; 
```

Javascript代码

```
$.ajax({

url: 'ajax/test.php', 
data: { aaa: 'names_' },
success: function(data) {
alert("Data Loaded: " + data); 
            }
      }); 
```

警报响应是：

```
NOTICE: Undefined Index: aaa 
```

什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T00:26:33.853

将 type 属性添加到 ajax 对象：

```
$.ajax({
  url: 'ajax/test.php', 
  type:'post',
  data: { aaa: 'names_' },
  success: function(data) {
    alert("Data Loaded: " + data); 
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T00:30:55.880

您应该声明提交方法

```
$.ajax({
  type:"POST",
  ...
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-19T00:25:03.113

data: {'aaa':'names_'} 我觉得会更好

# php - 尝试从下拉菜单中删除会话时发生未定义索引错误

> ID：12965692
> 
> 赞同：0
> 
> 时间：2012-10-19T00:23:41.927
> 
> 标签：php, mysqli

我想从下拉菜单中删除会话。用户将从下拉菜单中选择一个会话，然后单击删除按钮，这将删除数据库中的会话。问题是，如果我单击删除按钮，则会出现未定义的索引错误，说明`sessionsDrop`第 200 行未定义我的问题是：

1：如何摆脱下面代码中的未定义索引错误 2：如何以及在哪里编写 if 语句，以便如果删除成功，它将回显“会话 ... 已删除”，否则如果没有t被删除然后显示回显“发生错误，会话...未删除”

下面是代码：

```
$sessionnum = 0;

 if (isset($_POST['modulesubmit'])) {

     if($_REQUEST['modulesDrop']==''){

         echo "Please Select a Module from the Drop Down Menu Above";

     }
     else{  

 var_dump($_POST['modulesDrop']);

        $sessionquery = "
             SELECT SessionId, SessionDate, SessionTime, ModuleId
             FROM Session
             WHERE
             (ModuleId = ?)
             ORDER BY SessionDate, SessionTime 
            ";

$sessionqrystmt=$mysqli->prepare($sessionquery);
// You only need to call bind_param once
$sessionqrystmt->bind_param("s",$_POST['modulesDrop']);
// get result and assign variables (prefix with db)

$sessionqrystmt->execute(); 

$sessionqrystmt->bind_result($dbSessionId,$dbSessionDate,$dbSessionTime, $dbModuleId);

 $sessionqrystmt->store_result();

$sessionnum = $sessionqrystmt->num_rows();   

    $dataArraySession = array();

 while ( $sessionqrystmt->fetch() ) { 

 $dataArraySession[$dbSessionId]['SessionDate'] = $dbSessionDate; 
 $dataArraySession[$dbSessionId]['SessionTime'] = $dbSessionTime;

}

   $sessionHTML = "";
   $sessionHTML .= '<select name="session" id="sessionsDrop">'.PHP_EOL;
   $sessionHTML .= '<option value="">Please Select</option>'.PHP_EOL;     

foreach ($dataArraySession as $sessionId => $sessionData) {

   $sessionHTML .= "<option value='$sessionId'>" . $sessionId . " - " . $sessionData['SessionDate']. " - " . $sessionData['SessionTime'] ."</option>".PHP_EOL;        

        }

   $sessionHTML .= '</select>';
}
 if ($sessionnum > 0) {

 ?>

     <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
     <p>Sessions: <?php echo $sessionHTML; ?><input id="sessionSubmit" type="submit" value="Delete" name="sessionsubmit" /></p>      
    </form>       

<?php

}
else {
 echo "<p>Sorry, You have No Sessions under this Module</p>";
}

}

 if (isset($_POST['sessionsubmit'])) {

     if($_REQUEST['sessionsDrop']==''){ //line 200 where undefined index occurs

         echo "Please Select a Session from the Drop Down Menu Above to Delete a Session";

     }
     else{  

 var_dump($_POST['sessionsDrop']);

 $sessiondel = $_POST['sessionsDrop'];

         $sessiondeletesql = " DELETE sess 
        FROM Session AS sess 
        WHERE sess.SessionId = ?"; 

                if (!$delete = $mysqli->prepare($sessiondeletesql)) {
      // Handle errors with prepare operation here
    }

    //Dont pass data directly to bind_param store it in a variable
$delete->bind_param("s", $sessiondel);

 $delete->execute();

        if ($delete->errno) {
          // Handle query error here
        }

        $delete->close();

        echo "Session $sessiondel was Deleted";
}
}
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:09:42.393

您的`undefined index`错误是因为您正在使用`$_REQUEST['sessionsDrop']==''`，但您的表单代码是 -

```
$sessionHTML .= '<select name="session" id="sessionsDrop">'.PHP_EOL; 
```

因此，您应该使用`$_REQUEST['session']==''`, 而不是`$_REQUEST['sessionsDrop']==''`因为超级全局变量（`$_POST`, `$_GET`, `$_REQUEST`）引用的是`name`，而不是`id`.

# javascript - 将链接添加到照片滑块

> ID：12965694
> 
> 赞同：1
> 
> 时间：2012-10-19T00:24:08.603
> 
> 标签：javascript, jquery, slider, tooltip, photo

我的代码有问题。我对 JavaScript 几乎一无所知，所以任何帮助将不胜感激。

我想让这个渐变滑块中的横幅和照片（只有三张图片，但每张图片的链接不同）链接到网站上的一个页面。我不知道该怎么做。

这是该网站的链接，因此您可以看到我正在尝试做的事情， [http://www.buildings4babies.org](http://www.buildings4babies.org)

这是我当前的脚本。

```
(function($) {
    $.fn.aToolTip = function(options) {

        // setup default settings
        var defaults = {
            clickIt: true,
            closeTipBtn: 'aToolTipCloseBtn',
            fixed: false,
            inSpeed: 200,
            outSpeed: 0,
            tipContent: '',
            toolTipClass: 'aToolTip',
            xOffset: 5,
            yOffset: 5
        },

        // This makes it so the users custom options overrides the default ones
        settings = $.extend({}, defaults, options);

        return this.each(function() {
            var obj = $(this);
            // Decide weather to use a title attr as the tooltip content
            if(obj.attr('title')){
                // set the tooltip content/text to be the obj title attribute
                var tipContent = obj.attr('title');  
            } else {
                // if no title attribute set it to the tipContent option in settings
                var tipContent = settings.tipContent;
            }

            // check if obj has a title attribute and if click feature is off
            if(tipContent && !settings.clickIt){    
                // Activate on hover    
                obj.hover(function(el){
                    obj.attr({title: ''});                        
                    $('body').append("<div class='"+ settings.toolTipClass +"'><p class='aToolTipContent'>"+ tipContent +"</p></div>");
                    $('.' + settings.toolTipClass).css({
                        position: 'absolute',
                        display: 'none',
                        zIndex: '50000',
                        top: (obj.offset().top - $('.' + settings.toolTipClass).outerHeight() - settings.yOffset) + 'px',
                        left: (obj.offset().left + 1/2*(obj.outerWidth()) + settings.xOffset) + 'px'
                    })
                    .stop().fadeIn(settings.inSpeed);   
                },
                function(){ 
                    // Fade out
                    $('.' + settings.toolTipClass).stop().fadeOut(settings.outSpeed, function(){$(this).remove();});
                }); 
            }

            // Follow mouse if fixed is false and click is false
            if(!settings.fixed && !settings.clickIt){
                obj.mousemove(function(el){
                    $('.' + settings.toolTipClass).css({
                        top: (el.pageY - $('.' + settings.toolTipClass).outerHeight() - settings.yOffset),
                        left: (el.pageX + settings.xOffset)
                    })
                });         
            }           

            // check if click feature is enabled
            if(tipContent && settings.clickIt){
                // Activate on click    
                obj.click(function(el){
                    obj.attr({title: ''});                        
                    $('body').append("<div class='"+ settings.toolTipClass +"'><p class='aToolTipContent'>"+ tipContent +"</p></div>");
                    $('.' + settings.toolTipClass).append("<a class='"+ settings.closeTipBtn +"' href='#' alt='close'>close</a>");
                    $('.' + settings.toolTipClass).css({
                        position: 'absolute',
                        display: 'none',
                        zIndex: '50000',
                        top: (obj.offset().top - $('.' + settings.toolTipClass).outerHeight() - settings.yOffset) + 'px',
                        left: (obj.offset().left + obj.outerWidth() + settings.xOffset) + 'px'
                    })
                    .fadeIn(settings.inSpeed);  
                    // Click to close tooltip
                    $('.' + settings.closeTipBtn).click(function(){
                        $('.' + settings.toolTipClass).fadeOut(settings.outSpeed, function(){$(this).remove();});
                        return false;
                    });      
                    return false;           
                });
            }

        }); // END: return this

        // returns the jQuery object to allow for chainability.  
        return this;
    };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T01:36:14.257

我将向您指出 jQuery 方法，因为您已经在使用它。

您需要找出要用作链接元素的图片的元素 ID。在 html 中，它应该如下所示：`"id="asdfasdf"`.

不幸的是，我在您的脚本中找不到插入图片的点。老实说，我认为您没有找对地方，这个功能似乎只显示[工具提示](http://en.wikipedia.org/wiki/Tooltip)。

无论如何，一旦找到元素的 id，就可以使用 jQuery 的`$('#idofyourelement')`. 如果它们没有 id，您可以选择它们。请参阅[此处](http://api.jquery.com/category/selectors/basic-css-selectors/)了解介绍。

一旦你选择了你的元素，你可以使用[wrap()](http://api.jquery.com/wrap/) - 方法在它周围添加一个 html 链接，***或者***你可以安装一个[click - listner](http://api.jquery.com/click/)并调用一个打开新链接的函数：

```
function goToLink() {
      window.location = "http://www.whereveryouwant.com"
    }

$("#idofyourpicture").click(goToLink); 
```

对要用作链接的每张图片执行此操作。

# ruby-on-rails - 使用carrierwave上传多文件

> ID：12965698
> 
> 赞同：2
> 
> 时间：2012-10-19T00:24:47.490
> 
> 标签：ruby-on-rails, nested-forms, carrierwave

我最近看了 Ryan 的关于 Jquery 文件上传的第 381 集，现在我想知道如何添加对嵌套表单的支持。假设我有产品，产品有很多图像。我应该怎么做才能在没有多态关联的情况下添加它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:36:03.783

目前尚不清楚您要问什么，或者多态关联与此有什么关系，但我想我可能遇到了同样的问题（尽管我使用了 plupload 代替）

我的解决方案是生成一个简短的随机字符串（我使用过`SecureRandom.hex(6)`，但我确信还有其他方法可以做到）并将其包含在我的产品表单视图中。我将它作为隐藏字段包含在表单中，也作为 javascript 变量。

```
<%= javascript_tag do %>
  window.tmp_id = "<%= tmp_id %>"
<% end %> 
```

在我的 plupload 配置中，我将此变量添加到上传图像的 POST 请求中。对于 jQuery 文件上传，我想你会想要这样的东西：

```
$('#fileupload').fileupload({
  url: '/path/to/upload/handler',
  formData: { tmp_id: tmp_id }
}); 
```

因此，在处理文件上传的控制器中，我只需将文件保存在一个临时目录中，该目录使用通过参数传入的 tmp_id 命名。

当控制器收到表单提交时，它使用模型检查临时目录是否存在并处理在其中找到的图像，为与新创建的产品相关联的每个图像创建新记录。

可能不是您正在寻找的东西，但认为它可能会给您一些想法。

# facebook - 使用 PhoneGap 和 ChildBrowser 登录 Facebook 不返回

> ID：12965699
> 
> 赞同：1
> 
> 时间：2012-10-19T00:24:48.910
> 
> 标签：facebook, cordova, backbone.js, facebook-login, childbrowser

我正在尝试使用 ChildBrowser PhoneGap 插件执行 Facebook 登录。不幸的是，我的代码不太好用。它到达`alert("Found redirect location");`（并且由于某种原因实际上运行此警报〜8x ...），但未能从`FB.getLoginStatus(...)`呼叫中返回（我知道这一点，因为我没有收到进一步的警报）。

这段代码的流程都是从单击“使用 Facebook 登录”按钮开始的，导致调用`gotoFBLogin()`（如果您不熟悉，这是 Backbone）。

```
 gotoFBLogin : function() {
        var self = this;

        /* On Facebook Login */
        var my_client_id    = "XXXXXXXXXXXXXXXXX",
            my_redirect_uri = "http://mysite.com/login/fb",
            my_type         = "user_agent",
            my_display      = "touch";

        var authorize_url  = "https://graph.facebook.com/oauth/authorize?";
        authorize_url += "client_id="+my_client_id;
        authorize_url += "&redirect_uri="+my_redirect_uri;
        authorize_url += "&display="+my_display;
        authorize_url += "&scope=" + this.FB_PERMISSIONS;

        // show ChildBrowser
        if(IS_MOBILE) {
            // install ChildBrowser (if necessary)
            if(window.plugins.childBrowser == null) {
                ChildBrowser.install();
            }

            window.plugins.childBrowser.onLocationChange = function(loc){
                if (/login/.test(loc)) {
                    alert("Found redirect location"); // THIS RUNS
                    window.plugins.childBrowser.close();
                    self.validateFBLogin();
                }
            };

            window.plugins.childBrowser.showWebPage(authorize_url);
        }
    },

    validateFBLogin : function() {
        var self = this;

        FB.getLoginStatus(function(response) {
            alert("Got response");
            if(response.status == "connected") {
                alert("Connected");
                // build authData object for Parse
                var id = response.authResponse.userID;
                var access_token = response.authResponse.accessToken;
                var expiration_date = new Date();
                expiration_date.setSeconds(expiration_date.getSeconds() + response.authResponse.expiresIn);
                expiration_date = expiration_date.toISOString();
                var authData = {
                    "id" : id,
                    "access_token" : access_token,
                    "expiration_date" : expiration_date
                };

                // log in with Parse
                Parse.FacebookUtils.logIn(authData, {
                    success: self._fbLoginSuccess,
                    error: self._fbLoginError
                });
            }
        }, self.FB_PERMISSIONS);
    },

    _fbLoginSuccess : function(user) {
        $.mobile.loading( 'hide' );

        if(IS_DEBUG) alert("Facebook login succeeded");

        // if the user didn't exist, delete them
        if(!user.existed()) {
            // delete the user
            user.destroy();

            // log them out
            Parse.User.logOut();

            MobileHTMLHelper.showPopup('Hmm... You\'re not signed up. If you request an invite, we\'ll get you in as soon as possible :) Thanks.');
        } else {
            // log it
            Log.add(Log.ACTION_LOGIN_FACEBOOK);

            // Handle successful login
            Backbone.history.navigate('dashboard', {trigger: true});
        }
    },
    _fbLoginError : function(user, error) {
        // Handle errors and cancellation
        $.mobile.loading( 'hide' );

        if(IS_DEBUG) alert("Facebook login failed");
    }, 
```

关于我的代码为什么失败的任何想法？谢谢 - 我真的很感激。

# c# - 对数组进行排序会引发以下错误 System.IndexOutOfRangeException : Index was outside the bounds of the array

> ID：12965700
> 
> 赞同：0
> 
> 时间：2012-10-19T00:24:55.530
> 
> 标签：c#, arrays

我已经定义了以下方法来对数组进行排序：

```
public int[] BubbleSort(int[] ints)
{
    for (int i = 0; i < ints.Length; i++)
    {
        if (ints[i] > ints[i + 1])
        {
            int tempValue = ints[i];
            ints[i] = ints[i + 1];
            ints[i + 1] = tempValue;         
        }
    }
    return ints;               
} 
```

但是，我上面的实现是抛出 System.IndexOutOfRangeException ：索引超出了数组的范围。可能是什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T00:29:37.067

去吧`.Length - 1`。此外，使用[冒泡排序](http://en.wikipedia.org/wiki/Bubblesort)，您需要遍历数组，直到不再需要交换元素（这就是冒泡排序效率低下的原因）：

```
public int[] BubbleSort(int[] ints)
{            
    bool swapped = true;
    while (swapped) 
    {
        swapped = false;
        for (int i = 0; i < ints.Length - 1; i++)
        {
            if (ints[i] > ints[i + 1])
            {
                swapped = true;
                int tempValue = ints[i];
                ints[i] = ints[i + 1];
                ints[i + 1] = tempValue;
            }     
        }
    }

    return ints;               
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T00:26:42.470

```
for (int i = 0; i < ints.Length; i++)
{
  if (ints[i] > ints[i + 1]) 
```

当`i == ints.Length - 1`,`ints[i + 1]`是超出数组末尾的非法访问。您的循环逻辑有一个错误。

# coding-style - lc-3：将数字加载到寄存器中并以二进制形式输出

> ID：12965704
> 
> 赞同：1
> 
> 时间：2012-10-19T00:25:36.467
> 
> 标签：coding-style, computer-science, lc3

我需要帮助在 LC-3 模拟器的控制台中输入一个数字，例如 1 2 9，获取数字 129 并将其实际形成完整的数字 129，（129）并将其二进制形式输出为控制台的屏幕。

我该怎么做呢？任何帮助都会很棒。

# php - 2 个相同的 apache/php 安装从同一个 SQL Server 数据库返回不同的结果

> ID：12965705
> 
> 赞同：3
> 
> 时间：2012-10-19T00:25:55.417
> 
> 标签：php, sql-server, apache

我在我的开发机器 WinXPsp3 上编写了代码，它有 apache 独立 2.2.21。查询工作正常。

然后，我将 php 复制到我的生产机器 WinXPsp3 上，该机器安装了 apache 2.2 windows 和 php 5.3.5 windows 安装，并且是 SQL Server 机器，但是查询崩溃了。

我在生产机器上卸载了 apache 和 php，并从开发机器上复制了我的单机版本，但是当我启动 apache 时，我收到一个错误，即缺少 MSCPV100.dll。我安装了 MS C++ Redist，这个问题就消失了。

查询如下：

```
    选择顶部 (50)
    [ID]，
    （选择案例
    当 [Location] 为空时，则为“未知”
    当 [Location]='' THEN '未知'
    ELSE UPPER([位置]) END
     + ', ' as [text()] FROM dbo.[OtherTable]
    WHERE [OtherTable].[Key]=[Table].[ID] FOR XML path('')) AS 位置
    从表
```

（这里的任何错误格式都不能反映我的实际查询，因为它适用于其他 apache 安装）

查询在 [text()] 之前的小写“AS”上阻塞，并带有“关键字'as'附近的语法不正确”。

该查询最初是大写的，并且有更多的字段，所以我使用小写，直到我发现失败描述正在谈论哪个“AS”。

我尝试用“''”替换 text() 周围的“[]”，但这没有帮助。

我知道的事实是真实的：

*   apache 安装是相同的。

*   php安装是相同的。

*   当通过在不同机器上安装相同的 apache托管时，查询工作正常。

*   apache/php 升级后，其他查询在生产机器上运行良好。

这些信息让我相信生产机器出了问题，而不是 apache、sql server、php 或查询。关于那可能是什么的任何想法？

有几件事我没有提到：

PHP 连接类型是 odbc。

两台机器上的 SQL Server ODBC 驱动程序都是 2000.85.1132.0，但生产机器上还有 SQL Server Native Client 10.0 版本 2007.100.2531.00。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:27:28.827

好的，我搞砸了——我在一台服务器上“endode”加号，而在另一台服务器上“encodeURIComponent”。复制/粘贴太多了-我的错。无论如何，感谢您的关注！

# java - 使用 root loader 加载 jar

> ID：12965706
> 
> 赞同：0
> 
> 时间：2012-10-19T00:26:16.123
> 
> 标签：java, binding, groovy, classloader

我开发了一个库，其中一种方法具有以下形式：

```
void setVars(def script) { 
  // script parameter is an instance of groovy.lang.Script loaded by Rootoader
  // MyBinding is part of the lib and extends groovy.lang.Binding 
  script.setBinding(new MyBinding()) 
} 
```

现在，如果将库用作 jar 文件，我会得到未定义的方法异常，因为脚本对象是从主应用程序传递的，并由 RootLoader 加载，而 MyBinding 由`sun.misc.Launcher$AppClassLoader`它的子应用程序加载。有没有办法使用 RootClass Loader 加载整个 jar？出于某种原因，`rootLoader.loadClass("MyBinding")`返回由 AppClassLoader 加载的类并且不重新加载它。

更新一个例子：

S.script（由用户创建）：

```
println 1 
```

Main.groovy（由用户创建）：

```
class Main {
  static void main(String[] args) {
    Lib.setVars(S)
  }  
} 
```

我的 lib.jar 由用户添加到类路径：

```
class MyBinding extends Binding {
   //...
}

class Lib {
  static void setVars(Class scriptClass) { 
    def script = scriptClass.newInstance()
    //Exception as MyBinding is loaded by MyBinding 
    //while script class is loaded by RootLoaded
    script.setBinding(new MyBinding()) 
  }
} 
```

Main.groovy 是运行的文件。我从 Eclipse 中执行此操作，其中 lib.jar 被添加到 Java Build Path -> Libraries 部分中的项目类路径中（我希望用户以这种方式或通过 maven 使用该库）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:54:19.923

取决于你如何运行脚本？几种方式，

1.  > java -cp lib/yourLib.jar;lib/groovy.jar org.codehaus.groovy.tools.GroovyStarter --classpath lib/yourBindingLib.jar;lib/.jar --main groovy.ui.GroovyMain YourScript.groovy

2.  您还可以在将其用于代码之前指定库的 URL，

    def bindingLib = new File("...");
    loader.addURL(bindingLib.toURI().toURL())

# mysql - mysql选择匹配多行

> ID：12965709
> 
> 赞同：3
> 
> 时间：2012-10-19T00:26:30.180
> 
> 标签：mysql, select

我有一张看起来像的桌子。

```
user    project
----    -------
bob     news
bob     theatre
sarah   news
fred    news
fred    fred
fred    movies
sarah   movies 
```

*如果用户永远不会*，我正在尝试提取项目列表 *`fred`*

 *所以基于上表的结果将是。

```
bob theatre 
```

我对如何实现这一目标感到困惑。我在另一个可以加入的表中有一个唯一的用户列表。我可以用某种语言的 for 循环来做到这一点，但我认为必须有一种方法可以在本机 sql 中做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:46:25.183

实现这一点的最简单方法可能是在 WHERE 语句中使用 NOT EXISTS 运算符；就像是：

```
Select P.* from Projects P Where NOT EXISTS (Select * from Projects P2 where P2.project = P.project and P2.user = 'fred') 
```

第二种可能性是使用 NOT IN 运算符：

```
Select P.* from Projects P Where P.project NOT IN (Select P2.project from Projects P2 where P2.user = 'fred') 
```

这适用于 Microsoft SQL-Server；但是，这应该在 MySQL 上未经修改地运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T00:29:32.817

```
select distinct a.* 
from mytable a
left join mytable b on b.project = a.project and b.user = 'fred'
where b.user is null 
```

对于您想要的行，*不会*有连接的行，并且这些行将具有`null`值，因此 where 子句仅过滤掉那些。*

# knockout.js - 我可以为要与 knockout.js 中的 css 绑定绑定的类创建一个选择器吗

> ID：12965712
> 
> 赞同：0
> 
> 时间：2012-10-19T00:26:52.817
> 
> 标签：knockout.js

有没有比以下更简单的方法来做到这一点：

```
 <div data-bind="css: { high: selectedPriority() == 1, medium: selectedPriority() == 2}"> 
```

我最多有 6 个步骤？另一种是绑定属性类，在js中写洞类列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:35:09.270

在 Knockout 2.2 中（在 2012 年 10 月 18 日的 RC 中），您可以给`css`绑定一个类来设置：

```
<div data-bind="css: priorityClass"></div> 
```

`priorityClass`然后可以是您的视图模型中的计算 observable：

```
vm.priorityClasses = {1:'high', 2:'medium' /*...*/};
vm.priorityClass = ko.computed(function() {
    return this.priorityClasses[this.selectedPriority()];
}, vm); 
```

如果您不想要计算的 observable，您可以将该逻辑直接放在绑定中：

```
<div data-bind="css: priorityClasses[selectedPriority()]"></div> 
```

在 2.2 发布之前，您可以改用[类自定义绑定](https://github.com/SteveSanderson/knockout/wiki/Bindings---class)。

# gridview - 删除 Gridview EmptyDataTemplate 的边框，但保留子网格视图的边框

> ID：12965715
> 
> 赞同：1
> 
> 时间：2012-10-19T00:27:03.593
> 
> 标签：gridview, border

我有一个名为 gvDomSoilType 的 GridView。当为空时，它的 EmptyDataTemplate 将显示一个带有空行或插入的表。默认情况下，此表被边框包围。如果我将 gvDomSoilType 的 BorderWidth 设置为 0px，这个边框就会消失。但是，如果 GridView 有数据，它的外边框也会丢失。

我试过弄乱 EmptyDataRowStyle 但没有删除边框。唯一的方法是将 GridView 的 BorderWidth 设置为 0。

如何仅在 EmptyDataTemplate 显示时删除边框，但在 GridView 有数据时保留它们？

[截屏](http://i.stack.imgur.com/VHVaP.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T18:43:42.353

我有同样的问题。我将此添加到 GridView HTML：

```
<EmptyDataRowStyle CssClass="EmptyData" /> 
```

然后把这个 jQuery 放在页面底部（一定要包含 jQuery）：

```
$(".EmptyData").parents("table").css("border-width", "0px").prop("border", "0"); 
```

这仅删除 EmptyDataTemplate 的边框。

# database-migration - 数据库迁移后验证架构

> ID：12965719
> 
> 赞同：3
> 
> 时间：2012-10-19T00:27:28.027
> 
> 标签：database-migration, fluent-migrator

有没有人对以下（潜在）情况有很好的解决方案？

使用 fluentmigrator 之类的数据库迁移工具，我们添加了一个迁移，该迁移本身是完全有效的，但会破坏其他一些数据库工件，直到运行时才会被发现。例如，删除在现有存储过程的正文中引用的列。

我需要能够在迁移后完整地验证生成的模式，最好和最有效的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T04:21:35.687

理想情况下，最好有自动化测试来验证您的数据库对象，但这可能无法实现。

如果您正在寻找一种重新编译对象（存储过程、视图、函数）的方法，一个简单的解决方案是创建一个具有唯一目的的迁移配置文件，或者删除并重新创建这些对象中的每一个。

这不会检测到迁移导致的对象中的语义错误，但它会告诉您是否更改或删除了导致依赖对象编译错误的列。

此配置文件可以临时执行，也可以作为持续集成和部署过程的一部分执行。

# android - 使用 EPUBLIB 显示图像

> ID：12965720
> 
> 赞同：6
> 
> 时间：2012-10-19T00:27:50.737
> 
> 标签：android, android-webview, epub, android-file, epublib

我正在使用 epublib 在 WebView 中读取 .epub 文件。

```
WebView wv = (WebView) getView().findViewById(R.id.chaptercontent);
    try {
        String abspath = FILEPATH+file;
        File filePath = new File(abspath+".epub");   
        InputStream epubInputStream = new BufferedInputStream(new FileInputStream(filePath));
        book = (new EpubReader()).readEpub(epubInputStream);
        int pos = abspath.lastIndexOf('/');
        DownloadResource(abspath.substring(0, pos));
        try {
            for(int i = 1; i< book.getContents().size(); i++) {
                InputStream is = book.getSpine().getSpineReferences().get(i).getResource().getInputStream(); 
                BufferedReader reader = new BufferedReader(new InputStreamReader(is)); 
                StringBuilder sb = new StringBuilder(); 
                String line = null; 
                while ((line = reader.readLine()) != null)
                { 
                    sb.append(line + "\n");
                    Log.d("display line", line);
                } 
                is.close(); 
                wv.loadDataWithBaseURL(abspath.substring(0, pos)+"/", sb.toString(), "text/html", "utf-8", null);
            }
        }   
        catch(IOException e) {
            Log.e("IOException", e.getMessage());
        }   
     }
     catch (IOException e) {
        Log.e("epublib", e.getMessage());
     }

private void DownloadResource(String directory) {
     try {
         nl.siegmann.epublib.domain.Resources rst = book.getResources();
         Collection<Resource> clrst = rst.getAll();
         Iterator<Resource> itr = clrst.iterator();
         Log.d("Downlod path", directory);
         while (itr.hasNext()) {
             Resource rs = itr.next();
             if ((rs.getMediaType() == MediatypeService.JPG) || (rs.getMediaType() == MediatypeService.PNG) || (rs.getMediaType() == MediatypeService.GIF) || rs.getMediaType() == MediatypeService.CSS)  {
                 File oppath1 = new File(directory+File.separator+rs.getHref());
                 Log.d("Resource Name - ", rs.getHref());
                 oppath1.createNewFile();
                 Log.d("Oppath - ", oppath1.getAbsolutePath());

                 Log.d("File Checking - ", "Exists - "+oppath1.exists()+" & Write - "+oppath1.canWrite());
                 FileOutputStream fos1 = new FileOutputStream(oppath1);
                 fos1.write(rs.getData());
                 fos1.close();

             } 
         }
     } 
     catch (IOException e) {
         Log.e("error", e.getMessage());
     }
} 
```

DownloadResource 工作正常。资源被获取。但是 WebView 不显示图像。这些图像与 epub 文件位于同一目录中。WebView 给了我这个： ![](../Images/6c456abded035df4fcc4593d415dbc4a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-30T07:02:20.943

这个问题已经有一段时间了，但是如果有人遇到它，我遇到了同样的问题，解决方案非常简单，被忽略了。

```
wv.loadDataWithBaseURL(abspath.substring(0, pos)+"/", sb.toString(), "text/html", "utf-8", null); 
```

`abspath.substring(0, pos)+"/"`此行使用这部分代码指定资源主页/网页来源 url 。

但是我们没有提到它的协议，即 http、ftp、文件（本地）所以修复是

```
wv.loadDataWithBaseURL("file://"+abspath.substring(0, pos)+"/", sb.toString(), "text/html", "utf-8", null); 
```

它就像一个魅力:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-30T01:06:19.773

首先你必须得到这样的所有资源：

```
MediaType[] bitmapTypes = { MediatypeService.PNG,
                    MediatypeService.GIF, MediatypeService.JPG };
            List<Resource> resources = book.getResources().getResourcesByMediaTypes(bitmapTypes); 
```

之后，您可以循环资源以获取相同的 href 文件

```
private Bitmap getBitmapFromResources(List<Resource> resources, String imgHref)
    {
        byte[] data = "holder".getBytes();
        for(int ii = 0; ii < resources.size();ii++)
        {
            String z = resources.get(ii).getHref();
            if(z.equals(imgHref))
            {
                Log.i("livi", z);
                try {
                    data = resources.get(ii).getData();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                break;
            }
        }
        //
            Bitmap bm = BitmapFactory.decodeByteArray(data, 0, data.length);
            return bm;
    } 
```

这如何使用

```
Bitmap bm = getBitmapFromResources(resources, "cover.jpg");
            if (bm != null)
                ivTest.setImageBitmap(bm); 
```

希望这对你有帮助。

# php - 使用 PHP 在 WSDL 中使用奇怪的附加响应

> ID：12965722
> 
> 赞同：2
> 
> 时间：2012-10-19T00:27:57.627
> 
> 标签：php, web-services, wsdl

我正在通过 php 使用这个网络服务

```
$wsdl = 'http://www.ezzylearning.com/services/CountryInformationService.asmx?wsdl';
$soap = new soapClient($wsdl);
try{
$return = $soap->GetCountriesByContinent(array('continentCode'=>'AS'));
} catch (Exception $e) {
    die ('Error: ' . $e->getMessage());
}
var_dump($return->GetCountriesByContinentResult); 
```

我得到这个结果：

```
object(stdClass)#3 (2) { ["schema"]=> string(607) "" ["any"]=> string(6747) "AFAFGAfghanistanAMARMArmeniaAZAZEAzerbaijanBHBHRBahrainBDBGDBangladeshBTBTNBhutanIOIOTBritish Indian Ocean TerritoryBNBRNBruneiKHKHMCambodiaCNCHNChinaCXCXRChristmas IslandCCCCKCocos IslandsGEGEOGeorgiaHKHKGHong KongININDIndiaIDIDNIndonesiaIRIRNIranIQIRQIraqILISRIsraelJPJPNJapanJOJORJordanKZKAZKazakhstanKWKWTKuwaitKGKGZKyrgyzstanLALAOLaosLBLBNLebanonMOMACMacaoMYMYSMalaysiaMVMDVMaldivesMNMNGMongoliaMMMMRMyanmarNPNPLNepalKPPRKNorth KoreaOMOMNOmanPKPAKPakistanPSPSEPalestinian TerritoryPHPHLPhilippinesQAQATQatarSASAUSaudi ArabiaSGSGPSingaporeKRKORSouth KoreaLKLKASri LankaSYSYRSyriaTWTWNTaiwanTJTJKTajikistanTHTHAThailandTRTURTurkeyTMTKMTurkmenistanAEAREUnited Arab EmiratesUZUZBUzbekistanVNVNMVietnamYEYEMYemen" } 
```

如您所见，以这种方式获取数组是没有用的，因为所有内容都是附加的。那么，使用该服务的正确方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:46:11.780

WSDL 定义决定了 SoapClient 如何形成请求和解释响应。

您尝试访问的方法的响应定义如下：

```
<s:element name="GetCountriesByContinentResponse">
  <s:complexType>
    <s:sequence>
      <s:element minOccurs="0" maxOccurs="1" name="GetCountriesByContinentResult">
        <s:complexType>
          <s:sequence>
            <s:element ref="s:schema" />
            <s:any />
          </s:sequence>
        </s:complexType>
      </s:element>
    </s:sequence>
  </s:complexType>
</s:element> 
```

所以 PHP 正在将 XML 响应转换`schema`为`any`. `any`只是 XML 内容的字符串版本。

的内容`any`应该是有效的 XML，因此如果您无法修改 WDSL，您始终可以使用 XML 解析器读取字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T00:59:28.170

它是非常简单的 XML 输出，您可以尝试这样的事情

```
$wsdl = 'http://www.ezzylearning.com/services/CountryInformationService.asmx?wsdl';
$soap = new soapClient($wsdl);
try {
    $return = $soap->GetCountriesByContinent(array('continentCode' => 'AS'));
    $xml = new SimpleXMLElement($return->GetCountriesByContinentResult->any);

    echo "<pre>";
    echo "ISO2\tISO3\tCountry Name\n";
    foreach ( $xml->NewDataSet->Countries as $country ) {
        printf("%s\t%s\t%s\n", $country->ISO2, $country->ISO3, $country->Country);
    }
} catch ( Exception $e ) {
    die('Error: ' . $e->getMessage());
} 
```

输出

```
ISO2    ISO3    Country Name
AF  AFG Afghanistan
AM  ARM Armenia
AZ  AZE Azerbaijan
BH  BHR Bahrain
BD  BGD Bangladesh
BT  BTN Bhutan
IO  IOT British Indian Ocean Territory
BN  BRN Brunei
KH  KHM Cambodia
CN  CHN China
CX  CXR Christmas Island
CC  CCK Cocos Islands
GE  GEO Georgia
HK  HKG Hong Kong
IN  IND India
ID  IDN Indonesia
IR  IRN Iran
IQ  IRQ Iraq
IL  ISR Israel
JP  JPN Japan
JO  JOR Jordan
KZ  KAZ Kazakhstan
KW  KWT Kuwait
KG  KGZ Kyrgyzstan
LA  LAO Laos
LB  LBN Lebanon
MO  MAC Macao
MY  MYS Malaysia
MV  MDV Maldives
MN  MNG Mongolia
MM  MMR Myanmar
NP  NPL Nepal
KP  PRK North Korea
OM  OMN Oman
PK  PAK Pakistan
PS  PSE Palestinian Territory
PH  PHL Philippines
QA  QAT Qatar
SA  SAU Saudi Arabia
SG  SGP Singapore
KR  KOR South Korea
LK  LKA Sri Lanka
SY  SYR Syria
TW  TWN Taiwan
TJ  TJK Tajikistan
TH  THA Thailand
TR  TUR Turkey
TM  TKM Turkmenistan
AE  ARE United Arab Emirates
UZ  UZB Uzbekistan
VN  VNM Vietnam
YE  YEM Yemen 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T00:35:56.323

假设 wsdl 是有效的，我会尝试手动下载 wsdl 并将其保存为本地文件并以这种方式访问​​它。我发现 php 中的soapClient 不太擅长使用 wsdl 的 url，尤其是那些具有获取参数字符串的 url。如果这对你有用，那就太好了。由于肥皂是一种垂死的宗教，我不希望很快解决这个问题。

如果您必须离开 wsdl 远程，您可以使用旧的 nusoap 库——尽管在我的整个职业生涯中，我从未见过有人真正构建响应式服务来自动更新 wsdl 变化......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T00:37:12.220

检查您的源代码，您认为附加的长文本有一些未显示的 XML 标记（您的浏览器不知道如何解释“<Country>”。也许他们希望您在使用前进一步解析它？

# debugging - “No source file named”错误调试Eclipse CDT

> ID：12965726
> 
> 赞同：18
> 
> 时间：2012-10-19T00:28:19.507
> 
> 标签：debugging, gdb, eclipse-cdt

我有一个带有共享库（动态加载）的项目，我正在尝试调试它。我收到以下错误消息：

```
No source file named /home/username/Code/path/to/project/MyFile.cpp. 
```

在搜索了其他线程之后，我确保我正在使用 -g 进行编译，并且相应的文件夹位于调试配置的源路径选项卡上。奇怪的是它给出了正确的绝对路径：它引用的文件确实存在，所以我不明白为什么它认为它不存在。

有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-26T11:22:46.160

我刚刚遇到了同样的问题，尽管我的断点在可执行文件本身中，而不是在共享库中。为了解决这个问题，我不得不打开“调试配置”，选择我的调试配置并调整以下设置：

*   在底部，有一个链接“选择其他...”来选择创建进程启动器。点击链接。勾选“使用配置特定设置”。选择**“标准创建流程启动器”**，然后按“确定”。
*   转到“调试器”选项卡，然后在选项卡顶部选择**“调试器：gdb/mi”**。可能/可能不会有所不同：在同一个选项卡上还有一个复选框“使用完整文件路径设置断点” - 我玩过这个，但它似乎不会影响我们观察到的问题（显然，我们的源路径已经是完整的路径）。

对于共享库中的断点，您可能需要[使用 eclipse cdt 和 gdb 进行调试](https://stackoverflow.com/questions/1587748/debugging-with-eclipse-cdt-and-gdb)以及[为什么 eclipse cdt 忽略断点的其他信息（尤其是关于](https://stackoverflow.com/questions/204282/why-does-eclipse-cdt-ignore-breakpoints)**延迟断点**）。

*注意：这是指 Eclipse Kepler (4.3) 和 gdb 7.4。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-12T08:00:55.843

我有同样的问题，但就我而言，这是我的错。我的一些项目设置为Release配置，调试器自然找不到源文件信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-17T16:45:43.237

我有同样的问题。我无法在共享库文件 (.so) 中设置断点，该文件在与我的程序不同的位置编译。要解决这个问题：

1.  转到调试配置，源选项卡
2.  添加一个编译目录（我使用了编译所有进程的主makefile的位置，而不是这个进程的makefile所在的位置）。
3.  也点击“子目录也用于编译”（我的子进程makefile编译在主位置的子目录中）

我还没有想出如何对未来和过去的所有调试配置进行此更改，这样我就不必每次都添加这个目录，但如果我弄清楚了，我会在以后尝试更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-08T10:28:26.760

我有同样的问题，但我的解决方案不同。打开项目 "debug/src" + "release/src" 目录并确保没有 [filename].d 文件包含任何可能已更改名称或不再存在的源文件的名称。我有一个，删除它，因为没有更多的错误。

因此，至少在我的情况下，我假设错误是由超出范围的对象创建的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-15T16:29:51.400

如果您同时拥有 cygwin 和 mingw（或其他一些变体），就会发生这种情况。如果来自 cygwin 的 gcc 用于编译源代码，您将在可执行文件中有 cygwin 路径。然后，如果调试器来自 mingw，gdb 将无法解释 cygwin 路径。解决此问题的最简单方法是转到运行 -> 调试配置 -> 调试器并将完整路径设置为 cygwin gdb (C:\cygwin64\bin\gdb.exe)。这为我解决了问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-15T20:50:43.180

我在调试配置设置中按照@Andreas Fester 对调试器选项卡的评论，但找不到“调试器：gdb/mi”，但在源选项卡中，我删除了所有项目并通过单击“添加.. ." 窗口右侧的按钮。这帮助我解决了这个问题

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-05-27T12:21:04.410

对于 Makefile 项目现有代码。第 1 步检查使用 -g -o0 编译所有源 第 2 步使用 gdbserver 和 arm-yourversion-gdb，它们将在您的 sdk 和 gdb 工具链中提供。

# c++ - 不可能在 device_memory 中创建 cusp::coo_matrix 的推力::host_vector？

> ID：12965731
> 
> 赞同：2
> 
> 时间：2012-10-19T00:29:01.893
> 
> 标签：c++, cuda, thrust, nvcc, cusp-library

我正在尝试制作一个向量，`cusp::coo_matrix`但似乎无法`thrust::host_vector`以这种方式使用。考虑这段代码：

```
int main(void)
{
    typedef typename cusp::coo_matrix<int, float, cusp::device_memory> maintype;
    maintype B;
    thrust::host_vector<maintype> h_vec(2,B);
    return 0;
} 
```

我从以下位置收到此错误消息`nvcc`：

```
Warning: calling a __host__ function("thrust::detail::vector_base<int, thrust::device_malloc_allocator<int> > ::vector_base") from a __host__ __device__ function("thrust::detail::vector_base<int, thrust::device_malloc_allocator<int> > ::vector_base [subobject]") is not allowed

Warning: calling a __host__ function("thrust::detail::vector_base<float, thrust::device_malloc_allocator<float> > ::vector_base") from a __host__ __device__ function("thrust::detail::vector_base<float, thrust::device_malloc_allocator<float> > ::vector_base [subobject]") is not allowed 
```

有趣的是，我得到了完全相同的错误`cusp::host_memory`（嗯，几乎相同）：

```
Warning: calling a __host__ function("thrust::detail::vector_base<int, std::allocator<int> > ::vector_base") from a __host__ __device__ function("thrust::detail::vector_base<int, std::allocator<int> > ::vector_base [subobject]") is not allowed

Warning: calling a __host__ function("thrust::detail::vector_base<float, std::allocator<float> > ::vector_base") from a __host__ __device__ function("thrust::detail::vector_base<float, std::allocator<float> > ::vector_base [subobject]") is not allowed 
```

所以，我的问题是，这真的是一个缺点还是我做错了什么？非常感谢任何帮助。

另外，我已经测试了，`std::vector`而不是`thrust::host_vector`它工作正常。并不是说我是 Thrust 库的忠实粉丝，但我只是好奇。此外，我需要重写一些代码以防`thrust::host_vector`不合适（`thrust::find`并且使用了一些其他功能）。

另外，还有其他制作尖点矩阵数组的方法吗？我不认为原始指针`new/delete`比 更好`std::vector`，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-04T07:00:03.560

如评论中所述，编译器警告是良性的。在推力宿主向量中使用非 POD 类型是安全的。用推力装置矢量做同样的事情是不安全的。

*此答案已从评论中添加为社区 wiki，以将其从未答复列表中删除*

# git - 使用 git post-receive 覆盖多个目录中的文件

> ID：12965733
> 
> 赞同：2
> 
> 时间：2012-10-19T00:29:19.513
> 
> 标签：git, ubuntu, amazon-ec2, webserver, git-post-receive

我正在使用 git 来部署对服务器上文件的更改，但这些文件位于两个目录（/var/www 和 /user/myfiles）中，但我只想使用一个存储库来推送更改。所以我设置了一个 repo (/user/gitrepo)，我认为，在寻找解决方案之后，最好的方法是使用 post-receive 覆盖其他目录中的文件，但我不知道如何使用钩子 post-receive 做我想做的事（我是一个 git noob）。任何人都可以帮忙吗？

需要明确的是，我在 user/gitrepo/www/file1 和 user/gitrepo/myfiles/file2 中有文件

我想将更改推送到 repo 并更新 var/www/file1 和 user/myfiles/file2。

谢谢！

（另外，如果你有一些你认为应该更好用并且也使用 git 的东西，你能给我一个详细的操作方法吗？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:36:29.340

我认为您正在寻找 git hooks 的介绍。

尝试：

*   [http://git-scm.com/book/en/Customizing-Git-Git-Hooks](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)
*   [http://ryanflorence.com/deploying-websites-with-a-tiny-git-hook/](http://ryanflorence.com/deploying-websites-with-a-tiny-git-hook/)
*   [http://google.com/?q=git+post-receive+hook+example](http://google.com/?q=git+post-receive+hook+example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-06T10:15:03.680

如果您的远程服务器是 linux（很可能是），您可以在远程服务器中使用任何终端命令。

比如说你想删除一个文件，你可以使用命令 `rm file2`

您可以根据需要在挂钩中链接任意数量的命令。要将一个文件夹的内容复制到另一个文件夹，您可以使用：`cp Folder1/* Folder2/`

# java - 当多个 Case 做同样的事情时避免 Switch 语句冗余？

> ID：12965738
> 
> 赞同：12
> 
> 时间：2012-10-19T00:30:04.380
> 
> 标签：java, syntax, switch-statement

我在一个开关中有多个案例做同样的事情，就像这样：（这是用 Java 编写的）

```
 case 1:
     aMethod();
     break;
 case 2:
     aMethod();
     break;
 case 3:
     aMethod();
     break;
 case 4:
     anotherMethod();
     break; 
```

有什么方法可以将案例 1、2 和 3 合并为一个案例，因为它们都调用相同的方法？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-19T00:32:20.570

```
case 1:
case 2:
case 3:
    aMethod();
    break;
case 4:
    anotherMethod();
    break; 
```

这是有效的，因为当它碰巧是案例 1（例如）时，它会落入案例 2（无`break`陈述），然后落入案例 3。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-19T00:32:23.897

当然，您可以允许`case`1 和 2 的子句部分“通过”到第 3 条，然后再`break`退出该`switch`语句：

```
case 1:
case 2:
case 3:
     aMethod();
     break;
case 4:
     anotherMethod();
     break; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-19T00:32:44.070

下面是你能做的最好的

```
case 1:
case 2:
case 3:
     aMethod();
     break;
 case 4:
     anotherMethod();
     break; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-19T00:32:50.520

它被称为“跌倒”模式：

```
case 1:  // fall through
case 2:  // fall through
case 3: 
   aMethod(); 
   break; 
case 4: 
   anotherMethod(); 
   break; 
```

# matrix - Mathematica：如何在同一图中垂直绘制矩阵的多条线

> ID：12965741
> 
> 赞同：-1
> 
> 时间：2012-10-19T00:30:29.990
> 
> 标签：matrix, plot, wolfram-mathematica, line

我创建了一个名为 Theta 的数组，它有 100 行和 400 列。每个条目都是一个数字。我想要做的是绘制的图表

0.01 与第 1 行中的每个数字

0.02 与第 2 行中的每个数字

...

1 与第 100 行中的每个数字

所以基本上每条线都是垂直绘制的。

我可以为每一行执行此操作，但我不知道如何同时为所有行执行此操作。并且手工完成所有 100 行肯定不是要走的路。

到目前为止，我的代码是：

```
data = Table[Theta[i][j], {i, 100}, {j, 400}];

Line1 = Table[data[[1, i]], {i, 1, 400}];

ListPlot[{MapIndexed[{0.01, #} &, Line1]] 
```

编辑：好的，我终于做到了。

如果有人有兴趣，这里是：

```
data = Table[Theta][i][j], {i, 100}, {j, 400}];
final = {};
For[g = 1, g < 100, g++,
    Line[g] = MapIndexed[{0.01*g, #} &, Table[data[[g, i]], {i, 1, 400}]];
    final = Join[final, Line[g]];
]
ListPlot[final] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:30:52.483

这是一个示例答案，它使用了一组稍小的 10 行 40 列随机数，以 0.1、0.2、0.3、...、1 而不是 0.01 间隔绘制。

```
data = Table[x + RandomReal[5], {x, 1, 10}, {y, 1, 40}]; 
```

这是绘制的数据：

```
ListPlot[ MapThread[ Function[x, {#2, x}] /@ #1 &, {data, Range[0.01, 1, .1]}]] 
```

> ![数学图形](../Images/570f3ac84df460277f54a5e5c5342cd4.png)

# php - 带有发布数据的 CURL 并创建 cookie

> ID：12965743
> 
> 赞同：0
> 
> 时间：2012-10-19T00:30:57.807
> 
> 标签：php, html, curl, security

> **可能重复：**
> [curl 进行身份验证但没有返回网页](https://stackoverflow.com/questions/12963373/curl-authenticates-but-no-web-page-is-returned)

我编写了这样的代码来从 curl 的结果中获取返回的 html 数据，但我没有这样做。我的代码有问题吗？

我的代码：

```
<?php
/* STEP 1\. let’s create a cookie file */
$ckfile = tempnam ("tmp", "CURLCOOKIE");

/* STEP 2\. visit the homepage to set the cookie properly */
$ch = curl_init ("http://www.batavia-air.com/");
curl_setopt ($ch, CURLOPT_COOKIEJAR, $ckfile);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
$output = curl_exec ($ch);

/* STEP 3\. visit cookiepage.php */
$ch = curl_init ("http://www.batavia-air.com/public/etiket/includes/class/booking/template/cariBookAjaxPros2.php");
curl_setopt ($ch, CURLOPT_COOKIEFILE, $ckfile);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
$output = curl_exec ($ch);

/* here you can do whatever you want with $output */
$datatopost = array (
            "ajax_type" => "non_ajax",
            "blnthnBerangkatPergi" => "12/12",
            "jmlInfant" => "0",
            "jmlPenumpang" => "1",
            "kalenderPergi" => "",
            "page" => "booking",
            "page" => "booking",
            "radio" => "flight",
            "ruteBerangkat" => "CGK",
            "ruteKembali" => "kembali",
            "ruteTujuan" => "AMQ",
            "tglBerangkatPergi" => "22",
);
  $ch = curl_init ($output);
  curl_setopt ($ch, CURLOPT_POST, true);
  curl_setopt ($ch, CURLOPT_POSTFIELDS, $datatopost);
  curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
  returndata = curl_exec ($ch);
  echo $returndata;
  ?> 
```

或者对于网站不需要使用cookies？请帮忙..谢谢

# http - 如何关闭 Fiddler 断点

> ID：12965744
> 
> 赞同：14
> 
> 时间：2012-10-19T00:30:57.667
> 
> 标签：http, fiddler

我正在使用 Fiddler v4.4.1.1 beta。

我曾经在请求断点之前激活了自动。现在我已将其禁用，但 Fiddler 继续中断。我不知道该怎么办。

观察：

![在此处输入图像描述](../Images/7fd8bf8f89746696f09f2a01b8a0a2dc.png)

请注意，断点被禁用，状态行也是如此 - 那里没有断点图标。

然而，断点仍然有效：

![在此处输入图像描述](../Images/a9795f4483a2c6355c68874a030bf529.png)

我不能再使用 Fiddler。

我已经发出了没有任何参数的 bpafter、bps、bpv、bpm 和 bpu 命令来清除任何可能的断点。我从没想过我会这样称呼 Fiddler，但它继续中断。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-20T12:32:51.570

我终于找到了。

还有一个断点暴露的地方——我经常使用的过滤器选项卡，但从不知道它也控制断点：

![在此处输入图像描述](../Images/6627c3d6c6f63c08d2eac5eb3ddd9940.png)

令人困惑的部分是我从未接触过这个选项 - 只使用了主机过滤器部分。显然，在规则菜单中设置自动断点现在也设置了这个标志，静默。但是当我禁用断点时它不会被清除，这是一种糟糕的 UI 体验。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-19T10:38:28.443

它对我来说就像一种魅力。

## **关于 Fiddler 中的断点的一些有用信息：**

您可以使用***QuickExec (ALT+Q)***使用以下命令启用/禁用断点：***bpafter、bpv、bpu***
另外一个杀手级功能是恢复所有断点会话的 QuickExec 命令***“g”*或*“go”***（这个使用**“开始”**按钮在 UI 中可用）。

有关详细信息，请参阅[Fiddler QuickExec 文档](http://docs.telerik.com/fiddler/KnowledgeBase/QuickExec)。

# android - 目标 API 级别 (android)

> ID：12965747
> 
> 赞同：0
> 
> 时间：2012-10-19T00:31:16.917
> 
> 标签：android, api

我创建了一个应用程序，它在高于某个 api 级别的设备上运行良好，但是当我在 API 级别为 7 的手机上运行它时，它无法正常工作。虽然它不会崩溃。如果我更改清单中的 min 或 target api 值，应用程序仍会运行，并且我在 eclipse 中没有收到任何错误/警告。所以我的问题是我应该如何在不安装每个 android API、创建模拟器并查看它是否正确运行的情况下告诉使用哪个 API 级别。当我使用以下代码时，当我使用以下代码时会发生错误：

```
 ' cal = Calendar.getInstance();
             cal.set(year, month, day, hour,minute);
            current time

             intent = new Intent(this, AlarmReceiver.class);
             intent.putExtra("vns", 1);

             sender = PendingIntent.getBroadcast(this, 192837, intent,
             PendingIntent.FLAG_UPDATE_CURRENT);
            // Get the AlarmManager service
             am = (AlarmManager) getSystemService(ALARM_SERVICE);
             am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender);' 
```

它没有正确设置事件，而是什么都不做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:03:08.153

当支持多个 API 时，始终使用最低的 API 进行编码。

要找出不应该使用的内容：

对于您有疑问的类/方法，请注意文档弹出窗口，它告诉最低 API 级别，例如**因为：API 级别 1**

前往[Android 开发者 API 参考](http://developer.android.com/reference/packages.html) ，搜索包，然后选择 API 级别，不支持的包成员将被标记。

# android - Android 应用程序在文件上生成 .old 扩展名

> ID：12965751
> 
> 赞同：1
> 
> 时间：2012-10-19T00:31:53.263
> 
> 标签：android, sqlite, mobile, thread-safety

我有一个与基于 Java EE 开发的服务器通信的 Android 应用程序。

移动应用程序操作线程和在 sqlite 数据库中读取和写入的同步任务。

问题是在某些情况下数据库已损坏，并且扩展文件更改为 .old。这代表了一个难题，因为应用程序崩溃并且数据丢失。

你能推荐一个在这种情况下如何处理的想法吗？

# jquery - ddslick rails form_for 不保存

> ID：12965754
> 
> 赞同：0
> 
> 时间：2012-10-19T00:32:25.613
> 
> 标签：jquery, ruby-on-rails-3, jquery-plugins

我在编辑表单中遇到了 ddslicks 的问题

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put , :multipart => true }) do |f| %>

#some code
<div class="field multi-select three cf">
        <%= f.label :date_of_birth %>
        <%= f.date_select(:date_of_birth, {:order => [:year, :month, :day],:start_year =>Time.now.year-50, :end_year => Time.now.year }) %>
</div>
<%= f.submit "Update", :class=>"btn-container submit" %>
<% end %> 
```

生成下一个html：

```
<select id="user_date_of_birth_1i" name="user[date_of_birth(1i)]">
<option value="1962">1962</option>
<option value="1963">1963</option>
....
<select id="user_date_of_birth_2i" name="user[date_of_birth(2i)]">
<option value="1">January</option>
<option value="2">February</option>
<option value="3">March</option>
....
<select id="user_date_of_birth_3i" name="user[date_of_birth(3i)]">
<option value="1">1</option>
<option value="2">2</option>
.... 
```

此时一切都很好，但是当我应用 ddslick 时它不起作用

这是我的 global.js

```
$('#user_date_of_birth_1i').ddslick({selectText: "Year", height: 200 });
$('#user_date_of_birth_2i').ddslick({selectText: "Month", height: 200});
$('#user_date_of_birth_3i').ddslick({selectText: "Day", height: 200}); 
```

它生成下一个 html

```
<div id="user_date_of_birth_1i" class="dd-container" style="width: 260px; "> 
<div class="dd-select" style="width: 260px; background-color: rgb(238, 238, 238);     background-position: initial initial; background-repeat: initial initial; ">
<input class="dd-selected-value" type="hidden" value="1992">
<a class="dd-selected"><label class="dd-selected-text">1992</label></a>
<span class="dd-pointer dd-pointer-down"></span>
 </div>
 <ul class="dd-options dd-click-off-close" style="width: 260px; height: 200px; overflow: auto; ">
 <li><a class="dd-option"><input class="dd-option-value" type="hidden" value="1962">
<label class="dd-option-text">1962</label></a>
</li>
<li><a class="dd-option"> <input class="dd-option-value" type="hidden" value="1963"> 
<label class="dd-option-text">1963</label></a>
</li>
....rest of years
</div> 
```

user_date_of_birth_2i(month), user_date_of_birth_3i(days) 相同

当我提交时，它不会保存该字段。（我正在使用设计），任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:34:32.750

好的，我解决了，只需更改

```
$('#user_date_of_birth_1i').ddslick({selectText: "Year", height: 200 }); 
```

为了这：

```
$('#user_date_of_birth_1i').ddslick({selectText: "Year", height: 200, 
onSelected: function(e){
hidden_field = $(e.selectedItem).parents(".dd-container").next();
hidden_field.val(e.selectedData.value);
}
}); 
```

# python - 如何搜索具有匹配结束标记的 xml 标记？

> ID：12965760
> 
> 赞同：0
> 
> 时间：2012-10-19T00:33:03.407
> 
> 标签：python, xml, regex

我想知道在 python 中搜索和删除 XML 标记、其中的内容（不管它是什么）以及它的结束标记的最佳方法是什么？XML 的格式也很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:42:18.070

您可以使用 XPath 识别元素，然后使用[remove](http://docs.python.org/library/xml.etree.elementtree.html#xml.etree.ElementTree.Element.remove)方法：

```
import xml.etree.ElementTree as ET
data = '''\
<node1>
  <node2 a1="x1"> ... </node2>
  <node2 a1="x2"> ... </node2>
  <node2 a1="x1"> ... </node2>
</node1>
'''
doc = ET.fromstring(data)
e = doc.find('node2/[@a1="x2"]')
doc.remove(e)
print(ET.tostring(doc))
# <node1>
#   <node2 a1="x1"> ... </node2>
#   <node2 a1="x1"> ... </node2>
# </node1> 
```

# php - Preg_Replace 第 4 次出现斜线，哈希失败

> ID：12965763
> 
> 赞同：0
> 
> 时间：2012-10-19T00:33:13.593
> 
> 标签：php, regex, preg-replace, preg-match

> **可能重复：**
> [正则表达式中的未知修饰符](https://stackoverflow.com/questions/12493489/unknown-modifier-in-regular-expression)

嘿伙计们，我在尝试使用 preg_replace 用哈希标记替换序列中的第四个斜杠时收到未知修饰符警告（失败），希望您能提供帮助。

```
$value['path'] = preg_replace("/((.*?)(/)){4}/e", '(preg_replace("//$/", "", "\0"))#', $value['path']); 
```

错误：

```
Warning: preg_replace() [<a href='function.preg-replace'>function.preg-replace</a>]: Unknown modifier ')' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:40:03.030

如果`/`用作分隔符，则需要`/`在正则表达式的中间全部转义。

我个人喜欢`()`用作分隔符，因为它不需要任何转义，它提醒我第一个匹配项（索引 0）是整个模式。

旁注：不要使用`e`修饰符。改为使用[`preg_match_callback`](http://php.net/preg-match-callback)。

此外，您可以通过执行以下操作替换斜线的第 4 个实例：

```
$parts = explode("/",$value['path'],5);
$last = array_pop($parts);
$value['path'] = implode("/",$parts)."#".$last; 
```

# unix - Ping 命令参数

> ID：12965764
> 
> 赞同：1
> 
> 时间：2012-10-19T00:33:19.400
> 
> 标签：unix, web, ping

为什么我可以写命令

```
ping www.google.com 
```

但不是

```
ping www.google.com/ 
```

或者

```
ping http://www.google.com 
```

后两者产生“未知主机”错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:27:13.820

[Ping](http://linux.die.net/man/8/ping)用于判断主机（主机名或 IP 地址）是否处于活动状态。它使用 ICMP 协议来执行此操作。它对 URL 或 Web 服务器一无所知。

您可能想要的是一个`http ping`实用程序，例如[http-ping](http://www.coretechnologies.com/products/http-ping/)。或者，您可以使用`curl`或之类的工具`wget`来检索网站索引页面并以这种方式测量延迟。

示例`curl`（这会执行 HEAD 请求）：

```
$ time curl -I http://www.cnn.com >/dev/null

real    0m0.242s    <== 242 milliseconds
user    0m0.015s
sys     0m0.016s 
```

`curl`GET 请求示例：

```
$ time curl http://www.cnn.com >/dev/null

real    0m0.783s    <== 783 milliseconds
user    0m0.031s
sys     0m0.030s 
```

这将使您*大致*了解 Web 服务器对您的主机的响应程度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T01:31:37.023

因为 ping 适用于 IP 地址或主机名（为您解析为 IP）。

`www.google.com`是主机，但`www.google.com/`是`http://www.google.com`url。

# jquery - 手风琴改变单个元素的颜色

> ID：12965765
> 
> 赞同：1
> 
> 时间：2012-10-19T00:33:25.083
> 
> 标签：jquery, jquery-ui, jquery-ui-accordion

我有一个带有以下标记的 jQuery 手风琴

```
<div id="accordion">
    <div class="group" id="1">
        <div class="title">
            <a href="">Title 1</a></div>
        <div class="body">
            Body 1<br />
            <br />
            <form>
                Test <input type="text" /><br />
                <br />
                Test <input type="text" /><br />
                <br />
            </form>
        </div>
    </div>
    <div class="group" id="2">
        <div class="title">
            <a href="">Title 2</a></div>
        <div class="body">
            Body 2<br />
            <br />
            <form>
                Test <input type="text" /><br />
                <br />
                Test <input type="text" /><br />
                <br />
            </form>
        </div>
    </div>
</div> 
```

我在这里包含了一个 jsfiddle

[http://jsfiddle.net/nLHpR/](http://jsfiddle.net/nLHpR/)

如何使用 javascript 更改手风琴元素之一的背景颜色？例如，如果我想将 id = "1" 的手风琴元素的背景颜色更改为红色，我该怎么做？

我试着做

```
$("#1").css('background-color','red'); 
```

它没有用。然后我尝试了

```
$("#1").children().css('background-color','red'); 
```

它部分有效，但有许多区域仍然是白色的（参见 jsfiddle 链接）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:41:21.970

您需要覆盖 Jquery UI CSS 中的一个类来执行此操作，

```
#1 .ui-widget-content
{
    background: red !important;
}​ 
```

因为 CSS 给定的背景属性有一个似乎与它重叠的图像。所以你需要给这个类而不是直接给 div 的背景色..

```
$("#1 .ui-widget-content").css('background','red'); 
```

**编辑**

```
.ui-accordion-icons .ui-accordion-header a {
    background: orange !important;
}​ 
```

[检查小提琴](http://jsfiddle.net/sushanth009/nLHpR/29/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T00:50:08.880

`$("#1").css('background','red');`- 背景是在`.ui-widget-content`...中定义的，所以你应该覆盖整个背景，否则背景图像将存在

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T00:56:16.490

问题是来自手风琴小部件的类 ui-widget-content。这个班有

```
.ui-widget-content {
    border: 1px solid rgb(170, 170, 170);
    background: url("images/ui-bg_flat_75_ffffff_40x100.png") repeat-x scroll 50% 50% rgb(255, 255, 255);
    color: rgb(34, 34, 34);
} 
```

这是解决方案覆盖类并放置除背景之外的类的其他属性

```
$("#1").children(".body").removeClass("ui-widget-content");
$("#1").children("form").css('color','rgb(34, 34, 34)');
$("#1").children(".body").css('border', '1px solid rgb(170, 170, 170)' ); 
```

# java - 我将如何获取我编写的 java 代码并使计算能够进行度数？

> ID：12965767
> 
> 赞同：-1
> 
> 时间：2012-10-19T00:33:47.267
> 
> 标签：java

我想带上我的三次函数计算器，并有可能使用度数。我将如何更改代码来做到这一点？

```
 c.println("Welcome to this program which will help you solve a cubic function");    //top text
c.println ("");
c.println("Please enter coefficients in the following form");                       //explaining the format
c.println("f(x) = ax^3 + bx^2 + cx + d");

c.print(" Enter your X value: ");               //asking for the x value
double x = c.readDouble();

c.print("Enter your first coefficient (a): ");  //asking for the x value
double a = c.readDouble();

c.print("Enter your second coefficient (b): "); //asking for the x value
double b = c.readDouble();

c.print("Enter your third coefficient (c): ");  //asking for the x value
double c1 = c.readDouble();

c.print("Enter your last coefficient (d): ");   //asking for the x value
double d = c.readDouble();

c.println(CubicFunction(x,a,b,c1,d),0,2);       //prints out the final result, rounded to 2 decimals
c.println ("");

int choice = 1; // initializes choice to 1 so it can enter the main loop

while (done == false)   //main loop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T01:08:12.963

看起来您的`CubicFunction`方法进行了计算并返回了结果。您需要修改此代码以执行不同的计算或返回不同的结果。您上面提供的代码实际上根本不进行任何计算。

将方法的名称更改为`CubicFunction`以小写字母开头（即`cubicFunction`）可能也是一个好主意，或者可能将其命名为更有意义的名称（即`calculateCubicFunction`）-您的代码让我感到困惑，我认为`CubicFunction`这是一个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:08:27.420

使用 java.lang.Math 类访问三角函数

# c - 不知道为什么我在 C 中遇到“类型冲突”错误和“隐式声明错误”。

> ID：12965771
> 
> 赞同：0
> 
> 时间：2012-10-19T00:34:04.147
> 
> 标签：c

我正在编写一个程序来生成一串随机大写字母，然后获取用户输入的大写字母以及用户的字符。对于随机字符串中用户输入字母的任何实例，它会将该字母替换为用户输入的字符。

例如，s1 = {BDHFKYL} s2 = {YEIGH} c = '*'

输出 = BD*FK*L

无论如何，我在 main 下的函数声明中遇到类型冲突的错误，并且在函数调用中隐式修饰。有谁知道为什么？先感谢您。

```
#include <stdio.h>
#include <stdlib.h>

void fillS1(char x[42]);

void fillS2(char x[22]);

void strfilter(char a[], char b[], char c);

int main(int argc, const char * argv[])
{
char s1[42];
char s2[22];

fillS1(s1);

//printf("%s\n", s1);

puts(s1);

fillS2(s2);

strFilter(s1, s2, '*');  //Implicit declaration here

return 0;
}

void fillS1(char x[])
{
for (int i = 0; i < 40; i++)
    x[i] = 'A' + random() % 26;
x[40] = (char)0;
}

void fillS2(char x[]){

int i = 0;

printf("Please enter at least 2 capital letters and a maximum of 20.\n");
while (( x[i] = getchar()) != '\n' ) {

    i++;

    }

x[i] = '\0';

if (i < 3) {
    printf("You need at least two letters");
}

else if (i > 21){
    printf("You cannot have more than twenty letters");
}

/*else if (((i > 'a')) || ((i < 'z'))){
    printf("You many only have capital letters");
}   */

 else puts(x);
}

void strFilter(char a[], char b[], char c){ //Conflicting types error here
int i = 0;
int n = 0;

while (n < 21) {

    for (i = 0; i < 41; i++) {
        if (a[i] == b[n]){
            c = a[i];
        }
    }
    i = 0;
    n++;
}

puts(a);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T00:36:41.937

您的标识符不匹配：（`strFilter`带有大写字母）`F`与`strfilter`（带有小写字母`f`）不同。所以，改变你的预先声明：

```
void strfilter(char a[], char b[], char c); 
```

对此：

```
void strFilter(char a[], char b[], char c); 
```

# ruby - 800 名工人后 Resque 超时

> ID：12965772
> 
> 赞同：0
> 
> 时间：2012-10-19T00:34:16.580
> 
> 标签：ruby, redis, resque

我有一个繁重的处理需要使用很多机器来完成。目前，Resque 有 700 名员工在运行，一切正常。但是，如果我将工作人员的数量增加到 1000，我会开始收到很多 redis 超时。我几乎可以肯定限制在 redis 中，因为我什至无法从 redis-cli 连接。resque 或 redis 有任何限制吗？或者它可能是一些文件系统限制？

有谁知道这个配置在哪里，所以我可以改变它？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T14:11:21.527

您可能正在达到服务器盒的资源限制。

在 Linux 上，检查：

```
ulimit -a
sysctl net.ipv4.ip_local_port_range
sysctl net.ipv4.tcp_fin_timeout
sysctl net.core.somaxconn
sysctl net.ipv4.tcp_tw_recycle
sysctl net.ipv4.tcp_tw_reuse
sysctl fs.file-max
sysctl net.ipv4.tcp_window_scaling
sysctl kernel.pid_max
sysctl net.ipv4.tcp_orphan_retries
sysctl net.ipv4.tcp_max_orphans 
```

在 FreeBSD 上，检查：

```
sysctl kern.ipc.nmbclusters
sysctl kern.ipc.maxsockets
sysctl kern.maxfiles
sysctl kern.maxfilesperproc
sysctl net.inet.tcp.msl
sysctl net.inet.ip.portrange.first
sysctl net.inet.ip.portrange.last 
```

获取有关这些 sysctl 配置的更多信息并根据需要增加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:13:51.687

每个工人都是分叉的，并且根据您机器的其他资源，您可能已经达到了运行 700 到 1000 个工人之间的限制。

我建议监控正在使用的内存量，并检查是否按照上面@Andrew Marshall 的建议设置了 maxclients

# c++ - C++中的曲线平滑

> ID：12965774
> 
> 赞同：1
> 
> 时间：2012-10-19T00:34:42.767
> 
> 标签：c++, math, smoothing

我想平滑一条曲线，但我不知道要遵循什么方法，该模式存储在一个向量中。

```
class Point2D
    {
    public:
        double x, y;
        Point2D() 
        {
            this->x=0; 
            this->y=0;
        }
        Point2D(double x, double y)
        {
            this->x = x;
            this->y = y;
        }
           }

vector<Point2D> vec1; 
```

vec1：

```
 *
       *    *

    .        .
   .           . 
  .              .
 .                 .
.                    .    .
                        . 
```

平滑后的预期模式：

```
 *
       *    *
     .        .

   .             . 
  .                .
 .                  .
.                    .    .
                        . 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T03:25:37.037

尝试拉普拉斯平滑。除了您想要保持固定的点（例如图中的星星），将每个点设置为其直接邻居的平均值。重复一次或两次，具体取决于您想要多少平滑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T00:42:33.267

这是一个有点模糊的问题，但如果你想平滑一组数据，你可以看看[这个](http://rosettacode.org/wiki/Polynomial_regression)。

它是多项式回归的链接。然后，您可以使用拟合多项式在曲线上生成平滑点。

希望这可以帮助。

# php - 执行 exec 的 PHP 脚本

> ID：12965777
> 
> 赞同：3
> 
> 时间：2012-10-19T00:35:00.943
> 
> 标签：php, exec

我正在编写一个 PHP 脚本来上传一个文件，该文件通过使用系统调用`fork()`、和`exec()`、和来执行其他 c 文件`execl()`。不幸的是 execl() 函数不起作用。
更详细地说，PHP 脚本，执行`exec()`函数为：

```
$output =shell_exec('./app/p1';
echo "<pre>$output</pre>"; ) 
```

执行 p1 是 p1.c 的可执行文件，p1.c 程序调用 execl() 为：

```
execl("./p2", "./p2", "a.param","test.txt", NULL); 
```

执行 p2，它是 p2.c 的可执行文件。结果 p1.c 中的 execl() 没有执行， p2.c 也没有执行。有什么建议么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-28T07:01:27.303

如[`shell_exec`文档](http://www.php.net/manual/en/function.shell-exec.php)`safe_mode`中所述，此功能仅在 PHP 配置中禁用时才启用。

要禁用它，（仅适用[于 5.4 之前的 PHP](http://www.php.net/manual/en/features.safe-mode.php)），您必须在 中包含以下行`php.ini`：

```
safe_mode = Off 
```

另一个可能的问题可能来自当前路径。您正在使用相对路径（`./app/p1`和`./p2`）调用二进制文件。您确定这些二进制文件在当前工作目录中吗？

要摆脱这个问题，只需在两种情况下都使用文件的完整路径。

# mysql - 粘贴到 mysql CLI 不起作用 - 它丢失了一些字符

> ID：12965778
> 
> 赞同：3
> 
> 时间：2012-10-19T00:35:03.910
> 
> 标签：mysql

我将一个 >2KB 的 SQL 文件粘贴到 mysql CLI，它随机丢失字符，然后在我的 SQL 中报告语法错误。

例如：

```
(.....)
UPDATE ct_transform_target_summary
SET
ytd_margin_target = jul_margin_target + aug_margin_target + sep_margin_target + oct_margin_target + nov_margin_target + dec_margin_target +
                    jan_margin_target + feb_margin_target + mar_margin_target + apr_margin_target + may_margin_target + jun_margin_target,
ytd_adjustments = jul_margin_adj + aug_margin_adj + sep_margin_adj + oct_margin_adj + nov_margin_adj + dec_margin_adj +
                  jan_margin_adj + feb_margin_adj + mar_margin_adj + apt_margin_adj + may_margin_adj + jun_margin_adj,
ytd_margin = jul_margin + aug_margin + sep_margin + oct_margin + nov_margin + dec_margin +
             jan_margin + feb_margin + mar_margin + apr_margin + may_margin + jun_margin;
(....) 
```

变成：

```
(....)
->   
->   
->   SET
->     ytd_margin_target = jul_margin_target + aug_margin_target + sep_margin_target + oct_margin_target + nov_margin_target + dec_margin_target +
->                    
->     ytd_adjustments = jul_margin_adj + aug_margin_adj + sep_margin_adj + oct_margin_adj + nov_margin_adj + dec_margin_adj +
->                       jan_margin_adj + feb_ma
->     ytd_margin = jul_margin + aug_margin + sep_margin + oct_margin + nov_margin + dec_margin +
->                  jan_margin + feb_margin + mar_margin + apr_margin + may_ 
```

这显然不会发生在短 SQL 代码上，而只会发生在长代码上。这可能是由我的终端（Fedora 17 Gnome 终端）引起的，还是 mysql CLI 的问题？

我以前从未在终端遇到过这样的问题。它只发生在 mysql cli 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T17:54:56.510

将 SQL 写入文件，即：query.sql，然后使用`source`MySQL CLI 中的命令。

```
$ vi query.sql
$ mysql -h db.host.tld -u user -p
mysql> use mydatabase
mysql> source query.sql 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T20:42:42.543

粘贴到 MySQL CLI 客户端很棘手，因为它使用 Readline 进行交互式行编辑。Readline 将某些输入解释为控制序列，并且不会将它们逐字传递给 MySQL 客户端。在您的情况下最有可能导致问题的字符是制表符，通常用于 SQL 中的缩进目的，但在 Readline 中用于*制表符完成*。在查询过程中无意完成的选项卡可能会产生非常意外的结果，并且通常很难确定它引入干扰的确切位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T22:09:54.173

我认为 Sammitch 在这里是正确的，但我相信该解决方案只有在您登录到 mysql 所在的机器时才有效。以下应该可以在任何地方工作。

```
$ vi query.sql
$ mysql -h db.host.tld -u user -p mydatabase < query.sql 
```

粘贴到 CLI 总是让我紧张！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T19:23:59.480

当您粘贴到 mysql 服务器上终端中的文件时，会发生这种情况吗？您很可能在通过网络粘贴时遇到了缓冲区问题。但是我会检查粘贴到同一服务器上的文件，如果可行，那么是 mysql cli 导致了一些问题，但我敢打赌这只是网络延迟导致问题。

# php - 使用 PHP 在 LinkedIn API 上进行公司搜索？

> ID：12965786
> 
> 赞同：0
> 
> 时间：2012-10-19T00:36:08.653
> 
> 标签：php, api, oauth, linkedin

这让我发疯。我一直在尝试各种事情，但我就是想不通。LinkedIn的文档很糟糕......

我需要做的很简单：我需要搜索公司（使用关键字）并检索公司 ID。我在设置 OAuth 请求和发出请求时遇到问题。关于如何做到这一点的任何建议，尤其是在不安装任何 PHP 库的情况下？

仅供参考，我的代码：我从[这里](http://oauth.googlecode.com/svn/code/php/)获得了 OAuth.php 。

```
require_once 'OAuth.php';
$base_url   = 'http://api.linkedin.com/v1/company-search';
$consumer   = new OAuthConsumer('mykey', 'mysecret');
$token      = new OAuthToken('tokenkey', 'tokensecret');
$parameters = array (keyword => 'Apple');
$request    = OAuthRequest::from_consumer_and_token($consumer, $token, "GET", $base_url, $parameters);
print_r($request); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:10:41.870

您正在使用我推荐的一个很好的 OAuth 库，但在我看来，您在 Linkedin 库中丢失了，或者至少您没有包含完整的代码。

在任何情况下，尝试使用 simple-linkedinphp 库，它使用您上面的 oauth 库。过去我不得不使用一些库，这是最好的库之一，特别是如果您要使用 Faceted 搜索。确保您还检查了[快速](http://code.google.com/p/simple-linkedinphp/wiki/QuickStart?tm=6#Quick_Start_Guide)入门指南，它将对您有很大帮助，以及课程参考。公司搜索 API 功能可以在[这里](http://code.google.com/p/simple-linkedinphp/wiki/Reference#Company_Search_API)找到。

您始终可以将该`raw()`函数用于上述函数不支持的任何自定义调用。我不得不用它来打一些电话。

# ruby-on-rails - 在 Ruby 中将一个数组拆分为 2 个单独的数组

> ID：12965791
> 
> 赞同：-2
> 
> 时间：2012-10-19T00:36:53.923
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-on-rails-3, hash

我有一个带有一些键值对的哈希，如下所示：

```
@level2 = @l2.inject(Hash.new(0)) { |hash,element|
hash[element] +=1
hash } 
```

我根据键对散列执行一些排序。

```
@level2 = @level2.sort_by { |x, _| x }.reverse 
```

现在我假设 sort_by 给了我一个数组数组。我想把它分成 2 个数组，这样我的第一个数组应该包含所有键，第二个数组应该包含所有值。

hash#keys 和 hash#values 在对哈希进行排序后无法访问。所以这在这种情况下不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T00:39:10.160

无论您如何制作哈希，它都会有一个`Hash#keys`方法和一个`Hash#values`. 它们都返回您似乎想要的数组。

```
keys_array   = @level2.keys
values_array = @level2.values 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T20:20:09.227

您可以遍历数组数组并将每个元素添加到新数组中。这将保持元素的顺序。

```
keys_array = []
values_array = []
@level2.each do |key, value|
  keys_array << key
  values_array << value
end 
```

# css - 如何在 jquery ui 对话框中有一个固定的顶部横幅？

> ID：12965793
> 
> 赞同：0
> 
> 时间：2012-10-19T00:37:24.420
> 
> 标签：css, jquery-ui, jquery-ui-dialog

我目前打开了一个大小为 875x600 的 jq ui 对话框。我有一个顶部横幅，其中包含一些信息，当用户滚动对话框的内容时，我想将这些信息保留在该固定位置。对话框也是可移动的，因此横幅显然必须与它保持一致。
如果需要，这是横幅代码。grid_14 是 820 像素

```
<div class="row" id="PatientHeader">
    <div class="grid_14 patientNameHeader">
        <div class="column grid_14">
            <h2>lastname, firstname</h2>
        </div>
    </div>
    <div class="grid_14 patientInfoHeader">
        <div class="column grid_6">
            <h2><i>HICN:</i><br></h2>
        </div>
        <div class="column grid_4">
            <h2><i>DOB:</i><br> mm/dd/yyyy</h2>
        </div>
        <div class="column grid_4">
            <h2><i>Sex:</i><br>Female</h2>
        </div>
    </div>
</div> 
```

谢谢！

**更新：**
我用下面的代码让它保持原样，但是如果用户移动对话框或使用向上/向下键，则横幅会留在视口中而不是对话框中。

```
#PatientInfoHeader {
    background-color: rgba(1, 1, 1, 0.8);
    box-shadow: 0 0 8px 0 #000000;
    color: rgba(1, 1, 1, 0.8);
    height: 138px;
    padding-top: 0;
    position: fixed;
    top: 95px;
    width: 840px;
    z-index: 9999;
}
#ClaimsWrapper{width: 840px; position: absolute;}
#ClaimsContent{position: relative; top: 120px;} 
```

# cocoa - 防止 Escape 键关闭带有关闭框的 NSPanel

> ID：12965798
> 
> 赞同：3
> 
> 时间：2012-10-19T00:38:53.360
> 
> 标签：cocoa, nswindow, nspanel, responder-chain

有谁知道防止转义键`NSPanel`在键窗口时关闭的最佳方法？我的面板是一个子窗口，我希望它的行为更像是窗口的半永久性部分，更像是一个抽屉，对于其中的文本控件，我想让 Escape 键取消编辑。

我最近在 Cocoa 文档中发现了更多关于 windows 和 Escape 键的信息。在 NSResponder 类参考中，它说“窗口向第一响应者`cancelOperation:`发送默认操作消息，然后消息从那里向上传播到响应者链”。`cancelOperation:`对于 , 似乎有所不同`NSPanel`，并且窗口在没有第一响应者`cancelOperation:`接到呼叫或 NSTextView 代表接到他们的`doCommandBySelector:`呼叫的情况下关闭。

考虑到我一直在做 OS X 工作，我对响应者链的进出的了解是可耻的。我在想我需要让`keyDown:`我的`NSPanel`子类表现得像一个普通的窗口。我尝试覆盖`NSPanel`and can catch `keyDown:`，将呼叫转发到`NSWindow`'s`keyDown:`而不是`super`，但没有任何变化，Escape 仍然关闭了窗口，没有消息给第一响应者。尝试这样做是否合理？

然后我尝试完全重新实现我的面板子类' `keyDown:`，让它这样做：

```
[self.firstResponder cancelOperation:self] 
```

我认为这会让我的文本字段按照它通常期望的方式处理转义，也许如果没有文本字段是第一响应者，那么呼叫将结束。但是，我试过了，面板就像以前一样简单地关闭了。显然我没有在正确的水平上拦截事情。

有谁知道在低级按键事件和面板关闭之间运行的方法序列是什么，或者我需要覆盖什么来拦截它并确保`cancelOperation:`我的第一响应者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-05-01T19:15:14.370

快速移植 keith-knauber 的答案：

```
class ValueEditor : NSObject, NSControlTextEditingDelegate {
enum CommandType {
    case none
    case accept
    case next
    case prev
    case cancel
}

class func commandTypeType(for command: Selector) -> CommandType {
    let commandType: CommandType

    switch command {
    case #selector(NSStandardKeyBindingResponding.insertLineBreak(_:)) :
        fallthrough
    case #selector(NSStandardKeyBindingResponding.insertNewline(_:)) :
        fallthrough
    case #selector(NSStandardKeyBindingResponding.insertNewlineIgnoringFieldEditor(_:)) :
        fallthrough
    case #selector(NSStandardKeyBindingResponding.insertParagraphSeparator(_:)) :
        commandType = .accept

    case #selector(NSStandardKeyBindingResponding.insertTab(_:)) :
        fallthrough
    case #selector(NSWindow.selectNextKeyView(_:)) :
        fallthrough
    case #selector(NSStandardKeyBindingResponding.insertTabIgnoringFieldEditor(_:)) :
        commandType = .next

    case #selector(NSStandardKeyBindingResponding.insertBacktab(_:)) :
        fallthrough
    case #selector(NSWindow.selectPreviousKeyView(_:)) :
        commandType = .prev

    case #selector(NSStandardKeyBindingResponding.cancelOperation(_:)) :
        commandType = .cancel

    default:
        commandType = .none
    }

    return commandType
}

// MARK: - NSControl delegate

func control(_ control: NSControl,
             textView: NSTextView,
             doCommandBy commandSelector: Selector) -> Bool {
    let commandType: CommandType = ValueEditor.commandTypeType(for: commandSelector)

    switch commandType {
    case .cancel:
        control.abortEditing()

        // When the user hits 'ESC' key with a field editor active, cancel the field editor,
        // but return `true` here so that the NSPanel doesn’t close.
        // Hitting 'ESC' a second time will close the NSPanel.
        return true

    default:
        return false
    }

} 
```

}

不要忘记将 ValueEditor 实例设置为 NSTextView 对象的委托！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T21:41:08.073

在您的笔尖或代码中的某处，将您的 NSTableView 委托设置为您的控制器。

请注意，setDelegate: 与 setDatasource:! 不同。

就我而言：@interface ValueEditor：NSObject

```
 + (ValueEditorCmdType)cmdTypeForSelector:(SEL)command
  {
     ValueEditorCmdType cmdType = kCmdTypeNone;
     if ( command == @selector(insertLineBreak:) || command == @selector(insertNewline:) || command == @selector(insertNewlineIgnoringFieldEditor:) || command == @selector(insertParagraphSeparator:))
        cmdType = kCmdTypeAccept;
     else if (  command == @selector(insertTab:) || command == @selector(selectNextKeyView:)  || command == @selector(insertTabIgnoringFieldEditor:))
        cmdType = kCmdTypeNext;
     else if ( command == @selector(insertBacktab:) || command == @selector(selectPreviousKeyView:))
        cmdType = kCmdTypePrev;
     else if ( command == @selector(cancelOperation:) )   
        cmdType = kCmdTypeCancel;
     return cmdType;
  }

  #pragma mark - NSControl delegate
  - (BOOL)control:(NSControl *)control textView:(NSTextView *)textView doCommandBySelector:(SEL)command
  {
     ValueEditorCmdType cmdType = [ValueEditor cmdTypeForSelector:command];
     if ( cmdType == kCmdTypeCancel )
     {
        [control abortEditing];  

        // when user hits 'ESC' key with a field editor active, cancel the field editor,
        // but return YES here so that NSPanel doesn't close.  
        // Hitting 'ESC' a 2nd time will close the NSPanel.
        return YES;
     }
     return NO;
  } 
```

# php - 如何使用 PHP 获取页面访问者所在的国家/地区？

> ID：12965801
> 
> 赞同：0
> 
> 时间：2012-10-19T00:39:10.190
> 
> 标签：php, api, ip, country

对于我正在开发的网站，我希望它能够说出每个国家/地区有多少用户访问了我的网站，但我很好奇的是如何获取用户的国家/地区（可能来自他们的 IP？）？我已经数小时四处寻找 API，但找不到任何像样的东西。有人有什么建议吗？谢谢您的帮助 ：）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T00:41:33.637

您可以使用[geoplugin.net等外部 API](http://www.geoplugin.net)

```
$xml = simplexml_load_file("http://www.geoplugin.net/xml.gp?ip=76.109.14.196");
echo $xml->geoplugin_countryName ; 
```

输出国家

```
United States 
```

完整的 XML 响应

```
<geoPlugin>
<geoplugin_request>76.109.14.196</geoplugin_request>
<geoplugin_status>200</geoplugin_status>
<geoplugin_city>West Palm Beach</geoplugin_city>
<geoplugin_region>FL</geoplugin_region>
<geoplugin_areaCode>561</geoplugin_areaCode>
<geoplugin_dmaCode>548</geoplugin_dmaCode>
<geoplugin_countryCode>US</geoplugin_countryCode>
<geoplugin_countryName>United States</geoplugin_countryName>
<geoplugin_continentCode>NA</geoplugin_continentCode>
<geoplugin_latitude>26.761600494385</geoplugin_latitude>
<geoplugin_longitude>-80.091598510742</geoplugin_longitude>
<geoplugin_regionCode>FL</geoplugin_regionCode>
<geoplugin_regionName>Florida</geoplugin_regionName>
<geoplugin_currencyCode>USD</geoplugin_currencyCode>
<geoplugin_currencySymbol>&#36;</geoplugin_currencySymbol>
<geoplugin_currencyConverter>1</geoplugin_currencyConverter>
</geoPlugin> 
```

获取 IP 的简单函数

```
function getIP() {
    if (!empty($_SERVER['HTTP_CLIENT_IP'])) {
        $ip = $_SERVER['HTTP_CLIENT_IP'];
    } elseif (! empty($_SERVER['HTTP_X_FORWARDED_FOR'])) 
    {
        $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];
    } else {
        $ip = $_SERVER['REMOTE_ADDR'];
    }
    return $ip;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T00:41:50.677

基本的做法是记录传入的IP地址（它在`$_SERVER['REMOTE_ADDR']`），然后使用地理定位数据库将其转换为国家信息。

请记住，您需要使您的地理位置数据库保持最新。

有几个地方提供地理定位数据库。一些成本（它们往往更准确和更新）但免费的通常也相当不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-15T08:55:35.177

有时我们需要根据访问者所在的国家/地区来管理内容或货币。通常每个开发人员都会遇到这种情况，他们试图找到更好的解决方案。您可以在此处详细找到该文章 - [http://virallangaliya.blogspot.in/2013/04/how-to-find-city-and-country-of-visitor.html](http://virallangaliya.blogspot.in/2013/04/how-to-find-city-and-country-of-visitor.html)

# excel - 使用 Doubles (Excel) 的 VBA 溢出不正确

> ID：12965805
> 
> 赞同：2
> 
> 时间：2012-10-19T00:39:47.807
> 
> 标签：excel, vba, double, overflow, rsa

出于某种原因，以下语句的计算结果为零。我认为这是由于溢出，但所有中间值似乎都在双精度范围内。

```
DiffieHellmanKey = (43 ^ 47) - (53 * Fix((43 ^ 47) / 53)) 
```

我认为它是溢出的，因为当我用不同的数字（如下）执行它时，它会产生正确的值 29。

```
DiffieHellmanKey = (5 ^ 22) - (53 * Fix((5 ^ 22) / 53)) 
```

是什么赋予了？现在，回到让我溢出的原始数字。所有涉及的变量都是双精度数。如果我将其计算为工作表公式而不是在 VBA 中，它甚至都不起作用：

```
=(43 ^ 47) - (53 * ROUNDDOWN(((43 ^ 47) / 53), 0)) 
```

如果我使用等效形式（如下）在 VBA 中实现上述示例，则会得到 -1.75357E+62 的错误结果。

```
DiffieHellmanKey = (43 ^ 47) - (53 * WorksheetFunction.RoundDown(((43 ^ 47) / 53), 0)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:57:28.847

```
? (43^47) 
 5.92949097309764E+76

? 53*Fix((43^47)/53)
 5.92949097309764E+76 

? (53*Fix((43^47)/53)) = (43^47)
True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T01:25:22.997

你是对的，但你的问题不是溢出，而是有效数字。

**Microsoft Excel 中的数字不能超过 15 个有效数字，但小数可以大到 127。**

来源：http: [//msdn.microsoft.com/en-us/library/office/ff838588.aspx](http://msdn.microsoft.com/en-us/library/office/ff838588.aspx)

这是您的原始公式发生的情况：

`(43 ^ 47) - (53 * Fix((43 ^ 47) / 53))` 简化为`(43 ^ 47) - fix(43 ^ 47)` 那么 (43^47) 的长度约为 76 位，因此它们都被削减到相同的数量并等于 0。

VBA 中最大的变量类型是“十进制”，它只有 29 位有效位。您将无法在本机使用 Visual Basic 执行这么大的数学运算。

# binding - 可以将接口绑定到特定类中的类型吗？

> ID：12965813
> 
> 赞同：1
> 
> 时间：2012-10-19T00:40:29.180
> 
> 标签：binding, ninject

Ninject（最新版本）可以将接口绑定到特定类中的类型吗？我的意思是...假设我有两个课程..

ClassA 和 ClassB，在构造函数中都有 IContext 注入。可以说将 IContext 绑定到 ClassA 的 ContextA 和将 IContext 绑定到 ContextB 到 ClassB 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T04:26:48.110

除了使用命名绑定，您还可以使用条件绑定，它需要更少的代码并且更安全：

```
Bind<IContext>().To<ContextA>().WhenInjectedInto<SomeClassThatNeedsAContext>();
Bind<IContext>().To<ContextB>().WhenInjectedInto<SomeOtherClassThatNeedsBContext>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T00:49:20.897

一种方法是使用命名绑定。

```
kernel.Bind<IContext>().To<ContextA>().Named("A");
kernel.Bind<IContext>().To<ContextB>().Named("B");

kernel.Bind<SomeClassThatNeedsContext>().ToSelf().WithConstructorArgument("context",ninjectContext=>ninjectContext.Get<IContext>("A"));
kernel.Bind<SomeOtherClassThatNeedsContext>().ToSelf().WithConstructorArgument("context",ninjectContext=>ninjectContext.Get<IContext>("B")); 
```

另一种方法可能是单独使用“WithConstructorArgument”

```
kernel.Bind<SomeClassThatNeedsAContext>().ToSelf().WithConstructorArgument("context",ninjectContext=>ninjectContext.Get<ContextA>()); 
```

为了避免混淆，Ninject 也有上下文的概念，不要将它与您提供的示例 IContext 等混淆。

我从经验中发现的一件事是，如果我发现自己经常这样做，那么我的界面或类设计中的某个地方就会出现缺陷。也许你真的需要两个不同的接口？

# emacs - Emacs：如何消除自动完成弹出窗口中的空白模式？

> ID：12965814
> 
> 赞同：17
> 
> 时间：2012-10-19T00:40:35.757
> 
> 标签：emacs, elisp, dot-emacs

这是出现问题的屏幕截图：

![伊姆古尔](../Images/406a64561c18a4a35fe5eec1b9d9f4a0.png)

如您所见，空白字符妨碍了自动完成的弹出文本，使事情看起来非常糟糕。

真的，我希望它看起来像这样：

![伊姆古尔](../Images/0e06dc8138b1ea1705182817a509f40b.png)

有没有人能够使用空白模式但消除它在自动完成的东西中弹出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T09:36:49.440

Prelude 问题跟踪器中存在[关于自动完成和空白模式之间兼容性的问题](https://github.com/bbatsov/prelude/issues/19)，该问题在其评论中具有以下解决方法（与原始版本相比有所改进）：

```
(defvar my-prev-whitespace-mode nil)
(make-variable-buffer-local 'my-prev-whitespace-mode)

(defadvice popup-draw (before my-turn-off-whitespace activate compile)
  "Turn off whitespace mode before showing autocomplete box"
  (if whitespace-mode
      (progn
        (setq my-prev-whitespace-mode t)
        (prelude-turn-off-whitespace))
    (setq my-prev-whitespace-mode nil)))

(defadvice popup-delete (after my-restore-whitespace activate compile)
  "Restore previous whitespace mode when deleting autocomplete box"
  (if my-prev-whitespace-mode
      (prelude-turn-on-whitespace))) 
```

本质上，这会在显示弹出窗口时禁用整个缓冲区的空白模式。

该问题也在[popup.el 问题跟踪器](https://github.com/auto-complete/popup-el/issues/32)中报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-15T09:43:39.593

重做示例以使其工作（部分）。

有以下问题阻止@lunaryorn 的示例工作

*   双重激活弹出式绘图建议会导致`my-prev-whitespace-mode`丢失存储的信息
*   在 popup-draw 之前激活 popup-delete 建议只会关闭空白模式，因为默认值为`my-prev-whitespace-mode`nil。

因此，我进一步改进了最初的解决方法以解决这两个困难。

```
(defun my:force-modes (rule-mode &rest modes)
  "switch on/off several modes depending of state of
    the controlling minor mode
  "
  (let ((rule-state (if rule-mode 1 -1)
       ))
    (mapcar (lambda (k) (funcall k rule-state)) modes)
  )
)

(require 'whitespace)

(defvar my:prev-whitespace-mode nil)
(make-variable-buffer-local 'my:prev-whitespace-mode)
(defvar my:prev-whitespace-pushed nil)
(make-variable-buffer-local 'my:prev-whitespace-pushed)

(defun my:push-whitespace (&rest skip)
  (if my:prev-whitespace-pushed () (progn
    (setq my:prev-whitespace-mode whitespace-mode)
    (setq my:prev-whitespace-pushed t)
    (my:force-modes nil 'whitespace-mode)
  ))
)

(defun my:pop-whitespace (&rest skip)
  (if my:prev-whitespace-pushed (progn
    (setq my:prev-whitespace-pushed nil)
    (my:force-modes my:prev-whitespace-mode 'whitespace-mode)
  ))
)

(require 'popup)

(advice-add 'popup-draw :before #'my:push-whitespace)
(advice-add 'popup-delete :after #'my:pop-whitespace) 
```

该解决方案仍然存在缺陷。只有在显示菜单时才会禁用空白模式。虽然只有一个候选替代品，但空白模式继续扰乱屏幕。

这个问题很可能是因为函数选择不好，用建议来破坏。当需要禁用空白模式时，应该有更合适的调用。但除了开发者之外，没有人能说出它们的名字。

# php - php。round() 工作奇怪

> ID：12965816
> 
> 赞同：1
> 
> 时间：2012-10-19T00:40:45.793
> 
> 标签：php, decimal, rounding

这是代码：

```
$val = 65.5401000000000001;
return round($val ,2); 
```

我期望得到 65.54，但得到 65.54000000000001。为什么它会这样工作？以及如何获得期望值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T00:43:03.530

PHP.ini 文件中的`precision`设置值太高。最好将其保持在默认值 15 以防止这种情况发生。基本上，您所看到的是浮点数无法准确处理实数的结果。

# android - onListItemClick() 中位置和行 id 之间的实际区别

> ID：12965817
> 
> 赞同：29
> 
> 时间：2012-10-19T00:40:55.667
> 
> 标签：android, user-interface, android-listview

我对`postion`和`row id`in之间的区别感到困惑`ListActivity.onListItemClick()`。

该文档具有以下内容：

```
position  The position of the view in the list
id        The row id of the item that was clicked 
```

两者之间有什么实际区别吗？我假设，由于有两个不同的参数，存在值不同的情况，但根据文档中使用的措辞，很难看出这种差异可能是什么。是否其中一个可以保存由某个`Cursor`或其他特殊功能提供的数据库行 ID 的值？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-19T01:08:25.643

> **position** : 视图在列表中的位置
> **id** : 被点击项的行 id

位置从 0 开始，从 ListView 的顶部到底部，而要获得正确的行 id，传递给适配器的游标包含一个名为“_id”的列，表示表中每一行的唯一 id .

如果你使用的是一个ArrayAdapter，`position`并且`id`变得一样。id 将是的返回值，`Adapter.getItemId(int)`因此如果您使用 ArrayAdapter，它将与位置相同 - 快速搜索`ArrayAdapter`源代码显示它正在使用返回位置；计算出身份证。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-07-02T12:41:59.797

[Lazy Ninja](https://stackoverflow.com/a/12966006/383414)的回答大部分是正确的，但是忽略了使用`ArrayAdapter`带有通过调用`ListView.addHeaderView(View)`方法添加的标题视图的情况。

如果您的列表有一个标题项目，它将位于位置 0。

所以列表中的第一个“真实”项目将具有：

*   `position`= 1
*   `id`= 0

一般来说，`position`= `id`+ *number_of_header_views*

* * *

如果您决定将标题视图添加到已经正常工作的代码列表中，那么意识到这一点很重要。

如果您使用 访问您的项目`position`，那么您的代码需要按照以下几行进行更新：

*   用作`position - 1`索引
*   用作`id`索引
*   使用`ListView.getItemAtPosition(int)`而不是`Adapter.getItem(int)`

另请参阅此问题以进行相关讨论：

*   [带有标题和 toast 的 ListActivity 选择了错误的列表项](https://stackoverflow.com/questions/12031432/listactivity-with-header-and-toast-selecting-wrong-list-item)

# c++ - 如何解决 C++ 中针对 AST 上的访问者模式的标头重复问题

> ID：12965819
> 
> 赞同：7
> 
> 时间：2012-10-19T00:41:21.970
> 
> 标签：c++, header

**请注意：这些是描述一般困境的代码片段。完整的代码确实包括“包括警卫”/#pragma once/whathaveyou。**

我正在实现用于遍历 AST 的访问者模式，并想知道解决以下问题的 C++ 方法是什么：

我有 AST.h，它具有基本的 AST 节点类声明：

```
 class Node
    {
    public:
        virtual void accept(Visitor* v) {v->visit(this);}
    }; 
```

连同用于声明、表达式等的所有具体节点子类。

然后我有 ASTVisitor.h，它声明了访问者界面，大致如下：

```
 class Visitor
    {
    public:
        Visitor() {}
        virtual ~Visitor() {}

        virtual void visit(StringElement* e) {}
        virtual void visit(RealElement* e) {}
        virtual void visit(IntegerElement* e) {}
        ... 
```

问题是，AST.h 需要 ASTVisitor.h 以便接受方法知道访问者对象有访问方法。也就是说，Visitor 和 visit() 都被声明为`virtual void accept(Visitor* v) {v->visit(this);}`. 但与此同时，ASTVisitor.h 需要 AST.h 以便 Visitor 类知道 Node 的所有具体子类都存在。也就是说，例如，StringElement 被声明为`virtual void visit(StringElement* e)`

但是，在 AST.h 中包含 ASTVisitor.h 和在 ASTVisitor.h 中包含 AST.h 会导致访问者类没有被 Node 类“看到”，因此，它作为接受参数的类型无效。此外，像`class Visitor;`在 AST.h 中那样进行前向声明只能解决方法签名的类型问题，但在方法内部`v->visit(this)`仍然无效，因为前向声明没有说明访问者类的方法。

那么解决这个问题的 C++ 方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T01:03:09.373

是的，有一种方法可以在 C++ 中做到这一点。您需要使用前向声明，如果需要，还需要拆分声明和定义。这是一个示例（请阅读评论以获取解释）：

```
#include <cstdio>
#include <string>

/// --- A.hpp ---

// First, you have to forward declare a visitor type.
class Visitor;

// Then declare/define a node base class (interface).
class Node {
  public:
    Node() {}
    virtual ~Node() {}

    // Note that Visitor, as a type, is referenced here, but none of its
    // "body" is used, so forward declaration is enough for us.
    virtual void accept(Visitor & v) = 0;
};

/// --- B.hpp (includes A.hpp) ---

// Then, to declare the actual interface for a visitor, we must play the same
// trick with forward declaration, but for specific node types:
class NodeA;
class NodeB;

// And once those types are "pre-declared", declare visitor interface.
class Visitor {
  public:
    Visitor() {}
    virtual ~Visitor() {}

    virtual void visit(const Node & node);
    virtual void visit(const NodeA & node);
    virtual void visit(const NodeB & node);
};

/// --- C.hpp (includes B.hpp) ---

// Once visitor is declared, declare/define specific nodes.
class NodeA : public Node {
  public:
    std::string node_name;

    NodeA() : node_name("I am a node of type A!") {}
    virtual ~NodeA() {}
    virtual void accept(Visitor & v) { v.visit(*this); }
};

class NodeB : public Node {
  public:
    std::string node_name;

    NodeB() : node_name("B node here!") {}
    virtual ~NodeB() {}
    virtual void accept(Visitor & v) { v.visit(*this); }
};

// --- B.cpp (includes B.hpp and C.hpp) ---

// Now, nodes are declared, so that we can define visitor's methods.
// Note that if you don't need to use "node" parameters, this can
// as well go with declaration and there is no need to "define" this later.
void Visitor::visit(const Node & node) {
    printf("Base visitor got base node\n");
}

void Visitor::visit(const NodeA & node) {
    printf("Base visitor got node A\n");
}

void Visitor::visit(const NodeB & node) {
    printf("Base visitor got node B\n");
}

// --- YourProgram.[cpp|hpp] includes at most C.hpp --

// Than, at any point in your program, you can have a specific visitor:
class MyVisitor : public Visitor {
  public:
    MyVisitor() {}
    virtual ~MyVisitor() {}

    virtual void visit(const Node & node) {
        printf("Got base node...\n");
    }

    virtual void visit(const NodeA & node) {
        printf("Got %s\n", node.node_name.c_str());
    }

    virtual void visit(const NodeB & node) {
        printf("Got %s\n", node.node_name.c_str());
    }
};

// And everything can be used like this, for example:
int main()
{
    Visitor generic_visitor;
    MyVisitor my_visitor;

    NodeA().accept(generic_visitor);
    NodeA().accept(my_visitor);
    NodeB().accept(generic_visitor);
    NodeB().accept(my_visitor);
} 
```

...顺便说一句，不要忘记使用[包含保护](http://en.wikipedia.org/wiki/Include_guard)，否则您可能最终会多次包含同一个文件，这将导致很多错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T01:22:37.080

需要明确的是，这不是关于访问者模式的问题。它更多地是关于递归包含问题......

首先，您应该确保在您的项目中使用单独的编译。也就是说，将接口放在 .h 文件中，将实现放在 .cpp 文件中。从您的问题来看，这是否是这种情况并不是很清楚，但是您对 Node::accept() 的实现不应该在 IMO 标头中。

### 前向声明

当使用单独编译时，您可以利用前向声明。头文件中引用的类型不需要编译器知道这些类型的接口，可以简单地在头文件的顶部声明。因此，例如，在 AST.h 中您不需要包含 ASTVisitor.h，只需执行以下操作（再次假设您已将 accept() 的实现移动到 cpp (AST.cpp) 文件中。

```
class Visitor;
class Node
{
public:
    virtual void accept(Visitor* v);
}; 
```

请注意，这是可行的，因为编译器不需要了解有关 Visitor 类的任何信息。它仅作为指针 (Visitor*) 引用，因此编译器不需要知道接口或实现（内存占用）。

### 预处理器。

如果您打算将 accept() 的实现留在头文件中，则可以使用预处理器方法。无论如何，我总是推荐这是一个好的做法。将所有头文件包装在 #ifndef 块中。例如，在 AST.h 中（我仍然有前向声明）：

```
#ifndef ast_h
#define ast_h

class Visitor;

class Node
{
    ...
}

#endif //ast_h 
```

然后也在 ASTVisitor.h

```
#ifndef astvisitor_h
#define astvisitor_h

class StringElement;
class RealElement;
class IntegerElement;

class Visitor
{
    ...
}

#endif //astvisitor_h 
```

这将阻止编译器尝试包含并因此在单个编译单元中多次重新定义该类。

从上面代码的外观来看，如果您不想使用预处理器，您可能只需使用单独的编译和前向声明即可。让我知道事情的后续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T00:45:45.327

创建、编译和链接包含以下实现的文件 AST.cpp `accept()`：

```
void Node::accept(Visitor* v) {v->visit(this);} 
```

现在，ASTVisitor.h 包含 AST.h，而 AST.h 声明`class Visitor;`. CPP 文件包括这两个头文件。

为什么`accept`声明为`virtual`？

对于“真正的”接口，在's 方法的声明中替换`{}`为。`= 0;``Visitor`

**编辑**：考虑您的实施，并在弗拉德的回答的帮助下，我现在知道出了什么问题。使用“奇怪的重复模板”模式来避免重复执行`accept`：

```
class Node {
    void accept(Visitor* v) = 0;
}

template <class ME>
class NodeAcceptor : public Node {
    void accept(Visitor* v);
}

template <class ME>
void NodeAcceptor<ME>::accept(Visitor* v) { v->accept(static_cast<ME*>(this)); } 
```

每个`NodeSubclass`从`NodeAcceptor<NodeSubclass>`.

这确保`accept()`调用了正确的方法。

# p2p - 如何使用 JXTA 发现最近的对等点？

> ID：12965820
> 
> 赞同：0
> 
> 时间：2012-10-19T00:41:27.677
> 
> 标签：p2p, jxta

我有一个使用 JXTA 协议的 p2p 网络。是否有可能发现哪些对等点最接近特定对等点？

tks。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:55:44.623

我是jxse2.6的新研究人员，对于您的问题，我认为您应该发现对等广告。TheDiscoveryService.getRemoteAdvertisements（null，peer，null，null，0，new Edge_Maxime_The_Socializer（）），并制作一个linster 显示对等信息。

# java - Method.otherMethod 和 otherMethod 之间的区别？

> ID：12965826
> 
> 赞同：1
> 
> 时间：2012-10-19T00:41:55.790
> 
> 标签：java, list, class, linked-list

以下是创建 Huffman 树的项目中文件的摘录。当“公共类HLinkedList”自行初始化时，HTreeNode的.next、.left、.right等方法的单独文件（也如下所示）在HLinkedList的文件中工作没有问题。一旦“extends java.util.Abstract~”放置到位，HTreeNode 方法就不能被引用，我不得不将 HTreeNode 复制粘贴到同一个文件中，这就是第一行代码显示它的原因。将这两者放在同一个文件中的问题是它会导致 HLinkedList.HTreeNode 和 HTreeNode 之间发生冲突（我认为），因为我保留了 HTreeNode 文件以防万一。

```
public class HLinkedList<HTreeNode> extends java.util.AbstractSequentialList<HTreeNode>
{

public class HTreeNode {

    public HTreeNode left;
    public HTreeNode right;
    public HTreeNode next;
    public int frequency;
    public char value;
    public String code;
    public HTreeNode(int freq, char val, HTreeNode l, HTreeNode r, HTreeNode n, String code) // code is the path taken to this node, how to explain it in code?
    {
        value = val;
        frequency = freq;
        left = l;
        right = r;
        next = n;
        code = ""; // just initialized ,but have to think through logic.
    }
}

 HTreeNode head;
static int nItem;

public HLinkedList() //constructor
{
    head = null; //inital value
    nItem = 0;//counter

}

public void insertIntoPosition(HTreeNode node, int position) //inserts into position
{
    //first, the case where it's already in the list.
        HTreeNode currNode = head;
        while(currNode.next != null)
        {
            if(currNode.value == node.value)
            {
                currNode.frequency++;
            }

            currNode = currNode.next;           
        }
        if(currNode.value == node.value)
        {
            currNode.frequency++;
        } 
```

HTreeNode 文件：

```
public class HTreeNode {

    public static  HTreeNode left;
    public HTreeNode right;
    public HTreeNode next;
    public int frequency;
    public char value;
    public String code;
    public HTreeNode(int freq, char val, HTreeNode l, HTreeNode r, HTreeNode n, String code) // code is the path taken to this node, how to explain it in code?
    {
        value = val;
        frequency = freq;
        left = l;
        right = r;
        next = n;
        code = ""; // just initialized ,but have to think through logic.
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:51:55.077

如果你想扩展`java.util.AbstractSequentialList<E>`，那么你应该扩展通用版本而不是原始版本。

您的编译器抱怨是因为您没有导入类，或者您的方法不是公共的，或者您没有以正确的方式调用它们（可能您将它们设为非静态并尝试在类本身上调用）。

**更新**

* * *

我不确定您要达到的目标，但相信不会产生任何编译器错误（带有一些评论）-

```
//E is a type parameter, meaning HLinkedList<E> is generic
public class HLinkedList<E> extends java.util.AbstractSequentialList<E> {

    //I think you can keep this private here, this only helps you to implement your
    //version of AbstractSequentialList, for anyone who will be using HLinkedList
    //are not going to worry about it
    private static class HTreeNode {
        public HTreeNode left;
        public HTreeNode right;
        public HTreeNode next;
        public int frequency;
        public char value;
        public String code;

        public HTreeNode(int freq, char val, HTreeNode l, HTreeNode r, HTreeNode n, String code)  {
            value = val;
            frequency = freq;
            left = l;
            right = r;
            next = n;
            code = ""; 
        }
    }

    private HTreeNode head;
    private int nItem; //made this non-static, each instance will need it's own copy

    public HLinkedList()  {
        this.head = null;
        this.nItem = 0;
    }

    public void insertIntoPosition(E element, int position)  {
        // probably create a new node here for element
        // and fix it at the location specified
    }

    //This is an abstract method declared in AbstractSequentialList
    //You need provide an implementation of it
    @Override
    public ListIterator<E> listIterator(int index) {

        return null;
    }

    //This is an abstract method declared in AbstractSequentialList
    //You need provide an implementation of it    
    @Override
    public int size() {

        return 0;
    }
} 
```

现在想象一下，以下是客户将如何使用`HLinkedList`-

```
HLinkedList<Integer> list = new HLinkedList<Integer>();
//or
HLinkedList<String> list = new HLinkedList<String>(); 
```

# regular-language - 抽引引理，条件 1

> ID：12965828
> 
> 赞同：2
> 
> 时间：2012-10-19T00:42:01.833
> 
> 标签：regular-language, pumping-lemma

> 令 B 为语言 {0 ^n 1 ^n | n >= 0} 即 0 和 1 必须具有相同的长度
> 
> 令 B 中的 s 为字符串 0 ^p 1 ^p
> 
> 假设 B 是正则的，所以 s 必须能被 s = xyz 整除，其中 xy ^i z i>=0 仍在 B 中（泵引理的三个条件的条件 1）。
> 
> 考虑 xy ^i z 的情况，其中 i = 2 所以 xyyz：泵 y 全为 0
> xyyz 有更多的 0 和 1，因此它不能在 B 中。因此，B 不是规则的。

我很难理解如果 y 在 xyyz 中全为 0，那么 # of 0s > # of 1s

为什么不能|xyy| = |z| 那么它将具有相同的 0 和 1 数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T01:35:00.357

'Pump y with all 0s' 不是很清楚，但如何解决的一个例子如下：

```
Pick some value for y: let's say y = '0'.
Pick some value for i: i = 1
Then s = xyz.  We will assume this holds true for the moment. 
```

现在，由于我们假设 B 是正则的，我们知道 - 对于任何 i 值 - 由 xy ^i z 形成的字符串也应该在 B 中！让我们试试 xyyz，就像你建议的那样。

……哦哦。你看到问题了吗？我们必须保持 y 不变，但这样做意味着我们只是创建了一个字符串，它的 0 比 s 多一个，但没有额外的 1 ！我们刚刚证明 y 不能为 0。好吧，该死。

现在考虑：是否存在任何不适用的 y 值？将 0 添加到 y 只会使问题变得更糟！

这是一个非常非正式的证明演练，但希望它有助于理解它为什么起作用。

# c# - 将变量从 EditorTemplate 传回页面或布局

> ID：12965835
> 
> 赞同：0
> 
> 时间：2012-10-19T00:42:40.647
> 
> 标签：c#, asp.net-mvc, razor, viewbag

我厌倦了谷歌搜索并没有找到确切的答案。

我知道我可以通过`additionalViewData`参数将视图中的日期传递给模板`.EditorFor()`，`.DisplayFor()`但是我想要从模板返回数据！

我`Date.cshtml`在我的`~/Views/Shared/EditorTemplates/`. 我的模型属性已经有这样的东西：

```
public class Person
{
    [DisplayFormat(DataFormatString = "{0:d}")]
    [DataType(DataType.Date)]
    public Nullable<DateTime> BirthDate { get; set; }
} 
```

和观点：

```
@Html.EditorFor(model => model.BirthDate) 
```

现在我只想在视图使用日期模板时加载 datepicker 脚本。所以我尝试`RequireDatePicker`在我的模板中使用这样的：

```
@model DateTime?
@Html.TextBox(...)
@{ViewBag.RequireDatePicker = true;} 
```

并在底部`_Layout.cshtml`：

```
 @Scripts.Render("~/bundles/jquery")
    @if (ViewBag.RequireDatePicker == true)
    {
        <script type="text/javascript">
            if (!Modernizr.inputtypes.date) {
                // Todo: use Modernizr.load
                $(function () {
                    $("input[type='date']").datepicker();
                });
            }
        </script>
    } 
```

问题是我刚刚意识到`ViewBag`/`ViewData`与视图/部分和显示/编辑器模板具有不同的上下文。做这个的最好方式是什么？

* * *

**修复** 我可以通过这样的路由数据将数据从模板传递回视图：

```
@{ViewContext.RouteData.DataToken["requireDatePicker"] = true;} 
```

但是我最终没有传递数据，而只是这样：

1.  捆绑`"~/bundles/jqueryui"`那个

    *   从中删除 jquery ui 日期选择器功能（并移至`"~/bundles/jqueryui-datepicker"`）
    *   包括`Modernizr.inputtypes.date`检查并`Modernizr.load`加载`"~/bundles/jqueryui-datepicker"`
2.  无需修改`_layout.cshtml`即可检查`RequireDatePicker`. `@Scripts.Render("~/bundles/jquery")`并且已经包含`@Scripts.Render("~/bundles/jqueryui")`了足够的正弦波。`Modernizr.load`

3.  无需传递`RequireDatePicker`from `Date.cshtml`to view 或 _Layout.cshtml as`Modernizr.load`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T03:09:14.157

您可以创建动态 javascript 包，如下文所述

[http://neimke.blogspot.co.nz/2011/12/composing-child-views-with-bundles.html](http://neimke.blogspot.co.nz/2011/12/composing-child-views-with-bundles.html)

基本上你的编辑器模板调用以下代码

```
@{
  var bundle = Microsoft.Web.Optimization.BundleTable.Bundles.GetRegisteredBundles()
    .Where(b => b.TransformType == typeof(Microsoft.Web.Optimization.JsMinify))
    .First();

  bundle.AddFile("~/Scripts/DatePicker.js");
} 
```

但是您可能希望将 Where 子句替换为找到特定捆绑包的子句，也许是专门用于包含子视图的 javascript 的子句。

如果您想发疯，您可能会扩展 razor 视图引擎或 WebViewPage 以查找与呈现的每个视图匹配的 View.cshtml.js 并将其添加到包中。

# java - 以编程方式触发完整的堆栈转储？

> ID：12965836
> 
> 赞同：3
> 
> 时间：2012-10-19T00:42:51.483
> 
> 标签：java, jvm, signals, stack-trace

当我向我的 java 进程发送 SIGQUIT 命令（使用 kill -3 或 kill -QUIT ）时，它会将所有堆栈的跟踪打印到 stderr，其中包含有关持有的锁和死锁检测的信息。我可以从程序内部以某种方式触发它吗？每次某个操作花费太长时间时，我都想自动执行此操作。

我知道可以获得堆栈跟踪（请参阅[Is there a way to dump a stack trace without throwing an exception in java?](https://stackoverflow.com/questions/944991/is-there-a-way-to-dump-a-stack-trace-without-throwing-an-exception-in-java)，[Thread dump programmatically /JDI (Java Debugger Interface)](https://stackoverflow.com/questions/239544/thread-dump-programmatically-jdi-java-debugger-interface)）。但我想查看全部的所有内容：堆栈跟踪、线程状态、持有的锁、阻塞的锁、死锁检测等，即我发送 SIGQUIT 时得到的所有内容；不仅仅是堆栈跟踪。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-21T23:42:11.507

是的你可以。我一直在成功地使用此代码来调试随机触发的并发错误：

```
package utils.stack;

import java.io.IOException;
import java.io.UncheckedIOException;
import java.lang.management.ManagementFactory;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.time.LocalDateTime;
import java.util.function.Supplier;
import javax.management.JMX;
import javax.management.MBeanServer;
import javax.management.MalformedObjectNameException;
import javax.management.ObjectName;

public interface DiagnosticCommand {
    String threadPrint(String... args);

    DiagnosticCommand local = ((Supplier<DiagnosticCommand>) () -> {
        try {
            MBeanServer server = ManagementFactory.getPlatformMBeanServer();
            ObjectName name = new ObjectName("com.sun.management", 
                "type", "DiagnosticCommand");
            return JMX.newMBeanProxy(server, name, DiagnosticCommand.class);
        } catch(MalformedObjectNameException e) {
            throw new AssertionError(e);
        }
    }).get();

    static void dump() {
        String print = local.threadPrint();
        Path path = Paths.get(LocalDateTime.now() + ".dump.txt");
        try {
            byte[] bytes = print.getBytes("ASCII");
            Files.write(path, bytes);
        } catch(IOException e) {
            throw new UncheckedIOException(e);
        }
    }
} 
```

它需要 Java 8 和 HotSpot 作为 JVM，因为它模仿 jstack 正在做的事情，除了在同一个进程中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:22:10.113

不是一个完整的解决方案，但它应该给你方向：

```
public StringBuffer getInfoXmlString() {
StringBuffer serverInfo = new StringBuffer(3000);

serverInfo.append("<ServerInfo>");
ThreadGroup rootGroup = Thread.currentThread().getThreadGroup();
ThreadGroup parent;
while ((parent = rootGroup.getParent()) != null) {
  rootGroup = parent;
}

serverInfo.append("<Threads>\r\n");
serverInfo.append(listThreads(rootGroup, "  "));
serverInfo.append("</Threads>\r\n");

serverInfo.append("</ServerInfo>\r\n");
}

private StringBuffer listThreads(ThreadGroup group, String indent) {
StringBuffer threadInfo = new StringBuffer(5000);
threadInfo.append(indent);
threadInfo.append("<ThreadGroup name=\"");
threadInfo.append(group.getName());
threadInfo.append("\" class=\"");
threadInfo.append(group.getClass().getName());
threadInfo.append("\">\r\n");

int nt = group.activeCount();
Thread[] threads = new Thread[nt * 2 + 10];
nt = group.enumerate(threads, false);

// List every thread in the group
for (int i = 0; i < nt; i++) {
  Thread t = threads[i];
  threadInfo.append(indent);
  threadInfo.append("  <Thread name=\"");
  threadInfo.append(t.getName());
  threadInfo.append("\" class=\"");
  threadInfo.append(t.getClass());
  threadInfo.append("\" alive=\"");
  threadInfo.append(t.isAlive());
  threadInfo.append("\"/>\r\n");
}
// Recursively list all subgroups
int ng = group.activeGroupCount();
ThreadGroup[] groups = new ThreadGroup[ng * 2 + 10];
ng = group.enumerate(groups, false);
for (int i = 0; i < ng; i++) {
  threadInfo.append(listThreads(groups[i], indent + "  "));
}
threadInfo.append(indent);
threadInfo.append("</ThreadGroup>\r\n");

return threadInfo;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-06T15:09:41.193

我找到了这个选项

```
ThreadMXBean threadMxBean = ManagementFactory.getThreadMXBean();

for (ThreadInfo ti : threadMxBean.dumpAllThreads(true, true)) {
    System.out.print(ti.toString());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-01T10:19:35.223

我使用此代码获取带有胎面转储信息的字符串

```
 public static String generateThreadDump() {
        final StringBuilder dump = new StringBuilder();
        final ThreadMXBean threadMXBean = ManagementFactory.getThreadMXBean();
        final ThreadInfo[] threadInfos = threadMXBean.getThreadInfo(threadMXBean.getAllThreadIds(), 100);
        for (ThreadInfo threadInfo : threadInfos) {
            dump.append('"');
            dump.append(threadInfo.getThreadName());
            dump.append("\" ");
            final Thread.State state = threadInfo.getThreadState();
            dump.append("\n   java.lang.Thread.State: ");
            dump.append(state);
            final StackTraceElement[] stackTraceElements = threadInfo.getStackTrace();
            for (final StackTraceElement stackTraceElement : stackTraceElements) {
                dump.append("\n        at ");
                dump.append(stackTraceElement);
            }
            dump.append("\n\n");
        }
        return dump.toString();
    } 
```

# c# - C# 类层次结构中的深度复制/克隆方法 - 我是否需要到处都有具体的实现？

> ID：12965841
> 
> 赞同：6
> 
> 时间：2012-10-19T00:43:17.083
> 
> 标签：c#, polymorphism

假设我有以下类层次结构（包括基本接口）：

```
IAction -> (abstract) BaseAction -> (concrete) ImmediateAction -> (concrete) MovementAction 
```

现在，假设 IAction 公开了一个方法（好吧，实际上是 IAction 实现的不同接口，但让我们在这里保持简单！）：

```
// Returns a new IAction instance deep copied from the current instance.
IAction DeepClone(); 
```

目前很好？我们有我们的深拷贝方法，并且`ImmediateAction`有一些它想要复制的属性，所以它不仅提供了 的实现`DeepClone()`，而且还提供了一个拷贝构造函数：

```
//Base Action implementation
protected BaseAction(BaseAction old)
{
    this.something = old.something;
}

//Immediate Action Implementation
protected ImmediateAction(ImmediateAction old)
   : base(old)
{
    this.anything = old.anything;
}

public IAction DeepClone()
{
    return new ImmediateAction(this);
} 
```

现在，假设`MovementAction`它里面没有任何与 a 相关的东西`DeepClone()`，所以它没有实现方法或复制构造函数。

我遇到的问题是：

```
IAction x = new MovementAction();
IAction y = x.DeepClone();

//pleaseBeTrue is false
bool pleaseBeTrue = y is MovementAction; 
```

现在，我明白这里发生了什么——`MovementAction`没有实现`DeepClone()`，所以`ImmediateAction.DeepClone()`被调用，它实例化了一个新的`ImmediateAction`. 因此，`y`上面示例中的类型是`ImmediateAction`而不是`MovementAction`。

所以，在这个冗长的序言之后，我的问题是：这种情况的最佳实践是什么？我卡住了吗？我是否只*需要*为层次结构中的每个类*都*实现一个`DeepClone()`方法 ？我在这里使用的模式是否不正确，还有*更好的方法*吗？

 **最后一点：如果可能的话，我想避免反思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T01:35:34.603

所以是的，你有两个选择：

*   每次都执行 DeepClone() 并详细说明（列出所有未共享的属性）
*   或使用“quick&dirty”但使用反射共享实现

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T05:09:16.640

可以使用扩展方法并进行增量克隆

```
public static class DeepCopyExt
{
    public static T DeepCopy<T>(this T item)
        where T : ThingBase, new()
    {
        var newThing = new T();
        item.CopyInto(newThing);
        return newThing;
    }
}

public abstract class ThingBase
{
    public int A { get; set; }

    public virtual void CopyInto(ThingBase target)
    {
        target.A = A;
    }
}

public class ThingA : ThingBase
{
}

public class ThingB : ThingA
{
    public int B { get; set; }

    public override void CopyInto(ThingBase target)
    {
        var thingB = target as ThingB;

        if(thingB == null)
        {
           throw new ArgumentException("target is not a ThingB");
        }

        thingB.B = B;
        base.CopyInto(thingB);
    }
}

class Program
{
    static void Main(string[] args)
    {
        var b = new ThingB
        {
            A = 1,
            B = 3
        };

        //c is ThingB
        var c = b.DeepCopy();

        var b1 = new ThingA
        {
            A = 1,
        };

        //c1 is ThingA
        var c1 = b1.DeepCopy();

        Debugger.Break();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T00:51:22.500

通常，您需要在具体类中实现您的克隆方法。实际上，如果 ImmediateAction 像您在顶部所说的那样抽象，则您发布的这段代码将无法编译：

```
return new ImmediateAction(this); 
```**

# gwt - GWT MVP 部件组成

> ID：12965844
> 
> 赞同：1
> 
> 时间：2012-10-19T00:43:32.470
> 
> 标签：gwt, mvp, composition, code-reuse

我们一直在使用推荐的 GWT 方法以 MVP 方式构建应用程序的一部分。我们使用的逻辑基于 Google 的示例 - Presenter 获取/准备数据并将其设置在 View 上，并且 View 包含对它调用的 Presenter 的引用（例如在 UiHandlers 中）。

我们构建的应用程序的某些部分应该在其他视图中重用。例如 - 有时是应用程序一部分的“主视图”的视图 - 可以在应用程序另一部分的弹出窗口中使用（当然，在另一种情况下，视图/演示者的初始化方式不同，但基本上是一样的）。

做这样的事情的正确方法是什么？如果不求助于丑陋的 hacky 东西，我似乎找不到合适的。

例如 - 如果我将重用组件的展示器放在主视图中 - 很容易初始化重用组件，但在主展示器中接收结果却很难看。这可以通过传递一个 runnable 或创建一个自定义处理程序或将父 Presenter 本身传递给重用的 Presenter 来解决。

所有这些方法对我来说似乎都不正确，而且看起来很丑陋。有什么想法/经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:51:47.933

您所描述的是能够由 2 个不同的演示者控制的视图。以接口的形式抽象出通用 API 后面的那些演示者就足够了。

您还可以将其视为在两个不同视图中使用的复合小部件。然后，复合小部件将公开事件和公共 API，两个视图都可以连接到它们的特定演示者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:49:20.640

查看活动和地点，它可以帮助您设计和构建您的应用程序。

[https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces) 。

# php - 在 php（3php 脚本）中使用 Session 变量进行循环，并带有 Excel 表的表单复选框

> ID：12965850
> 
> 赞同：0
> 
> 时间：2012-10-19T00:44:18.677
> 
> 标签：php, mysql

```
<?php
session_start(); 
 // $filename = "Report_" . date('MmDY') . ".xls";
 // header("Content-type: application/octet-stream");
 // header("Content-Disposition: attachment; filename=\"$filename\"");  
 // header("Pragma: no-cache");
 // header("Expires: 0");

include ('../connection.php');
include ('../libchart/classes/libchart.php');

$calendarDate1 = $_SESSION['dateCalendarONE'];
$calendarDate2 = $_SESSION['dateCalendarTWO'];  
$inputValue = $_SESSION['menuInputVALUE'];

   $sql = ("
SELECT *
FROM `tally`, `category`
WHERE tally.catid = category.catid AND
date BETWEEN '" . $calendarDate1 . "' AND '" . $calendarDate2 . "'
        AND CATLABEL='" . $inputValue . "'
GROUP BY `catlabel`
");
 $rec = mysql_query($sql) or die (mysql_error());

$num_fields = mysql_num_fields($rec);

//loop count
for($i = 0; $i < $num_fields; $i++ )
{
    $header .= mysql_field_name($rec,$i)."\t";
}
//Oraganize information on the database.
while($row = mysql_fetch_assoc($rec))
{

    $line = '';
    foreach($row as $brotocol)
    {                                            
        if((!isset($brotocol)) || ($brotocol == ""))
        {
            $brotocol = "\t";
        }
        else
        {
            $brotocol = str_replace( '"' , '""' , $brotocol );
            $brotocol = '"' . $brotocol . '"' . "\t";
        }
        $line .= $brotocol;
    }
    $data .= trim( $line ) . "\n";
}

$data = str_replace("\r" , "" , $data);

if ($data == "")
{
    $data = "\n BROTOCOL_ERROR: contact support!!!\n";                        
}

print "$header\n$data";
?> 
```

传递会话变量时，excel 的导出不会循环并仅读取 1 行。但是当 sql 语句被硬编码时，它会根据需要循环遍历尽可能多的行。循环算法有错误吗？还是我必须在代码中添加另一个while循环？

# jquery - 在 JQuery 中滑动水平 div

> ID：12965853
> 
> 赞同：1
> 
> 时间：2012-10-19T00:44:49.110
> 
> 标签：jquery, html, css

我正在尝试制作一个由包装 div 两侧的“左”和“右”按钮控制的滑动 div 模块，但我在找出最佳方法时遇到了一些麻烦。

该模块的 HTML 结构如下：

```
<div class="wrapper">
                <div class="scrollLeft">
                    <span>Left</span>
                </div>
                <div class="scrollingDivs">
                    <div class="scrollThis">Some content</div>
                    <div class="scrollThis">different content</div>
                    <div class="scrollThis">more content</div>
                    <div class="scrollThis">even more content</div>
                    <div class="scrollThis">and more content</div>
                </div>
                <div class="scrollRight">
                    <span>Right</span>
                </div>  
            </div> 
```

对应的 CSS 如下所示：

```
.wrapper{
width: 720px;
float: left;
height: 146px;
position: relative;
}
.scrollLeft, .scrollRight{
display: inline-block;
width: 20px;
height: 130px;
text-indent: -99999px;
cursor: pointer;
}
.scrollLeft{
background: url('../img/left.png') no-repeat;
float: left;
margin-right: 16px;
}
.scrollRight{
background: url('../img/right.png') no-repeat;
float: right;
}
.scrollLeft:hover{
background: url('../img/left-hl.png') no-repeat;
}
.scrollRight:hover{
background: url('../img/right-hl.png') no-repeat;
}
.scrollingDivs{
width: 672px;
margin-left: 28px;
position: absolute;
margin-top: 5px;
overflow: hidden;
height: 146px;
}
.scrollThis{
display: inline-block;
background: #fff;
border: 1px solid rgba(65,65,66,0.3);
border-top: 0;
border-bottom: 0;
width: 160px;
height: 140px;
padding-left: 5px;
padding-right: 5px;
padding-top: 3px;
padding-bottom: 3px;
margin-right: 0;
margin-left: -8px;
line-height: 16px;
left: 0;
} 
```

它还有更多内容，但这是它的基本要点。

因此，当单击 scrollLeft 时，scrollThis div 应该稍微透明并向左移动 - 第一个应该看不见，而更靠右的应该会出现。理想情况下，我还会检查以确保滚动的 div 在任一端是否会发生另一种效果（可能是 scrollLeft 箭头发光或其他东西）。

因此，我为此开始使用 JQuery，但遇到了如何真正让它们移动的早期问题。由于这一切的设置方式，使用 left-=50 进行动画似乎不起作用。到目前为止，这就是我所拥有的，尽管现在充其量只是初级。这只是对“单击左”部分的测试。

```
 <script>
$(document).ready(function(){
    $('.scrollLeft').click(function(){
        $('.scrollThis').animate({
            opacity: '0.25',
            left: '-=50'
            }, 500, 'linear', function(){});    
        });
    });
  </script> 
```

在我的测试中发生的是，不透明度会消失，是的，并且 div 将全部接收到左侧属性的 -=50，但它们不会移动。我应该如何更好地构建 JS 或 CSS 以获得预期的效果？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T01:01:56.640

如果为容器设置动画怎么办？它似乎使事情发生了变化：

```
$('.scrollingDivs').animate({ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:14:52.450

我完全是为了学习，但是当你可以利用这样的东西时，为什么要重新发明轮子呢？

Cycle Plugin 非常灵活，可以做任何你想做的事情。

[http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T17:23:09.537

我为此找到了一个很棒的插件 - jCarousel。它需要一些相当厚重的蒙皮，但我的部分需要进行一些小的定制才能让它完美地工作。[http://sorgalla.com/jcarousel/](http://sorgalla.com/jcarousel/)

# java - Java 静态数组修改

> ID：12965855
> 
> 赞同：1
> 
> 时间：2012-10-19T00:45:31.643
> 
> 标签：java, arrays, static

我有以下两个 java 类（如下所列） Class BookInfo 声明静态数组块

```
 public class BookInfo {

    // Global arrays accessible by all methods

    public static String[] isbnInfo;
    public static String[] bookTitleInfo;
    public static String[] authorInfo;
    public static String[] publisherInfo;
    public static String[] dateAddedInfo;;
    public static int[] qtyOnHandInfo;
    public static double[] wholesaleInfo;
    public static double[] retailInfo;

    static {

        isbnInfo = new String[] {

                                "978-0060014018",
                                "978-0449221431",
                                "978-0545132060",
                                "978-0312474881",
                                "978-0547745527"

                                };

        bookTitleInfo = new String[] {

                                "The Greatest Stories",
                                "The Novel",
                                "Smile",
                                "The Bedford Introduction to Drama",
                                "AWOL on the Appalachian Trail"

                                };

        authorInfo = new String[]  {

                                 "Rick Beyer",
                                 "James A. Michener",
                                 "Raina Telgemeier",
                                 "Lee A. Jacobus",
                                 "David Miller"

                                };

        publisherInfo = new String[] {

                                "HerperResource",
                                "Fawcett",
                                "Graphix",
                                "Bedford St. Martins",
                                "Mariner Books"

                                };

        dateAddedInfo = new String[] {

            "05/18/2003", 
            "07/07/1992", 
            "02/01/2010", 
            "09/05/2008", 
            "11/01/2011"

            };

        qtyOnHandInfo = new int[] {7, 5, 10, 2, 8};

        wholesaleInfo = new double[] {12.91, 7.99, 6.09, 54.99, 10.17};

        retailInfo = new double[] {18.99, 3.84, 4.90, 88.30, 14.95};

    }

    public static void BookInfo() {

        System.out.println("             Serendipity Booksellers");
        System.out.println("                Book Information\n");       

        for(int i = 0; i < isbnInfo.length; i++){

            System.out.println("ISBN: " + isbnInfo[i]);
            System.out.println("Title: " + bookTitleInfo[i]);
            System.out.println("Author: " + authorInfo[i]);
            System.out.println("Publisher: " + publisherInfo[i]);
            System.out.println("Date Added: " + dateAddedInfo[i]);
            System.out.println("Quantity-On-Hand: " + qtyOnHandInfo[i]);
            System.out.println("Wholesale Cost: $ " + wholesaleInfo[i]);
            System.out.println("Retail Price: $ " + retailInfo[i]);
            System.out.println();

        }
    }
    } 
```

如何从此类访问数组列表？到目前为止只有以下内容有效，但是我如何从这个类中修改（添加、删除、编辑等）（这个类中没有主要的主要内容） BookInfo bookinfo = new BookInfo(); bookinfo.BookInfo(); System.out.println(bookinfo.isbnInfo[0]); 如何从主菜单修改（添加、删除、编辑等）

```
 import java.util.Scanner;

     public class InvMenu {
     public static void addBook(){

      System.out.println("\nYou selected Add a Book\n");
       BookInfo bookinfo = new BookInfo();
      bookinfo.BookInfo(); // only these two are working but I cannot modify arrays at all
      System.out.println(bookinfo.isbnInfo[0]);

        }

       public static void editBook(){

     System.out.println("\nYou selected Edit a Book's Record\n"); 

     }

     public static void deleteBook(){

      System.out.println("\nYou selected Delete a Book\n");

    }

    public static void printInvMenu(){

    String choice;
    int x = 0;
    boolean b;
    char letter;
    boolean menu = true;

    Scanner keyboard = new Scanner(System.in);

    System.out.println("Serendipity Booksellers");
    System.out.println("Inventory Database\n");
    System.out.println("       1\. Look Up a Book");
    System.out.println("       2\. Add a Book");
    System.out.println("       3\. Edit a Book's Record");
    System.out.println("       4\. Delete a Book");
    System.out.println("       5\. Return to the Main Menu\n");

    do{

    System.out.print("Enter your choice: ");
    choice = keyboard.nextLine();
    b = true;

    try {
        x = Integer.parseInt(choice);
        System.out.println(x);

    }

    catch(NumberFormatException nFE) {

        b = false;
        System.out.println("You did not enter a valid choice. Try again!\n");

    }

       }while(b == false);

    do{

    else if(x == 1){

        addBook();

    }

    else if(x == 2){

        editBook();

    }

    else if(x == 3){

        deleteBook();

    }

    else if(x == 4){

        System.out.println("Returning to the Main Menu\n");
        break;

    }

    else{

        System.out.println("\nYou did not enter a valid choice. Try again!\n");

    }

     printInvMenu();

    }while(x == 5);

      }
     } 
```

我可以从其他类主菜单轻松访问一些功能： BookInfo bookinfo = new BookInfo(); bookinfo.BookInfo(); System.out.println(bookinfo.isbnInfo[0]); 如何从主菜单修改（添加、删除、编辑等）？任何想法，建议都非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T01:01:10.517

[创建数组](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)后，您根本无法将新元素“添加”到数组中。从 oracle 教程页面：

> 数组是一个容器对象，它包含**固定**数量的单一类型的值。数组的**长度是****在创建**数组**时确定**的。创建后，它的长度是固定的。

 **因此，如果您想在 List 中添加和删除元素，我建议您使用[ArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)对象，它可以定义为

> List 接口的可调整大小的数组实现。

例如，您可以替换您的代码行

```
private static String[] isbnInfo; 
```

为了

```
private static ArrayList<String> isbnInfo; 
```

并像这样初始化它：

```
isbnInfo = new ArrayList<String>()
isbnInfo.add("978-0060014018");
isbnInfo.add("978-0449221431");
isbnInfo.add("978-0545132060");
isbnInfo.add("978-0547745527"); 
```

至于编辑你的数组，你可以简单地为你的私有字段添加一些公共吸气剂

```
public static String[] getIsbnInfo()
{
   return isbnInfo;
} 
```

在你的公开课上：

```
String[] isbnInfo = BookInfo.getIsbnInfo(); 
```

您还可以使用公共方法来编辑数组，例如：

```
public static void replaceIsbnInfo(int index, String isbn)
{
   isbnInfo[index] = isbn;
} 
```

在你的菜单类

```
BookInfo.replaceIsbnInfo(1, "978-0547745527"); 
```

我希望它有所帮助。干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T01:18:39.327

You've kind of mucked this thing up.

You should first create a "BookInfo" class (but not the one you defined) that contains *instance* fields of isbnInfo, bookTitleInfo, authorInfo, etc. (Just one entity for one book per field, not an array.)

Then, for each book, create and initialize the corresponding BookInfo object.

Next, either place the collection of such BookInfo objects in a searchable object such as a HashMap (for a single search field), or place them in an array of some sort and build separate HashMaps or whatever to map from search arguments to array index (anchoring all the pieces in a "Library" object).

When someone searches for a book, return the BookInfo object, which can have "getter" methods to extract the (ideally private) instance field values. This returns all info about the book in one piece.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T00:56:09.627

如果我理解正确，您想从不同的类文件访问数组的值或任何变量/函数吗？

`ClassName.VariableName = whatever;`

当你使用

`ClassName variable = new ClassName();`

每次你调用它时它都会运行那个类。确保你的变量是

`public static VariableType Variablename;`

否则您将无法调用/更改它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T03:47:58.930

ArrayList 似乎是所有选项中最灵活的。Even Effective Java 第 2 版，第 25 条：更喜欢列表而不是数组。感谢您的输入！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T00:53:09.910

您已将数组声明为私有，因此它们是私有的。您必须编写+访问器方法+来返回相应的数组，或者更优雅地编写访问、搜索、修改等单个数组条目的方法。**

# bash - 如何在 bash 的用户输入变量中转义正斜杠？

> ID：12965857
> 
> 赞同：6
> 
> 时间：2012-10-19T00:45:35.090
> 
> 标签：bash, variables, escaping, user-input

我正在编写一个脚本，以提高设置 Statamic 站点的效率。我遇到的问题是我用来替换文件中字符串的变量具有未转义的正斜杠并且是用户输入。我怎样才能确保`_site_url: http://statamic.com`它将成为`_site_url: http://example.com`？

只要不存在正斜杠，下面的代码就可以工作。

```
echo "What's your site URL? Don't forget the protocol (ex. http://)!"
read -e SITE_URL

echo "%s/_site_url: http:\/\/statamic.com/_site_url: $SITE_URL/g
w
q
" | ex _config/settings.yaml 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-27T22:44:30.790

由于您特别提到了 bash 而不是 Bourne shell 或通用 Unix shell，我建议使用 Bash 的内置搜索/替换功能：

```
echo "What's your site URL? Don't forget the protocol (ex. http://)!"
read -e SITE_URL

echo Escaped URL: ${SITE_URL//\//\\\/} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T00:48:59.633

问题是您的`ex`命令中的分隔符。我们可以放任何我们想要的东西，我`@`在这里使用：

尝试这样做：

```
 sed -i "s@_site_url: http://statamic.com/_site_url: $SITE_URL@g" _config/settings.yaml 
```

或使用您的`ex`命令：

```
echo "What's your site URL? Don't forget the protocol (ex. http://)!"
read -e SITE_URL

echo "%s@_site_url: http://statamic.com@_site_url: $SITE_URL@g
w
q
" | ex _config/settings.yaml 
```

# arrays - 从数组 Z 中找到所有可能的子数组，总和为 X

> ID：12965859
> 
> 赞同：0
> 
> 时间：2012-10-19T00:45:39.630
> 
> 标签：arrays, math, sum, combinations

我有一个相对复杂的问题，我需要一种算法来从一个总和为 X 的数组中找到所有可能的子数组，因此对于给定的数组：

```
{2,8,12,45,32,7,6,5} 
```

假设我们需要总和为 20 的子数组，有些是：

```
{8,12} {2,7,6,5} {12,6,2} 
```

但是会有如下组合：

```
{7,7,6} {5,5,5,5} {8,8,2,2} 
```

我需要所有可能的金额。

我已经完成了一个解决方案，对所有可能性进行了蛮力检查，但是它需要很长时间（在某些情况下超过 30 分钟）才能完成，所以我确实需要一个更聪明的解决方案，我一直在努力解决几个问题现在的天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:04:05.370

您的问题似乎表明重复数字的答案是可以接受的，并且您不想生成可以对总和进行排序的所有可能方式。我会以此为基础来回答。

我会在 C++ 中实现它。作为数据结构，我可能会使用这样的东西：

```
struct partial_sum {
  int min_last_summand;
  std::vector< std::pair<partial_sum*, int> > prefixes;
};

std::map<int, partial_sum*> m; 
```

这里的核心部分是地图`m`。它将总和的值映射到有关如何获得它的一些信息。您将使用`0`映射到初始化它`NULL`。该`prefixes`成员将存储有关获得给定总和的所有可能方式的数据。每对的第一部分给出一个指针，指向除最后一个之外的所有被加数的信息，而第二部分给出最后一个成员。这为您提供了一种有向无环图，因为和可以是许多和的前缀，并且和可以有许多不同的前缀，但每个前缀和的值都小于当前和的值。

中央迭代步骤将从 中删除最小元素`m`，并生成所有可能的方式，您可以将输入集中的元素添加到刚刚删除的值。因此，您将检查地图是否需要为新总和插入新条目。对于现有的和新的条目，您在`prefixes`列表中创建一个新项目，将您刚刚从地图中删除的指针作为第一部分，并将您添加的最后一个总和作为第二部分。

我只会按加法的升序（或更确切地说是非降序）生成总和，以避免生成所有排列。为了使事情更容易，我会维护这些`min_last_summand`信息。它应该始终包含列表中对的所有第二个元素中的最小值`prefixes`。生成新总和时，您可以跳过最后一个总和小于前缀的最小最后一个总和的那些，因为这意味着一个总和小于其前一个总和。您还可以避免生成总值大于目标总和的总和。

打印结果时，您必须递归从目标总和可到达的 DAG 部分，并列出从那里到 root 的所有路径`NULL`。因此，在每个递归步骤中，您都会有一个指向当前部分总和的指针。如果该指针是`NULL`，则发出一个由零和数组成的总和。否则，您将遍历所有`prefixes`. 对于每个前缀，您递归生成所有可能的方式来编写该前缀，但`min_last_summand`前提是第一个元素的 不大于当前最后一个被加数，并且只有当第二个元素不大于将跟随它的被和数时. 这意味着您必须将以下 summand 作为参数传递给递归调用。总而言之，这避免了生成带有递减步骤的总和。

上面的方法假设您的程序将在一次运行后终止，因此您不必担心释放内存。如果这样做，您可能必须存储指向您创建的所有对象的指针，以便将它们全部释放。

# php - PHP分页在其他页面上丢失了变量-解决方案是什么？

> ID：12965861
> 
> 赞同：0
> 
> 时间：2012-10-19T00:46:01.317
> 
> 标签：php

> **可能重复：**
> [PHP 分页在其他页面上丢失变量](https://stackoverflow.com/questions/11638999/php-pagination-loses-variable-on-other-pages)

我遇到了与其他成员完全相同的问题。这个问题是由另一位成员 Tatty27 提出并解决的。但是没有显示正确的脚本。有任何想法吗？

[PHP分页在其他页面上丢失变量](https://stackoverflow.com/questions/11638999/php-pagination-loses-variable-on-other-pages)

# java - 在 Java 中使用什么数据结构来添加对象和使用 subList

> ID：12965862
> 
> 赞同：1
> 
> 时间：2012-10-19T00:46:04.183
> 
> 标签：java, type-conversion

我有一个`Gerbil`用来测试我的代码的类。在 main 中，我想创建一个类型数组，`Gerbil`然后从从对象的主列表创建一个子列表开始对其执行一些操作。这是我的代码：

```
import java.awt.List;
import java.util.ArrayList;

public class HelloWorld {

    public static void main(String[] args) {
        List<Gerbil> hs = new ArrayList<Gerbil>();
        for(int i = 0; i<10; i++){
            hs.add(new Gerbil(i));
        }
        for(Gerbil i : hs) {
            i.hop();
        }

    }
} 
```

我`List<Gerbil>`说错了`The type List is ont of generic type..`。我理解错误的含义，但这让我想知道这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:48:27.623

您需要`java.util.List`从 Collections API 使用：

```
import java.util.List; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T00:50:31.237

您已导入 java.awt.List，这是一个非通用 UI 组件，用于*显示*多个项目并允许用户选择一个或多个，而不是 java.util.List，一个涵盖可索引集合的通用接口。

您可能需要在 IDE 之外进行短暂的操作才能习惯导入的作用。

# java - 搜索列表中关于 id 的最后一个值

> ID：12965864
> 
> 赞同：1
> 
> 时间：2012-10-19T00:46:12.130
> 
> 标签：java, file, search

我了解如何在 txt 文件中搜索一个值（或在这种情况下为一个 id），但通常这会返回它找到的第一个选项。

我将如何工作，以便它找到文件中与 id 相关的最后一个值并使用该值？（本例中，卡号 17 的余额为 813。

txt 文件示例

```
17,721.0
17,744.0
17,767.0
17,790.0
17,813.0 
```

我当前的搜索代码。

```
public static double readBalance(int cardNumber)
{
  double balance;  
  String line;

  try {
        File CbFile = new File("cardBalance.txt");
        BufferedReader br = new BufferedReader(
                            new InputStreamReader(
                            new FileInputStream(CbFile)));

        while((line = br.readLine()) != null) {
            if(line.indexOf(cardNumber) != -1)
                break;
        }
        String[] s = line.split("\\,");

        balance = Double.parseDouble(s[1]);
        System.out.println("Blalance of " + cardNumber +
                           " is: " + s[1]);
        br.close();
    } catch(IOException e) {
        System.out.println("read error: " + e.getMessage());
    }

  return  balance; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:52:53.873

如果您可以一次将整个文件读入内存，[lastIndexOf(String)将为您提供最后一次出现的字符串。](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#lastIndexOf%28java.lang.String%29)

如果没有，你会想要类似的东西：

```
String cardInfo;
String cardNumberString = cardNumber + ","; // makes sure that you don't get your
                                            // id in the middle of a value
while((line = br.readLine()) != null) {
    if(line.indexOf(cardNumberString) != -1)
        cardInfo = line;
} 
```

# javascript - 带有预输入和分层项的 Javascript 组合框

> ID：12965868
> 
> 赞同：5
> 
> 时间：2012-10-19T00:47:53.110
> 
> 标签：javascript, jquery, combobox, typeahead, bootstrap-typeahead

我想创建一个带有分层项目列表的组合框。我需要能够单独选择父项和子项。我还需要能够为此组合框提供预输入功能。

例如，我想在 JS 中用这些数据制作一个组合框：

加拿大

——安大略

——魁北克

美国

——马萨诸塞州

——俄亥俄州

——德克萨斯

从这个下拉列表中，我希望能够单独选择任何一个省/州。我也希望能够选择“加拿大”而不选择它的孩子。

我已经尝试过 Select2 并且一直在挖掘 JQuery UI 以查看它是否可能，但到目前为止我还不能完全实现我需要的行为。我正在使用 bootstrap 编写此页面，但 boostrap 中给定的 typeahead 似乎根本不适用于组合框（我可以看到）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T00:51:33.513

您可以使用 Chosen javascript 插件来实现这一点。 [http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:29:47.273

您可以为每个 typeahead 结果存储自定义 JS 对象，以便它可以显示和存储的不仅仅是字符串（例如类型或 ID）。使用它可以让您对国家与省/州有不同的逻辑。这是一个这样做的例子：

[https://github.com/twbs/bootstrap/pull/3682](https://github.com/twbs/bootstrap/pull/3682)

因此，在更新程序函数中，您可以根据自定义对象的逻辑来确定单击的是父对象还是子对象。

至于让父母看起来和孩子不同，我自己没有用过，但是bootstrap中有一个模板系统。查看此链接以获取示例：

[https://github.com/twbs/bootstrap/issues/2441](https://github.com/twbs/bootstrap/issues/2441)

您可能会使用它来区分父母和孩子的外观和感觉。

# assembly - 拆卸。为什么？

> ID：12965873
> 
> 赞同：0
> 
> 时间：2012-10-19T00:48:35.827
> 
> 标签：assembly

我采取了一个小的免费使用 15kb 程序并成功地将它的未压缩版本转储到一个新的 exe（大小约为 56kb）（原始打包在 UPX 中）然后我将它加载到 IDA Pro，然后快速点击离开消息告诉我导入被搞砸了（这很奇怪，因为我使用 OllyDump 的选项来修复导入表）我被带到了这个屏幕

[这是机器码吗？http://imageshack.us/a/img401/9302/68696520.png](http://imageshack.us/a/img401/9302/68696520.png)

这是汇编还是机器代码？**好的，它不是机器代码，但这被认为是汇编吗？是用这些十六进制数字编写的汇编文件还是调试器左侧的任何内容？**

[http://imageshack.us/a/img526/548/23865356.png](http://imageshack.us/a/img526/548/23865356.png)

嘿公开开始。看起来很熟悉。

[http://imageshack.us/a/img217/9457/62998986.png](http://imageshack.us/a/img217/9457/62998986.png)

如果这是机器码。人们有没有办法将机器代码转换为 ASM 代码？在您获得 ASM 代码之后，有哪些可能性？

如果退回到源代码是如此困难或几乎不可能（如一些谷歌搜索结果中所述），为什么人们首先要反汇编程序？

我想在这里了解更多关于原因的信息。我之所以这样做，是因为我选择的代码是一个非常可爱的小程序，我想从中学习和阅读，因为我是一个渴望成为专家级程序员的初学者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:54:34.963

它是汇编语言（ASM）。

人们反汇编程序以查看它们是如何工作的。如果你有足够的耐心，并且学习了相关 CPU 的语言，你就可以像阅读任何编程语言一样阅读这段代码。这需要大量的练习，但通过阅读 ASM 来弄清楚程序是如何工作的并非不可能。

如果有正确的知识和工具，将其转换回源代码是完全可能的，特别是如果程序是使用流行的编译器生成的。

# php - 从网站发送电子邮件？

> ID：12965880
> 
> 赞同：-3
> 
> 时间：2012-10-19T00:49:29.177
> 
> 标签：php, email

我将如何将文本从`textarea`（HTML）发送到电子邮件地址？最好包括/来自他们的电子邮件。我不知道从哪里开始，对不起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:50:09.627

阅读[文档](http://php.net/mail)，尝试一些示例，然后从那里开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T00:53:27.627

您也可以尝试非常易于使用但功能强大的[phpmailer类。](http://phpmailer.worxware.com/)

# parsing - GWT DateTimeFormat.parse 总是非法参数异常

> ID：12965886
> 
> 赞同：2
> 
> 时间：2012-10-19T00:50:04.560
> 
> 标签：parsing, gwt, date

不计量我传递给解析的字符串我总是在 GWT DateTimeFormat.parse 方法上遇到非法参数异常。

例如，以下代码行有什么问题：？

```
Date date = DateTimeFormat.getFormat("MM-dd-YYYY").parse("10-10-2012"); 
```

我得到：

```
java.lang.IllegalArgumentException: 10-10-2012
    at com.google.gwt.i18n.shared.DateTimeFormat.parse 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T01:46:38.077

而不是`YYYY`格式中的年份，您应该使用`yyyy`. 您指定的格式将匹配如下所示的日期：（`10-10-YYYY`因为 Y 不是特殊的日期格式字符）。

# c++ - 使用 Boost Asio 构建高性能 HTTP 兼容上传服务器或扩展 Nginx？

> ID：12965895
> 
> 赞同：3
> 
> 时间：2012-10-19T00:50:40.033
> 
> 标签：c++, architecture, nginx, boost-asio, software-design

我想听听你们对架构决策的看法。

我正在构建高性能上传服务器。简单来说，服务器的目的是从客户端接收大量文件并将它们保存在 NAS 上。

要求是：

*   文件将通过“multipart/form-data”编码的 HTTP POST 上传。
*   每个文件至少有几兆字节长。
*   客户端是计算机和移动客户端上的浏览器。
*   因为至少 50% 的客户端是移动客户端，所以我预计这些 TCP/IP 会话会很长。
*   它不应该受到[Slowloris](http://en.wikipedia.org/wiki/Slowloris)攻击的影响。
*   目标平台是 Linux CentOS 6.2。
*   当服务器接收文件时，它会将一些信息保存到数据库中，执行身份验证等。

[我目前的方法是使用Boost Asio](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio.html)自己实现所有内容（http 解析等）。我喜欢它，因为我可以更好地控制数据发生的事情。我正在考虑使用内存映射文件直接从套接字将其写入文件。

你会说将它实现为[Nginx](http://en.wikipedia.org/wiki/Nginx)的扩展可能更容易吗？考虑到上面列出的要求，Nginx 是一个可行的选择吗？

# facebook - Facebook GraphAPI，删除用户邀请

> ID：12965897
> 
> 赞同：3
> 
> 时间：2012-10-19T00:50:55.883
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我正在使用 PHP 和 FacebookAPI，除了一个奇怪的错误外，一切都差不多。
我试图在 facebook 开发者网站和谷歌上找到解决方案，但没有运气。
这是场景：

*   已创建事件 368441533230244
*   用户 100004484143351 受邀参加活动 368441533230244

现在我想从事件中删除用户。
根据 Facebook API 文档，我的 APP 拥有权限

*   rsvp_event
*   用户事件
*   朋友事件

还有很多其他的:)

现在调用api：

```
$FB->api("368441533230244/invited/100004484143351", 'DELETE'); 
```

我获得了一个异常，其中包含以下详细信息：

```
["result":protected] => array(1) {
    ["error"] => array(3) {
    ["message"] => string(8) "(#1002) "
    ["type"] => string(14) "OAuthException"
    ["code"] => int(1002)
} 
```

我无法找到有关错误代码 1002 的信息，如您所见，没有错误描述。

任何想法？：） 提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:45:04.553

[好的，这似乎是事件时区迁移](https://developers.facebook.com/blog/post/2012/08/01/platform-migration--events-timezone-support/)的副作用。

在 facebook.com 上使用 Web 浏览器创建的事件的行为就像启用了迁移一样。*但是您的应用程序可能禁用*了 Events Timezone migration 。这导致了不匹配和问题。

所以这样做：在您的应用程序中禁用事件时区迁移，并使用 Graph API 而不是 web-ui/浏览器创建事件。这将确保使用相同的迁移设置创建和修改事件。

[您可以在应用仪表板](https://developers.facebook.com/apps)> 高级 > 迁移中检查应用的迁移设置。

如果您使用[Graph API Explorer](https://developers.facebook.com/tools/explorer)创建事件，请确保从顶部的下拉列表“应用程序”中选择您的应用程序。

# google-apps-script - Gmail 出错。应用程序

> ID：12965901
> 
> 赞同：1
> 
> 时间：2012-10-19T00:51:35.623
> 
> 标签：google-apps-script

我正在尝试运行上面的脚本。我有一个包含菜单的谷歌电子表格。我希望能够在单击“电子邮件列表”菜单下的任何选项时准备好发送模板。我是新手，我正在尝试运行下面的脚本，但出现错误。我附上剧本。谁能帮我理解这里的问题是什么？

```
function onOpen() {
  var subMenus = [{name:"Title 1", functionName: "t1"},
        {name:"Title2", functionName: "t2"},
  SpreadsheetApp.getActiveSpreadsheet().addMenu("Email List", subMenus);
}

function t1() {
  var address = "test@test.com"  
  var body = "Dear Employee," +
      "Today You didnt request your logon time" +
      "Sincerely,"
    "Your Name"
    "Thank you";
  MailApp.sendEmail(address,body);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:37:16.487

你的代码有很多基本的语法错误，脚本编辑器甚至不允许保存它。但是我在其中看到的唯一“逻辑”问题是您忘记了调用中的`subject`参数`MailApp.sendEmail`。这是*固定*代码：

```
function onOpen() {
  var subMenus = [{name:"Title 1", functionName: "t1"},
                  {name:"Title2", functionName: "t2"}];
  SpreadsheetApp.getActiveSpreadsheet().addMenu("Email List", subMenus);
}

function t1() {
  var address = "test@test.com";
  var body = "Dear Employee," +
      "Today You didnt request your logon time"+
      "Sincerely,"+
      "Your Name"+
      "Thank you";

  var subject = "subject example";
  MailApp.sendEmail(address, subject, body)
} 
```

# c - 需要摆脱 memset 警告

> ID：12965905
> 
> 赞同：1
> 
> 时间：2012-10-19T00:51:58.253
> 
> 标签：c, warnings, memset

如果我编译下面的代码，我会收到这样的警告：

警告：内置函数 memset 的隐式声明不兼容 [默认启用]

```
void transform(int **a, int m, int n)
{
    int *row = malloc(m*sizeof(int));
    int *col = malloc(n*sizeof(int));
    memset(row, 0, sizeof(row));
    memset(col, 0, sizeof(col));
    [...] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T00:55:10.877

如有疑问，请查看手册页：

```
$ man memset

MEMSET(3)                BSD Library Functions Manual                MEMSET(3)

NAME
     memset -- fill a byte string with a byte value

LIBRARY
     Standard C Library (libc, -lc)

SYNOPSIS
     #include <string.h>
     ^^^^^^^^^^^^^^^^^^^ 
```

这告诉您，您需要`#include <string.h>`编译器才能看到`memset`.

另请注意，您的代码中有错误 - 您需要更改：

```
memset(row, 0, sizeof(row));
memset(col, 0, sizeof(col)); 
```

至：

```
memset(row, 0, m * sizeof(*m));
memset(col, 0, n * sizeof(*n)); 
```

# javascript - 移除 Backbone 视图的所有事件监听器

> ID：12965907
> 
> 赞同：3
> 
> 时间：2012-10-19T00:52:15.403
> 
> 标签：javascript, backbone.js

有没有办法删除骨干视图实例化的所有事件监听？例如，假设我有以下 HTML/JavaScript。单击#box 时，我想要一个弹出窗口打招呼。

```
<div id="box" style="height: 100px; width: 100px; background-color: red"></div>

var Listener = Backbone.View.extend({
    el: "#box",
    events:  {
        'click #box' : 'hello'
    },
    hello: function () {
        alert('hello!');
    }
})

var listener = new Listener(); 
```

现在，我想删除事件监听器。将侦听器设置为其他内容不起作用：

```
listener = ''; // doesn't work 
```

如何删除事件侦听器？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-19T00:58:40.423

您视图中的任何位置：

```
this.undelegateEvents(); 
```

然后，您可以稍后手动重新绑定事件`delegateEvents();`

*   [http://backbonejs.org/#View-delegateEvents](http://backbonejs.org/#View-delegateEvents)
*   [http://backbonejs.org/#View-undelegateEvents](http://backbonejs.org/#View-undelegateEvents)

我使用添加到 Backbone.View 原型的方法来轻松清理视图：

```
Backbone.View.prototype.close = function() {
    this.undelegateEvents();
    this.remove();
}

// internal usage
this.close();

// external usage
myView.close(); 
```

* * *

**编辑 19/07/2013**

Backbone v0.9.9`.listenTo()`向视图添加了该方法，使得在移除视图时可以轻松解除绑定外部事件。

你可以在这里阅读更多：

*   [Backbone.js - listenTo() 文档](http://backbonejs.org/#Events-listenTo)
*   [StackOverflow - Backbone 0.9.9：ListenTo 和 on 之间的区别](https://stackoverflow.com/questions/14041042/backbone-0-9-9-difference-between-listento-and-on)

# java - 如何在Java中将二进制转换为文本？

> ID：12965909
> 
> 赞同：3
> 
> 时间：2012-10-19T00:52:19.940
> 
> 标签：java, text, binary, ascii

> **可能重复：**
> [Java 中的二进制到文本](https://stackoverflow.com/questions/4211705/binary-to-text-in-java)

我正在编写一个可以转换多个东西的程序，但我需要有关转换二进制文件的帮助。我有我的文本到二进制工作的代码，但我不确定二进制到文本。这是触发转换的按钮的代码：

```
String code = jTextArea5.getText();
if (code == null) {
    System.out.println(jTextArea1.getText( ));
    String writing = jTextArea1.getText();

    byte[] bytes = writing.getBytes();
    StringBuilder binary = new StringBuilder();

    for (byte b : bytes) {
        int val = b;

        for (int i = 0; i < 8; i++){
            binary.append((val & 128) == 0 ? 0 : 1);
            val <<= 1;
        }
        binary.append(' ');
    }

    jTextArea5.setText("" + binary);
}
else
{
   System.out.println(jTextArea1.getText( ));
    String binary = jTextArea1.getText();

    int ascii = Integer.parseInt(binary, 2);
    char character = (char)ascii;

    jTextArea5.setText("" + character); 
} 
```

如果有人知道我可以如何修复此代码以使其正常工作，那就太好了。谢谢！

注意 - 下面的这一位是单独工作的，只是不与任何将 jTextArea5 中的二进制转换为 jTextArea1 中的文本的努力结合使用。

```
 System.out.println(jTextArea1.getText( ));
    String writing = jTextArea1.getText();

    byte[] bytes = writing.getBytes();
    StringBuilder binary = new StringBuilder();

    for (byte b : bytes) {
        int val = b;

        for (int i = 0; i < 8; i++){
            binary.append((val & 128) == 0 ? 0 : 1);
            val <<= 1;
        }
        binary.append(' ');
    }

    jTextArea5.setText("" + binary); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T01:01:36.003

将二进制转换为整数：

```
String binary = "010101";    
int ascii = Integer.parseInt(binary, 2); 
```

然后把整数转成ascii：

```
char character = (char)ascii; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T02:14:41.210

交换 5 和 1 以便它从正确的文本框中抓取二进制文件。

并使用 StringTokenizer 处理每块 8

不要忘记导入 StringTokenizer

```
 else
    {
       System.out.println(jTextArea5.getText( ));
        String binary = jTextArea5.getText();
        StringTokenizer st = new StringTokenizer(binary," ");
         while(st.hasMoreTokens()){
             int ascii = Integer.parseInt(st.nextToken(), 2);
             char character = (char)ascii;
             jTextArea1.setText(jTextArea1.getText() + "" + character); 

         }
    } 
```

此位检查 jTextArea5.getText() 中的内容

```
if (code == null) { 
```

将其更改为

```
if (code.equals("")) { 
```

并确保在开始任何转换之前清除文本框中的内容

# android - 数据库更改后 ContentLoader 无法正确刷新

> ID：12965911
> 
> 赞同：5
> 
> 时间：2012-10-19T00:52:33.433
> 
> 标签：android, android-contentprovider

我有一个 SQLiteDatabase，其数据由内容提供者管理。我正在使用选项卡式布局。第一个选项卡能够向数据库添加行，而第二个选项卡显示数据库中的项目。当我从第一个选项卡将项目添加到数据库时，当我移动到另一个选项卡时，更改*应该会反映出来。*

数据被正确地添加到数据库中，并且在第一次打开应用程序时，所有当前数据（以及在应用程序的先前版本中添加的任何新数据）都会出现。但是，向数据库添加新项目不会反映在 ListFragment 中。

```
@Override
    public void onClick(View v) {
        if(v == addSale) {
            Item item = new Item(rn(), null, 100);
            data.add(item);
            total += item.getAmount();
        } else if(v == save) {
            for(Item i: data) {
                ContentValues cv = new ContentValues();
                cv.put(DatabaseProvider.COLUMN_COST, i.getAmount());
                cv.put(DatabaseProvider.COLUMN_ITEM, i.getItem());
                cv.put(DatabaseProvider.COLUMN_PERSON, i.getPerson());
                this.getActivity().getContentResolver().insert(DatabaseProvider.CONTENT_URI, cv);
            }
            total = 0;
            data.clear();
        } else if(v == clear) {
            data.clear();
            total = 0;
        }
        items.notifyDataSetChanged();
        totalView.setText(Item.format(total));
    } 
```

这是我专门使用这些行将项目添加到数据库的地方：

```
ContentValues cv = new ContentValues();
cv.put(DatabaseProvider.COLUMN_COST, i.getAmount());
cv.put(DatabaseProvider.COLUMN_ITEM, i.getItem());
cv.put(DatabaseProvider.COLUMN_PERSON, i.getPerson());
this.getActivity().getContentResolver().insert(DatabaseProvider.CONTENT_URI, cv); 
```

正如我之前所说，项目被正确地放入数据库中，所以我有理由确定这是正确的。

这是我的 DatabaseProvider 的插入方法

```
@Override
public Uri insert(Uri uri, ContentValues initialValues) {
    if (sUriMatcher.match(uri) != TABLE) {
        throw new IllegalArgumentException("Invalid URI: " + uri);
    }

    if (initialValues == null) {
        initialValues = new ContentValues();
    }

    SQLiteDatabase db = dbHelper.getWritableDatabase();

    long rowId = db.insert(TABLE_SALES, COLUMN_COST, initialValues);

    if (rowId > 0) {
        Uri newUri = ContentUris.withAppendedId(CONTENT_URI, rowId);
        getContext().getContentResolver().notifyChange(uri, null);
        return newUri;
    }

    throw new SQLException("Failed to insert row into: " + uri);
} 
```

从各种教程和其他 SO 问题中，似乎

```
getContext().getContentResolver().notifyChange(uri, null); 
```

是让它更新的关键，它就在那里，并且被调用。但没有任何更新。

最后，显示所有数据的列表片段。

```
package org.worldsproject.android.barcode;

import org.worldsproject.android.barcode.database.DatabaseProvider;

import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.support.v4.widget.CursorAdapter;
import android.support.v4.widget.SimpleCursorAdapter;

import com.actionbarsherlock.app.SherlockListFragment;

public class RunningTotal extends SherlockListFragment implements
        LoaderManager.LoaderCallbacks<Cursor> {
    public static final String TAG = "Running Total";

    public static final int RUNNING_TOTAL_ID = 1;
    private SimpleCursorAdapter adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        String[] uiBindFrom = { DatabaseProvider.COLUMN_PERSON };
        int[] uiBindTo = { R.id.titled };

        adapter = new SimpleCursorAdapter(
                getActivity().getApplicationContext(), R.layout.list_title,
                null, uiBindFrom, uiBindTo,
                CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);

        setListAdapter(adapter);
        getLoaderManager().initLoader(RUNNING_TOTAL_ID, null, this);
    }

    @Override
    public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {
        String[] projection = { DatabaseProvider.COLUMN_ID,
                DatabaseProvider.COLUMN_PERSON};
        return new CursorLoader(getActivity(), DatabaseProvider.CONTENT_URI,
                projection, null, null, null);
    }

    @Override
    public void onLoadFinished(Loader<Cursor> arg0, Cursor cursor) {
        // TODO Auto-generated method stub
        adapter.swapCursor(cursor);
    }

    @Override
    public void onLoaderReset(Loader<Cursor> arg0) {
        // TODO Auto-generated method stub
        adapter.swapCursor(null);
    }

} 
```

[它几乎是http://mobile.tutsplus.com/tutorials/android/android-sdk_loading-data_cursorloader/](http://mobile.tutsplus.com/tutorials/android/android-sdk_loading-data_cursorloader/)的直接克隆，目前只显示数据库中每一行的名称列。它显示以前的条目，但正如我所说，不会更新。我缺少什么步骤来更新它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-23T07:06:53.117

我认为你的

```
getContext().getContentResolver().notifyChange(uri, null); 
```

可能没问题。

我看不到您的 DatabaseProvider 的查询函数，但您记得为您在查询函数中返回的光标设置 notificationUri 吗？

在 DatabaseProvider 的 query() 函数中，您应该为游标设置通知 Uri，否则即使您执行 notifyChange()，游标也不会收到通知：

```
public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
   // blah blah
   cursor.setNotificationUri(getContext().getContentResolver(), uri);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T23:00:24.620

我在使用视图寻呼机的 Fragment 上遇到了类似的问题。我意识到我没有注册 ContentObserver，所以我所做的只是将此代码添加到 onResume()

```
getActivity().getContentResolver().registerContentObserver(sUri, true, myObserver); 
```

并将 myObserver 声明为成员变量：

```
new ContentObserver(new Handler()) {
    @Override
    public void onChange(boolean selfChange) {
        getActivity().getSupportLoaderManager().restartLoader(); // With appropriate loader args here
    }
}); 
```

并确保取消注册在 onPause();

这似乎解决了我的问题，假设 ContentProvider 正确调用了 notifyChange （不过看起来你是这样）。

希望这可以帮助你！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T20:45:23.233

我认为错误在这里：

```
Uri newUri = ContentUris.withAppendedId(CONTENT_URI, rowId);
getContext().getContentResolver().notifyChange(uri, null);
return newUri; 
```

您应该使用刚刚添加的元素的 uri 调用*notifyChange*方法，即 newUri。

所以通知变成：

```
getContext().getContentResolver().notifyChange(newUri, null); 
```

# c# - 命令解析器/解释器

> ID：12965914
> 
> 赞同：1
> 
> 时间：2012-10-19T00:52:56.540
> 
> 标签：c#, .net

> **可能重复：**
> [在 C# 中解析命令行参数的最佳方法？](https://stackoverflow.com/questions/491595/best-way-to-parse-command-line-arguments-in-c)

我正在寻找一个可以提供简单命令解析的库。类似于命令行解析器的东西会很好。命令行解析器的问题在于获取实际命令并将其与选项轻松配对。

例如，我可能想打开调试。为此，我想做这样的事情。

```
debug on -f "c:\logs\debug file.txt" 
```

如果我想打开优化，我可以这样做。

```
optimize on 
```

或者

```
optimize off 
```

虽然我可以使用标准命令行解析器来完成此操作，但在实际使用标准命令行解析器之前需要进行一些预处理。我真的只是在寻找一个不需要大量调试的优雅解决方案。

附带说明一下，有没有人推荐在 .NET 中使用 python？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:59:07.407

Python 有一个内置的称为 argparse [Python argparser](http://docs.python.org/library/argparse.html#module-argparse)

对于 C#，您可以使用：[C# Argparse](https://stackoverflow.com/questions/491595/best-way-to-parse-command-line-arguments-in-c)

如果我需要自己编写一个，我会从编写一个基于堆栈的语言解释器开始，然后解析选项将非常容易。只需编写词法分析器，您就已经编写了一半的语法。

Python 是其中之一，当你将它添加到任何东西时，它会立即变得很棒。因此，您只能想象将 Python 与 .NET 结合使用会是什么样子。根据个人经验，您可以使用 IronPython 快速完成很多工作。（哦，您也可以使用 TPL（任务并行库）。

玩得开心！

# javascript - Javascript弹窗登录跨浏览器问题

> ID：12965916
> 
> 赞同：0
> 
> 时间：2012-10-19T00:53:21.700
> 
> 标签：javascript

我有一个带有 iframe 的页面。在 iframe 中，默认页面运行一些 javascript 来打开子窗口，登录到外部服务，然后在 iframe 中显示来自该外部服务的一些内容。

我的代码在 Chrome 和 IE 中运行良好，但在 Safari 和 Firefox 中却不行。在这些浏览器中，父窗口似乎忽略了用户现在登录到外部服务并显示他们的“未登录”消息而不是应该显示的信息这一事实。

这是我正在尝试做的代码。

HTML（主页）：

```
<iframe id="brief" name="brief" src="contents/somepage.php?var=WXYZ" width="962" height="600">
<p>Your browser does not support iframes.</p>
</iframe> 
```

某页.php

```
<html>
<head>
<script type="text/javascript">
window.onload = function()
        {
var code = 'WXYZ';
var login = http://www.externalsite.com/brief/html.asp?/cgi-bin/service?msg=0048&usr=username&pwd=pass';

//OPEN CHILD WINDOW AND LOGIN USING VARIABLES ABOVE, THEN CLOSE WINDOW
childWindow=window.open(login,'','width=30,height=30,location=no');
var cmd = 'childWindow.close()';
setTimeout(cmd,2000);

//REDIRECT THIS IFRAME TO BRIEFING INFORMATION
var uri = 'http://www.externalsite.com/brief/html.asp?/cgi-bin/service?msg=0092&AID=NOSEND&MET=1&NTM=1&LOC='+code;
self.location.href=uri;
}
</script>
</head>

<body>
&nbsp;
</body>
</html> 
```

我尝试调整各种 setTimeout 函数以尝试延迟脚本的某些方面以等待其他事情发生，但这似乎没有帮助。

我缺少的这段代码是否存在一些跨浏览器问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:26:02.863

`setTimeout(cmd,2000);`不会阻止脚本执行两秒钟；相反，它设置了一个将在大约 2 秒内触发的事件。在您调用 之后`setTimeout`，脚本的其余部分将立即执行：

```
// This happens right away
uri = 'http://www.externalsite.com/brief/html.asp?/cgi-bin/service?msg=0092&AID=NOSEND&MET=1&NTM=1&LOC='+code;
self.location.href = uri; 
```

它适用于任何浏览器的事实只是幸运的时机。如果您希望 iframe在弹出窗口关闭*后*刷新，请将该代码添加到您的回调中（顺便说一下，您不需要也不应该为计时器处理程序使用字符串）：

```
setTimeout(function() {
    childWindow.close();
    var uri = 'http://www.externalsite.com/brief/html.asp?/cgi-bin/service?msg=0092&AID=NOSEND&MET=1&NTM=1&LOC='+code;
    self.location.href = uri;
}, 2000); 
```

如果弹出窗口的内容在两秒钟内没有加载，即使这个解决方案也不起作用。最好的解决方案是在加载后让弹出窗口自行关闭。然后，您可以检测到它何时关闭并知道您已准备好重新加载 iframe。但是，如果这是一个您无法控制的第三方网站，您可能会陷入使用这种不太理想的解决方案。

# magento - Magento - 是否可以在管理部分添加菜单项，但仅限于某些 Magento 版本？

> ID：12965918
> 
> 赞同：1
> 
> 时间：2012-10-19T00:53:41.780
> 
> 标签：magento, menu, admin

我开发了一个 Magento 扩展，它实现了几个功能。几乎所有这些都可以在 1.4 到 1.7 的版本中完美运行，除了一个。那是一种额外的形式，很高兴拥有，但对于模块的其余部分的工作来说并不重要。
要打开该表单，需要在“管理”菜单中添加一个菜单条目。在 1.5 和 1.4 版本中，由于缺少 1.6 版本中引入的某些类，打开此类窗口会导致错误消息。

因此，我想知道如果 Magento 版本 < 1.6，是否可以**不**将菜单条目添加到 Admin 菜单。有没有办法做到这一点？

提前感谢您的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T02:11:19.257

我没有找到任何好的活动来实现这一目标。

您可以尝试观察`adminhtml_init_system_config`并检查菜单是否在`$config`. 如果是，您可以添加或删除内容。

另一种方法是重写`Mage_Adminhtml_Block_Page_Menu`或`Mage_Adminhtml_Model_Config`

但是如果你问我，重写有点矫枉过正。

# c++ - QDir::SetSorting 在 Ubuntu 上不起作用

> ID：12965919
> 
> 赞同：0
> 
> 时间：2012-10-19T00:54:01.047
> 
> 标签：c++, qt, ubuntu, directory, qdir

我对 QDir 有疑问，我有这个包含很多图像的文件夹，我需要遍历它们，但是必须对它们进行排序，所以，我正在使用它，但它在**Ubuntu**`setSorting(QDir::Name)`上不起作用。当我使用 QDirIterator 对其进行迭代时，它会随机选择给定文件夹中的图片。奇怪的是，我在 Windows（minGW 或 MSVC）上使用了相同的代码，而且效果很好。

 **```
someClass::someClass(QDir dir) {
     m_dir = dir;
     m_directory.setSorting(QDir::Name);
     QStringList filter;
     filter << QString("*.") + format << QString("*.") + "jpg";
     m_dir.setNameFilters(filter);
}
someClass::iterateDir() {
     QDirIterator it(m_dir);
     while(it.hasNext()) {
         it.next();
         qDebug() << it.fileName();

         //analayze the picture here
     }
} 
```

这里`it.fileName()`应该打印 (0.jpeg, 1.jpeg .... 3000.jpeg) 但它打印的是 (2342.jpg, 1286.jpg, 684.jpg ... 712.jpg) 我尝试使用其他`sortFlags`( `QDir::Size, QDir::LocaleAware`) 但是它们都不能在 Ubuntu 上运行。有什么我想念的吗？感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T01:04:23.590

您正在混合 2 个变量：`m_dir`和`m_directory`. 我认为这是错字，您的意思是使用相同的变量。

`QDirIterator`不支持排序。`QDir::setSorting()`只影响`QDIr:: entryInfoList()`and返回的列表`QDir:: entryList()`。使用它们中的任何一个进行排序迭代。**

# devise - 修改 Devise 的 form_for 以使 Paperclip 工作？

> ID：12965927
> 
> 赞同：0
> 
> 时间：2012-10-19T00:55:23.590
> 
> 标签：devise, paperclip, ruby-on-rails-3.2

我有点困惑。

这是`form_for`Paperclip 的 Github 存储库的入门部分：

```
<%= form_for @user, :url => users_path, :html => { :multipart => true } do |form| %> 
```

这是`form_for`使用 Devise 生成的：

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put }) do |f| %> 
```

我应该如何修改它以使 Paperclip 正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:54:38.840

只需像这样添加`:multipart => true`到 :html 参数。

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put, :multipart => true  }) do |f| %> 
```

# objective-c - 设置 UINavigationController 时“无法对类型进行比较查询：(null)”

> ID：12965934
> 
> 赞同：4
> 
> 时间：2012-10-19T00:57:04.623
> 
> 标签：objective-c, ios, uinavigationcontroller

我的应用程序在应用程序委托中崩溃。

它抛出的错误是：

由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“无法对类型进行比较查询：（null）”

我的代码如下。我已将日志记录保留在其中，因此您可以看到我一直在检查的地方：

```
self.viewController = [[ParseStarterProjectViewController alloc] initWithNibName:@"ParseStarterProjectViewController" bundle:nil];
NSLog(@"View controller is %@",self.viewController);
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
NSLog(@"Nav controller is %@",navController);
NSLog(@"Self window is %@",self.window);
self.window.rootViewController = navController; 
```

当它尝试运行最后一行时，它会中断，将 rootViewController 设置为 navController。

3 NSLog 行的结果如下：

```
View controller is <ParseStarterProjectViewController: 0x1fda0770>
Nav controller is <UINavigationController: 0x1fda1390>
Self window is <UIWindow: 0x1fd97c90; frame = (0 0; 320 480); opaque = NO; autoresize = RM+BM; layer = <UIWindowLayer: 0x1fd97d90>> 
```

对我来说似乎没有什么是空的，这就是为什么我非常困惑。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-07T21:02:00.960

我刚刚遇到了这个问题，这是因为我`equalTo:[PFUser currentUser]`在 PFQuery 中进行了操作，但当时没有登录用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:04:35.367

这真的是一个关于“我如何从崩溃日志中获取更多信息”的问题。rmaddy 的评论为我指明了正确的方向。

[肖恩在这里](https://stackoverflow.com/questions/10770648/objective-c-stack-trace)的回答让我明白了。

# c++ - C 编程 - 堆栈和堆数组声明

> ID：12965938
> 
> 赞同：4
> 
> 时间：2012-10-19T00:57:31.330
> 
> 标签：c++, c

假设我将一个数组声明为 `int myarray[5]`

或将其声明为`int*myarray=malloc(5*sizeof(int))`

* * *

这两个声明是否会*以字节数设置***相等的内存**量？不考虑前一个声明是针对堆栈的，而后者是针对堆的。

 *谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T01:02:35.597

*有一个根本的区别，这在您使用* 的方式中可能并不明显`myarray`：

*   `int myarray[5];`声明一个由五个整数组成的数组，该数组是一个自动变量（并且它是未初始化的）。

*   `int * myarray = malloc(5 * sizeof(int));`声明一个变量，它是指向 int 的指针（也作为自动变量），并且该指针使用库调用的结果进行初始化。该库调用承诺使结果指针指向一个足够大以存储五个连续整数的内存区域。

由于指针运算、数组到指针衰减和与 相同的约定`a[i]`，`*(a + i)`您可以以相同的方式使用这两个变量，即 as `myarray[i]`。这当然是设计使然。

如果您正在寻找不同之处，那么以下可能会有所帮助：五个整数数组是一个对象，并且它具有确定的大小。相比之下，`malloc`库调用不会创建任何对象。它只是留出*足够的*内存（并适当地对齐），但它可以分配更多的内存。

（在 C++ 中，内存和对象之间当然存在额外的区别。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T01:08:43.883

两者都不能保证准确分配`5*sizeof(int)`字节，尽管两者都会给你至少那么多空间（假设没有分配失败或堆栈耗尽）。

在第一种情况下，堆栈变量可能被对齐填充和/或堆栈金丝雀包围（取决于编译选项）。这些可能导致堆栈指针被调整超过`5*sizeof(int)`字节。

在第二种情况下，您`int *`在堆栈（`sizeof(int *)`字节）上分配 a，*加上*返回的空间`malloc`。`malloc`可能会以分配跟踪结构、对齐填充、链表指针等的形式分配额外的内存。因此，在这种情况下，您也不能保证准确分配`5*sizeof(int)`字节。

如果您想非常精确地了解您的内存使用情况，该`mmap`功能允许您从操作系统请求虚拟内存页面。您以这种方式请求的内存将恰好是您请求的数量（忽略内核中为跟踪这些分配而占用的空间）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T01:03:02.227

简短的回答：不，通常后者使用较小的较大内存。

长答案：内存管理肯定会使用一些额外的内存来管理返回的指针并能够跟踪它，并在稍后释放它，并且您声明一个额外的指针指向该内存。所以它的实际内存是`sizeof(int*) + malloc_overhead`. 但在第一种情况下，您恰好使用 5 个 int（可能加上对齐）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T01:12:33.920

动态分配至少需要几个额外的字节；然而，除了 5`int`大小的元素之外，指针变量还有很多字节，并且可能还有一些额外的字节来跟踪分配区域的大小，以便可以`free`正确地 d 。*

# c# - 富文本框 Color.Red 不存在

> ID：12965940
> 
> 赞同：0
> 
> 时间：2012-10-19T00:58:13.687
> 
> 标签：c#, colors, richtextbox

我有 `Rich`文本框，它的名字是`textBox1`

当我尝试这个时：

```
 textBox1.AppendText(value);
                    textBox1.SelectionColor = Color.Red; 
```

有`Red`下划线和错误：

`Error 2 'string' does not contain a definition for 'Red' and no extension method 'Red' accepting a first argument of type 'string' could be found (are you missing a using directive or an assembly reference?) Form1.cs 73 57`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:08:12.380

您的表单是否有一个名为`Color`其类型的字段或属性`string`？如果是这样，则“颜色”中的“颜色”`Color.Red`指的是该字段或属性，而不是`System.Drawing.Color`类型。

您可以通过指定命名空间来消除引用的歧义`System.Drawing`：

```
textBox1.SelectionColor = System.Drawing.Color.Red; 
```

# knockout.js - 我可以注入一个带有 knockout.js 绑定 foreach 的包装器 div

> ID：12965945
> 
> 赞同：0
> 
> 时间：2012-10-19T00:59:42.687
> 
> 标签：knockout.js

```
<div id="metro-scrollbar" data-bind="foreach: data.sections , visible: data.sections.length > 0">
    <section data-bind="foreach: $data.tiles, visible: $data.tiles.length > 0, css: { 'last' : $parent.isLastSection($index)}">
        <div data-bind="attr : {'class' : $root.getClass($data,$parentContext.$index,$index)} ">

            <div data-bind="attr : {'class' : $root.getAspectClass($data,$index)} "></div>
            <div class="live-tile">
                <span class="tile-title" data-bind="text: title, css:{'big' : bigtitle}"></span>
                <div>
                    <p>a</p>
                </div>
            </div>
        </div>
    </section>
</div> 
```

我有上面的绑定。在某些情况下，我需要在内部 div 周围注入一个包装器。

```
<div>
    <section>
        <-- if $myFunction() inject <div> -->
        <div>
            <div></div> // THIS IN HERE SHOULD BE THERE ALWAYS:
            <div >      // THIS IN HERE SHOULD BE THERE ALWAYS:
            </div>      // THIS IN HERE SHOULD BE THERE ALWAYS:
        </div>
         <-- if $myFunction() inject </div> -->
    </section>
</div> 
```

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T02:51:08.703

s093294 有正确的想法。这是一个解决方案的示例（和一个[jsFiddle](http://jsfiddle.net/g4dFD/)）：

**看法**

```
<button data-bind="click: click">Toggle</button>

<section data-bind="template: { name: templateName }"></section>

<script type="text/html" id="outer-tmpl">
    <div data-bind="template: { name: 'inner-tmpl' }">
    </div>
</script>
<script type="text/html" id="inner-tmpl">
    <div>first inner div</div>
    <div>second inner div</div>
</script> 
```

**模型**

```
viewModel = {
    toggle: new ko.observable(true),
    templateName: function () {
        return viewModel.toggle() ? 'outer-tmpl' : 'inner-tmpl';
    },
    click: function () {
        viewModel.toggle(!viewModel.toggle());
    }
}
ko.applyBindings(viewModel); 
```

# objective-c - 从 UIAlertViewDelegate 回调返回后台线程

> ID：12965946
> 
> 赞同：1
> 
> 时间：2012-10-19T01:00:03.953
> 
> 标签：objective-c, ios, core-data, grand-central-dispatch

我有一个从档案中读取的导入序列，解压缩包含的文件并为每个文件创建相应的核心数据实体。这整个过程发生在后台，并且已经为每个线程等创建了一个单独的上下文，所以一切正常。

事实证明，这个特定导入序列的一个理想特性是我们允许任何输入文件受密码保护（其中有几个包含在存档中）所以我需要检查文件是否受密码保护在这种情况下将提示用户通过`UIAlertView`.

这就是我的问题开始的地方。

我`UIAlertView`按照我应该的方式将提示发送到主线程，将我的 Importer 分配`object`为`delegate`并等待用户输入。

当用户输入密码并点击 OK/Cancel 时，委托回调仍在主线程上，因此如果没有大量工作（即存储对托管对象 ID 的引用等，创建新的），我将无法再操作相应的核心数据实体上下文等）。

**我的问题：**

是否可以返回正在执行导入过程的原始后台线程？我该怎么办？

谢谢，罗格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T19:14:26.057

我会尝试使用[调度信号量](https://developer.apple.com/library/mac/documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/doc/uid/TP40008079-CH2-SW38)。将其保存在实例变量中。

```
@interface MyClass ()
{
    dispatch_semaphore_t dsema;
}
@end 
```

然后，在后台线程方法中：

```
// this is the background thread where you are processing the archive files
- (void)processArchives
{
    ...
    self.dsema = dispatch_semaphore_create(0);
    dispatch_async(dispatch_get_main_queue(), ^{
        UIAlertView *alertView = [[UIAlertView alloc] initWithTitle: @"Title"
                                                                ...
                                                           delegate: self
                                                                ...
        ];
        [alertView show];
    });

    dispatch_semaphore_wait(self.dsema, DISPATCH_TIME_FOREVER);
    // --> when you get here, the user has responded to the UIAlertView <--

    dispatch_release(self.dsema);
    ...
} 
```

将`UIAlertView`调用此委托方法：

```
// this is running on the main queue, as a method on the alert view delegate
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    // do stuff with alertView
    if (buttonIndex == [alertView firstOtherButtonIndex]) {
        ...
        // when you get the reply that should unblock the background thread, unblock the other thread:
        dispatch_semaphore_signal(self.dsema);
        ...
    }
} 
```

# c - 将命令行字符串作为单独的字符添加到数组

> ID：12965948
> 
> 赞同：1
> 
> 时间：2012-10-19T01:00:38.163
> 
> 标签：c

我想要做的是将命令行参数作为单个字符添加到数组中。因此，当用户运行程序`./program bacon`“培根”存储在一个数组中

```
array k[]= {'b', 'a', 'c', 'o', 'n'}; 
```

我希望我解释得足够好我是编程新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:17:40.717

实际上，“bacon”将通过 argv [1](http://pubs.opengroup.org/onlinepubs/7908799/xsh/strcpy.html)传递给您，这是一个`char *`以空结尾的字符串。现在您要创建的数组也应该是 char 数组。

从逻辑上讲，您应该只是将输入 (argv [1](http://pubs.opengroup.org/onlinepubs/7908799/xsh/strcpy.html) ) 复制到新数组中。

您可以使用字符串操作函数，如[strcpy](http://pubs.opengroup.org/onlinepubs/7908799/xsh/strcpy.html)或[strncpy](http://pubs.opengroup.org/onlinepubs/7908799/xsh/strncpy.html)

**注意：**我不是直接在此解决方案中添加代码，因为您自己尝试会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:38:46.803

所以，我知道你是编程新手，但这看起来很熟悉，不是吗？

```
int main (int argc, char **argv) {
  // ...
} 
```

`char **argv`是指向 char 指针的指针，但出于您的目的，您可以认为它等同于`char *argv[]`. 区别很微妙，但值得注意，因为这个警告对于理解字符串在 C 中的工作方式至关重要。`char *argv[]`被显式键入为 char 指针数组，虽然`char **argv`可能是一个数组，但在你尝试访问它之前你不会知道像这样。鉴于它是您的主要功能，可以安全地假设它总是会被适当地实例化。

无论如何，越过切线，我们的`char **argv`main 函数中有一个以 null 结尾的字符串数组。从您的问题中，我可以看到我们应该遵循的简单路径。我将假设只期望一个论点（否则您应该能够实施处理不同情况的案例）。

1.  `argv[1]`获取传递给我们程序的第一个参数 ( ) 的长度。
2.  使用`argv[1]`.
3.  打印出我们的数组，以便我们知道它有效。

在我们的函数中，我们存储to`main`的长度，并声明我们的 size 数组。然后，我们逐个字符地遍历第一个字符串，并将每个字符存储到数组的下一个开放槽中。最后，我们重复循环并打印出数组中的每一项，以便验证它是否有效。`argv[1]``n``n`

```
int main (int argc, char *argv[]) {
  int n = strlen(argv[1]);
  char arr[n];

  int i;
  for (i = 0; i < n; i++)
    arr[i] = argv[1][i];

  for (i = 0; i < n; i++)
    printf("%c ", arr[i]);

  printf("\n");
} 
```

希望这可以帮助。干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T01:04:18.473

使用传递给 main 的参数。您已经获得了一个数组 argv[1] 来为您执行此操作。我认为你最好阅读一些像这样的文章来开始 - [http://publications.gbdirect.co.uk/c_book/chapter10/arguments_to_main.html](http://publications.gbdirect.co.uk/c_book/chapter10/arguments_to_main.html)

# python - 如何用值替换列表中的变量名？

> ID：12965954
> 
> 赞同：0
> 
> 时间：2012-10-19T01:01:22.667
> 
> 标签：python

我有两个变量如下：

```
a = "1"
b = "21" 
```

和一个清单：

```
['a', 'b', '3', '4', '5', '64'] 
```

我将如何用列表中的值替换变量名，例如：

```
['1', '21', '3', '4', '5', '64'] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T01:09:00.040

我猜你的意思不是你只需要给出变量的名称，而不是字符串？

你可以做一个“怪物”，例如：

```
a = '1'
b = '21'

els = ['a', 'b', '3', '4', '5', '64']
print [vars().get(el, el) for el in els]
# ['1', '21', '3', '4', '5', '64'] 
```

但是，如果您处于正在这样做或正在考虑这样做的情况下-是时候再考虑一下了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T01:08:22.873

首先构造一个字典进行查找？

```
lookup = {'a':'1', 'b':'21'} 
```

那么你就可以开始了：

```
print [lookup[x] if x in lookup else x for x in c ]
['1', '21', '3', '4', '5', '64'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T01:06:12.763

您只需删除引号：

```
a = "1"
b = "21"
[a, b, "3", "4", "5", "64"] 
```

输出将是`["1", "21", "3", "4", "5", "64"]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T01:08:44.087

作为其他答案的替代方法，[`eval`](http://docs.python.org/library/functions.html#eval)如果变量名称必须作为字符串存在于列表中，您可以使用。对于您的示例，以下代码：

```
eval(list[0]) 
```

将评估为 1（前提`list`是您的列表的变量）。

但是你必须小心，因为如果变量不存在，它会抛出一个`NameError`，如果你不传递一个字符串、字节或代码对象，它会抛出一个`TypeError`。

# c# - 使用虚拟覆盖方法签名

> ID：12965958
> 
> 赞同：2
> 
> 时间：2012-10-19T01:01:48.323
> 
> 标签：c#

众所周知，对类中的方法使用 virtual 关键字允许我们在其派生子类中覆盖它。然而，方法仍然必须坚持相同的签名，例如返回值、参数等。

问题：在 C# 中，我如何也可以覆盖签名？这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T01:04:03.450

这不可能。但是，如果需要，您可以创建一个重载。

**编辑**

为了让我反对`new`，请考虑您有一个基础对象以及从它继承的基础对象的情况。通过放置`new`在您尝试“更改”方法签名的方法之前，您实际上是在浪费四个键击。

```
public class Base {
    public string Foo () { return null; }
}

public class Inherited : Base {
    public new int Foo () { return 0; }
} 
```

现在，`Inherited`有两种方法：

```
public string Foo () { return null; }
public int Foo () { return 0; } 
```

您实际上并没有*更改*方法签名。因此，`new`甚至不需要关键字。没有它你会得到同样的效果：

```
public class Inherited : Base {
    public int Foo () { return 0; }
} 
```

的用途`new`是[覆盖基类的非虚拟成员](http://msdn.microsoft.com/en-us/library/435f1dw2.aspx)：

```
public class Base { 
    public string Foo () { return null; }
}

public class Inherited : Base {
    public new string Foo () { return "Something else..."; }
} 
```

但是如果你不注意这个微妙之处，你就会遇到这个问题。随着`virtual`您获得一个虚拟查找表，它将您的函数映射到正确的调用。有了`new`，你不会。如果您传入`Inherited`需要`Base`对象的位置（这当然可以），则将调用`Base`该类！`Foo()`不是，`Inherited`“覆盖” `Foo()`。

**这与覆盖虚拟成员的行为不同。**

```
public static class MyClass {
    public string MyMethod (Base @base) {
        return @base.Foo ();
    }
}

[Test]
public void then_it_should_return_non_null () {
    var obj = new Inherited ();
    var result = MyClass.MyMethod(obj);  // obj will get upcasted to Base
    Assert.That (result, Is.EqualTo(obj.Foo ())); // Assert fails!
}

[Test]
public void inherited_should_return_correct_value ()
{
    var obj = new Inherited ();
    var result = obj.Foo ();  // will access the "new" method, hiding Base's implementation
    Assert.That (result, Is.Not.Null);  // Assert passes! 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:04:16.603

`new`您可以使用关键字隐藏旧的实现。但是，基类将无法看到它。

```
class Base {
   public string Foo() { }
}

class Sub : Base {
   new public int Foo() { }
} 
```

`new`仅当调用签名相同时才需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T01:04:35.913

那时你只是在制作一种新方法。但是，如果你想简单地创建一个带有新方法签名的新方法，然后调用 base.OtherMethod(param1, param2)... 你可以。

我要说明的一点是，如果您打算创建一个与基类中名称相同但签名不同的方法，**但您仍然只想调用基类**，那么您可以。

例如：

```
// In base class - note, the "virtual" isn't necessary.
public virtual void PostMessage(string message, DateTime entryDate) { ... } 
```

然后你会想......“哦，伙计，我希望这个基类有一个不需要日期的方法的重载......我该怎么办？！”

```
// In your sub-class.
public void PostMessage(string message)
{
    base.PostMessage(message, DateTime.Now);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T01:28:09.520

您正在谈论创建一种新方法。如果名称相同，但参数不同（返回类型和参数的类型和参数数量），您实际上是在重载。

# java - 如何将菜单项添加到现有的 Android 应用程序菜单？

> ID：12965963
> 
> 赞同：2
> 
> 时间：2012-10-19T01:02:34.603
> 
> 标签：java, android, xml, layout, menu

我很新，`android development`并且无法`Menu`在应用程序的菜单中添加新项目并在点击时打开并显示菜单*视图布局*。到目前为止，我只能更改应用程序的**menu.xml**文件，这足以创建一个`button`与其他应用程序并排的文件，当您按下`Menu`按钮时会显示这些文件，但不足以让它链接到任何东西。

我的目标只是让按下按钮导致它连接到一个简单的 xml 布局或对话页面。我猜我需要更改 java 代码，但我不确定完成这项工作需要什么。我会很感激任何建议。

它似乎结束了“要在您的活动中使用菜单，您需要使用 MenuInflater.inflate() 膨胀菜单资源（将 XML 资源转换为可编程对象）。在以下部分中，您将看到如何为每种菜单类型的菜单。” 我想我需要知道的是如何将物品添加到其他物品的充气机中。

有没有人碰巧有我可以插入的香草版本？

这是一个现有代码的示例，它打开一个对话框并处理关闭和“更改”按钮：

```
private void openHelpDialog() {
    LayoutInflater li = LayoutInflater.from(this);
    View view = li.inflate(R.layout.aboutview, null); 
    TextView tv = (TextView)view.findViewById(R.id.aboutVersionCode);
    tv.setText(getVersionName() + " (revision " + getVersionNumber() + ")");
    new AlertDialog.Builder(MainActivity.this)
    .setTitle(getResources().getString(R.string.application_name) + " " + getResources().getString(R.string.menu_help))
    .setIcon(R.drawable.about)
    .setView(view)
    .setNeutralButton(R.string.menu_changes, new DialogInterface.OnClickListener() {
      public void onClick(DialogInterface dialog, int whichButton) {
          MainActivity.this.openChangesDialog();
      }
    })
    .setNegativeButton(R.string.close, new DialogInterface.OnClickListener() {
      public void onClick(DialogInterface dialog, int whichButton) {
      }
    })
    .show();  
}

private void openChangesDialog() {
  LayoutInflater li = LayoutInflater.from(this);
  View view = li.inflate(R.layout.changeview, null); 
  new AlertDialog.Builder(MainActivity.this)
  .setTitle(R.string.changelog_title)
  .setIcon(R.drawable.about)
  .setView(view)
  .setNegativeButton(R.string.close, new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
        //
    }
  })
  .show();  
}

private void openClearDialog() {
    new AlertDialog.Builder(MainActivity.this)
    .setTitle(R.string.context_menu_clear_grid_confirmation_title)
    .setMessage(R.string.context_menu_clear_grid_confirmation_message)
    .setIcon(android.R.drawable.ic_dialog_alert)
    .setNegativeButton(R.string.context_menu_clear_grid_negative_button_label, new DialogInterface.OnClickListener() {
      public void onClick(DialogInterface dialog, int whichButton) {
          //
      }
    })
    .setPositiveButton(R.string.context_menu_clear_grid_positive_button_label, new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            MainActivity.this.kenKenGrid.clearUserValues();
        }
    })
    .show();  
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T01:09:43.000

您可以从 Eclipse 中已有的示例项目中找到许多示例。这是你在问什么？

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.option_menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    Intent serverIntent = null;
    switch (item.getItemId()) {
    case R.id.secure_connect_scan:
        // Launch the DeviceListActivity to see devices and do scan
        serverIntent = new Intent(this, DeviceListActivity.class);
        startActivityForResult(serverIntent, REQUEST_CONNECT_DEVICE_SECURE);
        return true;
    case R.id.insecure_connect_scan:
        // Launch the DeviceListActivity to see devices and do scan
        serverIntent = new Intent(this, DeviceListActivity.class);
        startActivityForResult(serverIntent, REQUEST_CONNECT_DEVICE_INSECURE);
        return true;
    case R.id.discoverable:
        // Ensure this device is discoverable by others
        ensureDiscoverable();
        return true;
    }
    return false;
} 
```

实际上这段代码取自 BluetoothChat 示例。希望这个有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:49:01.373

您可以在 Activity 中以编程方式添加子菜单，如下所示。改编自[这里](http://www.mysamplecode.com/2011/07/android-options-menu-submenu-group.html)的教程：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.optionsmenu, menu);

    SubMenu menu4 = menu.addSubMenu(Menu.NONE, MENU4, 4,"Menu No. 4");
    menu4.add(GROUP1, SUBMENU1, 1, "SubMenu No. 1");
    menu4.add(GROUP1, SUBMENU2, 2, "SubMenu No. 2");
    menu4.setGroupCheckable(GROUP1,true,true);

    return true;

} 
```

在 xml 中，您可以这样做（取自[此处](http://www.linuxtopia.org/online_books/android/devguide/guide/samples/ApiDemos/res/menu/submenu.html)）：

```
<item android:title="Normal 1" />

<item android:id="@+id/submenu"
    android:title="Emotions">

    <menu>        

        <item android:id="@+id/happy"
            android:title="Happy"
            android:icon="@drawable/stat_happy" />

        <item android:id="@+id/neutral"
            android:title="Neutral"
            android:icon="@drawable/stat_neutral" />

        <item android:id="@+id/sad"
            android:title="Sad"
            android:icon="@drawable/stat_sad" />

    </menu>

</item>

<item android:title="Normal 2" /> 
```

# c# - 如果数组中有 int.MaxValue，则数组的平均值将失败

> ID：12965979
> 
> 赞同：0
> 
> 时间：2012-10-19T01:04:23.827
> 
> 标签：c#

我定义了以下计算数组平均值的方法：

```
public int AverageOfArray (params int[] arr)
        {
            if (arr.Length > 0)
            {
                double avg = Sum(ints) / arr.Length;
                return (int)avg;
            }
            return 0;
        } 
```

我的要求是平均值应以整数形式返回。当我尝试使用 int.MaxValue 测试此方法时，单元测试将失败。我怎样才能使测试班通过？

更新：：-

```
public int Sum(params int[] arr)
        {
            int total = 0;

            for (int n = 0; n < arr.Length; n++)
            {
                total += arr[n];
            }

            return total;

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T01:15:46.707

在该`Sum`方法中，`int`数据类型不足以容纳 和 的`int.MaxValue / 2`和`int.MaxValue / 2 + 4`：

```
 int.MaxValue / 2     = 0x3FFFFFFF
     int.MaxValue / 2 + 4 = 0x40000003
--------------------------------------
Sum: int.MaxValue - 1 + 4 = 0x80000002 (subtract 1 because int.MaxValue is odd) 
```

因为正确的和超过`int.MaxValue`，它会溢出到符号位，导致结果比正确的和小2 ^(32) （有关更多信息，请参阅 Wikipedia 上[的二进制补码）：](http://en.wikipedia.org/wiki/Two%27s_complement#Addition)

```
Correct sum:  2147483650
 Actual sum: -2147483646 
```

实际总和是错误的，因此当您将其除以 2 时，您也会得到错误的平均值。垃圾进垃圾出！

要解决此问题，请将的返回类型更改`Sum`为`long`，并将`total`变量的类型也更改`long`为：

```
public long Sum(params int[] arr)
{
    long total = 0;
    for (int n = 0; n < arr.Length; n++)
    {
        total += arr[n];
    }
    return total;
} 
```

现在该`Sum`方法返回正确的 sum: `int.MaxValue + 3`is less than `long.MaxValue`，因此不会发生溢出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:23:00.237

这应该适合你

```
public int AverageOfArray (params int[] arr)
{

    double avg = 0;

    if (arr.Length > 0)
    {
        for (int n = 0; n < arr.Length; n++)
        {
            avg += arr[n]/arr.Length;
        }

    }
    return (int)avg;
} 
```

# sql - 如何隐藏或抑制 sqlplus 中日志文件（假脱机文件）的 sql 查询输出

> ID：12965982
> 
> 赞同：3
> 
> 时间：2012-10-19T01:04:41.120
> 
> 标签：sql, oracle, sqlplus

我正在为我的应用程序进行性能测试。我从应用程序中收集了大约 100 个查询，并希望完全按照通过应用程序执行的方式执行查询。由于一些查询提供了超过 1000 条记录，我想在日志文件中隐藏 sql 输出。我只是想收集经过的时间并解释计划。

**Sql 模板文件：**

```
spool &1

set timing on
set linesize 100
set pagesize 5000
set termout off
set echo on

set autotrace on exp stat

define sql_version = '0.1';

set echo on;
set heading off;
set feedback off;
set verify off;
set timing off;
select  ' Baseline SQL Testing - Version &sql_version : Date - ' || sysdate from dual;
set timing on;
set verify on;
set feedback on;
set heading on;
set echo on;

spool off;
exit; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T01:19:35.053

```
set autotrace traceonly exp stat 
```

将导致 SQL*Plus 不打印查询结果。听起来这就是你要找的东西。

# c++ - 此上下文中的私有错误c ++

> ID：12965985
> 
> 赞同：5
> 
> 时间：2012-10-19T01:05:29.350
> 
> 标签：c++

我想我在这段代码上工作太久了。无论如何，这是正在发生的事情。

头文件（项目范围禁止更改公开）

```
#ifndef FRACTION_
#define FRACTION_

using namespace std;

#include <iostream>

class Fraction
{
  private:

    int num,denom;

  public:

    // Construct fraction from numerator and denominator
    //
    Fraction( int = 0, int = 1 );

    // Construct fraction by copying existing fraction
    //
    Fraction( const Fraction& );

    // Assign into fraction by copying existing fraction
    //
    Fraction& operator=( const Fraction& );

    // Return true if fraction is valid (non-zero denominator)
    //
    bool IsValid() const;

    // Return value of numerator
    //
    int Numerator() const;

    // Return value of denominator
    //
    int Denominator() const;

    // Input/Output operations
    //
    friend istream& operator>>( istream&, Fraction& );
    friend ostream& operator<<( ostream&, const Fraction& );
};

// Comparative operations
//
bool operator==( const Fraction&, const Fraction& );
bool operator!=( const Fraction&, const Fraction& );
bool operator< ( const Fraction&, const Fraction& );
bool operator<=( const Fraction&, const Fraction& );
bool operator> ( const Fraction&, const Fraction& );
bool operator>=( const Fraction&, const Fraction& );

// Arithmetic operations
//
Fraction operator+( const Fraction&, const Fraction& );
Fraction operator-( const Fraction&, const Fraction& );
Fraction operator*( const Fraction&, const Fraction& );
Fraction operator/( const Fraction&, const Fraction& );

#endif 
```

我正在尝试重载 + 运算符，这是我的代码：

```
Fraction operator+(const Fraction &f1, const Fraction &f2)
{
    return(((f1.num*f2.denom)+(f1.denom*f2.num)),(f1.denom*f2.denom));
} 
```

我收到关于将 num 和 denom 作为私有变量引用的错误，我只是很难弄清楚如何纠正这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T01:07:02.107

使用`Numerator()`代替`num`和`Denominator()`代替`denom`。您的运营商不是会员，也不是朋友，因此无法访问私人会员。

另一种选择是

*   使其成为*成员*（但使可以成为自由函数的运算符成为成员有几个缺点，包括你不能说`5 + frac`, only `frac + 5`）
*   使其成为`friend`, （但是当它不必成为朋友时会增加不通过其接口访问该类的事物的数量，从而导致代码维护增加）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:47:20.443

至少有四种方法可以解决这个问题：

1.  更改`f1.num`为`f1.Numerator()`等；这就是访问器的用途。

2.  让所有算术运算符成为班级的朋友。不无道理。

3.  更改您`operator+(const Fraction&, const Fraction&)`的 a 成员函数（然后只接受一个参数）；这有时会使事情复杂化，而我们通常不是一个好方法。

4.  添加一个`operator+=(const Fraction& rhs)`添加`rhs`到的成员`*this`，然后使用该运算符将您的非成员实现`operator+(const Fraction& lhs, const Fraction& rhs)`为`return Fraction(lhs) += rhs;`。这是最通用的解决方案。

# c++ - 调试不显示代码崩溃点

> ID：12965986
> 
> 赞同：0
> 
> 时间：2012-10-19T01:05:33.837
> 
> 标签：c++, visual-studio-2003

前段时间我曾经调试过一个应用程序，当它崩溃时，它会在崩溃文件代码部分位置中断，最近在调试它时，它崩溃了，但是当它中断时它只显示反汇编程序，是不是一些配置？我正在使用visual studio 2003（它还说故障地址是0x00000000）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:18:35.000

可能的原因：

**A.**调试器没有找到崩溃模块的 PDB，因为：

1）这是一个发布版本。

2) 崩溃发生在系统 DLL 中。

**B.**内存严重损坏，调试器无法分析调用堆栈。

# android - Android BBC 新闻和 Pulse 新闻应用程序是如何实现水平滚动视图的？

> ID：12965989
> 
> 赞同：5
> 
> 时间：2012-10-19T01:06:03.720
> 
> 标签：android, android-arrayadapter, horizontalscrollview

Android BBC 新闻和 Pulse 新闻应用如何使用适配器实现水平滚动视图？

没有原生 Android 支持带有适配器的水平滚动视图。我很好奇他们是如何回收观点的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:36:48.103

You have to write your own Horizontally scrollable **ViewGroup** using **AdapterView**, look into the source code of the Android's [Gallery](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/widget/Gallery.java) view and modify it, it is the closest implementation you can use to get started.

# ios - 带有 -ObjC 标志的 IOS Facebook SDK 3.1

> ID：12965991
> 
> 赞同：7
> 
> 时间：2012-10-19T01:06:42.080
> 
> 标签：ios, facebook, admob

我正在尝试`admob`使用 latest 来实现中介`admob sdk`，他们的库要求我使用链接器标志`-ObjC`。

但是，添加此标志后，我收到 facebook SDK 的链接器错误。

> 架构 armv7 的未定义符号：“_SLServiceTypeFacebook”，引用自：FacebookSDK(FBNativeDialogs.o) 中的 +[FBNativeDialogs composeViewControllerWithSession:handler:]
> “_OBJC_CLASS_$_SLComposeViewController”，引用自：FacebookSDK(FBNativeDialogs.o) 中的 objc-class-ref

有没有其他人也遇到过这个？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-19T01:08:59.110

您是否已将社交和帐户框架添加到您的项目中？

如果您的目标是 iOS 6 以下，请记住弱链接！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-09T13:03:14.603

您在其他链接器标志中有 -ObjC 吗？当我将 facebook SKD、社交和帐户框架与此标志相关联时，这是我的问题（它在删除时有效）。现在我正在尝试找出解决方法，因为我需要在我的项目中使用这个标志。

# matlab - 如何让 MATLAB 为矩阵中的每一列运行我的函数？

> ID：12965992
> 
> 赞同：0
> 
> 时间：2012-10-19T01:06:42.503
> 
> 标签：matlab, for-loop, matrix

我的教授的 RA 工作快要完成了；但是，我有一个编程问题困扰着我。我的教授要求我做的最后一步是我需要运行我为矩阵编写的所有函数。将会发生的是，对于该矩阵的每一列，我将调用我编写的函数，例如，它看起来像这样：

```
function [xpeaks, xtroughs]=peaktrough(x,cutoff)

% This function is a modified version of the algorithm used to identify
% peaks and troughs in a series of prices. This will be used to identify
% the head and shoulders algorithm. The function gives you two vectors:
% PEAKS - an indicator vector that identifies the peaks in the function,
% and TROUGHS - an indicator vector that identifies the troughs of the
% function, and a MATRIX - ptdata, which is a matrix of the location and
% the value of the peak/trough.

% The input is the vector of exchange rate series, and the cutoff
% used for the selection of the final peaks and troughs.

% Finding all possible peaks and troughs of our vector.
[posspeak,possploc]=findpeaks(x);
[posstrough,posstloc]=findpeaks(-x);
posspeak=posspeak';
posstrough=posstrough';

% Initialize vector of peaks and troughs.
numobs=length(x);
prelimpeaks=zeros(numobs,1); 
prelimtroughs=zeros(numobs,1);
numpeaks=numel(possploc);
numtroughs=numel(posstloc);

% Indicator for possible peaks and troughs.
for i=1:numobs
    for j=1:numpeaks
        if i==possploc(j);
            prelimpeaks(i)=1;
        end
    end
end

for i=1:numobs
    for j=1:numtroughs
        if i==posstloc(j);
            prelimtroughs(i)=1;
        end
    end
end

% Vector that gives location.
location=1:1:numobs;
location=location';

% From the list of possible peaks and troughs, find the peaks and troughs
% that fit Chang and Osler [1999] definition.
% "A peak is a local minimum at least x percent higher than the preceding
% trough, and a trough is a local minimum at least x percent lower than the
% preceding peak." [Chang and Osler, p.640]

peakcutoff=1.0+cutoff; % cutoff for peaks
troughcutoff=1.0-cutoff; % cutoff for troughs

% First peak and first trough are initialized as previous peaks/troughs.

prevpeakloc=possploc(1);
prevtroughloc=posstloc(1);

% Initialize vectors of final peaks and troughs.
vectpeak=zeros(numobs,1);
vecttrough=zeros(numobs,1);

% We first check whether we start looking for peaks and troughs.
for i=1:numobs
    if prelimpeaks(i)==1;
       if i>prevtroughloc;
           ratio=x(i)/x(prevtroughloc);
           if ratio>peakcutoff;
               vectpeak(i)=1;
               prevpeakloc=location(i);
           else vectpeak(i)=0;
           end
       end
    elseif prelimtroughs(i)==1;
        if i>prevpeakloc;
            ratio=x(i)/x(prevpeakloc);
            if ratio<troughcutoff;
                 vecttrough(i)=1;
                 prevtroughloc=location(i);
            else vecttrough(i)=0;
            end
        end
    else
        vectpeak(i)=0;
        vecttrough(i)=0;
    end
end

% Now from the final peaks and troughs, we now write the matrix of the
% peaks and troughs of the exchange rate series.
xpeaks=find(vectpeak);
xtroughs=find(vecttrough);
end 
```

然而，现在的问题是，对于不同的列，我最终会得到不同大小的向量。我想知道的是，我该怎么做？我有 20 个用户创建的函数，对于每个函数，我需要运行 5000 x 10000 矩阵中的每一列。

我的一个朋友建议我编写一个函数来获取矩阵的第 n 列，然后将其作为向量返回，然后针对该结果向量运行矩阵的每个函数。还有其他想法吗？其实，老实说，我不知道怎么写他建议的那个函数。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T01:27:30.297

如果输出是不同大小的向量，那么您不能将它们全部存储在一个数值数组中，除非该数组是一个巨大的长行（列）向量，输出向量水平（垂直）堆叠。

因此，我建议使用元胞数组来存储输出。将元胞数组的第一行用于峰，将第二行用于波谷。例如：

```
NumCol = 10000
YourMatrix = randn(5000, NumCol);
YourCellArrayOutput = cell(2, NumCol);
for m = 1:NumCol
    [CurPeaks, CurTroughs] = peaktrough(YourMatrix(:, m), cutoff);
    YourCellArrayOutput{1, m} = CurPeaks;
    YourCellArrayOutput{2, m} = CurTroughs;
end 
```

请注意，我使用花括号`{}`而不是`()`. [在此处](http://www.mathworks.com.au/help/matlab/ref/cell.html;jsessionid=69e58d25f92fc1bb317b9d60bf1a)和[此处](http://www.mathworks.com.au/help/matlab/matlab_prog/access-data-in-a-cell-array.html)阅读有关此内容。

像我在这里一样构建你的输出，你需要一个单元格数组来处理你在矩阵上运行的每个函数。我认为考虑到应用程序（技术分析），这可能是最有意义的。

# json - 在 Knockout.js 中向对象添加附加数据

> ID：12965994
> 
> 赞同：0
> 
> 时间：2012-10-19T01:06:54.287
> 
> 标签：json, data-binding, knockout.js, data-objects

所以我一直在学习 Knockout.js 并且非常喜欢它。我正在使用它将一些 SQL 交互添加到我正在处理的活动网站上的来宾列表中。我正在使用destroy来标记要删除的条目，并通过在PHP中使用'isset'将它们标记为在数据库中删除。

我想添加某种功能来在更新记录时做同样的事情。当我将 JSON 发送回服务器时，当它们实际上没有被更改时，更新每条记录（即使知道我们最多只谈论 300 次更新）似乎是不必要的。如果有更多与 Knockout 合作经验的人可以帮助我，将不胜感激。

这是我的javascript。标记和数据绑定是相当基本的，所以我不会包含它。

```
function Guest(data){
    this.id = ko.observable(data.id);
    this.name = ko.observable(data.name);
    this.email = ko.observable(data.email);
    this.guests = ko.observable(data.guests);
    this.code = ko.observable(data.code);
}

function guestListViewModel(){
    //Data
    var self = this;
    self.guests = ko.observableArray([]);
    self.guestsNumber = 0;

    $.getJSON('/php/guests_json.php', function(json) {
        var mappedGuests = $.map(json, function(item) { return new Guest(item) });
        self.guests(mappedGuests);
        self.guestsNumber = (self.guests().length);
        $('.dlt_btn').button();

    });

    self.removeGuest = function(guest) { 
        self.guests.destroy(guest);
    };

    self.save = function() {
        var data = 'json=' + ko.toJSON({guests: self.guests });
        $.ajax("/php/save_guests.php", {
            data: data,
            type: "post",
            success: function(result) {$('#server').html(result)}
        })
    }

    self.totalGuests = ko.computed(function() {
        var total = 0;
        ko.utils.arrayForEach(self.guests(), function(guest) {
            var value = guest.id;
            console.log(value);
            if (!isNaN(value)) {
                total += value;
            }
        });
        return total;        
    });

}

ko.applyBindings(new guestListViewModel); 
```

**编辑**

另外，有谁知道为什么当我试图通过可观察数组并提取客人值时，我会在控制台中获得一个函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:19:53.633

用确定它们是否脏（即已编辑）的计算来包装您的来宾对象。这是有关如何执行此操作的完整指南：

[http://www.knockmeout.net/2011/05/creating-smart-dirty-flag-in-knockoutjs.html](http://www.knockmeout.net/2011/05/creating-smart-dirty-flag-in-knockoutjs.html)

然后，您可以只提交对谁`_isDirty()`是真实的。

# javascript - 如何找到jQuery事件的原始（匿名函数）来源？

> ID：12965998
> 
> 赞同：2
> 
> 时间：2012-10-19T01:07:26.390
> 
> 标签：javascript, jquery, firebug, anonymous-function, google-chrome-devtools

大多数 jQuery 代码使用匿名函数，例如：

```
jQuery('someelements').someEvent(function() {
    // code here
}); 
```

这很好用，但在调试时效果不佳。我尝试使用 Firefox Firebug 和 Chrome 的检查器查找一些匿名函数的来源，并使用 pause javascript 功能，但它调用的实际代码在 jQuery js 文件中，并且单步执行代码永远不会告诉你是哪一行，甚至是什么.js 文件添加了该事件。如何查看操作的定义位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:12:35.370

尝试使用 Firebug 的非缩小版本`jQuery`并使用`profile`Firebug 中的功能来查找 jQuery 源代码中在代码中发生事件时调用的确切行。

如果您的意图是找到一些 jQuery 选择器或函数实现的实现，请参考这个惊人的资源：http:
[//www.keyframesandcode.com/resources/javascript/deconstructed/jquery/](http://www.keyframesandcode.com/resources/javascript/deconstructed/jquery/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:55:58.313

有一个 Google Chrome/Firefox 插件可以让您查看由 jQuery 或其他（特定）库注册的事件：[Visual Event](http://www.sprymedia.co.uk/article/Visual+Event)。

类似的问题：[Firefox extension to find which Javascript event is bound to an inspected element?](https://stackoverflow.com/questions/1558569/firefox-extension-to-find-out-which-javascript-event-is-bound-to-an-inspected-el)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T17:54:31.453

我发现有用的一件事是给事件处理程序一个名称，尽管它没有在其他任何地方被调用。这样就更容易在分析工具中识别它。

例如

```
jQuery('someelements').someEvent(function someEventHandler() {
    // code here
}); 
```

一旦事件处理程序都有名称，您就可以破解 jquery 开发版本来记录事件和处理程序名称。我在上面的事件调度方法中添加了这个`ret = ... .apply()`

```
var handler = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler );
console.log("FIRE EVENT ", event.type, "HANDLER: ", handler.name||'Anonymous Function'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T01:57:44.713

我不确定我是否完全在上下文中。但是如果你发现函数是一个值（例如在一些对象属性中），你总是可以从 Chrome DevTools 的上下文菜单中导航到它的源。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-19T03:46:11.907

```
jQuery('someelements').someEvent(function(e) {
    // code here
alert(e.target);
}); 
```