# StackOverflow 问答 13443000-13443999

# jquery - 如何从 Google CDN 加载 jquery？

> ID：13443001
> 
> 赞同：1
> 
> 时间：2012-11-18T18:10:23.217
> 
> 标签：jquery, google-chrome-extension

我不想再用一个本地托管的 jquery 库创建一个插件。我正在尝试从 Google 的 CDN 加载它，但我遇到了这个异常：

> 拒绝加载脚本“http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js”，因为它违反了以下内容安全策略指令：“script-src 'self' chrome -扩展资源：”。

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T07:36:37.187

如果您想从 Google 的 CDN 加载 jQuery，您必须将以下内容安全规则添加到您的清单文件中。

```
 ...
    "content_security_policy": "script-src 'self' https://*.googleapis.com; object-src 'self'",
    ...
```

欲了解更多信息，请阅读 Sirwan Afifi 已经提供的官方文档，并特别关注[CSP 规范](http://dvcs.w3.org/hg/content-security-policy/raw-file/tip/csp-specification.dev.html#syntax)和[HTML5 Rocks 文章](http://www.html5rocks.com/en/tutorials/security/content-security-policy/)的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:17:25.067

[http://developer.chrome.com/extensions/contentSecurityPolicy.html](http://developer.chrome.com/extensions/contentSecurityPolicy.html)

> **> Only local script and and object resources are loaded**
> 
> > > Script and object resources can only be loaded from the extension's package, not from the web at large. This ensures that your extension only executes the code you've specifically approved, preventing an active network attacker from maliciously redirecting your request for a resource.

so, you should download jquery file and include it in your package :

```
<!doctype html>
<html>
  <head>
    <title>My Awesome Popup!</title>
    <script src="jquery.min.js"></script>
  </head>
  <body>
    <button>Click for awesomeness!</button>
  </body>
</html> 
```

# java - 控制对应用程序的并发登录

> ID：13443004
> 
> 赞同：0
> 
> 时间：2012-11-18T18:10:32.520
> 
> 标签：java, session, tomcat, application-server

我想控制一次可以登录到我的应用程序的用户数量。例如，我希望一次只允许 10 个用户使用我的应用程序。如果第 11 个用户尝试登录以使用我的应用程序，我想向他显示一些消息，显示“所有资源都忙。一段时间后尝试。”。

如何在基于 Java 的应用程序服务器中执行此操作？

-纳伦德拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:16:56.573

每次用户登录时增加一个计数器。每次用户注销时减少它，每次登录用户的 HttpSession 被销毁（通过使用[HttpSessionListener](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSessionListener.html)）。

当用户登录并且计数器为 10 时，拒绝他登录。

不过，我真的不知道你为什么要这样做。对我来说完全是无稽之谈。

# python - 在python中迭代未知数量的嵌套循环

> ID：13443006
> 
> 赞同：20
> 
> 时间：2012-11-18T18:10:49.403
> 
> 标签：python, list, combinations

我有可变数量的用户定义列表，每个列表都包含单词。例如，可能有如下三个列表：

```
list1 = ["THE", "A"]
list2 = ["ELEPHANT", "APPLE", "CAR"]
list3 = ["WALKED", "DROVE", "SAT"] 
```

我想要的是迭代每个列表中的每个组合，根据已知单词的字典检查每个组合，以查看哪些单词分组最像字典。这意味着迭代将是这样的：

```
[
    "THE ELEPHANT WALKED",
    "THE APPLE WALKED",
    "THE CAR WALKED",
    "THE ELEPHANT DROVE",
    "THE APPLE DROVE",
    "THE CAR DROVE",
    # ...
    "A CAR SAT",
] 
```

问题是可以有任意数量的列表，并且每个列表可以包含可变数量的项目。我知道递归可以用于此，但我需要一个没有递归的解决方案。我一直遇到的问题是列表的数量可能是可变的，否则我只会写：

```
for a in list1:
    for b in list2:
        for c in list3:
            ... 
```

但我不知道该停在哪里...

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-18T18:12:15.677

[`itertools.product`](http://docs.python.org/2/library/itertools.html#itertools.product)完全符合您的要求：

```
from itertools import product

lists = [
    ['THE', 'A'],
    ['ELEPHANT', 'APPLE', 'CAR'],
    ['WALKED', 'DROVE', 'SAT']
]

for items in product(*lists):
    print(items) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:54:00.340

使用python 3.2

```
from itertools import product

[" ".join(i) for i in product(list1,list2,list3)] 
```

# ios - 使用 Storyboard 的容器视图、交互和视图问题

> ID：13443007
> 
> 赞同：8
> 
> 时间：2012-11-18T18:10:55.460
> 
> 标签：ios, uiview, uiviewcontroller, storyboard, parent-child

我一直在尝试以 iPad 仪表板的方式并排实现两个简单容器的视图布局。

我一直在阅读大量示例，当然还有针对视图控制器的 Apple View Controller 参考，但我有一个最奇怪的问题，希望有一个简单的解释。

我并排添加了两个视图容器，每个容器都将容纳一个具有不同背景颜色的视图控制器、一个圆形矩形按钮和一个标签。出于测试目的，我还在“mainViewController”中添加了一个圆形矩形按钮。

所以相当直接和简单。每个视图都加载到容器视图中，但是我无法与它们中的任何一个进行交互（单击按钮时，什么都没有发生，没有蓝色突出显示，因此这不是委托问题或是否收到来自按钮的任何操作，因为没有类似的实施）。但是，单击我放在“mainViewController”中的按钮，该按钮包含两个容器，可以正常工作（一如既往地闪烁蓝色）。另一个奇怪的事情是容器视图上也没有显示背景颜色？！只有按钮和标签。

程序如下：

文件：ViewController.h 和 .m（是“mainViewController”）sidebarViewController.h 和 .m（这些文件中没有更改，UIViewController） resultsViewController.h 和 .m（这些文件中没有更改，UIViewController）AppDelegate.h 和 .m （无变化）故事板

ViewController.h，在 Storyboard 中创建并连接到每个容器视图的 outlet。

```
#import <UIKit/UIKit.h>
#import "sidebarViewController.h"
#import "resultsViewController.h"

@interface ViewController : UIViewController

@property (nonatomic, weak) IBOutlet UIView *sidebarView;
@property (nonatomic, weak) IBOutlet UIView *resultsView;

@end 
```

情节提要标识符设置为情节提要中的侧边栏视图控制器和结果视图控制器。

ViewController.m，本书所做的一切（或者可能没有，但至少在我看来是什么）

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize sidebarView,resultsView;

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

UIStoryboard *storyboard = self.storyboard;
sidebarViewController *sideVC  = [storyboard instantiateViewControllerWithIdentifier:@"SidebarViewController"];
resultsViewController *resultsVC  = [storyboard instantiateViewControllerWithIdentifier:@"ResultsViewController"];

//sidebarViewController *sideVC = [[sidebarViewController alloc]init];
//rresultsViewController *resultsVC = [[resultsViewController alloc]init];
[self addChildViewController:sideVC];
sideVC.view.frame = self.sidebarView.frame;
[self.sidebarView addSubview:sideVC.view];
self.sidebarView.userInteractionEnabled = YES;
[sideVC didMoveToParentViewController:self];

[self addChildViewController:resultsVC];
resultsVC.view.frame = self.resultsView.frame;
[self.resultsView addSubview:resultsVC.view];
self.resultsView.userInteractionEnabled = YES;
[resultsVC didMoveToParentViewController:self];

} 
```

（我也有 self.xxxxView ，并且还有 addChildViewController 语句首先）

好的，所以我的怀疑当然是它与视图层次结构有关，视图在 rootViewController 视图“后面”，因此只显示不可点击。需要在 App 委托中完成什么（如果有的话）才能使其正常工作？或者我在这段代码中做错了什么？

编辑：发现另一个可能出错的线索：当我为情节提要禁用“自动布局”时，视图显示并工作（！）但完全扭曲，但现在至少我得到正确的背景颜色并且按钮正在工作。有谁知道如何在不禁用自动布局的情况下解决这个问题？因为我想我必须以编程方式完成所有布局？:(

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:20:12.427

您拥有的所有代码都是不必要的，并且可能是导致您的问题的原因。当您在 IB 中添加容器视图时，它会自动为您创建那些嵌入式视图控制器（并将它们的大小调整为容器视图的大小）。你得到那些了吗？您需要做的就是将它们的类更改为子类视图控制器的类。如果您需要从“主”视图控制器访问这些控制器，您可以从 childViewControllers 属性获取对它们的引用。

# ruby-on-rails - RoR 遗留数据库 - 关联崩溃系统关闭

> ID：13443008
> 
> 赞同：0
> 
> 时间：2012-11-18T18:11:03.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations, legacy-database

我正在努力使用具有旧数据库的 Ruby on Rails 应用程序。它通常可以工作，但现在我试图显示在数据库中创建的关联。

两个相关的脚手架称为`repo`和`build`。

一`repo has many builds`- 所以我的`repo_id`构建表中有一个外键。

问题如下：

*   `repo/7`在浏览器中调用正在工作
*   通话`repo/7/builds/8`也有效
*   但是如果我打电话给`repo/7/builds`我的系统崩溃了；）

此外，我可以在 rails 控制台中做到这一点而不会出现任何问题，例如：

```
r = Repo.find(7)
r.builds 
```

--> 返回属于 id 7 的 repo 的所有构建

有谁知道这里出了什么问题？提前致谢！

# c# - C#：将 int[] 转换为字符串的最高效率

> ID：13443011
> 
> 赞同：0
> 
> 时间：2012-11-18T18:11:10.733
> 
> 标签：c#, performance, optimization

我发布了一个新线程，因为上一个线程非常混乱，并且这个想法也被修改了。我在很多地方更改了程序，没有损失效率（甚至获得一点），现在我有一个简单的整数数组，就像以前一样，不需要分隔符。

[上一个线程供参考](https://stackoverflow.com/questions/13440323/c-the-most-efficient-way-to-convert-int-into-a-string)

我知道这类问题已经回答过很多次了。尽管我找到了很多可能的答案，但它们仍然没有解决我的问题，**即实现将整数数组转换为单个字符串的最快方法**。

那好吧，

```
int[] Result = new int[] { 636, 1000234545, 1353678530, 987001 } 
```

**我应该得到：**

```
636000234545353678530987001 
```

请注意，我只取了每个元素的最后 9 位数字。这是 Honza Brestan 的更正版本：

```
StringBuilder sb = new StringBuilder();

for (var i = 0; i < xC; i++)
{
    tempint = Result[i];
    if (tempint > 999999999)
        sb.Append((Result[i]).ToString().Substring(1, 9));
    else
        sb.Append((Result[i]).ToString());
}
return sb.ToString(); 
```

我的，老的，更正了：

```
//Base – a string array of integers saved as strings {“000”, “001”, … , “999” }
string[] arr = new string[3 * limit];
int x; // temp value

for (int i = 0; i < limit; i++)
{
    x = Result[i];

    if (x > 999999)
    {
        arr [3 * i + 2] = Base [x % 1000];
        arr [3 * i + 1] = Base [x / 1000 % 1000];
        arr [3 * i] = Base [x / 1000000 % 1000];
    }
    else
    {
        if (x < 1000)
        {
            arr [3 * i + 2] = Base [x % 1000];
        }
        else
        {
            arr [3 * i] = Base [x / 1000 % 1000];
            arr [3 * i + 1] = Base [x % 1000];
        }
    }
}
return string.Join(null, arr); 
```

现在速度差异：Honza：**689 ms** 我的：**331 ms**

任何想法如何提高速度？也许使用汇编程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:38:44.407

Parallelism怎么样，也许它对你有帮助？

```
 int[] list = new int[100];
    Random rand = new Random();
    for(int k = 0; k < list.Length; k++)
    {
        list[k] = rand.Next(0, 200000);
    }
    object monitor = new object();
    var stopwatch = System.Diagnostics.Stopwatch.StartNew();

    char[] result = new char[list.Length * list.Max().ToString().Length];//worst case scenario.
    for (int j = 0; j < 120000; j++)
    {
        //partitioning.
        Parallel.ForEach(Partitioner.Create(0, list.Length), () => 0.0, (range, state, local) =>
        {
            StringBuilder xc = new StringBuilder();
            for (int i = range.Item1; i < range.Item2; i++)
            {
                //split the number into characters.
                int number = list[i];
                int index = i;
                do
                {
                    int lsd = number % 10;       // Get least significant // digit
                    result[index++] = (char)(lsd + 47);
                    number /= 10;                        // Prepare for next most  // significant digit
                } while(number != 0);
            }
            return 0.0;
        }, local => {});
    }
    stopwatch.Stop(); MessageBox.Show(stopwatch.ElapsedMilliseconds.ToString()); 
```

对于优化，您想尝试不安全的代码，这将产生更好的性能。C# 做了一些安全检查，它让事情变得更慢。比如数组索引检查。

始终以正确的大小分配缓冲区并尽量避免使用 string.Join。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:48:01.083

好的，我相信我解决了我的问题；）只是为了其他想使用我所做的事情的人。就在我对两个函数进行基准测试之前，几乎相同，仅在最后一部分不同，将整数数组转换为单个字符串。

```
//Function one:
StringBuilder sb = new StringBuilder();
if (iscarry) sb.Append("1");
xC++;
for (iX = 0; iX < xC; iX++)
{
    tempint = Result[iX];

    if (tempint > 99999)
    {
        sb.Append(SmallBase[tempint / 100000 % 10000]);
        sb.Append(BigBase[tempint % 100000]);
    }
    else
    {
        sb.Append(BigBase[tempint % 100000].TrimStart('0'));
    }
}

return sb.ToString();

//Function two:
xC++;
AnswerArr = new string[2 * xC];
for (iX = 0; iX < xC; iX++)
{
    tempint = Result[iX];

    if (tempint > 99999)
    {
        AnswerArr[2 * iX] = SmallBase[tempint / 100000 % 10000];
        AnswerArr[2 * iX + 1] = BigBase[tempint % 100000];
    }
    else
    {
        AnswerArr[2 * iX] = BigBase[tempint % 100000].TrimStart('0');
    }
}

return string.Join(null, AnswerArr).TrimStart('0'); 
```

两个代码都给了我相同的结果。这大约是前一个输入的**271 毫秒**。

我在想对于整数数组的很多元素，StringBuilder 会快一点。所以我写了两个循环，函数应该执行保存为字符串的整数相加，一起从 2 位数字到 320.000。结果如下：

```
with StringBuilder: 5754 ms.
with array & string.Join: 5788 ms. 
```

没有任何意义，这是一个微不足道的区别。所以我又做了一次，总共有 1.280.000 位数字。

```
with StringBuilder: 5242 ms.
with array & string.Join: 5248 ms. 
```

我可以说，这取决于你选择哪种方式。String Builder 更容易理解并且占用更少的空间。数组的第二种方式更花哨：D

我想这就是全部......希望这会有所帮助。谢谢收听。和平！

# ruby-on-rails - Rails：如何自动完成名称搜索但保存 ID？

> ID：13443012
> 
> 赞同：8
> 
> 时间：2012-11-18T18:11:13.367
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, jquery-ui, activerecord

我已使用此视频[http://railscasts.com/episodes/102-auto-complete-association-revised](http://railscasts.com/episodes/102-auto-complete-association-revised)在我的应用程序的表单中设置自动完成搜索输入。（该视频可能仅供会员使用，所以我也会发布我的代码。本质上，它会搜索数据库（名称）的一列，并在您键入时在下拉列表中自动完成。这一切都很好，但是，我想要什么要提交的表单是提交与名称相关的 ID，而不是名称本身。

我假设仅在视图中没有简单的方法可以做到这一点。任何帮助都会很棒。下面的代码，让我知道是否有任何其他代码会有所帮助。

谢谢

控制器：

```
def game_name
  game.try(:name)
end

def game_name=(name)
  self.game = Game.find_by_name(name) if name.present?
end 
```

咖啡：

```
jQuery ->
 $('#play_game_name').autocomplete
  source: $('#play_game_name').data('autocomplete-source') 
```

在视图中：

```
 <%= f.label :game_name, "Search for a game" %>
   <%= f.text_field :game_name, :class => "mlm mtm", data: {autocomplete_source: Game.order(:name).map(&:name)} %> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-20T23:45:22.013

除了按照@LukasSvoboda 的建议进行操作外，您还可以覆盖`select` [事件](http://api.jqueryui.com/autocomplete/#event-select)回调，当您从下拉列表中选择一个项目时会触发该回调。在回调中，您可以将文本字段（不需要提交）设置为所选项目的“标签”，并将游戏ID（需要提交）的隐藏字段的值设置为所选项目的“价值”。

在咖啡中：

```
jQuery ->
  $('#play_game_name').autocomplete
    source: $('#play_game_name').data('autocomplete-source')
    select: (event, ui) ->

    # necessary to prevent autocomplete from filling in 
    # with the value instead of the label
    event.preventDefault()

    $(this).val ui.item.label
    $('#game_id').val ui.item.value 
```

在标记中：

```
<%= text_field_tag nil, nil, :id => 'play_game_name', :class => "mlm mtm", data: {autocomplete_source: Game.order(:name).map { |t| { :label => t.name, :value => t.id } } %>
<%= f.hidden_field :game_id, id: 'game_id' %> # tailor to your model 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T19:26:24.027

通过[http://api.jqueryui.com/autocomplete/#option-source](http://api.jqueryui.com/autocomplete/#option-source)您可以将数据设置为自动完成。

您需要更改 text_field 行，如：

```
<%= f.text_field :game_name, :class => "mlm mtm", data: {autocomplete_source: Game.order(:name).map { |t| { :label => t.name, :value => t.id } } %> 
```

对于更高级的功能，请考虑使用 select2 或 selected。

# c# - Htmlagilitypack - 获取文本内的所有文本+链接

> ID：13443013
> 
> 赞同：2
> 
> 时间：2012-11-18T18:11:15.480
> 
> 标签：c#, html-agility-pack

我有一种方法可以提取超过 XX 个单词的文本块。问题是它不会返回该文本内的链接。

我的方法：

```
public string getAllTextHTML(string _html)
{
  string _allText = "";
  try
  {
    HtmlAgilityPack.HtmlDocument document = new HtmlAgilityPack.HtmlDocument();
    document.LoadHtml(_html);

    document.DocumentNode.Descendants()
      .Where(n => n.Name == "script" || n.Name == "style")
      .ToList()
      .ForEach(n => n.Remove());

    RemoveComments(document.DocumentNode);

    var root = document.DocumentNode;
    var sb = new StringBuilder();
    foreach (var node in root.DescendantNodesAndSelf())
    {
      if (!node.HasChildNodes)
      {
        string text = node.InnerHtml;

        if (!string.IsNullOrEmpty(text))
        {
          int antalOrd = WordCounting.CountWords1(text);

          if (antalOrd > 25)
          {
            text = System.Web.HttpUtility.HtmlDecode(text);
            sb.AppendLine(text.Trim());
          }  
        } 
      }
    }

    _allText = sb.ToString();
  }
  catch (Exception)
  {
  }

  _allText = System.Web.HttpUtility.HtmlDecode(_allText);
  return _allText;
} 
```

我怎样才能让这也让我获得文本中的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T00:03:41.983

我想下面这行有问题：

```
if (!node.HasChildNodes) 
```

因为，链接（锚点）是 htlm 标签，并且您排除了将锚标签作为子标签的 html 标签。

这是返回链接的简单示例：

```
String html = "<p>asdf<a href='#'>Test</a>asdfasd</p>";

HtmlDocument doc = new HtmlDocument();
doc.LoadHtml(html);

String p = (from x in doc.DocumentNode.Descendants()
            where x.Name == "p"
            select x.InnerHtml).FirstOrDefault(); 
```

# ruby-on-rails - Ruby on Rails：上传前在文件中搜索单词

> ID：13443014
> 
> 赞同：0
> 
> 时间：2012-11-18T18:11:24.357
> 
> 标签：ruby-on-rails

我[将此示例用于文件上传器。](https://github.com/tors/jquery-fileupload-rails-paperclip-example) 在上传文件之前，我想打开它，搜索一个特定的词，将该词分配给数据库中的一个属性，然后才将文件保存在数据库中。

例子：

我选择两个文件并单击“上传”。
文件名分配给upload_file_name。
文件的大小分配给upload_file_size。
打开文件，我搜索“Bug”或“Lion”一词。
如果我找到“Lion”，则应将“Lion”分配给 upload_content_type。如果我找到“Bug”，则应将“Bug”分配给 upload_content_type。

我不太确定我必须在哪里定义打开文件的函数：在[uploads_controller.rb](https://github.com/tors/jquery-fileupload-rails-paperclip-example/blob/master/app/controllers/uploads_controller.rb)还是在[uploads.rb](https://github.com/tors/jquery-fileupload-rails-paperclip-example/blob/master/app/models/upload.rb)？而且我不知道如何将“Bug”分配给upload_content_type。

那是我的upload.rb：

```
class Upload < ActiveRecord::Base
  attr_accessible :upload, :upload_file_name, :upload_file_size

Paperclip::interpolates :piks do |attachment, style|
  attachment.instance.upload_file_name
end
  has_attached_file :upload,

                    :url =>"/system/Files/Files/:piks/:basename.:extension",
                    :path =>":rails_root/public/system/Files/Files/:piks/:basename.:extension"

  include Rails.application.routes.url_helpers

   validates :upload_file_name,  :presence   => true,
                                :format     =>{:with => %r{\.(txt)$}i,:message =>"should have an extension .cell"}

  validates_uniqueness_of :upload_file_name, :message =>"exists already."     

  def to_jq_upload
    {
      "name" => (read_attribute(:upload_file_name)).split(".").first,
      "size" => read_attribute(:upload_file_size),
      "url" => upload.url(:original),
      "delete_url" => upload_path(self),
      "delete_type" => "DELETE" 
    } 
```

我的 uploads_controller.rb：

```
def create
    p_attr=params[:upload]
    p_attr[:upload] = params[:upload][:upload].first if params[:upload][:upload].class == Array
    @upload = Upload.new(p_attr)

    respond_to do |format|
      if @upload.save
        format.html {
          render :json => [@upload.to_jq_upload].to_json,
          :content_type => 'BUUUUU',
          :layout => false
        }

        format.json { render json: [@upload.to_jq_upload].to_json, status: :created, location: @upload }
      else
        format.html { render action: "new" }        

        format.json{ render json: {name:(@upload.upload_file_name).split(".").first ,error: @upload.errors.messages[:upload_file_name]}, :status =>422}

      end
    end
  end 
```

数据库：

```
ActiveRecord::Schema.define(:version => 20120731045929) do

  create_table "uploads", :force => true do |t|
    t.string   "upload_file_name"
    t.string   "upload_content_type"
    t.string   "user"
    t.integer  "upload_file_size"
    t.datetime "upload_updated_at"
    t.datetime "created_at",          :null => false
    t.datetime "updated_at",          :null => false
  end

end 
```

以及打开文件的功能：

```
def check
    File.open(??filename) do |file|
        file.each do |line|     
         type=/Lion/.match(line)       
         if type != nil 
            puts(type[0])   #assign to a database!!
            break
         end

        end
    end
end 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:16:20.577

在您的`Upload`模型中，您可以添加以下内容：

```
class Upload

  before_save :determine_content_type

  def determine_content_type
    file_contents = File.readlines(upload.queued_for_write[:original].path).join('\n')
    self.content_type = if file_contents.include?('Bug')
                          'Bug'
                        else if file_contents.include?('Lion')
                          'Lion'
                        else
                          'Unknown'
                        end
  end  
end 
```

简短说明：

*   在模型中分配一个`before_save`回调，它将检查文件并确定内容类型
*   查看 PaperClip 文档：保存前的附件可以在`queued_for_write`哈希中找到
*   加载该文件，读取所有行并连接成一个字符串
*   检查字符串是否包含“Bug”或“Lion”
*   给列赋值`content_type`，因为这个是在保存之前调用的，所以会正确保存

> 注意：更新记录时也会触发`before_save`回调，如果这不是你想要的（你不能编辑或替换上传的文件），你最好使用`before_create`回调。

希望这可以帮助。

# php - PHP中的链接必须使用case语句吗？

> ID：13443015
> 
> 赞同：0
> 
> 时间：2012-11-18T18:11:26.010
> 
> 标签：php, menu, switch-statement, interpreter, event-driven

我得到了一个学校项目，其中涉及用 PHP 创建一个在线发票系统。我的老师似乎确信拥有菜单（带有“显示”等固定页面）的唯一方法是使用案例陈述。我的第一个猜测是只使用一个回显一些href的函数。

他还一直说 PHP 是事件驱动的。这是真的？我一直认为服务器上的解释器会检查代码，然后将 html 发送到浏览器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:13:35.373

PHP 根本不是事件驱动的。尽管它存在[Photon](http://www.photon-project.com/)，但它是实现这一目标的框架。
并且有多种方式来获得菜单。如果`case`你的意思是`switch ... case`：答案是否定的。这不是唯一的方法。

我制作菜单的方式是使用数组

```
$menu = array(
   'url 1'=>'Element 1 ',
   'url 2'=>'Element 2 ',
   'url 3'=>'Element 3 ' 
); 
```

有了这个数组，知道选择的元素是非常简单的，不需要 case 语句

# java - 如何获得漂亮的按钮？

> ID：13443020
> 
> 赞同：0
> 
> 时间：2012-11-18T18:11:41.660
> 
> 标签：java, image, swing, jbutton, imageicon

我尝试为 JButton 使用自定义图像，它运行良好，除了它周围有一个白框。我不知道如何解决这个问题，并希望得到一些帮助。（我使用 new ImageButton("Quit", "src/button.png", 128, 64) 创建按钮。按钮不可调整大小，图像文件为 256X128）

按钮类：

```
public class ImageButton extends JButton {

    Image image;
    ImageObserver imageObserver;

    public ImageButton(String text, String filename, int width, int height) {
        super(text, new ImageIcon(filename));
        setSize(width, height);
        setHorizontalTextPosition(JButton.CENTER);
        setVerticalTextPosition(JButton.CENTER);
    }
} 
```

使用 getInsets 覆盖的图片：

![图片的](../Images/a71da01601d0537f16b164de438a9407.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:20:28.533

这很可能是因为您在`ImageButton`. 尝试覆盖`getInsets()`：

```
@Override
public Insets getInsets() {
   return new Insets(0, 0, 0, 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:28:23.873

请使用`paintComponent()`来绘制自定义图像来代替默认值`JButton`。此外，如果您要在 a 上绘画`JPanel`，则将`JPanel.print()`图像用于`JPanel`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T15:43:51.213

好的，安德鲁帮我解决了这个问题。他指给我[这个](https://stackoverflow.com/questions/10861852/add-a-complex-image-in-the-panel-with-buttons-around-it-in-one-customized-user/10862262#10862262)链接，结果我只需要禁用边框和内容区域。谢谢安德鲁！

如果您不想点击链接，请提供更多信息：您应该从中得到的主要内容是边框应该像这样为空：`button.setBorderPainted(false); button.setBorder(null);`并且您还应该将内容区域设置为不被绘制：`button.setContentAreaFilled(false);`这是要点制作自己的自定义按钮！

# wcf - 如何应用任务异步模式和 WCF 的 ChannelFactory ?

> ID：13443022
> 
> 赞同：13
> 
> 时间：2012-11-18T18:11:44.670
> 
> 标签：wcf, asynchronous, task, channelfactory

我们在 2008 年在 .NET 3.5（现在在 .NET 4.0 下重新编译）上构建了一个强大的 WCF 客户端，它通过 net.tcp 绑定与我们自己的 WCF 服务通信。健壮的客户端使用 ChannelFactory<IOurServiceInterface>() 来生成服务代理，我们目前通过它对服务进行同步调用。我们从每次调用中获取结果；我们没有单向电话。

我们正在迁移到 .NET 4.5 / C# 5，并希望使用 async / await / TAP 使客户端异步。如何以产生干净代码和良好运行时性能的方式最好地做到这一点？

（我查看过有关此主题的 MS 文档，但它总是谈论运行 svcutil。我们不使用 svcutil；我们直接使用 ChannelFactory。另外：MS 文档用于在 .NET 4.5 下使用通道工厂异步调用操作未更改自 .NET 3.0 天以来。似乎 ChannelFactory 还没有接受新的异步。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T18:28:57.580

您可以使用. `Begin*`_`End*``Task`[`TaskFactory.FromAsync`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskfactory.fromasync.aspx)

您可能会发现我的[Async WCF Today and Tomorrow 帖子](http://nitoprograms.blogspot.com/2012/08/async-wcf-today-and-tomorrow.html)很有帮助，它展示了如何将 TAP 与 VS2012 之前的 svcutil 一起使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T00:30:00.307

你看到[这个了](https://stackoverflow.com/questions/4095247/async-ctp-how-can-i-use-async-await-to-call-a-wcf-service/10020063#10020063)吗？我做了一个等待`[OperationContract]`返回的例子`Task<TResponse>`。

# c# - 在后面的代码中翻转视图动画

> ID：13443023
> 
> 赞同：3
> 
> 时间：2012-11-18T18:11:52.683
> 
> 标签：c#, wpf, windows-phone-7, windows-phone, windows-phone-8

我正在尝试从代码隐藏在我的应用程序中做一个随机的瓷砖翻转动画。计时器应该使随机图块每 3 秒翻转一次。我一直在互联网上搜索如何执行这样的动画，但我似乎找不到任何有效的方法。

视图如下，一个容器视图包含两个应该相互翻转的视图。一个是图像，在另一个视图中有两个文本块

```
 //Create single news container
            Canvas container = new Canvas
                {
                    Height = viewHeight,
                    Width = viewWidth,
                    MaxWidth = viewWidth,
                    MaxHeight = viewHeight,
                    Margin = new Thickness(viewX, viewY, 0, 0)
                };

            //Create image container
            Canvas imageContainer = new Canvas
                {
                    Height = viewHeight,
                    Width = viewWidth,
                    MaxWidth = viewWidth,
                    MaxHeight = viewHeight,
                    Background = new SolidColorBrush(Colors.Transparent),
                    Visibility = Visibility.Collapsed
                };

            //Create title and leadtext container
            Canvas textContainer = new Canvas
                {
                    Height = viewHeight,
                    Width = viewWidth,
                    MaxWidth = viewWidth,
                    MaxHeight = viewHeight,
                    Background = GetCategoryColor(news.Cat[0]),
                    Visibility = Visibility.Visible,
                };

            //Set image source and crop image accordingly
            var image = new BitmapImage(new Uri(news.ImageUrl[0]));
            var viewImage = new Image
                {
                    Source = image,
                    Height = viewHeight,
                    Width = viewWidth,
                    MaxWidth = viewWidth,
                    MaxHeight = viewHeight,
                    Stretch = Stretch.UniformToFill
                };

            //Set header view
            TextBlock title = new TextBlock
                {
                    MaxHeight = titleHeight,
                    MaxWidth = titleWidth,
                    Height = titleHeight,
                    Width = titleWidth,
                    Text = news.Title,
                    Margin = new Thickness(titleX, titleY, 0, 0),
                    Padding = new Thickness(framePadding),
                    Foreground = new SolidColorBrush(Colors.White),
                    TextWrapping = TextWrapping.Wrap,
                    FontWeight = FontWeights.Bold,
                    FontSize = 22,
                    FontFamily = new FontFamily("Calibri"),
                    TextTrimming = TextTrimming.WordEllipsis
                };

            //Set ingress view
            TextBlock leadText = new TextBlock
                {
                    MaxHeight = leadTextHeight,
                    MaxWidth = leadTextWidth,
                    Height = leadTextHeight,
                    Width = leadTextWidth,
                    Margin = new Thickness(leadTextX, leadTextY, 0, 0),
                    Padding = new Thickness(framePadding, 0, framePadding, framePadding),
                    Text = news.LeadText,
                    Foreground = new SolidColorBrush(Colors.White),
                    TextWrapping = TextWrapping.Wrap,
                    FontSize = 18,
                    FontFamily = new FontFamily("Calibri"),
                    TextTrimming = TextTrimming.WordEllipsis
                };

            //Add subviews to container and viewlist
            imageContainer.Children.Add(viewImage);
            textContainer.Children.Add(title);
            textContainer.Children.Add(leadText);
            container.Children.Add(imageContainer);
            container.Children.Add(textContainer);
            _viewsList.Add(container);
            //Add single news container to main content canvas
            ContentCanvas.Children.Add(container); 
```

希望有人可以在这里帮助我！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T18:28:26.130

在我创建问题几分钟后，当然找到了我的问题的答案，这是答案（http://codepaste.net/xyo2ib）

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;
using System.Windows.Media.Animation;

public class Flipper
{
    public enum Directions { LeftToRight, RightToLeft }

    public static void FlipItem(UIElement over, UIElement under, Directions direction = Directions.LeftToRight, int duration = 200)
    {
        // setup visible plane
        over.Visibility = Visibility.Visible;
        over.Projection = new PlaneProjection { CenterOfRotationY = 0 };

        // setup hidden plane
        under.Visibility = Visibility.Collapsed;
        under.Projection = new PlaneProjection { CenterOfRotationY = 0 };

        // gen storyboard
        var _StoryBoard = new System.Windows.Media.Animation.Storyboard();
        var _Duration = TimeSpan.FromMilliseconds(duration);

        // add animation: hide-n-show items
        _StoryBoard.Children.Add(CreateVisibility(_Duration, over, false));
        _StoryBoard.Children.Add(CreateVisibility(_Duration, under, true));

        // add animation: rotate items
        if (direction == Directions.LeftToRight)
        {
            _StoryBoard.Children.Add(CreateRotation(_Duration, 0, -90, -180, (PlaneProjection)over.Projection));
            _StoryBoard.Children.Add(CreateRotation(_Duration, 180, 90, 0, (PlaneProjection)under.Projection));
        }
        else if (direction == Directions.RightToLeft)
        {
            _StoryBoard.Children.Add(CreateRotation(_Duration, 0, 90, 180, (PlaneProjection)over.Projection));
            _StoryBoard.Children.Add(CreateRotation(_Duration, -180, -90, 0, (PlaneProjection)under.Projection));
        }

        // start animation
        _StoryBoard.Begin();
    }

    private static DoubleAnimationUsingKeyFrames CreateRotation(TimeSpan duration, double degreesFrom, double degreesMid, double degreesTo, PlaneProjection projection)
    {
        var _One = new EasingDoubleKeyFrame { KeyTime = new TimeSpan(0), Value = degreesFrom, EasingFunction = new CubicEase() { EasingMode = EasingMode.EaseIn } };
        var _Two = new EasingDoubleKeyFrame { KeyTime = new TimeSpan(duration.Ticks / 2), Value = degreesMid, EasingFunction = new CubicEase() { EasingMode = EasingMode.EaseIn } };
        var _Three = new EasingDoubleKeyFrame { KeyTime = new TimeSpan(duration.Ticks), Value = degreesTo, EasingFunction = new CubicEase() { EasingMode = EasingMode.EaseOut } };

        var _Animation = new DoubleAnimationUsingKeyFrames { BeginTime = new TimeSpan(0) };
        _Animation.KeyFrames.Add(_One);
        _Animation.KeyFrames.Add(_Two);
        _Animation.KeyFrames.Add(_Three);
        Storyboard.SetTargetProperty(_Animation, new PropertyPath("RotationY"));
        Storyboard.SetTarget(_Animation, projection);
        return _Animation;
    }

    private static ObjectAnimationUsingKeyFrames CreateVisibility(Duration duration, UIElement element, bool show)
    {
        var _One = new DiscreteObjectKeyFrame { KeyTime = new TimeSpan(0), Value = (show ? Visibility.Collapsed : Visibility.Visible) };
        var _Two = new DiscreteObjectKeyFrame { KeyTime = new TimeSpan(duration.TimeSpan.Ticks / 2), Value = (show ? Visibility.Visible : Visibility.Collapsed) };

        var _Animation = new ObjectAnimationUsingKeyFrames { BeginTime = new TimeSpan(0) };
        _Animation.KeyFrames.Add(_One);
        _Animation.KeyFrames.Add(_Two);
        Storyboard.SetTargetProperty(_Animation, new PropertyPath("Visibility"));
        Storyboard.SetTarget(_Animation, element);
        return _Animation;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T02:38:43.670

[为什么不直接使用来自http://phone.codeplex.com/](http://phone.codeplex.com/)的 Windows Phone 工具包中的 HubTile 控件

您还可以使用[http://www.telerik.com/products/windows-phone/overview/all-controls/hubtile.aspx](http://www.telerik.com/products/windows-phone/overview/all-controls/hubtile.aspx)上的 Telerik 提供的 HubTile 控件来实现此目的。

# ruby-on-rails - delay_job 没有正确执行考拉作业

> ID：13443030
> 
> 赞同：0
> 
> 时间：2012-11-18T18:12:21.823
> 
> 标签：ruby-on-rails, facebook, delayed-job, koala

我有一个使用 koala 的方法，它可以获取通过 facebook 注册我的应用程序的用户的所有联系人。

如果我“实时”运行它，它就可以工作。不过要等很久，所以我推迟了。

问题是，当使用延迟作业运行它时，它只检索一个联系人，而不是完整列表。

以前有人遇到过这个问题吗？

这是代码

在会话中#create

```
 service = Service.from_omniauth(env["omniauth.auth"])
  service.delay.get_contacts if Rails.env.production? 
```

service.rb 中的 get_contacts 函数

```
def get_contacts(network_size = 10)
  @graph = Koala::Facebook::API.new(token).get_connections("me", "friends")
  saved_contacts = user.friendships.count - 1
  total_contacts = @graph.count
  if total_contacts - saved_contacts > 0
    connections = @graph[saved_contacts..-1]
  else
    connections = nil
  end
  if !connections.nil?
    connections.each do |hash|
      Service.where(:provider => 'facebook', :uid => hash['id']).first_or_initialize.tap do |contact|
      contact.provider = 'facebook'
      contact.uid = hash['id']
      contact.save!
      Relationship.where(:user_id => user, :contact_id => contact).first_or_create
    end
  end
end 
```

# asp.net - asp.net 网站需要 memcached

> ID：13443032
> 
> 赞同：0
> 
> 时间：2012-11-18T18:12:38.037
> 
> 标签：asp.net, memcached

我有一个使用大量查询的站点，因此需要 cahce。由于我不时使用内置缓存的 httpruntime 重新编译（错误修复和新版本），导致我的缓存数据被擦除。我查看了 Memcahced，它说：“Memcached 是用于小块任意数据（字符串、对象）的内存键值存储”。我的应用需要存储几百万个键，但每个键的大小并没有那么大（最大的对象可以包含几千条记录的列表，但通常是一个具有 20-30 个属性的对象）。memcached 是否适合我的需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:28:14.657

我认为这里有几个问题。您尝试缓存的数据有多大？在 1.4.2 之前，memcache 每个项目的限制为 1mb。虽然您现在可以存储更大的记录，[但不建议这样做](http://code.google.com/p/memcached/wiki/ReleaseNotes142)。你的“几千条记录”有多大？只要您有合理的大小，那么是的，memcached 可能很有用并适合您的需求。它运行良好，具有可扩展性，并且您可以在工作人员之间共享缓存数据。

不使用 HttpRuntime 缓存的全部原因是因为它有时会被清除吗？因为使用 memcached 也可以做到这一点。持久存储也不是，虽然您可以[在此处](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.add.aspx)和[此处](https://stackoverflow.com/questions/6027517/can-the-time-to-live-ttl-for-a-memcached-key-can-be-set-to-infinite)设置无限过期时间，但任何新版本的 memcached、重新启动以及其他原因都可能导致缓存被清除。

# .htaccess - 如何使用 .htaccess 将以下目录映射到 url？

> ID：13443037
> 
> 赞同：0
> 
> 时间：2012-11-18T18:13:30.110
> 
> 标签：.htaccess, apache2.2

我有几个顶级目录，其中包含子目录，例如 www 被视为 webroot （对于每个子域，例如）

```
htdocs/myapp/admin/www     --- vhost subdomain admin.mysite.com 
htdocs/myapp/forum/        --- no sub domain 
htdocs/myapp/members/www   --- vhost subdomain members.mysite.com
htdocs/myapp/frontend/www  --- vhost subdomain frontend.mysite.com 
```

我只是想知道是否可以使用在每个 www 目录下定义的 .htaccess 从每个域访问论坛，例如

```
admin.mysite.com/forum
members.mysite.com/forum
frontend.mysite.com/forum 
```

我正在寻找一个只能与 .htaccess 一起使用的解决方案（而不是符号链接等）

感谢您的支持

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:21:21.490

在每个子域根 .htaccess 中创建以下重写规则，如下所示：

```
RewriteEngine On
RewriteRule ^forum/(.*)$ http://www.example.com/forum/$1 
```

请注意，`/forum`必须首先通过某个 URL 访问...没有这个，就无法使用显示内容`.htaccess`

# sql - 您可以将一个程序的两个实例用于网络上的一个数据库吗

> ID：13443041
> 
> 赞同：0
> 
> 时间：2012-11-18T18:13:59.030
> 
> 标签：sql, visual-studio, sql-server-2008, vbscript

嘿伙计们，这可能是一个需要回答的简单问题，但目前我一无所知，我需要使用 Visual Basics（窗口窗体）在 Visual Studio 2012 中开发一个应用程序，并将其连接到网络上的 sql server 2008 R2 上的数据库。该应用程序还应该能够在多台机器上运行并连接到单个数据库以运行多个 sql 事务。所以问题是，这是否可能，是否有一种独特的方式来开发这个应用程序，或者完全使用多个数据库的不同方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:36:33.607

在连接到单个 SQL Server 数据库的多台计算机上运行 WinForms 客户端是一种正常且预期的配置。SQL Server（以及一般的数据库）旨在满足多个用户的需求。

多个用户处理会影响公共数据库中相同表的项目也很常见。一旦从数据库中检索到数据，WinForms 客户端和数据库之间的连接就会被切断。当用户想要将修改的行提交到共享数据库时，将建立一个新的连接来更新修改的记录，删除任何标记为删除的记录，或者创建 WinForms 客户端请求的新记录。

# excel - 在 VBA 编辑器中保护后 Excel 加载项不起作用

> ID：13443044
> 
> 赞同：1
> 
> 时间：2012-11-18T18:14:13.020
> 
> 标签：excel, add-in

我已经编写并编译了一个 XLA - Excel 插件。加载项的问题是，如果我用密码保护 ADD-In 项目文件，我编写的宏不会出现在 . 如果 xla vbaproject 不受保护，宏确实会出现在 excel 选项 > 自定义 > 宏中。

请帮助我解释使用插件保护我的代码的简单方法。

# unix - 任何人都可以建议一个脚本，通过它我可以在六个不同的 unix 服务器的日志中搜索关键字

> ID：13443045
> 
> 赞同：0
> 
> 时间：2012-11-18T18:14:15.613
> 
> 标签：unix

我有六台 unix 服务器要搜索。它是一个 PITA，每次我进行交易时手动搜索所有六台服务器。因此，任何人都可以建议一个脚本，它可以一次在所有六台服务器中搜索关键字。目前，我正在使用 find 和 grep 的组合并手动登录到不同的服务器并搜索关键字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:19:01.797

Try using [PSSH](http://www.theether.org/pssh/docs/0.2.3/pssh-HOWTO.html), ex :

```
$ cat servers.txt
unix1
unix2
unix3

$ pssh -h servers.txt -o /tmp/output 'find / -name "foobar"'

$ ls /tmp/output 
```

Combined with an `ssh-agent` to deal with key pairs, all becomes easy.

# java - 如何在 JSF2.0 中声明默认的 .xhtml 页面

> ID：13443052
> 
> 赞同：0
> 
> 时间：2012-11-18T18:14:55.893
> 
> 标签：java, eclipse, jsf-2, tomcat7

我已经使用 Eclipse Indigo 和 Tomcat 7.0.32创建了一个 JSF 2.0 应用程序，如[Eclipse 文档中所示。](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.jst.jsf.doc.user/html/gettingstarted/tutorial/JSFTools_tutorial_JSF20.html)

在这个应用程序中，我有两个页面：

1.  登录.xhtml
2.  欢迎.xhtml

从`login.xhtml`我导航到`welcome.xhtml`。

我已经`login.xhtml`在我的`web.xml`.

```
 <welcome-file-list>
    <welcome-file>login.xhtml</welcome-file>
  </welcome-file-list> 
```

并将 for 定义`url-pattern`为`Faces Servlet`：

```
 <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
  </servlet-mapping> 
```

现在我有两个问题：

1.  当我访问 URL 时，`http://localhost:8080/LibraryInformationSystem/` 我可以看到登录页面，但登录后，当我导航到 welcome.xhtml 时，URL 变为`http://localhost:8080/LibraryInformationSystem/login.xhtml`not `http://localhost:8080/LibraryInformationSystem/welcome.xhtml`；但如果我手动浏览`http://localhost:8080/LibraryInformationSystem/welcome.xhtml`，它也会显示相同的内容。我的问题是为什么 URL 没有改变？这是定义默认页面的正确方法吗？我从另外两个 SO 线程中找到了信息，第一个在[这里](https://stackoverflow.com/questions/9295878/how-to-display-a-default-home-page)，第二个在[这里](https://stackoverflow.com/questions/5343086/jsf-make-a-jsf-a-default-page-to-go-to-when-type-mydomain-com)。
2.  第二个问题是，当我从 Eclipse 运行应用程序并将应用程序启动到其内部浏览器时，我可以看到登录页面，但是如果我关闭从 Eclipse 运行的服务器并从批处理文件启动运行 Tomcat。 bat 位于 bin 文件夹中，并将应用程序导出为 war 文件并将其部署到 webapps 文件夹中，有时我可以看到登录页面，有时我会看到来自 Firefox 或 Chrome 的 Tomcat 的 HTTP 错误 - 404 页面。如果我关闭 startup.bat 并从 webapps 文件夹中删除 myapplication.war 和 myapplication 文件夹，然后再次从 startup.bat 启动服务器并再次从 Eclipse 导出 war 我可以看到登录页面，在这种情况下没有 404 错误. 为什么会这样？

任何指针都会对我很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:27:21.330

关于第 1) 点，JSF 打破了 HTTP 语义。它应该使用 GET 来提供 的内容`http://localhost:8080/LibraryInformationSystem/welcome.xhtml`，但 JSF 使用 POST，因此 URL 不会更改。您可以执行 a`Post-Redirect-Get`来更新 URL，但这不是 JSF 默认的工作方式。

关于第 2 点，您应该避免在同一个 SO 问题中提出两个问题。

# jquery - JQuery 移动单选按钮控件组宽度

> ID：13443055
> 
> 赞同：0
> 
> 时间：2012-11-18T18:15:01.570
> 
> 标签：jquery, jquery-mobile, radio-button

我正在尝试使用不同宽度的按钮来设置 jquery 移动单选按钮控件组的样式。

有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:22:43.410

这里是 jquery 插件的链接 [http://line25.com/articles/jquery-plugins-for-styling-checkbox-radio-buttons](http://line25.com/articles/jquery-plugins-for-styling-checkbox-radio-buttons) 和这里 [http://www.itsalif.info/content/demo-ezmark-jquery-plugin /](http://www.itsalif.info/content/demo-ezmark-jquery-plugin/) 和图像单选按钮 [http://www.thheuer.com/2011/10/jquery-plugins-image-radio-buttons/](http://www.thheuer.com/2011/10/jquery-plugins-image-radio-buttons/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:51:55.517

是的，您只需要覆盖 CSS，[请参阅文档](http://jquerymobile.com/demos/1.2.0/docs/api/themes.html)

> **压倒一切的主题**
> 
> 主题旨在作为一个坚实的起点，但旨在定制。由于一切都由 CSS 控制，因此可以很容易地使用 Web 检查器工具来识别您要修改的样式属性。添加到元素中的一组主题类（全局）和语义结构类（特定于小部件）提供了一组丰富的可能选择器，用于定位样式覆盖。我们建议将外部样式表添加到头部，放置在结构和主题样式表引用之后，其中包含所有样式覆盖。这使您可以轻松地更新到较新版本的库，因为覆盖与库代码分开。

# sql-server - Why do I get significantly improved performances by performing the described modification in a SQL query?

> ID：13443058
> 
> 赞同：4
> 
> 时间：2012-11-18T18:15:24.377
> 
> 标签：sql-server, performance, tsql

I was trying to modify a select query, which is included in a SP (TSQL), in order to speed up this SP. The original run time of this query was a few minutes and splitting this query into two parts, improved the run time to a few seconds only. No change was done to the defined index, and the same one is still used for this query. Can someone please explain what exactly caused this significant improvement and why?

Thank you.

The original query:

```
SELECT ( AgentFirstName + ' ' + AgentLastName ) AS AgentName,
       AC.Agent_ID,
       AC.TimeStamp
INTO   #tAgentList
FROM   AgentConfiguration AC
       JOIN Getpermittedagents(@tenantId, @userName) AS PA
         ON AC.Agent_ID = PA.Agent_ID
             OR PA.Agent_ID = -1
WHERE  AC.TimeStamp < @To
       AND AC.Tenant_ID = @tenantId
       AND ( EXISTS (SELECT *
                     FROM   AgentsCampaignActivities AS ACA
                     WHERE  AC.AgentGlobal_ID = ACA.AgentGlobal_ID)
              OR @IsCampaignReport = 0 ) 
```

The improved query:

```
SELECT Agent_ID,
       AgentFirstName,
       AgentLastName,
       TimeStamp
INTO   #tt
FROM   AgentConfiguration
WHERE  TimeStamp > @From
       AND TimeStamp < @To
       AND Tenant_ID = @tenantId
       AND ( EXISTS (SELECT *
                     FROM   AgentsCampaignActivities AS ACA
                     WHERE  AgentGlobal_ID = ACA.AgentGlobal_ID)
              OR @IsCampaignReport = 0 )

SELECT ( AgentFirstName + ' ' + AgentLastName ) AS AgentName,
       tt.Agent_ID,
       tt.TimeStamp
INTO   #tAgentList
FROM   Getpermittedagents(@tenantId, @userName) AS PA
       JOIN #tt tt
         ON tt.Agent_ID = PA.Agent_ID
             OR PA.Agent_ID = -1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:32:22.400

在我看来，提出的两个查询并不等同。在第二个中，您正在过滤 where TimeStamp > @From where 因为第一个查询不这样做。因此，我猜第一个查询处理的行数比第二个查询多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T07:45:35.860

这只是一个假设，可以通过比较执行计划来确认，但关键区别可能在此子句中：ON AC.Agent_ID = PA.Agent_ID OR PA.Agent_ID = -1

这可能使用 PA.Agent_ID 上的索引来破坏。

在第一种情况下，它在所有数据上执行，在第二种情况下，在预过滤集上执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T07:28:59.277

试试这个.. 在 EXISTS 部分中只使用必需的或索引的自动增量列名。它减少了表中的 READ 数据。“存在（选择 *”

请发布两个执行计划以获取更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T01:11:55.570

`AgentConfiguration`和之间的连接`Getpermittedagents`显然很昂贵。我的猜测是这`AgentConfiguration`需要一个索引，`Agent_ID`但如果没有执行计划就很难判断。我建议您研究这两个查询的执行计划。

# android - how do i retrieve the incoming phone call's number and send a sms while reject the call?

> ID：13443060
> 
> 赞同：1
> 
> 时间：2012-11-18T18:15:49.000
> 
> 标签：android, android-intent

when someone make a call then if i reject or drop the call,my application send an automatic reply to the caller.But i fetch a problem,when i reject the call the AVD shows a message- "Unfortunately Autoreply2Caller is Stop " .Please,help .Here is my source code: package bd.com.example.autoreply2caller;

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.telephony.TelephonyManager;
import android.telephony.gsm.SmsManager;
import android.widget.Toast;

public class ReplyToCaller extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

        // Toast.makeText(context, "SMS Received: " + intent.getAction(),
        // Toast.LENGTH_LONG).show();

        if (intent.getAction()
                .equals("android.provider.Telephony.SMS_RECEIVED")) {
            // extract the SMS
            Bundle bundle = intent.getExtras();
            SmsMessage[] chunks = null;
            String number = "";
            String text = "";

            if (bundle != null) {
                Object[] pdus = (Object[]) bundle.get("pdus");
                chunks = new SmsMessage[pdus.length];
                for (int i = 0; i < pdus.length; i++) {
                    chunks[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                    text += chunks[i].getMessageBody();
                    number = chunks[i].getOriginatingAddress();
                }
            }
            Toast.makeText(context,
                    "SMS Received: from: " + number + " Message Body: " + text,
                    Toast.LENGTH_LONG).show();
            // send an automatic reply
            SmsManager smsManager = SmsManager.getDefault();
            smsManager.sendTextMessage(number, null,
                    "I am busy right now. I'll call you later.", null, null);

        }

        // reply to the caller
        String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);

        if (state.equals(TelephonyManager.EXTRA_STATE_RINGING)) {
            // Phone is ringing

        } else if (state.equals(TelephonyManager.EXTRA_STATE_OFFHOOK)) {
            // Call received

        } else if (state.equals(TelephonyManager.EXTRA_STATE_IDLE)) {
            // Call Dropped or rejected
            String number = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);

            // send an automatic reply
            SmsManager smsManager = SmsManager.getDefault();
            smsManager.sendTextMessage(number, null,
                    "I am busy right now. I'll call you later.", null, null);

        }

    }
} 
```

And the manifest

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="bd.com.example.autoreply2caller"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.RECEIVE_SMS"/>
    <uses-permission android:name="android.permission.SEND_SMS"/>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <uses-permission android:name="android.permission.CALL_PHONE"/>
    <uses-permission android:name="android.permission.CALL_PRIVILEGED"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <receiver android:name="ReplyToCaller">
            <intent-filter>
                <action android:name="android.provider.Telephony.SMS_RECEIVED"/>
                <action android:name="android.intent.action.PHONE_STATE"/>
                <action android:name="android.intent.action.NEW_OUTGOING_CALL"/>
            </intent-filter>
        </receiver>
    </application>

</manifest>

11-18 20:05:30.543: D/AndroidRuntime(3311): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
11-18 20:05:30.543: D/AndroidRuntime(3311): CheckJNI is ON
11-18 20:05:30.613: D/dalvikvm(3311): Trying to load lib libjavacore.so 0x0
11-18 20:05:30.623: D/dalvikvm(3311): Added shared lib libjavacore.so 0x0
11-18 20:05:30.709: D/dalvikvm(3311): Trying to load lib libnativehelper.so 0x0
11-18 20:05:30.709: D/dalvikvm(3311): Added shared lib libnativehelper.so 0x0
11-18 20:05:31.899: D/AndroidRuntime(3311): Calling main entry com.android.commands.am.Am
11-18 20:05:31.963: I/ActivityManager(1022): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=bd.com.example.autoreply2caller/.MainActivity u=0} from pid 3311
11-18 20:05:31.963: W/WindowManager(1022): Failure taking screenshot for (164x246) to layer 21030
11-18 20:05:32.093: D/AndroidRuntime(3311): Shutting down VM
11-18 20:05:32.093: D/dalvikvm(798): WAIT_FOR_CONCURRENT_GC blocked 0ms
11-18 20:05:32.103: I/ActivityManager(1022): Start proc bd.com.example.autoreply2caller for activity bd.com.example.autoreply2caller/.MainActivity: pid=3321 uid=10053 gids={1028}
11-18 20:05:32.193: D/dalvikvm(3321): Not late-enabling CheckJNI (already on)
11-18 20:05:32.247: I/Choreographer(1022): Skipped 40 frames!  The application may be doing too much work on its main thread.
11-18 20:05:32.293: D/dalvikvm(3321): Debugger has detached; object registry had 1 entries
11-18 20:05:32.303: D/dalvikvm(3311): GC_CONCURRENT freed 101K, 77% free 479K/2048K, paused 4ms+36ms, total 163ms
11-18 20:05:32.303: D/jdwp(3311): Got wake-up signal, bailing out of select
11-18 20:05:32.303: D/dalvikvm(3311): Debugger has detached; object registry had 1 entries
11-18 20:05:32.393: D/dalvikvm(798): GC_EXPLICIT freed 37K, 6% free 5935K/6275K, paused 4ms+6ms, total 272ms
11-18 20:05:32.393: D/dalvikvm(798): WAIT_FOR_CONCURRENT_GC blocked 0ms
11-18 20:05:32.413: E/Trace(3321): error opening trace file: No such file or directory (2)
11-18 20:05:32.533: D/dalvikvm(798): GC_EXPLICIT freed <1K, 6% free 5935K/6275K, paused 45ms+5ms, total 139ms
11-18 20:05:32.533: D/dalvikvm(798): WAIT_FOR_CONCURRENT_GC blocked 0ms
11-18 20:05:32.683: D/dalvikvm(1022): WAIT_FOR_CONCURRENT_GC blocked 0ms
11-18 20:05:32.693: D/dalvikvm(798): GC_EXPLICIT freed <1K, 6% free 5935K/6275K, paused 67ms+3ms, total 157ms
11-18 20:05:32.903: I/Choreographer(1022): Skipped 32 frames!  The application may be doing too much work on its main thread.
11-18 20:05:33.423: D/dalvikvm(1022): GC_EXPLICIT freed 484K, 20% free 9202K/11399K, paused 15ms+25ms, total 738ms
11-18 20:05:33.523: I/Choreographer(1022): Skipped 33 frames!  The application may be doing too much work on its main thread.
11-18 20:05:33.793: D/gralloc_goldfish(3321): Emulator without GPU emulation detected.
11-18 20:05:33.903: I/Choreographer(1022): Skipped 31 frames!  The application may be doing too much work on its main thread.
11-18 20:05:33.903: I/ActivityManager(1022): Displayed bd.com.example.autoreply2caller/.MainActivity: +1s854ms
11-18 20:05:33.983: I/Choreographer(1022): Skipped 50 frames!  The application may be doing too much work on its main thread.
11-18 20:05:35.492: D/CallNotifier(1119): RINGING... (new)
11-18 20:05:35.492: D/CallNotifier(1119): onNewRingingConnection(): state = RINGING, conn = {  incoming: true state: INCOMING post dial state: NOT_STARTED }
11-18 20:05:35.502: D/CallNotifier(1119): SignalInfoTonePlayer.run(toneId = 98)...
11-18 20:05:35.552: D/PhoneNumberUtils(1119): System property doesn't provide any emergency numbers. Use embedded logic for determining ones.
11-18 20:05:35.602: D/PhoneStatusBar(1084): disable: < expand icons ALERTS* ticker system_info back home recent clock >
11-18 20:05:35.642: D/AccelerometerListener(1119): enable(false)
11-18 20:05:35.862: D/CallNotifier(1119): showIncomingCall()...  phone state = RINGING
11-18 20:05:35.962: D/dalvikvm(1191): GC_CONCURRENT freed 334K, 9% free 6894K/7495K, paused 16ms+6ms, total 253ms
11-18 20:05:36.063: D/PhoneStatusBar(1084): addNotification score=20
11-18 20:05:36.342: D/PhoneStatusBar(1084): Notification has fullScreenIntent; sending fullScreenIntent
11-18 20:05:36.342: I/ActivityManager(1022): START {act=android.intent.action.MAIN flg=0x10840000 cmp=com.android.phone/.InCallScreen u=0} from pid -1
11-18 20:05:36.392: I/Choreographer(1022): Skipped 32 frames!  The application may be doing too much work on its main thread.
11-18 20:05:36.392: W/WindowManager(1022): Failure taking screenshot for (164x246) to layer 21030
11-18 20:05:36.412: E/WVMExtractor(800): Failed to open libwvm.so
11-18 20:05:36.543: I/Choreographer(1084): Skipped 156 frames!  The application may be doing too much work on its main thread.
11-18 20:05:36.692: D/Ringtone(1119): Successfully created local player
11-18 20:05:36.692: I/AudioService(1022):  AudioFocus  requestAudioFocus() from AudioFocus_For_Phone_Ring_And_Calls
11-18 20:05:36.722: D/AudioHardwareInterface(800): setMode(RINGTONE)
11-18 20:05:36.772: I/Choreographer(1084): Skipped 56 frames!  The application may be doing too much work on its main thread.
11-18 20:05:36.812: D/AudioSink(800): bufferCount (4) is too small and increased to 12
11-18 20:05:36.822: I/Choreographer(1084): Skipped 32 frames!  The application may be doing too much work on its main thread.
11-18 20:05:36.912: D/InCallScreen(1119): onNewIntent: intent = Intent { act=android.intent.action.MAIN flg=0x10c40000 cmp=com.android.phone/.InCallScreen }, phone state = RINGING
11-18 20:05:36.912: D/PhoneStatusBar(1084): disable: < EXPAND* icons ALERTS ticker system_info back home recent clock >
11-18 20:05:37.063: D/InCallTouchUi(1119): showIncomingCallWidget(). widget visibility: 8
11-18 20:05:37.105: I/Choreographer(1022): Skipped 82 frames!  The application may be doing too much work on its main thread.
11-18 20:05:37.105: I/Choreographer(1084): Skipped 83 frames!  The application may be doing too much work on its main thread.
11-18 20:05:37.122: D/PhoneStatusBar(1084): disable: < EXPAND icons ALERTS ticker system_info BACK* HOME* RECENT* clock >
11-18 20:05:37.162: I/Choreographer(1119): Skipped 144 frames!  The application may be doing too much work on its main thread.
11-18 20:05:37.326: I/Choreographer(1084): Skipped 129 frames!  The application may be doing too much work on its main thread.
11-18 20:05:37.692: I/Choreographer(1119): Skipped 237 frames!  The application may be doing too much work on its main thread.
11-18 20:05:37.732: I/Choreographer(1022): Skipped 64 frames!  The application may be doing too much work on its main thread.
11-18 20:05:37.862: I/Choreographer(1022): Skipped 65 frames!  The application may be doing too much work on its main thread.
11-18 20:05:38.732: D/InCallTouchUi(1119): showIncomingCallWidget(). widget visibility: 0
11-18 20:05:38.742: I/Choreographer(1119): Skipped 725 frames!  The application may be doing too much work on its main thread.
11-18 20:05:38.912: I/Choreographer(1022): Skipped 80 frames!  The application may be doing too much work on its main thread.
11-18 20:05:39.142: D/dalvikvm(1310): WAIT_FOR_CONCURRENT_GC blocked 0ms
11-18 20:05:39.172: I/Choreographer(1119): Skipped 249 frames!  The application may be doing too much work on its main thread.
11-18 20:05:39.462: D/dalvikvm(1310): GC_EXPLICIT freed 296K, 12% free 8404K/9479K, paused 4ms+54ms, total 325ms
11-18 20:05:39.692: I/Choreographer(1119): Skipped 317 frames!  The application may be doing too much work on its main thread.
11-18 20:05:39.842: I/Choreographer(1119): Skipped 100 frames!  The application may be doing too much work on its main thread.
11-18 20:05:40.062: I/Choreographer(1119): Skipped 143 frames!  The application may be doing too much work on its main thread.
11-18 20:05:40.372: I/Choreographer(1119): Skipped 205 frames!  The application may be doing too much work on its main thread.
11-18 20:05:40.672: I/Choreographer(1119): Skipped 193 frames!  The application may be doing too much work on its main thread.
11-18 20:05:40.902: I/Choreographer(1119): Skipped 153 frames!  The application may be doing too much work on its main thread.
11-18 20:05:41.192: I/Choreographer(1119): Skipped 187 frames!  The application may be doing too much work on its main thread.
11-18 20:05:41.304: D/dalvikvm(1119): GC_CONCURRENT freed 388K, 9% free 7589K/8327K, paused 47ms+11ms, total 189ms
11-18 20:05:41.432: I/Choreographer(1119): Skipped 156 frames!  The application may be doing too much work on its main thread.
11-18 20:05:41.672: I/Choreographer(1119): Skipped 157 frames!  The application may be doing too much work on its main thread.
11-18 20:05:41.972: I/Choreographer(1119): Skipped 191 frames!  The application may be doing too much work on its main thread.
11-18 20:05:42.292: D/PhoneUtils(1119): hangup(): hanging up ringing call
11-18 20:05:42.292: D/PhoneUtils(1119): hangupRingingCall(): regular incoming call: hangup()
11-18 20:05:42.292: D/PhoneUtils(1119): - hangup(Call): regular hangup()...
11-18 20:05:42.332: I/Choreographer(1119): Skipped 235 frames!  The application may be doing too much work on its main thread.
11-18 20:05:42.622: I/Choreographer(1119): Skipped 225 frames!  The application may be doing too much work on its main thread.
11-18 20:05:42.732: I/Choreographer(1119): Skipped 70 frames!  The application may be doing too much work on its main thread.
11-18 20:05:42.852: I/Choreographer(1119): Skipped 83 frames!  The application may be doing too much work on its main thread.
11-18 20:05:43.122: D/PhoneStatusBar(1084): disable: < EXPAND icons alerts* ticker system_info BACK HOME RECENT clock >
11-18 20:05:43.174: D/AndroidRuntime(3321): Shutting down VM
11-18 20:05:43.174: W/dalvikvm(3321): threadid=1: thread exiting with uncaught exception (group=0xb3de7288)
11-18 20:05:43.192: E/AndroidRuntime(3321): FATAL EXCEPTION: main
11-18 20:05:43.192: E/AndroidRuntime(3321): java.lang.RuntimeException: Unable to start receiver bd.com.example.autoreply2caller.ReplyToCaller: java.lang.IllegalArgumentException: Invalid destinationAddress
11-18 20:05:43.192: E/AndroidRuntime(3321):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2236)
11-18 20:05:43.192: E/AndroidRuntime(3321):     at android.app.ActivityThread.access$1500(ActivityThread.java:130)
11-18 20:05:43.192: E/AndroidRuntime(3321):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1271)
11-18 20:05:43.192: E/AndroidRuntime(3321):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-18 20:05:43.192: E/AndroidRuntime(3321):     at android.os.Looper.loop(Looper.java:137)
11-18 20:05:43.192: E/AndroidRuntime(3321):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-18 20:05:43.192: E/AndroidRuntime(3321):     at java.lang.reflect.Method.invokeNative(Native Method)
11-18 20:05:43.192: E/AndroidRuntime(3321):     at java.lang.reflect.Method.invoke(Method.java:511)
11-18 20:05:43.192: E/AndroidRuntime(3321):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-18 20:05:43.192: E/AndroidRuntime(3321):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-18 20:05:43.192: E/AndroidRuntime(3321):     at dalvik.system.NativeStart.main(Native Method)
11-18 20:05:43.192: E/AndroidRuntime(3321): Caused by: java.lang.IllegalArgumentException: Invalid destinationAddress
11-18 20:05:43.192: E/AndroidRuntime(3321):     at android.telephony.SmsManager.sendTextMessage(SmsManager.java:77)
11-18 20:05:43.192: E/AndroidRuntime(3321):     at android.telephony.gsm.SmsManager.sendTextMessage(SmsManager.java:79)
11-18 20:05:43.192: E/AndroidRuntime(3321):     at bd.com.example.autoreply2caller.ReplyToCaller.onReceive(ReplyToCaller.java:74)
11-18 20:05:43.192: E/AndroidRuntime(3321):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2229)
11-18 20:05:43.192: E/AndroidRuntime(3321):     ... 10 more
11-18 20:05:43.202: D/AccelerometerListener(1119): enable(false)
11-18 20:05:43.252: D/PhoneStatusBar(1084): disable: < expand* icons alerts ticker system_info BACK HOME RECENT clock >
11-18 20:05:43.282: I/Choreographer(1119): Skipped 273 frames!  The application may be doing too much work on its main thread.
11-18 20:05:43.613: I/Choreographer(1022): Skipped 90 frames!  The application may be doing too much work on its main thread.
11-18 20:05:43.922: I/Choreographer(1022): Skipped 33 frames!  The application may be doing too much work on its main thread.
11-18 20:05:43.962: D/InCallTouchUi(1119): hideIncomingCallWidget()
11-18 20:05:43.972: D/PhoneStatusBar(1084): disable: < expand icons alerts ticker system_info back* home* recent* clock >
11-18 20:05:43.972: I/Choreographer(1119): Skipped 441 frames!  The application may be doing too much work on its main thread.
11-18 20:05:44.202: I/Choreographer(1022): Skipped 34 frames!  The application may be doing too much work on its main thread.
11-18 20:05:44.542: D/CallNotifier(1119): onDisconnect: cause = INCOMING_REJECTED, incoming = true, date = 1353247535489
11-18 20:05:44.542: D/CallNotifier(1119): SignalInfoTonePlayer.run(toneId = 98)...
11-18 20:05:44.602: D/AudioHardwareInterface(800): setMode(NORMAL)
11-18 20:05:44.642: I/AudioService(1022):  AudioFocus  abandonAudioFocus() from AudioFocus_For_Phone_Ring_And_Calls
11-18 20:05:44.692: I/PowerManagerService(1022): clearUserActivity for 10000ms from now
11-18 20:05:44.702: D/PhoneNumberUtils(1119): System property doesn't provide any emergency numbers. Use embedded logic for determining ones.
11-18 20:05:44.713: I/ActivityManager(1022): moveTaskToBack: 6
11-18 20:05:45.002: W/WindowManager(1022): Failure taking screenshot for (164x246) to layer 21035
11-18 20:05:45.092: I/Choreographer(1119): Skipped 723 frames!  The application may be doing too much work on its main thread.
11-18 20:05:45.182: I/Choreographer(1022): Skipped 98 frames!  The application may be doing too much work on its main thread.
11-18 20:05:45.443: I/Choreographer(1119): Skipped 228 frames!  The application may be doing too much work on its main thread.
11-18 20:05:45.573: I/Choreographer(1119): Skipped 71 frames!  The application may be doing too much work on its main thread.
11-18 20:05:45.747: D/InCallTouchUi(1119): - triggerPing: InCallScreen no longer in foreground; ignoring...
11-18 20:05:46.454: W/ActivityManager(1022): Launch timeout has expired, giving up wake lock!
11-18 20:05:50.532: I/Choreographer(1022): Skipped 33 frames!  The application may be doing too much work on its main thread.
11-18 20:05:55.350: W/ActivityManager(1022): Activity idle timeout for ActivityRecord{b471e7b0 bd.com.example.autoreply2caller/.MainActivity} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:16:45.430

要收听电话状态，`PhoneStateListener`请参阅：[this answer](https://stackoverflow.com/a/13154533/803225)

尝试`smsMessages[n].getDisplayOriginatingAddress()`

我总是像这样从短信中提取地址：

```
Object messages[] = (Object[]) bundle.get("pdus");
smsMessages = new SmsMessage[messages.length];

for (int n = 0; n < messages.length; n++)
{
    smsMessages[n] = SmsMessage.createFromPdu((byte[]) messages[n]);
    JLog.v("Reciever: SMS :-\r\n ========== \r\n "
            + smsMessages[n].getDisplayOriginatingAddress() + "\r\n "
            + smsMessages[n].getServiceCenterAddress() + "\r\n "
            + smsMessages[n].getDisplayMessageBody() 
            + "\r\n========");
} 
```

此外，您在重新发送短信时可能需要做的是确保号码已格式化！注销这些东西真的很有帮助！

拨出电话号码需要看起来像`4412345123456`或任何其他有效号码。

[PhoneNumberUtils](https://developer.android.com/reference/android/telephony/PhoneNumberUtils.html)为您提供格式化方法。

# android - Touch Listener on multiple image views in a single Activity

> ID：13443062
> 
> 赞同：1
> 
> 时间：2012-11-18T18:16:01.740
> 
> 标签：android, android-imageview, multi-touch

I want to dynamically add multiple imageViews on my activity and then handle touch events on each imageView individually. I am able to do this with single imageView like this:

This is the activity:

```
public class Touch extends Activity implements OnTouchListener {
private static final String TAG = "Touch";
Matrix matrix = new Matrix();
Matrix savedMatrix = new Matrix();
 private PointF start = new PointF();
 private PointF mid = new PointF();
 private float oldDist = 1f;

// We can be in one of these 3 states
static final int NONE = 0; 
static final int DRAG = 1;
static final int ZOOM = 2;
int mode = NONE; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ImageView view = (ImageView) findViewById(R.id.imageView);
    view.setOnTouchListener(this);
}

public boolean onTouch(View v, MotionEvent event)

{
    ImageView view = (ImageView) v;
    // Dump touch event to log
    dumpEvent(event);

    // Handle touch events here... 
    switch (event.getAction() & MotionEvent.ACTION_MASK)
    { 

    case MotionEvent.ACTION_DOWN:

        savedMatrix.set(matrix);
        start.set(event.getX(), event.getY());
        Log.d(TAG, "mode=DRAG" );
        mode = DRAG;
        break;

        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_POINTER_UP:
        mode = NONE;
        Log.d(TAG, "mode=NONE" );
        break;

        case MotionEvent.ACTION_MOVE:
        if (mode == DRAG) {
        matrix.set(savedMatrix);
        matrix.postTranslate(event.getX() - start.x,
        event.getY() - start.y);
        }

        else if (mode == ZOOM) {
            float newDist = spacing(event);
            Log.d(TAG, "newDist=" + newDist);
            if (newDist > 10f) {
            matrix.set(savedMatrix);
            float scale = newDist / oldDist;
            matrix.postScale(scale, scale, mid.x, mid.y);
            }
            }
        break;

        case MotionEvent.ACTION_POINTER_DOWN:
            oldDist = spacing(event);
            Log.d(TAG, "oldDist=" + oldDist);
            if (oldDist > 10f) {
            savedMatrix.set(matrix);
            midPoint(mid, event);
            mode = ZOOM;
            Log.d(TAG, "mode=ZOOM" );
            }
            break;
    }

    view.setImageMatrix(matrix); 
    return true; // indicate event was handled
}

/** Show an event in the LogCat view, for debugging */
private void dumpEvent(MotionEvent event) {
    String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE",
            "POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
    StringBuilder sb = new StringBuilder();
    int action = event.getAction();
    int actionCode = action & MotionEvent.ACTION_MASK;
    sb.append("event ACTION_").append(names[actionCode]);
    if (actionCode == MotionEvent.ACTION_POINTER_DOWN
            || actionCode == MotionEvent.ACTION_POINTER_UP) {
        sb.append("(pid ").append(
                action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
        sb.append(")");
    }
    sb.append("[");
    for (int i = 0; i < event.getPointerCount(); i++) {
        sb.append("#").append(i);
        sb.append("(pid ").append(event.getPointerId(i));
        sb.append(")=").append((int) event.getX(i));
        sb.append(",").append((int) event.getY(i));
        if (i + 1 < event.getPointerCount())
            sb.append(";");
    }
    sb.append("]");
    Log.d(TAG, sb.toString());
}

private float spacing(MotionEvent event) {
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return FloatMath.sqrt(x * x + y * y);
    }

private void midPoint(PointF point, MotionEvent event) {
    float x = event.getX(0) + event.getX(1);
    float y = event.getY(0) + event.getY(1);
    point.set(x / 2, y / 2);
    } 
```

}

This is the main.xml:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout`xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
<ImageView android:id="@+id/imageView"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:src="@drawable/basketball"
android:scaleType="matrix"/>
</LinearLayout> 
```

But if i add another image below it and make it's width and height to "wrap_content" then it just moves in the specified area. Below is the link of image of result that i get when i try to add multiple touch events:

[https://www.dropbox.com/s/vymbsv88fqm26xx/SC20121118-231359.png](https://www.dropbox.com/s/vymbsv88fqm26xx/SC20121118-231359.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-17T09:17:57.977

我希望我下面的代码可以帮助您解决问题。在这段代码中，我正在使用 for 循环创建一个 ImageViews 数组。根据所触摸的图像，我向 TextView 添加了一个与单击的图像相对应的数字。

```
mImages= new ImageView[numImage];
    for (int i=0; i <numImage; i++) {
        String imgID = "imageNum" + (i+1);
        int resID = getResources().getIdentifier(imgID, "id", getActivity().getPackageName());
        mImages[i] = view.findViewById(resID);

        mImages[i].setOnTouchListener(new ImageView.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent motionEvent) {

                int msg=-1;
                //v.getId() will give you the image id
                switch(v.getId()){
                    case R.id.imageNum1:
                        if(v.getPivotX()==motionEvent.getX() && v.getPivotY()==motionEvent.getY()) {
                            msg = 1;
                        }
                        break;
                    case R.id.imageNum2:
                        msg=2;
                        break;
                    case R.id.imageNum3:
                        msg=3;
                        break;
                    case R.id.imageNum4:
                        msg=4;
                        break;
                    case R.id.imageNum5:
                        msg=5;
                        break;
                    case R.id.imageNum6:
                        msg=6;
                        break;
                    case R.id.imageNum7:
                        msg=7;
                        break;
                    case R.id.imageNum8:
                        msg=8;
                        break;
                    case R.id.imageNum9:
                        msg=9;
                        break;

                }//switch

                if(msg!=-1)
                usertextView.setText(usertextView.getText().toString()+msg);

        return true;
            }//onTouch
        });//setOnTouchlistener

    }//for 
```

# c# - In .Net/C# is there a way to either wait for or get notified when all my worker threads have completed processing?

> ID：13443064
> 
> 赞同：0
> 
> 时间：2012-11-18T18:16:22.367
> 
> 标签：c#, .net, multithreading

I've got a .Net C# application where I'm attempting to spawn multiple threads. The application is for performance testing and is a simple console app. The piece for spawning threads works fine.

What I'm looking for is the correct mechanism fo either being notified when all the threads complete execution, or waiting within my application for all the threads to complete. At the point I will print out the summary of the results.

# Here is what my code snippet looks like:

```
String testName = "foo";
String fullTestName;

// Iterate and create threads
for (int index = 0; index < numberOfThreads; index++)
{
    fullTestName = String.Format("{0}Thread{1}", testName, index);

    Thread thread = new Thread(() => PerformanceTest(fullTestName, index, numberOfRows, testToRun));

    thread.IsBackground = true;
    thread.Name = fullTestName;
    thread.Start();
}

void PerformanceTest(String testName, int iterationNumber, long numberOfRows)
{
    // Insert a bunch of rows into DB
} 
```

I've looked at using RegisterWaitForSingleObject(), but could not figure out how to use it with my scenario.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:39:46.653

尝试使用任务而不是线程。

```
class Program
{

    static Random random = new Random();

    static void Main(string[] args)
    {
        TaskFactory taskfactory = new TaskFactory(TaskCreationOptions.LongRunning, TaskContinuationOptions.None);
        var tasks = new List<Task>();
        for (int i = 0; i < 10; i++)
        {
            var task = taskfactory.StartNew(() => { DoWork("Thread " + i); });
            Console.WriteLine(string.Format("Started thread {0}", i));
            tasks.Add(task);
        }
        Task.WaitAll(tasks.ToArray());  
    }

    static void DoWork(string threadname)
    {
        int sleeptime = random.Next(10) * 1000;
        Console.WriteLine(string.Format("Thread {0} sleeping {1}ms", threadname, sleeptime));
        Thread.Sleep(sleeptime);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T18:45:27.293

您可以使用`Task`而不是`Thread`. 它为您提供了对并行操作的更高级别的抽象，并提供了一个不错的同步方法库。例如，您可以使用以下命令等待所有任务完成。

```
IEnumerable<Task> BeginParallelTests(string fullTestName, int numberOfThreads)
{
    for(var index = 0; index < numberOfThreads; index++)
    {
        yield return Task.Factory.StartNew(
            () => PerformanceTest(fullTestName, index, numberOfRows));
    }
} 
```

然后在您的主要方法中，您可以只使用：

```
Task.WaitAll(BeginParallelTests(testName, numberOfThreads)); 
```

（也许你必须使用类似`ToArray()`的东西来强制枚举`BeginParallelTest`方法）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T18:18:50.253

> What I'm looking for is the correct mechanism fo either being notified when all the threads complete execution, or waiting within my application for all the threads to complete.

The simplest approach is just to keep track of the threads (use an array) and then call [`Thread.Join`](http://msdn.microsoft.com/en-us/library/system.threading.thread.join.aspx) on each thread in turn:

```
Thread[] threads = new Thread[numberOfThreads];
for (int index = 0; index < numberOfThreads; index++)
{
    string fullTestName = String.Format("{0}Thread{1}", testName, index);

    Thread thread = new Thread
         (() => PerformanceTest(fullTestName, index, numberOfRows, testToRun));    
    thread.IsBackground = true;
    thread.Name = fullTestName;
    thread.Start();
    threads[index] = thread;
}

// Wait for everything to finish
foreach (Thread thread in threads)
{
    thread.Join();
} 
```

Using the Task Parallel Library would be another alternative, but then you may well not have many threads running at a time - it may well perform better that way, but if you're trying to measure what happens with a specific number of threads, you need to really start them all yourself.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-18T18:30:59.237

另一个建议是使用 PLinq 或新的 asynch 关键字来提高抽象级别。

这是一个 Plinq 示例，它将线程从开发人员抽象到框架。

```
string testName = "foo";
string fullTestName;

var testIterations = 100;
Enumerable.Range(0, testIterations).AsParallel().ForAll(i=>
{
    PerformanceTest(testName,i,numberOfRows);
});

void PerformanceTest(String testName, int iterationNumber, long numberOfRows)
{
    // Insert a bunch of rows into DB
} 
```

# algorithm - Size of a queue for BFS in a grid

> ID：13443067
> 
> 赞同：1
> 
> 时间：2012-11-18T18:16:43.063
> 
> 标签：algorithm

I want to run a BFS in a square grid of size N*N. There is a single starting node. I can only move up/down/left/right (not in diagonal). ***There may be obstacles in the grid.***

Of course I want to use a queue to store the nodes I have to visit. It will be implemented as circular array of size S (fixed size). What is the minimum size for my array? I don't want it to overflow, even in the worst possible case.

A similar problem would be : given a node in a grid, what is the maximum number of node at exactly distance K from the starting node (for any 0 < K < 2*N)?

I think it would be hard to find an exact answer to this problem so a good approximation would be enough.

See this example (the rightmost picture) :

![enter image description here](../Images/f3c0dbd90d52187c43b2f25241e41b88.png)

This is not a grid but we could make grid with the same pattern (where the white represents obstacles and the black fractal are the walkable nodes). We can see that we have a lot of nodes at ***EXACTLY*** the same distance from the node in the center (actually this number doubles everytime time a path splits in two). So I would like to know how large this number could get, and if there are other configurations that yields to the same situation.

To make it very clear my question is : can this number get LARGER than 2*N where N is the size of the N*N square grid.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:24:45.290

是的，我认为这个数字可以变得更大，使用您提供的第三张图片应该很容易可视化。

想象一下，您只从该图的左上角四分之一开始。这将 N 定义为左上角四分之一的大小，并将 E 定义为与中心单元具有相同距离的端点的数量。

现在假设您要将网格扩展到完整的图形。这意味着您的 Nnew 现在是 2N（即长度增加了一倍，宽度也增加了一倍）。然而，端点 E 的数量现在增加了四倍（即 Enew = 4N），如图所示。

换句话说，随着 N 的增加，端点数量的增长速度比 N 快得多，因此对于足够大的 N，端点的数量必然会超过 2*N。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T23:58:18.040

`2*N`如果我正确理解您的问题，由于障碍物的存在，节点与起始节点的最大距离可能为 > ：

```
. . . * . . .
. * . * . * .
. * . * . * .
. * . * . * .
. * . . . * .
. . * * * . .
. . A * B . . 
```

如果我数对了，从 A 到 B 的距离是 30，比 2*7 大得多。

如果没有障碍物，很容易计算边缘的最大尺寸，这将是一个简单的菱形边缘`K`（或与网格重叠的部分），因此具有最大尺寸`2*N`。

如上例所示，障碍物可以增加两个节点之间最短路径的长度。他们可以增加最大可能的边缘尺寸吗？我不能很快想出一个他们这样做的例子，我怀疑他们不能，但我也想不出一个快速的证明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T20:12:51.783

可能是因为您想知道队列的最大大小而想知道距离 K 处的单元格数量吗？

如果是这样，为什么不直接使用基于列表的循环缓冲区（或者，或者，使用数组并在缓冲区满后自己重新分配一个更大的缓冲区）？

这完全跳过了您的问题，并且列表调整大小行为不应该成为问题：如果空间不足，大多数实现会将底层数组的大小加倍，因此无论如何您不应获得超过 O(log n) 的重新分配。

# list - Scheme Double Duplicate List 替代方案

> ID：13443068
> 
> 赞同：1
> 
> 时间：2012-11-18T18:16:43.443
> 
> 标签：list, scheme, duplicates, double

在我参加的练习考试中，有一个问题要求创建一个过程，该过程接受一个列表并创建一个新列表，其中包含旧列表中每个元素的两个，同时保留顺序。他们提供的例子：

```
 (double-duplicate (list 1 2 3 4 4 5)) 
```

生产

```
 (1 1 2 2 3 3 4 4 4 4 5 5) 
```

我设法找到了一个使用 map 和 flatten 的解决方案：

```
 (define (flatten list)
       (cond ((null? list) '())
             ((list? (car list)) (append (flatten (car list)) (flatten (cdr list))))
             (else (cons (car list) (flatten (cdr list))))))

    (define (double-duplicate ls)
      (define (helper list1 list2)
        (flatten (map list list1 list2)))
      (helper ls ls)) 
```

虽然它确实有效，但我认为它不是最有效的解决方案，因为我使用的是带有 3 个参数的映射形式，而且我不喜欢为了摆脱而不得不编写第二个程序（展平）的想法多余的括号。谁能想到更好的方法来做到这一点？我对如何写它有点迷茫。我很欣赏任何想法。

*注意：我正在为所有这些使用 MIT 方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:28:16.590

这个更适合`accumulate`：

```
(define (double-duplicate lst)
  (accumulate (lambda (e acc)
                (cons e (cons e acc)))
              '()
              lst)) 
```

同样，假设它`accumulate`的定义与您之前的问题一样 - 即向右折叠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T18:27:18.970

你在用球拍吗？如果是这样，您可以使用`append-map`：

```
(define (double-duplicate lst)
  (append-map (lambda (x) (list x x)) lst)) 
```

`append-map`类似于 Scala 的`flatmap`.

`append-map`如果需要，编写自己的版本并不难：

```
(define (append-map func lst)
  (fold-right (lambda (e r)
                (append (func e) r)) '() lst)) 
```

# node.js - mongoose findOne with sorting

> ID：13443069
> 
> 赞同：18
> 
> 时间：2012-11-18T18:16:46.627
> 
> 标签：node.js, mongodb, express, mongoose

I have a problem with a mongo request:

```
models.user.findOne(
    {},
    {
        sort: {
            date_register: -1
        }
    },
    function(err, result) {
        console.log(err);
} 
```

I have

```
{ [MongoError: Error: Unsupported projection option: date_register] name: 'MongoError' } 
```

as error

I'd like to get my users by date_register DESC

Thanks

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-18T18:46:14.800

这将根据您的 mongoose 版本略有不同，但方法签名`findOne`看起来像这样：

```
function findOne (conditions, fields, options, callback) 
```

您打算做什么`options`（排序），猫鼬正在处理`fields`（要加载哪些字段）。

您可以尝试显式传递`null`字段：

```
models.user.findOne({}, null, { sort: { date_register: -1 } }, callback); 
```

但是如果可以的话，你可能应该使用更清晰的查询 API，例如：

```
models.user.findOne({}).sort({ date_register: -1 }).exec(callback); 
```

# android - Calling a web service async

> ID：13443074
> 
> 赞同：0
> 
> 时间：2012-11-18T18:17:06.557
> 
> 标签：android, web-services, design-patterns, rest, android-activity

I am building a android application and in my first activity I call to a web service in AsyncTask (Virgil Dobjanschi design pattern).

But the line after the call i am moving to another activity like this:

```
ServiceHelper.CalcPoints(1,2);
Intent toSecond = new Intent(getApplicationContext(), SecondActivity.class);    
startActivity(toSecond); 
```

I don't wait for a callback from the server.

I want to know if I have risks in using that way ? and what them ? If you recommend me not using that please give me other options.

Thank you !

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T18:31:21.657

如果您使用的是 asyncTask，那么您一定知道它有三个方法，onPreExecute()、doInBackgroung()、onPostExecute()。你应该在 onPreExecute 方法中调用你的布局，你也应该在这里开始一个进度条。然后在 doInBackgroundMethod 中，您应该调用您的 Web 服务。最后，onPostExecute 方法您应该检查 Web 服务响应，如果符合要求，则停止进度条并移动到新活动，否则让控件保持在同一屏幕上，并带有一些错误的服务器响应的 Toast 消息。

希望你能理解 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:31:57.067

这是不安全的。当您开始另一个活动时，您当前的活动可以暂停、终止等。

# eclipse - 将具有许多项目依赖项的 Eclipse 项目上传到 GitHub 的标准方法？

> ID：13443076
> 
> 赞同：2
> 
> 时间：2012-11-18T18:17:12.990
> 
> 标签：eclipse, git, maven, github

我是 Git 和 GitHub 的新手，尽管我已经使用 Eclipse 多年。我想将我的几个个人 Java 项目上传到 GitHub，但是它们形成了一个复杂的依赖关系树，这些依赖关系都使用 Eclipse 项目依赖项进行引用（即，每个项目在其类路径上都有其他 Eclipse 项目）。如果可能的话，我想避免使用 Maven（我在工作中使用它，但它很慢，有问题，而且很痛苦，更不用说我必须在某个地方运行我自己的存储库，与 GitHub 分开），我会如果解决方案允许用户使用或不使用 Eclipse（可能使用 Ant 构建文件或类似的东西）编译项目，则更喜欢。

我的问题是：是否有一些标准方法可以上传依赖于其他存储库的 GitHub 存储库？似乎子模块是我正在寻找的东西，但这会在每个其他项目中创建每个项目的副本吗？或者 Maven 真的是正确执行此操作的最佳/唯一方法吗？如果用户可以下载并准备好编译所有项目的依赖项，而不会严重破坏我的项目结构，我会喜欢`git clone`它`ant build`。

此设置的一个示例：我有 3 个 Eclipse 项目，A、B 和 C。B 和 C 在 A 的类路径中，但 A、B 和 C 都在单独的 Git 存储库中。我希望用户能够`git clone`和`ant build`A，并且在此过程中的某个时刻，自动下载 B 和 C，以便 A 编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:45:53.513

如果我正确理解了这个问题，您希望将您的项目拆分为多个存储库，然后在 git clone 或构建阶段使用一些自动机制来传递所有依赖项。出于这个原因，您希望在配置中的某处对该依赖信息进行编码。

对于这个问题，我基本上看到了三种解决方案（无论构建技术如何）：

1.  Git 子模块将此信息编码到 git 存储库中。这样，您就无法在没有依赖项的情况下签出您的项目。但是，正如您所说，这可能会导致多次下载相同的存储库。

2.  另一种方法是在构建系统中编码此信息。在这种情况下，每个存储库都有一个单独的构建，而所有构建的二进制文件都放入一个公共存储库（Maven 或 Eclipse p2 存储库，甚至中央 FTP 存储都可能这样做）；在构建期间从这个中央存储库中查询依赖项。

3.  或者您可以要求您的用户确保所有必需的源项目都可用（在 Eclipse 中，您可以因此使用 Team 项目集），然后将它们一起构建。

根据我的经验，解决方案 2 或 3 是最常见的解决方案。如果您可以设置任何类型的存储库，这是最好的方法，因为您的所有项目都可以独立构建和重用（这对于插件项目来说是一个巨大的优势）。我确信 p2 存储库可以托管在 SVN 或 Git 中，因为只有 HTTP 请求用于下载源代码。我相信，Maven 存储库也是如此，但我还没有看到这样的存储库工作。

因此，我建议您构建一个 p2 存储库（可以在 Ant 中完成，但在 Maven Tycho 中似乎更简单），并将项目拆分为多个存储库。

# javascript - JavaScript Fill Rest of Page Not Working

> ID：13443077
> 
> 赞同：0
> 
> 时间：2012-11-18T18:17:13.117
> 
> 标签：javascript, html, css

I am working on a page for our highschool mun team and have done no design yet, just trying to get the individual parts working.

What I am stuck on now is using JavaScript to make my content div fill the rest of the pages vertical height.

Here is my HTML, maybe I am just out of it, but it appears as though everything is labeled correctly and should work.

```
<!DOCTYPE HTML>
<HTML>
<HEAD>
<TITLE>NCHS MUN</TITLE>
<link rel="stylesheet" type="text/css" href="style.css">
<script>
function resize() 
{
document.getElementById("content").style.height = (document.body.clientHeight - document.getElementById("top"));
}
</script>
</HEAD>
<BODY onLoad="resize()">
<div id="top">
<header><a href="index.html" class="title">NCHS Model UN</a></header>
<ul class="nav">
    <li><a href="#">Updates</a></li>
    <li><a href="#">Resources</a></li>
    <li><a href="#">The Team</a></li>
    <li><a href="#">Gallery</a></li>
    <li><a href="#">Contact</a></li>
</ul>
</div>
<div id="content">
</div>
</BODY>
</HTML> 
```

Here is my CSS, again, everything should work.

```
HTML, body {
margin: 0;
padding: 0;
height: 100%;
width: 100%;
font-family: arial;
background-color: #D0D0D0;
}

header {
display: block;
background-color: #0000FF;
color: #FFFFFF;
width: 100%;
}

a.title {
display: block;
width: 100%;
text-align: center;
color: #FFFFFF;
text-decoration: none;
text-align: center;
padding-top: 2px;
font-size: 72px;
}

ul.nav {
list-style-type: none;
margin: 0;
padding: 0;
width: 100%;
}

ul.nav li {
display: inline;
float: left;
background-color: #FFA500;
width: 20%;
border: 1px solid black;
box-sizing: border-box;
}

ul.nav li a {
display: block;
padding: 5px;
color: #000000;
text-decoration: none;
text-align: center;
}

ul.nav li a:hover {
font-weight: bold;
}

#content {
display: block;
overflow: auto;
background-color: #FFFFFF;
width: 960px;
margin: 0 auto;
border-left: 1px solid black;
border-bottom: 1px solid black;
border-right: 1px solid black;
box-sizing: border-box;
} 
```

However, when the page does load, only the border of the "content" div appears. Why is it not expanding to the rest of the page? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:19:20.000

就我个人而言，我不会使用 JavaScript 来操纵这样的样式。

但是，您的脚本的问题是您有`- document.getElementById("top")`.

`#top`您还没有指定它是需要扣除的元素的高度。

# amazon-ec2 - iptables NAT remote ip to local

> ID：13443079
> 
> 赞同：0
> 
> 时间：2012-11-18T18:17:24.847
> 
> 标签：amazon-ec2, iptables, nat, forward

We have an EC2 server with 400 domains / vhosts on amazon's ec2. We use just one single public IP (1.1.1.1). Because of NAT we use the internal IP (10.1.2.0) in apaches config. So far so good.

Some cronscripts need to access the hosted domains but these cronjobs are also hosted on the same machine. Because of the NAT it's not possible to reach any of the hosted domains by hostname from the localhost. I've been trying to figure it out with iptables, but no luck

Looks like this is not working:

```
iptables -t nat -A PREROUTING -p tcp -d 1.1.1.1 -j DNAT --to 10.1.2.0 
```

Any thoughts? Of course i can add al 400+ domains to /etc/hosts, but then i have to keep track of all the domains and it isnt very flexible. Ofcourse we can also change the way the cronjobs are working, but we need a 'quick' fix right now. Is this possible with iptables?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:18:49.857

如果我理解正确，您希望重定向来自同一台机器的流量。在这种情况下，您应该使用 OUTPUT 链。来自本地进程的数据包不通过 POSTROUTING 链。

# xml - Actionscript 2: Add all entries in an xml file to an array

> ID：13443081
> 
> 赞同：0
> 
> 时间：2012-11-18T18:17:46.187
> 
> 标签：xml, arrays, while-loop, actionscript-2

I have an xml file that has 3075 entries that look something like this

```
<item id="1" itype="COLOUR"></item> 
```

I'm using action script 2 to load the xml and then a while loop the enter all data into an array using this code.

```
my_xml = new XML();
paper_crumbs = Array();
my_xml.load("sample.xml");
my_xml.onLoad = my_function;
my_xml.ignoreWhite = 1;

function my_function() {
var b = true;
var num = "1";
while(b == true){
paper_crumbs[my_xml.firstChild.childNodes[num].attributes.id] = {type: my_xml.firstChild.childNodes[num].attributes.itype, cost: 0, is_member: false}; 
if(my_xml.firstChild.childNodes[num].attributes.final == "yes"){
b = false;
trace("done");
}
num = num + 1;
}
} 
```

The problem i am having is that it makes flash unresponsive then asks if i would like to terminate the script, is there any other way i can loop through the xml and add them to an array or could someone edit the while so it works?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:45:40.960

您的代码的某些语法不正确，我更新了您的 XML 格式以使其更易于处理，并将其转换为更易于稍后调整的格式。我创建了一个示例，如下所示，其代码可以正确循环我的 sample.xml 文件中的每个条目。

**示例.xml：**

```
<items>
    <item id="1" itype="COLOUR"></item>
    <item id="2" itype="COLOUR"></item>
    <item id="3" itype="COLOUR"></item>
    <item id="4" itype="COLOUR"></item>
    <item id="5" itype="COLOUR"></item>
    <item id="6" itype="COLOUR"></item>
    <item id="7" itype="COLOUR"></item>
    <item id="8" itype="COLOUR"></item>
    <item id="9" itype="COLOUR"></item>
    <item id="10" itype="COLOUR"></item>
    <item id="11" itype="COLOUR"></item>
    <item id="12" itype="COLOUR"></item>
    <item id="13" itype="COLOUR"></item>
    <item id="14" itype="COLOUR"></item>
    <item id="15" itype="COLOUR"></item>
    <item id="16" itype="COLOUR"></item>
    <item id="17" itype="COLOUR"></item>
    <item id="18" itype="COLOUR"></item>
    <item id="19" itype="COLOUR"></item>
    <item id="20" itype="COLOUR"></item>
</items> 
```

**动作脚本：**

```
my_xml = new XML();
paper_crumbs = Array();
my_xml.load("sample.xml");
my_xml.onLoad = my_function;
my_xml.ignoreWhite = true;

function my_function() {

    var rootNode:XMLNode = my_xml.firstChild;   // <items> node
    var itemNode:XMLNode = rootNode.firstChild; // get first child from <items>
    var xmlNodeID:Number;
    var xmlNodeType:String;

    while(itemNode != null){

        xmlNodeID = itemNode.attributes.id;
        xmlNodeType = itemNode.attributes.itype;

        paper_crumbs.push( {id: xmlNodeType, type: xmlNodeType, cost: 0, is_member: false} );

        itemNode = itemNode.nextSibling;

    } // end while

} // end function 
```

# android - 使用 sqlcipher 加密已经存在的数据库并在 android 上打开它

> ID：13443093
> 
> 赞同：1
> 
> 时间：2012-11-18T18:19:10.300
> 
> 标签：android, encryption, sqlcipher

我使用 sqlcipher 文档中给出的以下方法加密了我已经存在的 sqlite 数据库

```
$ ./sqlite3 plaintext.db 
sqlite> ATTACH DATABASE 'encrypted.db' AS encrypted KEY 'testkey'; 
sqlite> SELECT sqlcipher_export('encrypted'); 
sqlite> DETACH DATABASE encrypted; 
```

这可以工作并生成一个加密数据库，其内存大小与原始数据库相当。然后我尝试使用访问我的android应用程序上的数据库

> SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(myDatabasePath, "testkey", null);

查询 db 实例显示数据库中没有现有表。我能够创建新表并向它们添加行并读取它们，但我看不到旧的现有表。我仔细遵循了更改导入的 sqlcipher 文档中给出的指南。

# delphi - 如何在 Delphi 中使用图像作为按钮

> ID：13443096
> 
> 赞同：1
> 
> 时间：2012-11-18T18:19:23.153
> 
> 标签：delphi, user-interface, delphi-xe2

正如标题所暗示的，我试图弄清楚如何在我的 delphi 应用程序中使用图像作为按钮。![目前按钮如下所示](../Images/02ffa819c34db8bf54a08e8baef808df.png)

我希望按钮或多或少看起来更像这样。

![在此处输入图像描述](../Images/836b16be421fe9960a10c05b7825f676.png)

是否有任何人可以推荐我将使用哪个组件以及如何正确使用它的任何资源或教程？/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:34:47.587

您可以在没有外部组件的情况下使用 TSpeedButton

活跃的平房。

并在字形位图中使用...

您的位图必须带有 alpha 通道...

例如：http: [//0777.ir/img/alpha.bmp](http://0777.ir/img/alpha.bmp)

这个位图有 alpha 通道...

您可以在 adobe photoshop 中查看频道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T02:14:08.157

如前所述，使用 Delph TSpeedButton。要回答您关于库存图片的问题，您可能会在此处找到一些合适的免费图片集： [http](http://www.freedownloadmanager.org/download/delphi-16x16-speed-button-icon-bmp-1599703.html) ://www.freedownloadmanager.org/download/delphi-16x16-speed-button-icon-bmp-1599703.html 。我还没有尝试过。其中之一可能是您需要开始的。是的，还有其他地方可以获取资源……谷歌 16 x 16 字形或图标或图像。曾经有几个免费工具可以设计自己的图标。想到图标编辑（[http://www.bouffler.freeserve.co.uk/icon_edit.htm](http://www.bouffler.freeserve.co.uk/icon_edit.htm)），如果你用谷歌搜索，寻找共享软件工具与版本号相同的名称。并且有许多商业产品。

# c - 多项式回归c代码

> ID：13443097
> 
> 赞同：2
> 
> 时间：2012-11-18T18:19:37.673
> 
> 标签：c, regression, nonlinear-functions

我对 C 编程非常陌生。我正在使用“C 中的*数字食谱*”一书中的 C 代码进行多项式回归，但我在实现/编译它时遇到了问题。

这是我正在使用的代码。一些`//`显示我尝试将程序更改为 C++。如果我不能让它在 C 下构建，也许它可以在 C++ 下工作？

我已将其添加`int main()`到程序中以实现它。*nrutil.h*是头文件，但我没有使用它，因为我将所需的函数转移到了 .ccp 文件（函数`matrix()`, `vector()`, `nrerror()`, `SQR()`）。

我使用的编译器是 MSVC 2010 Express。

```
//#include "nrutil.h"
#include <stdio.h>
//#include <iostream>
//using namespace std;

static float sqrarg;
#define SQR(a) ((sqrarg=(a)) == 0.0 ? 0.0 : sqrarg*sqrarg)
void nrerror(char error_text[]);
float *vector(long nl, long nh);
float **matrix(long nrl, long nrh, long ncl, long nch);

int fpoly(float x, float a[], int ma){
int j;
a[1]=1.0;

for(j=2; j<=ma;j++) 
    a[j]=a[j-1]*x;

return ma;
}

void lfit( float x[], float y[], float sig[], int ndat, float a[], int ia[], int ma, float **covar, float *chisq)

//Given a set of data points x[1..ndat], y[1..ndat] with individual standard deviations
//sig[1..ndat], use χ2 minimization to fit for some or all of the coefficients a[1..ma] of
//a function that depends linearly on a, y =sum(i)( ai × afunci(x)). The input array ia[1..ma]
//indicates by nonzero entries those components of a that should be fitted for, and by zero entries
//those components that should be held fixed at their input values. The program returns values
//for a[1..ma], χ2 = chisq, and the covariance matrix covar[1..ma][1..ma]. (Parameters
//held fixed will return zero covariances.)Th e user supplies a routine funcs(x,afunc,ma) that
//returns the ma basis functions evaluated at x = x in the array afunc[1..ma].

{
void gaussj(float **a, int n, float **b, int m);

int i,j,k,l,m,mfit=0;
float ym,wt,sum,sig2i,**beta, *afunc;

//vector<float> afunc(1,ma);
//matrix<float> beta(1,ma,1,1);
afunc=vector(1,ma);
beta=matrix(1,ma,1,1);

for (j=1;j<=ma;j++)
    if (ia[j]) mfit++;
if (mfit == 0) 
    nrerror("lfit: no parameters to be fitted");
for (j=1;j<=mfit;j++) {                       //Initialize the (symmetric)matrix.
    for (k=1;k<=mfit;k++) covar[j][k]=0.0;
    beta[j][1]=0.0;
}
for (i=1;i<=ndat;i++) {                       //Loop over data to accumulate coefficients of the normal equations.

fpoly(x[i], afunc ,ma);
ym=y[i];
if (mfit < ma) {                              //Subtract off dependences on known pieces of the fitting function.
    for (j=1;j<=ma;j++)                
        if (!ia[j]) ym -= a[j]*afunc[j];
}

sig2i=1.0/SQR(sig[i]);
for (j=0,l=1;l<=ma;l++) {
    if (ia[l]) {
        wt=afunc[l]*sig2i;
        for (j++,k=0,m=1;m<=l;m++)
            if (ia[m]) covar[j][++k] += wt*afunc[m];
        beta[j][1] += ym*wt;
    }
}
}
for (j=2;j<=mfit;j++)                    //Fill in above the diagonal from symmetry.
    for (k=1;k<j;k++)
        covar[k][j]=covar[j][k];
gaussj(covar,mfit,beta,1);              //Matrix solution.
for (j=0,l=1;l<=ma;l++) 
    if (ia[l]) a[l]=beta[++j][1];      //Partition solution to appropriate coefficients a Evaluate χ2 of the fit.
*chisq=0.0;
    for (i=1;i<=ndat;i++) { 
        fpoly(x[i], afunc,ma);
for (sum=0.0,j=1;j<=ma;j++) 
    sum += a[j]*afunc[j];
*chisq += SQR((y[i]-sum)/sig[i]);

}
//covsrt(covar,ma,ia,mfit);              //Sort covariance matrix to true order of fitting coefficients.
//free_vector(afunc,1,ma); 
//free_matrix(beta,1,ma,1,1);
}
//#endif // INTERPFUNCTIONS_H_INCLUDED

int main()
{

float x1[]={100.000000f,88.00000f,76.199997f,68.599998f,54.500000f,37.599998f,26.500000f,17.000000f,8.300000f,0.900000f,-7.200000f,-17.000000f,-24.900000f,-33.799999f,-42.500000f,-51.000000f,-60.500000f,-69.500000f,-75.300003f,-83.099998f,-94.099998f,-103.000000f,-110.099998f};
float y1[]={-2.876821f,-2.788704f,-2.596228f,-2.468143f,-1.898085f,-1.296223f,-0.664981f,-0.245603f,-0.280993f,-0.094657f,-0.184912f,-0.263328f,-0.181819f,-0.132037f,-0.029368f,0.134307f,0.257734f,0.305223f,0.091159f,0.063768f,-0.163334f,-0.136314f,-0.372106f};
float sig1[]={62.2940f,1.0532f};
float a1[]={1.8f,1.6f,1.7f,1.3f};
float **covar1, xa;
int ia1[]={2,3,4,2}; 
int ma=4, ndat=23;
float *chisq1;

*chisq1=0.9f;
covar1[4][4]=0.0f;

fpoly(xa,a1,ma);
lfit(x1,y1,sig1,ndat,a1,ia1,ma,covar1,chisq1);

} 
```

当我尝试编译这个程序时，它显示了这个错误输出：

```
1>------ Build started: Project: lfit, Configuration: Debug Win32 ------
1>  lfit.cpp
1>c:\users\sony\documents\visual studio 2010\projects\lfit\lfit\lfit.cpp(68): warning C4244: '=' : conversion from 'double' to 'float', possible loss of data
1>c:\users\sony\documents\visual studio 2010\projects\lfit\lfit\lfit.cpp(89): warning C4244: '+=' : conversion from 'double' to 'float', possible loss of data
1>c:\users\sony\documents\visual studio 2010\projects\lfit\lfit\lfit.cpp(110): warning C4700: uninitialized local variable 'chisq1' used
1>c:\users\sony\documents\visual studio 2010\projects\lfit\lfit\lfit.cpp(111): warning C4700: uninitialized local variable 'covar1' used
1>c:\users\sony\documents\visual studio 2010\projects\lfit\lfit\lfit.cpp(113): warning C4700: uninitialized local variable 'xa' used
1>lfit.obj : error LNK2019: unresolved external symbol "void __cdecl gaussj(float * *,int,float * *,int)" (?gaussj@@YAXPAPAMH0H@Z) referenced in function "void __cdecl lfit(float * const,float * const,float * const,int,float * const,int * const,int,float * *,float *)" (?lfit@@YAXQAM00H0QAHHPAPAMPAM@Z)
1>lfit.obj : error LNK2019: unresolved external symbol "void __cdecl nrerror(char * const)" (?nrerror@@YAXQAD@Z) referenced in function "void __cdecl lfit(float * const,float * const,float * const,int,float * const,int * const,int,float * *,float *)" (?lfit@@YAXQAM00H0QAHHPAPAMPAM@Z)
1>lfit.obj : error LNK2019: unresolved external symbol "float * * __cdecl matrix(long,long,long,long)" (?matrix@@YAPAPAMJJJJ@Z) referenced in function "void __cdecl lfit(float * const,float * const,float * const,int,float * const,int * const,int,float * *,float *)" (?lfit@@YAXQAM00H0QAHHPAPAMPAM@Z)
1>lfit.obj : error LNK2019: unresolved external symbol "float * __cdecl vector(long,long)" (?vector@@YAPAMJJ@Z) referenced in function "void __cdecl lfit(float * const,float * const,float * const,int,float * const,int * const,int,float * *,float *)" (?lfit@@YAXQAM00H0QAHHPAPAMPAM@Z)
1>C:\Users\Sony\Documents\Visual Studio 2010\Projects\lfit\Debug\lfit.exe : fatal error LNK1120: 4 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:48:55.173

您已经定义了一堆未实现的函数。例如，你在早期定义了这个函数：`void nrerror(char error_text[]);`，但你从来没有真正为它提供一个实现。确保在您的项目中包含任何其他相关的 .c 或 .cpp 文件，这些文件包含这些内容的定义。

尽管您可能认为您没有使用这些功能，但实际上您是！例如，请注意对 this: 的调用`nrerror("lfit: no parameters to be fitted");`。您的代码使用了这些函数，因此除非您为它们提供实现，否则您的代码将无法正确链接。

# php - 让读/写拆分与 PHP mysqlnd_ms 一起使用的问题

> ID：13443098
> 
> 赞同：5
> 
> 时间：2012-11-18T18:19:53.730
> 
> 标签：php, mysql, pdo, split, read-write

我正在尝试设置`PHP` `mysqlnd_ms`扩展程序，但遇到了一些问题。到目前为止，这是我所做的：

-[在启用时从源代码编译 PHP`mysqlnd`](https://sites.google.com/site/arfanahmedcheema/blog/ubuntu1204serverwithphp546andmyslqndmsqc)

- 已安装`mysqlnd_ms`（如果我运行，`pecl info mysqlnd_ms`我会得到有关`mysqlnd_ms`插件的信息）：

```
$ sudo pecl install mysqlnd_ms 
```

-修改`PHP.ini`（然后重新启动它）：

```
mysqlnd_ms.enable=1
mysqlnd_ms.disable_rw_split=0 ; for good measure
mysqlnd_ms.config_file=mysqlnd_ms_config.ini 
```

-`mysqlnd_ms_config.ini`使用以下内容创建（[在官方文档中作为示例给出](http://www.php.net/manual/en/mysqlnd-ms.quickstart.configuration.php#example-1749)）

```
{
    "myapp": {
        "master": {
            "master_0": {
                "host": "127.0.0.1",
                "port": "3306"
            }
        },
        "slave": {
            "slave_0": {
                "host": "localhost",
                "socket": "\/var\/run\/mysqld\/mysqld.sock"
            }
        }
    }
} 
```

[根据文档](http://www.php.net/manual/en/mysqlnd-ms.rwsplit.php)：

> 该插件在配置的 MySQL 从属服务器上执行只读语句，并在 MySQL 主服务器上执行所有其他查询。*如果语句以 SELECT、SQL 提示 / ms=slave* / 开头，或者如果选择了从属服务器来运行前一个查询并且查询以 SQL 提示 / *ms=last_used* / 开头，则它们被视为只读语句。在所有其他情况下，查询将被发送到 MySQL 复制主服务器

所以在这一点上，我希望我的`SELECT`语句被发送到`slave`和其他语句（例如`UPDATE`）被发送到`master`.

我写了一个小脚本来测试设置：

```
$socket = '/var/run/mysqld/mysqld.sock';
$dbname = 'mysqlnsmstest';
$user = 'root';
$pass = 'root';

$mysql = new PDO("mysql:unix_socket=$socket;dbname=$dbname", $user, $pass);

$result = $mysql->query('SELECT * FROM mytable');
foreach($result as $row) {
    print_r($row);
}

$count = $mysql->exec("UPDATE mytable SET field='test' WHERE id=2");
echo "Nb rows affected: $count\n"; 
```

**查询已正确执行，*但*它们都被发送到`slave`**（我知道这一点，因为如果我用它来嗅探流量，`$ tcpdump -ni any port 3306`我什么也看不到，而如果我对它们进行手动查询，`3306`它们确实会显示在 中`tcpdump`）。

使用`/*ms=slave*/`和之类的注释`/*ms=master*/`没有区别。`general_log`确实表明没有任何其他可能混淆的评论`mysqlns_ms`：

```
121118 19:14:40    36 Connect   root@localhost on mysqlnsmstest
           36 Query /*ms=slave*/SELECT * FROM mytable
           36 Query /*ms=master*/UPDATE mytable SET field='test' WHERE id=2
           36 Quit 
```

我尝试使用非环回`IP`（例如我的`10.0.0.56`本地环回）通过网络“强制”连接，但这没有区别。

`$pdo->getAttribute(PDO::ATTR_CLIENT_VERSION)`正在给我正在使用`"mysqlnd 5.0.10 - 20111026 - $Id: b0b3b15c693b7f6aeb3aa66b646fee339f175e39`哪些节目。`mysqlnd`

**为了使读/写拆分工作（欢迎任何建议），我缺少什么？**

**更新：**
我找到了一种比 tcpdump 更好的方法来检查`read/write`split 是否有效：

```
print_r(mysqlnd_ms_get_last_used_connection($pdo));
Array
(
    [scheme] => unix:///var/run/mysqld/mysqld.sock
    [host_info] => Localhost via UNIX socket
    [host] => 
    [port] => 3306
    [socket_or_pipe] => /var/run/mysqld/mysqld.sock
    [thread_id] => 48
    [last_message] => Rows matched: 1  Changed: 0  Warnings: 0
    [errno] => 0
    [error] => 
    [sqlstate] => 00000
) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-20T19:36:13.303

请确保在尝试建立连接时参考定义服务器的 PECL/mysqlnd_ms 文档部分。您应该将部分名称（在您的示例中为“myapp”）作为主机传递给您要使用的 PHP MySQL API 的连接函数。像这样的东西：

```
$pdo = new PDO('mysql:host=myapp;dbname=database', 'username', 'password'); 
```

或者，在您的情况下，例如：

```
$mysql = new PDO("mysql:host=myapp;dbname=$dbname", $user, $pass); 
```

不使用：

```
$mysql = new PDO("mysql:unix_socket=$socket;dbname=$dbname", $user, $pass); 
```

这将连接到正在侦听套接字 $socket 的服务器。

# android - 加速度计 Android“不幸的是，已停止”

> ID：13443099
> 
> 赞同：2
> 
> 时间：2012-11-18T18:20:01.077
> 
> 标签：android, eclipse, android-emulator

我现在正在学习 android 的加速度计，我找到了一些代码并尝试制作加速度计，但是我的应用程序突然停止并显示消息“不幸的是，***已停止”我已经检查了其他关于此的 Q，但我发现没有任何帮助。我真的是android编码的新手......

这是我的 Java 代码：

```
package paket.accelerometer_axis;

import android.app.Activity;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.widget.TextView;

public class accelerometer_axis extends Activity implements SensorEventListener{
private SensorManager sensorManager;
TextView xCoor; 
TextView yCoor; 
TextView zCoor; 

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_accelerometer_axis);

xCoor=(TextView)findViewById(R.id.xcoor); 
yCoor=(TextView)findViewById(R.id.ycoor); 
zCoor=(TextView)findViewById(R.id.zcoor); 

sensorManager=(SensorManager)getSystemService(SENSOR_SERVICE);
sensorManager.registerListener(this,
sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),
SensorManager.SENSOR_DELAY_NORMAL);}

public void onAccuracyChanged(Sensor sensor,int accuracy){
}

public void onSensorChanged(SensorEvent event){

if(event.sensor.getType()==Sensor.TYPE_ACCELEROMETER){

float x=event.values[0];
float y=event.values[1];
float z=event.values[2];

xCoor.setText("X: "+x);
yCoor.setText("Y: "+y);
zCoor.setText("Z: "+z);
}}} 
```

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
android:background="@drawable/back"
android:padding="4dip">

<ImageView
android:id="@+id/icon"
android:contentDescription="@string/description_logo"
android:layout_width="wrap_content"
android:layout_height="fill_parent"
android:layout_marginRight="6dip"
android:src="@drawable/ic_launcher" 
/>

<TextView
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight="1"

android:gravity="center_vertical"
android:text="@string/text0"
android:textColor="#00FF00"
android:textSize="20sp" />

<TextView
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight="1"

android:singleLine="true"
android:ellipsize="marquee"
android:text="@string/text1"
/>

<TextView
android:id="@+id/xcoor"
android:text="@string/text2"
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight="1"
/>

<TextView
android:id="@+id/ycoor"
android:text="@string/text3"
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight="1"
/>

<TextView
android:id="@+id/zcoor"
android:text="@string/text4"
android:layout_width="fill_parent"
android:layout_height="0dip"
android:layout_weight="1" />

</LinearLayout> 
```

这是我的清单：

> ```
> <uses-sdk
>     android:minSdkVersion="8"
>     android:targetSdkVersion="15" />  
> 
> <uses-permission android:name="android.permission.INTERNET" />
> 
> <application          android:icon="@drawable/ic_launcher"
>     android:label="@string/app_name" >
>     <activity
>         android:name=".Accelerometer_axis"
>         android:label="@string/title_activity_accelerometer_axis" >
>         <intent-filter>
>             <action android:name="android.intent.action.MAIN" />
> 
>             <category android:name="android.intent.category.LAUNCHER" />
>         </intent-filter>
>     </activity>
> </application> 
> ```

# c++ - 需要使用 boost::fusion::filter_if 元函数的示例

> ID：13443102
> 
> 赞同：0
> 
> 时间：2012-11-18T18:20:13.510
> 
> 标签：c++, boost-fusion

给定 boost::fusion::vector 类型，我想过滤掉所有非 ref 成员以获得新类型。例如，这会将 boost::fusion::vector 转换为 boost::fusion::vector。我猜 boost::fusion::filter_if 元函数可能能够做到这一点，但在文档中没有使用它的例子。任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:16:33.567

像这样的东西：

```
#include <iostream>
#include <boost/fusion/container/vector.hpp>
#include <boost/fusion/algorithm/transformation/filter_if.hpp>
#include <boost/fusion/include/at_c.hpp>
#include <boost/fusion/include/equal_to.hpp>
#include <boost/fusion/include/make_vector.hpp>
#include <boost/mpl/assert.hpp>

using namespace boost::fusion;

int main(void)
{
    int a = 10;
    double b = 11.;
    vector<int, int&, double, double&> vec(1, a, 13., b);

    if(filter_if<boost::mpl::not_<boost::is_reference<boost::mpl::_>>>(vec) == make_vector(1, 13.))
      std::cout << "MATCH" << std::endl;
} 
```

# android - INSTALL_FAILED_INSUFFICIENT_STORAGE，由于我每次都必须删除文件

> ID：13443104
> 
> 赞同：1
> 
> 时间：2012-11-18T18:20:17.657
> 
> 标签：android, adb

我曾经能够从 consol（甚至 eclipse）执行 adb install test.apk 而没有问题。我昨天把我的手机植根了，然后我开始得到

**错误**

```
Failure [INSTALL_FAILED_INSUFFICIENT_STORAGE] 
```

经过大量的试验和错误，我发现它背后的错误是它说“无法重命名/data/app/test-1.apk

所以我去了那个文件夹，确实有一个名为 test-1.apk 的文件。我删除了它，我能够成功执行 adb install 。但是，我每次运行 adb install 时都必须执行相同的过程（删除 apk 文件）

我怀疑 adb 由于权限而无法重命名 test-1.apk 或将其删除是权限问题。我该如何解决？

或者，如果您还有其他建议，请帮忙

# c++ - 如何在 C++ 中创建多线程应用程序

> ID：13443106
> 
> 赞同：3
> 
> 时间：2012-11-18T18:20:34.853
> 
> 标签：c++, multithreading

> **可能重复：**
> [C++ 中线程的简单示例](https://stackoverflow.com/questions/266168/simple-example-of-threading-in-c)

谁能给我一个例子，如何在 C++ 中创建一个同时运行两个函数的简单应用程序？我知道这个问题与线程管理和多线程有关，但我基本上是一个 php 程序员，我对高级 C++ 编程并不熟悉。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-18T18:23:51.173

这是一个简单的例子：

```
#include <iostream>
#include <thread>

void f1() { std::cout << "This is function 1.\n"; }
void f2() { std::cout << "This is a different function, let's say 2.\n"; }

int main()
{
    std::thread t1(f1), t2(f2);   // run both functions at once

    // Final synchronisation:
    // All running threads must be either joined or detached
    t1.join();
    t2.join();
} 
```

如果您的函数需要产生返回值，您应该将上述线程对象与[`std::packaged_task`](http://en.cppreference.com/w/cpp/thread/packaged_task)可运行的对象结合起来，这些对象可以从中获得`<future>`，这样您就可以访问线程函数的返回值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T18:23:22.870

我将让您自己进行研究，但实现这一目标的简单方法是`std::async`：

[http://en.cppreference.com/w/cpp/thread/async](http://en.cppreference.com/w/cpp/thread/async)

请注意，它是同时发生的，但不一定是同时发生的。

我相信 Boost 也有这个 - 它在 Boost.Thread 或 Boost.ASIO 中

# javascript - 如何将arcto转换为贝塞尔曲线？

> ID：13443112
> 
> 赞同：1
> 
> 时间：2012-11-18T18:21:22.857
> 
> 标签：javascript, bezier

2 个功能（HTML5 画布）：

*   arcTo(x1, y1, x2, y2, 半径);
*   arcTo(x1, y1, x2, y2, rx, ry, 旋转);

如何转换为贝塞尔曲线（或二次曲线）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T10:23:19.813

谢谢=）。

```
var from = [200,200],
    to   = [400,300],
    tan  = [300,300], // tangent
    rad  = 50; // radius

var line = [
    from,
    computeVec(tan[0], tan[1], -tan[0]*2, -tan[1]*2, rad)
];

var quad = [
    tan,
    computeVec(tan[0], tan[1], to[0], to[1], rad)
];

ctx.moveTo(line[0][0], line[0][1]);
ctx.lineTo(line[1][0], line[1][1]);
ctx.bezierCurveTo(quad[0][0], quad[0][1], quad[0][0], quad[0][1], quad[1][0], quad[1][1]);

function computeVec(tanx, tany, x, y, rad){
    x -= tanx;
    y -= tany;
    var hypotenuse = Math.sqrt(x * x + y * y),
        proportion = rad / hypotenuse;
    return [
        tanx + (x * proportion),
        tany + (y * proportion)
    ];
} 
```

# c# - XAML、C# - 绑定到用户创建的控件的属性

> ID：13443113
> 
> 赞同：1
> 
> 时间：2012-11-18T18:21:25.640
> 
> 标签：c#, xaml, binding

如果这个问题不一定有意义，我提前道歉，但我是编程新手。o_0

我在 Blend 中创建了一个用户定义的 XAML 控件，用作按钮：

```
<Style x:Key="GeekMDCalc_Button_Std." TargetType="Button">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Canvas x:Name="canvas" Width="200" Height="200" Background="#FFA09F9F">
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition GeneratedDuration="0:0:0.15"/>
                                    </VisualStateGroup.Transitions>
                                    <VisualState x:Name="Normal"/>
                                    <VisualState x:Name="Pressed">
                                        <Storyboard>
                                            <ColorAnimation Duration="0" To="#FF0CFF00" Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)" Storyboard.TargetName="rectangle" d:IsOptimized="True"/>
                                            <ColorAnimation Duration="0" To="White" Storyboard.TargetProperty="(Panel.Background).(SolidColorBrush.Color)" Storyboard.TargetName="canvas" d:IsOptimized="True"/>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Disabled"/>
                                    <VisualState x:Name="PointerOver">
                                        <Storyboard>
                                            <ColorAnimation Duration="0" To="#FF0CFF00" Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)" Storyboard.TargetName="rectangle" d:IsOptimized="True"/>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="FocusStates">
                                    <VisualState x:Name="Focused"/>
                                    <VisualState x:Name="PointerFocused"/>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Rectangle x:Name="rectangle" Fill="#FFF4F4F5" Height="57" Width="200" Canvas.Top="143"/>
                            <ContentPresenter Height="57" Canvas.Top="143" Width="190" HorizontalAlignment="Center" VerticalAlignment="Bottom" Foreground="Black" Canvas.Left="10"/>
                            <Image x:Name="image" Height="128" Canvas.Left="10" Canvas.Top="10" Width="180"/>
                        </Canvas>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

然后我在 GridView 中单独添加按钮：

```
<GridView Grid.ColumnSpan="2" Grid.Column="1" HorizontalAlignment="Left" Grid.Row="2" VerticalAlignment="Top" FontFamily="Global User Interface">
        <Button Content="Emergency" Style="{StaticResource GeekMDCalc_Button_Std.}" FontFamily="DilleniaUPC" FontSize="45.33" FontWeight="Light"/>
        <Button Content="Intensive Care" Style="{StaticResource GeekMDCalc_Button_Std.}" FontFamily="DilleniaUPC" FontSize="45.33" FontWeight="Light"/>
        <Button Content="Internal Med." Style="{StaticResource GeekMDCalc_Button_Std.}" FontFamily="DilleniaUPC" FontSize="45.33" FontWeight="Light"/>
        <Button Content="Surg/Trauma" Style="{StaticResource GeekMDCalc_Button_Std.}" FontFamily="DilleniaUPC" FontSize="45.33" FontWeight="Light"/>
        <Button Content="Renal" Style="{StaticResource GeekMDCalc_Button_Std.}" FontFamily="DilleniaUPC" FontSize="45.33" FontWeight="Light"/>
        <Button Content="Electrolytes" Style="{StaticResource GeekMDCalc_Button_Std.}" FontFamily="DilleniaUPC" FontSize="45.33" FontWeight="Light"/>
        <Button Content="Cardiology" Style="{StaticResource GeekMDCalc_Button_Std.}" FontFamily="DilleniaUPC" FontSize="45.33" FontWeight="Light"/>
        <Button Content="Pediatrics" Style="{StaticResource GeekMDCalc_Button_Std.}" FontFamily="DilleniaUPC" FontSize="45.33" FontWeight="Light"/>
        <Button Content="Neurology" Style="{StaticResource GeekMDCalc_Button_Std.}" FontFamily="DilleniaUPC" FontSize="45.33" FontWeight="Light"/>
        <Button Content="GI" Style="{StaticResource GeekMDCalc_Button_Std.}" FontFamily="DilleniaUPC" FontSize="45.33" FontWeight="Light"/>
        <Button Content="General" Style="{StaticResource GeekMDCalc_Button_Std.}" FontFamily="DilleniaUPC" FontSize="45.33" FontWeight="Light"/>
    </GridView> 
```

我试图通过将图像绑定到我创建的控制模板中的图像容器来应用背景，但我没有任何运气。我希望这些按钮中的每一个都有单独的背景，我希望在我的代码隐藏中定义这些背景。我已经尝试搜索了几个小时，但似乎找不到一种方法来轻松更改我创建的按钮控件的图像源。

感谢您的帮助，以及对新手的耐心^_^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:32:03.960

您不需要样式中的图像，我也将其称为不好的做法。Button 是一个`ContentPresenter`，所以它的主要目的是“呈现内容”，它`Content`本身可以是任何东西；另一个控件、图像、字符串或自定义类。因此，您可以直接将图像分配给按钮，而无需在模板中添加 Image 对象。如果您`Content`不是 WPF 控件，则 WPF 需要一些指导如何显示`Content`. 因此，您需要告诉他您希望内容的外观如何，准确地说，这是通过模板完成的，即`DataTemplate`. 如果你只需要一个图标，这就足够了

```
<Button>
   <Image Source="SomeIcon"/>
</Button> 
```

如果您需要更多显示为内容，则需要定义一个 DataTemplate，我建议您使用一些 DataBinding 来充分利用它。这是一个简短的例子：

```
class MyButtonInfo
{
    public ImageSource Icon{get;set;}
    public string Caption{get;set;}
    public Command Command{get;set;}
}

<DataTemplate x:Key="MyTemplate">
    <StackPanel>
        <Image Source="{Binding Icon}"/>
        <TextBlock Text="{Binding Caption}"/>
    </StackPanel>
</DataTemplate>

<Button Content="{Binding ButtonInfo}" ContentTemplate="{StaticResource MyTemplate}" Command="{Binding Command}">
</Button> 
```

# c - 在 fgets While 循环上检测 EOF

> ID：13443122
> 
> 赞同：0
> 
> 时间：2012-11-18T18:23:09.977
> 
> 标签：c, sockets, inputstream, eof, fgets

我正在循环使用 TCP 套接字输入的每一行，`fdopen`如下`fgets`所示：

```
int connfd = accept(listenfd, (struct sockaddr*)NULL, NULL);
FILE *f;
char line[1024];

f = fdopen(connfd, "a+");
while(fgets(line, sizeof(line), f) != NULL) {
    printf("%s", line);
}

printf("EOF");
fclose(f); 
```

问题是它看起来由于某种奇怪的原因`fgets`永远不会返回。`NULL`有没有其他方法可以检查`EOF`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T18:27:05.090

如果套接字关闭，您只会在套接字上接收并结束文件。

如果您需要在保持套接字打开的同时停止读取，则需要为此定义一个协议。

# php - 递归循环遍历多维以创建平面数组

> ID：13443125
> 
> 赞同：0
> 
> 时间：2012-11-18T18:23:14.923
> 
> 标签：php, arrays, recursion, multidimensional-array, logic

我有一个看起来像这样的多维数组：

```
$trees = array(
    array(
        'name' => 'Parent',
        '__children' => array(
            array(
                'name' => 'Child'
            ),
            array(
                'name' => 'Second Child'
            )
        )
    )
); 
```

数组的深度是未知的，我需要递归地展平它。所以它看起来更像这样：

```
array(
  array(
    'name' => 'Parent' 
  ),
  array(
    'name' => 'Child' 
  ),
  array(
    'name' => 'Second Child' 
  )
) 
```

我认为这样的事情可能会奏效：

```
public function flattenTree($trees, $tree = array())
{
    foreach($trees as $item){
        //$i = 1, 2, then 3
        $i = count($tree);
        $tree[$i] = array('name' => $item['name']);
        if(isset($item['__children']))
            $this->flattenTree($item['__children'], $tree);
    }
    return $tree;
} 
```

但这只是给了我:(

```
Array
(
    [0] => Array
        (
            [name] => Parent
        )

) 
```

我不确定如何做到这一点。是否可以？

作为奖励，我真的需要输出数组看起来像这样（注意名称值已更改）:)

```
array(
  array(
    'name' => 'Parent' 
  ),
  array(
    'name' => 'Parent Child' 
  ),
  array(
    'name' => 'Parent Second Child' 
  )
) 
```

非常感谢您对此的帮助。期待解决方案。我难住了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:59:36.123

好的，我试了一下，虽然它可能不是最干净的解决方案，但我认为它应该可以完成工作：

```
function flattenRecursive(array &$flat, $parentkey, array $nested){

    $flag       = true;
    $prepend    = '';

    foreach( $nested as $k => $val ){
        if( is_array($val) ){

            if ( $k == '__children' && $flag) {
                $prepend = end($flat);
                $flag = true;
            } else {
                $flag = false;
            }

            flattenRecursive($flat, $prepend , $val);

        } else {

            $flat[] = $parentkey . ' ' . $val;

        }
    }
}

function flatten(array $nested){
    $flat = array();
    flattenRecursive($flat, '', $nested);
    return $flat;
} 
```

在测试数组上（额外的嵌套用于额外的测试）如下

```
$trees = array(
            array(
                'name' => 'Parent',
                '__children' => array(
                    array(
                        'name' => 'Child',
                        '__children' => array(
                            array(
                                'name' => 'Nest One'
                            ),
                            array(
                                'name' => 'Nest Two'
                            )
                        )
                    ),
                    array(
                        'name' => 'Second Child'
                    )
                )
            )
        );

$result = flatten($trees); 
```

`var_dump`of`$result`看起来像下面

```
array(5) {
  [0]=>
  string(7) " Parent"
  [1]=>
  string(13) " Parent Child"
  [2]=>
  string(22) " Parent Child Nest One"
  [3]=>
  string(22) " Parent Child Nest Two"
  [4]=>
  string(20) " Parent Second Child"
 } 
```

希望这就是你要找的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T17:16:14.227

我最终使用了这样的东西，从@Pankrates 的回答中得到了很多灵感。非常感谢。

```
$trees = $multidimensionalArray;
$flat = array();
$postRepository->flattenRecursive($flat, $trees);
//$flat is now a flattened version of $multidimensionalArray
var_dump($flat);

public function flattenRecursive(array &$flat, array $nested, $parentPrepend = false)
{
    foreach( $nested as $item ){
        $flat[] = array(
            'name' => ($parentPrepend) ? $parentPrepend . '/' . $item['name'] : $item['name']
        );
        $prepend = $parentPrepend ? $parentPrepend . '/' . $item['name'] : $item['name'];
        if(isset($item['__children']))
            $this->flattenRecursive($flat, $item['__children'], $prepend);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T04:23:03.560

**代码**

```
<?php

$output_array = array();

$input_array  = array(
    array(
        'name'=>'Parent',
        '__children' => array(
            array(
                'name' => 'Child'
            ),
            array(
                'name' => 'Second Child'
            )
        )
    )
);

echo"<pre>";
print_r($input_array);
echo"</pre>";

function flatten($arr){
    global $output_array;
    if(is_array($arr)){
        foreach($arr as $key=>$value){
            if($key=="name" && !is_array($value)){
                $output_array[] = array($key=>$value);
            }
            elseif(is_array($value)){
                flatten($value);
            }
        }
    }
}

flatten($input_array);

echo"<pre>";
print_r($output_array);
echo"</pre>"; 
```

**输出**

```
//Input array
Array
(
    [0] => Array
        (
            [name] => Parent
            [__children] => Array
                (
                    [0] => Array
                        (
                            [name] => Child
                        )

                    [1] => Array
                        (
                            [name] => Second Child
                        )

                )

        )

)

//Output Array
Array
(
    [0] => Array
        (
            [name] => Parent
        )

    [1] => Array
        (
            [name] => Child
        )

    [2] => Array
        (
            [name] => Second Child
        )

) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-05T07:40:50.753

我有类似的逻辑问题，我使用@Mike 的答案进行了一些重构。

```
public function flattenRecursive(array &$flat, array $nested, $parentPrepend = false)
{
    foreach( $nested as $item ){
        $prepend = $parentPrepend ? $parentPrepend . '/' . $item['name'] : $item['name'];
        $flat[] = array(
            'name' => $prepend
        );
        if(isset($item['__children']))
            $this->flattenRecursive($flat, $item['__children'], $prepend);
    }
} 
```

# asp.net - Service is not wroking

> ID：13443129
> 
> 赞同：0
> 
> 时间：2012-11-18T18:23:44.743
> 
> 标签：asp.net, web-services

I have two web services on the server. When i run the service url [http://www.solentvehicleleasing.co.uk/solentwebservice.asmx/GetLeasingPriceForTechinalPageByDerID](http://www.solentvehicleleasing.co.uk/solentwebservice.asmx/GetLeasingPriceForTechinalPageByDerID). Its give service messsage .

"Request format is unrecognized for URL unexpectedly ending in '/GetLeasingPriceForTechinalPageByDerID'.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.InvalidOperationException: Request format is unrecognized for URL unexpectedly ending in '/GetLeasingPriceForTechinalPageByDerID'."

The above error fine for the service.

But on the same server when i run the another service [http://www.solentcarleasing.co.uk/solentwebservice.asmx/GetLeasingPriceForTechinalPageByDerID](http://www.solentcarleasing.co.uk/solentwebservice.asmx/GetLeasingPriceForTechinalPageByDerID). The return 404 error.

I am using MVC 3 and call the service using jquery ajax method.

Can anyone help me

Thanks in Advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:54:21.630

据我所知，Web 服务从来没有以这种方式设置 URL。您可以查看服务详情： [http ://www.solentcarleasing.co.uk/solentwebservice.asmx?op=GetLeasingPriceForTechinalPageByDerID](http://www.solentcarleasing.co.uk/solentwebservice.asmx?op=GetLeasingPriceForTechinalPageByDerID)

在 Visual Studio 中，您必须添加服务，然后从代码中调用它。您不能只是通过 *.asmx/ServiceMethodName 导航到

# php - 致命错误：找不到类，但已加载

> ID：13443130
> 
> 赞同：0
> 
> 时间：2012-11-18T18:23:44.937
> 
> 标签：php

我正在尝试在实时服务器上运行我的脚本，但它正在暂存。

在本地，一切都很好（OS X），远程，CentOS/Nginx，我遇到了一个致命的问题。脚本说找不到我的自定义数据库类。

查看加载的内容，使用`get_declared_classes()`，我绝对可以看到我的自定义数据库类，该类在调用它的脚本/类之前加载。

它正在通过我的自动加载器加载：

```
spl_autoload_register(function ($className) {
if (file_exists(ROOT . DS . 'library' . DS . 'intranet' .DS . 'classes' . DS .strtolower($className) . '.php')){
    require_once(ROOT . DS . 'library' . DS . 'intranet' .DS . 'classes' . DS .strtolower($className) . '.php');
} else if (file_exists(ROOT . DS . 'application' . DS . 'controller' . DS . strtolower($className) . '.php')) {
    require_once(ROOT . DS . 'application' . DS . 'controller' . DS . strtolower($className) . '.php');
} else if (file_exists(ROOT . DS . 'application' . DS . 'model' . DS . strtolower($className) . '.php')) {
    require_once(ROOT . DS . 'application' . DS . 'model' . DS . strtolower($className) . '.php');
} else if (file_exists(ROOT . DS . 'application' . DS . 'view' . DS . strtolower($className) . '.php')) {
    require_once(ROOT . DS . 'application' . DS . 'view' . DS . strtolower($className) . '.php');
} else {
    throw new Exception("Class: $className not autoloaded!");
}
}); 
```

没有异常被抛出。

```
Array ( [128] => Router 
        [129] => debug 
        [130] => database 
        [131] => SessionManager 
        [132] => security 
) 

Fatal error: Class 'database' not found in 
/home/nginx/domains/ckrisc/public/library/intranet/classes/sessionmanager.php 
on line 76 
```

引导和文件包含如下：

```
require_once (ROOT . DS . 'config'  . DS . 'config.php'                         );
require_once (ROOT . DS . 'config'  . DS . 'directories.config.php'             );
require_once (library . DS . 'setup.php'        );
require_once (library . DS . 'Autoloader.php'   );
require_once (library . DS . 'Router.php'       );
require_once (library . DS . 'init.php'         ); 
```

在这种情况下，该类`database`是从 sessionmanager 调用的，它在 `init.php`.

脚本在这里失败：

```
$sessionId = database::getInstance()->real_escape_string($sessionId); 
```

关于我在这里缺少什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:38:30.080

也许您在声明自动加载函数之前调用了该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:13:28.337

事实证明 APC 3.1.13 引起了一些问题

# php - Input value in HTML

> ID：13443131
> 
> 赞同：0
> 
> 时间：2012-11-18T18:23:44.980
> 
> 标签：php, html

How do you a class id into an input field?

```
<input type="text" name="loc" value="<p id='test'>bb</p>" /> 
```

The example above doesn't work properly. Also, how do I put a PHP echo command in it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:25:29.513

Use [`htmlentities()`](http://php.net/manual/en/function.htmlentities.php)

```
<input type="text" name="loc" value="<?php echo htmlentities("<p id='test'>bb</p>"); ?>" /> 
```

The output will look like this:

```
<input type="text" name="loc" value="&lt;p id='test'&gt;bb&lt;/p&gt;" /> 
```

# database - SSIS Excel Data Extraction

> ID：13443132
> 
> 赞同：1
> 
> 时间：2012-11-18T18:23:48.787
> 
> 标签：database, performance, ssis, extract

I am extracting data from excel files where the data accumulates in the same excel file each week. For example, week X will contain data from week 1 through week X. Then week X+1 will contain data from week 1 through week X+1\. **What is the most efficient way to load this accumulated data into a database?** Currently, I am clearing the entire database then loading data from weeks 1 through the current week. Obviously this process is inefficient as I am clearing data from my database only to load it back into the database again...

For the following ideas I have could someone help me decide which is the best route to go? Or if you have any better ideas please let me know. All help is appreciated!

1.  Is there a way to efficiently compute the "set difference" with excel files? Then I could load the difference from the current week's file and last week's file.
2.  I could keep track of all the weeks in which I have loaded data, and then "query" the excel files for the weeks that are not in the database. I would hope this querying would be efficient through hashing.

I think a necessary question to get either of the above ideas to work is: **In what ways through SSIS can I manipulate data in excel?**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T12:55:18.687

*   保留您在控制表中处理的最后一个完整日期
*   将日期读入包变量
*   更改 Excel 源代码编辑器 -> 数据访问模式以作为 SQL 命令运行
*   输入 sql 语句，包括工作表名称，然后输入 ? 为参数值。例如`SELECT * FROM [Sheet1$] where extractdate > ?`
*   点击参数按钮，将参数变量（第二步）赋给sql语句

# assembly - Recursive Fibonacci IA32 assembly

> ID：13443136
> 
> 赞同：2
> 
> 时间：2012-11-18T18:24:15.063
> 
> 标签：assembly, recursion, x86, fibonacci

I'm trying to solve a homework assignment - I managed to produce a working piece of code but it's producing the wrong answer. I tried debugging with gdb but I still can't see what's wrong with my code.

```
.data
        a : .long 6                                                                                                                                                             
        r : .long 0
        out : .string "result %d\n"
.text
.global main                                                                                                                                                                    
fib:
        pushl %ebp
        movl %esp, %ebp
        movl 8(%ebp), %eax
        cmpl $0, %eax #fib(0)=0
        je endf
        cmpl $1, %eax #fib(1)=1
        je endf
        decl %eax #eax=n-1
        movl %eax, %edx #edx=n-1
        pushl %edx  #save n-1
        pushl %eax #set arg
        call fib #re in ecx                                                                                                                                                     
        popl %eax #get n-1
        decl %eax #eax=n-2
        pushl %ecx #save result for n-1                                                                                                                                         
        pushl %eax #set arg
        call fib #res in ecx                                                                                                                                                    
        popl %eax # eax=fib(n-1)                                                                                                                                                
        addl %eax, %ecx #fib(n)=fib(n-1)+fib(n+2)                                                                                                                               
        movl %ebp,%esp #Exit                                                                                                                                                    
        popl %ebp
        ret
endf:
        movl %eax, %ecx#fib(0) or fib(1) to %ebx                                                                                                                                
        movl %ebp,%esp                                                                                                                                                          
        popl %ebp
        ret

main:
        pushl a  #stack [a]                                                                                                                                                     
        call fib #result in %ecx                                                                                                                                                
        pushl %ecx                                                                                                                                                              
        pushl $out                                                                                                                                                              
        call printf 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T22:02:25.950

请注意，您不会删除传递给`fib`任何地方的任何参数，因此您的堆栈会变得不平衡。请参阅[运行中的固定版本](http://ideone.com/hpeloe)。

此外，典型的调用约定以`eax`. `ecx`无缘无故使用是令人困惑的。查看更好地遵守约定的[简化版本。](http://ideone.com/a7NHFM)

# jquery - jQuery DatePicker add year to yearRange

> ID：13443138
> 
> 赞同：-1
> 
> 时间：2012-11-18T18:24:30.207
> 
> 标签：jquery, datepicker

I am trying to add the year '9999' to my datepicker yearRange but nothing seems to work. I want to do something like this:

```
$("#effective_date").datepicker({
  dateFormat: 'yy-mm-dd',
  changeMonth: true,
  changeYear: true,
  yearRange: "2002:2012,9999"
}) 
```

Any help would be greatly appreciated, thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-14T09:01:12.673

你可以简单地使用这个命令：

```
<script type="text/javascript">
$(function() {
  $("#datepicker").datepicker({changeMonth: true, changeYear: true, yearRange:'1950:2013'}).val();
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T06:09:43.880

与其他答案类似，可能有一种更优雅的 UI 方式来捕获这个非日期值，但这可以修改一年。我不确定，但我猜会有意想不到的后果。

```
 var yearAdded = false;

  $(".ui-datepicker").on("mouseenter", function() {

    if (!yearAdded) {
      yearAdded = true;          
      var dropYear = $("select.ui-datepicker-year");
      dropYear.append("<option value='9999'>9999</option>");

    }

  }); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T18:32:46.577

如果您尝试添加年份 9999 并使用 yearRange 选项，那么您必须将范围从 2002 增加到 9999，例如 yearRange: "2002:9999"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T19:06:44.693

你的评论：

> 可能无法使用 jQuery api，但我确信有一些方法可以覆盖 javascript。

您可以创建自己的插件，如果您想使用现有的插件，您需要使用它的 API，而使用 jQuery UI 日期选择器小部件是不可能的。

# java - gmaps primefaces problems

> ID：13443142
> 
> 赞同：2
> 
> 时间：2012-11-18T18:25:04.700
> 
> 标签：java, primefaces, jsf-1.2

When I load the page, it shows the map and only shows a gray screen. Display currently as the image. This is my code:

```
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:p="http://primefaces.org/ui"
xmlns:m="http://code.google.com/p/gmaps4jsf/">

<h:head>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>

</h:head>

<h:body>

        <h1>Google Map</h1>

        <h:form>

           <f:view  contentType="text/html">    
               <p:gmap center="41.381542,2.122893" zoom="15" type="HYBIRD"
                style="width:600px;height:400px" />
           </f:view>

       </h:form> 
</h:body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:53:42.043

您是否尝试在没有 f:view 标记的情况下在外部定义 p:gmap？我认为也定义

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true" /> 
```

没有必要。

# css - 无法访问资产文件夹中的图像（ruby-on-rails）

> ID：13443146
> 
> 赞同：1
> 
> 时间：2012-11-18T18:25:32.883
> 
> 标签：css, ruby-on-rails

我正在尝试访问我的 scss 文件中 /assets/images 目录中的图像，例如：

```
background-image: url(/assests/traffic_lights_red.png); 
```

什么都没有返回当我直接使用 URL 时，`http://localhost:3000/assests/traffic_lights_red.png`我得到一个路由错误：`No route matches [GET] "/assests/traffic_lights_red.png"`

我已经阅读了有关此主题的其他一些帖子，看起来这应该可以，为什么我会收到路由错误？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T18:31:13.490

好吧，这可能是一个愚蠢的答案，因为它可能是一个错字，但是

```
background-image: url(/assests/traffic_lights_red.png); 
```

应该

```
background-image: url(/assets/traffic_lights_red.png); 
```

# jquery - Stack more variables in brackets to trigger .remove()

> ID：13443147
> 
> 赞同：2
> 
> 时间：2012-11-18T18:25:37.160
> 
> 标签：jquery

Right now I am trying to make an modalbox for self, just to play arround, nothing serious because I am still newbie.

I know that there is possibility to do this:

```
$('#elementOne, #elementTwo, #elementThree').remove(); 
```

But is there a possibility to add two variables because I can't seem to get it working. I tried like this:

```
setTimeout(function() {
   $('$miniBox_wrap, $miniBox_overlay').remove();
}, 1000); 
```

Also like this:

```
setTimeout(function() {
   $($miniBox_wrap, $miniBox_overlay).remove();
}, 1000); 
```

Maybe I've done something wrong or it's not possible?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T18:26:41.240

Assuming your variables are jQuery objects, use [jQuery's `add` method](http://api.jquery.com/add/):

```
$miniBox_wrap.add( $miniBox_overlay ).remove(); 
```

# android - Android Async Task Not Repeating

> ID：13443148
> 
> 赞同：0
> 
> 时间：2012-11-18T18:25:48.723
> 
> 标签：android, service, android-asynctask

I have an Activity (called StartActivity) that starts a Service. The Service calls methods in my MainActivity class. The process is supposed to repeat on a timer which is inside the Service class. The program stops after one execution however, it is apparently not rescheduled. I know the onStart command is given to the Service when the Activity is started because the program functions the first time, when the activity is clicked. Neither task runs again. Any advice would be welcome. TLDR: Timer is not calling method repeatedly. It only works the first time.

**Service Class**

```
import java.util.TimerTask;
import java.util.Calendar;
import java.util.Timer;
import android.app.Service;
import android.content.Intent;
import android.os.Handler;
import android.os.IBinder;
import android.util.Log;

public class SvcActivity extends Service {

    TimerTask questionTask;
    TimerTask gpsTask;
    Handler handler = new Handler();
    Timer t = new Timer();

    @Override
    public int onStartCommand(Intent i,int flags,int startID) {
        Log.i("AAA","---In service---");
        questionTask = new TimerTask() {
            public void run() {
                handler.post(new Runnable() {
                    public void run() {
                        if(getHour()>=10&&getHour()<=22)
                        {
                            Intent i=new Intent(SvcActivity.this,MainActivity.class);
                            i.putExtra("key", "setup");
                            i.setFlags(Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
                            i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                            Log.i("AAA","---right before startActivity---");
                            startActivity(i);
                        }
                        else
                            Log.i("AAA","---not between 10am and 10pm. Correct!");
                    }
                });
            }
        };

        gpsTask = new TimerTask() {
            public void run() {
                handler.post(new Runnable() {
                    public void run() {
                        Log.i("AAA","---in async task");
                        if(MainActivity.con!=null)
                        {
                        Log.i("AAA","---about to call async task");
                        BackgroundActivity objAsyncTask = new BackgroundActivity();            
                        objAsyncTask.execute();
                        }
                    }
                });
            }
        };

        int q=(int)(Math.random() * 2);
        if(q<1)
        {
        // first run, subsequent time delay. in miliseconds
            t.schedule(questionTask, 300, (3600000+2700000)); // 1 hour 45 min  
        }
        else
            t.schedule(questionTask, 300, (7200000+900000)); // 2 hour 15 min   

        t.schedule(gpsTask, 300, 300000);// 5 min

        return START_STICKY;
    }

    //-----------------------------get hour------------------------------------------
    public int getHour()
    {
        Calendar c=Calendar.getInstance();
        int hour=c.get(Calendar.HOUR_OF_DAY);
        return hour;
    }

    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:31:37.527

问题是活动被杀死了。即使它正在重新启动，这也扰乱了时间。我最终的解决方案是使用 AlarmManager 设置一个不受被杀死的活动影响的重复警报。然后我用 BroadcastReceiver 捕捉到这个并从那里执行我的代码。

# asp.net - Passing data from form without Html helpers

> ID：13443149
> 
> 赞同：4
> 
> 时间：2012-11-18T18:25:52.997
> 
> 标签：asp.net, asp.net-mvc, html-helper, modelbinders

Can I pass data to controller Without using `Html.EditorFor` etc?
Just by using simple HTML inputs like:

**View:**

```
@using (Html.BeginForm("Add", "Parameter", FormMethod.Post, new { enctype = "multipart/form-data" }))
{

    <fieldset>
        <input type="text" name="product.Name" id="product.Name"/>
        <input type="text" name="product.Description" id="product.Description"/>
        <input type="submit">
    </fieldset>
} 
```

**Controller:**

```
[HttpPost]
public ActionResult Add(Product product)
{
    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:28:33.147

是的，您可以，但是您需要将输入的名称调整为 ViewModel 属性名称：

```
<input type="text" name="product.Name" id="product.Name"/>
<input type="text" name="product.Description" id="product.Description"/> 
```

应该：

```
<input type="text" name="Name" id="name"/>
<input type="text" name="Description" id="description"/> 
```

您不应将 ViewModel 类型作为前缀添加到输入名称。

# asp.net - Configuration error while using Areas in ASP.NET MVC 4

> ID：13443152
> 
> 赞同：16
> 
> 时间：2012-11-18T18:26:27.660
> 
> 标签：asp.net, asp.net-mvc-4

After upgrading to ASP.NET MVC 4, application is breaking on accessing any webpage defined inside an Area

![Error screen shot](../Images/4509bfe76a3f636cb3518131d1ef6b53.png)

Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately.

Parser Error Message: An error occurred creating the configuration section handler for system.web.webPages.razor/host: The given assembly name or codebase was invalid. (Exception from HRESULT: 0x80131047)

```
<section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=__WebPagesVersion__.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" /> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-27T13:57:18.587

将此添加为评论的答案：

将版本 = **_ *WebPagesVersion* _** .0.0 更改为版本 = 2.0.0.0

或者，查看您的项目中是否有任何其他 web.config 文件浮动，并查看其中使用了哪些值 - 我知道，有时如果您有多个 web.config 引用不同版本的 hosts 部分，它可能会非常不安。顺便说一句，在 4 之前无需卸载 MVC 3 - 它们可以愉快地共存！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-21T04:34:31.593

这对我有用：我最近运行`Install-Package Microsoft.CodeDom.Providers.DotNetCompilerPlatform`为 Razor 安装 C#6 支持，我认为它也更新了这些库。对我来说，简单的解决方案是在我的参考资料中验证程序集的版本（有一个想法！哈哈）。在我的例子中，程序集`System.Web.WebPages.Razor`有一个“版本：3.0.0.0”（右键单击程序集并选择“属性”）。我相信那里显示的任何版本，复制它。

前：

```
 <configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
      <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    </sectionGroup>
  </configSections> 
```

后：

```
 <configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
      <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    </sectionGroup>
  </configSections> 
```

希望这可以帮助其他最终到达我所做的地方的人。;)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T10:11:17.677

最后你必须按照@bUKaneer 的建议做

> 将 Version= **WebPagesVersion** .0.0 更改为 Version=2.0.0.0

添加新区域时，您的新区域的 web.config 文件将为：-

```
<configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=__WebPagesVersion__.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=__WebPagesVersion__.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
      <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=__WebPagesVersion__.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    </sectionGroup>
  </configSections> 
```

使用以下内容更新本节：-

```
<configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
      <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    </sectionGroup>
  </configSections> 
```

然后找到/寻找

> 主持人

你的代码看起来像 -

```
 <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=__MvcVersion__.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" /> 
```

将其更改为：-

```
<host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" /> 
```

最后，寻找

你可以找到你的代码

```
<pages
        validateRequest="false"
        pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=__MvcVersion__.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
        pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=__MvcVersion__.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
        userControlBaseType="System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=__MvcVersion__.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <controls>
        <add assembly="System.Web.Mvc, Version=__MvcVersion__.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" namespace="System.Web.Mvc" tagPrefix="mvc" />
      </controls>
    </pages> 
```

将其替换为：-

```
<pages
        validateRequest="false"
        pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
        pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
        userControlBaseType="System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <controls>
        <add assembly="System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" namespace="System.Web.Mvc" tagPrefix="mvc" />
      </controls>
    </pages> 
```

Web.config 的工作副本如下所示：-

```
<?xml version="1.0"?>

<configuration>
  <configSections>
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
      <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    </sectionGroup>
  </configSections>

  <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization"/>
        <add namespace="System.Web.Routing" />
      </namespaces>
    </pages>
  </system.web.webPages.razor>

  <appSettings>
    <add key="webpages:Enabled" value="false" />
  </appSettings>

  <system.web>
    <httpHandlers>
      <add path="*" verb="*" type="System.Web.HttpNotFoundHandler"/>
    </httpHandlers>

    <!--
        Enabling request validation in view pages would cause validation to occur
        after the input has already been processed by the controller. By default
        MVC performs request validation before a controller processes the input.
        To change this behavior apply the ValidateInputAttribute to a
        controller or action.
    -->
    <pages
        validateRequest="false"
        pageParserFilterType="System.Web.Mvc.ViewTypeParserFilter, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
        pageBaseType="System.Web.Mvc.ViewPage, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"
        userControlBaseType="System.Web.Mvc.ViewUserControl, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <controls>
        <add assembly="System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" namespace="System.Web.Mvc" tagPrefix="mvc" />
      </controls>
    </pages>
  </system.web>

  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />

    <handlers>
      <remove name="BlockViewHandler"/>
      <add name="BlockViewHandler" path="*" verb="*" preCondition="integratedMode" type="System.Web.HttpNotFoundHandler" />
    </handlers>
  </system.webServer>
</configuration> 
```

# php - disable cross domains calls

> ID：13443154
> 
> 赞同：0
> 
> 时间：2012-11-18T18:26:37.610
> 
> 标签：php, javascript, ajax, jsonp

I was wondering weather there's a way to block other domains from sending POST and GET requests to my domain. I cannot trust the end users to not do such things and I know same origin policy can be bypassed. Is there any useful method to block/handle requests coming from other domains?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:31:50.180

不，这是不可能的。

[您可以使用针对跨站点请求伪造](http://en.wikipedia.org/wiki/Cross-site_request_forgery)的常用防御措施来阻止第三方站点欺骗您的用户提交不良数据。

您不能一开始就阻止发出请求，也无法区分浏览器发出的请求和网站上运行的非浏览器用户代理发出的请求（尽管您可以实现，例如，基于 IP 地址的速率限制）。

# c# - 在生成的 EF 类中添加 INotifyPropertyChange

> ID：13443162
> 
> 赞同：3
> 
> 时间：2012-11-18T18:27:40.577
> 
> 标签：c#, wpf, entity-framework, mvvm

所以，我的课程是由 EF 自动生成的：

```
//------------------------------------------------------------------------------
// <auto-generated>
//    This code was generated from a template.
//
//    Manual changes to this file may cause unexpected behavior in your application.
//    Manual changes to this file will be overwritten if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace Testje.Models
{
    using System;
    using System.Collections.Generic;

    public partial class Ploeg
    {
        public Ploeg()
        {
        }

        public int Id { get; set; }
        public string Naam { get; set; }
        public string Icon { get; set; }
    }
} 
```

当其中一个属性发生变化时，我想做一个 notifypropertychange。如果不编辑这个生成的类，这是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:36:52.980

这是可能的，但我强烈建议不要这样做！在模型中添加 INotifyPropertyChanged 会导致关注点分离不良。

使用事件突出显示模型已更改。看看这里是如何工作的：[MSDN on standard event pattern](http://msdn.microsoft.com/en-us/library/w369ty8x.aspx)

甚至更好：[MSDN 在事件模式中引用了 Albahari Bros](http://msdn.microsoft.com/en-us/library/orm-9780596527570-03-04.aspx)

在您的视图模型中，实现 INotifyProperty 已更改。让您的 ViewModel 监听模型中的事件，调整数据并通过 INotifyPropertyChanged 将其推送到您的视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-04T16:38:29.117

是的，您可以使用名为 PropertyChanged.Fody 的 NuGet 包。安装包，然后创建另一个部分类，添加 [ImplementPropertyChanged] 属性，如下所示；

```
using PropertyChanged;

[ImplementPropertyChanged]
public partial class Ploeg
{
} 
```

就是这样。

有关更多信息，请参阅[GitHub](https://github.com/Fody/PropertyChanged)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-12T11:56:21.440

就我而言，我添加了

> INotifyPropertyChanged

作为继承，似乎很有魅力。使用 EF 生成类（Request_Comment 生成类 EF）

例子：

```
namespace Requesto
{
    public partial class Request_Comment : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        public void OnPropertyChanged(PropertyChangedEventArgs e)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, e);
            }
        }
    }

} 
```

# jquery - 检索 XML 数据 Jquery + 附加 HTML

> ID：13443163
> 
> 赞同：0
> 
> 时间：2012-11-18T18:27:46.523
> 
> 标签：jquery

我想从一个 php xml 文件创建一个列表，所以我阅读了一些教程并将其放在一起：

```
$.blockUI();

           $.get('venuesxml.php', function (data) {

                $('#MenuList').append("<p><label><strong>Id</strong></label>
                                     <label><strong>venue type</strong></label></p>");

                $(data).find('marker').each(function () {

                    $('#MenuList').append("<p><label>" +

                    $(this).find('ID').text() + "</label><label>" +

                    $(this).find('venue_type').text() + "</label></p>");

                });

            });

            $.unblockUI(); 
```

但是我注意到这只有在 xml 看起来像这样的情况下才有效：

```
<markers>
  <marker>

    <ID>1</ID>

    <venue_type>2</Name>

  </marker>
</markers> 
```

然而它看起来像这样：

```
<markers>
     <marker id="67" venue_type="2"/>
</markers> 
```

在这种情况下我将如何获取数据？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:36:50.950

您想要检索 XML 属性而不是其中的节点`<marker>`

尝试`$(this).find('ID').text()`用`$(this).attr('id')`和`$(this).find('venue_type').text()`替换`$(this).attr('venue_type')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T18:42:04.987

尝试改变这个，看看这是否适合你：

```
$(this).text($(this).attr('id')) + "</label><label>" +

$(this).text($(this).attr('venue_type')) + "</label></p>"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T18:42:30.243

您可以使用`attr`方法：

```
$(data).find('marker').each(function () {
    var p = "<p>" +
               "<label>" + $(this).attr('id') + "</label>" +
               "<label>" + $(this).attr('venue_type') + "</label>" +
            "</p>"; 
    $('#MenuList').append(p)
}); 
```

# mysql - how i can get last 10 days records with mysql?

> ID：13443165
> 
> 赞同：2
> 
> 时间：2012-11-18T18:28:02.770
> 
> 标签：mysql, sql

my table structure was like

```
CREATE TABLE `survey` (
  `id` int(11) NOT NULL auto_increment,
  `submitdate` datetime default NULL,
 `answer` varchar(5) collate utf8_unicode_ci default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=499 ; 
```

Now I want to calculate last 10 days records. Suppose no record on particular day. it should be zero.

the output is like

```
date         count
19-11-2012   10
18-11-2012   30 
13-11-2012   0 
      .
      . 
```

i have used query like

```
SELECT COUNT( * ) , DATE( submitdate ) 
FROM survey t
WHERE t.submitdate >= ( CURDATE( ) - INTERVAL 10 
DAY ) 
GROUP BY DATE( submitdate ) 
LIMIT 0 , 30 
```

output is

```
count(*)    date(submitdate)
1   2012-11-13
2   2012-11-14
1   2012-11-15
3   2012-11-16
6   2012-11-17 
```

not giving 0 for no records with dates.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T18:29:34.327

你可以尝试这样的事情来获得输出： -

```
 SELECT * FROM survey t WHERE t.date >= DATE_ADD(CURDATE(), INTERVAL -10 DAY); 
```

或者你可以试试这个： -

```
 SELECT * FROM survey t WHERE t.date >= ( CURDATE() - INTERVAL 10 DAY ) 
```

检查[Date_Add](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_date-add)文档

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-18T18:46:31.947

这就是你需要的：

```
SELECT days.day, count(survey.id)
FROM
  (select curdate() as day
   union select curdate() - interval 1 day
   union select curdate() - interval 2 day
   union select curdate() - interval 3 day
   union select curdate() - interval 4 day
   union select curdate() - interval 5 day
   union select curdate() - interval 6 day
   union select curdate() - interval 7 day
   union select curdate() - interval 8 day
   union select curdate() - interval 9 day) days
  left join survey
   on days.day = survey.submitdate
group by
  days.day 
```

（如果 submitdate 包含日期和时间，则应将该行替换`on days.day = survey.submitdate`为`on days.day = DATE(survey.submitdate)`）

# javascript - JavaScript 正则表达式模式

> ID：13443167
> 
> 赞同：-4
> 
> 时间：2012-11-18T18:28:03.523
> 
> 标签：javascript, regex

```
[link](url) 
```

我正在尝试编写一个正则表达式来查找上面的模式并返回以下代码：

```
<a href="url">link</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T18:33:07.763

[通过阅读教程，我猜。](http://www.regular-expressions.info/tutorial.html)

```
str = str.replace(/\[([^\]]*)\]\(([^)]*)\)/g, '<a href="$2">$1</a>'); 
```

我承认，这看起来有点令人生畏。这是一个解释：

```
/        # just the delimiter for the regex (like " for a string)
\[       # match a literal [
(        # start capturing group $1 for later access
  [^\]]  # match any character except ]
  *      # 0 or more of those (as many as possible)
)        # end of capturing group $1
\]       # match a literal ]
\(       # match a literal (
(        # start capturing group $2 for later access
  [^)]   # match any character except )
  *      # 0 or more of those (as many as possible)
)        # end of capturing group $2
\)       # match a literal )
/        # end of regex
g        # make regex global to replace ALL occurrences 
```

`$1`然后我们`$2`在替换字符串中引用两个捕获的组。`$1`正在捕获里面的字符`[]`并且`$2`正在捕获里面的字符`()`。

# c - C 字母动态分配

> ID：13443175
> 
> 赞同：1
> 
> 时间：2012-11-18T18:28:51.903
> 
> 标签：c

我想打印这一系列国家，但是当两个国家相同时，我只想打印一次。国家已经按字母顺序排序了？

```
for(b=0;b<v;b++){

if(strcmp(country[b-1],country[b]) !=0){
    printf("%s",country[b]);}

} 
```

v 是国家数量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:37:44.047

为 krajina 动态分配一个二维字符数组。

参考这个问题： [2 Dimensional Memory Allocation](https://stackoverflow.com/questions/13304278/multi-dimensional-array-allocation)

编辑：阐述：

好的。你说你可以数出国家的数量。假设您将其存储在一个名为`count`ok 的变量中？

现在您需要分配一个具有`count`行数和 31 列的二维字符数组，对吗？您可以按如下方式执行此操作。

```
int i = 0;
int **country = NULL;

if (!(country = calloc(count, sizeof(*country)))) //allocate rows
    return (0);
for (i = 0; i < count; i++)
{
    country[i] = calloc(31, sizeof(*(country[i]))); //allocate columns
} 
```

现在您有了`country`可以正常使用的变量，就像使用 2d char 数组一样（就像您在代码中使用的一样）

# sql - 删除重复结果sql

> ID：13443177
> 
> 赞同：-1
> 
> 时间：2012-11-18T18:28:54.813
> 
> 标签：sql, oracle

我是 SQL 新手。我有一个小问题 - 这就是我得到的：

```
PROJECT_NO       EMPLOYEE_NO      HARDWARE       SOFTWARE  
------------------------------------------------------------
01                   1            MOUSE          SQL
01                   2            MOUSE          SQL
01                   3            MOUSE          SQL
01                   4            MOUSE          SQL
01                   1            KEYBOARD
01                   2            KEYBOARD
01                   3            KEYBOARD
01                   4            KEYBOARD 
```

员工们在重复自己，因为这个项目需要两种类型的硬件。

以下是表格包含的内容：

```
Requirements(
  project_no, 
  hardware, 
  software
 )

Assignment(
  project_no, 
  employee_no
) 
```

这是我想要的：

```
PROJECT_NO       EMPLOYEE_NO      HARDWARE       SOFTWARE  
---------------------------------------------------------------------
01                   1            MOUSE          SQL
01                   2            KEYBOARD          
01                   3                      
01                   4 
```

关于我该如何做这件事的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:46:37.890

您的问题非常不清楚您的要求，因为您没有在表中包含数据或您使用的查询来获得您不想要的结果。

但是，我猜这可以满足您的要求：

```
Select
  x.Project_No,
  x.Employee_No,
  y.Hardware,
  y.Software
From (
  Select
    a.*,
    RowNum As rn
  From
    Assignment a
  ) x Full Outer Join (
    Select
      r.*,
      RowNum As rn
    From
      Requirements r
  ) y on x.rn = y.rn 
```

[http://sqlfiddle.com/#!4/88178/6](http://sqlfiddle.com/#!4/88178/6)

我觉得我应该指出这是一个非常愚蠢的查询，因为第 3 列和第 4 列中的值与第 1 列和第 2 列中的值无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T19:07:29.073

使用 Oracle 的示例：

```
create table Requirements
(
  project_no integer not null
  ,hardware varchar2(64)
  ,software varchar2(64)
);

create table Assignment
(
  project_no integer not null
  ,employee_no integer not null
);

insert into Requirements (project_no, hardware, software)
values (1, 'Mouse', 'SQL'); 
insert into Requirements (project_no, hardware, software)
values ( 1, 'Keyboard', '');

insert into Assignment (project_no, employee_no)
values (1, 1);
insert into Assignment (project_no, employee_no)
values (1, 2);
insert into Assignment (project_no, employee_no)
values (1, 3);
insert into Assignment (project_no, employee_no)
values (1, 4);

select r.project_no, a.employee_no, r.hardware, r.software
from Assignment a
inner join Requirements r
on r.project_no = a.project_no;

select nvl(r.project_no, a.project_no) as project_no
, a.employee_no
, r.hardware
, r.software
from 
(
  select row_number() over (partition by project_no order by employee_no) r 
  , project_no
  , employee_no
  from Assignment
) a
full outer join 
(
  select row_number() over (partition by project_no order by hardware desc, software desc) r 
  , project_no
  , hardware
  , software
  from Requirements
) r
on r.project_no = a.project_no
and r.r = a.r;

drop table Assignment;
drop table Requirements; 
```

使用 SQL Server 的示例（Oracle 可能需要稍作编辑）：

```
create table #Requirements
(
  project_no bigint not null
  ,hardware nvarchar(64)
  ,software nvarchar(64)
)

create table #Assignment
(
  project_no bigint not null
  ,employee_no bigint not null
)

insert #Requirements 
      select 1, 'Mouse', 'SQL'
union select 1, 'Keyboard', ''

insert #Assignment
      select 1, 1
union select 1, 2
union select 1, 3
union select 1, 4

--your original query
select r.project_no, a.employee_no, r.hardware, r.software
from #Assignment a
inner join #Requirements r
on r.project_no = a.project_no

--query which gives you the result you're after (though not recommended, since this isn't really how you should use SQL)
select isnull(r.project_no, a.project_no) project_no
, a.employee_no
, r.hardware
, r.software
from (select row_number() over (partition by project_no order by employee_no) r , * from #Assignment) a
full outer join (select row_number() over (partition by project_no order by hardware desc, software desc) r , * from #Requirements) r
on r.project_no = a.project_no
and r.r = a.r 

drop table #Assignment
drop table #Requirements 
```

# ios - ios - 提交时试图转到下一页的html表单 - 如何阻止它？

> ID：13443179
> 
> 赞同：0
> 
> 时间：2012-11-18T18:28:56.990
> 
> 标签：ios, ios5

我正在使用 HTML 视图来显示表单。它可以工作，但唯一的问题是表单在提交时会尝试转到下一页，我不希望这种情况发生。如何防止此表单尝试转到下一页？

```
 <div id="stylized" class="myform">
        <form id="form" class="myform" method="post"
            action="http://www.mydomain.com/my_page.php?platform=ios" >
            <label>Your Name:</label>
                <input name="name" id="name" />

            <label>Your Email:</label> <input name="email" id="email" />

            <button type="submit" value="Submit" />Submit</button>
            <div class="spacer"></div>
        </form>
    </div> 
```

这是它的控制器。我前段时间写了它，现在实际上甚至不完全理解远程调用的位置/方式以将此信息发送到服务器：

```
@interface PremiumController ()

@end

@implementation PremiumController
@synthesize theWebView;

- (BOOL)webView:(UIWebView *)aWebView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{   
    if ([request.URL.scheme isEqualToString:@"http"]) 
    {
stringByEvaluatingJavaScriptFromString:@"escape(document.getElementById(\"phone\").value);"];

        [theWebView stringByEvaluatingJavaScriptFromString:@"alert(\"Information sent successfully. Simply ensure that what you had entered was correct.\");"];
    }  

    return YES;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    theWebView.delegate = self;
}

- (void)viewDidUnload
{
    [self setTheWebView:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (void)viewDidAppear:(BOOL)animated
{  
    NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"premium" ofType:@"html"];    
    NSURL *url = [NSURL fileURLWithPath:htmlFile];
    NSURLRequest *rq = [NSURLRequest requestWithURL:url];
    [theWebView loadRequest:rq];

    // EMAIL
    NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];

    NSString *user_id = [standardUserDefaults objectForKey:@"user_id"]; 
    NSString *user_email = [standardUserDefaults objectForKey:@"email"]; 

    EmailUtil *email_obj = [[EmailUtil alloc] initWithSubject:@"iPremium Loaded" body:[NSString stringWithFormat: @"User id: %@ and email: %@" , user_id , user_email ]];

    [email_obj send]; 
    // END EMAIL
}

@end 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T04:45:46.397

如果您查找[UIWebViewDelegate 协议](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIWebViewDelegate)，第一个委托方法`webView:shouldStartLoadWithRequest:navigationType:`是您需要返回一个`BOOL`.

> **如果 Web 视图应该开始加载内容，则**返回值YES；**否则，否。**

 **这意味着如果您返回 YES，webView 将继续加载请求，如果返回 NO，则 webView 将不会加载请求。希望这会有所帮助。**

# android - 我在哪里可以找到android系统可绘制资源？[安卓 API-7]

> ID：13443180
> 
> 赞同：5
> 
> 时间：2012-11-18T18:29:01.470
> 
> 标签：android, drawable

> **可能重复：**
> [标准 Android 菜单图标，例如刷新](https://stackoverflow.com/questions/2687027/standard-android-menu-icons-for-example-refresh)

我想使用一些 android drawables，因为用户已经熟悉它们。

我找到[了这个不错的网站](http://androiddrawableexplorer.appspot.com/)，在那里我可以看到我需要的资源的名称。但我在 android.R.drawable 中找不到一些资源。

例如，我想在我的应用程序中使用复选框 drawable：

![在此处输入图像描述](../Images/80def7ffb8055207242b0b337b3499d0.png) ![在此处输入图像描述](../Images/c88b145896683f2c7099c18a8d3ee476.png)

从那个网站我看到这些drawables的名字是**btn_check_off**和**btn_check_on** ，虽然我在我的android.R.drawable中没有看到这样的名字。

甚至可以使用任何可绘制的系统吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T18:32:09.493

大多数资产都可以在那里找到：

```
<SDK>\platforms\android-<VERSION>\data\res\ 
```

所以，假设你得到了所有的东西，在你的情况下：

```
<SDK>\platforms\android-7\data\res\ 
```

但是，并非所有元素都可以通过直接参考完全可用。只需复制/修改您需要的内容并添加到您的项目中

# java - 将扫描仪类的两个实例压缩为一个

> ID：13443186
> 
> 赞同：1
> 
> 时间：2012-11-18T18:29:26.243
> 
> 标签：java, java.util.scanner

我创建了一种将多行翻译成 Pig Latin 的方法。预期的输入如下所示：

```
The cat jumped over the fox 
```

我的代码输出文本，正确翻译成 Pig Latin 并具有正确的格式（即单词分开，行分开。但是，我通过使用扫描仪类的两个实例来做到这一点。谁能建议我如何删除这两个实例并将它们浓缩成一个？

顺便说一句，请随时提供任何其他建议，但请记住，我是一个仍在学习的新手！

```
 File file = new File("projectdata.txt");
    try 
    {
        Scanner scan1 = new Scanner(file);
        while (scan1.hasNextLine()) 
        {
            Scanner scan2 = new Scanner(scan1.nextLine());
            while (scan2.hasNext())
            {
                String s = scan2.next();
                boolean moreThanOneSyllable = Syllable.hasMultipleSyllables(s);
                char firstLetter = s.charAt(0);
                String output = "";
                if (!moreThanOneSyllable && "aeiou".indexOf(firstLetter) >= 0)
                    output = s + "hay" + " ";
                else if (moreThanOneSyllable && "aeiou".indexOf(firstLetter) >= 0)
                    output = s + "way" + " ";
                else 
                {
                    String restOfWord = s.substring(1);
                    output = restOfWord + firstLetter + "ay" + " ";
                }
                System.out.print(output);
            }
            System.out.println("");
            scan2.close();
        }
        scan1.close();
    } 

    catch (FileNotFoundException e) 
    {
        e.printStackTrace();
    }
} 
```

注意：几天前我在 Code Overflow 上发布了类似的内容，并从那里给出的答案中获得了一些建议。然而，虽然有人建议不要使用两个扫描仪类，但我就是无法正确格式化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:34:11.197

使用您的外循环，您可以逐行读取文件。使用外循环，您将读取的每一行都视为一个字符串。

```
Scanner scan2 = new Scanner(scan1.nextLine()); 
```

有了它，您正在尝试`String`使用 a 来阅读 a `Scanner`。您应该按如下方式更改它：

```
String line = scan1.nextLine(); 
```

将该行拆分为字符串（单词）数组并对其进行处理。

```
String[] words = line.split("\\s+"); 
```

内部循环可以遍历数组。

```
for(String word : words) {
    //your existing logic can go here
} 
```

**更新**

您可以按如下方式转义空行。不需要任何异常处理。

```
String line = scan1.nextLine();
if(line.isEmpty()) {
    System.out.println();
    continue;
} 
```

# java - 为给定数字生成金字塔？

> ID：13443188
> 
> 赞同：1
> 
> 时间：2012-11-18T18:29:46.197
> 
> 标签：java, for-loop, printf

我想为给定的数字“n”生成一个金字塔堆栈（“n” - 也是最后一个金字塔的高度）。该算法应堆叠 (n-1) 个金字塔。结果应该是这样的：

```
height of base pyramid: 4

          2
        2 4 2
          2
        2 4 2
      2 4 8 4 2
          2
        2 4 2
      2 4 8 4 2
   2 4 8 16 8 4 2 
```

我已经有一段代码可以生成最后一个金字塔：

```
for (i = 1; i <= n; i++) {
    for (j = 1; j <= n - i; j++)
        System.out.printf("%5s", "");
    for (k = 1; k < i; k++)
        System.out.printf("%5d", (int) Math.pow(2, k));
    for (k = i; k >= 1; k--)
        System.out.printf("%5d", (int) Math.pow(2, k));
        System.out.println();
    } 
```

任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:35:56.647

`for`在最外层再添加一个循环：-

```
for (int z = n - 2; z >= 0; z--) 
```

因此，您的循环结构变为： -

```
for (int z = n - 2; z >= 0; z--) {
        for (int i = 1; i <= n - z; i++) {
            for (int j = 1; j <= n - i; j++)
                System.out.printf("%5s", "");
            for (int k = 1; k < i; k++)
                System.out.printf("%5d", (int) Math.pow(2, k));
            for (int k = i; k >= 1; k--)
                System.out.printf("%5d", (int) Math.pow(2, k));
            System.out.println();
        }
    } 
```

`z`开始是`n - 2`因为，第一个金字塔的长度为 2。请注意，在第二个内循环中，您的条件更改为`i <= n - z`。

现在，您的原始循环集运行`3 times` `(n - 2) == 2`for `n = 4`，并且循环运行直到 from `z = 2`to `z = 0`。它创建了一个高度金字塔：`(n - z)`- `(4 - 2) = 2`，，，背靠背。`(4 - 1) = 3``(4 - 0) = 4`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:36:09.780

暗示 ：-

您拥有的代码会生成一个长度金字塔`n`

将它包含在一个`for`循环中，循环说`counter=n-1`直到`counter=0`

在您现有的代码中将 value.of 替换`n`为`n-counter+1`

# c - c/c++ 中的 gcc 编译器是否保证将指向 const 数据的全局 const 指针放在单独的只读部分中？

> ID：13443189
> 
> 赞同：3
> 
> 时间：2012-11-18T18:30:05.130
> 
> 标签：c, memory, gcc, constants, storage-class-specifier

给定以下全局（或静态局部）变量的定义：

```
static const <type>* const ptr = {&var1, &var2, ...}; 
```

，我可以依赖这样一个事实，即初始化列表中的***ptr***和***data***都将被放置到生成的目标文件的单独只读部分（即它不会被放置到 .data 或包含非常量变量的类似部分）？

问题仅与所有架构/平台（至少其中存在只读内存的那些）共有的**gcc c/c++ 编译器行为有关。**它并不意味着任何平台、处理器、操作系统、链接器、启动运行时、库等。

请不要问我要做什么。我知道我在做什么。如果我提供的信息不足以回答，则必须将问题视为特定于 xxx 的问题，通用答案为“否”。我已经阅读了非常接近地提到这个主题的问答：

[类型限定符对存储位置的影响](https://stackoverflow.com/questions/13098536/impact-of-the-type-qualifiers-on-storage-locations)
[C 中如何实现只读内存？](https://stackoverflow.com/questions/1704893/how-is-read-only-memory-implemented-in-c)
[“const”只是意味着只读还是更多？](https://stackoverflow.com/questions/4486326/does-const-just-mean-read-only-or-something-more-in-c-c)
[为什么编译器允许你在这里“写”一个 const 变量？](https://stackoverflow.com/questions/4199950/why-does-compiler-allow-you-to-write-a-const-variable-here)
[GCC C++ (ARM) 和指向结构字段](https://stackoverflow.com/questions/1284619/gcc-c-arm-and-const-pointer-to-struct-field)
[memcpy 的 const 指针以及指向 const 数据的目标指针](https://stackoverflow.com/questions/12309600/memcpy-with-destination-pointer-to-const-data)

但我没有找到确定和直接的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:07:50.033

根据stackoverflow线程[，常量变量存储在C哪里？](https://stackoverflow.com/questions/1576489/where-are-constant-variables-stored-in-c)它是特定于实现的。就个人而言，我什至不会相信所有 GCC 端口都以相同的方式实现。这就是例如 AVR 端口引入“程序”属性的原因。

所以根据你的

> 不要问我在做什么，如果没有足够的信息，答案是“没有”

态度，我会在这里说：答案是“不”，没有可移植的方式来保证这样的事情。事实上，即使您指示编译器和链接器将其放置在“只读部分”之类的东西中。如果此部分位于 RAM 中，谁将阻止对该部分的写访问？

# php - 不推荐使用：mktime()：不推荐使用 is_dst 参数

> ID：13443191
> 
> 赞同：0
> 
> 时间：2012-11-18T18:30:10.827
> 
> 标签：php, function, date, mktime, date-math

**标准功能：（**见[键盘](http://codepad.org/jP8R6iLv)）

```
<?php

$start_time_o = "18:00";
$end_time_o = date("H:i");

function get_time_difference(){

    global $start_time_o, $end_time_o;

    $start_time = explode(":", $start_time_o);
    $end_time = explode(":", $end_time_o);

    $start_time_stamp = mktime($start_time[0], $start_time[1], 0, 0, 0, 0);
    $end_time_stamp = mktime($end_time[0], $end_time[1], 0, 0, 0, 0);

    $time_difference = $end_time_stamp - $start_time_stamp;

    return gmdate("H:i", $time_difference); 
}

echo get_time_difference();

?> 
```

**修改功能：（**见[键盘](http://codepad.org/K1oZ5WQa)）

```
<?php

$start_time_o = "18:00:01";
$end_time_o = date("H:i:s");

function get_time_difference(){

    global $start_time_o, $end_time_o;

    $start_time = explode(":", $start_time_o);
    $end_time = explode(":", $end_time_o);

    $start_time_stamp = mktime($start_time[0], $start_time[1], $start_time[2], 0, 0, 0, 0);
    $end_time_stamp = mktime($end_time[0], $end_time[1], $end_time[2], 0, 0, 0, 0);

    $time_difference = $end_time_stamp - $start_time_stamp;

    return gmdate("H:i:s", $time_difference); 
}

echo get_time_difference();

?> 
```

第一个功能可以正常工作，没有任何错误或通知。

修改后的函数给出消息：

```
Deprecated: mktime(): The is_dst parameter is deprecated in C:\xampp\htdocs\index.php on line 13
Deprecated: mktime(): The is_dst parameter is deprecated in C:\xampp\htdocs\index.php on line 14 
```

我不知道为什么我只在修改后的功能上收到消息？这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T18:37:14.457

如果您想使用更简单的方法来执行此操作，请尝试使用[`DateTime::diff`](http://us3.php.net/manual/en/datetime.diff.php)

```
<?php
$datetime1 = new DateTime('18:00:01');
$datetime2 = new DateTime();
$interval = $datetime1->diff($datetime2);
echo $interval->format('H:i:s');
?> 
```

这是一个可以让您更容易使用的功能：

```
<?php
function diff($first_datetime, $second_datetime = "now")
{
    $datetime1 = new DateTime($first_datetime);
    $datetime2 = new DateTime($second_datetime);
    $interval = $datetime1->diff($datetime2);
    return $interval->format('H:i:s');
}

// One of the date/time parameters is now so 
// we only  have to pass one parameter
echo diff('18:00:01');

// Neither parameter is now
echo diff('18:00:01', '20:00:00');
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T18:32:52.693

利用`strtotime`

喜欢

```
$someString = '10/10/2012 4:34 pm';  
date_default_timezone_set('American/New_York');
$timestamp = strtotime($someString);
echo date('Y/m/d H:i:s', $timestamp); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-18T18:33:19.743

您在函数上使用了太多参数`mktime()`。删除其中一个零，如下所示：

```
$start_time_stamp = mktime($start_time[0], $start_time[1], $start_time[2], 0, 0, 0);
$end_time_stamp = mktime($end_time[0], $end_time[1], $end_time[2], 0, 0, 0); 
```

**这就是导致您的问题的原因，但是正如@NullPointer 在他的回答中指出的那样，有一种更有效、更好的方法可以实现这一目标。使用他的解决方案！**

# windows - 静态链接 SQLite 与 DMD (Windows x86)

> ID：13443193
> 
> 赞同：5
> 
> 时间：2012-11-18T18:30:21.310
> 
> 标签：windows, sqlite, d, dmd

我试图与 sqlite3 进行静态链接但没有成功。我正在使用“etc.c.sqlite3”标头和 sqlite3 合并。为了创建 .lib 文件，我尝试了 VC++ 和 MinGW-gcc，它们都成功编译了源文件 - 但它们都生成 COFF 对象格式（DMD 使用的 optlink 与 OMF 一起使用）。在阅读了大量关于“digitalmars.D”的帖子后，我尝试了几种不同的解决方案。

[对象转换：](http://www.agner.org/optimize/#objconv)

*   尝试转换使用 GCC 创建的 lib 文件，导致未定义的符号，如 __divdi3 和 __muldi3，无法解决此问题。

*   还尝试将 sqlite3.o 文件转换为 *.obj，然后使用 digitalmars 'lib.exe' - 也不成功

*   在 VC++ 生成的库上尝试 objconv 失败，因为：“SQLite.lib 是一个导入库”

[暗示：](http://www.digitalmars.com/ctg/implib.html)

*   如果我从 sqlite.org 下载预编译的 DLL 并使用 implib，它会生成一个 lib 文件，但名称 mangling 似乎不匹配，因为即使我与静态库链接，我仍然收到相同的 sqlite 错误（例如 undefined符号`_sqlite3_open`, `_sqlite3_errmsg`, `_sqlite3_close`...

[咖啡机库：](http://www.digitalmars.com/ctg/coffimplib.html)

*   如果我在 VC++ 创建的库文件上使用 coffimlib，程序会生成一个几乎为空的文件 (~2KB)，其中只包含垃圾（即根本没有符号，而且大多只是“空”值）。

*   如果我对 GCC 创建的库执行相同操作，则 coffimlib 会抱怨“不是导入库”并且不会生成转换后的库文件。

如果我使用 DMC 编译 sqlite3 合并，编译失败并抱怨*大量*错误。所以我在这里，无处可去，有没有人有任何想法或提示可以解决这个问题？

注意：我不想使用 DLL，而是使用 sqlite 静态链接（出于可执行文件大小的考虑）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T18:39:46.277

尝试使用`implib`开关`/system`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T10:41:45.570

在 Windows 上，最好使用 dll。省去很多麻烦。

x64 支持的工作正在进行中，我认为这将利用 COFF + VC 的链接器。这有望改变尴尬的局面。

编辑：如果你真的需要静态库，你可以试试 Unilink，它能够将 OMF 和 COFF 文件链接在一起： ftp: [//ftp.styx.cabel.net/pub/UniLink](ftp://ftp.styx.cabel.net/pub/UniLink)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T10:06:19.420

为什么您不直接编译 SQLite C 代码并将其与您的 D 应用程序链接？我想这将使您免于与图书馆相关的头痛。

当然，一个不错的选择是使用 DMC 编译 SQLite 静态库，然后将其与您的 D 项目一起使用，只需执行以下操作：`dmd -of myproggy myproggy.d somefile.d libsqlite.lib`

# php - 回显 cURL 输出的特定部分？

> ID：13443209
> 
> 赞同：1
> 
> 时间：2012-11-18T18:32:04.163
> 
> 标签：php, curl

所以我有这个：

```
$pageurl = "http://www.example.com";
$group = $_POST['group'];
$ch = curl_init();

curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_URL, $pageurl);
curl_setopt($ch, CURLOPT_POSTFIELDS, "group=$group");
$result = curl_exec ($ch);
curl_close($ch); 
```

它返回一个网页。我想要做的是只显示该页面的某个部分，例如单个表格。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T10:12:35.380

你可以试试这个库[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:59:04.740

提供的代码似乎不正确 - 之前

`curl_setopt($ch, CURLOPT_POSTFIELDS, "group=$group");`

你应该指定

`curl_setopt($ch, CURLOPT_POST, true);`

确保您的 cURL HTTP POST 请求将正确建立。（否则 HTTP GET 是默认的）

要提取返回的 HTML 文档的部分内容，最好的方法是使用**strip_tags() 函数** [http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)，这将从 HTML 的任何部分中清除您的代码不想。

# php - 模块：如何“卸载”本机 php？

> ID：13443217
> 
> 赞同：3
> 
> 时间：2012-11-18T18:32:43.190
> 
> 标签：php, bash, module

我正在使用[模块](http://modules.sourceforge.net/)来管理我想要加载的 PHP 环境。但是，该机器装有 PHP。这会导致问题，因为始终使用本机 php 而不是加载任何模块。

我怎样才能覆盖这个？我尝试将 PHP 的新路径添加到`$PATH`，但仍使用本机 php。

在 Mac OS X 10.8.2 上，供参考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:35:30.027

这原来是一个 Mac + PHP 版本 <5.3.16 的问题。`make install`会将二进制文件保留为`php.dSYM`最终产品。在 5.3.17 上，此问题已得到修复，一切正常。

达尔文的怪癖。

# asp.net-mvc-3 - Html.Partial 和 Html.Action 方法有什么区别？

> ID：13443226
> 
> 赞同：11
> 
> 时间：2012-11-18T18:33:39.667
> 
> 标签：asp.net-mvc-3

我有一个控制器，它返回 PartialViewResult 并用它查看。为了测试，我输出当前的 DateTime（正在运行），并在视图中检查它是否为空，所以我知道我得到了什么。

当我尝试将该视图“嵌入”到另一个视图中时，`Html.Action`我得到了当前的日期时间，因此调用了我的操作。

但是当我使用`Html.Partial`以 null 呈现视图时，我的操作方法不会被调用。此外，两个断点和调试器也确认，在后一种情况下 my action 方法没有被调用。

动作方法：

```
public PartialViewResult Test()
{
  return PartialView(DateTime.Now);
} 
```

（部分）视图：

```
@model DateTime?

<p>@(Model ?? DateTime.MinValue)</p> 
```

并且从主视图调用是`@Html.Action("Test")`or `@Html.Partial("Test")`。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-18T18:50:09.907

Html.Action() 将调用您的操作方法，但 Html.Partial() 不会。Html.Partial() 只是呈现您的局部视图，如果您有一些静态内容，或者如果您已经加载了视图数据，则很有用。

```
Html.Partial("PartialName", Model.PartialData); 
```

将使用传递给它的模型数据呈现 PartialName 视图。这是将视图分解为干净部分的好方法，而无需向服务器产生任何额外的请求。

```
Html.Action("Test") 
```

将调用您的 Test 操作，并呈现结果。

这就是您看到 NULL DateTime 的原因。Html.Action() 实际上是调用动作，计算 DateTime，并渲染视图，而 Html.Partial() 只是渲染视图。

# mongodb - MongoDB 中的枚举

> ID：13443228
> 
> 赞同：30
> 
> 时间：2012-11-18T18:33:49.693
> 
> 标签：mongodb, enums, indexing

我想将枚举值存储在 MongoDB 集合中。我可以有效地将它们存储为字符串吗？与作为整数的枚举值相比，它会影响索引性能吗？Mongo索引器是否会在字符串索引仅包含几个固定选项作为字符串值的情况下优化字符串索引，以达到类似于通过排序整数查询索引的速度？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-18T19:40:14.337

将 MongoDB 中的枚举值存储为字符串非常好，是的，如果您索引该字段，我希望性能与索引整数查询相当。它肯定比使用整数更具表现力。

唯一真正的缺点是，如果您的枚举字符串有点长，它们会占用更多空间，但这是一个非常微不足道的问题。

# javascript - Google 提要 API 行为

> ID：13443230
> 
> 赞同：1
> 
> 时间：2012-11-18T18:33:58.257
> 
> 标签：javascript, google-feed-api

我正在使用 google feed api。基本上我想要一个我的提要列表以及提要条目的一些信息，以便处理通常在谷歌阅读器上不可用的历史提要。我对 google feed api 的一种行为感到困惑，我在下面的代码中将其记录为注释。我确信我没有得到任何东西，因为我是 js 新手。

这是我的问题作为评论的代码：

```
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" charset="UTF-8"  >

    google.load("feeds", "1");

   /* Here I define the list of my feeds */

   var feeds=['MYFEED1', 'MYFEED2', 'AND SO ON'];

    function initialize() {
      for (var j=0;j<feeds.length;j++) {
        var feed = new google.feeds.Feed(feeds[j]);
        feed.includeHistoricalEntries();
        feed.setNumEntries(100);

        feed.load(function(result) {
            if (!result.error) {
            var container = document.getElementById("out");
            var furl = result.feed.feedUrl;
            var flink = result.feed.link;
            for (var i = 0; i < result.feed.entries.length; i++) {  
                var entry = result.feed.entries[i];

                var div = document.createElement("div");

                /* HERE IS WHERE I DON'T GET IT. 
                                feeds[j] always just shows the last feed in the array. 
                                But furl always shows the correct feedUrl
                Though if I uncomment alert("NEXT") few lines below 
                                thus giving a short pause, feeds[j] correctly 
                                shows the same url as feedUrl. Why?  */
                div.appendChild(document.createTextNode(feeds[j]+" "
                             +furl+" "+flink+" "+ entry.link + " " + entry.title)); 
                container.appendChild(div);
          }
        }
      });
     //alert("NEXT");
    }
}

    google.setOnLoadCallback(initialize);

    </script>
  </head>
    <body><div id="out" ></div>
  </body>
</html> 
```

另外我想知道是否有一种方法可以通过查询 mysql 数据库来设置 feeds 数组的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:28:13.663

在我看来 feed.load() 是一个 ajax 调用，并且您正在传递一个回调函数以在从请求返回时执行。因为 ajax 是异步的，所以外部 for 循环会继续执行，因此您总是会看到数组中的最后一个提要。

我相信闭包应该在这种情况下帮助你。

考虑将整个块放在外部 for 循环中的单独函数中并使用闭包。像这样的东西：

```
function initialize() {
for (var j = 0; j < feeds.length; j++) {
    (function(val) { //closure begin
        var j = val;
        var feed = new google.feeds.Feed(feeds[j]);
        feed.includeHistoricalEntries();
        feed.setNumEntries(100);

        feed.load(function(result) {
            if (!result.error) {
                var container = document.getElementById("out");
                var furl = result.feed.feedUrl;
                var flink = result.feed.link;
                for (var i = 0; i < result.feed.entries.length; i++) {
                    var entry = result.feed.entries[i];

                    var div = document.createElement("div");

                     /* HERE IS WHERE I DON'T GET IT. 
                            feeds[j] always just shows the last feed in the array. 
                            But furl always shows the correct feedUrl
            Though if I uncomment alert("NEXT") few lines below 
                            thus giving a short pause, feeds[j] correctly 
                            shows the same url as feedUrl. Why?  */
                    div.appendChild(document.createTextNode(feeds[j] + " " + furl + " "  + flink + " " + entry.link + " " + entry.title));
                    container.appendChild(div);
                }
            }
          }
        })(j); //Closure end
    });
    //alert("NEXT");
}​ 
```

# javascript - 回调函数没有获取数据

> ID：13443233
> 
> 赞同：0
> 
> 时间：2012-11-18T18:34:09.540
> 
> 标签：javascript, jquery, ajax

经过长时间的研究，我尝试通过回调处理一些 AJAX 数据。我是意大利用户，所以如果我的解释不清楚，我深表歉意（实际上，我很难用英语解释我的问题）。

我正在尝试通过回调传递一些数据。我的 jQuery.ajax.async 没有设置为 false，因为我需要在异步模式下工作。因此，根据我在此处找到的一些帖子，我正在尝试将回调传递给我的函数。但是如果我尝试通过警报功能显示这些数据，我可以看到它是未定义的。这是代码：

```
function loadentities(id, username, password, system, host)
{
    var postData = "username=" + encodeURI(username) +
        "&password=" + encodeURI(password) +
        "&system=" + encodeURI(system) +
        "&host=" + encodeURI(host);

    jQuery.ajax({

        type: "POST",
        dataType: "json",
        data: postData,
        beforeSend: function(x) 
        {       
            if(x && x.overrideMimeType) 
            {   
                x.overrideMimeType("application/json;charset=UTF-8");
            }
        },
        url: 'operations.php?op=loadentities',
        error: function(x, textStatus, errorThrown)
        {
            alert("Request failed: " + textStatus + " " + errorThrown);
        },
        success: function(data) 
        {
            var html = "";
            for(var i=0; i < data.length; i++)
            {
                html += "<li><a onclick=\"showhide('" + data[i].entity + "');\">" + data[i].entity + "</a><ul id=\"" + data[i].entity + "\" class=\"list\"></ul></li>"; 
                loadlastfiveevents(username, password, system, host, data[i].entity, function(data)
                            {
                                 alert(data);
                                 entityData = new Array(); 
                                 for(var i = 0; i < data.length; i++)
                                 {
                                     var entityDataEntry = new Object();
                                     entityDataEntry.key = data[i].key;
                                     entityDataEntry.event = data[i].event;
                                     entityDataEntry.timestamp = data[i].timestamp;
                                     entityData.push(entityDataEntry);
                                 }
                                 alert(data[0].key);                                                      
                             });
                entitiesValues[entitiesIndex++] = data[i].entity;
            }

            jQuery(html).appendTo('#hlentity' + id);
        }
    }); //end jQuery.ajax
}

function loadlastfiveevents(username, password, system, host, entity, buildlastfiveevents)
{
    var postData = "username=" + encodeURI(username) +
        "&password=" + encodeURI(password) +
        "&system=" + encodeURI(system) +
        "&host=" + encodeURI(host) +
        "&entity=" + encodeURI(entity);

    jQuery.ajax({

        type: "POST",
        dataType: "json",
        data: postData,
        beforeSend: function(x) 
        {       
            if(x && x.overrideMimeType) 
            {   
                x.overrideMimeType("application/json;charset=UTF-8");
            }
        },
        url: 'operations.php?op=getlatestevents',
        error: function(x, textStatus, errorThrown)
        {
            alert("Request failed: " + textStatus + " " + errorThrown);
        },
        success: function(data) 
        {
            var color = "green";
            var html = "";
            for(var i = 0; i < data.length; i++)
            {
                if(data[i].event == "SUP") color = "green";
                else if(data[i].event == "IER") color = "yellow";
                else if(data[i].event == "SDW") color = "black";
                else color = "red";
                html += "<li><img src=\"images/" + color + ".jpg\" />" + data[i].key + " " + data[i].event + " " + data[i].timestamp + "</li>"; 
            }
            jQuery(html).appendTo('#' + entity);
            propagate(entity, data[0].event);
            buildlastfiveelements(data);
        }
    }); //end jQuery
} 
```

我希望这篇文章足够清楚，感谢您的耐心和时间。

编辑：这是 getlatestevents 返回的 JSON 代码示例（在 loadlastfiveevents 内）。

```
[
    {
        "key": "error",
        "event": "SUP",
        "timestamp": "2012-11-16 11:13:36"
    },
    {
        "key": "error",
        "event": "SDW",
        "timestamp": "2012-11-16 11:12:57"
    },
    {
        "key": "error",
        "event": "SUP",
        "timestamp": "2012-11-16 11:11:32"
    },
    {
        "key": "error",
        "event": "SDW",
        "timestamp": "2012-11-15 19:40:31"
    },
    {
        "key": "timeout",
        "event": "SER",
        "timestamp": "2012-11-15 19:30:54"
    }
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:10:41.803

这行不通。

您将数据类型设置为 json，这意味着您希望返回 JSON 结果，其他任何操作都会失败。

然后，您使用`for`基于返回的 JSON 对象长度的循环迭代，并且由于对象没有长度，因此 for 循环永远不会运行。

您要么期待具有长度属性的数组，但由于数据类型设置为 JSON，它们不会通过，或者您期待以 JSON 对象的形式通过的对象，这些对象没有长度属性并且必须与`for(key in object)`或`$.each(object, function(key, value) {...})`等循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:46:15.903

您确定您的 HTTP 请求实际上正在返回某些内容吗？您可以提供您请求的完整 URL 以及您为函数提供的不同参数。

# google-cloud-messaging - Google 云消息传递的 setRegisteredOnServer() 函数。

> ID：13443234
> 
> 赞同：1
> 
> 时间：2012-11-18T18:34:11.067
> 
> 标签：google-cloud-messaging

在GCM中，为什么每次设备向服务器发送参数后，它都会调用`setRegisteredOnServer(Context context, boolean flag)`，在文档中它说这个函数**设置设备是否在服务器端成功注册。**我不明白这个功能的意义，谁能解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:44:37.480

查看[GCMRegistrar 代码](http://code.google.com/p/gcm/source/browse/gcm-client/src/com/google/android/gcm/GCMRegistrar.java#411)，我可以看到它所做的只是设置了一个本地属性，然后可以通过 isRegisteredOnServer 检索该属性。这个属性是私有的，并且这些方法都没有在 GCM 帮助器类中的任何其他地方引用，所以我只能假设它们是在 GCM 可用时告诉您的应用程序的一种方便方法。如果您必须包含依赖于 GCM 连接并需要标准方法来测试它的 3rd 方库，这将很有用，但我承认这是一个非常投机的用例。

# list - 列表的所有可能子列表

> ID：13443237
> 
> 赞同：4
> 
> 时间：2012-11-18T18:34:23.933
> 
> 标签：list, haskell

我需要编写一个函数来生成一个列表，其中包含列表的所有可能子列表的列表。所以类型必须是：

```
partitions :: [a] -> [[[a]]] 
```

它应该给出：

> 分区 [1..4] = [[[1],[2],[3],[4]], [[1,2],[3],[4]], [[1],[2 ,3],[4]], [[1,2,3],[4]], [[1],[2],[3,4]], [[1,2],[3,4 ]], [[1],[2,3,4]], [[1,2,3,4]]]

我认为列表理解是最好的方法。到目前为止，我有：

```
partitions :: [a]  -> [[[a]]]
partitions (x:xs) = foldr insert [[]] (x:xs)
   where insert ys zs = ys:x:zs 
```

如您所料，这会引发类型错误，但我不知道如何修复它。我觉得我遗漏了一些明显的东西，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T21:49:19.977

我将从直接递归开始。分解一下，较长列表中的第一个元素有什么可能性？

1.  它可以是其中一个分区列表的唯一元素。
2.  它可以是具有多个元素的分区列表的一部分。

从您的示例来看，您似乎希望保持原始元素有序，因此每个分区的成员只能是连续的子列表，这使得它更容易一些。

所以我们可以开始

```
partitions :: [a] -> [[[a]]]
partitions [] = [[]]    -- only one partition of an empty list, an empty partition
partitions (x:xs) = [[x]:part | part <- partitions xs] ++ [(x:ys):yss | (ys:yss) <- partitions xs] 
```

产生

```
*Partitions> partitions [1,2,3,4]
[[[1],[2],[3],[4]],[[1],[2],[3,4]],[[1],[2,3],[4]],[[1],[2,3,4]],[[1,2],[3],[4]],[[1,2],[3,4]],[[1,2,3],[4]],[[1,2,3,4]]] 
```

不是所需的顺序。如果这很重要，我们必须重写。期望的顺序直接连续列出第一个元素的两个选项，所以我们可以写它

```
partitions (x:xs) = partitions xs >>= \zs -> case zs of
                                               [] -> [[[x]]]
                                               (ys:yss) -> [[x]:ys:yss, (x:ys):yss] 
```

我们需要明确区分空分区（在递归结束时）和非空分区的情况，这在上面是通过绑定到模式隐式完成的`(ys:yss)`。这会产生所需的顺序

```
*Partitions> partitions [1,2,3,4]
[[[1],[2],[3],[4]],[[1,2],[3],[4]],[[1],[2,3],[4]],[[1,2,3],[4]],[[1],[2],[3,4]],[[1,2],[3,4]],[[1],[2,3,4]],[[1,2,3,4]]] 
```

`(>>=)`使用list monad的绑定这一事实，`flip concatMap`版本

```
partitions (x:xs) = concatMap insert (partitions xs)
  where
    insert [] = [[[x]]]
    insert (ys:yss) = [[x]:ys:yss, (x:ys):yss] 
```

可能更具可读性。

# apache - Apache Web 服务器和根上下文的重定向

> ID：13443240
> 
> 赞同：-1
> 
> 时间：2012-11-18T18:34:41.133
> 
> 标签：apache

我正在使用 Jboss 7.1 和 Mod Cluster 1.1。我已经建立了一个有 2 个节点的集群。这里是设置的简要说明。
1) 主机 1：充当负载均衡器 (Apache HTTPD + Mod_Cluster)。同一台机器有一个集群的共享数据库。
2）主机2：纯应用服务器node.JBoss
3）主机3：纯应用服务器node.JBoss

我在每个应用服务器节点上安装了 3 个应用程序（2 个 EAR + 1 个 WAR）。war 文件部署在根上下文中。如果我连接到单个应用程序服务器（例如“http://host2:8080/”），我会进入应用程序的主页。但是，如果我连接到负载均衡器节点（“http://host1:8080/”），我不会进入我的应用程序的主页，而是会获得 Apache 的默认 index.html 页面。

我可以强制 apache 将其根上下文重定向到部署在所选工作节点上的应用程序吗？请记住，我要重定向到的应用程序也部署在 JBoss 的根上下文中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T15:02:26.623

the root context is excluded by default:

```
/subsystem=modcluster/mod-cluster-config=configuration
ls
...
excluded-contexts=ROOT,invoker,jbossws,juddi,console
... 
```

Note: If you remove it from the excluded-contexts, the other contexts cease to be excluded as well.

# xcode - @Protocol & Delegate - 调用了委托方法，但没有将值传递给父表单

> ID：13443241
> 
> 赞同：0
> 
> 时间：2012-11-18T18:34:43.843
> 
> 标签：xcode, ios5

我的应用程序的登陆页面是一个 UITableView，其中包含菜单选项列表（menu.h、menu.m）。在 menu,m 的 ViewDidAppear 中，应用程序检查用户是否已登录并转到 Modal Login Form (Login.h, Login.m)。在模式登录表单中，单击登录时会执行委托方法，但未传递值。如果我遗漏了什么，将不胜感激

a) 类 LoggedInUserDetails

a1) 类 LoggedInUserDetails.h

```
#import <UIKit/UIKit.h>
@interface LoggedInUserDetails : NSObject

@property (nonatomic, copy) NSString *isSuccessfullyLoggedIn;
@property (nonatomic, copy) NSString *login;

@end 
```

a2) LoggedInUserDetails.m

```
#import "LoggedInUserDetails.h"
@implementation LoggedInUserDetails

@synthesize isSuccessfullyLoggedIn;
@synthesize login;

@end 
```

b) 登录.h 和登录.m

b1) 登录.h

```
#import <UIKit/UIKit.h>
@class Login;
@class LoggedInUserDetails;

@protocol LoginDelegate <NSObject>
- (void) login:(Login *)controller GetLoggedInUserDetails:(LoggedInUserDetails *)loggedinuserdetails;
@end

@interface Login : UIViewController 

@property (nonatomic, weak) id <LoginDelegate> delegate;

- (IBAction)actnLogin:(id)sender;
- (IBAction)actnLogout:(id)sender;

@end 
```

b2) 登录.m

```
#import "Login.h"
#import "menu.h"

@interface Login ()

@end

@implementation Login
@synthesize delegate;

- (IBAction)actnLogin:(id)sender {
    //[self.delegate didReceiveMessage:@"YES"];
    LoggedInUserDetails *loggedinuserdetails = [[LoggedInUserDetails alloc] init];
    loggedinuserdetails.login   = @"MCONNLEY";
    loggedinuserdetails.isSuccessfullyLoggedIn = @"YES";
    // The line below is getting executed while checking in debug mode but
    // doesnot go to menu.m with the result the login form is constantly shown
    [self.delegate login:self GetLoggedInUserDetails:loggedinuserdetails]; 
} 
```

c) 菜单.h 和菜单.m

c1)菜单.h

```
#import <UIKit/UIKit.h>
#import "Login.h"
#import "LoggedInUserDetails.h"

@interface menu : UITableViewController <LoginDelegate>

@property (strong, nonatomic) NSArray *menuList;
@property (nonatomic, strong) LoggedInUserDetails *userDetails;

@end 
```

c2)菜单.m

```
#import "menu.h"

@interface menu ()

@end

@implementation menu
@synthesize menuList;
@synthesize userDetails;

- (void) viewDidAppear:(BOOL)animated {
    if (![userDetails.isSuccessfullyLoggedIn isEqualToString:@"YES"]) {
        [self performSegueWithIdentifier:@"LoginSegue" sender:self];
    }    

}

- (void) login:(Login *)controller GetLoggedInUserDetails:(LoggedInUserDetails *)loggedinuserdetails {
    userDetails = loggedinuserdetails;
    IstheUserLoggedIn.text = userDetails.isSuccessfullyLoggedIn;
    [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:45:59.717

您似乎没有在任何地方设置委托。我希望在 prepareForSegue 中看到这一点。

即将呈现的视图控制器将在`segue.destinationViewController`. 您可以在此处将 self 设置为委托人。

# .htaccess - 使用 .htaccess 重定向除三个页面之外的所有页面

> ID：13443243
> 
> 赞同：5
> 
> 时间：2012-11-18T18:34:58.853
> 
> 标签：.htaccess, redirect

我正在使一个站点永久脱机，但在它关闭之前我会在其上显示一个启动页面一两个星期。如何编辑我的 .htaccess 文件以显示该启动页面？它需要允许页面本身（根目录）以及 /images 目录中的两个图像。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-18T18:42:34.940

将以下配置放入`.htaccess`网站根目录中：

```
RewriteEngine On

RewriteCond %{REQUEST_URI} !^/splash.html$
RewriteCond %{REQUEST_URI} !^/images/usedimage.png$
RewriteCond %{REQUEST_URI} !^/images/anotherusedimage.png$
RewriteRule .* /splash.html [R=301,L] 
```

# list - 仅从嵌套列表中获取重要数据

> ID：13443244
> 
> 赞同：1
> 
> 时间：2012-11-18T18:35:03.637
> 
> 标签：list, grails, groovy, many-to-one

你好！我只想获取下载链接的重要信息（完整流程）。

我的域设计如下：

```
Serie { hasMany[Season] }
Season { hasMany[Episode] and belongsTo[Serie] }
Episode { hasMany[DownloadInfo] and belongsTo[Season] }
DownloadInfo { link nullable:true //among other data } 
```

我的数据库中有大约这个数量的记录：

```
serie:4500
season:500
episode:6500
download_info:10000 
```

我们可以看到有很多系列没有其他信息。

**我怎样才能只在所有这些都完成的地方获得那些系列>季>集>下载信息数据？**

例如，拥有：

```
Serie "A"
  Season "sA1"
Serie "B"
  Season "sB1"
    Episode "eB1"
      Link "b1.1"
      Link "b1.2"
    Episode "eB2"
    Episode "eB3"
      Link "b3.1"
Serie "C"
  Season "sC1"
    Episode "eC1"
Serie "D"
Serie "E"
  Season "sE1"
    Episode "eE1"
      Link "e1.1"
  Season "sE2"
    Episode "eE2"
      Link "e2.1" 
```

我想得到这个：

```
def model = [series:[
  name:'B',
  seasons:[
    name:'sB1',
    episodes:[
      name:'eB1',
      links:['b1.1','b1.2']
    ],[
      name:'eB3',
      links:['b3.1']
    ]
  ]
],[
  name:'E'
  seasons:[
    name:'sE1',
    episodes:[
      name:'eE1',
      links:['e1.1']
    ]
  ],[
    name:'sE2'
    episodes:[
      name:'eE2',
      links:['e2.1']
    ]
  ]
] 
```

**丢弃所有没有链接的系列、季节剧集和下载信息。**

顺便说一句，我只需要链接属性不为空的 DownloadInfo。我开始：

```
DownloadInfo.where { link!= null }.list().each {
  // ...
} 
```

但我想不出一种优雅的方式来完成所有流程。有什么线索吗？

提前致谢！

**更新**

这将是 Groovy 的等价于以下 SQL，按每个实体的名称分组：

```
select * from serie s
inner join season ss on s.id = ss.serie_id
inner join episode e on ss.id = e.season_id
inner join download_info di on e.id = di.episode_id
where di.link is not null 
```

# python - 计算numpy数组的周长

> ID：13443246
> 
> 赞同：6
> 
> 时间：2012-11-18T18:35:11.950
> 
> 标签：python, multidimensional-array, numpy, morphological-analysis

我想计算给定 numpy 数组结构的周长。周长是指numpy数组中结构的确切周长。该结构可以包括孔。

我目前的做法是这样的：

```
import numpy   
a = numpy.zeros((6,6), dtype=numpy.int)
a[1:5, 1:5] = 1;a[3,3] = 0
# Way 1
s = ndimage.generate_binary_structure(2,1)
c = ndimage.binary_dilation(a,s).astype(a.dtype)
b = c - a  
numpy.sum(b) # The result, however the hole is calculated as 1, although there are 4 edges

# Way 2
b = ndimage.distance_transform_cdt(a == 0,metric='taxicab') == 1 
b = b.astype(int)
numpy.sum(b) # same as above 
```

![在此处输入图像描述](../Images/a5d4a58eeda6f0cc34eeb1be6206b681.png)

如您所见，它显示了所有相邻的单元格，但是它们的总和不等于补丁的周长。示例数组中的孔被计算为 1，尽管它正确有 4 条边。不同形状的较大孔也存在类似问题。

我过去曾问过类似的问题，但所有提供的解决方案最终都无法以正确的输出值解决。有人知道如何做到这一点？除了 numpy、scipy 和基本包之外，请不要使用其他包。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T20:53:36.203

计算内部和边缘的边缘数（假设二值图像）：

```
n_interior = abs(diff(a, axis=0)).sum() + abs(diff(a, axis=1)).sum()
n_boundary = a[0,:].sum() + a[:,0].sum() + a[-1,:].sum() + a[:,-1].sum()
perimeter = n_interior + n_boundary 
```

如果图像正确补零，则可以省略 n_boundary。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T20:53:20.730

你的意思是，在图像中，将蓝色瓷砖与红色瓷砖分开的长度为 1 的边的总数？在上图中，这个数字是 28。在您给出的代码示例中（略有不同，没有 4 个角与其余边框图块不同），它将是 20。

如果这是您想要计算的，您可以执行以下操作：

`numpy.sum(a[:,1:] != a[:,:-1]) + numpy.sum(a[1:,:] != a[:-1,:])`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-06T21:16:37.127

我添加我的答案是因为现有的有同样的问题：如果一个像素与上面的像素和左边的像素都不同，如果你这样做，它会被计算两次：

```
numpy.sum(a[:,1:] != a[:,:-1]) + numpy.sum(a[1:,:] != a[:-1,:]) 
```

这是通过使用元素或在进行求和之前修复的：

```
np.logical_or(
    (a[:,1:] != a[:,:-1])[1:,:], 
    (a[1:,:] != a[:-1,:])[:,1:]).sum() 
```

# mercurial - 如何使受密码保护的 PPK 停止通过 TortoisePlink 和 KeyRing 在 TortoiseHG 中询问密码

> ID：13443248
> 
> 赞同：2
> 
> 时间：2012-11-18T18:35:20.937
> 
> 标签：mercurial, ssh, tortoisehg, pageant

**已解决，请参阅最后的编辑**

我有一个 SourceForge 存储库，并且在那里正确设置了我的 SSH 密钥。它工作正常。但是当我使用 TortoiseHG 将我的修改推送到存储库时，我一直被要求输入 PPK 的密码（因为我保护了它）。

我告诉 Mercurial 我的 PPK 是这样的：

[ui] ssh = tortoiseplink.exe -ssh -i "c:\Users\my_user\SSH\my_user.ppk"

但它一直在用 PPK 的密码困扰我。我知道 Mercurial 的 KeyRing 扩展，但它是否适用于 PPK？

然后...

TortoiseHG 有这个选美工具。显然，您通过指定 -agent 来告诉 TortoiseHG 使用它，如下所示：

[ui] ssh = tortoiseplink.exe -ssh -i "c:\Users\my_user\SSH\my_user.ppk" -agent

我在 Pageant 中添加了我的密钥，但是当我与 TortoiseHG 同步时，它**仍然**要求输入我的 PPK 的密码，即使我在 Pageant 中添加 PPK 时已经提到过。

让我烦恼的另一件事是，Pageant 在程序重新启动时“忘记”了所有键。所以有点'没用。

有什么办法可以使用 KeyRing 扩展将我的 PPK 添加到 TortoiseHG 并将密码存储在某个地方？

如果没有办法解决这个问题，我想我只会使用不受保护的 PPK，就是这样......

**后期编辑：**

这是我尝试通过 TortoiseHG 同步工具进行推送时得到的调试输出，配置如上。

% hg --repository C:\Projects\MyProject push --debug ssh://echysttas@hg.code.sf.net/p/myproject/code

`pushing to ssh://echysttas@hg.code.sf.net/p/myproject/code`

`running "c:\Program Files\TortoiseHg\TortoisePlink.exe" -agent echysttas@hg.code.sf.net "hg -R p/myproject/code serve --stdio"`

`sending hello command`

`sending between command`

*在这里我收到一个密码请求，我取消了它，因为我不想继续重复我的密码*

远程 hg 没有合适的响应 [命令返回代码 255 Mon Nov 19 20:43:14 2012]

**后期编辑2：**

我注意到一些示例使用 plink.exe 而不是 TortoisePlink.exe。好吧，我也尝试使用 plink.exe（直接来自 Putty 网站）。这产生了可喜的结果......

`sending hello command`

`sending between command`

`remote: Passphrase for key "rsa-key-20121118":`

`remote: Passphrase for key "rsa-key-20121118":`

但后来，它卡在了这里。

**稍后编辑 3**

非常有趣的发现::- D。

它卡住了，因为我从非提升的 Explorer 调用 TortoiseHG Sync 但我从**提升的 Total Commander**开始了 Pageant 。我在我的 Windows 7 上使用 UAC，这导致了问题。

如果 Pageant 是从管理员权限 Total Commander 运行的，那么 TrtoiseHG Sync 也必须从那里启动！如果这样做，它的工作原理！如果我从非提升的资源管理器启动 Pageant 并且我也从那里进行同步，它也可以工作。

完毕！

懒惰的獾我仍然将答案授予你，因为你很懒惰，你证明了自己的兴趣并帮助了我很多。虽然“它可以在我的机器上运行”并不是真正的答案，但它确实让我思考，你的许多文字和描述值得那个光荣的绿色复选标记，是吗？:D。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:40:02.453

好吧，我**可以**与选美一起工作而无需再被询问一次密码

我的 SSH 线路

```
ssh = "c:\Program Files\_Tools\TortoiseHg\TortoisePlink.exe" 
```

并运行 Pageant（使用加载的私钥 /PuTTY-User-Key-File/）将使我能够与 repo 进行通信而无需重新身份验证

**注意 1：**密钥环对您的情况根本没有帮助，使用纯 ssh 连接（ssh 或 plink）调试选美功能

**注意 2：**要使用密钥（仅需要密码）启动 Pageant，您可以使用扩展[命令行](http://the.earth.li/%7Esgtatham/putty/0.60/htmldoc/Chapter9.html#pageant-cmdline-loadkey)

> 如果您在 Pageant 命令行中提供它们，那么 Pageant 可以在启动时自动加载一个或多个私钥。您的命令行可能如下所示：
> 
> `C:\PuTTY\pageant.exe d:\main.ppk d:\secondary.ppk`
> 
> 如果密钥是加密存储的，Pageant 将在启动时请求密码。
> 
> 如果 Pageant 已经在运行，则此语法会将键加载到现有的 Pageant 中。

## 添加在

尝试使用我当前的 TortoiseHG 2.6 (XP SP3 x86) 的 ssh 设置推送，[Mercurial repo](https://sourceforge.net/u/bigbadger/code/)

```
c:\TEMP\Fiver>hg push sf
pushing to ssh://bigbadger@hg.code.sf.net/u/bigbadger/code
searching for changes
remote: adding changesets
remote: adding manifests
remote: adding file changes
remote: added 7 changesets with 39 changes to 19 files
remote: <Repository /hg/u/bigbadger/code> refresh queued. 
```

本地仓库 hgrc

```
[paths]
...
sf = ssh://bigbadger@hg.code.sf.net/u/bigbadger/code 
```

已加载到 Pageant 中的私钥，在 SF 上注册的公钥，在我的个人资料中

Mercurial.ini（相关部分）

```
[ui]
merge = <irrelevant>
username = <irrelevant>
ssh = "c:\Program Files\_Tools\TortoiseHg\TortoisePlink.exe" 
```

（注意 TortoisePlink 没有其他参数）

并**没有做** *更多特别*的事情

**带日志输出的纯 THG 推送截图**

![推](../Images/22e9398d72600b07eaefa42347f35026.png)

SF-SSH的*良好 plink+pageant 会话*日志

```
>Plink.exe -v -agent bigbadger@hg.code.sf.net
Looking up host "hg.code.sf.net"
Connecting to 216.34.181.156 port 22
Server version: SSH-2.0-OpenSSH_5.3
Using SSH protocol version 2
We claim version: SSH-2.0-PuTTY_Release_0.62
Doing Diffie-Hellman group exchange
Doing Diffie-Hellman key exchange with hash SHA-256
Host key fingerprint is:
ssh-rsa 2048 86:7b:1b:12:85:35:8a:b7:98:b6:d2:97:5e:96:58:1d
Initialised AES-256 SDCTR client->server encryption
Initialised HMAC-SHA1 client->server MAC algorithm
Initialised AES-256 SDCTR server->client encryption
Initialised HMAC-SHA1 server->client MAC algorithm
Pageant is running. Requesting keys.
Pageant has 1 SSH-2 keys
Using username "bigbadger".
Trying Pageant key #0
Authenticating with public key "github/lazybadger" from agent
Sending Pageant's response
Access granted
Opened channel for session
Allocated pty (ospeed 38400bps, ispeed 38400bps)
Started a shell/command
Last login: Tue Nov 20 03:20:48 2012 from 85.249.33.17
Server sent command exit status 1
Disconnected: All channels closed

Welcome to hg.sourceforge.net
This is a restricted Shell Account
You cannot execute anything here. 
```

# .net - C++/CLI 函数指针与 .NET 委托的性能

> ID：13443250
> 
> 赞同：11
> 
> 时间：2012-11-18T18:35:32.450
> 
> 标签：.net, performance, delegates, c++-cli, mixed-mode

对于我的 C++/CLI 项目，我只是尝试衡量 C++/CLI 函数指针与 .NET 委托的成本。

我的期望是，C++/CLI 函数指针比 .NET 委托更快。因此，我的测试分别计算了 5 秒内 .NET 委托和本机函数指针的调用次数。

## 结果

现在结果（并且仍然）令我震惊：

*   *.NET 委托：* 在 5003 毫秒内执行 910M，结果为 152080413333030
*   *函数指针：* 在 5013 毫秒内执行 347M 次，结果为 57893422166551

这意味着，本机 C++/CLI 函数指针的使用几乎比在 C++/CLI 代码中使用托管委托慢 3 倍。***这个怎么可能？***在性能关键部分使用接口、委托或抽象类时，我应该使用托管构造吗？

## 测试代码

连续调用的函数：

```
__int64 DoIt(int n, __int64 sum)
{
    if ((n % 3) == 0)
        return sum + n;
    else
        return sum + 1;
} 
```

调用该方法的代码尝试使用所有参数以及返回值，因此没有任何东西被优化掉（希望如此）。这是代码（用于 .NET 代表）：

```
__int64 executions;
__int64 result;
System::Diagnostics::Stopwatch^ w = gcnew System::Diagnostics::Stopwatch();

System::Func<int, __int64, __int64>^ managedPtr = gcnew System::Func<int, __int64, __int64>(&DoIt);
w->Restart();
executions = 0;
result = 0;
while (w->ElapsedMilliseconds < 5000)
{
    for (int i=0; i < 1000000; i++)
        result += managedPtr(i, executions);
    executions++;
}
System::Console::WriteLine(".NET delegate:       {0}M executions with result {2} in {1}ms", executions, w->ElapsedMilliseconds, result); 
```

与 .NET 委托调用类似，使用 C++ 函数指针：

```
typedef __int64 (* DoItMethod)(int n, __int64 sum);

DoItMethod nativePtr = DoIt;
w->Restart();
executions = 0;
result = 0;
while (w->ElapsedMilliseconds < 5000)
{
    for (int i=0; i < 1000000; i++)
        result += nativePtr(i, executions);
    executions++;
}
System::Console::WriteLine("Function pointer:    {0}M executions with result {2} in {1}ms", executions, w->ElapsedMilliseconds, result); 
```

## 附加信息

*   使用 Visual Studio 2012 编译
*   .NET Framework 4.5 是目标
*   发布版本（执行计数与调试版本保持成比例）
*   调用约定是 __stdcall（当项目使用 CLR 支持编译时不允许使用 __fastcall）

已完成所有测试：

*   .NET 虚拟方法：在 5004 毫秒内执行 1025M，结果为 171358304166325
*   .NET 委托：在 5003 毫秒内执行 910M，结果为 152080413333030
*   虚拟方法：在 5006 毫秒内执行 336M，结果为 56056335999888
*   函数指针：在 5013 毫秒内执行 347M 次，结果为 57893422166551
*   函数调用：在 5001 毫秒内执行 1459M，结果为 244230520832847
*   内联函数：在 5000 毫秒内执行 1385M 次，结果为 231791984166205

对“DoIt”的直接调用在这里由“函数调用”表示，它似乎被编译器内联，因为与对内联函数的调用相比，执行计数没有（显着）差异。

对 C++ 虚方法的调用与函数指针一样“慢”。托管类（引用类）的虚拟方法与 .NET 委托一样快。

**更新：** 我挖得更深一点，似乎对于使用非托管函数的测试，每次调用 DoIt 函数时都会转换到本机代码。因此，我将内部循环包装到另一个我强制编译非托管的函数中：

```
#pragma managed(push, off)
__int64 TestCall(__int64* executions)
{
    __int64 result = 0;
    for (int i=0; i < 1000000; i++)
            result += DoItNative(i, *executions);
    (*executions)++;
    return result;
}
#pragma managed(pop) 
```

另外我像这样测试了 std::function ：

```
#pragma managed(push, off)
__int64 TestStdFunc(__int64* executions)
{
    __int64 result = 0;
    std::function<__int64(int, __int64)> func(DoItNative);
    for (int i=0; i < 1000000; i++)
        result += func(i, *executions);
    (*executions)++;
    return result;
}
#pragma managed(pop) 
```

现在，新的结果是：

*   函数调用：在 5000 毫秒内执行 2946M 次，结果为 495340439997054
*   std::function：在 5018 毫秒内执行 160M，结果为 26679519999840

std::function 有点令人失望。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-18T19:19:00.660

您正在看到“双重打击”的成本。DoIt() 函数的核心问题是它被编译为托管代码。委托调用非常快，通过委托从托管代码转到托管代码并不复杂。函数指针很慢，但是编译器会自动生成代码，首先从托管代码切换到非托管代码，然后通过函数指针进行调用。然后在一个存根中结束，该存根从非托管代码切换回托管代码并调用 DoIt()。

大概您真正要衡量的是对本机代码的调用。使用 #pragma 强制将 DoIt() 生成为机器代码，如下所示：

```
#pragma managed(push, off)
__int64 DoIt(int n, __int64 sum)
{
    if ((n % 3) == 0)
        return sum + n;
    else
        return sum + 1;
}
#pragma managed(pop) 
```

您现在将看到函数指针比委托更快

# javascript - 是否可以从 JavaScript（在 IE 浏览器 ActiveX 控件中运行）将消息发送到 Win32 HWND？

> ID：13443251
> 
> 赞同：1
> 
> 时间：2012-11-18T18:35:55.580
> 
> 标签：javascript, c++, internet-explorer, com, activex

我有一个本机 C++/Win32/MFC 应用程序，其中包含一个包含 IE ActiveX 浏览器控件的对话框。该控件呈现包含一些 JavaScript 的生成的 HTML 页面。

这是我发布的一系列问题的又一个后续问题，我的最终目标是尝试从 HTML 中的 Javascript 与包含它的主对话框进行通信。

我最初的方法是创建一个 Javascript 可以与之对话的 COM 对象。我收到了一些关于这样做的帮助和建议。但是，在考虑更多这一点时，由于最终目标只是与对话进行交流，我认为这可能没有必要。

由于 Javascript 可以在 ActiveX 对象上创建和调用，也许有一个我可以使用的现有对象？

有没有办法使用 ActiveX 对象从 Javascript 对给定的 HWND 执行 Win32 PostMessage？即一个现有的对象，以避免自己创建一个？提供某种系统对象，我可以从 Javascript 中创建？

或者也许在 Javascript 中以其他方式向 Win32 HWND 发布消息？

如果是这样，我认为我不需要自己创建任何 COM 对象，我可以通过将消息发布到包含对话框来响应事件（对话框正在生成 HTML，因此可以提供 HWND）。

# android - 在 Android 中通过代码为 ImageButton 状态模仿 Selector

> ID：13443256
> 
> 赞同：0
> 
> 时间：2012-11-18T18:36:11.703
> 
> 标签：android, imagebutton

我有一个`ImageButton`，其中源图像是从网络动态加载的。我的目标是根据按钮的状态（即 state_pressed、state_focused...）在图像上设置不同的颜色过滤器。问题是我不能使用`Selector`，因为我的图像是动态加载的，不是可绘制资源。有谁可以给​​我一个线索，我如何使用代码识别状态并模仿选择器的工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:53:50.770

您可以按照 kcoppock 在[此 SO 帖子中概述的方式以编程方式设置状态](https://stackoverflow.com/a/4697794/1309304)

```
Resources r = getResources();
StateListDrawable states = new StateListDrawable();
states.addState(new int[] {android.R.attr.state_pressed}, r.getDrawable(R.drawable.pressed));
states.addState(new int[] {android.R.attr.state_focused}, r.getDrawable(R.drawable.focused));
states.addState(new int[] {}, r.getDrawable(R.drawable.normal));

imageButton.setImageDrawable(states); 
```

# c - C - 从字节数组的一部分获取字符

> ID：13443257
> 
> 赞同：2
> 
> 时间：2012-11-18T18:36:11.703
> 
> 标签：c, pointers, char, bytearray

如何从部分字节数组中获取 char 数组或 char 指针？假设我在字节数组中有可变大小的字符串，它从 18 个字节开始，到数组末尾的 4 个字节结束。我怎样才能得到这个？

编辑：点呢？我应该在那个字节数组中有点，但是当我通过 memcpy 复制时，我得到没有点的字符串。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:40:07.987

好吧，您可以使用[memcpy](http://linux.die.net/man/3/memcpy)复制任意范围的字节：

```
const int index1 = 18;    // start index in src
const int index2 = 252;   // end + 1 index in src

char src[256];            // source array
char dest[256];           // destination array

memcpy(dest, &src[index1], index2 - index1);
                          // copy bytes from src[index1] .. src[index2 - 1]
                          // inclusive to dest[0] .. dest[index2 - index1 - 1] 
```

这将从索引 18 到 251 复制字节`src`并将它们存储在`dest`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T18:40:15.013

要提取数组的一部分，您可以使用`memcpy`.

```
#include <string.h>

char dst[4];

/* Here, we can assume `src+18` and `dst` don't overlap. */
memcpy(dst, src + 18, 4); 
```

> **C11 (n1570), § 7.24.2.1`memcpy`函数**
> 该`memcpy`函数将 n 个字符从 指向的对象复制到 指向`s2`的对象中`s1`。如果复制发生在重叠的对象之间，则行为未定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T18:39:43.013

谷歌使用`memcpy`. 它会满足你的问题

```
const char *buffer = "I AM A VERY VERY VERY VERY VERY VERY VERY VERY BIG STRING";
char buffer2[4];

memcpy(buffer2, (buffer+18), 4); 
```

芬妮是你的阿姨。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-15T11:51:59.260

**memcpy（目的地，来源，计数）；**

*   目的地 = 存储区 ( **!important** destination_SIZE >= count)
*   源 = 保存要复制的数据的数组（默认起始索引 = 0，但`source+n`可以跳过`n`字节（**您不应该超出源数组**））
*   count = 将复制多少字节。

一个小警告：如果目标与源相同，则必须将所有操作数保存在索引中。

# gwt - 编译 GWT 关闭错误

> ID：13443258
> 
> 赞同：2
> 
> 时间：2012-11-18T18:36:17.090
> 
> 标签：gwt, closures

编译时出现以下错误。如何找出受影响的文件并导致此错误？

```
 splitPointToFragmentMap[38] = 16
         [ERROR] Nov 19, 2012 2:33:28 AM com.google.gwt.thirdparty.javascript.jscomp.PhaseOptimizer$NamedPass process
         [ERROR] INFO: processGoogScopeAliases
         [ERROR] Nov 19, 2012 2:33:28 AM com.google.gwt.thirdparty.javascript.jscomp.PhaseOptimizer$NamedPass process
         [ERROR] INFO: processProvidesAndRequires
         [ERROR] Nov 19, 2012 2:33:29 AM com.google.gwt.thirdparty.javascript.jscomp.PhaseOptimizer$NamedPass process
         [ERROR] INFO: checkVars
         [ERROR] Nov 19, 2012 2:33:29 AM com.google.gwt.thirdparty.javascript.jscomp.PhaseOptimizer$NamedPass process
         [ERROR] INFO: checkRegExp
         [ERROR] Nov 19, 2012 2:33:30 AM com.google.gwt.thirdparty.javascript.jscomp.PhaseOptimizer$NamedPass process
         [ERROR] INFO: renameCssNames
         [ERROR] Nov 19, 2012 2:33:30 AM com.google.gwt.thirdparty.javascript.jscomp.PhaseOptimizer$NamedPass process
         [ERROR] INFO: replaceMessages
         [ERROR] Nov 19, 2012 2:33:30 AM com.google.gwt.thirdparty.javascript.jscomp.PhaseOptimizer$NamedPass process
         [ERROR] INFO: processDefines
         [ERROR] Nov 19, 2012 2:33:31 AM com.google.gwt.thirdparty.javascript.jscomp.Compiler normalize
         [ERROR] INFO: Normalizing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:11:06.333

您可能有一个`.js`包含哪个 gwt 闭包编译器选项正在尝试优化并报告错误。

解决 gwt 闭包编译器错误消息的步骤。

1）将编译器日志级别设置为`TRACE`

2) 将编译器标志严格设置为`true`

编译并验证是否找到任何附加信息。还迭代地删除任何 js 包含或第三方 jar 以隔离哪个是有问题的 jar。

注意：为了使这个更具挑战性的 GWT compileReport,compilerMetrics,soycDetailed 在 GWT Closure Compiler 开启时不起作用[http://code.google.com/p/google-web-toolkit/issues/detail?id=7475](http://code.google.com/p/google-web-toolkit/issues/detail?id=7475)

# z3 - QF_AUFBV 中是否支持多维数组？

> ID：13443259
> 
> 赞同：3
> 
> 时间：2012-11-18T18:36:29.937
> 
> 标签：z3, smt

我目前正在研究通过 C 程序将“路径”转换为相应的 SMT 查询的代码，以测试该路径的可行性。我有创建 SMT-LIB v1.2 查询的工作代码，并使用 Z3 2.11 和 QF_AUFBV 逻辑来解决查询。我目前正在将此代码移植到 Z3 4.3，以利用从那时起可能发生的任何速度进步，特别是因为我以前的代码似乎需要很长时间（大约 22 分钟）处理仅分配 24 个值的查询一个三维数组并检查数组中某个位置的值。

但是，似乎 QF_AUFBV 逻辑（从 SMT-LIB v2.0 标准开始）不再支持多维数组，或者更确切地说，其值也是数组的数组（可能更深）。一旦我从查询中取出“(set-logic QF_AUFBV)”行，Z3 4.3 就能够处理查询，但仍然需要很长时间。

我想知道是否有人知道为什么在 SMT-LIB v2.0 标准中停止支持多维数组，以及我可以使用哪些替代逻辑。当我取出指定 QF_AUFBV 理论的那条线时，我还想知道 Z3 到底在使用什么逻辑。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T19:06:31.210

SMT-LIB 标准从未支持多维数组。Z3 可以处理它们，但它们不是标准的一部分。SMT-LIB 1.0 是一种非常严格的格式，这就是为什么 Z3 有几个扩展来满足用户需求的原因。另一方面，SMT-LIB 2.0 是一种非常丰富的输入格式，解决了用户在使用 SMT-LIB 1.0 时遇到的主要问题。在 Z3 4.x 中，当在输入文件中指定逻辑时，Z3 会尝试符合 SMT-LIB 2.0 标准。删除后，将`set-logic`启用所有 Z3 特定的扩展。

正如您所描述的，数组 sort`(Array I1 I2 R)`可以编码为`(Array I1 (Array I2 R))`.

在性能方面，Z3 3.x 和 4.x 没有针对阵列理论的性能改进。它们对位向量有很多改进，但是当问题混合数组和位向量时它们不可用。一个新的数组理论在 TODO 列表中，但 Z3 团队中目前没有人致力于此。

# android - 活动 泄露了原本绑定在这里的ServiceConnection com.google.android.vending.licensing.LicenseChecker

> ID：13443261
> 
> 赞同：1
> 
> 时间：2012-11-18T18:36:40.410
> 
> 标签：android, android-lvl

我正在尝试`ServerManagedPolicy`在发布之前将其应用于我的应用程序。我已经`byte[]`为 Salt 定义了一个数组，得到了我的公钥，`getPackageName()`从`Settings.Secure.ANDROID_ID`. 我还在我的主 Activity 中定义了一个私有类，其中包含一个`LicenseCheckerCallback`实现。让我们谈谈代码：

**内`onCreate()`：**

```
public void onCreate(Bundle savedInstanceState) { // line 47
    String deviceId = Settings.Secure.getString(getContentResolver(),Settings.Secure.ANDROID_ID);

    checker = new LicenseChecker(this, new ServerManagedPolicy(this,
        new AESObfuscator(SALT, getPackageName(), deviceId)),
        BASE64_PUBLIC_KEY
    );
    checkerCallback = new MyCheckerCallback();

    checker.checkAccess(checkerCallback); // line 56 
```

**里面`onDestroy()`：**

```
@Override
protected void onDestroy() { // line 125
    super.onDestroy();
    checker.onDestroy();
} 
```

**`MyCheckerCallback`：**

```
private class MyCheckerCallback implements LicenseCheckerCallback {

    @Override
    public void allow(int reason) {
        if (isFinishing()) {
            return;
        }
        displayResult("Allow");
    }

    @Override
    public void dontAllow(int reason) {
        if (isFinishing()) {
            return;
        }
        displayResult("Don't allow");

        if (reason == ServerManagedPolicy.RETRY) {
            displayResult("Retry");
        } else {
            displayResult("Go to market");
        }
    }

    @Override
    public void applicationError(int errorCode) {

        displayResult((errorCode==LicenseCheckerCallback.ERROR_CHECK_IN_PROGRESS)+" progress");
        displayResult((errorCode==LicenseCheckerCallback.ERROR_INVALID_PACKAGE_NAME)+" package");
        displayResult((errorCode==LicenseCheckerCallback.ERROR_INVALID_PUBLIC_KEY)+" public");
        displayResult((errorCode==LicenseCheckerCallback.ERROR_MISSING_PERMISSION)+" permission");
        displayResult((errorCode==LicenseCheckerCallback.ERROR_NON_MATCHING_UID)+" uid");
        displayResult((errorCode==LicenseCheckerCallback.ERROR_NOT_MARKET_MANAGED)+" market");
    }
} 
```

它完全基于开发者教程中的这个[页面](http://developer.android.com/guide/google/play/licensing/adding-licensing.html#lc-impl)。`displayResult()`显示带有消息的警报：

```
private void displayResult(String message) {
    AlertDialog dialog = new AlertDialog.Builder(this)
            .setIcon(android.R.drawable.ic_dialog_alert).setTitle("Status")
            .setMessage(message)
            .setPositiveButton("Ok", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.dismiss();
                }
            }).create();
    dialog.show();
} 
```

设置完所有这些代码后，它会返回几个对话框：不允许和重试，在某些情况下，对应用程序施加一点压力后，它会在日志中显示此错误。

```
11-18 18:50:17.566: E/ActivityThread(23675): Activity com.package.test.TestActivity has leaked ServiceConnection com.google.android.vending.licensing.LicenseChecker@41a74ad0 that was originally bound here
11-18 18:50:17.566: E/ActivityThread(23675): android.app.ServiceConnectionLeaked: Activity com.package.test.TestActivity has leaked ServiceConnection com.google.android.vending.licensing.LicenseChecker@41a74ad0 that was originally bound here
11-18 18:50:17.566: E/ActivityThread(23675):    at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:965)
11-18 18:50:17.566: E/ActivityThread(23675):    at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:859)
11-18 18:50:17.566: E/ActivityThread(23675):    at android.app.ContextImpl.bindService(ContextImpl.java:1191)
11-18 18:50:17.566: E/ActivityThread(23675):    at android.app.ContextImpl.bindService(ContextImpl.java:1183)
11-18 18:50:17.566: E/ActivityThread(23675):    at android.content.ContextWrapper.bindService(ContextWrapper.java:394)
11-18 18:50:17.566: E/ActivityThread(23675):    at com.google.android.vending.licensing.LicenseChecker.checkAccess(LicenseChecker.java:150)
11-18 18:50:17.566: E/ActivityThread(23675):    at com.package.test.TestActivity.onCreate(TestActivity.java:56)
11-18 18:50:17.566: E/ActivityThread(23675):    at android.app.Activity.performCreate(Activity.java:5008)
11-18 18:50:17.566: E/ActivityThread(23675):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-18 18:50:17.566: E/ActivityThread(23675):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
11-18 18:50:17.566: E/ActivityThread(23675):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-18 18:50:17.566: E/ActivityThread(23675):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3512)
11-18 18:50:17.566: E/ActivityThread(23675):    at android.app.ActivityThread.access$700(ActivityThread.java:130)
11-18 18:50:17.566: E/ActivityThread(23675):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1201)
11-18 18:50:17.566: E/ActivityThread(23675):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-18 18:50:17.566: E/ActivityThread(23675):    at android.os.Looper.loop(Looper.java:137)
11-18 18:50:17.566: E/ActivityThread(23675):    at android.app.ActivityThread.main(ActivityThread.java:4745)
11-18 18:50:17.566: E/ActivityThread(23675):    at java.lang.reflect.Method.invokeNative(Native Method)
11-18 18:50:17.566: E/ActivityThread(23675):    at java.lang.reflect.Method.invoke(Method.java:511)
11-18 18:50:17.566: E/ActivityThread(23675):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-18 18:50:17.566: E/ActivityThread(23675):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-18 18:50:17.566: E/ActivityThread(23675):    at dalvik.system.NativeStart.main(Native Method) 
```

你以前遇到过这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T22:27:23.940

啊，只是我的运气。最后，我让它工作了。重试的问题在于，开发者控制台设置为在不久前（大约一个小时左右）返回常规答案，并且设备仅连接到 3G。它没有正确连接到服务器。一旦我转移到 Wi-Fi，响应开始变得更有用（`NOT_MARKET_MANAGED`在我的情况下，因为应用程序尚未上传）。

第二个问题，即记录的错误之一，只是在打开 Dialog 的情况下打开设备时出现的。

# haskell - `... | 是什么意思？类型类声明中的 ab -> c` 是什么意思？

> ID：13443262
> 
> 赞同：4
> 
> 时间：2012-11-18T18:36:43.833
> 
> 标签：haskell, typeclass

> **可能重复：**
> [什么是“|” 在 Haskell 类定义中？](https://stackoverflow.com/questions/2675655/whats-the-for-in-a-haskell-class-definition)

在以下（来自`Data.HList.HListPrelude`，我如何解释该`| l l' -> l''`部分？

```
class HAppend l l' l'' | l l' -> l''
 where
  hAppend :: l -> l' -> l'' 
```

它是标准 Haskell（即 Haskell 2010）的一部分还是扩展？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T18:41:08.073

[它是一个名为“功能依赖](http://www.haskell.org/haskellwiki/Functional_dependencies)”的扩展，您以后可以通过查看文件顶部来发现它。

它本质上说是由和`l''`唯一确定的。`l``l'`

它是必需的，因为它`HAppend`是一个多参数类型类（也是一个扩展）。

# android - 为什么加速度计示例中的球总是从 0,0 开始？

> ID：13443267
> 
> 赞同：0
> 
> 时间：2012-11-18T18:37:38.667
> 
> 标签：android, flash, air, accelerometer

我刚刚开始在 flash cs6 中使用加速度计，从模板开始：Air for Android > Accelerometer

它的工作原理很花哨，但无论我将球放在舞台上的哪个位置开始，应用程序都会在 0,0 处打开球。（然后球立即捕捉到舞台内，因为代码阻止它出去。）

我没有看到任何代码可以让球从它的起点到达那个位置。移动代码是这样的：

```
function moveBall(evt:Event){
ball.x -= accelX*30;
ball.y += accelY*30;
} 
```

所以我希望它将起点保持在我在时间轴中看到的舞台上，并根据加速度计开始从那里移动它。有谁知道它为什么不这样做？如果我在设备上或在 AIR 调试启动器中进行测试，同样的事情。为什么哦为什么！？

# javascript - jquery中的javascript错误：string.replace（rmsPrefix，“ms-”）javascript错误

> ID：13443269
> 
> 赞同：0
> 
> 时间：2012-11-18T18:37:56.640
> 
> 标签：javascript, jquery, runtime-error

我在本地看到此错误。当我附加一些特定的 DOM 时会发生这种情况：

```
TypeError: string is undefined  

return string.replace( rmsPrefix, "ms-" ).replace( rdashAlpha, fcamelCase );

jquery.js (line 622) 
```

它没有出现在生产中，但它不时在我本地发生。我调试了它，但找不到任何东西。我使用 jquery 1.8.2。

在这里发布它，希望其他人已经遇到过这个问题。（我不期待解决方案）

这是导致它的代码：

```
flash = function(type, message, secondaryMessage) {
    var flash_location = $('.flash-location');
    var secondary = '';
    type = type || 'error';
    message = message || (type == 'success' ? 'Success' : 'Error');
    if(secondaryMessage){
        secondary = '<p class="secondary">'+secondaryMessage+'</p>';
    }
    var top = 5;
    flash_location.append($('<div class="flash"><div class="flash-content ' + type + '" style="top:'+top+'px;"><table><tr><td class="flash-icon"></td><td><p class="primary">' + message + '</p>'+secondary+'</td></tr></table></div></div>').fadeIn('normal'));
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:34:36.480

如果您`append`使用 DOM 构建元素，问题是否仍然存在？

```
flash = function(type, message, secondaryMessage) {
    var flash_location = $('.flash-location'),
        top = 5,
        table = $('<table />'),
        tr = $('<tr />'),
        td = $('<td />'),
        p = $('<p />'),
        div = $('<div />'),
        td1 = td.clone().addClass('flash-icon'),
        td2 = td.clone().append(p.clone().addClass('primary')),
        flashContent = div.clone().addClass('flash-content').addClass(type).css('top', top + 'px'),
        flash = div.clone().addClass('flash');
    type = type || 'error';
    message = message || (type == 'success' ? 'Success' : 'Error');
    if(secondaryMessage){
        td2.append(p.clone().addClass('secondary').text(secondaryMessage));
    }
    tr.append(td1).append(td2);
    table.append(tr);
    flashContent.append(table);
    flash.append(flashContent);
    flash_location.append(flash).fadeIn('normal'));
}; 
```

# javascript - webkit 遮罩

> ID：13443270
> 
> 赞同：0
> 
> 时间：2012-11-18T18:38:07.150
> 
> 标签：javascript, jquery, html, css, mask

我想让一张照片淡化成白色。我使用了蒙版并获得了预期的效果[http://jsfiddle.net/jspence29/8bDMp/](http://jsfiddle.net/jspence29/8bDMp/)但问题是我想让图像覆盖整个页面（宽度我不关心高度），即使你调整窗口大小。像背景大小：封面；. 但我不能这样做，因为你不能把面具放到背景中。如果我将 100% 的宽度放入 html 中，它对于屏幕来说就太大了。所以我想知道是否有办法解决这个问题，javascript或jquery之类的。谢谢！

```
<html>
<head>
<title> 
Singapore - gallery
</title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="viewport" content="width=device-width, initial scale=1.0">
<style>
*  {

  margin: 0;
  padding: 0;

}
#background img {

  -webkit-mask-image: 
  -webkit-gradient(linear, left top, left bottom, 
        from(rgba(0,0,0,1)), 
        to(rgba(0,0,0,0)))
}
</style>
</head>
<body>
<div id="background"> <img src="gallery.jpg" /></div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:43:45.887

将宽度设置为 100% 对我来说很好。添加 `width: 100%;`到 `#background img`

[http://jsfiddle.net/8bDMp/1/](http://jsfiddle.net/8bDMp/1/)

# ruby - FileUtils.mkdir 无法创建目录

> ID：13443271
> 
> 赞同：3
> 
> 时间：2012-11-18T18:38:15.883
> 
> 标签：ruby

我确定这不是权限问题，因为它实际上可以创建一些目录。

例子：

```
FileUtils.mkdir "/tmp/foo" 
```

效果很好

但

```
FileUtils.mkdir "/tmp/bar/foo" 
```

因错误而失败

```
Errno::ENOENT: No such file or directory - /tmp/bar/foo 
```

这对我来说没有意义，因为我知道它不存在，这就是我想创建它的原因。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T18:39:15.160

你需要`FileUtils.mkdir_p "/tmp/bar/foo"`

`mkdir_p`行为与 UNIX 完全相同`mkdir -p`- 如果某些目录不存在，它将被创建。

我敢打赌没有`/tmp/bar`目录，Ruby 无法在不存在的文件夹中创建目录。

# ipad - 如何通过 ActionScript 将图片从应用程序存储移动到 iPad 上的相机胶卷（照片文件夹）？

> ID：13443277
> 
> 赞同：1
> 
> 时间：2012-11-18T18:38:37.850
> 
> 标签：ipad, actionscript, move, image

我目前正在为 iPad 编写一个艺术应用程序。用户应该能够将他创建的图片保存到他的 iPad 的照片文件夹中。我尝试使用 CameraRoll API 来做到这一点，但遗憾的是它只将图片保存为 .jpg，由于压缩，这基本上会破坏它。

所以我尝试将图片保存为应用程序本身的存储中的 .png 文件，这似乎可行。但我现在不知道如何将图片移动到照片文件夹。

这是我的代码：

```
var flattenPicture:BitmapData = canvas.flatForSave();
var imgByteArray:ByteArray = pngenc.encode(flattenPicture);

var outputFile:File = File.applicationStorageDirectory.resolvePath("Bild.png");
var outputStream:FileStream = new FileStream();
outputStream.open(outputFile, FileMode.WRITE);
outputStream.writeBytes(imgByteArray, 0, imgByteArray.length);
outputStream.close();

var loadFile:File = File.applicationStorageDirectory.resolvePath("Bild.png");
var fotoFile:File = new File();
fotoFile.nativePath = "/var/mobile/Media/DCIM/Bild.png";
loadFile.moveTo(fotoFile,true); 
```

但这似乎不起作用。

我真的很感激任何帮助！非常感谢您！

# android - TabBar 高度与 Android 4.1 (Galaxy Nexus) 中的 ActionBar (Sherlock) 高度不同

> ID：13443284
> 
> 赞同：0
> 
> 时间：2012-11-18T18:39:45.633
> 
> 标签：android, android-actionbar, actionbarsherlock, android-tabs

正如标题所说，由于某种奇怪的原因，TabBar 的高度没有跟随 ActionBar 的高度，从而切割了选项卡。

我正在使用 ActionBar Sherlock，我已经在许多设备上进行了测试，并且问题仅出现在运行 Android 4.1 的 Galaxy Nexus 中。另外，我在横向中尝试过，其中选项卡与 ActionBar 集成在一起，根本没有问题，所以问题是 TabBar 的高度。

谢谢！

# c# - 启动和停止秒表是否需要一些时间？

> ID：13443287
> 
> 赞同：4
> 
> 时间：2012-11-18T18:39:59.790
> 
> 标签：c#, wpf, time, stopwatch

我有一个非常具体的问题，我需要回答一个非常具体的性能测试。我将简化代码，使其更容易理解。

我做了很多计算（几千万），所有这些都是在本身不太长的循环中完成的，我需要总计算时间。然而，所有的计算都不是一个接一个地直接完成的，并且一些额外的代码“介于”每个循环之间。

我需要的是所有循环的总时间（包括声明和初始化 i、递增它以及与示例中的 100 进行比较）。为了测量我`Stopwatch`在每个循环之前直接开始并在循环之后直接停止它的时间。但这两个动作是否需要一些可能相关的时间？

**例子：**

```
Stopwatch sw = new Stopwatch();

sw.Start();
//how long does it now take until for loop is reached?
for(int i = 0; i < 100; i++)
{
    //some calculations
}
//how much time does it take to stop sw?
sw.Stop(); 
```

当然，如果所有循环都直接一个接一个地完成并不重要，我可以从第一个循环的开头开始并在最后一个循环的结尾停止，但这在这里是不可能的。

我知道这个问题非常具体，但我希望有人可以在这里帮助我，因为来自大约 5000 万个循环的重要时间可能会在某种程度上影响我的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T18:45:08.823

> 我需要的正是所有循环的总时间。为了测量我在每个循环之前直接启动秒表并在循环之后直接停止它的时间。但这两个动作是否需要一些可能相关的时间？

它们需要一些时间——就像在每次循环迭代中的初始化`i`、增量以及与 100 的比较一样。在计算中几乎没有什么是*瞬时的。*

它是否*相关*是另一回事。除非您的计算非常微不足道，否则这在您的时间安排中不太可能很重要。您可以*尝试*为空循环计时，但 JIT 编译器可能会完全摆脱循环本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T18:50:44.967

好吧，你可以试试这个并自己检查，在我的（性能很差的）计算机上，第一次执行大约需要 0.0006 毫秒，下一次执行大约需要 0.0001 毫秒。自己试试：

```
Stopwatch sw = new Stopwatch();
sw.Start();
sw.Stop();
TimeSpan ts = TimeSpan.FromTicks(sw.ElapsedTicks);
string elapsed = ts.TotalMilliseconds.ToString(); 
```

# java - 在 Java 应用程序中集成 MySQL + Webserver + PHP

> ID：13443291
> 
> 赞同：3
> 
> 时间：2012-11-18T18:40:36.087
> 
> 标签：java, php, webserver, xampp, desktop-application

将 MySQL 数据库（无 SQLite）和具有 PHP 功能的 Apache 等 Web 服务器集成到 Java 桌面应用程序中的最佳方法是什么？我需要能够通过网络浏览器从 Java 和网络服务器访问数据库，PHP 正在查询与 Java 相同的 MYSQL 数据库。我想以某种方式将 XAMPP 打包到应用程序安装程序中，然后从 Java 调用特定的启动批处理文件，但这对我来说似乎是一种 hackish 方式。这样的事情通常是如何完成的？

提前致谢，

斯特凡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:02:13.977

用 Jetty替换 Apache，[Jetty](http://jetty.codehaus.org/jetty/ "码头")是一个用 java 构建的可嵌入 Web 服务器。如果 Jetty 链接到 php 可执行文件，它可以提供 php 页面。MySQL 根本不是一个很好的选择——如果您需要一个便携式的高性能解决方案，请使用 MongoDB，您可以简单地打包并与您的应用程序一起运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:05:45.067

这是一个有点奇怪的想法。但是，如果您构建安装程序解决方案，这可能是一个解决方案。例如： http: [//www.advancedinstaller.com/java.html](http://www.advancedinstaller.com/java.html)

# c++ - 在 C++ 中为 stl map 重载 [ ] 运算符

> ID：13443293
> 
> 赞同：0
> 
> 时间：2012-11-18T18:40:41.060
> 
> 标签：c++, map

```
class foo{

public:
    int a, b, c;
    double val;

    foo(int a){
        ...
    }

...
} 
```

现在我想做：

```
map <foo*, double> mymap;

foo fa(2);
foo fb(4);

mymap[fa] = 1.0;
mymap[fb] = 2.0; 
```

显然我得到了 [ ] 对于类型 foo 未定义的错误。但是我如何重载这个操作符呢？就此而言，我如何获得指向 foo 的指针？因为我假设它没有定义，因为 foo 是一个自定义类

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T18:43:35.497

密钥必须是 type `foo*`。所以你需要这样写：

```
mymap[&fa] = 1.0;
mymap[&fb] = 2.0; 
```

但请记住，**如果** `fa`和`fb`是本地对象，那么当您从函数返回时，它们将被销毁。所以你不应该`mymap`从函数中返回，因为一旦函数返回，用作键的对象就不存在了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T18:42:40.367

这里不需要超载任何东西。您的地图需要指向 的指针`foo`，因此您需要将指针传递给`foo`。您可以像这样修复您的代码：

```
mymap[&fa] = 1.0;
mymap[&fb] = 2.0; 
```

**请注意**，您必须绝对确定`foo`对象的生存时间与地图一样长或更长，否则后者最终会出现悬空指针。例如，这将以眼泪结束：

```
map <foo*, double> mymap;

{
  foo fa(2);
  foo fb(4);
  mymap[&fa] = 1.0;
  mymap[&fb] = 2.0;
} // fa and fb cease to exist

// state of mymap is messed up here. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T18:53:28.927

在地图中保留和使用指向某些本地对象的指针可能非常**危险**。首先，`std::map`当对象超出范围时，您可能会通过取消引用键来使您的应用程序崩溃。此外，它真的很难使用，而且在大多数情况下不是程序员想要的。在你的情况下：

```
auto it = mymap.find(&foo(2)) 
```

不会编译并且：

```
foo fc(2);
auto it = mymap.find(&fc); 
```

不会在容器内找到任何值（`fa`具有相同的值但指针不同）。真的是你想要的吗？

这就是为什么我会建议重新定义你`std::map`将`std::map<foo, double> mymap;`保留和比较`foo`价值的原因。要使其工作，您将需要实现`foo::operator<()`或提供您自己的排序算法`std::map`作为模板参数。第一种情况如下所示：

```
class foo {
  int a, b, c;
  double val;
public:
  foo(int a) {}
  bool operator<(const foo &other) const
  { return a < other.a && b < other.b && c < other.c; }
};

int main()
{
  std::map<foo, double> mymap;

  foo fa(2);
  foo fb(4);

  mymap[fa] = 1.0;
  mymap[fb] = 2.0;

  auto it = mymap.find(foo(2));
} 
```

# php - 如果我已经有模型、视图和控制器文件，如何在 yii 上构建 MVC？

> ID：13443296
> 
> 赞同：1
> 
> 时间：2012-11-18T18:41:01.183
> 
> 标签：php, yii, yii-components, framework-migration

开始学习 yii，阅读一些文章和最流行的教程。使用这个[http://www.yiiframework.com/tour/](http://www.yiiframework.com/tour/)创建了第一个应用程序。现在我想做真正的注册授权，找到了包含model.php、view.php和controller.php的非常不错的例子，代码对我来说似乎很清楚。我也意识到第一个应用程序结构是什么意思，但我不知道如何实现我找到的这些文件。我应该以某种特定的方式使用 yiic 吗？请给我一个想法，我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:36:10.723

最常见的答案是做[博客教程](http://www.yiiframework.com/doc/blog/1.1/en/start.overview) 它涵盖了 Yii 的每个基本概念，之后您应该了解如何实现您在自己的应用程序中找到的文件。仔细阅读它，而不是试图飞越它，大多数时候，如果你走错路或不明白某些东西，那是因为你在教程中错过了它。

# ruby - Ruby：加密目录（文件夹）

> ID：13443297
> 
> 赞同：0
> 
> 时间：2012-11-18T18:41:02.727
> 
> 标签：ruby, filesystems, directory

有没有办法使用 ruby​​ 加密目录。

要详细了解：

我想创建一个您只能通过输入密码访问的目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:12:34.490

一个例子是与 OS X 捆绑在一起的[FileVault](http://en.wikipedia.org/wiki/FileVault)。类似的事情可以在其他平台上使用相同的方法、加密的磁盘映像和[环回设备来](http://www.walkernews.net/2007/07/01/create-linux-loopback-file-system-on-disk-file/)完成。

另一种选择是利用[FUSE](http://fuse.sourceforge.net/)，它允许您在用户空间中创建一个文件系统，并且可以使用任何可以响应内核调用的语言。

不过，我这样做时会非常谨慎。加密的目的是让事情隐藏起来，如果你在整个系统内存中喷洒这个文件系统的未加密版本，你就违背了目的。像 FileVault 这样的大多数“安全”文件系统所做的不仅仅是加密文件。

# ruby-on-rails - 在表单上单击提交后，Rails 自动更新数据库属性

> ID：13443299
> 
> 赞同：0
> 
> 时间：2012-11-18T18:41:10.097
> 
> 标签：ruby-on-rails, ruby, forms, simple-form

我在 rails 中使用 simple_form 来创建某些事件。要创建新事件，您需要以用户身份登录。该表单将要求用户输入事件名称、开始日期和结束日期。当用户单击提交按钮时，我希望表单自动更新数据库中的属性 user_id。

现在在数据库中，事件表中的 user_id 字段始终设置为空。但是我需要将此属性设置为：

`events.user_id = current_user.id`

这是我的事件表以获取更多信息：![在此处输入图像描述](../Images/084ed9a2291b7200eff56221b0ff0c78.png)

注意：我在此数据库中手动输入了 user_id 的值。

**问题：**如何在用户单击提交后更新数据库属性？或者是否有默认方式在创建新事件时始终设置 user_id？

这是 new.html.erb 事件视图中的代码

```
<%= simple_form_for(@event) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :name %>
    <%= f.input :start_at %>
    <%= f.input :end_at %>
  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:44:15.293

在事件控制器的 create 方法中，添加您的

```
events.user_id = current_user.id 
```

在保存之前。

例如，如果您使用then do创建事件（在`def create`方法中）， 您可能可以这样做，rails 会找出 id。`@event = Event.new(params[:event])``@link.user_id = current_user.id on the next line`
`@link.user = current_user`

# sql - DB2 IN-list 访问、索引扫描、TS 扫描

> ID：13443301
> 
> 赞同：0
> 
> 时间：2012-11-18T18:41:33.710
> 
> 标签：sql, db2

我正在研究 IBM DB2，我有一个关于访问类型的问题。

我不确定在查询中决定 IN-list access 、 Index Scan 、 TS scan 的方式。

例如，我们有

```
SELECT * FROM T
 WHERE C1=1 AND C2 IN (1,2,3)
    AND C3>0 AND C4<100; 
```

然后，它将是 IN 列表访问，因为查询包含 IN 语句。但是，如果有索引，C1 和 C3 或可能是索引扫描。为什么我们必须说这个查询是“IN 列表访问”？

你能给我一个索引扫描和TS扫描的例子吗？

我真的不明白这部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T23:57:11.620

判断您获得哪种访问路径的唯一方法是从`EXPLAIN PLAN`. 您无法查看查询（不了解可用索引、列基数等）并确定优化器会做什么。

DB2 的优化器是基于成本的，它将选择它计算出的访问计划在 CPU、磁盘访问和内存方面是最有效的。使用`EXPLAIN PLAN`或 Visual Explain 工具将允许您查看优化器选择的内容。

# regex - 使用新的 url 结构将 301 从一个域重定向到新域的正确方法？

> ID：13443303
> 
> 赞同：0
> 
> 时间：2012-11-18T18:41:59.267
> 
> 标签：regex, .htaccess, mod-rewrite, http-status-code-301, seo

我们正在将目录从一个域移动到一个新域。我们将使用永久 301 重定向来实现 SEO 目的。我们还将更改我们的 url 命名方案。这将需要应用于数百页。试图找出正则表达式 / 301 来完成以下任务。以前从未这样做过，所以我真的想确保我不会弄错。

```
olddomain.com/doctor_directory/City_State_type_doctor.html

newdomain.com/doctor_directory/city-state-type-doctor.html 
```

*   新的域 url 更改为全**小写**
*   新的域文件名现在使用**连字符而不是下划线**

在此先感谢任何可以帮助最有效的 reg ex 完成此任务的人！

参考： [http ://www.seomoz.org/learn-seo/redirection](http://www.seomoz.org/learn-seo/redirection)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:18:44.610

```
RewriteEngine On
RewriteBase /
Options +FollowSymlinks

RewriteCond %{HTTP_HOST} ^(.*\.)?olddomain.com$ [NC]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)_([^/]*)$ $1-$2 [QSA,N]

RewriteCond %{HTTP_HOST}:%{SERVER_PORT}s ^(.*\.|)olddomain.com:(443(s)|\d+s)$
RewriteRule ^/?(.*)$ http%3://${lc:%1}newdomain.com/${lc:$1} [R=301,QSA,L] 
```

# ruby-on-rails - 如何设置 simple_form 输入的值并分配真假值

> ID：13443310
> 
> 赞同：0
> 
> 时间：2012-11-18T18:42:22.387
> 
> 标签：ruby-on-rails, ruby

首先，我是 Ruby 新手，这可能是错误的方法，但是......

我正在尝试使用简单的形式在我的选择中设置两个值。到目前为止，我有：

```
<%= f.input :rsvp, :collection => [:attending, :not_attending], :prompt => 'Choose one...' %> 
```

这很好用，我可以加载页面，选择一个选项。现在 RSVP 是我数据库中的一个字段：

**回复数据库**

```
class CreateReplies < ActiveRecord::Migration
  def change
    create_table :replies do |t|
      t.string :name
      t.text :menu
      t.integer :rsvp

      t.timestamps
    end
  end
end 
```

**回复.rb**

```
class Reply < ActiveRecord::Base
  attr_accessible :menu, :name, :rsvp, :user_id
  belongs_to :user
end 
```

我的想法是从 :string 更改 rsvp，我必须在其中输入参加 / 不参加 :integer ，这样我就可以在两个选项上选择真 / 假值。现在就像我说的那样，我对此很陌生，但在我看来，这可能是如何去做这样的事情。

因为我要尝试计算有多少人参加/不参加并显示在索引上。抱歉，如果有任何遗漏，请告诉我并更新问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:02:26.323

我认为你走对了。您可以为用户选择创建一个组单选按钮，尝试：

```
<%= f.input :rsvp, :collection => [['Attending',1], ['Not Attending',0]], as: :radio_buttons, label_method: first, value_method: last, :prompt => 'Choose one...' %> 
```

或者这样：

```
<%= f.collection_radio_buttons :rsvp, [[true, 'Attending'] ,[false, 'Not Attending']], :first, :last %> 
```

# javascript - 由于 AJAX 加载 JavaScript

> ID：13443311
> 
> 赞同：0
> 
> 时间：2012-11-18T18:42:25.987
> 
> 标签：javascript, ajax

我制作了一个完全基于 AJAX 的网站，当您访问 url 时会获取快照，但会使用 AJAX 加载未来的内容。然而，有些页面需要额外的 JS 文件。因此，我正在考虑制作一个动态加载器。（我使用 AJAX 的主要原因是速度……）

我需要卸载不需要的 JS 文件吗？如果我只是继续添加 JS 文件而不卸载不需要的文件，动态加载会减慢网站速度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:49:23.653

一般来说，没有。但是根据脚本的作用，可能会有例外。例如，如果其中一个脚本设置了一个间隔，或者绑定了一个事件处理程序，那么一旦您不再需要它们，您可能想要关闭这些东西。

另一方面，如果脚本只是向页面添加 API（例如 jQuery 插件），那么您不必担心它们。只要确保不要多次加载它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:52:17.923

如果从 DOM 中删除标签，则不会从内存中删除标签中加载的代码。所以这不应该是你的动力。并且有研究表明，将这些标签长期保存在 DOM 中并不是一个好主意（对不起，我现在找不到源）。所以你可能想删除它们。

但是，不要编写自己的脚本加载器。有很多很棒的 JS 加载器。这里有两个基于 AMD 模块，一种将代码组织成模块的方法：

1.  RequireJS：[http ://requirejs.org/](http://requirejs.org/)
2.  卷曲：http: [//github.com/cujojs/curl](http://github.com/cujojs/curl)

这是另一个只加载脚本的：

1.  [实验室： http](http://labjs.com/) ://labjs.com/

最后，YUI 库还加载 JS 文件，有自己的模块系统，还有助于通过 Ajax 加载部分网页：

1：YUI库：http: [//yuilibrary.com/](http://yuilibrary.com/)

# r - 在 R 中绘制狄拉克和经验分布的混合图

> ID：13443312
> 
> 赞同：1
> 
> 时间：2012-11-18T18:42:26.233
> 
> 标签：r, ggplot2

我的数据看起来有点像这样：

```
myData <- data.frame(dist1=rep(0.5, 1000), dist2=rnorm(1000,0.8,0.01), dist3=rnorm(1000,0.7,0.05)) 
```

请注意， dist1 仅包含数字 0.5。

**问题：你将如何在 R 中使用 ggplot 绘制这些数据？**

**我失败的尝试：**

如果我尝试 geom_density 那么它对 dist1 不公平：

```
ggplot(melt(myData), aes(x=value, colour=variable)) + geom_density() 
```

![在此处输入图像描述](../Images/36be10dae2fd60d0be416e4187906385.png)

我知道我可以调整内核宽度，但随着 dist1 变得尖尖，dist2 和 dist3 开始分解 ![在此处输入图像描述](../Images/7d905e39f815f5ba0d6229a5501a540d.png)

如果我尝试 geom_freqpoly ，那么它会自动选择 bin 边界并导致 dist1 峰值位于 0.5 的一侧，从而使期望它达到 0.5 的读者感到困惑：

```
ggplot(melt(myData), aes(x=value, colour=variable)) + geom_freqpoly() 
```

![在此处输入图像描述](../Images/1668abb9fb009ca6efa8e16c0c59b093.png)

我知道我可以更改 bin 宽度，但不能更改 bin 分区本身，否则我会确保 bin 分区在 0.5 的两侧等距。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T21:55:52.537

我找到了一种通过使用带有 line geom 的 stat_bin 而不是 geom_freqpoly 来操作 bin 的方法。似乎给出了一个大大改进和可调的结果：

```
ggplot(melt(myData), aes(x=value, colour=variable)) + 
  stat_bin(origin = 0.491, binwidth = 0.006, geom='line', position='identity') 
```

![在此处输入图像描述](../Images/62f03de10cad5bf780df96a487f0d224.png)

# java - java集合对应的ruby数据结构实现

> ID：13443315
> 
> 赞同：2
> 
> 时间：2012-11-18T18:42:36.640
> 
> 标签：java, ruby, data-structures

我来自一个 Java 世界，通常会考虑一个所需的集合接口（集合、列表、映射），并根据不同的用例选择要使用的具体实现，例如[Java Question 的参考](https://stackoverflow.com/questions/48442/rule-of-thumb-for-choosing-an-implementation-of-a-java-collection)

我想知道是否有对应于 java 中可用的类似 ruby​​ 数据结构的很好的总结？

如果没有，有人可以提供人们最喜欢的实现：

1.  此处在页面中间的表格中列出[http://docs.oracle.com/javase/1.5.0/docs/guide/collections/overview.html](http://docs.oracle.com/javase/1.5.0/docs/guide/collections/overview.html)
    2.  其他一些，比如说队列：阻塞、延迟、链接阻塞队列、循环等特里树等

如果大多数来自 ruby​​ 标准库，那就更好了，否则流行的 gem 也很好。

我的目的是在 ruby​​ 世界中选择好的数据结构实现时有一个参考的地方

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:49:22.453

ruby 已将s 与它们[排序的对应物一起](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/set/rdoc/SortedSet.html)[设置](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/set/rdoc/index.html)。[数组](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/array/rdoc/index.html)类处理来自 Java的列表等效项，并且有一个[哈希](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/hash/rdoc/index.html)类可以像映射一样发挥作用。还要别的吗？发表评论。

# javascript - Javascript Regex：验证电话号码

> ID：13443317
> 
> 赞同：1
> 
> 时间：2012-11-18T18:42:56.790
> 
> 标签：javascript, jquery, regex

我想验证一个必须以 09 开头的 11 位电话号码（即 09123456789），使用 javascript 进行客户端检查。

这是我的代码：

```
function validatePhone(number) {
    var re = /^09[0-9]{9}$/;
    return re.test(number);
} 
```

据我一开始就知道它工作正常，但现在它对我使用的任何数字都无效。有谁知道我的代码有什么问题？顺便说一句，当我使用 jQuery 时，如果有更好的 jquery 方法会更好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T18:46:10.123

我假设您在参数中发送一个整数，将其作为字符串传递

```
function validatePhone(number) {
    var re = /^09[0-9]{9}$/;
    return re.test(number);
}

​alert(validatePhone('09123456789'));​​​
// returns true    
alert(validatePhone(09123456789));    
// returns false    ​ 
```

[http://jsfiddle.net/3bFwd/](http://jsfiddle.net/3bFwd/)

# ruby - 检索 Google Checkout CSV（无 API）

> ID：13443319
> 
> 赞同：0
> 
> 时间：2012-11-18T18:43:13.423
> 
> 标签：ruby, mechanize, google-checkout, http-status-code-400

我正在尝试检索 Google Checkout 报告（将数据下载到电子表格 (.csv)）。不幸的是，我不能使用 API（它只保留给英国和美国帐户......！）

我有一个用 Mechanize 和 Ruby 制作的脚本，但我有一个错误：“Net::HTTPBadRequest 1.1 400 Bad Request”。

这是我的代码：

```
require 'rubygems'
require 'mechanize'
require 'logger'

agent = Mechanize.new { |a| a.log = Logger.new(STDERR) }
agent.user_agent_alias = 'Mac Safari'
page = agent.get 'https://checkout.google.com/sell/orders'

form = page.forms.first
form.Email = 'email@gmail.com'
form.Passwd = 'password'
page = agent.submit(form, form.buttons.first)

form = page.forms.last
p form
form['start-date'] = "2012-11-16"
form['end-date'] = "2012-11-17"
form['column-style'] = "EXPANDED"
#form['_type'] = "order-list-request"
#form['date-time-zone'] = "America/Los_Angeles"
#form['financial-state'] = ""
#form['query-type'] = ""
p form

begin
  page = agent.submit(form, form.buttons.first)
rescue Mechanize::ResponseCodeError => ex
  puts ex.page.body
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T20:41:23.860

感谢 pguardiario 和 Charles 代理，我发现了我的错误……有一个多余的字段！

# windows-7 - 液晶电视停止工作（dvi 到 hdim）

> ID：13443325
> 
> 赞同：0
> 
> 时间：2012-11-18T18:44:06.763
> 
> 标签：windows-7, hardware, multiple-monitors

我有一个双显示器设置，1：通过 vga 连接的计算机显示器 2：通过 dvi->hdim 电缆连接的三星液晶电视

直到昨天，这个设置工作得很好。今天，当我启动 Windows 7 时，bios & windows loading ... 屏幕在我的液晶电视上显示正常

但是，当 Windows 加载并显示我的桌面时，我的电视变成空白，我只能在电脑显示器上看到桌面。

当我转到“屏幕分辨率”和“检测”时，我只看到我的电脑显示器列出。

据我所知，没有安装新的显示驱动程序，我使用的是 nvadia gt300。

此外，由于我的电视上确实出现了 bios/欢迎屏幕，我可以根除电视/电缆的故障。

有没有人遇到过类似的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T19:52:14.057

我有完全相同的问题。我卸载并重新安装了驱动程序，卸载了 11/18 Windows 更新，我关闭并再次打开显示器至少十几次，就像拔下并重新插入 HDMI 电缆一样 - 没有任何效果。然后，出于绝望，我拔掉了显示器的电源线，重新插上，然后……又来了！

！

克里斯

# sql-server - SQL Server Management Studio 不允许我向表中添加索引

> ID：13443326
> 
> 赞同：125
> 
> 时间：2012-11-18T18:44:12.283
> 
> 标签：sql-server, sql-server-2008, sql-server-2012, ssms, sql-server-2014

当我右键单击表中的索引文件夹时，“新索引”菜单项显示为灰色。我不明白为什么。为了以防万一，我删除了表中的所有数据，并刷新并重新启动了 SSMS，但没有运气。我正在使用 SQL Server 2012 商业智能 SP1 CTP。

* * *

## 回答 #1

> 赞同：275
> 
> 时间：2012-11-19T02:57:36.907

**解决方案：**关闭表设计器和数据库图表，然后重试。如果这没有帮助，请关闭 Management Studio 中的所有窗口。

**原因：**当表被设计器窗口锁定时，“新索引”选项被禁用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-18T18:54:59.627

这可能是一个权利问题，或者你可能已经断开连接。尝试使用代码添加索引；这可能会解决您的问题，或者报告一个更有意义的例外情况，以便您可以使用：

```
create index ix_MyTable_Column1
on dbo.MyTable(Column1 asc) 
```

[http://msdn.microsoft.com/en-us/library/ms188783.aspx](http://msdn.microsoft.com/en-us/library/ms188783.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-16T16:42:27.223

如果在设计器中打开，请关闭表。右键单击表的索引，然后选择全部重建。这将解决它...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-19T10:31:51.917

在我的例子中，这是一个视图，而不是一个表，这是因为视图不是使用模式绑定创建的。我使用模式绑定对其进行了更改，然后我可以将索引添加到视图中。HTH。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-09-11T07:43:42.567

表没有空间索引要求的聚集主键。在创建空间索引之前，请确保表中存在主键列。

# ruby-on-rails-3 - 捆绑更新卡住了

> ID：13443332
> 
> 赞同：6
> 
> 时间：2012-11-18T18:44:29.027
> 
> 标签：ruby-on-rails-3, rubygems, gem, bundler, gemfile

我做事有困难`bundle update`

它似乎卡在这 3 个奇怪的宝石上.. **[“spicycode-rcov”、“jnunemaker-crack”、“tenderlove-frex”]**我不知道它们的用途或它们来自哪里..

这是`bundle update --verbose`卡住的最后几行

```
Unmet Dependencies: ["spicycode-rcov", "jnunemaker-crack", "tenderlove-frex"]
Fetching gem metadata from https://rubygems.org/
Query List: ["spicycode-rcov", "jnunemaker-crack", "tenderlove-frex"]
Query Gemcutter Dependency Endpoint API: spicycode-rcov jnunemaker-crack tenderlove-frex
Fetching from: https://rubygems.org/api/v1/dependencies?gems=spicycode-rcov,jnunemaker-crack,tenderlove-frex
HTTP Success
Query List: [] 
```

我的宝石文件是

```
source 'https://rubygems.org'
ruby "1.9.3"

gem 'rails'

gem 'pg'

gem 'devise'
gem 'devise_invitable'

gem 'thin'

gem 'geocoder'

group :assets do
    gem 'sass-rails',   '~> 3.2.3'
    gem 'coffee-rails', '~> 3.2.1'
    gem 'bootstrap-sass-rails'

    gem 'uglifier', '>= 1.0.3'
end

gem 'paperclip'
gem 'aws-sdk'

gem "asset_sync"

group :development, :test do
    gem "eventmachine", "~> 1.0.0.beta.4.1", :platform => [:mswin, :mingw]

    gem 'rails-erd'
    gem 'annotate', ">=2.5.0" 
    gem 'pry-rails'
    gem 'lol_dba'
    gem "rspec-rails"
    gem "factory_girl_rails"
    gem "guard-rspec"

end

group :test do

    gem "faker"
    gem "capybara"
    gem "database_cleaner"
    gem "launchy"

end

gem 'acts-as-taggable-on', '~> 2.3.1'
gem 'rails3-jquery-autocomplete'

gem 'tinymce-rails'

gem "aws-ses", "~> 0.4.4", :require => 'aws/ses'

gem 'jquery-rails'
gem 'jquery-ui-rails'

gem 'newrelic_rpm' 
```

这是 gemfile.lock

```
GEM
  remote: https://rubygems.org/
  specs:
    actionmailer (3.2.9)
      actionpack (= 3.2.9)
      mail (~> 2.4.4)
    actionpack (3.2.9)
      activemodel (= 3.2.9)
      activesupport (= 3.2.9)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.4)
      rack (~> 1.4.0)
      rack-cache (~> 1.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.2.1)
    activemodel (3.2.9)
      activesupport (= 3.2.9)
      builder (~> 3.0.0)
    activerecord (3.2.9)
      activemodel (= 3.2.9)
      activesupport (= 3.2.9)
      arel (~> 3.0.2)
      tzinfo (~> 0.3.29)
    activeresource (3.2.9)
      activemodel (= 3.2.9)
      activesupport (= 3.2.9)
    activesupport (3.2.9)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    acts-as-taggable-on (2.3.3)
      rails (~> 3.0)
    addressable (2.3.2)
    annotate (2.5.0)
      rake
    arel (3.0.2)
    asset_sync (0.5.0)
      activemodel
      fog
    aws-sdk (1.7.1)
      httparty (~> 0.7)
      json (~> 1.4)
      nokogiri (>= 1.4.4)
      uuidtools (~> 2.1)
    aws-ses (0.4.4)
      builder
      mail (> 2.2.5)
      mime-types
      xml-simple
    bcrypt-ruby (3.0.1-x86-mingw32)
    bootstrap-sass-rails (2.2.1.1)
      railties (~> 3.1)
      sass-rails (~> 3.1)
    builder (3.0.4)
    capybara (2.0.0)
      mime-types (>= 1.16)
      nokogiri (>= 1.3.3)
      rack (>= 1.0.0)
      rack-test (>= 0.5.4)
      selenium-webdriver (~> 2.0)
      xpath (~> 1.0.0)
    childprocess (0.3.6)
      ffi (~> 1.0, >= 1.0.6)
    choice (0.1.6)
    cocaine (0.4.2)
    coderay (1.0.8)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.4.0)
    daemons (1.1.9)
    database_cleaner (0.9.1)
    devise (2.1.2)
      bcrypt-ruby (~> 3.0)
      orm_adapter (~> 0.1)
      railties (~> 3.1)
      warden (~> 1.2.1)
    devise_invitable (1.1.2)
      actionmailer (~> 3.0)
      devise (>= 2.1.0)
      railties (~> 3.0)
    diff-lcs (1.1.3)
    erubis (2.7.0)
    eventmachine (1.0.0-x86-mingw32)
    excon (0.16.10)
    execjs (1.4.0)
      multi_json (~> 1.0)
    factory_girl (4.1.0)
      activesupport (>= 3.0.0)
    factory_girl_rails (4.1.0)
      factory_girl (~> 4.1.0)
      railties (>= 3.0.0)
    faker (1.1.2)
      i18n (~> 0.5)
    ffi (1.1.5-x86-mingw32)
    fog (1.7.0)
      builder
      excon (~> 0.14)
      formatador (~> 0.2.0)
      mime-types
      multi_json (~> 1.0)
      net-scp (~> 1.0.4)
      net-ssh (>= 2.1.3)
      nokogiri (~> 1.5.0)
      ruby-hmac
    formatador (0.2.4)
    geocoder (1.1.5)
    guard (1.5.4)
      listen (>= 0.4.2)
      lumberjack (>= 1.0.2)
      pry (>= 0.9.10)
      thor (>= 0.14.6)
    guard-rspec (2.1.2)
      guard (>= 1.1)
      rspec (~> 2.11)
    hike (1.2.1)
    httparty (0.9.0)
      multi_json (~> 1.0)
      multi_xml
    i18n (0.6.1)
    journey (1.0.4)
    jquery-rails (2.1.3)
      railties (>= 3.1.0, < 5.0)
      thor (~> 0.14)
    jquery-ui-rails (2.0.2)
      jquery-rails
      railties (>= 3.1.0)
    json (1.7.5)
    launchy (2.1.2)
      addressable (~> 2.3)
    libwebsocket (0.1.6)
      websocket
    listen (0.5.3)
    lol_dba (1.3.0)
      actionpack (>= 3.0)
      activerecord (>= 3.0)
      railties (>= 3.0)
    lumberjack (1.0.2)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    method_source (0.8.1)
    mime-types (1.19)
    multi_json (1.3.7)
    multi_xml (0.5.1)
    net-scp (1.0.4)
      net-ssh (>= 1.99.1)
    net-ssh (2.6.1)
    newrelic_rpm (3.5.2.17)
    nokogiri (1.5.5-x86-mingw32)
    orm_adapter (0.4.0)
    paperclip (3.3.1)
      activemodel (>= 3.0.0)
      activerecord (>= 3.0.0)
      activesupport (>= 3.0.0)
      cocaine (~> 0.4.0)
      mime-types
    pg (0.14.1-x86-mingw32)
    polyglot (0.3.3)
    pry (0.9.10-x86-mingw32)
      coderay (~> 1.0.5)
      method_source (~> 0.8)
      slop (~> 3.3.1)
      win32console (~> 1.3)
    pry-rails (0.2.2)
      pry (>= 0.9.10)
    rack (1.4.1)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-ssl (1.3.2)
      rack
    rack-test (0.6.2)
      rack (>= 1.0)
    rails (3.2.9)
      actionmailer (= 3.2.9)
      actionpack (= 3.2.9)
      activerecord (= 3.2.9)
      activeresource (= 3.2.9)
      activesupport (= 3.2.9)
      bundler (~> 1.0)
      railties (= 3.2.9)
    rails-erd (1.0.0)
      activerecord (>= 3.0)
      activesupport (>= 3.0)
      choice (~> 0.1.6)
      ruby-graphviz (~> 1.0.4)
    rails3-jquery-autocomplete (1.0.10)
      rails (~> 3.0)
    railties (3.2.9)
      actionpack (= 3.2.9)
      activesupport (= 3.2.9)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (>= 0.14.6, < 2.0)
    rake (10.0.1)
    rdoc (3.12)
      json (~> 1.4)
    rspec (2.12.0)
      rspec-core (~> 2.12.0)
      rspec-expectations (~> 2.12.0)
      rspec-mocks (~> 2.12.0)
    rspec-core (2.12.0)
    rspec-expectations (2.12.0)
      diff-lcs (~> 1.1.3)
    rspec-mocks (2.12.0)
    rspec-rails (2.12.0)
      actionpack (>= 3.0)
      activesupport (>= 3.0)
      railties (>= 3.0)
      rspec-core (~> 2.12.0)
      rspec-expectations (~> 2.12.0)
      rspec-mocks (~> 2.12.0)
    ruby-graphviz (1.0.8)
    ruby-hmac (0.4.0)
    rubyzip (0.9.9)
    sass (3.2.3)
    sass-rails (3.2.5)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    selenium-webdriver (2.26.0)
      childprocess (>= 0.2.5)
      libwebsocket (~> 0.1.3)
      multi_json (~> 1.0)
      rubyzip
    slop (3.3.3)
    sprockets (2.2.1)
      hike (~> 1.2)
      multi_json (~> 1.0)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    thin (1.5.0)
      daemons (>= 1.0.9)
      eventmachine (>= 0.12.6)
      rack (>= 1.0.0)
    thor (0.16.0)
    tilt (1.3.3)
    tinymce-rails (3.5.7.1)
      railties (>= 3.1.1)
    treetop (1.4.12)
      polyglot
      polyglot (>= 0.3.1)
    tzinfo (0.3.35)
    uglifier (1.3.0)
      execjs (>= 0.3.0)
      multi_json (~> 1.0, >= 1.0.2)
    uuidtools (2.1.3)
    warden (1.2.1)
      rack (>= 1.0)
    websocket (1.0.2)
    win32console (1.3.2-x86-mingw32)
    xml-simple (1.1.2)
    xpath (1.0.0)
      nokogiri (~> 1.3)

PLATFORMS
  x86-mingw32

DEPENDENCIES
  acts-as-taggable-on (~> 2.3.1)
  annotate (>= 2.5.0)
  asset_sync
  aws-sdk
  aws-ses (~> 0.4.4)
  bootstrap-sass-rails
  capybara
  coffee-rails (~> 3.2.1)
  database_cleaner
  devise
  devise_invitable
  eventmachine (~> 1.0.0.beta.4.1)
  factory_girl_rails
  faker
  geocoder
  guard-rspec
  jquery-rails
  jquery-ui-rails
  launchy
  lol_dba
  newrelic_rpm
  paperclip
  pg
  pry-rails
  rails
  rails-erd
  rails3-jquery-autocomplete
  rspec-rails
  sass-rails (~> 3.2.3)
  thin
  tinymce-rails
  uglifier (>= 1.0.3) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T19:38:39.743

它通常（几乎总是）是一个依赖问题..类似[https://github.com/carlhuda/bundler/issues/1984](https://github.com/carlhuda/bundler/issues/1984)

似乎我能找到的最好的情况是检查最后一个工作 gemfile.lock 中的每个 gem 版本，并在 gemfile 中指定〜>要安装的版本..一个接一个，直到一切正常..

# php - 将 php 链接到 html 变量

> ID：13443334
> 
> 赞同：-4
> 
> 时间：2012-11-18T18:45:06.177
> 
> 标签：php, html

我在 HTML 中有一个变量，我正在尝试输出 my_locations.PHP 文件。

我的 PHP 文件从 SQL 输出到浏览器：

```
["Address - Name", "Lat", "Long", 1],
["Address - Name", "Lat", "Long", 2],... 
```

我需要变量以与上述相同的格式将其插入我的代码中。

我的 HTML 变量是：

```
<script type="text/javascript">
var locations = [["Address - Name", "Lat", "Long", 1],
                  ["Address - Name", "Lat", "Long", 2], ]; 
```

有人知道我需要做什么才能让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:46:58.270

```
var locations = <?php echo json_encode($myarray) ?>; 
```

# ajax - 通过 POST 避免 URL 长度限制

> ID：13443341
> 
> 赞同：0
> 
> 时间：2012-11-18T18:45:52.633
> 
> 标签：ajax, forms, url, pdf, post

我目前正在开发一个基于 Adob​​es Scene7 的 web2print 项目。打印产品 (pdf) 的完整 url 非常长，超过了所有浏览器对 url 长度的限制。所以为了得到最终的印刷品，我假设我必须通过 POST 方法以不同的方式提交 url。似乎有两种方法：首先，使用html表单（method=post）并将所有url参数创建为（隐藏）输入字段。其次，使用 post 进行 ajax 调用（例如 jQuery.ajax）。

实际上，如果我在浏览器中打开打印 url，则准备好的 pdf 将在浏览器中打开。所以我需要一种方法通过 POST 将很长的 url 发送到服务器并打开我从它返回的 PDF。测试 ajax 版本我遇到了同源策略并得到一个错误，因为我调用了一个不在本地服务器上的 url。这一定是web2print项目的标准情况，这是怎么处理的？

提前谢谢米贝克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:12:34.027

我解决了问题。我分两步完成。首先，我使用 ajax 将基本 url 和 url 参数发送到本地服务器上的 php 脚本。使用 jQuery 很容易做到：

```
jQuery.ajax({
    type : "POST",
    url : './includes/php/userdata.php',
    data: { method: 'get_print_version',
            url: base_url,                  
            parameter: query_parameter,
            num: num_parameter },
    error: function(error) {
        console.log("Print version failed");
  },
  success: function(reault) {
    console.log("What is the result?");
  }         
}); 
```

服务器脚本使用 cURL 将数据发送到最终服务器。因此，基本 url 和参数不会作为一个 url 发布，而是通过使用 CURLOPT_POST 和 CURLOPT_POSTFIELDS 分开。可以使用 file_put_contents 将服务器响应（pdf）写入文件。如果 PDF 变大，您将在此处收到内存限制错误。比将 cURL 的答案直接写入 pdf 文件更好。

```
if ($_method == 'get_print_version')
{
    $url = $_REQUEST['url'];
    $parameter = $_REQUEST['parameter'];
    $num = $_REQUEST['num'];

    $post = curl_init();

    curl_setopt($post, CURLOPT_URL, $url);
    curl_setopt($post, CURLOPT_POST, $num);
    curl_setopt($post, CURLOPT_POSTFIELDS, $parameter);

    /* write calendar directly to file */
    $pdf = fopen('./Calendar.pdf', 'w');
    curl_setopt($post, CURLOPT_FILE, $pdf);

    curl_exec($post);
    curl_close($post);          

    echo $result;           
} 
```

# security - RTMFP 对流的整体 128 位加密是否会变成 256 位加密？

> ID：13443348
> 
> 赞同：1
> 
> 时间：2012-11-18T18:46:20.833
> 
> 标签：security, encryption, network-protocols, rtmfp

这与我要问的另一个问题非常相似，但仍有一点不同。这两个问题都在攻击同一个问题，我真的只需要回答一个或另一个：

[https://stackoverflow.com/questions/13443236/how-can-you-make-rtmfp-encrypt-streams-using-256-bits-not-128](https://stackoverflow.com/questions/13443236/how-can-you-make-rtmfp-encrypt-streams-using-256-bits-not-128)

基本上我知道 RTMFP 在大多数情况下使用 128 位加密进行流式传输。但这种说法在某种程度上只是一种过度概括吗？在流式传输音频和视频时，是否有一些特定的部分，特别是它使用 256 位加密？

谢谢！

# c - 谢尔宾斯基金字塔递归算法

> ID：13443350
> 
> 赞同：1
> 
> 时间：2012-11-18T18:46:33.273
> 
> 标签：c, opengl, glut

我正在尝试实现一个谢尔宾斯基金字塔，它就像一个谢尔宾斯基三角形，但是是 3D 的。
我有这个结构来包含有关金字塔的所有数据：

```
typedef struct
{
    GLfloat xUp;
    GLfloat yUp;
    GLfloat zUp;
    GLfloat base;
    GLfloat height;
}pyramid; 
```

然后我编写了一个计算三个子金字塔的函数：

```
void findSubPyramids( pyramid pyr, pyramid subs[3])
{
    for(int i=0; i<3; i++)
    {
        subs[i].height=pyr.height/2.0;
        subs[i].base=pyr.base/2.0;
    }

    memcpy(subs,&pyr,3*sizeof(GLfloat));

    subs[1].yUp= pyr.yUp-pyr.height/2.0;
    subs[1].xUp= pyr.xUp+pyr.base/4.0;
    subs[1].zUp= pyr.zUp-pyr.base/4.0;

    subs[2].yUp= subs[1].yUp;
    subs[2].xUp= pyr.xUp-pyr.base/4.0;
    subs[2].zUp= subs[1].zUp;

} 
```

但是这个算法实现是错误的：底部两个子金字塔的 zUp 坐标有问题：确实金字塔没有按我的意愿绘制：

![金字塔](../Images/c8cb5c480955138ae9b1e5c008f64e95.png)

但是，如果我使用 glOrtho 而不是 gluPerspective，则可以绘制金字塔。我知道我使用的 gluPerspective 和函数是正确的，但是算法是错误的。
这是我实现计算所有子金字塔的算法的地方：

```
void drawSierpinskyPyramid (pyramid pyr)
{
    assert(EQUAL(pyr.height, pyr.base));
    if(pyr.base > 4.0)
    {
        setRandomColor();
        pyramid subs[3];
        drawPyramid(pyr);
        findSubPyramids(pyr, subs);
        for(int i=0; i<3; i++)
        {
            drawSierpinskyPyramid(subs[i]);
        }
    }
} 
```

我不明白出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:36:10.380

试一试：

```
// gcc -std=c99 main.c -lglut -lGL -lGLU

#include <GL/glut.h>
#include <math.h>
#include <stdlib.h>

typedef struct
{
    float x, y, z;
} Vec3f;

void glTriangle( Vec3f* v0, Vec3f* v1, Vec3f* v2 )
{
    glColor3ub( rand() % 255, rand() % 255, rand() % 255 );
    glVertex3fv( (GLfloat*)v0 );
    glVertex3fv( (GLfloat*)v1 );
    glVertex3fv( (GLfloat*)v2 );
}

// v0, v1, v2 = base, v3 = top
void glTetrahedron( Vec3f* v0, Vec3f* v1, Vec3f* v2, Vec3f* v3 )
{
    glTriangle( v0, v2, v1 );
    glTriangle( v0, v1, v3 );
    glTriangle( v1, v2, v3 );
    glTriangle( v2, v0, v3 );
}

Vec3f Lerp( Vec3f* v0, Vec3f* v1, float u )
{
    Vec3f ret = {
        v0->x + ( v1->x - v0->x ) * u,
        v0->y + ( v1->y - v0->y ) * u,
        v0->z + ( v1->z - v0->z ) * u,
    };
    return ret;
}

void glSierpinskiPyramid( Vec3f* v0, Vec3f* v1, Vec3f* v2, Vec3f* v3, unsigned int level )
{
    if( level == 0 )
    {
        glTetrahedron( v0, v1, v2, v3 );
        return;
    }

    // midpoints
    Vec3f m01 = Lerp( v0, v1, 0.5 );
    Vec3f m12 = Lerp( v1, v2, 0.5 );
    Vec3f m02 = Lerp( v0, v2, 0.5 );
    Vec3f m03 = Lerp( v0, v3, 0.5 );
    Vec3f m13 = Lerp( v1, v3, 0.5 );
    Vec3f m23 = Lerp( v2, v3, 0.5 );

    glSierpinskiPyramid( v0, &m01, &m02, &m03, level-1 );
    glSierpinskiPyramid( &m01, v1, &m12, &m13, level-1 );
    glSierpinskiPyramid( &m02, &m12, v2, &m23, level-1 );
    glSierpinskiPyramid( &m03, &m13, &m23, v3, level-1 );
}

void display()
{
    glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );

    glMatrixMode( GL_PROJECTION );
    glLoadIdentity();
    double w = glutGet( GLUT_WINDOW_WIDTH );
    double h = glutGet( GLUT_WINDOW_HEIGHT );
    gluPerspective( 60, w / h, 0.1, 100 );

    glMatrixMode( GL_MODELVIEW );
    glLoadIdentity();
    glTranslatef( 0, 0, -9 );

    srand(0);
    glPushMatrix();
    glScalef( 3, 3, 3 );

    static float angle = 0;
    angle += 1;
    glRotatef( angle/3, 0.2, 1, 0 );

    Vec3f v0 = { -1, -1 / sqrtf(3), -1 / sqrtf(6) };
    Vec3f v1 = {  1, -1 / sqrtf(3), -1 / sqrtf(6) };
    Vec3f v2 = {  0,  2 / sqrtf(3), -1 / sqrtf(6) };
    Vec3f v3 = {  0,             0,  3 / sqrtf(6) };
    glBegin( GL_TRIANGLES );
    glSierpinskiPyramid( &v0, &v1, &v2, &v3, 3 );
    glEnd();
    glPopMatrix();

    glutSwapBuffers();
}

void timer(int extra)
{
    glutPostRedisplay();
    glutTimerFunc(16, timer, 0);
}

int main( int argc, char **argv )
{
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_RGBA | GLUT_DEPTH | GLUT_DOUBLE );
    glutInitWindowSize( 640, 480 );
    glutCreateWindow( "Sierpinski Pyramid" );
    glutDisplayFunc( display );
    glutTimerFunc(0, timer, 0);

    glEnable( GL_DEPTH_TEST );
    glEnable( GL_CULL_FACE );

    glutMainLoop();
    return 0;
} 
```

# xcode - UITableView reloadData 不更新 UI，仅在重启后

> ID：13443351
> 
> 赞同：0
> 
> 时间：2012-11-18T18:46:35.313
> 
> 标签：xcode, uitabbarcontroller, uitableview, nsfilemanager, reloaddata

遇到一个奇怪的问题：

我有一个 TableViewController（称为最近选项卡），它是 UITabBarController 的选项卡之一。我在第一个选项卡栏（浏览选项卡）中将项目保存到沙箱（文档文件夹）中。然后我在第二个标签栏（最近）中将它们拉出并在 cellForRowAtIndexPath 中设置它们。

这是奇怪的行为：当我在第一个视图控制器（浏览）中向沙箱添加项目时，一切正常。我打开 TableViewController 的第二个选项卡（最近的），我看到项目出现在那里。然后我尝试回到第一个控制器（浏览）以添加更多项目，但它们没有出现（当我回到最近时）。

但是，当我重新启动应用程序时，我第二次选择的项目确实出现了（最近）！

我最近尝试过调用 tableView reloadData（实际上我可以在任何地方调用）。我试图调用 [tableView beginUpdates]。

没有变化，表视图（最近）只有在重新启动应用程序后才能正确更新。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T16:04:20.593

我相信问题是 CellForRowAtIndexPath 没有一个带有索引的数组来拉出项目，因此导致 tableView 在计算有多少行时出现问题（在另一个 SO 线程中阅读）。

该数组必须在调用 CellForRowAtIndexPath 之前已经存在，而不是在其中实例化（可以通过公共 api 传递给类或在 viewDidLoad 中实例化，例如）。否则，它将在每次调用 CellForRowAtIndexPath 时被实例化，并且不会有可用于创建单元格的静态索引。

# java - 访问者模式，并不是所有的访问者对接口中的所有方法都有合理的实现

> ID：13443354
> 
> 赞同：2
> 
> 时间：2012-11-18T18:46:40.343
> 
> 标签：java, jakarta-ee, visitor-pattern

我有一个界面`Serializable`。`Item`这个类对我的应用程序中的每个子类都有方法。然而，并非所有实现的类`Serializable`都有该方法的合理实现`serialize`。由于我的应用程序中的安全限制，一些序列化程序不应该能够序列化所有不同的对象。

我应该如何解决这个问题？我是否应该序列化一条消息，上面写着*“由于安全限制，Serializer 无法序列化对象”。*还是我应该抛出一个 RuntimeException？还是有其他“解决”这个问题的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:02:09.333

您的逻辑会违反一项重要原则：[接口隔离原则](http://www.oodesign.com/interface-segregation-principle.html)

> 接口隔离原则指出不应强迫客户端实现他们不使用的接口。代替一个胖接口，许多基于方法组的小接口是首选的，每个接口服务一个子模块。

因此，我将创建两个不同的基类来满足您的要求：

*   `Item`
*   `SerializableItem`

你的访问者只会依赖`SerializableItem`对象：

```
public void visit(SerializableItem sItem) 
```

当然，只要访问者不处理它，就可以在 kind 中**仅**收集两个类的共同行为（与序列化无关） 。`AbstractItem`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:51:17.400

投掷`UnsupportedOperationException("Non serializable")`是第一个猜测。当然，在编译时发现这一点会很棒，但访问者模式并不是为此而设计的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T18:53:25.487

一个不能提供合理实现的类不`Serializable`应该实现它。无论如何，这个问题很不清楚。接口是否在您的设置中`Serializable`声明了该`accept()`方法？它不应该。如果不可序列化的项目可能是项目的特殊子类，那么您就不能`visit(MyNotSerializableItem)`在访问者中实现。

# c# - C# API 方便应用程序的自动更新

> ID：13443358
> 
> 赞同：0
> 
> 时间：2012-11-18T18:47:37.323
> 
> 标签：c#

我有一个需要自动更新功能的 C# 应用程序。

.Net 中是否有任何 API 可以促进此过程？

Microsoft clickonce 不允许我们在程序文件中安装应用程序，因此在我们的特定情况下它对我们没有用处。

任何帮助。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T18:55:04.243

这是一个解决方案“向您的程序添加自动更新” [http://www.codeproject.com/Articles/19623/Adding-automatic-updates-to-your-program-Part-1](http://www.codeproject.com/Articles/19623/Adding-automatic-updates-to-your-program-Part-1) 这里：[自动更新 .NET 应用程序](https://stackoverflow.com/questions/819647/auto-update-net-applications)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:55:02.340

InstallShield（http://www.flexerasoftware.com/products/installshield.htm）、Wise Installer（现为 Installaware [http://www.installaware.com/](http://www.installaware.com/)）和 Wix（http://wixtoolset.org/，开源) 最受欢迎。

# javascript - d3 附加属性（如果存在）

> ID：13443360
> 
> 赞同：1
> 
> 时间：2012-11-18T18:48:09.193
> 
> 标签：javascript, d3.js

使用 d3.js 可以将数据中的任意属性附加到 SVG 元素，在此示例中，标题将用于工具提示：

```
svg.selectAll("circle")
    .data(data)
  .enter().append("circle")
    .attr("title", function(d) { return d.title; }) 
```

有没有办法仅在数据中存在属性时附加属性？（即在此示例中，如果数据中缺少标题，则根本不会添加标题属性）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:51:46.697

如果属性的值为 null 或未定义，则 selection.attr 删除指定的属性。如果没有定义属性，则将属性设置为 null 或 undefined 无效。因此，只要 的值为`d.title`null 或在缺失时未定义（而不是空字符串），那么您的代码将仅在存在时设置“title”属性。

# javascript - 在 Web 应用程序框架（检票口）中正确加载资源（javascript）？

> ID：13443361
> 
> 赞同：0
> 
> 时间：2012-11-18T18:48:47.030
> 
> 标签：javascript, reference, resources, load, wicket

我使用 Apache Wicket 作为我的 webapp 框架，我有以下结构： ![在此处输入图像描述](../Images/f9dd2d91bc1993cb255fe2b8be322260.png)

我需要的：

1) 应该为我的自定义 Java 类 Process.java 加载和读取 javascript 文件 Rules.js。因为在我的 Process.java 我有这样的东西：

```
private String readFile(String filename) throws IOException {

    File file = new File("PATH");
    //reads the file and returns a string
    ...
} 
```

**所以第一个问题是：当我的资源 Rules.js 在资源文件夹或任何其他包文件夹中时，我应该使用什么路径而不是“PATH”？**

2) Process.java 不仅读取文件，它还操作我的 Rules.js 文件，例如使用 json。因此，应将以下行添加到 Rules.js 文件中：

```
var object = {JSON STRING}; 
```

我已经知道该怎么做了。

3) 处理 Rules.js 文件后，它当然应该自动更新。 **所以第二个问题是：我还应该添加什么以及我的应用程序在哪里，所以 Rules.js 是一个文件，它适用于我的应用程序中所有需要的类，并且在会话期间始终是最新的。**

我已经尝试了很多东西，但我在这里错过了一些我无法弄清楚的东西......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T20:40:39.527

如果您想将文件保存在 webapp 根目录上，您可以创建自己的`IResource`，甚至使用。`ContextRelativeResource``rules.js`

在您`WebApplication`必须将资源注册为共享资源：

```
 @Override
    public void init() {
        super.init();
        getSharedResources().add(RULES_RESOURCE_KEY, new ContextRelativeResource(RULES_CONTEXT_FILE));
    }

    public static ResourceReference getRulesResourceReference() {
        return Application.get().getSharedResources().get(Application.class, RULES_RESOURCE_KEY, null, null, null, true);
    } 
```

这是一个修改`rules.js`文件的示例方法。

```
 public static void changeRules() {    
        try {
            // Get a context URL
            URL rules = WebApplication.get()
                     .getServletContext()
                     .getResource(RULES_CONTEXT_FILE);

            // Update the file
            OutputStreamWriter out = new OutputStreamWriter(new FileOutputStream(new File(rules.toURI())));
            out.write("var rules=\"" + Long.toHexString(System.currentTimeMillis()) + "\" ");
            out.close();

        } catch (Exception e) {
            throw new WicketRuntimeException(e);
        }

    } 
```

在您的`HomePage`课堂上或您需要的任何地方更新`rules.js`：

```
 public HomePage(final PageParameters parameters) {
        super(parameters);

        add(new Link("changerules") {
            @Override
            public void onClick() {
                WicketApplication.changeRules();
            }
        });
    } 
```

在您`Form`添加的页面上`JavaScriptHeaderItem`：

```
 @Override
    public void renderHead(IHeaderResponse response) {
        response.render(
                JavaScriptHeaderItem.forReference(WicketApplication.getRulesResourceReference())
        );
    } 
```

如果你想测试它，运行这个例子的 HTML：

```
 <html>
        <body onload="alert(rules);">
            <a wicket:id="changerules" href="#">Change rules files</a>
        </body>
    </html> 
```

并且不要忘记`rules.js`在您的`webapp`文件夹中创建初始版本。

我认为更新文件夹中的文件**不是**一个好主意`webapp`，因为容器可以在重新部署时将其替换为初始版本。所以最好使用自己的 IResource 并将文件放在外部文件夹中。如果您需要更多详细信息，请查看此[帖子。](http://dotev.blogspot.com.es/2009/11/serving-images-and-other-resources-with.html)

# java - 如何在 Java 中使用 Linux 共享库？

> ID：13443364
> 
> 赞同：6
> 
> 时间：2012-11-18T18:49:15.670
> 
> 标签：java, linux, shared-libraries

`so`有没有办法从我的 Java 代码中调用库中的函数？一般来说，是否可以`so`在 Java 程序中使用 Linux 库？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T18:52:28.233

答案是“JNI” :)

这里有几个链接：

*   [如何在 linux 上为 JNI 应用程序编译动态库？](https://stackoverflow.com/questions/3950635/how-to-compile-dynamic-library-for-a-jni-application-on-linux)

*   [http://learn-from-the-guru.blogspot.com/2007/12/java-native-interface-jni-tutorial-hell.html](http://learn-from-the-guru.blogspot.com/2007/12/java-native-interface-jni-tutorial-hell.html)

*   [http://docs.oracle.com/javase/6/docs/technotes/guides/jni/](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-18T19:12:09.973

You cannot use arbitrary `.so` libraries in your Java code. You can use JNI to write a wrapper around native code to access from Java.

However, be aware that doing so negates many of the advantages of using Java. Your code and deployment system now becomes quite fragile and subject to many types of bugs that cannot happen in Java. I would try quite hard to find a pure-Java solution before resorting to using native code.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-18T22:11:03.147

除了 JNI 之外，从 java 访问库的​​另一种方法是[JNA](https://github.com/twall/jna#readme)。

我发现在很多情况下它比 JNI 更容易使用，但这只是我个人的看法。

# javascript - Facebook 如何毫不拖延地滚动到时间线横幅的中间？

> ID：13443368
> 
> 赞同：1
> 
> 时间：2012-11-18T18:49:44.220
> 
> 标签：javascript, web, scroll

Facebook 有两种方式来显示某人的时间线：从最顶部开始，显示完整的横幅和半滚动，因此横幅被切成两半，个人资料图片非常接近浮动导航。

不过，半滚动状态似乎很自然，没有任何延迟。加载内容时页面不会突然跳转。

这个功能一般是如何实现的？简单`window.scroll`似乎并没有削减它，因为它太慢了（必须等待内容加载才能真正滚动）并且阻碍了用户体验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:54:22.983

您在问题中假设页面的初始加载。这个假设是错误的，因为可以说“页面”已经加载了。

当您访问一个 facebook 页面，然后导航到某人的时间线时，这不是浏览器中的整页刷新，而是从一个页面切换到另一个页面。相反，这一切都是通过 ajax 完成的。“上一个”页面并没有真正被浏览器卸载，“下一个”页面是通过 ajax 加载的。

至于 url 的变化，那是另一个话题（历史 pushState）。

# c# - 以像素为单位获取字体指标

> ID：13443369
> 
> 赞同：12
> 
> 时间：2012-11-18T18:49:44.790
> 
> 标签：c#, .net, winforms

我有一个 WinForms 用户控件，我正在尝试获取当前字体的确切水平字符间距，预计该字体是等距的。

看起来字体的`Size`属性提供了此信息，但显然是以点为单位的，我正在以像素为单位。

```
var fontWidth = this.Font.Size;   // Returns em-size in points--not pixels 
```

如果我自己创建字体，我可以指定它使用像素单位。但在我的情况下，字体是通过我的用户控件的属性设置的，我无法确定字体是如何创建的。不幸的是，字体的`Unit`属性是只读的。

如何以像素为单位制作现有的字体返回指标？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-21T08:30:48.133

如果使用 System.Windows.Forms.Control 对象，您可以使用以下代码：

```
using (Graphics g = this.CreateGraphics())
{
    var points = myFont.SizeInPoints;
    var pixels = points * g.DpiX / 72;
    MessageBox.Show("myFont size in pixels: " + pixels);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-18T19:12:16.503

Please see this article on MSDN:

[How to: Obtain Font Metrics](https://docs.microsoft.com/en-us/dotnet/framework/winforms/advanced/how-to-obtain-font-metrics)

To get pixels, you use conversion formula.

```
descentPixel = font.Size * descent / fontFamily.GetEmHeight(FontStyle.Regular); 
```

Also see [Get single glyph metrics (.net)](https://stackoverflow.com/questions/5995293/get-single-glyph-metrics-net).

# r - 通过 R 中的属性对 SpatialPolygonsDataFrame 进行子集化（即删除多边形）的简单方法

> ID：13443372
> 
> 赞同：78
> 
> 时间：2012-11-18T18:50:02.813
> 
> 标签：r, mapping, spatial, maptools

我想根据 @data 数据框中的相应属性值从 SpatialPolygonsDataFrame 对象中简单地删除一些多边形，以便我可以绘制简化/子集的 shapefile。到目前为止，我还没有找到一种方法来做到这一点。

例如，假设我想从这个[世界 shapefile](http://thematicmapping.org/downloads/TM_WORLD_BORDERS_SIMPL-0.3.zip)中删除所有面积小于 30000 的多边形。我该怎么做呢？

或者，类似地，我怎样才能删除南极洲？

```
require(maptools)

getinfo.shape("TM_WORLD_BORDERS_SIMPL-0.3.shp") 
# Shapefile type: Polygon, (5), # of Shapes: 246
world.map <- readShapeSpatial("TM_WORLD_BORDERS_SIMPL-0.3.shp")

class(world.map)
# [1] "SpatialPolygonsDataFrame"
# attr(,"package")
# [1] "sp"

head(world.map@data)
#   FIPS ISO2 ISO3 UN                NAME   AREA  POP2005 REGION SUBREGION     LON     LAT
# 0   AC   AG  ATG 28 Antigua and Barbuda     44    83039     19        29 -61.783  17.078
# 1   AG   DZ  DZA 12             Algeria 238174 32854159      2        15   2.632  28.163
# 2   AJ   AZ  AZE 31          Azerbaijan   8260  8352021    142       145  47.395  40.430
# 3   AL   AL  ALB  8             Albania   2740  3153731    150        39  20.068  41.143
# 4   AM   AM  ARM 51             Armenia   2820  3017661    142       145  44.563  40.534
# 5   AO   AO  AGO 24              Angola 124670 16095214      2        17  17.544 -12.296 
```

如果我做这样的事情，情节不会反映任何变化。

```
world.map@data = world.map@data[world.map@data$AREA > 30000,]
plot(world.map) 
```

如果我这样做，结果相同：

```
world.map@data = world.map@data[world.map@data$NAME != "Antarctica",]
plot(world.map) 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-11-18T19:31:00.587

看起来您正在覆盖数据，但没有删除多边形。如果您想减少包括数据和多边形的数据集，请尝试例如

```
world.map <- world.map[world.map$AREA > 30000,]
plot(world.map) 
```

[[编辑 2016 年 4 月 19 日]] 该解决方案曾经有效，但 @Bonnie 报告了较新的 R 版本（尽管数据可能也发生了变化？）： `world.map <- world.map[world.map@data$AREA > 30000, ]` 如果有帮助，请支持 @Bonnie 的回答。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2015-08-25T00:04:06.987

当我尝试在 R 3.2.1 中执行此操作时，上述 tim riffe 的技术对我不起作用，尽管稍微修改它可以解决问题。我发现在将属性指定为子集之前，我还必须专门引用数据槽，如下所示：

```
world.map <- world.map[world.map@data$AREA > 30000, ]
plot(world.map) 
```

如果其他人遇到相同的问题，请将其添加为替代答案。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-08-05T15:11:00.043

顺便提一下，这`subset`也使得工作避免在条件中写入数据的名称。

```
world.map <- subset(world.map, AREA > 30000)
plot(world.map) 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-08-13T01:36:30.243

我使用上述技术制作了一张澳大利亚地图：

```
australia.map < - world.map[world.map$NAME == "Australia",]
plot(australia.map) 
```

事实证明，“澳大利亚”之后的逗号很重要。

这种方法的一个缺陷是它似乎保留了所有其他国家/地区的所有属性列和行，并且只是用零填充它们。我发现如果我写出一个 .shp 文件，然后使用 readOGR（rgdal 包）将其读回，它会自动删除空地理数据。然后我可以只用我想要的数据编写另一个形状文件。

```
writeOGR(australia.map,".","australia",driver="ESRI Shapefile")
australia.map < - readOGR(".","australia")
writeOGR(australia.map,".","australia_small",driver="ESRI Shapefile") 
```

至少在我的系统上，它是删除空数据的“读取”函数，所以我必须在读回一次后写入文件（如果我尝试重新使用文件名，我会收到错误消息）。我确信有一种更简单的方法，但这似乎对我的目的来说已经足够好了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-30T23:20:41.540

作为第二个指针：这不适**用于**形状中带有“孔”的 shapefile，因为它是按索引进行子集化的。

# dvorak - QWERTY vs Dvorak：对照研究？

> ID：13443376
> 
> 赞同：7
> 
> 时间：2012-11-18T18:50:26.040
> 
> 标签：dvorak, qwerty

是否有人对 QWERTY 和 Dvorak 键盘布局之间的打字速度进行了适当控制的研究？我很好奇人们是否真的实现了显着的速度改进，但我还没有读到任何非轶事。典型对话：

> 德沃夏克：“我两年前转过身来，再也没有回头！我的同事们讨厌我！我想我现在可能会打字更快。”
> 
> QWERTY：“我的同事两年前换了。我有时不得不使用他的电脑，当我不得不将它切换回 QWERTY 时我很生气。我仍然打字比他快。”
> 
> 德沃夏克：“QWERTY 旨在减慢打字员的速度，以防止过时的打字机卡纸！我们不使用打字机，为什么我们的键盘布局适合他们？”
> 
> QWERTY：“键盘布局是一种成熟的惯例，非常类似于在美国使用英制计量单位。当然，过渡是可能的，但有可能在现实的时间框架内收回再培训成本吗？”

...从那里开始，出现了一种毫无意义的辩证法，其中 QWERTY 和 Dvorak 忽略了对诸如谁可以实现更好的打字速度或降低 RSI 风险等次要经验细节进行任何有效的评估。

我希望看到的是每分钟字数测试的结果——例如，那些迫使打字员重新输入随机文学片段的测试——在将自己评为轻度、中度或重度打字员的用户之间分配，并提供信息关于何时执行 QWERTY-Dvorak 转换以试图了解 QWERTY 的历史优势的大小。理想情况下，该研究可以包括转换前的 QWERTY 速度以与 Dvorak 速度进行比较，并可能测量转换后不同时间段的 Dvorak 速度。

我不需要这么说，但以防万一：很明显，关于一个主题的问卷调查与 QWERTY 与 Dvorak 的讨论一样狂热，无法控制选择偏差。该研究必须进行实际的、受控的测试，并且最好是纵向的。

有人知道这样的研究吗？

# javascript - Firefox Add-On SDK 中内容脚本中的相对图像 url

> ID：13443377
> 
> 赞同：7
> 
> 时间：2012-11-18T18:50:39.297
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

我目前正在使用 Add-On SDK 开发 Firefox 扩展，但遇到了一个真正的问题。基本上我的扩展程序只是将内容脚本注入到这样的网页中：

**main.js**

```
var pageMod = require("page-mod");
var self = require("self");

pageMod.PageMod({
  include: "http://mail.google.com/mail/*",
  contentScriptFile: [self.data.url("jquery.js"),
                      self.data.url("start.js")],
  attachTo : ["top"]
}); 
```

**开始.js**

```
$('body').append('<div>1</div><img src="insertnote.png" /><div>2</div>'); 
```

两者`start.js`都`insertnote.png`位于数据文件夹中。除图像外，一切正常。我只是找不到如何获取图像标签的真实网址。相对网址似乎不起作用。:(

甚至可以在内容脚本中包含插件的内部图像，还是应该只使用绝对 url 到我的网络服务器？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-31T02:30:16.807

您可以使用“contentScriptOptions”将值传递到内容脚本中。

main.js

```
var pageMod = require("sdk/page-mod");
var self = require("sdk/self");
pageMod.PageMod({
  include: "http://mail.google.com/mail/*",
  contentScriptFile: [self.data.url("jquery.js"),
                      self.data.url("start.js")],
  attachTo : ["top"],
  contentScriptOptions: {
    pngUrl: self.data.url("insertnote.png")
  }
}); 
```

开始.js

```
$('body').append('<div>1</div><img src="' + self.options.pngUrl + '" /><div>2</div>'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T21:15:34.597

以下代码应该可以工作

**main.js**

```
var pngurl = self.data.url("insertnote.png");

//inside PageMod constructor
onAttach: function(worker) {
  worker.port.emit("imageurl",pngurl);
} 
```

**开始.js**

```
self.port.on("imageurl", function(imgurl){
  var img = document.createElement("img");
  img.src = imgurl;
  document.body.appendChild(img);
}); 
```

自然，只传递一个包含每个资产 url 的对象会更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T04:47:50.197

问题是相对 URL 是相对于文档解释的，在这种情况下是页面，因为您将直接作为字符串放入页面中。

一般来说，如果附加组件明确说明，页面*可以链接到附加组件中的图像；*他们必须使用适当的 chrome:// URI 来做到这一点。

# c++ - std::vector::push_back 参数引用

> ID：13443381
> 
> 赞同：2
> 
> 时间：2012-11-18T18:51:06.100
> 
> 标签：c++, stl, parameters, reference, std

考虑以下 C++ 源代码

```
vector <char *> myFunction()
{
    vector <char *> vRetVal;
    char *szSomething = new char[7];

    strcpy(szSomething,"Hello!");
    vRetVal.push_back(szSomething); // here vRetVal[0] address == &szSomething

    delete[] szSomething; // delete[]ing szSomething will "corrupt" vRetVal[0]
    szSomething = NULL;

    return vRetVal; // here i return a "corrupted" vRetVal
} 
```

关于如何使用 push_back 复制我传递的参数而不是通过引用获取它的任何想法？任何其他想法也被接受和赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T18:54:27.043

您已将其指针推送到向量的对象被`delete`代码中的语句销毁。这意味着，向量中的项目（即指针）指向已删除的对象。我敢肯定你不想要那个。

使用`std::string`：

```
std::vector<std::string> myFunction()
{
    std::vector<std::string> v;
    v.push_back("Hello"); 
    v.push_back("World");
    return v;
} 
```

在 C++11 中，你可以这样写：

```
std::vector<std::string> myFunction()
{
   std::vector<std::string> v{"Hello", "World"};
   return v;
} 
```

或这个，

```
std::vector<std::string> myFunction()
{
   return {"Hello", "World"};
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T18:55:27.537

`push_back` *将*复制您传递的参数。

但是您的参数是指针，而不是字符串本身。

要自动复制字符串，请使用`std::string`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-18T19:02:57.397

push_back()*确实*复制了一份。在您发布的代码中，您将一个指针传递给一个以空字符结尾的字符串，因此 C++ 会复制*该指针*。如果想要该字符串的副本，您有一些选择：

如果你坚持使用 C 风格的空终止字符数组作为字符串，你可以简单地传入指针*而不*调用 delete[]。当然，由于 C++ 只有手动内存管理，你必须确保在稍后但适当的时候调用 delete[]...

正如其他人会告诉你的那样，另一种选择是简单地使用 std::string。它将为您管理内存，并且主要是“正常工作......”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T18:57:31.717

失败的手动内存管理是失败的 - 就像往常一样。像一个理智的人一样使用`std::string`，你会发现你的程序实际上有机会正常运行。

# android - 更改对话框标题的文本颜色

> ID：13443385
> 
> 赞同：0
> 
> 时间：2012-11-18T18:51:20.550
> 
> 标签：android, android-dialog

这似乎是一个非常简单的问题，但我已经搜索过，但找不到任何解决方案。我有一个包含内容的对话框，如下所示：

![在此处输入图像描述](../Images/d75d6f6106d76a5344c6d011b597c8aa.png)

我想更改对话框标题“输入密码”的颜色。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-14T19:54:17.250

似乎有一个非常简单的答案：

```
String chars = getResources().getString(R.string.playerDialogTitle);
    SpannableString str = new SpannableString(chars);
    str.setSpan(new ForegroundColorSpan(Color.WHITE), 0, chars.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 

    AlertDialog.Builder builder = new AlertDialog.Builder(PlayerActivity.this);
    builder.setTitle(str) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T18:18:35.897

该方法`setCustomTitle(View customTitleView)`允许您这样做。您需要创建一个布局以在其中设置，并在该布局中简单地将 TextView 设置为您想要的样式。

此方法属于[AlertDialog.Builder](http://developer.android.com/reference/android/app/AlertDialog.Builder.html)：

```
LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View customTitleView = inflater.inflate(R.layout.custom_title_view, null);

AlertDialog.Builder builder = new AlertDialog.Builder(context)
.setCustomTitle(customTitleView); 
```

# php - 对php中的抽象类感到困惑

> ID：13443387
> 
> 赞同：1
> 
> 时间：2012-11-18T18:51:40.207
> 
> 标签：php, abstract

如果我有这样的抽象类：

```
abstract class MyApp
{

   public function init()
   {
      $this->stuff = $this->getStuff();

   }
   public function getStuff()
   {
      return new BlueStuff();
   }
} 
```

然后我有一个从这个抽象类扩展的类，如下所示：

```
class MyExtendedClass extends MyApp
{
   public function init()
   {
      parent::init();
   }

   public function getStuff()
   {
      return new RedStuff();
   }
} 
```

如果我做：

```
$myobj = new MyExtendedClass();
$myobj->init(); 
```

为什么调用子类的 getStuff 方法？$this 不是在抽象类的上下文中吗？如果是这样，不应该调用抽象类的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T18:56:28.567

## 新答案

在 PHP 中，您可以使用子类，就好像父类中不存在于子类中的所有方法都已复制到子类中一样。因此，您的示例将与以下内容相同：

```
class MyExtendedClass extends MyApp {
    public function init() {
        $this->stuff = $this->getStuff();
    }

    public function getStuff() {
        return new RedStuff();
    }
} 
```

只需将子类视为具有父类的所有代码，通常就可以了。此规则有一个例外：属性。一个`private`类的属性只能被该类访问，子类不能访问`private`父类的属性。为此，您需要将属性更改`private`为`protected`属性。

* * *

## 原始答案

[PHP 中的抽象类](http://php.net/manual/en/language.oop5.abstract.php)与普通类一样，但有一个很大的不同：它们不能被启动。这意味着你不能这样做`new AbstractClass();`。

由于它们与其他所有内容的常规类完全一样，因此[扩展类](http://php.net/manual/en/keyword.extends.php)也是如此。这意味着 PHP 首先尝试在启动的类中查找方法，如果抽象类不存在，则仅在抽象类中查找。

所以在你的例子中，这意味着`getStuff()`方法 from`MyExtendedClass`被调用。此外，这意味着您可以省略`init()`.`MyExtendedClass`

# flash - Haxe AS3 目标、FlashDevelop：嵌入并使用相同字体的普通、粗体和斜体样式

> ID：13443388
> 
> 赞同：2
> 
> 时间：2012-11-18T18:52:07.100
> 
> 标签：flash, fonts, embed, flashdevelop, haxe

任何建议如何嵌入字体的正确方式粗体，斜体和正常样式？我想在 TextField.htmlText 中使用它，带有正确的 html 标签，但不工作 - 只显示常规字体。如果 TextFormat.font 设置为粗体字体名称，则仅显示。我不想使用字体标签。

在 FlashDevelop 中，我右键单击字体并添加到库中 - 我尝试使用自动生成的名称/ID，并指定，但没有成功。是的，我设置了 TextField.embedFonts = true。:)

有什么建议或解决方案吗？谢谢是提前！

# c# - 不能输入 System.IO.Ports 速记

> ID：13443389
> 
> 赞同：1
> 
> 时间：2012-11-18T18:52:09.057
> 
> 标签：c#, namespaces, serial-port

我有以下代码，但仍然必须键入完整路径才能使用 System.IO.Ports 命名空间，即使我有 using 子句。我的参考列表中是否缺少某些内容？

= new SerialPort 返回错误 5 'SerialPort' 是一个“命名空间”，但用作“类型”

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.IO;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO.Ports;

namespace SerialPort
{
    public partial class Form1 : Form
    {
        System.IO.Ports.SerialPort counter = new SerialPort("COM5");
        public Form1()
        {
            InitializeComponent();

        } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:53:59.613

这是因为您的命名空间具有相同的名称。重命名您的命名空间或使用串行端口的别名，如下所示：

```
using SP = System.IO.Ports.SerialPort 
```

然后你可以使用

```
SP counter = new SP("COM5"); 
```

但正如 Jon 所建议的那样，重命名命名空间对于任何将阅读您的代码的人来说都是一个更清晰的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T18:54:06.090

您正在声明`SerialPort`. 不要那样做。这就是造成问题的原因。

你所要做的就是改变命名空间，你会没事的。您*可以*根据 Honza 的要求使用别名，但我认为如果您只是重命名命名空间，代码对每个人来说都会更清楚。

# javascript - 表单提交后显示隐藏的 div

> ID：13443397
> 
> 赞同：0
> 
> 时间：2012-11-18T18:53:20.910
> 
> 标签：javascript, html

我使用表单中的 POST 方法保存数据。数据保存后，页面重新加载，我想在页面中显示一个隐藏的 div。

```
onsubmit="showHide(this); return false;" 
```

显示指定的 div 但不保存数据。

有任何想法吗？

乐：

使其更复杂：触发页面重新加载的表单位于我要重新显示的 div 上。最初我使 div 可见：

```
<a class="articleLink" href="javascript:void(0);" onclick='$("#ModAdd<?php echo $rrows['id_']; ?>").show("slow");'></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:12:25.723

不会发送任何数据，因为您`return false;`的`onSubmit`.

如果您希望用户停留在同一页面上，则需要**Ajax**。否则，您必须`div`在从表单接收数据的页面上显示您的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:54:17.697

您必须在重新加载**后**显示 div 。
`onsubmit`将立即显示（在同一页面上）。因此，在重新加载站点后检查是否`$_POST`在 php 中设置，然后显示`div`

**例子**

```
<?php
if (isset($_POST)):
?>
    <div>Saved successfully</div>
<?php
endif;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T19:18:07.600

您可以在重新加载页面后尝试这样的操作，而不是**onsubmit**：

```
$POST = $POST['myPost'];
      $Message = '<script type="text/javascript">';
      $Message .= 'document.getElementById("' . $IDName . '").style.display="block";'; // Show the hidden DIV
      $Message .= 'document.getElementById("' . $IDName . '").innerHTML="' . $POST . '";'; // Output POST value
      $Message .= '</script>';
echo $Message; 
```

# android - Android 开发崩溃

> ID：13443401
> 
> 赞同：-1
> 
> 时间：2012-11-18T18:53:34.620
> 
> 标签：android

我使用 Eclipse 开发应用程序，我使用 Android 2.1 API 7，我的应用程序与外部数据库 (JSON) 交互。当我的模拟器使用 Android 2.1 时我没有任何问题，但是当我使用 Android 4.0 开启我的模拟器时，当我与外部数据库交互时我的应用程序崩溃......

Logcat 日志：

```
11-18 18:44:56.852: D/dalvikvm(601): Not late-enabling CheckJNI (already on)
11-18 18:44:58.141: D/gralloc_goldfish(601): Emulator without GPU emulation detected.
11-18 18:44:58.301: W/TextLayoutCache(601): computeValuesWithHarfbuzz -- need to force to single run
11-18 18:44:58.301: W/TextLayoutCache(601): computeValuesWithHarfbuzz -- need to force to single run
11-18 18:45:06.601: D/AndroidRuntime(601): Shutting down VM
11-18 18:45:06.601: W/dalvikvm(601): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
11-18 18:45:06.631: E/AndroidRuntime(601): FATAL EXCEPTION: main
11-18 18:45:06.631: E/AndroidRuntime(601): android.os.NetworkOnMainThreadException
11-18 18:45:06.631: E/AndroidRuntime(601):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1084)
11-18 18:45:06.631: E/AndroidRuntime(601):  at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
11-18 18:45:06.631: E/AndroidRuntime(601):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
11-18 18:45:06.631: E/AndroidRuntime(601):  at java.net.InetAddress.getAllByName(InetAddress.java:220)
11-18 18:45:06.631: E/AndroidRuntime(601):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
11-18 18:45:06.631: E/AndroidRuntime(601):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
11-18 18:45:06.631: E/AndroidRuntime(601):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
11-18 18:45:06.631: E/AndroidRuntime(601):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
11-18 18:45:06.631: E/AndroidRuntime(601):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
11-18 18:45:06.631: E/AndroidRuntime(601):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
11-18 18:45:06.631: E/AndroidRuntime(601):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
11-18 18:45:06.631: E/AndroidRuntime(601):  at com.example.library.JSONParser.getJSONFromUrl(JSONParser.java:42)
11-18 18:45:06.631: E/AndroidRuntime(601):  at com.example.library.UserFunctions.loginUser(UserFunctions.java:32)
11-18 18:45:06.631: E/AndroidRuntime(601):  at com.example.lagrandechasse.LoginActivity$1.onClick(LoginActivity.java:54)
11-18 18:45:06.631: E/AndroidRuntime(601):  at android.view.View.performClick(View.java:3480)
11-18 18:45:06.631: E/AndroidRuntime(601):  at android.view.View$PerformClick.run(View.java:13983)
11-18 18:45:06.631: E/AndroidRuntime(601):  at android.os.Handler.handleCallback(Handler.java:605)
11-18 18:45:06.631: E/AndroidRuntime(601):  at android.os.Handler.dispatchMessage(Handler.java:92)
11-18 18:45:06.631: E/AndroidRuntime(601):  at android.os.Looper.loop(Looper.java:137)
11-18 18:45:06.631: E/AndroidRuntime(601):  at android.app.ActivityThread.main(ActivityThread.java:4340)
11-18 18:45:06.631: E/AndroidRuntime(601):  at java.lang.reflect.Method.invokeNative(Native Method)
11-18 18:45:06.631: E/AndroidRuntime(601):  at java.lang.reflect.Method.invoke(Method.java:511)
11-18 18:45:06.631: E/AndroidRuntime(601):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-18 18:45:06.631: E/AndroidRuntime(601):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-18 18:45:06.631: E/AndroidRuntime(601):  at dalvik.system.NativeStart.main(Native Method)
11-18 18:45:08.711: I/Process(601): Sending signal. PID: 601 SIG: 9 
```

你能帮助我吗 ？

感谢您的回复，这是我的登录课程：

```
public class LoginActivity extends Activity {

    //My variable

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);

        //initialize button and textwiew

        btnLogin.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {

                UserFunctions userFunction = new UserFunctions();
                JSONObject json = userFunction.loginUser(login,pass);

                try {
                    if (json.getString(success) != null) {
                        loginErrorMsg.setText("");
                        String res = json.getString(success);
                        if(Integer.parseInt(res) == 1){

                            DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                            JSONObject json_user = json.getJSONObject("user");

                            userFunction.logoutUser(getApplicationContext());
                            db.addUser(json_user.getString(ID), json_user.getString(login));                        

                            Intent dashboard = new Intent(getApplicationContext(), DashboardActivity.class);

                            dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            startActivity(dashboard);

                            finish();
                        }
                        else{
                            loginErrorMsg.setText("Error");
                        }
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

你能告诉我修改吗？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:10:25.683

你不能在主线程上进行网络操作，这就是日志跟踪告诉你的。

`11-18 18:45:06.631: E/AndroidRuntime(601): FATAL EXCEPTION: main 11-18 18:45:06.631: E/AndroidRuntime(601): android.os.NetworkOnMainThreadException`

始终在单独的线程上进行网络连接。您可以通过不同的方式来实现这一点，要么自己使用一个线程，要么`asyncTask`自己启动一个新线程。SO上有很多关于这个的帖子，网上有很多例子。[看看这个 SO 帖子](https://stackoverflow.com/questions/13390026/android-socket-connection-fail/13390088#13390088)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:55:04.343

您正在主 UI 线程中执行（可能很慢）网络操作。如果您的目标 SDK 是 11 (Honeycomb) 或更高版本，则会抛出`NetworkOnMainThreadException`，因为此行为可能会阻塞 UI 并导致应用程序无响应。

您可以使用 an[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)来解决这个问题，方法是将数据加载到`doInBackground(..)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T19:00:33.497

用这种方式。。

```
public class getConnection extends AsyncTask<String, Void, Void> 
    {

           @Override
            protected void onPreExecute() 
           {
               super.onPreExecute();

           }

           @Override
           protected Void doInBackground(String... arg0)
           {

            try 
            {
                 //Your JSON Code  
            } 
            catch (Exception e) 
            {
             e.printStackTrace();
            }

            return null;
           }

           @Override
           protected void onPostExecute(Void result)
           {
               super.onPostExecute(result);

            }
            catch (Exception e)
            {
             Log.v("log", e.toString());
            }
           }

          } 
```

# c# - 将数据网格视图导出到 excel

> ID：13443403
> 
> 赞同：0
> 
> 时间：2012-11-18T18:53:45.650
> 
> 标签：c#, sql-server, excel, datagridview

我有一个datagridview，我想将它导出到excel。它工作得很好，但它在excel中有问题。我有一些列`7/8` `7/9`在 sql 中命名为 .... 它显示为`[7/8]` `[7/9]`.... 但是当我将其导出到 excel 时，这些列的名称将显示为月份名称，如：`8-jul` `9-jul`但我不希望它们显示为.

我想在 sql 中显示完全一样的列名。

我该怎么办？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:24:42.127

如果您使用的是 Microsoft.Office.Interop.Excel，则可以将to`numberformat`的属性设置`Cell`为`@`（用于文本），它将保持适当的值，试试这个：

```
oSheet.Cells[rowCount, columnCount].numberformat = "@";
oSheet.Cells[rowCount, columnCount] = "7/9"; 
```

**编辑**根据评论，你应该像这样使用它：

```
for (int i = 0; i < dataGridView1.Rows.Count - 1; i++) 
{ 
       for (int j = 0; j < dataGridView1.Columns.Count; j++) 
       {
             if(j+1 == 5 && i!=1) //value of the cell where you put values like 7/8 and it's not the column name cell
                   worksheet.Cells[i + 2, j + 1].numberformat = "@";
             worksheet.Cells[i + 2, j + 1] = dataGridView1.Rows[i].Cells[j].Value.ToString(); 
       } 
} 
```

**EDIT2**因为它是一个列名，你可以使用这个：

```
for (int j = 0; j < dataGridView1.Columns.Count; j++) 
{
    worksheet.Cells[1, j + 1].numberformat = "@"; 
    worksheet.Cells[1, j + 1].dataGridView1.Columns[i].Name
}

for (int i = 0; i < dataGridView1.Rows.Count - 1; i++) 
{ 
       for (int j = 0; j < dataGridView1.Columns.Count; j++) 
       {
             worksheet.Cells[i + 2, j + 1] = dataGridView1.Rows[i].Cells[j].Value.ToString(); 
       } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:59:25.327

使用 MS ReportViewer 生成 Excel 报告。或者使用 Aspose 库。或使用 Devexpress AspxGridView + AspxGridViewExporter

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T20:23:35.750

`[7/8]`这很简单，只需在like中使用一个空格`[ 7/8]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T05:52:18.260

请看这个项目：[https](https://exportdata.codeplex.com/) ://exportdata.codeplex.com/ ，它可以通过datagridview将超过4000行的大数据表导​​出到excel，还可以设置excel数据属性，如格式、样式等。在里面，你可以设置excel数据格式为你需要的，你可以试试看。

# php - 使用 Javascript 错误事件侦听器检测失败与 PHP 在 responseText 中返回 1

> ID：13443405
> 
> 赞同：0
> 
> 时间：2012-11-18T18:53:51.523
> 
> 标签：php, javascript, error-handling, xmlhttprequest, addeventlistener

xhr.upload.addEventListener("error", failed, false) 与我有什么不同`$success = move_uploaded_file($tmp_name, $name); if $(success) { echo "0" } else { echo "1" }`？这是不必要的冗余吗？

```
function uploadPHP() {
    var xhr = new XMLHttpRequest();

    xhr.upload.addEventListener("progress", updateProgress, false);
    xhr.upload.addEventListener("load", complete, false);
    xhr.upload.addEventListener("error", failed, false);
    xhr.upload.addEventListener("abort", cancelled, false);

    var foo = document.getElementById("uploadScreen");
    var form = document.getElementById("uploadForm");
    var percentComplete;
    var index;

    xhr.onreadystatechange = function () {
        if (xhr.readyState == 1){
        }
--

    function cancelled() {
        //cancel
    }
} 
```

localhost file_server # cat php/upload.php

```
<?php
//
//require_once('PhpConsole.php');
//PhpConsole::start();
$tmp_name = $_FILES['file1']['tmp_name'];
$path = "/trunk";
$name = $path . DIRECTORY_SEPARATOR . $_FILES['file1']['name'];
$success = move_uploaded_file($tmp_name, $name);
if ($success) {
echo "0";
} else {
    echo "1";
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:59:11.643

`"error"`如果您的请求未通过，例如超时，则会发生。

假设您需要验证一些数据。如果它无效，`"error"`除非您在 PHP 中抛出未捕获的异常，否则该事件不会发生。相反，它只会返回一些指示值无效的数据，例如 string `"0"`。

在您给定的示例中，完全有可能`move_uploaded_file`失败，但错误处理程序不会触发，因为从技术上讲，请求已完成而没有意外事件。您想要采取的行动失败的唯一迹象将是`"0"`响应。

# java - 如何在 java 类方法或构造函数中插入前提条件？

> ID：13443406
> 
> 赞同：7
> 
> 时间：2012-11-18T18:53:58.183
> 
> 标签：java, assert, design-by-contract, preconditions

这是针对我正在学习的 Java 课程的。这本书提到了前置条件和后置条件，但没有给出如何编码它们的任何示例。它继续谈论断言，我把它记下来了，但是我正在做的任务专门说明插入先决条件并用断言测试先决条件。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-02T14:11:18.970

这里给出的一些示例将前置条件表达为参数验证，并在断言中使用它们。非私有方法应该始终执行参数验证，因为它的调用者超出了它的实现范围。

我倾向于争辩说，在面向对象系统的上下文中，参数验证并不构成先决条件——尽管我在 google-sphere 中看到了很多这种方法的例子。

我对合约的理解始于 [BINDER1999]；它根据被测对象的状态定义了不变量、前置条件和后置条件；表示为布尔谓词。这种处理考虑了如何管理由类封装的状态空间，其中方法表示状态之间的转换。

在参数和返回值方面的前置条件和后置条件的讨论比在状态空间方面的讨论更容易传达！所以我明白为什么这种观点更为普遍。

回顾一下，有三种类型的合同正在讨论中：

*   **不变量**是对被测对象的测试，从构造结束（任何构造函数）到其销毁开始（尽管它可能在转换发生时被破坏）都是正确的。
*   **前置条件**是对被测对象的测试，对于要在被测对象上调用的被测方法，该测试必须为真。
*   **后置条件**是对被测对象的测试，在被测方法完成后必须立即为真。

如果您采用重载方法必须在语义上等价的（明智的）方法，那么对于类中给定方法的任何重载，前置条件和后置条件都是相同的。

在考虑交互和覆盖方法时，契约驱动设计必须遵循 Liskov 替换原则；这导致以下规则：

*   派生类的**不变量**是其局部不变量与其基类的逻辑与。
*   被覆盖方法的**前提条件**是其本地前提条件与其基类中的方法的逻辑或。
*   被覆盖的方法的**后置条件**是其本地后置条件和其基类中的方法的逻辑与。

当然，请记住，无论何时测试前置条件或后置条件，都必须测试被测类的不变量。

在 Java 中，合约可以写成受保护的布尔谓词。例如：

```
 // class invariant predicate
    protected bool _invariant_ ()
    {
        bool result = super._invariant_ (); // if derived
        bool local  = ... // invariant condition within this implementation
        return result & local;
    }

    protected bool foo_pre_ ()
    {
        bool result = super.foo_pre_ (); // if foo() overridden
        bool local  = ... // pre-condition for foo() within this implementation
        return result || local;
    }

    protected bool foo_post_ ()
    {
        bool result = super.foo_post_ (); // if foo() is overridden
        bool local  = ... // post-condition for foo() with this implementation
        return result && local;
    }

    public Result foo (Parameters... p)
    {
        boolean success = false;
        assert (_invariant_ () && foo_pre_ ()); // pre-condition check under assertion
        try
        {
            Result result = foo_impl_ (p); // optionally wrap a private implementation function
            success = true;
            return result;
        }
        finally
        {
            // post-condition check on success, or pre-condition on exception
            assert (_invariant_ () && (success ? foo_post_ () : foo_pre_ ());
        }
    }

    private Result foo_impl_ (Parameters... p)
    {
        ... // parameter validation as part of normal code
    } 
```

不要将不变量谓词滚动到前置或后置条件谓词中，因为这会导致在派生类中的每个测试点多次调用不变量。

这种方法对被测方法使用了一个包装器，该方法的实现现在在一个私有实现方法中，并且实现的主体不受合同断言的影响。包装器还处理异常行为——在这种情况下，如果实现抛出异常，则再次检查前置条件，正如对异常安全实现的预期。

*请注意，如果在上面的示例中，'foo_impl_()' 抛出异常，并且 'finally' 块中的后续前置条件断言也失败，那么来自 'foo_impl_()' 的原始异常将丢失，有利于断言失败。*

请注意，以上内容是在我的脑海中写下的，因此可能包含错误。

*参考：*

*   [BINDER1999] Binder，“测试面向对象系统”，Addison-Wesley 1999。

* * *

*2014-05-19 更新*

关于输入和输出的合同，我已经回到了基础。

上面的讨论基于 [BINDER1999]，根据被测对象的状态空间考虑了合同。将类建模为强封装的状态空间是以可扩展方式构建软件的基础 - 但这是另一个主题......

考虑在考虑继承时如何应用（和要求）Liskov 替换原则 (LSP) [1 ：](https://en.wikipedia.org/wiki/Liskov_substitution_principle "里氏替换原则")

> 派生类中的重写方法必须可以替代基类中的相同方法。

为了可替代，派生类中的方法对其输入参数的限制不能比基类中的方法更严格 - 否则它将在基类方法成功的地方失败，从而破坏 LSP [1](https://en.wikipedia.org/wiki/Liskov_substitution_principle "里氏替换原则")。

类似地，输出值和返回类型（不是方法签名的一部分）必须可以替代基类中的方法产生的 - 它必须至少在其输出值中具有限制性，否则这也会破坏 LSP [1](https://en.wikipedia.org/wiki/Liskov_substitution_principle "里氏替换原则") . 请注意，这也适用于返回类型 - 可以从中派生关于协变返回类型的规则。

因此，被覆盖方法的输入和输出值的合约遵循相同的规则，分别在继承和前置条件和后置条件下进行组合；为了有效地实施这些规则，它们必须与它们所应用的方法分开实施：

```
 protected bool foo_input_ (Parameters... p)
    {
        bool result = super.foo_input_ (p); // if foo() overridden
        bool local  = ... // input-condition for foo() within this implementation
        return result || local;
    }

    protected bool foo_output_ (Return r, Parameters... p)
    {
        bool result = super.foo_output_ (r, p); // if foo() is overridden
        bool local  = ... // output-condition for foo() with this implementation
        return result && local;
    } 
```

请注意，这些几乎与`foo_pre_()`和`foo_post_()`分别相同，并且应该在与这些合同相同的测试点在测试工具中调用。

为方法族定义了前置条件和后置条件——相同的条件适用于方法的所有重载变体。输入和输出契约适用于特定的方法签名；然而，为了安全和可预测地使用这些，我们必须了解我们的语言和实现的签名查找规则（*参见*C++ `using`）。

请注意，在上面，我使用表达式`Parameters... p`作为任何一组参数类型和名称的简写；这*并不*意味着暗示可变参数方法！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-18T18:57:14.663

像 Eiffel 这样的语言支持“前置条件”和“后置条件”作为语言的基本部分。

可以提出一个令人信服的论点，即“对象构造函数”的全部目的*正是*建立“类不变量”。

但是对于 Java（就像几乎所有其他后 C++ 面向对象的语言一样），您几乎必须伪造它。

这是一篇关于利用 Java“断言”的优秀技术说明：

*   [http://docs.oracle.com/javase/8/docs/technotes/guides/language/assert.html](http://docs.oracle.com/javase/8/docs/technotes/guides/language/assert.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T19:03:23.837

只需用于`assert`编码前提条件。例如：

```
...
private double n = 0;
private double sum = 0;
...
public double mean(){
  assert n > 0;
  return sum/n;
}
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T19:04:46.333

如果程序的执行要正确继续，前提条件是必须在程序执行的给定点保持的条件。例如，语句“x = A[i];” 有两个先决条件：A 不为空且 0 <= i < A.length。如果违反了这些先决条件中的任何一个，则语句的执行将产生错误。

此外，子程序的先决条件是在调用子程序时必须为真以使子程序正常工作的条件。

[这是详细信息](http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/base/Preconditions.html)&

这是示例： [前置条件-后置条件-不变量](http://svengrand.blogspot.com/2008/11/preconditions-postconditions-invariants.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T19:11:17.823

要在 Java 中应用前置条件和后置条件技术，您需要在运行时定义和执行断言。它实际上允许在代码中定义运行时检查。

```
public boolean isInEditMode() {
 ...
}

/**
* Sets a new text.
* Precondition: isEditMode()
* Precondition: text != null
* Postcondition: getText() == text
* @param name
*/
public void setText(String text) {
 assert isInEditMode() : "Precondition: isInEditMode()";
 assert text != null : "Precondition: text != null";

 this.text = text;

 assert getText() == text : "Postcondition: getText() == text";
}

/**
* Delivers the text.
* Precondition: isEditMode()
* Postcondition: result != null
* @return
*/
public String getText() {

 assert isInEditMode() : "Precondition: isInEditMode()";

 String result = text;

 assert result != null : "Postcondition: result != null";
 return result;
} 
```

请在[此处关注上述代码的详细信息](http://svengrand.blogspot.com/2008/11/preconditions-postconditions-invariants.html)

# c - 命令行参数不适用于 Visual C++ Express 2010

> ID：13443413
> 
> 赞同：2
> 
> 时间：2012-11-18T18:54:24.853
> 
> 标签：c, visual-c++, command-line-arguments

我在使用 Visual C++ Express 2010 将命令行参数传递给我的程序时遇到问题。我发现命令参数正在调试并使用以下输入，它们之间只是带有空格的术语。该文件位于我的项目文件夹中，带有 .c 源代码。

**测试文件1.txt 2**

当我在 main 下静态定义 char 指针时，程序运行良好。所以在这一点上，我不确定问题出在 2010 还是代码上。我还没有想出以其他方式编译和执行来测试命令行参数的方法。如果有人可以编译它并查看它是否适用于他们的系统，那就太好了。

```
 #include <stdio.h>
    #include <stdlib.h>

    #define BUFFER_SIZE 256

    int main(char *argv[])
    {
       //char *argv[] = { "program", "TestFile1.txt", "2" };
       char buf[BUFFER_SIZE];
       FILE *inFp;

       printf("%s",argv[1]);
       if ((inFp = fopen (argv[1], "r")) == NULL)
       {
          fprintf(stderr, "Can't open file\n");
          exit(EXIT_FAILURE);
       }

       fclose(inFp);
       return 0;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:55:48.387

应该是`int main(int argc, char *argv[])`除此之外，我没有看到您的程序有任何其他问题。

# java - Servlet 映射不适用于生产，但适用于 localhost

> ID：13443415
> 
> 赞同：1
> 
> 时间：2012-11-18T18:54:37.753
> 
> 标签：java, jsp, servlets

我有一个如下所示的 servlet 映射。

```
 <servlet>
     <servlet-name>SubmitComment</servlet-name>
     <servlet-class>org.rohitsharma.db.servlet.SubmitComment</servlet-class>
 </servlet>

 <servlet-mapping>
     <servlet-name>SubmitComment</servlet-name>
     <url-pattern>/SubmitComment</url-pattern>
 </servlet-mapping> 
```

当我用 action 击中一个表单时`SubmitComment`。它在我的本地主机上工作。但是当我将它上传到真正的主机上时，它给了我类似的错误。

> 未找到
> 
> 在此服务器上找不到请求的 URL /SubmitComment。

我应该如何更改这些映射以使其正常工作？

这是表格：

```
 <form action="SubmitComment" method="post" id="leavereply">
      <ol><li>
        <label for="name">Name</label>
        <input id="name" name="name" class="text" />
      </li><li>
        <label for="email">Email Address</label>
        <input id="email" name="email" class="text" />
      </li><li>
        <label for="message">Your Message</label>
        <textarea id="message" name="message" rows="8" cols="50"></textarea>
      </li>
        <input type="hidden" id="blog_id" name="blog_id" value="<%out.print(blog.blog_id);%>">
      <li>
        <input type="image" name="imageField" id="imageField" src="images/submit.gif" class="send" />
        <div class="clr"></div>
      </li></ol>
      </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:06:40.523

在构建 HTML 时，您是否在表单前面加上`action`上下文根？呈现给客户端浏览器的内容应该是`/<context-root>/SubmitComment`. 在您的本地服务器上，应用程序可能部署在默认上下文根上，而在生产环境中它部署在不同的上下文根上。

向我们展示您用于在 HTML 表单上呈现 URL 的代码。你可能在那里失踪`<c:url>`了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:53:12.503

这是服务器设置问题。与代码或任何映射无关。谢谢你的时间。这是我的现场主持人的一些设置问题。我改变了我的主机并且一切正常:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-10T03:11:13.867

我有一个类似的问题，它在本地工作并且在我的开发环境中不起作用。该错误会说找不到该页面。事实证明，这是一个 Apache httpd 配置，我必须在 virtual_hosts.conf 中创建一个 JKMount 条目。在我重新启动 httpd 服务后，我能够点击它。

在这种情况下，问题与代码或设置无关，但如果他们的 servlet 容器前面有 Apache httpd 服务层，这可能对其他人有帮助。

# init - 织物和初始化

> ID：13443417
> 
> 赞同：0
> 
> 时间：2012-11-18T18:54:51.577
> 
> 标签：init, fabric

我正在使用fabric重新启动tomcat，即使它说tomcat重新启动成功它也没有。因此，根据常见问题解答，我设置 pty=False 并再次尝试。但是，现在，我收到了这个错误：

`sudo: /etc/init.d/tomcat restart
out: sudo: sorry, you must have a tty to run sudo`

关于这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:04:32.677

对于阅读本文的任何人，这不是结构的问题，而是设置 sudo 帐户的方式。/etc/sudoers 文件中的这个属性控制这个；

默认要求

# javascript - GWT 本机方法警告

> ID：13443430
> 
> 赞同：0
> 
> 时间：2012-11-18T18:55:46.787
> 
> 标签：javascript, gwt, native

我正在 GWT 中做一个项目以部署在 AppEngine 中，我在 Eclipse 中收到警告说： JavaScript 解析：JSNI 参考中需要一个标识符 关于导致这种情况的任何想法？

```
public void callFacebookAPI(String url) {
        JsonpRequestBuilder requestBuilder = new JsonpRequestBuilder();
        requestBuilder.requestObject(url, new AsyncCallback<FbUser>() {

            public void onFailure(Throwable caught) {
                System.out.println("FAIL" );
            }

            @Override
            public void onSuccess(FbUser result) {
                facebookUser = result;
                System.out.println("Facebook name:" + facebookUser.getName());
            }

        });     
    }

    private final native void doFbLoginFunction() /*-{

    FB.login(function(response) {
        if (response.authResponse) {
            // connected
            //return response.session;
            var accessToken = response.accessToken;
            var url = "http://graph.facebook.com/me?access_token=";

            var facebookUrl = url + accessToken;
            @com.google.gwt.smartpark.client.map.SmartPark::callFacebookAPI(Ljava/lang/String;Ljava/lang/
String;)(facebookUrl);         

        } else {
            // cancelled
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:20:21.550

`callFacebookAPI`不是静态的，所以`@`在 JSNI 中的引用之前必须有一些东西，例如

```
var that = this;
$wnd.FB.login($entry(function(response) {
   // ...
   that.@com.google.gwt.smartpark.client.map.SmartPack::callFacebookAPI(Ljava/lang/String;)(facebookUrl);
   // ...
})); 
```

此外，您`callFacebookAPI`需要一个参数，因此 JSNI 签名应该有一个`Ljava/lang/String;`.

# java - 将行计数器方法与字计数方法相结合

> ID：13443438
> 
> 赞同：0
> 
> 时间：2012-11-18T18:56:56.213
> 
> 标签：java, line-numbers, word-count

我有一个方法可以计算文本文件中单词的出现次数，并返回在特定行上找到单词的次数。但是，它不会跟踪单词所在的行号。我有一个单独的方法来计算文本文件中的行数，我想将这两种方法组合成一个跟踪行号的方法，并记录每行出现的单词。

这是我想结合起来的两种方法，以给出类似“单词在 Y 行出现 X 次”的结果

```
public class Hash
{
   private static final Object dummy = new Object();  // dummy variable
   public void hashbuild()
   {
      File file = new File("getty.txt");
      // LineNumberReader lnr1 = null;
      String line1;
      try{
         Scanner scanner = new Scanner(file);
         //lnr1 = new LineNumberReader(new FileReader("getty.txt"));

         // try{while((line1 = lnr1.readLine()) != null)
         //   {}}catch(Exception e){}

         while(scanner.hasNextLine())
         {
            String line= scanner.nextLine();
            List<String> wordList1 = Arrays.asList(line.split("\\s+"));   
            Map<Object, Integer> hm = new LinkedHashMap<Object, Integer>();
            for (Object item : wordList1)
            {
               Integer count = hm.get(item);
               if (hm.put(item, (count == null ? 1 : count + 1))!=null)
               {
                  System.out.println("Found Duplicate : " +item);
               }
            }
            for ( Object key : hm.keySet() )
            {
               int value = hm.get( key );
               if (value>1)
               {
                  System.out.println(key + " occurs  " + (value) + " times on line # "+lnr1.getLineNumber());
               }
            }
         }
     } catch (FileNotFoundException f)
     {f.printStackTrace();} 
   }
} 
```

这是我原来的行数计算方法

```
public void countLines()
{
   LineNumberReader lnr = null; String line;
   try
   {
      lnr = new LineNumberReader(new FileReader("getty.txt"));
      while ((line = lnr.readLine()) != null)
      {
         System.out.print("\n" +lnr.getLineNumber() + " " +line);
      }
      System.out.println("\n");
   }catch(Exception e){}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:17:03.070

为什么不只记住 while 循环中的行号？初始化一个新变量并在调用 nextline 时增加它。

# android - 手机无法连接PC执行PHP文件

> ID：13443439
> 
> 赞同：0
> 
> 时间：2012-11-18T18:57:01.450
> 
> 标签：android, json, gson

我在我的 PC 中创建了一个数据库，现在我想通过在服务器中执行一个 php 文件来检索所有表数据并使用 Google gson 库将它们显示在我的手机上。问题是手机无法连接到PC来执行那个php文件：

```
Error 403 for URL http://192.168.1.2/android_connect/get_all_products.php 
```

我确定代码可以正常工作，因为我使用该[在线链接](http://api.androidsmith.com/capitals.php)进行了测试，并且在手机中检索到了数据。url 就像 JAVA 代码中的那样：

```
String url = "http://192.168.1.2/android_connect/get_all_products.php"; 
```

那是对的吗？有什么办法让手机连接到PC？感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:59:25.723

您需要调整 PC 的配置以允许远程请求。请[查看错误 403](http://www.checkupdown.com/status/E403.html)是什么。检查您的 HTTPD 日志中有关此请求的内容也将有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:34:09.050

要允许在 Windows 上远程访问 apache，请更改文件：`c:\wamp\bin\apache\Apache2.2.22\conf\httpd.conf`

您需要像这样允许远程访问目录 C:\wamp\www ：（添加该行）

```
<Directory "C:/wamp/www/">
    Order Deny,Allow
        Allow from all
</Directory> 
```

并重新启动您的服务器。

# javascript - 页面刷新后停止greasmonkey脚本持续运行？

> ID：13443445
> 
> 赞同：0
> 
> 时间：2012-11-18T18:57:43.630
> 
> 标签：javascript, greasemonkey, tampermonkey

我编写了一个脚本，将一些信息输入表单并提交表单。问题是，提交表单后，页面会刷新。当页面重新加载时，它会提示脚本再次运行，从而导致无限循环。我现在唯一的解决方案是在脚本已经完成一次后点击转义键来阻止脚本运行。是否有任何代码可以防止这种无限循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:51:56.613

我能想到的最简单的方法是将表单提交到与同一脚本的@include 不匹配的页面。

例如：

```
// @include http://domain.com/page.php 
```

然后将表单提交到[http://domain.com/page.php](http://domain.com/page.php) **#something_else**

# objective-c - 当用户在 NSTabView 上切换选项卡时执行操作

> ID：13443446
> 
> 赞同：2
> 
> 时间：2012-11-18T18:57:46.657
> 
> 标签：objective-c, cocoa, nstabview

我有一个包含`NSTabView`. 每当用户更改选项卡时，我都需要运行一个操作。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T19:41:20.033

我不能完全确定您的问题，但我认为您正在寻找其中一种`NSTabViewDelegate`方法`tabView:willSelectTabViewItem:`或`tabView:didSelectTabViewItem:`. 当Tab View的委托更改选项卡视图项目时，这些方法将在Tab View的委托上调用。

# ios - 在 iOS 中使用 ONE 通道创建纹理

> ID：13443447
> 
> 赞同：1
> 
> 时间：2012-11-18T18:58:08.973
> 
> 标签：ios, opengl-es, opengl-es-2.0

在 iOS 应用程序中，我想在对象上放置纹理，渲染场景，读取它，然后读取该对象的“颜色”以识别它。

这很好用，我为此使用了 RGB 纹理。用于创建纹理的数据是：1、0、0、2、0、0、3、0、0。

这需要相当大量的 RAM，浪费了 66%。我想使用只有一个通道的纹理。

阅读 glTexImage2D 的 OpenGL 规范，在我看来，使用 GL_RED 格式是可行的方法，但它似乎在 iOS 中不可用。

任何人都可以确认或告诉我如何在 iOS 中仅使用一个通道创建纹理吗？

感谢您的任何提示，托斯滕。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T02:55:00.243

大多数最新的 iOS 设备 (> iOS 5.0) 应该支持，它允许使用和纹理格式枚举[`EXT_texture_rg`](http://www.khronos.org/registry/gles/extensions/EXT/EXT_texture_rg.txt)创建单通道和双通道渲染缓冲区（和纹理） 。但是，您应该通过调用并检查 ) 的返回值来查询扩展是否存在。`GL_RED_EXT``GL_RG_EXT``glGetString(GL_EXTENSIONS)``GL_EXT_texture_rg`

# multithreading - 模型中的分叉运行方法。优先级应该是什么？

> ID：13443449
> 
> 赞同：1
> 
> 时间：2012-11-18T18:58:33.877
> 
> 标签：multithreading, model-view-controller, smalltalk

我正在smalltalk中制作一个带有使用计时器的小游戏。每秒出现一个对象，游戏持续 10 秒。如果我运行一个 while 循环 10 秒，我无法捕获来自控制器的任何输入以及将其显示在视图中。所以我创建了一个新进程，但是如果我按原样 fork 它，run 方法的优先级太高，其他方法没有机会运行。有一个更好的方法吗？

编辑：

我在 49 分叉了 run 方法，控制器和视图工作，但只有当我在视图上方移动鼠标时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T03:26:20.510

您可以分叉一个进程，但您希望通过常规窗口事件队列来处理它。尝试这样的事情：

```
tick
   self doStuff.
   self gameFinished ifFalse: [
      [(Delay forSeconds: 1) wait.
         [self tick] uiEventFor: self builder window] fork] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:32:05.553

恕我直言，分叉一个流程并不是解决这个问题的一个好的设计决策。我宁愿做一个动作队列，当需要执行动作时，你可以在其中放置带有时间戳的动作。然后在游戏主循环的每个循环中，您删除所有到期的操作，并处理它们。

例如，对于每秒生成的对象，您将在未来 1 秒内添加一个动作，并且在处理该动作时，它会在未来 1 秒内再次添加相同的动作。

与我们尝试使用并发进程相比，这将使您的游戏更具可预测性和可调试性。

# security - 发送 IV 加密与否？

> ID：13443450
> 
> 赞同：1
> 
> 时间：2012-11-18T18:58:41.633
> 
> 标签：security, cryptography, block-cipher

我正在使用[CBC](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Cipher-block_chaining_.28CBC.29)模式。我正在考虑发送以 ECB 模式加密的 IV（因为它只是一个块），而不是发送“普通”IV。我会获得一些安全感吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T19:03:04.457

您不需要在 CBC 模式下加密 IV。没有安全优势。有关原因的“证明”，请参阅我的较早答案。[将 IV 与密文一起发送，安全吗？](https://stackoverflow.com/questions/3436864/sending-iv-along-with-cipher-text-safe/3436997#3436997).

简短的回答是，当您查看 CBC 模式时，前一个密文块实际上成为下一个块的 IV。我们以明文形式传输密文块（如果这有意义？），因此如果第一个块存在风险，那么每个块都会存在风险。

# c - 程序将其输入复制到其输出，将每个制表符替换为 \t ，每个退格替换为 \b ，每个反斜杠替换为 \\

> ID：13443452
> 
> 赞同：1
> 
> 时间：2012-11-18T18:58:56.560
> 
> 标签：c

我正在尝试解决这个 K&R 问题。我在 CodeBlocks 中尝试了这段代码。

```
int main()
{
    int c, d;
    while ( (c=getchar()) != EOF)
    {
        d = 0;
        if (c == '\\')
        {
            putchar('\\');
            putchar('\\');
            d = 1;
        }
        if (c == '\t')
        {
            putchar('\\');
            putchar('t');
            d = 1;
        }
        if (c == '\b')
        {
            putchar('\\');
            putchar('b');
            d = 1;
        }
        if (d == 0)
            putchar(c);
    }
    return 0;
} 
```

但是当我按下退格键时，\b 并没有代替它显示。 ![在此处输入图像描述](../Images/d753ef2aae9b1e7c0254dfd20c502ef4.png)

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:04:32.893

这是因为控制台窗口本身处理键盘和编辑键。

您必须查看 Windows[控制台功能](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682073%28v=vs.85%29.aspx)，尤其是[`SetConsoleMode`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686033%28v=vs.85%29.aspx)功能。

* * *

要清除`ENABLE_PROCESSED_INPUT`和`ENABLE_LINE_INPUT`标志：

```
// Get the console handle for `stdin`
HANDLE hConsoleStdin = GetStdHandle(STD_INPUT_HANDLE);

// Get the current flags
DWORD flags;
if (GetConsoleFlags(hConsoleStdin, &flags))
{
    // Now `flags` contain the current flags
    // Remove the flags we don't want there
    flags &= ~(ENABLE_PROCESSED_INPUT | ENABLE_LINE_INPUT);

    // And finally set the new flags
    SetConsoleFlags(hConsoleStdin, flags);
} 
```

**注意：**以上代码*未经*测试，因为我无法访问 Windows 机器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:06:58.313

问题实际上是，您的控制台不会将退格传递给程序，而是从输入缓冲区中删除字符。正如@JoachimPileborg 所说，请参阅 SetConsoleMode 和其他功能的使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T19:21:44.963

[此处详细解答](https://stackoverflow.com/questions/3167733/ignore-backspace-key-from-stdin)了如何在 Linux 环境中完成此任务。

# c++ - PhysFS 破坏数据的前几个字节

> ID：13443456
> 
> 赞同：1
> 
> 时间：2012-11-18T18:59:12.493
> 
> 标签：c++, physfs

因此，我正在编写的这个 PhysFS 类似乎正在破坏它读取的所有数据的前几个字符。其余的数据似乎很好...

这是被调用的代码：

```
std::vector<uint8_t> FileIO::vectorFromFile(std::string fileName)
{
    auto buffer = std::make_shared<std::vector<uint8_t> > (*new std::vector<uint8_t>);
    if(PHYSFS_exists(fileName.c_str()))
    {
        PHYSFS_File* filenameHandle = PHYSFS_openRead(fileName.c_str());
        if (filenameHandle != 0)
        {
            bufferSize = PHYSFS_fileLength(filenameHandle);
            buffer->resize(bufferSize);
            PHYSFS_read (filenameHandle, &buffer->front(), sizeof(uint8_t), bufferSize);
            PHYSFS_close(filenameHandle);
        }
    }
    else
    {
        std::cerr << fileName << " doesn't exist.";
    }
    buffer->push_back((uint8_t) '\0');
    return *buffer;
}

SimpleFile FileIO::getSimpleFile(std::string fileName)
{
    SimpleFile file;
    std::vector<uint8_t> dataVector = vectorFromFile(fileName);
    file.data = &(dataVector[0]);
    file.sizeInBytes = dataVector.size();

    return file;
} 
```

[这个例子](http://pastebin.com/RjdXtprU)输出：

```
─ s  9c rsion="1.0" encoding="UTF-8"?>
<map version="1.0" orientation="orthogonal" width="40" height="40" tilewidth="32
" tileheight="32">
 <tileset firstgid="1" name="Desert" tilewidth="32" tileheight 
```

什么时候应该：

```
<?xml version="1.0" encoding="UTF-8"?>
<map version="1.0" orientation="orthogonal" width="40" height="40" tilewidth="32"
tileheight="32">
 <tileset firstgid="1" name="Desert" tilewidth="32" tileheight 
```

对不起，pastebin。

我对从文件系统和 PhysFS 读取有点陌生，所以如果我犯了一个明显的错误，请原谅我。

编辑：标题：

```
#ifndef FILEIO_H
#define FILEIO_H

#include <string>
#include <vector>

struct SimpleFile;

class FileIO
{
private:
    int bufferSize = 0;
public:
    FileIO();
    ~FileIO();
    std::vector<uint8_t> vectorFromFile(std::string fileName);
    SimpleFile getSimpleFile(std::string fileName);
};

struct SimpleFile
{
    uint8_t* data;
    int sizeInBytes;
};

#endif // FILEIO_H 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T00:35:53.957

我认为您的数据刚刚超出范围并被重用于其他用途：

```
SimpleFile FileIO::getSimpleFile(std::string fileName)
{
    SimpleFile file;
    std::vector<uint8_t> dataVector = vectorFromFile(fileName);
    file.data = &(dataVector[0]);
    file.sizeInBytes = dataVector.size();
    return file;
} 
```

一旦函数返回`dataVector`就消失了，`file.data`一个无效的指针也消失了。当然，我对可以覆盖它的 C++11 新特性知之甚少。

# c++ - c++中的内置函数

> ID：13443463
> 
> 赞同：5
> 
> 时间：2012-11-18T19:00:28.320
> 
> 标签：c++, function, built-in

我在比赛结束时浏览了一些代码，发现很多人都在使用`__gcd(int,int)`. 这些功能是什么？类似的功能包括

`__builtin_popcount(int)`

`__builtin_ctz(int)`

`__builtin_clz(int)`

我在哪里可以研究这些功能？谷歌搜索它并没有太大帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T19:04:53.450

这些都是 GCC 的细节。你可以在这里阅读它们：http: [//gcc.gnu.org/onlinedocs/gcc/C-Extensions.html#C-Extensions](http://gcc.gnu.org/onlinedocs/gcc/C-Extensions.html#C-Extensions) - 但请注意，它们不是 C/C++ 标准。

# imageview - Android：如何让两个 ImageView(s) 覆盖透明

> ID：13443466
> 
> 赞同：1
> 
> 时间：2012-11-18T19:00:35.307
> 
> 标签：imageview, transparency

我有两个 ImageView(s)（让我们将它们命名为 A 和 B），它们完美地覆盖在 xml 布局中。

B 具有透明背景。

在我的活动中，我首先在 A 上显示不透明颜色的位图。

然后，我在 B 上显示一个透明的位图（之后，计划通过画布在其上绘制一些东西）。

结果，我得到了一个完全黑色的视图。

我希望能够看到我在 A 上显示的第一个位图。

我究竟做错了什么？我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T14:55:00.990

如果您打算通过画布在其上绘制一些东西，我建议您编写一个自定义视图类。

我之前创建了一个应用程序，其中我有一个背景图像，并且在此之上，用户能够进行绘制。我通过构建一个扩展[SurfaceView](http://developer.android.com/reference/android/view/SurfaceView.html)的自定义视图类来做到这一点。

# java - “两者”数组列表和链表的好处......在java中可能吗？

> ID：13443471
> 
> 赞同：8
> 
> 时间：2012-11-18T19:01:15.267
> 
> 标签：java, data-structures, arraylist, linked-list, complexity-theory

当然，我知道arraylist和linkedlist的性能差异。我自己进行了测试，发现对于一个非常大的列表，arraylist 和linkedlist 之间的插入/删除和迭代在时间和内存方面存在巨大差异。

（如果我错了，请纠正我）我们**通常**更喜欢 arraylist 而不是linkedlist，因为：

1）我们实际上比插入/删除更频繁地进行迭代。所以我们更喜欢迭代比插入/删除更快。

2)linkedlist的内存开销远大于arraylist

3）我们无法在批量插入/删除时将列表定义为linkedlist，在迭代时定义为arraylist。这是因为arraylist 和linkedlist 具有根本不同的数据存储技术。

我对第三点错了吗[我希望如此:)]？是否有可能在一个列表中获得这两种数据结构的好处？我想，数据结构设计者一定已经考虑过了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:36:41.087

如果您正在寻找一些性能更高的集合实现，请查看[Javolution](http://javolution.org)。该软件包提供了一个[FastList](http://javolution.org/target/site/apidocs/javolution/util/FastList.html)和[FastTable](http://javolution.org/target/site/apidocs/javolution/util/FastTable.html)，它们至少可以降低在链表和数组列表之间进行选择的成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:40:31.487

您可能想查看 Clojure 的“向量”（这不仅仅是一个简单的数组）：[http ://blog.higher-order.net/2009/02/01/understanding-clojures-persistentvector-implementation /](http://blog.higher-order.net/2009/02/01/understanding-clojures-persistentvector-implementation/)。它们是 O(log32 n) 用于查找和插入。

请注意，这些可以直接从 Java 中使用！（实际上，它们是用 Java 代码实现的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-14T12:33:35.087

可能我们还有另一点需要考虑，但让我选择[LinkedList](https://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html)而不是[ArrayList](https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html)的一个方面是：

*   当我不需要按索引获取元素时（在处理所有元素的情况下）
*   当我在创建列表时不知道大小时

这是一个关于这个话题的有趣[宣言。](https://manifesto.co.uk/java-lists-arraylist-vs-linkedlist/)

# python - Python：setup.py 缺失：没有这样的文件或目录

> ID：13443472
> 
> 赞同：8
> 
> 时间：2012-11-18T19:01:28.183
> 
> 标签：python, macos, python-2.7

我尝试更新 libxml2 和 libxslt 包，因为我的包太旧而无法使用 lxml 运行。[我在这里](https://stackoverflow.com/a/9797504/1794223)找到了一个演练并尝试使用命令更新包

```
sudo python setup.py install 
```

但我得到的是这个错误信息：

```
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS
/Python: can't open file 'setup.py': [Errno 2] No such file or directory 
```

所以显然我的 Python 文件夹中没有 setup.py 文件（这是我当前的 Python 版本，我已经检查过了！）。这怎么可能？希望可以有人帮帮我！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-18T22:07:48.570

为了使我的评论成为正式答案...

setup.py 不是 python 安装位置的一部分。它包含在您要安装的软件包中。将目录更改为您下载的源的位置，然后运行 ​​setup.py 文件。

# python - matplotlib 同一窗口中的数字序列

> ID：13443474
> 
> 赞同：5
> 
> 时间：2012-11-18T19:01:43.290
> 
> 标签：python, python-3.x, matplotlib

我正在测试一种算法，我想使用 matplotlib 生成一系列显示中间结果的图形。

我不需要动画，也不需要屏幕上的多个数字，也不需要子图。

我只想生成一系列图形（可能使用 pyplot），完成后会显示一个窗口。然后我想使用箭头在数字序列中导航。

我怎么能做这样的事情？

我试图搜索，但我只能在屏幕上找到子图或多个数字。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-18T19:33:41.687

最通用的方法是在同一个图中创建一系列轴，并且一次只显示一个。

这是一个示例（左右箭头键控制显示哪个图）：

```
import matplotlib.pyplot as plt
import numpy as np

def main():
    x = np.linspace(0, 10, 100)
    axes = AxesSequence()
    for i, ax in zip(range(3), axes):
        ax.plot(x, np.sin(i * x))
        ax.set_title('Line {}'.format(i))
    for i, ax in zip(range(5), axes):
        ax.imshow(np.random.random((10,10)))
        ax.set_title('Image {}'.format(i))
    axes.show()

class AxesSequence(object):
    """Creates a series of axes in a figure where only one is displayed at any
    given time. Which plot is displayed is controlled by the arrow keys."""
    def __init__(self):
        self.fig = plt.figure()
        self.axes = []
        self._i = 0 # Currently displayed axes index
        self._n = 0 # Last created axes index
        self.fig.canvas.mpl_connect('key_press_event', self.on_keypress)

    def __iter__(self):
        while True:
            yield self.new()

    def new(self):
        # The label needs to be specified so that a new axes will be created
        # instead of "add_axes" just returning the original one.
        ax = self.fig.add_axes([0.15, 0.1, 0.8, 0.8], 
                               visible=False, label=self._n)
        self._n += 1
        self.axes.append(ax)
        return ax

    def on_keypress(self, event):
        if event.key == 'right':
            self.next_plot()
        elif event.key == 'left':
            self.prev_plot()
        else:
            return
        self.fig.canvas.draw()

    def next_plot(self):
        if self._i < len(self.axes):
            self.axes[self._i].set_visible(False)
            self.axes[self._i+1].set_visible(True)
            self._i += 1

    def prev_plot(self):
        if self._i > 0:
            self.axes[self._i].set_visible(False)
            self.axes[self._i-1].set_visible(True)
            self._i -= 1

    def show(self):
        self.axes[0].set_visible(True)
        plt.show()

if __name__ == '__main__':
    main() 
```

如果它们都是相同类型的情节，您可以更新相关艺术家的数据。如果每个图中的项目数量相同，这尤其容易。我暂时不举一个例子，但如果上面的例子太占用内存，那么仅仅更新艺术家的数据会轻得多。

# c# - C#字符串指向非托管类库中的指针

> ID：13443481
> 
> 赞同：1
> 
> 时间：2012-11-18T19:02:12.490
> 
> 标签：c#, pointers, dllexport, stdcall

现有应用程序将导入我的类库。我正在尝试在 C# 中执行此操作，因为我在 C# 方面的经验比 C++ 多得多。现有的应用程序使用 __stdcall，这在 C# 中是不可能的，因为代码是托管的。我使用一个名为 RGiesecke.DllExport 的库来执行非托管导出。

```
[DllExport("LibraryOpen", CallingConvention = System.Runtime.InteropServices.CallingConvention.StdCall)]
static int LibraryOpen(int* session, char* description)
{
    //I need to fill description here.
} 
```

我有一个 C/C++ 中函数的示例头

```
typedef int (__stdcall *LibraryOpen)(int *session, WCHAR *description); 
```

这个函数的目的是，我用我的库的简短描述填充描述指针。

问题是我不确定 char* 在这里是否很好用，而且我不知道如何用字符串填充这个指针。

我希望有人可以帮助我，在此先感谢您。

# objective-c - 返回整数作为部分中的项目数时出错

> ID：13443489
> 
> 赞同：2
> 
> 时间：2012-11-18T19:03:01.183
> 
> 标签：objective-c, ios, xcode4.5, uicollectionview, uicollectionviewcell

我有一个 iPad 应用程序，使用 Storyboards、Tab Bar 和 XCode 4.5。我的一个场景在左上象限有一个 UITableView，在右上象限有标签和 UITextBoxes。

当我单击第二个选项卡时，我被带到了上述场景。这是代码：

```
- (void)viewDidLoad  {

    [super viewDidLoad];

    [self.collectionView registerClass:[Cell class] forCellWithReuseIdentifier:@"MY_CELL"];
}

-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView {

    return 4;
}

- (NSInteger)collectionView:(UICollectionView *)view numberOfItemsInSection:(NSInteger)section {

    return 4;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath; {

    Cell *cell = [cv dequeueReusableCellWithReuseIdentifier:@"MY_CELL" forIndexPath:indexPath];
    cell.label.text = [NSString stringWithFormat:@"%d",indexPath.item];
    return cell;
} 
```

这是接口定义：

```
@interface ClientViewController : UIViewController <UICollectionViewDelegate, UICollectionViewDataSource> {

} 
```

这是错误：

> ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[UIView collectionView:numberOfItemsInSection:]: unrecognized selector sent to instance 0x7d925b0”

如您所见，我对 numberOfSectionsInCollectionView 使用了相同的代码。我研究了 SO 和 Google 并没有发现任何适用的。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T20:49:06.623

有两个代表要设置。一个是`delegate`，一个是`dataSource`。通常，两者都应该设置为指向您的视图控制器（即，`self`在大多数情况下）。

# sqlite - 核心数据获取没有返回任何内容

> ID：13443494
> 
> 赞同：1
> 
> 时间：2012-11-18T19:03:59.383
> 
> 标签：sqlite, core-data, nsfetchedresultscontroller

在这个应用程序中，我使用的是由另一个应用程序创建的 sqlite 数据库。我可以使用 Firefox SQLite 管理器查询数据库，并查看我正在搜索的内容确实存在于数据库中。我已将查询简化为非常简单的内容，但在我的 NSFetchedResultsController 中仍然没有返回任何内容。

这是我的代码：

```
- (NSFetchedResultsController*) frc {

    if (!frc_) {
        @autoreleasepool {

            NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
            NSEntityDescription * entity = [NSEntityDescription entityForName:@"INDEX" inManagedObjectContext:[ManagedObjectContext moc]];
            [fetchRequest setEntity:entity];
            [fetchRequest setFetchBatchSize:15];

            NSPredicate *predicate = [NSPredicate predicateWithFormat:@"lemma = 'dog'"];

            [NSFetchedResultsController deleteCacheWithName:nil];
            [fetchRequest setPredicate:predicate];

            NSSortDescriptor *sortDescriptor1 = [[NSSortDescriptor alloc] initWithKey:@"lemma" ascending:YES];
            NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor1, nil];
            [fetchRequest setSortDescriptors:sortDescriptors];

            NSFetchedResultsController *aFetchedResultsController =
            [[NSFetchedResultsController alloc]
             initWithFetchRequest:fetchRequest
             managedObjectContext:[ManagedObjectContext moc]
             sectionNameKeyPath:@"lemma"
             cacheName:nil];

            aFetchedResultsController.delegate = (id<NSFetchedResultsControllerDelegate>)self;

            NSError *error = nil;

            if (![aFetchedResultsController performFetch:&error]) {
                NSLog(@"Unresolved Error %@, %@", error, [error userInfo]);
                abort();
            }
            self.frc = aFetchedResultsController;
        }
    }

    return frc_;

} 
```

数据模型中有一个名为“INDEX”的实体。为了确认实体具有该`lemma`属性，我显示了其`lemma`属性的内容，得到以下信息：

```
po [[entity propertiesByName] objectForKey:@"lemma"]

(id) $3 = 0x1104f740 (<NSAttributeDescription: 0x1104f740>), name lemma, isOptional 1, isTransient 0, entity INDEX, renamingIdentifier lemma, validation predicates (
), warnings (
), versionHashModifier (null)
 userInfo {
}, attributeType 700 , attributeValueClassName NSString, defaultValue (null) 
```

在 fetch 之后立即检查`aFetchedResultsController`（分配给 self.frc）的内容会得到：

```
po aFetchedResultsController
(NSFetchedResultsController *) $4 = 0x1105c5c0 <NSFetchedResultsController: 0x1105c5c0>

po [[aFetchedResultsController fetchedObjects] count]
(id) $1 = 0x00000000 <nil> 
```

我想这里的问题是非常基本的，但我不知道我忽略了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:06:14.970

我在[Ray Wenderlich 网站上](http://www.raywenderlich.com/980/core-data-tutorial-how-to-preloadimport-existing-data)找到了答案。问题是 sqlite 文件必须从应用程序包移动到应用程序文档目录。

这是通过将其从捆绑包中复制到文档目录中来完成的，如果它不存在的话。

以下是创建持久存储协调器的代码：

```
- (NSPersistentStoreCoordinator *)pstore {
    if (pstore_ != nil) {
        return pstore_;
    }
    NSString *storePath     = [[self applicationDocumentsDirectory] stringByAppendingPathComponent: @"words.sqlite"];
    NSURL *storeUrl = [NSURL fileURLWithPath: storePath];

    // THIS IS THE KEY PIECE TO IMPORTING AN EXISTING SQLITE FILE:
    // Put down default db if it doesn't already exist
    NSFileManager *fileManager = [NSFileManager defaultManager];
    if (![fileManager fileExistsAtPath:storePath]) {
        NSString *defaultStorePath = [[NSBundle mainBundle]
                                      pathForResource:@"words" ofType:@"sqlite"];
        if (defaultStorePath) {
            [fileManager copyItemAtPath:defaultStorePath toPath:storePath error:NULL];
        }
    }

    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption, 
                             [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];

    NSError *error = nil;
    pstore_ = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:self.mom];
    if(![pstore_ addPersistentStoreWithType:NSSQLiteStoreType
                              configuration:nil URL:storeUrl options:options error:&error]) {
        // Error for store creation should be handled in here
    }

    return pstore_;
} 
```

# javascript - JavaScript 中流行算法的实现

> ID：13443495
> 
> 赞同：8
> 
> 时间：2012-11-18T19:04:03.240
> 
> 标签：javascript, algorithm, search, sorting

谁能推荐一本好书或网站来解释所有使用 JavaScript 流行的搜索/排序/树/图形算法？

我正在寻找类似于算法介绍的书，但在 JavaScript 中而不是在伪代码或 C/Java 等中提供实现示例和代码片段。

目的是学习 JavaScript 中的基本计算机科学算法，因为我更喜欢和理解 JavaScript。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-18T19:07:52.143

该存储库将帮助您[https://github.com/mgechev/javascript-algorithms](https://github.com/mgechev/javascript-algorithms)。

# node.js - 构建 flatiron HTTP 应用程序的惯用方式是什么？

> ID：13443496
> 
> 赞同：1
> 
> 时间：2012-11-18T19:04:03.457
> 
> 标签：node.js, flatiron.js

我正在玩 node.js 和 flatiron，我想创建一个半平凡的 HTTP 应用程序。flatiron 网站上的[文档](http://flatironjs.org)很好地描述了每个组件，但不一定是如何构建您的新应用程序。

我遇到的问题包括：将模板拆分为不同的文件是一种好习惯，还是仅仅是白天必须使用 C# 的遗留问题？如何进行测试。

其他熨斗应用程序的示例或建议会有所帮助；文件夹结构、测试约定和常见做法都将被愉快地借用。

在我开始违反规则之前，我至少想知道规则！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:01:31.383

挖掘 github 上的 flatiron 问题，以下链接被证明是有用的：

*   [NotConf 示例](https://github.com/meltmedia/notconf "不信任")
*   Josh Holbrook[的熨斗入门](http://blog.jit.su/getting-started-with-flatiron)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:19:42.293

有点晚了，但这个问题没有答案。

flatiron 不是一个全栈 Web 框架。据我了解和感觉，它是一个 webapps 框架，与 express / geddy 相反，它们用于动态网站。对于静态网站，有铁匠或温德史密斯等。

flatiron 是一组模块，您可以根据需要组合在一起。最佳实践的问题更多是关于您是否单独工作，一起工作以及是否会公开发布您的代码。如果您独自工作且私密，则可以按照您认为合适的方式组织您的代码。我的小型 webapp 组织如下所示：

```
- app              // css, js, images, templates
    - assets       // css, js, images
    - templates    // html
        - partials // html partials since i work with plates
- config           // config.json
- lib              // modules i would use in other projects as well
- node_modules     // …
- app.js
- package.json 
```

你如何处理你的模板主要取决于你的模板引擎。我发现大多数引擎对于一个小型 webapp 来说都是多余的。我用 Wintersmith 或 blacksmith 预制模板，然后使用板块在其中带来一些动态。

# rest - 无法使用对指定测试集的引用来创建/更新 Rally TestCaseResult

> ID：13443500
> 
> 赞同：3
> 
> 时间：2012-11-18T19:04:56.140
> 
> 标签：rest, rally

有了拉力赛，我需要

> 使用新的 TestSet Ref 更新 TestCaseResult。
> 
> 或者
> 
> 通过从以前的 TestCaseResult 复制所有内容并仅更改 TestSet Ref 来创建新的 TestCaseResult。

我正在尝试通过[Rally 的 Java REST 工具包](http://www.rallydev.com/developer/java-toolkit-rally-rest-api)来做同样的事情。它似乎在内部使用 JSON REST API。

当我尝试使用 CreateRequest 或 UpdateRequest 执行此操作时，我从 API 收到错误“**无法为测试集设置值：null** ”

是否无法更新 TestCaseResult 的 TestSet（无论是现有的还是新创建的）？

这是我正在使用的一些示例代码（显示通过更改测试集从现有创建测试用例结果）。

```
 //get testcaseresult object
        GetRequest tcrReq = new GetRequest("/testcaseresult/12345.js"); 
        tcrReq.setFetch(new Fetch("FormattedID", "Name"));
        GetResponse tcrResponse = restApi.get(tcrReq);

        //update testcaseresult object with new testset
        JsonObject tsRef = new JsonObject();
        tsRef.addProperty("_ref", "https://rally1.rallydev.com/slm/webservice/1.39/testset/1029348.js");
        tcrResponse.getObject().add("TestSet",tsRef);
        tcrResponse.getObject().remove("_ref");

        //Create API for new testcaseresult object
        CreateRequest createRequest = new CreateRequest("testcaseresult", tcrResponse.getObject());
        CreateResponse createResponse = restApi.create(createRequest);
        if(createResponse.wasSuccessful()){
            System.out.println(createResponse.getObject());
        }else{
            String[] ss = createResponse.getErrors();
            for(int i=0; i<ss.length; i++){
                System.out.println(ss[i]);
            }
        } 
```

您能否帮助了解我是做错了什么还是这是拉力赛的限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T00:11:48.223

我相信您收到**“无法为测试集设置值：null”**错误消息的原因是 TestCaseResults 存在“不可见”约束，因此必须将它们关联的 TestCase 安排到感兴趣的 TestSet 中，在 TestCaseResult 可以将该 TestSet 作为属性分配之前。

不幸的是，TestCases 上没有 TestSet 属性，因此您必须从 TestSet 中查询 TestCases 集合，然后遍历该集合以检查父 TestCase 是否是该集合的成员。一旦验证 TestCase 位于该 TestSet 的 TestCases 集合中，您就可以继续使用感兴趣的 TestSet 属性成功更新成员 TestCaseResult。我测试了以下内容，它按预期工作。

这是说明如何完成此操作的代码片段：

```
 // Create and configure a new instance of RallyRestApi
    // Connection parameters
    String rallyURL = "https://rally1.rallydev.com";
    String wsapiVersion = "1.38";
    String applicationName = "RestExample_UpdateTestSetOnTestCaseResult";

    // Credentials
    String userName = "user@company.com";
    String userPassword = "password";

    RallyRestApi restApi = new RallyRestApi(
            new URI(rallyURL),
            userName,
            userPassword);
    restApi.setWsapiVersion(wsapiVersion);
    restApi.setApplicationName(applicationName);

    // Ref to Test Case Result of Interest
    String testCaseResultRef = "/testcaseresult/1234567891.js";

    GetRequest testCaseResultRequest = new GetRequest(testCaseResultRef);
    GetResponse testCaseResultResponse = restApi.get(testCaseResultRequest);
    JsonObject testCaseResultObj = testCaseResultResponse.getObject();

    // Get the Test Case Result's Parent Test Case        
    JsonObject testCase = testCaseResultObj.get("TestCase").getAsJsonObject();

    String testCaseRef = testCase.get("_ref").getAsString();
    GetRequest testCaseRequest = new GetRequest(testCaseRef);
    GetResponse testCaseResponse = restApi.get(testCaseRequest);
    JsonObject testCaseObj = testCaseResponse.getObject();

    System.out.println(testCaseRef);

    // Ref to Test Set of Interest
    String testSetRef = "/TestSet/12345678910.js";

    // Get the Test Set of interest
    GetRequest testSetRequest = new GetRequest(testSetRef);
    GetResponse testSetResponse = restApi.get(testSetRequest);
    JsonObject testSetObject = testSetResponse.getObject();

    // Grab the Test Cases in this Test Set
    JsonArray testCasesInTestSet = testSetObject.get("TestCases").getAsJsonArray();

    // Loop through and see if our Test Case of interest is a member
    boolean testCaseIsInSet = false;
    for (int i=0; i<testCasesInTestSet.size(); i++) {
        JsonObject thisTestCase = testCasesInTestSet.get(i).getAsJsonObject();
        String thisTestCaseRef = thisTestCase.get("_ref").getAsString();

        if (thisTestCaseRef.equals(testCaseRef)) {
            testCaseIsInSet = true;
        }
    }

    if (testCaseIsInSet) {
        // Update Test Set on Existing Test Case Result
        try {            

            //Add Test Set
            System.out.println("\nUpdating Existing Test Case Result's Test Set attribute...");
            testCaseResultObj.addProperty("TestSet", testSetRef);

            UpdateRequest updateExistTestCaseResultRequest = new UpdateRequest(testCaseResultRef, testCaseResultObj);
            UpdateResponse updateExistTestCaseResultResponse = restApi.update(updateExistTestCaseResultRequest);

            if (updateExistTestCaseResultResponse.wasSuccessful()) {
                System.out.println("Updated Test Case Result with new Test Set");
                String[] updateExistTestCaseResultWarnings;

                updateExistTestCaseResultWarnings = updateExistTestCaseResultResponse.getWarnings();
                    System.out.println("Warning(s) occurred updating Test Case Result: ");
                for (int i=0; i<updateExistTestCaseResultWarnings.length;i++) {
                    System.out.println(updateExistTestCaseResultWarnings[i]);
                }

            } else {
                String[] updateExistTestCaseResultErrors;
                updateExistTestCaseResultErrors = updateExistTestCaseResultResponse.getErrors();
                    System.out.println("Error occurred updating Test Case Result: ");
                for (int i=0; i<updateExistTestCaseResultErrors.length;i++) {
                    System.out.println(updateExistTestCaseResultErrors[i]);
                }                   
            }
        } catch (Exception e) {
            System.out.println("Exception occurred while updating Tags on existing Test Case: ");
            e.printStackTrace();            
        }

        finally {
            //Release all resources
            restApi.close();
        }
    } else {
        System.out.println("Unable to Update Test Case Result with specified Test Set");
        System.out.println("Parent Test Case is not a member of this Test Set");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T15:43:00.980

更新 TestSet 时，您只需将值设置为其 ref-您不需要包装器对象。

```
tcrResponse.getObject().add("TestSet", "/testset/1029348.js"); 
```

# javascript - .prop 的 JQuery 打字稿定义？

> ID：13443502
> 
> 赞同：3
> 
> 时间：2012-11-18T19:05:16.103
> 
> 标签：javascript, jquery, typescript

我有以下代码：

```
// Populate the title of the selects on change and trigger a change
$('#modal .update-title')
    .change(function () {
        var $select = $(this),
        match = null,
        matchRow = null,
        title = $('option:selected', this).prop('title'); 
```

在打字稿中，这将标题的值设置为布尔值。然后，当我尝试按如下方式使用它时，出现错误：

```
$("#modal_Title_" + matchRow).val(title); 
```

这是 JQuery 定义的另一个问题还是我做错了什么？检查定义文件时，我看到以下内容：

```
prop(propertyName: string): bool; 
```

这似乎与 JQuery 文档不匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T21:33:37.190

jQuery 文档不正确，您的类型定义文件也不正确。

大多数属性是字符串，但有些是数字（例如`.selectedIndex`），有些是布尔值（`.checked`等），并且`$.fn.prop()` **不会**将它们全部转换为字符串。

正确的定义应该是：

```
prop(propertyName: string): any; 
```

TypeScript 网站上已经列出了一个[工作项来解决这个问题。](http://typescript.codeplex.com/workitem/358)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T15:42:03.540

正如@Alnitak 指出的那样，返回值应该是“任何”。

我已将 jQuery 定义文件修复为来自 TypeScript 文件的分支， [DefinitelyTyped](https://github.com/borisyankov/DefinitelyTyped)，但有许多修复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T21:25:39.800

jQuery 文档声明 prop 返回：

*   使用一个参数调用时的字符串

*   使用两个参数调用时的 jQuery 对象

[http://api.jquery.com/prop/](http://api.jquery.com/prop/)

所以根据这个 jquery.d.ts 可能是不正确的。

我的建议是编辑 jquery.d.ts 以使其在您的项目中正确，并在 typescript.codeplex.com 上提出错误

```
prop(propertyName: string): string; 
```

# javascript - 在窗口关闭或页面刷新时运行 JavaScript 代码？

> ID：13443503
> 
> 赞同：147
> 
> 时间：2012-11-18T19:05:24.297
> 
> 标签：javascript, browser

当用户关闭浏览器窗口或刷新页面时，有没有办法运行最终的 JavaScript 代码？

我正在考虑类似于 onload 但更像 onclose 的东西？谢谢。

我不喜欢 onbeforeunload 方法，它总是会弹出一个确认框（离开页面/留在 mozilla 上）或（重新加载/不要在 chrome 上重新加载）。有没有办法安静地执行代码？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-11-18T19:10:54.023

两者都有`window.onbeforeunload`和`window.onunload`，根据浏览器的不同，它们的使用方式也不同。您可以通过将窗口属性设置为函数或使用以下方法来分配它们`.addEventListener`：

```
window.onbeforeunload = function(){
   // Do something
}
// OR
window.addEventListener("beforeunload", function(e){
   // Do something
}, false); 
```

通常，`onbeforeunload`如果您需要阻止用户离开页面（例如，用户正在处理一些未保存的数据，因此他/她应该在离开前保存）。据我所知，*Opera*`onunload`不支持，但您始终可以同时设置两者。

 ** * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-11-18T23:45:30.247

好的，我找到了一个可行的解决方案，它包括使用`beforeunload`事件然后让处理程序返回`null`。这将执行所需的代码，而不会弹出确认框。它是这样的：

```
window.onbeforeunload = closingCode;
function closingCode(){
   // do something...
   return null;
} 
```

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2018-09-19T18:52:42.563

有时您可能想让服务器知道用户正在离开页面。这很有用，例如，清理临时存储在服务器上的未保存图像，将该用户标记为“离线”，或者在他们完成会话时进行记录。

从历史上看，您会在函数中发送 AJAX 请求`beforeunload`，但这有两个问题。如果您发送异步请求，则无法保证该请求会正确执行。如果您发送同步请求，它更可靠，但浏览器会挂起，直到请求完成。如果这是一个缓慢的请求，这将给用户带来巨大的不便。

后来来了[`navigator.sendBeacon()`](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/sendBeacon)。通过使用该`sendBeacon()`方法，当User Agent有机会时，数据异步传输到Web服务器，不会延迟卸载或影响下次导航的性能。这解决了提交分析数据的所有问题：数据发送可靠，异步发送，并且不影响下一页的加载。

除非您仅针对桌面用户，`sendBeacon()` [否则不应与这些用户一起使用，`unload`或者`beforeunload`](https://www.igvita.com/2015/11/20/dont-lose-user-and-app-state-use-page-visibility/)因为它们不能在移动设备上可靠地触发。相反，您可以收听该`visibilitychange`事件。每次您的页面可见并且用户切换选项卡、切换应用程序、转到主屏幕、接听电话、离开页面、关闭选项卡、刷新等时，都会触发此事件。

以下是它的用法示例：

```
document.addEventListener('visibilitychange', function() {
    if (document.visibilityState == 'hidden') { 
        navigator.sendBeacon("/log.php", analyticsData);
    }
}); 
```

当用户返回页面时，`document.visibilityState`将变为`'visible'`，因此您也可以处理该事件。

`sendBeacon()`[支持](https://caniuse.com/#feat=beacon)：_

*   边缘 14
*   火狐 31
*   铬 39
*   野生动物园 11.1
*   歌剧 26
*   iOS Safari 11.4

目前不支持：

*   IE浏览器
*   歌剧迷你

这是[sendBeacon() 的 polyfill](https://github.com/miguelmota/Navigator.sendBeacon)，以防您需要添加对不受支持的浏览器的支持。如果该方法在浏览器中不可用，它将改为发送同步 AJAX 请求。

**更新：**

值得一提的是`sendBeacon()`只发送`POST`请求。如果您需要使用任何其他方法发送请求，另一种方法是使用[`fetch API`](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch)标志`keepalive`设置为 的`true`，这使其行为方式与`sendBeacon()`. [浏览器对 fetch API](https://caniuse.com/fetch)的支持大致相同。

```
fetch(url, {
   method: ..., 
   body: ...,            
   headers: ...,       
   credentials: 'include',
   mode: 'no-cors',
   keepalive: true,
}) 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-05-12T12:41:10.700

jQuery版本：

```
$(window).unload(function(){
    // Do Something
}); 
```

**更新**：jQuery 3：

```
$(window).on("unload", function(e) {
    // Do Something
}); 
```

谢谢加勒特

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-05-14T01:36:02.463

此处的文档鼓励监听 onbeforeunload 事件和/或在窗口上添加事件监听器。

```
window.addEventListener('beforeunload', function(event) {
  //do something here
}, false); 
```

您也可以使用函数或函数引用填充窗口的 .onunload 或 .onbeforeunload 属性。

尽管跨浏览器的行为没有标准化，但该函数可能会返回一个值，浏览器在确认是否离开页面时将显示该值。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-11-18T19:08:49.853

您可以使用`window.onbeforeunload`.

```
window.onbeforeunload = confirmExit;
function confirmExit(){
    alert("confirm exit is being called");
    return false;
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-11-18T19:07:13.617

该事件被调用`beforeunload`，因此您可以为 分配一个函数`window.onbeforeunload`。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-03-20T22:37:18.547

> 有没有办法安静地执行代码？（没有弹出）

我已经成功地使用了这个，其他方法（例如返回 null 或 false）有问题。在 ie、Edge、Chrome、Opera 上测试。

```
window.addEventListener('beforeunload', function (e) {
  // the absence of a returnValue property on the event will guarantee the browser unload happens
  delete e['returnValue'];
  // my code that silently runs goes here
}); 
```

上面的代码是直接从[Mozilla.org 的 onbeforeunload doc粘贴的](https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onbeforeunload)

更新：这似乎不适用于 IOS Safari :( 所以不是一个完整的解决方案，但也许它仍然可以帮助某人。*

# c++ - 向量 类型错误

> ID：13443505
> 
> 赞同：1
> 
> 时间：2012-11-18T19:05:33.017
> 
> 标签：c++, vector

我正在写机械工程的本科论文，但在绘制数据时遇到了麻烦。该项目是使用计算机视觉自动生成真实世界对象的高质量 CAD 模型。

我想将处理后的数据传递给 GNUPLOT 以便快速生成图表。我正在使用临时文件来回传递数据。（注意：如果您知道一种更清洁的方法，那么一定要指出来。）

但是，每次我尝试编译程序时，都会出现以下错误：

```
/home/ryan/Code/FullyReversed/fullyreversed.cpp:-1: error: undefined reference 
to `QImage fr::Plotter::plot<double>(std::vector<double, std::allocator<double> >,
unsigned int, unsigned int)' 
```

我不明白这个错误来自哪里。似乎编译器正在用`vector<double>`另一个更复杂的结构替换我

所以，简而言之，**我将数据传递给的方式有什么问题`Plotter::plot`？**

## 在我的程序的主要课程中：

```
void MainWindow::plotData()
{
    double i;
    vector<double> intensity;
    static QImage plot;

    for(i=-10;i<10;i+=.1){
        intensity.push_back(1/(i*i+1));
    }

    plot = Plotter::plot(intensity,800,600);
    showQ(plot);
} 
```

## 在辅助`Plotter`类中：

```
template <typename T>
QImage Plotter::plot(vector<T, allocator<T> > data, unsigned int width, unsigned int height){

    // for creating the filename
    char buffer[256];

    // the file we'll be writing to
    ofstream file;

    // loop counter
    unsigned int i;

    // time file generated
    time_t ftime = time(NULL);

    // generate the filename
    sprintf(buffer,"%d.dat",ftime);

    // open the file
    file.open(buffer);

    // write the data to the file
    for(i=0;i<data.size();i++){
        file << i << " " << data.at(i) << endl;
    }

    //generate the command
    sprintf(buffer,"gnuplot -e \"set terminal png size %d, %d;set output '%d.png';plot sin(x);\"",width,height,ftime);

    // call GNUPLOT
    system(buffer);

    // load the image
    sprintf(buffer,"%d.png",ftime);
    QImage out = QImage(buffer);

    return out;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:15:50.617

这是在源文件而不是头文件中定义模板函数的症状。

模板不是实际功能，它只是构建功能的说明。整个代码需要在您调用它的地方可用，以便编译器可以为您生成正确的函数。如果它没有它，它假设一个在其他地方定义，并让链接器找出它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:17:51.220

您似乎在问一个经常回答的问题：您在翻译单元中定义了模板，当您实际实例化模板时，编译器看不到它。只要您意识到如果编译器无法找到模板的定义以进行隐式实例化，则需要显式实例化模板。

显式实例化看起来像这样：

```
template QImage Plotter::plot(vector<double> data, unsigned int width, unsigned int height); 
```

# html - 从元素节点而不是属性节点类型中删除文本节点

> ID：13443510
> 
> 赞同：0
> 
> 时间：2012-11-18T19:06:24.283
> 
> 标签：html, dom

如何从所有元素节点中删除或清空所有文本节点，而不是从带有 PHP5 DOM 的 HTML 文件中的属性节点中删除或清空？输出的 HTML 必须包含作为原始文件的所有标签和属性（带有表示属性值的文本节点，未触及），但没有文本，就像一个空的 HTML 模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:39:12.470

如果你给我们看一个例子会更清楚。

无论如何，我认为可以使用[preg_match](http://php.net/manual/en/function.preg-match.php)函数使用正则表达式来完成。

您应该首先定义哪些是您认为是*文本节点*的元素，然后使用类似这样的内容，例如：

```
$finalText = preg_replace( "/\<span\>(.*?)\<\/span\>/is", "$1", $originalText); 
```

在这种情况下，我们将删除*跨度*节点中包含的文本。

您可以继续使用数组添加表达式，如下所示：

```
 $a = array(
        "/\[b\](.*?)\[\/b\]/is",
        "/\[i\](.*?)\[\/i\]/is",
        "/\[u\](.*?)\[\/u\]/is",
        "/\[t\](.*?)\[\/t\]/is",
        "/\[d\](.*?)\[\/d\]/is",
        "/\[url=(.*?)\](.*?)\[\/url\]/is",
        "/\[img\](.*?)\[\/img\]/is"
    );

    $b = array(
        "$1",
        "$1",
        "$1",
        "$1",       
        "$1",
        "$2",
        ""
    );  

    $finalText = preg_replace($a, $b, $originalText); 
```

# android - 带有 ItemSelected 的微调器

> ID：13443511
> 
> 赞同：-1
> 
> 时间：2012-11-18T19:06:25.090
> 
> 标签：android, android-spinner

我有一个带有数组的微调器，我在一个名为 array.spinner_title 的 string.xml 中创建

我怎样才能在项目上选择她，以便我可以选择项目

```
 ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource( SendTeacher.this,
                R.array.spinner_title, android.R.layout.simple_spinner_item);
        // Specify the layout to use when the list of choices appears
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        // Apply the adapter to the spinner
        spinner.setAdapter(adapter);
         spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
                @Override
                public void onItemSelected(AdapterView<?> adapterView, View view, int position, long id) {

                    // Do something

                }
                @Override
                public void onNothingSelected(AdapterView<?> adapter) {

                }
            }); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:22:04.493

据我了解您的问题，您想要获得所选项目。

在：

```
public void onItemSelected(AdapterView<?> adapterView, View view, int position, long id) {

     CharSequence item = (CharSequence)adapterView.getAdapter().getItem(position);

} 
```

对于可以包含任何其他对象（不仅是 CharSequence）的自定义适配器，请参见此[链接](http://www.mkyong.com/android/android-spinner-drop-down-list-example/)，例如

# inheritance - Luabind 继承：未定义自我

> ID：13443513
> 
> 赞同：0
> 
> 时间：2012-11-18T19:06:28.280
> 
> 标签：inheritance, lua, luabind

我刚刚让自己陷入了与 Luabind 的奇怪问题。我想从 Lua 继承 C++ 类，但是 Luabind 文档中描述的方式不起作用。

```
function MyGame.__init()
    Game.__init(self)
end 
```

这段代码只是使应用程序崩溃，因为`self`似乎未定义（`nil`如果打印出来则返回）。

我正在使用文档中描述的包装器结构。

```
struct GameWrapper: Game, luabind::wrap_base{
GameWrapper()
    : Game()
        {}

virtual int Loop(void){
     call<int>("Loop");
}

static int default_Loop(Game* ptr){
    return ptr->Game::Loop();
}

static void Lua(lua_State *lua){
    luabind::module(lua)
    [
    luabind::class_<Game, GameWrapper>("Game")
        .def(luabind::constructor<>())
        .def("Loop", &Game::Loop, &GameWrapper::default_Loop)
    ];
}
}; 
```

有什么想法我可能做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:35:42.153

> 但是 Luabind 文档中描述的方式不起作用。

是的，它确实。你只是没有做对。具体来说，您没有注意到使用 .`:`而不是`.`. 在声明函数时，它在 Lua 中具有[明确的含义](http://www.lua.org/manual/5.1/manual.html#2.5.9)：

```
function MyGame:__init()
    Game.__init(self)
end 
```

# curl - 如何将 curl 与 net-snmp 链接

> ID：13443515
> 
> 赞同：2
> 
> 时间：2012-11-18T19:06:37.383
> 
> 标签：curl, makefile, snmp, net-snmp

我正在编写一个使用（net）snmp 监控的应用程序。

因此，当我运行`snmpget`它时，它会触发我的 C 程序请求以获取数据。唯一的问题是我的程序使用了 libcurl。

下面的函数`getSettings`使用 libcurl：

```
HttpData* s = getSettings("max_ul_rate");
snmp_set_var_typed_value(requests->requestvb, ASN_OCTET_STR, (u_char *) &s->ptr, s->len+1); 
```

当我运行 netsnmp make 它给我一个错误，它没有找到 CURL。如何将 LIBCURL 添加到 NET-SNMP 的 Makefile？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:14:46.340

我在 StackOverFlow 上找到了一个有类似问题的人。使用 libcurl 为独立的一段代码创建一个 makefile 应该是相同的过程，所以你也可以用谷歌搜索。

[在 Makefile 中链接 cURL](https://stackoverflow.com/questions/6601041/linking-curl-in-makefile)

# android - ADT 21 中的仿真器硬件选项

> ID：13443518
> 
> 赞同：1
> 
> 时间：2012-11-18T19:06:45.163
> 
> 标签：android, configuration, hardware, emulation, adt

**TL；DR：如何在新的 ADT 21 中删除对模拟器中触摸屏的支持？基本上，我想模拟一个仅限（dpad 和 qwerty）的设备。详情如下。**

新的“设备定义”和“Android 虚拟设备”都没有显示编辑硬件的方法，因为[旧对话框](http://developer.android.com/tools/devices/managing-avds.html#createavd)不再可用。

意识到这一点，我在启动模拟器之前自己编辑了虚拟设备 config.ini 文件以包含该`hw.touchscreen`行。它没有效果，这段代码：

```
Toast.makeText(getActivity(),
    String.valueOf(getActivity().getPackageManager().hasSystemFeature("android.hardware.touchscreen")), 
    Toast.LENGTH_SHORT).show(); 
```

显示`true`。我怀疑这与新的（对我而言）`hw.device.name`选项有关，它与新的*设备定义*选项卡有关。还有一个 devices.xml 文件，其中包括一个触摸屏定义（相关行）：

```
<d:device>
    <d:name>3.5 nHD</d:name>
    <d:manufacturer>User</d:manufacturer>
    <d:meta/>
    <d:hardware>
      <d:screen>
        <d:screen-size>normal</d:screen-size>
        <d:diagonal-length>3.50</d:diagonal-length>
        <d:pixel-density>mdpi</d:pixel-density>
        <d:screen-ratio>long</d:screen-ratio>
        <d:dimensions>
          <d:x-dimension>360</d:x-dimension>
          <d:y-dimension>640</d:y-dimension>
        </d:dimensions>
        <d:xdpi>209.80</d:xdpi>
        <d:ydpi>209.80</d:ydpi>
        <d:touch>
          <d:multitouch>jazz-hands</d:multitouch>
          <d:mechanism>finger</d:mechanism>
          <d:screen-type>capacitive</d:screen-type>
        </d:touch>
      </d:screen>
(...) 
```

我试过只删除该`d:touch`部分。还是没有效果。有任何想法吗？

# c++ - 指针数组段错误

> ID：13443521
> 
> 赞同：1
> 
> 时间：2012-11-18T19:07:14.060
> 
> 标签：c++, arrays

我不完全确定为什么这段代码会出现段错误。我有一个要创建的对象指针数组。这是我的代码。

```
 edge **test = new edge*[a]; //Edge is a predefined class I have created. a is a my size of my array.
   graphCreate2(test, vertices, roads, a); //Note roads is an edge class I have already created also 
```

但是，当我尝试访问 edge ** test 的元素时，会出现段错误。这是我访问它的方式。

```
void graphCreate2(edge **test, int vertices, edge *roads, int a)
{
  for(int i = 0; i < a; i++)
  {
    e[i]->setEdgeSrc(roads[i].getEdgeSrc());
    e[i]->setEdgeDes(roads[i].getEdgeDes());
    e[i]->setLength(roads[i].getLength());
    cout << e[i]->getLength() << " " << e[i]->getEdgeSrc() << " " << endl;
  }
} 
```

可能有人知道我为什么会收到这个段错误吗？我以为我为它分配了内存，因为在创建数组时调用了构造函数谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T19:09:49.520

*不会*为每个 调用构造函数`edge`。您只是在创建指针数组，但它们指向垃圾。

您需要在一个循环中创建它们。

```
void graphCreate2(edge **test, int vertices, edge *roads, int a)
{
  for(int i = 0; i < a; i++)
  {
    test[i] = new edge();  // create the edge
    test[i]->setEdgeSrc(roads[i].getEdgeSrc());
    test[i]->setEdgeDes(roads[i].getEdgeDes());
    test[i]->setLength(roads[i].getLength());
    cout << test[i]->getLength() << " " << test[i]->getEdgeSrc() << " " << endl;
  }
} 
```

# node.js - npm 将所有模块安装在 /usr/local/lib/node_modules/

> ID：13443526
> 
> 赞同：10
> 
> 时间：2012-11-18T19:07:56.377
> 
> 标签：node.js, npm

我在 Ubuntu 12.10 上安装了 node.js 0.8.14。我在我的主目录中创建了一个带有子目录的目录`node_modules`。我想在那里安装一些本地节点模块，但
`npm install myModule` 在这个目录中运行会安装这个模块（与安装带有标志`/usr/local/lib/node_modules/`的模块相同的行为`-g`

中没有节点路径`.bashrc`。

知道如何安装本地节点模块吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-19T07:31:52.100

经过一些进一步的研究，我找到了解决方案。

运行命令`npm config ls`显示默认配置`global=false`（您会看到默认配置`npm config ls -l`）被`global=true`in`/home/vsdev/.npmrc`和覆盖`/usr/local/etc/npmrc`。

恢复它以`global=false`解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T19:56:11.540

这很奇怪。

*   仅供参考，您不需要创建 node_modules 目录，npm 会为您完成
*   npm 通常只安装到当前目录。即使您正在安装的软件包被配置为首选全局安装，npm 也会在本地安装它，除非您明确传递`-g`参数。
*   你可以运行以下 shell 命令并确认 npm 真的是真正的 npm 吗？
    *   `which npm`
    *   `alias | grep npm`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-04T06:23:26.950

npm install load all in node_modules 那么它可能是第 3 版的行为[http://blog.npmjs.org/post/110924823920/npm-weekly-5](http://blog.npmjs.org/post/110924823920/npm-weekly-5)或@vsdev 提到的，所以一旦你确定它是第3版的行为并且你想要和它一起去，然后它就很好，其他的就在下面

1-卸载所有模块..进入项目中的node_modules文件夹，然后执行：npm uninstall *

2- 告诉 npm 使用旧版捆绑安装此安装：

npm install --legacy-bundling 一个“永久”的替代方案：

将您的 npm 配置设置为始终使用旧版捆绑...

npm set legacy-bundling=true

..并照常运行：

npm 安装

*使用遗留捆绑获取依赖项将花费更多时间，因为将安装相同依赖项的许多不同版本。

# c++ - 理论上，C++ 实现能否并行计算两个函数参数？

> ID：13443532
> 
> 赞同：68
> 
> 时间：2012-11-18T19:08:43.353
> 
> 标签：c++, language-lawyer

给定以下函数调用：

```
f(g(), h()) 
```

由于未指定函数参数的评估顺序（据我所知，在 C++11 中仍然如此），理论上是否可以并行执行`g()`实现`h()`？

这种并行化只能启动`g`并且`h`已知是相当微不足道的（在最明显的情况下，仅访问其身体本地的数据），以免引入并发问题，但是，超出该限制，我看不到任何禁止它的东西.

那么，标准允许吗？即使只是按照假设规则？

[（在[这个答案](https://stackoverflow.com/a/9116081/560648)中，Mankarse 另有说法；但是，他没有引用标准，我的通读`[expr.call]`也没有发现任何明显的措辞。）]

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-18T23:50:31.327

要求来自`[intro.execution]/15`：

> ... 调用函数时 ... 调用函数（包括其他函数调用）中的每个求值，在被调用函数的主体执行之前或之后没有明确排序**，**相对于调用函数 [脚注：**换句话说，函数执行不会相互交错。**]。

因此，主体的任何执行都`g()`必须与（即不重叠）的评估`h()`（因为`h()`是调用函数中的表达式）进行不确定的排序。

这里的关键点是`g()`和`h()`都是函数调用。

（当然，as-if 规则意味着不能完全排除这种可能性，但绝不应该以可能影响程序可观察行为的方式发生。这样的实现最多只会改变程序的性能特征编码。）

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-18T19:25:45.427

只要您不知道，无论编译器如何评估这些函数，都完全取决于编译器。显然，函数的评估不能涉及对共享、可变数据的任何访问，因为这会引入数据竞争。基本指导原则是“好像”规则和基本的可观察操作，即访问`volatile`数据、I/O 操作、访问原子数据等。相关部分是 1.9 [intro.execution]。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-18T19:24:45.813

除非编译器确切地知道它们调用的 , 和任何东西`g()`是做什么的。`h()`

这两个表达式是函数调用，可能有未知的副作用。因此，将它们并行化可能会导致这些副作用的数据竞争。由于 C++ 标准不允许参数评估在表达式的任何副作用上导致数据竞争，因此编译器只有在*知道*不可能发生此类数据竞争时才能并行化它们。

这意味着遍历每个函数并查看它们所做的和/或调用的确切操作，然后跟踪*这些*函数等。在一般情况下，这是不可行的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T06:23:43.470

简单的答案：当函数被*排序*时，即使是不确定的，两者之间也不可能出现竞争条件，如果它们被并行化，则情况并非如此。即使是一对单行“微不足道”的功能也可以做到。

```
void g()
{
    *p = *p + 1;
}

void h()
{
    *p = *p - 1;
} 
```

如果`p`是 and 共享的名称`g`，则以任何顺序`h`依次调用`g`and`h`将导致指向的值`p`不改变。如果它们是并行的，则读取`*p`和分配它可以在两者之间任意交错：

1.  `g`读取`*p`并找到值 1。
2.  `f`读取`*p`并找到值 1。
3.  `g`将 2 写入`*p`.
4.  `f`, 仍然使用它之前读取的值 1 将写入 0 到`*p`.

因此，当它们被并行化时，行为是不同的。

# android - Android按钮选择并按下drawable

> ID：13443534
> 
> 赞同：31
> 
> 时间：2012-11-18T19:08:47.413
> 
> 标签：android, button, styles, android-drawable, xml-drawable

我正在尝试使用状态按下和选择来制作一个按钮，我已经对选项卡做了同样的事情并且它可以工作，但我不知道为什么这里不起作用。我已经这样做了：

button_sel.xml

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
       android:shape="rectangle">
    <gradient android:startColor="@color/azulado" 
              android:endColor="@color/azulBrillante"
              android:angle="270" />
     <corners android:radius="@dimen/corner_radius" />
     <stroke android:width="2px" 
             android:color="@color/blanco" />
 </shape> 
```

button_unsel.xml

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
       android:shape="rectangle">
    <gradient android:startColor="@color/botonesD" 
              android:endColor="@color/botones"
              android:angle="270" />
    <corners android:radius="@dimen/corner_radius" />
    <stroke android:width="2px" 
            android:color="@color/blanco" />
</shape> 
```

以及选择器 button.xml：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/button_sel"  
          android:state_selected="true" 
          android:state_pressed="true"/>
<item android:drawable="@drawable/button_unsel" 
      android:state_selected="false" 
      android:state_pressed="false"/>
</selector> 
```

在这里，我将可绘制对象称为背景：

```
 <style name="button">
    <item name="android:background">@drawable/button</item>
    <item name="android:textSize">@dimen/text_size</item>
    <item name="android:padding">@dimen/padding_button</item>
    <item name="android:textColor">@color/blanco</item>
 </style> 
```

谢谢！！！！

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-11-18T19:49:48.153

选择器中的第一项仅在按下并选择按钮时使用。如果您想在`button_sel`按下或选择按钮时使用，您应该执行以下操作：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/button_sel" android:state_selected="true" />
    <item android:drawable="@drawable/button_sel" android:state_pressed="true" />
    <item android:drawable="@drawable/button_unsel" />
</selector> 
```

项目从上到下评估，最后一个是默认值。虽然我不确定 state_selected 是否对按钮有意义。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-09-20T05:54:07.333

可以使用形状内联项。

```
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
        <item android:state_pressed="true" >
            <shape....>
        </item>
        <item android:state_selected="true" >
            <shape....>
        </item>
        <item android:state_pressed="true" android:state_selected="true" >
            <shape...>
        </item>
   </selector> 
```

对于样品：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" >
        <shape
            android:shape="rectangle">
            <gradient android:startColor="@color/md_amber_300"
                android:endColor="@color/md_amber_50"
                android:angle="270" />
            <corners android:radius="@dimen/fab_margin" />
            <stroke android:width="2px"
                android:color="@color/primaryColorDark_orange" />
        </shape>
    </item>
    <item android:state_pressed="true" >
        <shape
            android:shape="rectangle">
            <gradient android:startColor="@color/md_amber_300"
                android:endColor="@color/md_amber_50"
                android:angle="270" />
            <corners android:radius="@dimen/fab_margin" />
            <stroke android:width="2px"
                android:color="@color/primaryColorDark_orange" />
        </shape>
    </item>
    <item android:state_pressed="true" android:state_selected="true" >
        <shape
            android:shape="rectangle">
            <gradient android:startColor="@color/md_teal_500"
                android:endColor="@color/md_blue_400"
                android:angle="270" />
            <corners android:radius="@dimen/fab_margin" />
            <stroke android:width="2px"
                android:color="@color/md_amber_A400" />
        </shape>
    </item>
</selector> 
```

# objective-c - 使用 NSSet 对象设置 NSDictionary

> ID：13443537
> 
> 赞同：1
> 
> 时间：2012-11-18T19:08:55.437
> 
> 标签：objective-c, nsdictionary, nsset

有没有办法在一个命令中使用 NSSet 对象设置 NSSDictionary？或者，是否需要首先为所有集合创建对象？

例如，这样的事情可能吗？

```
NSDictionary *dictionary=[NSDictionary dictionaryWithObjectsAndKeys:{@"orange",@"lemon"},@"citrus",{@"horse",@"moose",@"goose"},@"animals",nil]; 
```

谢谢阅读。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T19:26:06.833

没有 NSSet 文字，没有。但是你可以使用一个 NSArray 文字来初始化一个 NSSet……它是你能得到的最短的：

```
NSDictionary *dictionary = @{
    @"citrus":  [NSSet setWithArray:@[@"orange", @"lemon"]],
    @"animals": [NSSet setWithArray:@[@"horse", @"moose", @"goose"]]}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T19:29:14.940

Objective-C中没有`NSSet`文字，只有`NSArray`文字。

`NSDictionary *dictionary = @{ @"citrus" : @[ @"orange", @"lemon" ], @"animals" : @[ @"horse", @"moose" ,@"goose" ] };`

因此，上面将为您`NSDictionary`提供一个`NSArray`包含`orange`and`lemon`的 key`citrus`和一个`NSArray`包含`horse`,`moose`和`goose`key 的内容`animals`。

`NSArrays`你可以像这样 访问那些`dictionary[@"animals"] and dictionary[@"citrus"]`

您也可以嵌套这些文字访问器，这样 `dictionary[@"animals"][0]`会给您`horse`.

甚至使用数组方法

`[dictionary[@"citrus"] count]`会给你`2`

# android - 数据库查询的奇怪动作

> ID：13443542
> 
> 赞同：1
> 
> 时间：2012-11-18T19:09:32.750
> 
> 标签：android, database, sqlite

我有一个查询，它根据 Spinner 中选择的值从 DB 中选择人名，问题是当从 Spinner 中选择的项目是英语查询时，应用程序运行良好，但是当从 Spinner 中选择的项目是波斯语时，应用程序崩溃。有人能帮我吗？

```
Spinner spin = (Spinner)findViewById(R.id.spinner_expert);
String selectedItemFromSpin = spin.getSelectedItem().toString();
Cursor c = myDatabase.rawQuery("SELECT PName FROM tbl_staff WHERE PMajor LIKE '%" + selectedItemFromSpin  + "%'", null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:47:37.220

没关系，我找到了。
为了让阿拉伯语类型或波斯语类型的文本工作，我需要使用一个名为 FARSI 的类，它有一个将波斯语反转为 Unicode 的方法。感谢他，我使用了一个名为“breceivedmail”的用户的代码。

解决方案：

```
Cursor c = myDatabase.rawQuery("SELECT PName FROM tbl_staff WHERE PMajor LIKE '%" + Farsi.ConvertToRealFarsi(selectedItemFromSpin)  + "%'", null); 
```

他的代码在这个地址：[https ://stackoverflow.com/a/7962813/1290467](https://stackoverflow.com/a/7962813/1290467)

# android - 在 Android 中唤醒/睡眠时启动 Activity

> ID：13443543
> 
> 赞同：5
> 
> 时间：2012-11-18T19:09:35.233
> 
> 标签：android

我想制作一个计时器，它在 Android 设备被唤醒时开始计数，并在 Android 设备设置为睡眠时停止。我什么也没发现，唤醒/睡眠如何触发活动。

我希望你能帮我解决我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:22:52.120

使用`BroadcastReceiver`和服务来捕捉 Screen_on 和_off.... 例如...

```
public class InternetReceiver extends BroadcastReceiver{
    private boolean screenOff;
    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
            screenOff = true;
        } else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {
            screenOff = false;
        }
        Intent i = new Intent(context, InternetService.class);
        i.putExtra("screen_state", screenOff);
        context.startService(i);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T19:06:37.737

我使用了一个像 timonvlad 说的 BroadcastReceiver 但是 ACTION_SCREEN_ON 和 ACTION_SCREEN_OFF 不能被 XML 调用，所以我创建了一个服务。该服务必须在 XML 中注册，然后我使用此代码

```
public class OnOffReceiver extends Service {

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    registerReceiver(new BroadcastReceiver() {

        public void onReceive(Context context, Intent intent) {
                        //This happens when the screen is switched off
          }
        }, new IntentFilter(Intent.ACTION_SCREEN_OFF));

    registerReceiver(new BroadcastReceiver() {

          public void onReceive(Context context, Intent intent) {
                          //This happens when the screen is turned on and screen lock deactivated
          }
        }, new IntentFilter(Intent.ACTION_USER_PRESENT));

    return START_STICKY;
}

@Override
public void onDestroy() {
    super.onDestroy();
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T19:15:23.843

您应该创建一个侦听[ACTION_BOOT_COMPLETED](http://developer.android.com/reference/android/content/Intent.html#ACTION_BOOT_COMPLETED)意图的 BroadcastReceiver。在实现中，您必须存储收到该意图的时间戳。

之后，您可以创建一个活动来检索该时间戳，并计算手机运行了多少时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T19:57:51.010

设置设备唤醒时将触发的重复事件：

```
AlarmManager.setRepeating(AlarmManager.RTC, time, period, pendingIntent); 
```

然后捕捉这些警报并增加您的计时器计数器，它将在设备唤醒时计数。

设备唤醒时不要开始活动。用户不会对应用程序的这种行为感到满意。改为使用通知。

# iphone - 阵列清洗方法错误

> ID：13443544
> 
> 赞同：0
> 
> 时间：2012-11-18T19:09:36.683
> 
> 标签：iphone, ios, xcode, nsarray

我正在尝试使用这种阵列清理方法，似乎有错误。我无法发现它，我知道该数组包含 3116 个项目，输出 3116 个（而且我知道事实上有三个重复项。

请指教，谢谢！

```
-(NSArray*) removeDuplicates:(NSArray*)inputArray{
NSMutableArray *arrayToClean = [NSMutableArray arrayWithArray:inputArray];
for (int i =0; i<[arrayToClean count]; i++) {

    for (int j=(i+1); j < [arrayToClean count]; j++) {
        if ([[arrayToClean objectAtIndex:i] isEqual:[arrayToClean
                                                     objectAtIndex:j]]) {
            [arrayToClean removeObjectAtIndex:j];
            j--;

        }

    }
}
NSArray *arrayToReturn = [NSArray arrayWithArray:arrayToClean];
return arrayToReturn; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:27:21.980

NSSet 将使这更容易：

```
-(NSArray *)removeDuplicates:(NSArray *)inputArray {
    NSSet *unique = [NSSet setWithArray:inputArray];

    return [unique allObjects];
} 
```

请注意，一套没有保证的顺序。如果您需要数组中的对象按特定顺序排列，那么您应该根据需要对结果数组进行排序。

使用 an 而不是原始数组也可能是合适的`NSSet`，那么您根本不需要担心重复。但这取决于阵列的其他需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T20:04:27.880

嘿，您可以为此使用另一种选择。您可以使用`NSSet`此处来执行此任务。

[NSSet](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSSet_Class/Reference/Reference.html)为不同对象的静态集合声明了编程接口 当元素的顺序不重要并且测试对象是否包含在集合中的性能是一个考虑因素时，您可以使用集合作为数组的替代方案——当数组是有序的时，成员资格的测试比集合要慢。

你只需要调用下面的方法。

```
-(NSArray *)removeDuplicates:(NSArray *)inputArray {
   NSSet *finalData = [NSSet setWithArray:inputArray];

    return [finalData allObjects];
} 
```

如果确实在上述清洁重复项的方式中遇到任何问题，那么您可以尝试另一种替代方法。

```
 -(NSArray *)removeDuplicates:(NSArray *)inputArray {
  NSMutableArray *inputArray1=[NSMutableArray arrayWithArray:inputArray];
  NSMutableArray  *finalARray=[[NSMutableArray alloc]init];
    for (id obj in inputArray1)
   {
    if (![finalARray containsObject:obj])
     {
        [finalARray addObject: obj];

 }
 NSLog(@"new array is %@",finalARray);
 }
 return finalARray;
} 
```

我希望它可以帮助你...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T20:18:29.800

这是我在以前的项目中使用的一个辅助函数来做同样的事情

```
- (NSMutableArray *)removeDuplicates:(NSMutableArray *)sortedArray{
NSMutableSet* valuesAdded = [NSMutableSet set];
NSMutableArray* filteredArray = [[NSMutableArray alloc] init];
NSString* object;

/* Iterate over the array checking if the value is a member of the set. If its not add it
 * to the set and to the returning array. If the value is already a member, skip over it.
 */
for (object in sortedArray){
    if (![valuesAdded member:object]){
        [valuesAdded addObject:object];
        [filteredArray addObject:object];
    }
}
return filteredArray;
} 
```

# .net - aspx GridView 强制 DIV 为 100%

> ID：13443546
> 
> 赞同：2
> 
> 时间：2012-11-18T19:09:41.520
> 
> 标签：.net, html, gridview

我有三个要并排展示的 Gridview。我将它们放在单独的 DIV 块中，但是第一个 DIV 始终以浏览器宽度的 100% 显示。无论我用 CSS 做什么来让其他人排成一行，这个 DIV 都会把所有东西都推倒。

其他两个 DIV 似乎没有这个问题，尽管这三个 DIV 共享相同的 CSS。

[这个链接](http://forums.asp.net/t/1789673.aspx/1 "这个链接")解释了我认为嵌套 DIV 应该发生的事情，但在这种情况下不会。浏览器似乎认为有内容跨越页面的宽度。但是什么数据？或者我如何禁用它？

更改 DIV 和 GridView 的宽度、浮动和显示的所有可能排列完全没有区别。

这是 gridview 代码（所有三个 gridview 几乎相同，每个显示两个小列）：

```
<div id="pending_registrations">

                     <asp:GridView ID="gvuserProfiles" runat="server"
                        OnRowCommand="gvuserProfiles_RowCommand"
                        AutoGenerateColumns="False" 
                        GridLines="None"
                        CssClass="grid" 
                        AlternatingRowStyle-CssClass="alt">

                        <Columns>
                            <asp:TemplateField HeaderText="Registrations">
                                <ItemTemplate>
                                 ...snip...
                                </ItemTemplate>
                            </asp:TemplateField>

                            <asp:TemplateField HeaderText="Type">
                                <ItemTemplate>
                                   ...snip...
                                </ItemTemplate>
                            </asp:TemplateField>
                        </Columns>

                    </asp:GridView>

     </div> 
```

CSS是（我的最新版本）：

```
 #pending_registrations{
       display:inline-block;
       vertical-align:top;
 } 
```

这是三个带有 Firebug的DIV[的图片](http://i.stack.imgur.com/CoYti.png)，显示了第一个 DIV 的宽度。如您所见，后两个 DIV 显示内联就好了。

# javascript - 如何在我的 .js.erb 文件中使用单击逻辑来根据单击的按钮呈现不同的 HTML？

> ID：13443547
> 
> 赞同：0
> 
> 时间：2012-11-18T19:09:47.640
> 
> 标签：javascript, ruby-on-rails, ajax

我有一个四步表单，用户通过它完成一个过程。每个步骤都是一个单独的部分。我想使用 Ajax 引导用户浏览表单，并根据他们在流程中所处的步骤决定显示哪个部分。我可以根据单击的按钮判断他们在哪一步。但是，一旦我添加了点击逻辑，下面的代码就不会在浏览器中呈现任何内容。当我取出点击监听器时，一切正常。

```
$(function(){
    $("#ask2-btn").click(function(e){
        $("div#ask").html("<%= escape_javascript(render('asks/ask3')) %>")
    });

    $("#ask3-btn").click(function(e){
        $("div#ask").html("<%= escape_javascript(render('asks/ask4')) %>")
    });

}); 
```

**更新：**这是来自未呈现的浏览器的响应

```
$(function(){
    $("#ask2-btn").click(function(e){
        $("div#ask").html("<p class=\"lead\">Help with this issue<\/p>\n<ul><li class=\"profile\">Sam Smith<\/li><\/ul>\n<em>\"Expected outcome of the ASK?<\/em>\n    <form accept-charset=\"UTF-8\" action=\"/asks/125\" class=\"edit_ask\" data-remote=\"true\" id=\"edit_ask_125\" method=\"post\"><div style=\"margin:0;padding:0;display:inline\"><input name=\"utf8\" type=\"hidden\" value=\"&#x2713;\" /><input name=\"_method\" type=\"hidden\" value=\"put\" /><input name=\"authenticity_token\" type=\"hidden\" value=\"2/vhLplWpnB5fSrkjgku27jzaJ0lwLK3GeOWchn6r8M=\" /><\/div>\n        \n        <input id=\"ask_category\" name=\"ask[category]\" type=\"hidden\" value=\"Advice\" />\n        <input class=\"btn btn-success btn-category\" name=\"commit\" type=\"submit\" value=\"Advice\" />\n<\/form>    <form accept-charset=\"UTF-8\" action=\"/asks/125\" class=\"edit_ask\" data-remote=\"true\" id=\"edit_ask_125\" method=\"post\"><div style=\"margin:0;padding:0;display:inline\"><input name=\"utf8\" type=\"hidden\" value=\"&#x2713;\" /><input name=\"_method\" type=\"hidden\" value=\"put\" /><input name=\"authenticity_token\" type=\"hidden\" value=\"2/vhLplWpnB5fSrkjgku27jzaJ0lwLK3GeOWchn6r8M=\" /><\/div>\n        \n        <input id=\"ask_category\" name=\"ask[category]\" type=\"hidden\" value=\"Introduction\" />\n        <input class=\"btn btn-success btn-category\" name=\"commit\" type=\"submit\" value=\"Introduction\" />\n<\/form>    <form accept-charset=\"UTF-8\" action=\"/asks/125\" class=\"edit_ask\" data-remote=\"true\" id=\"edit_ask_125\" method=\"post\"><div style=\"margin:0;padding:0;display:inline\"><input name=\"utf8\" type=\"hidden\" value=\"&#x2713;\" /><input name=\"_method\" type=\"hidden\" value=\"put\" /><input name=\"authenticity_token\" type=\"hidden\" value=\"2/vhLplWpnB5fSrkjgku27jzaJ0lwLK3GeOWchn6r8M=\" /><\/div>\n        \n        <input id=\"ask_category\" name=\"ask[category]\" type=\"hidden\" value=\"Support\" />\n        <input class=\"btn btn-success btn-category\" name=\"commit\" type=\"submit\" value=\"Support\" />\n<\/form>    <form accept-charset=\"UTF-8\" action=\"/asks/125\" class=\"edit_ask\" data-remote=\"true\" id=\"edit_ask_125\" method=\"post\"><div style=\"margin:0;padding:0;display:inline\"><input name=\"utf8\" type=\"hidden\" value=\"&#x2713;\" /><input name=\"_method\" type=\"hidden\" value=\"put\" /><input name=\"authenticity_token\" type=\"hidden\" value=\"2/vhLplWpnB5fSrkjgku27jzaJ0lwLK3GeOWchn6r8M=\" /><\/div>\n        \n        <input id=\"ask_category\" name=\"ask[category]\" type=\"hidden\" value=\"Money\" />\n        <input class=\"btn btn-success btn-category\" name=\"commit\" type=\"submit\" value=\"Money\" />\n<\/form>    <form accept-charset=\"UTF-8\" action=\"/asks/125\" class=\"edit_ask\" data-remote=\"true\" id=\"edit_ask_125\" method=\"post\"><div style=\"margin:0;padding:0;display:inline\"><input name=\"utf8\" type=\"hidden\" value=\"&#x2713;\" /><input name=\"_method\" type=\"hidden\" value=\"put\" /><input name=\"authenticity_token\" type=\"hidden\" value=\"2/vhLplWpnB5fSrkjgku27jzaJ0lwLK3GeOWchn6r8M=\" /><\/div>\n        \n        <input id=\"ask_category\" name=\"ask[category]\" type=\"hidden\" value=\"Don&#x27;t know\" />\n        <input class=\"btn btn-success btn-category\" name=\"commit\" type=\"submit\" value=\"Don&#x27;t know\" />\n<\/form>")
    });

    $("#ask3-btn").click(function(e){
        $("div#ask").html("<p class=\"lead\">Help with this issue<\/p>\n<ul>\n  <li class=\"profile\">Sam Smith<\/li>\n <li class=\"check\"><\/li>\n<\/ul>\n <hr/>\n <a href=\"/\">Add another ASK<\/a>")
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T23:23:53.280

经过几天的尝试，我决定在客户端简单地使用 Javascript（不是 Ajax）来呈现表单中的四个步骤，而无需刷新 HTTP。我没有使用四个单独的表单，而是使用了一个拆分为四个单独 div 的表单。Div 的 2 - 4 从一开始就被隐藏了，我编写了 Javascript 来监听过程中每个步骤的“提交”按钮的点击。在单击事件中，我从字段输入中复制了值，并使用 .text 将值写入屏幕，以给用户留下它已保存到数据库的印象。

根据我的经验，我不确定 Rails 和 Ajax 能否很好地使用 Ajax 处理具有多个连续更新操作的复杂表单。

这是Javascript：

```
<script>
    $("#ask1-btn").click(function(e){
        findDescription();
        $("div#ask-list").toggleClass("hidden");
        $("div.ask1").toggleClass("hidden");
        $("div.ask2").toggleClass("hidden");
        e.preventDefault();
    });

    $("#ask2-btn").click(function(e){
        askStep3();
    });

    function askStep3(){
        findContact();
        $("div.ask2").toggleClass("hidden");
        $("div.ask3").toggleClass("hidden");
    };

    function findDescription(){
        var ask_description = document.getElementById("ask-desc-input").value;
        $("li#ask-description p.cname").text(ask_description);
    };

    function findContact(){
        var ask_contact = document.getElementById("ask-contact-input").value;
        $("li#ask-contact").text(ask_contact);
    };

</script> 
```

# java - 变量错误，无法转换为布尔错误

> ID：13443550
> 
> 赞同：0
> 
> 时间：2012-11-18T19:09:50.817
> 
> 标签：java

所以我加粗了错误是否正在发生，但我不明白它们为什么会发生。这对我来说没有意义。

```
 for(int i = 1; i < Array.getLength(purchases);i++)
    {
        System.out.print("\n");
        System.out.print("Enter a price for item #"+i+": $");
        double temp3=input.nextDouble();
        double price=temp3;

            if(price=>0) **<==it wont let me have both = and >**
            {
                total=total+price;
                double temp1=total*100;
                int temp2=(int)temp1;
                total=temp2/100.0;
        System.out.print("That was $"+price+". Your total is $"+total);
            }
       else(price==0) **<=="The left-hand side of an assignment must be a variable"**
            {

            }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:10:44.727

```
if(price=>0) 
```

这应该是： -

```
if(price >= 0) 
```

`>`注意和的顺序`=`。`>`先来。

而且： -`else(price==0)`应该只是`else`，你不需要在你的`else`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T19:11:06.367

你的**大于或等于**排序是错误的。

```
if(price=>0) 
```

应该

```
if(price>=0) 
```

正确的顺序是使用`>=`

```
 else(price==0) 
```

应该

```
 else if(price<0) //should be less than zero , because you are already checking if price is >=0 in your if. 
```

否则就**足够****了**

**嵌套 if-else 语法**：

```
 if(somecond){

   }
   else if(somecond){
    }
   else{ // you don't mention any condition for else, as it would be the last condition.

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T19:12:04.027

In java, "greater than or equal to" is >=. Also, for the second error, you should have "else if", not just "else."

# ios - 调整 UINavigationController ViewControllers NSArray 的顺序

> ID：13443554
> 
> 赞同：1
> 
> 时间：2012-11-18T19:10:32.763
> 
> 标签：ios, uinavigationcontroller, segue, uinavigationitem

我想用“HomeScreen”启动我的应用程序，它（在其他一些选项中）显示一个按钮来选择图像并使用上一个会话中的一些图像恢复编辑。

*   按钮：选择
*   按钮：编辑

When choosing "Edit" it will bring the user to an edit view, using Navigation controllers etc. fine so far When choosing "Pick" it will show the iOS imagePickerController etc.

但是，选择图像后，我不想返回“主屏幕”。当 UIImagePickerController 被解除时，它需要“发现”“编辑”视图，就好像它已被插入到 UIImagePickerController 下方的“ViewControllers NSArray”中一样。

“编辑”阶段的“返回”按钮总是将用户带回“主屏幕”，因此即使通过 imagePicker 进入此屏幕，它仍然必须返回“主屏幕”

“HomeScreen”需要成为后退按钮的原因之一是该应用程序将是免费应用程序，但在 HomeScreen 将可以选择执行 IAP 以解锁更多功能，更像“关于”等。 .

所以......我怎样才能调整导航控制器的顺序

还是有更好的方法从 A 到 B 到 C 再回到 A（或从 A 到 C 再回到 A）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:20:05.887

在场景的左上角为“C”添加一个条形按钮项（这将覆盖自动放置在那里的后退按钮）。

接下来为该按钮创建一个 IBAction，执行如下操作：

```
- (IBAction)goToA:(id)sender {
    [self.navigationController popToRootViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T14:27:19.080

# c++ - 收缩数组函数给出断言错误

> ID：13443555
> 
> 赞同：3
> 
> 时间：2012-11-18T19:10:34.403
> 
> 标签：c++, assertions

我正在练习如何创建一个二维数组并缩小它。这是我的功能：

```
void Resize(int rownums,int columnnums)
{
    MyMatrix newM(rownums,columnnums);
    for(int i=0;i<rownums;i++)
        for(int j=0;j<columnnums;j++)
            newM.table[i][j]=table[i][j];

    for(int i=0;i<rows;i++)
    for(int j=0;j<columns;j++)
    delete []table[j];

    delete[]table;
    rows=newM.rows;
    columns=newM.columns;
    table=new string*[rows];
    for(int i=0;i<rows;i++)
        table[i]=new string[columns];

    for(int i=0;i<rows;i++)
        for(int j=0;j<columns;j++)
            table[i][j]=newM.table[i][j];
} 
```

问题是它给了我一个调试断言失败。我不明白我做错了什么或如何解决它！你有什么想法可以帮到我！！谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:28:07.097

这是不正确的：

```
for(int i=0;i<rows;i++)
for(int j=0;j<columns;j++)
delete []table[j]; 
```

您不需要外部循环，因为它会导致删除已删除的数组，从而导致未定义的行为。

# javascript - 类似相框的小部件不适用于 Lion/Mountain？

> ID：13443557
> 
> 赞同：2
> 
> 时间：2012-11-18T19:10:44.000
> 
> 标签：javascript, macos, safari, dashcode

我尝试为 Mac OS Dashboard 编写自己的小部件 - 一种显示丢弃图像的相框，但比我前一段时间发现或使用的其他小部件更漂亮。

为了获得一些资源/示例，我首先下载了……第二……第三个这种类型的小部件，但没有任何效果。我拖放图像，但它没有为我加载，没有任何反应。我使用 10.8.2 操作系统。你能检查一下吗，或者你知道为什么它不起作用？

我尝试使用 DeskPhoto ( [http://www.apple.com/downloads/dashboard/webcams/deskphoto.html)、Modern](http://www.apple.com/downloads/dashboard/webcams/deskphoto.html) Moments ( [http://www.apple.com/downloads/dashboard/webcams/momentswidget_claudioprocida.html](http://www.apple.com/downloads/dashboard/webcams/momentswidget_claudioprocida.html) ) 和相框（[http://www.apple.com/downloads/dashboard/webcams/pictureframe.html](http://www.apple.com/downloads/dashboard/webcams/pictureframe.html)）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T09:55:14.733

我遇到了同样的问题，但我找到了解决方法。

首先在浏览器中打开您的图像，然后将您的图像从那里拖到您的小部件上。我发现所有小部件都可以使用该方法。

希望这对你有用！=)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T01:19:00.500

我也有完全一样的问题。最后使用了允许复制和粘贴图片的装饰。也许你可以使用那种方法？

[http://www.apple.com/downloads/dashboard/webcams/decor.html](http://www.apple.com/downloads/dashboard/webcams/decor.html)

# java - 如何使用 Google Drive API（Java 客户端）对应用程序进行单元测试

> ID：13443560
> 
> 赞同：11
> 
> 时间：2012-11-18T19:10:46.867
> 
> 标签：java, google-drive-api

[使用Google Drive API（Java 客户端）](http://code.google.com/p/google-api-java-client/wiki/APIs#Drive_API)对应用程序进行单元测试的最佳方法是什么？

似乎编写的应用程序在很大程度上依赖于[`Drive`](https://google-api-client-libraries.appspot.com/documentation/drive/v2/java/latest/com/google/api/services/drive/Drive.html)类，但两者都没有......

*   创建一个非常广泛的模拟（它本身可能需要测试），或者
*   编写依赖于实际 Drive 服务的集成测试

...如何测试这样的应用程序？

[在 Drive API（Java 客户端）中使用Mockito](http://code.google.com/p/mockito/)等模拟框架有点乏味，因为 Drive Java 客户端的使用依赖于进行如此多的链式调用（例如，来自文档）：

```
Drive service = getDriveService(req, resp);
service.files().get(fileId).execute(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T02:19:18.277

事实上，在深度存根的帮助下，在 Mockito 中它不应该那么乏味：

```
Drive mockDrive = mock(Drive.class, RETURNS_DEEP_STUBS);

....
// stubbing
when(service.files().get(anyString()).execute()).thenReturn(something);

// verify
verify(service.files().get("Some Field ID").execute(); 
```

[从Mockito 的文档中](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#RETURNS_DEEP_STUBS)了解更多信息

如果您编写集成测试来测试实际的 Drive 服务，这很好，但它根本无法替代单元测试。

# c# - Multiple transformation of coordinates of a smartphone's orientation sensor

> ID：13443570
> 
> 赞同：1
> 
> 时间：2012-11-18T19:11:46.760
> 
> 标签：c#, android-orientation, device-orientation

[Regarding Sensor.TYPE_ORIENTATION :](http://developer.android.com/reference/android/hardware/SensorEvent.html)

As I understand it, each value represents an angle between a vector from the coordinate center to the North Pole(or some other strong magnet) and the respective axis.

Let's say, the smartphone is fixed on a sphere's surface. The sphere is rotating around it's center. It has the radius r.

How do you estimate the angle the smartphone would have in the sphere's center between a fixed coordinate system's axes in the sphere's center and the respective imaginary (=projected) axes?

How do you do it in c#?

# php - 使用 mcrypt 在 php 和 c 中进行 AES 加密

> ID：13443571
> 
> 赞同：2
> 
> 时间：2012-11-18T19:11:54.173
> 
> 标签：php, c, encryption, aes, mcrypt

我又遇到了 mcrypt 的问题。我想知道为什么我在使用 rinjdael-128 cfb 模式加密的 php 和 c bei 中得到不同的结果。这是我的php函数：

```
function mcencrypt($Clear, $Pass){
$td = mcrypt_module_open('rijndael-128', '', 'cfb', '');
$iv = 'AAAAAAAAAAAAAAAA';
mcrypt_generic_init($td, $Pass, $iv);
$encrypted = mcrypt_generic($td, $Clear);
mcrypt_generic_deinit($td);
return $encrypted;
} 
```

和我的 c 函数：

```
unsigned char *Encrypt( unsigned char *key, unsigned char *message, int buff_len){

    unsigned char *Res;
    MCRYPT mfd; 
    char* IV = "AAAAAAAAAAAAAAAA";
    int i, blocks, key_size=16, block_size;

    mfd = mcrypt_module_open("rijndael-128", NULL, "cfb", NULL);
    block_size = mcrypt_enc_get_block_size(mfd);
    blocks = ceil((double)buff_len/block_size);

    mcrypt_generic_init(mfd, key, key_size, IV);
    Res = calloc(1, (blocks *block_size)+1);

    strncpy(Res, message, buff_len);
    mcrypt_generic(mfd,Res,(blocks *block_size));

    mcrypt_generic_deinit(mfd);
    mcrypt_module_close(mfd);

     return (Res); 
```

}

当我在 for 循环中使用它们时，前 26 个加密是 korect，但在第 27 个时，最后一个树符号是不同的。这真的很奇怪。

在 php 中，我制作了这样的 for 循环：

```
$seed ="m78otPfBLT48msvd";
$key = "r2oE61IQo7VwFXnF";
$start_y= mcencrypt($seed,$key);
$new =$start_y;
$enc_prob = mcencrypt($start_y,$key);
for ($j=1; $j<30;$j++){
$new.=$enc_prob;
echo "j: ".$j.'<br>';
echo "the new: ".$enc_prob."lenght: ".strlen($enc_prob).'<br>';
echo "new in hex for j=".$j.": ".strToHex($enc_prob).'<br>';
$enc_prob=mcencrypt($enc_prob,$key);
} 
```

在 c 中是这样的：

```
 int j, buff_len;
char seed[] = "m78otPfBLT48msvd", key1[]="r2oE61IQo7VwFXnF";
buff_len = strlen(seed);
unsigned char *encrypted, *encrypted2;
encrypted = Encrypt(key1, seed, buff_len);
encrypted2 =  Encrypt(key1, encrypted, buff_len);
for (j=1; j<cols; j++) {
    printf("j: %d\n", j);
    printf("encrypted2 %s\n", string_to_hex(encrypted2, buff_len));

    memcpy(encrypted2, Encrypt(key1, encrypted2, buff_len),buff_len);
}
free(encrypted);
free(encrypted2); 
```

出了什么问题。消息和密钥是相同的。我正在使用相同的库，相同的 iv。我不明白。它很奇怪。请帮我解决这个问题。提前谢谢了！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T12:50:25.770

我弄清楚了问题所在。c 中的字符串是空终止的，并且通过在我的加密函数中使用 strncpy 会产生问题，所以我只是在 memcpy 中更改了它，现在一切顺利。再次感谢所有试图提供帮助并花时间查看我的问题的人。

# c++ - 带有结构的操作，代码不起作用？

> ID：13443578
> 
> 赞同：2
> 
> 时间：2012-11-18T19:12:29.543
> 
> 标签：c++

假设给定了三个变量，收入、费用和利润，它们都是 Money 类型（具有两个 int 字段，美元和美分的结构化类型）。分配利润从收入中减去费用的结果。让我们愉快地假设收入超过支出。但是，您仍然可能会发现费用的美分部分超过了收入的美分部分。如果是这种情况，您将不得不从收入美元中“借”1（即减去 1）并将其“给”到收入的美分（即加 100！），以便正确执行减法。

这是我所拥有的，但它不起作用：

```
if (revenue.cents < expenses.cents)
   {
    revenue.dollars = revenue.dollars -1;
    revenue.cents = revenue.cents + 100;
    profit = revenue - expenses;
   }
else 
   {
    profit = revenue - expenses;
   } 
```

我收到此错误消息：错误：“收入 - 费用”中的“运营商-”不匹配

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T19:14:20.853

你得到这个错误是因为你不能从另一个结构中减去一个结构。您必须`operator-()`为您的`struct`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T13:24:49.583

您需要调用结构的每个元素并分别减去它们。MyProgLab 不允许您为此练习定义函数。不仅如此，如果您输入上面的代码，它会告诉您“您不应该修改元素”。为了避免这种情况，您必须在算术中进行借入美元。像这样：

```
if(expenses.cents > revenue.cents) 
{
profit.dollars = (revenue.dollars - 1) - expenses.dollars;
profit.cents = (revenue.cents + 100) - expenses.cents;
}//end if 
```

# android - In GLSurface, KeyListener does not work with Soft Keyboard from InputMethod?

> ID：13443580
> 
> 赞同：2
> 
> 时间：2012-11-18T19:12:37.813
> 
> 标签：android, opengl-es, keylistener

I hava a GLSurface, a KeyListener and TouchListener, I added the listeners to the suface and when the user click on the screen open the soft keyboard using this code:

```
 InputMethodManager inputMethod = (InputMethodManager)((Activity)game).getSystemService(Context.INPUT_METHOD_SERVICE);
   inputMethod.showSoftInput(game.getGraphics().getView(), 0); 
```

"game.getGraphics().getView()" returns the GLSurface. This code is working. But when I press any key on soft keyboard, the listener does not receive any event. Why? How can I fix it? I know the OnKeyListener does not necessary receive event from software, but what I need to do?

# xpath - 输出中的字符不正确

> ID：13443583
> 
> 赞同：0
> 
> 时间：2012-11-18T19:13:21.883
> 
> 标签：xpath, utf-8, web-scraping, domdocument

我正在尝试使用 Xpath 学习网络抓取。下面的代码有效，但是输出包含不正确的字符，我无法做到这一点。

例子：

*   输出：EmÃƒÂ¥mejeriet
*   应该如何：Emåmejeriet

PHP代码：

```
<?php
// Tried with these parameters but they doesn't make any difference
$html = new DOMDocument('1.0', 'UTF-8');
$html->loadHtmlFile('http://thesite.com/thedoc.html);
$xpath = new DOMXPath($html);
$nodelist = $xpath->query("//table");
foreach ($nodelist as $n) {
    echo $n->nodeValue."\n";
}
?> 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:52:00.393

如果使用 ISO8859-15，则应尝试[encode()](http://php.net/manual/en/function.utf8-encode.php)和[decode()函数，否则应尝试使用](http://php.net/manual/en/function.utf8-decode.php) [iconv(](http://php.net/manual/en/function.utf8-encode.php) ) 函数。`php`

例子 ：

```
<?php
iconv_set_encoding("internal_encoding", "UTF-8");
iconv_set_encoding("output_encoding", "ISO-8859-1");
?> 
```

# python - 如何格式化列表以在 python 的单独行上打印每个元素？

> ID：13443588
> 
> 赞同：42
> 
> 时间：2012-11-18T19:13:43.470
> 
> 标签：python, list, format, line

如何格式化列表以在单独的行上打印每个元素？例如我有：

```
mylist = ['10', '12', '14'] 
```

我希望格式化列表，使其打印如下：

```
10
12
14 
```

所以 \n、括号、逗号和 '' 被删除，每个元素都打印在单独的行上谢谢

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-11-18T19:43:54.270

拥抱未来！[为了完整起见，您还可以使用print 函数](http://docs.python.org/2/library/functions.html#print)以 Python 3k 方式执行此操作：

```
from __future__ import print_function  # Py 2.6+; In Py 3k not needed

mylist = ['10', 12, '14']    # Note that 12 is an int

print(*mylist,sep='\n') 
```

印刷：

```
10
12
14 
```

最终，`print`随着 Python 语句[的消失……](http://www.python.org/dev/peps/pep-3105/)还不如开始习惯它。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-11-18T19:14:57.847

使用[`str.join`](http://docs.python.org/2/library/stdtypes.html#str.join)：

```
In [27]: mylist = ['10', '12', '14']

In [28]: print '\n'.join(mylist)
10
12
14 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2012-11-18T19:16:01.797

您可以只使用一个简单的循环：-

```
>>> mylist = ['10', '12', '14']
>>> for elem in mylist:
        print elem 

10
12
14 
```

# php - php邮件编辑界面及保存方法

> ID：13443589
> 
> 赞同：1
> 
> 时间：2012-11-18T19:13:47.933
> 
> 标签：php, html, mysql, email, editor

我创建了一个简单的信息系统，其中包括自动发送 html 电子邮件。这些电子邮件的正文由我在 php 代码中定义，它保存在其中，并且自动例程由 cron 作业完成。问题是，每次我想对这些标准电子邮件进行任何更改时，我都必须编辑一个 .php 文件，因为我是开发人员，也是唯一能够这样做的人。所以，我现在想要的是在 IS 的前台创建一个简单的界面，以便管理员可以查看和编辑自己的这些电子邮件。我怎样才能做到这一点？此电子邮件正文的最佳保存方法是什么（mysql、html 文件、...）？我可以在我的网站中使用任何 html 编辑器吗？

在此先感谢您的帮助。

问候， MH

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:15:43.920

您最好将数据保存在数据库（可能是 MySQL）中，如果可以的话，构建一些东西来编辑内容，或者使用诸如 CKEditor 或 TinyMCE 之类的东西来修改内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:19:23.450

如果您已经设置了数据库，那将是一个很好的方法。对于编辑器，我过去使用过 TinyMCE，效果很好。 [http://www.tinymce.com/](http://www.tinymce.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T19:32:11.833

我建议您使用例如 MySQL 将正文存储在数据库中，然后使用表单 + php 更新它。

正如 Shamil 所说，您可以使用一些富文本编辑器，例如[TinyMCE](http://www.tinymce.com/)，它们将处理 HTML 代码以生成富文本正文。

# c# - winform 关闭自己加上另一个 WebBrowserControl

> ID：13443590
> 
> 赞同：0
> 
> 时间：2012-11-18T19:13:50.153
> 
> 标签：c#, winforms

我知道我可以搜索 proccessId / 正在运行的任务的名称并杀死我需要的进程。

虽然直到现在我还没有开发计划任务/自可执行应用程序，

所以我不需要知道如何让应用程序在执行后自行关闭

在我得到我想要的东西之后，试图通过+ OR 关闭*所有东西*（包括 WebDriver） 。任务完成 。请关闭...不再为您工作。但是先生。Program.cs 仍然需要来自 Form1 的东西。说一些关于无法访问已处置对象的事情。对象名称：'Form1'。`Application.Exit``this.Close()`

即使任务完成，两者的任何组合都会在某些时候返回异常错误（来自 program.cs ）。我没有要求更多的代码。（？）。至少。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using OpenQA.Selenium;
using OpenQA.Selenium.IE;
using System.IO;

namespace HT_R_WbBrows2
{
    public partial class Form1 : Form
    {

    public IeEnginGenerator Iengn = new IeEnginGenerator();
    public Form1()
    {
        InitializeComponent();
        //setLogView(View.Details);

        string extractededVal = Iengn.ExtractPageValue(Iengn.itrfWebEng);
        string flnm = @" the directory path to file --> \dolarRate.asp";

        File.WriteAllText(fn, extractededVal);

        this.Close();
        Application.Exit();
    }

public  class IeEnginGenerator
{

    private string directory = Environment.CurrentDirectory;///Path.GetDirectoryName(Assembly.GetExecutingAssembly().CodeBase);

    public   IWebDriver IwebEngine;
    public List<string> ListElementsInnerHtml = new List<string>();
    public HtmlAgilityPack.HtmlDocument Dnetdoc = new HtmlAgilityPack.HtmlDocument();

    #region <<=========== setupDriver ============>>
    public  string  ExtractPageValue(IWebDriver DDriver, string url="") 
    {
        if(string.IsNullOrEmpty(url))
        url = @"http://www.boi.org.il/he/Markets/ExchangeRates/Pages/Default.aspx";
        var service = InternetExplorerDriverService.CreateDefaultService(directory);
        service.LogFile = directory + @"\seleniumlog.txt";
        service.LoggingLevel = InternetExplorerDriverLogLevel.Trace;

        var options = new InternetExplorerOptions();
        options.IntroduceInstabilityByIgnoringProtectedModeSettings = true;

        DDriver = new InternetExplorerDriver(service, options, TimeSpan.FromSeconds(60));
        DDriver.Navigate().GoToUrl(url);

        Dnetdoc.LoadHtml(DDriver.PageSource);
        string Target = Dnetdoc.DocumentNode.SelectNodes("//table//tr")[1].ChildNodes[7].InnerText;
           //.Select(tr => tr.Elements("td").Select(td => td.InnerText).ToList())
           //.ToList();

        return  Math.Round(Convert.ToDouble(Target), 2).ToString();

        //return "";//Math.Round(Convert.ToDouble( TempTxt.Split(' ')[10]),2).ToString();

    }
    #endregion

}

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:19:51.793

为什么要使用 winform 应用程序？控制台应用程序可能足以满足您的工作需求。一旦 Main() 结束，您的应用程序也将关闭。由于应用程序运行循环，Main() 永远不会在 winform 应用程序中结束。

编辑：

这将是执行此操作的正确方法。您需要注册到表单 Load 事件并在那里运行您的代码，而不是在构造函数中。您不能从构造函数内部关闭 winform。

编辑 2：将此代码放入 Form1() 构造函数中。在 InitializeComponent(); 之后的某个地方

```
 this.Load += (sender,args)=>{ /*do all your work here*/  
     string extractededVal = Iengn.ExtractPageValue(Iengn.itrfWebEng);
     string flnm = @" the directory path to file --> \dolarRate.asp";
     File.WriteAllText(fn, extractededVal);
     Application.Exit(); 
  }; 
```

# c++ - 我的程序需要读取一个文本文件，文本文件中的数据需要用逗号分隔（C++）

> ID：13443592
> 
> 赞同：1
> 
> 时间：2012-11-18T19:14:04.173
> 
> 标签：c++, binary-search-tree

我需要在读取文本文件的搜索二叉树中插入数据。当我在数据之间使用空格时它可以工作，但如果我像我想要的那样使用逗号它就不起作用。例如，我希望我的文本文件如下所示：

```
New-York,c3,Luke
London,c5,Nathan
Toronto,c1,Jacob
  ... 
```

我的文本文件现在看起来像这样：

```
New-York c3 Luke
London c5 Nathan
Toronto c1 Jacob
  ... 
```

我还希望我的程序不要认为空格意味着它需要查看下一个数据，只能使用逗号。

这就是我的代码的样子：

```
void fillTree( BinarySearchTree *b)
{
    ifstream file;
    file.open("data.txt");
    string city;
    string tag;
    string name;
    Person p;

    if(!file) {
        cout<<"Error. " << endl;
    }

    while(file >> city >> tag >> name)
    {
        p.setCity(city);
        p.setTag(tag);
        p.setName(name);
        cout << p.getCity() << " " << p.getTag() << " " << p.getName() << endl;
        (*b).insert(p);
    }
    file.close();
} 
```

我需要在代码中进行哪些更改，以便可以使用逗号而不是空格？我觉得它在带有逗号而不是空格的文本文件中看起来更整洁。我很确定我需要在这段代码中编辑一些东西，但如果它可能在其他地方，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:19:32.920

用于`getline ( file, value, ',' );`读取字符串，直到发生昏迷。

```
string value;
while(file.good())
{
    getline ( file, value, ',' );
    p.setCity(value);
    getline ( file, value, ',' );
    p.setTag(value);
    getline ( file, value, ',' );
    p.setName(value);
    cout << p.getCity() << " " << p.getTag() << " " << p.getName() << endl;
    (*b).insert(p);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:40:18.303

在 C++ 中，您可以重新定义流将什么视为空间。例如，您可以将其更改为表示`','`和`'\n'`。要做的技术是使用带有修改的刻面`imbue()`的流。方面的基础设施看起来有点复杂，但是一旦到位，读取数据就可以方便地使用输入运算符：`std::locale``std::ctype<char>`

```
#include <locale>

template <char S0, char S1>
struct commactype_base {
    commactype_base(): table_() {
        std::transform(std::ctype<char>::classic_table(),
                       std::ctype<char>::classic_table() + std::ctype<char>::table_size,
                       this->table_, 
                       [](std::ctype_base::mask m) -> std::ctype_base::mask {
                           return m & ~(std::ctype_base::space);
                       });
        this->table_[static_cast<unsigned char>(S0)] |= std::ctype_base::space;
        this->table_[static_cast<unsigned char>(S1)] |= std::ctype_base::space;
    }
    std::ctype<char>::mask table_[std::ctype<char>::table_size];
    static std::ctype_base::mask clear_space(std::ctype_base::mask m) {
        return m & ~(std::ctype_base::space);
    }
};
template <char S0, char S1 = S0>
struct ctype:
    commactype_base<S0, S1>,
    std::ctype<char>
{
    ctype(): std::ctype<char>(this->table_, false) {}
};

int main() {
    std::ifstream in("somefile.txt");
    in.imbue(std::locale(std::locale(), new ::ctype<',', '\n'>));
    std::string v0, v1, v2;
    while (in >> v0 >> v1 >> v2) {
        std::cout << "v0='" << v0 << "' v1='" << v1 << "' v2='" << v2 << "'\n";
    }
} 
```

# python - Python：在 setter 中使用 getter 或“私有”属性？

> ID：13443593
> 
> 赞同：3
> 
> 时间：2012-11-18T19:14:06.173
> 
> 标签：python, python-3.x, getter-setter, private-members

假设我有一个`NamedObject`具有属性的类`name`。现在，如果我必须使用 setter，我首先必须定义一个 getter（我猜？），如下所示：

```
class NamedObject:
    def __init__(self, name):
        self.name = name

    @property
    def name(self):
        return self._name 
```

现在我想知道，在 setter 中，我应该使用`self._name`or `self.name`，getter 还是实际属性？设置名称时，I ofc。需要使用`_name`，但是当我进入二传手的时候呢？例如：

```
@name.setter
def name(self, value):
    if self._name != str(value): # Or should I do 'if self.name != value' ?
        self.doStuff(self._name) # Or doStuff(self.name) ?
        self.doMoreStuff()
        self._name = str(value) 
```

使用哪一个真的很重要，为什么要使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T19:17:13.280

当您的设置器是内部接口的一部分时，没有正常理由使用外部接口。我想您可能能够构建一个您可能想要的场景，但默认情况下，只使用内部变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T19:49:50.977

如果您的 getter 具有重要的逻辑（例如延迟初始化），那么您应该始终通过 getter 访问。

```
class Something(object):
    UNINITIALIZED = object()
    LAZY_ATTRS = ('x','y','z')
    def __init__(self):
        for attr in self.LAZY_ATTRS:
            setattr(self, '_'+attr, self.UNINITIALIZED)
    def _get_x(self):
        if self._x is self.UNINITIALIZED:
            self._x = self.doExpensiveInitStuff('x')
        return self._x 
```

但是，如果您的 getter 所做的只是`return self._x`，只需直接访问内部变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T19:31:43.937

使用 getter 而不是仅仅访问内部变量会向您的设置逻辑添加另一个函数调用，并且在 Python 中，函数调用是昂贵的。如果你正在写这个：

```
def _get_x(self):
    return self._x

def _set_x(self, value):
    self._x = value
x = property(fget=_get_x, fset=_set_x) 
```

那么你就患上了“Too Much Java”综合症。Java 开发人员*必须*编写这类东西，因为如果以后有必要为 x 的设置或获取添加行为，则必须重新编译类之外对 x 的所有访问。但是在 Python 中，最好保持简单，只需将 x 定义为实例变量，并仅在需要添加某种设置或获取行为时才转换为属性。参见[YAGNI](http://c2.com/cgi/wiki?YouArentGonnaNeedIt)和[YAGNI](http://en.wikipedia.org/wiki/You_ain%27t_gonna_need_it)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-19T12:08:54.423

保罗已经回答得很好。

为了完整起见，我想补充一点，始终如一地使用 getter/setter 可以更容易地覆盖类。这里有几个含义。

如果您设想一个特定的类很可能被您或其他人覆盖/扩展，那么尽早使用 getter/setter 可能有助于减少以后用于重构的时间。不过，我同意保持简单的观点：由于运行时成本和阅读/编码工作量，请谨慎使用以下内容。

如果在 getter 中也进行了验证，那么要么直接在 setter 中使用 instance 属性，要么提供两个不同的 getter`name()`和`_name()`(or `name_already_checked()`)，以便两者都可以被覆盖并使用简单的 getter，而无需在 setter 内进行验证。这是为了允许扩展快速、无验证类型的 getter 以及为客户提供的通常的 getter。

[这确实违反了Paul 指出](https://stackoverflow.com/a/13443743/923794)的 YAGNI 原则。但是，如果您确实为更广泛的受众发布代码，“过度工程”通常是可取的。图书馆受益于增加的灵活性和远见。

# android - 从最近的应用程序列表中重新启动一个 android 应用程序与按下应用程序图标

> ID：13443595
> 
> 赞同：1
> 
> 时间：2012-11-18T19:14:25.030
> 
> 标签：android, resume

我编写了一个播放一些音频的 Android 应用程序。应用程序 GUI 上有一个停止按钮，当我第一次吃午饭时，应用程序运行良好。但是，当我在播放音频时退出应用程序并根据我返回的方式返回时，`STOP`按钮是否有效。如果我通过按住主页按钮并查看最近的应用程序列表并从那里选择我的应用程序来返回应用程序，那么该`STOP`按钮将起作用。但是，如果我单击应用程序午餐图标，则该`STOP`按钮不起作用。这两种方法有什么区别，如何通过按下应用程序图标重新启动应用程序，使其行为类似于通过从最近午餐应用程序列表中选择应用程序重新启动应用程序时的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:40:05.213

如果没有看到代码，我们不能完全确定，但听起来正在发生的事情是您的活动是您`setOnClickListener`在方法中的停止按钮上设置了一个动作侦听器 () `onCreate()`。

如果应用程序从未被回收（当您的`onCreate()`应用程序进入后台时，Android 将执行此操作）并重新开始，则不会再次调用。

当您的应用程序进入后台`onPause()`时将被调用，然后从该应用程序返回您将调用`onResume()`. 如果您的应用程序在后台运行的时间更长或 Android 需要更多资源，您将接到`onStop`点击主页按钮的呼叫，并且`onStart`当应用程序再次打开时。

您需要对您的代码进行一些调查，以了解您的侦听器为何消失，但现在您有钩子来确保当您的应用程序返回时它们已重新连接。

# tomcat6 - Tomcat 问题 - 无法启动服务器

> ID：13443600
> 
> 赞同：1
> 
> 时间：2012-11-18T19:15:13.760
> 
> 标签：tomcat6, eclipse-juno

> 在本地主机上发布到 Tomcat v 6.0 服务器...遇到问题。正在从服务器中删除过时的文件...

每当我尝试启动服务器时都会收到此消息。为什么？

# matlab - 征费航班分布直方图 Matlab

> ID：13443601
> 
> 赞同：1
> 
> 时间：2012-11-18T19:15:22.983
> 
> 标签：matlab, histogram, data-fitting

我一直在四处寻找将 Levy Distributions 拟合到直方图的方法，但无济于事。我希望测试 Levy Flight 分布在数据上的表现，无论它是否真的适合我们的数据类型。由于我在 PDF 方面相当陌生，并且除了 matlab 中的 distfittool GUI 之外还安装了我自己的 PDF，所以我有点不知道我需要做什么才能正确地做到这一点。

所以目前，我的数据是一个 208x1 的向量，208 个点代表 208 个不同对象的不同速度。速度仅通过每次总距离计算。

现在，目前我采用了描述征费航班的函数： [http](http://reference.wolfram.com/mathematica/ref/LevyDistribution.html) ://reference.wolfram.com/mathematica/ref/LevyDistribution.html (Out[3])

我使用以下代码进行了尝试：

```
load('Speeds.mat')
modelFun = @(p,x) (exp(-p(1)./(2.*(x-p(2)))).*(p(1)./(x-p(2))).^3/2)./(sqrt(2.*pi).*p(1));
startingVals = [1 1];
coefEsts = nlinfit(LBSpeed,modelFun,startingVals); 
```

我完全清楚，我对 Levy 航班分布不熟悉是为什么我什至不确定这是否是用于分布的正确函数，也不是我需要传递给它以正确执行此操作的参数的根本原因。如果有人能给我更多的见解，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:48:50.070

我已经看到与此问题类似的问题没有答案，所以在得到同事的帮助后，我想发布解决方案

与我最初的问题不同的另一件事是，它变得分段以更好地满足我自己发布的征费飞行方程的参考。我选择的起始值是任意的。

```
load('Speeds.mat')
[N,X] = hist(Speed,20);
Y = N/(sum(N))/diff(X(1:2));

%Get best parameters
modelFun = @(p,x) (x>p(2)).*(exp(-p(1)./(2.*(x-p(2)))).*(p(1)./(x-p(2))).^(3/2))./(sqrt(2.*pi).*p(1));
startingVals = [1,1];
coefEsts = nlinfit(X,Y,modelFun, startingVals);

%Visualize fit
bar(X,Y);
hold on;
model_eval = modelFun(coefEsts,X);
plot(X,model_eval,'r','LineWidth',2); 
```

我一开始不知道如何拟合直方图，所以希望这对新手有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T05:21:59.430

您可以在本网站的 Matlab 代码中找到拟合例程

[http://math.bu.edu/people/mveillet/html/alphastablepub.html](http://math.bu.edu/people/mveillet/html/alphastablepub.html)

# php - CakePHP sql 查询

> ID：13443605
> 
> 赞同：0
> 
> 时间：2012-11-18T19:15:46.103
> 
> 标签：php, sql, cakephp

我对 CakePHP 有点陌生，无法弄清楚这里的 sql 查询是如何工作的。我有一个删除按钮，可以删除有关玩家的消息。它没有做的（它应该做的）也是处理新闻的数量，这些新闻存储在“fc_players”表的“新闻”列中。以一种老式的方式，我会喜欢：

`("SELECT player FROM entries WHERE id = '" . $id . "'");`

（返回玩家的 $name；由于数据库的构建方式，不能只使用 $id；“entries”是存储新闻的表）

`("SELECT news FROM fc_players WHERE name = '" . $name . "'");`

（返回数据库中有多少关于某个玩家的新闻）

如果只有一个，则从数据库中删除 $name：

`("DELETE FROM fc_players WHERE name = '" . $name . "'");`

我试过这样做： `$this->FCPlayer->deleteAll(array('FCPlayer.name' => $name));`但由于某种原因它不起作用。

如果更多，只需减少它：

`$news = $news - 1;`

`("UPDATE fc_players SET news = '" . $news . "' WHERE name = '" . $name . "'");`

我可以用普通的 PHP 处理它，但 Cake 有点难，我找不到任何有用的例子。你能帮我把它从 sql 查询翻译成 CakePHP 或指导我阅读实际解释它的文章吗？

谢谢！

编辑：

好的，尼克和史蒂夫，谢谢你的回答。不幸的是，它并没有解决我的问题。我认为处理 sql 查询有问题。

`$this->Session->setFlash($id, 'success');`向我显示正确的条目 ID，所以 $id 很好。

但是当我试图用以下方式获取玩家姓名时：

`$player = $this->Entry->field("player", array("id" => $id));`

或与

`$this->Entry->id = $id;
$player = $this->Entry->field('player');`

或执行查询

`player = $this->Entry->query("SELECT player FROM entries WHERE id = '" . $id . "'");`

结果为空白。我确实设法通过以下方式获得玩家姓名：

`$player = $this->Entry->field('player');`

但它只是从最近的条目中返回了播放器的名称，而不是我要删除的那个。

我只是不知道我在哪里犯了错误。它是否有可能返回 setFlash 无法处理的某种 od 数组或对象？如果是这样，为什么最后一个例子有效（有点）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T23:41:37.310

1.  从 core.php 开始调试，看看为什么它没有删除可以在消息中说些什么的条目。

2.  尝试

    $this->FCPlayer->deleteAll(array('FCPlayer.name LIKE' => $name));

3.  名称列的开头或结尾是否可能有额外的空格？

4.  你总是可以使用：$this->FCPlayer->query("your-query-goes-here");，但不推荐。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T16:44:27.900

好的，最后我设法做到了。正确答案是：

`$player = $this->Entry->field('player', array('id' => $id));`// 是的，单 '

`$news = $this->FCPlayer->field('news', array('name' => $player));`

`if ( $gossips > 1)`
`{`
`$this->FCPlayer->updateAll(array('FCPlayer.news'=>$news - 1),`
`array('FCPlayer.name'=>$player));`
`}`
`else`
`{`
`$this->LFCPlayer->deleteAll(array('LFCPlayer.name LIKE' => $player));`
`}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T20:01:35.757

当您删除一条新闻时，CakePHP 不会处理任何其他表中的视图数量。还没有那么聪明:)

您必须手动更改它。

你可以使用类似的东西：

```
$number_of_news = $this->Player->field("number_of_news", array("id" => $id));

$this->Player->set("number_of_news" => $number_of_news - 1); 
```

# html - 编码一个有效的无序列表

> ID：13443609
> 
> 赞同：0
> 
> 时间：2012-11-18T19:16:05.147
> 
> 标签：html, xhtml, w3c-validation

试图让我的网站 w3 干净并使用此网站进行验证[http://validator.w3.org/](http://validator.w3.org/)。问题是我的无序列表有问题。这是您自己查看完整源代码的站点：http: [//gmustudent.com](http://gmustudent.com)。这是一个无序列表的例子

```
<div id="mainToolbar">
    <ul>
        <li class="firstTab"><a href="index">Home</a></li>
        <li><a href="search?tag=J2EE">J2EE</a>
        <li><a href="search?tag=Javascript">Javascript</a></li>
        <li><a href="search?tag=AJAX">AJAX</a></li>
        <li><a href="search?tag=Dreamweaver">Dreamweaver</a></li>
        <li><a href="http://www.youtube.com/user/GMUStudentDesign" onclick="window.open(this.href); return false;">YouTube</a></li>
        <li class="lastTab"><a href="contact">Contact</a></li>
    </ul>
</div> 
```

这是我遇到的错误的示例。关于我做错了什么的任何想法？

```
Error Line 26, Column 9: document type does not allow element "li" here; missing one of "ul", "ol" start-tag
<li><a href="search?tag=Javascript">Javascript</a></li> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T19:17:52.020

第二个列表元素缺少结束`</li>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:19:46.643

你在`li`这里缺少一个结束标签：

```
<li><a href="search?tag=J2EE">J2EE</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T19:19:49.217

只是第二个列表项上缺少一个 closin……很可能所有 w3 更正都与这些事情有关

# c - C 数组 malloc() VS {}

> ID：13443611
> 
> 赞同：1
> 
> 时间：2012-11-18T19:16:14.290
> 
> 标签：c, arrays, initialization, malloc

我知道结果

```
int *x = malloc(sizeof(int)*100); 
```

和

```
int x[100]; 
```

是一样的，但是第一个是分配堆内存，第二个是分配堆栈内存。

现在我需要创建一个巨大的数组（大约 10000 个元素，而不是模式），我认为 malloc() 更合适。

但是当我准备初始化数组时，我遇到了一个问题。我不能使用任何循环来初始化数组，如何初始化使用 malloc 创建的数组，就像使用

```
int x[100] = {1,2,3,4,......,6,7,5}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:52:34.863

当您说 时`int a[] = { 1, 2, 3 };`，您正在使用*初始化程序*为数组提供初始数据（并推断其大小）`a`。这是 C 语法的一部分。

当您说时`int * p = malloc(1000);`，您只是在进行库调用并存储一个*指针*。语言或库中没有机制为 this 指针指向的内存提供初始值，也不需要指针指向任何东西（可能是`NULL`）。

你应该注意到数组不是指针，指针也不是数组。`a`并且`p`是完全不同的动物，尽管你可以说`p[1] = a[1];`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:52:45.543

如果你不能用循环初始化数组，你可以使用`memset()`它并摆脱它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-05T15:29:59.080

如果数据没有变化，最好的方法是写

```
static const int x [100] = { 23, 12, 5, 7, ... }; 
```

没有代码。初始化不需要时间。我实际上已经看到了以这种方式初始化数兆字节数据的代码，没有任何问题。

# jquery - ASP.net网页中WebGrid的ajax-jquery更新

> ID：13443614
> 
> 赞同：3
> 
> 时间：2012-11-18T19:16:51.393
> 
> 标签：jquery, asp.net, webgrid, razor-2

我在 ASP.NET 网页中有一个网格和一个表单（Razor v2 不是 ASP.net Web 表单）。我编写了一个查询来从数据库中检索数据，并用于`WebGrid`以网格格式显示数据。对于表单，我使用 jQuery 将表单数据插入到数据库表中。现在我想要做的是 - 单击表单提交按钮后，我只想刷新网格（部分刷新未满）。知道怎么做吗？

# ios - 自动旋转设备时 UIScrollView 中的图形故障

> ID：13443615
> 
> 赞同：1
> 
> 时间：2012-11-18T19:16:53.827
> 
> 标签：ios, uiscrollview, uiimageview

我有一个具有全屏 UIScrollView 的应用程序，其中有七个图像。图像也应该是全屏的，并且滚动视图设置为启用分页。

我有一个创建或移动图像视图的方法：

```
-(void)rebuildImageView{

    // set up images
    float screenW = self.view.bounds.size.width;
    float screenH = self.view.bounds.size.height;
    int numImgs = self.soundNames.count;

    self.mainScrollView.contentSize = CGSizeMake(screenW * numImgs, screenH);
    for(int i=0; i<numImgs; i++){

        UIImageView* imageView = (UIImageView*)[self.mainScrollView viewWithTag:i+100];
        if(imageView == nil){
            imageView = [[UIImageView alloc] init];
            imageView.tag = i+100;
            [self.mainScrollView addSubview:imageView];
            imageView.image = [UIImage imageNamed:[NSString stringWithFormat:@"image%d.jpg",i]];
            imageView.contentMode = UIViewContentModeScaleAspectFill;
            imageView.clipsToBounds = YES;
            [imageView release];
        }
        imageView.frame = CGRectMake(i * screenW, 0, screenW, screenH);
    }

    // scroll to the current one
    [self.mainScrollView scrollRectToVisible:CGRectMake(self.currentSound*screenW, 0, screenW, screenH) animated:YES];
} 
```

我在视图控制器上也有这个：

```
-(void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{
    [UIView animateWithDuration:duration animations:^{
        [self rebuildImageView];
    }];
} 
```

当我在显示图像 0 时自动旋转时，此代码工作正常，但是当我在图像 7 上时，您可以在旋转时简要地看到图像 6 的大部分内容。这段视频显示了正在发生的事情：

[http://www.youtube.com/watch?v=1O3jOcTgVP8](http://www.youtube.com/watch?v=1O3jOcTgVP8)

旋转设备时，我应该使用更好的方法来重新配置滚动视图和图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:38:29.497

方法中的任何帧更改`willAnimateRotationToInterfaceOrientation:duration`都应自动设置动画。所以你可以尝试将它从块中删除？

就个人而言，我对这种类型的事物进行子类化`UIScrollView`并将等效的布局子视图框架代码放在该`layoutSubviews`方法的覆盖中（不要忘记调用 super 否则您可能会得到放错位置的滚动条）的运气要好得多。

# javascript - Angular：单选按钮在单击每个单选按钮后停止触发“ng-change”

> ID：13443619
> 
> 赞同：15
> 
> 时间：2012-11-18T19:17:09.210
> 
> 标签：javascript, angularjs

我正在动态构建单选按钮。`ng-change='newValue(value)`在按下每个单选按钮一次后停止调用。

这有效：单击单选按钮将值更改为 foo/bar/baz。 [http://jsfiddle.net/ZPcSe/19/](http://jsfiddle.net/ZPcSe/19/)

```
<div ng-controller="MyCtrl">
<input type="radio" ng-model="value" value="foo" ng-change='newValue(value)'>
<input type="radio" ng-model="value" value="bar" ng-change='newValue(value)'>
<input type="radio" ng-model="value" value="baz" ng-change='newValue(value)'>    
<hr>
{{value}}
</div> 
```

此代码不会：一旦每个单选按钮至少被按下一次，{{value}} - “标签”就不会更新。Aparently ng-change 不再被解雇。

```
<div ng-controller="MyCtrl">
    <span ng-repeat="i in [0, 1, 2]">
    <input name="asdf" type="radio" ng-model="value" value={{i}} ng-change='newValue(value)'>   
    </span>
    {{value}}
</div> 
```

[http://jsfiddle.net/ZPcSe/18/](http://jsfiddle.net/ZPcSe/18/)

每次的控制都是一样的：

```
var myApp = angular.module('myApp', []);

function MyCtrl($scope) {
    $scope.value = '-';
    $scope.newValue = function(value) {
    $scope.value = value;
    }
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-18T19:32:10.163

`ngRepeat` [创建新范围](http://docs.angularjs.org/api/ng.directive%3angRepeat)，因此尝试将`value`其设置在新范围上。解决方法是引用父作用域上的对象上的属性——对象查找发生在父作用域上，然后更改属性按预期工作：

HTML：

```
<div ng-controller="MyCtrl">
<span ng-repeat="i in [0, 1, 2]">
  <input name="asdf" ng-model="options.value" value="{{i}}" type="radio">
</span>
{{options.value}} 
```

JS：

```
var myApp = angular.module('myApp', []);

function MyCtrl($scope) {
    $scope.options = {
        value: '-'
    };
    $scope.newValue = function(value) {
        // $scope.options.value = value; // not needed, unless you want to do more work on a change
    }
}​ 
```

您可以查看此解决方法[的工作小提琴](http://jsfiddle.net/ZPcSe/20/)。有关更多信息，请参阅[GitHub 上的 angular/angular.js#1100 。](https://github.com/angular/angular.js/issues/1100)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-05T08:00:43.737

只是一个快速的解决方法，我们可以实现相同的使用`ng-model="$parent.value"`，因为它会引用范围的*父**级，`ng-repeat`*即**范围`myCtrl`内**

只改变`ng-model`——

```
<input name="asdf" type="radio" ng-model="$parent.value" value={{i}} ng-change='newValue(value)'> 
```

[这是小提琴](http://jsfiddle.net/k84dfdcr/1/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-07-11T19:13:56.157

尝试`ng-click`代替`ng-change`.

# java - 如果我从 RPM 安装 Java 或只运行二进制文件，会有什么不同吗？

> ID：13443622
> 
> 赞同：0
> 
> 时间：2012-11-18T19:17:23.893
> 
> 标签：java, fedora

如果我从 RPM 安装 Java 与仅运行可用的二进制文件，会有任何技术差异吗？我在 CentOs 6.3 上运行，Java 是 1.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:32:31.577

取决于您所说的“技术差异”和“仅运行可用的二进制文件”的意思，但是，不，从同一制造商的完全相同的 JRE/JDK 运行 JRE/JKD 的捆绑 RPM 版本没有区别，对于来自下载的 TGZ 的相同版本、相同平台和相同架构（32/64 位）。

捆绑了 JRE/JDK 的操作系统可能捆绑了额外的库、安全配置、证书，这些可能与普通 TGZ 不同。

# curl - curl中的Postgresql查询

> ID：13443628
> 
> 赞同：1
> 
> 时间：2012-11-18T19:18:03.003
> 
> 标签：curl, elasticsearch, postgresql-9.1

我有一个 Postgresql 9.1 表，其中包括“city”、“admin1”和“country”列。我想选择输出格式为“city, admin1, country”的唯一值。

我可能有多个纽约和明尼苏达州罗切斯特的参赛作品，但我只想要一个。这是为了填充弹性搜索索引，我正在使用[JDBC River 插件](https://github.com/jprante/elasticsearch-river-jdbc)

以下 SELECT 在 PGAdmin3 的 SQL 编辑器中执行我想要的操作：

```
SELECT city || ', ' || admin1 || ', ' || country AS city FROM table GROUP BY city, admin1, country; 
```

但在以下失败

```
curl -XPUT 'localhost:9200/_river/nibbel_river/_meta' -d '{

           "type" : "jdbc",
           "jdbc" : {
               "driver" : "org.postgresql.Driver",
               "url" : "jdbc:postgresql://localhost:5432/table",
               "user" : "",
               "password" : "",
           "sql" : "SELECT city || ', ' || admin1 || ', ' || country AS city FROM everything GROUP BY city, admin1, country",
           "poll" : "7d"
           },
           "index" : {
               "index" : "city",
               "type" : "everything"
           }
       }' 
```

有错误

```
curl: (6) Couldn't resolve host ' || admin1 || ,'
curl: (3) [globbing] unmatched close brace/bracket at pos 102
{"error":"MapperParsingException[Failed to parse [jdbc.sql]]; nested: JsonParseException[Unexpected end-of-input in VALUE_STRING\n at [Source: [B@1192b0c; line: 8, column: 565]]; ","status":400} 
```

这个的语法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T10:41:19.150

查询中的所有撇号都必须像这样转义：`'\''`例如：

```
curl -XPUT 'localhost:9200/_river/nibbel_river/_meta' -d '{
    "type" : "jdbc",
    "jdbc" : {
        "driver" : "org.postgresql.Driver",
        "url" : "jdbc:postgresql://localhost:5432/table",
        "user" : "",
        "password" : "",
        "sql" : "SELECT city || '\'', '\'' || admin1 || '\'', '\'' || country AS city FROM everything GROUP BY city, admin1, country",
        "poll" : "7d"
    },
    "index" : {
        "index" : "city",
        "type" : "everything"
    }
}' 
```

# database - 从 ER 转换为关系数据库 - 映射弱实体类型

> ID：13443630
> 
> 赞同：0
> 
> 时间：2012-11-18T19:18:18.947
> 
> 标签：database, database-design, entity, relational-database, entity-relationship

我正在尝试将弱实体 CatalogueEntry 映射到关系模式中，但我不确定哪些实体是这种弱实体类型的所有者。所以，我不知道关系模式中关系的主键是什么。

有人有想法么？我在下面添加了一张图片，谢谢。

![在此处输入图像描述](../Images/76e81d689f2ed1da34a1cf57c963c3ca.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:32:12.587

什么是目录？为什么目录没有出现在图表上？

很抱歉提出愚蠢的问题，但是当您进行数据分析时，您会学会这样做。

在切换到关系级别之前，在概念 (ER) 级别很好地理解数据很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:33:02.333

从图中可以看出，弱实体CatelogueEntry通过标识关系（HasEntry）依赖于Album强实体。对于每个 catelogueEntry 必须有一个白蛋白。所以这里有两张桌子。一张用于专辑，另一张用于目录条目。catelogueEntry 必须包含来自专辑条目的外键。

# python - 在 Dotcloud (Python) 上设置 NewRelic 环境

> ID：13443632
> 
> 赞同：0
> 
> 时间：2012-11-18T19:18:39.927
> 
> 标签：python, dotcloud, newrelic

我有一个 Python 应用程序，它使用 dotcloud.yml 文件中的新 New Relic 配置变量设置，效果很好。

但是，我想将沙盒实例作为测试/暂存环境运行，因此我希望能够设置 newrelic 代理的环境，以便它使用 ini 配置的不同配置部分。我的 dotcloud.yml 设置如下：

```
www:
    type: python
    config:
        python_version: 'v2.7'
        enable_newrelic: True
    environment:
        NEW_RELIC_LICENSE_KEY: *****************************************
        NEW_RELIC_APP_NAME: Application Name
        NEW_RELIC_LOG: /var/log/supervisor/newrelic.log
        NEW_RELIC_LOG_LEVEL: info
        NEW_RELIC_CONFIG_FILE: /home/dotcloud/current/newrelic.ini 
```

我有自定义环境变量，因此 sanbox 设置为“测试”，实时应用程序设置为“生产”

然后我在我的 uswsgi.py 中调用以下内容

```
NEWRELIC_CONFIG = os.environ.get('NEW_RELIC_CONFIG_FILE')
ENVIRONMENT = os.environ.get('MY_ENVIRONMENT', 'test')

newrelic.agent.initialize(NEWRELIC_CONFIG, ENVIRONMENT) 
```

但是，dotcloud 实例已经启用了 newrelic，因为我在 uwsgi.log 文件中得到了这个：

```
Sun Nov 18 18:50:12 2012 - unable to load app 0 (mountpoint='') (callable not found or import error)
Traceback (most recent call last):
  File "/home/dotcloud/current/wsgi.py", line 15, in <module>
    newrelic.agent.initialize(NEWRELIC_CONFIG, ENVIRONMENT)
  File "/opt/ve/2.7/local/lib/python2.7/site-packages/newrelic-1.8.0.13/newrelic/config.py", line 1414, in initialize
    log_file, log_level)
  File "/opt/ve/2.7/local/lib/python2.7/site-packages/newrelic-1.8.0.13/newrelic/config.py", line 340, in _load_configuration
    'environment "%s".' % (_config_file, _environment))
newrelic.api.exceptions.ConfigurationError: Configuration has already been done against differing configuration file or environment. Prior configuration file used was "/home/dotcloud/current/newrelic.ini" and environment "None". 
```

因此，似乎在调用 uwsgi.py 之前正在初始化 newrelic 代理。

所以我的问题是：

有没有办法初始化 newrelic 环境？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T21:36:40.590

除非他们做一些奇怪的事情，否则您应该能够通过执行以下操作覆盖代理配置文件提供的 app_name：

```
import newrelic.agent
newrelic.agent.global_settings().app_name = 'Test Application Name' 
```

不要第二次调用 newrelic.agent.initialize() 。

仅当 app_name 列出要向其报告数据的单个应用程序时，这才有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:57:07.083

在不更改任何代码的情况下，最简单的方法是执行以下操作。

在 dotCloud 上创建一个新的沙盒应用程序（有关在沙盒模式下创建应用程序的更多信息，请参阅[http://docs.dotcloud.com/0.9/guides/flavors/ ）](http://docs.dotcloud.com/0.9/guides/flavors/)

```
$ dotcloud create -f sandbox  <app_name> 
```

将您的代码部署到新的沙盒应用程序。

```
$ dotcloud push 
```

现在，您应该在实时应用程序和沙盒应用程序中运行相同的代码。但是因为您想更改沙盒应用程序的一些 ENV 变量，所以您需要多做一步。

根据此页面[http://docs.dotcloud.com/0.9/guides/environment/#adding-environment-variables](http://docs.dotcloud.com/0.9/guides/environment/#adding-environment-variables)有两种不同的方式添加 ENV 变量。

1.  使用`dotcloud.yml`' 环境部分。
2.  使用`dotcloud env`cli 命令

> dotcloud.yml 允许您为每个服务定义不同的环境变量，而 dotcloud env 为整个应用程序设置环境变量。此外，使用 dotcloud env 设置的环境变量取代了 dotcloud.yml 中定义的环境变量。

这意味着如果我们想为我们的沙盒应用程序设置不同的值，我们只需要运行一个`dotcloud env`命令来在沙盒应用程序上设置这些变量，这将覆盖您的`dotcloud.yml`

如果我们只想更改变量，我们将运行此命令。

```
$ dotcloud env set NEW_RELIC_APP_NAME='Test Application Name' 
```

如果我们想一次更新一个以上，我们将执行以下操作。

```
$ dotcloud env set \
'NEW_RELIC_APP_NAME="Test Application Name"' \
'NEW_RELIC_LOG_LEVEL=debug' 
```

为确保您的环境变量设置正确，您可以运行以下命令。

```
$ dotcloud env list 
```

**笔记**

*   上面的命令使用的是新的 dotCloud 0.9.x CLI，如果你使用的是旧的，你需要升级到新的，或者参考旧 CLI 的文档[http://docs.dotcloud。 com/0.4/guides/环境/](http://docs.dotcloud.com/0.4/guides/environment/)
*   当您设置环境变量时，它将重新启动您的应用程序以便它可以安装变量，因此为了限制您的停机时间，请在一个命令中设置所有这些变量。

# active-directory - CRM 2011 - 安装 Active Directory 后无法连接到数据库

> ID：13443634
> 
> 赞同：1
> 
> 时间：2012-11-18T19:18:43.017
> 
> 标签：active-directory, dynamics-crm-2011

我获得了一个用于开发目的的 VM，其中安装了 Windows 2008R2、CRM 2011、SQL Server 等。在我获得项目之前，该 VM 正在内部使用，用于验证公司的 AD 服务器。

由于我需要在异地使用 VM，因此我运行了“dcpromo”以便在 VM 中安装 Active Directory 等。正如您可能已经猜到的那样，执行此操作后，现在没有任何东西可以使用 Windows 身份验证连接到 SQL Server，因为用户现在是 AD 用户，具有不同的 ID（至少我认为这是问题所在 - 我不是系统管理员）。

因此，当我运行 CRM 部署管理器时，它说它无法连接到 CRM_CONFIG 数据库，这可能是因为 Windows Auth 无法正常工作。SQL Server 运行良好。事实上，Windows Auth 甚至无法在 SQL Mgmt Studio 中运行，我必须使用 SQL Server Auth 进行连接。

我该如何解决这个烂摊子？:) 有没有办法告诉 CRM 部署管理器（以及其他一切）使用 SQL Server Auth 而不是 Windows Auth？或者有没有办法在机器上修复 Windows Auth？后者更可取，因为它可能会修复现在无法使用 Windows Auth 连接到 SQL Server 的所有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T22:06:36.687

我不确定如何解决这个问题，但我可能会尝试：

1.  卸载 CRM
2.  重新安装 CRM - 这些步骤应该为您提供工作 CRM，无需任何自定义或数据。
3.  导入现有组织 - 这应该为您提供原始开发人员所拥有的 CRM（作为导入过程的一部分，您可以重新映射 AD 中的所有用户）。

查看此链接以获取有关该过程的详细信息：

[导入 Microsoft Dynamics CRM 2011 组织](http://technet.microsoft.com/en-us/library/hh127042.aspx)

这也可能有帮助：

[移动 Microsoft Dynamics CRM 2011 部署](http://technet.microsoft.com/en-us/library/hh699772.aspx#Redploy_CRM_Server)

# php - 在 $value 的最后一个反斜杠 (\') 后回显文本

> ID：13443638
> 
> 赞同：1
> 
> 时间：2012-11-18T19:19:06.683
> 
> 标签：php, text, echo

我希望能够在 $value 的最后一个反斜杠 ('\') 之后立即获取所有文本，这样我就可以像这样将其回显：

```
$value = 'Some Folder\Some Folder\Some Folder\FileName v123.txt';
Outputs Echo: FileName v123.txt

$value = 'Some Folder\Some Folder\Some Folder\Another File Name v210.txt';
Outputs Echo: Another File Name v210.txt

$value = 'Some Folder\Some Folder\FileName v123.txt';
Outputs Echo: FileName v123.txt

$value = 'Some Folder\AnotherFile v210.txt';
Outputs Echo: AnotherFile v210.txt 
```

我应该使用哪些 PHP 函数以及如何使用？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T19:20:57.943

您可以使用[basename](http://php.net/manual/en/function.basename.php)函数：

```
$value = 'Some Folder\Some Folder\Some Folder\FileName v123.txt';
echo basename($value); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T19:22:12.387

```
echo end(explode("\\",$value)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T19:24:21.520

使用 strpos() 和 substr() 的组合。

# asp.net - 如何使用控制台应用程序中应用的 DisplayFormat DataFormatString 输出属性（理想情况下通过字符串查询对象）？

> ID：13443643
> 
> 赞同：6
> 
> 时间：2012-11-18T19:19:23.343
> 
> 标签：asp.net, asp.net-mvc, reflection, razor, console-application

这是我所拥有的课程的简化视图：

```
public class SalesMixRow
{
    [DisplayFormat(DataFormatString = "{0:c0}")]
    public decimal? DelSales { get; set; }
} 
```

在 web 应用程序剃刀视图中，我可以得到该值，其格式如下：

```
@Html.DisplayFor(model => model.DelSales) 
```

我有一个控制台应用程序也需要输出这个值。如何在控制台应用程序中输出它而不在任何地方重复 DataFormatString？

更新：我喜欢使用反射的想法，因为这解决了我要单独提出的问题！这是一个完整的工作示例，我通过字符串路径获取属性并使用 DisplayFormat （如果可用）输出：

```
void Main()
{
    var model = new SmrDistrictModel
    {
        Title = "DFW",
        SalesMixRow = new SalesMixRow
        {
            DelSales = 500m
        }
    };

    Console.WriteLine(FollowPropertyPath(model, "Title"));
    Console.WriteLine(FollowPropertyPath(model, "SalesMixRow.DelSales"));
}

public static object FollowPropertyPath(object value, string path)
{
    Type currentType = value.GetType();
    DisplayFormatAttribute currentDisplayFormatAttribute;
    string currentDataFormatString = "{0}";

    foreach (string propertyName in path.Split('.'))
    {
        PropertyInfo property = currentType.GetProperty(propertyName);
        currentDisplayFormatAttribute = (DisplayFormatAttribute)property.GetCustomAttributes(typeof(DisplayFormatAttribute), true).FirstOrDefault();
        if (currentDisplayFormatAttribute != null)
        {
            currentDataFormatString = currentDisplayFormatAttribute.DataFormatString;
        }
        value = property.GetValue(value, null);
        currentType = property.PropertyType;
    }
    return string.Format(currentDataFormatString, value);
}

public class SmrDistrictModel
{
    public string Title { get; set; }
    public SalesMixRow SalesMixRow { get; set; }
}

public class SalesMixRow
{
    [DisplayFormat(DataFormatString = "{0:c0}")]
    public decimal? DelSales { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T19:22:55.157

您可以使用反射从类中检索属性。然后从属性中获取格式字符串，并使用`string.Format`.

```
SalesMixRow instance = new SalesMixRow { DelSales=1.23 };

PropertyInfo prop = typeof(SalesMixRow).GetProperty("DelSales");
var att = (DisplayFormatAttribute)prop.GetCustomAttributes(typeof(DisplayFormatAttribute), true).FirstOrDefault();
if (att != null)
{
    Console.WriteLine(att.DataFormatString, instance.DelSales);
} 
```

（请注意，您需要添加`System.ComponentModel.DataAnnotations.dll`包含该`DisplayFormat`属性的程序集。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:27:16.790

根据`DisplayFormat`我的经验，它适用于 MVC 应用程序。对于控制台应用程序，您可以通过`String.Format`. 有关详细信息，请参阅[此链接](http://www.dylanbeattie.net/cheatsheets/dot_net_string_format_cheat_sheet.pdf)

在你的情况下，你可以这样写

```
Console.WriteLine(string.Format("0:c0", SalesMixRow.DataSales)); 
```

# c++ - C++ Doxygen 隐藏注释

> ID：13443647
> 
> 赞同：1
> 
> 时间：2012-11-18T19:19:36.010
> 
> 标签：c++, comments, doxygen, doc

我试图弄清楚如何在我的源文件（或头文件）中放置注释，这样它们就不会出现在我的 Doxygen 文档中。 **目前，我不太清楚哪些评论会出现，哪些不会出现。**

我经常在我的一个源文件 (.cpp) 中有这样的代码：

```
///* OCBA P(CS) implementation for "max" problems */
//void OCBA_PCS() {
//    
// Code goes here...
//
//}     

/*! OCBA minimize simulation cost for "max" problems */
void OCBA_SC() {
// Code goes here...
} 
```

在这里，您可以看到该函数`OCBA_PCS()`当前已被注释掉，可能是因为它不起作用并且我希望将其从构建中排除。但是，当我运行 Doxygen 时，它会

```
* OCBA P(CS) implementation for "max" problems */ 
```

进入详细的文档部分`OCBA_SC()`。 **我怎样才能防止这种情况发生？**

以下是我正在使用的相关 Doxygen 配置设置：

```
#---------------------------------------------------------------------------
# Build related configuration options
#---------------------------------------------------------------------------
EXTRACT_ALL            = YES
EXTRACT_PRIVATE        = YES
EXTRACT_STATIC         = YES
EXTRACT_LOCAL_CLASSES  = YES
EXTRACT_LOCAL_METHODS  = NO
EXTRACT_ANON_NSPACES   = YES
HIDE_UNDOC_MEMBERS     = YES
HIDE_UNDOC_CLASSES     = NO
HIDE_FRIEND_COMPOUNDS  = NO
HIDE_IN_BODY_DOCS      = YES
INTERNAL_DOCS          = NO
CASE_SENSE_NAMES       = NO
HIDE_SCOPE_NAMES       = NO
SHOW_INCLUDE_FILES     = YES
FORCE_LOCAL_INCLUDES   = YES
INLINE_INFO            = YES
SORT_MEMBER_DOCS       = YES
SORT_BRIEF_DOCS        = NO
SORT_MEMBERS_CTORS_1ST = NO
SORT_GROUP_NAMES       = NO
SORT_BY_SCOPE_NAME     = NO
GENERATE_TODOLIST      = YES
GENERATE_TESTLIST      = YES
GENERATE_BUGLIST       = YES
GENERATE_DEPRECATEDLIST= YES
ENABLED_SECTIONS       = 
MAX_INITIALIZER_LINES  = 30
SHOW_USED_FILES        = YES
SHOW_DIRECTORIES       = NO
SHOW_FILES             = YES
SHOW_NAMESPACES        = YES
FILE_VERSION_FILTER    = 
LAYOUT_FILE            = 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T19:21:10.117

如果你只是评论`//`它不会出现在 doxygen 上。Doxygen 仅解析以某些标记开头的评论，例如`/**`or `/*!`。

[doxygen 文档](http://www.doxygen.nl/manual/docblocks.html)中描述了已解析的令牌。

# c++ - c ++禁止指针和整数之间的比较

> ID：13443654
> 
> 赞同：-1
> 
> 时间：2012-11-18T19:20:40.347
> 
> 标签：c++

> **可能重复：**
> [ISO C++ 禁止指针和整数之间的比较 [-fpermissive]| [c++]](https://stackoverflow.com/questions/9280921/iso-c-forbids-comparison-between-pointer-and-integer-fpermissive-c)

```
#include <iostream>

using namespace std;

int main()
{
char name[20];
char color[20];
char response[20];
int age;
    cout << "What is your name?\n";
    cin.getline(name, 20); cout << endl;
    cout << "What is your favorite color?\n";
    cin.getline(color, 20); cout << endl;
    cout << "How old are you?\n";
    cin >> age;
    cout << "Your name is " << name << ", your favorite color is " << color << " and you are " << age << " years old!\n";
    cin.get();
    cout << "You wake up from bed all you know is your name and age.\n";
    cout << "You are wearing a plain " << color << " t-shirt.\n";
    cout << "You see a gun on the table.\n";
    cout << "You see a door.\n";
    cout << "What do you do?\n";
    cin.getline(response, 20);
    if(response == 'Pick up the gun')
    {
        cout << "You pick up the gun.\n";
        cout << "Knock down the door with it? (Y/N)\n";
        cin.getline(response, 20);
        if(response == 'Y')
        {
            cout << "The door opens.\n";
            cout << "You see a zombie.\n";
            cout << "You see an open window.\n";
            cout << "What do you do?\n";
            cin.getline(response, 20);
            if(response == 'Shoot the zombie')
            {
                cout << "The zombie dies and it attracts other zombies.\n";
                cout << "GAME OVER!\n";
                cin.get();
                return 0;
            }
            else if(response == 'Jump out the window')
            {
                cout << "The zombie does not hear you and you safely make it out!\n";
                cout << "VICTORY!\n";
                cin.get();
                return 0;
            }
        }
        else if(response == 'N')
        {
        }
    }
    else if(response == 'Open the door')
    {
        cout << "It appears to be locked.\n";
    }
    return 0;
} 
```

试图制作一个超级超短和简单的文字 rping 游戏，但它不起作用！我的错误是：

> ```
> 24 error:no matching function for call to 'std::basic_istream<char>::getline(std::string&)' 
> ```

并且在每一行都有`if`我得到的响应内容 C++ 禁止指针和整数之间的比较

我没有试图以任何形式或形式 o_o 这样做似乎无助于解决它。人们似乎让它工作，因为他们使用`""`而不是，`''`他们改变它`''`，它工作正常。但我一直在使用`''`！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T19:23:02.987

对于 if 语句，您应该使用：

```
if(strcmp(response,"Pick up the gun")) 
```

但实际上，如果您使用`std::string`

```
#include <string>
using namespace std;
int main()
{
  string name;
  string response;
  getline(cin, response);
  if !(response.compare("Pick up the gun"))
  {
    //Do stuff here for picking up gun
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T19:35:43.770

只需使用 strcmp，阅读有关数组和取消引用的内容，并知道“A”表示 ASCI 大写 A，其中“A”表示字符串，即 ['A','null']。

[http://www.cplusplus.com/reference/clibrary/cstring/strcmp/](http://www.cplusplus.com/reference/clibrary/cstring/strcmp/)

# c# - C# Ole DB 插入 SQL 无法工作

> ID：13443657
> 
> 赞同：1
> 
> 时间：2012-11-18T19:20:57.680
> 
> 标签：c#, ms-access-2007, ole, sql-insert

在这个类中，我试图实现一个方法以参数化的方式执行 SQL 插入，以防止 SQl 注入，结果可以显示查询可以执行，但是当我单击附加的数据库时，数据库没有更新我的项目 。

那么如何使用 Ole DB 执行插入命令呢？实施时是否有任何方法和预防措施？

以下是我的代码

```
 private string connectionDBString =     ConfigurationManager.ConnectionStrings["TestConnectionString"].ConnectionString.ToString(); 
```

……

```
 public void add_data(string chi_name, string eng_name, string nick_name,
        int bd_year, int bd_month, int bd_day, string home_tel, int no_of_child...... 
```

……

```
 string sql = @"INSERT INTO STUDENT(CHI_NAME,ENG_NAME,NICK_NAME,BD_YYYY,BD_MM,BD_DD,HOME_TEL,NO_OF_CHILD ..)VALUES(@NEW_CHI_NAME,@NEW_ENG_NAME,@NEW_NICK_NAME,@NEW_BD_YYYY...... 
```

……

```
OleDbCommand cmd = new OleDbCommand(sql, connection);
                cmd.CommandType = CommandType.Text;

                cmd.Parameters.Add(new OleDbParameter("@NEW_CHI_NAME", chi_name));
                cmd.Parameters.Add(new OleDbParameter("@NEW_ENG_NAME", eng_name));
                cmd.Parameters.Add(new OleDbParameter("@NEW_NICK_NAME", nick_name));
                cmd.Parameters.Add(new OleDbParameter("@NEW_BD_YYYY", bd_year));
                cmd.Parameters.Add(new OleDbParameter("@NEW_BD_MM", bd_month)); 
```

……

```
 connection.Open();

                int rows = cmd.ExecuteNonQuery();

                if (rows > 0)
                {
                    MessageBox.Show("Insert New Client Success!" + "  " + rows);
                }

                connection.Close();
                connection.Dispose(); 
```

.......在 app.config 中，正确包含 ConnectionString

```
 <add name="TestConnectionString"
        connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\test.accdb;Persist Security Info=True"

         providerName="System.Data.OleDb" /> 
```

# c++ - 使用 GetOpenFileName() 限制目录

> ID：13443660
> 
> 赞同：1
> 
> 时间：2012-11-18T19:21:08.240
> 
> 标签：c++, visual-studio-2010, winapi

我知道 Microsoft 建议使用通用项对话框`GetOpenFileName()`，`GetSaveFileName()`但我正在使用一些较旧的代码。

如何限制`GetOpenFileName()`只允许用户选择某个目录中的文件？

例如，我只希望用户能够从“图像”目录中选择一个文件。我不希望他们在打开文件时能够导航到其他目录。他们必须从“图像”目录中选择一个文件。

标志**OFN_NOCHANGEDIR**听起来可能是我需要的，但如果用户在打开文件时更改它，它只会将当前目录更改回原始目录。

如果无法使用`GetOpenFileName()`，是否可以使用较新的通用项目对话框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:43:20.397

对于`GetOpenFileName()`和`GetSaveFileName()`，您可以为该`OPENFILENAME::lpfnHook`字段分配一个回调过程。当它收到[`CDN_FILEOK`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646857.aspx)通知时，通过向对话框发送[`CDM_GETFOLDERPATH`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646850.aspx)消息来检索选定的文件夹。如果您不接受该文件夹，则向用户显示一条消息，然后通过调用`SetWindowLong()`设置一个非零`DWL_MSGRESULT`值来拒绝选定的文件，并从挂钩过程返回一个非零值。

**更新**：对于`IFileOpenDialog`and `IFileSaveDialog`，您可以实现事件回调以防止导航到不需要的文件夹，只需返回or以外[`IFileDialogEvents::OnFolderChanging`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775881.aspx)的错误值。`HRESULT``S_OK``E_NOTIMPL`

# c - 子结构最终包含错误的成员

> ID：13443662
> 
> 赞同：3
> 
> 时间：2012-11-18T19:21:11.617
> 
> 标签：c, struct

这可能是我做错了什么非常愚蠢的事情，但我无法弄清楚它是什么。

我有一个 struct `PDRect`，其成员是 a`PDPoint`和`PDSize`：

```
typedef struct {
    GLfloat x, y;
} PDPoint;

typedef struct {
    GLfloat width, height;
} PDSize;

typedef struct {
    PDPoint origin;
    PDSize size;
} PDRect; 
```

当我实例化一个时，像这样：

```
PDRect rect = {
    .origin = {
        .x = 0,
        .y = 0
    },
    .size = {
        .height = .5,
        .width = .5
    }
}; 
```

调试器说`rect.origin.width`and`rect.origin.height`都存在且等于 0，`rect.size.x`and`rect.size.y`都存在且等于 0.5。我不知道为什么会这样。

为清晰而编辑：我的困惑是为什么 rect.origin（它是一个 PDPoint）具有与之关联的高度和宽度值，而 rect.size（它是一个 PDSize）具有与之关联的 x 和 y 值。原点不应该只有 x 和 y 并且大小只有高度和宽度吗？

编辑：它实际上修复了它让它们以非匿名方式声明，即：

```
typedef struct _PDPoint {
    GLfloat x, y;
} PDPoint;

typedef struct _PDSize {
    GLfloat width, height;
} PDSize;

typedef struct _PDRect {
    PDPoint origin;
    PDSize size;
} PDRect; 
```

我仍然不确定我是否真的理解为什么会有所作为，但它似乎已经解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T01:35:42.677

我认为问题的发生是因为您同时使用匿名结构和类型定义。当 C 编译器看到

```
struct {...} name; 
```

构造它实际上改变的是它

```
struct anonymous {...} name; 
```

现在这就是我认为正在发生的事情：......我说我认为因为我无法重现你的例子。我只是将类型更改为浮点数并在 FreeBSD amd64/gcc 版本 4.2.1 20070831 上运行它。代码如下。

```
#include <stdio.h>

typedef struct {
  float x, y;
} PDPoint;

typedef struct {
  float width, height;
} PDSize;

typedef struct {
  PDPoint origin;
  PDSize size;
} PDRect;

int main(int argc, char *argv[]) {
  PDRect rect = {
    .origin = {
      .x = 1,
      .y = 1
    },
    .size = {
      .height = .5,
      .width = .5
    }
  };
  printf("w:%f h:%f x:%f y:%f\n",rect.size.width,rect.size.height,
      rect.origin.x,rect.origin.y);
  return 0;
} 
```

输出

> w:0.500000 h:0.500000 x:1.000000 y:1.000000

应该...如果您可以尝试以下内容，那将很有趣。更改其中一个结构以保存整数并查看交换是否再次发生。还尝试将 2 个字段初始化为非零值，以检查您是否导致它或其默认分配值。
我认为正在发生的是，编译器使用您的代码按以下顺序执行操作：

a)它看到一个名为 anonymous 的结构，它接受 2 个浮点数，将其存储在堆栈中并将其命名为 PDPoint

b）它看到一个名为 anonymous 的结构，它接受 2 个浮点数，将其存储在堆栈中并将其命名为 PDSize

c）在查找 PDPoint 以定义它从堆栈中弹出（）的第三个结构时，名为匿名的结构需要 2 个浮点数。但此时这会解析为 PDSize。

d）对于 PDSize，只有 PDPoint 留在堆栈上，实际上它是一个名为匿名的结构，需要 2 个浮点数。;)

typedef 和声明结构的正确方法是

```
typedef struct name_t { ... } name; 
```

尽管有些人会争辩说，现在你可以放弃 _t 约定（它是为 POSIX 保留的）。tl; dr：小心匿名结构。

# mysql - MySQL Query 查找最相似的数值行

> ID：13443664
> 
> 赞同：2
> 
> 时间：2012-11-18T19:21:37.190
> 
> 标签：mysql, similarity

在 MySQL 数据库中，我试图在许多数字属性中找到最相似的行。此问题与此问题类似，[但](https://stackoverflow.com/questions/12662892/mysql-query-to-find-similar-but-not-duplicated-row)包括灵活数量的比较和连接表。

## 数据库

该数据库由两个表组成。第一个表，用户，是我想要比较的。

```
id | self_ranking
----------------------------------
1       | 9
2       | 3
3       | 2 
```

第二个表是用户给特定项目的一系列分数。

```
id | user_id | item_id | score
----------------------------------
1  | 1       | 1       | 4
2  | 1       | 2       | 5
3  | 1       | 3       | 8
4  | 1       | 4       | 3 
```

## 任务

我想找到与给定用户“最相似”的用户，平等地评估所有排名项目（以及自我得分）。因此，完美匹配将是用户以完全相同的方式对所有相同的项目进行排名并且对自己的评分相同，而下一个最佳选择将是一个项目的排名略有不同的用户。

我遇到了困难：

*   以有效的方式连接两个表
*   处理并非所有用户都对相同项目进行排名的事实。我们只想比较相同项目的排名。

有人可以帮我构建一个合理的查询吗？我对 MySQL 不是很擅长，如果这个答案很明显，我很抱歉。

## 输出

如果用户 4 将自己排名为 8 并且项目 1=>4 和 2=>5，那么我希望查询用户 4 的最近用户以返回 1，即最近用户的 user_id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:28:07.157

在对@eggyal 的方法进行轻微改进时，我合并了我们能够匹配的项目数量。

```
SELECT   u2.user_id

-- join our user to their scores
FROM     (users u1 JOIN scores s1 USING (user_id))

-- and then join other users and their scores
    JOIN (users u2 JOIN scores s2 USING (user_id))
      ON s1.item_id  = s2.item_id
     AND u1.user_id != u2.user_id

-- filter for our user of interest
WHERE    u1.user_id = ?

-- group other users' scores together
GROUP BY u2.user_id

-- subtract the degree of difference in correlating scores from the number of correlating scores
ORDER BY (SUM(s1.item_id = s2.item_id) - 
  ( SUM(ABS(s2.score - s1.score) + ABS(u2.self - u1.self) ) ) ) DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:34:58.977

```
SELECT   u2.user_id

-- join our user to their scores
FROM     (users u1 JOIN scores s1 USING (user_id))

-- and then join other users and their scores
    JOIN (users u2 JOIN scores s2 USING (user_id))
      ON s1.item_id  = s2.item_id
     AND u1.user_id != u2.user_id

-- filter for our user of interest
WHERE    u1.user_id = ?

-- group other users' scores together
GROUP BY u2.user_id

-- and here's the magic: order in descending order of "distance" between
-- our selected user and all of the others: you may wish to weight
-- self_ranking differently to item scores, in which case just multiply
-- appropriately
ORDER BY SUM(ABS(s2.score - s1.score))
       + ABS(u2.self_ranking - u1.self_ranking) DESC 
```

# mercurial - 如何取消忽略 Mercurial 文件夹？

> ID：13443665
> 
> 赞同：1
> 
> 时间：2012-11-18T19:21:39.457
> 
> 标签：mercurial

我忽略了一个名为“temp”的文件夹，如何取消忽略并继续跟踪它？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T20:38:45.040

如果 temp 为空，Mercurial 只跟踪文件。否则，在您的 .hgignore 中有些东西会忽略它。您可能会忽略与 temp 以上的目录或 temp 以下的所有文件或目录匹配的模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T19:24:01.847

将其从您的 .hgignore 文件中取出，它应该会再次开始跟踪它。我在其他方面遇到了麻烦，因为我在 hg 中有一些我想忽略的东西。看来您必须从源代码管理中删除该文件，然后 .hgignore 。

# ios - 如何在不使用 ViewController 的情况下发送电子邮件？

> ID：13443669
> 
> 赞同：0
> 
> 时间：2012-11-18T19:22:01.390
> 
> 标签：ios, email

我想制作一个应用程序，自动将信息通过电子邮件发送到文本字段中。我不希望 ViewController 弹出 - 我只希望他们单击​​发送，它会自动发送给我。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T19:26:45.837

我可以看到这个问题的两种可能的解决方案。

1.  设置服务器并通过 HTTP POST 将您的内容发送给它。让服务器生成电子邮件并将其发送给您。例如，这可以通过一个简单的 PHP 脚本轻松实现。
2.  自己通过 SMTP 从设备发送电子邮件。[`SKPSMPTMessage`](http://code.google.com/p/skpsmtpmessage/)去图书馆看看。

话虽如此，请注意发送的内容。不要在用户不知情和不接受的情况下发送用户特定信息。

# wordpress - wordpress 操作、过滤器和挂钩存储在哪里？

> ID：13443679
> 
> 赞同：2
> 
> 时间：2012-11-18T19:23:18.440
> 
> 标签：wordpress

我需要知道除了 /wp-includes/plugin.php 之外，除了 /wp-includes/plugin.php 之外，还有其他路径到文件的其他路径吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T19:55:15.510

动作和钩子没有被存储，这就是它们的全部美。您使用 注册一个新动作`add_action()`，将一个函数添加到将使用声明的动作执行的函数列表中。然后，在任何你想要的地方执行动作`do_action()`，甚至在多个地方。这样，可以在任何地方将功能添加到操作中，并且可以在任何地方执行操作......也就是说，您实际上可能正在寻找 WordPress 的某些操作确实在哪里执行，以了解为什么会发生某些事情，并对其进行调查，并可能通过添加另一个功能（与另一个`add_action`宣言）。也许这就是您正在做的事情，但是如果您需要帮助，则必须更加明确。无论如何，在这种情况下，只需在您的 WordPress 文件夹中搜索“do_action”，甚至可能是“do_action('name_of_the_action_if_you_know_it”...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-07T17:10:50.553

它们存储在全局 $wp_filter 变量中。

此变量是 WP_HOOK 对象的数组。WP_HOOK 类在 wp-includes/class-wp-hook.php 中定义。

此类具有 this->apply_filters 方法，该方法在调用 do_action() 时执行 add_action() 中的函数。

该函数通过 call_user_func_array() php 函数执行。

# android - 尝试运行 admob 内部广告时出错：“不支持广告类型”

> ID：13443685
> 
> 赞同：2
> 
> 时间：2012-11-18T19:24:09.663
> 
> 标签：android, admob

很长一段时间以来，我一直在使用内部 admob 广告来推广我的 Android 应用程序，但从几天前开始，我无法运行这些广告。

尝试从 admob 网站运行它们时，它们将保持停止状态并显示一条错误消息：“*您的一种或多种广告组类型不再受支持且无法运行。请将此广告组移至 Google AdWords。了解如何操作[这里]* [1。](http://support.google.com/adwords/bin/answer.py?hl=en&answer=2663346) ”

该链接表明网络广告应放置在 AdWords 中。很好，但我所有的广告组类型都是 Android 应用下载，应该保留在 admob 中。这是一个内部广告，据我所知，它甚至不存在于 AdWords 中。

我以为我找到了解决方法：重新创建内部广告系列让我可以再次投放广告几天。但是今天我在尝试运行已停止的广告时再次收到同样的错误。

有什么建议吗？您的内部 Android 应用程序下载广告是否正常运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:35:09.253

好的，这似乎又可以工作了。

我从头开始。

下：广告组目标，您需要将 Android 应用下载。

在广告信息中，

网址：market://details?id=com.yourdomain.yourpackage

显示网址：play.google.com

============================= 如果我没记错的话，我没有在广告信息 URL 中使用 market:// ，我像这样使用我的应用程序的完整路径

[https://play.google.com/store/apps/details?id=com.mydomain.mypackage](https://play.google.com/store/apps/details?id=com.mydomain.mypackage)

这是我所知道的唯一一件事，我正在做不同的事情。要么他们修复了某些东西，要么这就是问题所在。

# xml - 如何使用 XML 创建一个 longlist Selector AZ？

> ID：13443688
> 
> 赞同：0
> 
> 时间：2012-11-18T19:24:29.053
> 
> 标签：xml, windows-phone-7, selector

我有一个巴士站列表。如何创建一个长列表选择器，以便在从 Internet 下载列表时，随机列出的站点列表显示为 AZ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T01:18:33.753

[http://windowsphonegeek.com/articles/wp7-longlistselector-in-depth--part2-data-binding-scenarios](http://windowsphonegeek.com/articles/wp7-longlistselector-in-depth--part2-data-binding-scenarios)

这篇文章也许可以帮助你

# c++ - 为什么这段代码会泄露？（简单的代码片段）

> ID：13443689
> 
> 赞同：-1
> 
> 时间：2012-11-18T19:24:40.563
> 
> 标签：c++, memory-leaks, hdf5

Visual Studio 向我展示了几个泄漏（几百行），总共超过几 MB。我将其追溯到以下“helloWorld 示例”。如果我注释掉 H5::DataSet.getSpace() 行，泄漏就会消失。

```
#include "stdafx.h"
#include <iostream>
#include "cpp/H5Cpp.h"

int main(int argc, char *argv[])
{
_CrtSetDbgFlag ( _CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF ); // dump leaks at return

H5::H5File myfile;
try {
    myfile = H5::H5File("C:\\Users\\yyy\\myfile.h5", H5F_ACC_RDONLY);
}
catch (H5::Exception& e) {
    std::string msg( std::string( "Could not open HDF5 file.\n" ) + e.getCDetailMsg() );
    throw msg;
}

H5::Group myGroup = myfile.openGroup("/so/me/group");
H5::DataSet myDS = myGroup.openDataSet("./myfloatvec");
hsize_t dims[1];
//myDS.getSpace().getSimpleExtentDims(dims, NULL); // <-- here's the leak

H5::DataSpace dsp = myDS.getSpace(); // The H5::DataSpace seems to leak
dsp.getSimpleExtentDims(dims, NULL);
//dsp.close(); // <-- doesn't help either

std::cout << "Dims: " << dims[0] << std::endl; // <-- Works as expected

return 0;
} 
```

任何帮助，将不胜感激。我已经做了几个小时了，我讨厌不干净的代码......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:44:40.207

使用完后使用[H5::DataSet::vlenReclaim](http://www.hdfgroup.org/HDF5/doc/cpplus_RM/classH5_1_1DataSet.html#4e76899f034982233893d98a994e1020)回收内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T23:01:54.743

可变长度回收仅在您使用可变长度数据类型时才适用，我认为您不会在此示例中使用可变长度数据类型。我认为您只需要在使用完数据空间后关闭它即可。

# delphi - 按类获取元素？

> ID：13443694
> 
> 赞同：1
> 
> 时间：2012-11-18T19:25:25.123
> 
> 标签：delphi, delphi-xe2, twebbrowser

如何从具有类名的元素中获取 InnerText？

```
<div class="SomeClass" style="text-align: left; display: block;"></div>

<div class="SomeClass" style="text-align: left; display: block;">Sometext</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:53:13.287

嗨，在 HTML doc 中查找值 yo 必须具有相同的特殊属性 id 。

它是重要的特殊属性。

例如，您可以使用此功能找到内部文本，但使用 id ：

```
function GetInnerElementById(const Doc: IDispatch; const Id: string): WideString;
var
  Document: IHTMLDocument2;     // IHTMLDocument2 interface of Doc
  Body: IHTMLElement2;          // document body element
  Tags: IHTMLElementCollection; // all tags in document body
  Tag: IHTMLElement;            // a tag in document body
  I: Integer;                   // loops thru tags in document body
begin
  Result :='';
  // Check for valid document: require IHTMLDocument2 interface to it
  if not Supports(Doc, IHTMLDocument2, Document) then
    raise Exception.Create('Invalid HTML document');
  // Check for valid body element: require IHTMLElement2 interface to it
  if not Supports(Document.body, IHTMLElement2, Body) then
    raise Exception.Create('Can''t find <body> element');
  // Get all tags in body element ('*' => any tag name)
  Tags := Body.getElementsByTagName('*');
  // Scan through all tags in body
  for I := 0 to Pred(Tags.length) do
  begin
    // Get reference to a tag
    Tag := Tags.item(I, EmptyParam) as IHTMLElement;
    // Check tag's id and return it if id matches
    if AnsiSameText(Tag.id, Id) then
    begin
      Result := Tag.innerHTML;
      Break;
    end;
  end;
end; 
```

您必须使用“MSHTML”单元...

您可以将其与示例一起使用：

```
</head>
<body>
<div id="TESTID">sametext</div>
</body>

ShowMessage(GetElementById(wb1.Document,'TESTID')); 
```

如果你必须使用 SomeClass 告诉我我给你新的功能......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T20:07:50.027

好的课程可能不止一个，您必须使用我为您制作的 TstringList 函数：

```
function GetInnersByClass(const Doc: IDispatch; const classname: string;var Lst:TStringList): Integer;
var
  Document: IHTMLDocument2;     // IHTMLDocument2 interface of Doc
  Body: IHTMLElement2;          // document body element
  Tags: IHTMLElementCollection; // all tags in document body
  Tag: IHTMLElement;            // a tag in document body
  I: Integer;                   // loops thru tags in document body
begin
  Lst.Clear;
  Result := 0 ;
  // Check for valid document: require IHTMLDocument2 interface to it
  if not Supports(Doc, IHTMLDocument2, Document) then
    raise Exception.Create('Invalid HTML document');
  // Check for valid body element: require IHTMLElement2 interface to it
  if not Supports(Document.body, IHTMLElement2, Body) then
    raise Exception.Create('Can''t find <body> element');
  // Get all tags in body element ('*' => any tag name)
  Tags := Body.getElementsByTagName('*');
  // Scan through all tags in body
  for I := 0 to Pred(Tags.length) do
  begin
    // Get reference to a tag
    Tag := Tags.item(I, EmptyParam) as IHTMLElement;
    // Check tag's id and return it if id matches
    if AnsiSameText(Tag.className, classname) then
    begin
      Lst.Add(Tag.innerHTML);
      Inc(Result);
    end;
  end;
end; 
```

结果是每个有多少类功能

您可以将其与此示例一起使用：

```
var
  lst : TStringList;
begin
  //
  lst := TStringList.Create;
  GetInnersByClass(wb1.Document,'SameClass',lst);
  ShowMessage(lst.Text);
  lst.Free;
end; 
```

不要忘记将 MSHTML 单元添加到主单元。

# mysql - 如何在 MySQL 中存储距离矩阵？

> ID：13443695
> 
> 赞同：1
> 
> 时间：2012-11-18T19:25:32.020
> 
> 标签：mysql, matrix, distance

在mysql中存储距离矩阵的最佳方法是什么？

目前我有两张桌子：

`tPlaces`

`PlaceID`, `PlaceName`,`Location`

`tDistances`

`PlaceID_1`, `PlaceID_2`,`Distance`

这是最好的方法吗？我听说过`RTREE`，`BTREE`但还没有找到关于如何实施这种解决方案的全面指南。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:30:27.060

我认为除了纯字符串之外的任何东西都是可行的。这样您就可以在 PHP（或您可能使用的任何东西）中编写一个简单的方法来处理数据。我会把它存储在

```
ID | matrix
-------------------------------------------------------------------
1  | "PlaceID, PlaceName, Location, PlaceID_1, PlaceID_2, Distance"
2  | "PlaceID, PlaceName, Location, PlaceID_1, PlaceID_2, Distance"
3  | "PlaceID, PlaceName, Location, PlaceID_1, PlaceID_2, Distance" 
```

您可以使用[str.explode()](http://php.net/manual/en/function.explode.php)处理数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:34:28.770

如果您使用 JSON.stringify() 您可以将整个结果存储为一个字符串，这与您收到它的方式完全相同。

# android - 我怎么知道应用程序何时在后台？

> ID：13443697
> 
> 赞同：0
> 
> 时间：2012-11-18T19:25:45.913
> 
> 标签：android

我有一个应用程序，它是一个包含多个选项的菜单，选择每个选项都会导致一个新活动。我还使用服务在后台播放音乐。无论专注于什么活动，我都希望我的音乐持续播放。

我的问题是：

*   如果我没有覆盖 onPause() 或 onStop()，当我打开另一个活动时，音乐会正常播放。但是当我按下主页按钮时，音乐仍在播放。
*   如果我确实覆盖了 onPause() 或 onStop()，当我按下 Home 按钮时音乐将停止，但当另一个活动打开时它也会停止。

那我现在该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:30:29.280

您可以覆盖`onPause()`和使用布尔标志。如果您要启动新活动，请将
布尔值设置为。`true`当`onPause()`被调用时你会知道如果不是`true`那么你应该停止音乐。

```
boolean keepPlaying = false;

protected void onPause() { 
    if(!keepPlaying)
        stopService(new Intent(this, MediaPlayerServices.class)); 
    super.onPause();
} 
```

# ruby - 删除重复字符的正则表达式

> ID：13443699
> 
> 赞同：3
> 
> 时间：2012-11-18T19:25:55.480
> 
> 标签：ruby

我有一个这样的字符串：

> 我有sooome screeeewy inpuuuuut

我需要对其进行规范化，除了其他处理之外，我需要删除所有重复的字符，即`soooome`变为`some`等。

语法正确性无关紧要。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T19:27:04.040

您不需要正则表达式。只需使用`str.squeeze`：

```
str = 'i got sooome screeeewy inpuuuuut'
=> "i got sooome screeeewy inpuuuuut"

str.squeeze
=> "i got some screwy input" 
```

**在此处查看[现场演示](http://cibox.org/slivu/stackoverflow?lang=ruby&file=regexp-to-remove-repetitive-chars.rb&run=true)。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T19:40:45.637

slivu 的答案当然是最简洁的，但如果你**必须**使用正则表达式，你可以使用：

```
> 'i got sooome screeeewy inpuuuuut'.gsub(/(\w)\1+/, "\\1")
=> "i got some screwy input" 
```

# jquery - 添加动态内容后，JsScrollpane 未更新

> ID：13443700
> 
> 赞同：1
> 
> 时间：2012-11-18T19:25:56.917
> 
> 标签：jquery, jquery-jscrollpane

我运行此代码将 xml 数据加载到表中，但是在加载数据后，我似乎无法重新加载滚动条。没有任何效果，甚至无法`$('.scroll-pane').jScrollPane();`在 Firebug 中手动运行。

这是代码：

```
$("#MenuList").html('<div class=\"menu-activity\">Please Wait</div>');
$.blockUI();

           $.get('venuesxml.php', function (data) {

                $('#MenuList').html("<div class=\"menu-activity\">Showing activity for 13.10.2012</div>");

                $(data).find('marker').each(function () {

                    $('#MenuList').append("<div class='menu-item-red'><div class='typename'>Event</div><div class='eventname'>" +

                    $(this).attr('id') + "</div><div class='venuename'>" +

                    $(this).attr('venue_type') + "</div></div>");

                });

            });

            $.unblockUI();
            $('.scroll-pane').jScrollPane(); 
```

[这是一个现场演示](http://nightlifebratislava.com/demos/NewMaps/Map.php)点击“搜索”执行代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:42:18.017

通常，必须在 JSP 上调用 reinitialise() 以使其动态识别放置在其中的任何数据……例如在 AJAX 调用之后。看起来这里可能存在时间问题..

```
 var api = $('.scroll-pane').data('jsp');
 api.reinitialise(); 
```

或者你可以使用 autoReinitialise，它只是一个调用 reinit 的 JS 计时器。我更喜欢在适当的时候使用手动方法。

你会想通读一遍。 [http://jscrollpane.kelvinluck.com/api.html](http://jscrollpane.kelvinluck.com/api.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T19:42:34.180

添加动态内容后，您需要重新初始化插件。

试试这个：

```
 $(function()
{
    // Initialise the scrollpanes
    $('.scroll-pane').jScrollPane();

    // Add some content to #pane2
    var pane2api = $('#pane2').data('jsp');
    var originalContent = pane2api.getContentPane().html();
    pane2api.getContentPane().html(originalContent + originalContent + originalContent);

    // Reinitialise the #pane2 scrollpane
    pane2api.reinitialise();
}); 
```

[更多信息可以在这里找到](http://jscrollpane.kelvinluck.com/less_basic.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T08:57:12.377

你可以尝试这样做......

```
 //Should it (the #parentContainer) have had a "scroll-pane" class

        $('#parentContainer').jScrollPane()

    $.each(data, function(i, value) {

//Detach scrolling capabilities
        $('#parentContainer').jScrollPaneRemove();

        $('<div/>',{
        class:'anyClass',
        id:'anyId'
        })
        .appendTo(#childContainer);

//Return back Scrolling capabilities to the parent container    
        $('#parentContainer').jScrollPane();            

        ///-> Loop Ends
                }); 
```

这样，每次循环时滚动功能都会更新......因此，滚动条的长度将根据子容器中数据存储的大小而增长或缩小。

希望有帮助....

埃贝斯特

# java - 如何将数据发送到另一个 Android 应用程序并接收处理后的数据？

> ID：13443711
> 
> 赞同：1
> 
> 时间：2012-11-18T19:27:39.607
> 
> 标签：java, android

我想创建两个独立的 Android 应用程序，使其行为如下：

MainAplication 将在单击按钮时调用 Aplication2，然后 MainAplication 将向 Aplication2 发送一些数据，Aplication2 将在 MainAplication 前面（屏幕顶部）打开，将处理发送的信息，然后当单击 Aplication2 内的按钮时将消失，MainAplication 将保留在屏幕顶部并接收已处理的信息。

你能给我一个关于如何完成这种方法的想法吗？

我想要创建的基本概念是：

[应用理念](http://imgur.com/bUCub)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:35:37.593

> 这取决于您将如何通过蓝牙、wifi 或服务器通信发送此信息。如果您使用的是服务器通信，那么这很简单。调用 Web 服务并将带有 NEXT DEVICE ID (DEVICE-2) 的消息传递给服务器，让服务器使用通知通知设备 2 的传入消息，或者您也可以直接下载，然后在设备 2 上通知，依此类推。 .! 这很简单 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T22:16:23.793

听起来您想要的并不是两个独立的应用程序，而是一个非常常见的具有多个活动的应用程序。Android 活动在称为堆栈的东西上工作。例如，您从将调用第二个活动的主要活动开始。这第二个活动现在被放置在主要活动的“顶部”。因此，如果您按下“返回”按钮，它将返回到主要活动，或者，您可以调用第三个活动，该活动将放置在第二个活动之上。[这是一个链接](http://developer.android.com/guide/components/tasks-and-back-stack.html)，其中包含有关该主题的更多信息。

您可以使用以下代码调用活动：

```
Intent i = new Intent(CurrentActivity.this, NextActivity.class);
startActivity(i); 
```

其中，在上面的代码中，CurrentActivity 是您当前所在的活动的名称，NextActivity 是您希望去的活动的名称。

如果您想转到另一个活动但返回到调用活动，请使用：

```
startActivityForResult(i, REQUEST_CODE_VALUE); 
```

其中 REQUEST_CODE_VALUE 是一个 int，用于区分其他 startActivityForResult 方法调用。

[这是一个链接](http://developer.android.com/reference/android/app/Activity.html)，其中包含有关活动主题的更多信息。

现在，如果您确实想让两个独立的应用程序相互通信，那么这取决于您真正想要做什么。您可以让这两个应用程序通过服务器或数据库进行通信。或者你可以让他们发送和接收广播意图。在这种情况下，请查找有关广播接收器的一些信息。

我希望这有帮助！

# c# - 使用 Razor 缓存 twitter 小部件

> ID：13443712
> 
> 赞同：1
> 
> 时间：2012-11-18T19:28:05.910
> 
> 标签：c#, asp.net, razor

我正在尝试使用 razor 语法缓存 twitter 提要，并尝试使用 @Html.Action 将其合并。运行代码后，编译器错误提示：

> 错误 CS0246：找不到类型或命名空间名称“ActionResult”（您是否缺少 using 指令或程序集引用？）

有人可以告诉我是否缺少某种@directory 吗？

```
@{
Layout = null;
}

<!DOCTYPE html>

<html> 
<body>
<div>
@{
var user = Dnn.User;
var twitterName=user.Profile.GetPropertyValue("Twitter");
if (String.IsNullOrEmpty(twitterName)){
    twitterName="tdsb";
}
}

@functions{
public class MyController : Controller
[OutputCache(VaryByParam="none", Duration=60)]
public ActionResult Index()
{
    ViewModel.Message=Twitter.Profile(twitterName).ToString();
    return View();
}
}
@Html.Action("Index")

}
</div>
</body>
</html> 
```

# c# - XML序列化和类别名？可能的？

> ID：13443714
> 
> 赞同：0
> 
> 时间：2012-11-18T19:28:12.207
> 
> 标签：c#, c#-4.0, dotnet-httpclient

我正在使用 HttpClient 并进行 GetAsync 调用。然后我通过调用来确保调用成功`response.ErrorSuccessStatusCode()`。

然后我打电话`response.Content.ReadAsAsync<WikiResponse>()`。调用 ReadAsAsync 时出现错误，因为第 3 方 REST 服务正在传回，并且 XML 响应称为“Response”而不是“WikiResponse”。此 WikiResponse 是由另一个第 3 方创建的。我无法创建一个名为 Response 的对象，因为已经有一个名为 this 的类与其他 DTO 处于相同的“级别”，但具有不同的类结构。

有没有办法让 WikiResponse “适合” 响应？除了类名之外，XML 和类结构是相同的。

感谢您的快速回复！

**更新：**

我试过`[XmlRoot(ElementName = "Response")]`在课堂上使用，但没有用。

这是我得到的错误：

```
[System.Runtime.Serialization.SerializationException] = {"Error in line 1 position 103\.  Expecting element 'WikiResponse' from namespace 'http://schemas.datacontract.org/2004/07/Project.WikiResponses.DTO'.. Encountered 'Element'  with name 'Response', namespace 'http://www.someurl.com/url'. "} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:54:30.877

You could try one of the overloads for ReadAsAsync:

```
public static Task<T> ReadAsAsync<T>(
    this HttpContent content,
    IEnumerable<MediaTypeFormatter> formatters
) 
```

and create your own MediaTypeFormatter.

[http://msdn.microsoft.com/en-us/library/hh943959(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/hh943959(v=vs.108).aspx)

# css - 使用引导按钮时覆盖链接样式

> ID：13443716
> 
> 赞同：4
> 
> 时间：2012-11-18T19:28:18.363
> 
> 标签：css, ruby-on-rails-3, twitter-bootstrap

我一起使用这些标签

```
<div class ="btn btn-warning offset3 span2" ><%=link_to  "Enter Info", info_path%></div> 
```

结果是链接 (a) 标记覆盖了文本颜色属性。它在彩色按钮上看起来不太好。所以我想在与 btn 一起使用时将链接的属性更改为纯白色。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T14:09:23.917

您不需要`div`- 您可以将这些类直接应用于锚点：

```
<%= link_to "Enter Info", info_path, class: "btn btn-warning offset3 span2" %> 
```

这样，链接被设置为按钮，覆盖所有默认链接样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:34:03.233

我能够使用这样的方法解决这个问题：

```
<div class ="btn btn-warning offset3 span2" ><%=link_to  "Enter Info", info_path, :style => "color:#ffffff"%></div> 
```

# .net - 任何测试结构（尤其是包含`Decimal`）的好方法是否完全相等

> ID：13443717
> 
> 赞同：4
> 
> 时间：2012-11-18T19:28:24.073
> 
> 标签：.net, struct, equality

在 4.0 之前的 .net 版本中，如果结构仅包含原始字段，则该结构的运算符仅在所有字段精确匹配时`Equals`才会返回。`true`在 4.0 中，Microsoft 更改了此行为，因此`Decimal`如果相应字段包含表示相同数字量的值，则具有类型字段的结构可以返回 true，即使它们在其他细节上不匹配（最值得注意的是，对于`Decimal`仅在尾随不同的值零被认为是相等的）。不幸的是，在某些情况下，这绝对是灾难性的。例如，给定两个不可变对象`X`和`Y`，如果 的所有字段都精确`Y`匹配`X``X``Y`. 然而，为了确保这种替换是安全的，匹配必须是精确的。如果 in 的一个字段`X`包含 0.1m，而 in 的相应字段`Y`包含 0.10m，则不应认为对象*相等*，因为 的可观察行为与 的`Y`不同`X`。

如果 Microsoft 没有重写`Equals`这些类型以表示等价以外的含义（这对几乎所有其他类型都意味着），那么人们可以安全地假设如果一个对象报告了`Equals`另一个对象，则后者的实例可以替换为前者; 即使考虑到 上的非等价覆盖`Decimal`，也可以通过将这些类型包装在结构中来测试等价性。鉴于 Microsoft 不再允许这种等效测试方法，要获得相同的结果需要做什么？属性是否有任何方法`AlternateEqualityComparer<T>.Default`可以确定结构是否定义了自己的`Object.Equals`[应该使用的]覆盖还是系统提供的覆盖[在这种情况下，如果结构包含任何使用基于非等价的字段`Equals`，它应该使用一个相等性运算符来测试等价性]？

**编辑** 我已经使用包含浮点类型的结构以及`Decimal`; 即使`Decimal`不是引用类型，它在结构中的存在也导致自动生成的`Equals`方法不对任何字段使用二进制比较。

**编辑 2** 这是一个显示 .net 4.0 中问题的示例程序；我读到自早期版本的 .net 以来行为已经改变，尽管这个程序在 2.0 和 4.0 上似乎运行相同：

```
struct Test<T1,T2>
{
    public T1 f1;
    public T2 f2;
    public Test(T1 p1, T2 p2)
    {
        f1 = p1;
        f2 = p2;
    }
}

class Program
{
    static void DoCompares<T1,T2>(Test<T1,T2> thing1, Test<T1,T2> thing2)
    {
        Console.WriteLine("{0}/{1}/{2} {3}",
        thing1.f1, thing2.f1, thing1.f1.Equals((Object)thing2.f1),
        thing1.Equals(thing2));
    }
    static void DoTest<T1, T2>(T1 p1a, T1 p1b, T2 p2)
    {
        Test<T1,T2> thing1 = new Test<T1,T2>(p1a,p2);
        Test<T1,T2> thing2 = new Test<T1,T2>(p1b,p2);
        DoCompares(thing1, thing2);
    }
    static void Main(string[] args)
    {
        DoTest(1.0m, 1.00m, 1.0);
        DoTest(1.0m, 1.00m, 1.0m);
        DoTest(1.0 / (1.0 / 0.0), -1.0 / (1.0 / 0.0), 1.0m);
        DoTest(1.0 / (1.0 / 0.0), -1.0 / (1.0 / 0.0), 1.0);
        Console.ReadLine();
    }
} 
```

如果结构仅包含 type `Double`，则如果结构不完全匹配，则结构的相等比较器会将结构报告为不同的。如果它包含一个类型为 的字段`Decimal`，即使它`Decimal`是一个不包含引用字段的结构，如果它们的数值相等，相等比较器也会将它们报告为相同，即使它们不相等。

在任何情况下，无论 .net 是否曾坚持对`Decimal`对象进行二进制匹配，问题仍然存在：执行结构比较的最佳方法是什么，以便不包含引用类型字段的值类型的相等比较是使用按位相等而不是数值相等来确定的？有没有办法在为自动生成`Equals`的那些使用替代相等比较器时尊重结构类型的“显式”覆盖？`Equals`

# ruby-on-rails - 通过对面表的属性删除连接表记录

> ID：13443719
> 
> 赞同：0
> 
> 时间：2012-11-18T19:28:47.453
> 
> 标签：ruby-on-rails, activerecord, join

我有用户：

```
has_many :user_artists
has_many :artists, :through => :user_artists 
```

用户艺术家：

```
belongs_to :artist
belongs_to :user
delegate :itunes_id, :to => :artist 
```

艺术家

```
has_many :user_artists
has_many :users, :through => :user_artists
attr_accessible :itunes_id 
```

我想根据该艺术家的给定 itunes_id 销毁给定用户的 user_artists。我可以做到`User.first.user_artists.select {|ua| ua.itunes_id == 200823564}`，但有没有办法只使用 ActiveRecord 来做到这一点？或者这是最有效的方法？

我在想类似的事情，`User.first.user_artists.where( :artist => {:itunes_id => 1000}).destroy_all`但是 SQL 抱怨 user_artists 上没有 Artist.itunes_id 列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:52:50.083

怎么样

```
User.first.user_artists.join(:artist).where('artist.itunes_id = ?', 1000).destroy_all 
```

# php - ui.draggable 没有被推入数组并使用 join 和 push 以逗号显示

> ID：13443722
> 
> 赞同：1
> 
> 时间：2012-11-18T19:29:05.130
> 
> 标签：php, jquery-ui, join, push

如果将可拖动 div 的 id 放入 droppable_box 中，我希望它们在警报按钮中显示为逗号分隔的列表。取而代之的是，每个拖动的 div 一个接一个地发出警报，而不是列表。

```
<script type="text/javascript">
    $(document).ready(function(){
    $( "#draggable1" ).draggable({ grid: [ 20,20 ] });
    $( "#draggable2" ).draggable({ grid: [ 20,20 ] });
     $( "#draggable3" ).draggable({ grid: [ 20,20 ] });

        $( "#droppable_box" ).droppable({

            drop: function( event, ui ) {
            var currentId = $(ui.draggable).attr('id');

            var stuff = [];
            $.each($(ui.draggable), function(i,e) {
                stuff.push(e.id);
            });

            var energy = stuff.join(", ");

            var data = "X-Requested-With=XMLHttpRequest";

    $('#myId').click(function(){

        $.post (
            "process.php",
            data,
            function(data)
            {
            alert(energy);

            },
            'html'
            );
         });

        }
        });
    });
</script> 
```

在 html 中有 3 个可拖动的 div

```
<div id="draggable1" class="draggable_meal"></div>
<div id="draggable2" class="draggable_meal"></div>
<div id="draggable3" class="draggable_meal"></div> 
```

我稍微更改了 jquery 并[在此处](http://maureenmoore.com/momp_112412/112412.html)发布：

您可以查看视图源。谢谢。

在 process.php 中，它给了我 1 到 3 个数组，具体取决于我拖动了多少 div。我想将 $_REQUEST 对象推入数组使用

```
foreach ($_REQUEST as $key => $value) {
            array_push($stack,$value);
          }
print_r($stack); 
```

但它给了我 1 到 3 个数组，每个数组的键为零。如何从例如 3 个拖动的 div 中获取一个数组？

# java - UML：如何在 Java 中实现关联类

> ID：13443724
> 
> 赞同：26
> 
> 时间：2012-11-18T19:29:10.527
> 
> 标签：java, associations, uml

我有这个 UML 关联类。注意：横线为实线，竖线为虚线。

```
 ---------                  ---------
|         |*(a)        *(b)|         |
| CLASS   |________________|  CLASS  |
|STUDENT  |     |          |  COURSE |
 ---------      |           ---------
                |*(c)
          ______|______
         |             |
         |             |
         |  CLASS      |
         | TRANSCRIPT  |
         |_____________| 
```

我理解这种关系，但是在将这个 UML 实现为代码时遇到了一些问题。`Student`我可以实现类和类`Course`到代码之间的关系。这是我的代码：

```
class Student {
  Vector<Course> b;
}

class Course {
   Vector<Student> a;
} 
```

但是，在课堂上`Transcript`，我不太了解如何在代码中使用这个类。它是 class`Student`和`Course`. 所以，如果这是真的，那么代码将是：

```
class Student {
  Vector<Course> b;
  Vector<Transcript> c;
}

class Course {
  Vector<Student> a;
  Vector<Transcript> c;
} 
```

这是真的吗？如果这是错误的，请教我如何实现这个 UML。

谢谢 ：）

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-18T19:50:58.943

首先，不要使用 Vector，因为它是一个老类，不应该再使用超过 10 年。使用 a`Set`或 a `List`。

如果`Transcript`该类包含有关学生参加课程的方式的信息（例如，其订阅课程的日期），您可以像这样实现它：

```
class Student {
    Set<Transcript> transcripts;
}

class Transcript {
    Student student;
    Course course;
    Date subscriptionDate;
}

class Course {
    Set<Transcript> transcripts;
} 
```

这并不妨碍您在 Student 中提供返回所有课程的方法： 

```
public Set<Course> getCourses() {
    Set<Course> result = new HashSet<Course>();
    for (Transcript transcript : transcripts) {
        result.add(transcript.getCourse());
    }
    return result;
} 
```

如果`Transcript`不包含任何信息，那么它可能用于对这些类如何在数据库表中进行映射进行建模，其中在两个表之间建立多对多关联的唯一方法是使用包含 ID 的连接表两个关联的表。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-09-02T20:18:19.500

我知道这个问题很老了，但我有一种比在关联类中嵌入 n..1 关系更方便的方法：

```
public class Transcript {
    //Transcript's properties
} 

public class Course {

    private Map<Student, Transcript> transcriptsByStudent;
}

public class Student {

    private Map<Course, Transcript> transcriptsByCourse;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-07T23:26:44.077

再补充一点，在您的模型上，您表示关联类的多重性。这是不必要的，因为关联类**就是**关联本身，原来两个类的多重性关系会满足。

# java - 如何创建创建列表的方法的通用版本

> ID：13443726
> 
> 赞同：3
> 
> 时间：2012-11-18T19:29:18.363
> 
> 标签：java, generics

是否可以将以下函数创建为我可以重复使用的通用函数？

我想传入一个集合，并返回对象中特定属性的列表。

到目前为止，我有这个：

```
 private List<Integer> getPropertyABCIdsFromSomeObject(List<SomeObject> someObjects) {
        List<Integer> ids = new ArrayList<Integer>();
        for(SomeObject so : someObjects) {
            ids.add(so.getPropertyABCId());
        }
        return ids;
    } 
```

所以这个方法只适用于 SomeObject 类型，并返回一个 PropertyABCId 列表。

现在，如果我想要一个其他属性的列表，我必须复制这个函数而几乎没有什么变化。

仿制药可以在这里挽救一天吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T19:39:49.627

你需要一个接口，但是是的：

```
interface HasProperty<T> {
    T getProperty();
}

public static <T> List<T> getProperties(List<? extends HasProperty<T>> items) {
    List<T> properties = new ArrayList<T>();
    for (HasProperty<T> item : items) {
        properties.add(item.getProperty());
    }
    return properties;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T20:13:49.017

## 基于模板的解决方案

像这样定义一个模板：

```
public class ConvertListTemplate<A, B>
{
  public List<B> convert( List<A> list ) {
    List<B> result = new ArrayList<B>();
    for( A a : list ) {
      result.add(convertElement(a));
    }
    return result;
  }

  public abstract B convertElement(A element);
} 
```

然后在您的代码中执行此操作：

```
List<Integer> result = new ConvertListTemplate<SomeObject, Integer>() {
  public Integer convertElement(SomeObject element) {
    return element.getPropertyABCId();
  }
}.convert(source); 
```

## 基于策略的解决方案

使用这样的方法：

```
public <A, B> List<B> getProperties(
        List<A> list,
        GetPropertyStrategy<? super A, ? extends B> strategy
) {
  List<B> result = new ArrayList<B>();
  for( A a : list ) {
    result.add(strategy.getProperty(a));
  }
  return result;
} 
```

带有策略界面：

```
public interface GetPropertyStrategy<A, B>
{
  public B getProperty(A toConvert);
} 
```

然后像这样调用方法：

```
List<Integer> result = getProperties(source, new GetPropertyStrategy<SomeObject, Integer>() {
  public Integer getProperty(SomeObject element) {
    return element.getPropertyABCId();
  }
}); 
```

# apache - .htaccess 重写多个域

> ID：13443734
> 
> 赞同：1
> 
> 时间：2012-11-18T19:30:00.877
> 
> 标签：apache, .htaccess, mod-rewrite

我将所有图像集中到服务器上的一个文件夹中。我有几个网站使用一个集中式引擎来获取每个域的各自内容。图片的目录结构为：

```
images/
  website1.com/
    image1.jpg
    image2.jpg
    ...
  website2.com/
    image1.jpg
    image2.jpg
    ...
  website3.com/
    image1.jpg
    image2.jpg
    ... 
```

但是，当我从 HTML 请求这些图像资源之一时，我不想使用 URL：

```
http://website1.com/images/website1.com/image1.jpg 
```

相反，我只是想要：

```
http://website1.com/images/image1.jpg 
```

但是，有两种情况我需要翻译。实时服务器和开发服务器。现场案例似乎很简单，将 %{HTTP_HOST} 重写到路径中。开发服务器的情况略有不同。我使用一个名为 dev_domain 的 cookie 来查看测试站点。即：$_COOKIE['dev_domain'] = website1.com。

制作现场案例和开发服务器案例的规则是什么？

这是我到目前为止的开发案例，但它不起作用：

```
RewriteBase /
RewriteCond %{HTTP_COOKIE} dev_domain=([^;]+) [NC]
RewriteCond %{THE_REQUEST} ^/images/(.*)$
RewriteRule ^/images/(.*)$ images/%1/$1 [NC,L] 
```

这是我为现场案例所拥有的，尚不确定它是否有效，因为我没有将其推送到现场（条件是排除开发服务器）：

```
RewriteCond %{HTTP_HOST} !^dev.mainsite.com$
RewriteRule ^/images/(.*)$ /images/%{HTTP_HOST}/$1 [NC,L] 
```

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:33:23.357

你看起来就快到了。该`RewriteRule`指令不应有前导`/`

```
# Added [NC] to the host RewriteCond, removed [NC] from the RewriteRule
RewriteCond %{HTTP_HOST} !^dev.mainsite.com$ [NC]
RewriteRule ^images/(.*)$ /images/%{HTTP_HOST}/$1 [L]
#----------^^^---no leading / 
```

将相同的更改模式应用于您的开发站点规则。

# c# - 在 C# 中向外部开发人员提供库的最佳方式是什么？

> ID：13443736
> 
> 赞同：0
> 
> 时间：2012-11-18T19:30:19.333
> 
> 标签：c#, dll, header, static-libraries

我正在用 C# (Visual Studio 2010) 编写一个程序，我有一组函数希望以库的形式提供给其他人。我所做的是创建一个新项目并将项目类型设置为*Class Library*。我注意到输出类型是 DLL。

我不一定想提供一个其他人可以动态链接到的运行时库，我想要的是提供一组其他人可以编译他们的代码的函数。（我相信在 C++ 中这将是一个 .lib 文件。）

在 C# 中，所有库都是 DLL 吗？

另外，如果我只想提供（就源代码而言）函数定义而不是实现怎么办？在 C++ 中，您只会提供 .h 文件，但在 C# 中您会提供什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:33:05.250

DLL 是您在 C# 中提供的。

如果您想隐藏实现细节，那么您可以将您的类标记为`internal`. 但只要使用您的库的代码不需要引用您的类或创建您的类的实例，这将是可行的。如果需要其中之一，则无法避免公开您的类实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:37:17.327

正如 Suhas 所说，DLL 就是您要分发的内容。

是的，“库”是 DLL。从技术上讲，它们现在被称为“组件”。

几乎我认为为 C# 执行此操作的唯一方法是拥有 2 个程序集。第一个只包含一个`Interface`定义，而第二个包含实现接口的实际类。您可以发布第一个库，但不能发布第二个库。如果走这条路，我还将提供一个模拟类，它实现了用于简单测试的接口。

这将涉及在运行时动态加载正确的程序集；这是完全可行的。通常通过配置设置。

除此之外，如果不提供实现的目的是您担心他们会反编译代码，那么您可能会研究一些混淆工具。不是 100% 有效，但它肯定会劝阻许多初级类型的开发人员。

# java - 无法从 Android 应用程序中的 R.Java 读取内容

> ID：13443739
> 
> 赞同：1
> 
> 时间：2012-11-18T19:30:31.680
> 
> 标签：java, android, import, r.java-file

我正在自学如何在 Eclipse 中编写一个 android 应用程序。我在 R.Java 中有以下内容

```
 public static final class menu {
    public static final int activity_marblez_main=0x7f060000;
} 
```

但是，在我的主 java 文件中，我似乎无法在 R.java 中“看到”我的对象。

```
package com.example.marblez;

import android.R;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;

public class MarblezMain extends Activity {

//Custom View for Marble View
private MarblezView mView;

//ID for the menu exit option 
private final int ID_MENU_EXIT = 1; 

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mView = new MarblezView(getApplicationContext(), this);
    mView.setFocusable(true);

    setContentView(R.layout.activity_marblez_main);
} 
```

我的问题是当我写这行时：

```
 setContentView(R.layout.activity_marblez_main); 
```

它仍然看不到activity_marblez_main。我已经导入了 R.Java 文件。我已经删除它并重新生成它，但它不能很好地“activity_marblez_main”。为什么？具体错误是：

```
"activity_marble_main cannot be resolved or is not a field" 
```

就此而言，我也无法从 R.java 文件中读取任何其他内容，例如字符串或任何内容。有谁知道可能导致此错误的原因。我在扯头发。我知道计算机不会说谎，但我看到了它应该在的所有东西，就像程序不会读取它一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:38:01.123

删除此行

```
import android.R; 
```

因为您正在导入平台的 R 文件，而不是您的，应该是：

```
 import com.example.marblez.R; 
```

（但你也可以没有，这没关系）。`CTRL`您可以通过按- `SHIFT`- `O`（字母“o”）在 Eclipse 中重新生成导入。只要确保您没有导入平台 R。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T19:36:39.573

您的 R.java 文件是由 eclipse Android 开发工具生成的，您永远不需要使用它。

当你导入它虽然很重要，但它应该是你的包名。所以对我来说`import com.jenxsol.application.R`

您当前正在导入只会返回 android 资源的 android.R。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T19:36:57.847

您正在导入 androids R 文件，而不是您的。修复您的导入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T19:42:16.203

首先是：创建布局`activity_marble_main`（如果您没有创建它），如果是，它将自动添加到您的（`auto generated`类`R.java`）中。

第二件事，当您的布局添加到您的`R.java`时，它将位于一个名为的静态类`layout`中（在您的情况下，您有`static class menu`）

毕竟这一切，**删除**进口`android.R`（如果有进口）

然后当试图通过它的 id 找到你的布局时，导入你的类 R( `com.yourpackage.R`) 。

# javascript - 阻止 Internet Explorer 中的默认击键操作

> ID：13443742
> 
> 赞同：4
> 
> 时间：2012-11-18T19:31:18.407
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-10

我试图`Control``P`在 Internet Explorer 10 中覆盖，但似乎无法弄清楚如何做到这一点。我用一些非常简单的代码模拟了一个[Fiddle](http://jsfiddle.net/bmcmahen/hSTFP/)，这些代码可以在 Chrome 中运行（至少在我的 Mac 上）。但是在 IE 10 中运行它并使用`Control``P`仍然会弹出打印对话框。

这是我的简单代码：

```
$('.test').on('keydown', function(e){
    if (e.metaKey || e.ctrlKey){
        $('body').append('ctrl p pressed'); 
        e.preventDefault(); 
        return false; 
    }        
});​ 
```

有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T20:36:28.127

防止默认行为

*   使用[attachEvent](http://msdn.microsoft.com/en-us/library/ie/ms536343%28v=vs.85%29.aspx)而不是[addEventListener](http://msdn.microsoft.com/en-us/library/ie/ff975245%28v=vs.85%29.aspx)
*   设置`event.keyCode`为 0
*   返回假

例如。（防止 Ctrl+O 和 Ctrl+P 的默认行为）

```
/*jslint browser: true */
(function scriptInitScript() {
    "use strict";

    document.attachEvent("onkeydown", function handleKeyDown(event) {
        if (event.ctrlKey) {
            switch (event.keyCode) {
            case 79: // o
            case 80: // p
                event.keyCode = 0;
                return false;
            }
        }
    });

}()); 
```

[JSFiddle](http://jsfiddle.net/aQeCZ/8/)

请注意。jQuery 1.9 使用（`addEventListener`如果可用）。 [见 github](https://github.com/jquery/jquery/blob/1.9-stable/src/event.js#L105)。

# javascript - 调用函数时尝试从 div 传递长值（html5/Javascript）

> ID：13443744
> 
> 赞同：1
> 
> 时间：2012-11-18T19:31:49.720
> 
> 标签：javascript, html, function

```
<div id="div1" value="3" onclick="Function(this.id,this.value)"></div> 
```

`this.id`有效，但不是第二个论点。一直在谷歌搜索，但没有运气，所以我开始了自己的线程，希望你能帮忙！

注意：我不想发送里面的内容`div`，我想发送第二个属性（`Value="3"`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:32:58.660

你有没有尝试以下方法：

```
theElement.getAttribute("Value"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T19:35:38.933

你用jquery吗？试试这个`$('#div1').attr('Value')`或`$('#div1').val()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T19:33:31.877

您的问题不是很清楚，但通常您可以检索如下属性：

```
element.getAttribute("Value"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T19:54:33.347

It seems you're confusing property with attribute. Some standard attributes are available as properties, but nonstandard ones are generally not.

By the way, it's better (valid and more future-proof) to use `data-` prefixed attributes instead of nonstandard nonprefixed attributes for storing arbitrary data.

Your example can be correctly rewrited following way:

```
<div id="div1" data-value="3" onclick="Function(this.id,this.getAttribute('data-value')"></div> 
```

# html - 将表格 div 和内联块 div 并排放置

> ID：13443747
> 
> 赞同：1
> 
> 时间：2012-11-18T19:32:09.990
> 
> 标签：html, css, css-tables

我想将两个 div 并排放置。其中第一个显示为表格，另一个是内联 div。这是一些代码：http: [//jsfiddle.net/WcHEc/](http://jsfiddle.net/WcHEc/)

还有内联代码。

HTML：

```
<div class="message-container">
    <div class="img-rounded small">
        <div class="img-centered-wrapper">
            <img src="/static/img/avatar" class="img-animal" />
        </div>
    </div>
    <div class="message-content">
        <p><strong>Some title</strong></p>
        <p>Some content</p>
    </div>
</div> 
```

CSS：

```
.message-container {
    clear: both;
    display: inline-block;
}
.message-container .right {
    float: right;
    text-align: right;
}
.img-rounded {
    border: 1px solid #000;
    border-radius: 7px;
    display: table;
    float: left;
    height: 50px;
    width: 50px;
    margin-right: 15px;
    overflow: hidden;
}
.img-centered-wrapper {
    display: table-cell;
    text-align: center;
    vertical-align: middle;
}
.message-content {
    display: inline-block;
    float: right;
}
.img-animal {
    max-height: 45px;
    max-width: 45px;
} 
```

我希望 div "message-content" 始终显示在 div "img-rounded" 的右侧。但是当“message-content”中的内容过多时，它会显示在下面。我为此苦苦挣扎了一段时间，不知道如何使它工作。我很高兴得到任何帮助。

**编辑**

谢谢你的回答！它帮助我找出问题所在。

我没有设置宽度和高度，因为我的想法是`.message-container`适合它的内容，因为我在它上面使用了边框。

因此，我没有设置`inline`和固定宽度，而是继续将其显示为 an`inline-block`并且我设置`max-width`为`.message-content`. 这是一段更大的代码：http: [//jsfiddle.net/RpZcT/](http://jsfiddle.net/RpZcT/)。

您知道如何使用 using`inline`而不是来达到相同的效果`inline-block`吗？如前所述，`inline-block`可能会导致意外行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:50:57.540

您需要设置的宽度`.message content`：

```
.message-content {
    display: inline;
    float: right;
    width: 300px;
} 
```

所以它会像这样[http://jsfiddle.net/WcHEc/1/](http://jsfiddle.net/WcHEc/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T20:06:58.817

我将设置`.message-container`为包装器。这将在以后为您省去一些麻烦。将两者都设置`divs`为`float:left;`。这也将使它们保持一致。

```
.message-container {
    clear: both;
    display: inline;
    width: 960px;
    height: auto;
} 
```

**注意**`width`1) 在上 指定是个好主意`divs`，否则`width`将自动或继承，这可能会出现问题。2）`display: inline-block;`在某些浏览器中使用可能会导致意外行为，所以我只会使用`display: inline;`。

看看[这里的例子](http://jsfiddle.net/tob1as/WcHEc/2/)

# excel - 保存工作表时 Excel Web 查询引用中断

> ID：13443750
> 
> 赞同：1
> 
> 时间：2012-11-18T19:32:15.530
> 
> 标签：excel, openxml, excel-web-query

当我修改包含 Web 查询的现有 Excel 工作簿时，我添加的任何新 Web 查询都可以正常工作，直到我保存并重新打开文档。当我重新打开时，突然所有表都返回相同的数据，因为（不知何故）`query`新查询的参数已被添加到文档中的第一个查询替换。

即，当我重新打开文档并查看查询参数时，它们都看起来像这样：

![查询截图](../Images/de45d116ac481e872c55c20023eb9375.png)

所以我决定探索 xlsx 工作簿中的 XML 以了解发生了什么。原来我所有的新查询都在`/xl/queryTables/`路径中，但它们都引用了相同的数据连接（连接由`id`数字引用），唉，`/xl/connections.xml`没有提到我创建的新数据连接。

所以我想我会很聪明，只是在其中创建一些新节点，`connections.xml`然后通过它们对应的`id`. 不幸的是，Excel 认为这不好，并决定“修复”我的工作簿，将其恢复到以前的损坏方式。

有谁知道修复、破解或解决方法？必须有某种方法可以让新查询保存在工作簿中。

**[我的环境]**：Excel Mac 2011 版本 14.2.4 (120824) - 撰写时的最新版本；MacOS 山狮 10.8.2。

# android - 安卓：HTTP POST '307'

> ID：13443757
> 
> 赞同：0
> 
> 时间：2012-11-18T19:33:04.953
> 
> 标签：android, httpwebrequest, http-post

我正在尝试将图像的字节数组发布到此 Web 服务。我得到 307 响应代码。

```
 URL url = new URL("http://123.456.789:2020/UploadService/AddReportContent");
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();

            connection.setDoInput(true);
            connection.setDoOutput(true);
            connection.setUseCaches(false);

            connection.setRequestMethod("POST");

            connection.setRequestProperty("Connection", "Keep-Alive");
            connection.setRequestProperty("Content-Type", "application/octet-stream");

            connection.setFixedLengthStreamingMode(b.length);

            DataOutputStream out = new DataOutputStream(connection.getOutputStream());
            out.write(b);
            out.flush();
            out.close();
            status = connection.getResponseCode(); 
```

请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:45:38.507

状态响应 307 表示：

> 307 临时重定向（从 HTTP/1.1 开始）
> 在这种情况下，应该使用另一个 URI 重复请求；但是，未来的请求仍应使用原始 URI。与历史上的 302 实现方式不同的是，在重新发出原始请求时，不允许更改请求方法。例如，一个 POST 请求使用另一个 POST 请求重复。

所以你只需要打开第二个网址，但上传本身应该完成。

# java - 如何在java中验证日期字符串

> ID：13443764
> 
> 赞同：3
> 
> 时间：2012-11-18T19:33:33.600
> 
> 标签：java

假设可接受的格式是“YYYY-MM-DD”，如何测试有效的日期字符串？(Y年M月D日)

我试过`DateFormat.parse(date_string)`了，但它会解析像“2012-542-86”这样的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:36:20.440

格式应该是`yyyy-MM-dd`

查看[`SimpleDateFormat`API 文档](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)中的有效格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T19:38:14.503

默认情况下，解析是*lenient*，这意味着它使用启发式来解析非精确匹配。

[您需要使用#setLenient(false)](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setLenient%28boolean%29)将其关闭，以使其拒绝所有不匹配的格式。

# objective-c - 如何调整自定义 UIButton 的图像大小？

> ID：13443767
> 
> 赞同：0
> 
> 时间：2012-11-18T19:33:56.463
> 
> 标签：objective-c, ios, uibutton, uiimage

我有一个 UIButton 需要在用户从相册中选择一张照片以显示其选择后更改其图像，我已启动并运行此设置，但是一旦用户选择了一张照片，我需要将其调整为按钮尺寸这就是我需要帮助的地方，这是我的代码：

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
[picker dismissModalViewControllerAnimated:YES];
UIImage *giftImage = [info objectForKey:UIImagePickerControllerOriginalImage];
[giftImage resizableImageWithCapInsets:UIEdgeInsetsMake( 0, 10, 0, 10 )];
[giftButton setBackgroundImage:giftImage forState:UIControlStateNormal];
giftButton.contentHorizontalAlignment = UIControlContentHorizontalAlignmentFill;
giftButton.imageView.contentMode = UIViewContentModeScaleToFill;
giftButton.imageView.bounds = CGRectMake( 0, 0, 62, 62 );
} 
```

更新：找到了一个解决方案，到目前为止，发生的所有事情都是按钮被调整为图像尺寸，但是使用下面的代码，我设法将图像插入到我需要的大小，这是一项正在进行的工作，但正在工作;)

```
CGSize targetSize = CGSizeMake( 62, 62 );

UIGraphicsBeginImageContext( targetSize );

CGRect thumbnailRect = CGRectZero;
thumbnailRect.origin = CGPointMake( 0, 0 );
thumbnailRect.size.width  = 62;
thumbnailRect.size.height = 62;

[giftImage drawInRect:thumbnailRect];

UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
[giftButton setBackgroundImage:newImage forState:UIControlStateNormal];

UIGraphicsEndImageContext(); 
```

代码来自这篇文章[Resize and crop images before displayed in UITableViewCells](https://stackoverflow.com/questions/1367384/resize-and-crop-images-before-displaying-in-uitableviewcells)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:52:22.347

你可以试试：

```
[giftButton setContentMode:UIViewContentModeScaleAspectFit]; 
```

这应该缩放图像以很好地适合您的按钮

# html - 为什么在 Windows Phone 7.5 上的 Internet Explorer 中对正文元素应用边距时我的字体大小如此混乱？

> ID：13443770
> 
> 赞同：5
> 
> 时间：2012-11-18T19:34:06.977
> 
> 标签：html, css, windows-phone-7, web

我有一个在 HTML 和 CSS 方面相对简单的网站，它在桌面浏览器 (IE9/Chrome) 中看起来不错。但是，当我在 Windows Phone 7.5 的 Internet Explorer 中查看它时，由于某种原因，无序列表中的文本似乎很大或很小，

这是产生奇怪结果的代码

```
<!DOCTYPE html>
<head>
<style type="text/css">
body {
  margin: 0px 0px;
}
h1 {
  font-size: 250%;
}
h2 {
  font-size: 150%;
}
h3 {
  font-size: 120%;
}
</style>
</head>
<body>

  <h1>H1 header</h1>
  <h2>H2 header</h2>
  <h3>H3 header</h3>
  <p>Some paragraph text</p>
  <ul>
    <li>List item 1</li>
    <li>List item 2</li>
  </ul>

</body>
</html> 
```

看一下`li`文本的大小，应该是 p 标签的大小，但是很小。有关此文件的在线版本，请参见[此处的链接](http://brendan.sdf-eu.org/test/wp.html)

我已将其缩小到 div 上的`margin`属性`body`，如果设置了其中任何一个，那么文本比例就会变得疯狂。为什么会这样？这是一个错误吗？我可以解决这个问题，但对我来说，在容器上设置边距比单独设置所有子级要方便得多

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-21T00:20:05.457

似乎适用于 Windows Phone 7 的 Internet Explorer Mobile 应用了某种字体大小调整来优化内容，但这至少最终会搞砸我的网站，请参阅[此 PDF 'Windows Explorer Mobile for Windows Phone 7](http://download.microsoft.com/download/9/3/5/93565816-AD4E-4448-B49B-457D07ABB991/Windows%20Internet%20Explorer%20Mobile%20on%20Windows%20Phone%207.pdf)简要说明。

要停止这种行为，请包含这一点 CSS

```
html {
   -ms-text-size-adjust: none;
} 
```

# android - 设备根据清单排除了 GooglePlay - 但设备具有 SMS 功能

> ID：13443773
> 
> 赞同：0
> 
> 时间：2012-11-18T19:34:22.077
> 
> 标签：android, sms, google-play

我有一个发送 SMS 的应用程序 - 所以 GooglePlay 过滤了所有可以发送 SMS 的设备。

但是现在我收到了一个使用 Acer 510 3G（可以发送短信）的人的请求，我的应用程序没有显示在他的设备上。

有什么办法可以使该应用程序可用于该设备？这些平板电脑真的以标准的 Android 方式发送短信吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:43:29.417

那么如果谷歌播放过滤器是错误的......（这里责备宏碁没有告诉谷歌他们的设备支持什么硬件）。

您可能必须设置[PackageManager#hasSystemFeature](http://developer.android.com/reference/android/content/pm/PackageManager.html#hasSystemFeature%28java.lang.String%29)并设置`<uses-feature android:name="android.hardware.telephony" android:required="false" />`然后停止应用程序在 PackageManger 说没有安装电话管理器的设备上运行。

有点倒退，但如果在 Play 商店中过滤错误，您将不得不以一种奇怪的 hacky 方式进行操作。

# python - 打印到 PDF 时如何修复 ReportLab 中文本的宽度？

> ID：13443774
> 
> 赞同：1
> 
> 时间：2012-11-18T19:34:25.353
> 
> 标签：python, pdf, reportlab

我是 ReportLab 的新手。我想在我的 PDF 中以固定宽度打印一个字符串。也就是说，如果字符串长于宽度，它将自动转到第二行。我怎样才能做到这一点？

这是我的代码，[结果很奇怪](http://pinwecard.com/statics/hello.pdf)。我不知道如何解决它...

```
from reportlab.pdfgen import canvas
from reportlab.platypus.frames import Frame
from reportlab.platypus.flowables import XBox

c = canvas.Canvas("hello.pdf")
x = XBox(width=50, height=100, text='abcaf a dsfadf asdfafasf  sdfa adsf asdf asdf afasdf df asdf asf asdf asfdsf asss')
f = Frame(x1=150, y1=50, width=200, height=200)
f.add(x, c)
c.save() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T02:25:08.263

解决这个问题的最佳方法是使用 Platypus 并将您的文本放入 Paragraph flowables 中。如果您不使用 Platypus，则必须自己处理换行计算。

# django - 如何将链接表中的字段用作 django-crispy-forms 中的字段？

> ID：13443781
> 
> 赞同：0
> 
> 时间：2012-11-18T19:34:54.257
> 
> 标签：django, forms, django-crispy-forms

我有两个由 ForiegnKey 链接的模型，我想使用 django-crispy-forms 将 PhoneNumber 模型中的字段用于我的表单。

我尝试过的是使用语法“phone_number__number”，但这只会在表单中给我一个空的下拉列表。

这是我的模型，除了 phone_number 之外的所有内容都从这篇文章的 Customer 模型中取出：

```
class Customer(models.Model):
  phone_number = models.ForeignKey(PhoneNumber)

class PhoneNumber(models.Model):
  TYPES = (
      ('Cell', 'Cell'),
      ('Home', 'Home'),
      ('Fax', 'Fax'),
      ('Work', 'Work'),
  )
  primary = models.BooleanField(default=False)
  phone_type = models.CharField(max_length=30, choices=TYPES, default='Cell')
  number = models.CharField(max_length=15) 
```

而我的表格，只有 phone_number 字段：

```
class CustomerCreateForm(forms.ModelForm):
 '''
 Base form for creating customers
 '''
 def __init__(self, *args, **kwargs):
     self.helper = FormHelper()
     self.helper.layout = Layout(
         Fieldset(
             'Personal Information',
             'phone_number__number',
         ),
         FormActions(
             Submit('submit' , 'Submit' , css_class='btn btn-success'), 
             Button('cancel' , 'Cancel' , css_class='btn btn-warning', onclick='javascript:history.go(-1);'), 
         )
     )
     super(CustomerCreateForm, self).__init__(*args, **kwargs)

 class Meta:
     model = Customer
     exclude = (
         'create_user',
         'modify_user'
     ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:07:46.803

```
from yourapp.models import PhoneNumber    

class CustomerCreateForm(forms.ModelForm):
    '''
    Base form for creating customers
    '''
    def __init__(self, *args, **kwargs):
        self.helper = FormHelper()
        self.helper.layout = Layout(
            Fieldset(
                'Personal Information',
                'phone_number',
            ),
         FormActions(
             Submit('submit' , 'Submit' , css_class='btn btn-success'), 
             Button('cancel' , 'Cancel' , css_class='btn btn-warning', 
                    onclick='javascript:history.go(-1);'), 
             )
         )
         super(CustomerCreateForm, self).__init__(*args, **kwargs)
         self.fields["phone_number"].choices = \
         [(item.number, item.number) for item in PhoneNumber.objects.all()]

         class Meta:
             model = Customer
             exclude = (
                 'create_user',
                 'modify_user'
             ) 
```

# php - 如何在 PHP 中包含文件运行时

> ID：13443784
> 
> 赞同：1
> 
> 时间：2012-11-18T19:35:01.527
> 
> 标签：php, include

我想包含不同的文件，具体取决于传递给`get`方法的参数。例如，如果`id`传入的 URL 是，`101`那么我想包含`file_101.php`. 这是我到目前为止所拥有的：

```
if(cat_id == 101)
{
    $filename="file_101.php";
}

//some code here
include('$filename'); 
```

我也试过：

```
include('echo $filename;'); 
```

但它给出了错误

> include() [function.include]: 无法访问 echo $filename;

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T19:36:20.877

摆脱单引号。它们使 PHP 将其解析`$`为文字美元符号，而不是变量名的开头。

```
include($filename); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:43:21.977

你的回声太多了！您可以包含以下文件：

```
include 'file.php'; 
```

或者您可以使用其他人编写的方法。

也替换为 $cat_id cat_id ！

PS。我建议您指定包含不带变量的文件的名称。

# javascript - 如何在另一个图像的鼠标悬停上更改位于不同帧中的图像的内容？

> ID：13443787
> 
> 赞同：0
> 
> 时间：2012-11-18T19:35:17.593
> 
> 标签：javascript, html, location, frame, onmouseover

我正在学习，无法通过搜索找到解决方案。

当我必须将鼠标悬停在一个项目（例如，图像）上以更改另一个项目（例如，iframe）的内容时，这是我使用的。**这有效**...

```
<html>
<head></head>
<body>
<div>
  <img href="#" src="FirstImage.jpg" alt="Hover to reveal second Image"
      onmouseover="IFRAME.location='SecondImage.jpg'"
      onmouseout="IFRAME.location='text.html'"/>

</div>
<div>
<iframe name="IFRAME" src="text.html"></iframe>
</div>
</body>
</html> 
```

**但是**，如果第二个项目在不同的框架中（即第一个项目在一个框架中，第二个在另一个框架中），我需要做什么？因为它不会检测到不同帧中的 'name="IFRAME"' 值。

我试着用

`onmouseover="parent.frames[1].IFRAME.location="SecondImage.jpg"`

但无法解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:44:54.123

1.  添加 jQuery 链接
2.  为图像和 iframe 添加 id
3.  添加脚本块（下）

我制作了工作样本：http: [//jsbin.com/acocil/4/](http://jsbin.com/acocil/4/)

```
<html>
<head>
<script type="text/javascript" src="http://ajax.microsoft.com/ajax/jquery/jquery-1.8.2.min.js"></script>
</head>
<body>
<div>
  <img id="image1" href="#" src="FirstImage.jpg" alt="Hover to reveal second Image"/>
</div>
<div>
<iframe id="frame1" name="IFRAME" src="text.html"></iframe>
</div>
<script>
$(document).ready(function() {
  $('#image1').mouseover(function(){
    $('#frame1').attr('src','SecondImage.jpg');
  }).mouseout(function(){
    $('#frame1').attr('src','text.html');
  });
});
</script>
</body>
</html> 
```

对于两帧：

```
<iframe id="frame1" alt="Hover to reveal second Image"></iframe>  
<iframe id="frame2" src="https://www.google.ru/images/srpr/logo3w.png"></iframe> 
<script>
$(document).ready(function() {
  $('#frame1')[0].contentDocument.write('<img id="image1" src="http://l.yimg.com/a/i/us/msg/site/9/sp/ic_biggrin.gif"/>');
  $('#frame1').contents().find('img').mouseover(function(){
    $('#frame2').attr('src','https://www.google.ru/images/srpr/logo3w.png');
  }).mouseout(function(){
    $('#frame2').attr('src','http://lostfilm.tv');
  });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:16:44.473

您只需向 IFRAME 添加一个 ID，然后使用 'document.getElementById' 在 onmouseover 事件中引用该 ID。

```
<html>
<head></head>
<body>
<div>
  <img href="#" src="FirstImage.jpg" alt="Hover to reveal second Image"
      onmouseover="document.getElementById('myid').src='SecondImage.jpg'"
      onmouseout="document.getElementById('myid').src='text.html'"/>

</div>
<div>
<iframe id="myid" name="IFRAME" src="text.html"></iframe>
</div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:31:37.837

如果您无法使用“父级”引用 IFRAME。然后您可以在“父”框架中放置一个 javascript 函数，该函数将对 IFRAME 执行您想要的操作并从内部 iframe 调用它： parent.changeImage('myid');

所以这个函数可能在 parent 中：

```
function changeImage(theID);(){
    document.getElementById(theID).src='SecondImage.jpg';
} 
```

# android - Android微调器短按项目+上下文菜单

> ID：13443788
> 
> 赞同：0
> 
> 时间：2012-11-18T19:35:36.727
> 
> 标签：android, contextmenu, spinner

如果用户短按微调器的项目，我不会显示上下文菜单：

```
 uSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parent, View view,
                    int position, long id)
        {
            Toast.makeText(getBaseContext(), "Position = " + position, Toast.LENGTH_SHORT).show();
            pos = position;
            registerForContextMenu(view); 
            openContextMenu(view);
            unregisterForContextMenu(view);
        }
    });
    @Override
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo info)
    {
        if(pos != -1)
        {
            menu.setHeaderTitle("Admin menu");
            menu.add("Kick");
        }       
    }
    @Override
    public boolean onContextItemSelected(MenuItem item)
    {
        if(item.getTitle()=="Kick")
        {
            Toast.makeText(getBaseContext(), "Kick: " + usrStack.get(pos), Toast.LENGTH_SHORT).show();      
        }
        return super.onContextItemSelected(item);  
    } 
```

一切都很好，但是如果我的应用程序启动，我会看到第一个元素的上下文菜单。（您可能还记得，亲切的匿名，第一个元素显示在微调器上。所以我认为它选择了第一个元素并调用我的上下文菜单）如何仅在 onlick 上显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:41:45.283

最简单的方法是在 onItemSelected 回调中添加一个布尔标志。

```
if (!isfirst){
    openContextMenu(spinner);                   
} else {
    isfirst = false;
} 
```

您的微调器还会遇到第二个问题，因为默认情况下选择了第一项，单击它不会“触发”回调方法。解决此问题的方法是在列表的开头插入一个空白项，并在您的回调中检查这一点。

```
 if (position != 0){
    openContextMenu(spinner);                   
} else {
    // Do nothing
} 
```

edit: I also noticed you are registering each view for the context menu every time you click an item. You only need to register the spinner once, after you've defined it, then pass the spinner as the view when you call openContextMenu(spinner)

# javascript - 有没有办法在 jQuery 选择器中使用 javascript parentNode 而不是最接近（）？

> ID：13443791
> 
> 赞同：2
> 
> 时间：2012-11-18T19:35:39.063
> 
> 标签：javascript, jquery, closest, parent-node

我正坐在一段代码上，这在移动设备上是超慢的。

我在 Jquery Mobile 中有一个包含大约 40 个输入元素（按钮）的输入表单。在 Jquery Mobile 中，这意味着：

```
<div class="ui-btn" data-disabled="false">
    <span class="ui-btn-inner">
        <span class="ui-btn-text">Button</span>
    </span>
    <input type="button" value="Button" class="ui-btn-hidden" data-disabled="false">
</div> 
```

通常，我可以绑定到`input`，这在所有 PC 浏览器上都可以正常工作，但是一旦我切换到移动设备并且输入元素的数量增加，按钮就会失效。

作为一种解决方法，我现在绑定到最接近的`ui-btn`，如下所示：

```
el.jqmData('bound', true )
    .find('input')
    .closest('.ui-btn')
        .on('vclick', function(){
            // do stuff
        }); 
```

这至少使元素可点击，但它仍然很慢。

我一直在查看与本机 Javascript 方法（如此[处](http://jsperf.com/jquery-parents-vs-closest/11)`jsPerf`）进行比较的示例。如果我假设性能差异为 1:10（就像从台式机切换到移动设备时[一样](http://www.symphonious.net/2010/10/09/javascript-performance-for-vs-foreach/)，我很确定我的“最近”调用会减慢速度。`closest`

**我的问题：**
有没有办法`closest`用原生 Javascript 方法替换我的链式调用？如果是这样，这会是什么样子？

**编辑**
我已经退出了有问题的功能。这就是我正在做的事情：

```
// this gets called once for the size entry box 
// sizeEntryBox is the wrapper for $('sizeChart'), which contains the 60 inputs
addSizeHandlers = function( el ){
    el.jqmData('boundStyle', true)
            .find('.sizeChart')
            .on('vclick', '.entry .ui-btn', function(){

                // since I'm listening for .ui-btn I need to get the child input again                
                var qty = $( this ).find('input.qtyInput'),
                    // user can add +1/+2/+4
                    howMany = qty.closest('.ui-collapsible').find('.buttonBar input[name="radio_add"]:checked').val(),
                    qid = qty.attr('id').replace( /qty/, "" );

                // a button may display a preset qty, clicking once replaces this with
                // +1/+2/+4, clicking again adds +1/+2/+4
                if ( qty.jqmData('flag') === false  ){
                    qty.jqmData('flag',true)
                    newVal = parseFloat( howMany );
                    // set new value, add red borders
                    qty.val( howMany ).prev('.ui-btn-inner').addClass("brR").find('.ui-btn-text').html( howMany );
                    $('input[name=menge'+qid+']').val( howMany );
                } else { 
                    newVal = parseFloat( qty.val() ) + parseFloat( howMany );
                    qty.val( newVal ).prev('.ui-btn-inner').addClass("brR").find('.ui-btn-text').html( newVal );
                    $('input[name=menge'+qid+']').val( newVal );
                }
            });
        }, 
```

所以我已经绑定到整个图表并委托给按钮。在移动设备上这仍然需要很长时间，所以一些性能消耗者会引起人们的注意，请告诉我。

再次感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T19:59:47.993

我建议使用事件委托，并且只为所有输入设置一个点击事件，而不是每个输入一个点击事件：

[有关更多详细信息，请参阅jQuery .on() 文档](http://api.jquery.com/on/)中的委托事件。您的代码应如下所示：

```
$(myForm).on("vclick", "input.ui-btn-hidden", function(event){...}); 
```

或者如果你绑定到 div：

```
$(myForm).on("vclick", "div.ui-btn", function(event){...}); 
```

# c - fgets() 在末尾包含换行符

> ID：13443793
> 
> 赞同：13
> 
> 时间：2012-11-18T19:35:43.473
> 
> 标签：c, string, fgets

```
fgets(input,sizeof(input),stdin);
if (strcmp(input, "quit") == 0){
  exit(-1);
} 
```

如果我输入 quit，它不会退出程序；我想知道为什么会这样。

顺便`input`声明为`char *input;`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-18T19:37:08.213

该函数`fgets`可能会在读取的字符串末尾添加一个换行符。您必须检查：

```
size_t ln = strlen(input) - 1;
if (input[ln] == '\n')
    input[ln] = '\0'; 
```

甚至

```
strtok(input, "\n"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-18T19:38:09.573

输入中的尾随换行符。请参阅[man fgets](http://linux.die.net/man/3/fgets)。测试“退出”+换行符，例如：

```
fgets(input,sizeof(input),stdin);
if(strcmp(input, "quit\n") == 0){
    exit(-1);
} 
```

* * *

我完全错过了最后一句话，重新`char *input`。根据架构，`input`长度为 4 或 8 个字节。所以代码是有效的

```
fgets(input, 8, stdin); 
```

这并不反映内存的实际大小，`input`指向。只要输入短于八个字节，这可能“有效”，但如果输入更大，则会截断输入。此外，您将在下次调用时获得其余的输入`fgets`。

您应该给出实际大小或接受@JonathanLeffler 的建议并声明一个 char 数组，例如

```
char input[64];
fgets(input, sizeof(input), stdin); 
```

或者

```
char *input = malloc(N);
fgets(input, N, stdin); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-31T13:33:31.543

建议您将其编码为：

```
if(strstr(input, "quit") != NULL){ 
```

原因：这将解决人们添加额外字符的问题（例如文本之前或之后的空格）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-05-24T20:31:45.087

此解决方案只需要标准库 (stdio.h) 并给出相同的结果。

```
for (i = 0; input[i] != '\0'; i++); /* getting the string size */
input[i-1] = '\0'; /* removing the newline */ 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-07-29T15:07:22.987

我所做的是将换行符替换为 '\0' null 。

```
while(fgets(message,80,stdin))
{
    l=strlen(message)-1;
    if(message[l]='\n') message[l]='\0';
            else message[i+1]='\0';
} 
```

# c++ - 在单链表上使用插入排序

> ID：13443795
> 
> 赞同：6
> 
> 时间：2012-11-18T19:35:52.780
> 
> 标签：c++, list, sorting, linked-list, insertion-sort

所以我有一个任务，我给出一个随机的数字列表，我需要使用插入排序对它们进行排序。我必须使用单链表。我查看了其他帖子，但似乎没有任何帮助。我知道插入排序是什么，但我只是不知道如何用代码编写它。

```
Node* insertion_sort(Node* head) {
  Node* temp = head_ptr;
  while((head->n < temp->n) && (temp != NULL))
    temp = temp->next;
  head->next = temp->next;
  temp->next  = head;
  head->prev = temp;
} 
```

我不知道这是否正确或现在该怎么做

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T21:11:44.277

让我们考虑一下插入排序是如何工作的：它（理论上）将列表“拆分”为三组：已排序的子集（可能为空）、当前项和未排序的子集（可能为空）。当前项目之前的所有内容都已排序。当前项目之后的所有内容可能会或可能不会排序。该算法检查*当前*项目，将其与下一个项目进行比较。请记住，当前项之后的第一项属于未排序的子集。

假设您正在按升序对整数进行排序（因此给定“3,1,5,2,4”，您希望得到“1,2,3,4,5”）。您将当前项目设置为列表中的第一项。现在开始排序：

如果下一项大于当前项，则不需要对该项进行排序。只需将其设为“当前项目”并继续。

如果下一项小于当前项，那么您还有一些工作要做。首先，将下一项保存在某处——比如说在一个名为 temp 的指针中——然后通过使 current->next = current->next->next 从列表中“删除”下一项。现在，您需要为删除的项目找到正确的位置。您可以通过两种方式做到这一点：

1.  从列表的开头开始，继续前进，直到找到正确的位置。完成后，将项目插入那里并继续插入排序。如果您有一个单链表，这是最简单的解决方案。
2.  您向后走，直到找到该项目的正确位置。完成后，将项目插入那里并继续插入排序。这有点复杂，但如果你有一个双向链表，它可以很好地工作。

您继续此过程，直到到达列表的末尾。一旦你到达它，你就知道你已经完成了插入排序并且列表处于正确的排序顺序。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-14T08:23:19.983

```
struct node {
    int data;
    struct node *next;
};

void insertion(struct node **head) {
    if((*head)== NULL || (*head)->next == NULL) {
       return;
    }
    struct node *t1 = (*head)->next;
    while(t1 != NULL) {
        int sec_data = t1->data;
        int found = 0;
        struct node *t2 = *head;
        while(t2 != t1) {
            if(t2->data > t1->data && found == 0) {
                sec_data = t2->data;
                t2->data = t1->data;
                found = 1;
                t2 = t2->next;
            } else {
                if(found == 1) {
                    int temp = sec_data;
                    sec_data = t2->data;
                    t2->data = temp;
                }
                t2 = t2->next;
            }
       }
       t2->data = sec_data;
       t1 = t1->next;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-01T14:43:14.683

这是链表上插入排序的Java实现：

> *   时间复杂度：O(n^2)
> *   空间复杂度：O(1) - 插入排序是就地排序算法

```
class Solution 
{
    public ListNode insertionSortList(ListNode head)
    {
        // Initialize partially sorted list
        ListNode dummy = new ListNode(0), prev = dummy, current = head;

        while(current != null)
        {
            if(prev.val > current.val)
                prev = dummy;

            // Find the right place to insert current node
            while(prev.next != null && prev.next.val < current.val)
                prev = prev.next;

            // Insert current between prev and prev.next
            ListNode nextNode = current.next;
            current.next = prev.next;
            prev.next = current;
            current = nextNode;
        }
        return dummy.next;
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-06-11T01:23:33.440

哇，我肯定迟到了派对吧？无论如何，我想在回答这个问题时投入两分钱。根据您提供示例代码的方式，我将假设以下内容：

1.  您没有使用 OOP 原则
2.  您已经正确设置了单链表（我将其称为**forward list**）
3.  您希望用户在调用实现函数时使用运算符'='

首先，我将要给你的答案使用我喜欢称之为*双指针技术*的方法！*您使用双指针来帮助您同时引用两个变量，这样您就可以在到达nullptr*时避免复杂的测试用例。

好吧，好吧...我通过调用*指针对指针* **双指针**来快速输球，我可能会通过将其称为**技术**来拉扯你的腿！如果您掌握了指针的概念，那么我将要向您展示的内容应该是微不足道的。我将指针对指针称为一种*技术*，因为很少有人谈论它或在他们的示例源代码中使用它！以下[链接](https://blog.semmy.me/post/9809052196/the-pointer-to-pointer-trick)将带您进入 Semmy Purewal 创建的博客，该博客更详细地讨论了这个概念！

```
forward_list *insertion_sort( forward_list *head )
{
  /// Ensure provided linked list is not empty and has more than one element...
  if( head == nullptr || head -> next == nullptr )
  {
    std::cout << "Error: empty or single element linked list provided!\n";
    return;
  }

  /// Initialize separate variable the houses a growing sorted output...
  forward_list *sorted = nullptr;

  /// Traverse provided singly linked list...
  while( head != nullptr )
  {
    /// Remember current head before popping it off...
    forward_list *current_head = head;

    /// Double pointer for effective splicing of unsorted singly linked list...
    forward_list **trail = &sorted;

    /// Now we pop off the current head...
    head = head -> next;

    /// Iterate through our growing sorted output to figure out where we need to the head...
    while( ( *trail ) != nullptr && ( *trail ) -> data > current_head -> data )
    {
      /// Head does not belong in this current position, move on!
      trail = &( *trail ) -> next;
    }

    /// Insert the head and update our growing sorted output to point to the head...
    current_head -> next = ( *trail );
    ( *trail ) = current_head;
  }

  /// Return our sorted output...
  return sorted;
} 
```

好了，您现在有了一个插入排序的示例实现，它在单链表上运行得非常好！这个实现没有*nullptr的混乱测试用例，因为我们使用了一个名为***trail**的双指针，它跟踪自身和指向我们不断增长的排序输出的指针。因此，当算法遍历排序后的输出时，变量**trail在***nullptr*处被取消引用，它保存最后一个节点的**next**指针！

总而言之，我希望你发现这个答案既有*帮助*又有*可读性*！我知道这个问题是七年前提出的，一年前才活跃，但我希望有人觉得这有点用。咳咳，那我就上路了！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-18T19:39:23.097

想想这个 - 如果列表是空的，`temp`最初会是`NULL`，所以当你这样做时你会得到未定义的行为`temp->next = head;`。

尝试一些调试，它肯定会有所帮助。您可能还想保留前一个节点，以便之后插入，或者向前看 2 个节点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-17T19:44:40.843

我使用类而不是结构对其进行了编码。可以进行更改，但算法将相同。创建节点类和单链表的代码..

```
#include<iostream>
using namespace std;

class node{
    public:
    int data;
    node* next;
};

class list{
    node* head;

    public:
    list() {
        head=NULL;
    }

    void add(int el) {
        node* newNode=new node();

        newNode->data=el;
        newNode->next=NULL;

        if(head==NULL) {
            head=newNode;
        } else {
            node* temp=head;

            while(temp->next!=NULL) {
                temp=temp->next;
            }
            temp->next=newNode;
        }
    }

//Insertion sort code

    void insertionSort() {
        node* i=head->next;

        while (i!=NULL)
        {
            node* key=i;
            node* j=head;

            while (j!=i)
            {
                if (key->data<j->data)
                {
                    int temp=key->data;
                    key->data=j->data;
                    j->data=temp;
                }
                j=j->next;

            }
            i=i->next;
        }
    }

    void display() {
        node* temp=head;

        while (temp!=NULL) {
            cout<<temp->data<<" ";
            temp=temp->next;
        }

    }
}; 
```

用于创建主要：

```
int main()
{
    list l;
    l.add(2);
    l.add(6);
    l.add(0);
    l.add(3);
    l.add(7);
    l.add(4);

    l.insertionSort();
    l.display();
} 
```

如果不工作或插入排序的标准没有正确实施，请纠正我。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-09-09T04:21:27.253

```
void linked_list::insertion_sort() {
    node * p = head;
    node * currentNode = head->next; // The node that is being compared at the moment.
    node * previousNode = head; // The node previous to the node being compared at the moment.
    //We can return from the sorting if the length of the linked list is less than 2.
    if (p == nullptr || p->next == nullptr) {
        return;
    }

    while (currentNode != nullptr) {
//If the current node is larger than or equal to the largest element of the sorted linked list on the left, we can move to the next element. 
//Helpful for an already sorted array.
        if(previousNode->value<=currentNode->value){
            currentNode = currentNode->next;
            previousNode = previousNode->next;
        }
        else{
//If the element is the smaller than the head element we need to take care of the head element.
            if (head->value > currentNode->value) {
                previousNode->next = currentNode->next;
                currentNode->next = head;
                head = currentNode;
            }else {
                p = head;
                while (p->next != NULL && p->next->value < currentNode->value) {
                        p = p->next;
                }
                previousNode->next = currentNode->next;
                currentNode->next = p->next;
                p->next = currentNode;
            }
        }
        currentNode = previousNode->next;
    }
} 
```

# javascript - 使用 PLupload 上传单个文件？

> ID：13443801
> 
> 赞同：1
> 
> 时间：2012-11-18T19:36:29.190
> 
> 标签：javascript, jquery, plupload, ajax-upload

我们有另一个库用于进行图像的 ajax 上传，它为我们做了一些其他的处理。

我们正在尝试对 plupload 建模以使用相同的 UI。这运作良好，但我被困在一个部分。另一个上传者在每个项目旁边贴了一个开始按钮。允许我们单独上传列表中的特定项目。

PLupload 是否能够从列表中上传特定项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T14:26:30.500

您可以创建 Uploader 的新实例并交换其文件数组中的条目。使用这种技术，我可以做诸如序列化上传之类的事情。为此，我将每个文件从主上传器的文件数组中弹出并创建一个新的上传器并将该文件推送到其文件数组中（然后调用该临时上传器上的发送，其中包含一个文件）。对于拖放，我必须创建一个新的上传器来接收拖放，然后我将其文件放入主上传器实例中。

# macos - @font-face 适用于所有浏览器，但只有一个

> ID：13443808
> 
> 赞同：2
> 
> 时间：2012-11-18T19:37:25.903
> 
> 标签：macos, firefox, fonts

我在css中设置了一个自定义字体：

```
@font-face {  
  font-family: 'FinkRoman';  
  src: url( /fonts/FinkRoman.eot ); /* IE */  
  src: local("FinkRoman"), url( /fonts/FinkRoman.ttf ) format("truetype"); 
  font-weight: normal;
  font-style: normal;
} 
```

我正在几个浏览器中测试该站点，除了一个之外，它在所有浏览器中都显示良好：

Macbook Retina Firefox - 好的

Macbook Retina Safari - 好的

Macbook Retina Chrome - 好的

Macbook Pro Safari - 好的

Macbook Pro Firefox - 默认为 Times

我检查了 Macbook Pro 中的 Firefox 设置，在高级字体设置中，它被选中以允许页面选择自己的字体。但由于某种原因，它在这里不起作用。我不知道为什么。我的客户选择并购买了这种字体。任何想法为什么这不起作用。更奇怪的是，我的 Macbook Retina 和 Pro 都拥有相同版本的 Firefox（最新）。Pro 使用的是较旧的操作系统（Snow Leopard），但这无关紧要。见过这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:25:04.820

在这种情况下，检查错误控制台总是值得的：跨站点加载或清理字体的失败将被记录在那里。

我不知道为什么其中任何一个在同一 Firefox 版本中的 Macbook Retina 和 Macbook Pro 上的行为会有所不同......

# java - OpenCL 脚本给出了意想不到的结果

> ID：13443809
> 
> 赞同：0
> 
> 时间：2012-11-18T19:37:29.577
> 
> 标签：java, image-processing, opencl, image-manipulation, jocl

我有这个简单的`OpenCL`代码块，我得到了意想不到的结果。参数`image`是一个浮点数组，`value`是一个从 -255 到 +255 的数字。使用 java 我使用 JSlider 来更改`value`. 默认值为 0，问题是当我将滑块移动到 0 以上时，图像是黑色的，如果我将滑块移动到小于 0 时，图像是白色的，这不应该发生。这应该单独检查每个像素并调整该像素。似乎不是出于某种原因。

此代码块应更改图像的阈值。红色绿色和蓝色大于阈值的任何像素都应该是白色，否则应该是黑色。

```
kernel void threshold(global float* image, const float value, const int max){
    int index = get_global_id(0);
    if (index >= max){
        return;
    }

    int color = image[index];
    int red = color >> 16 & 0x0FF;
    int green = color >> 8 & 0x0FF;
    int blue = color & 0x0FF;

    if(red > value && green > value && blue > value){
        red = 255;
        green = 255;
        blue = 255;
    }else{
        red = 0;
        green = 0;
        blue = 0;
    }

    int rgba = 255;
    rgba = (rgba << 8) + red;
    rgba = (rgba << 8) + green;
    rgba = (rgba << 8) + blue;

    image[index] = rgba;
} 
```

如果我用这个替换`if/else`中间的语句：

```
red += value;
if(red > 255){red = 255;}
else if(red < 0){red = 0;}

green += value;
if(green > 255){green = 255;}
else if(green < 0){green = 0;}

blue += value;
if(blue > 255){blue = 255;}
else if(blue < 0){blue = 0;} 
```

对于该操作，我得到了我正在寻找的结果，即调整图像的亮度。

我用`OpenCL`错了吗？据我了解， is`kernel`将被调用，直到返回被击中。我在 java 中使用 JOCL 来执行此操作，这是我用来调用它的代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package pocketshop.graphics;

import com.jogamp.common.nio.Buffers;
import com.jogamp.opencl.CLBuffer;
import com.jogamp.opencl.CLCommandQueue;
import com.jogamp.opencl.CLContext;
import com.jogamp.opencl.CLKernel;
import com.jogamp.opencl.CLPlatform;
import com.jogamp.opencl.CLProgram;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.io.InputStream;
import java.nio.FloatBuffer;
import pocketshop.Canvas;
import pocketshop.dialogs.BrightnessContrastDialog;

/**
 *
 * @author Ryan
 */
public class CL {

    protected static CLBuffer<FloatBuffer> buffer;
    protected static float[] pixels;

    public static CLBuffer<FloatBuffer> getBuffer() {
        return buffer;
    }

    public static float[] getPixels() {
        return pixels;
    }

    public static void start(String script, float val) {

        CLPlatform platform = CLPlatform.getDefault(/*type(CPU)*/);
        CLContext context = CLContext.create(platform.getMaxFlopsDevice());
        try {
            CLProgram program = context.createProgram(getStreamFor("../scripts/" + script + ".cl"));
            program.build(CLProgram.CompilerOptions.FAST_RELAXED_MATH);
            assert program.isExecutable();

            BufferedImage image = Canvas.image;
            assert image.getColorModel().getNumComponents() == 3;

            pixels = image.getRaster().getPixels(0, 0, image.getWidth(), image.getHeight(), (float[]) null);
            FloatBuffer fb = Buffers.newDirectFloatBuffer(pixels);

            // allocate a OpenCL buffer using the direct fb as working copy
            buffer = context.createBuffer(fb, CLBuffer.Mem.READ_WRITE);

            // creade a command queue with benchmarking flag set
            CLCommandQueue queue = context.getDevices()[0].createCommandQueue(CLCommandQueue.Mode.PROFILING_MODE);

            int localWorkSize = queue.getDevice().getMaxWorkGroupSize(); // Local work size dimensions
            int globalWorkSize = roundUp(localWorkSize, fb.capacity());  // rounded up to the nearest multiple of the localWorkSize

            // create kernel and set function parameters
            CLKernel kernel = program.createCLKernel(script.toLowerCase());
            //adjustment(val, queue, kernel, buffer, localWorkSize, globalWorkSize);

            kernel.putArg(buffer).putArg((float) val).putArg(buffer.getNIOSize()).rewind();
            queue.putWriteBuffer(buffer, false);
            queue.put1DRangeKernel(kernel, 0, globalWorkSize, localWorkSize);
            queue.putReadBuffer(buffer, true);

        } catch (IOException e) {
        }
        context.release();
    }

    private static InputStream getStreamFor(String filename) {
        return BrightnessContrastDialog.class.getResourceAsStream(filename);
    }

    private static int roundUp(int groupSize, int globalSize) {
        int r = globalSize % groupSize;
        if (r == 0) {
            return globalSize;
        } else {
            return globalSize + groupSize - r;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T02:51:43.200

经过多次反复试验后我发现，这`int color = image[index];`实际上是红绿色或蓝色，而不是 3 中的 int。

所以，

```
image[0] = Red;
image[1] = Green;
image[2] = Blue;
image[3] = Red;
image[4] = Green;
image[5] = Blue; 
```

ETC

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T06:44:00.130

你确定你的图像是浮动数组吗？如果是，那么你不应该对其进行整数操作

如果它是每个组件一个字节的 rgba，请尝试使用 uchar4 数据类型，也许这更合适，您可以对所有 4 个组件并行执行向量操作。

还尝试使用 opencl 的钳位功能来强制范围 0..255

# android - 无法从活动中调用 getSupportFragmentManager()

> ID：13443811
> 
> 赞同：81
> 
> 时间：2012-11-18T19:37:38.773
> 
> 标签：android, android-activity, android-fragments

我有一个包含片段的活动。

XML:

```
 <fragment android:name="com.example.androidcalculator.ResultFragment"
            android:id="@+id/result_fragment"
            android:layout_weight="1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" /> 
```

我想从Activity中的方法调用ResultFragment中的方法，但getSupportFragmentManager“不存在”：

```
FragmentManager fragMan = getSupportFragmentManager(); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：192
> 
> 时间：2012-11-18T19:40:44.620

您的活动没有从支持库扩展[FragmentActivity](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html)，因此该方法不存在于超类中

如果您的目标是 api 11 或更高版本，则可以改用[Activity.getFragmentManager](http://developer.android.com/reference/android/app/Activity.html#getFragmentManager%28%29)。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2015-09-28T18:03:07.797

将类扩展到`AppCompatActivity`而不是`Activity`

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-08-04T20:17:40.293

从父级获取当前活动，然后使用此代码

```
getActivity().getSupportFragmentManager() 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-11-12T07:13:45.270

只需使用

```
 FragmentManager fm = getActivity().getSupportFragmentManager(); 
```

请记住，在 MainLayout 中访问片段膨胀时，请始终使用 Casting 或`getActivity()`.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-02-07T07:03:59.167

您需要扩展`FragmentActivity`而不是`Activity`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-10-02T13:46:48.260

进口

```
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-04-10T07:51:40.443

这对我有用。运行 android API 19 及更高版本。

```
FragmentManager fragMan = getFragmentManager(); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-11-12T01:11:45.383

```
getCurrentActivity().getFragmentManager() 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-09-15T04:58:24.003

代替

```
extends Fragment 
```

利用

```
extends android.support.v4.app.Fragment 
```

这对我有用。*API14 及以上

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-08-30T11:11:33.877

我用了`FragmentActivity`

```
TabAdapter = new TabPagerAdapter(((FragmentActivity) getActivity()).getSupportFragmentManager()); 
```

# javascript - jQuery 晦涩难懂

> ID：13443819
> 
> 赞同：1
> 
> 时间：2012-11-18T19:38:32.210
> 
> 标签：javascript, jquery

这有点时髦。但是看看下面的代码片段：

```
$('.classname').bind('click', somefunction);

function somefunction() {
  console.log($(this)); // **displays[<div>,context<div>]**
} 
```

如果我将上述内容调整为：

```
$('.classname').bind('click', function(){ somefunction(); });

function somefunction(){
  console.log($(this)); // **displays [Window]**
} 
```

我不太清楚为什么“this”会根据函数的回调方式假设两个不同的值。问题是，我确实需要这个，上下文和要调用的函数

```
function(event){ somefunction(event); } 
```

因为我需要这个活动。但不太确定这里有什么。

任何线索，人们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:41:04.947

`this`是函数的接收者。

当您执行`obj.someFunction()`时，它`obj`在执行内部。

但是，如果您使用该函数并在没有显式接收器的情况下执行它（并且它没有被绑定），那么它就是全局范围，即`window`：

```
function someFunction(){
    console.log(this);
}
var f = obj.someFunction;
f(); // log the window 
```

请注意，您可以使用*bind*[绑定](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)函数：

```
 var f = obj.someFunction.bind(obj);
 f(); // log the obj 
```

但通常的解决方案是使用闭包，即另一个函数，嵌入你想要的这个：

```
var f = function(){obj.someFunction()};
f(); // log the obj 
```

这就是为什么你经常在 jquery 回调中看到这个结构：

```
$(someselector).click(function(event){
    $(this).someFunction(event)
 }); // this is $(this) and the event is received 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T19:50:16.013

> *“我不太清楚为什么'this'会根据函数的调用方式假设两个不同的值......”*

这正是`this`JavaScript 中的工作原理。它的值取决于函数的调用*方式。*

* * *

`.call`您可以使用或手动将其设置为您想要的值`.apply`。

```
$('.classname').bind('click', function(event){ 
                                  somefunction.call(this, event); 
                              }); 
```

现在无需修改`somefunction`. 通过使用 调用它`.call()`，您可以手动将`this`值设置为作为第一个参数传递的任何值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T19:46:32.293

该事件也在第一个示例中传递

```
$('.classname').bind('click', somefunction);

function somefunction(e) {
  // e is the event here as well..
  console.log($(this)); // **displays[<div>,context<div>]**
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T19:49:51.760

```
$('.classname').bind('click',somefunction); 
```

表示“运行`somefunction()`”将作为.`$('.classname')``$('.classname')``this`

```
$('.classname').bind('click',function(){somefunction();}); 
```

`$('.classname')`表示“在您的匿名函数`$('.classname')`中运行此匿名函数” `this`，但是当您`somefunction()`在匿名函数内部调用时，`this`不会传递给它。你可以解决这个问题。

```
$('.classname').bind('click', function(){ somefunction(this); });

function somefunction(x){
  console.log($(x));
} 
```

# java - 如何在 Java 中从文本文件中添加字符串标记号

> ID：13443820
> 
> 赞同：-2
> 
> 时间：2012-11-18T19:38:31.147
> 
> 标签：java

文本文件（myfile.txt）的编号如下：

```
6
19
20
23
34
45
47
51
54
56
61
70
72
76
90
93
94
96
105
111 
```

我可以用 Java 读取和打印这个文本文件作为字符串标记，我的代码是：

```
 File fileName = new File("myfile.txt");         
                      Scanner inFile = new Scanner(fileName);        
                      while (inFile.hasNext())         
                      {         
                      token = inFile.next( ); 

                      System.out.println(token);

                      } 

                    inFile.close(); 
```

现在我怎样才能在java中得到这些数字的总和？我的意思是总和（6+19+20+23+..........+111）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T19:40:53.153

使用**int**变量**sum**，并使用`scanner.nextInt()`来提取**数字**。并在每次迭代中添加。

```
 File fileName = new File("myfile.txt");         
                      Scanner inFile = new Scanner(fileName);
                       int sum=0;        
                      while (inFile.hasNext())         
                      {         
                           sum+= inFile.nextInt( );     
                      } 
                      System.out.println(sum);

                    inFile.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T19:40:53.027

您可以使用`Integer.parseInt`方法将字符串转换为 int。然后将其添加到`sum`您需要在 while 之外声明的变量中。

```
Scanner inFile = new Scanner(fileName);        
int sum = 0;
while (inFile.hasNext()) {         
    token = inFile.next( ); 

    System.out.println(token);
    sum += Integer.parseInt(token);

} 
```

`inFile.nextInt()`好吧，如果您正在读取整数值，那么 using是一个更好的选择。并`inFile.hasNextInt()`在您的 while 循环中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T19:41:57.270

`nextInt()`首先将使用of`Scanner`类的整数读入 a `List`。`for`然后使用“增强”循环将这些数字中的每一个添加到列表中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-21T00:03:09.587

所以我能够找出我的问题并且成功了，但我仍然希望任何人都可以输入是否以及如何通过使用三元运算符来简化此语法。

```
import java.util.Scanner;
import java.io.*;
public class Midterm
{
    public static void main(String[]args) throws Exception
    {
     final String FILE = "integers.txt";
     final String RELATIVE_DIRECTORY_FILE = "integers.txt ";
    int positiveNumberCount = 0,
    negativeNumberCount = 0;
    String dataItem;
    double sum = 0;
    double sumForAverage = 0;
    double average = 0;

    File inputFile = new File(RELATIVE_DIRECTORY_FILE);
    if(!inputFile.exists())
    {
        System.out.printf("%n%s%s%s", "The file, ",   RELATIVE_DIRECTORY_FILE, " does not exist");
    }

    if(inputFile.exists())
    {
        System.out.printf("%s%s%s", "The file ", RELATIVE_DIRECTORY_FILE,       "was found");
        Scanner file = new Scanner(inputFile);
        //***if i need to use a delimiter *****
        //file.useDelimiter(",") where in between " "  is my type of delimiter
        while(file.hasNext())
        {

            dataItem = file.nextLine();

            double numericalDataItem = Double.parseDouble(dataItem);

            boolean isPositive = false;
            boolean isNegative = false;

            if(numericalDataItem > 0)
            {
                isPositive = true;
                positiveNumberCount++;
            }
            else if(numericalDataItem < 0)
            {
                isNegative = true;
                negativeNumberCount++;
            }

            sum += Double.parseDouble(dataItem);
            sumForAverage = positiveNumberCount + negativeNumberCount;
            average = sum/sumForAverage;

        } 
        System.out.printf("%n%s%d%n%s%d%n%s%.2f%n%s%.2f", "Positive Number Count: ", positiveNumberCount,
        "Negative Number Count: ", negativeNumberCount, "Sum Of Numbers: ", sum, "Average of Numbers: ", average);
    }
}
} 
```

# magento - 在可配置的产品视图 magento 上加载简单的库存 Sku

> ID：13443826
> 
> 赞同：1
> 
> 时间：2012-11-18T19:39:20.537
> 
> 标签：magento, get, product

需要在产品视图页面上按升序获取与可配置产品关联的简单库存 sku。

```
Result like:

[1] = "S120622006_5";
[2] = "S120622007";
[4] = "S120622008";
[5] = "S120622009";
[6] = "S1206220010"; 
```

我的开始 scipt：这会在可配置的情况下获取所有关联的 sku，但这会得到未安排的结果并显示缺货 sku。我只想获取 In stock sku 并按升序排列。

```
<?php
    $conf = Mage::getModel('catalog/product_type_configurable')->setProduct($_product);
    $col = $conf->getUsedProductCollection()->addAttributeToSelect('*')->addFilterByRequiredOptions();
?>

<?php
    $count = 1;
    $itemId = array();
    foreach($col as $simple_product){
        $itemId[] = array($simple_product->getSelectLabel() => $simple_product->getSku());
    }

    foreach($itemId as $val){
        foreach($val as $k => $v){
            echo 'Skus['.$count.'] = "'.$v.'";'. "\n";
            $count++;
        }
    };
?> 
```

我很感激任何帮助。

来自 RS 的结果

```
S1206220010_5 = 
S1206220011_5 = 
S1206220012_5 = 
S120622006_5 = 
S120622007 = 
S120622007_5 = 
S120622008 = 
S120622008_5 = 
S120622009_5 = 
S120622009 = 
S1206220010 = 
S1206220011 = 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:55:48.823

现在无法测试，但试试这个：

`->getCollection()->addFieldToFilter('qty', array('gteq' => 1))`

# java - 将输入发送到 nmap 进程

> ID：13443830
> 
> 赞同：1
> 
> 时间：2012-11-18T19:39:42.123
> 
> 标签：java, stdin, processbuilder, nmap

我正在尝试将输入发送到从 ProcessBuilder 运行的 nmap 进程，但我没有看到正在运行的 nmap 进程的响应。我查看了 nmap 源代码，它接受来自 TTY 的运行时交互式输入，所以我尝试使用`/bin/bash -c`除了直接使用之外运行它`/usr/bin/nmap`。

[我有另一个线程使用这个答案](https://stackoverflow.com/questions/3159913/problem-reading-inputstream-from-java-process-runtime-getruntime-exec-or-pr)从 nmap 读取标准输出。这是我的代码：

```
ProcessBuilder builder = new ProcessBuilder("/usr/bin/nmap", "-v", "-sT", "192.168.1.1-40");
//ProcessBuilder builder = new ProcessBuilder("/bin/bash", "-c", "\"\"/usr/bin/nmap -v -sT 192.168.1.1-40\"\"");
builder.redirectErrorStream(true);
Process proc = builder.start();
LogStreamReader lsr = new LogStreamReader(proc.getInputStream());
Thread thread = new Thread(lsr, "LogStreamReader");
thread.start();

while(thread.isAlive()) {
    OutputStream stdin = proc.getOutputStream ();
    BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(stdin));
    System.out.println("Sending input to process...");
    writer.write("a");
    writer.close();
    Thread.sleep(2000);
} 
```

`writer.write(a)`nmap 应该通过打印出扫描的完成百分比/ETA 来响应，但事实并非如此。

我还尝试在类似于 LogStreamReader 线程的单独线程中运行编写器，但仍然没有...

我错过了什么吗？

**更新：** 我被告知 nmap 有一个选项`--stats-every`可以完全满足我的需要，所以这已经解决了。我找不到写入 nmap 使用的 tty 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T04:25:31.517

Nmap 的运行时交互不是来自 STDIN，而是来自 TTY（参考[这个 nmap-dev 线程](http://seclists.org/nmap-dev/2012/q1/695)）。我不是 Java 专家，但我认为不`ProcessBuilder`支持这种交互。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:56:55.470

有一个用于运行 Nmap 的 Java 库，称为 Nmap4j。您可能会发现这很有帮助。它位于 sourceforge：nmap4j.sourceforge.net。

# c++ - C++ 中 f(g(), h()) 的求值顺序

> ID：13443833
> 
> 赞同：4
> 
> 时间：2012-11-18T19:39:55.917
> 
> 标签：c++, c++11, language-lawyer

这是 C++ 实现在理论上可以并行计算两个函数参数的后续行动[吗？](https://stackoverflow.com/questions/13443532/could-a-c-implementation-in-theory-parallelise-the-evaluation-of-two-functio)

假设我有以下 C++11 程序：

```
#include <cstdio>
using std::printf;
int g() { printf("1\n"); printf("3\n"); return 2; }
int h() { printf("2\n"); printf("4\n"); return 3; }
void f(int a, int b) { printf("%i\n", a+b); }
int main() { f(g(), h()); } 
```

当然可以观察到以下输出：

```
1 3 2 4 5
2 4 1 3 5 
```

1 2 3 4 5 呢？

（据我所知，唯一的限制是 1 在 3 之前排序，2 在 4 之前排序，并且 3 和 4 都在 5 之前排序。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T19:46:36.860

C++03 确实规范地说函数调用不会交错。C ++ 11规范地说

> 调用函数（包括其他函数调用）中的每个求值，如果在被调用函数的主体执行之前或之后没有特别排序，则相对于被调用函数的执行是不确定的。

两者都足以禁止这一点。

# flash - 启动时 SystemManager 中的 FLEX ReferenceError？

> ID：13443836
> 
> 赞同：0
> 
> 时间：2012-11-18T19:40:17.697
> 
> 标签：flash, apache-flex, adobe, referenceerror

所以今天早上我遇到了一个奇怪的错误。我的 Adob​​e FLEX 应用程序在周五编译得很好，但现在每当我尝试调试或运行它时，我一开始就会遇到这个运行时错误：

```
ReferenceError: Error #1069: Property http://www.adobe.com/2006/flex/mx/internal::topMostIndex not found on _Main_mx_managers_SystemManager and there is no default value.
at mx.managers::SystemChildrenList/addChild()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\SystemChildrenList.as:128]
at mx.managers::SystemManager/http://www.adobe.com/2006/flex/mx/internal::initialize()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\SystemManager.as:2014]
at mx.managers::SystemManager/initHandler()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\SystemManager.as:2582] 
```

这是它唯一出现的痕迹，所以在我看来它是 FLEX 内置的东西，而不是我的代码可能会打嗝。在 Clean 能够解决之前，我遇到了奇怪的错误，但我试图清理并重建我的调试版本，但我仍然收到此错误。我重新启动了 Flash Builder，甚至重新启动了我的计算机 - 没有骰子。即使我导出发布版本，我的 firefox flash 调试器也会捕获相同的错误。我在网络上的应用程序上的现有副本似乎不受影响。我为netscape 重新安装了我的flash 内容调试器（我使用firefox 作为我的主要浏览器）并且没有去。我什至不认为会自动为 flash 安装更新，因为我有它通知我而不是仅仅执行它（甚至仔细检查了这些设置）。

除了重新安装 flash 或 flash builder 我不知道该怎么做。有什么建议么？我不知道这个错误意味着什么或如何解决它。我什至不排除我在代码中搞砸了一些东西的可能性，但我不知道在哪里看，因为堆栈跟踪只有 3 行——而且没有一个是我的代码。

在此先感谢您的帮助！

编辑：我想补充一点，如果我解除错误，应用程序会继续正常运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T07:58:17.250

这些天我遇到了同样的错误。带firefox flash player插件。不同的是我用的是模块。如果我忽略该错误，该项目将无法运行。

但是我发现ie或者opera都没有错误。

现在我正在使用歌剧。

* * *

我尝试了这些方法：

*   清洁项目
*   创建一个新项目
*   创建一个新工作区和一个新项目
*   重新安装闪存生成器
*   安装最新的 Flash Player 插件

所有这些都不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T13:25:59.780

上周有同样的错误。经过少量研究，该错误似乎是由于 Firefox 中的 flashFirebug 扩展造成的。尝试禁用插件，重新启动 Firefox，然后重试。这为我解决了问题。希望帮助...

[资源](http://forums.adobe.com/message/4857769)

# ios - MPVolumeVew 滑块没有触摸响应

> ID：13443837
> 
> 赞同：0
> 
> 时间：2012-11-18T19:40:17.897
> 
> 标签：ios, mpvolumeview

我正在构建收音机 APP，我已将 UIView 添加到我的 ViewController 并将其类更改为 MPVolumeView。当我在我的设备上测试它时会出现滑块，但对触摸手势没有响应。奇怪的是，它通过音量按钮响应硬件变化。这是我的代码：

```
#import <UIKit/UIKit.h>
#import <AVFoundation/AVFoundation.h>
#import <MediaPlayer/MediaPlayer.h>

@interface ViewController : UIViewController{
MPVolumeView *_mpVolumeView;
}

 - (IBAction)playPressed:(id)sender;
@property (strong, nonatomic) IBOutlet MPVolumeView *mpVolumeView; 
```

还有他们。文件：

```
@interface ViewController ()
 {
AVPlayer *vPlayer;
}
@end

@implementation ViewController
@synthesize mpVolumeView = _mpVolumeView;

- (void)viewDidLoad
{
[super viewDidLoad];

NSURL *vibes = [NSURL URLWithString:@"http://vibesradio.org:8002/listen.pls"];
vPlayer = [[AVPlayer alloc] initWithURL:vibes];

_mpVolumeView.backgroundColor = [UIColor clearColor];
MPVolumeView *myVolumeView = [[MPVolumeView alloc] initWithFrame: _mpVolumeView.bounds];
[_mpVolumeView addSubview:myVolumeView];
} 
```

感谢您提供解决此问题的任何提示和建议。我花了几个小时试图找到一个没有任何运气的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:42:07.457

您可能想要更改：

```
MPVolumeView *myVolumeView = [[MPVolumeView alloc] initWithFrame: _mpVolumeView.bounds];
[_mpVolumeView addSubview:myVolumeView]; 
```

向：

```
self.myVolumeView = [[MPVolumeView alloc] initWithFrame:CGRectZero];
[self.myVolumeView sizeToFit];
[self.view addSubview:self.myVolumeView]; 
```

# php - 如何对计算表列求和

> ID：13443844
> 
> 赞同：-1
> 
> 时间：2012-11-18T19:40:47.633
> 
> 标签：php, javascript, mysql, joomla

我需要对显示表中的一列求和。我的问题：如何对已从其他列计算数据的表列求和？我需要使用javascript来做到这一点吗？我想在相关列的底部显示总数。提前感谢您的建议。

我当前计算的数据示例：

```
echo round(($r->price_sold - $r->shipping - $r->tax - $r->fees) * $r->commission_rate / 100,2);

    $query = "
SELECT *
  FROM jos_data_Used_Gear
  ORDER BY client_name ASC  
  LIMIT 0, 100;
";

$db->setQuery($query);
$url = $db->loadObjectList();

echo '<table id="consignment-table" border="0" align="center" width="3000px">'; 
echo '<tr class="consignment-header"><th class="consignment-client">Client</th>'; 
echo '<th class="consignment-title">Item Name</th>'; 
echo '<th class="consignment-saleprice">Price Sold</th>'; 
echo '<th class="consignment-saleprice">Tax</th>';
echo '<th class="consignment-saleprice">Shipping</th>';
echo '<th class="consignment-saleprice">Service Fee</th>';
echo '<th class="consignment-saleprice">Commission</th>';
echo '<th class="consignment-saleprice">Due Client</th>'; 

if(count($url)) {
  foreach($url as $r) {
    echo '<tr><td nowrap="nowrap">';
    echo $r->client_name;
    echo '</td><td nowrap="nowrap">'; 
    echo $r->item_title;
    echo '</td><td class="currency" nowrap="nowrap">'; 
    echo "&#36;";
    echo $r->price_sold;
    echo '</td><td nowrap="nowrap">'; 
    echo "&#36;";
    echo $r->tax;
    echo '</td><td class="currency" nowrap="nowrap">'; 
    echo "&#36;";
    echo $r->shipping;
    echo '</td><td nowrap="nowrap">'; 
    echo "&#36;";
    echo $r->fees;
    echo '</td><td nowrap="nowrap">'; 
    echo round(($r->price_sold - $r->shipping - $r->tax - $r->fees) * $r->commission_rate / 100,2);
    echo '</td><td class="currency" nowrap="nowrap">'; 
    echo "&#36;";
    echo round(($r->price_sold - $r->fees - $r->tax - $r->shipping) - (($r->price_sold - $r->fees - $r->tax - $r->shipping) * $r->commission_rate / 100) ,2);
    echo "</td></tr>";

  } 
}

echo '</table>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:22:20.600

[http://jsbin.com/opevet/1/edit](http://jsbin.com/opevet/1/edit)

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
<table id="consignment-table" border="1" align="center" width="500px">
<tr class="consignment-header"><th class="consignment-client">Client</th>
<th class="consignment-title">Item Name</th>
<th class="consignment-saleprice">Price Sold</th>
<th class="consignment-saleprice">Tax</th>
<th class="consignment-saleprice">Shipping</th>
<th class="consignment-saleprice">Service Fee</th>
<th class="consignment-saleprice">Commission</th>
<th class="consignment-saleprice">Due Client</th>
    <tr><td nowrap="nowrap">client a
        </td><td nowrap="nowrap">1
        </td><td class="currency PriceSold" nowrap="nowrap">
            &#36;25.75
        </td><td nowrap="nowrap">0
        </td><td class="currency" nowrap="nowrap">0
        </td><td nowrap="nowrap">0
        </td><td nowrap="nowrap">0
        </td><td class="currency" nowrap="nowrap">0
    </td></tr>
    <tr><td nowrap="nowrap">client b
        </td><td nowrap="nowrap">2
        </td><td class="currency PriceSold" nowrap="nowrap">
            &#36;31.44
        </td><td nowrap="nowrap">0
        </td><td class="currency" nowrap="nowrap">0
        </td><td nowrap="nowrap">0
        </td><td nowrap="nowrap">0
        </td><td class="currency" nowrap="nowrap">0
    </td></tr>
    <tr><td nowrap="nowrap">client a
        </td><td nowrap="nowrap">3
        </td><td class="currency PriceSold" nowrap="nowrap">
            &#36;15.92
        </td><td nowrap="nowrap">0
        </td><td class="currency" nowrap="nowrap">0
        </td><td nowrap="nowrap">0
        </td><td nowrap="nowrap">0
        </td><td class="currency" nowrap="nowrap">0
    </td></tr>
    <tr><td nowrap="nowrap">total:
        </td><td nowrap="nowrap">
        </td><td class="currency total1" nowrap="nowrap">
        </td><td nowrap="nowrap">
        </td><td class="currency" nowrap="nowrap">
        </td><td nowrap="nowrap">
        </td><td nowrap="nowrap">
        </td><td class="currency" nowrap="nowrap">
    </td></tr>
</table>

<script>
$(document).ready(function(){
  var total1 = 0.0;
  $('.PriceSold').each(function(){
    try{
      total1 += $(this).html().replace('$','') * 1;
    } catch(ex){}
  });
  $('.total1').html('<b>$' + total1+ '</b>');
});
</script>  

</body>
</html> 
```

# python - 使用 --with-gae 选项启动鼻子会因缺少 lib/ipaddr 而引发 ValueError

> ID：13443847
> 
> 赞同：1
> 
> 时间：2012-11-18T19:41:01.153
> 
> 标签：python, google-app-engine, nosetests

设置测试框架，我似乎无法克服这个错误：

```
Traceback (most recent call last):
  File "/usr/local/bin/nosetests", line 8, in <module>
    load_entry_point('nose==1.1.2', 'console_scripts', 'nosetests')()
  File "/Library/Python/2.7/site-packages/nose-1.1.2-py2.7.egg/nose/core.py", line 118, in __init__
    **extra_args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/unittest/main.py", line 94, in __init__
    self.parseArgs(argv)
  File "/Library/Python/2.7/site-packages/nose-1.1.2-py2.7.egg/nose/core.py", line 135, in parseArgs
    self.config.configure(argv, doc=self.usage())
  File "/Library/Python/2.7/site-packages/nose-1.1.2-py2.7.egg/nose/config.py", line 338, in configure
    self.plugins.configure(options, self)
  File "/Library/Python/2.7/site-packages/nose-1.1.2-py2.7.egg/nose/plugins/manager.py", line 271, in configure
    cfg(options, config)
  File "/Library/Python/2.7/site-packages/nose-1.1.2-py2.7.egg/nose/plugins/manager.py", line 94, in __call__
    return self.call(*arg, **kw)
  File "/Library/Python/2.7/site-packages/nose-1.1.2-py2.7.egg/nose/plugins/manager.py", line 162, in simple
    result = meth(*arg, **kw)
  File "build/bdist.macosx-10.7-intel/egg/nosegae.py", line 80, in configure
  File "/usr/local/bin/dev_appserver.py", line 76, in <module>
    DIR_PATH = get_dir_path(os.path.join('lib', 'ipaddr'))
  File "/usr/local/bin/dev_appserver.py", line 66, in get_dir_path
    'file and %s.' % sibling)
ValueError: Could not determine directory that contains both, this file and lib/ipaddr. 
```

这是一个正确的错误来自`dev_appserver.py`...目录中`lib/ipaddr`没有`/usr/local/bin`。

为什么`nosetests`触发引发此错误？为什么要首先`dev_appengine`尝试寻找`lib/ipaddr`？

# java - Java 打印一个包含整数的字符串

> ID：13443850
> 
> 赞同：11
> 
> 时间：2012-11-18T19:41:05.137
> 
> 标签：java, string, println

我有一个疑问。

```
public static void main(String[] args) throws IOException{
  int number=1;
  System.out.println("M"+number+1);
} 
```

**输出：** `M11`

但我想让它打印 M2 而不是 M11。我无法编号 ++，因为该变量涉及 for 循环，如果我这样做，它会给我不同的结果，并且无法使用另一个打印语句打印它，因为输出格式会发生变化。

请求您帮助我如何正确打印。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-18T19:44:29.447

尝试这个：

```
System.out.printf("M%d%n", number+1); 
```

`%n`换行符在哪里

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-18T19:42:01.077

在总和周围添加一个括号，以强制`sum`首先发生。这样，您`bracket`的最高优先级将首先被评估，然后`concatenation`才会发生。

```
System.out.println("M"+(number+1)); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-18T19:49:38.093

它与java连接字符串的优先顺序有关，

基本上Java在说

*   `"M"+number = "M1"`
*   `"M1"+1 = "M11"`

您可以像使用数学一样重载优先级

```
"M"+(number+1) 
```

这现在读

*   `"M"+(number+1)`= `"M"+(1+1)`= `"M"+2`=`"M2"`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-18T19:42:09.663

尝试

```
System.out.println("M"+(number+1)); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-18T19:43:06.470

尝试这个：

```
System.out.println("M"+(number+1)); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-18T19:46:50.300

一种将数据与不变量分开的更简洁的方法：

```
int number=1;
System.out.printf("M%d%n",number+1); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-18T19:46:59.880

```
 System.out.println("M"+number+1); 
```

java中的字符串连接以这种方式工作：

如果第一个操作数是字符串类型并且您使用`+`运算符，它将连接下一个操作数，结果将是一个字符串。

尝试

```
 System.out.println("M"+(number+1)); 
```

在这种情况下，由于`()`括号具有最高优先级，括号内的内容将首先被评估。然后将得到的 int 值与 String 文字连接起来，产生一个字符串“M2”

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-11-18T19:47:33.043

`System.out.println("M"+number+1);`

在这里，您在方法`+`中将其用作连接运算符`println()`。

要使用`+`求和，你需要给它高优先级，你可以用括号覆盖它，如下所示：

`System.out.println("M"+(number+1));`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-23T07:29:27.283

如果您`+`在字符串之后执行操作，则将其视为连接：

```
"d" + 1 + 1     // = d11 
```

而如果你反之亦然`+`，则视为加法：

```
1 + 1 + "d"     // = 2d 
```

# c++ - 比较旋转坐标

> ID：13443853
> 
> 赞同：0
> 
> 时间：2012-11-18T19:41:24.353
> 
> 标签：c++, opengl, glut

尝试将旋转的 2D Quads 坐标与旋转的 x 和 y 坐标进行比较时，我遇到了一些麻烦。我正在尝试确定是否在四边形内单击了鼠标。

1) rot 是此类对象：（注意：运算符 << 为使用旋转坐标函数而重载）

```
class Vector{

private:
std::vector <float> Vertices;

public:

Vector(float, float);

float GetVertice(unsigned int);

void SetVertice(unsigned int, float);

std::vector<float> operator <<(double);

};

Vector::Vector(float X,float Y){
Vertices.push_back(X);
Vertices.push_back(Y);
}

float Vector::GetVertice(unsigned int Index){
return Vertices.at(Index);
}

void Vector::SetVertice(unsigned int Index,float NewVertice){
Vertices.at(Index) = NewVertice;
}

//Return rotated coords:D
std::vector <float> Vector::operator <<(double Angle){
std::vector<float> Temp;

Temp.push_back(Vertices.at(0) * cos(Angle) - Vertices.at(1) * sin(Angle));
Temp.push_back(Vertices.at(0) * sin(Angle) + Vertices.at(1) * cos(Angle));

return Temp;
} 
```

2）坐标的比较和旋转*THE NEW VERSION*

```
 Vector Rot1(x,y),Rot3(x,y);
        double Angle;
        std::vector <float> result1,result3;

        Rot3.SetVertice(0,NewQuads.at(Index).GetXpos() + NewQuads.at(Index).GetWidth());
        Rot3.SetVertice(1,NewQuads.at(Index).GetYpos() + NewQuads.at(Index).GetHeight());

        Angle = NewQuads.at(Index).GetRotation();
        result1 = Rot1 << Angle;  // Rotate the mouse x and y
        result3 = Rot3 << Angle;  // Rotate the Quad x and y

        //.at(0) = x and .at(1)=y

           if(result1.at(0) >= result3.at(0) - NewQuads.at(Index).GetWidth()  && result1.at(0) <= result3.at(0)  ){ 
        if(result1.at(1) >= result3.at(1) - NewQuads.at(Index).GetHeight()  && result1.at(1) <= result3.at(1) ){ 
```

当我运行它时，它以 0 角完美运行，但是当你旋转四边形时，它会失败。失败是指激活区域似乎消失了。

我是否正确地旋转坐标？还是比较？如果是比较，你将如何正确地做到这一点，我已经尝试改变 if 的但没有任何运气......

*编辑* 四边形的绘图（在测试之前发生）：

```
void Quad::Render()
{

if(!CheckIfOutOfScreen()){

glPushMatrix();

glLoadIdentity();

glTranslatef(Xpos ,Ypos ,0.f);

glRotatef(Rotation,0.f,0.f,1.f); // same rotation is used for the testing later...

glBegin(GL_QUADS);

glVertex2f(Zwidth,Zheight);
glVertex2f(Width,Zheight);
glVertex2f(Width,Height);
glVertex2f(Zwidth,Height);

glEnd();

if(State != NOT_ACTIVE)
    RenderShapeTools();

glPopMatrix();
}

} 
```

基本上我正在尝试测试是否在这个四边形内点击了鼠标： [图片](http://i50.tinypic.com/zl9e1l.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T20:18:03.917

实现您想要的方法不止一种，但是从您发布的图像中，我假设您只想使用 2D 图形绘制到与屏幕（或窗口）大小相同的表面。

如您所知，在 3D 图形中，我们谈论 3 个坐标参考。第一个是要绘制的对象或模型的坐标参考，第二个是相机或视图的坐标参考，第三个是屏幕的坐标参考。

在 OpenGL 中，前两个坐标参考是通过 MODELVIEW 矩阵建立的，第三个是通过 PROJECTION 矩阵和视口变换实现的。

在您的情况下，您想旋转一个四边形并将其放置在屏幕上的某个位置。您的四边形有自己的模型坐标。假设对于这个特定的 2D 四边形，原点位于四边形的中心，尺寸为 5 x 5。还假设如果我们看四边形的中心，则 X 轴指向 RIGHT， Y 轴指向 UP，Z 轴指向观察者。

四边形的未旋转坐标将是（从左下角顺时针）：(-2.5,-2.5,0), (-2.5,2.5,0), (2.5,2.5,0), (2.5,-2.5,0)

现在我们想要一个相机和投影矩阵和视口，以便模拟一个已知尺寸的二维表面。

```
//Assume WinW contains the window width and WinH contains the windows height

 glViewport(0,0,WinW,WinH);//Set the viewport to the whole window
 glMatrixMode (GL_PROJECTION);
 glLoadIdentity ();
 glOrtho (0, WinW, WinH, 0, 0, 1);//Set the projection matrix to perform a 2D orthogonal projection
 glMatrixMode (GL_MODELVIEW);
 glLoadIdentity ();//Set the camera matrix to be the Identity matrix 
```

您现在可以在这个 2D 表面上绘制四边形，尺寸为 WinW、WinH。在这种情况下，如果您只使用当前顶点绘制四边形，您将绘制四边形，其中心位于窗口左下方，每边测量 5 个像素，因此您实际上只会看到四边形的四分之一。如果您想旋转和移动它，您将执行以下操作：

```
//Prepare matrices as shown above
//Viewport coordinates range from bottom left (0,0) to top right (WinW,WinH)
float dX = CenterOfQuadInViewportCoordinatesX, dY = CenterOfQuadInViewportCoordinatesY;
float rotA = QuadRotationAngleAroundZAxisInDegrees;

float verticesX[4] = {-2.5,-2.5,2.5,2.5};
float verticesY[4] = {-2.5,2.5,2.5,-2.5};

//Remember that rotate is done first and translation second
glTranslatef(dX,dY,0);//Move the quad to the desired location in the viewport
glRotate(rotA, 0,0,1);//Rotate the quad around it's origin

glBegin(GL_QUADS);

glVertex2f(verticesX[0], veriticesY[0]);
glVertex2f(verticesX[1], veriticesY[1]);
glVertex2f(verticesX[2], veriticesY[2]);
glVertex2f(verticesX[3], veriticesY[3]);

glEnd(); 
```

现在您想知道鼠标的点击是否在渲染的四边形内。视口坐标从左下角开始，而窗口坐标从左上角开始。因此，当您获得鼠标坐标时，您必须通过以下方式将它们转换为视口坐标：

```
float mouseViewportX = mouseX, mouseViewportY = WinH - mouseY - 1; 
```

在视口坐标中获得鼠标位置后，您需要通过以下方式将其转换为模型坐标（请仔细检查计算，因为我通常使用自己的矩阵库而不是手动计算）：

```
//Translate the mouse location to model coordinates reference
mouseViewportX -= dX, mouseViewportY -= dY;
//Unrotate the mouse location
float invRotARad = -rotA*DEG_TO_RAD;
float sinRA = sin(invRotARad), cosRA = cos(invRotA);

float mouseInModelX = cosRA*mouseViewportX - sinRA*mouseViewportY;
float mouseInModelY = sinRA*mouseViewportX + cosRA*mouseViewportY; 
```

现在您终于可以检查鼠标是否落在四边形内 - 正如您所看到的，这是在四边形坐标中完成的：

```
bool mouseInQuad = mouseInModelX > verticesX[0] && mouseInModelY < verticesX[1] &&
                   mouseInModelY > verticesY[0] && mouseInModelY < verticesY[1]; 
```

希望我没有犯太多错误，这会让你走上正轨。如果您想处理更复杂的案例和 3D，那么您应该看看 gluUnproject（也许您会想要实现自己的），对于更复杂的场景，您可能需要使用模板或深度缓冲区

# xaml - 背景 ImageBrush 的 XAML 故事板

> ID：13443854
> 
> 赞同：2
> 
> 时间：2012-11-18T19:41:33.740
> 
> 标签：xaml, windows-8, windows-store-apps

我有以下 XAML 网格：

```
 <Grid Style="{StaticResource LayoutRootStyle}" x:Name="mainGrid">
    <Grid.Resources>
        <Storyboard x:Name="FadeOut">
            <DoubleAnimation Duration="3" To="0.0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="gridBackgroundImageBrush" d:IsOptimized="True"/>
        </Storyboard>
        <Storyboard x:Name="FadeIn">
            <DoubleAnimation Duration="3" To="0.35"  Storyboard.TargetProperty="Opacity" Storyboard.TargetName="gridBackgroundImageBrush" d:IsOptimized="True"/>
        </Storyboard>
    </Grid.Resources>

    <Grid.Background>
        <ImageBrush x:Name="gridBackgroundImageBrush" ImageSource="{Binding BackgroundImage}" Opacity="0.35">
        </ImageBrush> 
    </Grid.Background> 
```

我想以编程方式启动“FadeOut”动画并从 ImageBrush 更改图像，然后启动“FadeIn”动画，如下所示：

```
private void t_Tick(object sender, object e)
    {
        try
        {
            FadeOut.Begin();
            this.DefaultViewModel["BackgroundImage"] = BackgroundImage;
            FadeIn.Begin();
        }
        catch { }
    } 
```

然而，图像在没有任何动画的情况下发生变化。我想问题在于我如何访问 ImageBrush 的“不透明度”属性。我为 TargetProperty 属性尝试了以下语法：

```
(Control.Background).(ImageBrush.Opacity) 
```

正如 msdn 在这里显示的那样：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.animation.storyboard.settargetproperty.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.animation.storyboard.settargetproperty.aspx)但它似乎不起作用。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T14:27:05.217

解决方案是创建一个图像控件，而不是使用 ImageBrush 绘制图像，然后定义淡化的视觉状态：

```
<Grid Style="{StaticResource LayoutRootStyle}" x:Name="mainGrid">
    <Image Grid.RowSpan="2" x:Name="gridBackgroundImageBrush" Source="{Binding BackgroundImage}" />
</Grid>
<VisualStateGroup x:Name="FadeStates">
        <VisualState x:Name="FadeOutState">
             <Storyboard>
                  <DoubleAnimation Duration="{Binding fadeDuration}" From="0.5" To="0.0" x:Name="fadeOutAnimation" 
                                     Storyboard.TargetProperty="Opacity" 
                                     Storyboard.TargetName="gridBackgroundImageBrush"  />
             </Storyboard>
        </VisualState>
        <VisualState x:Name="FadeInState">
             <Storyboard>
                  <DoubleAnimation Duration="{Binding fadeDuration}" From="0.0" To="0.5" x:Name="fadeInAnimation" 
                                     Storyboard.TargetProperty="Opacity"
                                     Storyboard.TargetName="gridBackgroundImageBrush" />
            </Storyboard>
        </VisualState>
 </VisualStateGroup> 
```

# eclipse - 使用 eclipse 在远程服务器上管理 git clone

> ID：13443857
> 
> 赞同：3
> 
> 时间：2012-11-18T19:41:50.903
> 
> 标签：eclipse, git, github, egit

我是 git 和 github 的新手，我对 eclipse Egit 的 git 插件有疑问。

我已经从我的 github 存储库克隆到远程服务器（github 除外），为了方便起见，我将其称为“rserver”。现在我正在使用 Eclipse（和 RSE 插件）从我的计算机本地编辑“rserver”上的存储库中的文件，但是当我想要执行任何 git 操作（例如提交所做的更改）时，我直接在“rserver”上执行此操作（命令行）。现在我希望能够使用 eclipse 和（我认为是最好的选择）egit 插件来提交更改等。由于所有代码都需要保留在“rserver”上才能作为程序运行，因此没有必要对我的 github 存储库进行另一个本地克隆。但是我用 egit 尝试过的所有选项似乎都可以做到这一点。

是否可以从我的本地 Eclipse SDK 管理“rserver”和 github 之间的所有 git 操作（除了在 Eclipse 中使用终端）？如果是这样，那怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:40:51.323

git 克隆 repos，这意味着它们包含相同的对象。

I don't think there's a way to work on a remote repo, but you should `git clone` your rserver repository locally, work and commit there (this using eclipse), and when you want to upload your code to rserver or github, you just `push` your changes there.

When you `git push`, you make the remote branch point to the same commit your local branch points, uploading any remote-missing object.

Probably you will want to add both remote repostiories (rserver and github) as `remote`s of your local repository, so then you can decide to whether of both to push changes to.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-30T00:38:31.450

能够远程编辑文件很有价值，并且能够在 git 中对文件进行版本控制也很有价值。目前我也有同样的情况。然而，我的“rserver”是 Puppet 大师。我正在使用 Eclipse 中的本地 PC 通过 Puppet master 上的 RSE 编辑文件。直接在 Puppet master 上编辑文件，尝试更改，如果它不起作用，继续修改文件有很多价值。然后必须通过 ssh 进入服务器才能执行 git 操作是愚蠢的。拥有一个本地 git 克隆，您必须 git add、commit、push，然后转到服务器和 git pull 更加愚蠢。Eclipse 应该允许您通过 RSE 执行 git 操作。

# php - PHP 框架中的命名空间和自动加载

> ID：13443860
> 
> 赞同：0
> 
> 时间：2012-11-18T19:42:02.397
> 
> 标签：php

我的项目中有两个文件夹：APPLICATION 和 SYSTEM。系统包含CONFIG、CORE、HTML、URL等文件夹。它们中的每一个都包含一些类集。

我使用这个约定：类的命名空间反映了它的文件结构——这让我可以轻松地自动加载它们。

所以：`\Project_Name\System\Core\Foo`放在`System/Core/Foo.php`.

但是，对于我的代码的用户来说，调用这么长的名称并不是最快、最好的方法。那么两个问题：

1.  可以使用 \Project_Name 之类的命名空间创建几个空类吗？在应用程序类中使用一个“使用”关键字，我会摆脱这个问题。但结果我会在“system/”的一个奇怪文件夹中得到很多空类和文件夹结构。
2.  或者也许我应该`\Project_Name`在每节课上简单地使用？然而，这会让我推动创建更长的类名来反映文件结构，并使自动加载更难理解。

你认为最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:51:19.520

您忘记了解决方案 3：使用别名

```
use \Project_Name\System\Core\Foo;
use \Project_Name\System\Core\Bar as CoreBar;
$x = new Foo;
$y = new CoreBar; 
```

这两种解决方案的问题在于，您让您的懒惰决定了您的应用程序结构。

# mysql - 如果需要，插入更新 pdo mysql 查询并获取最后插入的 id

> ID：13443862
> 
> 赞同：0
> 
> 时间：2012-11-18T19:42:07.067
> 
> 标签：mysql, pdo, insert-update

我有简单的插入/更新页面，我检查是否有“id”，如果没有，则继续插入查询，否则继续更新查询，这工作正常。问题是我需要该 id 用于下一个查询，在插入查询的情况下，我会将其作为“lastInsertId”获取，但在更新查询的情况下，“lastInsertId”将覆盖 $_POST [“id”]。

有没有办法识别已执行的查询（插入或更新）然后获得正确的 id，或者我必须单独绑定/执行查询？

```
$id= $_POST["id"];  
  try { 
    $DBH = db_connect ();
    $DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
      if ($id== "") {
         $query= $DBH->prepare('INSERT INTO table (x1,x2) VALUES(:x1,:x2)');                        
      } else {
         $query= $DBH->prepare('UPDATE day SET x1=:x1, x2=:x2 WHERE id= :id'); 
           $query-> bindValue(':id', $id);
      }

           $query-> bindValue(':x1', $x1);
           $query-> bindValue(':x2', $x2);                                                                  
           $query-> execute();                              

        $id= $DBH-> lastInsertId('id') ; //get last inserted ID
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:01:16.240

您可以使用与选择插入查询完全相同的 if 子句作为要执行的查询。然后您的代码将如下所示：

```
$id= $_POST["id"];  
    try { 
      $DBH = db_connect ();
      $DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
      if ($id== "") {
         $query= $DBH->prepare('INSERT INTO table (x1,x2)     VALUES(:x1,:x2)');
      } else {
         $query= $DBH->prepare('UPDATE day SET x1=:x1, x2=:x2 WHERE id= :id'); 
         $query-> bindValue(':id', $id);
      }

       $query-> bindValue(':x1', $x1);
       $query->bindValue(':x2',$x2);                                                                  
       $query-> execute();

    if($id==""){
        $id= $DBH-> lastInsertId('id') ; //get last inserted ID
    }
} 
```

# scala - 编译包含 java 和 scala 代码的文件

> ID：13443863
> 
> 赞同：3
> 
> 时间：2012-11-18T19:42:08.240
> 
> 标签：scala

Ìs 可以编译同时包含 scala 和 java 代码的文件吗？我正在上在线课程，并获得了需要扩展的 java 源文件。我必须在现有文件中仅使用 Java 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T19:59:14.453

您不能在一个文件中同时拥有 Java 和 Scala。毕竟是`.java`or `.scala`。

但是，您可以自由地：

*   在 Scala 中扩展 Java 类（反之亦然）
*   在 Scala 中实现 Java 接口（语法与扩展特征相同）
*   在 Java 中扩展 Scala 特征（语法与实现 Java 接口的语法相同）

...只要它们在不同的文件中。

# xml - Wix 安装路径注册表值分配 - 有什么问题？

> ID：13443865
> 
> 赞同：9
> 
> 时间：2012-11-18T19:42:09.263
> 
> 标签：xml, wix, windows-installer

我有一个 WIX 安装程序。我尝试根据安装路径（VS Installer easy）添加一个注册表项，在这种情况下认为这将是小菜一碟......这是我的WIX XML：

```
<Feature Id="ProductFeature" Title="ChessBarInfoSetup" Level="1">
        <!--<ComponentGroupRef Id="ProductComponents" />-->
  <ComponentRef Id='InstallRegistryComponent' />
  <ComponentRef Id='ProductComponent' />
    </Feature>
</Product>

<Fragment>
    <Directory Id="TARGETDIR" Name="SourceDir">
        <Directory Id="ProgramFilesFolder">
    <Directory Id="ManufacturerFolder" Name="$(var.manufacturer)">
      <Directory Id="INSTALLFOLDER" Name="$(var.productName)">

        <!--<ComponentGroup Id="ProductComponents" Directory="INSTALLFOLDER">-->
          <Component Id="InstallRegistryComponent" Guid="*">
            <RegistryKey Id='ChessInfoBarInstallDir' Root='HKLM' Key='Software\[Manufacturer]\[ProductName]' Action='createAndRemoveOnUninstall'>
              <RegistryValue Type='string' Name='InstallDir' Value="[INSTALLDIR]" Action="write" KeyPath="yes" />
              <!--<RegistryValue Type='integer' Name='Flag' Value='0'/>-->
            </RegistryKey>
          </Component>
          <!-- TODO: Remove the comments around this Component element and the ComponentRef below in order to add resources to this installer. -->
          <Component Id="ProductComponent" Guid="*">
            <File Source="$(var.ChessInfoTaskBar.TargetPath)" />
          </Component>
        <!--</ComponentGroup>-->

      </Directory>
    </Directory>
        </Directory> 
</Directory>
</Fragment> 
```

该值已创建，但始终为空字符串。用 INSTALLLOCATION 和其他人尝试过......我做错了什么（在 wix 教程页面上看到 Value=[INSTALLDIR] ）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-19T09:47:22.363

它是空的，因为您正在使用`INSTALLDIR`而不是`INSTALLFOLDER`

```
<Directory Id="INSTALLFOLDER" Name="$(var.productName)">

<RegistryValue Type='string' Name='InstallDir' Value="[INSTALLFOLDER]" /> 
```

那应该给你安装目录。

# mysql - mysql在varchar（500）上添加索引

> ID：13443868
> 
> 赞同：1
> 
> 时间：2012-11-18T19:42:18.813
> 
> 标签：mysql, indexing, full-text-search, innodb

在我的一个数据库表中，我有一个长度为 500 的 varchar 字段。这个字段在`Where clause`我的查询中经常使用，表中有大约 1000,000 条记录。
现在要加快这种查询的速度，我该怎么办？

*   使用 InnoDB 引擎还是 MISAM ？
*   我当前的表引擎是 InnoDB。它对索引大小有限制吗，因为我的归档长度是 500。
*   我需要*全文索引*吗？（我应该提一下，我在一个简单的相等比较中使用了这个字段，例如`WHERE my_field='bla bla bla...'`：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:46:32.980

使用 MySQL 进行索引时，您需要考虑天气，您需要全文搜索。据我所知全文仅在 MyISAM 中可用。这将限制您使用您需要使用的数据库。[您可以在此处](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)找到有关这些全文搜索查询的所有信息。

当我们谈论诸如“bla bla bla”之类的字符串时，无论如何您都需要全文搜索，即 MyISAM 是您选择的数据库。

# jquery - Wijmo Grid 如何获取单元格 ID

> ID：13443869
> 
> 赞同：0
> 
> 时间：2012-11-18T19:42:30.810
> 
> 标签：jquery, jquery-ui, wijmo

我正在使用 wijmo 网格。在网格内，如果用户单击我想知道 id 字段的单元格。

即，如果标题详细信息是 id、name、surname、dob

当他们单击姓氏时，我需要能够检索 ID。有点垃圾的例子，但我还需要使用 selectionMode: "singleCell",

所以我不想只选择一个单元格的整行，而是能够检索该行中的其他单元格信息

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:24:18.680

您可以处理 onCurrentCellChanging 事件并获取所需列的值。

```
$("#gridview2").wijgrid({
   selectionMode: "singleCell",
   currentCellChanging: function (e, args) {
        $(this).wijgrid("data")[args.rowIndex][0];
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T21:22:36.523

尝试：

$("#gridElementId").wijgrid('currentCell')

它返回类型 $.wijmo.wijgrid.cellInfo 并表示网格的当前单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T13:07:03.277

最后我找到了这个，所以我将使用拆分函数来获取我需要的数据。

```
function onSelectionChanged() {
    var dataItem = $("#datatable table").wijgrid('currentCell').row().data;
//     alert(dataItem); 
```

# android - GCM Android：未调用 onRegistered()

> ID：13443871
> 
> 赞同：4
> 
> 时间：2012-11-18T19:42:33.727
> 
> 标签：android, notifications, google-cloud-messaging

我在 Android 上遇到 GCM 问题。它无法在`onRegistered()`我的一个测试设备（Droid2）上执行回调或返回一个好的 regId - 但它在另一台设备（Galaxy Nexus）上运行良好。

我在[这里](http://developer.android.com/guide/google/gcm/gs.html)遵循基本示例。调用者看起来像这样：

```
GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this);

final String regId = GCMRegistrar.getRegistrationId(this);

if (regId.equals(""))
    GCMRegistrar.register(this, Constants.SENDER_ID);
else
    Log.v(TAG, "Already registered"); 
```

我的清单有这个：

```
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" /> 
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.WAKE_LOCK" /> 
```

和

```
<receiver
    android:name="com.google.android.gcm.GCMBroadcastReceiver"
    android:permission="com.google.android.c2dm.permission.SEND" >
    <intent-filter>
        <action android:name="com.google.android.c2dm.intent.RECEIVE" />
        <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
        <category android:name="com.gcl.myapp" />
    </intent-filter>
</receiver> 
```

为什么`onRegistered()`回调不起作用？什么可能导致它在一台设备上工作，但在另一台设备上失败？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T19:48:09.517

如果它适用于某些设备但不适用于其他设备，那么它与以下之一有关：

*   在 Android 4.0.4 之前，该设备需要有效的 google 帐户才能工作。
*   GCM 仅适用于具有 Play Store App 和 API 8 及更高版本的设备。
*   您的清单格式错误 - 使用 Lint 检查！
*   设备/应用程序已注册，Play 实现可能不会再次返回。请先尝试`GCMRegistrar.unregister(this);`。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T13:46:54.727

我有同样的问题。如果您使用的是 AngularJS + IonicFramework，则不必这样做：

使用 onDeviceReady 函数创建工厂后，创建 onNotificationGCM 函数。像这样的东西：

```
app.factory('PushProcessingService', function () {
..

});

function onNotificationGCM(e) {
} 
```

我在工厂内创建 onNotificationGCM。这解决了我的问题。

# ios - 为 Phonegap / Cordova iphone 应用程序设置 CMS

> ID：13443874
> 
> 赞同：0
> 
> 时间：2012-11-18T19:42:38.420
> 
> 标签：ios, cordova, content-management-system, phonegap-plugins

使用 Phonegap / Cordova 制作 iphone 应用程序时，是否可以将基于 Web 的 CMS 附加到它，以从中提取数据，以便非技术用户可以更新应用程序？

通常你只是使用 html、css、jquery/js 构建它们，但我想知道是否有更简单的方法来更新它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:02:44.373

您应该研究静态站点生成器，而不是 CMS。我将 Jekyll 用于我所有的 PhoneGap 应用程序，包括让非技术用户更新内容的应用程序。

内容页面设置为带有 yaml 标头的降价文件 - 不像完整的 CMS 那样用户友好，但仍然很容易编辑。

我已将 jekyll 设置为构建步骤，因此作为单击构建过程的一部分，所有生成的 html 文件都会打包并部署到设备上。

您可以从基于 Web 的 CMS 导出静态 html，但是当您调试所有设计为仅在线工作的位时，这可能会比它所值得的麻烦更多。

直接从网络加载页面在技术上可以正常工作，但会遇到一些应用商店规则 - 没有重要的附加功能，没有离线访问并且可能下载可执行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:22:33.580

你可以在服务器上使用普通的 cms，比如网页，比如普通的 joomla wordpress 等。

然后将 url 添加到 phonegap 白名单并像普通的 phonegap html url 一样加载它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-31T19:26:34.263

借助[DrupalGap ，可以使用](http://drupalgap.org)[PhoneGap](http://phonegap.com)和[Drupal](http://drupal.org)支持的网站创建 iOS（和 Android 等）移动应用程序。

**什么是 Drupal？**

> Drupal 是一个开源内容管理平台，支持数百万个网站和应用程序。它由世界各地一个活跃且多元化的社区构建、使用和支持。

**为什么选择 Drupal？**

> 使用 Drupal 构建从个人博客到企业应用程序的所有内容。数以千计的附加模块和设计让您可以构建任何您可以想象的网站。

**什么是 DrupalGap？**

> DrupalGap 是 Drupal 网站的开源移动应用程序开发工具包。它使用 Drupal、PhoneGap、jQuery Mobile 和 jDrupal。
> 
> 使用 DrupalGap 移动应用程序开发工具包和 API，开发人员可以创建与 Drupal 网站通信的自定义多平台移动应用程序。

**有用的网址**

*   [DrupalGap 入门指南](http://drupalgap.org/get-started)
*   [GitHub 上的 DrupalGap SDK](https://github.com/signalpoint/DrupalGap)

# jsf - 为什么我的富人：日历不起作用？

> ID：13443888
> 
> 赞同：2
> 
> 时间：2012-11-18T19:44:38.097
> 
> 标签：jsf, calendar, richfaces

我想在我的 xhtml 网站上显示一个 rich:calendar。这是我的代码。我不明白为什么它不起作用（该代码不显示日历）。我没有收到任何错误，日历没有出现。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
>

<f:view>
    <h:head>
        <title>Title</title>
    </h:head>
    <h:body>
        <h:panelGrid columns="2" styleClass="center">
            <h:outputText value="Date from" />
            <rich:calendar id="calendar_from" datePattern="d/M/yy HH:mm" value="18/11/12 09:00" popup="true" locale="de/DE" />
        </h:panelGrid>
    </h:body>
</f:view>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:37:18.853

确保richfaces jar在`classpath`...

# c# - 将 dll 库从资源加载到当前域（在主 exe 文件中嵌入 dll）

> ID：13443890
> 
> 赞同：1
> 
> 时间：2012-11-18T19:44:46.083
> 
> 标签：c#, dll, byte, exe

我正在尝试使用以下代码在运行时加载 dll 库，这样我就不必向用户提供大量 dll 文件以及主可执行文件。我已将所有 dll 文件作为嵌入式资源包含在内，并且在参考部分中我已包含它们并将**CopyLocal**属性设置为 false。但这里的问题是：
1\. 所有 dll 都被复制到 Bin\Debug 文件夹
2\. 我得到**FileNotFoundException**。
我做了很多搜索来解决这些问题，最后我在这里。我在[这里](https://stackoverflow.com/questions/9611154/assemblyresolve-event-fires-when-calling-assembly-loadbyte/13440474#13440474)得到了类似的代码，但仍然无能为力。我应该怎么做才能防止这种异常......？？有没有更好的方法来为**Windows 窗体应用程序（不是 WPF）做同样的事情**...??

```
using System;
using System.Linq;
using System.Windows.Forms;
using System.Diagnostics;
using System.Reflection;
using System.Collections.Generic;
using System.IO;

namespace MyNameSpace
{
    static class Program
    {
        static int cnt;
        static IDictionary<string, Assembly> assemblyDictionary;
        [STAThread]
        static void Main()
        {
            AppDomain.CurrentDomain.AssemblyResolve += OnResolveAssembly;
            if (cnt != 1)
            {
                cnt = 1;
                Assembly executingAssembly = Assembly.GetExecutingAssembly();
                string[] resources = executingAssembly.GetManifestResourceNames();
                foreach (string resource in resources)
                {
                    if (resource.EndsWith(".dll"))
                    {
                        using (Stream stream = executingAssembly.GetManifestResourceStream(resource))
                        {
                            if (stream == null)
                                continue;

                            byte[] assemblyRawBytes = new byte[stream.Length];
                            stream.Read(assemblyRawBytes, 0, assemblyRawBytes.Length);
                            try
                            {
                                assemblyDictionary.Add(resource, Assembly.Load(assemblyRawBytes));
                            }
                            catch (Exception ex)
                            {
                                MessageBox.Show("Failed to load: " + resource + " Exception: " + ex.Message);
                            }
                        }
                    }
                }
                Program.Main();
            }
            if (cnt == 1)
            {
                cnt = 2;
                System.Threading.Thread.CurrentThread.Priority = System.Threading.ThreadPriority.Highest;
                Application.ThreadException += new System.Threading.ThreadExceptionEventHandler(Application_ThreadException);
                Application.ApplicationExit += new EventHandler(Application_ApplicationExit);
                Application.EnableVisualStyles();
                Application.SetCompatibleTextRenderingDefault(false);
                Application.Run(new MainForm());
            }
        }

        private static Assembly OnResolveAssembly(object sender, ResolveEventArgs args)
        {            
            AssemblyName assemblyName = new AssemblyName(args.Name);

            string path = assemblyName.Name + ".dll";

            if (assemblyDictionary.ContainsKey(path))
            {
                return assemblyDictionary[path];
            }
            return null;
        }
    }
} 
```

如果我在我的代码中使用了不必要的东西，那么您可以向我展示正确的方法......我是一名学生，正在研究**Windows Form Application v4.0**项目，以便提交我的论文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-17T00:54:06.803

如果仍然是*必须*执行此操作的情况，请使用此 OnResolveAssembly 方法。如果您不想，则无需将它们预加载到数组中。这将在第一次真正需要它们时加载它们。

然后只是：

*   将**some.assembly.dll**文件添加到项目中。
*   *   可能不是对项目输出的引用
*   *   但该文件是 DLL 项目的结果。
*   在文件属性中将其标记为**资源**。

    ```
    // This function is not called if the Assembly is already previously loaded into memory.
    // This function is not called if the Assembly is already in the same folder as the app.
    //
    private static Assembly OnResolveAssembly(object sender, ResolveEventArgs e)
    {
        var thisAssembly = Assembly.GetExecutingAssembly();

        // Get the Name of the AssemblyFile
        var assemblyName = new AssemblyName(e.Name);
        var dllName = assemblyName.Name + ".dll";

        // Load from Embedded Resources
        var resources = thisAssembly.GetManifestResourceNames().Where(s => s.EndsWith(dllName));
        if (resources.Any())
        {
            // 99% of cases will only have one matching item, but if you don't,
            // you will have to change the logic to handle those cases.
            var resourceName = resources.First();
            using (var stream = thisAssembly.GetManifestResourceStream(resourceName))
            {
                if (stream == null) return null;
                var block = new byte[stream.Length];

                // Safely try to load the assembly.
                try
                {
                    stream.Read(block, 0, block.Length);
                    return Assembly.Load(block);
                }
                catch (IOException)
                {
                    return null;
                }
                catch (BadImageFormatException)
                {
                    return null;
                }
            }
        }

        // in the case the resource doesn't exist, return null.
        return null;
    } 
    ```

-杰西

PS：这来自[http://www.paulrohde.com/merging-a-wpf-application-into-a-single-exe/](http://www.paulrohde.com/merging-a-wpf-application-into-a-single-exe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T09:11:19.757

尝试以下操作：

*   对于每个 .dll 资源：
    *   如果文件已经存在`AppDomain.Current.BaseDirectory`然后继续下一个资源
    *   否则将资源保存到`AppDomain.Current.BaseDirectory`. 在 try-catch 中执行此操作，如果失败，请通知用户。要成功完成此步骤，您需要对安装文件夹（通常是“Program Files”的子文件夹）具有写入权限。这将通过第一次以管理员身份运行程序来解决，仅将文件写入文件系统。
*   如果程序集被您的 VS 项目引用，那么您不必自己加载它们。要了解这项工作的原因，您需要了解[CLR 如何定位程序集](http://msdn.microsoft.com/en-us/library/yx7xezcf%28v=vs.110%29.aspx)。
*   否则，您将需要使用以 a或 and作为参数的[Assembly.Load之一自己加载每个程序集。](http://msdn.microsoft.com/en-us/library/3te3zcz1.aspx)`string``AssemblyName`

# php - 怎么写 '？' 在.htaccess

> ID：13443895
> 
> 赞同：0
> 
> 时间：2012-11-18T19:45:00.970
> 
> 标签：php, .htaccess

我希望使用 .htaccess 转发一个 url

```
categoryname?page=23&sort=alpha to category.php?name=catgoryname&page=23&sort=alpha 
```

但我无法使用 charachter 编写 rewriteRule `?`，我尝试使用`\?`但总是出现一些问题它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:49:17.843

查询字符串必须在 中匹配`RewriteCond`，而不是在`RewriteRule`. 然后使用将现有查询字符串与新参数`[QSA]`一起附加到重写的请求上。`name=`

```
RewriteEngine On
# If both page=, sort= *must* be present
RewriteCond %{QUERY_STRING} page=(\d+)
RewriteCond %{QUERY_STRING} sort=([a-z]+)
# Rewrite categoryname (or other string) into category.php
RewriteRule ^(.+) category.php?name=$1 [L,QSA] 
```

仅当两者都存在时，上述规则*才会*匹配。如果他们不需要在场来重写，那么这两个可以省略。`page=``sort=``categoryname``RewriteCond`

```
# If the page= and sort= are not *required*, omit them.
RewriteEngine On
# Rewrite categoryname (or other string) into category.php
RewriteRule ^(.+) category.php?name=$1 [L,QSA] 
```

# android - Android SDK r21 - Ubuntu 12.10 LTS 上的 AVD 管理器

> ID：13443897
> 
> 赞同：2
> 
> 时间：2012-11-18T19:45:19.773
> 
> 标签：android, ubuntu, sdk

我刚刚按照以下示例在我的 Ubuntu 设备上安装了 Android SDK：
[http ://www.liberiangeek.net/2012/07/download-and-install-androidsdk-in-ubuntu-12-04-precise-pangolin/](http://www.liberiangeek.net/2012/07/download-and-install-androidsdk-in-ubuntu-12-04-precise-pangolin/)

该示例适用于 Android SDK 版本 r20，但我将版本设置为 r21，因为这是最新版本。我在那里没有问题。我更新了 SDK 并下载了开发应用程序所需的所有平台。

但是在示例的最后，它说要`android`在终端中输入，并且该命令应该同时打开 SDK 管理器和 AVD 管理器。但是，它只打开 SDK 管理器，我似乎不知道如何使用该命令打开 AVD 管理器。

有没有办法设置 PATH 变量，以便它同时打开 SDK 管理器和 AVD 管理器？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-18T19:54:17.647

用于`android avd`打开 AVD 管理器。

# jquery - 带有多个参数的 tocify 和 url

> ID：13443898
> 
> 赞同：0
> 
> 时间：2012-11-18T19:45:20.097
> 
> 标签：jquery, url, tableofcontents, jquery-tocify-js

我正在使用[Tocify](http://gregfranko.com/jquery.tocify.js)为我网站上的某些内容制作目录。假设我的站点被调用`www.example.com`并且我单击了我的目录中的一个元素。Tocify 的默认选项是将我的网址更改为`www.example.com?elementclicked`

但我的网站是`www.mysite.com/index.php?page=folder/test/ShowSite&tabid=1&site_id=87`. 如果我单击一个元素，它会将 url 更改为`www.mysite.com?elementClicked`. 我怎样才能让它改变链接`www.mysite.com/index.php?page=folder/test/ShowSite&tabid=1&site_id=87?elementClicked`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:15:10.167

我编写了 Tocify 并刚刚将[Tocify](https://github.com/gfranko/jquery.tocify.js)更新到 v1.1.0，它不再使用 History.js 或 HTML5 推送状态 API 进行历史管理。相反，使用哈希（这应该可以解决您的问题）。请获取最新的 Tocify 代码，如果您有任何其他问题，请告诉我。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:03:36.233

附加当前 URL 将自动导致页面重新加载。这可能可以通过阻止页面自动加载来调整，但`?elementClicked`您可以添加而不是添加`#elementClicked`...

```
window.location.hash = 'elementClicked'; 
```

# google-maps - 从 Google 地图下载完整的 KML

> ID：13443910
> 
> 赞同：0
> 
> 时间：2012-11-18T19:46:53.163
> 
> 标签：google-maps, kml

我有大约 1200 点的谷歌地图。当我尝试将其保存为 KML 或在 Google 地球中查看时，只有 1000 点。有没有办法（例如使用某些 API）下载所有点（我不需要 KML - 我只想要带有描述的坐标 - 它可能是其他格式）？

地图可以在[这里](https://maps.google.pl/maps/ms?gl=pl&ie=UTF8&oe=UTF8&t=h&msa=0&msid=100018433497764191308.00046d8bb0be901189fde)找到。当您保存 KML 时，第 6 页将没有积分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T02:46:48.003

显然，从“我的地图”导出的功能限制为 1000：

[限制](https://sites.google.com/site/gmapstips/alternative-to-paging-on-my-maps)

> #4。单个“我的地图”导出有 1,000 个要素限制，显示 KML 时大约有 1,000 个要素限制 - 因此大型地图不会特别受益于此技巧。仅前 1000 个点/线/特征不会显示错误。

请参阅谷歌地图产品论坛上的[这篇文章](http://productforums.google.com/forum/#!topic/maps/glC0lxDsZ64)以了解导出所有点的解决方法，如果您需要在地图上显示更多点（听起来您不需要显示它们），Barry Hunter 还建议（我同意）使用 FustionTables在地图上，只需从地图中检索数据）。

似乎工作，[这](https://maps.google.pl/maps?q=http%3a%2F%2Fwww.geocodezip.com%2Fgeoxml3_test%2FHydranty_big_kml.xml&hl=pl&sll=53.192665,15.445061&sspn=0.091945,0.338173&t=h&gl=pl&z=10)是显示在谷歌地图上的组合文件（上升到 1193）

[geoxml3](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/Hydranty_big_kml.xml)报告 1197：geoXmlDoc：对象-> 地标：数组 [1197]

# .net - 试图从屏幕坐标中获取像素颜色，无法调用我的函数

> ID：13443913
> 
> 赞同：0
> 
> 时间：2012-11-18T19:46:59.593
> 
> 标签：.net, vb.net, winforms, visual-studio-2010

我正在尝试获取设置屏幕坐标的像素颜色。我找到了一个函数，由于某种原因我不能调用它。我将它放入一个新类中，我试图从我的主窗体中调用它，尽管它无法识别该函数。它是一个公共类和一个公共函数，所以我不知道为什么。谢谢。

```
 #Region "#include"
    Imports System
    Imports System.Drawing
    Imports System.Runtime.InteropServices
    #End Region
    Public Class Test

    #Region "From Windows API"
    <DllImport("user32.dll", SetLastError:=True)> _
    Public Shared Function GetWindowDC(ByVal hwnd As IntPtr) As IntPtr
   'Do not try to name this method "GetDC" it will say that user32 doesnt have GetDC !!!
End Function

<DllImport("user32.dll", SetLastError:=True)> _
Public Shared Function ReleaseDC(ByVal hwnd As IntPtr, ByVal hdc As IntPtr) As Int32

End Function

<DllImport("gdi32.dll", SetLastError:=True)> _
Public Shared Function GetPixel(ByVal hdc As IntPtr, ByVal nXPos As Integer, ByVal nYPos As Integer) As UInteger

End Function
#End Region
REM --Test--
#Region "Some Functions"
Public Function GetPixelColor(ByVal x As Integer, ByVal y As Integer) As Color
    Dim hdc As IntPtr = GetWindowDC(IntPtr.Zero)
    Dim pixel As UInteger = GetPixel(hdc, x, y)
    Dim color As Color
    ReleaseDC(IntPtr.Zero, hdc)
    MsgBox(pixel)
    color = color.FromArgb(Int(pixel And &HFF), _
    Int(pixel And &HFF00) >> 8, _
    Int(pixel And &HFF0000) >> 16)
    Return color
End Function
#End Region
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T22:31:21.233

要回答您的问题，您需要创建该类的一个实例：

```
Dim t As New Test
Dim pc As Color = t.GetPixelColor(20, 20) 
```

或者将该函数设为公共共享函数，那么您将不需要测试实例：

```
Dim pc As Color = test.GetPixelColor(20, 20) 
```

或者，您可以只截屏并使用内置的[bitmap.GetPixel](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.getpixel.aspx)并一起避免该类：

```
 Dim screenSize As Size = New Size(My.Computer.Screen.Bounds.Width, My.Computer.Screen.Bounds.Height)

    Using screenGrab As New Bitmap(My.Computer.Screen.Bounds.Width, My.Computer.Screen.Bounds.Height)

        Using g As Graphics = Graphics.FromImage(screenGrab)

            g.CopyFromScreen(New Point(0, 0), New Point(0, 0), screenSize)

            Dim pc As Color = screenGrab.GetPixel(20, 20)
        End Using

    End Using 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-31T23:29:18.760

```
Public Class Form1
    Declare Function GetPixel Lib "gdi32" Alias "GetPixel" (ByVal hdc As Long, ByVal x As Long, ByVal y As Long) As Long
    Declare Function GetDesktopWindow Lib "user32" Alias "GetDesktopWindow" () As Long
    Declare Function GetWindowDC Lib "user32" Alias "GetWindowDC" (ByVal hwnd As Long) As Long

    Public Function GetPixelColor(ByVal x As Long, ByVal y As Long)
        GetPixelColor = GetPixel(GetWindowDC(GetDesktopWindow), x, y)
    End Function

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        'This is how often the timer refreshes in MILLISECONDS - i.e. 1000 = 1 second
        Timer1.Interval = 2  
        Timer1.Start()
    End Sub

    Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
        Dim ScreenX As Integer
        Dim ScreenY As Integer
        Dim bm As Bitmap

        ' ScreenX = My.Computer.Screen.Bounds.Width     Use this code instead, to capture the WHOLE SCREEN
        ' ScreenY = My.Computer.Screen.Bounds.Height    Use this code instead, to capture the WHOLE SCREEN
        'This code captures a CROPPED SECTION OF THE SCREEN - X COORDINATE
        ScreenX = 460
        'This code captures a CROPPED SECTION OF THE SCREEN - X COORDINATE
        ScreenY = 80
        bm = New Bitmap(ScreenX, ScreenY)

        Using gr As Graphics = Graphics.FromImage(bm)
            gr.CopyFromScreen( _
                Screen.PrimaryScreen.Bounds.X, _
                Screen.PrimaryScreen.Bounds.Y, _
                0, 0, _
                Screen.PrimaryScreen.Bounds.Size, _
                CopyPixelOperation.SourceCopy)
        End Using

        'This is where you tell it WHAT PIXEL to check
        Dim pixelColor As Color = bm.GetPixel(450, 75)  
        PictureBox1.BackColor = pixelColor
        TextBox1.Text = PictureBox1.BackColor.Name
    End Sub
End Class 
```

# javascript - 获取所有图像尺寸 flickr api

> ID：13443915
> 
> 赞同：4
> 
> 时间：2012-11-18T19:47:07.867
> 
> 标签：javascript, json, flickr

我想获取单个 flickr 图像的所有图像大小的列表，并且我需要能够获取调整大小的图像的 url，全部为 json 格式。

我想得到这样的东西

```
[
 {width:200,height:200,url:"http://flickr.com/200ximage.jpg"}
,{width:400,height:400,url:"http://flickr.com/400ximage.jpg"}
,{width:600,height:600,url:"http://flickr.com/600ximage.jpg"}
,{width:800,height:800,url:"http://flickr.com/800ximage.jpg"}
] 
```

如何构造网址？我在任何地方都找不到任何可理解的指南！！！！

这是一个响应式图像脚本顺便说一句

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T19:52:17.950

尝试：

```
flickr.photos.getSizes 
```

[http://www.flickr.com/services/api/flickr.photos.getSizes.html](http://www.flickr.com/services/api/flickr.photos.getSizes.html)

返回照片的可用尺寸。主叫用户必须有权查看照片。验证

此方法不需要身份验证。

论据

api_key（必需）您的 API 应用程序密钥。有关更多详细信息，请参见此处。

photo_id （必需）要为其获取尺寸信息的照片的 ID。

示例响应

```
<sizes canblog="1" canprint="1" candownload="1">
  <size label="Square" width="75" height="75" source="http://farm2.staticflickr.com/1103/567229075_2cf8456f01_s.jpg" url="http://www.flickr.com/photos/stewart/567229075/sizes/sq/" media="photo" />
  <size label="Large Square" width="150" height="150" source="http://farm2.staticflickr.com/1103/567229075_2cf8456f01_q.jpg" url="http://www.flickr.com/photos/stewart/567229075/sizes/q/" media="photo" />
  <size label="Thumbnail" width="100" height="75" source="http://farm2.staticflickr.com/1103/567229075_2cf8456f01_t.jpg" url="http://www.flickr.com/photos/stewart/567229075/sizes/t/" media="photo" />
  <size label="Small" width="240" height="180" source="http://farm2.staticflickr.com/1103/567229075_2cf8456f01_m.jpg" url="http://www.flickr.com/photos/stewart/567229075/sizes/s/" media="photo" />
  <size label="Small 320" width="320" height="240" source="http://farm2.staticflickr.com/1103/567229075_2cf8456f01_n.jpg" url="http://www.flickr.com/photos/stewart/567229075/sizes/n/" media="photo" />
  <size label="Medium" width="500" height="375" source="http://farm2.staticflickr.com/1103/567229075_2cf8456f01.jpg" url="http://www.flickr.com/photos/stewart/567229075/sizes/m/" media="photo" />
  <size label="Medium 640" width="640" height="480" source="http://farm2.staticflickr.com/1103/567229075_2cf8456f01_z.jpg?zz=1" url="http://www.flickr.com/photos/stewart/567229075/sizes/z/" media="photo" />
  <size label="Medium 800" width="800" height="600" source="http://farm2.staticflickr.com/1103/567229075_2cf8456f01_c.jpg" url="http://www.flickr.com/photos/stewart/567229075/sizes/c/" media="photo" />
  <size label="Large" width="1024" height="768" source="http://farm2.staticflickr.com/1103/567229075_2cf8456f01_b.jpg" url="http://www.flickr.com/photos/stewart/567229075/sizes/l/" media="photo" />
  <size label="Original" width="2400" height="1800" source="http://farm2.staticflickr.com/1103/567229075_6dc09dc6da_o.jpg" url="http://www.flickr.com/photos/stewart/567229075/sizes/o/" media="photo" />
</sizes> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-09T09:19:56.740

你知道任何可以从 Flickr @william malo 收集原始尺寸图像的方法或源代码吗？

# oracle - Oracle 触发器更新后返回

> ID：13443918
> 
> 赞同：0
> 
> 时间：2012-11-18T19:47:21.110
> 
> 标签：oracle, join, plsql, triggers

我正在尝试为 Invoices 表创建一个名为 invoices_after_update_payment 的触发器，只要付款总额增加，它就会在输出窗口中显示供应商名称、发票编号和付款总额。

这是我第一次使用触发器，我得到的只是错误 ![在此处输入图像描述](../Images/b9cfb610850c4b573571fbb3c4e8d023.png)

```
create or replace trigger invoices_after_update_payment
after update
on invoices
for each row
when (new.payment_total > old.payment_total)
declare
vendor_name_var    vendors%rowtype%;
Begin
Select v.vendor_name, i.invoice_number, i.payment_total
into vendor_name_var, :new.invoice_number, :new.payment_total
from Vendors v
inner join Invoices i
on v.vendor_id = i.vendor_id
where i.vendor_id = :new.vendor_id
dbms_output.put_line(vendor_name_var || :new.invoice_number || :new.payment_total);
end;
/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:52:09.497

用分号结束这一行  `where i.vendor_id = :new.vendor_id;` 并编译以查看是否有任何错误。

# iphone - Restkit 中的第二个请求未加载对象

> ID：13443919
> 
> 赞同：2
> 
> 时间：2012-11-18T19:47:23.993
> 
> 标签：iphone, objective-c, ios, restkit, objective-c-blocks

我正在使用 Restkit 同时发送 2 个请求，并且我收到了来自它们的响应，但只有一个请求接收到任何对象。如果我将它们一一发送，那么我的 objectloader 会收到所有对象。

**第一个请求：**

```
self.firstObjectManager = [RKObjectManager sharedManager];
[self.firstObjectManager loadObjectsAtResourcePath:[NSString stringWithFormat: @"/%@.json", subUrl] usingBlock:^(RKObjectLoader *loader){
    [loader.mappingProvider setObjectMapping:designArrayMapping forKeyPath:@""];
    loader.userData = @"design";
    loader.delegate = self;
    [loader sendAsynchronously];
}]; 
```

**第二个请求：**

```
self.secondObjectManager = [RKObjectManager sharedManager];
[self.secondObjectManager loadObjectsAtResourcePath:[NSString stringWithFormat: @"/%@.json", subUrl] usingBlock:^(RKObjectLoader *loader){
    [loader.mappingProvider setObjectMapping:designerMapping forKeyPath:@""];
    loader.userData = @"designer";
    loader.delegate = self;
    [loader sendAsynchronously];
}]; 
```

**我的对象加载器：**

```
-(void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects
{
    //NSLog(@"This happened: %@", objectLoader.userData);
    if (objectLoader.userData == @"design") {
        NSLog(@"Design happened: %i", objects.count);
    }else if(objectLoader.userData == @"designer"){
        NSLog(@"designer: %@", [objects objectAtIndex:0]);
    }

} 
```

**我的回复：**

```
2012-11-18 14:36:19.607 RestKitTest5[14220:c07] Started loading of request: designer
2012-11-18 14:36:22.575 RestKitTest5[14220:c07] I restkit.network:RKRequest.m:680:-[RKRequest updateInternalCacheDate] Updating cache date for request <RKObjectLoader: 0x95c3160> to 2012-11-18 19:36:22 +0000
2012-11-18 14:36:22.576 RestKitTest5[14220:c07] response code: 200
2012-11-18 14:36:22.584 RestKitTest5[14220:c07] Design happened: 0
2012-11-18 14:36:22.603 RestKitTest5[14220:c07] I restkit.network:RKRequest.m:680:-[RKRequest updateInternalCacheDate] Updating cache date for request <RKObjectLoader: 0xa589b50> to 2012-11-18 19:36:22 +0000
2012-11-18 14:36:22.605 RestKitTest5[14220:c07] response code: 200
2012-11-18 14:36:22.606 RestKitTest5[14220:c07] designer: <DesignerData: 0xa269fc0> 
```

**更新：设置我的基本网址**

```
RKURL *baseURL = [RKURL URLWithBaseURLString:@"http://iphone.meer.li"];
[RKObjectManager setSharedManager:[RKObjectManager managerWithBaseURL:baseURL]]; 
```

**解决方案**

问题是我对两个对象管理器都使用了共享管理器，所以我最终做了：

```
RKURL *baseURL = [RKURL URLWithBaseURLString:@"http://iphone.meer.li"];
RKObjectManager *myObjectManager = [[RKObjectManager alloc] initWithBaseURL:baseURL];
self.firstObjectManager = myObjectManager; 
```

和：

```
RKURL *baseURL = [RKURL URLWithBaseURLString:@"http://iphone.meer.li"];
RKObjectManager *myObjectManager = [[RKObjectManager alloc] initWithBaseURL:baseURL];
self.secondObjectManager = myObjectManager; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:21:56.743

使用块语法进行加载，

```
self.secondObjectManager = [RKObjectManager sharedManager];
[self.secondObjectManager loadObjectsAtResourcePath:[NSString stringWithFormat: @"/%@.json", subUrl] usingBlock:^(RKObjectLoader *loader){
    [loader.mappingProvider setObjectMapping:designerMapping forKeyPath:@""];
    loader.userData = @"designer";
     loader.onDidLoadObjects = ^(NSArray *objects){
         NSLog(@"Loaded objects %@", objects);
      };
     loader.onDidFailedWithError = ^(NSError *error){
        NSLog(@"Failed with error %@", error.userInfo);
   }
}]; 
```

**编辑**

使用您自己的对象管理器并保留它，然后以这种方式使用它，

不要使用 sharedManager 而不是 alloc/init 它并提供它 objectstore 并查看。希望这对你有帮助，

```
[self.objectManager loadObjectsAtResourcePath:resourcePath usingBlock:^(RKObjectLoader *loader){
        [loader.mappingProvider setMapping:[MyClass mapping] forKeyPath:@""];
        loader.onDidLoadObjects = ^(NSArray *objects){

        };
        loader.onDidLoadResponse = ^(RKResponse *response){
            NSLog(@"Loaded response %@", response.bodyAsString);
        };
        loader.onDidFailLoadWithError = ^(NSError *error){
            NSLog(@"Error occurred ... %@", error.userInfo);

        };
    }]; 
```

# jquery - 使用一些标准对表进行排序

> ID：13443920
> 
> 赞同：0
> 
> 时间：2012-11-18T19:47:26.097
> 
> 标签：jquery, datatables

JQuery 的[DataTables](http://datatables.net/)的文档很差。很抱歉可能是微不足道的问题。

我想通过某些列上的某些字符串过滤我的表。这是我的代码：

```
var str = "days";
my_table.fnFilter(str, 9); 
```

我希望在 9 列（从 0 开始计数）中只有包含“days”字符串的行。但上面的代码并没有给我带来结果

我曾尝试将此代码与 RexEx 一起使用：

```
var regEx = "days"; 
my_table.fnFilter(regEx, 9, true); 
```

这段代码：

```
var regEx = "^days$";
my_table.fnFilter(regEx, 9, true); 
```

这个代码：

```
var regEx = ".*days.*";
my_table.fnFilter(regEx, 9, true); 
```

一切都没有运气。我确定我的表在第 9 列有**“101 天”**字符串。我究竟做错了什么？

**更新：**我的专栏有自定义类型：

```
jQuery.fn.dataTableExt.oSort['days-asc'] = function (a, b) {
    var x = parseInt((trim(a) == "") ? 0 : trim(a.replace(/days/, "")));
    var y = parseInt((trim(b) == "") ? 0 : trim(b.replace(/days/, "")));
    return ((x < y) ? -1 : ((x > y) ? 1 : 0));
};

jQuery.fn.dataTableExt.oSort['days-desc'] = function (a, b) {
    var x = parseInt((trim(a) == "") ? 0 : trim(a.replace(/days/, "")));
    var y = parseInt((trim(b) == "") ? 0 : trim(b.replace(/days/, "")));
    return ((x < y) ? 1 : ((x > y) ? -1 : 0));
}; 
```

**更新 2：** 我的表初始化*选项*：

```
 $.my_table = $("#myTable").dataTable({
    "iDisplayLength": 10,
    "bStateSave": false,
    "bFilter": true,
    "bSort": true,
    "bAutoWidth": false,
    "oLanguage": {
        "sLengthMenu": sStdMenu + " per page"
    },
    "sPaginationType": "full_numbers",
    "sDom": 'rti<"bottom2"p><"bottom1"l',
    "aaSorting": [
        [0,'asc']
    ],
    "aoColumns": [
        { "sType": "html-trimmed" },
        { "sType": "date-direct" },
        { "sType": "date-direct" },
        { "sType": "html" },
        { "sType": "percent" },
        { "sType": "money" },
        { "sType": "money" },
        { "sType": "money" },
        { "sType": "days" },            
        { "sType": "days" },
        { "sType": "days" },
        { "sType": "days" },
        { "sType": "days" },
        { "sType": "days" },
        { "sType": "html" },
        { "sType": "html" },
        null,
        null,
        null
    ]

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T13:32:50.450

我看不出您的初始化代码或`fnFilter`函数的语法有什么问题。如果有帮助，这里有一个完整的`fnFilter`函数示例，所有参数都设置为默认值（`filterString`和除外`column`）：

```
$(document).ready(function () {
    'use strict';
    var my_table = $('#example').dataTable(),
        filterDataTable = function filterDataTable() {
            var filterString = 'days',
                column = 9,
                treatAsRegex = false,
                smartFiltering = true,
                showFilter = true,
                caseInsensitive = true;
            my_table.fnFilter(filterString, column, treatAsRegex, smartFiltering, showFilter, caseInsensitive);
        };
    $('#someElement').click(function (e) {
        filterDataTable();
        e.preventDefault();
        return false;
    });
}); 
```

此外，在完全不相关的注释中，您的排序功能可以简化为：

```
jQuery.fn.dataTableExt.oSort['days-asc'] = function (a, b) {
    var x = parseInt(a, 10) || 0,
        y = parseInt(b, 10) || 0;
    return x - y;
};
jQuery.fn.dataTableExt.oSort['days-desc'] = function (a, b) {
    var x = parseInt(a, 10) || 0,
        y = parseInt(b, 10) || 0;
    return y - x;
}; 
```

# sockets - 当 ICMP 目标不可达数据包到达时，recv 上的 errno 90 消息太长

> ID：13443923
> 
> 赞同：1
> 
> 时间：2012-11-18T19:47:39.583
> 
> 标签：sockets, recv, icmp

我正在从具有 recv 功能的套接字读取数据，并在收到 ICMP 目标不可达数据包时不断出错。我真的不知道问题出在哪里。我尝试将套接字设置为不同的选项，但它们都不适合我。我使用RAW套接字。

这是我的setsockopt：

```
setsockopt(sock, IPPROTO_IP, IP_HDRINCL, (char *)&optval, sizeof(optval)) 
```

optval 设置为 1

这是我的recv：

```
 // read response from socket
    if ((len = recv(sock, buffer, BUFFER_MAX, 0)) == -1) 
      fprintf(stderr,"Error with reading data - %d\n",errno); 
```

BUFFER_MAX 定义为 65536

如果有人遇到过类似的问题，请您解释一下，在尝试接收 ICMP dest 时总是出现 errno 代码 90。无法访问的数据包？ECHO 回复工作正常。

# ruby - 在 EventMachine 循环之外发送

> ID：13443926
> 
> 赞同：0
> 
> 时间：2012-11-18T19:48:42.027
> 
> 标签：ruby, websocket, eventmachine

我正在使用`em-ws-client`gem，尽管我认为我的问题比这更笼统。我正在尝试从 EventMachine 接收块外部发送数据，但是发送数据需要很长时间（~20s）：

```
require "em-ws-client"

m = Mutex.new
c = ConditionVariable.new

Thread.new do
  EM.run do
    @ws = EM::WebSocketClient.new("ws://echo.websocket.org")

    @ws.onopen do
      puts "connected"
      m.synchronize { c.broadcast }
    end

    @ws.onmessage do |msg, binary|
      puts msg
    end
  end
end

m.synchronize { c.wait(m) }

@ws.send_message "test"

sleep 100 
```

当我将其`@ws.send_message "test"`直接放入`onopen`方法中时，它工作得很好。我不明白为什么我的版本不起作用。我在 EventMachine 中发现[了这个问题](https://github.com/eventmachine/eventmachine/issues/374)，但我不确定它是否相关。

为什么需要这么长时间，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:07:58.810

EventMachine 是严格的单线程，不建议在线程之间共享套接字。您可能会在这里看到一个问题，即主 EventMachine 线程不知道您已经提交了一个`send_message`调用并将其缓冲了很长一段时间。

在使用带有 EventMachine 的线程时，我会非常非常小心。如果您遇到线程计时或同步问题，我已经看到它发生故障并崩溃。

# java - 将返回按钮/主页功能和外部浏览器添加到 Android 应用程序 WebView

> ID：13443928
> 
> 赞同：1
> 
> 时间：2012-11-18T19:49:15.827
> 
> 标签：java, android, xml, webview

我已经尝试了很多事情，并且在我的 Android 应用程序上不断收到崩溃错误。我的应用程序是一个使用 webview 功能的简单 webwrapper 应用程序。基本上，我有 webview 显示一个有移动网站的网站。我想做的是让它

1.  后退按钮将带用户返回上一个屏幕
2.  应用程序上的后退按钮（我放在布局中）也会将用户带到上一个屏幕。
3.  我还希望手机上的主页按钮返回主屏幕并完全退出应用程序。
4.  最后，移动应用程序的外部链接应该进入浏览器而不是留在应用程序中（例如：访问完整站点）。

以下是我的代码，任何对 1-4 个问题的帮助都会有所帮助！:-)！如果您需要查看我的 XML，请不要犹豫。

```
package com.example.envision;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.net.Uri;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.View;
import android.webkit.DownloadListener;
import android.webkit.WebSettings;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.ImageView;
import android.widget.ProgressBar;

public class Envision extends Activity {
/** back button functionality NOT WORKING CAUSES A CRASH
WebView webview;
@Override
   public boolean onKeyDown(int keyCode, KeyEvent event) {
        if(event.getAction() == KeyEvent.ACTION_DOWN) {
            switch(keyCode)
            {
            case KeyEvent.KEYCODE_BACK:
                if(webview.canGoBack() == true){
                    webview.goBack();
                } else {
                    finish();
                }
                return true;
            }
        }
        return super.onKeyDown(keyCode, event);
    } */

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_envision);

WebView webview = (WebView) findViewById(R.id.webView1);

WebSettings websettings = webview.getSettings();

websettings.setJavaScriptEnabled(true);
websettings.setSaveFormData(false);
websettings.setSavePassword(false);

webview.loadUrl("http://envisionfinancial.ca/m/");
webview.setHorizontalScrollBarEnabled(false);
webview.setScrollBarStyle(View.SCROLLBARS_OUTSIDE_OVERLAY);
webview.setBackgroundColor(128);

webview.setWebViewClient(new EnvisionWebViewClient());

webview.setDownloadListener(new DownloadListener() {
    public void onDownloadStart(String url, String userAgent,
            String contentDisposition, String mimetype,
            long contentLength) {
        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setData(Uri.parse(url));
        startActivity(intent);
        }

});

}

public void visible(){

WebView webview = (WebView) findViewById(R.id.webView1);

ImageView logo = (ImageView) findViewById(R.id.imageView1);

ProgressBar bar = (ProgressBar) findViewById(R.id.progressBar1);

webview.setVisibility(10);

logo.setVisibility(0);

bar.setVisibility(0);

}

public void unvisible(){

WebView webview = (WebView) findViewById(R.id.webView1);

ImageView logo = (ImageView) findViewById(R.id.imageView1);

ProgressBar bar = (ProgressBar) findViewById(R.id.progressBar1);

webview.setVisibility(0);

logo.setVisibility(10);

bar.setVisibility(10);

}

private class EnvisionWebViewClient extends WebViewClient {
@Override
public boolean shouldOverrideUrlLoading(WebView webview, String url){
    webview.loadUrl(url);
    return true;
}

@Override
public void onReceivedError(WebView view, int errorCode,
    String description, String failingUrl) {
// TODO Auto-generated method stub
view.loadUrl("http://envisionfinancial.ca/m/");
}

@Override
public void onPageStarted(WebView view, String url, Bitmap favicon) {

visible();

}

@Override
public void onPageFinished(WebView view, String url) {

unvisible();

}

}
/** exits the app?? review */
public void finishActivity(View v) {
finish();

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T20:05:37.523

您是否在 onKeyDown 中收到 NullPointerException？那是因为您没有将 WebView 分配给实例变量：

```
webview = (WebView) findViewById(R.id.webView1); 
```

后退功能可以这样实现：

```
public void onBackPressed() {
    if (webview.canGoBack())
        webview.goBack();
    else
        super.onBackPressed();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T19:57:00.570

看到这个：http: [//developer.android.com/guide/webapps/webview.html](http://developer.android.com/guide/webapps/webview.html)

滚动到`Binding JavaScript code to Android code`

[http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface(java.lang.Object, java.lang.String)](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29)

# asp.net-mvc-3 - 带有 jquery 网格和单元测试的脚手架 aspnet webapi

> ID：13443931
> 
> 赞同：0
> 
> 时间：2012-11-18T19:49:36.317
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, asp.net-web-api, scaffolding, asp.net-mvc-scaffolding

我有一个使用 WebApi、EF5 Code First 和 Repository 和 Unit of Work 模式的 ASPNET MVC4 项目。

我想知道是否有人知道一个脚手架来搭建控制器和视图，但不是使用这样的东西[，](http://blog.stevensanderson.com/2011/01/13/scaffold-your-aspnet-mvc-3-project-with-the-mvcscaffolding-package/)我希望视图有一个与 jquery 相关联的脚本，从 webapi 控制器请求某些东西，而不是返回一个从控制器查看。如果可能的话，脚手架单元测试也是如此。

那里最好的 jquery 网格（开源和免费）是什么？

提前致谢！吉列尔莫。

# wxpython - 如何子类化 wxpython StaticBitmap 以添加属性

> ID：13443941
> 
> 赞同：0
> 
> 时间：2012-11-18T19:50:36.463
> 
> 标签：wxpython, subclass, super

我正在尝试向 wxpython 静态位图添加“值”属性，但我不知道如何实例化我创建的子类。当我尝试创建它时，我收到错误“期望一个 2 元组整数或 wxPoint 对象。”

谁能告诉我我错过了什么？

谢谢

```
class StaticBmpButton(wx.StaticBitmap):
    def __init__(self, parent,id,bmp_off,bmp_on,bmp_over):
        super(wx.StaticBitmap,self).__init__(parent,id,bitmap)
        self.value=False 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:28:06.537

感谢 GolfDop​​e 的评论和解决方案。但我一直在寻找的是一种使用 wxPython 内置小部件的方法。

在搜索了许多问题和答案之后，看起来我需要的是 GenStaticBitmap。看起来这很有效并且可以满足我的需要。如果它被证明不够健壮，我将不得不像上面那样对 PyControl 做一些事情。这似乎有效：

```
import  wx.lib.statbmp as gen_statbmp

#  (gen_statbmp.GenStaticBitmap).__init__(self, parent, ID, bitmap, pos, size, style, name)
########################################################################
class MyBitmapButton(gen_statbmp.GenStaticBitmap):
    """Subclasses a GenStaticBitmap and adds button like functionality 
        requires the three bitmap images needed for on,off and hover"""

    #----------------------------------------------------------------------
    def __init__(self, parent, ID, bmpoff,bmpon,bmphover):
        """Constructor"""
        gen_statbmp.GenStaticBitmap.__init__(self, parent, ID, bmpoff)
        self.bmpoff=bmpoff
        self.bmpon=bmpon
        self.bmphover=bmphover
        self.SetBitmap(bmpoff)
        self.state='off'
        # Bind Mouse Actions to button
        self.Bind(wx.EVT_ENTER_WINDOW,self.On_Hover)
        self.Bind(wx.EVT_LEAVE_WINDOW,self.On_Leave)
        self.Bind(wx.EVT_LEFT_DOWN,self.On_Click)

    # Define Mouse Actions and Button Response
    def On_Hover(self,event):
        self.SetBitmap(self.bmphover)

    def On_Leave(self,event):
        #print 'on enter button state is',self.state
        if self.state=='on':
            self.SetBitmap(self.bmpon)
            self.state='on'
        if self.state=='off':
            self.SetBitmap(self.bmpoff)
            self.state='off'
        #print 'on leave button state is',self.state

    def On_Click(self,event):
        self.SetBitmap(self.bmpon)
        event.Skip()
######################################################################## 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:35:23.290

听起来您正在创建自己的自定义按钮？您可能希望将其创建为 PyControl。我使用这种方法创建了一个淡入淡出按钮，可以将其作为自定义控件导入并直接替换 wx.Button。

```
class StaticBmpButton(wx.PyControl):
    def __init__(self, parent, id=wx.ID_ANY, label="", pos=wx.DefaultPosition, size=wx.DefaultSize, style=wx.NO_BORDER, validator=wx.DefaultValidator, name="StaticBmpButton"):
        wx.PyControl.__init__(self, parent=parent, id=id, pos=pos, size=size, style=wx.NO_BORDER, validator=validator, name=name) 
```

这是自定义 PyContol 按钮的基本框架的链接：http://www.python-forum.org/pythonforum/viewtopic.php?f=2&t=17567 [我](http://www.python-forum.org/pythonforum/viewtopic.php?f=2&t=17567) 现在无法加载 python-forum。如果您需要我从该页面发布代码，请告诉我。

编辑：我猜 python-forum 已经不存在了。这是缓存页面的链接： [http ://cc.bingj.com/cache.aspx?q=BlockButton.py+gradient&d=4580007883572708&mkt=en-US&setlang=en-US&w=7g-uOMgExcAivyB_VE3bzv2kstr-ww21](http://cc.bingj.com/cache.aspx?q=BlockButton.py+gradient&d=4580007883572708&mkt=en-US&setlang=en-US&w=7g-uOMgExcAivyB_VE3bzv2kstr-ww21)

编辑以显示示例：

这只是一个快速示例，说明如何在 PyControl 框架中使用位图。可能有更好的方法来做到这一点，但它会告诉你这个想法。对不起，代码太长了，但我想嵌入图像，这样更容易演示。

```
#!/usr/bin/env python
import wx
from wx.lib.embeddedimage import PyEmbeddedImage

button_blue = PyEmbeddedImage(
    "iVBORw0KGgoAAAANSUhEUgAAAGQAAAAaCAIAAADOqG6yAAAAA3NCSVQICAjb4U/gAAAFxklE"
    "QVRYhd2Yz4sdRRDHq7p7ZjdZiCg5aRAVRaMg4kHWgyjk5sGbJ/Hqf+D/IvgHiFfRq+hVA6IG"
    "PARhJSIuYjTZvH07b7qrPMx0d1V373vP3ewlnex7/aOmp+sz36ruecjMAAAARDSs/N/3FrcP"
    "Dn/45c7vf95dDuPoKRk88sUY7Jy9vNs/c+3q69effvba1cev7PWdMcZMBni8XN28dfDJ599+"
    "//OBD2Gnd5d3+71LvXPGID6MNSDg9JV7MI5UVqJdfTVWI1eYZyjXreZC9YGVHRMMo7+/OLl/"
    "tDxZ+Z2+e+eNFz96/62Xn38SP/j405u3DsYxdA53O4OInngYKdB5BIXFInDqmVYTe5QLsZWu"
    "jPZ5KuEcKkfbZtmmfE71qJ7aGuwdWgMh8D9Hw+Jk3LvUv/v2q+72b4c+EAOMPozeAwCDaT7F"
    "TXhKuWi/gWMPtmyURDZNJWdrmjUF1xhFnKfSMwSCk1UAYArkAwHAaqQ/Dv91aVIG08ZwSkGx"
    "ojVebetSMzRRCWP9Hf8XoPUzICKABYAQvBcRlmFtLOenUy1ImdWziWC9EDpysPIDiHgYRiJK"
    "xpthbeNV0+zMIbb+jsIc14xuraD2jZh5OYzD6OezAAI0YV10fK2ZaoNvF0lHmhHxg+NhOayK"
    "U5OClRLwRq/ODugMs50vAW1cTzHbsPJHixPvQzJgAGAGCQun/6fk1EeYzmTGDMMwPjgeRoGp"
    "KEJZiGiqVZ55TVsAkrPVgE7z6rT1bBlixVTMsBr9YjkMo4dNJ0uhLAREPD+d9WYPe4Mvb968"
    "kZqNwRMNq3F5MvoQtn6XQ9A5a8JVuXSRgGo6YgZxn+0CeUouDEDExPOR0gcKgUIgOtdLbpWz"
    "DALghifWii+c1sgMxEw81VNarOZi3SUlAAhFMLC6oHKXxQfH4fnmtcdnK2mVOgxNK3cgzqdD"
    "RARk5kAciJimsy0iyrc9AwBomtJsBFejpUoLE8sqq97pjyU9Vnb5GQr7TYUBAAtloTFocYpF"
    "Mzk5cUImHj0REeD0IoXGODDp54Q5dHF2PP3VObuVvNfBys5wxU39dpQbrCjNFY7jkRZLS2Yo"
    "/imCpbIQ0Trrug7NnOgRkYhXPhARIIKx1rroZNoJIiHUyHRFwYkkW9QqTuVT5/JDxnrWSuYh"
    "6LBqZYhpVNSVGRNRcc5Ca53rOmMMAhLx4AMRoHHWoASEiJlO0g8mXeUu/WonIBVVwS2qJmcu"
    "KR79keikLha4ZPRN/k8XsNITcMy2JaCIj4kCxNfDpCww1jnXI+Low0iMxjoz56mY9ZvUcqOE"
    "KNmo/aEgVaf5BKdClvQimcmYyh1KObktRBQhCX6cazM4DwGDggWIzlrr3DiGwMZaE0EIQKeD"
    "m/MbSFI6HAtaLVyNIlix5lak7CoZaVQNQEpEs8okpvhFFBq7obGWGAmMtQlNxDVXpY7Kpjhz"
    "YOrImOQ5Q5NqZfo6qYPa5kDJBwoFrU9DMb5E2CVFZXCpkPdpSTEMAQEMgzHWRGXMW2HilZtp"
    "vEDWVFyiGcHIc1zZKoo4O2Uk5c4VmUkFJYdFehLJKQGCAlCmNLOjYPJvollZBGDRGE1n2hzj"
    "9oiRUgpJrcGkqVQHMdjYNFW2SpLTgBKLDCWBm7f5KjdndpLObE4NavXoXBAx/8juhPgNooks"
    "DIqiGKHCp/RVEoytnPjFzqDpJaElQjUpSFEj0SR15AydshIJcokCxq/Ig9NljIzJEidYJmvf"
    "3dh/6ctvflocD8vFkev6rtuRIBCNVJmmFsmKC1Q6UyghI1bbZR2YRdjpTa0W0akyYWYjOk2K"
    "LAGHJzEBEzIzAk+HSmZkYma/GoZhScRPPLa3/9pzSER37y2++PrHz7767tc7fxGRc13X99b1"
    "xlodTSKFFw7Xx65YlRe15FRpS8UfAPB06modyqMGM8HUkw/ianBO/MXmmXcJBqbggx/9uPIh"
    "9M6+8sJTH763f+PN61f2dv8DEJ2mrumY9BEAAAAASUVORK5CYII=")
getbutton_blueData = button_blue.GetData
getbutton_blueImage = button_blue.GetImage
getbutton_blueBitmap = button_blue.GetBitmap

button_gray = PyEmbeddedImage(
    "iVBORw0KGgoAAAANSUhEUgAAAGQAAAAaCAIAAADOqG6yAAAAA3NCSVQICAjb4U/gAAADl0lE"
    "QVRYheWZOU4sMRCGXW23hkVCQoQkHAAJiSWflJgTwMm4AAlHIJsQAkICECFBo/ZML15eYJ7H"
    "4717hveEqKBll2vc9uff5TaAlBIhJKVkjFFKX19fZ7PZ09PT29tbVVWMMSEE+h1WFEVZlvv7"
    "+0dHR6enp2dnZ4eHhzs7O0VRAABCCOq6fnh4uL29fXl5AYDJZLK7u7u9vU0IAQAVtBHzdmU6"
    "dTn0UssfryY93lYppRCi7/u6rquqms/nAHB8fHxzc3N+fg7X19fPz8+MsbIsy7IEAMZY3/fr"
    "CCo+7a9VcmLiNAfFh6BE8JkFjDEhBGMshPj8/KSUbm1tTadT8v7+rrj0fd/3vW/uafuOCWfG"
    "e5vW7F8I0batKigmnPOPjw+CEFJpa6j9IEDxMG+8cjLGOOfaT9xxh2yEnkPBm413fzKCjtsk"
    "hOi6zkxHBP1NbO748t+ROaZ42KAFyIwf2r8uSykXi0XXdSYZj7J+Ip3R/XudnHNKadu2loZW"
    "YOm9mj+HDQL67v4z5da2bV3XZqrStoRlkvpVdPS+a5qGUurFpMxW1tB3rDOH0SdGZnzOeIQQ"
    "TdPM53PGGEqZraz/uMJu6zfRYYw1TdN1XUREXkvnrH+wBTbSub7kir/GOeecq+vtRm64Wadh"
    "XA7KhBBSSjVWPW5vZKSTpIX6dP3jvrTjtrIN9fUahXeEWjFNxApWVhSFWY3QyQE3DlCyPIIm"
    "MaEoWG7m4pyrq7UVbMZoi1cjzqR5p2c5k1xcp1WIQCSqDQAwxhhjhUDnQs0IAAj5kmHyeEry"
    "GgErSSpfSiE6oar2LLdhURSEEAXLlBLGOHQ25WTxjZDSlrn1cmB5q15S+tBcikUpCwDUmerF"
    "ZFYHfWetsxlzclY+nZxWk9TKRVqPWMFS92xzM4YyvbfqLaBN6CsnNyGHiOuJoPE+zaGunIbq"
    "jMMYI5+IQs9QFUV5DYIV2X2ZKSkflhlpK0sneISQzuXm/AeRGi20pIWUlZ+JMp+6AADquYRl"
    "vT4iq3ythRTnlq3RJBklMcVPtDgdq6rGtgJLVay2pL4iNHPwueW45ejIC0Kvh56g9UTGmplV"
    "5KwlAJDLy8v7+/uqqhaLhfrHmYUjpxAhGGeXRJakgwKisPwageuMkGKMqT8BHhwcTKdTEEJQ"
    "Smez2d3d3ePjo0KmPrjMM9E7K+88k2EjEpYJZU1PMvfpG7iUcm9v7+Li4urq6uTkZDKZ/AGs"
    "3amq94qX9AAAAABJRU5ErkJggg==")
getbutton_grayData = button_gray.GetData
getbutton_grayImage = button_gray.GetImage
getbutton_grayBitmap = button_gray.GetBitmap

#----------------------------------------------------------------------
button_green_bright = PyEmbeddedImage(
    "iVBORw0KGgoAAAANSUhEUgAAAGQAAAAaCAIAAADOqG6yAAAAA3NCSVQICAjb4U/gAAAIUUlE"
    "QVRYhY1YTastRxVdu7rvve/Fhxk8IgiKQgQDKookg0imOhGcOdI/IP4G/4cDZw6c6lhxGB2I"
    "hCBElBANCD5Q8/LyzOnT3VXLQe2v6nNu8FzuOd3V1VW111577V0lJAEAbK2t2/qfj/717j/e"
    "eeuvv//38yfnbVnOp33fewcCIAjaTfpQ/+1OEA2HrukjcSX3dvrkF//v59K/ZGyxeQUApml6"
    "cPvgdn744guPv/7ya1/+wtcef/qlu9uHRYqIAJDlfPrTe3/8xW9/+ta7b251nafbT909enj3"
    "6Ga+EQj7B/2r/0AbFDXDacCv3whAgfCKAWKrxwGpvizrLYffg5m5a0JC1DbxaUSfSx8/7iU/"
    "gogIya2uz08fPfvv02U9FZFXPv+NH377x6++8ob85Gc/+t07v1m20025vZ1eKCJ725f1tNet"
    "sSlACRYDCd4EiN4aiQZz3YhksCTrHB2zXgRXhomnAhm7yfF5Bt4BSlOJT+2N0sft/1OZb+e7"
    "ucwkP/z4g+fLs6lML3/2K/P7//zbeV1rZeX51M6ZSoHOgFf8woHrkytaoviN4CQMsr/zsxwU"
    "YX380ZtGNwRE8YK/NTpigC6gGiHbpa7r2gPrtJ72re6of37v7bmRrbHVpnHWNOCMUz3w+l1E"
    "nWmXQFSiWtCAHb9wMSkCZsM4RhIIUX5KbrExqPNoH6rRZHNoGfMJxf0HEVuN0d5ZpqNGXPZP"
    "4vpe92Vdaq0ACspMko2tY8TmPDKYnFWDiHcEnVRN7dRo7GrFFH+0hwIJlRM4rEIHzCAjCIqy"
    "guwgq0sIejQRAlKoTupDQSA2fn8zfNvnI41o2kUIijpZICC5nJdt3QkKBWgziNbYGgGwgQpY"
    "1nInCIJc6jBD0UyhRp8u2g1FBG6ourpWCE0CVMY54bzNREDEQADYYdHZDWxdlnT0OkdIpx/F"
    "b82iTiyKodk5S6zr+bSc1FwQ4MwGT26mV7HQzmhTrO5q6S8cSgJ6Aoyv7j0m0zuflOccgkbf"
    "COC65d3A0DgTADVA3Gx4oJkLu8rpXJ3r1ky6TpH9vhNN1M7zsiznpRncnZKzEcZtD86g4+2z"
    "9pXT5EN80epM82KORolng8obpgQcDBvOmZUp5nLo/jdiZ6E3cJK2s3M79FCvaZDB1YxCcK/1"
    "dPp432saUgk891urAYqIskxBd1l2ibKwJm0QMQKKriJQ8fRmeSCruoNhuuV8ihnDIaYwA9YZ"
    "zeBYB4ACD1mdpwWMTtcIia3up2WxIlwbGyILz74ydZdFPtLcVH1RmXTp7S+FzySQyM43q2Ld"
    "DP8P/HGI8wqCNpJCT0asEmMP1Ax3C0x83Ecgsde6LOd9370i8q5dnbvNJOdkkGbNUKOeIUya"
    "SQs9F1mxIBQMwmnrK8ansCTqnIwGxfk1IpuIZBVlDjuYBCSocujHTsISKASttX3d123b96oS"
    "6CKaFIGuojb+7C4Qq2tMvkUFuuMvYoxI0aHrUwCvbvDG3cuVy1R9Jj4cILNOiWSXvcHYSmg9"
    "1Kr/NTYnQVr/sGZ6osgSaZec44VhW9AZpXslc3wvXEqvoZxIqgG9nuWh9kgLGvC9wDTqs+Oj"
    "q0YZW1KLWmTM8lol42IlTWhoeqP3oQsnQ2Z6t9mRQoiBFR/CXo/5SATIVltrrbZGhsgnk0RQ"
    "IGCRw4PB9EFkPulzAZ4zO0c4h0cWPhZkjA4JgezLI0nN3GGtMxyjImUq1ouubwAq677vrTaV"
    "OgEmyOSZ5YI51lhMkG1jx/H5CMJ1Tl2DModHoKBlmmr30K7oMEpmS94JSq2KrAgGj8oydyWQ"
    "gmku883kAk+ysu37vtedICaUyTYSSUBj8XLkSiAyyO+o3Qco7onBw7OAlQ6HjulbfajDMxMt"
    "uBKUMVrLkwh1f+C4i1DmXt+IoEwy3ZSOfGPbtq22ysJS4ABZGo7AhIz26e7LvDMcNQzAXSXX"
    "/fikmLNGkkMf31b0gKC2eCoMaKgimwgoCZd0AbCh7X3P2JlVAGK6KfNtgWDbt20/Y+I0dSSE"
    "LuY2mO+BEVsKRTPIYzrIVAECB2qNkB03UQfsEpHD5ljXgTLeqAARZLeV+nqM4C3D6yRYoecE"
    "xKxlQ5FpkvmmbHWtspYZQ3SHLWafb3vcVFW+MUfm7BEwjQEoF3AdARObO1IgcwRdxlS3nQD7"
    "XkdGNAWUSNcEWOziMJRwIyuEKOhhWCCUMgtLa61OczE6E7YdMK13Z3i5gUvIAPpxkf5n7BIC"
    "14IxnORb6vQj91CJGSaFyvJRAsVebADKoTGxlWJ2NqLsQINQZnjOKsJSy9w3ejKS2nLxSC5d"
    "/FBWBjqAbRVcpy6T9OVF/lxQOgqCQ7yoSNHQ0a2hK5dRUdSqSW9dszwPSCeajVzBtjYAhTJL"
    "ESmdBk2KlFJgZzawc7SsWbZ1VgsZxgcuiomeV1rxFngl7C64dh9SKQPKGIMWuH0/wxyDsV0j"
    "Jc4FtOehdPBghziIEGFrEylSNBv2s9SCMksBWsBEO4H0SeNAso8/VgUh6gApJUeZ6LoSXheb"
    "xOHjlUnXxjhhxeAg2uFhCsw45dMVdxBFHDU9LuxRE5oo5o+4aLJPIDhB5m9+6fUnT99/tjzd"
    "Tm2+K9NtKZpA+imQHVGQifsSspVLh/BHTCwOixAoRjXECZNcxwqwSoUKiFjoSJanDqbnasef"
    "IQ3OEhBFSBax5WZROBxXgMKd29oK8ODhoze++h1prX34/INf/+FXv3zz539/8pe97WWayixl"
    "BkpHCURTodD49PNU9/ax/LZTWrvNy0ng5pVeQJVeHNHJfSwIO2sSQv7WmEQyItlV4n8Ed7SK"
    "WmtB+dxLX/zet37w3de///jFz/wP8WUTUVqRAEEAAAAASUVORK5CYII=")
getbutton_green_brightData = button_green_bright.GetData
getbutton_green_brightImage = button_green_bright.GetImage
getbutton_green_brightBitmap = button_green_bright.GetBitmap

#----------------------------------------------------------------------
button_red = PyEmbeddedImage(
    "iVBORw0KGgoAAAANSUhEUgAAAGQAAAAaCAIAAADOqG6yAAAAA3NCSVQICAjb4U/gAAAEWElE"
    "QVRYheWYvW4bRxDH/7NckpIQGKBgGAhUygiUIk1cOA9gwKU7w5VfwG+RPqUfwKVbl4YfIG5U"
    "pBIgqAwCGDL1AYo83u3OpFjece92b+8o0QYSLRaL2eFwb+bHmbk7kogAEBEuisV0en5ycvbp"
    "09+fP09PT7PLS2sMRHBPBtFA653JZP/x44OnTw+fPXt4dLS7v6+GQyICQPPz87/ev//z7dvL"
    "szOyVu/tjR880Lu7g9GIiEC0LT8ANM+qDveuQjElIh/XbCg0ptqhbRcNXRJmLop8Nsu+fl1e"
    "XzPR5PDwtzdvfnn1iv44OJh9+SLW0niMnR0AyHNkmTBHfN1whJFHNNEAYuH1Oi2hSZqtlURQ"
    "CuMxhkMCiuvr4uICRD88ekS/DwbMDBEmEiIASoQ2Lb0NPbt1SKkgt+qGEDGRiJibGzufQ0Qp"
    "pSHiupIqhb7j1gF8L7Ibn+ZpCFAAW2vyfIVIRKP/aC+c7QbZUZjf4EeKng8Rs1yubnFEADRc"
    "F0/k1BZTo6fZdy+66PnFYlHM56h6N1Ess+4rHT+n8pubfDYTa+GNdc9afS9M0W8MaLun3b3B"
    "2TzPrq6sa1XVaPYsR6oB6B7QqZQmy5ZXV7Yo2pqS9r9JSv0nouqp6WUmYpbLfDYzWdb5MFDv"
    "WX4Z/v/oACByL3ZmsTCLxaYvc11luKG7m7W8alupYvGvzqmU/kf1C4gbzMIs1rK1bIybwnz3"
    "l9zy0SFWhp101l6LgFmYmRluOmUVkQgBguBdzH27h6OSlMXbhpotDCIQlXdDhywoQ3IQncKF"
    "ai0bI9YSM7zgqZTDNSpEt+GQ0qwNgQQr6sgaBv5sHJX0w90NHSNAEWmlyAO0EkTYGM5zMDul"
    "LgPwAXWS8rmEjBqaMIBoZoWkQkZRodpyoGygLP3zMouIRkQjojUmQBwja5WHpgEoKifWKJq2"
    "/JKWbRuszmxq4+KzayjZKf3nLAKGROMSlhQFL5dg1gGmEFCC111gJZIrnVCJVAoNOLb1pwHy"
    "0qaERTR0mSXCy6UUhRaJYupk14aprYu18UqnVVtOIYDCMX1VfdFU8rcE5OWl1z1rSDQU4SxT"
    "xpBHKqzBzkTrU5ttjMIRrb4+LalnoUUZcZ1X2bPKMRAZ5PnAI9XAFFJTASBVh9InxRLIEk0q"
    "XX2JmYDCMcF67unqn7+BtbokpQIcoRBO1ZVlCPAlSEUZ3Q5QG5RK5vatcR5Wjw7uT2RlrfZI"
    "qQBQW6L1qdPOkmwgk0COcomSSuROHzpS3QEBBgaNMhQAIspaHQOk6oDaCDbMeva4KK8oqVvQ"
    "6cnFX6lsUqrU+I1F//zy5enHj/nFxZR5F9j1iETRqABcFF8CImLgfF7RDtWnrKLxh6sTVMmi"
    "Wqm+ZSAHLoFCKT2Z/PT8OTFzNp2efPhw/O7dP8fHxXyumUfACND1eDqLqLOXR+37DAkI+ijb"
    "+KaNQwM3DVAAOcBK6b29H588+fX166MXL3Ymk38BAbsi18hyJgEAAAAASUVORK5CYII=")
getbutton_redData = button_red.GetData
getbutton_redImage = button_red.GetImage
getbutton_redBitmap = button_red.GetBitmap

class StaticBmpButton(wx.PyControl):

    def __init__(self, parent, width, height, bmpNormal, bmpHover, bmpClick, bmpOff, id=wx.ID_ANY, label="", pos=wx.DefaultPosition, size=wx.DefaultSize, style=wx.NO_BORDER, validator=wx.DefaultValidator, name="StaticBmpButton"):

        wx.PyControl.__init__(self, parent=parent, id=id, pos=pos, size=size, style=wx.NO_BORDER, validator=validator, name=name)

        self.width = width
        self.height = height
        self.bmpNormal = bmpNormal
        self.bmpHover = bmpHover
        self.bmpClick = bmpClick
        self.bmpOff = bmpOff
        self._InitBuffer()
        self._InitPaintObjects()
        self._BindEvents()
        self._SetProperties(label)
        self.SetInitialSize(size)
        self.InheritAttributes()

    def _SetProperties(self, label):
        self._label = label
        self._leftButtonDown = False
        self.SetLabelColor(wx.WHITE)
        self.SetCursor(wx.StockCursor(wx.CURSOR_HAND))
        self.SetFont(wx.Font(pointSize=10, family=wx.FONTFAMILY_SWISS, style=wx.FONTSTYLE_NORMAL, weight=wx.FONTWEIGHT_NORMAL))
        self._hasFocus = False

    def DoGetBestSize(self):
        best = wx.Size(self.width, self.height)
        i = self.height * 0.577
        self.ratio = int(i)
        self.CacheBestSize(best)
        return best

    def GetLabel(self):
        return self._label

    def SetLabelColor(self, color):
        self._labelColor = color

    def _InitPaintObjects(self):
        self._pen = wx.Pen(wx.BLACK, 2, wx.SOLID)
        self._brush = wx.Brush(wx.BLACK, wx.SOLID)

    def _BindEvents(self):
        self.Bind(wx.EVT_ERASE_BACKGROUND, self._OnEraseBackground)
        self.Bind(wx.EVT_SIZE, self._OnSize)
        self.Bind(wx.EVT_PAINT, self._OnPaint)
        self.Bind(wx.EVT_LEFT_DOWN, self._OnMouseClickDown)
        self.Bind(wx.EVT_ENTER_WINDOW, self._OnMouseHover)
        self.Bind(wx.EVT_LEFT_UP, self._OnMouseClickUp)
        self.Bind(wx.EVT_LEAVE_WINDOW, self._OnLeaveWindow)
        self.Bind(wx.EVT_LEFT_DCLICK, self._OnMouseClickDown)

    def Enable(self, enable=True):
        wx.PyControl.Enable(self, enable)
        self.Refresh()

    def _OnLeaveWindow(self, evt):
        self._leftButtonDown = False
        self._hasFocus = False
        self.Refresh()

    def _OnMouseHover(self, evt):
        if self.IsEnabled():
            self._hasFocus = True
            self.Refresh()

    def _OnMouseClickDown(self, evt):
        if self.IsEnabled():
            self._leftButtonDown = True
            self.Refresh()

    def _OnMouseClickUp(self, evt):
        if self.IsEnabled():
            buttonEvent = wx.CommandEvent(wx.wxEVT_COMMAND_BUTTON_CLICKED, self.GetId())
            buttonEvent.SetEventObject(self)
            self.GetEventHandler().ProcessEvent(buttonEvent)
            self._leftButtonDown = False
            self.Refresh()

    def _OnPaint(self, evt):
        self._Draw(wx.BufferedPaintDC(self, self._buffer))

    def _OnSize(self, evt):
        self._InitBuffer()
        self.Refresh()
        evt.Skip()

    def _OnEraseBackground(self, evt):
        pass

    def _InitBuffer(self):
        self._buffer = wx.EmptyBitmap(self.width, self.height)

    def _Draw(self, dc):
        dc = wx.GCDC(dc)
        self._DrawBox(dc)
        self._DrawLabel(dc)

    def _DrawLabel(self, dc):
        dc.SetFont(self.GetFont())
        tw, th = dc.GetTextExtent(self._label)
        tposx, tposy = ((self.width/2)-(tw/2), (self.height/2)-(th/2))

        dc.SetTextForeground(wx.Color(0,0,0,75))
        dc.DrawText(self._label, tposx+1, tposy+1)

        if self.IsEnabled():
            dc.SetTextForeground(self._labelColor)
        else:
            dc.SetTextForeground(wx.Color(255,255,255,75))

        dc.DrawText(self._label, tposx, tposy)

    def _DrawBox(self, dc):
        if self.IsEnabled():
            if self._leftButtonDown:
                dc.DrawBitmap(self.bmpClick, 0, 0, True)
            elif self._hasFocus:
                dc.DrawBitmap(self.bmpHover, 0, 0, True)
            else:
                dc.DrawBitmap(self.bmpNormal, 0, 0, True)
        else:
            dc.DrawBitmap(self.bmpOff, 0, 0, True)

class _DemoWindow(wx.Frame):

    def __init__(self):
        wx.Frame.__init__(self, None, -1, size=(640,480))

        self.SetBackgroundColour(wx.Color(255,255,255))

        bmpNormal = getbutton_blueBitmap()
        bmpHover = getbutton_green_brightBitmap()
        bmpClick = getbutton_redBitmap()
        bmpOff = getbutton_grayBitmap()
        self.test_button1 = StaticBmpButton(self, 100, 26, bmpNormal, bmpHover, bmpClick, bmpOff, -1, label="Hello")
        self.test_button2 = StaticBmpButton(self, 100, 26, bmpNormal, bmpHover, bmpClick, bmpOff, -1, label="Connect")
        self.test_button3 = StaticBmpButton(self, 100, 26, bmpNormal, bmpHover, bmpClick, bmpOff, -1, label="Disconnect")

        self.Bind(wx.EVT_BUTTON, self.OnButton1, self.test_button1)
        self.Bind(wx.EVT_BUTTON, self.OnButton2, self.test_button2)
        self.Bind(wx.EVT_BUTTON, self.OnCloseButton, self.test_button3)

        self.test_button3.Disable()

        vbox = wx.BoxSizer(wx.VERTICAL)
        hbox = wx.BoxSizer(wx.HORIZONTAL)
        hbox.Add(self.test_button1, 0, wx.EXPAND|wx.ALL, 10)
        hbox.Add(self.test_button2, 0, wx.EXPAND|wx.ALL, 10)
        hbox.Add(self.test_button3, 0, wx.EXPAND|wx.ALL, 10)
        vbox.AddStretchSpacer(1)
        vbox.Add(hbox, 0, wx.ALIGN_CENTER)
        vbox.AddStretchSpacer(1)
        self.SetSizer(vbox)
        self.Fit()

        self.SetSize((640, 480))

    def OnButton1(self, evt):
        print evt.GetEventObject().GetLabel()
        self.test_button2.Enable()
        self.test_button3.Enable()

    def OnButton2(self, evt):
        self.test_button2.Disable()
        self.test_button3.Enable()

    def OnCloseButton(self, evt):
        self.test_button3.Disable()
        self.test_button2.Enable()

def _demo():
    app = wx.PySimpleApp()
    _DemoWindow().Show()
    app.MainLoop()

if __name__ == '__main__':
    _demo() 
```

# android - 如何以编程方式打开动画？

> ID：13443942
> 
> 赞同：0
> 
> 时间：2012-11-18T19:50:56.960
> 
> 标签：android, android-animation

如何以编程方式打开动画？我正在使用`overridePendingTransition();`. 除非我自己打开动画，否则它不起作用。谁能告诉我如何以编程方式打开显示/动画设置中的动画？我正在使用 overridePendingTransition(); 开启新活动。

这是我的xml

grow_fadein_center

```
<?xml version="1.0" encoding="utf-8"?>

<set xmlns:android="http://schemas.android.com/apk/res/android">
    <scale android:fromXScale="0.6" android:toXScale="1.0"
           android:fromYScale="0.6" android:toYScale="1.0"
           android:pivotX="50%" android:pivotY="50%"
           android:duration="@android:integer/config_longAnimTime" />
    <alpha android:interpolator="@anim/decelerate_interpolator"
            android:fromAlpha="0.0" android:toAlpha="1.0"
            android:duration="@android:integer/config_longAnimTime" />
</set> 
```

收缩淡出中心：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <scale android:fromXScale="1.0" android:toXScale="0.5"
           android:fromYScale="1.0" android:toYScale="0.5"
           android:pivotX="50%" android:pivotY="50%"
           android:duration="@android:integer/config_longAnimTime" />
    <alpha android:interpolator="@anim/accelerate_interpolator"
            android:fromAlpha="1.0" android:toAlpha="0.0"
            android:duration="@android:integer/config_longAnimTime"/>
</set> 
```

这是我用来打开意图的代码

```
btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                ContentResolver cr = getContentResolver();
                Settings.System.putInt(cr, Settings.System.WINDOW_ANIMATION_SCALE, 0);

                Intent intent=new Intent(context,Second.class);

                startActivity(intent);
                overridePendingTransition(R.anim.grow_fade_in_center, R.anim.shrink_fade_out_center);
                finish();

//testing on textview worked without turning system animation on.
                Animation animation=AnimationUtils.loadAnimation(context, R.anim.grow_fade_in_center);
                txt.startAnimation(animation);

            }
        }); 
```

这仅在打开动画时有效。我通过设置->显示->动画这样做

我发现

```
ContentResolver cr = getContentResolver();
Settings.System.putInt(cr, Settings.System.WINDOW_ANIMATION_SCALE, 0); 
```

通过设置整数来打开或关闭动画！但这对我不起作用！我需要的是如何以编程方式打开/关闭系统设置中的动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:27:56.593

您不需要像那样务实地启动动画。

你只需要`overridePendingTransition(R.anim.grow_fade_in_center, R.anim.shrink_fade_out_center);`在正确的地方打电话。

```
public void onClick(View v) {
    startActivity(HomeActivity.class);
    overridePendingTransition(android.R.anim.fade_in, android.R.anim.fade_out);
    finish();
} 
```

也在做：

```
Settings.System.putInt(cr, Settings.System.WINDOW_ANIMATION_SCALE, 0); 
```

将禁用窗口动画！

# boost - 尝试为 boost::::asio::deadline_timer 设置成员函数时，Boost::bind 编译错误

> ID：13443947
> 
> 赞同：1
> 
> 时间：2012-11-18T19:51:39.297
> 
> 标签：boost, boost-asio, boost-bind

我在理解尝试创建 boost::asio::deadline_timer 时遇到的编译错误时遇到了一些问题。我在 MSVC10 上使用以下代码示例得到以下错误。它是用 Boost 1.48 构建的

第一个错误看起来像是在抱怨将成员函数设置为处理程序的 async_wait 是一个引用。但是，当我更改参数时，它会给出类似的错误。

我一直在查看 Boost::Bind 和 Boost::Asio 试图找出我做错了什么。我的代码与[此](http://www.boost.org/doc/libs/1_35_0/doc/html/boost_asio/tutorial/tuttimer5.html)示例类似，我使用 bind 和 deadline_timer 的方式。

很抱歉编译错误看起来有多混乱。我仍在尝试处理 Markdown。

## 代码示例

# 包括

```
#include <boost/thread.hpp>
#include <boost/bind.hpp>
#include <boost/asio.hpp>
#include <boost/system/error_code.hpp>
#include <boost/date_time/posix_time/posix_time.hpp>

class TimerThing
{
protected:
    boost::asio::deadline_timer* statusTimer_;
    boost::thread_group worker_threads_;

    boost::asio::io_service io_service_;
    boost::shared_ptr<boost::asio::io_service::work> work_;

public:
    TimerThing() {}

    virtual ~TimerThing(){}

    void updateStatus(boost::system::error_code& ec)
    {
        if (ec == boost::asio::error::operation_aborted)
            return;

        std::cout<<"Status Update"<<std::endl;

        statusTimer_->expires_at(statusTimer_->expires_at() + boost::posix_time::seconds(1));
        statusTimer_->async_wait(boost::bind(&TimerThing::updateStatus, this, , boost::asio::placeholders::error));
    }

    void start()
    {
        statusTimer_=new boost::asio::deadline_timer(io_service_);
        boost::shared_ptr<boost::asio::io_service::work> myWork(new boost::asio::io_service::work(io_service_));
        work_=myWork;

        worker_threads_.create_thread( boost::bind( &TimerThing::threadAction, this ) );

        statusTimer_->expires_at(statusTimer_->expires_at() + boost::posix_time::seconds(1));
        statusTimer_->async_wait(boost::bind(&TimerThing::updateStatus, this, boost::asio::placeholders::error));
    }

    void threadAction()
    {
        io_service_.run();
    }

    void stop()
    {
        work_.reset();
        io_service_.stop();
        worker_threads_.join_all();

        delete statusTimer_;
    }

};

#include "TimerThing.h"

int main(int argc, const char* argv[] )
{
    TimerThing t;

    std::string input;
    std::cout<<"Press f to stop"<<std::endl;

    t.start();

    std::cin>>input;

    t.stop();

    return 0;
} 
```

## 编译器错误

c:\Underware\version\include\boost/bind/bind.hpp(313): 错误 C2664: 'R boost::_mfi::mf1::operator ()(const U &,A1) const' : 无法转换参数2 从 'const boost::system::error_code' 到 'boost::system::error_code &'

> ```
>  with
>      [
>          R=void,
>          T=TimerThing,
>          A1=boost::system::error_code &,
>          U=TimerThing *
>      ]
>      Conversion loses qualifiers
>      c:\Underware\version\include\boost/bind/bind_template.hpp(47) : see reference to function template instantiation 'void boost::_bi::list2<A1,A2>::operator ()<F,boost::_bi::list1<const boost::system::error_code &>>(boost::_bi::type<T>,F &,A &,int)' being compiled
>      with
>      [
>          A1=boost::_bi::value<TimerThing *>,
>          A2=boost::arg<1>,
>          F=boost::_mfi::mf1<void,TimerThing,boost::system::error_code &>,
>          T=void,
>          A=boost::_bi::list1<const boost::system::error_code &>
>      ]
>      c:\Underware\version\include\boost/asio/detail/bind_handler.hpp(46) : see reference to function template instantiation 'void boost::_bi::bind_t<R,F,L>::operator ()<const Arg1>(const A1 &)' being compiled
>      with
>      [
>          R=void,
>          F=boost::_mfi::mf1<void,TimerThing,boost::system::error_code &>,
>          L=boost::_bi::list2<boost::_bi::value<TimerThing *>,boost::arg<1>>,
>          Arg1=const boost::system::error_code,
>          A1=const boost::system::error_code
>      ]
> 
>      c:\Underware\version\include\boost/asio/detail/bind_handler.hpp(45) : while compiling class template member function 'void boost::asio::detail::binder1<Handler,Arg1>::operator ()(void)'
>      with
>      [
>          Handler=boost::_bi::bind_t<void,boost::_mfi::mf1<void,TimerThing,boost::system::error_code &>,boost::_bi::list2<boost::_bi::value<TimerThing *>,boost::arg<1>>>,
>          Arg1=boost::system::error_code
>      ]
>      c:\Underware\version\include\boost/asio/detail/wait_handler.hpp(59) : see reference to class template instantiation 'boost::asio::detail::binder1<Handler,Arg1>' being compiled
>      with
>      [
>          Handler=boost::_bi::bind_t<void,boost::_mfi::mf1<void,TimerThing,boost::system::error_code &>,boost::_bi::list2<boost::_bi::value<TimerThing *>,boost::arg<1>>>,
>          Arg1=boost::system::error_code
>      ]
> 
>      c:\Underware\version\include\boost/asio/detail/wait_handler.hpp(45) : while compiling class template member function 'void boost::asio::detail::wait_handler<Handler>::do_complete(boost::asio::detail::io_service_impl *,boost::asio::detail::operation *,const boost::system::error_code &,size_t)'
>      with
>      [
>          Handler=boost::_bi::bind_t<void,boost::_mfi::mf1<void,TimerThing,boost::system::error_code &>,boost::_bi::list2<boost::_bi::value<TimerThing *>,boost::arg<1>>>
>      ]
>      c:\Underware\version\include\boost/asio/detail/deadline_timer_service.hpp(185) : see reference to class template instantiation 'boost::asio::detail::wait_handler<Handler>' being compiled
>      with
>      [
>          Handler=boost::_bi::bind_t<void,boost::_mfi::mf1<void,TimerThing,boost::system::error_code &>,boost::_bi::list2<boost::_bi::value<TimerThing *>,boost::arg<1>>>
>      ]
>      c:\Underware\version\include\boost/asio/deadline_timer_service.hpp(137) : see reference to function template instantiation 'void boost::asio::detail::deadline_timer_service<Time_Traits>::async_wait<WaitHandler>(boost::asio::detail::deadline_timer_service<Time_Traits>::implementation_type &,Handler)' being compiled
>      with
>      [
>          Time_Traits=boost::asio::time_traits<boost::posix_time::ptime>,
>          WaitHandler=boost::_bi::bind_t<void,boost::_mfi::mf1<void,TimerThing,boost::system::error_code &>,boost::_bi::list2<boost::_bi::value<TimerThing *>,boost::arg<1>>>,
>          Handler=boost::_bi::bind_t<void,boost::_mfi::mf1<void,TimerThing,boost::system::error_code &>,boost::_bi::list2<boost::_bi::value<TimerThing *>,boost::arg<1>>>
>      ]
>      c:\Underware\version\include\boost/asio/basic_deadline_timer.hpp(502) : see reference to function template instantiation 'void boost::asio::deadline_timer_service<TimeType,TimeTraits>::async_wait<WaitHandler>(boost::asio::detail::deadline_timer_service<Time_Traits>::implementation_type &,const WaitHandler &)' being compiled
>      with
>      [
>          TimeType=boost::posix_time::ptime,
>          TimeTraits=boost::asio::time_traits<boost::posix_time::ptime>,
>          WaitHandler=boost::_bi::bind_t<void,boost::_mfi::mf1<void,TimerThing,boost::system::error_code &>,boost::_bi::list2<boost::_bi::value<TimerThing *>,boost::arg<1>>>,
>          Time_Traits=boost::asio::time_traits<boost::posix_time::ptime>
>      ] 
> ```

c:\users\tharper\documents\visual studio 2010\projects\asiotimer\asiotimer\TimerThing.h(48) ：参见对函数模板实例化的参考 'void boost::asio::basic_deadline_timer::async_wait>(const WaitHandler &) ' 正在编译

> ```
>  with
>      [
>          Time=boost::posix_time::ptime,
>          R=void,
>          F=boost::_mfi::mf1<void,TimerThing,boost::system::error_code &>,
>          L=boost::_bi::list2<boost::_bi::value<TimerThing *>,boost::arg<1>>, 
> ```
> 
> WaitHandler=boost::_bi::bind_t,boost::_bi::list2,boost::arg<1>>>
> ] TimerThing.cpp

c:\Underware\version\include\boost/bind/bind.hpp(313): 错误 C2664: 'R boost::_mfi::mf1::operator ()(const U &,A1) const' : 无法转换参数2 从 'const boost::system::error_code' 到 'boost::system::error_code &'

> ```
>  with
>      [
>          R=void,
>          T=TimerThing,
>          A1=boost::system::error_code &,
>          U=TimerThing *
>      ]
>      Conversion loses qualifiers 
> ```

c:\Underware\version\include\boost/bind/bind_template.hpp(47) : 参见函数模板实例化 'void boost::_bi::list2::operator ()>(boost::_bi::type, F &,A &,int)' 正在编译

> ```
>  with
>      [
>          A1=boost::_bi::value<TimerThing *>,
>          A2=boost::arg<1>,
>          F=boost::_mfi::mf1<void,TimerThing,boost::system::error_code &>,
>          T=void,
>          A=boost::_bi::list1<const boost::system::error_code &>
>      ]
>      c:\Underware\version\include\boost/asio/detail/bind_handler.hpp(46) : see reference to function template instantiation 'void boost::_bi::bind_t<R,F,L>::operator ()<const Arg1>(const A1 &)' being compiled
>      with
>      [
>          R=void,
>          F=boost::_mfi::mf1<void,TimerThing,boost::system::error_code &>,
>          L=boost::_bi::list2<boost::_bi::value<TimerThing *>,boost::arg<>>,
>          Arg1=const boost::system::error_code,
>          A1=const boost::system::error_code
>      ]
>      c:\Underware\version\include\boost/asio/detail/bind_handler.hpp(45) : while compiling class template member function 'void boost::asio::detail::binder1<Handler,Arg1>::operator ()(void)'
>      with
>      [
>          Handler=boost::_bi::bind_t<void,boost::_mfi::mf1<void,TimerThing,boost::system::error_code &>,boost::_bi::list2<boost::_bi::value<TimerThing *>,boost::arg<1>>>,
>          Arg1=boost::system::error_code
>      ]
>      c:\Underware\version\include\boost/asio/detail/wait_handler.hpp(59) : see reference to class template instantiation 'boost::asio::detail::binder1<Handler,Arg1>' being compiled
>      with
>      [
>          Handler=boost::_bi::bind_t<void,boost::_mfi::mf1<void,TimerThing,boost::system::error_code &>,boost::_bi::list2<boost::_bi::value<TimerThing *>,boost::arg<1>>>,
>          Arg1=boost::system::error_code
>      ]
>      c:\Underware\version\include\boost/asio/detail/wait_handler.hpp(45) : while compiling class template member function 'void boost::asio::detail::wait_handler<Handler>::do_complete(boost::asio::detail::io_service_impl *,boost::asio::detail::operation *,const boost::system::error_code &,size_t)'
>      with
>      [
>          Handler=boost::_bi::bind_t<void,boost::_mfi::mf1<void,TimerThing,boost::system::error_code &>,boost::_bi::list2<boost::_bi::value<TimerThing *>,boost::arg<1>>>
>      ]
>      c:\Underware\version\include\boost/asio/detail/deadline_timer_service.hpp(185) : see reference to class template instantiation 'boost::asio::detail::wait_handler<Handler>' being compiled
>      with
>      [
>          Handler=boost::_bi::bind_t<void,boost::_mfi::mf1<void,TimerThing,boost::system::error_code &>,boost::_bi::list2<boost::_bi::value<TimerThing *>,boost::arg<1>>>
>      ]
>      c:\Underware\version\include\boost/asio/deadline_timer_service.hpp(137) : see reference to function template instantiation 'void boost::asio::detail::deadline_timer_service<Time_Traits>::async_wait<WaitHandler>(boost::asio::detail::deadline_timer_service<Time_Traits>::implementation_type &,Handler)' being compiled
>      with
>      [
>          Time_Traits=boost::asio::time_traits<boost::posix_time::ptime>,
>          WaitHandler=boost::_bi::bind_t<void,boost::_mfi::mf1<void,TimerThing,boost::system::error_code &>,boost::_bi::list2<boost::_bi::value<TimerThing *>,boost::arg<1>>>,
>          Handler=boost::_bi::bind_t<void,boost::_mfi::mf1<void,TimerThing,boost::system::error_code &>,boost::_bi::list2<boost::_bi::value<TimerThing *>,boost::arg<1>>>
>      ]
>      c:\Underware\version\include\boost/asio/basic_deadline_timer.hpp(502) : see reference to function template instantiation 'void boost::asio::deadline_timer_service<TimeType,TimeTraits>::async_wait<WaitHandler>(boost::asio::detail::deadline_timer_service<Time_Traits>::implementation_type &,const WaitHandler &)' being compiled
>      with
>      [
>          TimeType=boost::posix_time::ptime,
>          TimeTraits=boost::asio::time_traits<boost::posix_time::ptime>,
>          WaitHandler=boost::_bi::bind_t<void,boost::_mfi::mf1<void,TimerThing,boost::system::error_code &>,boost::_bi::list2<boost::_bi::value<TimerThing *>,boost::arg<1>>>,
>          Time_Traits=boost::asio::time_traits<boost::posix_time::ptime>
>      ]
>      c:\users\tharper\documents\visual studio 2010\projects\asiotimer\asiotimer\TimerThing.h(48) : see reference to function template instantiation 'void boost::asio::basic_deadline_timer<Time>::async_wait<boost::_bi::bind_t<R,F,L>>(const WaitHandler &)' being compiled
>      with
>      [
>          Time=boost::posix_time::ptime,
>          R=void,
>          F=boost::_mfi::mf1<void,TimerThing,boost::system::error_code &>,
>          L=boost::_bi::list2<boost::_bi::value<TimerThing *>,boost::arg<1>>,
>          WaitHandler=boost::_bi::bind_t<void,boost::_mfi::mf1<void,TimerThing,boost::system::error_code &>,boost::_bi::list2<boost::_bi::value<TimerThing *>,boost::arg<1>>>
>      ] 
> ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T20:25:20.600

`void updateStatus(boost::system::error_code& ec)`应该是`void updateStatus(const boost::system::error_code& ec)`。

你有额外的逗号`boost::bind(&TimerThing::updateStatus, this, , boost::asio::placeholders::error));`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T20:46:43.217

你的绑定`start`是正确的，一个`updateStatus`是不正确的：

```
void updateStatus(const boost::system::error_code& ec)
{
    if (ec == boost::asio::error::operation_aborted)
        return;

    std::cout<<"Status Update"<<std::endl;

    statusTimer_->expires_at(
      statusTimer_->expires_at() + boost::posix_time::seconds(1));
    statusTimer_->async_wait(
      boost::bind(&TimerThing::updateStatus, this, 
                  boost::asio::placeholders::error));
} 
```

您还需要使用占位符。

一般提示：更喜欢发布可编译的示例而不是完整的编译器。在您的情况下，删除不可移植的 VC 垃圾（`tmain`, `stdafx`）并添加所有包含。

# c# - C# winforms 一次循环一个 4096 kB 的文件，并将 HTTPPosts 排队到互联网

> ID：13443948
> 
> 赞同：0
> 
> 时间：2012-11-18T19:51:43.937
> 
> 标签：c#, winforms, file-upload, queue, http-post

感谢您的阅读，我真的很感激我问了很多读过这篇文章的人。

我必须将一个物理文件切成 4096 kB 的块进行上传。我可以很容易地从“另一端”拿起它们并重新制作它们。

我很欣赏这篇文章和[这篇](https://stackoverflow.com/questions/566462/upload-files-with-httpwebrequest-multipart-form-data)文章中有很多[信息，](https://stackoverflow.com/questions/583970/need-loop-to-copy-chunks-from-byte-array)但我正在努力如何优雅地将这些信息组合在一起

这个想法只是将大于 4096kB 的文件切割成更小的包裹。更糟糕的是：如果有一种方法可以同步排队发送文件而不必将它们放在本地磁盘上（即仅在内存中工作）我真的很喜欢......

```
 //Pseudocode:
 Queue queue = new Queue();
 byte[] currentChunk ;
 int i =0;
 while(currentChunk = openFileinChunks(filename, 4194304)) //4096 kB
 {
      HTTPPoster mypost = new HTTPPoster();
      mypost.add(currentChunk);
      //need comparison here - to know when last loop is happening to use different name :-/ for this next bit
      mypost.uploadedName(filename+"."+ i.ToString().PadLeft(6, '0');
      queue.Enqueue(mypost);
      i++;
 }

 do
 {
    HTTPPoster Post = (HTTPPoster) queue.Dequeue();
    Post.Run();
 } while (queue.Count != 0);

 class HTTPPoster{
     byte[] sendable;
     string tmpname;
     public void add(byte[] toPost)
     {
          sendable = toPost;
     }
     public void uploadedName(string name)
     {
          tmpname = name;
     }
     public void Run()
     {
         //[preferably some condensed reworked code to replace this] **
     }
 } 
```

**：[使用 HTTPWebrequest 上传文件（multipart/form-data）](https://stackoverflow.com/questions/566462/upload-files-with-httpwebrequest-multipart-form-data)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:12:19.463

I found this article [http://blogs.msdn.com/b/johan/archive/2009/03/30/1080526.aspx](http://blogs.msdn.com/b/johan/archive/2009/03/30/1080526.aspx) very handy when trying to do something similar.

The approach in that article is relatively straightforward: you set up the web request then write chunks of data to the stream. However, by setting `AllowWriteStreamBuffering` to false, you prevent the request from buffering the whole file in memory.

The problem with your current approach is that it appears to keep everything in memory - this might cause you problems with larger files.

What does the server component of this look like? That will probably dictate the precise method you use to send the file.

**Edit:**

What about this?

```
int bytesRead;
int bufferSize = 4194304;
byte[] buffer = new byte[bufferSize];

using (FileStream fileStream = new FileStream(filePath, FileMode.Open, FileAccess.Read))
{
    int i = 0;

    while ((bytesRead = fileStream.Read(buffer, 0, buffer.Length)) != 0)
    {
        string postFileName = Path.GetFileName(filePath) + "." + i++.ToString().PadLeft(10, '0');

        if (bytesRead < bufferSize)
        {
            postFileName = Path.GetFileName(filePath) + ".terminus";
        }

        PostFileChunk(buffer, bytesRead, postFileName);
    }
} 
```

This will read the file in blocks of 4MB, then call the `PostFileChunk` method (your `HTTPPoster` could come in to play here) to send the data to the server.

Keep in mind that when you are writing the chunk to the post in your `Run` method, use the `bytesRead` - because we are reusing the buffer, if the last read is less than `bufferSize`, it will still contain some of the data from the previous read. `bytesRead` will ensure that these characters don't get written.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:05:45.977

我的解决方案：

```
void LikeThat(byte[] file)
    {

        var ms = new System.IO.MemoryStream(file);
        var b=  new byte[4096];
        while (ms.Length > 0)
        {
            ms.Read(b, 0, 4096);
            //now b contains your chunk, just transmit it!
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T08:47:46.217

这行得通，我已将其减少到 4096 B（不是 4096kB）“块”，但原理是一样的

注意：有少量的对象引用是我自己的——我使用的一个叫做 jsonFolder 和 jsonDomain 的东西，它基本上保存了用户名、密码和 url 以及文件信息。虽然你应该能够遵循这个逻辑。我会尽量抽出时间将其发布到教程中（包括 PHP 服务器端代码和 incron 重建器）

```
/******
*   the terminus file format is weird
*   basically it goes like this
*       tmp/myfilename.ext.00000000001  4kB
*       tmp/myfilename.ext.00000000002  4kB
*       tmp/myfilename.ext.00000000003  4kB
*       tmp/myfilename.ext.00000000004  4kB
*       tmp/myfilename.ext.terminus     <=4kB
*   this will re-built here to 
*       dir/myfilename.ext              >16kB <20kB
*/

class classActionType_clientPush : classActionType
{
    string relpath = "";
    jsonFolder myFolder;
    jsonDomain myDomain;
    Queue<HTTPPoster> queue = new Queue<HTTPPoster>();

    /// <param name="relativeLocalFilePath">
    /// this "relativeLocalFilePath" refers to path RE: the ~localFolder~ - this class will cut the file and upload it in 4096kB chunks
    /// </param>
    /// <param name="folder">
    /// use this for the folder pathing
    /// </param>
    /// <param name="domain">
    /// this is for the credentials and the url
    /// </param>
    public void setPath(string relativeLocalFilePath, jsonFolder folder, jsonDomain domain)
    {
        string tmppath = folder.localFolder + relativeLocalFilePath;
        if (File.Exists(tmppath))
        {
            relpath = relativeLocalFilePath;
            myFolder = folder;
            myDomain = domain;
        }
        else
        {
            throw new Exception("classActionType_clientPull.setPath():tmppath \"" + tmppath + "\" does not already exist");
        }
    }

    public override void action()
    {
        if (relpath == "")
        {
            throw new Exception("classActionType_clientPull.action():relpath cannot be \"\"");
        }
        /***
         * split it into chunks and copy file to server
         */
        try
        {

            int bytesRead;
            int bufferSize = 4096;
            byte[] buffer = new byte[bufferSize];
            string filePath = myFolder.localFolder + relpath;
            using (FileStream fileStream = new FileStream(filePath, FileMode.Open, FileAccess.Read))
            {
                int i = 0;

                while ((bytesRead = fileStream.Read(buffer, 0, buffer.Length)) != 0)
                {
                    string postFileName = Path.GetFileName(filePath) + "." + i++.ToString().PadLeft(10, '0');

                    if (bytesRead < bufferSize)
                    {
                        postFileName = Path.GetFileName(filePath) + ".terminus";
                    }

                    HTTPPoster mypost = new HTTPPoster();
                    mypost.add(buffer);
                    mypost.setBytes(bytesRead);
                    mypost.setDomain(this.myDomain);
                    mypost.uploadedName(postFileName);
                    queue.Enqueue(mypost);

                    Debug.WriteLine("   nof: HTTPPoster.action() loop counter " + i + "");
                }
            }

            do
            {
                HTTPPoster Post = (HTTPPoster)queue.Dequeue();
                Post.Run();
            } while (queue.Count != 0);
        }
        catch (Exception ex)
        {
            Debug.WriteLine("   nof: HTTPPoster.action() failed\r\n" + ex.Message + "\r\n" + ex.StackTrace);
        }
    }
}

class HTTPPoster
{
    byte[] sendable;
    string filename;
    int bytes;
    jsonDomain myDomain;

    public void add(byte[] b)
    {
        sendable = b;
    }

    public void uploadedName(string p)
    {
        filename = p;
    }

    public void setDomain(jsonDomain domain)
    {
        myDomain = domain;
    }

    public void setBytes(int bytesRead)
    {
        bytes = bytesRead;
    }

    public void Run()
    {
        try
        {
            /***
             * this does the actual post (!gulp)
             */ 
            string boundary = "---------------------------" + DateTime.Now.Ticks.ToString("x");
            byte[] boundarybytes = System.Text.Encoding.ASCII.GetBytes("\r\n--" + boundary + "\r\n");

            HttpWebRequest wr = (HttpWebRequest)WebRequest.Create(myDomain.url + "/io/clientPush.php");
            ServicePointManager.ServerCertificateValidationCallback = delegate { return true; };
            wr.ContentType = "multipart/form-data; boundary=" + boundary;
            wr.Method = "POST";
            wr.KeepAlive = true;
            wr.Credentials = System.Net.CredentialCache.DefaultCredentials;

            Stream rs = wr.GetRequestStream();

            string formdataTemplate = "Content-Disposition: form-data; name=\"{0}\"\r\n\r\n{1}";

            string formitem;
            byte[] formitembytes;
            classHasher hash = new classHasher();

            rs.Write(boundarybytes, 0, boundarybytes.Length);
            formitem = string.Format(formdataTemplate, "username", myDomain.user);
            formitembytes = System.Text.Encoding.UTF8.GetBytes(formitem);
            rs.Write(formitembytes, 0, formitembytes.Length);

            rs.Write(boundarybytes, 0, boundarybytes.Length);
            formitem = string.Format(formdataTemplate, "password", hash.Decrypt(myDomain.password, "saltysaltsalt"));
            formitembytes = System.Text.Encoding.UTF8.GetBytes(formitem);
            rs.Write(formitembytes, 0, formitembytes.Length);

            rs.Write(boundarybytes, 0, boundarybytes.Length);

            string headerTemplate = "Content-Disposition: form-data; name=\"{0}\"; filename=\"{1}\"\r\nContent-Type: {2}\r\n\r\n";
            string header = string.Format(headerTemplate, "file", filename, "multipart/mixed");
            byte[] headerbytes = System.Text.Encoding.UTF8.GetBytes(header);
            rs.Write(headerbytes, 0, headerbytes.Length);

             rs.Write(sendable, 0, bytes);

            byte[] trailer = System.Text.Encoding.ASCII.GetBytes("\r\n--" + boundary + "--\r\n");
            rs.Write(trailer, 0, trailer.Length);
            rs.Close();

            WebResponse wresp = null;
            try
            {
                wresp = wr.GetResponse();
                Stream myStream = wresp.GetResponseStream();
                StreamReader myReader = new StreamReader(myStream);
                Debug.WriteLine("   nof: HTTPPoster.Run() all ok \r\n" + myReader.ReadToEnd());
            }
            catch (Exception ex)
            {
                Debug.WriteLine("   nof: HTTPPoster.Run() finished\r\n" + ex.Message + "\r\n" + ex.StackTrace);
                if (wresp != null)
                {
                    wresp.Close();
                    wresp = null;
                }
            }
            finally
            {
                wr = null;
            }
        }
        catch (Exception ex)
        {
            Debug.WriteLine("   nof: HTTPPoster.Run() !ERROR! \r\n" + ex.Message + "\r\n" + ex.StackTrace);               
        }
    }
} 
```

# ruby-on-rails - 为什么我的 before_* 一直触发

> ID：13443950
> 
> 赞同：0
> 
> 时间：2012-11-18T19:51:49.740
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有这个循环

```
 pages.each{|page| page.update_attribute(:sort_order, self.sort_order.to_i + 1)} 
```

我使用 update_attribute 跳过 before_update 或 before_save 没有被调用

```
before_save :set_data
before_update :set_data 
```

但是 set_data 再次被调用......关于如何避免这种情况的任何想法

我什至尝试了以下

```
 pages.each do |page| 
   page.sort_order = self.sort_order.to_i + 1
   page.save(:validate => false)
 end 
```

我正在尝试将后面的页面更新为 sort_order + 1 以便我可以按某种顺序排列页面

有任何想法吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:55:14.030

The docs say that [`#update_attribute()`](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update_attribute) and [`#save()`](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-save) invoke callbacks.

I had the same issue a few months ago and I don't think you can save a record without the callbacks being invoked.

## Edit

I just saw [`#update_column()`](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update_column) in the docs, which skips callbacks.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T19:56:34.287

似乎`update_column`可以解决问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T19:57:40.637

那这个呢？

```
Page.where(:id => pages.collect(&:id)).update_all('sort_order=sort_order+1') 
```

这种方法的优点是您可以针对任意数量的行发出单个 SQL 查询。不过需要注意的是，这不会改变`sort_order`内存中任何模型的属性。

这避开了整个回调链。[update_attribute](http://apidock.com/rails/ActiveRecord/Persistence/update_attribute)的文档说跳过了验证，但调用了*回调*。

# jsf - 在同一页面显示内联 pdf 文件并打印

> ID：13443951
> 
> 赞同：1
> 
> 时间：2012-11-18T19:51:51.693
> 
> 标签：jsf, jsf-2, primefaces

我有一个格式化的 pdf 文件，我想在 jsf 页面中显示它（使用相同的格式）并能够打印它。

请告知如何做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T20:17:14.450

查看[展示中的 p:media 标签](http://www.primefaces.org/showcase/ui/media.jsf)

```
<p:media value="/resources/other/guide.pdf" width="100%" height="300px">  
    Your browser can't display pdf, 
    <h:outputLink value="/resources/other/guide.pdf">click</h:outputLink> to download pdf instead.  
</p:media> 
```

`p:media`如果浏览器由于某种原因无法显示pdf，将显示（您的浏览器...）的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:15:29.027

您可以使用 iframe 显示 pdf：

```
<iframe src="test.pdf" width="900" height="500"></iframe> 
```

它可以通过右键单击并选择打印来打印。

您可能需要能够在某些浏览器上显示 pdf 的插件，例如 adobe reader 或 foxit。

福昕阅读器设置插件需要用户检查`Display PDF in Browser`：

[http://goo.gl/t3jaI](http://goo.gl/t3jaI)

# symfony - 从 Web 浏览器运行 Symfony2 控制台命令

> ID：13443954
> 
> 赞同：3
> 
> 时间：2012-11-18T19:52:05.547
> 
> 标签：symfony

我必须使用糟糕的生产服务器。我可以通过 apache 使用 Symfony2 所需的 PHP 版本，但不能在使用旧 PHP 版本的 CLI 中使用。

所以我的问题是......有什么办法可以从网络浏览器运行控制台命令？所以，将`console`文件移动到服务器根目录并做一些更改......后来，出于安全原因，当然，这个文件将存储在根目录之外。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-19T08:45:32.537

浏览器中有一个用于控制台的捆绑包。

[https://github.com/winzou/ConsoleBundle](https://github.com/winzou/ConsoleBundle)

它用于共享服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-17T05:01:55.230

我想从浏览器中清除缓存，整个 ConsoleBundle（见上面接受的答案）对我来说太多了（对我的用户来说仍然太书呆子）。我发现你可以很容易地使用这个包，而不需要它提供的用户界面。

```
// install the bundle & run this code, e.g. in a controller
$console = new \CoreSphere\ConsoleBundle\Executer\CommandExecuter($this->container->get('kernel'));
$response = $console->execute("cache:clear --env=prod");
var_dump($response); // returns output and error code etc 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-28T19:14:29.067

我最近尝试安装上面提到的 ConsoleBundle，但作曲家说它被放弃了。而不是使用这个：[https ://github.com/CoreSphere/ConsoleBundle](https://github.com/CoreSphere/ConsoleBundle)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-19T00:26:36.553

据我所知，您应该只使用 Apache 使用的 php 版本！在 .bash_profile / .zshrc 中设置别名： alias php='/path/to/php/used/by/apache/bin/php' 或始终使用 php /path/to/ 的整个路径运行 app/console php/used/by/apache/bin/php 应用程序/控制台

或者如果配置/php.ini 是问题，找出使用哪个： php -i | grep php.ini 结果：加载的配置文件 => /etc/php5/cli/php.ini" 例如您可以使用带有 --php-ini 或 -c 参数的不同配置文件： php -c /etc/php5 /cgi -i | grep php.ini

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-25T14:17:12.023

我为这个问题提出了一个定制的解决方案。

经过一上午的痛苦和绝望的尝试找到一个好的解决方案，下面是您问题的答案。

1）像这里一样在网络目录中创建一个文件*.bat ：*

`your_symfony_dir/www/web/console.bat`

这是文件*console.bat*的内容：

```
set cmd=%~1
cd ..
php app/console %cmd% 
```

2）在 web 目录中创建一个文件*.php ，如下所示：*

`your_symfony_dir/www/web/console.php`

这是文件*console.php*的内容：

```
<?php
if (!preg_match('/^192\.168\.(1)\.[0-9]+$/', $_SERVER['REMOTE_ADDR'])) {
    die("Access Denied!");
}
?>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Console</title>
    </head>
    <body style='font-family: monospace;'>
        <h1>Console</h1>
        <form method='POST'>
            <fieldset>
                <legend>Comandi base</legend>               
                <p><button name='pre_cmd[]' value='cache:clear'>Clear Cache</button></p>
                <p><button name='pre_cmd[]' value='assets:install'>Install Assets</button></p>
            </fieldset>
            <fieldset>
                <legend>Comando personalizzato</legend>             
                <p>php app/console <input type='text' name='cmd' value='' /><input type='submit' value='Esegui' name='submit' /> <input type='reset' value='Annulla' /></p>
            </fieldset>
        </form>
        <?php
        if ($_POST) {
            $cmd = $_POST['cmd'] ? $_POST['cmd'] : (is_array($_POST['pre_cmd']) ? $_POST['pre_cmd'][0] : false);
            if ($cmd) {
                echo "<div style='color:white;background:black;padding:10px'>";
                echo "<pre>";
                $output = array();
                exec($_SERVER['DOCUMENT_ROOT'] . '\console.bat "' . $cmd . '"', $output);
                foreach ($output as $o) {
                    echo htmlspecialchars($o);
                    echo PHP_EOL;
                }
                echo "</pre>";
                echo "</div>";
            } else {
                echo "<p>Comando vuoto</p>";
            }
        }
        ?>
    </body>
</html> 
```

在哪里总结，我得到了帖子值（命令行输入，例如“cache：clear”），我通过命令将它执行到*.bat*文件中：

```
exec($_SERVER['DOCUMENT_ROOT'] . '\console.bat "' . $cmd . '"', $output); 
```

3) 当您执行 url *www.tuodominio.it/console.php*时，您会看到可以输入命令的表单（例如 cache:clear）。为了我的舒适，我已经在 bat 文件中设置了“app/console”部分，所以我只需要输入“cache:clear”或“assets:install”等

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-13T17:06:51.033

运行命令的更简单的解决方案：

```
<pre>
<?php

$output = $return_var= null;
$command = __DIR__.'/../app/console -v cache:clear -e=prod';
echo "Running: $command\n";
exec($command, $output, $return_var);

if (!empty($output) && is_array($output)) {
    echo "Output:\n";
    foreach ($output as $line) {
        echo $line."\n";
    }
} else {
    echo 'Cache could not be cleared: '.var_export($return_var, true);
} 
```

改编自[https://github.com/jerome-fix/symfony-cmf-standard-with-sonata/blob/master/web/reload-fixtures.php](https://github.com/jerome-fix/symfony-cmf-standard-with-sonata/blob/master/web/reload-fixtures.php)

# c# - 子类的设计模式？

> ID：13443962
> 
> 赞同：0
> 
> 时间：2012-11-18T19:52:55.060
> 
> 标签：c#, parent-child

我有一个带有一些子（内部，非派生）类的类。理想情况下，我希望父类可以修改子类的某些字段，但不能公开。C# 中是否有实现此目的的设计？我想不出办法使用典型的访问修饰符（受保护的、私有的、公共的等）

例如，想象

```
Class Car{
    private Wheel wheel;
    Class Wheel
    {
        //I want this to be only accessible within Car and Wheel
        private int wheelSize;
    }
} 
```

所以，这不是我真正的代码，但传达了我想做的事情的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T20:09:08.860

您可以从中派生一个私有内部类，该类`Wheel`具有其他公共成员。该类`Wheel`将是抽象的。这确保不能创建它的任何实例。创建一个创建轮子的静态方法。该方法将创建 a`PrivateWheel`但将其返回为`Wheel`. 轮子总是暴露在外，`Wheel`但实际上是类型`PrivateWheel`。

```
public class Car {

    private PrivateWheel wheel;

    public Wheel { get { return wheel; } }

    public abstract class Wheel
    {
    }             

    private class PrivateWheel : Wheel
    {
        public int WheelSize { get; set; }
    }

    public static Wheel CreateWheel()
    {
        return new PrivateWheel();
    }
} 
```

# jquery - 可折叠表错误 jquery

> ID：13443963
> 
> 赞同：3
> 
> 时间：2012-11-18T19:53:00.473
> 
> 标签：jquery

我正在尝试制作一个可折叠的面板。下面的代码是我与表格最接近的代码，但是当我再次将其折叠进出时，`<td>`显示堆叠（仅在 Firefox 中发生）并且在 Chrome 中`<td>`，折叠后数据的宽度不正确。

也可以使图像反复切换吗？就像折叠时名称表中的绿点和关闭时的红点一样？

这是代码：

```
<?php
include "config/tabelwidth.php";
?>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>

<script type="text/javascript">                                         
$(document).ready(function() {

   $("tr.header").click(function () { 
      $("tr.child", $(this).parent()).slideToggle("fast");
      $("td.subs", $(this).parent()).slideToggle("fast");
   });
});

</script>                                                               

<table border="1px" width="<?php echo $width."px"?>">
    <tr class="header">
        <td width="<?php echo $width1."px"?>">naam</td>
        <td width="<?php echo $width2."px"?>" class="subs">subs</td>
        <td width="<?php echo $width3."px"?>" class="subs">subs</td>
        <td width="<?php echo $width4."px"?>" class="subs">subs</td>
    </tr>
    <tr class="child">
        <td width="<?php echo $width1."px"?>">data1</td>
        <td width="<?php echo $width2."px"?>">data2</td>
        <td width="<?php echo $width3."px"?>">data3</td>
        <td width="<?php echo $width4."px"?>">data4</td>
    </tr>
</table> 
```

**编辑**：

好的，所以更新我的 jQuery 工作！:)

我真的很喜欢在这里看到那些乐于助人的人，看来 jQuery 是一个非常值得学习的东西^^

如果我可以问你们是在哪里学习 jQuery 的？

最后我的问题的最后一部分..

假设我想要一个向下箭头（名称：arrowdown）折叠时的图像，如果隐藏箭头指向右侧（名称：arrowright）你们是如何解决这个问题的？;o :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:48:45.183

您所要求的几乎所有内容都可以通过一些 CSS 规则和一个非常简单的 jQuery 切换来完成。我在这里发布了一个例子：http: [//jsfiddle.net/2BbUw/](http://jsfiddle.net/2BbUw/)

基本要点是您创建的 CSS 规则仅强制第一行的第一个子项在`.collapsed`模式下可见 - 然后使用 jQuery 切换`.collapsed`表格本身的标签。

jQuery 然后变得非常简单：

```
$(document).ready(function () {
    $('table.collapsible tr:first-child').on('click', function(ev) {
        $(ev.target).closest('table.collapsible').toggleClass('collapsed');
    });​
});

// note that the above only works in later versions of jQuery, due to .on()
// If you are using an earlier version of jQuery, replace .on() with .bind() 
```

处理程序仅指向`tr:first-child`（表中的第一行）。因为这都是基于 CSS 选择器的，所以它也会自动应用于`.collapsible`页面中的所有表格。

CSS 稍微复杂一点，因为它使用了一系列伪选择器：

```
table.collapsible {
    width: 400px;
    border: 1px solid #666;
    margin: 5px;
    position: relative;
}

table.collapsible td {
    padding: 5px;
}
table.collapsible tr:first-child td:first-child {
    text-indent: 15px;
}

table.collapsible.collapsed tr:not(:first-child),
table.collapsible.collapsed tr:first-child td:not(:first-child) {
    display: none;
} 
```

对于您要求的指标 - 我会提出以下建议。请注意，这有点粗糙，但又是一个纯 CSS 解决方案（意味着在浏览器中非常快）。

```
table.collapsible::before {
    content: '';
    border: none;
    position: absolute;
    left: 5px; top: 12px;
    height: 10px; width: 10px;
    border-radius: 5px;
    background-color: green;
}
table.collapsible.collapsed::before {
    background-color: red;
} 
```

我想你会发现这适用于所有浏览器——由于都是 CSS 切换，所以速度非常快——并且可以用非常简单的 jQuery 处理你要求的各种事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:09:36.793

在 Firefox 16 和 Google Chrome 22 中测试工作正常（如果这有什么不同，就去掉 px） - 如果这有什么不同， 我就去掉了[小提琴](http://jsfiddle.net/nyYef/1/)`px`。

```
<table border="1px" width="400px">
    <tr class="header">
        <td width="100">naam</td>
        <td width="100" class="subs">subs</td>
        <td width="100" class="subs">subs</td>
        <td width="100" class="subs">subs</td>
    </tr>
    <tr class="child">
        <td width="100">data1</td>
        <td width="100">data2</td>
        <td width="100">data3</td>
        <td width="100">data4</td>    
    </tr>
</table>​ 
```

理想的解决方案是创建一个 CSS 精灵并切换其背景位置

## 编辑

升级你的 jQuery，我看到你正在使用 jQuery 1.3.2 并且看起来有一个错误将`<tr>`显示属性设置为`block`而不是`table-row`

![调试](../Images/92441f7f4d019283a4cb93c85d6204eb.png)

# php - Sort an array of dates using usort() and sort() functions

> ID：13443964
> 
> 赞同：1
> 
> 时间：2012-11-18T19:53:07.160
> 
> 标签：php, date, sorting

> **Possible Duplicate:**
> [Sort an array of dates using usort() and sort() functions by the timestamp converted by mktime()](https://stackoverflow.com/questions/13438441/sort-an-array-of-dates-using-usort-and-sort-functions-by-the-timestamp-conve)

I'm trying to sort an array of dates using sort() and usort() only - without using mktime(). I'm trying to compare month, day and year, but can not get the correct result, plus it gives me a bunch of warnings. Will appreciate any help.

```
$dates = array ('10-10-2003', '2-17-2002', '2-16-2003','1-01-2005', '10-10-2004' );
function toTime($date) {

return sort ($date, SORT_STRING);
}

function sortByTime($a, $b) {
$a = toTime($a);
$b = toTime($b);
if($a == $b) {
    return 0;
}
return $a < $b ? -1 : 1 ;
}

usort($dates, 'sortByTime');
print_r($dates); 
```

Thank you so much.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:16:39.617

> 使用[uksort](http://php.net/manual/en/function.uksort.php)通过回调按键排序
> 
> 在回调中只需将日期解析为时间戳并使用简单的比较

须藤代码：

```
function cmp($a, $b)
{
    global $array;
    return strcmp($array[$a]['db'], $array[$b]['db']);
}

uksort($array, 'cmp'); 
```

# font-face - export woff with postscript contour | how to use Sfnttool?

> ID：13443967
> 
> 赞同：0
> 
> 时间：2012-11-18T19:53:29.473
> 
> 标签：font-face, woff

To make font-face kit, I use the font-face generator by font squirrel : [http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

But this doesn't support postscript contour and it export only woff with truetype contour. Is there a website or a programm to do it?

<-- Edit -->

A guy from Typophile told me I could use sfntly ( [http://code.google.com/p/sfntly/](http://code.google.com/p/sfntly/) ) but I have absolutely no idea how to use this. Anyone knowes wehe to start with that ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T19:45:07.070

最简单的方法是从[http://people.mozilla.com/~jkew/woff/](http://people.mozilla.com/~jkew/woff/)`sfnt2woff`下载该工具

下载后，在 OS X 中打开 Terminal.app 并拖动`sfnt2woff`到终端窗口。（这会将应用程序的完整路径粘贴到命令行上。）然后是一个简单的终端命令：

```
/path/to/sfnt2woff -v 1.0 /path/to/font.otf 
```

将在与字体相同的目录中创建 WOFF。

# cuda - Efficient method to check for matrix stability in CUDA

> ID：13443968
> 
> 赞同：3
> 
> 时间：2012-11-18T19:53:34.870
> 
> 标签：cuda, pycuda, iteration

A number of algorithms iterate until a certain convergence criterion is reached (e.g. stability of a particular matrix). In many cases, one CUDA kernel must be launched per iteration. My question is: how then does one efficiently and accurately determine whether a matrix has changed over the course of the last kernel call? Here are three possibilities which seem equally unsatisfying:

*   Writing a global flag each time the matrix is modified inside the kernel. This works, but is highly inefficient and is not technically thread safe.
*   Using atomic operations to do the same as above. Again, this seems inefficient since in the worst case scenario one global write per thread occurs.
*   Using a reduction kernel to compute some parameter of the matrix (e.g. sum, mean, variance). This might be faster in some cases, but still seems like overkill. Also, it is possible to dream up cases where a matrix has changed but the sum/mean/variance haven't (e.g. two elements are swapped).

Is there any of the three options above, or an alternative, that is considered best practice and/or is generally more efficient?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-29T19:22:11.030

如果浏览器崩溃，我也会回到我在 2012 年发布的答案。

基本思想是，您可以使用 warp 投票指令执行简单、廉价的缩减，然后使用每个块的零个或一个原子操作来更新主机在每次内核启动后可以读取的固定映射标志。使用映射标志消除了在每次内核启动后显式设备主机传输的需要。

这需要内核中每个 warp 的一个共享内存字，这是一个很小的开销，如果您提供每个块的 warp 数作为模板参数，一些模板技巧可以允许循环展开。

一个完整的工作示例（使用 C++ 主机代码，我目前无法访问工作的 PyCUDA 安装）如下所示：

```
#include <cstdlib>
#include <vector>
#include <algorithm>
#include <assert.h>

__device__ unsigned int process(int & val)
{
    return (++val < 10);
}

template<int nwarps>
__global__ void kernel(int *inout, unsigned int *kchanged)
{
    __shared__ int wchanged[nwarps];
    unsigned int laneid = threadIdx.x % warpSize;
    unsigned int warpid = threadIdx.x / warpSize;

    // Do calculations then check for change/convergence 
    // and set tchanged to be !=0 if required
    int idx = blockIdx.x * blockDim.x + threadIdx.x;
    unsigned int tchanged = process(inout[idx]);

    // Simple blockwise reduction using voting primitives
    // increments kchanged is any thread in the block 
    // returned tchanged != 0
    tchanged = __any(tchanged != 0);
    if (laneid == 0) {
        wchanged[warpid] = tchanged;
    }
    __syncthreads();

    if (threadIdx.x == 0) {
        int bchanged = 0;
#pragma unroll
        for(int i=0; i<nwarps; i++) {
            bchanged |= wchanged[i];
        }
        if (bchanged) {
            atomicAdd(kchanged, 1);
        }
    }
}

int main(void)
{
    const int N = 2048;
    const int min = 5, max = 15;
    std::vector<int> data(N);
    for(int i=0; i<N; i++) {
        data[i] = min + (std::rand() % (int)(max - min + 1));
    }

    int* _data;
    size_t datasz = sizeof(int) * (size_t)N;
    cudaMalloc<int>(&_data, datasz);
    cudaMemcpy(_data, &data[0], datasz, cudaMemcpyHostToDevice);

    unsigned int *kchanged, *_kchanged;
    cudaHostAlloc((void **)&kchanged, sizeof(unsigned int), cudaHostAllocMapped);
    cudaHostGetDevicePointer((void **)&_kchanged, kchanged, 0);

    const int nwarps = 4;
    dim3 blcksz(32*nwarps), grdsz(16);

    // Loop while the kernel signals it needs to run again
    do {
        *kchanged = 0;
        kernel<nwarps><<<grdsz, blcksz>>>(_data, _kchanged);
        cudaDeviceSynchronize(); 
    } while (*kchanged != 0); 

    cudaMemcpy(&data[0], _data, datasz, cudaMemcpyDeviceToHost);
    cudaDeviceReset();

    int minval = *std::min_element(data.begin(), data.end());
    assert(minval == 10);

    return 0;
} 
```

这里，`kchanged`是内核用来向主机发出它需要再次运行的信号的标志。内核一直运行，直到输入中的每个条目都增加到阈值以上。在每个线程处理结束时，它参与一次warp 投票，之后每个warp 中的一个线程将投票结果加载到共享内存中。一个线程减少扭曲结果，然后自动更新`kchanged`值。主机线程等待设备完成，然后可以直接从映射的主机变量中读取结果。

您应该能够使其适应您的应用程序需要的任何内容

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-28T16:51:59.357

我会回到我原来的建议。我已经用我自己的答案更新[了相关问题](https://stackoverflow.com/questions/8416374/several-threads-writing-the-same-value-in-the-same-global-memory-location)，我认为这是正确的。

在全局内存中创建一个标志：

```
__device__ int flag; 
```

在每次迭代中，

1.  将标志初始化为零（在主机代码中）：

    ```
    int init_val = 0;
    cudaMemcpyToSymbol(flag, &init_val, sizeof(int)); 
    ```

2.  在您的内核设备代码中，如果对矩阵进行了更改，请将标志修改为 1：

    ```
    __global void iter_kernel(float *matrix){

    ...
      if (new_val[i] != matrix[i]){
        matrix[i] = new_val[i];
        flag = 1;}
    ...
    } 
    ```

3.  调用内核后，在迭代结束时（在主机代码中），测试修改：

    ```
    int modified = 0;
    cudaMemcpyFromSymbol(&modified, flag, sizeof(int));
    if (modified){
      ...
      } 
    ```

即使在不同的块甚至不同的网格中的多个线程正在写入`flag`值，只要它们所做的唯一事情是写入相同的值（即在这种情况下为 1），就没有危险。写入不会“丢失”，并且`flag`变量中不会出现虚假值。

以这种方式对平等进行测试`float`或`double`数量是有问题的，但这似乎不是您问题的重点。如果您有首选方法来声明“修改”，请改用该方法（例如在容差内测试相等性，也许）。

这种方法的一些明显增强是为每个线程创建一个（本地）标志变量，并让每个线程在每个内核中更新一次全局标志变量，而不是在每次修改时更新。这将导致每个内核每个线程最多一次全局写入。另一种方法是在共享内存中为每个块保留一个标志变量，并让所有线程简单地更新该变量。在块完成时，对全局内存进行一次写入（如果需要）以更新全局标志。在这种情况下，我们不需要求助于复杂的归约，因为整个内核只有一个布尔结果，并且我们可以容忍多个线程写入共享或全局变量，只要所有线程都写入相同价值。

我看不出使用原子的任何理由，或者它如何使任何事情受益。

至少与其中一种优化方法（例如，每个块共享标志）相比，缩减内核似乎有点矫枉过正。它会有你提到的缺点，例如任何小于 CRC 或类似复杂计算的东西都可能将两个不同的矩阵结果别名为“相同”。

# c# - How do I rotate meshes around their local axes in XNA?

> ID：13443969
> 
> 赞同：0
> 
> 时间：2012-11-18T19:53:38.460
> 
> 标签：c#, xna

I have an object in my game that has a few meshes and when I try to rotate either of the meshes either way, it only rotates it around world axis, and not its local axis. I have a `rotation = Matrix.Identity` in a class constructor. Every mesh has this class attached to it. Then this class also contains methods:

```
...
public Matrix Transform{ get; set; }
public void Rotate(Vector3 newRot)
{
    rotation = Matrix.Identity;
    rotation *= Matrix.CreateFromAxisAngle(rotation.Up, MathHelper.ToRadians(newRot.X));
    rotation *= Matrix.CreateFromAxisAngle(rotation.Right, MathHelper.ToRadians(newRot.Y));
    rotation *= Matrix.CreateFromAxisAngle(rotation.Forward, MathHelper.ToRadians(newRot.Z));

    CreateMatrix();
}

private void CreateMatrix()
{
    Transform = Matrix.CreateScale(scale) * rotation * Matrix.CreateTranslation(Position);
}
... 
```

And now the Draw() method:

```
foreach (MeshProperties mesh in model.meshes)
{
    foreach (BasicEffect effect in mesh.Mesh.Effects)//Where Mesh is a ModelMesh that this class contains information about
    {
        effect.View = cam.view;
        effect.Projection = cam.projection;
        effect.World = mesh.Transform;
        effect.EnableDefaultLighting();
    }
    mesh.Mesh.Draw();
} 
```

* * *

**EDIT:** I am afraid either I screwed somewhere up, or your tehnique does not work, this is what I did. Whenever I move the whole object(Parent), I set its `Vector3 Position;` to that new value. I also set every MeshProperties `Vector3 Position;` to that value. And then inside `CreateMatrix()` of MeshProperties I did like so:

```
...
Transform = RotationMatrix * Matrix.CreateScale(x, y, z) * RotationMatrix * Matrix.CreateTranslation(Position) * Matrix.CreateTranslation(Parent.Position);
... 
```

Where:

```
public void Rotate(Vector3 newRot)
{
    Rotation = newRot;
    RotationMatrix = Matrix.CreateFromAxisAngle(Transform.Up,          MathHelper.ToRadians(Rotation.X)) * 
    Matrix.CreateFromAxisAngle(Transform.Forward, MathHelper.ToRadians(Rotation.Z)) * 
    Matrix.CreateFromAxisAngle(Transform.Right, MathHelper.ToRadians(Rotation.Y));
} 
```

And `Rotation` is `Vector3`. `RotationMatrix` and `Transform` are both set to `Matrix.Identity` in the constructor.

The problem is if I try to rotate around for example Y axis, he should rotate in a circle while "standing still". But he moves around while rotating.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:45:08.410

我不完全确定这是你想要的。我在这里假设您有一个对象，其中一些网格和位置偏离主对象位置的位置和方向，并且您希望相对于父对象围绕其局部轴旋转子对象。

```
Matrix.CreateTranslation(-Parent.Position) *                  //Move mesh back...
Matric.CreateTranslation(-Mesh.PositionOffset) *              //...to object space

Matrix.CreateFromAxisAngle(Mesh.LocalAxis, AngleToRotateBy) * //Now rotate around your axis
Matrix.CreateTranslation(Mesh.PositionOffset) *               //Move the mesh...
Matrix.CreateTranslation(Parent.Position);                    //...back to world space 
```

当然，您通常存储一个变换矩阵，它可以一步将网格从对象空间转换到世界空间，并且您还可以存储逆矩阵。您还将网格始终存储在对象坐标中，并且仅将其移动到世界坐标中进行渲染。这会简化一些事情：

```
Matrix.CreateFromAxisAngle(Mesh.LocalAxis, AngleToRotateBy) * //We're already in object space, so just rotate
ObjectToWorldTransform *
Matrix.CreateTranslation(Parent.Position); 
```

我认为您可以简单地将示例中的 Mesh.Transform 设置为此并全部设置。

我希望这就是你要找的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T19:11:11.720

问题是，当我将模型导出为 .FBX 时，轴心点不在模型中心。从而使模型在旋转时移动。

# jquery - ASP.NET: How to display a jQuery Dialog after Page Response.Redirect?

> ID：13443970
> 
> 赞同：0
> 
> 时间：2012-11-18T19:53:45.167
> 
> 标签：jquery, asp.net, redirect, dialog, modal-dialog

Is it possible to show a jQuery Modal Dialog after a Page Redirect (Full Postback) ?

I have a page:

MyEditForm.aspx/EditId=0

In that page there is a form and a SAVE button, when I click the SAVE button I want to show a jQuery Modal Dialog giving the users some options but I want to show that dialog after I redirect the user to this page:

MyEditForm.aspx/EditId=500

It's the same page but with (EditId=500)

Here's my code:

```
StringBuilder sb = new StringBuilder();
sb.Append("jQuery(document).ready(function () {");
sb.Append("  jQuery(function() { ");
sb.Append("    jQuery('#MyDivID').dialog({");
sb.Append("      width: 350, autoOpen: true, modal: true);
sb.Append("    });");
sb.Append("  });");
sb.Append("});");

Page.ClientScript.RegisterStartupScript(this.GetType(), "MyDialogScript", sb.ToString(), true);

Response.Redirect("~/MyEditForm.aspx/EditId=" + NewRecordId, false); 
```

If I don't use Response.Redirect the Dialog works fine but I won't be able to redirect the user to the page with the new ID, how can I solve this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:04:39.773

将以下代码移入 Page_Load 方法中并像这样修改

```
protected void Page_Load(object sender, EventArgs e){
    int editId=0;
    if(Request["EditId"]!=null and Int32.TryParse(Request["EditId"], out editId)){
       if(editId>0){
          StringBuilder sb = new StringBuilder();
          sb.Append("jQuery(document).ready(function () {");
          sb.Append("  jQuery(function() { ");
          sb.Append("    jQuery('#MyDivID').dialog({");
          sb.Append("      width: 350, autoOpen: true, modal: true);
          sb.Append("    });");
          sb.Append("  });");
          sb.Append("});");
          Page.ClientScript.RegisterStartupScript(this.GetType(), "MyDialogScript", sb.ToString(), true);
       }
    }
} 
```

并`Respon.Redirect`在保存按钮单击处理程序中使用。

# scala - scalaz（scalaz7）中的全局默认隐式

> ID：13443971
> 
> 赞同：1
> 
> 时间：2012-11-18T19:54:01.077
> 
> 标签：scala, scalaz, scalaz7

当我使用 Scalaz 进行编码时，我经常遇到问题，即范围没有隐含。我认为在庞大的 scalaz 包中应该有一些默认的隐含，但要么我不知道在哪里，要么没有。

假设我们想要`show`任何`Any`scalaz （我使用的是 scalaz 7）：

```
scala>     import scalaz._
import scalaz._

scala>     import Scalaz._
import Scalaz._

scala>     {def a: Any = "sratatata"; a}.show
<console>:14: error: could not find implicit value for parameter F0: scalaz.Show[Any]
{def a: Any = "sratatata"; a}.show
^ 
```

这是行不通的，因为`Show[Any]`范围没有隐含。

为什么Scalaz不提供它？使用一些 global 的好方法是`Show[A]`什么？我的意思是这样的：

```
scala> implicit def anyShow[A] = Show.showFromToString[A]
anyShow: [A]=> scalaz.Show[A]

scala> {def a: Any = "sratatata"; a}.show
res0: scalaz.Cord = sratatata 
```

我觉得倒是一样`Equal`。

**编辑**

我已经尝试过添加答案中提到的方法，`import scalaz.syntax.ShowSyntax`但这并不能解决我的问题。看：

```
scala>     import scalaz._
import scalaz._

scala>     import Scalaz._
import Scalaz._

scala>     import scalaz.syntax._
import scalaz.syntax._

scala>     import scalaz.syntax.ToShowOps
import scalaz.syntax.ToShowOps

scala>     import scalaz.syntax.ShowSyntax
import scalaz.syntax.ShowSyntax

scala>     {def a: Any = "sratatata"; a}.show
<console>:19: error: could not find implicit value for parameter F0: scalaz.Show[Any]
{def a: Any = "sratatata"; a}.show 
```

编译器还想要一些`implicit scalaz.Show[Any]`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T21:58:35.823

`Show`仅当您静态知道类型时才有用；如果你只知道你有一个`Any`，就打电话`a.toString.`

如果需要`Show[String]`，请导入`scalaz.std.string._`；因为`Show[List[String]]`您需要同时*导入* `scalaz.std.list._`和`scalaz.std.string._`。

或者，您可以使用`scalaz.std.AllInstances._`.

这在@eed3si9n 的优秀[学习Scalaz](http://eed3si9n.com/learning-scalaz-day1)系列中逐步解释。

Scalaz 这里也有一些很好的指南：

[好的scalaz介绍](https://stackoverflow.com/questions/4863671/good-scalaz-introduction)

# javascript - window.location.href does not change the URL

> ID：13443974
> 
> 赞同：4
> 
> 时间：2012-11-18T19:54:20.880
> 
> 标签：javascript

I would like to change the URL that appears once a form has been submitted although the code below does not appear to do what I would like it to do. How do I change the URL in the address bar?

**CODE**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XMHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <meta http-equiv="content-language" content="en-us" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <meta name="copyright" content="&copy; 2012" />
    <meta name="robots" content="noindex, nofollow" />

    <title>sample form</title>

    <link rel="stylesheet" type="text/css" media="all" href="" />

    <style type="text/css">

    </style>

    <script type="text/javascript">

        var testurl = window.location.href;
        if(testurl == "file:///C:/Users/user/Desktop/sample_form.html?q=test&submit=submit") {
            testurl = testurl.replace(/q=[^&]+&[a-z]+\=[a-z]+/,'test');
            alert(testurl);
        }

    </script>
</head>

<body>

    <form name="sampleform" id="sampleform" method="get" action="sample_form.html">
        <input type="text" name="q" value="" id="q" />
        <input type="submit" name="submit" value="submit" id="submit" />
    </form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T19:55:54.817

尝试以下操作：

```
<script type="text/javascript">

    var testurl = document.URL;
    if(testurl == "file:///C:/Users/user/Desktop/sample_form.html?q=test&submit=submit") {
        testurl = testurl.replace(/q=[^&]+&[a-z]+\=[a-z]+/,'test');
        window.location.href = testurl;
    }

</script> 
```

一张纸条：

> 使用 window.location 对与当前帧关联的位置对象进行读写访问。如果您只想将地址作为只读字符串获取，您可以使用 document.URL，它应该包含与 window.location.href 相同的值

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T19:56:40.717

要更改网址，您必须这样做：

```
window.location.href = testurl; 
```

但这具有使用新网址加载整个页面的“副作用”（无论是否相同）。

如果您想更改显示的内容但不重新加载页面，则必须使用[pushState](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)来使用新的 HTML5 历史 API。这就是在许多 Ajax 站点中所做的，让 URL 反映动态加载页面中的内容，但它与 IE9- 不兼容。

```
var stateObj = { foo: "bar" };
history.pushState(stateObj, "some useless title", testurl); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T20:14:43.617

tl;dr:`testurl`不是对的引用`window.location.href`（它们只是具有相同的值），因此您需要将 URL 直接分配给`window.location.href`而不是`testurl`. 例如：`window.location.href = "http://example.com/redirect.html";`

基本上，假设您的网站位于 example.com/index.html，并且您想重定向到 example.com/redirect.html。

您的问题正在发生，因为您将位置分配给`testurl`，而不是`window.location.href`。让我解释：

1.  `var testurl = window.location.href;`将`window.location.href`（example.com/index.html）的值赋给变量`testurl`. 所以在这一点上，`testurl`并`window.location.href`设置为example.com/index.html，但它们彼此无关（`testurl`不是对的引用`window.location.href`，它只是具有相同的值）
2.  `testurl == testurl.replace(...);`替换`testurl`为您要重定向到的站点，但由于`testurl`不是*对*的引用`window.location.href`，因此`testurl`变为 example.com/redirect.html 并`window.location.href`保持原来的状态，即 example.com/index.html。

所以为了解决这个问题，你需要`window.location.href`直接设置，就像你设置任何其他变量一样，例如`window.location.href = "http://example.com/redirect.html";`.

为它分配一个变量将以完全相同的方式工作，如下所示：

```
var url = "http://example.com/";
// manipulate the url variable
window.location.href = url; 
```

然后，`window.location.href`将设置为任何`url`值（如果您根本没有操纵变量，则为[http://example.com/ ）](http://example.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-26T05:43:35.327

您可以使用以下解决方案来解决您的问题：

```
window.location.replace('@Url.Action("Action", "Controller")') 
```

# coffeescript - d3.js CoffeeScript 类执行上下文

> ID：13443977
> 
> 赞同：0
> 
> 时间：2012-11-18T19:54:41.680
> 
> 标签：coffeescript, d3.js

我正在使用 CoffeeScript 类创建一个 d3.js 图表。我想将一个方法附加到单击事件，然后根据单击的内容运行另一个方法：

```
class @Chart

  drawChart: ->
     ...

    dataArea
      .enter()
        .append("path")
          .on("click", @onClick);
     ...

  onClick: ->
    if d3.select(this).attr("type") == 'video'
      @runVideo(d3.select(this).attr("title"))

  runVideo: -> 
```

问题是在 onClick 方法中，执行上下文（“this”）是选择而不是 Chart 类，所以“runVideo 不是函数”。如何从 onClick 方法中访问选择属性并运行 runVideo 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:26:53.447

您想要做的是`this`在添加点击回调时以某种方式捕获。

你有几个选择：

```
// The Coffeescript way:
.on("click", (args...) => @onClick(args...));

// The jQuery way:
.on("click", $.proxy(@onClick, @))

// The ECMAscript5 way:
.on("click", @onClick.bind(@)) 
```

然后你需要解决`onClick`这个问题：

```
onClick: (evt) ->
  if d3.select(evt.target).attr("type") == 'video'
    @runVideo(d3.select(evt.target).attr("title")) 
```

# android - how to show a message in Facebook with Android

> ID：13443978
> 
> 赞同：-1
> 
> 时间：2012-11-18T19:54:52.453
> 
> 标签：android, facebook

I have the Facebook sdk integrated in my Android application and whenever I press the a button I want to be able to post a particular message (given by code) to be shown on the user's wall. I have written the following code up till now :

```
public void showFacebookDialog(String message) {
    // post on user's wall.
    // mFacebook.authorize(this, new PostDialogListener());

    Bundle parameters = new Bundle();
    //parameters.putString("message", "Some message");// the message to post
    parameters.putString("app_id", "my_id");
    parameters.putString("caption", "some caption");
    parameters.putString("description", "some description");
                                                    // to the wall
    mFacebook.dialog(GameActivity.this, "feed", parameters,
            new PostDialogListener());// "stream.publish" is an API call
    // mFacebook.dialog(this, "feed", new PostDialogListener());
} 
```

This is not working. I am not able to set a pre populated message inside the dialog box that is showing up. How do I go about this ?

Thank you in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T19:53:54.330

消息参数将被忽略。根据 Facebook 政策，您不能预先填充此字段。只有用户可以设置消息。

# iphone - Get specific range from NSArray

> ID：13443979
> 
> 赞同：0
> 
> 时间：2012-11-18T19:54:57.910
> 
> 标签：iphone, objective-c, ios, nsarray, date-range

So, I think this won't be easy ... Here goes: I have two NSArrays , each contain some custom objects (KVC compliant .. maybe this will help). The objects have two properties in the first array (lets call it array1) this objects are NSNumbers, in the second array one object is a NSNumber the other is a NSDate... Here is the 2-part question:

1) How do I get an NSArray from array 1 with all the objects that have one of the NSNumbers in a specific range

lets say the array is [(1,1),(2,4),(2,12), (3,14)] and I need an array that has the second value between 3 and 13, (only object 2 and 3 in this case) .. And yes the array is ordered on the second variable ...

2) In the second array I need objects that have the date in an interval, BUT I need to sub-split this interval in smaller intervals and the returned array will have this new objects that have the sum of the numeric objects from the first interval .... An example is in order in case I have not been clear ....

The initial array is [(2,January 12),(5,January 13),(20,march 15),(10, march 20),(26,April 28),(20,may 6),(30,july 4)]; And I need interval february 1 - may 30 , split into months, the result should be [(0,february),(30,march (20+10 from the initial array)),(26,april),(30,may)];

This initial date-number array will not change... and the subinterval split time frames will allways be : from the begining of the interval to the end of the last interval ... (from the first day (midnight) of january to the last day in march , or from the first second of 1:00 PM to 3:59:59.999 PM)

It would be wonderful if the solution is efficient, as these array might have up to 10,000 objects... and this getRangeWithInterval function may be called more than once a second (and should run on iPhone 3GS ... I hope I'm not asking for too much ). :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:46:04.320

第一个问题可以通过使用 NSPredicate 来解决。
假设，如果对象中的第二个 NSNumber 属性被调用`secondNumber`：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"secondNumber >= 3 && secondNumber <= 13"];
NSArray *filteredArray = [array1 filteredArrayUsingPredicate:predicate]; 
```

希望它可以编译——我在没有 XCode 的情况下编写了它。

第二个问题听起来有点难。
让我想想...

# php - 将 MP3 与 espeak、cat 和 PHP 合并

> ID：13443987
> 
> 赞同：0
> 
> 时间：2012-11-18T19:56:05.093
> 
> 标签：php, bash, nginx, mp3, freebsd

我有一系列从一首歌中截取的剪辑，还有一些由 espeak 通过标准输出制作的 mp3。

每当我尝试合并它们（使用 mp3wrap 或 cat）时，我都会听到整个声音，但只要有其中一个 espeak mp3，它就会跳过播放，就好像它们是空的一样。我能够播放这些文件并且内容就在那里。我已经尝试将 espeak 的输出管道化，以便对其进行正确编码，但这没有用。

我正在使用 PHP 和 nginx，因为这都是基于 Web 的，但我怀疑它应该对任何东西产生任何影响。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T22:06:58.373

如果您想*合并*一堆 mp3，请尝试执行以下操作：

```
sox files*.mp3 -t wavpcm - | lame - > bunch.mp3 
```

# c# - 小于字节存储的选项？

> ID：13443990
> 
> 赞同：4
> 
> 时间：2012-11-18T19:56:21.693
> 
> 标签：c#, .net

我有很长的多维数组，其中包含范围从 0 到 16 的值。

目前它们的存储方式如下：

```
byte[][,] example = new byte[1024][16,16]; 
```

这加起来大约 300kb。

有没有更有效的方法来存储这些数据？由于一个字节可以是 0 - 255，这将完全适合单行 16 个值，范围为 0 - 15。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T22:08:12.833

[BitVector32](http://msdn.microsoft.com/en-us/library/system.collections.specialized.bitvector32.aspx)将允许您将 8 个 4 位值打包成一个 32 位整数。由于您的数组的每个维度基本上都有 64 位（如果我理解正确，16 行 16 个 4 位值），您可能也对[这个类](http://robkennedy.com/2010/08/17/bitvector64-c-source-code/ "这节课")感兴趣。

# html - 如何使各种宽度的图像居中，同时在每个图像的右侧有一块文本？

> ID：13443991
> 
> 赞同：1
> 
> 时间：2012-11-18T19:56:25.253
> 
> 标签：html, css, scale, centering

我有一个图片库，我希望图片在页面上水平居中。我希望将图像元数据、标题、艺术家姓名等放在该图像的右侧。

首先，我尝试在包含 div 内并排浮动图像和 meta_data，但随后图像不再根据页面居中，因为包含 div 的整体宽度用于居中。另外，我不知道包含 div 的宽度应该是什么，因为我不知道图像的宽度，它是动态的。我不想在 div 上设置硬编码宽度，因为我想让图像根据设计缩小。

然后我尝试使用`display:table display:row display:cell`，其中图像在左侧单元格中，元数据在右侧单元格中。桌子会伸展到图像的宽度，这很棒。然后，我将`position:relative`元数据表单元格放在右侧，然后`positive:absolute`将包含元数据的 div 放在右侧。这在大多数浏览器中效果很好，但在 FF 中无法正确显示。我发现`table-cell`并`position:relative`没有很好地混合......即使`position:relative`嵌套在不同的元素中。

因此，我尝试将图像和元数据元素都放在包含 div 的`display:inline-block; positive:relative`. 这再次围绕我的内容延伸，而没有像常规`display:block`那样一直延伸到最大宽度，这很棒。我再次将元数据绝对定位在右侧。它在 chrome、ff 和 safari 中看起来很棒……但是，现在我的动态图像缩放中断了。我调整了图像的大小，`max-width:100%`以便它可以针对移动设备缩小。但是在 FF 中这不起作用。我想图像无法读取内联块上的宽度是多少？我尝试在图像周围放置另一个 div，`display:block`但这仍然不起作用。

什么是使图像居中的好方法，但将一段文本定位在其右侧，但`max-width:100%`在缩放时仍然有图像响应？

到目前为止我所拥有的[示例：](http://www.sketchfemme.com/popular)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-06T19:08:30.107

在 FF 中，添加`width: 100%`到内容容器可以使其在更小的屏幕尺寸下进行伸缩；但是，这会导致它破裂，并且容器在较大的屏幕尺寸下会填满整个宽度。你在使用媒体查询吗？如果是这样，您可以在低于指定的屏幕宽度时正确设置宽度。

# java - 超出 Java GC 开销限制。大量的哈希图和一个优先队列。我能做些什么？

> ID：13443992
> 
> 赞同：3
> 
> 时间：2012-11-18T19:56:26.507
> 
> 标签：java, garbage-collection, limit, overhead

我一直在寻找答案，但我没有找到任何可以 100% 回答我的问题的东西。:D
所以，我需要从一个哈希映射创建其他 3 个新的哈希映射，以 3 种不同的方式交换它的 2 个值（我使用`map2.putAll(map1)`并稍后切换 2 个值），稍后我必须将哈希映射存储在有序的优先队列中，然后轮询其中之一并重复该过程。

问题开始了，因为我必须这样做很多次，因为不满足特殊条件......而且没有办法减少我做的地图数量（好吧，我可能会阻止被骗的地图，但它会是我认为非常昂贵：/）。

实际上，我真的不介意我是否将所有地图存储在某个地方（从我读到的内容，我发现这是 GC 错误）或者我是否必须做其他技巧......我只是想让我的代码工作，没有（如果可能的话）使用像'-XX:-UseGCOverheadLimit'这样的东西，因为它是一种家庭作业（即使没有标记），它必须与提示符下的'java classname'一起使用。

唯一的限制是准时（这不是问题，100% 确定，已经测试过），它将只用简单的输入进行测试（这已经很好），但我想让它能够做一些困难的事情。

我感谢你的建议。

哦，地图是这样的：`<Integer,Integer>`并且大小为`16`. 不幸的是，我不能在这里发布代码，因为作业还没有结束（即使我提交了我的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:02:39.407

很难从描述中准确判断代码中发生了什么，但如果分配和丢弃映射的内存开销是杀死您的原因，您可以缓存 Map 实例并重用它们。使用一些对象池实现，周围有负载，或者如果只有一个线程，则只使用堆栈作为对象池。

您遇到的另一个问题是使用 Integer 会导致大量内存流失，并且由于 Integer 是不可变的，这有点痛苦。[用Trove int/int](http://trove4j.sourceforge.net/javadocs/gnu/trove/map/hash/TIntIntHashMap.html)地图替换你的地图，你就可以排序了 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:11:16.060

HashMap 在内存方面很昂贵：仅当您需要从大型数据集中快速搜索时才使用它们。拥有“并且大小为 16”看起来根本不需要 Hashmap。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T20:24:14.670

如果您能给我们提供有关分配给您的任务的更多细节，这可能会有所帮助……但让我分享一下我对此的看法。

首先，使用 Integer （类）与 int （原语）应该没有太大的错误。它*确实*使用了更多的内存，但是嘿，它仍然只是整数。除非您有大量的问题，否则您不应该遇到任何问题。HashMap 也一样。信任社区。如果 HashMap 存在严重问题，我们现在就会发现。

这听起来像你有内存泄漏。检查你的程序。你说你不想提高内存限制（如果你问我是明智的决定），但你可能会尝试这个只是为了测试。如果您确实有内存泄漏，您的程序将只运行稍长一点的时间，然后再给您完全相同的问题。有专门的工具可以检测内存泄漏，但只要使用标准的 Windows 进程管理器并随时关注程序的内存消耗，就可以快速发现是否存在泄漏。如果您的程序一遍又一遍地做同样的事情，您应该期望内存消耗相对稳定。随着垃圾收集器再次分配和收集内存，它会随着时间的推移而上升和下降，但这应该保持在相当稳定的带宽内。

如果您确信您没有内存泄漏，那么您可能正在以错误的方式解决问题。例如，处理文件的简单实现可能会将文件读入内存，对其进行处理，然后再次将其保存回来……但如果文件为 1GB 大，那么该方法将消耗 1GB 的内存来存储加载的数据。如果它需要能够处理大量数据，不要一次性处理，而是分块工作。将部分文件数据读入缓冲区，处理它，摆脱处理过的数据并读取下一个块。这样，您的应用程序就可以处理任何大小的文件。这只是一个例子，但这种东西是典型的内存问题。要么你有泄漏，要么你的方法是错误的。只有庞大且处理大量数据的程序才能达到内存限制。大多数程序都不是这样的。他们要么有内存泄漏，要么使用了错误的方法来解决问题。

# qt - 每 n 秒更新一次 QLineEdit 值

> ID：13443998
> 
> 赞同：1
> 
> 时间：2012-11-18T19:56:45.640
> 
> 标签：qt, refresh, qlineedit

初学者的问题，但实际上我被卡住了。我不允许使用“高级”c++ 线程函数（也不是 pthread，也不是 QThread）。但是，我应该使用 winAPI 函数 createThread 创建一些线程。那些线程用来改变一些变量。我想在 QLineEdit 组件中每 1 秒显示一次这些变量。所以我尝试了如下代码：

```
 stillWorking = true;
    while(stillWorking){
        ui->editElement->setText(QString::number(getVariableValue()));
        qDebug() << 'running!!!'
        Sleep(1000);
    } 
```

`stillWorking`布尔值设置`false`为单击某个按钮时。这就是我希望停止这个循环的方式。但是，当我执行代码时，`editElement`没有更新，应用程序停止响应。但是，该`'running!!!'`字符串每秒都会在调试部分很好地打印出来。那么，还有其他方法可以访问和显示我的变量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T20:08:59.050

你应该使用 a [`QTimer`](http://doc.qt.digia.com/qt/qtimer.html)，假设你被允许（即使你被允许使用线程）。在 UI 线程上做任何类型的阻塞都不起作用，它需要被释放才能让事件处理工作，并且对点击做出反应需要事件处理。

[计时器](http://doc.qt.digia.com/qt/timers.html)页面有更多信息和如何使用它的示例。这里的想法是创建一个简单的插槽：

```
ui->editElement->setText(QString::number(getVariableValue())); 
```

和一个连接到该插槽的重复计时器。

（这假设`getVariableValue()`已正确同步，并且确实看到了来自该其他线程的更新值。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-08T22:17:52.300

您可以使用这两种方式中的任何一种；

第一个是上面从 Mat 解释的

第二种方法是如果你的类派生自 QObject，你可以覆盖 timerEvent

```
class MyObject : public QObject
{
    Q_OBJECT

public:
    MyObject(QObject *parent = 0);

int timerID;

protected:
    void timerEvent(QTimerEvent *event);
};

MyObject::MyObject(QObject *parent)
    : QObject(parent)
{

    timerID = startTimer(1000);   // 1-second timer

}

void MyObject::timerEvent(QTimerEvent *event)
{

    ui->editElement->setText(QString::number(getVariableValue()));

    this->killTimer(timerID); // you can use here if you plan stop timer

} 
```

在您的函数中，如果 while 循环中断，您的可见小部件将更新，否则您的应用程序可以工作，但在循环过程中不更新任何 gui 小部件。