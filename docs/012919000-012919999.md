# StackOverflow 问答 12919000-12919999

# c# - 在 C# 中将字符串变量拆分为一个空格或 2 个空格

> ID：12919005
> 
> 赞同：5
> 
> 时间：2012-10-16T16:12:26.550
> 
> 标签：c#, string

我有一个字符串变量，基本上是 3 个字符串，每个字符串用一个空格分隔。这 3 个字符串的长度可能不同。像

```
string line="XXX YY ZZ"; 
```

现在，偶尔会发生我的字符串变量`line`由 3 个字符串组成，其中第一个和第二个字符串由 2 个空格分隔，而不是一个。

```
string line="XX  YY ZZ"; 
```

我想要做的是将 3 个字符串存储在一个字符串数组中。像：

`string[] x`, `x[0]="XXX"`, `x[1]="YY"`_`x[2]="ZZ"`

我尝试使用拆分功能。

```
string[] allId = line.Split(' '); 
```

它适用于第一种情况，不适用于第二种情况。有什么简洁、简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T16:15:41.423

只需从结果中删除空字符串：

```
var allId = line.Split(new char[] {' '}, StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-16T16:16:02.093

使用正则表达式拆分。为什么？空格不是唯一代表空格的字符；也有标签。

通过使用带有`\s+`模式的正则表达式拆分，该操作将*使用*所有空格组合，即使是制表符和空格的混合，从而允许返回文本。例子

```
var result = Regex.Split("XX  YYY    ZZZ", @"\s+");

// "XX", "YYY", "ZZZ" returned in array 
```

![Linqpad 结果图像捕获](../Images/8419f9bf79f232b19758ac116bba8b56.png)

**模式总结**

`\s` 表示任何非字符、空格或制表符。 `+` 在它说之后，我希望至少有一个，但可以找到不止一个。

所以`+`后面的`\s`意思是正则表达式处理器将寻找一个或多个空格作为匹配分割。比赛之间的一切都将被退回。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T16:19:38.577

您使用带有额外参数的 split 方法。

该`.split`方法记录[在这里](http://msdn.microsoft.com/en-us/library/ms131448.aspx)。

第二个参数`options`是类型`StringSplitOptions`并[在此处](http://msdn.microsoft.com/en-us/library/system.stringsplitoptions.aspx)定义。

此参数的 2 个可能值是`StringSplitOptions.None`和`StringSplitOptions.RemoveEmptyEntries`。

因此，只需执行以下操作：

```
string[] allId = line.Split(new char[] {' '}, StringSplitOptions.RemoveEmptyEntries); 
```

你有你想要的！简单的。

# android - Android中的触摸屏功能问题

> ID：12919006
> 
> 赞同：1
> 
> 时间：2012-10-16T16:12:27.877
> 
> 标签：android, touchscreen

我正在尝试获得触摸屏功能。我想根据用户是向上还是向下触摸屏幕来执行一些操作。

这是我的代码

```
public class Sankhyaki extends Activity  implements OnTouchListener, OnKeyListener  {

float x = 0, y = 0;

public static final String TAG="Sankhayaki";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_sankhyaki);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_sankhyaki, menu);
    return true;
}

public boolean onTouch(View v, MotionEvent me)
{

    x = me.getX();
    y = me.getY();

    switch ( me.getAction()) {
    case MotionEvent.ACTION_DOWN:
        System.out.println("\n ACTION DOWN");
        Log.i(TAG, "DOWN");
        Log.i(TAG,"DOWN");
        Log.i(TAG, "x = " + x + "y = " + y );
        break;

    case MotionEvent.ACTION_UP:
    System.out.println("\n ACTION UP");
        Log.i(TAG, "UP");
        Log.i(TAG, "x = " + x + "y = " + y );

        break;

    case MotionEvent.ACTION_MOVE:
    System.out.println("\n ACTION MOVE");
        Log.i(TAG, "MOVE");
        Log.i(TAG, "x = " + x + "y = " + y );
        break;              

    }

    return false;
 }

} 
```

在模拟器上运行它时，当我单击屏幕时，我在 LogCat 或控制台中看不到任何消息。我不确定我是否做错了什么。只是因为我在 Logcat 或控制台中没有看到任何日志消息，所以看起来控制在 switch case 中没有进行。

我无法验证我是否做对了。

只有在我确定控制权进入开关盒后，我才想在开关盒中放入更多代码，而这里没有发生，

这里的任何信息都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:16:53.927

您必须将您的活动注册为侦听器。首先，在您的 XML 布局文件中，您需要一个根视图的 id：android:id="@+id/your_view"

在你的 onCreate() 方法中，这样写：

```
View v=findViewById(R.id.your_view); 
v.setOnTouchListener(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:18:30.137

您需要在适当的视图上正确注册触摸事件处理程序...

[http://developer.android.com/guide/topics/ui/ui-events.html](http://developer.android.com/guide/topics/ui/ui-events.html)

[http://developer.android.com/reference/android/view/View.html#setOnTouchListener(android.view.View.OnTouchListener](http://developer.android.com/reference/android/view/View.html#setOnTouchListener(android.view.View.OnTouchListener) )

[http://developer.android.com/reference/android/view/View.OnTouchListener.html](http://developer.android.com/reference/android/view/View.OnTouchListener.html)

您需要在布局中的适当视图项目上设置它..

```
View v = findViewById(R.id.whateverView);
v.setOnTouchListener(new onTouchListener()
{
    public void onTouch(View v, MotionEvent event)
    {
        //handle the event
    }
 }); 
```

# php - 为什么要检查数组的值是否是数组？

> ID：12919009
> 
> 赞同：3
> 
> 时间：2012-10-16T16:12:51.187
> 
> 标签：php

我在 PHP Solutions, 2nd Edition 一书中遇到了以下代码

```
<?php
foreach ($_POST as $key => $value) {
    // assign to temporary variable and strip whitespace if not an array
    $temp = is_array($value) ? $value : trim($value);
    // if empty and required, add to $missing array
    if (empty($temp) && in_array($key, $required)) {
        $missing[] = $key;
    } if (in_array($key, $expected)) {
        // otherwise, assign to a variable of the same name as $key
        ${$key} = $temp;
    }
}
?> 
```

我的问题是关于这条线：

`$temp = is_array($value) ? $value : trim($value);`

如果 $value 是数组中保存的值（用户从表单输入的内容），为什么确定该值是否为数组至关重要？是为了安全吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T16:16:10.527

“为什么确定值是否为数组至关重要？”

因为`trim`需要一个字符串，并且在传递数组时该函数可能不起作用。它与安全无关。

# ios - 块定义之间的 iOS 循环依赖

> ID：12919010
> 
> 赞同：4
> 
> 时间：2012-10-16T16:12:55.460
> 
> 标签：ios, typedef, objective-c-blocks, block

在我的 iOS 应用程序中，我想定义两个将彼此作为参数的块类型：

```
typedef void (^BlockA)(BlockB b);
typedef void (^BlockB)(BlockA a); 
```

在第一个 typedef 中使用“未知类型名称 BlockB”编译失败（这是有道理的）。

我有一个解决方法，它定义了这样的类型：

```
typedef void (^BlockA)(id);
typedef void (^BlockB)(BlockA a); 
```

然后我在 BlockA 定义中转换回 BlockB 类型，但以牺牲类型安全为代价。

我还研究了不使用 typedef，但这会导致扩展块定义的无限嵌套。

我知道如何解决具有前向声明的结构的循环依赖关系，但我看不到如何使用块来做到这一点。

如果没有解决循环依赖的方法，有没有办法可以将 BlockA 的参数限制为任何 Block 类型而不是 generic `id`，这将提供一定程度的类型安全。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:40:54.387

`typedef`没有定义“真实”类型。它基本上就像一个宏，可以在任何使用它的地方扩展。这就是为什么`typedef`s 不能递归的原因。

另一种思考方式是，`typedef`s 从来都不是必需的——你总是可以用 a 获取任何一段代码`typedef`，并简单地将它的每一个出现替换为底层类型（这是编译器在编译时所做的），它会始终工作并完全等效。想一想——如果没有 ，你会怎么做`typedef`？你不能。所以你不能用一个来做到这一点`typedef`。

唯一的方法是：使用`id`作为参数类型来擦除你正在做的类型；或者，将块封装在“真实”类型中，如`struct`或类。但是，如果使用后一种方式，则必须显式地将块放入结构或类中并从结构或类中提取块，这会使代码混乱。此外，`struct`由于 struct 是标量 C 类型，因此很危险，如果您需要通过块捕获它，它不会自动对结构内的对象进行内存管理。至于类，定义包装类非常冗长，为此使用它会导致为其包装的每个块分配一个无关的虚拟对象。

在我看来，`id`像你正在使用的那样使用很好，而且是最干净的方式。但是，请记住，如果您需要将该块传递`id`为由另一个内部块捕获，则应在捕获之前将其转换回块类型，因为块和其他对象类型（块）的捕获语义不同被复制，而其他对象被保留）。只需在最早的地方将其转换回块类型即可。

# java - 如何从 Spring 字符编码中排除文件？

> ID：12919017
> 
> 赞同：1
> 
> 时间：2012-10-16T16:13:12.940
> 
> 标签：java, spring, spring-mvc

我有一个 UTF-8 字符编码过滤器和一个用于 *.jsp 的过滤器映射。但是，我的 .jsp 文件之一返回二进制响应（例如 GIF），我想排除它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:34:44.537

使用 .jsp 返回 gif 可能是一种不好的做法

除了 web.xml 过滤器设置之外，您还可以扩展 spring 并使其成为二进制安全的

```
public class BinarySafeCharacterEncodingFilter extends CharacterEncodingFilter {

    @Override
    protected void doFilterInternal(HttpServletRequest request,
            HttpServletResponse response, FilterChain filterChain)
            throws ServletException, IOException {

        if(!"image/gif".equals(response.getContentType())){
            super.doFilterInternal(request, response, filterChain);
        }

    }

} 
```

# c# - C#混合模式程序集发布模式错误

> ID：12919020
> 
> 赞同：1
> 
> 时间：2012-10-16T16:13:16.877
> 
> 标签：c#, .net-assembly, mode, mixed

我正在使用 .NET 框架 4.5 在 C# 上构建应用程序，但我使用的其中一个 dll 是使用 .NET 2.0 构建的，因此我正在尝试添加混合模式汇编功能。

这是我收到的错误：`Mixed mode assembly is built against version 'v2.0.50727' of the runtime and cannot be loaded in the 4.0 runtime without additional configuration information.`

我试过这个[http://msdn.microsoft.com/en-us/library/bbx34a2h.aspx](http://msdn.microsoft.com/en-us/library/bbx34a2h.aspx)现在我的 app.config 看起来像这样：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5"/>
  </startup>
</configuration> 
```

当我在 Visual Studio 中以发布模式运行应用程序时，它会按预期运行，但是当我尝试在其工作环境中运行它时，它会因上述错误而崩溃。

我也试过这个[[在发布模式下构建时出现混合模式错误](https://stackoverflow.com/questions/9159776/mixed-mode-error-when-building-in-release-mode)]，但没有成功。

我还缺少其他东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:20:37.513

正如@Amitd 建议的那样，我将 [appname].exe.config 文件复制到了工作目录，现在该应用程序按预期工作了！

# ruby-on-rails - 设计+omniauth facebook：登录后current_user nil

> ID：12919025
> 
> 赞同：5
> 
> 时间：2012-10-16T16:13:40.627
> 
> 标签：ruby-on-rails, heroku, devise, omniauth

我们使用rails、devise和omniauth通过facebook注册和登录。我们托管在 Heroku 上，运行两个网络 dyno。

*有时*使用 facebook 登录失败。我们的应用程序和 Facebook 之间的实际握手很好。事实上，在下面的代码中，@user 是一个实际的 User 模型实例，omniauth 数据哈希包含来自 FB 的所有数据，sign_in 似乎成功并且 current_user 已设置。

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def facebook
    @user = User.find_for_facebook(env["omniauth.auth"].extra.raw_info, current_user)

    logger.info ">>>>>> OMNIAUTH FB BEGIN >>>>>>"
    logger.info env["omniauth.auth"].inspect
    logger.info "User is: #{@user.inspect}"

    session["devise.facebook_data"] = request.env["omniauth.auth"].except("extra")

    flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Facebook"
    res = sign_in(:user, @user)

    logger.info "Sign In Result: #{res.inspect}"
    logger.info "CURRENT_USER: #{current_user.inspect}"
    logger.info "<<<<<< OMNIAUTH FB END <<<<<<"

    respond_to do |format|
      format.json
    end
  end
end 
```

成功登录后，客户端会重定向（基于登录上下文的不同操作）到我们网站上的另一个 URL。在那个 URL，我们检查 current_user... 但 current_user 返回 nil。如果登录过程重复几次，最终它会起作用。

我们在

*   导轨 3.2
*   设计 2.1.2
*   Omniauth-facebook 1.4.0
*   红宝石 1.9.3 p194

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2014-04-15T21:52:39.750

我不知道这是否真的是您所描述的解决方案，但我想知道这是否：

> @user = User.find_for_facebook(env["omniauth.auth"].extra.raw_info, current_user)

应该这样读？

> @user = User.find_for_facebook(request.env["omniauth.auth"].extra.raw_info, current_user)

反正我的就是这样。不确定这是否能解释为什么您的应用程序会任意让用户登录。

# c++ - 为什么 _initterm 在 Visual Studio 2003 中编译时可能会丢失函数指针，但在使用 msys config/build 时不会？

> ID：12919026
> 
> 赞同：2
> 
> 时间：2012-10-16T16:13:45.053
> 
> 标签：c++, visual-studio-2003, msys

我目前正在处理一个非常旧的代码库，试图解决构建问题。目前我们使用 msys 命令行指令构建项目`config/build`，这工作正常。但是，如果该项目是在 Visual Studio 2003 中构建的，然后逐步执行，则其行为会略有不同：

`Foo`在上面的类定义的全局范围内是以下行：

`bool Foo::init = registerDescriptor();`

（`registerDescriptor()`方法在 中定义`Foo`）。

在构建 msys 后逐步执行此行时`_initterm`，crt0dat.c（.NET 2003 源代码的一部分）中的方法会拾取这一行，并运行 registerDescriptor 中的代码。

但是，如果我们在 Visual Studio 2003 中构建然后单步执行，则忽略此行。

msys 构建过程使用与 Visual Studio 相同的编译器，我知道的唯一区别是命令行参数和 msys 逐个文件夹构建。

# android - 带有滑动抽屉的 Nexus 7 布局问题

> ID：12919027
> 
> 赞同：1
> 
> 时间：2012-10-16T16:13:48.023
> 
> 标签：android, android-layout, slidingdrawer, nexus-7

现在，在我的应用程序中，我在屏幕右侧有一个滑动抽屉，用户可以将其拉到左侧以查看更多详细信息。问题在于滑动抽屉的“把手”。在所有设备上，它看起来都很棒，而且它应该在哪里。但是，在 Nexus 7 上，右侧有额外的空间。

![棕色的空间不应该在中间](../Images/2c9e3f6133b59796540e99f0dcf5eac1.png)

这是我的布局代码。请帮助确定 Nexus 7 的不同之处。谢谢。

```
 <com.app.android.apps.app.views.DragContentSlidingDrawer
                   android:id="@+id/drawer"
                   android:layout_width="match_parent"
                   android:layout_height="fill_parent"
                   ancestry:orientation="horizontal"
                   android:layout_alignParentRight="true"
                   ancestry:handle="@+id/panel_slider2"
                   ancestry:content="@+id/panel_frame"
                   ancestry:allowSingleTap="false" >

    <ImageView android:layout_width="wrap_content"
               android:layout_height="fill_parent"
               android:id="@+id/panel_slider2"
               android:src="@drawable/panel_handle"
               android:scaleType="fitXY"
               android:layout_alignParentRight="true"

            />

    <RelativeLayout android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:gravity="right"
                    android:id="@+id/panel_frame">

        <LinearLayout android:layout_width="fill_parent"
                      android:layout_height="fill_parent"
                      android:gravity="right"
                      android:layout_alignParentBottom="true"
                      android:layout_alignParentRight="true"
                      android:id="@+id/panel_layout">

            <FrameLayout android:layout_height="fill_parent"
                         android:layout_width="fill_parent"
                         android:id="@+id/panel_layout_holder"
                         android:background="@color/background"/>

        </LinearLayout>

    </RelativeLayout>

</com.app.android.apps.app.views.DragContentSlidingDrawer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:03:36.593

看来我的帖子不足以解决这个问题。绘制句柄的代码是“Viewgroup”中“dispatchDraw”的重写方法。为了解决这个问题，在该方法中，我检测手柄位置并使用下面的代码修复它。

```
 if (mHandle.getLeft() == 0) {
        handle.offsetLeftAndRight(10);
    } 
```

为什么这只会发生在 Nexus 7 上仍然不太合理，但最终，这解决了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T07:33:22.963

似乎您在使用 XML 代码时犯了错误。尝试以下更正：

```
<com.app.android.apps.app.views.DragContentSlidingDrawer
                   android:id="@+id/drawer"
                   android:layout_width="**fill_parent**"
                   android:layout_height="fill_parent"
                   ancestry:orientation="horizontal"
                   android:layout_alignParentRight="true"
                   ancestry:handle="@+id/panel_slider2"
                   ancestry:content="@+id/panel_frame"
                   ancestry:allowSingleTap="false" > 
```

# c# - 在运行时创建类

> ID：12919029
> 
> 赞同：0
> 
> 时间：2012-10-16T16:13:58.763
> 
> 标签：c#, list

我有一个每天由一些 c# 代码写入的 sql 数据库，其中包含特定日期的股票信息。

字段：StockCode、NumberOfHolders、值、日期

每天都有一条带有日期戳的新记录添加到数据库中。

我需要能够创建以下格式的列表；

```
 date1   date2   date3
 stock1   100     104      110
 stock2   105     100      99 
 stock3   150     150      80 
```

等等

但是，该列表似乎必须是动态的，因为字段会根据系统中每只股票的日期数量而变化。

所以我不能使用这样的类；

```
private class Stocks: ExcelReport
{
  public String StockCode { get; set; }
  public Double TotalQtyHeld { get; set; }
  public Double TotalValueOfStock { get; set; }
  public DateTime Date { get; set; }
} 
```

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T16:18:51.420

你不能创建一个可以像这样保存日期和值的类：

```
private class StockValue
{
  public Double TotalQtyHeld { get; set; }
  public Double TotalValueOfStock { get; set; }
  public DateTime Date { get; set; }
}

private class Stocks: ExcelReport
{
  public String StockCode { get; set; }
  public IList<StockValue> Values {get;set;}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:19:01.323

我不确定我是否理解，所以如果我的回答对您的要求微不足道，请原谅我。你不只需要一个值列表吗？类生成听起来像是一个天才的解决方案，但它对于这项任务来说太复杂了。

创建日期/股票信息值（或对象）的列表。您可以使用 a`Tuple<Date, double>`作为类型或创建自己的自定义类：

```
class DataValue
{
    public DateTime Date { get; set; }
    public double Value { get; set; }
} 
```

然后只需使用`List<DataValue>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:28:34.197

只要您有 2-3 个值，键值/元组列表就可以满足您的目的，如果您需要更多信息，请使用 Jeffery 解决方案。

```
private class Stocks : ExcelReport
    {
        public String StockCode { get; set; }
        public List<Tuple<DateTime, Double, Double>> StocksValues { get; set; }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T16:29:51.987

并不是说这是您使用的最佳选择，但是您可以在运行时编译自己的类并加载它们。下面是一个如何将文本编译成 DLL 的示例。

```
 CSharpCodeProvider codeProvider = new CSharpCodeProvider();

        System.CodeDom.Compiler.CompilerParameters parameters = new CompilerParameters();
        parameters.GenerateExecutable = false;
        parameters.GenerateInMemory = false;
        parameters.WarningLevel = 3;
        parameters.CompilerOptions = "/optimize";
        parameters.OutputAssembly = "C:\\test\\test.dll";
        parameters.ReferencedAssemblies.Add("Microsoft.CSharp.dll");
        parameters.ReferencedAssemblies.Add("System.dll");
        parameters.ReferencedAssemblies.Add("System.Core.dll");
        parameters.ReferencedAssemblies.Add("System.Data.dll");
        parameters.ReferencedAssemblies.Add("System.Data.DataSetExtensions.dll");
        parameters.ReferencedAssemblies.Add("System.XML.dll");
        parameters.ReferencedAssemblies.Add("System.XML.Linq.dll");

        CompilerResults results = codeProvider.CompileAssemblyFromSource(parameters, _BaseCode.ToArray());

        if (results.Errors.Count > 0)
        {
            LogError(results.Errors[0].ErrorText, "Error Compiling", null, "", ErrorLevel.Critical);
            throw new Exception("Error Compiling..");
        } 
```

上面的代码只是我用来编译代码的一个更大的方法的一个片段。一些变量不存在等。将其用作基础并查找正在使用的方法。编译代码后，您可以加载 DLL 并创建一个实例。下面的代码显示了一些示例。

```
System.Reflection.Assembly _A = System.Reflection.Assembly.LoadFile(FileLocation);

return (T)_A.CreateInstance(_ClassName, true, System.Reflection.BindingFlags.CreateInstance, null, Arguments.ToArray(), System.Globalization.CultureInfo.CurrentCulture, null); 
```

# php - 我可以像mysql一样在memcached上设置用户名和密码吗？

> ID：12919032
> 
> 赞同：2
> 
> 时间：2012-10-16T16:14:06.517
> 
> 标签：php, memcached

我在我的 ubuntu 上安装了 memcached 和 php-memcached，我可以通过 localhost 的 11211 端口连接到它。我可以在其中存储数据，但我想在它上面设置用户名和密码，就像我连接到数据库时一样。有可能吗？如何？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T16:18:16.543

`sasl_pwdb`用于更简单的身份验证部署

`--enable-sasl-pwdb`允许 memcached 使用它自己的密码文件并验证明文密码。该文件由环境变量指定`MEMCACHED_SASL_PWDB`，是一个纯文本文件，语法如下：

```
username:password 
```

请注意，您必须`mech_list: plain`在您的 sasl 配置文件中指定它才能工作。前任：

```
 echo "mech_list: plain" > memcached.conf
 echo "myname:mypass" > /tmp/memcached-sasl-db
 export MEMCACHED_SASL_PWDB=/tmp/memcached-sasl-db
 export SASL_CONF_PATH=`pwd`/memcached.conf
./memcached -S -v 
```

并且您应该能够使用您最喜欢的支持 sasl 的 memcached 客户端连接到服务器。（请注意，并非所有 SASL 实现都支持`SASL_CB_GETCONF`，因此您可能必须将 sasl 配置（memcached.conf）安装到系统范围的位置）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:18:05.580

是的，通过 SASL：[http ://code.google.com/p/memcached/wiki/SASLAuthProtocol](http://code.google.com/p/memcached/wiki/SASLAuthProtocol)

# python - Scrapy 和 XPath 的一般选择

> ID：12919033
> 
> 赞同：2
> 
> 时间：2012-10-16T16:14:08.873
> 
> 标签：python, xpath, scrapy

我刚刚开始`Scrapy`，浏览了一些示例并自己编写了一个`spider`，但现在我在一般选择文本数据时遇到了问题。例如，如果表格单元格中的文本并不总是唯一的，我将如何只选择它格式：

```
<table>
 <tr>
    <td>
        <div id="somediv1">
              <span>blablabla</span>
         </div>
    </td>
    <td>
        <div id="somediv2">
              <span>text2</span>
         </div>
          <div id="somediv3">
              <span>text3</span>
         </div>

         <span>text4</span>
    </td>
 </tr>
</table> 
```

因此，单元格内的文本将嵌套在未知标签内，我当然只想提取没有任何标签的干净文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:54:16.530

**使用**：

```
//table//td//text()[normalize-space()] 
```

这将选择作为 XML 文档元素的`td`后代的 a 的后代的任何非全空白文本节点。`table`

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:for-each select="//table//td//text()[normalize-space()]">
       <xsl:copy-of select="."/>
=============   
     </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<table>
    <tr>
        <td>
            <div id="somediv1">
                <span>blablabla</span>
            </div>
        </td>
        <td>
            <div id="somediv2">
                <span>text2</span>
            </div>
            <div id="somediv3">
                <span>text3</span>
            </div>
            <span>text4</span>
        </td>
    </tr>
</table> 
```

**评估 XPath 表达式并将所有选定的文本节点复制到输出，使用视觉上独特的分隔符字符串**：

```
blablabla
=============   
     text2
=============   
     text3
=============   
     text4
============= 
```

**更新**：

如果源 XML 文档位于默认命名空间中，则应更改上述 XPath 表达式以说明这一事实：

```
//x:table//x:td//text()[normalize-space() 
```

其中前缀`"x"`绑定到源 XML 文档的默认命名空间。

**这是一个完整的示例**，基于 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:x="http://www.w3.org/1999/xhtml">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:for-each select="//x:table//x:td//text()[normalize-space()]">
       <xsl:copy-of select="."/>
=============   
     </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档**（提供的文档，但放在默认（XHTML）命名空间中时：

```
<table xmlns="http://www.w3.org/1999/xhtml">
    <tr>
        <td>
            <div id="somediv1">
                <span>blablabla</span>
            </div>
        </td>
        <td>
            <div id="somediv2">
                <span>text2</span>
            </div>
            <div id="somediv3">
                <span>text3</span>
            </div>
            <span>text4</span>
        </td>
    </tr>
</table> 
```

**再次产生相同的正确结果**：

```
blablabla
=============   
     text2
=============   
     text3
=============   
     text4
============= 
```

# windows - 在vim中保存整个文件

> ID：12919034
> 
> 赞同：3
> 
> 时间：2012-10-16T16:14:17.453
> 
> 标签：windows, vim

我有一个非常大的 CSV 文件，超过 2.5GB，当导入 SQL Server 2005 时，会`Column delimiter not found`在特定行 (82,449) 上显示错误消息“”。

问题在于该列文本中的双引号，在这种情况下，它是某人写的注释字段“ `Transferred money to ""MIKE"", Thnks`”。

因为文件太大，我无法在记事本++中打开它并进行更改，这让我找到了VIM。

我对 VIM 非常陌生，我查看了教程文档，该文档教我如何更改文件，`82,449 G`以查找行，`l`到现场，`x`双引号。

当我使用 保存文件时`:saveas c:\Test VIM\Test.csv`，它似乎是文件的一部分。原始文件为 2.6GB，新保存的文件为 1.1GB。原始文件有 9,389,222 行，新保存的有 3,751,878 行。我尝试`G`在保存之前使用命令到达文件底部，这增加了相当多的大小，但仍然没有保存整个文件；在使用之前`G`，该文件只有 230 MB。

关于我为什么不保存整个文件的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T16:27:04.347

您确实需要使用类似于`sed`Linux 上的“流编辑器”，它可以让您通过管道传输文本，而无需尝试将整个文件保存在内存中。在 sed 我会做类似的事情：

```
sed 's/""MIKE""/"MIKE"/' < source_file_to_read > cleaned_file_to_write 
```

有一个[用于 Windows 的 sed](http://gnuwin32.sourceforge.net/packages/sed.htm)。

作为第二种选择，您可以使用 Perl、Python 或 Ruby 等编程语言逐行处理文件中的文本，在搜索双引号时写入，然后更改相关行，然后继续编写直到文件被完全处理。

如果您的机器有足够的空闲 RAM，VIM 可能能够加载文件，但这将是一个缓慢的过程。如果是这样，您可以使用以下命令从直接模式搜索：

```
:/""MIKE""/ 
```

并手动删除双引号，或让 VIM 使用以下命令自动进行更改：

```
:%s/""MIKE""/"MIKE"/g 
```

在任何一种情况下，使用以下命令写入然后关闭文件：

```
:wq 
```

在 VIM 中，直接模式是编辑器的正常状态，您可以使用`ESC`密钥进入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:05:56.920

当您能够打开文件而没有出现类似的错误`E342: Out of memory!`时，您也应该能够保存完整的文件。至少应该有一个错误`:w`，没有错误的部分保存是严重的数据丢失，并且应该在 vim_dev 邮件列表或[http://code.google.com/p/vim上报告为错误/问题/列表](http://code.google.com/p/vim/issues/list)

你使用的是哪个版本的 Vim？在 Windows 7/x64 上使用 GVIM 7.3.600（32 位），我无法在没有*内存不足的*情况下打开 1.9 GB 的文件。[我能够从这里](http://code.google.com/p/vim-win3264/)成功打开、编辑和保存（完全！）一个 64 位版本 7.3.000 的 3.9 GB 文件。如果您还没有使用本机 64 位版本，请尝试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:38:04.987

您还可以将文件拆分为更小更易于管理的块，然后将其组合回来。这是 bash 中的一个脚本，可以将文件分成相等的部分：

```
#!/bin/bash

fspec=the_big_file.csv
num_files=10 # how many mini-files you want

total_lines=$(cat ${fspec} | wc -l)
((lines_per_file = (total_lines+num_files-1) / num_files))
split --lines=${lines_per_file} ${fspec} part.
echo "Total Lines = ${total_lines}"
echo "Lines per file = ${lines_per_file}"
wc -l part.* 
```

我刚刚在一个 1GB 的文件上测试了它，它有 61151570 行，每个生成的文件几乎是 100 MB

编辑：

我刚刚意识到您在 Windows 上，因此上述内容可能不适用。您可以使用[简单的文本拆分器](http://sourceforge.net/projects/simpletextsplit/)之类的实用程序和执行相同操作的 Windows 程序。

# reporting-services - Visual Studio 报告服务报告 2008

> ID：12919035
> 
> 赞同：0
> 
> 时间：2012-10-16T16:14:22.367
> 
> 标签：reporting-services

我正在尝试生成查询返回的每条记录（或行）有 2 行的报告。只需第一行将包含某些字段，但在它返回下一行/记录之前..它会生成一个子行，您可以称之为包含一个附加字段的子行。这可能吗？我有另一个这样做的想法，那就是在行的末尾添加额外的字段并将行换行以适合页面，从而使其每条记录/行返回 2 行。

在使用 tablix 和这些报告时，我完全是个菜鸟，所以细节会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:00:40.993

在报表设计器中，右键单击详细信息行标题（灰色区域，应该有 3 条水平线），然后选择插入行 -> 内部组（在上方或下方，取决于您想要行的位置）。 ![SSRS 行插入](../Images/6f308d65a1d96aed3dbb1aaccdd55866.png)

这将向当前组添加一个新行，当前组是您的详细信息行。然后，您可以将字段和文本添加到第二行，当报表运行时，这两者都将显示在每个数据集记录中。

# c# - 控制事件以区分设计器和运行时

> ID：12919045
> 
> 赞同：0
> 
> 时间：2012-10-16T16:15:15.363
> 
> 标签：c#, winforms, visual-studio, windows-forms-designer

标题可能具有误导性。我有以下

1.  扩展的自定义用户控件`Windows.Forms.Control`
2.  `ActiveX`要嵌套在用户控件中的控件

在`HandleCreated`用户控件的事件中，我正在初始化 ActiveX 控件的新实例并将其添加到`ControlCollection`用户控件的实例中。这导致 ActiveX 控件即使在设计期间也显示为用户控件的一部分。我正在寻找一个事件或方法，以便 ActiveX 控件仅在运行时初始化，而不是在设计时显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:16:31.187

使用组件的[**DesignMode**](http://msdn.microsoft.com/en-us/library/system.componentmodel.component.designmode.aspx)属性。

```
if(!DesignMode)
{

} 
```

# xstream - Xstream - 向根节点添加属性

> ID：12919046
> 
> 赞同：2
> 
> 时间：2012-10-16T16:15:18.700
> 
> 标签：xstream

我正在使用 Xstream 序列化对象列表。（任务对象列表）。

我将 XML 返回到 jsp 页面。

```
HashMap<String, Object> m = new HashMap<String, Object>();
XStream xstream = new XStream();
xstream.alias("Task", Task.class);
xstream.alias("Tasks", Vector.class);
m.put("task", task);
m.put("xml", xstream.toXML(l));

return new ModelAndView("task", m); 
```

最终的 XML 结构如下所示：

```
<Tasks>
 <Task>
    <TaskId>1<TaskId>
    <TaskName>Task 1</TaskName>
    etc...
 </Task> 
```

的根节点作为向量返回，我使用 xtream 将其别名为“任务”，如上所示。

当我创建新任务或更新任务时，我有重新排列任务顺序、编号等的代码，因此我返回任务对象的完整列表。但是我想将我刚刚创建/更新的单个 TaskId 的值作为属性存储在 XML 结构的根节点中，这样我就不必通过网络进行 2 次调用，并且我的客户端代码可以访问数据库中新的/更新的任务行的 id。

因此，例如，如果我创建了一个新任务并为其分配了 5 的 TaskId，我希望将任务 ID 存储在根节点中，如下所示：

```
<Tasks myId="5">
<Task>
    <TaskId>1</TaskId>
    <TaskName>Task 1</TaskName>
</Task>
<Task>
    <TaskId>2</TaskId>
    <TaskName>Task 2</TaskName>
</Task>
...
<Task>
    <TaskId>5</TaskId>
    <TaskName>Task 5</TaskName>
</Task>
etc 
```

我如何使用 Xstream 完成此任务？我是否需要使用 XSLT 文件来转换 XML 输出？实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:08:52.817

您可以通过为任务编写转换器并在 marshal 方法中设置属性字段来做到这一点，

> writer.addAttribute("mydtl",tasks.get(2).getTaskName());

请参阅以下链接以创建转换器，

[http://x-stream.github.io/converter-tutorial.html](http://x-stream.github.io/converter-tutorial.html)

# c# - 具有许多异步插入的 MySQL 连接器池

> ID：12919047
> 
> 赞同：2
> 
> 时间：2012-10-16T16:15:29.637
> 
> 标签：c#, .net-4.0, task-parallel-library, mysql-connector

我正在阅读有关[MySQL：Using Connector/Net with Connection Pooling](http://dev.mysql.com/doc/refman/5.0/en/connector-net-programming-connection-pooling.html)的信息。建议不要使用全局`MySqlConnection`对象并手动打开/关闭它。此外，建议使用`MySqlHelper`而不是使用`MySqlCommand`对象。

因此，假设我有一个`CONNECTION_STRING`设置，我可以执行以下操作：

```
MySqlHelper.ExecuteNonQuery(CONNECTION_STRING,
    @"INSERT INTO `table1` (`col3`,`col4`) VALUES (@col3, @col4 );",
    (new List<MySqlParameter>() {
                new MySqlParameter("@col3", @"another value"),
                new MySqlParameter("@col4", @"some value")    
            }).ToArray()
    ); 
```

现在，假设我在异步并行任务中（通过 TPL）进行了几千次上述调用。

我的 MySQL 服务器上有一些允许的最大连接数，我开始收到异常，声称用户已超过最大连接数。我认为连接池应该为我自动处理这个？司机不是应该自动为我汇集和排队吗？

我目前允许最多 1500 个连接，我在连接字符串中添加了这个：

`Pooling=True;minimumPoolSize=0;maximumpoolsize=100;`

但是，我仍然超出了最大连接数。我需要一些关于如何处理许多异步插入而不超出这个最大连接限制的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T17:31:46.640

除此之外`max_connections`，`max_user_connections`这里很重要。可以查询：

```
show variables like 'max_user_connections'; 
```

为避免超过 MySQL 用户的最大连接数，您需要确保`maximumpoolsize`（在连接字符串中）设置为低于此值`max_user_connections`，并且其他应用程序未打开与同一用户帐户的连接，其总数可能超过上限。例如，如果我的上限为 15，我可以将我的设置为 5。

大多数托管服务都非常普遍地限制这一点，以限制您使用的资源。

在单个连接中执行大量查询也可能是一种可行的解决方法。

此外，有时主机限制`max_queries_per_hour`和其他此类变量。

# r - 使用效果包时“下标越界”

> ID：12919049
> 
> 赞同：0
> 
> 时间：2012-10-16T16:15:34.847
> 
> 标签：r

我正在使用效果包构建一些概率图，显示逻辑回归模型的预测概率。但是，我收到一条奇怪的错误消息，不知道问题出在哪里。

当我尝试生成图时，出现以下错误。警告不是问题，而是我不理解错误消息告诉我的内容。

```
library(effects)    

dat$won_ping = as.factor(dat$won_ping)

mod2 = glm(won_ping ~ our_bid +
  age_of_oldest_driver2 + 
  credit_type2 + 
  coverage_type2 +
  home_owner2 +
  vehicle_driver_score + 
  currently_insured2 +
  zipcode2,
  data=dat, family=binomial(link="logit"))

> plot(effect("our_bid*vehicle_driver_score", mod2), rescale.axis=FALSE, multiline=TRUE)
Warning message:
In analyze.model(term, mod, xlevels, default.levels) :
  our_bid:vehicle_driver_score does not appear in the model
Error in plot(effect("our_bid*vehicle_driver_score", mod2), rescale.axis = FALSE,  : 
  error in evaluating the argument 'x' in selecting a method for function 'plot': Error in apply(mod.matrix[, components], 1, prod) : 
  subscript out of bounds 
```

这是有关我的数据和 glm 命令的信息：

```
> str(dat)
'data.frame':   85240 obs. of  71 variables:
 $ our_bid                     : num  155 123 183 98 108 159 98 123 98 200 ...
 $ won_ping                    : Factor w/ 2 levels "0","1": 1 1 2 1 1 1 1 1 1 1 ...
 $ zipcode2                    : Factor w/ 4 levels "1:6999","10000:14849",..: 4 3 2 1 3 2 3 1 2 2 ...
 $ age_of_oldest_driver2       : Factor w/ 4 levels "18 to 21","22 to 25",..: NA 3 NA NA NA NA 3 NA 3 NA ...
 $ currently_insured2          : Factor w/ 2 levels "0","1": 2 1 2 2 1 1 2 2 1 1 ...
 $ credit_type2                : Ord.factor w/ 4 levels "POOR"<"FAIR"<..: 2 3 2 3 2 2 1 3 3 2 ...
 $ coverage_type2              : Factor w/ 4 levels "BASIC","MINIMUM",..: 4 3 3 3 3 3 3 3 4 3 ...
 $ home_owner2                 : Factor w/ 2 levels "0","1": 1 2 2 2 2 2 2 2 2 2 ...
 $ vehicle_driver_score        : Factor w/ 2 levels "0","1": 1 1 1 1 1 1 1 1 1 1 ... 
```

最后，这里可能是一些有用的信息：

```
> sessionInfo()
R version 2.14.0 (2011-10-31)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252    LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                           LC_TIME=English_United States.1252    

attached base packages:
[1] grid      stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] effects_2.2-1    colorspace_1.1-1 nnet_7.3-1       MASS_7.3-16      lattice_0.20-0   foreign_0.8-46  

loaded via a namespace (and not attached):
[1] tools_2.14.0 
```

帮助！错误信息是什么意思？通常，如果“下标超出范围”，则意味着我正在选择该数据结构范围之外的内容，但这根本不会发生。

**编辑：**

致@罗兰

正如我上面所说，警告和错误消息是分开且不相关的。假设我取出 zipcode2 并运行 glm：

```
mod2 = glm(won_ping ~ our_bid +
  age_of_oldest_driver2 + 
  credit_type2 + 
  coverage_type2 +
  home_owner2 +
  vehicle_driver_score + 
  currently_insured2,
  data=dat, family=binomial(link="logit"))

> plot(effect("our_bid*home_owner2", mod2), rescale.axis=FALSE, multiline=TRUE)
Warning message:
In analyze.model(term, mod, xlevels, default.levels) :
  our_bid:home_owner2 does not appear in the model 
```

这只会产生警告，这很好，因为我得到了想要的结果。因此，“ *：* ”没有出现在模型中的事实不是问题，也不会导致错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:43:29.960

试试这个：

```
with(dat, table(our_bid, vehicle_driver_score)) 
```

我怀疑你有一些无人居住的细胞。通过您的编辑，我假设的稀疏性似乎不太可能出在这两个变量上。尽管有大量案例，当使用所有这些因子变量构建模型时，仍有可能存在空单元格。

# android - Android WifiManager getConnectionInfo 需要 CHANGE_WIFI_STATE？

> ID：12919052
> 
> 赞同：1
> 
> 时间：2012-10-16T16:15:45.067
> 
> 标签：android, permissions, wifimanager

我收到有关缺少 CHANGE_WIFI_STATE 权限的错误的用户报告：

错误：

```
java.lang.SecurityException: WifiService: Neither user 10137 nor current process has android.permission.CHANGE_WIFI_STATE.
    at android.net.wifi.WifiManager.getConnectionInfo(WifiManager.java:642) 
```

这是代码块：

```
WifiManager wifiMan = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);
if (wifiMan != null) {
    WifiInfo wifiInfo = wifiMan.getConnectionInfo(); 
```

我认为这只需要 ACCESS_WIFI_STATE，因为我没有对 wifi 进行任何启用/禁用？无法在测试中复制。

# java - 了解 Android 上的多点触控？

> ID：12919054
> 
> 赞同：2
> 
> 时间：2012-10-16T16:15:45.947
> 
> 标签：java, android

我发现这篇文章：[http](http://android-developers.blogspot.ca/2010/06/making-sense-of-multitouch.html) ://android-developers.blogspot.ca/2010/06/making-sense-of-multitouch.html这有助于我的理解，但我仍然不确定如何做我想做的事做。

在我的游戏中，我有一个虚拟模拟摇杆和一些按钮。一次只能注册 2 个手指。这就是我要的。一个用于模拟摇杆，一个用于按钮。

我不确定的主要事情是，假设我将手指放在模拟摇杆上并四处移动，然后将手指放在按钮上，然后松开按钮，模拟摇杆应该继续移动到我的第一根手指。

反之亦然，如果按钮先触摸然后再触摸模拟摇杆，如果我放开模拟摇杆，按钮仍应按下。

触摸指针在 Android 上是否以这种方式工作，例如，一旦我放下手指，无论我向上或向下放置任何其他手指，它都会按顺序记住我的第一根手指并给它一个向下、移动、移动、向上移动事件?

谢谢

理想情况下，我希望我有这样的功能：

```
void onTouch(int fingerID, int action, int x, int y)
{

} 
```

当手指抬起时，放下的每个手指都会收到向下、移动和向上事件。

该游戏是一款赛车游戏，因此他们需要能够同时驾驶和推动油门。

我的问题类似于 [action_move 中已识别的多点触控指针](https://stackoverflow.com/questions/10054065/identified-multi-touch-pointer-in-action-move)

编辑：

我有这个代码：

```
private void onTouch(int finger, int action, float x, float y)
    {
        if(action == MotionEvent.ACTION_DOWN || action == MotionEvent.ACTION_POINTER_DOWN)
        {
            createInput(finger, x, y);
        }
        else if(action == MotionEvent.ACTION_MOVE)
        {
            inputMove(finger, x, y);
        }
        else if(action == MotionEvent.ACTION_UP  || action == MotionEvent.ACTION_POINTER_UP)
        {
            destroyInput(finger, x, y);
        }
    }

    public void onTouch(MotionEvent ev)
     {
         final int pointerCount = ev.getPointerCount();
         for (int p = 0; p < pointerCount; p++) {
             onTouch(ev.getPointerId(p), ev.getAction(), ev.getX(p), ev.getY(p));
         }
     } 
```

但它只适用于第一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:30:41.177

因此，从 MotionEvent 类中给出的示例中：

```
 public boolean onTouch(MotionEvent ev) {
     final int pointerCount = ev.getPointerCount();
     for (int p = 0; p < pointerCount; p++) {
         onTouch(ev.getPointerId(p), ev.getAction(), ev.getX(p), ev.getY(p));
     }
     return true;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:28:33.627

您可以查看在 AChartEngine 中处理缩放以进行缩放的方式。请参阅[此](http://code.google.com/p/achartengine/source/browse/trunk/achartengine/src/org/achartengine/TouchHandler.java)代码，从第 80 行开始。一开始它可能看起来很复杂，但它可能会帮助您处理更多用例。

# unix - 有没有办法在 unix 命令行中添加注释？

> ID：12919056
> 
> 赞同：2
> 
> 时间：2012-10-16T16:15:52.867
> 
> 标签：unix, command-line-arguments

我正在编写一个程序（在 python 中），它调用一个单独的程序（通过子进程）。我发现在某些情况下，子程序会卡住运行。我可以通过运行 top 看到子程序，如果我按“c”，我可以看到完整的命令行。

我想要的是能够在我调用子程序时在命令行中粘贴调试数据（如当前线程 id 等），这样我就可以进一步调试我的问题。

有没有办法将注释放在命令行参数中，以便它们显示在顶部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:18:40.640

我想不出直接的方法，但您可以编写一个小 shell 脚本，将实际命令传递给该脚本以运行以及参数*和*调试信息。它会显示在 top/ps 输出中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:22:46.127

不要让他们发表评论，而是将他们置于环境中。例如，如果你有一个`/proc`文件系统，你可以这样做：

```
FOO=value cmd 
```

当 top 显示命令的 pid 时，执行：

```
tr '\000' '\012' < /proc/pid/environ | grep FOO 
```

在cmd的环境中查看FOO的值。如果值包含换行符，则需要更加小心显示，例如：

```
perl -n0E 'say if /FOO/' /proc/pid/environ 
```

# php - 使用新的 facebook 支付报告 API

> ID：12919057
> 
> 赞同：1
> 
> 时间：2012-10-16T16:15:57.020
> 
> 标签：php, facebook

一直试图从 facebook 支付报告 API 获取数据，因为他们在 11 月 7 日表示将不再通过电子邮件发送报告。尝试了 php 并得到一个错误 - “SSL 连接超时”。这是我正在使用的 php curl 代码：

```
$set_action_url = "https://paymentreports.facebook.com/".$company_id."/report?date=".$date."&type=".$type."&access_token=".$company_token;
$ch = curl_init($set_action_url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch,CURLOPT_TIMEOUT,5);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT ,0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
$result = curl_exec($ch); 
```

我在调用之前记录了 url 和查询字符串，如果我在浏览器中使用它，我会得到文件。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:27:37.613

尝试添加：

```
curl_setopt($ch, CURLOPT_SSLVERSION, 3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:06:25.463

要获取 zip 文件，file_get_contents 也可以

# agile - 使用点估计任务

> ID：12919058
> 
> 赞同：0
> 
> 时间：2012-10-16T16:16:00.667
> 
> 标签：agile, scrum

我最近开始在使用点完成任务估计的环境中工作。我没有找到任何强调这个过程的好处的资源，所以我必须求助于 SO 社区来弄清楚它们是什么。如果你们中的任何人曾在使用点数来估计任务的 Scrum 环境中工作，那么使用小时数的主要好处是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:46:11.053

**tl; dr**命名的区别是语义上的，它是为了帮助您以不同的方式/正确地考虑估计。

当我在一个 Scrum 团队工作时，Scrum Master 向我解释说，要点（双关语）是它们应该是问题*规模的指标*。如果您根据时间进行估算，那么（非技术人员，尤其是 PHB）人们会开始将您的估算视为截止日期。如果一个管理页面估计需要 32 小时，那么这些人会在本周末之前“只”想要那个页面......尽管它取决于其他可能需要 100 小时的幕后工作并且可能是单独任务甚至故事的一部分。此外，您可能是错误的（并且可能是），因此重要的是要考虑这些是规模指标，而不是需要多长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T04:01:59.257

Scrum 中的估计是理解和有效执行的关键方面。工程师（尤其是）来自更传统的以小时为单位的估算实践是很常见的。我们都知道这些在历史上是多么容易出错。

分数背后的前提是它们是一个故事与另一个故事相比的**相对权重（基本上是努力）的估计。**因此，如果我说某个特定故事的权重为“2”，而另一个故事的权重为“5”，我真的是说故事#2 的大小大约是故事#1 的两倍。事实证明，人类非常适合相互比较项目——“这比那个大”、“这比那个大得多”等等。我们不太擅长分配绝对值——“这正是3立方米大小”。因此，为什么将任意 # 小时的工作时间分配给工作项目通常会在实践中产生非常糟糕的结果。

分数发挥作用的地方在于冲刺的速度。这只是衡量一组人在给定的时间段内通常完成多少分，通常是 2-4 周。经过少量冲刺并假设团队成员在一起，无论团队正在处理什么类型的故事，速度都会趋于稳定。然而，团队成员自己而不是 Scrum Master、经理或其他非团队成员创建点估计是**至关重要的。**否则整个过程会崩溃，sprint 很可能会失败。

点数也反映了故事的复杂性。你在分数范围上移动得越远，比如 20、40 等，这个故事对那个团队来说风险和复杂性就越大。因此，尽管您可以说大小为 20 的故事大约是 5 磅故事大小的 4 倍，但事实上，一个 20 磅的故事可能实际上是 25 或 30 磅。故事的复杂性和范围导致估计可能不太可靠。因此，团队通常会与产品负责人合作，尽可能将故事大小调整为 2-5 磅；不要太大，不要太小。

最后，随着团队对 Scrum 的熟练程度越来越高，就有可能开始对未来的一套故事（通常称为史诗）何时完成进行预测。这可以设置产品或功能的目标日期。如果一个团队以点为单位估计了一组故事，并且该团队的速度已经稳定，那么您可以预测出完成工作可能需要的冲刺数，假设没有对积压工作进行进一步的更改。我和我的团队在从新产品到维护版本的几个项目中这样做，它可以非常准确，比我们在 Scrum 之前的日子里依赖小时数时要准确得多。

从小时转移到积分的好处可以总结如下：

*   以点为单位估计更快。
*   以点为单位估计更准确。
*   以点为单位估计更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T01:39:03.233

Scrum 没有具体说明您如何估计 sprints 计划的剩余工作。听起来您正在使用任务来创建计划。我参与的一些团队成功地将任务数量用作剩余工作的总和。一些使用时间。一些团队只是使用剩余的产品待办事项项目故事点数作为剩余内容的衡量标准。

我没有与使用分数来估计任务**和**故事 (PBI) 的团队合作，但如果他们开始了解经济体的差异，我想它可以为他们工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T03:21:04.880

敏捷的原则之一是反馈：衡量和适应。在一小时内使用积分的好处是更容易回答“这个任务是另一个任务的两倍”这个问题，而不是“团队需要多长时间才能完成那个任务”，尤其是在一个开始的时候。项目。随着项目的进展，您可以观察每单位时间运送了多少点，并且您可以轻松确定是否可以在特定时间范围内完成任务。从本质上讲，这相当于估算小时数，但估算是基于观察到的团队过去，包括所有使估算变得困难的无形因素（人们是否能很好地合作，非编码活动会消耗时间） -你避免“时间讨价还价”。

# java - 安卓：本地化。如何将xml字符串读入数组

> ID：12919060
> 
> 赞同：1
> 
> 时间：2012-10-16T16:16:07.157
> 
> 标签：java, android, xml, localization, arrays

I created an app which displays a list of fruit and when selected the new activity display the image and the name of the fruit. 但是，我需要本地化应用程序，并且我的字符串存储在 Java 中的字符串数组中，而不是存储在 strings.xml 值文件夹中。

有没有一种简单的方法可以将 xml 字符串读入数组，如果本地设置切换为法语，它会起作用吗？（值-fr）。

```
package com.example.favouritefruit;
import android.os.Bundle;
import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;

public class FavouriteFruit extends ListActivity 
{
    //string array containing types of fruit
      static final String[] FRUIT = new String[]
            {
                "Apple", "Orange", "Banana"
            };

      static final String SELECTEDFRUIT = "com.example.favouritefruit.SELECTEDFRUIT";

      @Override//onCreate Method
        public void onCreate(Bundle savedInstanceState) 
            {
            super.onCreate(savedInstanceState);

            /*Use a java layout as opposed to an xml layout.
            setListAdapter takes a list adapter or an array adapter
            Creates a new class ArrayAdapter Class*/
            setListAdapter(new ListArrayAdapter(this, FRUIT));
            }

        //Creates an intent to move to a new activity

      public void onListItemClick(ListView l, View v, int position, long id)
      {
          super.onListItemClick(l, v, position, id);

        try {
            Class test = Class.forName("com.example.favouritefruit.AppleActivity");
            Intent intent = new Intent(FavouriteFruit.this, test);

            TextView textView = (TextView) v.findViewById(R.id.label);
            String fruit = textView.getText().toString();
            ImageView fruitImage = (ImageView)v.findViewById(R.id.logo);

            //intent.putExtra("IMAGE",""+);
            intent.putExtra(SELECTEDFRUIT,fruit);
            startActivity(intent);
            }   catch (ClassNotFoundException e) {
            e.printStackTrace();}

      }

}

class ListArrayAdapter extends ArrayAdapter<String> 
{
        //Context allows the retrieval of resources such as layout
        private final Context context;
        private final String[] fruit;

        //create the ArrayAdpater
        public ListArrayAdapter(Context context, String[] fruit) 
        {
        super(context, R.layout.activity_favourite_fruit, fruit);
        this.context = context;
        this.fruit = fruit;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) 
        {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        //inflater  dynamically loads the layouts
        View rowView = inflater.inflate(R.layout.activity_favourite_fruit, parent, false);
        //get the textView
        TextView textView = (TextView) rowView.findViewById(R.id.label);
        //get the ImageView
        ImageView imageView = (ImageView) rowView.findViewById(R.id.logo);
        //set the text to the string values based on position
        textView.setText(fruit[position]);

        // Change item based on its position in the string array
        String fruitPosition = fruit[position];

        System.out.println(fruitPosition); 
        //assign the image to to the relevant fruit
        if (fruitPosition.equals("Apple"))
            {
            imageView.setImageResource(R.drawable.image_apple);
            } 
        else if (fruitPosition.equals("Orange")) 
            {
            imageView.setImageResource(R.drawable.image_apple);
            } 
        else if (fruitPosition.equals("Banana"))
            {
            imageView.setImageResource(R.drawable.image_apple);
            }

        //return the layout
        return rowView;
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:31:28.727

要从资源中获取 xml 字符串数组，请使用：

```
getResources().getStringArray(R.array.string_array_name); 
```

是的，如果您有资源的本地化版本，它将根据用户的设备设置自动加载适当的版本。您可以制作单个字符串的本地化 xml 资源，并使用通过 id/name 引用字符串资源的单个字符串数组资源

# sql-server-2005 - SSRS 中的报告参数值

> ID：12919061
> 
> 赞同：0
> 
> 时间：2012-10-16T16:16:09.980
> 
> 标签：sql-server-2005, reportingservices-2005

我需要基于相同的报告模板生成半月（1-15 和 16-最后一天）和月度报告。我在报告模板上放了两个参数。第二个参数将是执行日期，即 15 日和一个月的最后一天。我可以在设计报表时在报表参数上定义它。我不想创建 3 个报告模板来处理它。你知道我如何在报表管理器的报表订阅中定义每个月的 1 号和 16 号的第一个报表参数值。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T18:14:29.387

对于开始日期，将默认值设置为“非查询”并输入

```
=DateSerial(Year(Now), Month(Now), 1) 
```

这将使您获得本月的第一天，这将有 1/3 的时间是错误的。

以类似的方式，对于结束日期

```
=DateSerial(Year(Now), Month(Now), Day(Now)) 
```

假设它如您所描述的那样一直有效 - 现在是 15 日或月底。

# java - 将日期字符串 (EST) 转换为 Java 日期 (UTC)

> ID：12919067
> 
> 赞同：2
> 
> 时间：2012-10-16T16:16:22.083
> 
> 标签：java, date, simpledateformat, data-conversion

我需要一些关于这个 java 方法的建议。此方法的目的是获取一个表示日期的字符串 - 此字符串是根据 EST 时区中的日期创建的 - 并将其转换为 UTC 时区中的 java Date 对象。

```
private Date buildValidationDate(String dateString) throws ParseException {
    System.out.println("dateString " + dateString);

    SimpleDateFormat dateFormat = new SimpleDateFormat("MM/dd/yyy hh:mm a");
    dateFormat.setTimeZone(TimeZone.getTimeZone("UTC"));  
    dateFormat.setLenient(true);
    Date dt = dateFormat.parse(dateString);

    System.out.println("dt " + dt);

    return dt;
} 
```

我看到的问题是 dt 的值似乎关闭了。例如，如果 dateString 是 '10/16/2012 12:06 PM' - 我预计 dt 的值（以 UTC 为单位）类似于 'Tuesday, October 16, 2012 4:06 PM'。相反，dt 的值是 'Tue Oct 16 07:06:00 CDT 2012'。这似乎不是正确的 UTC 时间。

我很感激任何建议，如果这似乎是一个简单的问题，我很抱歉我在 Java 日期方面遇到了很多麻烦。我不确定我的编码是否错误，或者我的方法是否有问题。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-12-23T01:37:58.223

正如[Singh 正确接受的答案](https://stackoverflow.com/a/12919211/642706)所说，您`Date`实际上*是*在 UTC 中，但它的`toString`方法在生成字符串时会混淆地应用当前默认时区。

# ISO 8601

避免使用日期时间值等格式`10/16/2012 12:06 PM`。序列化为文本时，请使用为此目的定义为标准的[ISO 8601格式。](https://en.wikipedia.org/wiki/ISO_8601)

# java.time

> 如果这似乎是一个简单的问题，我很抱歉我在 Java 日期方面遇到了很多麻烦

不是你；这是课程。旧的遗留日期时间类在处理日期时间方面是行业领先的英勇努力。但事实证明，它们构思不周、设计糟糕、非常混乱和麻烦。现在被 java.time 类所取代——一个*巨大*的改进。

完全避免这个麻烦的旧`java.util.Date`课程。而是使用`Instant`它的位置。

## `Instant`

该类表示[UTC](https://en.wikipedia.org/wiki/Coordinated_Universal_Time)[`Instant`](http://docs.oracle.com/javase/8/docs/api/java/time/Instant.html)时间线上的时刻，分辨率为[纳秒](https://en.wikipedia.org/wiki/Nanosecond)（最多九 (9) 位小数）。

获取当前时刻。

```
Instant instant = Instant.now(); 
```

您可以通过调用添加到旧日期时间类的新转换方法之一将 Date 转换为其现代替换。只需调用toInstant，很简单。

```
Instant instant = myJavaUtilDate.toInstant(); 
```

java.time 类在生成字符串时默认使用 ISO 8601 格式。只需调用`toString`即可获得对象内值的清晰表示。

```
String output = instant.toString(); 
```

> 2016-12-23T01:33:09.731Z

## 解析

要解析您的输入字符串，请定义要匹配的格式模式。模式代码与 的相似，`SimpleDateFormat`但不完全相同。所以一定要仔细研究文档。

```
String input = "10/16/2012 12:06 PM" ;
DateTimeFormatter f = DateTimeFormatter.ofPattern( "MM/dd/uuuu hh:mm a" ); 
```

您的输入缺乏关于从 UTC 偏移或时区的任何线索。所以我们必须解析为[`LocalDateTime`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html). 缺少任何偏移或区域，a`LocalDateTime`只是关于可能时刻的模糊概念，但并不*代表*时间线上的一个点。

```
LocalDateTime ldt = LocalDateTime.parse( input , f ); 
```

> ldt.toString(): 2012-10-16T12:06

该问题声称这是针对“EST 时区”的。所以我们需要对我们应用一个时区 a`ZoneId`来`LocalDateTime`获得 a `ZonedDateTime`。

以、或等格式指定[适当的时区名称](https://en.wikipedia.org/wiki/List_of_tz_zones_by_name)。永远不要使用 3-4 个字母的缩写，例如或，因为它们*不是*真正的时区，不是标准化的，甚至不是唯一的（！）。`continent/region`[`America/Montreal`](https://en.wikipedia.org/wiki/America/Montreal)[`Africa/Casablanca`](https://en.wikipedia.org/wiki/Africa/Casablanca)`Pacific/Auckland``EST``IST`

 *也许`EST`您指的是美国和加拿大东海岸大部分地区使用的时区。我会随意选择`America/New_York`。

```
ZoneId z = ZoneId.of( "America/New_York" );
ZonedDateTime zdt = ldt.atZone( z ); 
```

> zdt.toString(): 2012-10-16T12:06-04:00[美国/纽约]

要获得 UTC，只需提取一个`Instant`. 您可以在概念上将其视为：

> ZonedDateTime = ( Instant + ZoneId )

```
Instant instant = zdt.toInstant(); 
```

> 即时.toString(): 2012-10-16T16:06:00Z

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T16:24:38.903

**您的日期正在正确转换**。它只是以您的默认时区格式打印值，与`java.util.Date`时区无关。如果您想要特定时区的处理，请使用`java.util.Calendar`.*

# html - 位置相对和正确的属性

> ID：12919073
> 
> 赞同：11
> 
> 时间：2012-10-16T16:16:38.110
> 
> 标签：html, css

我一直认为通过将 div 设置为 relative 和 right 0 将 div 一直定位到右侧，如果它的父级是 100% 宽度。显然我错了，只有这样的绝对作品。那么有没有办法让它与亲戚一起工作？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-16T16:22:08.357

您必须将父级设置为相对，而将子级设置为绝对定位。

```
.parent{
  position: relative;
  width: 100%;
}
.right{
  position: absolute;
  width: 200px;
  height: 200px;
  background: red;
  top:0;
  right:0;
} 
```

​ 喜欢这里：http: [//jsfiddle.net/willemvb/n9Vrv/](http://jsfiddle.net/willemvb/n9Vrv/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-05-01T11:53:26.227

有一种方法可以使它对亲戚起作用。

一种方法是首先将显示器的父级设置为`inline-flex`.

接下来，设置元素 (child) `position:relative; margin-left:auto; right:0;`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T16:28:23.297

> 那么有没有办法让它与亲戚一起工作？

正确的。相对定位是相对于静态定位的位置偏移。

您需要绝对定位以相对于包含块的边缘进行定位。

# javascript - JS只替换没有html标签和代码的文本

> ID：12919074
> 
> 赞同：1
> 
> 时间：2012-10-16T16:16:39.233
> 
> 标签：javascript, replace

我想在不更改任何 html 标签或 js 代码的情况下替换文档的某些单词。

基本上我所做的是；

`document.body.innerHTML = document.body.innerHTML.replace('lorem','new lorem');`

但是此代码将替换任何“lorem”。我想避免这样的标签；`<script... var lorem = 123; <div class="lorem", <a id="lorem"`等等

我怎样才能在 JS 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T16:21:58.987

遍历 DOM，以及`.replace()`文本节点的值。

```
function walk(el, fn) {
    for (var i = 0, len = el.childNodes.length; i < len; i++) {
        var node = el.childNodes[i];
        if (node.nodeType === 3)
            fn(node);
        else if (node.nodeType === 1 && node.nodeName !== "SCRIPT")
            walk(node, fn);
    }
} 
```

* * *

```
walk(document.body, function(node) {
    var text = node.data.split("foo"),
        parent = node.parentNode,
        i = 1,
        newNode;

    parent.insertBefore(textNode(text[0]), node);

    for (; i < text.length; i += 2) {
        (newNode = document.createElement("b"))
                           .appendChild(textNode("bar"));
        parent.insertBefore(newNode, node);
        parent.insertBefore(textNode(text[i]), node);
    }
    parent.removeChild(node);
});

function textNode(txt) {
    return document.createTextNode(txt);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:02:53.587

另一种方法是使用正则表达式，科学你不能将 HTML 标记插入文本节点。

首先，我使用正则表达式来捕获 HTML 标记之外的 body.innerHTML 属性的一部分。

但是，该字符串还包含另一个数据，如果我直接用新数据替换它，一些文本将会丢失。

Insted，我将每个匹配项作为函数的参数，并在该函数内部使用另一个正则表达式。

请注意，您必须替换“foo”两次。

编码：

`document.body.innerHTML=document.body.innerHTML.replace(/<[^(script)][^>]*>[^<]*(foo)[^<]*</g,function(match){ return match.replace(/foo/,"newWord"); });`

# c# - 简单的数字保险箱，知道用户按下按钮的顺序

> ID：12919079
> 
> 赞同：0
> 
> 时间：2012-10-16T16:17:00.887
> 
> 标签：c#, button, combinations

我有三个按钮（button1、button2、button3），分别显示1、2和3

现在我想做的是有一个秘密组合来“解锁”程序，即“13221”

但是我不知道如何知道用户是否按下了按钮，以及如何检查订单？

我目前的逻辑是：

```
private void Form1_Load(object sender, EventArgs e)
{
  if(button1.KeyPress=true && button3.KeyPress=true && button2.KeyPress=true && button2.KeyPress=true && button1.KeyPress=true)
  {
    label1.Visible = true;
    label2.Visible = true;
  }
} 
```

这显然不起作用..任何人都可以帮助我吗？：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:20:41.937

您可以简单地注册每个传入的按钮按下。对于普通按钮，使用 ButtnClick 事件。

将值存储在列表中。那可能是一个简单的字符串。每次检查列表是否等于您的密码。

我认为您仍然需要有关如何以及何时重置尝试的规范。

你实际上是在制造一个状态机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:22:35.210

让我大吃一惊的是，您需要`==`在 if 语句中使用来检查相等性。一个单一`=`的将这些属性分配给true。

话虽如此，我会采取的方法是：

- 给每个按钮一个唯一的 id

- 在每个按钮单击时，将 id 存储在列表中。

- 在每次点击之后，或者当用户按下提交按钮时，根据您的预定义组合检查列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T16:29:00.780

对象发送者按钮可以输入到按钮中，您可以在其中检查按钮的名称，从而允许您使用单个 if 语句。

```
Button buttonPressed = (button)Sender; 
```

MSDN 上应该有关于它进行从对象到按钮的类型转换的信息。（我在工作，或者我会确保我的代码 100% 值得复制粘贴，如果这样做的人想要编辑我的帖子，请随意。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T16:30:07.147

使用 StringBuilder 对象将每个键值存储到其中。因此，在每个按钮的点击事件中，您将根据按下的按钮附加“1”、“2”或“3”，然后检查当前序列。

```
StringBuilder _code = new StringBuilder();

void button1_Click(object sender, EventArgs e)
{
    _code.Append('1');

  CheckCode();
}

// ... similarly implement other button click events

void CheckCode()
{
    if (_code.ToString().Contains("13221"))
    {
        MessageBox.Show("ACCESS GRANTED");
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T16:49:56.563

首先，您应该按照**Ian的说法更正您的代码**

改正为

```
if(button1.KeyPress==true.... 
```

或者

```
if(button1.KeyPress.Equals(true)...  //recommended in C# 
```

然后
1)`keypreview --> true`在表单属性中设置。2）在事件
上实现按钮功能。 3）取一个文本框并设置属性使其透明 4）对文本框实现事件函数以检查组合。`form_keypress`

`text_changed`

这可能行不通，但我希望这个概念能给你一些想法。

# android - Android 从 URL 获取文本始终为 NULL

> ID：12919080
> 
> 赞同：0
> 
> 时间：2012-10-16T16:17:01.713
> 
> 标签：android, http-request

我想发送一个 http 请求并从该请求中获取一个字符串。

我目前正在使用此代码，但无论我的 URL 是什么，我总是得到空值。有什么问题？

> try { // 为所需页面创建一个 URL URL url = new URL("http://hostname:80/index.html");
> 
> ```
> // Read all the text returned by the server
> BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
> String str;
> while ((str = in.readLine()) != null) {
>     // str is one line of text; readLine() strips the newline character(s)
> }
> in.close(); } catch (MalformedURLException e) { } catch (IOException e) { } 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:27:33.097

试试这个

```
URL url = new URL("http://whatever");
URLConnection urlConnection = url.openConnection();
InputStream in = new BufferedInputStream(urlConnection.getInputStream());
//read stream here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:29:01.007

```
 String URL = "http://hostname:80/index.html"
                String XML = stringWriter.toString();
                // System.out.println(XML);

                se = new StringEntity(XML, "UTF-8");
                se.setContentType("text/xml;charset=UTF-8");
                HttpPost httppost = new HttpPost(URL);
                httppost.setEntity(se);

                HttpClient httpclient = new DefaultHttpClient();
                response = httpclient.execute(httppost);

                HttpEntity entity = response.getEntity(); 
```

尝试从此代码中使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:09:07.497

这对我有用：

```
httpClient = AndroidHttpClient.newInstance("Android");
        String url = "Your URL";
        try{
            HttpGet httpGet = new HttpGet(url);
            HttpResponse response = httpClient.execute(httpGet);
            if(response.getStatusLine().getStatusCode() == HttpStatus.SC_OK){ //Don't know what string you are waiting for
                 //do something
            }
        }
        catch(IOException e){
            httpClient.close();
        } 
```

# c++ - gcc/g++：“没有这样的文件或目录”

> ID：12919081
> 
> 赞同：103
> 
> 时间：2012-10-16T16:17:04.333
> 
> 标签：c++, c, gcc, g++, c++-faq

`g++`给我形式的错误：

```
foo.cc:<line>:<column>: fatal error: <bar>: No such file or directory
compilation terminated. 
```

用 .编译 C 程序时也是如此`gcc`。

这是为什么？

* * *

^(**请注意：**这个问题以前被问过很多次，但每次都是针对提问者的情况。这个问题的目的是**提出一个问题，其他人可以**一劳永逸地关闭作为重复的问题；常见*问题解答*。)

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-10-16T16:17:04.333

您的编译器刚刚尝试编译名为`foo.cc`. 在点击 line number`line`时，编译器会发现：

```
#include "bar" 
```

或者

```
#include <bar> 
```

然后编译器尝试找到该文件。为此，它使用一组目录进行查看，但在这组目录中，没有文件`bar`。有关 include 语句版本之间差异的解释，请参见[此处](https://stackoverflow.com/questions/21593/what-is-the-difference-between-include-filename-and-include-filename)。

## 如何告诉编译器在哪里找到它

`g++`有一个选项`-I`。它允许您将包含搜索路径添加到命令行。假设您的文件`bar`位于名为 的文件夹中`frobnicate`，相对于`foo.cc`（假设您正在从所在目录编译`foo.cc`）：

```
g++ -Ifrobnicate foo.cc 
```

您可以添加更多包含路径；你给的每一个都是相对于当前目录的。Microsoft 的编译器有一个`/I`以相同方式工作的相关选项，或者在 Visual Studio 中，可以在项目的属性页中设置文件夹，在配置属性->C/C++->常规->附加包含目录下。

现在假设您在不同的文件夹中有多个版本`bar`，给定：

* * *

```
// A/bar
#include<string>
std::string which() { return "A/bar"; } 
```

* * *

```
// B/bar
#include<string>
std::string which() { return "B/bar"; } 
```

* * *

```
// C/bar
#include<string>
std::string which() { return "C/bar"; } 
```

* * *

```
// foo.cc
#include "bar"
#include <iostream>

int main () {
    std::cout << which() << std::endl;
} 
```

* * *

`#include "bar"`最左边的优先级：

```
$ g++ -IA -IB -IC foo.cc
$ ./a.out
A/bar 
```

如您所见，当编译器开始查看和时`A/`，它在第一个或最左边的命中处停止。`B/``C/`

这两种形式都是如此，`include <>`并且`incude ""`.

## `#include <bar>`和之间的区别`#include "bar"`

通常，`#include <xxx>`它首先查看系统文件夹，然后首先`#include "xxx"`查看当前或自定义文件夹。

例如：

假设您的项目文件夹中有以下文件：

```
list
main.cc 
```

与`main.cc`：

```
#include "list"
.... 
```

为此，您的编译器会将`#include`文件`list`放在您的项目文件夹中，因为它当前正在编译`main.cc`并且`list`当前文件夹中有该文件。

但随着`main.cc`：

```
#include <list>
.... 
```

然后`g++ main.cc`，您的编译器将首先查看系统文件夹，并且因为`<list>`是标准头文件，所以它会将您的 C++ 平台附带`#include`的命名文件作为标准库的一部分。`list`

这有点简化，但应该给你基本的想法。

## `<>`/ `""`-priorities的详细信息和`-I`

根据[gcc-documentation](http://gcc.gnu.org/onlinedocs/cpp/Search-Path.html)，在“普通 Unix 系统”上，优先级`include <>`如下：

```
 /usr/local/include
 libdir/gcc/target/version/include
 /usr/target/include
 /usr/include 
```

> 对于 C++ 程序，它也会首先在 /usr/include/c++/version 中查找。在上面，target 是系统 GCC 被配置为编译代码的规范名称；[...]。

该文档还指出：

> 您可以使用 -Idir 命令行选项添加到此列表。**在默认目录之前，**按从左到右的顺序搜索所有由 -I 命名的目录。唯一的例外是默认情况下已经搜索了 dir。在这种情况下，该选项将被忽略，系统目录的搜索顺序保持不变。

继续我们的`#include<list> / #include"list"`示例（相同的代码）：

```
g++ -I. main.cc 
```

和

```
#include<list>
int main () { std::list<int> l; } 
```

事实上，`-I.`文件夹优先于`.`系统包括，我们得到一个编译器错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-25T19:04:53.197

此外，似乎存在编译器错误，如果您在头文件名中包含字符“struct”或“Struct”，编译器将抛出相同的“没有这样的文件或目录”错误。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2020-12-02T16:46:43.360

这对我有用， sudo apt-get install libx11-dev

# haskell - 拆包 Yesod 脚手架类型

> ID：12919087
> 
> 赞同：4
> 
> 时间：2012-10-16T16:17:14.033
> 
> 标签：haskell, ghc, yesod, ghci

在处理 haskell 程序时，我最喜欢做的事情之一是使用 ghci :t 和 :info 命令来找出程序中的类型错误。

当我在 yesod 中运行玩具程序时，我可以使用它，但我不知道如何在完整的脚手架站点上做到这一点。如果这是错误的处理方式，我理解并愿意接受更好的方法建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:40:13.943

好吧，这实际上很容易，我现在觉得很傻。

获取包 cabal-ghci 然后加载 Foundation 和 Application 并完成。

# c++ - 如何使用 C++ STL 和 boost 来判断两个排序向量是否相交

> ID：12919089
> 
> 赞同：5
> 
> 时间：2012-10-16T16:17:25.400
> 
> 标签：c++, boost, set

我有两个排序的 C++ std::vector 没有重复（你可以称它们为集合），我想知道它们是否相交。我不需要公共元素的向量。

我使用 boost"range" 库 (http://www.boost.org/doc/libs/1_50_0/libs/range/doc/html/range /reference/algorithms/set.html)。此代码避免构造公共元素集，但会扫描向量的所有元素。

是否可以在不使用循环的情况下使用 boost 和 C++ STL 改进我的函数“相交”？我想停在向量中的第一个公共元素上，或者至少避免我的计数器类。

升压范围库提供“包含”和“set_intersection”，但不提供“相交”。这让我认为“相交”是微不足道的或在其他地方提供的，但我找不到它。

谢谢！

```
#include <vector>
#include <string>
#include <boost/assign/list_of.hpp>
#include <boost/function_output_iterator.hpp>
#include <boost/range/algorithm.hpp>
#include <boost/range/algorithm_ext/erase.hpp>

template<typename T>
class counter
{
    size_t * _n;
public:
    counter(size_t * b) : _n(b) {}
    void operator()(const T & x) const
    {
        ++*_n;
    }
};

bool intersects(const std::vector<std::string> & a, const std::vector<std::string> & b)
{
    size_t found = 0;
    boost::set_intersection(a, b, boost::make_function_output_iterator(counter<std::string>(&found)));
    return found;
}

int main(int argc, char ** argv)
{
    namespace ba = boost::assign;
    using namespace std;
    vector<string> a = ba::list_of(string("b"))(string("vv"))(string("h"));
    vector<string> b = ba::list_of(string("z"))(string("h"))(string("aa"));
    boost::erase(a, boost::unique<boost::return_found_end>(boost::sort(a)));
    boost::erase(b, boost::unique<boost::return_found_end>(boost::sort(b)));
    cout << "does " << (intersects(a, b) ? "" : "not ") << "intersect\n";
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T16:43:53.103

首先要回答评论，boost 的 set_intersection 将范围作为参数，而 STL 采用迭代器。

除此之外，在算法和复杂性方面没有真正的区别。

据我所知，没有现成的库函数可以做你想做的事，这只是测试两个序列是否唯一，如果不是则立即停止。

您还必须意识到，当它们确实是独一无二的时，您将始终遇到“最坏的情况”。

复杂度为 O(N+M)，尽管您也可以在其中一个集合上使用二进制搜索，这将使其成为 O(N log M) 或 O(M log N)，如果一个比另一个大很多，则可以节省很多。（例如 N=1000000，M=20，M log N 仅约为 400）

您可以通过取其中一个的中值来“减少”，在另一个中找到它并比较单独线程中的子范围。

还有一个“可怕”的解决方案是让你的函子在交叉路口被调用，从而使你脱离循环。（是的，那里有一个，即使它隐藏在算法中）。我们可能可以编写自己的代码，尽管这非常简单。我将使用 4 个迭代器来完成：

```
 template< typename Iter1, typename Iter2 >
 bool intersects( Iter1 iter1, Iter1 iter1End, Iter2 iter2, Iter2 iter2End )
 {
      while( iter1 != iter1End && iter2 != iter2End )
      {
         if( *iter1 < *iter2 )
         {
             ++iter1;
         }
         else if ( *iter2 < *iter1 )
         {
             ++iter2;
         }
         else
             return true;
      }
      return false;
 }

 // Predicate version where the compare version returns <0 >0 or 0

 template< typename Iter1, typename Iter2, typename Comp >
 bool intersects( Iter1 iter1, Iter1 iter1End, Iter2 iter2, Iter2 iter2End, Comp comp )
 {
      while( iter1 != iter1End && iter2 != iter2End )
      {
         int res = comp( *iter1, *iter2 );
         if( res < 0 )
         {
             ++iter1;
         }
         else if ( res > 0 )
         {
             ++iter2;
         }
         else
             return true;
      }
      return false;
 } 
```

# linux - Linux 中的 Qt 线程问题

> ID：12919093
> 
> 赞同：12
> 
> 时间：2012-10-16T16:17:31.750
> 
> 标签：linux, multithreading, qt, opengl, xcb

我已经在我的项目中使用 Qt 开发了一段时间，并且我们开始转向更加面向线程的设计。在将一些 GL 渲染小部件移动到其他线程时，我发现了一些非常奇怪的行为。看来，如果 GL Widget 在接受用户输入（例如 QTextEdit）的小部件获得焦点之前开始从另一个线程（boost 线程或 QThread）更新，我会得到如下所示的 XCB 崩溃：

```
[xcb] Too much data requested from _XRead
[xcb] This is most likely caused by a broken X extension library
[xcb] Aborting, sorry about that.
hypnotizer: ../../src/xcb_io.c:735: _XRead: Assertion ‘!xcb_xlib_too_much_data_requested’ failed. 
```

为了测试这一点，我实际上可以对 GLHypnotizer 演示进行简单修改以重现崩溃。该演示可以在这里找到：http: [//qt-project.org/doc/qt-4.8/demos-glhypnotizer.html](http://qt-project.org/doc/qt-4.8/demos-glhypnotizer.html) [qt-project.org]

如果我添加行'mdiArea.addSubWindow(new QTextEdit(this));' 在第 313 行左右（在调用 newThread() 之前），然后当演示开始时，将有一个 QTextEdit 和一个 GL Hypnotizer Widget。如果我然后单击 QTextEdit 来获取焦点，我每次都会遇到上述崩溃。

任何人都可以使用上述说明在 Linux 安装上重现错误吗？有没有人在使用 Qt 和线程之前在 Linux 上遇到过这些类型的问题？

注意：我使用的是 Ubuntu 12，此崩溃发生在 VirtualBox 和非 VirtualBox Ubuntu 安装中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:33:45.120

OpenGL、Qt 渲染和多线程不能很好地混合。特别是 OpenGL 上下文一次只能在一个线程中处于活动状态。现在，如果上下文在多个小部件之间共享（请注意，这与在上下文之间共享对象不同，我说的是用于多个窗口/小部件的单个上下文，这是合法的）并且这些小部件从您要去的不同线程呈现进入很多问题。

对于 OpenGL 和多线程，通常最好的做法是不做。是的，使用多个线程，但将它们用于与 OpenGL 或任何类型的图形输出无关的所有内容。将所有图形操作保留在一个线程中，以避免出现重大问题。

# javascript - 突出显示另一个 div 中的 div 元素

> ID：12919098
> 
> 赞同：0
> 
> 时间：2012-10-16T16:18:04.253
> 
> 标签：javascript, jquery

我正在尝试更改子元素的背景颜色。

尝试使用以下代码：

```
arrdiv[i].highlight.style.backgroundColor = "black"; 
```

highlight 是我要更改的 div 的名称。这显然是不正确的，但希望它证明了我正在尝试做的事情。

这是功能：

```
function mainFormHideShow(id, highlight_id, arrDiv) 
{ 
    var idNum = id*1;
    var l = arrDiv.length;
    var i = idNum%l;
    var highlight = 'highlight' + highlight_id;

    for (var j=0; j<l; j++)
    {
        $(arrDiv[j]).hide();
    }

    arrDiv[i].style.display = "block";

    arrdiv[i].highlight.style.backgroundColor = "black";

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:22:23.803

我会使用`id`财产而不是`name`财产。所以，你可以这样做：

```
document.getElementById('highlight').style.backgroundColor = "black"; 
```

如果您仍然想使用`name`属性，则必须执行以下操作：

```
var myDivs = document.getElementsByName('highlight');
myDivs[0].style.backgroundColor = "black"; 
```

如果您使用 jQuery：

```
$("#highlight").css("backgroundColor", "black"); 
```

或者：

```
$("[name=highlight]").css("backgroundColor", "black"); 
```

# android - Google Maps API 密钥是否缓存在 Android 上？

> ID：12919124
> 
> 赞同：3
> 
> 时间：2012-10-16T16:19:19.257
> 
> 标签：android, google-maps

我正在测试一个使用 Google 地图的 Android 应用程序。一切顺利。我从谷歌得到了钥匙，把它放在我的 XML 中，地图上的灰色瓷砖消失了，真正的地图出现了。调试和发布版本在设备上运行良好。都好。现在我从设备上卸载了该应用程序，清理了项目并故意损坏了我的项目 XML 中的 Google 密钥。我重新安装了应用程序，它继续正常工作，地图出现了！我已取出 Google 密钥，该应用程序仍然可以使用！是什么赋予了？如果没有 API 密钥，我的应用程序现在如何正常运行？设备上某处是否缓存了某些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:23:55.280

API 密钥不兑现，但它兑现了地图。

# jquery - 如何使用 JQuery 在悬停时更改嵌入的 SVG 文件填充颜色？

> ID：12919125
> 
> 赞同：1
> 
> 时间：2012-10-16T16:19:18.767
> 
> 标签：jquery, user-interface, svg, hover

我有一个大元素，包括 SVG 嵌入元素（外部文件）。我想在 a:hover 上更改其填充颜色。你会如何处理它？它真的让我发疯:)

我认为应该起作用的是：

```
$("a#title").hover(function() {
$("svg#logo").attr('fill','#f0f');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:25:25.097

我从来没有专门这样做过，但看起来这个人有一个你可以[在这里使用的 jquery 插件。](http://keith-wood.name/svg.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:57:34.133

当 svg 在 html 中内联时，您所拥有的一切都可以。但是，当它通过引用（嵌入、对象、iframe、img）嵌入时，svg 实际上是一个单独的文档。您可以将其视为尝试更改 iframe 引用的 html 文档中的属性。

链接在svg里面吗？如果是这样，您可以将样式/脚本放在 svg.xml 中。

这是一个从 html 文档（嵌入、对象、iframe）更改 svg 形状填充的[示例。](http://xn--dahlstrm-t4a.net/svg/html/get-embedded-svg-document-script.html)

# facebook-opengraph - Facebook Open Graph：在调试模式下批准操作

> ID：12919127
> 
> 赞同：0
> 
> 时间：2012-10-16T16:19:26.567
> 
> 标签：facebook-opengraph, facebook-apps, facebook-test-users

我正在开发一个 facebook 画布应用程序 (iframe)，并且我正在使用 Open Graph API 来发布用户操作。

当我将我的操作提交给 facebook 的团队批准时，他们回复：

> 由于您的应用程序中出现错误，我们无法测试此操作。请通过使用 Auth Dialog Preview User 进行测试，确保您的操作正常运行并重新提交。

事情就是这样。我意识到**只有**当我使用应用程序生成的测试用户测试应用程序时，尝试发布打开图形操作时才会出现错误，这可能是 facebook 的测试人员发生的情况：

> OAuthException：发生意外错误。请稍后重试您的请求。

现在，当我将我的应用程序**退出沙盒**模式时，一切正常，即使对于测试用户也是如此。

由此我了解到，为了批准我在 facebook 上的操作，我需要将其退出沙盒模式，在这一点上我真的不希望这样做。

有小费吗？有人也遇到过这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:49:46.030

如果您不想将其从沙盒中发布，但又希望这些操作被公众批准，那么您将面临 22 个问题。

确保您的应用程序在您的开发人员帐户以及测试人员（可以在沙盒下使用该应用程序）下完全正常运行，然后再发送以供批准，然后禁用沙盒。禁用沙箱并将操作发送到 Facebook 是您告诉 Facebook 您的应用程序已准备好进行审查，并且不再处于开发的测试/沙箱阶段。

![沙盒测试仪](../Images/57ad16280f04b8e93aa1d981e15a7332.png)

如果您需要在批准后重新启用沙盒，我认为没有什么可以阻止您。我不相信 Facebook 会取消批准，至少，这是我的假设。

# java - 设计：2 个 jcomboboxes，框 2 列表取决于框 1 中的选择，来自 XML 的数据

> ID：12919128
> 
> 赞同：1
> 
> 时间：2012-10-16T16:19:34.383
> 
> 标签：java, xml, swing, jcombobox

试图为这个问题设计一个解决方案让我不知所措——这是缺乏经验的副产品。

我的目标是读取 XML 输入文件，存储 XML 中的信息，并用 XML 中的数据填充两个组合框。第二个组合框的内容将根据第一个组合框的选择而改变。

鉴于此 XML 结构：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Category xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<Node>
    <ID>Unique string</ID>
    <Name>Unique string</Name>
    <Code>Generic string<Code>
    <Kind>Generic string</Kind>
    <Frame>Generic string</Frame>
            ...
</Node>
    ...
</Category> 
```

第一个组合框：必须仅包含“种类”部分中的唯一值。

第二个组合框：包含来自每个节点的所有名称条目，其种类等于在第一个组合框中选择的种类。

关于 XML 源：它是外部维护和生成的。ID 部分中的值总是唯一的。Name 部分中的值总是唯一的。架构将（据说）永远不会改变。将来，新的唯一值可能会出现在“种类”部分。

我提出的解决方案：创建一个类 XMLNode 来表示来自 XML 源的节点。XMLNode 类的成员对应于每个 Node 中的标签。遍历所有节点并为每个节点创建一个 XMLNode。遍历节点时：在哈希映射中添加 XMLNode 对象，Keys = XMLNode.ID 和 vals = XMLNode。创建一组独特的种类。

从 Kind 条目数组中填充组合框一。从每个 的名称数据中填充组合框两个。

这是一种合适的方法，还是我忽略了更好/更容易/更优雅的解决方案？如果我走在正确的轨道上，我提出的解决方案是否有任何明显的缺陷？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:27:12.223

*   使用[ComboBoxModel (Java6)](http://docs.oracle.com/javase/6/docs/api/javax/swing/ComboBoxModel.html)为[JComboBox存储项目](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)

*   必须在 EDT 上完成对[JComboBox 及其 ComboBoxModel 的所有更新](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

*   将所有`FileIO`或`Database`事件重定向到`Runnable#Thread`或`SwingWorker`

*   也许这个逻辑可以帮助你，

代码

```
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import javax.swing.*;

public class ComboBoxTwo extends JFrame implements ActionListener, ItemListener {

    private static final long serialVersionUID = 1L;
    private JComboBox mainComboBox;
    private JComboBox subComboBox;
    private Hashtable<Object, Object> subItems = new Hashtable<Object, Object>();

    public ComboBoxTwo() {
        String[] items = {"Select Item", "Color", "Shape", "Fruit"};
        mainComboBox = new JComboBox(items);
        mainComboBox.addActionListener(this);
        mainComboBox.addItemListener(this);
        //prevent action events from being fired when the up/down arrow keys are used
        //mainComboBox.putClientProperty("JComboBox.isTableCellEditor", Boolean.TRUE);
        getContentPane().add(mainComboBox, BorderLayout.WEST);
        subComboBox = new JComboBox();//  Create sub combo box with multiple models
        subComboBox.setPrototypeDisplayValue("XXXXXXXXXX"); // JDK1.4
        subComboBox.addItemListener(this);
        getContentPane().add(subComboBox, BorderLayout.EAST);
        String[] subItems1 = {"Select Color", "Red", "Blue", "Green"};
        subItems.put(items[1], subItems1);
        String[] subItems2 = {"Select Shape", "Circle", "Square", "Triangle"};
        subItems.put(items[2], subItems2);
        String[] subItems3 = {"Select Fruit", "Apple", "Orange", "Banana"};
        subItems.put(items[3], subItems3);
//      mainComboBox.setSelectedIndex(1);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        String item = (String) mainComboBox.getSelectedItem();
        Object o = subItems.get(item);
        if (o == null) {
            subComboBox.setModel(new DefaultComboBoxModel());
        } else {
            subComboBox.setModel(new DefaultComboBoxModel((String[]) o));
        }
    }

    @Override
    public void itemStateChanged(ItemEvent e) {
        if (e.getStateChange() == ItemEvent.SELECTED) {
            if (e.getSource() == mainComboBox) {
                if (mainComboBox.getSelectedIndex() != 0) {
                    FirstDialog firstDialog = new FirstDialog(ComboBoxTwo.this,
                            mainComboBox.getSelectedItem().toString(), "Please wait,  Searching for ..... ");
                }
            } 
        }
    }

    private class FirstDialog extends JDialog {

        private static final long serialVersionUID = 1L;

        FirstDialog(final Frame parent, String winTitle, String msgString) {
            super(parent, winTitle);
            setModalityType(Dialog.ModalityType.APPLICATION_MODAL);
            JLabel myLabel = new JLabel(msgString);
            JButton bNext = new JButton("Stop Processes");
            add(myLabel, BorderLayout.CENTER);
            add(bNext, BorderLayout.SOUTH);
            bNext.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent evt) {
                    setVisible(false);
                }
            });
            javax.swing.Timer t = new javax.swing.Timer(1000, new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    setVisible(false);
                }
            });
            t.setRepeats(false);
            t.start();
            setLocationRelativeTo(parent);
            setSize(new Dimension(400, 100));
            setVisible(true);
        }
    }

    public static void main(String[] args) {
        JFrame frame = new ComboBoxTwo();
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T15:41:28.140

我最终得到了一个类 NodeImporter 和一个类 Node。Node代表一个节点，NodeImporter解析XML。在 NodeImporter 中，XML 源被解析并表示为 HashMap 的 HashMap。外层 HashMap (Key,Value) 为 (Kind,(HashMap(Key,Value))。内层 HashMap (Key,Value) 为 (UinqueID,Node)，最终结果为 (Kind,(UniqueID,Node))。我将最终结果称为“filteredMap”。NodeImporter 的所有字段和方法都是私有的，除了构造函数和过滤映射的 getter。需要数据来构建组合框的类从 NodeImporter 的实例获取过滤映射。它可以然后获取外部 HashMap 的键来构建第一个 ComboBoxModel。它可以很容易地获取内部 HashMap 用作第二个组合框的 HashMap。

设置的伪代码：

使用类成员构建的类 NodeImporter：

```
arrayList(String) uniqueKinds = null  
arrayList(Node) allNodes  = null  
HashMap(String, HashMap(String,Node))) filteredNodes = null 
```

类 NodeImporter 构造函数：

```
open XML  
while xml source has next  
  {  
  add next node to allNodes, key = node.uniqueId, Val = node  
  if next node.kind not in uniqueKinds, add node.kind to uniqueKinds  
  }

ClassNodeImporter method makeFilteredeMap:  

    private boolean makeFilteredeMap() {
        if (uniqueKinds.isEmpty()) {
            return false;
        } else {
            for (String k : uniqueKinds) {
                HashMap<String, Node> aMap = new HashMap<String, Node>();
                for (Node n : allNodes) {
                    if (n.getKind().equals(k)) {
                        aMap.put(n.getCode(), n);
                    }
                }
                filteredNodes.put(k, aMap);
            }
            return true;
        }
    } 
```

# haskell - 功能性 Banana Traveler - 输入处理

> ID：12919136
> 
> 赞同：0
> 
> 时间：2012-10-16T16:20:05.400
> 
> 标签：haskell, stm, frp, reactive-banana

[这是我的Traveler](https://stackoverflow.com/questions/12292934/functional-banana-traveller-game-intriguing-and-maddening)项目的一个子问题。

我已经将处理输入的粗略代码放在一起。它有效，直到我将 a 引入`TChan`混合中。下面是工作代码，以及如何使用它的示例。然后，我将对其进行更改并解释我这样做的原因。然后，我会谈谈这个问题。

```
{-# LANGUAGE ScopedTypeVariables #-}
import Control.Monad (forever)
import Control.Concurrent (forkIO)
import Control.Monad.STM (STM,atomically)
import Control.Concurrent.STM.TChan
import Reactive.Banana
import Reactive.Banana.Frameworks

data Planet = Vulcan
            | Mars
            | Terra
                deriving (Eq,Read,Show)

data Command = Move Planet
             | Look
             | Quit
             | Null
                deriving Show

makeNetworkDescription :: AddHandler (Maybe Command) -> IO EventNetwork
makeNetworkDescription addCommandEvent = compile $ do
   eInput <- fromAddHandler addCommandEvent
   let eCommand = filterJust eInput 
       bCommand = stepper Null eCommand 
   eCommandChanged <- changes bCommand

reactimate $ (\n -> appendFile "output.txt" ("Command is " ++ show n)) <$>  
eCommandChanged 
```

执行以下操作`ghci`将证明这是有效的。

```
(addCommandEvent,fireCommand) <- newAddHandler :: IO (AddHandler (Maybe Command),Maybe Command -> IO ())
networkDescr <- makeNetworkDescription addCommandEvent
actuate networkDescr
return (Just $ Look) >>= fireCommand 
```

所以，现在我已经有了基本的机制，我想开始构建它。这将是一款多人游戏。就输入处理而言，解决此问题的第一步是从`TChan`. 想法是，所有玩家都将写入 this `TChan`，并且每个命令将按照到达的顺序进行处理。

所以我添加了一个新函数'inputFrame'

```
inputFrame :: TChan Command -> IO ()
inputFrame commandChannel = do
   (addCommandEvent,fireCommand) <- newAddHandler
   networkDescr <- makeNetworkDescription addCommandEvent
   actuate networkDescr
   forkIO $ forever (atomically $ tryReadTChan commandChannel) >>= fireCommand
   return () 
```

这是我尝试使用它的方式，在`ghci`.

```
commandChan <- atomically $ newTChan :: IO (TChan Command)
_ <- atomically $ writeTChan commandChan Look 
```

`output.txt`不被写入。`commandChan`正在阅读，因为我检查它是否在填充后变为空。我做错了什么很明显吗？如果没有，我该如何解决问题？另外，出于我的预期目的，这是一个`TChan`正确的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:52:06.057

你*可能*想要

```
forkIO $ forever (atomically (tryReadTChan commandChannel) >>= fireCommand) 
```

但我没有测试过这个。另外，猜测一下，您可能希望避免`tryReadTChan`在这里。只需使用普通的 old `readTChan`，这样您就可以获得高效`retry`而不是轮询。

# c# - 如何为 DataView 设置 RowFilter 不区分大小写

> ID：12919139
> 
> 赞同：6
> 
> 时间：2012-10-16T16:20:27.817
> 
> 标签：c#, sql, case-insensitive, dataview, rowfilter

我有一个数据网格，它的数据源是一个数据视图。有一个文本框，用户可以使用该文本框输入过滤器文本。我想让过滤器不区分大小写。比如说，输入的文本是“Tg”

我试过这个

```
Mydataview.RowFilter = "UPPER(COL) LIKE '%TG%'" 
```

但这给了我一个无效操作异常

然后我把它改成

```
Mydataview.RowFilter = "COL LIKE '%tg%' or COL LIKE '%TG%'" 
```

这有效，但并不涵盖所有情况。例如，如果一行是“Tg”，它将被过滤掉，这是不可取的。我想要的是，当用户键入“Tg”时，它将匹配任何带有 tg、Tg、TG、tG 的数据，所有组合

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T16:25:34.207

`RowFilter`服从数据集`CaseSensitive`值

因此，请在您的 Form_Load 方法中执行此操作：

`CaseSensitive``False`默认设置为

```
mydataset.CaseSensitive = false 
```

概念证明：

![在此处输入图像描述](../Images/137004ff29140f36c8f83341c4b16866.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-03-01T20:34:09.523

选择名称两次，其中一个为大写（名称）作为查找器，然后使用该列（不可见）过滤您的行

# javascript - 他们是如何创建这个精美的图表的？

> ID：12919143
> 
> 赞同：-2
> 
> 时间：2012-10-16T16:20:41.140
> 
> 标签：javascript, jquery, html, animation, diagram

我在 NYTimes 网页上找到了一张精美的图表（带动画）[NYTimes Fancy Diagram](http://www.nytimes.com/interactive/2012/10/15/us/politics/swing-history.html)。请问有人知道这样的图表，底层技术和可能的工具吗？我真的很想知道如何生成这样的图表。我想 HTML5 或 javascript 做得很好。但是我对那些技术不太了解...非常感谢您的关注！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:28:50.100

[d3js.org](http://d3js.org/)是一个非常灵活且功能强大的图表框架（包括动画）。

# iphone - 如何在从顶部的窗口层获得响应之前阻止程序执行

> ID：12919147
> 
> 赞同：0
> 
> 时间：2012-10-16T16:20:54.957
> 
> 标签：iphone, objective-c, ios, multithreading, oop

在我的 iPhone 应用程序中，我遇到了屏幕上有多个`windows`的场景（注意：not `UIViews`but `UIWindows`）。这些有一些信息和`UIButtons`。以简单的方式将这些视为`UIAlertViews`具有特殊功能的，这就是为什么警报还不够。我有一段代码可以在这样的`for`循环中显示这个窗口：

```
 for (ObjectA *object in self.array) {
        if ([object.someValue isEqualToString:@"SomeString"]) {
            [self showResetMessageForObject:object];
        }
    }
 // SIGMA - further code here 
```

和方法：

```
 - (void) showResetMessageForTender:(ObjectA*)object {
// some code here
    [resetMessageWindow performSelector:@selector(show) withObject:nil afterDelay:0.3f];
    } 
```

因此，当我打电话时，`showResetMessageForObject:`我希望停止执行，`SIGMA`直到我收到一个按钮单击由 Window 层调出的

```
[resetMessageWindow performSelector:@selector(show) withObject:nil afterDelay:0.3f]; 
```

我怎样才能做到这一点？（注：“SIGMA”只是读者的占位符）

# amazon-s3 - Amazon S3 是否提供设置 blob 的 Content-MD5 标头的方法？

> ID：12919149
> 
> 赞同：0
> 
> 时间：2012-10-16T16:21:06.827
> 
> 标签：amazon-s3, amazon-web-services

我正在尝试将 blob 上传到 S3 并使用 .NET API指定“ *Content-MD5 ”标头。*我想这样做，以便 a) S3 验证哈希，b) 每当客户端下载文件时，他们将读取 blob 上的“ *Content-MD5* ”标头并在客户端进行验证。

像这样的东西：

```
 PutObjectRequest request = new PutObjectRequest();
        request.WithFilePath(fileName)
            .WithBucketName(S3_BUCKET_NAME)
            .WithKey(fileKey)
            .WithTimeout(FIVE_MINUTES)
            .WithMD5Digest("ubewX5M7uzz64zskr7FThQ=="); 
```

这似乎将头部放在请求中，并且 S3 正确验证了哈希。问题是，如果我之后查看 blob 标头，它们不满足“ *Content-MD5* ”标头，因此我无法让下游客户端在从上面下载（要求 b）后验证文件）。

我尝试了其他方法来设置 blob 上的标题，但这些方法都不起作用：

```
 request.AddHeaders(Amazon.S3.Util.AmazonS3Util.CreateHeaderEntry("Content-MD5", "ubewX5M7uzz64zskr7FThQ=="));
   request.AddHeader("Content-MD5", "ubewX5M7uzz64zskr7FThQ==");
   request.WithMetaData("Content-MD5", "ubewX5M7uzz64zskr7FThQ=="); 
```

我什至尝试使用 CloudBerry 来更新 blob 的标头，但是尽管 Cloudberry 将请求发送到 S3（并且没有抱怨），但 blob 仍然不包含标头。

有任何想法吗？S3甚至可以做到这一点吗？AzureBlob 存储有多种方法可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T06:32:06.677

没有任何 S3 文件的 MD5 是不可能的吗？注意：ETag 和 Content-MD5 相同。您可以使用 ETAG 验证您的下载流

# java - 使用 Mule ESB 的 SOAP 客户端的相互 SSL

> ID：12919150
> 
> 赞同：1
> 
> 时间：2012-10-16T16:21:10.777
> 
> 标签：java, web-services, soap, mule

我是 Mule 的新手，我正在尝试弄清楚当必须向服务器提供证书以创建 SSL 连接时，如何组合一个通过 HTTPS 发出 SOAP-XML 请求的流。（此服务提供商需要相互 SSL 进行身份验证。）

我搜索了有关这种特定类型集成的信息，但没有找到任何涉及客户端证书的信息。任何指针将不胜感激。

# javascript - 用 Greasemonkey 替换 div 类中的浮点数

> ID：12919152
> 
> 赞同：2
> 
> 时间：2012-10-16T16:21:20.637
> 
> 标签：javascript, firefox, greasemonkey

首先，我有一些 JavaScript 方面的经验，但主要是在客户端编写程序脚本，而不是 Web 环境中的 JavaScript。

我想要做的是获取和替换这个类中的 vlaue：

```
<div class="detailPrice" style="float:left;width:180px"> € 20,90* </div> 
```

每一页的值都会改变。所以我无法搜索这个特定的值。当我得到值时，我想将它分配给一个变量，例如

```
price = 20.9 
```

对其进行一些数学运算，然后用旧值替换我的新值。

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:40:16.483

所以我用 javascript 写了这个小函数来为你做这件事。这是它的[jsBin](http://jsbin.com/iyeluz/2/edit)。

```
function test(d){
    price=d.innerHTML;        //grabs the text that's inside your div
    price = parseInt(price.substring(2));    //skips the euro sign and converts to int
    newPrice=price+5;      // does some math with the price
    d.innerHTML='€ ' + newPrice;    // replaces the text within that div
} 
```

我这样做是为了当你点击价格时，这个函数会被调用。如果你看一下 JSBin，它会更有意义。

这是您可以执行此操作的众多方法之一。另一种方法是使用称为[原型](http://www.prototypejs.org/)的 javascript 框架。该框架有一个名为[update](http://www.prototypejs.org/api/element/update)的函数，其工作方式如下：

```
<div id="fruits">carrot, eggplant and cucumber</div>
Passing a regular string:

$('fruits').update('kiwi, banana and apple');
// -> HTMLElement
$('fruits').innerHTML
// -> 'kiwi, banana and apple' 
```

再次。还有其他方法可以做到这一点。你只需要寻找它们。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:10:57.683

`querySelectorAll()`如果您相当确定格式，请使用获取 div 并使用正则表达式提取价格。
下面的正则表达式说明了常见的欧洲和美国格式，但假定小数点右侧有两位数。

[**请参阅 jsFiddle 的实际代码。**](http://jsfiddle.net/3PEjs/)

```
var priceDivs   = document.querySelectorAll ("div.detailPrice");
for (var J = priceDivs.length - 1;  J >= 0;  --J) {
    var oldPriceParts   = priceDivs[J].textContent.match (/^(?:\s|\D)*([0-9\.,]*)(\d{2})\D*$/);
    if (oldPriceParts.length === 3) {
        var newPrice    = parseInt ('0' + oldPriceParts[1].replace (/[\.,]/g, ""), 10)
                        + parseInt (oldPriceParts[2], 10) / 100
                        ;
        // DO WHATEVER MANIP YOU WANT HERE.
        newPrice        = newPrice * 1.3;

        priceDivs[J].textContent = '€ ' + newPrice.toFixed (2).toLocaleString ();
    }
    else {
        console.log ("**Unexpected price format!** ", priceDivs[J]);
    }
} 
```

# markdown - 如何在 Razor 视图中从数据库中呈现 Markdown 文本？

> ID：12919153
> 
> 赞同：4
> 
> 时间：2012-10-16T16:21:21.353
> 
> 标签：markdown, servicestack

所以我正在处理我自己的自定义路由映射（而不是让 ServiceStack 自动处理它），仅仅是因为我的所有数据都存储在数据库、页面内容和所有内容中。我有一系列 _Layout.cshtml 文件，我的 Markdown 存储为字符串。

所以我想我在问，我需要为我的映射路由继承什么类型的服务（常规服务？），我需要返回什么状态“在字符串 Y 中使用布局 X 和 Markdown”？

我已经阅读了 ServiceStack Wiki 和新示例页面上的示例，但找不到任何示例来实现这一点（一切似乎都是从文件中读取 Markdown，而 Razor 从数据库中读取变量）。

如果我的问题不清楚，请告诉我，我很乐意相应地修改它。

--

## 编辑

一些澄清：

是的，我可以加载常规的 Razor 页面。是的，我从要加载的文件中获得了常规的 Markdown。

我现在只是好奇如何将 Markdown 渲染到字符串中的 Razor 方法“RenderBody()”（来自我的数据库）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T15:20:24.817

如果您只是想将**Markdown 文本呈现为 HTML**（不是 Markdown Razor，即没有 razor 功能！），您需要执行以下两个步骤：

```
var renderer = new MarkdownSharp.Markdown();
string html = renderer.Transform("___your_markdown_markup_here___"); 
```

例如，现在您只需将呈现的 HTML 添加到 Razor 视图中的适当位置。

* * *

但是，如果您的目标是在 Razor 视图中呈现正常的**Markdown 视图（即`.md`ServiceStack 项目中的文件）**，则需要遵循以下引用：

> ### 在 Razor 页面中包含部分 Markdown 视图
> 
> 我们非常喜欢 Markdown 和 Razor，ServiceStack 中包含了 Markdown 的增强版本，它具有 Razor 功能和称为 Markdown Razor 的语法，现有 Razor 用户应该立即熟悉。
> 
> 由于我们期望 Razor + Markdown 成为越来越流行的组合，我们扩展了 @Html.Partial() 支持以嵌入来自不同视图引擎的 Partials。此功能允许您嵌入任何 Markdown 页面，就像我们使用标准 Razor Partial 语法在每个内容繁重的 Rockstar 页面中所做的那样：
> 
> ```
> @Html.Partial("Content") 
> ```
> 
> 这告诉 ServiceStack 在该位置的页面内嵌入一个名为 Content 的 Partial。首先，如果它到达 Markdown Razor 视图引擎，它将查找一个名为 Content.cshtml 的 Partial，然后是一个名为 Content.md 的 Partial。最初，它搜索当前目录，然后搜索 /Views/Shared 文件夹中的任何匹配的 Partials。

*引自[http://razor.servicestack.net](http://razor.servicestack.net)。*

# ios - Apple Push Notification Service 发送重复通知

> ID：12919156
> 
> 赞同：3
> 
> 时间：2012-10-16T16:21:35.230
> 
> 标签：ios, iphone, cron, apple-push-notifications

我有一个从 Apple Push Notification Service 接收通知的 iPhone 应用程序。我正在使用（[Easy APNS for PHP](http://www.easyapns.com/)）使用每 15 分钟运行一次的 Cron 作业推送通知。我注册了大约 400 台使用我的应用程序的设备。

问题：当我想向我的用户发送新通知时，他们会多次收到通知，而且总是一样的。我不知道为什么 Apple 会多次发送相同的通知（比如 5 或 6 次）

一些额外的信息：

*   Easy APNS 通过一次获取 100 条消息（如一批）来工作，所以我想将 400 条消息发送给我的所有用户需要 1 小时。
*   在我的 apns_messages 表中，每个设备的消息只有一个条目，因此理论上没有重复的消息。似乎同一个条目被处理了很多次。

我找不到这么多次收到相同通知的原因。这对用户来说也很烦人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T13:29:35.573

好的，我发现了发生了什么。EasyAPNS 抓取 100 条消息并循环播放它们。在每个循环中，y 连接到两个 Apple 服务（推送通知服务和反馈服务）。在我的服务器中，防火墙阻止了反馈服务的端口，在尝试连接它时会超时。所以 php 执行崩溃了，当它已经发送时，消息被保留为“排队”。所以同一条消息被处理了很多次！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:49:43.653

可能是您在发送后没有从消息表中删除消息吗？Easy APNS 似乎将 apns_messages 表中的消息排队，直到准备好发送。因此，如果他们在发送后仍留在该表中，Easy APNS 将看到它们并再次发送它们。

# macos - AppleScript：如果文件存在则复制到路径

> ID：12919161
> 
> 赞同：-1
> 
> 时间：2012-10-16T16:21:59.700
> 
> 标签：macos, copy, applescript, paste

我正在尝试编写一个应用程序脚本，检查我选择的文件夹中是否有一个名为 file.pages 的文件，如果有，Finder 应该为我将它复制到一个设定的路径......我有可能在那里使用吗顶部为existbthen commad：[Applescript 检查文件是否存在](https://stackoverflow.com/questions/12297788/applescript-to-check-if-files-exist)并选择文件夹我使用命令：选择文件夹；将文件夹设置为结果

任何人都可以为我编写脚本吗？我不明白复制命令以及如何使用 POSIX

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T21:00:07.600

尝试：

```
set fileName to "file.pages"

set myFolder_alias to choose folder
try
    tell application "Finder" to set myFile to (first file of myFolder_alias whose name is fileName)
on error
    return fileName & " does not exist in " & myFolder_alias
end try

set myAlias to myFile as alias
set myHFS_Path to myAlias as text
set myPosixPath to POSIX path of myAlias 
```

# android - jQuery Mobile 中的后退按钮触发两次

> ID：12919162
> 
> 赞同：0
> 
> 时间：2012-10-16T16:22:02.707
> 
> 标签：android, cordova, jquery-mobile

我正在使用 jQuery Mobile 和 Phonegap 开发一个小型 Android 应用程序。

我遇到以下问题：

我有一个页面 A，其中包括一个 Google 地图和一个`infowindow`.

当我点击链接时，应用程序会切换到页面 B，当我点击页面 B 上的返回按钮时，页面会意外返回页面 B 而不是页面 A。

在后页转换过程中，页面会闪烁。页面更改事件似乎触发了两次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T22:04:33.000

将 Phonegap 升级到 2.1.0

他们已经修复了返回和菜单按钮的一些问题

# node.js - 使用哪种护照身份验证

> ID：12919166
> 
> 赞同：2
> 
> 时间：2012-10-16T16:22:25.547
> 
> 标签：node.js, passport.js

我在我的网站中使用了几种 Passport 身份验证策略，效果很好，但是，我需要一个`Demo`or （我们可以调用`session`）策略，它通过它的会话 id 自动授权用户，现在我正在手动进行，当用户导航时到`/demo`页面，我在 db (mongodb) 上使用会话 ID 运行查询，如果用户存在，我会使用该用户呈现页面，如果不存在，我会创建一个。

```
app.get('/demo', function(req,res) {
  db.User.findOne({ 'accounts.kind': 'demo', 'accounts.sid': req.sessionID }, function(err, user) {
    if (user) {
      res.render( 'home', {
        user: user
      });
    } else {
      var user = new db.User();
      user.accounts.push({
        kind: 'demo',
        sid: req.sessionID,
        created: Date.now
      });
      req.session.userId = user._id;

      user.save(function(err) {
        if(err) { throw err; }
        res.render( 'home', {
          user: user
        });
      });
    }
  });
}); 
```

用户架构如下所示：

```
UserSchema = new Schema({
  uname: {type: String},
  accounts: [],
  docs:[{type:Schema.Types.ObjectId, ref:'Doc'}]
}) 
```

它可以工作，但是我需要设置一个会话变量，因为这个方法没有登录用户，我的意思是`req.user`请求中没有，但是使用那个会话变量我可以检查用户是否是演示用户。

```
if (req.user) {
    userid = req.user._id.toString();
  } else {
    userid = req.session.userId;
  } 
```

我敢肯定，使用现有的护照策略之一，有一种更优雅的方式来做到这一点。我看到有[passport-http](https://github.com/jaredhanson/passport-http)和[passport-anonymous](https://github.com/jaredhanson/passport-anonymous)以及其他几个，但我不确定应该使用哪个。

为用户创建数据库条目对我来说很重要。所以稍后我可以附加另一个帐户。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T19:43:02.417

事实证明，在这种情况下，创建自定义策略是不必要的。我发现官方[LocalStrategy](https://github.com/jaredhanson/passport-local)有一个（未记录的）`passReqToCallback`选项，它使您能够访问`req`验证函数中的对象。您可以使用 LocalStrategy 仅通过更改 verify 函数来使用它来执行各种操作：

```
passport.use(new LocalStrategy({
    passReqToCallback: true
}, function(req, username, password, done) {
    //now that you have req object, you can
    //probably do whatever you need to do right here
}); 
```

请注意，该函数现在需要 4 个参数，以object`req, username, password, done`开头，而不是默认的 3 个。`req`

我希望这可以为您节省一些时间，在浏览 LocalStrategy 代码之前，我花了大约一个小时试图解决这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T15:46:58.447

我可以这样解决它：定义一个新的策略，

```
var passport = require('passport')
  , util = require('util');

function DemoStrategy(options, verify) {
  if (typeof options == 'function') {
    verify = options;
    options = {};
  }
  if (!verify) throw new Error('Demo Basic authentication strategy requires a verify function');

  passport.Strategy.call(this);
  this.name = 'demo';
  this._verify = verify;
}

util.inherits(DemoStrategy, passport.Strategy);

DemoStrategy.prototype.authenticate = function(req) {
  var self = this;
  this._verify( req, function(err, user) {
    if (err) { return self.error(err); }
    self.success(user);
  });
}

module.exports.Strategy = DemoStrategy; 
```

路线：

```
app.get('/auth/demo', 
    passport.authenticate('demo'),
    function(req,res) { 
      res.redirect('/');
     }
  ); 
```

和 passport.use 部分：

```
passport.use(new DemoStrategy( 
  function(req, done) {
    console.log( 'using demo strategy, req: ', req );
    if (req.user) {
      // place code here, if we want to attach to an existing account
    } else {
      db.User.findOne({ 'accounts.kind': 'demo', 'accounts.sid': req.sessionID }, function(err, dbuser) {
        if (dbuser) {
          done(null,dbuser);
        } else {
          var user = new db.User();
          user.accounts.push({
            kind: 'demo',
            sid: req.sessionID,
            created: Date.now
          });

          user.save(function(err) {
            if(err) { throw err; }
            done(null,user);
          });
        }
      });
    }
  }
)); 
```

也许它充满了错误，并且错误处理不完整，但似乎是正确的解决方案，它已集成到备受赞赏的[护照](http://passportjs.org/)库中，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T00:04:29.980

[从护照配置](http://passportjs.org/guide/configuration.html)中查看第 4 节。这是将 session-id 放入 cookie 并在用户返回时检索数据的代码。无需策略。

```
passport.serializeUser(function(user, done) {
  done(null, user.id);
});

passport.deserializeUser(function(id, done) {
  User.findById(id, function (err, user) {
    done(err, user);
  });
}); 
```

# c# - 删除单个 RadGrid 列的过滤器

> ID：12919167
> 
> 赞同：3
> 
> 时间：2012-10-16T16:22:28.753
> 
> 标签：c#, asp.net, asp.net-mvc, telerik, radgrid

我正在使用 Telerik RadGrid 并在某些列上设置了自定义过滤器。作为该自定义过滤器（只是一个文本框）的一部分，我还有一个按钮，单击该按钮时，我只想清除该特定列的过滤器值。

我有按钮工作，并将特定列的过滤器设置为空字符串，然后重新绑定网格，但这不会删除过滤器值。

似乎只修改 grid.MasterTableView.FilterExpression 实际上会影响过滤器，但是如何从 FilterExpression 中只删除一列的过滤器值？

```
<telerik:RadTextBox ID="RdTxtC" EmptyMessage="Search" runat="server" EmptyMessageStyle-Font-Italic="true"
    CssClass="padtop4" HoveredStyle-Font-Italic="true" ClientEvents-OnKeyPress="filterC"
    InputType="Text" Width="80%">
</telerik:RadTextBox>
<asp:Button ID="ibtnClearFilterTown" ClientIDMode="Static" runat="server" CssClass="clearFilterButton" OnClick="ibtnClearFilterTown_Click"/> 
```

在代码隐藏中：

```
protected void ibtnClearFilterTown_Click(object sender, EventArgs e)
{
    RgClientList.MasterTableView.GetColumnSafe("TownCity").CurrentFilterValue = String.Empty;
    RgClientList.Rebind();
} 
```

删除单个列的过滤器似乎是一个相当简单的要求，所以我认为我必须遗漏一些明显的东西 - 任何帮助表示赞赏....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:29:53.243

继续尝试这个而不是你的代码中的内容：

```
protected void ibtnClearFilterTown_Click(object sender, EventArgs e)
{
   RgClientList.MasterTableView.GetColumnSafe("TownCity").CurrentFilterFunction = GridKnownFunction.NoFilter;
   RgClientList.MasterTableView.GetColumnSafe("TownCity").CurrentFilterValue = String.Empty;
   RgClientList.Rebind();

} 
```

此外，根据[在 SO 上提出的这个问题](https://stackoverflow.com/questions/5051322/radgrid-apply-filter-in-codebehind)，您可能需要更改 Radgrid 上的以下属性：

```
EnableLinqExpressions="False" 
```

* * *

**编辑1：（**把它放在按钮按下）

我知道这看起来很像你想做的事，但我检查了 Telerik 的文档，并没有看到一种简单的方法来简单地从 MasterTableView.FilterExpression 中删除一个过滤器字符串。这主要是由于每列将其过滤器存储为文本的方式，而不是进入最终过滤器字符串的值。

我将引导您完成以下涉及的步骤：

*   它从每一列创建一个过滤器集合，删除您不想要的过滤器（columnwhosfilteryouwantremoved），然后遍历列并清除您希望设置的列 = ""
*   然后它将网格的过滤器设置为其新值，然后重新绑定。

    ```
    String MasterFilterExp = "";        

    var tempCollection = (from String sFilt in RadGrid1.MasterTableView.FilterExpression.Split(new string[] {"AND"},StringSplitOptions.None)
                       where sFilt.Contains("[columnnameoffilteryouwantremoved]") != true 
                       select sFilt).ToArray();

    MasterFilterExp = string.Join(" AND ", tempCollection);

    foreach (GridColumn column in RadGrid1.MasterTableView.Columns)
    {
        if (column.UniqueName == "columnnameoffilteryouwantremoved")
        {                
            column.CurrentFilterFunction = GridKnownFunction.NoFilter;
            column.CurrentFilterValue = String.Empty;
        }            
    }

    RadGrid1.MasterTableView.FilterExpression = MasterFilterExp;
    RadGrid1.Rebind(); 
    ```

它可能可以简化，但如果您有任何问题，请告诉我。我对其进行了测试，并且能够从网格中删除列的过滤器并重新绑定以显示更新的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-11T08:19:51.537

为什么不用 Javacript 试试看：

```
function FilterMenuShowing(sender, eventArgs)   
   {     
       if (eventArgs.get_column().get_uniqueName() == "IsPostable")      
       {              
           var menu = eventArgs.get_menu();   
           var items = menu._itemData;   

           var i = 0;   

           while (i < items.length)     
           {     
                   var item = menu._findItemByValue(items[i].value);   
                   if (item != null)   
                       item._element.style.display="none";   
               i++;     
           }
       }
 } 
```

您可以[在此处查看详细信息](http://www.telerik.com/forums/reducing-filter-options-in-radgrid)

# permissions - TYPO3 - BE ACL - 单一记录权限？

> ID：12919171
> 
> 赞同：0
> 
> 时间：2012-10-16T16:22:37.880
> 
> 标签：permissions, acl, typo3, backend

我想授予 BE 用户仅查看/编辑某种类型的记录的权限。

例如，我有很多 tt_address，我想允许某些客户在 BE 中仅查看/编辑他/她的 tt_address，记录位于同一个 sysfolder 中。

有可能还是我需要挂钩核心来实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:05:40.740

该工作有一个扩展：http: [//typo3.org/extension-manuals/tm_contentaccess/current/](http://typo3.org/extension-manuals/tm_contentaccess/current/)但是没有检查它。我在[邮件列表中](http://typo3.3.n7.nabble.com/access-rights-of-single-data-records-td109839.html)看到它在 TYPO3 4.5+ 中的状态未经验证。

如果它不起作用，我不会破解核心。相反，编写一个后端模块来仅列出/编辑给定数据库表中的选定项目应该是一件很容易的事，因此您可以使用包含“所有者”的 UID 的字段扩展 tt_address。

# database-design - 如何实现数据库设计，我可以在其中跟踪对特定列所做的更改

> ID：12919176
> 
> 赞同：0
> 
> 时间：2012-10-16T16:22:44.477
> 
> 标签：database-design, rdbms, azure-sql-database, event-tracking

如何在数据库端实现事件跟踪？假设我在表中有以下列： UserID, Column1, Column2, Column3 其中 UserID 是主键，而 Column1 具有唯一约束。

假设用户可以在应用程序端更改 Column1、Column2 和 Column3 的值。

进一步假设我需要检测对每一列所做的更改并将它们显示给用户。

我想过做这样的事情：

```
Table1: EventID (PK), EventDate, UserID, Column1 
Table2: EventID (PK), EventDate, UserID, Column2 
Table3: EventID (PK), EventDate, UserID, Column3 
```

除了主键之外，上述任何列都没有唯一性验证。这样，每当修改每一列时，我都会将新值插入到相应的表中，并且可以跟踪对该列所做的所有更改，但这意味着我需要放弃对 Column1 的唯一约束。我可以通过获取每个 UserID 的最新 Column1 值并将它们相互比较来检查应用程序层的唯一性。（不知道这有多聪明）

这也意味着我需要为需要跟踪更改的每一列创建一个单独的表。

作为一名非数据库设计专家，我想知道如何以最优雅的方式实现数据库架构，我可以在其中进行事件跟踪。

PS 如果这有帮助，我对使用 SQL Azure 很感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:11:30.907

您不应该只需要一个完整的表来记录应用程序表的*每一*列的事件。把所有东西都`event logs`放在一张桌子上。像这样定义它：

```
EventLogs
    EventID (PK)
    EventDate
    UserID         # remember to add an index
    Field_changed  # format: TableName.FieldName as a string
    # or instead of Field_changed with both in one, you can do:
    Table_changed
    Column_changed 
```

根据您拥有的表/操作/事件的数量以及是否要存储之前/之后的值，您可以将事情分开一点，但它不应该是必需的。

至于跟踪“特定列”，在`Updates`成功时在应用代码中添加。不确定您打算如何跟踪`Inserts`，`Deletes`但如果您也想要，请`Event_Type`在日志表中添加一个（枚举）字段。

# post - j2me 与 Spring Security 的连接

> ID：12919181
> 
> 赞同：1
> 
> 时间：2012-10-16T16:22:58.093
> 
> 标签：post, java-me, spring-security

我有一个使用 Spring Security 进行身份验证的应用程序我正在尝试从 j2ME midlet 连接到该应用程序

所以我使用 post 方法从 j2me 应用程序发送 HTTP 请求来发送用户名和密码，但它不起作用

发布方法代码很好。它适用于同一应用程序的其他服务（不需要身份验证）

但是当涉及到身份验证时，我得到了响应代码 302

这是我的代码

```
 OutputStream os = null;
        HttpConnection connection = null;
        InputStream is = null;
        StringBuffer sb = new StringBuffer();
        try {
                connection = (HttpConnection)Connector.open("http://localhost:8080/myAppli/j_spring_security_check");
                connection.setRequestMethod(HttpConnection.POST);
                connection.setRequestProperty("User-Agent", "Profile/MIDP-2.0 Configuration/CLDC-1.1");
                connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");

                os = connection.openOutputStream();
                byte data[] =("j_username=appliusername&j_password=applipassword").getBytes();
                os.write(data);
                os.flush();
                int respCode=connection.getResponseCode();

           if (connection.getResponseCode() == HttpConnection.HTTP_OK) {
                is = connection.openInputStream();
                if (is != null ) {
                    int ch = -1;
                    while ((ch = is.read()) != -1) {

                    sb.append((char)ch);
                     }

               }
          }else {
              System.out.println("Error in opening HTTP Connection. Error#" + respCode);
           }              
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
             try {
                    if (is != null) {
                        is.close();
                        //is = null;
                    }
                     if (os != null) {
                        os.close();
                        //is = null;
                    }
                    if (connection != null) {
                        connection.close();
                       // connection = null;
                    }
              }catch (Exception e2) {
                    e2.printStackTrace();
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:43:48.560

您可以尝试使用 URL 的授权部分并从

```
"http://localhost:8080/myAppli/j_spring_security_check" 
```

至

```
"http://appliusername:applipassword@localhost:8080/myAppli/j_spring_security_check" 
```

有关这方面的更多信息，请查看[http://en.wikipedia.org/wiki/URI_scheme#Examples](http://en.wikipedia.org/wiki/URI_scheme#Examples)

# jquery - 调整外部 Div 大小的 Firefox Jquery 可拖动问题

> ID：12919183
> 
> 赞同：1
> 
> 时间：2012-10-16T16:23:00.080
> 
> 标签：jquery, firefox, html, user-interface, resize

我在这里设置了一个示例：[链接](http://jsfiddle.net/TheGodEmperor/hZJ9S/)

基本上，只有在 Firefox 中，它才会在您拖动时重新调整外部 div 的大小。我认为它必须处理相对定位。我想知道如何用 jquery UI 解决这个问题。我一直在阅读 API 并寻找其他相关的问题，但到目前为止我还没有运气。

关于如何修复它的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:08:18.930

如何将助手选项设置为克隆？

**[jsFiddle 示例](http://jsfiddle.net/hZJ9S/6/)**

# c++ - 为什么编译器不将浮点 *2 优化为指数增量？

> ID：12919184
> 
> 赞同：46
> 
> 时间：2012-10-16T16:23:05.227
> 
> 标签：c++, c, performance, optimization, compiler-optimization

我经常注意到 gcc 将乘法转换为可执行文件中的移位。`int`将 a和 a相乘时可能会发生类似的情况`float`。例如，`2 * f`, 可能只是将 的指数增加`f`1，从而节省一些周期。编译器，也许如果有人要求他们这样做（例如 via `-ffast-math`），通常会这样做吗？

编译器通常足够聪明来做到这一点，还是我需要自己使用`scalb*()`or`ldexp()/frexp()`函数系列来做到这一点？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-10-16T16:33:23.577

> 例如，2 * f，可能只是将 f 的指数增加 1，从而节省一些周期。

这根本不是真的。

首先，您有太多的极端情况，例如零、无穷大、南和非正规。然后你有性能问题。

*误解是增加指数并不比做乘法快。*

如果您查看硬件说明，则没有直接增加指数的方法。所以你需要做的是：

1.  按位转换为整数。
2.  增加指数。
3.  按位转换回浮点数。

在整数和浮点执行单元之间移动数据通常存在中等到较大的延迟。所以最后，这种“优化”变得比简单的浮点乘法差得多。

所以编译器不做这个“优化”的原因是它没有更快。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-16T17:49:50.017

在现代[CPU](http://en.wikipedia.org/wiki/Central_processing_unit)上，乘法通常具有每周期一个吞吐量和低延迟。如果该值已经在浮点寄存器中，那么您将无法通过杂耍它来对表示进行整数运算来击败它。如果它一开始就在内存中，并且假设当前值和正确结果都不是零、非正规、南或无穷大，那么执行类似的操作*可能*会更快

```
addl $0x100000, 4(%eax)   # x86 asm example 
```

乘以二；我唯一能看到这是有益的情况是，如果您正在对远离零和无穷大的整个浮点数据数组进行操作，并且按 2 的幂进行缩放是您将要执行的唯一操作（所以您没有任何现有理由将数据加载到浮点寄存器中）。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-10-16T17:00:45.390

常见的浮点格式，尤其是 IEEE 754，不会将指数存储为简单整数，将其视为整数不会产生正确的结果。

在 32 位浮点或 64 位双精度中，指数字段分别为 8 位或 11 位。指数代码 1 到 254（浮点数）或 1 到 2046（双精度数）确实像整数：如果将其中一个值加到一个并且结果是这些值之一，则表示的值加倍。但是，在这些情况下添加一个会失败：

*   初始值为 0 或低于正常值。在这种情况下，指数字段从零开始，向其添加 2 ^(-126)（浮点数）或 2 ^(-1022)（双精度数）；它不会使数字翻倍。
*   初始值超过 2 ^(127)（浮点数）或 2 ^(1023)（双精度数）。在这种情况下，指数字段从 254 或 2046 开始，向其添加 1 会将数字更改为 NaN；它不会使数字翻倍。
*   初始值为无穷大或 NaN。在这种情况下，指数字段从 255 或 2047 开始，向其添加 1 会将其更改为零（并且可能会溢出到符号位）。结果为零或次正规，但应分别为无穷大或 NaN。

（以上为正号。情况与负号对称。）

正如其他人所指出的，一些处理器没有快速操作浮点值位的设施。即使在那些这样做的情况下，指数字段也不会与其他位隔离，因此在上述最后一种情况下，通常不能在不溢出到符号位的情况下向其添加一个。

尽管某些应用程序可以容忍诸如忽略次正规或 NaN 甚至无穷大的捷径，但很少有应用程序可以忽略零。由于向指数加一无法正确处理零，因此它不可用。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-10-16T16:26:43.340

这与编译器或编译器编写者不聪明无关。这更像是遵守标准并产生所有必要的“副作用”，例如 Infs、Nans 和非规范化。

它也可能是关于*不*产生其他不需要的副作用，例如阅读记忆。但我确实认识到在某些情况下它可以更快。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-17T06:14:40.980

实际上，这就是硬件中发生的事情。

也作为`2`浮点数传入 FPU，尾数为 1.0，指数为 2^1。对于乘法，指数相加，尾数相乘。

鉴于有专用硬件来处理复杂情况（乘以不是 2 的幂的值），并且处理特殊情况并没有比使用专用硬件更糟糕，因此拥有额外的电路和指令是没有意义的.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-03T07:18:56.020

这是我在 GCC 10 中看到的实际编译器优化：

```
x = 2.0 * hi * lo; 
```

生成此代码：

```
mulsd   %xmm1, %xmm0      # x = hi * lo;
addsd   %xmm0, %xmm0      # x += x; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-17T02:52:46.600

对于嵌入式系统编译器来说，具有特殊的二乘幂伪操作可能很有用，它可以由代码生成器以对所讨论机器最优化的任何方式进行翻译，因为在一些嵌入式处理器上，专注于指数可能比进行完全的二次幂乘法快一个数量级，但是在乘法最慢的嵌入式微控制器上，编译器可能会通过让浮点乘法例程检查其参数来实现更大的性能提升在运行时跳过尾数为零的部分。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-14T09:12:59.323

[一个关于乘以 2 的幂的先前 Stackoverflow 问题](https://stackoverflow.com/questions/7720668/fast-multiplication-division-by-2-for-floats-and-doubles-c-c)。共识和实际实现证明，不幸的是，目前没有比标准乘法更有效的方法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-03-11T17:12:51.587

如果您认为乘以 2 意味着指数增加 1，请再想一想。以下是 IEEE 754 浮点运算的可能情况：

案例 1：Infinity 和 NaN 保持不变。

情况 2：通过增加指数并将除符号位以外的尾数设置为零，将具有最大可能指数的浮点数更改为无穷大。

情况 3：指数小于最大可能指数的归一化浮点数的指数增加 1。伊皮！！！

情况 4：设置了最高尾数位的非规范化浮点数的指数增加了 1，将它们变成了规范化数字。

情况 5：清除了最高尾数位的非规格化浮点数，包括 +0 和 -0，其尾数向左移动一位，而指数保持不变。

我非常怀疑生成正确处理所有这些情况的整数代码的编译器是否会与处理器中内置的浮点一样快。它只适合乘以2.0。对于乘以 4.0 或 0.5，适用一套全新的规则。对于乘以 2.0 的情况，您可能会尝试将 x * 2.0 替换为 x + x，许多编译器都会这样做。那就是他们这样做，因为处理器可能能够例如同时进行一次加法和一次乘法运算，但不能每种都进行一次。因此，*有时*您更喜欢 x * 2.0，有时更喜欢 x + x，这取决于其他操作需要同时执行的操作。

# javascript - 无法将 ListItem 动态添加到 dojo 中的列表中

> ID：12919194
> 
> 赞同：0
> 
> 时间：2012-10-16T16:23:29.877
> 
> 标签：javascript, dojo

我一直在尝试动态添加 ListItem，下面的代码片段有什么问题？

```
 function nativePluginResultHandler (result)
        {
           alert ("My Result" + result);           
            var listWid = dijit.byId("mylist");
            alert (" hook 1");
            var cw = new dojox.mobile.ListItem ({id: "Jitem1", label:"blabla"});
            alert ( "hook 2");
            listWid.addChild(cw);
            alert ( "Hook 3");

} 
```

显示“我的结果”警报消息，然后什么都没有发生？..请知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:53:34.237

没关系，我找到了答案：。:)

```
 require (["dijit/registry", "dojo/domReady!"], function (registry) {
             var list = registry.byId("mylist");
             var childWidget = new dojox.mobile.ListItem ({id: "item1" , label:"newRecord"} );
             list.addChild (childWidget);

             }); 
```

上面的代码有效。

# ios - 尝试将参数发送到下一个表视图控制器的 prepareForSegue 中的“类型对象上找不到属性”错误

> ID：12919195
> 
> 赞同：1
> 
> 时间：2012-10-16T16:23:33.613
> 
> 标签：ios, xcode, uitableview, segue, uistoryboardsegue

Xcode 似乎没有找到给定 UITableViewController 的属性，即使我正在导入它并且它们似乎在类上正确定义。

我尝试清理、删除派生数据、重新启动 XCode 并再次构建，但这些都不起作用。还尝试通过设置器访问该属性。

这是我的代码：

**主视图控制器.m**

```
#import "DetailTableViewController.h"
...
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"nextScreen"]) {
    DetailTableViewController *detailTableViewController = [segue destinationViewController];
    NSInteger tagIndex = [(UIButton *)sender tag];
    detailTableViewController.productType = tagIndex;

    /*[detailTableViewController setProductType:tagIndex];*/ //This does not work either.
 } else  if ([[segue identifier] isEqualToString:@"anotherSegue"]){
    MyLoginViewController *loginViewController = [segue destinationViewController];
    loginViewController.delegate = self; //Funnily enough, this one works
 }
} 
```

**DetailTableViewController.h** #import

```
@interface DetailTableViewController : UITableViewController<UITableViewDelegate, UITableViewDataSource> {
    NSInteger *productType;
}

 @property (nonatomic) NSInteger *productType;

@end 
```

**DetailTableViewController.m**

```
@implementation DetailTableViewController

@synthesize productType = _productType;
... 
```

**编辑：**错误出现在这一行：

```
detailTableViewController.productType = tagIndex; 
```

有谁知道为什么会发生这种情况？谢谢！

**更新：**

看起来这与 XCode 如何引用我的文件有关，这真的很奇怪：

*   当我 cmd + 单击 detailTableViewController（我创建实例的地方）时，它会将我带到我的实际代码：

    ```
     detailTableViewController *detailTableViewController = [segue destinationViewController]; 
    ```

*   但是当我 cmd + 单击导入行时，它会将我带到一些与我的名称相同的界面，以及相同的声明，但它没有我的代码所具有的任何属性。

    ```
    #import "DetailTableViewController.h" 
    ```

有没有人经历过同样的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T11:04:40.297

解决了！

所以基本上，我可以发现 Finder 中的文件有两个副本，一个在我项目的根文件夹中，另一个在源文件夹中。

无法理解为什么会发生这种情况，或者我是否无意复制了文件，但现在它可以正常工作了。

感谢大家的回答！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:37:00.993

将您的详细控制器命名为类以外的其他名称（非常明显）。

```
detailTableViewController *detailTableViewController 
```

为了：

```
detailTableViewController *detailTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:41:13.073

detailTableViewController 是否嵌入在导航控制器中？如果是这样，您将需要以这种方式访问​​它：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"nextScreen"]) {
    UINavigationController *nc = segue.destinationViewController;
    DetailTableViewController * detailTableViewController = [nc.viewControllers objectAtIndex:0]; // First view in nav controller
    NSInteger tagIndex = [(UIButton *)sender tag];
    detailTableViewController.productType = tagIndex;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T17:05:01.877

您应该`[segue destinationViewController]`转换为您需要的任何类型的控制器，因为该方法返回一个泛型`UIViewController`（它不知道您希望它是什么类型的类，这就是您需要转换它的原因）

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"nextScreen"]) {

        // cast destinationViewController to DetailTableViewController
        DetailTableViewController *detailTableViewController = (DetailTableViewController*)[segue destinationViewController];
        NSInteger tagIndex = [(UIButton *)sender tag];

        detailTableViewController.productType = tagIndex;

    } else if ([[segue identifier] isEqualToString:@"anotherSegue"]) {

        // cast destinationViewController to MyLoginViewController
        MyLoginViewController *loginViewController = (MyLoginViewController*)[segue destinationViewController];
        loginViewController.delegate = self;

    }
} 
```

这应该够了吧。

# ipad - iPad 上的 HTML5 视频尺寸错误

> ID：12919197
> 
> 赞同：1
> 
> 时间：2012-10-16T16:23:37.670
> 
> 标签：ipad, html5-video

我构建了一个由 HTML5 视频组成的交互式游戏，有时在其上添加可点击的 png 层以增加交互性。

它非常简单，并且在 Chrome/Firefox 上运行良好，但我正试图让它在 iPad 上运行，但我遇到了一个问题：无论我在 CSS 或`<video>`标签中放置的大小，视频在 iPad 上显示得更小。

我正在使用 VideoJS 来管理 HTML5 视频上的事件。

您可以在[http://megalobio.com](http://megalobio.com)进行测试。它是法语，但易于理解，只需 Facebook 登录即可打开游戏（不保存数据，仅用于游戏构建目的）。

我迫切需要一些帮助，这让我忙了好几天......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:41:41.050

您可以通过设置正确的[视口元标记来避免这种情况](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/quick-tip-dont-forget-the-viewport-meta-tag/)

尝试在您的

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

您可能还想根据[设备方向更改值](http://www.williammalone.com/articles/html5-javascript-ios-orientation/)

另一个推荐阅读[这里](http://x7.fi/2010/02/12/how-to-fit-your-website-for-the-apple-ipad/)

# entity-framework - 实体框架迁移无法创建外键约束

> ID：12919200
> 
> 赞同：2
> 
> 时间：2012-10-16T16:23:49.900
> 
> 标签：entity-framework, foreign-keys, many-to-many, constraints, database-migration

我有 2 张桌子：

```
public class Work
{
    public int WorkId { get; set; }
    (...)
}

public class Check
{
    public int CheckId { get; set; }
    (...)
} 
```

然后我想在它们之间添加与有效负载的多对多关系，因此：

```
public class WorkCheck
{
    [Key, Column(Order = 0)]
    [ForeignKey("Work")]
    public int WorkId { get; set; }
    public virtual Work Work { get; set; }

    [Key, Column(Order = 1)]
    [ForeignKey("Check")]
    public int CheckId { get; set; }
    public virtual Check Check { get; set; }

    (...)
}

   public class Work
    {
        public int WorkId { get; set; }
        (...)
        public virtual IList<WorkCheck> WorkChecks { get; set; }
    }

    public class Check
    {
        public int CheckId { get; set; }
        (...)
        public virtual IList<WorkCheck> WorkChecks { get; set; }
    } 
```

在包管理器控制台中，我运行了命令“Add-Migration WorkCheckTableAdded”，没有显示任何错误。

但是之后，当我执行“Update-Database -verbose”命令时，出现异常： **“外键 'FK_dbo.WorkCheck_dbo.Work_WorkId' 引用了引用表 'dbo.Work' 中的无效列 'WorkId'。无法创建约束。查看以前的错误。”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:38:47.660

在新项目中不会出现此问题。这可能与我的项目中一些失败的迁移脚本有关。为了重置迁移，我删除了 VS 项目和目标数据库中的 Migrations 文件夹。

# ruby - 将代码从 .erb 转换为 .haml 时遇到问题

> ID：12919203
> 
> 赞同：3
> 
> 时间：2012-10-16T16:24:09.513
> 
> 标签：ruby, haml

我今天开始使用**HAML**，但我仍在试图弄清楚如何将我的**ERB**代码转换为**HAML**文件。

此代码应该将数组的单个字符串（**exAry**）放入表单的选择“框”中，并且可以完美地用作*.erb*文件。

```
<select>
<% @exAry.each do |elem| %>
<option value="<%= elem %>" name="<%= elem %>"> <%= elem %> </option>
<% end %>
</select> 
```

那么如何将此代码转换为**HAML**呢？

（我知道 HAML 的基础知识，只是其中的 ruby​​ 代码有问题）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T16:31:26.603

```
%select
  - @exAry.each do |elem|
    %option{:name => elem, :value => elem}
      = elem 
```

我正在使用[haml转换器](http://html2haml.heroku.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:32:34.720

你可以看看 erb2haml 命令行工具：

[erb2haml](https://github.com/dhl/erb2haml)

# python - Python：将公共键从一个字典应用到另一个

> ID：12919204
> 
> 赞同：1
> 
> 时间：2012-10-16T16:24:12.867
> 
> 标签：python, dictionary

我对字典很陌生，所以这可能是一个相当基本的问题。

假设我有两个具有相似元素的不同字典。例子：

```
 Dictionary1 = {'Bob' : 1, 'Mary' : 2, 'Sue' : 3, 'George' : 4}
    Dictionary2 = {'Bob' : 1, 'Sue' : 2, 'Jill' : 3, 'Isaac' : 4, 'George' : 5} 
```

我希望能够取两个字典的交集并将第一个字典的索引应用于第二个字典。所以我想要一个看起来像这样的输出：

```
 DictionaryCombo = {'Bob' : 1, 'Sue' : 3, 'George' : 4} 
```

请原谅我对所需输出的格式设置，因为我不确定它应该是什么样子，尽管我知道我想要两个字典交集的键和值对。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T16:31:10.250

如果要对 d1 进行子集化，则它仅包含 d2 中存在的元素

```
d1 = {'Bob': 1, 'Mary': 2, 'Sue': 3, 'George': 4}
d2 = {'Bob': 101, 'Sue': 102, 'Jill': 103, 'Isaac': 104, 'George': 105}
{k: v for k, v in d1.items() if k in d2}
# {'Bob': 1, 'Sue': 3, 'George': 4} 
```

或者你提到*apply*，所以你想更新 d2 中的值吗？

```
d2.update(d1)
print d2
# {'Sue': 3, 'Mary': 2, 'Jill': 103, 'Isaac': 104, 'Bob': 1, 'George': 4} 
```

或者，如果你真的从两个列表开始（而不是从 dict 开始）：

```
el1 = ['Bob', 'Mary', 'Sue', 'George']
el2 = ['Bob', 'Sue', 'Jill', 'Isaac', 'George']
dict( (val, idx) for idx, val in enumerate(d1, start=1) if val in set(el2) )
#{'Bob': 1, 'Sue': 3, 'George': 4} 
```

如果您有两个列表，一个是键，一个是值，并且希望将它们设为`dict`，那么您可以使用`zip`：

```
keys = ['Bob', 'Mary', 'Sue', 'George']  
vals = [1, 2, 3, 4]
dict( zip(keys, vals) )
# {'Bob': 1, 'Mary': 2, 'Sue': 3, 'George': 4} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T16:52:47.700

`dict.viewkeys()`方法提供了一个类似集合的对象，可以轻松找到两个字典的公共键（交集）：

```
d1 = {'Bob' : 1, 'Mary' : 2, 'Sue' : 3, 'George' : 4}
d2 = {'Bob' : 1, 'Sue' : 2, 'Jill' : 3, 'Isaac' : 4, 'George' : 5}

common_keys = d1.viewkeys() & d2.viewkeys()
dict_with_d1_values = {k: d1[k] for k in common_keys}
# -> {'Bob': 1, 'George': 4, 'Sue': 3} 
```

或者，如果您实际上需要这两个值：

```
dict_with_combined_values = {k: (d1[k], d2[k]) for k in common_keys}
# -> {'Bob': (1, 1), 'George': (4, 5), 'Sue': (3, 2)} 
```

# ios5 - 如何在不不断更新的情况下将 MKMapView 集中在用户身上

> ID：12919209
> 
> 赞同：0
> 
> 时间：2012-10-16T16:24:32.177
> 
> 标签：ios5, center, mapkit

我一直在搞乱 mapkit，我有一个 MKMapView，我将它设置为显示使用位置。我想要做的是将地图集中在用户位置上，而不是不断地，而是一次（加载地图视图时）。我认为这是一个相当典型的用例，但我无法找到一个简单简洁的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:59:04.000

我使用了开发人员库中的 IOS Breadcrumb 示例代码，这是“BreadCrumbViewController.m”中的部分

```
- (void)locationManager:(CLLocationManager *)manager
didUpdateToLocation:(CLLocation *)newLocation
       fromLocation:(CLLocation *)oldLocation
{
if (newLocation)
{
    if ([self.toggleAudioButton isOn])
    {
        [self setSessionActiveWithMixing:YES]; // YES == duck if other audio is playing
        [self playSound];
    }

    // make sure the old and new coordinates are different
    if ((oldLocation.coordinate.latitude != newLocation.coordinate.latitude) &&
        (oldLocation.coordinate.longitude != newLocation.coordinate.longitude))
    {    
        if (!self.crumbs)
        {
            // This is the first time we're getting a location update, so create
            // the CrumbPath and add it to the map.
            //
            _crumbs = [[CrumbPath alloc] initWithCenterCoordinate:newLocation.coordinate];
            [self.map addOverlay:self.crumbs];

            // On the first location update only, zoom map to user location
            MKCoordinateRegion region = 
                MKCoordinateRegionMakeWithDistance(newLocation.coordinate, 2000, 2000);
            [self.map setRegion:region animated:YES];
        }
        else
        {
            // This is a subsequent location update.
            // If the crumbs MKOverlay model object determines that the current location has moved
            // far enough from the previous location, use the returned updateRect to redraw just
            // the changed area.
            //
            // note: iPhone 3G will locate you using the triangulation of the cell towers.
            // so you may experience spikes in location data (in small time intervals)
            // due to 3G tower triangulation.
            // 
            MKMapRect updateRect = [self.crumbs addCoordinate:newLocation.coordinate];

            if (!MKMapRectIsNull(updateRect))
            {
                // There is a non null update rect.
                // Compute the currently visible map zoom scale
                MKZoomScale currentZoomScale = (CGFloat)(self.map.bounds.size.width / self.map.visibleMapRect.size.width);
                // Find out the line width at this zoom scale and outset the updateRect by that amount
                CGFloat lineWidth = MKRoadWidthAtZoomScale(currentZoomScale);
                updateRect = MKMapRectInset(updateRect, -lineWidth, -lineWidth);
                // Ask the overlay view to update just the changed area.
                [self.crumbView setNeedsDisplayInMapRect:updateRect];
            }
        }
    }
} 
```

}

尝试并剖析这个，这里还有你可能喜欢的其他功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:40:52.127

```
@interface YourClass ()
@property (nonatomic, assign) BOOL didUpdateUserLocation;
@end

@implementation YourClass

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.didUpdateUserLocation = NO;

    self.mapView.delegate = self;
    self.mapView.showUserLocation = YES;
}

...

- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation
{
    if (!self.didUpdateUserLocation) {

        // Set necessary span
        MKCoordinateSpan newSpan = MKCoordinateSpanMake(10, 10);
        MKCoordinateRegion newRegion = MKCoordinateRegionMake(userLocation.coordinate, newSpan);
        [self.mapView setRegion:newRegion animated:NO];

        self.didUpdateUserLocation = YES;
    }    
}

@end 
```

# java - 在java中从字符串中解析一个简单的日期

> ID：12919224
> 
> 赞同：0
> 
> 时间：2012-10-16T16:25:25.687
> 
> 标签：java, regex, date, simpledateformat

在我的程序中，用户应该能够指定命名方案。他们指定的命名方案应包含简单的日期格式，例如“yyyyMMdd”、“MM-dd-yyyy”、“yyyy/MM/dd”等。我更喜欢日、月和年的顺序，而不是重要的但可能需要一定的顺序（比如先是年，然后是月，然后是日）。我希望能够轻松地从字符串中检索此日期，以便将其与 SimpleDateFormat 类一起使用。

这里有些例子：

```
input string:    "abc?>@dyyyy-MM-dd-|(s*&d)"
output string:   "yyyy-MM-dd"

input string:    "daddy-MM/dd/yyyy-moMMy"
output string:   "MM/dd/yyyy" 
```

最终我想要做的是替换（在用户提供的字符串中）用当前日期指定的日期格式。

如果我想修复它，以便用户只能输入年份，然后是月份，然后是日期，那么我可以执行以下操作：

```
String dateFormat = name.substring(name.indexOf("yyyy"), name.indexOf("dd") + 2) 
```

但这意味着用户不能在字符串的其余部分使用字符串序列“yyyy”和“dd”，否则此方法将不起作用。这个表达式也可以用正则表达式表示，但我不知道如何轻松地从字符串中提取与正则表达式匹配的子字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:35:54.847

使用正则表达式模式

```
(MM|dd|yyyy)[\\/-]?(?!\\1)(MM|dd|yyyy)[\\/-]?(?!\\1)(?!\\2)(MM|dd|yyyy) 
```

`[...]`您可能希望在上述模式的部分中添加一些您希望允许的其他分隔符。

# python - 如何在 matplotlib 中的子图之间共享辅助 y 轴

> ID：12919230
> 
> 赞同：38
> 
> 时间：2012-10-16T16:25:45.797
> 
> 标签：python, matplotlib

如果您有多个包含辅助 y 轴的子图（使用*twinx*创建），您如何在子图之间共享这些辅助 y 轴？我希望它们以自动方式平等缩放（因此不要在之后手动设置 y 限制）。对于主要的 y 轴，这可以通过在 subplot 的调用中使用关键字*sharey*来*实现*。

 *下面的示例显示了我的尝试，但它未能共享两个子图的辅助 y 轴。我正在使用 Matplotlib/Pylab：

```
ax = []

#create upper subplot
ax.append(subplot(211))
plot(rand(1) * rand(10),'r')

#create plot on secondary y-axis of upper subplot
ax.append(ax[0].twinx())
plot(10*rand(1) * rand(10),'b')

#create lower subplot and share y-axis with primary y-axis of upper subplot
ax.append(subplot(212, sharey = ax[0]))
plot(3*rand(1) * rand(10),'g')

#create plot on secondary y-axis of lower subplot
ax.append(ax[2].twinx())
#set twinxed axes as the current axes again,
#but now attempt to share the secondary y-axis
axes(ax[3], sharey = ax[1])
plot(10*rand(1) * rand(10),'y') 
```

这让我得到了类似的东西：

![次要 y 轴共享失败的两个子图示例](../Images/e8d4fc83bfccaebf86aaa29644da6e20.png)

我使用*axes()*函数设置共享 y 轴的原因是*twinx*不接受*sharey*关键字。

我在 Win7 x64 上使用 Python 3.2。Matplotlib 版本是 1.2.0rc2。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-16T22:49:52.273

你可以`Axes.get_shared_y_axes()`这样使用：

```
from numpy.random import rand
import matplotlib
matplotlib.use('gtkagg')
import matplotlib.pyplot as plt

# create all axes we need
ax0 = plt.subplot(211)
ax1 = ax0.twinx()
ax2 = plt.subplot(212)
ax3 = ax2.twinx()

# share the secondary axes
ax1.get_shared_y_axes().join(ax1, ax3)

ax0.plot(rand(1) * rand(10),'r')
ax1.plot(10*rand(1) * rand(10),'b')
ax2.plot(3*rand(1) * rand(10),'g')
ax3.plot(10*rand(1) * rand(10),'y')
plt.show() 
```

在这里，我们只是将辅助轴连接在一起。

希望有帮助。*

# java - 查找两个数组的交集

> ID：12919231
> 
> 赞同：9
> 
> 时间：2012-10-16T16:25:47.387
> 
> 标签：java, arrays, intersection

我的目标是找出数组 a 和 b 的交集值并将它们存储到一个新数组 c 中，因此打印输出将为：3,10,4,8。如何将给定值分配给第三个数组 c ？

```
 public static void main(String[] args) {
        int a[] = {3, 10, 4, 2, 8};
        int[] b = {10, 4, 12, 3, 23, 1, 8};
        int[] c;
        int i=0;
         for(int f=0;f<a.length;f++){
              for(int k=0;k<b.length;k++){
                    if(a[f]==b[k]){
 //here should be a line that stores equal values of 2 arrays(a,b) into array c
            }
          }
        }
            for (int x=0; x<c.length; x++){
             System.out.println(c[i]);
            }
       }
  } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T16:31:38.933

这应该是一个简单的方法。

```
int a[] = {3, 10, 4, 2, 8};
int[] b = {10, 4, 12, 3, 23, 1, 8};
List<Integer> aList =  Arrays.asList(a);
List<Integer> bList =  Arrays.asList(b);
aList.retainAll(bList);
System.out.println(" a intersection b "+aList);
int[] c = aList.toArray(new int[0]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:33:29.647

```
public static void main(String[] args) {
        int a[] = {3, 10, 4, 2, 8};
        int[] b = {10, 4, 12, 3, 23, 1, 8};
        int[] c = new int[(int)Math.min(a.length, b.length)];
        int i=0;
         for(int f=0;f<a.length;f++){
              for(int k=0;k<b.length;k++){
                    if(a[f]==b[k]){
                    c[i] = a[f];
                    i++;
            }
          }
        }
        for (int x=0; x<i; x++){
           System.out.println(c[x]);
        }
       }
  } 
```

希望能帮助到你。或者，如果您有时间复杂度问题，请尝试[Java Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:27:17.100

如果允许对 c 使用 ArrayList，则它的可增长数组

```
ArrayList c = new ArrayList();
.
.
.
.
.
c.add(a[f]); 
```

另外，如果允许对数组进行排序，我建议您对较小的数组进行排序，然后迭代较大的数组并在较小的数组中进行二进制搜索。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T16:46:39.203

您可以借助临时变量（但这基本上是在重新发明轮子，如果您不需要这样做的话） -

```
int[] c = new int[0];
//...
    if(a[f] == b[k]) { 
        int[] temp = c;
        c = new int[c.length + 1];
        for(int i=0; i<temp.length; i++) {
            c[i] = temp[i];
        }
        c[c.length - 1] = a[f];
    }
//... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T16:29:12.843

首先，您需要为数组分配空间：

```
int[] c = new int[SOME_SIZE]; 
```

困难的部分是弄清楚`SOME_SIZE`应该是多少。由于您正在计算交点，因此它最多可以是 和 中最小的`a`大小`b`。

最后，要在数组中分配一个元素，您只需执行

```
c[idx] = a[f] 
```

现在您需要跟踪`idx`去向。我建议`idx = 0`每次找到要添加的新元素时从`c`.

# php - Magento 购物车，包括随机产品

> ID：12919232
> 
> 赞同：4
> 
> 时间：2012-10-16T16:25:52.070
> 
> 标签：php, magento, session, e-commerce, magento-1.5

我们在 Magento 1.5 商店的购物车/购物篮中出现随机产品的问题。

它只发生在新的浏览器会话（FF/IE/Chrome）中。如果您浏览该网站，将一个项目添加到购物车/购物车，然后当您查看购物车/购物车时，购物车中有其他产品。

添加的产品不是追加销售或相关列表中的产品。它们不是可能已在以前的浏览器会话中添加的产品。

我们已经卸载了我们可以卸载的所有扩展。没有安装基于 IP 的扩展。

我们已将会话 Cookie 管理设置为仅使用 HTTP = 是。和 Lifetime 到 5400 - 与另一个很好的站点相同。

还尝试设置`REMOTE_ADDR`并`HTTP_USER_AGENT`设置为是。（现在设置回否）

它似乎不是基于主题的，因为当我们切换到现代主题时，它仍然会发生。

“数据库”正在存储会话，但是一旦发现问题，我们将其（通过 local.xml）更改为“文件”，以查看是否有影响 - 但事实并非如此。

在 PHP 配置中`session.save_path = tmp`，APC 缓存被禁用。

有没有人看到过这样的事情或提出任何进一步检查的建议？

# jquery - jquery 对话框出现在菜单顶部

> ID：12919233
> 
> 赞同：1
> 
> 时间：2012-10-16T16:25:52.217
> 
> 标签：jquery, menu, dialog, load, z-index

我有一个 jQuery 对话框，它在 document.ready 上加载，zIndex 为 800。在此页面上，我还有一个 zIndex 为 999 的菜单。但是，当我显示对话框然后使用菜单时，对话框出现在顶部菜单时，根据 z-index，它应该在它的下方。如果我在 window.load 事件中配置对话框，则菜单/对话框顺序是正确的。这对我来说没有意义，因为在配置对话框之前菜单内容已经加载到 DOM 中。有任何想法吗？谢谢。必须相信菜单是 9999。您可以在[http://qa.ncgov-2012.nc.gov/maps/#](http://qa.ncgov-2012.nc.gov/maps/#)上查看该页面。这是对话框的配置：

```
$('#lyrPanel').dialog({
    autoOpen: false,
    show: 'blind',
    hide: 'blind',
    title: '<span class="ui-icon ui-icon-custom" id="lyrsButton"></span> Map Options',
    height: 215,
    width: 240,
    minWidth: 195,
    minHeight: 150,
    maxWidth: 240,
    maxHeight: 215,
    closeOnEscape: true,
    zIndex: 800,
    stack: false,
    resizable: false,
    position: {
        of: $map,
        my: 'left top',
        at: 'left top',
        offset: '39'
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T16:48:55.330

尝试使用 jquery 堆叠元素，而不是让 z-indexes 失去控制。 [http://api.jqueryui.com/theming/stacking-elements/](http://api.jqueryui.com/theming/stacking-elements/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T16:27:26.017

zindex 仅适用于定位元素（绝对，相对）

# iphone - 切换 uitextfield 的输入视图

> ID：12919234
> 
> 赞同：16
> 
> 时间：2012-10-16T16:25:53.940
> 
> 标签：iphone, ios, ipad, uitextfield

我正在使用 textFieldDidBeginEditing 方法为我的文本字段制作自定义输入视图

```
textField.inputView =wView; 
```

有一个按钮，我想使用它来取回键盘而不是我的自定义输入视图。任何想法如何做到这一点。

如果没有其他办法，我想尝试将文本字段作为第一响应者并再次使其成为第一响应者。但这确实会使我的项目复杂化。我想知道有没有其他方法。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-16T17:23:59.350

事情发生了很大变化，因为我早在 2012 年就写了这个答案，@yoooriii 提到的推荐方法是：

```
myTextField.inputView = nil
myTextField.reloadInputViews() 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-04-24T20:53:25.727

改用这个：

```
-reloadInputViews (UIResponder) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-03-21T15:21:57.163

当 textField 已经是第一响应者（屏幕上的键盘）时，我可以切换回默认键盘的解决方案将他的 inputView 设置为 nil，而不是像这样调用 reloadInputViews：

```
textField.inputView = nil;
[textField reloadInputViews]; 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-27T12:35:56.830

您需要创建一个不为零的 inputView。正如[苹果帮助](https://developer.apple.com/documentation/uikit/uitextfield/1619620-inputview?language=objc)所说：

> 如果此属性中的值为 nil，则文本字段在成为第一响应者时显示标准系统键盘。将自定义视图分配给此属性会导致显示该视图。
> 
> 此属性的默认值为 nil。

要实现它：

创建一个像苹果这样的属性说：

```
@property(readwrite, strong) UIView *inputView; 
```

启动它：

```
self.inputView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 0, 0)]; 
```

将其分配给您的 textField 或 textView 的 inputView：

```
[textView setInputView:self.inputView]; 
```

重新加载所有输入视图：

```
[textView reloadInputViews]; 
```

你可以这样做`textViewDidBeginEditing`：

```
- (void)textViewDidBeginEditing:(UITextView *)textView {
      self.inputView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 0, 0)];
      [textView setInputView:self.inputView];
      [textView reloadInputViews];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-24T08:24:32.030

如果您在其中有一个工具栏的文本字段中使用 datePicker，请执行以下操作以取回您的输入视图。

斯威夫特 3、4、5：

```
 textField.inputView = nil
 textField.inputAccessoryView = nil
 textField.reloadInputViews() 
```

# perl - Bugzilla 4.2.2：向 enter_bug.cgi 调用添加附件参数

> ID：12919236
> 
> 赞同：2
> 
> 时间：2012-10-16T16:26:09.060
> 
> 标签：perl, cgi, bugzilla, mod-perl

在 Bugzilla 4.2.2 上，我可以为 bug 设置默认文本，调用如下：

[http://bugzilla.foo.com/enter_bug.cgi?product=foobar&short_desc=foobaz%20is%20broken](http://bugzilla.foo.com/enter_bug.cgi?product=foobar&short_desc=foobaz%20is%20broken)

但是我不确定要修改什么或传递什么参数来填充默认附件。API 文档包含有关已经存在的附件的信息，或者在提交错误后如何创建附件，但不是（比如说）用文件的内容填充文本块。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T17:12:45.620

bugzilla.mozilla.org 上的`enter_bug.cgi`表单包含一个名为的 textarea `attach_text`，它似乎可以满足您的需求。也许这样的事情会为你工作：

> [http://bugzilla.foo.com/enter_bug.cgi?product=foobar&short_desc=foobaz%20is%20broken&attach_text=this%20is%20the%20text%20of%20the%20attachment](http://bugzilla.foo.com/enter_bug.cgi?product=foobar&short_desc=foobaz%20is%20broken&attach_text=this%20is%20the%20text%20of%20the%20attachment)

YMMV，取决于您使用的 Bugzilla 版本，以及此参数是否支持库存 Bugzilla 或仅 Mozilla 安装。您还将受到用户代理和 HTTP 服务器对查询字符串长度的任何限制。

# c# - 是否可以在程序执行期间记录所有抛出的异常？

> ID：12919239
> 
> 赞同：2
> 
> 时间：2012-10-16T16:26:20.120
> 
> 标签：c#

我有 C# 应用程序。如果需要，我可以在调试模式下使用任何标志等编译它。

在某些时候它不能正常运行（显着减速，部分挂起等）

显然出了点问题。作为第一次尝试，我想查看在程序执行期间任何地方发生的所有异常的完整列表（捕获和未捕获）。是否可以？我知道 VS 中有一个选项可以让我在某些异常情况下“断点”。但我不想“断点”，而是想“记录”所有发生的异常，以便以后分析它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T16:30:06.193

如果您不确定哪里可能发生异常，请尝试在您的应用程序中使用**UnhandledException 。**

UnhandledException 事件处理从主 UI 线程抛出的未捕获异常。ThreadException 事件处理从非 UI 线程抛出的未捕获异常。

```
static void Main(string[] args)
{      
    AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);
    //... do something ...      
}

static void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)
{
      System.Diagnostics.Trace.WriteLine((e.ExceptionObject as Exception).Message, "Unhandled UI Exception");
      // here you can log the exception ...
} 
```

我[在 MSDN 上使用 Trace 类](http://msdn.microsoft.com/en-us/library/system.diagnostics.trace.aspx)进行日志记录：

```
System.Diagnostics.Trace 
```

这包括侦听您的`Trace()`方法的侦听器，然后写入日志文件/输出窗口/事件日志，框架中包含的侦听`DefaultTraceListener`器`TextWriterTraceListener`是`EventLogTraceListener`. 它允许您指定级别（警告、错误、信息）和类别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T16:33:25.953

坦率地说，您不应该为此使用异常。您需要“检测”应用程序以使用日期时间戳记录代码中的关键活动，以便在出现问题后，您可以查看按时间顺序排列的日志并查看代码失败的内容（和位置）做预期的事情，或者花费比应有的时间更长的时间。查看[Microsoft Logging Application](http://msdn.microsoft.com/en-us/library/ff647183.aspx) Block或[log4Net](http://logging.apache.org/log4net/)

一般而言，异常的正确使用应仅限于应用程序（或模块，或子例程/函数）无法成功完成其设计提供的任何功能的情况。异常也应该被记录下来，但是异常不应该被用来跟踪除了严重故障之外的任何事情。如果代码无法从故障中恢复，在大多数情况下，它应该只是导致应用程序停止。

事实上，大多数情况下，当出现问题并引发异常时（除了最琐碎的问题），在引发异常时可用的信息只是诊断问题的第一步。在此之前的代码执行路径中发生的事情往往是真正的问题所在......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:42:54.650

要回答所提出的问题，您可能需要（至少部分地）创建自己的调试器，该调试器将附加到您的进程并记录所有未处理和已处理的异常。[这可能是您想要开始的地方](http://www.microsoft.com/en-us/download/details.aspx?id=19621)。另外，这里是调试接口的[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms404484.aspx)。

当您转到 Debug -> Exceptions 并选中该框以在引发异常时中断时，这应该可以让您完全执行 Visual Studio 所做的事情。唯一的区别是，您应该能够记录有关引发异常的位置的信息，而不是停止执行（我认为是异常的类型）。您会注意到的第一件事是，这非常复杂。希望 mdbg 示例足够接近您的需要，您可以稍微调整一下。

我还将否认这可能不是解决您要解决的潜在问题的最佳方法。如果您的程序中有未处理的异常，您可能不需要任何额外的帮助来查找它们。除非代码执行以下操作，否则它们应该浮出水面：

```
try
{
    . . . Some operation
}
catch(Exception){ } //Muddle on through - Very Bad!!! 
```

如果问题是处理的异常没有得到正确处理，那么上述方法也无法帮助您缩小问题范围

# dynamics-crm - 无法在列集中为检索指定子属性

> ID：12919240
> 
> 赞同：3
> 
> 时间：2012-10-16T16:26:28.000
> 
> 标签：dynamics-crm, dynamics-crm-2011

在尝试合并 Microsoft CRM 中的联系人时，我使用以下代码 -

```
//c1ID and c2ID are GUIDs of duplicated contacts.

EntityReference target = new EntityReference();
target.LogicalName = Contact.EntityLogicalName;

target.Id = c2ID;

MergeRequest merge = new MergeRequest();
// SubordinateId is the GUID of the account merging.

merge.SubordinateId = c1ID;
merge.Target = target;
merge.PerformParentingChecks = true;

Contact updater = new Contact();
Contact updater2 = new Contact();

updater = (Contact)xrmSvc.ContactSet.Where(c => c.ContactId.Equals(c1ID)).First();
updater2 = (Contact)xrmSvc.ContactSet.Where(c => c.ContactId.Equals(c2ID)).First();

MergeResponse mergedR = (MergeResponse)xrmSvc.Execute(merge); 
```

当我在这里尝试执行调用时，出现此错误-

> 无法在列集中为检索指定子属性。属性：所有者名称。

我没有正确设置一些东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-10T14:33:53.087

拥有`updatecontent`并不能改变问题。事实上，我在输入到`updatecontent`. 我发现您必须构建新的实体引用：

```
 if (match.Contains("new_mostrecentcampaign")) 
    master["new_mostrecentcampaign"] = 
        new EntityReference(match.GetAttributeValue<EntityReference>("new_mostrecentcampaign").LogicalName
                          , match.GetAttributeValue<EntityReference>("new_mostrecentcampaign").Id);
...
   Merge.UpdateContent = master
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-02-17T18:34:46.907

我意识到这是一个相当古老的问题，但对于那些在 2021 年及以后遇到同样问题的人来说，这就是发生此错误的原因。

**TL;DR**：确保属性的`EntityReference`值不指定`Name`属性。

**解释：**

添加到实体集的所有内容都`UpdateContent`将应用于`Target`联系人。`MergeRequest`在插件/工作流程中以编程方式执行 a 时，将`UpdateContent`应用 get 的属性（根据需要）。

这分解的地方是`EntityReference`值类型（查找）。执行此操作的内部 Microsoft 代码尝试解释`EntityReference`对象的所有属性，包括`Name`.

因此，当使用（动态获取最新版本）从`SubordinateId`联系人中提取现有值时，会自动为这些查找属性（子记录）设置属性。此操作无效，即使它不是直接执行它的用户代码。`IOrganizationService.Retrieve``Name`

这给我们带来了完整的循环来解释原始错误：

> 无法在列集中为检索指定子属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T18:03:22.827

我希望我对此有一些文档，但是尽管[官方文档](http://msdn.microsoft.com/en-us/library/microsoft.crm.sdk.messages.mergerequest_members.aspx "合并请求成员")指出这`UpdateContent`是可选的，但经验证明它实际上是必要的。在`MergeRequest`我测试过的 s 中，我总是在请求中包含该属性，并且在 Dynamics 3.0[的 MSDN 论坛](http://social.msdn.microsoft.com/Forums/da-DK/isv/thread/f4cef39d-f3ed-491b-9927-45cb9fd01907 "CRM 3.0 SDK 联系人合并")中有一个帖子建议相同。

事实上，当我尝试在*没有* `UpdateContent`分配的情况下合并组织中的两个联系人时，我实际上得到`FaultException`以下说法：

> 缺少必填字段“UpdateContent”

即使文档说它是可选的！

所以我建议`UpdateContent`用下面的内容填充属性，看看是否有效：

```
var merge = new MergeRequest
{
    // SubordinateId is the GUID of the account merging.

    SubordinateId = c1ID,
    Target = target,
    PerformParentingChecks = true,
    UpdateContent = new Contact()
}; 
```

# ajax - 在 CodeIgniter 中插入表单的模式中的 AJAX

> ID：12919241
> 
> 赞同：2
> 
> 时间：2012-10-16T16:26:32.520
> 
> 标签：ajax, codeigniter, modal-dialog

已经为此苦苦挣扎了大约 4 个小时，我试图有一个模式下拉（Twitter 引导模式），其中包含一个创建公司的表单。这是在 CodeIgniter 中构建的。

我遇到了输入类型 =“提交”和输入类型 =“按钮”的问题。

我只有 1 个必填字段，即公司名称。如果我使用 input type="button"，验证将在模态框内正确触发，但表单只会插入公司名称，以及 company_id、user_id、active 和 cdate。

现在，如果我使用 input type="submit"，所有数据都可以正常插入。但是，验证中断，单击“创建公司”后出现“找不到页面”，但数据仍在插入。

有任何想法吗？谢谢！AJAX 新手...

我的 AJAX 功能：

```
 $(document).ready(function(){

  $('#create_btn').live('click', function(){
      //we'll want to move to page specific files later

    var name = $('#name').val();

    $.ajax({
        url: CI_ROOT + "members/proposals/add_client",
        type: 'post',
        data: {'name': name },
        complete: function(r){
          var response_obj = jQuery.parseJSON(r.responseText);

          if (response_obj.status == 'SUCCESS')
          {
              window.location = CI_ROOT + response_obj.data.redirect;
          }
          else
          {       
            $('#error_message2').html(response_obj.data.err_msg);
          }
        },
    });     

  });

}); 
```

我处理插入的控制器功能：

```
 function add_client()
{

    $this->form_validation->set_rules('name', 'Company Name', 'trim|required|xss_clean');

    load_model('client_model', 'clients');
    load_model('industry_model');

    $user_id = get_user_id();
    $company_id = get_company_id();

    if (!$user_id || !$company_id) redirect('home');

    if ($_POST)
    {

        if ($this->form_validation->run() == TRUE)
        { 

        $fields = $this->input->post(null , TRUE);

        $fields['user_id'] = $user_id;
        $fields['company_id'] = $company_id;
        $fields['active'] = 1;
        $fields['cdate'] = time();

        $insert = $this->clients->insert($fields);

            if ($insert)
            {
                $this->message->set('alert alert-success', '<h4>Company has been added</h4>');
                header('location:'.$_SERVER['HTTP_REFERER']);
            }
            else
            {
                $this->message->set('alert alert-error', '<h4>There was an issue adding this Company, please try again</h4>');
            }                   

        }

        else
        {  
            $err_msg =  validation_errors('<div class="alert alert-error">', '</div>'); 
            $retval = array('err_msg'=>$err_msg);
            $this->ajax_output($retval, false);
        }

    }

    $this->data['industries'] = array(0=>'Select Industry...') + $this->industry_model->dropdown('industry');   

    $this->insertMethodJS();
    $this->template->write_view('content',$this->base_path.'/'.build_view_path(__METHOD__), $this->data);           
    $this->template->render();
} 
```

最后，我的观点：

```
 <div class="modal hide fade" id="milestone" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="width: 600px !important;">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel">Add a Company</h3>
  </div>

  <div class="modal-body">

    <?php echo form_open_multipart(base_url().'members/proposals/add_client', array('class' => '', 'id' => 'client_form'));?>   

    <div id="error_message2"></div> 

    <div class="row-fluid">
        <div class="span5">

            <input type="hidden" name="cdate" id="cdate" value="" />

            <div class="control-group">
            <label class="control-label">Company Name: <span style="color: red;">*</span></label>
                <div class="controls">
                    <input type="text" id="name" name="name" value=""/>
                </div>
            </div>  

            <div class="control-group">
            <label class="control-label">Company Abbreviation:<span style="color: red;">*</span></label>
                <div class="controls">
                    <input type="text" id="abbreviation" name="abbreviation" value=""/>
                </div>
            </div>      

            <div class="control-group">
            <label class="control-label">Company Image: </label>
                <div class="controls">
                        <input type="file" name="client_image" size="20" /> 
                </div>
            </div>

            </div>  

            <div class="span5">

            <div class="control-group">
            <label class="control-label">Website:</label>
                <div class="controls">
                    <input type="text" id="website" name="website" value=""/> 
                </div>
            </div>  

       </div>

    </div>  

<div class="row-fluid">
    <div class="span5" style="margin-top: 25px;">

    <div class="control-group">
            <div class="controls">
                <p><strong>Client</strong></p>
            </div>
    </div>  

    <div class="control-group">
        <label class="control-label">Address 1:</label>
            <div class="controls">
                <input type="text" id="address1" name="address1" value=""/>
            </div>
    </div>  

    <div class="control-group">
        <label class="control-label">Address 2:</label>
            <div class="controls">
                <input type="text" id="address2" name="address2" value=""/>
            </div>
    </div>      

    <div class="control-group">
        <label class="control-label">City:</label>
            <div class="controls">
                <input type="text" name="city" id="city"  value=""/>
            </div>
    </div>  

    <div class="control-group">
        <label class="control-label">State:</label>
            <div class="controls">
                <?= form_dropdown('state', usa_state_list(), set_value('state'), 'id=state');  ?>     
            </div>
    </div>  

    <div class="control-group">
        <label class="control-label">Zip:</label>
            <div class="controls">
                <input type="text" id="zip" name="zip" value=""/>
            </div>
    </div>  

    <div class="control-group">
        <label class="control-label">Country:</label>
            <div class="controls">
                <?= form_dropdown('country', country_list(), set_value('country'), 'id=country');  ?>    
            </div>
    </div>

  </div>
</div>
</div>

  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button type="submit" class="btn btn-primary" id="create_btn">Create Company</button>
  </div>
 </form> 
</div> 
```

所以再次总结一下。使用 input type="button"，我的验证在模态中效果很好，只有公司名称与 company_id、user_id、active 和 cdate 一起插入到数据库中。

现在，使用 input type="submit"，所有数据都可以很好地插入，但是验证失败并且我重定向到找不到页面。

再次，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:54:34.303

问题在于您的 ajax 函数调用。

您需要防止表单触发（并因此通过 post 提交到正在运行的 url）：

改变：

```
$('#create_btn').live('click', function(){ 
```

到：

```
$('#create_btn').live('click', function(e){
    e.preventDefault(); 
```

这**应该可以**解决问题。如果没有，请告诉我，我会做更多的挖掘工作。我还建议您切换`live`到`on`，这样您就可以适应未来。`on`在单个函数中以更高的效率处理与 live、bind 等相同的内容。

编辑：解释发生了什么（以及为什么必须使用`e.preventDefault();`），这是因为`<input type="submit">`实际上会将表单提交到`<form>`标记`action`属性中指定的 url。因此，您的代码发生的情况是，您的 javascript 在您单击按钮后立即运行，然后本机浏览器提交事件随即发生。

# c# - 在javascript中添加一个确定和取消按钮

> ID：12919245
> 
> 赞同：0
> 
> 时间：2012-10-16T16:26:50.173
> 
> 标签：c#, javascript, jquery, alert

```
 $(document).ready(function () {
        $('.abc').click(function () {
            var status = $("#<%=ddlstatus.ClientID%>").val;
            if (status == "Prepared") {
                var _Action = confirm('Do you really want to cancel this payment ? All pending money will be available in the retention account of the contractor ');
                if (_Action) {
                    $.blockUI({ css: {
                        border: 'none',
                        padding: '15px',
                        backgroundColor: '#000',
                        '-webkit-border-radius': '10px',
                        '-moz-border-radius': '10px',
                        opacity: .5,
                        color: '#fff'
                    }
                    });
                    return true;
                }
                else {
                    return false;
                }

            }

        });
    }); 
```

当我运行这个 javascript 时，我得到了 OK 按钮，但我也想添加一个取消按钮。另外我是从后面的 c# 代码中调用它的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:33:34.817

您可以尝试使用[jQuery UI 对话框](http://jqueryui.com/dialog/)：

```
<div id="dialog" title="Confirmation Required">
  Do you really want to cancel this payment? All pending money will be available in the retention account of the contractor. 
</div>

<script type="text/javascript">
  $(document).ready(function() {
    $("#dialog").dialog({
      autoOpen: false,
      modal: true
    });
  });

  $(".abc").click(function(e) {
    e.preventDefault();
    var targetUrl = $(this).attr("href");
    var status = $("#<%=ddlstatus.ClientID%>").val();

    $("#dialog").dialog({
      buttons : {
        "Ok" : function() {              
         if (status == "Prepared") {
            $.blockUI({ css: {
                    border: 'none',
                    padding: '15px',
                    backgroundColor: '#000',
                    '-webkit-border-radius': '10px',
                    '-moz-border-radius': '10px',
                    opacity: .5,
                    color: '#fff'
                    }
                }); 
          }
          window.location.href = targetUrl;
        },
        "Cancel" : function() {
          $(this).dialog("close");
        }
      }
    });

    $("#dialog").dialog("open");
  });
</script> 
```

**演示**：http: [//jsfiddle.net/rCVrc/](http://jsfiddle.net/rCVrc/)

***编辑***：

[在这里](https://stackoverflow.com/a/3734326/122005)引用尼克的回答，您可以使用该[`ScriptManager.RegisterStartupScript()`](http://msdn.microsoft.com/en-us/library/bb310408.aspx)方法，如下所示：

```
ScriptManager.RegisterStartupScript(this, GetType(), "modalscript",
    "$(function() { $('#dialog').dialog({
      buttons : {
        'Ok' : function() {              
         if (status == 'Prepared') {
            $.blockUI({ css: {
                    border: 'none',
                    padding: '15px',
                    backgroundColor: '#000',
                    '-webkit-border-radius': '10px',
                    '-moz-border-radius': '10px',
                    opacity: .5,
                    color: '#fff'
                    }
                }); 
          }
          window.location.href = targetUrl;
        },
        'Cancel' : function() {
          $(this).dialog('close');
        }
      }
    }); });", true); 
```

“如果您不使用 ScriptManager/UpdatePanels，请使用等效[`ClientScriptManager`](http://msdn.microsoft.com/en-us/library/z9h4dk8y.aspx)版本。

重要的是要记住将代码包装在 document.ready 处理程序中（IE 没有它会出现大多数问题），因此您的元素（在我的示例中，`id="dialog"`）在 DOM 中并准备就绪。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:37:10.937

`confirm()`应该做的伎俩。检查此链接。[http://www.w3schools.com/js/tryit.asp?filename=tryjs_confirm](http://www.w3schools.com/js/tryit.asp?filename=tryjs_confirm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:34:04.217

这是一个很长的镜头，但 using`window.confirm()`有任何改进`confirm()`吗？

# ajax - Tastypie -- 如何让 obj_create 将新创建的实体发回？

> ID：12919248
> 
> 赞同：2
> 
> 时间：2012-10-16T16:27:04.643
> 
> 标签：ajax, django, tastypie

我发送了一个 POST，它创建了一个新的简单`Resource`（不是 ModelResource），并且有效。

我的问题是如何将创建的资源`bundle`属性返回到 ajax 响应？

这是资源示例：

```
class MyResource(Resource):
    x = fields.CharField(attribute='x')
    y = fields.CharField(attribute='y')

    class Meta:
        resource_name = 'myresource'
        object_class = XYObject
        authorization   = Authorization()

    def obj_create(self, bundle, request=None, **kwargs):
        x = bundle.data["x"]
        x = bundle.data["y"]
        bundle.obj = XYObject(x, y)
        return bundle 
```

这是 POST 请求

```
$.ajax({
               type: "POST",
               url: '/api/v1/myresource/',
               contentType: 'application/json',
               data: data,
               dataType: 'json',
               processData: false,
               success: function(response)
               {
                //get my resource here
               },
               error: function(response){
                   $("#messages").show('error');
                 }
               }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T17:15:29.070

您可以添加`always_return_data = True`到您的 Meta。然后，您将获得一个`202`带有序列化数据的而不是正常的`201`.

来自[https://stackoverflow.com/a/10138745/931277](https://stackoverflow.com/a/10138745/931277)

以下是文档：[http ://django-tastypie.readthedocs.org/en/latest/resources.html#always-return-data](http://django-tastypie.readthedocs.org/en/latest/resources.html#always-return-data)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T22:10:38.343

事实上，我不会通过这个来保存数据`Resource`，它是一个基于 ajax 的业务逻辑资源，应该应用一些控件，

我更喜欢提出一个`ImmediateHttpResponse`，这样我就可以像这样指定 HttpResponse 类型：

```
def obj_create(self, bundle, request=None, **kwargs):
    bundle.data['results'] = bundle.obj.check(request)
    if bundle.data['results']['valid']:
         raise ImmediateHttpResponse(self.create_response(request, bundle,response_class = HttpCreated))
    raise ImmediateHttpResponse(self.create_response(request,  bundle.data['results']['message'],response_class = HttpBadRequest)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:52:40.603

Tastypie 使用`post_list`(1) 方法。该方法调用您的`obj_create`方法。然后它返回一个`201 Created`HTTP 响应，并设置 Location 标头。因此，长话短说，您应该检查 API 调用返回的标头并检查 `Location`标头。

**编辑：**

一些代码很有用：

```
...
success: function(data, textStatus, jqXHR)
    {
    // You must look for Location
    console.log(jqXHR.getAllResponseHeaders());
    },
... 
```

(1) [https://github.com/toastdriven/django-tastypie/blob/master/tastypie/resources.py#L1244](https://github.com/toastdriven/django-tastypie/blob/master/tastypie/resources.py#L1244)

# asp.net - 在多对多关系表中插入和删除值

> ID：12919250
> 
> 赞同：0
> 
> 时间：2012-10-16T16:27:11.213
> 
> 标签：asp.net, linq, entity-framework

我想将值插入到我正在使用实体框架和 linq 的多对多关系表中。我想建立插入查询（.net Framework 4）

以下是表格

菜单 - menu_id、menu_name、menu_desc

迎合 - cater_id、cater_name、enable_ind

关系表 Menu_Cater - menu_id、cater_id

如果有实现此插入和删除的简单方法，我尝试过几种情况似乎不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T22:43:46.577

我不知道，如果你现在需要它，但我会告诉你怎么做。如果我没听错的话，你的意思就是那样。

```
public ActionResult Create(Cater cater, int menuId)
{
    //Find menu with our menu_id
    Menu menu = db.Menus.Where(m => m.menu_id == menuId).FirstOrDefault();

    //Add cater for this Menu
    menu.Cater.Add(cater);
    db.SaveChanges();

    return somethere...
}

public ActionResult Remove(int caterId, int menuId)
{
 //Choose menu, from him we will delete cater which we need 
 Menu menu = db.Menus.Where(m => m.menu_id == menuId).FirstOrDefault();

 //Find cater which we want delete from this Menu
 Cater cater = menu.Cater.Where(c => c.cater_id == caterId).FirstOrDefault();

 //Remove him from Table Menu_Cater
 menu.Cater.Remove(cater);
 db.SaveChanges();

 return somethere...
} 
```

就这样。它对 MVC4 的工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:55:41.537

假设您有`Menu`and`Cater`对象（来自下拉列表或但是），只需：

1.  创建`Menu_Cater`记录
2.  将其设置为在提交时插入
3.  提交更改

如下所示：

**VB.NET**

```
Dim menu As Menu = GetSelectedMenu() ' However you get the Menu record
Dim cater As Cater = GetSelectedCater() ' However you get the Cater record

Dim relationship = New Menu_Cater()
' EITHER:
relationship.menu_id = menu.menu_id
relationship.cater_id = cater.cater_id
' OR:
' relationship.menu = menu
' relationship.cater = cater

Using db = new MyDataContext
    db.Menu_Cater.InsertOnSubmit( relationship )
    db.SubmitChanges()
End Using 
```

**C＃**

```
Menu menu = GetSelectedMenu(); // However you get the Menu record
Cater cater = GetSelectedCater(); // However you get the Cater record

Menu_Cater relationship = new Menu_Cater();
// EITHER:
relationship.menu_id = menu.menu_id;
relationship.cater_id = cater.cater_id;
// OR:
// relationship.menu = menu
// relationship.cater = cater

using (db = new MyDataContext()) {
    db.Menu_Cater.InsertOnSubmit(relationship);
    db.SubmitChanges();
} 
```

可能需要对您的变量/数据库字段名称进行小的更改。也许`db.Save()`不是`db.SubmitChanges()`取决于数据上下文的类型。

# ios - UIToolbar 旋转/动画

> ID：12919254
> 
> 赞同：0
> 
> 时间：2012-10-16T16:27:18.550
> 
> 标签：ios, uiview, rotation, uiinterfaceorientation

我有一个用于 iPad 应用程序的 UIToolbar，它旨在针对所有方向保持在屏幕顶部。但是，我的 UIToolbar 所属的 UIView 不会旋转。UIToolbar 确实旋转，但我无法让旋转按我想要的方式工作......

我不知道如何在不拉伸工具栏的内容（设置比例转换）或不弄乱转换（设置框架或边界）的情况下更改工具栏的大小。

```
- (void)updateOrientation:(UIInterfaceOrientation)orientation animated:(BOOL)animated
{   
    CGAffineTransform toolbarTransform;
    switch(orientation) {
        case UIDeviceOrientationPortrait:
            toolbarTransform = CGAffineTransformIdentity;
            break;

        case UIDeviceOrientationLandscapeRight:
        toolbarTransform = CGAffineTransformMakeTranslation(-768 / 2 + 44 / 2, 768 / 2 - 44 / 2 + 1024 - 768);
        toolbarTransform = CGAffineTransformRotate(toolbarTransform, degreesToRadian(-90));

        break;

        case UIDeviceOrientationLandscapeLeft:
        toolbarTransform = CGAffineTransformMakeTranslation(768 / 2 - 44 / 2, 768 / 2 - 44 / 2);
        toolbarTransform = CGAffineTransformRotate(toolbarTransform, degreesToRadian(90));

        break;

        case UIDeviceOrientationPortraitUpsideDown:
            toolbarTransform = CGAffineTransformMakeTranslation(0, 1024 - 44);
            toolbarTransform = CGAffineTransformRotate(toolbarTransform, degreesToRadian(180));
            break;

        default:
            toolbarTransform = CGAffineTransformIdentity;
            break;
    }

    if(animated)
    {
        [UIView animateWithDuration:.5 animations:^
        {
            self.toolbar.transform = toolbarTransform;
        }];
    }
    else
    {
        self.toolbar.transform = toolbarTransform;
    }
} 
```

此代码主要按我想要的方式定位工具栏，但是我应该如何调整工具栏的大小而不弄乱转换或拉伸工具栏的内容？或者，也许我完全接近这个错误？

编辑：稍微更新了我的代码。定位是正确的，只需要以某种方式调整它们的大小......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:42:52.253

The solution to this issue was to create a special UIView (called rotationView) and performing all rotation/translations to that UIView instead of directly to the UIToolbar. Then, I can change the `toolbar.frame` safely without "messing up" the transformations.

# pyephem - 下一个设置不是明天

> ID：12919256
> 
> 赞同：2
> 
> 时间：2012-10-16T16:27:25.050
> 
> 标签：pyephem

试图计算太阳下一次落山的时间，我得到了明天的值 - 但我正在计算太阳肯定在地平线之上！

m 是我的观察点；这就是我在终端上得到的：

```
>>> ephem.now()
2012/10/16 16:02:00
>>> print m.next_setting(ephem.Sun(), use_center=True)
2012/10/17 16:38:36 
```

那是明天的时间。还：

```
>>> m.previous_setting(ephem.Sun()) < ephem.now()
False
>>> m.previous_setting(ephem.Sun())
2012/10/16 16:42:14 
```

所以 previous_setting 是在未来。

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:06:12.960

`next_setting()`和`previous_setting()`函数**不**参考的当前值`ephem.now()`。相反，他们寻找对象之前或之后的日期`.date`——因此，如果观察者以某种方式被设置为未来的某一天，`Observer`那么你得到的结果只会发生在我自己在笔记本电脑上的实验中。`.date`如果我完全使用您提供的日期和时间，以下是我得到的设置时间：

```
import ephem
m = ephem.Observer()
m.long = '7:42:00'
m.lat = '45:04:00'
m.date = '2012/10/16 16:02:00'

print m.next_setting(ephem.Sun(), use_center=True)
# --> 2012/10/16 16:40:27

print m.previous_setting(ephem.Sun())
# --> 2012/10/15 16:44:05 
```

您可以尝试运行此脚本并查看结果吗？当前`ephem.__version__`在我的笔记本电脑上显示的是 3.7.5.1，以防万一我们之间存在差异。

所以：如果你看到这样奇怪的结果，那么`ephem.now()`你需要调查观察者的`.date`属性和你得到的日落时间之间的关系，而不是打印和比较日落时间的值。如果您可以生成一个像我上面展示的那样的小示例脚本，它会设置自己的时间，而不是依赖于`now()`显示 PyEphem 正在犯的错误（因为当我看到您的问题时，我`now()`的显然与你原来的“现在”！），然后我会尽力追查问题。

# r - R中的函数“sample”，这两个代码片段是否等效？

> ID：12919260
> 
> 赞同：1
> 
> 时间：2012-10-16T16:27:46.757
> 
> 标签：r, statistics, simulation

这两个代码片段是否等效，即它们是否在做同样的事情？

据我所知，`sample`他们应该做同样的事情，即`s1`两者`s2`都是`x`.

第一个片段：

```
sz <- 5
x <- 1:10
s1 <- sample(x,size=sz,replace=F) 
```

第二个片段：

```
sz <- 5
x <- 1:10
s2 <- c()
idx <- sample(1:length(x),size=sz,replace=F)
for ( i in idx ) {
    s2 <- c(s2,x[i])
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T16:29:23.630

是的。

```
> sz <- 5
> x <- 1:10
> set.seed(21); s1 <- sample(x,size=sz,replace=F)
> sz <- 5
> x <- 1:10
> s2 <- c()
> set.seed(21); idx <- sample(1:length(x),size=sz,replace=F)
> for ( i in idx ) {
+     s2 <- c(s2,x[i])
+ }
> identical(s1,s2)
[1] TRUE 
```

# windows - sublime text 2 控制台仅显示第一行 gruntjs 输出

> ID：12919261
> 
> 赞同：5
> 
> 时间：2012-10-16T16:27:49.663
> 
> 标签：windows, build, console, sublimetext2, gruntjs

在 Windows 上以 sublime text 2 运行 grunt 时，似乎认为它只显示第一行输出。奇怪的是，所有任务都完成了。添加`"shell": true`or`false`似乎没有任何效果。添加`cmd /c`甚至`start /wait /b`.

如何阻止 sublime text 吃掉其余的输出？

```
// grunt.sublime-build
{
    "cmd": ["grunt.cmd", "--no-color", "--verbose"],
    "working_dir": "${project_path:${folder}}",
    "selector": ["source.js", "source.less", "source.json", "source.ts"],
    "shell": true
} 
```

我得到的唯一输出是：

```
Initializing
[Finished in 1.6s] 
```

**更新** 这似乎与 Sublime Text 2 issue 23: [Windows Build Panel Eats Stdout](https://github.com/uipoet/sublime-jshint/issues/23)有关。

**更新** 有一个解决方法，但它很难看。

```
// grunt.sublime-build
{
    "cmd": ["grunt.cmd", "--no-color", ">", "c:\\temp\\st2.txt", "&&", "type", "c:\\temp\\st2.txt"],
    "working_dir": "${project_path:${folder}}",
    "selector": ["source.js", "source.less", "source.json", "source.ts"]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T11:37:42.127

我在使用 Sublime Text 时遇到了同样的问题，但是为我从事的每个项目创建一个新的构建命令感觉很尴尬。所以当我找到并安装插件[Grunt](https://github.com/tvooo/sublime-grunt/)时我很高兴。

它不适用于我一开始工作的所有不同平台。所以在我知道之前，我是那个项目的贡献者之一。它基本上为您提供了命令中的所有`Gruntfile`命令`CTRL + SHIFT + P - Grunt`，所有繁琐的任务都在您的指尖。我们在最新版本中失去了基于咖啡脚本的`Gruntfile`支持，但我确信它很快就会恢复。

[这是一个已注册的插件，因此您可以使用Package Control](https://sublime.wbond.net/)安装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:52:32.560

我整理了一个稍微简单的构建脚本，它将在当前目录中写入和删除临时文件：

```
{
    "cmd": ["grunt --no-color > grunt.status & type grunt.status && del grunt.status"],
    "working_dir": "${project_path}/assets/js/src",
    "shell": true
} 
```

来源：[https ://gist.github.com/3951895](https://gist.github.com/3951895)

# uiview - UIView 在横向模式下的缩放效果

> ID：12919263
> 
> 赞同：0
> 
> 时间：2012-10-16T16:27:52.720
> 
> 标签：uiview, core-animation, zooming, landscape-portrait

我的应用程序有一个显示图表的子视图。我想做的是重新创建缩放效果（类似于 iPhone Stocks 应用程序），一旦我倾斜设备，它将放大图形视图直到在横向模式下填满整个屏幕。

确切地说，我想旋转子视图，然后在全屏发送它（这将是一个加号）其他视图淡出。

有什么建议么？

# android - 从上到下 - 翻译动画

> ID：12919264
> 
> 赞同：5
> 
> 时间：2012-10-16T16:27:52.693
> 
> 标签：android, animation, translate-animation

需要制作下一个动画（在android 2.2及以上）：

1.从上到下移动按钮（点击他后），

2.从下往上移动（再次点击他后）。

第一个动画效果很好，但第二个动画效果不好，btn 从下到上“跳跃”而不是动画。

代码：

```
public class MainActivity extends Activity {

static RelativeLayout relativeLayout;
static Button btn;
static Boolean isUp = true;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    btn = (Button) findViewById(R.id.button1);
    relativeLayout = (RelativeLayout) findViewById(R.id.relative_layout);

    btn.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            if(isUp){
                isUp = false;
                v.startAnimation(MainActivity.getVerticalSlideAnimation(0,relativeLayout.getBottom() - v.getHeight(),500,0));
            }else{
                isUp = true;
                v.startAnimation(MainActivity.getVerticalSlideAnimation(relativeLayout.getBottom() - v.getHeight(),0,500,0));
            }
        }
    });
}

public static Animation getVerticalSlideAnimation(int fromYPosition, final int toYPosition, int duration, int startOffset)
{
  TranslateAnimation translateAnimation = new TranslateAnimation(1, 0.0F, 1, 0.0F, 0, fromYPosition, 0, toYPosition);
  translateAnimation.setDuration(duration);
  translateAnimation.setInterpolator(new AccelerateInterpolator());
  translateAnimation.setStartOffset(startOffset);

  //Stop animation after finishing.
  //translateAnimation.setFillAfter(true);

  translateAnimation.setAnimationListener(new AnimationListener() 
  {
    public void onAnimationStart(Animation animation) { }
    public void onAnimationRepeat(Animation animation) { }
    public void onAnimationEnd(Animation animation) {
        btn.setY(toYPosition);          
    }
  });

  return translateAnimation;
    }
} 
```

布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/relative_layout"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:text="Button" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T09:28:57.203

好的，我解决了。

关于动画，你应该知道的几个问题：

1.  动画参数并不像您想象的那样简单“从（固定位置）”->“到（固定位置）”。还有更多类似“从（当前位置/0）”->“要执行多少步以及在哪个方向上（加号表示正数/减号表示负数）”

2.  动画不会改变视图在屏幕上的真实位置，因此如果你想在结束位置停止动画，你应该使用：

    ```
    animation.setFillAfter(true); 
    ```

3.  如果您确实想更改视图的真实位置，您应该更新“onAnimationEnd”上的视图参数（如下面的代码），或者手动计算位置并设置 Y/X 位置（再次在“onAnimationEnd”上），例如：

    ```
    animatedView.setY(stopPosition); 
    ```

编码：

```
 public class AnimationActivity extends Activity {

    private boolean isUp;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ((Button) findViewById(R.id.button1))
            .setOnClickListener(new OnClickListener() {

                public void onClick(final View v) {

                    final float direction = (isUp) ? -1 : 1;
                    final float yDelta = getScreenHeight() - (2 * v.getHeight());
                    final int layoutTopOrBottomRule = (isUp) ? RelativeLayout.ALIGN_PARENT_TOP : RelativeLayout.ALIGN_PARENT_BOTTOM;

                    final Animation animation = new TranslateAnimation(0,0,0, yDelta * direction);

                    animation.setDuration(500);

                    animation.setAnimationListener(new AnimationListener() {

                        public void onAnimationStart(Animation animation) {
                        }

                        public void onAnimationRepeat(Animation animation) {
                        }

                        public void onAnimationEnd(Animation animation) {

                            // fix flicking
                            // Source : http://stackoverflow.com/questions/9387711/android-animation-flicker
                            TranslateAnimation anim = new TranslateAnimation(0.0f, 0.0f, 0.0f, 0.0f);
                            anim.setDuration(1);
                            v.startAnimation(anim);

                            //set new params
                            LayoutParams params = new LayoutParams(v.getLayoutParams());
                            params.addRule(RelativeLayout.CENTER_HORIZONTAL);
                            params.addRule(layoutTopOrBottomRule);
                            v.setLayoutParams(params);
                        }
                    });

                    v.startAnimation(animation);

                    //reverse direction
                    isUp = !isUp;
                }
            });
}

private float getScreenHeight() {

    DisplayMetrics displaymetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
    return (float) displaymetrics.heightPixels;

} 
```

}

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T08:57:13.583

```
 public class AnimationActivity extends Activity {

    private boolean isUp;

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ((Button) findViewById(R.id.button1))
            .setOnClickListener(new OnClickListener() {

                public void onClick(final View v) {

                    final float direction = (isUp) ? -1 : 1;
                    final float yDelta = getScreenHeight() - (2 * v.getHeight());
                    final int layoutTopOrBottomRule = (isUp) ? RelativeLayout.ALIGN_PARENT_TOP : RelativeLayout.ALIGN_PARENT_BOTTOM;

                    final Animation animation = new TranslateAnimation(0,0,0, yDelta * direction);

                    animation.setDuration(500);

                    animation.setAnimationListener(new AnimationListener() {

                        public void onAnimationStart(Animation animation) {
                        }

                        public void onAnimationRepeat(Animation animation) {
                        }

                        public void onAnimationEnd(Animation animation) {

                            // fix flicking
                            // Source : http://stackoverflow.com/questions/9387711/android-animation-flicker
                            TranslateAnimation anim = new TranslateAnimation(0.0f, 0.0f, 0.0f, 0.0f);
                            anim.setDuration(1);
                            v.startAnimation(anim);

                            //set new params
                            LayoutParams params = new LayoutParams(v.getLayoutParams());
                            params.addRule(RelativeLayout.CENTER_HORIZONTAL);
                            params.addRule(layoutTopOrBottomRule);
                            v.setLayoutParams(params);
                        }
                    });

                    v.startAnimation(animation);

                    //reverse direction
                    isUp = !isUp;
                }
            });
}

private float getScreenHeight() {

    DisplayMetrics displaymetrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
    return (float) displaymetrics.heightPixels;

} 
```

# ms-access - MS Access中的组合字段主键？

> ID：12919265
> 
> 赞同：1
> 
> 时间：2012-10-16T16:27:57.297
> 
> 标签：ms-access

我正在寻求创建一个数据库系统，以帮助我正在从事的项目保持井井有条。我的目标是为我所做的每个项目创建一个表格，从中我可以找到我与谁打交道以及我为该项目做了什么。

我的看法是，项目可以包含多条内容，并且内容可以由多个客户提交，但一个客户不限于只从事一个项目。

我现在会附上一张我提议的桌子设计的图片，因为事情可能会变得复杂。

![建议的数据库表](../Images/2264b0a1317e323de874a6743641473a.png)

在 MS Access 中，我能够打开项目表，单击 + 以查看谁参与了该项目（客户表），然后单击另一个 + 以查看每个用户提交的工作（内容表）。例如。

```
Projects Table: id 1, project #1, client #1
    + Clients Table: id 1, client #1, user #1
            + Content Table id 1, Project #1, Logo Design, Client #1
                            id 2, Project #1, Create Website, Client #1
      Clients Table: id 2, client #2, user #2
                     id 3, client #3, user #3 
```

当我去添加与第二个客户端关联的第三个项目时，它告诉我有数据重复，或者类似的东西。

我觉得解决方案是在项目表中将项目名称和客户名称链接在一起，这样如果我可以有 2 个或更多客户与一个项目相关联，但防止将客户分配给同一个项目两次。它还应该允许我将一个客户分配给多个项目。

只要没有相同项目名称和客户名称的实例，它就应该接受数据

所以我的问题是，我的解决方案是正确的吗？如果是，我该如何实施？我是否以正确的方式做事？

我希望我输入的内容对某人有所帮助，并且有人可以为此提供一些帮助/建议。

干杯本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:07:27.200

听起来您正在描述项目和客户之间的多对多关系。在这种情况下，标准方法是有一个项目表，另一个用于客户，然后是一个连接表，其中包含每个项目/客户组合的配对。

在联结表中的项目和客户端上添加唯一约束（索引），以便它只接受同一项目/客户端对的一行。您可以使用复合主键来满足唯一约束。

# c# - WPF Silverlight Datagrid 实时，刷新？计时器？

> ID：12919267
> 
> 赞同：1
> 
> 时间：2012-10-16T16:28:00.930
> 
> 标签：c#, wpf, refresh, wpfdatagrid, silverlight-5.0

我有一定的数据网格，我需要“刷新”每个......让我们说 1 分钟。

计时器是最好的选择吗？

```
 public PageMain()
    {
        InitializeComponent();
        DataGridFill();
        InitTimer();
    }

    private void InitTimer()
    {
        disTimer = new Timer(new TimeSpan(0, 1, 0).TotalMilliseconds);
        disTimer.Elapsed += disTimer_Elapsed;
        disTimer.Start();
    }

    void disTimer_Elapsed(object sender, ElapsedEventArgs e)
    {
        DataGridFill();
    }

    private void DataGridFill()
    {
        var items = GetItems(1);
        ICollectionView itemsView =
            CollectionViewSource.GetDefaultView(items);

        itemsView.GroupDescriptions.Add(new PropertyGroupDescription("MyCustomGroup"));
        // Set the view as the DataContext for the DataGrid
        AmbientesDataGrid.DataContext = itemsView;
    } 
```

有没有更“脏”的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T20:17:41.343

“刷新”a 的最佳方法`DataGrid`是将其绑定到项目集合，并每 X 分钟更新项目的源集合。

```
<DataGrid ItemsSource="{Binding MyCollection}" ... /> 
```

这样您就不必引用它`DataGrid`本身，因此您的 UI 逻辑和应用程序逻辑保持分离，如果您的刷新需要一段时间，您可以在后台线程上运行它而不会锁定您的 UI。

由于 WPF 无法从另一个线程更新在一个线程上创建的对象，因此您可能希望获取数据并将其存储在后台线程上的临时集合中，然后在主 UI 线程上更新绑定的集合。

对于计时位，如果需要，请使用 a`Timer`或可能使用 a。`DispatcherTimer`

```
var timer = new System.Windows.Threading.DispatcherTimer();
timer.Tick += Timer_Tick;
timer.Interval = new TimeSpan(0,1,0);
timer.Start();

private void Timer_Tick(object sender, EventArgs e)
{
    MyCollection = GetUpdatedCollectionData();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:42:40.157

我的首选方法：

```
public sealed class ViewModel
{
    /// <summary>
    /// As this is readonly, the list property cannot change, just it's content so
    /// I don't need to send notify messages.
    /// </summary>
    private readonly ObservableCollection<T> _list = new ObservableCollection<T>();

    /// <summary>
    /// Bind to me.
    /// I publish as IEnumerable<T>, no need to show your inner workings.
    /// </summary>
    public IEnumerable<T> List { get { return _list; } }

    /// <summary>
    /// Add items. Call from a despatch timer if you wish.
    /// </summary>
    /// <param name="newItems"></param>
    public void AddItems(IEnumerable<T> newItems)
    {            
        foreach(var item in newItems)
        {
            _list.Add(item);
        }
    }

    /// <summary>
    /// Sets the list of items. Call from a despatch timer if you wish.
    /// </summary>
    /// <param name="newItems"></param>
    public void SetItems(IEnumerable<T> newItems)
    {
        _list.Clear();
        AddItems(newItems);
    }
} 
```

不喜欢缺乏体面的`AddRange`/ `ReplaceRange`in `ObservableCollection<T>`？我也不是，但这里是`ObservableCollection<T>`添加消息效率的后代`AddRange`，以及单元测试：

[ObservableCollection 不支持 AddRange 方法，所以我会收到添加的每个项目的通知，除了 INotifyCollectionChanging 呢？](https://stackoverflow.com/questions/670577/observablecollection-doesnt-support-addrange-method-so-i-get-notified-for-each)

# ruby-on-rails - 从 InheritedResources#create 检索创建的对象

> ID：12919268
> 
> 赞同：0
> 
> 时间：2012-10-16T16:28:01.737
> 
> 标签：ruby-on-rails, inherited-resources

在我的 Rails 应用程序中，我有以下对象：

```
Group: has_many users through group_membership
GroupMembership: belongs_to user, belongs_to group
User: has_many groups through group_membership 
```

用户可以创建组。发生这种情况时，我想自动将用户添加到组中。在我的 GroupsController 中，我有以下内容（扩展 InheritedResources）：

```
super do |success, failure|
  if success
    GroupMembership.create(:user_id => current_user, :group_id => ???)
  ...
end 
```

问题是我无法检索`super`创建的对象。有没有办法做到这一点？或者更好的是，有没有办法改变 LockGroup 模型，使其始终执行这种关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:51:49.100

当回调被触发时，控制器已经拥有与创建的组对应的标准实例变量：`@group`!!

```
class GroupController < InheritedResources::Base

  def create
    super do |success, failure|
      if success
        GroupMembership.create(:user_id => current_user, :group_id => @group.id)
      ...
    end
  end

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:00:08.490

我假设为您的组提供的 params 键是 :group。然后您可以在模型中使用nested_attributes_for 选项。然后，您可以在 create 操作的 before 过滤器中设置它们：

```
class User < ActiveRecord::Base
  accept_nested_attributes_for :group_membership
end

# on your controller
before_filter :add_user, :on => [:create]

def add_user
  params[:group][:group_membership_attributes] = {}
  params[:group][:group_membership_attributes][:user] = current_user
end 
```

或者您在用户初始化时建立组成员身份：

```
class User < ActiveRecord::Base
  def after_initialize
    build_group_membership
  end
end

# on your controller
before_filter :add_user, :on => [:create]

def add_user
  params[:group][:user] = current_user
end 
```

它应该自动工作。

# css - 列表样式菜单 wordpress 样式 css

> ID：12919271
> 
> 赞同：0
> 
> 时间：2012-10-16T16:28:07.770
> 
> 标签：css, list, styles

我直接加载链接以显示菜单。这个菜单是有组织的强制列表，因为它是一个 wordpress 菜单级别和子级别。不幸的是，正如您在子层的末尾看到的那样，有一条双线。效果应该像第一个链接在两行中一样。你能给我一个提示吗？

[http://www.circuitosanmartinodellago.com/test/index.html](http://www.circuitosanmartinodellago.com/test/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:37:51.593

你可以使用 CSS3 的[`:last-child`](http://www.w3.org/wiki/CSS/Selectors/pseudo-classes/%3alast-child)伪类

```
#menu-main-menu li:last-child {border-bottom:none;} 
```

支持很好（不包括 IE 7/8）[http://caniuse.com/#search=last-child](http://caniuse.com/#search=last-child)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:11:29.193

那么这是在wordpress中使用的吗？如果是这种情况，您可以将 CSS 元素应用到 wordpress 默认生成的单个菜单项，这应该可以解决这个问题。只需将您自己的自定义样式应用于该导航项，例如#menu-item-1。

# jquery - jCarousel + jQuery UI 选项卡问题：隐藏面板列表宽度计算不正确

> ID：12919272
> 
> 赞同：3
> 
> 时间：2012-10-16T16:28:12.483
> 
> 标签：jquery, jquery-ui, tabs, carousel, jcarousel

我正在尝试将两个轮播放在一个页面中，每个轮播都位于选项卡式导航的不同面板中，但它不起作用。我已经尝试对Jcarousel脚本进行故障排除，但是我想当标签和JCarousel脚本相互作用时，问题就会发生。

无论如何，我的 HTML 或多或少是这样的：

```
<div id="myTabs">
  <ul><!-- Tabs navigation -->
    <li><a href="#foo">Foo</a></li>
    <li><a href="#bar">Bar</a></li>
  </ul>
  <div id="foo">
    <ul>
      <li><!-- Quite complex content inside each LI, but set width of 255px --></li>
      <!-- Dynamic number of LI. Minimum of 4 items -->
      .
      .
      .
    </ul>
  </div>
  <div id="bar">
    <!-- Another UL, just like #FOO -->
  </div>
</div> 
```

所以，我需要应用标签`#myTabs`，这是代码：`$('#myTabs').tabs()`. 我还需要将 jCarousel 应用到`UL`s 里面`#foo`，`#bar`这就是我正在使用的调用：

```
$('#myTabs > div > ul').jcarousel({
    scroll: 1,
    animation: 'slow',
    wrap: 'circular'
}); 
```

第一个面板中的轮播正在正确创建。那里一切顺利。当我单击一个选项卡以显示隐藏面板时会出现问题：轮播导航不起作用并且控制台抛出错误`"jCarousel: No width/height set for items. This will cause an infinite loop. Aborting... "`

但是，当我尝试将属性设置`itemFallbackDimension`为 时`255px`，会发生`UL`隐藏面板的宽度为`510px`. 这正是两个`LI`元素的宽度，但在 UL 中至少有 4 个。因此，虽然现在导航可以工作，但布局完全被打破了。（[见图](http://imgur.com/EZcRX)）

这些问题只发生在选项卡的隐藏面板中。我认为这是因为 jCarousel 在内部依赖于`innerWidth()`计算`UL`' 宽度的方法，但是`0`当容器设置`display: none`为时返回 - 而这正是选项卡隐藏面板的作用。

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T18:55:42.527

如果您使用 1.8.x 或更低版本的 jQuery UI，那么解决方案相当简单。

在您的样式表中找到 .ui-tabs-hide 并使其看起来像这样：

```
.ui-tabs .ui-tabs-hide {
    position: absolute;
    left: -10000px;
} 
```

如果所选面板有任何问题，还要仔细检查是否存在：

```
.ui-tabs .ui-tabs-panel{
    left:0;
} 
```

来自 jQuery UI 的 css 是 display:none。这就是您所描述的问题的根源。轮播插件需要确定尺寸，但当 display:none 应用时，尺寸为 0 x 0。

注意：出于某种原因，jQuery 1.9 稍微改变了这一点。它不再将 ui-tabs-hide 添加到非活动面板。如果您已经在使用 1.9，并且由于某种原因无法返回到 1.8，请告诉我，我会帮助您解决该问题（键入要长得多，我猜您使用的是 1.8 或更早版本） .

# validation - 公式字段作为验证规则的错误位置

> ID：12919273
> 
> 赞同：0
> 
> 时间：2012-10-16T16:28:22.367
> 
> 标签：validation, salesforce

我们有一些公式字段可以镜像来自其他对象的数据。我们还有验证规则，在某些条件下，这些公式字段需要特定值。

有时我们希望验证规则错误显示在公式字段上，但看起来 Salesforce 不允许 - 默认情况下 - 公式字段作为验证规则的“错误位置”。

有人知道解决方法吗？

# c++ - GLUT 程序链接错误

> ID：12919277
> 
> 赞同：2
> 
> 时间：2012-10-16T16:28:23.927
> 
> 标签：c++, mingw, glut

我想编译一个 GLUT 程序

```
#include <GL/glut.h>

int main(int argc, char **argv) {

    // init GLUT and create Window
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);
    glutInitWindowPosition(100,100);
    glutInitWindowSize(320,320);
    glutCreateWindow("Lighthouse3D- GLUT Tutorial");

    return 1;

} 
```

编译和链接命令：

```
gcc -o main.exe main.c -lglut32 
```

结果：

```
main.o:main.c:(.text.startup+0x1c): undefined reference to `glutInit'
main.o:main.c:(.text.startup+0x28): undefined reference to `glutInitDisplayMode'
main.o:main.c:(.text.startup+0x3c): undefined reference to `glutInitWindowPosition'
main.o:main.c:(.text.startup+0x50): undefined reference to `glutInitWindowSize'
main.o:main.c:(.text.startup+0x5c): undefined reference to `glutCreateWindow'
collect2: ld returned 1 exit status 
```

glut的实际lib文件（3.7.6，称为glut32.lib）在mingw的lib文件夹中，include文件在include/GL中。

现在要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T21:46:42.480

# python - 如何在python中定义自由变量？

> ID：12919278
> 
> 赞同：50
> 
> 时间：2012-10-16T16:28:24.347
> 
> 标签：python

[来自python doc](http://docs.python.org/py3k/reference/executionmodel.html)的**本地/全局/自由变量**定义：

> 如果名称绑定在块中，则它是该块的**局部变量**，除非声明为非局部变量。如果名称绑定在模块级别，则它是一个**全局变量**。（模块代码块的变量是局部的和全局的。）如果一个变量在一个代码块中使用但没有在那里定义，它是一个**自由变量**。

* * *

### 代码 1：

```
>>> x = 0
>>> def foo():
...   print(x)
...   print(locals())
... 
>>> foo()
0
{} 
```

* * *

### 代码 2：

```
>>> def bar():
...   x = 1
...   def foo():
...     print(x)
...     print(locals())
...   foo()
... 
>>> bar()
1
{'x':1} 
```

[**自由变量**在功能块中被调用时返回`locals()`，而不是在类块中。]

* * *

in `Code 1`,`x`是一个**全局变量**，它被使用但未在`foo()`.
但是它不是一个**自由变量**，因为它不是由`locals()`.
我认为这不是医生所说的。**自由变量**有技术定义吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-10-16T16:33:11.033

## 自由变量的定义：已使用，但**既不是 global 也不是 bound**。

例如：

1.  `x`在代码 1 中不是免费的，因为它是一个**全局**变量。
2.  `x`在代码 2中不是免费的`bar()`，因为它是一个**绑定**变量。
3.  `x`是免费的`foo()`。

Python 之所以做出这种区分是因为闭包。当前环境中没有定义自由变量，即局部变量的集合，**也不**是全局变量！因此它必须在别处定义。这就是闭包的概念。在代码 2 中，`foo()`关闭`x`定义在`bar()`. Python 使用词法作用域。这意味着，解释器只需查看代码即可确定范围。

例如：`x`被称为变量 in `foo()`，因为`foo()`被 包围`bar()`，并且`x`被绑定在 中`bar()`。

全局范围由 Python 特殊处理。可以将全局范围视为最外层范围，但这不是因为性能（我认为）。`x`因此，既是**免费**的又是**全球**的是不可能的。

## 豁免

生活不是那么简单。存在**自由的全局**变量。Python 文档（执行模型）说：

> 全局语句与同一块中的名称绑定操作具有相同的范围。如果自由变量的最近封闭范围包含全局语句，则自由变量被视为全局变量。

```
>>> x = 42
>>> def foo():
...   global x
...   def baz():
...     print(x)
...     print(locals())
...   baz()
... 
>>> foo()
42
{} 
```

我自己不知道。我们都在这里学习。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-21T16:10:10.443

据我了解，文档在自由变量上确实有点模棱两可。有被视为普通全局变量的*自由全局变量和**词法绑定的自由变量*。[Eli Bendersky 在关于符号表的博客文章中](http://eli.thegreenplace.net/2010/09/18/python-internals-symbol-tables-part-1)很好地总结了它：

> 不幸的是，Python 的核心中有一个简写，最初可能会使读者混淆究竟什么是“自由”变量。幸运的是，这是一个非常轻微的混乱，很容易整理。执行模型参考说：
> 
> > 如果变量在代码块中使用但未在此处定义，则它是自由变量。
> 
> [这与正式的定义](http://en.wikipedia.org/wiki/Free_variables_and_bound_variables)是一致的。**然而，在源代码中，“free”实际上用作“词法绑定的自由变量”**（即在封闭范围内找到绑定的变量）的简写，而“global”用于指代所有剩余的自由变量变量。因此，在阅读 CPython 源代码时，重要的是要记住完整的自由变量集既包括专门标记为“自由”的变量，也包括那些标记为“全局”的变量。
> 
> 因此，为了避免混淆，当我想将 CPython 中实际处理的变量称为自由变量时，我会说“词法绑定”。

（强调我的）

使用这种速记的原因可能是因为当你有一个*全局自由变量*时，发出的字节码实际上没有任何变化。如果一个`global`变量是“免费的”或者不是，这不会改变`LOAD_GLOBAL`在这两种情况下都将使用该名称的查找这一事实。所以全局自由变量并不是那么特别。

另一方面，词法绑定变量被特殊处理并包含在[`cell`](https://docs.python.org/3.5/c-api/cell.html)对象中，对象是*词法绑定自由变量*的存储空间，位于`__closure__`给定函数的属性中。**[`LOAD_DEREF`](https://docs.python.org/3.5/library/dis.html#opcode-LOAD_DEREF)**为这些创建了一个特殊指令，用于检查存在的自由变量的单元格。该`LOAD_DEREF`指令的描述是：

> `LOAD_DEREF(i)`
> 
> 加载单元格的插槽 i 中包含的单元格和自由变量存储

因此，在 Python 中，自由变量仅在具有状态的对象的定义在词法上（即静态地）嵌套在具有状态的对象的另一个定义中的情况下作为一个概念有所不同。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-11-30T08:07:58.460

为了让新手不会被误导，Nikhil 上面的评论以“变量只不过是用于存储值的保留内存位置”开头。对 Python 来说是完全错误的。

在 Python 中有“名称”和“值”。值有类型，而不是名称。内存空间是为值保留的，而不是为名称保留的。例如，我们可以在代码中让 x = 1 后面跟着 x = "a string"，后面跟着 x = [3, 9.1]。在这些赋值过程中，名称 x 首先指向一个整数，然后指向一个字符串，最后指向一个列表。赋值完成后，赋值左侧的名称指向赋值右侧的值。值可以是不可变的（不可变的）或可变的（可变的）。整数、字符串、元组等是不可变的；列表等是可变的。由于整数是不可变的，当有两个这样的语句时：

x = 4

x = x +1

第二条语句使 x 指向一个新值 5，它不会将 x 指向的内存位置中的值从 4 更改为 5！

这是一个与 C 语言非常不同的模型！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-04T12:31:21.383

Python 中没有明确的关键字来声明自由变量。根据函数的定义以及函数内部和周围的语句，Python 会将变量分为绑定变量、单元变量和自由变量。

下面的示例使用函数的代码对象说明了这个概念，该对象封装了上一段中提到的变量。

```
def func(arg1, arg2=2):
    def inner_func(arg3=arg2):
        return arg1, arg3
    arg1, arg2 = None
    return inner_func 
```

对于“*函数*”：

• *arg1*和*arg2*是*绑定变量*

• *arg1*是一个*单元变量*，因为它是“ *inner_func* ”内部的一个*自由变量*

 *• 没有自由变量。

```
func.__code__.co_varnames 
```

*('arg1', 'arg2', 'inner_func')*

```
func.__code__.co_cellvars 
```

*('arg1',)*

```
func.__code__.co_freevars 
```

*()*

对于“ *inner_func* ”：

• *arg3*是一个*绑定变量*

• *arg1*是一个*自由变量*

• 没有单元格变量

```
inner_func.__code__.co_varnames 
```

*('arg3',)*

```
inner_func.__code__.co_freevars 
```

*('arg1')*

```
inner_func.__code__.co_cellvars 
```

*()*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-04T15:52:19.607

变量只不过是用于存储值的保留内存位置。这意味着当您创建一个变量时，您会在内存中保留一些空间。

根据变量的数据类型，解释器分配内存并决定可以在保留内存中存储什么。因此，通过为变量分配不同的数据类型，您可以在这些变量中存储整数、小数或字符。

为变量赋值

Python 变量不需要显式声明来保留内存空间。当您为变量赋值时，声明会自动发生。等号 (=) 用于为变量赋值。*

# firefox-addon - 动态定义 Firefox 扩展首选项

> ID：12919280
> 
> 赞同：1
> 
> 时间：2012-10-16T16:28:29.193
> 
> 标签：firefox-addon, xul

我有一个 Firefox 扩展，它实现了一些可以从 Firefox 的上下文菜单中调用的小功能。我制作了一个首选项窗口，显示每个首选项的无线电组，允许该功能显示在主 Firefox 菜单中，显示在扩展创建的子菜单中，或隐藏。这对每个扩展函数的工作方式完全相同，只是以下内容发生了变化：首选项 id、首选项名称、被调用函数名称和每个无线电组的标签。是否可以为每个函数创建一个包含这四个字符串的数组，然后动态定义所有首选项，而不是为每个首选项复制和粘贴相同的代码？

我很确定可以在我的首选项窗口中动态定义 XUL。但是，我不确定是否使用 pref() 命令在 defaults 文件夹中定义默认首选项（我不确定如何访问在扩展中其他位置定义的字符串）。我也不确定preferences.xul 文件的定义是否可以动态定义或者是否需要输入。

另外，您认为这是一个好主意还是坏主意？我在想它会使添加/删除功能更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:31:45.650

对我来说听起来是个好主意。您可以在静态 XUL 文件中执行的任何操作，您都可以通过使用 DOM 函数（包括 的内容`preferences.xul`，无论它们可能是什么）创建 XUL 窗口的内容来动态执行此操作。就默认值而言，如果尚未设置任何值，您可以在浏览器启动时使用首选项 API 手动设置它们。您可以使用[观察者服务](https://developer.mozilla.org/en-US/docs/XPCOM/Receiving_startup_notifications)来处理`profile-after-change`通知。使用[首选项 API](https://developer.mozilla.org/en-US/docs/Code_snippets/Preferences)检查您的首选项是否已经设置了值，如果没有，请将它们设置为您选择的默认值。

要检查首选项是否已经存在，请使用适当的[`nsIPrefBranch`](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIPrefBranch)方法尝试获取它。如果抛出异常，则它不存在。

# opencv - cvPerspectiveTransform：我应该提供什么？

> ID：12919282
> 
> 赞同：2
> 
> 时间：2012-10-16T16:28:30.993
> 
> 标签：opencv, augmented-reality, transformation, homography

我正在尝试使用`cvPerspectiveTransform`来转换四个 2D 点。我已经通过`cvFindHomography`. 我无法弄清楚要提供什么样的结构才不会遇到一些错误。有人会这么好心地告诉我如何处理这些问题吗？

*   x:y
*   0:0
*   640:0
*   0:480
*   640:480

我在 Win 上使用 OpenCV 2.4.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:55:54.830

这是正确初始化矩阵的一种方法。它可能不是最优雅的，但它有效：

```
CvMat* input = cvCreateMat(1, 4, CV_32FC2);
CvMat* output = cvCreateMat(1, 4, CV_32FC2);

float data[8] = {0,0,0,640,480,0,640,480};

for (int i =0; i < 8; i++)
{
    input->data.fl[i] = data[i];
}

cvPerspectiveTransform(input, output, matrix_from_cvFindHomography); 
```

C++ API 提供了更直观的实现。许多 OpenCV 函数，如 perspectiveTransform，接受点向量作为输入，可以通过以下方式初始化：

```
std::vector<cv::Point2f> inputs;
std::vector<cv::Point2f> outputs;

inputs.push_back(cv::Point2f(0,0));
inputs.push_back(cv::Point2f(640,0));
inputs.push_back(cv::Point2f(0,480));
inputs.push_back(cv::Point2f(640,480));

cv::perspectiveTransform(inputs, outputs, matrix_from_findHomography); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:39:52.150

假设您有一个 3x3 cv::Mat 的浮点数，您可以将其转换为（如果您想将所有 f 都更改为 d）

```
cv::Matx33f transform(your_cv_Mat);
cv::Matx31f pt1(0,0,1);
cv::Matx31f pt2(640,0,1);
...
pt1 = transform*pt1;
pt2 = transform*pt2;
... 
```

确保通过第三个坐标进行归一化，如果没有意义，请阅读齐次坐标

```
pt1 *= 1/pt1(2);
pt2 *= 1/pt2(2);
...
cv::Point2f final_pt1(pt1(0),pt1(1));
cv::Point2f final_pt2(pt2(0),pt2(1)); 
```

您不需要对 Matx 执行此操作，它也可以与 cv::Mat 一起使用。就我个人而言，我喜欢使用 Matx 处理转换，因为它的大小和类型更容易跟踪，并且它的内容可以更容易地在调试器中查看。

# facebook-graph-api - Facebook OAuth 离线登录

> ID：12919283
> 
> 赞同：0
> 
> 时间：2012-10-16T16:28:32.460
> 
> 标签：facebook-graph-api, facebook-oauth

我正在构建一个内部应用程序，它将同时从多个社交网络中收集信息。应用程序的 URL 可能是未知的，或者在 localhost 之外的任何地方都不允许使用。

我将积累的信息之一是 FQL 洞察表信息：[https](https://developers.facebook.com/docs/reference/fql/insights/) ://developers.facebook.com/docs/reference/fql/insights/ 。您可能会注意到，此信息是私密的，因此我无法匿名获取。

应用程序本身是以“配置一次并永久使用”的方式编写的，可能根本不允许使用该应用程序的人使用 Facebook 登录凭据。

我的问题是 Facebook 登录。据我了解，现在不推荐使用“永久访问”的登录方式，并且 Facebook 不允许像 Twitter 那样访问 API（创建永久密钥并忘记它）。问题是：

*   有什么办法可以克服每次我想获取他们时都需要向这个人询问权限的事实吗？问之间的最长间隔是多少？

**我目前对此的想法是：**

*   为“经理”创建一个虚拟用户并授予他对 FB 页面的只读访问权限，从而使他能够登录该帐户。然后在我需要时每隔（n）小时向他询问权限。
*   假设我们拥有帐户的登录名/密码并自己获取 API 密钥，则自动登录到 FB 帐户。

哪个可行？有没有人有做这种事情的经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:39:33.207

```
What can be the longest period between asking? 
```

您可以使用有效期为**60 天**的长寿命用户 access_token。使用以下 FB 调用获取扩展访问令牌：

[https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=EXISTING_ACCESS_TOKEN](https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=EXISTING_ACCESS_TOKEN)

您可以在此处查看更多详细信息：

[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

这里还有一点值得注意：当用户更改密码时，取消对应用程序的授权，他们的 OAuth 令牌就会过期。

希望这有帮助！

# c# - ICommand 绑定导致 WPF 应用程序中的 UI 内存泄漏

> ID：12919288
> 
> 赞同：10
> 
> 时间：2012-10-16T16:28:51.783
> 
> 标签：c#, wpf, linq

我正在构建一个 WPF 应用程序，该应用程序使用 LINQ to SQL 连接到 SQL Server 数据库。

应用程序的主窗口包含`ListView`一系列详细视图。的绑定到作为根视图模型上的属性公开的详细视图模型对象的集合`ItemSource`。`ListView`每个详细视图模型对象都包含多个`ICommand`属性以及一个公开详细模型对象的属性，该详细模型对象又公开了 UI 中显示的各种数据字段。

使用 ANTS 内存分析器的分析表明，被泄漏的对象是包含在详细模型对象中的对象，以及它们所绑定的一些 UI 类。以前刷新的这些对象的实例不会被垃圾收集。

ANTS 有一个工具，允许用户跟踪引用链，以确定保留不需要的内存的原因。当我使用它时，我发现所有出现的链条都有一个`ICommand`。因此，我删除了有问题的`ICommand`，发现内存泄漏消失了。

不幸的是，我需要`ICommand`实现一些重要的功能。真正让我困惑的是它首先是如何引用细节模型对象的——它们是细节视图模型对象中两个完全独立的实例变量。

这是详细视图模型对象的构造函数（对RootViewModel的引用用于在连接到ICommands的某些方法中进行回调。我最初怀疑这可能导致引用循环链，这可能是导致问题，但删除它似乎没有任何效果。）

```
public CarDataViewModel(CarData carDataItem, RootViewModel parentViewModel)
    {

        _parentViewModel = parentViewModel;
        CarDataModel = carDataItem;
        CompetingCheckboxStatus = CarDataModel.CurrentCar.Competing;
        AcknowledgeAlarm = new ParameterlessCommand(AcknowledgeAlarmClicked);
        Acknowledge = new ParameterlessCommand(AcknowledgeClicked);
        ShowReport = new ParameterlessCommand(ShowReportClicked);
        Cancel = new ParameterlessCommand(CancelClicked);
    } 
```

这是设置绑定的 xaml - AcknowledgeAlarm 是 ICommand，CarDataModel 是详细模型对象：

```
<ListView x:Name="itemGridView"Grid.Row="1"ScrollViewer.HorizontalScrollBarVisibility="Disabled" ItemsSource="{Binding CarDataViewModels}" IsSynchronizedWithCurrentItem="True" Margin="0,0,0,0">
        <ListView.ItemTemplate>
            <DataTemplate>
                </DataTemplate.Resources>
                <Button Command="{Binding AcknowledgeAlarm}">
                    <Border DataContext="{Binding CarDataModel}" BorderBrush="{StaticResource GrayFadeBrush}" Background="White" BorderThickness="5">
                        <Grid> . . . 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T00:10:40.887

事件`CanExecuteChanged`处理程序可能与泄漏有关。

WPF 期望 ICommand 实现使用对事件处理程序的弱引用。您正在使用使用强引用的普通 .NET 事件，这可能会导致此泄漏。

您创建`ParameterlessCommand`实例的方式似乎暗示这`CanExecute`将永远是正确的，并且您根本不需要该事件。您实际上是在任何地方触发事件，还是`OnCanExecuteChanged`未使用的代码？

如果不是，请将事件定义替换为：

```
public event EventHandler CanExecuteChanged { add {} remove {} } 
```

这样事件不会存储任何处理程序，并且视图模型避免了对 UI 元素的强引用。

如果您需要引发事件，最简单的解决方案是使用`CommandManager.RequerySuggested`，它与 ICommand 预期的弱事件语义相匹配：

```
public event EventHandler CanExecuteChanged {
    add {
        CommandManager.RequerySuggested += value;
    }
    remove {
        CommandManager.RequerySuggested -= value;
    }
} 
```

* * *

您应该做的另一件事是`INotifyPropertyChanged`在您的视图模型中实现（如果您还没有这样做的话），并使用它而不是`NameChanged`为每个属性设置单独的等事件。这是因为 WPF 中处理各个属性的逻辑会在从视图模型引用回 UI 元素时导致内存泄漏：http: [//support.microsoft.com/kb/938416](http://support.microsoft.com/kb/938416)

`INotifyPropertyChanged`即使您实际上没有任何更改事件，您也需要实施 AFAIK 。

* * *

我的猜测是修复这两个问题中的任何一个都会使泄漏消失：不正确的实现`CanExecuteChanged`会导致视图模型到视图的强引用，这正是缺少`INotifyPropertyChanged`导致泄漏的情况。

但是解决这两个问题是个好主意。不只是其中之一。

# php - 通过 Javascript 和 PHP 添加数值

> ID：12919295
> 
> 赞同：1
> 
> 时间：2012-10-16T16:29:01.430
> 
> 标签：php, javascript, html

基本上我试图将值相乘。

我下面有一个 ul 正在回显一个数值，：

```
<ul class="TCE">
<li><span>Average drink cost</span>&nbsp;&nbsp;<?php echo the_field('average_drink_price'); ?></li>
<li><span>Average drinks spenditure per night</span>&nbsp;&nbsp;<?php echo the_field('average_drinks_spenditure_per_night'); ?></li>
<li><span>Average drinks spenditure for the year</span>&nbsp;&nbsp;<!-- JAVA BIT --></li>
<li><span>Average drinks spenditure for 3 years</span>&nbsp;&nbsp; <!-- JAVA BIT --></li>
</ul> 
```

我希望第三个 li 得到第二个 li 的值，然后将该值乘以 28。

然后我希望第四个 li 得到第三个 li 的值并将其乘以 3。

所以它有点像这样：

li-2 x 28 = li-3 li-3 x 3 = li-4

如果这有意义吗？li1 和 li2 的值将通过该 PHP 字段生成，对此有任何帮助，因为我不知道从哪里开始？

更新的 PHP 测试：

```
<?php
var_dump(the_field('average_drinks_spenditure_per_night')); 
$li2 = the_field('average_drinks_spenditure_per_night');
$li3 = ($li2 * 28) * 2.1;
$li4 = $li3 * 3;
?>

<ul class="TCE">
<li><span>Average drink cost</span>&nbsp;&nbsp;<?php echo the_field('average_drink_price'); ?></li>
<li><span>Average drinks spenditure per night</span>&nbsp;&nbsp;<?php echo $li2; ?></li>
<li><span>Average drinks spenditure for the year</span>&nbsp;&nbsp;<?php echo $li3;?><!-- JAVA BIT --></li>
<li><span>Average drinks spenditure for 3 years</span>&nbsp;&nbsp; <?php echo $li4;?><!-- JAVA BIT --></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:34:14.700

尝试

```
<?php 
$li2 = 1;
if(is_numeric(trim(the_field('average_drinks_spenditure_per_night'))))
 $li2 = trim(the_field('average_drinks_spenditure_per_night'));
$li3 = $li2 * 28;
$li4 = $li3 * 3;

?>

<ul class="TCE">
<li><span>Average drink cost</span>&nbsp;&nbsp;<?php echo   the_field('average_drink_price'); ?></li>
<li><span>Average drinks spenditure per night</span>&nbsp;&nbsp;<?php echo $li2; ?></li>
<li><span>Average drinks spenditure for the year</span>&nbsp;&nbsp;<?php  echo $li3;?><!-- JAVA BIT --></li>
<li><span>Average drinks spenditure for 3 years</span>&nbsp;&nbsp; <!-- JAVA BIT --></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:02:37.900

你能做这个吗？JavaScript 是从哪里来的？

```
<?php
    $perNight = the_field('average_drinks_spenditure_per_night');
    $perYear = $perNight * 365;
    $per3Years = $perYear * 3;
?>    

<ul class="TCE">
    <li><span>Average drink cost</span>&nbsp;&nbsp;<?php echo the_field('average_drink_price'); ?></li>
    <li><span>Average drinks spenditure per night</span>&nbsp;&nbsp;<?php echo $perNight; ?></li>
    <li><span>Average drinks spenditure for the year</span>&nbsp;&nbsp;<?php echo $perYear; ?></li>
    <li><span>Average drinks spenditure for 3 years</span>&nbsp;&nbsp;<?php echo $per3Years; ?></li>
</ul> 
```

# gmail - Google Apps Gmail SPF 错误

> ID：12919296
> 
> 赞同：1
> 
> 时间：2012-10-16T16:29:03.807
> 
> 标签：gmail, spf

我将一位客户转移到 Google Apps，这太疯狂了！这么多问题！而且我从来没有遇到过这些问题

客户正在使用 Outlook 和 Imap 来管理他的 Google Apps Gmail 帐户

现在，当他发送电子邮件时，他收到了这种错误（仅限某些地址）：

```
Delivery to the following recipient failed permanently:

     spf-test@openspf.org

Technical details of permanent failure:
Google tried to deliver your message, but it was rejected by the recipient domain. We recommend contacting the other email provider for further information about the cause of this error. The error that the other server returned was: 550 550 5.7.1 <spf-test@openspf.org>: Recipient address rejected: SPF Tests: Mail-From Result="pass": Mail From="nelson@samarfil.com" HELO name="mail-qa0-f45.google.com" HELO Result="none" Remote IP="209.85.216.45" (state 13).

----- Original message -----

DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=samarfil.com; s=google;
        h=mime-version:x-originating-ip:date:message-id:subject:from:to
         :content-type;
        bh=bjpej8F5vAhPQFF4gZXUvUHOGuDj2lURhN5uAXH+4o4=;
        b=Gvhx7DYYlBFN1b0DQDDTq7Ll0tiGrrzMRGxVnIXOlbr8E3xhtY/lJGNcETSNDIblTT
         yQHNyBlnPZxm2AqN8aeJ60lM54QofFtEt4jZe4V0b9WkP8rBXl5KbEfADcJw3kgZQMN/
         8I0cpLYALe4YJ0PX8ZCXbtmFtd7m/Jmc/vKEo=
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=google.com; s=20120113;
        h=mime-version:x-originating-ip:date:message-id:subject:from:to
         :content-type:x-gm-message-state;
        bh=bjpej8F5vAhPQFF4gZXUvUHOGuDj2lURhN5uAXH+4o4=;
        b=fdNJWqcTEv1GE5giglb7CBRbU5+1w0VBF8DGjAN2YlrNH624no/00JcJgu/cyw7eAs
         cIUUsU2vjMr7Kjjmc3xKbadMyF3A7b7u36l2t80aknCTdkSQuZ6yKT1EYY3INVUhue4Y
         Ml7qNaSiAPhNEHlzEttJn/OFYgPeG0rSC8OM5MyZdY6gE64bqrDLH/3chq/0M+yHclon
         hEYO7VytoV3BsNxr/HvEJEyNcHtTeX+WsVmxtNc5qgpxytbtReHEjl94auifz/YN16mg
         wyC7LUXIBfF3Tffs0NIL5ITwQIj4rSKNm/4N20bfWa6uPJn/30J1uvVoRjHegDtwYQyK
         yt8g==
MIME-Version: 1.0
Received: by 10.224.70.138 with SMTP id d10mr27073000qaj.12.1350404560884;
 Tue, 16 Oct 2012 09:22:40 -0700 (PDT)
Received: by 10.49.24.205 with HTTP; Tue, 16 Oct 2012 09:22:40 -0700 (PDT)
X-Originating-IP: [94.133.34.4]
Date: Tue, 16 Oct 2012 17:22:40 +0100
Message-ID: <CACP3cFsLYGus9Sr-cbuEFezBEXhdzSJ6gqGPOJr___UJARaBMw@mail.gmail.com>
Subject:
From: Nelson Santos <nelson@samarfil.com>
To: spf-test@openspf.org
Content-Type: multipart/alternative; boundary=bcaec51a81ec2793fc04cc2f90aa
X-Gm-Message-State: ALoCoQkvxVOP+l0d4ugZSxBkKf6IBmd7UYEWPxtodPNh+L5hBOkQD2zREymT1Eal1lH9JUSgBavX 
```

我已经将 DNS 配置为 TXT 记录 v=spf1 include:_spf.google.com ~all

我还能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:21:33.067

收到此消息是正常的，因为 SPF 测试使用错误消息发回结果。发送到其他地址时是否遇到错误？

# java - 如何在 SQLite 中连续更新单个项目，同时在 android 中保持其他项目相同

> ID：12919297
> 
> 赞同：0
> 
> 时间：2012-10-16T16:29:07.077
> 
> 标签：java, android, sqlite

我在我的应用程序中使用 SQLIte。在更新联系人时，我只想更改特定项目，同时保持其他项目相同，例如，如果行中有 3 个项目，即姓名、号码、地址，我只想更新姓名，同时保留其他项目2相同。这是代码：

```
public int updateContact(Contact contact) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, contact.getName());
    values.put(KEY_PH_NO, contact.getPhoneNumber());
    values.put(KEY_TIME, contact.getTime());

    // updating row
    return db.update(TABLE_CONTACTS, values, KEY_ID + " = ?",
            new String[] { String.valueOf(contact.getID()) });
} 
```

请告诉我该怎么做？在此先感谢。

# c# - 如何强制 Mono MVC3 应用程序在当前响应中显示 TempData

> ID：12919305
> 
> 赞同：0
> 
> 时间：2012-10-16T16:29:50.337
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-2, mono

如果下面的 ASP.NET MVC2 代码在创建控制器响应中显示消息“测试”。

在 Mono 中，消息不会出现在 Create 视图中。

消息出现在创建后调用的下一个响应中。

如何使 Mono 像在 ASP.NET 中一样在同一请求中显示 TempData 值？

```
[HttpPost]
public RedirectToRouteResult Create()
{
 TempData["Message"] = "Test";
 return RedirectToAction("Index");
}

public ActionResult Index() {
  return View();
  } 
```

Site.Master：

```
<%@ Master Language="C#" Inherits="System.Web.Mvc.ViewMasterPage" %>

<!DOCTYPE html>
<html>
<head runat="server">
    <script src="<%= Url.Content("~/Scripts/jquery/jquery-1.7.1.js")%>" type="text/javascript"></script>

 <% if (TempData["Message"]!=null) {
        %>
    $(function() {
        setTimeout( function() {
           showMessage ( '<%= TempData["Message"] as string %>');
           }, 300 );
      });
        <% } %>
    </script>
</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:46:46.483

我建议您`TempData`在控制器操作中而不是在视图中使用值：

```
[HttpPost]
public ActionResult Create()
{
    TempData["Message"] = "Test";
    return RedirectToAction("Index");
}

public ActionResult Index() 
{
    ViewData["Message"] = TempData["Message"];
    return View();
} 
```

在视图内部：

```
<%@ Master Language="C#" Inherits="System.Web.Mvc.ViewMasterPage" %>

<!DOCTYPE html>
<html>
<head runat="server">
    <script src="<%= Url.Content("~/Scripts/jquery/jquery-1.7.1.js")%>" type="text/javascript"></script>

    <% if (ViewData["Message"] != null) { %>
        $(function() {
            window.setTimeout(function() {
                showMessage (<%= new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(ViewData["Message"]) %>);
            }, 300);
        });
    <% } %>
    </script>
</head> 
```

顺便说一句`ViewData`，我建议您使用视图模型，而不是使用 ，并将您的视图强类型化到此视图模型。

# c++ - C++ 检测模板化类

> ID：12919310
> 
> 赞同：7
> 
> 时间：2012-10-16T16:30:10.727
> 
> 标签：c++, templates, c++11, template-meta-programming

```
template<typename T>
struct check
{
  static const bool value = false;
}; 
```

我想做的是`check<T>::value`当且仅当`T`is a`std::map<A,B>`或`std::unordered_map<A,B>`and both `A`and `B`be时才为真`std::string`。所以基本上`check`启用了类型的编译时检查`T`。我该怎么做呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-16T16:35:56.773

当您想要允许任何比较器、哈希器、key-equal-comarator 和分配器时的部分专业化：

```
template<class Comp, class Alloc>
struct check<std::map<std::string, std::string, Comp, Alloc>>{
  static const bool value = true;
};

template<class Hash, class KeyEq, class Alloc>
struct check<std::unordered_map<std::string, std::string, Hash, KeyEq, Alloc>>{
  static const bool value = true;
}; 
```

如果您想检查是否`T`使用了这些类型的默认版本（又名 only`map<A,B>`和 not `map<A,B,my_comp>`，您可以省略模板参数并使用显式特化：

```
template<>
struct check<std::map<std::string, std::string>>{
  static const bool value = true;
};

template<>
struct check<std::unordered_map<std::string, std::string>>{
  static const bool value = true;
}; 
```

而且，如果您想普遍检查它是否`std::map`是`std::unordered_map`任何键/值组合（以及比较器/哈希器/等）的或，则可以从[此处](https://stackoverflow.com/q/11251376/500104)获取完全通用的信息：

```
#include <type_traits>

template < template <typename...> class Template, typename T >
struct is_specialization_of : std::false_type {};

template < template <typename...> class Template, typename... Args >
struct is_specialization_of< Template, Template<Args...> > : std::true_type {};

template<class A, class B>
struct or_ : std::integral_constant<bool, A::value || B::value>{};

template<class T>
struct check
  : or_<is_specialization_of<std::map, T>,
       is_specialization_of<std::unordered_map, T>>{}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T16:34:41.243

使用部分模板特化

```
// no type passes the check
template< typename T >
struct check
{
    static const bool value = false;
};

// unless is a map
template< typename Compare, typename Allocator >
struct check< std::map< std::string, std::string, Compare, Allocator > >
{
    static const bool value = true;
};

// or an unordered map
template< typename Hash, typename KeyEqual, typename Allocator >
struct check< std::unordered_map< std::string, std::string, Hash, KeyEqual, Allocator > >
{
    static const bool value = true;
}; 
```

# c# - c#对象引用没有改变

> ID：12919311
> 
> 赞同：0
> 
> 时间：2012-10-16T16:30:19.413
> 
> 标签：c#, reference, dispose, idisposable

我需要编写一个包装器，当代码超出当前范围时，对现有对象执行某些操作。

代码如下所示：

```
public class ObjWrapper : IDisposable
{
   private KnownType dt = null;

   public ObjWrapper(KnownType data)
   {
      this.dt = data;
   }

   public void Dispose()
   {
      SaveKnownTypeInDB(this.dt);
   }
} 
```

调用看起来像这样：

```
KnownType data = new KnownType();
// do something on `data`

using (ObjWrapper ow = new ObjWrapper(data))
{
  // do something on `data`
} 
```

我总是从对象的原始状态获取数据库中的值。当我在 Dispose() 中放置断点时，我可以确认它具有原始值。当我在堆栈上检查调用者方法时，我在构造函数中传递的对象具有正确的值。我期待该`data`对象是通过引用传递的，并且内部调用的所有属性`ObjWrapper`都具有“更新”值。我还尝试`ref`在构造函数中传递数据，或者将数据作为属性放在`ObjWrapper`构造函数之后并将其设置，但都是一样的。知道为什么吗？我认为对于这种对象，c# 正在使用引用......

谢谢。

**更新**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:32:23.573

> 预期的行为是，当我在 Dispose 中放置断点时，我只看到数据的初始状态。

因为`KnownType`是一个*类*而不是一个*结构*，所以你总是在`ObjWrapper`. 因此，您所做的任何更改也`data`将反映在包装器内部。

> 我认为对于这种对象，c# 正在使用引用......

是的，这就是为什么您会看到对象的当前状态。由于您正在存储对原始实例的引用，因此对实例的任何更改也将反映在该引用中。

如果要保存数据的*副本*，则需要自己制作副本。这可能意味着手动复制这些值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:00:08.047

很多问题仍然基于您未显示的代码，但现在足以做出有根据的猜测。

我会假设这`KnownType`是一个类。作为一个类，它是一个引用类型。这意味着任何变量（例如`data`）实际上并不包含`KnownType`对象包含的任何数据；`KnownType`该变量将仅包含存在“其他地方”的实际对象的引用（也称为内存中的位置） 。

当您将`KnownType`对象传递给构造函数时，您是按值传递它，但该值只是一个引用。这意味着您正在制作参考的*副本*。这两个引用都指向同一个实际对象。因此，如果它们都指向的实际对象发生了变化，那么两个变量都会“看到”变化。但是，如果您更改其中一个变量指向的对象，另一个变量将不知道该更改。因此，如果您没有看到您的更改反映在数据库中保存，这意味着`data`您不是在使用中改变现有对象，而是将一个全新的`KnownType`对象分配给该变量。（您还没有显示此代码，因此很难肯定地说。）

所以，第一个解决方案就是**不要那样做**。不要更改`data`指向的内容，只需更改`data`您传递给`ObjWrapper`.

如果您能够分配一个新对象并让该新对象成为被保存的对象真的很重要，那么`KnownType`您`data`可以做这样的事情（如果您可以避免它，我不建议这样做，因为它在语义上相当奇怪，使其容易出错。）

```
public class ObjWrapper : IDisposable
{
    private Func<KnownType> functor;
    public ObjWrapper(Func<KnownType> functor)
    {
        this.functor = functor;
    }
    public void Dispose()
    {
        SaveKnownTypeInDB(functor());
    }
} 
```

并使用它：

```
KnownType data = new KnownType();
// do something on `data`

using (ObjWrapper ow = new ObjWrapper(() => data))
{
    // do something on `data`
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T22:11:08.480

我找到了发生这种情况的原因：

*   对象的初始状态（在进入构造函数之前）接近“新”（它的大多数成员，嗯，至少在监视窗口中可见的那些成员都具有“默认”值）；
*   在包装器的范围内，对象被传递给各种函数。其中一个基于某种逻辑，决定“重新创建”对象并用另一个对象的属性填充它的属性；
*   当然，这意味着原始对象的引用在包装器的范围内发生了变化；
*   在外面，在包装类'中，'引用'仍然'指向'旧对象。

鉴于新的事实，这是正常和预期的行为。我要感谢大家的帮助和建议！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T16:36:30.533

您需要了解引用类型和值类型之间的区别。您不是在传递对象的副本，而是在传递对对象的引用。我猜您需要在 ObjWrapper 类的构造函数中实现/调用深层复制机制

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T16:36:55.577

你应该实现 Dispose() 方法来释放资源。如果您没有显式调用 Dispose() 方法，则无法确定它何时执行。建议不要写除资源释放以外的任何逻辑或代码。

# subdomain - 防止 AddOn 域重定向到子域 (Bluehost)

> ID：12919313
> 
> 赞同：0
> 
> 时间：2012-10-16T16:30:39.527
> 
> 标签：subdomain, bluehost

嗨，我的 AddOn 域不断重定向到子域。我还注意到，当我尝试访问指向 AddOn 域的文件夹时也会发生这种情况

```
AddOn Domain: addon.com
Subdomain: addon.maindomain.com
Subfolder: maindomain.com/addon 
```

为什么会这样？我从域管理器中看到了这样的消息。

Addon Parent：域 addon.com 别名为 addon.maindomain.com

如何防止重定向发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:33:16.877

尝试以下任何一种：

文件：主域/.htaccess

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www.)?maindomain.com$ [NC]
RewriteCond %{REQUEST_URI} ^/addon/(.*)$
RewriteRule ^(.*)$ - [L,R=404] 
```

或者

文件：主域/插件/.htaccess

```
writeEngine On
RewriteCond %{HTTP_HOST} ^addon.maindomain.com$ [OR]
RewriteCond %{HTTP_HOST} ^www.addon.maindomain.com$ [OR]
RewriteCond %{HTTP_HOST} ^addon.com$
RewriteCond %{REQUEST_URI} ^/$
RewriteRule ^(.*)$ http://www.addon.com/ [R=301,L] 
```

干杯!

参考：

[https://my.bluehost.com/cgi/help/498](https://my.bluehost.com/cgi/help/498)

[https://my.bluehost.com/cgi/help/134](https://my.bluehost.com/cgi/help/134)

# iphone - 检测在 iOs 设备上运行的应用程序并返回描述应用程序类别的数据

> ID：12919316
> 
> 赞同：4
> 
> 时间：2012-10-16T16:30:55.023
> 
> 标签：iphone, objective-c, ios, ipad, ios6

我即将开始一个项目，该项目将帮助教授新词汇，以中断驱动的方式，通过中断呈现新单词，让用户在最佳时间学习。

我正在寻找一种方法来检测正在运行的应用程序。我发现一些帖子涉及检索我的问题的正在运行的应用程序列表部分，“[我们可以检索当前在 iPhone 和 iPad 中运行的应用程序](https://stackoverflow.com/questions/4312613/can-we-retrieve-the-applications-currently-running-in-iphone-and-ipad)”。这仍然可以在 iOS 6 中使用吗？

我找不到任何有关检索有关正在运行的应用程序类型/类别的数据的相关帖子（媒体播放器/游戏/pdf 查看器等）。iOS 应用程序是否包含任何元数据或检索此类数据的方式？

自然，要在最佳时间打断用户，就必须考虑正在使用的应用程序类型。

我对检测何时中断可能是最佳的替代方法持开放态度，并对我目前的计划持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:23:06.147

如此处所述，您可以获取正在运行的进程（也称为应用程序）的列表[，](https://stackoverflow.com/questions/8275578/how-to-get-information-about-free-memory-and-running-processes-in-an-app-store-a)但您无法从操作系统获取有关它们的任何元数据。从用户体验的角度来看，您可能会考虑用户手动安排中断或为您提供计划窗口的解决方案。例如，也许每天 3 点到 4 点之间，开始通知我。就个人而言，我删除垃圾应用程序的速度非常快，所以我会考虑做一些除干扰之外的事情。

# tomcat - 通过带有 Tomcat 实例的 Apache Webserver 服务的多个域；一个网站很慢

> ID：12919317
> 
> 赞同：0
> 
> 时间：2012-10-16T16:30:56.010
> 
> 标签：tomcat, apache2, tomcat6, performance, multiple-domains

我设置 Apache2 以使用虚拟主机服务多个域。目标是在一台机器上的不同 Tomcat 实例下运行 QA 和生产环境。此设置有效，但 Prod 提供的页面比 QA *慢一些，尽管代码库几乎相同且没有流量。*

我首先持有 httpd.conf 配置嫌疑人，只需要了解路由是否正确。我也会介绍这些网站，但我想以此作为第一步。尽管还设置了 MySQL 实例，但在这两种情况下我都没有访问数据库，因此这不太可能成为问题。

我检查了 stackoverflow 上的其他帖子，但没有看到这个特殊的缓慢问题已经出现。想法？

httpd.conf：

```
<VirtualHost *:80>
    ServerName www.theprodservername.com
    ErrorLog logs/prod_error_log
    CustomLog logs/prod_access_log common
    ProxyPreserveHost On
    ProxyPass         /  http://www.theprodservername.com:8083/
    ProxyPassReverse  /  http://www.theprodservername.com:8083/
    <Directory "/">
        Options Indexes FollowSymLinks
        #DirectoryIndex index.jsp
    </Directory>
</VirtualHost>
<VirtualHost *:80>
    ServerName www.theqaservername.com
    ServerAlias theqaserver.com
    ErrorLog logs/qa_error_log
    CustomLog logs/qa_access_log common
    ProxyPreserveHost On
    ProxyPass         /  http://www.theqaservername.com:8081/
    ProxyPassReverse  /  http://www.theqaservername.com:8081/
    <Directory "/">
        Options Indexes FollowSymLinks
        DirectoryIndex auth.jsp
    </Directory>
</VirtualHost>

<!-- Prod server.xml -->
<Connector
port="8083"
        proxyName="www.theprodservername.com"
        proxyPort="80"
        redirectPort="8443"
        minSpareThreads="25"
        connectionTimeout="20000"
        maxSpareThreads="75"
        maxThreads="150"
        maxHttpHeaderSize="8192">
    </Connector>

<!-- QA server.xml -->
    <Connector
        port="8081"
        proxyName="www.theqaservername.com"
        proxyPort="80"
        redirectPort="8443"
        minSpareThreads="25"
        connectionTimeout="20000"
        maxSpareThreads="75"
        maxThreads="150"
        maxHttpHeaderSize="8192">
    </Connector> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:37:11.777

您是否检查了没有 apache 的 tomcat 实例的速度？有什么不同吗？

您的 apache 配置看起来不错。您也可以尝试使用 modjk。

# ios - 使用配置文件防止删除 iOS 应用

> ID：12919320
> 
> 赞同：1
> 
> 时间：2012-10-16T16:31:09.540
> 
> 标签：ios

[我为 iOS](http://mocava.de/ios/parental-control)构建了家长控制。在后台，它只是生成配置文件，然后用户可以安装这些配置文件以强制或放松对设备的限制。

在 iOS 的设置应用程序中，有一个限制阻止用户删除应用程序（请参阅设置 -> 常规 -> 限制 -> 删除应用程序）。但是我在配置文件的[文档](http://developer.apple.com/library/ios/#featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html)中找不到相应的标志。有谁知道这个标志是没有暴露还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:48:56.117

我记得在 Apple Developer Program 的某个地方有一个更好的文档。我相信它涵盖了更多的配置文件（包括 MDM 使用的配置文件）。我不确定是否可以在不通过 MDM 发送的情况下安装它们。但是，您可以尝试一下。

另外，看看 Apple Configurator。它有一些有趣的监督功能，可以很好地配合您的家长控制理念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T12:39:44.870

[此链接](https://developer.apple.com/library/content/featuredarticles/iPhoneConfigurationProfileRef/Introduction/Introduction.html)中可用的有效负载仅适用于配置文件。一旦设备受到监督，您就可以拥有更多功能。

# google-chrome - Webkit 表格单元格的行跨度问题的非脚本解决方法

> ID：12919323
> 
> 赞同：3
> 
> 时间：2012-10-16T16:31:14.540
> 
> 标签：google-chrome, webkit, html-table

对于与单元格行跨度相关的 Chrome/webkit 问题，是否有任何已知的非脚本解决方法高于所有非**跨行行的总和？**因为 Chrome 不会均匀地分配同级行，而是调整最后一行的大小以填充剩余空间。

在不同的浏览器中查看[此示例](http://jsfiddle.net/LRXJx/3/)，您将看到如下图所示的结果。

### 列跨越按预期工作

请注意，列跨越按预期工作。所有列都被扩展以容纳最宽的跨度列。如果其他单元格的宽度均匀，它们也会均匀扩展，但如果它们没有设置宽度，它们会根据它们的内容进行扩展（照常渲染）。

## 示例屏幕截图

外边框显示表格边框，而内边框显示单元格边框。出于显示原因，我没有折叠边框，因此每个元素的边框都与其他元素分开。

### 如 Internet Explorer（令人惊讶）和 Firefox 中所示：

![均匀行分布](../Images/099b4d28df71c570ff30de28185a8bf0.png)

### 如 Chrome（或其他 webkit 浏览器）中所示：

![行分布不均](../Images/5270281e294fe6a6e14f1c475d30bb8c.png)

## 附加观察`rowspan`值大

在我的示例中，有 4 行，第一行中的最后一个单元格跨越所有四个。如果我将该值更改为大于 4，webkit 实际上会呈现不存在的第五行而没有任何单元格。因此，与其扩展第四行以占用所有剩余空间，不如说是第五行不存在的情况。这是 Chrome 中的结果（bot 不在任何其他浏览器中）：

![额外的不存在的行](../Images/5edfaff208a1bcf75673c561a4466fca.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T11:23:03.217

阅读本文时的第一个想法是这样做：

```
<table class="details"><tr><td  >First col</td></tr>
            <tr><td >First col</td></tr>
    <tr><td >First col</td></tr>
    <tr><td >First col</td></tr>
    </table>
<td>Kleke</td> 
```

然后通过 CSS 管理边界（如果需要帮助，请发表评论）

干杯菲利克斯

编辑：我刚刚意识到您要求的年份是 2012 年而不是 2013 年，如果您可以提出更好的替代解决方案，请发布。

# python - 递归值默认更改

> ID：12919327
> 
> 赞同：0
> 
> 时间：2012-10-16T16:31:20.373
> 
> 标签：python, recursion, default

我想确保在每次递归开始时'rep' 不设为 0。在当前点它默认从0开始，但我希望它保存rep+=1的值。

有简单的解决方法吗？

```
def printPattern(n,k,rep =0):
    'prints a pattern of stars'
    if n == k:
        print ('{}{}'.format(' '*rep,'*'*n))
    elif n%2 == 0:
        rep+=1
        print ('{}{}'.format(' '*rep,'*'*n))
        printPattern(n+1,k)
    else:
        rep+=1
        print ('{}*'.format(' '*rep))
        printPattern(n+1,k) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:32:48.093

您可以从在递归调用中实际传递 rep 开始

```
printPattern(n+1,k, rep) 
```

```
def printPattern(n,k,rep =0):
    'prints a pattern of stars'
    if n == k:
        print ('{}{}'.format(' '*rep,'*'*n))
    elif n%2 == 0:
        rep+=1
        print ('{}{}'.format(' '*rep,'*'*n))
        printPattern(n+1,k, rep)
    else:
        rep+=1
        print ('{}*'.format(' '*rep))
        printPattern(n+1,k, rep) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:32:56.567

```
 rep+=1
    print ('{}{}'.format(' '*rep,'*'*n))
    printPattern(n+1,k, rep) 
```

如果您将新值`rep`作为第三个参数传递，则不会使用默认值 0。

所以，当你第一次调用这个函数时，你实际上可以跳过使用第三个参数，然后将使用默认值。但是下一次，对这个函数的每次递归调用都将`rep`作为第三个参数，作为当前值传递`rep`

# python - 多个从左到右的选择字段

> ID：12919328
> 
> 赞同：2
> 
> 时间：2012-10-16T16:31:21.290
> 
> 标签：python, django, field

我想问一下 Django 中是否有任何字段（如下面所附的字段）作为单个对象可用。如果不是，那么我们如何生成将所选项目移动到右侧的这种功能。

请指导，我将非常感谢。

![在此处输入图像描述](../Images/aeeb7bc84d81c8baf210d9d9b81e9f9d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T17:45:14.090

您可以使用 Django 的[`FilteredSelectMultiple`](https://github.com/django/django/blob/master/django/contrib/admin/widgets.py#L21)小部件，如在 django-admin 中使用时[`filter_horizontal`](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.filter_horizontal)所见`ManyToManyField`：

![在此处输入图像描述](../Images/9e1126fe965e7d2a4fd69292740fd363.png)

这是一个用自己的表单自己做的例子：http: [//djangosnippets.org/snippets/2466/](http://djangosnippets.org/snippets/2466/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:39:56.007

我会在 JS 的客户端执行它，如下所示： http: [//www.developergeekresources.com/examples/javascript/javascript-listbox_to_listbox.php](http://www.developergeekresources.com/examples/javascript/javascript-listbox_to_listbox.php)

# c# - 更改旋转手指上的旋转点已更改

> ID：12919332
> 
> 赞同：0
> 
> 时间：2012-10-16T16:31:35.760
> 
> 标签：c#, wpf, rotation, multi-touch, pixelsense

我有一个多点触控 WPF 应用程序，我想在其中旋转一些东西。的问题`ManipulationDelta`，`ManipulationOrigin`始终是两根手指之间的中心，但我想用移动的手指围绕固定的手指旋转。

示例：**Finger1**固定在屏幕上，**Finger2**围绕它旋转，需要以**Finger1**点为中心旋转。然后**Finger2**固定，**Finger1**转动——现在以**Finger2**点为中心旋转。所有这些都是在一次`ManipulationStarted`和之间完成的`ManipulationCompleted`，因为手指总是在屏幕上。

现在我正在尝试计算旧位置和新位置之间的矢量，并围绕手指旋转，该位置变化最小。它有效，但不是很好。

任何想法如何以更好的方式在每一刻获得正确的旋转点？

**UPD：** MSDN 示例的问题（Clemens 的代码） - Finger1 下的矩形改变了它的位置，而 Finger1 已修复。

Finger1 和 Finger2 固定在屏幕上。 ![两根手指在屏幕上](../Images/e57f9cd65c5fde444bec3697b3bf1392.png)

Finger2 围绕 Finger1 旋转 ![手指 2 围绕手指 1 旋转](../Images/fb0cf4f032fbcf3b99e424b92c3aedf0.png)

**UPD2：** 如果我旋转`e.Menipulators.First().GetPosition(RotatingControl)`一切都可以。问题，那个手指可以改变，我需要知道现在哪个手指在移动。这不是一个难题。但有时两个手指都会旋转——在这种情况下，旋转应该发生在`ManipulationOrigin`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:16:12.830

当通过 提供的值变换对象时`ManipulationDeltaEventArgs`，您通常会更新变换矩阵。这可能是用作 RenderTransform 的 MatrixTransform的[Matrix属性，如下所示。](http://msdn.microsoft.com/en-us/library/system.windows.media.matrixtransform.matrix.aspx)

```
<Rectangle ...>
    <Rectangle.RenderTransform>
        <MatrixTransform x:Name="transform"/>
    </Rectangle.RenderTransform>
</Rectangle> 
```

该矩阵将根据 ManipulationDelta 事件处理程序中的平移、旋转和缩放增量值进行更新，如下所示：

```
ManipulationDelta d = e.DeltaManipulation;
Matrix m = transform.Matrix;
m.Translate(d.Translation.X, d.Translation.Y);
m.RotateAt(d.Rotation, e.ManipulationOrigin.X, e.ManipulationOrigin.Y);
m.ScaleAt(d.Scale.X, d.Scale.Y, e.ManipulationOrigin.X, e.ManipulationOrigin.Y);
transform.Matrix = m; 
```

这种转换将与您的固定和移动手指完美配合，除了它不仅可以旋转，还可以移动和缩放对象。如果您放弃`m.ScaleAt(...)`呼叫并获得仍然接近您想要的变换，则可以省略缩放，只要手指之间的距离变化不大。

但是，仍然有运动，但这是您无法摆脱的。想象一下，您首先固定手指 1，然后旋转 180°，然后固定手指 2 并再次旋转 180°。显然总旋转为零，但物体已经移动。

# c# - 尝试使用 .Net 保护 Windows 上的目录

> ID：12919334
> 
> 赞同：1
> 
> 时间：2012-10-16T16:31:41.233
> 
> 标签：c#, .net, windows

我试图让我的 C# 程序保护 Windows 机器上的本地现有目录。出于安全原因，我只希望管理员组中的帐户有权访问此文件夹。现有文件夹是我的程序之前创建的文件夹，将由当前运行的用户拥有，因此我需要为 admin 组添加权限，然后删除当前用户的权限。

我可以将管理员组的权限添加到文件夹中，但我不知道如何删除当前用户的权限。我给予管理员组权限如下：

```
DirectorySecurity directorySecurity = new DirectorySecurity();
IdentityReference adminId = new SecurityIdentifier(WellKnownSidType.BuiltinAdministratorsSid, null);
FileSystemAccessRule adminAccess = new FileSystemAccessRule(
    adminId,
    FileSystemRights.FullControl,
    InheritanceFlags.ObjectInherit | InheritanceFlags.ContainerInherit,
    PropagationFlags.None,
    AccessControlType.Allow);
directorySecurity.AddAccessRule(adminAccess);

// set the owner and the group to admins
directorySecurity.SetOwner(adminId);
directorySecurity.SetGroup(adminId);

Directory.SetAccessControl("path-to-my-directory", directorySecurity); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T15:44:26.207

我现在看到了真正的问题。您已经通过将目录安全设置为全新对象而不是获取现有目录安全并对其进行修改来有效地删除其他用户的访问权限，但是您的目录仍然从父目录获得继承的权限。

您需要在新目录安全对象上删除父继承。您可以通过[SetAccessRuleProtection](http://msdn.microsoft.com/en-us/library/system.security.accesscontrol.objectsecurity.setaccessruleprotection.aspx)方法执行此操作。您可以按原样使用上面的代码，但在对目录设置访问控制之前添加此行。

```
directorySecurity.SetAccessRuleProtection(true, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T16:20:20.850

请参阅我对[这个问题](https://stackoverflow.com/questions/12354481/inherited-permissions-lost-while-giving-ntfs-permissions)的回答。它解释了您必须编写以修改文件系统权限的代码。如果您不执行所有列出的步骤，您将无法成功修改文件系统上的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:44:14.133

[您需要使用此处](http://msdn.microsoft.com/en-us/library/system.security.accesscontrol.directorysecurity.aspx)定义的 RemoveAccessRule* 方法之一删除包含当前用户访问权限的访问规则。

或者你可以添加一个访问规则来拒绝当前用户的访问，但我总是尽量远离拒绝规则。通常不授予访问权限比拒绝访问要好（除非它真的打算完全拒绝访问，例如财务记录或其他敏感信息）。仅供参考，拒绝访问规则将覆盖所有授予访问规则。

# java - JPA 实体具有多个相同类的对象

> ID：12919337
> 
> 赞同：1
> 
> 时间：2012-10-16T16:32:21.337
> 
> 标签：java, mysql, hibernate, jpa, jpa-2.0

```
@Entity
public class A {

    //should be mapped by a                         
    public B b1;
    //should be mapped by a
    public B b2;

}

@Entity
public class B {
    @ManyToOne
    public A a;
} 
```

我可以实现这样的目标吗？我知道我可以使用`long b1_id`and `long b2_id`in`class A`但我只是想看看是否有办法立即使用该对象。基本上，`class A`将恰好有 2 个`class B`. 它不在集合中，所以我不能使用`@OneToMany`. `Class B`总是映射到单个 A。

db 表应该是这样的：

```
A
id | b1_id | b2_id

B
id | a_id 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:48:23.910

是的，那应该没问题。使用适当的`filter`条件。有关详细信息，请参阅[**Hibernate 过滤器**](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/filters.html)。

# tsql - SQL 非聚集索引设计

> ID：12919339
> 
> 赞同：0
> 
> 时间：2012-10-16T16:32:29.190
> 
> 标签：tsql, indexing, sql-server-2008-r2

有一张大桌子T

*   `sID Int PK`
*   `pos Int PK`
*   `wID Int PK`

自加入

*   `T2.sID = T1.sID`
*   `T2.pos = T1.pos + 1`
*   `T1.wID = 'alpha'`
*   `T2.wID = 'beta'`

添加了一个索引`(wID, sID)`，果然有帮助（很多）

在执行计划中注意到输出是 sID, pos

所以将索引更改为`(wID, sID, pos)`.

令我惊讶的是查询计划保持不变并且执行时间没有改善

所以将索引更改为`(wID)`

相同的查询计划和相同的执行时间

显然将使用较小的索引以获得相同的性能

我的问题是为什么较小的索引同样有效？

是不是因为那个额外的数据就是PK？

# android - 关于让 xxhdpi 在 android 模拟器中工作的任何建议？

> ID：12919341
> 
> 赞同：7
> 
> 时间：2012-10-16T16:32:34.113
> 
> 标签：android

我尝试手动配置 AVD 以支持 xxhdpi (480 dpi)，但是 android 模拟器在 xhdpi (320 dpi) 时最大。

是的，文档说 xhdpi 会扩展，但是，我希望看到它工作。

我目前正在尝试从源代码构建android，看看我是否可以手动调整任何东西。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-06T09:59:34.720

这可以在模拟器启动后通过一些额外的 adb-commands 来完成。取自 developer.sonymobile.com ( [http://developer.sonymobile.com/knowledge-base/sdks/sony-add-on-sdk/install-the-sony-add-on-sdk/](http://developer.sonymobile.com/knowledge-base/sdks/sony-add-on-sdk/install-the-sony-add-on-sdk/) )的安装故障排除页面，以下语句可用：

> 在 Android SDK Tools 版本 21.1 中，尚不支持模拟器显示的 xxhdpi 屏幕分辨率。但是，您可以手动覆盖模拟器的 LCD 属性。这将确保为 Xperia™ Z 模拟器分配正确的资源。为此，请在 Xperia™ Z 模拟器完成启动序列后在命令行中执行以下命令：
> 
> > adb shell setprop qemu.sf.lcd_density 480
> > 
> > adb 外壳停止
> > 
> > adb 外壳启动
> 
> 然后模拟器将重新启动。重新启动后，模拟器应该使用正确的屏幕密度和 UI 缩放。如果您经常使用这些设置，我们建议您使用批处理文件或 shell 脚本来执行这些命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-15T07:22:59.830

正确的方法是将 AVD 设置设置为 Use Host GPU。不幸的是，此快照将被禁用。使用 SDK 工具 22.3 确认

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T10:06:25.407

![为 xxhdpi 模拟器使用这个 make avd](../Images/718e5869e81bcd5ea257555d70130486.png) 为了使 xxhdpi avd 使用它。

# c#-4.0 - RaisepropertyChanged 的 MVVM 灯光目标

> ID：12919342
> 
> 赞同：0
> 
> 时间：2012-10-16T16:32:38.033
> 
> 标签：c#-4.0, mvvm, mvvm-light

我在侦听器对象中有以下代码，以评估此消息是否针对该侦听器：

```
 (this, (action) => { if (action.Target.GetType() == typeof(MainViewModel) && (action.PropertyName == "EditionMode" )) 
```

发件人代码：

```
set
         //  ...
               RaisePropertyChanged(() => MyProperty, oldValue, value, true);
         //  ... 
```

但我找不到合适的重载来设置目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:03:21.837

要调用 RaisePropertyChanged，您只需将属性名称作为字符串参数传递：

```
RaisePropertyChanged("MyProperty"); 
```

# matlab - Matlab：如何在 plot3() 函数中平滑矩阵的颜色？

> ID：12919345
> 
> 赞同：0
> 
> 时间：2012-10-16T16:32:48.950
> 
> 标签：matlab, colors, plot, smooth

我正在使用 plot3 绘制一个矩阵，以便生成的图形为该矩阵的每个向量显示不同的颜色：

```
plot3(Grid.x1(:,:),Grid.x2(:,:),phi(:,:)) 
```

![在此处输入图像描述](../Images/e7f14b2976e9cf860ce3d0bcf271958e.png)

我怎样才能平滑这个情节的着色？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T16:57:45.030

您可以使用[FileExchange](http://www.mathworks.com/matlabcentral/fileexchange/21050)中的 varycolor 来构建和控制连续范围的色谱。这样，不同线条之间的过渡看起来会更自然，并且近端线条将具有相似的颜色。

您可以在此处阅读更多信息并查看示例用法[http://blogs.mathworks.com/pick/2008/08/15/colors-for-your-multi-line-plots/](http://blogs.mathworks.com/pick/2008/08/15/colors-for-your-multi-line-plots/)

**示例**：

```
[X,Y,Z] = peaks(128);

% raw plot3()
figure; plot3(X, Y, Z); 
```

![在此处输入图像描述](../Images/a6ad8fb2f48beceee9483cd505d6f9aa.png)

```
% define set equal to line number
ColorSet = varycolor(128);

% smooth plot3()
figure; hold all;
set(gca, 'ColorOrder', ColorSet);
plot3(X, Y, Z); view(3); 
```

![在此处输入图像描述](../Images/451bdc1789bffe3c2305b05833137d57.png)

**更新**：对于连续的 3D 图（即表面），您可以使用`surfl`而不是`plot3`将数据显示为 3-D[表面图（带阴影）](http://www.mathworks.com/products/matlab/examples.html?file=/products/demos/shipping/matlab/graf2d2.html#3)。`colormap`您可以在生成的表面上附加任何应用，即`gray`或`ColorSet`如上所述。

```
surfl(X,Y,Z);
shading interp;
colormap(gray); 
```

![在此处输入图像描述](../Images/b5cd5b964885fa57f29e93230d17781b.png)

# c - ev_loop 在 libev 中声明在哪里？

> ID：12919346
> 
> 赞同：0
> 
> 时间：2012-10-16T16:32:53.943
> 
> 标签：c, libev

我正在研究libev，ev_loop是libev的一个非常重要的组成部分。但是我搜索了libev源代码，找不到struct ev_loop的定义。

那么，ev_loop 应该是什么样子的呢？

```
struct ev_loop {
  /* anything here? */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:44:57.530

ev.c 的第 1501 行和所有 ev_vars.h

```
 struct ev_loop
  {
    ev_tstamp ev_rt_now;
    #define ev_rt_now ((loop)->ev_rt_now)
    #define VAR(name,decl) decl;
      #include "ev_vars.h"
    #undef VAR
  }; 
```

# css - 谷歌用于 Gmail 和其他产品的 CSS 格式化程序？

> ID：12919348
> 
> 赞同：1
> 
> 时间：2012-10-16T16:32:59.220
> 
> 标签：css

Google 将什么 CSS 格式化程序用于 Gmail 等产品？是公开的吗？

据我了解，闭包编译器仅支持 CSS 缩小。

背景：我正在寻找一个 CSS3 格式化程序，并认为 Google 可能是一个好的开始，因为 CSS Tidy 不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:44:49.193

不知道他们用什么。您可以尝试在线[tabifier](http://tools.arantius.com/tabifier)。[对于我的项目，我在 CSS / JS / HTML 文件中使用Visual Studio 2012 Express for web](http://microsoft.com/visualstudio/eng/downloads#d-express-web) （免费）中的Ctrl+K、Ctrl+D 快捷方式，它会进行文档格式化。此外，它还显示了带有标准和供应商前缀规则的 CSS 属性的智能感知和代码片段[等等](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)。

示例输入：

```
div.tree{background-color:lime}div.tree>div.node{line-height:2px}div.tree>div.node:first-child{margin-top:13px}div.tree>div.node li:before{content:"-->"}p#copyright{line-height:15px} 
```

输出（Ctrl+k，Ctrl+d）：

```
div.tree {
    background-color: lime;
}

    div.tree > div.node {
        line-height: 2px;
    }

        div.tree > div.node:first-child {
            margin-top: 13px;
        }

        div.tree > div.node li:before {
            content: "-->";
        }

p#copyright {
    line-height: 15px;
} 
```

截屏：

![在此处输入图像描述](../Images/fc77fa670916d461592774d4ea5977ad.png)

# linux - 如何选择特定的行和列

> ID：12919352
> 
> 赞同：3
> 
> 时间：2012-10-16T16:33:15.490
> 
> 标签：linux, shell, sed, awk, cut

我需要选择例如：

*   第 7 行的第 2 列。
*   第 8 行的第 3 列。
*   第 11 行的第 1 列和第 3 列。

的特定文件并将结果放在另一个文件中。

这是我到目前为止所尝试的：

```
sed -n -e '7p' -e '8p' -e '11p' Old_File | awk '{printf("%s %s %s\n", $2, $3, $1);}' > New_File. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T16:37:14.117

单独 awk 可以完成它：

```
awk 'NR==7{print $2} NR==8{print $3} NR==11{print $1, $3}' Old_file > New_file 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T16:37:09.387

`Awk`足以完成该任务：

```
awk '
    FNR == 7 { print $2; next; }
    FNR == 8 { print $3; next; }
    FNR == 11 { print $1, $3; exit; }
' input-file 
```

# jquery - jQuery 自动检测我是否需要使用 .html() 或 .val()

> ID：12919360
> 
> 赞同：10
> 
> 时间：2012-10-16T16:33:45.137
> 
> 标签：jquery

我正在编写一个 jquery 插件来创建为我的应用程序设计的 ajax 调用。

在这个插件中，我的 ajax 调用看起来像这样（简化为问题需要）：

```
 $.ajax({
        url: route,
        type: "post",
        data: inputData,
        success: function(response, textStatus, jqXHR) {
            if (outputSelector !== undefined) {

                $(outputSelector).html(response);
                // or
                $(outputSelector).val(response);

            }
        }
    }); 
```

outputSelector 是一个选择器，在插件外部定义。我不知道这个选择器是 a`<div>`还是 an`<input>`甚至是 a `<select>`。有没有一种聪明的方法可以知道我是否需要使用 val() 或 html() ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-16T16:38:37.510

可能我们可以检查元素是否具有`value`属性：

```
var el = $(outputSelector);
if (el[0].value !== undefined) {
    el.val(response);
} else {
    el.html(response);
} 
```

因此，有点像一条通用解决方案可能是：

```
$(outputSelector).each(function() {
    this[this.value !== undefined ? "value" : "innerHTML"] = response;
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T16:43:12.613

如果`outputSelector`是类选择器，并且元素是混合类型，则需要使用`.each`. `div`虽然混用和`input`同一个类不好，但是如果你在创建一个插件，你需要考虑这种情况。

```
$(outputSelector).each(function() {
    if ('value' in this) {
        $(this).val(response);
    } else {
        $(this).html(response);
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T16:39:09.343

您可以使用`.is(..)`方法来确定使用哪种方法。

```
$.ajax({
    url: route,
    type: "post",
    data: inputData,
    success: function(response, textStatus, jqXHR) {
        if (outputSelector !== undefined) {
            var $output = $(outputSelector),
                method = $output.is('input,select,textarea') ? 'val' : 'html';

            $output[method](response);
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T16:50:10.117

您还可以使用[.prop()](http://api.jquery.com/prop/)方法来确定是否为给定的选择器定义了属性：

```
if ($(outputSelector).prop("value") !== undefined)
  $(outputSelector).val(response);
else
  $(outputSelector).html(response); 
```

**[例子](http://jsfiddle.net/73nf8/)**

或者你可以我们[.hasOwnProperty()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/hasOwnProperty?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Reference/Global_Objects/Object/hasOwnProperty)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-16T16:40:44.523

在您的成功函数中，输入：

```
if (outputSelector !== undefined) {
    if(outputSelector.is("input"))
    {
        outputSelector.val(response);
    } 
    else if (outputSelector.is("div"))
    {
        outputSelector.html(response);
    }
} 
```

使用 switch 语句会是更好的语法，但如果您假设只有输入将用于`val()`，那么其他所有内容`html()`只需将最后一个替换为`else if`just`else`并删除条件。

# c#-4.0 - 如何为 NHibernate LINQ 语句设置超时

> ID：12919361
> 
> 赞同：12
> 
> 时间：2012-10-16T16:33:50.853
> 
> 标签：c#-4.0, linq-to-nhibernate

我正在为我的 ORM 使用 Fluent NHibernate。在这样做时，我试图使用 NHibernate LINQ 语法来获取一组具有 LINQ 功能的数据。我的代码可以正常工作并正确执行，但如果运行时间超过大约 30 秒，则会引发超时。我的问题是如何通过 NHibernate 延长 LINQ 语句的默认 30 秒超时？

我已经看过[这里](https://stackoverflow.com/questions/12406717/linq-timeout-timeout-expired)、[这里](https://stackoverflow.com/questions/11821236/sql-timeout-expired)和[这里](https://stackoverflow.com/questions/2519754/setting-linq-to-nhibernate-ado-command-timeout)的帖子，但是前两个是指设置 DataContext 的 Timeout 属性，此处不适用，第三个是指在 XML 中设置超时，这也不适用，因为我正在使用流畅的 NHibernate 动态生成 XML。不仅如此，该帖子已有 2 年历史，并且 Fluent NHibernate 已经发生了变化。

使用 ICriteria 对象甚至 HQL，我可以指定超时，但这不是这里的目标。我想知道如何设置相同的超时并使用 LINQ。

示例代码：

```
 using (var session = SessionFactory.OpenSession())
    using (var transaction = session.BeginTransaction())
    {
        var query = (from mem in session.Query<Member>()
                     select mem);
        query = query.Where({where statement});
        int start = (currentPage - 1) * max);
        if (start > 0)
            query = query.Skip(start).Take(max);
        else
            query = query.Take(max);

        var list = query.ToList();
        transaction.Commit();
        return list;
    } 
```

此代码（where 语句无关紧要）适用于所有目的，除非发生超时。

任何帮助表示赞赏。提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-18T14:15:11.980

我最终为 Fluent NHibernate 的配置设置了命令超时。这样做的缺点是它为我的所有数据访问调用设置了超时，而不仅仅是一个。

示例代码：

```
.ExposeConfiguration(c => c.SetProperty("command_timeout", (TimeSpan.FromMinutes(10).TotalSeconds).ToString())) 
```

我从[这个](https://groups.google.com/forum/?fromgroups=#!topic/fluent-nhibernate/gi5O00uFYzE)网站上找到了这个建议。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-03T03:31:30.403

Nhibernate 扩展了 IQueryable 并添加了一些方法[https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/Linq/LinqExtensionMethods.cs](https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/Linq/LinqExtensionMethods.cs)

```
var query = (from c in Session.Query<Puppy>()).Timeout(12); 
```

或者

```
var query = (from c in Session.Query<Puppy>());

query.Timeout(456); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-21T08:20:28.813

我刚刚花了相当多的时间来解决这个问题，希望这可以为其他人节省一些时间。

您应该`.Timeout(120)`在最后一刻使用方法调用以确保它被使用。TBH 我不能 100% 确定为什么会这样，但这里有一些例子：

将工作

```
query = query.Where(x => x.Id = 123);

var result = query.Timeout(120).ToList(); 
```

不工作

```
query.Timeout(120);

query = query.Where(x => x.Id = 123);

var result = query.ToList(); 
```

如果像第二个（不工作）示例那样完成，它似乎会退回到默认的 System.Transaction.TransactionManager.DefaultTimeout。

# javascript - $find() 为定义的 ajax 行为返回 null

> ID：12919363
> 
> 赞同：0
> 
> 时间：2012-10-16T16:33:56.057
> 
> 标签：javascript, asp.net, ajaxcontroltoolkit, behavior, extender

全部，

**环境：ASP.NET 2.0，AjaxToolkit build 1.0.20229.0，IE9**

我正在使用 $find() 来查找调用扩展器的行为，因此我可以使用 .show() 方法显式显示。不幸的是，$find() 返回 null。

```
 $find('my auto generated behvaiour Id').show(); 
```

仅供参考：ValidatorCalloutExtender 上的 BehaviorID 是使用控件的 ClientID 生成的（ClientID_ + "BehaviourID" <- 也是我在 $find() 函数中使用的），因为我在同一页面上有许多此控件的实例。

我查看了呈现的代码，我可以看到创建行为的 JS：

```
Sys.Application.add_init(function() {
$create(AjaxControlToolkit.ValidatorCalloutBehavior ... 
```

$find() 在 UpdatePanel 中的回发之后执行并始终返回 null。

编辑（添加）：我创建了新页面，下面是代码，find() 返回仍然为空，- ASP.NET 2.0 的 Ajax 控件中是否存在错误？

```
<body>
<form id="form1" runat="server">

<asp:ScriptManager ID="ScripManager1" runat="server" EnablePageMethods="True" >

        </asp:ScriptManager>

    <asp:TextBox runat="server" ID="txtInputField" />
    <asp:RequiredFieldValidator runat="server" ID="valInput"
ControlToValidate="txtInputField"
ErrorMessage="ERROR STRING"
Display="none" /> <ajaxToolkit:ValidatorCalloutExtender runat="server" ID="extValInput" TargetControlID="valInput" BehaviorID="myID" />
<asp:Button runat="server" ID="btn" OnClick="btn_click" CausesValidation="True" />

<script type="text/javascript">

        var obj = $find("myID");
        alert(obj);

</script>
</form> 
```

添加：在 JS 调试器中观察后，我意识到验证器标注扩展器仅在出现错误时出现（动态添加到 DOM），因此，如果没有错误，您将找不到它。

**现在的问题是**：如何在显示之前重新定位呼出扩展气球？真的是catch 22，不显示时无法访问，显示时已经晚了，因为它显示在错误的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T19:43:27.200

问题的原因是您在页面完成组件初始化之前尝试查找组件。尝试在 Sys.Application.add_load 事件处理程序中访问您的编辑器。我尝试了以下代码，一切正常：

```
<script type="text/javascript">
    Sys.Application.add_load(function() {
        var obj = $find("myID");
        alert(obj);
    });
</script> 
```

***编辑：*** 解决您的最新问题：如何重新定位它。Callout ValidatorCalloutExtender 使用 PopupExtender 来显示它。因此，您可以尝试绑定到弹出扩展器的“显示”和“显示”事件，然后尝试重新定位标注。

```
<script type="text/javascript">
    Sys.Application.add_load(function() {
        var callouotComponent = $find("myID");
        var popupBehavior = callouotComponent._popupBehavior;

        popupBehavior.add_showing(function(){alert("I am showing");});
        popupBehavior.add_shown(function(){alert("I was shown");});
    });
</script> 
```

注意：我没有验证此代码，但它可以用作起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T05:35:53.430

修改您的代码并验证，弹出位置正在改变。

```
<script type="text/javascript">
    Sys.Application.add_load(function () {
      var callouotComponent = $find("myID");
      //Below line is to init popup ballon, otherwise popup behaviour will return null
      callouotComponent._ensureCallout();
      var popupBehavior = callouotComponent._popupBehavior;
      popupBehavior.set_x(100);
      popupBehavior.set_y(100);
    });

</script> 
```

# sublimetext2 - 使用 SublimeREPL 和 Sublime Text 2 将文本发送到 REPL

> ID：12919365
> 
> 赞同：4
> 
> 时间：2012-10-16T16:33:58.507
> 
> 标签：sublimetext2, sublimerepl

我无法开始使用 SublimeREPL。我有一个 python 程序，可以在 SublimeText2 中启动一个 python 解释器。

但是，我想使用 Eval In Repl 和 Transfer to Repl 功能，但它们似乎没有做任何事情。如何在 sublime text 2 中将 repl 与我的文件相关联，这样它们才能工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T18:43:33.187

# 历史

老实说，python 的 eval 从来没有可靠地工作过。它被奇怪的编译错误所困扰（主要是由空格/空白行引起的）和在评估过程中出现的数十个不必要的“>>>”提示。

我使用临时文件修复它的尝试只取得了一定程度的成功，并且由于能够通过 ssh 运行远程 Python 完全失败了：[http ://www.youtube.com/watch?v=zodAqBvKQm0](http://www.youtube.com/watch?v=zodAqBvKQm0)

# 现在

然而，似乎我终于破解了它:)（有一个令人惊讶的简短解决方案，感觉很糟糕，但 AFAICT 应该比前一个更可靠几个数量级，好奇的链接：[https ://github.com/wuub/ SublimeREPL/blob/master/text_transfer.py#L43](https://github.com/wuub/SublimeREPL/blob/master/text_transfer.py#L43) )

# 如何

1.  安装 SublimeREPL 1.2.0（+- 10 分钟前发布）
2.  运行 Python REPL（任何你想要的，w/ 或 w/o virtualenv）
3.  聚焦您要评估的文件
4.  `Tools -> SublimeREPL -> Eval in REPL -> File` 或者`[Ctrl+, f]`
5.  使用其他选项（行评估应该很有用，您希望评估的每一行中只需要一个光标，请尝试`[Ctrl+Alt+<down-arrow>]`）
6.  ...
7.  利润！:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-14T21:08:06.423

我有同样的问题，即 SublimeREPL 不会评估文件或选定的行。令人惊讶的是，这奏效了：

1.  删除 REPL（首选项-> 包控制-> 删除包）
2.  退出并重新启动 Sublime Text
3.  安装 REPL（首选项-> 包控制-> 安装包）
4.  退出并重新启动 Sublime Text

瞧！

# zeromq - 如何设置 pyzmq 套接字排队超时

> ID：12919372
> 
> 赞同：4
> 
> 时间：2012-10-16T16:34:30.667
> 
> 标签：zeromq, pyzmq

我已经连接了 zeromq，“msg_in”已经排队。如果在该时间段内没有新消息队列到来，则设置超时。如何设置超时。以下是核心代码

```
requestDict = {"id":111, "name":"test"}
zmqConn.mSocket.send(json.dumps(requestDict), flags=zmq.NOBLOCK)
msg_in = zmqConn.mSocket.recv() 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T16:13:42.687

您应该使用 Poller 进行超时：

```
import zmq
p = zmq.Poller()
p.register(zmqConn.mSocket, zmq.POLLIN)

msgs = dict(p.poll(timeout)) 
if zmqConn.mSocket in msgs and msgs[zmqConn.mSocket] == zmq.POLLIN:
   # recv there
else:
   # timeout 
```

# visual-studio-2010 - 多个监视器上的 Visual Studio 选项卡组

> ID：12919376
> 
> 赞同：1
> 
> 时间：2012-10-16T16:34:38.787
> 
> 标签：visual-studio-2010, user-interface, tabs, multiple-monitors

我目前的设置有一台大显示器和一台小显示器。我扩展了 VS 2010 以填充两个显示器，并且我在较大的和较小的上设置了两个水平选项卡组。问题是，每次我运行程序时，VS 都会自动重新定位分隔线，使它们在组合的监视器空间中均匀分布，导致中间面板从中间分开。然后我必须将分隔线移回我想要的位置——一个在屏幕之间，一个在大屏幕的中间。然后当我停止程序时，它会再次重置它们，我必须不断地重复这个过程，这不仅真的很烦人，而且在处理我目前正在处理的非常大的代码库时速度很慢而且反应迟钝。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:37:37.700

这并不是您问题的确切答案，但也许您只需抓住选项卡并将其拖到另一台显示器上会更好。它基本上就像一个在另一台显示器上保持打开的新窗口。形成那个选项卡你可以建立一个选项卡组吗？

同样，不确定这是否会有所帮助，但我就是这样做的。

正如[Scott Gu解释的那样](http://weblogs.asp.net/scottgu/archive/2009/08/31/multi-monitor-support-vs-2010-and-net-4-series.aspx)

# c++ - 在 C++ (Linux) 中播放哔哔声

> ID：12919378
> 
> 赞同：4
> 
> 时间：2012-10-16T16:34:43.567
> 
> 标签：c++, beep

> **可能的重复：**
> [在 C 中的 Linux 上发出哔哔声](https://stackoverflow.com/questions/10072909/beep-on-linux-in-c)

我一直在寻找一种在 Linux 中播放简单哔声的方法，但我发现的所有方法都不起作用。

我试过 \a, \b \7 但有人会发出哔哔声。

我想在不使用声音库的情况下播放它，稍后我将使用任何库将哔声更改为真实的声音，但现在我只想播放哔声以进行测试

正如我所说，我使用的是 Linux（确切地说是 LMDE），所以不能使用最简单的 Windows 方法（包括 windows.h 和 Beep()）。

那么我该如何实现呢？系统调用或类似的东西。

编辑：我结束了用 Java 做它，我已经让它工作了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T16:48:13.207

尝试包括 ncurses.h

```
#include <ncurses.h>

beep(); 
```

使用 -lncurses 标志编译

参考：http: [//invisible-island.net/ncurses/man/curs_beep.3x.html](http://invisible-island.net/ncurses/man/curs_beep.3x.html)

还有这个问题：[用c ++发出声音（哔哔声）](https://stackoverflow.com/questions/4060601/make-sounds-beep-with-c)

**编辑**：

试试这个命令行

> sudo sh -c "echo -e '\a' > /dev/console"

也可以试试[http://www.linuxplayer.org/2010/04/beep-your-pc-speaker-in-linux给出的代码](http://www.linuxplayer.org/2010/04/beep-your-pc-speaker-in-linux)

```
int ms = 5000;
int freq = 440;
ioctl(fd, KDMKTONE, (ms<<16 | 1193180/freq)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:42:32.723

你试过`echo -e "\a"`吗？
你也可以试试： `echo -ne '\007'`

还有一个`beep`命令行工具，您应该能够使用您的发行包管理系统进行安装。

它应该会导致终端发出哔哔声。
我已经在几个 Linux 发行版上对其进行了测试，并且似乎可以正常工作。

# c++ - 在 Cocoa 中正确实现四元数计算？

> ID：12919381
> 
> 赞同：0
> 
> 时间：2012-10-16T16:34:58.380
> 
> 标签：c++, objective-c, class, quaternions

在我的程序中，我正在处理使用 CMMotionManager 跟踪设备运动并使用设备姿态的四元数表示。为了在全局坐标系中定位设备，我需要做一些涉及四元数的基本计算。为此，我想编写一些实现了所有需要的功能的四元数类。有人知道什么是正确的方法，或者可能是一些一般指导方针应该如何做。我从 Apple 找到了一个示例项目，其中包含用 cpp 编写的 Quaternion、Vector2 和 Vector3 类，但我认为在 Cocoa 中使用它们并不是很容易，因为我无法在 Obj-C 标头中定义对象的属性使用这些 c++ 类的文件。还是我错了？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:51:29.967

您很可能对 OpenGL 根本不感兴趣，但作为 GLKit 的一部分，Apple 提供了[`GLKQuaternion`](http://developer.apple.com/library/ios/documentation/GLkit/Reference/GLKQuaternion/Reference/reference.html). 它有一个 C 接口，但应该很容易外推到一个类中。建议使用它而不是直接表达数学，因为它可能尽可能充分地使用数学向量单元。

或者，您可以直接声明 C++ 和 Objective-C 对 GLKQuaternion 的使用，因为这两个都是超集 C。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:54:30.680

你在这里问了多个问题。如何实现 Quaternion 类，如何使用它们来表示方向（态度），如何将 C++ 实现与 Objective C 集成，如何将所有这些集成到 Cocoa 中。我会用一个问题来回答最后一个问题：Cocoa 真的需要知道你在后台使用什么来代表态度吗？

有很多现有的包使用四元数来表示三维空间中的方向。艾根就是其中之一。还有很多其他的。不要重新发明轮子。您确实需要注意一些问题，尤其是在使用第三方软件包时。请参阅[从四元数查看矩阵](https://stackoverflow.com/questions/12777675/view-matrix-from-quaternion/12782616#12782616)。如果您向下滚动并查看其他一些答案，您会发现其他人提到的两个包都受到我在回答中谈到的问题的影响。

请注意：我并不是说不要使用四元数。那将是相当虚伪的；我一直在使用它们。它们作为表示旋转的紧凑方式工作得非常好。您只需要提防问题，主要是因为太多使用它们/为他们实施软件的人对这些问题一无所知。

# java - 运行多个 PlayN 游戏实例时出现奇怪的错误

> ID：12919383
> 
> 赞同：3
> 
> 时间：2012-10-16T16:35:08.813
> 
> 标签：java, multiplayer, playn, multiplatform

我目前正在开发一款多人游戏，我通常会启动一个服务器加上我的 playn 游戏的 4 个实例。
当同时打开多个实例时，所有实例的所有动画和图层中都会开始出现奇怪的错误。（闪烁，错误的动作，屏幕上的东西跳跃）
似乎所有实例都共享一个共同的状态（也许是openGL？）并且它们相互影响。
我在 Windows 上，我使用 linux (ubuntu) 的同事也有同样的问题。任何提示？这是一个错误吗？或 Windows 实现的已知限制提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:51:01.870

据我所知，这是一个仅限 Windows 的错误。在 Mac、Linux 和任何其他 Unix 处理器上，它都能完美运行。此外，您应该尝试更新您的 JVM，它可能会更好。

# clojure - Clojure多方法，如何添加数据？

> ID：12919384
> 
> 赞同：2
> 
> 时间：2012-10-16T16:35:08.777
> 
> 标签：clojure, multimethod

首先，我是 Clojure 的新手，所以这可能是个愚蠢的问题。

作为一个学习练习，我有一个简单的文本冒险多方法系统工作。我现在想从使用关键字更改为某种形式的“classiness”，它可以保存与“sack”、“sword”等各个实例有关的数据。

是`defrecord`去这里的路吗？

问题：[我可以使用 Clojure 的派生来创建我的 defrecord 类类型的层次结构吗？](https://stackoverflow.com/questions/4586608/can-i-use-clojures-derive-to-create-a-hierarchy-of-my-defrecord-class-types)似乎与此类似，但接受的答案是“不，也许使用接口”。

答案真的没有吗？为了使用 Clojure 的多方法，我是否必须将所有数据表示形式编写为 Java 类？

谢谢，

克里斯。

工作代码：

```
(derive ::unlit_root ::room)
(derive ::room ::thing)
(derive ::item ::thing)
(derive ::sword ::item)
(derive ::container ::thing)
(derive ::sack ::container)
(derive ::sack ::item)
(derive ::wardrobe ::furniture)
(derive ::furniture ::thing)
(derive ::wardrobe ::furniture)

(defmulti put (fn [x y z] [x y z]))
(defmethod put [::room ::thing ::thing] [x y z] "you can only put items into containers")
(defmethod put [::room ::sword ::sack] [x y z] "the sword cuts the sack")
(defmethod put [::room ::item ::container] [x y z] "ordinary success")
(defmethod put [::unlit_room ::thing ::thing] [x y z] "it's too dark, you are eaten by a grue")
(defmethod put [::room ::sack ::wardrobe] [x y z] "you win")
(defmethod put [::room ::item ::sack] [x y z] "you put it in the sack")
(defmethod put [::room ::furniture ::thing] [x y z] "it's too big to move") 
```

下面，是我迄今为止尝试过的，但我在第一次得到一个错误`derive`：

`ClassCastException java.lang.Class cannot be cast to clojure.lang.Named clojure.core/namespace (core.clj:1496)`.

```
(defrecord Item [name])
(defrecord Weapon [name, damage])
(defrecord Furniture [name])
(defrecord Container [name])
(defrecord Bag [name])
(derive Weapon Item)
(derive Container Item)
(derive Bag Container)
(derive Furniture Container)

(def sword (Weapon. "sword" 10))
(def apple (Item. "apple"))
(def cupboard (Furniture. "cupboard"))
(def bag (Bag. "bag"))

(defmulti putin (fn [src dst] [src dst]))
(defmethod putin [Item Container] [src dst] :success_0) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T05:56:33.760

正如@Arthur 和@noahz 所提到的，令人不快的答案是不能用类来描述层次结构。这给我们留下了多方法？

最好的答案可能是`:type`在简单地图中包含一个键并根据该值进行调度。你失去了协议提供的自动生成的构造函数之类的东西，但它是一个非常简单的解决方案，并且提供了很大的灵活性。

```
(def sword {:type ::weapon, :name "sword", :damage 10})
(def apple {:type ::item, :name "apple"})
(def cupboard {:type ::furniture, :name "cupboard"})
(def bag {:type ::bag, :name "bag"})

(derive ::weapon ::item)
(derive ::container ::item)
(derive ::bag ::container)
(derive ::furniture ::container)

; dispatch on [type-of-src type-of-dst]
(defmulti putin (fn [src dst] [(src :type) (dst :type)]))
(defmethod putin [::item ::container] [src dst] :success_0)

(println (putin sword bag)) ; :success_0 
```

另一种选择，尽管过于复杂，是创建一个类到关键字的映射，并在分派时使用它在层次结构中查找关键字。再一次，我要强调你可能会找到更好的东西，但是选择就在那里。

```
; used to look up the keywords associated with classes
(def class-keyword-map (atom {}))

; get the keyword associated with an instance's class
(defn class-keyword
  [instance]
  (@class-keyword-map (class instance)))

; this macro defines a record as normal
; however, after defining the record,
; it associates the record's type with
; a keyword generated by the record name
(defmacro def-adventure-record
  [clazz & body]
  `(do
     ; create the record as normal
     (defrecord ~clazz ~@body)
     ; and add the type to the keyword lookup
     (swap!
       class-keyword-map
       assoc ~clazz (keyword (str *ns*) (str '~clazz)))))

(def-adventure-record Item [name])
(def-adventure-record Weapon [name, damage])
(def-adventure-record Furniture [name])
(def-adventure-record Container [name])
(def-adventure-record Bag [name])

; we still need to use keywords,
; but at this point, they've been
; generated for us by the macro above
(derive ::Weapon ::Item)
(derive ::Container ::Item)
(derive ::Bag ::Container)
(derive ::Furniture ::Container)

(def sword (Weapon. "sword" 10))
(def apple (Item. "apple"))
(def cupboard (Furniture. "cupboard"))
(def bag (Bag. "bag"))

; this dispatch is done on the class's keywords
(defmulti putin (fn [src dst] [(class-keyword src) (class-keyword dst)]))

; again, keywords describe the multimethod
(defmethod putin [::Item ::Container] [src dst] :success_0)

(println (putin sword bag)) ; :success_0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:43:09.843

您想将 Java 的类型系统引入 Clojure。你这样做的方式（以你正在寻求的方式）是使用[协议](http://clojuredocs.org/clojure_core/clojure.core/defprotocol)（另见[http://clojure.org/protocols](http://clojure.org/protocols)）

但是，我建议您阅读以下博客文章：[使用 Clojure 进行面向步枪的编程](http://thinkrelevance.com/blog/2009/05/27/rifle-oriented-programming-with-clojure)。也许考虑一下数据结构可能比使用类型足够好（并且更灵活）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:42:30.437

[Clojure](http://clojure.org/multimethods)提供了解决此类问题的[协议](http://clojure.org/protocols)和多种方法。如果您想使用 defrecord，那么我建议您使用协议来代替。

* * *

具体问题在多方法页面中有说明：

“您也可以将类用作子类（但不能使用父类，将某物作为类的子类的唯一方法是通过 Java 继承）。”

```
(derive java.util.Map ::collection)
(derive java.util.Collection ::collection) 
```

您可以继续使用`isa?`层次结构

# jquery - 使用自定义字段注册 Facebook

> ID：12919386
> 
> 赞同：0
> 
> 时间：2012-10-16T16:35:13.067
> 
> 标签：jquery, facebook, forms, api, autocomplete

我已经阅读了 facebook 文档，但我对这个特定区域感到困惑。我想在我的网站上选择“通过 facebook 注册”。“注册”是指 Facebook 只会向我提供用户的信息（全名、电子邮件、个人资料图片等），但实际的用户数据将存储在我的数据库中。

我的问题是我的标准注册表包含一个名为“大学名称”的必填字段，这是一个 jQuery 自动完成字段，具有从我自己的数据库返回的特定值。我将如何在 facebook 注册脚本中实现这一点？facebook 提供的自定义字段选项似乎只是一个简单的文本字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:04:37.773

您可以使用[`select`自定义字段类型](https://developers.facebook.com/docs/plugins/registration/)并提供大学列表：

```
fields=[
    {'name':'name'},
    {'name':'university',
        'type': 'select',
        'options': [{'list': 'of'}, {'university':'names'}]}
] 
```

# cocoa - 如何在可可 Mac OS X 10.5 中强制杀死另一个应用程序

> ID：12919389
> 
> 赞同：3
> 
> 时间：2012-10-16T16:35:33.600
> 
> 标签：cocoa, kill, sigkill, nsworkspace, appleevents

我有这个任务，我需要从我的应用程序中**杀死**另一个我的应用程序，问题是**另一个应用程序有一个终止*确认对话框***（没有要保存的关键数据，只有确认用户退出意图）。

*   在 10.6+ 上，您将使用：

    ```
    bool TerminatedAtLeastOne = false;

    // For OS X >= 10.6 NSWorkspace has the nifty runningApplications-method.
    if ([NSRunningApplication respondsToSelector:@selector(runningApplicationsWithBundleIdentifier:)]) {
        for (NSRunningApplication *app in [NSRunningApplication runningApplicationsWithBundleIdentifier:@"com.company.applicationName"]) {
            [app forceTerminate];
            TerminatedAtLeastOne = true;
        }
        return TerminatedAtLeastOne;
    } 
    ```

*   但是在 <10.6 这个常用的 Apple Event 上：

    ```
    // If that didn‘t work either... then try using the apple event method, also works for OS X < 10.6.
    AppleEvent event = {typeNull, nil};
    const char *bundleIDString = "com.company.applicationName";

    OSStatus result = AEBuildAppleEvent(kCoreEventClass, kAEQuitApplication, typeApplicationBundleID, bundleIDString, strlen(bundleIDString), kAutoGenerateReturnID, kAnyTransactionID, &event, NULL, "");

    if (result == noErr) {
        result = AESendMessage(&event, NULL, kAENoReply|kAEAlwaysInteract, kAEDefaultTimeout);
        AEDisposeDesc(&event);
    }
    return result == noErr; 
    ```

    不能强行退出！！！

那你能用什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T16:35:33.600

您可以使用我在*cocoabuilder*上挖掘的这个简单代码：

```
// If that didn‘t work then try shoot it in the head, also works for OS X < 10.6.
NSArray *runningApplications = [[NSWorkspace sharedWorkspace] launchedApplications];
NSString *theName;
NSNumber *pid;
for ( NSDictionary *applInfo in runningApplications ) {
    if ( (theName = [applInfo objectForKey:@"NSApplicationName"]) ) {
        if ( (pid = [applInfo objectForKey:@"NSApplicationProcessIdentifier"]) ) {
            //NSLog( @"Process %@ has pid:%@", theName, pid );    //test
            if( [theName isEqualToString:@"applicationName"] ) {
                kill( [pid intValue], SIGKILL );
                TerminatedAtLeastOne = true;
            }
        }
    }
}
return TerminatedAtLeastOne; 
```

# jquery - jQuery .on() 不能与 PJAX 一起使用？

> ID：12919392
> 
> 赞同：1
> 
> 时间：2012-10-16T16:35:47.310
> 
> 标签：jquery, triggers, click, pjax, jquery-on

```
$("#img-switcher").on("switchImageEvent", function(event, triggerID){
    $(this).attr('src',triggerID);
});
$("#page-container").on("click", "img.img-switcher", function() {
    var newSRC = $(this).attr('src');
    $("#img-switcher").trigger("switchImageEvent", [newSRC]);
}); 
```

这段代码似乎不适用于我的 PJAX。如果我最初加载一个页面，它会很好地选择元素并进行更改。但是，一旦我使用 PJAX 转到另一个页面，它将不再为 .on("click") 操作选择元素。难道我做错了什么？我之前尝试添加一个警报，`var newSRC`以查看它是否正确选择了带有 .on() 的元素，但事实并非如此。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:50:23.660

好吧，因为只有这段代码脱离了上下文，我假设您正在尝试将[on](http://api.jquery.com/on/)用作[live](http://api.jquery.com/live/)而不是将其用作[delegate](http://api.jquery.com/delegate/)。

使用 pjax，它使用 xhr 来加载没有附加事件的元素，这可能是一个问题。

因此，我的建议是使用未重新加载的父元素并在其上附加事件。像这样，使用最顶层的，未重新加载的元素，而不是正文：

```
$("body").on("switchImage", "#img-switcher", function(e, src){
  $(this).attr({ 'src': src });
});

$("body").on("click", "img.img-switcher", function() {
    $("#img-switcher").trigger("switchImage", $(this).attr('src'));
}); 
```

# css - chrome和firefox之间的字体字距调整

> ID：12919393
> 
> 赞同：1
> 
> 时间：2012-10-16T16:35:47.467
> 
> 标签：css, firefox, google-chrome, kerning

我正在开发一个带有自定义字体的菜单，并且在 chrome（和 safari）中，它的间距完全符合我的要求。

[http://american-motorsports.net/2012/](http://american-motorsports.net/2012/)

当我在 Firefox 中查看它时，字体的字距有点不同，导致最右边的菜单项上有一点黑色间隙。**我可以看到FABRICATION**中**F**和**A**之间的区别

 **HTML 现在非常简单：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8" />
<link rel="stylesheet" href="resources/css/reset.css" />
<link rel="stylesheet" href="resources/css/main.css" />
<title><?php echo date('M d, Y') . ' | '; ?>American Motorsports - Off-Road Fabrication</title>
</head>
<body>
<div id="wrap">
    <div id="header">
        <div id="logo">
            <img src="resources/images/logo.png" width="291" height="150" alt="American Motorsports - Off-Road Fabrication" />
        </div>
        <div id="menu">
            <a href="#"><span class="item">HOME</span></a><a href="#"><span class="item">SUSPENSION</span></a><a href="#"><span class="item">FABRICATION</span></a><a href="#"><span class="item">PROJECTS</span></a><a href="#"><span class="item">MEDIA</span></a><a href="#"><span class="item">CONTACT</span></a>
        </div>
    </div>
    <div id="main"></div>
</div>
</body>
</html> 
```

到目前为止，CSS 由这些组成

```
@font-face {  
    font-family: bebas;  
    src: url("../fonts/bebas.ttf") format("truetype");  
    font-weight: normal;
    font-style: normal;
}

body {
    font-size: 14px;
    color: #ccc;
    line-height: 20px;
    margin: 0;
    padding: 0;
    background: url("../images/bg.png") #202020;
}

#wrap {
    background: url("../images/bg_main.jpg") no-repeat center top;
    min-height:800px;
}

#header {
    border-top: 5px solid #3a3a3a;
    height:150px;
    width:970px;
    background-color:#000000;
    margin: 50px auto;
}

#logo {
    width:324px;
    height:179px;
    background-color:#121212;
    border-top: 5px solid #3a3a3a;
    border-bottom: 5px solid #ffffff;
    margin-top:-22px;
    float:left;
}

#logo img {
    margin-left:13px;
    margin-top:17px;
}

#menu {
    width:646px;
    height:150px;
    float:right;
    margin:0;
    padding:0;  
}

#menu a {
    margin:0;
    padding:0;
}

.item {
    font-family:bebas;
    font-size:18px;
    height:150px;
    display:inline-block;
    text-align:center;
    line-height:8em;
    color:#fff;
    cursor:pointer;
    padding-left:20px;
    padding-right:20px;
    margin:0;
    text-shadow: 0 3px 3px #111;
}

.item:hover {
    background: -moz-linear-gradient(top,  #3a3a3a 0%, #101010 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#3a3a3a), color-stop(100%,#101010));
    background: -webkit-linear-gradient(top,  #3a3a3a 0%,#101010 100%);
    background: -o-linear-gradient(top,  #3a3a3a 0%,#101010 100%);
    background: -ms-linear-gradient(top,  #3a3a3a 0%,#101010 100%);
    background: linear-gradient(to bottom,  #3a3a3a 0%,#101010 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3a3a3a', endColorstr='#101010',GradientType=0 );
}

#main {
    width:970px;
    /*background-color:#ffffff;*/
    margin: 0 auto;
} 
```

所以问题是如何消除差距，使其看起来像 chrome 和 safari 或修复字距调整问题..我只是不希望 Firefox 中的那个差距

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:46:43.217

您必须将 a 包裹在有问题`span`的字母周围并调整 CSS`letter-spacing:`属性，直到获得您想要的。

良好的排版技巧，尤其是在自定义字体方面，还没有为浏览器的黄金时段做好准备。

**计划 B**：使用图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:48:19.160

一个快速肮脏的解决方案是

```
#menu{
  white-space: nowrap;
  overflow: hidden; /* means you don't get a dirty edge, but the last link may be smaller on the right */
} 
```

不过，理想情况下，您不应该依赖字体的宽度来使您的菜单看起来正确。如果你有时间，给每个链接一个类和一个自定义宽度。或者更好的是，在每个项目中使用带有链接的列表，以获得更好的控制。

例如，如果您添加：

```
.item{
  padding: 0;
  width: 16.66%; /* assuming you always have 6 links */
} 
```

...它们总是合适的，但有些看起来很垃圾。为了获得最专业的外观，您需要为每个人指定一个类和自定义宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T18:08:10.137

我看不出您要消除什么差距，但您所描述的是 Firefox（现代版本）默认应用字距调整（如果在字体中定义）的问题。其他浏览器没有。所以这是字距调整与无字距调整的问题，而不是字距调整的差异。字距调整通常被认为是印刷上可取的。但是，如果您真的想阻止 Firefox 进行字距调整，可以使用[字体功能设置](https://developer.mozilla.org/en-US/docs/CSS/font-feature-settings)，例如在这种情况下使用

```
#menu  { -moz-font-feature-settings: "kern" 0; } 
```**

# postgresql - 指定 psql 连接到的默认数据库？

> ID：12919394
> 
> 赞同：16
> 
> 时间：2012-10-16T16:35:54.457
> 
> 标签：postgresql, shell, command-line, psql

在使用 psql 时，我想更改初始数据库连接。

我有一个名为“test”的数据库作为初始连接。

`psql`从命令行运行时，我的提示将是`test=#`

删除“test”数据库并`psql`在命令行中运行后，出现以下错误：

```
psql: FATAL:  database "test" does not exist 
```

我明白这意味着什么，但我该如何将“postgres”数据库设置为默认值？

`psql postgres`而不是每次都打字。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-16T17:07:09.917

您可以通过环境变量配置默认行为`psql`——实际上是使用客户端库的任何程序。`libpq`

在您的`~/.bashrc`或类似的：

```
export PGDATABASE=postgres 
```

PostgreSQL 文档包含[一个完整的列表](http://www.postgresql.org/docs/current/static/libpq-envars.html)。

# node.js - 在一个文件中拥有一个包含多个模板的 Node.JS Express 模板引擎

> ID：12919397
> 
> 赞同：0
> 
> 时间：2012-10-16T16:36:03.847
> 
> 标签：node.js, templates, express, template-engine

我编写了一个自定义模板引擎，让我可以在重写当前项目时使用我的旧模板。除了 Express.js 总是发送一个

```
Error: Failed to lookup view (template name) 
```

我在一个文件中有多个模板，每个模板不需要一个文件。但是我怎么能告诉快递呢？

我无法理解这一点。任何帮助表示赞赏

**编辑：**一些代码：

```
My Express Setup: (app.js)

var express = require('express');
var app = express();
var gclosure = require('./templateEngine');
var fs = require('fs');

/**
 * Setup Express
 */
app.configure(function(){

    app.engine('test', gclosure.__express);

    app.set('views', __dirname + '/public/templates');
    app.set('view engine', 'test');

    app.use(express.favicon());
    app.use(express.bodyParser());
    app.use(express.cookieParser());
    app.use(express.methodOverride());

    app.use(require('less-middleware')({
        src: __dirname + '/public'
    }));

    app.use(express.static(__dirname + '/public'));
}); 
```

我的自定义模板引擎 (templateEngine.js)

```
exports.renderFile =  function(path, options, fn){

  if ('function' == typeof options) {
    fn = options, options = {};
  }

  try {

    fm(null, "This is a test output");

  } catch (err) {
    fn(err);
  }
}; 
```

我的快递测试路线：

```
 app.get('/', function(req, res, next) {

    res.render('simple',{
              title: 'Sources',
              data: 'lala',
              options: 'miep'
          }); 

  }); 
```

线索是：当我在模板文件夹中创建一个名为`simple.test`的文件时，一切正常，我可以看到测试输出字符串。当我将名称更改为不存在的名称时，输出是

```
Error: Failed to lookup view (template name) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T13:53:43.693

**问题：**

[Express](http://expressjs.com/)使用模板[引擎](http://expressjs.com/api.html#app.engine)创建渲染视图的视图对象。由于视图本身是通过在文件系统中查找文件来创建的，因此模板引擎无法告诉 express 它自己处理文件。

**解决方案：**

我没有使用模板引擎方法，而是编写了一个[自定义中间件](https://github.com/johnnycube/gclosure-node)，它根据模板函数的名称拦截对我的模板引擎的调用。基本上我覆盖了[express](http://expressjs.com/api.html#res.render)`response.render()`中的函数。

* * *

**更新：** [GitHub 回购](https://github.com/johnnycube/gclosure-node)

# javascript - SVG路径的透视变换（四角扭曲）

> ID：12919398
> 
> 赞同：39
> 
> 时间：2012-10-16T16:36:12.973
> 
> 标签：javascript, css, svg, transformation, perspective

如何在浏览器中扭曲 SVG 中的路径，以便使用可能的 javascript 或 css 将它们扭曲到某些角度？透视扭曲可以在 Photoshop、Illustrator 等中轻松制作，但是浏览器呢？

这是源路径：

![在此处输入图像描述](../Images/a75f8567e241f5b8ca3ad57ea27d545b.png)

这是改造后的路径：

![在此处输入图像描述](../Images/4455c7a0e0758364585cf523a84ee7f5.png)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-16T16:36:12.973

这是我的拖拽扭曲建议（[分享你的知识，问答式](https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/)）。

现场示例在[http://jsfiddle.net/xjHUk/278/](http://jsfiddle.net/xjHUk/278/)中，主要代码是这样的：（
仅输出窗口：http: [//jsfiddle.net/xjHUk/279/embedded/result/](http://jsfiddle.net/xjHUk/279/embedded/result/)）

```
函数 transferPoint (xI, yI, source, destination)
{
    变量添加 = 0.001; // 避免被零除

    var xA = 源[0].x;
    var yA = 源[0].y;

    var xC = 源[2].x;
    var yC = 源[2].y;

    var xAu = 目的地[0].x;
    var yAu = 目的地[0].y;

    var xBu = 目的地[1].x;
    var yBu = 目的地[1].y;

    var xCu = 目的地[2].x;
    var yCu = 目的地[2].y;

    var xDu = 目的地[3].x;
    var yDu = 目的地[3].y;

    // 计算
    // 如果点相同，必须添加一个 ADDING 以避免被零除
    如果（xBu==xCu）xCu+=添加；
    如果（xAu==xDu）xDu+=添加；
    如果（xAu==xBu）xBu+=添加；
    如果（xDu==xCu）xCu+=添加；
    var kBC = (yBu-yCu)/(xBu-xCu);
    var kAD = (yAu-yDu)/(xAu-xDu);
    var kAB = (yAu-yBu)/(xAu-xBu);
    var kDC = (yDu-yCu)/(xDu-xCu);

    如果（kBC==kAD）kAD+=添加；
    var xE = (kBC*xBu - kAD*xAu + yAu - yBu) / (kBC-kAD);
    var yE = kBC*(xE - xBu) + yBu；

    如果（kAB==kDC）kDC+=添加；
    var xF = (kAB*xBu - kDC*xCu + yCu - yBu) / (kAB-kDC)；
    变量 yF = kAB*(xF - xBu) + yBu；

    如果（xE==xF）xF+=添加；
    var kEF = (yE-yF) / (xE-xF);

    如果（kEF==kAB）kAB+=加法；
    var xG = (kEF*xDu - kAB*xAu + yAu - yDu) / (kEF-kAB)；
    变量 yG = kEF*(xG - xDu) + yDu；

    如果（kEF==kBC）kBC+=添加；
    var xH = (kEF*xDu - kBC*xBu + yBu - yDu) / (kEF-kBC)；
    var yH = kEF*(xH - xDu) + yDu；

    var rG = (yC-yI)/(yC-yA);
    var rH = (xI-xA)/(xC-xA);

    变量 xJ = (xG-xDu)*rG + xDu；
    var yJ = (yG-yDu)*rG + yDu；

    var xK = (xH-xDu)*rH + xDu；
    var yK = (yH-yDu)*rH + yDu；

    如果（xF==xJ）xJ+=添加；
    如果（xE==xK）xK+=添加；
    var kJF = (yF-yJ) / (xF-xJ); //23
    var kKE = (yE-yK) / (xE-xK); //12

    变量 xKE;
    如果（kJF==kKE）kKE+=添加；
    var xIu = (kJF*xF - kKE*xE + yE - yF) / (kJF-kKE);
    var yIu = kJF * (xIu - xJ) + yJ;

    变量 b={x:xIu,y:yIu};
    bx=数学.round(bx);
    by=Math.round(by);
    返回 b;
}

```

结果被正确地扭曲为透视（两个消失点一）。两点透视计算的原理就[到这里了](https://docs.google.com/open?id=0B7ba4SLdzCRuU05VYnlfcHNkSlk)。如果满足以下要求，该脚本可以处理 SVG 路径数据：

*   所有坐标都是绝对的（这意味着大写字母）。看到[这个](https://stackoverflow.com/questions/9677885/convert-svg-path-to-absolute-commands)。
*   不使用弧（“A”）
*   V 和 H 归一化为 L

弧线可以标准化，但我还没有找到任何跨浏览器的方式。V 和 H 到 L 很容易，您必须获取最后使用的 x 或 y 坐标，然后在 L 之后添加缺少的坐标。

相同的脚本也可以处理路径中的曲线（曲线来自时代）。以下是完全相同的代码，但路径属性（“d”）不同：

[http://jsfiddle.net/xjHUk/277/](http://jsfiddle.net/xjHUk/277/) `function dummy(a) {return a;}` （此代码没有检查无效位置，如上所示）。

以上示例的路径来自 Arial 和 Times 的 SVG 版本。请注意字体使用[笛卡尔坐标系](http://en.wikipedia.org/wiki/Cartesian_coordinate_system)，向上时y坐标增加。否则 SVG 使用极坐标系，用于位图图像和 css。这意味着当在上述代码中使用来自 SVG 字体的路径时，路径必须垂直翻转并缩放到所需的字体大小。TTF 字体（及其 SVG 对应字体）通常 em 大小为 2048，因此字形的边界框没有缩放 2048 px，这通常在 SVG 字形路径转换为 ​​SVG 路径时太大。

但是，如果您想扭曲其他 SVG 路径，则无需进行翻转和缩放。

这是相当长的代码（很大程度上是因为拖动功能），但我认为同样的效果也可以通过一些 css-3D-transform-way 来实现，但在这样的实现中还没有运气......

为了比较非透视扭曲的示例（SVG 的主要竞争对手 SWF）：
[http ://www.rubenswieringa.com/code/as3/flex/DistortImage/](http://www.rubenswieringa.com/code/as3/flex/DistortImage/)

为了进一步比较有效透视计算的示例：http:
[//zehfernando.com/f/TriangleTest.swf](http://zehfernando.com/f/TriangleTest.swf)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-02-08T17:56:33.073

所选答案已过时。

尽管 SVG 不支持改变元素的透视，但可以通过使用 CSS3 变换来实现。

CSS3 是一种非常强大的动画对象方法。可以使用 Javascript 实时创建和应用 CSS3 转换。

对 CSS3 Transform 有很好的支持，所有最新版本的主要浏览器都支持它。（IE 8+、Chrome 31+、Safari 7.1+、Opera 26+、Firefox 34+、Android 浏览器 4.1+）。更多信息：[http ://caniuse.com/#feat=transforms2d](http://caniuse.com/#feat=transforms2d)

对于某些浏览器版本，您需要使用特定于浏览器的前缀来创建转换。但是，有一个非常简洁的网站解释了处理该问题的好方法：http: [//bl.ocks.org/mbostock/10571478](http://bl.ocks.org/mbostock/10571478)

一些 CSS3 变换属性是：`rotate(angle)`, `scale(dimension)`. 我知道，它们看起来与 SVG 变换非常相似`rotate(angle)`，`scale(x y)`但最好不要将它们视为相等，因为两者之间存在根本差异，CSS3 比 SVG 变换强大得多。此外，CSS3 Transforms 有一个`perspective`你绝对需要查看的属性。

没有比 W3 更好的地方可以找到有关 CSS3 转换的更多信息：http: [//www.w3.org/TR/css3-transforms/](http://www.w3.org/TR/css3-transforms/)

这是一个代码片段： ![CSS3 变换的一个例子](../Images/128a8ea4d25ca0597af5f9820fabb0b3.png)

```
div {
  height: 150px;
  width: 150px;
}
.container {
  perspective: 500px;
  border: 1px solid black;
  background: gray;
}
.transformed {
  transform: rotateY(50deg);
  background: blue;
}
```

```
<!doctype html>
<html>
<body>
<div class="container">
  <div class="transformed"> Hola! He sido transformado!</div>
</div>
</body>
</html>
```

快乐蜕变！

# c++ - Nil 类的 C++ 内存分配

> ID：12919402
> 
> 赞同：-2
> 
> 时间：2012-10-16T16:36:30.883
> 
> 标签：c++, new-operator

运行以下代码后：

```
#include <stdio.h>
class Nil
{
};

int main()
{
    Nil* A[20];
    char* B[20];
    for (int i=0;i!=20;i++)
    {
        A[i]=new Nil;
    }

    for (int i=0;i!=19;i++)
    {
        printf("A:%i\n",((int)A[i+1])-((int)A[i]));
    }
    printf("------------------------------------\n",5);
    for (int i=0;i!=20;i++)
    {
        B[i]=new char;
    }

    for (int i=0;i!=19;i++)
    {
        printf("B:%i\n",((int)B[i+1])-((int)B[i]));
    }
    getchar();
} 
```

**输出：**

```
A:7112
A:64
A:64
A:64
A:64
A:64
A:64
A:64
A:64
A:64
A:64
A:64
A:64
A:64
A:64
A:64
A:64
A:64
A:64
------------------------------------
B:64
B:64
B:64
B:64
B:64
B:64
B:64
B:64
B:64
B:64
B:64
B:64
B:64
B:64
B:64
B:64
B:64
B:64
B:64 
```

为什么分配大小总是64？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:23:07.613

C++ 内存管理器随心所欲地处理分配。间隙比对象大，因为管理器需要额外的信息来了解哪些内存被占用，哪些是空闲的。由于内存填充，所有块都具有相同的大小，以提高效率。请注意，如果您尝试分配大对象，间隙会扩大，很可能是 64 的倍数。分配对象之间的间隙是相同的，因为您按顺序分配它们 - 堆叠新对象是最简单的分配策略。请注意，如果分配不是按顺序分配的，或者如果有可用内存的“空洞”，那么间隙就不会那么均匀。

要记住的重要一点是，所有这些都取决于实现和平台，不应依赖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:59:45.300

你在那里持有指针数组。指针确实有固定的大小，所以它总是一样的。

对于分配的内存，编译器做了一些优化。通常，您无法查找单个位或字节，因此大多数编译器都会注意您是否具有最佳访问模式。

# java - 用于检查输入名称的 Java 正则表达式

> ID：12919406
> 
> 赞同：1
> 
> 时间：2012-10-16T16:36:39.687
> 
> 标签：java, regex

我知道正则表达式不一定是这项工作的最佳工具，但我想知道这是否可以使用 Java regexen：

假设我有一个名称由换行符分隔的数据集，如下所示：

```
John Doe  
Jane Roe  
Richard Miles 
```

（实际系统中的名字自然*要多得多）*

我将读取数据，我将分别获得名字和姓氏，但它们的顺序不一定相同。

现在，问题是，有没有什么方法可以为 Richard Miles 构建一个正则表达式来匹配“Miles Richard”和“Richard Miles”？我知道还有很多其他方法可以做到这一点，但我特意寻找基于正则表达式的解决方案（不是因为它一定实用，但我会觉得它很有趣）

**编辑澄清**：我的意思是我需要一个正则表达式，比如说，“Richard Miles”，它可以匹配“Richard Miles”和“Miles Richard”，而且最好不仅仅是`(Richard Miles|Miles Richard)`因为它的乐趣在哪里？

这绝不应该是实用的，我只是对正则表达式是否可以做这样的事情感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:38:58.670

它需要复杂和聪明吗？我的意思是这会奏效。

```
\b(Miles Richard|Richard Miles)\b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:38:00.583

是的，看看这个： -

```
^(\\w+)\\s(\\w+)$ 
```

它将匹配开头的一个单词`(^\\w+)`，然后是一个空格`(\\s)`，最后是另一个单词。`(\\w+$)`

你只找这个吗？

# java - 使用 BitmapFactory 获取图像上的尺寸会得到 OutOfMemoryError，

> ID：12919409
> 
> 赞同：0
> 
> 时间：2012-10-16T16:36:45.570
> 
> 标签：java, android, image, bitmapfactory

我试图找到一种方法来获取图像的尺寸，这样我就知道如何缩放它。这样做的目的是它不会有这些内存问题。

所以我正在做的是：

```
BitmapFactory image = new BitmapFactory();
BitmapFactory.Options opts = new BitmapFactory.Options();
image.decodeFile(_path,opts);
if(opts.outHeight > 2048 || opts.outWidth > 2048){
   opts.inSampleSize= 2;
}
VIEW.setImageBitmap(image.decodeFile(_path,opts)); 
```

问题是在第一次解码时，如果设备没有足够的内存，它会出错。

我这样做的方式是将它放在一个 trycatch 块中，然后在 if.... || 添加附加语句 opts.outHeight == -1 || opts.outWidth == -1){

所以我想知道的是，有没有一种方法可以做我想做的事情而不会在解码时占用太多内存？毕竟我只需要知道原始图像的高度和宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:45:25.707

作为 BitmapFactory.Options opts 的一部分，有一个属性 inJustDecodeBounds 需要设置为 true 才能实现这一事实。

如果将其设置为 true，则所有代码都可以正常工作。它根本没有构建大图像，只是返回 mimetypes、outheight、outwidth 等。

进一步的帮助可以通过访问：http: [//developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

# php - Zend Framework 在 Firefox 和 IE 中抛出一个关于 PDO 的奇怪错误？

> ID：12919412
> 
> 赞同：0
> 
> 时间：2012-10-16T16:36:52.203
> 
> 标签：php, sql, zend-framework, postgresql, pdo

在工作中，我们使用 Zend 1.10.7 并且遇到了一个奇怪的错误：

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[08P01]: <<Unknown error>>: 7 ERROR:  bind message supplies 0 parameters, but prepared statement "pdo_stmt_00000015" requires 1' in /var/www/ZendFramework-1.10.7/library/Zend/Db/Statement/Pdo.php:228
Stack trace:

#0 /var/www/ZendFramework-1.10.7/library/Zend/Db/Statement/Pdo.php(228): PDOStatement->execute(Array)
#1 /var/www/ZendFramework-1.10.7/library/Zend/Db/Statement.php(300): Zend_Db_Statement_Pdo->_execute(Array)
#2 /var/www/ZendFramework-1.10.7/library/Zend/Db/Adapter/Abstract.php(468): Zend_Db_Statement->execute(Array)
#3 /var/www/ZendFramework-1.10.7/library/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query(Object(Zend_Db_Table_Select), Array)
#4 /var/www/ZendFramework-1.10.7/library/Zend/Db/Table/Abstract.php(1505): Zend_Db_Adapter_Pdo_Abstract->query(Object(Zend_Db_Table_Select))
#5 /var/www/ZendFramework-1.10.7/library/Zend/Db/Table/Abstract.php(1321): Zend_Db_Table_Abstract->_fetch(Object(Zend_Db_Table_Select))
#6 /var/w in /var/www/ZendFramework-1.10.7/library/Zend/Db/Statement/Pdo.php on line 234 
```

有没有人见过这个？如果是这样，原因是什么？它只在 Firefox 和 IE 9 中执行此操作。**但是 chrome 很好，该站点可以正常工作。**

有什么想法吗？太我了，我的谷歌介意它是我的插入或选择语句之一，但在 chrome 中它再次起作用，选择、插入和更新数据库中的信息。

我们使用 PostgreSQL 作为数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:54:08.010

PDO 查询正在寻找一个绑定参数，这表示应该没有理由为什么不同的浏览器会给出不同的结果，除非传递给这个查询的值是动态生成的 -

如果您的查询如下所示：

`SELECT * FROM users WHERE id = ?`

您需要确保绑定一个参数。

`$stmt->bindParam(1, $idValue);`

如果`$idValue`是由于某种原因返回 NULL 的函数的结果，或者 bindParam 方法调用本身被包装在一个仅在圣诞节评估为 true 的条件语句中，那么您将遇到像您这样的异常。这是因为执行语句时缺少该值。

编辑：我的猜测是`Array`这里的值`PDOStatement->execute(Array)`是空的。

# java - 有没有更简洁的方法来循环并将对象 ID 捕获到列表中？

> ID：12919414
> 
> 赞同：1
> 
> 时间：2012-10-16T16:36:55.003
> 
> 标签：java

假设我有一组用户：

```
List<User> users = ...; 
```

现在我想获取列表中用户的所有 id，目前我正在做：

```
for(User user : users) {
  userIds.add(user.getId());
} 
```

有没有更优雅的方式来做到这一点？

我知道java不支持linq，所以也许这是唯一的方法，但我只是想问一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:48:00.977

使用 Google Guava Collections2

优雅的 ？

```
 Collections2.transform(lists, new Function<User, UserId>(){
            public UserId apply(@Nullable User user) {
                return user.getId();
            }

        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:40:38.123

你做得对。我建议的唯一另一件事是在`Null Check`and`Empty Check (optional)`上添加`users`and `userIds`。

# javascript - 单击链接后显示工具提示

> ID：12919415
> 
> 赞同：0
> 
> 时间：2012-10-16T16:36:57.420
> 
> 标签：javascript, jquery, tooltip

单击链接后需要显示工具提示内容。我使用了以下代码，但是一旦我单击链接，内容就不会显示:(

```
 <script type="text/javascript">

        $(document).ready(function() {
            var trigger = ['onClick'];
            var width = '300px';
            var pos = 'top';

            ShowPopup($('#data-wnTooltip'),
            $('#wnTooltip'),
            trigger,
            "$('#data-wnTooltip').html()",
            width,
            pos
        );
        });
    </script>

<div class="example-para"><a id="wnTooltip" href="#">Show tool tip content</a></div>

<div id="data-wnTooltip">
    <p>tool tip content</p>
</div> 
```

有人可以让我知道我哪里出错了。
谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:43:30.013

在这里黑暗中拍摄，但您`"$('#data-wnTooltip').html()",`作为字符串传递，我假设您希望显示内容。删除引号：`$('#data-wnTooltip').html(),`这将评估为通过`"<p>tool tip content</p>"`

# mysql - 使用左连接和子查询优化 MySQL 查询

> ID：12919423
> 
> 赞同：1
> 
> 时间：2012-10-16T16:37:14.587
> 
> 标签：mysql, subquery, left-join, indexing

我有很多这样的查询...

```
SELECT colA, colB, colC, colD FROM table1 
  LEFT JOIN (
    SELECT colD FROM table2 WHERE colE = 3225 
  ) AS subquery
ON colD = colA ; 
```

在我的服务器的“log-queries-not-using-indexes”日志中列出。

解释看起来像这样......

```
id | select_type | table      | type  | possible_keys | key     | key_len | ref  | rows | Extra
---+-------------+------------+-------+---------------+---------+---------+------+------+-------------
 1 | PRIMARY     | table1     | range | PRIMARY       | PRIMARY | 3       | NULL |   58 | Using where
 1 | PRIMARY     | <derived2> | ALL   |          NULL |    NULL |    NULL | NULL |    1 | 
 2 | DERIVED     | table2     | const | PRIMARY       | PRIMARY | 3       |      |    1 | 
```

有什么办法可以重组查询，或者我应该添加任何新的索引来改进它？

仅供参考，表格的结构是这样的......

```
CREATE TABLE `table1` (
 `colA` MEDIUMINT( 9 ) NOT NULL ,
 `colB` VARCHAR( 100 ) DEFAULT NULL ,
 `colC` VARCHAR( 6 ) DEFAULT NULL ,
 some more columns removed to simplify things...
 PRIMARY KEY (  `colA` ) ,
 KEY  `colB` (  `colB` ) ,
 KEY  `colC` (  `colC` ) 
) ENGINE = MYISAM DEFAULT CHARSET = latin1 ;

CREATE  TABLE `table2` (
 `colE` mediumint( 9  )  NOT  NULL  auto_increment ,
 `colD` mediumint( 9  ) default  '0',
 some more columns removed to simplify things...
 PRIMARY  KEY (  `colE`  ) ,
 KEY  `colD` (  `colD`  )  
) ENGINE  =  MyISAM  DEFAULT CHARSET  = latin1 ; 
```

提前致谢，

你的

菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:55:59.187

我会尝试以下方法：

```
SELECT ColA, ColB, ColC, ColD
FROM
    table1
    LEFT JOIN table2
        ON ColE = 3225
        AND ColD = ColA 
```

另外，尝试创建一个涵盖`ColE`和`ColD`on的索引`table2`：

```
CREATE INDEX `IDX_table2` on `table2` (`colE` ASC, `colD` ASC); 
```

# jfreechart - 在没有图形缩放的情况下绘制注释形状

> ID：12919424
> 
> 赞同：1
> 
> 时间：2012-10-16T16:37:23.607
> 
> 标签：jfreechart

我正在使用 JFreeChart 创建图表：

![在此处输入图像描述](../Images/0a294b978b3c63e7121d827297ad5ea7.png)

问题应该是相当清楚的。我在图表上绘制的圆圈显示为椭圆形，因为我的图表正在按比例缩小以适合我的尺寸。

这是我绘制圆圈注释的方式：

```
chart.getXYPlot().addAnnotation(
    new XYShapeAnnotation(
        new Ellipse2D.Float(pointX - 15, pointY - 15, 30, 30),
        new BasicStroke(0.5), Color.BLACK, Color.GREEN
    )
); 
```

如何在不缩小注释的情况下绘制注释？有没有办法在图表上绘制，将全局/真实 X/Y 点转换为局部/缩放 X/Y 点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:38:19.440

作为替代方案，请尝试使用比例不变的[注释](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/annotations/package-summary.html)之一，例如`XYImageAnnotation`或`XYPointerAnnotation`。例如，

```
chart.getXYPlot().addAnnotation(
        new XYPointerAnnotation("Bam!", pointX, pointY, 0)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T14:18:06.293

我建议使用第二个系列，其中只有一个值。对于第二个系列，您需要使用图表的绘图渲染器的 setSeriesShapesVisible() 方法启用形状的绘制。您需要做的就是在您希望形状出现的点向第二个系列添加一个值。

您可以使用正方形、圆形、圆角矩形等。事实上，任何 java.awt.Shape 对象都是有效的。

# shell - 需要 Shell 脚本根据第一列查找两个文件的差异

> ID：12919425
> 
> 赞同：0
> 
> 时间：2012-10-16T16:37:28.330
> 
> 标签：shell, scripting

我有两个文件，每个文件有两列

`File1`具有以下列：

```
ECDLT 5  
DBG0  0  
AHDST 53  
RSNDL 10  
DBLOG 2  
ATDLM 1  
ATREJ 1  
DLMKT 0   
AKDRP -100  
ALTCM 100000000    
BCPTM -1000000000   
PERFS 1  
OMSTD 1  
LDTHD 1  
DGCAN 1  
HRLOG 1  
AKALT 0 
```

`File2`具有以下列：

```
ECDLT 5  
DBG0  0  
MFLOR 1  
LIPEM 1  
GXTHR 5  
LIPEM 1  
LIPEM 1  
RPTAT -1  
RPTPA -1  
PTIMR 1  
NOQUE 1  
AHDST 53  
RSNDL 10  
DBLOG 2 
```

因此，在这里我需要一个 shell 脚本来使用第一列查找两个文件的差异，并且在输出中它应该打印两列。

我是 shell 脚本的新手。请帮助我。我非常需要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T17:02:19.887

（编辑以使其更简洁。将方向从脚本移动到命令行，以便您可以更好地控制想要输出的位置）

根据您只想打印 file1 中的前两列的描述，并且只有第一列值与第二个文件中的相应行不同的行（并假设第一个文件的行数比第二个文件多）：

```
#!/bin/bash

paste $1 $2 | awk '{if ($1 != $3) {print $1 " " $2}}' 
```

这就是它使用脚本的方式（将其命名为 diff_col.sh）：

```
$ chmod +x diff_col.sh
$ ./diff_col.sh input_file1 input_file2 > output_file 
```

使用您的示例输入，并且只是

```
$ ./diff_col.sh input_file1 input_file2 
```

我得到：

```
AHDST 53
RSNDL 10
DBLOG 2
ATDLM 1
ATREJ 1
DLMKT 0
AKDRP -100
ALTCM 100000000
BCPTM -1000000000
PERFS 1
OMSTD 1
LDTHD 1
DGCAN 1
HRLOG 1
AKALT 0 
```

# solr - 如何使用 Hadoop MapReduce 程序对 HBase 表进行 Solr 索引？

> ID：12919428
> 
> 赞同：0
> 
> 时间：2012-10-16T16:37:44.680
> 
> 标签：solr, mapreduce, hbase

我是新手`Map Reduce`，我已经使用 Map Reducing 在 solr 中对文档进行了索引。

现在我想知道如何使用程序索引`HBase`表。`solr``Hadoop` `Map Reduce`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:01:13.223

这主要取决于数据的存储方式，应连接多少表以生成一个 solr 文档，但过程与索引文档基本相同。在映射器中使用[TableInputFormat](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/mapreduce/TableInputFormat.html)。

# android - 使用具有无限网格的 Scroller.fling 复制浏览器或联系人列表投掷行为

> ID：12919429
> 
> 赞同：0
> 
> 时间：2012-10-16T16:37:46.827
> 
> 标签：android, algorithm, physics

想象一个网格（使用画布实现）在右侧和底部是无限的，但在左侧和顶部有边界。我希望能够使用投掷手势滚动这个网格。我使用下面的`GestureDetector`和`Scroller`类实现了这一点。虽然这在大多数情况下是可以接受的并且看起来不错，但在进行强力甩动时，滚动的距离和速度相当短/慢。

这在做一个不太强大的投掷时很好，例如当你只想滚动你的联系人列表或浏览器时会这样做。但是，对于会大量滚动您的联系人列表的投掷，此方法仅比前一种方法滚动我的网格多一点。

我不确定要设置什么`minX/maxX/minY/maxY`参数才能达到这些效果，或者还有什么要改变的。到目前为止，我选择的值对于我的目的来说是一个很好的折衷方案：它永远不会滚动太多或太快，但它确实滚动太少和太慢而无法进行强烈的投掷。

如何在我的无限网格中实现与联系人列表类似的投掷行为（我正在考虑 ICS / JB，但我认为它们在这方面的行为大致相同）和浏览器？

**相关代码清单：**

```
private int mFlingPrevX, mFlingPrevY;
private void moveSurface() {
    if (mFlinger.computeScrollOffset()) {

        mScroll.x = -mFlinger.getCurrX() + mFlingPrevX;
        mScroll.y = -mFlinger.getCurrY() + mFlingPrevY;

        mFlingPrevX = mFlinger.getCurrX();
        mFlingPrevY = mFlinger.getCurrY();

        invalidate();

        post(new Runnable() {
            @Override
            public void run() {
                moveSurface();
            }
        });
    }
}

@Override
public boolean onFling(final MotionEvent motionEvent1, final MotionEvent motionEvent2, final float velocityX, final float velocityY) {

    ViewConfiguration config = ViewConfiguration.get(mContext);
    if (Math.abs(velocityX) < config.getScaledMinimumFlingVelocity() || Math.abs(velocityY) < config.getScaledMinimumFlingVelocity()) {
        return true;
    }

    mFlinger = new Scroller(mContext);

    mFlingPrevX = getScrollX();
    mFlingPrevY = getScrollY();

    // 380 is a magic number that works OK, but it doesn't do what I'm asking here
    int distance = (int)(GameGlobals.getScreenDensityFactor(mContext) * 380); 
    mFlinger.fling(mFlingPrevX, mFlingPrevY, -(int)velocityX, -(int)velocityY, -distance, distance, -distance, distance);

    post(new Runnable() {
        @Override
        public void run() {
            moveSurface();
        }
    });

    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:34:45.300

嗯，这比预期的要容易。前两个参数实际上提供了有关投掷开始位置和结束位置的信息，因此我们可以根据它找到距离变量。

```
float dx = motionEvent1.getRawX() - motionEvent2.getRawX();
float dy = motionEvent1.getRawY() - motionEvent2.getRawY();
int distance = 3 * (int)Math.sqrt(dx * dx + dy * dy);
mFlinger.fling(mFlingPrevX, mFlingPrevY, -(int)velocityX, -(int)velocityY, 
               -distance, distance, -distance, distance); 
```

到目前为止，我最喜欢这个，但显然它可以更改为您喜欢的任何内容。

# android - 以编程方式添加的片段上的后退键导致空容器

> ID：12919433
> 
> 赞同：9
> 
> 时间：2012-10-16T16:37:55.807
> 
> 标签：android, fragment, fragmenttransaction

我有一个碎片化的布局问题，如果之前已经回答过，我真诚地道歉，我太笨了，找不到它。我搜索了好几个小时却一无所获（好吧，我得到了很多但没有解决我的问题）。

所以这是我的设置：我有一个两个窗格布局，使用两个 FrameLayouts 作为我的片段的容器。活动列表.xml：

```
<FrameLayout android:id="@+id/listing" />
<FrameLayout android:id="@+id/details" /> 
```

打开应用程序时（片段活动中的 onCreate），使用 FragmentTransaction 以编程方式将名为 Listing 的片段添加到 FrameLayout“列表”中。

```
public class ListingActivity extends FragmentActivity
        implements ListingFragment.Callbacks {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_listing);

    // Displaying the first listing here ...
    Fragment fragment = new ListingFragment();
    FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.add(R.id.listing, fragment);
    ft.addToBackStack(null);
    ft.commit();
    ...
} 
```

这个 ListingFragment 在运行时被替换了几次，所以我必须创建它而不是在 XML 中定义它。我尝试了后者

```
<fragment android:name="com.example.app.ListingFragment" /> 
```

但是以后不会以编程方式替换或删除它。我只能 add() 然后旧的通过新的可见。但这不是这里的问题 - 只是对我的方式的解释。

到目前为止，所有这些都正常工作，创建和显示列表等，所以那里没有问题。但：

当ListingFragment在启动时显示并且我按下返回键时，在最后一个位置FrameLayout“列表”被清空而不是回到主屏幕！我认为这一定是因为我的 ListingActivity 的 onCreate 我显示了一个空框架并向其添加（）一个 ListingFragment。所以后栈中也有空帧。对？

我尝试通过这个来解决ListingActivity的情况：

```
@Override
public void onBackPressed() {
    super.onBackPressed();
    if(getSupportFragmentManager().getBackStackEntryCount() == 0) {
        this.finish();
    }
} 
```

但不知何故，这看起来或感觉不对……它看起来像是一个糟糕的解决方法。

那么有什么方法可以在带有空 FrameLayout 的视图膨胀之前插入片段，因此没有空状态可以“返回”到？或者是否可以从后台堆栈中删除“空”状态，即使它不在其中？关于如何在点击“后退”后避免空框的任何其他想法？

非常感谢您提前付出的努力！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T18:12:54.823

`ft.addToBackStack(null)`在 onCreate 中添加 Fragment 时不要调用。这告诉 FragmentManger 在您希望能够跳回的片段之前您有另一个状态。

# html - 为适用于所有浏览器的 wmv 文件创建一个锚标记

> ID：12919436
> 
> 赞同：0
> 
> 时间：2012-10-16T16:38:01.887
> 
> 标签：html, video

我想向我的页面添加一个链接（wmv 文件），该链接可以在所有浏览器中使用。目前，链接会自动嵌入到 IE8 的页面中。我可以添加一个带有 object type="video/x-ms-wmv" 的对象标签，但这仅适用于 windows，而不适用于 mac。

```
<a  href="http://mylink.wmv">My video</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:43:48.937

`wmv`是一种专有媒体格式，仅受某些插件支持。你不会得到普遍的支持。

如果您想嵌入具有良好浏览器支持的视频，那么您需要[混合使用编解码器和容器格式](http://en.wikipedia.org/wiki/HTML5_video#Browser_support)。

大多数情况下，您可以将 HTML 5 视频与 webm 一起使用，在一些浏览器上回退到使用 h.264 的 HTML 5 视频，然后再将 Flash 用于其他所有内容。

# nhibernate - Nhibernate 中的“DynamicMethod 的类型所有者无效”错误

> ID：12919440
> 
> 赞同：0
> 
> 时间：2012-10-16T16:38:16.127
> 
> 标签：nhibernate, generics

如果在初始化 NHibernate SessionFactory 时收到“DynamicMethod 的类型所有者无效”错误怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:38:16.127

如果您在初始化 NHibernate SessionFactory 时收到“DynamicMethod 的类型所有者无效”错误，那么很可能您在某些延迟加载/代理的类上使用了泛型方法。

Nhibernate 包含一个反射优化，可以加速代理类的创建。这种反射优化不适用于泛型。它抛出的错误是“DynamicMethod 的类型所有者无效”。不是很友好。

因此，要解决此问题，您必须停止使用泛型方法或关闭优化。要关闭优化，您必须在初始化 SessionFactory 之前运行以下代码。

```
NHibernate.Cfg.Environment.UseReflectionOptimizer = false; 
```

# css - 强制浮动：左 div 不转到下一行

> ID：12919443
> 
> 赞同：11
> 
> 时间：2012-10-16T16:38:31.460
> 
> 标签：css, html

假设我有 20 个相同的 div，它们具有 float:left 属性和一些宽度。我希望它们排成一行，如果它们不适合屏幕，只是为了使页面水平滚动。

[小提琴](http://jsfiddle.net/NPzsV/)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-16T16:46:17.533

这基本上就是花车的工作原理。如果您想要描述的行为，您可以做其他事情，例如`white-space: nowrap;`在容器上而`display: inline-block;`不是浮动。

[http://jsfiddle.net/NPzsV/3/](http://jsfiddle.net/NPzsV/3/)

```
.container {
    white-space: nowrap;
}
.line {
    display: inline-block;
    width: 200px;
    vertical-align: top;
    white-space: normal;
} 
```

不过需要注意的一点是：使用这种方法，div 之间的换行符/空格/制表符会在渲染中导致它们之间出现空格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T16:45:17.530

在 div 上使用`display: inline-block`而不是`float: left`，并将属性添加`white-space: nowrap`到其父容器。

演示：http: [//jsbin.com/akiniv/1/edit](http://jsbin.com/akiniv/1/edit)

用你的小提琴演示 ;) [http://jsfiddle.net/NPzsV/4/](http://jsfiddle.net/NPzsV/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:40:51.773

将高度设置为父div，并添加属性overflow:scroll

```
<div class="parentDiv"> 
    <div class="line">ddd</div>
    <div class="line">ddd</div>
    <div class="line">ddd</div>
     ...
</div> 
```

和CSS：

```
.parentDiv{height:50px; overflow: scroll;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T16:40:55.130

在父元素上设置硬宽度：

```
 body{ width:8000px; } 
```

[演示](http://jsfiddle.net/NPzsV/1/)

# c++ - cv::Mat aaa() 之间的区别；和 cv::Mat aaa=cv::Mat();

> ID：12919445
> 
> 赞同：2
> 
> 时间：2012-10-16T16:38:40.007
> 
> 标签：c++, opencv

在我的应用程序中，我有一个通过引用接收 cv::Mat 对象的函数。这是函数的声明：

```
 void getChains(cv::Mat &img,std::vector<chain> &chains,cv::Mat &ch,char p=0,int sx=0,int sy=0); 
```

这个函数是递归的，在第一次从主函数调用时并不真的需要 aaa，所以我只是声明了一个空的 aaa 来将它传递给函数调用。在随后的递归调用中，函数会生成自己的 ch Mat 对象。

```
std::vector<chain> chains1;
cv::Mat aaa();

getChains(bin1,chains1,aaa); 
```

但是，编译器返回错误：

main.cpp:75: 错误：从'cv::Mat (*)()' aux.h:21 的临时类型的'cv::Mat&' 类型的非常量引用的无效初始化：错误：在传递参数3 of 'void getChains(cv::Mat&, std::vector >&, cv::Mat&, char, int, int)'</p>

如果我将 aaa 声明更改为

```
 cv::Mat aaa=cv::Mat(); 
```

它编译没有问题。

该函数传递一个二进制图像 img 并获取所有像素组，其中像素粘在一起（链）并将所有像素的坐标存储在链向量中。openCV 中是否已经有一个现有的功能可以做类似的事情？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T16:43:50.623

这是一个函数定义：`cv::Mat aaa();`. 你真正想写的是`cv::Mat aaa;`

# facebook-like - Facebook LIKE 按钮未显示

> ID：12919446
> 
> 赞同：0
> 
> 时间：2012-10-16T16:38:43.893
> 
> 标签：facebook-like

我按照 facebook 开发人员文档的建议放置了 facebook like 按钮代码。

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
   var js, fjs = d.getElementsByTagName(s)[0];
   if (d.getElementById(id)) return;
   js = d.createElement(s); js.id = id;
   js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=416733691671772";
   fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-like" data-href="http://www.domain.com/" data-send="true" data-layout="box_count" data-width="450" data-show-faces="true" data-action="recommend" data-colorscheme="dark" data-font="arial"></div> 
```

奇怪的是，当我在 Firefox 和 chrome 中检查元素时，类似 facebook 的按钮的代码就在那里。它也在我的本地主机上显示..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:45:00.857

要使用“赞”按钮调试问题，请始终使用 Facebook 调试工具：http: [//developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

# c# - SQLite.Interop.dll 在运行 Visual Studio 2012 单元测试框架测试后被锁定

> ID：12919447
> 
> 赞同：20
> 
> 时间：2012-10-16T16:38:44.243
> 
> 标签：c#, sqlite, unit-testing, visual-studio-2012, dispose

*   视觉工作室 2012
*   SQLite 1.0.82.0（来自 nuget）

我正在尝试在“测试资源管理器”中使用“全部运行”命令运行一次测试后会发生以下错误......之后它将不再构建，直到您重新启动 Visual Studio

这是构建错误

> 进程无法访问文件“SQLite.Interop.dll”，因为它正被另一个进程使用

这是代码

```
using System.Data.SQLite;
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace Test.Sqlite
{
    [TestClass]
    public class Test_Sqlite_Locking
    {
        [TestMethod]
        public void can_create_table()
        {
            using(var fact = new SQLiteFactory())            
            using (var conn = fact.CreateConnection())
            {
                conn.ConnectionString = "Data Source=:memory:;Version=3;New=True;";
                conn.Open();
                //conn.Close();                
            }

            //SQLiteConnection.ClearAllPools();
            //GC.Collect();
        }
    }
} 
```

我已经尝试过，关闭连接，调用 ClearAllPools，GC.Collect，并直接创建 SQLiteConnection（而不是工厂）......仍然是同样的问题

如果您调试所有测试，这确实有效......但是当您只是运行测试时，这似乎将其锁定

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-02T11:42:29.173

我在 VS2012 中找不到该选项（至少不适用于标准单元测试），因此我想出了另一个解决方案：

您面临的问题来自单元测试运行器保持加载状态，因此重复测试运行速度更快。由于`SQLite.Interop.dll`可能不会经常更改，因此我将`CopyToOutputDirectory`选项更改为`PreserveNewest`而不是默认的`Always`.

您可以通过打开属性 (F4) 视图并选择`SQLite.Interop.dll`解决方案中的文件来执行此操作。唯一可能仍会锁定的情况是，当您升级到较新版本的 SQLite 并重新启动 VS2012 时，对我来说可以正常工作。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-03T21:41:26.417

我通过使用以下作为受影响测试项目的预构建事件来解决此问题：

对于 64 位：

```
taskkill /F /IM vstest.executionengine.exe /FI "MEMUSAGE gt 1" 
```

或 32 位：

```
taskkill /F /IM vstest.executionengine.x86.exe /FI "MEMUSAGE gt 1" 
```

这会在构建测试项目之前默默地杀死执行引擎。`/FI "MEMUSAGE gt 1"`如果执行引擎未运行，则停止命令（因此构建）失败。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-17T03:02:41.333

Try this:

*   In VS.NET, click on Tools \ Options
*   When the dialog appears, click on "Test Tools"
*   Click on "Test Execution"
*   Uncheck the box "Keep test execution engine running between tests"
*   Click OK and restart VS.NET

You should be able run SQLite based tests now without having to restart.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-21T00:37:28.633

在 Visual Studio 2013 中 - 转到“测试 > 测试设置 > 保持测试执行引擎运行”并取消选中它！为我工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-08T10:24:49.973

[不幸的是，Philipp Aumayr 提供](https://stackoverflow.com/a/13668934/3205)的解决方法（将`CopyToOutputDirectory`选项设置为`PreserveNewest`而不是默认值`Always`）适用于大多数情况，但并非全部。正如关于 SO 的其他问题所指出的那样，[`vstest.executionengine`不终止](https://stackoverflow.com/q/13497168/3205)的事实是 VS2012 中的一个常见问题——更糟糕的是，微软开发人员将此视为一项*功能*和*设计*。防止这种行为的选项在 VS2010 中存在，但在 VS2012 中已被删除。

如果您对此“改进”也有疑问，请对 Microsoft Connect 支持问题[vstest.executionengine.x86.exe（32 位）- 未关闭](https://connect.microsoft.com/VisualStudio/feedback/details/771994/vstest-executionengine-x86-exe-32-bit-not-closing-vs2012-11-0-50727-1-rtmrel)（尽管标题影响 x86 和 x64）进行投票。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-06-22T15:38:42.713

我知道这个问题很老，但我遇到了这个问题，这里的一些答案引发了一个想法。我在尝试围绕 SQLite 构建单元/集成测试时遇到的第一个问题是 MSTest（我们用于脚本构建）在运行测试之前没有将所有必要的依赖项部署到测试运行的“Out”目录，所以测试失败了。我发现解决此问题的最佳方法是将这些属性添加到我的测试类中：

```
[TestClass]
**[DeploymentItem("System.Data.SQLite.dll")]
[DeploymentItem("x86\\SQLite.Interop.Dll")]**
public class TestClass 
```

这似乎也解决了这个问题......我猜这会导致 VSTest 加载这些依赖项的不同副本，以便 VSBuild 仍然可以对您的正常 /bin/ 目录中的副本执行其操作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-19T02:00:58.523

尝试如下处理连接。它对我来说很好。

```
 private void Dispose(bool disposing)
    {
        if (_disposed) return;

        if (disposing)
        {
            if (_dbConnection != null)
            {
                _dbConnection.Cancel();
                _dbConnection.Close();
                _dbConnection.Dispose();
            }
        }

        _disposed = true;
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-16T18:05:23.120

还要确保您的数据库安装到正确的文件夹
[SQLite Connection Strings](http://www.connectionstrings.com/sqlite)

您可能还想尝试使用 SQL Lite [使用 SQLitew 和 .NET的数据适配器](http://www.c-sharpcorner.com/uploadfile/afenster/using-sqlite-with-net/)

```
SQLiteConnectionStringBuilder builder = new SQLiteConnectionStringBuilder();
builder.FailIfMissing = true;
builder.DataSource = "Insert the fully qualified path to your sqlite db";
SQLiteConnection connection = new SQLiteConnection(builder.ConnectionString);
try
{
  connection.Open();
}
catch(SqlException exp)
{
    // Log what you need from here.
    throw new InvalidOperationException("Whatever exception you want to throw", exp);
} 
```

阅读这篇文章，看看它是否有助于纠正您的问题 [System.Data.SQLite.View Ticket](http://system.data.sqlite.org/index.html/tktview?name=54e52d4c6f)

# asp.net-mvc - 用于 SHA2 的 MvC 路由的 Url.Parameter

> ID：12919449
> 
> 赞同：0
> 
> 时间：2012-10-16T16:38:55.517
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我不确定我应该如何提出这个问题，但我正在尝试路由 SHA1 加密以被 ID 接受。

**例子**

```
/Home/Index/Id
/Home/Index/A8-75-93-36-DA-4F-74-E1-E0-6B-78-98-DC-AE-FF-1F-17-CA 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:42:28.230

如果您有默认路由设置：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Default",
        "{controller}/{action}/{id}",
        new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    );
} 
```

然后是一个带有`id`参数的控制器动作：

```
public class HomeController: Controller
{
    public ActionResult Index(string id)
    {
        ...
    }
} 
```

并导航到控制器`/Home/Index/A8-75-93-36-DA-4F-74-E1-E0-6B-78-98-DC-AE-FF-1F-17-CA`的`Index`操作`Home`将被调用，id 参数将被传递哈希值。

# objective-c - 无法访问自己的 CocoaPods Pod Core Data 文件

> ID：12919451
> 
> 赞同：7
> 
> 时间：2012-10-16T16:38:56.597
> 
> 标签：objective-c, cocoapods

我创建了自己的 CocoaPods Pod 用于内部的应用程序。这个 Pod 也应该使用 Core Data。我将我的文件 xy.xcdatamodeld 添加到我的源文件中，但它没有编译到 xy.momd 文件夹中。

我是否需要在我的 Pod 中设置任何其他属性才能让 Core Data 工作？

我当前的 pod 文件：

```
 Pod::Spec.new do |s|
 s.name         = "Test"
 s.version      = "1.0"
 s.summary      = "..."
 s.homepage     = "..."
 s.license      = 'MIT (example)'
 s.author       = { "Felix Krause" => "xy@xy.com" }
 s.source       = { :git => "http://EXAMPLE/Example.podspec.git", :tag => "0.0.1" }
 s.platform     = :ios, '6.0'
 s.source_files = 'TS/Classes/**/*.{h,m}', 'TS/Views/**/*.{h,m}', 'TS/TSResources/**/*.{json,xcdatamodeld}'
 s.resources = "TS/TSResources/**/*"
 s.frameworks = 'CoreData', 'QuartzCore', 'Accounts', 'MessageUI', 'CoreLocation', 'CoreGraphics', 'MobileCoreServices', 'SystemConfiguration'
 s.requires_arc = true
 s.ios.xcconfig = { 'HEADER_SEARCH_PATHS' => '$(PODS_ROOT)/../../TS/**' }
 s.ios.xcconfig ={ 'FRAMEWORK_SEARCH_PATHS' => '"$(PODS_ROOT)/../.." "$(PODS_ROOT)/.." "$(SRCROOT)/.."' }
 s.xcconfig = { 'OTHER_LDFLAGS' => '-all_load' }
 s.dependency 'JSONKit'
 end 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-08-17T09:40:54.147

只是这样我可以回到这个，它实际上是受支持的。您需要做的就是确保您的 pod 规范列出了`.xcdatamodeld`下面的资源。大意是：

```
Pod::Spec.new do |s|
    s.name = "MyPod"
    s.version = "0.1"
    s.platform = :ios, '8.0'
    s.requires_arc = true

    s.public_header_files = 'Pod/Classes/**/*.h'
    s.source_files = 'Pod/Classes/**/*{h,m}'
    s.resources = 'Pod/Classes/CoreData/*.xcdatamodeld'
    s.frameworks = 'CoreData'
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T17:37:23.920

目前没有对此的明确支持。[这](https://gist.github.com/38a3400bffc0837af5f3)是一个如何做到这一点的例子。但是请注意，该代码未经测试，但它应该是类似的东西。那个特定的用户最终将模型定义移动到代码中，顺便说一句。

高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-11T11:41:27.977

看看以下内容：

[https://github.com/CocoaPods/Xcodeproj/issues/81#issuecomment-23142404](https://github.com/CocoaPods/Xcodeproj/issues/81#issuecomment-23142404) [https://github.com/Ashton-W/CoreDataPodSample](https://github.com/Ashton-W/CoreDataPodSample)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T04:53:14.213

我不是很擅长 Ruby，所以我不明白*合金的例子*。我所做的只是确保将其`xcdatamodeld`作为源文件包含在内，然后在我的项目中引用 Pods 目录中的该源文件。

路径最终看起来像`'../Pods/[PathToMyPod]/[MyDataModel].xcdatamodeld'`.

它有点hack，但它可以轻松完成工作。

# javascript - 获取视口的宽度并将其应用于标签或类宽度

> ID：12919455
> 
> 赞同：0
> 
> 时间：2012-10-16T16:39:13.980
> 
> 标签：javascript, html, css, horizontal-scrolling

我有水平布局，它有 5 个内联 div。javascript中有没有办法获取用户视口的宽度，然后将其应用于每个内容面板标签的宽度，所以每个内容面板中的宽度都是100%？我需要它是视口的 100%，因为里面有视差元素![在此处输入图像描述](../Images/e056225688e1a1ac0424129b5f865a5f.png)

我在下面尝试了这个 css 代码，但面板只是堆叠在一起。

```
#contentPanel { width: 100%; float: left;} 
```

我真的不知道这些问题是否有意义，因为我已经花了 16 个小时搜索并试图解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:00:08.920

使用 JQuery 很容易：

```
var fullDiv = $("div");

var viewportWidth = $(window).width();
var viewportHeight = $(window).height();

$("body, html").width(3*viewportWidth);
fullDiv.width(viewportWidth);
fullDiv.height(viewportHeight); 
```

简单[演示](http://codepen.io/anon/pen/afbtE)。

您可能希望在`div`调整浏览器大小时更新 s，目前它仅在首次加载时才有效。阅读更多关于[`.resize()`](http://api.jquery.com/resize/).

# node.js - Expressjs/connect - 模拟慢速文件上传

> ID：12919457
> 
> 赞同：9
> 
> 时间：2012-10-16T16:39:18.263
> 
> 标签：node.js, connect, express, jquery-html5uploader

有没有办法在 connect 或 express 中设置模式或值来模拟慢速文件上传？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-25T14:35:55.650

First, install `node-limiter` then create a `Transform` stream that will throttle any `Stream`s:

```
var util = require('util');
var Transform = require('stream').Transform;
var TokenBucket = require('limiter').TokenBucket;

function BucketStream(rate, interval, parentBucket, options) {
    Transform.call(this, options);
    this.bucket = new TokenBucket(Number.POSITIVE_INFINITY, rate, interval, parentBucket);
}

util.inherits(BucketStream, Transform);

BucketStream.prototype._transform = function(chunk, encoding, callback) {
    this.bucket.removeTokens(chunk.length, function(err) {
        callback(err, chunk);
    });
}; 
```

Then the request is a `ReadableStream`:

```
var bucketStream = new BucketStream(1024 * 500, 'second'); // 500KB/sec
req.pipe(bucketStream); 
```

Now read from `bucketStream` (instead from req) as fast as you want, you'll only get 500KB/sec

I did this on top of my head so beware :)

# zend-framework - 无法使用 Zend Framework 制作静态页面（关于我们）

> ID：12919458
> 
> 赞同：3
> 
> 时间：2012-10-16T16:39:19.750
> 
> 标签：zend-framework, frameworks, static

我正在尝试使用 Zend 框架创建一个网站，因为我听说它非常好，我想尝试使用框架，但是我有一个简单的问题让我发疯。

我想用静态内容制作一个简单的 mywebsite.com/about 页面，因为除了显示 html 之外不需要做任何其他事情。

我创建了一个 About 控制器，与它关联的 phtml，但是当我尝试转到 /about 时，我收到一个 404 错误，然后是：

```
The requested controller could not be mapped to an existing controller class.

Controller:
not-found(resolves to invalid controller class or alias: not-found) 
```

所以我检查了我的路由文件：

```
'router' => array(
    'routes' => array(
        'about' => array(
            'type' => 'segment',
            'options' => array(
                'route' => '/about',
            ),
            'defaults' => array(
                'controller' => 'About\Controller\About',
                'action' => 'index',
            ),
        ),
    ),
), 
```

所以如果我没记错的话，这应该调用我制作的 About 控制器，但无法找到问题所在。

如果有人可以帮助我了解我错过了什么或 Zend 没有得到什么，我将非常高兴。

编辑： Zend 的版本是 2.x，如果这改变了任何东西

#

编辑 2：感谢 James Kent 的帮助，我找到了解决方案

我的路由文件似乎是错误的，这是新的：

```
 'router' => array(
    'routes' => array(
        'about' => array(
            'type'    => 'Literal',
            'options' => array(
                'route'    => '/about',
                'defaults' => array(
                    '__NAMESPACE__' => 'About\Controller',
                    'controller'    => 'About',
                    'action'        => 'index',
                ),
            ),
        ),
    ),
), 
```

我还必须更改 About 控制器的 indexAction：

```
class AboutController extends AbstractActionController
{
public function nolayoutAction() {
    $viewModel = new ViewModel();
    //$viewModel->setTerminal(true); Uncomment to disable the layout
    return $viewModel;
}

public function indexAction()
{
    $viewModel = $this->nolayoutAction();
    return $viewModel;
}
} 
```

我希望它会帮助一些人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:46:26.810

据我所知，这样的事情应该有效：

```
$route = new Zend_Controller_Router_Route_Static(
    'about',
    array('controller' => 'about')
);
$router->addRoute('about', $route); 
```

同时，我将查找我最初了解这一点的文档。

*编辑：*事实证明，您可能需要的是自定义路线，他们的文档在[这里](http://framework.zend.com/manual/en/zend.controller.router.html)。

# java - java中的高效幂指数方法（JDK 1.7）

> ID：12919461
> 
> 赞同：1
> 
> 时间：2012-10-16T16:39:30.793
> 
> 标签：java, algorithm

我想为我的项目所需的 java 中的幂（基数，指数）创建一个最佳方法，其中基数和指数的类型都是 int，并且指数 <= 10^9。但是这必须在 java 中完成吗？我知道可以使用bitshift，但它本身就涉及到java中bitset的使用。请建议一个实现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:55:08.310

只需使用`java.lang.BigInteger`类。它有一个[pow()](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html#pow%28int%29)方法，可以以一种相当有效的方式完全满足您的需求。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-16T20:23:57.957

由于指数在 int 中，因此您已经有了数字的二进制表示（计算机确实如此）。所以你应该有三个整数，基数、指数和一个用于计算的临时整数，还有一个用于解决方案。你从这个开始：

```
unsigned int base;//you manage input for this and exponent like you wish, probably passed in as parameters
unsigned int exponent;
unsigned int temp = base;
unsigned int answer = 1;
while (exponent!=0){
    if (exponent%2 == 1){
        answer *= temp;
    }
    exponent>>1;
        temp<<1;
} 
```

请试试这个算法，让我知道它是如何工作的。while 查找以指数的最大位长度运行（即 32 次）。此代码不处理大数或负数，但我不确定您是否需要。

# sharepoint - 如果站点使用 IP 打开，事件不会触发

> ID：12919463
> 
> 赞同：0
> 
> 时间：2012-10-16T16:39:34.353
> 
> 标签：sharepoint

项目添加，项目更新事件未触发是我的网站使用 IP 地址打开。如果站点以服务器名称打开，那么所有事件都可以正常工作。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:21:21.740

在管理中心检查站点的备用访问映射。您可能必须在 IIS 上绑定 IP 并在管理中心中创建备用访问映射。

[http://techblurt.com/2011/03/24/sharepoint-alternate-access-by-ip-address/](http://techblurt.com/2011/03/24/sharepoint-alternate-access-by-ip-address/)

# objective-c - 自定义 UITableViewCell 重新创建自己

> ID：12919467
> 
> 赞同：0
> 
> 时间：2012-10-16T16:40:07.660
> 
> 标签：objective-c

真的需要帮助。我到处寻找，但仍然找不到答案。因此，当我滚动带有自定义单元格的 UITableView 时，每次看到它都会重新创建单元格。结果，它显着降低了我的表现。

我的方法

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
NSString *CellIdentifier = @"CellWithViewForProduct";
ProductCell *cell = (ProductCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
ProductDataStruct *dataStruct = [self.arrayData objectAtIndex:indexPath.row];
    NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"productCell" owner:nil options:nil];
    for(id currentObject in topLevelObjects)
    {
        if([currentObject isKindOfClass:[ProductCell class]])
        {
            cell = (ProductCell *)currentObject;
            break;
        }
    }
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
formatter.roundingIncrement = [NSNumber numberWithDouble:0.01];
formatter.numberStyle = NSNumberFormatterDecimalStyle;

NSString *price = [formatter stringFromNumber:[NSNumber numberWithFloat:(dataStruct.price.floatValue * [[[NSUserDefaults standardUserDefaults] objectForKey:@"CurrencyCoefficient"] floatValue])]];
NSString *priceString = [NSString stringWithFormat:@"%@ %@", price, [[NSUserDefaults standardUserDefaults] objectForKey:@"Currency"]];

cell.productPrice.text = priceString;
cell.productDescription.text = [NSString stringWithFormat:@"%@", dataStruct.descriptionText];
cell.productTitle.text = [NSString stringWithFormat:@"%@", dataStruct.title];

if (dataStruct.hit.integerValue == 1)
{
    [cell.productImage.layer addSublayer:[hitView layer]];
}
else
    if (dataStruct.hit.integerValue == 2)
        [cell.productImage.layer addSublayer:[newsItemView layer]];

if (!dataStruct.image)
{
    if (self.tableView.dragging == NO && self.tableView.decelerating == NO && dataStruct.link)
    {
        [self startIconDownload:dataStruct forIndexPath:indexPath];
    }
    // if a download is deferred or in progress, return a placeholder image  
    //cell.productImage.image = [UIImage imageNamed:@"Placeholder.png"];

    // if a download is deferred or in progress, return a loading screen
    cell.productImage.alpha = 0;
    [cell.productImageLoadingIndocator startAnimating];

}
else
{
    if (self.didLoad)
    {
        cell.productImage.alpha = 0;
    }
    [cell.productImageLoadingIndocator stopAnimating];
    cell.productImage.image = dataStruct.image;
    [self imageAnimation: cell.productImage];
}
NSLog(@"WAZAAA");
return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:45:18.343

整个代码块：

```
NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"productCell" owner:nil options:nil];
for(id currentObject in topLevelObjects)
{
    if([currentObject isKindOfClass:[ProductCell class]])
    {
        cell = (ProductCell *)currentObject;
        break;
    }
} 
```

对我来说似乎错了。它上面，

```
ProductCell *cell = (ProductCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

应该足以让您使用一个单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:02:08.127

首先`@property (nonatomic, assign) IBOutlet ProductCell *prodCell;`在`.h`

然后在 .m 你只需要这个

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

NSString *CellIdentifier = @"CellWithViewForProduct";

    ProductCell *cell = (ProductCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {

        [[NSBundle mainBundle] loadNibNamed:@"productCell" owner:self options:nil];

        cell = prodCell;

        self.prodCell = nil;
        NSLog(@"WAZAAA"); //Now it will only be called when a new cell is created.
    }

NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
formatter.roundingIncrement = [NSNumber numberWithDouble:0.01];
formatter.numberStyle = NSNumberFormatterDecimalStyle;

NSString *price = [formatter stringFromNumber:[NSNumber numberWithFloat:(dataStruct.price.floatValue * [[[NSUserDefaults standardUserDefaults] objectForKey:@"CurrencyCoefficient"] floatValue])]];
NSString *priceString = [NSString stringWithFormat:@"%@ %@", price, [[NSUserDefaults standardUserDefaults] objectForKey:@"Currency"]];

cell.productPrice.text = priceString;
cell.productDescription.text = [NSString stringWithFormat:@"%@", dataStruct.descriptionText];
cell.productTitle.text = [NSString stringWithFormat:@"%@", dataStruct.title];

if (dataStruct.hit.integerValue == 1)
{
    [cell.productImage.layer addSublayer:[hitView layer]];
}
else
    if (dataStruct.hit.integerValue == 2)
        [cell.productImage.layer addSublayer:[newsItemView layer]];

if (!dataStruct.image)
{
    if (self.tableView.dragging == NO && self.tableView.decelerating == NO && dataStruct.link)
    {
        [self startIconDownload:dataStruct forIndexPath:indexPath];
    }
    // if a download is deferred or in progress, return a placeholder image  
    //cell.productImage.image = [UIImage imageNamed:@"Placeholder.png"];

    // if a download is deferred or in progress, return a loading screen
    cell.productImage.alpha = 0;
    [cell.productImageLoadingIndocator startAnimating];

}
else
{
    if (self.didLoad)
    {
        cell.productImage.alpha = 0;
    }
    [cell.productImageLoadingIndocator stopAnimating];
    cell.productImage.image = dataStruct.image;
    [self imageAnimation: cell.productImage];
}
NSLog(@"WAZAAA"); //Here doesn't make any sense, the cell is returned for being displayed, this doesn't mean it's being created.
return cell;
} 
```

# .net - 从调用页面绑定到 UserControl 属性

> ID：12919470
> 
> 赞同：1
> 
> 时间：2012-10-16T16:40:13.397
> 
> 标签：.net, wpf, user-controls, dependency-properties

我创建了一个具有依赖属性的用户控件。我可以很好地设置调用页面中的属性，并且在用户控件中一切正常。但是，当依赖项属性值发生更改时，不会通知承载用户控件的页面。

用户控件中的依赖属性为：

```
public static readonly DependencyProperty SelectedSearchResultProperty = DependencyProperty.Register("SelectedSearchResult", typeof(SearchResult), typeof(QPowerFinder), new PropertyMetadata(null, OnSelectedSearchResultChanged));
public SearchResult SelectedSearchResult
{
    get { return (SearchResult)this.GetValue(SelectedSearchResultProperty); }
    set
    {
        this.SetValue(SelectedSearchResultProperty, value);
        RaisePropertyChanged("SelectedSearchResult");
    }
}
private static void OnSelectedSearchResultChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args)
{
    (obj as QPowerFinder).SelectedSearchResult = (SearchResult)args.NewValue;
} 
```

托管用户控件的页面设置为：

```
<localcont:QPowerFinder Grid.Column="1" SelectedSearchResult="{Binding BoxAccountResult, Mode=TwoWay}"/> 
```

希望的行为是依赖属性注册更改，并通过绑定通知托管页面。然而，事实并非如此。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:05:56.127

A`DependencyProperty`更像是指向另一个属性的指针

你可以让它指向你的外部`BoxAccountResult`属性，或者你可以让它指向`(SearchResult)args.NewValue`，但你不能两者都做。

我认为您要做的是更新方法`SelectedSearchResult`中的源属性，`OnSelectedSearchResultChanged`而不是将属性设置为新值。

# c - 有没有办法在不先读取磁盘扇区的情况下将几个字节写入磁盘扇区？

> ID：12919471
> 
> 赞同：4
> 
> 时间：2012-10-16T16:40:14.353
> 
> 标签：c, linux, posix

我一直在试验在 Linux 上读写文件的性能，特别是 O_DIRECT，我想知道，无论是在硬盘驱动器级别还是 posix/Linux API 级别，是否可以只将几个字节写入扇区，而不破坏扇区的其余部分，并且不先读取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:14:27.290

我对磁盘驱动器的经验是，他们希望将整个扇区的数据发送给他们。因此，基本上，没有办法写入少于整个扇区，如果您希望更改扇区的开头而不更改结尾，则**必须**读取整个扇区，修改并回写。这部分与磁盘头与盘片的交互方式有关（无论如何对于物理磁盘。在闪存驱动器的情况下，更可能与一次擦除一小块闪存的大小有关）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:26:02.847

以便携的方式？可能不是。

在 Linux 和其他一些类 Unix 系统中，您可以打开驱动器的块设备，寻找一个位置（可能与扇区大小对齐）并向其写入一些数据，但我不知道它会产生什么影响在该块的剩余部分。

最好的办法是在虚拟机上尝试一下，看看会发生什么。（显然，您必须有权写入块设备。）

# c++ - 为什么操作员新功能 - 放置形式在班级级别可以？

> ID：12919474
> 
> 赞同：3
> 
> 时间：2012-10-16T16:40:21.337
> 
> 标签：c++, placement-new

我们从 c++ 11（在 c++98/03 标准中也是如此）标准中知道（见下文），我们不能尝试替换 operator new 函数 - 全局空间中的放置形式，因为它已经定义。

> **18.6.1.3 安置表格 [new.delete.placement]**
> 
> 这些函数是保留的，C++ 程序可能不会定义取代标准 C++ 库 (17.6.4) 中的版本的函数。(3.7.4) 的规定不适用于 operator new 和 operator delete 的这些保留放置形式。

下面的代码片段中的第 2 点已经证明了这一点，按预期编译错误。

但是我仍然可以覆盖类级别中的新位置，效果很好，请参见下面片段中的第 (2) 点。这是为什么？不应该编译应该尽量防止（2）以及根据标准？？？

请参阅下面的我的片段：

```
class Test
{
public:
    Test(int i):m_i(i) { cout << "Test::Test()" << endl; }
    ~Test() { cout << "Test::~Test()" << endl; }

    //(1)class level override placement new
    void* operator new (std::size_t size) throw (std::bad_alloc) {
        cout << "My class level new" << endl;
        return malloc(size);
    }

    //(2)class level override placement new
    void* operator new (std::size_t size, void* ptr) throw() {
        cout << "My class level non-throwing placement new" << endl;
        return ptr;
    }
private:
    int m_i;

};

//<1>global replacement for operator new - single object form
void* operator new (std::size_t size) throw (std::bad_alloc) {
    cout << "My global new" << endl;
    return malloc(size);
}

//<2>global replacement for operator new - replcement  form
//NB. This is a attempt that definitely fails according to c++ stadnard:
//does get compile error: error: redefinition of 'void* operator new(std::size_t, void*)'
/*
void* operator new (std::size_t size, void* ptr) throw() {
    cout << "My global non-throwing placement new" << endl;
    return ptr;
}
*/

int main() {
    Test* p = new Test(1);
    delete p;

    cout << "" << endl;
    void* mem = operator new(sizeof(Test));
    Test* p2 = new(mem) Test(1);
    p2->~Test();
    operator delete (mem);

    return 0;
} 
```

以下是预期的输出：

```
My class level new
My global new
Test::Test()
Test::~Test()

My global new
My class level non-throwing placement new
Test::Test()
Test::~Test() 
```

==================================================== ================================= **进一步澄清我的问题：**

> **18.6.1.3 放置形式**这些函数是保留的，C++ 程序不能定义替换 **标准**C++ 库 (17.6.4) 中的版本的函数。(3.7.4) 的规定不适用于这些保留的安置表格
> 
> 运算符 new 和运算符 delete。

这解释了我的代码片段中 <2> 点处的预期编译错误，所以这个没问题。

但是为什么我可以在班级说明中的第（2）点取代班级级别的安置表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:06:59.993

§18.6.1.3 列出了以下形式：

```
void* operator new(std::size_t size, void* ptr) noexcept;
void* operator new[](std::size_t size, void* ptr) noexcept;
void operator delete(void* ptr, void*) noexcept;
void operator delete[](void* ptr, void*) noexcept; 
```

“C++ 程序不得定义取代标准 C++ 库中版本的函数”的规则仅适用于这四个函数声明，它们不在任何命名空间中。如果您在类或命名空间中制作自己的版本，那很好。

事实上，有时您*必须*提供自己的新展示位置。如果你`operator new`在你的类中声明一个 normal ，它将隐藏标准库提供的放置 new ，如果你想使用`new (ptr) T(...)`语法，你需要在类中添加你自己的放置 new 。

这只是提供了保证调用`::new (ptr) T(...)`的行为与标准放置 new 一样的*保证。*（注意`::`前缀。）

# javascript - 未捕获的 ReferenceError：分配“购物车”总计算中的左侧无效

> ID：12919476
> 
> 赞同：0
> 
> 时间：2012-10-16T16:40:32.650
> 
> 标签：javascript

```
function totalPrice()
        {
        var totalItems = document.getElementsByName("price").length;
        var total = 0;
        var rgx = /[^0-9]\x2e$/g;
        var price;
        var string_in = document.getElementsByName("price");

        for (var x=0; x<totalItems-1; x++){

            price = new Number(rgx.exec(string_in[x].text));
            parseFloat(total) = parseFloat(total) + parseFloat(price); //This is where the error occurs
        }
        document.getElementById("total").innerHTML = ' $' + total;
        } 
```

这是脚本执行的函数，我的“购物车”中有 x 个项目。我们必须只用 Javascript 编写这个函数。没有 php。命名元素包含 123.45 美元（或更多位数）形式的价格

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T16:41:42.900

呃......只需`parseFloat()`从左侧移除。

旁注：始终以整数工作，尤其是在金钱方面。在这种情况下，将您的价格以美分显示在代码端。仅在最后除以 100（或什至仅通过字符串函数插入小数点）以显示以美元为单位的结果。这将避免浮点不准确。

# ruby-on-rails - 当前用户未在一个控制器操作中持续存在

> ID：12919477
> 
> 赞同：0
> 
> 时间：2012-10-16T16:40:34.793
> 
> 标签：ruby-on-rails, session, ssl, controller, sorcery

我有一个使用 Sorcery 进行身份验证的 Rails 3.2.8 应用程序。巫术提供了一种`current_user`方法，非常标准的东西。

我的应用程序有订阅，它们几乎以标准的足智多谋的方式工作。这是控制器的精简版：

```
class SubscriptionsController < ApplicationController
  before_filter :require_login
  force_ssl

  def show
    @subscription = SubscriptionPresenter.new( current_user )
  end

  def create
    handler = StripeHandler.new( current_user )
    ...
  end

  def destroy
    handler = StripeHandler.new( current_user )
    ...
  end
end 
```

该`#show`动作工作正常，`current_user`加载。但是，现在`#create`不起作用，因为`current_user`最终`nil`处于该动作中。

那么，为什么`current_user`当登录的用户发布到这个操作时是 nil 呢？我的猜测是关于会话通过 SSL 工作的方式，但我不知道我在这里缺少什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T01:13:39.833

我想通了。事实证明，我实际上在与之交互的第 3 方库中遇到了一个静默异常，并且该异常导致了一个“未经授权”的请求，该请求将用户注销。修补后发现我的控制器没有任何问题。谢谢大家的指点。

# c - 使用 Code Composer 5.2.1 打开现有项目

> ID：12919478
> 
> 赞同：1
> 
> 时间：2012-10-16T16:40:34.893
> 
> 标签：c, msp430, code-composer

我正在评估使用 TI Code Composer 来支持 TI MSP430 微控制器的 C 程序。

但是，我无法弄清楚如何打开上周我一直在处理的项目文件，并取得了巨大的成功。

似乎没有打开现有项目的菜单项。同样，似乎没有可供选择的近期项目列表。菜单选项“切换工作场所”给了我一些选择，但我最终得到的只是一个空项目。TI 关于“Workplace”的文档对我来说不是很清楚，而且简单地打开现有项目文件的能力对我来说似乎最神秘。

我怎样才能打开一个项目并重新开始工作？

Code Composer 中的 ccsproject、cproject 和项目文件有什么区别？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:08:05.417

德州仪器 (TI) 为我回答了这个问题。

要打开和关闭现有 Code Composer Studio (CCS) 项目，您必须在 Project Explorer 窗口中右键单击鼠标。选择项目时，右键单击会弹出一个菜单，其中包括“打开项目”和“关闭项目”菜单项。单击鼠标右键还会列出其他有用的菜单项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-17T13:25:17.970

2019 年 10 月 17 日的一些更新

我是使用新手`CodeComposer 9.1`

**在Project Explorer**窗口中单击鼠标右键。

单击导入，然后单击`CCS Projects`。你会得到一个弹出窗口`import CCS Projects`

输入所有项目的根目录（我的案例`C:\Users\DO29629\workspace_v9`）。

您将获得已发现项目的列表。检查你想要的那个。

关闭项目的正确方法是右键单击**Project Explorer**并选择 Close。您也可以右键单击项目的选项卡并选择关闭。

# c# - 我必须实现哪些接口才能创建列表 或字典 连接两个值作为键

> ID：12919479
> 
> 赞同：-1
> 
> 时间：2012-10-16T16:40:37.223
> 
> 标签：c#, gethashcode, icomparable, iequalitycomparer, iequatable

我需要使我的自定义对象在字典、列表等中正常工作......这样我就可以更改对象的属性，并允许它被使用，而不是孤立。

上次我尝试覆盖 GetHashCode() 时，当我将对象添加到字典时，我孤立了对象，对对象进行了更改（更改了 GetHashCode），这以某种方式导致字典无法正确地从内存中处理对象。

**问题**

有人可以解释一下：

*   我需要在 TrustedEntityReference 中覆盖哪些接口和接口才能连接`int`并`TrustedEntity`在排序字典中正常工作？

*   对于 .NET 字典对象中使用的内容，哪些值决不能更改，否则会冒着孤立对象的风险？（例如，更改对象发出的哈希码可能会导致字典出现 GC 问题）

这是我正在处理的当前示例对象。

```
namespace Model
{
    public class TrustedEntity
    {
        public TrustedEntity()
        {
            this.BackTrustLink = new List<TrustedEntityReference>();
            this.ForwardTrustLink = new List<TrustedEntityReference>();
        }

        public List<TrustedEntityReference> BackTrustLink { get; set; }

        public string EntryName { get; set; }

        public List<TrustedEntityReference> ForwardTrustLink { get; set; }
    }

    // This is the object I want to be treated as a "key" in the above List<T>
    // I want a duplicate object exception to occur if a duplicate TrustedEntityReference is inserted into trustedEntity.BackTrustLink or trustedEntity.ForwardTrustLink

    public class TrustedEntityReference   
    {
        public int HierarchyDepth { get; set; }
        public TrustedEntity TrustedEntity {get; set; }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:41:16.960

你实际上根本不需要做任何特别的事情，只要重复数据不是问题（或者因为它没有发生，其他东西正在强制它，或者因为你*希望*它在那里多次）。

具体来说，根据[这个答案](https://stackoverflow.com/a/1407408/298754)，您可以使用任何对象，它只检查**引用相等性**。这个对象是同一个对象吗？具有相同数据的不同对象会有所不同，但相同的对象，即使您更改了数据，也将是相同的。

因此，对于您的示例，如果您`List<TrustedEntityReference>`从相同的初始数据填充您的 's，您将不会遇到问题。如果他们每个人都加载自己的数据集，这将无济于事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:59:48.317

[使用List](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)或[Dictionary](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)不需要接口

TKey 不能更改（否则您将无法在 Dictionary 中找到条目，因为您将寻找错误的键）。

**编辑**：
看起来我错过了 TKey 类型。

> 字典需要一个相等的实现来确定键是否相等。您可以使用接受比较器参数的构造函数来指定 IEqualityComparer 通用接口的实现；如果未指定实现，则使用默认的通用相等比较器 EqualityComparer.Default。如果类型 TKey 实现 System.IEquatable 泛型接口，则默认相等比较器使用该实现。

我希望这意味着 TrustedEntityReference 应该实现[IEqualityComparer](http://msdn.microsoft.com/en-us/library/ms132151.aspx)接口（尽管我会同时实现[ICompariable](http://msdn.microsoft.com/en-us/library/system.icomparable%28v=vs.110%29.aspx)）。[您还可以使用Dictionary(IEqualityComparer)](http://msdn.microsoft.com/en-us/library/ms132072.aspx)构造函数
指定您自己的。

这些接口中的方法必须始终返回相同的值，即使对象的值已更改。

[http://msdn.microsoft.com/en-us/library/ms132072.aspx](http://msdn.microsoft.com/en-us/library/ms132072.aspx)

如果您需要更多，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:00:27.777

所以主要的事情是覆盖 GetHashCode 和 Equals （不包括排序的东西）。接下来要确保的是，一旦从 GetHashCode 返回了一个值，即使在该对象的生命周期内，您也需要返回相同的值，即使它生成的值已被修改。

对于排序，您应该只需要 IComparable 作为默认比较器，或者您可以给它自己的比较器实例。

# javascript - JavaScript 用逗号或点表示实数的正则表达式

> ID：12919484
> 
> 赞同：3
> 
> 时间：2012-10-16T16:40:55.343
> 
> 标签：javascript, regex, numbers, expression

我想知道我在检查实数的代码中做错了什么：

```
var regex = new RegExp(/([0-9]+[\.|,][0-9]*)|([0-9]*[\.|,][0-9]+)|([0-9]+)/g);
var invalid = this.value.match(regex); 
```

以上对我不起作用，而表达式

```
([0-9]+[\.|,][0-9]*)|([0-9]*[\.|,][0-9]+)|([0-9]+) 
```

在测试仪中工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T16:41:47.943

做

```
var regex = new RegExp("([0-9]+[.|,][0-9])|([0-9][.|,][0-9]+)|([0-9]+)/g);([0-9]+[.|,][0-9])|([0-9][.|,][0-9]+)|([0-9]+)", 'g'); 
```

或者

```
var regex = /([0-9]+[.|,][0-9])|([0-9][.|,][0-9]+)|([0-9]+)/g​; 
```

两种构造是可能的：`new RegExp(string,'g')`或`/somestring/g`。不要混合它们。在您使用常量正则表达式的情况下，选择第二个会更有效，因为它是预编译的。

请参阅[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T16:56:24.347

首先，您不需要对`new RegExp()`不在字符串中的正则表达式执行操作。

`/regexp/rule`或者`new RegExp("regexp", "rule");`

其次：

`[0-9]`如果可以使用，为什么要使用`\d`？

第三：

你为什么用`[.|,]`？你想匹配吗？也？`[.,]`会做你想要完成的工作。

第四：

对照数字字符串检查：`/^(?:[1-9]\d{0,2}(?:,\d{3})*|0)(?:\.\d+)?$/`

你可以这样做：

```
var regexp = /^(?:[1-9]\d{0,2}(?:,\d{3})*|0)(?:\.\d+)?$/;

alert(regexp.test("0")); // true
alert(regexp.test("1")); // true
alert(regexp.test("01")); // false (or check out the regex at the bottom)
alert(regexp.test("123")); // true
alert(regexp.test("1234")); // false
alert(regexp.test("123,4")); // false
alert(regexp.test("123,456,789,012")); // true
alert(regexp.test("123,456,789,012.")); // false
alert(regexp.test("123,456,789,012.12341324")); // true
alert(regexp.test("0.12341324")); // true 
```

如果你想匹配类似 0,000,000.0000 的东西，你可以使用这个正则表达式：

`/^\d{1,3}(?:,\d{3})*(?:\.\d+)?$/`

如果您想要 +- 在前面，您可以添加 Bergi 提到的内容。我的正则表达式将如下所示：

`/^[+-]?\d{1,3}(?:,\d{3})*(?:\.\d+)?$/`

或者：`/^[+-]?(?:[1-9]\d{0,2}(?:,\d{3})*|0)(?:\.\d+)?$/`

正如Bergi所说，你应该知道如何拥有。作为分组运算符和 , 作为分隔符。为此，您只需要替换`,`为`\.`和`\.``,`

有替换 , 和 的表达式。

```
/^?\d{1,3}(?:\.\d{3})*(?:,\d+)?$/ <- matches 00,000,000.00000
/^?(?:[1-9]\d{0,2}(?:\.\d{3})*|0)(?:,\d+)?$/ <- matches 1,123,123,123.1234
/^[+-]?\d{1,3}(?:\.\d{3})*(?:,\d+)?$/ <- matches -00,000.0
/^[+-]?(?:[1-9]\d{0,2}(?:\.\d{3})*|0)(?:,\d+)?$/ <- matches -12,123.12345 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T17:09:17.507

我建议这样做：

```
/[+-]?(?:\d*[.,])?\d+/ 
```

它使用快捷方式`\d`而不是`[0-9]`，而且我认为您不想将管道匹配为小数分隔符。方括号定义了一个[字符类](http://www.regular-expressions.info/charclass.html)，其中特殊字符失去了它们的含义（`.`不需要转义，`|`不意味着 OR） - 你可能是指`(\.|,)`. 另外我不确定你是否真的想匹配没有十进制数字的浮点数（例如`"12,"`） - 我已经省略了它们；并且我在开始时允许使用可选符号。

# function - 将函数的返回值分配给 unix shell 脚本中的变量

> ID：12919486
> 
> 赞同：15
> 
> 时间：2012-10-16T16:41:06.937
> 
> 标签：function, shell, unix

我试图打印从 testfunction 返回的值。但它没有显示任何东西。我曾经`./filename.sh`执行脚本。请帮忙

```
#!/bin/ksh
testfunction()
{

k=5

return $k

}

val=$(testfunction)

echo  $val 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-16T16:51:51.350

函数返回的值存储在 中`$?`，不会被 捕获`$()`。

换句话说：

```
testFunction() 
{ 
    k=5
    echo 3
    return $k 
}

val=$(testFunction)
echo $? # prints 5
echo $val  # prints 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-26T17:25:54.753

您正在尝试做的将在 val 变量中捕获函数中“回显”的最后一个值

```
val=$(testFunction) 
```

如果要捕获函数的返回值，则应使用 $? [ie echo $?] 这是最后的退出状态。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2015-11-17T16:54:01.410

此 ksh 功能有效：

```
IPADDRESS()     # get the IP address of this host
{
    # purpose: to get the IP address of this host
    #       and return it as a character string
    #
    typeset -l IPADDR
    IPADDR=$(ifconfig -a | grep inet | grep -v '127.0.0.1' | awk '{print $2}')
    print $IPADDR
}

IP_Address=$(IPADDRESS)
echo $IP_Address
exit 
```

# ruby-on-rails - 回形针和 aws gems - 照片共享应用程序 回形针/aws 存储的网址在哪里？

> ID：12919494
> 
> 赞同：0
> 
> 时间：2012-10-16T16:41:49.563
> 
> 标签：ruby-on-rails, heroku, amazon-s3, ios6, paperclip

我将此应用程序[链接](https://devcenter.heroku.com/articles/ios-photo-sharing-geo-location-service)称为教程。看了之后。我很想了解程序（客户端或服务器）如​​何访问图像。由于程序似乎没有在服务器数据库中明确保存图像 url，一旦它们被上传到 Amazon S3？

实施此应用程序后，我在数据库中看不到 image_urls 或路径的列。但是程序神奇地在客户端加载图像！

引擎盖下发生了什么事，那是什么？

这是照片模型方法：

```
 Paperclip.interpolates :prefix  do |attachment, style|
   "#{attachment.instance.takenby}/#{Date.today.to_s }/#   
  {attachment.instance.image_file_name}"
 end 

 has_attached_file :image,
                :path => ":prefix/:style/:basename.:extension",
                :styles => { :thumbnail => "57x57", :original => "300x300" },
                :storage => :s3,
                :s3_credentials => S3_CREDENTIALS

  validates :image,:presence => true
  validates :lat, :lng,:presence => true,:numericality => true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:06:11.740

它就在 的选项中`has_attached_file`。您已经告诉它如何在参数中构造图像的路径（对应于 s3 上的文件名）`:path`。所以所有回形针需要知道再次找到图像是：

1.  您的 s3 存储桶的主机名
2.  重建路径的相关信息 - 在这种情况下，看起来像`:prefix`、`:basename`、`:style`和`:extension`。

大多数信息都在您的数据库中。可能`:basename`以某种方式来自原始文件名，它应该保存在`image_file_name`图像附加到的模型的字段中。`:style`取决于您在运行时查找的图像大小。`:extension`可以从`image_content_type`属性中判断。

`:prefix`有点棘手。事实上，我担心您的插值规则会破坏您的图像查找，因为`Date.today`它用于构造前缀。你有超过一天的图片吗？如果是这样，它们仍然有效吗？我担心当图片上传时，它会有一个包含当天日期的文件名，然后当你以后去查找它们时，你会使用*新*的当前日期重建 url，并以 403 错误结束。

TL;DR 回形针在将图像上传到 s3 时构造图像 url，并稍后从相同的参数重建它们。

# c# - 用于 C# 和/或 Java 的 Jasmine

> ID：12919495
> 
> 赞同：9
> 
> 时间：2012-10-16T16:41:55.897
> 
> 标签：c#, java, jasmine

Jasmine 是一个不错的 JavaScript 单元测试框架。它不仅测试您的代码，还提供了一种很好的记录方式：

*   使用流利的 BDD-ish 方式来定义本身几乎读起来像文档的测试
*   测试报告读起来也像文档

我想知道 C# 和/或 Java 是否存在类似的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-31T18:29:22.463

我刚刚在 GitHub 上遇到了[NJasmine](https://github.com/fschwiet/DreamNJasmine)。我从未使用过它，但我认为这可能会帮助像我这样想要在 C# 单元测试中使用 Jasamine 的人。

来自 GitHub：

> NJasmine 是一种 RSpec-ish 测试语言，灵感来自用于 C# / .Net 编程的 javascript 测试库 Jasmine ( [https://github.com/fschwiet/DreamNJasmine )。](https://github.com/fschwiet/DreamNJasmine)

```
given("some preconditions", () => {

    var range = 10;

    when("the system under test is ran", () => {

        var sut = new SystemUnderTest();

        bool score = arrange(() => sut.Fire(range));

        then("win!", () => {

            expect(() => score);
        });
    });
}); 
```

> 在 Nuget 上可用：http: [//nuget.org/List/Packages/NJasmine](http://nuget.org/List/Packages/NJasmine)

同样，我不能保证这一点，因为我没有使用它，但我希望这将有助于其他人做出明智的决定。

高温高压

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-11T21:52:35.503

**[Oleaster](https://github.com/mscharhag/oleaster)**是一个语法简洁的 Java 测试框架，广泛使用 Java 8 箭头函数。它使用 JUnit runner 执行。

来自 hompage 的代码示例：

```
@RunWith(OleasterRunner.class)
public class OleasterIntroductionTest {{
    describe("A suite", () -> {
        it("contains a spec with an expectation", () -> {
            expect(40 + 2).toEqual(42);
        });
    });
}} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-10T13:35:06.240

[JUnit 5](http://junit.org/junit5/)将类似于 BDD，具有 @DisplayName、@Nested 等。您可以查看[文档](http://junit.org/junit5/docs/current/user-guide/#writing-tests-nested)。

GA 版本尚未发布，但应该很快就会发布（2016 年末宣布）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-16T16:51:31.507

一个非常流行的测试 Java（和 Groovy）的框架是[Spock](http://code.google.com/p/spock/)，它的测试读起来也像书面规范。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-16T16:54:53.777

查看[Cucumber-JVM](http://c0deattack.wordpress.com/2012/03/28/cucumber-jvm-with-cucumber-java-cucumber-junit-example/)以实现 BDD。它基于 Java，但也适用于基于 JVM 的语言（Scala、Groovy）。

如果使用 Jenkins 等持续集成系统，可以使用名为[Cucumber Reports](https://github.com/masterthought/cucumber-reporting)的报告插件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-16T16:43:26.757

Java 的等价物是[JBehave](http://jbehave.org/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-06T04:57:05.877

[Ginkgo4j](http://paulcwarren.github.io/ginkgo4j/)是 Ruby 的 RSpec BDD 的一个端口。

```
@RunWith(Ginkgo4jRunner.class)
public class MyTests {

  private SystemUnderTest systemUnderTest;

  private int range;

  private bool score;

  {
    Describe("SystemUnderTest", () -> {
      BeforeEach(() -> {
        systemUnderTest = new SystemUnderTest();
      });
      Context("#Fire", () -> {
        JustBeforeEach(() -> {
          score = systemUnderTest.Fire(range));
        });
        Context("given a range", () -> {
          BeforeEach(() -> {
            range = 10;
          });
          It("should return a winning score!", () => {
            assertThat(score, is(true));
          });
      });
    });
  }
} 
```

# opencart - 如何在opencart的产品页面上显示货币？

> ID：12919496
> 
> 赞同：2
> 
> 时间：2012-10-16T16:41:58.107
> 
> 标签：opencart

我想在产品描述页面上显示货币列表。我怎样才能做到这一点？

我从 header.tpl () 复制代码并将其粘贴到 product.tpl 中，但出现错误：

注意：未定义变量：第 60 行 C:\xampp\htdocs\mysite.com\catalog\view\theme\mytheme\template\product\product.tpl 中的货币。

我尝试在 product.tpl 中添加以下代码。

```
<?php include(DIR_APPLICATION.'\view\theme\mytheme\template\module\currency.tpl'); 
```

但这也不起作用。请帮忙，因为我想让这个工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-29T09:07:39.537

controller/common/header.php 函数 index() 添加到：

```
 $this->data['mygetcurrency'] = $this->currency->getCode(); 
```

catalog\view\theme\default\template\common\header.tpl 添加到：

```
 <?php echo $mygetcurrency; ?>
      //EUR 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-22T11:12:02.080

我想这可能是最简单的方法。

```
<?php echo $this->currency->getSymbolRight($this->session->data['currency']) ?> 
```

或者

```
<?php echo $this->currency->getSymbolLeft($this->session->data['currency']) ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T16:51:27.287

最好是这样做

```
$this->load->model('localisation/currency');
$this->data['allcurrencies'] = array();
$results = $this->model_localisation_currency->getCurrencies();   
foreach ($results as $result) {
     if ($result['status']) {
           $this->data['allcurrencies'][] = array(
           'title'        => $result['title'],
           'code'         => $result['code'],
           'symbol_left'  => $result['symbol_left'],
           'symbol_right' => $result['symbol_right']            
        );
     }
 } 
```

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T07:06:12.573

$currency 变量由 /catalog/controller/module/currency.php 控制器构建，通常由 /catalog/controller/common/header.php 调用（使用 $this->children 数组）。

要在产品模板中显示此元素，您需要使用产品控制器 (/catalog/controller/product/product.php) 的 $this->children 数组调用此控制器（及其视图）。在 opencart 1.5.4.1 中，它在第 362 行附近

```
$this->children = array(
    'common/column_left',
    'common/column_right',
    'common/content_top',
    'common/content_bottom',
    'common/footer',
    'common/header',
    'module/currency' // Just add this line
); 
```

不幸的是，默认情况下这会在页面顶部显示货币元素，因为该元素的样式设置为绝对定位。您需要编辑 /catalog/view/theme/*/template/module/currency.tpl 以使 HTML 和 CSS 更加灵活。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-03T18:01:52.720

你可以使用非常简单的代码。将此添加到您的控制器文件中。

```
$data['currency-symbol'] = $this->currency->getSymbolLeft($this->session->data['currency']); 
```

现在您可以使用它在相关的 .tpl 文件中回显它

```
<?php echo $currency-symbol ;?> 
```

# java - 插入给予问题

> ID：12919500
> 
> 赞同：2
> 
> 时间：2012-10-16T16:42:10.150
> 
> 标签：java, mysql, sql, sql-insert

我做了一个简单的插入语句，但效果不佳。它给我的错误是

> com.mysql.jdbc.exceptions.MySQLSyntaxErrorException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取正确的语法，以便在 'From, To, Message, Date, Read) VALUES (3,1,'iepa','2012-10-16 16:26:42' 附近使用,0)' 在第 1 行

这是我的 sql 的代码。

```
 Connection conn = Connect.getConnection();
            try{
                Statement stmt = conn.createStatement();
                String sql = "INSERT INTO MESSAGE("
                        + "From,"
                        + "To,"
                        + "Message,"
                        + "Date,"
                        + "Read) "
                        + "VALUES(?,?,?,?,?)";
                PreparedStatement pstat = conn.prepareStatement(sql, Statement.RETURN_GENERATED_KEYS);
                pstat.setInt(1, user.getId());
                pstat.setInt(2, Integer.parseInt(who.getText().toString()));
                pstat.setString(3, message.toString());
                pstat.setTimestamp(4, new Timestamp(new Date().getTime()));
                pstat.setInt(5, 0);
                pstat.executeUpdate(); 
```

如您所见，我没有做任何奇怪或如此困难的事情，但我无法运行它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T16:43:26.270

您需要像反引号一样转义[MySQL 中的保留字](http://dev.mysql.com/doc/refman/5.5/en/keywords.html)`from`

```
String sql = "INSERT INTO MESSAGE("
               + "`From`,"
               + "`To`,"
               + "Message,"
               + "Date,"
               + "`Read`) "
               + "VALUES(?,?,?,?,?)"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T16:47:11.337

`From`将,`Read`和更改`Date`为不是 SQL 关键字的任何其他列名。在 MySQL 中查找[保留字列表](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)

# objective-c - 在目标 c (Mac OSX) 中打开应用程序时获取 url 事件

> ID：12919502
> 
> 赞同：3
> 
> 时间：2012-10-16T16:42:13.940
> 
> 标签：objective-c, url, launch, appleevents, geturl

我正在为 OSX 10.6+ 编写一个非常轻量级的应用程序，它将响应用户单击 URL，将该 URL 通过 TCP 传递给另一个应用程序，然后退出。

到目前为止，当用户单击自定义 url 方案时，它已经注册好启动。但是，如果应用程序尚未运行，该事件似乎会丢失。所以用户点击链接，应用程序加载，但没有任何反应。应用程序运行后，如果用户单击链接，则它会抓取事件并正常处理它。

我需要做什么才能捕获导致应用程序首先打开的初始事件？

目前我在 applicationDidFinishLaunching 方法中创建 NSAppleEventManager ，这适用于在初始加载后创建的所有事件，但不适用于实际打开应用程序本身的事件。

任何建议都会很棒！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T16:45:35.870

您应该`-applicationWillFinishLaunching:`改为创建 AppleEvent 处理程序。

这个想法是在您的应用程序开始处理 AppleEvents*之前*准备好您的处理程序。

# c# - Linq动态添加where条件

> ID：12919504
> 
> 赞同：3
> 
> 时间：2012-10-16T16:42:30.570
> 
> 标签：c#, linq

我有一个gridview，它在每个标题中都有用于过滤的下拉框。每个过滤器在加载时都会加载其列中的不同值。在运行时，我添加“ALL”以允许用户从该字段中选择所有内容。如果下拉框设置为“ALL”，我正在尝试动态构建 linq 语句以忽略该字段。这可能吗？我想看看我是否可以在一个声明中做到这一点。下面的示例仅显示 2 个下拉框，但我的实际案例最多有 5 个。

如果我选择使用 if then 语句，我最终会得到意大利面条代码。

```
DropDownList drpOwners = this.grdOtherQuotes.HeaderRow.FindControl("drpOwners") as DropDownList;                     
DropDownList drpCompanyName = this.grdOtherQuotes.HeaderRow.FindControl("drpCompanyName") as DropDownList;

var filteredList = (from x in allQuotes
                          where (drpOwners.SelectedValue != ALL) ? x.SalesRepFullName == drpOwners.SelectedValue:true                                    
                                && drpCompanyName.SelectedValue != ALL ? x.CompanyName == drpCompanyName.SelectedValue: true
                          select x); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T16:45:12.120

就个人而言，我发现将其分解更简单：

```
IEnumerable<Quote> filteredList = allQuotes;
// If using EF or LINQ to SQL, use: IQueryable<Quote> filteredList = allQuotes;
if (drpOwners.SelectedValue != ALL) 
   filteredList = filteredList.Where(x => x.SalesRepFullName == drpOwners.SelectedValue);
if (drpCompanyName.SelectedValue != ALL) 
   filteredList = filteredList.Where(x => x.CompanyName == drpCompanyName.SelectedValue);
// More conditions as needed 
```

这真的不再是了，而且要简单得多。

* * *

如果您真的希望能够将其编写为“单线”，您可以创建一个扩展方法来构建查询。例如，如果使用实体框架：

```
static IQueryable<T> AddCondition(this IQueryable<T> queryable, Func<bool> predicate, Expression<Func<T,bool>> filter)
{
     if (predicate())
         return queryable.Where(filter);
     else
         return queryable;
} 
```

然后，您可以将其写为：

```
var filteredList = allQuotes
                     .AddCondition(() => drpOwners.SelectedValue != ALL, x => x.SalesRepFullName == drpOwners.SelectedValue)
                     .AddCondition(() => drpCompanyName.SelectedValue != ALL, x.CompanyName == drpCompanyName.SelectedValue); 
```

当然，您可以更进一步，制作一个硬连接谓词的版本，以检查一个组合框与“ALL”相对，使谓词更短（只是组合框）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:50:26.340

您可以创建一个处理 All 逻辑的辅助方法。就像是：

```
private bool CompareSelectedValue(string value, string dropDownValue)
{
  if(dropDownValue == "ALL")
    return true;
  else
    return value == dropDownValue;
} 
```

那么您的查询可能是：

```
var filteredList = (from x in allQuotes
                          where (CompareSelectedValue(x.SalesRepFullName, drpOwners.SelectedValue)                                    
                                && CompareSelectedValue(x.CompanyName, drpCompanyName.SelectedValue)
                          select x); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:59:33.427

创建封装 where 逻辑的扩展方法，使其看起来更清晰：

```
var filteredList = allQuotes.WhereDropOwnersAreContained()
                            .WhereCompanyIsContained()
                            ...
                            ; 
```

# ruby-on-rails-3 - Capistrano 部署资产预编译从不编译资产，为什么？

> ID：12919509
> 
> 赞同：2
> 
> 时间：2012-10-16T16:42:50.577
> 
> 标签：ruby-on-rails-3, deployment, capistrano, asset-pipeline, precompile

**仅当它们更改时才使用 deploy.rb 预编译 Rails 资产，此任务总是跳过我的资产的编译:(**

```
namespace :assets do
  task :precompile, :roles => :web, :except => {:no_release => true} do
    from = source.next_revision(current_revision)
    if capture("cd #{latest_release} && #{source.local.log(from)} vendor/assets/ app/assets/ | wc -l").to_i > 0
      run %Q{cd #{latest_release} && #{rake} RAILS_ENV=#{rails_env} #{asset_env} assets:precompile}
    else
      logger.info "Skipping asset pre-compilation because there were no asset changes"
    end
  end
end 
```

什么可能导致这个完整的任务无法编译？它始终认为没有资产更改并抛出该消息。

我也从来没有真正理解过这个任务，例如下面的 source.log.local 指的是什么？

```
source.local.log 
```

任何人都可以澄清任务命令的作用，并有一些指示为什么它永远不会看到任何资产变化？谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-16T18:31:45.040

**它能做什么：**

```
from = source.next_revision(current_revision) 
```

`source`是对您的源代码的引用，从您的 SCM（git、svn 等）可以看出。这设置`from`为（本质上）源代码的当前部署版本。

```
capture("cd #{latest_release} && #{source.local.log(from)} vendor/assets/ app/assets/ | wc -l") 
```

`capture`意思是“在 shell 中执行这个命令，并返回它的输出”。有问题的命令引用了对您的源的更改日志，将部署的版本与当前版本进行比较（将资产所在的路径指定为“重要”的路径），并将其传递到字数统计工具 ( `wc -l`)。该`-l`选项意味着它返回输出中行数的计数。因此，输出（由 返回`capture`）是在这两个版本之间发生更改的文件名的数量。

如果该数字为零，则任何指定路径中的文件都没有更改，因此我们跳过预编译。

**为什么它不起作用：**

我不知道。代码本身似乎没有任何问题 - 它或多或少与我使用的代码段相同。您可以检查以下几件事：

1.  Capistrano 是否知道您正在使用资产管道？检查您的 Capfile。如果你没有`load 'deploy/assets'`，部署甚至不会考虑编译你的资产。

2.  事实上，您是否启用了资产管道？检查 application.rb`config.assets.enabled = true`

3.  您是否指定了不正确的资产路径？该代码正在检查 和 中的`vendor/assets/`更改`app/assets/`。如果您的资产位于其他地方（`lib/assets`例如 ），它们将不会被注意到。（如果是这种情况，您可以更改该行以包含正确的路径。

4.  事实上，自上次部署以来，您是否更改了任何资产？我建议绕过检查更改资产并强制预编译运行一次，然后重新打开检查并看到问题神奇地自行解决。在下面的示例中，设置`force_precompile = true`可以做到这一点。

**我用什么：**

这是我目前使用的版本。这可能会有所帮助。或不。与原作的变化：

1.  一种更易读的方式来指定资产路径（如果您使用它，请记住设置`asset_locations`为您的资产所在的位置）
2.  一种强制预编译运行的简单方法（设置`force_precompile=true`为尝试运行检查，但无论如何都运行预编译）
3.  无论预编译是否运行，它都会打印出计数。我很高兴获得一些输出以确保检查正在运行。
4.  如果在尝试比较文件时发生错误（例如，在全新项目中经常发生），它会打印错误但无论如何都会运行预编译。

.

```
 namespace :assets do
    task :precompile, :roles => :web, :except => { :no_release => true } do
      # Check if assets have changed. If not, don't run the precompile task - it takes a long time.
      force_compile = false
      changed_asset_count = 0
      begin
        from = source.next_revision(current_revision)
        asset_locations = 'app/assets/ lib/assets vendor/assets'
        changed_asset_count = capture("cd #{latest_release} && #{source.local.log(from)} #{asset_locations} | wc -l").to_i
      rescue Exception => e
        logger.info "Error: #{e}, forcing precompile"
        force_compile = true
      end
      if changed_asset_count > 0 || force_compile
        logger.info "#{changed_asset_count} assets have changed. Pre-compiling"
        run %Q{cd #{latest_release} && #{rake} RAILS_ENV=#{rails_env} #{asset_env} assets:precompile}
      else
        logger.info "#{changed_asset_count} assets have changed. Skipping asset pre-compilation"
      end
    end
  end 
```

# iphone - 如何向 Cocoapod 添加自定义字体？

> ID：12919513
> 
> 赞同：30
> 
> 时间：2012-10-16T16:43:11.963
> 
> 标签：iphone, ios, uifont, cocoapods

我想在 Cocoapod 中使用自定义字体，但在静态库中使用自定义字体时找不到任何内容。由于没有 info.plist 文件，因此无法告诉应用程序使用什么字体。

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-04-26T16:48:21.180

有一种方法可以在不向 plist 文件中添加任何内容的情况下使用自定义字体。

```
 NSBundle *bundle = [NSBundle bundleForClass:[self class]];
    NSURL *fontURL = [bundle URLForResource:<#fontName#> withExtension:@"otf"/*or TTF*/];
    NSData *inData = [NSData dataWithContentsOfURL:fontURL];
    CFErrorRef error;
    CGDataProviderRef provider = CGDataProviderCreateWithCFData((CFDataRef)inData);
    CGFontRef font = CGFontCreateWithDataProvider(provider);
    if (!CTFontManagerRegisterGraphicsFont(font, &error)) {
        CFStringRef errorDescription = CFErrorCopyDescription(error);
        NSLog(@"Failed to load font: %@", errorDescription);
        CFRelease(errorDescription);
    }
    CFSafeRelease(font);
    CFSafeRelease(provider); 
```

您还需要该`CFSafeRelease`功能才能正常工作。

```
void CFSafeRelease(CFTypeRef cf) {
    if (cf != NULL) {
        CFRelease(cf);
    }
} 
```

来源：[动态加载 iOS 字体](https://marco.org/2012/12/21/ios-dynamic-font-loading)。

斯威夫特等效：

```
extension UIFont {
    static func registerFont(bundle: Bundle, fontName: String, fontExtension: String) -> Bool {
        guard let fontURL = bundle.url(forResource: fontName, withExtension: fontExtension) else {
            fatalError("Couldn't find font \(fontName)")
        }

        guard let fontDataProvider = CGDataProvider(url: fontURL as CFURL) else {
            fatalError("Couldn't load data from the font \(fontName)")
        }

        guard let font = CGFont(fontDataProvider) else {
            fatalError("Couldn't create font from data")
        }

        var error: Unmanaged<CFError>?
        let success = CTFontManagerRegisterGraphicsFont(font, &error)
        guard success else {
            print("Error registering font: maybe it was already registered.")
            return false
        }

        return true
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-06-08T01:51:50.990

如果我理解正确，您正在尝试为您的 Cocoapod 提供一种字体，并且您希望包含该 pod 的 iOS 应用程序能够使用您的自定义字体。

这个`post_install`钩子似乎有效：

```
Pod::Spec.new do |s|
  # ...
  s.resources = "Resources/*.otf"
  # ...
  s.post_install do |library_representation|
    require 'rexml/document'

    library = library_representation.library
    proj_path = library.user_project_path
    proj = Xcodeproj::Project.new(proj_path)
    target = proj.targets.first # good guess for simple projects

    info_plists = target.build_configurations.inject([]) do |memo, item|
      memo << item.build_settings['INFOPLIST_FILE']
    end.uniq
    info_plists = info_plists.map { |plist| File.join(File.dirname(proj_path), plist) }

    resources = library.file_accessors.collect(&:resources).flatten
    fonts = resources.find_all { |file| File.extname(file) == '.otf' || File.extname(file) == '.ttf' }
    fonts = fonts.map { |f| File.basename(f) }

    info_plists.each do |plist|
      doc = REXML::Document.new(File.open(plist))
      main_dict = doc.elements["plist"].elements["dict"]
      app_fonts = main_dict.get_elements("key[text()='UIAppFonts']").first
      if app_fonts.nil?
        elem = REXML::Element.new 'key'
        elem.text = 'UIAppFonts'
        main_dict.add_element(elem)
        font_array = REXML::Element.new 'array'
        main_dict.add_element(font_array)
      else
        font_array = app_fonts.next_element
      end

      fonts.each do |font|
        if font_array.get_elements("string[text()='#{font}']").empty?
          font_elem = REXML::Element.new 'string'
          font_elem.text = font
          font_array.add_element(font_elem)
        end
      end

      doc.write(File.open(plist, 'wb'))
    end
  end 
```

钩子找到用户项目，并在第一个目标中（您可能可以通过要求 CocoaPods 给您真正的目标来完成此解决方案）它会查找其`Info.plist`文件（通常只有一个）。最后，它查找`UIAppFonts`文件的键，如果没有找到就创建它，如果字体名称不存在，则用字体名称填充数组。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2018-03-06T23:06:30.820

对于那些在 2018+ 年发现这一点的人，我通过以下两个步骤获得了自定义字体以**与界面构建器支持 (XCode 9) 一起使用：**

1.  将字体添加到框架的资源包中（在 .podspec 文件中）

    ```
    s.resources = "PodName/**/*.{ttf}" 
    ```

2.  使用上面亚当的答案在运行时加载字体

    ```
    #import <CoreText/CoreText.h>

    void CFSafeRelease(CFTypeRef cf) { // redefine this
      if (cf != NULL) {
        CFRelease(cf);
      }
    }

    + (void) loadFonts {
      NSBundle *frameworkBundle = [NSBundle bundleForClass:self.classForCoder];
      NSURL *bundleURL = [[frameworkBundle resourceURL] URLByAppendingPathComponent:@"PodName.bundle"];
      NSBundle *bundle = [NSBundle bundleWithURL:bundleURL];

      NSURL *fontURL = [bundle URLForResource:@"HindMadurai-SemiBold" withExtension:@"ttf"];
      NSData *inData = [NSData dataWithContentsOfURL:fontURL];
      CFErrorRef error;
      CGDataProviderRef provider = CGDataProviderCreateWithCFData((CFDataRef)inData);
      CGFontRef font = CGFontCreateWithDataProvider(provider);
      if (!CTFontManagerRegisterGraphicsFont(font, &error)) {
          CFStringRef errorDescription = CFErrorCopyDescription(error);
          NSLog(@"Failed to load font: %@", errorDescription);
          CFRelease(errorDescription);
      }
      CFSafeRelease(font);
      CFSafeRelease(provider);
    } 
    ```

3.  运行 pod 安装

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-08-23T21:06:47.130

**斯威夫特 5 实施**

我可以通过在我的 Cocoapod 中创建以下类来解决这个问题，然后只需`CustomFonts.loadAll()`从我的主应用程序的`AppDelegate.swift`. 之后，我可以在我的应用程序中使用这样的字体：

`let myFont = CustomFonts.Style.regular.font`

请注意，`Style`枚举不是必需的，它只是一种方便的分离关注点的方法。您也可以致电：

`let myFont = UIFont(name: "SourceSansPro-SemiBold", size: 14)`

```
import CoreText

public class CustomFonts: NSObject {

  public enum Style: CaseIterable {
    case mono
    case regular
    case semibold
    public var value: String {
      switch self {
      case .mono: return "SourceCodePro-Medium"
      case .regular: return "SourceSansPro-Regular"
      case .semibold: return "SourceSansPro-SemiBold"
      }
    }
    public var font: UIFont {
      return UIFont(name: self.value, size: 14) ?? UIFont.init()
    }
  }

  // Lazy var instead of method so it's only ever called once per app session.
  public static var loadFonts: () -> Void = {
    let fontNames = Style.allCases.map { $0.value }
    for fontName in fontNames {
      loadFont(withName: fontName)
    }
    return {}
  }()

  private static func loadFont(withName fontName: String) {
    guard
      let bundleURL = Bundle(for: self).url(forResource: "[CococpodName]", withExtension: "bundle"),
      let bundle = Bundle(url: bundleURL),
      let fontURL = bundle.url(forResource: fontName, withExtension: "ttf"),
      let fontData = try? Data(contentsOf: fontURL) as CFData,
      let provider = CGDataProvider(data: fontData),
      let font = CGFont(provider) else {
        return
    }
    CTFontManagerRegisterGraphicsFont(font, nil)
  }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-06T11:09:01.927

好吧，idk 是否可以作为答案，但您也可以查看需要字体的 cocoapod，如下所示： [https ://github.com/parakeety/GoogleFontsiOS](https://github.com/parakeety/GoogleFontsiOS)

库包含许多字体，我需要 Chivo，所以我添加了 pod 'GoogleFontsiOS/Chivo' 并使用它而不是自己编写字体加载代码。

# windows-runtime - WInRT 中的 WriteableBitmapEx 调整大小函数

> ID：12919516
> 
> 赞同：0
> 
> 时间：2012-10-16T16:43:21.230
> 
> 标签：windows-runtime, image-resizing, writeablebitmapex

我尝试编写将调整图像大小的函数。我将 WriteableBitmapEx 用于 WinRT/Win8 函数 Resize();

```
public class PictureExtension 
{
    private MemoryRandomAccessStream _memoryRandomAccessStream;
    private readonly Stream _dataStream;
    private readonly double _height;
    private readonly double _width;

    public PictureExtension(Stream dataStream, double height, double width)
    {
        _dataStream = dataStream;
        _memoryRandomAccessStream = (_dataStream.ToRandomAccessStream());
        _height = height;
        _width = width;
    }

    public byte[] ToArray(double maxSide)
    {
        if (_height <= maxSide && _width <= maxSide)
        {
            return _dataStream.ToArray();
        }
        else
        {
            var target = new WriteableBitmap((int) _width, (int) _height);

            var aspectRatio = (double)_width / _height;
            double newHeight;
            double newWidth;
            if (_width > _height)
            {
                newWidth = maxSide;
                newHeight = newWidth / aspectRatio;
            }
            else
            {
                newHeight = maxSide;
                newWidth = maxSide * aspectRatio;
            }

            int count = (int)_dataStream.Length;

            using (var bmpStream = target.PixelBuffer.AsStream())
            {
                bmpStream.Seek(0, SeekOrigin.Begin);
                bmpStream.Write(_dataStream.ToArray(), 0, _dataStream.ToArray().Length);
            }

            var resized = target.Resize((int)newWidth, (int)newHeight, WriteableBitmapExtensions.Interpolation.Bilinear);

            return resized.ToByteArray();

        }

    }
} 
```

}

这个函数返回字节数组，但它不再是图像了..我用PNG和JPG格式测试过..有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T07:44:45.807

我之前一直在研究这个问题，试试这个线程中的代码：
[How to resize Image in C# WinRT/winmd?](https://stackoverflow.com/questions/12349611/how-to-resize-image-in-c-sharp-winrt-winmd)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T20:37:29.793

如果您在 CodePlex 网站上关注您的帖子，最好的帮助是；) [http://writeablebitmapex.codeplex.com/discussions/399624](http://writeablebitmapex.codeplex.com/discussions/399624)

无需交叉发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T20:53:42.200

不确定这是否对您有帮助，但是我写了一个 LoadAsync() 重载，以给定的解码分辨率加载位图，这可能会根据您的情况对您有所帮助。

[http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/0657c67a93d5#WinRTXamlToolkit%2fImaging%2fWriteableBitmapLoadExtensions.cs](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/0657c67a93d5#WinRTXamlToolkit%2fImaging%2fWriteableBitmapLoadExtensions.cs)

# php - 在foreach中比较来自不同数组的两个变量

> ID：12919521
> 
> 赞同：0
> 
> 时间：2012-10-16T16:43:28.890
> 
> 标签：php, variables, foreach

我对 PHP 编程真的很陌生，我很沮丧，因为我认为这应该有效，但它没有。我真的错过了一些东西......

```
<?php
foreach ($datas as $name)
    {
        if ($name['state'] === 'MA') 
        {
        echo
            '<input type="hidden" name="id" value="' . $name['id'] .     '" />' .
            '<h2>' . htmlentities($name['name']) . '</h2>' .
            '<p>' .
            htmlentities($name['description']) . ' ' . 
```

...

```
'<h1>' . $name['id'] . '</h1>';

     foreach ($commentdatas as $name2)
     {
     if ($name['id'] == $name2['parkid'])
        {   
          echo $name['id'] . $name2['parkid'];
        }       
      }
}
}
?>
</div> 
```

在我到达第二个 foreach 语句之前，一切都运行良好。`foreach works`。_ 当我测试时，`$name['id']`回声正确，就像`$name2['parkid']`.

即使在循环中，系统正确识别这些似乎也没有问题。`But inside the if statement, nothing echos at all.`

显然 if 语句有问题。我到处寻找我能找到的地方，但我无法找出比较这些变量的正确方法。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:11:22.203

试试[in_array()](http://php.net/manual/en/function.in-array.php)函数

```
foreach ($commentdatas as $name2)  {

     if ($name['id'] == $name2['parkid'])
        {   
          echo $name['id'] . $name2['parkid'];
        }       
      }
} 
```

用。。。来代替

```
if(in_array($name['id'],$commentdatas)){

      echo $name['id'] . $name2['parkid'];      

} 
```

# sql - case 语句而不是多个选择

> ID：12919524
> 
> 赞同：1
> 
> 时间：2012-10-16T16:43:32.973
> 
> 标签：sql, select, case

我在下面有几个代码语句，我正在尝试找出一种方法来使这变得更加简单和容易。我认为 CASE 陈述是最好的，但经过几天的反复试验，我一直无法弄清楚如何做到这一点。任何和所有的帮助和/或解释将不胜感激。

```
select Count(lcs.statename)  as [Name 1]
   FROM hsi.itemlc as ilc
   LEFT JOIN hsi.lcstate as lcs on lcs.statenum = ilc.statenum
   where lcs.statename = 'Follow Up'
   AND lcnum = '412'
   AND status = '0'
select Count(lcs.statename)  as [Name 2]
   FROM hsi.itemlc as ilc
   LEFT JOIN hsi.lcstate as lcs on lcs.statenum = ilc.statenum
   where lcs.statename = 'Initial Review'
   AND lcnum = '412'
   AND status = '0'
select Count(lcs.statename)  as [Name 3]
   FROM hsi.itemlc as ilc
   LEFT JOIN hsi.lcstate as lcs on lcs.statenum = ilc.statenum
   where lcs.statename = 'Execution'
   AND lcnum = '412'
   AND status = '0'
select Count(lcs.statename)  as [Name 4]
   FROM hsi.itemlc as ilc
   LEFT JOIN hsi.lcstate as lcs on lcs.statenum = ilc.statenum
   where lcs.statename = 'Holdback'
   AND lcnum = '412'
   AND status = '0' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:46:16.573

尝试类似：

```
SELECT SUM(CASE WHEN lcs.statename = 'Follow Up' THEN 1 ELSE 0 END) as [Name 1],
    SUM(CASE WHEN lcs.statename = 'Initial Review' THEN 1 ELSE 0 END) as [Name 2],
    SUM(CASE WHEN lcs.statename = 'Execution' THEN 1 ELSE 0 END) as [Name 3],
    SUM(CASE WHEN lcs.statename = 'Holdback' THEN 1 ELSE 0 END) as [Name 4]
FROM hsi.itemlc as ilc
LEFT JOIN hsi.lcstate as lcs on lcs.statenum = ilc.statenum
WHERE lcnum = '412'
AND status = '0' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:46:41.547

您可以使用 SUM() 和 CASE 来完成：

```
SELECT
      SUM(CASE WHEN lcs.statename = 'Follow Up' THEN 1 ELSE 0 END)  as [Name 1],
      SUM(CASE WHEN lcs.statename = 'Initial Review' THEN 1 ELSE 0 END)  as [Name 2],
      ...
   FROM hsi.itemlc as ilc
   LEFT JOIN hsi.lcstate as lcs on lcs.statenum = ilc.statenum
   WHERE lcnum = '412' AND status = '0'; 
```

或者，如果您可以读取多行，则可以使用`GROUP BY`：

```
SELECT lcs.statename, COUNT(*) AS num
    FROM hsi.itemlc as ilc
    LEFT JOIN hsi.lcstate as lcs on lcs.statenum = ilc.statenum
    WHERE lcnum = '412' AND status = '0'
    GROUP BY lcs.statename; 
```

这会给你类似的东西

```
Follow Up        25
Initial Review   17
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:47:20.017

您可以将 CASE 语句与`SUM()`函数一起使用，如下所示：

```
SELECT SUM(CASE WHEN lcs.statename = 'Follow Up' THEN 1 ELSE 0 END)  as [Name 1],
       SUM(CASE WHEN lcs.statename = 'Initial Review' THEN 1 ELSE 0 END)  as [Name 2],
       SUM(CASE WHEN lcs.statename = 'Execution' THEN 1 ELSE 0 END)  as [Name 3],
       SUM(CASE WHEN lcs.statename = 'Holdback' THEN 1 ELSE 0 END)  as [Name 4]
FROM hsi.itemlc as ilc
LEFT JOIN hsi.lcstate as lcs on lcs.statenum = ilc.statenum
WHERE lcnum = '412'
  AND status = '0' 
```

这导致每个州名称的条件计数。

# .net - 对 .NET 字典进行排序 - 错误或不受支持的功能？

> ID：12919527
> 
> 赞同：0
> 
> 时间：2012-10-16T16:43:41.977
> 
> 标签：.net, sorting, dictionary

我最近发现了生产代码，包括对 .NET 的排序`Dictionary<string,CustomObject>`。基本上是将字典复制到临时字典，然后 .Clear() 原始字典并插入通过 Linq 表达式排序的 KeyValuePairs，按 CustomObjects 中的 DateTime 值。

我预计此代码不起作用并且已经将其删除，并期望无法对字典（以及 HashSet）进行排序。然后我编写了以下测试代码，令我惊讶的是，当使用 foreach 循环进行迭代时，它显示了字典的排序输出。

这是当前实现中的随机效应`Dictionary<TKey, TValue>`，它可能在当前情况下有效，但在 .NET 的另一个实现中失败？或者它是在 .NET 词典中使用的标准功能？

我仍然认为生产代码有问题，但可以正常工作。如果订单是在我找到排序例程的地方以外的地方使用的，我应该删除它吗，需要长时间的测试，还是让它保持原样安全？

这是我的测试代码：

```
static void Main(string[] args)
{
    var rnd = new Random();
    var dict = new Dictionary<int, string>();
    for (int i = 0 ; i < 10 ; i++)
    {
        int rndValue;
        do
        {
            rndValue = rnd.Next(100);
        }
        while (dict.ContainsKey(rndValue));

        dict.Add(rndValue, "MyValue#" + i);
    }

    foreach (KeyValuePair<int, string> pair in dict)
    {
        Console.WriteLine("Key: " + pair.Key + ", Value: " + pair.Value);
    }

    Console.Write("Enter...");
    Console.ReadLine();

    var dictBuff = dict.ToDictionary(p => p.Key, p => p.Value);
    dict.Clear();

    var sortdict = from pair in dictBuff orderby pair.Key ascending select pair;

    foreach (KeyValuePair<int, string> pair in sortdict)
    {
        dict.Add(pair.Key, pair.Value);
    }

    Console.WriteLine("'Sorted' Dictionary:");

    foreach (KeyValuePair<int, string> pair in dict)
    {
        Console.WriteLine("Key: " + pair.Key + ", Value: " + pair.Value);
    }

    Console.Write("Enter...");
    Console.ReadLine();

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T16:46:32.073

它基于当前的实现，但不能保证跨实现。除非您使用[SortedDictionary](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx)或更改最后一个 foreach 循环以迭代 dict.OrderBy(pair => pair.Key)，否则无法保证顺序。

[从文档（备注部分）](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)：

> 出于枚举的目的，字典中的每个项目都被视为表示值及其键的 KeyValuePair 结构。***返回项目的顺序未定义。***

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:52:02.237

Dictionary 只是一个带有每个元素的标识符的列表，因此元素将按照它们被放入的顺序返回。但是，不能保证没有人例如删除一个元素只是为了再次插入它，这会使它又在后面。

如果您想确保 Dictionary 保持排序状态，我建议您使用[SortedDictionary类。](http://msdn.microsoft.com/de-de/library/f7fta44c%28v=VS.80%29.aspx)

或者，您可以让 LINQ 在需要时对字典进行排序。

顺便说一句，您可以替换此代码部分：

```
 var sortdict = from pair in dictBuff orderby pair.Key ascending select pair;

    foreach (KeyValuePair<int, string> pair in sortdict)
    {
        dict.Add(pair.Key, pair.Value);
    } 
```

和

```
 foreach (var pair in dictBuff.OrderBy(x => x.Key))
    {
        //dict.Add(pair.Key, pair.Value);
        //meaningful code here
    } 
```

**更新**

您可以做另一件事而不是使用 SortedDictionary：使用 a`List<KeyValuePair<int, string>>`或 Array 而不是`Dictionary<int, string>`. 迭代时的用法完全一样，但您将无法使用索引器`list[someItem]`。然后，您需要做`list.Single(x => x.Key == someItem)`或替代使用`First`or `FirstOrDefault`。

```
//var sortedList = dictBuff.OrderBy(x => x.Key).ToArray();
var sortedList = dictBuff.OrderBy(x => x.Key).ToList(); 
```

应该做的伎俩。

# java - Android - 创建动态 TextView

> ID：12919535
> 
> 赞同：0
> 
> 时间：2012-10-16T16:44:16.610
> 
> 标签：java, android, xml, textview

我正在创建一个 Android 游戏，但使用 TextView 的动态文本存在问题。在我的布局中，我有一个 TextView，在一个相对布局中，有足够的空间容纳几行。

我想做的是在 TextView 中添加 5 行，其功能是一旦尝试编写第 6 行，它会自动覆盖第 1 行，因此最多只显示 5 行文本。

我所追求的示例：

```
dynamic line 1
...
dynamic line 5 
```

请在下面找到我的 xml 代码：

```
<RelativeLayout android:id="@+id/battleconsole" 
    android:layout_width="fill_parent"
    android:layout_height="135dp"
    android:gravity="center_horizontal"
    android:layout_below="@+id/spacer1" >

    <TextView
            android:id="@+id/battle_details"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:text="Console with information" />
 </RelativeLayout> 
```

这是我用来更新 TextView 中的文本的代码：

```
TextView update = (TextView)findViewById(R.id.battle_details);
update.setText("test console data going in here"); 
```

我不确定这是否甚至可以使用 TextView，如果没有，还有其他方法可以解决这个问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T16:49:44.643

Keep the 5 lines in a collection (array or list). When you set the text on the TextView, join the lines in the collection on "\n". Then just replace the item in the collection with the updated text.

Android has a join method in the TextUtils class, but I prefer the Guava library's Joiner class. Check it out: [Google Guava](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CB4QFjAA&url=http%3A%2F%2Fcode.google.com%2Fp%2Fguava-libraries%2F&ei=7o99UNiaOIiriQKDjoEw&usg=AFQjCNE4z91wPxF5-hFfz8PNXRZICqqn5A&sig2=3X98mbpPcZrJuvLkoDilhA)

# c# - 通过多维数组寻找路径

> ID：12919539
> 
> 赞同：0
> 
> 时间：2012-10-16T16:44:24.127
> 
> 标签：c#, path-finding

我开始使用 C# 编写地牢爬虫，并且已经编写了关卡生成代码。

但是，我遇到了一个问题。我的关卡地图存储在一个 32x32 的多维数组中，每个图块存储为一个字符串。除以下所有图块（所有这些名称都是代表该图块的变量名称）（mongroveplant、tree、hjalaplant、vnosplant、barraplant、weedplant、naroplant、deathweedplant、venustrap、strangulator、雕像、emptiness 和stonewall）不能走过去。

这些图块（可以走过去）构成更长的列表，可在此处找到：可行走的[图块](http://pastebin.com/2dkqXDq7)。在 32x32 多维数组的每个条目中，每个条目都是一个字符串。

如何创建一个寻路算法，避免上面列出的所有图块，但可以遍历链接中列出的所有图块？我正在尝试从“开始”磁贴到“退出级别”磁贴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:56:24.830

我要删除的第一件事是字符串的概念。就视频游戏而言，解析字符串并不快。您想要的是为每个图块（位域）设置标志。最后，您会喜欢旗帜，因为您可以组合它们！

```
[Flags]
public enum TileDescription
{ 
    Walkable,
    Trap,
    Altar,
    Door
} 
```

它们也可以存储在 int 中，这样占用的空间要少得多。速度和空间，两个惊人的概念。

至于寻路算法，那里有很多。但基本上，你有一个起点，一个终点，你必须在两者之间找到最快的方法。这个想法是检查最近的“节点”，看看你是否更接近你的目标。每次，您都对新节点重复检查。如果你被困住了，你会倒退到仍然有可用路径的节点。

你有一些不错的基本算法：

[http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)

[http://en.wikipedia.org/wiki/A*_search_algorithm](http://en.wikipedia.org/wiki/A%2a_search_algorithm)

然而，远程寻路总是非常昂贵。您必须将寻路限制在原点周围的特定范围内。解析整个 32x32 迷宫可能需要很长时间才能找到最快的路线。在大多数情况下，当您超出特定范围时，您会将您的 NPC 移动到最近的点，然后在到达该点或到达该点时重复寻路。寻路的诀窍是在许多帧上进行，并且永远不要尝试一次处理所有内容。

# java - Hibernate Tools 4.0.0 检测不与 MySQL Db 一起使用的多对多表

> ID：12919540
> 
> 赞同：2
> 
> 时间：2012-10-16T16:44:27.717
> 
> 标签：java, hibernate, many-to-many, one-to-many, hibernate-tools

我正在使用 Hibernate Tools 使用 STS 2.9.2 和 Hibernate Tools 4.0.0 从 MySQL 5.5.27 进行逆向工程。

它正确地生成 POJO 类，但***没有***拾取跨表定义的外键关系（即根本没有创建集合或关系***！***）。

根据您的经验，这个工具是否适用于 MySQL 或我做错了什么？

谢谢，

鲍勃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:20:18.253

很多时候mysql的默认引擎也会导致这个问题，即如果创建表的默认引擎是“MyISAM”，那么请将其更改为“InnoDB”；要更改的查询是**ALTER TABLE table_name ENGINE = InnoDB;** ，希望这有效:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:25:35.400

好的，我终于成功了！

问题是，就像所有具有技术性质的事物一样，既简单又深刻。

一句话：**区分大小写**

我用大写字母（即人，电话）创建了我的表，我使用 MySQL Workbench 创建了外键，它们看起来像这样：

约束`FK_Phone_Person`外键 ( `person_id`) 引用`Person`( `person_id`)

***代替***

约束`FK_Phone_Person`外键 ( `person_id`) 引用`person`( `person_id`)

注意大写。

*在花了很多血、汗水和泪水试图让这该死的东西正常工作后，*SOO很高兴，而问题一直都是****问题***所在！*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:54:09.883

我的经验是，逆向工程工具需要特定的约束才能工作，如果你有 @OneToMany 关系，它们必须有一个中间表，其中包含两个表的 id 以及你不能有空值或孤立行的约束。

此外，这些表需要根据您的实体进行命名，并且中间表必须命名为`owning_entity_entity2`可以正常工作。*

# debugging - IDEA：调试器跳线

> ID：12919555
> 
> 赞同：2
> 
> 时间：2012-10-16T16:45:22.120
> 
> 标签：debugging, intellij-idea

我不确定这里发生了什么。

1.  我设置了一个断点。
2.  我在调试模式下启动代码。
3.  调试器跳转到断点
4.  一世`step over`
5.  调试器去某个地方，但下一行......

这是一个已知的问题？我没有正确使用该工具吗？

这是一个例子：

**调试器启动，我们在断点处停止。**

![在此处输入图像描述](../Images/39db811fb3aad7cbcf127bfaef6d8a19.png)

**而不是去我要求进入的类的构造函数（预计到第 29 行）**

![在此处输入图像描述](../Images/cfd4b8979829d5dde8ef7f99b05c525c.png)

**它会自动跳转到超类 (!@$!#)**

![在此处输入图像描述](../Images/f2487dfb2f660e73a5ce032c27589da0.png)

**但是然后...当我`step over`跳过行时..**

我想（当我`step over`）去下一行，当我`step in`想少一点，做它被告知的事情时。这是我实例中某处的配置问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T19:03:10.880

要获得类似于 Eclipse 的行为，请使用`Run`| **Smart Step Into**，这将直接跳到构造函数，忽略可以在它之前运行的任何其他可执行代码。请注意，**单步**执行不会单步执行不包含可执行代码的行（第 21 行）。

虽然使用键盘快捷键要快得多，但您仍然可以将**Smart Step Into**操作添加到`File`|中的工具栏。`Settings`| **菜单和工具栏**，**主工具栏**。

# java - 如何使用 SWTBot 导航视图菜单？

> ID：12919562
> 
> 赞同：2
> 
> 时间：2012-10-16T16:45:53.817
> 
> 标签：java, eclipse, eclipse-plugin, swtbot

是否可以使用 SWTBot 查看菜单？视图菜单的一个示例是问题视图之一（见屏幕截图）。例如，如何使用 SWTBot 将分组更改为类型？我试过了：

```
for (final SWTBotViewMenu a : this.bot.viewById("org.eclipse.ui.views.ProblemView").menus()) {
        System.out.println(a.getText());
    }
this.bot.viewById("org.eclipse.ui.views.ProblemView").toolbarDropDownButton("View Menu").menuItem("Group By").menu("None").click(); 
```

for 循环根本没有给出任何东西，而第二个循环给出了一个错误，即找不到“查看菜单”。我不知道如何浏览这个菜单？

![截屏](../Images/3e2278ba7d7c5ed4091b1f7a322af725.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:32:25.137

对于OP来说可能为时已晚，但这里有：

出于某种原因，激活“问题”之类的视图的直接方式不起作用。您可以使用此解决方法：

```
this.bot.menu("Window").menu("Show View").menu("Problems").click();
SWTBotView problemsView = bot.activeView(); 
```

不过，这只会对第一部分有所帮助。您现在可以通过以下方式访问工具栏按钮：

```
List<SWTBotToolbarButton> toolbarButtons = problemsView.getToolbarButtons(); 
```

对于“问题”视图，这使您可以访问“关注活动任务”按钮，但角落中的三个按钮“视图菜单”、“最小化”和“最大化”不会出现在此列表中。不幸的是，我目前还没有解决方案。

[编辑]

您可以像这样调出视图菜单：

```
this.bot.menu("Window").menu("Navigation").menu("Show View Menu").click(); 
```

但我不知道之后如何从中选择一个项目。也许别人会知道...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-30T10:00:02.143

尝试这个：

```
SWTBotView view = bot.viewByTitle("MyView");
    view.show();
    view.viewMenu().menu("MyContextOption").click(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T16:34:33.397

问题来自这个菜单填充了动态条目的事实。SWTBot 不处理此类条目。请参阅**ViewMenuFinder.getMenuItem()**。处理了不同类型的**IContributionItem**，但在问题视图的情况下，这些项目的类型为**DynamicMenuContributionItem**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-05T13:57:29.600

我认为您可以尝试：

```
theView.viewMenu().menu("Group By").menu("Type").click(); 
```

对于 Project Explorer 视图，我可以使用 SWTBot 2.8.0 做同样的事情

# sql - 需要查询以获取每个人的 ID 明智值

> ID：12919563
> 
> 赞同：0
> 
> 时间：2012-10-16T16:46:03.400
> 
> 标签：sql, oracle10g, pivot

> **可能重复：**
> [Oracle SQL 数据透视查询](https://stackoverflow.com/questions/4841718/oracle-sql-pivot-query)

我有一个表结构如下

```
P_id    P_name  P_value
123         chetan  34
123         john    83
123         paul    38
273         chetan  54
273         john    24
273         paul    34 
```

需要输出如下。

```
Pid chetan  john    paul
123    34   83      38
273    54   24      34 
```

请建议我查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T16:50:53.470

由于您使用的是 Oracle 10g，因此没有任何`PIVOT`功能。`CASE`因此，您可以使用带有聚合函数的语句来复制它。如果您知道要作为列的值，则可以对其进行硬编码：

```
select p_id,
  max(case when p_name = 'chetan' then p_value end) chetan,
  max(case when p_name = 'john' then p_value end) john,
  max(case when p_name = 'paul' then p_value end) paul
from table1
group by p_id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/8a0aa4/1)

如果您不知道这些值，那么您将需要使用它的动态版本，类似于：

```
CREATE OR REPLACE procedure dynamic_pivot(p_cursor in out sys_refcursor)
as
    sql_query varchar2(1000) := 'select P_id ';

    begin
        for x in (select distinct P_name from table1 order by 1)
        loop
            sql_query := sql_query ||
              ' , max(case when P_name = '''||x.P_name||''' then P_value end) as '||x.P_name;

                dbms_output.put_line(sql_query);
        end loop;

        sql_query := sql_query || ' from Table1 group by P_id';

        open p_cursor for sql_query;
    end;
/ 
```

然后执行它，你可以使用：

```
variable x refcursor
exec dynamic_pivot(:x)
print x 
```

结果将是：

```
 P_ID     CHETAN       JOHN       PAUL
---------- ---------- ---------- ----------
       123         34         83         38
       273         54         24         34 
```

# android - 如何使用意图过滤器从图库中获取多个图像 uri

> ID：12919564
> 
> 赞同：0
> 
> 时间：2012-10-16T16:46:05.803
> 
> 标签：android, android-intent, android-gallery, intentfilter

我想使用意图过滤器获取多个图像 URI，而不实现整个自定义文件选择器。

要获取我使用的单个图像的 URI

```
private void openImage() {
        try {
            Intent i = new Intent(Intent.ACTION_GET_CONTENT);
            i.setType("image/*");
            startActivityForResult(i, FILE_REQ_CODE);
        } catch (RuntimeException e) {

        }

    }

protected void onActivityResult(int requestCode, int resultCode,
            Intent intentData) {
        try {
            Uri tmp = intentData.getData();
            filePath = getRealFilePathFromURI(tmp);
            super.onActivityResult(requestCode, resultCode, intentData);
        } catch (RuntimeException e) {

        }

    } 
```

这很好用...

但是我不知道如何使用 Intent 过滤器进行多项选择。

我怎样才能获得多个 URI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:46:58.607

没有办法获得多个图像，至少不能通过`Intent`像`ACTION_GET_CONTENT`. 对不起！

# c# - 在 C# 中实现 Linq Distinct

> ID：12919571
> 
> 赞同：2
> 
> 时间：2012-10-16T16:46:26.233
> 
> 标签：c#, distinct

我已经编写了以下代码以`Linq.Distinct(IEqualityComparer)`尽可能最基本的方式实现，但是`simpleCollection`如果为 1，则返回 2 项。

奇怪的是，我注意到断点`Equals`永远不会被击中。

这可能与我的实施有关`GetHashCode()`吗？

```
 public class testobjx
    {
        public int i { get; set; }
    }

    public  class mytest
    {
        public Main()
        {
            var simpleCollection = new[] { new testobjx() { i = 1 }, new testobjx() { i = 1 } }.Distinct(new DistinctCodeType());
            var itemCount = simpleCollection.Count();//this should return 1 not 2.
        }
    }

    public class DistinctCodeType : IEqualityComparer<testobjx>
    {
        public bool Equals(testobjx x, testobjx y)
        {
            return x.i == y.i;
        }

        public int GetHashCode(testobjx obj)
        {
            return obj.GetHashCode();
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T16:48:30.790

尝试：

```
public int GetHashCode(testobjx obj)
{
    if (obj == null) return 0;
    return obj.i.GetHashCode();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:01:49.257

对象的GetHashCode的默认实现是基于对象的实例，因此具有相同值的两个testobjx实例具有不同的哈希码。您需要修改 GetHashCode 方法以询问对象的属性。如果对象有多个属性，您需要找出唯一标识对象所需的属性并从中组成单个哈希码。

# python - Python程序结构importError

> ID：12919579
> 
> 赞同：1
> 
> 时间：2012-10-16T16:46:42.223
> 
> 标签：python, importerror, python-import

我有一个python项目的结构：

```
RF

\__init__.py

----tools

--------\__init__.py

--------drawtools.py

----examples

--------\__init__.py

--------something.py 
```

所有 __init__.py 都留空。现在，在“something.py”中输入：

```
from RF.tools.drawtools import * 
```

我得到：

```
ImportError: No module named RF.tools.drawtools 
```

什么是正确的程序结构？我必须在初始化文件中放一些东西吗？我注意到如果“something.py”在顶层目录中它可以工作。奇怪的是，我正在使用的 IDE PyCharm 似乎可以识别导入并给我代码补全。

我听说过一些关于设置 PYTHONPATH 的信息，但由于这个项目必须在一个团队中共享，我希望让事情尽可能简单（你将项目从一个复制到一个并运行它而不会出现任何烦人的 importError）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:11:05.003

我认为它可以与[相对导入](http://docs.python.org/tutorial/modules.html#intra-package-references)一起使用，例如

```
from .. import drawtools 
```

# c# - 我可以将 JSON.NET 与我的商业应用程序一起分发吗？

> ID：12919584
> 
> 赞同：11
> 
> 时间：2012-10-16T16:46:54.897
> 
> 标签：c#, .net, json, json.net

我正在寻找一个 .NET JSON 库，我可以使用它以类似 xpath 的方式访问 JSON 对象。例如，给定一个字符串中的 JSON 对象，可以通过在另一个字符串中指定路径来访问其属性。好吧，我发现 JSON.NET 可以完成这项工作，但是我不确定我是否可以在没有任何法律后果或限制的情况下将其与我的商业应用程序一起使用和分发。另外，我不打算分发我的应用程序的代码。

我检查了他们的自述文件，许可证规定如下。我只是想确保在选择这个库之前没有隐藏信息或有用的信息。谢谢！

执照：

> 版权所有 (c) 2007 James Newton-King
> 
> 特此免费授予任何获得本软件和相关文档文件（“软件”）副本的人，以不受限制地处理本软件，包括但不限于使用、复制、修改、合并的权利、发布、分发、再许可和/或出售本软件的副本，并允许向其提供本软件的人这样做，但须符合以下条件：
> 
> 上述版权声明和本许可声明应包含在本软件的所有副本或大部分内容中。
> 
> 本软件按“原样”提供，不提供任何形式的明示或暗示保证，包括但不限于适销性、特定用途适用性和非侵权保证。在任何情况下，作者或版权持有人均不对任何索赔、损害或其他责任承担任何责任，无论是在合同、侵权或其他方面，由本软件或本软件的使用或其他交易引起或与之相关。软件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-16T16:54:37.683

JSON.NET 是在 MIT 许可下获得许可的，它允许您在任何类型的应用程序中使用它而没有任何限制。顺便说一句，如果您在商业应用程序中使用它，我会建议您从[主站点](http://json.codeplex.com/)引用以下内容（当然不要觉得有义务）：

> Json.NET 是一个免费的开源项目，我花了数百个小时开发了自己的时间。如果您在商业上使用 Json.NET，并且您发现 Json.NET 很有用，我会很感激捐赠以帮助支持未来的发展。-詹姆斯NK

# asp.net-mvc - 使用具有多个连接的 linq 查询时如何解决“指定的强制转换无效”错误？

> ID：12919590
> 
> 赞同：0
> 
> 时间：2012-10-16T16:47:11.650
> 
> 标签：asp.net-mvc, linq

我遇到了一个问题，我试图在我的存储库中构建一个 Linq 查询，该查询包含来自数据库中不同表的多个连接，然后将其作为对象返回给我的控制器以显示。我得到的错误是：“指定的演员表无效。”

问题部分似乎是当我尝试从查询中传递对象时，我不确定如何解决这个问题。（我对 Web 开发还比较陌生，并试图学习基础知识）。

以下是我的存储库中的代码：

```
public ListingModel GetListing(int listingId)
{
        var query = from listing in listingsTable
                    where listing.ListingID == listingId

                    join feature
                    in featuresTable on listing.ListingID equals feature.ListingID into features
                    from f in features.DefaultIfEmpty()

                    join avail
                    in availabilityTable on listing.ListingID equals avail.ListingID into availability
                    from a in availability.DefaultIfEmpty()

                    join image
                    in imageTable on listing.ListingID equals image.ListingID into images
                    from i in images.DefaultIfEmpty()

                    select new ListingModel
                    {
                        Listing = listing,
                        Features = features,
                        Availability = availability,
                        Images = images
                    };

        return query.FirstOrDefault();
} 
```

如果需要，这里是 ListingModel 类：

```
public class ListingModel
{
    public Listing Listing { get; set; }
    public IEnumerable<Feature> Features { get; set; }
    public IEnumerable<Availability> Availability { get; set; }
    public IEnumerable<Image> Images { get; set; }
} 
```

当我在 LinqPad 中尝试查询时，它可以正常工作并完全按照我想要的方式返回数据，因此当我尝试将对象传回时似乎出错了。我已经尝试了一些方法，每次我似乎都遇到了同样的错误；我很难确定是什么原因造成的。提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:38:43.513

尝试在查询中选择一个匿名对象，然后使用它`ListingModel`在内存中实例化 a。您的方法的结尾将如下所示：

```
 select new
                {
                    Listing = listing,
                    Features = features,
                    Availability = availability,
                    Images = images
                };

    return query.AsEnumerable()
                .Select(x => new ListingModel
                             {
                                 Listing = x.Listing,
                                 Features = x.Features,
                                 Availability = x.Availability,
                                 Images = x.Images
                             })
                .FirstOrDefault(); 
```

但是您不能只利用外键关系并让 LINQ to SQL 为您加入关联的表吗？此外，为避免创建重复的列表模型，您应该删除包含`DefaultIfEmpty()`.

# redirect - 301 从 default.asp 重定向到主页 URL

> ID：12919594
> 
> 赞同：1
> 
> 时间：2012-10-16T16:39:42.097
> 
> 标签：redirect

我正在将客户的静态站点移动到 WP 中，而她的旧站点全部使用 ASP 完成。除了default.asp，我的所有旧页面都正确重定向。

这是我正在使用的 .htaccess 代码：

```
Redirect 301 /default.asp http://www.artisticimages.biz 
```

它重定向到主页 URL，但我收到一条错误消息，指出它无法正确重定向 - 未启用 cookie 或类似的东西。

如果有人可以对此有所了解，请告诉我 - 我真的很感激！

# wikipedia - 有没有办法访问维基百科树以获取消歧页面和类别？

> ID：12919595
> 
> 赞同：0
> 
> 时间：2012-10-16T16:47:37.267
> 
> 标签：wikipedia, wikipedia-api, word-sense-disambiguation

1）例如尝试访问：[http://en.wikipedia.org/wiki/Architecture_(disambiguation)](http://en.wikipedia.org/wiki/Architecture_%28disambiguation%29)

--> 是否有任何维基百科 api 可供我访问？

2）例如尝试访问：[http](http://en.wikipedia.org/wiki/Architecture) ://en.wikipedia.org/wiki/Architecture 当您在页面底部进行操作时，有一个类别：建筑建筑设计希腊借词

--> 有没有办法获取这些数据？最好是一棵树的形式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:23:56.953

您可以使用[MediaWiki 查询 API](http://www.mediawiki.org/wiki/API%3aQuery)；虽然它不返回树或类似的复杂的东西。您必须自己构建它。

例如，您可以获取 Category:Disambiguation 页面中所有页面的列表，并获取该列表中每个页面上的所有链接。

# jquery - 提交时的jQuery验证事件

> ID：12919597
> 
> 赞同：0
> 
> 时间：2012-10-16T16:47:47.617
> 
> 标签：jquery, jquery-plugins

我尝试在此 url [http://jquery.bassistance.de/validate/demo/ajaxSubmit-intergration-demo.html](http://jquery.bassistance.de/validate/demo/ajaxSubmit-intergration-demo.html)上使用 jquery url 验证，在此示例中，当我尝试输入用户名和密码时会发生第一次验证，并且我提交时发生第二次验证。只有在我提交时才会进行验证？

希望帮助，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:56:18.413

解决方案是我只需要添加一个`onkeyup options: false`. 所以当我尝试在输入字段中输入一些文本时不会发生验证。

```
 var v = jQuery("#form").validate({
        onkeyup: false,
        submitHandler: function(form) {
            jQuery(form).ajaxSubmit({
                target: "#result"
            });
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:58:50.663

如果您查看页面源代码，则会在此处进行 onsubmit 验证：

```
var v = jQuery("#form").validate({
        submitHandler: function(form) {
            jQuery(form).ajaxSubmit({
                target: "#result"
            });
        }
    }); 
```

验证函数知道如何根据 DOM 元素属性验证每个表单字段：

```
<p>
        <label for="user">Username</label>
        <input id="user" name="user" title="Please enter your username (at least 3 characters)" class="required" minlength="3" />
    </p>
    <p>
        <label for="pass">Password</label>
        <input type="password" name="password" id="password" class="required" minlength"5" />
    </p> 
```

class="required" 告诉验证插件用户必须在该文本字段中输入一个值。minlength 属性完全符合您的想法，它设置字段条目的最小长度。您可以从他们的页面源代码中看到密码元素中的一些拼写错误。他们打算将最小长度设置为 5，但忘记了等号。

这回答了你的问题了吗？

验证表单：使用 jquery 选择器抓取它并使用 validate 函数：

```
$("#myForm").validate(); 
```

# c++ - 从 C++ 调用的已编译 matlab 函数的输入参数结构

> ID：12919599
> 
> 赞同：0
> 
> 时间：2012-10-16T16:47:58.927
> 
> 标签：c++, matlab

> **可能重复：**
> [从 C++ 调用的编译 matlab 文件](https://stackoverflow.com/questions/12902887/compiled-matlab-file-called-from-c)

我浏览了 MATLAB 中的 mcc 示例，但有些不清楚。有人可以澄清一下吗？在示例中，我们有：

```
function a = addmatrix(a1, a2) a = a1 + a2; 
```

在我使用 mcc 编译之后，会在 c++ 头文件中产生以下定义

```
addmatrix(int nargout, mwArray& a, mwArray& a1, mwArray& a2); 
```

我的问题是，如果 MATLAB 函数的输出是一个结构，其中包含一个维度为 1x5 的向量和一个维度为 7x3 的矩阵，那么应该`nargout`是什么？我应该如何定义`mwArray a?`

由于 MATLAB 函数的输出只是 1 结构应该`nargout`等于 1？我应该`mwArray`像`mwArray a(1*5+7*3)`在我的 c++ 代码中那样定义吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:08:59.293

您没有`nargout`在 Matlab 代码中明确定义。相反，它是由函数返回的值的数量隐式定义的。

# html - 如何在 Google Chrome 中显示 Retina (32x32) 图标？

> ID：12919601
> 
> 赞同：8
> 
> 时间：2012-10-16T16:48:05.787
> 
> 标签：html, google-chrome, retina-display

在我的 Retina MacBook Pro 上使用 Chrome，我无法在我的博客上获得更高分辨率 (32x32) 的图标来首先加载。当我第一次打开页面 ( [http://insofar.org](http://insofar.org) ) 时，会显示 16x16 版本，并且只有在重新加载时才会显示 32x32。作为替代示例，在加载[Daring Fireball](http://daringfireball.net)时，首先加载其 32x32 图标。是的，我清除了缓存。

在这两种情况下，我们都在 head 部分使用以下标签：

```
<link rel="shortcut icon" href="/path/to/favicon.ico"> 
```

其中 favicon.ico 包含 32x32 和 16x16 版本。

如何在 Retina 显示器上强制使用 32x32？

编辑：我发现该问题已在最新的 Google Chrome Canary (v24.0.1300.0) 中得到解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T07:15:33.150

您应该尝试 Faviconer.com - 专为创建 16x16 和 Retina 32x32 favicon .ICO 文件而设计。您可以从头开始绘制新图标，也可以上传任何图形图像并将其转换为 .ICO 格式。

这是链接 - [http://faviconer.com](http://faviconer.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-17T12:43:02.150

对于输入[http://xiconeditor.com/](http://xiconeditor.com/)对我来说效果很好。它创建具有 16、24、32、64 尺寸的 ico。

我建议首先使用您的编辑器生成不同尺寸的图像，然后导入每个图像以保持质量。

# svn - SVN 分支作为具有永久维护的版本

> ID：12919603
> 
> 赞同：1
> 
> 时间：2012-10-16T16:48:15.173
> 
> 标签：svn, merge, branch, svn-trunk

在我正在工作的公司中，我们每 x 时间（通常是三个月）发布一次。在那段时间里，我们有四六个“可发布分支”的冲刺，我们所有的代码都进入了那个分支。

一段时间后，该分支作为版本 xxx 发布，我们继续进行下一个版本。但是由于通常的承诺，我们必须保持数月/数年的旧版本。

我想知道作为版本发布的分支是否正确。因此，我们的发布版本分支永远不会完全重新集成到主干中。他们永远活着。为了维护它们，当在分支中发现错误时，我们在主干中修复它并手动将其移植到分支（我更喜欢这个），或者我们在分支中工作并移植它（类似于主干中的提交分支，没有重新整合）回到主干。请注意，肯定会发生主干包含不会/不能合并到分支中的代码，这可能是因为该分支太旧而无法支持巨大的变化。

您知道我们使用的方法的优点/缺点吗？你有另一种方法来处理可维护的版本吗？也许在 svn 之外？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:24:15.447

基本上有两种不同的“主干策略”：*稳定主干*，主干应该始终具有可发布的质量并且所有开发都在重新集成的分支中进行，以及*不稳定的主干*，即主动开发发生在主干中，并且在发布前进行分支稳定.

无论使用哪种主干策略，发布的版本都应该始终是未重新集成的分支。

一个遵循*不稳定主干*策略的示例（主干中的积极开发，需要在发布之前进行分支以实现稳定）：

主干 1.0 的开发进展。在某个时候，为 1.X 创建了一个分支并且代码稳定了。一旦代码被认为是稳定的，它就会被标记为 1.0 并发布。与此同时，版本 2 的主干中的工作进展，很快将在 2.X 分支中分支，依此类推。

在 1.0 版中发现的错误可以在 1.X 分支中修复，并且 1.1 版可以通过该错误修复从该分支中​​发布。如果 bug 在主干中相关，则可以合并。但是该功能可能会在主干中被删除或重建，从而使此错误修复与主干的合并毫无意义或不可能。如果 bug 是版本 2 的 beta 测试人员在 trunk 中发现的，那么您可以在那里修复它，稍后查看 1.X 等旧维护分支是否有 bug，然后将 bugfix 合并到那里。它是双向的。

我看不出有什么比为每个版本分支更好的策略（在我的示例中，每个主要版本的分支，而不是每个版本的分支），并且我没有看到应该将版本/发布分支​​重新集成到的情况树干。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:34:31.263

> 我想知道作为版本发布的分支是否正确。

好吧，至少**它不是完全不正确的**——你一直都有*可管理的代码*。未完全重新集成的分支是您的内部游戏，您可以在不破坏主要任务的情况下玩它 - 适时发布产品并修复旧问题。不同的代码行是你的成本

从 PM POV 中，您的“混合”工作流程（分支中的 2 个源、合并集和普通线性历史记录）更难从日志转换为最终“完成列表”以进行发布，我更喜欢“每个分支”的广告和活动任务”工作流（在任何 SCM 中） - 这样分支（开发，大多数）是短暂的、可集成的工作部分，主线和版本分支将只获得更易于观察的合并集。但这只是个人喜好和口味

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:08:56.070

我想我会一直在主干中保留最新的稳定代码，当前的开发版本将在分支中（分支中会有很多版本，因为不同的人会处理不同的需求）。在那之后我的代码准备好了要发布，我会将它合并到主干，因为那将是最新的稳定代码。同时我会将最新的版本号和发布日期标记到标签文件夹中。

现在，由于您将最新的稳定代码放入主干并将最新发布的源代码放入标签，您可以删除该特定分支。

# java - JTable 1点边框没有出现在网格线上

> ID：12919607
> 
> 赞同：1
> 
> 时间：2012-10-16T16:48:38.363
> 
> 标签：java, swing, graphics, jtable, itext

我在用

iText 版本 5.3.3。Java jdk 1.6.0

我正在开发一个报告软件，用户希望在其中自定义具有 1 点黑色边框的 JTable 单元格，该边框出现在 JTable 上，如下所示：-

![JTable 输出](../Images/e9d19120b1da851a051f8c06cb09a909.png)

PDF输出：

![PDF 输出](../Images/a9964a0227c3b60bd325b9ce0a6d6dd6.png)

在两个输出上，1 点边界单元的单元之间存在一些间隙。我们发现线不在网格线上。无论如何，这些边界线是否可能作为 1 点线出现在网格上。以下是使用 JTable 和 pdf 测试上述问题的示例代码。

表图像.java

```
import java.awt.BorderLayout;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;
import java.io.FileOutputStream;
import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.border.LineBorder;
import javax.swing.table.JTableHeader;
import com.lowagie.text.Document;
import com.lowagie.text.PageSize;
import com.lowagie.text.pdf.PdfContentByte;
import com.lowagie.text.pdf.PdfTemplate;
import com.lowagie.text.pdf.PdfWriter;

class TableImage {

    public static void main(String[] args) throws Exception {
        Object[][] data = {
            {"Hari", new Integer(23), new Double(78.23), (true)},
            {"James", new Integer(23), new Double(47.64), (false)},
            {"Sally", new Integer(22), new Double(84.81), (true)}
        };
        String[] columns = {"Name", "Age", "GPA", "Pass"};
        JTable table = new JTable(data, columns);
        JScrollPane scroll = new JScrollPane(table);
        JPanel p = new JPanel(new BorderLayout());
        p.add(scroll, BorderLayout.CENTER);
        JOptionPane.showMessageDialog(null, p);
        JTableHeader h = table.getTableHeader();
        int x = table.getWidth();
        int y = table.getHeight();
        table.setDefaultRenderer(Object.class,
                new ColumnAlignmentRenderer(
                table.getDefaultRenderer(Object.class)));
        BufferedImage bi = new BufferedImage(x, y, BufferedImage.TYPE_INT_RGB);
        Graphics g = bi.createGraphics();
        Graphics2D g2 = (Graphics2D) g;
        table.paint(g2);
        JOptionPane.showMessageDialog(null, new JLabel(new ImageIcon(bi)));
        print(table);
    }

    private static void print(JTable table) {
        Document document = new Document(PageSize.A4.rotate());
        try {
            PdfWriter writer = PdfWriter.getInstance(document,
                    new FileOutputStream("F://jTable.pdf"));
            document.open();
            PdfContentByte cb = writer.getDirectContent();
            cb.saveState();
            PdfTemplate pdfTemplate = cb.createTemplate(
                    table.getWidth(), table.getHeight());
            Graphics2D g2 = pdfTemplate.createGraphics(
                    table.getWidth(), table.getHeight());
            table.print(g2);
            cb.addTemplate(pdfTemplate, 20, 100);
            g2.dispose();
            cb.restoreState();
        } catch (Exception e) {
            System.err.println(e.getMessage());
        }
        document.close();
    }

    private TableImage() {
    }
} 
```

ColumnAlignmentRenderer.java

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Font;
import java.util.HashMap;
import java.util.Map;
import javax.swing.BorderFactory;
import javax.swing.JLabel;
import javax.swing.JTable;
import javax.swing.SwingConstants;
import javax.swing.border.Border;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.TableCellRenderer;

public class ColumnAlignmentRenderer extends DefaultTableCellRenderer {

    private TableCellRenderer mWrappedRenderer;
    private HashMap objFormatCellMap;

    public ColumnAlignmentRenderer(TableCellRenderer pWrappedRenderer) {
        mWrappedRenderer = pWrappedRenderer;
    }

    public Component getTableCellRendererComponent(JTable pTable,
            Object pValue, boolean pIsSelected,
            boolean pHasFocus, int pRow, int pColumn) {
        int hAlignment = SwingConstants.LEFT;
        int vAlignment = SwingConstants.CENTER;
        String pattern = "##000.0";
        Font font = pTable.getFont();
        Border cellBorder = pTable.getBorder();
        // Border cellBorder = BorderFactory.createCompoundBorder();
        Color backgroundColor = Color.WHITE;
        Color foregroundColor = Color.BLACK;
        // Use the wrapped renderer 
        Component renderedComponent =
                mWrappedRenderer.getTableCellRendererComponent(
                pTable, pValue, pIsSelected, pHasFocus, pRow, pColumn);
        int iLeft = 1;
        int iRight = 1;
        int iTop = 1;
        int iBottom = 1;
        Map fontAttributes = font.getAttributes();
        cellBorder = BorderFactory.createCompoundBorder(cellBorder, 
                new ZoneBorder(iTop, iLeft, iBottom, iRight, Color.BLACK));
        ((JLabel) renderedComponent).setBorder(cellBorder);
        if (pIsSelected) {
            renderedComponent.setBackground(pTable.getSelectionBackground());
        }
        return renderedComponent;
    }

    public void setHashFormatCellData(HashMap hashFormatCellData) {
        this.objFormatCellMap = hashFormatCellData;
    }
} 
```

ZoneBorder.java

```
import java.awt.*;
import javax.swing.border.*;

public class ZoneBorder implements Border {

    private static final int WIDTH = 1;
    private Color color;
    private int iTop = 0, iRight = 0, iBottom = 0, iLeft = 0;

    public ZoneBorder(int T, int R, int B, int L, Color color) {
        this.iTop = T;
        this.iRight = R;
        this.iBottom = B;
        this.iLeft = L;
        this.color = color;
    }

    public boolean isBorderOpaque() {
        return false;
    }

    public Insets getBorderInsets(Component c) {
        return new Insets(iTop, iRight, iBottom, iLeft);
    }

    public void paintBorder(Component c, Graphics g, int x, int y, int width, int height) {
        Color oldColor = g.getColor();
        g.setColor(color);
        for (int i = 0; i < iTop; i++) {
            g.drawLine(x, y + i, x + width - 1, y + i);
        }
        //g.setColor(southColor);
        for (int i = 0; i < iBottom; i++) {
            g.drawLine(x, y + height - i - 1, x + width - 1, y + height - i - 1);
        }
        //g.setColor(eastColor);
        for (int i = 0; i < iLeft; i++) {
            g.drawLine(x + i, y, x + i, y + height - 1);
        }
        //g.setColor(westColor);
        for (int i = 0; i < iRight; i++) {
            g.drawLine(x + width - i - 1, y, x + width - i - 1, y + height - 1);
        }
        g.setColor(oldColor);
    }
} 
```

*   **更新 1**

我更改了代码以将表格单元格的 intercellspacing 减少为 0

```
 table.setIntercellSpacing(new Dimension(0,0)); 
```

以及还将行边距更改为 0

```
 table.setRowMargin(0); 
```

但是当行更多时，它会在某些地方的行之间显示空白行，如下所示：-

![行间距图像](../Images/c255bdf5dbf7ce5de77c07099740f231.png)

为此，我使用以下代码将数据增加到 9 行：-

```
 Object[][] data = {
        {"Hari", new Integer(23), new Double(78.23), (true)},
        {"James", new Integer(23), new Double(47.64), (false)},
        {"Sally", new Integer(22), new Double(84.81), (true)},
        {"Sally", new Integer(22), new Double(84.81), (true)},
        {"Sally", new Integer(22), new Double(84.81), (true)},
        {"Hari", new Integer(23), new Double(78.23), (true)},
        {"James", new Integer(23), new Double(47.64), (false)},
        {"Hari", new Integer(23), new Double(78.23), (true)},
        {"James", new Integer(23), new Double(47.64), (false)}
    }; 
```

请就此提出一些建议。

**

*   更新 2

**

我观察到如果我们在 75% zoomin 中看到 pdf，JTable 看起来很准确。但是当这个 JTable 以 100% 显示时，单元格外的边框和颜色会有所不同。我们是否有任何东西可以让我们将 JTable 打印（即 table.print(g)）从 75% 缩放到 25%，然后再将其打印为 pdf，即 100%。如果有任何 JTable 缩放的想法会很有帮助！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:50:15.100

我建议使用

```
table.setGridColor(Color.black); 
```

否则，如果您想使用自定义渲染器

```
table.setIntercellSpacing(new Dimension(0,0)); 
```

（并确保您的渲染器正确设置边框）。

**编辑**

就个人而言，您的更新闻起来像一个新问题（很高兴看到您的新更新代码 - 但它可能不利于原始问题/答案）。

我怀疑您的问题可能出在某个地方（这似乎有点可疑）：

```
Border cellBorder = pTable.getBorder();
...
cellBorder = BorderFactory.createCompoundBorder(cellBorder, 
            new ZoneBorder(iTop, iLeft, iBottom, iRight, Color.BLACK));
((JLabel) renderedComponent).setBorder(cellBorder); 
```

你能解释一下为什么要抓住表格的边框，将它与另一个边框复合，然后将结果添加到每个单元格中吗？

**侧边栏：**如果您需要更多帮助，请在评论中标记此人的答案，使他们更有可能提供帮助，而不是不接受他们的答案...

# mysql - 检查 2 个字段中的匹配值

> ID：12919613
> 
> 赞同：0
> 
> 时间：2012-10-16T16:48:58.110
> 
> 标签：mysql

我正在尝试考虑一个查询，该查询将在表中搜索跨 2 个字段的匹配值。

例如，将 tbl_id 202 和 tbl_id 203 标识为在 tbl_row 和 tbl_col 中都具有匹配值的查询是什么？

![数据库截图](../Images/35818ad48bb0e553c4e524e078d723e9.png)

谢谢

tatty27

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:55:34.850

这不是最干净的方法，因为它会使返回的行数加倍，但它会向您展示欺骗行为。假设表名是 tbl：

选择 t1。*, t2。*来自 tbl t1, tbl t2 其中 t1.tbl_row = t2.tbl_row 和 t1.tbl_col = t2.tbl_col;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T16:55:30.787

```
Select T1.tbl_id, T2.tbl_id
FROM Table T1, Table T2 
WHERE T1.tbl_row = T2.tbl_row and T1.tbl_col = T2.tbl_col and T1.tbl_id <> T2.tbl_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:22:29.360

```
select distinct t1.tbl_id
from
    tbl as t1
    inner join tbl as t2
        on t1.tbl_row = t2.tbl_row
        and t1.tbl_col = t2.tbl_col
        and t1.tbl_id <> t2.tbl_id 
```

# facebook - 即使使用图像标签，Facebook sharer.php 也不会显示图像

> ID：12919617
> 
> 赞同：1
> 
> 时间：2012-10-16T16:49:18.060
> 
> 标签：facebook

这篇文章[文章](http://www.chinadialogue.net/article/show/single/en/5212-Official-air-pollution-data-in-Beijing-still-failing-the-public)与 Facebook 存在问题。当我尝试使用 sharer.php 分享文章时，Facebook 不起作用（尝试单击 Facebook 图标）。大多数其他文章工作正常。我正在使用 og:image 标记，但在本文中未加载图像。

更新：

从这个调试器我得到：[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

响应代码：206 获取 URL：https://s3.amazonaws.com/cd.live/uploads/content/image/5212/aside_main_air-pollution-day-2.jpg [规范](https://s3.amazonaws.com/cd.live/uploads/content/image/5212/aside_main_air-pollution-day-2.jpg) URL： [https ://s3.amazonaws.com /cd.live/uploads/content/image/5212/aside_main_air-pollution-day-2.jpg](https://s3.amazonaws.com/cd.live/uploads/content/image/5212/aside_main_air-pollution-day-2.jpg) 必须修复的错误

无法下载：无法从 URL 检索数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:52:18.623

您是否尝试过 http:// 而不是 https:// 作为 og:image 网址？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T13:48:08.913

看起来像是 S3 身份验证密钥问题，而不是 facebook 已弃用的 sharer.php api（请[点击此处](https://stackoverflow.com/questions/13729324/title-doesnt-show-up-when-i-share-url-on-facebook/19095732#19095732)了解更多信息）。您需要查看您的 S3 身份验证并确保您可以在浏览器中打开图像，然后再将其传递到 FB 的 sharer.php。

# swing - 在 buttonclick 事件中从 JTextField 获取值

> ID：12919618
> 
> 赞同：1
> 
> 时间：2012-10-16T16:49:24.220
> 
> 标签：swing, listener, jbutton, actionlistener, jtextfield

我正在编写一个简单的程序，它使用 3 个`JTextField`和 2 个按钮从用户那里获取 3 个值，一个用于图表，另一个用于图形。

单击任何此按钮时，从界面获取的值应返回给调用函数是要求。（即，我从 Controller 调用 View 并从视图中的用户获取值并期望返回控制器）为此，我在`textfield1.getText()`内部使用了函数：

```
Button1.addActionListener(new ActionListener() { 
    //Overriding function over here for getting the data
}); 
```

事件。最后我正在重新调整`ArrayList`从用户那里获取的值。

但是问题是，一旦我开始运行程序，它就不会等待按钮单击，而是直接将`ArrayList`默认值返回给控制器。

感谢对此的任何快速帮助..

我对听众很陌生，这可能是问题的原因..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:16:41.623

这个问题缺少一些代码来真正查明问题，但我的印象是你认为调用

```
do A
button.addActionListener( new ActionListener(){
  public void actionPerformed( ActionEvent e ){
    do C
  }
} );
do B 
```

将停止您的代码执行，直到按下按钮。这是不正确的。

在上面的代码片段中，它将执行`A`，然后将侦听器附加到按钮，并立即继续`B`。只有在按下按钮时才会触发侦听器代码。so`C`仅在按下按钮时执行，也就是在`B`.

Oracle 网站上有一个关于[`ActionListener`s](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)的教程。如果您不熟悉您声称的侦听器概念，那么阅读[Observer 设计模式](http://en.wikipedia.org/wiki/Observer_pattern)也可能会有所帮助，这是您在附加侦听器时使用的设计模式。

# url - 带参数的 Yii url 路由

> ID：12919621
> 
> 赞同：1
> 
> 时间：2012-10-16T16:49:34.640
> 
> 标签：url, yii, url-mapping

目前我有一个带有 actionAnzeige() 方法的词汇表控制器。

对于此操作，我需要 GET 参数命名项目。

现在我可以使用这个网址：**www.xy.de/glossar/anzeigen?item=programming**

但我想用这个：**www.xy.de/glossar/programming**

我已将此路线添加到规则中：

```
'glossar/<item:\d+>'=>'glossar/anzeigen', 
```

现在我可以生成我想使用的网址：

```
<?php echo Yii::app()->createUrl('glossar/anzeigen', array('item' => $glossarItem->Url)); ?> 
```

但是如果我访问创建的 url，我会收到 404 错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T16:59:31.157

您可以使用它，它接受字符或数字：

```
'glossar/<item:.+>'=>'glossar/anzeigen', 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T16:52:08.760

你必须使用`w+`而不是`d+`因为`item`需要字母而不是数字

```
'glossar/<item:\w+>'=>'glossar/anzeigen', 
```

# c# - 引用类库项目中的 Settings.settings 和 Resource.resx 文件

> ID：12919622
> 
> 赞同：0
> 
> 时间：2012-10-16T16:49:34.240
> 
> 标签：c#, winforms, settings

过去，我总是在 Windows 窗体项目中引用一个`Settings.settings`和`Resources.resx`文件。我试图将一些代码移动到他们自己的项目中，其中一部分代码使用设置和资源文件来运行。

我将此代码移动到类库项目中，现在我在访问我设置的设置和资源时遇到问题。

类库中是否可以有设置和资源文件？

如果是这样，有什么特别需要做的吗？（我可以在项目的“属性”菜单中查看和编辑属性。

**编辑：**添加代码

我的 using 语句和示例代码...

```
using Data.Models;
using TSMTWin.Infrastructure;
using TSMTWin.Infrastructure.PDFCreation;
using PwObjectModel;
using Query;
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Windows.Forms;

//Usage example
if(System.Diagnostics.Debugger.IsAttached) {
    Infrastructure.Properties.Settings.Default.HasToLogin = false;
    Infrastructure.Properties.Settings.Default.Save();
} 
```

我得到了`Properties`属性下的红色波浪线。

我的 app.config...

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <sectionGroup name="userSettings" type="System.Configuration.UserSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
            <section name="Infrastructure.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" allowExeDefinition="MachineToLocalUser" requirePermission="false" />
        </sectionGroup>
    </configSections>
    <userSettings>
        <Infrastructure.Properties.Settings>
            <setting name="QueryPath" serializeAs="String">
                <value />
            </setting>
            <setting name="HasSetIfHasToLogIn" serializeAs="String">
                <value>False</value>
            </setting>
            <setting name="HasToLogin" serializeAs="String">
                <value />
            </setting>
        </Infrastructure.Properties.Settings>
    </userSettings>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:13:55.893

是的，您可以将资源和设置添加到类库。只需在类库项目属性中创建一个默认设置/资源，然后尝试使用您现有的设置文件覆盖它。寻找命名空间和其他冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:57:51.223

这最终成为项目属性的问题。默认命名空间是在构建返回值的类时使用的（所以它出现）。

与我试图从`internal`修饰符引用设置的文件的命名空间匹配所需的默认命名空间是导致此问题的原因。

一旦所有这些都排列好，功能就会返回。

# php - php中的可选参数

> ID：12919624
> 
> 赞同：0
> 
> 时间：2012-10-16T16:49:42.620
> 
> 标签：php, function, parameters

我是 php 新手，并且有 java 和 C 的编码经验。所以可选参数对我来说有点混乱。我想知道如果一个函数有两个可选参数并且如果我传递一个参数，哪个参数将被映射到参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T16:52:07.343

参数顺序永远不会改变（从左到右），所以如果你只提供一个参数，第一个参数将接收值，第二个参数将具有默认值。

例如：

```
function foo( $a = 1, $b = 2) {}

foo();       // $a = 1, $b = 2
foo( 3);     // $a = 3, $b = 2
foo( 4, 5);  // $a = 4, $b = 5 
```

请注意，由于参数的顺序，无法设置 的值`$b`同时仍保留 的默认值。`$a`您必须`foo()`像这样调用才能完成此操作：

```
foo( 1, 6); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:02:00.960

**第一个参数总是传递给参数中的第一个变量，第二个传递给第二个，依此类推**，无论它们是否是可选的。

可选参数和非可选参数之间的唯一区别是，当调用中没有足够的参数来满足所有非可选参数时，会引发警告。

```
function f($a = 1, $b, $c, $d = 2)
{
  var_dump($a, $b, $c, $d);
}
f('x'); 
```

函数内部`$a`将为“x”，`$b`将为`$c`null*并将*为`$d`2 **，但将引发警告**。

因此，将可选参数留给非可选参数是没有意义的——尽管这在语法上是正确的——因为你永远不能在不生成警告的情况下将它们留在调用中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:52:36.550

例如

```
function test($test = null, $test_2 = null, $test_3 = null) {

}

test(1) => $test=1;
test(1,1) => $test=1;$test_2=1;
test(1,1,1) => $test=1;$test_2=1;$test_3=1; 
```

# javascript - 在javascript中将对象分配为键值

> ID：12919625
> 
> 赞同：0
> 
> 时间：2012-10-16T16:49:43.457
> 
> 标签：javascript, jquery

我很想做这样的事情：

```
this.slides = {$('#Page_1') : null,
               $('#Page_2') : null,
               $('#Page_3') : null}; 
```

**我为什么要这样做，或者我有什么好处？**
我不想在整个班级中使用 jquery 选择器。

* * *

## 一个办法：

```
this.slides = [{"key": $('#Page_1'), "value": null},
               {"key": $('#Page_2'), "value": null},
               {"key": $('#Page_3'), "value": null}]; 
```

**局限性：**

> 这种方法的问题在于，每次想要接近它时，都必须遍历整个对象。您应该使用 id 作为标识符，这样效率更高。——克里斯托夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T16:51:52.990

不，键必须是文字。您可以使用对象的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T16:55:25.803

如果您的处理基于 this.slides 内容，为什么不使用 id 作为 key ？因为它们也意味着是“唯一的”，否则你会破坏 DOM。所以我建议像

```
this.slides = {'#Page_1':null,'#Page_2':null,'#Page_3':null}; 
```

并对您对 this.slides 的处理进行了非常轻微的修改

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T16:51:39.700

你为什么不尝试这样的结构：

```
this.slides = [{"key": $('#Page_1'), "value": null},
               etc.]; 
```

或者这是否打破了您对使用对象的需求？

当然，在迭代它时，您必须使用如下逻辑：

```
for (var i = 0; i < this.slides.length; i++) {
    var key = this.slides[i].key;
    var value = this.slides[i].value;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T17:11:18.500

您不能将对象用作键，只能使用普通文字。我建议这样的结构：

```
this.slides = { 'Page_1' : $('#Page_1'),
                'Page_2' : $('#Page_2')
                'Page_3' : $('#Page_3')}; 
```

这样，您可以使用`id`元素的 轻松访问相应的 jQuery-Object。（您可以省略键的引号。）

```
slides.Page_1
// or
slides['Page_1'] 
```

现在为您提供相应的 jQuery 对象。

# c# - 使用C#从html表中插入多行数据？

> ID：12919627
> 
> 赞同：0
> 
> 时间：2012-10-16T16:49:47.217
> 
> 标签：c#, javascript, sql-server, bulkinsert

如果联系人有多个联系人不同的电话和电子邮件，我有表格来收集联系人信息。用户可以添加更多行以向客户添加更多联系人。我使用 JavaScript 添加新行和 html 控件我的问题是当用户有不止一行时。我不知道如何在某个时候插入超过 1 个联系人以及如何从 Javascript 添加的行中的 html 控件中获取数据

HTML 标签

```
<asp:Panel ID="p_contacts" runat="server" GroupingText="Contacts">
    <table id="tableContact">
        <thead>
            <tr>
                <th scope="col">
                    Contact
                </th>
                <th scope="col">
                    Contact Type
                </th>
                <th scope="col">
                    Status
                </th>
                <th scope="col">
                    Note
                </th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <input name="contact1" id="contact1" runat="server" onclick="return contact1_onclick()">
                </td>
                <td>
                    <select name="contactType1" id="contactType1" runat="server">
                        <option value="">Please select</option>
                        <option value="1">Email</option>
                        <option value="2">Phone</option>
                    </select>
                </td>
                <td>
                    <select name="status1" id="status1" runat="server">
                        <option value="">Please select</option>
                        <option value="1">Active</option>
                        <option value="2">Not Active</option>
                    </select>
                </td>
                <td>
                    <input name="noteContact1" id="noteContact1" runat="server">
                </td>
            </tr>
        </tbody>
    </table>
    <button id="AddContact">
        <img src="images/button-add_blue.png" alt="btnAdd" height="26" width="26" /></button>
</asp:Panel> 
```

Javascript

```
$("#AddContact").click(function () {
    // add new row to table using addTableRow function
    addTableRow($("#tableContact"));

    // prevent button redirecting to new page
    return false;
});

// function to add a new row to a table by cloning the last row and 
// incrementing the name and id values by 1 to make them unique
function addTableRow(table) {
    // clone the last row in the table
    var $tr = $(table).find("tbody tr:last").clone();
    // get the name attribute for the input and select fields
    $tr.find("input,select").attr("name", function () {
        // break the field name and it's number into two parts
        var parts = this.id.match(/(\D+)(\d+)$/);
        // create a unique name for the new field by incrementing
        // the number for the previous field by 1
        return parts[1] + ++parts[2];
        // repeat for id attributes
    }).attr("id", function () {
        var parts = this.id.match(/(\D+)(\d+)$/);
        return parts[1] + ++parts[2];
    });
    // append the new row to the table
    $(".date").datepicker();
    $(table).find("tbody tr:last").after($tr);

}; 
```

C＃

```
protected void btn_add_Click(object sender, EventArgs e)
    {

        try
        {
            //customer contact inforation
            Contacts contact = new Contacts();
            contact.CustomerID  = 1;
            contact.ContactDetail=  contact1.Value.ToString();
            contact.LabelContactTypeID = (int)contactType1.SelectedIndex;
            contact.Status = Convert.ToBoolean(status1.SelectedIndex);
            contact.Note = noteContact1.Value.ToString();
            //bool successedAddCustomer = Customer.AddNewCustoemr(cust);
            bool successedAddCustomer_Contacts = Contacts.AddNewCustomer_Contact(contact);
            if (!successedAddCustomer_Contacts)
            {

                Response.Write("Customer add");
            }

            else
                Response.Write("Can't add new customer");

        }

        catch
        { }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:24:21.223

添加一个新的隐藏字段，该字段将包含添加项目的计数。在后面的代码中，使用 Request.Form 集合在循环中查找项目，例如

```
for (int i = 0, i < Request.form["HiddenFieldHere"], i++)
{
        Contacts contact = new Contacts(); 
        contact.CustomerID  = i; 
        contact.ContactDetail=  Request.Form[string.format("contact{0},i)].ToString(); 
} 
```

这个例子并不完美，但我希望它能给你一些指导。

# regex - 匹配不以开头或结尾的字符串

> ID：12919628
> 
> 赞同：1
> 
> 时间：2012-10-16T16:49:49.633
> 
> 标签：regex

如果字符串以“files/”开头和/或以“.js”结尾，我如何测试它？

例子：

*   test/test2/test.html --> true
*   **文件**/test2/test.html --> false
*   test/test2/test **.js** --> false
*   **文件**/test2/test **.js** --> false

到目前为止，我有这个正则表达式：`(^(?!files\/)).*?((?!\.js)$)`

这适用于“files/”，但不适用于“.js”。

**编辑：** 很抱歉造成误解。仅当字符串不以“files/”开头且不以“.js”结尾时，该字符串才应匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T17:19:24.757

您最后的否定应该是向后看而不是向前看，在测试时您已经阅读了`.js`

```
^(?!files\/).*(?<!\.js)$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T17:19:34.387

这是一个可以满足您需要的正则表达式。

```
(^(?!files\/)).*((?!\.js).{3}$) 
```

您正在检查最后一个字符前面是否没有“.js”，这总是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T16:56:12.880

```
!/^files\/|\.js$/.test('files/test2/test.js') -> false
!/^files\/|\.js$/.test('files/test2/test.html') -> false
!/^files\/|\.js$/.test('test/test2/test.js') -> false
!/^files\/|\.js$/.test('test/test2/test.html') -> true 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T17:01:09.757

```
var re = /^files\/.*|.*\.js$/;
alert(re.test('your-strings')); 
```

**编辑**

不用担心，只需反转结果：

```
var re = /^files\/.*|.*\.js$/;
alert(!re.test('your-strings')); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-16T17:02:13.320

你可以使用这个正则表达式

```
^(files/.*|.*\.js)$ 
```

由于您不希望字符串以文件和或 js 结尾或开头，请使用上面的正则表达式并执行此操作

```
if(/*regex matches the string*/)
{
//you dont need this string
}
else
{
//you do need this string
} 
```

# ruby-on-rails - 没有视图的 Rails 控制器操作

> ID：12919631
> 
> 赞同：9
> 
> 时间：2012-10-16T16:50:02.900
> 
> 标签：ruby-on-rails, rails-routing

我只想在没有视图的情况下进行 Rails 操作。

在我**的'routes.rb'**

```
resources :pictures do
    member do 
        post 'dislike'  
    end  
end 
```

在我**的“PictureController.rb”**
中， 这不起作用

```
def dislike
    @picture = Picture.find(params[:id])
    @like = Like.find(:user_id => current_user.id, :picture_id => params[:id])

    @like.destroy

    respond_to do |format|
        format.html { render :action => :show, :id => params[:id], notice: 'You don\'t  like this picture anymore.' }
        format.json { render json: @picture }
    end
end 
```

也不这样做

```
def dislike
    @picture = Picture.find(params[:id])
    @like = Like.find(:user_id => current_user.id, :picture_id => params[:id])

    @like.destroy

    respond_to do |format|
        format.html { redirect_to @picture, notice: 'You don\'t  like this picture anymore.' }
        format.json { render json: @picture }
    end
end 
```

甚至这个（但对我来说不是这种情况，我想通过 json 和 html 向用户提供反馈）

```
def dislike
    @picture = Picture.find(params[:id])
    @like = Like.find(:user_id => current_user.id, :picture_id => params[:id])

    @like.destroy

    render :nothing => true
end 
```

但我不断收到此错误消息：

```
ActionView::MissingTemplate: Missing template pictures/dislike, application/like with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. 
```

我应该如何告诉 rails PicturesController 中的这个动作不需要视图？

# 解决了！

我并没有真正解决告诉 rails 我不需要视图的问题，我只是创建了另一个控制器，将方法放入其中，并告诉 rails 路由将不喜欢的操作与`match`调用相匹配。我不能确定，但​​我认为这是`resources :picture`我`routes.rb`文件中的问题......

但无论如何，谢谢你们！=)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-16T16:53:02.463

像这样的东西？

```
def dislike
    @picture = Picture.find(params[:id]
    @like = Like.find(:user_id => current_user.id, :picture_id => params[:id])

    @like.destroy

    render :nothing => true
end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T01:46:08.503

刚刚创建了另一个具有不喜欢操作的控制器：

```
def dislike
    @picture = Picture.find(params[:id])
    @like = Like.find(:user_id => current_user.id, :picture_id => params[:id])

    @like.destroy

    respond_to do |format|
        format.html { redirect_to :back, notice: 'You don\'t  like this picture anymore.' }
        format.json { render json: @picture }
    end
end 
```

并修改了我的 routes.rb 以匹配此操作：

```
match 'pictures/:id/dislike' => "likes#dislike", :via => :post 
```

我现在不喜欢的链接是

```
<%= link_to 'Dislike!', {:action => :dislike, :controller => :likes}, :method => :post %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:05:30.347

最有可能的是，问题在于您通过 ajax 请求执行此操作。因此控制器正在寻找`format.js`，但您尚未在块中指定该格式的响应。因此，它陷入了默认状态。

尝试

```
format.js { render json: @picture } 
```

您可能还需要告诉 ajax 请求期待 json 响应。

# c# - 如何通过名称查找 SCOM 2012 连接器 ID 并将其删除？

> ID：12919635
> 
> 赞同：0
> 
> 时间：2012-10-16T16:50:18.297
> 
> 标签：c#, monitoring, health-monitoring

有一篇文章描述了如何以 编程方式[创建和删除某些连接器](http://msdn.microsoft.com/en-us/library/bb437580.aspx)。但是，尚不清楚如何找到一些已经存在的连接器（按名称 fe）并将其删除。是否可以通过名称找到连接器 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T13:22:41.603

经过几天的搜索，我找到了解决方案的以下[链接](http://systemscenter.ru/opsmgr2007sdk.en/html/m_microsoft_enterprisemanagement_connectorframework_connectorframeworkadministration_cleanup_1_6b8aa9d7.htm)。

# ios - APN 和 Ad-Hoc 构建

> ID：12919636
> 
> 赞同：0
> 
> 时间：2012-10-16T16:50:21.903
> 
> 标签：ios, push-notification, apple-push-notifications

我希望这不是一个被问了 1000 倍的问题，我找不到一个好的答案。

为了将应用程序分发给我们的测试人员，我们使用临时构建。我们遇到的问题是 APN 停止为临时构建工作。临时构建使用的服务器正在使用生产推送 SSL 证书和生产服务端点。

我的问题：

1.) 如果应用程序不是通过应用商店分发，苹果是否允许使用生产 APNS？你需要一个企业帐户吗？

2.) 是否有行之有效的方法来追踪错误？苹果的反馈服务从来没有返回任何东西。

感谢您的任何反馈，斯坦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:09:07.860

我不肯定这是一个要求（尽管我相信是这样），但我们已经使用企业帐户的生产证书发送了通知。

反馈服务会告诉您令牌是否不再有效，但一般来说，一旦请求成功发送到 Apple，它就会静默失败（您的框架可能会提供错误，例如端口被阻止等）。

# three.js - TextGeometry 总是面对用户？

> ID：12919638
> 
> 赞同：14
> 
> 时间：2012-10-16T16:50:24.180
> 
> 标签：three.js

我使用 THREE.TextGeometry 在我的场景中添加了一些文本，并且文本似乎卡在我放置的任何 xy 平面中。有什么方法可以让它始终与用户可读的屏幕保持一致？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-16T17:07:30.337

尝试

```
mesh.lookAt( camera.position ); 
```

然后网格的局部 z 轴应指向相机。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-08-14T14:07:06.257

要使文本始终面向屏幕（而不是相机）：

`mesh.quaternion.copy(camera.quaternion);`

请注意，这与对象不同，`object.lookAt(camera);`因为这将导致不同的方向，具体取决于对象在屏幕上的位置。 [`Object3D.onBeforeRender`](https://threejs.org/docs/index.html#api/core/Object3D)可用于更新每一帧的方向。`Object3D.frustumCulled = false;`禁用截锥体剔除以确保始终触发回调可能很有用。

# reflection - 在 PHPUnit 中使用反射

> ID：12919640
> 
> 赞同：3
> 
> 时间：2012-10-16T16:50:30.400
> 
> 标签：reflection, symfony, phpunit

我正在使用 PHPUnit 测试 Symfony2 项目中使用的类的私有方法。我正在使用许多开发人员描述的私有方法测试策略（通过反射），例如[http://aaronsaray.com/blog/2011/08/16/testing-protected-and-private-attributes-and-methods-using -phpunit/](http://aaronsaray.com/blog/2011/08/16/testing-protected-and-private-attributes-and-methods-using-phpunit/)

但不幸的是，我收到以下错误：

> 有 1 个错误：1) My\CalendarBundle\Tests\Calendar\CalendarTest::testCalculateDaysPreviousMonth ReflectionException: Class Calendar 不存在 /Library/WebServer/Documents/calendar/src/My/CalendarBundle/Tests/Calendar/CalendarTest.php:47

```
<?php
namespace My\CalendarBundle\Tests\Calendar;

use My\CalendarBundle\Calendar\Calendar;

class CalendarTest 
{    
    //this method works fine     
    public function testGetNextYear()
    {
        $this->calendar = new Calendar('12', '2012', $this->get('translator'));        
        $result = $this->calendar->getNextYear();

        $this->assertEquals(2013, $result);
    }

    public function testCalculateDaysPreviousMonth()
    {        
        $reflectionCalendar = new \ReflectionClass('Calendar'); //this is the line

        $method = $reflectionCalendar->getMethod('calculateDaysPreviousMonth');      
        $method->setAccessible(true);

        $this->assertEquals(5, $method->invokeArgs($this->calendar, array()));                 
    }
} 
```

为什么？

先感谢您

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T16:54:48.110

在创建反射方法时，您需要使用整个命名空间的类名，即使您包含一个`use`语句。

```
new \ReflectionClass('My\CalendarBundle\Calendar\Calendar'); 
```

这是因为您将类名作为字符串传递给构造函数，因此它不知道您的`use`语句，而是在全局命名空间中查找类名。

此外，对于它的价值，您实际上不需要创建一个`ReflectionClass`，然后调用`getMethod()`它。相反，您可以直接创建一个`ReflectionMethod`对象。

```
new \ReflectionMethod('My\CalendarBundle\Calendar\Calendar', 'calculateDaysPreviousMonth'); 
```

这应该基本相同，但要短一些。

# javascript - Chosen 没有正确设置我的选择下拉菜单的样式

> ID：12919641
> 
> 赞同：0
> 
> 时间：2012-10-16T16:50:31.040
> 
> 标签：javascript, jquery, css, drop-down-menu, jquery-chosen

这是我的代码：

```
<link href="Content/chosen.css" rel="stylesheet" type="text/css"/>

<div>
<select id="chzn-select" data-placeholder="Select an option...">
    <option value=""></option>
    <option value="Option1">Option 1</option>
    <option value="Option2">Option 2</option>
</select>
</div>

<script type="text/javascript" src="../Scripts/jquery-1.8.2.js"></script>
<script type="text/javascript" src="../Scripts/chosen.jquery.js"></script>
<script type="text/javascript" src="../Scripts/chosen.jquery.min.js"></script>
<script type="text/javascript">

$("#chzn-select").chosen();

</script> 
```

这是结果：

![选择的样式](../Images/0203620513ff1302fa08673475a1b6da.png)

我可以“选择”选项 1 或选项 2，它们将出现在“选择一个选项...”标签所在的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:05:51.490

请尝试下面的代码，它对我有用。

```
<link href="http://harvesthq.github.com/chosen/chosen/chosen.css" rel="stylesheet" type="text/css"/>

<div>
 <select id="chzn-select" data-placeholder="Select an option...">
  <option value=""></option>
  <option value="Option1">Option 1</option>
  <option value="Option2">Option 2</option>
 </select>
</div> 
```

```
<script type="text/javascript">
    $("#chzn-select").chosen();
</script> 
```

这是[JSFIddle](http://jsfiddle.net/H8WZM/1/)（代码的工作演示）

selected.jquery.js 在您的代码中包含两次。另外我认为 chosse.css 路径需要根据您的目录结构在您的代码中更正。

# cruisecontrol.net - CCTray 中的 CruiseControl.Net 构建确认

> ID：12919642
> 
> 赞同：2
> 
> 时间：2012-10-16T16:50:51.060
> 
> 标签：cruisecontrol.net, cruisecontrol

当我为项目单击 ForceBuild 时，有没有办法让 CCTray 弹出一个确认对话框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:17:47.467

该设置被调用`askForForceBuildReason`，其文档位于[http://confluence.public.thoughtworks.org/display/CCNET/Project+Configuration+Block](http://confluence.public.thoughtworks.org/display/CCNET/Project+Configuration+Block)

例子是：

```
<project name="Project name"
    description="Project description"
    askForForceBuildReason="required">

    ....

</project> 
```

在`ccnet.config`文件中使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:10:41.147

我相信，您可以让 CCTray 提示您，方法是将项目的 askForForceBuildReason 属性设置为可选或必需。

据我了解，CCTray 会提示您一个原因。

它不是确认，但在强制构建之前确实起到了提示作用

**例子：**

```
<project name="name">
  <askForForceBuildReason>required</askForForceBuildReason>

   snip

</project> 
```

# c++ - linux 串口输出PWM信号

> ID：12919644
> 
> 赞同：4
> 
> 时间：2012-10-16T16:50:52.363
> 
> 标签：c++, python, embedded

如何用linux从串口发出pwm信号？（使用 python 或 c++）

我想直接连接一个电机来改变转速。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:36:39.173

除非你真的知道你在用接口做什么，否则这个想法可能是不明智的。如果完全使用这些引脚驱动的任何信号，则应仅提供信号电平驱动 - 您必须使用它来控制电机*控制器*或放大器实际电机驱动，不要直接连接电机。此外，串行端口输出的信号摆动-ve 和+ve 而不是零/+ve。

一种可能性是使用 DTR 信号，因为它通常可以独立控制（例如[使用 python 将串行端口引脚设置为高电平中](https://stackoverflow.com/questions/2438848/set-serial-port-pin-high-using-python)所述），但是通过软件您可能无法获得准确或有效控制电机所需的频率或精度，如果软件出现故障，您可以让电机全速运行 - 所以需要小心。

更好的解决方案是获得专用的数字和/或 PWM I/O 卡或 USB 设备，甚至是专用的电机控制器接口。像研华这样的工业计算机供应商将拥有合适的，而且成本可能更低的机器人爱好供应商。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:08:45.820

怀疑你能做到这一点你正在使用一个 uart 接口......只需获取一个 arduino 或 someat 并将串行命令发送到 arduino（串行引脚）然后将正确的 pwm 信号输出其引脚......可能是 5 行 arduino 代码和另外 5 个 python 代码......

说了这么多，您可能会找到一些非常困难且笨拙的方法来通过串行输出 PWM 信号……但是您需要考虑这是否真的合适……

# python - 全局名称“调试”未定义

> ID：12919646
> 
> 赞同：1
> 
> 时间：2012-10-16T16:50:53.943
> 
> 标签：python, python-2.7, activepython

我正在尝试编写一个对 AD 进行身份验证的脚本。这是我的问题：

```
import sys
sys.stdout = open('output.csv', 'w')
def ad_dict(ldapobj,attr_dict={},recurse=0,auth=1,filter=()):
  if ldapobj.find(',')==-1: ldapobj='cn='+ldapobj+','+Ad.ldap_main_loc
  if auth: #setup authenticated connections
   if debug: print 'auth' 
```

当我运行它时，它会说“未定义全局名称'debug'。我认为调试是内置在这里的，为什么不定义它？如果有帮助，我正在使用此脚本的 ActivePython。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:57:26.503

如果您需要此功能，为什么不直接定义一个名为 debug 的全局变量？（或使用 logging.debug() ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-05T20:53:08.933

内置的全局常量称为[`__debug__`](http://docs.python.org/2/library/constants.html#__debug__)not `debug`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:57:52.830

我不使用 ActivePython，这么说。debug 不是内置的常规 Python。您可以查看[python 文档](http://docs.python.org/library/functions.html)，查看所有内置插件。

# html - 头部样式表和谷歌代码

> ID：12919650
> 
> 赞同：1
> 
> 时间：2012-10-16T16:38:56.240
> 
> 标签：html, css

我的问题......如果这是包含 .css 样式表的“正常”方式：

```
<link rel="stylesheet" type="text/css" href="highslide/highslide_min.css" /> 
```

这是使用 normalize.css 的代码

```
<link rel="stylesheet" src="//normalize-css.googlecode.com/svn/trunk/normalize.css" /> 
```

问题是为什么要使用 href 和 src ??? 我迷路了...我想将 src 更改为

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:52:39.557

`src`是 Google 代码文档中的错误。`href`是正确的。

（我已经[提交了一张票来解决这个问题](https://code.google.com/p/normalize-css/issues/detail?id=2)）

[normalize.css 主页](http://necolas.github.com/normalize.css/)不指向 CDN 。

# expressionengine - EE 替代 WordPress 简码？

> ID：12919652
> 
> 赞同：2
> 
> 时间：2012-10-16T16:51:21.167
> 
> 标签：expressionengine, shortcode

[表达式引擎中有什么方法可以模拟 Wordpress 的简码功能？](https://stackoverflow.com/questions/11730506/any-way-in-expression-engine-to-simultate-wordpress-shortcode-functionality)

我想遵守社区规则，并且在单击现有问题的“答案”部分时有一个免责声明，说我实际上应该回答这个问题，而不是回应其他答案。

因此，我有与上述[相同的问题](https://stackoverflow.com/questions/11730506/any-way-in-expression-engine-to-simultate-wordpress-shortcode-functionality)。我是一名扎根于 WordPress 的开发人员，我想模仿 WP 短代码在 Expression Engine 中的行为。我想要做的就是将一段代码保存为模板，可以在我的网站上重复使用。

例如，如果我想在多个页面上使用手风琴菜单，我可以在编辑页面时*单击单击*，代码会显示占位符内容，然后用户/开发人员可以将其替换为真实内容）。我需要图形幻灯片吗？*单击 click*，定义图像/标题/文本覆盖。

在我发这个的时候，我正准备搜索 EE 插件库，但是因为我之前没有找到任何东西，所以我想先在这里发帖。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T23:24:37.737

我介绍了我之前在[http://www.tyssendesign.com.au/articles/cms/more-stash-examples/](http://www.tyssendesign.com.au/articles/cms/more-stash-examples/)中使用的一种方法，以及其他一些使用 Stash 的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T21:03:12.677

简短的回答：没有这样的事情......还没有。[Shortcode 插件目前处于 beta 阶段](http://devot-ee.com/add-ons/shortcode)。

现在长答案：使用自定义字段。示例：手风琴的[矩阵](http://devot-ee.com/add-ons/matrix)字段，定义了列，并添加任意数量的行。然后在您的模板中添加标签。

与画廊相同 - 创建一个画廊字段（Matrix 再次适用于此），然后将代码添加到您的模板以构建画廊。

如果这些字段是可选的，那么它们只会在使用时出现在前端。

如果您想花哨并将这些内容块注入您的主要内容区域，您可以使用[NSM Transplant](http://ee-garage.com/nsm-transplant)来做到这一点。

这是我在一个站点上使用的简化代码片段来实现这一点：

```
{exp:nsm_transplant:body}

    {inline_media}
    {exp:nsm_transplant:content id="media_{row_count}"}
    <figure class="{alignment}">
    {exp:ifelse parse="inward"}
        {if image}
            {if "{alignment}" == "aligncenter"}
                {exp:ce_img:make src="{image:resized}" width="860" quality="80" output='<img src="{made_url}" alt="" />'}
            {if:else}
                {exp:ce_img:make src="{image:resized}" width="430" quality="80" output='<img src="{made_url}" alt="" />'}       
            {/if}
        {if:elseif video}
            {if "{alignment}" == "aligncenter"}
                {exp:antenna url="{video}" max_width="860"}
            {if:else}
                {exp:antenna url="{video}" max_width="430"}
            {/if}
        {if:elseif gallery}
            {gallery}{embed="galleries/_embed" entry_id="{entry_id}"}{/gallery}
        {/if}
        {if caption}<figcaption>{caption}</figcaption>{/if}
        {/exp:ifelse}
    </figure>
    {/exp:nsm_transplant:content}
    {/inline_media}

    {content}

{/exp:nsm_transplant:body} 
```

在这种情况下，作者使用`{media_1}`等`{media_2}`，在内容中嵌入照片、视频和画廊。

您可以查看的另一个解决方案是[Content Elements](http://devot-ee.com/add-ons/content-elements)，它允许使用更自由的方法来使用单个自定义字段填充条目。

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T18:53:34.943

您还可以在 EE 模板中使用全局变量。您不能在模板中使用**EE 标记**，但全局变量确实有效。因此，您可以保存为全局变量的任何内容（*可能*包括使用插件制作的变量`Low Variables`，但*我尚未验证*）都可以包含在 EE 模板中。

因此，如果您需要静态 HTML、图像或其他任何内容，您完全可以通过创建全局变量并使用`{global_var_name}`输入字段中的普通语法调用它们来模仿相当多的短代码功能。请注意，全局变量中的 EE 标记不会被解析，因此您不能使用它来绕过解析限制！

# c++ - valgrind 使用 Ubuntu 报告 c++ 中的 getpwuid() 泄漏

> ID：12919653
> 
> 赞同：1
> 
> 时间：2012-10-16T16:51:25.753
> 
> 标签：c++, memory-leaks, valgrind, ubuntu-12.04, getpwuid

我有以下 C++ 文件 pwd01.cpp：

```
#include <pwd.h>
#include <iostream>
int main() {        
    passwd* pwd = getpwuid(getuid());
} 
```

我使用以下命令编译它：

```
g++ pwd01.cpp -Wall -o pwd01 
```

在 Ubuntu 12.04.1 LTS / gcc 版本 4.6.3 上，valgrind 报告泄漏（见下文）。当我在 Mac OS 10.6.8 / gcc 版本 4.2.1 上使用相同的命令编译相同的代码时，valgrind 报告没有泄漏。

我知道我不需要释放 passwd* （[我应该释放 Linux 中 getpwuid() 返回的指针吗？](https://stackoverflow.com/questions/160290/should-i-free-pointer-returned-by-getpwuid-in-linux)）；所以我错过了什么？

```
valgrind ./pwd01
==10618== Memcheck, a memory error detector
==10618== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==10618== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==10618== Command: ./pwd01
==10618== 
==10618== 
==10618== HEAP SUMMARY:
==10618==     in use at exit: 300 bytes in 11 blocks
==10618==   total heap usage: 68 allocs, 57 frees, 10,130 bytes allocated
==10618== 
==10618== LEAK SUMMARY:
==10618==    definitely lost: 60 bytes in 1 blocks
==10618==    indirectly lost: 240 bytes in 10 blocks
==10618==      possibly lost: 0 bytes in 0 blocks
==10618==    still reachable: 0 bytes in 0 blocks
==10618==         suppressed: 0 bytes in 0 blocks
==10618== Rerun with --leak-check=full to see details of leaked memory
==10618== 
==10618== For counts of detected and suppressed errors, rerun with: -v
==10618== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 2 from 2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:03:38.470

似乎不是“真正的”泄漏，即，如果多次调用，泄漏不会复合；可能它拥有一个指向内存区域的静态指针，如果它是 NULL（第一次）它分配这 60 个字节，然后不释放它们。

MacOS X 版本要么使用真正的静态区域，要么`valgrind`拥有更好的[抑制器](http://valgrind.org/docs/manual/manual-core.html#manual-core.suppress)。

只需`getpwuid`在循环中运行几百次，以确保它真的只泄漏 60 个字节（而不是 1200 个），只是为了确定。

**更新**

我终于追踪到内部的几个结构的泄漏`nssswitch.c`，`getXXent.c`不同的大小和说服力。虽然代码似乎进行了比实际需要更多的分配，需要 malloc 锁，但这通常不应该是可观的性能，我当然**不**打算对*glibc 的维护者*进行第二次猜测！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:14:01.303

导致该（假）阳性的可能不是它`getpwuid()`本身。它可能是 C 库在启动时初始化的任何其他东西，但在进程终止时不会拆除（因为进程正在消失，以及属于它的所有映射内存，有些东西不会'真的不需要被破坏/未分配）。正如另一个答案所说，运行一些额外的测试，特别是当您在提供的简单示例之外构建更多代码时，并确保数字稳定，而不是直接归因于您自己的代码。除了提交错误报告（我假设您不是 C 库开发人员之一，无论如何），您无法直接对库代码做太多事情。

# javascript - d3js w3c 选择器

> ID：12919655
> 
> 赞同：0
> 
> 时间：2012-10-16T16:51:30.707
> 
> 标签：javascript, d3.js

d3js 文档说我可以使用 W3C 选择器规范来选择 DOM 中的对象。为什么下面的简单代码不起作用？实际上什么都没有出现。例如，如果我用 body 替换选择器，它就可以工作。但如果我针对特定的 div 或正文内的任何标记，则不会。

```
 <html>
                <head>
                    <link rel="stylesheet" href="style.css">
                    <script type="text/javascript" src="jquery-1.8.2.min.js"></script>
                    <script type="text/javascript" src="d3.v2.min.js"></script>
                    <title>Bleech</title>
                </head>
            <body>
                <script type="text/javascript">
                    var dataset = [ 25, 7, 5, 26, 11, 8, 25, 14, 23, 19,
                            14, 11, 22, 29, 11, 13, 12, 17, 18, 10,
                            24, 18, 25, 9, 3 ];

                    d3.select("#chart").selectAll("p")
                                        .data(dataset)
                                        .enter()
                                        .append("div")
                                        .transition()
                                        .ease("linear")
                                        .attr("class", "bar")
                                        .duration(500)
                                        .style("height", function(d){
                                                return 10 * d;
                                            })
                                        .text(function(d){return d;});
                </script>

                <div id="chart"></div>

            </body>
            </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T17:08:19.557

我不知道 d3，但你为什么在 div 渲染之前调用这些方法？您可能希望将调用放在`window.onload`事件或 jQuery中`document.ready`（因为我看到您包含了库），如下所示：

```
$(document).ready(function () {
    var dataset = [ 25, 7, 5, 26, 11, 8, 25, 14, 23, 19, 14, 11, 22, 29, 11, 13, 12, 17, 18, 10, 24, 18, 25, 9, 3 ];
    d3.select("#chart").selectAll("p")
                       .data(dataset)
                       .enter()
                       .append("div")
                       .transition()
                       .ease("linear")
                       .attr("class", "bar")
                       .duration(500)
                       .style("height", function(d){
                               return 10 * d;
                           })
                       .text(function(d){return d;});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-11T07:33:21.060

正如 Ian 所建议的，将 d3/js 代码包装在 $document.ready 函数中将确保 d3 在页面加载后执行，但确实增加了需要 jQuery 的开销。

另一种选择是简单地将 <div id="chart"> 行移到 <script> 代码上方，这样可以使其更简单。

```
<div id="chart"></div>
<script type="text/javascript">
...
d3.select("#chart").selectAll("p")
...
</script> 
```

在所有 Mike Bostock（D3 的作者）的示例中，他使用后者（即他不倾向于混合 d3 和 jQuery）。

# java - 如何根据值对 HashMap 的元素进行排序？

> ID：12919659
> 
> 赞同：7
> 
> 时间：2012-10-16T16:51:44.420
> 
> 标签：java, sorting, data-structures, hashmap

我有以下内容`HashMap`：

```
HashMap<String, Integer> counts = new HashMap<String, Integer>(); 
```

根据值订购它的最简单方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T16:57:47.717

您不能`Map`按值对 a 进行排序，尤其是 a `HashMap`，它根本无法排序。

相反，您可以对条目进行排序：

```
List<Map.Entry<String, Integer>> entries = new ArrayList<Map.Entry<String, Integer>>(map.entrySet());
Collections.sort(entries, new Comparator<Map.Entry<String, Integer>>() {
  public int compare(
      Map.Entry<String, Integer> entry1, Map.Entry<String, Integer> entry2) {
    return entry1.getValue().compareTo(entry2.getValue());
  }
}); 
```

将按计数升序对条目进行排序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T16:55:12.820

您可以使用 . 从地图中获取一组条目 ( [`Set`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)of ) 。只需遍历它们，并通过 . 检查值。[`Map.Entry`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html)[`map.entrySet()`](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#entrySet%28%29)[`getValue()`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html#getValue%28%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T17:04:34.610

一个解决方法，如果你想让他们按顺序打印它们（不存储）。

1.  创建一个新的 Map ( `tempMap`) 并将您的值作为键和键作为值。要使键唯一，请在每个键中添加一些唯一值，例如 key1 = value1+@0。

2.  获取值`map.values()`列表作为列表`myVlues`

3.  `myVlues`将列表排序为`Collections.sort(myVlues)`

4.  现在迭代`myVlues`，获取对应`key`的 from `tempMap`，恢复键，例如 key.substring(0, key.length-2) 并打印键和值对。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T17:07:32.347

[TreeMap可以按照](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)[Comparator](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)定义的顺序保留其条目。

1.  我们可以创建一个比较器，通过将最大值放在首位来对 Map 进行排序。
2.  然后，我们将构建一个使用该比较器的 TreeMap。
3.  然后，我们将把`counts`地图中的所有条目放入比较器中。
4.  最后，我们将[获得地图中的第一个键](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html#firstKey%28%29)，它应该是最常见的词（或者至少其中一个，如果多个词具有相同的计数）。

    ```
    public class Testing {
        public static void main(String[] args) {

            HashMap<String,Double> counts = new HashMap<String,Integer>();

            // Sample word counts
            counts.put("the", 100);
            counts.put("pineapple",5);
            counts.put("a", 50);

            // Step 1: Create a Comparator that order by value with greatest value first
            MostCommonValueFirst mostCommonValueFirst =  new MostCommonValueFirst(counts);

            // Step 2: Build a TreeMap that uses that Comparator
            TreeMap<String,Double> sortedMap = new TreeMap<String,Integer (mostCommonValueFirst);

            // Step 3: Populate TreeMap with values from the counts map
            sortedMap.putAll(counts);

            // Step 4: The first key in the map is the most commonly used word
            System.out.println("Most common word: " + sortedMap.firstKey());
        }
    }

    private class MostCommonValueFirst implements Comparator<String> {
       Map<String, Integer> base;

       public MostCommonValueFirst(Map<String, Integer> base) {
          this.base = base;
       }

       // Note: this comparator imposes orderings that are inconsistent with equals.    
       public int compare(String a, String b) {
          if (base.get(a) >= base.get(b)) {
              return 1;
          } else {
             return -1;
          } // returning 0 would merge keys
       }
     } 
    ```

来源：[https ://stackoverflow.com/a/1283722/284685](https://stackoverflow.com/a/1283722/284685)

# python - 循环大型csv python

> ID：12919660
> 
> 赞同：-3
> 
> 时间：2012-10-16T16:51:47.683
> 
> 标签：python

我有一个包含以下结构的大型 csv 文件（数百行）：
*文件名、站点名、服务器名*

此 csv 文件包含多个双精度值，因为服务器名称来自集群（总是相同的一对）和站点名称的语言别名（例如 mijnhuis、myhouse、mamaison）

我想要的结果如下（注意 ; 和 , :
*filename; sitename1, sitename2, sitename3; servername1, servername2, servername3;*

我怎样才能以最优化的方式做到这一点？

PS：实际的代码会很好，但如果你能给我指路，我会同样高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T17:08:35.747

使用风险自负：

```
import collections as c

f = open('input', 'r')
sites, servers = c.defaultdict(set), c.defaultdict(set)
files = set()
for line in f:
    parts = line.split(',')
    fi,site,server = [p.strip() for p in parts]
    files.add(fi)
    sites[fi].add(site)
    servers[fi].add(server)

for f in files:
    print "%s; %s; %s" % (f, ", ".join(sites[f]), ", ".join(servers[f])) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T17:06:53.237

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T17:00:55.503

使用字典作为文件名，并为每个字典项使用 2 个站点名和服务器名列表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T18:50:01.713

碰巧，这里包括我的问题的解决方案。示例文件包括在内。

代码：

```
fp = r'PATH_TO_FILE'

aliases = []
aliases.append(("sitex","sitez","sitey"))

splitFile = []
for l in open(fp):
    parts = tuple(l[:-1].replace(" ","").split(","))
    splitFile.append(parts)

def isAlias(old, new):
    print old, new
    aliasFound = False
    for alias in aliases:
        if old in alias and new in alias:
            aliasFound = True

    return aliasFound

handledSites = []
for split in splitFile:
    log = split[0]
    site = split[1]
    rp = split[2]

    matchFound = False
    for hs in handledSites:
        if site in hs[0]:
            matchFound = True
            if rp not in hs[1]:
                hs[1].append(rp)
            if log not in hs[2]:
                hs[2].append(log)
        if not matchFound:
            if isAlias(hs[0][0], site):
                matchFound = True
                hs[0].append(site)
                if rp not in hs[1]:
                    hs[1].append(rp)
                if log not in hs[2]:
                    hs[2].append(log)
    if not matchFound:
        handledSites.append(([site],[rp],[log]))

for s in handledSites:
    print s 
```

示例文件

```
logfile[date]_[server]_sitex.log, sitex, rp1
logfile[date]_[server]_sitex.log, sitex, rp2
logfile[date]_[server]_sitey.log, sitey, rp1
logfile[date]_[server]_sitey.log, sitey, rp2
logfile[date]_[server]_sitez.log, sitez, rp1
logfile[date]_[server]_sitez.log, sitez, rp2
logfile[date]_[server]_site3.log, site3, rp1
logfile[date]_[server]_site3.log, site3, rp2 
```

# android - 谷歌 Android GCM 未注册错误

> ID：12919668
> 
> 赞同：4
> 
> 时间：2012-10-16T16:52:04.577
> 
> 标签：android, push, google-cloud-messaging

我正在使用 Android GCM Push 服务，它在一段时间内工作得很好，但在两者之间它失败了。

以下是详细信息，如果我让我的应用程序空闲一段时间，然后服务器突然从 Google GCM 收到未注册的响应，奇怪。

在浏览文档时，它说有时谷歌服务器可以自动刷新注册 ID，所以这意味着我需要在谷歌告诉我时更新我的​​服务器。好的，我可以做到。

其次，我还有其他机会从 Google GCM 服务器获得 NotRegistered 错误吗？

在文档中还有 setRegisteredOnServer 方法吗？那么我是否还需要使用 flag 为 true 来调用此方法？

真的不知道这里的确切问题是什么？以前有人遇到过同样的问题吗？

有人会帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T11:58:33.203

Solved.Actually Reg Id 正在自动更改，我们没有在更改时在服务器上更新它。

# php - 在与用户名匹配的类别中显示帖子

> ID：12919672
> 
> 赞同：0
> 
> 时间：2012-10-16T16:52:17.090
> 
> 标签：php, wordpress

**这要归功于 Alex 在下面的回答。**

所以这有点奇怪。我正在设置，所以我有名称为“cat1、cat2、cat3”等的类别。

假设我有名为“cat1、cat2、cat3”的用户，因此它们与类别名称匹配。

然后我想以某种方式只向与他们的类别相关的用户显示帖子，所以基本上如果用户：“cat1”已登录，那么他们只能看到“cat1”类别中的帖子，因为它与他们的用户名匹配。

我知道您可以这样做以仅显示当前登录用户已发布的帖子，但这不会起作用，因为帖子被放入难以解释的类别中。

```
<?php
// The Query
$args = array(
'post_status'=> '.....'
);
global $user_ID;
get_currentuserinfo();
if($user_ID) {
query_posts( $args,"author=$user_ID" );
} 
```

?>

因此，如果有人对仅向与登录的用户具有相同名称的类别匹配的用户显示帖子有任何见解，希望他们能够提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T18:25:19.180

看来您已经开始了一种迂回的方式来完成这项工作。由于您已经使用用户名设置了类别，因此您应该能够将其放在查询中

```
//Get User -> ID -> Cat
global $current_user;
get_currentuserinfo();
$args = array(
    category_name => $current_user->ID
);  //or use $current_user->display_name if that's how they are set up.

// The Query
$the_query = new WP_Query( $args );

// The Loop
while ( $the_query->have_posts() ) : $the_query->the_post();
    //Display your loop how you want
endwhile;

// Reset Post Data
wp_reset_postdata(); 
```

**编辑：**

你有没有`var_dump($current_user->ID)`看它是否与类别名称匹配？来自对象的变量可能只包含一个 ID（如“1”或“178”等）。如果是这样的话，你需要类似的东西

```
$the_cat_name = 'category' . $current_user->ID;
//Append your 'naming structure' to the front of the user ID 
```

然后只需将数组替换为

```
$args = array( 
    category_name => $current_user->ID
); 
```

或者，查看当前用户功能（[此处](http://codex.wordpress.org/Function_Reference/get_currentuserinfo)）。您也许可以使用

```
$current_user->user_login 
```

反而。您也可以尝试`var_dump($current_user)`（在调用之后`global $current_user; get_currentuserinfo();`）并查看包含您需要的字符串的变量

# macos - Applescript - 获取元素的坐标

> ID：12919674
> 
> 赞同：1
> 
> 时间：2012-10-16T16:52:24.607
> 
> 标签：macos, applescript, mouseevent, coordinates

我需要获取元素的坐标 {X,Y} 以便在其上生成点击事件（我不能通过使用“点击”来做到这一点，因为系统事件有问题并返回：“缺失值”） . 我将使用这些坐标将它们传递给模拟鼠标单击的命令行工具。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T22:13:11.860

你能得到ui元素的属性吗？我认为即使您实际上无法单击它也可以。其中一个属性应该是“位置”，另一个是“大小”。这两件事应该可以帮助您找到屏幕坐标，以便您可以单击元素。

例如尝试这个并查看属性...

```
tell application "System Events"
    tell process "Safari"
        properties of UI element 1 of window 1
    end tell
end tell 
```

因此，如果我想知道该元素中间的坐标以便您可以单击它，这将为您提供单击位置的 x 和 y 坐标...

```
tell application "System Events"
    tell process "Safari"
        tell UI element 1 of window 1
            set p to position
            set s to size
        end tell
    end tell
end tell

set xCoordinate to (item 1 of p) + (item 1 of s) / 2
set yCoordinate to (item 2 of p) + (item 2 of s) / 2
return {p, s, xCoordinate, yCoordinate} 
```

# php - 试图获取非对象错误的属性

> ID：12919676
> 
> 赞同：0
> 
> 时间：2012-10-16T16:52:28.373
> 
> 标签：php

我试图弄清楚为什么我一直在尝试获取非对象错误的属性。使用我创建的数组。我创建了数组并正在对其进行检索，从我的对象数组的外观来看，这些属性确实存在。

我收到了这方面的错误：

```
// Separates each of the last 5 pesonal messages
foreach ($last_5_personal_messages AS $message)
{
    echo '<li>';
    echo '<span class="icon avatar"><img src="'.$message->sender_avatar.'" alt="" /></span>';
    echo '<span class="name"><a href="'.$site_url.'/personalmessages/viewmessage/'.$message->message_id.'"><strong>'.$message->sender_name.'</strong></a><span class="time">'.$message->datetime_sent.' ago</span></span>';
    echo '<span class="msg">'.$message->subject.'</span>';
    echo '</li>';
}
?>

Array
(
[0] => stdClass Object
    (
        [message_id] => 1
        [subject] => Test Message
        [datetime_sent] => 2 weeks
        [attachments] => 
        [priority] => 0
        [message_content] => Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        [message_read] => 0
        [is_favorite] => 0
        [sender_name] => Mike Scott
        [sender_email_address] => myemail@myemail.com
        [sender_avatar] => http://dev.myserver.com/assets/themes/supr/images/avatars/avatar5.jpg
    )

[1] => stdClass Object
    (
        [message_id] => 2
        [subject] => Testing PM Message
        [datetime_sent] => 3 weeks
        [attachments] => Array
            (
                [0] => Array
                    (
                        [file_name] => file1.jpg
                        [is_file] => 1
                        [file_size] => 7.01 KB
                        [file_location] => assets/downloads/file1.jpg
                    )

                [1] => Array
                    (
                        [file_name] => file2.jpg
                        [is_file] => 
                    )

                [2] => Array
                    (
                        [file_name] => file3.jpg
                        [is_file] => 
                    )

            )

        [priority] => 0
        [message_content] => This is jsut a test of the personal message system!
        [message_read] => 0
        [is_favorite] => 0
        [sender_name] => Kevin Scott
        [sender_email_address] => myemail@server.com
        [sender_avatar] => http://dev.myserver.com/assets/themes/supr/images/avatars/avatar5.jpg
    )

[2] => stdClass Object
    (
        [message_id] => 3
        [subject] => Testing Whatever
        [datetime_sent] => 1 week
        [attachments] => 
        [priority] => 0
        [message_content] => Testing Message Content
        [message_read] => 0
        [is_favorite] => 0
        [sender_name] => Frank Scott
        [sender_email_address] => frankscott@testemail.com
        [sender_avatar] => http://dev.myserver.com/assets/themes/supr/images/avatars/avatar.jpg
    )

[total_unread_messages] => 3
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:04:15.520

GBD 是对的，这是因为`total_unread_messages`键不包含作为其值的对象，所以您会收到此警告。

`total_unread_messages`如果您不想`if( is_object())`对每个循环迭代进行检查，您也可以手动迭代该数组，使用其中的信息对您有利。像这样的东西应该工作：

```
for( $i = 0; $i < $last_5_personal_messages['total_unread_messages'] && $i < 5; $i++) {
    $message = $last_5_personal_messages[$i];
     echo '<li>';
     // ....
} 
```

或者您可以[`unset()`](http://php.net/unset)在迭代之前使用该值（完成后可以选择将其放回）：

```
unset( $last_5_personal_messages['total_unread_messages']);
foreach( $last_5_personal_messages as $message) {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:00:05.827

因为您在数组中有键“total_unread_messages”，它没有对象作为值，所以在 foreach 时跳过该值

```
foreach ($last_5_personal_messages AS $message)
{
    if(!is_object($message)){
      continue;
    }
    echo '<li>';
    echo '<span class="icon avatar"><img src="'.$message->sender_avatar.'" alt="" /></span>';
    echo '<span class="name"><a href="'.$site_url.'/personalmessages/viewmessage/'.$message->message_id.'"><strong>'.$message->sender_name.'</strong></a><span class="time">'.$message->datetime_sent.' ago</span></span>';
    echo '<span class="msg">'.$message->subject.'</span>';
    echo '</li>';

} 
```

另一种方式

```
for($i=0;$i<$last_5_personal_messages['total_unread_messages'];$i++)
{
   $message = $last_5_personal_messages[$i];

    echo '<li>';
    echo '<span class="icon avatar"><img src="'.$message->sender_avatar.'" alt="" /></span>';
    echo '<span class="name"><a href="'.$site_url.'/personalmessages/viewmessage/'.$message->message_id.'"><strong>'.$message->sender_name.'</strong></a><span class="time">'.$message->datetime_sent.' ago</span></span>';
    echo '<span class="msg">'.$message->subject.'</span>';
    echo '</li>';
} 
```

# ios - iOS6 上 MapKit 的性能问题

> ID：12919677
> 
> 赞同：4
> 
> 时间：2012-10-16T16:52:29.630
> 
> 标签：ios, mkmapview, ios6, mapkit, mkoverlay

更新到 iOS 6 后，我注意到在平移或缩放具有多个叠加层的 MKMapView 时服务器性能下降。我创建的一个应用程序有大约 600 个不同颜色的多边形叠加层，并且在 iOS 5 上运行无延迟（即使在较旧的 iOS 设备上），现在在 iOS 6 上运行极其滞后（在缩放和平移时），即使在最新的设备上也是如此。

我的直觉是，这是因为设备必须实际动态地创建地图（因为它基于矢量），而不仅仅是在屏幕上显示图块。

有没有人有任何想法来减少平移或缩放地图时遇到的滞后？

一些额外的信息，这种低帧率也会发生在缩放或平移覆盖层根本不显示在屏幕上的区域时，因此它与屏幕上出现的覆盖层的创建无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:39:18.810

您可以尝试将所有叠加层组合成一个。这可以显着提高性能。

这个想法是创建一个包含所有多边形的边界框的叠加层。这样，您`mapView: viewForOverlay`将始终被调用。为包含所有多边形的叠加层创建一个属性。然后在`drawMapRect:`覆盖视图的方法中，测试所有多边形是否相交`mapRect`并在必要时绘制它们。这很重要，因为您不想绘制屏幕外的多边形。

此策略基于 Apple 自己的 MapKit 示例项目。查看[HazardMap](http://developer.apple.com/library/ios/#samplecode/HazardMap/Introduction/Intro.html)以获取在单个 MKOverlayView 中绘制多个对象的示例，并查看[BreadCrumb](http://developer.apple.com/library/ios/#samplecode/Breadcrumb/Introduction/Intro.html)以获取如何有效测试多边形与方法`mapRect`中的当前相交的示例`drawMapRect`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T20:24:24.643

我有一个简约的 MapKit 技术演示，当我在带有 iOS6 的 iPad 3 上运行它时，它明显滞后。分析显示它受 CPU 限制，但只有 0.2% 来自我自己的代码。在我的例子中，最大的罪魁祸首是渲染道路，然后是渲染标签——两者都是由 MapKit 完成的。我正在以 5 公里的规模展示旧金山市中心，因此有很多道路和标签要渲染。

所以这个故事的寓意是：iOS6 地图很慢。不过，无法告诉您这与 iOS5 或 iPad 2 相比如何。但它是滞后的，我几乎没有做任何自己的工作。

PS：打开 Instruments 并使用 Time Profiler。进行录音+深入研究以找到罪魁祸首。然后检查“隐藏系统库”以找出您的责任与 MapKit 相比有多少滞后。然后仅根据需要进行优化。

# sql - SQL 中的 CAST 和 CONVERT 是否相同？

> ID：12919682
> 
> 赞同：28
> 
> 时间：2012-10-16T16:52:45.880
> 
> 标签：sql, database

> **可能的重复：**
> [T-SQL Cast 与 Convert](https://stackoverflow.com/questions/707335/t-sql-cast-versus-convert)

SQL之间的主要区别是什么`CAST`，因为两者都执行数据类型转换？`CONVERT`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-16T16:58:03.220

CAST 和 CONVERT 具有类似的功能。CONVERT 是特定于 SQL Server 的，在日期和时间值、小数和货币符号之间进行转换时具有更大的灵活性。CAST 是这两个函数中更符合 ANSI 标准的。查看此博客以获取使用这两种方法的示例：[http ://sqltutorials.blogspot.com/2007/06/sql-cast-and-convert.html](http://sqltutorials.blogspot.com/2007/06/sql-cast-and-convert.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-16T16:56:30.290

该`convert`函数可以进行更复杂的转换，例如将`datetime`值转换为`varchar`使用特定格式：

```
convert(varchar(16), dateTimeValue, 120) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-16T16:56:38.930

假设您正在谈论 SQL Server。

来自[http://msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)和[http://msdn.microsoft.com/en-us/library/aa226054(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa226054(v=sql.80).aspx)

> 将一种数据类型的表达式显式转换为另一种数据类型。**CAST 和 CONVERT 提供类似的功能**。

所以是的，它们在功能上是相同的。它们只是具有不同的语法，可以进行更复杂的转换或（主观地）提高可读性。

# eclipse - 如何将 jar 正确添加到 Eclipse 包中

> ID：12919684
> 
> 赞同：0
> 
> 时间：2012-10-16T16:52:50.010
> 
> 标签：eclipse, hibernate, osgi

我有一个小问题。我想在 Eclipse rcp 中使用休眠。（我是 osgi 和 eclipse rcp 的新手）。所以我将 jar 添加到 plugin-project 文件夹以及构建路径和包构建路径中，但是当我尝试从我的包中使用休眠时，它会因 ClassNotFoundException 而崩溃。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:58:49.010

请查看日食伙伴政策。如果您因类加载而面临未加载的类，这可能会对您有所帮助`osgi`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T06:20:52.697

Hibernate 和许多其他经典 Java 程序 (ab) 使用动态类加载来连接不同的部分。他们使用的类是从文件中读取的，然后用 Class.forName 加载。这从根本上说不是模块化的，因为这些类根据定义是实现类，应该隐藏。

由于 OSGi 是一个模块化框架，它在模块（包）周围设置了栅栏，并拒绝加载任何未正确导出和导入的内容。因此，如果 Hibernate 执行其 Class.forName ，它将直接进入这个围栏，因为它应该获得模块化的优势。

Eclipse Buddy 策略就像这道栅栏上的一个大洞，将事物移回糟糕的旧类路径：线性搜索。使用伙伴策略，Eclipse 将开始搜索某处是否存在具有该名称的类。由于这会忽略版本，因此您不能再依赖正确的版本处理。好消息是它在大多数情况下都有效。坏消息是你失去了隐私，当它不起作用时，你会遇到奇怪的错误。

使用 Hibernate，唯一的解决方案是不使用文本文件设置，而是使用 API 并为 Hibernate 提供实际的类。在这些情况下，Hibernate 将使用这些类的类加载器并且有效。在 OSGi 中，只要遵循 Java 语言规则就没有问题。

为了处理类加载黑客解决 OSGi 使用服务的问题。

# c# - 在 C# 中使用线程的事件回调

> ID：12919685
> 
> 赞同：2
> 
> 时间：2012-10-16T16:52:54.690
> 
> 标签：c#, multithreading, events

我有一个监视事件的 B 类（INotifyPropertyChanged 的​​实现）。它位于接收事件通知的 A 类中。B 类生成的事件通常非常频繁，所以我想：

1.  在线程 ThA 上运行类 A 的代码（不与包含类 B 交互）

2.  在线程 ThB 上运行 B 类的代码，当事件发生时，在通知包含该事件的类 A 之前（通过对 ThA 的调度程序执行调用？），它检查 ThA 没有被 A 类使用. 这样，我会保留它，以便只有 ThA 在 A 内运行，并且还避免来自 B 类的通知压倒 ThA（来自 B 类的信息将“仅当 ThA 有时间时”为 A 类创建事件）。

所以它可能看起来像这样 -

```
public class A
{
     private B b
     private Thread ThA

     public A
     {
         b= new B(ThA);
         b.PropertyChanged+=..
     }

     Event1 callback running on ThA
     Event2 callback running on ThA
     Callback for b (invoked in ThA)
}

public class B : INotifyPropertyChanged
{
       private Thread ThA
       private Thread ThB

       public B(ThA_)
       {
            ThA=ThA_;
       }

       private void EventInClassB_Updated(object sender, Args e)
       {
            if (ThA is not being used for anything)
            {
                DispatcherForThreadA.invoke( notifyPropertyChanged() ); //send the callback to class A
            }
       }

} 
```

有谁知道是否有更聪明的方法可以做到这一点，如果没有，我如何编码“ThA 没有被用于任何事情”？

谢谢！克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T16:59:26.547

您可以使用[Monitor](http://msdn.microsoft.com/en-us/library/system.threading.monitor.aspx)或[Mutex](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)来控制对 ThA 的访问。只需调用`Monitor.TryEnter`即可获得锁。如果`TryEnter`失败，则 ThA 正在使用中。一定要`Monitor.Exit`在 ThA 完成后打电话。

使用 a 的代码`Mutex`类似。一般来说，`Monitor`性能会更好，但它不能跨应用程序域边界使用。

# android - 将 sqlite 与字符串进行比较

> ID：12919686
> 
> 赞同：4
> 
> 时间：2012-10-16T16:52:57.033
> 
> 标签：android, sql

我将数据保存在我的 SQL 数据库中。

现在我想将保存的数据与字符串进行比较

像这样的东西：

```
String example = "house"; 
```

现在我想用 if 子句检查“房子”是否已经在数据库中

像这样的东西

```
if ( example == [SQL Data] ) {
}
else {
} 
```

现在，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-16T17:39:20.613

做类似的事情

```
String sql = "SELECT * FROM your_table WHERE your_column = '" + example + "'";
Cursor data = database.rawQuery(sql, null);

if (cursor.moveToFirst()) {
// record exists
} else {
// record not found
} 
```

[从这里](https://stackoverflow.com/questions/6886189/android-sql-check-if-record-in-database-exists)偷来的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:39:55.473

写下我对 Sharath 评论的回复作为答案，因为代码会在评论中搞砸：

并不是说您的回答是错误的，但是从表中选择所有内容并在数据库之外对其进行迭代确实效率低下，并且不应该建议将其作为问题的答案，因为这样做通常是一个坏习惯。

我通常这样做的方式，如果我想查看数据库中是否存在某些记录，我确实喜欢这样。不会争论在正常的while循环上使用do-while，因为那是关于不同的偏好；）

```
String query = "SELECT * FROM table_name WHERE column_name=" + the_example_string_to_find;              
Cursor cursor = db.rawQuery(query, null);

if(cursor.getCount() > 0) {
    cursor.moveToFirst();
    while(!cursor.isAfterLast()) {
        // Do whatever you like with the result.
        cursor.moveToNext();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-23T17:18:31.550

```
// Getting Specific  Record by name. 
// in DB handler class make this function call it by sending search criteria. 
    Records getRecord(String name) {
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.query(TABLE_NAME, new String[]{KEY_ID, KEY_NAME, KEY_Auth_Name, KEY_B_PRICE}, KEY_ID + "=?",
                new String[]{name}, null, null, null,null);
        if (cursor.getCount() > 0)
            cursor.moveToFirst();
        Records Records = new Records(Integer.parseInt(cursor.getString(0)),
                cursor.getString(1), cursor.getString(2),cursor.getString(3));
// return book
        return Records;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T17:02:29.867

您需要首先从数据库中获取所有数据，然后使用从数据库中获得的数据检查数据。

查看链接[示例数据库示例](http://codinglookseasy.blogspot.in/2012/08/sqlite-database.html)

假设您从数据库中获得了一个游标对象

```
cursor = db.rawQuery("SELECT yourColumnName FROM "+TABLE_NAME, null);
if(!cursor.moveToFirst()){

 }
 else{

do {
if(cursor.getString(0).equals(example)) 
 //do something which you want and break
 break;
 } while (cursor.moveToNext());

 } 
```

# qt - Qt wheelEvent 全部

> ID：12919689
> 
> 赞同：0
> 
> 时间：2012-10-16T16:53:16.143
> 
> 标签：qt, scroll, mouseevent

我有许多布局和小部件的应用程序窗口。我也有带有关闭滚动条的滚动区域。我能够为scrollareaup 和scrollareadown 创建插槽。但是当我为所有应用程序创建 wheelEvent 时，它仅适用于项目 int 应用程序而不是滚动区域。当我尝试这个时：

```
void TContic_win::wheelEvent(QWheelEvent *event) {
  cout << "-" << endl;
} 
```

我不知道我该如何解决。我的想法是这样的：

```
bool TContic_win::eventFilter(QObject *obj, QEvent *e) {

  if (isChildOfScrollWidget(obj) { if (e == wheel) scroll Up or Down }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T05:28:57.473

对不起。这是我的错。我有一个错误的事件过滤器。我在恶劣的条件下使用了“返回真”，因此由于这个错误，我总是忽略其他事件，并且我的事件过滤器不适用于子项目。顺便说一句，感谢您的努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T23:06:23.790

你可以做这样的事情（如果你的小部件有`Your_Scrol_Widget`父级）：

```
void TContic_win::wheelEvent(QWheelEvent *we)
{
    if (this->childAt( we->pos() )->parent() == Your_Scrol_Widget)
        qDebug() << "-" ;
} 
```

你一定有个主意。

# c++ - C ++返回一个对象或在函数内更改对象

> ID：12919691
> 
> 赞同：0
> 
> 时间：2012-10-16T16:53:20.213
> 
> 标签：c++, recursion, return-type

我是 C++ 新手，所以还在学习。我正在尝试编写一个算法来递归地构建树，我通常会根据下面的方法 1 编写它，但是，当函数返回时，它会生成 RandomTreeNode 的（我希望是深度）副本，我担心调用它递归，因此更喜欢方法2。我的想法正确吗？

**方法一**

```
RandomTreeNode build_tree(std::vector<T>& data, const std::vector<funcion_ptr>& functions){
        if(data.size() == 0 || data_has_same_values(data)){
            RandomeTreeNode node = RandomTreeNode();
            node.setData(node);
            return node;
        }

        RandomTreeNode parent = RandomTreeNode();
        vector<T> left_data = split_data_left(data);
        vector<T> right_data = split_data_right(data);
        parent.set_left_child(build_tree(left_data));
        parent.set_right_child(build_tree(right_data));
        return parent;
    } 
```

**方法二**

```
void build_tree(RandomTreeNode& current_node, vector<T> data){
    if(data.size() == 0 || data_has_same_values(data)){
        current_node.setData(node);
    }

    vector<T> left_data = split_data_left(data);
    vector<T> right_data = split_data_right(data);

    RandomTreeNode left_child = RandomTreeNode();
    RandomTreeNode right_child = RandomTreeNode();
    current_node.set_left_child(left_child);
    current_node.set_right_child(right_child);

    build_tree(left_child, left_data);
    build_tree(right_child, right_data);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:01:33.257

有几处改进。

*   首先，您正在复制一个向量。据我了解您的函数名称，您将向量分成两个块（`[left|right]`而不是`[l|r|lll|r|...]`）。因此，您不必每次都传递一个向量，而只需传递索引来指定范围。

*   方法 2，如果实施得当，在内存中的效率会更高。所以，你应该改进它背后的想法。

*   最后，您可以使用更适合该问题的辅助功能（方法 1 和方法 2 的混合）。

这是一些示例代码：

```
// first is inclusive
// last is not inclusive
void build_tree_aux(RandomTreeNode& current_node, std::vector<T>& data, int first, int last)
{
    if(last == first || data_has_same_values(data,first,last))
    {
        current_node.setData(data,first,last);
        // ...
    }

    // Find new ranges
    int leftFirst = first;
    int leftLast = split_data(data,first,last);
    int rightFirst = leftLast;
    int rightLast = last;

    // Instead of copying an empty node, we create the children
    // of current_node, and then process these nodes
    current_node.build_left_child();
    current_node.build_right_child();

    // Recursion, left_child() and right_child() returns reference
    build_tree_aux(current_node.left_child(),data,leftFirst,leftLast);
    build_tree_aux(current_node.right_child(),data,rightFirst,rightLast);
    /*
        // left_child() and right_child() are not really breaking encapsulation,
        // because you can consider that the child nodes are not really a part of
        // a node.
        // But if you want, you can do the following:
        current_node.build_tree(data,leftFirst,leftLast);
        // Where RandomTreeNode::build_tree simply call build_tree_aux on the 2 childrens
    */
}

RandomTreeNode build_tree(std::vector<T>& data)
{
    RandomTreeNode root;

    build_tree_aux(root,data,0,data.size());

    return root;
} 
```

# java - Spring LDAP 使用 LdapContextSource 为 com.sun.jndi.ldap.ctl.ResponseControlFactory 提供 NoClassDefFoundError

> ID：12919693
> 
> 赞同：2
> 
> 时间：2012-10-16T16:53:32.680
> 
> 标签：java, spring, spring-mvc, ldap, spring-ldap

我正在尝试使用 spring-ldap org.springframework.ldap.support.LdapContextSource 类访问 LDAP。

以下是我的代码。

配置文件

```
<bean id="contextSource"
    class="org.springframework.ldap.support.LdapContextSource">
    <property name="url" value="ldap://url:11539" />
    <property name="base" value="o=ctc" />
    <property name="userName" value="cn=admin,ou=Users,ou=CFG,o=ctc" />
    <property name="password" value="password" />
</bean>

<bean id="ldapTemplate" class="org.springframework.ldap.LdapTemplate">
    <constructor-arg ref="contextSource" />
</bean>

<bean id="mail_AdapterImpl"
    class="com.MAIL_AdapterImpl">
    <property name="ldapTemplate" ref="ldapTemplate" />
    <property name="mailAccount" ref="LdapDTO" />
</bean> 
```

实现类

```
private LdapTemplate mail_ldapTemplate;
        private Ldap_DTO mailAccount;
        private LdapTemplate ldapTemplate;

        // logger used for logging the actions (request/response)
        static final Logger usage_log = Logger.getLogger("USAGE");
        List l = new ArrayList();

        public boolean isPabguidExists(HashMap transferObject) {

        if(ldapTemplate != null)
        {
            mapp_logger.info("Inside ldapTemplate not null");
            l = ldapTemplate.search("", "(cn=04543552)",new ABCAttributeMapper());
            mapp_logger.info("Size of the List"+l.size());
        } 
```

.pom 文件

我在 pom 文件中添加了以下依赖项

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-ldap</artifactId>
    <version>1.1.2</version>
</dependency> 
```

但我得到以下异常。

```
Error Logs:
12:42:23,053 ERROR [org.springframework.web.context.ContextLoader] (MSC service thread 1-4) Context initialization failed: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'contextSource' defined in ServletContext resource [/WEB-INF/app-beans.xml]: Instantiation of bean failed; nested exception is java.lang.NoClassDefFoundError: com.sun.jndi.ldap.ctl.ResponseControlFactory from [Module "deployment.MAPP.war:main" from Service Module Loader]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:965) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:911) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:485) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:293) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:290) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:192) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895) [spring-context-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:425) [spring-context-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:282) [spring-web-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:204) [spring-web-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47) [spring-web-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:3392) [jbossweb-7.0.10.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3850) [jbossweb-7.0.10.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [rt.jar:1.6.0_31]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.6.0_31]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.6.0_31]
Caused by: java.lang.NoClassDefFoundError: com.sun.jndi.ldap.ctl.ResponseControlFactory from [Module "deployment.ASSPP.war:main" from Service Module Loader]
    at org.springframework.ldap.support.LdapContextSource.class$(LdapContextSource.java:42) [spring-ldap-1.1.2.jar:1.1.2]
    at org.springframework.ldap.support.LdapContextSource.<clinit>(LdapContextSource.java:42) [spring-ldap-1.1.2.jar:1.1.2]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) [rt.jar:1.6.0_31]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) [rt.jar:1.6.0_31]
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) [rt.jar:1.6.0_31]
    at java.lang.reflect.Constructor.newInstance(Unknown Source) [rt.jar:1.6.0_31]
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:126) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:74) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:958) [spring-beans-3.0.6.RELEASE.jar:3.0.6.RELEASE]
    ... 21 more 
```

# objective-c - 如何跟踪 UIWebView.scrollView.contentOffset 的值

> ID：12919704
> 
> 赞同：0
> 
> 时间：2012-10-16T16:54:09.370
> 
> 标签：objective-c, xcode, debugging, lldb

我有一个 UIWebView，我在其中设置了内容偏移量：

```
myWebView.scrollView.contentOffset = CGPointZero; 
```

事后证明，这个视图被滚动到其内容的底部。如何确定代码的哪一部分设置了该偏移量？我错过了它上面的数据断点和观察点。但是我怎么能在实际的 Xcode 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:50:35.587

在 Xcode 4.5 中，在 locals 窗口中，您可以打开对象以查看成员 ivars，右键单击/控制单击感兴趣的 ivar 并点击“Watch”，任何修改该对象中该 ivar 的内容都将停止执行。或者，您可以像这样从调试器控制台添加观察点，

```
(lldb) watch set variable myWebView.scrollView.contentOffset 
```

或者

```
(lldb) w s v myWebView.scrollView.contentOffset 
```

（最短的唯一命令名在命令行 lldb 中始终有效）

# linux - 在 Amazon EC2 实例上安装 librsync

> ID：12919707
> 
> 赞同：1
> 
> 时间：2012-10-16T16:54:12.083
> 
> 标签：linux, amazon-ec2, librsync

我无法在 Amazon 标准 linux 实例上安装[这个名为 librsync 的库。](https://github.com/kaseya/librsync)

我试过这个：

```
yum install librsync-devel 
```

但我得到了`No package librsync available`（我猜很公平！）

我还遵循了安装说明，上面写着：

```
To build and test librsync from the extracted distribution do;

$ ./configure
$ make all check 
```

我不是 linux 专家，我提取了库文件并运行了这些命令：

```
[ec2-user@ip-**-***-**-*** librsync]$ ./configure
-bash: ./configure: Permission denied

[ec2-user@ip-**-***-**-*** librsync]$ sudo ./configure
sudo: ./configure: command not found

[ec2-user@ip-**-***-**-*** librsync]$ sudo configure
sudo: configure: command not found 
```

我更改了配置文件的权限并`./configure`再次运行该命令。我得到了一长串是的（[完整的日志在这里](http://pastebin.com/E77VQ02m)），然后是这个：

```
checking whether g++ accepts -g... no
checking dependency style of g++... none
checking how to run the C++ preprocessor... /lib/cpp
configure: error: C++ preprocessor "/lib/cpp" fails sanity check 
```

我完全迷路了。**知道如何在 EC2 linux 实例上安装这个 librsync 库吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T17:19:41.470

从错误来看，您的`configure`脚本似乎未设置为可执行。您可以使用`ls -l configure`. 您应该会看到一条以 . 开头的行`-rwxr-xr-x`。如果没有，您可以运行`chmod +x configure`以向其添加可执行权限。

如果该文件的权限不正确，最好检查分发中的其余文件。你是怎么得到文件的？从 Sourceforge 下载压缩包？从 Github 下载 ZIP？从 Github 签出？你是如何提取它的？如果您可以在您的问题中填写这些详细信息，以及 的完整输出`ls -l`，这可能有助于我们弄清楚发生了什么。

**编辑添加：**它从您的配置日志中看起来像 cpp（C 预处理器）正在寻找 cc1plus，它是 g++ 的一部分。您可以使用`yum install gcc-c++`（记住以 root 身份运行或使用`sudo`）安装它。

另外，关于您的评论，我建议将`.tar.gz`文件直接复制到 Linux 机器上，然后使用解压缩，`tar xvzf myfile.tar.gz`而不是在 Windows 机器上解压缩并上传。文件系统有足够的差异（权限位如何工作，区分大小写），在 Windows 上提取文件并使用诸如 winscp 之类的上传提取的文件的过程可能会导致这样的问题。

# android - 两位数月份的 Android SimpleDateFormat

> ID：12919710
> 
> 赞同：0
> 
> 时间：2012-10-16T16:54:18.323
> 
> 标签：android, simpledateformat

我的 Android 应用程序中有一个数据库，其日期格式如下：201274 表示 2012 年 7 月 4 日，20121016 表示 2012 年 10 月 16 日。我使用 SimpleDateFormat 显示 DB 行的日期，以便今天它获取日期 20121016 和显示 2012-10-16。代码是这样的：

```
 private void convertDBdate() {
    convertDateTextView.setText(gotDt);

    String dateStr = convertDateTextView.getText().toString();
    SimpleDateFormat inputFormatter = new SimpleDateFormat("yyyyMd");
    SimpleDateFormat outputFormatter = new SimpleDateFormat("yyyy-MM-dd");

    try { 
        DBdate = inputFormatter.parse(dateStr); 
        dashDateStr = outputFormatter.format(DBdate); 

        convertFinalDateTV.setText(dashDateStr); 
    } catch (ParseException e ) { 
        e.printStackTrace(); 
    } 
```

使用此代码，201274 显示为 2012-07-04，但两位数月份显示不正确，20121016 显示为 2012-01-16（1 月 16 日）。问题出在MM和dd。我已尝试将 yyyy-M-dd 作为输出日期格式，但显示为 2012-1-16（同样是 1 月 16 日）。

我是否必须以某种方式隔离 M 值并做那个月 + 1 件事？如果是这样，那将如何写，它会去哪里？

我不想将数据库中的日期重写为 2012 年 7 月 4 日的 20120704，我希望能够在代码中修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:05:08.293

您的问题不在于输入格式化程序应始终为 yyyyMMdd ，而是*有*时应为 yyyyMMdd

在 201274 的情况下，MM 的输入格式将不适用，但在 20121016 的情况下则适用。

您需要添加一些逻辑来解析输入的长度并选择适当的格式化程序。

在我提出一些逻辑之前，我需要问两个问题

1.  您如何在数据库中表示 2012-10-01？我猜它是 2012101 在这种情况下......
2.  如何区分 2012111 和 2012111？即 2012-11-01 和 2012-01-11

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:21:17.697

也许这个项目迟到了，但对于未来的项目，我总是建议使用

日期.getTime()

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html#getTime()](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Date.html#getTime%28%29)

用于存储偶数日期，因为它将在数据库中占用更少的空间，将使排序更快，并且您可以避免现在遇到的问题。

# objective-c - 矩阵信息提取

> ID：12919711
> 
> 赞同：3
> 
> 时间：2012-10-16T16:54:22.707
> 
> 标签：objective-c, ios, matrix

我回来了我的转换器应用程序问题。正如互联网清楚地告诉我使用 if-else 进行转换很糟糕，我试图获取矩阵的数据。这是我的尝试；

```
float convertFrom = [[_convertRates objectAtIndex:[pickerView selectedRowInComponent:0]] floatValue];
float convertTo = [[_convertRates objectAtIndex:[pickerView selectedRowInComponent:1]] floatValue];
float input = [inputText.text floatValue];
float to = convertTo;
float from = convertFrom;
float convertValue = input;

int matrix [5] [5] = {
    {1,2,3,4,5},
    {2,4,6,8,10},
    {3,6,9,12,15},
    {4,8,12,16,20},
    {5,10,15,20,25}};

NSString *MTPA = [[NSString alloc ] initWithFormat:
                         @" %i %i ", matrix [[%f][%f], from, to]]; 
```

所以我想要这段代码做的是获取当前在 UIPickerWheel 中的单位的值，将其用作从 int 中获取的数字的坐标，然后放入浮点数中进行计算。这只是一个测试，看看它是否有效。是否不可能将浮点数用作矩阵的坐标，还是我做错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T17:58:18.520

使用矩阵进行单位转换是一种不好的方法。

选择一个“基本单元”。例如，如果您要转换长度单位，请选择米作为基本单位。

创建一个`UnitDefinition`包含单位名称和转换因子的结构，以将该单位转换为基本单位：

```
typedef struct {
    unsigned long long toFundamentalUnitNumerator;
    unsigned long long toFundamentalUnitDenominator;
    __unsafe_unretained NSString *unitName;
} UnitDefinition; 
```

然后创建一个包含您要支持的单位的数组：

```
static UnitDefinition unitDefinitions[] = {
    { 1, 1000000, @"micron" },
    { 1, 1000, @"millimeter" },
    { 1, 100, @"centimeter" },
    { 1, 10, @"decimeter" },
    { 1, 1, @"meter" },
    { 10, 1, @"decameter" },
    { 100, 1, @"hectometer" },
    { 1000, 1, @"kilometer" },
    { 1000000, 1, @"megameter" },
    { 254, 10000, @"inch" },
    { 9144, 10000, @"yard" },
    { 160934, 100, @"mile" }
}; 
```

您还需要一个常数来表示数组中的单元数：

```
#define kUnitDefinitionCount (sizeof unitDefinitions / sizeof *unitDefinitions) 
```

现在您可以`UIPickerViewDataSource`像这样实现协议：

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView {
    return 2;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {
    return kUnitDefinitionCount;
} 
```

你可以`UIPickerViewDelegate`像这样实现协议：

```
- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
    return unitDefinitions[row].unitName;
}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    [self updateResultView];
} 
```

你可以`updateResultView`这样实现：

```
- (void)updateResultView {
    UnitDefinition *fromUnit = &unitDefinitions[[unitsPicker_ selectedRowInComponent:0]];
    UnitDefinition *toUnit = &unitDefinitions[[unitsPicker_ selectedRowInComponent:1]];

    double input = inputField_.text.doubleValue;
    double result = input
        * fromUnit->toFundamentalUnitNumerator
        * toUnit->toFundamentalUnitDenominator
        / fromUnit->toFundamentalUnitDenominator
        / toUnit->toFundamentalUnitNumerator;
    resultLabel_.text = [NSString stringWithFormat:@"%.6g", result];
} 
```

# vb.net - List(of T) 对自定义类的成员进行排序？

> ID：12919715
> 
> 赞同：2
> 
> 时间：2012-10-16T16:54:39.743
> 
> 标签：vb.net

如何在 T 是自定义数据类的一个成员（整数）上对列表（T）进行排序？

```
Public Class CustomObject
   Public Property text1 as String
   Public Property counter1 as Integer
   Public Property counter2 as Integer
End Class

Public Objectlist As New List(Of CustomObject)

.add, .add, .add etc.

Objectlist.sort(???...) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T17:04:03.913

您可以使用[带有谓词的排序重载](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)来做到这一点：

```
ObjectList.Sort(Function(i,j) i.counter1.CompareTo(j.counter1)) 
```

请注意，您还可以使用 LINQ 返回一个新对象：

```
 Dim sorted = ObjectList.OrderBy(Function(i) i.counter1) 
```

* * *

如果您需要降序排序，您可以执行以下操作：

```
ObjectList.Sort(Function(i,j) j.counter1.CompareTo(i.counter1)) 
```

或者：

```
 Dim sorted = ObjectList.OrderByDescending(Function(i) i.counter1) 
```

# html - a href 链接不可点击

> ID：12919720
> 
> 赞同：3
> 
> 时间：2012-10-16T16:54:55.920
> 
> 标签：html, css, z-index, href

我正在构建的网站有问题。我有一个包含 2 个链接（称为“默认”和“测试”）到列表项的菜单，但在 Firefox 中我无法单击它们。在 IE 中它们有效：我认为是页面上项目的 z-index 问题，但我无法解决。

```
<!DOCTYPE html>
<html>
<head>
<style>
.sezup li.current{
    color:#067d2c;
    position:relative;
    z-index:20;
}

.sezup a, a:hover{
    color:#067d2c;
    position:relative;
    z-index:20;
}
.header{
    position:relative;
    top:0px;
}
.sezup {
    margin: 0 auto;
    padding: 0 0 0 75px;
    width:800px;
position:relative;
    z-index:20;
}
#lineaup {
    background: url("../Images/sfondobarraup.png") repeat scroll 0 0 transparent;
    height: 16px;
    margin: 55px 0 0;
    position: relative;
    z-index: 0;
    top: -25px;
    left: 0px;
}
#lineaup li {
    bottom: 6px;
    float: left;
    margin: 0 10px;
    padding: 2px 15px;
    position: relative;
}
.loghi {
    margin: 0 auto;
    padding: 20px 0 0;
    position: relative;
    top: -45px;
    width: 1000px;
    height: 97px;
    border:1px black solid;
}
#logo {
    position: relative;
    top: -20px;
    float:left;
}
#calciatore {
    position: relative;
    float:right;
    top:-50px;
}
#erba {
    background: url("../Images/erba.png") repeat scroll 0 0 transparent;
    height: 65px;
    position: relative;
    top: -110px;
    z-index: 0;
    border:1px black solid;
}
</style>
</head>
    <body>

        <div class="header">
            <div id="lineaup">
                <div class="sezup">
                    <ul>

                        <li class="current"><a href="Default.aspx" id="hrefHome">Default</a></li>
                        <li><a href="test.aspx?id=1" id="hrefProfile">Test</a></li>
                    </ul>
                </div>
            </div>
            <div class="loghi">

                <img src="" title="logo" id="logo" /><img src="" title="logo" id="calciatore" />

            </div>

             <div id="erba">
             </div>
        </div>

    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T17:04:31.353

由于[stacking context](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/The_stacking_context)，一旦在父元素上设置了 z-index，就不能通过在子元素上设置更高的 z-index 来“突破”它。

通常通过删除所有多余的 z-index 值并仅在需要的地方添加它们会更容易处理。

[在此处查看演示](http://jsfiddle.net/ePmyu/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:01:21.963

摆脱所有，`z-index`除了：

```
#lineaup {
    z-index: 1;
} 
```

和

```
#erba {
    z-index: -1;
} 
```

您应该只更改`z-index`父元素的。没有理由为子元素分配越来越高的值`indices`。

此外，由于它通常只是一个元素在另一个元素之后，我认为这个`-1`和`1`解决方案不仅有效而且看起来不错，并且易于理解。

作为记录，[负 z 索引是允许的](http://www.w3schools.com/cssref/pr_pos_z-index.asp)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:04:21.877

增加 #lineap 的 z-index

```
#lineaup {
  z-index: 1;
  ...
} 
```

[http://jsfiddle.net/willemvb/wxWBm/](http://jsfiddle.net/willemvb/wxWBm/)

# windows-7 - 为 Windows 7 的远程管理构建网页

> ID：12919727
> 
> 赞同：0
> 
> 时间：2012-10-16T14:15:07.870
> 
> 标签：windows-7, remote-access, remote-control

我想在我的本地机器上构建一个迷你 Web 应用类型页面，我可以在其中运行 CMD 命令。

例如，我的理想设置是通过 Internet，我可以访问 WANIP:1111，提示输入用户/密码，然后显示一个页面，我可以在其中使用`shutdown.exe -r`.

我基本上是在寻找[den4b 的 Shutter 程序](http://www.den4b.com/?x=products&product=shutter)的 Web 界面选项的功能，但我想自己构建和自定义它。我还假设我不必运行额外的程序来按照我描述的方式进行操作。

**我将如何去创造这个？**
我需要特定的服务器吗？某种技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:37:56.007

简短的PHP解决方案：

1.  [安装 Apache 和 PHP](http://drupal.org/node/264)
2.  [使用 htaccess 保护它](http://httpd.apache.org/docs/2.2/howto/auth.html)
3.  [使用 exec 运行命令](http://php.net/manual/en/function.exec.php)

[这](http://bytes.com/topic/php/answers/825380-shutting-down-pc-using-php)是关于如何使用带有工作代码的 php 关闭 pc 的讨论。这里是更改 apache 监听的端口的说明[。](https://serverfault.com/questions/120621/how-to-change-port-number-of-apache-server-in-windows-os)

这应该是安装服务器和构建具有所需功能的 php 脚本所需的所有信息。

# codeigniter - Codeigniter：检查模型从哪里加载？

> ID：12919728
> 
> 赞同：0
> 
> 时间：2012-10-16T16:55:20.590
> 
> 标签：codeigniter, model, load, where

我现在有最奇怪的事情。

我“禁用”了一个模型，因为我不需要再次访问它。我通过在 __construct() 和 die() 之后回显一个错误字符串来做到这一点。这样我会注意到我是否曾经加载过模型，即使是错误的，这永远不会发生。好吧？

问题是，模型没有在整个项目中的任何地方加载，但由于某种原因它仍然被加载。它不是自动加载的，这是肯定的。

是否可以追踪模型的加载位置？就像它发生在哪条线等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:58:34.227

在模型的某处，添加以下内容：

```
print_r (debug_backtrace()); 
```

还有一些 PHP`debug_print_backtrace()`可以更好地格式化它：

```
function __construct__ ()
{
    debug_print_backtrace();
} 
```

# javascript - 加载时清除输入文本框值

> ID：12919729
> 
> 赞同：6
> 
> 时间：2012-10-16T16:55:22.747
> 
> 标签：javascript, dom

我有以下表格，它在加载时预先填充了值。我想使用 Javascript 加载空输入框。但是我无权访问该`<body>`标签，因此`<body onload=""`无法在这里工作。有没有其他方法可以清除加载时的表单字段？

```
<form method="POST" action="">
  <input name="username" id="user" value="" /><br />
  <input name="pwd" id="pass" value="" />
  <input type="submit" value="Go" />
</form> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-16T16:59:20.837

您可以改用 window.onload 。

```
function init() {
    // Clear forms here
    document.getElementById("user").value = "";
}
window.onload = init; 
```

您还可以在 JQuery、Dojo 或您最喜欢的 Javascript 库中使用其中一种很好的包装器来执行此操作。在 JQuery 中，它会是，

```
$(document).ready(init) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T17:04:44.640

尝试类似：

```
window.onload = function(){
 document.getElementById("user").value = "";
} 
```

这是一个**[例子](http://jsfiddle.net/EWkqs/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T16:58:02.790

您可以运行超时以清除字段值。像这样：

```
var t=setTimeout(function(){CLEARVALUES},3000) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T17:01:42.037

也许您可以在表单之后添加一个脚本标签。

```
<script type="text/javascript">document.getElementById("user").value = "";</script> 
```

您还可以使用 jQuery 来订阅单个元素的就绪（或加载）事件或文档。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-04T15:29:55.187

```
onload=()=>{
    document.getElementById('user').value='';
} 
```

或者

```
onload=()=>{
    document.getElementById('user').setAttribute('value','');
} 
```

# php - 为什么这个 jquery get 命令不能保存动态 ui 可排序列表？

> ID：12919743
> 
> 赞同：0
> 
> 时间：2012-10-16T16:55:59.183
> 
> 标签：php, jquery, get, jquery-ui-sortable

我正在尝试将我的 jquery ui 可排序列表的顺序保存到服务器。当用户单击选项卡时，我正在从外部文件加载我的列表，然后为每个列表项添加一个复选框。代码工作正常，直到我输入添加复选框的行 - 现在它不会在服务器上保存订单。我不知道为什么前置复选框行会破坏它。任何帮助将不胜感激。

Jquery 加载列表并添加复选框：

```
 window.onload = function() {

        var a = document.getElementById("fvsortid"); // loads slides when user clicks tab and adds checkbox

          a.onclick = function() {
          $("#sortable").load("file.xml");
          $("#sortable").load("file.xml", function(){
          $('<input type="checkbox"/>').prependTo('#sortable li');
          });
}    

        } 
```

Jquery 更新顺序：

```
$(document).ready(function(){   
    $('#sortable').sortable({
        update: function(event, ui) {
            var newOrder = $('#sortable').html();
            $.get('reorder.php', {order:newOrder});
            alert("New order saved to server");
        }
    });

}); 
```

重新排序.php：

```
 <?php
    $items = $_GET['order'];
    $items = "<body>\n$items\n</body>";
    file_put_contents('file.xml', $items);
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:57:45.493

如果将`input`元素添加到`li`元素之前，则输入最终将作为 的子元素`ul`，这是无效的。也许您可以添加到另一个元素，或者将其包装`input`在一个`li`元素中？

# php - 将一次性对象注入类

> ID：12919745
> 
> 赞同：2
> 
> 时间：2012-10-16T16:56:02.303
> 
> 标签：php, dependency-injection

我有以下代码：

```
<?php

class X
{
    public function do($url)
    {
        $httpRequest = new \HttpRequest\Curl($url, $this->getOptions());
        $httpRequest->fire();
        // etc.
    }
    // ...
} 
```

为了能够对这个类进行单元测试，我想注入一个模拟的 HttpRequest 类。一种方法如下：

```
<?php

class X
{
    private $httpRequestClass;

    public function __construct($httpRequestClass = '\HttpRequest\Curl')
    {
        $this->httpRequestClass = $httpRequestClass;
    }

    public function do($url)
    {
        $httpRequest = new $this->httpRequestClass($url, $this->getOptions());
        $httpRequest->fire();
        // etc.
    }
    // ...
} 
```

但这似乎不对。还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:00:14.203

```
 public function __construct($url, $httpRequestClass = null)
    {
        $this->url = $url;
        if ($httpRequestClass == null) //> Default
           $this->httpRequestClass = new HttpRequest\Curl($this->url);
        else
           $this->httpRequestClass = $httpRequestClass;
    } 
```

因此，当您通常使用此类时，只需使用一个参数调用它

```
yourClass('your url'); 
```

否则在第二个参数中传递 istance

```
yourClass('url', new MockedObj); 
```

当然，您应该始终在不提供默认对象的情况下注入您的依赖项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:39:44.887

该类需要生成 HttpRequest 类型的对象，但我们不一定希望它初始化一个对象：例如，我们可能希望它使用原型模式。因此，该类需要工厂模式。为简洁起见，我选择了工厂回调，而不是工厂类。

```
<?php

class X
{
    private $factoryCallback;

    public function __construct($factoryCallback = null)
    {
        $this->factoryCallback = $factoryCallback;
    }

    public function do($url)
    {
        $httpRequest = $this->createHttpRequest($url);
        $httpRequest->fire();
        // etc.
    }

    private function createHttpRequest($url)
    {
        $callback = $this->factoryCallback;
        if (is_callable($callback)) {
            return $callback($url, $this->getOptions());
        }
        return new \HttpRequest\Curl($url, $this->getOptions());
    }
    // ...
} 
```

在这个例子中，辅助方法 ,`createHttpRequest()`有点多余，但可以用于生产代码中的错误处理。

# security - 哪些 cookie 属性唯一标识一个 cookie？

> ID：12919747
> 
> 赞同：2
> 
> 时间：2012-10-16T16:56:13.283
> 
> 标签：security, http, web-applications, cookies

我正在尝试确定 HTTP 服务器返回的 cookie 覆盖现有 cookie 与设置新 cookie 的场景。

假设 foo.example.com 设置了一个 cookie：

> 设置 Cookie：SSID=abc；域=.example.com；路径=/abc; 到期=格林威治标准时间 2021 年 1 月 13 日星期三 22:23:01；安全的; HttpOnly

bar.example.com 需要设置哪些属性才能覆盖此 cookie 而不是创建新的？特别是，以下响应标头会覆盖原始 cookie：

> 设置 Cookie：SSID=xyz；域=.example.com；过期=周三，1990 年 1 月 13 日 22:23:01 GMT；

跨浏览器的行为是否一致？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T18:08:28.333

根据[RFC 6265](https://www.rfc-editor.org/rfc/rfc6265)：

> 如果用户代理接收到一个新的 cookie，其 cookie 名称、域值和路径值与它已经存储的 cookie 相同，则现有的 cookie 将被驱逐并替换为新的 cookie。

该声明在 RFC 中存在超过 10 年，只是措辞略有变化，所以我认为这种行为在所有浏览器中都是一致的。

在您的示例中，两个 cookie 具有不同的路径（`'/'`默认情况下第二个假定），因此它们将被视为不同的 cookie。对于第一个 cookie 的路径中的页面，将有两个同名的 cookie，因此它们由浏览器根据 RFC 进行处理，如下所示：

> 如果多个 cookie 满足上述条件，它们将在 Cookie 标头中排序，以便具有更具体 Path 属性的那些优先于那些不太具体的。

# c++ - 为游戏生成矢量网格

> ID：12919748
> 
> 赞同：0
> 
> 时间：2012-10-16T16:56:21.350
> 
> 标签：c++

我正在开发一个 c++ 项目，但我被卡住了。我正在尝试从包含网格中哪些元素的向量生成一个网格。最初，该向量将包含类似 (3,3) 的内容，我将简单地创建一个看起来像 XXX 的网格。如果是 (3,2,1)，它将是 XX|X。括号中的第一个数字表示我的网格中 X 的总数（即使在删除 X 之后），随后的数字表示每列的 X 的数量，如上所示。

我遇到的问题是创建一个网格，该网格还跟踪已删除的 X，因此当我想重新创建它时，已删除 X 的空间就在那里并且不会被覆盖。

例如： **初始网格**= XXX|XX =>(5,3,2) **后期网格** = OOX|XX => (3,1,2)

从“**初始网格**”生成网格很简单，但生成以后的网格很难（对我来说）。例如，我的新向量将为“ **Later Grid** ”保留 (3,1,2)。如果我想使用 (3,1,2) 表示生成“Later Grid”，我应该怎么做。任何帮助是极大的赞赏。

这不是家庭作业，这是我正在做的一个副项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:47:20.037

二维数组是否不足以满足您的程序？假设您声明了一个最大地图大小的二维数组，然后使用两个自变量来表示之后的最大网格大小？

```
char Map[15][15] = {//...}
int Width = 15;
int Height = 15;

//Map decreases in size...
Width--;
Height--;
//all calculations are now based off of width and height(not the initial size of the array)

if(xpos < Width)
//do stuff 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:25:22.490

听起来您正在解决持久性问题。我可能不完全理解您要做什么，但听起来您将阅读以下形式的一系列元`(x:int, y:int, z:int)`
组

```
x = total number of 'X' 
y = 'X' before vertical bar
z = 'X' after vertical bar 
```

那么你想用'O'填充缺失的'X'。

问题似乎是您正在丢失有关网格初始状态的信息，因此不知道要填充多少“O”。

如果我是你，我会添加另一个值来跟踪初始状态。这个值永远不会改变，并且会在第一次生成网格时填充“X”的初始数量。

所以在你的例子中你有：

**初始网格**= XXX|XX =>(5,3,2)**后期网格**= OOX|XX => (3,1,2)

而是尝试像这样向元组添加初始状态值

**初始网格**= XXX|XX =>(5,3,2, **5** )**后来的网格**= OOX|XX => (3,1,2, **5** )

`(x:int, y:int, z:int, n:int)`现在你有一个元组的形式

```
x = total number of 'X' 
y = 'X' before vertical bar
z = 'X' after vertical bar 
n = 'X' in initial state 
```

现在我们可以通过评估来确定要填充的“O”的数量

```
n - x = number of 'O' to pad with 
```

假设“X”的初始数量因元组而异，您还需要跟踪初始“X”状态。跟踪“X”的初始数量将允许您始终辨别网格的每次连续迭代需要填充多少“O”

# emacs - 用于 fortran 的 Emacs 设置

> ID：12919751
> 
> 赞同：10
> 
> 时间：2012-10-16T16:56:25.517
> 
> 标签：emacs, fortran

我目前正在使用 emacs 处理一个大型 Fortran 项目，但我觉得我当前的设置不足以完成这项任务。

我使用带有自动完成功能的 f90 模式（没有特定于 fortran 的设置，所以我只对打开的文件进行完成），我真的很想念悬停时的函数头信息（如 elisp 代码）、代码折叠、子程序列表当前缓冲区、包含文件的列表、子程序的来源信息和使用的变量（C-xC-f 打开源文件？），...</p>

如何在我的 emacs 中最好地为 fortran 添加现代支持功能？

大多数情况下，我需要帮助我*理解*项目代码的工具。

该项目使用自己的构建工具，并在构建之前将文件从不同目录复制到构建目录中，实际上用不同版本的代码覆盖了一些文件，因此我需要一个非常灵活的工具来应对这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-10T12:41:08.893

[有一个名为Fortran-tags](https://github.com/raullaasner/fortran-tags)的小型 Emacs 插件。它可以找到光标下的任何变量或过程的定义，因此它与Ctags类似，只是它能够正确识别所有局部和全局变量并具有一些附加功能。此外，它的开发重点是现代 Fortran。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-02-06T13:37:41.077

在 emacs 中使用[fortran-language-server](https://github.com/hansec/fortran-language-server)（安装后只需`fortls`在终端中启动）和[lsp-mode](https://github.com/emacs-lsp/lsp-mode)可以完美运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T22:17:47.927

我现在在 elpa 中找到了 f90-interface-browser。

如果您使用 emacs 24 或更高版本，则可以使用

```
M-x package-list-packages 
```

然后搜索`f90-interface-browser`.

> 您编写（或处理）大型现代 fortran 代码库。它们大量使用函数重载和泛型接口。您的大脑太小，无法记住所有专家的名称。因此，您的编辑应该帮助您。

# ios - iOS - 将文件下载到应用程序文件夹

> ID：12919753
> 
> 赞同：0
> 
> 时间：2012-10-16T16:56:33.223
> 
> 标签：ios

我的一个 UIViewController 中确实有一个 UIWebview。要在 WebView 中显示的目标 URL 是我服务器上的一个页面（因此我有权对其进行更改）。

该页面基本上有一个要下载的 PDF 列表（想象一个无序的超链接列表，每个链接都指向一个 PDF 文件）。

我需要一种方法来告诉我的应用程序，每当通过单击其中一个链接从该 WebView 下载文件时，我都需要将其保存在我的应用程序文件夹中，而不是 iPhone/iPad 内存中。

有什么办法可以实现吗？有替代品吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:46:49.240

您可以允许 UIWebView 调用您的 Objective-C 委托函数。此链接概述了如何执行此操作：http: [//dblog.com.au/iphone-development/iphone-sdk-tip-firing-custom-events-when-a-link-is-clicked-in-a -uiwebview/](http://dblog.com.au/iphone-development/iphone-sdk-tip-firing-custom-events-when-a-link-is-clicked-in-a-uiwebview/) 基本上，委托函数将在来自 UIWebView 的所有请求上调用。您可以检查它们是否用于指向 pdf 文件的链接，如果是，请编写您自己的 Objective-c 代码以下载该文件并将其存储在您的应用程序目录中。您可能需要添加一些 UI 来让用户知道发生了什么。否则，您让请求正常进行，它将显示在 Web 浏览器中。

# javascript - 页面的Ajax加载而不更改刷新后加载的内容

> ID：12919754
> 
> 赞同：1
> 
> 时间：2012-10-16T16:56:35.927
> 
> 标签：javascript, jquery

情况是我有链接：

编辑帐户信息 - 指向`http://example.com/user/edit`

我设置了一个 javascript，它只会在控制器中获取信息，然后将其加载到模板中。我有这段代码来处理事件

```
$("#lnkEditUser").on("click", 
  function()
  {
    some.settings.edit_profile();
     return false;
  }) 
```

它的作用是用模板替换 div 的内容，所以我通过 ajax 调用加载了模板和来自控制器（来自模型）的详细信息。问题是当我尝试刷新页面时，内容将是其默认值。当我单击链接时，是否有可能 URL 会更改为：

```
http://example.com/user#edit 
```

所以即使我刷新页面，通过ajax加载的内容也会一样吗？如果我删除#edit，它将是默认值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T19:06:14.100

尝试这样做：

```
activeTemplateViaHash : function() {
    if (window.location.hash) {
        var hash = window.location.hash;
        hash = hash.replace("#", "");
        var method = some.settings[hash]; //find the hash method
        if(method) {  //if the method exists then run it
            method();
        }
        else {
            alert(hash + " function doesn't exist!");
        }
    }
}, 
```

但是，我不会像那样依赖散列，而是使用`localStorage`或`COOKIES`轻松存储用户设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:32:53.103

如果我做对了，或者如果有更好的方法来做，请纠正我..

首先我检查哈希是否存在，然后获取哈希的值，将其分配给变量，`hash`然后我删除了哈希，也许我也可以这样做`replace("#", "")`。我在键入此内容时意识到其他内容，就像我应该`hash`在分配值时将其转换为字符串一样。但无论如何，我就是这样做的。

```
activeTemplateViaHash : function() {
    if (window.location.hash) {
        var hash = window.location.hash;
        hash = hash.toString().substr(1, hash.toString().length-1);
        var method = new Function('some.settings.' + hash + '()');
        method();
    }
}, 
```

# android - Javascript 不能与 Gingerbread Webkit WebView 一起使用，我可以以某种方式覆盖代码吗？

> ID：12919757
> 
> 赞同：0
> 
> 时间：2012-10-16T16:56:54.143
> 
> 标签：android, jquery, webkit

我有一个带有 webview 的 webapp，其中的 javascript 与 Gingerbread 附带的 webkit 不兼容。有没有办法在不更改站点本身的情况下注入/覆盖代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:08:00.063

您可以使用

```
wv.loadUrl("javascript:..."); 
```

`...`在 a 的当前页面`WebView`（此处称为）的上下文中执行任意 JavaScript（此处显示为`wv`）。你是否可以用它来修补你的问题，我不能说。

# android - Delta3D 在安卓上构建

> ID：12919764
> 
> 赞同：1
> 
> 时间：2012-10-16T16:57:29.840
> 
> 标签：android, build, game-engine, xerces-c

任何人都知道任何可能帮助我在 android 上构建 Delta3D 的信息，他们说它依赖于平台，但似乎没有人在 android 上构建它，或者没有人分享他在 android 上构建它的经验，嗯，至于我，我有直到现在一直手工制作make文件（我不知道如何制作它们）并且我已经构建了OSG，因为它依赖于它，但现在我被困在构建xercesc ....我将分享构建过程它完成了（我保证^_^）

请任何有关如何执行此操作的提示将不胜感激。

（我会添加 Delta3D 标签，但我是新来的，所以我没有足够的 prev。）

亲切的问候。

# google-app-engine - 在部署新版本时保留任务队列

> ID：12919765
> 
> 赞同：0
> 
> 时间：2012-10-16T16:57:30.013
> 
> 标签：google-app-engine, upgrade, task-queue

对于 Google App Engine 应用，当您部署新版本的应用时，任务队列是否会被清除？

如果队列被清除，跨版本持久化任务的最佳策略是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:17:13.617

这是一个非常简单的答案，你会很高兴：不！

# css - CSS / 样式标题标签

> ID：12919768
> 
> 赞同：3
> 
> 时间：2012-10-16T16:57:37.730
> 
> 标签：css, css-selectors

我从其他地方和stackoverflow尝试了许多css，但不知何故我无法完成。

我对 css 很陌生，并且使用 Joomla 和模板。我正在使用 custom.css 文件夹对样式进行某些自定义。这是我想做的：

当它是链接时，我想设置 h5 的样式。

例如，我正在创建一个自定义 html 模块，在内容中有一个列表。在内容中，我给出了每一个，h5 样式，以及指向站点中某个页面的链接。

我想要实现的是让这个列表带有蓝色。当鼠标悬停在下划线时，颜色仍然相同。当点击回到原始位置时，没有下划线，也没有颜色变化。（在每种情况下都使用相同的颜色，当你超过它时，只需加下划线。）

我试过这些h5，h5 a，h5 a：hover，h5 .contentheading a，等等......

在一种情况下，它正在使用：

```
h5 {
  font-family: arial, sans-serif;
  font-size: 1.3em;
  font-weight: bold;
}

h5 a {
  color: #0088CC;
}

h5 a: hover {
  color: #0088CC;
  text-decoration: underline; 
} 
```

当我阅读时，当标题是链接时，我应该使用“a”。

但是现在有些东西压倒了它，我现在完全迷失了。

我在检查中看到了一个：悬停样式。

当我想将内容设置为链接列表时，我想在多个内容中（在自定义模块中）使用这个 h5。而且我认为有一个具有某种风格的标题是很实用的，这样我就可以灵活地使用它。

非常感谢，任何帮助都会很棒:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T16:59:54.517

`a:`看起来你在和之间有一个空格`hover`。尝试：

```
h5 {
  font-family: arial, sans-serif;
  font-size: 1.3em;
  font-weight: bold;
}

h5 a {
  color: #0088CC;
}

h5 a:hover {
  color: #0088CC;
  text-decoration: underline; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T17:02:37.733

[正如JSK NS](https://stackoverflow.com/a/12919810/772323)已经指出的那样，`a:`and之间不应该有空格`hover`。如果您希望链接仅在鼠标悬停时加下划线，您应该添加

`text-decoration: none`

在`h5 a`节中。您还可以删除重复的颜色，`h5 a:hover`因为它是多余的。最终的 CSS 会是这样的：

```
h5 {
  font-family: arial, sans-serif;
  font-size: 1.3em;
  font-weight: bold;
}

h5 a {
  color: #0088CC;
  text-decoration: none;
}

h5 a:hover {
  text-decoration: underline; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T17:04:34.583

您的语法有错误。a:hover 之间的空格，这个应该写成一个。

```
h5 {
    font-family: arial, sans-serif;
    font-size: 1.3em;
    font-weight: bold;
}

h5 a {
    color: #0088CC;
}

h5 a:hover {
    color: #0088CC;
    text-decoration: underline; 
} 
```

# scala - 如何将 netty-socketio 安装到我的 play 应用程序？

> ID：12919773
> 
> 赞同：0
> 
> 时间：2012-10-16T16:57:52.630
> 
> 标签：scala, playframework, playframework-2.0, sbt

我对 scala、play 和 java 很陌生。我必须在我的游戏应用程序中使用[netty-socketio 。](https://github.com/mrniko/netty-socketio)我一直在通过 SBT 安装 3rd 方插件，方法是将其添加到 project/Build.scala 中的 appDependencies。如果是 netty-socketio，似乎没有直接通过解析器安装的方法。我该如何安装它？帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T10:06:38.790

如果您的库在任何在线存储库中不可用，您只需`lib`在 Play 的根目录中创建一个文件夹！应用程序并将您的罐子放入其中。

它将被 sbt 添加到你的类路径中。

# redirect - phonegap 跨平台重定向到本地文件

> ID：12919781
> 
> 赞同：2
> 
> 时间：2012-10-16T16:58:33.383
> 
> 标签：redirect, cordova, path, local

嗨，我正在开发一个 phonegap + JQueryMobile 应用程序，它也应该在 Android、iOs 和 WindowsPhone 上正确执行。

我需要利用一个外部服务，它需要一个回调 URL 来将应用程序重定向到以防万一成功，一个以防出错（很常见的情况。在我的情况下，两者都是本地文件，比如 www/success.html 和 www /error.html)。当然，我可以为每个设备编写不同的路径（例如，Android 上的 file:///android_asset/www/success.html），但我想知道该框架是否提供了更优雅的解决方案。

所以问题是，我怎样才能获得一个唯一的绝对 URL，它允许我执行从远程网页到 phonegap 应用程序中的本地文件的跨平台 HTTP 重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-30T15:00:36.937

使用自定义 URL 方案：

*   它是如何工作的：
    [什么是重定向 URI？它如何适用于 OAuth2.0 的 iOS 应用程序？](https://stackoverflow.com/questions/13281084/whats-a-redirect-uri-how-does-it-apply-to-ios-app-for-oauth2-0)
*   PhoneGap 和 URL 方案：
    [http ://docs.build.phonegap.com/en_US/3.3.0/configuring_custom_urls.md.html#Custom%20URL%20Schemes](http://docs.build.phonegap.com/en_US/3.3.0/configuring_custom_urls.md.html#Custom%20URL%20Schemes)
    [https://github.com/EddyVerbruggen/LaunchMyApp-PhoneGap-Plugin](https://github.com/EddyVerbruggen/LaunchMyApp-PhoneGap-Plugin)
*   iOS SDK 和 URL 方案
    [http://code.tutsplus.com/tutorials/ios-sdk-working-with-url-schemes--mobile-6629](http://code.tutsplus.com/tutorials/ios-sdk-working-with-url-schemes--mobile-6629)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:05:09.317

相对路径应该有效：

index.html onError -> ./error.html index.html onSuccess -> ./success.html

还是我错过了服务器交互，例如：

index.html -> [http://someserver.com](http://someserver.com) -> error.html

在这种情况下，serverinterction 必须是异步的。

# c# - 如何以编程方式发现正在运行的应用程序是否已安装？

> ID：12919784
> 
> 赞同：-1
> 
> 时间：2012-10-16T16:58:37.470
> 
> 标签：c#, winforms, visual-studio-2010, clickonce

我希望程序检查它是安装在计算机上（使用 Clickonce）还是正在运行（例如通过 Visual Studio）。

编辑：不是[如何检测 C# Windows 窗体代码在 Visual Studio 中执行的副本？](https://stackoverflow.com/questions/2427381/how-to-detect-that-c-sharp-winform-code-is-executed-within-visual-studio). “例如”表示[例如](http://en.wikipedia.org/wiki/Exempli_gratia)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T17:20:39.947

您可以使用[ApplicationDeployment.IsNetworkDeployed](http://msdn.microsoft.com/en-us/library/system.deployment.application.applicationdeployment.isnetworkdeployed.aspx)属性。请注意，这只适用于 ClickOnce 安装。

```
private void CheckApplicationStatus() {
    if (ApplicationDeployment.IsNetworkDeployed) {
        // Do something that needs doing when the application is installed using ClickOnce.
    } else {
        // Do something that needs doing when the application is run from VS.
    }
} 
```

# asp.net-mvc - 在 MVC 中使用 memorystream 和 DotNetZip 会给出“无法访问关闭的流”

> ID：12919785
> 
> 赞同：5
> 
> 时间：2012-10-16T16:58:38.417
> 
> 标签：asp.net-mvc, dotnetzip

我正在尝试使用 DotNetZip 组件以 MVC 方法创建一个 zipfile。

这是我的代码：

```
 public FileResult DownloadImagefilesAsZip()
    {
        using (var memoryStream = new MemoryStream())
        {
            using (var zip = new ZipFile())
            {
                zip.AddDirectory(Server.MapPath("/Images/"));
                zip.Save(memoryStream);

                return File(memoryStream, "gzip", "images.zip");
            }
        }
    } 
```

当我运行它时，出现“无法访问已关闭的流”错误，我不知道为什么。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-16T17:02:29.133

不要处理`MemoryStream`，`FileStreamResult`一旦完成将其写入响应，就会小心：

```
public ActionResult DownloadImagefilesAsZip()
{
    var memoryStream = new MemoryStream();
    using (var zip = new ZipFile())
    {
        zip.AddDirectory(Server.MapPath("~/Images"));
        zip.Save(memoryStream);
        return File(memoryStream, "application/gzip", "images.zip");
    }
} 
```

顺便说一句，我建议您编写自定义操作结果来处理此问题，而不是在控制器操作中编写管道代码。不仅您将获得可重用的操作结果，而且请记住您的代码效率非常低=>您正在内存中执行 ZIP 操作，从而将整个 ~/images 目录内容 + zip 文件加载到内存中。如果您在此目录中有很多用户和大量文件，您将很快耗尽内存。

一个更有效的解决方案是直接写入响应流：

```
public class ZipResult : ActionResult
{
    public string Path { get; private set; }
    public string Filename { get; private set; }

    public ZipResult(string path, string filename)
    {
        Path = path;
        Filename = filename;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        if (context == null)
        {
            throw new ArgumentNullException("context");
        }

        var response = context.HttpContext.Response;
        response.ContentType = "application/gzip";
        using (var zip = new ZipFile())
        {
            zip.AddDirectory(Path);
            zip.Save(response.OutputStream);
            var cd = new ContentDisposition
            {
                FileName = Filename,
                Inline = false
            };
            response.Headers.Add("Content-Disposition", cd.ToString());
        }
    }
} 
```

进而：

```
public ActionResult DownloadImagefilesAsZip()
{
    return new ZipResult(Server.MapPath("~/Images"), "images.zip");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-23T14:46:35.123

无法发表评论。

达林的回答很棒！仍然收到内存异常，但必须添加`response.BufferOutput = false`；并且因此不得不将内容处置代码移得更高。

所以你有了：

```
...
        var response = context.HttpContext.Response;
        response.ContentType = "application/zip";
        response.BufferOutput = false;

        var cd = new ContentDisposition
        {
            FileName = ZipFilename,
            Inline = false
        };
        response.Headers.Add("Content-Disposition", cd.ToString());

        using (var zip = new ZipFile())
        {
... 
```

以防万一不是很明显:)

# objective-c - 如何将自定义 NSFormatter 设置为 NSTextView？

> ID：12919786
> 
> 赞同：0
> 
> 时间：2012-10-16T16:58:46.690
> 
> 标签：objective-c, xcode, macos, nstextview, nsformatter

我有一个`NSTextView`并且我有一个`NSFormatter`限制字符串长度的自定义。但是我如何“ `[_textView setFormatter:customFormatter]`”上一个`NSTextView`？我找不到如何做到这一点。
示例代码将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:01:51.627

无法将自定义 NSFormatter 与 NSTextView 一起使用。（这似乎是 NSControl 的领域，NSTextField 是其中的一个子类。）

但是，可以*为*您的文本视图的文本存储（）设置一个委托`NSTextStorage`，并实现`-textStorageWillProcessEditing:`（的方法`NSTextStorageDelegate`）；这是您可以限制用户输入的地方。您的自定义 NSFormatter 的现有代码可能适合在那里使用。

# c++ - 拓扑排序的 C++ 实现

> ID：12919787
> 
> 赞同：1
> 
> 时间：2012-10-16T16:58:48.420
> 
> 标签：c++, algorithm

今天早上我在做我的 C++ 课程作业，拓扑排序的实现。编译时没有错误，但根本无法运行。由于我不太熟悉指针或 STL，也不熟悉 VS 调试器......我只是不知道哪里出了问题。如果有人能指出我的错误，那将对我有很大帮助。非常感谢！

这是我的代码：

```
#include<iostream>
#include<vector>
#include<queue>

using namespace std;

typedef struct Vertex{
    int index;
    int indegree;  // indegree of vertex v is the total num of edges like(u,v)
    vector<Vertex>adjacent;
    int topoNum;    // topological order of this vertex.
}Vertex;
typedef struct Edge{
    Vertex start;
    Vertex in;
}Edge;

Vertex*InDegrees(int numVertex,int numEdge,Edge*edges) // calculate indegrees of all vertices.
{
    Vertex*vertices=new Vertex[numVertex];
    for(int i=0;i<numVertex;i++){   vertices[i].index=i;    vertices[i].indegree=0;}
    for(int i=0;i<numEdge;i++)
    {
        int j=edges[i].in.index;
        vertices[j].indegree++;
        vertices[j].adjacent.push_back(edges[i].start);
    }
    return vertices;
}

int*topoSort(int numVertex,int numEdge,Edge*edges)
{
    edges=new Edge[numEdge];
    Vertex*Vertices=new Vertex[numVertex];
    Vertices=InDegrees(numVertex,numEdge,edges);

    queue<Vertex>q;
    for(int i=0;i<numVertex;i++)
    {
        if(Vertices[i].indegree==0)
            q.push(Vertices[i]);
    }

    int count=0;
    while(!q.empty())   // Ordering completed when queue is empty.
    {
        Vertex v=q.front();    // get the vertex whose indegree==0
        q.pop();
        v.topoNum=++count;
        vector<Vertex>::iterator iter;
        for(iter=v.adjacent.begin();iter!=v.adjacent.end();iter++)
        {
            Vertex w=*iter;
            if(--w.indegree==0)
                q.push(w);
        }
    }
    int*topoOrder=new int[numVertex];
    for(int i=0;i<numVertex;i++)
    {
        int j=Vertices[i].topoNum;
        topoOrder[j]=-1;    // initial value, in case cycle existed.
        topoOrder[j]=Vertices[i].index;
    }
    delete[]Vertices;
    delete[]edges;
    return topoOrder;
}

int main()
{
    int numVertex,numEdge;
    cin>>numVertex>>numEdge;
    Edge*Edges=new Edge[numEdge];
    int indexStart,indexIn;
    for(int i=0;i<numEdge;i++)
    {
        cin>>indexStart>>indexIn;
        Edges[i].in.index=--indexIn;
        Edges[i].start.index=--indexStart;
    }

    int*topoOrder=new int[numVertex];
    topoOrder=topoSort(numVertex,numEdge,Edges);
    for(int i=0;i<numVertex-1;i++)
    {
        if(topoOrder[i]==-1)
        {
            cout<<"Cycle exists, not a DAG!";
            return 0;
        }
        cout<<topoOrder[i]<<",";
    }
    cout<<topoOrder[numVertex-1]<<endl;

    delete[]Edges;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:50:32.850

您的问题的一个明显起点是分配：分配使用可能为零`Edges`的未初始化值。`numEdge`也就是说，您将获得一个不指向任何元素的指针。`Edges`您可能只想在 read 之后进行分配`numEdge`。我并没有真正了解实际算法中发生了什么。

我还**强烈**建议您验证输入操作是否成功：

```
if (std::cin >> numVertex >> numEdge) {
    use_successfully_read(numVertex, numEdge);
} 
```

如果输入失败，变量保持不变，值也会导致有趣的行为。

# c++ - OpenCL，一半与浮动性能

> ID：12919792
> 
> 赞同：2
> 
> 时间：2012-10-16T16:59:13.310
> 
> 标签：c++, c, opencl, gpu, gpgpu

我目前正在开发一个需要存储和处理大量变量的应用程序（浮动约 4gb）

由于单个变量的精度不那么重要（我知道它们是有界的），我看到我可以使用 OpenCL 的一半而不是浮点数，因为这确实会减少内存量。

我的问题是双重的。

*   使用 half 而不是 float 是否会对性能造成影响（我会为浮动操作构建图像图形卡）

*   在计算中混合浮点数和半数会影响性能吗？（即，浮动乘以一半。）

此致 Andreas Falkenstrøm Mieritz

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T13:21:21.273

ARM CPU 和 GPU 在其 ALU 中具有原生支持，`half`因此您将获得接近双倍的速度，并大幅节省能源消耗。**编辑：** PowerVR GPU 也是如此。

桌面硬件仅支持`half`加载/存储和纹理单元，AFAIK。即便如此，我希望`half`纹理在任何 GPU 上的性能都优于`float`纹理或缓冲区。特别是如果您可以巧妙地使用纹理过滤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T20:16:43.050

OpenCL 内核几乎总是受内存速度或 pci 速度限制。如果您要将相当大的数据块转换为半浮点数，这将能够更快地传输您的值。在任何平台/设备上几乎可以肯定更快。

就性能而言，half 很少比 float 差。我相当肯定任何支持半数的设备都会像使用浮点数一样快地进行计算。同样，即使这里有轻微的开销，您也将在您的超长传输时间中弥补它。

# c# - 检查员工是否是老板的递归方法

> ID：12919794
> 
> 赞同：-3
> 
> 时间：2012-10-16T16:59:18.120
> 
> 标签：c#, recursion

我有一张带有 UserId 和 ManagerId 的表。编辑此表时，我需要确保如果 Jim 是 Jills 经理，而 Ron 是 Marks 经理，那么我不应该将 Mark 设置为 Jim 经理，因为它会创建无限循环。我想验证一个可以将 Manager 字段设置为 UserId 的表单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T17:16:50.040

我没有看到那里的无限循环... Ron 是 Marks 经理，Jim 是 Jills 经理。如果您将 Mark 设置为 Jims 经理，那么您将拥有一个线性管理树。罗恩->马克->吉姆->吉尔。不需要递归:-)

我了解您要完成的工作，但更多信息将为您提供更好的洞察力。这些员工是表的类还是实体？

我假设每个员工只有一个经理。因此，当将一个员工设置为另一个员工的经理时，向上推进线性树以查看它是否有效，如下所示：

```
//Assume managerName is "Mark" and employeeName is "Jim", as in your example above
public bool isManagerValid(string managerName, string employeeName)
{
    bool valid = true;
    var manager = getEmployee("Mark"); //The "to-be" manager of Jim
    var employee= getEmployee("Jim");

    var currentManager = getEmployee(manager.Manager); //Get Marks manager
    while(currentManager != null && valid)
    {
        if(currentManager == employee)
        {
            valid = false; //Some manager up the line from Mark is already Jim 
        }
        else
        {
            //Get the next manager up
            currentManager = getEmployee(currentManager.Manager);
        }
    }
    return valid;
} 
```

我没有在视觉工作室尝试过，在这里输入，所以如果有任何错字，请见谅

# vector - 需要自己写 Vector3.RotateTowards()

> ID：12919798
> 
> 赞同：0
> 
> 时间：2012-10-16T16:59:29.893
> 
> 标签：vector, unity3d

Unity 中有一个名为[Vector3.RotateTowards](http://docs.unity3d.com/Documentation/ScriptReference/Vector3.RotateTowards.html)的内置函数。

我尝试使用 CrossProduct 编写此代码，然后使用 Axis 旋转。但没有用。

我想知道是否有人可以为我编写*Vector3.RotateTowards*。

# c++ - 在 C 中访问持有 C++ 对象的 void 指针的内容

> ID：12919801
> 
> 赞同：1
> 
> 时间：2012-10-16T16:59:34.740
> 
> 标签：c++, c, instrumentation

我正在使用 C++ 程序上的 C 客户端对[DynamoRIO进行二进制检测，](http://www.dynamorio.org/)**尽管您可能不需要了解 DynamoRIO 来回答我的问题。**目前我正在包装一个具有签名的函数：

```
virtual void foo(Klass& s) 
```

然后在 wrap 函数中，我可以将此函数调用 ( `Klass& s`) 的参数传递给 void 指针 ( `void *arg1`)。我需要使用这个参数（即访问字段、调用方法），但是我不能像`Klass`C++ 类那样将它转换为适当的指针，而我使用的客户端是纯 C 语言。

当我尝试`void*`通过将其转换为以下内容来打印内容时`size_t`：

```
printf("%zd\n", (size_t)arg1); 
```

它给了我一个 8 位数字，例如`25102856`我猜是一个内存地址。

**我的问题是如何在我的程序中访问这个对象？**

请询问您需要的所有信息，我对所有想法持开放态度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T18:26:13.120

为了使其工作 - 为 getter 和 setter 定义 C 样式包装器，如下例所示：

为你的班级

```
class Klass {
public:
  int getA() const;
  void setA(int);
  virtua int getB() const;
}; 
```

定义包装此类的 C 结构：

```
typedef int (*GetInt)(void*);
typedef void (*SetInt)(void*,int);
// and similar for other types

struct KlassCInterface {
  void* object;
  GetInt getA;
  SetInt setA;
  GetInt getB;
};

extern "C" int getA(void* obj)
{
    return static_cast<Klass*>(klassObj)->getA();
}
...
KlassCInterface* getCInterface(Klass* obj)
{
   // malloc just in case your client want to use free()
   KlassCInterface* retVal = (KlassCInterface*)malloc(sizeof(KlassCInterface));
   retVal->object = obj;
   retVal->getA = &getA;
   ...
   return retVal;     
} 
```

当您传递 void* 数据时，将其作为 C 接口结构传递：

```
Klass* obj = new Klass(...);
KlassCInterface* objC = getCInterface(obj);

registerData(objC); 
```

在您的 C 代码中 - 使用此 C 接口：

```
void doSthWihtKlass(void* data)
{
   KlassCInterface* objC  = (KlassCInterface*)data;
   printf("%d\n", objC->getA(objC->object));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:37:20.590

这应该很难做到。您必须了解底层 C++ ABI。G++ 实现[了这一点](http://mentorembedded.github.com/cxx-abi/abi.html)。

通常，C++ 类的实现与 C 中的结构非常相似。大致而言，基类对象按照它们的声明顺序排在第一位。然后，该类的所有其他子对象按照它们的声明顺序依次出现。此规则递归地应用于每个封闭对象。多态对象会有不同的布局，因为必须存储更多的信息；特别是，指向虚方法的指针，或指向包含这些指针的结构的指针，必须存储在对象旁边的某个位置。

请注意，ISO 14882 没有解决这些问题。解决这个问题肯定会调用未定义的行为。

关于调用虚拟方法，您将不得不寻找 v-table。再一次，从你的编译器中研究 ABI。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T12:06:29.667

您需要了解有关指针语义的更多信息（这就是我认为@Alek 的意思）。

首先，您可以使用`%p`printf 格式说明符直接打印指针。这通常会产生一些有用的值，例如指针指向的内存位置。

您可以将指针转换为 a`char *`并使用它直接从内存中读取字节。或者您可以将其转换为 an`unsigned char *`并使用`%x`. 您可以将它转换为一个`int *`并读取一个由您的 C 实现表示的整数 - 例如，可能是一个 8 位字节上的 4 字节 2 的补码小端符号整数，没有未使用的位。

`((unsigned long *)(((short *) ptr) + 7))[4]`例如，将跳过等于 7 个 short 大小加上 4 个 unsigned long 大小的字节数，并从内存位置读取一个 unsigned long。假设 an 的正确表示（如 C 实现所期望的那样）`unsigned long`被写入该确切的内存位置，您将获得它的值。

您不仅必须确切地确定在所指向的内存中写入的内容`ptr`（这就是提到 ABI 的原因），而且生成的程序将是不可移植的，并且可能会随心所欲地更改/中断。

`<inttypes.h>`您可能还需要标题中指定的精确宽度整数类型。

# sql - 使用 where 子句 SQL 在一个查询中执行多个聚合

> ID：12919802
> 
> 赞同：1
> 
> 时间：2012-10-16T16:59:37.293
> 
> 标签：sql, aggregate-functions

是否可以在单个查询中执行多个聚合函数

我知道谁可以使用

```
SELECT SUM(value) FROM mytable WHERE date  between '2012-05-01' AND '2012-06-01' 
```

我一直在尝试做一个例子

```
CREATE TABLE mytable
    (id varchar(10), value int, `date` date, situation varchar(10) ) ;

INSERT INTO mytable
    (id, value, date, situation)
VALUES
    ('id0', 1338, '2012-05-14','Urgent'),
    ('id0', 3572, '2012-05-13','Urgent'),
    ('id0', 3232, '2012-05-06','Urgent'),
    ('id0', 3068, '2012-05-05','Post'),
    ('id0', 3363, '2012-05-04','Urgent'),
    ('id0', 2022, '2012-04-28','Anual'),
    ('id0', 3193, '2012-04-24','Post') 
```

但是是否可以使用相同的查询来获取其他聚合值？

```
SELECT SUM(value),SUM(value),Count(*) FROM mytable WHERE date  between '2012-05-01' AND '2012-06-01', WHERE date  between '2012-05-01' AND '2012-10-01', Where situation like 'Urgent' 
```

而不是 3 个查询：

```
SELECT SUM(value) FROM mytable WHERE date  between '2012-05-01' AND '2012-06-01'
SELECT SUM(value) FROM mytable WHERE date  between '2012-05-01' AND '2012-10-01'
SELECT Count(*)   FROM mytable Where situation like 'Urgent' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T17:02:37.090

用例

```
select
    sum(case when date between '2012-05-01' AND '2012-06-01' then value else 0 end) as sum1,
    sum(case when date between '2012-05-01' AND '2012-10-01' then value else 0 end) as sum2,
    sum(case when situation like 'Urgent' then 1 else 0 end) as count1
from mytable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:02:56.737

你可以

```
SELECT 
SUM(CASE WHEN date  between '2012-05-01' AND '2012-06-01' THEN value ELSE 0 END)
as sum1,
SUM(CASE WHEN date  between '2012-05-01' AND '2012-10-01' THEN value ELSE 0 END)
as sum2,
COUNT(CASE WHEN situation like 'Urgent%' THEN 1 ELSE 0 END)
as cnt1
FROM mytable Where situation like 'Urgent%' OR  date  between '2012-05-01' AND '2012-10-01' 
```

我猜你错过了 % 在 like:`like 'Urgent%'`中，不是`like 'Urgent'`。

# c++ - C++程序控制终端窗口

> ID：12919803
> 
> 赞同：4
> 
> 时间：2012-10-16T16:59:43.143
> 
> 标签：c++, linux, vim, terminal

在终端中使用 vim 时，它实质上会清空终端窗口并为您提供一个新窗口以开始编码，但当您退出 vim 时，仍会列出终端的先前输出。如何清除终端，使其仅输出程序的输出，但在进程结束后返回正常状态？（在 linux、fedora 中）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-16T17:13:26.063

在底层，您向终端程序发送一组控制字符，告诉它要做什么。这可能有点太复杂而无法手动管理。

因此，您可能希望查看像[ncurses](http://en.wikipedia.org/wiki/Ncurses)这样的控制台库，它可以为您管理所有这些复杂性。

特别是关于程序退出后神奇地出现的先前内容，这实际上是 vim 正在利用并且大多数现代终端支持的 xterm 功能。它被称为“替代屏幕”或简称为“替代屏幕”。基本上你告诉终端程序“好的，现在切换到一个全新的屏幕，我们稍后会回到另一个屏幕”。

切换到备用屏幕的命令通常是`\E[?47h`，而切换回来的命令是`\E[?47l` 为了好玩，试试这个：

```
echo -e "\033[?47h" 
```

然后切换回来：

```
echo -e "\033[?47l" 
```

或者对于更完整的解决方案，它更少依赖于你的 shell 来设置正确的东西（这些是 vim 通常使用的序列）：

```
echo -e "\0337\033[?47h" # Save cursor position & switch to alternate screen
# do whatever

#Clear alternate screen, switch back to primary, restore cursor
echo -e "\033[2J\033[?47l\0338" 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-16T17:09:42.863

您可以键入“clear”，或在程序中添加系统命令来调用“clear”。另外，如果您不知道，您可以从 vim 内部运行系统命令，这样您就不必退出并键入 clear。你也可以从 vim 内部编译和运行你的程序，例如 ->

```
:!clear
:!make
:!./programName 
```

另外，我从不使用这种技术，但我相信您可以使用 vim 调用新终端`:set terminal`

# jquery - 如何制作带有可点击顶级链接的 jquery 手风琴菜单？

> ID：12919805
> 
> 赞同：1
> 
> 时间：2012-10-16T16:59:43.533
> 
> 标签：jquery, html, jquery-ui, accordion

[http://viralpatel.net/blogs/create-accordion-menu-jquery/](http://viralpatel.net/blogs/create-accordion-menu-jquery/)

效果很好。我想将它用于我网站的基于类别的导航。类别有子类别，我有很多类别，因此手风琴菜单非常适合拥有很多而不会使网站看起来杂乱无章，有 100 个类别链接。

以上面链接的在线演示为例，如果有人单击“体育”或“技术”或“最新”的金色背景，我希望它能够正常运行并展开手风琴菜单。如果他们单击“体育”或“技术”或“最新”的文本，我希望它像普通链接一样工作并将它们发送到新页面。据我所知，我只能找到文本和背景扩展但没有功能分离的示例。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:04:54.707

试试下面的代码。它将使标题内的文本成为链接，但 div 仍可单击以展开。

代替

```
<div>Sports</div> 
```

和

```
<div><a href='http://google.com/'>Sports</a></div> 
```

这是一个演示：http: [//jsfiddle.net/UnV4Z/](http://jsfiddle.net/UnV4Z/)

# perl - ubuntu apache2 cgi 输出缓冲

> ID：12919808
> 
> 赞同：4
> 
> 时间：2012-10-16T16:59:53.053
> 
> 标签：perl, apache, ubuntu, buffering

我在 Ubuntu（11.04 和 12.04）上的 apache2 缓冲所有 cgi 输出直到脚本终止时遇到问题。如果我在 Centos/rhel 6.2 apache2 上运行相同的脚本，它运行正常。

```
#!/usr/bin/perl

$|=1;
print "Content-type: text/html\r\n\r\n";

print "hi..";
sleep 1;
print "hi..";
sleep 1;
print "hi..";
sleep 1; 
```

我已验证 mod_deflate 已禁用。

此外，这不仅仅是 perl 的事情，用 bash 编写的相同 cgi 脚本在 Ubuntu VS centos/rhel 上的行为相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:10:57.750

我在 Solaris 10 上遇到了类似的问题，但发现实际上不是 apache 的问题，而是 Web 浏览器（firefox 15.0.1）的问题。（我可以用`telnet webserver 80`纯 HTML 验证这一点，响应显示输出确实没有缓冲）

我可以通过打印带有 Content-Type 元标记的标头来为 Firefox 解决这个问题：

```
print<<'_EOF_';
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
</head>
<body>
_EOF_ 
```

然而，资源管理器似乎仍然在渲染页面之前等待所有数据，其他浏览器我没有可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:54:45.213

debian/ubuntu ( 和 solaris 太明显了) apache 包 stock configs 没有像 Redhat 那样指定字符集。真正的解决方案是简单地定义它。

在 ubuntu 上，将以下内容添加到 /etc/apache2/httpd.conf

AddDefaultCharset UTF-8

没有它，浏览器会缓存 cgi 脚本的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-13T11:38:27.190

对我来说，禁用 deflate 模块会有所帮助：

```
sudo a2dismod deflate 
```

# python - SQLAlchemy 子类/继承关系

> ID：12919809
> 
> 赞同：6
> 
> 时间：2012-10-16T16:59:53.833
> 
> 标签：python, sql, flask, sqlalchemy, flask-sqlalchemy

```
class Geolocation(db.Model):
    __tablename__ = "geolocation"
    id = db.Column(db.Integer, primary_key=True)
    latitude = db.Column(db.Float)
    longitude = db.Column(db.Float)
    elevation = db.Column(db.Float)         # Meters
    # Relationships
    pin = db.relationship('Pin', uselist=False, backref="geolocation")

    def __init__(self, latitude, longitude, elevation):
        self.latitude = latitude
        self.longitude = longitude
        self.elevation = elevation

    def __repr__(self):
        return '<Geolocation %s, %s>' % (self.latitude, self.longitude)

class Pin(db.Model):
    __tablename__ = "pin"
    id = db.Column(db.Integer, primary_key=True)
    geolocation_id = db.Column(db.Integer, db.ForeignKey('geolocation.id'))  # True one to one relationship (Implicit child)

    def __init__(self, geolocation_id):
        self.geolocation_id = geolocation_id

    def __repr__(self):
        return '<Pin Object %s>' % id(self)      # Instance id merely useful to differentiate instances.

class User(Pin):
    #id = db.Column(db.Integer, primary_key=True)
    pin_id = db.Column(db.Integer, db.ForeignKey('pin.id'), primary_key=True)
    username = db.Column(db.String(80), unique=True, nullable=False)
    password_hash = db.Column(db.String(120), nullable=False)
    salt = db.Column(db.String(120), nullable=False)
    # Relationships
    #posts = db.relationship('Post', backref=db.backref('user'), lazy='dynamic')               #One User to many Postings.

    def __init__(self, username, password_hash, salt, geolocation_id):
        super(Pin, self).__init__(self, geolocation_id)
        self.username = username
        self.password_hash = password_hash
        self.salt = salt

    def __repr__(self):
        return '<User %r>' % self.username 
```

我对如何在 SQLAlchemy 中设置 id 和与子类的关系感到困惑（我碰巧使用的是 Flask-SQLAlchemy）。我的总体设计是让超类 Pin 成为具有地理位置的任何事物（即用户、地点等）的高级表示。

Pin 和 Geolocation 对象之间存在一对一的关系，因此 Geolocation 不会同时包含两个用户（或用户和地点）的位置。现在我想继承 Pin 来创建 User 类。用户对象应该有一个名称、密码哈希、盐，我还希望能够通过`userObj.geolocation`. 但是，我后来想创建一个类 Place ，它也是 Pin 的子类，我应该能够通过`placeObj.geolocation`. 给定一个地理位置对象，我应该可以使用`geolocationObj.pin`查找用户/地点/等。对应的地理位置对象。我引入超类 Pin 的全部原因是确保 Pin 和 Geolocation 对象之间存在纯粹的一对一关系，而不是让 Geolocation 与需要 Geolocation 表具有`user_id`和`place_id`列的 User 或 Person 相关联，其中之一将始终为空。

我希望每个用户都能`.geolocation`通过父 Pin 类自动拥有一个属性，该属性引用 Geolocation 但似乎 SQLAlchemy 没有这样做。我怎样才能使子类关系起作用以实现我的目标，即让 User 和 Place 以及可能的其他类子类 Pin，让这些类中的每一个都具有通过 Pin 的地理位置属性，并且在 Pin 和地理位置之间具有一对一的关系？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T17:37:58.837

我想出的解决方案。这是在声明式风格的 SQLAlchemy 中子类化和使用 Join 继承的完整示例。

```
class Geolocation(Base):
    __tablename__ = "geolocation"
    id = Column(Integer, primary_key=True)
    latitude = Column(Float)
    longitude = Column(Float)
    elevation = Column(Float)         # Meters
    # Relationships
    person = relationship('Pin', uselist=False, backref="geolocation")

    def __init__(self, latitude, longitude, elevation):
        self.latitude = latitude
        self.longitude = longitude
        self.elevation = elevation

    def __repr__(self):
        return '<Geolocation %s, %s>' % (self.latitude, self.longitude)

class Pin(Base):
    __tablename__ = 'pin'
    id = Column(Integer, primary_key=True)
    geolocation_id = Column(Integer, ForeignKey('geolocation.id'), unique=True, nullable=False)  # True one to one relationship (Implicit child)
    type = Column('type', String(50))              # discriminator
    __mapper_args__ = {'polymorphic_on': type}

    def __init__(self, geolocation_id):
        self.geolocation_id = geolocation_id

class User(Pin):
    __tablename__ = 'user'
    id = Column(Integer, ForeignKey('pin.id'), primary_key=True)
    __mapper_args__ = {'polymorphic_identity': 'user',
                       'inherit_condition': (id == Pin.id)}
    user_id = Column(Integer, autoincrement=True, primary_key=True, unique=True)
    username = Column(String(80), unique=True)
    password_hash = Column(String(120))
    salt = Column(String(120))
    posts = relationship('Posting', primaryjoin="(User.user_id==Posting.user_id)", backref=backref('user'), lazy='dynamic')   #One User to many Postings.

    def __init__(self, username, password_hash, salt, geo_id):
        super(User, self).__init__(geo_id)
        self.username = username
        self.password_hash = password_hash
        self.salt = salt

    def __repr__(self):
        return '<User %s>' % (self.username)

class Posting(Pin):
    __tablename__ = 'posting'
    id = Column(Integer, ForeignKey('pin.id'), primary_key=True)
    __mapper_args__ = {'polymorphic_identity': 'posting',
                        'inherit_condition': (id == Pin.id)}
    posting_id = Column(Integer, autoincrement=True, primary_key=True, unique=True)
    creation_time = Column(DateTime)
    expiration_time = Column(DateTime)
    user_id = Column(Integer, ForeignKey('user.user_id'))              # One User to many Postings

    def __init__(self, creation_time, expiration_time, user_id, geo_id):
        super(Posting, self).__init__(geo_id)
        # For now, require creation time to be passed in. May make this default to current time.
        self.creation_time = creation_time
        self.expiration_time = expiration_time
        self.user_id = user_id

    def __repr__(self):
        #TODO come up with a better representation
        return '<Post %s>' % (self.creation_time) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T21:52:17.730

这是[映射继承层次结构](http://docs.sqlalchemy.org/en/rel_0_7/orm/inheritance.html)和在 SQLAlchemy 中以[声明方式进行的文档。](http://docs.sqlalchemy.org/en/rel_0_7/orm/extensions/declarative.html#declarative-inheritance)

我相信您会想要连接表继承风格，这意味着您的父类链中的每个类都有自己的表，其中包含唯一的列。基本上，您需要在表中添加一个鉴别器列来`pin`表示每个 Pin 的子类类型，并为您的类添加一些双下划线属性来描述对 SQLAlchemy 的继承配置。

# batch-file - 查找并键入/显示带有批处理文件的随机文本文件

> ID：12919812
> 
> 赞同：0
> 
> 时间：2012-10-16T17:00:03.847
> 
> 标签：batch-file, cmd

您好，我正在尝试完成我正在处理的批处理文件。

我有一个励志名言文本文件库，我希望我的批处理文件选择一个随机引用文本文件并将其显示在命令窗口中。我猜是命令类型。

我带引号的文件夹的路径是：

```
 C:\Users\niv\Documents\test\scripts\quotes 
```

里面有：

```
 Quote 1.txt
      Quote 2.txt
      Quote 3.txt. 
```

我做了命令：`type "C:\Users\niv\Documents\test\scripts\quotes\quote1.txt" 只显示了选定的quote1.txt ofcourse。

如果可能的话，我想让选定的引用文本文件成为一个变量，这样我就可以将它用于我的批处理文件中的不同任务，例如：

收到选定的报价后，使用程序执行此命令，使我的计算机可以读取“”之后的任何内容。像这样

```
%speech% "%quotes%" 
```

%speech% 让我的电脑说出引号内的内容。

我希望你能理解我在这里想要完成的事情，如果不只是问:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:05:40.867

我假设每个引用都包含在每个文件的一行中。我建议将所有引号放在一个名为quotes.txt 的文件中，每行一个引号。这应该更容易维护报价。然后，您需要的只是计算文件中行数的代码，然后随机选择 1 和 count 之间的行。

FIND /C 命令可以计算文件中的行数。

动态变量给出 0 到 32767 之间的`%RANDOM%`伪随机数，模 SET /A 运算符可用于将该值转换为 0 到 count-1 之间的数字。

FOR /F 命令从文件中读取行，您可以使用 SKIP 选项跳过随机数量的行。

**引号.txt**

```
quote 1
quote 2
quote 3
quote 4 
```

**randomQuote.bat**

```
@echo off
setlocal

:: Count the number of quotes and define a random number to skip
for /f %%N in ('find /c /v "" ^<quotes.txt') do set /a skip=%random% %% %%N
if %skip% gtr 0 (set skip=skip=%skip%) else set "skip="

:: Read a random quote into a variable
for /f "%skip% delims=" %%A in (quotes.txt) do (
  set "quote=%%A"
  goto :break
)
:break

:: Echo the quote (or do whatever you need)
echo %quote% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T21:52:51.330

您可以将文本文件读入如下变量：

```
setlocal EnableDelayedExpansion

set filename=Quote 1.txt
for /f "tokens=*" %%a in ('type "%filename%"') do (
  set quote=!quote!%%a^

)

echo !quote!

endlocal 
```

后跟一个空行的尾随`^`以换行符结束每个附加的行。`set quote=!quote!%%a^`如果您不需要换行符，则可以替换

```
for /f "tokens=*" %%a in ('type "%filename%"') do (
  set quote=!quote!%%a^

) 
```

和

```
for /f "tokens=*" %%a in ('type "%filename%"') do (
  set quote=!quote! %%a
) 
```

在一行中获取整个报价。

在任何情况下，您都需要为此[延迟扩展](http://ss64.com/nt/delayedexpansion.html)`!quote!`（而不是`%quote%`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T22:17:31.660

我的回答侧重于计算您提供的路径中的文本文件数量，然后选择一个随机引用编号并输入引用。前面的两个答案都可以用作将引号插入变量的参考（我的代码没有提供）：

```
@Echo off
set path=C:\Users\niv\Documents\test\scripts\quotes
cd /D %path%
setLocal EnableDelayedExpansion
set count=0

for %%a in (*.txt) do (
set /a count=!count!+1
)
echo Total number of quote files: %count%

set /a num=(%count% * %random%) / 32768 + 1
echo Quote #: %num%

type "%path%\quote %num%.txt" 

endlocal 
```

# r - 使用 pch= 参数绘制不同的形状

> ID：12919816
> 
> 赞同：16
> 
> 时间：2012-10-16T17:00:09.113
> 
> 标签：r, categorization

如果我使用 R 进行绘图。如何根据我的数据框中具有分类数据的列将特定形状分配给属于一个类别的数据点（使用`pch`参数 to ）？`plot()`将使用`as.factor()`对数据进行分组然后使用`pch`帮助？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-16T17:05:42.397

你的意思是这样的……？

```
plot(Sepal.Length ~ Petal.Length,
      xlab = "Petal Length (cm)",
      ylab = "Sepal Length (cm)",
      pch = c(16, 17, 18)[as.numeric(Species)],  # different 'pch' types 
      main = "Anderson Iris Dataset",
      col = c("red", "green","blue")[as.numeric(Species)],
      data = iris) 
```

产生：

![在此处输入图像描述](../Images/702a13bc8a36a37d5cc533ea251a0cd9.png)

# c++ - 检查文件在 n 分钟内存在一次 C++

> ID：12919823
> 
> 赞同：1
> 
> 时间：2012-10-16T17:00:31.070
> 
> 标签：c++

我创建了一个类，它读取文件并对内容进行一些操作并保存一个带有时间戳的新文件。但是，我要求以这样的方式执行，代码应该每隔一分钟检查文件是否存在。如果是，它应该处理该文件。它需要在跨平台上工作。

我是 C++ 的新手，需要知道为此我需要遵循什么方法。我是否需要创建流程或其他东西。我完全空白。

```
class inputHandler
{
public:

void readInput();
void performTask();
void saveFile();
}; 
```

由于代码实现太大，我只是发布结构。我准备花时间在这上面。所以，我需要一个示例教程来指导我实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:54:28.780

C++ 标准没有解决这个问题。因此，您必须为每个受支持的系统实现代码，或使用库。

据我了解，最通用的解决方案是创建一个每分钟循环一次的线程，检查文件时间戳。当然，根据你的代码，你可以用另一种方式来做，避免任何线程。使用通知系统`inotify`可能会好得多。此外，您可以`alarm()`在兼容 POSIX 的系统上使用，只要一分钟过去就会发出警报。

无论如何，如果您使用线程解决方案，在 POSIX 兼容的系统中，请查看`pthread_create()`和`stat()`. 在 Windows 中，签出`CreateThread()`和`GetFileTime()`. 有一个一分钟的延迟，`sleep(60000)`或者`Sleep(60000)`分别应该做的伎俩。

澄清一下，“创建一个进程”是系统的编程术语，大致意思是“启动一个新程序”（或“线程”，有时）。从这个意义上说，如果您遵循上述内容，您将创建一个新线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:08:56.540

最简单的部分是检查文件是否存在：当您打开文件时，只有文件存在时`std::ifstream`它才会处于良好状态：

```
std::ifstream in(filename);
if (in) {
    // the file exists and can be processed here
} 
```

更有趣的部分是定期做一些事情。基本思想是以某种形式设置一个计时器。根据是否需要做任何其他事情，您可能需要一个单独的线程：如果程序只是等到文件存在并且在此期间不做任何事情，您可以只是休眠并且不需要产生另一个线程。否则，您可能想要生成一个正在休眠的线程。

假设您需要使用单独的线程，您可能希望能够中断它的等待，例如，在有条件的情况下从单独的线程中以干净的方式退出。因此，我将使用带有定时等待的条件变量，即，如下所示：

```
std::mutex              guard;
std::condition_variable condition;
bool                    done(false);

std::unique_lock<std::mutex> lock(guard);
while (!done) {
    condition.wait_for(lock, std::chrono::minutes(n));
    if (!done) {
        do_whatever_needs_to_be_done_once_every_n_minutes();
    }
} 
```

上面的代码使用 C++ 2011 工具。如果您不能使用相应的类，您可以使用合适的替代品，例如[Boost](http://boost.org)类。

# javascript - 同位素动态排序

> ID：12919827
> 
> 赞同：1
> 
> 时间：2012-10-16T17:00:50.760
> 
> 标签：javascript, jquery, jquery-isotope

我正在使用很棒的 jQuery Isotope 插件 (http://isotope.metafizzy.co/)，但是我在创建排序时遇到了问题。这更像是一个 JavaScript 问题，而不是与 Isotope 本身有关的任何事情。

问题是我正在动态构建排序数据。所以我创建了一个生成 sortData 的函数。下面的一个例子：

```
function getSortData(){
    sortData = {};
    var sorts = ['symbol', 'number', 'score', 'name'];
    for (var i in sorts) {
      sortData[sorts[i]] = function($elem) {
        console.log(sorts[i]);
        return parseInt($elem.find('.'+ sorts[i]).text());     
      }
    }
    return sortData;
  } 
```

所以问题是里面的匿名函数总是在整个 getSortData() 函数运行之后运行。导致排序数组中的最后一项被分配给 sort[i] 变量。

这显示在这个小提琴中：http: [//jsfiddle.net/xzZR4/](http://jsfiddle.net/xzZR4/) 您会看到“名称”项始终输出到控制台。

我想不出另一种方法来创建允许传递正确排序名称的 getSortData 对象。

有任何想法的人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:51:46.243

知道了...

真正需要的是允许排序字段名称变量在匿名排序函数内具有本地范围。因为我无法将排序字段直接传递给匿名函数（因为它是由同位素调用的，所以我无法控制传递给它的参数）。

所以诀窍是创建另一个返回匿名函数的函数，这会将字段作为参数，使其具有本地范围。

```
function getSortData(){
    sortData = {};
    var sorts = ['symbol', 'number', 'score', 'name'];
    var sortField;
    for (var i in sorts) {
      sortField = sorts[i];
      sortData[sortField] = getSortDataCallback(sortField)
    }
    return sortData;
  }

function getSortDataCallback(sortField) {
  return function($elem) {
    return parseInt($elem.find('.'+ sortField).text());
  }
} 
```

# vb.net - 在 VB.NET 中迭代 ContextMenuStrip 项

> ID：12919832
> 
> 赞同：-1
> 
> 时间：2012-10-16T17:01:06.687
> 
> 标签：vb.net, contextmenustrip

我想遍历 ContextMenuStrip 中的所有项目。

有人可以帮我吗？

我正在尝试这个，但没有成功：

```
For Each it As ToolStripItem In Me.ContextMenuStrip1.Items 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:16:00.240

这个错误对我来说很清楚=)。`Next`在循环结束的地方添加单词。

```
For Each it As ToolStripItem In Me.ContextMenuStrip1.Items
    'Loop Contents
Next 
```

# ruby-on-rails - 如何测试密码更改是否成功？

> ID：12919835
> 
> 赞同：2
> 
> 时间：2012-10-16T17:01:22.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, rspec-rails, railstutorial.org

我已经使用`bcrypt-ruby`和组合了一个带有用户身份验证的基本应用程序`has_secure_password`。结果本质上是[Rails 教程](http://ruby.railstutorial.org)中应用程序的准系统版本。换句话说，我有一个 RESTful 用户模型以及登录和注销功能。

作为编辑用户信息的测试的一部分，我编写了一个更改密码的测试。虽然更改密码在浏览器中工作得很好，但我下面的测试没有通过。

```
subject { page }

describe "successful password change"
  let(:new_password) { "foobaz" }
  before do
    fill_in "Password",               with: new_password
    fill_in "Password Confirmation",  with: new_password
    click_button "Save changes"
  end

  specify { user.reload.password.should == new_password }
end 
```

显然，我在这里误解了一些基本细节。

简而言之：

1）为什么上面的代码不起作用？更改密码功能在浏览器中工作。同时，`rspec`继续重新加载上面最后一行中的旧密码。然后测试失败。

2）测试密码更改的更好方法是什么？

**编辑：**

初始密码设置为`foobar`，错误消息为：

```
Failure/Error: specify { user.reload.password.should == new_password }
   expected: "foobaz"
        got: "foobar" (using ==) 
```

基本上，看起来该`before`块实际上并未保存新密码。

供参考，相关控制器动作如下：

```
def update
  @user = User.find(params[:id])
  if @user.update_attributes(params[:user])
    flash[:success] = "Profile Updated"
    sign_in @user
    redirect_to root_path
  else
    render 'edit'
  end
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-08-28T04:29:06.617

对于设计用户，请[`#valid_password?`](http://www.rubydoc.info/gems/devise/4.2.0/Devise/Models/DatabaseAuthenticatable#valid_password%3F-instance_method)改用：

```
expect(user.valid_password?('correct_password')).to be(true) 
```

信用：[瑞恩比格](https://stackoverflow.com/q/9342832#comment11820708_9343181)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-04T02:45:13.683

这里一个不太令人满意的解决方案是使用`#authenticate`提供的方法编写测试`bcrypt-ruby`。

```
specify { user.reload.authenticate(new_password).should be_true } 
```

诚然这不是一个适当的集成测试，但它会让我们变绿。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-04T04:13:31.560

您的答案（使用`authenticate`）是正确的方法；你应该对此感到满意。您想比较模型中密码的散列版本而不是 @password（通过 attr_accessor）。请记住，您保存的是哈希而不是实际密码。

您`user`在测试中是该用户在内存中的副本。当您运行测试时，更新方法会在内存中加载该用户的不同副本并更新其保存到数据库的密码哈希。你的副本没有改变；这就是为什么您想重新加载以从数据库中获取更新的数据。

密码字段不存储在数据库中，而是存储为哈希，因此新的哈希会从数据库中重新加载，但是您正在比较`user`实例中 @password 的临时状态而不是 encrypted_pa​​ssword。

# google-chrome - Chrome 会显示 opengl xml

> ID：12919837
> 
> 赞同：3
> 
> 时间：2012-10-16T17:01:39.500
> 
> 标签：google-chrome

在 chrome 中的网站

[http://www.opengl.org/sdk/docs/man/xhtml/gluUnProject.xml](http://www.opengl.org/sdk/docs/man/xhtml/gluUnProject.xml)

看起来不像在Firefox中那样。没有图形和很多丑陋的文字。有一些可读的部分，但无论如何看起来都不正确。它在隐身模式（无插件）下看起来稍微好一些，但仍然无法正确显示。

有谁知道问题是什么？有人说 chrome 无法处理 rss 提要或与 xml 文件相关的东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T00:27:52.167

在我开始讨论之前，感谢 Chrome 优化网页浏览速度和简单性。第22条？为了实现 Chrome 的整体优化，必须牺牲其他浏览器中*提供*的某些功能。

现在，如果您在 Google Chrome 中遇到 RSS 提要问题，那可能是由于 Chrome 无法在没有附加组件的情况下显示 XML 或 RSS/Atom 提要这一不幸的事实。有时 Chrome 会尝试劫持并打开 Google RSS 阅读器的提要。有一些方法可以使 XML 提要在浏览器中呈现。在 Chrome 中尝试任何会显示供稿“查看”意图的应用程序，例如[Feed Intent](https://chrome.google.com/webstore/detail/feed-intent-viewer/oceapojkdgeophkjdijkpbjifdnfimdh)。另一种选择是[RSS 订阅扩展](https://chrome.google.com/webstore/detail/rss-subscription-extensio/nlbjncdgjeocebhnmkbbbdekmmmcbfjd)。最后，看看这个[XML Viewer](https://chrome.google.com/webstore/detail/xv-%E2%80%94-xml-viewer/eeocglpgjdpaefaedpblffpeebgmgddk)。

# linux - Linux scsi 命令队列

> ID：12919839
> 
> 赞同：4
> 
> 时间：2012-10-16T17:01:46.363
> 
> 标签：linux, command, queue, depth, scsi

我是这个论坛的新手。我目前遇到一个问题。

我是 Linux 内核驱动程序的初学者，目前正在为块大容量存储设备开发 Linux SCSI 设备驱动程序。开发平台位于使用 Fedora 14 的高端机器上。设置是 1 台主机到 1 台 LU/设备。长话短说，驱动程序在初始化时没有问题，它可以检测设备并向其发送 scsi 帧，它可以读取和写入设备，并且我可以进行稳定的 Iometer 读取和写入通过驱动程序进行测试。当一次只有一个未完成的命令（没有排队）时，所有这些。

问题是，我不能排队上班。除非我是第一个命令，否则上层 SCSI 层不会向我 (LLD) 发送多个未完成`scsi_done()`的命令。我希望上层`queuecommand()`在我将命令发送到设备进行处理之前可以多次调用，然后设备会中断我的响应并`LLD`使用`scsi_done()`. 不用排队，我们的速度很慢。

我已经调整了我认为与排队有关的值，例如在 .can_queue 和 .can_queue 中设置我`.cmd_per_lun`的目标 queue_depth 。基本上我玩过各种值，包括 1，但无济于事。如果这有任何影响，我也确实禁用和启用了标记，但仍然没有改变。到目前为止，我不记得在驱动程序中做了太多事情，除了. 有什么我遗漏的并且仍然可以在驱动程序级别做的吗？我不敢相信 Linux 不支持命令队列。我在这里遗漏了一些东西。 `scsi_host``scsi_host_template``scsi_device``slave_configure`

# php - 在 Opencart 中修改控制器而不触及核心？

> ID：12919840
> 
> 赞同：5
> 
> 时间：2012-10-16T17:01:47.933
> 
> 标签：php, polymorphism, opencart, extending-classes

开发人员有没有办法在 Opencart 中修改控制器和模型方法，而无需接触核心文件？就像 WP 拥有*functions.php*文件的方式一样，您可以在其中修改 WP 的内容，而不必担心未来的升级会覆盖您的代码。

以下是我认为每个开发人员都需要在他们的 Opencart 工具包中包含的一些示例：

*   更新值的能力
*   运行自定义 SQL 查询
*   程序层更新逻辑
*   进一步扩展系统

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:14:25.827

看看[vQmod](http://vqmod.com)。这是大多数开发人员使用的主要方式，以免修改核心代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-04T18:12:37.130

我建议对核心进行最低限度的修改，以便可以轻松扩展。对于已经为时已晚的任何人，下面是一个将修改过的核心从 2.0.2.0 升级到 master 的示例：（否则我建议分叉 opencart 并使用 rebase！）

```
git clone https://github.com/opencart/opencart
cd opencart
git checkout 2.0.2.0 #insert tag with your current version. Mine was 2.0.2.0
cd upload

#Note: sed strips paths for 'upload/' (opencart)
git diff 2.0.2.0 master > ~/patch-to-newest-version.diff | sed "s/+++ b\/upload\//+++ b\//" | sed "s/--- a\/upload\//--- a\//"
#       I chose ^master^ but you'd better use a stable version.

cd to-your-modified-(opencart)core
patch -p1 < ~/patch-to-newest-version.diff

#..time to resolve the conflicts.. hopefully not much. Good luck. 
```

（如果有人知道修补修改过的核心的更好方法，请发表评论。特别是因为继续在“/upload”文件夹中工作并不好......使用稀疏结帐或s/t？

# javascript - 猫鼬预聚合报告

> ID：12919842
> 
> 赞同：0
> 
> 时间：2012-10-16T17:01:50.897
> 
> 标签：javascript, node.js, mongodb, mongoose

按照官方 mongodb 文档（[http://docs.mongodb.org/manual/use-cases/pre-aggregated-reports/#log-an-event](http://docs.mongodb.org/manual/use-cases/pre-aggregated-reports/#log-an-event)），我正在尝试在 nodejs + mongoose 中设置相同但有一个我无法弄清楚的问题。

问题在于 $inc 键：值，我无法像在 python 中那样计算动态键：

```
 update = { '$inc': {
            'hourly.%d' % (hour,): 1,
            'minute.%d.%d' % (hour,minute): 1 } 
 } 
```

我的代码看起来像：

```
var daily_schema = mongoose.Schema({
    _id: 'string',
    metadata: {
        date: { type: 'date', default: Date.now() },
        site: 'string',
        page: 'string'
    },
    hourly: 'object',
    minute: 'object'    
});

var daily_stats = mdb.model('hits', daily_schema);

var date = new Date();
var day = date.getDate();
var hour = date.getHours();
var minute = date.getMinutes();
var year = date.getFullYear();

daily_stats.update({
    _id : year + '/' + data.xid + '/' + data.url,
    metadata : {
        date : date,
        site : data.xid,
        page : data.url
    }
    },
    {
    $inc: { 
        'hourly.' + hour : 1, // (python: 'hourly.%d' % (hour,): 1,) how about javascript?
        'minute.' + hour + '.' + minute : 1
    }
    },
    { upsert: true }, function(err) {
        if (err) { console.log("daily_stats:upsert:error"); console.log(err) } else {
        console.log("daily_stats:upsert:ok");
    }           
    }
); 
```

请给我一个提示，如何在 javascript 中做到这一点？

最好的问候和感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:13:02.887

您需要首先以编程方式构建您的`$inc`对象，然后将其包含在您的`update`调用中。

```
var inc = { $inc: {} };
inc.$inc['hourly.' + hour] = 1;
inc.$inc['minute.' + hour + '.' + minute] = 1;

daily_stats.update({
    _id : year + '/' + data.xid + '/' + data.url,
    metadata : {
        date : date,
        site : data.xid,
        page : data.url
    }},
    inc,
    { upsert: true }, function(err) {
        if (err) { console.log("daily_stats:upsert:error"); console.log(err) } else {
        console.log("daily_stats:upsert:ok");
    }           
}); 
```

# asp.net-mvc-3 - 如何将下拉列表正确绑定到模型，以便能够将值从视图传递回控制器

> ID：12919846
> 
> 赞同：1
> 
> 时间：2012-10-16T17:02:16.590
> 
> 标签：asp.net-mvc-3, binding, collections

我正在尝试更新一个复合页面模型，该模型作为其属性之一具有对象列表。

我的模型如下所示：

```
public class PageViewModel 
{
    public ProgramListVM ProgramsDDL { get; set; }

    public PageViewModel()
    {
        this.ProgramsDDL = new ProgramListVM();
    }
} 
```

`ProgramListVM`课程是：

```
public class ProgramListVM
{
    public List<ProgramVM> Program_List { get; set; }
    public int SelectedValue { get; set; }

    public ProgramListVM()
    {
        this.Program_List = new List<ProgramVM>();
        this.SelectedValue = 0;
    }
} 
```

并且`ProgramVM`是：

```
public class ProgramVM
{
    public int ProgramID { get; set; }
    public string ProgramDesc { get; set; }

    public ProgramVM(int id, string code)
    {
        this.ProgramID = id;
        this.ProgramDesc = code;
    }
} 
```

我尝试通过以下两个来呈现这个下拉列表：

1-

```
 <%: Html.DropDownList("ProgramsDDL", new SelectList(Model.Page6VM.ProgramsDDL.Program_List, "ProgramID", "ProgramDesc", Model.Page6VM.ProgramsDDL.SelectedValue))%> 
```

2-

```
 <%: Html.DropDownListFor(m => m.Page6VM.ProgramsDDL.Program_List, new SelectList(Model.Page6VM.ProgramsDDL.Program_List, "ProgramID", "ProgramDesc"), Model.Page6VM.ProgramsDDL.SelectedValue)%> 
```

但是当我尝试通过控制器操作更新我的模型时

```
[HttpPost]
    public ActionResult UpdateUser(PageViewModel model)  
    {
    } 
```

`model.ProgramsDDL.count`为零。

呈现此下拉列表并能够设置所选索引并且还能够将所选索引发送回控制器的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:11:18.403

您混淆了[Html.DropDownListFor()](http://msdn.microsoft.com/en-us/library/ee703573%28v=vs.108%29.aspx)的参数。下面的代码示例应该可以工作。

```
<%: Html.DropDownListFor(m => m.SelectedValue, 
                              new SelectList(Model.Page6VM.ProgramsDDL.Program_List, "ProgramID", "ProgramDesc"), 
                              null) %> 
```

您的模型中还应该有一个回发的 SelectedValue。

```
public class PageViewModel 
{
    public ProgramListVM ProgramsDDL { get; set; }
    public int SelectedValue { get; set; }

    public PageViewModel()
    {
        this.ProgramsDDL = new ProgramListVM();
    }
} 
```

此外[，默认模型绑定器无法将复杂集合映射到您的模型](http://msdn.microsoft.com/en-us/magazine/hh781022.aspx)。无论如何，您可能在发布操作中不需要它们。

# ruby-on-rails - Ruby 1.8.7 有效。Ruby 1.9.2 产生“跟踪/BPT 陷阱：5”

> ID：12919849
> 
> 赞同：1
> 
> 时间：2012-10-16T17:02:24.593
> 
> 标签：ruby-on-rails, ruby

我在安装了 RVM 的两个版本的 Ruby 上运行 Rails 2.3.11 应用程序。两个版本的 Ruby 都有完全相同的 gem，并且每个版本都有完全相同的版本。我卸载了应用程序中不需要的所有 gem。

Ruby 1.8.7 ( `RVM 1.8.7`) 一切正常。

Ruby 1.9.2 有两个 gemset。`RVM 1.9.2`有另一个应用程序的 gemset。`RVM 1.9.2@this_app`有下面列出的宝石。我得到`RVM 1.9.2@this_app`：

```
Trace/BPT trap: 5 
```

日志只是停止，没有指示错误是什么。是否存在宝石兼容性问题？以下是宝石列表：

```
actionmailer (2.3.11)
actionpack (2.3.11)
activerecord (2.3.11)
activeresource (2.3.11)
activesupport (2.3.11)
devise (1.0.10)
google4r-checkout (1.0.6.1)
i18n (0.6.0)
json (1.6.1)
liquid (2.2.2)
money (3.7.1)
mysql (2.8.1)
rack (1.1.2)
rails (2.3.11)
rake (0.9.2)
rmagick (2.13.1)
warden (0.10.7) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:14:31.287

这似乎是已安装的 gem 列表，而不是 Gemfile 中的列表。

您如何管理宝石和宝石组？您似乎正在使用捆绑器，这很好，但是您如何在 ruby​​ 和 gemsets 版本之间切换？您使用的是 rvm 还是 rbenv？你有 Gemfile 吗？

如果您不使用捆绑程序，则可以使用 rails 2.3.11 来执行此操作，它只需要一些工作。我强烈推荐这个，这样你就可以更好地管理你的依赖关系。

然后，我会考虑从 , 中删除任何可以`Gemfile`更新的内容`bundle install`，然后再次尝试运行。

例如，我认为您`cgi_multipart_eof_fix`不再需要，这取决于您的部署方式。

其他宝石，如`god`、`rubygems-update`和`rdoc`通常不在应用程序中使用，并且可能没有密切关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T20:49:51.133

所以我认为您甚至无法成功启动应用程序`ruby ./script/server`？它没有启动，然后在第一个请求时崩溃？

当 Ruby 开始崩溃时，首先要看的是您是否使用了任何二进制（不是纯 Ruby）gem。只看上面的列表，我相信`json`, `mysql`, 和`rmagick`可能是二进制的。从您的 Gemfile 中暂时将它们注释掉（如果您必须注释掉部分应用程序代码，请执行此操作）。尝试启动应用程序，`bundle exec ruby ./script/server`看看它是否崩溃。（我认为`json`Rails 可能需要，在这种情况下，您将无法禁用该功能。）

如果您*只*使用纯 Ruby gems，而 Ruby 正在崩溃，那么您很可能在解释器本身中发现了一个错误。这没什么好害怕的。如果我是你，我会卷起袖子，潜入 C 源代码（从 克隆它`github.com/ruby/ruby`），然后修复它！但是，如果您没有 C 方面的技能，您可能不想尝试它。

如果你想尝试调试解释器，首先要找到它崩溃的点。为此，将启动代码（例如`application.rb`，`boot.rb`等RVM 保留 Ruby 代码和编辑）。`puts "got to #{__FILE__}:#{__LINE__}"``puts`

一旦找到崩溃的点，您就可以进入 C 源代码并找到任何平台方法的实现或构造崩溃的来源。要获取有关内部发生的更多信息，请添加调试`printf`调用并使用`make && make install`. （请注意，来自 C 级别`printf`的消息似乎与 Ruby 级别的交错顺序不太正确`puts`。）临时编辑您的 PATH 以便克隆`ruby/bin`目录中新编译的二进制文件将充当系统`ruby`。

如果你真的能解决问题并为 Ruby 贡献一个补丁，那对你来说意味着一些很好的吹牛的权利！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T05:48:50.993

不太喜欢回答我自己的问题，但找到了尚未提供的完整答案。

部分问题是 rmagick 兼容性。我在应用程序中注释掉了对 rmagick 的引用，但仍然出现相同的错误。

最大的影响因素是 RVM 安装了 ruby​​gems 1.8.24。rubygems 1.6.x 上的任何内容都不适用于 rails 2.3.x 应用程序。命令“rvm ruby​​gems 1.6.2”安装了兼容的版本。

# c++ - 多维向量总线错误

> ID：12919854
> 
> 赞同：2
> 
> 时间：2012-10-16T17:02:33.190
> 
> 标签：c++, vector, multidimensional-array

`11663 Bus Error`当我尝试执行以下操作时，我有一个；

```
std::vector< std::vector<int> > bullets;
std::vector<int> num;
num[0] = 7;
bullets.push_back(num); 
```

我认为这会起作用，因为 vector`bullets`的类型是向量。为什么这不能按预期工作？此外，以下作品；

```
std::vector< std::vector<int> > bullets;
std::vector<int> num (4, 100);
bullets.push_back(num); 
```

而且我不知道为什么会这样，但我的其他代码不知道。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T17:04:39.087

```
std::vector<int> num;
num[0] = 7; 
```

`num`还没有为任何东西分配存储空间。`[]`仅当您知道该索引处存在元素时才使用索引语法。否则，使用`push_back`，如果需要，它会增加`vector`存储容量。第二个示例有效，因为您使用了为元素保留一定空间的构造函数（在本例中为 4，所有元素的值均为 100）。

```
std::vector<int> num;
num.push_back(7);
bullets.push_back(num); 
```

* * *

附带说明一下，“这不起作用”不是一个很有帮助的问题描述。另外，请注意，如果您需要遍历每个元素，在性能关键代码中用作矩阵的向量向量不是一个好主意。

暂时不要废弃它，也不要担心它，除非您*知道*这将是一个问题，但要意识到使用这种方法会丢失数据的局部性，因为每个向量都会单独分配其存储空间。如果这些数据在一个紧密的循环中被迭代，你最好分配一个大向量并手动计算每个单独位置的偏移量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:05:15.120

```
num[0] = 7; 
```

应该

```
num.push_back(7); 
```

# authentication - 经过身份验证的推荐选项消失了

> ID：12919855
> 
> 赞同：1
> 
> 时间：2012-10-16T17:02:35.547
> 
> 标签：authentication, facebook-apps

我刚刚创建了我的第二个应用程序，我想启用我在第一个应用程序上创建的 Authenticated Referrals。但是“Authenticated Referrals”选项在“设置”>“权限”中消失了，但该选项仍在 Facebook 应用程序的文档中：http: [//i.stack.imgur.com/WC6A0.jpg](http://i.stack.imgur.com/WC6A0.jpg)

你能帮我找回这个选项吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T17:10:26.903

如本博文中所述，已删除新应用程序的经过身份验证的推荐

[https://developers.facebook.com/blog/post/2012/10/10/growth-quality-apps-with-open-graph/](https://developers.facebook.com/blog/post/2012/10/10/growing-quality-apps-with-open-graph/)

> 经过身份验证的推荐通过要求人们授予权限以访问几乎没有上下文的内容，从而为人们创造了不一致的体验。您必须迁移才能使用标准的 Auth Dialog 体验。

# windows - 从 Windows 隐藏监视器，仅在我的应用程序中使用它

> ID：12919866
> 
> 赞同：14
> 
> 时间：2012-10-16T17:03:04.937
> 
> 标签：windows, hardware, multiple-monitors

我需要将显示器用作特殊应用程序的“私人”设备，我想将其用作某种手电筒并在其上全屏绘制特殊图案。我不希望该显示器被操作系统（Windows 7）识别为普通显示器。即用户不应该能够将鼠标移动到该显示器，或更改其分辨率，或在其上运行屏幕保护程序或其他任何东西。但我希望能够从我的应用程序中与之交互。使用 HDMI 电缆将显示器插入视频卡（很可能是 nVidia）。

最简单的方法是什么？赞赏所有解决方案，包括购买额外的适配器或简单的视频卡，或任何其他特殊设备。我现在能想到的唯一解决方案是将显示器插入另一台计算机，在该计算机上运行守护程序，通过以太网或其他方式将其连接到我的计算机，从我的计算机与该守护程序通信。它非常难看，需要额外的计算机。但我需要解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-27T12:23:13.040

为此，请将显示器与桌面分离。从桌面分离监视器会阻止 Windows 将其用于正常 UI。

[此知识库文章中](http://support.microsoft.com/kb/306399)提供了附加和分离监视器的示例代码。完成后，您可以[将显示器用作独立显示器](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145179%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-26T08:50:30.277

基于您自己使用外部 PC 的想法，以及 Mark 关于使用 VM 作为这种“外部”设备的评论：

您可以购买一个外部 USB 到 VGA 视频适配器，例如其中一个，大约 40美元：

![USB 转 VGA 适配器](../Images/01e4a1752741d8b87ea6c730766413b0.png)

[http://www.newegg.com/USB-Display-Adapters/SubCategory/ID-3046](http://www.newegg.com/USB-Display-Adapters/SubCategory/ID-3046)

几乎每个 VM 软件都支持某种 USB 直通。VirtualBox 就是一个很好的例子。只有 VM 可以看到 USB 设备，主机完全忽略它。所以步骤是：

1.  购买所说的 USB 转 VGA 适配器。
2.  配置 slim 虚拟机并编写一个小实用程序以通过网络接收要在屏幕上显示的图像。
3.  配置 VirtualBox 以将 USB 转 VGA 适配器直接连接到虚拟机。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-26T14:32:46.693

这是监视您的应用程序的另一个简单解决方案。

您的应用程序应提供 API 监控服务，在您想要的任何端口（例如`http://{userip}:{port}/{appname}/monitor`）上作为 HTTP 服务。

您的应用程序监控自己，将监控数据保存在内存、本地文件或数据库中，对用户隐藏。监视器 API 将此数据提供给您想要的任何具有浏览器的设备（平板电脑、手机、上网本、android mini-PC、低成本 linux 设备、任何 PC 或任何操作系统......来自互联网、您的 LAN 或直接连接到托管应用程序的 PC）。

*优点：*

*   在您的应用程序中收集（并提供）要监控的数据：**只有一个可执行文件**
*   可以远程显示：**从任何地方**！
*   使用标准 HTTP 身份验证机制轻松实现访问**安全**
*   您可以监控多个应用程序（即多个监控 URL）
*   您可以自由使用**任何浏览器**进行监控（即使是同一台 PC 上的本地窗口浏览器用于测试目的）
*   从您想要的**任何硬件和操作系统**进行监控
*   简单灵活！

*缺点：*

*   很少，但是告诉我...

选择此解决方案取决于您需要监控的数据类型（文本、图像、视频...），还取决于您期望的刷新率，具体取决于您的系统网络配置。

希望能帮助到你 ：）

# javascript - 转到另一个选项卡时，让 Twitter Bootstrap 选项卡保留其位置

> ID：12919867
> 
> 赞同：0
> 
> 时间：2012-10-16T17:03:21.740
> 
> 标签：javascript, html, css, twitter-bootstrap

在 Bootstrap 中切换到另一个选项卡时，用户总是开始查看顶部的选项卡内容。我想知道在返回选项卡时是否有办法滚动到用户之前查看的位置。

细节：

我像这样定义了我的选项卡列表：

```
<ul id="main_tab" class="nav nav-tabs">
    <li class="active"><a href="#users_tab_content" data-toggle="tab">Users</a></li>

Then there are more <li> values under the <ul>.
Then the content starts like so:

<div id="main_tab_content" class="tab-content">
    <div class="tab-pane fade in active" id="users_tab_content">

Of course, with more <div> content tabs under the main <div>. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:37:01.207

不看任何代码都很难猜出你在说什么。您使用的是常规标签还是 JavaScript 标签？

我会继续预感并猜测您正在使用 JavaScript 选项卡。这不应该发生，所以我建议您仔细查看您的标记。通常，`preventDefault()`在 JS 中有一个调用会阻止页面跳转。

确保您在链接中正确引用了您的 ID：

```
<a href="#some_location"> 
```

# database-design - 如何存储查询的 RavenDB 文档的计数

> ID：12919868
> 
> 赞同：2
> 
> 时间：2012-10-16T17:03:31.130
> 
> 标签：database-design, indexing, mapreduce, ravendb, cqrs

我在 RavenDB 中有一个文档集合，客户端应用程序围绕它执行相对直接的 CRUD。有一个简单的仅地图索引可用于查询集合。

我现在必须向应用程序添加一个功能，该功能将显示单个文档在查询中被检索到的次数，即应用程序“服务”的次数。这样，当您通过应用程序查看单个文档时，您可以看到它已被提供的次数。还需要一个“重置”按钮来将计数设置回零，然后允许计数继续增加。

为了降低应用程序接口的复杂性，该要求被故意保持粗略。日期范围报告的选项已被讨论，被认为是不必要的。

一些背景：某些文档的增量服务计数可能每天超过 10,000。预计每周会发生一次文档服务计数的“重置”。我应该能够在查询操作之外以 CQRS 方式异步实现对数据库的递增写入。

我可以想到三种方法，并想知道最好的选择是什么？

1.  将整数 Count 属性添加到文档对象，以便在随后调用递增对象时在每个对象上递增。这将使文档大小保持较小。

2.  将 List 属性添加到当前日期的文档对象，以类似于选项 1 的方式附加到每个对象上。如果/当请求基于日期的报告但文档可能变得非常大时，这将很有用？

3.  添加一个单独的“计数器”文档集合，其中包含提供的文档 ID 和提供它的日期时间。我认为这会从 map/reduce 索引中获益？

还有几个早期的后续问题......

*   有没有一种面向方面的方法可以用 RavenDB 实现这一点？
*   通过使用更新（选项 1 + 2）而不是插入（选项 3）或反之亦然，是否有任何性能优势？

感谢您的回答和阅读所有这些！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T23:45:03.397

使用 RavenDB 实现这一点的面向方面的方法是使用[读取触发器](http://ravendb.net/docs/server/extending/triggers/read)。您可以将检索计数存储在文档元数据中。这将是最高效的解决方案，因为不需要有关单个检索的信息。

**更新**

**正如maxbeaudoin**所指出的，元数据是读取计数器的合适位置，因为它是关于数据的数据。此外，由于元数据与文档一起存储，因此它会表现良好。[这](http://ravendb.net/docs/client-api/advanced/document-metadata)描述了如何在 RavenDB 中使用元数据。

**更新 2**

如果您只存储计数，那么元数据是性能和实用性的最佳选择。如果您需要存储每个视图事件并且您预计每个文档会有数千个潜在的视图事件，那么我会将视图事件存储在单独的文档中，而不是存储在同一个文档或文档元数据中。元数据只是键值对的集合，不适用于大型集合。不存储在同一个文档中的原因是您必须更改文档模型以包含视图事件，这会污染您的模型，而且正如您所指出的，检索具有 10K 视图事件的文档将是 IO起伏并导致性能问题。您可以使用投影仅检索特定的文档字段，但不会跟踪返回的文档的更改。考虑到麻烦，我

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T00:42:58.103

也许我在这里有点离谱，但你为什么要每天从数据库中实际加载这个文档 10k 次呢？使用一些输出缓存可能会更好。

Raven 缓存也将对您有利。我必须承认，如果客户端发生缓存命中，我不确定读取触发器是否仍会在服务器上触发。如果您确实走触发器路径，我将首先验证这一点。

也许在客户端保持一个计数器会更好。即使您获得缓存命中并且不触摸 raven，您也可以增加计数器。然后，您可以定期将计数器刷新回服务器，以更新文档本身或单独的统计文档中的计数属性。

这确实有助于提高性能。假设您在 5 分钟内有 50 次观看。为什么每次增加 1，每 5 分钟增加 50。嗯，不完全是 50，而是你在那段时间在前端计量的任何东西。即使使用多个服务器，这也可以扩展，如果您只是将新计数添加到现有服务器，则可以通过 raven 的修补 API 应用更改。

**更新**

我整理了一个可能对你有帮助的例子。除了定期出现的一些计时器外，这具有您在客户端执行此操作所需的一切。希望这值得你的赏金。

```
public class Counter
{
    // Uses the Multithreaded Singleton pattern
    // See http://msdn.microsoft.com/en-us/library/ff650316.aspx

    private Counter() { }

    private static volatile Counter _instance;
    private static readonly object SyncRoot = new object();

    public static Counter Instance
    {
        get
        {
            if (_instance != null)
                return _instance;

            lock (SyncRoot)
            {
                if (_instance == null)
                    _instance = new Counter();
            }
            return _instance;
        }
    }

    private readonly ConcurrentDictionary<string, long> _readCounts =
                                         new ConcurrentDictionary<string, long>();

    public void Increment(string documentId)
    {
        _readCounts.AddOrUpdate(documentId, k => 1, (k, v) => v + 1);
    }

    public long ReadAndReset(string documentId)
    {
        lock (SyncRoot)
        {
            long count;
            return _readCounts.TryRemove(documentId, out count) ? count : 0;
        }
    }

    public IDictionary<string, long> ReadAndResetAll()
    {
        var docs = _readCounts.Keys.ToList();
        return docs.ToDictionary(x => x, ReadAndReset);
    }
}

public class Story
{
    public string Id { get; set; }
    public string Title { get; set; }
    public string Author { get; set; }
    public DateTime Published { get; set; }
    public long ReadCount { get; set; }
    public string Content { get; set; }
}

[TestClass]
public class Tests
{
    [TestMethod]
    public void TestCounter()
    {
        var documentStore = new DocumentStore { Url = "http://localhost:8080" };
        documentStore.Initialize();

        documentStore.DatabaseCommands.EnsureDatabaseExists("Test");

        using (var session = documentStore.OpenSession("Test"))
        {
            var story = new Story
                {
                    Id = "stories/1",
                    Title = "A long walk home",
                    Author = "Miss de Bus",
                    Published = new DateTime(2012, 1, 1),
                    Content = "Lorem ipsum dolor sit amet, consectetur adipiscing elit."
                };
            session.Store(story);
            session.SaveChanges();
        }

        // This simulates many clients reading the document in separate sessions simultaneously
        Parallel.For(0, 1000, i =>
            {
                using (var session = documentStore.OpenSession("Test"))
                {
                    var story = session.Load<Story>("stories/1");
                    Counter.Instance.Increment(story.Id);
                }
            });

        // This is what you will need to do periodically on a timer event
        var counts = Counter.Instance.ReadAndResetAll();
        var db = documentStore.DatabaseCommands.ForDatabase("Test");
        foreach (var count in counts)
            db.Patch(count.Key, new[]
                {
                    new PatchRequest
                        {
                            Type = PatchCommandType.Inc,
                            Name = "ReadCount",
                            Value = count.Value
                        }
                });

        using (var session = documentStore.OpenSession("Test"))
        {
            var story = session.Load<Story>("stories/1");
            Assert.AreEqual(1000, story.ReadCount);
        }
    }
} 
```

# wcf - Unity 中的单例每次调用上下文 WCF Web 请求

> ID：12919872
> 
> 赞同：4
> 
> 时间：2012-10-16T17:03:54.000
> 
> 标签：wcf, unity-container

我已经完成了[Unity 中的 Singleton Per Call Context (Web Request) 问题](https://stackoverflow.com/questions/1151201/singleton-per-call-context-web-request-in-unity)。

基本上我想使用 Unity Container 为每个 wcf 请求创建一个单例对象。尽管我发现其他问题的答案对 ASP.Net Web 应用程序很有帮助，但我不确定这些答案是否仍然适用于 WCF 服务。

问题是，在 WCF 服务中同时使用 CallContext 和 HttpContext，我们可以创建 PerCallContextOrRequestLifeTimeManager 吗？这会为每个 wcf 调用提供单例对象吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T14:39:18.517

Andrew Oakley 的[Unity Lifetime Managers 和 WCF](http://blogs.msdn.com/b/atoakley/archive/2010/12/29/unity-lifetime-managers-and-wcf.aspx)。

他同时创建了 UnityOperationContextLifetimeManager 和 UnityInstnaceContextLifetimeManager。完整代码链接在博客底部。它不是最简单的实现，需要一点时间才能完全理解其中的所有功能。但是其中包含了很好的测试，IMO 这就是 Unity.WCF 应该做的。我自己使用了其中的几个，并且很高兴我做到了。

# rspec - 当 rspec 集成测试中的存根时间时，有什么方法可以打印实际时间？

> ID：12919873
> 
> 赞同：0
> 
> 时间：2012-10-16T17:03:55.700
> 
> 标签：rspec, stub

当运行一些长的集成测试序列时，我们存根 Time 以控制某些事件的相对时间，

但是，在某些测试套件日志中，我们希望打印测试某些部分的实际经过时间。（作为一个例子，我们多次重复某些序列，并希望随着测试数据集的增长而测量测试性能的任何下降。）

一旦 Time 被存根，有什么方法可以在测试期间访问真实的系统时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:47:55.577

您可以尝试`unstub`按照[此处](https://www.relishapp.com/rspec/rspec-mocks/v/2-11/docs/method-stubs/stub-on-any-instance-of-a-class#any-instance-unstub)所述进行呼叫。

如果您只需要设置一个特定的时期，您可以尝试[timecop](http://github.com/travisjeffery/timecop)及其“旅行”选项

# php - 如果在 mysql 表中找不到值，则使用 if/else 语句显示文本？

> ID：12919881
> 
> 赞同：0
> 
> 时间：2012-10-16T17:04:28.163
> 
> 标签：php, mysql, if-statement

我正在尝试找到一种在此代码中显示 else 或 if 语句的方法，以便如果 mysql 表中不存在记录/值，那么它将回显一条文本，例如“问我”。

继承人的代码：

```
<?php
$rates_set = get_rates();
while ($rates = mysql_fetch_array($rates_set)) {
 ?>
 <table width="110%" border="0" cellspacing="5" cellpadding="5">
  <tr>
    <th align="left" valign="middle" bgcolor="#EBEBEB" scope="col">Rates</th>
    <th align="center" valign="middle" bgcolor="#EBEBEB" scope="col">money in</th>
    <th align="center" valign="middle" bgcolor="#EBEBEB" scope="col">money Out</th>
  </tr>
  <tr>
    <th align="left" valign="middle" bgcolor="#EBEBEB" scope="row">cost</th>
    <td align="center" valign="middle">£<?php echo "{$rates['labour']} "; ?></td>
    <td align="center" valign="middle">£<?php echo "{$rates['material']}"; ?></td>
  </tr>
  <tr>
    <th align="left" valign="middle" bgcolor="#EBEBEB" scope="row">cost/th>
    <td align="center" valign="middle">£<?php echo "{$rates['money']}"; ?></td>
    <td align="center" valign="middle">£<?php echo "{$rates['expense']}"; ?></td>
  </tr>
  <tr>
    <th align="left" valign="middle" bgcolor="#EBEBEB" scope="row">Overnight</th>
    <td align="center" valign="middle">£<?php echo "{$rates['charges']}"; ?></td>
    <td align="center" valign="middle">£<?php echo "{$rates['fees']}"; ?></td>
  </tr>
</table>

<?php }  ?> 
```

希望有人可以提供帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:07:55.233

您可以遍历**$rates**数组中的值，如果为空，则指定一个默认值：

```
$rates_set = get_rates();
while ($rates = mysql_fetch_array($rates_set)) {

   // Set defaults
   foreach($rates as $key => $value)
   {
      if(strlen(trim($value)) == 0)
      {
         // Assign default
         $rates[$key] = 'Ask Me';
      }
   } 
?> 
```

使用此方法需要进行一些调整，例如如何确定一个值是“空的”……但本质上，这将完成工作。

另一种选择是使用三元运算符在标记内本地处理它：

```
<td align="center" valign="middle">£
    <?php isset($rates['money']) ? $rates['money'] : 'Ask Me'; ?>
</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:08:45.230

尝试这个，

```
<?php echo isset($rates['fees'])?"{$rates['fees']}":"ask me"; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:09:14.013

你可以用这个

```
<?php
$rates_set = get_rates();
if(mysql_num_rows($rates_set)<1) {
    echo "Ask me";
 }else{
   while ($rates = mysql_fetch_array($rates_set)) {
     //your code
      }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-16T18:07:10.357

```
<?php

/* Use This */

$rates_set = get_rates();

if (mysql_num_rows($rates_set)>0) {

while ($rates = mysql_fetch_array($rates_set)) {
 ?>
 <table width="110%" border="0" cellspacing="5" cellpadding="5">
  <tr>
    <th align="left" valign="middle" bgcolor="#EBEBEB" scope="col">Rates</th>
    <th align="center" valign="middle" bgcolor="#EBEBEB" scope="col">money in</th>
    <th align="center" valign="middle" bgcolor="#EBEBEB" scope="col">money Out</th>
  </tr>
  <tr>
    <th align="left" valign="middle" bgcolor="#EBEBEB" scope="row">cost</th>
    <td align="center" valign="middle">£<?php echo "{$rates['labour']} "; ?></td>
    <td align="center" valign="middle">£<?php echo "{$rates['material']}"; ?></td>
  </tr>
  <tr>
    <th align="left" valign="middle" bgcolor="#EBEBEB" scope="row">cost/th>
    <td align="center" valign="middle">£<?php echo "{$rates['money']}"; ?></td>
    <td align="center" valign="middle">£<?php echo "{$rates['expense']}"; ?></td>
  </tr>
  <tr>
    <th align="left" valign="middle" bgcolor="#EBEBEB" scope="row">Overnight</th>
    <td align="center" valign="middle">£<?php echo "{$rates['charges']}"; ?></td>
    <td align="center" valign="middle">£<?php echo "{$rates['fees']}"; ?></td>
  </tr>
</table>

<?php } 

} else {

echo 'Ask me';

}
  ?> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-16T17:08:34.280

```
<?php echo ( (!empty($rates['labour'])) ? $rates['labour'] : 'Default Text'); ?> 
```

那是你要找的吗？

**编辑：**

像这样改变循环的顶部：

```
while ($rates = mysql_fetch_array($rates_set)) {
  if (empty($rates_set)) continue; 
```

# mongodb - 玩！1.2.5 与 mongodb | 模型验证未发生

> ID：12919888
> 
> 赞同：1
> 
> 时间：2012-10-16T17:04:47.337
> 
> 标签：mongodb, playframework, playframework-1.x, morphia

我有一个简单的用户模型，其字段用播放验证注释和 morphia 注释进行注释，如下所示。

```
import play.data.validation.*;
import play.modules.morphia.Model;
import com.google.code.morphia.annotations.*;

@Entity
public class User extends Model{

    @Id
    @Indexed(name="USERID", unique=true)
    public ObjectId userId;

    @Required public String userName;

    @Email
    @Indexed(name="USEREMAIL", unique=true) 
    @Required public String userEmail;  
} 
```

现在我有一个服务，它有一个负责持久化数据的 CreateNewUser 方法。我使用 Morphia 插件来支持 dao。***但问题是，即使 userName 或 userEmail 为 NULL，用户文档也会保留在 mongo-db 中。@Email 验证也不会发生***

```
// Below code is in app/controllers/Application.java
User a = new User();
a.userName = "user1";
// calling bean to create user, userService is in app/service/UserService
userService.createNewUser(a); 
```

即使在添加 @valid 和 validation.hasErrors() 检查后它也不起作用。下面的代码在 app/service/UserService 中

```
public void createNewUser(@Valid User user) {
        if (Validation.hasErrors()) {
              System.out.println("has errors");
            }   else {
            // TODO Auto-generated method stub
              userDao.save(user);
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:43:21.270

现在我明白了， createNewUser 不是一个动作。因此，您可以强制执行对象验证：

```
public void createNewUser(User user) {
    final Validation.ValidationResult validationResult = validation.valid(user);
    if (validationResult.ok) {
        userDao.save(user);
    }   else {
        System.out.println("has errors");
    }
} 
```

api：[http ://www.playframework.org/documentation/api/1.2.5/play/data/validation/Validation.html](http://www.playframework.org/documentation/api/1.2.5/play/data/validation/Validation.html)

**旧答案**

您忘记了验证对象的注释，您必须检查表单是否有错误。

```
public void createNewUser(@Valid User user) {
     if(validation.hasErrors()) ... 
```

来源：[http ://www.playframework.org/documentation/1.2.5/validation#objects](http://www.playframework.org/documentation/1.2.5/validation#objects)

# c# - 交换参考变量值的最快且仍然安全的方法

> ID：12919889
> 
> 赞同：0
> 
> 时间：2012-10-16T17:04:50.833
> 
> 标签：c#, multithreading, thread-safety, locking

基本上我需要的是能够不断地将项目添加到列表（或另一个集合）中，在一个线程中每秒大约 3000 次。并每 2 秒从该列表中获取和删除所有项目。

我不喜欢使用并发集合或每次我需要访问集合时锁定某些东西的经典方法，因为它会比我需要的慢。

我想要做的是有 2 个集合，每个线程一个，并找到一种方法使线程安全地从一个集合切换到另一个集合。

**简化**且非线程安全的示例：

```
var listA = new List<int>();
var listB = new List<int>();

// method is called externally 3000 times per second
void ProducerThread(int a)
{      
    listA.Add(a)      
}
void ConsumerThread()
{
  while(true)
  {
    Thread.Sleep(2000);
    listB = Interlocked.Exchange(ref listA,listB);
    //... processing listB data
    // at this point when i'm done reading data
    // producer stil may add an item because ListA.Add is not atomic
    // correct me if i'm wrong
    listB.Clear();
  }
} 
```

有什么方法可以使上述代码按预期工作（线程安全），同时尽可能少地阻塞生产者线程？或者也许是另一种解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:38:29.907

我将从在 System.Collections.Concurrent 中使用一个`BlockingCollection`或另一个开始。`IProducerConsomerCollection`这正是你所拥有的，一个从多个线程访问的生产者/消费者队列。这些集合也针对性能进行了大量优化。他们不会使用幼稚的“在任何人进行任何操作时锁定整个结构”。它们足够聪明，可以使用无锁同步技术尽可能避免锁定，并且当它们确实需要使用临界区时，它们可以最大限度地减少需要锁定的部分，以便尽管有一定数量的锁定，但通常可以同时访问该结构。

在我从那里转移到其他任何东西之前，我会使用其中一个集合并确保它太慢。如果在使用它作为您的解决方案之后，您已经证明您花费了不可接受的时间从集合中添加/删除项目，那么您可以考虑调查其他解决方案。

如果，正如我所怀疑的那样，它们执行得足够快，我相信您会发现它使编写代码*变得*更容易和更清晰易读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:56:50.940

我假设您只想处理对 的新添加`listA`，并且在处理这些添加时会进行更多添加。

```
var listA = new List<int>();
var dictA = new Dictionary<int,int>();

int rangeStart = 0;
int rangeEnd = 0;
bool protectRange = false;

// method is called externally 3000 times per second
void ProducerThread(int a)
{      
 listA.Add(a);
 dictA.Add(rangeEnd++,a);   
}
void ConsumerThread()
{
 while(true)
 {
  Thread.Sleep(2000);
  int rangeInstance = rangeEnd;
  var listB = new List<int>();
  for( int start = rangeStart; start < rangeInstance; start++ ){
   listB.add(dictA[start]);
   rangeStart++;
  }
  //... processing listB data
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:25:20.333

如果表有固定的最大大小，为什么要使用列表？您还可以预先设置列表大小。

```
List<int> listA = new List<int>(6000); 
```

现在，我还没有真正测试以下内容，但我认为它会做你想要的：

```
int[] listA = new int[6000]; // 3000 time * 2 seconds
int i = 0;

// method is called externally 3000 times per second
void ProducerThread(int a)
{
    if (Monitor.TryEnter(listA)) // If true, consumer is in cooldown.
    {
        listA[i] = a;
        i++;
        Monitor.Exit(listA);
    }
}

void ConsumerThread()
{
    Monitor.Enter(listA); // Acquire thread lock.

    while (true)
    {
        Monitor.Wait(listA, 2000); // Release thread lock for 2000ms, automaticly retake it after Producer released it.

        foreach (int a in listA) { } //Processing...

        listA = new int[6000];
        i = 0;
    }
} 
```

您只需要确保首先运行 ConsumerThread，这样它就会自己排队等待。

# powershell - foreach 用户子文件夹

> ID：12919890
> 
> 赞同：0
> 
> 时间：2012-10-16T17:04:53.867
> 
> 标签：powershell

我需要为我们的用户共享上的每个用户名获取某个文件：

```
\\\server\share\username\windows\application Data\MICROSOFT\Proof\custom.dic 
```

我如何编码`foreach`以使我从根目录通过每个用户名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T18:44:18.247

使用通配符作为用户名：

```
Get-ChildItem '\\server\share\*\windows\application Data\MICROSOFT\Proof\custom.dic' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:28:15.083

例子：

```
Get-ChildItem \\computerName\share | ?{$_.PsIsContainer} | %{$localDir='c:\localDir'}{Copy-Item "\\computerName\share\$($_.Name)\a.txt" "$localDir\$($_.Name)_a.txt"} 
```

# android - 在 Android RunOnUiThread 或 Handler.post 中更新自定义视图的最佳方式

> ID：12919893
> 
> 赞同：1
> 
> 时间：2012-10-16T17:04:55.613
> 
> 标签：android, view

我正在编写一个动画的自定义视图。View 通过将 getContext() 方法转换为 Activity 然后调用 Activity.runOnUiThread 来访问其父 Activity 会更好，还是简单地使用处理程序并发布 View.invalidate 消息会更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:20:14.750

更简单的方法 - 调用视图的 postInvalidate 方法。这可以在非 ui 线程上调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:11:08.300

要么工作。IIRC runOnUiThread() 无论如何都会发布，runnable 稍后会被系统循环器拾取。所以对你来说更容易。在这种情况下，IMO，runOnUiThread 听起来更容易/更干净。

# sql-server - 使用 EF 构建多对多查询

> ID：12919896
> 
> 赞同：0
> 
> 时间：2012-10-16T17:05:04.780
> 
> 标签：sql-server, entity-framework

我将 EF5 与 .net 4.0 一起使用，并且我有 3 个实体 - 用户、项目和兴趣。我使用*FluentAPI*连接了 User Many2Many Interest 和 Project *Many2Many* Interest（它为每个关系创建了额外的 2 个表）。一切都很好。

我想要做的是为每个具有相同兴趣的用户加载所有项目。我试过

```
Project ... 
  .Where(p => p.Interests
               .Any(t => user.Interests.All(i => i.Url == t.Url))); 
```

（兴趣有PK Url）。当我执行此查询时，我收到错误

> 无法创建“DAL.Models.Interest”类型的常量值。此上下文仅支持原始类型或枚举类型。

什么是正确的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:52:52.633

问题是您无法将 user.Interests.All(...) 转换为 SQL 过程。

但是，您可以创建一个原始类型 (Url) 的列表，然后与之进行比较。

```
 var userInterests = user.Interests.Select(u => u.Url);
        var sharedProjects = m.Projects.Where( p => p.Interests.Select(i => i.Url)
                   .Any(pi => userInterests.Any(ui => ui == pi))); 
```

# http - GET 请求有效，如何使 POST 也有效？

> ID：12919900
> 
> 赞同：0
> 
> 时间：2012-10-16T17:05:08.657
> 
> 标签：http, c#-4.0, post, asp.net-mvc-4, asp.net-web-api

我有 MVC-4 Web-API 服务器，我需要“手动”（通过 TCP）创建 HTTP 客户端来与之交谈。

```
public class UpdateUnitDetailsController : ApiController
{
    // GET api/updateunitdetails
    public IEnumerable<string> Get()
    {
        return new string[] { "value1", "value2" };
    }

    // GET api/updateunitdetails/5
    public string Get(int id)
    {
        return "value";
    }

    // POST api/updateunitdetails
    public void Post([FromBody]string value)
    {
    }

    // POST api/updateunitdetails
    public void Post()
    {
    }

    // PUT api/updateunitdetails/5
    public void Put(int id, [FromBody]string value)
    {
    }

    // DELETE api/updateunitdetails/5
    public void Delete(int id)
    {
    }
} 
```

我做了一个简单的客户端并在服务器控制器的方法中设置断点。在客户端，我发送这个：

```
GET /api/updateunitdetails HTTP/1.1
Host: localhost:58743

Content-Type: */*
Content-Length: 10

home=sweet 
```

它可以工作（调试器在`Get`方法中停止）。但是，如果我更改`GET`为`POST`，则不会。此外，每当我发出`POST`请求时，我都会在 Visual Studio 控制台中看到以下消息：

`A first chance exception of type 'System.InvalidOperationException' occurred in System.Web.Http.dll`

我想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:06:09.207

改用这个：

```
POST /api/updateunitdetails HTTP/1.1
Host: localhost:58743

Content-Type: application/x-www-form-urlencoded

=sweet 
```

# php - 移动应用后端与 Web 应用后端有何不同？

> ID：12919904
> 
> 赞同：2
> 
> 时间：2012-10-16T17:05:15.357
> 
> 标签：php, android, iphone, ruby-on-rails, backend

我是后端 Web 开发人员。从来没有以任何方式处理过手机。我得到了一份为移动应用程序构建后端的工作，我正在思考我应该如何准备。

您能否概述 Web 应用程序和移动应用程序后端之间的原理异同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T18:15:25.267

真正的业务逻辑和数据结构是一样的。不同之处在于远程公开功能的方式。

网站通过 HTTP 协议公开此功能，这是最简单的界面，因为预定义的 UI（HTML 页面）正在分发。

对于*定制*的移动应用程序（不是浏览器），仅传输数据，设备的本机 UI 用于呈现和与该数据交互。数据通信协议/接口由网络服务实现。

*   业务模型 -> 服务器端控制器（HTTP、HTTPS + AJAX、RPC 等） -> Web 浏览器（Web 应用程序）

*   业务模型 -> Web 服务 API（SOAP、REST 等） -> 远程应用程序（桌面、移动应用程序）

# ruby - ActiveRecord to_json 指定包含方法的选项

> ID：12919905
> 
> 赞同：1
> 
> 时间：2012-10-16T17:05:20.787
> 
> 标签：ruby, ruby-on-rails-3, activerecord, ruby-on-rails-3.2

在我看来，我有以下 to_json ： `<%=raw @forums.to_json(:methods => [:topic_count, :last_post]) %>;`

在模型中我有以下方法：

```
def last_post
    post = ForumPost.joins(:forum_topic).where(:forum_topics => {:forum_id => self.id}).order("forum_posts.created_at DESC").first
    return post
end 
```

但是 ForumPost 包含与 ForumTopic ( `belongs_to :forum_topic`) 的关系，我想在我的 json 中包含这个 ForumTopic 所以我最终得到 {..., "last_post":{..., "forum_topic":{...}.. .}，...}。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:41:44.637

通常最好在模型中保留这种声明。您可以覆盖模型中的 as_json 方法。这种方法允许您控制整个对象图的序列化行为，并且您可以为这些东西编写单元测试。

在此示例中，我猜测您的 @forums 变量引用了一个名为 Forum 的模型，如果我错了，希望您仍然能理解。

```
class Forum
    ...
    def as_json(options={})
        super(methods: [:topic_count, :last_post])
    end
end
class ForumPost
    ...
    def as_json(options={})
        super(methods: [:forum_topic])
    end
end 
```

# javascript - 我在递归 javascript 函数中做错了什么？

> ID：12919908
> 
> 赞同：2
> 
> 时间：2012-10-16T17:05:33.627
> 
> 标签：javascript, arrays, object, recursion

我正在尝试创建一个递归函数来过滤对象，具体取决于第二个传递参数中的属性。

过滤效果很好，但我的数组被替换为空对象。我可以做些什么来避免这种情况发生？

```
var filter = function(obj, fields) {
  var key, o;

  if (typeof obj !== "object") { return obj;}
  o = {};
  for (key in obj) {
    if (fields[key]) {
      o[key] = filter(obj[key], fields[key]);
    }
  }
  return o;
};

data = {name: "John Doe", followers: [], notAllowedProp: false}
allowedFields = {name: true, followers: true}

console.log(filter(data, allowedFields));
// => Object { name: "John Doe", followers: {}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:09:57.977

在控制台上试试这个：

```
> typeof []
"object" 
```

要更稳健地检查数组，您可以使用`Object.prototype.toString`：

```
> Object.prototype.toString.call([])
"[object Array]" 
```

`Object.prototype.toString`对所有本机对象都有明确定义的行为，并且非常可靠。因此，例如，如果你想返回任何不是“真实”对象的东西，你可以这样写：

```
if (Object.prototype.toString(obj) !== "[object Object]") {
    return obj;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:15:30.460

数组有类型`object`。因此，如果您想提前返回数组，则需要编辑此行：

```
if (typeof obj !== "object") { return obj; } 
```

有很多方法可以检查数组，但这是我要做的：

```
if(typeof obj !== "object" && !(obj instanceof Array)) { return obj; } 
```

# java - 一种从 PlayN 中的 url 获取图像的方法

> ID：12919909
> 
> 赞同：6
> 
> 时间：2012-10-16T17:05:39.450
> 
> 标签：java, playn

我正在制作一款游戏，它是用户可以注册头像的服务的一部分。问题是 playn api 似乎没有任何**来自 URL**函数的加载图像（或者我可能有点盲目）。

我错过了 API 的一些重要部分吗？？？不应该有这个功能`PlayN.graphics()`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:05:19.083

在与 PlayN 的一位作者交谈后，我发现这个功能存在于当前 1.5-SNAPSHOT 版本的 PlayN 中（但不存在于当前的 1.4 版本中）。它称为 PlayN.assets().getRemoteImage(String url) 当前的 Google 代码存储库已*过时*（Michael 不时将其合并），因此您需要从此 repo 构建快照 -> [https://github .com/threerings/playn](https://github.com/threerings/playn)

# c++ - x64 linux，c++线程内存分配：我必须使用互斥锁吗？

> ID：12919911
> 
> 赞同：0
> 
> 时间：2012-10-16T17:05:45.173
> 
> 标签：c++, memory-management, mutex

问题：如果我在线程中使用互斥锁，分配速度会显着减慢，但我得到了正确的分配，因此 - 正确的数据结构。

如果我不使用互斥锁，我会在线程中更快地完成分配工作，但会损坏数据结构。

这与我之前的帖子密切相关，该帖子也有完整的工作代码（互斥锁使用不当）。

[在x64 linux上，在多线程中分配后c ++链表缺少节点；为什么？](https://stackoverflow.com/questions/12903721/c-linked-list-missing-nodes-after-allocation-in-multiple-threads-on-x64-linux)

我尝试了三种不同的分配器，如果我使用互斥锁，它们似乎都会变慢，如果我不使用，数据结构就会损坏。有什么建议么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:20:30.330

如果多个线程使用共同的数据结构，例如某种内存池，并且至少有一个线程在修改数据结构，则需要某种形式的同步。同步是基于原子、互斥体还是其他原语是单独的问题。

标准库（`operator new()`以及`malloc()`它们各自家族的其他成员）提供的内存分配机制是线程安全的，您不需要进行任何额外的同步。如果您需要从您自己创建的多个线程之间共享的资源中使用内存分配，则即使结果变得更慢，您也必须进行同步。

# delphi - 您如何使用 SVN 管理项目版本？

> ID：12919912
> 
> 赞同：3
> 
> 时间：2012-10-16T17:05:48.713
> 
> 标签：delphi, svn, versioning

Delphi 2007 中的项目，存储在 SVN 中。

“项目设置 - 版本信息” - 存储项目版本。更改项目版本时 *.dproj 文件和 *.res 文件正在更改。每次项目版本更改时，我都必须将它们提交给 SVN。

我想用 SVN 管理项目版本。例如，当从名为“1.12.2”和修订版 12993 的 svn 标签构建项目时，我想获得一个版本为 1.12.2.12993 的二进制 *.exe 文件。

为此，我应该创建一个 *.rc 文件，其中包含版本信息的文本表示。然后制作一个 *.res 文件并将其包含到带有 {$R version.res} 的项目中

我应该写什么到 *.rc 文件？它的结构应该是什么样的？请白举个例子。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T17:16:29.960

该`VERSIONINFO`资源[记录在 MSDN 上](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381058.aspx)。典型的此类资源脚本如下所示：

```
1 版本信息
文件版本 1,12,2,12993
产品版本 1,12,2,12993
文件操作系统 0x40004L
文件类型 0x1L
开始
  块“字符串文件信息”
  开始
    块“000004E4”
      开始
        VALUE“公司名称”、“我的公司\0”
        VALUE "文件描述", "我的程序\0"
        VALUE "FileVersion", "我的程序\0"
        VALUE "LegalCopyright", "My Company 2012\0"
      结尾
  结尾
  块“VarFileInfo”
  开始
    值“翻译”，0x0000 0x04E4
  结尾
结尾

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T17:26:05.610

我们是这样做的：

我们有一个专门的构建机器来构建我们的“官方”二进制文件，然后将它们检入 svn。然后使用特殊注释标签 [Add Project File][Add Res File] 将二进制文件连同 .res 和 .bdsproj 检入 svn。

开发人员被指示不要签入 .bdsproj 和 .res 文件，除非进行了功能更改，在这种情况下，他们需要使用特殊标签。

SVN 使用预提交挂钩来阻止没有特殊标签的 .res 和 .bdsproj 签入。

当我们创建一个新的项目分支时，我们有一个实用程序（我认为是 FindAndReplace.exe）来更新 .bdsproj 文件中的所有版本信息以匹配。

这不是您要寻找的，因为我们没有将 SVN 构建作为其中的一部分。但这是可以做到的，作为这种方法的延伸。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T21:20:58.643

我们也使用 VERSIONINFO，但我们使用 SVN 修订号代替内部版本号，可以使用 SubWCRev 实用程序通过关键字替换来提供。有关详细信息，请参阅[Tortoise dox](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-subwcrev-keywords.html)。它允许您从 SVN 获取与特定 .exe 相对应的正确源快照

# eclipse - “比较法违反了它的总契约！” 尝试安装 Eclipse 插件时

> ID：12919916
> 
> 赞同：1
> 
> 时间：2012-10-16T17:05:59.273
> 
> 标签：eclipse, eclipse-plugin, eclipse-pdt

我有以下系统：

```
$ cat /etc/redhat-release 
Scientific Linux release 6.1 (Carbon)
$ uname -a
Linux wcmisdlin02.uftmasterad.org 2.6.32-279.9.1.el6.x86_64 #1 SMP Tue Sep 25 14:55:44 CDT 2012 x86_64 x86_64 x86_64 GNU/Linux
$ 
```

我有以下包裹

```
$ rpm -qa | grep ^eclipse
eclipse-emf-2.6.0-1.el6.x86_64
eclipse-svnkit-1.3.0-3.el6.x86_64
eclipse-swt-3.6.1-6.13.el6.x86_64
eclipse-rcp-3.6.1-6.13.el6.x86_64
eclipse-rse-3.2-1.el6.x86_64
eclipse-jdt-3.6.1-6.13.el6.x86_64
eclipse-pde-3.6.1-6.13.el6.x86_64
eclipse-platform-3.6.1-6.13.el6.x86_64
eclipse-subclipse-1.6.5-6.el6.x86_64
$ 
```

每当我尝试通过 Eclipse 安装 PDT 时，都会出现以下错误：

```
An error occurred while collecting items to be installed
session context was:(profile=PlatformProfile, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
Comparison method violates its general contract!
Comparison method violates its general contract! 
```

*** 更新 ***

```
$ rpm -qa | grep ^java
java-1.6.0-openjdk-javadoc-1.6.0.0-1.49.1.11.4.el6_3.x86_64
java-1.6.0-openjdk-1.6.0.0-1.49.1.11.4.el6_3.x86_64
java-1.5.0-gcj-1.5.0.0-29.1.el6.x86_64
java-1.6.0-openjdk-devel-1.6.0.0-1.49.1.11.4.el6_3.x86_64
java_cup-0.10k-5.el6.x86_64
java-1.7.0-openjdk-1.7.0.5-2.2.1.el6_3.3.x86_64
$ 
```

我还发现了这个：

```
$ sudo grep java-1.7.0 /var/log/yum.log
Sep 21 12:46:33 Installed: 1:java-1.7.0-openjdk-1.7.0.5-2.2.1.el6_3.3.x86_64
$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:19:45.633

这可能是我几个月前遇到的[已知 Eclipse 错误。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=317785)该问题与`Arrays.sort()`JDK 7 中的新实现有关。

如果是这个错误，您需要安装更新版本的 Eclipse，因为该错误会阻止您更新（从 Eclipse 中）。

或者，您可以尝试使用系统属性启动 Eclipse，`java.util.Arrays.useLegacyMergeSort=true`然后更新 Eclipse 平台。

# objective-c - 像在 Actionscript 中一样动态构造变量名

> ID：12919918
> 
> 赞同：0
> 
> 时间：2012-10-16T17:06:14.403
> 
> 标签：objective-c, variables, syntax

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T17:08:48.643

不那么整洁，但[键值编码](http://developer.apple.com/documentation/Cocoa/Conceptual/KeyValueCoding/)可以做到这一点：

```
[self setValue:something forKey:[NSString stringWithFormat:@"star%u", i]] 
```

编辑：经过反思，作为非 Actionscript 用户，您是否打算访问属性或调用方法尚不清楚。

您可以`NSSelectorFromString`在运行时将方法的名称转换为选择器，`[self performSelector:...]`如果是后者，则调用该事物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:09:16.527

是的。使用`NSArray`. 然后你可以做这样的事情：

```
NSArray *array = [NSArray arrayWithObjects:obj1, obj2, obj3, obj4, nil];
for (int i = 0; i < [array count]; i++) {
    [[array objectAtIndex:i] doMethod];
} 
```

或者更简单：

```
NSArray *array = [NSArray arrayWithObjects:obj1, obj2, obj3, obj4, nil];
for (id obj in array) {
    [obj doMethod];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:08:21.397

不，但是您可以将变量放在一个数组中并以这种方式实现相同的效果。

# c# - SQL 数据库同步

> ID：12919919
> 
> 赞同：0
> 
> 时间：2012-10-16T17:06:16.057
> 
> 标签：c#, .net, sql, sql-server-2008

我想同步两个不在公共 IP 中的不同 SQL 数据库，这可以通过 .Net Sync 和 WCF 实现吗？

或者我需要在公共 IP 中添加两个数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:13:35.597

这听起来像您正在寻找复制解决方案。查看 [SQL Server 复制的阶梯 - SQLServerCentral.com](http://www.sqlservercentral.com/stairway/72401/)了解复制的介绍。

# ruby-on-rails-3.2 - Rails 3.2.8 - 路由和 link_to_paths

> ID：12919922
> 
> 赞同：0
> 
> 时间：2012-10-16T17:06:28.380
> 
> 标签：ruby-on-rails-3.2

我正在尝试将我的 3.0 应用程序重构为另一台运行 3.2.8 的服务器，并且看起来路由语法可能有所改变？

鉴于此 routes.rb：

```
root :to => 'user_sessions#new'
match 'login' => 'user_sessions#new'
match 'logout' => 'user_sessions#destroy'
match 'usermenu' => 'users#menu'
match 'adminmenu' => 'users#adminmenu' 
```

而这个观点：

```
<% if current_user %>  
  <%= link_to "Logout", logout_path %>  |  
  <%= link_to "Main Menu", usermenu_path %>  |  
  <%= link_to_if (current_user.admin == true, "Admin Menu", adminmenu_path) %>
<% end %> 
```

我收到此错误：

```
ActionView::Template::Error (/home/-/layouts/application.html.erb:19: syntax error, unexpected ',', expecting ')'
...if (current_user.admin == true, "Admin Menu", adminmenu_path...

/home/-/layouts/application.html.erb:19: syntax error, unexpected ',', expecting ')'
...er.admin == true, "Admin Menu", adminmenu_path) );@output_bu...
                          ^): 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:02:44.927

link_to_if 和左括号之间不能有空格

```
link_to_if (current_user.admin == true, "Admin Menu", adminmenu_path) 
```

应该

```
link_to_if(current_user.admin == true, "Admin Menu", adminmenu_path) 
```

路线没有改变。

# reference - 部署 ClickOnce 时缺少 dll

> ID：12919923
> 
> 赞同：7
> 
> 时间：2012-10-16T17:06:36.943
> 
> 标签：reference, dependencies, clickonce, publish

当我发布 ClickOnce 应用程序时，我的一个项目中包含的其中一个引用丢失了。

如果我转到我的项目的属性 -> 应用程序文件，这里甚至没有列出这个缺失的参考。

我的 bin/Release 文件夹有一个 .exe.manifest 文件，我注意到这里也缺少它。

但是，当我构建项目时，DLL 实际上被复制到我的 bin/Release 文件夹中。

我如何确保它也部署了这个必需的依赖项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:45:30.217

我终于找到了解决这个问题的方法，我希望它能解决你的问题。就我而言，我正在编辑一个有多个项目的旧应用程序，但主项目和它的后端项目在这里是最重要的。后端添加在主项目的 References 部分。在后端，导入了一个第三方 dll，但是这个 dll 需要另外 2 个 dll。所以这 3 个 dll 被添加到后端项目的 References 部分。

此时，其他 2 个 dll 之一没有显示在 ClickOnce 的“应用程序文件”部分中。我想出了几种修复它的方法，但最优雅的一种是在主项目的参考部分添加这个 dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:10:25.843

如[如何：指定 ClickOnce 发布的文件](http://msdn.microsoft.com/en-us/library/kzy0fky2.aspx)中所述，将引用上的 Copy Local 属性值更改为 True。

> 添加引用时，对程序集（.dll 文件）的引用指定如下： 如果 Copy Local 为 False，则默认情况下将其标记为先决条件程序集（Prerequisite (Auto)），该程序集必须在 GAC 中存在安装。如果 Copy Local 为 True，则程序集默认标记为应用程序程序集（包括（自动）），并将在安装时复制到应用程序文件夹中。仅当其独立属性设置为 True 时，COM 引用才会出现在“应用程序文件”对话框中（作为 .ocx 文件）。默认情况下，它将被包括在内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-14T17:10:32.413

我知道这是一个老问题，但对于任何有类似问题的人。我认为这是解决问题的一种更清洁的方法。
我遇到了类似的问题，我为让 ClickOnce 部署有问题的 .dll 所做的一切都失败了。
最终，我不得不手动部署。 [请参阅此处的演练。](https://docs.microsoft.com/en-us/visualstudio/deployment/walkthrough-manually-deploying-a-clickonce-application?view=vs-2015)
这对我来说非常有用。但是，对于我的生活，我仍然想知道为什么不能将这个过程添加到 VS（我使用的是 2017 社区）。

# sql - tsql 返回索引的数据文件

> ID：12919928
> 
> 赞同：2
> 
> 时间：2012-10-16T17:07:06.837
> 
> 标签：sql, sql-server, sql-server-2005

我有 3 个数据文件用于 SQL Server 2005 中数据库的主文件组。是否可以确定特定索引驻留在哪个数据文件上，或者它们是否存在于文件组中的多个数据文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T17:16:18.603

```
select  object_name(i.id) as TableName
,       i.name as IndexName
,       fg.name as FilegroupName
,       df.name as FileName
,       df.physical_name as FilePhysicalName
from    sys.sysindexes i
join    sys.filegroups fg
on      fg.data_space_id = i.groupid
join    sys.database_files df
on      df.data_space_id = fg.data_space_id
join    sys.data_spaces ds
on      ds.data_space_id = fg.data_space_id
where   objectproperty(i.id,'IsUserTable') = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:25:59.460

诸如标签和索引之类的对象是建立在文件组上的，而不是文件上。索引很可能驻留在文件组内的所有文件中。有一些例外的情况是不正确的，例如如果添加了更多文件，导致文件分配热点等，但 SQL Server 对文件使用比例填充算法，并均匀地填充它们。

您可以通过运行确定

```
DBCC IND('myDatabase','myTable',2) 
```

其中 2 是您感兴趣的索引的 indexID。

这将显示每个页面的文件 ID

# c# - 必须声明标量变量错误“@f_ndoganor”

> ID：12919929
> 
> 赞同：-1
> 
> 时间：2012-10-16T17:07:07.610
> 
> 标签：c#, sql-server-2008

我收到错误...我更改了许多类型的`must declare scalar variable error "@f_ndoganor"`类型，如数字、int、varchar......但我无法解决问题......`@f_ndoganor``@f_ndoganor`

```
SqlConnection conn = new SqlConnection("Data Source=MAZI-PC\\PROJECTACC;Initial Catalog=programDB;Integrated Security=True");
string sqlIns = "INSERT INTO table_regjistrimi (f_kodi, f_emertimi,f_emri,f_shteti,f_lloj_kodi,f_vendodhja,f_vitiushtrimor,f_telefoni,f_email,f_web,f_nbiznesit,f_dbiznesit,f_nfiskal,f_dfiskal,f_ntvsh,f_dtvsh,f_ndoganore,f_ddoganore,f_npunes,f_dpunes,f_nlicenca,f_dlicenca,f_drejtori,f_rf,f_kontabilisti,f_konsumatori,f_autorizuari,f_npunesuarve,f_shenime) values (@f_kodi, @f_emertimi, @f_emri, @f_shteti, @f_lloj_kodi, @f_vendodhja, @f_vitiushtrimor, @f_telefoni, @f_email, @f_web, @f_nbiznesit, @f_dbiznesit, @f_nfiskal, @f_dfiskal, @f_ntvsh, @f_dtvsh, @f_ndoganore, @f_ddoganore, @f_npunes, @f_dpunes, @f_nlicenca, @f_dlicenca, @f_drejtori, @f_rf, @f_kontabilisti, @f_konsumatori, @f_autorizuari, @f_npunesuarve, @f_shenime)";

conn.Open();
try
{
    SqlCommand cmdIns = new SqlCommand(sqlIns,conn);

    cmdIns.Parameters.AddWithValue("@f_kodi", textBox1.Text);
    cmdIns.Parameters.AddWithValue("@f_emertimi", textBox2.Text);
    cmdIns.Parameters.AddWithValue("@f_emri", textBox3.Text);
    cmdIns.Parameters.AddWithValue("@f_shteti", textBox4.Text);
    cmdIns.Parameters.AddWithValue("@f_lloj_kodi", comboBox1.SelectedText);
    cmdIns.Parameters.AddWithValue("@f_vendodhja", textBox5.Text);
    cmdIns.Parameters.AddWithValue("@adresa", textBox6.Text);
    cmdIns.Parameters.AddWithValue("@f_vitiushtrimor", textBox7.Text);
    cmdIns.Parameters.AddWithValue("@f_telefoni", textBox8.Text);
    cmdIns.Parameters.AddWithValue("@f_email", textBox9.Text);
    cmdIns.Parameters.AddWithValue("@f_web", textBox10.Text);
    cmdIns.Parameters.AddWithValue("@f_nbiznesit", textBox15.Text);
    cmdIns.Parameters.AddWithValue("@f_dbiznesit", textBox21.Text);
    cmdIns.Parameters.AddWithValue("@f_nfiskal", textBox16.Text);
    cmdIns.Parameters.AddWithValue("@f_dfiskal", textBox22.Text);
    cmdIns.Parameters.AddWithValue("@f_ntvsh", textBox17.Text);
    cmdIns.Parameters.AddWithValue("@f_dtvsh", textBox23.Text);
    cmdIns.Parameters.AddWithValue("@f_ndoganor", textBox18.Text);
    cmdIns.Parameters.AddWithValue("@f_ddoganor", textBox24.Text);
    cmdIns.Parameters.AddWithValue("@f_npunes", textBox19.Text);
    cmdIns.Parameters.AddWithValue("@f_dpunes", textBox25.Text);
    cmdIns.Parameters.AddWithValue("@f_nlicenca", textBox20.Text);
    cmdIns.Parameters.AddWithValue("@f_dlicenca", textBox26.Text);
    cmdIns.Parameters.AddWithValue("@f_drejtori", textBox30.Text);
    cmdIns.Parameters.AddWithValue("@f_rf", textBox31.Text);
    cmdIns.Parameters.AddWithValue("@f_kontabilisti", textBox32.Text);
    cmdIns.Parameters.AddWithValue("@f_konsumatori", textBox33.Text);
    cmdIns.Parameters.AddWithValue("@f_autorizuari", textBox34.Text);
    cmdIns.Parameters.AddWithValue("@f_npunesuarve", textBox35.Text);
    cmdIns.Parameters.AddWithValue("@f_shenime", textBox36.Text);
    cmdIns.ExecuteNonQuery();
    //admin
}
    catch (Exception ex )
{
    MessageBox.Show(ex.Message);
}
finally
{
    conn.Close();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T17:12:26.030

每当您有一个未通过语句显式声明或通过参数值隐式 声明`must declare scalar variable`的变量（以 a 开头）时，都会出现错误。`@``DECLARE`

在您的情况下，您的查询和参数之间存在拼写错误：

询问：

```
 @f_ndoganore, @f_ddoganore, 
```

参数：

```
 cmdIns.Parameters.AddWithValue("@f_ndoganor", textBox18.Text);
 cmdIns.Parameters.AddWithValue("@f_ddoganor", textBox24.Text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T17:11:06.497

它在 INSERT 语句中拼写为 @f_ndoganore，在 parameters.Add() 列表中拼写为 @f_ndoganor。

更正拼写，它应该能够正确映射参数。

# javascript - 灰度转换后如何将 HTML5 画布更改为正常

> ID：12919941
> 
> 赞同：0
> 
> 时间：2012-10-16T17:07:35.967
> 
> 标签：javascript, jquery, html, html5-canvas

我正在使用以下代码将 HTML5 画布图像转换为灰度。现在我需要在转换为灰度后通过单击按钮将其恢复正常。我怎样才能做到这一点？

这是我的代码。

```
var canvas = document.getElementById("canvas");
var context = canvas.getContext("2d");

var imageData = context.getImageData(0, 0, canvas.width, canvas.height);
var data = imageData.data;
        for(var i = 0; i < data.length; i += 4) {
          var brightness = 0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2];
          data[i] = brightness;
          // red
          data[i + 1] = brightness;
          // green
          data[i + 2] = brightness;
          // blue
          // i+3 is alpha (the fourth element)
        }
        context.putImageData(imageData, 0, 0); 
```

# android - Android Activity 生命周期导致视图刷新问题

> ID：12919946
> 
> 赞同：0
> 
> 时间：2012-10-16T17:07:58.907
> 
> 标签：android, multithreading, android-activity

我在一个大项目中遇到了问题。我将尝试将其归结为（我希望）是重点。我有一个由几个`Activity`s 组成的应用程序，其中一个是其他启动的主要导航点。

一旦 main`Activity`被破坏并重新创建（通过导航到另一个`Activity`并返回），视图更新似乎不起作用。具体来说，我有一个`Button`和几个`TextView`s。重新创建后`Activity`，我无法更改其文本。我试过改变`Activity`背景颜色，也不管用。

我的第一个想法是我在保存/恢复过程中错过了一个重要的数据成员。但是，我已经看了很多，我认为这不是问题。另外，我尝试不加载保存的数据并重新开始，但它仍然没有更新视图。

接下来，我认为我可能不会在 UI 线程上进行更新。我确定这会导致异常，但可以肯定的是，我将刷新发布到`Handler`. 还是没有骰子。

但是，如果我将它们连接到`onClick()`. 在这种情况下，哪些有效，哪些无效会引发其他问题（一些数据已损坏），所以现在这就是我集中调查的地方。一旦我得到更多的映射，我会提供更新。

我还应该看什么？

更新：添加一些片段：

来自`onCreate()`：

```
if (savedInstanceState != null) {
  Log.v(Calculations.log, "Restarting with saved instance state");
  Serializable ser = savedInstanceState.getSerializable("infusion");
  if ((ser != null) && (ser instanceof Infusion)) {
    mInfusion = (Infusion) ser;
  }
  mBeganEditing = savedInstanceState.getBoolean("editing",
    mInfusion != null);
  Log.v(Calculations.log, this.toString());
} 
```

及其匹配`onSaveInstanceState()`：

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    Log.v(Calculations.log, "StageInfusion::onSaveInstanceState()");
    Log.v(Calculations.log, this.toString());
    outState.putSerializable("infusion", mInfusion);
    outState.putBoolean("editing", mBeganEditing);
    outState.putBoolean("resume", true);
    ServerManager.stopListening();

    super.onSaveInstanceState(outState);
} 
```

我希望还有其他成员应该被拯救，但他们的影响很小。

# sql-server-2008 - 如何在 NHibernate 中通过 SqlFunction 和 VarArgsSQLFunction 进行分组

> ID：12919949
> 
> 赞同：0
> 
> 时间：2012-10-16T17:08:03.720
> 
> 标签：sql-server-2008, nhibernate

我正在尝试使用 QueryOver 实现以下 SQL 查询：

```
SELECT [Time]/1000
FROM TableName
GROUP BY [Time]/1000 
```

这是我目前的尝试：

```
var result = session
    .QueryOver<TableName>
    .Select(Projections.GroupProperty(
        Projections.SqlFunction(
            new VarArgsSQLFunction("(", "/", ")"),
            NHibernateUtil.Int64,
            Projections.Property("Time")
            Projections.Constant(1000))
    ))
    .List<object>(); 
```

不幸的是，我得到以下异常（GenericADOException）：

```
could execute query
[ SELECT (this_.Time/@p0) as y0_ FROM [TableName] this_ GROUP BY (this_.Time/?) ] 
```

内部异常：

```
Incorrect syntax near ?. 
```

我可以用“Sum”替换“GroupProperty”并且它可以工作。知道缺少什么吗？

* * *

**更新**：显然这是 NHibernate 中的一个错误。另请参阅[此问题](https://stackoverflow.com/questions/10696539/incorrect-syntax-near-nhibernate-generated-query)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T08:42:26.643

为什么不直接使用 Projections.SqlGroupProjection：

```
var result = session
    .QueryOver<TableName>
    .Select(Projections.SqlGroupProjection(
                        Time/1000 AS TimeValue", 
                        "Time/1000", 
                        new[]{"TimeValue"}, 
                        new[]{NHibernateUtil.Int32}))
    .List<object>(); 
```

# algorithm - 排序：返回一个包含每个元素新位置的数组

> ID：12919950
> 
> 赞同：2
> 
> 时间：2012-10-16T17:08:06.150
> 
> 标签：algorithm, sorting

我需要对数组进行排序，同时还返回一个包含原始元素的排序位置的数组。（注意不是 argsort，对数组进行排序的索引）

目前这需要两个步骤：

1.  一个argsort
2.  对新数组的分散操作，即 pos[argsort[i]] = i

我觉得我在这里错过了一个技巧。这是我忽略的一种众所周知的算法，可以一步实现吗？

第 2 步也可以通过搜索来实现，但我认为分散更有效。

我已经包含了一些示例 python 代码来说明这个问题。

```
import numpy as np

l = [0,-8,1,10,13,2]

a = np.argsort(l)
# returns [1 0 2 5 3 4], the order required to sort l

# init new list to zero
pos = [0 for x in range(0,len(l))]

# scatter http://en.wikipedia.org/wiki/Gather-scatter_(vector_addressing)
for i in range(0,len(l)):
        pos[a[i]] = i

print pos
# prints [1, 0, 2, 4, 5, 3], i.e. each original indexes new position in the sorted array 
```

搜索对这个问题的引用让我很沮丧，也许我错过了这种操作的正确术语。

任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-28T16:21:36.100

这是一个简单的实现，尽管它在任何有意义的意义上都不是“就地”。我不确定“就地”是什么意思，因为输出是 int 类型的 np.array 并且输入可能包含双精度数。

更新以回应@norio 的评论并澄清意图：

```
#!/usr/bin/env python

import numpy as np

unsorted = np.array([0,-8,1,10,13,2])

def myargsort(numbers):
  tuples = enumerate(numbers) # returns iterable of index,value
  sortedTuples = sorted(tuples,key = lambda pair: pair[1])
  sortedNumbers = [num for idx,num in sortedTuples]
  sortIndexes   = [idx for idx,num in sortedTuples]
  return (sortedNumbers,sortIndexes)

sortedNums, sortIndices = myargsort(unsorted)

print(unsorted)
print(sortedNums)
print(sortIndices) 
```

# google-maps - Google Maps Compass 因 onPause 和 onCreate 崩溃（删除它们有效，但我没有指南针）

> ID：12919951
> 
> 赞同：0
> 
> 时间：2012-10-16T17:08:06.413
> 
> 标签：google-maps

如果我评论应用程序启动`onPause compass.disable`并`onResume compass.Enable`运行，但我的谷歌地图上没有指南针。

另一方面，如果我取消注释这两行，应用程序甚至都不会显示。喜欢被阻止，然后我再次评论这两行并且模拟器再次工作。所以某个地方是指南针的问题，但我不知道在哪里，有任何帮助。

```
MapView map;
MyLocationOverlay compass;
MapController controller;   
GeoPoint touchedPoint;
Drawable d;
List<Overlay> overlayList;
LocationManager lm;
String towers;
long start;
long stop;      
int x, y;
int latit;
int longi;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_LEFT_ICON);// dodao za favicon
    setContentView(R.layout.activity_main);
    setFeatureDrawableResource(Window.FEATURE_LEFT_ICON, R.drawable.logo);
    map = (MapView) findViewById(R.id.mvMain);
    map.setBuiltInZoomControls(true);
    this.setTitle("EasyMaps=QRZ");

    Touchy t = new Touchy();
    overlayList = map.getOverlays();
    overlayList.add(t);

    compass = new MyLocationOverlay(MainActivity.this, map);
    overlayList.add(compass);

    controller = map.getController();
    GeoPoint point = new GeoPoint((int) (47.975 * 1E6), (int) (17.056 * 1E6));
    controller.animateTo(point);
    controller.setZoom(17);

    d = getResources().getDrawable(R.drawable.icon);

    lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Criteria crit = new Criteria();

    towers = lm.getBestProvider(crit, false);
    Location location = lm.getLastKnownLocation(towers);

    if (location != null) {
        latit = (int) (location.getLatitude() * 1E6);
        longi = (int) (location.getLongitude() * 1E6);
        GeoPoint ourLocation = new GeoPoint(latit, longi);
        OverlayItem overlayitem = new OverlayItem(ourLocation, "Location", "Location");
        CustomPinpoint custom = new CustomPinpoint(d, MainActivity.this);
        custom.insertPinpoint(overlayitem);
        overlayList.add(custom);
    } else {
        Toast.makeText(MainActivity.this, "Provider not avaiable!", Toast.LENGTH_SHORT).show();
    }

}
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);

     // Checks the orientation of the screen
     if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
         Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
      } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
     Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
          }
       }

@Override
protected void onResume() {
    super.onResume();
    compass.enableCompass();//Problem 
    lm.requestLocationUpdates(towers, 500, 1, this);
}

@Override
protected void onPause() {
    super.onPause();
    compass.disableCompass();//Problem 
    lm.removeUpdates(this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

class Touchy extends Overlay {
    public boolean onTouchEvent(MotionEvent e, MapView m) {

        if (e.getAction() == MotionEvent.ACTION_DOWN) {
            start = e.getEventTime();
            x = (int) e.getX() + 11;
            y = (int) e.getY() - 15;
            touchedPoint = map.getProjection().fromPixels(x, y);

        }
        if (e.getAction() == MotionEvent.ACTION_UP) {
            stop = e.getEventTime();
        }
        if (stop - start > 1500) {
            // to do action
            AlertDialog alert = new AlertDialog.Builder(MainActivity.this).create();
            alert.setTitle("Option panel");
            alert.setMessage("Choose an option!");
            alert.setButton("Put flag", new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub
                            OverlayItem overlayitem = new OverlayItem(touchedPoint, "Flag", "Flag");
                            CustomPinpoint custom = new CustomPinpoint(d, MainActivity.this);
                            custom.insertPinpoint(overlayitem);
                            overlayList.add(custom);
                        }
                    });
            alert.setButton2("Get address", new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub
                            Geocoder geocoder = new Geocoder(getBaseContext(), Locale.getDefault());
                            try {
                                List<Address> address = geocoder.getFromLocation(touchedPoint.getLatitudeE6() / 1E6, touchedPoint.getLongitudeE6() / 1E6, 1);
                                if (address.size() > 0) {
                                    String display = "";
                                    for (int i = 0; i < address.get(0).getMaxAddressLineIndex(); i++) {
                                        display += address.get(0).getAddressLine(i) + "\n";
                                    }
                                    Toast t3 = Toast.makeText(getBaseContext(), display, Toast.LENGTH_LONG);
                                    t3.show();
                                }

                            } catch (IOException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            } finally {
                                // Nista
                            }
                        }
                    });
            alert.setButton3("View",    new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub
                            if (map.isSatellite()) {
                                map.setSatellite(false);
                                map.setStreetView(true);
                            } else {
                                map.setStreetView(false);
                                map.setSatellite(true);
                            }
                        }
                    });
            alert.show();
            return true;
        }

        return false;
    }
}

@Override
public void onLocationChanged(Location l) {
    // TODO Auto-generated method stub
    latit = (int) (l.getLatitude() * 1E6);
    longi = (int) (l.getLongitude() * 1E6);
    GeoPoint ourLocation = new GeoPoint(latit, longi);
    OverlayItem overlayitem = new OverlayItem(ourLocation, "Location", "LOcation");
    CustomPinpoint custom = new CustomPinpoint(d, MainActivity.this);
    custom.insertPinpoint(overlayitem);
    overlayList.add(custom);

}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:53:15.847

您可能想要使用不同的名称。您所说的“指南针”实际上是您的位置，它的行为肯定与指南针不同——对于初学者来说，它主要指向不同的方向。

在您尝试启用或禁用 MyLocation 覆盖之前，您需要检查它是否实际上是非空的。

```
 if (mMyLocationOverlay != null)
    mMyLocationOverlay.disableMyLocation(); 
```

# javascript - 拆分所有未转义的分号

> ID：12919958
> 
> 赞同：4
> 
> 时间：2012-10-16T17:08:23.417
> 
> 标签：javascript, regex

我有一个包含分号的 javascript 字符串（其中一些被转义）。

我的问题是，如何在所有未转义的分号上拆分此字符串并保留转义的分号

```
var example = "abc;def;ghi\;jk" 
```

这应该得到：

```
example[0] = "abc";
example[1] = "def";
example[2] = "ghi\;jk"; 
```

我只找到了一个 PHP 正则表达式，它在 javascript 中不起作用:(

```
'/(?<!\\\);/' 
```

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T17:25:23.377

JavaScript 没有否定的look-behind（这会使这个问题变得简单），所以我们可以通过反转字符串并使用否定的look-ahead 来模拟它！

```
function splitByUnescapedSemicolons(s) {
  var rev = s.split('').reverse().join('');
  return rev.split(/;(?=[^\\])/g).reverse().map(function(x) {
    return x.split('').reverse().join('');
  });
}

splitByUnescapedSemicolons("abc;def;ghi\;jk"); // => ["abc", "def", "ghi\;jk"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T20:01:40.470

以下经过测试的 JavaScript 函数可以解决问题：

## 分号分隔值：

```
function splitByUnescapedSemicolons(text) {
    var a = [];                 // Array to receive results.
    if (text === '') return a;  // Special empty string case.
    // Push first (possibly last) value.
    text = text.replace(/^[^;\\]*(?:\\[\S\s][^;\\]*)*(?=;|$)/,
        function(m0){a.push(m0); return '';});
    // Push any 2nd, 3rd, remaining values.
    text = text.replace(/;([^;\\]*(?:\\[\S\s][^;\\]*)*)/g,
        function(m0, m1){a.push(m1); return '';});
    return a;
} 
```

该解决方案正确处理转义的分号（并且也转义了其他任何内容，包括转义转义）。

## 示例数据：

```
"" == [];
";" == ['', ''];
"\;" == ['\;'];
"\\;" == ['\\', ''];
"one;two" == ['one', 'two'];
"abc;def;ghi\;jk" == ['abc', 'def', 'ghi\;jk'];
"abc;def;ghi\\;jk" == ['abc', 'def', 'ghi\\', 'jk']; 
```

# drupal - 如何根据 ups 运输报价将 ubercart 设置为有条件的？

> ID：12919962
> 
> 赞同：0
> 
> 时间：2012-10-16T17:08:29.457
> 
> 标签：drupal, ubercart, ups, drupal-rules

我正在使用带有 ubercart 运输的 Drupal 7。我的客户希望运输成本是地面报价，除非它 >= 50 美元。然后他想收取 50 美元的固定费用。

我创建了一个 50 美元的统一费率和一个 ups 地面报价。

我没有看到使用运输报价来确定运输方式的条件。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:35:37.960

想通了这个。不漂亮，但它有效。只需转到 ups 选项并使用 php 评估添加条件。请注意，您必须有两种可用的付款方式才能使条件生效。粘贴此代码。

```
$method = array (
  'id' => 'ups',
  'module' => 'uc_ups',
  'title' => 'UPS',
  'operations' => array (
    'configure' => array (
      'title' => 'configure',
      'href' => 'admin/store/settings/quotes/settings/ups',
    ),
  ),
  'quote' => array (
    'type' => 'small_package',
    'callback' => 'uc_ups_quote',
    'accessorials' => array (
      '03' => 'UPS Ground',
    ),
  ),
  'ship' => array (
    'type' => 'small_package',
    'callback' => 'uc_ups_fulfill_order',
    'file' => 'uc_ups.ship.inc',
    'pkg_types' => array (
      '02' => 'Customer Supplied Package',
      '01' => 'UPS Letter',
      '03' => 'Tube',
      '04' => 'PAK',
      21 => 'UPS Express Box',
      24 => 'UPS 25KG Box',
      25 => 'UPS 10KG Box',
      30 => 'Pallet',
      '2a' => 'Small Express Box',
      '2b' => 'Medium Express Box',
      '2c' => 'Large Express Box',
    ),
  ),
  'cancel' => 'uc_ups_void_shipment',
  'enabled' => 1,
  'weight' => '0',
);

$details->postal_code = $order->delivery_postal_code;
$details->zone = $order->delivery_zone;
$details->country = $order->delivery_country;

$quote = uc_ups_quote($order->products, $details , $method);
return ($quote['03']['rate'] < 50); 
```

该方法可以针对其他类型的运输进行调整，此条件仅适用于 ups ground。您可以修改它以在 ups/fedex 或类似的东西之间自动选择最便宜的方法。

反正。希望这对其他人有帮助。

# c# - 模拟位于父对象上的 Mocks 列表

> ID：12919969
> 
> 赞同：1
> 
> 时间：2012-10-16T17:08:45.943
> 
> 标签：c#, unit-testing, mocking, moq

我正在用 Moq 做一些单元测试，我想做相当于：

```
Location location = new Location();
LocationTimes locationTimes = new LocationTimes();
location.LocationTimes.Add(locationTimes); 
```

所以我尝试了这个：

```
var mockLocation = new Mock<Location>();
var mockLocationTime = new Mock<LocationTimes>();

mockLocationTime.SetupProperty(f => f.isEarlyHoursSupported, true);
mockLocationTime.SetupProperty(f => f.isEarlyHoursSupportedManual, true);

var mockLocationTimeList = new List<Mock<LocationTimes>>();
mockLocationTimeList.Add(mockLocationTime);

this.mockLocation1 = new Mock<Location>();
mockLocation1.SetupProperty(f => f.LocationTimes, mockLocationTimeList); 
```

...但我在最后一行出现错误，因为 mockLocationTimeList 现在是一个起订量列表。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:11:02.153

这应该为您解决问题。

```
var mockLocation = new Mock<Location>(); 
var mockLocationTime = new Mock<LocationTimes>(); 

mockLocationTime.SetupProperty(f => f.isEarlyHoursSupported, true); 
mockLocationTime.SetupProperty(f => f.isEarlyHoursSupportedManual, true); 

var mockLocationTimeList = new List<LocationTimes>(); 
mockLocationTimeList.Add(mockLocationTime.Object); 

this.mockLocation1 = new Mock<Location>(); 
mockLocation1.SetupProperty(f => f.LocationTimes, mockLocationTimeList); 
```

现在 the`List`真的是 a`List<LocationTimes>`但每个`LocationTimes`对象都是一个 mock。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T09:37:21.667

我能让这个工作的唯一方法是这样的：

```
var mockLocation = new Mock<Location>();
var mockLocationTime = new Mock<LocationTimes>();

mockLocationTime.SetupProperty(f => f.isEarlyHoursSupported, true);
mockLocationTime.SetupProperty(f => f.isEarlyHoursSupportedManual, true);

this.mockLocation1 = new Mock<Location>();
mockLocation1.SetupProperty(f => f.LocationTimes, new List<LocationTimes>());
mockLocation1.Object.LocationTimes.Add(mockLocationTime.Object); 
```

# knockout.js - 如何在 KnockOut 之外的“SetData()”方法中获取所有复选框 ID（逗号分隔）？

> ID：12919975
> 
> 赞同：0
> 
> 时间：2012-10-16T17:08:56.600
> 
> 标签：knockout.js

下面是我的带有 KnockOut JS 的 MVC 应用程序代码，我有带有“onClick”事件“SetData()”的提交按钮。

如何获取所选复选框的所有 id，我将在 KnockOut OnSubmit 中工作的注释代码放入，但我想要在外面，

```
///

@model Demo.Web.ViewModels.HomeViewModel
@{
   ViewBag.Title = "Two Page";
 }
@using (Html.BeginForm())
{
<table>
    <tr>
        <td>
            <span data-bind="foreach: pageOptions">
                <input type="checkbox" data-bind="checked: IsChecked" />
                <span data-bind="text: OptionName"></span>
                <br />
            </span>
        </td>
    </tr>
</table>

<input type="submit" name="send" value="Send" onclick="SetData();" />
}

<script type="text/javascript">
var viewModel = {
    pageOptions: ko.observableArray([{"OptionCode":1,"OptionName":"Option 1","IsChecked":true},{"OptionCode":2,"OptionName":"Option 2","IsChecked":false},{"OptionCode":3,"OptionName":"Option 3","IsChecked":true},{"OptionCode":4,"OptionName":"Option 4","IsChecked":true}]),
    IsChecked: ko.observableArray()
    };

$(function() {
        ko.applyBindings(viewModel);
    });

function SetData() {
    alert('f');
    //         var ids = [];
   //                $.each(this.pageOptions(), function(n, item) {
   //                    if(item.IsChecked)
   //                    ids.push(item.OptionCode);
   //                });
   }

  </script>     

/// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T17:29:51.320

这

```
IsChecked: ko.observableArray() 
```

从未使用过。将 pageOptions 元素的 IsChecked 属性定义为 observable()：

```
var viewModel = {
    pageOptions: ko.observableArray([{"OptionCode":1,"OptionName":"Option 1","IsChecked": ko.observable(true)},{"OptionCode":2,"OptionName":"Option 2","IsChecked": ko.observable(false)},{"OptionCode":3,"OptionName":"Option 3","IsChecked":ko.observable(true)},{"OptionCode":4,"OptionName":"Option 4","IsChecked":ko.observable(true)}]),
    IsChecked: ko.observableArray() ---> delete this, you don't need it
}; 
```

然后，在淘汰赛域之外，您可以通过以下方式访问这些值：

```
for(var i = 0; i < viewModel.pageOptions().length; i++) {
    if(viewModel.pageOptions()[i].IsChecked()) { 
        ---> the logic you want to use 
    }
} 
```

只要复选框与 ko.observable() 数据绑定，Knockout 就会更新 JSON 对象的 IsChecked 属性。如果您只是使用值（真/假）进行数据绑定，则当用户选中或取消选中 html 控件时，该对象永远不会更新。

# html - 为什么 CSS 没有链接到我的 html？

> ID：12919976
> 
> 赞同：2
> 
> 时间：2012-10-16T15:18:48.773
> 
> 标签：html, css

我一般在 Windows 中使用 Notepad++ 编写 HTML 和 CSS（我是初学者）。但是，我也很喜欢使用 Linux 并且经常在 Ubuntu 中工作。我在 Ubuntu 中使用 BlueFish 编辑器。

我的问题是，在 BlueFish 中，当我输入简单的 CSS 样式并将它们链接到 HTML 文档并进入浏览器进行预览时，除了编写的 HTML（段落、文本、图像等）之外，什么都没有。

这就是我对 HTML 的了解：我只需要知道我是否正确链接，如果是，当我创建“style.css”文档时为什么它不能正常工作。

```
<!DOCTYPE HTML>
<!-- This is a mockup page -->
<html>
    <head>

        <link rel="stylesheet" href="style.css" type="text/css"/>
        <title>Daily News</title>

    </head>

    <body>

    <ul id="nav

        <li><a href="#" >Home</a></li>
        <li><a href="#" >About</a></li>
        <li><a href="#" >Services</a></li>
        <li><a href="#" >Contact</a></li>

    </ul>

    <div id="p1">
    <h4>Coding is fun</h4>
<p>Morbi posuere fermentum urna non iaculis. Vivamus posuere felis sed orci luctus vel tempor nunc ultrices. Sed accumsan mauris ac orci condimentum id posuere tellus tincidunt. Aliquam pellentesque tortor ac magna porttitor luctus. Fusce nec augue in est tempus mollis ac ut libero. Vestibulum eget mi eu orci vestibulum ullamcorper sed non ligula. Nulla facilisi. Sed consectetur, libero imperdiet condimentum mattis, nisl tortor fringilla tortor, in consequat erat libero eget diam. Ut tortor erat, tincidunt vel cursus ut, varius sit amet est. </p>
    <h4>Open Source is for the better good</h4>
<p>Morbi posuere fermentum urna non iaculis. Vivamus posuere felis sed orci luctus vel tempor nunc ultrices. Sed accumsan mauris ac orci condimentum id posuere tellus tincidunt. Aliquam pellentesque tortor ac magna porttitor luctus. Fusce nec augue in est tempus mollis ac ut libero. Vestibulum eget mi eu orci vestibulum ullamcorper sed non ligula. Nulla facilisi. Sed consectetur, libero imperdiet condimentum mattis, nisl tortor fringilla tortor, in consequat erat libero eget diam. Ut tortor erat, tincidunt vel cursus ut, varius sit amet est. </p>
    <h4>Ubuntu 12.10 is coming out next week</h4>
<p>Aenean commodo libero at purus varius at bibendum lacus gravida. Nullam sollicitudin, justo eget hendrerit pharetra, massa est ullamcorper sem, vitae commodo nulla risus eget tortor. Curabitur viverra hendrerit ornare. Donec eu nisl erat. Suspendisse sed bibendum metus. Praesent luctus euismod odio ut semper. Suspendisse molestie vulputate sapien eleifend hendrerit. Nullam gravida cursus mattis. </p>

<div id="right_sidebar"></div>
    </div>
    <div id="footer">

<footer>Webpage designed by me</footer>
    </div>
</body>

</html> 
```

****我也开始从 Codeyear.com 学习网上任何其他好的资源来学习 HTML CSS Javascript？***

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:53:54.957

好的，我稍微清理了您的 HTML。请记住，您的缩进应该是一致的 - 您的关闭标签应该与您的打开标签对齐，等等。

```
<!DOCTYPE HTML>
<!-- This is a mockup page -->
<html>
    <head>
        <link rel="stylesheet" href="style.css" type="text/css" />
        <title>Daily News</title>
    </head>

    <body>
        <ul id="nav>
            <li><a href="#" >Home</a></li>
            <li><a href="#" >About</a></li>
            <li><a href="#" >Services</a></li>
            <li><a href="#" >Contact</a></li>
        </ul>

        <div id="p1">
            <h4>Coding is fun</h4>
            <p>Morbi posuere fermentum urna non iaculis. Vivamus posuere felis sed orci luctus vel tempor nunc ultrices. Sed accumsan mauris ac orci condimentum id posuere tellus tincidunt. Aliquam pellentesque tortor ac magna porttitor luctus. Fusce nec augue in est tempus mollis ac ut libero. Vestibulum eget mi eu orci vestibulum ullamcorper sed non ligula. Nulla facilisi. Sed consectetur, libero imperdiet condimentum mattis, nisl tortor fringilla tortor, in consequat erat libero eget diam. Ut tortor erat, tincidunt vel cursus ut, varius sit amet est. </p>

            <h4>Open Source is for the better good</h4>
            <p>Morbi posuere fermentum urna non iaculis. Vivamus posuere felis sed orci luctus vel tempor nunc ultrices. Sed accumsan mauris ac orci condimentum id posuere tellus tincidunt. Aliquam pellentesque tortor ac magna porttitor luctus. Fusce nec augue in est tempus mollis ac ut libero. Vestibulum eget mi eu orci vestibulum ullamcorper sed non ligula. Nulla facilisi. Sed consectetur, libero imperdiet condimentum mattis, nisl tortor fringilla tortor, in consequat erat libero eget diam. Ut tortor erat, tincidunt vel cursus ut, varius sit amet est. </p>

            <h4>Ubuntu 12.10 is coming out next week</h4>
            <p>Aenean commodo libero at purus varius at bibendum lacus gravida. Nullam sollicitudin, justo eget hendrerit pharetra, massa est ullamcorper sem, vitae commodo nulla risus eget tortor. Curabitur viverra hendrerit ornare. Donec eu nisl erat. Suspendisse sed bibendum metus. Praesent luctus euismod odio ut semper. Suspendisse molestie vulputate sapien eleifend hendrerit. Nullam gravida cursus mattis. </p>

            <div id="right_sidebar"></div>
        </div>

        <div id="footer">
            <footer>Webpage designed by me</footer>
        </div>
    </body>
</html> 
```

至于为什么您的 CSS 可能没有显示 - 请记住，CSS 文件必须相对于链接到它的 HTML 页面正确放置。这是一个模拟目录结构，例如，基于您`<link>`在上面代码中的标签：

```
/
/style.css
/index.html 
```

现在，如果 style.css 在它自己的文件夹中，它应该如下：

```
/
/css/styles.css
/index.html 
```

在后一种情况下，链接标签将读取`<link rel="stylesheet" href="css/styles.css" type="text/css" />`

我不太明白 Bluefish 会如何干扰未加载的 CSS 文件。如果您使用的是 Chrome 或 IE，请按`F12`打开开发人员控制台并打开 Network 选项卡，然后重新加载页面并查看 style.css 是否已正确加载（如果我应该返回 200 OK 或 300 Not Modified 代码正确回忆）。您可以在 Firefox 中使用 Firebug 执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T15:21:23.253

您的 style.css 文件需要与您的 html 文件位于 Web 服务器上的同一目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T15:59:48.800

我不知道它是否解决了问题，但你应该完成`ul`标签。改变

```
<ul id="nav 
```

至

```
<ul id="nav"> 
```

# python - Nohup 没有将日志写入输出文件

> ID：12919980
> 
> 赞同：170
> 
> 时间：2012-10-16T17:09:04.377
> 
> 标签：python, nohup

我正在使用以下命令在后台运行 python 脚本：

```
nohup ./cmd.py > cmd.log & 
```

但似乎 nohup 没有向日志文件写入任何内容。cmd.log 已创建，但始终为空。在 python 脚本中，我使用`sys.stdout.write`而不是`print`打印到标准输出。我做错什么了吗？

* * *

## 回答 #1

> 赞同：466
> 
> 时间：2012-10-16T17:19:17.527

您可以使用该标志运行 Python`-u`以避免输出缓冲：

```
nohup python -u ./cmd.py > cmd.log & 
```

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2012-10-16T17:17:11.660

看起来您需要定期刷新标准输出（例如`sys.stdout.flush()`）。`print`在我的测试中，即使程序退出，Python 也不会自动执行此操作。

* * *

## 回答 #3

> 赞同：63
> 
> 时间：2017-07-27T15:59:10.887

*   使用`-u` with`nohup`对我有用。使用`-u`将强制`stdout`,`stderr`流无缓冲。它不会影响标准输入。一切都将保存在“ ***nohup.out*** ”文件中。像这样-

    ```
    nohup python -u your_code.py & 
    ```

    您也可以将其保存到您的目录中。这边走-

    ```
    nohup python -u your_code.py > your_directory/nohup.out & 
    ```

*   此外，您可以使用`PYTHONUNBUFFERED`. 如果将其设置为非空字符串，它将与`-u`选项相同。在运行 python 代码之前使用下面的命令运行。

    ```
    export PYTHONUNBUFFERED=1 
    ```

    或者

    ```
    export PYTHONUNBUFFERED=TRUE 
    ```

**PS-** *我会建议使用像 cron-job 这样的工具在后台运行和计划执行。*

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2017-04-09T07:21:37.120

```
export PYTHONUNBUFFERED=1
nohup ./cmd.py > cmd.log & 
```

或者

```
nohup python -u ./cmd.py > cmd.log & 
```

[https://docs.python.org/2/using/cmdline.html#cmdoption-u](https://docs.python.org/2/using/cmdline.html#cmdoption-u)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-05-24T03:09:07.367

Python 3.3 及更高版本有一个 print 参数，这是唯一对我有用的方法。

```
print("number to train = " + str(num_train), flush=True)
print("Using {} evaluation batches".format(num_evals), flush=True) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-06T09:58:15.907

我有一个类似的问题，但与 Python 进程无关。我正在运行一个执行 nohup 的脚本，该脚本通过 cron 定期运行。

我能够通过以下方式解决问题：

1.  重定向标准输入、标准输出和标准错误
2.  确保通过 nohup 调用的脚本没有在后台运行任何其他内容

PS：我的脚本是用在 RHEL 上运行的 ksh 编写的

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2021-02-08T12:03:23.860

我以以下方式运行我的脚本，我完全没有问题：

```
nohup python my_script.py &> my_script.out & 
```

与您的语法相比，您输入后似乎只缺少一个“&”符号......

# r - 如何以更智能的方式从矩阵中删除特定的行和列？

> ID：12919984
> 
> 赞同：41
> 
> 时间：2012-10-16T17:09:14.360
> 
> 标签：r

假设`t1`是：

```
t1 <- array(1:20, dim=c(10,10))

      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
 [1,]    1   11    1   11    1   11    1   11    1    11
 [2,]    2   12    2   12    2   12    2   12    2    12
 [3,]    3   13    3   13    3   13    3   13    3    13
 [4,]    4   14    4   14    4   14    4   14    4    14
 [5,]    5   15    5   15    5   15    5   15    5    15
 [6,]    6   16    6   16    6   16    6   16    6    16
 [7,]    7   17    7   17    7   17    7   17    7    17
 [8,]    8   18    8   18    8   18    8   18    8    18
 [9,]    9   19    9   19    9   19    9   19    9    19
[10,]   10   20   10   20   10   20   10   20   10    20 
```

我想从此矩阵中删除第 4-6 行和第 7-9 列。

我知道如何使用

```
t2 <- t1[,-7]
t3 <- t2[,-8]
t4 <- t3[,-9]
t5 <- t4[-4,]
t6 <- t5[-5,]
t7 <- t6[-6,] 
```

但是，我认为这是最愚蠢的做法。你能介意建议一些更聪明的方法吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-16T17:10:02.563

你可以做：

```
t1<- t1[-4:-6,-7:-9] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-17T17:43:47.370

您可以使用

```
t1<- t1[-4:-6,-7:-9] 
```

或者

```
t1 <- t1[-(4:6), -(7:9)] 
```

或者

```
t1 <- t1[-c(4, 5, 6), -c(7, 8, 9)] 
```

你可以通过`vectors`选择`rows/columns`被删除。如果您尝试删除**连续的**行/列，前两种方法很有用。**如果您尝试删除离散** 的，第三种方法很有用`rows/columns`。

```
> t1 <- array(1:20, dim=c(10,10));

> t1[-c(1, 4, 6, 7, 9), -c(2, 3, 8, 9)]

     [,1] [,2] [,3] [,4] [,5] [,6]
[1,]    2   12    2   12    2   12
[2,]    3   13    3   13    3   13
[3,]    5   15    5   15    5   15
[4,]    8   18    8   18    8   18
[5,]   10   20   10   20   10   20 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-09T06:35:20.053

您还可以通过向矩阵提供逻辑布尔值向量来删除行和列。这可以处理您有多个**非连续行**或非**连续列**需要删除的情况。

```
# TRUE = Keep a row/column
# FALSE = Delete a row/column
#
# FALSE for rows 4, 5, and 6
# Row:            1     2     3     4      5      6      7     8     9     10
rows_to_keep <- c(TRUE, TRUE, TRUE, FALSE, FALSE, FALSE, TRUE, TRUE, TRUE, TRUE)

# FALSE for columns 7, 8, and 9
# Column:         1     2     3     4     5     6     7      8      9      10
cols_to_keep <- c(TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, FALSE, FALSE, FALSE, TRUE) 
```

要仅删除行：

```
t1 <- t1[rows_to_keep,] 
```

要仅删除列：

```
t1 <- t1[,cols_to_keep] 
```

要同时删除行和列：

```
t1 <- t1[rows_to_keep, cols_to_keep] 
```

如果您事先不知道需要删除哪些行或列，则此编码技术很有用。和向量可以由您`rows_to_keep`的`cols_to_keep`代码酌情计算。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-10T09:15:24.103

```
> S = matrix(c(1,2,3,4,5,2,1,2,3,4,3,2,1,2,3,4,3,2,1,2,5,4,3,2,1),ncol = 5,byrow = TRUE);S
[,1] [,2] [,3] [,4] [,5]
[1,]    1    2    3    4    5
[2,]    2    1    2    3    4
[3,]    3    2    1    2    3
[4,]    4    3    2    1    2
[5,]    5    4    3    2    1
> S<-S[,-2]
> S
[,1] [,2] [,3] [,4]
[1,]    1    3    4    5
[2,]    2    2    3    4
[3,]    3    1    2    3
[4,]    4    2    1    2
[5,]    5    3    2    1 
```

只需使用命令`S <- S[,-2]`删除第二列。类似地删除一行，例如删除第二行使用`S <- S[-2,]`.

# objective-c - ARC 管理哪些变量？

> ID：12919987
> 
> 赞同：0
> 
> 时间：2012-10-16T17:09:17.933
> 
> 标签：objective-c, automatic-ref-counting

有人可以澄清一下ARC管理的内容吗？我听说它不管理 c-structs，但我仍然看到人们使用它们。请告诉我以下哪些变量将由 ARC 管理以及为什么。

```
static CGPoint _var1;
int _var2;

@interface class1:NSObject
    CGPoint _var3;
    CGPoint _var4;
    NSString *_var5;
    NSString *_var6;
}
@property (assign) CGPoint var3;
@property (strong) NSString *var5;
@end

@implentation class1
@synthesize var3 = _var3;
@synthesise var5 = _var5;
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:14:33.657

ARC 自动管理 Objective-C 对象。所有其他类型都像在 C 中一样进行管理。

请注意，在您的示例中，没有与 CGPoint 实例变量关联的分配；内存是与对象内联有效分配的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T19:15:47.893

与 MRC 相比（相对于 GC - 现在已弃用）ARC 管理 Objective-C 对象 - no`retain`或.`release``autorelease`

一般来说，它不管理核心基础对象——对于那些`CFRetain`仍然`CFRelease`是必需的。

ARC 不管理分配给`malloc`和朋友的 C 对象，因为需要手动管理内存。

C 结构不是动态分配的，它们是*值类型*，就像整数和字符一样。如果您声明*指向*C 结构的指针并使用`malloc`和朋友动态分配它们，那么您可以像使用任何其他动态分配的 C 对象一样手动管理它们。

您听说过的有关 ARC 和 C 结构的内容是对允许的字段类型的更改。根据 MRC 声明：

```
typedef struct
{
   int count;
   NSString *name;
} Item; 
```

是*有效*的，并且`name`使用通常的`retain`等手动管理。但是对于 ARC，它是*不允许*的，ARC 管理的任何对象引用都不能用作结构中的字段类型。

上述结构的推荐替代方法是使用 Obj-C 对象。但是，如果您确实需要值语义，则可以使用`__unsafe_unretained`属性标记该字段：

```
typedef struct
{
   int count;
   __unsafe_unretained NSString *name;
} Item; 
```

此属性指示 ARC 忽略存储在`name`字段中的任何引用，以确定是否应保留或释放对象。ARC 可以随时释放 引用的对象`name`，因此是*不安全*和不*保留*的。为了安全地使用这样的结构，您必须确保引用的对象被其他方式保留，例如通过 ARC 管理的对它的强引用。

# java - 截断大对象图的设计模式

> ID：12919988
> 
> 赞同：5
> 
> 时间：2012-10-16T17:09:21.397
> 
> 标签：java, object, graph

使用 Java，我有一个非常大的对象图，其中一个对象与许多其他对象相关联，每个对象都与许多其他对象相关联。大多数时候，我只需要一个子图来传递给方法或通过网络发送。

是否有推荐的设计模式，以便我可以在图中的许多点截断这个大对象图。一种方法是在所有截断点提供 NULL 作为参考。我会很感激任何其他想法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:30:00.177

如果我理解正确，您可以使用[Lazy Factory](http://en.wikipedia.org/wiki/Lazy_initialization)。
此策略通常用于映射具有您现在不需要的关联的对象，并且可能根本不需要。（它在 Hibernate ORM 中被广泛使用）。
当您想通过网络发送大型对象时，您可以使用代理模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T17:26:30.597

一种选择是用 Node 对象构建图形（就像您现在所做的那样），然后截断图形，用 Graph 对象封装它，该对象将图形存储为成员，提供自己的接口来在图，并在内部使用将被视为从图中删除的节点表。

这种方法的好处是您不会改变原始图形对象本身，也不必复制它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T17:27:27.853

[代理模式](http://www.javaworld.com/javaworld/jw-02-2002/jw-0222-designpatterns.html)是解决这类问题的一个很好的设计模式。

# couchdb - couchdb cloudant 表单 POST 返回错误错误

> ID：12919989
> 
> 赞同：1
> 
> 时间：2012-10-16T17:09:27.603
> 
> 标签：couchdb, http-post, cloudant

**背景：**

[https://cloudant.com/for-developers/all_docs/](https://cloudant.com/for-developers/all_docs/)在“邮寄查询”下说

“您还可以通过向视图发布一个 JSON 键数组来查询一组特定的键。”

**问题：**

尝试在 HTML 表单中通过 POST 查询时，结果为错误

```
{"error":"bad_request","reason":"invalid UTF-8 JSON"} 
```

（参见例如[http://jsfiddle.net/dreftymac/TPb7P/](http://jsfiddle.net/dreftymac/TPb7P/)）

**问题：**

这方面的文档不是最新的吗？或者是否有 POST 表单提交产生此错误的原因？

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:40:26.970

Cloudant 接受正文中带有 JSON 的 HTTP PUT 请求。我认为带有 multipart/form-data 的 HTTP POST 不会起作用。更多信息可以在这里找到：[http ://wiki.apache.org/couchdb/HTTP_Bulk_Document_API](http://wiki.apache.org/couchdb/HTTP_Bulk_Document_API)

# c# - 是否存在生成具有 MVVM 模式的表示级别的代码生成器？

> ID：12919996
> 
> 赞同：0
> 
> 时间：2012-10-16T17:10:21.807
> 
> 标签：c#, wpf, code-generation, model-view

是否存在使用模型视图视图模型模式生成表示级别的代码生成器？我需要一个生成器，它将为widnows桌面或WPF应用程序生成具有表示级别的代码，所有这些代码都使用MVVM模式（来自数据库或对象模型）进行数据绑定

存在这样的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T04:26:55.137

您可以使用 T4 模板来执行此操作。如果您想了解 T4 模板，我建议您阅读[T4 教程：创建可重用代码生成模板](http://www.olegsych.com/2008/09/t4-tutorial-creating-reusable-code-generation-templates/)。

# mdx - 向 MDX 查询添加过滤器或 where 条件？

> ID：12919997
> 
> 赞同：-1
> 
> 时间：2012-10-16T17:10:21.877
> 
> 标签：mdx

这不应该是一个难题。不幸的是我不知道如何解决它：

```
SELECT {[Source].[Source].CHILDREN, [Source].[Source].[All]} ON COLUMNS, 
NON EMPTY(
    [Account].[Hierarchy].[Account Type].&[Assets].CHILDREN) 
 ON ROWS  
FROM [Test] 
WHERE ([Measures].[Amount]) 
```

它一年四季都很好用。

现在我想添加一个时间条件，例如

```
[Date].[Date].&[2005-10-03T00:00:00]:[Date].[Date].&[2005-12-30T00:00:00] 
```

或者

```
[Date].[Period].&[Oct 2005],[Date].[Period].&[Nov 2005],[Date].[Period].&[Dec 2005] 
```

你能给我一些帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:12:34.163

您可以尝试以下查询：

```
SELECT {[Source].[Source].CHILDREN, [Source].[Source].[All]} ON COLUMNS, 
NON EMPTY
    [Account].[Hierarchy].[Account Type].&[Assets].CHILDREN
 ON ROWS  
FROM [Test] 
WHERE CrossJoin({[Measures].[Amount]}, [Date].[Date].&[2005-10-03T00:00:00]:[Date].[Date].&[2005-12-30T00:00:00]) 
```

或者

```
SELECT {[Source].[Source].CHILDREN, [Source].[Source].[All]} ON COLUMNS, 
NON EMPTY
    [Account].[Hierarchy].[Account Type].&[Assets].CHILDREN
 ON ROWS  
FROM [Test] 
WHERE CrossJoin({[Measures].[Amount]}, {[Date].[Period].&[Oct 2005],[Date].[Period].&[Nov 2005],[Date].[Period].&[Dec 2005]}) 
```