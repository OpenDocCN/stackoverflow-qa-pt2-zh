# StackOverflow 问答 13919000-13919999

# python - python从fd直接读入bytearray

> ID：13919006
> 
> 赞同：5
> 
> 时间：2012-12-17T17:28:55.650
> 
> 标签：python, io, python-2.7

有没有办法从*文件描述符*（不是类似 IO 的对象）直接读取到[bytearray](http://docs.python.org/2/library/functions.html?highlight=bytearray#bytearray)？

现在我使用一个临时`FileIO`对象进行调解，例如：

```
def fd_readinto(fd, ba):
    fio = io.FileIO(fd, closefd = False)
    return fio.readinto(ba) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T23:34:52.390

没有功能可以做到这一点，您的方法已经是最快的方法。

我打算建议`bytearray(mmap)`，，`array.fromfile`甚至是使用 and 的自制程序`os.read()`，`bytearray`但是`memoryview`尖叫*得很快*。（这是有道理的，因为它只执行一个系统调用。）`FileIO.readinto`

 *```
import os
import mmap, io, array
import timeit

fn = 'path-to-largeish-file'

def fd_readinto_mmap(fd, ba):
    m = mmap.mmap(fd, 0, access=mmap.ACCESS_READ)
    ba.extend(m)
    m.close()

def fd_readinto_fio(fd, ba):
    sz = os.fstat(fd).st_size
    ba2 = bytearray(sz)
    with io.FileIO(fd, closefd = False) as fio:
        fio.readinto(ba2)
    ba.extend(ba2)

def fd_readinto_array(fd, ba):
    ar = array.array('c')
    sz = os.fstat(fd).st_size
    fp = os.fdopen(fd, 'rb')
    ar.fromfile(fp, sz)
    ba.extend(ar)

def fd_readinto_mv(fd, ba):
    stat = os.fstat(fd)
    blksize = getattr(stat, 'st_blksize', 4096)
    bufsize = stat.st_size
    buf = bytearray(bufsize)
    m = memoryview(buf)
    while True:
        b = os.read(fd, blksize)
        s = len(b)
        if not s: break
        m[:s], m = b, m[s:]
    writtenbytes = buffer(buf, 0, bufsize-len(m))
    ba.extend(writtenbytes)

setup = """
from __main__ import fn, fd_readinto_mmap, fd_readinto_fio, fd_readinto_array, fd_readinto_mv
import os
openfd = lambda : os.open(fn, os.O_RDONLY)
closefd = lambda fd: os.close(fd)
"""

reps = 2
tests = {
    'fio' : "fd=openfd(); fd_readinto_fio(fd, bytearray()); closefd(fd)",
    'mmap': "fd=openfd(); fd_readinto_mmap(fd, bytearray()); closefd(fd)",
    'array': "fd=openfd(); fd_readinto_array(fd, bytearray());",
    'mv' : "fd=openfd(); fd_readinto_mv(fd, bytearray()); closefd(fd)",
}

width = max(map(len, tests))
for n,t in tests.iteritems():
    time = timeit.timeit(t, setup, number=reps)
    print ("{:%s} {}" % width).format(n, time) 
```

在我的系统（OS X 10.14.6，Python 2.7.10）上，`FileIO`是最快的选择：

```
mmap  7.19839119911
array 5.72453403473
mv    0.49933886528
fio   0.299485206604 
```*

# c# - 超时后 TcpClient 连接断开

> ID：13919009
> 
> 赞同：0
> 
> 时间：2012-12-17T17:29:18.367
> 
> 标签：c#, .net, sockets, timeout, tcpclient

我正在使用`TcpClient.ReceiveTimeout`属性为 TcpClient 设置超时。当`TcpClient.Read()`方法抛出异常（“连接方在一段时间后没有正确响应”）时 - 自然 -`TcpClient.ReceiveTimeout`毫秒后，`TcpClient.Connected`开始返回 false。

这正常吗？有没有办法防止这种情况？我想获得异常但保持连接打开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:34:45.473

那是正常的行为。

您可以设置无限接收超时来避免这种情况（无限是默认值。您可以将其显式设置为 0 作为 ReceiveTimeout 属性）。但是，如果另一端真的没有客户端，这将导致程序响应能力出现问题。根据您的具体用例，记录连接失败然后创建新连接可能会更好。

这是我通常会使用的模式（伪代码。连接方法通常与异常处理内联）：

```
while (!done)
{
    // Try to connect with a reasonable ReceiveTimeout
    connected = EstablishTheConnectionAndHandleAnyException();
    if (connected)
    {
        // Do useful work
        done = true;
    }
    else
    {
        // Receive timeout
        // If interactive, give the user an opportunity to abort
        //    by setting done = true
        // At least log the situation
    }
} 
```

# ios - Zxing Datamatrix 扫码

> ID：13919015
> 
> 赞同：0
> 
> 时间：2012-12-17T17:29:37.760
> 
> 标签：ios, zxing

我在 iOS 中使用 zxing datamatrix 代码扫描器，似乎有一个错误导致代码必须位于屏幕的正中心才能阅读。当我将代码滑动到靠近中心的位置时，它会扫描非常靠近屏幕中心的某个位置。

对于我的应用程序而言，datamatrix 代码可能位于中心，但也可能位于图像可见部分的其他任何位置。

谁能解释一下？有没有人解决这个问题？作为参考，zxing 可以扫描可见图像中任意位置的二维码。

这将扫描：

![这将扫描](../Images/16031af46f4feb2b88f8b999029ca2ee.png)

这不会扫描...

![这不会扫描](../Images/5b115086dfff40f606bd1ecef3250550.png)

# testing - 如何为特定方法停用@Before？

> ID：13919016
> 
> 赞同：1
> 
> 时间：2012-12-17T17:29:37.573
> 
> 标签：testing, junit4, spring-test

我正在使用spring和junit在java中编写一个测试类（实际上我的类底部有“@RunWith（SpringJUnit4ClassRunner.class）”）。

有一个带有 @Before 注释的方法，我希望它不要在特定的测试方法之前运行（但不是其余的）。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T16:25:58.800

你有几个选择：

1.  重构以将该测试放在没有@Before 的新测试类中。
2.  重构以将该测试放在一个新的测试类中，该类扩展了覆盖 @Before 的原始测试类，什么也不做。
3.  重构让所有其他方法显式调用 before 方法并删除 @Before 注释（我不建议你使用这个）

# mysql - 数据库——多种用户类型：不同的数据

> ID：13919018
> 
> 赞同：0
> 
> 时间：2012-12-17T17:29:41.363
> 
> 标签：mysql, database, codeigniter

我在弄清楚如何为我正在构建的应用程序构建数据库时遇到了一些麻烦。

将有三种不同类型的用户：

*   行政
*   申请人
*   审稿人

我计划有一个通用`users`表来存储每个用户类型之间的共享信息。但是，我需要为申请人存储相当多的信息，而我不会为审阅者或管理员存储，并且我需要为审阅者存储一些我不会为申请人的权限信息。

我知道我需要设置一些额外的表格来容纳这些信息，但我不知道该怎么做。我的`users`表应该有一个作为 FK 的`admin_data`, `reviewer_data`,`applic_data`字段吗？我如何检测一个人登录时的用户类型？

每个用户只需要是一种类型。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:34:13.783

有一个`accounts`包含登录信息、帐户 ID 和帐户类型的表格。然后加入适当的相关表（管理员、审阅者等）以获取相关信息。

没有理由混合数据，因为它听起来变化很大。

# java - 在选择排序中交换

> ID：13919019
> 
> 赞同：0
> 
> 时间：2012-12-17T17:29:42.610
> 
> 标签：java, sorting, selection, swap, xor

在它之后是选择排序的代码，当我尝试将最小元素与更大的元素交换时，使用 XOR 运算符不起作用。它显示 0 代替值。但是交换正在处理两个常量整数。为什么？

```
import java.io.*;

class selection {

    public static void main(String s[])throws IOException {
        BufferedReader br=new BufferedReader(new InputStreamReader(System.in));
        System.out.println("Enter n");
        int n=Integer.parseInt(br.readLine());
        System.out.println("Enter array");
        int a[]=new int[n];
        for(int i=0;i<n;++i) {
            a[i]=Integer.parseInt(br.readLine());
        }

        int min;
        System.out.println("Entered Array : ");
        for(int i=0;i<n;++i)
            System.out.print(a[i]+" ");

        for(int i=0;i<n;++i) {
            min=i;
            for(int j=i+1;j<n;++j) {
                if(a[min]>a[j])
                    min=j;
            }
            a[min]=a[min]^a[i];
            a[i]=a[min]^a[i];
            a[min]=a[min]^a[i];

        }

        System.out.println("\nSorted Array : ");
        for(int i=0;i<n;++i) {
            System.out.print(a[i]+" ");
        }
    }
} 
```

输出是：

```
Enter n
8
Enter array
1
5
4
6
2
8
9
7
Entered Array : 
1 5 4 6 2 8 9 7 
Sorted Array : 
0 2 0 5 0 7 8 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:31:52.540

如果元素相等，则使用 XOR 交换元素将不起作用，这在大多数书中都有明确指出。这里发生的情况如下 - 如果第 i 个元素是第 i 次迭代中的最小值，您将尝试将其与自身交换，这会导致其值变为 0。

为了避免这个问题，在使用 XOR 交换数字之前，检查它们的值是否相等。在您的情况下，如果您确定数组不包含相等的元素，请不要交换 if `min==i`。

# python - Python类继承有问题

> ID：13919022
> 
> 赞同：-1
> 
> 时间：2012-12-17T17:29:53.503
> 
> 标签：python, class, inheritance

我正在上编程课，对于其中一个测试，我需要创建一个继承自已创建类的类。这是老师教我做的代码，但它似乎不起作用：

```
class Intern(Employer):
    def __init__(self, last_name, first_name, address, phone, email, end_date):
        Employer(last_name, first_name, address, phone, email)
        self.end_date=end_date
    def intern_info(self):
        self.print_info()
        print self.end_date 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T17:33:04.710

线

```
Employer(last_name, first_name, address, phone, email) 
```

创建一个`Employer`在执行`__init__()`结束时立即被垃圾回收的对象。它不会`Intern`以任何方式影响对象。你的意思可能是这样的

```
Employer.__init__(self, last_name, first_name, address, phone, email) 
```

或许

```
super(Intern, self).__init__(last_name, first_name, address, phone, email) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T17:31:24.853

您`self`在`Employer`. 您需要使用`super`或`self`显式传递给父级的`__init__`. 您还需要显式调用父级的`__init__`方法。

```
class Intern(Employer):
    def __init__(self, last_name, first_name, address, phone, email, end_date):
        Employer.__init__(self, last_name, first_name, address, phone, email)
        self.end_date=end_date
    def intern_info(self):
        self.print_info()
        print self.end_date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:31:18.100

您缺少缩进​​，这是 Python 中代码块的机制。

尝试：

```
class Intern(Employer):
    def __init__(self, last_name, first_name, address, phone, email, end_date):
        Employer(last_name, first_name, address, phone, email)
        self.end_date=end_date
    def intern_info(self):
        self.print_info()
        print self.end_date 
```

# javascript - 将公历日期时间转换为 mm/dd/yyyy

> ID：13919023
> 
> 赞同：-2
> 
> 时间：2012-12-17T17:30:12.020
> 
> 标签：javascript, jquery-mobile

我有一个从 sql server 数据库返回日期时间戳的服务调用。我相信它的公历。

前任`/Date(1355762048307+0000)/`

我需要以更易读的格式显示它，例如`MM/DD/YYYY hh:mm:ss`. 我如何在 jquery 的 javascript 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:35:12.453

查看有关如何将具有该格式的日期字符串解析为[对象的](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)[这个](https://stackoverflow.com/q/12632148/1048572)[问题](https://stackoverflow.com/q/13614792/1048572)，以及如何格式化它的这个问题。[`Date`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

# c# - Visual c# 替换字符串中的特殊字符和空格

> ID：13919025
> 
> 赞同：-3
> 
> 时间：2012-12-17T17:30:33.613
> 
> 标签：c#, regex, replace

我想用连字符替换空格和特殊字符。

我想要所有带有连字符的非字母字符，例如 ?,(,),{,},[,],<,>,",',!,@<# 等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:40:07.757

这将执行所有非字母数字和非空白字符：

```
var input = "this i$ s@m3 inp^t";
var replaced = Regex.Replace(input, @"[^\d\w\s]","-");
Console.WriteLine(replaced);
// Output: this i- s-m3 inp-t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:33:35.483

根据您定义“特殊字符”的方式，您可以这样做：

```
yourString = Regex.Replace(yourString,@"\W","-"); 
```

# android - 用于 UI 更改或内部的 onSharedPreferenceChanged 调用

> ID：13919030
> 
> 赞同：1
> 
> 时间：2012-12-17T17:30:57.760
> 
> 标签：android

我`onSharedPreferenceChanged`用来检测`PreferenceActivity`.

管理的键/值对`PreferenceActivity`也被代码逻辑改变。

默认值也会触发`onSharedPreferenceChanged`函数调用。

有没有办法区分和找出用户是从 GUI 发起更改还是通过代码完成更改？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:02:27.630

不，你无法区分。无论用户启动还是程序化，都将调用侦听器

# jquery - 显示绝对定位元素的 MouseEnter/MouseLeave 问题

> ID：13919032
> 
> 赞同：0
> 
> 时间：2012-12-17T17:31:02.483
> 
> 标签：jquery, mouseevent, jquery-hover

[http://screencast.com/t/2KncBbiroMz](http://screencast.com/t/2KncBbiroMz)

上面的链接更准确地向您展示了我遇到的问题。悬停有效，但是如果您将鼠标缓慢悬停在 LI 元素上，那么出现的链接会在您悬停链接时立即消失。

这是我的 HTML：

```
<div class="stats">
    <div class="container">
        <div class="row">
            <div class="span16">
                <ul class="user-stats">
                    <li id="class-points">
                        <span class="stats-content-container">
                            <span class="class-name"><%= class_room_name %></span><br />
                            <span class="large-headline"><%= total_game_points %></span> <span class="smaller-desc">points</span>
                        </span>
                        <a class="edit-class-name" href="#edit-class-name-modal" data-toggle="modal">edit name</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div> 
```

JavaScript：

```
​$(function(){
   $('ul.user-stats li#class-points').mouseenter(function() {
      $('a.edit-class-name', this).stop(true, true).show();
    }).mouseleave(function() {
      $('a.edit-class-name', this).stop(true, true).hide();
    }); 
});​​​ 
```

我什至用纯 CSS 解决方案尝试了这个，但我仍然遇到同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:41:12.797

问题似乎是 和 之间存在间隙`stats-content-container`，`edit-class-name`因此鼠标`class-points`在悬停之前实际上会在某些点离开`edit-class-name`。

也许您可以尝试将 mouseleave 放在`<ul class="user-stats">`包含整个部分的父元素上（也许？很难说没有看到实际的 html/css）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:42:05.063

您的编辑链接是否绝对定位？如果是这样，则 li 和锚点之间可能存在 1px 的间隙。需要查看 html 才能确定。

# javascript - 来自 GeoCode 的 Google Map Marker 有点偏离

> ID：13919036
> 
> 赞同：0
> 
> 时间：2012-12-17T17:31:08.683
> 
> 标签：javascript, html, maps

我从数据库中提取经纬度点，将它们组合起来，然后使用反向查找在我的地图上放置标记。所有的标记都被放置在地图上，但它们只是稍微偏离了一点。然后我去 maps.google.com 并将这些点放入搜索栏中，它们可以完美运行。有什么建议么？谢谢！功能如下：

```
 var lat = resultP[i].get("lat");
   var log = resultP[i].get("long");
   var latlng = new google.maps.LatLng(lat, log);
   geocoder.geocode( { 'latLng': latlng}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
    map.setCenter(results[0].geometry.location);
    var marker = new google.maps.Marker({
        map: map,
        position: results[0].geometry.location
    });
  } else {
    alert("Geocode was not successful for the following reason: " + status);
  } //end else 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:18:10.410

抱歉，如果我误解了某些内容，但我不明白您为什么需要对坐标进行地理编码。

地理编码是将地址转换为坐标的过程，反之亦然。如果您已经拥有坐标，则无需对其进行地理编码。地理编码的重点是将它们放在最近的道路上。

要在地图上显示标记，您可以跳过地理编码并执行以下操作：

```
var lat = resultP[i].get("lat");
var log = resultP[i].get("long");
var latlng = new google.maps.LatLng(lat, log);
var marker = new google.maps.Marker({
    map: map,
    position: latlng 
}); 
```

# c++ - QtCreator：进程 jom.exe 以代码 3 退出

> ID：13919043
> 
> 赞同：2
> 
> 时间：2012-12-17T17:31:38.853
> 
> 标签：c++, qt, mingw, qt-creator, build-error

我有一个可用的 C++/Qt 应用程序。我将 MinGW、Qt 和 Qt Creator 更新到最新版本，现在在编译时出现错误。这个错误似乎不是由于我的代码，而是由于构建系统。

例如：

```
17:11:15: Running steps for project MyTest...
17:11:15: Starting: "C:\Qt\qtcreator-2.6.0\bin\jom.exe" clean

This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information.
17:11:20: The process "C:\Qt\qtcreator-2.6.0\bin\jom.exe" exited with code 3. 
```

在项目设置中有消息“qmake：未设置 Qt 版本。无法运行 qmake。”

我的源代码正是您在创建新应用程序时自动获得的。

我用新的 Qt 和 QtCreator 目录更新了系统环境路径。

我不知道还能做什么...

谢谢！

```
---  
Windows 7
MinGW 
Qt 4.8.4
Qt Creator 2.6.0 (based on Qt 4.8.3 32 bit) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T00:24:52.457

请转到 Tools->Options->Build & Run->Kits 并检查您正在使用的套件中是否设置了 Qt 版本。

如果没有，请检查在 Tools->Options->Build & Run->Qt 版本中检测到的 Qt 版本创建者。是您要在那里使用的版本吗？如果没有：在此处添加。

然后返回套件页面并将其中一个套件设置为使用该版本。在那里仔细检查其他信息。

现在您应该能够构建您的项目了。您可能需要关闭/重新打开它。

初始设置似乎有点颠簸......但是一旦你克服了最初的障碍，它就会工作得很好:-(在下一次更新中有相当多的改进。检查 Qt 5 RC2 包，创建者已经包含在那里如果您好奇，包含大部分修复程序）。

# c - 希望信号量超过 SEM_VALUE_MAX

> ID：13919050
> 
> 赞同：1
> 
> 时间：2012-12-17T17:31:58.347
> 
> 标签：c, posix, max, semaphore

我正在开发一个带有关键部分的程序，所以我正在使用信号量。具体来说，POSIX 信号量： http: [//www.kernel.org/doc/man-pages/online/pages/man3/sem_close.3.html](http://www.kernel.org/doc/man-pages/online/pages/man3/sem_close.3.html)

根据[http://www.sbin.org/doc/glibc/libc_34.html](http://www.sbin.org/doc/glibc/libc_34.html)（搜索：macro SEM_VALUE_MAX），一般信号量可以设置一个最大值。在我的系统上，这大约是 32K。

不幸的是，我正在处理一些对时间敏感的代码（通过串行端口以 ~1MBit/s 的速度从 arduino 读取），因此由于一些实现细节，我想要更大的信号量。理想情况下，我希望它们至少能够达到 2^20，但我有点不清楚为什么会有上限。

有没有办法超过这个SEM_VALUE_MAX，得到一个值更大的信号量？我只能想到：

1.  重新定义 SEM_VALUE_MAX
    *   可能是一个可怕的想法；我认为那些 POSIX 人知道他们在做什么
2.  信号量指的是不止一个“块”数据
    *   现在，每个 up() 或 down() 只获取/释放一个“块”——一个无符号的短整数。
    *   我想一次处理多个可能会导致死锁。
3.  实现我自己的信号量。
    *   耗时/多余的工作
    *   便携性较差
4.  问问你很棒的人你的想法！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:36:20.400

难道你不能只使用信号量来保护对另一个用于跟踪分配的计数器的访问。这样，您不需要比访问器更多的信号量值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:24:15.157

你需要你的程序有多便携？`_POSIX_SEM_VALUE_MAX`是符合 POSIX的**最小值**。`SEM_VALUE_MAX`始终允许较大的值。glibc 和我熟悉的其他实际实现`SEM_VALUE_MAX`定义了更大的，通常等于`INT_MAX`. 您需要担心这一点的唯一方法是，如果您希望您的程序可移植到其他具有非常低`SEM_VALUE_MAX`.

# xml - XQuery：如何获得子字符串的不同值？

> ID：13919057
> 
> 赞同：1
> 
> 时间：2012-12-17T17:32:13.160
> 
> 标签：xml, xquery

我的 XML 文件是这样的：

```
<element id="1" time="05-08-2012T12:00">...</element>
<element id="2" time="05-08-2012T13:00">...</element>
<element id="3" time="05-08-2012T14:00">...</element>
...
<element id="13" time="06-08-2012T00:00">...</element>
<element id="14" time="06-08-2012T01:00">...</element> 
```

现在我想做的是：

*   创建一个仅包含不同日期的 HTML 选项框。我试过这个：

> //mesure/@date 中的 $d
> 
> 对于子字符串中的 $date($d,0,11)
> 
> 返回不同的值（$日期）

但它一直返回“05-08-2012”的次数与在 XML 文件中打印的次数一样多。

*   我还想知道如何更改我在 HTML 选项框中输入的值（例如“05-08-2012”将变为“2012 年 8 月 5 日”）。应该使用函数吗？

*   最后，我想保留包含给定日期的第一个元素的 id，这样当我在 HTML 选择框中选择它时，我可以使用该日期的所有元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:02:39.513

**使用**：

```
distinct-values(//measure/@date/substring-before(.,'T')) 
```

**要获得完整的所需结果，请使用**：

```
 let $months := ('January', 'February', 'March', 'April', 'May', 'June', 'July',
                  'August', 'September', 'October', 'November', 'December'),
    $dates := distinct-values(//measure/@date/substring-before(.,'T'))
 return
    for $date in $dates,
        $d in tokenize($date, '-')[1],
        $m in xs:integer(tokenize($date, '-')[2]),
        $y in tokenize($date, '-')[3]
     return
        ($d, $months[$m], $y, '&#xA;') 
```

**将此 XQuery 应用于以下 XML 文档的结果**：

```
<t>
    <measure id="1" date="05-08-2012T12:00">...</measure>
    <measure id="2" date="05-08-2012T13:00">...</measure>
    <measure id="3" date="05-08-2012T14:00">...</measure>
...
    <measure id="13" date="06-08-2012T00:00">...</measure>
    <measure id="14" date="06-08-2012T01:00">...</measure>
</t> 
```

**是**：

```
 05 August 2012 
 06 August 2012 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:40:46.077

那是因为如果你对 $date 应用 distinct-values，$date 只有一个值（并且一个值总是不同的）。您需要将其应用于整个序列，即

```
 distinct-values( for $d in //mesure/@date return  substring($d,0,11) ) 
```

要更改日期，最好使用 tokenize 函数来拆分组件，然后重新排序。

```
let $splitDate := tokenize("05-08-2012", "-"), $monthNames := ("January", "February" , ...) 
return concat($splitDate[1] cast as integer, " ", $monthNames[$splitDate[2] cast as integer], " ", $splitDate[3]) 
```

您可以尝试 xs:date(..) 将日期读取为真实日期，然后使用 XQuery 日期函数打印它，但是您输入的日期的组件顺序错误，因此 XQuery 可能无法解析它。 .

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-17T17:45:20.523

您需要在序列上获得不同的值：

```
distinct-values(//mesure/@date/substring(.,0,11)) 
```

可以使用[`fn:format-dateTime`](http://www.w3.org/TR/xpath-functions-30/#func-format-dateTime)xs:dateTime 值格式化日期：

```
format-dateTime($d, "[D] [MNn] [Y]")
=> 5 August 2012 
```

对于您的最后一个问题，您需要更具体地说明您希望对这些元素的 ID 做什么，并提供有关此数据的更多信息。（这可能应该是一个单独的问题）

# mysql - 将 SUBQUERY UNION SELECT 重写为 JOINS

> ID：13919059
> 
> 赞同：0
> 
> 时间：2012-12-17T17:32:19.950
> 
> 标签：mysql, sql, join, union

在我的查询中，我遇到了`FULLTEXT INDEX`无法分配给 a的问题`DERIVED TABLE`，这似乎是正常的。

示例演示了`data`不能被索引为`FULLTEXT`，但是`content`、`text`和`record`列已经被索引，`FULLTEXT`因为它们在“真实”表中

```
SELECT `data` FROM SELECT(
   SELECT `content` as `data` FROM `table1`
   UNION SELECT `text` as `data` FROM `table2`
   UNION SELECT `record` as `data` FROM `table3`
) as `search` 
```

在我的实际代码中，我使用`SELECT MATCH() AGAINST()`表中的分数并将它们联合在一起以获得`score`每个表的分数，这些 UNIONS 是子查询和第一级（主）SELECT 然后将这些 UNIONS 选择为派生表并从中计算分数，但是这是尚未完成。发生错误，指出引用没有索引。（就像上面的例子一样）。

这就是为什么我决定询问是否可以通过 JOINS 实现我的目标的原因。

这是我的实际（工作）代码：

```
SELECT *,MATCH(`data`) AGAINST('keyword' IN BOOLEAN MODE) as `relevance` 
FROM (                  
        SELECT CONCAT(`title`,' ',`content`) as `data`,`id`,'tmp_pages' as `table`, 
        MATCH(`title`,`content`) AGAINST ('keyword') AS `score` 
        FROM `tmp_pages` 
        WHERE MATCH(`title`,`content`) AGAINST ('keyword')
        UNION 
        SELECT CONCAT(`title`,' ',`content`) as `data`, `id`,'tmp_news' as `table`, 
        MATCH(`title`,`content`) 
        AGAINST ('keyword') AS `score` 
        FROM `tmp_news` 
        WHERE MATCH(`title`,`content`) AGAINST ('keyword')
        UNION 
        SELECT CONCAT(`title`,' ',`content`) as `data`,`id`,'tmp_comments' as `table`, 
        MATCH(`title`, `content`) 
        AGAINST ('keyword') AS `score` FROM `tmp_comments` 
        WHERE MATCH(`title`, `content`) AGAINST('keyword')
        UNION 
        SELECT CONCAT(`manufacturer`,' ',`model`,' ',`location`,' ',`other`,' ',`contact`) as `data`,`id`,'tmp_auction_auto' as `table`,
        MATCH(`manufacturer`,`model`,`location`,`other`,`contact`) AGAINST ('keyword') AS `score` 
        FROM `tmp_auction_auto` 
        WHERE MATCH(`manufacturer`,`model`,`location`,`other`,`contact`) 
        AGAINST ('keyword')
) as `search` ORDER BY `relevance` DESC 
```

我想知道是否可以将这部分转换`JOIN`为查询类型，并使其按预期运行。如果是这样，我会问如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:03:04.253

我认为您不能将其作为 JOIN 来执行，因为这些表是不相关的。但是，您应该能够通过简单地`relevance`从外部查询中省略列并按以下顺序排序来消除错误`score`：

```
SELECT *
FROM (                  
        SELECT CONCAT(`title`,' ',`content`) as `data`,`id`,'tmp_pages' as `table`, 
        MATCH(`title`,`content`) AGAINST ('keyword') AS `score` 
        FROM `tmp_pages` 
        WHERE MATCH(`title`,`content`) AGAINST ('keyword')
        UNION 
        SELECT CONCAT(`title`,' ',`content`) as `data`, `id`,'tmp_news' as `table`, 
        MATCH(`title`,`content`) 
        AGAINST ('keyword') AS `score` 
        FROM `tmp_news` 
        WHERE MATCH(`title`,`content`) AGAINST ('keyword')
        UNION 
        SELECT CONCAT(`title`,' ',`content`) as `data`,`id`,'tmp_comments' as `table`, 
        MATCH(`title`, `content`) 
        AGAINST ('keyword') AS `score` FROM `tmp_comments` 
        WHERE MATCH(`title`, `content`) AGAINST('keyword')
        UNION 
        SELECT CONCAT(`manufacturer`,' ',`model`,' ',`location`,' ',`other`,' ',`contact`) as `data`,`id`,'tmp_auction_auto' as `table`,
        MATCH(`manufacturer`,`model`,`location`,`other`,`contact`) AGAINST ('keyword') AS `score` 
        FROM `tmp_auction_auto` 
        WHERE MATCH(`manufacturer`,`model`,`location`,`other`,`contact`) 
        AGAINST ('keyword')
) as `search` ORDER BY `score` DESC 
```

# java - 如何使用 Robolectric 验证基本身份验证？

> ID：13919065
> 
> 赞同：1
> 
> 时间：2012-12-17T17:32:49.047
> 
> 标签：java, android, unit-testing, http, robolectric

我正在使用 Robolectric，我可以成功验证测试代码是否对正确的 URL 进行了 HTTP 调用，这太棒了！但是，我使用的是基本身份验证。是否可以验证 HTTP 调用是否设置了正确的身份验证设置？

# asp.net-mvc - AutoMapper：是否映射给?

> ID：13919068
> 
> 赞同：20
> 
> 时间：2012-12-17T17:33:05.983
> 
> 标签：asp.net-mvc, automapper

使用**Automapper**我创建了一个简单的地图：

```
Mapper.CreateMap<MyCustomerDTO, YourCustomerDTO>() 
```

我也经常需要**另辟蹊径**。我是否还需要以其他方式创建映射，还是 Automapper 会根据上述映射推断它？

```
Mapper.CreateMap<YourCustomerDTO, MyCustomerDTO>()   //Needed? 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-17T17:51:18.210

这是[我需要以两种方式创建 automapper createmap 的副本吗？](https://stackoverflow.com/questions/6185026/do-i-need-to-create-automapper-createmap-both-ways)

`.ReverseMap()` [注意这里](https://stackoverflow.com/a/11673804/1505426)的答案。

请注意，这`.ReverseMap()`是用于基本映射。如果您需要使用选项（例如特定 `ForMember`映射），则需要创建自定义反向映射。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-17T17:52:34.560

不，您必须创建双向映射。双向映射的一个很好的辅助方法可能是：

```
 protected virtual void ViceVersa<T1, T2>()
        {
            Mapper.CreateMap<T1, T2>();
            Mapper.CreateMap<T2, T1>();
        } 
```

然后像这样使用它：

```
ViceVersa<T1, T2>(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T17:35:50.303

您还需要创建第二个映射。尝试在没有第二次映射的情况下运行您的应用程序的简单测试会给您一个运行时错误

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-20T16:38:14.397

我在使用 AutoMapper 时遇到了同样的问题，@Behnam-Esmaili 是一个很好的答案，但可以改进。

您可以实现一个扩展方法，`IMapperConfigurationExpression`该方法将执行这种双向映射，并且还期望`Action<IMappingExpression<T, Y>>`在尝试为这两种类型配置映射时使用两个可选参数 ( )。

```
public static class ModelMapper
{
    private static readonly IMapper _mapper;

    static ModelMapper()
    {
        var mapperConfiguration = new MapperConfiguration(config =>
        {
            config.CreateTwoWayMap<CustomerViewModel, Customer>(
                secondExpression: (exp) => exp.ForMember((source) => source.CustomerEmail, opt => opt.MapFrom(src => src.Email)));
        });

        _mapper = mapperConfiguration.CreateMapper();
    }

    public static void CreateTwoWayMap<T, Y>(this IMapperConfigurationExpression config, 
        Action<IMappingExpression<T, Y>> firstExpression = null,
        Action<IMappingExpression<Y, T>> secondExpression = null)
    {
        var mapT = config.CreateMap<T, Y>();
        var mapY = config.CreateMap<Y, T>();

        firstExpression?.Invoke(mapT);
        secondExpression?.Invoke(mapY);
    }

    public static T Map<T>(object model)
    {
        return _mapper.Map<T>(model);
    }
} 
```

上面的实现是实现它的一种方式，但是它可以有不同的设计。

# ruby-on-rails - rails 3 routes 堆栈级别太深设计

> ID：13919070
> 
> 赞同：11
> 
> 时间：2012-12-17T17:33:10.773
> 
> 标签：ruby-on-rails, devise

我收到有关我的路线文件的此错误

```
SystemStackError (stack level too deep):
  actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:70

  Rendered /Users/duy/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.5ms)
  Rendered /Users/duy/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/duy/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (19.9ms) 
```

我可以隔离有问题的代码，但不明白是什么造成了无限循环：

```
 devise_for :users, :controllers => { :registrations => "registrations", :sessions => "sessions", :omniauth_callbacks => "users/omniauth_callbacks" }
  devise_scope :user do
    match '/sessions/simulate_user/:id' => 'sessions#simulate_user', :as => :simulate_user_sessions
    match '/sessions/leave_simulation_mode' => 'sessions#leave_simulation_mode', :as => :leave_simulation_mode_sessions
    get "user_confirmation", :to => "devise/confirmations#create"
    get "after_confirmation", :to => "challenges#index"
  end 
```

任何帮助将不胜感激！

编辑：

```
class SessionsController < Devise::SessionsController

  def new

    @after_sign_in_page = params[:after_sign_in_page] if params[:after_sign_in_page]
    super
  end

  def create
    params[:user][:email].downcase!
    super
  end

  def simulate_user
    if can? :simulate_user, User
      admin = current_user.id
      sign_out
      @user = User.find(params[:id])
      if sign_in @user
        session[:simulation_for] = admin
        redirect_to request.referer
      else
        flash[:notice] = "Something went wrong"
        redirect_to action: "leave_simulation_mode"
      end
    end
  end

  def leave_simulation_mode
    @user = User.find(session[:simulation_for])
    sign_out
    if sign_in @user
      session[:simulation_for] = nil
    else
      flash[:notice] = "something went wrong..."
    end
    redirect_to request.referer
  end

end
class ChallengesController < ApplicationController
      def index
        params[:format] = "html" unless params[:subaction].nil?
        @video = true unless user_signed_in?
        if current_user
          @current_page = params[:page] ? params[:page].to_i : 1
          @columns = params[:cols] ? params[:cols] : 2
          @keyword = params[:keyword]
          @search = true if params[:search] == "1"
          @challenges = Challenge.is_open.where(id: current_user.challenges.filtered(params[:keyword],params[:user],params[:expertize]).collect(&:root_id).uniq)
          logger.debug "Challenges found: #{@challenges.count}"
          @users = User.scoped
          @expertizes = Expertize.all
        end

        respond_to do |format|
          format.html {
            if current_user
              if current_user.challenges.waiting_for_approval.count == 1 and @challenges.count == 1
                redirect_to challenge_path(current_user.challenges.waiting_for_approval.first, subaction: "description")
                return
                logger.debug "REdirect called"
              else
                @challenges = @challenges.page(1).per(@current_page.to_i * 10).order('children_count+tasks_count desc')
              end
            end
            render
            }
          format.json { render json: @challenges }
          format.js {
            @challenges = @challenges.page(@current_page).per(10).order('children_count+tasks_count desc')
            render
          }
        end
      end
end 
```

另外，我忘了提到当我重新启动本地服务器时，它工作正常。每次我更改我的 routes.rb 文件时，我都会收到此错误。然后我必须重新启动瘦服务器，然后我才能继续工作......

编辑2：

rake 路由输出：[h​​ttps ://www.dropbox.com/s/knmkk1f54vx47yj/rake%20routes.rtf](https://www.dropbox.com/s/knmkk1f54vx47yj/rake%20routes.rtf)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T07:28:25.060

我和你有同样的问题。这一定是某些宝石引起的问题。

就像我将“devise_invitable”与“devise”一起使用。然后每次我在开发环境中修改路由文件。它将从“lib/action_dispatch/middleware/reloader.rb”引发“堆栈太深”错误。

看完你的帖子。我尝试评论 devise_for :users。重新加载路线就可以了。

然后我尝试从 Gemfile 中删除“devise_invitable”。

修改后。它不会引发错误。这发生在我使用 Rails 3.2.9 之后。我有另一个项目< Rails 3.2.9，两个宝石工作正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T11:04:08.120

我只是在猜测，但是您构造`SessionsController#simulate_user`并`SessionsController#leave_simulation_mode`公开了无限重定向循环。

如果您访问 url`/simulate_user`并且登录不起作用（其他路径），您将重定向到`/leave_simulation_mode`. 现在`leave_simulation_mode`，无论退出/登录是否有效，您都会`/simulate_user`再次重定向回，因为`redirect_to request.referer`.

现在重新`/simulate_user`登录，用户再次登录，再次失败 --> 再次重定向。

如果某些东西阻止您的模拟用户正确登录，您将获得一个无限重定向循环：

```
simulate_user -> leave_simulation_mode -> simulate_user -> leave_simulation_mode --> ... 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T13:56:05.947

将所有猴子补丁移动到初始化程序。

由于 ActionDispatch::Request 的猴子补丁，我遇到了同样的问题。补丁被放置到基本控制器。当我将其替换为初始化程序时，问题已解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T22:51:47.990

从其他答案中不清楚，但这是 devise_invitable gem 中的一个错误，已在 1.1.5 版中修复。这是 GitHub 上的问题：[https ://github.com/scambra/devise_invitable/issues/252](https://github.com/scambra/devise_invitable/issues/252)

# batch-file - 批处理代码读取文件并检查指定大小的所有记录是否也没有重复

> ID：13919072
> 
> 赞同：0
> 
> 时间：2012-12-17T17:33:25.367
> 
> 标签：batch-file

我有这段代码对我的输入文件 abc.txt 进行排序并告诉我是否有任何重复，我需要修改这段代码以告诉我是否有任何记录超过了 reclen 指定的大小。

```
@echo off
rem setlocal enabledelayedexpansion

set inputfile=abc.txt
set outputfile=text2.txt
set reclen=100
echo File to be processed
echo.
type %inputfile%
echo.
if exist sorted.txt del sorted.txt
sort %inputfile% /O sorted.txt

if exist %outputfile% del %outputfile%
echo Duplicates are as follows>>%outputfile%
set lastline=
for /f "delims==" %%L in (sorted.txt) do (
set thisline=%%L
if "!thisline!"=="!lastline!" echo !thisline!>>%outputfile%
    set lastline=%%L
)

pause 
```

删除排序.txt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:00:42.033

要检查字符串是否超过长度限制，只需测试长度限制的子字符串是否与原始字符串不匹配。

```
if "!thisline:~0,%reclen%!" neq "!thisline!" echo Line length exceeded 
```

这是一个完整的工作解决方案

```
@echo off
setlocal enableDelayedExpansion

set "inputfile=abc.txt"
set "outputfile=text2.txt"
set reclen=100
echo File to be processed
echo(
type "%inputfile%"
echo(
if exist sorted.txt del sorted.txt
sort %inputfile% /O sorted.txt
set "lastline="
> "%outputfile%" (
  for /f "delims==" %%L in (sorted.txt) do (
    set "thisline=%%L"
    if "!thisline!" equ "!lastline!" echo(DUPLICATE: !thisline!
    if "!thisline:~0,%reclen%!" neq "!thisline!" echo( TOO LONG: !thisline!
    set "lastline=%%L"
  )
)
del sorted.txt
type "%outputfile%"
pause 
```

请注意，如果您的数据包含`!`. 这可以通过在循环中打开和关闭延迟扩展来解决。

```
@echo off
setlocal disableDelayedExpansion

set "inputfile=abc.txt"
set "outputfile=text2.txt"
set reclen=100
echo File to be processed
echo(
type "%inputfile%"
echo(
if exist sorted.txt del sorted.txt
sort %inputfile% /O sorted.txt
set "lastline="
> "%outputfile%" (
  for /f "delims==" %%L in (sorted.txt) do (
    set "thisline=%%L"
    setlocal enableDelayedExpansion
    if "!thisline!" equ "!lastline!" echo(DUPLICATE: !thisline!
    if "!thisline:~0,%reclen%!" neq "!thisline!" echo( TOO LONG: !thisline!
    endlocal
    set "lastline=%%L"
  )
)
del sorted.txt
type "%outputfile%"
pause 
```

最后，根据 OP 在评论中的要求，这里是一个版本，用于标识与 reclen 指定的长度不匹配的行。它只需要对以前的版本进行 2 处小的更改。

```
@echo off
setlocal disableDelayedExpansion

set "inputfile=abc.txt"
set "outputfile=text2.txt"
set reclen=100
echo File to be processed
echo(
type "%inputfile%"
echo(
if exist sorted.txt del sorted.txt
sort %inputfile% /O sorted.txt
set "lastline="
> "%outputfile%" (
  for /f "delims==" %%L in (sorted.txt) do (
    set "thisline=%%L"
    set "testline=%%Lx"
    setlocal enableDelayedExpansion
    if "!thisline!" equ "!lastline!" echo( DUPLICATE: !thisline!
    if "!testline:~0,%reclen%!" neq "!thisline!" echo(BAD LENGTH: !thisline!
    endlocal
    set "lastline=%%L"
  )
)
del sorted.txt
type "%outputfile%"
pause 
```

如果该行比 reclen 长，则子字符串将截断该值，并且与原始值不匹配。

如果该行的长度与 reclen 完全相同，则子字符串只会修剪`x`，并且它将与原始字符串匹配。

如果该行比 reclen 短，则子字符串不会删除`x`，并且不会与原始字符串匹配。

# jquery - 从第三方页面中的 XHR 请求参与会话

> ID：13919077
> 
> 赞同：1
> 
> 时间：2012-12-17T17:33:35.303
> 
> 标签：jquery, http, cookies, cross-domain

我在 foo.com 有一个应用程序，它为“插件”小部件提供 javascript，并成功接收并响应来自脚本的 JSON API 请求。该脚本由 foo.com 提供，但嵌入到 bar.com。

JSON API、插件脚本和 JSESSIONID cookie 都是来自 foo.com 的第一方，执行上下文是第三方 bar.com。

**问：**我的问题是 foo.com 的 JSESSIONID 没有发送回服务器，所以插件脚本（来自 foo.com）总是获得一个新的会话，并且不能保持登录到 foo.com。

对于将 JSESSIONID 发送回 foo.com 的任何帮助，我表示感谢。

**一些细节：**

jQuery 由 bar.com 提供，并被 foo.com 上的脚本用于发送请求。

在我的开发平台上，foo.com 和 bar.com 在不同的非标准端口（84 和 8080）上运行。

通常，相同的来源策略似乎适用，并且在 foo.com 上将 Access-Control-Allow-Origin 设置为 * 以允许 bar.com 访问 foo.com。

只要来自插件的 HTTP 请求包含 JSESSIONID，bar.com 甚至来自 foo.com 的脚本都需要读取 cookie。

# zend-framework - 如何将 Zend 本地化/翻译数组转换为 gettext？

> ID：13919080
> 
> 赞同：1
> 
> 时间：2012-12-17T17:33:45.240
> 
> 标签：zend-framework, localization, translation, gettext, zend-translate

我的多语言站点已经成功地使用了 Zend 翻译的“数组”方法。

我想从该方法转换为“gettext”方法，因为我读过 gettext 是优越的。

我试过使用[http://docs.translatehouse.org/projects/translate-toolkit/en/latest/commands/php2po.html](http://docs.translatehouse.org/projects/translate-toolkit/en/latest/commands/php2po.html)但无法让它工作。

我认为这并不意味着将 Zend 数组作为输入来处理。

我的 Zend 文件（有效）如下所示：

```
<?php

return array(    
    'choose your favorite stores' => 'Choose your %1$sfavorite stores%2$s',
    'P.S. If you ever have question' => 'P.S. If you ever have questions, %1$semail us%2$s any time.',
    'You can also find quick answer' => 'You can also find quick answers on our %1$sHelp page%2$s.',
    'Earn X cash' => '%1$sEarn 1-30%% cash back%2$s, get money-saving coupons, and find the best price on every purchase at %3$s2,500+ stores%4$s.'
); 
```

（但它要长得多，而且我有多种语言，每种语言都有自己的 PHP 文件。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:14:50.740

使用您为我提供转换的代码段。

```
$ php2po en.php en.po -t en.php 
processing 1 files...
[###########################################] 100%

$ cat en.po 
#. extracted from en.php, en.php
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2012-12-19 10:08+0200\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"X-Generator: Translate Toolkit 1.9.1-pre\n"

#: return+array%28-%3E%27choose+your+favorite+stores%27
msgid "Choose your %1$sfavorite stores%2$s"
msgstr "Choose your %1$sfavorite stores%2$s"

#: return+array%28-%3E%27P.S.+If+you+ever+have+question%27
msgid "P.S. If you ever have questions, %1$semail us%2$s any time."
msgstr "P.S. If you ever have questions, %1$semail us%2$s any time."

#: return+array%28-%3E%27You+can+also+find+quick+answer%27
msgid "You can also find quick answers on our %1$sHelp page%2$s."
msgstr "You can also find quick answers on our %1$sHelp page%2$s." 
```

我正在使用[git master](https://github.com/translate/translate)的翻译工具包版本，也许你应该尝试一下。

# matlab - MatLab 全局函数问题

> ID：13919089
> 
> 赞同：0
> 
> 时间：2012-12-17T17:34:18.170
> 
> 标签：matlab, user-interface

我正在学习 MatLab 并遇到了障碍。

我有一个`interface.fig`文件`interface.m`用作我的“主”GUI 窗口。从那里另一个文件；`bright.m`叫做。

文件bright需要更新主文件中的全局变量以及调用函数，我已经把全局变量计算出来了，但是不能调用函数。

尝试了一切，看着做这样的事情：

```
reDisplay();
evalin('base','reDisplay()');
interface.reDisplay();
interface>reDisplay(); 
```

但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:45:49.510

只有 M 文件中的第一个函数可以从该文件外部调用。如果您希望您的函数可以全局访问，那么您需要将它们保存在独立文件中。

如果您需要在这些函数之间全局访问状态，请将它们作为参数传递或考虑使用面向对象的方法来解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:45:36.597

如果 Matlab 中的一个函数是在一个文件名与函数名不同的 m 文件**内**定义的 - 那么就无法从其 m 文件外部调用该函数。

为了让你的`reDisplay`函数对 可见`bright.m`，你应该在它自己的名为的 m 文件中拥有这个函数`reDisplay.m`

# c# - RhinoMocks - 测试引用类型的属性值

> ID：13919092
> 
> 赞同：1
> 
> 时间：2012-12-17T17:34:26.797
> 
> 标签：c#, unit-testing, rhino-mocks

我需要测试执行函数的逻辑，之后它会更改参数的属性，然后使用更新的参数执行相同的函数。

为了帮助说明这一点，这里有一些示例代码：

接口： `public interface IWorker` { `MyObjectB DoWork(MyObject myObject);` }

我的对象B： `public class MyObjectB` { `public string Message { get; set; }` }

执行：

```
public MyObjectB DoWork(IWorker worker, MyObject myObject)
{
    worker.DoWork(myObject);
    myObject.Name = "PersonB";
    worker.DoWork(myObject);
    return new MyObjectB() { Message = "Done" };
} 
```

测试：

```
 public void RhinoMocksSampleTest()
    {
     var workerStub = MockRepository.GenerateStub<IWorker>();
     workerStub.Stub(n => n.DoWork(Arg<MyObject>.Is.Anything));

     var myObj = new MyObject { Id = 1, Name = "PersonA" };

     var p = new Program();
     p.DoWork(workerStub, myObj);

     workerStub.AssertWasCalled(d => d.DoWork(Arg<MyObject>.Matches(r => r.Name == "PersonA")));

     workerStub.AssertWasCalled(d => d.DoWork(Arg<MyObject>.Matches(r => r.Name == "PersonB")));
    } 
```

第一个 AssertWasCalled 失败，因为值为“PersonB”。是否有一个函数/调用可以用来测试第一次调用的对象状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:52:51.700

以下是我将如何做你想做的事情：

```
public void RhinoMocksSampleTest()
{
    var workerMock = MockRepository.GenerateMock<IWorker>();
    workerMock.Expect(d => d.DoWork(Arg<MyObject>.Matches(r => r.Name == "PersonA")));
    workerMock.Expect(d => d.DoWork(Arg<MyObject>.Matches(r => r.Name == "PersonB")));

    var myObj = new MyObject { Id = 1, Name = "PersonA" };
    var p = new Program();
    p.DoWork(workerMock , myObj);

    workerMock.VerifyAllExpectations();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:10:02.523

除了 aprescott 提供的很好的答案之外，我还可以展示另一种在某些情况下可能有用的方法：

这个想法是将您感兴趣的值手动存储到某个集合中。然后您将能够断言该集合包含所需的序列。

```
 public void MyTest()
    {
        // that is list which will contain passed names
        var actualNames = new List<string>();

        // stub only saves passed Name property into list
        var workerStub = MockRepository.GenerateStub<IWorker>();
        workerStub
            .Stub(w => w.DoWork(Arg<MyObject>.Is.Anything))
            .Do((Action<MyObject>)(mo => actualNames.Add(mo.Name)));

        var myObject = new MyObject { Name = "PersonA" };
        var target = new MyWorker();

        target.DoWork(workerStub, myObject);

        // here we do assert that names list contains what is required
        Assert.That(actualNames, Is.EqualTo(new[] { "PersonA", "PersonB" }));
    } 
```

PS。是的，它适用于您需要检查呼叫顺序是否正确的情况:)

# android - 当我为它设置动画时，适配器“保持”以查看

> ID：13919094
> 
> 赞同：0
> 
> 时间：2012-12-17T17:34:27.390
> 
> 标签：android, gridview, android-listview, android-arrayadapter

我正在为 GridView 使用自定义适配器，并为其提供自定义数据类的 ArrayList。

这个想法是，当用户在一个项目上按下 (+) 时，它的数字会上升，当他们按下 (-) 时，它就会下降。

这与以下代码完美配合：

活动：

```
//playerLayouts is the ArrayList of my Player class.
playerLayouts.get(position).changeLife(-1); //All this does is decrement life by 1.
adapter.notifyDataSetChanged(); 
```

适配器：

```
holder.textLife = (TextView) row.findViewById(R.id.player.text_life);
...
holder.textLife.setText(Integer.toString(player.life)); 
```

所以这很好用。我按加号，它上升，我按减号，它下降。一切都很好。

但是，如果我想在视图中放一个小“-1”弹出窗口，显示已减去 1，并且我为视图设置动画，就会出现问题。

```
...
//textLifeChange is a different TextView in the layout. Also, I'm using NineOldAndroids.
textLifeChange.setText(Integer.toString(player.lifeChange));
animate(holder.textLifeChange).setDuration(2000).alpha(0); //There are a few more animations in addition to this one. 
```

基本上，无论何时播放动画（整整两秒），视图都不再进行更新。

例如，说“生命”= 20。我按 (-)，现在它显示 19，我的小弹出窗口显示“-1”并淡出。然后，仅仅一秒钟后，我再次击中（-1）。没发生什么事。“生活” TextView 仍然显示 19，并且弹出窗口只是继续播放其动画，没有任何变化。所以我再等一秒钟，动画就完成了。现在，如果我再次按 (-)，它会再次正确更新。

有趣的是，如果我记录我的`setText`方法，我会看到*它正在*使用正确的数字进行更新，并且`getView`正在被调用，但它只是......没有明显更新。

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:57:20.720

我敢说您的动画占用了 UI 线程，因此阻止了界面其他部分的更改。这个答案应该可以帮助您：

[Android：运行线程阻止动画启动](https://stackoverflow.com/questions/7289295/android-running-thread-preventing-animation-from-starting)

# encryption - TCL des：以标准 ascii 字符返回加密短语

> ID：13919099
> 
> 赞同：2
> 
> 时间：2012-12-17T17:34:38.683
> 
> 标签：encryption, ascii, tcl, des

我在 TCL 中使用 DES 来加密一些短语，我想将这些加密的短语存储在一些我需要轻松操作的 ascii 文件中。因此，我希望“加密短语”仅由标准 ascii 字符组成（最好没有空格）。

我正在使用这样的东西来加密：

```
set encrypted [ DES:des -dir encrypt -key "abcdefgh" "This_phrase" ] 
```

我希望“加密”成为标准的 ascii 代码，而不是如果显示的话，甚至可能会破坏我的终端。

非常感谢你。莱安德罗。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T17:57:11.600

您可以替换所有可能具有特殊含义的字符（除 a-zA-Z0-9 等之外的所有字符）或使用例如 base64 对其进行编码。

```
set encrypted [base64::encode -wrapchar {} [DES:des -dir encrypt -key abcdefgh "This_phrase"]] 
```

如果要对其进行解码，则需要剥离额外的层（base64、转义序列编码或用于将二进制数据转换为 ascii 的任何内容）。

# java - 自定义 JLabel 字体太小

> ID：13919100
> 
> 赞同：2
> 
> 时间：2012-12-17T17:34:40.290
> 
> 标签：java, swing, fonts

我试图在 JLabel 中显示自定义字体，但是当我创建它时，它显示为非常小的文本。我什至无法判断它是否使用了我指定的字体，因为文本太小了。这是[我使用的字体](http://www.abstractfonts.com/category/9/Futuristic)。那么我在做什么导致字体如此之小？

```
package sscce;

import java.awt.Font;
import java.awt.FontFormatException;
import java.io.File;
import java.io.IOException;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class Main extends JFrame{

    public Main(){
        this.setSize(300, 300);
        this.setResizable(false);
        this.setLocationRelativeTo(null);
        this.setVisible(true);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        GameFont fnt = new GameFont("/home/ryan/Documents/Java/Space Shooters/src/media/fonts/future.ttf", 20);
        Label lbl = fnt.createText("Level 1 asdf sadf saf saf sf ");

        this.add(lbl);
    }

    public static void main(String[] args){
        Main run = new Main();
    }

    public class GameFont{

        protected Font font;

        public GameFont(String filename, int fontSize){
            try{
                File fontFile = new File(filename);
                font = Font.createFont(Font.TRUETYPE_FONT, fontFile);
                font.deriveFont(fontSize);
            }catch(FontFormatException | IOException e){
            }
        }

        public Label createText(String text){
            Label lbl = new Label(font);
            lbl.setText(text);
            return lbl;
        }
    }

    public class Label extends JLabel{

        public Label(Font font){
            this.setFont(font);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:40:16.843

请再看一下[Font API](http://docs.oracle.com/javase/7/docs/api/java/awt/Font.html)，deriveFont(...) 方法。你想传入一个***float***，而不是一个***int***作为大小，因为如果传入一个 int 参数，该方法将期望这意味着设置一个字体的*样式*（粗体、斜体、下划线），而不是它的大小。您还需要使用该方法*返回*`deriveFont(...)`的 Font 。

所以改变这个：

```
 public GameFont(String filename, int fontSize){
        try{
            File fontFile = new File(filename);
            font = Font.createFont(Font.TRUETYPE_FONT, fontFile);
            font.deriveFont(fontSize);
        }catch(FontFormatException | IOException e){
        }
    } 
```

对此：

```
 public GameFont(String filename, float fontSize){
        try{
            File fontFile = new File(filename);
            font = Font.createFont(Font.TRUETYPE_FONT, fontFile);
            font = font.deriveFont(fontSize);
        }catch(FontFormatException | IOException e){ 
           e.printStackTrace(); // ****
        }
    } 
```

此外，永远不要***像***您正在做的那样忽略异常！

# c# - 在 WinRT 代码中绘制图像的画布

> ID：13919106
> 
> 赞同：0
> 
> 时间：2012-12-17T17:35:05.473
> 
> 标签：c#, windows-8, windows-runtime, windows-store-apps, windows-store

在 Win8 Metro 应用程序中，我有一个包含图像和块的画布，我想将其保存为使用异步显示为图像，对代码有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:40:24.160

恐怕无法完成 - WinRT 无法将 xaml 保存到图像中。

最好的办法是手工制作自己的位图，但这需要大量工作。

对不起，我本来可以用这个功能来做的！

# xaml - Win8 应用程序疑难解答：我的 XAML 定义的页面字段何时初始化？

> ID：13919107
> 
> 赞同：0
> 
> 时间：2012-12-17T17:35:07.700
> 
> 标签：xaml, mvvm, windows-8

我正在尝试 MVVM 模式，但遇到了问题。

这是我实例化模型的方式：

```
<common:LayoutAwarePage
    ...
    ...(omitted boiler plate generated lines here)
    ...
    ...
    mc:Ignorable="d">
    <common:LayoutAwarePage.DataContext>
        <local:TextGameClientModel x:Name="textGameClientModel"/>
    </common:LayoutAwarePage.DataContext> 
```

但是当我尝试使用它时，我得到了*NullReferenceException*，因为*this.textGameClientModel*为 NULL：

```
public MainPage()
{
    this.InitializeComponent();
    this.textGameClientModel.runsPublished += textGameClientModel_runsPublished;
} 
```

我还在 Page 的*OnNavigateTo*处理程序和*OnLoaded*处理程序中尝试了同一行，但结果相同。

**连接我的事件处理程序的正确位置在哪里？**

（请不要让我在 MVVM 项目中的代码隐藏分散您的注意力。我对 RichTextBox 的使用迫使我在线条之外稍微着色。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:42:09.603

实际上，我最近写了一个关于[WPF 创建步骤](https://stackoverflow.com/a/13861398/302677)的答案，但是在这种情况下这不是问题。

在这种情况下，您`DataContext`在 XAML 中设置 ，但这与设置`textGameClientModel`属性不同

你需要做这样的事情来设置属性等于你的`DataContext`第一个

```
this.textGameClientModel = this.DataContext as GameClientModel; 
```

或者只是将您`DataContext`作为您的班级来设置活动

```
((GameClientModel)this.DataContext).runsPublished += textGameClientModel_runsPublished; 
```

作为旁注，我从不建议将其硬编码`DataContext`为`UserControl`您所拥有的。通过这样做，您可以防止任何其他东西`DataContext`被传递给`UserControl`，这违背了 WPF/MVVM 的最大优势之一，即具有单独的 UI 和数据层。

# java - 依赖注入 - 正确使用接口？

> ID：13919108
> 
> 赞同：2
> 
> 时间：2012-12-17T17:35:09.917
> 
> 标签：java, dependency-injection, inversion-of-control

我一直在阅读有关 DI 和最佳实践的信息，但仍然没有找到这个问题的答案。什么时候应该使用接口？

1.  一些开发人员建议为每个被注入的对象添加接口。这将构成一个模块化应用程序。
2.  其他一些人反对这一点。

所以我的问题是哪一个是正确的？

**编辑：**

下面是两个方面，我还是没有看到使用接口的好处。在这两种情况下，我都可以轻松地模拟类并更改实现

使用接口

```
bind(IUserStorage.class).to(UserStorage.class);
// Unit test
bind(IUserStorage.class).to(Mock(UserStorage.class)); 
```

不使用接口

```
bind(UserStorage.class).to(UserStorage.class);
// Unit test
bind(UserStorage.class).to(Mock(UserStorage.class)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T17:36:53.300

我不敢相信使用接口违反 OOP 原则！

在这种情况下，我肯定会使用接口。这意味着您将组件松散地耦合在一起，并且可以轻松地模拟和/或替代替代方案。许多 DI 框架将使用这些接口来提供附加功能（例如，创建映射到真实对象的代理对象，但具有附加功能）。

因此，除了最琐碎的注入对象外，我会尝试使用所有接口。在某个阶段，您将想要利用可替代性、框架代码生成等，而改进接口使用是一个额外的痛苦，在项目开始时很容易避免。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T17:50:37.320

**基于接口的设计**是 IoC 的基石，这里是基于接口设计的简短描述（对不起，我引用了我自己的博客，但我刚刚完成了[一篇](http://www.megustaulises.com/2012/12/what-is-inversion-of-control.html)关于此的文章，这是我的 MS 论文的摘录）：

> 南迪甘等人。将基于接口的设计定义为“一种开发面向对象系统的方法，在这种方法中，人们在设计中尽可能有意识地、主动地定义和使用接口，以获得使用接口设计的好处”[Nan09]。基于接口设计的应用程序遵循“程序到接口，而不是实现”的原则。这一原则为最终的系统 [Dav03] 带来了以下好处：**灵活性**（描述了系统对更改的鲁棒性）、**可扩展性**（系统可以轻松地容纳添加）和可**插入性**（允许替换具有相同接口的对象的能力）运行）。

将界面设计与**IoC**混合后，您将获得以下好处：

1.  任务与实现**分离**。
2.  增加**模块性**，其中模块仅依赖于其合同（接口）的其他模块。
3.  增加**可插拔性**并且更换模块不会对其他模块产生级联影响。

为了回答你的问题，我会为不同类型的模块使用接口。例如，每个服务或存储库一个。

我不为控制器或模型类（MVC 应用程序）创建接口。

作为副作用，所有这些都有助于**测试**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T17:42:21.897

如果您使用接口或至少使用抽象/可继承类，您可以通过在 DI/IoC 配置中轻松交换实现（注入另一个类）来更改程序的行为。 **使用接口是一种很好的做法（恕我直言）。如果您正在编写需要模拟的单元测试，这一点尤其重要。**如果您不使用接口，那么编写具有良好覆盖率的 UnitTest（并不是说在大多数“现实世界”情况下是不可能的）要困难得多。

**如果注入的部分有可能发生变化，**我认为您应该使用接口。扩展您的实现应该很容易，请参阅[Open-Closed-Principle](http://en.wikipedia.org/wiki/Open/closed_principle)。=> 这将需要交换模块/部件/实现...问问自己如果您的类没有要覆盖的虚函数并且您被迫更改实现会发生什么。

我**至少会为**你的代码的公共类/部分（其他程序员会使用的部分）使用接口。

看看你的样品。**问题出在接线部分，而不仅仅是将**类绑定为接口的（默认）实现（绑定有效，但接线可能会中断）。

例如，如果您有 2 个实现（此处的 C# 示例，在 Java 等中也应该相同）：

```
public interface IUserStorage
{
  void Write(object something);
}

public class UserStorageTextFile : IUserStorage
{
   public void Write(object something) { ... }; // stores to text file
}

public class UserStorageDB : IUserStorage
{
   public void Write(object something) { ... }; // stores to DB
}

public class MyStorageClient
{
   public MyStorageClient(IUserStorage storage) { ... } // copy to private field and use it etc.
} 
```

根据您的 IoC，将 MyStorageClient 的实例连接到您的 IUserStorage 绑定应该很容易。

```
bind(IUserStorage.class).to(UserStorageDB.class); // Java sample, eh? 
```

但是，如果您的 MyStorageClient 已经被迫使用数据库...

```
public class MyStorageClient
{
   public MyStorageClient(UserStorageDB storage) { ... } // copy to private field and use it etc.
} 
```

...除了 UserStorageTextFile 是从 UserStorageDB 继承的之外，不可能将它与 UserStorageTextFile 类连接起来......但是如果您只想编写一个简单的文本文件，为什么要依赖于例如 Oracle 驱动程序（UserStorageDB 需要） ?

我认为该示例足够清晰，并显示了使用接口的好处...

但如果不是...尝试这样做：

```
bind(UserStorageDB.class).to(UserStorageTextFile.class);

// and in another config/module/unitTest
bind(UserStorageTextFile.class).to(Mock(UserStorageDB.class));

// and try to wire it against your client class, too (both ways, meaning one config for TextFile and load a config for the DB after changing only the configuration) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-17T19:28:42.903

你的问题是“一些开发者[支持这个]”和“一些开发者[反对这个]”，所以没有正确的答案。但这就是为什么我同意[接口被过度使用的原因](https://stackoverflow.com/questions/90851/is-it-just-me-or-are-interfaces-overused)

如果您正在创建库，选择何时使用接口很重要。当您无法控制代码的使用方式时，创建可维护的合约就更难了。

但是，如果您正在创建一个应用程序，则它不太可能需要接口，因为类的公共接口可以作为使用代码的可维护合同。假设版本 1 如下所示：

```
public class UserStorage
{
    public void Store(User user) { /* ... */ }
} 
```

您甚至不需要重构工具将其更改为：

```
public interface UserStorage
{
    public void Store(User user);
}

class TheImplementation implements IUserStorage
{
    public void Store(User user) { /* ... */ }
} 
```

然后，您可以轻松地使用重构工具将接口重命名为`IUserStorage`.

因此*，当您编写非库代码*时，通常可以使用类，直到您需要可交换的实现、装饰器等。当类的公共接口不适合您的需要时，您应该使用接口。（例如，见[接口隔离原则](http://en.wikipedia.org/wiki/Interface_segregation_principle)）

简而言之 - 在应用程序代码中拥有一个与类 1:1 的接口是不必要的间接。

# c# - WPF：如何使用 MVVM 正确通信两个用户控件？

> ID：13919118
> 
> 赞同：0
> 
> 时间：2012-12-17T17:35:58.827
> 
> 标签：c#, wpf, mvvm

我正在使用 MVVM 开发 WPF (C#) 应用程序。我创建了一个新项目，它是一个只关注我遇到的问题的简化。

在视图中有一个由 PanelButton 组成的 Panel，该 PanelButton 由两个按钮和 PanelDisplay 组成。

这个想法是，当按下橙色按钮时，PanelDisplay 应将其颜色更改为橙​​色，而当按下绿色按钮时，PanelDisplay 应更改为绿色。

面板代码：

```
<UserControl x:Class="WpfApplication1.View.Panel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:view="clr-namespace:WpfApplication1.View"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="600">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="0.3*"/>
            <ColumnDefinition Width="0.7*"/>
        </Grid.ColumnDefinitions>

        <view:PanelButtons Grid.Column="0"></view:PanelButtons>
        <view:PanelDisplay Grid.Column="1"></view:PanelDisplay>

    </Grid>
</UserControl> 
```

PanelButtons.xaml 的代码：

```
<UserControl x:Class="WpfApplication1.View.PanelButtons"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:viewModel="clr-namespace:WpfApplication1.ViewModel"
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">

<UserControl.Resources>
    <viewModel:PanelButtonsAndDisplayVM x:Key="panelButtonsAndDisplayVM"/>        
</UserControl.Resources>

<Grid Background="LightGray">
    <StackPanel>
        <Button Width="64" Height="64"
                Command="{Binding Source={StaticResource panelButtonsAndDisplayVM}, Path=PressedOrange}">Orange</Button>
        <Button Width="64" Height="64"
                Command="{Binding Source={StaticResource panelButtonsAndDisplayVM}, Path=PressedGreen}">Green</Button>
    </StackPanel>

</Grid> 
```

PanelDisplay.xaml 的代码：

```
<UserControl x:Class="WpfApplication1.View.PanelDisplay"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:viewModel="clr-namespace:WpfApplication1.ViewModel"
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">

<UserControl.Resources>
    <viewModel:PanelButtonsAndDisplayVM x:Key="panelButtonsAndDisplayVM"/>
</UserControl.Resources>

<Grid Background="{Binding Source={StaticResource panelButtonsAndDisplayVM},Path=Color}" >

</Grid> 
```

问题是 PanelDisplay 没有改变它的颜色，为了解决这个问题，我创建了一个单例类来启动一个事件并将 PanelDisplay 订阅到该事件并且它工作，但我需要在 MainWindow 中有两个“面板”，所以如果我使用这个解决方案这两个面板将改变它们的颜色，因为它们都将获得相同的事件，并且应该只更新一个 PanelDisplay。

主窗口代码：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:view="clr-namespace:WpfApplication1.View"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="0.5*"/>
        <RowDefinition Height="0.5*"/>
    </Grid.RowDefinitions>

    <view:Panel Grid.Row="0"/>
    <view:Panel Grid.Row="1"/>
</Grid> 
```

那么，如何分别实现每个 PanelDisplay 呢？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:40:30.857

您应该为每个`UserControl`. 例如，您可以将 a then 作为 a和 a 的`PanelViewModel`属性。`PanelDisplayViewModel``PanelButtonsViewModel`

1.  按钮被按下`PanelButtonsViewModel`。
2.  该方法调用 to`PanelViewModel`以报告事件。
3.  然后面板通过调用`PanelDisplayViewModel`.

在这里避免视图模型的静态资源，只`DataContext`在每个用户控件上使用标准，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:23:36.180

您的 PanelButtons.xaml 和 PanelDisplay.xaml 不使用 PanelButtonsAndDisplayVM 类的相同实例，因为它们都在资源中声明自己的实例。

相反，将 Panel.xaml 中的 PanelButtonsAndDisplayVM 实例声明为 DataContext，以便将其传播到所有后代控件：

```
<UserControl x:Class="WpfApplication1.View.Panel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:view="clr-namespace:WpfApplication1.View"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="600">
    <UserControl.DataContext>
        <view:PanelButtonsAndDisplayVM/>
    </UserControl.DataContext>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="0.3*"/>
            <ColumnDefinition Width="0.7*"/>
        </Grid.ColumnDefinitions>
        <view:PanelButtons Grid.Column="0"></view:PanelButtons>
        <view:PanelDisplay Grid.Column="1"></view:PanelDisplay>
    </Grid>
</UserControl> 
```

并像这样在 PanelButtons.xaml 中使用它：

```
<UserControl x:Class="WpfApplication1.View.PanelButtons"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:viewModel="clr-namespace:WpfApplication1.ViewModel"
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
    <Grid Background="LightGray">
        <StackPanel>
            <Button Width="64" Height="64"
                Command="{Binding PressedOrange}">Orange</Button>
            <Button Width="64" Height="64"
                Command="{Binding PressedGreen}">Green</Button>
        </StackPanel>
    </Grid>
</UserControl> 
```

在 PanelDisplay.xaml 中是这样的：

```
<UserControl x:Class="WpfApplication1.View.PanelDisplay"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:viewModel="clr-namespace:WpfApplication1.ViewModel"
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
    <Grid Background="{Binding Path=Color}">
    </Grid>
</UserControl> 
```

# android - 将标签值设置为图像按钮

> ID：13919120
> 
> 赞同：2
> 
> 时间：2012-12-17T17:36:07.720
> 
> 标签：android, tags, imagebutton

我正在尝试将标签值设置为循环内的图像按钮。问题是它们的值都是相同的，我需要根据循环设置它们的值。这是我的代码。

```
int n = 0;
Cursor c = db.getUserExercises(Integer.parseInt(id), musclegroup);
tag = c.getCount();
if(c.moveToFirst())
        {

do{
               update = new ImageButton(this);
                update.setBackgroundResource(R.drawable.updatebtn);
                update.setTag(n);
                update.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {

                        for(int i=0;i<tag;i++)
                        {
                            if(Integer.parseInt(((ImageButton)v).getTag().toString()) == i)
                            {
                                Toast.makeText(getBaseContext(), update.getTag().toString(), Toast.LENGTH_SHORT).show();
                            }
                        }
                     }
                    });
n++;
}while(c.moveToNext()); 
```

我打算将它们的值从 0 开始设置为光标的大小，但我得到的值与所有图像按钮上的光标数相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-21T09:05:54.440

**您可以根据需要设置 ImageView 的标签。因为它的 setTag() 方法采用 Object 类型参数，例如。**

imageView.setTag(45);

当我们获得 imageView.getTag() 时，我们将获得 ImageView Tag 值的 45 个值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:44:35.250

onClick 中这段代码的意义何在？

```
if(Integer.parseInt(((ImageButton)v).getTag().toString()) == i)
                            {
                                Toast.makeText(getBaseContext(), update.getTag().toString(), Toast.LENGTH_SHORT).show();
                            } 
```

你不想打电话吗

```
Toast.makeText(getBaseContext(), v.getTag().toString(), Toast.LENGTH_SHORT).show(); 
```

在您的 onClick 中，没有“for”循环和“if”语句，`v.getTag()`而不是 update.getTag()？

# linker - cmake 为 boost 设置链接器标志

> ID：13919128
> 
> 赞同：4
> 
> 时间：2012-12-17T17:36:50.843
> 
> 标签：linker, cmake

我正在尝试从[http://www.boost.org/doc/libs/1_36_0/doc/html/boost_asio/tutorial/tuttimer1.html](http://www.boost.org/doc/libs/1_36_0/doc/html/boost_asio/tutorial/tuttimer1.html)编译一个 boost 教程示例。

我的 CMakeLists.txt 如下所示：

```
project(boost)
add_executable(timer1 timer1.cpp)
set_target_properties(timer1 PROPERTIES LINK_FLAGS -lboost_system,-lpthread) 
```

尝试用 cmake 构建整个东西，我得到：

```
/var/www/C++/boost/build$ make
-- Configuring done
-- Generating done
-- Build files have been written to: /var/www/C++/boost/build
Scanning dependencies of target timer1
[100%] Building CXX object CMakeFiles/timer1.dir/timer1.cpp.o                                                                                                    
Linking CXX executable timer1                                                                                                                                    
/usr/bin/ld: cannot find -lboost_system,-lpthread                                                                                                                
collect2: ld returned 1 exit status
make[2]: *** [timer1] Błąd 1
make[1]: *** [CMakeFiles/timer1.dir/all] Błąd 2
make: *** [all] Błąd 2 
```

但是当我运行时：

```
g++ timer1.cpp -lboost_system -lpthread -o timer1 
```

手动，一切正常。有人可以指出我做错了什么吗？

PS当我尝试使用使用[CMake 打开链接器标志](https://stackoverflow.com/questions/3544245/turning-on-linker-flags-with-cmake)中描述的解决方案时，我在 cmake 中添加了以下几行：

```
set(CMAKE_SHARED_LINKER_FLAGS "-lboost_system,-lpthread")
set(CMAKE_MODULE_LINKER_FLAGS "-lboost_system,-lpthread")
set(CMAKE_EXE_LINKER_FLAGS "-lboost_system,-lpthread") 
```

我得到与上面相同的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T19:26:25.130

我强烈建议您使用 CMake 集成的 FindPackage。CMake 将为您找到 boost 和 pthreads。

您的 CMakeLists.txt 应如下所示：

```
find_package( Boost COMPONENTS thread system filesystem REQUIRED ) #whatever libs you need
include_directories( ${Boost_INCLUDE_DIRS} )
find_package( Threads ) 
```

在子文件夹 src 中：

```
set( LIBS_TO_LINK
    ${Boost_LIBRARIES}
    ${CMAKE_THREAD_LIBS_INIT}
)

target_link_libraries( myApp
    ${LIBS_TO_LINK}
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T06:36:45.770

> /usr/bin/ld: 找不到 -lboost_system,-lpthread

这里链接器正在寻找一个库`libboost_system,-lpthread.so`。在任何 UNIX 系统上都*不太*可能存在这样的库。

你可能想要：

```
set(CMAKE_EXE_LINKER_FLAGS "-lboost_system -lpthread") 
```

# c++ - makefile 可以在 C++ 中强制执行依赖关系限制吗

> ID：13919131
> 
> 赞同：2
> 
> 时间：2012-12-17T17:36:53.453
> 
> 标签：c++, makefile

我们正在重构我们的代码库，并试图限制不同组件之间的直接依赖关系。我们的源代码树有几个顶级目录：src/a、src/b 和 src/c。

我们要强制执行一组限制：

*   a 中的文件不能依赖于 b 或 c 中的文件
*   b 中的文件可以依赖文件 a 但不能依赖 c
*   c 中的文件可以直接依赖于 b 中的文件，但不能依赖 a

执行第一个很简单。我有一个这样的隐含规则：

```
build/a/%.o : src/a/%.cpp
  $(CXX) -I src/a $(OTHER_FLAGS) -o $@ $< 
```

如果 a 下的文件尝试包含来自 b 或 c 的头文件，则构建失败，因为找不到头文件。

第二条规则有一个类似的规则，将 src/a 和 src/b 指定为包含目录。问题出现在建筑 c 上。以下是允许的。

```
src/c/C.cpp
#include "b.h"
void C() { ... }

src/b/b.h
#include "a.h"
class B { ... };

src/a/a.h
class A { ... }; 
```

这里，来自 c 的文件包括来自 b 的文件（允许），而后者又包括来自 a 的文件（也允许）。我们要防止这样的代码：

```
src/c/C_bad.cpp
// Direct inclusion of a
#include "a.h"

src/c/c_bad.h
// Direct inclusion of a
#include "a.h" 
```

对于允许的情况进行编译，用于在 src/c 中构建文件的编译命令必须包含 -Isrc/a，但这允许第二种情况也可以编译。

我怀疑我的问题的答案是编写一个脚本，该脚本查看编译器生成的依赖项，找到潜在的非法依赖项，然后查看源文件以确定这是否是直接依赖项。有没有一种合理的方法可以结合编译器和/或 makefile 结构来做到这一点？

如果重要的话，我们正在使用 GNU Make 3.81 和 g++ 4.5.3，但如果可能的话，希望是可移植的。

**更新**

我们正在寻找一种需要努力违反规则的东西，而不是一种需要努力遵守规则的东西。（过去的经验表明后者不太可能奏效。）虽然在另一个答案中有一些好主意，但我接受说要编写脚本的那个，因为这是最需要努力工作的那个大约。

感谢大家的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:44:30.840

是的。但这需要一些手动的努力和纪律。

在构建 C 时，您可以依赖 src/b/*.h 中的头文件。

在项目 B 中，主目录中的任何头文件都应该是自包含的，并且不依赖于其他项目。您还需要在 B src/b/detail/*.h 中创建一个子目录。在这里，头文件允许包含 src/a/*.h 和 src/b/*.h ，但这是一个私有实现细节，仅适用于 b 项目的源文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:57:13.007

您可以使`-I`选项特定于目标：

```
build/b/%.o: CPPFLAGS += -Isrc/a
build/c/%.o: CPPFLAGS += -Isrc/b 
```

但是，这是特定于 gnu-make 的，因此它不是可移植的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:44:11.010

最简单的方法是将所有内容的包含路径更改`-Isrc`为。包含语句然后具有完整的相对路径

```
#include <a/a.h> 
```

例如。这使得自动检查代码变得更加容易（可能在提交挂钩而不是生成文件中）。

* * *

或者，您*可以*对 A 和 B 标头中的宏做一些讨厌的事情：

```
// src/a/a.h
#ifndef SRC_A_H
#define SRC_A_H
#ifndef ALLOW_A
#error "you're not allowed to include A headers here"
#endif
//... 
```

和

```
// src/b/b.h
#ifndef SRC_B_H
#define SRC_B_H
#ifdef ALLOW_A_INDIRECT
#define ALLOW_A
#endif

#include <a/a.h>
//...
#ifdef ALLOW_A_INDIRECT
#undef ALLOW_A
#endif
#endif // include guard 
```

现在这些 make 规则将允许 A 和 B 正常构建：

```
build/a/%.o: CPPFLAGS += -DALLOW_A
build/b/%.o: CPPFLAGS += -DALLOW_A 
```

这将允许 C 仅通过 B 访问（以及 B 标头中的宏）

```
build/c/%.o: CPPFLAGS += -DALLOW_A_INDIRECT 
```

请注意，这需要一些纪律，尤其是在 B 的标头中，但我想如果它与现有的包含守卫并列，它......好吧，它实际上仍然很讨厌。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T11:14:34.200

考虑到您将其应用于现有代码库这一事实，我会选择“验证脚本”方法。

因此，当构建失败时，您不会修改构建过程并一次切断一个依赖项，而是会显示一个未投诉的文件列表。然后，您可以在考虑“大局”的情况下重构您的代码库，并且您所做的任何更改都将使用与以前相同的 Makefile 构建，从而简化测试和调试。

重构后，分析脚本可以继续用作合规检查器，以验证未来的更新。

这种分析的一个可能起点是使用[`makedepend`](http://en.wikipedia.org/wiki/Makedepend)或`cpp -MM`。例如，使用您在问题中列出的 cpp/h 文件：

```
[me@home]$ 查找 .
.
./b
./b/bh
。/一种
./a/啊
。/C
./c/C_bad.cpp
./c/C.cpp
./c/c_bad.h

[me@home]$ cpp -MM -Ia -Ib -Ic */*.cpp
C_bad.o: c/C_bad.cpp a/ah
Co: c/C.cpp b/bh a/ah

[me@home]$ # 这也适用于头文件
[我@home]$ cpp -Ia -Ib -Ic -MM c/c_bad.h
c_bad.o: c/c_bad.ha/ah

```

解析这些输出以确定每个 cpp 文件的依赖关系并标记那些不合规的文件应该是相当直接的。

这种方法的缺点是它无法区分直接和间接依赖关系，因此如果这很重要，您可能需要包括一个额外的步骤来检查源并挑选出直接依赖关系。

# android - 如何混合两种不同百分比的颜色

> ID：13919133
> 
> 赞同：1
> 
> 时间：2012-12-17T17:37:00.027
> 
> 标签：android, colors

我有两种颜色和一个视图组件。颜色一是我组件的背景。我会将我的背景颜色更改为两种颜色。但不是突然的。改变类似的动画。例如：

第 1 秒：90% 颜色1 + 10% 颜色2 第 1 秒：80% 颜色1 + 20% 颜色2 ...... 第 1 秒：10% 颜色1 + 90% 颜色2 第 1 秒：0% 颜色1 + 100% 颜色2

我当然试试：

```
percent=100;
while (percent>=0) {
    color = (color1*precent)+(color2*(100-percent));  
    percent-=10;
} 
```

但这是个坏主意。结果令人失望。这个目标有什么解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:11:34.387

您没有清楚地说明为什么结果令人失望，所以我假设这意味着您获得的颜色过渡不如您预期的那么好。

您的一般方法似乎是正确的，也许您只是缺少一些细节，所以我会用不同的方式重写它。设`color1`和`color2`为三元组 (R, G, B)，其中 R、G、B 中的每一个都在 [0, 1] 范围内。如果不是这种情况，则除以 255（如果这是您的情况的限制），然后再乘以 255。让我们从 过渡到`s`的步数，这里我包括在初始帧中，但不包括最后一帧。在步骤，你有这样的价值。与您通过执行获得框架中的颜色。现在你可能想乘以255。`color1``color2``s``color1``color2``k``p``p = (s - k)/s``p``k``color = p * color1 + (1 - p) * color2``color`

此描述的伪代码是：

```
color1 = (R1, G1, B1)
color2 = (R2, G2, B2)
s = N

for k = 0 to s: # s + 1 steps, according to the description
    p = (s - k) / s
    color = (p * color1) + ((1 - p) * color2) 
```

请注意，at `k = 0`you have only`color1`和 at `k = s`you get only `color2`。如您所见，它与您发布的更多详细信息相似。请注意，这里我将 R、G、B 中的每一个乘以`p`。

下面是一些分别从黄色过渡到蓝色的示例`steps = 10, 25, 500`。

![在此处输入图像描述](../Images/29b6dad33630b48136c76f7571536918.png) ![在此处输入图像描述](../Images/0f59775b269679fa99c6a61e2126abc4.png) ![在此处输入图像描述](../Images/f42b51cb20e5240f1fc0ba9318c0a921.png)

# html - 我应该使用 span 标签还是 p 标签？

> ID：13919138
> 
> 赞同：6
> 
> 时间：2012-12-17T17:37:18.187
> 
> 标签：html, css, semantic-markup

我在 Photoshop 中制作了这个草图，并将其转换为 HTML 和 CSS。

![在此处输入图像描述](../Images/c2c32062ced41c2da48377af460d0c78.png)

**HTML：**

```
<div class="pricebox">
    <p class="price">360kr</p>
    <p class="min">40 min</p>
    <p class="info green">Körlektion</p>
</div>

<div class="pricebox">
    <p class="price">1700kr</p>
    <p class="min">Riskutbildnig 2</p>
    <p class="info yellow">Halkan</p>
</div>  
<div class="pricebox">
    <p class="price">500kr</p>
    <p class="min">Riskutbildning 1</p>
    <p class="info red">Riskettan</p>
</div> 
```

**CSS**

```
body {
    font-family: "Myriad Pro",Myriad,"Helvetica Neue",Helvetica,Arial,sans-serif;
}
.pricebox {
    display:inline-block;
    border: 1px solid #EEEEEE;
    border-radius: 3px;
    width: 100px;
    height: 150px;
    margin: 5px;
}

.price{
    font-size: 28px;
    font-weight:300;
    color: #383838;
    padding: 11px;
}
.min {
    font-size: 11px;
    color: #909090;
    padding: 0 25px;
}
.info {
    height: 35%;
    margin-top: 15px;
    color: #EEEEEE;
    font-weight: 600;
    font-size: 11px;
}
.green{background-color: #a7d155;}
.yellow{background-color: #eada42;}
.red{background-color: #e54e4b;} 
```

但是我有点迷失如何构建所有内容，应该使用 span 或 div 标签而不是 p-tags。

检查这个jsfiddle：http: [//jsfiddle.net/upas3/1/](http://jsfiddle.net/upas3/1/)

欢迎任何想法或解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T17:44:25.537

我会`DL`为每个这样的块使用列表，并`UL`在语义上将它们组合在一起：

```
<ul>
    <li><dl>
        <dt>Körlektion</dt>
        <dd>360kr</dd>
        <dd>40 min</dd>
    </dl></li>

    <li><dl>
        <dt>Halkan</dt>
        <dd>1700kr</dd>
        <dd>Riskutbildnig 2</dd>
    </dl></li>

    <li><dl>
        <dt>Riskettan</dt>
        <dd>500kr</dd>
        <dd>Riskutbildning 1</dd>
    </dl></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T17:40:05.417

看起来是使用 ul 和 li 标签的好地方。使用段落标签可以工作，但对于 UI 设计来说是反直觉的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T17:41:05.233

好吧，`div`它们`p`是“相同的”，因为它们是块元素，但`p`具有更多默认样式，因此在它们之间，您将需要使用`div`.

`span`如果您希望将这些块视为一行文本，您可能会使用它，看起来就像您所做的那样。

更新：正如其他答案中所述，您还可以使用各种列表标签，并将它们设置为内联元素，如 span。这对屏幕阅读器来说可能很好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-17T18:51:35.900

这看起来像表格数据，表格数据放在表格中。然而，这并不意味着它必须看起来像一张桌子！

[http://jsfiddle.net/jdEP4/](http://jsfiddle.net/jdEP4/)

```
table.prices {
    display: block;
}

table.prices thead {
    display: none;
}

table.prices tr {
    display: inline-block;
    border: 1px solid;
}

table.prices td {
    display: block;
    text-align: center;
}

.info.yellow {
    background: yellow;
}

.info.green {
    background: green;
}

.info.red {
    background: red;
} 
```

当然，CSS 是不完整的，但基线用于重新格式化表格。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T17:44:00.450

一般来说，没有统一的格式，所以你可以使用任何你感觉更好的东西。实际上，我一直在尝试使用需要较少解决方法的元素。假设`p`标签需要额外的边距标准化，所以我会使用`div`s，如果你需要 inilne 元素可能更好的是使用`span`not`div`等等。只有一件事让我很恼火，它是类/id 名称，总是尽量避免类似`size1`, `size2`, `style124`:) 之类的东西，而是使用在上下文中有意义且其他开发人员可以理解的东西

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-17T17:46:03.863

试试这个：http: [//jsfiddle.net/P4xwK/](http://jsfiddle.net/P4xwK/)

关于您的问题，我认为这并不重要，您可以使用`display:inline`和 with将所有内容转换为您喜欢的内容`display:block`。但是，标签的顺序在语法上应该是正确的。

除了看起来像你想要的那个小三角形。

```
body {
    font-family: "Myriad Pro",Myriad,"Helvetica Neue",Helvetica,Arial,sans-serif;
}
.pricebox {
    display:inline-block;
    border: 1px solid #EEEEEE;
    border-radius: 3px;
    width: 100px;
    height: 100px;
    margin: 5px;
}

.price{
    font-size: 28px;
    font-weight:300;
    color: #383838;
    text-align:center;
}
.min {
    font-size: 11px;
    color: #909090;
    text-align:center;
}
.info {
    height: 35%;
    margin-top: 15px;
    padding-top:15px;
    color: #EEEEEE;
    font-weight: 600;
    font-size: 11px;
    text-align:center;
}
.green{background-color: #a7d155;}
.yellow{background-color: #eada42;}
.red{background-color: #e54e4b;} 
```

这是用 css 绘制三角形的技巧：

```
.arrow-up {
    width: 0; 
    height: 0; 
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-bottom: 5px solid black;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-17T17:42:57.670

我会这样组织它：

```
<div class="pricebox">
    <ul>
        <li class="price">360kr</li>
        <li class="min">40 min</li>
        <li class="info green">Körlektion</li>
    </ul>
</div> 
```

然后相应地设置样式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-17T17:50:16.073

我喜欢更多的语义解决方案：

**HTML：**

```
<dl class="pricebox">
    <dt>Körlektion</dt>
    <dd><abbr class="price" title="360 kronor">360kr</abbr></dd>
    <dd><abbr class="min" title="40 minutes">40 min</abbr></dd>
</dl>
<dl class="pricebox">
    <dt>Halkan</dt>
    <dd><abbr class="price" title="1700 kronor">1700kr</abbr></dd>
    <dd><abbr class="min" title="2 FrihDehBiDeUh">Riskutbildnig 2</abbr></dd>
</dl>  
<dl class="pricebox">
    <dt>Riskettan</dt>
    <dd><abbr class="price" title="500 kronor">500kr</abbr></dd>
    <dd><abbr class="min" title="1 FrihDehBiDeUh">Riskutbildning 1</abbr></dd>
</dl> 
```

受@MaratTanalin 解决方案的启发

**在 CSS 中：**

替换`.green`,`.yellow`和`.red`,除非颜色`dl:nth-of-type(1) dt`的选择取决于`dl:nth-of-type(2) dt`价格`dl:nth-of-type(3) dt`框位置以外的其他东西。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-17T17:50:52.563

这里唯一真正重要的是作者的便利和后备。

为方便起见，您将使用`div`or `span`，除了块与内联之外没有默认渲染，因此您无需覆盖默认设置。

对于后备，即非 CSS 渲染，您可能希望使用`p`而不是`div`和`span`代替`div`，因为您希望将项目呈现为段落（在它们之间有空行或暂停），但在内部只是作为文本。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-17T18:02:22.323

在我看来，它们就像列表项。不是段落。以编程方式，您所拥有的一切都很好。从语义上讲，如果 CSS 被关闭，我会尝试考虑它们（这就是我将它们列在列表中的原因）

```
<ul>
    <li><h2>Header</h2></li>
    <li>Price</li>
    <li>Description</li>
</ul> 
```

几件事：1）我尝试定位元素，但在标签上使用“.pricelist”`<ul>`将是一种选择。2）如果我认为“标题”很重要是正确的，那么您可以使用元素上的定位`<ul> and <li>`将标题移动到最后一个项目以进行演示，但要保持您的语义。

# perl - 从另一个 CGI 程序捕获输出

> ID：13919139
> 
> 赞同：1
> 
> 时间：2012-12-17T17:37:19.850
> 
> 标签：perl

我需要从与我的 perl 脚本位于同一目录中的另一个 CGI 程序中捕获输出。

我试过

```
my $output = `./cgi_name.cgi?param1=some_string&param1=some_string`; 
```

但我得到一个错误，例如 param1=some_string¶m1=some_string are not valid。cgi_name.cgi 不支持命令行参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:48:33.040

是否`cgi_name.cgi`有使用该[`CGI`](http://search.cpan.org/perldoc?CGI)模块的 Perl 脚本？然后它可以判断它是从命令行运行还是通过 CGI 运行，在前一种情况下，它将命令行参数视为键值对。

```
# cgi-or-cli.cgi
use CGI;
use Data::Dumper;
print Dumper(CGI->new);

$ perl cgi-or-cli.cgi field1=value1 foo=bar
$VAR1 = bless( {
                 '.parameters' => [
                                    'field1',
                                    'foo'
                                  ],
                 'use_tempfile' => 1,
                 '.charset' => 'ISO-8859-1',
                 '.fieldnames' => {},
                 'param' => {
                              'field1' => [
                                            'value1'
                                          ],
                              'foo' => [
                                         'bar'
                                       ]
                            },
                 'escape' => 1
               }, 'CGI' ); 
```

因此，值得尝试将您的键值对作为单独的命令行参数传递：

```
my $output = `./cgi_name.cgi param1=some_string param1=some_string`; 
```

`cgi_name.cgi`即使不是 Perl 脚本或不使用该`CGI`模块，它仍然值得一试。

# c# - SOLID Essentials 缺点？

> ID：13919141
> 
> 赞同：6
> 
> 时间：2012-12-17T17:38:01.463
> 
> 标签：c#, design-patterns, inversion-of-control, solid-principles, liskov-substitution-principle

*我已经阅读了很多关于此的文章，但我仍然有 2 个问题。*

**问题 #1** - 关于[依赖倒置](http://www.remondo.net/solid-principles-csharp-dependency-inversion/)：

> 它指出高级类不应该依赖于低级类。两者都应该依赖于抽象。抽象不应该依赖于细节。细节应该取决于抽象。

例如 ：

```
public class BirthdayCalculator
{
    private readonly List<Birthday> _birthdays;

    public BirthdayCalculator()
    {
        _birthdays = new List<Birthday>();// <----- here is a dependency
    }
... 
```

修复：把它放在一个ctor中。

```
public class BirthdayCalculator
{
    private readonly IList<Birthday> _birthdays;

    public BirthdayCalculator(IList<Birthday> birthdays) 
    {
        _birthdays = birthdays;
    } 
```

*   如果它将在 ctor 中 - 我每次使用课程时都必须发送它。`BirthdayCalculator`所以我在上课时必须保留它。这样做可以吗？

*   我可以争辩说，在修复之后，仍然 -`IList<Birthday> _birthdays`不应该在那里（`Birthday`在`IList`） - 但它应该是`IList<IBirthday>`。我对吗 ？

**问题 #2** - 关于[Liskov 替换](http://www.remondo.net/solid-principles-csharp-liskov-substitution/)：

> 派生类必须可以替代它们的基类

或更准确：

> 令 q(x) 是关于 T 类型的对象 x 的可证明性质。那么 q(y) 对于 S 类型的对象 y 应该为真，其中 S 是 T 的子类型。

*（已经读过[这个](https://stackoverflow.com/questions/1735137/liskov-substitution-principle-no-overriding-virtual-methods)）*

例子 ：

```
public abstract class Account
{
     public abstract void Deposit(double amount);
} 
```

我有一堂课：

```
public class CheckingAccount : Account
{
     public override void Deposit(double amount)
    {    ...
        _currentBalance += amount;
    }
} 
```

银行想开一个抵押账户——所以：

```
public class MortgageAccount : Account
{

    public override void Deposit(double amount)
    {
        _currentBalance -= amount; //<-----notice the minus
    }
} 
```

当有一个函数接受抵押 `Account`并做存款时，问题就出现了。

```
public class Bank
{
    public void ReceiveMoney(Account account, double amount)
    {
        double oldBalance = account.CurrentBalance;
        account.Deposit(amount); //oopssss?????
    }
} 
```

所以在这里，它违反了 LSP。

**但** 我不明白。

每个被覆盖的方法在被覆盖时都会执行不同的代码，因此它*永远不会*100 *%*可替换！

定义没有谈论“逻辑应该像基类一样继续（总是存入（添加）正数）”

例子：

如果`CheckingAccount` class 和`MortgageAccount` class 都存入正数但`MortgageAccount` 也登录到 db 怎么办？它仍然会破坏 LSP 吗？休息/不刹车 LSP 的边界是什么？

定义应该定义什么是边界。它并没有说什么。

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T18:00:23.680

LSP 说基类做出的任何承诺，子类也必须做出。在 Account 案例中，是的，这意味着从 Mortgage 的余额中`Deposit` *减去*是相当混乱的。一种解决方法是，如果您认为余额是客户欠您的金额与您欠他的金额之间的差额。（我大约有 54% 的把握这就是“余额”的原始含义。）正余额可能意味着客户有钱，*而*负余额可能意味着他*欠钱*。如果您无法解决它以便您可以类似地对待这两个帐户，那么它们不应该是相关的——或者至少，“存款”方法不应该在基类上定义。

至于 DIP，它没有真正提到的是它并不意味着适用于每一行代码。最终你*必须*在某个地方有一个具体的类。关键是将对这些具体类的细节的依赖限制在绝对*必须*了解它们的代码部分，并使这些部分的数量和大小尽可能小。这意味着尽可能多地使用通用接口。例如，如果您不需要做出的所有保证`List`（枚举顺序、重复项的存在、空值等），那么您可以声明`_birthdays`为`IEnumerable`反而。如果构造函数是唯一知道您的 IEnumerable 实际上是 List 的东西，那么您或多或少地遵守了这一原则。

（但请注意：这并不意味着您可以通过简单地将所有内容声明为 a`Object`并根据需要进行向下转换来遵守 DIP。向下转换本身可能被视为违反 DIP，因为您不再依赖于您拥有的接口已提供；您正在尝试获得更具体的内容。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T17:54:06.160

> 如果它将在 ctor 中 - 我每次使用课程时都必须发送它。所以在调用生日计算器类时我必须保留它。这样做可以吗？

我会检索一次生日列表，制作一个`BirthdayCalculator`，然后传递它。`BirthdayCalculator`如果您的生日列表发生更改，或者它以某种方式保持状态，您应该只需要实例化一个新的。

> 我可以争辩说，在修复之后，仍然 - `IList<Birthday>`_birthdays 不应该在那里（IList 中的生日） - 但它应该是`IList<IBirthday>`. 我对吗 ？

这取决于。生日只是一个数据对象吗？里面有什么逻辑吗？如果只是一堆属性/字段，那么一个接口就大材小用了。

如果生日确实有逻辑，那么我会选择`IEnumerable<IBirthday>`. `List<Birthday>`不可分配给`IList<IBirthday>`，因此您可能会在那里遇到问题。如果您不需要操纵它，请坚持使用`IEnumerable`.

* * *

关于您的第二个问题，我唯一遇到的问题是您的命名约定。您不向抵押贷款存款。我认为如果您要重命名该方法，它可能更有意义。

此外，支票账户和抵押账户是两种截然不同的动物。一个是存款账户，另一个是贷款。我会非常小心地尝试互换使用它们。

**编辑**

其他人已经指出，您可以先输入`_currentBalance`负值`MortageAccount`，然后再添加。如果这对你来说更容易理解，那就去吧。但是，a 如何`MortageAccount`处理其余额的内部结构并不重要，只要`GetBalance`您使用检查/显示它的任何方法或任何方法，都可以正确处理它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T18:01:25.103

**#1**

*   是的，每次创建对象时都必须调用它。这是[工厂](http://en.wikipedia.org/wiki/Factory_method_pattern)和[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)框架派上用场的地方，以消除您必须做的所有管道。

*   是的，您应该使用 IBirthday 界面。

**#2**

你的逻辑在这里有缺陷。当您将钱存入帐户时，您就是在向它添加钱。抵押贷款账户中没有资金（正余额），您不会通过存款从其中取出资金。抵押账户有负余额，存入账户会降低余额（增加负余额）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T18:02:14.590

关于 LSP：在我看来，LSP 主要是关于层次结构的（公共）合同。你有一个账户（对象），你可以贷记/借记它（合约）。对于抵押账户，贷方将导致减法，借方将导致加法。对于支票账户，情况正好相反。

重要的是，给定一个帐户，您始终可以要求它执行贷记/借记操作，并且帐户对象的所有子类都将支持这些操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T18:08:12.410

依赖倒置：

> 如果它将在 ctor 中 - 我每次使用课程时都必须发送它。`BirthdayCalculator`所以我在上课时必须保留它。这样做可以吗？

您在使用对象时不需要它，而是在构造**对象**`BirthdayCalendar`时需要它。将`IList<Birthday>`移至构造接口可确保 的所有依赖`BirthdayCalendar`项与调用者的依赖项相同（即没有新的依赖项），这就是我们要实现的目标。

> 我可以争辩说，在修复之后，仍然 -`IList<Birthday> _birthdays`不应该在那里（`Birthday`在`IList`） - 但它应该是`IList<IBirthday>`。我对吗 ？

这与依赖倒置原则没有直接关系。您已将依赖项卸载给调用者，现在您正在询问此依赖项的详细信息。`IBirthday`使用list 而不是访问内部结构可能是一个好主意`Birthday`，但这是一个与依赖倒置无关的接口问题。

> 每个被覆盖的方法在被覆盖时都会执行不同的代码，因此它永远不会 100% 可替换！定义没有谈论“逻辑应该像基类一样继续（总是存入（添加）正数）”
> 
> 示例：如果`CheckingAccount`class 和`MortgageAccount`class 都存入正数但`MortgageAccount`也登录到 db 怎么办？它仍然破裂`LSP`吗？休息/不刹车 LSP 的边界是什么？定义应该定义什么是边界。它并没有说什么。

Liskov 替换原则适用于**基类与派生类的**关系。您的示例处理从共享基类继承的 2 个类，因此您的关系是**派生类 1 与派生类 2**。这与 LSP 所说的完全相反，正是出于您提到的原因 - 两个派生类的逻辑不同。LSP 是您定义的继承有效性的度量。如果您可以肯定地回答这个问题*，我的派生类对象可以在使用我的基类对象的任何地方透明地使用吗？*，你没有破坏 LSP。否则，你正在打破它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T18:09:23.713

关于第一点，可以使用特定的低级类作为另一个类的私有实现细节；`SOLID`如果有人说代码可能会更多，`IList<Birthday> _birthdays = new List<Birthday>;`但性能可能会稍微好一点`List<Birthday> _birthdays = new List<Birthday>`。如果你想使用`IBirthday`而不是`Birthday`，那也很好，如果你`IBirthday`每次都使用你会倾向于使用，`Birthday`除非在调用构造函数或静态方法时。请注意，您需要在使用`Birthday`vs`IBirthday`和`List<T>`vs时保持一致`IList<T>`。

请注意，私人成员不需要遵守与公共成员相同的规则。如果一个类型接受 type 的参数`List<T>`，那将强制外部代码使用该类型。从 切换`List<T>`到`IList<T>`可能需要在许多不同的程序集中进行许多更改，并使旧版本的程序集与新版本不兼容。相比之下，如果一个类有一个`List<T>`从不与外部代码共享的类型的私有成员，则将其更改为使用的效果`IList<T>`将仅限于类本身，并且不会对该类的消费者产生影响。

# php - 使用 flexbox 获取 pinterest 或 jQuery 砌体布局

> ID：13919147
> 
> 赞同：9
> 
> 时间：2012-12-17T17:38:16.953
> 
> 标签：php, css, flexbox

想知道是否可以仅使用新的 flexbox 布局获得与 pinterest 或 jQuery masonry 相同类型的设计布局。据我所知，这是：

```
.flex-container {
    display: -webkit-flex;
    display: flex;
    -webkit-flex-flow: row wrap;
    flex-flow: row wrap;
}
.item {
    width: 220px;
    height: 250px;
    margin: 10px auto;
    padding: 0;
    background: #ccc;
}
.item:nth-child(3n+2) {
    background: #aaa;
    height: 400px;
} 
```

和 HTML 我只是使用 PHP 循环来创建 12 个项目

```
<?php
    for ($i=0; $i<=11; $i++) {
        echo '<div class="item"></div>';
    }
?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-10T16:43:52.083

这是完全可能的。

感谢@leopld 的原始答案，我能够创建一个不依赖于固定高度的答案。

通过制作 flex 容器`position: absolute`or `position: fixed`，您可以让它动态地填充可用空间。

Codepen 的链接：[http](http://codepen.io/anon/pen/Jpnyj?editors=110) ://codepen.io/anon/pen/Jpnyj?editors=110 。我包括了您此时需要的所有供应商前缀。

## 标记

```
<div class="wrapper">
    <div class="box box-red"></div>
    <div class="box box-blue"></div>
    <div class="box box-pink"></div>
    <div class="box box-purple"></div>
    <div class="box box-green"></div>
    <div class="box box-yellow"></div>
    <div class="box box-brown"></div>
    <div class="box box-red"></div>
    <div class="box box-blue"></div>
    <div class="box box-pink"></div>
    <div class="box box-purple"></div>
    <div class="box box-green"></div>
    <div class="box box-purple"></div>
    <div class="box box-green"></div>
    <div class="box box-yellow"></div>
    <div class="box box-blue"></div>
    <div class="box box-pink"></div>
    <div class="box box-purple"></div>
    <div class="box box-green"></div>
    <div class="box box-yellow"></div>
    <div class="box box-red"></div>
    <div class="box box-brown"></div>
    <div class="box box-blue"></div>
    <div class="box box-red"></div>
    <div class="box box-green"></div>
    <div class="box box-yellow"></div>
    <div class="box box-brown"></div>
</div> 
```

## 风格

```
body {
    background: black;
}

.wrapper {
    position: absolute;
    width: 100%;
    height: 100%;
    display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-flex-flow: column wrap;
    -ms-flex-flow: column wrap;
    flex-flow: column wrap;
    -webkit-box-align: stretch;
    -webkit-align-items: stretch;
    -ms-flex-align: stretch;
    align-items: stretch;
    -webkit-align-content: stretch;
    -ms-flex-line-pack: stretch;
    align-content: stretch;
}

.box {
    margin: 5px;
    -webkit-box-flex: 0;
    -webkit-flex: 0 1 auto;
    -ms-flex: 0 1 auto;
    flex: 0 1 auto;
}

.box-red {
    height: 100px;
    background: red;
}

.box-blue {
    height: 120px;
    background: blue;
}

.box-pink {
    height: 144px;
    background: pink;
}

.box-purple {
    height: 250px;
    background: purple;
}

.box-green {
    height: 200px;
    background: green;
}

.box-yellow {
    height: 20px;
    background: yellow;
}

.box-brown {
    height: 290px;
    background: brown;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-02T20:11:08.537

CSS3 的[列](https://developer.mozilla.org/en-US/docs/Web/CSS/columns)将使您非常接近该布局。（请注意，在非最新浏览器中的支持可能很差，并且规范将来可能会更改。）另一个示例不适用于 FF，但这个示例可以：

HTML：

```
<div id="wrapper">
    <div id="cols">
        <div class="item">
          <img src="http://placekitten.com/400/700?image=1" />
            <p>0) Craft beer farm-to-table.</p>
        </div>
        <div class="item">
            <img src="http://placekitten.com/400/450?image=2" />
            <p>1) Mollit wolf veniam, leggings art party semiotics Brooklyn High Life sustainable occaecat Banksy actually.</p>
        </div>
        [more items]
    </div>
</div> 
```

CSS：

h1, h2, ul, p { 边距：1rem; }

```
#wrapper {
    width: 900px;    
    margin: 20px auto;
    padding: 10px;
    outline: solid black 1px;
    background-color: gainsboro;  
}

#cols {
    -webkit-column-count: 3;
    -webkit-column-gap: 10px;
    -moz-column-count: 3;
    -moz-column-gap: 10px;
    column-count: 3;
    column-gap: 10px;
}

.item {
    display: inline-block;
    background: #FEFEFE;
    margin: 0;
    -webkit-column-break-inside: avoid;
    -moz-column-break-inside: avoid;
    column-break-inside: avoid;
    padding: 10px;
}

.item img {
    width: 100%;
    border-bottom: 1px solid black;
    padding-bottom: 10px;
    margin-bottom: 5px;
}

.item p {
    font-size:small;
    margin: 0;
} 
```

或者玩[完整的例子](http://codepen.io/KatieK2/pen/FqCHp)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-04T18:14:55.657

实际上，使用 flexbox 可以毫不费力地做到这一点。唯一的缺点是您必须为包装器指定一个绝对高度，以使其内容实际包装。否则，它将全部排列在一个伟大的、永无止境的专栏中。

的HTML：

```
<div class="wrapper">
    <div class="red"></div>
    <div class="blue"></div>
    <div class="pink"></div>
    <div class="purple"></div>
    <div class="green"></div>
    <div class="yellow"></div>
    <div class="brown"></div>
</div> 
```

（无前缀的）CSS：

```
.wrapper {
    background: black;
    display: flex;
    flex-flow: column wrap;
    height: 450px;
    align-items: center;
}

.wrapper > div {
    height: 100px;
    margin: 5px;
    width: 100px;
}

.wrapper > :nth-child(3n+2) {
    border: 2px solid white;
    height: 300px;
} 
```

我[也做了一个 JS Fiddle](http://jsfiddle.net/leopld/gUfxf/)，所以你可以直接看到结果。

然而，简而言之，诀窍是`flex-direction: column`结合使用`flex-wrap: wrap`和固定高度的包装器。

不过，我必须补充一点——这似乎只是编写 CSS 列规范的场景，因此 KatieK 的解决方案可能是更好的方法。最重要的是，当使用 CSS 列而不是 flexbox 时，不需要为包装器指定固定高度。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-10T19:52:37.147

**更新：**据我所知，Flexbox 无法做到这一点。Flexbox 更关心水平布局，而不是垂直。我很高兴被证明是错误的，但这是我从有限的经验中收集到的。如果您想了解更多信息，我在这件事上找到的最好的文章是：[http](http://css-tricks.com/snippets/css/a-guide-to-flexbox/) ://css-tricks.com/snippets/css/a-guide-to-flexbox/ （是的，当然是 Chris Coyier . 你怎么猜到的？）

在任何情况下，即使您*可以*使用 Flexbox 来做到这一点，这也有点像 hack，因为这不是 Flexbox 的用途。有一种更简洁的方法来处理`CSS3`列。[这是一个例子](http://cssdeck.com/labs/css-only-pinterest-style-columns-layout)。

浏览器支持不是最好的：http: [//caniuse.com/#search=column%20layout](http://caniuse.com/#search=column%20layout)即使这个例子似乎也不支持 Firefox，虽然我不知道为什么，因为 FF 确实支持相应的属性，根据 CanIUse。

因此，总结和 TLDR：这是一个令人钦佩的想法，在纯 CSS 中执行此操作，但目前对于大多数*实际*目的来说是不可能的。您可能会更好地使用[JQuery Masonry](http://masonry.desandro.com/)

# sql-server - 动态复制 SQL Server 数据的脚本

> ID：13919160
> 
> 赞同：1
> 
> 时间：2012-12-17T17:38:44.973
> 
> 标签：sql-server, tsql, ms-access, sql-server-2012, database-replication

我有一个带有 SQL Server 数据库的 access 2010 应用程序。

但我需要做一个离线版本。所以我想我会在他们的计算机上创建一个本地 SQL Server 数据库，然后他们可以在上路之前运行一个脚本来更新他们的数据。

**注意：**不会有任何同步。离线模式下的数据仅用于只读，任何更改都将丢失。

我尝试过这样的管理工作室：

![在此处输入图像描述](../Images/f70bbb24b519ecc3131c81c51a8500d6.png)

但我意识到数据是硬编码的，而不是从选择中插入。

有没有简单的方法来创建脚本？

到目前为止，我通过查询访问来创建我的在线数据库的备份。然后我通过查询将备份恢复到本地服务器。

唯一的问题是如何为第二个查询构建连接字符串。目前设置为这个

```
ODBC;DRIVER=SQL Server;SERVER=010-068\SQLEXPRESS;UID=marcAndreL;Trusted_Connection=Yes;DATABASE=SMD 
```

但因为它对每个人来说都是不同的数据库，所以它不起作用。

我们如何构建自定义连接字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:32:55.073

我正在使用 SQL Server Express 2012 和 Windows 身份验证，因此使用[此处](https://stackoverflow.com/a/5283762/2548)提供的答案，我发现这对我有用：

```
Sub TestCon()
Dim cn As New ADODB.Connection

    cn.Open ServerConLocal
End Sub

Function ServerConLocal()
    ''OleDB Connection
    ServerConLocal = "Provider=sqloledb;Data Source=localhost\SQLEXPRESS;" _
    & "Initial Catalog=Test;Integrated Security=SSPI;"
End Function 
```

对于直通查询中的 ODBC 连接字符串，这对我有用：

```
ODBC;Driver={SQL Server Native Client 11.0};Server=localhost\SQLEXPRESS;Database=test; 
```

Trusted_Connection=是；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:53:33.283

查看有关合并复制的仅供下载的文章。[微软](http://msdn.microsoft.com/en-us/library/ms147295%28v=sql.105%29.aspx)_

# python - 将图片坐标转换为窗口坐标

> ID：13919161
> 
> 赞同：0
> 
> 时间：2012-12-17T17:39:01.843
> 
> 标签：python, image, pyqt, coordinates

我正在使用 Python 开发 Ubuntu。我有 (x,y) 这是图像坐标。我想将它们转换为屏幕坐标。使用 Qt 加载图像。谁能告诉我如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:04:49.327

QWidgets[`mapToGlobal()`](http://qt-project.org/doc/qt-4.8/qwidget.html#mapToGlobal)在 C++ 中有。我没有在python中使用它，但它应该可以工作。

所以在使用的时候，大概会是这个样子：

```
QWidget imgContainer
QPoint global_pt

# ... After the image is visible and loaded ...    

# Map the top left corner of the image to global screen coordinates
global_pt = imgContainer.mapToGlobal(QPoint(0,0)) 
```

希望有帮助。

# xml - 如何在不使用编程语言的情况下将数据库表转换为 xml 文件

> ID：13919165
> 
> 赞同：2
> 
> 时间：2012-12-17T17:39:30.833
> 
> 标签：xml

我想在不使用编程语言的情况下将模式表关系转换为 xml 文件。我只想知道它是如何工作的。下面是我的数据库表。

```
User(id, name, address)
     10  john  ca
     20  marsh ny 

Account(aid, title, balance, id)
         1   john   2000     10
         2   marsh  3000     20

Transaction(tid, date, amount, type, aid)
            100  1feb  500     Dr    1
            300  3mar  100     Cr    2 
```

**单击此链接可查看所有架构表：** [http ://www.mediafire.com/view/?eu9ggoei7py2efr](http://www.mediafire.com/view/?eu9ggoei7py2efr)

请查看上面的链接以查看我的所有表格，因为我没有超过 10 分可以在此处上传图片，因此请查看链接以查看我的表格。我应该为单个表制作单个 xml 文件吗？我真的被困在这一点上。打印事务的表更复杂。请给我一些建议。谢谢

**我应该为每个表制作三个单独的 xml 文件还是只制作一个？**

```
<?xml version="1.0" ?>
<user>
<id>10</id>
<name>john</name>
<address>ca</address>

<id>20</id>
<name>marsh</name>
<address>ny</address>
</user>

<?xml version="1.0" ?>
<account>
<aid>1</aid>
<title>john</title>
<balance>2000</balance>
<id>10</id>

<aid>2</aid>
<title>marsh</title>
<balance>3000</balance>
<id>20</id>
</account>

<?xml version="1.0" ?>
<transaction>
<tid>100</tid>
<date>1feb</date>
<amount>500</amount>
<type>Dr</type>
<aid>1</aid>

<tid>300</tid>
<date>3mar</date>
<amount>100</amount>
<type>Cr</type>
<aid>2</aid>

</transaction> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:42:41.410

您应该能够在网上找到一些可以做到这一点的工具，尤其是在不久前对 XML 数据库感兴趣的情况下。

这里有两个链接可以帮助您入门：

具有可以执行此操作的功能的工具： [http ://www.oxygenxml.com/xml_editor/database_to_schema.html](http://www.oxygenxml.com/xml_editor/database_to_schema.html)

与此相关的讨论，尽管是针对 SQL-server： [Get XML schema from database schema (SQL Server 2008 diagram)](https://stackoverflow.com/questions/1632347/get-xml-schema-from-database-schema-sql-server-2008-diagram)

如果您包含您的平台，则可能会获得更多帮助。

**编辑**

从您的回复看来，您只是想知道应该如何在 XML 中设置字段。简短的回答是你想要的任何方式。更长的答案是它取决于您要将 XML 提供给什么。

您可以尝试根据此建议进行映射：http: [//www.w3.org/1999/07/20-XML-DB-Mapping](http://www.w3.org/1999/07/20-XML-DB-Mapping)

如果您只想了解如何在 XML 中表示数据库模式，那么类似下面的内容可以适用于您的 Account 表。出于说明目的，我假装aid 是您的主键，id 是与 Transaction.tid 链接的外键：

```
<dbTable name="Account">
   <column name="aid" type="int" primaryKeyKey="true" />
   <column name="title" type="varchar(255)" />
   <column name="balance" type="float" />
   <column name="id" type="int" foreignKey="Transaction.tid" />
</dbTable> 
```

# c# - 覆盖显式实现接口的基类中的方法

> ID：13919166
> 
> 赞同：4
> 
> 时间：2012-12-17T17:39:33.613
> 
> 标签：c#, inheritance, interface

[编辑]

由于比原始帖子所需的复杂性要多一些——对此我深表歉意——我将尝试简化一些事情。

最初，我有一个看起来像这样的基类：

```
public class OurViewModel
{
  public bool Validate(ModelStateDictionary modelState){...}
} 
```

我的类使用 new 关键字继承并隐藏了该方法：

```
public class MyViewModel : OurViewModel
{
  public new bool Validate(ModelStateDictionary modelState) {...}
} 
```

同时，出现了 IValidatableObject 接口：

```
public interface IValidatableObject
{
  IEnumerable<ValidationResult> Validate(ValidationContext validationContext);
} 
```

现在，OurViewModel （遗憾地）也发生了变化。它看起来像这样：

```
public class OurViewModel : IValidatableObject
{
  IEnumerable<ValidationResult> IValidatableObject.Validate(ValidationContext validationContext) {..}
} 
```

我现在需要做的是再次在 MyViewModel 中隐藏 Validate 方法，但我不知道如何使用当前的安排来实现。有没有解决这个问题的好方法？

（FWIW，我同意向基类添加新接口并不是做事的最佳方式，但这就是这里发生的事情。）

* * *

[原帖]

我在我的一个类中覆盖方法时遇到了麻烦。有人从这个改变了基类的继承模型：

```
public class OurViewModel : IntlViewModelBase<OurResources> 
```

对此：

```
public class OurViewModel : IntlViewModelBase<OurResources>, IValidatableObject 
```

IValidatableObject 有一个方法签名，`Validate()`：

```
IEnumerable<ValidationResult> Validate(ValidationContext validationContext); 
```

`OurViewModel`有一个 Validate 方法，如下所示：

```
public bool Validate(ModelStateDictionary modelState) 
```

...现在是更改后的情况：

```
IEnumerable<ValidationResult> IValidatableObject.Validate(ValidationContext validationContext) 
```

与此同时，我的班级继承自`OurViewModel`. 它使用`new`关键字来实现自己的布尔版本的验证。

似乎我不再能够隐藏 Validate 方法，因为我的类没有实现 IValidatableObject。我现在覆盖该方法的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T05:45:03.410

我想我已经足够回答这个问题了，并决定用这里提供的更简单的版本再试一次——[这个](https://stackoverflow.com/questions/13926964/overriding-hiding-an-explicity-implemented-interface-method)

感谢所有回复的人。管理员可以关闭此线程或将其瞄准/链接到新问题吗？我不确定在这样的情况下 SO 网络礼节是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:46:55.000

我可能完全错过了这一点，但这对我来说编译得很好（使用 stub 类`OurResources`和`IntlViewModelBase<T>`）。

```
public class OurViewModel : IntlViewModelBase<OurResources>, IValidatableObject
{
    public bool Validate(ModelStateDictionary modelState)
    {
        throw new NotImplementedException();
    }

    IEnumerable<ValidationResult> IValidatableObject.Validate(ValidationContext validationContext)
    {
        throw new NotImplementedException();
    }
}

public class MyViewModel : OurViewModel
{
    public new bool Validate(ModelStateDictionary modelState)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:47:29.260

如果要覆盖新的 Validate 方法（IValidatableObject.Validate），只需添加 virtual 关键字。

```
public virtual IEnumerable<ValidationResult> Validate(ValidationContext validationContext) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T14:24:43.897

一些事情 ：

1.

> 如果对于基类中的每个方法都希望在派生类中有新的实现，那么从基类派生是没有意义的。继承的主要目的是代码重用。所以你可以简单地从父子中删除关系。

2.

> 让我们假设在您的基类中有一些实际继承的方法。在那种情况下，我认为用 Virtual 关键字标记基类的接口成员并在派生类中将其标记为新成员应该不会有问题。

--

> 如果您询问实施这种情况的不同方式，那么我们需要知道您的目标是什么。如果目标是让派生成员有新的定义，那么更好的方法是在派生类中显式实现接口。

请提及您面临的确切问题？是您无法使用新关键字还是您正在寻求不同的方法来解决这种情况。

# android - 如何保持两个屏幕组件之间的焦点？

> ID：13919167
> 
> 赞同：0
> 
> 时间：2012-12-17T17:39:34.650
> 
> 标签：android, android-activity, focus, android-fragments

在我的两屏应用中，第一个屏幕有一些按钮，从这里控制跳转到其他活动。现在当控制从第二个返回到第一个活动时，如何关注最后一个操作项？

另外请建议在两个片段之间进行通信时如何做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:59:59.563

您是否尝试过`requestFocus()`在第一个活动的`onResume()`方法中调用控件？

如果您需要记住点击了哪个控件（因此应该关注哪个控件），您可以在启动第二个活动的任何代码（例如该控件的`OnClickListener`）中保存对的引用，并在`onResume()`.

# asp.net - HttpContext.Current.User.Identity.Name windows 身份验证问题

> ID：13919172
> 
> 赞同：0
> 
> 时间：2012-12-17T17:39:53.467
> 
> 标签：asp.net, visual-studio, iis

由于天气相关的问题，我不得不搬到另一个办公室。在我们的旧办公室中，当我们使用 Windows 身份验证启动 IIS 应用程序时，该应用程序会提取您的 Windows 信息并立即使用您的凭据登录。在我们的新位置，我有相同的应用程序和相同的设置，或者我认为当用户启动应用程序时，会打开一个 Windows 用户名/密码框。正确的信息存储在那里，用户只需按 Enter 键并继续前进，但我想知道为什么它不像在我的其他位置那样自动登录？是否需要在 web.config 中进行设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:43:50.777

Windows 上缓存的凭据会影响这一点。如果 IP 更改或机器名称更改，您可以通过进入控制面板中的 CredentialManager 并删除旧的来轻松修复，然后当您告诉它下次保存凭据时，它会带您进入。

[https://security.stackexchange.com/questions/15574/how-do-i-clear-cached-credentials-from-my-windows-profile](https://security.stackexchange.com/questions/15574/how-do-i-clear-cached-credentials-from-my-windows-profile)

# sql - 将此 IPv6 修改为 Binary 语句以处理两个以上连续的零部分

> ID：13919173
> 
> 赞同：1
> 
> 时间：2012-12-17T17:39:54.050
> 
> 标签：sql, sql-server, sql-server-2005

我正在使用 SQL 2005。我希望有人可以帮助我修改此语句，以便它可以处理多个连续的零部分。此语句将 IPv6 地址转换为二进制。

假设您有这个 IPv6 地址：2001:db8:85a3:0000:0000:8a2e:370:7334。

可以将其重写为 2001:db8:85a3::8a2e:370:7334 以消除连续的零部分。

但是，下面的 SQL 语句只能处理上面的 IPv6 地址，如果它用完整的符号写成 2001:db8:85a3:0000:0000:8a2e:370:7334，给我一个二进制结果 0x20010DB885A3000000008A2E03707334。

如何修改以下语句，以便我可以处理写为 2001:db8:85a3::8a2e:370:7334 的 IPv6 地址？甚至是 ::1 之类的地址？

```
DECLARE    @ipstr VARCHAR(50)
SET        @ipstr = '2001:db8:85a3::0000:8a2e:370:7334'
SELECT     CAST('' AS XML).value('xs:hexBinary( sql:column("y.ips") )', 'varbinary(16)')
FROM       (
            SELECT ips = (
                          SELECT  RIGHT('0000' + SUBSTRING(ips, NUMBER, CHARINDEX(':', ips, NUMBER) - NUMBER), 4)
                          FROM    master.dbo.spt_values
                                 ,(SELECT ips = ':' + @ipstr + ':') x
                          WHERE   TYPE = 'P'
                                  AND NUMBER BETWEEN 2 AND LEN(ips)
                                  AND SUBSTRING(ips, NUMBER-1, 1) = ':'
                          FOR     XML PATH('')
                         )
           ) y 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:21:34.317

This probably isn't the cleanest solution, but it works:

```
WITH cteRawSections (RowNumber, ips) As
(
   -- Split the address into sections:
   SELECT
      ROW_NUMBER() OVER (ORDER BY number),
      Substring(ips, number, CharIndex(':', ips, number) - number)
   FROM
      master.dbo.spt_values
      CROSS APPLY
      (SELECT ips = ':' + @ipstr + ':') As c
   WHERE
      type = 'P'
   And
      number Between 2 And Len(ips)
   And
      Substring(ips, number - 1, 1) = ':'
),
cteSections (RowNumber, ips) As
(
   -- Pad the non-empty sections:
   SELECT
      RowNumber,
      Right('0000' + ips, 4)
   FROM
      cteRawSections
   WHERE
      ips != ''

   UNION ALL

   -- Include the missing sections:
   SELECT
      (SELECT Min(RowNumber) FROM cteRawSections WHERE ips = ''),
      '0000'
   FROM
      master.dbo.spt_values
   WHERE
      type = 'P'
   And
      number >= 1
   And
      number <= (SELECT 8 - Count(1) FROM cteRawSections WHERE ips != '')
),
cteJoined As
(
   -- Join the sections in order:
   SELECT ips = 
   (
      SELECT ips
      FROM cteSections
      ORDER BY RowNumber
      FOR XML PATH(''), TYPE
   ).value('.', 'varchar(max)')
)
SELECT
   CAST('' As XML).value('xs:hexBinary(sql:column("y.ips"))', 'varbinary(16)')
FROM
   cteJoined As y
; 
```

[http://www.sqlfiddle.com/#!3/d41d8/7258/0](http://www.sqlfiddle.com/#!3/d41d8/7258/0)

**NB:** Your sample address, `2001:db8:85a3:0000:0000:0000:8a2e:370:7334`, is too long to be a valid IPv6 address.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T04:38:06.697

在 Set @ipstr 语句之后插入：

```
 declare @colonCount int = len(@ipstr)-len(replace(@ipstr,':',''))
    if(@colonCount<7)
        set @ipstr=replace(@ipstr,'::', replicate( ':0',7-@colonCount+1) +':') 
```

# php - 输出反向计数foreach循环php

> ID：13919174
> 
> 赞同：0
> 
> 时间：2012-12-17T17:39:55.933
> 
> 标签：php, foreach, count, reverse

我有以下 foreach 循环：

```
<?php $arrayforward = get_field('background_slider');
        $arrayreversed = array_reverse($arrayforward);
        $count=1;

        foreach($arrayreversed as $subarray) {

        $subfield1 = $subarray['background_image'];
        $subfield2 = $subarray['background_image_alt'];
        $subfield3 = $subarray['text_image'];
        $subfield4 = $subarray['text_image_alt']; ?>

        <div id="slide<?php echo $count; ?>" class="contentslider_wrapper">
            <div class="fullpageimage">
                <img id="slideImg<?php echo $count; ?>" src="<?php echo $subfield1; ?>" alt="<?php the_sub_field('background_image_alt'); ?>" />
                <img id="textImg<?php echo $count; ?>" class="slidetext" src="<?php echo $subfield2; ?>" alt="<?php the_sub_field('text_image_alt'); ?>" />
            </div>
        </div>

        <?php $count++; }; ?> 
```

我需要帮助让计数反转。我正在寻找的输出如下：

```
<div id="slide4"></div>
<div id="slide3"></div>
<div id="slide2"></div>
<div id="slide1"></div> 
```

对此的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:44:01.183

更改`$count=1;`为`$count = sizeof($arrayreversed);`

并`$count++;`_`$count--;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:45:31.447

使用数组的大小作为初始计数然后每次迭代减去 1 怎么样？

```
<?php $arrayforward = get_field('background_slider');
    $arrayreversed = array_reverse($arrayforward);
    $count=count($arrayreversed);

    foreach($arrayreversed as $subarray) {

    $subfield1 = $subarray['background_image'];
    $subfield2 = $subarray['background_image_alt'];
    $subfield3 = $subarray['text_image'];
    $subfield4 = $subarray['text_image_alt']; ?>

    <div id="slide<?php echo $count; ?>" class="contentslider_wrapper">
        <div class="fullpageimage">
            <img id="slideImg<?php echo $count; ?>" src="<?php echo $subfield1; ?>" alt="<?php the_sub_field('background_image_alt'); ?>" />
            <img id="textImg<?php echo $count; ?>" class="slidetext" src="<?php echo $subfield2; ?>" alt="<?php the_sub_field('text_image_alt'); ?>" />
        </div>
    </div>

    <?php $count--; }; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:43:52.240

首先获取数组中键的数量并将其分配为`$count`，如下所示：

```
$count = count($arrayreversed); 
```

然后替换为`$count++`，`$count--`一切就绪。

# visual-studio-2012 - 如何删除 VS2012 中的顶级菜单？

> ID：13919176
> 
> 赞同：1
> 
> 时间：2012-12-17T17:40:04.707
> 
> 标签：visual-studio-2012

我想以极简主义的方式工作。所以我试图删除一些我不使用的顶级菜单。

我在“自定义”窗口中看不到任何明显的东西。我错过了一些简单的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:17:33.460

你很亲密。返回自定义（右键单击菜单或工具栏区域），然后选择“命令”选项卡而不是默认的“工具栏”。

选择“菜单栏”选项后，您可以删除、移动或创建高级菜单项，或者深入每个菜单并自定义项。如果输入有误，请单击全部重置。

对于极简编码，我也是全屏模式（VIEW -> Full Screen or `Shift`+ `Alt`+ `Enter`）的粉丝。

# zend-framework - Zend框架中的模块配置

> ID：13919186
> 
> 赞同：0
> 
> 时间：2012-12-17T17:40:43.620
> 
> 标签：zend-framework, frameworks, multi-module

我正在使用 Zend Framework 中的多模块 CMS。我想创建一个这样的结构：

```
testsite/
index.php
library/
    zend/
    test/
application/
    configs/
        application.ini
    modules/
        users/
            controllers/
            models/
        ....
    frontend/
        controllers/
        models/
        ....
    backend/
        controllers/
        models/
        ...
    bootstrap.php 
```

我创建了以下代码：

```
//in application.ini
resources.frontController.defaultModule = "frontend"
resources.frontController.defaultControllerName = "index"
resources.frontController.defaultAction = "index"
resources.frontController.plugins.init = "Test_Controller_Plugin_Initializer"

//in bootstrap.php
 protected function _initControllers()
{
    $this->bootstrap('frontController');
    $this->_front = $this->getResource('frontController');

    $this->_front->addControllerDirectory(APPLICATION_PATH . '/backend/controllers', 'backend');
    $this->_front->addControllerDirectory(APPLICATION_PATH . '/frontend/controllers', 'frontend');
}

 //in Test/controllers/plugin/initializer.php
 public function preDispatch(Zend_Controller_Request_Abstract $request)
{          
    $front = Zend_Controller_Front::getInstance();
    $request = $front->getRequest();

    $request->setModuleName('frontend');
    $request->setControllerName('index');
    $request->setActionName('index');
} 
```

当我转到我的基本 URL 时它不起作用`.../testsite`。你能告诉我我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T13:40:08.507

为了使它工作，你希望它如何引用[Zend_Application_Resource_Frontcontroller](http://framework.zend.com/manual/1.12/en/zend.application.available-resources.html#zend.application.available-resources.frontcontroller)

具体来说，您需要将一组*'module' => 'controller'*目录对传递给`resources.frontController.controllerDirectory`.

> ***controllerDirectory：***指定单个控制器目录的字符串值，或模块到控制器目录对的数组。

我怀疑这会解决所有问题，但它应该让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:20:24.843

你试过把你的模块放在模块目录中吗？IE：

```
testsite/
index.php
library/
    zend/
    test/
application/
    configs/
        application.ini
    modules/
        users/
            controllers/
            models/
        ....
        frontend/
            controllers/
            models/
            ....
        backend/
            controllers/
            models/
            ...
    bootstrap.php 
```

Wich 通常是 zf 期望找到其模块的地方。您可能需要调整 rapplication.ini 设置以反映这一点。

# c - 如何在 CMAKE 中使用 FLEX

> ID：13919189
> 
> 赞同：3
> 
> 时间：2012-12-17T17:40:51.520
> 
> 标签：c, cmake, lex, flex-lexer

我试图找出在 Cmake 文件中仅使用 flex 来构建共​​享库时我做错了什么。

我基本上有以下

```
find_package(FLEX)
FLEX_TARGET(Test ../src/test.l ../src/test.c)
set(SRC_FILES mysource.c ${FLEX_Test_OUTPUTS})
add_libary(testlib ${SRC_FILES})
target_link_libraries(testlib crypto c ${FLEX_LIBRARIES}) 
```

这给了我一个问题，说它找不到 ../src/test.c

有什么想法可以确保 Lex 先跑吗？其次，我怎样才能将我的 -L 和 -d 选项传递给 lex（就像我在这个 makefile 的正常的 pre-cmake 版本中所做的那样）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T03:57:03.743

为什么您希望输出文件位于源目录中？

我建议使用`${CMAKE_CURRENT_BINARY_DIR}`：

```
FLEX_TARGET(Test ../src/test.l ${CMAKE_CURRENT_BINARY_DIR}/../src/test.c) 
```

至于

> 有什么想法可以确保 Lex 先跑吗？

你不需要这样做，CMake 可以自己猜测这个依赖。我认为问题在于使用源目录作为输出文件，或者该目录在运行`../src`之前不存在。`flex`

> 其次，我如何将我的 -L 和 -d 选项传递给 lex

在输出参数之后列出它们：

```
FLEX_TARGET(Test ../src/test.l ${CMAKE_CURRENT_BINARY_DIR}/../src/test.c -L -d) 
```

# android - Android：SurfaceView OnClick“不幸的是，......停止......”

> ID：13919190
> 
> 赞同：1
> 
> 时间：2012-12-17T17:40:57.060
> 
> 标签：android

我想将位图实现到surfaceview，并在单击时尝试通过按钮编辑图像。但有一个问题。当我在模拟器上运行它时，一切都是正确的，直到按下按钮。“不幸的是，......停止......”出现在屏幕上，程序被迫关闭。请帮我弄清楚。非常感谢。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_effect_ver1);

    SurfaceView surfaceView01 = (SurfaceView) findViewById(R.id.surfaceView1);
    btn1 = (Button) findViewById(R.id.button1);
    btn2 = (Button) findViewById(R.id.button2);
    btn3 = (Button) findViewById(R.id.button3);

    res = getResources();
    bmpDraw =(BitmapDrawable) res.getDrawable(R.drawable.images);
    bmp =bmpDraw.getBitmap(); 
```

我想删除这个 Onclick 方法。但是我怎么能声明 surfaceView = (SurfaceView)v; 没有 View v，并将这个移到 Oncreat？

```
 surfaceView01.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            surfaceView = (SurfaceView)v;

            canvas = surfaceView.getHolder().lockCanvas();
            Paint paint =new Paint();

            canvas.drawColor(Color.BLACK);

            canvas.drawBitmap(bmp, 50, 150, paint);
            surfaceView.getHolder().unlockCanvasAndPost(canvas);
        }
    }); 
```

这是logcat

```
12-17 17:24:26.490: E/AndroidRuntime(583): FATAL EXCEPTION: main
12-17 17:24:26.490: E/AndroidRuntime(583): java.lang.ClassCastException: android.widget.Button cannot be cast to android.view.SurfaceView
12-17 17:24:26.490: E/AndroidRuntime(583):  at com.example.effect_ver1.Effect_ver1$2.onClick(Effect_ver1.java:61)
12-17 17:24:26.490: E/AndroidRuntime(583):  at android.view.View.performClick(View.java:3480)
12-17 17:24:26.490: E/AndroidRuntime(583):  at android.view.View$PerformClick.run(View.java:13983)
12-17 17:24:26.490: E/AndroidRuntime(583):  at android.os.Handler.handleCallback(Handler.java:605)
12-17 17:24:26.490: E/AndroidRuntime(583):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-17 17:24:26.490: E/AndroidRuntime(583):  at android.os.Looper.loop(Looper.java:137)
12-17 17:24:26.490: E/AndroidRuntime(583):  at android.app.ActivityThread.main(ActivityThread.java:4340)
12-17 17:24:26.490: E/AndroidRuntime(583):  at java.lang.reflect.Method.invokeNative(Native Method)
12-17 17:24:26.490: E/AndroidRuntime(583):  at java.lang.reflect.Method.invoke(Method.java:511)
12-17 17:24:26.490: E/AndroidRuntime(583):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-17 17:24:26.490: E/AndroidRuntime(583):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-17 17:24:26.490: E/AndroidRuntime(583):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:59:44.537

按钮单击侦听器中的 View v 指的是 Button 的视图，而不是 SurfaceView。删除并更改对to`surfaceView = (SurfaceView)v;`的所有引用`surfaceView``surfaceView01`

以下应该对你有用，但我现在没有办法测试它。

```
private SurfaceView surfaceView01;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_effect_ver1);

    surfaceView01 = (SurfaceView) findViewById(R.id.surfaceView1);
    btn1 = (Button) findViewById(R.id.button1);
    btn2 = (Button) findViewById(R.id.button2);
    btn3 = (Button) findViewById(R.id.button3);

    res = getResources();
    bmpDraw =(BitmapDrawable) res.getDrawable(R.drawable.images);
    bmp =bmpDraw.getBitmap();

    canvas = surfaceView01 .getHolder().lockCanvas();
    Paint paint =new Paint();

    canvas.drawColor(Color.BLACK);
    canvas.drawBitmap(bmp, 50, 150, paint);
    surfaceView01 .getHolder().unlockCanvasAndPost(canvas);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:52:11.223

在您的第二个单击侦听器中，您将单击的目标投射到 SurfaceView。该单击的目标是您添加侦听器的按钮。也就是说，它是一个按钮。按钮不能被投射到 SurfaceView，因此 ClassCastException。

额外提示：阅读堆栈跟踪，查看类中的行号（在本例中为 61）并查找可能导致 ClassCastException 的原因。在您的情况下，第 61 行包含一个演员表。它表明您`v`不是 SurfaceView，而是 Button。此时您应该能够连接这些点并将该 Button 与之前使用的 Button btn1 相关联。

您可能想改用surfaceView01。您可以将其设为 final 或将其设为类成员以直接从两个点击侦听器中访问它。

# c - 为什么我在引用来自不同函数的行时收到此编译器错误？

> ID：13919194
> 
> 赞同：0
> 
> 时间：2012-12-17T17:41:19.907
> 
> 标签：c, function

我只是想将函数get_string中的copywords传递给main中的fileinput。

编译器在引用第 5 行（即 main 的第一行）时在函数 get_string 中说错误。

```
#include <stdio.h>
#include <stdlib.h>

char get_string (char * copywords[100])
int main (){
char fileinput[100];
get_string(fileinput[100]);
;

char get_string (char * copywords[100]) {
FILE *fp;
int c;
char copywords[100];
fp = fopen("gues20.txt", "r");
if (fp == NULL)
exit(1);
else {
while(fgets(copywords , 100, fp) == EOF){
}
fclose(fp);
}
return (copywords);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:43:02.253

您在`get_string()`, 之前的原型中缺少一个分号`main()`。

```
char get_string (char * copywords[100]);
                                       ^
                                       |
                                   IMPORTANT 
```

这会导致函数定义嵌套，这是不允许的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:43:57.730

声明之后没有分号`get_string`，因此编译器不知道声明已经结束，当它看到`int`from时`int main`，它会感到困惑，因为`int`在函数声明的参数列表之后是​​不合法的。

PS：您的主要功能也没有右括号，但这是一个不同的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:08:03.540

如果您使用为您缩进代码的工具或编辑器，您会一眼看出有些奇怪。你错过了一个`;`，这就是一个原因。然后，你把 a`;`放在 a`}`应该去的地方，所以有一个不平衡的`{`。不要低估缩进和呈现良好的代码对您和任何读者的有用性。

```
#include <stdio.h>
#include <stdlib.h>

char get_string (char * copywords[100]);

int main (){
    char fileinput[100];
    get_string(fileinput[100]);
}

char get_string (char * copywords[100]) {
    FILE *fp;
    int c;
    char copywords[100];  // redeclared
    fp = fopen("gues20.txt", "r");
    if (fp == NULL)
        exit(1);
    else {
        while(fgets(copywords , 100, fp) == EOF) ; // ??
        fclose(fp);
    }
    return copywords;  // (*)
} 
```

您的代码显示其他错误，例如重新声明`copywords`，返回指针（指向无效的内存区域）而不是`char`. 简而言之，您的代码**将无法编译**，即使您努力使其可编译，也可能无法执行您想要的操作。

# javascript - 数组索引问题

> ID：13919195
> 
> 赞同：0
> 
> 时间：2012-12-17T17:41:21.143
> 
> 标签：javascript, xml, ajax, arrays

所以我会直接跳到它......
我是一名测试自动化工程师，我正在制作一个由 JSON 驱动的“关键字驱动”测试系统，它与 Selenium 测试结合以在 Web 浏览器上运行。

“关键字”存储为 XML 文件，我有一个 JavaScript 函数，它将这些关键字加载到一个数组中，并存储该关键字的索引。到 paf.keywordIndex

### 例子

* * *

```
$.get("getSteps.php", function(keywords) {
            paf.keywords = eval(keywords); // stores into an array...

            paf.keywordIndex = -1;
            for ( var i = 0 ; i < paf.keywords.length ; i++ ) {

                // for each path...
                /* alert(paf.keywords[i]); */

                $.ajax({url: "./_keywords/" + paf.keywords[i], success: function(xml) {         
                    paf.xml = xml;

                    paf.keywordIndex++;
                    var title = $(xml).find("keyword").attr("title");
                    //var name = $(xml).find("keyword").attr("name");

                    paf.buffer += ("<option value=\"./_keywords/"+paf.keywords[paf.keywordIndex]+"\">"+title+"</option>");
                },
                async: false
                //cache: false
                });

            }

            $(stepSelectionLocator).html(paf.buffer);
        }); 
```

`getSteps.php`是一个 php 服务，它返回一个 json 数组中的所有 xml 关键字。例如 `["Login.xml","EndSession.xml", "SelectResult.xml", etc...]`

* * *

现在这个函数可以工作了，但唯一的问题是，它没有以任何方式排序。所以输出将是 -

*   登录 (Login.xml)
*   选择一个结果 (SelectResult.xml)
*   结束会话 (EndSession.xml)

* * *

为了解决这个问题，我在 my so 中添加了一个额外的属性，`<keyword>`现在它`<keyword area="basic">`表明这是一个基本步骤。现在我的功能是 -

```
$.get("getSteps.php", function(keywords) {
            paf.keywords = eval(keywords); // stores into an array...

            paf.keywordIndex = -1;
            for ( var i = 0 ; i < paf.keywords.length ; i++ ) {

                // for each path...
                /* alert(paf.keywords[i]); */

                $.ajax({url: "./_keywords/" + paf.keywords[i], success: function(xml) {         
                    paf.xml = xml;

                    paf.keywordIndex++;
                    var title = $(xml).find("keyword").attr("title");
                    var area = $(xml).find("keyword").attr("area");
                    //var name = $(xml).find("keyword").attr("name");

                    paf.buffer.push(area.toUpperCase() + ": " + title);
                },
                async: false
                //cache: false
                });

            }

            paf.buffer.sort(); // array is sorted...

            paf.buffer2 = "";
            paf.keywordIndex = -1;
            for ( var a in paf.buffer ) {
                paf.keywordIndex++;
                paf.buffer2 += "<option value=\"./_keywords/"+paf.keywords[paf.keywordIndex]+"\">"+ paf.buffer[a] + "</option>"; 
            }

            $(stepSelectionLocator).html(paf.buffer2.toString().replace(",", ""));
        }); 
```

现在输出是

*   基本：结束会话 (Login.xml)
*   基本：登录（SelectResult.xml）
*   结果：选择一个结果（EndSession.xml）

所以我已经确定索引是问题所在。但是，我无法找到解决此问题的方法..

我对替代方案持开放态度，因此，如果您找到一种更简单的索引方法，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:57:50.053

首先，很高兴*确切*地知道您从初始请求中获得的数据。

```
$.get("getSteps.php", function (keywords) {
    paf.keywords = JSON.parse(keywords); // eval is bad! Use JSON.parse instead.
    console.log(paf.keywords); // what does it output in the console?
    ... 
```

其次，您可以仅使用`i`变量来引用当前索引。如果您不在`paf.keywordIndex`其他地方使用，则可以将其删除，因为它是多余的。

第三，您是否绝对、绝对、100% 确定您的 ajax 请求是***S** *同步的？**如果他们不是 - 响应将随机到达，**整个事情将需要不同的方法。

最后，如果您想在获得所有关键字后对关键字应用排序，我建议将它们作为对象推送到缓冲区数组中：

```
buffer.push({
    keyword: keywordName, // this is the keyword name
    keywordIndex: i, // this is the initial index
    keywordArea: areaObtainedFromXML // this is the area you get from xml
}); 
```

通过使用上述方法，您将能够以多种方式对缓冲区进行排序，同时保留初始顺序。

**[请在这个 jsfiddle](http://jsfiddle.net/6nfyT/2/)**看一个人为的例子。

# rally - 获取用户故事的 PortfolioItem 详细信息

> ID：13919196
> 
> 赞同：1
> 
> 时间：2012-12-17T17:41:21.353
> 
> 标签：rally

我正在尝试使用以下查询获取用户故事的 Portfio 项目 ID 和名称：

```
 var queryConfig = { type : 'HierarchicalRequirement', key : 'stories', fetch: 'FormattedID,Name,PortfolioItem,Parent' };
   var rallyDataSource = new rally.sdk.data.RallyDataSource('__WORKSPACE_OID__', '__PROJECT_OID__', '__PROJECT_SCOPING_UP__', '__PROJECT_SCOPING_DOWN__'); 
```

然后遍历它以提取 FormattedID、Name 和 PortfolioItem.FormattedID，但 PortfolioItem 总是以未定义的形式返回。用户故事链接到的 PortfolioItem 可能在另一个 Rally 项目（相同的工作区）中，所以我不确定是否是这样。

无论如何我可以做到这一点吗？

干杯

马丁

解决它！！我需要添加： rallyDataSource.setApiVersion('1.37');

在调用之前： rallyDataSource.findAll(queryConfig, displayUserStories);

干杯

马丁

# jquery - jQuery 方法在 Safari 6 中不起作用

> ID：13919199
> 
> 赞同：7
> 
> 时间：2012-12-17T17:41:29.383
> 
> 标签：jquery, safari, safari6

把我的头发拉出来。简单的 jQuery 方法在 Safari 6 中不起作用。

以下代码块适用于我测试过的所有其他浏览器，除了 Safari 6。它在 Safari 5 和更早版本中运行良好，在 Firefox 中运行良好，在 IE 中运行良好。它在 Chrome 中也可以正常工作。

该警报确实在 Safari 6 中弹出，因此该功能仍然被触发，但其他 3 种方法中的任何一种都没有发生任何事情。

**----- 更新 ----- 在几台机器上进一步测试后......我发现它只在 Mac OSX 10.8 的 Safari 6 中无法工作。该代码在 OSX 10.7 中相同版本的 Safari 中运行良好。--------------------**

我正在运行 jQuery 1.8.3。我的页面验证为 HTML5。

HTML：

```
<div id="fileUploadFormContainer">

    <form id="fileUploadForm" action="/upload/do_upload/<?=$row->project_id?>" method="post" enctype="multipart/form-data" >
        <fieldset>
        <label for="userfile">Attach a file</label>
            <input type="file" name="userfile" id="userfile" /><br />
            <input type="submit" id="fileUploadSubmit" value="Upload file" />
            <img class="loadingBar" id="fileUploadLoadingBar" src="/images/indicators/ajax-loader.gif" alt="" />
        </fieldset>
    </form>
</div><!-- end fileUploadFormContainer --> 
```

CSS：

```
.loadingBar {
    display: none;
} 
```

JavaScript：

```
$(function(){
    // Submit Buttons
    $('#fileUploadSubmit').click(function()
    {
        $('#fileUploadSubmit').attr('value', 'Uploading');
        $('#fileUploadSubmit').fadeTo('fast',0.6);
        $('#fileUploadLoadingBar').fadeIn('fast');
        alert('Finished');
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:42:18.747

我可能是错的，但我认为您的问题是表单在您的 javascript 运行之前提交。您可能需要使用 preventDefault 来防止这种情况发生。您还可以将按钮从提交按钮更改为 type="button"，这也有帮助。哎呀...快速编辑..我还将您的警报放在回调中，以便它在 fadeIN 发生后运行...您可以保留或更改它。

```
$(function(){
    // Submit Buttons
    $('#fileUploadSubmit').click(function(e)
    {
        e.preventDefault();
        $('#fileUploadSubmit').attr('value', 'Uploading');
        $('#fileUploadSubmit').fadeTo('fast',0.6);
        $('#fileUploadLoadingBar').fadeIn('fast', function() {
            alert('Finished');
        });

    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:52:23.320

您可以使用 .submit() evnet（而不是单击）。$('form').bind('submit',function(){...代码...});
但是因为您正在尝试上传文件，所以我建议您使用一些 ajax 技术和/或 jquery 插件。
有很多关于使用 ajax 上传文件的不错的教程（使用 google）
，这里有一个来自[Nettuts+ ajax 文件上传](http://net.tutsplus.com/tutorials/javascript-ajax/uploading-files-with-ajax/)的我喜欢的教程。

# scala - 斯卡拉。太多的小功能，太多的类？

> ID：13919200
> 
> 赞同：4
> 
> 时间：2012-12-17T17:41:48.393
> 
> 标签：scala

我是 Scala 新手，但有一些 Java 背景。

在编写 Scala 代码时，以这种方式处理 Option 参数很有用：

```
val text = Option("Text")
val length = text.map(s => s.size) 
```

但`s => s.size`据我所知，每一个都带来了新的`Function1[A, B]`. 如果我进行例如 8 次这样的转换，它将带来 8 个额外的类。在绑定表单时，我非常频繁地使用这些片段，所以问题是：

我应该少用它，或者用 if 表示法代替它，还是这样的类泛滥对 JVM 不是很重要，或者 Scala 编译器有什么魔力？

更新：一个可能更具体的例子是：

```
case class Form(name: Option[String], surname: Option[String])
val bindedForm = Form(Option("John"), Option("Smith"))
val person = new Person
bindedForm.name.foreach(a => person.setName(a))
bindedForm.surname.foreach(a => person.setSurname(a)) 
```

它会产生两个不同的`Function1[String, String]`类吗？如果有数百个这样的转换怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T18:22:16.623

如果您正在为 Android 开发，那么您可能会使用 Dalvik 运行代码，它有一个烦人的 64k 方法限制（尽管有[一些方法可以绕过它](http://android-developers.blogspot.com/2011/07/custom-class-loading-in-dalvik.html)）。由于每个类都需要几个方法（构造函数和应用），这可能是个问题。

否则，Sun/Oracle JVM 上的类会进入 PermGen 空间，如果您确实需要，可以在启动 JVM 时对其进行调整。真的没关系。是的，你会有很多类，可能有数万个，但是 JVM 可以很好地处理它（至少如果你愿意提前告诉它会发生什么）。除非你知道你很可能会遇到一些不寻常的限制，否则这不是你应该担心的事情。

更多时候，人们可能会担心创建所有这些函数会降低性能——但如果你现在实际上没有遇到这种损失，也不要担心；这是 Scala 编译器原则上可以解决的问题，而且它一直在变得越来越聪明。所以只需以惯用的方式编写代码，除非它现在是一个大的性能问题，否则只希望编译器会来拯救你。有很大的机会，甚至更好的机会是，您会发现以“正确”的方式编写它并在需要时重构性能比采用使用更笨拙的构造的策略更容易，以防万一成为问题。当然，有些地方你可能提前知道肯定是瓶颈，

# android - 有人可以解释一下 startActivity(intent) 和 startActivityForResult(intent) 是如何异步的吗？

> ID：13919201
> 
> 赞同：21
> 
> 时间：2012-12-17T17:41:54.800
> 
> 标签：android, multithreading, asynchronous, android-activity, synchronous

如果异步线程是独立于主线程运行且不干扰主线程的线程......

new`Activity`启动后是否不占用主线程`startActivity(intent)`？

我读到的大部分内容都说这些都是异步的，但是有相当多的相互矛盾的答案，而且说这句话的人并没有真正给出令人信服的论据。

因此，如果有人清楚这一点并且可以解释为什么它们是同步/异步的，我将是一个非常感激的人！

干杯

编辑：所以我从这两个好人和网上的一些东西中得出答案......

将活动带入同步/异步的混合中可能会导致大量的负载出现。但它仍然指的是...的原则

`Synchronous`方法/命令必须在调用堆栈继续之前完成。

`Asynchronous`方法/命令（通常在线程/AsyncTask 中完成）并行继续，允许执行的主线程继续。（它可以在自己的时间返回）

`startActivity(intent)`和方法是异步的`startActivityForResult(intent)`，因为它们是非阻塞的，并且允许执行线程在执行相应任务的同时继续执行。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-17T17:54:34.653

`startActivity(intent)`并且`startActivityForResult(intent)`是异步的，因为这些方法在不启动 Activity 的情况下立即返回。实际上，他们安排一个 Activity 仅在当前 Activity 的生命周期事件完成后启动。

要点是，如果你有一些东西，需要一些时间才能完成，在`onPause()`第一个活动的方法中，新`Activity`的开始会很慢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T11:45:36.387

当您`startActivityForResult`仍然执行异步调用时。您的调用者活动被暂停，新的活动在另一个进程中启动（如果它在不同的用户下运行）。

但是，当被调用的活动终止[设置结果](https://developer.android.com/reference/android/app/Activity.html#setResult%28int%29)时，您的活动将恢复并且您将[onActivityResult](https://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)作为包含结果的回调调用。

# app-store - 允许最终用户购买商家产品的免费 iOS 应用程序？

> ID：13919202
> 
> 赞同：-1
> 
> 时间：2012-12-17T17:41:57.607
> 
> 标签：app-store, in-app-purchase

任何人都知道允许最终用户购买商家产品的免费 iOS 应用程序的政策吗？

例如，沃尔玛 iOS 应用程序有一张购物卡并允许他们的客户使用该应用程序购买东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:46:06.060

如果它是数字的，那么你必须通过应用内购买来提供它（并给苹果 30%）。

它是一种实体产品，然后您可以这样做（查看 Amazon/Tesco/Argos 应用程序）。

# php - 我有一个广播系统，用于在现场与用户交谈，将正确的时间保持到 24 小时。最多 24 小时后，时间加快

> ID：13919203
> 
> 赞同：0
> 
> 时间：2012-12-17T17:41:58.550
> 
> 标签：php

```
$time_ago_op = time() - $comments[$c]['bcttime'];
    if ($time_ago_op <= 60) { $comments[$c]['time_ago'] = $time_ago_op . " secs ago."; }
    if ($time_ago_op >= 61 && $time_ago_op <= (60 * 60)) { $comments[$c]['time_ago'] = CleanNumber($time_ago_op / 60) . " mins ago."; }
    if ($time_ago_op >= (1+(60 * 60)) && $time_ago_op <= (60 * 60 * 24)) { $comments[$c]['time_ago'] = CleanNumber($time_ago_op / (60 * 60)) . " hours ago."; }
    if ($time_ago_op >= (1+(60 * 60 * 24)) && $time_ago_op <= (60 * 60 * 24 * 7)) { $comments[$c]['time_ago'] = CleanNumber($time_ago_op / (60 * 60 * 7)) . " days ago."; }

    unset($time_ago_op); 
```

用户发布后，它会以秒到分钟和小时为单位保持正确的时间，一旦达到 24 小时，时间就会加快。例如，一个 28 小时前的帖子说 3 天前等等......我试图弄清楚如何让它保持正确的时间，但我没有任何运气......如果有人可以帮助并指出什么我设置错了它会有很大帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:44:34.207

问题是您只使用纯`if`块。您需要使用 PHP 的`if else`构造。

进一步想象这种情况。该`third if`块在触发块之前的最后一纳秒`fourth if`。第三个将触发，然后立即触发第四个，这可能/将导致错误的计算。

**编辑**

你为什么不做这样的事情：

```
date_default_timezone_set("bcttime");  // whatever the correct time zone is
$server_time= date('G:ia');
$comment_time = $server_time -  $comments[$c]['bcttime'];
// display the time with formatting 
```

# api - 如何获取 Salesforce 用户许可证详细信息

> ID：13919205
> 
> 赞同：1
> 
> 时间：2012-12-17T17:42:03.797
> 
> 标签：api, licensing, salesforce

有没有办法通过一些现有的 Salesforce SOAP 或 RESTful API 以编程方式获取以下许可证详细信息：

*   许可证类型（企业、专业、开发人员）
*   试用模式？
*   试用期满
*   是否启用 API 访问？

...和类似的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:43:49.560

通过 API查看[组织对象。](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_objects_organization.htm)特别是以下领域：

**组织类型**

> 组织的版本，例如 Enterprise Edition 或 Unlimited Edition。

**试用到期日期**

> 此组织的试用许可证的到期日期。

如果您尝试为未启用访问的用户建立 API 会话，您将得到一个不支持的异常。例如 INVALID_LOGIN

您还可以查看 Users [Profile](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_objects_profile.htm)。查找 PermissionsApiEnabled、PermissionsApiUserOnly 字段。

# linux - 在几分钟内解析/格式化 ps -eo etime？

> ID：13919209
> 
> 赞同：1
> 
> 时间：2012-12-17T17:42:12.293
> 
> 标签：linux, shell, scripting

有人可以帮我解析这个输出以显示总分钟数吗？

这是命令（除了格式之外，它按预期工作）：

```
ps -eo pid,etime,command | grep some_process | grep -v grep | awk '{print $2}' 
```

输出（以小时、分钟、秒为单位）

```
03:01:24 
```

我需要输出看起来像：

```
181.40 
```

（3 小时 1 分 24 秒显示为实数）

这可能吗？非常感谢任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:09:06.547

```
ps -eo pid,etime,command | grep PID | grep -v grep | awk '{print $2}' | awk -F : '{ printf("%.2f\n", $1*60+$2+($3/60)); }' 
```

;)

**编辑：** 改进版本（谢谢@alexandernst 和@Nathan）：

```
ps -eo pid,etimes,command | grep PID | grep -v grep | awk '{printf("%.2f\n", $2/60)}' 
```

# ruby-on-rails - 在rails中按日/月/年查询订单

> ID：13919210
> 
> 赞同：3
> 
> 时间：2012-12-17T17:42:15.013
> 
> 标签：ruby-on-rails, ruby, postgresql, activerecord

让我解释一下我想做的事情，我有一个`Clicks`保存所有产品点击的表格。我想制作一张图表，说明客户点击了多少次。

此图表需要日、月和年视图。

我需要的是一个散列或一个对象。

我的想法是我得到类似的东西：

`data( 2012 => [ 01 => 100, 02 => 300, 03 => 50 etc.], 2011 => [ 01 => 100, 02 => 300, 03 => 50 etc.])`

如何按这样的顺序从 postgresql 数据库中检索所有数据？我想获取该`created_at`字段并从那里提取日期。在以后的过程中，必须计算特定月份的所有项目。

我在这个问题上苦苦挣扎，有人能把我推向正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-04T17:10:59.797

如果您使用 Postgree（或 Heroku whit PG）可以这样做：

按月：

```
Consumer.all.order("extract(month from created_at) DESC") 
```

按天

```
Consumer.all.order("extract(day from created_at) DESC") 
```

按年份

```
Consumer.all.order("extract(year from created_at) DESC") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T18:54:33.507

您发布的片段适用于 MySQL - 在 PostgreSQL 中执行相同操作：

```
@clicks = Click.select("count(*) as c, date_part('year', created_at) as y, date_part('month', created_at) as m").
                group("y", "m").
                where({:user_id => current_user.id}) 
```

这将为您提供格式的哈希`[year, month] => count`。为了得到你想要的格式，你需要稍微调整一下结果：

```
results = @clicks.inject({}) do |m, kv|
  year, month = kv.first
  clicks = kv.last
  m[year] ||= {}
  m[year][month] = clicks
  m
end 
```

或者更简洁一点：

```
results = @clicks.each_with_object({}) do |((year, month), clicks), m|
  (m[year] ||= {})[month] = clicks
end 
```

# jquery - 寻求基于 jQuery 的图像淡入淡出/循环器

> ID：13919213
> 
> 赞同：-1
> 
> 时间：2012-12-17T17:42:27.483
> 
> 标签：jquery, fade

我正在寻找类似于的图像循环机制

[http://www.idena.de/](http://www.idena.de/)

在“Unsere Markenwelten”（页面底部）下。

有什么推荐吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:15:05.957

您可以使用简单的 for 循环遍历列表的每个项目，并使用“恒定延迟乘以迭代器”为您的项目设置动画，因此它看起来是链式的。

使用 jQuery，这个概念可以是：

```
var items = $("div img");

for (var i = 0, l = items.length; i < l; i++)
{ $(items[i]).delay(i * duration).fadeIn(duration); } 
```

这是一个更好的例子：http: [//jsfiddle.net/UwQtg/](http://jsfiddle.net/UwQtg/)

# mysql - Mysql多个内部联接不起作用

> ID：13919214
> 
> 赞同：-1
> 
> 时间：2012-12-17T17:42:29.543
> 
> 标签：mysql, phpmyadmin

我有以下在 TSQL 中运行良好的查询

```
SELECT     
    shoppingcart_1.price, shoppingcart_1.stid, course.isbn, 
    book.BookTitle, course.Course_ID, schedule.stid AS Expr1
FROM         
    book 
INNER JOIN 
    shoppingcart AS shoppingcart_1 
INNER JOIN 
    schedule ON shoppingcart_1.cid = schedule.course_ID 
INNER JOIN 
    course ON schedule.course_ID = course.Course_ID 
    ON book.isbn = course.isbn
WHERE     
    (shoppingcart_1.stid = '20070004') 
```

但是当我在 Mysql 中运行它时，它会在线显示错误

```
INNER JOIN course ON schedule.course_ID = course.Course_ID ON book.isbn = course.isbn 
```

错误文本是

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 6 行的 'ON book.isbn = course.isbn WHERE (shoppingcart_1.stid = '20070004') LIMIT 0' 附近使用正确的语法

我第一次在mysql中写查询，请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:45:09.973

好像你的加入有点混乱。我试着清理它。看看这是否适合你

```
SELECT shoppingcart_1.price, shoppingcart_1.stid, course.isbn, book.BookTitle, course.Course_ID, schedule.stid AS Expr1
FROM book 
INNER JOIN course ON book.isbn = course.isbn
INNER JOIN schedule ON course.Course_ID = schedule.course_ID  
INNER JOIN shoppingcart AS shoppingcart_1 ON schedule.course_ID = shoppingcart_1.cid
WHERE shoppingcart_1.stid = '20070004' 
```

请注意我如何将书籍加入课程，然后将课程加入日程，然后将日程安排到购物车。然后使用 WHERE 子句指定其他条件。

# mysql - mySQL 更新“timecreated”列，但为每个后续条目添加一秒

> ID：13919224
> 
> 赞同：1
> 
> 时间：2012-12-17T17:43:03.410
> 
> 标签：mysql

我有一个 timecreated 字段，我需要用时间填充...但是我希望每个后续条目的时间自动递增一秒，这样所有时间都不相同...时间本身实际上并不重要，我只是不希望它们中的任何一个相同。

表：注释
列：时间创建

我基本上只想拥有：
Timecreated: 12:00:01
Timecreated: 12:00:02

等等......再次感谢大家！

[编辑]

完整的表结构：
TABLE: notes
COLUMNS: NO-ID (key), objectid, partnerid, note, datecreated, timecreated, datemodified

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:18:33.773

好的，因为`NO-ID`（列的奇怪名称，但这不是重点）是`AUTO_INCREMENT`，您可以简单地将其值（根据定义是唯一的）添加到基本 UNIX 时间戳。您将希望在过去足够远的地方开始，以免值用完，尽管只有当您拥有数百万行时，这才是一个问题。

所以从`2012-01-01 00:00:00`例如开始：

```
SELECT UNIX_TIMESTAMP('2012-01-01 00:00:00');
+---------------------------------------+
| UNIX_TIMESTAMP('2012-01-01 00:00:00') |
+---------------------------------------+
|                            1325397600 |
+---------------------------------------+ 
```

更新将主键值添加到该基本时间戳的所有行：

```
UPDATE `notes` SET `timecreated` = FROM_UNIXTIME(1325397600 + `NO-ID`); 
```

如果您删除了行，它们不会是连续的秒数，但它们仍然是唯一的。

您甚至*不必*从基本时间戳开始。您可以从 0 开始，即 1970 年 1 月 1 日加上或减去服务器的时区。

```
UPDATE `notes` SET `timecreated` = FROM_UNIXTIME(`NO-ID`); 
```

结果时间戳如

```
1970-01-01 00:00:01
1970-01-01 00:00:02
1970-01-01 00:00:03
1970-01-01 00:00:04
... 
```

### 评论后更新：

要将`datecreated`字段增加一天，请使用相同的模式，但使用`DATE_ADD()`：

```
UPDATE `notes` SET `datecreated` = DATE_ADD('2012-01-01', INTERVAL `NO-ID` DAY) 
```

不过要小心，从开始日期算起用完几天比用完几秒钟要容易得多......

# c++ - 在 C++ 兼容性更改后，G++ 生成的二进制文件比 GCC 更小，但比之前的二进制文件略大？

> ID：13919228
> 
> 赞同：2
> 
> 时间：2012-12-17T17:43:27.887
> 
> 标签：c++, c, g++, compiler-optimization

我对 C 代码库进行了一些更改，以便它可以在 G++ 下编译。似乎正在工作，有一些烦恼和`-fpermissive -fshort-wchar`.

出于好奇，我比较了`-O2`修改前 GCC 构建的可执行文件的剥离大小，以及修改后的 G++ 构建的可执行文件的大小。“之后”大了 32 个字节（在 500K 的二进制文件上）。我很惊喜它是如此接近，但我很想知道为什么如果优化器*如此*一致，它就不会 100% 一致？但也许是[为 strchr 添加重载](https://stackoverflow.com/questions/13906150/minimally-invasive-change-for-strchr-on-unsigned-char-in-c-from-a-c-codebase)导致了它。

对我来说还不够重要，不用担心。但后来我决定使用 GCC 进行 C 构建，同时考虑到我的 C++ 兼容性更改。剥离的`-O2`可执行文件比我更改之前的 C 版本*大 4096 字节。*

有谁知道为什么这三种尺寸会以这种方式发生，为什么会是这样一个“圆形”数字？C++ 的变化基本上是所有应该优化的东西，无论是在 C 还是 C++ 中。基本上：

*   引入不透明类型，以便先前在接口中定义为采用 void* 的函数将一致地命名-mangle。通过不透明类型的宏向正确内部类型的本地引入一些强制转换分配

*   消除了一些旧式 C 函数头定义的实例

*   为一些以前没有指定链接的全局常量修改到“extern”的链接，暂时容忍[将分配保留在标题中，](https://stackoverflow.com/questions/13908376/extern-const-linkage-specification-being-seemingly-ignored-by-g)但希望反对这一点

*   将一些有符号字符更改为无符号字符，将一些无符号长整数更改为无符号整数（但反之亦然）

如果有人对这个优化案例有很好的直觉，那么它将节省我单独退出每组相关更改以查看它们如何影响大小的时间......！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-08T23:35:08.657

请记住：C++ 程序本质上并不比 C 程序大。编译可能需要更多时间，但没有什么可以使 C++ 程序变得更大。

实际上......由于更严格的形式主义和为[未定义行为](https://en.wikipedia.org/wiki/Undefined_behavior)留下的摆动空间，C++ 编译器可能能够比 C 编译器对 C 代码库进行更多优化。

您*（又名我）*所描述的差异很小。正如@rodrigo 和@MelNicholson 指出的那样，即使是微小的差异也可能会因块大小的舍入而被夸大。因此，单个字节的实际差异可能导致 4096 字节的文件大小差异。

为 C 编译器获取一堆回归测试，将其构建为 C 与 C++ 并查看可执行文件大小是否存在显着差异，然后寻找导致这些差异的模式，这可能会很有趣。如果你*（又名我）*有时间。它可能会提供数据以反馈到编译器可以改进的地方。但是，在 500K 的可执行文件上，这种大小的单实例差异基本上没有什么可学习的。

# c++ - 有没有办法使用 c++ 类型特征来检查类型是否是模板及其任何属性？

> ID：13919234
> 
> 赞同：1
> 
> 时间：2012-12-17T17:43:55.453
> 
> 标签：c++, templates, typetraits

我希望能够推断给定类型是否是模板类型。我查看了 boost 的类型特征类，但找不到与模板相关的 is_* 特征：http: [//www.boost.org/doc/libs/1_52_0/libs/type_traits/doc/html/index.html](http://www.boost.org/doc/libs/1_52_0/libs/type_traits/doc/html/index.html)

更有趣的是，如果在编译时有办法确定模板参数的属性，例如有多少模板参数或参数是否是模板模板参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T17:47:22.973

这是部分解决方案：

```
#include <iostream>
#include <type_traits>

template <typename> struct is_template : std::false_type {};

template <template <typename...> class Tmpl, typename ...Args>
struct is_template<Tmpl<Args...>> : std::true_type {};

template <typename> struct Foo {};

int main()
{
  std::cout << is_template<int>::value << std::endl;
  std::cout << is_template<Foo<char>>::value << std::endl;
} 
```

问题是模板可以具有任意结构，因此它不必只包含类型参数。您无法详尽地枚举*所有*类型的模板参数。

然而，追求这种方法一分钟，很容易得出一个论据计数器：

```
template <typename> struct nargs : std::integral_constant<unsigned int, 0> { };

template <template <typename...> class Tmpl, typename ...Args>
struct nargs<Tmpl<Args...> : std::integral_constant<unsigned int, sizeof...(Args)> { }; 
```

# php - 函数 this.text=text; 到 html

> ID：13919236
> 
> 赞同：0
> 
> 时间：2012-12-17T17:43:58.387
> 
> 标签：php, jquery

我在日历中有一些用于提示的代码。我希望能够在工具提示中显示 html 这可能吗？每次我尝试将其更改为接受 html 时它都会崩溃它现在只允许文本，我不明白如何更改它以允许 html

```
 <!DOCTYPE html>
        <html>
        <head>
          <meta http-equiv="content-type" content="text/html; charset=UTF-8">
          <title></title>

          <script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script>

          <link rel="stylesheet" type="text/css" href="/css/normalize.css">
          <link rel="stylesheet" type="text/css" href="/css/result-light.css">

              <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css">
              <script type='text/javascript' src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>

          <style type='text/css'>
            .pink > a {
            background-color: pink !important;
            background-image:none !important;
        }

        .green > a {
            background-color: green !important;
            background-image: none !important;
        }

          </style>

        <script type='text/javascript'>//<![CDATA[
        $(window).load(function(){
        var Event = function(text, className) {
            // would like to convert this to allow for html
            this.text = text;
            // this.html = text; // does not work
            this.className = className;
        };

        var events = {};
        events[new Date("01/01/2013")] = new Event("New Years Day", "pink");
        events[new Date("12/25/2012")] = new Event("<B>Merry</b> Christmas", "green");

        console.dir(events);

        $("#dates").datepicker({
            beforeShowDay: function(date) {
                var event = events[date];
                if (event) {
                    return [true, event.className, event.text];
                }
                else {
                    return [true, '', ''];
                }
            }
        });
        });//]]>

        </script>

        </head>
        <body>
          <div id="dates"></div>

        </body>

        </html> 
```

提前感谢您提供的任何代码或帮助

约翰尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:34:27.677

title 属性不允许使用 html 代码。

但是有几个框架可以让你修改悬停。

我使用[了 jQuery 工具提示](http://jquery.bassistance.de/tooltip/demo/)

```
<script src="http://jquery.bassistance.de/tooltip/jquery.tooltip.js"></script>
$('*').tooltip(); 
```

在这里，您将看到它们的工具提示已被修改并且粗体已到位。

[http://jsfiddle.net/Morlock0821/WqrMK/](http://jsfiddle.net/Morlock0821/WqrMK/)

# php - 移动应用程序和系统文件夹后的 Codeigniter 2.1.3 安装问题

> ID：13919241
> 
> 赞同：0
> 
> 时间：2012-12-17T17:44:11.950
> 
> 标签：php, codeigniter, installation

我决定尝试一个框架，因为我的项目变得越来越大并选择了 Codeigniter 2.1.3。它在默认文件夹设置下按预期工作，但是在将 Application 和 System 文件夹上移一级后，我得到了 CI 404 页面，例如：

```
/Application/
/System/
/www/index.php 
```

我将 $system_path 更改为 '../system' 并将 $application_folder 更改为 '../application' （我也尝试过绝对路径），如文档所述。我已将 CodeIgniter.php 中的问题追溯到：

```
if (method_exists($CI, '_remap')) 
```

看来这正在返回错误。我可以在 $CI 上执行 print_r，但我不确定我在寻找什么或从这里调试的地方，我正在寻找指导。我对框架没有其他经验。

此外，我的服务器设置为需要由两个虚拟主机共享的这个应用程序可能是相关的。文件夹设置，如：

```
c:/server/web/domain1.com/www
c:/server/web/domain2.com/www
c:/server/web/myapp/www 
```

所以在我拥有的每个虚拟主机中：

```
RewriteRule ^/myapp(.*)$ c:/server/web/myapp/www/$1 
```

这样 domain1.com/myapp 和 domain2.com/myapp 都将您带到 myapp。

如果我能提供任何其他信息，请告诉我感谢您阅读并提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:29:53.523

我想到了。新手框架用户错误。这是控制器中路径的问题。我很抱歉浪费了任何人的时间。

# jquery - Kendo UI：网格：基于比较每行第 3 和第 4 个单元格中的值的条件样式

> ID：13919243
> 
> 赞同：2
> 
> 时间：2012-12-17T17:44:13.200
> 
> 标签：jquery, kendo-ui, html-table, css-selectors, each

我不确定如何提取第 3 和第 4 个单元格 (TD) 中的值来比较它们。如果它们具有相同的值，我想在行中添加一个 cssClass；也不知道该怎么做：

```
 $("#grid tr").each(function() {

           var theValueInCell3 = ?   // how to get the cell's value?
           var theValueInCell4 = ?   // how to get the cell's value

           if (theValueInCell3 == theValueInCell4)
             {

                  //pseudo-code to add a cssClass to the row
                  $(this).addClass('foo');
             }

    }); 
```

编辑：这是我尝试遵循@Pechka 建议的最新尝试：

```
 .
   .
   .
   if (grid != null) {
    grid.dataSource.data(parsedData);        
    setTimeout(StyleRows, 500);
  }

  function StyleRows() {

      var grid = $('#grid').data('kendoGrid');
      $("#grid tr").each(function () { 
         var dataItem = grid.dataItem(this);   // dataItem is undefined
         if (dataItem.PropA == dataItem.PropB) {
            $(this).addClass('foo');
        }

    });
   } 
```

错误是`dataItem`未定义的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T19:10:36.857

您好，我建议您使用用于检索与该行相关的底层模型的[dataItem方法。](http://docs.kendoui.com/api/web/grid#dataitem)例如

```
var grid = $('#grid').data().kendoGrid;
$('#grid tr').each(function(){
     var dataItem = grid.dataItem(this);
     if(dataItem.PropName == dataItem.SomeOtherProp){
          $(this).addClass('foo');
     }
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T18:00:05.133

如果您正在使用`KendoGrid`，您可能会[`DataSource`](http://docs.kendoui.com/api/web/grid#datasource-kendodatadatasource--object)受到限制。因此，每一列实际上都有一个名称，您可以从绑定值中获取值。

如果您更喜欢使用 jQuery 路径（从您的草稿代码中可以看出），您可以查看[`nth-child`](http://api.jquery.com/nth-child-selector/)允许您获取对*第 n 个*单元格或表格行的引用的选择器。

```
$("tr", "#grid").each(function (idx, elem) {
    var theValueInCell3 = $(":nth-child(3)", elem).html();
    var theValueInCell4 = $(":nth-child(4)", elem).html();

    //pseudo-code to add a cssClass to the row
    if (theValueInCell3 === theValueInCell4) {
        $(this).addClass('foo');
    }
}); 
```

最后，为了格式化`KendoGrid`一行，您可以查看[Grid Row Template](http://docs.kendoui.com/api/web/grid#rowtemplate-function)。

# c++ - 跟踪编译器以查看它在某些文件上花费了多少时间

> ID：13919245
> 
> 赞同：4
> 
> 时间：2012-12-17T17:44:29.150
> 
> 标签：c++, compile-time

编译我的项目需要很长时间，我想我想改进它的编译时间。我要做的第一件事是将编译时间分解为单个文件。

所以编译器告诉我例如：

```
boost/variant.hpp: took 100ms in total
myproject/foo.hpp: took 25ms in total
myproject/bar.cpp: took 125ms in total 
```

然后我可以通过引入前向声明和/或重新排序来专门尝试改善占用时间最多的文件的编译时间，这样我就可以省略包含文件。

这个任务有什么东西吗？我正在使用 GCC 和 ICC (intel c++)

* * *

**我使用 Scons 作为我的构建系统。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:04:26.007

您对处理与其他人使用的头文件不匹配的头文件所花费的时间有一个不同寻常的、古怪的定义。所以你可能可以做到这一点，但你必须自己做。可能最好的方法是`gcc`在`strace -tt`. 然后，您可以查看它何时打开、读取和关闭每个文件，从而了解它处理它们的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T18:31:34.807

您是否尝试过将构建作为一个整体进行检测？与任何性能问题一样，您*认为*的问题可能实际上并不是问题。 [Electric Make](http://www.electric-cloud.com/eade?promo=so_emelski)是与 GNU make 兼容的 make 实现，它可以生成带 XML 注释的构建日志，进而可以用于分析 ElectricInsight 的构建性能问题。例如，ElectricInsight 中的“按类型划分的作业时间”报告可以大致告诉您构建中哪些活动消耗的时间最多，特别是构建中哪些作业时间最长。这将帮助你将你的努力引导到他们最有成果的地方。

例如：

![在此处输入图像描述](../Images/33c8e01f9e4e9a05e68bba64f1692692.png)

*免责声明：我是 Electric Make 和 ElectricInsight 的首席架构师。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T18:13:10.007

重要的指标不是处理（无论这意味着什么）头文件需要多长时间，而是头文件更改并强制构建系统在所有依赖单元上重新调用编译器的频率。

与编译过程的所有其他步骤相比，编译器花在解析无用代码上的时间非常少。即使您包含整个不需要的文件，它们也可能在磁盘缓存中很热。预编译的头文件使这变得更好。

目标是避免由于头文件中不相关的更改而重新编译单元。这就是 pimpl 和其他编译防火墙等技术的用武之地。

而链接时间代码生成又名整个程序优化使事情变得更糟，因为它取消了编译时防火墙并重新处理整个程序。

无论如何，应该从构建日志、提交日志甚至文件系统中的最后修改日期中获得有关头文件有多不稳定的信息。

# c# - 设置 Gridview SelectedIndex 崩溃

> ID：13919248
> 
> 赞同：0
> 
> 时间：2012-12-17T17:44:34.487
> 
> 标签：c#, xaml, windows-store-apps

当我尝试设置该属性时，它会崩溃，说该值不在范围内。它在 -1 时工作，但当它变为 0 时它崩溃。`GridView`当用户离开页面然后返回页面时（在 Windows 8 应用程序中），我试图使该项目保持选中状态。

```
listDeckNames.SetValue(GridView.SelectedIndexProperty, (int)Global.selectedDeck); 
```

我不允许这样做还是有其他解决方案？

```
<ListView x:Name="listDeckNames"
          HorizontalAlignment="Stretch" 
          Height="324" 
          Margin="0" 
          VerticalAlignment="top" 
          Width="663" 
          Background="#FF666666"   
          Canvas.Left="10" 
          SelectionChanged="listDeckNames_SelectionChanged" /> 
```

我尝试切换到 a`ListView`但它仍然崩溃。

# c++ - 如何通过网络自动测试音频质量？

> ID：13919253
> 
> 赞同：1
> 
> 时间：2012-12-17T17:44:49.827
> 
> 标签：c++, automation, packet-capture

我正在与一个开发用于进行音频呼叫的 C++ 应用程序的团队合作。

我是团队的新手，将参与测试应用程序。我有使用 C++ 的经验，但不知道如何测试应用程序的音频质量。

是否有任何 C++ 类可用于自动化质量测试，或可与 Jenkins 集成的外部应用程序？

# android - 动画活动条目

> ID：13919255
> 
> 赞同：0
> 
> 时间：2012-12-17T17:45:01.553
> 
> 标签：android, android-activity, jquery-animate

我需要以动画方式开始一项活动..有人可以帮助我吗？创建一个意图并以正常方式启动一个活动将显示新活动。我需要从一侧开始，比如左侧..如何在创建意图附近对其进行动画处理..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:46:53.613

使用以下内容：

```
this.overridePendingTransition(R.anim.slidein_left, R.anim.slideout_right); 
```

其中 R.anim.* 是 /res/anim/ 文件夹中的动画 XML 文件。

以下是我的一个例子`slidein_left`：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <translate
        android:duration="500"
        android:fromXDelta="-100%"
        android:toXDelta="0%" />

</set> 
```

并且`slideout_right`：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <translate
        android:duration="500"
        android:fromXDelta="0%"
        android:toXDelta="100%" />

</set> 
```

这将做的是将两个活动滑到左边，使新活动从左边滑入，将旧活动推到右边。

另外，正如@njzk2 所说，请在提问之前尝试自己努力，并向我们提供您可能已经尝试过的东西。

# php - 带有 PHP、html 格式的电子邮件确认电子邮件

> ID：13919259
> 
> 赞同：1
> 
> 时间：2012-12-17T17:45:16.237
> 
> 标签：php, html

我不熟悉 PHP，也无法真正找到解决我问题的具体方法。我们在印度外包了一个后端项目，他们的部分任务是创建一个带有电子邮件确认的登录。

以下是部分代码：

```
$sql     = "SELECT * FROM `users` WHERE `email`='$name' AND `status`= 1";
$result  = $db->select($sql);
$num_row = $db->numrows($sql);
if($num_row > 0) {
    $row= $db->fetcharray($sql);

    $Password   =   $row['password'];
    $body       = "Dear ".$row['fname']." <br> <br>";
    $body       .= "Your password is : ".$Password." <br> <br>";
    $body       .= "Please login with below link : <br/>";
    $body       .= SITE_URL;

    $email           = $row['email'];
    $messageSubject  = "Forgot Password : Quicksl";
    $messageBody     = $body;   

    sendContactMail(SENDER_NAME,SENDER_EMAIL,$messageBody,$email,$messageSubject);
    echo "matched"; 
```

但是，当我们收到一封电子邮件时，它仍然包含`<br>`来自 HTML 的标签，而不是将其呈现为 HTML。

它与语法有什么关系吗？从上面的代码中，如何在 PHP 中格式化电子邮件，以便电子邮件中没有`<br>`标签，但它从新行开始？

如果我没有把我的问题说清楚，请告诉我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T17:48:38.203

您需要添加

```
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n"; 
```

`$headers`并作为 PHP 函数的最后一个参数传递`mail`，无论它在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:58:25.833

您需要在标题中指定这是一封 html 电子邮件，以便将其解释为 html 而不是纯文本。

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$Password   =   $row['password'];
$body       = "Dear ".$row['fname']." <br> <br>";
$body       .= "Your password is : ".$Password." <br> <br>";
$body       .= "Please login with below link : <br/>";
$body       .= SITE_URL;
$email           = $row['email'];
$messageSubject  = "Forgot Password : Quicksl";
$messageBody     = $body; 
```

`sendContactMail(SENDER_NAME,SENDER_EMAIL,$messageBody,$email,$messageSubject,$headers);`

# r - 使用模拟从 t 表中创建一条线（在 R 中）

> ID：13919260
> 
> 赞同：1
> 
> 时间：2012-12-17T17:45:16.767
> 
> 标签：r, statistics

在为分布运行模拟之后，我将如何从 R 中的 t 表创建一条线？本质上，我想仅使用从正态分布中的随机样本计算的值来执行 qt 函数，而不是使用置信水平作为输入。

我已经对 at(degrees of freedom "df") 分布进行了 5000 次模拟，我想获取这些值并使用它们在 t 表中重新创建与 df 对应的行。试图弄清楚它有困难。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:36:03.520

quantile 函数将为您提供与我使用的 t 表中的值等效的值：

```
quants <- 1-c(0.2, 0.1, 0.05, 0.025, 0.01, 0.005, 0.001)
n <- 15

sims <- replicate( 5000, {x <- rnorm(n); sqrt(n)*mean(x)/sd(x)} )

(t.table <- quantile(sims, quants) )

## compare

rbind( t.table, qt( quants, n-1 ) )

pt(t.table, n-1) 
```

这些是左边的区域，常见的 t 表给出了右边的区域，我们可以更改标签以匹配它`names(t.table) <- 1-quants`。更改`quants`以匹配您的特定表格（如果您想要更接近的匹配，请增加模拟次数）。

在这种情况下，可以通过一步模拟整个法线矩阵然后使用`rowMeans`.

# c++ - 通过 EnvDTE 获取 AdditionalIncludeDirectories 列表

> ID：13919266
> 
> 赞同：0
> 
> 时间：2012-12-17T17:45:32.287
> 
> 标签：c++, visual-studio-2010, extension-methods, envdte

如何`AdditionalIncludeDirectories`从 c++ 项目中获取列表？

我正在用 c# 编写一个加载项，它查看一个 C++ 解决方案/项目，它需要这种类型的信息，以及 Visual Studio 中的“INCLUDE”目录（我也很难获取，因为它们未在系统环境变量中列出）。

是否有`EnvDTE`（或`VCProject`）选项可以给我`AdditionalIncludeDirectories`, 或 `ProjectIncludeDir`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-07T03:56:40.970

在 VS2012 的加载项中，您可以通过执行以下操作来获取 AdditionalIncludeDirectories（请注意，这是每个项目配置而不是每个项目）：

您需要添加对“Microsoft.VisualStudio.VCProjectEngine”程序集的引用。

```
using Microsoft.VisualStudio.VCProjectEngine;

EnvDTE.Project project = null; // You get this project from somewhere
VCProject vcProject = project.Object as VCProject;
IEnumerable projectConfigurations = vcProject.Configurations as IEnumerable;
foreach (Object objectProjectConfig in projectConfigurations)
{
    VCConfiguration vcProjectConfig = objectProjectConfig as VCConfiguration;
    IEnumerable projectTools = vcProjectConfig.Tools as IEnumerable;
    foreach (Object objectProjectTool in projectTools)
    {
        VCCLCompilerTool compilerTool = objectProjectTool as VCCLCompilerTool;
        if (compilerTool != null)
        {
            string additionalIncludeDirs = compilerTool.AdditionalIncludeDirectories;
            break;
        }
    }
} 
```

要从 Visual Studio 获取 <"INCLUDE" 目录>，您可以“询问”配置以评估 VS“IcludePath”变量：

```
string includeDirs = vcProjectConfig.Evaluate("$(IncludePath)"); 
```

# mongodb - Spring MVC with MongoDB - 排序和限制

> ID：13919279
> 
> 赞同：2
> 
> 时间：2012-12-17T17:46:05.203
> 
> 标签：mongodb, spring-mvc, mongodb-java

在 Spring MVC 中对 MongoDB 查询结果进行排序的最佳方法是什么？我已经在 XML 文件中设置了所有映射，我可以在 Service 类中调用 myrepository.findAll() 就好了，它工作得很好。

如何对这些结果进行排序（例如按日期）和/或限制结果（例如按 3 等）。在 Mongo 本身中，只需执行 db.mycollection.find().sort({ postedAt : -1}); 就很容易了。或者只是抛出一个 .limit(3) 来获得前 3 个结果。

在 Spring MVC 环境中处理此问题的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:52:26.527

如果您的*myrepository*对象是 MongoRepository 的一个实例，您可以使用 Pageable 对象作为参数调用**findAll方法。**

```
Pageable page = new PageRequest(0, 3, new Sort(Direction.DESC, "postedAt"));
myrepository.findAll(page); 
```

实际上，这个方法来自 PagingAndSortingRepository 接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:30:21.630

我觉得在 MongoDB 本身中进行排序很好，因为我们在那里有很多选择，例如你提到的方式将给出排序列表。您可以定义一个索引，它也可以使排序更容易。那么在 spring 环境中显示应该是不费吹灰之力的。此外，如果您有分页类型的用例，那么正如您所说，您可以在 mongo 层进行限制，并将那么多记录带到 spring 环境中。

# visual-studio-2010 - Web 应用程序适用于 VS2010，但不适用于 IIS

> ID：13919286
> 
> 赞同：1
> 
> 时间：2012-12-17T17:46:35.983
> 
> 标签：visual-studio-2010, iis-7

我正在寻找对以下行为的解释：我有一个在 Win 2008 服务器上安装的 VS2010 中运行的小应用程序。源文件位于 wwwroot 文件夹中。该应用程序使用 Microsoft.interop 和 Office Open xml 打开 Office 2010 PowerPoint 文件。如果我使用 Visual Studio 的内置 Web 服务器运行该应用程序，则该应用程序可以正常工作。当我在服务器上创建一个实际的应用程序时，我收到一个错误“PowerPoint 无法打开文件”。

VS 和 IIS 都使用相同的应用程序池帐户，该帐户是本地管理员组的成员。我用来登录服务器的帐户也是管理员帐户，模拟帐户也是如此。我在 web.config 中将 c:\temp 用于 mytempDirectory 设置，所有这些帐户都具有读/写/修改权限。演示文件实际上是上传到应用程序内的“文件”文件夹，此时每个人都拥有完全权限。

我猜问题出在权限上，但我不明白怎么做？有没有人经历过这样的事情？

谢谢。

# c++ - 何时在 C++ 中使用 struct over class

> ID：13919292
> 
> 赞同：2
> 
> 时间：2012-12-17T17:46:54.597
> 
> 标签：c++, oop, class, struct

> **可能重复：**
> [什么时候应该在 C++ 中使用类和结构？](https://stackoverflow.com/questions/54585/when-should-you-use-a-class-vs-a-struct-in-c)

在使用 C++ 编写程序时，何时应该使用 STRUCT 声明而不是 CLASS 声明？

1.  绝不 ！！?
2.  任何事情......无论哪个让一个人感觉更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T17:49:37.157

两者之间的唯一区别是默认情况下`struct`是公共的，而`class`成员是私有的。

我的规则是`struct`在我的意思是一组相关数据时使用，在读/写它们时没有任何特殊语义。`class`当我打算用更丰富的语义（读取方法）包装数据时使用，这些语义更有意义，提供任何需要的保护，或者实现更抽象的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T17:50:02.753

除了默认的访问级别，a`struct`和 a`class`是**完全等价**的。

我发现差异主要在程序员的脑海中——按照惯例，我们通常使用`struct`s 将小对象放在一起，没有复杂的功能——例如，`Point`只有 3 个成员的 a——坐标。POD 类型。

另一方面，我们通常使用`class`es 来包含更大的对象，具有复杂的功能和相当大的界面。

例如：

```
struct Point { 
   int x,y,z; 
};

class Shape{
   std::vector<Point> corners;
public:
   Shape(const std::vector<Point> corners);
   double getVolume();
   double getArea();
   bool   isConvex();
   //etc.
}; 
```

# c# - 使用图像填充搜索合同结果

> ID：13919293
> 
> 赞同：0
> 
> 时间：2012-12-17T17:47:03.147
> 
> 标签：c#, binding, windows-8, windows-store-apps

我的搜索合同基本上是查看 SQLite 数据库，并返回相关记录。然后处理这些记录，以便在搜索魅力页面上显示和选择适当的信息。但是，我将结果对应的图像与结果一起显示（遵循默认的搜索合同结果模板）

图像作为字符串存储在我的`CustomObjectRecord`数据库中。当记录被选中时，它被转换为`CustomObject`，而保存在 中的图像字符串`CustomObjectRecord`被转换为名为 的 Bitmap 对象`searchImage`。我希望这与我的结果一起显示，但是当搜索魅力返回时，我在输出控制台上收到错误

`Error: BindingExpression path error: 'searchImage' property not found on 'My_App.Classes.CustomObject, My App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'. BindingExpression: Path='searchImage' DataItem='My_App.Classes.CustomObject, My App, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'; target element is 'Windows.UI.Xaml.Controls.Image' (Name='thumbImage'); target property is 'Source' (type 'ImageSource')`

模板定义

```
<DataTemplate x:Key="LocalStandardSmallIcon300x70ItemTemplate">
    <Grid Width="294" Margin="6">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}" Margin="0,0,0,10" Width="40" Height="40">
                <Image Name="thumbImage" Source="{Binding searchImage}" Stretch="UniformToFill"/>
            </Border>
            <StackPanel Grid.Column="1" Margin="10,-10,0,0">
                <TextBlock Text="{Binding Name}" Style="{StaticResource BodyTextStyle}" TextWrapping="NoWrap"/>
            </StackPanel>
        </Grid>
    </DataTemplate> 
```

`searchImage`在 CustomObject 中定义为

```
 public Bitmap searchImage; 
```

`searchImage`我的 CustomObject的属性是在从数据库加载记录时设置的。同一模板中的名称绑定工作正常。

任何指针都会很棒。如果需要更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:38:03.650

我不是 SQLite 专家，但您是将图像存储在 Db 中还是仅存储路径？如果图像那么为什么不将图像保存在 localstorage 上并将其路径存储在 Db 中，然后您只需使用 ms-appdata:/// 从 localstorage 读取图像，请参阅[http://msdn.microsoft.com/en-我们/图书馆/windows/apps/hh781229.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh781229.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:25:22.720

明白了，这只是一个包含`{ get; set; }`在`searchImage`定义中的案例......

# ruby - 局部变量和实例变量之间的区别

> ID：13919294
> 
> 赞同：0
> 
> 时间：2012-12-17T17:47:08.200
> 
> 标签：ruby

我了解局部变量仅限于声明它们的范围，并且只要类存在，实例变量就存在，但是如果您在类范围中声明局部变量而不用前缀会发生`@`什么？即使您没有使用 an`@`将其声明为实例变量，这不是隐含的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:50:42.423

> 只要类存在，实例变量就存在

只要对象存在，它们就存在。实例变量是每个对象，而不是每个类。

> 如果你在类范围内声明一个局部变量而不用@作为前缀会发生什么？

然后变量在类定义的范围内，但不在该类定义内的任何`def`s 内，因为它们引入了新的范围。

> 即使您没有使用 @ 将其声明为实例变量，这不是隐含地使其成为实例变量吗？

不。

如果您使用`define_method`而不是`def`创建方法，则可以在方法中访问局部变量，但是由于该变量仅存在一次（不是每个对象一次），因此在这种情况下，它们的行为更像是类变量而不是实例变量。我也想不出一个很好的理由为什么你会那样使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:54:49.217

使用 @使它成为您创建的对象的实例变量。当您使用该对象执行操作时，您可以设置局部变量，但它们在使用后会消失。只要有对象，实例变量就会一直存在。

# php - Facebook PHP SDK 检索用户的当前位置

> ID：13919295
> 
> 赞同：1
> 
> 时间：2012-12-17T17:47:12.740
> 
> 标签：php, arrays, facebook

到目前为止，我已经尝试过：

```
$facebook->api('/me', 'get', array("fields"=>"location")); 
```

返回：

```
Array ( [location] => Array ( [id] => 107847249250173 [name] => Cambridge, Cambridgeshire ) [id] => 1234567890 ) 
```

如果我有必要的权限，我怎么能`[name]`以可以插入数据库的格式回显这个位（所以输出是“剑桥，剑桥郡”）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:49:30.763

```
$data = $facebook->api('/me', 'get', array("fields"=>"location"));
echo $data['location']['name']; 
```

# quartz-scheduler - Quartz：显示触发间隔/时间表详情

> ID：13919297
> 
> 赞同：3
> 
> 时间：2012-12-17T17:47:14.630
> 
> 标签：quartz-scheduler, quartz.net

如何获取现有触发器的间隔/计划详细信息？

在我们的应用程序中，用户可以通过以分钟为单位设置间隔来重新安排作业。我们需要将他们提交的值与当前触发器的调度进行比较，以确定是否需要重新调度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:51:54.477

Check out[`Scheduler.getTrigger()`](http://quartz-scheduler.org/api/2.1.0/org/quartz/Scheduler.html#getTrigger%28org.quartz.TriggerKey%29)方法返回一个[`Trigger`](http://quartz-scheduler.org/api/2.1.0/org/quartz/Trigger.html). 您可以向下转换它并阅读所有必需的信息，例如时间表（CRON/简单）和相关作业。

# node.js - 如何在 Redis 中搜索基于 Json 字符串的值？

> ID：13919302
> 
> 赞同：0
> 
> 时间：2012-12-17T17:47:31.087
> 
> 标签：node.js, redis

我目前正在开发一个使用 NodeJs 中的 Redis 的项目，并且许多数据作为 JSON 字符串存储在 Redis 中。我有很多键，即

```
 urn:comment:1, urn:comment:2 etc and the values contained are:

"{Id:1, CommentText:"some text here that could be quite large..." ...} etc 
```

我需要的是一种在“CommentText”中搜索字符串的方法。

我是 Redis 新手，我有哪些选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-13T07:58:30.130

Redis is not well suited for what you want. Since you want full text search functionality i strongly recommend using Elastic Search [elasticsearch.org](http://www.elasticsearch.org)

# c++ - 矩形碰撞检测

> ID：13919303
> 
> 赞同：3
> 
> 时间：2012-12-17T17:47:33.223
> 
> 标签：c++, algorithm, collision-detection

```
class Rectangle{
public:
   float x, y, width, height;
   // (x,y) is the lower left corner of the rectangle
}; 
```

这个算法正确吗？

```
bool Rectangle::colidesWith(Rectangle other) {
   if (x+width < other.x) return false; // "other" is on the far right
   if (other.x+other.width < x) return false; //"other" is on the far left
   if (y+height < other.y) return false // "other" is up
   if (other.y+other.height < y) return false // "other" is down
   return true;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T17:50:48.227

如果矩形已被填充（即，如果其中一个在另一个内部，则将其视为碰撞）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T17:57:42.227

是的。您可以将其视为超平面分离定理的特例，这是该问题的一般版本。您将这些矩形投影到 X 和 Y 轴上，然后检查生成的线段是否在它们之间有一些分离。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T07:36:50.410

对我来说，写这个条件的一种更直观的方式是：

```
( max(r1.x, r2.x) < min(r1.x+r1.w, r2.x+r2.w) ) &&
( max(r1.y, r2.y) < min(r1.y+r1.h, r2.y+r2.h) ) 
```

实际上，这可以推广到任何维度。

# r - 在一个主图上绘制多个数据集的特定列

> ID：13919304
> 
> 赞同：0
> 
> 时间：2012-12-17T17:47:33.427
> 
> 标签：r, visualization, data-visualization

我有四个数据集，可以在[这里](https://www.dropbox.com/s/byxx5wv2ci5iaqr/Ratio_J_B5H2.csv)找到一个示例，它们都有四列和相同的列名。但我只想在 x 轴上绘制第一列，在 y 轴上绘制最后一列，并且我想在四个相等区域的一个主图上绘制所有这些，如下图所示。

我怎样才能做到这一点？

[![](../Images/a3174dd5a7317bfc217982faeef569fc.png)](https://i.stack.imgur.com/B7Ucc.png)
[（来源：[nps.gov](https://science.nature.nps.gov/im/datamgmt/statistics/r/images/graphics_ex/hist4.png)）]
。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:35:52.180

这是使用`par`.

（我将您的文件`Ratio_J_B5H2.csv`作为数据框读入 R 中`dat`。）

为绘图创建一个 2 x 2 窗口：

```
par(mfrow = c(2, 2)) 
```

现在，您可以创建四个图：

```
barplot(dat[,4], names.arg = dat[,1])
barplot(dat[,4], names.arg = dat[,1])
barplot(dat[,4], names.arg = dat[,1])
barplot(dat[,4], names.arg = dat[,1]) 
```

![在此处输入图像描述](../Images/6fd7925b27ef91ff960f6ea35a834c21.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:53:22.157

这是一个很好的、简单的多图资源：

[http://www.statmethods.net/advgraphs/layout.html](http://www.statmethods.net/advgraphs/layout.html)

还要检查`?layout` 和`?par`

# python - Python Read() 函数一次读取 N 行

> ID：13919306
> 
> 赞同：-3
> 
> 时间：2012-12-17T17:47:39.010
> 
> 标签：python

> **可能重复：**
> [Python 如何一次读取 N 行](https://stackoverflow.com/questions/6335839/python-how-to-read-n-number-of-lines-at-a-time)
> [读取文件一次读取 8 行 Python](https://stackoverflow.com/questions/13909150/read-a-file-8-lines-at-a-time-python)

我正在尝试一次给定 8 行逐行读取文件，然后在我的代码中使用这些值作为变量

问题是读取它的方式或读取它的方法在我的代码中不能用作字符串变量

使用 Read 似乎有效，但我不知道如何使用 read() 函数一次读取 8 行文件。

知道我该怎么做吗？

谢谢你

编辑更多细节

我正在使用库 spynner。我可以使用任意数量的代码一次读取文件 n 行，但实际上将这些行用作微调器函数中的值是行不通的。例如

我用它来读取文件

```
with open("test.txt") as fin:
    try:
        while True:
            data =  islice(fin, 0, 8)                
            email = next(data) 
```

然后在 Spynner 我这样做

```
browser.wk_fill('input[name="email"]', email) 
```

表格中没有填写。我不是在构建机器人，或者垃圾邮件工具只是在乱搞。

所以感谢任何反馈/帮助

*干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:48:39.133

`read`从文件中读取多个*字节*。您想要`readline`读取直到行尾。调用八次以获得八行：

```
[f.readline() for _ in range(8)] 
```

或者，您可以使用[其中一种方法将文件`itertools`分组](http://docs.python.org/library/itertools.html)为八行块，然后对其进行迭代：

```
from itertools import izip_longest
def grouper(n, iterable, fillvalue=None):
    "grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx"
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args)

for block in grouper(8, f):
    # do stuff
    pass 
```

这是有效的，因为迭代`f`与迭代其行相同。

# java - 在这个 Spring MVC 展示示例中如何使用 @RequestAttribute 和 @ModelAttribute 注释？

> ID：13919307
> 
> 赞同：6
> 
> 时间：2012-12-17T17:47:42.150
> 
> 标签：java, spring, spring-mvc, model, annotations

我在 Spring MVC 中很新。

在此期间，我正在研究可从 STS 仪表板下载的[Spring MVC 展示示例。](https://github.com/spring-projects/spring-mvc-showcase)

我在理解此示例中如何处理自定义可解析 Web 参数时遇到了一些问题。

在实践中，我有以下情况：

在我的 home.jsp 视图中，我有以下链接：

```
<a id="customArg" class="textLink" href="<c:url value="/data/custom" />">Custom</a> 
```

此链接生成一个对 URL 的 HTTP 请求：**“/data/custom”**

包含处理此请求的方法的控制器类具有以下代码：

```
@Controller
public class CustomArgumentController {

@ModelAttribute
void beforeInvokingHandlerMethod(HttpServletRequest request) {
    request.setAttribute("foo", "bar");
}

@RequestMapping(value="/data/custom", method=RequestMethod.GET)
public @ResponseBody String custom(@RequestAttribute("foo") String foo) {
    return "Got 'foo' request attribute value '" + foo + "'";
}

 } 
```

处理这个 HTTP 请求的方法是**`custom()`**

因此，当单击上一个链接时，HTTP 请求由自定义方法处理...

我在理解`@RequestAttribute`注释内容时遇到问题。

我认为，在这种情况下，它将名为 foo 的请求属性绑定到一个新`String foo`变量。

但是......这个属性是从哪里获得的？这个变量是由 Spring 采用的吗？

好的......我的想法是这个请求属性取自一个`HttpServletRequest`对象......

我认为这是因为，在这个类中，我也有`beforeInvokingHandlerMethod()`一个有名字的方法......所以似乎这个方法设置了一个属性，在一个对象内部有`name=foo`and ......然后该方法可以使用这个值...`value=bar``HttpServletRequest``custom()`

实际上我的输出是：

`Got 'foo' request attribute value 'bar'`

为什么`beforeInvokingHandlerMethod()`在方法之前调用`custom()`？

为什么注释`beforeInvokingHandlerMethod()`被`@ModelAttribute`注释？这个案子是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:08:00.123

你的假设是正确的`@RequestAttribute`，它不需要设置`beforeInvokingHandlerMethod`。假设您有一个映射到`/data/init`将请求转发到的方法`/data/custom`。在这种情况下，请求属性也可以在 init 方法中设置。

> 为什么在 custom() 方法之前调用 beforeInvokingHandlerMethod()？
> 
> 以及为什么 @ModelAttribute 注释对 beforeInvokingHandlerMethod() 进行了注释？在这种情况下是什么意思？

你会在这里得到原因 [http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-modelattrib-methods](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-modelattrib-methods)

> 方法上的 @ModelAttribute 表示该方法的目的是添加一个或多个模型属性。此类方法支持与 @RequestMapping 方法相同的参数类型，但不能直接映射到请求。相反，控制器中的 @ModelAttribute 方法在同一控制器中的 @RequestMapping 方法之前被调用。

# python - Python：如何解决 TypeError：循环中需要一个整数

> ID：13919309
> 
> 赞同：1
> 
> 时间：2012-12-17T17:48:00.620
> 
> 标签：python, list, error-handling, coding-style, list-comprehension

我有一个列表 Dsr

```
>>> Dsr
[59.10346189206572, 40.4211078871491, 37.22898098099725]
type(Dsr)
<type 'list'> 
```

我需要计算最大值并将列表的每个元素除以该值

```
dmax = numpy.max(Dsr)
RPsr = []
for p in xrange(Dsr):
      RPsr.append(float(Dsr[p]/dmax)) 
```

我有以下问题：

1）当我运行这个循环时，我得到了错误信息：

```
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
TypeError: an integer is required 
```

2）是否可以将循环转换为最优雅的列表理解？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T17:52:54.030

你得到了例外，因为`xrange()`需要 a`int`而不是`list`. 您需要使用`len()`：

```
for p in xrange(len(Dsr)):
                ^^^ 
```

由于您已经在使用 NumPy，我的建议是像这样重写整个内容：

```
In [7]: Dsr = numpy.array([59.10346189206572, 40.4211078871491, 37.22898098099725])

In [8]: Dsr / Dsr.max()
Out[8]: array([ 1\.        ,  0.68390423,  0.6298951 ]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T17:52:49.520

如果我理解正确，你需要这个：

```
>>> dsr = [59.10346189206572, 40.4211078871491, 37.22898098099725]
>>> the_max = max(dsr)
>>> [i/the_max for i in dsr] 
[1.0, 0.6839042349323938, 0.6298950990211796] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T17:54:26.673

大概您想遍历实际列表。你不`xrange`用于那个：

```
for p in Dsr:
    RPsr.append(float(p/dmax)) 
```

你说得对，列表理解是更简单的方法：

```
RPsr = [p/dmax for p in Dsr] 
```

# java - Java 数学，计算总组合

> ID：13919310
> 
> 赞同：-1
> 
> 时间：2012-12-17T17:48:03.767
> 
> 标签：java, math, recursion, combinations

我计算出一种方法的所有可能组合的最简单方法是什么？这是我正在尝试解决的示例类；

```
class Combinations {

    public void generate()
    {
        final int TOTAL_A = 10;
        final int TOTAL_B = 21; // TOTAL_B is used twice
        final int TOTAL_C = 17;
        final int TOTAL_Z = 20;
        int count = 0;
        for (int a = 0; a < TOTAL_A; a++)
        {
            for (int b = 0; b < TOTAL_B; b++)
            {
                for (int b_two = 0; b_two < TOTAL_B; b_two++)
                {
                    for (int c = 0; c < TOTAL_C; c++)
                    {
                        for (int one = 0; one < TOTAL_Z; one++)
                            for (int two = one + 1; two < TOTAL_Z; two++)
                                for (int three = two + 1; three < TOTAL_Z; three++)
                                    for (int four = three + 1; four < TOTAL_Z; four++)
                                        for (int five = four + 1; five < TOTAL_Z; five++)
                                            count++;
                    }
                }
            }
        }
        System.out.println("Total combinations: " + count);
    }

} 
```

在不必实际执行循环的情况下找出“计数”的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:36:53.760

外部循环`a, b, b_two, c`根本不影响内部循环中所做的事情，因此它们只会产生重复因素，

```
TOTAL_A * TOTAL_B² * TOTAL_C 
```

你乘以内部循环的工作。

内部循环，`one, two, three, four, five`影响或依赖于其他循环。每个循环都决定了封闭循环的范围，所以你自然会从里到外工作。

```
for (int five = four + 1; five < TOTAL_Z; five++)
     count++; 
```

所以最里面的循环`count`总共增加了`TOTAL_Z - 1 - four`几次。为简洁起见，我们用`TOTAL_Z - 1`表示`N`。

循环`four`确实

```
N - four 
```

`four`从`three+1`到 的增量`N`，

```
 N             N-three-1
    ∑ (N - four) =    ∑ k    = (N-three)*(N-three-1)/2
four=three+1         k=0 
```

`three`循环从到`(N-three)*(N-three-1)/2`递增。_ 设置，这给了`three``two+1``N``j = N - three`

```
N-two-1
  ∑    j*(j-1)/2 = (N-two)*(N-two-1)*(N-two-2)/6
 j=0 
```

`two`循环从to ， setting的范围内`(N-two)*(N-two-1)*(N-two-2)/6`递增，这给出了`two``one+1``N``j = N - two`

```
N-one-1
   ∑   j*(j-1)*(j-2)/6 = (N-one)*(N-one-1)*(N-one-2)*(N-one-3)/24
  j=0 
```

最后，循环在从 0 到`one`的范围内执行上述增量，给出`one``N`

```
 N                                            N
   ∑ (N-one)*(N-one-1)*(N-one-2)*(N-one-3)/24 = ∑ k*(k-1)*(k-2)*(k-3)/24
one=0                                          k=0
                                              =  (N+1)*N*(N-1)*(N-2)*(N-3)/120 
```

（或`(N+1) `choose` 5`）在内循环中一起递增。

`N = TOTAL_Z - 1 = 19`, `20 `choose` 5 = 15504`, 与外部循环的常数相乘，`count`总共得到 1162334880 个增量。

允许在这里进行简单计算的关键事实是

```
 m
 ∑   (n+k) `choose` k = (n+m+1) `choose` m
k=0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:29:01.290

```
|A| * (|B| choose 2) * |C| * (|Z| choose 5) = 553,492,800 
```

或者，如果您想从两个不同`B1`且`B2`大小相同的池中进行选择：

```
|A| * |B1| * |B2| * |C| * (|Z| choose 5) = 1,162,334,880 
```

其中`n choose k`定义如下：

```
n!/(k!*(n-k)!) 
```

# c - 用于检查未知单词是否出现在所有 3 个不同长度的字符串中的函数

> ID：13919312
> 
> 赞同：0
> 
> 时间：2012-12-17T17:48:13.890
> 
> 标签：c, string, function

我将 3 个字符串传递给函数，并且需要查看字符串以找到出现在所有三个字符串中的单词。字符串只是没有空格或插符的字母。我编写了一个代码来遍历 2 个字符串，但由于某种原因它不起作用。任何帮助表示赞赏。

```
char* najduljiPodniz(char* niz1, char* niz2, char* niz3)
{
   int i,j,t1,br=0;

   for(i=0;i<strlen(niz1);i++)
   {
       for(j=0;j<strlen(niz2);j++)
       {
           if(niz1[i]==niz2[j])
           {
               t1=i;
               br++;
               while(niz1[i]==niz2[j])
               {
                   br++;
                   i++;
                   j++;
               }
           }
           else break;
       }
   }

char *podniz=(char*)malloc(sizeof(char)*br+1);

for(i=0,j=t1;j<br;i++,j++)
    podniz[i]=niz1[j];

for(i=0;i<br;i++)
    printf("%s",podniz[i]);

return 0;
} 
```

为了澄清：字符串的示例是：“afsdmartiangknrhg”。所以，随机字母和字符串中的某处有一个实际的单词。在这个例子中是“火星人”。其他 2 个字符串也包含单词“martian”。martian 这个词对我来说是“未知的”，所以我无法检查字符串中的实际单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:37:14.887

好的，这是我根据修改后的问题描述的新答案（请参阅我的第一个答案的评论）。

首先，选择三个字符串中最短的一个。迭代该字符串的所有可能的子字符串，从最长的开始。对于每个子字符串，`strstr`用于在其他两个字符串中搜索它。如果在两者中都找到了，那么您就有了解决方案。

尝试类似：

```
for (i=0; i<N; i++) {
    for (j=0; j<=i; j++) {
        int tmp = a[N-1-i+j];
        a[N-1-i+j] = 0;
        if (strstr(b, a+j) && strstr(c, a+j)) printf("got '%s'\n", a+j);
        a[N-1-u+j] = tmp;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:08:13.637

显而易见的解决方案是从最短的字符串（以字数衡量）开始并遍历该字符串中的每个单词。对于每个单词，调用`strstr`以尝试在其他两个字符串中找到它，并进行一些额外的工作来检查它是否位于单词边界，如果发现它嵌入到更大的单词中，则继续搜索。

我想这有不错的表现；它是字符总数的二次方，但您可以更好地绑定它；它大致`O(N*M)`是`N`字符串中单词最少的单词`M`数和字符总数。（注意：我假设线性时间`strstr`，而不是二次算法之一。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T19:40:19.170

你在这里有两个问题。“为什么我的程序不起作用？” 和“我该如何解决这个问题？”

对于第一个问题，主要问题是您的内部 while 循环递增`i`and `j`，这意味着如果您在`niz1`and之间找到任何常见字符`niz2`，您将跳过外部循环中的以下字符并且永远不会查找包含它们的子字符串. 例如，如果`niz1`是 "afsdmartiangknrhg" 并且`niz2`在任何地方都包含一个 'd'，您将跳过 'martian' in 中的 'm' `niz1`，因此永远不会寻找匹配`niz2`

对于第二个问题，听起来您的问题简化为：给定一个字符串 x 和一组字符串 y_1..y_n，找到 x 的最长子字符串，它存在于所有 y_1..y_n 中。所以显而易见的解决方案变成：

1.  选择最短的输入字符串并将其称为“x”。调用其余的 y_1..y_n。

2.  对于 x 的每个子串，从最长到最短，检查它是否存在于所有 y_1..y_n 中。如果你找到一个，你就完成了。如果不是，请继续使用可能较短的子字符串

这将需要 O(n * k^2) 子字符串检查，其中 n 是字符串的数量，k 是最短的长度。每个子字符串检查本身可能需要 O(k) 时间，因此总体而言 O(n * k^3) - 相当慢，但如果你的最短字符串很短，可能没问题。

# android - 如何控制形状的渐变？

> ID：13919316
> 
> 赞同：1
> 
> 时间：2012-12-17T17:48:27.970
> 
> 标签：android, background, textview, gradient, shape

我有一个顶部带有标签的屏幕。这个标签是用 TextView 完成的。作为背景，我想要一个垂直渐变，从 color1 开始，更改为 color2 并返回到 color1。目前我有：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <stroke android:width="1px" android:color="#000000" /> 
    <gradient
        android:startColor="#FFFFFFFF"
        android:centerColor="#FF8800"
        android:endColor="#FFFFFFFF" 
        android:type="linear"
        android:angle="270" 
/>
    <corners android:radius="10dp"/>
</shape> 
```

我的问题是 centerColor 线太细了。我希望它占据所有字母空间。我找不到任何使渐变更快的方法。我已经尝试使用布局列表但没有成功。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T11:38:54.963

这是一个更加不同的轨道，但您是否考虑过使用 9-patch 图像文件？这将允许您拉伸您希望的渐变部分，并通过正确分割背景使中心线尽可能大。

以下是我用来学习它们的一些很棒的教程： [draw 9 patch tutorial](http://www.android10.org/index.php/articlesother/279-draw-9-patch-tutorial)

并且出自谷歌自己的Android口中： [Android 9补丁](http://developer.android.com/tools/help/draw9patch.html) [All Drawable resources for Android](http://developer.android.com/guide/topics/resources/drawable-resource.html)

# javascript - Acrobat SDK - 在打开时检索 PDF 路径

> ID：13919318
> 
> 赞同：1
> 
> 时间：2012-12-17T17:48:31.937
> 
> 标签：javascript, pdf, directory, acrobat

我想要一个在后台运行的脚本，最好是文件夹级别的。每次打开 PDF 时，我都想获取该 PDF 的文件路径并将其保存到数组中。问题是我在文档中没有看到任何动作监听器。但是，有一个名为 app.activeDocs 的对象是当前活动的文档。

```
var d = app.activeDocs;
var paths = new Array();

for (var i=0; i < d.length; i++) {
    paths.push(d[i].path);
} 
```

但问题是，这些文档只有在使用 app.open 命令打开时才处于活动状态，我希望它能够识别通过双击 PDF 或使用文件 > 打开打开的 PDF。

我想知道这是否可以使用 Acrobat SDK 来实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:44:53.590

如果我理解正确，您想编写一个 JavaScript，该 JavaScript 在启动时由 Acrobat 加载，然后在每次打开文档时调用。

如果是这种情况，请在 Acrobat Javascript 文档中搜索“事件”对象。这些事件是在某些操作时触发的，其中之一是打开文档：

```
This event is triggered whenever a document is opened. When a document is opened,
the document-level script functions are scanned and any exposed scripts are executed. 
```

[本文](http://www.planetpdf.com/developer/article.asp?ContentID=working_with_events_in_acrobat&gid=6823)也解释了事件并指向一个示例文档。

# mysql - 解析查询时出错

> ID：13919322
> 
> 赞同：3
> 
> 时间：2012-12-17T17:48:48.780
> 
> 标签：mysql, sql, sql-server-ce, webmatrix-2, razor-2

我需要帮助....我不擅长 SQL 尝试应用 JOIN 时出现此错误：

```
[ Token line number = 1,Token line offset = 66,Token in error = JOIN ] 
```

这是我的 SQL：

```
var query = "SELECT Team.TeamName, Fixtures.HomeTeam" +
                "FROM Team" +
                "LEFT JOIN Fixtures" +
                "ON Team.TeamId=Fixtures.HomeTeam" +
                "ORDER BY Team.TeamName"; 
```

Team Table 有 PK：TeamId Fixture Table 有 FK：HomeTeam 我正在使用 WebMatrix 2\. Razor WebPages

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T17:54:28.263

行连接之间没有空格。更改每一行以在末尾包含空格。

```
var query = "SELECT Team.TeamName, Fixtures.HomeTeam " +
            "FROM Team " +
            "LEFT JOIN Fixtures " +
            "ON Team.TeamId=Fixtures.HomeTeam " +
            "ORDER BY Team.TeamName"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T08:01:03.460

正如 Charles Brentana 所指出的，您错过了 SQL 命令中的空格。

也许更好的解决方案是您使用逐字字符串文字，即在双引号字符之前使用 @ 字符创建的字符串，它可以跨越多行：

```
var query = @"SELECT Team.TeamName, Fixtures.HomeTeam
                FROM Team
                LEFT JOIN Fixtures
                ON Team.TeamId=Fixtures.HomeTeam
                ORDER BY Team.TeamName"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T08:09:57.680

你的字符串之间需要空格。

我通过将空格作为第一个字符来避免这种情况*，*因此当您忘记对其进行编码时，这一点非常明显：

```
var query = "SELECT Team.TeamName, Fixtures.HomeTeam" +
            " FROM Team" +
            " LEFT JOIN Fixtures" +
            " ON Team.TeamId=Fixtures.HomeTeam" +
            " ORDER BY Team.TeamName"; 
```

如果您始终以这种方式编码，您将能够立即发现任何缺失的空格。

# sql - 避免使用 START WITH.. CONNECT BY PRIOR

> ID：13919327
> 
> 赞同：1
> 
> 时间：2012-12-17T17:48:57.603
> 
> 标签：sql, oracle

`WHERE`我有一个查询，它在子句中调用一个函数，例如

`SELECT * FROM table_name t WHERE (SELECT xyz_function(t.test) FROM dual) = 'A';`

还有一个函数 xyz_function 根据以下条件返回“A”或“B”：

```
SELECT 'A' FROM dual WHERE pTest NOT IN (
                                         a_START_WITH_CONNECT_BY_CLAUSE
                                         MINUS
                                         b_START_WITH_CONNECT_BY_CLAUSE); 
```

这`pTest`是我传递给函数的参数。我`START WITH.. CONNECT BY PRIOR`在函数中使用了两个子句。

由于该函数在 WHERE 子句中调用.. 它正在为所有 t.test 执行。

该查询提供了近 20K 条记录，因此超时。

`START WITH.. CONNECT BY`由于函数中的子句，查询似乎超时。

谁能帮我删除 START WITH.. CONNECT WITH 子句..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:45:35.867

将...

```
SELECT
    *
FROM 
    table_name t 
WHERE 
    t.test NOT IN 
    (
        a_START_WITH_CONNECT_BY_CLAUSE
        MINUS
        b_START_WITH_CONNECT_BY_CLAUSE
    ); 
```

...相当于你目前拥有的？如果不查看您的表、函数和 CONNECT BY 子句的样子，就很难说。但是，如果它是等效的，您可能会获得更好的性能，因为可能不需要对每一行评估 MINUS 查询。

# c# - 检测并口是否存在

> ID：13919329
> 
> 赞同：2
> 
> 时间：2012-12-17T17:49:15.000
> 
> 标签：c#, parallel-port

我有一个 C# 程序，它使用多种方法操作 2 根线，其中一种方法是使用并行端口接口。

用户选择他们想使用的方法，我想根据机器上可用的内容过滤选项。

我一直在使用[inpout32.dll](http://www.logix4u.net/index.php)进行并行端口通信，但如果计算机没有并行端口，它不会出错，所以我需要另一种方式来判断。

我已经看到了许多查找可用打印机以查找端口的示例，但没有连接打印机，因此此解决方案将不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:39:34.760

您可以通过 WMI 接口枚举设备

这是一篇文章：

[http://www.codeproject.com/Articles/18268/How-To-Almost-Everything-In-WMI-via-C-Part-3-Hardw](http://www.codeproject.com/Articles/18268/How-To-Almost-Everything-In-WMI-via-C-Part-3-Hardw)

还有一个名为“Win32_ParallelPort：并行端口”的类

# android - 如何将 RadioButton/RadioGroup 的 id 传递到 Android 中的另一个屏幕？

> ID：13919337
> 
> 赞同：-1
> 
> 时间：2012-12-17T17:49:42.103
> 
> 标签：android, radio-button, textview, radio-group

> **可能重复：**
> [如何在 Android 中的活动之间传递数据？](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android)

![问答](../Images/796dba6331e42d4c951f2a3ffe0ef33a.png)

Yes,No,Difficult 是三个`RadioButton`s 而 NEXT 是一个`Button`。我不知道如何将每个屏幕的选定单选按钮的 ID 传递到最后一个屏幕。在 RESULT 屏幕中，特定值将显示在 中`TextView`。这是一个屏幕的代码：

```
public class MainActivity extends Activity {
RadioGroup rg;
RadioButton rb;
Button b;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    addListenerOnButton();
}
private void addListenerOnButton() {
    rg = (RadioGroup) findViewById(R.id.rg_Ques1);
    b = (Button) findViewById(R.id.button1_ques1);
    b.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            int  selectedId = rg.getCheckedRadioButtonId();
            rb = (RadioButton) findViewById(selectedId);
            Intent i = new Intent(MainActivity.this,Ques2.class);
            startActivity(i);
            Toast.makeText(getApplicationContext(), rb.getText(), 0).show();
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:00:20.233

我的方法在这里会有所不同。我将只针对所有问题进行一项活动。我会将我的问题保存在一个列表中，并在按下“下一步”按钮时加载新问题。显示最后一个问题时，将按钮文本更改为“完成”，并在按“完成”时加载新活动，并在捆绑中包含正确答案的编号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:56:24.597

您可以使用意图，也可以将值存储在首选项中，并在需要时访问首选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:53:35.417

在您的初始课程中，您可以向意图添加额外内容：

```
int  selectedId = rg.getCheckedRadioButtonId();
rb = (RadioButton) findViewById(selectedId);
Intent i = new Intent(MainActivity.this,Ques2.class);
i.putExtra("rb_value", rb.isChecked());
startActvity(i); 
```

在您的第二堂课中，您可以获得您传递的额外值：

```
this.getIntent().getExtras().getBoolean("rb_value"); 
```

如果您需要问题二的问题一的结果，这将是最好的方法。如果您不需要问题 1 的结果作为问题 2，但您只需要它们用于结果，则最好查看`SharedPreference`（根据记忆，某些表达式可能不正确但接近）：

在您的问题活动中：

```
SharedPreferences sharedPreferences = this.getSharedPreferences("my.app.preferences", 0);
SharedPreferences.Editor sharedPreferences_edit = sharedPreferences.edit();

sharedPreferences_edit.putBoolean("question1", true);
sharedPreferences_edit.commit(); 
```

在您的结果活动中：

```
SharedPreferences sharedPreferences = this.getSharedPreferences("my.app.preferences", 0);
sharedPreferences.getBoolean("question1"); 
```

对于加载这样的问题，加载新的意图不是最好的解决方案，因为你最终会分层你的应用程序......如果我正在创建这样的东西，我会让它能够更改问题而无需加载全新的活动，按下按钮后，它只会更改屏幕上的问题，同时将响应存储到变量/sharedPreferences。

# java - 有没有一种简单的方法可以让客户端 JavaScript 访问像 Enums 这样的服务器端类？

> ID：13919339
> 
> 赞同：1
> 
> 时间：2012-12-17T17:49:44.530
> 
> 标签：java, javascript, jsp, tomcat

假设我有课程`Project`,`Employee`和`ProjectAssignement`。我有一个 enum `Role`，有两个值，`LEADER`和`FOLLOWER`. s通过对象`Employee`分配给s，该对象具有类型的成员字段。`Project``ProjectAssignment``role``Role`

我有一个商业规则，每个项目只能有一个领导者，但可以有很多追随者。为了实现这一点，我给出`Role`了一个成员字段`singular`，即`true`for`LEADER`和`false`for `FOLLOWER`。（我将来可能会添加更多角色。）我的服务器端 Java 会检查您是否尝试将多个领导者分配给一个项目并且不允许您这样做。

到目前为止，我认为我没有描述任何特别不寻常的事情。

这是尴尬的一点：我有一些（手写的）客户端 JavaScript 验证，以确保您不会将多个具有相同角色的人分配给一个项目。它对追随者有一个硬编码的例外。是否有任何干净的方法可以让 JavaScript 代码了解`Role`枚举，以便它可以访问该`isSingular`方法？

（显然，任何类型的事情实际上都必须`Role`在某个时候将枚举转录成 JavaScript；我想避免手动甚至半自动地这样做，因为这很快就会变得比我在更多情况下这样做更值得付出努力。 )

我没有使用 Spring 或任何类似的框架，只是简单的 .jsps。重写整个应用程序以使用类似的东西可能是一个好主意，但远远超出了问题的范围。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:29:58.167

我通常通过在页面上的一些动态生成的 Javascript 中添加查找表来解决此类问题。也许用户的 id 是关键，他们的“奇异性”是价值。或者，也许您只列出那些不那么受欢迎的人（领导者可能较少，所以只列出那些）。然后只需在 javascript 中查阅 LUT。

实际上访问 ENUM 是不可能的。相反，您必须自己弥补差距，即使这意味着构建一个完全建模服务器端对象描述的 Javascript 对象，然后复制所有数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:38:50.537

我知道您正在寻找内置的东西，但毕竟我被拖入了半自动转换。

此函数将任何 Enum 转换为 JavaScript 对象：

```
public static <E extends Enum<?>> String getEnumAsJavaScript(Class<E> c)
{
  String name = c.getName().substring(c.getName().lastIndexOf('$')+1);
  String result = "var " + name + " = {";
  for (E o: c.getEnumConstants()) {
    if (o.ordinal() != 0) result += ", ";
    result += " " + o + ": "+ o.ordinal();
  }
  result += " }";
  return result;
} 
```

给定这样的枚举和调用：

```
public enum Role { EMPLOYEE, LEADER }

System.out.println(getEnumAsJavaScript(Role.class)); 
```

它将生成这个 JavaScript 对象：

```
var Role = { EMPLOYEE: 0,  LEADER: 1 } 
```

# python - Python argparse：具有一些兼容参数的互斥组

> ID：13919341
> 
> 赞同：18
> 
> 时间：2012-12-17T17:49:55.013
> 
> 标签：python, argparse

我想在 argparse 中实现这样的逻辑：

```
If argument A is selected, the user cannot select arguments B or C.
B and C can both be selected 
```

看起来这[`add_mutually_exclusive_group`](http://docs.python.org/2/library/argparse.html#argparse.add_mutually_exclusive_group)是我想要的，但看起来你只能从互斥组中选择一个选项，所以我不能将这三个选项都放在互斥组中。

有没有办法在 argparse 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-28T10:33:22.283

你不能真正做到这一点`argparse`，但是你可以在`argparse`运行后做到这一点。

这是一个例子：

```
parser = argparse.ArgumentParser()

# group 1 
parser.add_argument("-q", "--query", help="query", required=False)
parser.add_argument("-f", "--fields", help="field names", required=False)

# group 2 
parser.add_argument("-a", "--aggregation", help="aggregation",
                    required=False) 
```

我在这里使用为命令行包装器提供的选项来查询 mongodb。`collection`实例可以调用方法`aggregate`或`find`带有可选参数`query`and的方法`fields`，因此您会看到为什么前两个参数兼容而最后一个参数不兼容。

所以现在我运行`parser.parse_args()`并检查它的内容：

```
args = parser().parse_args()

print args.aggregation
if args.aggregation and (args.query or args.fields):
    print "-a and -q|-f are mutually exclusive ..."
    sys.exit(2) 
```

当然，这个小技巧只适用于简单的情况，如果您有许多互斥的选项和组，检查所有可能的选项将成为一场噩梦。在这种情况下，您应该将您的选项分解为命令组。为此，您应该遵循[Python argparse 互斥组](https://stackoverflow.com/questions/17909294/python-argparse-mutual-exclusive-group)的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-04T06:00:43.487

[Docopt](http://docopt.org/)可以在这种情况下工作。

它使用管道来表示互斥的元素。

```
my_program (aggregate | find [-q | -f]) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-05T00:45:23.023

您可以否定 A 的含义，然后使用子解析器。The subparsers allows you to specify that "If and only if A is selected, user can select B or C."

[http://docs.python.org/2/library/argparse.html](http://docs.python.org/2/library/argparse.html)

# html - 使用 Visual Studio 的搜索替换功能检索两个 html 标记之间的文本的正则表达式

> ID：13919342
> 
> 赞同：0
> 
> 时间：2012-12-17T17:49:59.763
> 
> 标签：html, regex, visual-studio

我正在尝试使用 Visual Studio 的搜索替换功能来删除不做任何事情的标签。目的是在我将一些 HTML 粘贴到 SharePoint 页面之前对其进行简化。

这就是我在查找框中使用的`\<font\>{~(.*\<font\>.*)}\</font\>`

并且替换框有`\1`

然而，这个表达式没有匹配，即使我`<font> xxxx </font>`在 HTML 中有很多这样的地方。我可以将`.*`括号移到外面，但随后表达式匹配了我有多组字体标签的大部分行——其中一些实际上做了一些事情。

我认为如果 IDE 使用与它作为主要开发工具的语言相同的正则表达式引擎，这会容易得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:09:10.890

我只需要查看 VS 2010 的文档。我只`@`需要使用最小匹配：`\<font\>{.@}\</font\>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T02:07:21.987

我试图用 div 标签替换所有 span 标签。通过使用图片中的以下正则表达式，我能够解决类似的问题。我不得不同时转义 > 和 < 以及类属性双引号。 `\<span class=\"label\"\>{.@}\</span\>` `<div class="label">\1<\div>`

![Html 标签正则表达式替换](../Images/73281a714e10831d68cf3a911215c3de.png)

# sql - 无限期等待是否会增加日志文件的大小？

> ID：13919343
> 
> 赞同：1
> 
> 时间：2012-12-17T17:50:01.427
> 
> 标签：sql, sql-server, sql-server-2005, service-broker

在我的应用程序的最后一个版本中，我添加了一个命令，告诉它等待服务代理队列中的东西到达

```
WAITFOR (RECEIVE CONVERT(int, message_body) AS Message FROM MyQueue) 
```

DBA 告诉我，自从添加以来，日志大小已经达到顶峰。这可能是正确的吗？还是我应该去别处寻找？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:41:30.840

我尚未在服务代理中对此进行测试，但我认为相同的 ACID 合规机制将发挥作用。这取决于它是否在您的代码中打开交易。如果它让一个事务处于打开状态而不提交它，日志将继续增长，直到有东西关闭它，只有在那个时候，它才会最终标记旧区域以供重用。

我还没有在 prod 中推出服务代理，但是我没有包含任何 WAITFOR 的测试/阅读。相反，像 Denny Cherry 这样的服务器代理 MVP 通常会继续查询队列，而不是执行 WAITFOR。

您能否发布一些其他代码并告诉我们您为什么使用 WAITFOR？也许有一些我没有得到的东西，这将是一个很好的用例场景。谢谢！

# javascript - document.execCommand 无法正常工作

> ID：13919345
> 
> 赞同：0
> 
> 时间：2012-12-17T17:50:09.387
> 
> 标签：javascript, execcommand

我正在开发一个非常简单的 JS 项目（对于我的客户，所以不能为此使用 jQuery，嗯。）

所以基本上我有几个这样的按钮：

```
button.onClick="document.execCommand('bold', false, null);"; 
```

和其他像斜体，下划线等。

问题是他们不工作。我确信 execCommand 可以工作，因为我用计时器对其进行了测试并且它确实有效。不是的原因是当我点击它时，来自 contentEditable=true div 的文本被取消选中。

有没有办法避免这种情况？

提前致谢。

* * *

```
boldBtn = document.createElement('a');
boldBtn.innerHTML = "make text bold";
    document.getElementById("toolbox").appendChild(boldBtn);

boldBtn.onClick="document.execCommand('bold', false, null);"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:21:49.783

如果您使用 javasript，您宁愿将侦听器设置为真正的函数，而不是作为函数的字符串。

```
boldBtn.setAttribute("href", "#");
boldBtn.onClick = function()
{
    document.execCommand("bold", false, null); //or maybe exec bold(false); directly ?
    return false;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-03T23:17:05.207

你为什么完全使用 exeCommand ？

你可以通过 vanilla JavaScript 来做到这一点。

```
document.getElementById("boldBtn").style.fontWeight = "bold"; 
```

或者因为您已经有参考

```
boldBtn.style.fontWeight = "bold"; 
```

# sentiment-analysis - 语义分析开源工具 - 需要的建议

> ID：13919351
> 
> 赞同：3
> 
> 时间：2012-12-17T17:50:25.793
> 
> 标签：sentiment-analysis, semantic-analysis

我有一个书评网站，读者可以在其中撰写有关书籍的评论，其他用户可以发表评论。每当发布新评论或发布新评论时，我想自动了解以下内容。

(1) 书评是否正面？多少百分比的正面/负面？

(2) 特定用户的评论是否正面？多少百分比的正面/负面？

(3) 我想阅读关于特定书籍的推文并想检查推文是否是正面的？

最重要的是，我想要一些工具建议（开源），我可以将其用于我的网站。网站是用 PHP 编写的，我正在寻找一些可以定制以满足我的需要或最适合我的需要的语义分析工具。

如果没有，我想知道它是否容易以最低要求构建一个。我知道 PHP、Perl、Shell 脚本。我可以学习 Python。我知道 C++，Java 可能是从头开始的正确语言；但没有太多经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:05:53.880

为了响应您的第一个请求，我建议您创建一个表单，其中用户有一个投票选项（例如 ax/5 星评级等），然后您将计算所有评论的平均值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:04:17.400

Apache 软件基金会孵化了一个开源语义分析引擎，目前称为[Stanbol](http://stanbol.apache.org/)。它提供 API 以通过 HTTP 以及在需要时通过 Java API 与之交互。它非常先进，但一般来说，如果您的需求更简单，您可以随时尝试一些 SaS 解决方案，例如[uClassify](http://www.uclassify.com/browse/uclassify/Sentiment)。

# api - Trello API - 未经授权的权限请求

> ID：13919354
> 
> 赞同：4
> 
> 时间：2012-12-17T17:50:32.243
> 
> 标签：api, jsfiddle, trello

我正在尝试编写一个小脚本来使用卡片在当前列表中的时间量来更新卡片，这样我们就可以优化我们的吞吐量。我在 jsfiddle 上写了一个几乎可以工作的小脚本，但是在尝试使用时我得到了“**请求未经授权的卡许可”：**

```
Trello.post("cards/" + card.id + "/actions/comments", {text: "This card has been in this list for " + ago + " days."}) 
```

或者...

```
Trello.put("cards/" + card.id + "/name", "(" + ago + ") " + card.name); 
```

这是小提琴，如果有帮助的话：http: [//jsfiddle.net/A3Xgk/2/](http://jsfiddle.net/A3Xgk/2/)

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-21T05:32:29.230

[尝试从https://trello.com/1/connect?key=yourkey&name=your_board_name&expiration=never&response_type=token&scope=read,write](https://trello.com/1/connect?key=yourkey&name=your_board_name&expiration=never&response_type=token&scope=read,write)请求您的应用令牌

参考： [https ://github.com/zmilojko/git-trello](https://github.com/zmilojko/git-trello)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T19:16:22.620

正在请求的“未授权卡权限”是**写权限**

在您的[jsfiddle 示例](http://jsfiddle.net/A3Xgk/2/)中，当“连接到 Trello”窗口弹出时，您会注意到它说

> **该应用程序将能够：**
> 
> *   阅读您所有的董事会和组织
> 
> **它不能：**
> 
> *   创建和**更新卡片**、列表和板
> *   **为你发表评论**
> *   阅读您的电子邮件地址
> *   查看您的 Trello 密码

您需要请求具有**写入**权限的令牌，您可以通过将`scope`参数更改为`Trello.authorize`：

```
$("#connectLink").click(function() {
    Trello.authorize({
        type: "popup",
        scope: { read: true, write: true },
        success: onAuthorize
    });
}); 
```

**[（ client.js 源代码中](https://trello.com/1/client.coffee)**`scope`的默认值为）`{ read: true, write: false }`

# javascript - 在 JavaScript 中用位掩码识别湖泊

> ID：13919358
> 
> 赞同：0
> 
> 时间：2012-12-17T17:50:43.047
> 
> 标签：javascript, algorithm, flood-fill

我有一个使用单纯形噪声生成“大陆”的算法，因此它会生成一个高度图，当像素/图块高于某个水平时，它将被识别为陆地，否则它是水。

我遇到的问题是有时土地会包围低于海平面的部分。我希望能够识别这些区域，因为它们不是海洋，而是陆地或湖泊。

所以下面的0代表水，1代表土地：

```
000000000
001110100
011111110
011001110
001101100
001111000
000000000 
```

中间的 3 个 0 将被识别为非海。

我熟悉洪水填充算法。所以我可以做到的一种方法是遍历随机点，如果我找到水就使用洪水填充，如果它超过一定大小，那么它将是大海。然后，一旦识别出海洋，我就可以通过并识别非海洋水体。

这似乎效率低下，因为我必须处理比加载区域更大的区域，否则它会错误地将区域识别为非海洋。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:32:15.147

您只想计算所有单元的[连接组件](http://en.wikipedia.org/wiki/Connected_component_%28graph_theory%29)`0`。最大的组成部分是海，其他任何组成部分都是湖泊。这可以在线性时间内完成（请参阅链接页面的算法部分）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T18:10:45.983

您提到您已经熟悉洪水填充。为什么不从地图边缘进行洪水填充以获得大海？任何没有从边缘泛滥的水体都将成为湖泊。

# java - 如何详细说明 2 种加速度计数据

> ID：13919361
> 
> 赞同：0
> 
> 时间：2012-12-17T17:50:47.120
> 
> 标签：java, android, accelerometer

（对不起，我的英语不好，我是意大利人）我是 Android 编程新手，我有这个问题：我需要加速度计数据（sqrt(x*x..) 的最大值和最小值）每个“1”秒，如果它们的差值（增量）的绝对值小于 0.4*Gravity_earth，我需要在条件的前 5 秒内获取的数据，然后我计算最大值。如果该值大于 THRESHOLD，我将标记为“非跌倒”或“跌倒”。有人可以简单地解决我的问题吗？谢谢！这是我的解决方案：

```
public class MainActivity extends Activity implements SensorEventListener{

SensorManager sm;
float acc;  
private float [] sensorData;
float azimuth,pitch,roll;
float omegaMagnitude;
//ArrayList
ArrayList<Float> tutteLeAcc =new ArrayList();
ArrayList<Float> previousAcc=new ArrayList();
Iterator<Float> it;
Iterator<Float> it1;
float accMax;
float accMin;

float accPreviousMax;
float deltaAcc;

   private static final String TAG = "SIMTHR";

   public static final int MSG_C = 3; 
   public static final int MSG_D = 4; 

   WorkerThread mWorkerThread;
   WorkerThread1 mWorkerThread1;

   boolean isRunning = false;
   boolean running;
   Button btnStart,btnStop;
   TextView txtLog;
   int tt = 0;

   boolean caduta;

   final Handler mHandler = new Handler() {
      @Override
      public void handleMessage(Message msg) {
         switch (msg.what) {

         case MSG_C:
            //it=tutteLeAcc.iterator();
            txtLog.setText("");
            txtLog.append("\nAmax: "+Float.toString(accMax)+" Amin:         "+Float.toString(accMin)+" dA: "+Float.toString(deltaAcc));
            tutteLeAcc.clear();

            break;

         case MSG_D:

             txtLog.append("\nPreviousACCmax: "+Float.toString(accPreviousMax)+"\n");
             //previousAcc.clear();

         break;
         }
         caduta=Detection(previousAcc,deltaAcc);
         //previousAcc.clear();
      }
   };

    class WorkerThread extends Thread {

      public Handler mCallerHandler;
      private int nn = 1;

      public WorkerThread(Handler handler) {

       mCallerHandler = handler;
        Log.i(TAG,"create WorkerThread");
      }

  public void run() {
     nn = 0;
     while(running){
     try {
        Log.i(TAG,"WorkerThread inizia qua");
        if (mCallerHandler!=null) {

           accMax=trovaMax(tutteLeAcc);
           accMin=trovaMin(tutteLeAcc);
           deltaAcc=Math.abs(accMax-accMin);
           Thread.sleep(1000);  
           mCallerHandler.obtainMessage(MSG_C).sendToTarget();

           Log.i(TAG,"WorkerThread finisce qua");
        }
     } catch (InterruptedException e) {
        Log.e(TAG,"errore in WorkerThread "+e.toString());
     }
  }
  }

  public synchronized void start() {
     running=true;
     super.start();
     Log.i(TAG,"WorkerThread avviato");
  }

  public synchronized void cancel() {
      running=false;
      Log.i(TAG,"WorkerThread avviato");
   } 
```

}

```
 class WorkerThread1 extends Thread {

      public Handler mCallerHandler;
      private int nn = 1;

      public WorkerThread1(Handler handler) {
         // salvo l'handler dei messaggi dell'activity chiamante
         mCallerHandler = handler;
         Log.i(TAG,"create WorkerThread1");
      }

      public void run() {

         nn = 0;
         while(running){
         try {
            Log.i(TAG,"WorkerThread1 inizia qua");
            if (mCallerHandler!=null) {

               accPreviousMax=trovaMax(previousAcc);
               Thread.sleep(5000);  
               mCallerHandler.obtainMessage(MSG_D).sendToTarget();

               Log.i(TAG,"WorkerThread finisce qua");
            }
         } catch (InterruptedException e) {
            Log.e(TAG,"errore in WorkerThread "+e.toString());
         }
      }
      }

      // avvio del thread
      public synchronized void start() {
         running=true;
         super.start();
         Log.i(TAG,"WorkerThread avviato");
      }

      public synchronized void cancel() {
          running=false;
          Log.i(TAG,"WorkerThread avviato");
       }

   }

        @Override
      public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.main);
          Log.i(TAG,"Activity ONCREATE");

  sm = (SensorManager)getSystemService(SENSOR_SERVICE);

  sm.registerListener(this,sm.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),SensorManager.SENSOR_DELAY_NORMAL);
  sm.registerListener(this, sm.getDefaultSensor(Sensor.TYPE_ORIENTATION), SensorManager.SENSOR_DELAY_NORMAL);
  sm.registerListener(this, sm.getDefaultSensor(Sensor.TYPE_GYROSCOPE), SensorManager.SENSOR_DELAY_NORMAL);

  // oggetti della User Interface
  btnStart = (Button) findViewById(R.id.btnStart);
  btnStop=(Button)findViewById(R.id.btnStop);
  txtLog = (TextView) findViewById(R.id.txtLog);
  txtLog.setTextColor(Color.WHITE);

  sensorData = new float[9];

  // button per l'avvio del thread
  btnStart.setOnClickListener(new View.OnClickListener() {
       @Override
       public void onClick(View v) {
          if (mWorkerThread!=null&&mWorkerThread1!=null) {
             mWorkerThread.cancel();
             mWorkerThread1.cancel();
             mWorkerThread = null; mWorkerThread1 = null;
             txtLog.append("\nrichiesto arresto THREAD 1 e 2 #"+Integer.toString(tt)+"\n");
          }
          tt++;
          mWorkerThread = new WorkerThread(mHandler);
          mWorkerThread1 = new WorkerThread1(mHandler);
          mWorkerThread.start(); mWorkerThread1.start();
          isRunning = true;
          txtLog.append("\nrichiesto avvio THREAD 1 e 2\n");
       }
    });

    // button per l'arresto del thread
    btnStop.setOnClickListener(new View.OnClickListener() {
       @Override
       public void onClick(View v) {
          if (mWorkerThread!=null&&mWorkerThread1!=null) {
             mWorkerThread.cancel();
             mWorkerThread1.cancel();
             mWorkerThread = null; mWorkerThread1 = null;
             txtLog.append("\nrichiesto arresto THREAD 1 e 2\n");
          }
          isRunning = false;
       }
    }); 
```

}

```
 public void Deregistra(){
sm.unregisterListener(this);
       }

         public void Registra(){
sm.registerListener(this,sm.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),SensorManager.SENSOR_DELAY_NORMAL);
           }

           @Override
           public void onSensorChanged(SensorEvent event) {

float [] values = event.values;

synchronized (this) {

        if (event.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {

                sensorData[0] = event.values[0];

                sensorData[1] = event.values[1];

                sensorData[2] = event.values[2];

            if ((sensorData[3] != 0)||(sensorData[4] != 0)||(sensorData[5] != 0)
                    ||(sensorData[6] != 0)||(sensorData[7] != 0)||(sensorData[8] != 0))

            {

                     float ax=sensorData[0];
                     float ay=sensorData[1];
                     float az=sensorData[2];

                     acc=(float) Math.sqrt((ax*ax)+(ay*ay)+(az*az));

                     /*
                     tutteLeAcc.add(acc);
                     accMax=trovaMax(tutteLeAcc);
                     accMin=trovaMin(tutteLeAcc);
                     deltaAcc=Math.abs(accMax-accMin);
                       */
                     tutteLeAcc.add(acc);
                     previousAcc.add(acc);

                    }

            }

        else if (event.sensor.getType() == Sensor.TYPE_ORIENTATION ) {

            sensorData [3] = values[0];
            sensorData [4] = values[1];
            sensorData [5] = values[2];

            if ((sensorData[0] != 0)||(sensorData[1] != 0)||(sensorData[2] != 0)
                    ||(sensorData[6] != 0)||(sensorData[7] != 0)||(sensorData[8] != 0))
            {
                    azimuth=sensorData[3];
                    pitch=sensorData[4];
                    roll=sensorData[5];

            }
        }
        else if(event.sensor.getType()==Sensor.TYPE_GYROSCOPE){
            sensorData [6] = values[0];
            sensorData [7] = values[1];
            sensorData [8] = values[2];

            final float gx=sensorData[6];
            final float gy=sensorData[7];
            final float gz=sensorData[8];

            if ((sensorData[0] != 0)||(sensorData[1] != 0)||(sensorData[2] != 0)
                    ||(sensorData[3] != 0)||(sensorData[4] != 0)||(sensorData[5] != 0))
            {

                float axisX = sensorData[6];
                float axisY = sensorData[7];
                float axisZ = sensorData[8];

                // Calculate the angular speed of the sample
                omegaMagnitude = (float) Math.sqrt((axisX*axisX) + (axisY*axisY) + (axisZ*axisZ));

            }
        }

} 
```

}

```
 public float trovaMin(ArrayList<Float> a){
Iterator<Float> it=a.iterator();
float min=a.get(0);
while(it.hasNext()){
    Float x=it.next();
    if(x<min){
        min=x;}
}
return min; 
```

}

```
 public float trovaMax(ArrayList<Float> a){
Iterator<Float> it=a.iterator();
float max=a.get(0);
while(it.hasNext()){
    Float x=it.next();
    if(x>max){
        max=x;}
}
return max; 
```

}

```
 public boolean Detection(ArrayList<Float> accPrec,float delta){
boolean intentional=true, static=true, lying=false;
float am;

if(delta<0.4*SensorManager.GRAVITY_EARTH){
   statico=true;
    Log.v("STATIC?", "yes");

    if(static){
       if(Math.abs(pitch)>=140||Math.abs(pitch)<30){ 
       lying=true;
       Log.v("LYING?", "yes");
       if(allungato){
          am=findMax(accPrec); 
          if(am>2.5*SensorManager.GRAVITY_EARTH||omegaMagnitude>200){
              intentional=true;
              Log.v("INTENTIONAL?", "yes");
          }else{
              intenzionale=false;
              Log.v("INTENTIONAL?", "no");
          }
       }
       }else {
           lying=false;
           Log.v("STANDING?", "yes");
           }
       }
       } else {
           static=false;
           Log.v("STATIC?", "no");
           }

      if(static&&lying&&!intenional)
          return true;

      else return false;
      } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:57:27.927

没有确切的方法可以告诉哪个样本是哪一秒获得的。但是您可以通过固定获得加速度计更新的频率来近似它。

假设我们第二次请求 50 个样本（50 赫兹）

为了这

```
sm.registerListener(this,sm.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),50000000); 
```

不要使用 android 传感器延迟常量（即 SensorManager.SENSOR_DELAY_NORMAL），它们对于不同的供应商设备是不同的。

现在只需运行一个简单的计数器 0 到 50（没有其他方法 :()

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T16:38:58.993

我的建议是以最大可能的频率运行传感器： sm.registerListener(this,sm.getDefaultSensor(Sensor.TYPE_ACCELEROMETER),SensorManager.SENSOR_DELAY_FASTEST); 因为无论如何，设备在任何情况下都没有严格遵守数字指示的速率；此外，仅从 API v.2.3 起才支持“数字”速率。然后，您应该像这样编写 onSensorChanged 方法。评论：您检查当前时间是否大于 latestSensorChange + DELTASENSOR（即您希望在 Sensor 值之间等待的毫秒数）。

```
 @Override
public void onSensorChanged(SensorEvent event) {
    float[] values = event.values;
    long Now = System.currentTimeMillis();
    if (Now > (latestSensorChange + DELTASENSOR)) {

/*            if ((mDbHelper.getOldVal(BreathDbAdapter.IDX_X) != values[BreathDbAdapter.IDX_X]) ||
                    (mDbHelper.getOldVal(BreathDbAdapter.IDX_Y)!= values[BreathDbAdapter.IDX_Y]) ||
                    (mDbHelper.getOldVal(BreathDbAdapter.IDX_Z)!= values[BreathDbAdapter.IDX_Z])) {

  */
        msg = "Accelerometer: " + values[0]
                + ", " + values[1] + ", " + values[2] + " at " + Now + " (EndTime =" + EndTime +")";
        mTextViewAccelerometer.setText(msg);
        Log.v(TAG, msg );
        latestSensorChange = Now;
        if (Now > EndTime) {
            Log.v(TAG,"Fine del Test at " + Now);
            finish();
        }
    } 
```

请让我知道它是否有帮助 (sennò ti vengo a cercare perchè sono Italiano anch'io :-) ) Checco

# c# - 处理长时间运行的 WCF [OperationContract(IsOneWay = true)]

> ID：13919364
> 
> 赞同：2
> 
> 时间：2012-12-17T17:50:59.570
> 
> 标签：c#, wcf, asynchronous-wcf-call

我关注的是定义为 OneWay 的服务，因为它运行时间很长（几分钟），我等不及它完成时（它在 ASP.NET 应用程序中使用）。

问题是，如果我在服务调用后调用 client.Dispose() ，它会阻塞并且在 60 秒后超时过期并出现异常。

在这种情况下我应该如何处置客户？增加服务的超时不是解决方案，因为我不能等待使用它的网页的 HTTP 请求这么长时间。

```
[ServiceContract]
public interface IMyService
{        
    [OperationContract(IsOneWay = true)]
    void BeginRun();
}

var client = new MyServiceClient();
client.BeginRun();
client.Close(); //This leads to time-out, how and when to call it? 
```

感谢您的提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T08:38:43.637

我会将您的绑定切换到[netMsmqBinding](http://msdn.microsoft.com/en-us/library/vstudio/ms752217%28v=vs.90%29.aspx)。然后，从您的客户那里，您的单向呼叫将是即时的。

通过 http 进行长时间发送充其量是有问题的，并且管理起来很复杂。在两者之间放置一个队列将大大简化此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T18:06:26.917

从你的签名来看，你似乎不需要任何回应。在这种情况下，在服务上，当您收到`BeginRun()`调用时，在非 WCF 线程上执行工作。这将释放通道并且应该允许您立即处理客户端。

即使您已将其标记`OperationContract`为`IsOneWay`，这并不意味着 WCF 会立即释放该频道。在从线路中读取所有数据之前，WCF 服务实际上不会从单向调用返回。根据您的服务配置，这可能涉及等待之前的调用完成（尤其是单并发模式会话服务配置）。

因此，出于多种原因，在 WCF 线程之外的单独线程上实际执行服务工作通常是一个好主意，这应该会提高吞吐量。请查看MSDN上的[这篇文章以获取更多详细信息。](http://msdn.microsoft.com/en-us/library/vstudio/ms730149%28v=vs.90%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:09:13.853

您可以尝试 IChannel 方法。或者试试这个，不确定这是否可行：http: [//msdn.microsoft.com/en-us/library/ms731177.aspx](http://msdn.microsoft.com/en-us/library/ms731177.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T18:43:08.383

您需要在代码中添加 try catch 块，如果出现超时异常，它应该中止客户端。

```
 try
        {
            work(client);
            client.Close();
        }

        catch (Exception e)
        {
            client.Abort();
            throw;
        } 
```

# javascript - 将可选的多个参数传递给函数

> ID：13919365
> 
> 赞同：0
> 
> 时间：2012-12-17T17:51:08.407
> 
> 标签：javascript, arrays

这可能是重复的，但我在找到正确答案方面收效甚微。我正在尝试实现这样的目标：

```
var joinArrays = function(myCollectionOfArguments) {
    return array.concat(array1, array2, ..... , arrayN);
}; 
```

在这种情况下`myCollectionOfArguments`将是`array1, array2, ..... , arrayN`. 我怎么能实现这样的目标？我确实知道，如果我有一个回调函数，我会冷传递尽可能多的参数`.apply()`，但在这种情况下，我对这种方法有点困惑。

**编辑：**所以，为了更具描述性：我可以传递任意数量的参数，而不是只传递一个参数，而不必在定义函数的参数时指定它，在我的情况下`myCollectionOfArguments`，将只是一个参数定义函数，但是当我想使用函数时，我希望能够传递多个参数；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T17:59:23.080

您可以将[`arguments`对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)用于任意数量的参数，甚至可以将其直接传递给[`.apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)：

```
var joinArrays = function() {
    return [].concat.apply([], arguments);
}; 
```

顺便说一句，[`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)在这里使用会更优雅：

```
var joinArrays = Array.prototype.concat.bind([]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T17:57:40.727

如果我的意图正确，请尝试：

```
var joinArrays = function(a) {
  return a.concat.apply(a, Array.prototype.slice.call(arguments, 1));
};

var foo = joinArrays([1, 2], [3, 4], [5, 6]);

console.log(foo); // => [1, 2, 3, 4, 5, 6] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:53:52.047

不确定我是否理解，但您可以传递任意数量的数组：

```
joinArrays([1,2,3], [4,5,6], [7,8], [9,10,11,12]) 
```

然后使用`arguments`里面的特殊变量读取所有这些`joinArrays()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T17:53:36.207

```
function testFunction()
{
    var arg1 = arguments[0];
    var arg2 = arguments[1];
    var arg3 = arguments[2];
} 
```

# python - 使用 libtorrent (rasterbar) 获取上传活动警报

> ID：13919367
> 
> 赞同：2
> 
> 时间：2012-12-17T17:51:33.017
> 
> 标签：python, bittorrent, libtorrent

我正在尝试获取有关我发送给同行的数据的警报。我的代码通过查找 libtorrent.block_finished_alert 非常适用于传入的块，但我想知道我何时以及向同行发送什么。我找不到可以为我提供出站转账等价物的警报。我需要知道文件和偏移量（对等请求）。

出站阻止请求是否有警报？

我正在使用 python 绑定，但 C++ 代码也很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T17:11:35.747

最接近警报的可能是`stats_alert`. 它会告诉您上传的有效负载字节数。但是，它不会为您提供发送完整块的粒度。

如果您想添加警报，请查看`bt_peer_connection::write_piece`.

欢迎补丁！

# debugging - 调试器数据库应用程序和查询

> ID：13919370
> 
> 赞同：1
> 
> 时间：2012-12-17T17:51:33.590
> 
> 标签：debugging, postgresql, gdb

调试器可以让我看到应用程序执行的查询吗？例如，如果我有一个将自身连接到 postgresql 的数据库应用程序（用 C 或 Java 编写），gdb 可以显示程序中的语句吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T07:16:49.067

> gdb 可以显示程序中的语句吗？

是的，但是您需要在数据库服务器中找到一个可以方便地获得该信息的位置，并在那里设置一个断点。

客户端库可能会在将查询和参数发送到服务器之前将其转换为某种打包结构，并且这些信息可能*根本无法*在服务器端方便地获得。但这不太可能，因为服务器可能有能力记录查询。

# selenium - Behat / Mink / Selenium：可以拦截 AJAX 调用吗？

> ID：13919372
> 
> 赞同：3
> 
> 时间：2012-12-17T17:51:36.380
> 
> 标签：selenium, behat, mink

我正在使用 Behat/Mink 和 Selenium 进行验收测试。我需要确定我的网页是否通过 Ajax 对服务器进行格式错误的调用。问题是，服务器将尝试“纠正”格式错误的代码并返回有效数据。

有没有办法“拦截”和验证从我的网站发出的 ajax 调用？

现在我的 FeatureContext 类看起来像：

```
public function performAnAction()
{
  $this->enterInField('test', 'field');
  $this->hitOKButton();
  $this->assertResponseContains('success');
} 
```

我想做类似的事情：

```
public function performAnAction()
{
  $this->enterInField('test', 'field');
  $this->hitOKButton();
  $ajax = $this->getAllAjaxCalls();
  foreach ($ajax as $call) {
    // perform some validation
  }
  $this->assertResponseContains('success');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T03:39:35.350

这里有两个很好的资源来检查 ajax 调用

behat貂方式

[http://docs.behat.org/cookbook/behat_and_mink.html#defining-our-own-featurecontext](http://docs.behat.org/cookbook/behat_and_mink.html#defining-our-own-featurecontext)

这是一个巧妙的解决方案，使用 _before 和 _after 覆盖以更深入地了解基本功能，并且非常有趣，但通读它将帮助您更好地了解框架在幕后的真正作用

[http://blog.scur.pl/2012/06/ajax-callback-support-behat-mink/](http://blog.scur.pl/2012/06/ajax-callback-support-behat-mink/)

我认为您可以简单地使用带有 js 回调的内置等待函数，通过将您的响应放入任何 html 元素上的 jquery data[] 对象中，并以这种方式验证您的预期输出，从而在自定义步骤 def 中获得您想要的内容。

```
$this->getSession()->wait(5000,
        "$('.someCssClassSelectorToElementWithResponseStuff').length > 0"
    ); 
```

如果您的元素是一个可以工作的 js 对象，或者如果它作为一个 jquery 对象返回，您可以使用 .size() 而不是 length 只需确保您注入的 js 评估为 true 或 false 以获得您的通过/失败

# .net - AppFabric Cache 是否会在检索缓存项目时更新它们的到期时间？

> ID：13919376
> 
> 赞同：2
> 
> 时间：2012-12-17T17:51:52.623
> 
> 标签：.net, appfabric-cache

当一个项目被放入缓存时，它会分配一个超时时间（通过对 Put() 的调用显式，或者从缓存配置中隐含）。我想更新/重置我检索到的每个项目的到期时间 [call Get() on]。

我是否需要明确放置/更新项目或到期时间会自动更新为现在 + 超时？

**==更新==**

看起来意图是应该调用[ResetObjectTimeout() 方法。](http://msdn.microsoft.com/en-us/library/ff424936.aspx)我在文档中没有看到其他关于过期更新逻辑的提及。

**==更新 2==**

在快速测试/实验中，ResetObjectTimeout() 生成的网络流量与使用 Put() 一样多，因此似乎整个条目都通过网络传输只是为了更新超时。我尝试了每个项目不同数量的数据，尽管事实上我没有添加任何新项目，但流量水平确实随着数据量的增加而上升。

我想更新超时的原因是我希望缓存项在上次使用后在缓存中保留 N 分钟。我预计这将是一种非常常见的使用模式，并且要实现它，我需要在每次获取操作时通过网络重新发送所有数据，这大大降低了使用缓存的好处，例如限制可伸缩性和性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:42:50.267

不，因为 appfabric 中的所有超时都是绝对的。

正如您所发现的，Data.Cache 中有一个用于重置超时的方法（实际上它允许您在不获取数据的情况下应用新的超时，而不是实际上休息）。

根据您的情况，Read-Through 和 Write-Behind 可以帮助您查看[这里](http://msdn.microsoft.com/en-us/library/hh377669.aspx)

# jquery - 在父 div 中选择一个带有类的下拉列表

> ID：13919378
> 
> 赞同：1
> 
> 时间：2012-12-17T17:51:53.997
> 
> 标签：jquery

我正在尝试使用 jquery 来选择`select`父 div 下的菜单。我一直没有得到任何回报。

```
$('#content_container > .vendor_address_select'); 
```

这里有什么不正确的？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:55:33.647

您应该发布 HTML，但这`>`意味着它`.vendor_adress_select`是直接子代，`#content_container`因此如果它是孙子代，您将不会收到任何响应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T17:56:20.443

```
$('#content_container .vendor_address_select'); 
```

您不需要使用大于号。`content_container`这将适用于类的所有后代`vendor_address_select`

此方法使用`jQuery Descendant Selector (“ancestor descendant”)`. 它在[docs](http://api.jquery.com/descendant-selector/)中被引用。

Mad Echet 有一个很好的观点，这`>`意味着它`.vendor_adress_select`是`#content_container`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:00:26.143

尝试更直接地定位您的元素。您不需要使用组合器。此外，您是否偶然混合了 .js 脚本（prototype.js 与 jQuery.js？）如果您正在混合脚本，您可能需要使用 jQuery 的无冲突规则。

试试这个：

```
$(".vendor_address_select") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T18:01:23.650

使用它来查找父元素中的任何子元素：

```
$('#content_container').find('.vendor_address_select'); 
```

这将在任何级别找到子元素。掏出小提琴：http: **[//jsfiddle.net/xdC6T/](http://jsfiddle.net/xdC6T/)**

# batch-file - 批处理中的最大值键盘输入

> ID：13919379
> 
> 赞同：1
> 
> 时间：2012-12-17T17:51:55.007
> 
> 标签：batch-file, user-input, maxima

如果我在 wxMaxima 中复制并粘贴这些行

```
assume(omega>0);
damp_vib:'diff(x,t,2)+2*'xi*'omega*'diff(x,t)+'omega^2*x=0;
ode2(damp_vib,x,t);
negative; 
```

最后一行正确回答了 Maxima 询问参数是负数、零还是正数（解决方案取决于此）。

但是，如果我将相同的行放在文本文件中并使用`batch`命令运行它，则最后一行不会作为答案，我必须从键盘手动输入。如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:29:28.187

我不知道如何让 Maxima 从文件中读取“asksign”响应。我认为解决这个问题的最好方法是将`assume(xi^2 < 1)`（或任何应该的）放在触发“asksign”的函数调用之前。

# jquery - 缓存 $(this) 是否有性能提升？

> ID：13919380
> 
> 赞同：6
> 
> 时间：2012-12-17T17:52:02.483
> 
> 标签：jquery, performance

我经常`$(this)`在 jQuery 事件处理程序中使用并且从不缓存它。如果我会做

```
var $this = $(this); 
```

并且将使用变量而不是构造函数，我的代码会获得任何显着的额外性能吗？

* * *

JS Perf 测试以测量此优化带来的性能增益：http: [//jsperf.com/jquery-this-caching](http://jsperf.com/jquery-this-caching)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T17:53:19.787

一个***很小很小的不易察觉的***，是的。重要的？不。

每次你这样做`$(this)`，它都会导致几个函数调用和几个内存分配。函数调用既不存在也不存在（即使在 IE6 上，我也很[惊讶地得知](http://blog.niftysnippets.org/2012/02/foreach-and-runtime-cost.html)），但是内存流失可能会在不能很好地处理内存管理的浏览器上加起来。大多数现代人都这样做。

我总是将结果保存到变量中，因为我只是不喜欢调用函数和不必要地分配对象。它可以节省输入这些括号。:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T17:53:36.997

是的，因为每次你`$(this)`创建一个新的 jquery 对象。
但是你不会得到显着的性能，只要你做超过 1000 倍

缓存多次使用的对象是一种很好的做法。

# perl - 未定义值 HTML::TokeParser

> ID：13919385
> 
> 赞同：-1
> 
> 时间：2012-12-17T17:52:25.387
> 
> 标签：perl, html-parser

我正在尝试使用 perl 脚本在 html 中查找标签。

```
 use WWW::Mechanize::Firefox;
 use Crypt::SSLeay;
 use HTML::TokeParser;
 $ENV{PERL_LWP_SSL_VERIFY_HOSTNAME}=0;

 my $mech = WWW::Mechanize::Firefox->new;
 $mech->get_local('salida2.html');
 my @links = $mech->links();
 print @links;

 my $parser = HTML::TokeParser->new('salida2.html') || die $!;
 my $tag = $parser->get_tag('ul'); 
```

我收到此错误**无法在 C:\Users\me\Documents\Scripts\parsing.pl 第 9 行的未定义值上调用方法“get_tag”。**

salida2.html 与脚本位于同一目录下，我还将它与 WWW::Mechanize::Firefox 实例一起使用，并且运行良好。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:38:18.630

线索就在你得到的错误中。该文件可能与您的脚本位于同一目录中，但这并不意味着这是您的工作目录！到`chdir`正确的目录或使用完全限定的路径...

# python - 获取带有张量名称的张量索引

> ID：13919386
> 
> 赞同：2
> 
> 时间：2012-12-17T17:52:26.543
> 
> 标签：python, arrays, numpy

我想用张量的特定分量制作一个数组。我找到了绝妙的命令`np.argwhere()`。这将返回满足特定标准的张量的索引，但是它没有将它们命名为张量的组件，即它们`[0,0,1,1]`与`x[0,0,1,1]`张量相比返回`x`。

是否有一种内置或巧妙的方法来获取满足特定标准的张量组件，其中组件用它们的索引和附加的张量名称编写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:26:20.647

您可以使用`where`而不是`argwhere`...

```
>>> x = np.arange(6).reshape(2,3)
>>> x
array([[0, 1, 2],
       [3, 4, 5]])
>>> np.argwhere(x > 1)
array([[0, 2],
       [1, 0],
       [1, 1],
       [1, 2]])
>>> np.where(x > 1)
(array([0, 1, 1, 1]), array([2, 0, 1, 2]))
>>> x[np.where(x > 1)]
array([2, 3, 4, 5]) 
```

# java - 如何将 EJB 应用程序部署到 Glassfish 服务器

> ID：13919387
> 
> 赞同：-3
> 
> 时间：2012-12-17T17:52:25.913
> 
> 标签：java, jsp, glassfish, ejb

当我运行 JSP 文件时，我收到此错误：

```
SEVERE: Exception while loading the app
java.lang.RuntimeException: EJB Container initialization error
    at org.glassfish.ejb.startup.EjbApplication.loadContainers(EjbApplication.java:219)
    at org.glassfish.ejb.startup.EjbDeployer.load(EjbDeployer.java:197)
    at org.glassfish.ejb.startup.EjbDeployer.load(EjbDeployer.java:63)
    at org.glassfish.internal.data.ModuleInfo.load(ModuleInfo.java:175)
    at org.glassfish.internal.data.ApplicationInfo.load(ApplicationInfo.java:216)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:338)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:183)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:272)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:310)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:320)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1176)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$900(CommandRunnerImpl.java:83)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1235)
    at org.glassfish.deployment.autodeploy.AutoOperation.run(AutoOperation.java:141)
    at org.glassfish.deployment.autodeploy.AutoDeployer.deploy(AutoDeployer.java:573)
    at org.glassfish.deployment.autodeploy.AutoDeployer.deployAll(AutoDeployer.java:459)
    at org.glassfish.deployment.autodeploy.AutoDeployer.run(AutoDeployer.java:391)
    at org.glassfish.deployment.autodeploy.AutoDeployer.run(AutoDeployer.java:376)
    at org.glassfish.deployment.autodeploy.AutoDeployService$1.run(AutoDeployService.java:195)
    at java.util.TimerThread.mainLoop(Timer.java:512)
    at java.util.TimerThread.run(Timer.java:462)
Caused by: java.lang.RuntimeException: Error while binding JNDI name ejbExample.stateful.Account#ejbExample.stateful.Account for EJB : AccountBean
    at com.sun.ejb.containers.BaseContainer.initializeHome(BaseContainer.java:1530)
    at com.sun.ejb.containers.StatefulSessionContainer.initializeHome(StatefulSessionContainer.java:214)
    at com.sun.ejb.containers.ContainerFactoryImpl.createContainer(ContainerFactoryImpl.java:161)
    at org.glassfish.ejb.startup.EjbApplication.loadContainers(EjbApplication.java:207)
    ... 20 more
Caused by: javax.naming.NameAlreadyBoundException: Use rebind to override
    at com.sun.enterprise.naming.impl.TransientContext.doBindOrRebind(TransientContext.java:275)
    at com.sun.enterprise.naming.impl.TransientContext.bind(TransientContext.java:214)
    at com.sun.enterprise.naming.impl.SerialContextProviderImpl.bind(SerialContextProviderImpl.java:79)
    at com.sun.enterprise.naming.impl.LocalSerialContextProviderImpl.bind(LocalSerialContextProviderImpl.java:81)
    at com.sun.enterprise.naming.impl.SerialContext.bind(SerialContext.java:586)
    at com.sun.enterprise.naming.impl.SerialContext.bind(SerialContext.java:602)
    at javax.naming.InitialContext.bind(InitialContext.java:404)
    at com.sun.enterprise.naming.impl.GlassfishNamingManagerImpl.publishObject(GlassfishNamingManagerImpl.java:206)
    at com.sun.enterprise.naming.impl.GlassfishNamingManagerImpl.publishObject(GlassfishNamingManagerImpl.java:187)
    at com.sun.ejb.containers.BaseContainer$JndiInfo.publish(BaseContainer.java:5533)
    at com.sun.ejb.containers.BaseContainer.initializeHome(BaseContainer.java:1515)
    ... 23 more

WARNING: [AutoDeploy] Autodeploy failed : C:\glassfishv3\glassfish\domains\domain1\autodeploy\StatefullSessionBeanExample.jar. 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:40:40.233

尝试取消部署项目（清理和构建）并重新部署它。

# java - Gemfire 配置问题

> ID：13919389
> 
> 赞同：1
> 
> 时间：2012-12-17T17:52:39.173
> 
> 标签：java, spring, exception, gemfire, spring-data-gemfire

我有一个用于设置 gemfire 的 xml 配置文件，如下所示

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:gfe="http://www.springframework.org/schema/gemfire"
    xmlns:util="http://www.springframework.org/schema/util" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/gemfire http://www.springframework.org/schema/gemfire/spring-gemfire.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd 
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <context:component-scan
        base-package="com.mycompany.data.testcache" />
    <context:annotation-config />

    <util:properties id="props" location="classpath:test-cache.properties">
        <prop key="log-level">info</prop>
    </util:properties>

    <gfe:cache id="gemfire-cache" properties-ref="props" />

    <gfe:local-region id="region1">
        <gfe:cache-listener ref="listener" />
    </gfe:local-region>

    <bean id="listener"
        class="com.mycompany.data.TestLoggingCacheListener" />
</beans> 
```

当我尝试加载此配置文件时，我看到以下异常..

> org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 原因：org.springframework.beans.factory.BeanCreationException：创建名为“region1”的bean时出错：无法解析对bean的引用gemfireCache' 同时设置 bean 属性'cache'；嵌套异常是 org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'gemfireCache' is defined at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328) at org.springframework.beans.factory .support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106) 在 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory。
> 
> org.springframework.beans.factory.NoSuchBeanDefinitionException：在 org.springframework.beans.factory.support 的 org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:529) 中没有定义名为“gemfireCache”的 bean。 AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1095) at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:277) at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java: 193) 在 org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322) ... 41 更多

当我从中删除 id 属性时

```
<gfe:cache id="gemfire-cache" properties-ref="props" /> 
```

然后给

```
<gfe:cache properties-ref="props" /> 
```

它工作正常。当我指定 id 属性时，它会抛出 t 任何人都可以帮助我吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:43:09.157

如果你使用带有 gfe:cache 元素的 id 属性，那么你必须使用 cache-ref 属性来引用它：

```
<gfe:cache id="gemfire-cache" properties-ref="props" />

<gfe:local-region id="region1" cache-ref="gemfire-cache">
    <gfe:cache-listener ref="listener" />
</gfe:local-region> 
```

否则，将使用默认 ID，即“gemfireCache”（这就是您在错误消息中看到“gemfireCache”的原因）。

# c# - 如何检测开始填充的 datagridview

> ID：13919395
> 
> 赞同：1
> 
> 时间：2012-12-17T17:52:54.750
> 
> 标签：c#, vb.net, winforms, visual-studio-2010

我正在寻找最简洁的方法来查看 datagridview 正在填充/重新填充的过程中。我会继续看，但我还没有看到一个事件告诉我这个过程正在开始。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:57:54.190

`DataGridView.DataSourceChanged`, `DataGridView.RowsAdded` and `DataGridView.DataBindingComplete` could be helpful.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:50:20.720

这是 DataGridView 事件的完整列表：http:
[//msdn.microsoft.com/en-us/library/x4dwfh7x.aspx](http://msdn.microsoft.com/en-us/library/x4dwfh7x.aspx)

# html - 是否可以通过仅更改 CSS 来利用 HTML5 Canvas？

> ID：13919407
> 
> 赞同：0
> 
> 时间：2012-12-17T17:53:43.483
> 
> 标签：html, css

我试图了解如何在 HTML5 中使用新的视觉效果，同时保持传统的 HTML/JS/CSS 关注点分离。

假设我有一个包含应用程序主题的 CSS 文件。我想增强主题，以便它使用 Canvas 动态绘制背景和形状。

显然我将不得不编写 JavaScript 来做到这一点，并包含额外的 JS 文件。但是我可以：

1.  使用 CSS 定义来包含该 JS，而不更改现有的 HTML/JS 代码
2.  将 Javascript 绘图例程与 CSS 选择器相关联

?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:27:27.820

你可以吗：

> *   使用 CSS 定义来包含该 JS，而不更改现有的 HTML/JS 代码
> *   将 Javascript 绘图例程与 CSS 选择器相关联

不，你不能用 CSS 控制 JS，但你可以做的是运行 JS，并基于查看已定义样式的属性，在代码中构建条件。因此，如果您查看一个元素，例如#menu，那么您可以查看正在使用哪种背景颜色并相应地运行代码。

# r - 关于将调试相关信息打印到屏幕上

> ID：13919408
> 
> 赞同：-1
> 
> 时间：2012-12-17T17:53:46.287
> 
> 标签：r

> **可能重复：**
> [如何收到有关循环/lapply 正在进行的进度的警报](https://stackoverflow.com/questions/13832221/how-to-be-alerted-about-the-ongoing-progress-of-a-loop-lapply)

在调试 R 程序时，我想将输出信息打印到屏幕上以进行调试。例如，如何在同一行中生成类似以下内容。

```
"loop= 5", "a=5","b=5" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:11:21.540

接受@Matthew 的建议，问题可能只是您试图`print`一次在多个变量/字符串上使用。这行不通。

如果要`print`与字符串一起使用，则需要提供一个单独的字符串。最有效的方法是使用`paste()`.
还有很多替代方案，例如`cat`和`sprintf`。这是一个简短的例子：

让我们创建一些示例变量来输出 i <- 3 a <- letters[1:5]

您可能正在尝试这样做：

```
# This will *NOT* work
print("loop = ", i, "a = ", a[[i]]) 
```

而是尝试以下方法之一：（注意：`paste0`与 using 相同`paste(..., sep="")`）

```
# using print( paste0 (.) )
print(paste0("loop = ", i, ", a = ", a[[i]]))
#  [1] "loop = 3, a = c

# using cat()
cat("loop = ", i, ", a = ", a[[i]])
#  loop =  3 , a =  c

# using sprintf
sprintf("loop = %d, a = %s", i, a[[i]])
#  [1] "loop = 3, a = c" 
```

# c - C：单文件字符串替换程序

> ID：13919410
> 
> 赞同：0
> 
> 时间：2012-12-17T17:53:49.770
> 
> 标签：c, string, file-io

为了不忘记 C（在工作中我主要要处理 XSLT 和其他不那么有趣的语言），有时我喜欢编写一个小型实用程序。

今天我想到了一个应用程序，它可以替换任何类型文件中的字符串而不生成第二个文件（是否有更好的短语来描述这一点？）。

我想出如下：

```
#include <stdio.h>
#include <string.h>

#define CHUNKLEN 256

void replcnks(char *str, char *cnk1, char *cnk2);

int main(int argc, char **argv)
{
    FILE *file;
    char *old, *new, *fname, buf[CHUNKLEN];
    long len;

    if(argc != 4)
    {
        puts("Invalid arguments\n");
        return 0;
    }

    old = argv[1];
    new = argv[2];
    fname = argv[3];

    file = fopen(fname, "rb+");

    do
    {
        len = fread(buf, 1, CHUNKLEN, file);
        replcnks(buf, old, new);
        fseek(file, -len, SEEK_CUR);
        fwrite(buf, 1, len, file);
        fseek(file, len, SEEK_CUR);
    }
    while(len == CHUNKLEN);

    fclose(file);

    return 0;
}

void replcnks(char *str, char *cnk1, char *cnk2)
{
    char *pos;
    int clen1 = strlen(cnk1), clen2 = strlen(cnk2);
    while((pos = strstr(str, cnk1)))
    {
        memmove(pos + clen2, pos + clen1, strlen(pos) - clen1 + 1);
        memcpy(pos, cnk2, clen2);
    }
} 
```

该程序可以运行，但是当替换字符串的大小与原始字符串的大小不同时，它会产生小错误。当它较长时，文件的结尾被剪切；当它更短时，输出在某些地方会有一些垃圾值。我猜问题出在其中一个`fseek`s。

**如何修复这个程序？**

解决方案可能很简单，但我想我今天脑力不够——但我想睡个安稳觉:)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T17:57:44.580

你不能真正做你想做的事，因为没有好的方法可以用不同大小的块替换文件的块。

如果被替换的字符串落在块边界上，它也会失败。

如果用更长的字符串替换短字符串，它可能会做非常糟糕的事情，因为缓冲区中没有空间。

如果您真的想这样做，则必须有某种缓冲方案，在其中分别跟踪读取和写入，这样您就不会写入尚未读取的字节。然后你仍然必须应对文件的增长或截断......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:05:02.860

JasonD 所说的 - 你试图用不同大小的文件覆盖一个文件，文件系统无法神奇地缩小/扩展文件的中间以适应。我会将源加载到 RAM 中，然后创建一个新文件，或者删除/重命名/备份源，然后使用原始名称写入结果。

# git - 如何使用 master 上的上游更改更新主题分支？

> ID：13919413
> 
> 赞同：9
> 
> 时间：2012-12-17T17:54:01.970
> 
> 标签：git, git-rebase

我开始在主题分支上做一些工作

```
 •-•-• < topic
   /
•-•       < master 
```

我推送主题分支

```
$ git push origin topic 
```

其他人将更改推送到 master

```
 •-•-• < origin/topic
   /
•-•-•—•   < origin/master 
```

### 如何更新我的本地 master 和 rebase 我的主题？

历史应该是这样的

```
 •-•-• < topic
       /
•-•-•—•       < master 
```

### 我正在尝试什么

```
; update master
$ git checkout master
$ git fetch origin
$ git merge --ff-only origin/master

; rebase topic
$ git checkout topic
$ git rebase master 
```

### 问题

我所有的提交`topic`都被视为未提交。所以当我尝试时`git push origin topic`，我得到

```
 ! [rejected]        topic -> topic (non-fast-forward)
error: failed to push some refs to '/path/to/repo.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

### 解决方案？

请注意，我**不想**将我的`topic`分支与`master`. 我只想更新我的本地存储库，而不必不必要地合并分支。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-18T02:16:51.420

为了清楚起见，让我重新编写您的示例。

```
 C-D-E < topic, origin/topic
   /
A-B < master, origin/master 
```

然后有人工作。

```
 C-D-E < topic, origin/topic
   /
A-B-F-G < origin/master
  ^
master 
```

您从原点获取 F 和 G，然后将主题重新定位到主节点。所以现在你的存储库看起来像这样。

```
 C-D-E < origin/topic
   /
A-B-F-G < master, origin/master
       \
        C'-D'-E' < topic 
```

这就是问题所在。E 的原点/主题不能快进到 E' 的主题。Rebase 实际上只适用于尚未推送到源的提交。由于您已经将 C、D 和 E 推送到源/主题，因此您必须重写远程存储库上的历史记录。因此错误。所以你真的有三个选择：

1.  停止推送主题分支。如果只有你一个人在研究这个话题，那就没有必要推动它。只需将主题重新定位在 master 之上，完成后，将 master 快速合并到 topic 并推送 master。删除本地主题分支。瞧！

2.  合并主题和大师。如果您需要在主题分支上进行协作，您可能应该将其吸收并合并。

3.  强制远程变基：

    git 推送原始主题 -f

    这将强制原点/主题为 E'。除非在远程存储库中重写历史，否则你会遇到火与硫磺、人祭、狗和猫住在一起、集体歇斯底里……而且你的开发人员伙伴们不太喜欢你。完全不推荐。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T17:57:19.370

```
; update master
git checkout master
git pull --rebase origin master  

; rebase topic
git rebase master topic

; push topic (force)
git push -f origin topic 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T19:17:29.143

你的问题有一些问题。

1.  推送时不会出现合并冲突。这只会发生在你合并、变基、cherry-pick 或 stash pop/apply 时。
2.  如果其他人同时更改与您相同的内容，您将**无法避免冲突**（即使可能只是您在处理 repo 的另一个副本）。
3.  “我所有关于主题的提交都被视为未提交”没有意义。您可能的意思是“我的主题分支提交引入的所有更改”由于我尝试变基时的冲突而尚未提交。

您的步骤是正确的，只是您忽略了 rebase 已因冲突而停止，而您只是忽略了它。您必须解决冲突，然后：

```
git add confilctedfile1.txt conflictedfile2.txt
git rebase --continue 
```

您可能需要对主题分支中的所有提交执行此操作。只有当变基完成时，你才应该推送。

另一个注意事项：因此，rebase 不是日常工作的首选工作流程。合并在代码库中发生的事情更容易、更准确。有很多理由支持合并而不是变基。

# java - 将 Editable 作为 EditText.getText() 方法的返回类型的目的是什么？

> ID：13919415
> 
> 赞同：1
> 
> 时间：2012-12-17T17:54:16.393
> 
> 标签：java, android

根据[API](http://developer.android.com/reference/android/widget/EditText.html#getText%28%29)，返回的`getText()`方法。它的目的是什么？它可能只是一个返回类型？`EditText``Editable``String`

并根据`Editable` [API](http://developer.android.com/reference/android/text/Editable.html)：

> 这是可以更改内容和标记的文本的接口（与字符串等不可变文本相反）。

为了实现不可变的功能，为什么不使用`StringBuilder`or`StringBuffer`代替呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T17:56:34.403

```
public interface Editable implements GetChars, Spannable, Appendable, CharSequence 
```

在其他功能中，Editable 保留了 Strings 和 StringBuilders 无法做到的 Spannable 数据。

# wix - 检查 .NET 4.5 完整安装 - 哪个属性？

> ID：13919416
> 
> 赞同：18
> 
> 时间：2012-12-17T17:54:21.383
> 
> 标签：wix, wix3.6

如何检查完整的 .net 4.5 安装？

[http://wix.sourceforge.net/manual-wix3/wixnetfxextension.htm](http://wix.sourceforge.net/manual-wix3/wixnetfxextension.htm)

有一个所有属性的列表，但在 4.0 处停止。

未解决的问题列表有一个很好的主题“为新属性添加文档”，可以使用它们。

有人知道完整 4.5 安装的属性名称吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-16T10:25:58.273

回答我自己 - 因为文档也更新了：

网络45

更具体：

```
<PropertyRef Id="NETFRAMEWORK45"/>

<Condition Message="This application requires .NET Framework 4.5\. Please install the .NET Framework then run this installer again.">
    <![CDATA[Installed OR NETFRAMEWORK45]]>
</Condition> 
```

# javascript - settimeout 没有被清除

> ID：13919424
> 
> 赞同：1
> 
> 时间：2012-12-17T17:54:57.527
> 
> 标签：javascript, jquery

我想要做的是，当页面加载时，3 秒后出现一个框，如果没有任何反应，3 秒后它会部分隐藏。现在，如果光标进入该框，超时将被清除，并且在我清除超时时广告不会被隐藏。

问题是当鼠标离开并再次进入时，之前的超时仍然存在。尽管我正在尝试清除超时，但它仍然隐藏了该框。可能是什么问题？

查看我的代码：（JSfiddle 链接：http: [//jsfiddle.net/aK9nB/](http://jsfiddle.net/aK9nB/)）

```
var pstimer;

$(document).ready(function(){
    setTimeout(function(){
        showps();
        pstimer = setTimeout(function() {
                hideps();
        }, 3000);
    }, 3000);
});

$('#psclose').on('click', function(){
    $('#postsearch-container').hide();
});

$("#postsearch-container").hover(
    function () {
        console.log("enter");
        clearTimeout(pstimer);
        console.log("cleartimeout");
        showps();
    }, 
    function () {   
        console.log("leave");
        clearTimeout(pstimer);
        var pstimer = setTimeout(function(){
            hideps();
    } , 3000);
});

function showps() { 
    $("#postsearch-container").stop();
    $('#postsearch-container').animate({
        bottom: '0'
    }, 'slow');
}

function hideps() {
    $('#postsearch-container').animate({
        bottom: '-115'
    }, 'slow');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T17:57:39.310

```
$("#postsearch-container").hover(
    function () {
        console.log("enter");
        clearTimeout(pstimer);
        console.log("cleartimeout");
        showps();
    }, 
    function () {   
        console.log("leave");
        clearTimeout(pstimer);
        pstimer = setTimeout(function(){ // remove the "var" 
            hideps();
        } , 3000);
    }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T18:01:12.107

尝试删除pstimer 前面的**var 。**

```
 function () {   
        console.log("leave");
        clearTimeout(pstimer);
        /* var */ pstimer = setTimeout(function(){
            hideps();
        } , 3000);
    } 
```

using var 定义了一个新的局部变量，它与您的预期 pstimer 共享名称，但仅在此函数调用中可用。当函数完成时，本地 var 被销毁。

# jakarta-ee - Jboss 7.1 Ejb3 Struts2 和 EAR 无法使用 JNDI 执行 EJB

> ID：13919426
> 
> 赞同：0
> 
> 时间：2012-12-17T17:55:17.710
> 
> 标签：jakarta-ee, struts2, ejb-3.0, jndi, jboss7.x

我是 EJB 和 JBoss 世界的新手，在尝试通过其远程接口执行无状态 bean 时遇到问题。

我在 Struts ActionSupport 中这样做：

```
public String inscrire() {
    System.out.println("########### Inscrire Action #############");
    Candidat c = new Candidat(nom, prenom, mail, telephone, ecole);
    try {
        final Properties env = new Properties();
        env.put(Context.INITIAL_CONTEXT_FACTORY,
                org.jboss.naming.remote.client.InitialContextFactory.class
                        .getName());
        env.put(Context.PROVIDER_URL, "remote://localhost:4447");
        env.put(Context.SECURITY_PRINCIPAL, "UserApp");
        //env.put("jboss.naming.client.ejb.context", "true");
        env.put(Context.SECURITY_CREDENTIALS, "password");
        InitialContext remoteContext = new InitialContext(env);
        System.out.println("########## Initial Context OK ##########");

        servicecandidat = (CandidatSessionRemote) remoteContext
                .lookup("java:global/EtestEAProject/EtestMetier/CandidatSession!sessions.candidat.CandidatSessionRemote");
        System.out.println("########## LookUp OK ##########");

        if (servicecandidat.inscrireCandidat(c))
            return SUCCESS;
        else
            return ERROR;
    }catch (Exception lookupError) {
        System.out.println("########## LookUp Echec ##########");
        lookupError.printStackTrace();
        return ERROR;
    } 
```

尝试执行方法时，控制台会给出以下命名异常

```
15:01:45,474 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) ########## Initial Context OK ##########

15:01:45,680 INFO  [stdout] (http-localhost-127.0.0.1-8080-1) ########## LookUp Exchec ##########

15:01:45,682 ERROR [stderr] (http-localhost-127.0.0.1-8080-1) javax.naming.NameNotFoundException: global/EtestEAProject/EtestMetier/CandidatSession!sessions.candidat.CandidatSessionRemote -- service jboss.naming.context.java.jboss.exported.global.EtestEAProject.EtestMetier."CandidatSession!sessions.candidat.CandidatSessionRemote"

15:01:45,685 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)     at org.jboss.as.naming.ServiceBasedNamingStore.lookup(ServiceBasedNamingStore.java:97)

15:01:45,687 ERROR [stderr] (http-localhost-127.0.0.1-8080-1)     at org.jboss.as.naming.NamingContext.lookup(NamingContext.java:178)
........................... 
```

ejb jar 部署说：

```
java:global/EtestEAProject/EtestMetier/CandidatSession!sessions.candidat.CandidatSessionRemote

    java:app/EtestMetier/CandidatSession!sessions.candidat.CandidatSessionRemote

    java:module/CandidatSession!sessions.candidat.CandidatSessionRemote

    java:jboss/exported/EtestEAProject/EtestMetier/CandidatSession!sessions.candidat.CandidatSessionRemote

    java:global/EtestEAProject/EtestMetier/CandidatSession!sessions.candidat.CandidatSessionLocal

    java:app/EtestMetier/CandidatSession!sessions.candidat.CandidatSessionLocal

    java:module/CandidatSession!sessions.candidat.CandidatSessionLocal 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T21:40:05.383

好的，因为你的包如下：

```
EAR
|-- WAR
`-- EJB-JAR 
```

那么进行 EJB 查找的最佳方法是：

```
ejb:<app-name>/<module-name>/<distinct-name>/<bean-name>!<fully-qualified-classname-of-remote-interface> 
```

在你的情况下：

```
ejb:EtestEAProject/EtestMetier//CandidatSession!sessions.candidat.CandidatSessionRemote 
```

是的，'//' 是正确的，因为不同的名称是一个空字符串。

获取进行查找的方法应该类似于：

```
public CandidatSessionRemote getEJB() {
    Hashtable jndiProperties = new Hashtable();
    jndiProperties.put(Context.URL_PKG_PREFIXES, "org.jboss.ejb.client.naming");
    Context context = new InitialContext(jndiProperties);
    return (CandidateSessionRemote) context.lookup("ejb:EtestEAProject/EtestMetier//CandidatSession!sessions.candidat.CandidatSessionRemote");
} 
```

希望这会有所帮助，如果您有任何其他问题，请告诉我。

# multicast - 在 ZMQ-SUB 套接字上收到意外的零字节消息

> ID：13919428
> 
> 赞同：2
> 
> 时间：2012-12-17T17:55:33.867
> 
> 标签：multicast, zeromq

我正在尝试使用多播 [epgm: loopback interface] 在 4 个进程之间交换消息。

所有 4 个进程都属于同一组。两个进程发送数据，另外两个接收该数据。在两个订阅过程中，我都收到一条零字节消息（在实际发布者消息之间）。据我所知，没有进程在端口上发送空消息。

我无法弄清楚为什么会收到零字节消息。任何帮助深表感谢。

注意：如果我只有一个发布者进程，那么订阅者进程中不会收到任何零字节消息。

# linux - 使用线程加速库安装

> ID：13919434
> 
> 赞同：1
> 
> 时间：2012-12-17T17:56:16.673
> 
> 标签：linux, bioinformatics

我在 linux 上安装一个名为 tophat 的程序时遇到了一些麻烦（这里是安装指南[http://tophat.cbcb.umd.edu/tutorial.html](http://tophat.cbcb.umd.edu/tutorial.html)的链接），我希望你能提供帮助。它需要 boost 库和另一个名为 samtools 的程序才能运行，但两者似乎都安装得很好，但我在这里遇到了 boost 错误。从我所看到的情况来看，似乎没有正确安装 boost 库，特别是与线程有关的库，我做了一些谷歌搜索并返回并重新安装了它们，特别说明包括线程库但仍然没有骰子。任何人都可以帮忙吗？

这是我运行 make 的输出。

```
make all-recursive
make[1]: Entering directory `/home/tuxedo/tophat-2.0.6'
Making all in src
make[2]: Entering directory `/home/tuxedo/tophat-2.0.6/src'
g++ -Wall -Wno-strict-aliasing -g -gdwarf-2 -Wuninitialized -O3 -DNDEBUG -pthread -    I../boost_1_52_0/boost.1.52.0//include -I../samtools_0.1.18//include -I./SeqAn-1.3 -o     segment_juncs -L../boost_1_52_0/boost.1.52.0//lib -L../samtools_0.1.18//lib segment_juncs.o     ../src/libtophat.a -lbam -lz
segment_juncs.o: In function `driver(std::basic_istream<char, std::char_traits<char> >&, _IO_FILE*, _IO_FILE*, _IO_FILE*, _IO_FILE*, std::basic_string<char,     std::char_traits<char>, std::allocator<char> >&, std::basic_string<char,     std::char_traits<char>, std::allocator<char> >&, std::vector<std::basic_string<char,     std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char,     std::char_traits<char>, std::allocator<char> > > >&, std::basic_string<char,     std::char_traits<char>, std::allocator<char> >&, std::basic_string<char,     std::char_traits<char>, std::allocator<char> >&, std::vector<std::basic_string<char,     std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char,     std::char_traits<char>, std::allocator<char> > > >&)':
/home/tuxedo/tophat-2.0.6/src/segment_juncs.cpp:4949: undefined reference to     `boost::thread::join()'
/home/tuxedo/tophat-2.0.6/src/segment_juncs.cpp:4950: undefined reference to     `boost::thread::~thread()'
/home/tophat-2.0.6/src/segment_juncs.cpp:5026: undefined reference to     `boost::thread::join()'
/home/tuxedo/tophat-2.0.6/src/segment_juncs.cpp:5027: undefined reference to     `boost::thread::~thread()'
/home/tuxedo/tophat-2.0.6/src/segment_juncs.cpp:4942: undefined reference to     `boost::thread::thread(boost::function0<void, std::allocator<boost::function_base> >     const&)'
/home/tuxedo/tophat-2.0.6/src/segment_juncs.cpp:5019: undefined reference to     `boost::thread::thread(boost::function0<void, std::allocator<boost::function_base> >     const&)'
collect2: ld returned 1 exit status
make[2]: *** [segment_juncs] Error 1
make[2]: Leaving directory `/home/tuxedo/tophat-2.0.6/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/home/tuxedo/tophat-2.0.6'
make: *** [all] Error 2 
```

提前感谢您提供的任何帮助！！这已经让我发疯了好几个小时了！！

# loops - 使用输入变量的 PowerShell 循环

> ID：13919438
> 
> 赞同：1
> 
> 时间：2012-12-17T17:56:26.203
> 
> 标签：loops, powershell, exchange-server

首先，当谈到 PowerShell / 编码时，我是一个彻头彻尾的白痴，所以如果这是我要问的一个过于简单的问题，我深表歉意。

我有一个脚本，用于通过 PowerShell 创建分发列表作为交换：

```
param($name,$user=$(throw "You must specify the name of the group"))
New-DistributionGroup -Name $name -OrganizationalUnit "XXX.com/Distribution Lists"
Add-DistributionGroupMember -Identity "$name" -Member "$user" 
```

第一个变量 $name 是组的名称，第二个变量 $user 是要添加到组中的用户的名称。

理想情况下，我想循环添加用户，以便有人可以使用`./script GROUPNAME User1 User2 User3 User4 User5`.

任何人都可以提供任何见解或指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:00:54.647

您可以将`$user`，或者更确切地说`$users`，视为一个数组：

```
$users | %{ Add-DistributionGroupMember -Identity "$name" -Member $_ } 
```

（添加多个用户可能有更好的方法，但以上内容应该可以帮助您入门。）

该脚本可以这样调用：

```
.\script GROUPNAME User1,User2,User3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:02:59.917

尝试这样的事情：

```
-- script --
param($name, [string[]]$users=$(throw "You must specify the name of the user(s)"))

New-DistributionGroup -Name $name -OrganizationalUnit "XXX.com/Distribution Lists" 
foreach($user in $users)
{
    Add-DistributionGroupMember -Identity $name -Member $user
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T06:36:53.707

您可以更改 Name 参数的类型以接受多个名称并将这些名称通过管道传递给`Add-DistributionGroupMember`cmdlet：

```
param($name, [string[]]$users=$(throw "You must specify the name of the user(s)"))

$dg = New-DistributionGroup -Name $name -OrganizationalUnit "XXX.com/Distribution Lists" 
$users | Add-DistributionGroupMember -Identity $dg 
```

# java - Tanuki Wrapper 服务，无法设置 jvm 端口

> ID：13919440
> 
> 赞同：0
> 
> 时间：2012-12-17T17:56:27.687
> 
> 标签：java, jvm, wrapper

我们有一个在 unix 上运行的包装服务，目前包装服务自动分配 wrapper.jvm.port。

我想要的是控制这个端口，

阅读[http://wrapper.tanukisoftware.com/doc/english/prop-jvm-port.html#minmax后](http://wrapper.tanukisoftware.com/doc/english/prop-jvm-port.html#minmax)

我尝试设置

> > wrapper.jvm.port.min=31000
> > 
> > wrapper.jvm.port.max=31999

在 wrapper.conf 文件中

但由于某种原因，它仍然随机分配 jvm 端口。我期望端口号在 31000 - 31999 之间，但事实并非如此。

如果我尝试设置 wrapper.port，那么 wrapper.port 怎么会没有问题

> > 包装器.port.min=31000
> > 
> > wrapper.port.max=31999

这很好用

问题是，有谁知道为什么 jvm 端口设置不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:09:04.163

wrapper.jvm.port 或 wrapper.jvm.port.min/max 仅支持从 tanuki wrapper 版本 3.2.0 开始......

# mysql - Mysql 列全名时按姓氏排序

> ID：13919441
> 
> 赞同：6
> 
> 时间：2012-12-17T17:56:33.607
> 
> 标签：mysql, sql-order-by

我有以下内容：

```
 SELECT * FROM users LEFT JOIN user_info ON users.id=user_info.user_id 
                WHERE 
                    ((user_info.tester != 1) OR (user_info.tester is null)) AND 
                    id in (SELECT explicituser_id FROM user_login WHERE (created < '2012-12-17' OR created >= date_add('2012-12-17', interval 1 day))) AND 
                    id IN (SELECT participte_id FROM roster WHERE roster_id IN (6)) 
                order by 
                    substring_index(users.name, ' ', -1) 
```

我只是想按用户的姓氏进行排序。

但是，虽然它可以按名字排序，但姓氏是错误的。如果用户在他们的名字周围有引号（即“Abigail Martinez”，它将使排序不正确。如果用户只提供一个名字，并且它是一个昵称（即。Juan），那么它也会使其不正确。然后中间有首字母（即 Tiffany S Villa 或 Steve de la Makinov）。不幸的是，这仅使用一列作为全名（users.name）。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T18:49:45.317

`substring_index(TRIM(users.name), ' ', -1)`添加`TRIM`将删除尾随空格。之后，按预期进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:03:28.123

如果是这种情况，请尝试获取所有行，然后可以尝试使用 mysql_real_escape_string。这样你就不会得到报价。会是这样的。

```
 $row['new_name'] = mysql_real_escape_string($row['name']); 
```

我不太确定性能是否明智。

希望这可能会有所帮助

# objective-c - 解析 JSON：检查对象是否存在并读取值

> ID：13919444
> 
> 赞同：0
> 
> 时间：2012-12-17T17:56:36.073
> 
> 标签：objective-c, json, cocoa, nsjsonserialization

我的应用程序返回一个`NSMutableData *receivedData`.

我选择使用 NSJSONSerialization 来解析它，假设它是最简单的。我在试图弄清楚该怎么做时遇到了极大的麻烦。我是 Objective-C 的新手，来自 Java 背景。

在 Java 中，我使用 gson 将 JSON 解析为一个可以轻松使用的数组。我在这里真的很挣扎。

我当前解析 JSON 的代码是：

```
NSError *e = nil;
    NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData: receivedData options: NSJSONReadingMutableContainers error: &e];

    if (!jsonArray) {
        NSLog(@"Error parsing JSON: %@", e);
    } else {
        for(NSDictionary *item in jsonArray) {
            NSLog(@"Item: %@", item);
        }
    } 
```

正如互联网上某人提供的那样。这可以工作并将两个项目打印到 NSLog。`result`和`header`。这是 JSON 的外观：

```
{
  "header":{
    "session":"sessionid",
    "serviceVersion":"1",
    "prefetchEnabled":true
  },
  "result":"50ce82401e826"
} 
```

但是，如果出现错误，JSON 也可能如下所示：

```
{
  "header":{
    "session":"sessionid",
    "serviceVersion":"1",
    "prefetchEnabled":true
  },
  "fault":{
    "code":0,
    "message":"someErrorCode"
  }
} 
```

我希望代码如何工作：

1.  检查是否存在“故障”对象
2.  如果有，打印 fault.code 和 fault.message 到 NSLog
3.  如果没有，我知道我的 JSON 包含结果而不是错误
4.  将结果的值打印到 NSLog

但我无法终生弄清楚如何处理它。有人可以给我一些指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:15:34.503

您的对象似乎是一本字典。

试试这个。

```
NSError *e = nil;
id jsonObj = [NSJSONSerialization JSONObjectWithData: receivedData options: NSJSONReadingMutableContainers error: &e];

NSArray *jsonArray = nil;
NSDictionary *jsonDict = nil;

if ([jsonObj isKindOfClass:[NSArray class]]){
    jsonArray = (NSArray*)jsonObj;
}
else if ([jsonObj isKindOfClass:[NSDictionary class]]){
    jsonDict = (NSDictionary*)jsonObj;
}

if (jsonArray != nil) {
    // you have an array;
    for(NSDictionary *item in jsonArray) {
        NSLog(@"Item: %@", item);
    }
}
else if (jsonDict != nil){
    for (NSString *key in jsonDict.allKeys){
        NSLog(@"Key: %@ forItem: %@",key,[jsonDict valueForKey:key]);
    }
}
else {
    NSLog(@"Error: %@",e);
} 
```

# python - 如何将正确的大数据加载器写入 sqlite

> ID：13919448
> 
> 赞同：0
> 
> 时间：2012-12-17T17:56:58.433
> 
> 标签：python, sqlite, python-2.7

我正在尝试将加载程序写入sqlite，它将尽可能快地加载数据库中的简单行。输入数据看起来像从 postgres 数据库中检索到的行。将进入 sqlite 的近似行数：从 2000 万到 1 亿。由于项目限制，我不能使用除 sqlite 之外的其他数据库。

我的问题是： **编写这样的加载器的正确逻辑是什么？**

**在第一次尝试**时，我尝试编写一组封装的生成器，它将从 Postgres 中取出一行，稍微修改它并将其放入 sqlite。我最终发现，对于每一行，我都创建了单独的 sqlite 连接和游标。这看起来很糟糕。

**在第二次尝试**时，我将 sqlite 连接和光标移出生成器，移至脚本主体，很明显，在我获取并处理所有 20mils 记录之前，我不会将数据提交到 sqlite。这可能会使我所有的硬件崩溃。

**在第三次尝试**中，我考虑让 Sqlite 连接远离循环，但每次我处理并将一行推送到 Sqlite 时创建/关闭游标。这更好，但我认为也有一些开销。

我还考虑过使用事务：每次将行推送到 Sqlite 时，都会在生成器中调用一个连接、一个游标、一个事务和提交。这是我前进的正确方式吗？

是否有一些广泛使用的模式可以在 python 中编写这样的组件？因为我觉得我好像在发明一辆自行车。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:00:22.700

SQLite 可以轻松处理大量事务，那么为什么*不*最后提交呢？你有没有试过这个？

如果您确实觉得一个事务有问题，为什么不提交任何`n`事务呢？逐行处理，根据需要插入，但每次`n`执行的插入都会添加一个`connection.commit()`以分散负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:08:44.903

1.  [请参阅我之前关于 bulk 和 SQLite 的回答](https://stackoverflow.com/questions/8752193/fastest-and-most-efficient-way-to-pre-populate-database-in-android/8855122#8855122)。[可能我的回答也在这里](https://stackoverflow.com/questions/10834553/what-is-the-fastest-way-to-parse-a-json-string-into-an-sqlite-table/10838577#10838577)。
2.  一个问题：你控制 SQLite 数据库吗？您可以调整与缓存大小等相关的[编译时间选项。您也可以根据自己的目的进行调整。](http://www.sqlite.org/compile.html)

一般来说，#1 中的步骤将为您带来最大的收益。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T16:31:49.913

最后我设法解决了我的问题。主要问题是在 sqlite 中插入过多。在我开始将所有数据从 postgress 加载到内存后，以适当的方式聚合它以减少行数，我能够将处理时间从 60 小时减少到 16 小时。

# php - ZF2模块加载性能

> ID：13919450
> 
> 赞同：7
> 
> 时间：2012-12-17T17:57:03.320
> 
> 标签：php, performance, class, zend-framework2, autoload

据我了解，`ZF2`应用程序中每个启用的模块都会为每个请求加载（除非使用诸如[zf2-lazy-loading-module](https://github.com/blanchonvincent/zf2-lazy-loading-module)模块提供的优化方法）。我一直在关注发布的模块，[`modules.zendframework.org`](http://modules.zendframework.com/)并且遇到了功能极其有限的模块，例如[AkrabatFormatUkTelephone](https://github.com/akrabat/AkrabatFormatUkTelephone/blob/master/Module.php)模块，其目的是将电话号码格式化为英国格式。

虽然我理解开发应该专注于创建擅长做一件事的单一用途模块（而不是做很多事情但不是很好的模块），但我在想我们是否开始使用提供有限功能的模块前面提到的，我们将需要组合数百个模块来构建一个丰富的应用程序，这可能会对性能造成灾难性的影响。相反，我希望将这种功能放在一个类中（例如[`Zend\I18n`](https://github.com/akrabat/AkrabatFormatUkTelephone/blob/master/Module.php)？）并按需加载，这将更加优化。但是知道阿克拉巴特的名声，我想我一定是遗漏了一些东西，因此我的问题是：

**像我提到的那样加载模块的性能是否比通过 PHP 类加载相同的功能要差得多（或者由于 ZF2 的设计方式而相似）？有没有人有关于模块与类加载性能的任何数据（即慢 5%、10%、15%）？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:31:47.227

不要将此评论作为最终答案，因为希望 ZF2 开发人员中的某些人会对此有所了解，但通常只会`Module.php`并且通常`module.config.php`会主动加载。其他所有内容都将简单地注册并按需调用。因此，只要您的 Module.php 和 module.config.php 的文件大小不是太大，性能就不应该是那么大的问题

在 Akrabats 示例中，所发生的只是新 ViewHelper 的注册表。没有其他的。Zend 中的所有其他视图助手也是如此。在这些情况下，性能并不重要。

就我个人而言，Skeleton 在我的 Webspace 和 BjyAuthorize、ZfcBase、ZfcUser 和我自己的模块上加载了 80 毫秒，加载时间增加到 100 毫秒。这是*没有*启用任何类型的内存缓存！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-02T20:15:21.303

正如 Sam 所指出的，加载一个模块并不比加载任何类多多少。只要您不使用模块中的任何东西并且做正确的事情，它就只是被注册了。

**现在“做正确的事”是什么意思？**

试着在你的模块类 bootstrap() 方法中放一个大的废话循环。您会看到这会减慢应用程序上的每个请求，因为每个请求都会调用模块的引导方法，并且应该非常小心地使用它，仅用于轻量级任务。您通常使用 bootstrap() 方法的目的，甚至不会使您的应用程序减速一毫秒，但是在此方法中将文件写入磁盘可能会在每个请求中使您的应用程序减速数秒。

如果您的应用程序变得非常沉重，您应该尽可能使用 classmap_autoloader 和一些缓存。如果你做“正确的事情”，你不会有任何性能问题，只是因为你的应用程序中有许多模块或许多类。有人可以说，这完全是关于算法的。

继续使用最佳实践，就像你提到的那样。通常这些不是您应用程序的瓶颈，而是您自己的算法和故障。

编辑：当您使用来自社区的模块时，您应该始终检查它们是否存在性能问题。即使是看起来很轻的模块，如果算法不好，也可能成为应用程序的瓶颈。但是，您正在加载附加模块的情况并不是重点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-16T22:53:47.023

好问题。我想为 Sam 的反应做一点贡献。

模块性能不仅是模块的加载（正如指出的那样非常快），还包括模块之间的通信。所以这个问题可能归结为：与传统的非模块化系统相比，ServiceLocator 和事件驱动系统有多慢/快？

我记得 ZF2 的构建考虑了性能。例如，ServiceLocator 注册工厂，以便可以即时实例化对象。所以这只需要一些额外的内存对象和实例化，我想这不会对您的应用程序的总体性能产生太大影响。EventManager 的工作方式几乎相同，即使在大型应用程序中，我也没有看到它被注册事件超载。

另一方面，可能会减慢的是模块配置的加载。我认为使用缓存可能会解决这个问题。我不确定，但也许 Zend Optimizer 可能已经这样做了。

因此，简而言之，应用程序应该可以很好地扩展，前提是模块表现良好，并且不会过度注册事件或滥用 ServiceLocator。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-24T21:06:22.023

从 MVC 组件的角度来看，根本没有模块！有一个大的配置文件 - 每个模块的配置合并的结果。除非您的模块没有`onBootstrap`方法或做的不多，否则模块加载与调用`new Module`每个模块一样快，这是无痛且内存便宜的。

我上面提到的配置合并过程只发生在默认启用的 DEV 模式下。

还有一些技巧可以加快您的 ZF2 应用程序，例如：

1.  启用合并配置缓存

2.  使用[EdpSuperluminal 模块](https://github.com/EvanDotPro/EdpSuperluminal)

3.  从动作返回 ViewModel 对象，而不是数组

4.  在 ViewModel 上显式设置模板名称

5.  使用模板映射而不是单独使用模板路径堆栈

6.  配置中的路由顺序很重要！它是一个 LIFO 队列（后进先出）。

7.  确保您不在 HTTP 上下文中加载控制台模块。

8.  让[Composer](https://getcomposer.org/)自动加载，而不是 ZF2

... 和更多。[Gary Hockin](http://blog.hock.in/)关于 ZF2 应用程序性能的演讲非常[好。](http://www.masterzendframework.com/reviews/maximising-zend-framework-2-performance-phpuk14/)

授权模块肯定会减慢您的应用程序。有很多事情发生在幕后：需要获取用户的身份（从数据库中？），需要根据您的规则对用户进行身份验证。当然，您可以通过使用 memcached 等来加快速度，但这需要对 ZF2 应用程序的生命周期、您使用的模块等有一些了解。

还有即将发布的 Zend Framework 3，有些事情会更快，但不要期望太多。大量开销是由于您对 ZF2 缺乏了解造成的——无意冒犯！

# bit - 8 位和 16 位架构

> ID：13919451
> 
> 赞同：2
> 
> 时间：2012-12-17T17:57:07.443
> 
> 标签：bit, computer-architecture

我对位架构有点困惑。我只是找不到回答我问题的好文章，所以我想我会问。

问题一：

当谈到 16 位架构时，是否意味着每个 ram 地址都是 16 位长？因此，如果我在 C++ 中创建一个 int（32 位），该变量会占用 2 个地址吗？

问题2：

在 16 位架构中，RAM 内只有 2^16 (65536) 个地址。为什么他们不能添加更多？这是因为 16 位不能代表更高的值，因此不能引用 65535 以上的地址吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:00:03.243

> 当谈到 16 位架构时，是否意味着每个 ram 地址都是 16 位长？因此，如果我在 C++ 中创建一个 int（32 位），该变量会占用 2 个地址吗？

您必须问谁在谈论 16 位架构，他们的意思是什么。它们可能意味着地址是 16 位长。它们可能意味着通用 CPU 寄存器的长度为 16 位。他们可能意味着别的东西。但是我们无法知道某个假设的人可能意味着什么。对于什么使某物成为“16 位架构”，没有通用的定义。

例如，8032 是具有 8 位通用寄存器的 8 位架构。但它有一个 16 位指针寄存器，可用于寻址 65,536 字节的存储空间。

不管位数如何，几乎所有系统都使用字节地址。因此，一个 32 位变量将占用任何位数的机器上的 4 个地址。

> 在 16 位架构中，RAM 内只有 2^16 (65536) 个地址。为什么他们不能添加更多？这是因为 16 位不能代表更高的值，因此不能引用 65535 以上的地址吗？

对于 16 位，只有 65,536 种可能的方式来设置这些位。所以一个 16 位寄存器有 65,536 个可能的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:00:44.067

取决于您对 8 位和 16 位架构的定义。

6502 被认为是 8 位 CPU，因为它在 8 位值（寄存器大小）上运行，但具有 16 位地址。

68000 被认为是 16 位 CPU，但具有 32 位寄存器和地址。

对于 x86，通常是地址大小来定义架构。

此外，“64 位”CPU 并不总是具有完整的 64 位外部地址总线。它们可能在内部处理该大小的地址，因此虚拟地址空间可能很大，但这并不意味着它们可以拥有那么多外部存储器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-16T12:26:04.133

来自 Wikipedia 的示例 - 所有内部寄存器以及内部和外部数据总线均为 16 位宽，牢固地确立了 8086 的“16 位微处理器”身份。20 位外部地址总线提供 1 MB 物理地址空间(2^20 = 1,048,576)。这个地址空间是通过内部“分段”解决的。数据总线与地址总线复用，以适应标准的 40 针双列直插式封装。16 位 I/O 地址意味着 64 KB 的独立 I/O 空间 (2^16 = 65,536)。最大线性地址空间被限制为 64 KB，这仅仅是因为内部寄存器只有 16 位宽。超过 64 KB 边界的编程涉及调整段寄存器（见下文），并且一直如此，直到 80386 引入更宽（32 位）的寄存器（和更高级的内存管理硬件）。

所以你可以看到没有固定的规则，一个 16 位架构将只有 16 个地址线。不要把两件事混为一谈，尽管这样相信是很直观的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T17:58:23.553

1.  是的。请注意，尽管`int`在 16 位架构上通常只有 16 位宽。
    另请注意，说变量“占用”两个地址是没有意义的。正确的说法是 32 位变量在 16 位平台上与两个**指针***一样宽。* 不管是什么架构，它仍然会占用四个字节的空间。

***   是的; 这正是 16 位地址的含义。
    请注意，这些地址中的每一个都指向一个内存字节。**

# c# - 将拖放限制在单个控件内

> ID：13919457
> 
> 赞同：3
> 
> 时间：2012-12-17T17:57:25.890
> 
> 标签：c#, winforms, drag-and-drop, instance

我看了又看，找不到答案。

我有一个`TreeView`. 它具有拖放功能以允许在树中移动节点。

我想将拖放限制为仅在该一个控件中，在应用程序的单个实例中工作（应用程序本身可以运行多个实例）。

我尝试了以下方法：

```
private void SubFolderTreeView_DragEnter(object sender, DragEventArgs e)
{
    TreeView source = sender as TreeView;    // also tried = (TreeView) sender;

    if (source == this.SubFolderTreeView && e.Data.GetDataPresent("System.Windows.Forms.TreeNode", false))
        e.Effect = DragDropEffects.Move; // Okay, set the visual effect
    else
        e.Effect = DragDropEffects.None; // Unknown data, ignore it
} 
```

不幸的是，同一应用程序的第二个实例仍然能够从其拖动`TreeView`到第一个 TreeView：`(source == this.SubFolderTreeView)`是

我没有测试一个完全不同的树视图是否可以拖到我的，虽然我对此表示怀疑，但上述行为已经失败了。

我尝试了其他一些方法 - 比较表单或控件的句柄也不起作用

```
bool isSameForm = ((MyForm) source.TopLevelControl == this);    // still true
bool isSameHandle = (((Control)source).Handle == ((Control)this.SubFolderTreeView).Handle);     // still true 
```

我唯一能想到的其他事情是存储在 TreeView 或 Form 中的随机数（可能不起作用），并检查控件的绝对屏幕位置（不是最好的方法）。

我当然可以在应用程序中粘贴一个互斥锁，因此只允许一个实例运行，但我宁愿不这样做。

任何人都可以建议这样做的好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T03:27:01.877

为了充实 Hans Passant 的解决方案（非常有效，感谢 Hans）以供将来参考和其他搜索者解决这个问题，我使用了代码：

```
// prevents dragging from other instances of this form - thanks to Hans Passant
private bool DragDropFromThisForm = false;

private void SubFolderTreeView_ItemDrag(object sender, ItemDragEventArgs e)
{
    // Initiate drag/drop
    DragDropFromThisForm = true;
    DoDragDrop(e.Item, DragDropEffects.Move);
    DragDropFromThisForm = false;
}

private void SubFolderTreeView_DragEnter(object sender, DragEventArgs e)
{
    MyForm form = (MyForm) (sender as TreeView).TopLevelControl;

    if (form.DragDropFromThisForm && e.Data.GetDataPresent("System.Windows.Forms.TreeNode", false))
        e.Effect = DragDropEffects.Move; // Okay, set the visual effect
    else
        e.Effect = DragDropEffects.None; // Unknown data, ignore it
} 
```

很可能 DJ Kraze 的答案也会起作用，而且可能会更优雅一点，但 Hans 的解决方案是轻量级且有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:13:22.433

我并没有真正遵守限制，您提供的信息似乎有缺陷的逻辑（所有相同的实例，但只有一个可以拖放 - 什么？？），但有一些建议：

*   有一个属性来确定节点是否可以“拖放”并且只在一个实例中设置它。
*   仅订阅您希望能够“拖放”的一个实例上的事件。
*   创建一个单独的支持拖放的 TreeView 类，并在其他任何地方实例化基 TreeView。

# java - JInternalFrame 更改背景颜色 (Nimbus L&F)

> ID：13919458
> 
> 赞同：1
> 
> 时间：2012-12-17T17:57:30.050
> 
> 标签：java, swing, jinternalframe, nimbus

我正在使用 Nimbus L&F 并尝试更改背景颜色。我用这个设置颜色：`iFrame.getContentPane().setBackground(Color.BLACK);`. 然而，它最终在顶部有一个小区域，带有默认颜色。甚至更糟。如果我重新调整 JInternalFrame 的大小，这个区域会将其颜色从深灰色变为浅灰色。我搜索了这个问题，至少我发现它必须是标题栏引起的问题。

[JInternalFrame 的图片](http://imageshack.us/photo/my-images/689/jinternalframebg.jpg/)

有没有办法解决这个问题？这是一个已知的错误？谢谢你。

**编辑：**

一个小程序，它发生的地方。以下行导致问题：`ret.put("defaultFont", new Font("Arial", Font.BOLD, 16));`这是设置默认字体的错误方法吗？

```
package jInternalFrameTest;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.Toolkit;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.lang.reflect.InvocationTargetException;

import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JLayeredPane;
import javax.swing.SwingUtilities;
import javax.swing.UIDefaults;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.UIManager.LookAndFeelInfo;
import javax.swing.plaf.nimbus.NimbusLookAndFeel;

public class JInternalFrameTest extends JFrame {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    public JInternalFrameTest() {
        super("JInternalFrame Background Demo");
        int inset = 50;
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        setBounds(inset, inset, screenSize.width - inset * 2, screenSize.height - inset * 2);
        addWindowListener(new WindowAdapter() {

            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });
        createGUI();
    }

    private void createGUI() {
        MyInternalFrame frame = new MyInternalFrame();
        frame.setVisible(true);
        this.getLayeredPane().add(frame, JLayeredPane.DRAG_LAYER);
        try {
            frame.setSelected(true);
        } catch (java.beans.PropertyVetoException e) {
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {

        try {
            SwingUtilities.invokeAndWait(new Runnable() {

                @Override
                public void run() {

                    for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {

                        if ("Nimbus".equals(info.getName())) {

                            try {

                                UIManager.setLookAndFeel(new NimbusLookAndFeel(){

                                    /**
                                    * 
                                    */
                                    private static final long serialVersionUID = 1L;

                                    @Override
                                    public UIDefaults getDefaults() {
                                        UIDefaults ret = super.getDefaults();
                                        ret.put("defaultFont", new Font("Arial", Font.BOLD, 16));
                                        return ret;
                                    }
                                });

                            } catch (UnsupportedLookAndFeelException e) {
                                   e.printStackTrace();
                            }
                        }
                    }

                    new JInternalFrameTest().setVisible(true);

                }
            });

        } catch (InvocationTargetException | InterruptedException e) {
            e.printStackTrace();
        }
    }

    class MyInternalFrame extends JInternalFrame {

        /**
         * 
         */
        private static final long serialVersionUID = 1L;

        public MyInternalFrame() {
            super("IFrame", true, // resizable
                true, // closable
                true, // maximizable
                true);// iconifiable
            setSize(300, 300);
            getContentPane().setBackground(Color.BLACK);
                pack();
            }
    }
} 
```

# .net - 在 .NET 的 RegEx 中，我可以从 Capture 对象中获取 Groups 集合吗？

> ID：13919459
> 
> 赞同：8
> 
> 时间：2012-12-17T17:57:33.227
> 
> 标签：.net, regex, capture

.NET 在其 RegularExpression 实现中提供了一个 Capture 集合，因此您可以获得给定重复组的所有实例，而不仅仅是它的最后一个实例。太好了，但是我有一个带有*子组*的重复组，我正在尝试获取子组，因为它们在组下是相关的，但找不到方法。有什么建议么？

我查看了许多其他问题，例如：

*   [在正则表达式中选择多个元素](https://stackoverflow.com/questions/7187909/select-multiple-elements-in-a-regular-expression)
*   [正则表达式 .NET 附加命名组](https://stackoverflow.com/questions/5922683/regex-net-attached-named-group)
*   [如何获取给定 Capture 的正则表达式组？](https://stackoverflow.com/questions/5930952/how-can-i-get-the-regex-groups-for-a-given-capture)

但我没有找到任何适用的答案，无论是肯定的（“是的，这就是方法”）或否定的（“不，做不到。”）。

对于一个人为的例子说我有一个输入字符串：

```
abc d x 1 2 x 3 x 5 6 e fgh 
```

其中“abc”和“fgh”表示我想在较大文档中忽略的文本，“d”和“e”包裹感兴趣区域，在该感兴趣区域内，“xn [n]”可以重复任何次数。我感兴趣的是“x”区域中的那些数字对。

所以我使用这个正则表达式模式解析它：

```
.*d (?<x>x ((?<fir>\d+) )?((?<sec>\d+) )?)*?e.* 
```

这将在文档中找到一个匹配项，但会多次捕获“x”组。这是我要在此示例中提取的三对：

*   1, 2
*   3
*   5、6

但我怎样才能得到它们？我可以执行以下操作（在 C# 中）：

```
using System;
using System.Text;
using System.Text.RegularExpressions;

string input = "abc d x 1 2 x 3 x 5 6 e fgh";
string pattern = @".*d (?<x>x ((?<fir>\d+) )?((?<sec>\d+) )?)*?e.*";
foreach (var x in Regex.Match(input, pattern).Groups["x"].Captures) {
    MessageBox.Show(x.ToString());
} 
```

因为我引用组“x”，所以我得到了这些字符串：

*   × 1 2
*   × 3
*   × 5 6

但这并没有让我明白数字本身。所以我可以独立地做“fir”和“sec”而不仅仅是“x”：

```
using System;
using System.Text;
using System.Text.RegularExpressions;

string input = "abc d x 1 2 x 3 x 5 6 e fgh";
string pattern = @".*d (?<x>x ((?<fir>\d+) )?((?<sec>\d+) )?)*?e.*";
Match m = Regex.Match(input, pattern);
foreach (var f in m.Groups["fir"].Captures) {
    MessageBox.Show(f.ToString());
}

foreach (var s in m.Groups["sec"].Captures) {
    MessageBox.Show(s.ToString());
} 
```

要得到：

*   1
*   3
*   5
*   2
*   6

但是我无法知道缺少“4”的是第二对，而不是其他对中的一对。

那么该怎么办？我知道我可以很容易地在 C# 中解析它，甚至可以在“x”组上进行第二次正则表达式测试，但是由于第一次 RegEx 运行已经完成了所有工作并且结果是已知的，似乎应该有一种方法操纵 Match 对象以从中获得我需要的东西。

请记住，这是一个人为的例子，现实世界的情况要复杂一些，所以只是在上面扔额外的 C# 代码会很痛苦。但是，如果现有的 .NET 对象无法做到这一点，那么我只需要知道这一点，我将继续前进。

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T18:48:37.817

我不知道一个完全内置的解决方案，并且在快速搜索后找不到一个，但这并不排除存在一个的可能性。

我最好的建议是使用`Index`and`Length`属性来查找匹配的捕获。它看起来不是很优雅，但是在编写一些扩展方法之后，您可能会想出一些相当不错的代码。

```
var input = "abc d x 1 2 x 3 x 5 6 e fgh";

var pattern = @".*d (?<x>x ((?<fir>\d+) )?((?<sec>\d+) )?)*?e.*";

var match = Regex.Match(input, pattern);

var xs = match.Groups["x"].Captures.Cast<Capture>();

var firs = match.Groups["fir"].Captures.Cast<Capture>();
var secs = match.Groups["sec"].Captures.Cast<Capture>();

Func<Capture, Capture, Boolean> test = (inner, outer) =>
    (inner.Index >= outer.Index) &&
    (inner.Index < outer.Index + outer.Length);

var result = xs.Select(x => new
                            {
                                Fir = firs.FirstOrDefault(f => test(f, x)),
                                Sec = secs.FirstOrDefault(s => test(s, x))
                            })
               .ToList(); 
```

这里使用以下扩展方法的一种可能解决方案。

```
internal static class Extensions
{
    internal static IEnumerable<Capture> GetCapturesInside(this Match match,
         Capture capture, String groupName)
    {
        var start = capture.Index;
        var end = capture.Index + capture.Length;

        return match.Groups[groupName]
                    .Captures
                    .Cast<Capture>()
                    .Where(inner => (inner.Index >= start) &&
                                    (inner.Index < end));
    }
} 
```

现在你可以重写代码如下。

```
var input = "abc d x 1 2 x 3 x 5 6 e fgh";

var pattern = @".*d (?<x>x ((?<fir>\d+) )?((?<sec>\d+) )?)*?e.*";

var match = Regex.Match(input, pattern);

foreach (Capture x in match.Groups["x"].Captures)
{
    var fir = match.GetCapturesInside(x, "fir").SingleOrDefault();
    var sec = match.GetCapturesInside(x, "sec").SingleOrDefault();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T18:36:01.227

它会永远是一对对单吗？您可以使用单独的捕获组。当然，使用这种方法会丢失项目的顺序。

```
var input = "abc d x 1 2 x 3 x 5 6 e fgh";
var re = new Regex(@"d\s(?<x>x\s((?<pair>\d+\s\d+)|(?<single>\d+))\s)*e");

var m = re.Match(input);
foreach (Capture s in m.Groups["pair"].Captures) 
{
    Console.WriteLine(s.Value);
}
foreach (Capture s in m.Groups["single"].Captures)
{
    Console.WriteLine(s.Value);
}

1 2
5 6
3 
```

如果您需要订单，我可能会接受 Blam 的建议，使用第二个正则表达式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T19:35:22.113

我建议您研究 .net 正则表达式的独特平衡组。

这是一个正则表达式，用于在发现组（非数字或 X）关闭组时停止匹配。然后根据需要通过捕获访问匹配项：

```
string data = "abc d x 1 2 x 3 x 5 6 e fgh";

string pattern =
@"(?xn)    # Specify options in the pattern
           # x - to comment (IgnorePatternWhitespace)
           # n - Explicit Capture to ignore non named matches

(?<X>x)                    # Push the X on the balanced group
  ((\s)(?<Numbers>\d+))+   # Load up on any numbers into the capture group
(?(Paren)(?!))             # Stop any match that has an X
                           #(the end of the balance group)";

var results = Regex.Matches(data, pattern)
                   .OfType<Match>()
                   .Select ((mt, index) => string.Format("Match {0}: {1}",
                                             index,
                                             string.Join(", ",
                                                         mt.Groups["Numbers"]
                                                         .Captures
                                                         .OfType<Capture>()
                                                         .Select (cp => cp.Value))))
                   ;

results.ToList()
       .ForEach( result => Console.WriteLine ( result ));
/* Output

Match 0: 1, 2
Match 1: 3
Match 2: 5, 6

*/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T20:40:48.487

我已经看过 OmegaMan 的回答，并且知道您更喜欢 C# 代码而不是正则表达式解决方案。但无论如何，我想提出一种替代方案。

在 .NET 中，您可以重用命名组。每次使用该组捕获某些东西时，它都会被推入堆栈（这就是 OmegaMan 所指的“平衡组”）。`x`您可以使用它为您找到的每一个推送一个空捕获到堆栈：

```
string pattern = @"d (?<x>x(?<d>) (?:(?<d>\d+) )*)*e"; 
```

因此，现在在匹配推送后`x`，`(?<d>)`将一个空捕获放到堆栈上。这是`Console.WriteLine`输出（每次捕获一行）：

```
1
2

3

5
6 
```

因此，当您走过`Regex.Match(input, pattern).Groups["d"].Captures`并记下空字符串时，您知道一组新的数字已经开始。

# .net - 带有 PostSharp 和继承类的 VB.NET

> ID：13919473
> 
> 赞同：1
> 
> 时间：2012-12-17T17:58:25.860
> 
> 标签：.net, vb.net, inheritance, postsharp

我正在使用 PostSharp 来捕获系统中生成的所有异常，其中包含一个类`OnMethodBoundaryAspect`。它工作正常，但如果我需要在某些继承的类中获取异常，我在 VB.NET 中找不到解决方案。

该类`MulticastAttributeUsageAttribute`有一个具有一个validOn 属性的构造函数，我只能设置MultcastTargets。该类有一个名为 的公共属性`Inheritance`，但如果我在构造函数中设置它，它就没有效果。下面举个例子：类B扩展类A，属性aspect在类A中注解，我需要类B自动被aspect看到。

我该如何解决这个问题？

### 代码

```
<Serializable()> _
<AttributeUsage(AttributeTargets.Class)> _
<MulticastAttributeUsage(MulticastTargets.Method)> _
Public Class ExceptionsAttribute
    Inherits OnMethodBoundaryAspect

        Public Overrides Sub OnEntry(ByVal Args As PostSharp.Aspects.MethodExecutionArgs)
             MyBase.OnEntry(Args)
        End Sub

        Public Overrides Sub OnException(ByVal Args As PostSharp.Aspects.MethodExecutionArgs)
             MyBase.OnException(Args)
        End Sub

    End Class

    <Exceptions()> _
    Public Class A

        Public Sub MethodA()
        End Sub

    End Class

    Public Class B
        Inherits A

        Public Sub MethodB()
        End Sub

    End Class 
```

类 A 由 Exception 属性类注解。B 类扩展了 A 类，那么我需要自动查看 B 类，而无需使用 Exception 属性类进行注释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:15:47.960

解决了！！！我只需要直接设置属性，如：

```
<MulticastAttributeUsage(MulticastTargets.Method, Inheritance:=MulticastInheritance.Multicast)> 
```

# python - Python解析网页的“标题”

> ID：13919474
> 
> 赞同：1
> 
> 时间：2012-12-17T17:58:28.730
> 
> 标签：python, regex, parsing, module

我希望能够解析网页并返回标题正好包含 4 个字母的任何元素。

例如：

```
<li><a href="test.com/dogs" title="dogs"></a></li>
<li><a href="test.com/cat" title="cat"></a></li>
<li><a href="test.com/horse" title="horse"></a></li>
<li><a href="test.com/eels" title="eels"></a></li> 
```

在这个例子中，我想返回一个包含 'dogs' 和 'eels' 的数组，因为标题正好包含 4 个字符。我该怎么做呢？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T18:02:31.040

你应该使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)。

使用它，您可以执行以下操作：

```
import urllib2
from BeautifulSoup import BeautifulSoup

url = # put url here
page = urllib2.urlopen(url)
text = page.read()
page.close()
soup = BeautifulSoup(text)

L = []
for x in soup.findAll('li'):
    link = x.a
    if link.has_key('title'):
        if len(link['title']) == 4:
            L.append(link['title'])
print L 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:38:29.460

我知道用 re 解析 html 被认为是不好的美德，但我确实喜欢直截了当的方法。

```
 #!/usr/bin/env python
 import re
 res_array = []
 for line in open('inputdata','r'):
     res = re.findall('title=\"[a-zA-Z][a-zA-Z][a-zA-Z][a-zA-Z]\"',line)
     if res :
         res_array.append(res[0].split('"')[1]) 
 print res_array 
```

# java - 格式为“yyyy-mm-dd HH:mm:ss”的 Java 字符串到日期对象

> ID：13919475
> 
> 赞同：26
> 
> 时间：2012-12-17T17:58:35.513
> 
> 标签：java, string, date, simpledateformat

我需要将包含日期的字符串转换为日期对象。字符串的格式为“yyyy-mm-dd HH:mm:ss.SSSSSS”，我希望在日期对象中使用相同的格式。

例如，我有一个字符串“2012-07-10 14:58:00.000000”，我需要生成的日期对象具有相同的格式。

我尝试了以下方法，但结果与预期不符。

```
java.util.Date temp = new SimpleDateFormat("yyyy-mm-dd HH:mm:ss.SSSSSS").parse("2012-07-10 14:58:00.000000");

DateFormat dateFormat = new SimpleDateFormat("yyyy-mm-dd HH:mm:ss");
                Date thisDate = dateFormat.parse("2012-07-10 14:58:00.000000"); 
```

结果是“2012 年 1 月 10 日星期二 14:58:00 EST 2012”。请让我知道我哪里出错了。

谢谢， Yeshwanth Kota

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-12-17T18:00:55.320

```
java.util.Date temp = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSSSSS").parse("2012-07-10 14:58:00.000000"); 
```

`mm`你想要的分钟数`MM`

**代码**

```
public class Test {

    public static void main(String[] args) throws ParseException {
        java.util.Date temp = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSSSSS")
                .parse("2012-07-10 14:58:00.000000");
        System.out.println(temp);
    }
} 
```

印刷：

> 2012 年 7 月 10 日星期二 14:58:00 EDT

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-01-05T14:47:34.420

备查：

```
 yyyy => 4 digit year
 MM   => 2 digit month (you must type MM in ALL CAPS)
 dd   => 2 digit "day of the month"

 HH   => 2-digit "hour in day" (0 to 23)
 mm   => 2-digit minute (you must type mm in lowercase)
 ss   => 2-digit seconds
 SSS  => milliseconds 
```

所以“yyyy-MM-dd HH:mm:ss”返回“2018-01-05 09:49:32”

但是“MMM dd, yyyy hh:mm a”返回“Jan 05, 2018 09:49 am”

[https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html](https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)上的所谓示例仅显示输出。他们不会告诉你使用什么格式！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-01-05T16:21:06.823

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-14T06:21:57.497

您没有应用日期格式化程序。相反，您只是在解析日期。以这种格式获得输出

```
yyyy-MM-dd HH:mm:ss.SSSSSS 
```

我们必须使用 format() 方法，这里是完整的例子：- 这是完整的例子：- 它将采用这种格式的日期，`yyyy-MM-dd HH:mm:ss.SSSSSS` 结果我们将得到与这种格式相同的输出`yyyy-MM-dd HH:mm:ss.SSSSSS`

```
 import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

//TODO OutPut should LIKE in this format yyyy-MM-dd HH:mm:ss.SSSSSS.
public class TestDateExample {

public static void main(String args[]) throws ParseException {

    SimpleDateFormat changeFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSSSSS");

    java.util.Date temp = changeFormat.parse("2012-07-10 14:58:00.000000");
     Date thisDate = changeFormat.parse("2012-07-10 14:58:00.000000");  
    System.out.println(thisDate);
    System.out.println("----------------------------"); 
    System.out.println("After applying formating :");
    String strDateOutput = changeFormat.format(temp);
    System.out.println(strDateOutput);

}

} 
```

[![工作示例屏幕](../Images/3fe1477efbf7cf647335015ccdff9f99.png)](https://i.stack.imgur.com/N9KIQ.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-01T13:23:59.663

它对我的工作 SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); sdf.format（新日期））；

# graphite - 石墨中的自定义查询

> ID：13919478
> 
> 赞同：9
> 
> 时间：2012-12-17T17:58:54.613
> 
> 标签：graphite

我们需要收集多个服务器和业务流程的时间序列信息，并考虑使用石墨。如果我们想显示原始数据似乎很好。但是，如果我们想对这些数据进行 BI 并运行自定义查询怎么办？石墨是否允许这样做，或者我可以指示石墨在 postgress 上存储数据吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-20T08:40:59.450

Graphite 绝对允许您以[图形方式查询数据并返回 csv 或 json](http://graphite.wikidot.com/url-api-reference)。石墨中的查询不是用 sql 之类的语言完成的。他们完成了一次适用于一个指标的[功能。](http://graphite.readthedocs.org/en/0.9.x/functions.html)每个指标都是它自己的数据库，它只是一系列时间、值对。

您可能想要的最常见的事情是汇总不同时间段的数据。下面是一个示例，展示了一周内每天汇总数据的图表的 url：

```
http://graphite.example.com/render/?width=586&height=308&_salt=1355992522.674&target=summarize(stats_counts.mystat.subname%2C%20'1day')&from=-7days 
```

如果您想返回 csv 而不是图形，只需将 format=json 添加到 url。如果您通过石墨的网络界面查看数据，您只需输入以下内容即可查看相同的图表。

```
summarize(stats_counts.mystat.subname, '1day') 
```

您所做的大部分数据查询首先将在石墨作曲家中进行，它只是一个 Web 界面，可让您单击要添加到图表中的指标，并将各种功能应用于它们。

至于将数据添加到 Postgres，您可能不想这样做来查询它。数据的结构并不适合关系数据库。

# python - 生成 10000 位随机序列

> ID：13919481
> 
> 赞同：9
> 
> 时间：2012-12-17T17:59:15.037
> 
> 标签：python, binary

有没有比在循环中附加 0 和 1 更有效的方法在 Python 中生成 10 kBit（10,000 位）随机二进制序列？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T21:51:04.680

如果你想要一个随机二进制序列，那么在适当的范围内生成一个随机整数可能是最快的：

```
import random
s = random.randint(0, 2**10000 - 1) 
```

在此之后，它真的取决于你想用你的二进制序列做什么。您可以使用按位运算查询各个位：

```
s & (1 << x)  # is bit x set? 
```

或者，如果您想让检查、设置切片等更容易，您可以使用[bitarray](http://pypi.python.org/pypi/bitarray/)或[bitstring之类的库：](http://code.google.com/p/python-bitstring/)

```
from bitstring import BitArray
b = BitArray(uint=s, length=10000)
p, = b.find('0b000000')
if b[99]:
    b[100] = False
... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-22T19:17:21.743

numpy 包有一个子包“random”，它可以生成随机数数组。

[http://docs.scipy.org/doc/numpy/reference/routines.random.html](http://docs.scipy.org/doc/numpy/reference/routines.random.html)

如果你想要一个'n'随机位数组，你可以使用

```
arr = numpy.random.randint(2, size=(n,)) 
```

...但是根据您对它们的处理，使用它们可能会更有效，例如

```
arr = numpy.random.randint(0x10000, size=(n,)) 
```

得到一个包含“n”个数字的数组，每个数字有 16 个随机位；然后

```
rstring = arr.astype(numpy.uint16).tostring() 
```

将其转换为包含相同随机位的 2*n 个字符的字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-24T17:19:33.703

这是一个单行：

```
import random
[random.randrange(2) for _ in range(10000)] 
```

# ios - iOS 6.1 在交付的应用程序上超时，但在 Xcode 的应用程序上却没有

> ID：13919484
> 
> 赞同：0
> 
> 时间：2012-12-17T17:59:28.737
> 
> 标签：ios, ios6, iphone-5

我有一个应用程序成功获得了苹果的批准，并且可以通过 App Store 获得。通过应用程序商店安装应用程序可以登录并获取初始数据，但是当您按下刷新按钮时，应用程序只会进入一个永远不会完成下载数据的无限循环。没有崩溃，没有超时消息，没有错误......它只是继续“刷新”几分钟。

使用 Xcode 4.5 和 4.6 RP3 在完全相同的手机（两部手机做同样的事情）上安装完全相同的应用程序完全没有问题。以这种方式刷新只需大约 10 秒。在所有版本的 iOS 上与模拟器相同。

关于我能做什么的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:04:18.630

在 App Description 中通知用户/客户，并重新提交 App。也许在您提交之前偷偷地犯了一个错误。

# android - Gridview在android中只显示12张图片

> ID：13919487
> 
> 赞同：1
> 
> 时间：2012-12-17T17:59:41.250
> 
> 标签：android

我有一个 gridView，每个项目都有一个要加载的图像。我已经使用适配器来渲染图像。我使用可绘制文件夹中的图像创建的资源 ID 数组将图像分配为 gridView 项目。

问题是 gridView 仅显示 12 个图像（适合视图而无需滚动）。我在该数组中有大约 40 个图像资源 ID。getView 仅被调用 12-13 次。

你能帮我在网格视图上显示所有 40 个图像吗？我需要在 grid.xml 中显式添加滚动窗格吗？

下面是 grid.xml 布局

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" 
        android:background="@drawable/wooden_background"
         android:id="@+id/RootView">
         <GridView
            android:id="@+id/gridView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:numColumns="3"
            android:stretchMode="columnWidth"
            android:padding="5dp"
            android:verticalSpacing="5dp"
            android:horizontalSpacing="5dp"
            android:gravity="center"
            android:maxWidth="150dip"
            android:maxHeight="150dip" >

        </GridView>

    </LinearLayout> 
```

下面是适配器内部的getView函数

```
 public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    View vi;
    if (convertView == null){  // if it's not recycled, initialize some attributes
        vi = inflater.inflate(R.layout.each_image,parent, false);
    }
    else{
        vi=convertView;
    }
        /*imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(170,170));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);*/

    System.out.println("Inside getView");
    ImageView image = (ImageView)vi.findViewById(R.id.imageView);
    image.setMaxHeight(150);
    image.setMinimumHeight(150);
    image.setScaleType(ImageView.ScaleType.FIT_XY );
    image.setImageResource(imageIngredientsID[position]);

    return vi;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:03:19.140

尝试添加`ScrollView`到布局：

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent">

 <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="@drawable/wooden_background"
     android:id="@+id/RootView">
     <GridView
        android:id="@+id/gridView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:numColumns="3"
        android:stretchMode="columnWidth"
        android:padding="5dp"
        android:verticalSpacing="5dp"
        android:horizontalSpacing="5dp"
        android:gravity="center"
        android:maxWidth="150dip"
        android:maxHeight="150dip" >

    </GridView>

</LinearLayout>
</ScrollView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:06:41.927

gridview 获得多少项目完全取决于适配器中的 getCount() 方法，它返回什么？12？

# visual-c++ - 为什么 XP 目标中不允许最后添加到 VC++11'

> ID：13919489
> 
> 赞同：0
> 
> 时间：2012-12-17T17:59:56.653
> 
> 标签：visual-c++

我想编译下一行：

```
 R"(The String Data \ Stuff " )" 
```

当目标是 windows XP (vc110_xp) 时，它给我编译错误；如果 VC++ 目标不是 Windows XP，编译器接受语法。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:40:37.600

2012年[11 月的 Compiler CTP](http://blogs.msdn.com/b/vcblog/archive/2012/11/02/visual-c-c-11-and-the-future-of-c.aspx)是一个*社区技术预览版*：它是供人们使用和测试的预览版，但不适合生产使用（它没有“上线”许可证）。

[Visual Studio 2012 Update 1](http://blogs.msdn.com/b/vcblog/archive/2012/11/26/visual-studio-2012-update-1-now-available.aspx)是用于生产用途的 Visual Studio 2012 更新。此更新包括支持使用 Visual C++ 2012 来定位 Windows XP。

这是两个不同的版本，用于两个不同的目的。2012 年 11 月的 Compiler CTP 是在 Visual Studio 2012 Update 1 发布之前发布的，它不包括对 Windows XP 的支持（不过，它只更新编译器二进制文件，所以你可以使用一些 MSBuild 魔法来使用新的带有新的 Windows XP 支持库的预览编译器；但不支持这样做）。

# graphite - 多租户应用程序的石墨

> ID：13919499
> 
> 赞同：2
> 
> 时间：2012-12-17T18:00:27.453
> 
> 标签：graphite

我正在构建一个需要收集时间序列数据的系统。该系统是多租户的，因此不同的客户会发出他们自己的数据点，我会存储它。石墨对这种场景有什么样的支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T13:39:38.413

Graphite 提供了一个“中继”，能够将指标中继到其他实例。这是可配置的，因此您可以做的是在指标名称中指定租户 ID（例如：${tenant}.metric.name），并使用正则表达式基于该 ID 中继到其他实例。这样你就可以提供分片。

见： http: [//graphite.readthedocs.org/en/latest/carbon-daemons.html](http://graphite.readthedocs.org/en/latest/carbon-daemons.html)

# macos - 在 RubyMine for OS X 中切换列选择模式的快捷方式是什么？

> ID：13919501
> 
> 赞同：6
> 
> 时间：2012-12-17T18:00:30.337
> 
> 标签：macos, rubymine

编辑菜单显示使用**默认键盘映射时，列选择模式的快捷键是****Shift+Command+***。 **Shift+Command+***不会切换列选择模式。

 ****我是否认为**Shift+Command+***与**Shift+Command+8**（数字 8 键）相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-09T22:18:14.680

Yes, it's numeric keyboard. For mac numeric keyboard available by Fn key. For my Macbook pro combination **Shift+Command+Keyboard(?)+*** means **Shift+Command+Fn+P**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T18:09:54.280

打开`Preferences`| `Keymap`并为此操作添加键盘快捷键，以查看特定于您的键盘布局的实际键码：

![在此处输入图像描述](../Images/78aa6b546b7861f9e9d63d83346288fa.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-30T00:08:15.753

在默认映射的 Mac 上切换列选择模式对我不起作用。我将它重新映射到 alt+cmd+8 就成功了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-19T23:56:00.683

`Shift+Control+Command+8`在 MacBook Pro 的内置键盘上的 IntelliJ 中工作（2015 年中，OSX 10.11 El Capitan）

感谢[https://guruv.wordpress.com/2010/09/02/ae-macbook-pro-shortcuts-for-the-numpad-deprived/](https://guruv.wordpress.com/2010/09/02/ae-macbook-pro-shortcuts-for-the-numpad-deprived/)****

# c - 如何从一个 makefile 构建多个目标

> ID：13919505
> 
> 赞同：9
> 
> 时间：2012-12-17T18:00:44.107
> 
> 标签：c, makefile

我正在尝试参数化我的 makefile 目标。目前，它有一个

```
TARGET = main 
```

靠近顶部的声明。它从中派生`SRC`列表以及做许多其他事情。

不过，我已经更改了我的 C 代码，因此我有多个不同的顶级 .c 文件来基本上获得变体版本。所以我想做的基本上就是做

```
make target1 
```

或者

```
make target2 
```

并改变`TARGET`makefile中设置的内容。我很困惑如何做到这一点。我想我可以添加类似的东西

```
target1: all
    TARGET=target1 
```

不过，这似乎并没有很好地工作。是否有一个如何做到这一点的一般模式？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-18T11:52:50.280

我建议简单地将您的目标拼写为 makefile 中的单独目标：

```
all: target1 target2

OTHER_OBJS = misca.o miscb.o miscc.o

target1: target1.o $(OTHER_OBJS)

target2: target2.o $(OTHER_OBJS) 
```

然后`make`, `make target1`, `make target2`, 等等都会做你想做的事。

您说您的 makefile以某种可能是高科技的方式“`SRC`从 [] 派生列表”，但尝试以低技术方式明确列出目标文件可能会很有趣，如上所述。`$(TARGET)`使用不同的*make*目标可以说是 Make 产生不同结果的一般模式。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-17T18:05:55.473

参数化变量名称和特定于目标的变量可以做你想做的事，因为特定于目标的变量的值通常由该目标的先决条件“继承”（假设你使用的是 GNU make）：

```
target1_SRC=123 456
target2_SRC=abc def

target1: TARGET=target1
target2: TARGET=target2

target1: all
target2: all

all: ; @echo $($(TARGET)_SRC) 
```

然后你可以运行`make target1`or `make target2`，例如：

```
$ make target1
123 456
$ make target2
abc def 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-13T13:43:22.157

好吧...使用 pmake 我们可以做到这一点：（如果使用 gmake 我们可以将 $(.THINGS) 替换为等价 $@ $< 等等...

```
.PHONY: clean run

PROGRAMS = progrname_one progrname_two... and so

all: $(PROGRAMS)

$(PROGRAMS): $(PROGRAM=$(.TARGET))

CC = clang -I.

CFLAGS = -O0 -g -std=gnu11 

OBJS = 

LIBS = 

CPATH = .

$(PROGRAM): $(PROGRAM).c $(OBJS)
    $(CC) $(CFLAGS) -o $(.TARGET) $(.IMPSRC) $(OBJS) $(LIBS) 

$(PROGRAM).o: $(PROGRAM).c

clean:
    rm -f *~
    rm -f *.core
    rm -f $(PROGRAMS) $(PROGRAMS).o

run:
    ./$(PROGRAM)

dbg:
    lldb ./$(PROGRAM) 
```

# mysql - 比较 2 个表并找到不重复的条目

> ID：13919509
> 
> 赞同：0
> 
> 时间：2012-12-17T18:01:07.890
> 
> 标签：mysql

我有 2 张桌子。我想检查表 1 的列在表 2 的列中是否没有重复项。

这是搜索应该如何工作的！[![搜索重复行](../Images/a4d6ffeee8982cbfbc657006f59c30f4.png)](https://i.stack.imgur.com/fuopN.jpg)

如果没有找到重复项，我想从 table1 中获取行名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:07:40.240

如果我猜对了，这就是你想要的。

```
SELECT 
    t1.name 
FROM 
    Table1 t1 
WHERE 
    t1.name 
NOT IN 
    (
        SELECT t2.name 
        FROM Table2 t2
        JOIN t1 
        ON t2.name = t1.name
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:54:22.033

您需要指定用于“匹配”行的一列（或多列），以确定它们是否“重复”。

我将假设（没有任何架构信息）列名是`id`.

“反连接”模式通常是性能最好的选项：

```
SELECT a.id
  FROM table1 a
  LEFT
  JOIN table2 b
    ON a.id = b.id
 WHERE b.id IS NULL 
```

（性能取决于一大堆因素。）

您的其他选择是使用 NOT EXISTS 谓词：

```
SELECT a.id
  FROM table1 a
 WHERE NOT EXISTS
       ( SELECT 1
           FROM table2 b
          WHERE b.id = a.id
       ) 
```

或者，使用 NOT IN 谓词：

```
SELECT a.id
  FROM table1 a
 WHERE a.id NOT IN
       ( SELECT b.id
           FROM table2 b
          WHERE b.id IS NOT NULL
       ) 
```

这些语句中的每一个生成的执行计划和性能可能会有所不同。对于大型集合，“反连接”模式（第一个查询）通常表现最好。

# php - 创建一个加载更多按钮并在同一个 codeigniter 视图中显示下一组内容

> ID：13919510
> 
> 赞同：2
> 
> 时间：2012-12-17T18:01:10.220
> 
> 标签：php, codeigniter, jquery, codeigniter-2

我正在尝试创建一个加载更多按钮。如果单击它必须加载附加到上一个记录的下一个记录。这是我的控制器类

```
class Sample  extends CI_Controller{
  function wall($start)
{
$start = $this->input->post('start');

$resultjson = $this->curl->simple_get("http://www.mywebsite.com/api/posts.php?start=$start&count=10");
$resultant_data = json_decode($resultjson,true);
$data['sample'] = $resultant_data;
$this->load->view('posts',$data);
}
} 
```

在我看来

```
<html>
<head>
<I have some js files such as masonry>
<script type="text/javascript">
function loadmore()
{

$.ajax({
type:"POST",
url:"http://www.server.com/application/index.php/Sample/wall/",

data :"start=10",
//dataType : 'json',

         success: function (data) {

             alert(data);
         }
});
}
</script>

</head>
<body>
. . . . .
. . . . .
<div id="loadmore" style="margin-top:75%;">
<input type="button" value="loadmore" onclick="loadmore()">
</div>
</body>

</html> 
```

Sample 是类名，wall 是方法名问题是如果我直接在 url 中调用**www.mysite.com/application/sample/wall/10它会给我****接下来的 10 条记录**....但是我无法显示接下来的 10 条记录如果单击**加载更多**按钮，则记录。即，如果我致电**www.mysite.com/application/sample/wall**，我将得到 0 到 10 和一个加载更多按钮。单击按钮时，它必须显示**下一个十以及较早的数据。** 谁能帮帮我吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:18:09.213

首先加载**www.mysite.com/application/sample/wall/0**（默认），与您的代码相同。
**或**
添加`if($start == ''){$start = 0;}`您的控制器。

# php - JSON 从 JQuery 请求返回未定义

> ID：13919514
> 
> 赞同：0
> 
> 时间：2012-12-17T18:01:21.890
> 
> 标签：php, jquery

> **可能重复：**
> [如何返回 AJAX 响应文本？](https://stackoverflow.com/questions/1225667/how-to-return-ajax-response-text)

我正在尝试为表单提交操作组合一个 JQuery 超时函数。我通过 PHP 进行了类似的页面重新加载，并将初始页面加载的时间存储在`$_SESSION['pageLoad']`. 我现在要做的是获取该值并在一些 JQuery 数学中使用它。

在搜索了[SO](https://stackoverflow.com/questions/2765175/how-to-get-session-variables-from-php-server-with-ajax-function-php-html-js-aj?rq=1)之后，我得出了以下结论：

**PHP**

```
<?php
    //filename: getsession.php
    session_start();
    echo json_encode($_SESSION['pageLoad']); 
```

**jQuery**

```
$("#sms-creator").submit(function() {
    var     session;
    $.ajaxSetup({cache: false})
    $.get('sms_includes/getsession.php', function(data) {
        session = data;
    });

    //at this point I just want to see what I'm getting, hence the next 2 lines...
    alert(session);
    return false;
}); 
```

*PHP 文件的路径是相对于表单页面的，而不是相对于 .js 文件的。*

我的警报只返回“未定义”。我对 Javascript 及其库没有经验，所以对我来说这个错误并不明显。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:04:56.783

ajax call is done asynchronously. so when $.get is executed, request is sent to server for response, however, the javascript program will not wait for the response because it is done asynchronously. when you alert(session), variable session hasn't been set to data returned by server. Try do ajax synchronously, or put alert session in the ajax callback.

# jquery - jQuery 在删除 LIMIT 参数时从 AJAX 查询返回 .length

> ID：13919518
> 
> 赞同：0
> 
> 时间：2012-12-17T18:01:34.410
> 
> 标签：jquery, ajax

我正在尝试解决一些关于分页问题的逻辑。

我需要基于 SQL 查询 JSON 数组构建分页元素，这没什么大不了的，除了我处理分页的方式是只返回由 LIMIT 参数设置的“每页显示”元素。

为了尝试清除它，这里是我的代码的一瞥。

```
<form id="hidden">
<input type="hidden" name="limit" value="5" id="hshowpp" />
</form>
<form id="userform">
    <select id="ushowpp">
        <option value=5>5</option>
        <option value=10>10</option>
        <option value=15>15</option>
        <option value=20>20</option>
    </select>
 </form> 
```

哪个，当改变时，会引发一个 jQuery

```
$('#show').change(function() {
    var ushow = $('#ushowpp').val();
    $('#hshowpp').val(ushow);
} 
```

然后是 AJAX

```
var results = $('#hidden').serialize();
var url = '<php? echo JURI::base(); ?>index.php?option=com_mls&task=ListData&format=raw&' + results;
$.ajax({
    url: url,
    dataType: 'json'
}); 
```

因此，AJAX 返回`index.php?.....limit=5`用户选择的查询或任何内容。

现在，这就是它如何运作的支柱。我的逻辑问题是如何解决分页问题。发送到 AJAX 的 URL 包含一个 LIMIT 参数，当它遇到 mySQL 时，会出现类似`SELECT * FROM my_table WHERE 1=1 AND ...... LIMIT 0,5`LIMIT 的参数，其中 LIMIT 的参数是“当前页面”和“每页显示”值。该问题特别与我需要从不包括“每页显示”限制参数的结果中显示总页数的位置有关。

如果这有任何意义......想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T15:09:42.513

我的解决方案是将限制参数分解为单独的隐藏形式，因此`.serlaize()`每个形式都可以串联或单独使用，具体取决于我需要做什么。这是一个[小提琴](http://jsfiddle.net/RPkCj/6/)来说明我的方法。

# session - 会话帖子链接已读/未读

> ID：13919519
> 
> 赞同：1
> 
> 时间：2012-12-17T18:01:42.093
> 
> 标签：session, hyperlink

我已经为我的网站创建了一个论坛脚本，一切正常，但我一想就被阻止了，我尝试为访问的类别和帖子创建一个会话，所以如果登录的用户没有阅读帖子，脚本会显示图像“not_read.png”，否则显示“read.png”

所以我的代码是这样的：

```
$ctid = isset($_REQUEST['ctid']) ? $_REQUEST['ctid'] : '';
if ($action == 'spost'){
$select_posts = "SELECT * FROM forum_posts WHERE cat_id = '$ctid'....

session_set_cookie_params(0);
session_start();        
$_SESSION["CAT-$ctid"] = $ctid;
$ses_post = $_SESSION["CAT-$post_id"];
if ($ses_post == $post_id) {

echo "<img src='read.png'>";
}else{
echo "<img src='no_read.png'>";
}
} 
```

正在工作，但是当用户注销并再次登录时，所有帖子都显示为未读。

知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:24:12.043

会话仅在您打开浏览器窗口并导航到站点的生命周期内处于活动状态，直到您的代码重置会话或用户关闭浏览器。

因此，如果您希望不同会话之间的用户可以使用它，那么将您的已读/未读标志存储在会话中是不可接受的。

相反，您应该创建一个表并将其与您的论坛帖子一起存储，其中包含 UserId、PostID 的条目，每次用户查看帖子时都会添加一行。然后使用这个表来决定它是已读（表中有一行）还是未读（没有与userid/postid匹配的行）

# grails - 抑制 Grails Plugin WARN 消息的弃用行为

> ID：13919522
> 
> 赞同：4
> 
> 时间：2012-12-17T18:01:46.367
> 
> 标签：grails, logging, suppress-warnings

我们为我们的应用程序使用了很多 Grails 插件，显然其中一些仍在使用已弃用的`ApplicationHolder.getApplication()`. 我似乎无法确定哪些是具体的，升级 Willy nilly 不是一种选择。

当我们的日志级别是 info 或更低时，我们会在 grails 启动时获得数百个这样的日志：

> 警告 util.GrailsUtil - [已弃用] 方法 ApplicationHolder.getApplication() 已弃用，将在 Grails 的未来版本中删除。

有什么办法可以压制这些吗？

更新：

根据baiyubin的回答，我至少可以将它们折叠在IDEA的控制台中。但是，这并不妨碍将 2095 行添加到我的日志文件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:04:52.853

从 Grails 2.0 开始，您可以在启动时添加新的 VM 参数：

```
-Dgrails.log.deprecated=false 
```

来源： http://jira.grails.org/browse/GRAILS-8024?page=com.atlassian.jira.plugin.system.issuetabpanels: [all-tabpanel](http://jira.grails.org/browse/GRAILS-8024?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:48:16.600

如果您愿意切换到 eclipse/sts，每个警告消息旁边都有一个内置的抑制选项，您可以在其中切换是否抑制类似的警告

# geometry - 如何判断一个粒子是否进入了一个区域？

> ID：13919523
> 
> 赞同：0
> 
> 时间：2012-12-17T18:01:46.537
> 
> 标签：geometry, physics

我正在使用python，但这实际上更像是一个算法问题。想象一下，我有四个通过弹簧连接的粒子，形成一个软体多边形。我想弄清楚第五个粒子何时何地与这个物体发生碰撞，这样我就可以让它们相互反弹。检测粒子是否进入区域的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:14:46.937

鉴于您的多边形总是由 4 个点组成，您不需要使用一般情况点/多边形相交算法，您可以将平行四边形分成两个三角形，并用第 5 个点[进行三角形内](http://www.blackpawn.com/texts/pointinpoly/default.html)的点测试。如果该点位于其中一个三角形内，则粒子已进入该区域。

# r - 具有特定输出时间的时间序列数据的插值

> ID：13919532
> 
> 赞同：7
> 
> 时间：2012-12-17T18:02:26.017
> 
> 标签：r, zoo, linear-interpolation

我有时间数据的数据库。我想插入数据以匹配特定的时间步长。

```
Id  Time                    humid   humtemp prtemp  press       t
1   2012-01-21 18:41:50     47.7    14.12   13.870  1005.70     -0.05277778
1   2012-01-21 18:46:43     44.5    15.37   15.100  1005.20     0.02861111
1   2012-01-21 18:51:35     43.2    15.88   15.576  1005.10     0.10972222
1   2012-01-21 18:56:28     42.5    16.17   15.833  1004.90     0.19111111
1   2012-01-21 19:01:21     42.2    16.31   15.986  1004.80     0.27250000
1   2012-01-21 19:06:14     41.8    16.47   16.118  1004.60     0.35388889
1   2012-01-21 19:11:07     41.6    16.51   16.177  1004.60     0.43527778 
```

我想获得具有以下时间步长的数据进行插值。

```
 Id                 Time       humid    humtemp prtemp  press        t   
    1   2012-01-21 18:45:00 ....    ...     .....   ....        ....
    1   2012-01-21 18:50:00 ....    
    1   2012-01-21 18:55:00 ....    
    1   2012-01-21 19:00:00 ....    
    1   2012-01-21 19:05:00 ....    
    1   2012-01-21 19:10:00 .... 
```

我尝试了不同的方法，但没有找到解决方案。例如我创建动物园对象。

```
 z <- zoo(MTS01m,order.by=MTS01m$Time)
   tstart2<-asP("2012-01-21 18:45:00")
   Ts<-1*60
   y <- merge(z, zoo(order.by=seq(tstart2, end(z), by=Ts)))
   xa <- na.approx(y)
   xs <- na.spline(y) 
```

但发生错误：

```
 Errore in approx(x[!na], y[!na], xout, ...) : 
   need at least two non-NA values to interpolate
   Inoltre: Warning message:
   In xy.coords(x, y) : si è prodotto un NA per coercizione 
```

我创建了一个二级索引 t，它从我想要数据的位置开始，但我不知道如何使用这个索引。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T05:14:46.160

试试这个（假设你的时间索引是 POSIXct）：

```
library(zoo)
st <- as.POSIXct("2012-01-21 18:45")
g <- seq(st, end(z), by = "15 min") # grid
na.approx(z, xout = g) 
```

有关`?na.approx.zoo`更多信息，请参阅。

**注意：**由于问题没有以可重复的形式提供数据，我们在这里这样做：

```
Lines <- "Id date Time humid humtemp prtemp press t1
1   2012-01-21 18:41:50     47.7    14.12   13.870  1005.70     -0.05277778
1   2012-01-21 18:46:43     44.5    15.37   15.100  1005.20     0.02861111
1   2012-01-21 18:51:35     43.2    15.88   15.576  1005.10     0.10972222
1   2012-01-21 18:56:28     42.5    16.17   15.833  1004.90     0.19111111
1   2012-01-21 19:01:21     42.2    16.31   15.986  1004.80     0.27250000
1   2012-01-21 19:06:14     41.8    16.47   16.118  1004.60     0.35388889
1   2012-01-21 19:11:07     41.6    16.51   16.177  1004.60     0.43527778"

library(zoo)
z <- read.zoo(text = Lines, header = TRUE, index = 2:3, tz = "")
st <- as.POSIXct("2012-01-21 18:45")
g <- seq(st, end(z), by = "15 min") # grid
na.approx(z, xout = g) 
```

给予：

```
 Id    humid  humtemp   prtemp    press            t1
2012-01-21 18:45:00  1 45.62491 14.93058 14.66761 1005.376 -1.501706e-09
2012-01-21 19:00:00  1 42.28294 16.27130 15.94370 1004.828  2.500000e-01 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-25T11:52:39.237

你可以看到这个过程如下：

1.  根据*数据*范围构建*序列。*
**   合并*序列*和*数据*。*   插值：常数或线性方法。*

 ***创建数据集：**

```
data1 <- read.table(text="1   2012-01-21 18:41:50     47.7    14.12   13.870  1005.70     -0.05277778
1   2012-01-21 18:46:43     44.5    15.37   15.100  1005.20     0.02861111
1   2012-01-21 18:51:35     43.2    15.88   15.576  1005.10     0.10972222
1   2012-01-21 18:56:28     42.5    16.17   15.833  1004.90     0.19111111
1   2012-01-21 19:01:21     42.2    16.31   15.986  1004.80     0.27250000
1   2012-01-21 19:06:14     41.8    16.47   16.118  1004.60     0.35388889
1   2012-01-21 19:11:07     41.6    16.51   16.177  1004.60     0.43527778",
 col.names=c("Id","date","Time","humid","humtemp","prtemp","press","t1"))
data1$datetime <- strptime(as.character(paste(d$date,d$Time, sep=" ")),"%Y-%m-%d %H:%M:%S") 
```

图书馆动物园：

```
library(zoo) 
```

**步骤1：**

```
# sequence interval 5 seconds
seq1 <- zoo(order.by=(as.POSIXlt( seq(min(data1$datetime), max(data1$datetime), by=5) ))) 
```

**第2步：**

```
mer1 <- merge(zoo(x=data1[4:7],order.by=data1$datetime), seq1) 
```

**第 3 步：**

```
#Constant interpolation
dataC <- na.approx(mer1, method="constant")

#Linear interpolation
dataL <- na.approx(mer1) 
```

**可视化**

```
head(dataC)
                    humid humtemp prtemp  press
2012-01-21 18:41:50  47.7   14.12  13.87 1005.7
2012-01-21 18:41:55  47.7   14.12  13.87 1005.7
2012-01-21 18:42:00  47.7   14.12  13.87 1005.7
2012-01-21 18:42:05  47.7   14.12  13.87 1005.7
2012-01-21 18:42:10  47.7   14.12  13.87 1005.7
2012-01-21 18:42:15  47.7   14.12  13.87 1005.7

head(dataL)
                       humid  humtemp   prtemp    press
2012-01-21 18:41:50 47.70000 14.12000 13.87000 1005.700
2012-01-21 18:41:55 47.64539 14.14133 13.89099 1005.691
2012-01-21 18:42:00 47.59078 14.16266 13.91198 1005.683
2012-01-21 18:42:05 47.53618 14.18399 13.93297 1005.674
2012-01-21 18:42:10 47.48157 14.20532 13.95396 1005.666
2012-01-21 18:42:15 47.42696 14.22666 13.97495 1005.657 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T19:40:47.687

我在 xts 包（或 zoo ）中找不到近似 ts 给定日期的函数。

所以，我的想法是在给定日期的原始 ts 中插入 NA 。

```
 ids <- as.POSIXct( align.time(index(dat.xts),60*5))     # range dates 
 # I create an xts with NA
 y  <- xts(x=matrix(data=NA,nrow=dim(dat.xts)[1],
                            ncol=dim(dat.xts)[2]),
                            order.by=ids)
 rbind(y,dat.xts) 
```

```
 humid humtemp prtemp  press           t
2012-01-21 18:41:50  47.7   14.12 13.870 1005.7 -0.05277778
2012-01-21 18:45:00    NA      NA     NA     NA          NA
2012-01-21 18:46:43  44.5   15.37 15.100 1005.2  0.02861111
2012-01-21 18:50:00    NA      NA     NA     NA          NA
2012-01-21 18:51:35  43.2   15.88 15.576 1005.1  0.10972222
2012-01-21 18:55:00    NA      NA     NA     NA          NA 
```

现在你可以像这样使用 na.approx 或 na.spline

```
na.approx(rbind(y,dat.xts))[index(y)]
                    humid humtemp prtemp   press    t
2012-01-21 18:45:00 45.62   14.93  14.67 1005.38 0.00
2012-01-21 18:50:00 43.62   15.71  15.42 1005.13 0.08
2012-01-21 18:55:00 42.71   16.08  15.76 1004.96 0.17
2012-01-21 19:00:00 42.28   16.27  15.94 1004.83 0.25
2012-01-21 19:05:00 41.90   16.43  16.08 1004.65 0.33
2012-01-21 19:10:00 41.65   16.50  16.16 1004.60 0.42 
```*

# vb.net - 为什么excel工作表名称中有（2）？

> ID：13919535
> 
> 赞同：0
> 
> 时间：2012-12-17T18:02:33.010
> 
> 标签：vb.net, excel, worksheet-function

我正在使用以下 VB.NET 代码在同一个工作簿中复制 Excel 工作表，但工作表名称每次都用 (2) 编写，这里有什么问题？

```
Dim inp as Integer
inp=Val(Textbox1.Text)

oWB = oXL.Workbooks.Open("D:\testfile.xlsx")
oSheet = oWB.Worksheets("base")
With oWB
   For i = 0 To inp - 1
     oSheet.Copy(Before:=.Worksheets(i + 1))
     With oSheet
       .Name = "INP" & i + 1
     End With
   Next
End With 
```

如何摆脱工作表名称上的“（2）”？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:29:29.227

只需引用您创建的工作表并重命名即可。你只需要行 Worksheets(i + 1).Name = "INP" & i + 1 见下文

```
Dim inp as Integer
inp=Val(Textbox1.Text)

oWB = oXL.Workbooks.Open("D:\testfile.xlsx")
oSheet = oWB.Worksheets("base")
With oWB
   For i = 0 To inp - 1
     oSheet.Copy(Before:=.Worksheets(i + 1))
     'reference and name worksheet
     Worksheets(i + 1).Name = "INP" & i + 1
   Next
End With 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:23:16.587

以下行：

```
 oSheet.Copy(Before:=.Worksheets(i + 1)) 
```

正在创建您指定的工作表的副本。当您创建工作表的副本时，excel 会添加`(2)`到名称中以防止出现重复的工作表名称。

例如，假设您有一张名为`base`您要复制的工作表。在处理了上面的那一行之后，你最终会得到一个名为的原始工作表`base`和一个名为`base (2)`.

然后，接下来的几行代码：

```
 With oSheet
       .Name = "INP" & i + 1
     End With 
```

只需重命名原始工作表。

试试这个而不是这两行：

```
 With oWB.Worksheets("base (2)")
       .Name = "INP" & i + 1
     End With 
```

# python - 从 FLASK 中的 html 表单中的 method="delete"

> ID：13919539
> 
> 赞同：2
> 
> 时间：2012-12-17T18:02:41.993
> 
> 标签：python, flask

我有一个 HTML 表单：

```
{% set delete_urls = url_for('store_add') ~ store_id ~ "?__METHOD_OVERRIDE__=DELETE" %}
<form action="{{delete_urls}}" name="delete" method="post" id="{{form_id}}" style="display:none"> 
```

在意见中：

```
class StoreAdd(MethodView):

    @login_required
    def delete(self,store_id):
        store_selected = request.args['store_id']

        qstr = "DELETE FROM store WHERE store_id=%d AND cust_id=%d"%(store_id,self.cust_id)
        h = pgexec(qstr,False,True)
        h.process()

        flash("deleted the store:%d"%(store_selected))
        return redirect(url_for('store_add'))

store_add = StoreAdd.as_view('store_add')
app.add_url_rule('/storeadd/',
                 defaults={'store_id': 0},
                 view_func=store_add,
                 methods=["GET","PUT"])
app.add_url_rule('/storeadd/',
                 view_func=store_add,
                 methods=["POST"])
app.add_url_rule('/storeadd/<int:store_id>',
                 view_func=store_add,
                 methods=['DELETE','PUT','GET']) 
```

当然实现了路由：

```
from werkzeug import url_decode
from flask import flash

class MethodRewriteMiddleware(object):

    def __init__(self, app):
        self.app = app

    def __call__(self, environ, start_response):
        if 'METHOD_OVERRIDE' in environ.get('QUERY_STRING', ''):
            args = url_decode(environ['QUERY_STRING'])
            method = args.get('__METHOD_OVERRIDE__')
            if method in ['GET', 'POST', 'PUT', 'DELETE']:
                method = method.encode('ascii', 'replace')
            environ['REQUEST_METHOD'] = method
        return self.app(environ, start_response) 
```

但仍然在提交删除表单时无法访问删除方法？出了什么问题？

编辑：

删除的问题如下。当我提交表单时，它似乎试图“发布”到 url：

```
/storeadd/13?__METHOD_OVERRIDE__=DELETE 
```

但是 POST url 规则说它只能是：/storeadd。因此它给出了 405 错误页面。因此，应该发生的覆盖永远不会发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:49:41.197

你有没有在你的烧瓶应用上应用这个中间件？

```
app.wsgi_app = MethodRewriteMiddleware(app.wsgi_app) 
```

# javascript - 将字符串中所有出现的字符的索引添加到数组

> ID：13919540
> 
> 赞同：0
> 
> 时间：2012-12-17T18:02:43.407
> 
> 标签：javascript, arrays, iteration, indexof

我正在尝试将特定字符的所有索引从字符串添加到数组中。

我有以下代码，但我不得不重新启动浏览器大约 10 次，因为它不起作用。

```
var xPositions = new Array();
var startPos = 0;
var string = "abcdexabcdexabcdexabcdexabcdexabcdexabcdex";

while (true) {

    var currentIndex = string.indexOf("x", startPos);

    if (currentIndex == -1) {
        break;
    }

    xPositions.push(currentIndex);
    startPos = currentIndex;

} 
```

我想过永远迭代，直到不再出现该角色，然后中断。

任何帮助/建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:04:50.857

尝试

```
var currentIndex = string.indexOf("x", startPos+1); 
```

我认为您一遍又一遍地获得相同的当前索引。“indexOf”从您指定的索引开始搜索，因此您必须相对于最后一次查找增加它。

为了将来参考，您可以考虑尝试使用带断点的调试器，这样的问题变得相对容易发现（即使只是做一些相关数据的 console.log 也可以使这种类型的错误变得更加完美 - 很难总是完美了解您以前从未使用过的功能将如何工作，看看它的行为是否符合您的期望并不羞耻）。

# php - 从页面选项卡 URL 检索参数

> ID：13919541
> 
> 赞同：1
> 
> 时间：2012-12-17T18:02:44.300
> 
> 标签：php, facebook, facebook-php-sdk, facebook-apps

我有一个带有 URL 的 facebook 标签应用程序。我想向 URL 传递一些 GET 参数。通常这是我执行签名请求以获取用户数据的方式：

```
if ($signed_request = parsePageSignedRequest()) {   
    $config = array(
        'appId'  => $app_id,
        'secret' => $app_secret,
    );

    $facebook = new Facebook($config);

    $ret_obj = $facebook->api('/me', 'GET', array());

    $theemail = $ret_obj['email'];
    $thename = $ret_obj['name'];
    $theusername = $ret_obj['username'];
} 
```

我想知道如何从 url 获取 GET 参数。网址如下所示：

> [https://www.facebook.com/pages/Msomepagey/23023424231927?sk=app_518726691484563&user=someuser](https://www.facebook.com/pages/Msomepagey/23023424231927?sk=app_518726691484563&user=someuser)

我想获得`user`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:43:16.137

您需要使用该[`app_data`](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)参数。Facebook 会读取此参数并在请求中将其传递给您的应用程序：

> `app_data`此外，`signed_request`如果在加载选项卡的 URL 中的原始查询字符串中设置了 app_data 参数，您的应用还将收到一个字符串参数 。它可能看起来像这样：“ `https://www.facebook.com/YourPage?v=app_1234567890&app_data=any_string_here`”。如果您控制链接的生成，则可以使用它来自定义呈现的内容。

附带说明一下，您可以使用 PHP-SDK 来获取签名请求，如下所示：

```
$signed_request = $facebook->getSignedRequest(); 
```

更多信息： [https ://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php#L489](https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php#L489)

另外你需要在调用之前检查你是否真的有一个有效的用户会话`/me`，我建议你看看 PHP-SDK[例子](https://github.com/facebook/facebook-php-sdk/blob/master/examples/example.php)。

# javascript - Javascript 在 iPad 上预加载图像

> ID：13919544
> 
> 赞同：0
> 
> 时间：2012-12-17T18:02:53.193
> 
> 标签：javascript, ipad, preloader

我的预加载器在 iPad 上似乎不稳定，尽管它在 PC 和 MAC 上的所有主要浏览器中都能完美运行。

有时它有效，有时它不工作，但如果我清除缓存，它在第一次尝试时总是失败..我真的被困在这里，所以任何帮助将不胜感激！

这是我的代码：

```
 function preloadimages(arr){

    var newimages=[], loadedimages=0
    var postaction=function(){}
    var arr=(typeof arr!="object")? [arr] : arr
    function imageloadpost(){
        loadedimages++
        if (loadedimages==arr.length){
            postaction(newimages) //call postaction and pass in newimages array as parameter
        }
    }
    for (var i=0; i<arr.length; i++){
        newimages[i]=new Image()
        newimages[i].src=arr[i]
        newimages[i].onload=function(){
            imageloadpost()
        }
        newimages[i].onerror=function(){
            imageloadpost()
        }
    }
    return { //return blank object with done() method
        done:function(f){
            postaction=f || postaction //remember user defined callback functions to be called when images load
        }
    }
    }

    $(document).ready(function(){

    preloadimages(['img/bg_joejuice.jpg',
                    'img/bg_facebook.jpg',
                    'img/bg_webshop.jpg',
                    'img/bg_spotify.jpg',
                    'img/btn_grey_down.png',
                    'img/btn_pink_down.png',
                    'img/coffee_active.png',
                    'img/juice_normal.png',
                    'img/sandwich_active.png',
                    'img/remove_down.png',
                    'img/inc_down.png',
                    'img/dec_down.png',
                    'img/checkbox_unchecked.png',
                    'img/hide_spotify.png',
                    'img/logo_facebook_active.png',
                    'img/logo_joejuice.png',
                    'img/logo_spotify_active.png',
                    'img/logo_webshop_active.png',
                    'img/checkbox_unchecked.png',]
    ).done(function(){
        console.log("loaded");
    });
}); 
```

编辑：抱歉没有指定..

我在控制台（相关）中没有收到任何错误，并且没有达到记录“已加载”评论的地步。

[http://md4a1215.keaweb.dk](http://md4a1215.keaweb.dk)

新编辑我有 19 张照片。它运行 forloop 19 次。当错误发生时，我通常会得到 18 个“onload”（但已经看到低至 16 个），而从来没有任何“onerror”。

看起来它是未触发的 onerror 功能（尽管它确实触发了 MAC 和 PC 上的所有主要浏览器，并且如果我只删除列表中包含的图像 thst id 之一，它确实会在 iPad 上触发）。 . 这听起来对吗？- 如果是这样，我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T17:24:41.720

您的代码似乎增加了加载图像 onerror 以及 onload。尝试这样的事情（这会在错误时重试预加载，如果最大尝试次数失败则跳过图像）

```
function preloadimages(arr) { 
    var newimages = [], loadedimages=0, attempts = 0, maxattempts = 5;
    var postaction=function(){}; 
    var arr=(typeof arr!='object') ? [arr] : arr; 
    function imageloadpost(){ 
        if (loadedimages == newimages.length){ console.log('Preloading of images complete. Loaded ' + newimages.length + ' images of ' + arr.length + '. Processing postaction.'); postaction(newimages); } 
    } 
    for (var i=0; i<arr.length; i++){ 
        newimages[i]=new Image(); 
        newimages[i].src=arr[i]; 
        newimages[i].onload=function(){ 
            console.log('Loaded ' + loadedimages + ' ' + this.src); 
            attempts=0; 
            loadedimages++;  
            imageloadpost(); 
        }; 
        newimages[i].onerror=function(){ 
            attempts++; 
            if(attempts < maxattempts){ 
                console.log('Failed to load: ' + this.src + ' trying again'); 
                this.src = this.src; 
            } 
            else{ 
                console.log('Skipping ' + this.src); 
                var tSrc = this.src;                
                var thisIndex = -1;
                for(var i=0; i <arr.length; i++)
                {
                    if(newimages[i].src === tSrc)
                    {
                        thisIndex = i;
                    }
                }
                attempts=0; 
                if(thisIndex >= 0)
                {
                    console.log('Removing ' + tSrc + ' from image list due to failure to load.');
                    newimages.splice(thisIndex,1);
                }
                else
                {
                    console.log('Error encountered, could not find ' + tSrc + ' in newimages.');
                    loadedimages++;
                }
                imageloadpost(); 
            } 
        };
    }  //end of for loop
    return { done: function(f) { postaction = f || postaction } } 
}

$(document).ready(function(){ 
    preloadimages(['img/image1.jpg','img/image2.jpg','img/image3.jpg']).done(function() { console.log('Function preloadimages is done'); });
}); 
```

# xml - Powershell循环通过xml创建一个锯齿状数组

> ID：13919548
> 
> 赞同：0
> 
> 时间：2012-12-17T18:03:02.390
> 
> 标签：xml, powershell, xml-parsing, powershell-3.0

我猜这很简单，我只是从 powershell 开始，在网上搜索了几个小时后似乎找不到简单的解决方案。

基本上我有以下xml文件

```
<Config>
<System>
<Server>
    <Name>host1</Name> 
    <Service>service1</Service>
    <Service>service2</Service>
</Server>
<Server>
    <Name>host2</Name> 
    <Service>service1</Service>
</Server>
</System>

<System2>
<Server>
    <Name>host1</Name> 
    <Service>service1</Service>
    <Service>service2</Service>
</Server>
<Server>
    <Name>host2</Name> 
    <Service>service1</Service>
     <Service>service2</Service>
     <Service>service3</Service>

</Server>
</System2>
</Config> 
```

而且我想将内容放入锯齿状的二维数组中，因此系统将如下所示：

*   （主机 1），（服务 1，服务 2）
*   （主机2），（服务1）

是否可以遍历每个元素并创建这样的数组？

我希望按上述方式存储数据，以便我可以使用 [0][0] 来引用主机名，然后使用 [1][1..x] 来引用该主机的所有服务。

这有任何意义吗？

非常感谢任何帮助或更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:12:46.200

您可能会考虑为此使用哈希表。您仍然可以遍历结果，并且可以按主机名查找结果，例如：

```
$xml = [xml]@'
    <Config>
    <System>
    <Server>
        <Name>host1</Name> 
        <Service>service1</Service>
        <Service>service2</Service>
    </Server>
    <Server>
        <Name>host2</Name> 
        <Service>service1</Service>
    </Server>
    </System>

    <System2>
    <Server>
        <Name>host1</Name> 
        <Service>service1</Service>
        <Service>service2</Service>
    </Server>
    <Server>
        <Name>host2</Name> 
        <Service>service1</Service>
        <Service>service2</Service>
        <Service>service3</Service>
    </Server>
    </System2>
    </Config>
'@

$ht = @{}
$hostnameNodes = $xml | Select-Xml -XPath '//Name'
foreach ($node in @($xml | Select-Xml -XPath '//Name'))
{
    $hostname = $node.Node.InnerText.Trim()
    $services = @($node.Node.ParentNode.Service)
    foreach ($service in $services)
    {
        $ht["$hostname"] += @($service.Trim())
    }
}

$ht 
```

输出：

```
Name                           Value                                    
----                           -----                                    
host1                          {service1, service2, service1, service2} 
host2                          {service1, service1, service2, service3} 
```

# c# - 当工作表名称以编程方式包含空格时如何从工作表中获取 Excel 工作表

> ID：13919549
> 
> 赞同：1
> 
> 时间：2012-12-17T18:03:10.220
> 
> 标签：c#, excel, worksheet

我试着

```
var tempSheet = wrksheets[sheetName] as Worksheet; 
```

其中`wrksheets`sheetName 类型是“带空格的工作表名称”

如果 sheetName 没有空间，它工作正常，但如果它有空间，我得到一个异常说无效索引。我只知道工作表的名称，不知道它的索引。我唯一能想到的就是遍历工作表并将每张工作表的名称与 sheetName 进行比较。效率不高，但有更好的方法吗？谢谢

编辑说工作表名称是“带空格的工作表名称”当我在工作表中引用一个单元格时说 A1，它将是“带空格的工作表名称”！当我在 wrksheets [sheetName] 中使用“带空格的工作表名称”时，A1，我得到一个无效的索引异常，我发现问题是我应该使用“带空格的工作表名称”作为 sheetName 而不是带有单引号的原始工作表名。
因此，我编写了一个函数来删除工作表名称中的无效/转义字符，然后再从 wrksheets 获取工作表，然后它就可以正常工作了。

```
 private string RemoveEscapeCharsFromSheetName(string sheetName)
    {
        //TODO: should remove all chars that are not allowed in Excel Sheet Name
        sheetName = sheetName.Trim(new char[] { ' ', '\'' });
        return sheetName;
    }

        sheet = RemoveEscapeCharsFromSheetName(sheet);
        var tempSheet = wrksheets[sheet] as Worksheet; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:43:07.817

用引号将工作表名称括起来。

```
var tempSheet = wrksheets["\"" + sheetName + "\""] as Worksheet; 
```

# android - Google Play 付费应用；应用程序是否仍向具有不可设定价格的国家/地区收费？

> ID：13919554
> 
> 赞同：0
> 
> 时间：2012-12-17T18:03:40.967
> 
> 标签：android, google-play

所以，我跳过了所有的障碍开始为我的应用程序收费，但是在为我即将发布的应用程序编写草稿信息时，我注意到在我能够分发到的所有国家/地区中，只有少数几个他们有能力设定个人价格。所有其他国家不仅没有为您提供该选项，而且没有显示任何货币转换。

Google 是否向他们收取默认货币（在我的情况下为 0.99 美元），或者他们是否进行他们所在国家/地区的购买日货币转换，或者他们只是免费分发它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:20:11.940

如果（且仅当）您已针对该特定国家/地区销售您的应用程序，您可以专门为该国家/地区设置价格。您可以手动设置价格，也可以使用自动填充根据汇率和您的本国货币价格在每个目标国家/地区设置价格。从[以多种货币销售应用程序](http://support.google.com/googleplay/android-developer/bin/answer.py?hl=en&answer=1169947)

> 对于您希望在其中销售应用的每个国家/地区，请选中该国家/地区旁边的框并输入价格。如果不输入价格，您无法定位特定国家/地区。如果您选择自动填充，Google Play 将使用基于您的本国货币价格的转换价格填充其他货币字段。提供自动填充价格只是为了您的方便——您可以选择使用它或设置您自己的价格。自动填充转换使用您设置价格当天的每日汇率；它不浮动。

如果您无法定位到该特定国家/地区，则可能是目前无法通过 Google Play 在那里销售应用程序。

# .htaccess - 当 URL 有多个参数时，在 .htaccess 中使用 {QUERY_STRING} 进行 301 重定向的正确语法是什么？

> ID：13919557
> 
> 赞同：0
> 
> 时间：2012-12-17T18:03:49.300
> 
> 标签：.htaccess, redirect, query-string

这是我希望使用此示例 URL 实现的示例：

```
URL: http://www.example.com/directory1/search/index.php?pagesize=10&keywords=illinois&ord=az&category=&start=90 
```

（关键字参数的位置可能会与其他参数的位置发生变化）

我希望这个重定向到：

```
URL: http://www.example.com/different_directory/search/keywords/illinois/ 
```

为了实现这一点，我尝试过：

```
RewriteCond %{QUERY_STRING}   keywords=([^&]*)
RewriteRule ^directory1/search/index.php/$  http://www.example.com/different_directory/search/keywords/%1/? [R=301,NC,L] 
```

这还没有解决。有人可以帮我解决我可能做错的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:08:18.770

我认为这只是您的`RewriteRule`. 它应该是：

```
^directory1/search/index.php$ 
```

# php - CakePHP 和 MySql 使用公共字段“productname”搜索多个表

> ID：13919559
> 
> 赞同：0
> 
> 时间：2012-12-17T18:03:53.673
> 
> 标签：php, mysql, cakephp, search, cakephp-1.3

在我的数据库中，我有多个具有相同字段“产品名称”的表，我希望能够创建一个搜索栏来搜索所有这些表。

> SELECT * FROM `mobiles`, '平板电脑', '电话', 'gopros' WHERE productname LIKE '%app%'

我知道查询不正确，但我正在尝试在 cakephp 中创建类似的内容。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T03:49:44.707

I think this query will provide you the answer

```
SELECT * FROM mobiles AS M, 'tablets' AS T, 'telephones' AS TP, 'gopros' AS G WHERE   M.productname LIKE '%app%' AND T.productname LIKE '%app%' AND TP.productname LIKE '%app%' AND G.productname LIKE '%app%' 
```

I hope mobiles tablest etc are tables having productname column

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:12:37.623

我认为您正在寻找[UNION](http://dev.mysql.com/doc/refman/5.1/en/union.html)子句，

```
(SELECT * from mobiles WHERE productname LIKE '%app%' )
UNION
(SELECT * from tablets WHERE productname LIKE '%app%' ) ...... 
```

# javascript - 由于 Google Analytics 跨域 javascript 链接跟踪，target="_blank" 未打开新页面

> ID：13919561
> 
> 赞同：0
> 
> 时间：2012-12-17T18:03:58.860
> 
> 标签：javascript, onclick, google-analytics, event-tracking

[我可能在leastartupcircle.com](http://leanstartupcircle.com)搞砸了`onClick`javascript 。我正在尝试将使用 javascript 的链接跟踪添加到我用属性标记的所有出站链接。我所做的一切都是阻止运作，也可能不会触发事件。`target="_blank"`

另一条信息`target="_blank"`在暂存和开发方面工作良好，因为我没有在这些服务器上显示谷歌分析初始化代码。这就是为什么我认为我的 javascript 不正确。

可以用一双更好的眼睛。我究竟做错了什么？

```
function parseUrl( url ) {
    var a = document.createElement('a');
    a.href = url;
    return a;
};

function getDomain( url ) {
    hostname = parseUrl(link).hostname
    splitHostname = hostname.split('.');
    if (splitHostname.length > 2) {
        domain = splitHostname[1] // Most likely the domain
    } else {
        domain = splitHostname[0]
    };
    return domain;
};

function trackLinks() {
    // Setup outbound link tracking and push events to GA based on link attribute linkTracking
    $('a').each(function () {
        link = $(this).attr('href');
        linkTracking = $(this).attr('linkTracking');
        if (linkTracking) {
            category = linkTracking.toLowerCase()
            action = getDomain(link);
            label = link;
            $(this).attr('target', '_blank').attr('onClick', '_gaq.push(["_link", "' + link + '"]); return false; ' +
                                                             'recordOutboundLink(this, "' + category + '", "' + action + '", "' + label + '"); return false;');
        };
    });
}; 
```

这是我的谷歌分析代码。为了使用跨域跟踪，谷歌建议进行一些修改：

```
var _gaq = _gaq || [];
var pluginUrl =
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
_gaq.push(['_require', 'inpage_linkid', pluginUrl]); // Enhanced Link Attribution
_gaq.push(['_setAccount', 'UA-30468280-1']);
_gaq.push(['_setDomainName', 'leanstartupcircle.com']);
_gaq.push(['_setAllowLinker', true]);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

// Delay outbound page load in order to record outbound links
function recordOutboundLink(link, category, action) {
  try {
    var myTracker=_gat._getTrackerByName();
    _gaq.push(['myTracker._trackEvent', category , action ]);
    setTimeout('document.location = "' + link.href + '"', 100)
  }catch(err){}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:07:21.570

return false 取消点击操作，这意味着链接将不起作用。您调用的第二种方法也永远不会触发，因为 return false 将退出。

以不同的方式查看代码

```
function anExample() {
    _gaq.push(XXX); 
    return false;  <-- I cause the function to exit                       
    recordOutboundLink(XXXX);  <-- I would never be called
    return false;
} 
```

如果您希望链接被关注，您需要`return false`从点击事件中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T22:09:01.963

[Google Analytics on Steroids相当](https://github.com/CardinalPath/gas)[优雅地](https://github.com/CardinalPath/gas/blob/master/src/plugins/outbound.js)解决了这个问题。

```
<script type="text/javascript">
var _gas = _gas || [];
_gas.push(['_setAccount', 'UA-YYYYYY-Y']); // REPLACE WITH YOUR GA NUMBER
_gas.push(['_setDomainName', '.mydomain.com']); // REPLACE WITH YOUR DOMAIN
_gas.push(['_trackPageview']);
_gas.push(['_gasTrackOutboundLinks']);

(function() {
var ga = document.createElement('script');
ga.type = 'text/javascript';
ga.async = true;
ga.src = '//cdnjs.cloudflare.com/ajax/libs/gas/1.10.1/gas.min.js';
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(ga, s);
})();
</script> 
```

# android - Android ListFragment onclick 问题

> ID：13919562
> 
> 赞同：2
> 
> 时间：2012-12-17T18:04:01.480
> 
> 标签：android, android-fragments, android-listfragment

我正在尝试使用 BaseAdapter 创建一个 ListFragment。但是当我使用自定义适配器时，我的 onItemClick 事件不起作用。我确实得到了我想要的视图，但我的项目点击没有使用 CustomAdapter 触发。

我正在使用以下代码

```
 public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    //following code do not fire on click event
        setListAdapter(new TestListAdapter(getActivity(), test)); //test is a Arraylist

//following code perfectly fine
setListAdapter(new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, new String[] { "One", "Two", "Three"}));

} 
```

这是我的 TestListAdapter

```
class TestListAdapter extends BaseAdapter {
    private LayoutInflater inflater=null;
    private ArrayList<Xyz> tests;
    private Context mContext;
    TestListAdapter(Context context, ArrayList<Xyz> tests){
        //super(context, tests);
         mContext=context;
        inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        this.tests=tests;
    }

    public int getCount() {
        // TODO Auto-generated method stub
        return tests.size();

    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return tests.get(position);
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        View view=convertView;
        if(convertView==null)
            view = inflater.inflate(R.layout.my_list_row, null);
        TextView tvName = (TextView)view.findViewById(R.id.testName); // title

        return view;
    }

} 
```

我已经覆盖了以下函数，这就是我知道它与 ArrayAdapter 一起工作的方式。

```
public void onListItemClick(ListView l, View v, int position, long id) {
    Log.d("XYZ","click.......");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:16:16.813

您的列表视图有一个 TextView。所以 onListItemClick() 不会触发。

将 TextView（或其他列表视图子项）的可聚焦、可点击属性设置为 false。

# jquery-ui-dialog - Jquery ui 对话框：我无法正确对齐输入

> ID：13919563
> 
> 赞同：0
> 
> 时间：2012-12-17T18:04:09.140
> 
> 标签：jquery-ui-dialog, fieldset

我用 jquery UI 创建了一个简单的对话框表单。

html代码：

```
<div id="newarticle-form" title="Cr&eacute;ation nouvel article">
    <p class="validateTips">Tous les champs sont requis.</p>

    <form>
    <fieldset>
        <p><label for="validite" class="label-class">Date de validit&eacute;</label>
        <input type="text" name="validite" id="validite" size="10" maxlength="10" class="text input-class" /></p>
        <label for="libelle" class="label-class">Libell&eacute;</label>
        <input type="text" name="libelle" id="libelle" size="50" maxlength="100" class="text input-class" />
        <label for="email" class="label-class">Description</label>
        <input type="text" name="description" id="description" value="" size="50" maxlength="250" class="text input-class" />
        <label for="pu" class="label-class">Prix unitaire</label>
        <input type="text" name="pu" id="pu" value="" size="10" maxlength="10" class="text input-class" />
    </fieldset>
    </form>
</div> 
```

和 javascript/jquery 代码：

```
$(function() {  
    $( "#newarticle-form" ).dialog({
        autoOpen: false,
        height: 400,
        width: 800,
        modal: true,
        resizable:false,
        buttons: {
            "Ajouter l'article": function() {
                var bValid = true;
                allFields.removeClass( "ui-state-error" );
            },

            "Fermer": function() {
                $( this ).dialog( "close" );
            }
        },

        close: function() {
            allFields.val( "" ).removeClass( "ui-state-error" );
        },
    });

    $( "#New" )
        .click(function() {
            $( "#newarticle-form" ).dialog( "open" );
    });

}); 
```

一些有用的 CSS ：

```
.label-class {
    display: block;
    width: 150px;
    float: left;
    text-align: right;
    padding-right: 10px;
}

.input-class {
    float: left;
    margin-bottom: 10px;
} 
```

一切正常……但这些领域完全杂乱无章。

为了正确对齐，我必须为每个字段提供与对话框宽度几乎相等的总大小！因此，必须将 5 个字符长的字段拉伸到最大的字段（50 个字符）：一切都很好对齐，但看起来很丑！

我能做些什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:20:08.040

添加`clear:left;`到您的`.label-class`

这将确保标签正确对齐。

# c# - C# - Windows XP 上未检测到事件 - USB 驱动器

> ID：13919569
> 
> 赞同：1
> 
> 时间：2012-12-17T18:04:30.873
> 
> 标签：c#, windows-7, insert, windows-xp, usb

我是 C# 的新手——三天前开始因为对 USB 驱动器有特殊需求。在这里和那里阅读我可以使用以下代码。我想知道用户何时将笔式驱动器插入 USB 端口。

唯一的问题是在 XP32（我测试的唯一 XP）上永远不会检测到该事件。在 Windows 7 上它可以完美运行。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Management;
using System.Diagnostics;
using System.Threading;
using System.IO;
using Microsoft.Win32;
using System.Security.Permissions;

namespace X
{
    class Program
    {

        static void Main(string[] args)
        {    
            ManagementEventWatcher watcher = new ManagementEventWatcher();
            WqlEventQuery query = new WqlEventQuery("SELECT * FROM Win32_VolumeChangeEvent WHERE EventType = 2");
            watcher.Query = query;
            watcher.Start();
            watcher.WaitForNextEvent();
         // DO something if a pen drive (or any storage device) is inserted.
         // Works fine on Windows 7
         // XP will ignore the event... 
        }
    }
} 
```

任何建议都将受到欢迎！

问候，

塞尔吉奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:20:30.740

[看起来](http://msdn.microsoft.com/en-us/library/system.management.managementeventwatcher.query%28v=vs.100%29.aspx "见“平台”")您需要 XP Service Pack 3 才能工作（x64 上的 SP2）。

# python - 在 Python 中处理字符串、多行字符串和列表的优雅方式

> ID：13919570
> 
> 赞同：0
> 
> 时间：2012-12-17T18:04:31.150
> 
> 标签：python, string, list, multiline

我在 Python 中有一个自定义日志函数，我想要一种 Pythonic 方式将输入拆分为多行。输入可以是字符串、多行字符串或列表。

这适用于字符串和多行字符串，但它不处理列表：

```
def log( text, indent = 0):
    indent_level = 4
    current_time = str( datetime.datetime.now().time())[0:-3]
    for line in text.splitlines():
        log_line = current_time + ' | ' + indent_level * indent * ' ' + str( line)
        print( log_line) 
```

你有什么建议也能够处理不复杂的列表

```
if( type( string) == list): 
```

到处测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:14:49.420

在方法开始时，使用鸭子类型对输入进行一次标准化。

```
try:
    # Assume you get multiline text
    lines = text.splitlines()
except AttributeError:
    # If your assumption was wrong, then you should already have a list
    lines = text 
```

# php - Facebook PHP SDK 回显当前用户的网络

> ID：13919576
> 
> 赞同：0
> 
> 时间：2012-12-17T18:05:02.063
> 
> 标签：php, arrays, facebook

我将如何确定用户的网络，以便以可以插入数据库的格式获得它们？我知道我必须为隶属关系提出 FQL 请求，但在那之后我有点迷失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:09:42.347

查看FQL`affiliations`中的表格字段（请参阅此处 > [http://developers.facebook.com/docs/reference/fql/user](http://developers.facebook.com/docs/reference/fql/user)）`user`

> **affiliations**
> *array*
> 被查询用户所属的网络。此字段中的状态字段将仅返回英文结果

# google-api - 当用户使用oauth 2登录谷歌时如何自动登录用户？

> ID：13919578
> 
> 赞同：0
> 
> 时间：2012-12-17T18:05:07.020
> 
> 标签：google-api, oauth-2.0, hybridauth, google-oauth

我正在使用[hybridauth 库](http://hybridauth.sourceforge.net/)。

[Hybridauth 文档说](http://hybridauth.sourceforge.net/userguide/HybridAuth_Sessions.html)通过存储会话数据可以实现持久会话。

假设我将用户会话数据存储在我的数据库中。它包含 oauth 令牌、oauth 刷新令牌等。

使用 oauth 令牌，可以在不询问用户权限的情况下联系 oauth 服务器。

现在到目前为止一切都很好。如果用户登录谷歌，现在如何自动登录用户？

`I mean do I have to use any cookies`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T00:39:36.413

我不能专门为您正在使用的那个库提供帮助，但是您看过这个吗？[https://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)

如果您也进行了登录授权，您将获得一个令牌，您可以使用它来获取 Google 用户的用户 ID

仅当访问令牌请求中存在[https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)范围时，此字段才存在。此字段的值是登录用户的不可变标识符。存储这个，你应该有一个持久的用户标识符。

# unix - freebsd网络程序编译

> ID：13919580
> 
> 赞同：0
> 
> 时间：2012-12-17T18:05:22.557
> 
> 标签：unix, networking, freebsd, bsd

我正在尝试在 freebsd 8 上编译一些简单的网络程序并遇到编译问题。我正在创建一个简单的客户端-服务器程序，但没有编译来自网络的功能或结构。

例如。我使用标准 socket() 调用来创建一个套接字，但我遇到了一个错误“被调用的对象套接字不是一个函数”。

如果我删除网络代码，那么我的玩具程序就会编译。为简单起见，我只是举了一个无法编译的简单示例。：

```
#include <stdio.h>                        
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
void main(){
 int socket = socket(PF_INET,SOCK_STREAM,IPPROTO_TCP);
 printf("Could create sockets without any issues.\n");
} 
```

我用“cc toy_prog.c -lc”编译它并给了我提到的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:37:33.737

一个非常简单的错误。您已经定义了一个与您尝试调用的外部函数同名的局部变量 ( `socket`)。试试下面的，你会得到同样的错误：

```
int f()
{
    return 0;
}

void main()
{
    int f = f();
} 
```

# c# - 循环中的更新语句

> ID：13919582
> 
> 赞同：-4
> 
> 时间：2012-12-17T18:05:52.843
> 
> 标签：c#, asp.net, sql, sql-server-2012

我在gridview中有这张表。

```
ID     Question_No          Question             Survey_ID
-----------------------------------------------------------

 1         1            Whats you name?             44
 2         2            How Old Are you?            44
 3         3       Whats your favorite hobby        44
 4         4          What did you study?           44 
```

我想在页面上添加一个删除按钮，如下所示：当我删除其中一个记录时，我想自动更新所有问题的 question_no，只要survey_ID 为 44。例如，如果我删除第二个问题，它会变成这样。

```
 ID     Question_No          Question             Survey_ID
-----------------------------------------------------------

     1         1            Whats you name?             44
     3         2       Whats your favorite hobby        44
     4         3          What did you study?           44 
```

我该怎么做呢？我认为它一定是一个循环，但我什至不知道如何处理它。

编辑：这是我的删除按钮代码

```
protected void RemoveQuestionButton_Click(object sender, EventArgs e)
        {
            try
            {
                DataRowView r;
                r = ((DataRowView)QuestionsGridView.GetRow(QuestionsGridView.FocusedRowIndex));
                Session["Question_ID"] = r[0];

                if (Session["Question_ID"] != null)
                {
                    SqlConnection connection = DatabaseConnection.GetSurveySystemConnection();
                    string delStatement1 = "DELETE FROM Questions WHERE ID =" + Session["Question_ID"];
                    string delStatement2 = "DELETE FROM Question_Options where Question_ID=" + Session["Question_ID"];
                    SqlCommand cmd = new SqlCommand(delStatement1, connection);
                    SqlCommand cmd2 = new SqlCommand(delStatement2, connection);
                    cmd.CommandType = CommandType.Text;
                    cmd2.CommandType = CommandType.Text;

                    try
                    {
                        cmd2.ExecuteNonQuery();
                        cmd.ExecuteNonQuery();
                        ConfirmLbl.ForeColor = System.Drawing.ColorTranslator.FromHtml("Green");
                        ConfirmLbl.Text = "Question & Options Deleted Successfully!";
                        QuestionsGridView.DataBind();

                    }
                    catch (Exception)
                    {
                        ConfirmLbl.ForeColor = System.Drawing.ColorTranslator.FromHtml("red");
                        ConfirmLbl.Text = "This Question Has Options Linked to it...";
                    }
                    finally
                    {
                        connection.Close();

                    }
                }
            }
            catch (Exception)
            {
                ConfirmLbl.ForeColor = System.Drawing.ColorTranslator.FromHtml("red");
                ConfirmLbl.Text = "You need to select a Question to edit...";
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:11:14.533

这可以通过单个更新语句来完成。

```
delete from question
   where id = 2;

with new_order as (
   select row_number() over (partition by survey_id order by question_no) as new_question_no,
          question_no as old_question_no, 
          id
   from question
) 
update question 
  set question_no = nq.new_question_no
from new_order nq
where nq.id = question.id
  and survey_id = 44;

commit; 
```

这是一个 SQLFiddle 示例：[http ://sqlfiddle.com/#!6/0a1e7/1](http://sqlfiddle.com/#!6/0a1e7/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:41:21.567

您所需要的只是一个查询 db 表并将结果集设置/绑定到您的 gridview 的函数。然后，当您删除一个问题并将其从数据库中删除时，调用该函数并将您的 gridview 重新绑定到新的结果集。

您可以在 sql 查询中使用[分区 ROW_NUMBER](http://msdn.microsoft.com/en-us/library/ms186734.aspx)来创建行号的连续列。您可以查看其中的一些示例来帮助您执行此操作。

# delphi - 识别页面中结果数量的数学

> ID：13919585
> 
> 赞同：2
> 
> 时间：2012-12-17T18:05:55.493
> 
> 标签：delphi, math

无论出于何种原因，我无法弄清楚如何识别给定页面中的结果数量。我有一个数据列表和一个属性，该属性`PageSize`标识一页中应该有多少结果。假设有 120 个结果，页面大小为 25。这意味着总共应该有 5 个页面，前 4 个页面有 25 个记录，第 5 个只有 20 个记录。现在，我得到的结果是全面的，例如，`50`当它应该是时我可能会得到`20`。

我正在编写此函数以返回指定页面中的结果数，但我似乎无法正确计算简单的数学（我从来不擅长数学）。每页没有实际的列表，我可以简单地阅读`Count`以识别该页面中的记录数 - 我需要使用此函数动态计算它。

请参阅下面的代码行`CALCULATION DONE HERE`：

```
function TMyData.SizeOfPage(const Index: Integer): Integer;
begin
  //Index = Page Number (0 ... MAX)
  //Result = Number of results in given page
  //PageCount = Total number of pages (from other function)
  //RecordCount = Total number of records (all pages)
  Result:= 0; //Default
  //Validate index bounds
  if (Index >= 0) and (Index < PageCount) then begin
    if Index < PageCount-1 then begin
      //Just return full size of one page
      Result:= PageSize;
    end else begin
      //Return number of records in the last page
      //--- CALCULATION DONE HERE ---
      Result:= RecordCount - Trunc(RecordCount / PageSize);
    end;
  end else begin
    raise Exception.Create('Page index out of bounds ('+IntToStr(Index)+')');
  end;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T18:11:32.797

我认为没有理由在这里使用浮点运算。如果整数算术足够，我总是避免浮点算术。

我会这样写：

```
ItemsOnLastPage := 1 + (RecordCount-1) mod PageSize; 
```

或者这个版本：

```
ItemsOnLastPage := RecordCount - (PageCount-1)*PageSize; 
```

这特别容易理解。您减去所有整页上显示的记录，剩下的是最后一页上的记录。

就目前`PageCount`而言，您可以这样计算：

```
PageCount := (RecordCount+PageSize-1) div PageSize; 
```

感谢@Rob 的洞察力。

# r - 使用 data.table 根据 R 中的两个分组变量进行汇总

> ID：13919587
> 
> 赞同：7
> 
> 时间：2012-12-17T18:06:15.213
> 
> 标签：r, data.table

我试图`data.table`在 R 中使用来总结以下数据表：

```
SiteNo Var1 Var2 Var3 ... Var18 Group
1      0.1 0.3  1         0.3     1
2      0.3 0.1  0.9       0.2     1
etc. 
```

有 668,944 个观测值、43 个站点、3 个组和 19 个变量。我想得到一个函数的结果（例如，`mean`），它按站点和组汇总每个列/变量。所以应该有 43 个站点 x 3 个组 x # 的摘要统计信息（例如，`mean`）。我使用了以下代码：

```
e.dt<-data.table(e)
setkey(e.dt, Group) # set key to group number

# get mean for each column/variable
e.dt.mean<-e.dt[,lapply(.SD,mean), by="SiteNo"] 
```

使用上述方法，我得到了 43 个站点，但不是我所追求的 3 个组。我可以将原始数据表分成三组，但想知道是否有一种方法可以使用`data.table`.

我仍然在 RTM 上`data.table`，但到目前为止我还没有找到上述问题的答案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T18:31:18.263

尝试将您的密钥设置为“Group”和“SiteNo”：

从下面的例子`?key`：

```
keycols <- c("SiteNo", "Group")
setkeyv(e.dt, keycols) 
```

然后，`by`用作：

```
e.dt[, lapply(.SD,mean), by = key(e.dt)] 
```

或者，您可以使用：

```
e.dt[, lapply(.SD,mean), by = "SiteNo,Group"] 
```

或者

```
e.dt[, lapply(.SD, mean), by = list(SiteNo, Group)] 
```

# javascript - 如何在 JavaScript 中向 DOM 插入随机对象文字？

> ID：13919588
> 
> 赞同：3
> 
> 时间：2012-12-17T18:06:16.613
> 
> 标签：javascript, dom

我正在为内部包含 DOM 节点并通过额外功能方法增强的表单输入字段制作自定义类包装器。

我的问题是是否有与 .toString() 类似的方法用于附加到 DOM，因为我想直接将我的对象插入 DOM 而不是调用其他方法

在其他作品中，这是我所拥有的示例：

```
function A () {
  this.element = documenet.createElement('input');
  // blah blah logic
  this.toString = function () {
    return '<input type="'+this.element.type+'" value="'+this.element.value+'" />';
  }
  // a similar method to this i'ld like
  this.toString = function () {
    return this.element;
  }
} 
```

这样我就可以按如下方式使用它：

```
var a = new A();

// this works as it calls .toString(), but it is a hack and it is not pretty
document.body.innerHTML += a;

// this is what i'd want to be able to do:
document.body.appendChild(a);

// this is what **I AM REALLY TRYING TO AVOID:**
document.body.appendCHild(a.toElement()); 
```

您不能简单地从 DOM 节点继承，因为它不是公共类

我试过看其他问题，但似乎没有答案......任何想法都会受到高度欢迎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:30:03.983

你不能从原生 DOM 构造函数继承，但是你可以从 jQuery 继承你的包装类！

```
function A () {
    if (!(this instanceof A)) return new A(); // fix wrong constructor invocations
    if (this.length) { // shouldn't be set yet, so another odd invocation:
        var empty = Object.create(A.prototype); // a new, but *empty* instance
        empty.length = 0; // explicitly set length
        return empty;
    }

    this[0] = document.createElement('input');
    …
    // or you might want to call $.fn.init
    this.context = undefined; // not sure whether
    this.selector = ""; // we need those two lines
    this.length = 1; // but the length is obligatory
}
A.prototype = Object.create($.fn, {constructor:{value:A,configurable:true}});
A.prototype.toString = function () {
    return '<input type="'+this[0].type+'" value="'+this[0].value+'" />';
} 
```

有了这个，你可以只是`$(document.body).append(new A)`或`new A().appendTo(document.body)`等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:17:53.443

您可以将其视为工厂方法，而不是将`A`其视为对象：http: [//jsfiddle.net/fnK56/2/](http://jsfiddle.net/fnK56/2/)

```
// We can modify ele however we like, even overriding the toString method.
function CustomElement() {
    var ele = document.createElement("input");
    ele.type = "button";
    ele.value = "Testing";
    // do stuff to ele
    ele.CustomProperty = {one:"two", three:"four"}; // we can even add custom properties that will persist with that DOM node. 

    ele.toString = function(){
        return '<input type="'+this.type+'" value="'+this.value+'" />';
    };

    return ele;
}

var tmp = CustomElement(); // get us a new CustomElement

document.body.innerHTML += tmp; // this works because of the overridden toString
tmp.id = "Test";
document.body.appendChild(tmp);​ // this works because tmp is still a DOM input node.

console.log(tmp.CustomProperty); // Object {one: "two", three: "four"} 
console.log(document.getElementById("Test").CustomProperty); // Object {one: "two", three: "four"} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T18:19:45.343

这不适用于所有浏览器（请参阅[http://www.meekostuff.net/blog/Overriding-DOM-Methods/](http://www.meekostuff.net/blog/Overriding-DOM-Methods/)）以很好地讨论选项，但是：

```
HTMLElement.prototype._appendChild = HTMLElement.prototype.appendChild;
HTMLElement.prototype.appendChild = function(target)
{
    if(target.toElement)
    {
        this._appendChild(target.toElement());
    }
    else
    {  
        //attempt to do it the old fashioned way
        this._appendChild(target);
    }

} 
```

这使您的语法：

```
// this is what i'd want to be able to do:
document.body.appendChild(a); 
```

并隐藏了“toElement()”在内部被调用的事实。

我要指出，当您开始达到这种复杂程度时，使用像 jQuery 这样的框架开始变得有意义。

# c# - 在 SemanticZoom 的 GridView 中获取单击的项目

> ID：13919594
> 
> 赞同：1
> 
> 时间：2012-12-17T18:06:47.440
> 
> 标签：c#, xaml

我的 Windows 8 应用程序中有一个非常基本的 SemanticZoom 实现。此应用程序具有以下 xaml：

```
<SemanticZoom x:Name="semanticZoom" VerticalAlignment="Stretch" IsZoomedInViewActive="False">
  <SemanticZoom.ZoomedOutView>
    <GridView x:Name="myGridView" ItemsSource="{Binding Source={StaticResource orderViewSource}}" ScrollViewer.IsHorizontalScrollChainingEnabled="False" SelectionMode="None" IsItemClickEnabled="True" ItemClick="orderGridView_ItemClick">
    </GridView>
  </SemanticZoom.ZoomedOutView>

  ...
</SemanticZoom> 
```

奇怪的是，`orderGridView_ItemClick`当我单击一个项目时，该事件永远不会触发。我听说语义缩放控件可以捕捉到它，并且不会将其冒泡。如果是这样的话，我仍然应该有一种方法可以查看选择了哪个项目。如何确定用户从控件中单击的`ZoomedOutView`项目`SemanticZoom`？

谢谢！

# video - 将 jw 播放器嵌入到 wordpress 不接受高度

> ID：13919595
> 
> 赞同：1
> 
> 时间：2012-12-17T18:06:48.213
> 
> 标签：video, video-streaming, jwplayer

我通过 WordPress 插件安装嵌入了 JWPlayer，并为它创建了一个自定义播放器。当我将播放器应用到我的页面时，它会忽略高度，并且始终以相同的尺寸（宽度/高度）显示。

正因为如此，我卸载了插件，重新安装了它，我什至重新安装了 WordPress 来解决这个问题，但没有希望。谁能告诉我可能是什么问题？

代码的链接是：

[http://www.jasdigitalmedia.com/live/](http://www.jasdigitalmedia.com/live/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:03:47.853

我有同样的问题。它需要有一个 id="jwplayer-1-div" 和 class="your custom name" 的特殊 div，除了嵌套在其中之外，它是空的，它是另一个名为 id="jwplayer-1" 的 div，它是空的.

现在它需要一些 jwplayer javascript 才能让它工作，所以你最好的办法是使用短标签代码把它全部放在那里。

我在循环主题中使用了一个特殊功能，如下所示：

echo jwplayer_tag_callback("[jwplayer config='libplayer' file='$movie' image='$preview']");

现在它正在使用我的自定义播放器。

我还没有完成，因为我不想嵌入它，我只想要一个链接。

# android - 将位图设置为 ImageView

> ID：13919598
> 
> 赞同：0
> 
> 时间：2012-12-17T18:07:10.053
> 
> 标签：android

我从 WebService 下载了位图，并将其设置为 ImageView。ImageView 的高度设置为 120dip，宽度设置为 FILL_PARENT，因此它填充了屏幕的整个宽度。现在我想拉伸位图以适应 ImageView 的宽度，但是如果位图的高度大于 ImageView 的高度，我希望图像的其余部分从 ImageView 的顶部和底部流出。所以在某种程度上，就像我在图像前面有一个框架，而图像的唯一可见部分是框架的内容。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:12:53.690

[在 ImageView ScaleType](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)上查看 Android 开发人员

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:13:18.813

您对[scale_type 枚举](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)感兴趣。使用`CENTER_CROP`.

这是完整的例子：

```
<ImageView android:layout_width="fill_parent"  
               android:layout_height="120dp"  
               android:layout_gravity="center"  
               android:src="@drawable/eureka"  
               android:scaleType="centerCrop">  
</ImageView> 
```

这里也是一个[很酷的可视化](http://etcodehome.blogspot.com/2011/05/android-imageview-scaletype-samples.html)所有可能的选项`ImageView`。

# java - 从 rdf 文件中获取数据

> ID：13919603
> 
> 赞同：-1
> 
> 时间：2012-12-17T18:07:47.223
> 
> 标签：java, file-io, rdf, jena, ontology

> **可能重复：**
> [Java - 使用 Jena APi - 从 RDF 文件中获取数据](https://stackoverflow.com/questions/13915865/java-using-jena-api-get-data-from-rdf-file)

我正在使用 Java 和 Jena API。

我有`Person`具有数据类型属性的类`hasFirstName`, `hasLastName`, `hasDateOfBirth`, `hasGender`。

这是一个人在我的 RDF 文件中的表示方式。

```
<rdf:Description rdf:about="http://www.fam.com/FAM#Bruno04/02/1980 ">
    <j.0:FAMhasGender>H</j.0:FAMhasGender>
    <j.0:FAMhasDateOfBirth>04/02/1980</j.0:FAMhasDateOfBirth>
    <j.0:FAMhasLastName>DS </j.0:FAMhasLastName>
    <j.0:FAMhasFirstName> Bruno</j.0:FAMhasFirstName>
 </rdf:Description> 
```

我想为每个人获取名字、性别、出生日期并将该信息写入文本文件。我遇到的问题是它只写了他在 rdf 文件中找到的第一个女人/男人，但女人和男人不止一个。

你能解释一下我该如何解决这个问题吗？非常感谢你。

```
ExtendedIterator instances = onto.person.listInstances();
Individual instance = null;
Individual firstInstance = null;
while (instances.hasNext()) {
    instance = (Individual) instances.next();

    gen = instance.getPropertyValue(onto.hasGender).toString();
    fname = instance.getPropertyValue(onto.hasFirstName).toString();
    dd = instance.getPropertyValue(onto.hasDateOfBirth).toString();

    writeFile(fname, dd, genr);}

// Write text file
public void writeFile(String fn, String dbir, String gn) {
    String fileout = "D:/file1.txt";
    String firstName = fn;
    String dateB = dbir;
    String gender = gn;

    BufferedWriter out;
    try {
        out = new BufferedWriter(new FileWriter(fileout, true));

        if (gender.equals("F")) {
            out.write("[label= \"" + firstName + " \"\n\n\"D.Naiss:" + dnai1 + "\", " + shape + "]");
        } else if (gender.equals("M")) {
            out.write("[label= \"" + firstName + " \"\n\n\"D.Naiss:" + dnai1 + "\", " + shape2 + "]");
        }

        out.newLine();

        // flushes and closes the stream
        out.close();
    } catch (IOException e) {
        System.out.println("There was a problem:" + e);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T00:56:56.030

您的问题与 Jena 或 RDF 无关，而是您的编码中的逻辑错误。

您`writeFile()`在 while 循环中调用它会打开一个新文件，写入当前条目并关闭文件。因此，您一次用一个条目反复覆盖您的文件，因此您最终只会在文件中找到一个人。

您需要重构代码以在 while 循环之前打开文件一次，让该`writeFile()`方法简单地添加到该文件（而不是关闭它），然后在 while 循环之后关闭文件。

同样正如@Udo Kilmaschewski 在您明显的重复中指出的那样，该`genr`变量未在您显示的代码中定义，因此您似乎没有正确地将性别从您的 while 循环传递给`writeFile()`函数。

# linux - 我的 CIFS 挂载是否存在时钟差异？

> ID：13919604
> 
> 赞同：1
> 
> 时间：2012-12-17T18:07:52.660
> 
> 标签：linux, shell, ntp, cifs

我在我的 Linux 机器上安装了一个 Windows 共享，`cifs`并且由于机器之间的时差而遇到一些问题。例如，在 Emacs 中处理文件时，如果我尝试保存更改，Emacs 会警告我该文件自上次读入后已更改。

我的猜测是，当我保存文件时，更改会传回托管共享的机器，并且修改时间会根据该机器的时钟更新。也就是说，我不熟悉如何`cifs`工作。如果这是一个合理的解释，我该如何解决这个问题？如果不是，那么根本问题可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:17:52.560

这是一个合理的解释。解决方案是使用 ntp 同步时钟。我不知道有什么好的方法可以解决这个问题。

# android - 如何在选项卡布局中显示切换选项卡的进度对话框

> ID：13919605
> 
> 赞同：0
> 
> 时间：2012-12-17T18:07:54.890
> 
> 标签：android, tabs, progressdialog, tabwidget

我在这里阅读了许多解决方案，以显示有关切换选项卡的进度对话框，因为某些从服务器获取数据的选项卡在此期间需要时间，我需要显示进度对话框，请建议将代码放在哪里来完成我的任务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:38:43.433

启动一个异步，它在后台获取数据并在 onprogressupdate 方法中管理进度对话框（甚至可能更好的进度布局）。如果你对它进行子类化，它将相当容易实现。[这是一个链接](http://developer.android.com/reference/android/os/AsyncTask.html)。

添加这个

```
private class myAsyncTaskClass extends AsyncTask{

    @Override
    protected void onProgressUpdate(Object... values) {
        // TODO Add updates to your progress dialog here. 
        super.onProgressUpdate(values);
    }

    @Override
    protected Object doInBackground(Object... params) {
        // TODO Add your fetching data here
                    //Use publish progress to call the onProgress update passing whatever you want. 
                    publishProgress(values);

        return null;
    }} 
```

# sql - 左外连接获取所有行？

> ID：13919611
> 
> 赞同：0
> 
> 时间：2012-12-17T18:08:13.673
> 
> 标签：sql, ms-access, join

我正在使用一个访问数据库，并且我有一些像这样设置的表。

```
Table1(Table1Id, Field1, Field2, ...)
Table2(Table2Id, Table1Id, AuditDate, Field1, Field2, ...) 
```

我正在尝试选择 Table1 中的每条记录，以及 Table2 中具有最新 AuditDate 的记录。如果表 2 中没有条目可以绑定到表 1，我只想填充表 1 中的一行内容和一堆空字段，表 2 中的数据将来自这些字段。这是我到目前为止的查询。

```
SELECT Table1.TableId, 
       Table1.Field1, 
       Table1.Field2, 
       Table2.Field1, 
       Table2.Field2 
FROM Table1 
LEFT OUTER JOIN Table2 ON Table1.TableId = Table2.Table1Id 
WHERE Table2.AuditDate = (SELECT MAX(AuditDate) FROM Table2 WHERE Table1.TableId = Table2.Table1Id) 
```

这样做的问题是它只返回两条记录。Table2 中只有两个条目，但我希望它为 Table1 中的每条记录返回一行数据，而不仅仅是在 Table2 中找到匹配项的记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:11:43.983

问题是这一行：

```
WHERE Table2.AuditDate = ... 
```

`Table2`在不存在条目的情况下，`AuditDate`将为 NULL。因此，您需要对此进行测试：

```
WHERE Table2.Table2Id IS NULL OR Table2.AuditDate = ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:11:13.533

猜猜如果您删除外部，您将获得表 1 中的每个条目。

编辑：但是如果您在表 2 中的条目比在表 1 中的条目更多，那么它仍然是一个问题。也许尝试完全加入？

# java - 关于 Android 对话框

> ID：13919613
> 
> 赞同：0
> 
> 时间：2012-12-17T18:08:30.813
> 
> 标签：java, android, progressdialog

我使用来自[http://startandroid.ru/uroki/vse-uroki-spiskom/128-urok-67-dialogi-progressdialog.html的示例](http://startandroid.ru/uroki/vse-uroki-spiskom/128-urok-67-dialogi-progressdialog.html)

我们有两个按钮。
onClick 第一个按钮 - 显示一些进度对话框。
onClick 第二个按钮 - 显示一些进度对话框。

如果我在第二个按钮之后快速单击第一个按钮，那么它会显示两个进度对话框。如何禁用这种可能性？（当单击其中一个按钮时禁用这两个按钮是否很好，或者禁用LinearLayout，...）

字符串.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<string name="dflt">Обычный</string>
<string name="horiz">Горизонтальный</string>
<string name="app_name">ProgressDialog</string>
</resources> 
```

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical">
<Button
 android:id="@+id/btnDefault"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:text="@string/dflt"
 android:onClick="onclick">
</Button>
<Button
 android:id="@+id/btnHoriz"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:text="@string/horiz"
 android:onClick="onclick">
</Button>
</LinearLayout> 
```

MainActivity.java：

```
package ru.startandroid.develop.p0671progressdialog;

import android.app.Activity;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.view.View;

public class MainActivity extends Activity {

  ProgressDialog pd;
  Handler h;

  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

  }

  public void onclick(View v) {
    switch (v.getId()) {
    case R.id.btnDefault:
      pd = new ProgressDialog(this);
      pd.setTitle("Title");
      pd.setMessage("Message");
      // добавляем кнопку
      pd.setButton(Dialog.BUTTON_POSITIVE, "OK", new OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
        }
      });
      pd.show();
      break;
    case R.id.btnHoriz:
      pd = new ProgressDialog(this);
      pd.setTitle("Title");
      pd.setMessage("Message");
      // меняем стиль на индикатор
      pd.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
      // устанавливаем максимум
      pd.setMax(2148);
      // включаем анимацию ожидания
      pd.setIndeterminate(true);
      pd.show();
      h = new Handler() {
        public void handleMessage(Message msg) {
          // выключаем анимацию ожидания
          pd.setIndeterminate(false);
          if (pd.getProgress() < pd.getMax()) {
            // увеличиваем значения индикаторов
            pd.incrementProgressBy(50);
            pd.incrementSecondaryProgressBy(75);
            h.sendEmptyMessageDelayed(0, 100);
          } else {
            pd.dismiss();
          }
        }
      };
      h.sendEmptyMessageDelayed(0, 2000);
      break;
    default:
      break;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:36:30.170

无需禁用视图，只需创建一个布尔变量，在单击对话框时将其设置为 true。在您的 onClick 函数中，您可以检查是否已经有一个活动对话框。然后您可以在对话框中添加一个 onDismissListener 并重置布尔变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:32:24.663

您是说单击另一个按钮时，您希望当前进度对话框在显示新按钮之前消失吗？我认为您需要关闭对话框，如果它正在显示，然后通过简单的检查`onClick()`

```
 public void onclick(View v) {
     if (pd != null) {
        pd.dismiss();
     }
     switch (v.getId()) {
     case R.id.btnDefault:
     .... 
```

# javascript - jQuery 是如何抓取元素的？

> ID：13919616
> 
> 赞同：0
> 
> 时间：2012-12-17T18:09:04.547
> 
> 标签：javascript, jquery, asp.net, html

我正在使用 jQuery 选择所有以某个前缀开头的锚标记，然后为每个标记调用一个函数：

```
$('a[id^="lblMyLabel"]').each(function() {
        doSomething(this.id);
}); 
```

在 doSomething 内部，我进行了 ajax 调用以获取一些数据。我假设 jQuery 会从上到下扫描页面，抓取所有以 lblMyLabel 开头的锚标记并按该顺序对它们进行操作，但顺序似乎是随机的。有谁知道这个选择是如何发生的？

**编辑：**所以我同意你们可以从上到下挑选项目。但是，如果我在响应 ajax 调用的 WebMethod 上设置一个断点，则不会按该顺序获取 ID。该顺序是如何确定的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T18:10:37.433

在这种情况下，在现代浏览器中，jQuery 使用

```
document.querySelectorAll('a[id^="lblMyLabel"]') 
```

允许浏览器完成工作。

在除 .prev 之类的方法之外的所有情况下，jquery 会按照元素在文档中出现的顺序返回元素。

[https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T18:12:20.820

像这样创建的 jQuery 对象中的 DOM 元素的顺序（以及因此`.each()`被调用的顺序）在文档中从上到下是连续的，但是如果您同时执行一堆 ajax 调用，则来自那些的响应无法保证 ajax 调用以任何特定顺序进行，因为这取决于服务器上每个响应的处理时间。

如果您想按顺序处理 ajax 响应，那么您可能需要为它们中的每一个提供某种序列标识符，将它们全部排队，并且仅在您已经处理过之前的项目 N 之后才处理项目 N。最简单的方法是根据原始序列号将所有结果排列在一个数组中，然后在所有结果完成后按顺序处理所有结果。有更复杂的方法可以在之前的所有 N 到达并被处理后立即处理 N 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:19:40.840

选择 CSS id 时需要使用 # 字符，如下例所示：

var messagePara = $('#message');

# java - 简单的 KeyListener 不起作用

> ID：13919622
> 
> 赞同：0
> 
> 时间：2012-12-17T18:09:37.620
> 
> 标签：java, swing, jframe, keylistener

我正在研究一个非常简单的 Java 项目，试图了解如何使用 KeyListener。我创建了一个 Main 类和一个 KeyListener、MouseListener 类。当我按下键盘键时，我想发生一些事情。到目前为止，当我单击时，唯一有效的是“你好”。

这是我的代码：

```
import javax.swing.JFrame;
import javax.swing.JPanel;

public class KeyPractice{

    public static void main(String[] args) {

        JFrame frame = new JFrame();
        JPanel panel = new JPanel();

        panel.addKeyListener(new KeyEar());
        panel.addMouseListener(new KeyEar());

        frame.add(panel);

        frame.setVisible(true);
        frame.setSize(400, 400);
    } 
} 
```

和 Keylistener 类....

```
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;

public class KeyEar implements KeyListener, MouseListener {

    public KeyEar(){

    }

    @Override
    public void mouseClicked(MouseEvent arg0) {
        System.out.println("Hello");
    }

    @Override
    public void mouseEntered(MouseEvent arg0) {
        // TODO Auto-generated method stub
    }

    @Override
    public void mouseExited(MouseEvent arg0) {
        // TODO Auto-generated method stub
    }

    @Override
    public void mousePressed(MouseEvent arg0) {
        // TODO Auto-generated method stub
    }

    @Override
    public void mouseReleased(MouseEvent arg0) {
        // TODO Auto-generated method stub
    }

    @Override
    public void keyPressed(KeyEvent arg0) {
        System.out.println("Hello");
    }

    @Override
    public void keyReleased(KeyEvent arg0) {
        System.out.println("Hello");
    }

    @Override
    public void keyTyped(KeyEvent arg0) {
        System.out.println("Hello");
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T18:13:56.380

*   [JPanel](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)不可聚焦[JComponent](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html)，必须添加`Object`/`JComponents`可聚焦或与之交互`KeyEvents`

*   [KeyListener](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)不是[Swing JComponents 的正确监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/index.html)，因为 Swing 已替换为[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T18:13:43.523

A`JPanel`无法集中精力`KeyListener`工作。

首选方法是使用[Key Bindings](http://download.oracle.com/javase/tutorial/uiswing/misc/keybinding.html) for Swing。即使组件没有焦点，您也可以将 Action 映射到 KeyStroke。

[键绑定示例](http://tips4java.wordpress.com/2008/10/10/key-bindings/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-30T12:59:19.150

我有类似的问题，但它很容易解决，但你必须找到如何解决它女巫不是那么容易的任务：D

那么如何解决这个问题？我只是将所有按钮设置为可聚焦的错误。 `instanceOfYourButton.setFocusable(false);` 就是这样

# actionscript-3 - 已到达 Adob e AIR SQLResult 侦听器，但 SQLite 中没有数据

> ID：13919625
> 
> 赞同：0
> 
> 时间：2012-12-17T18:09:49.860
> 
> 标签：actionscript-3, sqlite, air

我目前正在开发一个使用 AIR 和 Flex 的项目，该项目使用远程数据源将数据本地保存在 SQLite 数据库中。目前，我试图减轻很多复制和粘贴代码，所以由于我们已经使用了带有几个常见查询的 DAO 模式和一个创建 SQLStatement 值的类型，我想我甚至可以简化我们的代码库更多的。

我应用了适配器模式以允许执行更广泛的可能的数据库操作（[saveOrUpdate, find, findAll, remove] => [selectSingle, selectMultiple, insert, updateSingle, updateMultiple, deleteSingle, deleteMultiple]）。我还将策略模式应用于语句运行器的两个方面：第一次为 selectMultiple 函数返回哪种聚合类型（记录数组或记录数组集合）；第二次创建或不创建历史记录（ChangeObjects）。

在应用了这些模式并测试了一些重构代码之后，它可以完美地与现有的 SQLite 数据库配合使用。我忽略了测试它与远程数据源的兼容性，因为在该过程中也使用了保存机制。在重构和简化我们的代码并接近开发周期结束后，我测试了下载。

它会从 SQLite 数据库中读取数据，尽管根据 sqlite3 实际上其中没有数据。

我将为此提供相关的代码。

```
public class BaseDaoAdaptee {
    private var returnStrategy: ReturnTypeStrategy;
    private var trackingStrategy: TrackingStrategy;
    private var creator: StatementCreator;

    public function insert(queryTitle: String, 
                           object: DaoAwareDTO,
                           parameters: Array, 
                           mutator: Function, 
                           handler: Function): void {
        var statement: SQLStatement;
        mutator = creator.validEmptyFunction(mutator);
        handler = creator.validFault(handler);
        statement = defaultStatement(queryTitle, parameters, handler);
        statement.addEventListener(SQLEvent.RESULT, 
            trackingStrategy.onInserted(object, mutator), false, 0, true);
        statement.execute();
    }
} 
```

TrackingStrategy 的代码实现：

```
public class TrackedStrategy 
    implements TrackingStrategy {
    public function onInserted(object: DaoAwareDTO, 
                               callback: Function): Function {
        return function (event: SQLEvent): void {
            var change: Change,
                id:Number = event.target.getResult().lastInsertRowID;
            creator.logger.debug((event.target as SQLStatement).itemClass + ' (id # ' + id + ') inserted');
            (object as Storeable).id = id;
            change = new Creation(object);
            change.register();
            callback();
        };
    }
} 
```

记录器读取插入了各种数据库记录，当在上述 lambda 中的断点处停止时，“对象”具有所有正确的值。在 sqlite3 中运行 Select 语句时，不会返回任何记录。

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T20:39:20.087

结果是 SQLConnection 值上的打开事务是原因。必须热爱团队项目。提交或回滚您的 SQLConnection 事务！

# html - HtmlAgilityPack 多种后代类型

> ID：13919629
> 
> 赞同：1
> 
> 时间：2012-12-17T18:10:29.190
> 
> 标签：html, linq, html-agility-pack

我正在尝试选择 div、span、标签等，基本上是任何具有特定属性的元素。

```
IEnumerable<HtmlNode> allDivsWithItemType = _doc.DocumentNode.Descendants("div").Where(d => d.Attributes.Contains("itemtype")); 
```

有没有办法像上面那样将所有后代都捆绑在一起？由于上面显然只能找到 div。我试图避免重复的代码添加一整行来替换一个单词。

例如（不起作用）

```
IEnumerable<HtmlNode> allDivsWithItemType = _doc.DocumentNode.Descendants("*").Where(d => d.Attributes.Contains("itemtype")); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T18:34:53.863

尝试：

```
IEnumerable<HtmlNode> allDivsWithItemType = _doc.DocumentNode.Descendants()
   .Where(d => d.Attributes.Contains("itemtype")); 
```

# c++ - （伪）- 行列式为零的 N 乘 N 矩阵的逆

> ID：13919630
> 
> 赞同：5
> 
> 时间：2012-12-17T18:10:29.827
> 
> 标签：c++, matrix, lapack, eigen, slam-algorithm

我想在我的 GraphSlam 中使用 nxn 矩阵的逆矩阵。

我遇到的问题：

*   `.inverse()`特征库（3.1.2）不允许零值，返回`NaN`
*   LAPACK (3.4.2) 库不允许使用零行列式，但允许零值（使用示例代码来自[Computing the inverse of a matrix using lapack in C](https://stackoverflow.com/questions/3519959/computing-the-inverse-of-a-matrix-using-lapack-in-c)）
*   Seldon 库（5.1.2）由于某种原因无法编译

有没有人成功实现了一个允许负值、零值和零行列式的*n* x *n矩阵求逆代码？*有什么好的库（C++）推荐吗？

我尝试为 GraphSlam 计算以下欧米茄： [http ://www.acastano.com/others/udacity/cs_373_autonomous_car.html](http://www.acastano.com/others/udacity/cs_373_autonomous_car.html)

* * *

简单的例子：

```
[ 1 -1  0 0 ]
[ -1 2 -1 0 ]
[ 0 -1  1 0 ]
[ 0  0  0 0 ] 
```

实际示例是 170x170，包含 0、负值、更大的正值。给出的简单示例用于调试代码。

* * *

我可以在 matlab（Moore-Penrose 伪逆）中计算它，但由于某种原因，我无法在 C++ 中对此进行编程。

```
A = [1 -1 0 0; -1 2 -1 0; 0 -1 1 0; 0 0 0 0]
B = pinv(A)
B=
[0.56   -0.12  -0.44  0]
[-0.12  0.22   -0.11  0]
[-0.44  -0.11   0.56  0]
[0  0  0   0] 
```

* * *

对于我的应用程序，我可以（暂时）删除带有零的维度。
所以我要删除第 4 列和第 4 行。
我也可以对我的 170x170 矩阵执行此操作，4x4 只是一个示例。

A：

```
[ 1 -1  0 ]
[ -1 2 -1 ]
[ 0 -1  1 ] 
```

因此，删除第 4 列和第 4 行不会带来零行列式。但是如果我的矩阵如上所述，我仍然可以有一个零行列式。当每行或每列的总和为零时。（我将一直在 GraphSlam 中使用）

如果行列式不为零，则 LAPACK 解决方案（基于 Moore-Penrose 逆）起作用（使用来自[Computing the inverse of a matrix using lapack in C 的](https://stackoverflow.com/questions/3519959/computing-the-inverse-of-a-matrix-using-lapack-in-c)示例代码）。
但作为行列式为零的“伪逆”失败了。

* * *

**解决方案：（**全部归功于 Frank Reininghaus），使用 SVD（奇异值分解）
[http://sourceware.org/ml/gsl-discuss/2008-q2/msg00013.html](http://sourceware.org/ml/gsl-discuss/2008-q2/msg00013.html)

适用于：

*   零值（即使是完整的 0 行和完整的 0 列）
*   负值
*   零的行列式

一个^-1：

```
[0.56   -0.12  -0.44]
[-0.12  0.22   -0.11]
[-0.44  -0.11   0.56] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T23:35:43.387

如果您只想解决 Ax=B 形式的问题（或等效地计算 A^-1 * b 形式的乘积），那么我建议您不要计算 A 的逆或伪逆，而是直接求解Ax=b 使用适当的等级揭示求解器。例如，使用特征：

```
x = A.colPivHouseholderQr().solve(b);
x = A.jacobiSvd(ComputeThinU|ComputeThinV).solve(b); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T18:28:20.253

您的 Matlab 命令不会在您的情况下计算逆矩阵，因为矩阵的确定值为零。该`pinv`命令计算[Moore-Penrose 伪逆](http://en.wikipedia.org/wiki/Moore%E2%80%93Penrose_pseudoinverse)。`pinv(A)`具有 的一些（但不是全部）属性`inv(A)`。

所以你在 C++ 和 Matlab 中没有做同样的事情！

***以前的***

正如我的评论。现在作为答案。您必须确保反转可逆矩阵。这意味着

`det A != 0`

您的示例矩阵的行列式等于零。这不是一个可逆矩阵。我希望你不要尝试这个！

例如，如果存在一整行或整列的零条目，则给定矩阵的行列式为零。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T18:26:48.227

你确定这是因为零/负值，而不是因为你的矩阵是不可逆的？

如果矩阵的行列式不为零（[mathworld 链接](http://mathworld.wolfram.com/MatrixInverse.html)），则矩阵只有逆矩阵，并且您在问题[中发布的矩阵示例的行列式为零](http://www.wolframalpha.com/input/?i=det%20%7B%7B%201,%20-1,%200,%200%20%7D,%7B%20-1,%202,%20-1,%200%20%7D,%7B%200,%20-1,%201,%200%20%7D,%7B%200,%200,%200,%200%7D%7D%20%20)，因此它没有逆矩阵。

这应该可以解释为什么这些库不允许您取给定矩阵的逆矩阵，但我不能说相同的推理是否适用于您的全尺寸 170x170 矩阵。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-20T08:59:10.237

如果您的矩阵是一种协方差或权重矩阵，您可以使用“广义 cholesky 反演”而不是 SVD。结果在实际使用中会更容易接受

# .net - 工具条 (ToolStripDropDownButton) 关闭并失去窗口焦点

> ID：13919634
> 
> 赞同：5
> 
> 时间：2012-12-17T18:10:38.583
> 
> 标签：.net, vb.net, winforms, windows-7

我有一个带有 ToolStripDropDownButton 的 ToolStrip。这又会弹出一个带有 DateTimePicker 的 UserControl。当我单击日历上的顶部数字（绿色）时，一切正常（用户控件保持打开状态）。当我单击较低日期之一（红色）时，ToolStripDropDown 关闭并且应用程序失去焦点。这导致用户必须双击才能再次打开下拉菜单（一次聚焦应用程序，另一次打开下拉菜单）。

当日历日期不在用户控件的顶部时，就会发生这种情况。如您所见，用户控件在“绿色”日期停止。

我希望这很清楚。这似乎是一个 Windows 错误，因为这发生在一个非常简单的项目中。有没有人看到这个问题？有解决办法吗？

![在此处输入图像描述](../Images/4cdf5db560ff8ab5d705a82eb631cb69.png)

**[更新]**

我注意到与下拉相同的事情。

![在此处输入图像描述](../Images/cbcf78b5e266453332089402969c73a7.png)

用户控件很大时不会发生这种情况。

![在此处输入图像描述](../Images/f42af5e905092b938fcfd7fdd144e540.png)

```
Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load

    Dim uc As New UserControl1
    Dim cms As New ContextMenuStrip()
    cms.Items.Add(New ToolStripControlHost(uc))
    ToolStripButton1.DropDown = cms

End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T20:00:34.203

功能，而不是错误。控件需要知道用户在下拉列表之外单击，以便它可以自动关闭下拉列表。这是通过 Capture 属性在 Winforms 中公开的“鼠标捕获”完成的。捕获鼠标可确保将鼠标消息发送到控件，即使鼠标不再位于控件窗口内。

也许现在发生的事情很明显，您实际上并没有点击日历。显示下拉菜单后，控件将捕获鼠标。单击将重定向到 ToolStripDropDown。当您单击“红色区域”时，它会看到鼠标不再位于下拉列表中，从而关闭下拉窗口。

像这样的下拉菜单实际上只适用于简单的项目，将任何创建顶级窗口的控件放入其中，如 DateTimePicker 或 ComboBox 只是不支持的场景。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-22T12:23:05.847

我通过切换 AutoClose 以类似的方式解决了这个问题。以为我会发布代码：

```
 public class ToolStripDropDownDateTimePicker : DateTimePicker
{
    private bool savedAutoClose;

    /// <summary>
    /// Creates a new ToolStripDropDownDateTimePicker.
    /// </summary>
    public ToolStripDropDownDateTimePicker()
    {

    }

    protected override void OnCloseUp(EventArgs e)
    {
        if (this.Parent != null)
        {
            var dropDownHost = this.Parent.Parent as ToolStripDropDown; // recursive instead?
            if (dropDownHost != null)
                dropDownHost.AutoClose = savedAutoClose; // restore the parent's AutoClose preference
        }

        base.OnCloseUp(e);
    }

    protected override void OnDropDown(EventArgs e)
    {
        if (this.Parent != null)
        {
            var dropDownHost = this.Parent.Parent as ToolStripDropDown; // recursive instead?
            if (dropDownHost != null)
            {
                savedAutoClose = dropDownHost.AutoClose;
                // ensure that our parent doesn't close while the calendar is open
                dropDownHost.AutoClose = false;
            }
        }
        base.OnDropDown(e);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T20:05:41.020

我无法更改应用程序的行为，因此我决定根据控件的事件将表单的 AutoClose 设置为 False 或 True。

# objective-c - 从 applicationDidEnterBackground 方法保存一些数据

> ID：13919635
> 
> 赞同：0
> 
> 时间：2012-12-17T18:10:38.370
> 
> 标签：objective-c, ios, plist

当调用 applicationDidEnterBackground 时，我想将数组中的一些数据保存到 plist 文件中。我试图弄清楚如何从 applicationDidEnterBackground 方法访问我的数组。有没有最佳实践来做到这一点？非常感谢马科斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:32:50.243

将代码放在实际具有数据的类中。让班级注册`UIApplicationDidEnterBackgroundNotification`通知。

```
// Put this in the `init` method
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(backgrounding) name:UIApplicationDidEnterBackgroundNotification object:nil];

// The method that gets called
- (void)backgrounding {
    // save the data
}

// Put this in the `dealloc` method
[[NSNotificationCenter defaultCenter] removeObserver:self name:UIApplicationDidEnterBackgroundNotification object:nil]; 
```

使用此设置，您无需将任何内容放入其中`UIApplicationDelegate`，并且责任将保留在其所属的位置。

# c# - 如何在c#中使用loveseat在couchdb中进行分页

> ID：13919640
> 
> 赞同：0
> 
> 时间：2012-12-17T18:10:45.307
> 
> 标签：c#, couchdb

我需要在我的应用程序中向下滚动时加载页面。我使用 couchdb 作为后端，我在 couchdb 中找到了一个分页选项，我认为这可以满足我的问题。

问题是我在任何地方都找不到任何有效的分页示例。我需要有人帮助我的应用程序与这个应用程序一起工作。

看看这个以供参考：[https ://github.com/soitgoes/LoveSeat/blob/master/LoveSeat/PagingHelper.cs](https://github.com/soitgoes/LoveSeat/blob/master/LoveSeat/PagingHelper.cs)

这是我的代码。我收到一条错误`options = model.GetOptions();`消息，说“对象引用未设置为对象的实例”。

```
public List<newVO> Getdocs(IPageableModel model)
    {
        List<newVO> resultList = new List<newVO>();
        var etag = "";
        ViewOptions options = new ViewOptions();
        options = model.GetOptions();
        options.StartKeyDocId = lastId;
        options.Limit = 13;
        options.Skip = 1;
        var result = oCouchDB.View<newVO>("GetAlldocs", options);
        //model.UpdatePaging(options, result);
        if (result.StatusCode == HttpStatusCode.NotModified)
        {
            response.StatusCode = "0";
            return null;
        }
        if (result != null)
        {
            foreach (newVO newvo in result.Items)
            {
                resultList.Add(newvo );
            }
        }

        return resultList;

    } 
```

提前致谢。欢迎所有想法。

* * *

```
public List<newVO> Getdocs(IPageableModel model)
        {
            List<newVO> resultList = new List<newVO>();
            var etag = "";
            ViewOptions options = new ViewOptions();
            options = model.GetOptions();
            options.StartKeyDocId = lastId;
            options.Limit = 13;
            options.Skip = 1;
            var result = oCouchDB.View<newVO>("GetAlldocs", options);
            //model.UpdatePaging(options, result);
            if (result.StatusCode == HttpStatusCode.NotModified)
            {
                response.StatusCode = "0";
                return null;
            }
            if (result != null)
            {
                foreach (newVO newvo in result.Items)
                {
                    resultList.Add(newvo );
                }
            }

            return resultList;

        } 
```

这是我的代码，我在“options = model.GetOptions();”中遇到错误 对象引用未设置为对象实例的行...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:52:26.870

我没有使用过 LoveSeat 分页实现，但是可以使用 上的`Limit`和`Skip`属性`ViewOptions`来实现分页：

```
public static IEnumerable<T> GetPage(this ICouchDatabase couchDatabase,
    string viewName,
    string designDoc,
    int page,
    int pageSize)
{   
    return couchDatabase.View(viewName, new ViewOptions
    {
        Skip = page * pageSize,
        Limit = pageSize
    }, designDoc);
} 
```

这个简单的扩展方法将从 CouchDB 视图中获取一页数据

# c# - 如何在 C# 中将双精度值转换为 DateTime？

> ID：13919641
> 
> 赞同：14
> 
> 时间：2012-12-17T18:10:45.713
> 
> 标签：c#, excel, datetime, converter, timespan

我有值 40880.051388 并将其存储为双精度，如果我打开 Excel 并粘贴到一个单元格中并将以下自定义格式`m/d/yyyy h:mm"`应用于该单元格，我得到`"12/3/2011 1:14"`

如何在 C# 中进行此解析/转换？我不知道该值是否是某个检查点的毫秒数，例如纪元时间，或者该值是否采用某种特定的准备格式，但是 excel 是如何得出这个特定值的？可以在 C# 中完成吗？

我已经尝试在 Visual Studio 中使用`TimeSpan`、`DateTime`和其他类似的东西，但没有得到任何结果。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-17T18:15:23.113

看起来您正在使用旧的[OLE 自动化 date](http://msdn.microsoft.com/en-us/library/system.datetime.tooadate%28v=VS.95%29.aspx)。利用

```
DateTime.FromOADate(myDouble) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T18:14:23.253

尝试这样的事情： -

```
double d = 40880.051388 ;
DateTime dt = DateTime.FromOADate(d); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-17T18:15:27.920

尝试使用`var dateTime = DateTime.FromOADate(40880.051388);`.

如果您需要将其格式化为字符串，请使用`dateTime.ToString("M/d/yyyy H:mm", CultureInfo.InvariantCulture)`它。这将为您提供 24 小时字符串（更改`H`为`h`12 小时系统）。

如果您需要比 提供的精度更高（1000 倍或更多）`FromOADate`，请参阅[我在另一个线程中的回答](https://stackoverflow.com/a/13922172/1336654)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-17T18:14:33.787

该值是从 1899 年 12 月 30 日开始的天数偏移量。所以你想要：

```
new DateTime(1899, 12, 30).AddDays(40880.051388) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-06T13:49:26.620

以下简单代码将起作用

```
DateTime.FromOADate(myDouble) 
```

但是，如果性能很关键，它可能运行得不够快。此操作非常占用处理器资源，因为 OLE 自动化日期格式的日期范围从 1899 年 12 月 30 日开始，而 DateTime 在公历中从 0001 年 1 月 1 日开始。

FromOADate 使用 myDouble 作为唯一参数调用 DoubleDateToTicks 函数。这将返回刻度数，该值用于创建具有未指定 DateTimeKind 的新 DateTime。

大部分工作由 mscorlib 中的 DoubleDateToTicks 函数完成。这包括当 double 的值为 NaN 时引发 ArgumentException 的代码，并且有多种方法可以根据您的确切需求优化性能。

# facebook - pyrocms 社交模块：如何使用 facebook connect 注册新用户

> ID：13919642
> 
> 赞同：0
> 
> 时间：2012-12-17T18:10:48.520
> 
> 标签：facebook, codeigniter, pyrocms

我还是 CI 和 PyroCMS 的新手，正在尝试使用自定义模块中的[Social 模块](https://www.pyrocms.com/store/details/social_integration)实现 Facebook 登录，看起来它可以满足我的所有需求，但我显然缺少一些基础知识（我找不到除了[简短的自述](https://github.com/pyrocms/social)文件之外的任何文档）！

到目前为止，我已经观看了[介绍视频](http://player.vimeo.com/video/33459969)，并成功启用了 Facebook。我可以通过 FB 连接并查看 /social/linked 中列出的 FB，但在我拥有的两个用户组之间存在一些混淆：管理员和用户。

我试图构建的流程是：

*   用户到达站点并收到一份调查
*   用户填写调查表，然后被要求注册（我知道这是非常规的）
*   /signup 有一个 facebook 连接按钮，由社交模块提供
*   用户单击连接按钮，并在 facebook 的弹出窗口中授予权限
*   用户应该被引导回 /signup，（或者可能被重定向到 /user/registration）并从 facebook 填写一些详细信息（例如电子邮件、姓名）
*   提交时，应将用户添加到用户表中，作为“用户”组的成员（不是管理员），无需电子邮件激活
*   发送电子邮件，显示感谢页面
*   返回网站后，用户应使用 facebook connect 访问他们的现场个人资料。

我已经阅读了一堆关于这个主题的主题，这些主题塑造了这些期望......

这是我所在的位置：

*   用户到达，填写调查表，点击连接按钮
*   用户被重定向到主页，该主页显示一个标准页面（不由我的模块处理）。我需要返回/注册！

基于[此](https://stackoverflow.com/questions/10328141/manage-login-redirection-in-pyrocms/10382779#10382779)，我尝试设置：

```
$this->session->set_userdata('redirect_to', '/signup'); 
```

我认为是正确的控制器方法（在发送电子邮件之前检查用户是否已登录，然后调用模板构建以显示社交按钮），但无济于事。

（编辑：我现在看到上面的代码与用户模块有关，而不是社交模块..也许我可以移植一些更改......）

**我的问题：**

*   我是走在正确的轨道上，还是走错了路？！
*   如果系统中存在电子邮件地址，我是否认为 FB 帐户将与现有用户匹配？
*   我只有一个 FB 帐户，我已获得该应用程序的授权，并且我正在以用户身份与之连接 - 这会起作用吗，还是我需要一个单独的 FB 帐户来以用户身份进行测试？

其他注意事项：

*   我在 Chrome 中测试该站点，在 Firefox 中以管理员身份登录。
*   Facebook 是我的测试用例，我正在考虑最终支持 FB、LinkedIn、google 和 Twitter。

呸！感谢任何反馈，蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T20:57:36.960

我将尝试回答您的一些问题，因为我目前也在尝试使用完全相同的社交模块以及一些插件。

> 如果系统中存在电子邮件地址，我是否认为 FB 帐户将与现有用户匹配？

是的，你是。我自己检查了它，同时排除了我的 google（gmail 地址）无法连接而我的 hotmail（注册电子邮件）可以连接的事实。您必须在所有社交网站中同步您的电子邮件，更改登录系统（例如允许用户名登录）或在您的帐户设置中手动连接多个电子邮件。

> 我只有一个 FB 帐户，我已获得该应用程序的授权，并且我正在以用户身份与之连接 - 这会起作用吗，还是我需要一个单独的 FB 帐户来以用户身份进行测试？

我建议你让另一个 FB 帐户的人测试系统（最好保存然后抱歉），但在我的情况下，我使用其他（正常）帐户登录没有任何问题。

> 我是走在正确的轨道上，还是走错了路？！

这是你的第一个问题，但我会回答这个问题，因为我没有测试是我自己：

Facebook 应用程序有一个名为“站点 URL”的设置。这是将被重定向到的 url。只需将其更改为您希望的页面。您还可以尝试更改 social/controllers/social.php 中的以下行：

第 245 行（重定向：用户在 FB 连接后登录）

```
redirect($this->input->get('success_url') ? $this->input->get('success_url') : 'social/linked'); 
```

第 283 行（重定向：用户必须填写一些附加字段才能完成注册）

```
redirect('users/register'); 
```

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-25T14:57:34.000

The intro video shows off the entire extent of the social module. Frontend registrations, frontend user account linking, and backend account linking for the entire system.

If you wish to integrate custom functionality, custom user flows and other stuff as listed in your question then you will need to do a little custom work with the module. Hack it, extend it, send in some pull requests, whatever, but sadly it cannot do "everything to integrate with everywhere ever" out of the box. :-/

# three.js - Three.js 网格位置不会改变

> ID：13919645
> 
> 赞同：0
> 
> 时间：2012-12-17T18:11:03.950
> 
> 标签：three.js

我有一个叫做网格的网格。我这样做：

```
mesh.position.set(50,50,10);
console.log(mesh.position);
console.log("z: " + mesh.position.x); 
```

输出：

```
THREE.Vector3
            x=0
            y=0
            z=0
            __proto__:Object
z: 10 
```

这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T05:32:19.890

我又要回答我自己的问题了。耶。

问题出在 google chrome 的 console.log 上。如果你记录一个对象，它会提供一个 twizzle 来查看对象的属性。所以我可以看到 Vector3，然后我旋转查看 x,y,z。

诀窍是，Vector3 的属性仅在您点击 twizzle 时才会收集。因此，在我点击 twizzle（这是一个愚蠢的词）之后，我在未来看到了 0,0,0 的一些更新，而查看实际属性会在我要求它的那一刻显示值。

被警告。

# db2 - 公共可用的 DB2 数据库

> ID：13919646
> 
> 赞同：0
> 
> 时间：2012-12-17T18:11:10.923
> 
> 标签：db2, db2-400, db2-connect

以下数据库是否有任何公开可用版本： 数据库：DB2 for i5/OS 版本：07.01.0000 OS/400 V7R1M0

我正在寻找一种设置特定数据库的方法，或者一个公共可用的数据库（只是为了连接）

谢谢你。

# android - 将所有子活动关闭到父活动

> ID：13919651
> 
> 赞同：2
> 
> 时间：2012-12-17T18:11:34.070
> 
> 标签：android, android-activity

如果我有以下

家长活动 > 活动 1 > 活动 2 > 活动 3

按返回按钮将返回：父活动 > 活动 1 > 活动 2

再次按下将转到：家长活动 > 活动 1

有什么方法可以让我从活动 3 本身以编程方式完成活动 1,2 和 3。

在 IOS 中有一个名为 popToRootViewControllerAnimated 的函数，这是我在 Android 中需要的概念类型

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:22:21.263

在您从上一个活动中调用 startActivity 时添加标志 Intent.FLAG_ACTIVITY_CLEAR_TOP。它将清除活动堆栈

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:20:07.230

`startActivityForResult()`使用然后在`onActivityResult()`调用中启动子活动`finish()`。这将带您回到父活动。

或者，您也可以在从活动 3[`FLAG_ACTIVITY_CLEAR_TOP`](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)调用父活动时使用 Intent 标志。`startActivity()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:41:25.960

如果您来自 activity3，请检查 activity2 的 onResume()，如果是，请调用 finish()。活动1相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T19:02:22.823

也许这个算法会很有用；

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    switch(keyCode)
    {
    case KeyEvent.KEYCODE_BACK:
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            //here you'll check if activity3 alive then join
            //else if activity2 alive then join
            //else if activity1 alive then join
            //else finish(); 
        }
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

# python - 如何对 QtTreeView 上的键盘选择做出反应？

> ID：13919652
> 
> 赞同：3
> 
> 时间：2012-12-17T18:11:35.887
> 
> 标签：python, pyqt, pyside, signals-slots, qtreeview

`QTreeView`有`clicked`信号，但`itemChanged`不像`QTreeWidget`。我必须使用`QTreeView`，因为它是“基于模型的”。尽管如此，如果我的用户使用键盘选择一行，`clicked`则不会发送，并且永远不会调用我的回调。我应该注册什么信号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T19:00:16.967

`QTreeView`类继承`QAbstractItemView`，它提供对[选择模型](https://qt-project.org/doc/qt-4.8/qabstractitemview.html#selectionModel)的访问。

选择模型有[几个信号](https://qt-project.org/doc/qt-4.8/qitemselectionmodel.html#signals)，用于注册对当前项目所做的更改以及鼠标和键盘的选择。

**编辑**：

为了清楚起见，信号需要像这样连接：

```
selmodel = self.listing.selectionModel()
selmodel.selectionChanged.connect(self.handleSelectionChanged) 
```

处理程序的签名应如下所示：

```
def handleSelectionChanged(self, selected, deselected):
    indexes = selected.indexes()
    if indexes:
        print('row: %d' % indexes[0].row()) 
```

和是[QItemSelection](https://qt-project.org/doc/qt-4.8/qitemselection.html)`selected`的实例。`deselected`

# javascript - 动态客户端 ID 的 document.getElementById 遇到问题

> ID：13919655
> 
> 赞同：0
> 
> 时间：2012-12-17T18:11:54.340
> 
> 标签：javascript, getelementbyid

**在将动态创建的字符串作为 document.getElementById 的 clientID 传递时，您是否需要做任何特别的事情？**

我有一个 asp:gridview 控件，它有一个文本框列和一个复选框列。我在复选框中添加了一个 onclick 事件，以将该行的文本框值设置为所有选中行的最大值 +1。我传入网格的 ID 和所选行的控件。对于这些控件，我可以很好地 getElementByID，但是当我动态构建其他控件的 ID 时，即使我知道 ID 是正确的，我仍然会得到 null。我的代码如下。

```
function SetPriority(cbID, tbID, gridID) {
    var cb = document.getElementById(cbID);
    if (cb.checked) {
        var tb = document.getElementById(tbID);
        var grid = document.getElementById(gridID);

        var maxv = 0;

        for (var i = 0; i < grid.rows.length; i++) {
            var indexID = 102 + i;
            var cbClientID = 'LeaveInfo_pnlMain_wgbLeaveSummary_gridSubmitted_ct' + indexID + '_chkGroup';
            var tbClientID = 'LeaveInfo_pnlMain_wgbLeaveSummary_gridSubmitted_ct' + indexID + '_txtPriority';

            console.log("row" + i);

            //just for example of how it should be working
            console.log(cbID);
            var cbx = document.getElementById(cbID);
            console.log(cbx);

            //get row checkbox
            console.log(cbClientID);
            var thisCB = document.getElementById(cbClientID);
            console.log(thisCB);

            //get row textbox
            var thisTB = document.getElementById(tbClientID);
            console.log(thisTB);

            if (thisCB) {
                if (thisCB.type == "checkbox") {
                    if (thisCB.checked) {
                        if (thisTB.value > maxv)
                            maxv = thisTB.value;
                    }
                }
            }

        }
        tb.value = parseInt(maxv) + 1;
    }
} 
```

这是它在控制台中的显示方式，您可以在其中看到第一行的 ID 相同 ![控制台日志截图](../Images/7ffe1ed9094866dd75244b798f4c84df.png)

对于那些想知道我如何调用该函数的人，我将它添加到行数据绑定上的 .net gridview 控件中的复选框中。它呈现如下：

```
<input id="LeaveInfo_pnlMain_wgbLeaveSummary_gridSubmitted_ctl02_chkGroup" type="checkbox" name="LeaveInfo$pnlMain$wgbLeaveSummary$gridSubmitted$ctl02$chkGroup" onclick="javascript:SetPriority('LeaveInfo_pnlMain_wgbLeaveSummary_gridSubmitted_ctl02_chkGroup','LeaveInfo_pnlMain_wgbLeaveSummary_gridSubmitted_ctl02_txtPriority','LeaveInfo_pnlMain_wgbLeaveSummary_gridSubmitted');"> 
```

添加函数的vb .net代码是这样...(on-_RowDataBound)

```
 Dim chk As CheckBox = CType(e.Row.FindControl("chkGroup"), CheckBox)
        Dim tb As TextBox = CType(e.Row.FindControl("txtPriority"), TextBox)

        chk.Attributes.Add("onclick", String.Format("javascript:SetPriority('{0}','{1}','{2}');", chk.ClientID, tb.ClientID, gridSubmitted.ClientID)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:23:07.550

不，在动态构建字符串时，您不必做任何特别的事情。无论是动态构建的还是直接在代码中指定的，javascript 中的字符串都是相同的字符串。如果 document.getElementById() 不起作用，则可能是以下原因之一：

1.  您的字符串不是您认为的那样，因此它与目标 ID 不匹配。
2.  你的 DOM id 不是你想象的那样。
3.  您有多个具有相同 id 的元素（这里不太可能，因为您不会得到`null`）
4.  您`getElementById()`在 DOM 准备好之前或在将所需元素添加到 DOM 之前调用。

在这种情况下，1) 或 2) 似乎更有可能是这里的问题，但您没有向我们展示任何上下文来了解 4) 是否可能是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:16:55.617

不是 100% 肯定，但我认为这可能是一个上下文问题。试试这个：

```
 function ( id ) {

            var ID  = document.getElementById;
            this.id = id;
            this.newvar = ID.call( document, this.id );

                  ... 

                } 
```

此外，这个问题可能会对您有所帮助 - 它对上下文有很好的解释并将 var 分配给 getElementById[为什么我不能直接将 document.getElementById 分配给不同的函数？](https://stackoverflow.com/questions/6318704/why-cant-i-directly-assign-document-getelementbyid-to-a-different-function)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:21:28.563

我想不通为什么我看起来相同的 ID 不一样。我将把这个问题留给任何人，让他们了解如何解决这个问题。我最终只是通过单元格而不是 ID 获取我的元素。

```
function SetPriority(cbID, tbID, gridID) {
    var cb = document.getElementById(cbID);
    if (cb.checked) {
        var tb = document.getElementById(tbID);
        var grid = document.getElementById(gridID);

        var maxv = 0;

        if (grid.rows.length > 0) {
            for (row = 1; row < grid.rows.length; row++) {
                var thisCB = grid.rows[row].cells[5].childNodes[1];
                if (thisCB == cb) {
                    continue;
                }
                var thisTB = grid.rows[row].cells[6].childNodes[1];

                if (thisCB.type == "checkbox") {
                    if (thisCB.checked) {
                        if (thisTB.value > maxv)
                            maxv = thisTB.value;
                    }
                }
            }
        }

        tb.value = parseInt(maxv) + 1;
    }
} 
```

# html - 如何正确定位图像，html css

> ID：13919675
> 
> 赞同：-3
> 
> 时间：2012-12-17T18:13:35.220
> 
> 标签：html, css, image

我正在创建一个具有完整图像背景的网站，并且我有许多图像要放在顶部，但是如果我对齐图像以使它们在我的分辨率上看起来不错，那么任何屏幕较小或较大的图像都会立即显示看起来他们只是 ploop'd ontop。

这是我的例子 - [http://www.xronn.co.uk/avatar](http://www.xronn.co.uk/avatar)

您是否知道我可以使用的方法，以便图像将站在所有屏幕的部分背景上，或者至少使它们看起来不错。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:30:51.223

要在特定位置显示 HTML 元素，您可以使用称为***绝对定位***的定位方法。这是通过将`position`CSS 属性设置为`absolute`. 在像您这样的情况下，最好不要使用`margin`和`float`属性来破解 natura html 流，这并不是为了达到这种目的。

这使您可以使用`top`、`left`和绝对值。这四个属性指定元素的边缘与其参考的同一边缘之间的距离。参考是最近的祖先，位置是或。`right``bottom``relative``absolute`

您可以在 px、em、% 等中指定这些属性的值...

当然，您不会指定超过 2 个属性`left`，`width`并且`right`出于显而易见的原因，对于`top`,`height`和 也是如此`bottom`。

在您的情况下，最好指定`bottom`属性和`left`或`right`使用百分比。

# xml - 如何使用 VBA 将与符号从 Excel 文件写入 XML 文件？

> ID：13919677
> 
> 赞同：4
> 
> 时间：2012-12-17T18:13:35.210
> 
> 标签：xml, excel, vba, xls, xlsm

首先，当谈到 VBA 时，我是一个完全的新手，但不幸的是我被丢弃了这段代码，我必须处理它......

应用程序所做的是复制 Excel xlsm 文件中的信息并将其粘贴到 XML 文件中以供进一步处理。

问题是，这一切都非常顺利，直到我在一个 Excel 单元格中点击一个 & 符号，即：

我有一个具有“R&D”的单元格，当我将它传递给 XML 文件时，我收到以下错误：

```
Run-time error '91':
Object variable or With block variable not set 
```

请记住，我对 VBA 完全是垃圾。我尝试更改“R&&D”、“R `&amp;`D”单元格中的内容，但没有骰子。

我相信单元格的价值来自这行代码：

```
oCell.Offset(, 0).Value 
```

但我想要一些关于如何逃脱＆符号的帮助......

非常感谢，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T15:26:04.220

我为 Access 编写了以下函数，但它应该适用于 Excel。

```
Function CleanupStr(strXmlValue) As String  
 'description: Replace forbidden char. &'"<> by their Predefined General Entities   
 'author:      Patrick Honorez - www.idevlop.com   
   Dim sValue As String  
   If IsNull(strXmlValue) Then  
     CleanupStr = ""  
   Else  
     sValue = CStr(strXmlValue)  
     sValue = Replace(sValue, "&", "&amp;") 'do ampersand first !  
     sValue = Replace(sValue, "'", "&apos;")  
     sValue = Replace(sValue, """", "&quot;")  
     sValue = Replace(sValue, "<", "&lt;")  
     sValue = Replace(sValue, ">", "&gt;")  
     CleanupStr = sValue  
   End If  
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:19:40.947

您正在寻找的是一种在字符串中创建 html 实体的方法，这涉及使用`&`任何特殊字符的代码。'&' 本身就是一个特殊的字符。

可能有代码可以更改以执行此操作，但同时在您的代码中替换

```
& 
```

和

```
&amp; 
```

你应该解决那个特定的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-28T08:10:46.663

我在[这里](http://www.vb-helper.com/howto_html_encode_decode.html)找到了这两个辅助函数：

```
Public Function HTMLToCharCodes(ByVal iString As String) As _
    String
    With New MSXML2.DOMDocument30
        .loadXML "<p>" & iString & "</p>"
        HTMLToCharCodes = _
            .selectSingleNode("p").nodeTypedValue
    End With
End Function 
```

和

```
Public Function CharCodesToHTML(ByVal iString As String) As _
    String
Dim iXml As New MSXML2.DOMDocument30

    With iXml.createTextNode(iString)
        CharCodesToHTML = .xml
    End With
End Function 
```

# c++ - 形状中的 OpenGL 着色

> ID：13919678
> 
> 赞同：0
> 
> 时间：2012-12-17T18:13:40.383
> 
> 标签：c++, opengl

我正在为一个大学项目重新创建旧游戏“Chuckie egg”，我已经使用下面的代码很好地绘制了角色，但我不确定在 glBegin(?) 中使用什么类型来为对象着色。

我已经尝试过 GL_QUADS、GL_TRIANGLE_FAN、GL_TRIANGLE_STRIP 和 GL_QUAD_STRIP，但唯一没有错误显示的工作是 GL_LINE_LOOP，但这当然不会为整个形状着色。

有谁知道如何解决这一问题？

```
void drawMan(void){

//main body outline
glBegin(GL_LINE_LOOP);

//set our colour
glColor3ub(255, 255, 0); // yellow

glVertex2f(-0.25f, 1.0f);
glVertex2f(0.25f, 1.0f);
glVertex2f(0.25f, 0.875f);
glVertex2f(0.5f, 0.875f);
glVertex2f(0.5f, 0.75f);
glVertex2f(1.0f, 0.75f);
glVertex2f(1.0f, 0.625f);
glVertex2f(0.5f, 0.625f);
glVertex2f(0.5f, 0.375f);
glVertex2f(0.0f, 0.375f);
glVertex2f(0.0f, 0.25f);
glVertex2f(0.25f, 0.25f);
glVertex2f(0.25f, 0.125f);
glVertex2f(0.5f, 0.125f);
glVertex2f(0.5f, 0.0f);
glVertex2f(0.75f, 0.0f);
glVertex2f(0.75f, -0.5f);
glVertex2f(0.5f, -0.5f);
glVertex2f(0.5f, -0.625f);
glVertex2f(0.25f, -0.625f);
glVertex2f(0.25f, -0.75f);
glVertex2f(0.0f, -0.75f);
glVertex2f(0.0f, -0.875f);
glVertex2f(0.25f, -0.875f);
glVertex2f(0.25f, -1.0f);
glVertex2f(-0.25f, -1.0f);
glVertex2f(-0.25f, -0.625f);
glVertex2f(-0.5f, -0.625f);
glVertex2f(-0.5f, -0.5f);
glVertex2f(-0.75f, -0.5f);
glVertex2f(-0.75f, 0.0f);
glVertex2f(-0.5f, 0.0f);
glVertex2f(-0.5f, 0.125f);
glVertex2f(-0.25f, 0.125f);
glVertex2f(-0.25f, 0.375f);
glVertex2f(-0.5f, 0.375f);
glVertex2f(-0.5f, 0.625f);
glVertex2f(-1.0f, 0.625f);
glVertex2f(-1.0f, 0.75f);
glVertex2f(-0.5f, 0.75f);
glVertex2f(-0.5f, 0.85f);
glVertex2f(-0.25f, 0.85f);
//glVertex2f(-0.25f, 1.0f);

glEnd();

//eyes
glBegin(GL_LINE_LOOP);

glColor3ub(0, 0, 0); // black

glVertex2f(0.0f, 0.625f);
glVertex2f(0.25f, 0.625f);
glVertex2f(0.25f, 0.5f);
glVertex2f(0.0f, 0.5f);

glEnd();

//arm

glBegin(GL_LINE_LOOP);

glColor3ub(0, 0, 0); // black

glVertex2f(-0.25f, 0.0f);
glVertex2f(0.0f, 0.0f);
glVertex2f(0.0f, -0.5f);
glVertex2f(-0.25f, -0.5f);

glEnd();} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:16:13.477

你不能随便画一个轮廓并给它上色。你必须正确地对你的形状进行三角测量。

对于可以输出合理几何图形的绘图包或使用纹理代替，这确实是一项工作。

# java - Java字符删除字符串

> ID：13919682
> 
> 赞同：-1
> 
> 时间：2012-12-17T18:13:51.303
> 
> 标签：java, string

我应该如何从字符串中删除两个字符“[”和“]”

```
Example: [45.677]

Desired: 45.677 
```

我最好希望在单手方法调用中执行此操作。此外，**不是两个 str.replace() 调用。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:14:34.553

使用正则表达式

```
string.replaceAll("\\[|\\]",""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T18:16:40.277

使用下面的正则表达式：

```
 System.out.println( "[45.677]".replaceAll("\\[|]","")); 
```

作为`[`一个特殊字符（元字符），您应该使用反斜杠对其进行转义，以便将其视为普通字符。因此 `\\[`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T18:17:38.997

除了使用之外`replaceAll`，如果`[]`字符始终位于同一位置（字符串的开头和结尾），那么您也可以使用：

```
string.substring(1, string.length() - 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T18:20:53.053

试试这个

```
System.out.println("[45.677]".replaceAll("[\\[\\]]", "")); 
```

# php - 检查身份列

> ID：13919685
> 
> 赞同：0
> 
> 时间：2012-12-17T18:14:06.093
> 
> 标签：php, sql-server, information-schema

我试图找出我试图合并到的表是否有一个`identity`列（来自一个 php 应用程序）。正在构建的查询是：

```
USE dhs;

select COLUMN_NAME as name 
from INFORMATION_SCHEMA.COLUMNS 
where TABLE_SCHEMA = 'dbo' 
and COLUMNPROPERTY(object_id(TABLE_NAME), COLUMN_NAME, 'IsIdentity') = 1 
AND TABLE_NAME = 'orders' 
```

如果我在 Management Studio 中运行它，我会得到`id`（这是我所期望的）的返回值。但是，当我从我的应用程序运行相同的查询时，没有返回任何内容。我已经给了我的数据库用户完全权限，所以这不是权限问题。下面是我正在运行的 php（即使它应该返回 'id'，它当前也返回 false）：

```
$array = empty($array) ? $_POST : $array; //if no array is passed, use post
        $info = self::information_schema($db, $schema, $table);
        $clean = array(); //the hex-exscaped key values pairs that are matched against the database column names (so only items whose key matches a column name are used)
        $primary = array();// ON section array
        $update = array(); //the array for elements to update, each position is set to target.$k = source.$k
        $insert = array(); //The insert string, which is essentially array_keys($clean) minus any identity field with source. prepended
        $fields = array(); //fields to insert to with no source. prepended and no identity fields included
        $query= "USE $db 
                                select COLUMN_NAME as name
                                from INFORMATION_SCHEMA.COLUMNS
                                where TABLE_SCHEMA = '$schema'
                                and COLUMNPROPERTY(object_id(TABLE_NAME), COLUMN_NAME, 'IsIdentity') = 1
                                AND TABLE_NAME = '$table'"; //this gets the identity column of table it has one (to prevent trying to insert into an IDENTITY field)
                    $handle = sqlsrv_query(self::$conn, $query);
        $value = sqlsrv_fetch_array($handle, SQLSRV_FETCH_NUMBERIC);
        var_dump($value); 
```

SQL Server 是否不允许您`INFORMATION_SCHEMA`从 SSMS 外部进行选择？

# c# - 关闭和使用窗口 WPF 的新实例

> ID：13919686
> 
> 赞同：1
> 
> 时间：2012-12-17T18:14:09.133
> 
> 标签：c#, wpf, xaml

我试图在 WPF 中打开一个仅包含图像并作为加载窗口运行的窗口。

我以与所有功能相同的方式使用加载窗口。它在第一次使用时总是可以正常工作，但之后的每个窗口实例都有空白内容。即使我只是使用标签，它也会显示为空白。

我不明白为什么在第一个窗口之前的新窗口实例上会有一个块。这是我使用的代码：

```
 private void btnSaveNewProject_Click(object sender, RoutedEventArgs e)
    {
        Loading load = new Loading();

        load.Show();

        DataAccess da = new DataAccess();

        da.ExecuteActionQuery(
            "insert into tbl_Project(ClientID,Name,Description,Billable,FixedPrice,Status,BudgetCap,SalesOrder,ProjectSalesOrder,ProjectType)"
            + " values('"
            + Globals.GetClientId(pw.cbxClients.SelectedItem.ToString()) + "','"
            + pw.txtName.Text.ToString() + "','"
            + pw.txtDescription.Text.ToString() + "','"
            + pw.chxBillable.IsChecked.ToString() + "','"
            + pw.chxFixedPrice.IsChecked.ToString() + "','"
            + pw.cbxStatus.SelectedItem.ToString() + "','"
            + pw.numBudget.ContentText.ToString() + "','"
            + pw.numSalesOrder.ContentText.ToString() + "','"
            + pw.txtName.Text.ToString() + " - " + pw.numSalesOrder.ContentText.ToString() + "','"
            + pw.cbxProjectType.SelectedItem.ToString() + "')");

        load.Visibility = Visibility.Hidden;

        MessageBox.Show("New Project Created Successfully", "Create New Project");

        pw.Close();

        btnProject_Click(null, null);
    } 
```

这是我的 xaml：

```
<Window x:Class="TT.Windows.Loading"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="" Height="100" Width="100" WindowStartupLocation="CenterScreen" WindowStyle="None">
<Grid>
    <Image Source="/TT;component/Resources/Sidebar-Search.ico" Height="75" Width="75" />
</Grid> 
```

我所有需要进行数据库调用的点击事件都具有与此函数相同的结构：创建一个加载窗口，显示它，完成工作，然后关闭它。

我使用的图像设置为资源构建操作。

建议将不胜感激。

# python - python中的字典错误

> ID：13919692
> 
> 赞同：0
> 
> 时间：2012-12-17T18:14:25.890
> 
> 标签：python, input, dictionary, for-loop

我正在解析一个文件，我想构建一个包含用户选择的名称和值的字典。由于我有很多名字，我想向用户显示他将选择年龄的名字：

```
Choose the age of Jack
choose the age of Kate
... 
```

这是我写的代码：

```
list_param = {}
for param in o["persons"]:
   list_param.update({param["name"]: input("choose the age of", param["name"], " :\n" )}) 
```

我收到此错误：

```
TypeError: [raw_]input expected at most 1 arguments, got 3 
```

我该如何解决？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:16:22.260

代替`input("choose the age of", param["name"], " :\n" )`

和：`input("choose the age of "+ param["name"]+ " :\n" )`

甚至：`input("choose the age of %s:\n" % param["name"])`

`input()`接受一个字符串，您正在考虑使用`print`逗号输出，您不能这样做。将字符串连接成一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:16:39.233

你要

```
input("choose the age of %s\n" % param["name"]) 
```

在文档中搜索字符串插值。

# sql - Oracle SQL 可选主键

> ID：13919702
> 
> 赞同：1
> 
> 时间：2012-12-17T18:15:14.817
> 
> 标签：sql, oracle, reference, primary-key, optional

我正在处理的 Oracle SQL 项目中遇到问题：

我有一个（弱）实体'Ticket'，它作为主键：（Customer_id，packet_id，project_id，ticket_id）。Customer_id、packet_id 和 project_id 也是外键。

但是，一张票只能是一个数据包或一个项目，因为它们都在主键中，所以它们不能为空，而其中一个实际上总是为空的。但我需要两者，因为一张票总是属于其中的一张。

我想到了一个可能的解决方案，我认为我可以为所有产品制作 1 个 ID，但是还有另一个问题，因为如果我想将这个 product_id 实现为外键，我不知道我应该让它到哪个实体参考。

有没有办法在创建表时制作“可选主键”或使用 if 语句？还是一种可选参考的方法？我已经尝试过 if 语句和一个案例，但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:28:04.777

很大程度上取决于这些实体所代表的确切含义。由于票证可以用于数据包或项目，这意味着有一些更高级别的实体将数据包和项目结合在一起。这可以建模为一个新表，它是两者的父表，`PACKET`或者`PROJECT`可以通过组合`PACKET`and`PROJECT`表并添加一个`TYPE`区分数据包和项目的列来建模。然后该`TICKET`表将引用新的父表或组合表。

但是，退后一步，如果`TICKET`实体有`TICKET_ID`，则似乎`TICKET_ID`one 应该是主键。如果您有一个列，那么您将拥有一个复合主键似乎很不寻常`TICKET_ID`——您真的希望`TICKET`表中允许多行具有相同`TICKET_ID`的与不同的客户、数据包和项目相关的行吗？如果`TICKET_ID`单独是主键，那么两者`PACKET_ID`和`PROJECT_ID`都可以是可为空的外键，并且您可以创建一个`CHECK`约束，以确保两者中的一个恰好是非 NULL。

# mysql - 使用数据库表根本错误

> ID：13919704
> 
> 赞同：0
> 
> 时间：2012-12-17T18:15:22.413
> 
> 标签：mysql, database, database-design

我的实践项目的整个概念是有一个教授评审系统。我可以在其中手动将教授和部门输入到一个表中，然后允许用户搜索该教授。但是，我将该类别表仅用于名称和部门，作为不可编辑的硬编码名称和部门池供选择。然后采取他们选择的任何内容，并显示一个表格，其中预先填充了该选择选项的名称/部门字段以及空白字段以及我的教授表中的其余属性。因此，将类别渲染为只是到达我教授餐桌的工具。每个教授都会有多个评论，那么我应该如何有效地构建这些表格以实现规范化？

## 类别表

*   教授小号（6）（PK）
*   说明 varchar(40)
*   离开 varchar(50)

## 教授桌

*   教授小号（6）
*   评分 smallint(6)
*   容易小int（6）
*   教科书 varchar(3)
*   时间戳时间戳
*   课程字符（10）
*   曲线字符（3）
*   评论小文本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:24:14.897

您应该从教授表中删除一些属性并将其移动到新的评论表中。我会包括

*   评分
*   轻松
*   评论
*   曲线

在审查表中。创建一个课程表可能是明智的。

# java - 正则表达式包装词

> ID：13919708
> 
> 赞同：-5
> 
> 时间：2012-12-17T18:15:33.583
> 
> 标签：java, regex

如果有人可以为我提供正则表达式来执行以下操作，我将不胜感激。

规则：

*   除了 'and' 之外的所有单词都需要用 SYN() 包裹
*   字符串可以包含无限数量的单词，相同的规则适用于字符串中的所有单词。

例子：

'伦敦和厕所'变成'SYN（伦敦）和SYN（厕所）'

'10 and Mayfield and London' 将变为 '10 and SYN(Mayfield) and SYN(London)' （10 没有包装，因为它不是一个词）

我提出问题的原因是我使用的是 ORACLE 词库，并且 SQL 语法需要用 SYN() 包裹单词。

我最初打算通过搜索空格然后使用 String.format(SYN(%s), 'London') 将单词包装在 SYN() 中来拆分字符串中的所有单词，但我知道所有这些可以用正则表达式来完成，我认为会有一些热切的正则表达式狂热者会帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:34:42.293

尝试

```
System.out.println("10 and Mayfield and London".replaceAll("(\\p{Alpha}+)", "SYN($1)").replace("SYN(and)", "and")); 
```

输出

```
10 and SYN(Mayfield) and SYN(London) 
```

# clojure - 替换序列中的值

> ID：13919710
> 
> 赞同：2
> 
> 时间：2012-12-17T18:16:04.287
> 
> 标签：clojure, sequence

我在创建一个替换序列中所有出现的值的函数时遇到问题。

示例：将“a”替换为“z”；输入：

```
((a b) f ((a b c) (e r) a) a) 
```

预期输出：

```
((z b) f ((z b c) (e r) z) z) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T19:36:16.103

`prewalk-replace`如果您严格将一个值交换为另一个值，则比@mobyte 的答案稍微简单一些：

```
(def thing '( (a b) f ( (a b c) (e r) a ) a ))

(use '[clojure.walk :only [prewalk-replace]])

(prewalk-replace {'a 'z} thing)
; ((z b) f ((z b c) (e r) z) z 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:25:02.623

```
(use '[clojure.walk :only (postwalk)])

(postwalk #(if (= % 'a) 'z %) '( (a b) f ( (a b c) (e r) a ) a ))
-> ((z b) f ((z b c) (e r) z) z) 
```

# java - 是否可以使用 if 标记 春季webflow中的状态

> ID：13919712
> 
> 赞同：1
> 
> 时间：2012-12-17T18:16:11.697
> 
> 标签：java, spring, spring-webflow-2

我在 spring web-flow 2 中编写了如下流程。但是我收到错误作为**无效内容**。

```
<on-entry>
<decision-state="check">
<if test="some condition" then="x state" else="y state"/>
</decision-state>
</on-entry>

<view-state id="x state">
<evaluate expression="...."/>
</view-state> 
```

在进入状态下是否可以使用 if 标记？我们可以在进入时使用决策状态吗？

如果条件为真，我必须评估`<on-entry>`状态中的方法。否则，它不应该在`<on-entry>`状态下评估。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T18:34:47.860

首先，`<on-entry>`仅在状态内部才有意义。
其次，您不能在`<on-entry>`

你应该做的只是定义你的`decision-state`和 webflow 将自动使用它作为入口点。

```
<decision-state id="check">
    <if test="some condition" then="xState" else="yState"/>
</decision-state>

<view-state id="xState">
    <evaluate expression="...."/>
</view-state>

<view-state id="yState">
    <evaluate expression="...."/>
</view-state> 
```

让我们看看这个流程，入口点显然是`check`，这是您的决策状态，因为`x state`和`y state`都被它调用。

所以你的流程图是

             x状态
          /
检查
          \
             y状态

，因为没有别的办法。我想这是你想要的行为

[编辑] 这是一个具有 2 个动作状态的示例：

```
<decision-state id="check">
    <if test="some condition" then="xState" else="yState"/>
</decision-state>

<action-state id="xState">
    <evaluate expression="expr1"/>
    <transition on="success" to="zState"/>
</action-state>

<action-state id="ySate">
    <evaluate expression="expr2"/>
    <transition on="success" to="zState"/>
</action-state>

<view-state id="zState">
</view-state> 
```

              x action-state
          / (evaluate expr1) \
check view-state
          \ /
              y action-state
            (evaluate expr2)    

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-04T16:42:25.503

是的，如果条件 x = y 使用 lambda？“真结果”：“假结果”

```
 <view-state id="viewId">
        <on-entry>
            <evaluate expression="flowScope.varx == x ? Bean.dosomethingX() : Bean.somethingY()" result="flowScope.varResult" />
        </on-entry>
    </view-state> 
```

或开始

```
 <on-start>
            <evaluate expression="flowScope.varx == x ? Bean.somethingX(): Bean.somethingY() " result="flowScope.varResult" />
        </on-start> 
```

# java - 如何在java中获取表的getGeneratedKeys()

> ID：13919714
> 
> 赞同：0
> 
> 时间：2012-12-17T18:16:16.407
> 
> 标签：java, sql-server-2008, jakarta-ee, jdbc, jdbc-odbc

我有一个 java web 项目。我在 Sql Server 2008 中有数据库，其中包含**人员**和**客户**表。我将值（用户名、密码、角色）插入到**人员**表中，然后获取生成的 id 值“pid”并将其与其他属性到表**客户**。这是我的代码`/*

```
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.Statement;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException{
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();

 String name=request.getParameter("name");  
 String email=request.getParameter("email");
 String house=request.getParameter("house");
 String street=request.getParameter("street");
 String city=request.getParameter("city");
 String state=request.getParameter("state");
 String phone = "6086492155";
 int pincode=Integer.parseInt(request.getParameter("zip"));
 String username=request.getParameter("username");
 String password=request.getParameter("password");

try{
   Connection con= getConnection(response);
   PreparedStatement ps =con.prepareStatement("insert into person (username,password,role) values(?,?,'normaluser')",Statement.RETURN_GENERATED_KEYS);
   ps.setString(1, username);
   ps.setString(2, password);
   int i=ps.executeUpdate();
   ResultSet rs = ps.getGeneratedKeys();
    if (rs.next()) {
    int pId = rs.getInt(1);

    }
   PreparedStatement ps2= con.prepareStatement("insert into customer (name,email,house,street,city,state,pincode,phone,pid) values(?,?,?,?,?,?,?,?,?,pId)");
    ps.setString(1, name);
   ps.setString(2, email); 
   ps.setString(3, house);
   ps.setString(4, street);
   ps.setString(5, city);
   ps.setString(6, state);
   ps.setInt(7, pincode);
   ps.setString(8, phone);
    int j=ps2.executeUpdate();
   out.println(i);

   con.close();
if(i>0)
{
    out.println("inserted");
}
else
{
 out.println("not inserted");   
}
}
catch(Exception e){
   out.println("not inserted"+e); 
}
}

@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    processRequest(request, response);
}

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    processRequest(request, response);
}

@Override
public String getServletInfo() {
    return "Short description";
}// </editor-fold>

public Connection getConnection (HttpServletResponse response){
     Connection con=null;
        try{
                   PrintWriter out = response.getWriter();

                try{

                    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
                 con=DriverManager.getConnection("jdbc:odbc:OnlineShopping");;                   
                }
                catch(Exception e){
                   out.println(e.getMessage()); 
                }

        }catch(Exception e){
        }
        return con;
        }    
} 
```

但是我收到错误**java.lang.UnsupportedOperationException**。我认为错误是由于这条线`ResultSet rs = ps.getGeneratedKeys();`我是初学者所以谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:14:04.447

您使用的 Jdbc 驱动程序不支持此方法。广泛使用的 MS SQL Server JDBC 驱动程序 - [jTDS](http://jtds.sourceforge.net/)支持检索生成的密钥。[这](http://www.java-tips.org/other-api-tips/jdbc/how-to-get-auto-generated-keys-from-java-class-3.html)是在类似任务中使用此驱动程序的示例。

要使用不同的驱动程序更改这些行：

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
con=DriverManager.getConnection("jdbc:odbc:OnlineShopping"); 
```

在 jTDS 的情况下，它将是这样的：

```
Class.forName("net.sourceforge.jtds.jdbc.Driver");
conn = DriverManager.getConnection("jdbc:jtds:sqlserver://localhost:1433/mydb","login","password"); 
```

# php - php将选中的项目插入mysql

> ID：13919722
> 
> 赞同：-1
> 
> 时间：2012-12-17T18:16:41.710
> 
> 标签：php, javascript, mysql

我需要这方面的帮助。我只想将已选中的项目提交到 mysql 表。

这是从 php 页面呈现的 html：

```
<table id="mylist" data-campaignId="2" cellspacing="0" width="100%">
<tbody>
        <tr>
      <td><input type="checkbox" name="selected[]" value="92" class="checkbox"></td>
      <td><a href="/client/view/92">Bob</a></td>
      <td><ul class="keywords">
          <li><a href="#">Peter T</a></li>
          <li class="orange-keyword"><a href="#">New Lead</a></li>
        </ul></td>
      <td>(555) 555-5555</td>
      <td>dad@msn.com.com</td>
      <td>2011-03-21</td>
      <td class="table-actions"><a href="/client/view/92" title="View / Edit" class="with-tip"><img src="/images/icons/fugue/pencil.png" width="16" height="16"></a></td>
    </tr>
    <tr>
      <td><input type="checkbox" name="selected[]" value="1074" class="checkbox"></td>
      <td><a href="/client/view/1074">Elinda Canty</a></td>
      <td><ul class="keywords">
          <li><a href="#">Mary</a></li>
          <li class="orange-keyword"><a href="#">New Lead</a></li>
        </ul></td>
      <td></td>
      <td>mary@live.com</td>
      <td>2011-06-29</td>
      <td class="table-actions"><a href="/client/view/1074" title="View / Edit" class="with-tip"><img src="/images/icons/fugue/pencil.png" width="16" height="16"></a></td>
    </tr>

</tbody>
</table>
<button id="add_users_to_campaign">Add Selected to Subscribers</button> 
```

这是页面的完整来源。

```
<? $campaignid = $this->uri->segment(4); ?>
<script type="text/javascript">
<!--
$(document).ready(function(){
toggleChecked = function(status)
{

$(".checkbox").each( function() {
    $(this).attr("checked",status);
});
}
});
-->
</script>

<script type="text/javascript">
$(function() {
$('#add_users_to_campaign').click(function() {
var campaignId = $("#mylist").attr("data-campaignId");
var clientid = [];
$("#mylist :checked").each(function() {
    clientid.push($(this).closest("tr").attr("data-clientid"));
});
if (clientid.length === 0) {
    return;
}
console.log(campaignId, clientid);
$.post('/ajaxmodels/add_users_to_campaign', {
    campaignId: campaignId,
    "clientid[]": clientid
}, function(data) {}, "json");
});
});​
</script>

<!-- Content -->
<article class="container_12">

<section class="grid_12">
    <div class="block-border">
    <?
    $attributes = array('class' => 'block-content form', 'id' => 'table_form');
    echo form_open('', $attributes);
    ?>
        <h1>Search Fields</h1>
        <div class="columns">
            <p class="colx4-left">
                <label>Find</label>
                <?php echo form_dropdown('quicksearch',$qs_array,'','class="full-width"');?>
            </p>
            <p class="colx4-mid">
                <label>Where</label>
                <?php echo form_dropdown('where',$where_array,'','class="full-width"');?>
            </p>
            <p class="colx4-center">
                <label>Search</label>
                <?php echo form_input('searchfor','','class="full-width"');?>
            </p>
            <p class="colx4-right">
                <label>&nbsp;</label>
                <input type="submit"/>
            </p>
        </div>
    <? echo form_close(); ?></div>
</section>

<section class="grid_12">
    <div class="block-border">
    <form class="block-content form" id="table_form" method="post" action="">
        <h1>Sortable table</h1>

        <table id="mylist" data-campaignId="<?=$campaignid?>" class="table sortable no-margin" cellspacing="0" width="100%">

            <thead>
                <tr>
                    <th class="black-cell"><span class="loading"></span></th>
                    <th scope="col">
                        <span class="column-sort">
                            <a href="#" title="Sort up" class="sort-up"></a>
                            <a href="#" title="Sort down" class="sort-down"></a>
                        </span>
                        Name
                    </th>
                    <th scope="col">Client Of</th>
                    <th scope="col">
                        <span class="column-sort">
                            <a href="#" title="Sort up" class="sort-up"></a>
                            <a href="#" title="Sort down" class="sort-down"></a>
                        </span>
                        Home Phone
                    </th>
                    <th scope="col">
                        <span class="column-sort">
                            <a href="#" title="Sort up" class="sort-up"></a>
                            <a href="#" title="Sort down" class="sort-down"></a>
                        </span>
                        Email
                    </th>
                    <th scope="col">
                        <span class="column-sort">
                            <a href="#" title="Sort up" class="sort-up"></a>
                            <a href="#" title="Sort down" class="sort-down"></a>
                        </span>
                        Created On
                    </th>
                    <th scope="col" class="table-actions">Actions</th>
                </tr>
            </thead>

            <tbody>
            <?php foreach($r->result() as $row) : ?>
                <tr>" 
                  <td>
                    <input type="checkbox" name="selected[]" value="<?=$row->id?>" class="checkbox">
                  </td>
                    <td><a href="/client/view/<?=$row->id?>"><?=$row->firstname?> <?=$row->lastname?></a></td>
                    <td><ul class="keywords">
                        <li><a href="#"><?=$row->clientof?></a></li>
                        <li class="orange-keyword"><a href="#"><?=$row->status?></a></li>
                    </ul></td>
                    <td><?=$row->homephone?></td>
                    <td><?=$row->email?></td>
                    <td><?=$row->created?></td>
                    <td class="table-actions">
                        <a href="/client/view/<?=$row->id?>" title="View / Edit" class="with-tip"><img src="/images/icons/fugue/pencil.png" width="16" height="16"></a>
                    </td>
                </tr>
            <?php endforeach;?>
            </tbody>

        </table>

        <div class="clear"></div>

<div class="block-footer">
            <img src="images/icons/fugue/arrow-curve-000-left.png" width="16" height="16" class="picto"> 
            <a href="javascript:toggleChecked('checked')" class="button">Select All</a> 
            <a href="javascript:toggleChecked('')" class="button">Unselect All</a>
            <span class="sep"></span>
            <button id="add_users_to_campaign">POST selected</button>
        </div>                  
    </form></div>
</section>
</article><!-- End Content --> 
```

我只想将选中的项目插入此表：

ID - 自动递增

活动ID

客户编号

创建日期

我怎样才能做到这一点？

我还需要避免将客户端 ID 重复插入到相同的活动 ID 中。因此，如果此活动 ID 的客户端 ID 已存在，则跳过插入。

这是我目前在控制器 ajaxmodels 中的功能：

```
function add_users_to_campaign(){
$campagnid=$this->input->post('campaignid');
$client = $this->input->post('client');
    foreach ($client as $client_id) {
        $submit['clientid'] = $clientid;
        $submit['campaignid'] = $this->input->post('campaignid');
        $submit['creationdate'] = date('Y-m-d H:i:s');
        $submit['createdby'] = $this->session->userdata('uid');
        $newid = $this->campaign_model->add_user_to_campaign($submit);

    }
} 
```

这是campaign_model->add_user_to_campaign

```
function add_user_to_campaign($data)
{
    $this->db->insert('campaign_to_client',$data);

    $newid = $this->db->insert_id();
    return $newid;
} 
```

当我检查一个项目并提交页面刷新时没有错误并且我没有插入任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:46:00.437

不要在第一个实例中做所有四个（即让你绕过它），只尝试表中的一行，看看是否有效。

此外，您应该考虑不要使用每个项目的相同名称。即使用

```
<input type="checkbox" name="selected[1]" class="checkbox" value="yes">
<input type="checkbox" name="selected[92]" class="checkbox" value="yes">
<input type="checkbox" name="selected[1024]" class="checkbox" value="yes"> 
```

**编辑**

从表单中成对返回的数据（即名称、值）。名称必须是唯一的。但你的不是。您有三个具有价值`selected[]`且具有不同（潜在）价值的名称。你怎么区分他们？

我的第一段是解释如何最好地进行调试（首先使其简单，然后添加更多复杂性。

**进一步编辑**

我在上面添加了值位。

或者你可以这样做

```
<input type="checkbox" name="selected[]" class="checkbox" value="1">
<input type="checkbox" name="selected[]" class="checkbox" value="92">
<input type="checkbox" name="selected[]" class="checkbox" value="1024"> 
```

**米老鼠示例**

PHP优先

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body>
<pre>

The forms data
<?php
$selector = $_GET['selector'];
print_r($selector);
echo "Now go through than data\n";

foreach ($selector as $name=>$value)
{
    // Find the name
    $character = $_GET["id$name"];

    echo "$character is $name or $value depends on the method you chose\n";
}
echo "\n\nThose are the checked ones";
?>
</pre>
</body>
</html> 
```

这是表格：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Wibble</title>
</head>
<body>
<form action="send.php" method="get">
<input type="hidden" name="id0" value="client Joe Bloggs">
<input type="hidden" name="id1" value="Client Bugs Bunny">
<input type="hidden" name="id2" value="Client Al Capone ">
Check 1 <input type="checkbox" name="selector[]" value="1">
Check 80 <input type="checkbox" name="selector[]" value="80">
Check 200 <input type="checkbox" name="selector[]" value="200">
<input type="submit" value="depends">
</form>
<form action="send.php" method="get">
<input type="hidden" name="id1" value="client Joe Bloggs">
<input type="hidden" name="id80" value="Client Bugs Bunny">
<input type="hidden" name="id200" value="Client Al Capone ">
Check 1 <input type="checkbox" name="selector[1]" value="yes">
Check 80 <input type="checkbox" name="selector[80]" value="yes">
Check 200 <input type="checkbox" name="selector[200]" value="yes">
<input type="submit" value="otherway">
</form>

</body>
</html> 
```

# c++ - 如何在 Visual Studio 2012 中禁用大括号补全？

> ID：13919727
> 
> 赞同：14
> 
> 时间：2012-12-17T18:16:58.250
> 
> 标签：c++, visual-studio-2012, matching, curly-braces

我最近升级到 Visual Studio 2012。每当我站在一个弯曲的左括号上并按下制表符时，它会自动插入 2 个新行和一个右括号。

```
{|<- cursor 
```

按标签给我。

```
{
    |
} 
```

我希望禁用此行为。在过去的一个小时里，我已经搜索了设置、Google 和[MSDN](http://msdn.microsoft.com/en-us/library/7sffa753.aspx)，但我一直找不到任何可以解决我的问题的东西。

我已禁用所有已安装的插件以查看它是否会消失，但没有。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T19:09:15.917

您看到的行为是由[代码片段](http://msdn.microsoft.com/en-us/library/ms165392.aspx)引起的。可以通过键入片段快捷方式和选项卡来激活片段。Visual Studio 2012 预装了几个不同语言的代码片段。对于 C++ 语言，有一个默认代码段，其快捷方式`{`扩展为：

```
{

} 
```

默认代码片段无法通过默认 GUI 轻松禁用，但是您应该能够删除位于（英语）的代码片段文件：

```
%VSInstallDir%\VC\Snippets\1033\Visual C++\{.snippet 
```

我相信还有其他用于管理片段的扩展。

# jeditable - 使用 jEditable 截断文本

> ID：13919729
> 
> 赞同：0
> 
> 时间：2012-12-17T18:17:04.583
> 
> 标签：jeditable

所以我的网站上有一行可编辑的文本。每当文本更改并超过一定长度时，我都会截断文本。

此处简化 jsfiddle - [http://jsfiddle.net/3kwCr/1/](http://jsfiddle.net/3kwCr/1/)

在随后单击要编辑的文本时，会拾取带有省略号的截断值。如何让 jEditable 获取作为属性存在于 div 中的实际值？

```
data: function() { $('.editable-value').attr('value') } 
```

将无法工作，因为我有几行这些可编辑的文本行

我需要类似的东西

```
data: function() { this.attr('value') } 
```

这将是 .editable 已应用于的 div 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T10:29:44.580

只需包装`this`到 jQuery 对象中，以便您可以在其上使用 jQuery 方法。下面是更新的代码。我还更新了[示例 jsFiddle](http://jsfiddle.net/3kwCr/6/)。

```
$('.editable').editable(function(value, settings) { 
    $(this).attr('value', value);
    if (value.length > 10) {
        return(value.slice(0,10)) + '...';
    } else {
        return(value);
    }
}, { 
    data    : function(value) { return($(this).attr('value')); },      
    type    : 'text',
    submit  : 'OK'
}); 
```

# php - 提取不工作

> ID：13919731
> 
> 赞同：0
> 
> 时间：2012-12-17T18:17:06.703
> 
> 标签：php

我正在使用以下代码，第一个回显工作正常，但第二个显示为未定义。

```
echo $_POST['text'];

extract($_POST, EXTR_PREFIX_ALL, "Form_");

echo $Form_text; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T18:25:08.007

[`extract`](http://php.net/manual/en/function.extract.php)已经添加`_`在前缀之后。

所以：

```
echo $Form__text; 
```

将工作。

换句话说，不需要手动添加`_`第三个参数。

你的代码应该是这样的：

```
extract($_POST, EXTR_PREFIX_ALL, "Form");

echo $Form_text; 
```

# mongodb - 与 find 选项一起使用时，Mongo DB 在什么基础上显示记录？

> ID：13919735
> 
> 赞同：0
> 
> 时间：2012-12-17T18:17:22.447
> 
> 标签：mongodb

我正在使用 MongoDB 作为我的应用程序的数据库

我有一个关于 Mongo DB find operation 的问题。

假设我在一个字段上有两个/三个相同的记录，比如数据库中存在的集合中的符号。

db.collection.find（{“符号”：“GOOG”}）

Mongo DB 显示第一条记录的依据是什么？

**编辑部分**

我的测试环境和生产环境中都存在 Mongo DB，并且具有相同的数据。

我的问题是

当我做

db.bios.find（{“名称”：“FOOGY”}）

在两种环境中显示的数据（第一条记录）存在差异？？

请让我知道为什么在发出相同的命令时在两个环境中显示的数据会有所不同

db.bios.find（{“名称”：“FOOGY”}）

请让我知道有什么经验法则应该先播种什么记录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:33:53.983

除非您明确排序，否则它们恰好存储在磁盘上的任何顺序（称为[自然顺序](http://docs.mongodb.org/manual/reference/glossary/#term-natural-order)）。如果您关心返回记录的顺序，请`sort`为您的`find`.

为了解决您更新的问题：是的，如果您将相同的文档存储在不同的 MongoDB 实例中，它们肯定可以以彼此不同的方式返回。即使是单个 MongoDb 实例也可以随着时间的推移以不同的顺序返回文档，因为文档由于更新而重新定位在磁盘上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:47:08.917

它以找到它们的任何顺序返回记录。它不是随机的，但也不是可预测的，即使你找到了一种模式，它也可能由于某种原因突然变得完全不同。当您需要特定顺序时，对结果进行排序，或在查询中包含唯一索引并使用 findOne()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:48:59.440

这些文件实际上是以查找顺序而不是`$natural`顺序返回的，并且正如所说的，关于`$natural`顺序，当我很久以前在 Google Group 中问这个问题时，它们是不一样的。

查找顺序具有随机性，但不是完全随机的。

# java - 弹簧：@组件

> ID：13919738
> 
> 赞同：2
> 
> 时间：2012-12-17T18:17:36.450
> 
> 标签：java, spring

Spring 文档以下列方式定义@Component 注解：“表明一个注解的类是一个‘组件’。当使用基于注解的配置和类路径扫描时，这些类被认为是自动检测的候选对象。”

这很简洁，但并没有说太多。我了解 @Component 用于指示类生命周期（创建/销毁）将由 Spring 管理。我的问题是：我只需要在将在某处自动装配的类中使用它（1），还是我还需要在具有自动装配属性的类中使用它（2）？

(1)

```
@Component
class B {
}

class A {

   // @Autowired
   B b;
} 
```

(2)

```
@Component
class B {
}

@Component
class A {

  // @Autowired
  B b;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T18:22:20.843

好吧，严格来说，您不必在任何地方使用，您可以像过去一样在 XML 中定义 bean。您也可以在过去使用`@Service`或喜欢。`@Repository`但回到你的问题：

如果您的 bean`A`没有使用`@Component`Spring 上下文进行注释或以其他方式已知，则 Spring 将永远不会创建和管理它。因此，您要么必须使用注释，要么必须`A`在 XML 中定义。

这也是如此`B`。如果您希望它成为自动装配的主题，则 Spring 必须知道它 - 通过注释扫描或 XML。

归根结底，使用 XML、注释还是 Java 配置并不重要。重要的是，应用程序上下文都知道这两个 bean。

# html - 如何避免全屏背景图像随着滚动条的出现而缩放？

> ID：13919742
> 
> 赞同：4
> 
> 时间：2012-12-17T18:17:50.463
> 
> 标签：html, css, browser

我的客户想要她的新网站的全屏背景。设置并没有那么复杂，因为我选择了一种 CSS3 方法，并为旧的 IE 版本提供了后备。这是CSS：

```
html {
    /* Fullscreen backgroung image per CSS3 with 'background-size: cover' */
    background: url(../images/background.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='.myBackground.jpg', sizingMethod='scale');
    -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='myBackground.jpg', sizingMethod='scale')";
} 
```

现在这确实像宣传的那样工作。但是当我重新加载一个页面或转到另一个页面时，背景图像会加载，然后出现内容，这会导致垂直滚动条，然后使背景图像缩小一点（由于现在更小的查看空间）并产生排序背景图像上的“跳跃”效果 - 非常烦人！

如果所有内容都被缓存，那很好，但否则背景图像上会有这种烦人的调整大小效果！

我怎样才能避免在内容之前加载背景图像，以便它在第一时间正确显示！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T18:20:35.487

为什么不总是像这样显示滚动条（模拟 IE 在其他浏览器中的行为）：

```
html {
     overflow: -moz-scrollbars-vertical;
     overflow: scroll;
} 
```

这是一个[演示](http://cssdesk.com/CWTbQ)（在 CSS Desk 中），看看它是否为您提供了您正在寻找的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:28:25.823

尝试添加一个具有固定位置和 100% 宽度和高度的 div。而是将您的背景样式添加到该 div 中。

# mongodb - mongodb启动时报错

> ID：13919745
> 
> 赞同：2
> 
> 时间：2012-12-17T18:17:58.387
> 
> 标签：mongodb, ubuntu, ubuntu-12.04

每当我尝试使用 mongo 的交互式 shell 时，它都会死掉：

```
somekittens@DLserver01:~$ mongo
MongoDB shell version: 2.2.2
connecting to: test
Mon Dec 17 13:14:16 DBClientCursor::init call() failed
Mon Dec 17 13:14:16 Error: Error during mongo startup. :: caused by :: 10276 DBClientBase::findN: transport error: 127.0.0.1:27017 ns: admin.$cmd query: { whatsmyuri: 1 } src/mongo/shell/mongo.js:91
exception: connect failed 
```

我能够修复安装（删除`mongodb.lock`等）并回到这一点，但它只会再次死去。

> /var/log/mongodb/mongodb.log

```
Mon Dec 17 13:14:03
Mon Dec 17 13:14:03 warning: 32-bit servers don't have journaling enabled by default. Please use --journal if you want durability.
Mon Dec 17 13:14:03
Mon Dec 17 13:14:03 [initandlisten] MongoDB starting : pid=2674 port=27017 dbpath=/var/lib/mongodb 32-bit host=DLserver01
Mon Dec 17 13:14:03 [initandlisten]
Mon Dec 17 13:14:03 [initandlisten] ** NOTE: when using MongoDB 32 bit, you are limited to about 2 gigabytes of data
Mon Dec 17 13:14:03 [initandlisten] **       see http://blog.mongodb.org/post/137788967/32-bit-limitations
Mon Dec 17 13:14:03 [initandlisten] **       with --journal, the limit is lower
Mon Dec 17 13:14:03 [initandlisten]
Mon Dec 17 13:14:03 [initandlisten] db version v2.2.2, pdfile version 4.5
Mon Dec 17 13:14:03 [initandlisten] git version: d1b43b61a5308c4ad0679d34b262c5af9d664267
Mon Dec 17 13:14:03 [initandlisten] build info: Linux domU-12-31-39-01-70-B4 2.6.21.7-2.fc8xen #1 SMP Fri Feb 15 12:39:36 EST 2008 i686 BOOST_LIB_VERSION=1_49
Mon Dec 17 13:14:03 [initandlisten] options: { config: "/etc/mongodb.conf", dbpath: "/var/lib/mongodb", logappend: "true", logpath: "/var/log/mongodb/mongodb.log" }
Mon Dec 17 13:14:03 [initandlisten] Unable to check for journal files due to: boost::filesystem::basic_directory_iterator constructor: No such file or directory: "/var/lib/mongodb/journal"
Mon Dec 17 13:14:03 [initandlisten] couldn't unlink socket file /tmp/mongodb-27017.sockerrno:1 Operation not permitted skipping
Mon Dec 17 13:14:03 [initandlisten] waiting for connections on port 27017
Mon Dec 17 13:14:03 [websvr] admin web console waiting for connections on port 28017
Mon Dec 17 13:14:16 [initandlisten] connection accepted from 127.0.0.1:57631 #1 (1 connection now open)
Mon Dec 17 13:14:16 Invalid operation at address: 0x819bb23 from thread: conn1

Mon Dec 17 13:14:16 Got signal: 4 (Illegal instruction).

Mon Dec 17 13:14:16 Backtrace:
0x8759eaa 0x817033a 0x81709ff 0x20e40c 0x819bb23 0x854cd54 0x85377d1 0x846b594 0x83e5591 0x83e6c15 0x81902b4 0x8746731 0x49ad4c 0x34ed3e
 /usr/bin/mongod(_ZN5mongo15printStackTraceERSo+0x2a) [0x8759eaa]
 /usr/bin/mongod(_ZN5mongo10abruptQuitEi+0x3ba) [0x817033a]
 /usr/bin/mongod(_ZN5mongo24abruptQuitWithAddrSignalEiP7siginfoPv+0x2af) [0x81709ff]
 [0x20e40c]
 /usr/bin/mongod(_ZNK5mongo7BSONObj4copyEv+0x33) [0x819bb23]
 /usr/bin/mongod(_ZN5mongo11ParsedQuery4initERKNS_7BSONObjE+0x494) [0x854cd54]
 /usr/bin/mongod(_ZN5mongo11ParsedQueryC1ERNS_12QueryMessageE+0x91) [0x85377d1]
 /usr/bin/mongod(_ZN5mongo8runQueryERNS_7MessageERNS_12QueryMessageERNS_5CurOpES1_+0x34) [0x846b594]
 /usr/bin/mongod() [0x83e5591]
 /usr/bin/mongod(_ZN5mongo16assembleResponseERNS_7MessageERNS_10DbResponseERKNS_11HostAndPortE+0x3d5) [0x83e6c15]
 /usr/bin/mongod(_ZN5mongo16MyMessageHandler7processERNS_7MessageEPNS_21AbstractMessagingPortEPNS_9LastErrorE+0x84) [0x81902b4]
 /usr/bin/mongod(_ZN5mongo3pms9threadRunEPNS_13MessagingPortE+0x421) [0x8746731]
 /lib/i386-linux-gnu/libpthread.so.0(+0x6d4c) [0x49ad4c]
 /lib/i386-linux-gnu/libc.so.6(clone+0x5e) [0x34ed3e] 
```

使用节点的外壳连接：

```
> mdb.open(function(err, db) { console.log(err) });
[Error: failed to connect to [localhost:27017]] 
```

我四处寻找这个错误，并没有发现任何用处。这是在相当旧的服务器上运行的（Ubuntu 12.04 32 位，640MB RAM，500MHz P2）。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:50:51.190

存在问题[Invalid operation at address: 0x819b263 from thread: TTLMonitor](https://jira.mongodb.org/browse/SERVER-7012) in mongodb jira list。我认为这与您的情况有关。

新服务器可能是最简单的解决方案，否则您必须下载源代码，进行一些修改并自行编译。

# c# - “表或视图不存在”，但只是有时

> ID：13919746
> 
> 赞同：1
> 
> 时间：2012-12-17T18:18:00.247
> 
> 标签：c#, asp.net, database-connection, oledb

当用户按下我网站上的按钮时，SQL 选择语句会运行，我这样做：

```
connection = new OleDbConnection();
connection.ConnectionString = [connection string];
connection.Open();

cmd = profile.Execute(mySQLStatement);
da = new OleDbDataAdapter(cmd);
table = new DataTable();
da.Fill(table); 
```

90％的时间，这工作得很好。但是每隔一段时间，我就会得到 OleDbException`table or view does not exist`就行了`da.Fill(table)`。似乎没有一种何时有效，何时无效的模式，尽管当网站一两分钟不使用时，它更有可能不起作用......就像会话可能即将到期一样。但是网站的其余部分（不需要这个数据库）可以工作。

关于可能发生的事情或如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:21:40.093

I have not found a solution. As a temporary fix, whenever this happens, I just re-start the page.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:27:24.497

有时 mySqlStatement 的内容并不完全正确，也许吧？将异常转储 mySqlStatement 捕获到日志文件（带有发生日期和时间），然后抛出。

# php - 如何使用 $_SERVER['HTTP_USER_AGENT'] 来确定是否使用移动设备或选项卡来获取页面的宽度

> ID：13919747
> 
> 赞同：0
> 
> 时间：2012-12-17T18:18:00.167
> 
> 标签：php, mobile, tablet

我如何确定页面是使用平板电脑还是手机打开的，我知道您可以检查 iPhone、iPad 等，但是在确定页面是使用手机还是平板电脑打开时，是否有更明确的标识符？

我正在使用它，所以我可以获取页面的宽度，但是如果有更有效的方法来获取页面的当前宽度，请告诉我

谢谢你 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:26:52.967

请参阅[http://php.net/manual/en/function.get-browser.php](http://php.net/manual/en/function.get-browser.php) 您可能需要一些 JavaScript 来获取视口的尺寸。

# javascript - 遍历java脚本中的不同文本框并赋值

> ID：13919748
> 
> 赞同：2
> 
> 时间：2012-12-17T18:18:00.933
> 
> 标签：javascript

我试图循环遍历文本框并为其分配值。我创建了三个数组列表`ids[]`，，，`id1s[]`。`id2s[]`

`ids[]`必须在第一列中填充值，并且它会很好。但是需要在第 2 列和第 3 列中填充和中的`id1s[]`值。`id2[]`循环运行 5 次。第一次它填充在第一行，但从下一次开始它覆盖第一行..而不是第二行

以下是我的代码：-

```
<!DOCTYPE html>
  <html>
    <head>
      <script>
        function start()
        {
          var ids = ["A", "B", "C", "D", "E"];
          var id1s = [1,2,3,4,5];
          var id2s = [6,7,8,9,10];
          for (var i = 0; i < ids.length; i++){
            var value=ids[i];
            addrow(value);
            addData(id1s[i], id2s[i]);
          }
        }

        function addrow(value)
        {
          var test1 = value+'1';
          var test2 = value+'2';
          var TABLE = document.getElementById('tableId');
          var BODY = TABLE.getElementsByTagName('tbody')[0];
          var TR = document.createElement('tr');
          var TD1 = document.createElement('td');
          var TD2 = document.createElement('td');
          var TD3 = document.createElement('td');
          TD1.innerHTML = value;
          TD2.innerHTML = "<input type='text' id='test1' value=''>";
          TD3.innerHTML = "<input type='text' id='test2' value=''>";
          TR.appendChild (TD1);
          TR.appendChild (TD2);
          TR.appendChild (TD3);
          BODY.appendChild(TR);
        }

        function addData(num,num1)
        {
          alert("Showing assignment of values");
          document.getElementById("test1").value=num;
          document.getElementById("test2").value=num1;
        }
      </script>
    </head>
  <body>

  <table id="tableId" border='1' cellspacing='0' cellpadding='0'>
  <tr>
    <td>Variable</td> 
    <td>Value1</td>
    <td>Value2</td>
  </tr>
  <button type="button" onclick="start()">Display</button>                  
  </table>

</body> 
```

请建议如何遍历在第 2 列和第 3 列中创建的文本框

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:08:34.553

我修改了您的 addrow 和 addData 函数

对于 addrow 函数，您必须使用 test1 和 test2 中的值来形成这样的输入 id

```
TD2.innerHTML ="<input type='text' id='"+ test1 + "' value=''>";
TD3.innerHTML ="<input type='text' id='"+ test2 + "' value=''>"; 
```

对于 addData 函数，将“value”变量作为参数引入，并将 document.getElementById 语句更改为

```
document.getElementById(value + "1").value=num;
document.getElementById(value + "2").value=num1; 
```

请检查 jsFiddle [http://jsfiddle.net/TbGcD/1/](http://jsfiddle.net/TbGcD/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:28:09.643

以我的经验，这样的东西应该提供不错的性能

```
<!DOCTYPE html>
    <html>
        <head>
        <script>
        function start()
        {
            var ids = ["A", "B", "C", "D", "E"];
            var id1s = [1,2,3,4,5];
            var id2s = [6,7,8,9,10];
            var table= document.getElementById('tableId').getElementsByTagName('tbody')[0];

            for (var i = 0; i < ids.length; i++){
                alert("Showing assignment of values");
                table.innerHTML+= '<tr><td>'+ids[i]+'</td><td>'+id1s[i]+'</td><td>'+id2s[i]+'</td></tr>';
            }
        }
        </script>
    </head>
    <body>
    <button type="button" onclick="start()">Display</button>
    <table id="tableId" border='1' cellspacing='0' cellpadding='0'>
        <tr>
            <td>Variable</td> 
            <td>Value1</td>
            <td>Value2</td>
        </tr>
    </table>
</body> 
```

如果您不需要查看单独分配的每一行，我建议您执行以下操作

```
<!DOCTYPE html>
    <html>
        <head>
        <script>
        function start()
        {
            var ids = ["A", "B", "C", "D", "E"];
            var id1s = [1,2,3,4,5];
            var id2s = [6,7,8,9,10];
            var table= document.getElementById('tableId').getElementsByTagName('tbody')[0];
            var text='';

            for (var i = 0; i < ids.length; i++){
                text+='<tr><td>'+ids[i]+'</td><td>'+id1s[i]+'</td><td>'+id2s[i]+'</td></tr>';
            }
            table.innerHTML+= text;
            text='';
        }
        </script>
    </head>
    <body>
    <button type="button" onclick="start()">Display</button>
    <table id="tableId" border='1' cellspacing='0' cellpadding='0'>
        <tr>
            <td>Variable</td> 
            <td>Value1</td>
            <td>Value2</td>
        </tr>
    </table>
</body> 
```

# java - 将数组值加载到类中

> ID：13919750
> 
> 赞同：0
> 
> 时间：2012-12-17T18:18:12.483
> 
> 标签：java, android, arrays, object

我在程序中动态创建对象并从 array.xml 填充它们。在 array.xml 中，我有一系列工具和值，我需要将它们加载到每个项目的类值中。

这是我在课堂上的内容；

```
public class ToolImporter extends Application{

public static Tool[] tools;
private String[] aTool;
private int i;

public ToolImporter() {

    aTool = getResources().getStringArray(R.array.tools); //null pointer?

    // TODO Auto-generated constructor stub
} 
```

这是我的array.xml；

```
 <array name="tools">
        <item name="SAW">
            <id>1</id>
            <image>R.drawable.image_saw100x60px</image>
            <boxX>100</boxX>
            <boxY>100</boxY>
            <worktopX>200</worktopX>
            <worktopY>200</worktopY>
        </item>
        <item name="SCREWDRIVER">
            <id>2</id>
            <image>R.drawable.image_screwdriver100x60px</image>
            <boxX>150</boxX>
            <boxY>100</boxY>
            <worktopX>250</worktopX>
            <worktopY>200</worktopY>
        </item>
        <item name="HAMMER">
            <id>3</id>
            <image>R.drawable.image_hammer100x60px</image>
            <boxX>200</boxX>
            <boxY>100</boxY>
            <worktopX>300</worktopX>
            <worktopY>200</worktopY>
        </item>
    </array> 
```

但是，它会在“//null 指针？”上抛出一个空指针？线。任何人都可以就我在导入它时做错了什么提供建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:22:58.620

根据这篇[文章](https://stackoverflow.com/a/11111329/205426)：

除非触发了 onCreate() 回调，否则不应调用 getResources()。

```
public class StackStackActivity extends Activity 
{

    String[] myArray = getResources().getStringArray(R.array.glenns); // This returns null

    public StackStackActivity()
    {

        myArray = getResources().getStringArray(R.array.glenns); // This returns null also
    }

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        myArray = getResources().getStringArray(R.array.glenns); // Returns an array from resources
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:27:52.207

在 Application 类中创建字段变量，然后在主活动类的 onCreate 方法中初始化它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:37:25.740

在 ToolImporter 类中创建一个“上下文”字段。将您的活动的上下文传递给 ToolImporter 构造函数中的 ToolImporter 类。

使用上下文字段访问 getResources()

```
aTool = context.getResources().getStringArray(R.array.tools); 
```

# powershell - Add-Type -path "c:\Oracle\Oracle.ManagedDataAccess.dll" 在 Powershell 中失败

> ID：13919757
> 
> 赞同：0
> 
> 时间：2012-12-17T18:18:46.580
> 
> 标签：powershell, oracle11g

我正在尝试按照[这篇文章的说明在 PowerShell 中建立 Oracle 连接](http://blogs.technet.com/b/heyscriptingguy/archive/2012/12/04/use-oracle-odp-net-and-powershell-to-simplify-data-access.aspx)。当我尝试加载 Oracle .dll 时，我得到一个操作不受支持的错误。

```
PS C:\windows\system32> Add-Type -path "C:\Oracle\Oracle.ManagedDataAccess.dll"
Add-Type : Could not load file or assembly 'file:///C:\Oracle\Oracle.ManagedDataAccess.dll' or one of its dependencies.
 Operation is not supported. (Exception from HRESULT: 0x80131515)
At line:1 char:9
+ Add-Type <<<<  -path "C:\Oracle\Oracle.ManagedDataAccess.dll"
    + CategoryInfo          : NotSpecified: (:) [Add-Type], FileLoadException
    + FullyQualifiedErrorId : System.IO.FileLoadException,Microsoft.PowerShell.Commands.AddTypeCommand 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:22:51.973

通过在 TNSNAMES.ORA 中添加正确的条目并重新启动 powershell 已解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:24:18.453

你可以这样尝试：

```
[System.Reflection.Assembly]::LoadFrom("C:\Oracle\Oracle.ManagedDataAccess.dll") 
```

验证是否有权访问文件夹并解锁文件。

# asp.net - 无法让 iisnode 和 websockets 正常工作

> ID：13919759
> 
> 赞同：0
> 
> 时间：2012-12-17T18:18:57.280
> 
> 标签：asp.net, node.js, websocket, iisnode

我只是想让节点和 websockets 与 ASP.NET MVC 项目一起运行。我在 Server 2012、IIS8、最新的 node.js 和[iisnode](https://github.com/tjanczuk/iisnode "iisnode")上运行。为 IIS 启用了 Websocket，并且 .NET 4.0 MVC 项目运行良好。此外，我可以在独立于 IIS 的节点上运行 websockets（在单独的端口上）。

我下载了[faye websocket](https://github.com/faye/faye-websocket-node "faye websockets")和[dante 示例项目](https://github.com/tjanczuk/dante "但丁示例项目")并安装了它。

当我没有禁用 websockets 时，我得到

`Unable to establish WebSocket connection to ws://localhost/dante/server.js`

当我禁用 websockets 时，无论是在 dante 还是 wwwroot 中，我都会得到

`This configuration section cannot be used at this path. This happens when the section is locked at a parent level. Locking is either by default (overrideModeDefault="Deny"), or set explicitly by a location tag with overrideMode="Deny" or the legacy allowOverride="false".`

我试图`overrideMode="Allow"`在 wwwroot webconfig 中指定，但这似乎不起作用。

我也尝试过删除 wwwroot web.config ，它似乎没有任何区别。我还尝试关闭服务器上的防火墙（只是为了好玩），但这并没有改变任何东西。

感谢您的任何帮助和帮助。我愿意使用任何东西（例如 socket.io），但想继续在同一端口上运行 ASP.NET MVC 和节点，以消除防火墙问题并防止不得不使用多个服务器/域/等。

编辑：运行

`c:\windows\system32\inetsrv\appcmd.exe unlock config -section:system.webServer/webSocket`

使 IIS 错误消失，但现在我仍然收到：

`Unable to establish WebSocket connection to ws://localhost/dante/server.js/ws WebSocket connection is closed.`

我在[这里](https://github.com/tjanczuk/dante/issues/1 "这里")打开了一个问题。

编辑 2：我已经从 Web 平台安装程序安装了 iisnode。显然，来自 WebPI 的版本是旧的。我需要在为 IIS 7.x/8.x 安装下从 github 站点[获取](https://github.com/tjanczuk/iisnode "这里")**最新**信息。一旦我安装了最新版本，它就可以工作了！这是太棒了！感谢 tjanczuk！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:41:31.190

iisnode 从 0.2.0 版开始添加了对 websockets 的支持。确保使用来自[https://github.com/tjanczuk/iisnode](https://github.com/tjanczuk/iisnode)的链接安装最新的 iisnode 。

# ember.js - ember 数据一对一关联返回未定义

> ID：13919761
> 
> 赞同：1
> 
> 时间：2012-12-17T18:19:00.917
> 
> 标签：ember.js, ember-data

我有这两个资源：

```
App.Users = DS.Model.extend({
    first_name: DS.attr('string'),
    last_name: DS.attr('string'),
    email: DS.attr('string'),
    userprofile: DS.belongsTo('App.Userprofiles', {embedded:true}),
    fullName: function() {
        return this.get('first_name') + ' ' + this.get('last_name');
    }.property('first_name', 'last_name'),
    didLoad: function() {
        console.log('Developer model loaded', this);
    }
});

App.Userprofiles = DS.Model.extend({
    company: DS.attr('string'),
    user: DS.belongsTo('App.Developers'),
    didLoad: function() {
        console.log('Developer Profile model loaded', this);
    }
}) 
```

这些是我的视图和控制器：

```
App.UserInfoController = Ember.ObjectController.extend({
    content: App.store.find(App.Users, 1),
}).create();

App.UserInfoView = Ember.View.extend({
    controller: App.UserInfoController,
    contentBinding: 'controller.content'
}); 
```

这是来自我的 API 的用户的示例响应

```
{
  "email": "foo@gmail.com",
  "first_name": "George",
  "id": "1",
  "last_name": "Eracleous",
  "resource_uri": "/api/v1/users/1/",
  "userprofile": {
    "company": "bar",
    "id": "1",
    "resource_uri": "/api/v1/userprofiles/1/",
    "user": "/api/v1/users/1/"
  }
} 
```

用户对象已正确加载，但是当我尝试执行 get("userprofile") 时，我得到空值。有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:25:57.840

为了加载嵌入的相关对象，您必须通过调用其“映射”函数来配置适配器使用的序列化程序。我知道的唯一方法是对序列化程序进行子类化并向其添加一个“init”函数，您可以在其中对 map 进行必要的调用。对于每个模型类的每个嵌入关系，您都必须调用“map”。这适用于一对一和对多关系。确保将您的适配器配置为使用此序列化程序。例如，请参阅[我](https://stackoverflow.com/questions/13538409/ember-data-fixtureadapter-with-embedded-hasmany/13627348#13627348)对上一个问题的回答。您也可以在线查看[此示例](http://olmeca.nl/rae/emberdata1/)。

如评论中所述，您可以直接在适配器类上调用 map() ，而不是继承序列化程序并在初始化程序中调用其 map() 函数。例如，这是我自己的代码的摘录。

```
WO.RESTAdapter.map(App.Category, {
 resourceTypes: {
  embedded: 'load'
}
});
WO.RESTAdapter.map(App.Resource, {
 resourceType: {
  embedded: 'load'
 }
});
WO.RESTAdapter.map(App.Reservation, {
 resource: {
  embedded: 'load'
 },
 user: {
  embedded: 'load'
 }
});
App.serializer = App.WOSerializer.create();
App.store = DS.Store.create({
 revision: 10,
 adapter: WO.RESTAdapter.create({
  namespace: "cgi-bin/WebObjects/Reserve.woa/ra",
  serializer: App.serializer
 }),
 serializer: App.serializer,
 adapterForType: function(type){
  return this.get('adapter');
 }
}); 
```

# php - PHP post 语法变量

> ID：13919764
> 
> 赞同：0
> 
> 时间：2012-12-17T18:19:19.463
> 
> 标签：php

我正在学习 PHP，我正在从 HTML 表单中发布变量

下面是我的代码：

```
<html>
<head>
<title>Welcome to PHP Products</title>
</head>
<body>
<?php
$txt1=$_POST["product_form_no"];
$txt2=$_POST["product_form_name"];
$txt3=$_POST["product_form_desc"];

<h1>The Entered Product</h1>

<p>Product No</p>echo $txt1;
<p>Product Name</p>echo $txt2;
<p>Product Desc</p>echo $txt3;

 ?> 
 </body>
 </html> 
```

我收到以下错误

> 解析错误：语法错误，第 12 行 C:\wamp\www\product_entered_list.php 中的意外 '<'

任何帮助都会有所帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:22:17.427

```
<?php
$txt1=$_POST["product_form_no"];
$txt2=$_POST["product_form_name"];
$txt3=$_POST["product_form_desc"];

?>   <---missing 
```

如果没有关闭`?>`，当到达 > 时，您仍处于“PHP 模式” `<h1`，并且 PHP 会尝试将其解释为 PHP 代码，而不是 HTML。

这意味着您还必须修改回声线：

```
<p>Product No</p><?php echo $txt1; ?>
                 ^^^^^^           ^^^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:30:09.317

问题是您在`<?php ?`> 标记之间输入了 HTML，也称为语法错误 :))

以后一定要使用 PHP 的[echo](http://php.net/echo)函数来正确显示输出。

```
echo "<h1>The Entered Product</h1>";

echo "<p>Product No " . $txt1 . "</p>";
echo "<p>Product Name</p>" . $txt2;
echo "<p>Product Desc</p>" . $txt3; 
```

附带说明一下，如果您正在学习并且脚本不会公开，那么直接从表单中显示页面上的数据很好。但是，如果您打算进行任何认真的编码（即公众将使用该脚本），您可能需要阅读一点关于[表单安全性](http://phpsec.org/projects/guide/2.html)的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:22:39.360

尝试在“输入的产品”之前关闭 php 标签，然后为每个 echo 打开 php 标签并关闭它们。代码将如下所示：

```
<?php
$txt1=$_POST["product_form_no"];
$txt2=$_POST["product_form_name"];
$txt3=$_POST["product_form_desc"];
?>
<h1>The Entered Product</h1>

<p>Product No</p><?php echo $txt1; ?>
<p>Product Name</p><?php echo $txt2; ?>
<p>Product Desc</p><?php echo $txt3; ?> 
```

告诉我它是否有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T18:24:11.217

试试这个...您需要在编写 HTML 之前使用结束 php 标记。

这适用于您的 POST 变量部分以及您回显 3 个变量值的位置

```
 <html>
 <head>
 <title>Welcome to PHP Products</title>
 </head>
 <body>
 <?php
    $txt1=$_POST["product_form_no"];
    $txt2=$_POST["product_form_name"];
    $txt3=$_POST["product_form_desc"];
 ?>
 <h1>The Entered Product</h1>

 <p>Product No</p> <?php echo $txt1; ?>
 <p>Product Name</p><?php echo $txt2; ?>
 <p>Product Desc</p><?php echo $txt3; ?>

 </body>
 </html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T18:24:26.070

你的问题在这里：

```
$txt3=$_POST["product_form_desc"];

<h1>The Entered Product</h1>

<p>Product No</p>echo $txt1; 
```

在 PHP 的中间，您开始使用 HTML。您必须先关闭 PHP 标记，或使用 echo 打印出 HTML。

执行以下任一操作：

```
$txt3=$_POST["product_form_desc"];

?>

<h1>The Entered Product</h1>

<p>Product No</p><?= $txt1 ?> 
```

或这个：

```
$txt3=$_POST["product_form_desc"];

echo"<h1>The Entered Product</h1>";

echo "<p>Product No</p>" . $txt1; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T18:26:26.950

有很多标签丢失。在变量赋值后关闭一个，在回声周围关闭和打开。我建议倒退一步，从 PHP 基础开始。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-17T18:48:14.577

在第 6 行 PHP 代码开始和第 11 行 HTML 代码开始的代码中，php 标签没有关闭，因此代码也被解释了。因此，第 11 行开头的“<”会导致 FATAL 错误，因为它无法识别 PHP 代码。

要将 HTML 代码合并到 PHP 中，您可以使用 PHP 开始和结束标记将 HTML 和 PHP 代码合并到一个文件中。或者您可以使用引号 "" 将 html 代码作为字符串到 PHP 并回显。

下面是方法一：

```
<html>
<head>
<title>Welcome to PHP Products</title>
</head>
<body>
<?php
   $txt1=$_POST["product_form_no"];
   $txt2=$_POST["product_form_name"];
   $txt3=$_POST["product_form_desc"];

   echo "
    <h1>The Entered Product</h1>
    <p>Product No</p>$txt1
    <p>Product Name</p>$txt2
    <p>Product Desc</p>$txt3";
?> 
</body>
</html> 
```

方法二：

```
<html>
<head>
<title>Welcome to PHP Products</title>
</head>
<body>
<?php
   $txt1=$_POST["product_form_no"];
   $txt2=$_POST["product_form_name"];
   $txt3=$_POST["product_form_desc"];
?>  
<h1>The Entered Product</h1>
<p>Product No</p><?php echo $txt1;?>
    <p>Product Name</p><?php echo$txt2;?>
    <p>Product Desc</p><?php echo $txt3;?>
</body>
</html> 
```

# wolfram-mathematica - 3D 散点图：更改每个系列的点大小

> ID：13919765
> 
> 赞同：2
> 
> 时间：2012-12-17T18:19:22.113
> 
> 标签：wolfram-mathematica

我有一个`ListPointPlot3D`包含四个系列的数据。我希望能够单独定义这些系列的大小、形状和颜色。改变大小和颜色是至关重要的，形状不是那么多。

Mathematica 文档对于 3D 案例没有帮助，但对于 2D 绘图，我设法让事情完美地工作。

谁能建议如何最好地在 3D 中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:32:57.113

补一些数据：

```
Table[data[k] = 
      Table[3 k + Sin[j^2 + i], {i, -Pi, Pi, 0.2}, {j, -2, 2, 0.2}], {k, 4}]; 
```

`PlotStyle`通过不同的`Directive`数据集应用不同的样式：

```
ListPointPlot3D[{data[1], data[2], data[3], data[4]},
  PlotStyle -> {
   Directive[Opacity[.5], Red, PointSize[.005]],
   Directive[Opacity[.5], Blue, PointSize[.01]],
   Directive[Opacity[.5], Green, PointSize[.015]],
   Directive[Opacity[.5], Black, PointSize[.02]]
   }, BoxRatios -> 1] 
```

![在此处输入图像描述](../Images/a6a64f9079b5af4bbd5052e3dfa0de03.png)

# json - 将散列转换为 json 以用于 cisco cdp 拓扑的 D3 树状图

> ID：13919766
> 
> 赞同：1
> 
> 时间：2012-12-17T18:19:33.487
> 
> 标签：json, perl, d3.js, cisco

在我的 perl 脚本中，我通过 SNMP（在本例中为设备的 ip 地址）从我的网络中的 cisco 路由器收集 CDP 邻居信息来填充二维哈希。哈希允许我限制重复并捕获父女关系。

```
$name{$hostIP}{$neighbourIP} = $name; 
```

我想使用带有 D3.js 的散列数据（在树状图中）来说明路由器拓扑或连接关系，并且需要递归格式化为 JSON 的数据，例如：

```
{
 name: "10.120.5.1",
 children: [
  {
   name: "10.120.5.2",
   children: [
    {
     name: "10.120.5.3",
     children: [
      {
       name: "10.120.5.4"
      },
      {
       name: "10.120.6.1"
      },
      {
       name: "10.120.6.2"
      },
      {
       name: "10.120.6.3"
      }
     ]
    }
   ]
  }
 ]
} 
```

有人可以提供使用库或普通打印语句的示例，显示如何将哈希格式转换为类似于上面的 JSON 吗？Perl 是首选，但任何语言，如 python、C 都会有所帮助。此外，如果有人知道已经完成这项工作的任何开源脚本，我很乐意进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:23:06.693

使用 JSON 模块。

[https://metacpan.org/pod/JSON](https://metacpan.org/pod/JSON)

使用 JSON；

我的 $json = JSON->new();

我的 $json_string = $json->encode( $hash_to_send_to_d3 )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T15:47:05.067

这对递归有帮助吗？从类似于你的哈希开始，我执行

*   广度优先搜索，看看哪些孩子可以和哪些父母一起列出
*   然后是该中间结构的深度优先演练，以构建与您的 json 样本等效的哈希
*   然后直接转储到 json。

两次遍历数据似乎不是最理想的，但不这样做会导致非常深的树状图。

```
#!/bin/perl

use 5.010; # Enable 'say'. Sorry, old perl
use strict;
use warnings;
use JSON::PP; # Just 'use JSON;' on most systems

# 0\. set up some data in adjacency table
my %name;
$name{'10.120.5.1'}{'10.120.5.2'}++;
$name{'10.120.5.2'}{'10.120.5.1'}++;

$name{'10.120.5.2'}{'10.120.5.3'}++;
$name{'10.120.5.3'}{'10.120.5.2'}++;

$name{'10.120.5.3'}{'10.120.5.4'}++;
$name{'10.120.5.4'}{'10.120.5.3'}++;

$name{'10.120.5.3'}{'10.120.6.1'}++;
$name{'10.120.6.1'}{'10.120.5.3'}++;

$name{'10.120.5.3'}{'10.120.6.2'}++;
$name{'10.120.6.2'}{'10.120.5.3'}++;

$name{'10.120.5.3'}{'10.120.6.3'}++;
$name{'10.120.6.3'}{'10.120.5.3'}++;

# 1\. set up helper structures
# pick a starting point
(my $root) = keys %name;

# empty structures
my %nodes = ();
my %tree  = ();
my @queue = ($root);

# 2\. First pass: BFS to determine child nodes 
list_children(\%name, \@queue, \%nodes) while @queue;

# 3\. Second pass: DFS to set up tree
my $tree = build_tree($root, \%nodes);

# 4\. And use JSON to dump that data structure
my $json = JSON::PP->new->pretty; # prettify for human consumption

say $json->encode($tree);

sub list_children {
  my $adjac = shift;
  my $queue  = shift;
  my $nodes  = shift;

  my $node = shift @$queue;

  # all child nodes
  my @children = keys %{$adjac->{$node}};

  # except the ones we visited earlier, to avoid loops
  @children = grep { ! exists $nodes->{$_}} @children;

  $nodes->{$node} = \@children;

  # and toss on the queue
  push @$queue, @children;
}

sub build_tree {
  my $root  = shift;
  my $nodes = shift;

  my @children;
  for my $child (@{$nodes->{$root}}) {
    push @children, build_tree($child, $nodes);
  }

  my %h = ('name'     => $root,
           'children' => \@children);

  return \%h;
} 
```

# javascript - 更改 keyup 上的输入值

> ID：13919767
> 
> 赞同：2
> 
> 时间：2012-12-17T18:19:34.823
> 
> 标签：javascript, jquery, input, onkeyup

我的页面中有一个输入框，我想在“keyup”事件中更改它的值（keypress 也适用于我）。问题是每次我设置输入的值时，输入变成空白！

这是我的html：

```
<input id="time" type="number" /> 
```

和javascript：

```
$('#time').keyup(function (e) {

        var key = e.keyCode;    
        var itime = $("#time");

        if (itime.val().length == 2) {
            var text = itime.val() + ":";
            $("#time").val(text);
        }
 }) 
```

我想要的只是在两次敲击后自动将“：”字符附加到我在输入中键入的任何内容。

我想实现类似屏蔽输入插件的东西，但显然没有它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T18:24:11.750

问题是你破坏了输入框的类型——你说它的类型是“数字”，但是你在它后面附加了一个“：”，这不是一个有效的数字字符。如果您想要不同的格式，则必须删除“数字”类型，这就是归结为。可以在[此处](https://developer.mozilla.org/en-US/docs/HTML/Element/input#attr-type)找到有关输入类型的更多详细信息。

# python - 在 python 中，有没有办法在我将对象传递给函数之前知道它是否“实现了接口”？

> ID：13919772
> 
> 赞同：14
> 
> 时间：2012-12-17T18:19:48.767
> 
> 标签：python, exception, object, introspection

我知道这听起来可能是一个愚蠢的问题，尤其是对于了解 python 本质的人来说，但我只是想知道，**有没有办法知道一个对象是否“实现了一个接口”以便说？**

举一个我想说的例子：

假设我有这个功能：

```
def get_counts(sequence):
     counts = {}
     for x in sequence:
         if x in counts:
             counts[x] += 1
         else:
             counts[x] = 1
     return counts 
```

**我的问题是：有没有办法确保传递给函数的对象是`iterable`？**我知道在 Java 或 C# 中，我可以通过让方法接受任何实现特定接口的对象来做到这一点，比如说（例如）`iIterable`这样的：`void get_counts(iIterable sequence)`

**我的猜测是，在 Python 中，我将不得不使用先发制人**的内省检查（`decorator` 也许？），`exception`如果对象没有`__iter__`属性，则抛出自定义）。但是有没有更***蟒蛇***的方式来做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T18:23:07.550

Python（自 2.6 起）具有[抽象基类](http://docs.python.org/2/glossary.html#term-abstract-base-class)（也称为虚拟接口），它比 Java 或 C# 接口[更灵活。](http://www.python.org/dev/peps/pep-3119/#rationale)要检查对象是否可迭代，请使用[`collections.Iterable`](http://docs.python.org/2/library/collections.html#collections.Iterable)：

```
if isinstance(obj, collections.Iterable):
    ... 
```

但是，如果您的`else`块只会引发异常，那么大多数 Python 答案是：*不要检查*！由您的调用者传入适当的类型；你只需要记录你期待一个可迭代的对象。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-17T18:27:20.757

### `isinstance()`在或接口之前使用多态性和鸭子类型

您通常定义要对对象*执行*的操作，然后使用多态性来调整每个对象对您想要执行的操作的响应方式，或者使用鸭子类型；首先测试手头的对象是否可以做你想做的事情。这是调用与自省的权衡，传统观点认为调用优于自省，但在 Python 中，鸭式打字优于`isinstance`测试。

因此，您首先需要弄清楚*为什么*需要过滤某些东西是否是可迭代的；为什么你需要知道这个？只需使用`try: iter(object)`,`except TypeError: # not iterable`进行测试。

或者，如果传递的任何内容都不是可迭代的，您可能只需要抛出异常，因为这会发出错误信号。

### 基础知识

使用鸭式打字，您可能会发现您必须测试多种方法，因此`isinstance()`测试可能看起来是更好的选择。在这种情况下，也可以选择使用[抽象基类 (ABC) ；](http://docs.python.org/2/library/abc.html)例如，使用 ABC 让您“绘制”几个不同的类作为给定操作的正确类型。使用 ABC 让您专注于需要执行的任务，而不是使用的具体实现；你可以有一个`Paintable`ABC，一个`Printable`ABC等。

### Zope 接口和组件架构

如果你发现你的应用程序使用了*非常*多的 ABC，或者你不得不在类中添加多态方法来处理各种不同的情况，那么下一步就是考虑使用成熟的组件架构，例如[Zope 组件架构(ZCA)](http://www.muthukadan.net/docs/zca.html)。

`zope.interface`接口是类固醇上的 ABC，尤其是与 ZCA 适配器结合使用时。接口记录类的预期行为：

```
if IFrobnarIterable.providedBy(yourobject):
    # it'll support iteration and yield Frobnars. 
```

但它也让你查找适配器；您无需将每次使用形状的所有行为都放在类中，而是实现适配器来为特定用例提供多态行为。您可以将对象调整为可打印、可迭代或可导出为 XML：

```
class FrobnarsXMLExport(object):
    adapts(IFrobnarIterable)
    provides(IXMLExport)

    def __init__(self, frobnariterator):
        self.frobnars = frobnariterator

    def export(self):
        entries = []
        for frobnar in self.frobnars:
            entries.append(
                u'<frobnar><width>{0}</width><height>{0}</height></frobnar>'.format(
                    frobnar.width, frobnar.height)
        return u''.join(entries) 
```

并且您的代码只需查找每个形状的适配器：

```
for obj in setofobjects:
    self.result.append(IXMLExport(obj).export()) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T18:24:17.860

Pythonic 的方式是使用鸭子类型和“请求宽恕，而不是许可”。这通常意味着在一个`try`块中执行一个操作，假设它的行为方式与您期望的一样，然后在一个`except`块中处理其他情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T18:27:11.630

我认为这是社区建议您这样做的方式：

```
import sys

def do_something(foo):
    try:
        for i in foo:
            process(i)
    except:
        t, ex, tb = sys.exc_info()
        if "is not iterable" in ex.message:
            print "Is not iterable"

do_something(True) 
```

或者，您可以使用类似`zope.interface`.

# css - 从其父级中排除此子级的格式

> ID：13919777
> 
> 赞同：0
> 
> 时间：2012-12-17T18:20:23.693
> 
> 标签：css

当悬停在表格上时，我有一个像下面这样的 CSS 来创建特定的背景颜色。

```
.cb_table-hover tbody tr:hover td ,
.cb_table-hover tbody tr:hover th {
  background-color: #cfe2e8;  
} 
```

在一个`<td>`我有一个`<div>`，我想从这个悬停颜色的疯狂中排除。

```
<td>
 <div class="override_td">
    {% include '_test_edit.html' %}
 </div>
</td> 
```

所以我对最初的悬停 css 提出了否定意见。

```
.cb_table-hover tbody tr:hover td:not(.override_td) ,
.cb_table-hover tbody tr:hover th:not(.override_td) {
  background-color: #cfe2e8;  
} 
```

但似乎我已经惨败了，因为我的 Aptana Studio 大喊

> 否定伪类 ,`:not(X)`是一个以简单选择器（不包括否定伪类本身）作为参数的函数式表示法。它表示其参数未表示的元素。否定不能嵌套；`:not(:not(...))`是无效的。还要注意，由于伪元素不是简单的选择器，它们不是`:not()`.
> 
> 示例 以下选择器匹配 HTML 文档中未禁用的所有按钮元素。`button:not([DISABLED])`以下选择器代表除 FOO 之外的所有元素。`*:not(FOO)`下面的选择器组代表除了链接之外的所有 HTML 元素。 `html|*:not(:link):not(:visited)`

所以我很困惑为什么它不喜欢我的选择器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:34:27.837

[根据this fiddle](http://jsfiddle.net/tNb5w/)，您的选择器看起来格式正确（并遵循 Aptana 警告消息中列出的规则），并且可以正常工作。您没有提到实际的失败（仅来自 Aptana 的投诉），所以我认为它会正常工作。

Aptana 抱怨的原因可能是它没有`:not`非常仔细地扫描无效。有可能仅仅因为您的选择器字符串包含两个`:not`伪类，Aptana 就认为它们是无效的，即使它们是用逗号分隔的。

# .net - 在哪里可以找到 .NET 4.0 或 4.5 框架的 Xml 文档文件？

> ID：13919781
> 
> 赞同：0
> 
> 时间：2012-12-17T18:20:43.380
> 
> 标签：.net, .net-4.0, xml-documentation

对于 .NET 2.0，框架程序集的 xml 文档文件位于此位置：

```
C:\Windows\Microsoft.NET\Framework\v2.0.50727\en 
```

我找不到 .NET 3.5、4 甚至 4.5 的相应文件夹。

那么，对于较新的 .NET 框架版本，默认情况下，框架程序集的 xml 文档文件位于何处？

我对 System.Web.dll 文档特别感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:51:31.353

```
c:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework 
```

# javascript - 从 github 执行示例时，Uglify JS API 抛出 TypeError

> ID：13919782
> 
> 赞同：3
> 
> 时间：2012-12-17T18:20:43.793
> 
> 标签：javascript, node.js, uglifyjs

我已经安装了 uglify-js 2.2.2 并尝试使用 API 从 node.js 应用程序中缩小一些 javascript，但是在尝试访问解析器时出现类型错误。

我的尝试基于API 部分中[的 github 自述文件。](https://github.com/mishoo/UglifyJS#readme)

这是我从节点外壳的尝试/输出。在这里，我什至没有尝试调用该`parse`方法，我只是表明它完全无法访问。

```
$ node
> var jsp = require("uglify-js").parser;
  undefined
> jsp.parse
  TypeError: Cannot read property 'parse' of undefined
    at repl:1:5
    at REPLServer.self.eval (repl.js:111:21)
    at Interface.<anonymous> (repl.js:250:12)
    at Interface.EventEmitter.emit (events.js:88:17)
    at Interface._onLine (readline.js:183:10)
    at Interface._line (readline.js:501:8)
    at Interface._ttyWrite (readline.js:719:14)
    at ReadStream.<anonymous> (readline.js:105:12)
    at ReadStream.EventEmitter.emit (events.js:115:20)
    at emitKey (readline.js:1041:12) 
```

我在这里做错了什么还是有某种我没有通过谷歌发现的错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T18:28:34.203

原来 github 自述文件中的“API”信息已过时/不正确。

我挖了这个，这似乎是正确的。[https://npmjs.org/package/uglify-js](https://npmjs.org/package/uglify-js)。向下滚动到“API 参考”标题。

# c# - 我怎样才能有一个充当机器全局单例的类？

> ID：13919788
> 
> 赞同：1
> 
> 时间：2012-12-17T18:20:56.813
> 
> 标签：c#, multithreading, singleton, mutex

我有一个服务在后台运行一组进程的情况。这些进程需要根据需要从 GUI 应用程序启动/停止。问题是正在运行的进程列表保存在旨在监视和控制它们的对象的内存中。此对象位于服务实例上，因此无法从 GUI 应用程序实例访问。我认为我需要将该对象转换为在机器上全局静态的 Singleton，例如 Mutex，以便我可以从 GUI 运行它的方法并让它们影响服务。示例代码如下，这不是我拥有的代码，而是它的简化版本。我对基于 Mutex 的 Singleton 的解决方案或更适合我需求的替代方案感兴趣。

```
namespace SystemWideSingleton
{
    class Program
    {
        static void Main(string[] args)
        {
            while (true)
            {
                Console.Write("Count = " + GlobalSingleton.Instance.Count++);
                Console.ReadLine();
            }
        }
    }

    public class GlobalSingleton
    {
        static GlobalSingleton() { }

        private GlobalSingleton()
        {
            Count = 0;
        }

        private static readonly GlobalSingleton _instance = new GlobalSingleton();
        public static GlobalSingleton Instance { get { return _instance; } }

        public int Count { get; set; }
    }
} 
```

我希望上面的代码作为两个控制台应用程序运行，并且每个应用程序共享输出。前任。

```
Application 1:  Application 2:
--------------  --------------
0               0
1               3
2               4
5               7
6               8 
```

任何帮助将不胜感激。

PS我知道现在我从单例中得到的只是它可以在同一个应用程序实例上的线程之间工作。我需要它跨机器上的实例工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:06:00.543

我想你会发现这个问题没有“神奇的.NET”解决方案。进程间通信是需要根据您要完成的任务来设计的。

要访问在其他进程中运行的方法，您需要将这些方法公开给进程间通信通道。您可以使用多种方法来完成此任务，包括 WCF，具体取决于您所需的复杂程度。

[在 C# 中进行进程间通信的最简单方法是什么？](https://stackoverflow.com/questions/1802475/what-is-the-easiest-way-to-do-inter-process-communication-in-c)

编辑：如果您想要完成的是（如您所说）只是为了找出“正在运行的进程列表”， System.Diagnostics.Process.GetProcesses() 可能是最好的方法。您可以直接从系统获取进程句柄，这可能是您无论如何都应该做的。我不明白需要 IPC 或 Mutexes 或任何其他复杂的东西作为替代品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:44:12.403

已向您建议了许多选项。我会选择其中之一。请记住，直接读取另一个进程的内存并不容易——这是操作系统和 .NET CLR 强制执行的安全性。你必须遵守规则并正确行事。

也许最快的方法是使用一个[全局互斥锁](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)（讨论[使用它的最佳模式](https://stackoverflow.com/questions/229565/what-is-a-good-pattern-for-using-a-global-mutex-in-c)）备份一个文件，您可以在其中存储许多活动实例。可以有很多变体：您将此计数器存储在注册表、数据库、XML 文件、文本文件中。

或者，您可以将计数器存储在主（服务器）应用程序中，并使用 RPC/WCF/SOAP/REST 等从从属（客户端）查询/更新它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:43:55.093

抛开这是否是一个好主意并专注于实际问题，您可以尝试使用[Memory mapped files](http://msdn.microsoft.com/en-us/library/dd997372.aspx)以及 a`mutex`来防止竞争条件。

这会有些麻烦，但可行。

# android - Android CursorWrapperInner：光标在没有事先关闭（）的情况下完成

> ID：13919790
> 
> 赞同：2
> 
> 时间：2012-12-17T18:21:04.350
> 
> 标签：android, cursor

在我的应用程序中，我的日志中不断收到此警告：

```
12-17 20:17:20.979: W/CursorWrapperInner(3715): Cursor finalized without prior close(). 
```

使用时：

```
 StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder()
.detectAll()
.penaltyLog()
.penaltyDeath()
.build()); 
```

我得到：

```
12-17 20:19:55.049: E/StrictMode(3919): A resource was acquired at attached stack trace but never released. See java.io.Closeable for information on avoiding resource leaks.
12-17 20:19:55.049: E/StrictMode(3919): java.lang.Throwable: Explicit termination method 'close' not called
12-17 20:19:55.049: E/StrictMode(3919):     at dalvik.system.CloseGuard.open(CloseGuard.java:184)
12-17 20:19:55.049: E/StrictMode(3919):     at android.content.ContentResolver$CursorWrapperInner.<init>(ContentResolver.java:1582)
12-17 20:19:55.049: E/StrictMode(3919):     at android.content.ContentResolver.query(ContentResolver.java:321)
12-17 20:19:55.049: E/StrictMode(3919):     at android_maps_conflict_avoidance.com.google.common.android.AndroidConfig.getSetting(AndroidConfig.java:216)
12-17 20:19:55.049: E/StrictMode(3919):     at android_maps_conflict_avoidance.com.google.common.android.AndroidConfig.getDistributionChannelInternal(AndroidConfig.java:195)
12-17 20:19:55.049: E/StrictMode(3919):     at android_maps_conflict_avoidance.com.google.common.Config.init(Config.java:273)
12-17 20:19:55.049: E/StrictMode(3919):     at android_maps_conflict_avoidance.com.google.common.android.AndroidConfig.<init>(AndroidConfig.java:100)
12-17 20:19:55.049: E/StrictMode(3919):     at android_maps_conflict_avoidance.com.google.common.android.AndroidConfig.<init>(AndroidConfig.java:87)
12-17 20:19:55.049: E/StrictMode(3919):     at com.google.android.maps.MapActivity.onCreate(MapActivity.java:419)
12-17 20:19:55.049: E/StrictMode(3919):     at com.WhosAround.Activities.BaseActivity.onCreate(BaseActivity.java:36)
12-17 20:19:55.049: E/StrictMode(3919):     at com.WhosAround.Activities.Loader.onCreate(Loader.java:64)
12-17 20:19:55.049: E/StrictMode(3919):     at android.app.Activity.performCreate(Activity.java:4465)
12-17 20:19:55.049: E/StrictMode(3919):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
12-17 20:19:55.049: E/StrictMode(3919):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
12-17 20:19:55.049: E/StrictMode(3919):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
12-17 20:19:55.049: E/StrictMode(3919):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
12-17 20:19:55.049: E/StrictMode(3919):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
12-17 20:19:55.049: E/StrictMode(3919):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-17 20:19:55.049: E/StrictMode(3919):     at android.os.Looper.loop(Looper.java:137)
12-17 20:19:55.049: E/StrictMode(3919):     at android.app.ActivityThread.main(ActivityThread.java:4424)
12-17 20:19:55.049: E/StrictMode(3919):     at java.lang.reflect.Method.invokeNative(Native Method)
12-17 20:19:55.049: E/StrictMode(3919):     at java.lang.reflect.Method.invoke(Method.java:511)
12-17 20:19:55.049: E/StrictMode(3919):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-17 20:19:55.049: E/StrictMode(3919):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-17 20:19:55.049: E/StrictMode(3919):     at dalvik.system.NativeStart.main(Native Method) 
```

应用程序实际上崩溃了......我如何调试这个警告来自哪里？我没有使用任何我知道的光标...

# asp.net - 避免在asp.net中通过查询字符串注入sql

> ID：13919791
> 
> 赞同：0
> 
> 时间：2012-12-17T18:21:07.650
> 
> 标签：asp.net, response.redirect, redirecttoaction

我用 asp.net 编写了一个应用程序，并在某些页面中使用了“respons.redirect”，如下所示：

```
Response.Redirect(string.Format("~/*****/****.aspx?ID={0}", ID)); 
```

当用户执行此代码时，他将重定向到正确的页面，一切都很好。他可以在他的浏览器地址中看到这个重定向链接：

```
http://localhost:1852/Jornal/Editor/ReviewerEmail.aspx?ID=1030 
```

现在，如果他手动更改 ID 并且 ID 正确，他可以在没有任何许可的情况下访问其他数据。我怎样才能避免这个问题？（我不会使用会话）请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:23:06.270

您需要使用**访问控制**。

每当您显示任何数据时，您都需要检查当前登录的用户是否有权访问该数据。

显然，您还需要跟踪当前登录的用户，以防止攻击者声称他们是其他人。
要做到这一点，请使用 ASP.Net 的内置会员系统。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T18:38:43.280

如果ID需要公开，没有访问控制可以解决问题。

那么我建议您添加第二个参数，该参数是该 ID 的哈希值。篡改id参数会导致id和hash不匹配

[http://msdn.microsoft.com/en-us/library/system.security.cryptography.sha256.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.sha256.aspx)

你冷也改变你的 ID 参数为不太“猜测”的 id，如 GUID

# java - 无法在 Android webview 中滚动网页内容

> ID：13919792
> 
> 赞同：0
> 
> 时间：2012-12-17T18:21:08.360
> 
> 标签：java, android, webview

我正在尝试在 Android [HTC Desire Z] 上的 webview 中加载此网页[https://chat1a.livechatinc.com/licence/1051791/open_chat.cgi](https://chat1a.livechatinc.com/licence/1051791/open_chat.cgi)，但我无法让它滚动其内容。

当我使用 Android 网络浏览器时，滚动条也不会出现。问题在于无法显示该网页的所有内容。我尝试了不同的技巧，这就是我的新布局现在的样子。

最有趣的是，它在 iOS/iPhone 上运行良好，但在 Android 上却不行！

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/bg"
android:fillViewport="true" >

<WebView
    android:fillViewport="true" 
    android:id="@+id/wvLiveChat"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"        
    android:scrollbars="vertical" />

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:13:11.370

我建议不要将 webview 放在滚动视图中。有很多文档说明为什么应该避免这样做。

# ios - Objective-C中的箭头运算符

> ID：13919793
> 
> 赞同：18
> 
> 时间：2012-12-17T18:21:09.003
> 
> 标签：ios, objective-c, runtime

我有个问题，代码如下：

```
@interface MyFoo : NSObject {
    NSString *nameStr;
}
@end
@implementation MyFoo
- (id)init {
    self = [super init];
    if (self) {
        self->nameStr = [@"some value of the string that is set right into the private ivar" copy];
    }
    return self;
}
@end 
```

问题是：忽略所有 C++ 规则，忽略内存转储漏洞，为什么我不应该使用这种箭头运算符语法？Apple文档中是否有一条规则说它是不正确的，因为在未来的类可能与运行时中指向结构的指针等表示不同？

提前致谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-17T18:26:29.207

的用法与`self->someIvar`相同`someIvar`。这没有错，但也不需要。

我唯一一次使用箭头符号是在一个实现中，`copyWithZone:`所以我可以复制每个没有属性的 ivars。

```
SomeClass *someCopy = ...
someCopy->ivar1 = ivar1; // = self->ivar1
someCopy->ivar2 = ivar2; // = self->ivar2 
```

你在哪里看到任何说你不应该使用这种箭头运算符语法的东西？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T18:29:35.357

仅在 ivar 名称上使用箭头表示法来访问属性并不能保证它们将被保留、分配或等...因为您正在指导访问 ivar 而不是调用和设置属性中使用的 ou getter 方法。

例子：

```
@interface MyFoo : NSObject {
}
@property(nonatomic,retain)  NSString *nameStr;
@end
@implementation MyFoo
- (id)initWithString:(NSString *)name {
    self = [super init];
    if (self) {
        self->nameStr = name; // will not be retained
    }
    return self;
}
@end 
```

对于已经回答的 ivar 变量，没有任何问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-17T18:26:02.193

使用箭头表示法并没有错，使用箭头表示法和点表示法是有区别的。如果使用箭头运算符，则访问实例变量，如果使用点运算符，则访问属性。
它不像 C 结构那样使用箭头符号来访问指向的结构的成员，并使用点符号来访问结构成员。所以我会举一个有意义的例子：

```
@property (nonatomic, strong) NSString *text; 
```

在 .m 文件中：

```
- (void)setText:(NSString *)string {
    NSLog(@"Accessing property");
    self->text = string; // let's suppose that text is not synthesized
} 
```

如果您使用点表示法，那么您可以访问该属性，它会打印“访问属性”。但这与 C 结构语法无关。

# android - Pt 在 TextView 中显示比 WebView 大

> ID：13919795
> 
> 赞同：1
> 
> 时间：2012-12-17T18:21:19.370
> 
> 标签：android, android-webview, textview, pt

我的应用同时使用`TextView`s 和`WebView`s。在两者中，我都设置了文本的大小`pt`。问题是 in 中的文本`WebView`通常是 in 中文本的一半大小`TextView`。我已经在多种屏幕尺寸和密度上进行了测试，但没有区别。

我`TextView`使用以下方法设置高度：

`textView.setTextSize( TypedValue.COMPLEX_UNIT_PT, 14 );`

但在`WebView`我使用 CSS 时：

`font: 14pt;`

两者都有效，但似乎`TextView`' 的显示比`WebView`' 大。有什么线索吗？我想以`TextView`与我的`WebView`.

# algorithm - 点在多边形内吗？

> ID：13919797
> 
> 赞同：4
> 
> 时间：2012-12-17T18:21:39.827
> 
> 标签：algorithm, geometry, computational-geometry

给定代表二维多边形的点列表，我如何确定该点是否在多边形内。

请注意，多边形可以是凹的也可以是凸的。您还可以对点的顺序做出任何假设。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T18:23:38.567

执行此操作的最佳方法是从您的点向任何方向画一条线，并计算您越过对象边界的次数。如果您碰到边界的次数为偶数次，则您在对象外，如果是奇数次，则您在对象内。通常最容易沿着其中一个轴进行确定。

本质上，您只需要找到一种方法来确定您是否越过一个点。使用直线方程的斜率（`m=(y1-y2)/(x1-x2)`, `y=m*x(x-x1)+y1`，并查看您是否在该点有效的边界内交叉。给定点之间直线的此等式，确定您的直线与该直线相交的位置，并确定它是否在线的范围。

顺便说一句，同样的方法适用于任意维度，只是确定是否击中面部变得更加困难。

为了展示几个例子，我画了一个简单的插图，展示了内部和外部发生的事情，即使是奇怪的形状。

顺便说一句，如果你撞到一个角落，它会计算你从内到外转换的次数。

![在此处输入图像描述](../Images/60565afd5fab96fd6abc5b3af8f88290.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T18:29:40.083

选择多边形外的一个点。在你的和外面的点之间画一条线。如果线与多边形相交奇数次，则为内部，否则为外部。零路口也在外面。但是，这仅适用于非重叠多边形

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T19:08:57.793

这是许多解决方案的已知问题，只需谷歌即可。并阅读： [http ://en.wikipedia.org/wiki/Point_in_polygon](http://en.wikipedia.org/wiki/Point_in_polygon)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T18:23:23.917

从您的点取一条任意线，到您的多边形之外的任何点（即边界之外）。检查该线与多边形的边缘之一相交的次数。如果值为奇数，则该点在内部。

检查时，请注意穿过顶点的线，您的测试可能会指示两个边缘交叉。

# c++ - 为什么我要使用 UTILITY 而不是 STRUCT？

> ID：13919803
> 
> 赞同：0
> 
> 时间：2012-12-17T18:22:09.863
> 
> 标签：c++

> **可能重复：**
> [使用具有两个字段和一对的结构有什么区别？](https://stackoverflow.com/questions/2236182/what-is-the-difference-between-using-a-struct-with-two-fields-and-a-pair)

我一直在浏览一个 c++ 快速参考应用程序，并注意到 UTILITY 数据结构`pair< TypeName, TypeName>`将一对变量存储在我认为的结构中。我很困惑为什么要实现它而不是仅仅使用一个简单的结构，有人可以告诉我为什么 pair 可能有用吗？

```
pair<string, int> a("hello",3); // A 2-element struct
a.first;  //"hello"
a.second; //3 
```

我认为使用结构会是一种更好的做法，因为您可以回顾结构类型并创建该特定结构的对象，而`pair`如果需要多个副本，则可能容易出现简单的错误。

```
struct Data
{
    string str;
    int num;
}

Data pair1;
pair1.str = "hello";
pair1.num = 3; 
```

# javascript - 为什么这个正则表达式匹配小数？

> ID：13919805
> 
> 赞同：0
> 
> 时间：2012-12-17T18:22:16.020
> 
> 标签：javascript, validation

我有大量文本字段需要在 onkeyup 上进行评估，以确保只输入数字。小数点没问题。没有价值也是如此。

出于某种原因，这与小数匹配。例如，我输入 4 然后 。并且它在 .

我该如何纠正？

```
var s_in = 0;
for (var i = 10; i < 19; i++) {
    var fObj = document.getElementById(field+'_'+i);
    var text = fObj.value;
    if (text) {
        var s = parseInt(text);
        var pattern = /^[+-]?(\d*\.)?\d+$/;
        var result;
        if ((result = pattern.exec(text)) != null) {
            if (s > -1) {
                s_in += s;
            }
        } else {  // not empty and not a number
            alert('The entry for Hole ' + i + ' ' + ucfirst(field) + ' is "' + text + '" This is not a number. It will be erased now.');
            fObj.value = '';
            fObj.focus();
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:25:46.180

您的正则表达式需要小数点后的一个或多个数字，您必须`-`在第一组中转义）。如果您不想要求小数点后的数字，那么您可以使用它（将 a 更改`+`为 a`*`并放在`\`前面`-`）：

```
/^[+\-]?(\d*\.)?\d*$/ 
```

# jquery - Jquery如果输入为空添加值并提交

> ID：13919815
> 
> 赞同：2
> 
> 时间：2012-12-17T18:22:48.130
> 
> 标签：jquery, forms, validation

我已经打猎了，但无法让它发挥作用。如果表单上的输入为空，则需要为其添加一个值，然后提交，如果它已经有一个值，则使用该值提交。

到目前为止的代码

```
 <form name="form1" action="http://csster.com/generate.php" method="post" id="formit">
Name: <input name="name" type="text" /><br/>
Mothers Name: <input id="desti" name="mname" type="text" /><br/>
Fathers Name: <input name="fname" type="text" /><br/>
<input name="submit" type="submit" value="Submit" />
</form>

    $("#formit").submit(function(){
        if($("#desti:empty").text('Australia'));
}); 
```

[检查小提琴](http://jsfiddle.net/webthread/65R9q/)

编辑 - 是否可以使它在提交之前不可见附加值，它可能会使特定表单上的人感到困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T18:25:26.813

试试这个：

```
$("#formit").submit(function(){
     if ( $("#desti").val().length === 0 ) 
            $("#desti").val('Australia');
 }); 
```

这是[JSFiddle](http://jsfiddle.net/65R9q/3/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T18:27:10.783

您应该`val`对表单元素使用方法。

```
$("#formit").submit(function(){
    $("#desti").val(function(i, v){
        return $.trim(v) === '' ? 'Australia' : v;
    })
}); 
```

* * *

```
$("#formit").submit(function(){
    var $e = $("#desti");
    if ($e.val() === '') $e.val('Australia').addClass('aClass')
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T18:29:04.030

您可以使用 val() 获取输入值并使用 val() 设置

```
$("#formit").submit(function(){
    if($("#desti").val() === '')$("#desti").val('Oz')  
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T18:32:39.303

试试这个

```
$("#formit").submit(function(){ 
```

`if ($('#desti').is(":empty")) {` `$('#desti').val('Australia');` `}` `});`

# c++ - sscanf() 和语言环境。一个人如何真正解析像“3.14”这样的东西？

> ID：13919817
> 
> 赞同：8
> 
> 时间：2012-12-17T18:23:00.767
> 
> 标签：c++, c, parsing, scanf

假设我必须读取一个文件，其中包含一堆浮点数。数字可以是,等`1e+10`，即任何通用浮点数，使用小数点（*这是固定的！*）。但是，我的代码是另一个应用程序的插件，我无法控制当前的语言环境。例如，它可能是俄语，并且那里的 LC_NUMERIC 规则要求使用十进制*逗号*。因此，Pi 应该被拼写为“3,1415...”，并且`5``-0.15`

 **```
sscanf("3.14", "%f", &x); 
```

返回“1”，并且 x 包含“3.0”，因为它拒绝解析 '.' 在字符串中。

我需要忽略此类数字解析任务的语言环境。

如何做到这一点？

我可以编写一个 parseFloat 函数，但这似乎是一种浪费。
我还可以保存当前语言环境，将其临时重置为“C”，读取文件，然后恢复到保存的位置。这对性能有何影响？setlocale() 在某些 OS/libc 组合上可能会非常慢，它到底在做什么？
另一种方法是使用 iostreams，但同样它们的性能并不出色。

所以我很困惑。大家遇到这种情况怎么办？

干杯!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T18:32:08.227

我个人的偏好是从不使用`LC_NUMERIC`，即只调用`setlocale`其他类别，或者在调用之后`setlocale`使用。否则，如果您想使用标准库以标准形式打印或解析数字以进行交换，那么您将完全不走运。`LC_ALL``setlocale(LC_NUMERIC, "C");`

如果您有幸使用了符合 POSIX 2008 的系统，则可以使用`uselocale`and`*_l`系列函数来使情况稍微好一些。至少有两种基本方法：

1.  保留未设置的默认区域设置（至少应该*始终*`LC_NUMERIC`设置像;这样的麻烦部分），并且仅当您想以符合他们自己文化的方式向用户呈现事物时，才将用户区域设置的对象传递给适当的函数期望; 否则使用默认的 C 语言环境。`LC_CTYPE`*`locale_t``*_l`*

**   让需要处理数据以进行交换的代码围绕 C 语言环境的对象保留，并在需要以标准形式处理数据以进行交换时`locale_t`来回切换，或者使用适当的函数（但有没有）。`uselocale``*_l``scanf_l`* 

 *请注意，实现自己的浮点解析器**并不容易**，除非您是数值计算方面的专家，否则可能不是解决问题的正确方法。把它做好是非常困难的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T19:16:51.437

我不确定如何在 C 中解决它。

但是 C++ 流（可以）具有唯一的语言环境对象。

```
std::stringstream  dataStream;
dataStream.imbue(std::locale("C"));

// Note: You must imbue the stream before you do anything wit it.
//       If any operations have been performed then an imbue() can
//       be silently ignored by the stream (which is a pain to debug).

dataStream << "3.14";
float   x;
dataStream >> x; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-17T20:11:59.063

这是我过去对这些东西所做的事情。

目标是使用具有 C 语言环境数字表示的依赖于语言环境的数字转换器。当然，理想的情况是使用不依赖于语言环境的转换器，或者不更改语言环境等，但有时你只需要忍受你所拥有的。语言环境支持在几个方面受到严重破坏，这就是其中之一。</rant>

首先，使用类似于`C`用于数字预处理标记的语法的简单模式将数字提取为字符串。为了与scanf一起使用，我做了一个更简单的：

```
" %1[-+0-9.]%[-+0-9A-Za-z.]" 
```

这可以进一步简化，具体取决于您对输入流的期望。您唯一需要做的就是不要阅读超出数字末尾的内容；只要您不允许数字后面紧跟字母，而没有插入空格，上述内容就可以正常工作。

Now, get the `struct lconv` (`man 7 locale`) representing the current locale using `localeconv(3)`. The first entry in that struct is `const char* decimal_point`; replace all of the `'.'` characters in your string with that value. (You might also need to replace `'+'` and `'-'` characters, although most locales don't change them, and the sign fields in the `lconv` struct are documented as only applying to currency conversions.) Finally, feed the resulting string through `strtod` and see if it passes.

This is not a perfect algorithm, particularly since it's not always easy to know how locale-compliant a given library actually is, so you might want to do some autoconf stuff to configure it for the library you're actually compiling with.***

# cuda - 如何判断是否正在使用 GPU 卡？

> ID：13919827
> 
> 赞同：3
> 
> 时间：2012-12-17T18:23:40.080
> 
> 标签：cuda

在 CUDA 中，是否有任何运行时 API 可以判断 GPU 设备是否正在使用？以及用户是来自视频显示还是 GUGPU 应用程序？GPU占用率是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:41:14.370

至少在 linux 上，您可以使用该程序`nvidia-smi`查看当前内存使用情况，以及是否有任何计算进程正在运行。尽管只有选定数量的图形卡（例如特斯拉）支持计算进程的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:05:46.930

虽然它没有准确显示正在使用它的内容，但 Windows 上的 MSI Afterburner 会显示系统（NV 或其他）中 GPU 的核心使用情况、内存使用情况、风扇速度和温度。

# python - 如何将单词从列表写入文件？

> ID：13919828
> 
> 赞同：0
> 
> 时间：2012-12-17T18:23:41.497
> 
> 标签：python

“test.txt”中有两个sentnec

sentence1 = 句子是由一个或多个单词组成的语法单元。

sentence2 = 一个句子也可以单独用正字法定义。

```
count_line = 0
for line in open('C:/Users/Desktop/test.txt'):
    count_line = count_line +1
    fields = line.rstrip('\n').split('\t')
    ##print count_line, fields
    file = open('C:/Users/Desktop/test_words.txt', 'w+')
    count_word = 0
    for words in fields:
        wordsplit = words.split()
        for word in wordsplit:
             count_word = count_word + 1
             print count_word, word
             file.write(str(count_word) + " " + word + '\n')
        file.close() 
```

我在“test_words.txt”中的结果只显示了第二句中的单词：

```
1 A 
2 sentence
3 can
4 also
5 be
6 defined
7 in
8 orthographic
9 terms
10 alone. 
```

如何也将第一句中的单词写在第二句“test_words.txt”中的单词之后？

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:42:31.920

在您的代码中，您多次打开和关闭输出文件，导致您的代码覆盖您从第一句话中编写的内容。简单的解决方案是只打开一次，只关闭一次。

```
count_line = 0
# Open outside the loop
file = open('C:/Users/Desktop/test_words.txt', 'w+')
for line in open('C:/Users/Desktop/test.txt'):
    count_line = count_line +1
    fields = line.rstrip('\n').split('\t')
    ##print count_line, fields
    count_word = 0
    for words in fields:
        wordsplit = words.split()
        for word in wordsplit:
            count_word = count_word + 1
            print count_word, word
            file.write(str(count_word) + " " + word + '\n')
# Also close outside the loop
file.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:27:15.000

发生这种情况的原因是，当您第二次打开文件时，您不会保留其中的原始文本。当你在 Python 中打开一个文件并写入它时，你基本上会覆盖它的内容，除非你将它们存储在一个变量中并重新写入它们。

试试这个代码：

```
count_line = 0
for n, line in enumerate(open('test.txt')):
    count_line = count_line +1
    fields = line.rstrip('\n').split('\t')
    ##print count_line, fields
    already_text = open('test_words.txt').read() if n > 0 else ''
    file = open('test_words.txt', 'w+')
    count_word = 0
    file.write(already_text)
    for words in fields:
        wordsplit = words.split()
        for word in wordsplit:
             count_word = count_word + 1
             print count_word, word
             file.write(str(count_word) + " " + word + '\n')
        file.close() 
```

这是我运行它时的输出：

```
1个
2 句
3是
4个
5 语法
6个单位
7 组成
8 个
9个
10 或
还有 11 个
12 个字。
1个
2 句
3罐
4还有
5 是
6 定义
7 英寸
8 正字法
9 学期
10个人。

```

这是没有的代码`enumerate()`：

```
count_line = 0
n = 0
for line in open('test.txt'):
    count_line = count_line +1
    fields = line.rstrip('\n').split('\t')
    ##print count_line, fields
    already_text = open('test_words.txt').read() if n > 0 else ''
    file = open('test_words.txt', 'w+')
    count_word = 0
    file.write(already_text)
    for words in fields:
        wordsplit = words.split()
        for word in wordsplit:
             count_word = count_word + 1
             print count_word, word
             file.write(str(count_word) + " " + word + '\n')
        file.close()
    n += 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:47:02.407

如果可能，您应该`with`在处理文件时使用它 - 它是一个上下文管理器，并确保在您完成它们后正确关闭它们（通过离开缩进块来表示）。在这里，我们使用`enumerate`提供的可选`start`参数 - 这是一种（几种）在计数器移动到下一行时保持计数器运行的方法：

```
# Open the file
with open('test.txt', 'rb') as f:
  # Open the output (in Python 2.7+, this can be done on the same line)
  with open('text_words.txt', 'wb') as o:
    # Set our counter
    counter = 1
    # Iterate through the file
    for line in f:
      # Strip out newlines and split on whitespace
      words = line.strip().split()
      # Start our enumeration, which will return the index (starting at 1) and
      # the word itself
      for index, word in enumerate(words, counter):
        # Write the word to the file
        o.write('{0} {1}\n'.format(index, word))
      # Increment the counter
      counter += len(words) 
```

或者，如果您想要更少的行 - 这用于`readlines()`将文件读入列表，其中项目由换行符分隔。然后，这些行本身在空白处被分割，每个单词都被拉出。这意味着您基本上遍历文件中所有单词的列表，并且结合`enumerate`您不需要增加计数器，因为它为您完成：

```
# Open the file
with open('test.txt', 'rb') as f:
  # Open the output (in Python 2.7+, this can be done on the same line)
  with open('text_words.txt', 'wb') as o:
    # Iterate through the file
    for i, w in enumerate((x for l in f.readlines() for x in l.strip().split()), 1):
      o.write('{0} {1}\n'.format(i, w)) 
```

使用 Python 2.7：

```
# Open the file
with open('test.txt', 'rb') as f, open('text_words.txt', 'wb') as o:
  # Iterate through the file
  for i, w in enumerate((x for l in f.readlines() for x in l.strip().split()), 1):
    o.write('{0} {1}\n'.format(i, w)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T18:49:07.563

这可能无关紧要，但我建议您使用更简洁的方法编写它。你不需要有3个循环：

```
lines = open('test.txt').readlines()
file = open('test_words.txt', 'w+')
for line in lines:
  words = line.rstrip('\n').split()

  for i, word in enumerate(words):
    print i, word
    file.write('%d %s\n' % (i+1, word))
file.close() 
```

# python - 更新 PyPI 包

> ID：13919830
> 
> 赞同：36
> 
> 时间：2012-12-17T18:24:01.437
> 
> 标签：python, pypi

有没有办法在不更改版本号的情况下更新 PyPI 包？

想象一下，我在最近上传到 PyPI 的一个包中发现了一个小错误。有没有办法在不增加版本号的情况下编辑/重新上传代码？

**更新** 我想我应该澄清一下“错误”是指实际源代码中的版本号是错误的 - 这不是功能性的东西，它只是意味着如果你`package.version`得到以前的版本，而不是当前的版本（是的，我知道这*可能*会导致其他人的代码出现错误，但鉴于我们处于 alpha 阶段，我希望版本依赖关系尚未设置...）。作为记录，*显然*无声的错误修复很糟糕！

**更新 2** 截至 2015 年 1 月，提供的解决方案不再有效 - 请参阅[此帖子了解更多信息。](http://comments.gmane.org/gmane.comp.python.distutils.devel/22739)

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-12-17T18:32:31.907

当您遇到错误时，请*始终*上传*新*版本。

增加版本号，包括一个变更日志，称之为棕色包发布（不是我，是有人头上戴着棕色包，真的，老实说）。

你永远不知道谁可能已经下载了版本的副本（在镜像上，直接从你的 github 页面，无论如何），他们*永远不会知道*你悄悄地修复了一个错误。此外，那些确实发现您替换了发行版的人，现在必须学习如何强制重新安装。

*不要用无声的错误修复替换已发布的软件包。不要被诱惑。只需发布一个新版本。*

另一方面，如果您设法以某种方式破坏了分发文件本身，因此`.zip`or`.tar.gz`文件是 b0rken，那么您需要使用 PyPI Web 界面手动删除该文件并重新上传。

从[1 月 24 日起](https://mail.python.org/pipermail/distutils-sig/2015-January/025683.html)，PyPI 甚至不再允许您重用文件名；这意味着您无法重新上传具有相同版本号的新文件。

如果您做错的只是打包错误，您可以在版本号（so 、 等）中添加一个后缀`.postN`以表示发布后更新。`.post1``.post2`

# sql-server-2008 - 我是否需要为 SQL Server 2008 的插入和删除使用锁定

> ID：13919840
> 
> 赞同：0
> 
> 时间：2012-12-17T18:24:17.597
> 
> 标签：sql-server-2008

我创建了许多创建动态 SQL 来执行插入和删除的 C# 类。如果需要进行更新，则首先进行删除，然后进行插入。

看了MSDN上的这两篇文章，让我觉得自己不需要用到Locks。这是一个安全的假设吗？

[http://msdn.microsoft.com/en-us/library/ms174335.aspx](http://msdn.microsoft.com/en-us/library/ms174335.aspx)

[http://msdn.microsoft.com/en-us/library/ms189835.aspx](http://msdn.microsoft.com/en-us/library/ms189835.aspx)

我意识到这可能是一个悬而未决的问题，我只是在以下方面提出建议：是的，你会没事的，或者不，不管微软怎么说，加锁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T17:05:09.453

[http://msdn.microsoft.com/en-us/library/ms174335.aspx](http://msdn.microsoft.com/en-us/library/ms174335.aspx)

[http://msdn.microsoft.com/en-us/library/ms189835.aspx](http://msdn.microsoft.com/en-us/library/ms189835.aspx)

MSDN上的这两篇文章建议插入和删除时不需要使用Locks。此外，他们建议将删除为这两个操作建议表提示的能力。

```
The ability to specify the HOLDLOCK, SERIALIZABLE, READCOMMITTED, REPEATABLEREAD, 
or UPDLOCK hints on tables that are targets of INSERT statements will be removed 
in a future version of SQL Server. These hints do not affect the performance of 
INSERT statements. Avoid using them in new development work, and plan to modify   
applications that currently use them. 
```

# wordpress - 在 Wordpress 中的循环之前添加动态内容

> ID：13919843
> 
> 赞同：1
> 
> 时间：2012-12-17T18:24:32.750
> 
> 标签：wordpress, plugins, slider

我正在为 Wordpress 开发一个内容滑块，我知道如何在循环之前将此内容滑块（作为 html 内容）放入正文中。

我试图用 过滤内容`add_filter('the_content', 'functionName)`，但我在每篇文章之前都得到了内容滑块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:47:45.313

如果使用`add_filter('the_content')`，则每次输出帖子的内容时都会调用您的函数，无论是单个帖子还是循环中的一系列帖子。如果您需要在页面中输出任何帖子内容之前“挂钩”，那么您可以访问的所有 WP 主题的唯一动态部分是`get_header()`or `get_sidebar()`（或 event `get_footer`）。因此，您最好的运气不是对内容使用过滤器，而是使用 get_header 进行操作，如下所示：

```
add_action('get_header', 'your_function'); // Add priority & param args if necessary 
```

问题是这在 header.php 被调用之前被执行，并且通常，`body`标签是在 header.php 中打开的......

也就是说，如果您无法修改主题本身。否则，您可以轻松地在主题本身中添加一个动作并在您想要的地方执行它。

另一种技术是在文档准备好后通过 JavaScript 添加您的 html 内容，您可以在页脚中输出该内容。

# javascript - 无需重新加载即可更新浏览器地址栏

> ID：13919848
> 
> 赞同：3
> 
> 时间：2012-12-17T18:24:56.477
> 
> 标签：javascript, internet-explorer, url

我喜欢 facebook 在图像之间滚动时更改浏览器地址栏 URL 的方式，以及它在 IE7 上的工作方式。但是，我只找到了有关如何在 HTML5 浏览器上执行此操作的信息，并且我想支持 IE7。

由于这是一个 HTML5 解决方案，因此如下：

```
window.history.pushState("object or string", "Title", "/new-url"); 
```

如果有其他解决方案可用，则不是一种选择。

**编辑**

在任何哈希之前。

但是有吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T18:32:25.567

我知道的唯一其他选项涉及使用`#hash`片段来确定使用事件的页面的“url”或“状态” `hashchange`，这在 IE7 中不受支持：

[http://caniuse.com/#search=hashchange](http://caniuse.com/#search=hashchange)

但是，有 polyfills：

[http://benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)

这是一种相当老套的方法，它破坏了 HTTP 协议，因为它*依赖*于 javascript 来输出正确的内容，但你可能并不关心这一点：

[http://isolani.co.uk/blog/javascript/BreakingTheWebWithHashBangs](http://isolani.co.uk/blog/javascript/BreakingTheWebWithHashBangs)

`History.js`声称支持跨浏览器，尽管我没有使用它（HTML5 浏览器使用历史记录，旧浏览器使用 hashchange）：

[https://github.com/browserstate/History.js/](https://github.com/browserstate/History.js/)

# ruby-on-rails - 比较两个具有未知值的哈希

> ID：13919849
> 
> 赞同：2
> 
> 时间：2012-12-17T18:24:56.623
> 
> 标签：ruby-on-rails, ruby, rspec

使用 RSpec，有没有办法在我不知道某些值是什么的情况下比较两个哈希？我试过使用`instance_of`，但它似乎不起作用。

在我的测试中，我正在创建一个带有 POST 请求的新设备对象，并希望确保我得到正确的 JSON 响应。它正在为设备创建一个 UUID（我没有使用关系数据库），但我显然不知道该值是什么，也不在乎。

```
post "/projects/1/devices.json", name: 'New Device'

expected = {'name' => 'New Device', 'uuid' => instance_of(String), 'type' => 'Device'}

JSON.parse(body).should == expected 
```

我收到以下错误：

```
 1) DevicesController API adds a new device to a project
     Failure/Error: JSON.parse(body).should == expected
       expected: {"name"=>"New Device", "uuid"=>#<RSpec::Mocks::ArgumentMatchers::InstanceOf:0x5a27147d @klass=String>, "type"=>"Device"}
            got: {"name"=>"New Device", "uuid"=>"ef773465-7cec-48fd-b2a7-f1da10d1595a", "type"=>"Device"} (using ==)
       Diff:
       @@ -1,4 +1,4 @@
        "name" => "New Device",
        "type" => "Device",
       -"uuid" => #<RSpec::Mocks::ArgumentMatchers::InstanceOf:0x5a27147d @klass=String>
       +"uuid" => "ef773465-7cec-48fd-b2a7-f1da10d1595a"
     # ./spec/api/devices_spec.rb:37:in `(root)' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:37:41.787

`instance_of`用于参数匹配：

```
something.should_receive(:foo).with(instance_of(String)) 
```

而不是使用`==`运算符，您可以使用`include`. 例如：

```
JSON.parse(body).should include('uuid', 'name' => 'New Device', 'type' => 'Device') 
```

这表示密钥`uuid`必须与任何值一起出现，`name`并且`type`应该与指定的值一起出现。它还将允许散列中的其他键。

我不知道用内置匹配器准确地实现您所要求的方法。

# iphone - 向界面添加多个任务。Xcode

> ID：13919853
> 
> 赞同：0
> 
> 时间：2012-12-17T18:25:08.060
> 
> 标签：iphone, objective-c, xcode

我确信这是一个非常愚蠢的问题，但我在互联网上的任何地方都找不到它，或者可能看起来错了。

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIImagePickerControllerDelegate, UINavigationControllerDelegate>  
{    
//how do i fit this code--> idUIAccelerometerDelegate
//into the interface where it is the only place it can work?
    IBOutlet UIImageView *imageView;
    UIImage *image;
    UIImagePickerController *imagePicker;
    UIImagePickerController *imagePicker2;
  //the code above is already linked with the @interface at the top thingy.

 //but now i also want to link the @accelerometer but it won't let me without any errors.
    float valueX;
    float valueY;

}
@property (nanotomic,strong)  IBOutlet UIButton *snow;

-(void)awakeAccelerometer;
-(void)acc

- (IBAction)takePhoto;
- (IBAction)chooseExisting;

@end 
```

谢谢你的帮助对不起，如果我浪费了你的时间。如果你愿意，一定要给我投反对票。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:36:25.787

我想我理解这个问题 - 如果是这样，答案是这条线

```
id <UIAccelerometerDelegate> 
```

是不完整的（声明一个变量而不命名它，也没有终止`;`）。尝试

```
 id <UIAccelerometerDelegate> delegate; 
```

您可以将它放在@interface 中所有其他实例变量声明的位置之间`{`的任何行上。`}`例如，您`//comment`现在的第一个确切位置。

你也有一个错字

`nanotomic`应该`nonatomic`

**更新**
虽然我认为我按照您的要求回答了您的问题，但您应该忽略我的建议并遵循@Volure DarkAngel 的回答。我专注于语法，而不是您试图实现的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:06:12.907

我相信您希望您的对象从加速度计接收消息，如果这是真的，那么您不想添加委托，您想成为委托。

你的类将符合 UIAccelerometerDelegate 就像它符合 UIImagePickerControllerDelegate 和 UINavigationControllerDelegate 并且看起来像这样

```
// Your new interface line.
@interface ViewController : UIViewController <UIAccelerometerDelegate, UIImagePickerControllerDelegate, UINavigationControllerDelegate> 
```

并且您将以下功能添加到您的课程中

```
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration{
    // Handle the accelorometer and acceleration objects to determine what happened.
} 
```

请注意，此方法在 ios 5 中已弃用，现在您应该研究 Core Motion。这应该仍然适用于 ios 6，但它很有可能会在不久的将来消失。

# jquery - 当悬停另一个 div 时，将悬停状态应用于多个 div

> ID：13919855
> 
> 赞同：1
> 
> 时间：2012-12-17T18:25:19.637
> 
> 标签：jquery, html, hover

当鼠标悬停在另一个 div 上时，我正在寻找一种方法将悬停状态应用于我页面上的一组 div。

希望这段代码能更好地解释我需要什么......

```
CSS
​#hovered_div {
position:absolute;
width:50px;
height:50px;
margin-top:25px;
margin-left:25px;
background-color:blue;   
}
#hovered_div:hover {
background-color:red;   
}

#div1 {
position:absolute;
width:50px;
height:50px;
margin-top:100px;
margin-left:100px;
background-color:yellow;   
}
#div1:hover {
background-color:green;
width:75px;    
}

#div2 {
position:absolute;
width:50px;
height:50px;
margin-top:100px;
margin-left:25px;
background-color:pink;   
}
#div2:hover {
background-color:black;
height:250px;    
}

#div3 {
position:absolute;
width:50px;
height:50px;
margin-top:25px;
margin-left:100px;
background-color:purple;   
}
#div3:hover {
background-color:grey;
width:150px;    
}

HTML

​&lt;div id="hovered_div"></div>
​&lt;div id="div1"></div>
​&lt;div id="div2"></div>
​&lt;div id="div3"></div>​​​​​​​​​​​​​​​​​​​​​​ 
```

[jsFiddle](http://jsfiddle.net/cX7UC/)

所以，我希望实现的是，当鼠标悬停在“hovered_div”上时，该 div 的悬停状态和其他三个 div 被应用，当鼠标移开时，它们都回到普通的。​</p>

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:06:14.810

我建议使用 css 类而不是 :hover。这将允许您在鼠标悬停和鼠标移出时设置类属性。[JS 小提琴示例](http://jsfiddle.net/nlarkin/cX7UC/2/)

```
$('#hovered_div').mouseover(
  function () {
      $('#div1').attr('class','hover');
      $('#div2').attr('class','hover');
      $('#div3').attr('class','hover');
  });

$('#hovered_div').mouseout(function() {
 $('#div1').attr('class','');
    $('#div2').attr('class','');
      $('#div3').attr('class','');

}); 
```

您必须将您的 css 更改为以下内容（将 ':hover' 更改为 '.hover'）

```
#div1.hover {
 background-color:green;
width:75px;    
} 
```

**修改后的做法**

```
$("#hovered_div").mouseover(function() {
    $('#div1').attr('class', 'hover');
    $('#div2').attr('class', 'hover');
    $('#div3').attr('class', 'hover');
}).mouseout(function() {
    $('#div1').removeClass('hover');
    $('#div2').removeClass('hover');    
    $('#div3').removeClass('hover');

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:35:02.833

`:hover`效果只能应用于子元素。

# c++ - 在 C++ 中读取 4 GB 的大数据文件

> ID：13919858
> 
> 赞同：-1
> 
> 时间：2012-12-17T18:25:32.633
> 
> 标签：c++, file-io, large-files

我在使用 fstream 读取 3.8 GB 文件时遇到问题？应该有另一种阅读方式。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:28:48.497

您无法在 32 位操作系统上一次读取这么大的文件。您需要一个 64 位操作系统和一个 64 位编译器。

更好的是分解问题，这样您就不必一次阅读整个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:36:13.263

正如其他答案所提到的，我认为您需要一个 64 位操作系统才能读取这么大的文件。

此外，假设您尝试从磁盘读取此文件，您应该实施某种缓冲区来减弱速度慢的影响。这可能会解决您的问题（取决于实施）。如果您发布了有关该问题的更多信息，我们可能会更具体地为您提供帮助。

这是您可以使用的示例： [http ://www.cplusplus.com/reference/fstream/filebuf/](http://www.cplusplus.com/reference/fstream/filebuf/)

# c# - 是否可以创建一个 snmp“代理”代理？

> ID：13919861
> 
> 赞同：1
> 
> 时间：2012-12-17T18:25:43.327
> 
> 标签：c#, snmp, cacti

当我有三台计算机A，B，C时，我遇到了一种情况。

计算机 A 和 B 位于可路由网络上，并且可以相互通信（不同的子网）。计算机 C 不可路由，但与 B 在同一子网中。

我想使用 SNMP 和仙人掌从计算机 A 监控计算机 C。

我正在尝试编写的是位于 B 上的 SNMP“代理”，它侦听自定义端口并从计算机 C 获取所有对 SNMP 的请求。

这可能吗？

感谢您的任何帮助。

安德鲁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:50:51.143

我不明白为什么你不能在 B 上设置一个 UdpProxy，它将 SNMP 从管理器 A 隧道传输到代理 C。

您将使用 .NET UdpClient 类[http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.udpclient.aspx)

我相信 SNMP 使用两个端口，因此您必须将 UdpClient 绑定到那些允许从管理器 IP（和陷阱的代理 IP）接收的端口。收到数据后，您必须将其重新发送到代理 IP，然后将响应发送回经理。对于陷阱消息（来自代理的警报/通知），您必须将它们发送给经理。

# git - 强制提交/推送文件

> ID：13919863
> 
> 赞同：0
> 
> 时间：2012-12-17T18:25:50.240
> 
> 标签：git, version-control

存储库 (git) 中有一个文件似乎是错误的图像；但是它共享正确图像的名称。

不知道错误的图像是如何出现的，但是在我的本地副本中，我有同名的正确图像，但是当我尝试提交此文件时，它并没有显示在丢失的已更改文件中。

如何强制提交（或推送）该文件，以便存储库具有正确的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:02:49.500

您可能在错误的分支上。Git 状态**将**显示更改的内容 - 无论名称是什么或它是否是二进制文件。

# icons - Xcode 管理器错误。无法验证 Mac App 1024x1024 的高 RES 图标

> ID：13919865
> 
> 赞同：1
> 
> 时间：2012-12-17T18:25:59.800
> 
> 标签：icons, osx-lion

Xcode 4.5 山狮

方法：让 Xcode 自动从图标集文件夹创建 ICNS 格式

当我在 Mac App Store 的管理器中验证时，我收到错误消息：应用程序包不包含 ICNS 格式的图标，其中包含 512x512 和 512x512@2x 图像。

这两个图标文件都包含在 HM_MAC.iconset 文件夹中。这两个图标都是在 PhotoShop 中使用 Export for Web Device 选项生成的。两者都是从具有 1024x1024 像素的照片商店图像中导出的。

我注意到在两个图标的文件信息窗口中，在创建后的“更多信息”下显示：

```
Dimensions: 1024 x 1024 and 512 x 512 
```

然后，当我检查相同的信息时，我发现

```
Dimension area for the larger 1024 x 1024 icon is BLANK. 
```

显示图标文件信息的图像：

[http://www.flickr.com/photos/79640605@N04/8281909148/in/photostream/](http://www.flickr.com/photos/79640605@N04/8281909148/in/photostream/) >

在 Xcode 中，将 iconset 文件夹添加到项目后，如果我单击 iconset 文件夹，图标会出现，下方有一个滑块。如果我滑动滑块，右下角显示的最大尺寸为 512。

重述问题。我有 10 个 PNG 文件需要放入“iconset”文件中

所有十个文件共享：没有 Alpha 的 RGB 全部由 PhotoShop CS4 生成，显示大小：1024:1024 为源文件。

我的十个文件中最大的两个是：

icon_512x512.png icon_512x512@2x.png // MBP Retina 屏幕所必需的

Finder的GetInfo View可以显示所有这些PNG文件的尺寸，除了最大的，即icon_512x512@2x.png

如果我在 iPhoto 中打开这个最大的文件，iPhoto 可以正确显示尺寸，即 1024 x 1024 和大小 280 kB

是什么导致 Finder 无法计算文件大小？不管是什么，同样的事情可能导致 myApp 在 Organizer 中验证失败。

有没有人遇到过这个问题？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:21:52.553

目前 OS X 应用程序需要 10 个从 16x16 到 1024x1024 的图标文件。

```
For example icon_16x16.png . 
```

我用这 10 个 PNG 文件创建了一个图标集文件/文件夹。然后我将文件 myApp.iconset 拖到 Xcode 项目的 Resources 组文件夹中。当我点击图标集时，图标出现在 Xcode 中，下方有一个滑块。当我滑动滑块时，显示的大小从 16 变为 512。1024 无处可见。当我将项目存档以便分发到 Mac Store 时，我收到一个验证错误，表明我没有 512x512@2x 和 512x512 文件。

Xcode 现在应该在构建时自动从图标集创建一个 ICNS 文件。它似乎不适用于我的图标集。

然后我取了同样的十个 PNG 文件，并从中创建了一个 ICNS 文件。在终端中，我使用了 iconutil 。

```
See : man iconutil 
```

它创建了一个名为 myApp.icns 的 ICNS 格式包，我将它放在 Resources/ 文件夹中。然后将 CFBundleIconFile 设置为 'myApp.icns'

```
Target -> Build Settings 
```

现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-11T15:06:07.910

“应用程序包不包含 ICNS 格式的图标，其中包含 512x512 和 512x512@2x 图像。”

在开发免费版本时，我重命名`<string>`了“CFBundleIconFile”条目，并且有一个错字，因此它指向一个不存在的 .icns 文件。在这种情况下，您会遇到相同的错误 - 因此，如果您遇到此问题，请务必验证该错误。

# html - CSS 进度条

> ID：13919867
> 
> 赞同：1
> 
> 时间：2012-12-17T18:26:20.243
> 
> 标签：html, css, progress-bar

我试图在几秒钟后隐藏一个进度条并显示一个 div。我已经编写了这个 jsFiddle，但似乎没有工作。

[jsFiddle](http://www.jsfiddle.net/CnkDe)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-11T19:04:07.250

**你可以在 css 中轻松做到这一点**

```
.blue{
 width: 200px;
 background-color: blue;
 height:30px;
 left:40px;
 top:30px;
 padding:5px;
 }
 .blue>div{
 background-color:red;
 height:25px;
 width:50px;
 top:10px;
 }
```

```
<div class="blue" ><div>20%</div></div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:32:37.913

您需要浏览器前缀：

```
@keyframes bubbly
{...}

@-moz-keyframes bubbly /* Firefox */
{...}

@-webkit-keyframes bubbly /* Safari and Chrome */
{...}mymove

@-o-keyframes bubbly /* Opera */
{...} 
```

所以它几乎适用于所有浏览器。

# java - Spring MVC 控制器动作通过 HttpURLConnection

> ID：13919873
> 
> 赞同：0
> 
> 时间：2012-12-17T18:26:49.533
> 
> 标签：java, spring, controller, action, urlconnection

我想使用 HttpURLConnection 调用 SPRING MVC 操作，只是想将其作为后台操作运行.....

```
String logoutUrl = "http://www.mysite.com/logout.sho";
URL url = new URL(logoutUrl);
HttpURLConnection connection = (HttpURLConnection) url.openConnection();
etc etc.... 
```

代码运行得很好，但没有执行该操作。但是，如果我尝试使用浏览器执行此操作：[http://www.mysite.com/logout.sho](http://www.mysite.com/logout.sho)，它会注销我。请让我知道如何解决此问题或解决此问题的任何其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:36:14.997

如果您使用 Java 程序打开 URL 连接，则您使用的会话 ID 与浏览器使用的会话 ID 不同，因此很明显，从 Java 注销不会将您从浏览器中注销。

想象一下，如果这可行，我只需要编写一个从 gmail.com 注销的程序，然后每个 gmail 用户都会被注销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:36:22.463

这是因为 Spring MVC 将您识别`HttpURLConnection`为一个完全独立的、独立的会话（用户）。尝试在不同的浏览器或不同的计算机上打开此 URL - 显然它不会让您退出。

无法识别您的原因是您没有提供任何会话跟踪信息，例如 JSESSIONID cookie 或重写的 URL。您可以从 Java 传递它们，但这有点 hack。它可以在您的浏览器中运行，因为每个请求都`mysite.com`透明地包含 JSESSIONID cookie，并且 Spring MVC 将其映射到活动会话。

话虽如此，你想达到什么目的？

# python - 带有变量替换的 Python subprocess.call

> ID：13919875
> 
> 赞同：1
> 
> 时间：2012-12-17T18:26:57.717
> 
> 标签：python

编码：

```
MOST_POPULAR_REPORTS_LOCATION = '/tmp'
MOST_POPULAR_REPORTS_FILE = 'filename.xml'
TEMP_DATA_FILE_LOCATION = '/tmp/other_location'
subprocess.call(["/bin/cp","-a","MOST_POPULAR_REPORTS_LOCATION MOST_POPULAR_REPORTS_FILE","TEMP_DATA_FILE_LOCATION"]) 
```

我在`MOST_POPULAR_REPORTS_LOCATION`和`MOST_POPULAR_REPORTS_FILE`那里放`/`什么？我尝试了各种组合但没有成功。

我想要的是用 a 分隔这两个变量`/`，以便它`/tmp/filename.xml`通过使用变量替换来读取。我不想硬编码路径或文件名，因为它们在整个脚本中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:29:17.277

使用[`os.path.join`](http://docs.python.org/2/library/os.path.html#os.path.join)：

```
subprocess.call(["/bin/cp", "-a",
    os.path.join(MOST_POPULAR_REPORTS_LOCATION, MOST_POPULAR_REPORTS_FILE), 
        TEMP_DATA_FILE_LOCATION]) 
```

你不应该把变量名放在引号中，否则你会得到字符串文字。这不是贝壳。

# matlab - Matlab是否有AndAlso等价物？

> ID：13919876
> 
> 赞同：2
> 
> 时间：2012-12-17T18:27:00.673
> 
> 标签：matlab, conditional, breakpoints

我需要检查表达式的有效性，如果它是真的，那么检查 2nd exp。它可以写成 2 个 if-end 结构，但我想将条件放在条件断点中，我认为不可能在一行中写 2 个 if。但是AndAlso可以解决我的问题。任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T18:32:14.833

如果您使用快捷方式`AND`ie `&&`，则仅在第一个语句为真时才评估第二个语句。因此，像

```
i>1 && foo(i)==3 
```

应该做的伎俩。

# java - 将 Struts2、Hibernate 与企业应用程序集成时发生 JasperException

> ID：13919877
> 
> 赞同：3
> 
> 时间：2012-12-17T18:27:04.733
> 
> 标签：java, hibernate, struts2, web-frameworks

我有一个用 Struts2、Hibernate 构建的 Web 应用程序，它运行良好。

我在 NetBean 中创建了一个新的**企业应用程序。**我构建的 Web 应用程序作为 Java EE 模块添加到**企业应用程序中。**我已选择客户端模块作为 Web 应用程序并尝试运行**企业应用程序**。

但是，Web 应用程序不起作用。它告诉我

```
org.apache.jasper.JasperException: The Struts dispatcher cannot be found.  

This is usually caused by using Struts tags without the associated filter. 

Struts tags are only usable when the request has passed through its servlet filter, 

which initializes the Struts dispatcher needed for this tag. - [unknown location] 
```

Web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
</web-app> 
```

一旦我从**企业应用程序**中删除 Web 应用程序并进行清理和构建。Web 应用程序只是可行的。

**补充：**

我已经在企业应用程序中添加了库，如下图所示，并且已经更改了`filter`。但仍然出现错误。 ![在此处输入图像描述](../Images/989e7ab834ce09b80083767e95593541.png) ![在此处输入图像描述](../Images/4b5479b09334c48f6d850e20f68949dc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:23:11.043

当您将 Web 应用程序作为企业应用程序正确添加为 JavaEE 模块时，请检查您是否配置了构建路径/类路径。可能存在一些未解决的依赖关系，因此它找不到 Struts 调度程序。

**注意：**自 Struts 版本 2.1.3 起，FilterDispatcher 过滤器已被弃用。如果您使用的是最新版本的 Struts2 (> 2.1.3)，请使用

org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter

反而。既然你得到了 JasperException。您需要知道几件事为什么会发生此异常：

*   每当您错过标签或未正确关闭标签时都会发生这种情况
*   当你的 JSP 没有被 jasper 引擎解析时，它会抛出 jasper 异常。意味着如果您没有正确编写 jsp 代码，并且如果您在 jsp 中放置了任何不可用的资源，那么我们将得到 Jasper Exception
*   以下原因可能要得到jasper Exception。

    构建路径中缺少 1.jsp-api.jar。

    1.  jsp代码写不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:19:15.020

就像@DarkHorse 提到的那样，您不应该使用`FilterDispatcher`，请将其更改为`org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter`.

似乎您没有包含所有依赖项。确保您的类路径中有以下依赖项：
![在此处输入图像描述](../Images/b9970eb749842d7ec4af3cb2485e4f18.png)

# android - 使用 Intent 与 Activity 通信

> ID：13919887
> 
> 赞同：0
> 
> 时间：2012-12-17T18:27:32.753
> 
> 标签：android, android-intent

使用意图在两个活动之间进行通信似乎并不简单。无论在哪里（可能在 onResume() 中）我都会检查意图，我最终会遇到无法区分沿 startActivity() 传递意图的调用和设备旋转时的调用的情况（或稍后通过 onPause() 和 onResume() 循环），因为意图仍然可用。

我该如何处理上面的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:32:12.490

你总是会得到调用活动的意图。在像旋转显示器这样的配置更改上`onConfigurationChanged`被调用。在这里查看：http: [//developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange](http://developer.android.com/guide/topics/resources/runtime-changes.html#HandlingTheChange)

您可以使用它来区分它是否是旋转更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:34:51.150

你总能做到

[`setIntent(intent)`](http://developer.android.com/reference/android/app/Activity.html#setIntent%28android.content.Intent%29)

更改您收到的意图。所以你可以添加一个额外的或设置一个完全不同的意图。下次您执行 getintent 时，您将获得您设置的意图

# rest - 基于 Web 的实时通信与 REST 范式不兼容吗？

> ID：13919888
> 
> 赞同：9
> 
> 时间：2012-12-17T18:27:40.567
> 
> 标签：rest, web-applications, websocket, real-time, meteor

Web 应用程序在过去几年中经历了巨大的范式转变。

十年前（不幸的是，即使是现在），Web 应用程序只存在于*重量级*的服务器中，处理从数据到表示格式的所有内容，并发送到只呈现服务器（浏览器）输出的愚蠢客户端。

然后 AJAX 加入了游戏，Web 应用程序开始变成存在于服务器和浏览器之间的东西。

在 AJAX 的高潮期间，Web 应用程序逻辑开始完全依赖于浏览器。我认为这是 HTTP RESTful API 开始出现的时候。突然之间，每一项新服务都有其***类型的***RESTful API，突然之间，JavaScript MV* 框架开始像爆米花一样突然出现。移动设备的使用也大大增加，REST 非常适合这类场景。我在这里说“一种 RESTful”，因为几乎所有声称是 REST 的 API 都不是。但这是一个完全不同的故事。

事实上，我成了某种“ *REST 布道者*”。

当我认为 Web 应用程序无法进一步发展时，一个新时代似乎正在来临：有状态的持久连接 Web 应用程序。 [Meteor](http://meteor.com/)是此类应用程序的出色框架的一个示例。然后我看到了这个[视频](https://www.youtube.com/watch?v=vpp-8gkPWVE)。在这段视频中，Matt Debergalis 谈到了 Meteor，两者都做得非常出色！然而，他出于这种目的而降低了 REST API，以支持持久的实时连接。

例如，我非常希望有实时模型更新，但仍然拥有所有 REST 的魅力。 **流式 REST API**似乎是我所需要的（例如 firehose.io 和 Twitter 的 API），但是关于这种新型 API 的信息很少。

所以我的问题是：

**基于 Web 的实时通信与 REST 范式不兼容吗？**

*（很抱歉介绍性文字很长，但我认为这个问题只有在某些情况下才有意义）*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:57:10.603

只要您不四处走动，Web 应用程序的有状态持久 tcp/ip 连接就很棒。

我开发了一个基于 Web 的实时框架，根据我的经验，我发现当使用基于移动设备的 Web 浏览器时，IP 地址会随着我从一个塔到另一个塔，或者从 wi-fi 到 wi-fi 不断变化。

当 IP 地址不断变化时，它是持久连接的概念很快就会消失。

实时 Web 应用程序框架的架构必须假设连接是瞬态的，并且框架必须实现自己的会话概念，同时与后端的底层 IP 连接不断变化。

一旦在客户端和服务器之间的所有请求和响应中定义并使用了会话，就基本上具有“网络连接”。现在，人们可以使用 REST 范式开发基于 Web 的实时应用程序。

框架的后端服务器必须是智能的，以便在 IP 地址进行转换时排队更新，然后在重新建立 tcp/ip 连接时进行同步。

简短的回答是，“是的，您可以使用 REST 范例来制作基于 Web 的实时应用程序”。

如果你想玩一个，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T04:46:19.280

我对这个话题也很感兴趣。这篇文章有一些论文链接，这些论文讨论了设计不佳的 RPC 的一些问题：

[http://thomasdavis.github.com/2012/04/11/the-obligatory-refutation-of-rpc.html](http://thomasdavis.github.com/2012/04/11/the-obligatory-refutation-of-rpc.html)

我并不是说 Meteor 设计不佳，因为我对 Meteor 了解不多。

无论如何，我想我想要两个“世界”中最好的。我想从 REST 以及它提供的所有受约束的通用接口、可寻址性、无状态等中受益。

而且，我也不想在这场“实时”网络革命中落后！这绝对是非常棒的。

我想知道是否没有可以工作的混合方法：

RESTful 端点可以允许客户端进入空间，并按照 HATEOAS 的要求跟踪相关文档的链接。但是，对于资源的“更新流”，也许“订阅名称”本身可能是一个 URI，当在一个时间点单个请求中浏览到它时，例如通过 Web 浏览器的地址栏或 curl，会返回“当前状态”的表示，或带有 href 的链接列表以获取资源的先前状态和/或查询针对对象发生的离散“事件”的方法。

这样，如果您使用实体的“版本 1”声明，然后针对它重播每个事件，您可以将其更改为“当前状态”，并且这些事件可以流式传输到执行该操作的客户端不想仅仅因为实体的一小部分发生了变化就得到完整的表示。这基本上是“事件存储”的概念，其中包含许多 CQRS 信息。

就 REST 兼容而言，我相信这种方法已经完成（虽然我不确定这方面的流媒体），我不记得它是否在这本书中[http://shop.oreilly.com/product /9780596805838.do](http://shop.oreilly.com/product/9780596805838.do)（实践中的 REST），或者在我听到的 Vaughn Vernon 在 QCon 2010 录制的演讲中的演讲中：http: [//www.infoq.com/presentations/RESTful-SOA-DDD](http://www.infoq.com/presentations/RESTful-SOA-DDD)。

他谈到了类似这样的 URI 设计（我记不太清了）

host/entity <-- 资源的当前版本 host/entity/events <-- 将对象改变为当前状态的事件列表

例子：

host/entity/events/1 <--这将对应于实体的创建 host/entity/events/2 <--这将对应于针对实体的第二个事件

他可能也有一些关于历史的东西，完整的时间状态，比如：

host/entity/version/2 <-- 这将是上述事件 2 之后实体的整个状态。

Vaughn 最近出版了一本书，《实现领域驱动设计》，从目录来看，它涵盖了 REST 和事件驱动架构：[http ://www.amazon.com/gp/product/0321834577](https://rads.stackoverflow.com/amzn/click/com/0321834577)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T04:46:02.707

我是[http://firehose.io/](http://firehose.io/)的作者，这是一个基于 Streaming RESTful API 可以并且应该存在的前提的实时框架。来自项目网站：

> Firehose 是一种构建实时 Web 应用程序的微创方式，无需复杂的协议或从头开始重写您的应用程序。它是一个简单的发布/订阅服务器，通过 WebSockets 或 HTTP 长轮询使客户端 Javascript 模型与服务器代码保持同步。**它完全包含 RESTful 设计模式**，这意味着您在构建应用程序后将获得一个不错的 API。

我希望这个框架可以防止 Internet 回到 RPC 黑暗时代，但我们会看看会发生什么。我们确实在[Poll Everywhere](http://www.polleverywhere.com)的生产环境中使用 Firehose.io，每天向各种不同设备上的人们推送数百万条消息。有用。

# legacy-code - 关于记录和浏览遗留代码的建议

> ID：13919889
> 
> 赞同：0
> 
> 时间：2012-12-17T18:27:50.130
> 
> 标签：legacy-code

我不得不使用很少或没有文档的遗留代码（主要是 CFML），也没有任何类型的域模型可以遵循。

为了开始从中建立一些意义，我虽然“开始做笔记”，然后想知道普通的旧日记和铅笔是否可以做文字笔记。也许是文本文档（可搜索）。或者随着时间的推移，最好的尝试是让 UML 成为野兽？一方面，如果这太过分了，另一方面，我发现自己一遍又一遍地感觉自己在大象身边。你如何建立一个领土的地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:03:08.187

很抱歉回答迟了，但我之前已经在这种情况下结束了几次。我建议您不要为此创建 UML，因为这将花费很多时间并且此代码不是很好，正如您所指出的（没有域模型，没有结构）。

您可以使用笔和纸，或文本文件。浏览代码，找到最重要的部分并写下它的位置，并附上一些描述。如果没有数据结构，你可以使用文件名、模块、行号等。花一些时间做这些之后，你将对系统部分的导航计划和它的工作原理有大致的了解。

另外，您应该参考[这个问题](https://stackoverflow.com/questions/2962730/understanding-a-big-company-project-in-java)，有一些有用的答案。

# perl - 使用特定用户名 FTP 到服务器

> ID：13919890
> 
> 赞同：0
> 
> 时间：2012-12-17T18:27:49.867
> 
> 标签：perl, ftp

我正在尝试 ftp 进入服务器，一旦我在那里，我想获取一个文件，然后在休眠 5 分钟后将其放回。我的那部分是正确的，但是我在代码中添加了两个将在执行代码时输入的变量。用户将输入他们想要连接的用户名。我在连接时遇到问题。当我输入用户名 t14pb 时，它仍然转到第一个 if 语句，好像我说的是 t14pmds。这是代码：

```
#!/usr/bin/perl

use Net::FTP;

$host     = "fd00p02";
$username = "$ARGV[0]";
$ftpdir   = "/";
$file     = "$ARGV[1]";

print "$username\n";
print "$file\n";

if ($username == t14pmds) {

  $password = "test1";

  $ftp = Net::FTP->new($host) or die "Error connecting to $host: $!";
  $ftp->login($username, $password) or die "Login failed: $!";
  $ftp->cwd($ftpdir) or die "Can't go to $ftpdir: $!";
  $ftp->get($file) or die "Can't get $file: $!";

  sleep 5;

  $ftp->put($file) or die "Can't put $file: $!";
  $ftp->quit or die "Error closing ftp connection: $!";
}

if ($username == t14pb) {

  $password = "test2";

  $ftp = Net::FTP->new($host) or die "Error connecting to $host: $!";
  $ftp->login($username, $password) or die "Login failed: $!";
  $ftp->cwd($ftpdir) or die "Can't go to $ftpdir: $!";
  $ftp->get($file) or die "Can't get $file: $!";

  sleep 5;

  $ftp->put($file) or die "Can't put $file: $!";
  $ftp->quit or die "Error closing ftp connection: $!";
}

if ($username == t14pmds_out) {

  $password = "test3";

  $ftp = Net::FTP->new($host) or die "Error connecting to $host: $!";
  $ftp->login($username, $password) or die "Login failed: $!";
  $ftp->cwd($ftpdir) or die "Can't go to $ftpdir: $!";
  $ftp->get($file) or die "Can't get $file: $!";

  sleep 5;

  $ftp->put($file) or die "Can't put $file: $!";
  $ftp->quit or die "Error closing ftp connection: $!";
}

if ($username == t14fiserv) {

  $password = "test4";

  $ftp = Net::FTP->new($host) or die "Error connecting to $host: $!";
  $ftp->login($username, $password) or die "Login failed: $!";
  $ftp->cwd($ftpdir) or die "Can't go to $ftpdir: $!";
  $ftp->get($file) or die "Can't get $file: $!";

  sleep 5;

  $ftp->put($file) or die "Can't put $file: $!";
  $ftp->quit or die "Error closing ftp connection: $!";
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T18:46:42.367

Perl 标量有两种风格：字符串和数字。您使用 测试数字相等性`==`。如果字符串看起来不像数字，则认为它们等于零。这就是为什么总是执行第一个分支（0 == 0）。

您测试与 的字符串等价`eq`，因此您想比较 like `if ($username eq "foo") {...}`。

但是，if-brances 中的代码不会改变，因此您可以将公共代码移到外面。剩下的是用户名和密码之间的映射——*哈希*有利于：

```
my %uname_2_passwd = (
   t14pmds => "test1", # LHS of "=>" is auto-quoted, 
   ...                 # if it would be a valid variable name.
);

my $password = $uname_2_passwd{$username};

# common code here 
```

另外，请`use strict; use warnings`在脚本的顶部。这将指出大多数错误（例如忘记引号，或不使用 eq 进行字符串比较，或在数字比较中使用字符串，或未声明变量）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T23:01:38.940

在您编写的*每个*`use strict`程序中，以及`use warnings`在接近第一个使用点时声明变量，这一点尤为重要。*`my`*

 *你的整个程序最好这样写，使用散列作为查找表来查找每个用户的密码。

```
#!/usr/bin/perl

use strict;
use warnings;

use Net::FTP;

my ($username, $file) = @ARGV;

my %passwords = (
  t14pmds => 'test1',
  t14pb => 'test2',
  t14pmds_out => 'test3',
  t14fiserv => 'test4',
);

my $password = $passwords{$username} or die qq<Unknown username "$username">;

print "User: $username\n";
print "Pass: $file\n";

my $host     = 'fd00p02';
my $ftpdir   = '/';

my $ftp = Net::FTP->new($host) or die "Error connecting to $host: $!";
$ftp->login($username, $password) or die "Login failed: $!";
$ftp->cwd($ftpdir) or die "Can't go to $ftpdir: $!";
$ftp->get($file) or die "Can't get $file: $!";

sleep 5;

$ftp->put($file) or die "Can't put $file: $!";
$ftp->quit or die "Error closing ftp connection: $!";

print "All phases successful\n"; 
```*

# ssas - ssas mdx：查询出错

> ID：13919896
> 
> 赞同：1
> 
> 时间：2012-12-17T18:28:05.733
> 
> 标签：ssas, mdx

我收到错误消息：查询 (9, 7) 解析字符串 [Measures].[Total Earnings] 时，在多维数据集中找不到“[Total Earnings]”成员。

- 很常见，但我只是看不到查询的位置。希望你们中的一个人会发现它，或者有更好的方法这是我所拥有的：

```
 with
     member measures.[Total all Earnings] as [Total Earnings]
      (measures.[Total GS Earned]) + (measures.[Total DSE Earned]) + (measures. [Total Shares Earned])
   set [Top 10 Interstate Earnings] as
    topcount 
    (
      {Stores.[Interstate]. [Interstate].members},
       10,
       (Measures.[Total Earnings], [Time].[C Year].[2011])
     )
    select
    {([Measures].[Total Earnings])} on columns,
      {[Top 10 Interstate Earnings]} on rows
       from LoyaltyMeasurements
       Where (Time.[C Year].[2012]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:33:28.203

我是个笨蛋……没关系。粘贴之前我没看到！

计算成员的第一行应如下所示：

```
 with
     member measures.[Total Earnings] as 
```

# javascript - 将图像拖到特定位置时从 html5 画布中删除图像

> ID：13919905
> 
> 赞同：2
> 
> 时间：2012-12-17T18:28:35.870
> 
> 标签：javascript, html5-canvas, kineticjs

我有一个 HTML5 画布，其中显示了许多图像和四个描述框。目前可以在画布周围拖放图像，但我想添加功能以在将图像拖动到正确的描述框时删除图像。

我已经尝试编写以下函数，但它目前似乎没有做任何事情......即如果我将图像拖到它的描述框并放下它，它仍然保留在画布上：

```
function initStage(images){
    var stage = new Kinetic.Stage({
        container: "container",
        width: 1000,
        height: 500
    });
    var descriptionLayer = new Kinetic.Layer();
    //var imagesLayer = new Kinetic.Layer();
    var allImages = [];
    var currentScore = 0;

    var descriptionBoxes = {
        assetsDescriptionBox: {
            x: 70,
            y: 400
        },
        liabilitiesDescriptionBox: {
            x: 300,
            y: 400
        },
        incomeDescriptionBox: {
            x: 530,
            y: 400
        },
        expenditureDescriptionBox: {
            x: 760,
            y: 400
        },
    };

    /*Code to detect whether image has been dragged to correct description box */
    for (var key in sources){
        /*Anonymous function to induce scope */
        (function(){
            var privateKey = key;
            var imageSource = sources[key];

            /*Check if image has been dragged to the correct box, and add it to that box's
                array and remove from canvas if it has */
            canvasImage.on("dragend", function(){
                var descriptionBox = descriptionBoxes[privateKey];
                if(!canvasImage.inRightPlace && isNearDescriptionBox(itemImage, descriptionBox)){
                    context.remove(canvasImage);
                    /*Will need to add a line in here to add the image to the box's array */
                }
            })

        })();
    }

} 
```

我编写的代码基于我在以下位置找到的教程：http: [//www.html5canvastutorials.com/labs/html5-canvas-animals-on-the-beach-game-with-kineticjs/](http://www.html5canvastutorials.com/labs/html5-canvas-animals-on-the-beach-game-with-kineticjs/)

谁能发现我做错了什么，以及如何确保将图像拖到相应的描述框时从画布中删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:00:41.523

这个例子让我很烦，因为它看起来很旧，所以我稍微编辑了一下......
[http://jsfiddle.net/LTq9C/1/](http://jsfiddle.net/LTq9C/1/)
...请记住，我不能肯定我所有的编辑都是最好的方法做事，我是新人；）

在这里，我再次对其进行了编辑，以显示被删除的图像...

```
 animal.on("dragend", function() {
        var outline = outlines[privKey + "_black"];
        if (!animal.inRightPlace && isNearOutline(animal, outline)) {
            animal.remove();
            animalLayer.draw();
        }
    }); 
```

[http://jsfiddle.net/8S3Qq/1/](http://jsfiddle.net/8S3Qq/1/)

# java - 获得工作日

> ID：13919906
> 
> 赞同：2
> 
> 时间：2012-12-17T18:28:39.943
> 
> 标签：java

我创建了一个每天在特定时间运行的程序，

但我希望这个程序在某些特定的日子（周末）停止，

我使用下面的代码来设置当前时间，

```
public int GetDateNow()
{
    Calendar currentdate = Calendar.getInstance();
    DateFormat dateformat = new SimpleDateFormat("HHmm");
    String datenow = dateformat.format(currentdate.getTime());
    int DN=Integer.parseInt(datenow);
    return DN;
} 
```

以及主类中的以下代码

```
while(true)
{
    Thread.sleep(1*1000);
    if(gt.GetDateNow()==0000)
    {
        //perform action
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T18:29:36.930

利用 [`Calendar`](http://docs.oracle.com/javase/1.6/docs/api/java/util/Calendar.html)

```
calendarInstance.get(Calendar.DAY_OF_WEEK); 
```

并将其与周末（`Calendar.SATURDAY, Calendar.SUNDAY`或取决于国家/地区）进行比较

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:49:32.503

Spring Framework 提供基于 cron 表达式的任务调度，您只需在 context.xml 中配置您的任务，例如

```
<task:scheduled ref="task" method="execute" cron="* 15 9-17 * * MON-FRI" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T16:30:09.357

好的，谢谢大家，我使用代码后它工作正常

```
calendarInstance.get(Calendar.DAY_OF_WEEK); 
```

万事如意，

# javascript - GWT：将文本设置在标签中间（垂直）

> ID：13919909
> 
> 赞同：3
> 
> 时间：2012-12-17T18:28:50.550
> 
> 标签：javascript, html, gwt

我正在向 Horizo​​ntalPanel 添加图像和标签。图像与中心垂直对齐，但标签中的文本始终与顶部对齐。

我正在寻找一种方法使文本出现在标签的中间（因此在面板的中间）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T19:26:34.060

```
myPanel.setVerticalAlignment(HasVerticalAlignment.ALIGN_MIDDLE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T03:39:54.620

像下面的代码一样在水平面板上使用对齐。

```
panel.setCellHorizontalAlignment( image, HasHorizontalAlignment.ALIGN_CENTER );

panel.setCellHorizontalAlignment( label, HasHorizontalAlignment.ALIGN_CENTER ); 
```

# javascript - 获取 $(this) 的选定选项

> ID：13919911
> 
> 赞同：1
> 
> 时间：2012-12-17T18:28:56.933
> 
> 标签：javascript, jquery

如果我正在遍历一些作为`select`下拉列表的 jquery 对象，如何使用 jquery 获取所选选项的类`$(this)`？

```
elems.each(function(idx, elem) {
    if ($(this).is('select')){
        console.log($(this, "option:selected"))
    }
}); 
```

似乎不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T18:36:59.007

```
​elems.each(function(idx, elem) {
    var ref = $(this); // caching $(this)
    if( ref.is('select') ) {
        console.log( ref.find('option:selected') );

        // OR in jQuery Context format
        console.log( $('option:selected', ref) ); // this format internally 
                                                  // called .find() method

        // to get the class
        console.log( ref.find('option:selected').attr('class') );
    }
})​; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T18:35:28.187

除了您传递参数的顺序不正确之外，您几乎就在那里。见下文，

```
elems.each(function(idx, elem) {
    if ($(elem).is('select')){
        console.log($("option:selected", elem));
    }
}); 
```

`$("option:selected", this)`其中第一个参数是选择器，第二个参数是上下文。

**注意：**第二`.each`个参数是元素本身，所以你可以使用`elem`而不是`this`

**演示：http:** [//jsfiddle.net/MUC6H/1/](http://jsfiddle.net/MUC6H/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T18:31:18.137

> 如何获得所选选项的类

```
if ($(this).is('select')){
        console.log($(this).find("option:selected").attr("class"));
    } 
```

[http://jsfiddle.net/DWEY4/](http://jsfiddle.net/DWEY4/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-17T18:31:56.067

你试过这个`hasClass`功能吗？

```
elems.each(function(idx, elem) {
    if ($(this).hasClass('select')){
        console.log($(this, "option:selected"))
    }
}); 
```

`.`进一步看，我认为如果您添加类标识符，您的原始方法也会起作用

```
elems.each(function(idx, elem) {
    if ($(this).is('.select')){
        console.log($(this, "option:selected"))
    }
}); 
```

# sql - How to create multiple rows (as date column) into CTE? (out of thin air)

> ID：13919915
> 
> 赞同：0
> 
> 时间：2012-12-17T18:29:09.087
> 
> 标签：sql, sql-server, sql-server-2008

I have a stored-procedure and I want to add date column to the tables. Then I wonder how do I get MS-SQL to generate multiple rows on the fly using CTE. Say I have this..

```
(GETDATE() - 548)  --(365 days --> 12 months, 548 days --> 18 months...

```

How do you guys whip up a query that would create 548 rows and have the date column as row

```
#1 - '12/17/2012'
#2 - '12/16/2012'
#3 - '12/15/2012'

```

etc. all the way to row #548? All of that into a CTE?

Thanks...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:34:35.790

Unless I am missing something, it sounds like you want the following:

```
;with dates(value) as
(
    select DATEADD(d, -548, cast(getdate() as DATE))
    union all
    select DATEADD(D, 1, value)
    from dates
    where DATEADD(D, 1, value) <= cast(getdate() as DATE)
)
select *
from dates
order by value desc
OPTION (MAXRECURSION 1000) 
```

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!3/d41d8/7256)

# sql-server-2008 - 当您不进行部分搜索时，通配符 (%) 是否会影响性能？

> ID：13919923
> 
> 赞同：0
> 
> 时间：2012-12-17T18:29:38.303
> 
> 标签：sql-server-2008, tsql

如果我正在搜索字符串`ABC123`。如果我有它会影响性能吗

```
SELECT string FROM TABLE WHERE
string like `ABC123%` 
```

如果这有助于答案，请注意几点。字符串最长为 6 个字符。不会有类似`ABC1231`或`ABC123B`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:38:48.833

如果`string`被索引，您不应该看到任何性能差异。

也就是说，您应该始终在您的环境中、针对您的数据以及使用现实和并发的工作负载执行谨慎的性能测试，而不是依赖 StackOverflow 上的某个人所说的话。

# scala - log4j 不适用于 Jetty 和 liftweb 应用程序

> ID：13919924
> 
> 赞同：0
> 
> 时间：2012-12-17T18:29:39.950
> 
> 标签：scala, log4j, jetty, lift

我正在使用带有 log4j 的 Jetty 上的 liftweb 服务进行日志记录。

这是我在 Boot 类中设置记录器的方法：

```
val config = Properties.envOrElse("log4j.configuration","/props/syslog.log4j.xml")
val configFile = getClass.getResource(config)
Logger.setup = Full(Log4j.withFile(configFile)) 
```

将应用程序作为服务运行（**service jetty start**）时，我看不到任何写入的日志文件。

我在这里做错了什么？

这是我的 syslog.log4j.xml 配置文件：

```
<root>
    <level value="trace"/>
    <appender-ref ref="CA"/>
    <appender-ref ref="CA2"/>
</root> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T16:12:17.587

请阅读此 wiki 页面以设置 log4j： [https ://www.assembla.com/spaces/liftweb/wiki/Logging](https://www.assembla.com/spaces/liftweb/wiki/Logging)

希望这可以帮助

保罗

# iphone - 如何在ios中隐藏和查看密码之间切换？

> ID：13919934
> 
> 赞同：11
> 
> 时间：2012-12-17T18:30:13.080
> 
> 标签：iphone, objective-c, ios, xcode, uitextfield

是否有一种聪明的方法可以让用户在 ios/iphone UITextField 中在隐藏和查看密码之间切换，用户可以在其中输入密码并可以选择隐藏或查看密码。提前致谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-17T19:00:52.463

简单设置

```
.secureTextEntry = YES 
```

如果 textField 有焦点，我认为由于错误（或功能）而无法工作。

如果 textField 当前是 firstResponder，也可以使用类似的方法使其工作

```
-(void) toggleTextFieldSecureEntry: (UITextField*) textField {
    BOOL isFirstResponder = textField.isFirstResponder; //store whether textfield is firstResponder

    if (isFirstResponder) [textField resignFirstResponder]; //resign first responder if needed, so that setting the attribute to YES works
    textField.secureTextEntry = !textField.secureTextEntry; //change the secureText attribute to opposite
    if (isFirstResponder) [self.textField becomeFirstResponder]; //give the field focus again, if it was first responder initially
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-08-27T07:52:51.310

```
- (IBAction)ShowPass:(UIButton *)sender {
    if (self.password.secureTextEntry == YES) {
        [self.showPass setTitle:@"HIDE" forState:(UIControlStateNormal)];
        self.password.secureTextEntry = NO;   
    }else{
        [self.showPass setTitle:@"SHOW" forState:(UIControlStateNormal)];
        self.password.secureTextEntry = YES;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-15T07:36:04.183

马里奥的回答很好，对我帮助很大。

但是，如果您在文本字段中使用**自定义字体**，一旦您从安全输入更改为纯文本，文本字段的文本将使用错误（非自定义）字体绘制，直到用户输入另一个字符。

通过一些小技巧，我能够通过模拟代码中的字符输入来解决这个问题。

这个修改过的马里奥的代码应该适用于具有自定义字体的字段：

```
- (void)toggleTextFieldSecureEntry:(UITextField *)textField {
    BOOL isFirstResponder = textField.isFirstResponder;

    if (isFirstResponder) {
        [textField resignFirstResponder];
    }

    textField.secureTextEntry = !textField.secureTextEntry;

    if (isFirstResponder) {
        [textField becomeFirstResponder];
    }

    // When using custom font and changing from secure entry to plain text, the text is initially drawn with wrong font
    // until a next character is input by user. This hack fixes the font immediatelly (simulate add and delete character)
    if (!textField.isSecureTextEntry) {
        [textField insertText:@"x"];
        [textField deleteBackward];
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-17T18:47:32.927

您可以使用`secureTextEntry`. `UITextField`当你想隐藏（显示每个字符的点）时，你可以使用`yourTextField.secureTextEntry=YES;` 当你想显示密码时使用`yourTextField.secureTextEntry=NO;`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-25T02:51:51.807

对于 Swift，只有赋值值从 YES/NO 变为 true/false 布尔值。

```
password.secureTextEntry = true //Visible
password.secureTextEntry = false //InVisible 
```

# delphi - 如何清除jpeg图像？

> ID：13919935
> 
> 赞同：6
> 
> 时间：2012-12-17T18:30:17.307
> 
> 标签：delphi

如何清除 TJPEGImage 图像？

`JPG.Width := 0`诀窍是行不通的。此外，我不想创建一个空位图（0x0 像素）并将其分配给 jpeg。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T19:42:09.310

你可能会使用这样的东西（这里使用插入的类来访问受保护的方法）：

```
type
  TJPEGImage = class(jpeg.TJPEGImage);

implementation

procedure TForm1.Button1Click(Sender: TObject);
var
  JPEGImage: TJPEGImage;
begin
  JPEGImage := TJPEGImage.Create;
  try
    // this should recreate the internal bitmap
    JPEGImage.NewBitmap;
    // this should recreate the internal image stream
    JPEGImage.NewImage;
    // here the memory used by the image should be released
  finally
    JPEGImage.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T19:08:05.080

如果您不想使用 FreeAndNil 并将图像保留为空...

```
Procedure EmptyJPG(jpg:TJpegImage);
var
 j:TJpegImage;
begin
  j := TJpegImage.Create;
  try
    jpg.Assign(j);
  finally
    j.Free;
  end;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-27T11:30:00.407

将 Tshape 组件放在 TImage 组件的背景上

```
Image1 : Timage
.
.
Image1.Picture.Graphic.Assign(nil); 
```

# php - MySQL 查询包含两个字段

> ID：13919940
> 
> 赞同：0
> 
> 时间：2012-12-17T18:30:39.163
> 
> 标签：php, mysql, sql

我的两个表，仅包含相关值，是：

*   xx_users（用户 ID、名称、位置）
*   xx_posts (post, user_id)

xx_users 包含所有用户，包括当前用户和发布者。

在模拟代码中，我想要实现的是：

```
SELECT * FROM xx_posts WHERE poster location = user location 
```

鉴于两个表之间的交叉，我将如何处理这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T18:33:42.523

如果我很好地理解了您的问题，则解决方案可能类似于：

`SELECT * from posts INNER JOIN users ON users.user_id = posts.user_id WHERE users.location = 'the location`'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:43:51.053

如果我正确理解了这个问题，您希望查看与当前用户（或另一个给定用户）共享位置的用户发布的所有帖子。在这种情况下：

```
SELECT p.* 
FROM xx_posts p 
INNER JOIN xx_users poster ON p.user_id = poster.user_id 
INNER JOIN xx_users currentuser ON u1.location = u2.location
WHERE currentuser.user_id = <the id of the user you're interested in> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:34:56.890

你想要这个吗？

```
SELECT p.post,p.user_id,...
FROM xx_posts as p
INNER JOIN xx_users as u
ON p.user_id=u.user_id
WHERE p.location = u.location 
```

[http://www.w3schools.com/sql/sql_join_inner.asp](http://www.w3schools.com/sql/sql_join_inner.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T18:38:12.250

要获得两组的交集，请使用`INNER JOIN`：

```
SELECT a.user_id, a.name, a.location, b.post
FROM xx_posts b
INNER JOIN xx_users a ON a.user_id = b.user_id 
```

## [看到它在行动](http://sqlfiddle.com/#!2/6a2ba/1)

要根据位置进行过滤，请添加：

```
WHERE a.location = 'Alaska' 
```

指定列列表也是最佳实践，避免使用`SELECT *`.

**`INNER JOIN`**

![](../Images/eb46898f609fd78ab839d57578cac67d.png)

# salesforce - 当所有对象相互引用时如何部署 Force ID 应用程序

> ID：13919942
> 
> 赞同：1
> 
> 时间：2012-12-17T18:30:49.523
> 
> 标签：salesforce, force-ide

当我尝试部署我的应用程序时，由于冲突而失败。

我有 3 件物品：

1.  视觉力量页面
2.  一流的
3.  自定义对象

自定义对象覆盖了 visualforce 页面的新按钮。因此，当我试图保护它时，会发生冲突并且它失败了。

visualforce 页面引用了顶点类。因此，当我首先尝试保护它时，它失败了。

顶点类引用自定义对象。因此，当我尝试先保存它时，它失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:35:17.707

鸡和蛋的问题。你有一个循环依赖 :) 不幸的是，Salesforce 在解决它们方面非常聪明，但在这种情况下失败了。

您将需要 2 个单独的部署，并且可以通过 2 种方式进行（至少我认为它们是最简单的）。

**选项1**

注释掉整个 VF“新”页面和对控制器扩展的引用。留下一个空壳：

```
<apex:page standardController="CustomObject__c">
</apex:page> 
```

这仍然是一个有效的“新”页面覆盖（虽然很奇怪），您将能够部署。

1.  部署对象、类和这个存根页面。
2.  部署页面（或直接编辑它，因为我们可以在生产中编辑 VF）。

**选项 2**

删除“新”覆盖，部署所有（这将是一个普通的 VF 页面），手动更改对象的属性（或再次部署对象）。这是一个更简单的场景，更难出错，因为您并没有真正在实时环境中编辑代码。

如果您需要部署嵌入在页面布局中的 VF 页面，您可以使用类似的技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T03:36:37.407

如果您将所有相关对象部署在一起，而不是一次部署一个，那么您应该不会有问题。Force.com IDE 可以一次部署多个文件。

我已经使用这种方法部署了许多具有自定义对象的代码，这些对象具有您提到的顶点页面覆盖和控制器。

# macos - 2 NSString 之间是否相等？

> ID：13919944
> 
> 赞同：-1
> 
> 时间：2012-12-17T18:31:02.970
> 
> 标签：macos

> **可能重复：**
> [比较objective-C中的2个字符串](https://stackoverflow.com/questions/6118574/compare-2-string-in-objective-c)

我尝试比较 2 个 NSString 之间的相等性...

第一个存储在共享用户默认值中，第二个由用户通过 NSTextField 输入...

这是我的一些代码（Xcode 4.5.2 Mac OS 10.7）...

第一个 AppDelegate.h ：

```
@interface AppDelegate : NSObject <NSApplicationDelegate>{

    NSUserDefaults *administratifPref;

    ...

    IBOutlet NSTextField *champProtection;

    ...
}

...

- (IBAction)poursuivre:(id) sender;

...

@end 
```

这里是 AppDelegate.m ：

```
- (IBAction)poursuivre:(id)sender {

if([champProtection stringValue] == [champProtection stringValue]){
    ...
    ...
    }

} 
```

我的问题是：为什么条件“如果”**从未**得到验证？！

我没有问题，没有崩溃......

我确实添加了 2 个 NSLog ：

```
- (IBAction)poursuivre:(id)sender {

NSLog([champProtection stringValue]);
NSLog([administratifPref valueForKey:@"motdepasse"]);

if([champProtection stringValue] == [champProtection stringValue]){
    ...
    ...
    }

} 
```

并且返回的值**是**相同的:(

我发现的唯一解决方案是：

```
- (IBAction)poursuivre:(id)sender {

BOOL result = [[champProtection stringValue] isEqualToString:[administratifPref valueForKey:@"motdepasse"]];
if(result == YES) {
    ...
    ...
    }

} 
```

所以......谁能解释一下这两种编码方式之间的区别，这似乎很不一样？（但对于像我这样的新手来说，这似乎真的是一样的，他们相信那些说 Cocoa 很简单的人^^）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:33:45.300

运算符正在比较对象的`==`指针地址（它们是不同的，因为您有两个对象。每个对象都分配了自己的内存空间，因此它们具有不同的指针地址），而 isEqualToString 正在比较内存缓冲区的内容（即字符串他们自己）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T18:35:26.697

```
[champProtection stringValue] == [champProtection stringValue] 
```

在这里，您正在与他们的地址进行比较。

```
[[champProtection stringValue] isEqualToString:[administratifPref valueForKey:@"motdepasse"]]; 
```

它正在比较真实的字符串内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T18:40:29.523

要比较两个字符串，您必须使用以下代码：

```
if([name1 isEqualToString:name2]){
    NSLog("These are the same name");
} 
```

您可以[在 Apple 文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)和此处查看更多信息[== 和 equals 之间的区别](https://stackoverflow.com/questions/8994779/difference-between-identical-and-equal)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T18:38:55.360

Objective-C 是 C 的严格超集。它通过将对象放在不透明的指针后面来添加对象——所有 Objective-C 对象声明中的星号（除了 typedefs）意味着你持有的实际东西是指向对象的指针，即它在内存中的地址，而不是对象本身。

当您`==`在两个指针上执行时，您会问“它们是否都引用了内存中的相同位置？”。如果它们这样做，那么它们都引用*同一个*对象，因此在其他属性中，两个指针都引用了相同值的东西。

当您使用`isEqual:`（或其更具体的兄弟姐妹之一）时，您会问“无论它们的位置如何，这两个对象是否具有相同的值？”，这在语义上是完全不同的事情。

所以这两件事是完全不同的，在你的情况下，你对你想要的行为的描述意味着你想使用后者。

# java - 获取嵌套属性时没有此类方法异常

> ID：13919949
> 
> 赞同：1
> 
> 时间：2012-12-17T18:31:26.340
> 
> 标签：java, exception, javabeans, nosuchmethod

我已经定义了一个具有以下属性的 Employee 对象

```
public class Employee {

    private String id;
    private String name;
    private Address address;

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Address getAddress() {
        return address;
    }

    public void setAddress(Address address) {
        this.address = address;
    }
} 
```

地址对象：

```
public class Address {

    private String street;
    private String city;

    public String getStreet() {
        return street;
    }

    public void setStreet(String street) {
        this.street = street;
    }

    public String getCity() {
        return city;
    }

    public void setCity(String city) {
        this.city = city;
    }
} 
```

并为属性生成了 getter 和 setter。当我对属性执行以下操作时：

```
String value = BeanUtils.getNestedProperty(employee, "address.street"); 
```

我得到 address.street 的“无此类方法异常”。

*java.lang.NoSuchMethodException：类“com.test.xm.Employee”上的未知属性“address.street”*

字段 id 和 name 工作正常。

仔细检查了getter和setter，看起来很好。我可能在这里做错了什么？

**编辑：更新了 getter 和 setter。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T18:57:43.690

Use `PropertyUtils` instead of `BeanUtils`.

```
 (String) PropertyUtilsBean.getInstance().getNestedProperty(employee, "address.street"); 
```

For me your example is working well too. So in your example, the only possible error is: `employee` isn't an instance of `Employee`.

Also why don't you post the Exception message? They contain very helpful information, for eg:

```
 java.lang.NoSuchMethodException: Unknown property 'address' on class 'class com.mycompany.dto.Address' 
```

# jquery - 以多种形式获取提交按钮名称或值

> ID：13919954
> 
> 赞同：0
> 
> 时间：2012-12-17T18:31:52.007
> 
> 标签：jquery, forms

我知道有很多关于此的帖子，但我没有运气找到有用的东西。

我在页面上有多个表单，我希望能够使用每个表单中的提交按钮一一提交。这目前对我有用：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title></title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
    <!--
    $(document).ready(function() {
        $(".do_submit").click(function() {
            var element = $(this);
            var Id = element.attr("id");
            var val = $("#val" + Id).val();
            var anotherval = $("#anotherval" + Id).val();
            alert("Id " + Id + " val " + val + " anotherval " + anotheval);
                    // How do I get the name of the value of whatever submit button was clicked
        });
    }); 
    -->
</script>   
</head>
<body>
<form action="" method="post" name="form1" />
  <input type="hidden" name="val" id="val1" value="a" />   
  <input type="hidden" name="anotherval" id="anotherval1" value="b" />  
  <input type="submit" name="SavePlantInfo" class="do_submit" id="1" value="Save" />
  <input type="submit" name="SavePlantInfoAndEmail" class="do_submit" id="1" value="Save And Email" />                                   
</form>

<form action="" method="post" name="form2" />
  <input type="hidden" name="val" id="val2" value="a" />   
  <input type="hidden" name="anotherval" id="anotherval2" value="b" />  
  <input type="submit" name="Save" class="do_submit" id="2" value="Save" />
  <input type="submit" name="SaveAndEmail" class="do_submit" id="2" value="Save And Email" />                                   
</form>
</body>
</html> 
```

我想不通的是如何知道这两个提交按钮中的哪一个被点击了。我希望能够获取名称（首选）或单击的任何提交按钮的值。

蒂亚！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:38:06.513

你试过了吗：

`$(this).attr("name");`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:45:06.800

像这样尝试；

```
 $(".do_submit").click(function() {
          var ele=$(this).val();
    if(ele=='Save')
    {
    /// your code
    }
    else
    {
    // save and email
    }
    });​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:48:35.980

```
$(".do_submit").click(function() {
    var buttonName = this.name; // OR $(this).attr('name')
    // your code
}); 
```

# python - 错误检查在 python 中为 unix 制作的管道命令

> ID：13919956
> 
> 赞同：3
> 
> 时间：2012-12-17T18:32:06.817
> 
> 标签：python, unix, filesystems, pipe, file-handling

我正在从 python 编译一个要在 unix 系统上执行的命令，其中包含多个管道步骤。例如：

```
grep foo myfile | cmd1 | cmd2 > output 
```

`foo`这些对应于对其中包含 from的条目进行的一系列转换`myfile`。我有时将它构建为由模块执行的命令`os.system`，在其他情况下使用`subprocess`模块执行。

如何从 Python 对管道的每个部分进行错误检查？例如，在 99% 的情况下，有`foo`入口`myfile`和剩余的管道工程。但是如果由于某种原因`myfile`存在但不包含`foo`条目，那么管道的其余部分会中断，因为您正在管道传输空文件，并且其余命令需要非空输入才能工作。这使得调试变得困难，因为您所看到的只是损坏管道的输出，不知道哪个中间步骤失败了。

有没有办法在 Python 中构造管道来检查中间步骤的错误？例如检查`grep`管道的部分是否真的包含一些输出，`cmd1`输入上的输出是否`grep`也包含一些输出，等等？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T09:19:33.150

这是我的方法，在 Python 2.6 Linux 上进行了测试。

a.定义一个方法

```
def run_command(command):
    p = subprocess.Popen(command, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    out, err = p.communicate()
    return (p.returncode, out, err) 
```

b.按以下方式使用

```
def test_run_command_pipestatus(self):
    # the exit $PIPESTATUS is the return code of "exit 2". The default return code is the return code of last command in the pipe
    return_code, out, err = run_command("exit 2 | tail -n 1; exit $PIPESTATUS")
    print "return_code = %d" %return_code
    print out
    print err
    self.assertEqual(2, return_code) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-20T06:35:38.287

这是我的方法，无论 mutch 管道如何命令。它是所有状态代码的总和，并以“echo 1 |echo 2”或“cat test |echo 2”的结果退出并由您的命令替换

> >>getstatusoutput('status=0;echo 1 |echo 2;for ((i=0;i<${#PIPESTATUS[*]};i++));让 status=${status}+${PIPESTATUS[ ${i}]};完成;退出 $status')

> (0, '2')

> >> getstatusoutput('status=0;cat test |echo 2;for ((i=0;i<${#PIPESTATUS[*]};i++));do let status=${status}+${PIPESTATUS[ ${i}]};完成;退出 $status')

> (1, '2\ncat: test: 没有这样的文件或目录')

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-26T20:06:12.510

与 Mingjiang Shi 的答案基本相同，其中几乎包含您需要的所有关键信息，但没有额外的功能，并且修复了问题。（并在 python 2.7.12 和 3.5.2 中测试）

$PIPESTATUS 在 sh 中不存在，因此如果您的发行版没有`/bin/sh`类似的行为`bash`（例如使用 的 Ubuntu `dash`），则必须将可执行文件设置为 bash。它是一个数组，所以我更喜欢像一个数组一样使用它。

而且我建议使用`wait()`而不是`communicate()`，因此您可以过滤而不是 slurp （在读入小缓冲区时使用，而不是在处理任何内容之前将整个输出加载到内存中）。

所以你需要做的就是：

*   应该使用字符串，而不是参数列表
*   使用壳=真
*   使用可执行文件="/bin/bash"

代码：

```
p = subprocess.Popen("false | true; exit ${PIPESTATUS[0]}", shell=True, executable='/bin/bash', stdout=subprocess.PIPE, stderr=subprocess.PIPE)

# at this point you do your filtering, eg. using p.stdout.readinto(buf)

p.wait()
if p.returncode != 0:
    # handle it here 
```

# ios - 使用 NSURLProtectionSpace 或 SecTrustSetAnchorCertificates() 进行 HTTPS 服务器验证？

> ID：13919966
> 
> 赞同：1
> 
> 时间：2012-12-17T18:32:37.110
> 
> 标签：ios

我想确认我的客户端通过 HTTPS 连接与之通信的服务器的身份。

似乎有两种选择，但是我无法找到任何描述一种方法的优点/缺点的东西。其中哪一个更安全，为什么？

1) 创建一个自签名证书，供服务器使用并添加到应用程序包中，并使用 SecTrustSetAnchorCertificates() 设置为锚证书

2) 创建一个 NSURLProtectionSpace 并设置其领域、主机、端口和协议，然后将其与传入 willSendRequestForAuthenticationChallenge: 的 NSURLAuthenticationChallenge 中的 NSURLProtectionSpace 进行比较。

这些身份验证机制中的哪一个用于验证服务器是否有很大区别？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-24T20:24:05.430

[技术说明 2232：HTTPS 服务器信任评估](https://developer.apple.com/library/ios/technotes/tn2232/_index.html)描述了评估 SSL/TLS 信任的最佳实践。

从这个问题中不清楚您是只对自签名证书感兴趣还是对一般评估信任感兴趣。通常，避免在生产环境中使用自签名证书。如果您必须使用自签名服务器证书，则应严格验证凭据是否符合您的预期。至少您应该根据已知值（SSL 公钥固定）检查服务器提供的公钥。一个让你开始的例子是[here](https://github.com/quellish/PublicKeyPinningExample)。

# c# - 为什么我可以在 PowerShell 中获取 SPSite，但在 c# 中使用 FileNotFound 失败？

> ID：13919967
> 
> 赞同：3
> 
> 时间：2012-12-17T18:32:36.647
> 
> 标签：c#, sharepoint-2010, powershell-2.0, filenotfoundexception, spsite

我们有一个基于混合（表单和 Windows）的 SharePoint 2010 站点，我正在尝试在 c# 中使用对象模型（命令行控制台应用程序，引用 Microsoft.SharePoint，解决方案平台目标是 x64 [在 VS 2012 中我不得不创建一个新的解决方案平台，从 <Empty>] 复制设置。）

在 PowerShell 中，我可以简单地执行类似的操作

```
$site = Get-SPSite http://www.server.com/sites/site1 
```

它成功检索到对象，我可以随意打开包含的 SPWeb 等。但是，当我在 C# 中尝试类似的逻辑时（在相同的用户凭据下的同一个框上），比如

```
using(SPSite site = new SPSite("http://www.server.com/sites/site1") { } 
```

它因 FileNotFoundException 而失败。任何使用相关指南的尝试都遵循相同的问题。为什么会发生这种情况？

此外，我是该框的管理员，并且还明确地在数据库上具有 sysadmin 服务器角色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T15:22:36.573

我假设您在命令提示符下执行此操作？如果是这样，请确保您在 x64 中编译您的项目。这是我在 x86 或任何 CPU 中编译代码时看到的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:01:21.677

对于任何遇到这种情况的人。PowerShell 3 不支持 SharePoint 方法。我在安装 Powershell v3 后发现，`powershell -version 2`在运行 SharePoint 命令之前，我必须先使用该命令进入另一个 shell，这让我意识到我的 VS 项目的目标是 .NET 4.5；一旦我将其更改为 .NET 3.5，一切正常。

我假设尽管 SharePoint 库以 .NET 3.5 为目标，并且理论上 .NET 4 CLR 可以处理 .NET 2 CLR 库，但使用 SharePoint 2010 的项目不支持以任何方式定位 .NET 4/4.5。

当然，很高兴被证明是错误的；）

# wpf - 您可以在 OnRender 覆盖期间在多个位置渲染 StreamGeometry 对象吗？

> ID：13919970
> 
> 赞同：0
> 
> 时间：2012-12-17T18:32:43.613
> 
> 标签：wpf, rendering, gdi

我们有一个 StreamGeometry 对象，我们希望在 OnRender 调用期间在大约 400 个不同的位置进行渲染。当然，问题在于几何对象使用绝对坐标。

虽然我们当然可以在渲染调用之前应用变换，但这意味着我们本质上也会创建 400 个变换，这似乎有点过头了。

我们只想说'在那个位置渲染这个，就像这样（注意：DrawGeometryAtPoint 是虚构的）......

```
protected override void OnRender(System.Windows.Media.DrawingContext dc)
{
    base.OnRender(dc);

    var myGeometry = new StreamGeometry();

    // Code to init the geometry goes here

   // Render the same geometry but at four different locations
    dc.DrawGeometryAtPoint(Brush1, Pen1, myGeometry, Origin1);
    dc.DrawGeometryAtPoint(Brush2, Pen2, myGeometry, Origin2);
    dc.DrawGeometryAtPoint(Brush3, Pen3, myGeometry, Origin3);
    dc.DrawGeometryAtPoint(Brush4, Pen4, myGeometry, Origin4);
} 
```

那么可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:04:06.607

[这与您之前](https://stackoverflow.com/q/13911653/1136211)的问题本质上是相同的问题。

要么在每次渲染之前推送单独的变换。

```
var transform = new TranslateTransform(origin.X, origin.Y);
transform.Freeze();
dc.PushTransform();
dc.DrawGeometry(brush, pen, geometry;
dc.Pop(); 
```

这本质上与将 GeometryDrawing 放入 DrawingGroup 并设置 DrawingGroup.Transform 属性相同。

或者您将 StreamGeometry 放入 GeometryGroup 并在那里设置 Transform。

```
var transform = new TranslateTransform(origin.X, origin.Y);
transform.Freeze();
var group = new GeometryGroup { Transform = transform };
group.Children.Add(geometry);
dc.DrawGeometry(brush, pen, group; 
```

正如我在对另一个问题的评论中告诉你的那样，*没有办法*绕过在不同位置为*相同*几何图形的每次渲染使用单独的 Transform 对象。

* * *

编辑：您应该考虑不同的设计。每次你的对象移动一点时，你应该渲染*一次*，然后只更改 Tranform 对象，而不是运行一个完整的 OnRender 通道。那当然不能冷冻。因此，您不会在某些控件中覆盖 OnRender，而是提供一个[承载 DrawingVisual](http://msdn.microsoft.com/en-us/library/ms742254.aspx)的特殊控件。

# php - 如何协调 SplClassLoader 的命名空间要求与我的自定义目录布局？

> ID：13919974
> 
> 赞同：1
> 
> 时间：2012-12-17T18:32:52.740
> 
> 标签：php, psr-0, spl-autoloader

我最近开始用 PHP 编写自定义 MVC 框架。这基本上是一个学习练习。

我的课程位于以下目录中：

*   系统/库/
*   系统/控制器/
*   系统/型号
*   应用程序/库/
*   应用程序/控制器/
*   应用/模型

我没有使用命名空间，因为我不知道如何使用命名空间和 Apache 2 处理程序样式 URL（控制器/操作/id）来实例化控制器。我创建了一个 Bootstrap 类来自动加载我的其他类：

```
class Bootstrap
{
  public function autoloadClasses($class)<br/>
  {
    $class .= '.php';

    $classDirectories = array(
        SYSTEM_LIBS_DIR,
        SYSTEM_CONTROLLERS_DIR,
        SYSTEM_MODELS_DIR,
        APPLICATION_LIBS_DIR,
        APPLICATION_CONTROLLERS_DIR,
        APPLICATION_MODELS_DIR
    );

    foreach ($classDirectories as $classDirectory) {
        $directoryIterator = new DirectoryIterator($classDirectory);
        foreach($directoryIterator as $file) {
            if ($file == $class) {
                include $classDirectory . $class;
                break 2;
            }
        }
    }

  }

  public function register()
  {
    spl_autoload_register(array($this, 'autoloadClasses'), true);
  }

  public function init()
  {
    $this->register();
    $loader = new Loader($_GET);
    $controller = $loader->createController();
    $controller->executeAction();
  }
} 
```

它工作正常。但是，我知道我真的应该使用 PSR-0 推荐的实现：

[https://gist.github.com/221634](https://gist.github.com/221634)

However, I can't figure out how to get it to work without namespaces. It looks like the namespace is an optional pararmeter. However, if I do the following, nothing happens -- not even an error in the Apache logs:

```
$libLoader = new SplClassLoader('', 'system/libraries'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:59:22.280

The goal of PSR-0 was to try and specify how *external third-party library* classes should be named, and where the files containing those classes should live on disk. This goal was accomplished, and from a *high* level, it's not too bad of a thing. Interopability and not stepping all over other libraries is a good thing.

Your directory layout and class naming scheme doesn't mesh with PSR-0, which means SplClassLoader is going to be nigh-useless for you.

You have two options:

1.  Rename all of your classes, shuffle them into a namespace hierarchy, and refactor the rest of the code that needs to worry about it, or
2.  Don't use SplClassLoader and write your own autoloader.

If you're building a library intended for external distribution, it'll be a good idea to make yourself PSR-0 compliant, as it's pretty darn simple, logical and painless.

If you're building your own app for your own use and don't intend it as a library, then you are under no requirement to do all of that work, and you shouldn't, because it'd be *silly*. This looks like it's the case, so I can end with a big fat: **don't bother**.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:48:42.857

I got it to work. YAY!

Here is the code from my front controller (index.php) I'm going to refactor it since it would be cleaner to simply make one call to some type of bootstrap class:

```
<?php
use NeilMVC\system\libraries\Loader;
require_once('conf/conf.php');
require_once('SplClassLoader.php');

$loadSystemLibraries = new SplClassLoader('NeilMVC\system\libraries'); 
$loadSystemControllers = new SplClassLoader('NeilMVC\system\controllers');
$loadSystemModels = new SplClassLoader('NeilMVC\system\models');

$loadApplicationLibraries = new SplClassLoader('NeilMVC\application\libraries');
$loadApplicationControllers = new SplClassLoader('NeilMVC\application\controllers');
$loadApplicationModels = new SplClassLoader('NeilMVC\application\models');

$loadSystemLibraries->register();
$loadSystemControllers->register();
$loadSystemModels->register();

$loadApplicationLibraries->register();
$loadApplicationControllers->register();
$loadApplicationModels->register();

$loader = new Loader($_GET);
$controller = $loader->createController();
$controller->executeAction(); 
```

I had to refactor some of the classes in order to resolve fully qualified classes to unqualified names used in the MVC-style URLs. It wasn't that hard to do, I just had to tinker with it to understand it. If anyone want to know more, you can email me through my website [http://neilgirardi.com](http://neilgirardi.com)

Cheers and happy holidays!

# c# - 使用 asp.net 代码中的凭据从网络位置读取文件

> ID：13919975
> 
> 赞同：2
> 
> 时间：2012-12-17T18:32:53.680
> 
> 标签：c#, asp.net, iis-7, io, asp.net-4.0

我想从网络上存在的文件夹中读取文件。

当我尝试手动访问此文件夹时（通过运行命令提供类似*\\ABCServer\Documents*的路径），它会要求我提供凭据（用户名和密码）。提供正确的凭据后，我可以访问/读取文件。

当我尝试从 ASP.NET 中的 C# 代码中读取相同的文件时，它给了我一个错误：

> 登录失败：用户名未知或密码错误

在读取文件期间如何通过 C# 代码传递凭据？

以下是我正在使用的部分代码：

```
Stream s = File.OpenRead(filePath);
byte[] buffer = new byte[s.Length];            
try
{
    s.Read(buffer, 0, (Int32)s.Length);
}            
finally 
{ 
    s.Close();
} 
```

笔记：

*   代码工作正常
*   我正在使用带有 C# 的 ASP.NET 4.0
*   IIS 版本为 7.5

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T20:05:56.583

这是来自[http://support.microsoft.com/kb/306158](http://support.microsoft.com/kb/306158)

```
public const int LOGON32_LOGON_INTERACTIVE=2;
public const int LOGON32_PROVIDER_DEFAULT=0;

WindowsImpersonationContext impersonationContext;

[DllImport("advapi32.dll")]
public static extern int LogonUserA(String lpszUserName,
    String lpszDomain,
    String lpszPassword,
    int dwLogonType,
    int dwLogonProvider,
    ref IntPtr phToken);

[DllImport("advapi32.dll", CharSet=CharSet.Auto, SetLastError=true)]
public static extern int DuplicateToken(IntPtr hToken,
    int impersonationLevel,
    ref IntPtr hNewToken);

[DllImport("advapi32.dll", CharSet=CharSet.Auto, SetLastError=true)]
public static extern bool RevertToSelf();

[DllImport("kernel32.dll", CharSet=CharSet.Auto)]
public static extern bool CloseHandle(IntPtr handle);

private bool impersonateValidUser(String userName, String domain, String password) {
  WindowsIdentity tempWindowsIdentity;
  IntPtr token=IntPtr.Zero;
  IntPtr tokenDuplicate=IntPtr.Zero;

  if(RevertToSelf()) {
    if(LogonUserA(userName, domain, password, LOGON32_LOGON_INTERACTIVE,
      LOGON32_PROVIDER_DEFAULT, ref token)!=0) {
        if(DuplicateToken(token, 2, ref tokenDuplicate)!=0) {
          tempWindowsIdentity=new WindowsIdentity(tokenDuplicate);
        impersonationContext=tempWindowsIdentity.Impersonate();
        if(impersonationContext!=null) {
          CloseHandle(token);
          CloseHandle(tokenDuplicate);
          return true;
        }
      }
    }
  }
  if(token!=IntPtr.Zero)
    CloseHandle(token);
  if(tokenDuplicate!=IntPtr.Zero)
    CloseHandle(tokenDuplicate);
  return false;
}

private void undoImpersonation() {
  impersonationContext.Undo();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:50:17.923

您可以使用模拟来执行此操作。[这](https://stackoverflow.com/questions/559719/windows-impersonation-from-c-sharp)是如何完成的问题和答案。

# javascript - 是否可以检查使用 JavaScript 加载的图像大小

> ID：13919977
> 
> 赞同：3
> 
> 时间：2012-12-17T18:32:56.567
> 
> 标签：javascript

这是一个完全愚蠢的问题。但我只是想澄清我的疑问。加载图像时，我们可以使用`onload`或`oncomplete`事件检查加载状态。但我只是想知道有多少图像是使用 JavaScript 加载的。真的有可能吗？

我的问题是，我们可以从 URL 获取图像大小吗？我们能得到在某个时间间隔内加载了多少图像吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T18:40:46.263

如果您通过[`XMLHttpRequest`对象](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)加载图像，您可以[绑定到`progress`事件](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest#Monitoring_progress)并检查函数参数“事件”属性“加载”和“总计”。与往常一样，各种浏览器之间的支持可能会令人惊讶。

从[链接的 MDN 文章](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest#Monitoring_progress)：

```
var req = new XMLHttpRequest();
req.addEventListener("progress", onProgress, false);
req.open();

function onProgress(ev) {
  if (evt.lengthComputable) {
    var percentComplete = evt.loaded / evt.total;
    // ...
  } else {
    // Unable to compute progress information since the total size is unknown.
  }
} 
```

**[更新]**每个评论者@Bergi 的问题，如果您想在完全下载后将图像添加到 DOM，您可以添加一个新的图像元素：

1.  “src”属性等于您通过 XHR 获取的 URL（并希望浏览器缓存能够防止冗余下载）。

2.  或者将“src”属性设置为[Base64 编码图像内容的数据 URI，](http://en.wikipedia.org/wiki/Data_URI_scheme)而不用担心浏览器缓存。

```
var img = new Image(); // or document.createElement('img');
img.src = ... // URL from the above XHR request, or
img.src = 'data:image/png;base64,' + base64(xhrContent);
document.body.appendChild(img); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:44:18.103

您可以使用适用于现代浏览器的[html5 文件 api](http://www.w3.org/TR/FileAPI/)来实现这一点，它允许读取文件名、文件大小、mimetype 和对文件句柄的引用 - 请查看此[示例](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

# php - 如何用 Mysql 数据库中的数据填写表格？

> ID：13919978
> 
> 赞同：-2
> 
> 时间：2012-12-17T18:33:00.107
> 
> 标签：php, html, mysql

我在一个 php 文件 (Control.php) 中有两个 HTML 表单。我在 Form1 中有四个下拉列表作为过滤器。一旦我单击 Form1 中的提交按钮，我必须通过 POST 方法将从 Form1 中选择的值传递到另一个 php 文件（Actions.php），在那里我通过过滤器传递查询并从 Mysql 数据库中检索数据（如果记录存在于这些过滤器的数据库）。到目前为止，我能够使它工作。

现在我想用基于过滤器从数据库中检索到的数据来填充我的 Form2。如果没有可用数据，我想将表单中的所有元素设置为空白以添加新数据。

如何在同一表单中添加新数据和修改（更新）现有数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:35:03.413

您可以将从第一个查询中检索到的数据传递到 PHP 会话中的其他页面。然后您的脚本可以简单地将会话的内容（或 NULL）复制到表单的 value= 属性中。

# google-app-engine - GWT/appEngine RPC 序列化

> ID：13919979
> 
> 赞同：0
> 
> 时间：2012-12-17T18:33:15.770
> 
> 标签：google-app-engine, gwt

直到上周，我一直在运行我的 GWT/AppEngine 应用程序，使用 java.io.Serializable 并在 RPC 调用中在我的类上实现 Serializable 没有问题。

现在我在 appengine 上收到此错误：类型 'com.foobar.web.shared.RPCDTOclass' 不能分配给 'com.google.gwt.user.client.rpc.IsSerializable' 并且没有自定义字段序列化程序。

我仍然有可序列化的工具。如果我修复/更改该类并将其设为 com.google.gwt.user.client.rpc.IsSerializable 它适用于该类，但对于 RPC 中使用的其他类，我会遇到相同的错误。我只有其中一些字符串，所以并不是我有无法序列化的类型。

我没有看到其他人有这个问题，所以我一定是做了某种改变导致它，但我不知道是什么。该错误出现在AppEngine上，所以我认为这一定是appengine问题？

谢谢

添加示例

```
public class UserLogInDTO implements IsSerializable {

private String Email;
private String PasswordHash;

public UserLogInDTO(){}

public UserLogInDTO(String email, String passwordhash){
    setEmail(email);
    setPasswordHash(passwordhash);
}
public void Set(String email, String passwordhash){
    this.setEmail(email);
    this.setPasswordHash(passwordhash);
}
/**
 * @return the email
 */
public String getEmail() {
    return Email;
}
/**
 * @param email the email to set
 */
public void setEmail(String email) {
    Email = email.toLowerCase();
}
/**
 * @return the passwordHash
 */
public String getPasswordHash() {
    return PasswordHash;
}
/**
 * @param passwordHash the passwordHash to set
 */
public void setPasswordHash(String passwordHash) {
    PasswordHash = passwordHash;
} 
```

}

如果我实现了 IsSerializable 它可以工作，如果实现了 Serializable 它曾经可以工作，但现在不行。我正在使用 1.7.2 SDK for AppEngine 2.4.0 for GWT

# c# - 为什么 null+false 与 null+"false" 不同？

> ID：13919986
> 
> 赞同：2
> 
> 时间：2012-12-17T18:33:49.467
> 
> 标签：c#, string

在 C# 中

```
 string str1 = null+false; 
```

`str1`将会`"False"`

和

```
 string str2 =null+"false"; 
```

`str2`将会`"false"`

为什么`str1`不同`str2`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T18:35:15.910

`"false"`是一个字符串。`False`是一个布尔值。`ToString()`bool 上的函数`False`返回`"False"`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T18:34:46.783

它们是不同的，因为情况不同。如果您使用默认的相等比较器，它将查找区分大小写的比较。

如果要比较字符串但忽略它们的大小写，则应使用其中一种[`String.Compare`](http://msdn.microsoft.com/en-us/library/system.string.compare.aspx)重载。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-17T18:35:16.737

好吧，因为`false.ToString()`给你`"False"`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-17T18:35:37.247

因为`false.ToString()`返回`"False"`而不是`"false"`。这只是语言选择返回布尔值的方式。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-17T18:44:09.660

一种是纯`String`数据类型。你得到你所写的。其他是`boolean`数据类型的值。

它们是两种不同的类型。

并`false.ToString()` 回报你`"False"`。

# xcode - 当 Xcode 分析器发现问题但未在文件中显示它们时，如何找到解决方法？

> ID：13919987
> 
> 赞同：0
> 
> 时间：2012-12-17T18:33:50.247
> 
> 标签：xcode, clang-static-analyzer

我在使用 Xcode 4.5.2 的分析器时遇到问题。它能够发现问题：

![在此处输入图像描述](../Images/1c8002e53e739c441ab937143c65c83b.png)

但是，虽然问题显示在顶部栏： ![在此处输入图像描述](../Images/fe10c99f71fcd8c0f3ddeafc75829f0c.png)中，但问题并未显示在文件编辑器中。没有这些信息，就没有实际的方法可以知道分析器在说什么。

是否有一个日志文件可以在其中找到检测到的问题的行号？还有其他解决方法或设置调整吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:48:04.060

我能想到的唯一解决方法是[从命令行运行分析器](http://clang-analyzer.llvm.org/scan-build.html)。这可以直接在 Xcode 项目上完成（即，不需要 makefile 野蛮）并且应该给你直接的文本反馈。

# asp.net - 代码适用于开发电脑，但不适用于服务器

> ID：13919988
> 
> 赞同：1
> 
> 时间：2012-12-17T18:33:52.633
> 
> 标签：asp.net, inline

下面的代码在我的开发机器上正确处理我的 gridview 的数据，但不是我的服务器。

我只是想将小时数添加到出现在 gridview 中的时间参数中。它在我的开发 PC 上运行良好，但在服务器上发布此错误....

字符串未被识别为有效的日期时间。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.FormatException：字符串未被识别为有效的 DateTime。

这是我的gridview中模板字段的代码...

```
<ItemTemplate> 
   <asp:Label ID="Label1" runat="server" Text='<%# String.Format("{0:hh:mm:ss tt}", Convert.ToDateTime(Eval("eventTime").ToString).AddHours(-5)) %>' ></asp:Label> 
</ItemTemplate> 
```

如何使用内联代码检查 Null？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:44:48.477

这听起来像是本地开发人员和服务器之间的数据问题；我会检查正在推送的内容`eventTime`。我敢打赌它不是有效的`DateTime`.

**编辑**

根据您的编辑，您可以使用三元运算符 ( `?:`) 执行内联空值检查：

`<asp:Label ID="Label1" runat="server" Text='<%# Eval("eventTime") != null ? String.Format("{0:hh:mm:ss tt}", Convert.ToDateTime(Eval("eventTime").ToString).AddHours(-5)) : "No time specified" %>' ></asp:Label>`

# android - 水平分页/滑动视图

> ID：13919991
> 
> 赞同：-1
> 
> 时间：2012-12-17T18:34:16.603
> 
> 标签：android, animation, drag, swipe

我有一个测验应用程序，它将问题加载到文本视图中，答案在单选按钮中，并包含在滚动视图中。目前我正在使用下一个和上一个按钮，但我宁愿使用滑动来控制它。我如何实现这一点，以便我可以获得被拖动的页面的动画，就像谷歌播放音乐应用程序中的标签一样。

我用谷歌搜索并看到 viewpager 使用了很多，但我不知道这是否适合我想做的事情。我也考虑过使用 viewflipper，但我不知道这是否正确。而且我不知道如何以动画拖动方式使用其中任何一个。

有可能一个接一个地提出数百个问题，这可能是一个因素。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:49:04.380

> 我该如何实现这一点，以便我可以获得被拖动的页面的动画，就像谷歌播放音乐应用程序中的标签一样。

使用`ViewPager`.

> 有可能一个接一个地提出数百个问题，这可能是一个因素。

然后重写你的应用程序，不要“一个接一个地问用户数百个问题”。恕我直言，在任何媒介中进行这么长的*一次测验*都会很烦人。

从编码的角度来看，根据您的应用程序中发生的其他情况，使用 , 或几乎除了一组单选按钮之外的任何其他内容可能会成为内存问题`ViewPager`，`ViewFlipper`当用户从一个问题移动到另一个问题时，您会更改其标题。

# c - GCC 不使用带有 -fopenmp 的内置原子

> ID：13919995
> 
> 赞同：7
> 
> 时间：2012-12-17T18:34:35.270
> 
> 标签：c, gcc, openmp, atomic, icc

> **可能重复：**
> [Mac OS X Lion 上的 OpenMP 编译失败（memcpy 和 SSE 内在函数）](https://stackoverflow.com/questions/12932107/compilation-fails-with-openmp-on-mac-os-x-lion-memcpy-and-sse-intrinsics)

我决定将我的 pthread 代码转换为 OpenMP。

在此之前，我使用 Intel/GCC atomic builtins ( `__sync_fetch_and_add`family) 做了很多同步。

正如预期的那样`lock xadd`，它们在 x64 上与 GCC 和 ICC 一起编译。

但是当在 GCC 上编译时，`-fopenmp`我开始在这些位置接到电话。`callq ___sync_fetch_and_add_8`和家人。ICC 仍会生成适当优化的代码。

**编辑：**链接器拒绝链接该 GCC 代码：

```
$ gcc -O3 -Wall *.o -lpthread -ldl -lgomp
Undefined symbols for architecture x86_64:
  "___sync_fetch_and_add_8" 
```

**Edit2：**这似乎特定于 Apple 的 GCC。我在 Red Hat gcc 4.4.6 上没有看到这种现象

我怎样才能让 GCC 生成与它没有相同的优化内联 asm `-fopenmp`？

```
$ gcc -v
Using built-in specs.
Target: i686-apple-darwin11
Configured with: /private/var/tmp/llvmgcc42/llvmgcc42-2336.11~67/src/configure --disable-checking --enable-werror --prefix=/Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2336.11~67/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx-include-dir=/usr/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)

$ icc --version
icc (ICC) 12.0.2 20110112
Copyright (C) 1985-2011 Intel Corporation.  All rights reserved. 
```

编译

```
icc -O3 -Wall -std=gnu99 -ipo -xSSE4.1 -axAVX -O3 -Wall -openmp
gcc -O3 -Wall -std=gnu99 -finline-functions -funroll-loops -O3 -Wall -fopenmp 
```