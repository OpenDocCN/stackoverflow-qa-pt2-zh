# StackOverflow 问答 15225000-15225999

# web-services - 在向资源服务器发出请求时，通用 REST 客户端如何使用 O Auth 访问令牌？

> ID：15225004
> 
> 赞同：0
> 
> 时间：2013-03-05T13:27:13.190
> 
> 标签：web-services, rest, oauth-2.0

我们正在实现通用 REST 客户端，我们希望在其中支持 O' Auth 2.0。目前我们正在考虑允许用户在配置客户端时定义访问令牌（无论他们从哪里购买），REST 客户端在发出请求时将使用哪个。

是否可以 ？我有几个问题

1.  客户端从授权服务器获取访问令牌的方式是标准的吗？
2.  客户端在请求 access_token 时是否向身份验证服务器注册，并且其他客户端不能使用相同的访问令牌？
3.  是 SSL 还是 TSL 强制？
4.  客户端向资源服务器发送访问令牌的方式（同时使资源请求）成为标准，是否所有资源提供者（facebook、linkedin、salesforce、google）都支持在 HTTP 标头或查询参数中发送的 access_token。
5.  将访问令牌发送到标准化的资源服务器，即我们不需要为此加密或使用任何第三方库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T11:48:19.570

我建议你在[这里](https://www.rfc-editor.org/rfc/rfc6749)阅读规范。每个库实现都使用这个标准，您可以使用任何方法来生成您的密钥和授权等，但如果您符合这些接口，那么您应该没问题。

# python - ndarray.resize：为 refcheck 参数传递正确的值

> ID：15225006
> 
> 赞同：2
> 
> 时间：2013-03-05T13:27:24.383
> 
> 标签：python, numpy

像许多其他人一样，我的情况是我有一个收集大量数据的类，并提供了一种将数据作为 numpy 数组返回的方法。（额外的数据可以继续流入，即使在返回一个数组之后）。由于创建数组是一项昂贵的操作，因此我只想在必要时创建它，并尽可能高效地创建它（特别是在可能的情况下就地附加数据）。

为此，我一直在阅读有关 ndarray.resize() 方法和 refcheck 参数的内容。我知道只有在“您确定没有与另一个 Python 对象共享此数组的内存”时，才应将 refcheck 设置为 False。

问题是我不确定。有时我有，有时我没有。如果 refcehck 失败（我可以捕获它然后创建一个新副本），我会引发错误，但我希望它只有在存在“真实”外部引用时才会失败，而忽略那些我知道是安全的。

这是一个简化的插图：

```
import numpy as np

def array_append(arr, values, refcheck = True):
    added_len = len(values)
    if added_len == 0:
        return arr
    old_len = len(arr)
    new_len = old_len + added_len
    arr.resize(new_len, refcheck = refcheck)
    arr[old_len:] = values
    return arr

class DataCollector(object):

    def __init__(self):
        self._new_data = []
        self._arr = np.array([])

    def add_data(self, data):
        self._new_data.append(data)

    def get_data_as_array(self):
        self._flush()
        return self._arr

    def _flush(self):
        if not self._new_data:
            return
#        self._arr = self._append1()
#        self._arr = self._append2()
        self._arr = self._append3()
        self._new_data = []

    def _append1(self):
        # always raises an error, because there are at least 2 refs:
        # self._arr and local variable 'arr' in array_append()
        return array_append(self._arr, self._new_data, refcheck = True)

    def _append2(self):
        # Does not raise an error, but unsafe in case there are other
        # references to self._arr
        return array_append(self._arr, self._new_data, refcheck = False)

    def _append3(self):
        # "inline" version: works if there are no other references
        # to self._arr, but raises an error if there are.
        added_len = len(self._new_data)
        old_len = len(self._arr)
        self._arr.resize(old_len + added_len, refcheck = True)
        self._arr[old_len:] = self._new_data
        return self._arr

dc = DataCollector()
dc.add_data(0)
dc.add_data(1)
print dc.get_data_as_array()
dc.add_data(2)
print dc.get_data_as_array()
x = dc.get_data_as_array()  # create an external reference
print x.shape
for i in xrange(5000):
    dc.add_data(999)
print dc.get_data_as_array()
print x.shape 
```

问题：

1.  有没有更好（快速）的方法来做我想做的事情（增量创建 numpy 数组）？
2.  有没有办法告诉 resize() 方法：“执行 refcheck，但忽略我知道是安全的一个引用（或 n 个引用）”？（这将解决 _append1() 总是失败的问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T01:09:40.127

该`resize`方法有两个主要问题。第一个是您在用户调用时返回对 self._arr 的引用`get_data_as_array`。现在调整大小将根据您的实现做两件事之一。它会修改您给您的用户的数组，即用户将采用`a.shape`并且形状会发生不可预测的变化。或者它会破坏该数组，让它指向坏内存。`get_data_as_array`您可以通过始终使用return来解决该问题`self._arr.copy()`，但这使我想到了第二个问题。`resize`实际上效率不是很高。我相信一般来说，调整大小必须分配新内存并在每次调用它来增长数组时进行复制。另外，现在您每次想要将数组返回给用户时都需要复制该数组。

另一种方法是设计自己的[动态数组](http://en.wikipedia.org/wiki/Dynamic_array)，看起来像：

```
class DynamicArray(object):

    _data = np.empty(1)
    data = _data[:0]
    len = 0
    scale_factor = 2

    def append(self, values):
        old_data = len(self.data)
        total_data = len(values) + old_data
        total_storage = len(self._data)
        if total_storage < total_data:
            while total_storage < total_data:
                total_storage = np.ceil(total_storage * self.scale_factor)
            self._data = np.empty(total_storage)
            self._data[:old_data] = self.data

        self._data[old_data:total_data] = values
        self.data = self._data[:total_data] 
```

这应该非常快，因为您只需要增加数组 log(N) 次，并且最多使用 2*N-1 存储，其中 N 是数组的最大大小。除了增加数组之外，您只是制作`_data`不涉及任何复制并且应该是恒定时间的视图。

希望这是有用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:44:58.887

我将`array.array()`用来做数据收集：

```
import array
a = array.array("d")
for i in xrange(100):
    a.append(i*2) 
```

每次当您想对收集的数据进行一些计算时，将其转换为`numpy.ndarray`by `numpy.frombuffer`：

```
b = np.frombuffer(a, dtype=float)
print np.mean(b) 
```

`b`将与 共享数据内存`a`，因此转换非常快。

# function - 过程指针不能指向元素函数

> ID：15225007
> 
> 赞同：7
> 
> 时间：2013-03-05T13:27:25.710
> 
> 标签：function, pointers, fortran, procedure

我正在尝试使用过程指针（Fortran 2003 中的新功能）来指向元素函数，但它不起作用。我真的需要这个函数`ELEMENTAL`并且需要一个指向它的指针。在 Fortran 中指向元素函数真的不可能吗？

```
 module elemfunc
    implicit none

    contains
        elemental function fun111(x) result(y)
        real*8, intent(in) :: x
        real*8 :: y 

            y = x**2+1

        end function fun111
    end module elemfunc

    program testptr
    use elemfunc
    implicit none

      interface
        elemental function func (z)
        real*8 :: func
        real*8, intent (in) :: z
        end function func
      end interface

        procedure (func), pointer :: ptr
        ptr => fun111

        print *, ptr( (/1.0d0,2.0d0/) )

    end program testptr 
```

错误信息：

```
main.f90:12.7:ptr=>fun111
                     1
Nonintrinstic elemental procedure pointer 'func111' is invalid in procedure pointer assignment at (1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T14:30:12.643

在 fortran 2003 标准的段落`7.4.2 Pointer Assignment`中明确指出这是不允许的：

```
C728 (R742) The proc-target shall not be a nonintrinsic elemental procedure 
```

（这个约束在 fortran 2008 标准中仍然存在，所以没有放宽。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-13T12:39:50.387

我遇到了同样的问题，直到我用 gfortran 编译时才意识到这是一个问题。不幸的是，也禁止对基本过程使用虚拟过程参数。但是，仍然可以实现您想要的功能，尽管它有点笨拙。

您可以合法地做的是让一个元素函数调用一个纯函数。根据您的需要，元素函数可以是类型绑定的，也可以不是类型绑定的。

### 选项一

将过程指针和函数放入模块中：

```
module A
  implicit none

  procedure(func_IF), pointer :: ptr => null()

  abstract interface
    pure function func_IF(x)
      real, intent(in) :: x
      real :: func_IF
    end function
  end interface
contains
  ! Non type bound elemental
  elemental function myfun1(x) result(r)
    real, intent(in) :: x
    real :: r    
    if(associated(ptr)) r = ptr(x)
  end function
end module 
```

### 选项二

将指针和函数都放在派生类型中：

```
module B
  implicit none

  type :: foo
    procedure(func_IF), nopass, pointer :: ptr => null()
  contains
    procedure, pass :: myfun2
  end type

  abstract interface
    pure function func_IF(x)
      real, intent(in) :: x
      real :: func_IF
    end function
  end interface
contains
  ! Type bound elemental
  elemental function myfun2(this, x) result(r)
    class(foo), intent(in) :: this
    real, intent(in) :: x
    real :: r    
    if(associated(this%ptr)) r = this%ptr(x)
  end function
end module 
```

一个小测试程序：

```
program main
  use A
  use B
  implicit none

  type(foo) :: myfoo
  myfoo%ptr => bar
  ptr => bar

  print*, myfun1([10., 20.])
  print*, myfoo%myfun2([10., 20.])
contains
  ! Demo pure function with interface func_IF
  pure function bar(x)
    real, intent(in)    :: x
    real                :: bar
    bar = x**2
  end function
end 
```

# javascript - 页面加载匿名功能

> ID：15225008
> 
> 赞同：1
> 
> 时间：2013-03-05T13:27:32.743
> 
> 标签：javascript, jquery

我正在尝试更好地使用 JavaScript，并学习如何在函数中使用我的代码并保持一切干净。我正在尝试在页面加载时运行一个函数...

```
var setColors = function(){
        this.init = function(){
            $.getJSON('js/colors.json', function(colors) {
                    $.each(colors, function(i, colors) {
                        $('<li>', {
                            text: colors['color'],
                            'name' : colors['color'],
                            'data-hex' : colors['hex'],
                            'data-var' : colors['var']
                        }).appendTo('#picker');
                    })
            });
        }
    } 
```

*（这不是颜色选择器，只是颜色列表）* 我想`setColors()`在页面开始时立即执行。我读到一个匿名函数会自动运行，但这个不是，我也试过......

```
$(function(){
    setColors();
}); 
```

在函数下方，`setColors()`以太不起作用（页面只是空白）。我在做什么错，如何让我的功能在页面加载时运行？我正在努力学习，所以解释会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:37:28.003

匿名函数不会立即运行，您正在考虑经常使用匿名函数的*立即调用函数表达式。*

要修复您的代码：

**a）**摆脱`this.init`“对象”中的函数包装器-您没有使用它，只有在您用于实例化对象`this.foo`时才有意义：`new`

```
function setColors() {
    return $.getJSON(...);
} 
```

请注意，返回`$.getJSON()`结果允许您注册其他延迟对象处理程序、注册错误处理程序等。

**b)**在处理程序中调用上述函数`document.ready`（您必须这样做，因为 AJAX 回调会修改 DOM）。

```
$(setColors); 
```

注意：后者*是*调用此处理程序的合法方式 - jQuery 将自动注册您以这种方式传递的任何函数作为`document.ready`处理程序。它类似于写作：

```
$(function() { setColors() }) 
```

但没有额外的（无用的）函数包装器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:30:20.827

要在 DOM 初始化后运行它，您可以将它放在一个就绪侦听器 (jQuery) 中：

```
$(document).on('ready', function() {
    setColors();
}); 
```

如果想让函数在js中一遇到就自动运行，在结束函数的}后面加上();

就像是：

```
function setColors() {
    // Code
}(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:31:49.800

setColors 不返回下一个函数，或者在最后调用它。您可以将其更改为：

```
var setColors = function(){
        this.init = function(){
            $.getJSON('js/colors.json', function(colors) {
                    $.each(colors, function(i, colors) {
                        $('<li>', {
                            text: colors['color'],
                            'name' : colors['color'],
                            'data-hex' : colors['hex'],
                            'data-var' : colors['var']
                        }).appendTo('#picker');
                    })
            });
        }

        init(); // <--- change
    } 
```

这对你有用。你甚至不需要“返回它”，因为 init 函数本身不返回任何东西，所以你可以调用它。

# javascript - 如何删除具有不同列的html表的最后一列

> ID：15225009
> 
> 赞同：0
> 
> 时间：2013-03-05T13:27:42.670
> 
> 标签：javascript, jquery

我有一个列表的记录列表 - 一个 HTML 表。

大多数行有 3 列，但有些可能只有 1 或 2 列。在这种情况下，我使用 colspan 并将其拉伸到其他列。

我想要做什么：当用户单击页面上的按钮时，我想删除最后一列（折叠），前提是它有多个列。

jquery 怎么可能（如果可以的话）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:33:47.623

尝试这样的事情

```
$('tr').each(function(){
   $("td:last").hide()
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:36:27.563

试试这个

```
$('tr').each(function(){
  $("td:last").hide();
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:42:07.450

您可以这样做，但您还应该向表中添加一个类，以便您可以按类选择所需的表。

```
if($('tr').length > 1) {
   $('tr').each(function(){
      $("td:last").hide()
   })
} 
```

如果您添加例如 myTable 类，请执行以下操作：

```
if($('.myTable tr').length > 1) {
   $('.myTable tr').each(function(){
      $(".myTable tr td:last").hide()
   })
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T13:47:46.913

我认为您需要在删除最新列之前保存行中的列数（colspan）以使表格响应。

写了一个小函数。未在行动中尝试过

```
<button onclick="removeLatestCol()"></button>

<script>
function removeLatestCol() {
    var latest_row = $("table tr:last");
    var cols = $("td", latest_row);

    if (cols.length == 1) {
        latest_row.remove();
        return;
    }

    var latest_col = cols.filter(":last");
    latest_col.prev().attr("colspan", (latest_col.prev().attr("colspan") || 1) + (latest_col.attr("colspan") || 1));
    latest_col.remove()
}
</script> 
```

# java - xml 中的 XML 问题要读取 <

> ID：15225011
> 
> 赞同：1
> 
> 时间：2013-03-05T13:27:47.843
> 
> 标签：java, javascript, html, xml, xml-parsing

我正在尝试阅读以下 XML 文档，我在阅读`EXT_STRING0>&lt`此标签时遇到问题，在此先感谢

```
<Results>
<ResultSet fetchSize="0">
    <Row rowNumber="1">
        <OBJECT_ID>AOM_Reference_User5L76V75WA%40aom.com</OBJECT_ID>
        <EXT_STRING0>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;Token&gt;&lt;Device&gt;&lt;deviceId&gt;jfhksjdhfjks231231233&lt;/deviceId&gt;&lt;tokenString&gt;RNUR7OQ9VV5R61F3S2K66AHBV&lt;/tokenString&gt;&lt;createdAt&gt;04-03-2013T12:48:55&lt;/createdAt&gt;&lt;/Device&gt;&lt;/Token&gt;</EXT_STRING0>
    </Row>
    <Row rowNumber="2">
        <OBJECT_ID>AOM_Reference_UserLKKEV81D1%40aom.com</OBJECT_ID>
        <EXT_STRING0>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;Token&gt;&lt;Device&gt;&lt;deviceId&gt;jfhksjdhfjks231231233&lt;/deviceId&gt;&lt;tokenString&gt;RIF9XTJSTYCPUMHCQ11FCI1HC&lt;/tokenString&gt;&lt;createdAt&gt;28-02-2013T15:57:06&lt;/createdAt&gt;&lt;/Device&gt;&lt;/Token&gt;</EXT_STRING0>
    </Row>
    <Row rowNumber="3">
        <OBJECT_ID>AOM_Reference_User4NO17EFO3%40aom.com</OBJECT_ID>
        <EXT_STRING0>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;Token&gt;&lt;Device&gt;&lt;deviceId&gt;jfhksjdhfjks231231233&lt;/deviceId&gt;&lt;tokenString&gt;RIF9V5WRWELSYMHCQ11FCI1HC&lt;/tokenString&gt;&lt;createdAt&gt;28-02-2013T14:43:55&lt;/createdAt&gt;&lt;/Device&gt;&lt;/Token&gt;</EXT_STRING0>
    </Row>
    <Row rowNumber="4">
        <OBJECT_ID>AOM_Reference_User5K4S9NA1S%40aom.com</OBJECT_ID>
        <EXT_STRING0>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;Token&gt;&lt;Device&gt;&lt;deviceId&gt;jfhksjdhfjks231231233&lt;/deviceId&gt;&lt;tokenString&gt;RIF9YBD1VK6OYMHCQ11FCI1HC&lt;/tokenString&gt;&lt;createdAt&gt;28-02-2013T15:59:05&lt;/createdAt&gt;&lt;/Device&gt;&lt;/Token&gt;</EXT_STRING0>
    </Row>
    <Row rowNumber="5">
        <OBJECT_ID>AOM_Reference_UserZUMIPYUR6%40aom.com</OBJECT_ID>
        <EXT_STRING0>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;Token&gt;&lt;Device&gt;&lt;deviceId&gt;jfhksjdhfjks231231233&lt;/deviceId&gt;&lt;tokenString&gt;RIF9XOM81TEXUMHCQ11FCI1HC&lt;/tokenString&gt;&lt;createdAt&gt;28-02-2013T15:55:29&lt;/createdAt&gt;&lt;/Device&gt;&lt;/Token&gt;</EXT_STRING0>
    </Row>
    <Row rowNumber="6">
        <OBJECT_ID>AOM_Reference_UserT3SURUV71%40aom.com</OBJECT_ID>
        <EXT_STRING0>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;Token&gt;&lt;Device&gt;&lt;deviceId&gt;jfhksjdhfjks231231233&lt;/deviceId&gt;&lt;tokenString&gt;RNUR7I9G8KOO21F3S2K66AHBV&lt;/tokenString&gt;&lt;createdAt&gt;04-03-2013T12:47:33&lt;/createdAt&gt;&lt;/Device&gt;&lt;/Token&gt;</EXT_STRING0>
    </Row>
    <Row rowNumber="7">
        <OBJECT_ID>AOM_Reference_UserJ8LKYCDT6%40aom.com</OBJECT_ID>
        <EXT_STRING0>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;Token&gt;&lt;Device&gt;&lt;deviceId&gt;jfhksjdhfjks231231233&lt;/deviceId&gt;&lt;tokenString&gt;RIF9YBB2UG4PUMHCQ11FCI1HC&lt;/tokenString&gt;&lt;createdAt&gt;28-02-2013T15:59:04&lt;/createdAt&gt;&lt;/Device&gt;&lt;/Token&gt;</EXT_STRING0>
    </Row>
    <Row rowNumber="8">
        <OBJECT_ID>AOM_Reference_UserO9PJ92I6X%40aom.com</OBJECT_ID>
        <EXT_STRING0>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;Token&gt;&lt;Device&gt;&lt;deviceId&gt;jfhksjdhfjks231231233&lt;/deviceId&gt;&lt;tokenString&gt;RIF9XP9WF62N6MHCQ11FCI1HC&lt;/tokenString&gt;&lt;createdAt&gt;28-02-2013T15:55:35&lt;/createdAt&gt;&lt;/Device&gt;&lt;/Token&gt;</EXT_STRING0>
    </Row>
    <Row rowNumber="9">
        <OBJECT_ID>AOM_Reference_UserKK62LWXVU%40aom.com</OBJECT_ID>
        <EXT_STRING0>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;Token&gt;&lt;Device&gt;&lt;deviceId&gt;jfhksjdhfjks231231233&lt;/deviceId&gt;&lt;tokenString&gt;RIF9WAUNZJLCYMHCQ11FCI1HC&lt;/tokenString&gt;&lt;createdAt&gt;28-02-2013T14:51:45&lt;/createdAt&gt;&lt;/Device&gt;&lt;/Token&gt;</EXT_STRING0>
    </Row>
    <Row rowNumber="10">
        <OBJECT_ID>AOM_Reference_User8JLCJG90R%40aom.com</OBJECT_ID>
        <EXT_STRING0>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;Token&gt;&lt;Device&gt;&lt;deviceId&gt;jfhksjdhfjks231231233&lt;/deviceId&gt;&lt;tokenString&gt;RIF9Y48JUX1WIMHCQ11FCI1HC&lt;/tokenString&gt;&lt;createdAt&gt;28-02-2013T15:58:41&lt;/createdAt&gt;&lt;/Device&gt;&lt;/Token&gt;</EXT_STRING0>
    </Row>
</ResultSet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:32:36.607

您可以使用 CDATA 块和/或继续将 xml 写入“常规”xml 节点，并在读取文件时添加 xml 声明。

您还可以指定`<?xml version="1.0" encoding="utf-8"?>`声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T06:29:11.520

问题解决了我解码格式并解析

# iphone - 如何获取 nscoder 的密钥

> ID：15225015
> 
> 赞同：4
> 
> 时间：2013-03-05T13:28:00.293
> 
> 标签：iphone, objective-c, key-value-observing

有没有办法获取已编码故事板文件的 NSCoder 中使用的密钥？我看到 PSTCollectionView 使用了很多未记录的密钥，他们是如何得到它们的？

具体来说，我希望在您将 UITableViewController 设置为在 IB 中自动使用 UIRefreshControl 时使用的密钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:34:28.850

XIB (XML Interface Builder) 是一个用 XML 创建的文件。

您可以使用 textEdit 或 wordPad 打开它。所以，问题解决了一半！！！

读取 xib/nib 文件的 xml 并解析它。从那里读取所有密钥。

MainMenu.xib 的截图

```
<?xml version="1.0" encoding="UTF-8"?> <archive 
  type="com.apple.InterfaceBuilder3.Cocoa.XIB" version="8.00"> 
   <data> <int key="IBDocument.SystemTarget">1080</int>     
       <string key="IBDocument.SystemVersion">11D50</string>
       <string key="IBDocument.InterfaceBuilderVersion">2457</string>         
       <string key="IBDocument.AppKitVersion">1138.32</string>
       <string key="IBDocument.HIToolboxVersion">568.00</string>
       <object class="NSMutableDictionary" key="IBDocument.PluginVersions"> 
          <string key="NS.key.0">com.apple.InterfaceBuilder.CocoaPlugin</string> 
          <string key="NS.object.0">2457</string>       
       </object> 
```

# c# - MonoGame 和 Microsoft.XNA.Framework 命名空间之间的模糊引用

> ID：15225017
> 
> 赞同：6
> 
> 时间：2013-03-05T13:28:22.787
> 
> 标签：c#, xna, windows-phone-8, monogame

MonoGame（一个基本上将 XNA 引入 Windows Phone 8 的框架）的所有命名空间都带有前缀，`Microsoft.Xna.Framework`我相信可以最大限度地减少将 XNA 应用程序移植到 MonoGame 时所需的代码更改量。

我的问题是，我希望访问`Microphone`该类，因为尚未在 MonoGame 中创建，我必须在官方 Microsoft XNA 类中使用它，这需要`Microsoft.XNA.Framework.dll`在.csproj，我的 MonoGame 模板已设置为避免冲突，效果很好，现在`Microphone`可以访问，但是这样做我在 Microsoft 标准问题和 MonoGame 中都存在的几个关键类之间产生了歧义。

我收到的错误是：

> 不明确的参考：
> Microsoft.Xna.Framework.Color
> Microsoft.Xna.Framework.Color

这显然已经发生，因为除了标准的 Microsoft 发布的 XNA 库之外，我还引用了`MonoGame.Framework.dll`哪个占用了命名空间，从而产生了这种歧义。但是，在所有情况下，我都希望访问 MonoGame 版本。

有什么想法可以明确告诉编译器使用`Color`and`Vector2`类的 MonoGame 版本而不是 Microsoft 官方版本吗？

显然，任何尝试`using Color = Microsoft.Xna.Framework`都行不通，因为它们在编译的 dll 中都被标记为相同！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T13:38:04.107

解决这个特定问题的方法是使用`extern alias`（[MSDN](http://msdn.microsoft.com/en-us/library/ms173212.aspx)，[教程](http://blogs.msdn.com/b/ansonh/archive/2006/09/28/extern-alias-walkthrough.aspx)）。

这样，您可以为 Microsoft XNA DLL 设置别名，并为该类指定适当的`using`语句。`Microphone`继续正常使用 MonoGame。

更好的解决方案可能是使用这种技术`Microphone`在命名空间中调用您自己的包装类。`Microsoft.Xna.Framework.Audio`把它放在一个单独的程序集中，这样你就不必用这些`extern alias`东西污染你的主要源代码。

当然，理想的方法是`Microphone`为 MonoGame 实际实现并贡献它；）

（当然，这个答案并没有说明你以这种方式混合 MonoGame 和 XNA 的成功程度，功能方面。希望它有效。）

# java - Spring MD5 外观形式

> ID：15225021
> 
> 赞同：0
> 
> 时间：2013-03-05T13:28:32.497
> 
> 标签：java, html, spring, spring-security

我正在为我的应用程序创建用户，并使用 Spring security MD5 哈希编码器保护他们：

```
PasswordEncoder encoder = new Md5PasswordEncoder();
String hashedPass = encoder.encodePassword(dbUser.getPassword(), null);
dbUser.setPassword(hashedPass); 
```

所以'admin'变成'd41d8cd98f00b204e9800998ecf8427e'。

这一切都很好而且很花哨，但我也在尝试创建一个表单，当前用户可以在其中更新他们的详细信息等。

我不介意解码 MD5 哈希，因为这不是 spring 的一部分（[有人已经问](https://stackoverflow.com/questions/10400205/password-encryption-decryption-spring-security)过）。但是，当我尝试将其添加到我的表单时，什么也没有出现。

```
<form:password cssClass="input" placeholder="Password" path="password" /> 
```

如果我添加“showPassword”属性，则 MD5 散列被添加到被屏蔽的字段中（例如，通过 chrome 上的圆圈），但如果我右键单击并“查看源”，散列就在那里。

我怎样才能使它显示为正确数量的字符作为原始“管理员”输入？HTML5 占位符不起作用，因为用户可能认为他们每次都必须重新输入密码，而 javascript 绝对不是一个干净的选择。

非常感谢，

托比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:31:09.250

哈希的全部意义在于您*无法反转它*。你不知道原件是什么，也不知道它有多长。你不应该以任何方式展示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:56:57.777

我不建议向用户显示密码（或其他机密信息）：无论是散列还是纯文本。要解决用户体验问题，您可以：

1）显示密码的空输入字段

2）根本不显示密码，并有单独的链接/菜单来更改密码。

# java - Java 中的 Integer.parseInt(string, radix) 返回（大部分）负十进制值

> ID：15225022
> 
> 赞同：0
> 
> 时间：2013-03-05T13:28:36.823
> 
> 标签：java, hex, mac-address, negative-number

正如我上面所说，我正在使用 Integer.parseInt 将十六进制值转换为十进制，但是当我输入正十六进制值时，我不断返回负整数：

```
byte[] bytes2 = getMacBytes("90:e6:ba:97:4a:bb");

private static byte[] getMacBytes(String macStr) throws IllegalArgumentException {
    byte[] bytes = new byte[6];
    String[] hex = macStr.split("(\\:|\\-)");
    for (int i = 0; i < 6; i++){
        System.out.println(hex[i]);
    }
    if (hex.length != 6) {
        throw new IllegalArgumentException("Invalid MAC address.");
    }
    try {
        for (int i = 0; i < 6; i++) {
            bytes[i] = (byte) Integer.parseInt(hex[i], 16);
            System.out.println(bytes[i]);
        }
    }
    catch (NumberFormatException e) {
        throw new IllegalArgumentException("Invalid hex digit in MAC address.");
    }
    return bytes;
} 
```

当我运行此代码时，它返回：

90 e6 ba 97 4a bb -112 -26 -70 -105 74 -69

所以我可以看到 MAC 地址被正确拆分，但 6 个十六进制值中有 5 个从 Integer.parseInt(string, radix) 返回为负数。我可以看到负值是其实际十进制值的 x + 256，但倒数第二个是正确的十进制值......任何想法为什么它将 6 个值中的 5 个变成负数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T13:32:59.827

我认为 parseInt 行为正确，但是您的转换为字节会将数字转换为范围 [-128; 127]。尝试将结果存储在 short 或 int 数组中，或将它们保存在 byte 数组中，但请记住使用`System.out.println(bytes[i] & 0xff)`.

# java - 在每个 Jpanels 中获取刷新的数据库值

> ID：15225026
> 
> 赞同：0
> 
> 时间：2013-03-05T13:28:44.107
> 
> 标签：java, swing

我有三个面板用于插入、修改和删除用户，如果我在未显示的`JFrame`值中插入一个值，但如果我关闭应用程序并再次打开它，新记录就在那里。`insertJpanel``modifyPanel``deletePanel`

我怎么能`JPanels`一起刷新？

# android - 在 Android SDK 中执行单击按钮

> ID：15225036
> 
> 赞同：9
> 
> 时间：2013-03-05T13:29:07.883
> 
> 标签：android, button, automation, click

创建布局后，我希望自动单击一个按钮并使用`button.performClick()`它。

问题是它不起作用。看起来我在这个`onCreate, onStart, onResume`方法中不能这样做。按钮及其事件是在什么时候创建的，所以我可以单击它？

这

```
@Override
protected void onResume() {
    super.onResume();
    mybutton.performClick();
} 
```

不起作用。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-05T13:34:26.927

这在类似的情况下对我有用：

```
mybutton.post(new Runnable(){
            @Override
            public void run() {
                 mybutton.performClick();
            }
}); 
```

这样，只有当按钮已经加载到布局上时，runnable 才会运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T13:33:45.510

您需要使用[ViewTreeObserver](http://developer.android.com/reference/android/view/ViewTreeObserver.html)：

```
 ViewTreeObserver vto = mybutton.getViewTreeObserver();
    vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            vto.removeOnGlobalLayoutListener(this);
            mybutton.performClick();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T13:43:42.613

我闻到了什么，似乎您忘记将[onClicklistner](http://developer.android.com/reference/android/view/View.OnClickListener.html)添加到您的视图中，我测试了您的工作方式，它的工作正常，我做了如下操作：

全局定义按钮`Button btn;`

之内`onCreate()`

```
btn=(Button)findViewById(R.id.button);
            btn.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    dialog();
                }
            }); 
```

并且在`onResume()`

```
@Override
    protected void onResume() {

        btn.performClick();
        super.onResume();
    } 
```

*它成功显示了一个对话框！*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T13:39:35.470

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mylayout);

    myButton = (Button) findViewById(R.id.myButton);
    myButton.setOnClickListener(this);
}

@Override
public void onStart() {
    myButton.performClick();
}

@Override
public void onClick(View v) {
    // DO STUFF
} 
```

# r - 如何使用 R 将列中的值与前一个值进行比较？

> ID：15225038
> 
> 赞同：0
> 
> 时间：2013-03-05T13:29:14.817
> 
> 标签：r

我在 R 中有一个由 4 列和数千行组成的大型数据框。下面以第一行为例：

```
 ID     V1      V2     Stimulus
[1,]  001   74.80   803.0   0
[2,]  001   75.98   790.9   0
[3,]  001   75.95   791.1   0
[4,]  001   65.70   918.7   0
[5,]  001   59.63   1005.6  13
[6,]  001   59.44   1012.0  13
[7,]  001   59.62   1010.0  13
[8,]  001   63.85   942.4   13
[9,]  001   60.75   992.9   0
[10,] 001   59.62   1010.0  0
[11,] 001   61.68   974.0   0
[12,] 001   65.21   921.4   15
[13,] 001   59.23   1012.0  15
[14,] 001   61.23   979.5   15
[15,] 001   70.80   849.2   0 
```

在这个数据帧中，每一行对应 1 秒。第 4 列（刺激）是 0（即无刺激）或大于 0 的正整数（即刺激数）。刺激数字总是由一个或多个 0 值分隔）。

我想了解如何将第 4 列（刺激）中的每个数值与前一行中的值进行比较：从这个比较中，我想在数据框中创建第 5 列，如果值为 0，当值改变时“OK”（但仅针对前 2 行/秒），而在再次出现新的 0 值之前，其余数字行不同于 0 时为“POST”。

这是我想从上一个数据框中获得的示例

```
 ID     V1      V2     Stimulus    Status
    [1,]  001   74.80   803.0   0           PRE
    [2,]  001   75.98   790.9   0           PRE
    [3,]  001   75.95   791.1   0           PRE
    [4,]  001   65.70   918.7   0           PRE
    [5,]  001   59.63   1005.6  13          OK
    [6,]  001   59.44   1012.0  13          OK
    [7,]  001   59.62   1010.0  13          POST
    [8,]  001   63.85   942.4   13          POST
    [9,]  001   60.75   992.9   0           PRE
    [10,] 001   59.62   1010.0  0           PRE
    [11,] 001   61.68   974.0   0           PRE
    [12,] 001   65.21   921.4   15          OK
    [13,] 001   59.23   1012.0  15          OK
    [14,] 001   61.23   979.5   15          POST
    [15,] 001   70.80   849.2   0           PRE 
```

请注意，在第 7,8 和 14 行中，我有值“POST”（当检测到值从 0 发生变化时，OK 值仅归因于前 2 行）。

我不知道如何解决这个问题。我的想法如下：我应该遍历数据框第 4 列中的每一行。对于每一行*我* 应该检查它是否大于前一行

```
 mydataframe$Stimulus[i,4] >  mydataframe$Stimulus[i-1,4] 
```

如果是这样，我将值“OK”添加到新列，但仅针对前 2 行，然后我将在第 5 列（状态）中添加值“POST”，直到第 4 列（刺激）的值变为零。

我要创建的第 5 列也可以是一个单独的单列数据框，其行数与原始数据框的行数相同。没关系，我可以将它*cbind*和原始数据框。

我的（理论）方法好吗？有没有更简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:13:41.897

首先，创建新列（`dat`是数据集的名称）：

```
Status <- ave(dat[ , "Stimulus"], c(0, cumsum(abs(diff(dat[ , "Stimulus"])))),
              FUN = function(x)
                      if(!x[1]) "PRE" else c(rep("OK", min(2, length(x))),
                                             rep("POST", length(x) - 2))) 
```

现在，结合两个对象：

```
cbind(dat, Status) 
```

结果：

```
 ID    V1     V2 Stimulus Status
[1,]   1 74.80  803.0        0    PRE
[2,]   1 75.98  790.9        0    PRE
[3,]   1 75.95  791.1        0    PRE
[4,]   1 65.70  918.7        0    PRE
[5,]   1 59.63 1005.6       13     OK
[6,]   1 59.44 1012.0       13     OK
[7,]   1 59.62 1010.0       13   POST
[8,]   1 63.85  942.4       13   POST
[9,]   1 60.75  992.9        0    PRE
[10,]  1 59.62 1010.0        0    PRE
[11,]  1 61.68  974.0        0    PRE
[12,]  1 65.21  921.4       15     OK
[13,]  1 59.23 1012.0       15     OK
[14,]  1 61.23  979.5       15   POST
[15,]  1 70.80  849.2        0    PRE 
```

# knockout.js - 级联下拉，彼此没有关系

> ID：15225039
> 
> 赞同：0
> 
> 时间：2013-03-05T13:29:16.973
> 
> 标签：knockout.js

我有 2 个下拉列表，但彼此之间不会有任何关系。我想根据第一个下拉列表的选择隐藏或禁用第二个下拉列表中的元素。

这是小提琴[链接](http://jsfiddle.net/DJGxC/10/)，当我在一个下拉列表中选择类型时，您可以看到它在其他下拉列表中显示相关的汽车。在小提琴中，您可以看到数据声明如下

```
filters: ["None", "Old", "New", "Super"],
items: [{ name: "Corvette", type: "Old"},
       { name: "Charger", type: "Old"},
       { name: "Prius", type: "New"},
       { name: "Magnum", type: "New"},
       { name: "McLaren", type: "Super"},
       { name: "Saleen", type: "Super"}] 
```

您将看到这两个数组之间存在关系。但在我的实际场景中，彼此之间不会有如下关系

```
// Mydata will be like
 filters: ["None", "Old", "New", "Super"],
 items: [{ name: "Corvette", type: "Old"},
       { name: "Charger"},
       { name: "Prius"},
       { name: "Magnum"},
       { name: "McLaren"},
       { name: "Saleen"}] 
```

我怎样才能在淘汰赛中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:32:21.747

如果我理解正确，那么您只想更改您的`filteredItems`计算，以便它`slice`在您的数组上执行如下操作：

```
self.filteredItems = ko.computed(function() {
    var filter = self.filter();
    if (!filter || filter == "None") {
        return self.items();
    } else {
        return self.items.slice(0, 4);
    }
}); 
```

示例：http: [//jsfiddle.net/rniemeyer/3y4YP/](http://jsfiddle.net/rniemeyer/3y4YP/)

# c++ - c ++将函数传递给主要错误

> ID：15225040
> 
> 赞同：0
> 
> 时间：2013-03-05T13:29:24.520
> 
> 标签：c++

嗨，我有以下 c++ 代码，我想在 main 中调用函数，以下是我的代码：

```
#include <iostream>
#include <numeric>

int main()
{

    using namespace std;

    readData();

    int sumA = accumulate(A, A + sizeof(A) / sizeof(int), 0);
    int sumB = accumulate(B, B + sizeof(B) / sizeof(int), 0);

    cout << ((sumA > sumB) ? "Array A Greater Than Array B\n" : "Array B Greater Than Array A\n");

    return 0;
}

void readData()
{

int A[] = { 1, 1, 8};
int B[] = { 2, 2, 2};
} 
```

我在 cli 上有以下错误：

```
test.cpp:3:7: error: storage size of ‘B’ isn’t known
test.cpp:4:7: error: storage size of ‘A’ isn’t known 
```

我在哪里错了？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T13:30:37.857

变量`A`和`B`是函数的局部变量`readData`，不能从任何其他函数访问。

要么将它们声明为全局变量（不推荐），要么声明为局部变量`main`并将它们作为参数传递给`readData`函数。

我还建议您使用[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)而不是普通数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:59:06.360

首先，注意 C 和 C++ 中数组的大小。阅读此处了解更多信息：[http ://www.cplusplus.com/faq/sequences/arrays/sizeof-array/](http://www.cplusplus.com/faq/sequences/arrays/sizeof-array/)

但是，请像这样使用 std::vector 。

```
#include <iostream>
#include <vector>
#include <numeric>

typedef std::vector<int> int_vec_t;

//Call by reference to set variables in function
void readData(int_vec_t& v1, int_vec_t& v2)
{
  v1 = int_vec_t{1,1,8}; //This only works for C++11
  v2 = int_vec_t{2,2,2};
}

void readUserData(int_vec_t& v)
{
  for(;;)
  {
    int val;
    std::cin>>val;
    if(val == 0) break;
    v.push_back(val);
  }
}

int main()
{
    using namespace std;

    int_vec_t A;
    int_vec_t B;

    readData(A,B);
    //Or
    readUserData(A);
    readUserData(B);

    int sumA = accumulate(A.begin(), A.end(), 0); //Then use iterators
    int sumB = accumulate(B.begin(), B.end(), 0);

    cout << ((sumA > sumB) ? "Array A Greater Than Array B\n" : "Array B Greater Than Array A\n");

    return 0;
} 
```

# spring - 使用@ModelAttribute 的目的是什么

> ID：15225041
> 
> 赞同：0
> 
> 时间：2013-03-05T13:29:25.813
> 
> 标签：spring, model-view-controller, spring-mvc

`@ModelAttribute` 嗨，我想知道使用为什么使用的目的是什么

```
@RequestMapping(value="")
public String index(@ModelAttribute("before") Before b) {
    System.out.println(b.getBeforeString());
    return "home/index";
}

@ModelAttribute("before")
public Before before() {
    return new Before();
} 
```

我什么时候可以使用

```
@RequestMapping(value="")
public String index() {
    Before b = new Before();
    System.out.println(b.getBeforeString());
    return "home/index";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:42:21.810

`@ModelAttribute`用于将事物填充到 MVC 模型中，以供视图中的后续使用。这不是将事物放入模型中的唯一方法（这也可以直接通过代码完成），但它是添加`@RequestMapping`方法参数或方法返回值等的便捷方法。

在同一个控制器类中调用的`@ModelAttribute`每个方法之前，都会调用带有注释的方法。`@RequestMapping`这通常用于填充表单的只读组件 - 例如选择列表的值。（[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#mvc-ann-modelattrib-methods](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#mvc-ann-modelattrib-methods)） - 或用于准备bean之前的绑定传入的请求值（例如从数据存储加载）。

所以，在你的第一个例子中......

```
@ModelAttribute("before")
public Before before() {
  return new Before();
}
@RequestMapping(value="")
public String index(@ModelAttribute("before") Before b) {
    System.out.println(b.getBeforeString());
    return "home/index";
} 
```

...该`before()`方法将首先被调用，并`Before`在模型中放置一个名为“before”的实例。接下来，`index(...)`将调用该方法并接收相同的`Before`实例（因为它也使用模型属性名称“before”） - 但现在它将填充来自请求的值，其中请求参数名称映射到 Before 属性名称。（旁白：这可能不是你想要的。如果这真的是你想要的，你应该考虑`BindingResult`在索引方法中添加一个作为第二个参数来捕获任何绑定错误（[http://static.springsource.org/spring/docs /3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#mvc-ann-arguments](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#mvc-ann-arguments)要点 17））。

在此之后，`@ModelAttribute`注释`index(...)`也将导致该`Before`实例显示名称为“之前”的模型，以便在下一个视图中使用：“/home/index”。

（值得注意的是：如果您根本没有该`before()`方法，您的`index()`方法将收到一个`Before`created 及其无参数构造函数的实例，然后用传入的请求值填充。它仍会随后将其放入模型中并命名为“之前”供下一个视图使用。）

您的第二个代码段...

```
@RequestMapping(value="")
public String index() {
    Before b = new Before();
    System.out.println(b.getBeforeString());
    return "home/index";
} 
```

...实际上根本没有将其添加`Before`到模型中，因此它不会在视图中可用。如果你想在模型中使用之前，请使用：

```
@RequestMapping(value="")
public String index(Model uiModel) {
    Before b = new Before();
    System.out.println(b.getBeforeString());
    uiModel.addAttribute("beforeName", b);  // will add to model with name "beforeName"
    uiModel.addAttribute(b)    // will add to model with a default name (lower-cased simple type name by convention), ie: "before"
    return "home/index";
} 
```

高温高压

# ruby-on-rails - TinyMCE gem 在我的 rails 3 应用程序中不起作用

> ID：15225043
> 
> 赞同：-1
> 
> 时间：2013-03-05T13:29:38.980
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, tinymce

我正在尝试在我的 rail 3 应用程序中使用 tinyMCE gem。我看不到编辑器上的所有选项，就像我看不到一样 - 1.样式（选项可见但不能下拉）2.无法插入图像（浏览图像的按钮在选择窗口上不可见）3.我看不到表格、放大屏幕、字体类型等的任何其他选项。

如果有人有任何解决方案，请帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:21:19.983

使用此配置，一切正常。如果您有其他语言，请确保您的资产存储库中有此语言。如果您不小心抛出异常并打破使用按钮创建表格。

模板文件：

```
<%= text_area_tag :editor, "", :class => "tinymce", :rows => 40, :cols => 120 %>
<input type="file" id="image_uploader" style="display:none;opacity:0;" />
<%= tinymce %> 
```

样式修复（预定义样式）：config/tinymce.yml

```
theme_advanced_toolbar_location: top
theme_advanced_toolbar_align: left
theme_advanced_statusbar_location: bottom
theme_advanced_buttons3_add:
  - tablecontrols
  - fullscreen
plugins:
  - table
  - fullscreen
style_formats:
  - title: 'Bold text'
    inline: 'b'
  - title: 'Red text'
    inline: 'span'
    styles:
      color : '#ff0000'
file_browser_callback: 'file_upload' 
```

Javascript（您的资产中的文件）：

```
(function(){
// encapsulating
  var iu = document.getElementById('image_uploader');
  iu.addEventListener('change',send_after_choose);

  function send_after_choose(event){
    // some multipart ajax U need to create new FormData see documentation of use
    // when done fetch url
  }
  // this need to be global function.
  function file_upload(field_name, url, type, win){
    var iu = document.getElementById('image_uploader');
    iu.click();
  }
  window.file_upload=file_upload;
})(); 
```

没有更多信息：[http ://www.tinymce.com/wiki.php/How-to_implement_a_custom_file_browser](http://www.tinymce.com/wiki.php/How-to_implement_a_custom_file_browser)

抱歉，但这是要编写的代码的很大一部分，而且我没有工作示例，因此您必须自己编写。但添加此代码后，U 将能够在您的图像弹出窗口中看到文件按钮，他将调用您编写的函数。

我不知道你使用哪个框架，所以我写了一些简单的 vanila javascript。更改事件适用于文件输入。输入可以是不可见的，只要他没有名字，你可以随时添加。

数据对象文档： [https ://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData/Using_FormData_Objects)

如果 U 使用 jQuery U 可以添加 FormData 对象作为请求数据。我不知道这如何与 Mootools 或 Prototype 一起使用。

# linux - Unix 字符串在文件中查找和替换

> ID：15225050
> 
> 赞同：-1
> 
> 时间：2013-03-05T13:30:06.177
> 
> 标签：linux, unix, replace, sed

在 Unix 中，如何找到模式：`mm/dd/yyyy hh:mm`在文件中并将其替换为`mm/dd/yyyy`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:50:57.963

这是一种方法`sed`：

```
sed -r 's|([0-9]{2}/[0-9]{2}/[0-9]{4}) [0-9]{2}:[0-9]{2}|\1|g' 
```

# python - 如何使用python / PIL将图像存储到redis中

> ID：15225053
> 
> 赞同：4
> 
> 时间：2013-03-05T13:30:15.807
> 
> 标签：python, redis, python-imaging-library

我正在使用 python 和图像模块（PIL）来处理图像。

我想将图像对象的原始比特流存储到redis，以便其他人可以使用nginx和httpredis直接从redis读取图像。

所以，我的问题是如何获取 Image 对象的原始位并将其存储到 redis 中。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-05T14:30:28.723

使用 PIL 1.1.7、redis-2.7.2 pip 模块和 redis-2.4.10 我能够得到这个工作：

```
import Image
import redis
import StringIO

output = StringIO.StringIO()
im = Image.open("/home/cwgem/Pictures/portrait.png")
im.save(output, format=im.format)

r = redis.StrictRedis(host='localhost')
r.set('imagedata', output.getvalue())
output.close() 
```

我发现这`Image.tostring`不可靠，所以这个方法用来`StringIO`使字符串看起来是一个文件。`format=im.format`是必需的，因为`StringIO`没有“扩展名”。然后我通过执行以下操作测试了图像数据是否可以保存：

```
redis-cli --raw get 'imagedata' >test.png 
```

并验证我得到了一张图片。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-17T13:50:54.593

```
import redis
r =  redis.StrictRedis()
img = open("/path/to/img.jpeg","rb").read()
r.set("bild1",img) 
```

也在这里工作！

# javascript - 我如何使这个响应（在窗口调整大小时刷新）Raphaeljs

> ID：15225056
> 
> 赞同：0
> 
> 时间：2013-03-05T13:30:20.820
> 
> 标签：javascript, raphael

所以我有这个脚本

```
var wide = window.innerWidth;
var high = window.innerHeight;

var paper = Raphael(0, 0, wide, high);
for (var j = 0; j < (wide / 10); j += 1) {
var multi = j * 10;
paper.path(["M", multi + 0.5, 0, "v", high]);
};

for (var j = 0; j < (high / 10); j += 1) {
var multi = j * 10;
paper.path(["M", 0,multi + 0.5, "h", wide]);
}; 
```

我希望网格在调整大小时绘制到窗口的大小，如果可能的话，再加上如何更改线条的颜色？

这是一个小提琴

[http://jsfiddle.net/zhirkovski/7DXJ4/2/](http://jsfiddle.net/zhirkovski/7DXJ4/2/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:37:18.050

使用 JQuery，您可以将其附加到“调整大小”事件，如下所示：

```
window.onresize = function(event) {
    /* Do something */
} 
```

使用 mootools，您可以使用 addEvent() 方法附加它，如下所示：

```
$(window).addEvent('resize', function() { /* Do something */ }); 
```

在原生 javascript 中，它与 mootools 非常相似。就像是：

```
window.addEvent('resize', function() { /* Do something */ }, false); 
```

# java - Facebook api返回错误代码100

> ID：15225062
> 
> 赞同：1
> 
> 时间：2013-03-05T13:30:38.143
> 
> 标签：java, javascript, facebook, facebook-javascript-sdk

每次我尝试通过 Facebook JS Sdk 调用发送对话框时都会出现此错误。

**API 错误代码：100 API 错误描述：无效参数错误消息：“链接”无效。**

这是我的代码。

在里面

```
 window.fbAsyncInit = function() {
            // init the FB JS SDK
            FB.init({
                appId      : '${sp.apiKey}', // App ID from the App Dashboard
                //       channelUrl : 'http://localhost:8084/facebook/callback', // Channel File for x-domain communication
                status     : true, // check the login status upon init?
                cookie     : true, // set sessions cookies to allow your server to access the session?
                xfbml      : true  // parse XFBML tags on this page?
            });

            // Additional initialization code such as adding Event Listeners goes here

        };
        (function(d, debug){
            var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
            if (d.getElementById(id)) {return;}
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
            ref.parentNode.insertBefore(js, ref);
        }(document, /*debug*/ true)); 
```

发送对话功能

```
 function sendFacebookMessage(id, jobid){

            FB.ui({
                method: 'send',
                name: 'Some text here.',
                to:id,
                link: 'www.some-url.com'

               //tomcat is running on port 8084
            });
        } 
```

我试过 http:// ...没有它...

每次结果都相同..“链接”无效。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:39:34.083

[文档](https://developers.facebook.com/docs/reference/dialogs/send/)没有具体说明，但您可能无法`localhost`在此上下文中指定链接。该 URL 仅对您在本地计算机上有效。它不适合作为公共网站上的链接。

# android - 安卓蓝牙群聊

> ID：15225063
> 
> 赞同：2
> 
> 时间：2013-03-05T13:30:46.793
> 
> 标签：android, bluetooth

我想知道是否可以使用 Android SDK 中作为示例给出的示例蓝牙聊天来创建蓝牙群聊。我想扩展该应用程序以允许多个用户相互连接，然后他们应该能够看到彼此的消息。基本上就像在蓝牙上运行的 Whatsapp。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:02:38.280

理论上是的。您可以使用与设备的多套接字连接将示例聊天应用程序转换为群聊。

但是但是....
几乎没有，因为**android 目前不支持与多个设备**（超过 2 或 3 个）的稳定连接。

所以即使你与每个设备创建单独的套接字连接并传递消息，它也会使蓝牙连接非常频繁地掉线。

而且，即使您将任何 Android 设备连接到蓝牙服务器，您将如何管理该 Android 蓝牙服务器设备与多个 Android 蓝牙客户端设备的连接，而不会出现连接丢失且连接稳定的情况？

所以实际上目前没有制作非安卓蓝牙服务器设备，你不能在安卓上创建群聊应用程序。

# vb.net - VB.NET：有没有办法通过代码禁用 DVD-ROM 驱动器？

> ID：15225064
> 
> 赞同：1
> 
> 时间：2013-03-05T13:30:49.320
> 
> 标签：vb.net, windows-7, dvd

我可以通过设备管理器启用/禁用 DVD-ROM 驱动器。
是否可以通过代码做到这一点？
谢谢你。

# llvm - 尝试在内部生成时构建 llvmcore 时出现问题

> ID：15225073
> 
> 赞同：1
> 
> 时间：2013-03-05T13:31:13.570
> 
> 标签：llvm

我正在尝试编译 llvm 2336.11。我将其配置为：

```
export CXX=/opt/local/bin/llvm-g++-4.2
export CC=/opt/local/bin/llvm-gcc-4.2
ln -s /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/mach/x86_64/ /usr/include/mach/x86_64
ln -s /usr/local/Cellar/binutils/2.23.1/x86_64-apple-darwin12.2.0/bin/ar /usr/bin/ar
ln -s /Applications/Xcode.app/Contents/Developer/usr/bin/ranlib /usr/bin/ranlib
ln -s /Applications/Xcode.app/Contents/Developer/usr/bin/nm /usr/bin/nm

../llvmgcc42-2336.11/llvmcore/configure --prefix=/Users/patrick.muscat/Documents/crosscompil/llvmbin/ --enable-assertions=no --enable-optimized=yes 
```

但我明白了：

```
llvm[1]: Building Intrinsics.gen.tmp from Intrinsics.td
/Users/patrick.muscat/Documents/crosscompil/llvmbuild/Release-Asserts/bin/tblgen: ERROR: Couldn't find the `Intrinsic' class!
make[1]: *** [/Users/patrick.muscat/Documents/crosscompil/llvmbuild/lib/VMCore/Release-Asserts/Intrinsics.gen.tmp] Error 1
make[1]: Leaving directory `/Users/patrick.muscat/Documents/crosscompil/llvmbuild/lib/VMCore'
make: *** [all] Error 1 
```

然后我修改了源以显示可用的定义和类，在 Record.cpp 中添加 Records.dump() 出现错误文本，我得到了这个（空）：

```
------------- Classes -----------------
------------- Defs ----------------- 
```

有人有解释吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:32:22.170

最后我找到了解决方案。我安装了解决我的问题的 xcode 命令行工具。

我不太了解此安装的影响...Apple 文档有时很模糊...

# excel - 将 Sum 值添加到活动单元格 VBA excel

> ID：15225075
> 
> 赞同：1
> 
> 时间：2013-03-05T13:31:15.510
> 
> 标签：excel, vba, sum

我试图将一个总和添加到一个活动单元格中，但它仍然无法正常工作。

我的代码：

```
rngCell2.Offset(0, 6).Activate
ActiveCell = ActiveCell + 15 
```

当单元格为空时，执行后单元格将得到值 15。但是当已经有一个数字 fe 60 时，它保持 60。

我的代码有什么问题，正确的代码是什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:34:12.213

尝试

```
rngCell2.Offset(0, 6).Value = rngCell2.Offset(0, 6).Value + 15 
```

这会将左侧 6 列的单元格增加`rngCell2`15。

如果只需要增加ActiveCell，试试

```
ActiveCell.Value = ActiveCell.Value + 15 
```

# android - Android：AAC+ 广播流不适用于 MediaPlayer（Android 4.2.2 / Shoucast 链接）

> ID：15225076
> 
> 赞同：14
> 
> 时间：2013-03-05T13:31:15.907
> 
> 标签：android, streaming, android-mediaplayer

我最近遇到了一些使用 Android**流式传输 AAC+**`MediaPlayer`无线电流的问题。[关于文档](http://developer.android.com/guide/appendix/media-formats.html#core)，Android 4.1 中应该支持流式传输 AAC+。（测试设备是带有 Android 4.2.2 的 Nexus 2）

我发现了一些相关问题（查看[此处](https://stackoverflow.com/questions/8166072/android-http-live-streaming-url-using-mediaplayer)、[此处](https://stackoverflow.com/questions/8671479/android-mediaplayer-works-fine-in-custom-audio-streaming-application-up-to-andro/8833346#8833346)或[此处](https://stackoverflow.com/questions/9850328/android-how-can-i-play-shoutcast-aac-aac-mp3-in-mediaplayer-for-android-2-3-a)），但它们主要与较旧的 Android 版本或 4.1 版本之前的日期有关。我找到了[AACPlayerAndroid](http://code.google.com/p/aacplayer-android/)库，但你必须在那里购买许可证。

如果我尝试流式传输 AACPlus 流，MediaPlayer 会抛出`MediaPlayerError (1,-2147483648)`，它被定义为“不支持的媒体格式”。但是，如果我在模拟器中启动相同的 AAC+ 流，它工作正常！

到目前为止我尝试了什么：

*   在模拟器中尝试相同的代码有效？！？（为什么......也许本地机器支持编解码器？）

*   用 4.1 或 4.2 测试另外两个设备也失败了

*   使用手动标头和 设置 AAC+ 流`setDataSource(String path)`，这不起作用（更改 http 标头也失败）

*   设置一个新的 SimpleMediaPlayer 项目-> 也失败了

*   尝试检查网络流量，如果 android 设备被重定向到错误的 url。实际上，我`Charles`使用连接了设备`Proxy`，但只能监控 Android 浏览器。我仍然认为重定向是正确的！

这是我的 Streaming.class 的 setDataSource 的实现

```
public AmplifyMediaPlayer(PlayerStationObject playerStationObject, Context context) {
     super();
     this.setAudioStreamType(AudioManager.STREAM_MUSIC);
     this.mCurrentStationObject = playerStationObject;
     try {
        //AAC+ TestStream #1: NOT WORKING
        //Uri uri = Uri.parse("http://up-gc2.webnow.com.br/alpha.aac");

        //AAC+ TestStream #2: NOT WORKING   
        //Audio codec: 64 kbit/s 44.1 kHz AAC+, 128 kbit/s 44.1 kHz MP3
        //Uri uri = Uri.parse("http://relay.publicdomainproject.org:80/jazz_swing.aac   ");

        //Setting HTTP header for fixing some issues with normal setDataSource Header from Android
        //User-Agent "iTunes" was set to force re-direct to shoutcast streaming url     
        Map<String, String> headers = new HashMap<String, String>();
        headers.put("User-Agent", "iTunes");

        setDataSource(context, uri, headers);

        //AAC Codec works fine...
        //setDataSource("http://fri.net.pl:8000/fri");

        prepareAsync();

        //... 
```

所以实际上我有以下问题：

为什么我无法在 Android 4.1 及更高版本上播放 ACC+ Stream，即使它们应该受支持？

有没有人有一个 ACC+ 流，他成功地使用 Android 的 MediaPlayer 类进行流式传输？（只是检查一下，如果我的播放器集成有问题）

如果不支持 ACC+，您是否知道一个好的库或示例项目可以查看，他们是如何解决问题的？

谢谢或任何建议或意见！

我测试的其他 AAC+ 流：http: [//jam-aacp.rautemusik.fm](http://jam-aacp.rautemusik.fm)

**编辑** 到目前为止，我最终得到：这是不可能的。AACP-Decoder Library 是一个很好的解决方案，但它还不稳定。希望安卓能尽快支持。如果您不同意，**请发表评论**！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:00:08.007

我的应用程序遇到了同样的问题。

我用 MediaPlayer 玩了很多，但没有成功。我什至在应用程序中使用代理进行了测试，该代理用于在较旧的 android 版本上流式传输 MP3 流

我还测试了[aacplayer-android](http://code.google.com/p/aacplayer-android/) / [aacdecoder-android](http://code.google.com/p/aacdecoder-android/)，但在我的测试中它不是很稳定......

由于找不到，我们最终选择了[BASS for Android 。](http://www.un4seen.com/forum/?topic=13225.0)

但它也需要[AAC 专利许可证](http://www.vialicensing.com/licensing/aac-fees.aspx)* 如果您想公开应用程序（供私人使用，我认为它不关心......）也需要[BASS 许可证](http://www.un4seen.com/bass.html#license)，除非您是非商业实体。

*) Android 应用程序算作*消费产品*，而不是*消费 PC 软件*......只是为了避免我们为应用程序犯下的错误......

**[更新]**
为什么需要专利费？
一旦产品（在这种情况下是应用程序）带来了自己的解码器（或编码器），就必须支付费用，因为 BASS 和 aacdecoder-android 都带来了自己的解码器代码，他们需要有 AAC 许可证。仅当可以使用主机系统上可用的解码器（由主机系统的开发人员许可/付费 - 在本例中为 Google）时，它是“免费的”。但目前[似乎](http://www.un4seen.com/forum/?topic=13225.msg100460#msg100460)没有办法访问/使用设备编解码器......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:54:49.053

如果您可以使用 USB 连接您的 Nexus 2 并运行`adb shell`并获得一个终端，您可以使用它`stagefright`来检查支持的可用编解码器和配置文件。

例如`stagefright -l`and`stagefright -p`将是两个有用的命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-04T11:44:15.913

我也对此进行了调查，发现如果您*包含自己的解码器*，则需要支付许可费：

[Vialicensing (AAC) 回复：](https://groups.google.com/forum/#!topic/android-developers/OTySJlWT_UE)

> “如果您将利用 Android 中的本机 AAC 支持，以便您的应用不包含 AAC 编码器或解码器，那么您就不需要/有义务获得许可——您的产品不会侵权。”</ p>

这意味着您可以在没有版税的情况下播放 AAC 的唯一方法是原生 Android 播放器通过其内置解码器支持 AAC。从外观上看，4 不支持此功能。我尝试为播放器提供 AAC 流，它只是永久缓冲。

# wpf - 如何与 Silverlight 和 WPF 共享 xaml 代码

> ID：15225082
> 
> 赞同：2
> 
> 时间：2013-03-05T13:31:39.373
> 
> 标签：wpf, silverlight, xaml

在代码方面的 Silverlight 和 WPF 中，我们像这样分开

```
#if SILVERLIGHT

#else

#endif 
```

像我们如何共享 XAML 有什么办法吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:25:32.993

分离代码的基础非常简单：

*   使用 Silverlight 项目
*   使用 .net 项目并使用“添加为链接”选项添加所有共享文件

然后你可以为 WPF 和 Silverlight 编译你的代码。代码只写一次，但你编译了两个 DLL。

如果 SILVERLIGHT/ELSE 分离，请使用 MVVM 并尽可能频繁地避免这种情况。如果您必须经常使用它，最好有 2 个清晰的单独模块，只共享部分代码（如果 SILVERLIGHT/ELSE 分离，这部分不应该要求这样做）。

要明确：不，您不能在 XAML 中进行这种分离。但你甚至不应该这样做。

# ruby-on-rails - 设计可确认电子邮件和 paper_trail 的问题

> ID：15225083
> 
> 赞同：1
> 
> 时间：2013-03-05T13:31:47.550
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, paperclip

我需要对我的设计用户模型进行一些更改跟踪。我正在尝试 paper_trail，但它在更改电子邮件和还原时会导致问题。我可以从下面的 rails 控制台用几行代码来演示这个问题：

```
1.9.3p385 :048 > u = User.create email: 'aaa@bob.com', password: 'password', username: 'bob'
   (0.2ms)  BEGIN
  User Exists (0.3ms)  SELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'aaa@bob.com' LIMIT 1
  User Exists (0.1ms)  SELECT 1 AS one FROM `users` WHERE `users`.`username` = BINARY 'bob' LIMIT 1
  User Exists (0.1ms)  SELECT 1 AS one FROM `users` WHERE `users`.`email` = BINARY 'aaa@bob.com' LIMIT 1
  User Load (0.2ms)  SELECT `users`.* FROM `users` WHERE `users`.`confirmation_token` = 'zNfBSVLJJ9nF4y5sanVU' LIMIT 1
  SQL (0.2ms)  INSERT INTO `users` (`confirmation_sent_at`, `confirmation_token`, `confirmed_at`, `created_at`, `current_sign_in_at`, `current_sign_in_ip`, `email`, `encrypted_password`, `last_sign_in_at`, `last_sign_in_ip`, `remember_created_at`, `reset_password_sent_at`, `reset_password_token`, `roles_mask`, `sign_in_count`, `unconfirmed_email`, `updated_at`, `username`) VALUES ('2013-03-05 13:15:53', 'zNfBSVLJJ9nF4y5sanVU', NULL, '2013-03-05 13:15:53', NULL, NULL, 'aaa@bob.com', '$2a$10$1BrAH1yqgF3qbgkmpMPl/uE0UY792aB8fvYKLksMnyQsn7sM/dY4O', NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, '2013-03-05 13:15:53', 'bob')
  SQL (0.2ms)  INSERT INTO `versions` (`created_at`, `event`, `item_id`, `item_type`, `object`, `whodunnit`) VALUES ('2013-03-05 13:15:53', 'create', 9, 'User', NULL, NULL)
   (1.3ms)  COMMIT
 => #<User id: 9, username: "bob", email: "aaa@bob.com", encrypted_password: "$2a$10$1BrAH1yqgF3qbgkmpMPl/uE0UY792aB8fvYKLksMnyQs...", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 0, current_sign_in_at: nil, last_sign_in_at: nil, current_sign_in_ip: nil, last_sign_in_ip: nil, created_at: "2013-03-05 13:15:53", updated_at: "2013-03-05 13:15:53", roles_mask: nil, confirmation_token: "zNfBSVLJJ9nF4y5sanVU", confirmed_at: nil, confirmation_sent_at: "2013-03-05 13:15:53", unconfirmed_email: nil>
1.9.3p385 :049 > u.confirm!
   (0.1ms)  BEGIN
   (0.6ms)  UPDATE `users` SET `confirmation_token` = NULL, `confirmed_at` = '2013-03-05 13:16:23', `updated_at` = '2013-03-05 13:16:23' WHERE `users`.`id` = 9
  SQL (0.4ms)  INSERT INTO `versions` (`created_at`, `event`, `item_id`, `item_type`, `object`, `whodunnit`) VALUES ('2013-03-05 13:16:23', 'update', 9, 'User', '---\nusername: bob\nemail: aaa@bob.com\nencrypted_password: !binary |-\n JDJhJDEwJDFCckFIMXlxZ0YzcWJna21wTVBsL3VFMFVZNzkyYUI4ZnZZS0xr\n c01ueVFzbjdzTS9kWTRP\nreset_password_token: \nreset_password_sent_at: \nremember_created_at: \nsign_in_count: 0\ncurrent_sign_in_at: \nlast_sign_in_at: \ncurrent_sign_in_ip: \nlast_sign_in_ip: \ncreated_at: 2013-03-05 13:15:53.205031000 Z\nupdated_at: 2013-03-05 13:15:53.205031000 Z\nroles_mask: \nconfirmation_token: zNfBSVLJJ9nF4y5sanVU\nconfirmed_at: \nconfirmation_sent_at: 2013-03-05 13:15:53.204780000 Z\nunconfirmed_email: \nid: 9\n', NULL)
   (25.4ms)  COMMIT
 => true
1.9.3p385 :050 > u.versions.length
  Version Load (0.5ms)  SELECT `versions`.* FROM `versions` WHERE `versions`.`item_id` = 9 AND `versions`.`item_type` = 'User' ORDER BY created_at ASC, id ASC
 => 2
1.9.3p385 :051 > u.email = 'bbb@bob.com'
 => "bbb@bob.com"
1.9.3p385 :052 > u.save
   (0.1ms)  BEGIN
  User Exists (0.3ms)  SELECT 1 AS one FROM `users` WHERE (`users`.`email` = BINARY 'bbb@bob.com' AND `users`.`id` != 9) LIMIT 1
  User Exists (0.2ms)  SELECT 1 AS one FROM `users` WHERE (`users`.`username` = BINARY 'bob' AND `users`.`id` != 9) LIMIT 1
  User Exists (0.2ms)  SELECT 1 AS one FROM `users` WHERE (`users`.`email` = BINARY 'bbb@bob.com' AND `users`.`id` != 9) LIMIT 1
   (0.2ms)  UPDATE `users` SET `unconfirmed_email` = 'bbb@bob.com', `updated_at` = '2013-03-05 13:17:07' WHERE `users`.`id` = 9
  SQL (0.2ms)  INSERT INTO `versions` (`created_at`, `event`, `item_id`, `item_type`, `object`, `whodunnit`) VALUES ('2013-03-05 13:17:07', 'update', 9, 'User', '---\nusername: bob\nemail: aaa@bob.com\nencrypted_password: !binary |-\n JDJhJDEwJDFCckFIMXlxZ0YzcWJna21wTVBsL3VFMFVZNzkyYUI4ZnZZS0xr\n c01ueVFzbjdzTS9kWTRP\nreset_password_token: \nreset_password_sent_at: \nremember_created_at: \nsign_in_count: 0\ncurrent_sign_in_at: \nlast_sign_in_at: \ncurrent_sign_in_ip: \nlast_sign_in_ip: \ncreated_at: 2013-03-05 13:15:53.205031000 Z\nupdated_at: 2013-03-05 13:16:23.677037000 Z\nroles_mask: \nconfirmation_token: \nconfirmed_at: 2013-03-05 13:16:23.674113000 Z\nconfirmation_sent_at: 2013-03-05 13:15:53.204780000 Z\nunconfirmed_email: \nid: 9\n', NULL)
  User Load (0.2ms)  SELECT `users`.* FROM `users` WHERE `users`.`confirmation_token` = 'KJHQCtu74MqUSAdczu3Q' LIMIT 1
   (11.2ms)  UPDATE `users` SET `unconfirmed_email` = 'bbb@bob.com', `updated_at` = '2013-03-05 13:17:07', `confirmation_token` = 'KJHQCtu74MqUSAdczu3Q', `confirmation_sent_at` = '2013-03-05 13:17:07' WHERE `users`.`id` = 9
  SQL (0.2ms)  INSERT INTO `versions` (`created_at`, `event`, `item_id`, `item_type`, `object`, `whodunnit`) VALUES ('2013-03-05 13:17:07', 'update', 9, 'User', '---\nusername: bob\nemail: aaa@bob.com\nencrypted_password: !binary |-\n JDJhJDEwJDFCckFIMXlxZ0YzcWJna21wTVBsL3VFMFVZNzkyYUI4ZnZZS0xr\n c01ueVFzbjdzTS9kWTRP\nreset_password_token: \nreset_password_sent_at: \nremember_created_at: \nsign_in_count: 0\ncurrent_sign_in_at: \nlast_sign_in_at: \ncurrent_sign_in_ip: \nlast_sign_in_ip: \ncreated_at: 2013-03-05 13:15:53.205031000 Z\nupdated_at: 2013-03-05 13:16:23.677037000 Z\nroles_mask: \nconfirmation_token: \nconfirmed_at: 2013-03-05 13:16:23.674113000 Z\nconfirmation_sent_at: 2013-03-05 13:15:53.204780000 Z\nunconfirmed_email: \nid: 9\n', NULL)
   (0.5ms)  COMMIT
 => true
1.9.3p385 :053 > u.email
 => "aaa@bob.com"
1.9.3p385 :054 > u.unconfirmed_email
 => "bbb@bob.com"
1.9.3p385 :055 > u.confirm!
   (0.1ms)  BEGIN
  User Exists (0.3ms)  SELECT 1 AS one FROM `users` WHERE (`users`.`email` = BINARY 'bbb@bob.com' AND `users`.`id` != 9) LIMIT 1
  User Exists (0.2ms)  SELECT 1 AS one FROM `users` WHERE (`users`.`username` = BINARY 'bob' AND `users`.`id` != 9) LIMIT 1
  User Exists (0.2ms)  SELECT 1 AS one FROM `users` WHERE (`users`.`email` = BINARY 'bbb@bob.com' AND `users`.`id` != 9) LIMIT 1
   (0.3ms)  UPDATE `users` SET `confirmation_token` = NULL, `confirmed_at` = '2013-03-05 13:18:08', `email` = 'bbb@bob.com', `unconfirmed_email` = NULL, `updated_at` = '2013-03-05 13:18:08' WHERE `users`.`id` = 9
  SQL (0.2ms)  INSERT INTO `versions` (`created_at`, `event`, `item_id`, `item_type`, `object`, `whodunnit`) VALUES ('2013-03-05 13:18:08', 'update', 9, 'User', '---\nusername: bob\nemail: aaa@bob.com\nencrypted_password: !binary |-\n JDJhJDEwJDFCckFIMXlxZ0YzcWJna21wTVBsL3VFMFVZNzkyYUI4ZnZZS0xr\n c01ueVFzbjdzTS9kWTRP\nreset_password_token: \nreset_password_sent_at: \nremember_created_at: \nsign_in_count: 0\ncurrent_sign_in_at: \nlast_sign_in_at: \ncurrent_sign_in_ip: \nlast_sign_in_ip: \ncreated_at: 2013-03-05 13:15:53.205031000 Z\nupdated_at: 2013-03-05 13:17:07.788127000 Z\nroles_mask: \nconfirmation_token: KJHQCtu74MqUSAdczu3Q\nconfirmed_at: 2013-03-05 13:16:23.674113000 Z\nconfirmation_sent_at: 2013-03-05 13:17:07.790567000 Z\nunconfirmed_email: bbb@bob.com\nid: 9\n', NULL)
   (15.4ms)  COMMIT
 => true
1.9.3p385 :056 > u.email
 => "bbb@bob.com"
1.9.3p385 :057 > u.versions.last.reify.save # revert to before the email confirm
  User Load (0.3ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 9 LIMIT 1
   (0.1ms)  BEGIN
  User Exists (0.2ms)  SELECT 1 AS one FROM `users` WHERE (`users`.`email` = BINARY 'aaa@bob.com' AND `users`.`id` != 9) LIMIT 1
  User Exists (0.2ms)  SELECT 1 AS one FROM `users` WHERE (`users`.`username` = BINARY 'bob' AND `users`.`id` != 9) LIMIT 1
  User Exists (0.2ms)  SELECT 1 AS one FROM `users` WHERE (`users`.`email` = BINARY 'aaa@bob.com' AND `users`.`id` != 9) LIMIT 1
   (0.3ms)  UPDATE `users` SET `created_at` = '2013-03-05 13:15:53', `updated_at` = '2013-03-05 13:17:07', `confirmation_token` = 'KJHQCtu74MqUSAdczu3Q', `confirmed_at` = '2013-03-05 13:16:23', `confirmation_sent_at` = '2013-03-05 13:17:07', `unconfirmed_email` = 'aaa@bob.com' WHERE `users`.`id` = 9
  SQL (0.2ms)  INSERT INTO `versions` (`created_at`, `event`, `item_id`, `item_type`, `object`, `whodunnit`) VALUES ('2013-03-05 13:20:13', 'update', 9, 'User', '---\nusername: bob\nemail: bbb@bob.com\nencrypted_password: !binary |-\n JDJhJDEwJDFCckFIMXlxZ0YzcWJna21wTVBsL3VFMFVZNzkyYUI4ZnZZS0xr\n c01ueVFzbjdzTS9kWTRP\nreset_password_token: \nreset_password_sent_at: \nremember_created_at: \nsign_in_count: 0\ncurrent_sign_in_at: \nlast_sign_in_at: \ncurrent_sign_in_ip: \nlast_sign_in_ip: \ncreated_at: 2013-03-05 13:15:53.000000000 Z\nupdated_at: 2013-03-05 13:18:08.000000000 Z\nroles_mask: \nconfirmation_token: \nconfirmed_at: 2013-03-05 13:18:08.000000000 Z\nconfirmation_sent_at: 2013-03-05 13:17:07.000000000 Z\nunconfirmed_email: \nid: 9\n', NULL)
  User Load (0.2ms)  SELECT `users`.* FROM `users` WHERE `users`.`confirmation_token` = 'q9Y5ovWigLySxvz7PsaB' LIMIT 1
   (0.2ms)  UPDATE `users` SET `created_at` = '2013-03-05 13:15:53', `updated_at` = '2013-03-05 13:17:07', `confirmed_at` = '2013-03-05 13:16:23', `confirmation_sent_at` = '2013-03-05 13:20:13', `unconfirmed_email` = 'aaa@bob.com', `confirmation_token` = 'q9Y5ovWigLySxvz7PsaB' WHERE `users`.`id` = 9
  SQL (17.4ms)  INSERT INTO `versions` (`created_at`, `event`, `item_id`, `item_type`, `object`, `whodunnit`) VALUES ('2013-03-05 13:20:13', 'update', 9, 'User', '---\nusername: bob\nemail: bbb@bob.com\nencrypted_password: !binary |-\n JDJhJDEwJDFCckFIMXlxZ0YzcWJna21wTVBsL3VFMFVZNzkyYUI4ZnZZS0xr\n c01ueVFzbjdzTS9kWTRP\nreset_password_token: \nreset_password_sent_at: \nremember_created_at: \nsign_in_count: 0\ncurrent_sign_in_at: \nlast_sign_in_at: \ncurrent_sign_in_ip: \nlast_sign_in_ip: \ncreated_at: 2013-03-05 13:15:53.000000000 Z\nupdated_at: 2013-03-05 13:18:08.000000000 Z\nroles_mask: \nconfirmation_token: \nconfirmed_at: 2013-03-05 13:18:08.000000000 Z\nconfirmation_sent_at: 2013-03-05 13:17:07.000000000 Z\nunconfirmed_email: \nid: 9\n', NULL)
   (7.0ms)  COMMIT
 => true 
```

现在，我们已将用户恢复到确认新电子邮件之前的状态：

```
1.9.3p385 :059 > u = User.where(username: 'bob').first
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`username` = 'bob' LIMIT 1
 => #<User id: 9, username: "bob", email: "bbb@bob.com", encrypted_password: "$2a$10$1BrAH1yqgF3qbgkmpMPl/uE0UY792aB8fvYKLksMnyQs...", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 0, current_sign_in_at: nil, last_sign_in_at: nil, current_sign_in_ip: nil, last_sign_in_ip: nil, created_at: "2013-03-05 13:15:53", updated_at: "2013-03-05 13:17:07", roles_mask: nil, confirmation_token: "q9Y5ovWigLySxvz7PsaB", confirmed_at: "2013-03-05 13:16:23", confirmation_sent_at: "2013-03-05 13:20:13", unconfirmed_email: "aaa@bob.com">
1.9.3p385 :060 > u.email
 => "bbb@bob.com"
1.9.3p385 :061 > u.unconfirmed_email
 => "aaa@bob.com" 
```

我们可以看到，这不是之前 User 的状态。我猜这是因为 Devise 检测到电子邮件更改并且设置为新电子邮件的内容被设置为未确认的电子邮件。无论如何我只能在恢复到该对象的先前版本时绕过它？

另外，我注意到 Devise`USER users`为单个电子邮件更新执行 2 个语句（第一个是第二个的子集）。有什么原因吗？有解决办法吗？它为用户添加了一个额外的、不必要的版本记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:04:49.927

我花了更多时间在设计和 paper_trail 上，并相信我已经弄清楚如何手动更改电子邮件并跳过（重新）可确认的选项。

```
# skipping the initial confirmation
user = User.new email: 'foo@bar.com', password: 'secret', username: 'foo'
user.skip_confirmation!
user.save
user.versions.length # => 1

# skip the reconfirmation
user.email = 'bar@baz.com'
user.skip_reconfirmation!
user.save
user.versions.length # => 2

# revert
reverted_user = user.versions.last.reify
reverted_user.live? # => false
reverted_user.skip_reconfirmation!
reverted_user.save
reverted_user.live? # => true
reverted_user.email # => "foo@bar.com" 
```

使`skip_reconfirmation!`保存设置`email`字段直接而不是将其设置为`unconfirmed_email`.

编辑：经过更多的工作，我再次对 paper_trail 正在做什么感到困惑：

```
let(:user) { User.new(username: 'bob', email: 'bob@default.com', password: 'secret101') }  
it "can revert to a previous version" do
  user.save # version 1 (unconfirmed)

  user.confirm! # version 2 (confirmed)

  user.email.should eq 'bob@default.com'
  user.unconfirmed_email.should be_nil

  user.update_attributes email: 'bob@builder.com' # version 3, 4 (un-reconfirmed)
  user.versions.should have(4).items

  user.email.should eq 'bob@default.com'
  user.unconfirmed_email.should eq 'bob@builder.com'

  user.confirm! # version 5 (reconfirmed)
  user.versions.should have(5).items

  user.email.should eq 'bob@builder.com'
  user.unconfirmed_email.should be_nil

  # revert to the first confirmed user
  reverted_user = user.versions[2].reify
  reverted_user.email.should eq 'bob@default.com'
  reverted_user.unconfirmed_email.should be_nil
  reverted_user.should be_confirmed
  reverted_user.should_not be_live
  reverted_user.skip_reconfirmation!
  reverted_user.save!.should be_true
  reverted_user.should be_live # FAILS

  live_user = User.where(username: 'bob').first
  live_user.should be_live
  live_user.should be_confirmed
  live_user.email.should eq 'bob@default.com'
  live_user.unconfirmed_email.should be_nil

  user.email.should eq 'bob@builder.com' # => passes
  user.should_not be_live # => FAILS
end 
```

我不明白为什么用“FAILS”注释的 2 个项目不符合规范

# iphone - ABPeoplePickerNavigationController 隐藏取消按钮

> ID：15225086
> 
> 赞同：9
> 
> 时间：2013-03-05T13:31:51.443
> 
> 标签：iphone, ios, objective-c

我正在继承`ABPeoplePickerNavigationController`，我想知道如何隐藏正确的工具栏项目“ `Cancel`”？

我一直在寻找，但我找不到正确的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-08T05:02:22.773

采用`<UINavigationControllerDelegate>`

`ABPeoplePickerNavigationController alloc`委托给自己之后。

```
peoplePicker.delegate = self; 
```

我们需要重写一个`UINavigationController`的委托方法。

> // 当导航控制器通过视图控制器堆栈的推送、弹出或设置显示新的顶部视图控制器时调用。

```
- (void)navigationController:(UINavigationController*)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated
{
    if([navigationController isKindOfClass:[ABPeoplePickerNavigationController class]])
        navigationController.topViewController.navigationItem.rightBarButtonItem = nil;
} 
```

# sql-server - 带有平面文件源的 SSIS 包导致溢出错误

> ID：15225087
> 
> 赞同：0
> 
> 时间：2013-03-05T13:31:54.587
> 
> 标签：sql-server, ssis

我有一个 SSIS 包，它从具有以下格式的平面文本文件中读取：

```
"Col1";"Col2";"Col3";"Col4";"Col5"
2012-06-18 00:00:00;0001;"99";"311";"0001"
2012-06-18 00:00:00;0002;"99";"311";"0002"
2012-06-18 00:00:00;0003;"99";"311";"0003"
2012-06-18 00:00:00;0004;"99";"311";"0004"
2012-06-18 00:00:00;0005;"99";"311";"0005"
2012-06-18 00:00:00;0006;"99";"311";"0006"
2012-06-18 00:00:00;0007;"99";"311";"0007"
2012-06-18 00:00:00;0008;"99";"311";"0008"
2012-06-18 00:00:00;0009;"99";"311";"0009"
2012-06-18 00:00:00;0010;"99";"311";"0010" 
```

并将数据插入具有相同列的数据库表中。在数据库中，Col2 定义为 DECIMAL(5,4)。该包执行 9 行，然后引发错误。当我检查插入数据库的数据时，前 9 行中 Col2 的值是 1.0000、2.0000、3.0000、...直到 9.0000。在第 10 行，它尝试插入 10000 并导致溢出错误。

我不知道为什么这些值要乘以一千，我当然不想要这种行为。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:48:20.597

在此处查看有关数据类型的 SQL 文档`DECIMAL`：

[http://msdn.microsoft.com/en-us/library/ms187746.aspx](http://msdn.microsoft.com/en-us/library/ms187746.aspx)

社区添加的第一个描述了您的方案，因为您使用的是 (5, 4)，所以小数点左侧只能有一个数字。您的最大精度为 5，其中 4 个在小数点右侧，仅在右侧留下一个位置。从而导致你的溢出

# ios - 为什么我的 iOS 应用程序中的事件没有显示在 Google Analytics（分析）页面中？

> ID：15225090
> 
> 赞同：0
> 
> 时间：2013-03-05T13:32:02.220
> 
> 标签：ios, google-analytics

我使用来自 didFinishLaunchingWithOptions 的代码初始化 GA：

```
[GAI sharedInstance].trackUncaughtExceptions = YES;
[GAI sharedInstance].dispatchInterval = 5;
[GAI sharedInstance].debug = YES;
[[GAI sharedInstance] trackerWithTrackingId:GA_TRACKING_ID]; 
```

之后，我试图发送事件：

```
[[[GAI sharedInstance] defaultTracker] trackEventWithCategory:@"Category" withAction:@"Action" withLabel:@"Label" withValue:@1]; 
```

但没有任何结果。

顺便提一句

```
[[[GAI sharedInstance] defaultTracker] trackView:@"TEST VIEW"]; 
```

完美运行，我在我的 GA 页面上看到了它。我对事件做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:57:33.497

`trackView`&`trackEventWithCategory`已弃用。

试一试`sendEventWithCategory`。

编辑：您使用的是最新版本的 SDK 吗？

# jquery - JQuery UI 选项卡在 IE7 中崩溃

> ID：15225091
> 
> 赞同：0
> 
> 时间：2013-03-05T13:32:03.783
> 
> 标签：jquery, user-interface, tabs, internet-explorer-7

我正在尝试解决以下网站[http://mvc.whclpreview.com/ToolSelect上的问题](http://mvc.whclpreview.com/ToolSelect)

当用户单击其中一个彩色选项卡上的 i 时，会出现一组 UI 选项卡的弹出窗口。

在所有浏览器上一切正常，但在 IE7 上，网站正在崩溃页面。

所有帮助表示赞赏！

谢谢。

# c# - 在单词开头使用 lucene 和通配符

> ID：15225094
> 
> 赞同：1
> 
> 时间：2013-03-05T13:32:18.970
> 
> 标签：c#, lucene, wildcard

我在使用 Lucene.NET 2.9.4 时遇到问题。也许有人可以帮助我。

目前，当用户输入单词***open***时，我会自动将 search therm 更改为*** *open* ***。我已经设置了 QueryParser.SetAllowLeadingWildcard(true); 我知道，这可能很贵...

我的文字是：

“***您可以使用菜单文件/打开来编辑现有文档***”

当我使用***open* ***或***open***作为搜索词时，lucene 会找到文本。

当我使用*** *open* *** lucene 时找不到文本。

为什么不？前导通配符有什么问题？我想在单词的开头、结尾和中间找到搜索词。

我想搜索***开放***和...

*   foo bar => 不匹配
*   打开 foo bar => 是一场比赛
*   testopen foo bar => 是匹配的
*   testopening foo bar => 是匹配的

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:24:41.430

默认情况下，前导通配符被禁用，但是使用 Lucene >=2.1 有一种方法可以启用它。

> QueryParser 默认不支持前导通配符（例如 *ook）。从 Lucene 2.1 开始，可以通过调用 QueryParser.setAllowLeadingWildcard( true ) 来启用它们。请注意，这可能是一项昂贵的操作：它需要完整地扫描索引中的标记列表以查找与模式匹配的标记。

请参阅：[Lucene 常见问题解答](http://wiki.apache.org/lucene-java/LuceneFAQ?highlight=%28leading%29%7C%28wildcard%29#What_wildcard_search_support_is_available_from_Lucene.3F)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:08:51.957

2件事：

1）我会验证[Luke](http://code.google.com/p/luke/)给你的结果与你的查询代码相同。

2）“testopening foo bar”是有效还是失败？

# c - struct *p != C 中的地址

> ID：15225095
> 
> 赞同：-1
> 
> 时间：2013-03-05T13:32:21.727
> 
> 标签：c, pointers, memory-management, struct

我有一个我不明白的错误。

在这段代码中，p 的值应该是程序的地址：

```
static struct ProgramList{
    struct Program *program;
    struct ProgramList *next;
} programs = {NULL, NULL};

struct ProgramList *p = &programs; 
```

......只是它没有。p中的地址是0x0097c130，程序的地址是0x0097c144。

有什么想法该怎么做？

编辑：我在 Microsoft Visual Studio 中工作，我正在使用调试器的监视功能检查地址。我正在检查 p 和 &programs。Edit2：p的地址是0x0040f89c。我知道我正在寻找 p 的值而不是它的地址。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T13:37:25.537

这个：

```
int main(int argc, char **argv) {
  struct P *p = &programs;
  printf("%p %p %p\n", &programs, p, &p);
} 
```

有这个结果：

bf@bf-laptop:~/playground$ ./testprogram

> 0x804a01c 0x804a01c 0xbfe32a4c

所以，`&programs`和`p`是一样的，只是地址**不同**`p`。

基本上，`&programs`是结构所在的地址`programs`。是存储`p`地址的位置。是存储该地址的地址。`programs``&p`

在示意图中：

```
[address]   [name]    [value]
0x804a01c   programs  <programs struct>
0xbfe32a4c  p         0x804a01c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T13:35:52.803

您检查地址的方法不正确，请尝试以下操作：

```
struct ProgramList *p = &programs;
printf("%p %p\n", p, &programs); 
```

你应该看到它们是一样的。我怀疑你正在做类似的事情：

```
printf("%p %p\n", &p, &programs); 
```

这是您的指针的地址（不是它的值）。

**编辑**
根据您的评论，`printf`只要条件正确，您就可以通过它进行检查：

```
if(p == &programs)
    printf("I failed"); // will print "I failed" because the values are the same. 
```

既然您说您使用的是 VS 调试器，我将其掸掉并将代码粘贴在那里，看起来即使在 VS 2010 中它也显示相同的值，所以这不是微软的伎俩：

![在此处输入图像描述](../Images/5279421ec6e78b9d50710174d19c4657.png)

# windows - 从 Win 批处理文件在屏幕外打开程序

> ID：15225107
> 
> 赞同：0
> 
> 时间：2013-03-05T13:33:07.690
> 
> 标签：windows, batch-file

哪些批处理文件命令（如果有）可以启动程序并将其置于屏幕外？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:32:30.357

我想不出任何本机批处理文件命令，但可以使用免费的第三方实用程序[AutoHotKey](http://www.autohotkey.com)。

WinMove 命令文档 ( [http://www.autohotkey.com/docs/commands/WinMove.htm](http://www.autohotkey.com/docs/commands/WinMove.htm) ) 特别指出：

> x 和 y 坐标允许使用负值以支持多显示器系统并允许将窗口完全移出屏幕。

# xamarin.ios - Profile - Mono - Other Root 反向引用

> ID：15225109
> 
> 赞同：1
> 
> 时间：2013-03-05T13:33:21.630
> 
> 标签：xamarin.ios, garbage-collection, profiler, monotouch.dialog, xamarin-studio

处理 Monotouch.Dialog 实例时：

*   自定义`UIBubbleMapElement`元素由 GC 处理；
*   对于每个已处置的元素，`UIBubbleMapCell`GC 也会处置一个自定义元素；
*   但是对于所有已处置的单元格，他们的习惯`UIBubbleMapView`都没有被处置。

为了解决这个问题，我开始使用 Mono Profiler 应用程序。

![Mono 分析器仅显示根引用。](../Images/c8ac7a968aacada6fc3b052fbd195281.png)

**问题是：**查看未处理的`UIBubbleMapView`实例反向引用图像。我怎样才能发布最后一个引用并允许收集我的自定义视图？

最后，这是我的`UIBubbleMapCell`dispose 方法：

```
protected override void Dispose (bool disposing) {

    bubbleMapView = null;

    System.Diagnostics.Debug.WriteLine ("############# {0} 'Dispose' {1}.", this, disposing ? "invoked directly" : "called by the garbage collector finalizer");

    base.Dispose (disposing);
} 
```

这就是我打印到控制台的内容：

```
############# <UIBubblesViewController: 0x152427c0> 'Dispose' called by the garbage collector finalizer.
############# <UIBubbleMapCell: 0x152b6a40; baseClass = UITableViewCell; frame = (0 195; 320 38); autoresize = W; layer = <CALayer: 0x152c65c0>> 'Dispose' called by the garbage collector finalizer.
############# <UIBubbleMapCell: 0x1524aba0; baseClass = UITableViewCell; frame = (0 35; 320 38); autoresize = W; layer = <CALayer: 0x152038f0>> 'Dispose' called by the garbage collector finalizer.
############# <UIBubbleMapCell: 0x17c91710; baseClass = UITableViewCell; frame = (0 233; 320 116); autoresize = W; layer = <CALayer: 0x152cbb80>> 'Dispose' called by the garbage collector finalizer.
############# <UIBubbleMapCell: 0x1520b2c0; baseClass = UITableViewCell; frame = (0 108; 320 52); autoresize = W; layer = <CALayer: 0x17c2fc30>> 'Dispose' called by the garbage collector finalizer. 
```

**编辑：感谢罗尔夫的回答。**

首先，我在 UITableViewCell Dispose 方法中添加了以下代码：

```
bubbleMapView.Dispose ();
bubbleMapView = null; 
```

尽管在控制台内收到下一条消息，但 Mono 分析器仍将对象显示为未收集。与以前相同的图像。

```
 ############# <UIBubbleMapView: 0x154af370; frame = (0 0; 1 1); layer = <CALayer: 0x154af0e0>> 'Dispose' invoked directly. 
```

在仪器应用程序中运行时，我可以看到它的引用计数大于 1。

![可见的内存泄漏。](../Images/5506583c635299ae7e9c4c729849cace.png)

图像中有一个`UIBubbleTextView`实例，但它的行为方式与实例完全相同`UIBubbleMapView`。

我`UIBubbleMapView`持有其他一些观点。这是未检查反向引用时的探查器信息。有一些技巧可以处理这些子视图吗？

![没有反向引用](../Images/d99e328f12e1c8809ff7bad57828800c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:08:43.990

这`<Other Root>`通常是 GCHandle Xamarin.iOS 在内部使用以保持托管对象活动，直到相应的本机对象被释放。打破此链接的一种方法是在对象上调用 Dispose（您没有提到在 UIBubbleMapView 上调用 Dispose），在这种情况下，托管对象将由 GC 收集（当然，除非它被其他托管代码引用）。

很可能还有一些其他本机代码持有对此 UIBubbleMapView 实例的引用，但要准确找出您需要使用 Instruments 中的分配工具分析发生的情况（启用引用计数跟踪以准确跟踪保留对象的代码） .

**更新**

在您对托管对象调用 Dispose 之前，托管对象将保留本机对象 [1]。这意味着如果保留计数 > 1，则该对象还有额外的本机保留（这也意味着一旦您在对象上调用了 Dispose，剩余的引用都是本机的）。请注意，此时托管对象可能会被 GC 收集，因此您无法再使用 HeapShot 跟踪（本机）对象，您必须使用 Instruments。

提示：如果您在 Instruments 中启用右侧栏，您将获得每个保留/释放调用的堆栈跟踪。这对于追踪谁保留了一个对象非常有帮助。

[1] Xamarin.iOS 还将在保留计数达到 1 时释放托管对象的引用（并且 GC 已确定托管对象未被其他托管代码引用）。

# css - Google Chrome 中的 CSS 过渡正在移动绝对定位的 div

> ID：15225113
> 
> 赞同：0
> 
> 时间：2013-03-05T13:32:31.147
> 
> 标签：css, google-chrome

我正在构建一个站点，并已将一些 CSS 转换应用于一些元素。

我注意到在 Google Chrome 中，当您启动转换时，它似乎会对其他“绝对”定位的 div 产生影响。

例如，我已将以下过渡应用于此页面上的社交媒体图标。

[http://bit.ly/WLaMMh](http://bit.ly/WLaMMh)

```
-webkit-transition:all 0.1s ease-out;   
-webkit-transform:scale(1.1,1.1); 
```

当您将鼠标悬停在图标上时，它们的大小会略微增加。出于某种原因，页面顶部的徽标（绝对定位）向左移动了 1 或 2 个像素。

知道为什么会这样吗？

谢谢

布拉德

# spring - 防止在spring webflow中多次提交

> ID：15225117
> 
> 赞同：0
> 
> 时间：2013-03-05T13:33:39.350
> 
> 标签：spring, spring-webflow-2

我们正在使用 webflow，因为我们在提交之前要填写多个表单。在用户提交所有数据库事务时发生的最后一页。所以我希望用户防止多次提交。有没有办法让 webflow 本身优雅地处理这个。优雅地我的意思是它应该重定向或保持用户在同一页面上，这应该在内部防止多次提交的任何操作。请注意我们不能使用 javascript 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T06:19:03.430

如果有一些内置机制来处理这种模式，那就太好了。与此同时，我们在我们的“动作”类中使用一个`synchronized`块、一个[互斥体](https://stackoverflow.com/questions/8408049/springs-webutils-getsessionmutexjavax-servlet-http-httpsession-and-httpsessio)和一些流范围对象或属性来执行此操作。例如：

```
Object mutex = WebUtils.getSessionMutex(
        ((HttpServletRequest) context.getExternalContext().getNativeRequest()).getSession());

synchronized (mutex) {

    if (!model.isComplete()) {
        // complete transaction
        model.setComplete(true);
    }
 }

 // return correct transition 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T17:35:13.060

你可以用 javascript 来做：

```
 <html>
    <head>
    <script language="JavaScript" type="text/javascript">
        var count = 0;
        function submitFunction(eventId){   
            if(count == 0){
                count++;
                document.getElementById("yourForm")._eventId.value = eventId;   
                document.getElementById("yourForm").submit(); 
            }else{
                document.getElementById("requestMsg").style.display = 'block';
            }
        }
    </script>
    <head>
    </head>
    <body>
    <form:form id="yourForm" commandName="yourForm" method="post">
        <table>
            <tr>
                <td>
                    <div id="requestMsg">Request under process....</div>
                </td>
            </tr>
            ....
            <tr>
                <td>
                    <a href="javascript:submitFunction('submit');"><span>Submit</span></a>
                </td>
            </tr>   
        </table>
    </form:form>
    </body> 
```

# c# - Windows 窗体 - 将值从窗体传递到用户控件

> ID：15225119
> 
> 赞同：0
> 
> 时间：2013-03-05T13:33:41.870
> 
> 标签：c#, winforms, user-controls

我有用户控件，包括`OpenFileDialog`和`PictureBox`。我以可编辑的形式使用它，允许用户选择和保存图像以及其他信息。我遇到的问题是我需要设置`openFileDialog.Filter`，而这个过滤器实际上是一个 my 的值，`TextBox`它被命名为`txtCode`。

现在我传递了`txtCode.Text`on`Form_load`事件，但这还不够好，我需要`TextBox`在用户尝试打开`File Dialog`. 因为我将它用作`User Control`：

![在此处输入图像描述](../Images/0c8b3bfeedfe91c5c61ab25e0cabd218.png)

因此我无法捕捉到按钮点击事件。实际上，我只能处理用户控件单击事件，当我单击`File Browse`按钮外部的任何位置时会触发该事件，这会`PictureBox`破坏我处理事件并检查发件人是否为`Button`.

如何在打开时或至少在非常接近的时刻传递`txtCode.Text`值，以便我可以使用最新的值？`OpenFileDialog`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:54:41.953

`background thread`在打开`OpenFIleDialog`. 在后台线程中，搜索可用的打开文件对话框并设置文件名的值。您也可以自动单击打开按钮。有可以在 .net 中使用的 windows API 来执行此操作。

FindWindow 示例：

```
**Calling Code:**

Thread thread2 = new Thread(new ThreadStart(MyClass.SelectFile));
thread2.IsBackground = true;
thread = thread2;
thread.Start();

**Class Code:**

[DllImport("user32.dll", SetLastError=true)]
private static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

[DllImport("user32.dll", EntryPoint="FindWindow", SetLastError=true)]
private static extern IntPtr FindWindowByCaption(IntPtr ZeroOnly, string lpWindowName);

[DllImport("user32.dll", CharSet=CharSet.Auto, SetLastError=true)]
private static extern IntPtr FindWindowEx(IntPtr parentHandle, IntPtr childAfter, string lclassName, string windowTitle);

public void SelectFile(string filename)
{
    Thread.Sleep(0x3e8);
    IntPtr zero = IntPtr.Zero;
    IntPtr parentHandle = IntPtr.Zero;
    IntPtr child = new WinAPI(Process.GetCurrentProcess().MainWindowHandle, "#32770").GetChild();
    while (child == IntPtr.Zero)
    {
        Application.DoEvents();
    }
    if (child != IntPtr.Zero)
    {
        zero = child;
        parentHandle = FindWindowEx(zero, IntPtr.Zero, "ComboBoxEx32", "");
        if (parentHandle != IntPtr.Zero)
        {
            parentHandle = FindWindowEx(parentHandle, IntPtr.Zero, "ComboBox", "");
            if (parentHandle != IntPtr.Zero)
            {
                parentHandle = FindWindowEx(parentHandle, IntPtr.Zero, "Edit", "");
                if (parentHandle != IntPtr.Zero)
                {
                    SendMessage(parentHandle, 12, IntPtr.Zero, fileName);
                    parentHandle = FindWindowEx(zero, IntPtr.Zero, "Button", "&Open");
                    if (!(parentHandle == IntPtr.Zero))
                    {
                        SendMessage(parentHandle, 0xf5, IntPtr.Zero, "");
                    }
                }
            }
        }
    }
    Thread.Sleep(0x7d0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:39:16.027

您可以`txtCode.Text`在表单中的任何位置使用。不仅在您的`Form_Load`处理程序中。只需尝试在需要的地方使用它。

# android - 自动上传 Android 应用程序

> ID：15225125
> 
> 赞同：1
> 
> 时间：2013-03-05T13:33:49.900
> 
> 标签：android, google-play

我只有一个简单的问题：

是否可以将 Android 应用程序 (.Apk) 直接上传到 Google Play？通过命令行还是 Google API？

这是因为我们正在通过“构建器”构建 Android 应用程序，我们希望立即将它们上传到 Google Play，而不是去 Google Play 本身并在那里上传 .apk。

**编辑：**就像下面的答案一样，现在有一个 API 可以做到这一点：[https ://developers.google.com/android-publisher/](https://developers.google.com/android-publisher/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:37:06.163

没有 Google 提供或批准的 API 用于自动上传到 Google Play。

理论上，您可以编写一个为您登录的脚本，并将内容发送到 Google，但 AFAIK 还没有人这样做，所以您必须自己做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-31T04:20:23.640

现在有一个api：

[https://developers.google.com/android-publisher/](https://developers.google.com/android-publisher/)

它只允许上传现有的应用程序。不是创造新的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-28T15:21:48.973

您现在可以使用[`gradle-play-publisher`](https://github.com/Triple-T/gradle-play-publisher)gradle 插件自动上传到 Google Play 商店。

# ios - 核心数据是否会延迟刷新数据模型？

> ID：15225138
> 
> 赞同：2
> 
> 时间：2013-03-05T13:34:33.007
> 
> 标签：ios, core-data, fetched-property

我遇到了一个问题，即当我尝试修改它时，核心数据在我的谓词中没有看到任何变化。我花了很多时间试图找出为什么我获取的属性没有向我显示正确的结果（请参见下面的代码），最后在又一次喝咖啡休息后，我看到（突然！）我获取的属性开始正常工作。更新数据模型是否有一些延迟？还是我应该更频繁地休息？

```
-(void)printData{
NSFetchRequest *request = [[NSFetchRequest alloc] initWithEntityName:@"Empl"];
NSError *error;
NSArray *empls = [[self managedObjectContext] executeFetchRequest:request error:&error];

for (NSManagedObject *emplMO in empls){

    NSString *output = [NSString stringWithFormat:@"%@ \n", [emplMO valueForKey:@"emplName"]];
    [self.managedObjectContext refreshObject:emplMO mergeChanges:YES];
    NSArray *allChairs = [emplMO valueForKey:@"allChairs"];
    output = [output stringByAppendingFormat:@" has %d chairs \n", allChairs.count];
    NSLog(@"%@", output);
}
} 
```

![这是我的模型。](../Images/15a499ccee8b90108b4f3471c6b76801.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T15:34:18.930

您是否在整个应用程序中使用单个 NSManagedObjectContext ？

来自苹果开发者[参考：](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html)

> NSManagedObjectContext 的实例表示应用程序中的单个“对象空间”或便笺簿......通过上下文，您可以从持久存储中检索或“获取”对象，对这些对象进行更改，然后丢弃更改或- 再次通过上下文 - 将它们提交回持久存储。上下文负责监视其对象的变化并维护一个撤消管理器，因此您可以对撤消和重做进行更细粒度的控制。

听起来如果您有两个上下文，则需要将 contextA 中更改的对象持久化以存储并再次退出，以便 contextB 看到它们...... UIManagedDocument 会自动保存。如果您使用 2 个或更多上下文，您可能会在核心数据更新/获取中看到轻微的延迟/间隙。

# java - URLClassLoader 无法在 Linux 上加载依赖项

> ID：15225139
> 
> 赞同：2
> 
> 时间：2013-03-05T13:34:34.880
> 
> 标签：java, classloader, urlclassloader

我正在使用 URLClassLoader 加载类。

尽管我传递的文件的名称已成功加载，但对于它所引用的类，则会为这些类抛出 NoClassDefFoundError。这两个类都是不同 jar 文件的一部分。

更奇怪的是，同一段代码在 Windows 上运行良好，但在 Linux 上却抛出错误。

这是我正在使用的代码：

```
package com.pb.spectrum.lim.upgrade.common;

 import java.io.File;
 import java.io.FilenameFilter;
 import java.lang.reflect.InvocationTargetException;
 import java.lang.reflect.Method;
 import java.net.MalformedURLException;
 import java.net.URL;
 import java.net.URLClassLoader;
 import java.util.ArrayList;
 import java.util.List;

 public class ClassInvoker {

public static void main(String[] args) throws MalformedURLException, ClassNotFoundException, NoSuchMethodException, SecurityException, IllegalAccessException, IllegalArgumentException, InvocationTargetException {
    if(args.length < 2){
        throw new IllegalArgumentException("First argument should be Class name. Second argument should be jar's directory. Rest of the arguments passed to main method of invoked class.");
    }

    File jarsDir = new File(args[1]);
    if(!jarsDir.isDirectory()){
        throw new IllegalArgumentException("Second argument should point to jar's directory.");
    }

    URLClassLoader urlClassLoader = null;

    List<URL> urls = new ArrayList<URL>();
    File[] files = jarsDir.listFiles(new FilenameFilter() {
        @Override
        public boolean accept(File dir, String name) {
            return name.toLowerCase().endsWith(".jar");
        }
    });

    for(File jarFile : files){
        urls.add(jarFile.toURI().toURL());
    }
    urlClassLoader = new URLClassLoader(urls.toArray(new URL[urls.size()]));

    Thread.currentThread().setContextClassLoader(urlClassLoader);

    Object[] params = new String[args.length-2];

    // First 2 arguments are not required for class to be invoked.
    System.arraycopy(args, 2, params, 0, params.length);

    for(Object string : params){
        System.out.println("Param ---->" + (String)string);
    }

    Class clazz = urlClassLoader.loadClass(args[0]);
    Method method = clazz.getMethod("main", new Class[]{String[].class});
    method.invoke(null, new Object[] {params});
}
    } 
```

现在，如果我将要加载的类传递为 ABMyClass1，它会成功加载，但无法加载单独的 jar 文件中的 ABMyClass2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T02:01:45.190

那么我的问题已经解决了，但我不确定这个问题的原因。

总结一下：

> 正在加载的 jar 序列导致了这个问题。在我的特殊情况下，在将列表提供给 URLClassLoader 之前对 jar 的顺序进行排序可以解决问题。

但它提出了另一个问题

这是详细信息

> 我有两个具有相同包结构的 jar 文件，例如 AB，但其中只有一个具有 MyClass2。现在问题的原因是在具有 MyClass2 的 jar 之前加载了没有 MyClass2 的 jar，并且不知何故（我不知道如何或为什么）URLClassLoader 看到第一个 jar 具有包 AB 但没有 MyClass2 类并抛出 NoClassDefFoundError。排序后，首先加载具有 MyClass2 的 jar，ClassLoader 可以定位该类。

我不确定这种行为。我自己对此感到困惑。

# jquery - $compile(html)(scope) 忽略我手动创建的范围

> ID：15225141
> 
> 赞同：4
> 
> 时间：2013-03-05T13:34:53.717
> 
> 标签：jquery, angularjs

这是我的代码：

HTML：

```
<div id="container" ng-controller="MyCtrl">    {{model.name}}   </div> 
```

JavaScript：

```
var app=angular.module('myApp', []);

var $injector =angular.injector(['ng']); 
$injector.invoke(function($compile, $rootScope) {
    var html = '<div ng-controller="MyCtrl1">{{model.name}}</div>'

    var scope = $rootScope.$new();

    scope.model = {name:'MyCtrl1'};
    //alert(scope.model.name);
    var e3 = $compile(html)(scope);

    $('#container').append(e3[0]);
});

function MyCtrl($scope) {
    $scope.model={};
    $scope.model.name = 'MyCtrl';

};
function MyCtrl1($scope) {   
    //alert('MyCtrl1');
}; 
```

[这是一个显示行为的小提琴](http://jsfiddle.net/alehro/Bfwgg/2/)

如您所见，它呈现了两个“MyCtrl”字符串。即角度忽略了我手动创建的范围对象。

问题是：如何`$compile`使用我创建的范围？

* * *

更新：丑陋的解决方法：

再次调用`$compile`应用模型后：

```
angular.element(e3[0]).scope().$apply(function(scope) {
    scope.model = {name:'MyCtrl1'};
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T16:33:33.780

ng-app 创建一个注入器，然后您将创建另一个注入器。这可能不是你想要的。我将您的大部分代码移到了[run()](http://docs.angularjs.org/api/angular.Module#run)方法中，其中注入了 $compile 服务和 $rootScope：

```
app.run(function($compile, $rootScope) {
    var html = '<div ng-controller="MyCtrl1">{{model.name}}</div>'

    var scope = $rootScope.$new();

    scope.model = {name:'MyCtrl1'};
    //alert(scope.model.name);
    var e3 = $compile(html)(scope);
    scope.$apply();

    $('#container').append(e3[0]);
}); 
```

[小提琴](http://jsfiddle.net/mrajcok/Fyhau/)

`scope.$apply()`是必需的，但我不知道为什么。希望其他人可以向我们解释。

# javascript - javascript（或 Django/Python）：检测是否触摸屏

> ID：15225142
> 
> 赞同：1
> 
> 时间：2013-03-05T13:34:53.790
> 
> 标签：javascript, django

如何检测用户是否在使用触摸屏？这可以在 Python/Django 或 javascript 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:39:22.807

```
function is_touch_device() {
  return !!('ontouchstart' in window)
      || !!('onmsgesturechange' in window);
}; 
```

# python - 如何在多步 map-reduce 程序中运行最终的“打印”语句一次？

> ID：15225146
> 
> 赞同：1
> 
> 时间：2013-03-05T13:35:05.563
> 
> 标签：python, hadoop, mapreduce, collaborative-filtering, mrjob

我基本上是在尝试通过在 Hadoop 上扩展来实现推荐系统。

在第一步中，我试图计算输入文件中每对项目之间的相似性。如果我将它简单地存储为

{项目 A，项目 B，相似性}

输出文件大小变得非常非常大（对于 60kb 输入，我得到的输出文件大小为 6mb）。

因此，我认为是否最好将结果存储在python dict中并在整个map reduce程序结束后仅打印一次dict。我这样做不成功请帮助我。

我的python代码是：

```
#!/usr/bin/env python
from mrjob.job import MRJob
from math import sqrt

from itertools import combinations

PRIOR_COUNT = 10

PRIOR_CORRELATION = 0

    prefs={}

    def correlation(size, dot_product, rating_sum, \
        rating2sum, rating_norm_squared, rating2_norm_squared):
'''
  The correlation between two vectors A, B is
      [n * dotProduct(A, B) - sum(A) * sum(B)] /
    sqrt{ [n * norm(A)^2 - sum(A)^2] [n * norm(B)^2 - sum(B)^2] }

'''
numerator = size * dot_product - rating_sum * rating2sum
denominator = sqrt(size * rating_norm_squared - rating_sum * rating_sum) * \
                sqrt(size * rating2_norm_squared - rating2sum * rating2sum)

return (numerator / (float(denominator))) if denominator else 0.0

def regularized_correlation(size, dot_product, rating_sum, \
        rating2sum, rating_norm_squared, rating2_norm_squared,
        virtual_cont, prior_correlation):
    '''
    The Regularized Correlation between two vectors A, B

    RegularizedCorrelation = w * ActualCorrelation + (1 - w) * PriorCorrelation
        where w = # actualPairs / (# actualPairs + # virtualPairs).
    '''
    unregularizedCorrelation = correlation(size, dot_product, rating_sum, \
            rating2sum, rating_norm_squared, rating2_norm_squared)

    w = size / float(size + virtual_cont)

    return w * unregularizedCorrelation + (1.0 - w) * prior_correlation

class SemicolonValueProtocol(object):

  # don't need to implement read() since we aren't using it

  def write(self, key, values):
      return ';'.join(str(v) for v in values)

class BooksSimilarities(MRJob):

#OUTPUT_PROTOCOL = SemicolonValueProtocol

def steps(self):
    return [
        self.mr(mapper=self.group_by_user_rating,
                reducer=self.count_ratings_users_freq),
        self.mr(mapper=self.pairwise_items,
                reducer=self.calculate_similarity),
        self.mr(mapper=self.calculate_ranking,
                reducer=self.top_similar_items)]

def group_by_user_rating(self, key, line):
    '''
    Emit the user_id and group by their ratings (item and rating)

    17  70,3
    35  21,1
    49  19,2
    49  21,1
    49  70,4
    87  19,1
    87  21,2
    98  19,2

    '''
    line=line.replace("\"","");
    user_id, item_id, rating = line.split(',')

    yield  user_id, (item_id, float(rating))

def count_ratings_users_freq(self, user_id, values):
    '''
    For each user, emit a row containing their "postings"
    (item,rating pairs)
    Also emit user rating sum and count for use later steps.

    17    1,3,(70,3)
    35    1,1,(21,1)
    49    3,7,(19,2 21,1 70,4)
    87    2,3,(19,1 21,2)
    98    1,2,(19,2)

    '''
    item_count = 0
    item_sum = 0
    final = []
    for item_id, rating in values:
        item_count += 1
        item_sum += rating
        final.append((item_id, rating))

    yield user_id, (item_count, item_sum, final)

def pairwise_items(self, user_id, values):
    '''
    The output drops the user from the key entirely, instead it emits
    the pair of items as the key:

    19,21  2,1
    19,70  2,4
    21,70  1,4
    19,21  1,2

    '''
    item_count, item_sum, ratings = values
    for item1, item2 in combinations(ratings, 2):
        yield (item1[0], item2[0]), (item1[1], item2[1])

def calculate_similarity(self, pair_key, lines):
    '''
    Sum components of each corating pair across all users who rated both
    item x and item y, then calculate pairwise pearson similarity and
    corating counts.  The similarities are normalized to the [0,1] scale
    because we do a numerical sort.

    19,21   0.4,2
    21,19   0.4,2
    19,70   0.6,1
    70,19   0.6,1
    21,70   0.1,1
    70,21   0.1,1

    '''
    sum_xx, sum_xy, sum_yy, sum_x, sum_y, n = (0.0, 0.0, 0.0, 0.0, 0.0, 0)
    item_pair, co_ratings = pair_key, lines
    item_xname, item_yname = item_pair
    for item_x, item_y in lines:
        sum_xy += item_x * item_y
        sum_y += item_y
        sum_x += item_x
        sum_xx += item_x * item_x
        sum_yy += item_y * item_y
        n += 1

    reg_corr_sim = regularized_correlation(n, sum_xy, sum_x, \
            sum_y, sum_xx, sum_yy, PRIOR_COUNT, PRIOR_CORRELATION)

    yield (item_xname, item_yname), (reg_corr_sim, n)

def calculate_ranking(self, item_keys, values):
    '''
    Emit items with similarity in key for ranking:

    19,0.4    70,1
    19,0.6    21,2
    21,0.6    19,2
    21,0.9    70,1
    70,0.4    19,1
    70,0.9    21,1

    '''
    reg_corr_sim, n = values
    item_x, item_y = item_keys
    if int(n) > 0:
        yield (item_x, reg_corr_sim),(item_y, n)

def top_similar_items(self, key_sim, similar_ns):
    '''
    For each item emit K closest items in comma separated file:

    De La Soul;A Tribe Called Quest;0.6;1
    De La Soul;2Pac;0.4;2

    '''
    item_x, reg_corr_sim = key_sim
    for item_y, n in similar_ns:
           #yield None, (item_x, item_y, reg_corr_sim, n)
       prefs.setdefault(item_x,{})
       prefs[item_x][item_y] = float(reg_corr_sim)
       prefs.setdefault(item_y,{})
       prefs[item_y][item_x] = float(reg_corr_sim) 
    print "exiting"

if __name__ == '__main__':
   BooksSimilarities.run() 
```

所以执行后我想要什么

python thisfile.py < input.csv -r hadoop > output.txt

是一个相对较小的输出文件，没有重复和一个字典。

简而言之，

目前这个程序打印**退出**n 次，但我希望它只打印一次。

除此之外，还有任何更好的方法可以通过以更好的方式扩展 hadoop 来实现协同过滤。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:37:47.083

你只有保证相同key的值会去同一个reducer。因此，如果您在集群上运行多个减速器，则工作会被划分，并且当减速器运行以完成所有键上的任务时，您将有许多“退出”。

尝试在本地运行并验证它是否工作：python thisfile.py < input.csv > output.txt

也许您可以在您的 steps() 中定义一个“reducer_final”，以获取所有最后一步减速器输出并按照您的需要进行管理。

检查： http: [//pythonhosted.org/mrjob/job.html#mrjob.job.MRJob.steps](http://pythonhosted.org/mrjob/job.html#mrjob.job.MRJob.steps)

亲切的问候，

# c# - 监视sql数据库中的表新记录

> ID：15225147
> 
> 赞同：12
> 
> 时间：2013-03-05T13:35:09.073
> 
> 标签：c#, sql-server, entity-framework, .net-4.5

我在 Windows 应用程序中使用 EF，我希望我的应用程序在某个表中插入新记录时执行一些任务“这些新记录将由使用相同数据库的网站插入”
我的问题是如何查看此表更改并在新记录出现时收到通知，在这种情况下 EF 可以帮助我吗？

**更新：** 我使用了*SqlDependency 类*并在数据库中使用了它

`ALTER DATABASE UrDb SET ENABLE_BROKER`

并且还在数据库[http://screencast.com/t/vrOjJbA1y](http://screencast.com/t/vrOjJbA1y)中创建了一个服务和一个队列，但我从未从我的 Windows 应用程序中收到通知。
另外，当我在 sql server 中打开队列时，它总是为空[http://screencast.com/t/05UPDIwC8ck](http://screencast.com/t/05UPDIwC8ck) 接缝表明有问题但我不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T10:13:33.470

以下是我的建议：

1.  如果您能够将重复表添加到数据库，那么这是一个解决方案。你有你的**table1**和**table2**（**table1**的副本）。当您向**table1**插入新记录时，您可以将它们与**table2**中的现有记录进行比较，从而找到新记录。比较后，您应该将所有新记录添加到**table2**。这是某种同步。这可以通过存储过程或以编程方式进行。

2.  您不需要任何其他表。您可以将所有数据存储在您的应用缓存中，并在一段时间内（例如 5 秒）检查是否有任何新事件不存在于您的缓存中。如果它们不存在 - 在您的日志或其他地方通知它们并将它们添加到缓存中。但是如果记录太多，处理时间会大大增加+内存消耗。

3.  如果您能够更改数据库，那么您可以在您的表中添加类似“isNew”列的内容。当新数据来自网站时，该列将是“真”，您的程序可以跟踪这一点，并在处理后为每条记录将此标志设置为假。（如果网站不能设置这个标志，你可以使用**SQL TRIGGER AFTER INSERT**将标志值设置为true。如果是第三方网站，网站甚至不知道这个功能，或者你不想在那里改变任何东西）

4.  这是关于 EF 更改跟踪的文章：http: [//blogs.msdn.com/b/adonet/archive/2009/06/10/poco-in-the-entity-framework-part-3-change-tracking-with- poco.aspx](http://blogs.msdn.com/b/adonet/archive/2009/06/10/poco-in-the-entity-framework-part-3-change-tracking-with-poco.aspx)

但问题是您应该通过 EF 检查整个表是否存在会影响您的应用程序性能的更改。

以下是有关 SQL Server 端更改跟踪和实现概念的有用信息： [http ://www.mssqltips.com/sqlservertip/1819/using-change-tracking-in-sql-server-2008/](http://www.mssqltips.com/sqlservertip/1819/using-change-tracking-in-sql-server-2008/) [http://msdn.microsoft。 com/en-us/library/bb933994.aspx](http://msdn.microsoft.com/en-us/library/bb933994.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T22:43:07.367

您可以为表创建 SQLCLR 触发器 FOR INSERT。此触发器可以调用您可以在应用程序中托管的简单 WCF 服务。带有触发器的程序集需要在 SQL Server 中注册。看[这里](http://msdn.microsoft.com/en-us/library/938d9dz2%28v=vs.80%29.aspx)怎么做。

另一种方法（最简单的方法）：使用普通的 SQL 触发器来监视表的 INSERT 并使用类似“copy nul /Y some_file_with_path.txt”的命令执行 xp_cmdshell 您的应用程序可以使用 FileSystemWatcher 类来监视对同一文件的修改。将过滤器配置为仅监视对该特定文件的最后访问。看[这里](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.notifyfilter.aspx)怎么做。xp_cmdshell 的代理帐户需要在 SQL Server 上定义。

不久前我遇到了同样的问题。我也无法让 SQl Notifications 工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T01:29:20.670

具体参见*变更数据捕获*`sys.fn_cdc_get_max_lsn`。这将创造一个寻找变化的地方。

然后，编写一个存储过程来轮询该视图。让它捕获先前的值，并循环寻找`WAITFOR`延迟适合您的数据到达率的变化。

当程序注意到最高 LSN 发生变化时，让它做一些事情。它可以选择行。它也可以只打印一条消息。然后它返回其投票站（就像它一样）。

打印一条消息可能听起来很奇怪，而且不知道关于 EF 的第一件事（并且对这些事情严重过敏）我不知道它是否会对你有所帮助。但原则上它应该是因为存在底层通信。

从您的应用程序中调用该过程。当过程执行 T-SQL `PRINT`（或`RAISERROR`）语句时，将向客户端发送一条消息。我不能说它在 EF 中的位置或您将如何处理它，但它应该*放在*有用的地方，因为在一般情况下它会显示给用户。在您的情况下，您的应用程序将寻找特定的消息编号或文本，并做出相应的反应。（当然，您希望正常处理其他消息。）

这种方法非常便宜且非常简单。它几乎不使用服务器资源，仅在发生更改时向客户端发送消息，不使用额外的表，几乎不依赖用户编写的代码，并且可以通过查看`sysprocesses`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T14:03:13.377

另一个建议是在覆盖 SaveChanges 并执行自定义逻辑的地方使用挂钩。

[https://stackoverflow.com/a/7654423/989679](https://stackoverflow.com/a/7654423/989679) , [https://github.com/kmckelvin/EFHooks/blob/master/EFHooks/HookedDbContext.cs](https://github.com/kmckelvin/EFHooks/blob/master/EFHooks/HookedDbContext.cs) [http://thedatafarm.com/blog/data-access/objectcontext -savechanges-is-now-virtual-overridable-in-ef4/](http://thedatafarm.com/blog/data-access/objectcontext-savechanges-is-now-virtual-overridable-in-ef4/)（[存档](https://web.archive.org/web/20130922200958/http://thedatafarm.com/blog/data-access/objectcontext-savechanges-is-now-virtual-overridable-in-ef4/)）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-13T20:20:23.833

存储网站插入的交易信息的交易表怎么样。

在插入表上，您为插入创建了一个触发器，该触发器将新记录放入事务表中。

然后你只需要你的windows应用程序定期检查事务表，当它发现有什么事情做你想做的，然后清除事务表上的记录。

它不是很优雅，但它可能会起作用。我不熟悉 EF，我不知道它是否有更好的解决方案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-11T12:02:59.410

或者使用 SqlTableDependency：[https](https://tabledependency.codeplex.com/) ://tabledependency.codeplex.com/ 。这个开源组件向您发送一个事件，其中包含有关表中新行的记录详细信息

# javascript - 另一个框架上的复选框计数

> ID：15225149
> 
> 赞同：1
> 
> 时间：2013-03-05T13:35:15.993
> 
> 标签：javascript, html

我在 3 个框架集中的一个框架内有 10 个复选框。

```
<frameset cols="16%,68%,16%">
    <frame src="fish.html" name="bodyleft" noresize scrolling=no>
    <frame src="fish1.html" name="bodymid" noresize scrolling=no>
    <frame src="fish2.html" name="bodyright" noresize scrolling=no>
    </frameset> 
```

fish1.html 上的代码

```
<script type="text/javascript">
  function countCheckboxes ( ) 
  {
    var form = document.getElementById('testForm');
    var count = 0;
    for(var n=0;n < form.length;n++)
    {
      if(form[n].name == 'items[]' && form[n].checked)
      {
        count++;
      }
    }
    document.getElementById('checkCount').innerHTML = count;
  }
  window.onload = countCheckboxes;
</script> 
```

是否可以计算fish2.html而不是fish1上选中复选框的数量？我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:46:46.963

尝试这样的事情（尚未测试）：

```
var frame2 = document.getElementById('bodyright');
window.onload = countCheckboxes(frame2);
function countCheckboxes (frame) 
{
   var forms = frame.document.getElementsByTagName('form');
   //...
} 
```

# jquery - fancybox 2.1.4 自动播放选项无法正常工作

> ID：15225154
> 
> 赞同：0
> 
> 时间：2013-03-05T13:35:42.277
> 
> 标签：jquery, fancybox, fancybox-2, autoplay

[我从http://fancyapps.com/fancybox/#license](http://fancyapps.com/fancybox/#license)下载了 fancybox 源代码示例。请看以下简短的脚本：

`

### 缩略图助手

```
 <a class="fancybox_thumbs" data-fancybox-group="thumb" href="1_b.jpg"><img src="1_s.jpg" alt="" /></a>

    <a class="fancybox_thumbs" data-fancybox-group="thumb" href="2_b.jpg"><img src="2_s.jpg" alt="" /></a>

    <a class="fancybox_thumbs" data-fancybox-group="thumb" href="3_b.jpg"><img src="3_s.jpg" alt="" /></a> 
```

` 下面是脚本

`$('.fancybox-thumbs').fancybox({ autoPlay: true});` `$.fancybox.open($(".fancybox_thumbs").get(), fancyboxOptions);`

当页面加载时，fancybox 会打开叠加层，幻灯片自动从第一张图像切换到第二张图像，然后它就不再工作了。

我做了一些研究和谷歌。我看到网站[http://jsfiddle.net/GjNnj/3/](http://jsfiddle.net/GjNnj/3/)运行良好。我检查了它，我看不出有什么问题，相同的脚本，相同的版本fancybox。

任何帮助表示赞赏，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:35:31.457

您很可能正在使用 jQuery v1.9+，并且 jQuery v1.9+ 存在问题，该问题`buttons helper`已在**[此处](https://github.com/fancyapps/fancyBox/issues/532)**报告……但尚未解决。

您在问题中提到的 JSFIDDLE 使用的是*jQuery v1.8.3*，所以这就是工作的原因。

您的解决方法是在修复错误后回滚到 jQuery v1.8.3。

PS。实际上是`buttons helper`管理幻灯片*播放/自动播放*选项的 js 文件，而不是`thumbnail helper`;)

# android - 如何使用手机内置的其他应用程序以 100 kB 块读取我的应用程序中的 pdf

> ID：15225158
> 
> 赞同：0
> 
> 时间：2013-03-05T13:35:56.287
> 
> 标签：android, pdf

我正在构建一个需要读取加密 pdf 的应用程序。我将 pdf 解密 100kB 块。起初 100kB 将被解密。此块必须由手机内置的另一个 pdf 阅读器应用程序读取。

读取这 100 kB 后，将解密另外 100 kB 数据。此块将由 pdf 阅读器应用程序读取。之前的 100 KB 数据副本将被加密。我能做些什么来实现这个目标？

目前，我有以下代码，其中无法通过 100 kb 块读取另一个应用程序的 pdf。

```
Uri path_sultan = Uri.fromFile(file); 
        Intent intent = new Intent(Intent.ACTION_VIEW); 
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
        String ext =GetFileExtension(file.getAbsolutePath());

        if(ext.equalsIgnoreCase("pdf")  )
            ext = "application/" +ext.toLowerCase() ;
        else if( ext.equalsIgnoreCase("epub") )
            ext = "application/" +ext.toLowerCase();
        intent.setDataAndType(path_sultan,ext); 

        try 
        { 
            startActivity(intent); 
        }  
        catch (ActivityNotFoundException e) 
        { 
           // Toast.makeText(this,"No Application Available to View PDF",Toast.LENGTH_SHORT).show(); 
        }       
    } 
```

伙计们，你能在这方面帮助我吗？我非常需要你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:49:57.490

> 我能做些什么来实现这个目标？

很有可能从头开始编写您自己的 PDF 渲染器。PDF 查看器需要访问整个流，按照他们的选择进行读取，而不是基于任意的“100 kB”分割线。

如果您愿意对“100 kB”部分进行微调，并根据查看者的需要简单地动态解密数据，您可以使用 a `ContentProvider`。`openFile()`使用管道实现`ParcelFileDescriptor`，以允许查看器从您写入的流中读取，您正在写入解密数据。

[这是一个](https://github.com/commonsguy/cw-omnibus/tree/master/ContentProvider/Pipe)演示此技术的示例应用程序，减去实际解密。[这是同一示例的另一个版本](https://github.com/commonsguy/cw-omnibus/tree/master/ContentProvider/GrantUriPermissions)`Uri`，通过在我启动它们的活动时授予权限，进一步限制对我指定的应用程序的访问。

# java - ServletContextListener 错误

> ID：15225160
> 
> 赞同：0
> 
> 时间：2013-03-05T13:36:01.090
> 
> 标签：java, servlets, jdbc

嗨，我有下面的 servletcontextlistener 代码。

```
 import javax.servlet.ServletContext;
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;
import javax.servlet.http.HttpServlet;

public class ContextListener extends HttpServlet implements ServletContextListener {

    @Override
    public void contextInitialized(ServletContextEvent sce) {
        ServletContext context=sce.getServletContext();
        String dburl=context.getInitParameter("dbUrl");
        String dbusername=context.getInitParameter("dbUserName");
        String dbpassword=context.getInitParameter("dbPassword");

        DBConnector.createConnection(dburl, dbusername, dbpassword);
        System.out.println("Connection Establised.........");
    }

    public void contextDestroyed(ServletContextEvent sce) {
        DBConnector.closeConnection();
    }

} 
```

和一个 DBConnector 类如下。

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class DBConnector {

    private static Connection con;

    public static void createConnection(String dbUrl,String dbusername,String dbPassword){
        try {
            Class.forName("oracle.jdbc.driver.OracleDriver");
            con=DriverManager.getConnection(dbUrl, dbusername, dbPassword);     
        } catch (Exception ex) {
            ex.printStackTrace();
        }    
    }

    public static Connection getConnection(){
        return con;
    }

    public static void closeConnection(){
        if(con!=null){
            try {
                con.close();
            } catch (SQLException ex) {
                 ex.printStackTrace();
            }
        }

    }
} 
```

在 web.xml 我声明如下

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
    <param-name>dbUrl</param-name>
    <param-value>jdbc:oracle:thin:@localhost:1521:XE</param-value>
</context-param>
<context-param>
    <param-name>dbUserName</param-name>
    <param-value>dbUserName</param-value>
</context-param>
<context-param>
    <param-name>dbPassword</param-name>
    <param-value>dbPassword</param-value>
</context-param>
<listener>
    <listener-class>Topical.ContextListener</listener-class>
</listener>

    <servlet>
        <servlet-name>Login</servlet-name>
        <servlet-class>Login</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>Login</servlet-name>
        <url-pattern>/Login</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
</web-app> 
```

在这里，当我尝试运行 ContextListener.java 时，我抛出了一个错误，提示“类'上下文侦听器'既没有主要方法，也没有在 web.xml 中指定 servlet”。

我如何摆脱这个问题。

谢谢

# iphone - 将文件从网站同步到 iPhone

> ID：15225162
> 
> 赞同：-1
> 
> 时间：2013-03-05T13:36:04.543
> 
> 标签：iphone, objective-c, sqlite, ios5

我想知道是否可以将文件从网站同步（传输）到 iPhone。示例用户在网站上单击确认后从网站选择书籍，它将自动传输或存储在 iPhone 上，并且可以通过我制作的自定义应用程序打开。 ...现在应用程序仍然需要通过 iTunes 同步文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:46:08.537

是的，有可能。

一种可能性是使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)下载文件。然后，您可以将其存储在应用程序的 Document 目录中，这将允许将文件备份到 iTunes。

这是一个示例：[https ://stackoverflow.com/a/11206952/200567](https://stackoverflow.com/a/11206952/200567)

还有其他下载文件的方法，例如 NSURLConnection：[https ://stackoverflow.com/a/5806633/200567](https://stackoverflow.com/a/5806633/200567)

# php - php代码按列名排序mysql查询表

> ID：15225169
> 
> 赞同：1
> 
> 时间：2013-03-05T13:36:21.823
> 
> 标签：php, mysql

我想使用 php 代码按列名对 mysql 查询表进行排序（女巫被“动态”采用 - 列名不固定）。该脚本仅从查询中获取每列的正确列名。

...等...连接到数据库..

```
 $query = "SELECT a.name,a.surname,b.email,c.phone 
      FROM users as a 
      inner join users_email as b 
      inner join users_phone as c
      WHERE a.id=b.id AND a.id=c.id ";

if (isset($_GET['orderby'])&&
    (($_GET['orderby']=='name') || ($_GET['orderby']=='surname')||($_GET['orderby']=='email')))
{
    $query .= "ORDER BY" . $_GET['orderby'] . "ASC;";
}

$result = mysql_query($query,$con);

echo "<table><table border=1><tr>";

for($i=0; $i < mysql_num_fields($result); $i++){
    $field_info = mysql_fetch_field($result, $i);

    echo '<th><a href="login3.php?orderby='. $field_info -> name .'" >'. $field_info -> name .'</a></th>';
}

while ($row=mysql_fetch_assoc($result)){
    echo "<tr>";
    foreach($row as $_column){
    echo "<td>{$_column}</td>";
    }
    echo "</tr>";
}

echo "</table>";

mysql_close($con);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:51:13.020

我还没有测试过，但这样的事情可能会奏效：

```
$sort = 'your_field_to_sort';

while (($row = $result->fetch_assoc())) {
    $data[] = $row;
}

usort($data, function($a, $b) use ($sort) {
    if ($a[$sort] == $b[$sort]) {
        return 0;
    }
    return ($a[$sort] < $b[$sort]) ? -1 : 1;
}); 
```

此示例假设您使用的是 mysqli，与旧的已弃用的 mysql 函数相比，您应该更喜欢它。

如果您仍想坚持使用旧 API，请使用[mysql_fetch_assoc](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)：

```
[...]

while (($row = mysql_fetch_assoc($result)) {
    $data[] = $row;
}

[...] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:05:44.343

因为我使用的是 PDOhere，所以我会给你连接模板（插入你正在使用 mysql_conn() 的变量名称，你就完成了）：

```
//try connecting to database
try 
{
  $dbconn_pdo = new PDO(
    'mysql:host=' . $host . ';dbname=' . $db . ';charset=utf8', $user, $password, 
    array(
      PDO::ATTR_EMULATE_PREPARES => false, 
      PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
    )
  );
}
//catch exception, if connection failed
catch (PDOException $e) 
{
  echo ("Error: cannot connect to database<br/>"); 
  die();
} 
```

给定您的示例，要对表进行排序，您可以获得需要从链接中排序的列名（稍后将构建它），因此查询变为：

```
$query = "SELECT a.name,a.surname,b.email,c.phone 
      FROM users as a 
      inner join users_email as b 
      inner join users_phone as c
      WHERE a.id=b.id AND a.id=c.id"; 
```

在这里我们检查排序：

```
if (isset($_GET['orderby']) && 
(($_GET['orderby'] == 'name') || ($_GET['orderby'] == 'surname') || ($_GET['orderby'] == 'email') || ($_GET['orderby'] == 'phone')))
{
  $query .= " ORDER BY " . $_GET['orderby'] . " ASC; ";
} 
```

要获取查询结果，请使用：

```
$result = $dbconn_pdo->query($query); 
```

现在，查询本身已经知道列名，因此无需调用函数来检索它们（如果您真的需要该功能，请查看[http://www.php.net/manual/en/pdostatement.getcolumnmeta .php](http://www.php.net/manual/en/pdostatement.getcolumnmeta.php)）：

```
?>
<table><table border=1>
  <tr>
    <th><a href="so-wwwglro.php?orderby=name">Name</a></th>
    <th><a href="so-wwwglro.php?orderby=surname">Surame</a></th>
    <th><a href="so-wwwglro.php?orderby=email">Email</a></th>
    <th><a href="so-wwwglro.php?orderby=phone">Phone</a></th>
  </tr>
<?php 
```

然后，当然，您获取行来创建表；唯一改变的行是“while”（毕竟我们使用的是 PDO）：

```
while ($row = $result->fetch(PDO::FETCH_ASSOC)) 
```

然后，您只需要创建表，就像您的示例一样：

```
{
  echo "<tr>";
  foreach($row as $_column)
  {
    echo "<td>{$_column}</td>";
  }
  echo "</tr>";
}

echo "</table>"; 
```

相反，如果您想动态排序列而不重新加载页面，您应该使用 Javascript，但这是完全不同的事情:)

编辑：从 mysql_* 更改为 PDO，因此我们不“支持”已弃用的功能。

# c# - 实体框架。数据库优化

> ID：15225178
> 
> 赞同：0
> 
> 时间：2013-03-05T13:36:49.533
> 
> 标签：c#, sql, linq, entity-framework-4

如何优化 db 的工作？

我目前正在使用：

```
using (var dataDb = new DataDBEntities())
{
    foreach (var data in reportData.DBData.Output)
    {
        dataDb.ReportTable.Add(new ReportTable()
        {
            Node = reportData.Node,
            ChartType = chartType,
            ResultType = data.Type,
            Mean = data.Statistics.Mean,
            Mode = data.Statistics.Mode,
            .....
        });
    }
    dataDb.SaveChanges();
} 
```

我需要在短时间内完成包含 1000 个条目的表格。但是这个简单的工作并不快

有没有其他选择？

# php - 将电子邮件导入 IMAP 邮箱

> ID：15225179
> 
> 赞同：0
> 
> 时间：2013-03-05T13:36:49.733
> 
> 标签：php, email, imap

我能够使用 PHP 从单个邮箱中检索电子邮件并将它们存储到数据库中。虽然我希望可以选择将消息“恢复”回数据库。

我的同事告诉我，我应该看看`imap_append()`PHP 附带的函数。虽然只有很少的例子可用。

我不确定我需要插入哪些字段以始终确保消息“恢复”正确。我喜欢数据库中电子邮件中的所有字段（但如果需要，我可以添加额外的字段）。

我的问题; 每封电子邮件都应该包含哪些字段，有没有人能给我一个例子来说明我如何做到这一点（`imap_append()`或......？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:39:52.310

阅读[IMAP RFC](https://www.rfc-editor.org/rfc/rfc3501)中的[APPEND 命令](https://www.rfc-editor.org/rfc/rfc3501#section-6.3.11)。引用它：

```
6.3.11\. APPEND Command

   Arguments:  mailbox name
               OPTIONAL flag parenthesized list
               OPTIONAL date/time string
               message literal 
```

您不必担心选项参数。要考虑的重要事项是邮箱名称（您将邮件上传到的文件夹）和邮件文字（邮件本身）。消息本身是包含所有标头字段的 MIME 数据，因此您真的不需要担心这些。您只需要确保将整个消息数据存储在数据库中，这样您就可以恢复完整的消息。

我从未将 IMAP 与 PHP 一起使用，但我查看了您所说的[imap_append()](http://php.net/manual/en/function.imap-append.php)命令，它确实具有与我刚才解释的内容相对应的参数 - 它们是 $mailbox 和 $message。在$mailbox 中输入文件夹的名称（例如“INBOX”），要恢复的消息数据进入$message。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:34:05.350

Append 只接受两个参数：`INTERNALDATE`和`FLAGS`。其他所有内容都包含在消息本身中。您可以从原始消息中获取日期和标志。或者，您可以通过读出日期标题并将其用作内部日期来伪造它。

# php - 如何从 Magento 中的扩展程序创建的自定义菜单中调用控制器？

> ID：15225180
> 
> 赞同：4
> 
> 时间：2013-03-05T13:36:50.717
> 
> 标签：php, magento, magento-1.7

我是 Magento 的新手，起初我得到了创建 Magento 扩展的任务。所以我正在从互联网上阅读并创建扩展。我的 Magento 版本是 1.7.0.2。

我能够创建扩展的基本结构并将 config.xml 和其他文件保存在适当的位置，这使得我的扩展可以在 Magento 中正确安装，但现在我想从我添加到管理部分的主导航中的菜单中调用我的控制器。这是我的 config.xml 文件，请告诉我我在这里做错了什么，这不允许我从菜单中调用我的控制器。

```
<?xml version="1.0"?>
<config>
<!-- turn on our module, required for install support -->
<modules>
<Gwb_Magecrmsync>
    <version>0.1.0</version>
</Gwb_Magecrmsync>
</modules>
<global>
<helpers>
    <magecrmsync>
        <class>Gwb_Magecrmsync_Helper</class>
    </magecrmsync>
</helpers>
<!-- turn on models -->
<models>
    <magecrmsync>
        <class>Gwb_Magecrmsync_Model</class>
        <resourceModel>Magecrmsync_mysql4</resourceModel>
    </magecrmsync>
</models>
<!-- turn on models -->

<!-- turn on database connections -->
<resources>
<!-- setup is needed for automatic installation -->
    <magecrmsync_setup>
        <use>default_setup</use>
    </magecrmsync_setup>
    <magecrmsync_write>
        <use>default_write</use>
    </magecrmsync_write>
    <magecrmsync_read>
        <use>default_read</use>
    </magecrmsync_read>
</resources>
<blocks>
    <magecrmsync>
        <class>Gwb_Magecrmsync_Block</class>
    </magecrmsync>
</blocks>
<layout>
    <magecrmsync>
        <file>Magecrmsync.xml</file>
    </magecrmsync>
</layout>
</global>
<admin>
<routers>
    <magecrmsync>
        <use>admin</use>
        <args>
            <module>Gwb_Magecrmsync</module>
            <frontName>magecrmsync</frontName>
        </args>
    </magecrmsync>
</routers>
</admin>
<adminhtml>
<menu>
    <menu1 translate="title" module="magecrmsync">
        <title>Synchronize</title>
        <sort_order>999</sort_order>
        <children>
            <menuitem1 module="magecrmsync">
                <title>Synchronize</title>
                <action>magecrmsync/adminhtml_magecrmsync</action>
            </menuitem1>
        </children>
    </menu1>
</menu>
<acl>
    <resources>
        <admin>
            <children>
                <menu1 translate="title" module="magecrmsync">
                    <title>Synchronize</title>
                    <sort_order>999</sort_order>
                    <children>
                        <menuitem1>
                            <title>Synchronize</title>
                        </menuitem1>
                    </children>
                </menu1>
            </children>
        </admin>
    </resources>
</acl>
</adminhtml>
</config> 
```

请在此处查看我的更新代码：

[如何将左侧边栏中的自定义选项卡添加到 magento 模块管理部分的自定义页面？](https://stackoverflow.com/questions/15293900/how-to-add-custom-tab-in-left-sidebar-to-my-custom-page-in-admin-section-in-mage)

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T14:15:57.123

您应该尽量不要将所有大写字母用于命名约定，在某些情况下，大写字母用于区分不同的类等，重命名为：

```
Gwb_Magecrmsync 
```

您的操作不正确，请尝试以下操作：

```
<action>magecrmsync/adminhtml_synchronize</action> 
```

您还需要管理员的路由器定义

```
<admin>
    <routers>
        <magecrmsync>
            <use>admin</use>
            <args>
                <module>GWB_MAGECRMSYNC</module>
                <frontName>magecrmsync</frontName>
            </args>
        </magecrmsync>
    </routers>
</admin> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:23:46.177

我建议您将模块名称从 MAGECRMSYNC 更改为 MageCrmSync

尝试

```
.....
<admin>
    <routers>
        <magecrmsync>
            <use>admin</use>
            <args>
                <module>GWB_MAGECRMSYNC</module>
                <frontName>magecrmsync</frontName>
            </args>
        </magecrmsync>
    </routers>
</admin>
<adminhtml>
<menu>
    <magecrmsync translate="title" module="magecrmsync">
        <title>Synchronize</title>
        <sort_order>60</sort_order>
        <children>
            <menuitem module="magecrmsync">
                <title>Menu item 1</title>
                <action>magecrmsync/adminhtml_synchronize</action>
            </menuitem>
        </children>
    </magecrmsync>
</menu>
<acl>
    <resources>
       <all>
            <title>Allow Everything</title>
        </all>
        <admin>
            <children>
                <magecrmsync translate="title" module="magecrmsync">
                    <title>Sychronize</title>
                    <sort_order>60</sort_order>
                    <children>
                        <menuitem>
                            <title>Menu item 1</title>
                        </menuitem>
                    </children>
               </magecrmsync>
           </children>
       </admin>
   </resources>
</acl>
<adminhtml>
</config> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T15:29:53.427

看看我的配置也许会对你有所帮助。

```
<?xml version="1.0"?>
<config>
    <modules>
        <Tibdev_Paypal>
            <version>1.1.0</version>
        </Tibdev_Paypal>
    </modules>

    <global>
        <models>
           ...
        </models>

        <helpers>
            ...
        </helpers>

        <resources>
            ...
        </resources>

    </global>

    <admin>
        <routers>
            ...
        </routers>
    </admin>

    <adminhtml>
        <menu>
            <menu1 translate="title" module="Paypal">
                <title>Tigerbytes GmbH</title>
                <sort_order>999</sort_order>
                <children>
                    <menuitem1 module="Paypal">
                        <title>Paypal 10413 Fix</title>
                        <action>tibdevpaypal/adminhtml_form</action>
                    </menuitem1>
                </children>
            </menu1>
        </menu>
        <acl>
            <resources>
                <admin>
                    <children>
                        <menu1 translate="title" module="Paypal">
                            <title>Tigerbytes GmbH</title>
                            <sort_order>999</sort_order>
                            <children>
                                <menuitem1>
                                    <title>Paypal 10413 Fix</title>
                                </menuitem1>
                            </children>
                        </menu1>
                    </children>
                </admin>
            </resources>
        </acl>

        <layout>
            <updates>
                ...
            </updates>
        </layout>

        <translate>
            <modules>
                ...
            </modules>
        </translate>

    </adminhtml>

</config> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T21:38:47.820

并将您的模块重命名为

```
<Gwb_Magecrmsync> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T01:52:02.277

检查 Alan Storm 回答的这些 SO 问题以获得一些指导：
[Magento Custom Module How to store variable in config.xml](https://stackoverflow.com/questions/4248488)
和[Setting a global variable in Magento, the GUI way？](https://stackoverflow.com/questions/949779)

第二个问题有更全面的答案，其中一个帮助我完成了第一个模块，即管理菜单。我添加了第二个问题的答案，试图进一步解释我在做什么，并包括我创建的与我的答案相关的包。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T11:18:25.873

config.xml 应该是这样的：

```
<?xml version="1.0"?>
<config>
<!-- turn on our module, required for install support -->
<modules>
<Gwb_Magecrmsync>
    <version>0.1.0</version>
</Gwb_Magecrmsync>
</modules>
<global>
<helpers>
<magecrmsync>
    <class>Gwb_Magecrmsync_Helper</class>
</magecrmsync>
</helpers>
<!-- turn on models -->
<models>
<magecrmsync>
    <class>Gwb_Magecrmsync_Model</class>
    <resourceModel>Magecrmsync_mysql4</resourceModel>
</magecrmsync>
</models>
<!-- turn on models -->

<!-- turn on database connections -->
<resources>
<!-- setup is needed for automatic installation -->
<magecrmsync_setup>
    <use>default_setup</use>
</magecrmsync_setup>
<magecrmsync_write>
    <use>default_write</use>
</magecrmsync_write>
<magecrmsync_read>
    <use>default_read</use>
</magecrmsync_read>
</resources>
<blocks>
<magecrmsync>
    <class>Gwb_Magecrmsync_Block</class>
</magecrmsync>
</blocks>
<layout>
<magecrmsync>
    <file>Magecrmsync.xml</file>
</magecrmsync>
</layout>
</global>
<admin>
<routers>
<magecrmsync>
    <use>admin</use>
    <args>
        <module>Gwb_Magecrmsync</module>
        <frontName>magecrmsync</frontName>
    </args>
</magecrmsync>
</routers>
</admin>
<adminhtml>
<menu>
<menu1 translate="title" module="magecrmsync">
    <title>Synchronize</title>
    <sort_order>999</sort_order>
    <children>
        <menuitem1 module="magecrmsync">
            <title>Synchronize</title>
            <action>magecrmsync/adminhtml_synchronize</action>
        </menuitem1>
    </children>
</menu1>
</menu>
<acl>
<resources>
    <admin>
        <children>
            <menu1 translate="title" module="magecrmsync">
                <title>Synchronize</title>
                <sort_order>999</sort_order>
                <children>
                    <menuitem1>
                        <title>Synchronize</title>
                    </menuitem1>
                </children>
            </menu1>
        </children>
    </admin>
</resources>
</acl>
</adminhtml>
</config> 
```

然后在 Gwb/Magecrmcync/controllers/Adminhtml 中创建一个 SynchronizeController.php ：

```
class Gwb_Magecrmsync_Adminhtml_SynchronizeController extends Mage_Adminhtml_Controller_Action
{
    public function indexAction()
    {
        $this->loadLayout();
        $this->renderLayout();
    }
} 
```

它会按照你想要的方式工作。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-03-13T08:20:52.477

伙计，让我向您展示我成为未来 Magento 专家的方式。所以专家说：

在你的配置中

```
<menu1 translate="title" module="magecrmsync">
        <title>Synchronize</title>
        <sort_order>999</sort_order>
        <children>
            <menuitem1 module="magecrmsync">
                <title>Synchronize</title>
                <action>magecrmsync/adminhtml_magecrmsync</action>
            </menuitem1>
        </children>
    </menu1> 
```

1.  动作节点代表你的控制器所以这里你的目录必须在 Magecrmsync/controllers/Adminhtml/MagecrmsyncController *确保它扩展了正确的类

现在在这个控制器中，您将调用 loadlayout() -> 这家伙只需加载所有 layout.xml 文件并将其保存在内存中，然后 renderlayout() -> 这家伙会实际打印这些东西。

1.  但是等一下。上面的 loadlayout() 不知道我们的自定义扩展的 layout.xml。没问题，让我们创建一个。因此，只需转到 design->adminhtml->package->theme->layout 并放置您的 layout.xml，在您的情况下是 .... 是.....哦，您的 config.xml 中没有（因为 admin 的 layout.xml 必须在 adminhtml 节点中，所以您有一个，但这似乎是用于前端的，但仍然不正确，因为您没有前端节点。）无论如何，假设您可能已经得到了这个到现在为止，为您的管理员获取了一个新的布局 xml 文件并将其放在 adminhtml 节点中。例如

    ```
    <adminhtml>
    <layout>
        <updates>
            <services>
                <file>layitoutdarling.xml</file>
            </services>
        </updates>
    </layout> </adminhtml> 
    ```

现在，我们的新 layoutitoutdarling 文件将引用这个文件，或者我们可以说指向我们旅程所需的类。这个布局文件将保存您需要的秘密。是的，它会有什么？？？？它将具有 ... .. 句柄 :-S 句柄匹配您的 URL（或您的模块/控制器/方法的路径）并调用它们之间包含的内容。例如，在这个随机示例中是一个句柄，当您转到该 url 块类时，将调用其路径为 Employee/Block/Adminhtml/Employee.php

```
<?xml version="1.0"?>
<layout version="0.1.0">
    <employee_adminhtml_employee_index>
        <reference name="content">
            <block type="employee/adminhtml_employee" name="employee" />
        </reference>
    </employee_adminhtml_employee_index>
</layout> 
```

现在实际上这个文件（Employee/Block/Adminhtml/Employee.php）是你的网格容器。然后 Grid 容器会将您指向 Grid 文件（Employee/Block/Adminhtml/Employee/Grid.php）。Grid Container 和 Grid 是有区别的。

magento 中的表单分为两个 4 个基本部分 1\. FORM Container 2\. FORM tag 3\. FORM Tabs 4\. Actual Form Fields

[关于我所说的更多信息在这里](http://www.excellencemagentoblog.com/admin-part1-series-magento-admin-forms-grids-controllers-tabs)

**然后对于 Tabs** 假设您在 Grid Container 部分中放置了**Add New Sexy Girl按钮。**当然它会指向一个（控制器）/sexyController/newAction

因此，现在您的 newAction 将指示您在左侧添加选项卡。

```
public function newAction(){
$this->loadLayout();
$this->_addContent($this->getLayout()->createBlock('form/adminhtml_form_edit'))
(_addLeft() here we are adding tabs)
                ->_addLeft($this->getLayout()->createBlock('form/adminhtml_form_edit_tabs'));
$this->renderLayout();
} 
```

[有关如何添加选项卡的详细信息以及更多信息，请单击此处](http://www.excellencemagentoblog.com/module-development-series-magento-admin-module-part3)

是的，我只喝了 4 杯啤酒，还剩 2 杯。

休息一下，我亲爱的朋友，检查那个网站，你也会像我一样……成为未来的 magento 专家。

# ios - 从 plist 文件中检索 iOS 地图的路线

> ID：15225181
> 
> 赞同：0
> 
> 时间：2013-03-05T13:36:55.223
> 
> 标签：ios, objective-c, xcode, maps, plist

是否可以在 iOS 中为表格视图制作带有地图位置的 plist 类型文件。

我看了看，找不到任何有关制作地图位置列表的信息。

此时在我的应用程序中，表格视图中的每一行都打开到不同的视图，然后在地图应用程序中打开该地址。

我试图节省一些空间，因为我在这个应用程序中使用了很多框架。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T23:01:48.057

我会查看[http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html](http://developer.apple.com/library/ios/#featuredarticles/iPhoneURLScheme_Reference/Articles/MapLinks.html)以获取有关您可以提出的 URL 请求的更多信息。

您想从您的应用程序中打开一个 URL，例如

```
[[UIApplication sharedApplication]openURL:[NSURL URLWithString:@"http://maps.apple.com/?daddr=San+Francisco,+CA&saddr=cupertino"]]; 
```

# objective-c - 谁应该负责释放setter的参数？

> ID：15225187
> 
> 赞同：0
> 
> 时间：2013-03-05T13:37:05.473
> 
> 标签：objective-c, setter

请看代码如下：

```
- (void) setSomeThing:(NSString *) someThingNew
{
     if(someThing!=someThingNew)
     {
         [someThingNew retain];
         [someThing release];
         someThing = someThingNew;
     }
 }

 ... ...
 - (void) dealloc
 {
     [someThing release];
     [super dealloc];
 }
@end 
```

setter 的参数`someThingNew`已经`retain`在 setter 方法中，表示它的保留计数为 1。

这里的问题是：`someThingNew`应该`release`吗？

还是因为`someThing`和`someThingNew`指向同一个对象，而在`dealloc`方法`someThing`中一直`release`这么`someThingNew`指向`nil`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:55:18.667

> someThingNew 应该发布吗？

不，因为现在`someThing`和`someThingNew`指向同一个地址。`someThing`通过在 dealloc 中释放（并为安全起见将其取消，但这是另一个问题），您可以平衡 setter 中的保留。一切正常！*

[*旁注：在setter中的实例`NSString`通常是`copy`'d，而不是`retain`d，所以如果你不小心传递给它也没关系`NSMutableString`。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:44:57.243

每当调用 setter 方法时，都会保留 someThingNew 并释放 someThing。然后将 someThingNew 的新地址存储在 someThing 中，使保留计数为 1。

这将保留在类中，直到对象本身未被释放。一旦调用了 dealloc，someThingNew 的指针就会被释放，从而使保留计数为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:38:55.117

您的代码是正确的：如果您想让它成为“强”变量，setter 应该保留该对象。但是您不必释放它：这不是 setter 的职责范围。因此，在您调用 setter 的代码中，您将：

*   分配要分配的对象；
*   调用setter；
*   当你不再需要它时释放它。

你做得很好，除了字符串通常被复制的事实，因为由于多态性是有效的，指针可能指向一个可变的字符串对象，因此它可能会从一个时刻变为另一个。

**例子：**

```
NSAutoreleasePool* pool=[[NSAutoreleasePool alloc]init];
NSString* newString= [[NSMutableString alloc]initWithString: @"Hello"]; // Retain count 1.
[newString autorelease]; // Still 1 as retain count, but it will be decreased
                         // when the pool will be drained.
[object setSomeThing: newString];  // Retain count 2.
[pool drain]; // Retain count 1 
```

在此示例中，您清楚地看到了为什么需要复制对象而不是保留它：它是一个可变字符串，因此可以随时修改。

**复制对象**

如果你复制对象，那么你调用方法的方式（所以上面的代码）不会改变，它只会改变方法的实现。像这样的东西：

```
- (void) setSomeThing:(NSString *) someThingNew
{
     if(someThing!=someThingNew)
     {
         [someThing release];   // Retain count decreased by 1.
         someThing = [someThingNew copy];  // Retain count 1.
     }
 }

 ... ...
 - (void) dealloc
 {
     [someThing release];
     [super dealloc];
 }
@end 
```

# jquery - 切换时的 jQuery UI 工具提示

> ID：15225199
> 
> 赞同：0
> 
> 时间：2013-03-05T13:37:26.683
> 
> 标签：jquery, jquery-ui, tooltip, jquery-ui-slider

有这样的问题：工具提示没有显示在页面上。只有当我点击切换时它才会显示。

我怎样才能在不单击切换的情况下显示该工具提示...？

这是代码：

JS：

```
var tooltipD = $('<div id="days_tooltip" />').css({
    position: 'absolute',
    top: -30,
    left: -14,
    width: 45,
    height: 20,
    textAlign: "center",
    display: "block",
    background: "#FFF",
    border: "1px solid lightgray",
    borderRadius: 5,
    paddingTop: 3
});

$("#someid").slider({
    range:"max",
    min:0,
    max:7,
    value:1,
    slide:function (event, ui) {
//        tooltipD.text(ui.value);
    }
    }).find(".ui-slider-handle").append(tooltipD);

 $("#someid").val($("#someid").slider("value")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:19:20.833

这似乎有效。 **[演示](http://jsfiddle.net/578HU/1/)**

```
$(function () {

    var tooltipD = $('<div id="days_tooltip" />').css({
        position: 'absolute',
        top: -30,
        left: -14,
        width: 45,
        height: 20,
        textAlign: "center",
        display: "block",
        background: "#FFF",
        border: "1px solid lightgray",
        borderRadius: 5,
        paddingTop: 3
    }).text(1);

    $("#slider").slider({
        range: "max",
        min: 0,
        max: 7,
        value: 1,
        slide: function (event, ui) {
            $("#days_tooltip").text(ui.value);
        }
    }).find(".ui-slider-handle").append(tooltipD);

}); 
```

# c++ - 如果可能，使用 boost::scoped_ptr

> ID：15225204
> 
> 赞同：0
> 
> 时间：2013-03-05T13:37:31.687
> 
> 标签：c++, boost

我在 pagePtr.h 中有类似的东西

```
typedef int (*FunPtrType)(char* sz, unsigned int max_bytes, char* arg1,
char* arg2, char* arg3, char* arg4); 
```

和一个创建对象的静态函数

```
static pagePtr* CreatePage( FunPtrType Ptr2Fun)
{
    return new pagePtr(ptr2Fun);
} 
```

会 boost::scoped_ptr 帮助我不用担心稍后删除那些创建的对象。如果是的话，在这种情况下我应该如何实施。如果可以的话，还有什么其他可能的更好的选择来删除这些创建的对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T13:47:55.920

[`boost:scoped_ptr`](http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/scoped_ptr.htm)不可复制，因此无法从`CreatePage()`. 如果 C++11 可用`std::unique_ptr`，可以使用：

```
static std::unique_ptr<pagePtr> CreatePage( FunPtrType Ptr2Fun)
{
    return std::unique_ptr<pagePtr>(new pagePtr(ptr2Fun));
} 
```

是不是有不可复制的原因`pagePtr`？如果不是并且复制成本低，则按值返回。

如果`pagePtr`是不可复制[`std::unique_ptr`](http://en.cppreference.com/w/cpp/memory/unique_ptr)且不可用，那么您可以使用[`boost::shared_ptr`](http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/shared_ptr.htm)移除调用者的责任以破坏返回的`pagePtr`. 不利的一面是 using`shared_ptr`并不表示唯一的所有权并为不需要的引用计数付出代价（有关可用智能指针的更多信息和描述，请参阅[有哪些 C++ 智能指针实现可用？](https://stackoverflow.com/questions/5026197/what-c-smart-pointer-implementations-are-available)）。

从发布的代码中，`pagePtr`似乎是函数指针的包装器，因此请考虑使用[`boost::function`](http://www.boost.org/doc/libs/1_53_0/doc/html/function.html)它，它是可复制的，并完全删除`pagePtr`：

```
typedef boost::function<int(char* sz,
                            unsigned int max_bytes,
                            char* arg1,
                            char* arg2,
                            char* arg3,
                            char* arg4)> FunPtrType; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T13:47:51.843

拥有一个动态分配对象并安全地将所有权返回给调用者的函数的习惯用法是返回 a `std::unique_ptr`：

```
std::unique_ptr<foo> create_foo()
{
  return std::unique_ptr<foo>(new foo());
} 
```

这明确地告诉调用者他们正在获得对象的所有权，并且当它们被销毁时对象将被`std::unique_ptr`销毁（除非所有权进一步传递到其他地方）。

应用于您的示例：

```
static std::unique_ptr<pagePtr> CreatePage( FunPtrType ptr2Fun)
{
    return std::unique_ptr<pagePtr>(new pagePtr(ptr2Fun));
} 
```

至于为什么其他指针不适用：

*   `boost::scoped_ptr`根本无法传递所有权 - 它是最严格的智能指针（几乎等同于 a `const std::unique_ptr`）
*   `std::auto_ptr`已弃用，因为它通过复制提供移动语义
*   `std::shared_ptr`会起作用，但没有多大意义——该函数肯定不会与调用者共享所有权，因为该函数正在结束

# c# - System.Func 传入 linq where 方法而不枚举

> ID：15225205
> 
> 赞同：3
> 
> 时间：2013-03-05T13:37:34.370
> 
> 标签：c#, linq, lambda

我有一种方法，我试图返回所有具有匹配性别的默认客户地址。我希望能够通过将 System.Func 方法传递给 where 子句来一点一点地构建过滤查询。

```
 var emailAddresses = new List<string>();

        // get all customers.
        IQueryable<Customer> customersQ = base.GetAllQueryable(appContext).Where(o => o.Deleted == false);

        // for each customer filter, filter the query.

        var genders = new List<string>() { "C" };

        Func<Customer, bool> customerGender = (o => genders.Contains(o.Addresses.FirstOrDefault(a => a.IsDefaultAddress).Gender));
        customersQ = customersQ.Where(customerGender).AsQueryable();

        emailAddresses = (from c in customersQ
                          select c.Email).Distinct().ToList();

        return emailAddresses; 
```

但是这种方法对每个地址（8000）次调用数据库非常慢。

但是，如果我替换这两行

```
 Func<Customer, bool> customerGender = (o => genders.Contains(o.Addresses.FirstOrDefault(a => a.IsDefaultAddress).Gender));
        customersQ = customersQ.Where(customerGender).AsQueryable(); 
```

用一根线

```
 customersQ = customersQ.Where(o => genders.Contains(o.Addresses.FirstOrDefault(a => a.IsDefaultAddress).Gender)).AsQueryable(); 
```

然后查询只对数据库进行一次调用，速度非常快。

我的问题是为什么这会有所作为？如何使第一种方法只调用一次数据库？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T13:39:50.667

使用表达式而不是 Func：

```
Expression<Func<Customer, bool>> customerGender = (o => 
   genders.Contains(o.Addresses.FirstOrDefault(a => a.IsDefaultAddress).Gender));
customersQ = customersQ.Where(customerGender).AsQueryable(); 
```

当您使用简单`Func`委托时，将调用`Where`扩展。[`Enumerable`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aspx)因此，所有数据都进入内存，在内存中对其进行枚举并为每个实体执行 lambda。而且您对数据库有很多调用。

另一方面，当您使用表达式时，会调用`Where`扩展名[`Queryable`](http://msdn.microsoft.com/en-us/library/system.linq.queryable.aspx)，并将表达式转换为 SQL 查询。这就是为什么您在第二种情况下有单个查询（如果您使用就地 lambda，它将被转换为表达式）。

# java - 简单的 Java 数组新手

> ID：15225206
> 
> 赞同：0
> 
> 时间：2013-03-05T13:37:35.943
> 
> 标签：java, bluej

我试图自学 Java，并开始浏览 BlueJ 示例。

在手术系统的情况下，我需要将患者及其地址添加到数组中，然后能够添加患者，然后列出患者。

该示例使用向量和硬代码向向量添加名称，但我想使用数组并允许用户向数组添加名称和地址。

谁能提供一些指导？

我有以下但不知道从这里去哪里。

```
public class Patient
{
    public String name;
    public String address;

   public Patient(String n, String a) {
      name = n;
      address = a;
   }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T13:40:24.930

此类信息[在此处](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)有很好的记录。

在您的情况下，您似乎想要创建一个类型的数组`Patient`

创建一个可以容纳 10 名患者的数组的语法是：

```
Patient[] patients = new Patients[10]; 
```

阅读文档后，您将能够使用我提供的语法来获得所需的功能:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:53:43.607

我不会给你确切的答案，因为这看起来很像家庭作业，但这里有一个使用数组的酒店的示例实现。仔细阅读并尝试理解它；如果您这样做，您将能够自己解决患者问题。

```
import java.util.*;

class Customer
{
    private String name;
    private int room;

    public void setName(String name)
    {
        this.name=name;
    }

    public String getName()
    {
        return this.name;
    }

    public void setRoom(int room)
    {
        this.room=room;
    }

    public int getRoom()
    {
        return this.room;
    }
}

class Hotel
{
    public static void initialize(Customer RoomList[])
    {
        for(int i=0; i<RoomList.length; i++)
        {
            RoomList[i]=new Customer();
            RoomList[i].setName("EMPTY");
            RoomList[i].setRoom(i+1);
        }
    }

    public static void viewList(Customer RoomList[])
    {
        for(int i=0; i<RoomList.length; i++)
        {
            if(RoomList[i].getName()=="EMPTY")
                System.out.println("Room number "+RoomList[i].getRoom()+" is vacant.");
            else
                System.out.println("Room number "+RoomList[i].getRoom()+" is ocupied by "+RoomList[i].getName()+".");
        }
        System.out.println();
    }

    public static boolean addCustomer(Customer RoomList[], String name)
    {
        for(int i=0; i<RoomList.length; i++)
            if(RoomList[i].getName().equals("EMPTY"))
            {
                RoomList[i].setName(name);
                return true;
            }
        return false;
    }

    public static void showEmptyRooms(Customer RoomList[])
    {
        System.out.println("Available rooms are:");
        for(int i=0; i<RoomList.length; i++)
            if(RoomList[i].getName()=="EMPTY")
                System.out.println(RoomList[i].getRoom());
        System.out.println();
    }

    public static boolean deleteCustomer(Customer RoomList[], String name)
    {
        for(int i=0; i<RoomList.length; i++)
            if(RoomList[i].getName().equals(name))
            {
                RoomList[i].setName("EMPTY");
                System.out.println("Deletion successful.\n");
                return true;
            }
        return false;
    }

    public static int getIndex(Customer RoomList[], String name)
    {
        for(int i=0; i<RoomList.length; i++)
            if(RoomList[i].getName().equals(name))
                return i;
        return -1;
    }

    public static void main(String[] args)
    {
        int numOfCustomers=10;
        Customer[] RoomList = new Customer[numOfCustomers];
        String name;
        initialize(RoomList);
        Scanner input = new Scanner(System.in);
        int option=0;

        do
        {
            System.out.println("        Hotel Booking Options");
            System.out.println("=====================================");
            System.out.println("1: To View all rooms");
            System.out.println("2: To Add customer to a room");
            System.out.println("3: To Display empty rooms");
            System.out.println("4: To Delete customer from a room");
            System.out.println("5: Find room from customer name");
            System.out.println("0: Exit");

            System.out.print("\nEnter your choice: ");
            option = input.nextInt();
            System.out.println();

            switch(option)
            {
                case 1:
                {
                    viewList(RoomList);
                    break;
                }
                case 2:
                {
                    System.out.print("Customer's name: ");
                    name=input.next();
                    System.out.println();
                    if(!addCustomer(RoomList, name))
                        System.out.println("No rooms available!");
                    break;
                }
                case 3:
                {
                    showEmptyRooms(RoomList);
                    break;
                }
                case 4:
                {
                    System.out.print("Customer's name: ");
                    name=input.next();
                    System.out.println();
                    deleteCustomer(RoomList, name);
                    break;
                }
                case 5:
                {
                    System.out.print("Customer's name: ");
                    name=input.next();
                    System.out.println();
                    System.out.println("Customer's room: "+RoomList[getIndex(RoomList, name)].getRoom()+"\n");
                    break;
                }
                case 0:
                {
                    System.out.println("\nThank you!\n");
                    break;
                }
                default:
                {
                    System.out.println("Invalid option!\n");
                    break;
                }
            }

        }while(option!=0);
    }
} 
```

# java - DataSource 如何成为对 ConnectionPoolDataSource 的引用。

> ID：15225209
> 
> 赞同：2
> 
> 时间：2013-03-05T13:37:44.400
> 
> 标签：java, jdbc

获得连接的首选方法是通过我读过的数据源。有不同的接口，例如`DataSource`和`ConnectionPoolDataSource`。假设我们使用 PostgreSQL 驱动程序并希望在 Glassfish 服务器上使用连接池。

在您的应用程序代码中，您调用`getConnection()`type 的属性`DataSource`。这怎么可能？Glassfish 没有创建类型的数据源`ConnectionPoolDataSource`（或更准确地说是实现类）并将其绑定到 JNDI 名称，当您使用 JNDI 名称获取数据源时，您得到的对象`ConnectionPoolDataSource`不是`DataSource`？`ConnectionPoolDataSource`没有`getConnection()`方法。我不明白这个服务器魔法。

有人能解释一下这一切是如何结合在一起的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T13:51:07.810

您可以在 Glassfish 配置中选择的[`DataSource`](http://docs.oracle.com/javase/7/docs/api/javax/sql/DataSource.html),[`Driver`](http://docs.oracle.com/javase/7/docs/api/java/sql/Driver.html)或[`ConnectionPoolDataSource`](http://docs.oracle.com/javase/7/docs/api/javax/sql/ConnectionPoolDataSource.html)不会直接暴露给您的应用程序，而是应用程序服务器有自己`DataSource`的维护连接池，此数据源使用已配置的`DataSource`,`Driver`或`ConnectionPoolDataSource`作为将保留在其中的连接的工厂水池。

因此，当您使用 配置 Glassfish 时`ConnectionPoolDataSource`，它会使用为连接池`ConnectionPoolDataSource`创建物理连接（[`PooledConnection`](http://docs.oracle.com/javase/7/docs/api/javax/sql/PooledConnection.html)对象）。此连接池由应用程序服务器`DataSource`实现保留。然后，您的应用程序使用 this 访问该连接池`DataSource`。DataSource`Connection`从连接池分发逻辑对象。

逻辑和物理连接的确切内部工作方式取决于实现，但这些逻辑连接通常是围绕物理连接的某种代理或包装器。获取逻辑连接时，物理连接会从连接池中检出。当关闭逻辑连接时，连接池会收到物理连接再次可用的信号，并将其返回给连接池。

# c# - 正则表达式长度验证：忽略前导和尾随空格

> ID：15225212
> 
> 赞同：3
> 
> 时间：2013-03-05T13:37:51.537
> 
> 标签：c#, asp.net, .net, regex

我试图将每个帖子的用户限制在 5 到 1024 个字符之间。

我们目前正在为此使用 asp.net RegularExpressionValidator。

如果我将表达式设置为以下内容，这有点工作：

```
body.ValidationExpression = string.Format("^[\\s\\S]{{{0},{1}}}$",
        MinimumBodyLength,
        MaximumBodyLength); 
```

但是，这并没有考虑换行和前导/尾随/多个空格。所以用户可以输入如下内容： Ok *(三个空格)*。（点），它仍然会被验证，因为三个空格算作字符。换行符也是如此。我们也可以键入单个 . （点）后跟 5 个空格/换行符。

我尝试了多种在网上找到的正则表达式变体，但似乎没有一个完全符合我的需求。我希望他们输入最少 5 个字符，最多 3000 个字符，但我并不关心他们使用了多少新行和空格。

为了澄清，我希望人们能够输入：

```
Hi,
My name is ben 
```

我不希望他们能够输入：

```
Hi                  . 
```

或者

```
A              B 
```

（很多换行符或空格）

正则表达式可能不是要走的路吗？如果是这样，我如何在正则表达式评估之前搜索和替换字符串（同时仍然使用旧表达式在验证器中捕获它）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T13:44:42.177

使用下面的正则表达式：

```
body.ValidationExpression = string.Format("^((\S)|((\s+|\n+|(\r\n)+)+\S)|(\S(\s+|\n+|(\r\n)+))+){{{0},{1}}}$",
    MinimumBodyLength,
    MaximumBodyLength); 
```

它将单个字符或在任意数量的空白字符之后（或之前）的单个字符视为单个实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:46:10.680

如果我理解你的问题，你只想计算单词字符。如果这是重点，你可以试试这个：

```
body.ValidationExpression = string.Format("^\w{{{0},{1}}}$",
MinimumBodyLength,
MaximumBodyLength); 
```

# php - 从下拉选择中显示数据库内容

> ID：15225213
> 
> 赞同：3
> 
> 时间：2013-03-05T13:37:51.743
> 
> 标签：php, jquery, mysql, ajax

在我的网站上，我有一个页面来显示推荐。我编写了这段代码来显示我在数据库中的所有推荐。

到目前为止，这是我的代码：

```
while ( $row = mysqli_fetch_array( $r, MYSQLI_ASSOC)) {
    $testimonial = $row['testimonial'];
    //echo $testimonial;
    $mytestimonial = nl2br($testimonial);
    $city               = $row['city_name'];
    $name               = $row['name'];
    $url                = $row['web_address'];
    $imageName      = $row['image_name'];
    $type               = $row['membership_type'];
} 
```

使用此代码，我可以将我所有的推荐信带到该页面。它很适合我。我的问题是现在我需要根据其类型过滤我的推荐。我的数据库中有 3 种不同类型的推荐信。（导师，学院，学生）

我将使用一个选择框来过滤数据。从选择框中选择一个选项时，我需要根据所选类型显示推荐。

```
<div class="filter-box">    
    <div id="select_box">
        <form method="post" action="">          
            <div class="variation2">
                <label>Filter By</label>
                <select class="select">
                    <option>Tutor</option>
                    <option>Institute</option>
                    <option>Student</option>
                </select>
            </div>
        </form> 
    </div>  
</div> 
```

谁能让我朝着这里的方向前进？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:56:27.580

按名称为每个推荐 div 添加一个类

```
 <div class="student">testimonial goes here</div> 
```

现在使用 jquery 一次性隐藏/显示类别。

```
 $('.student').show(); 
```

我希望它有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:42:25.083

一旦用户选择了 3 个选项之一并显示您所需的推荐信，为什么不动态重新加载选择框（使用 AJAX）。我想这将解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:43:58.180

所以你想然后根据他们的类型选择推荐

```
$q = "SELECT testimonial, city_name, name, web_address, image_name, membership_type
        FROM testimonials 
        INNER JOIN city ON city.city_id = testimonials.city_id
        WHERE type = '$type'
        ORDER BY date_added DESC LIMIT $start, $display"; 
```

现在您还想从用户那里获取类型

```
<select name="type" class="select"> 
```

随着 POST

```
$type = $_POST['type']; 
```

**自动提交更改示例的表单**

Javascript：

```
<script type="text/javascript">
    function submitform(){
        document.frmType.submit();
    }
</script> 
```

形式：

```
<form name="frmType" method="post" action="">
    <select name="type" class="select" onchange="submitform()"> 
```

可以在[此处找到更多示例](http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T13:52:20.873

你有几个选择。第一个是[ajax](http://api.jquery.com/jQuery.ajax/)。二是提交表单onchange或onsubmit：

```
<select class="select" name="type" onchange="document.forms[0].submit();">
    <option value="Tutor">Tutor</option>
    <option value="Institute">Institute</option>
    <option value="Student">Student</option>
</select> 
```

你的查询：

```
$type = '';
if(!empty($_POST) && isset($_POST[type])){
    $type = " WHERE testimonials.type = '".$_POST[type]."'";
}
$q = "SELECT testimonial, city_name, name, web_address, image_name, membership_type
        FROM testimonials 
        INNER JOIN city ON city.city_id = testimonials.city_id
        ".$type."
        ORDER BY date_added DESC LIMIT $start, $display"; 
```

当然，请务必检查表单是否已提交。

# windows-phone-8 - 出现选项时的 Windows Phone 返回键行为

> ID：15225220
> 
> 赞同：0
> 
> 时间：2013-03-05T13:38:16.393
> 
> 标签：windows-phone-8

我正在开发一个应用程序。显示完整图像的页面，当您点击图像时，图像标题和声音选项会从两个相对的侧面出现，即左侧的标题和右侧的声音选项以及翻译动画。我想明确一点，当我按下后退按钮时，我可以导航到后一页，或者我必须先让这些选项消失，然后再按后退键才能从微软认证的角度转到上一页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:57:12.890

我相信自 windows phone 7 以来也是如此。

您应该被允许捕获返回事件并添加一些代码。我不认为这被视为不好的做法，只是不允许您停止它。

话虽如此，我认为你不能轻易做到双后援。你可能需要检查一下。

这是关于该主题的相当有用的帖子： [WP7：两次导航](https://stackoverflow.com/questions/5628237/wp7-navigate-twice-back)

这导致另一篇关于导航堆栈的帖子：http: [//blogs.windows.com/windows_phone/b/wpdev/archive/2010/12/13/solving-circular-navigation-in-windows-phone-silverlight-applications。 aspx](http://blogs.windows.com/windows_phone/b/wpdev/archive/2010/12/13/solving-circular-navigation-in-windows-phone-silverlight-applications.aspx)

# codeigniter - Codeigniter 会话类似乎在 facebook iframe 中不起作用

> ID：15225223
> 
> 赞同：1
> 
> 时间：2013-03-05T13:38:22.417
> 
> 标签：codeigniter, session, cookies, safari

我使用 codeigniter 构建了一个简单的是或否测验应用程序。它是一个 facebook 页面选项卡，因此可以在 iframe 中访问。

随着用户通过测验的进展，他们的分数对于每个正确答案都会增加 +1，并使用会话类存储。

它在 Chrome 中很好用，但在 safari 中由于某种原因无法存储分数。

```
//if the user answered correctly add one correct answer

$correct_answers = $this->session->userdata('correct_answers');
$correct_answers += 1;
$this->session->set_userdata('correct_answers', $correct_answers); 
```

**编辑：**

我已将会话数据打印到应用程序上，我可以看到存储了第一个正确答案，但是如果您回答不正确，它不会显示任何“正确答案”。它也不会增加。如果您要正确回答所有问题，则最终结果为 1。如果没有正确答案，则最终结果为 0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:51:34.983

不幸的是，Safary 阻止了 3rd 方 cookie，这对我们 Facebook 应用程序开发人员来说是一个大问题。即使对 safari 有新的更新，唯一可以肯定工作的解决方案是我将在上面描述的解决方案。

我不知道您的应用程序是如何设计的，但我所做的每个应用程序都有一个带有按钮的登录页面，供用户进入该页面。

这个按钮有两个主要用途，第一个是在用户尚未授予的情况下请求权限，另一个是打开一个新窗口，其中包含我的应用所在的 url。因为用户在 iframe 之外访问您的域，您可以创建一个会话，所以基本上这个新窗口访问我的 url 创建一个会话，然后自行关闭。

您可以在上面的问题中阅读更多相关信息。尽管大多数答案都已过时，但您会了解哪些有效，哪些无效

[Safari 3rd 方 cookie iframe 技巧不再有效？](https://stackoverflow.com/questions/9930671/safari-3rd-party-cookie-iframe-trick-no-longer-working)

**编辑**

我所做的是在用户按下按钮后，应用程序转到下一页，然后我打开一个带有一些 javascript 的新窗口（如弹出窗口）。

因此，在登录页面上，您只需在按钮上放置一个侦听器（注意我使用的是 jquery）

```
$(document).on("click", ".bt-landing", function(){
window.open('<?=site_url("app/create_session")?>', '_blank', 'toolbar=0,location=0,menubar=0');
}); 
```

这是控制器方法“create_session”的代码

```
public function create_session(){
        setcookie("safari_test", "1");
        $this->load->view('create_session');
    } 
```

加载的视图是这个：

```
<html>
    <head>
        <meta charset="utf-8">
        <title>App title</title>
        <script type="text/javascript" src="<?=base_url('public/js/jquery-1.9.1.min.js')?>"></script>
    </head>
    <body>
    <script type="text/javascript">
    $(document).ready(function(){
       setTimeout(function(){window.close()},1000);
    })
    </script>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:33:35.447

如果您使用 IE，则必须使用 P3P 隐私政策。如果你没有，cookie 不能在 facebook 上的 iframe 下工作：

生成 P3P 隐私政策：

> [http://www.p3pwiz.com/begin.php](http://www.p3pwiz.com/begin.php)

你可以试试这个，一些用户说也很有用：

> [http://viralpatel.net/blogs/how-to-set-third-party-cookies-with-iframe/](http://viralpatel.net/blogs/how-to-set-third-party-cookies-with-iframe/)

信息：

> [http://en.wikipedia.org/wiki/P3P](http://en.wikipedia.org/wiki/P3P)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:03:14.163

尝试更改您的配置设置`/application/config/config.php`：

```
$config['sess_match_useragent'] = FALSE; 
```

将应用程序放在 IFRAME 中可能会弄乱由 CI 会话的默认设置执行的用户代理检查的结果。

否则，来自 CI 的正确调试日志会很好，以便查看会话“丢失”的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-16T14:29:04.587

与 Fabio 的最佳答案相关，这里有一种检查 Safari 的方法：

```
function isSafari() {

    var ua = navigator.userAgent.toLowerCase();
    if (ua.indexOf('safari') != -1) {
        if(ua.indexOf('chrome')  > -1) {
            return false;
        } else {
            return true;
        }
    }

    return false;

} 
```

# php - 在 jquery 对话框中设置 cookie 并在使用邮政编码提交后在页面上显示所选值

> ID：15225225
> 
> 赞同：0
> 
> 时间：2013-03-05T13:38:34.853
> 
> 标签：php, javascript, jquery, codeigniter, cookies

我正在制作一个页面，人们必须填写他们的邮政编码，以便他们可以搜索附近地区的工厂。

我使用了 jquery 模态对话框，人们必须在其中输入他们的邮政编码并单击提交。然后我想设置一个cookie，这样当用户第二次进入该站点时，仍然设置了邮政编码。所以他可以直接搜索工厂。

我有这个弹出窗口： ![对话](../Images/912aa946ade69fedddeb90aa39c0ec0b.png)

人们必须在那里填写他们的邮政编码，然后单击 opslaan（保存）

在这里您可以看到带有搜索功能的主页。人们可以搜索不同的公里数。

![搜索和主要](../Images/7cc9391359619559810870fc11d953d0.png)

我想要一个带有填写邮政编码的标签或其他东西，以便人们可以使用他们的邮政编码进行搜索。

编辑：

我的 jquery 对话框代码：

```
$(function() {

$( "#dialog" ).dialog(
{ 
show: "slow",
modal: "true",
width: 600,
show: "fold",
hide: "fade",
resizable: false,
draggable: false,
buttons: [ { id: "go", text: "Opslaan", click: function() { $( this ).dialog( "close" ); } } ],
open: function(event, ui) { $(".ui-dialog-titlebar-close").hide();  }});
$(".ui-widget-overlay").css({background: "#000", opacity: 0.8});
}); 
```

当我输入这段代码时：

```
<input type="text" id="postcode" value="" name="search"/>
<button id="go">Opslaan</button> 
```

在 jquery 对话框的 div 中。这没用。

```
<div id="dialog" title="Welkom bij OostWestRegioBest.nl">
  <p>Vul hier uw postcode in en druk op opslaan:</p>
  <br />

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:42:23.783

我在这里推荐 jquery cookie：[https ://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

然后你会做

```
$.cookie('postcode', $('#postcode').val()); 
```

设置它，然后阅读它：

```
if(typeof $.cookie('postcode') !== 'undefined'){
    $('#postcode').val($.cookie('postcode'));
} 
```

因此，例如，如果您有以下 HTML：

```
<input type="text" id="postcode">
<button id="go">Go!</button> 
```

然后你的 JS 看起来像这样：

```
$(document).ready(function(){
    //story the cookie on button press
    $('#go').click(function(){
            $.cookie('postcode', $('#postcode').val());        
    });

    //retrieve the cookie on load if it's not undefined
    if(typeof $.cookie('postcode') !== 'undefined'){
            $('#postcode').val($.cookie('postcode'));
    }
}); 
```

这是一个功能示例：[http ://tinker.io/38617/4](http://tinker.io/38617/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:50:08.337

```
function setCookie(sName, sValue) {

    if(getCookie(sName)==null) {
        if(isValidUsrURL(path)) {
            document.cookie = sName + "=" + escape(sValue) + "; " +
                "path=/; ";
        } else {
            domainname='.example.com';
            document.cookie = sName + "=" + escape(sValue) + "; " +
                "path=/; domain=" + domainname + "; ";
        }
    }

}

function getCookie(sName) {

    // cookies are separated by semicolons
    var aCookie = document.cookie.split("; ");
    for (var i=0; i < aCookie.length; i++) {
        // a name/value pair (a crumb) is separated by an equal sign
        var aCrumb = aCookie[i].split("=");
        if (sName == aCrumb[0]) {
            return unescape(aCrumb[1]);
        }
    }
    // a cookie with the requested name does not exist
    return null;

}

function deleteCookie(sName) {
    document.cookie = sName + "=; expires=Thu, 01-Jan-70 00:00:01 GMT";
}

//EG usage : 
//deleteCookie('brochTabURL', '/', '.example.com');
//setCookie('brochTabURL', document.location.href );
//setCookie("COOKIE_CHECK","YES");
//var loginId = getCookie("COOKIE_CHECK"); 
```

# android - 以编程方式连接到便携式热点中的 android 设备

> ID：15225232
> 
> 赞同：7
> 
> 时间：2013-03-05T13:39:18.317
> 
> 标签：android, wifi

我已经成功地在我的设备上使用指定的 SSID 以编程方式创建了一个便携式热点。现在我想从另一台设备连接到它！我正在使用这段代码：

```
 WifiConfiguration conf = new WifiConfiguration();
    conf.SSID = "\"" + "TinyBox" + "\"";
    conf.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
    WifiManager wifiManager = (WifiManager)context.getSystemService(Context.WIFI_SERVICE); 
    wifiManager.addNetwork(conf);

    List<WifiConfiguration> list = wifiManager.getConfiguredNetworks();
    for( WifiConfiguration i : list ) {
        if(i.SSID != null && i.SSID.equals("\"" + "TinyBox" + "\"")) {
             wifiManager.disconnect();
             wifiManager.enableNetwork(i.networkId, true);
             wifiManager.reconnect();               
             break;
        }           
    } 
```

但什么也没有发生。错误在哪里？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T07:15:15.887

所以伙计们，我发现了问题！由于引号“”，SSID 错误。因此，如果您使用以下代码创建一个开放的便携式热点（我在网上某处获取）：

```
 WifiManager wifiManager = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);
    if(wifiManager.isWifiEnabled())
    {
        wifiManager.setWifiEnabled(false);          
    }       
    Method[] wmMethods = wifiManager.getClass().getDeclaredMethods();   //Get all declared methods in WifiManager class     
    boolean methodFound=false;
    for(Method method: wmMethods){
        if(method.getName().equals("setWifiApEnabled")){
            methodFound=true;
            WifiConfiguration netConfig = new WifiConfiguration();
            netConfig.SSID = "\""+"TinyBox"+"\"";
            netConfig.allowedAuthAlgorithms.set(WifiConfiguration.AuthAlgorithm.OPEN);

            try {
                boolean apstatus=(Boolean) method.invoke(wifiManager, netConfig,true);          
                for (Method isWifiApEnabledmethod: wmMethods)
                {
                    if(isWifiApEnabledmethod.getName().equals("isWifiApEnabled")){
                        while(!(Boolean)isWifiApEnabledmethod.invoke(wifiManager)){
                        };
                        for(Method method1: wmMethods){
                            if(method1.getName().equals("getWifiApState")){
                                int apstate;
                                apstate=(Integer)method1.invoke(wifiManager);
                            }
                        }
                    }
                }
                if(apstatus)
                {
                    System.out.println("SUCCESSdddd");  

                }else
                {
                    System.out.println("FAILED");   

                }

            } catch (IllegalArgumentException e) {
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                e.printStackTrace();
            } catch (InvocationTargetException e) {
                e.printStackTrace();
            }
        }      
    } 
```

您需要使用以下方式连接到它：

```
 WifiConfiguration conf = new WifiConfiguration();
    conf.SSID = "\"\"" + "TinyBox" + "\"\"";
    conf.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE);
    WifiManager wifiManager = (WifiManager)context.getSystemService(Context.WIFI_SERVICE); 
    wifiManager.addNetwork(conf);

    List<WifiConfiguration> list = wifiManager.getConfiguredNetworks();
    for( WifiConfiguration i : list ) {
        if(i.SSID != null && i.SSID.equals("\"\"" + "TinyBox" + "\"\"")) {
            try {
                wifiManager.disconnect();
                wifiManager.enableNetwork(i.networkId, true);
                System.out.print("i.networkId " + i.networkId + "\n");
                wifiManager.reconnect();               
                break;
            }
            catch (Exception e) {
                e.printStackTrace();
            }

        }           
    } 
```

# java - 创建应用程序还是创建自定义 ROM？

> ID：15225237
> 
> 赞同：1
> 
> 时间：2013-03-05T13:39:37.470
> 
> 标签：java, android, rom, kiosk-mode

我有一个客户有兴趣为他开发一个信息亭。他正在使用特定的平板设备，他希望使用 Android ICS 作为操作系统来控制设备的硬件。

现在他想要一个在它之上开发的应用程序，它将作为**母应用程序**工作。

这个母应用程序的特点是它将锁定用户可用的所有其他功能。据我所知，开发这样的应用程序是可能的。

现在我面临的问题是他的下一个要求。

客户端希望这个母应用程序控制设备上应用程序的安装，这些应用程序将作为这个母应用程序的子应用程序安装。根据他的要求，他希望这个母应用控制子应用的生命周期。

现在我无法从应用程序中找到任何解决方案（我的错！）。所以我想到了改变Android本身的Application Framework来满足这个要求的选项（可能创建一个自定义ROM）。

你有什么建议？有什么方法可以从应用程序本身执行此操作，还是我必须为其修改应用程序框架。

# list - VBA：如何列出由标题分隔的行上的项目？

> ID：15225239
> 
> 赞同：0
> 
> 时间：2013-03-05T13:39:40.080
> 
> 标签：list, vba, header, copy, rows

我想根据条件列出从 Sheet1 到 Sheet2 的行，一旦根据第一个条件没有要复制的行，就转到下一个条件，并按标题分隔复制的行。

Sheet1 包含一个未排序的项目列表，我希望能够随时添加和删除项目。我还想将项目分类为不同的类型。Sheet1 看起来像这样：

```
ProjectID 项目名称 类型 成本
1个项目A发展-120
2 项目B开发-250
3 ProjectC维护-30

```

然后我想通过 VBA 将数据复制到 Sheet2 中，格式如下：

```
维护项目
ProjectID 项目名称 类型 成本
3 ProjectC维护-30

开发项目
ProjectID 项目名称 类型 成本
1个项目A发展-120
2 项目B开发-250

```

我一直在寻找解决方案，但没有找到适合我需要的解决方案，而且我不是一个非常有经验的 VBA 用户。关于在这里使用什么方法的任何提示或提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:38:45.143

假设 sheet2 在您请求的格式中为空白，这会将您的数据从 sheet1 复制到 sheet2。

```
Sub SplitData_Click()
    Dim dicType As Object
    Set dicType = CreateObject("scripting.dictionary")

    Dim i As Integer
    Dim lstRow As Long
    Dim val As String
    lstRow = ActiveSheet.Cells(ActiveSheet.Rows.Count, 4).End(xlUp).Row

    Dim projects() As Variant
    ReDim projects(0 To lstRow - 2, 0 To 3) ' I like 0 based arrays

    ' Populate the dictionary with the unique types
    For i = 2 To lstRow
        projects(i - 2, 0) = Range("A" & i) ' ProjectID
        projects(i - 2, 1) = Range("B" & i) ' ProjectName
        projects(i - 2, 2) = Range("C" & i) ' Type
        projects(i - 2, 3) = Range("D" & i) ' Cost

        val = Range("C" & i)
        If dicType.Exists(val) Then
            dicType.Item(val) = dicType.Item(val) + 1
        Else
            dicType.Add val, 1
        End If
    Next i

    Dim header() As Variant
    ReDim header(0 To 3)
    header(0) = "ProjectId"
    header(1) = "ProjectName"
    header(2) = "Type"
    header(3) = "Cost"

    Sheets("Sheet2").Select

    ' loop through each type and build its structure on sheet 2
    Dim key As Variant
    For Each key In dicType
        If Range("A1") = "" Then
            Range("A1").Value = key & " Projects"
        Else
            lstRow = ActiveSheet.Cells(ActiveSheet.Rows.Count, 1).End(xlUp).Row + 2
            Range("A" & lstRow).Value = key & " Projects"
        End If

        lstRow = ActiveSheet.Cells(ActiveSheet.Rows.Count, 1).End(xlUp).Row + 1
        Range("A" & lstRow).Value = header(0)
        Range("B" & lstRow).Value = header(1)
        Range("C" & lstRow).Value = header(2)
        Range("D" & lstRow).Value = header(3)

        For i = 0 To UBound(projects)
            lstRow = ActiveSheet.Cells(ActiveSheet.Rows.Count, 1).End(xlUp).Row + 1
            If projects(i, 2) = key Then
                Range("A" & lstRow).Value = projects(i, 0)
                Range("B" & lstRow).Value = projects(i, 1)
                Range("C" & lstRow).Value = projects(i, 2)
                Range("D" & lstRow).Value = projects(i, 3)
            End If
        Next i

        Debug.Print key
    Next key
End Sub 
```

# jquery - jquery 将 "#!/undefined" 附加到 url ，返回功能不起作用

> ID：15225240
> 
> 赞同：-1
> 
> 时间：2013-03-05T13:39:45.630
> 
> 标签：jquery, url

我正在使用 jquery 1.7.1.js

如果我在 url 的末尾运行我的项目，#!/undefined 就像

`http://localhost:6060/saraswathi_achala_web/faqs.action#!/undefined`

我不知道为什么？

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:46:37.913

您加载了一些 jQuery 插件或其他脚本，它们试图使用“ [hashbang](https://www.google.com/search?q=hashbang%20url) ”来保留状态。你需要弄清楚是什么插件在做它，要么禁用它，要么弄清楚如何正确使用它。我们无法真正告诉您是什么脚本在执行此操作；尝试在您的脚本中搜索`location.hash`.

# r - 需要简单绘图的帮助：R 中相关矩阵和热图函数的混合

> ID：15225244
> 
> 赞同：1
> 
> 时间：2013-03-05T13:40:02.967
> 
> 标签：r, matrix, plot, heatmap

我有一个 data.frame 或矩阵，我想把它变成一个简单的图。我尝试了 heatmap 和 corrgram，但它们很复杂并且正在做我不想要的事情（缩放等）。

矩阵如下所示：

> ___V1_V2_V3_V4
> 
> V1--NA--0---1----1
> 
> V2---0---不适用--4----2
> 
> V3---1---4---NA---3
> 
> V4---1---2---3---不适用

那么 V1 与 V2、V3 和 V4 有多少共同点。我只想要对角三角形的下半部分，并且在对角线中是变量名，并且由于有 5 个值（0 到 4），我想要盒子内从浅红色到深红色的 5 种红色阴影。

我是否必须自己使用 rect() 和 text() 创建它，但由于我的矩阵比这个例子大，我想循环它而不是手动绘制每个框。我可以用ggplot2吗？

希望任何人有一个想法！泰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:13:52.033

这里的解决方案使用@agstudy 答案中提供`ggplot2`的数据框。`dat`

```
library(ggplot2)
ggplot(dat,aes(x,y,fill=z))+geom_tile()+
  scale_fill_gradient(low="red",high="darkred") 
```

![在此处输入图像描述](../Images/f3f02de1d3bbdd9bf8100f8ccce19c3f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:09:22.220

您可以`levelplot.points`从`latticeExtra`包装中展示此内容。

![在此处输入图像描述](../Images/b8616d8d031ff4f1b94ef6d1c18ea3fa.png)

首先，我重新创建您的数据。我的数据是 3 列 x(1:4)、y(1:4) 和 z 输入矩阵的级别。

```
mm <- rbind(
  c(NA,0,1,1),
  c(0,NA,4,2),
  c(1,4,NA,3),
  c(1,2,3,NA))
dat <- expand.grid(x=1:ncol(mm),y=1:nrow(mm))
dat$z <- as.vector(mm)

library(latticeExtra)
levelplot(z~x*y,data=dat,
       panel=function(...)
       {
         panel.levelplot.points(...,cex=10,pch=22)
         panel.grid()
       },par.settings=ggplot2like()) 
```

# android - 如何在android的java代码中为xml元素设置一个值？

> ID：15225245
> 
> 赞同：0
> 
> 时间：2013-03-05T13:40:05.177
> 
> 标签：android

我在activity_X.xml 中有一个edit_text 字段。我在 activty_X.xml 中有一个按钮 B。单击按钮 B 时，我需要为 edit_text 字段分配一个值。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:43:55.253

您应该自己尝试一些事情，然后如果您遇到任何问题，请发布任何问题......无论如何，这就是您如何实现这一点

```
Button buttonOne = (Button) findViewById(R.id.button1);
buttonOne.setOnClickListener(new Button.OnClickListener() {
    public void onClick(View v) {
           EditText editText1 = (EditText) findViewById(R.id.textidinxml);
         editText1.setText("Some text to show on edittext");                    
    }
}); 
```

# html - 表格垂直对齐webkit问题

> ID：15225246
> 
> 赞同：1
> 
> 时间：2013-03-05T13:40:06.367
> 
> 标签：html, css, html-table

给定以下示例：http: [//jsfiddle.net/upsidown/z4m7r/](http://jsfiddle.net/upsidown/z4m7r/)

HTML：

```
<table class="main-table" cellspacing="20">
    <tr>
        <td style="height:100%;"><table class="sub-table"><tr><td>Some text</td></tr><tr><td class="bottom-align">Some bottom aligned element</td></tr></table></td>
        <td>Some very long text. Some very long text. Some very long text. Some very long text. Some very long text. Some very long text. </td>
        <td>Some other text</td>
    </tr>
</table> 
```

CSS：

```
.main-table {

    width:300px; 
    vertical-align: top;
}

.main-table td {

    vertical-align: top; 
}

.sub-table {

    height:100%;
}

td {

    border:2px solid black;
}

td.bottom-align {

    vertical-align: bottom;
    background:yellow;
} 
```

黄色单元格文本应在底部垂直对齐。这适用于 Firefox，但不适用于 Safari / Chrome (webkit) 浏览器。

知道如何实现吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:00:15.277

首先：你为什么要使用表格和嵌套表格？这真的是表格数据吗？

对于您的问题：Webkit 很可能严格遵守 CSS 的[height](http://www.w3.org/TR/CSS21/visudet.html#propdef-height)规则，该规则说，仅当包含块具有明确的高度时，以百分比表示的高度才适用。

这意味着您需要给主表一个高度（一个单元格/行的高度是根据表格的高度和表格中的其他单元格/行的高度显式计算的）。如果这反过来是百分比，那么也是下一个父母（这里`body`），等等。

所以要么像

```
.main-table { height: 500px; } 
```

或者

```
html, body, .main-table { height: 100%; } 
```

会有所帮助。

（顺便说一句，`height: 100%`单元格上的没有意义。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:03:51.940

一个简单的解决方案是用填充填充空间：

```
td.bottom-align {
    padding-top:100%;
    vertical-align: bottom;
    background:yellow;
} 
```

这是演示：http: [//jsfiddle.net/z4m7r/11/](http://jsfiddle.net/z4m7r/11/)

**- 编辑 -**

将父表设置为 100% 高度，它应该可以解决问题。演示：http: [//jsfiddle.net/z4m7r/9/](http://jsfiddle.net/z4m7r/9/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T13:55:05.677

我已经更新了你的 jsfiddle：http: [//jsfiddle.net/z4m7r/6/](http://jsfiddle.net/z4m7r/6/)

首先，我不会在另一个表中使用一个表，因为它会使标记成为阅读和维护的噩梦。将一行放在表格底部而另一行放在底部也很困难。相反，我只是在单元格内放置了两个 div：

```
<td class="firstcell" style="height:200px;">
    <div>Some text</div>
    <div class="bottom">Some bottom aligned text</div>
</td> 
```

接下来，我将父单元格的位置设置为相对，并将底部 div 设为绝对：

```
.firstcell {
    position: relative;
    width: 100px;
}

.firstcell > div {
    border: solid thin black;
}

.bottom {
    position: absolute;
    bottom: 0;
    background: yellow;
} 
```

# xampp - 在 xampp for linux 上安装 appflower

> ID：15225247
> 
> 赞同：0
> 
> 时间：2013-03-05T13:40:19.797
> 
> 标签：xampp

我一直在尝试解决这个问题一段时间，我想我会在 stackexchange 上问它，以防有人尝试过这个并成功地让它工作。

我正在尝试通过 Xampp for Linux 安装一个名为 AppFlower 的 RAD webapp 工具。

我也遇到以下命令的问题：

symfony afs:init symfony: 找不到命令

这是用于启动 AppFlower Studio 开发环境的最终命令，但此命令不起作用。

我试过使用：

./symfony afs:init 与上述相同的错误

php ./symfony afs:init 给出一个 php 错误，说它没有安装，但这是用于 Linux 的 Xampp，因此该命令将不适用

/opt/lampp/etc/php.ini ./symfony afs:init 它会给出一个权限被拒绝的错误，但即使前面有'sudo'，它也会说'command not found'

appflower 论坛上发布的解决方案是针对 xampp 本身的，但我遇到的问题是他们使用 php.exe 命令运行 'symfony afs:init' 命令，而 xampp for linux 没有。我能想到的最接近的事情是使用 php.ini 文件，但是（如上所示）这不起作用。

希望有人可以就这个问题提供帮助。

问候，

笔记。在手动版本的 lamp 上运行 appflower 的过程（其中 php、mysql、apache 都单独下载）要复杂得多，并且 xampp 安装应该更容易（实际上是这样）但最后这个安装点，这个 'symfony afs:init' 命令是唯一的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:24:20.177

如果您已经在使用 Linux，为什么不直接安装 AppFlower。这很简单，也许我在途中丢失了一些东西，了解您为什么使用 XAMMP for Linux。

Ubuntu 上 AppFlower 的安装说明， [http://www.appflower.com/doc/1_2/learn_install_git_on_ubuntu](http://www.appflower.com/doc/1_2/learn_install_git_on_ubuntu)

# ember.js - 暂时中断/暂停 Ember.Binding

> ID：15225248
> 
> 赞同：1
> 
> 时间：2013-03-05T13:40:23.433
> 
> 标签：ember.js

我试图弄清楚如何编写`pauseBinding()`and `resumeBinding()`，以便我可以中断应用程序层之间的绑定，例如，如果用户输入到 Ember.TextField 时验证失败。

```
var source = Ember.Object.create({ value: 10 });
var target = Ember.Object.extend({ 
    source: source,
    valueBinding: 'source.value'
});

console.log(source.get('value'), target.get('value')); // 10, 10
target.set('value', 20);
console.log(source.get('value'), target.get('value')); // 20, 20

// Stop synchronizing between target.value and source.value
pauseBinding(target.get('valueBinding'));

// Only update target.value
target.set('value', 40);
console.log(source.get('value'), target.get('value')); // 20, 40

// Resume synchronizing, target.value is overwritten
resumeBinding(target.get('valueBinding'));

console.log(source.get('value'), target.get('value')); // 20, 20 
```

或者，更一般地问这个问题：**创建条件绑定最合适的习语是什么**，绑定仅单向流动，仅另一向流动，双向流动或不流动取决于条件（另一个属性）？

条件可能是验证（如果验证失败，则不要进一步传播无效值），或者条件可能是响应 UI 状态（例如焦点）（如果控件已获得焦点，则不要以编程方式更新其值，如这会混淆 UI）。

例如，当一个带有 valueBinding 的 Ember.TextField 被聚焦时（如在活动用户输入中），我不希望它被更新，即使绑定的 to() 端更新。但这似乎是一个*相反*方向的 oneWay() 绑定（oneWay from -> to，而不是 oneWay to -> from）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-05T17:59:00.417

Here's a JSFiddle containing my best shot at creating a `ConditionalBinding` class:

[http://jsfiddle.net/SDe8u/2/](http://jsfiddle.net/SDe8u/2/)

You can use it like this:

```
var from = Ember.Object.create({
    value: 0
});

var to = Ember.Object.create({
    from: from,
    valueBinding: ConditionalBinding
        .from('from.value')
        .pauseIfTrue('pausingProperty'),
        // Default:
        // .onResumeSetBothTo('latest')
    pausingProperty: false
}); 
```

While `pausingProperty` is set to true, the binding between from and to will not be synchonized in either direction. Upon resume, the binding will be synchronized to the latest-wins (you can also use `.onResumeSetBothTo('to')` or `.onResumeSetBothTo('from')` to explicitly set synching from to or from).

If you want to only pause in one direction, you can add `onlyPause('from')` or `onlyPause('to')`:

```
var to = Ember.Object.create({
    from: from,
    valueBinding: ConditionalBinding
        .from('from.value')
        .pauseIfTrue('pausingProperty')
        .onlyPause('from')
        .onResumeSetBothTo('from'),
    pausingProperty: false
}); 
```

# javascript - 在运行时自定义 CKEditor 的工具栏

> ID：15225250
> 
> 赞同：0
> 
> 时间：2013-03-05T13:40:25.477
> 
> 标签：javascript, ckeditor

我有一个使用 CKEditor 的网站。现在我想在运行时自定义工具栏“实时”，而不必创建编辑器的新实例。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:55:54.277

我有解决方案。我正在使用 ckeditor.replace，它现在可以工作了。我正在销毁现有实例，然后尝试使用替换。实际上替换将创建一个新实例。

# python - 间隔重复功能？

> ID：15225252
> 
> 赞同：3
> 
> 时间：2013-03-05T13:40:36.353
> 
> 标签：python, multithreading, timer, wxpython

我正在制作一个 wxPython 应用程序，我需要每 15 秒从互联网更新一个值。有什么方法可以让我有一个函数来设置这个值，并让它在这个时间间隔在后台运行，而不会中断程序？

编辑：这是我正在尝试的：

```
import thread

class UpdateThread(Thread):
    def __init__(self):
        self.stopped = False
        UpdateThread.__init__(self)
    def run(self):
        while not self.stopped:
            downloadValue()
            time.sleep(15)
def downloadValue():
    print x

UpdateThread.__init__() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:47:19.473

您想要的是添加一个以指定速度运行您的任务的线程。

您可以在这里查看这个很棒的答案：[https](https://stackoverflow.com/a/12435256/667433) ://stackoverflow.com/a/12435256/667433来帮助您实现这一目标。

*编辑*：这是应该为您工作的代码：

```
import time
from threading import Thread # This is the right package name

class UpdateThread(Thread):
    def __init__(self):
        self.stopped = False
        Thread.__init__(self) # Call the super construcor (Thread's one)
    def run(self):
        while not self.stopped:
            self.downloadValue()
            time.sleep(15)
    def downloadValue(self):
        print "Hello"

myThread = UpdateThread()
myThread.start()

for i in range(10):
    print "MainThread"
    time.sleep(2) 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:16:55.960

我做了类似的事情：

- 你需要一个线程在后台运行。

- 并定义一个“自定义”事件，以便在需要时可以通知 UI

创建自定义 WX 事件

> (MyEVENT_CHECKSERVER, EVT_MYEVENT_CHECKSERVER) = wx.lib.newevent.NewEvent()

在 UI " **init** " 上，您可以绑定事件，并启动线程

> ```
>  #  bind the custom event 
>     self.Bind(EVT_MYEVENT_CHECKSERVER, self.foo)
>     # and start the worker thread
>     checkServerThread = threading.Thread(target=worker_checkServerStatus
>                                         ,args=(self,) )
>     checkServerThread.daemon = True
>     checkServerThread.start() 
> ```

工作线程可以是这样的，ps。caller 是 UI 实例

> def worker_checkServerStatus（调用者）：
> 
> ```
>  while True:    
>        # check the internet code here
>        evt = MyEVENT_CHECKSERVER(status='Some internet Status' ) #make a new event
>        wx.PostEvent(caller, evt) # send the event to the UI
>        time.sleep(15) #ZZZzz for a bit 
> ```

**编辑**：错过阅读问题...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-13T19:41:54.600

另一种方法是使用计时器：

```
import threading
stopNow = 0
def downloadValue():
    print("Running downloadValue")
    if not stopNow: threading.Timer(15,downloadValue).start()

downloadValue() 
```

这是重复函数的经典模式：函数本身会为其自身添加一个定时调用。要开始循环，请调用该函数（它立即返回）。要打破循环，请将 stopNow 设置为 1。

# perl - -l $_ 在 Perl 中有什么作用，它是如何工作的？

> ID：15225254
> 
> 赞同：4
> 
> 时间：2013-03-05T13:40:41.107
> 
> 标签：perl

嵌套代码是什么意思

```
foreach (@items)
{
    if (-l $_)    ## this is what I don't understand: the meaning of -l
    {
        ...
    }
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T13:42:39.600

它是一个检查文件是否为符号链接的[运算符。](http://perldoc.perl.org/functions/-X.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T15:02:15.843

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-05T14:12:05.177

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-05T13:43:38.230

从[perldoc](http://perldoc.perl.org/functions/-X.html)：

```
 -l File is a symbolic link. 
```

# asp-classic - 记录集分页导航

> ID：15225259
> 
> 赞同：0
> 
> 时间：2013-03-05T13:40:58.987
> 
> 标签：asp-classic

我有一个记录集分页导航和一个输入一些文本的文本框。我想要的是当我单击分页导航上的下一个按钮时，文本仍将保留在那里，直到我点击清除按钮（这是唯一一次将在文本框中删除）。有什么办法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T05:39:12.283

通过 Jquery，您可以实现这一点。

在按钮单击事件上，您可以清除文本框

```
$("#btnID").click(function() {
$("#textboxID").val('');
}); 
```

# google-maps - 我可以从 Google Map Directions 获取道路列表吗？

> ID：15225260
> 
> 赞同：-1
> 
> 时间：2013-03-05T13:41:00.027
> 
> 标签：google-maps, google-maps-api-3, google-directions-api

通过 google maps javascript API v3 获取路线时，是否可以获得旅途中遇到的所有道路的列表？

方向说明显然有道路名称，可以解析/刮掉这些名称，但我想知道是否有办法获得最终列表。

谢谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:16:56.273

即使从指示响应中获得它们也不是 100% 确定的事情。谷歌确实有一些道路名称。

不，afaik 没有办法在不解析响应的情况下获取道路名称列表。

# c# - 如何通过 SOAP 注册设备？

> ID：15225261
> 
> 赞同：2
> 
> 时间：2013-03-05T13:41:00.120
> 
> 标签：c#, soap, stream, dynamics-crm-2011, dynamics-crm-online

我正在执行以下代码，以便使用 live id 注册随机用户名和登录密码。

```
String regUrl = "https://login.live.com/ppsecure/DeviceAddCredential.srf";
WebRequest request = WebRequest.Create(regUrl);
request.ContentType = "application/soap+xml; charset=UTF-8";
request.Method = "POST";
request.Timeout = 60000;

StreamReader reader = new StreamReader(request.GetRequestStream());
String contents = reader.ReadToEnd(); 
```

我正在按照[本文](http://msdn.microsoft.com/en-us/library/gg328147.aspx)中的代码进行操作，这并不快也不容易。我收到错误消息，告诉我*流不可读*。

我错过了什么，可以做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:02:11.053

当您应该写入请求流时，您正在尝试从请求流中读取。*响应*流包含服务器的回复。

# java - 动态设置对象的值（动态属性/类型）

> ID：15225262
> 
> 赞同：0
> 
> 时间：2013-03-05T13:41:00.527
> 
> 标签：java, android, reflection, dynamic-cast

我正在尝试创建 JSON 到对象映射器。它的主要思想是“用户”定义了一个字典，其中键是 JSON 属性，值是对象属性名称。那么它是如何工作的（到目前为止）：

1.  从 JSON 中获取值 (var jsonValue)
2.  从 getter 获取属性类型（var methodType）
3.  创建setter方法并从json插入值

唯一的问题是我不能动态地将 jsonValue 转换为对象。我必须检查对象类型（methodType）是什么，然后将其转换为 String、Long、Integer 等。我可以以某种方式动态投射它吗？

```
 private Cookbook createCookbook(JsonObject jsonCookbook) {
    //Cookbook to return
    Cookbook cookbook = new Cookbook();

    Enumeration<String> e = mappingDictionary.keys();
    while (e.hasMoreElements()) {
        //get JSON value
        String mappingKey = e.nextElement();
        JsonElement json = jsonCookbook.get(mappingKey);
        String jsonValue = json.getAsString();

        //set JSON value to property
        String mappingValue = mappingDictionary.get(mappingKey);

        //reflection
        try {
            //get type of the getter
            String getMethodName = "get" + mappingValue; 
            Method getMethod = cookbook.getClass().getMethod(getMethodName, null);
            Class<?> methodType = getMethod.getReturnType(); 

            //set methods
            String setMethodName = "set" + mappingValue;
            Method setMethod = cookbook.getClass().getMethod(setMethodName, methodType);

            //set value to property
            /* DONT WANT TO DO IT LIKE THIS, THIS IS MY PROBLEM */
            if (methodType.equals(String.class))
                setMethod.invoke(cookbook, jsonValue);
            if (methodType.equals(Long.class))
                setMethod.invoke(cookbook, Long.valueOf(jsonValue));

        } catch (NoSuchMethodException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IllegalArgumentException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IllegalAccessException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (InvocationTargetException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }           
    }

    return cookbook;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:59:53.577

您可以使用反射（如您所用）和 .newInstance() 方法在运行时创建未知类型的非原始对象。

您不能以这种方式创建原始类型，例如，如果您查看标准的 JDK 序列化实现（ObjectWriter 的 writeObject()），您会看到有 8 种情况的开关。

# c# - 从数据库中获取特定数量值之间的项目

> ID：15225263
> 
> 赞同：0
> 
> 时间：2013-03-05T13:41:00.870
> 
> 标签：c#, linq, linq-to-entities

嗨，我最近学习了实体框架和 linq，我被要求转换这个存储过程：

```
CREATE PROCEDURE [dbo].[GetBooks]
@numberOfBooksOnPage int,
@pageNumber int
    AS
    BEGIN

    WITH AllBooks AS
    (
        SELECT ROW_NUMBER() OVER(ORDER BY Id) AS RowId,
        Id , Name , Author , Description , PublicationDate , CategoryId
        FROM Books
    )

    SELECT Id , Name , Author , Description , PublicationDate , CategoryId
    FROM AllBooks
    WHERE RowId BETWEEN ((@pageNumber - 1) * @numberOfBooksOnPage) + 1 AND @pageNumber * @numberOfBooksOnPage
    ORDER BY RowID
    END 
```

到目前为止，我只设法获得每页显示的书籍总数，但我仍然需要找到一种通过 pageNumber 获取书籍的方法。

这是我到目前为止所拥有的：

```
var books = bookContext.Books.Take(numberOfBooksOnPage); 
```

那么如何在我的 linq 查询中表示存储过程中写入的内容呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:43:53.337

如果你想做一个简单的分页，这里有一个快速的解决方案：

```
var books = bookContext.Books.OrderBy(x => x.Id).Skip(pageNo*booksPerPage).Take(booksPerPage); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:43:40.473

将 Skip() 方法与 take 结合使用

```
var books = bookContext.Books.OrderBy(b => b.Id).Skip(pageNumber * numberOfBooksOnPage).Take(numberOfBooksOnPage) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T13:44:01.010

你想[跳过](http://msdn.microsoft.com/en-gb/library/bb358985.aspx)-

```
var books = bookContext.Books.OrderBy(b => b.someField).Skip(pageNumber * numberOfBooksOnPage).Take(numberOfBooksOnPage); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T13:44:37.543

LINQ 中的分页通常涉及使用`Skip`和`Take`扩展，因此：

```
var numOfBooksPerPage = 20;
var currPage = 3;

var books = bookContext.Books.Skip(currPage * numOfBooksPerPage).Take(numOfBooksPerPage); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T14:01:05.453

如前所述，如果您想对结果进行分页，最好将**Take**与**Skip**结合使用，就像前面的答案一样。Linq to sql 没有公开**Between**方法，这可以很容易地用**Where**子句替换。或者，您可以编写自己的扩展方法：

```
public static IEnumerable<TSource> Between<TSource, TResult>
(
    this IEnumerable<TSource> source, Func<TSource, TResult> selector,
    TResult lowest, TResult highest
)
    where TResult : IComparable<TResult>
{
    return source.OrderBy(selector).
        SkipWhile(s => selector.Invoke(s).CompareTo(lowest) < 0).
        TakeWhile(s => selector.Invoke(s).CompareTo(highest) <= 0 );
} 
```

试一试：

```
public class Book
{
    public string Name { get; set; }
    public int Pages { get; set; }
}    

[Test]
public void TestBooks()
{
    var listOfNumbers = new List<Book>() {new Book(){Pages = 10}, new Book(){Pages = 44}};
    var result = listOfNumbers.Between(x => x.Pages, 0, 29);
} 
```

# .net - 是否有适用于 Silverlight 的 DataGrids 开源？

> ID：15225269
> 
> 赞同：0
> 
> 时间：2013-03-05T13:41:19.533
> 
> 标签：.net, silverlight, silverlight-4.0, silverlight-5.0

是否有任何适用于 Silverlight 5.0 的 DataGrids 开源，支持排序和过滤？我使用过 DevExpress（.NET 库），遇到了很多绑定问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:17:40.927

Silverlight Toolkit 中的 DataGrid 支持排序。如果绑定到 PagedCollectionView 或 DomainDataSource，则可以进行过滤。资源可[在此处](http://silverlight.codeplex.com/releases/view/88660)获得。

# ruby - 将文本区域拆分为名称和电子邮件

> ID：15225270
> 
> 赞同：1
> 
> 时间：2013-03-05T13:41:20.337
> 
> 标签：ruby, regex

我有一个文本区域，用户可以在其中输入一些电子邮件地址（强制）和姓名（可选）。考虑到它可能包含错误，我将如何拆分字符串以获取电子邮件地址和姓名的数组（或哈希）？到目前为止，如果不允许使用名称，我可以将其拆分为一个数组：

```
emails = @request_feedback.emails.split("\r\n")
emails.each {|email|
  if (email =~ /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i)
    FeedbackMailer.get_feedback(current_user, email, employee_id).deliver
  end
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:51:29.737

您需要使用括号在正则表达式中使用组

```
emails.each {|email|
    if (email =~ /\A([\w+\-.]+)@([a-z\d\-.]+)\.[a-z]+\z/i)
       FeedbackMailer.get_feedback($1, email, $2).deliver
    end
} 
```

# cassandra - 在 Cassandra 中插入速度非常慢

> ID：15225271
> 
> 赞同：1
> 
> 时间：2013-03-05T13:41:22.493
> 
> 标签：cassandra

我正在使用 Cassandra 1.2.1，并且正在使用 COPY 命令插入数百万行。每行长 100 个字节。问题是插入发生得相当慢，每秒 1500 行。我们有 3 个节点集群，每个节点有 50 GB 磁盘空间和 4 GB RAM。Cassandra 进程以 1 GB 的最大堆大小运行。我们将提交日志和数据文件存储在同一个磁盘上。这种行为的原因可能是什么？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-21T19:26:29.727

Apparently as of now, they are not planning to improve the speed of COPY.

See [https://issues.apache.org/jira/browse/CASSANDRA-4588](https://issues.apache.org/jira/browse/CASSANDRA-4588)

# api - 使用推特登录

> ID：15225274
> 
> 赞同：0
> 
> 时间：2013-03-05T13:41:43.047
> 
> 标签：api, twitter, oauth

查看此站点[http://www.thefancy.com/](http://www.thefancy.com/)并单击注册按钮，然后单击 Twitter 选项，它会打开一个 Twitter 登录窗口。

我认为这是一种类似于 Facebook 的 Twitter 登录方式的 JS 方法。

在我的网站上，我已经实现了 Connect With Facebook（使用 JS）并且为了保持我的网站一致，我想知道如何使用 Twitter 的登录服务来做到这一点。

有没有人有任何有用的建议或链接来帮助我解决这个问题 - 我只能找到在登录期间将用户带到 Twitter 网站然后又回到我的网站的指南，这不是我想要的。

非常感谢

编辑：我确实在 Twitter 的网站上注意到了这一点：“提醒：强烈建议不要将 OAuth 1.0A 与客户端 Javascript 一起使用。”

为什么 Twitter 建议不要将 JS 与 OAuth 一起使用，而 Facebook 和 Google 却乐于使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:51:39.020

你看过[Twitter OAuth](https://developer.twitter.com/en/docs/basics/authentication/overview/oauth)吗？为了让 Twitter 提供您的网站详细信息，它必须暂时将您的用户重定向到 Twitter，以便他们验证此访问权限。这个链接解释得更好一点：[https ://developer.twitter.com/en/docs/basics/authentication/overview/3-legged-oauth](https://developer.twitter.com/en/docs/basics/authentication/overview/3-legged-oauth)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T21:45:44.860

Temboo 简化了开发 Twitter 注册（通过 OAuth）的过程。有关详细信息，请参见此处：[https ://live.temboo.com/library/Library/Twitter/OAuth/](https://live.temboo.com/library/Library/Twitter/OAuth/)

但是 Temboo 没有 JS 库，因此您必须使用 REST API。

全面披露：我在 Temboo 工作。

# c++ - PCL：平面分割

> ID：15225276
> 
> 赞同：0
> 
> 时间：2013-03-05T13:41:49.940
> 
> 标签：c++, computer-vision, point-cloud-library

当尝试从[这里](http://www.pointclouds.org/documentation/tutorials/cylinder_segmentation.php#cylinder-segmentation)按照圆柱分段的示例进行操作时：

我已经复制了代码，但它不会在线编译：

```
extract.setIndices (inliers_plane); 
```

我得到的错误是：

```
function pcl::ExtractIndices<pcl::PointXYZ>::applyFilter(std::vector<int, std::allocator<int> >&): error: undefined reference to 'pcl::ExtractIndices<pcl::PointXYZ>::applyFilterIndices(std::vector<int, std::allocator<int> >&)' 
```

有什么想法有什么问题吗？

这些是我要链接的库：

```
-lpcl_io 
-lpcl_visualization 
-lpcl_tracking 
-lpcl_common 
-lpcl_surface 
-lpcl_kdtree 
-lpcl_keypoints 
-lpcl_octree 
-lpcl_registration 
-lpcl_sample_consensus 
-lpcl_search 
-lpcl_segmentation 
-lpcl_geometry 
-lpcl_surface 
-lpcl_features 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:14:59.053

`pcl_filters`也需要链接反对

# c# - Fluent NHibernate 双向多对一 IConvertible 异常

> ID：15225280
> 
> 赞同：3
> 
> 时间：2013-03-05T13:42:00.763
> 
> 标签：c#, fluent-nhibernate, many-to-one

我正在尝试为同一个类/表映射父/子之间的双向多对一关系。这是映射：

```
References(x => x.Parent).Column("ParentID");
HasMany(x => x.Children).KeyColumn("ParentID").Inverse().Cascade.All(); 
```

当我尝试用孩子列表保存父母时，出现以下错误

> System.InvalidCastException：对象必须实现 IConvertible。

如果父/子是两个不同的类/表，则上述映射有效。我还尝试通过删除使映射单向：

```
References(x => x.Parent).Column("ParentID"); 
```

然后我可以保存，但如果我取一个孩子，则父母为空。

任何想法如何解决这个问题？

* * *

Fit.Server.Persistence.Test.Repositories.SagOpgave.SagOpgavePersistenceTest.Opgave_gets_references 抛出异常：

System.InvalidCastException：对象必须实现 IConvertible。

```
at System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider)
at System.Convert.ChangeType(Object value, Type conversionType)
at Pervasive.Data.SqlClient.PsqlParameter.a(Type A_0)
at Pervasive.Data.SqlClient.q.a(PsqlParameter A_0, k A_1, a3 A_2, Int32 A_3)
at Pervasive.Data.SqlClient.q..ctor(PsqlParameter A_0, k A_1, Int32 A_2, Int32 A_3, Int32 A_4)
at Pervasive.Data.SqlClient.PsqlParameterCollection.a(k A_0, Int32 A_1, Int32 A_2, Int32 A_3)
at Pervasive.Data.SqlClient.PsqlCommand.a(Boolean A_0, CommandBehavior A_1, Boolean A_2)
at Pervasive.Data.SqlClient.PsqlCommand.ExecuteNonQuery()
at NHibernate.AdoNet.AbstractBatcher.ExecuteNonQuery(IDbCommand cmd)
at NHibernate.AdoNet.NonBatchingBatcher.AddToBatch(IExpectation expectation)
at NHibernate.Persister.Entity.AbstractEntityPersister.Insert(Object id, Object[] fields, Boolean[] notNull, Int32 j, SqlCommandInfo sql, Object obj, ISessionImplementor session)
at NHibernate.Persister.Entity.AbstractEntityPersister.Insert(Object id, Object[] fields, Object obj, ISessionImplementor session)
at NHibernate.Action.EntityInsertAction.Execute()
at NHibernate.Engine.ActionQueue.Execute(IExecutable executable)
at NHibernate.Engine.ActionQueue.ExecuteActions(IList list)
at NHibernate.Engine.ActionQueue.ExecuteActions()
at NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions(IEventSource session)
at NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event)
at NHibernate.Impl.SessionImpl.Flush()
at NHibernate.Transaction.AdoTransaction.Commit() 
```

找到了一个到目前为止有效的解决方案。

```
References(x => x.Parent).Column("ParentID").Not.Insert();
HasMany(x => x.Children).KeyColumn("ParentID").Cascade.All(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T13:10:15.883

我试着理解代码和错误。基于此，我可以看到您传递了一些数据类型无效或与列数据类型不匹配的数据。请在保存前检查所有列值。

# asp.net-mvc - MVC WebGrid，行选择

> ID：15225281
> 
> 赞同：1
> 
> 时间：2013-03-05T13:42:01.610
> 
> 标签：asp.net-mvc, row, webgrid

我有简单的 WebGrid 项目：

```
 grid.Column(format: (item) => @Ajax.ActionLink("Select", "LoadForEdit", "Receipt", new { Id = Model.Services.IndexOf(@item.Value) }, new AjaxOptions { UpdateTargetId = "ItemToEdit" })) 
```

而且我想在实际单击行时进行选择，而不仅仅是在该行中的“选择”项目上。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T05:33:46.140

我写了一篇关于使用 jQuery为 Razor 网页（[http://www.mikesdotnetting.com/Article/178/How-To-Make-A-WebGrid-Row-Clickable ）制作 WebGrid 行“可点击”的文章。](http://www.mikesdotnetting.com/Article/178/How-To-Make-A-WebGrid-Row-Clickable)你可以很容易地使代码适应 MVC。

# ruby - 对 Ruby / ChefSpec 编码风格的反馈

> ID：15225283
> 
> 赞同：6
> 
> 时间：2013-03-05T13:42:08.393
> 
> 标签：ruby, rspec, chef-infra, chefspec

我对 Ruby 比较陌生，但在过去的两周里，我一直在对 Chef 测试进行大量研究。这个测试使用 ChefSpec 和 Fauxhai，但它看起来不是很“红宝石”，我希望社区能给我一些关于编码风格的建议。有没有更好的方法来编写这样的嵌套循环？

食谱/foo/recipes/default.rb

```
package "foo" do
  action :install
end 
```

食谱/foo/spec/default_spec.rb

```
require 'chefspec'

describe 'foo::default' do
  platforms = { 
    "debian"   => ['6.0.5'],
    "ubuntu"   => ['12.04', '10.04'],
    "centos"   => ['5.8', '6.0', '6.3'],
    "redhat"   => ['5.8', '6.3'],
    "mac_os_x" => ['10.6.8', '10.7.4', '10.8.2'],
    "windows"  => ['2008R2']
  }

  platforms.each do |platform,versions|
    versions.each do |version|
      context "on #{platform} #{version}" do
        before do
          Fauxhai.mock(platform: platform, version: version)
        end

        it 'should install foo' do
          @runner = ChefSpec::ChefRunner.new.converge('foo::default')
          @runner.should install_package 'foo'
        end
      end
    end
  end
end 
```

欢迎任何和所有反馈。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-02T17:28:35.417

首先，一种常见的做法是将`ChefRunner`实例化提取到`let`帮助程序。您还可以在其中包含所有 Fauxhai 配置：

```
let(:chef_run) do
  ChefSpec::ChefRunner.new(platform: platform, version: version) do |node|
    node.set['foo']['bar'] = 'baz'
    # ....
  end.converge('foo::default')
end

it "installs foo" do
  expect(chef_run).to install_package 'foo'
end 
```

`expect`语法似乎被[推荐](https://github.com/rspec/rspec-expectations/blob/master/Should.md)超过`should`. 但在本例中，我将使用单线：

```
subject do
  ChefSpec::ChefRunner.new(platform: platform, version: version).converge('foo::default')
end
it { should install_package 'foo' } 
```

要稍微清理一下循环，您可以使用[RSpec 的共享示例](https://www.relishapp.com/rspec/rspec-core/docs/example-groups/shared-examples)。一个更扩展的例子：

```
require 'chefspec'

shared_examples 'foo' do |platform, version|
  context "on #{platform} #{version}" do
    let(:users) { %w[user1 user2] }
    let(:chef_run) do
      ChefSpec::ChefRunner.new(platform: platform, version: version) do |node|
        node.set['foo']['users'] = users
      end.converge('foo::default')
    end
    subject { chef_run }

    it { should install_package 'foo' }

    it "creates specified users" do
      users.each { |u| expect(chef_run).to create_user u }
    end
  end
end

describe 'foo::default' do
  platforms = {
    'debian'   => ['6.0.5'],
    'ubuntu'   => ['12.04', '10.04'],
    'centos'   => ['5.8', '6.0', '6.3'],
    'redhat'   => ['5.8', '6.3'],
    'mac_os_x' => ['10.6.8', '10.7.4', '10.8.2'],
    'windows'  => ['2008R2']
  }

  platforms.each do |platform, versions|
    versions.each do |version|
      include_examples 'foo', platform, version
    end
  end
end 
```

# mysql - id order 混合使用 order by

> ID：15225284
> 
> 赞同：0
> 
> 时间：2013-03-05T13:42:11.873
> 
> 标签：mysql, sql, database, sql-order-by

我正在使用 MySQL 作为数据库。

现在我让一切正常工作，但是由于我的客户希望在网站上进行过滤，我遇到了一些问题，即我到底需要做什么以及最好的方法是什么。

所以这是我的数据（我会尽可能简化）

```
id  name  price  nr.bed  nr.bath
---------------------------------
1     a     33     2        4
2     b    100     5        1
3     c    102     2        2 
4     d     85     1        1
5     e     37     6        4 
6     f     19     2        1 
```

因此，第一次加载页面时，我使用此查询从数据库中获取前 5 个：

```
SELECT * FROM hotel LIMIT 5 
```

我明白了：

```
id  name  price  nr.bed  nr.bath
---------------------------------
1     a     33     2        4
2     b    100     5        1
3     c    102     2        2 
4     d     85     1        1
5     e     37     6        4 
```

之后每次我打电话给这个：

```
SELECT * FROM hotel WHERE id>'last_id(in this case 5)' LIMIT 5 
```

我得到：

```
id  name  price  nr.bed  nr.bath
--------------------------------- 
6     f     19     2        1 
```

等等...

但是现在我需要使用过滤器，例如我将过滤价格

所以我需要有类似的东西：

```
SELECT * FROM hotel where id>5 order by price desc LIMIT 5 
```

但是后来我丢失了我的 id 订单，我无法从数据库中获取下五个，因为我无法与`id`酒店进行比较，因为一切都是按价格订购的。

我怎样才能做到这一点？我是否需要添加另一列或其他内容来保持我的订单不变？所有内容都使用表格中的 id 显示在网站上。

编辑：

我不确定这是否可能，因为我需要在 asc 中订购 id 并在 desc 中订购价格，但我不确定我们是否可以将这两者结合在一起而不添加另一列或其他东西。

编辑2：

我想得到这样的东西

```
id  id_copy  name  price  nr.bed  nr.bath
-----------------------------------------
 1      3     c     102     2        2 
 2      2     b     100     5        1
 3      4     d      85     1        1
 4      5     e      37     6        4 
 5      1     a      33     2        4
 6      6     f      19     2        1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:46:01.080

然后订购两列：

```
SELECT * FROM hotel where id>5 order by price desc , id asc LIMIT 5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:24:08.147

首先，您不应该在没有`limit`顺序`order by`的情况下使用。您的查询应如下所示：

```
SELECT *
FROM hotel
WHERE id>'last_id(in this case 5)'
ORDER BY id
LIMIT 5 
```

对于您的问题，您需要一个子查询：

```
select *
from (SELECT * FROM hotel where id>5 order by price desc LIMIT 5
     ) t
order by id 
```

内部查询按价格选择 5。外层按 id 排序。

`offset`如果您想将其用于“分页”，那么您应该熟悉`limit`. [这在此处](http://dev.mysql.com/doc/refman/5.5/en/select.html)的 MySQL 文档中有所描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:46:33.757

我想这就是你要找的

```
 SELECT * FROM hotel  order by price desc limit 0 ,5 
```

那么如果你想要下一个 5

```
 SELECT * FROM hotel  order by price desc limit 5 ,5 
```

然后

```
 SELECT * FROM hotel  order by price desc limit 10 ,5 
```

等等...

你可以像这样在php中做这个

```
 $sql="SELECT * FROM hotel  order by price desc "

if (sombutton is clicked) {
          $sql .= " limit 0,5" ;}
 if (sombutton is clicked){ 
                       $sql .= " limit 5,5" ; } 
```

`$i`或者您可以在每次添加 5时通过带有变量的循环来完成。

# r - 子集唯一对

> ID：15225292
> 
> 赞同：1
> 
> 时间：2013-03-05T13:42:25.477
> 
> 标签：r

我有一个货币符号列表，但它们成对出现，不能自相矛盾。下面是一个例子：

```
ccy <- c("USD","EUR","JPY","GBP","CAD","AUD","NZD","CHF","NOK","SEK")
g <- expand.grid(ccy,ccy)
g <- g[g[,1]!=g[,2],] 
```

*但是*美元兑欧元只是欧元兑美元的倒数，或者欧元兑日元只是日元兑欧元的倒数，所以我想从`data.frame`.

有没有一种程序化的方式只从列表中获取唯一的对？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T13:44:34.470

使用`combn()`：

```
combn(ccy, 2)
     [,1]  [,2]  [,3]  [,4]  [,5]  [,6]  [,7]  [,8]  [,9]  [,10] [,11] [,12] [,13] [,14] [,15] [,16]
[1,] "USD" "USD" "USD" "USD" "USD" "USD" "USD" "USD" "USD" "EUR" "EUR" "EUR" "EUR" "EUR" "EUR" "EUR"
[2,] "EUR" "JPY" "GBP" "CAD" "AUD" "NZD" "CHF" "NOK" "SEK" "JPY" "GBP" "CAD" "AUD" "NZD" "CHF" "NOK"
     [,17] [,18] [,19] [,20] [,21] [,22] [,23] [,24] [,25] [,26] [,27] [,28] [,29] [,30] [,31] [,32]
[1,] "EUR" "JPY" "JPY" "JPY" "JPY" "JPY" "JPY" "JPY" "GBP" "GBP" "GBP" "GBP" "GBP" "GBP" "CAD" "CAD"
[2,] "SEK" "GBP" "CAD" "AUD" "NZD" "CHF" "NOK" "SEK" "CAD" "AUD" "NZD" "CHF" "NOK" "SEK" "AUD" "NZD"
     [,33] [,34] [,35] [,36] [,37] [,38] [,39] [,40] [,41] [,42] [,43] [,44] [,45]
[1,] "CAD" "CAD" "CAD" "AUD" "AUD" "AUD" "AUD" "NZD" "NZD" "NZD" "CHF" "CHF" "NOK"
[2,] "CHF" "NOK" "SEK" "NZD" "CHF" "NOK" "SEK" "CHF" "NOK" "SEK" "NOK" "SEK" "SEK" 
```

* * *

该函数从您的输入向量`combn`生成所有唯一的长度组合。`n`

有关`?combn`更多详细信息，请参阅。

# linux - Bash：使用“at”对当前脚本的下一次执行进行编程

> ID：15225293
> 
> 赞同：2
> 
> 时间：2013-03-05T13:42:27.803
> 
> 标签：linux, bash, centos

我想执行一个脚本并让它安排下一次执行。一个样本是：

```
#!/bin/bash

TMP=/tmp/text.txt
SCRIPT=$(readlink -f $0)

date >>$TMP
at -f $SCRIPT now + 1 minutes >>$TMP 2>&1
echo -e "\n" >>$TMP 
```

示例执行如下：

1.  第一次执行OK。安排到下一分钟
2.  第二次执行写入正常但未安排

结果输出将是：

```
tue mar  5 14:34:01 CET 2013
job 15 at 2013-03-05 14:35

tue mar  5 14:35:00 CET 2013
job 16 at 2013-03-05 14:36

[now at 2013-03-05 14:38] 
```

`atq`什么都不输出，我也看不到任何 /var/at/jobs（事实上，`ls /var/at*`什么也不输出。/var/mail/ 中的任何用户都没有消息。我正在尝试 CentOS 版本 5.6 x86_64

有人对可能发生的事情有任何暗示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:04:46.163

怀疑，你已经说到点子上了......`echo $SCRIPT`给出'/ bin / bash'......我已经手动编写了完整路径，现在它可以工作了

# android - listview 内是否有水平滚动小部件

> ID：15225296
> 
> 赞同：0
> 
> 时间：2013-03-05T13:42:41.270
> 
> 标签：android, listview, android-viewpager, android-gallery

我需要在 ListView 的项目中创建一个可滚动的行。该行的行为应类似于 Gallery 或 ViewPager。它的设计行为类似于 Facebook 画廊。

我打算使用 Gallery，但由于它已被弃用，我不确定它是否是一个不错的选择。虽然建议使用 Fragment 来代替 Gallery，但不希望将其放在 ListView 中。

还有其他选择吗？或者我应该实现自己的自定义视图来计算和处理视图转换？有没有人尝试过类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:58:21.013

使行项 a[`HorizontalScrollView`](http://developer.android.com/reference/android/widget/HorizontalScrollView.html)具有[`LinearLayout`](http://developer.android.com/reference/android/widget/LinearLayout.html)内部。制作`LinearLayout`' 的方向`horizontal`并在里面添加你需要的东西。

# cakephp - 在生产中未检测到新视图，但在开发中工作正常

> ID：15225297
> 
> 赞同：0
> 
> 时间：2013-03-05T13:42:42.597
> 
> 标签：cakephp, cakephp-2.0

我在这里面临一个相当混乱的问题。

在使用新模型创建新视图后的开发环境中，一切正常。但是，当我将其上传到网站时，没有显示任何内容。也没有给出错误。

我尝试手动删除缓存文件，但没有用。（删除缓存文件仅适用于模型部分）。

我错过了什么？

提前致谢

**更新**

问题是视图未标记为允许（默认情况下，我的所有视图都标记为拒绝）。但是为什么用户在尝试访问受限视图时没有重定向到登录页面？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:21:26.620

您正在使用 AuthComponent，但忘记将新视图标记为“允许”，因此如果没有用户登录，则阻止访问该视图。

通过在控制器的 beforeFilter() 中将新视图标记为“允许”来使新视图“公开”；

```
public function beforeFilter() {
    parent::beforeFilter();

    if (isset($this->Auth)) {
        $this->Auth->allow(array(
            'action1',
            'action2',
            'theActionThatWasAdded',
        ));
    }
} 
```

文档： [http ://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#making-actions-public](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#making-actions-public)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:19:31.207

从 app/temp/cache 中删除缓存文件。检查文件夹是否有足够的权限。还要检查 hta 访问文件。

# azure - 将网站部署到云服务中的最佳实践

> ID：15225301
> 
> 赞同：3
> 
> 时间：2013-03-05T13:42:53.783
> 
> 标签：azure, cloud, azure-web-roles

在云服务上部署多个网站的最佳实践是什么？

我有三个网站，是否可以将这三个网站部署到一个云服务中？（一个云服务中的三个实例）

还是我必须创建三个云服务并分别部署每个网站？

谢谢

我的服务定义文件：

```
 <WebRole name="WebRoleName" vmsize="ExtraSmall">
    <Sites>
      <Site name="Web" physicalDirectory="../WebSite1">
        <Bindings>
          <Binding name="Endpoint1" endpointName="Endpoint1" />
        </Bindings>
      </Site>
      <Site name="Web2" physicalDirectory="..\..\..\WebSite2">
        <Bindings>
          <Binding name="Endpoint2" endpointName="Endpoint2" />
        </Bindings>
      </Site>
    </Sites>
    <Endpoints>
      <InputEndpoint name="Endpoint1" protocol="http" port="80" />
      <InputEndpoint name="Endpoint2" protocol="http" port="81" />
    </Endpoints>
    <Imports>
      <Import moduleName="Diagnostics" />
      <Import moduleName="RemoteAccess" />
      <Import moduleName="RemoteForwarder" />
    </Imports>
  </WebRole>
</ServiceDefinition> 
```

通过使用该代码，WebSite1 可用而 WebSite2 不可用，即使添加 :81 我使用远程桌面验证 IIS 上的部署，我看到 WebSite1 已正确部署但 WebSite2 未正确部署。WebSite2 和 WebSite2.Test 是部署在虚拟网站目录下的两个文件夹。通过手动复制虚拟网站目录下的 WebSite2 文件夹的内容，我可以通过 http://ID.cloudapp.net:81 访问我的[网站](http://ID.cloudapp.net:81)

有什么错误？为什么还为 WebSite2 部署了 Test 项目？（我检查了依赖关系，但没有选择）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:25:54.383

你可以做任何一种方式。这真的取决于你需要做什么。如果您想将所有网站托管在同一 url 下的端口 80 上，例如：

```
http://www.mywebsite.com/site1
http://www.mywebsite.com/site2
http://www.mywebsite.com/site3 
```

那么你可以试试这个：

[http://kellyhpdx.wordpress.com/2012/04/11/deploying-multiple-web-applications-to-a-single-azure-instance-and-applying-web-config-transforms-correctly/](http://kellyhpdx.wordpress.com/2012/04/11/deploying-multiple-web-applications-to-a-single-azure-instance-and-applying-web-config-transforms-correctly/)

或者，如果您不一定需要此实现并且您可以在不同的端口下托管您的网站，那么您可以在单独的角色下创建一个实例。

每个 webrole 甚至可以有 1 个云项目，例如，如果您想拥有一个测试管理网站来控制您的项目，该项目不应该包含在生产中，您可以有 2 个云项目：1 个包含所有生产实例，1 个使用您在需要时部署的测试管理网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T18:07:16.317

您必须手动修改 Azure 项目的 .csdef 文件，才能将多个站点添加到云服务中。[Wade Wegner 发表了一篇关于如何做到这一点的好文章](http://www.wadewegner.com/2011/02/running-multiple-websites-in-a-windows-azure-web-role/)。请注意，每个站点都必须具有唯一的主机标头。

# homebrew - Brew医生发出警告

> ID：15225312
> 
> 赞同：6
> 
> 时间：2013-03-05T13:43:22.207
> 
> 标签：homebrew

当我运行 brew doctor 时，我会发出大量警告。所以我继续，清理了现有的安装并从头开始。

现在我仍然收到一些警告：

```
 Warning: "config" scripts exist outside your system or Homebrew directories.
`./configure` scripts often look for *-config scripts to determine if
software packages are installed, and what additional flags to use when
compiling and linking.

Having additional scripts in your path can confuse software installed via
Homebrew if the config script overrides a system or Homebrew provided
script of the same name. We found the following "config" scripts:

    /opt/sm/pkg/active/bin/curl-config
    /opt/sm/pkg/active/bin/ncurses5-config
    /opt/sm/pkg/active/bin/ncursesw5-config
    /opt/sm/pkg/active/bin/pkg-config
    /opt/sm/pkg/active/bin/xml2-config
    /opt/sm/pkg/active/bin/xslt-config
Warning: You have a non-Homebrew 'pkg-config' in your PATH:
  /opt/sm/pkg/active/bin/pkg-config

`./configure` may have problems finding brew-installed packages using
this other pkg-config. 
```

但由于我几天前才开始使用 OS X，我不确定上述配置文件是否相关，或者我是否可以删除它们？已经浏览了几个小时的论坛，但目前仍然没有更明智的...任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T13:46:32.967

尝试`/opt/sm/pkg/active/bin/`退出您的 PATH。

这将防止安装在该目录中的脚本意外地优先于自制软件安装的脚本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-13T23:10:10.077

如果您是像我这样的新手并且想要更清楚地了解如何执行此操作，我在这里找到了这个答案[How to change path for homebrew: "config" 脚本存在于您的系统或 Homebrew 目录之外](https://stackoverflow.com/questions/17393804/how-to-change-path-for-homebrew-config-scripts-exist-outside-your-system-or-h/18466510#18466510)，它对我有用：

/opt/sm 位于 /etc/profile.d 目录中。通过输入打开它

cd /etc/profile.d 在终端中，然后

打开 。

在文本编辑器中打开 sm.sh 文件，然后通过在前面添加井号 # 来注释掉路径

PATH="${PATH}:/opt/sm/bin:/opt/sm/pkg/active/bin:/opt/sm/pkg/active/sbin"

在文本编辑器中保存更改，然后退出并重新启动终端。运行 brew doctor '警告' 应该消失了。

# c# - 如何设置新事件的值？

> ID：15225314
> 
> 赞同：0
> 
> 时间：2013-03-05T13:43:34.733
> 
> 标签：c#, servicemanager

我正在编写一个 C# 代码来创建一个新的 Service Manager 2012 事件并设置它的值 我在为事件设置“源”、“分类类别”和“受影响的用户”值时遇到问题，请提供任何帮助? 谢谢，，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-17T16:04:47.637

您可以在以下页面中找到答案：

[http://scsmnz.net/c-code-snippets-for-service-manager-1/](http://scsmnz.net/c-code-snippets-for-service-manager-1/)

[http://blog.scsmsolutions.com/2011/09/codesnipets-for-scsm-2010-sdk/](http://blog.scsmsolutions.com/2011/09/codesnipets-for-scsm-2010-sdk/)

SCSM 2010 和 2012 事件创建之间没有区别。

# python - 我可以同时使用 uwsgi + (tornado, gevent, etc) 吗？

> ID：15225320
> 
> 赞同：3
> 
> 时间：2013-03-05T13:43:47.967
> 
> 标签：python, django, tornado, uwsgi

为什么？因为我有一个 django 项目，它从用户那里捕获数据并使用许多网络服务向用户显示结果以比较信息，例如通过航空公司网络服务搜索机票并实时显示结果以比较机票的聚合网站.

现在我在“等待页面”中执行此操作，其中 celery 访问 web 服务，而 jquery 每 5 秒询问一次是否所有结果都准备好了，所以当准备好时重定向到结果页面。

我想要做的不是使用这个“等待页面”，我想在结果即将到来时实时提供结果页面，我想让它遵循最佳实践，我的意思是我不想 jquery get每 X 秒将结果提供给表格。

我认为一些基于协程的 python 库可以帮助我解决这个问题，但我想先了解更多关于你的经验并查看一些示例，我很困惑，因为项目的这一部分被设计为异步运行，我的意思是，使用 web 服务celery-chords，但不是为通过应用服务器实时调度信息而设计的。

实际架构：python 2.7、django 1.3、postgresql 9、celery 3 + redis、uwsgi、nginx，都托管在 aws 上。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:11:58.513

uWSGI+gevent 是一个可靠的组合，虽然目前无法使用 tornado api 运行 uWSGI（并且由于 uWSGI 在 1.9 中放弃了对基于回调的方法的支持，我认为我们永远不会看到该组合起作用）。

在开始使用 gevent 之前你需要解决的问题是确保你的所有部分都是 gevent 友好的（redis 和 celery 都可以，你需要检查你的数据库适配器）。之后只需将 --gevent 添加到您的 uWSGI 实例，其中是每个工作人员的最大并发请求数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-22T10:43:44.853

我不知道 uWSGI+gevent，但是你可以在 uWSGI 中使用 tornado。**Tornado 基本上在tornado.wsgi.WSGIContainer**模块中为您提供了内置的 WSGI 支持，以使其与其他 WSGI 服务器（如 uWSGI 和 gunicorn）可压缩。但这取决于您的使用情况，我认为将异步框架与同步框架一起使用并不是一个好主意服务器（如 uWSGI）。Tornado 对此有此警告。

> WSGI 是一个同步接口，而 Tornado 的并发模型是基于单线程异步执行的。这意味着使用 Tornado 的 WSGIContainer 运行 WSGI 应用程序的可扩展性低于在多线程 WSGI 服务器（如 gunicorn 或 uwsgi）中运行相同的应用程序。仅当在同一进程中组合 Tornado 和 WSGI 的好处大于降低的可伸缩性时，才使用 WSGIContainer。

# javascript - 用行分隔符替换文本区域（Javascript）

> ID：15225321
> 
> 赞同：4
> 
> 时间：2013-03-05T13:43:52.903
> 
> 标签：javascript, jquery, newline, cakephp-2.1

我想这将在两分钟内得到答复，但我无法通过谷歌搜索解决方案。

试过：[这个](https://stackoverflow.com/questions/8062399/how-replace-html-br-with-newline-character-n)，[这个](https://stackoverflow.com/questions/7672460/change-br-to-n-r-in-firefox-and-chrome)

我有一个文本区域，它首先从服务器接收一些数据（动态使用 AJAX）。textarea 中的文本可能如下所示：

```
Hello&nbsp;Cruel&nbsp;<br&nbsp;/>World! 
```

我的用户不喜欢这样的外观:)

所以我写了一个非常简单的函数：

```
 function replaceHtml( string_to_replace ) 
    {
        var result = replaceAll( string_to_replace, "&nbsp;", " ");
        result = result.replace(/<br\s*\/?>/mg,"\n\r"); // or "\n", "\r", "\r\n"
        return result;
     } 
```

我的输出如下所示：

```
Hello Cruel World! 
```

代替：

```
Hello Cruel
World! 
```

我想要一个最多 5 行且可应用于所有浏览器和操作系统的解决方案

顺便说一句，我不喜欢正则表达式，所以也许真正的问题会在那里..

**更新**

[从这个答案](https://stackoverflow.com/questions/6833269/javascript-platform-independent-line-separator)和 Michael_B 先生，我得到了这个对我有用的解决方案，但我有一种预感，这个角色可能不是最好的解决方案：

```
function replaceHtml( string_to_replace ) 
{
    return string_to_replace.replace(/&nbsp;/g, ' ').replace(/<br.*?>/g, '\u2028');
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T13:54:53.633

基于@Explosion Pills 评论和 jsFiddle

**[演示](http://jsfiddle.net/Xfffg/1/)**

```
function replaceHtml( string_to_replace ) 
{
        return string_to_replace.replace(/&nbsp;/g, ' ').replace(/<br.*?>/g, '\n');
} 
```

**更新**基于[文本区域中的新行](https://stackoverflow.com/questions/8627902/new-line-in-text-area)

**[更新了演示](http://jsfiddle.net/Xfffg/3/)**

也许这将解决您的问题`\n`- 需要 jQuery。

```
function replaceHtml(string_to_replace) {
    return $("<div>").append(string_to_replace.replace(/&nbsp;/g, ' ').replace(/<br.*?>/g, '&#13;&#10;')).text();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:50:27.543

如果我错了，请纠正我，但它不应该`$.replaceAll()`是 jQuery 函数而不是 JS 吗？

还是`replace()`纯Javascript？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:54:41.543

你不需要在那里使用 jQuery：

```
function replaceHtml( string_to_replace ) 
{
    var result = string_to_replace.replace(/\&nbsp;/g, ' ').replace(/<br\s*\/?>/mg,"\n\r"); // or "\n", "\r", "\r\n"
    return result;
 } 
```

# ruby-on-rails - HTTP 状态 422 是否适用于唯一性验证失败的记录？

> ID：15225325
> 
> 赞同：28
> 
> 时间：2013-03-05T13:44:00.617
> 
> 标签：ruby-on-rails, http-status-codes

我已经这样做了很多次（并且看到很多人这样做），但我开始怀疑它是否合适：

```
if @record.save
  # status 200
else
  # failure of validations => status 422
end 
```

现在我看到这`422 unprocessable entity`意味着[请求格式正确，但语义不正确](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)。据我了解，验证错误可能不是语义错误。

**注意：**我说的是**唯一性验证**，所以我不确定这是否属于用户错误，如以下问题所示：[REST API 服务为验证失败返回什么适当的 HTTP 状态代码？](https://stackoverflow.com/questions/1959947/whats-an-appropriate-http-status-code-to-return-by-a-rest-api-service-for-a-val)

**总结一下：我应该停止使用 status 422 吗？如果是这样，我应该改用什么？**

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-08-17T01:38:29.283

注意：试图在poke的下面做一个详细的答案，但似乎不可能，所以我会在这里回答。

我认为使用 422 验证错误很好。

1.  Webdav RFC 没有说 422 意味着“语义错误”，它说服务器“无法处理包含的指令”（参见[https://www.rfc-editor.org/rfc/rfc4918#section-11.2](https://www.rfc-editor.org/rfc/rfc4918#section-11.2)）。“语义错误”仅作为示例用例引用。

2.  500 保留用于“阻止它完成请求的意外情况”（[https://www.rfc-editor.org/rfc/rfc2616#section-10.5.1](https://www.rfc-editor.org/rfc/rfc2616#section-10.5.1)）。

500 通常是为真正的错误保留的，例如在你的代码中根本没有处理的事情，比如崩溃。验证错误得到处理，它们不是“意外的”，客户端必须更改请求以便可以处理（或不处理）。从这个意义上说，客户端犯了错误（例如，提交格式错误的电子邮件地址会引发验证错误，但显然这*不是*服务器错误，对吧？）。

我见过的大多数 API 在这种情况下都使用 400 或 422。也许对此没有一个真正的答案，但说 500 是显而易见的方法对我来说似乎是错误的。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-02-06T02:13:17.527

我同意**jbbarth**的观点，它不像`422`vs那样简单`500`。

`422`对验证错误很有用，但您也不想捕获数据库错误。

这是我使用的模式：

```
if @record.invalid?
  # failure of validations => status 422
elsif @record.save
  # status 200
else
  # failure when saving => status 500
end 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-02-26T02:10:21.617

虽然返回 422 很好，但我想说失败的唯一性验证应该返回 409 冲突。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-06T17:21:18.450

我的理解是，当 HTTP 请求正确但您在服务器端失败时（无论出于何种原因），您应该抛出 5xx 错误，表明存在服务器问题。除非您可以进一步指定，否则简单的 500 通常就足够了。

如果不是客户端的错误，而是其他原因（客户端无法影响）阻止了记录的保存，那么它是服务器错误，而不是 HTTP 通信意义上的（客户端）错误。

# c# - Linq to XML 子查询

> ID：15225329
> 
> 赞同：1
> 
> 时间：2013-03-05T13:44:11.063
> 
> 标签：c#, xml, linq, linq-to-xml

我有以下 XML：

```
<Event ID="1"..... >
    <SubEvent update="DATETIME" />
    <SubEvent update="DATETIME" />
    <SubEvent update="DATETIME" />
    <SubEvent update="DATETIME" />
    <SubEvent update="DATETIME" />
    <SubEvent update="DATETIME" />
</Event>
<Event ID="2"..... >
    <SubEvent update="DATETIME" />
    <SubEvent update="DATETIME" />
    <SubEvent update="DATETIME" />
    <SubEvent update="DATETIME" />
    <SubEvent update="DATETIME" />
    <SubEvent update="DATETIME" />
</Event>
<Event ID="3"..... >
    <SubEvent update="DATETIME" />
    <SubEvent update="DATETIME" />
    <SubEvent update="DATETIME" />
    <SubEvent update="DATETIME" />
    <SubEvent update="DATETIME" />
    <SubEvent update="DATETIME" />
</Event> 
```

我想删除子事件中所有更新属性低于提供的日期时间的“事件”元素。

例如，如果一个 DATETIME 更高，则不应删除该元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:02:41.917

只需选择所有这些事件并将它们从文档中删除：

```
DateTime date = DateTime.Now;
XDocument xdoc = XDocument.Load(path_to_xml);
xdoc.Descendants("Event")
    .Where(e => e.Elements().All(se => (DateTime)se.Attribute("update") < date))
    .Remove();
xdoc.Save(path_to_xml); 
```

适用于以下 xml：

```
<?xml version="1.0" encoding="utf-8" ?>
<Events>
  <Event ID="1" >
    <SubEvent update="2013-02-05T17:06:23.8962976+03:00" />
    <SubEvent update="2013-03-08T17:06:23.8962976+03:00" />
  </Event>
  <Event ID="2">
    <SubEvent update="2013-01-05T17:06:23.8962976+03:00" />
    <SubEvent update="2013-01-05T17:06:23.8962976+03:00" />
    <SubEvent update="2013-02-05T17:06:23.8962976+03:00" />
  </Event>
  <Event ID="3">
    <SubEvent update="2013-03-05T17:06:23.8962976+03:00" />
    <SubEvent update="2013-04-05T17:06:23.8962976+03:00" />
  </Event>
</Events> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:56:05.983

假设您没有丢失 xml 的根目录

```
var xDoc = // your XDocument
var toDel = new List<XElement>();
foreach(var el in xDoc.Root.Elements("Event").Where(e => e.Elements("SubEvent").All(xel => xel.Attribute("update").Value == "DATETIME")))
{
    toDel.Add(el);
}
toDel.ForEach(e => e.Remove()); 
```

您必须将内部的条件替换`.All()`为可取的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:07:07.293

试试这个：

```
 var doc = XDocument.Load(@"D:\input.xml");
        var x = new List<XElement>();
        foreach (var xElement in doc.Root.Elements("Event"))
        {
            DateTime maxDt = DateTime.MinValue;

            foreach (var element in xElement.Elements("SubEvent"))
            {
                var attributeValue = element.Attributes("update").FirstOrDefault();

                if (attributeValue == null) continue;

                DateTime dt;
                if (!DateTime.TryParse(attributeValue.Value, out dt)) continue;

                if (maxDt < dt) maxDt = dt;
            }

            xElement.RemoveNodes();
            xElement.Add(new XElement("SubEvent", new XAttribute("update", maxDt.ToString("yyyy-MM-dd HH:mm:ss"))));
            x.Add(new XElement(xElement));

        }

        new XDocument(new XElement("ev", x)).Save(@"D:\output.xml"); 
```

# iphone - 如何实现一个每天只显示一个组件的 UIDatepicker？

> ID：15225331
> 
> 赞同：0
> 
> 时间：2013-03-05T13:44:17.983
> 
> 标签：iphone, ios, date, datepicker, components

客户希望有一个 UIDatePicker，其中只有一个组件是可选的。因此，与其拥有单独的日/月和年选项，客户只想要选择完整日期的选项（即 05-03-2013）

我是否需要为此构建一个自定义选择器视图，它的数据源来自 nsdateformatter，或者我可以使用本机 UIDatePicker 并且只显示 1 个组件？

编辑：

经过一些研究，我最终得到了以下实现。我第一次设置开始和结束日期的地方。后记我正在遍历开始日期和结束日期之间的所有日子，并将它们保存在一个可变数组中。

```
int numberOfDaysToThePast = 356;
    NSDate * startDate = [NSDate date];
    NSDate * endDate = [NSDate date];
    startDate = [startDate addTimeInterval:-(24 * 60 * 60* numberOfDaysToThePast)];

    dateArray = [[NSMutableArray alloc] init];
    for (NSDate *date = [startDate copy]; [date compare: endDate] < 0;
        date = [date dateByAddingTimeInterval:24 * 60 * 60] ) {
        NSString* dateString = [formatter stringFromDate:date];
       [dateArray addObject:dateString];

    }

//add custom picker
    pickerView = [[UIPickerView alloc] initWithFrame:CGRectMake(0, 0, 320, 200)];
    pickerView.delegate = self;
    pickerView.dataSource = self;
    [self.view addSubview:pickerView]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:56:32.063

我有一个小代码片段，但它的一年视图你可以做一些小的改变，它会ok

**用于创建自 1960 年以来所有年份的数组的 Objective-C 代码。非常适合输入到 UIPicker**

```
//Get Current Year into i2
NSDateFormatter* formatter = [[[NSDateFormatter alloc] init]autorelease];
[formatter setDateFormat:@"yyyy"];
int i2  = [[formatter stringFromDate:[NSDate date]] intValue];

//Create Years Array from 1960 to This year
years = [[NSMutableArray alloc] init];
for (int i=1960; i<=i2; i++) {
[years addObject:[NSString stringWithFormat:@"%d",i]];
} 
```

UIPickerView 委托响应

```
- (NSInteger)numberOfComponentsInPickerView: (UIPickerView*)thePickerView {
return 1;
}

- (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:(NSInteger)component
{
return [years count];
}
- (NSString *)pickerView:(UIPickerView *)thePickerView
titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
return [years objectAtIndex:row]; 
```

不要忘记界面中的声明

```
//Data
NSMutableArray *years; 
```

我希望我能帮助你，如果不让我知道问题出在哪里，祝你好运和高频

# google-chrome - *DOJO* 无法获取属性“安全”的值：对象为空或未定义 IE9

> ID：15225333
> 
> 赞同：0
> 
> 时间：2013-03-05T13:44:25.347
> 
> 标签：google-chrome, firefox, dojo, django-templates, internet-explorer-9

我们有一个用 Dojo 1.4 编写的非常大的应用程序！

由于 IE8 之后的浏览器（IE9、Chrome、FF 等）存在许多兼容性问题，我们正在尝试将应用程序迁移到最新版本的 Dojo (1.8.3)。

我遇到了一些易于识别和修复的问题，例如：

`this.widgetId.attr("value") --> dojo.attr(this.widgetId, "value"`

现在我发现了一些更困难的事情。

在我使用 dtl（Django 模板语言）的每个页面中，它都不起作用。

一些页面在每个浏览器中给了我以下不同的错误：

***Firefox：“类型错误：str 为空”***

***Chrome：“无法读取 null 的属性‘安全’”***

***IE9：“无法获取属性‘安全’的值：对象为空或未定义”***

其他一些页面没有给我任何错误，但屏幕上仍然没有出现任何内容。

我无法发布任何代码，因为自定义小部件等中有自定义小部件......

如果您需要更多信息，请告诉我。

谢谢

# c# - 在 C# 中从十六进制到整数的错误转换

> ID：15225334
> 
> 赞同：2
> 
> 时间：2013-03-05T13:44:26.823
> 
> 标签：c#, int, hex

问题的原因可能是什么？我的方法返回不正确的 int 值。当我给它 AB 或 DC 或类似的十六进制值时，它返回 int = 0 但是当我给它一个 hex = 22 时，它返回我 int = 22。（尽管在这种情况下 int 应该是 34）。

```
public int StatusBit(int Xx, int Rr)  {
        int Number;
        int.TryParse(GetX(Xx,Rr), out Number);
            return Number;
    } 
```

我尝试使用 Number = Convert.ToInt32(GetX(Xx,Rr)); 但它给出了相同的结果，但对于包含字母的任何内容，它都为 null 而不是 0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T13:46:54.187

改为使用`Convert.ToInt32(string, int)`。这样你就可以给出一个应该解释的数字的基数。例如

```
return Convert.ToInt32(GetX(Xx, Rr), 16); 
```

（您也不会检查其返回值`TryParse`会提示解析失败。）

如果您希望同时使用十进制和十六进制数字，则需要根据数字的外观进行分支并使用以 10 为底或以 16 为底的数字。例如，如果您的十六进制数字始终以您的开头，则`0x`可以使用以下行中的内容：

```
string temp = GetX(Xx, Rr);
return Convert.ToInt32(temp, temp.StartsWith("0x") ? 16 : 10); 
```

但这取决于您如何（如果有的话）区分这两者。如果一切都是十六进制的，那么当然没有这样的需要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T13:49:54.917

使用`NumberStyles.HexNumber`：

```
using System;
using System.Globalization;

class Test
{
    static void Main()
    {
        string text = "22";
        int value;
        int.TryParse(text, NumberStyles.HexNumber, 
                     CultureInfo.InvariantCulture, out value);
        Console.WriteLine(value); // Prints 34
    }
} 
```

顺便说一句，如果无法解析值，您真的想默默地返回 0 吗？如果没有，则使用 的返回值`int.TryParse`来判断解析是否成功。（这就是它在原始代码中为“AB”返回 0 的原因。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T13:47:16.967

`int.TryParse`解析一个以 10 为底的整数。

`Convert.ToUInt32(hex, 16)`改为使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-27T08:21:51.477

这是我的解决方案；

```
kTemp = int.Parse(xcc, System.Globalization.NumberStyles.HexNumber); 
```

上面的*kTemp*是一个整数，而*xcc*是一个字符串。 *xcc*可以是任何东西；FE、10BA、FE0912……也就是说；*xcc*是任意长度的十六进制字符串。谨防; 我的十六进制字符串没有得到*0x*前缀。

# c# - 回调模式下的ComponentArt分层数据网格在编辑回发后显示错误

> ID：15225338
> 
> 赞同：1
> 
> 时间：2013-03-05T13:44:34.503
> 
> 标签：c#, asp.net, callback, componentart

我在回调模式下有分层数据网格。

```
<ComponentArt:DataGrid ID="dgBL" runat="server" AllowColumnResizing="true" EmptyGridText="There is no data to display!"
LoadingPanelPosition="MiddleCenter" PagerStyle="Numbered" RunningMode="Callback" SearchOnKeyPress="true"
ShowFooter="true" ShowHeader="true" ShowSearchBox="true" AutoTheming="true" PreloadLevels="false"
GroupingNotificationText="Business Lines and their Departments" FillContainer="false" Width="60%"
Height="468px" AllowVerticalScrolling="true" AllowMultipleSelect="false">
<Levels>
    <ComponentArt:GridLevel AllowGrouping="false" DataKeyField="BLID" AllowReordering="false">
        <Columns>
            <ComponentArt:GridColumn DataField="BLID" Visible="false" Width="1" />
            <ComponentArt:GridColumn DataField="Name" HeadingText="Business Line Name" Visible="true" />
            <ComponentArt:GridColumn DataField="DepartmentCount" HeadingText="Department Count" Visible="true" Width="140" />
            <ComponentArt:GridColumn DataField="IsActive" HeadingText="Is Active" Visible="true" Width="80" />
            <ComponentArt:GridColumn Align="Center" AllowSorting="False" DataCellServerTemplateId="AddDepartmentTemplate"
                HeadingText="Add Department" Width="100" />
        </Columns>
    </ComponentArt:GridLevel>
    <ComponentArt:GridLevel AllowGrouping="false" DataKeyField="DepartmentID" AllowReordering="false">
        <Columns>
            <ComponentArt:GridColumn DataField="DepartmentID" Visible="false" Width="30" />
            <ComponentArt:GridColumn DataField="DepartmentName" HeadingText="Department Name" Visible="true" />
            <ComponentArt:GridColumn DataField="Transit" HeadingText="Transit" Visible="true" Width="80" />
            <ComponentArt:GridColumn DataField="BLID" Visible="false" Width="30" />
            <ComponentArt:GridColumn DataField="IsActive" HeadingText="Is Active" Visible="true" Width="80" />
            <ComponentArt:GridColumn Align="Center" AllowSorting="False" DataCellServerTemplateId="EditDepartmentTemplate1"
                HeadingText="Edit" Width="80" />
        </Columns>
    </ComponentArt:GridLevel>
</Levels>
<ServerTemplates>
    <ComponentArt:GridServerTemplate ID="AddDepartmentTemplate">
        <Template>
            <asp:ImageButton ID="addNewDepartment" runat="server" ImageUrl="~/App_Themes/OnlineForms/Images/add.png"
                OnClick="DGBL_AddNewDepartment_Click" Width="16" Height="16" CssClass="VerticalAlignMiddle" AlternateText="Add a Department for selected business"
                ToolTip="Add a Department for selected business" />
        </Template>
    </ComponentArt:GridServerTemplate>
    <ComponentArt:GridServerTemplate ID="EditDepartmentTemplate1">
        <Template>
            <asp:ImageButton ID="imgEditDepartment" runat="server" ImageUrl="../App_Themes/OnlineForms/Images/edit.gif"
                OnClick="imgEditDepartment_Click" CssClass="VerticalAlignMiddle" AlternateText="Edit selected Department"
                ToolTip="Edit selected Department" />
        </Template>
    </ComponentArt:GridServerTemplate>
</ServerTemplates> 
```

当两个关卡都被加载并且其中一个顶级关卡被展开以显示内部关卡并单击 addNewDepartment 时，那里有一个取消按钮。它显示一条错误消息：

未捕获的 Sys.WebForms.PageRequestManagerServerErrorException：Sys.WebForms.PageRequestManagerServerErrorException：在 System.Data.Entity.DynamicProxies.BusinessLine_29A53EE537AE4FBDCCCC328C86AED34485458642B12DFD38012946895CAB887D 类型的对象中找不到属性

BusinessLine 是作为列表提供给顶级 GridLevel 的 DataSource 的数据对象。

CS代码片段如下：

```
protected override void OnInit(EventArgs e)
{
    base.OnInit(e);

    dgBL.PageSize = Convert.ToInt32(ConfigurationManager.AppSettings[CommonConstants.DEFAULT_PAGE_SIZE]);

    dgBL.NeedDataSource += new Grid.NeedDataSourceEventHandler(dgBL_NeedDataSource);
    dgBL.NeedRebind += new Grid.NeedRebindEventHandler(dgBL_NeedRebind);
    dgBL.NeedChildDataSource += new Grid.NeedChildDataSourceEventHandler(dgBL_NeedChildDataSource);
}

protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        dgBL.DataSource = GetAllBusinessLines();
        dgBL.DataBind();
    }
}

private void dgBL_NeedChildDataSource(object sender, GridNeedChildDataSourceEventArgs e)
{
    int blID = Convert.ToInt32(e.Item["BLID"]);

    UserManager um = new UserManager();
    e.DataSource = um.getAllDepartments(blID);
}

protected void dgBL_NeedDataSource(object sender, EventArgs e)
{
    dgBL.DataSource = GetAllBusinessLines();
}

protected void dgBL_NeedRebind(object sender, EventArgs e)
{
    dgBL.DataBind();
}

protected void dgBL_PageIndexChanged(object sender, ComponentArt.Web.UI.GridPageIndexChangedEventArgs e)
{
    throw new NotImplementedException();
}

protected void DGBL_AddNewDepartment_Click(object sender, EventArgs e)
{
    lblAddEditDepartment.InnerText = "Add Department";
    ShowControls(true);
    LoadDropDowns(getCurrentBLID());
}

protected void btnCancel_Click(object sender, EventArgs e)
{
    dgBL.DataSource = GetAllBusinessLines();
    dgBL.DataBind();
} 
```

任何帮助，将不胜感激。

**编辑：** 我刚刚找到了一个在早期版本中解决了这个问题的方法调用：

```
Grid1.TableCache = null; // clear out cached child data
Grid1.callback(); 
```

但它们不存在于 2012 版的组件艺术数据网格中。如果有人知道如何在 2012 版中处理此问题，我相信它会解决问题。

# c++ - 为什么 QFile::canReadLine() 总是返回 false？

> ID：15225339
> 
> 赞同：5
> 
> 时间：2013-03-05T13:44:34.870
> 
> 标签：c++, qt, qt4, qfile

我试图使用逐行读取文件

```
while (file.canReadLine()) {
    QString line = QString::fromUtf8(file.readLine());
    qDebug() << line;
} 
```

但`QFile::canReadLine()`总是返回 false，即使`file.readLine()`每次调用成功并读取下一行（我已经测试过了）。

它应该总是返回false吗？文档说它**总是为 unbuffered devices 返回 false**，但 QFile 不是缓冲的吗？

我正在使用 Qt 4.7.4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:09:34.313

看来这**不是预期的行为**。这是一个错误，并且[已经被报告](https://bugreports.qt-project.org/browse/QTBUG-24367)。

它影响 Qt 版本 4.7.4、4.8.0、4.8.1、4.8.2。

# c# - EF4 ExecuteStoreQuery 获取嵌套列表

> ID：15225343
> 
> 赞同：0
> 
> 时间：2013-03-05T13:44:46.127
> 
> 标签：c#, entity-framework-4

我有一个包含 3 个选择语句的存储过程：

```
select col1, col2 from table1
select col1, col2 from table2
select col1, col2 from table3 
```

我为每个表创建了 3 个模型：

```
public class table1
{
    public string col1 { get; set; }
    public string col2 { get; set; }
}
public class table2
{
    public int col1 { get; set; }
    public int col2 { get; set; }
}
public class table3
{
    public decimal col1 { get; set; }
    public decimal col2 { get; set; }
} 
```

然后是另一个包含这些模型列表的模型，例如：

```
public class mymodel
{
    public IEnumerable<table1> table1 { get; set; }
    public IEnumerable<table2> table2 { get; set; }
    public IEnumerable<table3> table3 { get; set; }
} 
```

我正在尝试填写`mymodel`：

```
var model = context.ExecuteStoreQuery<mymodel>("sproc1").FirstOrDefault(); 
```

但`mymodel`总是有`null`for`table1`和。`table2``table3`

我怎样才能做到这一点？EF4 支持吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:51:46.350

您不能从 EF 中的存储过程返回 3 个结果集。您需要将存储过程拆分为单独的存储过程，每个存储过程都返回一个结果集（表）。然后你可以得到这些结果

或者，也许您可​​以更改 sproc 以返回一个结果集，该结果集是 3 个 select 语句的 UNION，以便可以读取它们 -

```
select col1, col2 from table1 UNION
select col1, col2 from table2 UNION
select col1, col2 from table3 
```

**编辑**

显然它现在支持 EF 5 - 请参阅此处了解信息[http://msdn.microsoft.com/en-us/data/jj691402](http://msdn.microsoft.com/en-us/data/jj691402)

# dynamic - 使用 Xpage 标记动态附加 UIComponent 树

> ID：15225345
> 
> 赞同：1
> 
> 时间：2013-03-05T13:44:50.683
> 
> 标签：dynamic, xpages

我发现自己编写了太多 UI 代码来构建组件树以支持我正在构建的自定义控件/库。

有没有办法评估 Xpage 标记（即 Xpage 标记片段文件），并在运行时将其附加到组件树？

这将使它更容易，因为我可以使用设计器来构建片段，然后将片段复制/粘贴到控件中的包资源中，在运行时加载片段，评估它，缓存它（也许）并附加树。

谢谢

-标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:53:27.957

You should take a look at the XPages Bazaar project on openntf.org. It enables you to create XPages on the fly. [http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=XPages%20Bazaar](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=XPages%20Bazaar)

# c - 如何像 nm 命令一样显示符号的类型？

> ID：15225346
> 
> 赞同：7
> 
> 时间：2013-03-05T13:44:56.640
> 
> 标签：c, unix, command, elf, nm

我现在正在研究 ELF 格式。我必须编写一个简单的 nm 函数（没有选项）。我已经在输出上打印了符号的值和符号的名称。

这是 nm 输出：

```
value             type    name
0000000000600e30  D       __DTOR_END__ 
```

我有相同的，但没有“类型”。我正在使用 ELF64_Sym 结构，如下所示：

```
typedef struct {
    Elf64_Word      st_name;
    unsigned char   st_info;
    unsigned char   st_other;
    Elf64_Half      st_shndx;
    Elf64_Addr      st_value;
    Elf64_Xword     st_size; 
} Elf64_Sym; 
```

我知道我必须使用 st_info 变量和这个宏：

```
#define ELF64_ST_TYPE(info)          ((info) & 0xf) 
```

获取符号的类型。但是，符号类型可以是如下宏：

```
NAME            VALUE
STT_NOTYPE      0
STT_OBJECT      1
STT_FUNC        2
STT_SECTION     3
STT_FILE        4
STT_LOPROC      13
STT_HIOPROC     15 
```

我想知道如何从这些宏中获取 nm 打印的字母，例如：

```
 U, u, A, a, T, t, R, r, W, w 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T09:42:54.013

好的，我做了一些研究，这是我根据符号获取正确字符的功能。随意添加/编辑一些字符。

```
char            print_type(Elf64_Sym sym, Elf64_Shdr *shdr)
{
  char  c;

  if (ELF64_ST_BIND(sym.st_info) == STB_GNU_UNIQUE)
    c = 'u';
  else if (ELF64_ST_BIND(sym.st_info) == STB_WEAK)
    {
      c = 'W';
      if (sym.st_shndx == SHN_UNDEF)
        c = 'w';
    }
  else if (ELF64_ST_BIND(sym.st_info) == STB_WEAK && ELF64_ST_TYPE(sym.st_info) == STT_OBJECT)
    {
      c = 'V';
      if (sym.st_shndx == SHN_UNDEF)
        c = 'v';
    }
  else if (sym.st_shndx == SHN_UNDEF)
    c = 'U';
  else if (sym.st_shndx == SHN_ABS)
    c = 'A';
  else if (sym.st_shndx == SHN_COMMON)
    c = 'C';
  else if (shdr[sym.st_shndx].sh_type == SHT_NOBITS
       && shdr[sym.st_shndx].sh_flags == (SHF_ALLOC | SHF_WRITE))
    c = 'B';
  else if (shdr[sym.st_shndx].sh_type == SHT_PROGBITS
       && shdr[sym.st_shndx].sh_flags == SHF_ALLOC)
    c = 'R';
  else if (shdr[sym.st_shndx].sh_type == SHT_PROGBITS
       && shdr[sym.st_shndx].sh_flags == (SHF_ALLOC | SHF_WRITE))
    c = 'D';
  else if (shdr[sym.st_shndx].sh_type == SHT_PROGBITS
       && shdr[sym.st_shndx].sh_flags == (SHF_ALLOC | SHF_EXECINSTR))
    c = 'T';
  else if (shdr[sym.st_shndx].sh_type == SHT_DYNAMIC)
    c = 'D';
  else
    c = '?';
  if (ELF64_ST_BIND(sym.st_info) == STB_LOCAL && c != '?')
    c += 32;
  return c;
} 
```

我缺少 s、n、p 和 i。我很确定'R'不好。当我找到它时，我会编辑它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T16:07:23.827

`ELF64_ST_TYPE`不会*直接*映射到`nm`打印的字母中。

为了执行映射，您需要同时注意`ELF64_ST_BIND`和*符号*所指的部分。例如：

```
bool weak = (ELF64_ST_BIND(sym) == STB_WEAK);
bool unresolved = (sym->st_shndx == SHN_UNDEF);

if (unresolved) {
   printf(" %c ", weak ? 'w' : 'U');
} 
```

对于`t`vs `T`，您需要查看`ELF64_ST_BIND(sym) == STB_LOCAL`or `ELF64_ST_BIND(sym) == STB_GLOBAL`，*并且*您需要了解引用的部分是否`st_shndx`是“文本”部分（`SHF_EXECINSTR`在其标志中有）。

PS 据我所知，没有`u`. 如果您的`nm`手册页确实列出`u`了，我很想知道那是什么类型的符号。

# android - 如何在 facebook-sdk-3.0 中授予 Facebook 访问用户数据的权限

> ID：15225350
> 
> 赞同：1
> 
> 时间：2013-03-05T13:45:02.310
> 
> 标签：android, facebook, facebook-android-sdk

我正在开发一个应用程序，在该应用程序中我使用`Facebook`登录来进行身份验证和其他东西。`facebook sdk 3.0`需要一些权限来访问用户数据，例如头像、emailID、publish_stram 等。如何在代码中授予访问这些内容的权限。直到现在我能够得到`fb_access_token`. 这是我的代码：

```
Session.openActiveSession(this, true, new Session.StatusCallback() {

            // callback when session changes state
            @Override
            public void call(Session session, SessionState state,
                    Exception exception) {
                if (session.isOpened()) {
                    // make request to the /me API
                    Request.executeMeRequestAsync(session,
                            new Request.GraphUserCallback() {

                                // callback after Graph API response with
                                // user
                                // object
                                @Override
                                public void onCompleted(GraphUser user,
                                        Response response) {
                                    if (user != null) {
                                        fb_user_id = user.getId();
                                    }

                                    Session session = Session
                                            .getActiveSession();
                                    if (session.isOpened()) {
                                        access_token = session
                                                .getAccessToken();
                                    }

                                    new postFBData().execute();
                                }
                            });
                }
            }
        }); 
```

从 Facebook 示例中获取此代码片段。`access_token`从FB访问之前如何授予权限？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T17:23:45.260

调用 Session.openActiveSession 只会给你基本的权限（直到你请求额外的权限）。您还需要将读取和发布权限请求分开。

在你的情况下，我会做类似的事情：

```
Session session = // create a new Session using Session.Builder
Session.OpenRequest openRequest = // create an OpenRequest using Session.OpenRequest
openRequest.setPermissions( READ_PERMISSION_LIST );
session.openForRead(openRequest);
Session.setActiveSession(session); 
```

然后，一旦你打开了会话，

```
// check if you already have publish permissions first
if (!Session.getActiveSession.getPermissions.contains("publish_stream")) {
  Session.NewPermissionsRequest permissionRequest = // create a NewPermissionsRequest
  permissionRequest.setPermissions( PUBLISH_PERMISSION_LIST);
  Session.getActiveSession().requestNewPublishPermissions(permissionRequest);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:15:51.553

我认为这就是您在 String[] 中授权某种功能的方式

```
 fb.authorize(MainActivity.this,new String[] {"publish_stream"}, new DialogListener(){

            @Override
            public void onFacebookError(FacebookError e)
            {
                Toast.makeText(MainActivity.this, "on Facebook error", Toast.LENGTH_SHORT).show();
            }
            @Override
            public void onError(DialogError e)
            {
                Toast.makeText(MainActivity.this, "on error", Toast.LENGTH_SHORT).show();
            }
            @Override
            public void onComplete(Bundle values)
            {
                updateButtonImage();

            }
            @Override
            public void onCancel()
            {

            }
        }); 
```

# c# - Azure 表存储错误地插入日期属性

> ID：15225352
> 
> 赞同：3
> 
> 时间：2013-03-05T13:45:05.970
> 
> 标签：c#, datetime, azure, azure-storage, azure-table-storage

**为什么我必须用 来创建我的实体的`DateTime`属性`DateTimeKind.Local`？**

例如，在将其插入表之前，我需要像这样设置以下属性：

```
someObject.DatePerformed = new DateTime(2012, 11, 19, 3, 3, 3, DateTimeKind.Local); 
```

如果我没有指定`DateTimeKind`，则保存不正确（增加 2 小时）。这发生在我的本地存储模拟器和我的 Azure 帐户上。我在 GMT +2 小时从本地计算机运行客户端应用程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T13:48:03.137

这不是 Azure 问题，这就是 DateTime 的工作原理。您需要为对象指定时区`DateTime`。

为避免用户处于不同时区时出现问题，我建议将所有内容存储在 UTC 中，然后在运行时将其解析为本地时间。

否则，您在手动转换时区时会遇到问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T14:13:06.283

Azure 在 UTC 时间运行。如果您使用的是 DateTime.Now，请使用 DateTime.AddHours()。

```
var utcOffset = 2;
var dateValue = new DateTime(2009, 3, 1, 12, 0, 0);
var localTime = dateValue.AddHours(utcOffset); 
```

或者...

```
var localValue = DateTime.Now.AddHours(utcOffset); 
```

# sql - 如何编写为字段的每个可能值创建单独列的 SQL 查询？

> ID：15225353
> 
> 赞同：0
> 
> 时间：2013-03-05T13:45:15.293
> 
> 标签：sql, sql-server

全部，

抱歉 - 这可能是一个非常简单的 SQL 问题，但我不知道如何编写谷歌搜索来获得我需要的东西。

我有一个看起来像这样的表：

```
id   color  points
---  -----  ------
  1  red        10
  2  blue       20
  3  blue       30
  4  red       100
  5  blue       70
  6  blue      200
  7  red        30 
```

我想知道两件事：

1.  有多少行 color='red'，有多少行 color='blue'？
2.  color='red' 和 color='blue' 的行的总点数是多少？

使用`count()`、`sum()`和`group by`，我可以轻松创建如下所示的结果集：

```
select
    color,
    count(color),
    sum(points)
from
    my_table
group by
    color

color  count  points
-----  -----  ------
red        3     140
blue       4     320 
```

但是，我真正想要的是如下所示的一行结果：

```
red_count  red_points  blue_count  blue_points
---------  ----------  ----------  -----------
        3         140           4          320 
```

对于它的价值——我理想的查询不需要灵活地处理不确定数量的不同颜色；假设总是有而且只有两种颜色，我 100% 可以。

另外 - 在这种情况下，我使用的是 SQL Server，如果解决方案使用特定的东西，我没问题。（当然，通用的 SQL 解决方案会更好......）

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:49:26.337

您可以使用聚合和表达式对数据进行*透视：*`CASE`

```
select
  sum(case when color = 'red' then 1 else 0 end) red_count,
  sum(case when color = 'red' then points end) red_points,
  sum(case when color = 'blue' then 1 else 0 end) blue_count,
  sum(case when color = 'blue' then points end) blue_points
from my_table 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T13:48:36.590

试试这个通用查询：

```
SELECT SUM(CASE WHEN color='red' THEN 1 ELSE 0 END) red_count
      ,SUM(CASE WHEN color='red' THEN points ELSE 0 END) red_points
      ,SUM(CASE WHEN color='blue' THEN 1 ELSE 0 END) blue_count
      ,SUM(CASE WHEN color='blue' THEN points ELSE 0 END) blue_points
FROM yourTable 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T13:48:43.580

```
SELECT  SUM(CASE WHEN color = 'red' THEN 1 ELSE 0 END) red_count,
        SUM(CASE WHEN color = 'red' THEN points ELSE 0 END) red_points,
        SUM(CASE WHEN color = 'Blue' THEN 1 ELSE 0 END) blue_count,
        SUM(CASE WHEN color = 'Blue' THEN points ELSE 0 END) blue_points
FROM    tableName 
```

# spring - Eclipse (STS) MVC 3.0.5 + Tiles 2.2.2 项目依赖管理问题

> ID：15225356
> 
> 赞同：0
> 
> 时间：2013-03-05T13:45:20.753
> 
> 标签：spring, tiles, dependency-management

出于某种原因，我不能使用 maven 或 gradle 依赖管理。我正在尝试将 Tiles 与 Spring MVC 一起使用，在 tcserver 启动时出现以下异常：

> java.lang.NoClassDefFoundError: org/apache/tiles/startup/BasicTilesInitializer

这是我的依赖文件夹： ![依赖项](../Images/fe3288d6eaf8258fb423987415916406.png)

Eclipse 也在我的`layout.jsp`

> 在 Java 构建路径中找不到“tiles:insertAttribute”(org.apache.tiles.jsp.taglib.InsertAttributeTag) 的标记处理程序类

谁能指出我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:08:09.337

您将 SOURCE jar 放在项目 lib 文件夹中。但是您需要在编译的类中使用正常的一次。

`tiles-core-2.2.2.jar`代替`tiles-core-2.2.2-sources.jar`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:22:08.743

如果您使用 maven 来管理依赖项，则将以下内容添加到您的 pom.xml 中。

```
<dependency>
    <groupId>org.apache.tiles</groupId>
    <artifactId>tiles-core</artifactId>
    <version>2.2.2</version>
</dependency> 
```

否则下载以下jar并将其添加到`/WEB-INF/lib`

*   [瓷砖-core.2.2.2.jar](http://repo1.maven.org/maven2/org/apache/tiles/tiles-core/2.2.2/tiles-core-2.2.2.jar)
*   [瓷砖-api.2.2.2.jar](http://repo1.maven.org/maven2/org/apache/tiles/tiles-api/2.2.2/tiles-api-2.2.2.jar)

并在 Slf4j 上添加这种传递依赖项作为瓦片使用

*   [slf4j-jdk14.1.5.8.jar](http://repo1.maven.org/maven2/org/slf4j/slf4j-jdk14/1.5.8/slf4j-jdk14-1.5.8.jar)

# java - Hibernate java.util.ArrayList 无法强制转换.. 类强制转换异常

> ID：15225359
> 
> 赞同：0
> 
> 时间：2013-03-05T13:45:29.837
> 
> 标签：java, hibernate, generics

我正在尝试从 hsql db 中读取某些值，这些值作为带有键和值的映射返回。我还有另一种方法可以接受这些地图值并对其进行迭代并根据条件获取某些值。在此之后它将所有这些值添加到列表中。对我来说，条件和第一种方法工作正常，但是在将值添加到列表时，我面临类转换异常

从表中读取值的方法：

```
List<EntityMap> sample = session.createQuery(" FROM EntityMap order by if.ifName").list();
for (Iterator<EntityMap> iterator = sample.iterator(); iterator.hasNext();) {
    entityMap = (EntityMap) iterator.next();
    if (IfName != entityMap.getIf().getIfName().toString()) {
        IfName = entityMap.getIf().getIfName().toString();
        entitymapobject = new ArrayList<EntityMap>();
    }
    entitymapobject.add(entityMap);
    EntityMaplist.put(entityMap.getIf().getIfName(),entitymapobject);
}
tx.commit(); 
```

此方法返回一个地图，它具有从数据库中获取的值。之后，我尝试根据某些条件提取某些值。在此我正在调用上述方法并遍历它

```
proertyMap = listPROPERTNAMES();
System.out.println("inside loadproperty");
for (Iterator<Integer> itr1 = srcEntityIDList.iterator(); itr1.hasNext();) {
    Integer aInteger = itr1.next();
    for (Map.Entry<Long, List<PropertyMap>> entry : proertyMap.entrySet()) {
        System.out.println(aInteger);
        System.out.println(entry.getKey());
        Long aLong = entry.getKey();
        if  (aLong.equals(Long.valueOf(aInteger)))  {
            System.out.println("values are equal");
            trgtPropNameList.add(( (PropertyMap) entry.getValue()).getTgtpropnm());
          }
      }
    }
    return trgtPropNameList;

    if (tx != null)
        tx.rollback();
        e.printStackTrace();
    } finally {
        session.close();
    }
    return EntityMaplist;
} 
```

在尝试将值添加到列表 (trgtPropNameList) 时，我得到了一个类转换异常。我的具有 setter 和 getter 方法的 POJO 类是

```
public class PropertyMap implements java.io.Serializable {

    private PropertyMapId id;
    private EntityMap entityMap;
    private String tgtpropnm;
    private String splitrule;
    private String combinerule;
    private String createdby;
    private Date createdon;

    public PropertyMap() {
    }

    public PropertyMap(PropertyMapId id, EntityMap entityMap) {
        this.id = id;
        this.entityMap = entityMap;
    }

    public PropertyMap(PropertyMapId id, EntityMap entityMap, String tgtpropnm,
            String splitrule, String combinerule, String createdby,
            Date createdon) {
        this.id = id;
        this.entityMap = entityMap;
        this.tgtpropnm = tgtpropnm;
        this.splitrule = splitrule;
        this.combinerule = combinerule;
        this.createdby = createdby;
        this.createdon = createdon;
    }

    public PropertyMapId getId() {
        return this.id;
    }

    public void setId(PropertyMapId id) {
        this.id = id;
    }

    public EntityMap getEntityMap() {
        return this.entityMap;
    }

    public void setEntityMap(EntityMap entityMap) {
        this.entityMap = entityMap;
    }

    public String getTgtpropnm() {
        return this.tgtpropnm;
    }

    public void setTgtpropnm(String tgtpropnm) {
        this.tgtpropnm = tgtpropnm;
    }

    public String getSplitrule() {
        return this.splitrule;
    }

    public void setSplitrule(String splitrule) {
        this.splitrule = splitrule;
    }

    public String getCombinerule() {
        return this.combinerule;
    }

    public void setCombinerule(String combinerule) {
        this.combinerule = combinerule;
    }

    public String getCreatedby() {
        return this.createdby;
    }

    public void setCreatedby(String createdby) {
        this.createdby = createdby;
    }

    public Date getCreatedon() {
        return this.createdon;
    }

    public void setCreatedon(Date createdon) {
        this.createdon = createdon;
    }
} 
```

任何人都可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:50:40.577

`entry.getValue()`是类型的对象`List<PropertyMap>`而不是`PropertyMap`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:47:02.500

如果你不能铸造它，只需建造并填充一个新的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:56:01.630

换行

```
trgtPropNameList.add(( (PropertyMap) entry.getValue()).getTgtpropnm()); 
```

到

```
for(PropertyMap map : entry.getValue(){
    trgtPropNameList.add(((PropertyMap)map).getTgtpropnm());
} 
```

应该解决铸造问题。

# php - 如何使用 go daddy 服务器禁用魔术引号？

> ID：15225361
> 
> 赞同：1
> 
> 时间：2013-03-05T13:45:35.187
> 
> 标签：php

我正在使用 go daddy 托管我的网站，并且我正在尝试禁用魔术引号，因为目前我的 mysql 表中的文本显示为`jame'/s`而不是仅`jame's`.

我已经尝试`.htaccess`通过添加：

```
'php_flag magic_quotes_gpc Off' 
```

但这会导致 505 错误。

我试图做`php.ini`并补充说：

```
magic_quotes_gpc = Off;
magic_quotes_runtime = Off;
magic_quotes_sybase = Off; 
```

我试过做`php5.ini`：

```
magic_quotes_gpc = Off; 
```

没有什么对我有用，我仍然`\`在每个人都`'`应该去的地方。为什么会这样显示？我能做些什么来摆脱`\`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-20T18:16:41.537

.htaccess 在共享主机中不起作用。请尝试以下步骤。

A）创建一个名为**php5.ini**的文件并保存在根文件夹中，在其中添加以下行

**magic_quotes_gpc = 关闭；
magic_quotes_runtime = 关闭；
magic_quotes_sybase = 关闭；** 

B) 服务器并不总是能立即识别 PHP 初始化文件。对 php5.ini 文件进行更改后，您可能需要使用以下步骤强制更新完成：

1.  登录您的客户经理。
2.  单击虚拟主机。
3.  在您要使用的主机帐户旁边，单击启动。
4.  在主机控制面板的 Stats & Monitors 部分中，单击 System Processes 图标。
5.  单击结束 Web 并按照任何提示进行操作。
6.  重新加载 phpinfo.php 页面以查看所需的更改是否已生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T11:33:48.230

这为我解决了这个问题：

[http://support.godaddy.com/groups/web-hosting/forum/topic/error-installing-joomla-3-0-magic-quotes-gpc-off/](http://support.godaddy.com/groups/web-hosting/forum/topic/error-installing-joomla-3-0-magic-quotes-gpc-off/)

编辑 webroot 文件夹中的 php5.ini 并将其添加到底部。

```
magic_quotes_gpc = Off
zend_extension=/usr/local/php53/lib/php/extensions/ioncube.so
zend_extension=/usr/local/php53/lib/php/extensions/ZendOptimizer.so 
```

确保你把它放在最后，它不会在一开始就起作用。

按照以下步骤结束 Web 进程（确保已加载新的 php 配置 [http://support.godaddy.com/help/article/5647/why-isnt-my-phpini-file-taking-effect](http://support.godaddy.com/help/article/5647/why-isnt-my-phpini-file-taking-effect)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:50:52.703

要关闭魔术引号，请尝试以下操作：

```
ini_set('magic_quotes_gpc', 'Off'); 
```

但是我建议您将`.htaccess`其关闭以进行完整的网站实施

```
php_value magic_quotes_gpc off 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T13:48:28.960

尝试将 php 值更改为 PHP 本身：

```
//At the beginning of the page
ini_set('magic_quotes_gpc', 'Off'); //Magic quotes for incoming GET/POST/Cookie data.
ini_set('magic_quotes_runtime', 'Off'); //Magic quotes for runtime-generated data, e.g. data from SQL, from exec(), etc.
ini_set('magic_quotes_sybase', 'Off'); //Use Sybase-style magic quotes (escape ' with '' instead of \'). 
```

[PHP 手册](http://php.net/manual/fr/security.magicquotes.disabling.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-11T02:26:20.627

Please note that if your hosting include many websites, you just need upload php5.ini to your root hosting folder (not root of website). I have try and get success now.

Incase you are not success to turn magic_quotes_gpc off, please feel free to contact me by skype at boducoscar. I have searching and test nearly 1 day for only turn this off, so i know how disappointed you are in this problem :)

php5.ini code:

```
magic_quotes_gpc = Off
magic_quotes_runtime = Off
magic_quotes_sybase = Off 
```

# python - Ubuntu 服务器 12.04 上的 llvmpy

> ID：15225365
> 
> 赞同：3
> 
> 时间：2013-03-05T13:45:46.547
> 
> 标签：python, enthought, llvm-3.0

我正在尝试使用 edpFree 7.3-2 在 ubuntu 12.04 上安装 llvmpy

```
# uname -a 
Linux svnserver 3.2.0-38-generic #61-Ubuntu SMP Tue Feb 19 12:18:21 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux

# lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 12.04.2 LTS
Release:    12.04
Codename:   precise 
```

在 pip 命令之后，我收到一个错误：

```
#./pip install llvmpy
Downloading/unpacking llvmpy
  Running setup.py egg_info for package llvmpy
    LLVM version = u'3.0'
    Generate intrinsic IDs
    Searching shared library libLLVM-3.0 in /usr/lib/llvm-3.0/lib
    Using PTX
    Traceback (most recent call last):
      File "<string>", line 16, in <module>
      File "/tmp/pip-build/llvmpy/setup.py", line 136, in <module>
        + extra_components)
      File "/tmp/pip-build/llvmpy/setup.py", line 41, in get_libs_and_objs
        parts = run_llvm_config(['--libs'] + components).split()
      File "/tmp/pip-build/llvmpy/setup.py", line 34, in run_llvm_config
        raise Exception("%r stderr is:\n%s" % (args, stderr.decode()))
    Exception: ['llvm-config', '--libs', 'core', 'analysis', 'scalaropts', 'executionengine', 'jit', 'native', 'interpreter', 'bitreader', 'bitwriter', 'instrumentation', 'ipa', 'ipo', 'transformutils', 'asmparser', 'linker', 'support', 'vectorize', 'ptxdesc', 'ptxcodegen', 'ptxasmprinter', 'ptxinfo', 'ptx'] stderr is:
    llvm-config: unknown component name: vectorize

    Complete output from command python setup.py egg_info:
    LLVM version = u'3.0'

Generate intrinsic IDs

Searching shared library libLLVM-3.0 in /usr/lib/llvm-3.0/lib

Using PTX

Traceback (most recent call last):

  File "<string>", line 16, in <module>

  File "/tmp/pip-build/llvmpy/setup.py", line 136, in <module>

    + extra_components)

  File "/tmp/pip-build/llvmpy/setup.py", line 41, in get_libs_and_objs

    parts = run_llvm_config(['--libs'] + components).split()

  File "/tmp/pip-build/llvmpy/setup.py", line 34, in run_llvm_config

    raise Exception("%r stderr is:\n%s" % (args, stderr.decode()))

Exception: ['llvm-config', '--libs', 'core', 'analysis', 'scalaropts', 'executionengine', 'jit', 'native', 'interpreter', 'bitreader', 'bitwriter', 'instrumentation', 'ipa', 'ipo', 'transformutils', 'asmparser', 'linker', 'support', 'vectorize', 'ptxdesc', 'ptxcodegen', 'ptxasmprinter', 'ptxinfo', 'ptx'] stderr is:

llvm-config: unknown component name: vectorize 
```

问题出在矢量化组件上！

作为我安装的先决条件（使用 aptitude）：

```
llvm-3.0
llvm-3.0-dev
llvm-3.0-runtime
libllvm3.0 
```

可能是 3.0 必须替换为 3.1 ？

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:04:02.153

您至少需要`llvm-3.1`哪个组件声明为缺失：

```
$ llvm-config --libs vectorize
-lLLVMVectorize -lLLVMInstCombine -lLLVMTransformUtils -lLLVMipa -lLLVMAnalysis -lLLVMTarget -lLLVMMC -lLLVMObject -lLLVMCore -lLLVMSupport
$ llvm-config --version
3.1 
```

虽然如果可能的话我会考虑 3.3，因为那是开发似乎已经[达到合理点的地方](http://blog.llvm.org/2012/12/new-loop-vectorizer.html)。

**编辑**：看起来`llvmpy-0.11.0`正在被拉入其中期望`llvm-3.2`。采用：

```
pip install -I llvmpy==0.10.0 
```

而是获取绑定到`llvm-3.1`. 测试：

```
$ lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 12.10
Release:        12.10
Codename:       quantal 
```

# javascript - 处理递归异步调用中的回调

> ID：15225367
> 
> 赞同：1
> 
> 时间：2013-03-05T13:45:56.743
> 
> 标签：javascript, html, recursion, callback, jaydata

我使用 Jaydata 作为 HTML5 indexedDB 的 API。我在 indexedDB 中有一个需要递归查询的表。整个过程完成后我需要回调。以下是递归函数。一切完成后我需要回调。

```
function getData(idValue) {
    myDB.MySplDB
        .filter( function(val) {
            return val.ParentId == this.parentId;
        }, {parentId: idvalue})
        .toArray( function(vals) {
            if(vals.length < 1) {
                // some operation to store the value
            } else {
                for (var j=0;j<vals.length;j++) {
                    getData(vals[j].Id);
                }
            }
        });
} 
```

添加`.done(function(){...});`到`.toArray`不起作用，因为它在完成之前被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:52:43.780

（免责声明：我为 JayData 工作）

要等待整个过程的完成，您需要使用 Promise。你总是要回报一个承诺。在循环中它变得棘手，返回一个超级承诺。所以代码应该是这样的：

```
function getData(idValue) {
    return myDB.MySplDB
    .filter( function(val) {
        return val.ParentId == this.parentId;
    }, {parentId: idvalue})
    .toArray( function(vals) {
        if(vals.length < 1) {
            // some operation to store the value
            // important: return a promise from here, like:
            return myDB.saveChanges(); 
        } else {
            var promises = [];
            for (var j=0;j<vals.length;j++) {
                promises.push(getData(vals[j].Id));
            }
            return $.when.apply(this, promises);
        }
    });
}

getData(1)
.then(function() {
        // this will run after everything is finished
}); 
```

评论：

1.  this example uses jQuery promises, so you'll need jQuery 1.8+ $.when uses varargs hence we need the apply

2.  this can work with q promise with a slightly different syntax

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:01:04.877

这个伪代码在你的情况下有意义吗？

```
var helper = function (accu) {
 // Take an id from the accumulator
 // query the db for new ids, and in the db query callback : 
   // If there is child, do "some operation to store the value" (I'm not sure what you're trying to do here
   // Else add the child to the accumulator
   // if accu is empty, call the callback, it means you reached the end 
```

getData() 将使用包含第一个 id 的累加器和您的最终回调调用此助手

# postgresql - 在 postgresql 中只导出外键

> ID：15225370
> 
> 赞同：1
> 
> 时间：2013-03-05T13:46:01.040
> 
> 标签：postgresql, foreign-keys, database-restore

我有一个包含 700 多个表的大型数据库，大小约为。23GB，我正在尝试将此数据库导出到测试环境，问题是当我进行还原时，它不包含任何外键约束，目前我无法弄清楚原因，但似乎数据本身是正确的，所有表、PK、函数和视图也都恢复了，所以唯一剩下的就是外键，postgres 日志不会显示错误。

我已经在谷歌上搜索了几天，但没有运气。而且我很确定这不是正确的方法，但这是我现在所拥有的，所以我只是为了测试目的而试一试，你永远不会知道。

如此简单明了，有什么方法可以只将外键导出到脚本，然后从该脚本中恢复它们？

提前致谢。

@克雷格：当然克雷格这里有详细信息：

*   我要恢复的机器：x86_64-redhat-linux-gnu 上的 PostgreSQL 8.4.8，由 GCC gcc (GCC) 4.1.2 20080704 (Red Hat 4.1.2-48) 编译，64 位
*   我进行原始备份的机器：x86_64-redhat-linux-gnu 上的 PostgreSQL 8.4.13，由 GCC gcc (GCC) 4.4.6 2 0120305 (Red Hat 4.4.6-4) 编译，64 位

导出命令：我正在使用 Adepmpiere Adempiere [Wiki](http://www.adempiere.com/ADempiere_ERP)，它包含自己的 DBExport 和 DBRestore 脚本。
DBExport 脚本具有以下命令：

```
pg_dump -h 127.0.0.1 -p 5432 --no-owner -U adempiere adempiere > /home/adempiere/adempiere.sql

```

DBRestore 有以下几行：

```
psql -h 127.0.0.1 -p 5432 -d adempiere -U adempiere -f /home/adempiere/adempiere.sql

```

我能够在笔记本电脑上的虚拟机上恢复这个脚本，它恢复了 FK 包含的所有内容，但在测试机器上没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T22:13:20.300

好吧，这是我带来的解决方案

我只使用以下命令备份了结构 **pg_dump -h 127.0.0.1 -p 5432 --no-owner -U -s adempiere adempiere > /home/adempiere/adempiere_bkp.sql**

参数 -s 是这里的关键

要恢复只需在测试机器上执行以下命令

**psql -h 127.0.0.1 -p -d adempiere -U adempiere -f /{ 文件路径 adempiere_bkp.sql }**

瞧，一切又完成了！

希望它可以帮助别人。谢谢您的帮助。

# java - 在值数组中引入的正则表达式异常

> ID：15225371
> 
> 赞同：0
> 
> 时间：2013-03-05T13:46:01.867
> 
> 标签：java, regex

我创建了这样的正则表达式：

```
^[0-9][0-9][A-Z][A-Z][a-z]_([0-9]{1,10})_([0-9]{1,11})_([0-9]{1,11})$ 
```

它应该给我的值范围从 01BRa_1_1_1 到 99BRz_9999999999_99999999999_99999999999

我的问题是我需要从 _number_number_number 中排除值 0 并从数字 1 开始。一直在尝试不同的表达式，但找不到正确的表达式。

如果有人知道如何解决这个帮助会很好。谢谢。

目标是消除 0_0_0 和 00_00_00 以及 000_000_000 以及 0 是第一个数字的所有情况，因此这三个字段的第一个组合将是 1_1_1。

我在 Java 中使用它（回复一条评论），但看不到这或多或少的相关性，这只是一个模式。

解决了这个问题：

```
^[0-9][0-9][A-Z][A-Z][a-z]_([1-9][0-9]{0,9})_([1-9][0-9]{0,10})_([1-9][0-9]{0,10})$ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:53:35.263

如果您的目标是消除等于 0 的值（0、00、000 等），那么这样的表达式可能会起作用：

```
^[0-9][0-9][A-Z][A-Z][a-z]_(?!0+_)([0-9]{1,10})_(?!0+_)([0-9]{1,11})_(?!0+$)([0-9]{1,11})$ 
```

当然，这将取决于您的正则表达式引擎是否支持可变长度零宽度断言（又名“前瞻”）。了解您使用的是哪种口味会有所帮助。（来自[正则表达式](/questions/tagged/regex "显示标记为“正则表达式”的问题")工具提示：*“请同时包含一个标签，指定您正在使用的编程语言或工具。”*）

如果您的目标是消除以 0、（0、01、001 等）开头的任何内容，那么这样的表达式可能会起作用：

```
^[0-9][0-9][A-Z][A-Z][a-z]_([1-9][0-9]{0,10})_([1-9][0-9]{0,10})_([1-9][0-9]{0,10})$ 
```

# javascript - 富文本数据以 HTML 格式保存到 sql server

> ID：15225372
> 
> 赞同：1
> 
> 时间：2013-03-05T13:46:09.287
> 
> 标签：javascript, html, sql-server-2008, c#-4.0, yui

我目前正在将富文本编辑器的数据以文本形式保存到数据库中，但我需要将其保存为纯 HTML，我对此感到困惑，我必须在数据库表中使用任何格式，或者我应该如何保存 yui HTML 格式的数据？

我是数据库的初学者，所以请提供适当的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:21:43.080

对于没有“HTML 解释器”的应用程序，带有 HTML 代码的文本仍然是纯文本，例如在记事本中您将其视为普通文本，但在 Web 浏览器中它会为您创建 HTML 文档。因此，您不必为此更改数据库列类型。

但我不得不提一下，文本类型不是存储文本的最佳格式，最好尝试 varchar 或 nvarchar。有关更多信息，请查看本文：http: [//blog.sqlauthority.com/2007/05/26/sql-server-2005-replace-text-with-varcharmax-stop-using-text-ntext-image-数据类型/](http://blog.sqlauthority.com/2007/05/26/sql-server-2005-replace-text-with-varcharmax-stop-using-text-ntext-image-data-types/)

# python - 用 python 填充一个 excel 文件弄乱了我的日期

> ID：15225378
> 
> 赞同：3
> 
> 时间：2013-03-05T13:46:32.517
> 
> 标签：python, excel, python-2.7

这是过程，我有一个名为模板的 xlsm 文件，位于名为 data 的工作表中。然后我有 5 个 csv 文件，我必须将所有 csv 文件的内容放在数据工作表中。

这样做没有问题，除非日期是“07/09/12”，否则它将在 Excel 中变为“09/07/12”。

所以我有一个名为 data 的列表，这是其中一行的打印

```
['07/09/12', 'LARO', 'MEDITERRAN', '245', 'UZES', '11', '0', '0', '0', '0', '11', '0'] 
```

我正在使用这段代码将其放入 excel 文件中：

首先我打开文件（xl 是因为我使用“with self as xl”）

```
def open(self):
    self.xl.Visible = 1
    self.xl.ScreenUpdating = False
    self.worksheet = self.xl.Workbooks.Open(self.getOutputFile()) 
```

然后我擦除数据工作表

```
def cleanData(self):
    sheet = self.xl.Sheets(self.sheetName)
    def findNumberOfLines(start_line):
        nb = 0
        while sheet.Cells(start_line + nb, self.startColumn).Value is not None:
            nb += 1
        return nb 
```

然后我填写数据

```
def fillData(self):
    sheet = self.xl.Sheets(self.sheetName)
    noRow = self.startLine
    for row in self.data:
        noCol = self.startColumn
        for i, value in enumerate(row):
            sheet.Cells(noRow, noCol).Value = value
            noCol+=1
        noRow+=1 
```

我保存

```
def save(self):
    self.worksheet.Save() 
```

除了日期和月份在 excel 中倒置外，其他一切都很好（它不显示美国格式，而是显示月份和日期倒置的欧元格式（10 月 3 日变为 3 月 9 日，使用“长日期”格式进行测试）

奇怪的事情：包含日期的 excel 单元格设置为“标准”，但是一旦它被我的 python 脚本归档，它就会设置为“日期”

**解决方法** 在填写表格时我截取每个日期并将它们转换为日期时间，excel 似乎喜欢这样

```
def fillData(self):
    sheet = self.xl.Sheets(self.sheetName)
    noRow = self.startLine
    pattern = re.compile('^\d+/\d+/\d+$')
    for row in self.data:
        noCol = self.startColumn
        for i, value in enumerate(row):

            if (pattern.match(str(value))):
                date = value.rsplit('/')
                sheet.Cells(noRow, noCol).Value = datetime(int(date[2]), int(date[1]), int(date[0]))
            else: sheet.Cells(noRow, noCol).Value = value
            noCol+=1
        noRow+=1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:49:53.890

除非您告诉 Excel，否则它会尝试“智能”处理日期，这意味着它会猜测格式是什么以及如何显示转换后的日期。

在几乎所有情况下，您都不希望这样。此类文件在具有不同日期格式的计算机上或当用户更改操作系统默认值时（甚至一些美国人更喜欢 DD/MM/YY 而不是标准的 MM/DD/YY），会以不同的方式显示。

所以正确的解决方案是`datetime`代替字符串值。这行得通，顺便说一句。因为里面的 COM 框架`win32com`会将 Python`datetime`对象转换为对应的 Excel 日期对象并正确设置格式。

# java - 将 Spring Security 2.5 升级到 3.1 - java.lang.NoClassDefFoundError: org/springframework/security/Authentication

> ID：15225385
> 
> 赞同：0
> 
> 时间：2013-03-05T13:46:43.300
> 
> 标签：java, spring-security, migration, noclassdeffounderror

事实证明，这个问题很难解决。通常的故事，继承了一个维护很差的 Java Web 应用程序，没有单元测试和各种古老的 jar 依赖项，没有版本信息转储到使用 Ant 构建的 lib 目录中。为了更好地维护和理解我迁移到 Maven 的依赖项。随后，我意识到 Spring 的版本已经很老了（Spring 2.x 和 Spring Security 2.0.3）。我成功升级到 Spring 2.5。我现在已经开始将 Spring 迁移到 3.1.2.RELEASE，并将 Spring Security 迁移到 3.1.3.RELEASE。

一切都可以编译，我也没有遇到任何命名空间问题（在 Spring XML 配置的标头中声明），但是在作为 WAR 文件部署到 Tomcat 容器中时失败。日志文件报告：

```
Could not instantiate bean class [com.mydomain.repository.ReportDaoImpl]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/security/Authentication
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:997) 
```

我检查了，org.springframework.security.Authentication 属于旧的 Spring Security jar (2.0.4)

我当前的 Maven 依赖项如下：

```
<spring.version>3.1.2.RELEASE</spring.version>

      <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context-support</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <!--  SPRING SECURITY -->

             <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-acl</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-taglibs</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-crypto</artifactId>
        <version>3.1.3.RELEASE</version>
    </dependency> 
```

我的 security.xml 是最小的：

```
<?xml version="1.0" encoding="UTF-8"?>

<beans:beans xmlns="http://www.springframework.org/schema/security"
  xmlns:beans="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://www.springframework.org/schema/security
       http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<http auto-config='true'>
    <intercept-url pattern="/**" access="ROLE_Admin" />
</http>

<authentication-manager>
    <authentication-provider>
        <user-service>
            <user name="admin" password="password" authorities="ROLE_Admin" />
        </user-service>
    </authentication-provider>
</authentication-manager> 
```

我的所有其他 Spring Config 文件在其配置中使用以下命名空间标头：

```
<?xml version="1.0" encoding="UTF-8"?>

 <beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd"> 
```

据我所知，此应用程序不包含有关 Spring 的注释。

那么 Spring Security 2.0.4 类 org.springframework.security.Authentication 在实例化 DAO 对象时如何被 Spring 3.1 类 org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory 请求（这与 Spring 安全设置无关）。可能选择了 DAO，因为它是第一个 bean，以便由类加载器（通过 Spring 依赖注入容器）在 applicationContext.xml 中实例化，但我看不出这个应用程序中的某个地方仍然有一个引用一个旧的 2.0.4 类。由于一切编译正常，并且 Maven pom 仅引用 3.1，我的看法是，必须有一些配置仍在某个地方试图拉入旧类。任何具有 Spring Security 知识的人（特别是将大型应用程序从版本 2 升级到版本 3）之前可能遇到过这个问题，但我无法通过谷歌找到完全匹配的内容。感谢您对此提出任何建议。目前被难住了。

快速更新：

applicationContext.xml 具有上面给出的命名空间标头，DAO 的简单引用如下：

```
<bean id="reportDao" class="com.mydomain.repository.ReportDaoImpl">
    <property name="dataSource" ref="myDataSource" />
</bean> 
```

真的没有什么了。applicationContext 拉入另一个上下文文件 applicationContext-datasource 声明（与上面相同的命名空间标头）：

```
 <bean id="parentDataSource" class="org.apache.commons.dbcp.BasicDataSource"
    destroy-method="close">
    <property name="driverClassName" value="${jdbc.driverClassName}" />
</bean>

<bean id="myDataSource" parent="parentDataSource">
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
</bean> 
```

ReportDao 包含超过 1500 行编写不佳的程序代码。它是一个 POJO 并实现了 rg.springframework.context.ApplicationContextAware。它还使用 org.springframework.jdbc.core.support.JdbcDaoSupport 对数据库执行 CRUD 操作。

运行 mvn -X 依赖项的输出（已切换到 Spring [main] 3.0.7）：

```
 org.springframework:spring-webmvc:jar:3.0.7.RELEASE:compile
    org.springframework:spring-asm:jar:3.0.7.RELEASE:compile
    org.springframework:spring-beans:jar:3.0.7.RELEASE:compile
    org.springframework:spring-expression:jar:3.0.7.RELEASE:compile
    org.springframework:spring-web:jar:3.0.7.RELEASE:compile
 org.springframework:spring-aop:jar:3.0.7.RELEASE:compile
    aopalliance:aopalliance:jar:1.0:compile
 org.springframework:spring-context:jar:3.0.7.RELEASE:compile
 org.springframework:spring-context-support:jar:3.0.7.RELEASE:compile
 org.springframework:spring-core:jar:3.0.7.RELEASE:compile
 org.springframework:spring-tx:jar:3.0.7.RELEASE:compile
 org.springframework:spring-jdbc:jar:3.0.7.RELEASE:compile
 org.springframework.security:spring-security-acl:jar:3.1.3.RELEASE:compile
 org.springframework.security:spring-security-config:jar:3.1.3.RELEASE:compile
 org.springframework.security:spring-security-core:jar:3.1.3.RELEASE:compile
 org.springframework.security:spring-security-taglibs:jar:3.1.3.RELEASE:compile
 org.springframework.security:spring-security-web:jar:3.1.3.RELEASE:compile
 org.springframework.security:spring-security-crypto:jar:3.1.3.RELEASE:compile 
```

看起来不错，我相信。

可交付的 WAR 文件的 WEB-INF/lib 目录中唯一的 spring jars（grep 确定）是：

```
./spring-aop-3.0.7.RELEASE.jar
./spring-asm-3.0.7.RELEASE.jar
./spring-beans-3.0.7.RELEASE.jar
./spring-context-3.0.7.RELEASE.jar
./spring-context-support-3.0.7.RELEASE.jar
./spring-core-3.0.7.RELEASE.jar
./spring-expression-3.0.7.RELEASE.jar
./spring-jdbc-3.0.7.RELEASE.jar
./spring-security-acl-3.1.3.RELEASE.jar
./spring-security-config-3.1.3.RELEASE.jar
./spring-security-core-3.1.3.RELEASE.jar
./spring-security-crypto-3.1.3.RELEASE.jar
./spring-security-taglibs-3.1.3.RELEASE.jar
./spring-security-web-3.1.3.RELEASE.jar
./spring-tx-3.0.7.RELEASE.jar
./spring-web-3.0.7.RELEASE.jar
./spring-webmvc-3.0.7.RELEASE.jar 
```

再次，看起来很明智。

Grepping“身份验证”的源代码没有帮助。这看起来像一个传递运行时依赖问题。它在编译时不会被注意到，并且没有在任何地方声明为第一级依赖项。但是在运行时（在 Tomcat 6 容器中）以某种方式在部署时请求对旧库文件的恶意引用。

作为预防措施，我打算删除我的 Tomcat 实例并从头开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T03:31:50.613

好的，终于解决了这个特殊问题。NoClassDefFoundError 正是它在锡上所说的。正如卢克泰勒问的那样：“你确定你重新编译了吗？” 嗯，是的，也不是。我确实重新编译、清理了目标（使用 Maven）等。我第一次使用反编译器查看生成的类“XXXDao”的源代码时，我看到了我的更改。但我也注意到，当我从 java 源代码中添加/删除几行时，堆栈跟踪中的错误仍然在相同的（随机）行号上。这解释了我以某种方式得到了一个陈旧的 .class 文件。事实证明，Maven 和/或 Eclipse（m2eclipse 插件）以某种方式设法将类文件编译到我的核心项目（不是目标）的 WEB-INF/classes 目录中，并且不确定地覆盖目标中的 WEB-INF/classes 目录一些课程。再陌生，在将类压缩为 .WAR 时，它总是部署旧类。所以你有一个爆炸的内容看起来正确的情况，但实际上是具有不同类的压缩 WAR 文件。

经验教训 - 如果您遇到这种行为，请仔细检查编译步骤，并尝试找出旧的类文件（引用旧的 Authentication 类）是如何进入您的新构建的。感谢那些为帖子做出贡献的人的指点！

# php - 如何在 NODE.JS 上模拟 php crypt()

> ID：15225389
> 
> 赞同：5
> 
> 时间：2013-03-05T13:46:50.817
> 
> 标签：php, javascript, node.js, encryption, des

请帮助 php -> javascript(node.js) 转换

```
$key = crypt($key, $salt); 
```

我正在用 node.js 重写 php 脚本，我被 php 中的哈希签名生成困住了，这是使用 crypt() 函数和盐匹配“CRYPT_EXT_DES”模式制作的

> CRYPT_EXT_DES - 扩展的基于 DES 的散列。“salt”是一个 9 字符的字符串，由一个下划线后跟 4 个字节的迭代计数和 4 个字节的 salt 组成。这些被编码为可打印字符，每个字符 6 位，最低有效字符在前。值 0 到 63 被编码为“./0-9A-Za-z”。在 salt 中使用无效字符会导致 crypt() 失败。

我对加密并没有真正的经验，在加密模块上研究 node.js 文档并没有帮助。请帮助如何在 node.js 上实现它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-14T02:13:43.740

看起来[crypt(3)](https://github.com/sendanor/node-crypt3)库应该可以工作。

例如：

```
const crypt = require( 'crypt3/sync' ),
      key = "password",
      hash = crypt( key, crypt.createSalt( 'sha512' ) ); 
```

然后测试存储的哈希...

```
const crypt = require( 'crypt3/sync' ),
      key = "password",
      hash = /* stored hash */;

if ( crypt( key, hash ) !== hash ) {
  // access denied
  return false;
} 
```

（晚了六年，我知道）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-17T13:00:57.717

你可以用[https://github.com/thomas-alrek/node-php-password做到这一点](https://github.com/thomas-alrek/node-php-password)

```
var Password = require("node-php-password");

var options = {
    cost: 10,
    salt: "qwertyuiopasdfghjklzxc"
};
const hashedPassword = Password.hash(password, "PASSWORD_DEFAULT", options); 
```

这将与 php 中的结果相同

```
crypt(password,'$2y$10$'.'qwertyuiopasdfghjklzxc'.'$') 
```

# python - 使用 POST 方法在 GAE 中删除得到 405 错误

> ID：15225394
> 
> 赞同：0
> 
> 时间：2013-03-05T13:47:02.410
> 
> 标签：python, google-app-engine, google-cloud-datastore

这是我的代码：

```
<form method="post" action="/del/" >
     <input type="hidden" name="dealkey" value="{{deal.key()}}" />
     <input class="btn btn-small" type="submit" value="Delete"  />
 </form>

class Delete(Handler):
    def post(self):
        dealid = self.request.get('dealkey')
        dealid = int(dealid)
        if dealid:
            Book.delete(dealid)
            self.redirect("/book")

app = webapp2.WSGIApplication([('/', MainPage),
                            ('/book', BookMe),
                            ('/del/',Delete),
                            ],debug=True) 
```

我正在尝试使用 POST 删除 gae 数据存储中的实体，但我得到 405，有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:54:43.033

你如何定义你的`Handler`？

或者您可以使用内置处理程序并查看错误是否继续。

```
class Delete(webapp2.RequestHandler)
      def post(self):
          dealid = self.request.get('dealkey')
          dealid = int(dealid)
          if dealid:
              Book.delete(dealid)
              self.redirect("/book") 
```

# cakephp - 在 cakephp 中，站在一个视图上，如何调用一个元素，并在布局中创建的 div 中使用它？

> ID：15225397
> 
> 赞同：0
> 
> 时间：2013-03-05T13:47:09.923
> 
> 标签：cakephp, cakephp-2.0

在我的布局 cakephp 中，我有 2 个 div：

```
<div id="header"> 
</div>

<div id="sideBar">
</div> 
```

问题是，站在一个视图上，例如`index.ctp`，如何调用 div 内的元素`sidebar`？

那么如何`element`在其他地方创建的 div 内部添加一个呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:29:42.777

像这样：

```
<div id="sideBar">
    <?php echo $this->element('sideBar'); ?>
</div> 
```

如果你想传递参数：

```
<div id="sideBar">
    <?php echo $this->element('sideBar', array('param1' => $param1)); ?>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:49:48.257

您可以使用新的强大的视图块： [http ://book.cakephp.org/2.0/en/views.html#using-view-blocks](http://book.cakephp.org/2.0/en/views.html#using-view-blocks)

# windows-phone-7 - WP：如何创建自定义 UI 枢轴？

> ID：15225400
> 
> 赞同：0
> 
> 时间：2013-03-05T13:47:16.650
> 
> 标签：windows-phone-7

我想在枢轴控制中创建一个页面。它看起来像照片（我在 Photoshop 中设计的）：

[https://lh3.googleusercontent.com/-HL07lVgHwx8/UTXxttNXk0I/AAAAAAAAAHs/93Gj3bw1-q0/s427/DSPhong.PNG](https://lh3.googleusercontent.com/-HL07lVgHwx8/UTXxttNXk0I/AAAAAAAAAHs/93Gj3bw1-q0/s427/DSPhong.PNG)

问题：如何使用 XAML、blend 4 或 C# 代码设计 UI 看起来像照片？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:20:38.757

[您对DataTemplates](http://msdn.microsoft.com/en-us/library/system.windows.datatemplate.aspx)了解多少？您需要做的是：

*   更改背景图像，Pivot.Background 或 Page.Background
*   将数据模板设计为三行三列的网格。这一步很简单，但是你需要学习如何使用 DataTemplates。

先做实验。

# android - 使用 adb 获取 2 个设备的完整日志

> ID：15225402
> 
> 赞同：1
> 
> 时间：2013-03-05T13:47:18.457
> 
> 标签：android, adb, android-logcat

我正在测试一个应用程序，其中有 2 个设备使用套接字进行通信并监视时间戳值。我从 DDMS 角度选择所需的设备名称。但是缺少一些初始日志（因为我在代码中有许多 Log.d 语句）。在我停止两部手机中的应用程序后，我想存储整个日志文件。有人可以告诉我如何使用 adb 在命令行中完成此操作吗？我找不到 2 台设备的任何示例。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:06:48.570

在启动应用程序之前，您可以在终端中启动以下命令：

```
adb logcat <your_application_log_tag>:V *:S > file.txt 
```

`<your_application_log_tag>`是您在应用程序中使用的日志标记。`*:S`意味着您禁止来自其他组件的所有日志输出。`> file.txt`将命令的输出重定向到`file.txt`.

问题的原因是 Android 在 RAM 中有一个缓冲区，如果它已满，它会重写最旧的条目 (FIFO)。我提供的命令会将日志存储在您的计算机上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:05:24.697

您可以尝试使用两个控制台并分别为两个设备获取 logcat

使用获取每个设备的序列号`adb devices`

并将 logcat 保存为文本文件

控制台1：`adb -s <device1serialNO> logcat -d > logcat1.txt`

控制台 2：`adb -s <device2serialNO> logcat -d > logcat2.txt`

如果需要，您可以过滤给定标签的结果

# git-submodules - 为什么 get 子模块不在任何分支上？

> ID：15225406
> 
> 赞同：1
> 
> 时间：2013-03-05T13:47:33.360
> 
> 标签：git-submodules

我有一个带有 git 子模块的项目。我用`git clone --recursive`. 当我这样做时，我在子模块上收到此错误：

```
$ cd submodule
$ git status
# Not currently on any branch.
$ 
```

我想做的是让子模块自动放在主分支上，因为我经常在子模块中工作。有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T08:36:36.760

这不是错误。它只是表明子模块处于“分离头”模式。原因是超级项目的 git 链接指向子模块的特定提交，而不是特定分支。所以递归克隆会直接检出该提交。

如果你想在子模块的分支 master 上工作：

```
git checkout -t origin/master 
```

# java - 在应用程序未激活时进行应用程序编辑设置。安卓

> ID：15225407
> 
> 赞同：1
> 
> 时间：2013-03-05T13:47:36.043
> 
> 标签：java, android

我有一个应用程序提示用户通过 timePicker 输入时间值。我使用 BufferedWriter 将输入写入文件。

我希望我的应用程序每天在提供的时间编辑用户设置。我可以在应用程序中使用函数调用来编辑设置，但我不知道在应用程序未激活时如何运行此函数。

即使应用程序未处于活动状态，如何让应用程序每天在指定时间运行此功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:49:56.067

使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)在指定时间安排[Service](http://developer.android.com/reference/android/app/Service.html)或[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html) （如果需要用户交互，甚至可以安排[Activity ）。](http://developer.android.com/reference/android/app/Activity.html)然后只需将用于编辑设置的代码放入 Service 或 BroadcastReceiver。

# java - 为什么线程不能正常休眠？

> ID：15225411
> 
> 赞同：1
> 
> 时间：2013-03-05T13:47:50.300
> 
> 标签：java, multithreading

我正在尝试制作一个简单的 JButton，单击它会导致简单的 JLabel 将其文本更改为“第二个文本”，之后我希望当前线程休眠几秒钟，最后让 JLabel 再次更改其文本，这个“第三个文本”的时间。我想我已经在这里完成了，但它并没有按照我想要的方式工作。下面提供的代码使 JButton 在指定的时间范围内冻结，就好像它被按住一样，然后标签变为其第三状态。换言之，“秒文字”不会出现。

请告诉我应该怎么做。

谢谢你。

```
package testPackage;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Demo {

    public static void main(String[] args) throws InterruptedException {
        JFrame frame = new JFrame();
        JButton button = new JButton("Click me!");
        final JLabel label = new JLabel("first text");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(600, 600);
        JPanel panel = new JPanel();
        panel.add(button);
        panel.add(label);
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                label.setText("second text");
                try {
                    Thread.currentThread();
                    Thread.sleep(4000);
                } catch (InterruptedException exc) {
                    System.out.println("Erorrrrr");
                }

            }
        });

        frame.add(panel);
        frame.setVisible(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:51:32.627

当您考虑 Java 的内部结构时，更改文本属性并不是唯一要查看结果的事情。该控件还必须重新绘制（可能无效）。

通过调用 sleep 您实际上阻止了 java GUI 内部工作人员重绘您更改的控件。它只能在睡眠结束后发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:53:20.370

如果您在事件调度线程（处理 GUI 事件的线程）上休眠，那么 GUI 将冻结。您可以从动作侦听器开始一个后台线程并在那里睡觉。

```
公共无效actionPerformed（ActionEvent e）
{
    label.setText("文本 1");
    新线程（新可运行（）
    {
        公共无效运行（）
        {
            尝试 {
                线程.sleep(1000);
            }catch（InterruptedException 忽略）{}

            // 排队 Swing 代码以在 EDT 上执行
            EventQueue.invokeLater(new Runnable()
            {
                公共无效运行（）
                {
                    label.setText("text2");
                }
            });
        }
    }）。开始（）;
}
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:50:06.117

您的 GUI 在线程上运行。当您将该线程休眠 x 秒时，您的 GUI 将冻结 x 秒。

正如 Marko 在评论中指出的那样，“您必须改为使用 javax.swing.Timer 安排延迟事件”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T14:04:52.217

在执行的操作方法中，您需要释放主 GUI 线程以使更改发生：

因此，如果您在 actionPerformed 方法中打开一个新线程，它将释放主 GUI 线程，然后在睡眠调用 label.setText("third text") 之后，这会将标签更改为第二个文本，首先等待 4 秒，然后将其更改为第三个文本

```
 @Override
        public void actionPerformed(ActionEvent e) {
            label.setText("second text");
            new Thread(){
              public void run(){
                try {
                  //Thread.currentThread();
                  Thread.sleep(4000);
                  label.setText("third text");
               } catch (InterruptedException exc) {
                System.out.println("Erorrrrr");
             }
           }
         }.start();

        } 
```

# web - 构建以流量为中心的网站时要记住的事项

> ID：15225428
> 
> 赞同：0
> 
> 时间：2013-03-05T13:48:37.493
> 
> 标签：web

我有这个问题。如果我正在设计一个预计会有高流量的网站，那么我应该记住哪些事情？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T20:20:28.873

一旦网站正常工作，我会尽可能地对其进行优化。[YSlow](http://yslow.org/)或[WebPageTest](http://www.webpagetest.org/)等工具可以轻松分析页面并查明瓶颈和需要改进的地方。

同样对于高容量网站，我认为您肯定想要使用内容交付网络。有很多选择，包括[Amazon CloudFront](http://aws.amazon.com/cloudfront/)和[CloudFlare](https://www.cloudflare.com)。使用 CDN 可以将服务器上的负载减少 60-80%，它会使网站更快，并且几乎不会花费您任何费用。

除非有特定原因不适合您的网站，否则您不会出错！

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:51:29.047

小心你的数据库管理。建立你的数据库表和表之间的链接，记住你不想搜索/加载无用的东西。

# git - 为什么我们使用 Git 密钥

> ID：15225432
> 
> 赞同：-1
> 
> 时间：2013-03-05T13:48:47.477
> 
> 标签：git

我是 git 新手。为什么我们在 Git 中使用密钥？配置 git 存储库的公钥和私钥？我们可以在没有密钥的情况下配置 git 吗？如何使用生成的公钥，这有什么需要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:52:35.533

SSH 用作机器和 git 服务器之间的身份验证和通信机制。根据您使用的内容，可能还有其他可用的身份验证/通信协议方式。

例如，GitHub 提供 HTTPS 和 SSH。看看[这里](https://help.github.com/articles/generating-ssh-keys)。

SSH 认证的中介点是用户的机器。正如 Miky Dinescu 所指出的，公钥/私钥对是身份验证/验证机制。

我认为没有理由必须从一个存储库推送和拉取到另一个存储库。这不是它的工作方式。出于团队工作的目的，你有分叉、拉取请求、合并功能和一堆其他东西。

考虑您的项目的后勤工作，并弄清楚需要多少个存储库。如果客户端和服务器完全分开，文件/结构完全不同，并且可能有不同的团队在处理它们，那么更多的存储库是非常实用的。

如果只是你试图掌握版本控制并处理一个小项目，你真的不需要两个 repos。给我一些有关您当前方案的更多详细信息，这将更有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T13:52:10.257

我们使用公钥/私钥，因为它们是非对称加密的关键，这使得验证和授权用户访问存储库成为可能。

公钥的使用对于生成数字消息签名非常重要，该签名可以验证和保证将更改提交到存储库中的完整性。

另一方面，它们还提供了一种自然的方式来在签出代码时确认存储库中文件的真实性和完整性。

由于 Git 被设计为一个分布式源代码控制存储库系统，它需要能够允许许多人访问下载和上传数据，而无需始终保持连接，但同时又不牺牲安全性。

# ios - 用于 URL Scheme 测试的 iOS Simulator WebApp/Bookmark

> ID：15225434
> 
> 赞同：6
> 
> 时间：2013-03-05T13:48:55.153
> 
> 标签：ios, ios-simulator, url-scheme

我正在我的应用程序中测试自定义 URL 方案，我想添加一个调用该 URL 的主屏幕图标。每当我请求我的自定义 URL 时，它都会打开我的应用程序，然后将 Safari 的地址栏恢复为之前显示的 URL。

我试图通过编辑另一个 URL 的属性来绕过这个问题，例如

1.  打开 Safari
2.  导航到[http://google.com](http://google.com)
3.  点击操作按钮，然后点击“添加到主页”

但这失败了，因为您无法编辑分配给主屏幕应用程序的 URL。

作为后备，我想只为应用程序添加一个书签，所以我尝试为一个网站添加书签，然后像这样编辑 URL：

1.  打开 Safari
2.  导航到[http://google.com](http://google.com)
3.  点击操作按钮，然后点击“书签”

但这失败了，因为在 iOS 模拟器上，您无法编辑书签的 URL（尽管出于某种原因您可以在设备上执行此操作）。

**更新：**正如 tkanzakic 指出的那样，您可以编辑用户添加的书签，而不是预定义的书签

理想情况下，我想要一个主屏幕应用程序，但宁愿选择书签。

此外，由于防火墙限制，我无法将此设备连接到我的 Apple 帐户，这意味着我也无法同步我的 Safari 书签。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T18:14:03.947

啊，想通了。您可以按照以下步骤在主屏幕上获取指向任何 URL 的 webapp：

1.  在移动 Safari 中，导航到任何网页，点击操作按钮并为此网页制作主屏幕图标。
2.  关闭模拟器
3.  打开目录`/Users/<USERNAME>/Library/Application Support/iPhone Simulator/6.1/Library/WebClips`
4.  The webclips folder stores all the homescreen webapps; find the one you just created and open the Info.plist file in a text editor.
5.  Edit the keys (such as `URL` and `Title`) as desired.

When you next relaunch the simulator, you homescreen webapp will point to the new URL.

Optionally, you can change the icon.png to change the webapp's icon.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T14:30:36.730

> 作为后备，我想只为应用程序添加一个书签，所以我尝试为一个网站添加书签，然后像这样编辑 URL：
> 
> 1.  打开 Safari
> 2.  导航到[http://google.com](http://google.com)
> 3.  点击操作按钮，然后点击“书签”
> 
> 但这失败了，因为在 iOS 模拟器上，您无法编辑书签的 URL（尽管出于某种原因您可以在设备上执行此操作）。

这不是真的，可以将 URL 更改为书签，查看[本文](http://osxdaily.com/2012/03/30/view-source-safari-ipad-iphone/)以了解如何做到这一点。我已经在模拟器和设备上做到了这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:14:00.303

只需创建一个在其应用程序委托中打开 URL 的小应用程序（使用 Xcode）：

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    [application openURL:[NSURL URLWithString:@"myappscheme://whatever/"]];
} 
```

请注意，我使用`applicationDidBecomeActive:`而不是`applicationDidFinishLaunching:`在启动器应用程序之前启动后使其工作。

或者，您可以`UIApplicationExitsOnSuspend`在 Info.plist 中设置以强制终止。

# cakephp - 如何在 Cakephp 中定义一个复选框变量

> ID：15225435
> 
> 赞同：0
> 
> 时间：2013-03-05T13:48:55.760
> 
> 标签：cakephp

我的插件元素中有一个表单，我想将复选框值插入名为 it_queries 和字段 status_type 的表中，它给了我一个错误 Undefined variable: variableValue [APP\Plugin\Feedback\View\Elements\comment_add.ctp ，第 37 行]。我已经像这样在我的控制器中声明了变量

```
$this->set('variableValueStatus', 'Pending'); 
```

这是第 37 行，这给了我错误

下面是控制器代码

```
 App::uses('FeedbackAppController', 'Feedback.Controller');

class CommentsController extends FeedbackAppController
{
public $components = array('Feedback.Comments');

public function add($foreign_model = null, $foreign_id = null)
{
if (empty($foreign_model) ||
empty($foreign_id) ||
!$this->request->is('post')
)
{
foreach ($_POST['likebutton'] as $pageId => $likeFlag) {
$dbFlag = $likeFlag ? 'Yes' : 'No';
}
return $this->redirect('/');
}

App::uses($foreign_model, 'Model');
$Model = ClassRegistry::init($foreign_model);

if (!($Model instanceof Model))
{
return $this->redirect('/');
}

if ($Model->hasAny(array($Model->primaryKey => $foreign_id)) == false)
{
return $this->redirect('/');
}

if (!isset($this->request->data['Comment']['foreign_model']) ||
!isset($this->request->data['Comment']['foreign_id']) ||
$this->request->data['Comment']['foreign_model'] != $foreign_model ||
$this->request->data['Comment']['foreign_id'] != $foreign_id)
{
return $this->redirect('/');
}

$user_id = null;

if (isset($this->Auth))
{
$user_id = $this->Auth->user('id');
}

$this->request->data['Comment']['foreign_model'] = $Model->name;
$this->request->data['Comment']['foreign_id'] = $foreign_id;
$this->request->data['Comment']['user_id'] = $user_id;

$this->Comment->create();

if (!$this->Comment->save($this->request->data))
{
$this->set('validation_errors', $this->Comment->validationErrors);
return;
}

$this->redirect($this->request->referer().'#comment-'.$this->Comment->id);
}
} 
```

在我元素的添加视图中，这是我尝试访问变量值的方式

```
echo $this->Form->checkbox('ItQuery.status_type', array('type' => 'hidden', 'value'=>$variableValueStatus)); 
```

如果有人可以告诉我如何解决这个问题，那就太棒了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:52:39.450

您只在 !post 上传递变量，并且如果未设置外部模型和外部 id。在大多数情况下，这很可能不起作用。如果您在使用它之前没有在视图中检查它，那么您应该始终传递一个变量。

但无论如何，它仍然是错误的。如果您不希望表单回退到 POST 上的旧值（它不应该），则必须使用“默认”而不是“值”。

此外，最好使用 $this->request->data 来正确填写表单的默认值：

```
if (!$this->request->is('post')) {
    $this->request->data['ItQuery']['status_type'] = 'Pending';
} 
```

查看[使用表单](http://www.dereuromark.de/2010/06/23/working-with-forms/)

# jersey - Dropwizard - 过滤器给我 500 服务器错误，而不是定义的响应状态

> ID：15225436
> 
> 赞同：2
> 
> 时间：2013-03-05T13:48:58.243
> 
> 标签：jersey, dropwizard

我有一个过滤器-为我的网络服务添加了 TimeValidationFilter，如下所示：

```
@Override
public final void run(T configuration, Environment environment) throws Exception {
    environment.addFilter(new TimeValidationFilter(), "/*");
    environment.manage(***blablabla***);
    environment.addHealthCheck(***blablabla***);
    try {
        environment.addResource(new BlablaResourceImpl(configuration));
    } catch (ConfigurationException e) {
        throw new IllegalStateException(e);
    }
} 
```

我的 TimeValidationFilter 只是在此阶段检查 startTime 和 endTime 是否为空：

```
public class TimeValidationFilter implements Filter {

    public final static String START_TIME = "startTime";
    public final static String END_TIME = "endTime";

    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException,
            ServletException {
        HttpServletRequest request = (HttpServletRequest) req;
        String startTimeStr = request.getParameter(START_TIME);
        String endTimeStr = request.getParameter(END_TIME);

        if (startTimeStr == null || endTimeStr == null) {
            throw new WebApplicationException(Response.Status.BAD_REQUEST);  //line 42
        }
        ........
        chain.doFilter(req, res);
    } 
```

当我正确设置了 startTime 和 endTime 时，来自 BlablaResourceImpl 的响应状态将正确返回响应代码 200、400、201。

当我在没有 startTime 和 endTime 的情况下发出请求时，我希望看到 400（Response.Status.BAD_REQUEST）。但相反，我收到 500 服务器错误和以下异常：

```
WARN  [2013-03-05 13:13:19,490] org.eclipse.jetty.servlet.ServletHandler: /blablabla
! javax.ws.rs.WebApplicationException: null
! at com.*******.filters.TimeValidationFilter.doFilter(TimeValidationFilter.java:42)
! at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
! at com.yammer.dropwizard.servlets.ThreadNameFilter.doFilter(ThreadNameFilter.java:29)
! at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1307)
! at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:453)
! at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1065)
! at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:382)
! at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:999)
! at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
! at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)
! at com.yammer.metrics.jetty.InstrumentedHandler.handle(InstrumentedHandler.java:200)
! at org.eclipse.jetty.server.handler.GzipHandler.handle(GzipHandler.java:230)
! at com.yammer.dropwizard.jetty.BiDiGzipHandler.handle(BiDiGzipHandler.java:123)
! at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:149)
! at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)
! at org.eclipse.jetty.server.Server.handle(Server.java:347)
! at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:454)
! at org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:47)
! at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:890)
! at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:944)
! at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:634)
! at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:230)
! at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:66)
! at org.eclipse.jetty.server.nio.BlockingChannelConnector$BlockingChannelEndPoint.run(BlockingChannelConnector.java:293)
! at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:599)
! at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:534)
! at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T14:18:49.097

而不是抛出一个`WebApplicationException`，你想在上设置一个错误响应代码`ServletResponse`：

```
HttpServletResponse httpResponse = (HttpServletResponse) res;
if (startTimeStr == null || endTimeStr == null) {
    httpResponse.sendError(400);
    return;
} 
```

# php - 检查标签之间的变量中是否存在文本

> ID：15225437
> 
> 赞同：0
> 
> 时间：2013-03-05T13:49:01.980
> 
> 标签：php

搜索 $data 之间和内部是否存在文本

所有 XML 数据都在 $data 中

我想搜索 7431 是否存在

XML 数据如下所示：

```
<status>
<connection_status>successful</connection_status>
<operation_status>successful</operation_status>
<Options>
<data_2>
<data_7422731>
<id>7431</id>
<assetId>2</assetId>
<startDate>2013-03-05 11:00:00</startDate>
<endDate>2013-03-05 12:00:00</endDate>
</data_7422731>
</data_2>
</Options>
</status> 
```

... 结果：

echo '是的，找到了'; // 或不

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:57:24.997

试试这个：

```
$string = <<<XML
<?xml version='1.0'?> 
<status>
<connection_status>successful</connection_status>
<operation_status>successful</operation_status>
<Options>
<data_2>
<data_7422731>
<id>7431</id>
<assetId>2</assetId>
<startDate>2013-03-05 11:00:00</startDate>
<endDate>2013-03-05 12:00:00</endDate>
</data_7422731>
</data_2>
</Options>
</status>
XML;

$xml = simplexml_load_string($string);

print_r($xml); 
```

它将返回一个对象。那么您必须使用此函数将此对象转换为数组

```
function object2array($object) {
    $return = NULL;
    if(is_array($object)) {
        foreach($object as $key => $value)
        $return[$key] = $this->object2array($value);
    } else {
        $var = @get_object_vars($object);
        if($var) {
            foreach($var as $key => $value)
            $return[$key] = $this->object2array($value);
        } else
        return $object;
    }
    return $return;
} 
```

它将返回一个数组，然后您可以使用在数组中找到您的字符串

in_array() 函数。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:55:15.373

```
 if(strpos($data, '>7431<') === true) 
        {
        //code if 7431 is found...
        }
    else
        {
        //if not found....
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:55:22.680

```
if (strpos($data, '<id>7431</id>')) echo 'Yes it was found';
else echo 'No it was not found'; 
```

如果您只想知道字符串 $data 是否包含所需的文本，这将起作用，但是如果您需要解析 XML，请查看 simpleXML API

编辑：更改为 strpos() 以解决性能问题，并搜索标签，`"<id>7431</id>"`（您也可以执行 a `">7431</"`）以避免匹配任何包含 7431 即 77431 的字符串

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-05T13:54:38.963

您需要在字符串之前添加 char`'>'`并在 char 之后添加`'<'` 并使用`strpos ()`

```
int strpos ( string $haystack , mixed $needle [, int $offset = 0 ] ) 
```

> 在 haystack 字符串中查找第一次出现 needle 的数字位置。

**haystack** - 要搜索的字符串。

**needle** - 如果 needle 不是字符串，则将其转换为整数并用作字符的序数值。

**offset** - 如果指定，搜索将从字符串开头开始计数的字符数开始。与 strrpos() 和 strripos() 不同，偏移量不能为负数。

> 返回针相对于 haystack 字符串开头的位置（与偏移量无关）。另请注意，字符串位置从 0 开始，而不是 1。
> 
> 如果未找到针头，则返回 FALSE。

**试试这个：**

```
 <?php
    $data;//= to you xml data
    $findme   = '7431';
    $pos = strpos($data,'>'.$findme.'<');

    if ($pos === false) 
    {
        echo "NO it wasn't found'; // or not";
    } 
    else 
    {
        echo "Yes it was found";   
    }
    ?> 
```

# windows-8 - localStorage 和 updateView + windows 8

> ID：15225438
> 
> 赞同：0
> 
> 时间：2013-03-05T13:49:04.650
> 
> 标签：windows-8, local-storage, windows-store-apps, winjs

我有一些项目，我通过按一个按钮将它们标记为收藏，这里是代码：

```
function AddToFavorites() {
    //called when a shop is added as as a favorite one.
    //first we check if already is favorite
    var favoritesArray = getStoreArray();
    var alreadyExists = exists();
    if (!alreadyExists) {
        favoritesArray.push(itemHolder);
        var storage = window.localStorage;
        storage.shopsFavorites = JSON.stringify(favoritesArray);
    }   
}

function exists() {
    var alreadyExists = false;
    var favoritesArray = getStoreArray();
    for (var key in favoritesArray) {
        if (favoritesArray[key].title == itemHolder.title) {
            //already exists
            alreadyExists = true;
        }
    }
    return alreadyExists;
}

function getStoreArray() {
    //restores our favorites array if any or creates one
    var storage = window.localStorage;
    var favoritesArray = storage.shopsFavorites;
    if (favoritesArray == null || favoritesArray == "") {
        //if first time
        favoritesArray = new Array();
    } else {
        //if there are already favorites
        favoritesArray = JSON.parse(favoritesArray);
    }
    return favoritesArray;
} 
```

我有一个 favorites.html 来将它们呈现为一个列表。我遇到的问题是每次添加或删除项目时列表都不会自动更新。

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Αγαπημένα</title>

    <!-- WinJS references -->
    <link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.1.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.1.0/js/ui.js"></script>

    <link href="favoritesDetails.css" rel="stylesheet" />
    <script src="favoritesDetails.js"></script>
</head>
<body>
    <div class="favoritesDetails fragment">
        <header aria-label="Header content" role="banner">
            <button class="win-backbutton" aria-label="Back" disabled type="button"></button>
            <h1 class="titlearea win-type-ellipsis">
                <span class="pagetitle">Αγαπημένα</span>
            </h1>
        </header>
        <section aria-label="Main content" role="main">
                <div id="mediumListIconTextTemplate" data-win-control="WinJS.Binding.Template" style="display: none">
        <div class="mediumListIconTextItem">
            <img src="#" class="mediumListIconTextItem-Image" data-win-bind="src: picture" />
            <div class="mediumListIconTextItem-Detail">
                <h4 data-win-bind="innerText: title"></h4>
                <h6 data-win-bind="innerText: text"></h6>
            </div>
        </div>
    </div>

    <div id="basicListView" data-win-control="WinJS.UI.ListView" 
        data-win-options="{itemDataSource : DataExample.itemList.dataSource, 
            itemTemplate: select('#mediumListIconTextTemplate')}">
    </div>
        </section>
    </div>
</body>
</html> 
```

这里是 JavaScript 代码：

```
// For an introduction to the Page Control template, see the following documentation:
// http://go.microsoft.com/fwlink/?LinkId=232511
var dataArray = [], shopsArray = [];

(function () {
    "use strict";

    var app = WinJS.Application;
    var activation = Windows.ApplicationModel.Activation;
    var nav = WinJS.Navigation;
    var ui = WinJS.UI;

    shopsArray = getStoreArray();
    if (shopsArray) {
        for (var key in shopsArray) {
            var group = { title: shopsArray[key].title, text: shopsArray[key].subtitle, picture: shopsArray[key].backgroundImage, description: shopsArray[key].description, phoneNumbers: shopsArray[key].content };
            dataArray.push(group);
        }
        var dataList = new WinJS.Binding.List(dataArray);

        // Create a namespace to make the data publicly
        // accessible. 
        var publicMembers =
            {
                itemList: dataList
            };
        WinJS.Namespace.define("DataExample", publicMembers);
    }

    WinJS.UI.Pages.define("/pages/favoritesDetails/favoritesDetails.html", {
        // This function is called whenever a user navigates to this page. It
        // populates the page elements with the app's data.

        ready: function (element, options) {
        },

        unload: function () {
        },

        updateLayout: function (element, viewState, lastViewState) {
        }    
    });
})();

function getStoreArray() {
    //restores our favorites array if any or creates one
    var storage = window.localStorage;
    var favoritesArray = storage.shopsFavorites;
    if (favoritesArray == null || favoritesArray == "") {
        //if first time
        favoritesArray = new Array();
    } else {
        //if there are already favorites
        favoritesArray = JSON.parse(favoritesArray);
    }
    return favoritesArray;
} 
```

那么，当新的收藏夹在 localDB 中存储/删除时，如何更新收藏夹 HTML 页面？我可以在那里添加事件监听器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:46:59.810

存储收藏夹的代码是同一个应用程序的一部分吗？

如果是这样，我会考虑将收藏夹添加到您用于绑定到 ListView 的底层 WinJS.Binding.list 中，然后将更新的列表信息存储在数据库中，而不是尝试对数据库中的更改做出反应列表视图。

查看以下示例，它显示了如何动态更新 ListView：

[http://code.msdn.microsoft.com/windowsapps/ListView-custom-data-4dcfb128/sourcecode?fileId=50893&pathId=1976562066](http://code.msdn.microsoft.com/windowsapps/ListView-custom-data-4dcfb128/sourcecode?fileId=50893&pathId=1976562066)

希望有帮助！

# vb.net - ms access visual basic 2010 报告未按顺序排列

> ID：15225441
> 
> 赞同：1
> 
> 时间：2013-03-05T13:49:18.927
> 
> 标签：vb.net, ms-access

这是visual basic报告上的截图。如您所见，它从八月开始，然后是十二月，然后是二月，但是我已经在访问权限上按它分组了。 ![在此处输入图像描述](../Images/611ba11cf48c4193eb04f3282400aab0.png)

这是访问中的一个查询，我不确定我是否做对了，但我已经被最早订购了。

![在此处输入图像描述](../Images/138552b3db41d5c7b6a537e52237a9f2.png)

这是来自 ms 访问的 sql 代码

```
SELECT MonthName(Month([Date_sold])) & ' ' & Year([Date_sold]) AS Month_Sold, Sum(tblSell.Total_Price) AS Total_Earnings, Sum(tblSell.Quantity_Bought) AS Total_Medicine_Sold, tblSell.Generic_name, tblSell.Brand_Name
FROM tblSell
GROUP BY MonthName(Month([Date_sold])) & ' ' & Year([Date_sold]), tblSell.Generic_name, tblSell.Brand_Name, Year([Date_sold]), Month([Date_sold])
ORDER BY Year([Date_sold]), Month([Date_sold]); 
```

简而言之，它不是在我关于 Visual Basic 的报告中排序的，它应该首先显示 2 月，就像 ms 访问中的那样，但它显示的是 8 月，这是不同的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T14:03:32.883

我相信，Order by 会被属性表上 Data 选项卡中的报告 Order By 属性覆盖。要么把它放在那里，要么确保它是空的。然后像这样设置报告属性：

```
Me.OrderBy = "[SomeField], [AnotherField]"
Me.OrderByOn = True 
```

编辑：所有 Microsoft 产品都允许开发人员使用称为 VBA（Visual Basic for Applications）的语言访问开发环境。您可以使用这种语言编写程序和宏来增强产品。看看这里，虽然它有点旧，但它可能仍然相关：http: [//visualbasic.about.com/od/learnvba/l/aa030803b.htm](http://visualbasic.about.com/od/learnvba/l/aa030803b.htm)

对于您，您需要将我建议的代码添加到报告的 OnLoad 事件中。去做这个：

1.  开放**存取**。
2.  **在设计视图**中打开您的报表。
3.  在左侧，您应该会看到一个名为“**属性表”的****选项卡**
***   选择**事件选项卡***   在**OnLoad**事件中，单击“ **...** ”（省略号）按钮*   这将调出**VBA 代码**。*   添加这个：**

 **```
Private Sub Report_Load()
    Me.OrderBy = "[SomeField], [AnotherField]"
    Me.OrderByOn = True
End Sub 
```

试试看它是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T18:15:08.310

它没有排序的原因（我在做一些装运订单报告时遇到同样的问题）是因为代码没有读取日期。它将按字母顺序列出它们，因为它是一个文本字段而不是一个短日期。我只是去了参数，并能够在那里修复它。**

# java - java端的IE10文档模式

> ID：15225442
> 
> 赞同：0
> 
> 时间：2013-03-05T13:49:24.470
> 
> 标签：java, internet-explorer, internet-explorer-10

有什么方法可以了解 java servlet 上的 IE 文档模式。显然，我尝试使用“User-Agent”字符串获取浏览器信息，但我无法从中获取文档模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T10:56:18.763

要获取 IE 的文档模式，请使用下面的 Servlet 类。

代码：

公共类 DocumentModeOfIE 扩展 HttpServlet {

```
private String documentMode;

 public void init(ServletConfig config) throws ServletException {

}

public void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

        PrintWriter out = resp.getWriter();
        resp.setContentType("text/html");
        documentMode = req.getHeader("X-UA-Compatible");

       out.println(documentMode);
}

public void destroy() {
} 
```

}

==============将IE文档模式设置为特定标准模式（即IE 7 0r IE8）==============

代码 ：

使用过滤器......

过滤器类别：

公共类 UserAgentCompatibleFilter 实现 javax.servlet.Filter {

```
private Logger log = Logger.getLogger("UserAgentCompatibleFilter");
private String compatibilityMode;

public void destroy() {
}

public void doFilter(ServletRequest req, ServletResponse resp, FilterChain chain) throws ServletException, IOException {
    if (compatibilityMode != null) {
        HttpServletResponse res = (HttpServletResponse) resp;
        res.addHeader("X-UA-Compatible", compatibilityMode);
    }
    chain.doFilter(req, resp);
}

public void init(FilterConfig config) throws ServletException {
    compatibilityMode = config.getInitParameter("compatibilityMode");
    if (compatibilityMode == null) {
        log.warn("No CompatibilityMode set for UserAgentCompatibleFilter, thus disabling it");
    }
} 
```

}

网页.xml：

http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">

```
<!-- filter component start -->

<filter>
    <filter-name>UserAgentCompatibleFilter</filter-name>
    <filter-class>com.standardandpoors.ata.web.UserAgentCompatibleFilter</filter-class>
    <init-param>
        <param-name>compatibilityMode</param-name>
        <param-value>IE=8</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>UserAgentCompatibleFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<!-- filter component end --> 
```

我希望这对你有最大的帮助......

# html - 引导和响应问题

> ID：15225443
> 
> 赞同：1
> 
> 时间：2013-03-05T13:49:24.853
> 
> 标签：html, css, twitter-bootstrap

我对引导程序的响应有一些问题。

桌面视图很完美，这是我想要的样子

![在此处输入图像描述](../Images/70c615c887f897410641c2c474d4e437.png)

但我越是减少窗口，越是打破风格

![在此处输入图像描述](../Images/41bb2272ad6438f88aeb4d08ad49bc3e.png)

在智能手机视图的最后，它是完美的。我真的不知道该怎么办：/

![在此处输入图像描述](../Images/6346aa6d95a6e8d46352e5b183f4724b.png)

这里的代码：http: [//jsbin.com/egudor/6/edit](http://jsbin.com/egudor/6/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T18:06:37.300

您需要删除`float: left`您放置的属性`.thumbnail h3`（edit.css 的第 33 行）`margin-top: 40px`和`.thumbnail p`

为我工作：http: [//jsbin.com/egudor/11/edit](http://jsbin.com/egudor/11/edit)

# sql - 如何在 IN 条件下使用超过 1000 个值？

> ID：15225452
> 
> 赞同：0
> 
> 时间：2013-03-05T13:49:48.463
> 
> 标签：sql, oracle, in-clause

我正在使用java。我在对象级别有 2000 个键值，并且必须从数据库中获取该值的相应记录。[我在这里](https://stackoverflow.com/questions/400255/how-to-put-more-than-1000-values-into-an-oracle-in-clause)找到了临时表建议 ，但它不会影响性能吗？如何一次性插入这些值，以便减少数据库调用的数量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T13:52:10.793

您可以使用

```
col1 in (1,2...)  or col1 in (1001, 1002...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:53:25.310

我会说临时表是要走的路。会影响性能吗？是的，它可能比硬编码所有值要慢一些。但是你不能拥有一切——如果你不想硬编码所有的值，你将不得不接受性能的小幅下降。我认为权衡是令人满意的，特别是因为影响可能很小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T13:53:33.873

对于单个 in 子句 - 你不能。[请参阅此处](https://forums.oracle.com/forums/thread.jspa?threadID=428758)的讨论。

# c# - 插入数据库时 自动小数舍入

> ID：15225453
> 
> 赞同：0
> 
> 时间：2013-03-05T13:49:48.863
> 
> 标签：c#, sql-server-2008, decimal, entity-framework-5

我有一个带有属性十进制值的实体 E

当我将此实体插入数据库时​​，值会自动四舍五入为 2 之后的数字（仅在数据库内部，我的实体保留完整的精度值，但在数据库内部，无论它声明为十进制（18 8）它四舍五入为 2之后 ，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:01:14.567

查看文档`DbModelBuilder`，您可以使用`HasPrecision`. （[http://msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.configuration.decimalpropertyconfiguration.hasprecision(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.configuration.decimalpropertyconfiguration.hasprecision(v=vs.103).aspx)）

# css - 不能再向左移动 div 元素

> ID：15225459
> 
> 赞同：0
> 
> 时间：2013-03-05T13:50:01.347
> 
> 标签：css

请看这个 div 结构：

```
<div class="columnbox" style="margin-top:10px;">
    <div class="paging">
        <asp:Literal ID="ltPagingBottom" runat="server" />
    </div>
</div> 
```

这些课程：

```
.paging{width:650px;border:#000000 0px solid;height:20px;}

.columnbox{ background-color:#f6f6f6;border:1px solid #CCCCCC;width:96%;padding:10px;margin:0 10px 10px 0;line-height:17px;} 
```

由于某种原因，分页按钮位于列框框之外，我似乎无法纠正它。

我尝试将属性添加到 .paging 类：

```
margin-left:-100px; padding:0px; 
```

我还尝试使用更改 columnbox 类

```
padding:0px; 
```

但这也无济于事。我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:59:54.637

简单 - 添加到`.columnbox {display: inline-block; }`

事实上，包含元素的总宽度有点偏离，但这是一个很容易解决的问题。您可以减少一些下一个/上一个按钮的宽度，或将列框的宽度从 96% 增加到 98% 以匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:07:11.347

添加`float:left`到`.columnbox {}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:58:36.360

尝试添加`.paging{ position: absolute }`到 css，这样元素将相对于它的第一个定位（非静态）祖先元素（.columnbox）定位自己。之后稍微调整一下 columnbox 的高度。这对我有用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T14:05:02.530

这样做：

添加属性`float:left`和`width:100%`你的`.columnbox`类

并将属性添加`float:left`到`.paging`类

# c# - 使用计时器创建 SplashScreen/LoadingScreen

> ID：15225467
> 
> 赞同：0
> 
> 时间：2013-03-05T13:50:26.443
> 
> 标签：c#, forms, timer, splash-screen

我创建了一个工作`SplashScreen/LoadingScreen`.

我使用以下代码来显示和关闭 LoadinScreen：

```
 LoadingScreen LS = new LoadingScreen();
   LS.Show();

   databaseThread = new Thread(CheckDataBase);
   databaseThread.Start();
   databaseThread.Join();

   LS.Close(); 
```

这段代码对我来说做得很好，显示和关闭`LoadingScreen`.

问题是：我在 上得到了一些文字`LoadingScreen`，上面写着：`Loading Application...`

我想创建一个计时器，让文本（标签）末尾的点执行以下操作：

```
Loading Application. 
```

1 秒后：

```
Loading Application.. 
```

1 秒后：

```
Loading Application... 
```

我想我`timer`需要`Load_event`在`LoadingScreen form`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:00:18.317

它应该很简单：

```
Timer timer = new Timer();
timer.Interval = 300;
timer.Tick += new EventHandler(methodToUpdateText);
timer.Start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:03:56.563

也许是这样的？

```
class LoadingScreen
{
    Timer timer0;
    TextBox mytextbox = new TextBox();
    public LoadingScreen()
    {
        timer0 = new System.Timers.Timer(1000);
        timer0.Enabled = true;
        timer0.Elapsed += new Action<object, System.Timers.ElapsedEventArgs>((object sender, System.Timers.ElapsedEventArgs e) =>
        {
            switch (mytextbox.Text) 
            {
                case "Loading":
                    mytextbox.Text = "Loading.";
                    break;
                case "Loading.":
                    mytextbox.Text = "Loading..";
                    break;
                case "Loading..":
                    mytextbox.Text = "Loading...";
                    break;
                case "Loading...":
                    mytextbox.Text = "Loading";
                    break;
            }
        });
    }
} 
```

**编辑：** 防止 UI 线程阻塞等待数据库操作的一个好方法是将数据库操作移动到 BackgroundWorker 例如：

```
public partial class App : Application
{
    LoadingScreen LS;   
    public void Main()
    {
        System.ComponentModel.BackgroundWorker BW;
        BW.DoWork += BW_DoWork;
        BW.RunWorkerCompleted += BW_RunWorkerCompleted;
        LS = new LoadingScreen();
        LS.Show();
    }

    private void BW_DoWork(System.Object sender, System.ComponentModel.DoWorkEventArgs e)
    {
        //Do here anything you have to do with the database
    }

    void BW_RunWorkerCompleted(object sender, System.ComponentModel.RunWorkerCompletedEventArgs e)
    {
        LS.Close();
    }
} 
```

# compiler-construction - ARM NEON 矢量化失败

> ID：15225470
> 
> 赞同：5
> 
> 时间：2013-03-05T13:50:30.723
> 
> 标签：compiler-construction, arm, vectorization, neon

我想在我的 ARM cortex-a9 上启用 NEON 矢量化，但我在编译时得到了这个输出：

**“未矢量化：不支持相关 stmt：D.14140_82 = D.14143_77 * D.14141_81”**

这是我的循环：

```
void my_mul(float32_t * __restrict data1, float32_t * __restrict data2, float32_t * __restrict out){    
    for(int i=0; i<SIZE*4; i+=1){
        out[i] = data1[i]*data2[i];
    }
} 
```

以及编译时使用的选项：

```
-march=armv7-a -mcpu=cortex-a9 -mfpu=neon -mfloat-abi=softfp -ftree-vectorize -mvectorize-with-neon-quad -ftree-vectorizer-verbose=2 
```

我正在使用**arm-linux-gnueabi (v4.6) 编译器**。

请务必注意，该问题仅出现在**float32**向量中。如果我切换**int32**，那么**矢量化就完成了**。也许 float32 的矢量化还不可用……</p>

有人有想法吗？我是否忘记了 cmd 行或实现中的某些内容？

在此先感谢您的帮助。

吉克斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T14:20:05.033

来自[GCC 的 ARM 选项页面](http://gcc.gnu.org/onlinedocs/gcc/ARM-Options.html)

> > -mfpu=名称
> > 
> > ...
> > 
> > 如果选定的浮点硬件包含 NEON 扩展（例如 -mfpu=`neon'），请注意**浮点运算不会由 GCC 的自动矢量化过程生成，除非还指定了 -funsafe-math-optimizations。这是因为 NEON 硬件没有完全实现浮点运算的 IEEE 754 标准**（特别是非正规值被视为零），因此使用 NEON 指令可能会导致精度损失。

如果您指定`-funsafe-math-optimizations`它应该可以工作，但如果您要以高精度使用它，请重新阅读上面的注释。

# openerp - 订单项属性上的 openerp 域过滤器

> ID：15225478
> 
> 赞同：1
> 
> 时间：2013-03-05T13:50:46.367
> 
> 标签：openerp

我正在尝试根据其订单项的属性过滤采购订单。因此，例如，我想查看所有具有 product_type = 'X' 的订单项的采购订单。

```
<record id="po_x" model="ir.actions.act_window">
        <field name="name">X Purchase Orders</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">purchase.order</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form,calendar,graph,gantt</field>
        <field name="domain">[('has_x_line','=',True)]</field>
        <field name="context">{}</field>
    </record> 
```

product_type 是我添加到订单行的继承版本的自定义字段。

```
class purchase_order_custom(osv.osv):
    _name = 'purchase.order'
    _inherit = 'purchase.order'

    def linehasproducttype(self, cr, uid, ids, name, arg, context=None):
        cur_obj={}
        cur_obj=self.browse(cr, uid, ids, context=context)
        for line in cur_obj.order_line:
            if line.product_type == 'X':
                return True
        return False

    _columns={
          'has_x_line': fields.function(linehasproducttype, string="Has X Line", type='boolean', context={'pt':'X'})
              }
purchase_order_custom() 
```

2个问题：

Q1。上面的代码不起作用。也就是说，它并没有真正按照需要进行过滤。有什么问题？

Q2。我有很多产品类型，我不倾向于为每种类型制作一个功能。我可以以某种方式传递参数或使用上下文来达到这个目的吗？如果是这样，我如何在代码中使用它？

谢谢

**编辑**：我也尝试过以下代码，但没有成功：

```
def linehasproducttype(self, cr, uid, ids, name, arg, context=None):
    res = dict.fromkeys(ids, False)
    for cur_obj in self.browse(cr, uid, ids, context=context):
        res[cur_obj.id] = False
        for line in cur_obj.order_line:
            if line.product_type == 'X':
                res[cur_obj.id] = True
    return res 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:30:57.957

您的代码中可能有两个问题：

如果此代码打算在 OpenERP 6.1 或更早版本上运行，您需要在字段定义中提供参数“method”并将其设置为 true，否则将找不到您的方法。

您的功能不是通用的。它需要返回一个字典，并在“ids”参数中为您的函数提供 id 作为键。您必须记住，您传递给 OpenERP 核心的几乎每个函数都需要处理一组记录，而不是单个记录。查看示例的核心代码。

关于您的第二个问题，您始终可以在视图 XML[中将数据添加到上下文](http://tjhia.wordpress.com/2012/05/18/openerp-5-domain-context/)中，然后在处理这些视图的代码中应该可以使用这些数据。仅当您对每种产品类型都有不同的视图时，这才有效。

另一种可能性是为所有产品定义一个通用树视图并定义一个过滤器，该过滤器将仅显示所需的产品。[开发人员手册描述](http://doc.openerp.com/v6.1/developer/03_modules_3.html#filter-tag)了如何做到这一点。

**编辑**：您应该能够在您的操作或过滤器中使用如下的域表达式：

```
<field name="domain">[('order_line.product_type','=','X')]</field> 
```

# spring-mvc - 获取经过身份验证的用户实体 Spring MVC

> ID：15225484
> 
> 赞同：1
> 
> 时间：2013-03-05T13:51:00.717
> 
> 标签：spring-mvc, spring-security

我在我的项目中使用 Spring MVC + Spring Security。而且我需要在用户进行身份验证后并在他的会话中获取用户实体。例如，为了在我的**欢迎页面**上打印他的名字，例如：`Welcome, ${user.firstName}!`或在**另一个页面**上获取他的公司列表：

```
<c:forEach items="${user.userCompanies}" var="company">
    ${company.name}
</c:forEach> 
```

等你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:57:01.377

检查Spring Security 提供的[taglib 。](http://static.springsource.org/spring-security/site/docs/current/reference/taglibs.html)
要获取用户名，请使用：

```
<sec:authentication property="principal.username" /> 
```

# c# - 如何在 Windows Store Apps 中登录 PC 用户名？

> ID：15225486
> 
> 赞同：1
> 
> 时间：2013-03-05T13:51:05.790
> 
> 标签：c#, windows-store-apps

就像在这个线程中一样，[如何使用 C# 在 .NET 中获取当前用户名？](https://stackoverflow.com/questions/1240373/how-do-i-get-the-current-username-in-net-using-c)

但是代码

```
string userName = System.Security.Principal.WindowsIdentity.GetCurrent().Name; 
```

似乎不适用于 Windows 8 应用程序。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T14:29:49.533

步骤1：

> 使用 C# 和 XAML 语言创建空白 Windows 应用商店应用程序。

第2步：

```
 x:Class="SetAccountPicture.UserProfileInformation"

    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"

    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

    xmlns:local="using:SetAccountPicture"

    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"

    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"

    mc:Ignorable="d">

    <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">

        <Grid Height="500" Width="1000">

            <Grid.RowDefinitions>

                <RowDefinition></RowDefinition>

                <RowDefinition></RowDefinition>

                <RowDefinition></RowDefinition>

                <RowDefinition></RowDefinition>

                <RowDefinition Height="auto"></RowDefinition>

            </Grid.RowDefinitions>

            <Grid.ColumnDefinitions>

                <ColumnDefinition></ColumnDefinition>

                <ColumnDefinition></ColumnDefinition>

            </Grid.ColumnDefinitions>

            <Button x:Name="Get_UserInformation" Click="Get_UserInformation_Click_1" Grid.Row="0" Grid.ColumnSpan="2" HorizontalAlignment="Center" Height="60" Width="250" Content="Get User Information" FontSize="20"></Button>

            <TextBlock Text="User's Display Name is: " Grid.Row="1" Grid.Column="0" FontSize="25" VerticalAlignment="Center" HorizontalAlignment="Center"></TextBlock>

            <TextBlock Text="User First Name is: " Grid.Row="2" Grid.Column="0" FontSize="25" VerticalAlignment="Center" HorizontalAlignment="Center"></TextBlock>

            <TextBlock Text="User Last Name is: " Grid.Row="3" Grid.Column="0" FontSize="25" VerticalAlignment="Center" HorizontalAlignment="Center"></TextBlock>

            <TextBlock Text="Account Picture is: " Grid.Row="4" Grid.Column="0" FontSize="25" VerticalAlignment="Center" HorizontalAlignment="Center"></TextBlock>

            <TextBlock x:Name="UserName" Text="User Name is: " Grid.Row="1" Grid.Column="1" FontSize="25" VerticalAlignment="Center" HorizontalAlignment="Center"></TextBlock>

            <TextBlock x:Name="FistName" Text="First Name is: " Grid.Row="2" Grid.Column="1" FontSize="25" VerticalAlignment="Center" HorizontalAlignment="Center"></TextBlock>

            <TextBlock x:Name="LastName" Text="Last Name is: " Grid.Row="3" Grid.Column="1" FontSize="25" VerticalAlignment="Center" HorizontalAlignment="Center"></TextBlock>

            <Image  x:Name="AccountPicture" Height="150" Width="200" Grid.Row="4" Grid.Column="2" Stretch="Fill"></Image>

        </Grid>

    </Grid>

</Page> 
```

第 3 步：

```
using Windows.Storage;

using Windows.Storage.Pickers;

using Windows.Storage.Streams;

using Windows.System.UserProfile;

using Windows.UI.Core;

using Windows.UI.Xaml.Media.Imaging; 
```

第4步：

```
string displayName = await UserInformation.GetDisplayNameAsync();

if (string.IsNullOrEmpty(displayName))

{

     rootPage.NotifyUser("No Display Name was returned", NotifyType.StatusMessage);

}
else

{

    UserName.Text = displayName;

} 
```

获取当前用户的名字。

注意：这仅适用于 Microsoft 帐户。

```
string firstName = await UserInformation.GetFirstNameAsync();

if (string.IsNullOrEmpty(firstName))
{

     rootPage.NotifyUser("No Display Name was returned", NotifyType.StatusMessage);

}

else

{

   FistName.Text = firstName;

} 
```

获取当前用户的姓氏；看：

```
string lastName = await UserInformation.GetLastNameAsync();

if (string.IsNullOrEmpty(lastName))

{

    rootPage.NotifyUser("No Display Name was returned", NotifyType.StatusMessage);

}

else

{

    LastName.Text = lastName;

} 
```

获取当前用户的帐户图片。

注意：您可以请求三种类型的图像。例如：小、大和视频（动态图像）。如果可用，它会返回。

```
StorageFile image = UserInformation.GetAccountPicture(AccountPictureKind.SmallImage) as StorageFile;

if (image != null)

{

       rootPage.NotifyUser("SmallImage path = " + image.Path, NotifyType.StatusMessage);

     try

    {

         IRandomAccessStream imageStream = await image.OpenReadAsync();

         BitmapImage bitmapImage = new BitmapImage();

         bitmapImage.SetSource(imageStream);

         AccountPicture.Source = bitmapImage;                 

    }

    catch (Exception ex)

    {

         rootPage.NotifyUser("Error opening stream: " + ex.ToString(), NotifyType.ErrorMessage);

    }

 }
else

{

      rootPage.NotifyUser("Small Account Picture is not available", NotifyType.StatusMessage);              

} 
```

![http://www.c-sharpcorner.com/UploadFile/99bb20/retrieve-user-information-in-windows-store-apps-using-C-Sharp/](../Images/40f3cea60f7d7442c86b8064dc481382.png)

[图片及源代码：](http://www.c-sharpcorner.com/UploadFile/99bb20/retrieve-user-information-in-windows-store-apps-using-C-Sharp/)

# c# - 使用 iTextSharp 更改 PDF 的字体

> ID：15225488
> 
> 赞同：3
> 
> 时间：2013-03-05T13:51:08.133
> 
> 标签：c#, pdf, itextsharp

如何在 C# 中使用 iTextSharp 更改现有 PDF 文件的字体？

我想将整个文档字体更改为一种，例如 Arial

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T07:42:36.407

最后我解决了这个问题。下面的代码将打开一个现有的 Pdf 文件，并按照我的预期将其所有字体更改为“盲文”。

```
 private static void ChangeFont()
        {

            string strFile = @"E:\\xyz.pdf";
            string OutputFile = @"E:\\xyz1.pdf";
            PdfReader pdfReader = new PdfReader(strFile);

            //Get first page,Generally we get font information on first page,however we can loop throw pages e.g for(int i=0;i<=pdfReader.NumberOfPages;i++)
                PdfDictionary cpage = pdfReader.GetPageN(1);
                if (cpage == null)
                    return;
                PdfDictionary dictFonts = cpage.GetAsDict(PdfName.RESOURCES).GetAsDict(PdfName.FONT);
                if (dictFonts != null)
                {
                    foreach (var font in dictFonts)
                    {
                        var dictFontInfo = dictFonts.GetAsDict(font.Key);

                        if (dictFontInfo != null)
                        {
                            foreach (var f in dictFontInfo)
                            {
                                //Get the font name-optional code
                                var baseFont = dictFontInfo.Get(PdfName.BASEFONT);
                                string strFontName = System.Text.Encoding.ASCII.GetString(baseFont.GetBytes(), 0,
                                                                                          baseFont.Length);
                                //

                                //Remove the current font
                                dictFontInfo.Remove(PdfName.BASEFONT);
                                //Set new font eg. Braille, Areal etc
                                dictFontInfo.Put(PdfName.BASEFONT, new PdfString("Braille"));
                                break;

                            }
                        }

                    }

            }

            //Now create a new document with updated font
            using (FileStream FS = new FileStream(OutputFile, FileMode.Create, FileAccess.Write, FileShare.None))
            {
                using (Document Doc = new Document())
                {
                    using (PdfCopy writer = new PdfCopy(Doc, FS))
                    {
                        Doc.Open();
                        for (int j = 1; j <= pdfReader.NumberOfPages; j++)
                        {
                            writer.AddPage(writer.GetImportedPage(pdfReader, j));
                        }
                        Doc.Close();
                    }
                }
            }
            pdfReader.Close();

        } 
```

# android - Android ListView，并非所有的触摸事件

> ID：15225491
> 
> 赞同：2
> 
> 时间：2013-03-05T13:51:16.243
> 
> 标签：android, listview, touch

我想使用`ListView`包含自定义视图的（并且之前已经成功完成此操作）。基本上这些自定义视图是垂直滑块，显然与`ListView`. 我用来自 的自定义视图填充它`Adapter`，它们会对项目上的触摸做出反应，但是一旦我的手指移动超过几个像素，它就会滚动，并且自定义视图将不再接收任何触摸事件。

`ListView`当我触摸自己的组件时，如何（很好地）防止滚动？

我可以以某种方式禁用`ListView`选择，并将触摸转发到项目，但仍使用滚动行为吗？

先感谢您。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T05:03:16.737

为了防止列表视图的滚动，您可以按如下方式在触摸侦听器上实现

```
listView.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if(event.getAction()==MotionEvent.ACTION_MOVE)
            {
                return true;
            }
            return false;
        }
    }); 
```

希望它会起作用，如果它对您有用，请投票

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:22:55.487

您可以截取`onInterceptTouchEvent()`在您的根布局中使用的所有触摸事件（包含`ListView`，如 a `FrameLayout`），如此[处](http://developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent%28android.view.MotionEvent%29)所示。

你在那里做的是捕获运动事件（当 a`MotionEvent.ACTION_DOWN`进来时返回 true），捕获下面的事件`onTouchEvent()`，决定运动是针对列表项还是列表本身，并相应地调度事件。

不要指望这很容易。了解运动事件的流程以及它们之间的交互`onInterceptTouchEvent()`是`onTouchEvent()`具有挑战性的，并且使其更加有效。但我相信这是解决您的问题的可行方法。

# javascript - Sencha Store 代理没有被调用

> ID：15225493
> 
> 赞同：0
> 
> 时间：2013-03-05T13:51:18.663
> 
> 标签：javascript, extjs, sencha-touch-2, jsonp

我想动态加载存储数据，不想为此使用模型。如果我提供数据列表被填充但如果我使用商店的代理它不会被调用并且 url 不会被命中。请帮忙。

```
Ext.define('TrainEnquiry.view.SearchTrainResults', {
 extend: 'Ext.List',
    xtype: 'searchedtrainresult',
    requires: 'Ext.data.proxy.JsonP',
    config: {
        itemId: 'searchedtrainresult',
            title: 'Train Result:',
            itemTpl: '<div class="myContent">'+ 
                    '<div><b>{number}</b> </div>' +
                    '</div>',
        store: {
                            fields: ['number'],
                            /*data: [
                                {number: 'Cowper'},
                                {number: 'Everett'},
                                {number: 'University'},
                                {number: 'Forest'}
                            ]*/
                            proxy: {
                                url: 'http://abc.amazonaws.com/search.json',
                                type:'jsonp',
                                extraParams : {
                                                'q' : '12313'
                                            },                             
                                reader: {
                                    type: 'json',
                                },
                                    success: function() {
                                        debugger;
                                             console.log('success');

                                       },
                                       failure: function() {
                                        debugger;
                                              console.log('failure');
                                        }
                        }
                    },

        onItemDisclosure: true

}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:41:25.127

您可以尝试从代理中删除 pageParam 和 startParam。像这样

```
Ext.create('Ext.data.Store', {
storeId:'UserStore',

autoLoad: true,

model: 'UserModel',

proxy: {
    type: 'jsonp', // Because it's a cross-domain

    url : 'https://api.twitter.com/1/lists/members.json?owner_screen_name=Sencha&slug=sencha-team&skip_status=true',

    reader: {
        type: 'json',
        root: 'users' // The returned JSON will have array 
                      // of users under a "users" property
    },

    // Removing pageParam and startParam
    pageParam: undefined,
    startParam: undefined
}
}); 
```

这是一个示例[http://jsfiddle.net/alexrom7/YNTuN/](http://jsfiddle.net/alexrom7/YNTuN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T17:18:02.857

我认为您的“字段”配置选项需要是一个适当的[`Ext.data.Field`对象](http://docs.sencha.com/touch/2-1/#!/api/Ext.data.Field)，所以也许这会起作用：

```
Ext.define('TrainEnquiry.view.SearchTrainResults', {
  ...
  config: {
    ...
    store: {
      fields: [ { name: 'number', type: 'string'} ],
      proxy: {
        ...
      }
    },
    ...
  }
}); 
```

（来自[Sencha 论坛](http://www.sencha.com/forum/showthread.php?136111-Store-without-having-a-name-for-a-model)的参考）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T14:14:23.333

尝试将代理存储的类型更改为 Ajax（类型：'ajax'）。像这样

```
Ext.create('Ext.data.Store', {
model: 'User',
proxy: {
    type: 'ajax',
    url: '/test.json',
    reader: {
        type: 'json',
    }
},
autoLoad: true
}); 
```

# android - xml中定义的Android drawable

> ID：15225502
> 
> 赞同：-1
> 
> 时间：2013-03-05T13:51:39.257
> 
> 标签：android, android-drawable

是否可以像这样定义一个类似的矩形：

```
 <item android:id="@android:id/background">
        <shape>
                  <gradient
                    android:angle="270"
                    android:endColor="#444444"
                    android:startColor="#666666" />

            <corners android:radius="10dip" />
        </shape>
    </item>

</layer-list> 
```

但只有上角有半径，其他没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:55:52.270

看看这个问题：

[圆角仅在顶部](https://stackoverflow.com/questions/8930555/android-drawable-with-rounded-corners-at-the-top-only)

这是答案：

```
<corners android:radius="1dp" android:topLeftRadius="6dp" android:topRightRadius="6dp" android:bottomLeftRadius="0dp" android:bottomRightRadius="0dp"/> 
```

请注意，Eclipse 对此感到窒息，但不会在视图编辑器中正确显示，

# java - 制作这段代码，以便读取给定文件的前 8 个字节

> ID：15225504
> 
> 赞同：0
> 
> 时间：2013-03-05T13:51:41.527
> 
> 标签：java, io

我需要这段代码来输出给定文件的前 8 个字节，我相信它只是一行，任何帮助将不胜感激。

```
import java.io.*;

public class FileInHexadecimal {
        public static void main(String[] args) throws Exception {
                FileInputStream fis = new FileInputStream("c:\\open.gif");
                for(int i=0; i<=8; i++)
                {
                        fis.read();
                        if (i != -1) {
                                System.out.println(i); 
                        }
                }
                fis.close();
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:53:23.290

您需要对从`fis.read()`. 这是您应该打印出来的值，而不是循环计数器`i`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T13:57:45.093

```
import java.io.*;

public class FileInHexadecimal {
        public static void main(String[] args) throws Exception {
                FileInputStream fis = new FileInputStream("c:\\open.gif");
                for(int i=0; i < 8; i++)
                {
                        System.out.println(fis.read()); 
                }
                fis.close();
        }
} 
```

应该管用。打印您阅读的内容，而不是柜台。您不需要检查它，因为它总是从 0 到 7（8 个字节）计数。如果您愿意，您可以添加检查您实际阅读的内容...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T13:58:00.363

你至少需要 3 行

```
 byte[] a = new byte[8];
    fis.read(a);
    System.out.println(Arrays.toString(a)); 
```

# objective-c - 在所有屏幕上显示窗口

> ID：15225508
> 
> 赞同：2
> 
> 时间：2013-03-05T13:52:05.983
> 
> 标签：objective-c, xcode, cocoa, nswindow, multiple-monitors

我正在尝试在所有屏幕上显示窗口副本。请参阅下面的代码。它仅在主屏幕上正确显示无边框窗口。我在任何地方都看不到另一个窗口。

窗口应该从左侧显示 200 像素，从顶部显示 200 像素。

我将 origin.x 设置为屏幕高度 - 300（= 200px 间距 + 100px 窗口本身的高度）。

知道我做错了什么吗？

```
- (void)displayOnAllScreens
{        
    NSArray *screenArray = [NSScreen screens];

    _tempWindows = [[NSMutableArray alloc] init];

    if ([screenArray count] == 1) {
        [self displayOnScreen:[NSScreen mainScreen]];
    } else {
        for (int i=0; i<[screenArray count]; i++) {
            [self displayOnScreen:[screenArray objectAtIndex:i]];
        }
    }
}

- (void)displayOnScreen:(NSScreen *)screen
{
    BOOL isMainScreen = NO;

    if (screen == [NSScreen mainScreen]) {
        isMainScreen = YES;
    }

    NSRect screenRect = [screen frame];

    NSRect frame = NSMakeRect(screenRect.origin.x + 200, screenRect.size.height - 300, 100, 100);

    NSWindow *_tempWindow;

    _tempWindow  = [[NSWindow alloc] initWithContentRect:frame
                                                     styleMask:NSBorderlessWindowMask
                                                       backing:NSBackingStoreBuffered
                                                         defer:NO];

    if (isMainScreen) {
        [_tempWindow setBackgroundColor:[NSColor lightGrayColor]];
    } else {
        [_tempWindow setBackgroundColor:[NSColor redColor]];
    }
       [_tempWindow makeKeyAndOrderFront:NSApp];
    [_tempWindow setAlphaValue:0.93];

    [_tempWindow setCollectionBehavior:NSWindowCollectionBehaviorCanJoinAllSpaces];

    [_tempWindows addObject:_tempWindow];
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:05:21.260

NSWindow 有一个特殊的初始化程序来指定你想要它在哪个屏幕上（你实际上只是一个参数关闭！）：

```
initWithContentRect:styleMask:backing:defer:screen: 
```

初始化程序的另一种形式假定主屏幕，这就是它们像那样堆积的原因。

# php - 在网站上创建 Facebook/Google 登录

> ID：15225513
> 
> 赞同：2
> 
> 时间：2013-03-05T13:52:24.047
> 
> 标签：php, javascript, facebook

我希望人们能够使用他们的 Google 和 Facebook 帐户登录我的网站。我已经对 Facebook 做了一些研究。

[这个 JavaScript 教程](https://developers.facebook.com/docs/howtos/login/getting-started/)非常有用。目前唯一困扰我的是源代码中的应用程序 ID：

```
FB.init({
    appId      : 'YOUR_APP_ID', // App ID
    channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
    status     : true, // check login status
    cookie     : true, // enable cookies to allow the server to access the session
    xfbml      : true  // parse XFBML
}); 
```

如果 id 是公开的，这不会让任何查看页面源代码的人都可以使用该应用程序吗？

我以前从未这样做过，我的想法是获取 facebook 用户的 id，这将是对我网站中用户个人资料的引用。我计划创建一个表`facebook_has_user`，我将在其中存储 a`user_profile`和他的 facebook 之间的连接。我计划为 Google 做类似的事情。这是一个好主意吗？我知道我没有具体的问题，但我希望以前做过这件事的人告诉我他们是如何做到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:42:27.410

是的，您的应用程序 ID 在使用 JavaScript 时将是可见的。但是不，它不会使其易受攻击，因为您可以查看任何应用程序 ID。例如，SongPop id 是`323595464361460`，您可以在[https://www.facebook.com/appcenter/323595464361460](https://www.facebook.com/appcenter/323595464361460)中看到！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:44:30.500

> 如果 id 是公开的，这不会让任何查看页面源代码的人都可以使用该应用程序吗？

不可以。任何在服务器端安全的东西都需要你的密钥，它永远不应该在源代码中公开。此外，身份验证等内容仅限于 Facebook 应用程序设置中的域。

# excel - 为每秒请求创建 Excel 钟形曲线

> ID：15225514
> 
> 赞同：1
> 
> 时间：2013-03-05T13:52:27.863
> 
> 标签：excel, statistics, http-request

我一直遇到这个。服务器 X 预计每天处理 Y 笔交易。其中 Z% 的交易将在 N 小时内发生。

在 excel 中创建显示每秒请求数的钟形曲线 \ 图表的最简单方法是什么。

我已经使用 NormDist() 等查找了许多示例，但老实说，我不是数学专家，不想为了完成任务而花费数小时的统计时间。

# c# - 取消保护excel工作表

> ID：15225516
> 
> 赞同：2
> 
> 时间：2013-03-05T13:52:29.080
> 
> 标签：c#, excel, vba

以下是我的 C# 代码，我试图通过传递密码来解锁受保护的工作表，但它仍然没有解锁工作表，我需要在工作表中添加一些宏。

代码：

```
const string excelFile = @"c:\temp\VBA\test.xlsm";
var excelApplication = new ExcelInterop.Application { Visible = true };
var targetExcelFile = excelApplication.Workbooks.Open(FileName:excelFile,Password:"12asQOl"); 
```

我不能在这里使用“sendKeys”，请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:09:17.570

在您的代码中，您正在传递文档密码。您没有取消保护工作簿。

使用以下代码取消保护工作簿：

```
targetExcelFile.Unprotect(password); 
```

如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:59:20.413

使用 VBA 时的一条建议：开始录制您正在尝试执行的操作的宏，然后查看生成的代码。

看起来您正在尝试打开受保护的文件，而不是取消保护工作表。

我发现了一些类似这样的旧代码（它是 VB）：

```
Dim WSheet As Worksheet
For Each WSheet In Worksheets
    If WSheet.ProtectContents = True Then
        WSheet.Unprotect Password:=MyPassword
    Else
        WSheet.Protect Password:=MyPassword
    End If
Next WSheet 
```

# c# - 如何在 SoapExtension 中处理超时异常

> ID：15225519
> 
> 赞同：1
> 
> 时间：2013-03-05T13:52:37.657
> 
> 标签：c#, exception, soap, asmx, soap-extension

我有一个 SoapExtension。它记录了我所有的网络服务请求和响应。我认为项目中有超过一千个 Web 服务调用。我的问题是，如果我的 web 服务调用以超时或 httpexceptions（如 403、404）结束，我将无法记录请求。我也需要记录这些异常。

这是我的 SoapExtension

```
public class SoapLogger : SoapExtension
{
    Stream orgStream;
    Stream newStream;
    LogItem logItem;

    // When the SOAP extension is accessed for the first time, the XML Web
    // service method it is applied to is accessed to store the file
    // name passed in, using the corresponding SoapExtensionAttribute.    
    public override object GetInitializer(LogicalMethodInfo methodInfo, SoapExtensionAttribute attribute)
    {
        return 0;
    }

    // The SOAP extension was configured to run using a configuration file
    // instead of an attribute applied to a specific XML Web service
    // method.
    public override object GetInitializer(Type WebServiceType)
    {
        return 0;
    }

    // Receive the file name stored by GetInitializer and store it in a
    // member variable for this specific instance.
    public override void Initialize(object initializer)
    {
        logItem = new LogItem();
    }

    // Save the Stream representing the SOAP request or SOAP response into
    // a local memory buffer.
    public override Stream ChainStream(Stream stream)
    {
        orgStream = stream;
        newStream = new MemoryStream();
        return newStream;
    }

    //  If the SoapMessageStage is such that the SoapRequest or
    //  SoapResponse is still in the SOAP format to be sent or received,
    //  save it out to a file.
    public override void ProcessMessage(SoapMessage message)
    {
        switch (message.Stage)
        {
            case SoapMessageStage.BeforeSerialize:
                break;
            case SoapMessageStage.AfterSerialize:
                WriteOutput();
                break;
            case SoapMessageStage.BeforeDeserialize:
                WriteInput(message);
                break;
            case SoapMessageStage.AfterDeserialize:
                CheckException(message);
                break;
            default:
                throw new Exception("invalid soap stage");
        }
    }

    public void CheckException(SoapMessage message)
    {

        logItem.WebClassName = message.MethodInfo.DeclaringType.FullName;
        logItem.WebMethodName = message.MethodInfo.Name;

        MethodBase method = FindMethod(logItem.WebMethodName);

        logItem.MethodName = method != null ? method.Name : "";
        logItem.ClassName = method != null ? method.DeclaringType.Name : "";

        logItem.Exception = message.Exception != null ? message.Exception.Message : "";

        LogToDB(logItem);
    }

    MethodBase FindMethod(string webMethodName)
    {
        try
        {
            StackFrame[] stackFrames = new StackTrace().GetFrames();

            int i;
            for (i = 0; i < stackFrames.Length; i++)
            {
                if (stackFrames[i].GetMethod().Name == webMethodName) break;
            }
            return i < stackFrames.Length - 1 ? stackFrames[i + 1].GetMethod() : null;
        }
        catch
        {
            return null;
        }
    }

    void LogToDB(LogItem logItem)
    {
        // I am logging logItem to db
    }

    public void WriteOutput()
    {
        newStream.Position = 0;

        logItem.Request = CopyString(newStream);
        logItem.StartTime = DateTime.Now;

        newStream.Position = 0;
        Copy(newStream, orgStream);
        newStream.Position = 0;
    }

    public void WriteInput(SoapMessage message)
    {
        Copy(orgStream, newStream);
        newStream.Position = 0;

        logItem.Response = CopyString(newStream);
        logItem.EndTime = DateTime.Now;

        newStream.Position = 0;
    }

    void Copy(Stream from, Stream to)
    {
        TextReader reader = new StreamReader(from);
        TextWriter writer = new StreamWriter(to);
        writer.WriteLine(reader.ReadToEnd());
        writer.Flush();
    }

    string CopyString(Stream from)
    {
        TextReader reader = new StreamReader(from);
        return reader.ReadToEnd();
    }

} 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-05T14:35:52.960

以下文字可能会帮助您解决问题。

“SoapExtension 解决方案

解决这个问题的最流行的方法（到目前为止我发现）是编写一个自定义的 SoapExtension 子类，它允许您在 Web 服务请求和响应的不同阶段对 SoapMessage 进行低级访问。当发生未处理的异常时，可以在响应 SoapMessage 中捕获 SoapException（通过 Exception 属性）。SoapException 的 InnerException 属性然后包含实际未处理的异常。此时，您可以在异常发生时记录异常，因此当您从技术支持部门收到该电子邮件时，您就可以继续做一些事情了。

但是，如果您曾经开发过真正的面向公众的 Web 服务（就像我们的一样），您很快就会同意仅仅记录异常是不够的。通常，您希望对发送回调用者的 SoapException 本身的内容进行更多控制。SoapExtension 子类方法使您能够修改 SoapException，但级别非常低。具体来说，它已经被反序列化为其代表性的 SOAP 故障 XML，您必须进行一些花哨的流操作才能将任何自定义内容插入到该故障中（例如：添加详细信息元素）。在我看来，这是一个 hack，而不是一个非常优雅的解决方案。相反，我们应该在抛出 SoapException 之前对其进行更多控制。理想情况下，如果我们可以自己创建并抛出 SoapException，我们可以对产生的 SOAP 错误的内容（如错误代码和详细信息）有更多的控制。这样我们就不必费心拦截和操纵原始 SOAP 消息本身了。”

请访问链接了解更多信息： [http ://beyondthispoint.blogspot.co.uk/2008/04/managing-unhandled-exceptions-in-aspnet.html](http://beyondthispoint.blogspot.co.uk/2008/04/managing-unhandled-exceptions-in-aspnet.html)

# ruby - soundcloud oauth2重定向怪异

> ID：15225521
> 
> 赞同：0
> 
> 时间：2013-03-05T13:52:42.593
> 
> 标签：ruby, oauth, soundcloud

当重定向发生时，我还看到 *access_token* 作为锚点中的参数。

我什至还没有要求 access_token，因为我没有*代码*或者我遗漏了什么？

`http://mycallback.com/code=**some_code**&signed_up=0#access_token=**some_token**&expires_in=21599&scope=%2A`

# plsql - TOAD- PL/sql 脚本输出到数据网格

> ID：15225523
> 
> 赞同：0
> 
> 时间：2013-03-05T13:52:51.160
> 
> 标签：plsql

有没有办法直接将 pl/sql 脚本输出到数据网格？我有一个 pl/sql 脚本，它使用 dbms_output.putline() 输出到控制台。我正在尝试使用 TOAD 执行此操作，并想知道除了将输出打印到控制台之外，是否还有任何选项可将输出重新路由到 daragrid。

谢谢，贾苏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-05T07:08:23.190

可能，没有。但是您可以使用以下解决方案之一：

1.  使用临时表，然后在表上进行选择。
2.  使用集合，然后选择集合。

# java - 仅从 jsp 页面 onload 事件调用 servlet 页面一次

> ID：15225525
> 
> 赞同：1
> 
> 时间：2013-03-05T13:52:55.583
> 
> 标签：java, javascript, jsp, servlets

我有一个 jsp 页面，我想在其中显示要使用 servlet 返回的值填充的 2 个列表。这应该在 jsp 页面加载后立即发生，因此我通过 jsp 页面的 onload 函数调用了 servlet。我能够在页面上获取列表，但它会一次又一次地进入无限循环调用 servlet 并显示相同的值。

在我的 test2.jsp 中，我使用它在加载 jsp 页面时调用 servlet

```
function load()
{

document.location.href="/OnaUIDemo/ona?";

} 
```

在我的 ona servlet 中，我正在使用它，

```
RequestDispatcher rd = getServletContext().getRequestDispatcher("/test2.jsp"); 
```

我发现的是，因为它通过页面加载调用 servlet 并且 servlet 正在重定向到同一个 jsp。jsp 再次加载导致一次又一次无限加载。请帮我控制一次 servlet 调用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-05T15:14:28.823

你真的需要使用servlet吗？可以使用POJO来完成。

创建一个将返回这两个列表的类。

```
public class test{

public List getList1()
{
//do your stuff here to add values in list
return list;//return your list 
}
public List getList2()
{
//do stuff here
return list;//return your list
}
} 
```

在你的jsp中。只需调用这两个函数

```
<%
test t = new test();
List l1=t.getList1();
List l2=t.getList2();
//now you have the two list,just show them
%> 
```

正如所指出的那样不鼓励使用scriptlet。您可以使用jstl

```
<jsp:useBean id="obj_name" type="package_name.class_name" /> 
```

这相当于 <%test t=new test();%> 现在迭代并在 jstl 中显示列表值

```
<c:forEach var="content" items="${obj_name.list1}">
c:out value="${content}" />
</c:forEach> 
```

# wpf - WPF 将 BitmapImage 12bit 灰度转换为 8bit 灰度

> ID：15225526
> 
> 赞同：0
> 
> 时间：2013-03-05T13:52:58.967
> 
> 标签：wpf, format, bitmapimage

我想将 12 位灰度图像转换为 8 位表示，以便能够正确显示。方法如下：

```
 byte[] dstData = null;
  BitmapImage displayableBitmapImage = null;

  if (numberOfBitsUsed == 12 || numberOfBitsUsed == 16)
  {
    int height = image.PixelHeight;
    int width = image.PixelWidth;
    int bytesPerPixel= ((image.Format.BitsPerPixel + 7) / 8);
    int stride = width * bytesPerPixel;

    // get the byte array from the src image
    byte[] srcData = new byte[height * stride];
    image.CopyPixels(srcData, stride, 0);

    // create the target byte array
    dstData = new byte[height * width]; 

    for (int j = 0; j < height; j++)
    {
      for (int i = 0; i < width; i++)
      {
        int ndx = (j * stride) + (i * bytesPerPixel);
        //get the values from the src buffer
        byte val1 = srcData[ndx + 1];

        //convert the value to 8bit representation
        if (numberOfBitsUsed == 12)
        {
          byte val2 = srcData[ndx];
          //the combined value of 2 bytes
          ushort val = (ushort)((val1 << 8) | val2);

          //shift by 4 ( >> 4 )
          dstData[i + j * width] = (byte)(val >> 4);
        }
        else if (numberOfBitsUsed == 16)
        {
          // shift by 8 ( >> 8 ) is not required, just use the upper byte...
          dstData[i + j * width] = val1;
        }
      }
    }
  } 
```

现在我不确定如何从字节数组创建一个正确的 8 位 BitmapImage。我试过这样：

```
BitmapImage bi = null;

if (dstData != null)
  {
    bi = new BitmapImage();
    MemoryStream stream = new MemoryStream(dstData);
    stream.Seek(0, SeekOrigin.Begin);

    try
    {
      bi.BeginInit();
      bi.StreamSource = stream;
      bi.EndInit();
    }
    catch (Exception ex)
    {
      return null;
    }
  } 
```

但我不断收到 System.NotSupportedException。如何正确地从字节数组创建 BitmapImage？

塔比纳

# asp.net - 如何将数据库单元格分布在同一 html 行上 + 每条记录跳到一个新行？

> ID：15225528
> 
> 赞同：0
> 
> 时间：2013-03-05T13:53:02.657
> 
> 标签：asp.net, listview, data-binding, gridview, repeater

我有一个`database table`包含`ID`和`Name`。
在 Default.aspx 中，我只显示`Name`DB 表中的单元格（列），这没什么大不了的。

但是 GridView 会生成一个这样的 html 表（当然我删除了 gridview 标题）：
------------
| 姓名 1 |
------------
| 姓名 2 |
------------
| 姓名 3 |
------------

## 我的问题

我怎样才能让上面的 GridView:
1 - 传播名称`1 row`？
2 - 并跳到一个`new row` `every 2 records`（每2个名字）？

### 我尝试过但失败了：

*   我尝试使用中继器而不是 GridView 并且我写了 2 `<td>`，但不幸的是，正如您所看到的，虽然它会跳过每 2 个名称，但它会显示相同的名称（相同的记录）两次。

```
<asp:Repeater ID="repeater1" runat="server" DataSourceID="AccessDataSource1">
    <HeaderTemplate>
        <table>
    </HeaderTemplate>
    <ItemTemplate>
        <tr>
            <td>
                <%# Eval("name")%>
            </td>
            <td>
                <%# Eval("name")%>
            </td>
        </tr>
    </ItemTemplate>
    <FooterTemplate>
        </table>
    </FooterTemplate>
</asp:Repeater> 
```

*   我还尝试移动`<tr>`到`</tr>`HeaderTemplate 和 FooterTemplate，它现在确实在 1 行上显示它们，但不幸的是它不会每 2 个名称创建一个新行：

```
<asp:Repeater ID="repeater1" runat="server" DataSourceID="AccessDataSource1">
   <HeaderTemplate>
        <table>
          <tr>
    </HeaderTemplate>
    <ItemTemplate>
           <td><%# Eval("name")%></td>
    </ItemTemplate>
    <FooterTemplate>
          </tr>
        </table>
    </FooterTemplate>
</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T13:58:10.847

由于您只寻找 2，您可以使用交替项目模板。

```
 <AlternatingItemTemplate>
          <td>
            <%# Eval("name")%>
          </td>
        </tr>
      </AlternatingItemTemplate>

      <ItemTemplate>
        <tr>
          <td>
            <%# Eval("name")%>
          </td>
      </ItemTemplate> 
```

您可能需要交换 <tr> 和 </tr> 标签

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T15:08:02.807

假设在将数据绑定到 GridView 之前，您的数据位于 DataTable 或 DataReader 中 - 您可以遍历数据源并构造一个包含 3 列的新 DataTable，该列将包含名称，然后将其绑定到网格。

3的伪示例：

```
DataTable dt = new DataTable();
dt.columns.add("name1");
dt.columns.add("name2");
dt.columns.add("name3");

int pointer = 1;
DataRow dr = null;

for(int i=0;i<sourceTable;i++)
{
    if( pointer==1 )
    {
        dr = dt.newRow();
        dr["name1"] = sourceTable.Rows[i]["Name"];
        dt.Rows.Add(dr);
        pointer++;
    }
    else if( pointer==2)
    {
        dr["name2"] = sourceTable.Rows[i]["Name"];
        pointer++;
    }
    else
    {
        dr["name3"] = sourceTable.Rows[i]["Name"];
        pointer=1;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T15:22:19.650

如果您对使用 a 死心塌地`Repeater`，请查看此 SO 问题的第一个答案：

[如何在转发器中每行显示 x 个项目？](https://stackoverflow.com/questions/1765942/how-do-you-show-x-items-per-row-in-a-repeater)

一个更简单的方法是使用`DataList`控件。它具有使用以下两个属性跨行拆分项目的内置功能：

```
DataList1.RepeatColumns = 2;
DataList1.RepeatDirection = RepeatDirection.Horizontal; 
```

# javascript - 如何使用 jQuery 检索网页中的特定 ID 元素？

> ID：15225539
> 
> 赞同：1
> 
> 时间：2013-03-05T13:53:37.113
> 
> 标签：javascript, jquery

我不确定如何使用 jQuery 为我所在的网页（即在我的网络应用程序中）处理此问题。我希望能够通过网页按出现顺序添加到数组中，其中 id 与字符串“_AB_Q_”匹配的所有元素

例如，分散在网页中的将是以下实例：

```
<id="P1_AB_Q_101">...
<id="P1_AB_Q_102">...
<id="P1_AB_Q_103">...
<id="P1_AB_Q_104">... 
..
...
....
<id="P1_AB_Q_500">... 
```

如前所述，我只想检索 id 与模式“_AB_Q_”匹配的完整 id 名称，然后将它们存储在一个数组中以供以后处理。

所以使用上面的测试数据，我只想返回：

```
P1_AB_Q_101
P1_AB_Q_102
P1_AB_Q_103
P1_AB_Q_104 
P1_AB_Q_500 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:02:57.573

您需要使用属性包含选择器：我为您创建了一个 Jsfiddle：http: [//jsfiddle.net/whizkid747/D2HS4/](http://jsfiddle.net/whizkid747/D2HS4/)

```
$('[id*="_AB_Q_"]').each(function(){
    alert(this.getAttribute('id'));
}); 
```

文档：[http ://api.jquery.com/attribute-contains-selector/](http://api.jquery.com/attribute-contains-selector/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:56:43.190

```
$('[id^="_AB_Q_"]').each(function(){
     console.log(this.getAttribute('id'));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:02:31.380

使用[属性包含](http://api.jquery.com/attribute-contains-selector/)选择器和[地图](http://api.jquery.com/map/)功能；

`var ids = $('[id*="_AB_Q_"]').map(function() { return this.id });`

*未经测试，但它应该可以工作:)*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T14:49:35.157

我的方法是：

```
var ids = []
$("*").each(function(){
    if(this.id.match(/_AB_Q_/))
        ids.push(this.id)
}); 
```

与其他一次或多或少相同，但我将匹配条件分开，以使其易于适应。:)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-05T13:57:54.280

```
$('[id^=_AB_Q_]').doSomeAction(); 
```

它检查 id 是否以提供的字符串开头。

JQuery 选择器是 css 选择器。有关完整列表，您应该查看[http://www.w3.org/TR/CSS2/selector.htm](http://www.w3.org/TR/CSS2/selector.html)

编辑：

```
// if the id = AB_Q_P1_100
// you can retrieve different parts of the id like this
var parts = $(this).attr('id').split('_');
var p = parts['3']; 
```

# matlab - 用 Matlab 读取剪切的 AVI 文件

> ID：15225544
> 
> 赞同：0
> 
> 时间：2013-03-05T13:53:58.540
> 
> 标签：matlab, avi

我正在尝试将 AVI 文件读入 Matlab，但在剪切帧时遇到问题。我正在使用 Mathworks for VideoReader 的 Matlab 代码，只做了一些小的修改。

```
xyloObj = VideoReader('video.avi');

nFrames = xyloObj.NumberOfFrames;
vidHeight = xyloObj.Height;
vidWidth = xyloObj.Width;

% Preallocate movie structure.
mov(1:nFrames) = ...
    struct('cdata', zeros(vidHeight, vidWidth, 3, 'uint8'),...
           'colormap', []);

% Read one frame at a time.
for k = 1 : nFrames
    mov(k).cdata = read(xyloObj, k);
end

imagesc(mov(1).cdata)
colormap gray 
```

以下是视频中的单帧。有没有人遇到过这个？该视频由[PI Connect 红外摄像机](http://www.optris.com/optris-pi-connect)制作。该视频在 VLC 中播放时没有显示剪切。我知道我可以通过简单的图像处理操作来纠正剪切，但我宁愿完全避免这个问题。提前致谢。 ![图片](../Images/1d8a110a319afd961d6099dbb8c113c5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:09:11.450

我通过使用[Virtual Dub](http://www.virtualdub.org/)将文件从 YUY2 转换为 RGB24 解决了这个问题。新文件大了 50%，但 Matlab 可以正确读取，无需剪切。

# c# - WeakEventManager 持有对订阅者的引用

> ID：15225547
> 
> 赞同：6
> 
> 时间：2013-03-05T13:54:08.217
> 
> 标签：c#, closures, weakeventmanager

我一直在使用 Wea​​kEventManager 来避免内存泄漏，并且我开始过度使用它们。例如，我为 INotifyPropertyChanged 创建了扩展方法，例如：

```
 public static void AddWeakPropertyChanged(this INotifyPropertyChanged item, Action handler)
{
    PropertyChangedEventManager.AddHandler(item, (s, e) => handler(e.PropertyName), string.Empty);
} 
```

现在我很快意识到，这行不通。事实上，你不能真正使用匿名方法来处理弱事件。（如果我理解正确，那么编译器会为它创建一个“闭包类”（保存引用的值），它具有处理程序，但由于您的闭包类没有在任何地方引用，GC 会将其清除，并且事件处理程序不会被调用）

问题1：正确吗？我的意思是它是否正确，那么当对弱事件处理程序使用匿名方法（或 lambda）时，只有当 GC 没有同时运行时才会调用处理程序（例如，它是不确定的）？

好吧，我是这么想的，所以我做了一些单元测试以确保我做对了。在我进行以下单元测试之前，它似乎没问题：

```
 class DidRun
        {
            public bool Value { get; set; }
        }
        class TestEventPublisher
        {
            public event EventHandler<EventArgs> MyEvent;
            public void RaiseMyEvent()
            {
                if (MyEvent != null)
                    MyEvent(this, EventArgs.Empty);

            }
        }
        class TestClosure
        {
            public DidRun didRun { get; set; }
            public EventHandler<EventArgs> Handler { get; private set; }
            public TestClosure()
            {
                this.Handler = new EventHandler<EventArgs>((s, e) => didRun.Value = true);
            }
        }
        [TestMethod]
        public void TestWeakReference()
        {
            var raiser = new TestEventPublisher();
            var didrun = new DidRun();
            var closure = new TestClosure { didRun = didrun };
            WeakEventManager<TestEventPublisher, EventArgs>.AddHandler(raiser, "MyEvent", closure.Handler);
            closure = null;

            GC.Collect();
            GC.Collect();
            raiser.RaiseMyEvent();
            Assert.AreEqual(false, didrun.Value);
        } 
```

问题#2：谁能解释我为什么这个测试失败了？

期望：这里我没有任何闭包（我把它们拿出来，以确保发生了什么），我只是有一个对象（闭包），它使用 Wea​​kEventManager 订阅一个事件，然后我删除对它的引用（闭包=空；）。

我期待 2 个 GC.Collect() 调用来清理我的旧闭包类，因此 WeakEventManager 将删除订阅者，而不运行处理程序，但测试失败。有任何想法吗？

编辑：对不起，通用参数不可见，现在它们是

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-13T20:02:03.807

如果没有对它的引用，GC 将收集围绕您的 lambda 创建的闭包是正确的。

在您的单元测试中，您将本地实例`TestClosure`清空，但您已将处理程序的硬引用传递给 WeakEventManager，而不是`TestClosure`. 所以处理程序继续存在......

我相信这些例子说明了你在关闭时遇到的麻烦：

```
class DidRun
{
    public bool Value { get; set; }
}

class TestEventPublisher
{
    public event EventHandler<EventArgs> MyEvent;
    public void RaiseMyEvent()
    {
        if (MyEvent != null)
            MyEvent(this, EventArgs.Empty);
    }
}

class TestClosure
{
    static public EventHandler<EventArgs> Register(TestEventPublisher raiser, DidRun didrun)
    {
        EventHandler<EventArgs> handler = (s, e) => didrun.Value = true;
        WeakEventManager<TestEventPublisher, EventArgs>.AddHandler(raiser, "MyEvent", handler);
        return handler;
    }
}

[TestMethod]
public void Test1()
{
    var raiser = new TestEventPublisher();
    var didrun = new DidRun();

    TestClosure.Register(raiser, didrun);

    // The reference to the closure 'handler' is not being held,
    //  it may or may not be GC'd (indeterminate result)

    raiser.RaiseMyEvent();
    Assert.IsTrue(didrun.Value);
}

[TestMethod]
public void Test2()
{
    var raiser = new TestEventPublisher();
    var didrun = new DidRun();

    // The reference to the closure 'handler' is not being held, it's GC'd
    TestClosure.Register(raiser, didrun);

    GC.Collect();
    GC.Collect();

    raiser.RaiseMyEvent();
    Assert.IsFalse(didrun.Value);
}

[TestMethod]
public void Test3()
{
    var raiser = new TestEventPublisher();
    var didrun = new DidRun();

    // Keep local copy of handler to prevent it from being GC'd
    var handler = TestClosure.Register(raiser, didrun);

    GC.Collect();
    GC.Collect();

    raiser.RaiseMyEvent();
    Assert.IsTrue(didrun.Value);
} 
```

至于您的原始问题，您可以尝试保存处理程序（关闭）以防止它被 GC'd。A`ConditionalWeakTable`应该为此工作：

```
// ConditionalWeakTable will hold the 'value' as long as the 'key' is not marked for GC
static private ConditionalWeakTable<INotifyPropertyChanged, EventHandler<PropertyChangedEventArgs>> _eventMapping =
  new ConditionalWeakTable<INotifyPropertyChanged, EventHandler<PropertyChangedEventArgs>>();

public static void AddWeakPropertyChanged(this INotifyPropertyChanged item, Action<string> handlerAction)
{
    EventHandler<PropertyChangedEventArgs> handler;

    // Remove any existing handler for this item in case it's registered more than once
    if (_eventMapping.TryGetValue(item, out handler))
    {   
        _eventMapping.Remove(item);
        PropertyChangedEventManager.RemoveHandler(item, handler, string.Empty);
    }   

    handler = (s, e) => handlerAction(e.PropertyName);

    // Save handler (closure) to prevent GC
    _eventMapping.Add(item, handler);

    PropertyChangedEventManager.AddHandler(item, handler, string.Empty);
}

class DidRun
{
    static public string Value { get; private set; }
    public void SetValue(string value) { Value = value; }
}

[TestMethod]
public void Test4()
{
    var property = new ObservableObject<string>();

    var didrun = new DidRun();
    property.AddWeakPropertyChanged(
        (x) => 
        {
            didrun.SetValue("Property Name = " + x);
        });

    GC.Collect();
    GC.Collect();

    property.Value = "Hello World";

    Assert.IsTrue(DidRun.Value != null);
} 
```

# php - PDO 和绑定动态关联数组参数

> ID：15225553
> 
> 赞同：1
> 
> 时间：2013-03-05T13:54:26.847
> 
> 标签：php, database, pdo

我正在尝试将参数正确绑定到以下语句`Function`。我正在传递一个关联数组，`value=>datatype`.

虽然在尝试此操作时出现错误：`Notice: Undefined offset: 0 in db.class.php on line 69 Notice: Undefined offset: 1 in db.class.php on line 69`

第 69`for`行是`Function`

我该如何解决？和/或者我应该像这样费心去做吗？

这里是`Function`

```
protected function ConvertParams($stmt, $params){
    $parrs = $params;
    if(is_array($parrs)){
        $parrCt = count($parrs);
        echo '<pre>';
        print_r($parrs);
        echo '</pre>';
        echo '<hr />';
        for($i = 0; $i < $parrCt; ++$i){
            switch ($parrs[$i][1]){
                case 'string':
                    $stmt->bindParam($i + 1, $parrs[$i][0], PDO::PARAM_STR);
                    break;
                case 'int':
                    $stmt->bindParam($i + 1, $parrs[$i][0], PDO::PARAM_INT);
                    break;
                case 'boolean':
                    $stmt->bindParam($i + 1, $parrs[$i][0], PDO::PARAM_BOOL);
                    break;
                case 'lob':
                    $stmt->bindParam($i + 1, $parrs[$i][0], PDO::PARAM_LOB);
                    break;
                default:
                    $stmt->bindParam($i + 1, $parrs[$i][0]);
            }
        }
    }
} 
```

这是`array`：

```
$db->Params = array('%a%'=>'string', '%Welcome%'=>'string'); 
```

请假设我正确连接到数据库，并且查询正确执行（减去这个 bindParam 问题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:08:42.717

我的第一篇文章...我在这里可能是错的，但我相信 $parrs 没有 [0] 或 [1] 索引，因为您使用命名索引 '%a%' 和 '%Welcome%' 传递它.

您可以尝试分别用 %a% 和 %Welcome% 替换 [0] 和 [1]，或者使用数组的数字索引。

*   [http://php.net/array_search](http://php.net/array_search)
*   [http://php.net/array_keys](http://php.net/array_keys)
*   [php - 获取关联数组的数字索引](https://stackoverflow.com/questions/3365766/php-get-numeric-index-of-associative-array)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:16:05.933

您根本不需要“正确的绑定方式”，也不需要整个这个函数。只需直接传递一组参数即可执行：

```
$params = array('%a%', '%Welcome%');
$stmt->execute($params); 
```

它将大大缩短您的代码而没有任何缺点。

请保持您的代码简洁明了。
无用的复杂性将使其难以支持和维护。

# tsql - 制作 T-SQL 查询

> ID：15225555
> 
> 赞同：1
> 
> 时间：2013-03-05T13:54:30.223
> 
> 标签：tsql

我有一个关于 T-SQL 查询的公认新手问题（这是有道理的，因为我确实是 T-SQL 的新手）。

考虑下表——

```
Key    | fieldName  |    Value
==============================
465    |    Bing    |     10
465    |    Ping    |     50
846    |    Bing    |     20  
846    |    Zing    |     80  
678    |    Bing    |     10
678    |    Ping    |     50
678    |    Zing    |     20 
```

我将如何编写查询以返回以下内容？

*   如果存在*fieldName* `Bing`和*Value*为`10`的行，则返回具有该键的所有行，否则不返回与该键有关的任何行。

在上面的例子中，结果集应该如下——

```
Key    | fieldName  |    Value
==============================
465    |    Bing    |     10
465    |    Ping    |     50
678    |    Bing    |     10
678    |    Ping    |     50
678    |    Zing    |     20 
```

虽然我知道可能有更好的方法来重新组织存储在此表中的数据，但我无法控制这一点。我很高兴阅读有关数据重组的任何评论，但我无法将任何无法解决当前存在的问题的答案标记为答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T13:56:57.790

您可以再次加入表格以查找 Bing/10 值：

```
SELECT DISTINCT T1.[Key], T1.fieldName, T1.Value
FROM YourTable T1
INNER JOIN YourTable T2 ON T1.[Key] = T2.[Key]
WHERE T2.fieldName = 'Bing' and T2.Value = 10 
```

因为它们现在风靡一时，所以这里有一个[SQL Fiddle 演示](http://sqlfiddle.com/#!3/7f9ee/1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:15:17.937

另一种选择是：

```
SELECT DISTINCT T1.[Key], T1.fieldName, T1.Value
FROM YourTable T1
WHERE EXISTS (SELECT 1 
              FROM YourTable T2
              WHERE T2.[Key] = T1.[Key]
                  AND T2.fieldName = 'Bing'
                  AND T2.Value = 10) 
```

# joomla - 安装 JCE 编辑器

> ID：15225556
> 
> 赞同：-1
> 
> 时间：2013-03-05T13:54:30.960
> 
> 标签：joomla, joomla2.5

大家好，我为 joomla2.5 安装了 JCE 编辑器

我的组件处于活动状态，一切都很好，安装时不会显示任何错误但是当我创建新文章时，我可以在我的文章或自定义模块中插入 html 或 php 代码。

任何想法或建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:24:24.643

转到控制面板->全局配置

选择您的默认编辑器作为“Editor JCE Editor”。

然后点击保存按钮

# python - 从文件指针获取文件名

> ID：15225557
> 
> 赞同：106
> 
> 时间：2013-03-05T13:54:34.107
> 
> 标签：python

如果我有一个文件指针，是否可以获得文件名？

```
fp = open("C:\hello.txt") 
```

是否可以`"hello.txt"`使用`fp`？

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2013-03-05T13:55:34.363

您可以通过`fp.name`. 例子：

```
>>> f = open('foo/bar.txt')
>>> f.name
'foo/bar.txt' 
```

[`os.path.basename`](https://docs.python.org/library/os.path.html#os.path.basename)如果您*只*想要文件名，您可能需要：

```
>>> import os
>>> f = open('foo/bar.txt')
>>> os.path.basename(f.name)
'bar.txt' 
```

[在此处](https://docs.python.org/2.7/library/stdtypes.html#file-objects)归档对象文档（适用于 Python 2）。

# c - get有用吗？

> ID：15225565
> 
> 赞同：7
> 
> 时间：2013-03-05T13:54:51.597
> 
> 标签：c, history, standard-library, gets

在我看来，人们，尤其是在学习 C 编程语言时，仍在使用该[`gets`](http://en.cppreference.com/w/c/io/gets)函数从标准输入读取数据。尽管它现在已从C11 标准中删除^(1 ，并且)[cppreference](http://en.cppreference.com/w/c/io/gets#Notes)上的免责声明如下：

> gets() 函数不执行边界检查，因此该函数极易受到缓冲区溢出攻击。它不能安全使用（除非程序在限制标准输入上出现的内容的环境中运行）。出于这个原因，该功能在 C99 标准的第三次勘误中已被弃用，并在 C11 标准中完全删除。fgets() 和 gets_s() 是推荐的替代品。
> 
> 永远不要使用gets()。

然而，这似乎不是一个新问题，而是出现了更现代的编程哲学。它总是会被破坏并导致程序崩溃，我看不出“限制标准输入上可能出现的内容的环境”可能意味着什么。

那么，它在**过去**有用吗？或者它被添加到 C 的先前标准和预标准版本的原因是什么？

* * *

^((1)) [...或至少更改为具有指示要读取的最大长度的附加参数。然而，我问的是旧签名，只收到一个指针。]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T14:29:48.163

当您查看 C 早期的残余时，您必须考虑历史背景。

C 语言是在 70 年代设计的。那时，网络系统是一个例外，而不是常态，安全性不像今天那么重要。系统很少在不受信任的第 3 方数据上运行。即使他们这样做，也没有被认为有那么大的风险。信息技术仍处于起步阶段。没有人意识到计算机系统有多么敏感。

另一方面，CPU 时间非常宝贵。程序需要尽可能高效。

这就是 C 标准库中的大多数函数不进行边界检查的原因。性能比安全具有更高的优先级。当您需要安全性时，您应该先验证您的数据**，然后再将**其提供给您的程序。

但是在 21 世纪的今天，所有计算机系统都相互连接，所有计算机系统都在不断地处理来自不受信任甚至未知来源的信息，而黑客攻击是一个十亿美元的产业，安全已成为每个计算机程序的首要任务。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-05T14:11:10.010

是的，它很有用，同时“极易受到缓冲区溢出攻击”。

> 它总是会被破坏并导致程序崩溃，我看不出“限制标准输入上可能出现的内容的环境”可能意味着什么。

不，`gets`不会导致程序崩溃。这主要是一个安全问题。[您可以在此处](http://en.wikipedia.org/wiki/Buffer_overflow)阅读有关缓冲区溢出攻击的信息

另请参阅此问题：[为什么获取函数如此危险以至于不应该使用它？](https://stackoverflow.com/questions/1694036/why-is-the-gets-function-is-dangerous-why-should-not-be-used)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T14:31:54.530

发明时`gets`，很少有程序需要能够接受来自不可靠来源的大量输入。`gets`对于来自合作用户的有限输入是足够的。该用户通过在每一行上不输入太多内容来提供“限制显示内容的环境”。您几乎可以指望坐在终端上的用户不会在“y/n”提示符中输入数百字节的数据。如果他们将一个大文件通过管道传输到您的程序中，而您的程序不是为此而设计的，那么他们会得到不好的结果。

必须处理任意输入的程序没有使用`gets`.

现在，恶意输入在实践中很常见，并且更具破坏性，因为存在允许攻击者轻松利用缓冲区溢出的工具和技术。训练有素的用户在提示下打字是一个小众案例。此外，考虑恶意输入被广泛用作一种很好的技术，以确保软件能够抵御*并非*旨在作为攻击的意外输入。几乎所有程序都应该处理任意输入。所以`gets`显然是不够的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T14:21:25.623

Gets 对于原型设计仍然有用。它可以快速编写并为程序员产生预期的结果，他们的目标是解决手头的问题，而不是试图让他或她的程序崩溃。

# r - 操作netcdf文件中的变量并再次写入

> ID：15225568
> 
> 赞同：3
> 
> 时间：2013-03-05T13:55:00.133
> 
> 标签：r, netcdf, cdo-climate

我有几个 netcdf 文件。每个 nc 文件都有几个变量。我只对两个变量“Soil_Moisture”和“Soil_Moisture_Dqx”感兴趣。

我想根据“Soil_Moisture_Dqx”过滤“Soil_Moisture”。每当相应的“Soil_Moisture_Dqx”像素的值大于 0.04 时，我想用 NA 替换“Soil_Moisture”中的值。

:这里是要下载的文件：

1- 我尝试了这个循环，但是当我输入 f[1] 或 f[2] 时，我得到了一些奇怪的东西，这意味着我的循环不正确。我很感激任何帮助我纠正我的循环。

```
 a<-list.files("C:\\3 nc files", "*.DBL", full.names = TRUE)

for(i in 1:length(a)){
f=open.ncdf(a[i])
A1 = get.var.ncdf(nc=f,varid="Soil_Moisture",verbose=TRUE)
A1* -0.000030518509475997 ## scale factor
 A2 = get.var.ncdf(nc=f,varid="Soil_Moisture_Dqx",verbose=TRUE)
A2*-0.0000152592547379985## scale factor
A1[A2>0.04]=NA ## here is main calculation I need
 } 
```

2- 谁能告诉我再写一遍？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T15:16:49.860

缺失值是 netCDF 文件中的特殊值，其值被视为表示数​​据“缺失”。所以你需要使用`set.missval.ncdf`来设置这个值。

```
a<-list.files("C:\\3 nc files", "*.DBL", full.names = TRUE)

SM_NAME <- "Soil_Moisture"
SM_SDX_NAME <- "Soil_Moisture_Dqx"
library(ncdf)
lapply(a, function(filename){
  nc <- open.ncdf( filename,write=TRUE )
  SM <- get.var.ncdf(nc=nc,varid=SM_NAME)
  SM_dqx <- get.var.ncdf(nc=nc,varid=SM_SDX_NAME)
  SM[SM_dqx > 0.4] <- NA
  newMissVal <- 999.9
  set.missval.ncdf( nc, SM_NAME, newMissVal )
  put.var.ncdf( nc, SM_NAME, SM )
  close.ncdf(nc)
 }) 
```

**编辑**添加一些检查

计算有多少点将被标记为错过是很有趣的。

在不应用奇数比例因子的情况下，我们有：

```
lapply(a, function(filename){
  nc <- open.ncdf( filename,write=TRUE )
  SM_dqx <- get.var.ncdf(nc=nc,varid=SM_SDX_NAME)
   table(SM_dqx > 0.4)
  })

[[1]]
[1] 810347     91

[[2]]
[1] 810286    152

[[3]]
[1] 810287    151

[[4]]
[1] 810355     83 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-20T12:09:11.080

这也可以使用 CDO 从命令行完成。

据我了解，这两个变量都包含在您的输入文件中（我将其称为“datafile.nc”，您可能希望在文件列表的循环中执行以下操作），所以首先我们将提取这两个变量分成两个单独的文件：

```
cdo selvar,Soil_Moisture     datafile.nc soil_moisture.nc
cdo selvar,Soil_Moisture_Dqx datafile.nc dqx.nc 
```

现在我们将定义一个掩码文件，当 dqx<0.04 时包含 1，但当 dqx>=0.04 时包含 NAN

```
cdo setctomiss,0 -ltc,0.04 dqx.nc mask.nc 
```

ltc 是“比常数”（您可能希望 lec 代替 <= ）， setctomiss 用 NAN 替换所有零。

现在我们将它们与 CDO 相乘 - NAN*C=NAN 和 1*C=C，因此这会为您提供一个带有所需字段的 netcdf：

```
cdo mul mask.c soil_moisture.nc masked_soil_moisture.nc 
```

如果您愿意，您实际上可以将最后两行组合在一起，并避免编写掩码文件的 I/O：

```
cdo mul -setctomiss,0 -ltc,0.04 dqx.nc soil_moisture.nc masked_soil_moisture.nc 
```

但是单独解释这些步骤更容易:-)

您可以在 bash 中轻松地将整个内容放在文件的循环中。

# c# - 以编程方式下载并安装 activex (.cab)

> ID：15225571
> 
> 赞同：3
> 
> 时间：2013-03-05T13:55:07.663
> 
> 标签：c#, windows-7, activex, cab

我们正在迁移到 Windows 7（启用 UAC），这将阻止标准用户为内部 Web 应用程序安装 ActiveX 控件。

我可以访问可以提升权限的本地管理员帐户，并且可以轻松获取所需的 .cab 文件。有没有一种简单的方法可以以尊重 .inf 文件的方式安装它们？有问题的 .inf 文件包含用于控制安装的挂钩，因此我不想简单地在包含的 .ocx 文件上调用 regsvr32。

基本上我想用 C# 模拟 IE 安装过程，文件出现在“下载的程序文件”中，所有注册表设置都正确写入，等等。

顺便说一句，我注意到有一个可用于 Win7 机器的“ActiveX 安装服务”，但这似乎没有启用/配置。

**附加信息**

这个问题已被标记为重复，它看起来肯定与原始问题相似，但在我的场景中，我可以访问本地管理员帐户，所以我的问题专门关于模拟 IE 安装过程，而不是克服 UAC 限制。@Ben 建议了一个使用 advpack（通过 rundll32）的解决方案，但我无法让它在我的环境中工作，尽管我会继续调查。

与此同时，我已经能够实现一种蛮力方法，它可以使用 IE 精确复制安装行为。这需要将文件定位并提取到“已下载的程序文件”目录，在提取的 ocx/dll 文件上调用 regsvr32，然后将条目添加到以下注册表位置：

HKLM\SOFTWARE\Microsoft\Code Store Database\Distribution Units HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\ModuleUsage HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\SharedDlls

我目前无法用这些信息回答我自己的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:35:48.217

使用组策略、MOM 或类似方法推出所需的组件。

您只需制定正确的命令行来执行组件的管理安装，您可以将其添加到登录脚本或类似的脚本中。一旦“为所有用户”安装了组件，问题就会消失。

至于如何做到这一点，这是一个不同的问题：

*   [从 FireFox 或命令行安装 CAB 文件](https://stackoverflow.com/questions/644831/install-cab-file-from-firefox-or-command-line)

确保您以管理帐户或提升帐户身份运行。

# javascript - 访问函数内部的外部文字类

> ID：15225572
> 
> 赞同：1
> 
> 时间：2013-03-05T13:55:09.920
> 
> 标签：javascript, jquery

我所拥有的是这样的：

```
jQuery(function($) {

  'use strict';

  var App = {

    init: function() {
      App.startTool();
    }
[...] 
```

当我尝试`App.init();`从另一个文件调用时，它会说`App is not defined`.

我正在尝试用茉莉花创建一些测试，但我遇到了同样的错误。

我怎样才能从外部文件进入这个嵌套在一个简单函数中的“文字类”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T13:57:28.400

如果它没有作为全局公开，那么您将无法触摸它。

您必须将其放入全局范围内的某个命名空间中。

```
jQuery(function($) {

  'use strict';

  var App = {

    init: function() {
      App.startTool();
    }

  }

  if (!window.myNamespace) {
      window.myNamespace = {};
  }
  myNamespace.App = App;

}); 
```

有趣的是，它在 document.ready 之前不会存在，不知道为什么要使用 ready 包装它。应该在准备就绪时调用 init 调用。因此，您正在对首先注册的小部件设置竞争条件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T13:58:12.283

Javascript具有函数范围。这意味着在函数中定义的变量仅在该函数中可见。要从函数外部访问此变量，您需要在函数外部声明它，将其直接附加到窗口或其他全局对象，或者将其作为函数的值返回。

对外声明：

```
var App;
    jQuery(function($) {

  'use strict';

  App = {

    init: function() {
      App.startTool();
    }
[...] 
```

附加到窗口或其他全局命名空间：

```
 jQuery(function($) {

  'use strict';

  window.App = {  //or namespace.App where namespace can be another global variable.

    init: function() {
      App.startTool();
    }
[...] 
```

你包装它的方式你将无法返回值，但如果它是一个不同的函数，你可以这样做：

```
var App= (function() {

  'use strict';

  var App = {

    init: function() {
      App.startTool();
    }
return App;
}()) 
```

关于函数范围的更多信息：在函数内声明的变量不能从该函数外部看到。从函数内部可以看到在函数外部声明的变量。所以如果你想让一个对象是全局的，你需要在任何函数之外声明它，或者将它设置为已经在函数之外声明的东西的属性。在浏览器中，window 对象默认是全局的。其他环境，如 nodejs 或 rhino 将拥有自己的全局对象。

理解 JS 作用域是如何工作的很重要，因为它是该语言许多更强大功能的基础，尤其是闭包和模块模式。

有些人还提到了命名空间的好处。对于这种情况，这是一个很好的观点。为库或应用程序使用单个全局变量可以避免与您可能正在使用的其他库或脚本发生冲突。然后，您可以将其他变量附加到该全局命名空间变量，并将它们作为该对象的属性进行引用。因此，与其`App.init`直接调用，不如调用`myProgram.App.init()`例如。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:58:02.520

`App`如果要从函数外部使用它，则需要使其全局可用：

```
jQuery(function($) {
    'use strict';

    // attach it to window instead of using var
    window.App = {
        init: function() {
            App.startTool();
        }
    };
}); 
```

# breeze - Breeze WebAPI 能否公开 ODATA

> ID：15225573
> 
> 赞同：1
> 
> 时间：2013-03-05T13:55:13.303
> 
> 标签：breeze

既然 Microsoft 已经为 WebAPI 添加了 ODATA 支持，Breeeze ApiController 是否可以支持 ODATA 客户端进行只读访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:35:13.433

我们正在努力做到这一点。希望我们应该在接下来的两周内发布具有此功能的版本。当它可用时，我会在这里发布。

# java - 如果在睡眠线程上调用 interrupt() 会发生什么？

> ID：15225579
> 
> 赞同：2
> 
> 时间：2013-03-05T13:55:26.287
> 
> 标签：java, multithreading, thread-sleep, interrupted-exception

我有一个线程，`run()`我打电话给`sleep()`. 如果我中断这个线程会发生什么？

```
MyThread extends Thread{
    public void run(){
          try{
             sleep(1000000);
          } catch(InterruptedException e) {//}
    }    
} 
```

我想澄清以下几点：

*   如果线程还没有启动，那么调用`interrupt()`什么都不会做，对吧？
*   如果线程已启动，并且现在正在休眠，`interrupt()`则在休眠时调用将抛出`InterruptedException`; 因此，转到`catch()`然后结束线程，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:13:41.427

1) Thread.interrupt API：*中断一个不活动的线程不需要有任何效果。*

2）在您的示例中，被中断的线程将进入 catch 块然后离开 run 方法并终止

# eclipse - Eclipse Subversive，一次提交，多个修订号

> ID：15225580
> 
> 赞同：3
> 
> 时间：2013-03-05T13:55:26.910
> 
> 标签：eclipse, svn, revision, subversive

我在同一个存储库位置有多个项目。如果我在一次提交中提交对多个项目的更改（全选并提交），Subversive 会为每个项目创建一个修订版。

例如，如果我对 5 个项目中的 17 个文件进行了更改，并且我将它们全部提交，Subversive 将创建 5 个具有相同注释的修订，但我真正想要的是一个具有 17 个文件的修订。

有没有办法用 Subversive 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-07T11:48:23.670

如果我在一次提交中提交多个项目，我也注意到了同样的行为。这显然是由于`JavaHL`svn 连接器而发生的，如此[处](http://www.eclipse.org/forums/index.php/t/3763/)所述。`SVNKit`如果这让您感到困扰，您可以切换到。

注意，仅`JavaHL`允许您使用`Subversive`和其他 svn 客户端，如`Tortoise SVN`可互换的相同文件的提交。这是有关和之间区别的更详细的[SO线程](https://stackoverflow.com/questions/7703377/which-subversive-connector-discovery-to-use)。`JavaHL``SVNKit`

# php - phpsass 返回一个致命错误

> ID：15225581
> 
> 赞同：2
> 
> 时间：2013-03-05T13:55:34.123
> 
> 标签：php, sass

我正在使用一个非常简单的代码来测试 phpsass

```
$sass = new SassParser();
$c = file_get_contents('/_www/_projects/cdn/public_html/test/test.sass');
$css = $sass->toCss($c); 
```

sass 文件非常基础：

```
$blue: #3bbfce;
$margin: 16px;

table.hl {
  margin: 2em 0;
  td.ln {
    text-align: right;
  }
}

li {
  font: {
    family: serif;
    weight: bold;
    size: 1.2em;
  }
}

.content-navigation {
  border-color: $blue;
  color:
    darken($blue, 9%);
}

.border {
  padding: $margin / 2;
  margin: $margin / 2;
  border-color: $blue;
} 
```

我收到以下错误：

> 致命错误：第 201 行 D:\_www\_git\phpsass\script\literals\SassNumber.php 中的未捕获异常 'SassNumberException' 和消息'
> 
> SassNumberException: Number must be a number: Array::26 Source: padding: $margin / 2; 在 D:\_www\_git\phpsass\script\literals\SassNumber.php 第 201 行

如果它可以帮助，也有以下通知之前抛出（我试图改变error_reporting级别，但通知消失当然没有解决问题）：

> 注意：第 25 行 D:\_www\_git\phpsass\SassException.php 中的数组到字符串转换

[如果我在http://www.phpsass.com/try/](http://www.phpsass.com/try/)上对他们的在线 PHP 编译器使用相同的 sass 代码，它会正确编译......我不明白

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T20:14:10.197

看看[SassParser 类](https://github.com/richthegeek/phpsass/blob/master/SassParser.php)。该函数`toCss()`有第二个参数`$isFile`，默认为`true`：

```
public function toCss($source, $isFile = true) {
    return $this->parse($source, $isFile)->render();
} 
```

如果您注意到，您传递的是源而不是文件名。您可以像这样传递文件名：

```
$sass = new SassParser();
$c = '/_www/_projects/cdn/public_html/test/test.sass';
$css = $sass->toCss($c); 
```

或者做你想做的事情，但在 上加上一个额外的参数`toCss()`：

```
$sass = new SassParser();
$c = file_get_contents('/_www/_projects/cdn/public_html/test/test.sass');
$css = $sass->toCss($c, false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T03:27:45.337

您的 sass 文件根本不是真正的 sass；这将是正确的语法，基本上去掉所有尾随分号：

```
$blue: #3bbfce
$margin: 16px

table.hl {
  margin: 2em 0
  td.ln {
    text-align: right
  }
}

li {
  font: {
    family: serif
    weight: bold
    size: 1.2em
  }
}

.content-navigation {
  border-color: $blue
  color
    darken($blue, 9%)
}

.border {
  padding: $margin / 2
  margin: $margin / 2
  border-color: $blue
} 
```

或者，就像您建议的那样：

```
$sass = new SassParser(['syntax' => SassFile::SCSS]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T05:25:13.273

事实上，这是一个纯粹的语法问题。我试图从 sass 代码中删除变量，并意识到它有效 - 效果不佳（`margin: 2em 0`成为`margin: 20`）但不再有错误。

我从[http://sass-lang.com/](http://sass-lang.com/)获取的 sass 片段不是 sass 而是 scss 格式。SassParser类有一个参数叫syntax，默认设置为'sass'，调用时需要设置为scss `$scss = new SassParser(['syntax' => 'scss'])`。

但是我需要解析一个字符串，而不是一个文件，但是如果你传递一个带有 scss 扩展名的文件，你就不需要这个额外的参数。

# html - 带有特殊字符的 HTML 表单输入

> ID：15225583
> 
> 赞同：0
> 
> 时间：2013-03-05T13:55:35.530
> 
> 标签：html, forms

每当我尝试`&amp;`通过 a 中的 HTML 表单提交包含特殊字符的文本时`<textarea>`，都会丢失一些字符。（在 Chrome 浏览器中测试）

到目前为止，我找不到一个表单属性来改变这种行为。

如何强制表单提交输入而不会丢失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:01:13.407

a 的子`textarea`节点是标准文本节点。该元素不执行任何自动 CDATA 魔术（就像 a`script`一样）。

如果你有`<textarea>&amp;</textarea>`，那么这意味着“一个默认值为'一个＆符号'的文本区域元素”。

如果你想`"&amp;"`成为提交的数据，那么你必须`&`用一个字符引用来表示，就像（几乎）在 HTML 中的其他任何地方一样：`<textarea>&amp;amp;</textarea>`

OTOH，如果您正在**键入** `&amp;`并且该`amp;`部分丢失了，那么可能是因为您正在获取该表单控件的值并将其视为*HTML*，而您想将其视为*text*。如何将其视为文本而不是 HTML 取决于您用于处理数据的内容。

# jquery - 向服务器端提交按钮添加警报消息

> ID：15225592
> 
> 赞同：0
> 
> 时间：2013-03-05T13:56:07.157
> 
> 标签：jquery, asp.net, html-email, contact

再会

我正在使用 asp.net 发送电子邮件。当点击“查询”或“提交”按钮时，电子邮件会发送，但我不知道如何让用户确认电子邮件已发送。

我怎么做？

HTML：

```
<tr><td colspan="2"><asp:Button class="btn btn-success" ID="ButtonEnquire" OnClick="Button1_Click"  runat="server" Text="Enquire" /></td></tr> 
```

服务器端代码背后：

使用系统；使用 System.Collections.Generic；使用 System.Linq；使用 System.Web；使用 System.Web.UI；使用 System.Web.UI.WebControls；

```
namespace Contact.Secure
{
    public partial class Corporate : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                PopulateDropDownTypeofCards();
            }
            //DropDownTypeofCards.DataSource = Enums.EnumList.CreateList(typeof(Enums.ContactMethodTypes));
            //DropDownList1.DataTextField = "EnumDescription";
            //DropDownList1.DataValueField = "EnumValue";

            //DropDownList1.DataBind();
        }

        private void PopulateDropDownTypeofCards()
        {
            DropDownTypeofCards.DataSource = Enums.EnumList.CreateList(typeof(Enums.CardTypes));
            DropDownTypeofCards.DataTextField = "EnumDescription";
            DropDownTypeofCards.DataValueField = "EnumValue";

            DropDownTypeofCards.DataBind();
        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            var html = string.Format("<html><head></head><body>{0}<br/>{1}<br />{2}<br />{3}<br />{4}<br />{5}</body></html>", TextBoxName.Text, TextBoxEmailAddress.Text, TextBoxCompanyName.Text, TextBoxCompanyAddress.Text, TextBoxPhoneNumber.Text, TextBoxAmiuntofCardstoSubscribe.Text, DropDownTypeofCards.Text);

            SendEmail(System.Configuration.ConfigurationManager.AppSettings["ContactUsFormSubmission"].ToString(), "Form Submission", html, true, "no-reply@mail.com", true, 587);

        }

        public static void SendEmail(string toEmail, string subject, string body, bool isHTML = false, string fromAddress = null, bool enableSSL = false, int SSLPort = 465, string[] Attachment = null)
        {

            try
            {
                if (bool.Parse(System.Configuration.ConfigurationManager.AppSettings["SendEmail"].ToString()))
                {
                    System.Net.Mail.MailMessage message = new System.Net.Mail.MailMessage();

                    message.To.Add(toEmail);
                    message.Subject = subject;

                    if (string.IsNullOrEmpty(fromAddress) || string.IsNullOrWhiteSpace(fromAddress))
                    {
                        message.From = new System.Net.Mail.MailAddress(System.Configuration.ConfigurationManager.AppSettings["SMTPFromAddress"].ToString());
                    }
                    else
                    {

                        message.From = new System.Net.Mail.MailAddress(fromAddress);
                    }

                    message.IsBodyHtml = isHTML;

                    message.Body = body;

                    if (enableSSL)
                    {

                    }

                    if (Attachment != null)
                    {
                        if (Attachment.Count() > 0)
                        {
                            foreach (string a in Attachment)
                            {
                                System.Net.Mail.Attachment attachment = new System.Net.Mail.Attachment(a);

                                message.Attachments.Add(attachment);
                            }
                        }
                    }
                    System.Net.Mail.SmtpClient smtp;
                    if (enableSSL)
                    {
                        smtp = new System.Net.Mail.SmtpClient(System.Configuration.ConfigurationManager.AppSettings["SMTPServer"].ToString(), SSLPort);
                        smtp.UseDefaultCredentials = false;
                    }
                    else
                    {
                        smtp = new System.Net.Mail.SmtpClient(System.Configuration.ConfigurationManager.AppSettings["SMTPServer"].ToString(), SSLPort);
                        smtp.UseDefaultCredentials = false;
                    }

                    smtp.Credentials = new System.Net.NetworkCredential(System.Configuration.ConfigurationManager.AppSettings["SMTPUser"].ToString(), System.Configuration.ConfigurationManager.AppSettings["SMTPPassword"].ToString());

                    smtp.EnableSsl = enableSSL;

                    smtp.Timeout = 60000;

                    try
                    {
                        smtp.Send(message);
                    }
                    catch
                    {
                        throw;
                    }
                }
            }
            catch (Exception)
            {
                throw;
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:04:59.567

您可以将此代码添加到发送电子邮件的方法中，成功发送邮件

```
var message = "Email has been sent";

string script = "<script language=\"javascript\"  type=\"text/javascript\">;alert('" + message + "');</script>";

ScriptManager.RegisterStartupScript(Page, this.GetType(), "AlertMessage", script, false); 
```

它将在您的消息中显示 javascript 警报。

# php - 用数组中的数据替换 PHP 变量

> ID：15225594
> 
> 赞同：0
> 
> 时间：2013-03-05T13:56:19.060
> 
> 标签：php, arrays, replace

所以我得到的是：这个数组（$errors）例如：

```
'F7000' => 'Undefined Fraud',
'V5000' => 'Undefined System',
'A0000' => 'Undefined Approved',
'V6110' => 'Invalid ProcessRequest Number',
.............etc lots more codes. 
```

现在我正在做一些代码，最后我得到了类似的东西：

```
$message = $result->ResponseMessage = 'V6110'; 
```

现在，我想要做的是向用户显示比 V6110 更充分的消息我该怎么做，所以可以说我得到类似的东西

```
$message = 'Invalid ProcessRequest Number';
print $message; 
```

这将显示用户 Invalid ProcessRequest Number ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:58:46.523

PHP 中的所有数组都是所谓的关联数组，因此您可以使用字符串作为数组“索引”：

```
$error=array('F7000' => 'Undefined Fraud',
              'V5000' => 'Undefined System',
              'A0000' => 'Undefined Approved',
              'V6110' => 'Invalid ProcessRequest Number', '...so on');

$errorNo='V6110';    
$message = $error[$errorNo]; // will return you 'Invalid ProcessRequest Number'
if($message=='')
   $message = "Your Default Error Message";
print $message; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:58:29.897

```
$errors = array (
    'F7000' => 'Undefined Fraud',
    'V5000' => 'Undefined System',
    'A0000' => 'Undefined Approved',
    'V6110' => 'Invalid ProcessRequest Number',
    ...);
$message = 'V6110';
$message = $errors [$message];
echo $message; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T13:58:57.717

```
// show V6110 message
echo $errors['V6110']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T13:59:14.830

```
$errorMsg= $errorArray[$result->ResponseMessage]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T13:59:44.987

尝试类似的东西

```
$message = $errors[$result->ResponseMessage]; 
```

# java - else if 逻辑流

> ID：15225610
> 
> 赞同：0
> 
> 时间：2013-03-05T13:56:59.773
> 
> 标签：java

我一直在假设`if ... else if`语句被短路的情况下进行编程。也就是说，如果一个条件满足该`if`语句，则该`else if`语句不会被访问。我的一个程序中最近的行为使这一点受到质疑。下面是代码，它遍历一个数组并检查数组中的每个值是否与其索引 +1 匹配：

```
 int[] boardCopy = this.getBoard();
        int length = boardCopy.length;
        for (int i = 0; i < length; i++) {
            //blank space must be in last position
            if (boardCopy[i] == 0 && i != length -1) return false;
            //out of order if value does not match index + 1 (zero indexed)
            else if (boardCopy[i] != i +1) {
                System.out.println("Out of order: " + boardCopy[i] + ", " + (i+1));
                return false;
            }
        }
        return true; 
```

这是我正在测试的数组：

```
int[] blocks = {1, 2, 3, 4, 5, 6, 7, 8, 0}; 
```

当我创建一个有序的板时（值匹配索引 + 1 并且 0 在最后一个位置），它返回`false`. 我的打印语句显示该`else if`语句正在检查 0 位置，即使`if`语句逻辑已满足。

我对`if/elseif`逻辑流程的整个概念不正确吗？我的代码视图会被打破吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:23:54.667

我建议不要在评论部分讨论这个广告，而是`println`在以下几点添加...

*   `for`循环中的第一行（在你的第一个 if 之前）
*   在第一个之前`return false`- 你显然需要用`{}`

此打印应显示`i`, `boardCopy[i]`,的值`length`

此外，包括一个显示相同的最终`else`块。`println`

识别每个`println`，以便您知道正在打印哪一行（例如前缀`1:` `2:`等）

我很确定输出会很有启发性:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:24:04.023

```
if (boardCopy[i] == 0 && i != length -1) return false;
    //out of order if value does not match index + 1 (zero indexed)
    else if (boardCopy[i] != i +1) {
        System.out.println("Out of order: " + boardCopy[i] + ", " + (i+1));
        return false;
    }
    return true;
} 
```

您在以下位置运行上述代码：

```
int[] blocks = {1, 2, 3, 4, 5, 6, 7, 8, 0}; 
```

这意味着`length = 9`。

现在，当您遍历这些数字时，您的第一个 if 语句将不会阻塞，直到您达到 0。您的 if 语句的第一个条件是`True`。第二个是：`i != length -1`，或者更好的说法是：`i != 8`。`i`当循环到达 0 时，您的值设置为 8。请记住，在第一个循环中，i=0 。因此，您的 if 语句对于您的集合将始终为真`blocks`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T14:24:15.230

您的逻辑有缺陷：如果我运行此代码，它会产生`Out of order: 0, 9`，这是有效的 if-else 逻辑。

在`i == 8`第一个条件评估为假，因为`8 != 9 - 1`是假的。

然后检查 else 子句，因为`board[8] != 9`，你得到“乱序”。

我想你想要

```
 for (int i = 0; i < length; i++) {
        //blank space must be in last position
        if (boardCopy[i] == 0) {
            if (i != length -1) {
                return false;
            }
            continue;   // can be in an else block or omitted
        }
        //out of order if value does not match index + 1 (zero indexed)
        else if (boardCopy[i] != i +1) {
            System.out.println("Out of order: " + boardCopy[i] + ", " + (i+1));
            return false;
        }
    } 
```

# android - 按下 HOME 键后克隆应用程序进程

> ID：15225611
> 
> 赞同：-1
> 
> 时间：2013-03-05T13:57:00.463
> 
> 标签：android

重现错误的操作：

1.  安装 APK（无论是来自[市场](https://play.google.com/store/apps/details?id=net.aviascanner.aviascanner)、eclipse 还是通过 USB 连接）（
2.  做一些事情，即设置城市，开始搜索。
3.  按主页按钮。
4.  打开应用程序启动器菜单。
5.  按 Aviascanner 图标。
6.  在某些情况下（约 5%），系统会在没有选定城市和其他数据的情况下启动应用程序的新干净副本。如果您按 BACK 按钮，您可以看到应用程序的先前副本（因此它适用于一项任务）。

可以在此设备上观看此行为：

1.  三星 Galaxy Tab 2 10.1 操作系统 4.0.4
2.  三星 GT-s6500d 操作系统 2.3.6

我无法在 HTC Wildfire S A510e 中重现它。

您还可以查看重现错误的[youtube 视频](http://youtu.be/pJ844ZmXc6Q)（抱歉质量不好和俄语，但错误非常罕见，很难捕捉到它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:53:33.443

假设第 2 步是通过单击安装后屏幕中的“打开”或通过从 Eclipse 运行应用程序来触发的，那么这是Android[长期存在的问题](https://code.google.com/p/android/issues/detail?id=26658)。

这个问题概述了一些选项：[How to prevent multiple instances of an Activity when it is launch with different intents](https://stackoverflow.com/questions/4341600/how-to-prevent-multiple-instances-of-an-activity-when-it-is-launched-with-differ/)

# zend-framework - Zend_Date 的奇怪行为

> ID：15225615
> 
> 赞同：0
> 
> 时间：2013-03-05T13:57:09.710
> 
> 标签：zend-framework, zend-date

我有这种情况：

```
$date = new Zend_Date();
$date->toString(Zend_Date::DATE_MEDIUM); 
```

*   使用“it”语言环境，此代码输出（例如 04/mar/2013）而不是 dd/MM/yyyy 格式
*   使用“en”语言环境，它输出（例如 2013 年 3 月 4 日）而不是 MM/dd/yyyy 格式

在 Zend Framework 文档中，我可以阅读日期和时间格式（格式因地区而异）

![Zend 日期常数](../Images/91cf0a020341ac4d3958974a4a1e8fe4.png)

**更新**：

```
/**
 * Convert a date from yyyy/mm/dd formatted by the locale setting
 *
 * @param date $dbindata
 * @param $format Zend_date format
 * @return date formatted by the locale setting
 */
static public function formatDateOut($dbindata, $format=Zend_Date::DATE_MEDIUM) {
    if (empty ( $dbindata ))
        return false;

    $locale = Zend_Registry::get('Zend_Locale');
    $date = new Zend_Date($dbindata, "yyyy-MM-dd HH:mm:ss", $locale);

    return $date->get($format);
} 
```

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:04:34.093

我认为您必须使用 Zend_Date 对象的“get()”方法来获取所需的格式。

```
$date = new Zend_Date();
echo $date->get(Zend_Date::DATE_MEDIUM); 
```

# solrj - 无法在 solrj 中获取特定组中的行数

> ID：15225617
> 
> 赞同：0
> 
> 时间：2013-03-05T13:57:22.793
> 
> 标签：solrj

我想获取特定组中包含的行..这是我正在使用的代码..

```
String url = "http://localhost:8983/solr";
SolrServer server = new HttpSolrServer(url);
SolrQuery query = new SolrQuery();
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");

query.setQuery("*:*");  
query.addFilterQuery("sessionStartTime:[2013-02-01T00:00:00Z TO 2013-03-30T24:00:00Z] ");

query.add("facet", "true");
query.add("facet.field","uniqueId");
query.add("facet.field", "sessionStartTime");

query.add("group", "true");
query.add("group.field","uniqueId");

query.add("group.field","sessionStartTime");
query.add("group.main","true");
query.add("group.ngroups","true");
query.add("group.facet","true");

query.setRows(9999);

QueryResponse rs=server.query(query);

System.out.println(rs.getGroupResponse()); 
```

我想要的是每组的计数（每组中的条目数）。但是 rs.getGroupResponse() 给了我空值...

帮助表示赞赏。

# asp.net - 从服务器下载文件

> ID：15225620
> 
> 赞同：0
> 
> 时间：2013-03-05T13:57:25.777
> 
> 标签：asp.net, stream, download, bytearray

目前我已经以二进制格式存储在任何类型的 BD 文件中。我在文件上传中做的过程如下：

1.  拖放文件和收集被发送到服务器。
2.  在服务器中收集每个文件的流。
3.  每个流都转换为 byte()
4.  它almanancena BD 中的Byte() 正确

现在，是时候下载文件了，它包括在 Byte() 中从数据库中获取数据，并直接从客户那里下载。

问题是我使用的方法不会抛出任何下载窗口，而且我没有犯这个错误。可能的帮助的代理代码。

```
Protected Sub grdDocumentoByExp_RowCommand(sender As Object, e As GridViewCommandEventArgs)
    If e.CommandName = "cmdDownload" Then
        Dim context As System.Web.HttpContext = System.Web.HttpContext.Current
        Dim lFileName As String = e.CommandName
        Dim lFile() As Byte = GetImageArrayBy_docID(e.CommandArgument)

        Dim ms As Stream = New MemoryStream(lFile, 0, lFile.Length)
        ms.Position = 0
        ms.Close()

        With context
            .Response.Clear()
            .Response.ClearHeaders()
            .Response.ClearContent()

            .Response.ContentType = "image/jpeg"
            .Response.AddHeader("content-disposition", "attachment;filename=" & "Fichero1.jpg")
            .Response.AddHeader("content-length", lFile.Length)
            .Response.BinaryWrite(lFile)
            .Response.End()
        End With
    End If
End Sub 
```

**思路如下**：一个网格有一列运行**一个命令，运行这个代码块**。在其中，**从数据库中收集 byte ()（内容似乎是正确的），传输到 Stream并作为****BinaryWrite**通过当前上下文发送，但从不在浏览器中运行任何内容。

使用的客户端是 Firefox 和 Chrome，但它们都没有任何反应。表示我要去的是我们看到的**MIME**文件，在这种情况下是 jpeg，尽管还有许多其他类型。

谁能知道发生了什么或者我做错了什么？

非常感谢.tiendo。附上代码以获得可能的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:01:30.613

Dim ms As Stream = New MemoryStream(lFile, 0, lFile.Length)

将长度转换为 (int)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:09:54.090

问题不是类型的转换，因为 lFile.Lenght 它是 INT。问题在于它启动到 UpdatePanel 中的方法并且没有正确启动。

使其他页面中的下载正常。

# php - 如何将变量从 javascript 发送到 PHP

> ID：15225623
> 
> 赞同：0
> 
> 时间：2013-03-05T13:57:29.503
> 
> 标签：php, javascript

我想知道如何将变量从 javascript 发送到 php，这样我就可以创建一个包含动态行总和的变量。

更具体：当我在搜索框中搜索时，我想获取行数（1 匹配为 1 行，2 匹配为 2 行，依此类推

我试图实现这一点： document.getElementById("i1").value = allCells.length; 所以我后来可以调用php，但我没有工作。

这是我的 javascript，顺便说一下 javascript 可以完美运行。

```
<script language="javascript" type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script> 
<script language="javascript" type="text/javascript">  
  $(document).ready(function() 
  {
    $('#search').keyup(function() {
      searchTable($(this).val());
    });
  });
  function searchTable(inputVal) 
  {
    var table = $('.table');
    table.find('tr').each(function(index, row) 
    {
      var allCells = $(row).find('td');
      if (allCells.length > 0) {
        var found = false;
        allCells.each(function(index, td) 
        {
          var regExp = new RegExp(inputVal, 'i');
          if (regExp.test($(td).text())) 
          {
            found = true;
            return false;
            document.getElementById("i1").value = allCells.length;
          }
        });
        if (found == true)
          $(row).show();
        else
          $(row).hide();
      }
    });
  }

  $(function()
  {
    $('#table a').click(function(e) 
    {
      e.preventDefault();
      $('#result').val($(this).closest('tr').find('td:first').text());
    });
  });
</script> 
```

我想在我的表头中吐出她的动态总和。

```
 <h3>Total: (<?php print_r($_GET["i1"])?>)  </h3> 
```

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:01:52.270

您可能从未了解过 javascript 和 php 之间的区别

Javascript 是客户端的，这意味着一切都由您的本地系统处理。PHP 是服务器端的，这意味着所有内容都由服务器处理并解析为 html。

您不能像以前那样将值从 javascript 发送到普通的 php 中。但是，您可以发送帖子或访问相同的脚本并让它重新加载脚本的一部分

[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:08:36.793

你不是第一个想要这个的人，也不是第一个被告知这不可能像你想象的那样的人。当你浏览到一个 PHP 页面时，事情基本上是这样的：

1.  浏览器向服务器发送 HTTP 请求
2.  服务器确定要发送到浏览器的页面
3.  服务器发现你想要一个 PHP 页面
4.  **服务器执行 PHP**
5.  服务器将 PHP 返回的内容发送到浏览器
6.  浏览器不了解 PHP 并显示 HTML
7.  **浏览器执行 Javascript。**

现在重要的部分是浏览器不知道 PHP 是什么，但可以执行 JavaScript，而服务器不知道 JavaScript 是什么（为简单起见）但可以执行 PHP。**底线：两者之间很难沟通，**因为它们在不同的地方执行。您很可能想要使用 AJAX，所以这里有一个超级简单的示例：

我们要获取的 PHP 页面：

```
<?
    // We're on the server
    // We're going to output something:
    echo "Yay! You can see me!"; // So the browser sees only "Yay! You can see me!" (without quotes).
?> 
```

用于获取 PHP 页面的 JavaScript（使用 jQuery）：

```
$("#anElementID").load("thePHPPageWeWantToFetch.php"); // It's that simple! The element with the ID #anElementID now contains "Yay! You can see me!" (without quotes). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:12:23.693

我也建议使用 AJAX 或其他东西将您的 javascript 值传递给 PHP。您可以创建一个 AJAX 调用，从您的 javascript 添加数据，并在您的 PHP 文件中捕获数据。

```
var value = "Jan";
$.ajax({
        url: "/form.php",
        type: "post",
        data: "name=" + value
    }); 
```

在您的 PHP 文件中，您可以执行以下操作：

```
<?php
$catchedName = $_POST["name"];
?> 
```

# sql - 仅选择 sql (postgresql) 中的特定结果

> ID：15225628
> 
> 赞同：0
> 
> 时间：2013-03-05T13:57:34.883
> 
> 标签：sql, postgresql

```
SELECT id, name::tsvector @@ 'substring1 & substring2'::tsquery
FROM table 
```

我有这个。此查询的结果有 2 个字段：id、?column? ? 列？字段值为真或假。我怎样才能得到真正的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:18:33.820

```
SELECT * FROM (
  SELECT id, name::tsvector @@ 'substring1 & substring2'::tsquery
  FROM table
) AS search
WHERE column = 't' 
```

您还可以使用 WITH：[http ://www.postgresql.org/docs/9.1/static/queries-with.html](http://www.postgresql.org/docs/9.1/static/queries-with.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:00:50.897

使用 WHERE 子句....（如果我正确理解您的需求）

WHERE 条件 = 真

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:06:03.447

添加 WHERE 子句来填充此值。像这样的东西。

```
SELECT id, name::tsvector @@ 'substring1 & substring2'::tsquery FROM table WHERE ?column? = 1 (or True) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T14:11:42.707

使用别名来引用您的列

```
SELECT id, name::tsvector @@ 'substring1 & substring2'::tsquery AS condition
FROM table
WHERE condition = true 
```

# php - 如何让用户使用他们的 Facebook 帐户登录我的网站？

> ID：15225629
> 
> 赞同：0
> 
> 时间：2013-03-05T13:57:40.410
> 
> 标签：php, facebook, login

我正在使用 SDK php 让用户使用他们的 Facebook 帐户登录我的网站。我正在关注 SDK 示例。当我试图获取登录的用户 ID 时，它返回 0：

```
$id = $facebook->getUser(); 
```

你能告诉我有什么问题吗，以及如何使用 php SDK 使示例工作

这是示例的代码：

```
<?php
$config = FacebookConfig::getConfig();
$facebook = new Facebook( $config );
$user = $facebook->getUser();
Facebook::$CURL_OPTS[ CURLOPT_SSL_VERIFYPEER ] = false;

if ( $user ) {
    try {
        $user_profile = $facebook->api( '/me' );
        $logoutUrl = $facebook->getLogoutUrl();
    }
    catch ( FacebookApiException $e ) {
        error_log( $e );
        $user = null;
    }
} else {
    try {

        $loginUrl = $facebook->getLoginUrl( array(
             "scope" => "email,user_education_history,user_work_history",
            "redirect_uri" => "http://localhost:8888/www/index.php" 
        ) );
        $user = $facebook->getUser();
        $user_profile = $facebook->api( '/me' );
        $userProf = $facebook->api( "/$user" );
        echo $user;
        echo $user_profile;
    }
    catch ( FacebookApiException $e ) {
        $user = null;
        echo "expetion in login";

    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:35:19.023

您必须将用户重定向到`$loginUrl`！尝试这个：

```
<?php
$config = FacebookConfig::getConfig();
$facebook = new Facebook( $config );
$user = $facebook->getUser();
Facebook::$CURL_OPTS[ CURLOPT_SSL_VERIFYPEER ] = false;

if ( $user ) {
    try {
        $user_profile = $facebook->api( '/me' );
        var_dump($user_profile);
        $logoutUrl = $facebook->getLogoutUrl();
    }
    catch ( FacebookApiException $e ) {
        error_log( $e );
        $user = null;
    }
} else {
    try {
        $loginUrl = $facebook->getLoginUrl( array(
             "scope" => "email,user_education_history,user_work_history",
            "redirect_uri" => "http://localhost/facebook/index.php" 
        ) );
        header('Location: '.$loginUrl);
    }
    catch ( FacebookApiException $e ) {
        $user = null;
        echo "exception in login";
    }
} 
```

# php - 从 php 传递的 json 数组中获取 key => value

> ID：15225630
> 
> 赞同：1
> 
> 时间：2013-03-05T13:57:41.130
> 
> 标签：php, javascript, jquery, arrays, json

我正在尝试从 PHP 获取一个数组并使用 jQuery 进一步操作它。在我的 PHP 文件中`echo json_encode($data)`，当我在 jQuery 的响应中添加警报时，我得到：

```
[
    {
        "CustomerID": "C43242421",
        "UserID": "432421421",
        "Customer": "rqewrqwreeqwr",
        "Add1": "rqwerqwreqwrqwrqwr",
        "Add2": "&nbsp;",
        "Add3": "&nbsp;",
        "Phone": "4131231",
        "Fax": "532442141",
        "Contact": "reqwrqwrw",
        "Email": "gfdgdsg",
        "PaymentTerm": null,
        "Country": "3231",
        "City": "111",
        "Zip": "&nbsp;"
    }
] 
```

，这是一个有效的 json 数组。现在我尝试进一步做的是将这些对作为键 => 值，就像我在 php 中的关联数组中一样。

```
$.post("templates/test.php",
    {data: query,
     cond: $(this).text(),
     action: 'select'
     },
function(res) {
    alert(res) //outputs what i pasted above
    $.each($.parseJSON(res), function(key, value) {
        alert(key + value);
        //this outputs: 0[object Object]
}); 
```

删除`$.parseJSON`上面的函数会给我一个`invalid 'in' operand e on jquery.min.js(line 3)`Firebug 错误日志。你能帮我解决我的麻烦吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T14:00:25.827

尝试：

```
var r = $.parseJSON(res);

$.each(r[0], function(key, value) {
        alert(key + value);

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:01:58.540

的结果`$.parseJSON(res)`是一个数组，包含一个元素（一个对象）。当您迭代该数组时（使用`$.each`），`value`表示存储在数组当前索引处的整个对象。您需要遍历该对象以输出其属性：

```
$.each($.parseJSON(res)[0], function(key, value) {
    alert(key + ' = ' + value);
}); 
```

如果您有一个包含多个对象的数组，则此更通用的代码应输出所有对象的键值对：

```
$.each($.parseJSON(res), function(index, arrayObject) {
    $.each(arrayObject, function(key, value) {
        alert(key + ' = ' + value);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:00:49.003

```
res = $.parseJSON(res);

for (var i = 0; l = res.length; i < l; i++) {
   data = res[i];
   customer = data.Customer; 
```

}

你有一个对象数组。您可以像上面的代码一样遍历对象数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T14:03:18.573

试试这个：

```
$.getJSON('your-json-string-file.php', function (data) {

  $.each(data, function(key, val) {
    alert(key +'=>'+ val)
  });

}); 
```

希望对你有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T14:03:45.373

您可以从 json 中获取某种对象：

```
function parse_json(res)
{
  try{
    return eval('(' + response + ')');
  }
  catch(e){
    // invalid json
  }
} 
```

# mamp - 在 osx 10.8 上删除苹果服务器应用程序

> ID：15225634
> 
> 赞同：0
> 
> 时间：2013-03-05T13:57:57.493
> 
> 标签：mamp, rack-pow, server-application

我通常使用 ruby​​ 进行开发，并使用 pow.cx 为我的开发站点提供服务。对于一些客户工作，我必须使用 php 和 drupal。我在 apache / php / Mamp 和我的 pow 服务器之间有很多设置问题和不兼容性。

我已经尝试按照那里提到的那样进行设置： [https ://github.com/37signals/pow/wiki/Running-Pow-with-Apache](https://github.com/37signals/pow/wiki/Running-Pow-with-Apache)

当我将 Mamp 留在端口 888 上时，一切都很好，但是当我想在端口 80 上运行 mamp 和 pow 时，我开始遇到常规问题。

为了尝试解决这个问题，我安装了 Apple Server 应用程序。我现在后悔了。

如果我在服务器应用程序中打开网站。服务器接管我的 pow url。如果我关闭网站，我根本无法访问 pow url（说我必须打开网站）。

如果我完全删除Server应用程序并重新启动，我可以再次访问Pow，但Mamp拒绝启动apache，说它无法解析Server App设置的域名。

那么有没有办法完全删除和清理服务器应用程序设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T11:11:25.273

我不确定删除 Apple Server 应用程序最干净的方法是什么。但至少我设法让 Mamp 再次工作。

我没有在我的 /etc/hosts 文件中使用本地机器的当前名称添加别名

`127.0.0.1 my-lovely-mac`

现在 Mamp Apache 又开心起来了

# jsp - JSP - URL 和参数错误记录

> ID：15225637
> 
> 赞同：1
> 
> 时间：2013-03-05T13:58:06.090
> 
> 标签：jsp, logging

是否可以记录正在访问的确切 URL 和传递的参数？我从使用相同 jsp 文件名的多个站点记录了一系列错误。我似乎无法在我的开发盒上复制服务器错误，因此我想尽可能多地记录以尝试缩小问题范围。

我得到的错误是：

```
 01-Mar-2013 21:37:58 org.apache.catalina.core.ApplicationDispatcher invoke
    SEVERE: Servlet.service() for servlet jsp threw exception
    java.lang.NullPointerException
    at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:991)
    at java.lang.Double.valueOf(Double.java:475)
    at org.apache.jsp.product_jsp._jspService(product_jsp.java:212) 
```

如果我能弄清楚正在尝试访问的内容，我可以解决该错误，如果这有意义的话。

任何帮助将非常感激 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:34:18.030

您可以像这样定义错误处理程序页面`web.xml`：

```
<error-page>
    <exception-type>java.lang.Exception</exception-type>
    <location>/...</location>
</error-page> 
```

并在该页面/servlet 记录原始请求信息。它应该是可用的，因为根据 Servlet 规范

> 如果错误处理程序的位置是 servlet 或 JSP 页面：
> 
> ■ 容器创建的原始解包请求和响应对象被传递到servlet 或JSP 页面。
> 
> ■ 请求路径和属性的设置就像对错误资源的RequestDispatcher.forward 已执行一样。

因此，您可以使用[getRequestURL()](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRequestURL%28%29)或其他方法或任何请求属性`javax.servlet.error.status_code`, `javax.servlet.error.exception_type`, `javax.servlet.error.message`, `javax.servlet.error.exception`, `javax.servlet.error.request_uri`, `javax.servlet.error.servlet_name`。

获取所有需要的信息来记录。

# java - Files.copy 重命名文件

> ID：15225642
> 
> 赞同：0
> 
> 时间：2013-03-05T13:58:18.750
> 
> 标签：java

希望你能帮我看一些代码：

```
public void Copy(Path sourcepath,
        Path targetpath) throws IOException {

    DateFormat dateFormat = new SimpleDateFormat("yyyymmdd");

    File origfile = targetpath.toFile(); // Changes targetpath to file
    String name = origfile.getName(); // Gets the name of the file to be updated
    File file1 = new File(targetpath.toString() + "." + dateFormat.format(Calendar.getInstance().getTime())); //Create a new file instance with the name of the old file + date
    origfile.renameTo(file1); //Rename the original file
    origfile.createNewFile(); //Backup the original file
    Files.delete(targetpath); //Delete the original file
    Files.copy(sourcepath, targetpath);
} 
```

现在一切正常，备份工作和复制工作。我的初衷是将正在复制的文件重命名为正在备份的文件。（因此字符串名称 = origfile.getName();

这是我的代码：

```
File file2 = new File(name);
File srcfile = sourcepath.toFile();
srcfile.renameTo(file2); 
```

现在，这在一定程度上起作用了，过了一段时间我开始收到 IOException 错误，所以经过几个小时的努力。我放弃了，只是删除了重命名部分。

瞧，它在复制时仍然重命名文件。

现在我的问题是：Files.copy 能做到吗？这里发生了一些神秘的事情吗？它完全符合我的要求，但我很困惑。为什么我的代码有效？

是的，我想知道，以防它中断或停止工作。我不能有什么工作，不知道为什么！

编辑：

抱歉发帖时有点着急，让我把我的问题说得更清楚一点：

我的意图是将我的源路径重命名为正在备份的文件的原始名称。我有重命名它的代码，但它抛出了一个 IOException，所以我删除了它。我只使用了 Files.Copy，所以我假设 sourcepath 会保留它的原始值，并且只复制我拥有的 for 循环中的每个实例。但是不，它会完美地重命名为要备份的每个文件的原始名称。在哪里以及如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T09:00:52.417

弄清楚了！哇！

因为我将目标路径转换为文件，备份并*删除了它，*所以发生了这种情况：

当我使用 Files.copy(srcpath,targetpath) 时，srcpath 取了目标路径的名称（文件被删除但原始路径仍然存在，因为它没有发生任何事情）

所以基本上：两个路径被发送到我的方法，我的方法创建了一个备份文件并删除了原始路径的原始文件（不是路径）。（这将是 c:\work\testorigfile 例如）

因此，当我使用 Files.copy(srcpath,targetpath) 时，它完全按照我的意愿工作。答案在 javadoc 中（在某种意义上），所以感谢所有提示！

# java - ServletContextAttributeListener 中的 BlockingQueue

> ID：15225662
> 
> 赞同：2
> 
> 时间：2013-03-05T13:58:55.277
> 
> 标签：java, servlets, blockingqueue

我正在尝试将数据（从在 ServletContextListener 中启动的线程不断向队列中添加数据）传输到 ServletContextAttributeListener。

队列中的数据需要传递给连接的客户端，这些客户端在“attributeReplaced”上得到通知。

数据包含在 BlockingQueue 中。

但是我有点困惑；如果我通过调用将 BlockingQueue 放置在上下文中

```
private BlockingQueue<String> queue = new LinkedBlockingQueue<String>();
//..
event.getServletContext().setAttribute("serialPortData", queue);
//.. 
```

**问题**：上下文是否包含此队列的副本或指针？

因为如果它只复制队列，那么将队列添加到上下文是没有意义的，对吧？或者你会用另一种方式解决这个问题吗？

托马斯。

# c# - SQLite SUM 日期时间

> ID：15225673
> 
> 赞同：1
> 
> 时间：2013-03-05T13:59:20.353
> 
> 标签：c#, sqlite, system.data.sqlite

我有一个带有行和时间值的数据库。我想要那个时间值的总和（一般来说，格式是 %H:%M）。

我使用了这样的 SUM 值：

```
SELECT SUM(n_hores) FROM table; 
```

但只有我得到 0.0。

我怎么能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:17:12.783

格式中的时间值`hh:mm`是字符串，字符串不能有意义地求和。

您应该将这些时间值转换为一个数字（`strftime(%s)`返回自 1970-01-01 以来的秒数，因此您必须从一天的开始减去偏移量才能获得与您的时间值对应的秒数）：

```
SELECT sum(strftime('%s', MyTime) - strftime('%s', '00:00')) FROM MyTable 
```

您还可以将此秒数转换回时间字符串（`time()`以`hh:mm:ss`格式返回）：

```
SELECT time(sum(strftime('%s', MyTime) - strftime('%s', '00:00'))) FROM MyTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:02:10.367

您最好通过获取“自上一个纪元又名（现代纪元）以来的毫秒数”来减去两个日期。在 SQLite 中应该有一个函数，它返回自上一个 epoch 以来的毫秒数。一旦你发现了这一点，解决方案应该是简单的减法和转换为秒、分钟和/或小时。

# bison - PCYACC 期望关键字等效

> ID：15225675
> 
> 赞同：0
> 
> 时间：2013-03-05T13:59:24.707
> 
> 标签：bison, yacc, lalr

PCYACC 中是否有相当于 BISON 的[期望声明](http://www.gnu.org/software/bison/manual/html_node/Expect-Decl.html)的关键字：

```
%expect NUMBER 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:25:02.140

[我在PCYACC Program Manual](http://www.abxsoft.com/pcyacc.htm)中没有看到任何相应的命令行选项或语言功能。

# iphone - iOS 推送通知 - 更新徽章而不发出警报？

> ID：15225677
> 
> 赞同：15
> 
> 时间：2013-03-05T13:59:29.317
> 
> 标签：iphone, ios, ipad, push-notification, apple-push-notifications

有没有办法在不显示警报或打开应用程序的情况下更新徽章中的数字？

我正在编写一个应始终在图标徽章中显示当前未读消息数量的应用程序，但我想这样做而不向用户显示任何警报。

我正在为 iOS 5.0+ 开发。

编辑：为了更清楚，我在询问一种**在应用程序未运行时**执行此操作的方法。我希望服务器在不显示警报的情况下推送新的徽章编号。这可能吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-05T15:31:20.717

你能行的。可以在没有警报的情况下发送推送通知。您甚至可以将您的应用程序注册为标记通知，在这种情况下，提供程序服务器甚至无法发送警报或声音。

> 通知负载
> 
> 每个推送通知都带有一个有效负载。有效负载指定如何提醒用户注意等待下载到客户端应用程序的数据。通知有效负载允许的最大大小为 256 字节；Apple Push Notification Service 拒绝任何超过此限制的通知。请记住，通知的传递是“尽力而为”，不能保证。
> 
> 对于每个通知，提供者必须编写一个严格遵守 RFC 4627 的 JSON 字典对象。该字典必须包含另一个由键 aps 标识的字典。aps 字典包含一个或多个指定以下操作的属性：
> 
> 向用户显示的警报消息
> 
> 用于标记应用程序图标的数字
> 
> 播放的声音

请注意，它说`one or more of the properties`. 警报属​​性是可选的。您甚至可以发送带有空`aps`字典的通知（即仅发送自定义属性）。

> 示例 5\. 以下示例显示了一个空的 aps 字典；因为缺少徽章属性，所以应用程序图标上显示的任何当前徽章编号都将被删除。acme2 自定义属性是一个包含两个整数的数组。

```
{

    "aps" : {

    },

    "acme2" : [ 5,  8 ]

} 
```

用户将看到的唯一警报是询问他/她是否允许推送通知的警报。该警报只会在安装后首次启动应用程序时显示。

在此示例中，您注册到非警报通知（仅限徽章和声音）：

```
Listing 2-3  Registering for remote notifications

- (void)applicationDidFinishLaunching:(UIApplication *)app {

   // other setup tasks here....

    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:(UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)];

}

// Delegation methods

- (void)application:(UIApplication *)app didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)devToken {

    const void *devTokenBytes = [devToken bytes];

    self.registered = YES;

    [self sendProviderDeviceToken:devTokenBytes]; // custom method

}

- (void)application:(UIApplication *)app didFailToRegisterForRemoteNotificationsWithError:(NSError *)err {

    NSLog(@"Error in registration. Error: %@", err);

} 
```

所有报价均来自 Apple 本地和推送通知编程指南。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T14:04:01.740

您应该`applicationIconBadgeNumber`用于在本地处理您的应用徽章编号

```
[UIApplication sharedApplication].applicationIconBadgeNumber = number_of_notifications; 
```

从远程通知中添加徽章计数器，我认为没有警报是不可能的。你应该阅读[APN Service](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html)，在你的情况下你可能会注册`UIRemoteNotificationTypeBadge`你应该阅读[Local & Push Notification Programming guide](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T14:03:11.787

您可以使用

```
[UIApplication sharedApplication].applicationIconBadgeNumber = aNumber; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T14:06:44.257

```
-(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo

{

    [[UIApplication sharedApplication] setApplicationIconBadgeNumber:0];
} 
```

使用这种方法....这将帮助你。

# javascript - 按向上/向下按钮更改焦点

> ID：15225680
> 
> 赞同：0
> 
> 时间：2013-03-05T13:59:42.833
> 
> 标签：javascript, html

每个人！

例如，我有 div 标签

```
<style>
  #DistrictStyle li:hover { background-color: rgb(129,171,242);}
</style>
<div id="DistrictList" style=  "display: none;
                                      z-index: 500;
                                      list-style-type: none;
                                      border: 1px solid rgb(129,171,242);
                                      background-color: white;
                                      max-height:150px;
                                      overflow-y:scroll; position:absolute;
                                      left: 208px; top: 135px; "><ul id="DistrictStyle"></ul></div> 
```

所以，现在鼠标点击这个列表的记录，我填写了几个字段。我需要通过向上/向下按钮通过列表导航。

```
<li onclick='fill_distr(" + x + ");'>" + "</li>"; 
```

我怎样才能做到这一点？我可以只使用纯 JS 还是应该使用 jQuery？我想我应该捕捉鼠标焦点事件并按“输入”。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:10:51.840

你可以走两条路。JQuery 允许简单的事件处理。查看所有功能的[文档](http://api.jquery.com/)。

注意：不确定您是否使用 HTML5，但如果是这种情况，您不应该在 html 元素中使用样式属性。只是说:)

编辑：只是为了指出你正确的方向。[event.which](http://api.jquery.com/event.which/)应该为你做的:)

# c#-4.0 - 在 C# 中将小数转换为 BigInteger 类型

> ID：15225683
> 
> 赞同：1
> 
> 时间：2013-03-05T13:59:50.853
> 
> 标签：c#-4.0, biginteger

我需要将小数转换为 BigInteger 类型，但结果为零。考虑以下代码：

```
BigInteger x = new BigInteger(0.6);
var res = BigInteger.Pow(x, 10) / Factorial(30); 
```

在第一行 0.6 转换为 BigInteger 结果为零并且整个代码返回错误的结果。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:06:55.973

的整数部分`0.6`是`0`所以结果是正确的。

如果您想使用`Math.Round()`转换为在您的情况下为`1`.

```
BigInteger x = new BigInteger(Math.Round(0.6)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:04:21.880

来自：http: [//msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)

“浮点值在分配给 BigInteger 之前会被截断。” 因此，请参阅以下代码片段（来自源代码）：

> ```
> BigInteger bigIntFromDouble = new BigInteger(179032.6541);
> Console.WriteLine(bigIntFromDouble);
> // The example displays the following output: 
> //   179032 
> ```

结果，`BigInteger x = new BigInteger(0.6);`由于截断...这是预期的行为，您的结果为零。

# php - 上传带有阿拉伯文件名的文件

> ID：15225687
> 
> 赞同：1
> 
> 时间：2013-03-05T13:59:56.233
> 
> 标签：php, file, upload, arabic

我正在尝试使用 php 代码上传具有阿拉伯名称的文件

```
echo move_uploaded_file($_FILES["uploadfile"]["tmp_name"],"images/artimgs/".$_FILES["uploadfile"]["name"]); 
```

但是上传文件时“artimgs”文件夹中的文件名如下所示：طط³ط§ظ†.jpg

我希望上传后的文件与初始文件的阿拉伯语名称相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T09:32:22.533

在上传文件之前，我尝试对文件名进行编码，如下所示：`$imgn=utf8_encode($_FILES["uploadfile"]["name"]); $imgtmp=utf8_encode($_FILES["uploadfile"]["tmp_name"]); echo move_uploaded_file($imgtmp,"images/artimgs/".$imgn);`

但我有同样的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T09:52:46.773

这可能会有所帮助：

```
/* PHP Internal Encoding */
define('PHP_ENC', 'UTF-8');
mb_internal_encoding(PHP_ENC);
ini_set('default_charset', PHP_ENC); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T08:40:58.847

**按原样回答您的问题：**

可以查看表单页面编码，可能是windows-1256，提交表单的页面和显示文件名的页面都必须是utf-8。

**说出我对代码的看法：**

您可以按照 [Marc B] 的建议指定自己的文件名。

# php - 声纳和 PHPMD：如何排除目录

> ID：15225688
> 
> 赞同：2
> 
> 时间：2013-03-05T13:59:56.810
> 
> 标签：php, static, sonarqube, analysis, phpmd

我正在尝试声纳，我在一个 php 项目中遇到了一些问题。

我必须做多模块才能至少获得 php 和 js 分析。

这是我的声纳项目.properties：

sonar.projectKey=xxxx sonar.projectName=xxxx sonar.projectVersion=1.0

```
sonar.sourceEncoding=UTF-8
sonar.sources=
sonar.language=php
sonar.exclusions=htdocs/libraries/externals/**
sonar.phpCodesniffer.skip=true

sonar.modules=php-module,js-module

# PHP module
php-module.sonar.projectName=PHP Module
php-module.sonar.language=php
php-module.sonar.sources=
php-module.sonar.projectBaseDir=htdocs
php-module.sonar.exclusions=libraries/externals/**

# JavaScript module
js-module.sonar.projectName=JavaScript Module
js-module.sonar.language=js
js-module.sonar.sources=js
js-module.sonar.projectBaseDir=htdocs 
```

但是当我运行 sonar-runner 时，我得到了这个错误：

```
Exception in thread "main" org.sonar.runner.RunnerException: org.sonar.api.utils.SonarException: PHPMD execution failed with returned code '1'. Please check the documentation of PHPMD to know more about this failure 
```

PHPMD 错误是

```
 The parser has reached an invalid state near line "32" in file "/var/www/vhosts/dev3.xxxx.local/htdocs/libraries/externals/AvaTax4PHP/classes/ATConfig.class.php". Please check the following conditions: The keyword "parent" was used as type hint but the class "ATConfig" does not declare a parent. 
```

**但是，如果我排除了项目和模块中的目录库，为什么会发生这种情况？**

我是否必须向 PHPMD 指定另一个排除列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-19T19:13:48.053

对于 PHPMD（例如 PHP CodeSniffer），您必须指定一个单独的排除模式。您可以为此使用 PHPMD 的`--exclude`参数。

花了我一段时间才弄清楚，但您可以在`sonar-project.properties`文件中使用以下设置来设置 PHPMD 的命令行参数：

```
sonar.phpPmd.argumentLine=--exclude libraries/externals 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T12:39:25.090

您可以参考此常见问题解答条目以了解如何实现您的目标：[http ://docs.codehaus.org/display/SONAR/PHP+Plugin+FAQ#PHPPluginFAQ-HowdoIpreventexternaltoolsfromanalyzingsomesourcefiles](http://docs.codehaus.org/display/SONAR/PHP+Plugin+FAQ#PHPPluginFAQ-HowdoIpreventexternaltoolsfromanalyzingsomesourcefiles)

顺便说一句，您应该声明：

```
php-module.sonar.sources=. 
```

， 代替：

```
php-module.sonar.sources= 
```

# html - 将样式表链接到 1 个 Div 并且只有 1 个 Div

> ID：15225689
> 
> 赞同：2
> 
> 时间：2013-03-05T14:00:04.807
> 
> 标签：html, css, stylesheet

我正在为一个网站构建一个 html 编辑器。我需要预览用户刚刚键入的 HTML 在目标站点中的外观，因此我需要加载该站点的样式表，但我只希望这些样式表影响 Div 中的内容。

我无权编辑样式表以使其特定于该 div。

所以我的代码需要按如下方式工作：

```
<div style="/styles/public1.css">
New HTML
</div> 
```

我可以在 div 之外加载样式表，但这会覆盖我自己的网站样式表，所以不好。

有没有办法隔离样式表以影响我的 div 中的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:03:57.403

通过将“样式”属性指向文件位置来加载样式表是不可能的。有关详细信息，请参阅[W3C 文档](http://www.w3.org/TR/html4/present/styles.html#adef-style)。

您可能希望将“iframe”用于您的目的。只需将 <iframe> 指向您正在编辑的 HTML 文档。它将被允许应用任何样式表，就像常规网页一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:04:20.883

不幸的是，这是不可能的。一个可能足够的解决方法是在所有样式前面加上一个选择器，例如

```
#destination body { /* */ }
#destination li { /* */ }
/* etc. */ 
```

CSS3 中还出现了一个漂亮的特性，它尚未被浏览器广泛支持，但称为“作用域”CSS。这是在一个元素内定义的 CSS，仅适用于父元素及其子元素。

```
<div>
    <style scoped>
        p { font-weight: bold; }
    </style>
    <p>Bold text</p> 
</div>
<p>Normal text</p> 
```

[`<iframe>`](http://docs.webplatform.org/wiki/html/elements/iframe)或者，您可以使用该元素在网页中加载网页。

```
<iframe src="http://www.google.com"></iframe> 
```

### 参考

*   [HTML 5.1 Nightly Spec - 样式元素](http://www.w3.org/html/wg/drafts/html/master/document-metadata.html#the-style-element)

# batch-file - 管道输出到批处理脚本

> ID：15225691
> 
> 赞同：4
> 
> 时间：2013-03-05T14:00:14.000
> 
> 标签：batch-file, pipe

我在 Windows 上使用 grep 来过滤文件，并希望将输出通过管道传输到另一个批处理脚本。

例如

```
grep "foo" bar.txt | mybatch.bat 
```

在 mybatch 我想处理每个匹配的行

例如 mybatch.bat：

```
echo Line with foo: %1 
```

在linux上我可以通过

```
grep "foo" bar.txt | while read x; do mybatch.sh $x; done 
```

但不知道如何在 Windows 机器上做到这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T14:10:06.070

您可以使用`for`：

```
for /f %x in ('grep "foo" bar.txt') do call mybatch.cmd "%x" 
```

这将为每个非空行调用一次批处理文件，就像您的 shell 脚本示例一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-01T19:09:14.377

这是交易的诀窍：

头.bat

```
@echo off

setlocal ENABLEDELAYEDEXPANSION
set n=%1

for /F "tokens=*" %%x in ('more') do (
echo %%x
set /A n -= 1
if !n! EQU 0 exit /b
) 
```

使用它：

```
REM print the first 10 lines:
type test.txt | head 10 
```

# asp.net - 使用过滤器表达式后，如何在表单视图中隐藏编辑按钮？

> ID：15225693
> 
> 赞同：0
> 
> 时间：2013-03-05T14:00:17.537
> 
> 标签：asp.net, formview

我正在尝试使用用户/管理员方案来编辑​​表单视图。我所拥有的是表单视图中的编辑按钮默认为可见=真。然后我使用一个语句，如果角色不等于管理员，然后将编辑按钮的可见性设置为 false。它应该像它应该的那样工作，当我点击周围，做回发等时，如果用户和管理员，项目保持隐藏......除非我使用下拉列表进行过滤，它使用类似`dataSource1.FilterExpression = ("ID=" + ddl1.SelectedValue)`.

无论我将 formview 编辑链接按钮的默认可见性设置为 true 还是 false，在使用 FilterExpression 时，它都会改变我不想要的可见性。这是因为 FilterExpression 将控件的可见性设置为控件的默认可见性属性设置的任何值。

下面是一些代码作为我的意思的一个例子。请帮忙！

```
protected void Page_PreRender(object sender, EventArgs e)
    {

    string role;
    role = "client";
    LinkButton editGeneralOverview = (LinkButton)formViewGeneralOverview.FindControl("EditButton");

if (role != "admin"))
{
    editGeneralOverview.Visible = false;
}

if (ddlIDFilter.SelectedValue != "-- ALL --")
{
    dataSourceGeneralOverview.FilterExpression = ("ID=" + ddlIDFilter.SelectedValue);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:05:12.117

您可以将其隐藏在`FormView`s DataBound 事件中：

```
protected void formViewGeneralOverview_DataBound(Object sender, EventArgs e)
{
    LinkButton editGeneralOverview = (LinkButton)formViewGeneralOverview.FindControl("EditButton");

    if (role != "admin"))
    {
        editGeneralOverview.Visible = false;
    }
} 
```

这样，您的可见性设置会在 FilterExpression 生效后（重新）应用。

注意：如果您不知道，可以`FormView`通过设置 OnDataBound 属性将此事件附加到标记中。像这样：

```
<asp:FormView ID="formViewGeneralOverview" 
    OnDataBound="formViewGeneralOverview_DataBound" 
    ...whatever other propeties you have >
    ...templates and junk...
</asp:FormView> 
```

# wordpress - 如何使用 md5 哈希密码（从外部 API 获取）在 wordpress 中创建用户？

> ID：15225694
> 
> 赞同：0
> 
> 时间：2013-03-05T14:00:18.160
> 
> 标签：wordpress, passwords, md5, salt, whmcs

从 WHMCS API 我得到这些数据：

*   电子邮件
*   密码

我收到正常格式的电子邮件 (email@example.com)。但我得到以下格式的密码：

*   41bef39ea1086512d8b90b2a3dbc4d3e:jh#sZ（使用 XML）

这里，**jh#sZ**是盐，格式是**“md5(salt.pw):salt”**

现在我的问题是，如何在**wp_insert_user()**或**wp_create_user()**函数中使用此密码将用户插入 wp 数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-29T07:27:09.643

插入用户后，您可以使用 $wpdb 将 MD5 哈希密码插入数据库。**现有的 md5 密码将起作用**。如果有人正在寻找查询，这里是：

```
global $wpdb;

$user_id = wp_insert_user($user_data);

$result = $wpdb->update( 
    $wpdb->users,
    array( 'user_pass' => $user_pass ),
    array( 'ID' => $user_id )
); 
```

# jpa - 为什么 IntelliJ 的 JPA 检查告诉我“为字段 'id' 配置了多个属性”？

> ID：15225697
> 
> 赞同：4
> 
> 时间：2013-03-05T14:00:24.860
> 
> 标签：jpa, intellij-idea

我有许多通用形式的 JPA 实体类：

```
@Entity
@Table(name = "MY_TABLE", catalog = "", schema = "VBMSUI")
@NamedQueries({...})
public class MyEntity implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @Column(name = "ID")
    @GeneratedValue(strategy=GenerationType.SEQUENCE,
            generator="MY_TABLE_ID_SEQ")
    @SequenceGenerator(name="MY_TABLE_ID_SEQ",
            sequenceName = "MY_TABLE_ID_SEQ")
    private BigDecimal id;
...
} 
```

IntelliJ 的检查工具用红色下划线“id”，并提供消息 -“为字段 'id' 配置了多个属性”。

![在此处输入图像描述](../Images/eecd2450925ff2cc77ab4ae38179e94b.png)

类中没有其他属性被标识为 id。“id”有一个 getter 和一个 setter，但它们没有注释。顺便说一句，实体类的代码是由 NetBeans 生成的，它似乎可以工作。

发生了什么，我该如何纠正？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T16:13:08.760

这似乎是因为您在同一属性上同时拥有`@Id`和注释（快速修复建议删除其中任何一个）。`@Basic`我不是 JPA 方面的专家，但它对我来说似乎是有效的，所以这可能是 IntelliJ 检查中的一个错误，应该在[他们的 bugtracker](http://youtrack.jetbrains.com)中报告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-25T19:16:06.057

看来这是一个错误。此处已对此进行了报道：[https](https://youtrack.jetbrains.com/issue/IDEA-129147) ://youtrack.jetbrains.com/issue/IDEA-129147 如果您希望看到解决方案，可以对其进行投票。

# javascript - DOM (Javascript) 显示/隐藏 div 不起作用

> ID：15225698
> 
> 赞同：0
> 
> 时间：2013-03-05T14:00:25.373
> 
> 标签：javascript, html, dom

我无法使用 AJAX（服务器问题！）所以我不得不依赖 DOM + javascript 来显示或隐藏我页面上的两个 div。

用户单击两个单选按钮之一，然后根据单击显示相应的 div。

出于某种原因，如果使用“欧盟”单选按钮，第一个 div 将加载，但我无法让“国际”单选按钮工作。第二个按钮调用正确的脚本，传递变量，甚至隐藏欧盟 div，它只是不会显示国际的。

我无计可施。有人可以帮忙吗？

**Javascript：**

```
 function displayLocation(loc){
  alert(loc)
  document.getElementById(loc).style.display = "block"
  if (loc == "eu"){
  document.getElementById("international").style.display = "none"
  }else{
        document.getElementById("eu").style.display = "none"
  }
 } 
```

**HTML 单选按钮**

```
 <input type="radio" name="loc" style="float:left;" onclick=displayLocation("eu")>
 <input type="radio" name="loc" style="float:left;" onclick=displayLocation("international")> 
```

**适当隐藏/显示的 div**

```
 <div id="eu" style="display:none;">European Union</div>
 <div id="international" style="display:none;">International</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:18:56.890

你必须改变 onclick 事件看起来像这样

```
<input type="radio" name="loc" style="float:left;" onclick="displayLocation('eu')">

<input type="radio" name="loc" style="float:left;" onclick="displayLocation('international')"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:10:05.113

看看我刚刚制作的[小提琴。](http://jsfiddle.net/2Y2nE/1/)

我可以通过将脚本放在调用它的 HTML 之后来解决*问题*。还有一些风格上的东西需要调整（`onclick=displayLocation`应该用引号引起来），但除此之外它应该适合你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:10:15.987

`displayLocation('xx')`您需要在 onlick 属性中加上引号，如下所示：`'displayLocation("eu")'`

[http://jsfiddle.net/rvtBp/](http://jsfiddle.net/rvtBp/)

我还建议使用事件绑定而不是事件属性：

```
<input type="radio" name="loc" style="float:left;" data-lang="eu">
<input type="radio" name="loc" style="float:left;" data-lang="international">

Array.prototype.forEach.call(document.querySelectorAll('[name="loc"]'),
function (elem) {
    elem.addEventListener('change', function (e) {
        if (this.checked) {
            displayLocation(this.dataset.lang);
        }
    });
}); 
```

[http://jsfiddle.net/rvtBp/1/](http://jsfiddle.net/rvtBp/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T14:17:59.697

```
<input type="radio" name="loc" style="float:left;" onclick="displayLocation(\'' + eu + '\')"> 
```

onclick 声明应该用引号括起来..**`onclick="displayLocation(\'' + eu + '\')"`**

我认为它不会工作..`document.getElementById(loc).style.display = "block"`

```
 document.getElementById("+loc+").style.display = "block" 
```

# java - 我的代码逻辑上有什么问题？

> ID：15225701
> 
> 赞同：0
> 
> 时间：2013-03-05T14:00:29.597
> 
> 标签：java, file-rename

我正在编写一个代码来重命名java中的文件数量。我有一个`.txt`. 我的程序在其中检索文档名称及其新名称的文件。它目前不起作用..它可以编译并运行，但不会重命名我的文件。

这是我的代码：

```
public static void rename(String ol, String ne){
  File oldfile =new File(ol);
  File newfile =new File(ne);
  int t=0;
  if( oldfile.isFile() && oldfile.canRead()){
     if (newfile.exists()){
        t++;
        ne = ne.substring(0,ne.lastIndexOf('.')) + " (" + t + ")" + 
           ne.substring(ne.lastIndexOf('.')) ;
        rename(ol,ne);
     }

     if(oldfile.renameTo(newfile))
        System.out.println("Rename succesful");
     else
        System.out.println("Rename failed" + " - " + ol + " " + ne);

  }else 
     System.out.println("CANNOT Rename " + oldfile + " because read/write issues. Check 
                          if  File exists" );
}     

public static void main(String[] args) throws IOException
{   
    ReadFile ren = new ReadFile("List of Founds.txt");
    String r[] = ren.OpenFile();

    for(int j=0; j<ReadFile.numberOfLines; j++){

        String pdfOldName = r[j].substring(0,r[j].lastIndexOf('.'));
        String pdfNewName = r[j].substring((r[j].lastIndexOf('.') + 4));

        rename(pdfOldName, pdfNewName);
    } 
} 
```

这是“发现列表”`.txt`文件，旧名称在左侧，新名称在右侧。

> test.pdf.txt ayo1
> 
> test2.pdf.txt ayo2
> 
> test3.pdf.txt ayo3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:05:11.637

您可以使用[File.html#renameTo(java.io.File)](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#renameTo%28java.io.File%29)来完成此操作。

这是我编写的一个快速示例程序。希望这能让你朝着正确的方向前进

```
public class FileMain {

    static int i = 1;

    public static void main(String[] args) throws Exception {
        File file1 = new File("D:/workspace/dir");  
        renamefiles(file1);
    }

    private static void renamefiles(File file){

            File files[] = file.listFiles();
            for(File tempFile :files){

                if(tempFile.isDirectory()){
                    renamefiles(tempFile);
                }else{
                    System.out.println(tempFile.getName());

                    File renameFile = new File("sample-"+(++i)+".bck");
                    tempFile.renameTo(renameFile);

                }
            }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:10:04.423

你需要一个 ！

```
if (newfile.exists()) 
```

到

```
if (!newfile.exists()) 
```

您还需要[遵守约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)。和[单元测试](http://junit.sourceforge.net/)。

# nhibernate - 如何根据确切的子类加载类？

> ID：15225706
> 
> 赞同：2
> 
> 时间：2013-03-05T14:00:50.007
> 
> 标签：nhibernate, fluent-nhibernate

我有`Section`一个有 s 列表的类`ContentItem`。`ContentItem`有许多子类`TextContentItem`，如`ImageContentItem`, 等。所有这些子类都映射到数据库（使用类和子类映射）。

我需要能够检索`Section`具有填充的*确切子类实例*的实例`ContentItem`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:06:46.453

使用`IEnumerable<T>`扩展方法[`OfType<T>`](http://msdn.microsoft.com/en-us/library/bb360913%28v=vs.100%29.aspx)过滤集合：

```
var filter = section.ContentItems.OfType<TextContentItem>(); 
```

如果您的集合非常大并且您希望避免加载所有内容项，那么我将填充由 Section 类和所需内容项的集合组成的数据传输对象 (DTO)。我不建议在域模型中部分加载集合。

# javascript - 如何将 BASIC 算法转换为 javascript？

> ID：15225710
> 
> 赞同：-1
> 
> 时间：2013-03-05T14:00:56.203
> 
> 标签：javascript, basic

你还记得 BASIC-S 还在使用的日子吗？我想知道如何翻译这个

```
10 LET a=0
20 LET b=10
30 PRINT a+b
40 LET a=b
50 GOTO 20 
```

进入javascript，jquery或我可以使用的东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:02:57.740

语言一般是可以互换的。。

```
var a=0;

do
{
   var b = 10;
   document.write(a+b);
   a=b;
} while(0) 
```

# powershell - PowerShell - 脚本属性中的 SupportsShouldProcess

> ID：15225713
> 
> 赞同：1
> 
> 时间：2013-03-05T14:01:01.943
> 
> 标签：powershell, powershell-2.0

当我尝试访问 ShouldProcess 脚本块中的变量时，我得到一个空表达式。这就是我在脚本方法中所拥有的：

```
$scaObject = [PerfWorker.CmdLets.PSDbInfoFactory]::GetPSDbInfo($info, $false)
$oracleObj = [PerfWorker.CmdLets.OracleParamsDto]$scaObject
Add-Member -InputObject $oracleObj -MemberType ScriptMethod -Name DropSchemas -Value {      
    $oraWorker = [PerfWorker.CmdLets.PSDbOracleInfo]$this.DbWorker                         
    $args | foreach {                                                                       
        #Start getting error "You cannot call a method on a null-valued expression" from line below
        if($psCmdLet.ShouldProcess(                                       
            "Delete Oracle Schema $_ on $($this.Hostname)? This action cannot be undone!",  
            "Delete Schema?"))                                                              
        {
            $oraWorker.DropS3DSchemas($_)                                       
        }                                                                               
    }
} 
```

如果我删除`$psCmdlet.ShouldProcess`块并调用该`$oraWorker.DropS3DSchemas()`方法，那么一切正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T05:17:34.010

您似乎将 cmdlet 执行上下文与对象上脚本方法的执行上下文混合在一起。脚本方法代码在稍后在创建它的 cmdlet 方法的上下文之外运行的脚本块中捕获。在`if`检查 if之前`$PSCmdlet -eq $null`。我不认为你可以在这里做你想做的事情。`ShouldProcess()`需要在 cmdlet 的上下文中执行。PowerShell 方法是创建一个可以完成工作的 Drop-Schemas cmdlet。然后，您可以使用该`ShouldProcess()`cmdlet 中的功能。

# ajax - 检票口阿贾克斯指标

> ID：15225718
> 
> 赞同：1
> 
> 时间：2013-03-05T14:01:13.797
> 
> 标签：ajax, wicket, busyindicator

我有这种情况：

我有一个`IndicatingAjaxButton`. 在`onSubmit`方法中完成一些操作，然后`setResponsePage(otherPage);`调用

当操作仍在进行时，忙碌指示符是可见的。但是当操作完成后，指示器消失了，而用户仍在同一页面上，能够进行其他活动，而浏览器正忙于打开其他页面。

我的问题是，只要浏览器忙于打开`otherPage.`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T16:45:10.933

首先，您需要确保您确实需要在 ajax 请求中执行此操作。我认为没有必要，除非您`setResponsePage()`只根据某些条件进行操作，否则执行一些 Ajaxy 操作。

如果您不需要 Ajax，我建议您放弃它并发送一个常规请求。您可以编写一个繁忙的指标客户端或 Wicket 端并使用 javascript 显示它（也许`body.onunload`是通用方式？）。

但是，如果您真的想实现这一点，您应该了解隐藏指标的原因。Wicket 准备将在调用完成（成功或失败）时执行的 javascript。相关方法是[`AbstractDefaultAjaxBehavior#generateCallbackScript()`](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.wicket/wicket/1.4.7/org/apache/wicket/ajax/AbstractDefaultAjaxBehavior.java#AbstractDefaultAjaxBehavior.generateCallbackScript%28java.lang.CharSequence%29)：

```
final CharSequence onSuccessScript = getSuccessScript();
final CharSequence onFailureScript = getFailureScript();
...
if (!Strings.isEmpty(indicatorId))
    {
    String hide = ";wicketHide('" + indicatorId + "');";
    success = success + hide;
    failure = failure + hide;
} 
```

Wicket 正在准备 javascript`wicketHide(id)`调用，一旦请求完成（以及成功或失败），它将有效地隐藏指示器。

我从来没有尝试过这样做，但可能会覆盖`getFailureScript()`并且，在执行之前`getSuccessScript()`制作脚本，在你的 Ajax 行为中应该可以解决问题：`return``wicketHide(id)`

```
protected CharSequence getSuccessScript() {
    String script = super.getSucessScript();
    return (script != null ? script : "") + ";return false;";
}
protected CharSequence getFailureScript() {
    String script = super.getFailureScript();
    return (script != null ? script : "") + ";return false;";
} 
```

请注意，这将始终显示指示器，并且永远不会隐藏它。如果您想根据 a`setResponsePage`是否完成有条件地隐藏它，例如，您可以通过`AjaxRequestTarget`, 并`return`有条件地在您的`getSucessScript()`and`getFailureScript()`实现中定义一个 js 变量。

Wicket 的资料（至少对我来说）非常清晰易读和理解。他们可以帮助您了解它的实际工作原理以及如何调整它以满足您的需求。

# compilation - 安装 MPFR (3.1.0) 时出错

> ID：15225722
> 
> 赞同：0
> 
> 时间：2013-03-05T14:01:21.697
> 
> 标签：compilation, compiler-errors, gmp, mpfr

我正在尝试使用[此链接](http://www.cse.iitb.ac.in/~rks/mtp/installing_apron.txt) （第 3 部分）中的说明安装 MPFR（3.1.0），但出现以下错误：

> 检查 gmp 内部文件...配置：错误：找不到头文件 gmp-impl.h 和 longlong.h

我已经使用同一页的说明安装了 gmp (5.0.5)，看起来 gmp 的安装是成功的。

有人可以帮助我了解问题所在，或提出解决方法吗？

任何帮助是极大的赞赏！
**编辑：**我这样做后得到错误

> ./configure --with-gmp-build=GMPBUILD # GMPBUILD=/usr/gmp/gmp-5.0.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:53:20.010

Does the directory structure for GMP look like?

```
/usr/gmp/include 
```

or

```
/usr/gmp/gmp-5.0.5/include 
```

Once you verify the proper parent directory (/usr/gmp or /usr/gmp/gmp-5.0.5), try the following command:

```
./configure --with-gmp=GMPBUILD 
```

where GMPBUILD is the parent directory of the include sub-directory.

# tsql - 将强类型列表插入 Sql 表

> ID：15225724
> 
> 赞同：1
> 
> 时间：2013-03-05T14:01:25.577
> 
> 标签：tsql, list, strongly-typed-dataset

我试图找到一种将强类型列表插入 SQL 表的不同方法。我想到的唯一方法是将 List 序列化为 XML 并将其作为 XML 类型的参数传递给 SQL。

过程相当简单，而且效果很好，但我想看看有没有比这个解决方案更好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T00:36:43.237

为什么要将列表插入到数据库表中？我不确定您要做什么，但您当然可以将列表中的每个节点表示为数据库表中的一行。该表将包含类中每个字段的列，以及一个名为“ListRank”的额外列，用于存储节点在列表中的位置。如果您创建了一个 linq-to-sql 连接，那么您可以通过简单的查询轻松地从数据库中获取列表。

```
Dim myDB as Datacontext = new DataContext()
Dim students as List(Of Student) = (From s as student in myDB.students select s order by s.listRank ascending).toList
'//students now holds (Bob, A), (Sue, B) 
```

该表看起来像：

```
Name      Grade    ListRank
======== ========  =========
  Bob       A        1
  Sue       B        2 
```

**注意**您必须在数据库中的 ListRank 上创建唯一性约束，以便您可以确定没有两个学生在列表中具有相同的列表排名/位置。

# javascript - jQuery 是否放弃了对某些 DOM 属性的 attr 支持？

> ID：15225727
> 
> 赞同：-2
> 
> 时间：2013-03-05T14:01:40.880
> 
> 标签：javascript, jquery

我有一些旧的 jQuery 工作代码：

```
if ($element.attr('checked') === 'checked') 
```

那从未被改写为建议：

```
if ($element.prop('checked')) 
```

但它奏效了。

但是现在，我已经更新到 jQuery 1.9.1 并且使用 attr 访问检查返回未定义。这是否意味着 jQuery 放弃了对某些 DOM 属性的支持，例如 checked/disabled/selected ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:07:06.077

> jQuery 1.6 引入了 .prop() 方法来设置或获取节点上的属性，并且不推荐使用 .attr() 来设置属性。但是，直到 1.9 的版本继续支持在特定情况下使用 .attr()。当使用区分属性和属性的选择器时，这种以向后兼容性为名的行为会导致混淆。

看看 jQuery 本身的这个升级指南。[.attr() 与 .prop()](http://jquery.com/upgrade-guide/1.9/#attr-versus-prop-)

# ravendb - RavenDB 嵌套文档设计和性能

> ID：15225729
> 
> 赞同：2
> 
> 时间：2013-03-05T14:01:49.070
> 
> 标签：ravendb

在问题和评论的场景中……评论本身并不存在，而是作为嵌套元素存储在其父问题文档中……这些评论当然可以建立成百上千个条目……当我加载一个问题时，我不会招致性能损失吗？加载操作不会同时加载所有成百上千条评论吗？我可以（应该）运行什么查询来加载问题，然后只加载前 10 条评论，以便能够根据需要加载另一个评论“页面”？

或者 RavenDB 是否应用延迟加载，因为在我访问 Question 实例的 Comments 属性之前它根本不会加载 Comments？即便如此......我可以控制它“懒惰”以分页方式加载评论吗？

另外，如何在不首先加载问题（及其所有评论）的情况下向问题添加新评论？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:04:42.423

当您加载文档时，您通常希望加载所有内容（即博客中的详细信息页面）。

对于索引页面（列出所有博客文章），您可以创建一个执行[map/reduce](https://stackoverflow.com/a/4255207/70386)的索引。

至于保存新评论，您可能想问自己多久这样做一次？在大多数网站中，读取比写入更频繁地使用。因此，在查看整个图片时，加载整个博客的性能损失并不那么相关。

但是，如果您确实希望有很多评论，您可能希望稍后重新设计您的应用程序以使评论成为根聚合。但在被证明是性能问题之前不要这样做。（由于 RavenDB 的无模式特性，移动评论也很容易）。

# oracle11g - ORACLE 中的 USING CONNECT BY 子句

> ID：15225731
> 
> 赞同：0
> 
> 时间：2013-03-05T14:01:54.480
> 
> 标签：oracle11g, connect-by

## **我有下表：**

```
CREATE TABLE TASK_2
(
 ROLE_NAME VARCHAR2(50 BYTE),
 MIN_CNT   NUMBER,
 MAX_CNT   NUMBER
) 
```

## 使用以下数据：

```
INSERT INTO TASK_2 VALUES ( 'SE', 3, 5);
INSERT INTO TASK_2 VALUES ( 'SSE', 2, 6);
INSERT INTO TASK_2 VALUES ( 'MGR', 3, 5);
INSERT INTO TASK_2 VALUES ( 'SR_MGR', 1, 4); 
```

## **期望的输出是：**

```
se there are 3;

se there are 4;

se there are 5;

sse there are 2;

sse there are 3;

sse there are 4;

sse there are 5;

sse there are 6;

mgr there are 3;

mgr there are 4;

mgr there are 5;

sr_mgr there are 1;

sr_mgr there are 2;

sr_mgr there are 3;

sr_mgr there are 4; 
```

**我曾尝试使用按级别连接。**

```
SELECT role_name||' there are '||level
FROM task_2
CONNECT BY level < max_cnt
AND level          > min_cnt
ORDER BY role_name; 
```

## 输出是：

```
mgr there are 4                                                                                       
mgr there are 4                                                                                       
mgr there are 4                                                                                       
mgr there are 1                                                                                       
mgr there are 4                                                                                       
mgr there are 4                                                                                       
mgr there are 4                                                                                       
mgr there are 4                                                                                       
mgr there are 4                                                                                       
se there are 4                                                                                        
se there are 4                                                                                        
se there are 4                                                                                        
se there are 1                                                                                        
se there are 4                                                                                        
se there are 4                                                                                        
se there are 4                                                                                        
se there are 4                                                                                        
se there are 4                                                                                        
sr_mgr there are 2                                                                                    
sr_mgr there are 3                                                                                    
sr_mgr there are 2                                                                                    
sr_mgr there are 3                                                                                    
sr_mgr there are 2                                                                                    
sr_mgr there are 1                                                                                    
sr_mgr there are 3                                                                                    
sr_mgr there are 2                                                                                    
sr_mgr there are 3                                                                                    
sse there are 5                                                                                       
sse there are 5                                                                                       
sse there are 5                                                                                       
sse there are 5                                                                                       
sse there are 5                                                                                       
sse there are 5                                                                                       
sse there are 3                                                                                       
sse there are 3                                                                                       
sse there are 4                                                                                       
sse there are 5                                                                                       
sse there are 4                                                                                       
sse there are 5                                                                                       
sse there are 5                                                                                       
sse there are 5                                                                                       
sse there are 5                                                                                       
sse there are 5                                                                                       
sse there are 5                                                                                       
sse there are 4                                                                                       
sse there are 5                                                                                       
sse there are 5                                                                                       
sse there are 5                                                                                       
sse there are 4                                                                                       
sse there are 5                                                                                       
sse there are 3                                                                                       
sse there are 4                                                                                       
sse there are 5                                                                                       
sse there are 4                                                                                       
sse there are 5                                                                                       
sse there are 5                                                                                       
sse there are 5                                                                                       
sse there are 1                                                                                       
sse there are 5                                                                                       
sse there are 5                                                                                       
sse there are 3                                                                                       
sse there are 5                                                                                       
sse there are 4                                                                                       
sse there are 4 
```

已选择 64 行

**所以，我看不到我应该使用什么以及如何使用。因为级别每次都随着角色名称而变化。那么谁能告诉我我错过了什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:17:59.633

在 11g 中，只需使用递归分解子查询：

```
with data (role_name ,  max_cnt, val)
as (select role_name , max_cnt, min_cnt
      from task_2
    union all
    select role_name , max_cnt, val+1
      from data
     where val+1 <= max_cnt)
select role_name || ' there are ' || val
  from data
 order by role_name, val; 
```

如果您想要一种`connect by`方法（不如上述方法），那么：

```
select role_name || ' there are ' || (min_cnt + d.r - 1)
  from task_2 t
       cross join (select rownum r 
                     from dual 
                   connect by level <= (select max(max_cnt - min_cnt + 1) 
                                          from task_2)) d
 where d.r <= max_cnt - min_cnt + 1
 order by role_name, d.r; 
```

示范条款：

```
with data as (select role_name, min_cnt, max_cnt, max_cnt-min_cnt+1 vals
                from task_2)
select role_name|| ' there are ' || vals
  from data
model
partition by (role_name)
dimension by (0 as i)
measures (vals, min_cnt)
rules (
  vals[for i from 0 to vals[0] increment 1] = min_cnt[0] + cv(i) 
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T12:46:10.897

```
select a.role_name||' there are '|| b.n Txt from TASK_2 a,
(select rownum n from dual connect by level <= (select sum(max_cnt) from TASK_2)) b
where b.n >= min_cnt and b.n <= max_cnt
order by a.role_name,b.n; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-21T07:48:38.653

```
with TASK_2  as ( 
    select 'SE' as ROLE_NAME , 3 as MIN_CNT   , 5 as MAX_CNT    from dual union
    select 'SSE', 2, 6 from dual union
    select 'MGR', 3, 5 from dual union
    select  'SR_MGR', 1, 4 from dual 
)

select t.ROLE_NAME ||' there are '||l.lv||';' as txt from TASK_2  t left join
(select level as lv from dual connect by level <= (select max(MAX_CNT)  from TASK_2)) l
on l.lv between t.MIN_CNT and t.MAX_CNT
order by txt 
```

# ios - 适用于 iOS 的 TestFlight 1.2 SDK 安装说明

> ID：15225733
> 
> 赞同：0
> 
> 时间：2013-03-05T14:01:55.810
> 
> 标签：ios, xcode, cocoa-touch, installation, testflight

我即将安装适用于 iOS 的 TestFlight 1.2 SDK，但我对如何进行有点困惑。我记得过去您需要创建一个“临时配置文件”，但阅读 TestFlight 1.2 的[安装说明](https://testflightapp.com/sdk/doc/1.2/)后，不再提及这一点。另外我记得有一些说明需要为 Xcode 创建一个新方案，但也没有再提及它（至少现在我能找到）。我目前只有一个“调试”和“发布”方案。

我应该创建“临时配置文件”吗？我应该创建一个新方案吗？还是我应该按照安装说明进行操作？

# python - 如何在python中继承“Manager().list”？

> ID：15225737
> 
> 赞同：3
> 
> 时间：2013-03-05T14:02:09.303
> 
> 标签：python, list, inheritance, multiprocessing

我已经实现了我自己的从列表继承的“DataSet”类，我需要移植该代码以在多处理模式下运行。这是我的课堂示例：

```
class DataSet(list):
    @property
    def n_training(self):
        return len(self) * 0.8
    @property
    def n_validation(self):
        return len(self) * 0.2 
```

除了在这个类中创建一个“Manager().list”的实例之外，还有没有更简单的方法可以做到这一点：

```
from multiprocessing import Manager
class DataSet(Manager().list): 
```

请注意，“Manager().list”是

```
manager = Manager()
manager.list() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T09:50:23.230

根据@senderle 和@Martijn Pieters 的建议，我设法得到[了解决方案](http://docs.python.org/2/library/multiprocessing.html#customized-managers)

```
from multiprocessing.managers import BaseManager
from multiprocessing.managers import BaseProxy

class DataSetClass(list):
    @property
    def n_training(self):
        return len(self) * 0.8
    @property
    def n_validation(self):
        return len(self) * 0.2

class DataSetProxy(BaseProxy):
    _exposed_ = ('append', '__len__')
    def append(self, item):
        return self._callmethod('append', item)
    def __len__(self):
        return self._callmethod('__len__')

class MyManager(BaseManager):
    pass

MyManager.register('DataSet', DatasetClass, DataSetProxy)

if __name__ == '__main__':
    manager = MyManager()
    manager.start()
    dataset = manager.DataSet()
    dataset.append('item1')
    dataset.append('item2')
    print len(dataset) 
```

# javascript - javascript可以根据表单内容自动发送电子邮件吗？

> ID：15225745
> 
> 赞同：0
> 
> 时间：2013-03-05T14:02:27.917
> 
> 标签：javascript, forms, email, smtp

javascript 可以处理自动发送 HTML 表单的内容吗？

所以目标是点击发送，表单的内容被格式化并发送，用户不需要从他们的个人电子邮件客户端发送。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:07:06.410

您可以将内容发送到后端的服务，该服务会为他们发送电子邮件。当然，来源与他们的正常电子邮件地址不同。

但是您不能让浏览器中的 JavaScript 直接发送电子邮件。浏览器没有任何类似的功能，即使有，他们也必须大量限制它以防止安全问题。

# apache-flex - Firefox v19 的 Flex/Flexicious UI 错误

> ID：15225749
> 
> 赞同：0
> 
> 时间：2013-03-05T14:02:33.867
> 
> 标签：apache-flex, firefox, firefox-addon, flexicious

我们有一个使用 Flexicious 网格的 Flex 程序，最近升级到 Firefox v19.0。我们发现如果Firefox浏览器有主题，我们会遇到一个问题：如果你在Flex程序中工作，一切都很好，但是如果你切换到另一个标签然后再切换回来，Flex应用程序的UI就会没有更新时间更长，直到发生外部事件（即鼠标悬停在超链接或浏览器按钮上）。如果您删除 Firefox 主题并执行相同的操作，一切都会再次正常运行。我们无法通过网络上的其他纯 Flash 程序重现该问题，但如果我们访问 Flexicious 网站上的“演示”页面，问题确实会发生。有没有人遇到过类似的问题或对如何解决它有任何想法？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:02:07.693

这是 Firefox 的一个错误。许多基于 Flash 的演示（包括 tourdeflex 和 youtube）都存在这个问题。

# html - 带有 $ 的单个页面样式

> ID：15225752
> 
> 赞同：-2
> 
> 时间：2013-03-05T14:02:43.903
> 
> 标签：html, css, joomla, styles

我有一个页面`www.something.com/home`（背景是红色的，因为我使用了这种样式）

```
body.menu-home .main-bg {
background: red ; } 
```

但是当人们去的时候，例如`www.something.com/home/photos`样式也是红色的，因为它遵循 /home 的样式。我怎样才能改变这个？我只希望红色背景仅在 /home 上。

我试着这样做

```
body.menu-home$ .main-bg {
background: red ; } 
```

但它没有用，有什么建议吗？我正在使用 joomla 顺便说一句

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:40:22.033

你总是可以在你的模板 index.php 文件中添加这样的东西：

```
$app = JFactory::getApplication();
$doc = JFactory::getDocument();
$menu = $app->getMenu();
if ($menu->getActive() == $menu->getDefault()) {
        $css = 'body.menu-home .main-bg {'
              .'background: red;'
              .'}';
        $doc->addStyleDeclaration($css);
} 
```

它检测到您的网站位于默认菜单项上，我假设它是您的主页，如果是，请添加该 CSS 代码。

注意：如果`$doc = JFactory::getDocument();`已经定义，请从上面的代码中删除

希望这可以帮助。

# sql - 查询3张表的主键不重复成单列

> ID：15225754
> 
> 赞同：1
> 
> 时间：2013-03-05T14:02:47.307
> 
> 标签：sql, join

我有三张桌子

```
TABLE A 
      A_ID (PK)
      B_ID
      X_ID
      A_NAME

TABLE B
      B_ID (PK)
      A_ID
      B_NAME

TABLE C
      C_ID (PK)
      B_ID
      C_NAME 
```

X_ID 将绑定到绑定变量，根据该变量查询主键。

我必须从三个表中查询所有主键，而不会在查询结果中重复它们我使用的查询是

```
SELECT TABLEA.A_ID,TABLEB.B_ID,TABLEC.C_ID
FROM TABLEA INNER JOIN TABLE B 
ON TABLEA.A_ID= TABLEB.A_ID JOIN TABLE C
ON TABLEB.B_ID= TABLEC.B_ID
WHERE TABLEA.X_ID = :bindVariable
ORDER BY TABLEA.A_NAME 
```

**更新：**

列和值

```
A_ID          B_ID            C_ID        X_ID
101            201             301         1
101            201             302         1
101            202             303         2
102            202             304         2 
```

但我想根据 X_ID (value `1`)显示结果

```
PK_ID
101
201
301
302 
```

所有唯一 ID 都应显示而无需重复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:06:22.957

操作员将`UNION`消除重复项，因此您只需要：

```
SELECT A_ID
FROM [Table A]

UNION

SELECT B_ID
FROM [Table B]

UNION

SELECT C_ID
FROM [Table C] 
```

更新：在聊天中，您说了以下内容：

> 表 A 通过 A_ID 与表 B 相关，表 B 和表 C 通过 B_ID 相关

根据上面的数据，我认为你没有足够清晰的关系来做到这一点。你可以联合起来`A`，`B`像这样：

```
SELECT A_ID
FROM [Table A]
WHERE X_ID = 1

UNION

SELECT B.B_ID
FROM [Table B] B
INNER JOIN [Table A] A
  ON B.A_ID = A.A_ID
WHERE A.X_ID = 1 
```

但是根据您所描述的关系，没有办法以您只获得具有特定值的记录的方式`C`重新加入。您可以做的最好的事情是获取匹配中的所有值至少匹配一次的*值*：`A``A.X_ID``Table C``B``A.X_ID`

 *```
SELECT A_ID
FROM [Table A]
WHERE X_ID = 1

UNION

SELECT B.B_ID
FROM [Table B] B
INNER JOIN [Table A] A
  ON B.A_ID = A.A_ID
WHERE A.X_ID = 1

UNION

SELECT C_ID
FROM [Table C]
WHERE B_ID IN (
  SELECT B.B_ID
  FROM [Table B] B
  INNER JOIN [Table A] A ON B.A_ID = A.A_ID
  WHERE A.X_ID = 1
) 
```

很有可能有一种更清洁的方法可以做到这一点，但我必须回去工作。

**tl;dr：**你可以接近，但你需要在`C_ID`和之间建立明确的关系`X_ID`才能使这项工作。*

# java - 嵌入时监听 JOptionPane 事件？

> ID：15225755
> 
> 赞同：0
> 
> 时间：2013-03-05T14:02:52.330
> 
> 标签：java, swing, actionlistener, joptionpane

`JOptionPane`可以用作“嵌入式”组件，如下所示：

```
JOptionPane pane = new JOptionPane(message, JOptionPane.QUESTION_MESSAGE, JOptionPane.YES_NO_OPTION);
log.debug("Options are: ", pane.getOptions());
JFrame frame = new JFrame();
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setLayout(new BorderLayout());
frame.add(chartPanel, BorderLayout.CENTER);
frame.add(pane, BorderLayout.SOUTH);
frame.pack();
frame.setSize(800, 800);
frame.setLocationRelativeTo(null);
frame.setVisible(true); 
```

如何将侦听器附加到选项窗格按钮，以便在用户单击某个按钮时做出反应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:37:52.180

`JOptionPane`不是要嵌入到 a`JFrame`中，而是要显示在对话框中。

现在，我看到了实现您想要的 3 种方法：

1.  递归扫描`JOptionPane`组件层次结构以查找`JButton`和添加`ActionListener`. 此解决方案的缺点是您必须以某种方式识别哪个按钮是哪个（组件顺序可能会根据不同的 L&F 变化）。

2.  `JOptionPane.setValue(Object object)`单击按钮时调用的覆盖。

3.  **更新**只需添加一个`PropertyChangeListener`监听`JOptionPane.VALUE_PROPERTY`. 每次按下按钮时，您都会收到通知。

选项 3 似乎是最合适的并且代码量最少。

这是第二个解决方案的片段。随意将匿名类增强为内部类或什至在其自己的文件中，以便您可以有更好的方法来访问它。

```
import java.awt.BorderLayout;
import java.awt.Dimension;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.SwingUtilities;

public class TestOptionPane {

    protected void initUI() {
        final JFrame frame = new JFrame();
        JOptionPane pane = new JOptionPane("Some message", JOptionPane.QUESTION_MESSAGE, JOptionPane.YES_NO_OPTION) {
            @Override
            public void setValue(Object newValue) {
                super.setValue(newValue);
                JOptionPane.showMessageDialog(frame.getContentPane(), "You have hit " + newValue);
            }
        };
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(new BorderLayout());
        frame.add(new JLabel("Some panel in the middle") {
            @Override
            public java.awt.Dimension getPreferredSize() {
                return new Dimension(800, 500);
            };
        }, BorderLayout.CENTER);
        frame.add(pane, BorderLayout.SOUTH);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestOptionPane().initUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:31:46.383

这是你想要的。

```
 JOptionPane pane = new JOptionPane("Stackoverflow", JOptionPane.QUESTION_MESSAGE,
        JOptionPane.YES_NO_OPTION);

    JPanel buttonArea = (JPanel) pane.getComponents()[1];

    JButton b1 = (JButton)buttonArea.getComponent(0);
    JButton b2 = (JButton)buttonArea.getComponent(1);

    b1.removeActionListener(b1.getActionListeners()[0]);

    b1.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent e) {
            System.out.println("Stackoverflow");
        }
    });

    JFrame frame = new JFrame();

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    frame.setLayout(new BorderLayout());
    frame.add(pane, BorderLayout.SOUTH);

    frame.pack();
    frame.setSize(800, 800);

    frame.setLocationRelativeTo(null);
    frame.setVisible(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:19:10.927

您可以使用`pane.showConfirmDialog()`. 它将根据情况返回`JOptionPane.YES`或`JOptionPane.CANCEL`。
尽管如此，我认为您需要创建一个常规的`JPanel`，因为`JOptionPane`它是用于弹出对话框，而不是嵌入到`JFrame`.
你看，即使你可以，这并不意味着你应该做某事。

# delphi - 在 Firemonkey 的任务栏前显示 NotifyIcon Popup

> ID：15225767
> 
> 赞同：1
> 
> 时间：2013-03-05T14:03:27.073
> 
> 标签：delphi, firemonkey, delphi-xe3, firemonkey-fm2

我正在为我的程序创建一个 notifyIcon，将来它将独立于操作系统，但现在我正在编写 win-32 部分。

当我收到 WM_RBUTTONDOWN 消息后显示弹出菜单时，我显示一个菜单，但此菜单位于任务栏后面。如何创建一个位于任务栏前面的常规菜单？

问题在于 fmx.popupmenu，假设它与 VCL.popupmenu 具有相同的行为是错误的吗？

编辑代码：

```
{$IFDEF MSWINDOWS}
Tray:=TPWTrayIcon.Create((handle));
{$ENDIF MSWINDOWS}
Tray.popupmenu:=pmTray;

constructor TPWTrayIcon.Create(pHANDLE:TFMXHandle);
Var
  HIco: HICON;
  p:tMenuitem;
begin
{$IFDEF MSWINDOWS}
  FHandle := AllocateHWnd(HandleIconMessage);
  AHandle := FmxHandleToHWND(pHandle);
  try
    Hico:= LoadIcon(MainInstance,'MAINICON');

    tIcon.cbSize := sizeof(tIcon);//TNotifyIconData);
    with tIcon do begin
      Wnd := FHandle;
      uID := 123;
      //guidItem:=123;
      uFlags := NIF_ICON or NIF_MESSAGE or NIF_GUID or NIF_TIP;
      uCallbackMessage := WM_NOTIFYICON;
      hIcon := HIco;
      uVersion:=NOTIFYICON_VERSION_4;
    end;
    Shell_NotifyIcon(NIM_ADD, @tIcon);
    Shell_NotifyIcon(NIM_SETVERSION, @tIcon);
  except

  end;
  {$ENDIF MSWINDOWS}
end;

procedure TPWTrayIcon.HandleIconMessage(var Msg: TMessage);
var
  tmpPoint:TPoint;
begin
  if Msg.Msg = WM_NOTIFYICON then begin
      case LOWORD(Msg.LParam )of
        WM_RBUTTONDOWN:
          if Assigned(PopUp) then begin
            Cardinal(tmpPoint):=(GetMessagePos);  
            {EDIT: the following doesnt work in Firemonkey}
            //SetForegroundWindow(Application.Handle);
            //Application.ProcessMessages;
            if SetForegroundWindow(AHANDLE) then            
              Popup.Popup(tmpPoint.X,tmpPoint.Y);  
          end;       
    end;
  end; 
```

编辑：**解决方法：**

使用 VCL.菜单。而不是 Firemonkey.menus

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:14:45.057

我无法评论为什么您的菜单出现在任务栏后面，因为我从未见过这种情况，但我可以评论您代码中的其他内容。您的图标处理程序需要使用`WM_RBUTTONUP`or`WM_CONTEXTMENU`和 not `WM_RBUTTONDOWN`。此外，为了解决一个众所周知的操作系统错误，即当鼠标在菜单外单击时无法正确关闭弹出菜单，您需要将`Popup()`两者都包装起来`SetForegroundWindow()`，`WM_NULL`但您只做了一半。

```
procedure TPWTrayIcon.HandleIconMessage(var Msg: TMessage);
var
  tmpPoint: TPoint;
begin
  if Msg.Msg = WM_NOTIFYICON then begin
    case LOWORD(Msg.LParam) of
      WM_RBUTTONUP: // or WM_CONTEXTMENU
        if Assigned(PopUp) then begin
          Cardinal(tmpPoint) := GetMessagePos;
          SetForegroundWindow(AHANDLE);
          Popup.Popup(tmpPoint.X, tmpPoint.Y);
          PostMessage(AHANDLE, WM_NULL, 0, 0);  
        end;       
    end;
  end;
end; 
```

# visual-studio-2010 - Visual Studio 安装项目：在卸载时终止正在运行的进程

> ID：15225772
> 
> 赞同：0
> 
> 时间：2013-03-05T14:03:40.427
> 
> 标签：visual-studio-2010, visual-studio, setup-project

这是在任务栏中运行的程序的设置。每次用户登录时它都会启动。

我不能简单地使用 Visual Studio 安装程序升级程序，所以我必须先卸载以前的版本。（**编辑**：它必须是不同的版本，换句话说，它必须在不同的时间编译。如果它是相同的版本，它会给出修复/删除对话框。）

当我卸载时，我希望安装程序终止前一个实例，或者要求用户手动终止它。相反，它想重新启动它，因此新安装无法启动应用程序。

有没有设置可以改变这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T07:36:26.850

所以我认为它无法完成。

我目前的解决方法是在安装时执行一个自定义程序，该程序[执行一个 shell 命令](https://stackoverflow.com/a/1469790/371917)以使用该命令杀死所有正在运行的进程[`TASKKILL`](http://ss64.com/nt/taskkill.html)。（[启动批处理文件](https://stackoverflow.com/a/206347/371917)也是一种选择。）

笔记：

*   我必须在安装时执行此操作。在卸载时执行此操作没有任何区别，因为卸载程序会在执行自定义操作之前检查正在运行的进程。虽然安装后我还有一个正在运行的实例，但至少新的安装程序将能够启动最新版本。
*   `InstallerClass`自定义事件属性上的选项[必须是`false`](https://stackoverflow.com/a/14813956/371917).

**编辑**：唯一的问题是安装程序启动了`.vshost.exe`我的“杀手”应用程序的实例，并在被杀死时重新启动。只有在您注销机器后它才会消失。什么都没有，但我内心的完美主义者觉得这很烦人。

**编辑**：另一个问题是某些病毒程序可能不喜欢这样，您必须接受它为受信任的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T21:14:02.253

好的，一个迟来的答案，也许是一个解决方案。您似乎说节目不能被“杀死”；让它运行，同时安装可以通过此地址[http://www.javelin-tech.com/blog/2012/02/file-is-open-in-another的过程页面下载的 mycrosoft 进程资源管理器-程序/](http://www.javelin-tech.com/blog/2012/02/file-is-open-in-another-program/)

非常好：我能够删除以前隐藏的文件；基本上对于困难的人来说，无论他们跑到哪里，它都会跟踪他们的运动……如果处于休眠状态，它也可以找到它。还有什么...祝你好运，如果你（仍然）需要它！

我想现在虽然你应该拥有它......它的价值！

詹姆士

# jsp - jsp页面中的数字格式异常

> ID：15225780
> 
> 赞同：0
> 
> 时间：2013-03-05T14:03:58.660
> 
> 标签：jsp, exception

我开发了一个简单的 jsp 页面，其中包含两个文本字段和一个用于添加两个数字的提交按钮。在浏览器中编译后显示错误：

```
HTTP Status 500

org.apache.jasper.JasperException: java.lang.NumberFormatException: null 
```

这里的代码：

```
 <%-- 
Document   : index
Created on : Mar 5, 2013, 7:21:57 PM
Author     : VIJI
       --%>

          <%@page contentType="text/html" pageEncoding="UTF-8"%>
        <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
               "http://www.w3.org/TR/html4/loose.dtd">

    <html>
     <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
</head>
<body>
    <form>
        <input type="text" name="a"></input>
        <input type="text" name="b"></input>
        <input type="submit" value="ADD"></input>
        <%!
         int a,b,c;

        %>
        <%

         a=Integer.parseInt(request.getParameter("a"));
         b=Integer.parseInt(request.getParameter("b"));
         c=a+b;

        %>
        Addition of two numbers is<%=c%>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:06:23.120

首先，请避免使用脚本。然后，如果你想获得 int 值，你可以使用这个：

`int num = Integer.valueOf(request.getParameter("a"));` 或者

`int num = Integer.parseInt(request.getParameter("a"))`等，无论如何你喜欢

哦，现在我明白了 - 你有 null。这意味着，该参数的值实际上是空的。检查空值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:06:56.027

当您第一次通过 GET 请求页面时，所有参数都为空，除非您指定它们。所以，如果你只是 GET /index.jsp（假设这就是这个页面的名称），参数“a”和“b”都是空的，并且 Integer.parseInt() 会抛出异常。

此外，您应该听取其他人的建议，并避免在此处使用 scriptlet。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:07:00.607

您的完整 URL 路径是什么？

我的猜测是，你没有 a & b 的参数。这导致提供`null`给`Integer.parseInt()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T19:33:57.940

在第一次调用中，您将没有任何参数值`a`，`b`这会导致`NullPointerException`. 使用 if 条件检查值，如下所示。

```
<%-- 
Document   : index
Created on : Mar 5, 2013, 7:21:57 PM
Author     : VIJI
       --%>

          <%@page contentType="text/html" pageEncoding="UTF-8"%>
        <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
               "http://www.w3.org/TR/html4/loose.dtd">

    <html>
     <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
</head>
<body>
    <form>
        <input type="text" name="a"></input>
        <input type="text" name="b"></input>
        <input type="submit" value="ADD"></input>
        <%!
         int a,b,c;

        %>
        <%
         if (request.getParameter("a") != null){
         a=Integer.parseInt(request.getParameter("a"));
         }else{a=0;}
         if (request.getParameter("b") != null){
         b=Integer.parseInt(request.getParameter("b"));
         }else{b=0;}
         c=a+b;

        %>
        Addition of two numbers is<%=c%>
    </form>
</body> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-14T14:44:55.007

使用`Integer.valueOf();`带有验证的方法，例如

```
String TempNum=request.getParameter("a");
int num=(TempNum!=null)?Integer.valueOf(TempNum):0; 
```

# rabbitmq - 将 RabbitMQ C# 与 AMQ/QPID 和 WSO2 消息代理扇出交换一起使用

> ID：15225784
> 
> 赞同：0
> 
> 时间：2013-03-05T14:04:04.053
> 
> 标签：rabbitmq, wso2, amqp, wso2carbon, qpid

我正在使用 RabbitMQ 2.8.7 DotNet 客户端和 WSO2 MB 3.2.1。我的部署环境是 Win7 R1 64bit 或 Win Server 08 R2 64bit。我遇到了与 Exchange 的多个连接的问题，因此流向多个消费者的数据会间歇性丢失。我们已尝试将 WSO2 MB 更新为 3.2.3 并将我们的交换更改为扇出以解决此连接丢失问题，但遇到了问题。

它会“出现”这个链接有点相关：

[http://wso2-oxygen-tank.10903.n7.nabble.com/Qpid-Authorization-handler-does-not-allow-to-subscribe-td2080.html](http://wso2-oxygen-tank.10903.n7.nabble.com/Qpid-Authorization-handler-does-not-allow-to-subscribe-td2080.html)

我首先想知道这是否是正确的方法。

其次，我想了解我们在运行时使用扇出接收到的当前错误，因为我们无法访问数据。以下是收到的错误、WSO2 MB 日志输出和来自生产者的代码片段。

请告知是否需要更多信息来确定。

收到错误...

```
 "Unhandled Exception:
RabbitMQ.Client.Exceptions.OperationInterruptedException: The AMQP operation
was interrupted: AMQP close-reason, initiated by Peer, code=504, text="org.apache.qpid.AMQSecurityException: Permission denied: binding
[error code 403: access refused]", classId=50, methodId=20, cause=
   at RabbitMQ.Client.Impl.SimpleBlockingRpcContinuation.GetReply()
   at RabbitMQ.Client.Impl.ModelBase.ModelRpc(MethodBase method, ContentHeaderBase header, Byte[] body)
   at RabbitMQ.Client.Framing.Impl.v0_9_1.Model._Private_QueueBind(String queue,
 String exchange, String routingKey, Boolean nowait, IDictionary arguments)
   at RabbitMQ.Client.Impl.ModelBase.QueueBind(String queue, String exchange, String routingKey, IDictionary arguments)
   at RabbitMQ.Client.Impl.ModelBase.QueueBind(String queue, String exchange, String routingKey)
   at Send.Main() 
```

记录@错误时间...

```
INFO   | jvm 1    | 2013/03/01 11:29:27 | [2013-03-01 11:29:27,042] DEBUG {org.apache.qpid.server.protocol.AMQProtocolEngine} -  Frame Received: Frame channelId: 0, bodyFrame: [ConnectionStartOkBodyImpl: clientProperties={platform=[LONG_STRING: .NET], product=[LONG_STRING: RabbitMQ], capabilities=[FIELD_TABLE: {publisher_confirms=[BOOLEAN: true], exchange_exchange_bindings=[BOOLEAN: true], consumer_cancel_notify=[BOOLEAN: true], basic.nack=[BOOLEAN: true]}], copyright=[LONG_STRING: Copyright (C) 2007-2012 VMware, Inc.], information=[LONG_STRING: Licensed under the MPL.  See http://www.rabbitmq.com/], (http://www.rabbitmq.com/%5D,) version=[LONG_STRING: 0.0.0.0]}, mechanism=PLAIN, response=[0, 115, 118, 99, 46, 114, 105, 46, 97, 116, 99, 0, 112, 97, 115, 115, 119, 111, 114, 100], locale=en_US]
INFO   | jvm 1    | 2013/03/01 11:29:27 | [2013-03-01 11:29:27,042]  INFO {org.apache.qpid.server.handler.ConnectionStartOkMethodHandler} -  SASL Mechanism selected: PLAIN
INFO   | jvm 1    | 2013/03/01 11:29:27 | [2013-03-01 11:29:27,042]  INFO {org.apache.qpid.server.handler.ConnectionStartOkMethodHandler} -  Locale selected: en_US
INFO   | jvm 1    | 2013/03/01 11:29:27 | [2013-03-01 11:29:27,681]  INFO {org.apache.qpid.server.handler.ConnectionStartOkMethodHandler} -  Connected as: svc.abc.def
INFO   | jvm 1    | 2013/03/01 11:29:27 | [2013-03-01 11:29:27,681]  INFO {org.apache.qpid.server.handler.ConnectionStartOkMethodHandler} -  Framesize set to 65535
INFO   | jvm 1    | 2013/03/01 11:29:27 | [2013-03-01 11:29:27,681] DEBUG {org.apache.qpid.server.protocol.AMQProtocolEngine} -  Frame Received: Frame channelId: 0, bodyFrame: [ConnectionTuneOkBodyImpl: channelMax=256, frameMax=65535, heartbeat=0]
INFO   | jvm 1    | 2013/03/01 11:29:27 | [2013-03-01 11:29:27,681] DEBUG {org.apache.qpid.server.protocol.AMQProtocolEngine} -  Frame Received: Frame channelId: 0, bodyFrame: [ConnectionOpenBodyImpl: virtualHost=carbon, capabilities=null, insist=false]
INFO   | jvm 1    | 2013/03/01 11:29:27 | [2013-03-01 11:29:27,697] DEBUG {org.apache.qpid.server.protocol.AMQProtocolEngine} -  Frame Received: Frame channelId: 1, bodyFrame: [ChannelOpenBodyImpl: outOfBand=null]
INFO   | jvm 1    | 2013/03/01 11:29:27 | [2013-03-01 11:29:27,697]  INFO {org.apache.qpid.server.handler.ChannelOpenHandler} -  Connecting to: carbon
INFO   | jvm 1    | 2013/03/01 11:29:27 | [2013-03-01 11:29:27,697] DEBUG {org.apache.qpid.server.protocol.AMQProtocolEngine} -  Frame Received: Frame channelId: 1, bodyFrame: [QueueDeclareBodyImpl: ticket=0, queue=fanout, passive=false, durable=false, exclusive=false, autoDelete=false, nowait=false, arguments=null]
INFO   | jvm 1    | 2013/03/01 11:29:27 | [2013-03-01 11:29:27,759]  INFO {org.apache.qpid.server.handler.QueueDeclareHandler} -  Queue fanout bound to default exchange(<<default>>)
INFO   | jvm 1    | 2013/03/01 11:29:27 | [2013-03-01 11:29:27,759]  INFO {org.apache.qpid.server.handler.QueueDeclareHandler} -  Queue fanout declared successfully
INFO   | jvm 1    | 2013/03/01 11:29:27 | [2013-03-01 11:29:27,759] DEBUG {org.apache.qpid.server.protocol.AMQProtocolEngine} -  Frame Received: Frame channelId: 1, bodyFrame: [QueueBindBodyImpl: ticket=0, queue=fanout, exchange=fanout, routingKey=null, nowait=false, arguments=null]
INFO   | jvm 1    | 2013/03/01 11:29:27 | [2013-03-01 11:29:27,759]  INFO {org.apache.qpid.server.protocol.AMQProtocolEngine} -  Closing channel due to: org.apache.qpid.AMQSecurityException: Permission denied: binding  [error code 403: access refused]
INFO   | jvm 1    | 2013/03/01 11:29:27 | [2013-03-01 11:29:27,759]  INFO {org.apache.qpid.server.AMQChannel} -  No consumers to unsubscribe on channel [/192.168.1.14:56087(svc.abc.def):1]
INFO   | jvm 1    | 2013/03/01 11:29:27 | [2013-03-01 11:29:27,775] DEBUG {org.apache.qpid.server.protocol.AMQProtocolEngine} -  Frame Received: Frame channelId: 1, bodyFrame: [ChannelCloseOkBodyImpl: ]
INFO   | jvm 1    | 2013/03/01 11:29:27 | [2013-03-01 11:29:27,775]  INFO {org.apache.qpid.server.protocol.AMQProtocolEngine} -  Channel[1] awaiting closure - processing close-ok
INFO   | jvm 1    | 2013/03/01 11:29:27 | [2013-03-01 11:29:27,775]  INFO {org.apache.qpid.server.handler.ChannelCloseOkHandler} -  Received channel-close-ok for channel-id 1
INFO   | jvm 1    | 2013/03/01 11:29:29 | [2013-03-01 11:29:29,070] DEBUG {org.apache.qpid.server.protocol.AMQProtocolEngine} -  Frame Received: Frame channelId: 0, bodyFrame: [ConnectionCloseBodyImpl: replyCode=200, replyText=Connection close forced, classId=0, methodId=0]
INFO   | jvm 1    | 2013/03/01 11:29:29 | [2013-03-01 11:29:29,070]  INFO {org.apache.qpid.server.handler.ConnectionCloseMethodHandler} -  ConnectionClose received with reply code/reply text 200/Connection close forced for /192.168.1.14:56087(svc.abc.def) 
```

我发现在尝试连接 Java 时也会出现这个问题。生产者的 C# 代码的简短示例如下：

```
class Send {

    public static void Main() {

        string serverAddress = "amqp://" + "192.168.1.12" + ":5672/carbon"; 

            ConnectionFactory factory = new ConnectionFactory();

            factory.Uri = serverAddress;

            using (IConnection connection = factory.CreateConnection())

            using (IModel channel = connection.CreateModel()) {

            channel.QueueDeclare("fanout", false, false, false, null);

            channel.QueueBind("fanout", "fanout", "");

            string message = "Hello World!";

            byte[] body = System.Text.Encoding.UTF8.GetBytes(message);

            channel.BasicPublish("", "hello", null, body);
            Console.WriteLine(" [x] Sent {0}", message);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-18T12:37:31.357

在 WSO2 MB 中，不会为给定的任何名称动态创建交换。因此，要使用“扇出”交换进行这项工作，需要在 qpid-virtualhosts.xml 文件中预先声明。否则使用 WSO2 MB 的默认交换。

您似乎没有正确声明需要绑定队列的交换名称。如果它用于队列，则默认交换名称声明如下，

```
 ch.ExchangeDeclare("amq.direct", "direct"); 
```

如果是主题，`

```
 ch.ExchangeDeclare("amq.topic", "topic"); 
```

请参阅[此](http://isharapremadasa.blogspot.com/2013/08/using-wso2-message-broker-with-rabbitmq.html)博客文章，了解如何将示例 .Net/C# Consumer/Publisher 客户端与 WSO2 消息代理一起使用。`

# android - if 语句通过两种方式

> ID：15225787
> 
> 赞同：-1
> 
> 时间：2013-03-05T14:04:13.237
> 
> 标签：android

好的，我有这个方法，它的结尾是这样的：

```
if(totalDeg > mStartAngle && totalDeg < mSweepAngle){
            return true;
        }
        else {
            return false;
        } 
```

奇怪的是，在逐步调试时，我停在`return true`，在 Eclipse 上按 F6（或 F5），然后下一条指令是`return false`!!!

这怎么可能？

PD。这就是我调用这个函数的地方：

```
if(d.isInArea(x, y)){
            //d.onTap();
            Toast.makeText(mContext, "Directory " + d.getName() + " was tapped!", Toast.LENGTH_SHORT).show();
} 
```

这是 isInArea 方法：

```
public boolean isInArea(float x, float y){
        int deltaX = (int) (x - mRectShape.centerX());
        int deltaY = (int) (y - mRectShape.centerY());

        if (Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2)) > mRectShape.width()/2) {
            return false;
        }

        double offset = 0;

        //now calculate angle
        double angle = Math.atan2(deltaY, deltaX);
        double total = angle;
        double totalDeg = Math.toDegrees(total);
        Log.d(LOG_TAG, "angle :" + totalDeg);

        if(totalDeg > mStartAngle && totalDeg < mSweepAngle){
            return true;
        }
        else {
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:14:18.913

所以，正如你所提到的 - 这是不可能的。我怀疑这与两件事之一有关；(1)*看起来*在 IDE 中运行的代码并不是*实际*运行的代码 - 即项目构建后生成的 dex 文件与 src 不同步或 (2) 的单行声明声明混淆了一些东西——它会让我感到困惑！像这样写 if 语句；

```
boolean withinAcceptedAngle;
if(totalDeg > mStartAngle && totalDeg < mSweepAngle) { 
  withinAcceptedAngle = true; 
}
return withinAcceptedAngle; 
```

...然后做一个*Project Clean*，*Project Build*然后在返回的断点处重新运行。请注意，`boolean`原始类型已初始化，`false`因此您不需要这样声明它。也就是说，在找出差异的原因后，您可以通过编写来缩短代码；

```
return totalDeg > mStartAngle && totalDeg < mSweepAngle; 
```

在这种情况下，我认为缩短更多的是风格。一般来说，虽然我更喜欢速记方法。

# c - 遗憾的是，我的程序中被称为 printf 的打印格式无法运行

> ID：15225792
> 
> 赞同：-7
> 
> 时间：2013-03-05T14:04:35.123
> 
> 标签：c, printf

我真的很沮丧，因为我试图使用这段代码创建一个程序：

```
printf("hello world"); 
```

但是它没有在日志中显示Hello World，这是怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T14:06:27.193

C 中最小的 hello world 程序如下所示：

```
#include <stdio.h>

int main()
{
    printf("Hello World\n");
    return 0;
} 
```

您首先必须包括`stdio.h`哪个可以让您访问该`printf`功能。然后你必须定义一个`main`函数，它是程序的入口点。main 方法中的代码将运行，将“Hello World”打印到控制台，然后程序以代码 0 退出，这意味着它运行成功。

由于您没有提及您使用的编译器，或者您遇到的编译错误，我无法为您做任何其他事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:10:48.280

您的 I/O 可能已被缓冲。您可以尝试通过以下方式刷新所有打开的输出流：

```
fflush(NULL); 
```

# knockout.js - 在 li 标签上使用淘汰赛切换 css 类

> ID：15225793
> 
> 赞同：-3
> 
> 时间：2013-03-05T14:04:42.003
> 
> 标签：knockout.js, knockout-2.0, knockout-mvc

```
<li class="LightColour"> 
```

在用户选择`li`标签更改`class = "DarkColour"`

如何在淘汰赛中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:38:37.897

我建议去阅读淘汰赛中的 CSS 绑定。您可以执行以下操作：

```
<li data-bind="css: yourComputedVariable"> 
```

[http://knockoutjs.com/documentation/css-binding.html](http://knockoutjs.com/documentation/css-binding.html)

由于您的问题非常模糊，没有代码可供我使用，因此无法真正为您提供更多帮助。

# codeigniter - 在 CodeIgniter 中编码，然后在 Python 中解码

> ID：15225795
> 
> 赞同：2
> 
> 时间：2013-03-05T14:04:46.320
> 
> 标签：codeigniter, encryption, python-2.7

我已经通过在 CI 中对它们进行编码来存储登录名、密码等凭据，例如-

```
$login = "foo@example.com";
$this->load->library('encrypt');
$encrypted = $this->encrypt->encode($login);
//Then stored it in db 
```

现在我的一个 python 代码想要获取实际的凭据。所以通过观察 CI 的解码，我在 python 中编写了我自己的 Decrypt 模块——

```
// Like CI get_key
def getKey(self, key):
            self.log.info("In getKey method with key : %s"%key)
            md5Key = hashlib.md5()
            md5Key.update(key)
            return md5Key.hexdigest()

// Like CI base64_decode
def getBase64Decode(self, encString):
            self.log.info("In getBase64Decode.")
            b64DecString = base64.b64decode(encString)
            return b64DecString

// Like CI _xor_decode
def xorDecode(self, string, key):
            self.log.info("In xorDecode method with string : %s and key : %s"%(string, key))
            mString = self.xorMerge(string, key)
            if mString == self.FAILED:
                    self.log.info("xorMerge Failed!")
                    return self.FAILED
            self.log.info("xor Merge returned %s"%mString)
            dec = ''
            for (x, y) in izip(mString[1:], cycle(mString)):
                   dec += ''.join(chr(ord(x) ^ ord(y)))

// Like CI _xor_merge
def xorMerge(self, string, key):
            self.log.info("In xorMerge method. with string : %s and key : %s"%(string, key))
            hashString = self.hashMethod(key)
            if hashString == self.FAILED:
                    self.log.info("hasMethod failed!")
                    return self.FAILED
            self.log.info("hash method retured : %s"%hashString)
            xored = ''
            for (x, y) in izip(string, cycle(hashString)):
                   xored += ''.join(chr(ord(x) ^ ord(y)))

// Like CI hash
def hashMethod(self, key):
            self.log.info("In hash method with key : %s"%key)
            hashStr = ''
            try:
                    hashStr = hashlib.sha1(key).hexdigest()
            except Exception, e:
                    self.log.info("Exception in sha1 %s"%str(e))
                    return self.FAILED
            return hashStr

// Like CI decode
def decode(self, string):
            self.log.info("In decode method. Decoding string : %s"%string)
            securitySection = "security"
            keyItem = "key"
            key = self.config.get(securitySection, keyItem)
            if not key:
                    self.log.info("Key Invalid")
                    return  self.FAILED
            key = self.getKey(key)
            self.log.info("Encrypted key : %s"%key)
            dec = self.getBase64Decode(string)
            self.log.info("b64decoded string : %s"%dec)
            xorDec = self.xorDecode(dec, key)
            if xorDec == self.FAILED:
                    self.log.info("Decoding failed!")
                    return self.FAILED
            self.log.info("Decoded string: %s"%xorDec)
            return xorDec 
```

以上所有方法都写在 Decrypt 模块的 Decrypt 类中。

因此，当我将加密字符串传递给 decode 方法时，我得到了一些奇怪的 unicode 字符串，而不是实际的凭据。当我用 CI 检查它时，`xorMerge`上面的代码不会产生与`_xor_merge`CI 中给出的相同的输出。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:40:15.163

如果你使用相同`encoding/decoding standard`的并且`same encryption key`你应该没有语言之间的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:22:05.537

我编写了一个 python 模块来“使用加密库解密在 CodeIgniter 中加密的内容”。[这里](https://github.com/hussaintamboli/Decrypt)`checkout`的代码

# wpf - 限制 Window.SizeToContent 仅展开

> ID：15225798
> 
> 赞同：5
> 
> 时间：2013-03-05T14:04:54.423
> 
> 标签：wpf, window

是否可以以某种方式限制[`Window.SizeToContent`](http://msdn.microsoft.com/en-us/library/system.windows.window.sizetocontent.aspx)仅扩大尺寸？

[我有一个在TabControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.tabcontrol.aspx)中动态填充内容的通用窗口。由于一开始并不知道每个 TabItem 会有多大，因此我无法预先计算所需的大小（尽管我只关心高度）以在不滚动的情况下全部显示。

每当更改选项卡时，启用`SizeToContent`将自动将大小调整为所需尺寸。虽然它只在当前视图需要更多空间时才展开是可以的，但我不喜欢在需要更少空间时窗口也会缩小。是否可以将`SizeToContent`行为限制为只允许*扩展*窗口大小？或者是否可以以不同的方式模拟行为，同时考虑到选项卡控件旁边的窗口框架和其他组件仍然产生正确的结果？

我尝试连接到不同的窗口事件，以找出更改选项卡时新大小信息的去向，但窗口上唯一真正有用的信息[`OnChildDesiredSizeChanged`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.onchilddesiredsizechanged.aspx)没有产生确定性结果（对于某些选项卡，它被调用，对于其他选项卡，它不是t)。你还有别的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:09:19.927

您可以尝试使用[FrameworkElement.MinHeight](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.minheight.aspx)和[FrameworkElement.MinWidth](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.minwidth.aspx)`Window`来设置加载后的最小高度/宽度。

```
public void WindowLoaded()
{
    this.MinHeight = this.ActualHeight;
    this.MinWidth = this.ActualWidth;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-12T08:38:23.910

我尝试了 Bobs 的方法。他的回答是正确的方法。

在我的情况下，WindowLoaded 事件提前触发。它在内容呈现之前触发。

因此，我使用了“ContentRendered”事件，现在如果内容大小减小，我的窗口不会缩小。如果您的内容在第一次显示窗口后可能会增加其大小，您可以使用“SizeChanged”事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-01T13:23:58.173

在我的情况下，我使用了 Binding`ActualWidth`和`ActualHeight`to`MinWidth`和`MinHeight`在窗口中：

```
 x:Name="printWnd"
    SizeToContent="WidthAndHeight"
    MinWidth="{Binding ActualWidth, ElementName=printWnd}"
    MinHeight="{Binding ActualHeight, ElementName=printWnd}" 
```

# iphone - 自定义 UITabBar 选定的选项卡图像，iOS 5 及更高版本

> ID：15225801
> 
> 赞同：3
> 
> 时间：2013-03-05T14:04:58.883
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uitabbarcontroller

我正在创建一个自定义`UITabBarController`，以`tabBar`这种方式自定义：

```
self.tabBar.backgroundImage = [UIImage imageNamed:@"imgTabBarBeta.png"]; 
```

然后我以这种方式更改选择器指示器：

```
self.tabBar.selectionIndicatorImage = [UIImage imageNamed:@"imgTabBarSegmentSelected.png"]; 
```

但显然它成为我所有 4 个选项卡的选定图像，我希望*每个选项卡*都有自己的`selectionIndicatorImage`.

关于如何实现这种事情的任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T14:13:59.290

你可以看看这个：

[为标签栏设置背景图像](https://stackoverflow.com/questions/8909379/setting-a-background-image-for-a-tabbar/9021698#9021698)

[http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)

或者试试这个 Github 项目

[https://github.com/briancollins/BCTabBarController](https://github.com/briancollins/BCTabBarController)

# facebook - 使用我的应用检索所有 facebook 用户的列表

> ID：15225806
> 
> 赞同：0
> 
> 时间：2013-03-05T14:05:18.833
> 
> 标签：facebook, api, list

我是管理和分析工具的开发人员，我正在尝试提供一些有关 facebook 应用程序使用情况和一些管理功能的具体统计数据。

我想知道是否有某种 api 来检索当前正在使用我的应用程序的所有用户的列表。我已经阅读了整个 facebook 文档，但我找不到关于这个论点的任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:18:10.967

[此处](https://developers.facebook.com/docs/reference/rest/users.isAppUser/)的 Facebook 开发人员文档展示了如何检查当前用户是否也是您的应用程序的用户。

一旦您在用户授予您的应用程序权限时获得用户的 user_access_token，请向以下 URL 发出 GET 请求。

```
https://graph.facebook.com/userId?fields=installed&access_token=<user_access_token> 
```

`installed = true`如果具有 userId 的用户是应用程序的用户， 这将返回。

您可以在 Facebook 开发人员文档中的[User 对象](https://developers.facebook.com/docs/reference/api/user/)下阅读有关`installed`字段的更多信息。

# c - 有什么办法可以关闭 gdb 的输入缓冲区检查？

> ID：15225812
> 
> 赞同：1
> 
> 时间：2013-03-05T14:05:26.053
> 
> 标签：c, gdb

我正在学习使用 GDB 导致安全类的缓冲区溢出。我有一个输入文件，当我将其作为输入输入时，它通过写入缓冲区溢出成功地导致程序跳转到未经授权的函数，如下所示：

```
sh myFile.txt | ./myProgram 
```

现在我想使用 GDB 检查未经授权的功能。[但是，当我使用tty 命令或使用 <](http://sourceware.org/gdb/onlinedocs/gdb/Input_002fOutput.html) GDB将 myFile 作为输入提供给 GDB 时，只需要我输入的中间 20 字节来填充 20 字节缓冲区。似乎 GDB 正在“检查”输入的缓冲区大小。

1.  这就是gdb正在做的事情吗？
2.  如果是这样，有没有办法关闭它？

C 代码如下所示：

```
 char one[20];
  char two[20];

  printf("..."); fflush(stdout);
  gets(one);   //only takes 20 bytes from the middle of printf "morethan20bytes..." from input file
  printf("..."); fflush(stdout);
  gets(two);   //only takes 20 bytes from the middle of printf "morethan20bytes..." from input file 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:03:14.610

gdb 没有“拿走”任何东西。它只是假设您只想查看“one”的内容，仅此而已。

你知道在调试器中打印变量的 {type}expr@num 符号吗？例如，要查看缓冲区中第 20 个索引后“one”的内容：

```
(gdb) next
...10     gets(one);   //only takes last 20 bytes of printf "morethan20bytes..." from input file
(gdb) next
BLAHBLAHBLAHBLAHBLAHBLAHBLAHBLAHBLAHBLAHBLAH   # <== simulating input
11    printf("..."); fflush(stdout);

(gdb) print one
$2 = "BLAHBLAHBLAHBLAHBLAH" 
```

上面，“一个”似乎只有 20 个字符。但那是因为 gdb 假设您只想查看 20 个字节。

现在让我们打印出从“one”的内存地址开始的前 40 个字符

```
(gdb) print {char}one@40
$3 = "BLAHBLAHBLAHBLAHBLAHBLAHBLAHBLAHBLAHBLAH" 
```

您可以清楚地看到它超出了缓冲区长度

```
(gdb) print two
$4 = "BLAHBLAHBLAH\000\000\000\000\000\000\000" 
```

你可以看到溢出也写入了“二”。

```
(gdb) x one
0x7fffffffe750: 0x48414c42
(gdb) print {char}0x7fffffffe750@40
$6 = "BLAHBLAHBLAHBLAHBLAHBLAHBLAHBLAHBLAHBLAH" 
```

上面你可以看到我们可以用内存地址做同样的事情。

# java - Try-catch-finally-return 澄清

> ID：15225819
> 
> 赞同：74
> 
> 时间：2013-03-05T14:05:48.317
> 
> 标签：java, return, try-catch, finally

通过阅读本论坛中已经提出的与上述主题相关的所有问题（见标题），我完全理解`finally`总是被调用。（除了 from`System.exit`和无限循环）。但是，我想知道是否`return`在 catch 块中调用了 a ，然后`return`从 finally 块中调用了另一个。

例如：

```
public static void main(String[]args) {
    int a = new TestClass().absorbeTheValue();
}

int absorbeTheValue() {
    try {
        int a = 10/0;
        if (a > 0) return 4;
    } catch(Exception e) {
        return 45;
    } finally {
        return 34;
    }
} 
```

所以这里的输出（当方法被调用时）在任何情况下都将是 34。这意味着 finally 总是运行。我认为虽然其他“回报”根本没有运行。在许多帖子中，我发现最终将内容写入 catch 子句返回已经写入的内容。我的理解是，一旦 catch 子句中的返回值即将被评估，控制流就会传递给 finally 子句，该子句又会返回另一个返回值，这一次将评估返回值，而不会将控制权传递回 catch 子句. 这样，`return`在运行时唯一调用的将是 finally 返回。你同意吗？

A `return`in`finally`不会将控制权传递回程序，而是返回值并终止方法。我们可以这么说吗？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-03-05T14:11:24.040

如果`return`到达`try`块中，它会将控制权转移给`finally`块，并且函数最终正常返回（而不是抛出）。

如果发生异常，但随后代码`return`从`catch`块中到达 a，则控制权将转移到`finally`块，并且函数最终正常返回（而不是 throw）。

在您的示例中，您有一个`return`in `finally`，因此无论发生什么，该函数都会返回`34`，因为`finally`有最后一个（如果您愿意的话）单词。

尽管您的示例中没有涉及，但即使您没有，并且如果在块`catch`中引发异常并且*未*捕获异常，这也是正确的。通过从块中执行，您可以完全抑制异常。考虑：`try`*`return``finally`*

 *```
public class FinallyReturn {
  public static final void main(String[] args) {
    System.out.println(foo(args));
  }

  private static int foo(String[] args) {
    try {
      int n = Integer.parseInt(args[0]);
      return n;
    }
    finally {
      return 42;
    }
  }
} 
```

如果您在不提供任何参数的情况下运行它：

```
$java 最终返回
```

...中的代码`foo`抛出一个`ArrayIndexOutOfBoundsException`. 但是因为该`finally`块做了 a `return`，所以该异常被抑制了。

这是最好避免使用`return`in的原因之一`finally`。

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2013-03-05T14:18:20.370

这是一些显示它如何工作的代码。

```
class Test
{
    public static void main(String args[]) 
    { 
        System.out.println(Test.test()); 
    }

    public static String test()
    {
        try {
            System.out.println("try");
            throw new Exception();
        } catch(Exception e) {
            System.out.println("catch");
            return "return"; 
        } finally {  
            System.out.println("finally");
            return "return in finally"; 
        }
    }
} 
```

结果是：

```
try
catch
finally
return in finally 
```*

# java - 应用程序在菜单膨胀时崩溃。如何纠正？

> ID：15225820
> 
> 赞同：0
> 
> 时间：2013-03-05T14:05:48.753
> 
> 标签：java, android

所以我试图让菜单充气机使用以下代码从我想要菜单的活动中工作。

当我单击该项目以打开我的应用程序关闭时，我只收到一条消息说不幸的是这个应用程序已停止运行。

谁能帮忙。

```
@Override
public boolean onCreateOptionsMenu(android.view.Menu menu) {
// TODO Auto-generated method stub
 super.onCreateOptionsMenu(menu);
 MenuInflater blowUp = getMenuInflater();
 blowUp.inflate(R.menu.cool_menu, menu);

 return true;
}

@Override

public boolean onOptionsItemSelected(MenuItem item) {
// TODO Auto-generated method stub
switch(item.getItemId()){
case R.id.aboutUs:
    Intent i = new Intent(Menu.this, AboutUs.class);
    startActivity(i);
    break;
case R.id.prefs:

    break;
}
return false;
} 
```

这是菜单项单击的类：

```
public class AboutUs extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.about);
} 
```

日志猫：

```
03-05 14:12:25.265: D/AbsListView(21911): Get MotionRecognitionManager
03-05 14:12:25.545: E/SpannableStringBuilder(21911): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
03-05 14:12:25.545: E/SpannableStringBuilder(21911): SPAN_EXCLUSIVE_EXCLUSIVE spans cannot have a zero length
03-05 14:12:58.990: D/AbsListView(21911): Get MotionRecognitionManager
03-05 14:13:03.065: D/AndroidRuntime(21911): Shutting down VM
03-05 14:13:03.065: W/dalvikvm(21911): threadid=1: thread exiting with uncaught exception (group=0x40ee92a0)
03-05 14:13:03.080: E/AndroidRuntime(21911): FATAL EXCEPTION: main
03-05 14:13:03.080: E/AndroidRuntime(21911): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.learn.tam/com.example.learn.tam.AboutUs}; have you declared this activity in your AndroidManifest.xml?
03-05 14:13:03.080: E/AndroidRuntime(21911):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1545)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1420)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at android.app.Activity.startActivityForResult(Activity.java:3446)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at android.app.Activity.startActivityForResult(Activity.java:3407)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at android.app.Activity.startActivity(Activity.java:3617)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at android.app.Activity.startActivity(Activity.java:3585)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at com.example.learn.tam.Menu.onOptionsItemSelected(Menu.java:57)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at android.app.Activity.onMenuItemSelected(Activity.java:2629)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:1047)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at com.android.internal.view.menu.ListMenuPresenter.onItemClick(ListMenuPresenter.java:180)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at android.widget.AdapterView.performItemClick(AdapterView.java:301)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at android.widget.AbsListView.performItemClick(AbsListView.java:1276)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:3067)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at android.widget.AbsListView$1.run(AbsListView.java:3963)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at android.os.Handler.handleCallback(Handler.java:615)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at android.os.Looper.loop(Looper.java:137)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at android.app.ActivityThread.main(ActivityThread.java:4898)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at java.lang.reflect.Method.invokeNative(Native Method)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at java.lang.reflect.Method.invoke(Method.java:511)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
03-05 14:13:03.080: E/AndroidRuntime(21911):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
03-05 14:13:03.080: E/AndroidRuntime(21911):at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:18:45.593

> android.content.ActivityNotFoundException：找不到明确的活动类 {com.example.learn.tam/com.example.learn.tam.AboutUs}；您是否在 AndroidManifest.xml 中声明了此活动？

在 中声明您的`AboutUs`活动`AndroidManifest.xml`。如果已声明，请确保声明中的包名称正确。

# windows-phone-7 - GeoCoordinateWatcher 位置更改事件未触发，而应用程序不在前台（理想状态）

> ID：15225826
> 
> 赞同：0
> 
> 时间：2013-03-05T14:06:13.950
> 
> 标签：windows-phone-7

我正在开发一个基于位置的 wp7 应用程序，如果位置有任何变化，我需要更新位置。

我正在使用 GeoCoordinateWatcher 来获取位置。

它工作正常，只要位置改变，位置改变事件就会触发。

但是位置更改事件根本没有触发，而应用程序处于理想状态。

我如何获取位置更新，而我的应用程序没有在前台运行，这意味着我的应用程序处于理想状态。

任何人都可以给我一个解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:15:59.043

你不能得到这样的东西。当应用程序不在前台时，Windows Phone 7 会挂起您的应用程序。这是操作系统本身的限制。

在 Windows Phone 8 中，当您的应用程序通过后台定位服务在后台运行时，您可以获得此类信息。在 MSDN 上阅读有关它的更多信息：

*   [如何为 Windows Phone 8 持续跟踪手机的位置](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj247548%28v=vs.105%29.aspx)
*   [如何在 Windows Phone 8 的后台运行位置跟踪应用程序](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj662935%28v=vs.105%29.aspx)

编辑：在运行时，您可以使用许多其他 API。要查看可以使用哪些 API，请查看[在 Windows Phone 8 的后台运行时可以使用的功能](http://msdn.microsoft.com/en-US/library/windowsphone/develop/jj662941%28v=vs.105%29.aspx)。可以在后台任务中调用 Web 服务。

# ruby-on-rails - Doorkeeper with Omniauth - 如何处理用户未授权的情况？

> ID：15225827
> 
> 赞同：1
> 
> 时间：2013-03-05T14:06:14.760
> 
> 标签：ruby-on-rails, ruby, oauth-2.0, doorkeeper

我正在使用 Doorkeeper 和 Omniauth。客户端重定向到我的授权端点，该端点重定向到登录页面。用户被要求通过 Facebook 进行身份验证，之后他登录并且流程返回到 Doorkeeper。

我的问题是，如果用户选择不登录，则流程永远不会返回到 Doorkeeper。我希望流程将返回到 Doorkeeper，这将向客户端返回错误。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T11:56:34.347

这不是一个真正的问题。用户主动选择不连接并做其他事情。

解决方法取决于您是否在当前选项卡、新选项卡或新窗口中重定向。如果你替换了你的标签/窗口，他就不再在你的应用程序中了。如果在新标签中，您的网页仍然打开，或者您的 oauth 消费者的网页仍然打开。如果用户真的想要，这些页面应该能够单击按钮再次尝试连接。

如果您的页面仍在选项卡中，您可以执行 javascript setTimeout，但它的用途是什么？

听起来你只是在想这个:) 你最终得到了什么？

# spring - Java EE xml bean

> ID：15225832
> 
> 赞同：0
> 
> 时间：2013-03-05T14:06:24.237
> 
> 标签：spring, java-ee-6

是否可以像在 Spring 中通过 XML 配置文件一样在 Java EE 中定义 bean。

在春天我可以参加 POJO

```
public class ClickCounter {

private int count;  
public int getCount() {return count;}  
public void setCount(int count) {this.count = count;}

} 
```

并在 xml 中定义 bean

```
<bean id="clickCounter" class="com.clickcounter.ClickCounter">
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:19:25.650

是的，只需创建一个 emtpy beans.xml，如：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="
        http://java.sun.com/xml/ns/javaee 
        http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">
</beans> 
```

然后创建你的bean：

```
import javax.ejb.Singleton;
@Singleton
public class MyBean{
} 
```

# c# - 在组合框中显示项目索引

> ID：15225834
> 
> 赞同：0
> 
> 时间：2013-03-05T14:06:28.557
> 
> 标签：c#, wpf, mvvm

我有一个组合绑定到项目源。我想将项目的索引显示为 DisplayMemberPath 而不是绑定对象的任何属性。

我怎样才能达到同样的效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:36:15.590

您可以使用 MultiValueConverter 执行此操作，方法是传入集合和当前项目，然后返回项目集合中项目的索引：

```
public class ItemToIndexConverter : IMultiValueConverter
{
    public object Convert(object[] value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var itemCollection = value[0] as ItemCollection;
        var item = value[1] as Item;

        return itemCollection.IndexOf(item);
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

Xaml

```
<ComboBox Name="MainComboBox" ItemsSource="{Binding ComboSourceItems}">
    <ComboBox.Resources>
        <cvtr:ItemToIndexConverter x:Key="ItemToIndexConverter" />
    </ComboBox.Resources>
    <ComboBox.ItemTemplate>
        <DataTemplate DataType="{x:Type vm:Item}">
            <Label>
                <Label.Content>
                    <MultiBinding Converter="{StaticResource ItemToIndexConverter}">
                        <Binding Path="Items" ElementName="MainComboBox" />
                        <Binding />
                    </MultiBinding>
                </Label.Content>
            </Label>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:50:49.120

改变你`ItemsSource`的东西是这样的：

```
public List<Tuple<int,YourObject>> MyItems {get;set;} //INotifyPropertyChanged or ObservableCollection

public void PopulateItems(List<YourObject> items)
{
     MyItems = items.Select(x => new Tuple<int,YourObject>(items.IndexOf(x),x)).ToList();
}

<ComboBox ItemsSource="{Binding MyItems}" DisplayMemberPath="Item1"/> 
```

# android - 如何获取当前的SIM卡号码

> ID：15225835
> 
> 赞同：0
> 
> 时间：2013-03-05T14:06:36.887
> 
> 标签：android

我正在尝试在 android 中获取所有者的联系人号码，它在模拟器中运行良好，但在手机中无法正常工作。这是代码

```
TelephonyManager tm = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
    String imei = tm.getDeviceId();
    String phoneNumber = tm.getLine1Number(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:08:44.217

不保证`getLine1Number()`总是在所有设备上返回 SIM 卡的号码。因为号码的可用性取决于它在 SIM 卡中的存储。

如果该号码未存储在 SIM 卡中/不可用，则该方法将返回空字符串。

为了获取用户的电话号码，您应该从用户的设备向您的服务器或设备发送一条短信（与 Viber 或其他应用程序相同）。并且为了一个好的做法，请确保在用户确认的情况下完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:08:34.963

采用：

```
TelephonyManager telemamanger = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
String getSimSerialNumber = telemamanger.getSimSerialNumber();
String getSimNumber = telemamanger.getLine1Number(); 
```

并将以下权限添加到您的`Androidmanifest.xml`文件中。

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

编辑：

尝试使用 getSimSerialNumber()

`getLine1Number()``MSISDN`- 此方法返回第 1 行的电话号码字符串，即`GSM`电话号码。如果不可用，则返回 null。

此方法仅适用于少数手机，但不适用于所有手机。

因此，如果您需要根据 sim 执行操作（而不是调用），那么您应该使用`getSimSerialNumber()`. 它始终是唯一的、有效的并且始终存在。

字符串 sSimSerial = mTelephonyMgr.getSimSerialNumber();

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T14:10:00.497

[getSimSerialNumber ()](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getSimSerialNumber%28%29)是您需要调用以获取 SimSerialNumber 的方法。

**代码更新**：

```
TelephonyManager tm=(TelephonyManager)mAppContext.getSystemService(Context.TELEPHONY_SERVICE);
String imei = tm.getDeviceId();
String phoneNumber = tm.getLine1Number();
String simSerialNumber = tm.getSimSerialNumber(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T14:13:04.320

1）通过添加检查清单文件，

2) 在您的实现中使用 android.hardware.telephony.gsm。

```
 It should work fine.. 
```

# ember.js - App.Router 未使用 Ember 和 Require 定义

> ID：15225836
> 
> 赞同：0
> 
> 时间：2013-03-05T14:06:38.070
> 
> 标签：ember.js

我正在尝试将 Ember.js 与 Require.js 一起使用，但是当我想使用此代码创建一些路由时出现了一个奇怪的错误：

```
define([
   'lib/ember/load',
   "app/views/main-views",
   "app/views/nav-views",
   "app/views/body-views"
], function(em, MainViews, NavViews, BodyViews) {

    // Create a local namespace for the app
    var App = Ember.Application.create();   
    em.App = App;

    App.Router.map(function() {
        this.route("about");
    });

    // Export it from the module.
    return App;
}); 
```

我有：`cannot call map of undefined`。

也许，这是一个 RequireJS 配置问题？但我认为所有数据都已正确加载。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T23:10:38.800

我知道这是一篇旧帖子，但我认为问题在于您尝试设置不允许的 Ember 对象的属性（`em.App = App`）。所以这会导致错误——如果你用一个工作的 ember 项目来尝试为 Ember 对象设置一个属性，你最终会得到相同的行为。

我有一个使用 requirejs 设置的 ember 项目，还有带有模板预编译的 grunt 自动化，你应该在[github](https://github.com/CoderPio/ember-require-grunt-precompile)上查看它。

# iis - 使用 WIX 在 Web 应用程序下创建虚拟目录

> ID：15225841
> 
> 赞同：2
> 
> 时间：2013-03-05T14:06:48.917
> 
> 标签：iis, wix, wix3.5

我想向我的 Web 应用程序添加一个虚拟目录，该目录指向 TARGETDIR 之外的某个文件夹，

关于如何使用 WIX 实现这一目标的任何想法或示例？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:37:23.847

`WebVirtualDir`元素必须指向一个元素`Directory`。幸运的是，您可以通过`Directory`许多不同的方式轻松地重新定位 a。假设这样的目录树：

```
<Directory Id="TARGETDIR" Name="Source">
  <Directory Id="VIRTUALDIR" Name="retargeted">
  </Directory>
</Directory> 
```

和组件如：

```
<Component Id="Vdir" Directory="VIRTUALDIR">
   <File Source="myweb.dll" />
   <iis:WebVirtualDir Id="Myvdir" Directory="VIRTUALDIR" Alias="my/app/here" />
</Component> 
```

现在你可以像对待`VIRTUALDIR`一个`Property`. 因为它都是大写，所以你可以在命令行上设置它：

```
msiexec /i foo.msi /l*v log.txt VIRTUALDIR=C:\root\web\vdirhere 
```

或者通过 MSI 对话框中的 UI 元素设置它（代码太多，无法显示示例），甚至使用搜索来设置它：

```
<Property Id="VIRTUALDIR">
  <RegistrySearch Id="FindPlaceToPutVdir" ... />
</Property> 
```

很多选择。

# c# - 为什么 C# 服务参考向导会生成重复的配置代码？

> ID：15225842
> 
> 赞同：1
> 
> 时间：2013-03-05T14:06:49.397
> 
> 标签：c#, visual-studio-2010, web-services, soap

如果我在引用 Web 服务之后查看 app.config 的输出，使用可视化 2010 服务引用向导，这就是我在`basicHttpBinding`app.config 节点中得到的结果：

```
 <basicHttpBinding>
            <binding name="FirmNameServiceSOAPServiceSoapBinding" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="Transport">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
            <binding name="FirmNameServiceSOAPServiceSoapBinding1" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
        </basicHttpBinding> 
```

节点`binding name="FirmNameServiceSOAPServiceSoapBinding"`和`binding name="FirmNameServiceSOAPServiceSoapBinding1"`完全重复。

你知道原因吗？它对某事有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:44:23.290

我的预感是你的服务暴露了多个`BasicHttpBindings`. 我会检查你的服务配置。

您可以通过在类似路径中找到的 WcfTestClient 看到她发生了什么：

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\WcfTestClient.exe 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:33:09.333

我只是评论了第二个`<Binding>`节点。然后，它仍然可以正确构建和执行。

我确实认为**这是一个 MS Visual 2010 错误**，它正在污染应用程序配置文件。当试图了解发生了什么时，这无济于事。

# unit-testing - Windows Phone 8 单元测试卡在“运行测试”

> ID：15225851
> 
> 赞同：0
> 
> 时间：2013-03-05T14:07:07.573
> 
> 标签：unit-testing, windows-phone-8, silverlight-toolkit

我正在尝试在我的 Windows Phone 8 应用程序中实现单元测试，但是测试运行器无法识别测试。我正在关注本教程。

[Windows Phone 8 中的单元测试基础知识](http://wp.qmatteoq.com/unit-testing-in-windows-phone-8-the-basics/)

```
using Microsoft.Phone.Testing;
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace PPS.Tests 
{
[TestClass]
class SampleTest
{
    [Tag("SimpleTests")]
    [TestMethod]
    public void SimpleTest()
    {
        int a = 1;
        int b = 2;

        int c = a + b;

        Assert.IsTrue(c == 4);
    }
}
} 
```

![在此处输入图像描述](../Images/df1d4a87e6b58baf1b17be82575b3a7f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:42:03.367

我很确定您的测试类需要公开，而不是内部的（它将是默认的），即：

`public class SampleTest`

# django - Django 国际化在百日草博客应用程序中 DEBUG = True 时不起作用

> ID：15225854
> 
> 赞同：0
> 
> 时间：2013-03-05T14:07:16.363
> 
> 标签：django, internationalization, zinnia

需要一些我仍然缺乏的 django 内部知识的东西之一。我正在测试一个博客应用 zinnia ( [http://django-blog-zinnia.com/](http://django-blog-zinnia.com/) )。使用 DEBUG = False，我的网站没有静态资产（本地，我可以理解），使用 DEBUG = True，静态可以，但翻译不起作用，即网站没有以我选择的语言呈现。我使用股票开发服务器（runserver）。为什么？哪位好心人解释一下？：）

settings.py 的相关部分：

```
gettext = lambda s: s

DEBUG = True

LOCALE_PATHS = (os.path.join(os.path.dirname(__file__), 'locale'))

USE_I18N = True

LANGUAGE_CODE = 'pl'

DEFAULT_LANGUAGE = 1

LANGUAGES = (
    ('pl', gettext('Polish')),
    ('en', gettext('English')),
    ---snip--- ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:08:08.127

不确定这是否是您问题的根源，但您的`LOCALE_PATHS`设置对我来说看起来不对。它应该是一个元组，而你的结果是一个字符串。这不是一条绝对路径。

尝试这样的事情：

```
LOCALE_PATHS = (
   os.path.abspath(os.path.join(os.path.dirname(__file__), 'locale')),
) 
```

# java - 如何将私钥从证书导入密钥库（Tomcat）？

> ID：15225858
> 
> 赞同：3
> 
> 时间：2013-03-05T14:07:29.287
> 
> 标签：java, security, tomcat, ssl, jira

安装 JIRA（Tomcat 服务器）后，我们注意到存在安全问题（清除密码）。所以我们决定实施 SSL。

我们决定根据这两个教程执行步骤：

*   [通过 SSL 或 HTTPS 运行 JIRA](https://confluence.atlassian.com/display/JIRA/Running+JIRA+over+SSL+or+HTTPS)
*   [Apache Tomcat 7，SSL 配置方法](https://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html)

我们正在使用：

*   证书颁发机构生成的证书。
*   雄猫 7
*   视窗服务器 2008 R2

我们的步骤：

*   导入证书（使用`keytool`命令，all 链）
*   添加 Java 参数 (`-Djavax.net.ssl.trustStore=`和`Djavax.net.ssl.trustStorePassword`)
*   更改`server.xml`文件（删除注释并编辑 SSL 部分）
*   重启 Tomcat 服务（和服务器）

结果：

*   SSL 不工作
*   我们可以在windows的个人存储中看到*trustedCertEntry*和*PrivateKeyEntry*

经过调查，我们认为问题在于我们的密钥库中的条目是*trustedCertEntry*，并且没有*PrivateKeyEntry*。

我们是否需要将*PrivateKeyEntry*导入 Tomcat 密钥库？如果是，我们如何将*PrivateKeyEntry*导入密钥库？

# cuda - Geforce 9500 GT 可以运行 CUDA Toolkit 5.0 吗？

> ID：15225859
> 
> 赞同：3
> 
> 时间：2013-03-05T14:07:33.143
> 
> 标签：cuda, nvidia

Geforce 9500 GT 可以运行 CUDA Toolkit 5.0 吗？

在主页：[https ://developer.nvidia.com/cuda-gpus](https://developer.nvidia.com/cuda-gpus)

Geforce 9500 GT 有 Compute Capability 1.0 这意味着只运行 CUDA 1.0？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T15:50:45.067

截至 2013 年，CUDA Toolkit 支持所有 CUDA 设备，即使是 Compute Capability 1.0（缩写为 CC 1.0）。并且所有版本的 Toolkit 都支持 CC 1.0 设备。答案是“是的，Geforce 9500 GT 可以与 CUDA Toolkit 5.0 一起使用”。

根据当前 Cuda Toolkit（版本 5）的发行说明，[http](http://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html) ://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html ，“支持的 NVIDIA 硬件”部分：

> 支持的 NVIDIA 硬件
> 
> 请参阅[http://www.nvidia.com/object/cuda_gpus.html](http://www.nvidia.com/object/cuda_gpus.html)。

[因此，支持http://developer.nvidia.com/cuda-gpus](http://developer.nvidia.com/cuda-gpus)中列出的所有 GPU ，从带有 CC 1.0 的 GeForce 8xxx 到带有 CC 3.5 的大多数现代 Tesla K20。

您始终可以使用最新版本的 Toolkit 来处理任何一代支持 CUDA 的设备。使用较旧的 GPU，您可以在 GPU 上运行的内容受到限制（在较新的 CC 中添加了一些功能）。某些功能，如 64 位浮点（双精度）或性能计数器在 CC 1.0 中不可用。

以下是不同计算能力中的一些特性表：

[http://en.wikipedia.org/wiki/CUDA#Version_features_and_specifications](http://en.wikipedia.org/wiki/CUDA#Version_features_and_specifications)

或者

[http://www.geeks3d.com/20100606/gpu-computing-nvidia-cuda-compute-capability-comparative-table/](http://www.geeks3d.com/20100606/gpu-computing-nvidia-cuda-compute-capability-comparative-table/)

据我所知，Toolkit 通常会为每个受支持的 CC 发出几种代码变体。在运行时兼容的变体将由 CUDA 驱动程序加载。

# node.js - 用子项目集中项目中的 node_modules

> ID：15225865
> 
> 赞同：17
> 
> 时间：2013-03-05T14:07:47.680
> 
> 标签：node.js, gruntjs, node-modules

是否可以通过在中心点上拥有所需模块的方式来配置 grunt？

我有以下项目结构

```
-Project
-- subproject
-- subproject
-- subproject 
```

我通过 grunt 构建所有子项目的项目，我也可以为自己构建每个子项目。目前我有一个 Gruntfile.js、package.json 和文件夹 node_modules (~50mb)，其中包含每个子项目和根级别的所有必需模块。

那么是否可以将 node_modules 文件夹仅放在一个级别上，例如在根级别上，而子项目在根级别上引用 node_modules？

```
-Project
--subproject
--subproject
--subproject
--node_modules 
```

有没有办法通过 package.json 或其他方式引用 node_module 文件夹？

编辑：

Gruntfile.js（子项目级别）

```
/*global module:false */
/*jshint node:true */

module.exports = function(grunt) {

    "use strict";

    // ================================================================================
    // project configuration
    // ================================================================================
    grunt.initConfig({
        pkg : grunt.file.readJSON('package.json'),
        jshint: {
            globals : {
                d3:true,
                Modernizr:true,
                tempo:true
            },
            options: grunt.file.readJSON('.jshintrc')
        },
        csslint: {
            subproject: {
                src: 'css/**/*.css'
            }
        },
        htmllint : {
            subproject: {
                src: 'html/**/*.html'
            }
        },
        clean : [ 'output' ],
        less : {
            options: {
                paths: ['./']
            },
            src: {
                expand: true,
                cwd:    'css/',
                src:    ['**/*.less'],
                dest:   'css/',
                ext:    '.css'
            }
        },
        copy: {
            subproject: {
                files: [
                    {src: ['img/**', 'js/**', 'folderX/**','!**/*.less'], dest: 'output/subproject/'}
                ]
            }
        }
    });

    grunt.loadNpmTasks('grunt-contrib-clean');
    grunt.loadNpmTasks('grunt-contrib-jshint');
    grunt.loadNpmTasks('grunt-html');
    grunt.loadNpmTasks('grunt-css');
    grunt.loadNpmTasks('grunt-contrib-less');
    grunt.loadNpmTasks('grunt-contrib-copy');

    // ================================================================================
    // default task
    // ================================================================================
    grunt.registerTask('default', ['clean', 'less', 'csslint', 'htmllint', 'copy']);
}; 
```

package.json（子项目级别）

```
{
    "description": "subproject", 
    "title": "Lorem Ipsum", 
    "devDependencies": {
        "grunt-contrib-watch": "~0.2.0", 
        "grunt-contrib-jshint": "~0.1.1", 
        "grunt-contrib-less": "~0.5.0", 
        "grunt-contrib-uglify": "~0.1.1", 
        "grunt-contrib-copy": "~0.4.0", 
        "grunt-contrib-qunit": "~0.1.1", 
        "grunt-css": "~0.5.4", 
        "grunt-contrib-clean": "~0.4.0", 
        "grunt-html": "~0.3.3", 
        "grunt-contrib-concat": "~0.1.3"
    }
} 
```

BR，迈贝克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T01:08:22.850

这是开箱即用的。 在当前目录及其所有父目录中查找，然后在全局位置中查找`npm`。`node_modules`

所以你甚至可以这样做：

```
-Project
--subproject1
---node_modules
--subproject2
--subproject3
--node_modules 
```

`subproject1`将可以访问内部的所有 npms`Project/subproject1/node_modules`和`Project/node_modules`，而`subproject2`并且`subproject3`只会找到内部的那些`Project/node_modules`

### 更新

有一个很少记录的功能称为 grunt 集合。它需要一些设置，但您不需要每个子项目中所有 grunt 插件的副本。

这是文件布局

```
-Project
--subproject1
---node_modules
----grunt-collection
-----package.json
--subproject2
...
--subproject3
...
--node_modules
---grunt
---grunt-contrib-concat
---grunt-contrib-jshint
---grunt-contrib-qunit
---grunt-contrib-watch
---grunt-html
---grunt-contrib-clean
---grunt-contrib-copy
---grunt-contrib-less
---grunt-contrib-uglify
---grunt-css
--package.json 
```

**项目/package.json**

```
{
    "description": "subproject", 
    "version": "0.0.0",
    "name": "Lorem",
    "title": "Lorem Ipsum", 
    "devDependencies": {
        "grunt": "*",
        "grunt-contrib-watch": "~0.2.0", 
        "grunt-contrib-jshint": "~0.1.1", 
        "grunt-contrib-less": "~0.5.0", 
        "grunt-contrib-uglify": "~0.1.1", 
        "grunt-contrib-copy": "~0.4.0", 
        "grunt-contrib-qunit": "~0.1.1", 
        "grunt-css": "~0.5.4", 
        "grunt-contrib-clean": "~0.4.0", 
        "grunt-html": "~0.3.3", 
        "grunt-contrib-concat": "~0.1.3"
    }
} 
```

**项目/子项目1/package.json**

```
{
    "description": "subproject", 
    "version": "0.0.0",
    "name": "Lorem",
    "title": "Lorem Ipsum", 
    "devDependencies": {
    }
} 
```

**Project/subproject1/Gruntfile.js**摘录（你只需要 grunt-collection 任务）。

```
grunt.loadNpmTasks('grunt-collection');
// grunt.loadNpmTasks('grunt-contrib-jshint');
// grunt.loadNpmTasks('grunt-html');
// grunt.loadNpmTasks('grunt-css');
// grunt.loadNpmTasks('grunt-contrib-less');
// grunt.loadNpmTasks('grunt-contrib-copy'); 
```

**项目/子项目1/node_modules/grunt-collection/package.json**

```
{
    "description": "subproject", 
    "version": "0.0.0",
    "name": "Lorem",
    "title": "Lorem Ipsum", 
    "dependencies": {
      "grunt-contrib-watch": "~0.2.0", 
      "grunt-contrib-jshint": "~0.1.1", 
      "grunt-contrib-less": "~0.5.0", 
      "grunt-contrib-uglify": "~0.1.1", 
      "grunt-contrib-copy": "~0.4.0", 
      "grunt-contrib-qunit": "~0.1.1", 
      "grunt-css": "~0.5.4", 
      "grunt-contrib-clean": "~0.4.0", 
      "grunt-html": "~0.3.3", 
      "grunt-contrib-concat": "~0.1.3"
    },
    "keywords": ["gruntcollection"]
} 
```

关键是在每个子项目中创建一个只有 package.json 的小模块，其中包含`keyword` `gruntcollection`Grunfile 使用的依赖项。

然后 Grunt 将使用相同的策略加载这些`require`，这意味着它们可以在`node_modules`您的父项目中找到。

警告：grunt 收集的工作方式是使用 package.json 的依赖标签，这意味着你不能使用 npm install 安装它，但你应该能够存储它的源代码控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-10T02:47:14.740

我创建了一个 npm 模块[load-grunt-parent-tasks](https://www.npmjs.org/package/load-grunt-parent-tasks)来解决这个问题。它的灵感来自[Pascal Belloncle](https://stackoverflow.com/users/1631323/pascal-belloncle)给出的答案并使用了一个`gruntcollection`hack。

你需要做的就是 require 模块，传递它`grunt`和一个配置对象，剩下的就交给它了。

```
module.exports = function(grunt) {

  require('load-grunt-parent-tasks')(grunt, {
    config: 'package.json',
    pattern: 'grunt-*',
    scope: 'dependencies',
    module: 'grunt-collection'
  });

}; 
```

您可以根据传递给的 globbing 模式过滤您想要加载的 grunt 任务`pattern`。

您可以查看 Npm 上的模块：[https ://www.npmjs.org/package/load-grunt-parent-tasks](https://www.npmjs.org/package/load-grunt-parent-tasks)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-09T09:51:48.003

另一个解决方案，在[https://github.com/gruntjs/grunt/issues/696](https://github.com/gruntjs/grunt/issues/696) `module.exports = function (grunt) { grunt.file.expand('../node_modules/grunt-*/tasks').forEach(grunt.loadTasks); }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-09T09:28:14.570

以下是一个简单的解决方法。更改 Gruntfile.js。 `module.exports = function (grunt) { var cwd = process.cwd(); process.chdir(cwd+'/../'); require('matchdep').filterDev('grunt-*').forEach(grunt.loadNpmTasks); process.chdir(cwd); }`

# python - vim + python 缓冲区替换使用“黑洞寄存器”

> ID：15225866
> 
> 赞同：-2
> 
> 时间：2013-03-05T14:08:02.097
> 
> 标签：python, vim

vim脚本中的一个简单python操作：

```
vim.current.buffer[current] = 'new line'; 
```

这会覆盖当前的寄存器，我不希望这样做。

换句话说，我想用'new line'替换行，但保持寄存器的内容不变（寄存器被这个操作覆盖）。

我知道似乎相关的“黑洞寄存器”。但我不清楚如何将它用于脚本中的缓冲区操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:02:59.553

我无法在 Windows/x64 上使用 Vim 7.3.823 重现这一点，如果确实修改了寄存器，那将是 Vim 中的一个错误，应该在[vim_dev 邮件列表](http://www.vim.org/community.php)中报告。这是我试图重现的内容：

```
:let @@ = 'foo'
:python import vim
:python vim.current.buffer[1] = 'new line'
:reg "
--- Registers ---
""   foo 
```

# cocos2d-iphone - 设置无限随机 CCMove

> ID：15225867
> 
> 赞同：0
> 
> 时间：2013-03-05T14:08:04.577
> 
> 标签：cocos2d-iphone

只是一个简单的问题——设置精灵的无限移动序列最有效的方法是什么？我目前正在运行这个：

```
-(void) pathToMove:(CCParticleSystemQuad*) system
{
    CGSize screenSize = [[CCDirector sharedDirector] winSize];
    int width = screenSize.width;
    int height = screenSize.height;
    float randX = arc4random() % width;
    float randY = arc4random() % (height - 200);

    CGPoint start = system.position;
    CGPoint end = ccp(randX, randY);

    float finalDistance = ccpDistance(start, end);
    float speedToMove = 500.0;

    float durationToMove = finalDistance / speedToMove;

    [system runAction:[CCSequence actions:[CCMoveTo actionWithDuration:durationToMove position:ccp(randX,randY)],[CCCallFuncN actionWithTarget:self selector:@selector(completedCurve:)],nil]];

}
-(void) completedCurve:(id) sender
{
    [self pathToMove:sender];   
} 
```

但我担心这可能会导致一些奇怪的僵尸和/或通过一个动作一遍又一遍地调用自身而导致泄漏。有没有更好的办法？

# twitter-bootstrap - Play 框架中的 Twitter 引导助手是否已弃用？

> ID：15225892
> 
> 赞同：5
> 
> 时间：2013-03-05T14:08:55.723
> 
> 标签：twitter-bootstrap, playframework, playframework-2.1

我经常在我的 Web 应用程序中使用 Twitter 引导表单模板助手，因为这非常简单。

昨天我想创建一个带有水平字段的表单，并在 GitHub 上找到了一个带有来自 guillaumebort 的评论（一岁）[的 Pull-Request ，该助手将在下一个版本中被弃用。但我在](https://github.com/playframework/Play20/pull/217)[Play Template 助手中一无所获文档](http://www.playframework.com/documentation/2.1.0/ScalaFormHelpers)。

*   助手已经被弃用还是会更新？
*   是否已经有任何更复杂的引导模板助手作为插件？（我认为，*很多*人都在使用 Play+Bootstrap。）
*   ...或者我应该编写自己的助手来支持水平场吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:18:01.603

AFAIK Twitter Bootstrap 助手不再维护。通过查看[历史](https://github.com/playframework/Play20/commits/master/framework/src/play/src/main/scala/views/helper/twitterBootstrap)，最新的更新来自一年前。它基于旧的 Twitter Bootstrap 版本。

我认为您应该编写自己的助手。

# java - 窗口移动后的setLocation

> ID：15225893
> 
> 赞同：0
> 
> 时间：2013-03-05T14:09:07.190
> 
> 标签：java, drag-and-drop, mouseevent, mousemove

我做了一个拖放算法，让组件被拖动到窗口内。

它表现良好，直到我移动框架窗口......

如果我移动窗口，组件的位置就会从一个距离移动，该距离等于我单击它和拖动它时移动框架的距离。

任何人都知道为什么？

代码示例：

```
public void mousePressed(final MouseEvent e) {

    if(SwingUtilities.isLeftMouseButton(e)) {

        origin = panel.getLocationOnScreen();

        panel.setLocation(origin.x, origin.y-panel.getHeight()/2);

        view.add(panel, JLayeredPane.DRAG_LAYER);
    }

}

public void mouseDragged(MouseEvent e) {

   if(SwingUtilities.isLeftMouseButton(e)) {

       panel.setLocation(e.getLocationOnScreen().x - panel.getWidth()/2, e.getLocationOnScreen().y - panel.getHeight()/2);

   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:55:35.197

假设鼠标事件是由应该在其中拖动面板的容器引发的，您应该只使用相对坐标。

也就是说，使用

```
public void mouseDragged(MouseEvent e) {
   if(SwingUtilities.isLeftMouseButton(e)) {
      panel.setLocation(e.getPoint().x - panel.getWidth()/2, e.getPoint().y - panel.getHeight()/2);
   }
} 
```

# c++ - windows mp3 解码库 c c++

> ID：15225894
> 
> 赞同：1
> 
> 时间：2013-03-05T14:09:10.307
> 
> 标签：c++, windows, mp3, decode

我花了一整天的时间在这上面，它让我发疯

有人知道将 mp3 解码为简单的 16 位 pcm（波形）文件的简单方法吗？我需要一些可以随我的商业程序一起发布的东西，所以我更喜欢 .lib

我找到了 libmpg123.dll，但我不知道如何让我的程序与 msvc 2010 中的 dll 链接。我知道我需要添加一个引用，但是当我单击“添加新引用”时，我得到的只是一个空对话框带有项目名称和项目目录标题，没有可单击的内容。我尝试使用 lib 工具将 .dll 转换为 .lib，但一直抱怨 .def 文件格式不好。

我试图构建 madplayer，但我无法很好地 id3tag.h 并且没有关于使用 libmad 的文档或示例，我可以找到

跛脚看起来太大了

我可以链接并完成 .lib 快速解决方案的任何想法

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T14:39:37.473

[mpg123 没问题](http://www.mpg123.de)。我可以看到您在获取静态库 (.lib) 时遇到了麻烦。

有两种获取库的方法：

1.  构建源代码。它更灵活，但有点棘手。如果您下载源代码，您可以通过以下路径找到 VS2010 的端口：ports\MSVC++\2010。但在这种情况下，您将面临安装[YASM](http://yasm.tortall.net/)和玩弄构建配置的问题（似乎源代码包中的配置没有正确调整）。
2.  通过转换 .def 文件来使用 lib 工具。您不需要源，因为二进制包已经包含 .h 和 .def 文件。我将详细解释：

    1.  下载二进制文件（[win32](http://www.mpg123.de/download/win32/)或[win64](http://www.mpg123.de/download/win64/)）并提取到`D:\mpg123`文件夹。
    2.  从开始 -> Microsoft Visual Studio 2010 -> Visual Studio 工具 -> Visual Studio 命令提示符 (2010) 运行。
    3.  转到您的文件夹`cd D:\mpg123`，`D:`然后运行该行：（`lib /def:libmpg123-0.dll.def`或者调用 def 文件）。
    4.  现在您的文件夹中有所需的 .lib 文件`libmpg123-0.dll.lib`。

但请注意，“框架和引用”属性页用于设置对 .NET Framework 程序集、COM 组件或外部项目 ( [MSDN](http://msdn.microsoft.com/en-us/library/47w1hdab%28v=vs.100%29.aspx) ) 的引用，在您的情况下，您应该在项目中指定额外的链接器依赖项 [Configuration Properties =>链接器 => 输入 => 附加依赖项]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T01:45:28.663

亚历山大的回答很好，非常感谢

当您下载 mpg123-1.15.1-x86.zip 时，我有一件小事要补充

您会看到 libmpg123-0.dll（dll）和 libmpg123-0.dll.def 用于制作上述 .lib 的东西。最好将名称更改为 libmpg123-0.def 否则它将寻找一个名为 libmpg123-0.dll.dll 的 dll，这不是很好

除此之外，它工作得很好。我不敢相信这些信息几年前不在互联网上。感谢亚历山大，感谢stackoverflow

仅供参考，这是一个使用 mpg123 的简单 mp3 解码器

```
#include "mpg123/mpg123.h"

#define INBUFF  16384
#define OUTBUFF 32768

void loadMp3File(const char* filename)
{
    mpg123_handle *mh;
    unsigned char *buffer;
    size_t buffer_size;
    size_t done;
    int err;

    int channels, encoding;
    long rate;

    mpg123_init();
    mh = mpg123_new(NULL, &err);
    buffer_size = mpg123_outblock(mh);
    buffer = (unsigned char*) malloc(buffer_size * sizeof(unsigned char));

    /* open the file and get the decoding format */
    mpg123_open(mh, filename);
    mpg123_getformat(mh, &rate, &channels, &encoding);

    /* set the output format and open the output device */
    int m_bits = mpg123_encsize(encoding);
    int m_rate = rate;
    int m_channels = channels;

    /* decode and play */
    for (int totalBtyes = 0 ; mpg123_read(mh, buffer, buffer_size, &done) == MPG123_OK ; ) {
        totalBtyes += done;
    }

    /* clean up */
    free(buffer);
    mpg123_close(mh);
    mpg123_delete(mh);
    mpg123_exit();

} 
```

# javascript - Jquery UI Droppable：如何根据某些逻辑使用不同的 hoverClass 值？

> ID：15225895
> 
> 赞同：5
> 
> 时间：2013-03-05T14:09:10.767
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-droppable

我正在使用[JQuery UI 可放置](http://jqueryui.com/droppable/)库功能，我想在用户将鼠标悬停在可放置目标上时提供视觉用户反馈。为此，我可以轻松地使用该`hoverClass`选项来指定当它们有可拖动项目悬停时要使用的类。

但我想做的是`hoverClass`根据某些逻辑使用不同的值。基本上，有许多区域是“可拖放的”，并且有许多项目可以拖放 - 但是，并非所有项目都可以拖放到所有区域。因此，例如，如果放置有效，我希望有绿色背景，如果放置无效，则使用红色背景。

如何才能做到这一点？我知道我想使用什么逻辑，但我可以在哪里添加逻辑。它显然需要在某个地方我可以访问被拖动的元素，以及潜在的放置目标元素。

到目前为止，我的简单代码如下：

```
$(".DragItem").draggable({
    revert: true,
    helper: "clone"
});

$(".DropItem").droppable({
    tolerance: "touch",
    hoverClass: "DropTargetValid"
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:14:11.540

```
$(".DropItem").droppable({
    tolerance: "touch",
    hoverClass: "DropTargetValid",
    over: function(event, ui) {
       console.log(ui.draggable); // the draggable object
       console.log($(this)); // the droppable object
    }
}); 
```

这应该这样做。超过该事件将在所有 .DropItem 元素上触发。您可以在此处找到有关可用事件 API 的更多信息：http: [//api.jqueryui.com/droppable/](http://api.jqueryui.com/droppable/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T14:18:38.367

我认为你的问题是试图用类本身来做，当 droppable 有自己的悬停事件时，称为`over` [jQuery droppable API #over](http://api.jqueryui.com/droppable/#event-over)

所以你会想要：

```
$(".DropItem").droppable({
    tolerance: "touch",
    over: function(event, ui) {
        // ... logic goes here
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T14:46:36.280

其他答案正是我想要的。但是，我想在这里更详细地介绍如何处理逻辑的更好示例。

例如，有一些简单的 HTML，如下所示。这个 HTML 基本上有 4 个可拖动对象和 4 个可能的放置目标：

```
<div style="margin-bottom:20px;">
    <div data-id="1" class="DragItem">I am 1</div>
    <div data-id="2" class="DragItem">I am 2</div>
    <div data-id="3" class="DragItem">I am 3</div>
    <div data-id="4" class="DragItem">I am 4</div>
</div>
<div>
    <div data-id="123" class="DropItem">I accept 1, 2 and 3</div>
    <div data-id="23" class="DropItem">I accept 2 and 3</div>
    <div data-id="34" class="DropItem">I accept 3 and 4</div>
    <div data-id="1234" class="DropItem">I accept all</div>
</div> 
```

可以看出，我使用`data-*`属性来存储特定的标识值。DragItem 上的 ID 标识拖动对象， DropItem 上的 ID 包含所有有效值。

处理此逻辑，然后应用正确的类的 javascript 如下：

```
$(".DragItem").draggable({
    revert: true,
    helper: "clone"
});

$(".DropItem").droppable({
    tolerance: "touch",
    over: function (event, ui) {
        var dropItem = $(this);
        var dragItem = $(ui.draggable);
        var valid = String(dropItem.data("id")).indexOf(dragItem.data("id")) > -1;
        if (valid) {
            dropItem.addClass("DropTargetValid");
        } else {
            dropItem.addClass("DropTargetInvalid");
        }
    },
    out: function (event, ui) {
        var dropItem = $(this);
        dropItem.removeClass("DropTargetValid");
        dropItem.removeClass("DropTargetInvalid");
    },
    deactivate: function (event, ui) {
        var dropItem = $(this);
        dropItem.removeClass("DropTargetValid");
        dropItem.removeClass("DropTargetInvalid");
    }
}); 
```

可以看出，我正在做一个简单的“字符串是否包含”逻辑检查。这对于小数字来说很好，但如果需要处理超过 9 个对象，我们需要在 DropItem`data-id`值中使用更可靠的字符串。

我还使用`out`and`deactivate`事件来清除应用的类。在此示例中，我复制了代码，但这可以很容易地替换为两个事件都使用的单个函数。

最后，在大家一直在等待的那一刻，[这里有一个工作示例。](http://jsfiddle.net/musefan/vm9DS/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T21:19:41.987

使用 Draggable Start/Stop 事件向您的放置区添加和删除类。

[http://api.jqueryui.com/draggable/#event-start](http://api.jqueryui.com/draggable/#event-start)

# symfony - 如何使用 Composer 安装 Symfony2 Bundle

> ID：15225896
> 
> 赞同：0
> 
> 时间：2013-03-05T14:09:13.127
> 
> 标签：symfony, composer-php, doctrine-migrations

我正在使用 Windows，并从其 Windows 安装程序安装了 composer。我想要做的是将[DoctrineMigrationsBundle](http://symfony.com/doc/current/bundles/DoctrineMigrationsBundle/index.html)安装到我的项目中，所以我添加了

`"doctrine/doctrine-migrations-bundle": "dev-master"`

到`composer.json`项目中的文件并运行

```
cd the project directory
php composer.phar update 
```

但我得到的是：无法打开输入文件：composer.phar

我的整个 composer.json 文件是

```
{
    "name": "symfony/framework-standard-edition",
    "description": "The \"Symfony Standard Edition\" distribution",
    "autoload": {
        "psr-0": { "": "src/" }
    },
    "require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.1.*",
        "doctrine/orm": ">=2.2.3,<2.4-dev",
        "doctrine/doctrine-bundle": "1.1.*",
        "twig/extensions": "1.0.*@dev",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.1.*",
        "symfony/monolog-bundle": "2.1.*",
        "sensio/distribution-bundle": "2.1.*",
        "sensio/framework-extra-bundle": "2.1.*",
        "sensio/generator-bundle": "2.1.*",
        "jms/security-extra-bundle": "1.2.*",
        "jms/di-extra-bundle": "1.1.*",
        "kriswallsmith/assetic": "1.1.*@dev"
        "doctrine/doctrine-migrations-bundle": "dev-master"
    },
    "scripts": {
        "post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ],
        "post-update-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ]
    },
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "web"
    }
} 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T14:33:03.420

正如@AhmedSiouani 所说，错误告诉您他们找不到`composer.phar`文件。

你可以做的一些事情：

1.  [按照下载页面上的说明下载](http://getcomposer.org/download/)并`Composer-SetUp.exe`安装 Composer （滚动到“Windows Installer”）；
2.  下载`composer.phar`文件并将其放入您的项目中（不推荐）；
3.  下载`composer.phar`文件并将其放在`PATH`环境变量¹中的目录中；
4.  下载该`composer.phar`文件并创建一个`composer.bat`执行该文件的`composer.phar`文件。将下面的代码放入其中并将其保存在`PATH`环境变量¹中的目录中。

    ```
    @echo off
    php "path\to\composer.phar" %* 
    ```

* * *

¹ ：你可以通过在你的cmd中`PATH`运行来查看环境变量中有哪些目录。 你也可以把这个文件所在的目录放到环境中。为此，请转到*（右键单击）>* *>* *>* *（在“高级”选项卡下）*并使用您的目录路径设置 PATH 变量（或通过在路径之间放置一个来将路径添加到当前 PATH 变量）。`echo %PATH%`
`PATH`*`Computer``Settings``Advanced Settings``Environments Variables`*`;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T14:18:17.013

错误消息很清楚，它与您的`composer.json`文件无关。

我认为您只需将`composer.phar`文件移动到项目目录即可。

此外，一个可重用的解决方案是通过您的 PATH 环境变量调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-03T18:18:38.763

我遇到了同样的问题“无法打开输入文件：composer.phar”

修复：转到项目目录并运行以下命令

```
php -r "readfile('https://getcomposer.org/installer');" | php 
```

并运行

```
php composer.phar install or php composer.phar update 
```

这会很棒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T12:41:04.913

我在 Fedora 17 上工作，我在控制台上运行它来下载**composer.phar**：

```
$ curl -s https://getcomposer.org/installer | php 
```

那么它现在的工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-28T09:37:46.323

确保您的代码：

```
 "kriswallsmith/assetic": "1.1.*@dev"
 "doctrine/doctrine-migrations-bundle": "dev-master" 
```

改为：

```
"kriswallsmith/assetic": "1.1.*@dev",
 "doctrine/doctrine-migrations-bundle": "dev-master" 
```

注意添加一个，（逗号）。

# c# - JsonResult 有时会被截断

> ID：15225901
> 
> 赞同：2
> 
> 时间：2013-03-05T14:09:26.410
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, jquery

我正在使用 MVC 3 并且有一个操作返回一个带有 187 个名称值对（作为 a `List<OrientationData>`）的 JsonResult，但通常从 ajax 调用接收到的数据被截断并且无法解析。

这总是通过 JsonResult 返回相同的 187 个项目，所以如果这是一个长度问题，我认为它每次都会失败。这是动作：

```
[HttpPost]
    public JsonResult GetAllMetrics()
    {
        var metrics = metric.GetAllMetrics();
        return Json(metrics);
    } 
```

这是 jQuery ajax 调用：

```
$.ajax({
            url: urlGetAllMetrics,
            type: 'POST',
            data: jsonData,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (ajaxData) {
                if (ajaxData && ajaxData.length > 0) {
                    //populate data here
                }
            },
            error: function (msg) {
                alert(msg);
            }
        }); 
```

返回到 ajax 调用的结果有时会被截断，实际上似乎在 2 个不同的地方截断。这有哪些可能的原因？

我还想指出，当我使用 Fiddler 捕获流量时，它每次都可以正常工作而不会截断返回的数据（我还不知道为什么）。当我不使用 Fiddler 时，由于无法将字符串解析为 json，我经常在 ajax 中收到错误消息。数据是具有值和文本字符串属性的数组。返回的文本只是截断：

```
...,{"Value":"h12","Text":"h12 name goes here"},{"Val 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:02:21.040

由于属性的默认值 (102400 - 100kb)，它将被截断`maxJsonLength`。尝试在您的 web.config 中更改它：

```
<configuration> 
    <system.web.extensions>
        <scripting>
            <webServices>
                <jsonSerialization maxJsonLength="50000000"/>
            </webServices>
        </scripting>
    </system.web.extensions>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T21:38:08.793

我无法弄清楚这个问题的解决方案，所以......

我使用 webHttpBinding 添加了 WCF 服务，如[WCF 的答案所示：maxStringContentLength 始终设置为 8192](https://stackoverflow.com/questions/7065543/wcf-maxstringcontentlength-always-set-to-8192)我在服务类上设置了以下属性：

```
[ServiceBehavior(IncludeExceptionDetailInFaults = true)]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)] 
```

并确保将 DataContract 和 DataMember 属性添加到基础类：

```
[DataContract]
public class OrientationData
{
    [DataMember]
    public string Value { get; set; }
    [DataMember]
    public string Text { get; set; }
} 
```

我还将方法（现在在界面上使用 OperationContract）切换为：

```
public List<OrientationData> GetAllMetrics()
    {
        var metrics = metric.GetAllMetrics();
        return metrics;
    } 
```

我希望我有一个更好的答案，但如果其他人遇到这个问题，这是解决它的一种方法。当然，我敢打赌切换到 MVC 4 也可以通过[David Murdoch](https://stackoverflow.com/users/160173/david-murdoch)在另一篇文章中提到的[这个答案来解决它。](https://stackoverflow.com/a/12278956/160173)

# c# - 如何检查使用 SetThreadExecutionState 禁用睡眠是否失败？

> ID：15225903
> 
> 赞同：8
> 
> 时间：2013-03-05T14:09:29.923
> 
> 标签：c#, windows, pinvoke

使用以下行禁用系统睡眠时：

```
SetThreadExecutionState(EXECUTION_STATE.ES_CONTINUOUS | EXECUTION_STATE.ES_AWAYMODE_REQUIRED); 
```

我怎么能说它有效？例如，在我的一台计算机上，它不起作用。计算机仍然进入睡眠状态，但也不例外。如果没有异常，有没有其他方法可以知道调用 SetThreadExecutionSTate 失败了？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-05T19:48:14.813

的返回值`SetThreadExecutionState`用于指示成功或失败。这在[文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa373208.aspx)中有所描述。

> **返回值**
> 
> 如果函数成功，则返回值为之前的线程执行状态。
> 
> 如果函数失败，则返回值为`NULL`。

的值`NULL`很简单`0`，因此您可以通过将返回值与`0`. 所以失败的时候不会有异常。返回值将只是`0`. 不要指望 Windows API 函数会引发异常来表示失败。他们根本不这样做。

您需要的从[pinvoke.net](http://pinvoke.net/default.aspx/kernel32/SetThreadExecutionState.html)获得的 p/invoke 签名是：

```
[FlagsAttribute]
public enum EXECUTION_STATE : uint
{
     ES_AWAYMODE_REQUIRED = 0x00000040,
     ES_CONTINUOUS = 0x80000000,
     ES_DISPLAY_REQUIRED = 0x00000002,
     ES_SYSTEM_REQUIRED = 0x00000001
     // Legacy flag, should not be used.
     // ES_USER_PRESENT = 0x00000004
}

[DllImport("kernel32.dll", SetLastError = true)]
static extern EXECUTION_STATE SetThreadExecutionState(EXECUTION_STATE esFlags); 
```

然后你可以这样称呼它

```
bool succeeded = (SetThreadExecutionState(EXECUTION_STATE.ES_CONTINUOUS | 
    EXECUTION_STATE.ES_AWAYMODE_REQUIRED) != 0); 
```

如果调用失败，则引发如下异常：

```
if (!succeeded)
    throw new Win32Exception(); 
```

您的问题很可能是您正在使用`ES_AWAYMODE_REQUIRED`. 我认为你应该使用`ES_SYSTEM_REQUIRED`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T14:12:10.890

该函数返回一个值来指示操作是否成功。如果返回值为`NULL`，则操作失败。[（来源）](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373208%28v=vs.85%29.aspx)

返回值`NULL`等于`0`.

因此，您应该在变量中捕获返回值并检查它是否为零：

```
uint result = SetThreadExecutionState(EXECUTION_STATE.ES_CONTINUOUS |
                                      EXECUTION_STATE.ES_AWAYMODE_REQUIRED);
if (result != 0)
{
    // Function failed...
} 
```

# javascript - 我可以在 Android 浏览器中仅使用 javascript 启动意图吗？

> ID：15225904
> 
> 赞同：2
> 
> 时间：2013-03-05T14:09:31.610
> 
> 标签：javascript, android, android-intent, maps

我有一个 html 页面，显示从当前位置到某个地址的方向。

我想做同样的事情，但使用地图应用程序而不是在浏览器中显示它。

当我使用：

```
<script>
    document.location = "geo:0,0?q=myaddress";
</script> 
```

这工作正常，但没有告诉我路线。

我从中读到的内容：[Android Google Directions Service 可原生使用？与包装框架？公共交通/自行车路线可用吗？](https://stackoverflow.com/questions/2853017/android-google-directions-service-usable-natively-with-wrapper-framework-publi)

应该可以使用此代码：

```
String url = "http://maps.google.com/maps?saddr=some+address&daddr=another+Address"
Intent intent = new Intent(android.content.Intent.ACTION_VIEW,  Uri.parse(url)); 
```

我可以只使用 javascript 做同样的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:20:22.593

`Intent`如果将其设置为默认应用程序，Android 能够在浏览器中检测到 Google 地图的链接并将其重定向到本机 Google 地图应用程序。但是，没有办法强制用户使用 Google 地图应用程序。单击该链接还可以向他显示活动选择器或在浏览器中打开 Google 地图。它也可能会打开一个注册来处理相同的第三方应用程序`Intent`。您发布的代码片段的行为也将完全一样。

这不仅适用于浏览器，而且适用于系统中的所有链接。例如，我将您通过电子邮件发布的链接发送给我自己，然后在我的手机上单击它。我可以用我的 Goolge Maps 应用程序打开它。所以真的不需要 JavaScript，你可以使用一个简单的 HTML 链接来发送`Intent`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T14:20:19.817

只需简单地从 JavaScript 调用函数到 Android ，然后在函数内部调用 android 意图。

您可以了解如何从 JavaScript 调用 android 函数的教程：

[http://android-er.blogspot.in/2011/10/call-javascript-inside-webview-from.html](http://android-er.blogspot.in/2011/10/call-javascript-inside-webview-from.html)

并使用 Google V3 库调用地图。

[https://developers.google.com/maps/articles/android_v3](https://developers.google.com/maps/articles/android_v3)

# c# - 为 dot.net Framework 4.0 / 2 安装 Windows SDK 7.1 的问题 1 中的问题

> ID：15225906
> 
> 赞同：1
> 
> 时间：2013-03-05T14:09:36.267
> 
> 标签：c#, winapi, .net-4.0, jenkins, sgen

从昨天开始，我尝试在我的 Windows 7 x64 机器上安装适用于 dot.net Framework 4.0 的 Windows SDK 7.1。在安装过程中，我每次都会遇到相同的错误。

错误信息：

```
"Installation of the "Microsoft WIndows SDK for Windows 7" product has reported the
following error: Please refer to Samples\Setup\HTML\ConfigDetails.htm document for further information" 
```

那是一条非常无用的错误消息，因此我浏览了 www 以了解更多信息，并按照人们推荐的建议步骤进行操作。我打开查看日志并得到与其他人相同的返回错误。

```
"C:\Program Files\Microsoft SDKs\Windows\v7.1\Setup\SFX\vcredist_x86.exe installation failed with the return code 5100" 
```

我尝试了 Microsoft、MSDN 和其他人推荐的所有东西，但对我没有用。

我试图解决问题的东西：

*   卸载 Document Explorer（msdn 推荐）
*   卸载最新的 Microsoft Visual C++ 2010 Redist x64/x86 版本 (microsoft)
*   卸载 Microsoft Windows SDK Windows 7 (dot.net 3.5)
*   安装 Microsoft Windows SDK 8

但就像我说的那样，没有任何帮助：/我在安装过程中每次都会收到相同的错误消息。

关于我的系统的其他事实：

*   我的系统上有很多 Microsoft Visual C++ 2008 Redist 版本
*   Microsoft Visual C++ 编译器 2008 标准版 enu x64/x86
*   适用于 Visual Studio 2008 的 Microsoft Windows SDK

*背景资料：*

我在我的机器 Windows 7 x64 上安装了 Jenkins 作为服务。我们进行了从 dot.net Framework 3.5 到 dot.net Framework 4.0 的转换。但问题是 sgen.exe 发送错误：

`"SGEN : error : An attempt was made to load an assembly with an incorrect format.."`（在构建日志中查找）。Windows SDK 在其 bin 文件夹中包含 sgen.exe，例如“C:\Program Files\Microsofft SDKs\Windows\v7.0\Bin”。所以我认为 SDK 已过时（v7.0a），我尝试为 dot.net Framework 4.0 安装 Windows SDK v7.1。可能在我的系统上安装最新的 Visual Studio 版本可能有助于解决问题，因为它应该同时安装 Windows SDK。

但我不想在上面安装 Visual Studio 以防止浪费许可证，因为没有人在这台计算机上工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T11:59:51.067

通过安装 .Net 4.5 和 SDK 7.0 解决问题。另外将**SdkToolsPath**设置为`$(TargetFrameworkSDKToolsDirectory)`（在 WINDOWSDIR\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets 中查找）

... 总而言之，SDK 的情况很奇怪。留下不好的感觉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T08:54:10.717

我在安装 Windows SDK 7.1 时遇到了同样的问题，vcredist_x86 安装失败，尽管当我查看控制面板的 unistall 程序选项卡时，没有安装 VC 2010 x86 redist。我还安装了 Windows 7.0 SDK。事实证明，有一个注册表项描述了是否安装了 vc 210 x86 redist 的版本以及安装了哪个版本：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\VisualStudio\10.0\VC\VCRedist\x86 
```

关键是 Installed Mine 是 1 即使卸载选项卡没有显示它，我将它设置为 0 它没有解决问题，但删除了整个

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\VisualStudio\10.0\VC\VCRedist\x86 
```

做过。希望对您有所帮助，我建议您在执行此操作之前备份您的注册表。我对微软会发布一个有这样问题的 SDK 感到非常惊讶。

# java - 在从 URL 下载期间（使用 http 连接）如何检索文件的大小？

> ID：15225907
> 
> 赞同：9
> 
> 时间：2013-03-05T14:09:38.690
> 
> 标签：java, android, http, download

我正在开发一个使用 http 连接下载文件的项目。我在下载过程中显示一个带有进度条状态的水平进度条。我的功能如下所示：

```
.......
try {           
        InputStream myInput = urlconnect.getInputStream();
        BufferedInputStream buffinput = new BufferedInputStream(myInput);

        ByteArrayBuffer baf = new ByteArrayBuffer(capacity);
        int current = 0;
        while((current = buffinput.read()) != -1) {
            baf.append((byte) current);
        }
File outputfile = new File(createRepertory(app, 0), Filename);
        FileOutputStream myOutPut = new FileOutputStream(outputfile);
        myOutPut.write(baf.toByteArray());
...
} 
```

我事先知道我的文件的大小，所以我需要在下载期间检索大小（*在我的 while 块中*）。因此，我将能够确定进度条的状态。

```
progressBarStatus = ((int) downloadFileHttp(url, app) * 100)/sizefile; 
```

*long downloadFileHttp(.., ..) 是我的函数的名称。*

我已经尝试使用 outputfile.length 来检索它，但他的值为“1”，也许这是我尝试下载的文件数。

> 有什么办法可以弄清楚吗？

***更新 1***

> 我没有任何线索可以让我弄清楚这一点。目前我有一个水平进度条，它只显示 0 和 100% 的中间值。我考虑另一种方法。如果我知道我的 wifi 的速率和文件的大小，我可以确定下载的时间。
> 
> 我知道我可以检索我的 Wifi 连接的信息和要下载的文件的大小。
> 
> 有没有人已经工作过或有线程？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T14:17:12.023

我假设您使用的是[HttpURLConnection](http://docs.oracle.com/javase/6/docs/api/java/net/HttpURLConnection.html)。在这种情况下，您需要 `getContentLength()`在`urlconnect`.

但是，服务器*不需要*发送有效的内容长度，因此您应该准备好将其设置为 -1。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T21:08:47.733

AsyncTask 可能是您的完美解决方案：

```
private class DownloadFileTask extends AsyncTask<URL, Integer, Long> {
 protected Long doInBackground(URL... urls) {
    Url url = urls[0];
    //connect to url here
    .......
    try {           
        InputStream myInput = urlconnect.getInputStream();
        BufferedInputStream buffinput = new BufferedInputStream(myInput);

        ByteArrayBuffer baf = new ByteArrayBuffer(capacity);
        int current = 0;
        while((current = buffinput.read()) != -1) {
            baf.append((byte) current);
            //here you can send data to onProgressUpdate
            publishProgress((int) (((float)baf.length()/ (float)sizefile) * 100));
        }
    File outputfile = new File(createRepertory(app, 0), Filename);
    FileOutputStream myOutPut = new FileOutputStream(outputfile);
    myOutPut.write(baf.toByteArray());
    ...
 }

 protected void onProgressUpdate(Integer... progress) {
     //here you can set progress bar in UI thread
     progressBarStatus = progress;
 } 
```

}

在您的方法中在此处启动 AsyncTask 调用

```
new DownloadFileTask().execute(url); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-20T09:26:04.983

简单的。下面的代码：

```
try {
    URL url = new URL(yourLinkofFile);
    URLConnection conn = url.openConnection();
    conn.connect();
    totalFileSize = conn.getContentLength();
} catch (Exception e) {
    Log.e(TAG, "ERROR: " + e.toString());
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T15:23:53.470

检查响应中的 Content-Length 标头。*应该*设置它。所有主要的 HTTP 服务器都使用此标头。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-18T11:49:58.207

在 HTTP 1.1 规范中，`chunk`响应数据应该被拉回多轮。实际上，块响应中的内容长度为-1，因此我们不能`availble`在 Inputstream 中使用方法。顺便说一句，`Inputstream.availble`方法仅在***ByteArrayInputStream***中获取内容长度是稳定的。

如果你只是想得到总长度，你需要在每一轮读取中自己计算它。请参阅***apache commons-io***项目中的`IOUtils`类，如下所示：

 *```
//-----------------------------------------------------------------------
/**
 * Copy bytes from an <code>InputStream</code> to an
 * <code>OutputStream</code>.
 * <p>
 * This method buffers the input internally, so there is no need to use a
 * <code>BufferedInputStream</code>.
 * <p>
 * Large streams (over 2GB) will return a bytes copied value of
 * <code>-1</code> after the copy has completed since the correct
 * number of bytes cannot be returned as an int. For large streams
 * use the <code>copyLarge(InputStream, OutputStream)</code> method.
 * 
 * @param input  the <code>InputStream</code> to read from
 * @param output  the <code>OutputStream</code> to write to
 * @return the number of bytes copied
 * @throws NullPointerException if the input or output is null
 * @throws IOException if an I/O error occurs
 * @throws ArithmeticException if the byte count is too large
 * @since Commons IO 1.1
 */
public static int copy(InputStream input, OutputStream output) throws IOException {
    long count = copyLarge(input, output);
    if (count > Integer.MAX_VALUE) {
        return -1;
    }
    return (int) count;
}

/**
 * Copy bytes from a large (over 2GB) <code>InputStream</code> to an
 * <code>OutputStream</code>.
 * <p>
 * This method buffers the input internally, so there is no need to use a
 * <code>BufferedInputStream</code>.
 * 
 * @param input  the <code>InputStream</code> to read from
 * @param output  the <code>OutputStream</code> to write to
 * @return the number of bytes copied
 * @throws NullPointerException if the input or output is null
 * @throws IOException if an I/O error occurs
 * @since Commons IO 1.3
 */
public static long copyLarge(InputStream input, OutputStream output)
        throws IOException {
    byte[] buffer = new byte[DEFAULT_BUFFER_SIZE];
    long count = 0;
    int n = 0;
    while (-1 != (n = input.read(buffer))) {
        output.write(buffer, 0, n);
        count += n;
    }
    return count;
} 
```

如果要查看下载进度，则需要在复制到磁盘的过程中`read`从***InputStream***输入到***OutputStream输出的每一轮回调。***在回调中，您可以复制一条数据并将数量添加到旨在用于您的进度条功能的计数器中。这有点复杂

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-19T20:05:46.453

听起来您的主要问题不是获取文件的长度或找出实际值，而是如何从另一个线程访问当前值，以便您可以适当地更新状态栏。

你有几种方法可以解决这个问题：

1.) 在您的进度条项目中有一个回调，可让您在每次更新下载线程中的计数时设置值并调用该方法。2.) 将值放在两个线程都可以访问的某个字段中（可能不是线程安全的）。

如果是我，在我的进度条项目中，我会有一个方法可以允许用一些值更新进度。然后我会从我正在下载文件的线程中调用该方法。

所以基本上用户 --> 点击一些下载按钮 --> 处理程序调用方法开始下载，将回调传递给更新进度条方法 --> 下载线程在每个迭代周期调用该方法，并更新完成百分比。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-20T12:52:50.260

我认为你让你的生活太复杂了:)

第一：因为`progressBarStatus = ((int) downloadFileHttp(url, app) * 100)/sizefile;`总是 0 或 100，也许你没有正确计算值。您没有在那里发布整个方法，但不要忘记您正在处理 int 所以 sizefile 始终是 int，并且划分到更高或等于 sizefile 总是会返回 0 或 1。我怀疑是您需要研究的方向......另外，我没有在您的代码中看到您在读取中间字节后更新进度条的位置。

第二：我认为如果你分块阅读会更有效率。读取效率更高，您无需为每个下载的字节通知 UI 线程。[Adamski 从这个线程](https://stackoverflow.com/questions/1264709/convert-inputstream-to-byte-in-java)中得到的答案 可能会对您有所帮助。只需使用较小的字节数组。我通常使用 256 (3G) 或 512 (Wi-Fi) - 但也许您不需要详细说明。因此，一旦您读取了一个新数组，请计算读取的字节总数，通知 UI 并继续读取直到流结束。

第三：将`progressBar.setMax()`下载前的字节数设置为sizeFile，根据“First”的注释正确计算下载的字节数，然后用计算出的数字调用setProgress。只是不要忘记更新 UI 线程上的进度条。AsyncTask 有一个很好的机制来帮助你。

祝你好运！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-05T14:49:53.570

好吧，这应该可以帮助您

```
URLConnection connection = servletURL.openConnection();
BufferedInputStream buff = new BufferedInputStream(connection .getInputStream());
ObjectInputStream input = new ObjectInputStream(buff );
int avail = buff .available();

System.out.println("Response content size = " + avail); 
```*

# java - 使用管道符号作为分隔符拆分字符串

> ID：15225908
> 
> 赞同：15
> 
> 时间：2013-03-05T14:09:40.353
> 
> 标签：java, string, split

为什么在下面的输出是`[]`而不是`[1]`？

```
String input="1|2|3";
String[] values= input.split("|");
System.out.println("[" + values[0] + "]");
// Output: [] 
```

但是，如果我们更改分隔符，则输出为`[1]`.

```
String input="1;2;3";
String[] values= input.split(";");
System.out.println("[" + values[0] + "]");
// Output: [1] 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-05T14:11:16.560

尝试转义该字符：

```
String input="1|2|3";
String[] values= input.split("\\|");
System.out.println("[" + values[0] + "]"); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-05T14:11:26.967

因为`|`在正则表达式中有特殊含义。你需要像这样转义它：`\|`在Java中你还必须转义反斜杠，所以你最终得到`\\|`

管道字符是一个析取运算符，这意味着它告诉正则表达式引擎选择其左侧和右侧的任一模式。在您的情况下，那些匹配任何内容的空字符串。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-05T14:14:33.787

该`split`方法接收一个正则表达式作为参数。管道是一个保留字符，有它自己的用途（意思是`or`）。

您可以转义它 ( `"\\|"`)，或者，如果您使用的是 Java 1.5+，您可以`Pattern.quote("|")`像这样使用：

```
input.split(Pattern.quote("|")); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-05T14:11:41.747

尝试在拆分时使用`\\|`而不是，`|`因为您需要转义它。

因此，您的代码将更改为：

```
String input="1|2|3";
String[] values= input.split("\\|");
System.out.println("[" + values[0] + "]"); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-05T14:13:43.017

你必须转义字符'|' 适当地

```
String input="1|2|3";
        String[] values= input.split("\\|");
        System.out.println("[" + values[0] + "]"); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-05T14:14:32.377

管道字符等效于正则表达式中的逻辑或。如果你真的想使用管道字符作为分隔符，你需要用 a 转义`\`它

`String[] values= input.split("\|");`

# ios - 在 UIView 之间切换时的 SKPaymentQueue Dealloc 问题

> ID：15225909
> 
> 赞同：0
> 
> 时间：2013-03-05T14:09:42.720
> 
> 标签：ios

我在应用程序购买代码中有以下内容。

```
- (IBAction)purchaseProduct:(id)sender
{
    SKProduct *thisProduct = [productDetailsList objectAtIndex:[sender tag]];

    if ([thisProduct.productIdentifier isEqualToString:@"demo"]) {
        SKPayment *payment = [SKPayment paymentWithProductIdentifier:@"demo"];
        [[SKPaymentQueue defaultQueue] addPayment:payment];
    }
} 
```

购买屏幕是由导航控制器控制的单独 uiview。我第一次加载屏幕并进行购买一切都很好。但是，如果我加载屏幕，离开然后返回并进行购买，我会收到以下错误：

```
*** -[FilterPurchase respondsToSelector:]: message sent to deallocated instance 0x1fd92ca0 
```

在进行断点检查后，错误似乎发生在这一行周围：

```
[[SKPaymentQueue defaultQueue] addPayment:payment]; 
```

任何人都可以在这里看到这个问题吗？我正在使用 ARC，所以我有点不确定如何解决这个问题。

谢谢

更新

如果我还单击“恢复”按钮，也会发生同样的事情

```
- (IBAction)restorePurchases:(id)sender
{
[[SKPaymentQueue defaultQueue] restoreCompletedTransactions];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:21:20.760

`[SKPayment paymentWithProductIdentifier:@"demo"];`是一个退化的函数

尝试使用`SKPayment *payment = [SKPayment paymentWithProduct:thisProduct];`

编辑：

您缺少的另一件事是transactionOberver。

添加：

```
[[SKPaymentQueue defaultQueue] addTransactionObeserver:self]; 
```

您的代码将如下所示：

```
- (IBAction)purchaseProduct:(id)sender
{
    SKProduct *thisProduct = [productDetailsList objectAtIndex:[sender tag]];

    if ([thisProduct.productIdentifier isEqualToString:@"demo"]) 
    {
        SKPayment *payment = [SKPayment paymentWithProduct:thisProduct];
        [[SKPaymentQueue defaultQueue] addTransactionObeserver:self];
        [[SKPaymentQueue defaultQueue] addPayment:payment];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:25:56.967

根据文档：

> 在添加支付请求之前，应用程序应该始终至少有一个支付队列的观察者。

听起来您的 SKPaymentTransactionObserver 可能与您的 IAP uiview 一起被释放。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T15:31:37.660

为了解决这个问题，我在代码中添加了以下内容，以便在视图更改时移除观察者。

```
-(void)viewWillDisappear:(BOOL)animated {

[[SKPaymentQueue defaultQueue] removeTransactionObserver:self];

} 
```

# lisp - 轮盘赌选择示例的说明

> ID：15225912
> 
> 赞同：0
> 
> 时间：2013-03-05T14:09:56.250
> 
> 标签：lisp, genetic-algorithm

我有一个关于轮盘选择的 lisp 程序，我试图理解它背后的理论，但我什么都不懂。
如何计算所选字符串的适应度？
例如，如果我有一个字符串 01101，他们是如何得到 169 的适应度值的？

是不是 01101 的二进制编码计算为 13，所以我将值平方并得到答案为 169？

这听起来很蹩脚，但不知何故，我通过这样做得到了正确的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:48:35.443

因此，您拥有的适应度函数是`F=X^2`。

轮盘赌计算个人（字符串）所占整体的比例（根据其适应度），然后用于为下一代随机选择一组字符串。

[建议你](http://en.wikipedia.org/wiki/Genetic_algorithm)多读几遍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T18:06:24.170

（通常）任意选择给定问题的“适应度函数”，记住随着“适应度”指标的上升，解决方案应该接近最优。例如，对于目标是最小化正值的问题，自然选择`F(x)`是`1/x`。

对于手头的问题，似乎已经给出了适应度函数，就好像`F(x) = val(x)*val(x)`不能仅从 (x,F(x)) 的单个值对中确定。

轮盘赌选择只是一种常用的基于适应度的伪随机选择方法。如果您曾经玩过轮盘赌或看过“命运之轮”，这很容易理解。

让我们考虑最简单的情况，其中`F(x) = val(x)`,

假设我们有四个值，`1,2,3 and 4`。

这意味着这些“个体”`1,2,3 and 4`分别具有适应度。现在，选择单个“x1”的概率计算为`F(x1)/(sum of all F(x))`。也就是说，由于适应度之和为`10`，选择概率分别为`0.1,0.2,0.3 and 0.4`。

现在，如果我们从累积的角度考虑这些概率，x 的值将映射到以下“概率：

```
1 ---> (0.0, 0.1]
2 ---> (0.1, (0.1 + 0.2)] ---> (0.1, 0.3]
3 ---> (0.3, (0.1 + 0.2 + 0.3)] ---> (0.3, 0.6]
4 ---> (0.6, (0.1 + 0.2 + 0.3 + 0.4)] ---> (0.6, 1.0] 
```

也就是说，生成的均匀分布随机变量的实例，比如`R`位于归一化区间 中，在 对应的区间中的可能性是对应`(0, 1]`的区间的四倍。`4``1`

换句话说，假设您要旋转一个轮盘式结构，每个`x`分配一个扇区，扇区的面积与其各自的值成比例`F(x)`，那么指标将在任何给定扇区中停止的概率与`F(x)`for that的值成正比`x`。

# php - SOAP 无法连接到主机

> ID：15225915
> 
> 赞同：0
> 
> 时间：2013-03-05T14:10:01.760
> 
> 标签：php, soap, yii

SOAP 在作为 PHP 控制台应用程序启动时无法连接到 https 主机 从浏览器启动时工作正常。但是每次从 CLI 启动时都会抛出 SOAPFault 两者都使用相同的 .ini 文件，并且主机不使用 wsdl。

```
$uid = '****';

$xml_header = '<?xml version="1.0" encoding="UTF-8"?><parameters>';
$xml_footer = '</parameters>';
$xml_content = '';

$xml = new SimpleXMLElement($xml_header.$xml_content.$xml_footer);
$options = array(
    "location" => 'https://***/wsedi/services/EDIServiceSoap',
    "uri" => 'https://***/wsedi/services/Send',
    "exceptions" => true,
    'trace' => true,
);

$data = array(
    new SoapParam('***', "Login"),
    new SoapParam('***', "Password"),
    new SoapParam($uid, "Uid"),
    new SoapParam($xml->asXML(), "Params"),
);

$client = new SoapClient(NULL, $options);

try {
    $return = $client->__soapCall("ExecSQL", $data);
    print_r($return);
} catch (SoapFault $e) {
    echo $e->getMessage();
    var_dump($e->getTrace());
}

array(2) {
      [0] =>
      array(4) {
    'function' =>
    string(11) "__doRequest"
    'class' =>
    string(10) "SoapClient"
    'type' =>
    string(2) "->"
    'args' =>
    array(5) {
      [0] =>
      string(739) "<?xml version="1.0" encoding="UTF-8"?>\n<SOAP-ENV:Envelope xm
lns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="https://***/wsedi/services/Send" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xml
ns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schema
s.xmlsoap.org/soap/encoding/" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org
/soap/encoding/"><SOAP-ENV:Body><ns1:ExecSQL><Login xsi:type="xsd:string">***</Login><Password xsi:type="xsd:string">***</P"...
      [1] =>
      string(52) "https://***/wsedi/services/EDIServiceSoap"
      [2] =>
      string(50) "https://***/wsedi/services/Send#ExecSQL"
      [3] =>
      int(1)
      [4] =>
      int(0)
    }
  }
  [1] =>
  array(6) {
    'file' =>
    string(29) "C:\xampp\htdocs\test\test.php"
    'line' =>
    int(29)
    'function' =>
    string(10) "__soapCall"
    'class' =>
    string(10) "SoapClient"
    'type' =>
    string(2) "->"
    'args' =>
    array(2) {
      [0] =>
      string(7) "ExecSQL"
      [1] =>
      array(4) {
        ...
      }
    }
  }
} 
```

# javascript - 仅使用 Javascript 将数据传递到 Facebook 选项卡应用程序

> ID：15225922
> 
> 赞同：3
> 
> 时间：2013-03-05T14:10:15.303
> 
> 标签：javascript, facebook, facebook-graph-api

我知道您可以使用 app_data 查询字符串参数将数据传递到 Facebook 选项卡应用程序，如下所示：

```
https://www.facebook.com/pages/<page>/11206786180924?id=112086456180924&sk=app_5691879654669760566&app_data=some_data_here 
```

使用 PHP，我知道您会从 signed_request POST 参数中解码 app_data。

但是，我的应用程序只能使用 JS SDK。我无权访问任何后端功能。

有没有办法只使用 Javascript 来检索 app_data？

signed_request 是通过 JS SDK 的 authReponse 传递的，但是，当它被解码时，它不包含 app_data。

# magento - 如何在 Magento 简单产品前端显示尺寸属性选择

> ID：15225924
> 
> 赞同：2
> 
> 时间：2013-03-05T14:10:19.377
> 
> 标签：magento

我在 Magento 上创建了具有主要类别属性颜色和大小的可配置产品。我还有一个用于单独显示简单产品的子类别，但是，我希望用户也能够选择简单产品的尺寸。如何让 Magento 在简单产品上显示尺寸属性？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:50:43.380

你不能直接拥有这个。

示例：您有一个名为 T 恤的可配置产品。您有一些简单的产品名为 Red T-Shirt L Red T-Shirt XL Blue T-Shirt M Blue T-Shirt L Blue T-Shirt XXL Green T-Shirt L

每个简单产品都对应一个特定的尺寸和颜色组合，因此能够在简单产品上更改尺寸是没有意义的。为了满足您的需求，有几种可能性：

-1°）查看 $_product->getProductUrl() 函数以强制人们转到可配置的，在子类别上他们可以看到每个简单的组合，但如果他们点击他们将被重定向到可配置的，预配置的简单点击，但它们能够改变大小和颜色。

-2°）如果您只想在选择颜色后更改尺寸，只需创建中间可配置产品，如蓝色 T 恤，用户只需选择尺寸即可。然后你重定向到这个可配置的产品。总而言之，您可以在其中选择颜色和大小的“主要”可配置项，但是如果您查看子类别并且已经喜欢一种颜色，则可以在其中选择“大小”的“中间”可配置项。

-3°）还有其他可能性，但对这项任务不太好，但我可以命名它们：在每个简单的尺寸中使用自定义选项，使用追加销售产品在产品页面中有其他尺寸信息并执行一些脚本（js 和html) 将它们显示为下拉大小选择器，...

希望这可以帮助

# c# - LinQ OrderBy 匿名值

> ID：15225925
> 
> 赞同：-1
> 
> 时间：2013-03-05T14:10:30.233
> 
> 标签：c#, linq, sql-order-by

以下代码不起作用：

```
var x = from user in db.tblUsers
        select new
        {
            user.Id,
            user.FirstName,
            user.LastName,
            NumOfWins = SqlFactory.GetNumberOfWinsByUser(user.Id)
        };

TblBindingSource.DataSource = x.OrderByDescending(user => user.NumOfWins);
dataGridView1.DataSource = TblBindingSource.DataSource; //<-- fail here 
```

错误：

> 方法“Int32 GetNumberOfWinsByUser(Int32)”不支持对 SQL 的转换。

我知道这会`SqlFactory.GetNumberOfWinsByUser(user.Id)`带来很好的价值。谁可以帮我这个事？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:14:32.850

答案在错误中。您显然正在使用 linq 提供程序，例如将您的 linq 转换为 SQL 的实体框架。它无法将方法 SqlFactory.GetNumberOfWinsByUser(user.Id) 转换为 SQL 语句。如果你想使用它，你将不得不做类似的事情：

```
from user in db.tblUsers.ToList()
          select new { user.Id, user.FirstName, user.LastName, NumOfWins =     SqlFactory.GetNumberOfWinsByUser(user.Id) }; 
```

这将迫使它首先将数据提取到内存中，然后在您的 select 语句中应用转换。

我怀疑上面的方法效率很低，但这只是一个猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:40:47.873

有一种方法可以将这种函数嵌入到 Linq2SQL 查询中，前提是您的函数（`GetNumberOfWinsByUser()`在您的情况下）本身可以编写为`Expression<Func<>>`表达式可以由提供程序转换为 SQL 的类型

这是由 Tomáš Petříček 设计并在他的博客中描述的：

[http://tomasp.net/blog/dynamic-linq-queries.aspx](http://tomasp.net/blog/dynamic-linq-queries.aspx)

它解释了如何定义表达式：

```
Expression<Func<Nwind.Product, decimal?>> calcPrice = 
  (p) => p.UnitPrice * 1.19m; 
```

然后将其嵌入到 Linq to SQL 查询中：

```
var q = 
   from p in db.Products.ToExpandable()  
   where calcPrice.Expand(p) > 30.0m
   select new { 
     p.ProductName, 
     OriginalPrice = p.UnitPrice,
     ShopPrice = calcPrice.Expand(p) }; 
```

使用他创建的扩展方法`ToExpandable()`（代码可供下载）。

这允许将整个查询解析为 SQL 并在数据库服务器上执行，而无需将任何部分结果集具体化到内存中。它应该非常高效，可以用来处理非常复杂的查询。我通常发现将逻辑封装到表达式中会导致代码简单且可重用性好。

我在一个项目中广泛使用了它，并且效果很好。但是，您需要很好地掌握表达方式。

# ios - 如何使用最新的 Facebook SDK 在朋友墙上分享链接？

> ID：15225926
> 
> 赞同：1
> 
> 时间：2013-03-05T14:08:59.767
> 
> 标签：ios, facebook

我正在开发一个严重依赖 Facebook SDK 的 iOS 应用程序。在[Facebook API 2 月发生重大变化](http://developers.facebook.com/roadmap/completed-changes/)之前，即使他们没有安装/允许我的应用程序，我也可以在朋友墙上成功分享链接/文本。我为此使用了 FB 图形路径：[https](https://graph.facebook.com/USER_ID/feed) ://graph.facebook.com/USER_ID/feed 。从现在开始，我不可能尝试通知 API、事件创建和用户标记。用户标记不起作用，也无法在没有我的应用程序的情况下向人们发送通知，并且由于营销原因，事件创建看起来既丑陋又糟糕。让人们有机会在朋友墙上分享链接的最佳方式是什么？

# asp.net - 是否可以一次性更新项目的所有项目引用？

> ID：15225928
> 
> 赞同：0
> 
> 时间：2013-03-05T14:10:37.173
> 
> 标签：asp.net, .net-4.0

我刚刚拿起了一个引用 asp.net 2.0 框架的项目。我目前正在使用 v4。

有没有办法一次性将所有 Microsoft 参考资料从 2.0 更新到 4.0？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:33:22.550

在解决方案的属性选项卡下找到选项。

# sql-server - SQL Server - 将存储的文件从数据库检索到文件系统

> ID：15225929
> 
> 赞同：-1
> 
> 时间：2013-03-05T14:10:41.047
> 
> 标签：sql-server

在 SQL Server 数据库中，我们将文件存储在表中。

我们想从数据库中提取文件到文件系统

这些文件是html、xls、pdf、图像格式。

请建议以最少的编程工作来检索信息的选项。

1.  这可以使用一些 SQL 函数/TSQL 代码直接从数据库中完成吗？
2.  这可以通过 ASP.net 完成吗？
3.  我们可以将记录导出为 XML 文件并处理附件吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:54:55.120

如果数据存储为 BLOB，那么您可以像查询 SQL Server 中的任何其他列一样简单地查询该列。如果您使用 Filestream 将文件存储到文件系统中，那么这篇[MSDN 杂志文章](http://msdn.microsoft.com/en-us/magazine/dd695918.aspx)应该会对您有所帮助。

# python - 如何将单个 apache 日志条目解析为 python 对象

> ID：15225934
> 
> 赞同：3
> 
> 时间：2013-03-05T14:10:52.103
> 
> 标签：python, apache, parsing, object, logging

我正坐在我的第一个 python 脚本上，试图将 apache 日志解析为可访问的对象，但我无法让它工作。

我正在尝试使用[此](http://css.dzone.com/articles/apache-log-parsing-python)示例（正在运行`Python 2.7`）并且只想让它与单个日志条目一起使用。

这是我所拥有的：

```
import re
from collections import namedtuple

format_pat= re.compile( 
    r"(?P<host>[\d\.]+)\s" 
    r"(?P<identity>\S*)\s" 
    r"(?P<user>\S*)\s"
    r"\[(?P<time>.*?)\]\s"
    r'"(?P<request>.*?)"\s'
    r"(?P<status>\d+)\s"
    r"(?P<bytes>\S*)\s"
    r'"(?P<referer>.*?)"\s'
    r'"(?P<user_agent>.*?)"\s*' 
)

Access = namedtuple('Access',
    ['host', 'identity', 'user', 'time', 'request',
    'status', 'bytes', 'referer', 'user_agent'] )

# my entry
log = '2001:470:1f14:169:15f3:824f:8a61:7b59 - ABC-15414 [14/Nov/2012:09:32:31 +0100] "POST /setConnectionXml HTTP/1.1" 200 4 "-" "-" 102356'

match= format_pat.match(log) 
print match

if match:
   Access( **match.groupdict() )
   print Access 
```

我不确定我做错了什么，但`match`返回`none`，而不是我希望的对象。

有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T14:20:13.187

您的`host`条目仅匹配数字和点（IPv4 地址），但您发布的日志条目示例是 IPv6 地址。调整您的模式以允许该格式（因此要么匹配数字和点，要么匹配十六进制字符和冒号：

```
format_pat= re.compile( 
    r"(?P<host>(?:[\d\.]|[\da-fA-F:])+)\s" 
    r"(?P<identity>\S*)\s" 
    r"(?P<user>\S*)\s"
    r"\[(?P<time>.*?)\]\s"
    r'"(?P<request>.*?)"\s'
    r"(?P<status>\d+)\s"
    r"(?P<bytes>\S*)\s"
    r'"(?P<referer>.*?)"\s'
    r'"(?P<user_agent>.*?)"\s*' 
) 
```

通过该调整，您的示例匹配：

```
>>> format_pat.match(log).groupdict()
{'status': '200', 'bytes': '4', 'request': 'POST /setConnectionXml HTTP/1.1', 'host': '2001:470:1f14:169:15f3:824f:8a61:7b59', 'referer': '-', 'user': 'ABC-15414', 'time': '14/Nov/2012:09:32:31 +0100', 'identity': '-', 'user_agent': '-'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:14:51.427

你必须使用`format_pat.search(log)`

```
In [6]: m = format_pat.search(log)

In [7]: m.groupdict()
Out[7]: 
{'bytes': '4',
 'host': '59',
 'identity': '-',
 'referer': '-',
 'request': 'POST /setConnectionXml HTTP/1.1',
 'status': '200',
 'time': '14/Nov/2012:09:32:31 +0100',
 'user': 'ABC-15414',
 'user_agent': '-'} 
```

# mysql - 通过左连接/结果降低获得最低价格

> ID：15225935
> 
> 赞同：1
> 
> 时间：2013-03-05T14:10:56.297
> 
> 标签：mysql, join

我正在编写一个在线商店。产品具有默认价格，但由于它可能具有不同的属性（颜色、尺寸……），这些不同的属性也可能导致不同的价格。目前我正在尝试生成一个 mysql 查询，它可以帮助我找到产品的最低和最高可能价格。目前使用 LEFT JOIN 将查询的结果减少到只有一行，我不知道为什么。

```
SELECT
    products.id AS id,
    categories.name AS category_name,
    MIN(product_attributes.price) AS min_price, MAX(product_attributes.price) AS max_price,
    products.*
FROM products
LEFT JOIN categories ON category_id=categories.id
LEFT JOIN product_attributes ON products.id=product_attributes.product_id 
```

这甚至是正确的方法吗？我对mysql不太了解，我只是尝试尝试，如果它有效，我很高兴。无论如何感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:12:10.687

您在当前查询中缺少一个`GROUP BY`子句，但我建议使用子查询来获取结果：

```
SELECT
    p.id AS id,
    c.name AS category_name,
    pa.min_price, 
    pa.max_price,
    p.*
FROM products p
LEFT JOIN categories c
   ON p.category_id = c.id
LEFT JOIN 
(
    select MIN(product_attributes.price) min_price, 
        MAX(product_attributes.price) max_price, 
        product_id
    from product_attributes
    group by product_id
) pa 
    ON p.id=pa.product_id 
```

我建议使用子查询的主要原因是因为 MySQL MySQL 使用 a[`EXTENSION TO GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)允许不强制执行[FULL GROUP BY](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html#sqlmode_only_full_group_by)的行为。

MySQL 中的此扩展可能会导致在`SELECT`列表中的列中返回未在`GROUP BY`子句或聚合函数中的列中的意外值。

来自 MySQL 文档：

> MySQL 扩展了 GROUP BY 的使用，以便选择列表可以引用未在 GROUP BY 子句中命名的非聚合列。...您可以使用此功能通过避免不必要的列排序和分组来获得更好的性能。但是，这主要在每个未在 GROUP BY 中命名的非聚合列中的所有值对于每个组都相同时很有用。服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。此外，从每个组中选择值不会受到添加 ORDER BY 子句的影响。在选择了值之后对结果集进行排序，并且 ORDER BY 不会影响服务器选择的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:12:06.870

你需要有`GROUP BY`子句，

```
SELECT
    products.id AS id,
    categories.name AS category_name,
    MIN(product_attributes.price) AS min_price, 
    MAX(product_attributes.price) AS max_price.
    products.*
FROM products
LEFT JOIN categories ON category_id=categories.id
LEFT JOIN product_attributes ON products.id=product_attributes.product_id
GROUP BY products.id, categories.name 
```

但在 mysql 中使用时要小心，因为如果默认禁用`GROUP BY`该语句，则该语句完全有效。[`ONLY_FULL_GROUP_BY`](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html#sqlmode_only_full_group_by)

进行查询的正确方法是使用子查询，该子查询分别获取每种产品的最低价格。

```
SELECT  a.id AS id,
        b.name AS category_name,
        c.minPrice, 
        c.maxPrice,
        a.*
FROM    products a
        LEFT JOIN categories b 
            ON a.category_id = b.id
        LEFT JOIN product_attributes c
        (
            SELECT  product_id,
                    MIN(product_attributes.price) minPrice, 
                    MAX(product_attributes.price) maxPrice 
            FROM    product_attributes
            GROUP   BY product_id
        ) d ON a.id = c.product_id 
```

# php - PHP强制接口实现

> ID：15225938
> 
> 赞同：2
> 
> 时间：2013-03-05T14:11:05.207
> 
> 标签：php, interface

我的应用程序中有一个 SystemInfoFactory 类，它有一个`getSystemInfo()`方法：

```
/**
 * Returns SystemInfo object based on which OS
 * server uses
 *
 * @return SystemInfoInterface SystemInfo object
 */
public function getSystemInfo()
{
    $os = $this->getOS();

    $systemInfo = null;

    switch ($os) {
        case "Linux":
            $systemInfo = new LinuxInfo();
            break;
        case "Darwin":
            $systemInfo = new OSXInfo();
            break;
        case "Windows":
            $systemInfo = new WindowsInfo();
            break;
    }
    return $systemInfo;
} 
```

因此它根据主机系统选择合适的对象。现在，每个“信息类”都实现`SystemInfo`了接口（getArchitecture、getCPU 等方法），但正如您所见，我的代码中没有任何地方检查返回的对象是否真的实现了接口。`$systemInfo`在返回之前检查所选对象是否实现它是否被认为是“好习惯” ？这显然不是*必需*的，但如果有人扩展此应用程序（例如添加 BSD 支持）并忘记实现所有方法，他可能更难以调试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:16:42.723

这绝对是个好习惯。您在 docblock 中定义您的方法返回`SystemInfo`. 您的来电者应该能够依赖它。这在您的代码中很简单：

```
/**
 * Returns SystemInfo object based on which OS
 * server uses
 *
 * @return SystemInfoInterface SystemInfo object
 */
public function getSystemInfo()
{
    $os = $this->getOS();

    $systemInfo = null;

    switch ($os) {
        case "Linux":
            $systemInfo = new LinuxInfo();
            break;
        case "Darwin":
            $systemInfo = new OSXInfo();
            break;
        case "Windows":
            $systemInfo = new WindowsInfo();
            break;
        default:
            throw new \RuntimeException('System not supported');
            break;
    }

    if (!$systeminfo instanceof SystemInfo) {
        throw new \RuntimeException('Invalid SystemInfo object returned');
    }

    return $systemInfo;
} 
```

确保您声明您将从该方法调用中抛出异常。这里的异常清楚地说明了发生了什么，而不必稍后在代码中追逐“未定义的方法”错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:21:09.430

我想，这里的关键词是 Duck Typing。一个对象的接口是由它的方法和属性定义的，而不是它的祖先和实现的接口。

看看这个：[http ://en.wikipedia.org/wiki/Duck_typing](http://en.wikipedia.org/wiki/Duck_typing)

回到 PHP：如果你不检查对象是否实现了你的接口，它是完全有效的并且没有坏的风格。如果代码崩溃，则必须责怪该类的实现者。如果代码弄乱了，我会觉得很烦人`if ($obj instanceof FancyInterface) {`。

# java - 根据先前的值原子地插入或更新实体

> ID：15225942
> 
> 赞同：3
> 
> 时间：2013-03-05T14:11:13.233
> 
> 标签：java, jpa

我收集了一些关于我的系统的统计数据，比如说，使用我的系统的人数和他们这一天花费的总时间。我的统计实体如下所示：

```
class Stats {
    Date date;
    Long numUsers; 
    Long totalTime;        
} 
```

白天我需要**根据以前的值****更新**这些统计信息，例如：

 **```
stats.numUsers += 1;
stats.totalTime += timeSpentByLastUser; 
```

当然，如果今天是第一次，我需要**初始化**这些数据：

```
stats.numUsers = 1;
stats.totalTime = timSpentByFirstUserForToday; 
```

现在我想把**它全部移到数据库**中。也就是说，创建`Stats`一个实体并根据先前的值进行原子插入/更新。那么我该怎么做呢？我正在使用**JPA**，因此任何适合其模型的解决方案都将是合适的。

请注意，JPA 具有插入或更新机制`EntityManager.merge()`——但它没有考虑实体的先前状态，这在此处是必不可少的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T14:45:38.923

是的，您通过强制用于持久性的事务锁定机制来保持原子性。

**例子**

```
Employee employee = entityManager.find(Employee.class, id);
employee.getAddress().setCity("Ottawa");
entityManager.lock(employee, LockModeType.WRITE); 
```

请参阅下面的链接，它提供了 JPA 2.0 中可用的锁定模式

[JPA 2.0 锁定](http://en.wikibooks.org/wiki/Java_Persistence/Locking#JPA_2.0_Locking)**

# vba - 在我自己的 vba 函数中获得没有 gosub 的返回

> ID：15225945
> 
> 赞同：5
> 
> 时间：2013-03-05T14:11:21.653
> 
> 标签：vba, return

我已经与 vba 斗争了一段时间，令人惊讶的是它并没有变得更好。我编写了以下代码，因此我可以为对象使用特殊的比较运算符。

```
Public Function myEquals(v As CCtypestore) As Boolean

    If v Is Nothing Then
        myEquals = False
        Return
    End If

    If Me.Acronym = v.Acronym Then
        myEquals = True
        Return
    End If

    myEquals = False
    Return
End Function 
```

我传入的对象 v 目前是 Nothing，所以我有点期望结果是微不足道的 False。令人惊讶的是，我在没有 gosub 的情况下返回错误。任何线索为什么会这样？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-05T14:18:19.340

删除`Return`语句！

在 VBA 中，您使用行设置返回值`myEquals = ...`。

总而言之，您可以将函数简化为以下代码：

```
Public Function myEquals(v As CCtypestore) As Boolean
    If Not v Is Nothing Then
        myEquals = (Me.Acronym = v.Acronym)
    End If
End Function 
```

或者，使用这个：

```
Public Function myEquals(v As CCtypestore) As Boolean
    On Error Goto ErrorHandler
    myEquals = (Me.Acronym = v.Acronym)
    Exit Function
ErrorHandler:
    myEquals = False
End Function 
```

`Return`如果您想在代码中使用直接跳转，即构建意大利面条代码，这是一个古老的遗物！请参阅帮助文件中的此示例：

```
Sub GosubDemo()
Dim Num
' Solicit a number from the user.
    Num = InputBox("Enter a positive number to be divided by 2.")
' Only use routine if user enters a positive number.
    If Num > 0 Then GoSub MyRoutine    
    Debug.Print Num
    Exit Sub    ' Use Exit to prevent an error.
MyRoutine:
    Num = Num/2    ' Perform the division.
    Return    ' Return control to statement.
End Sub    ' following the GoSub statement. 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-05T14:14:26.500

使用`Exit Function`而不是`Return`.

您也可以`Exit Function`通过使用类似的结构来 避免这些情况

```
If .... Then  
    'some code
ElseIf...Then 
   'some other code
ElseIf...Then 
   'etc 
Else  
   'final 
End if 
```

# c# - SQLCommandType.View - 为什么这不是 MS 提供的？

> ID：15225949
> 
> 赞同：2
> 
> 时间：2013-03-05T14:11:27.720
> 
> 标签：c#, .net, vb.net, ado.net

我们看到 System.Data.CommandType 只有 3 个枚举：“StoredProcedure”、“TableDirect”和“Text”。为什么我们不将“查看”视为一个选项？Microsoft 不提供此选项的特定框架原因是什么？

我在这里专门谈论 SQL Server 视图。

您的回答将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T19:08:51.880

因为 a`View`可以通过`TableDirect`or访问`Text`。无论如何，最常见的访问是`Text`因为您通常会执行以下操作：

```
DataTable dt = new DataTable();

using (SqlConnection c = new SqlConnection(cString))
{
    using (SqlDataAdapter sda = new SqlDataAdapter(sql, c))
    {
        sda.SelectCommand.Parameters.Add("parm1", value1);

        c.Open();
        sda.Fill(dt);
    }
} 
```

最后，视图实际上在 SQL Server 中表示为表。它有一个真正的表定义，它恰好是用查询构建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T19:16:03.487

大多数情况下，View 不是单独使用的，而是作为查询或 SP 的一部分使用的。因此，没有必要提供专用的 CommandType。函数也是如此——没有 CommandType.Function。

# regex - 正则表达式修改 html 标签

> ID：15225953
> 
> 赞同：0
> 
> 时间：2013-03-05T14:11:41.853
> 
> 标签：regex, intellij-idea, webstorm

我正在尝试替换

```
<legend>my legend</legend> 
```

和

```
<legend><span>my legend</span></legend> 
```

Intellij/Webstorm，支持正则表达式匹配和替换。我尝试了[这里](http://www.jetbrains.com/webstorm/webhelp/finding-and-replacing-text-in-file.html)的示例，但没有奏效。任何有关查找和替换如上所述的正则表达式的帮助表示赞赏。

我使用 mac，所以 gnu 命令行工具也是一个选项（sed，..）

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T14:14:29.870

将替换与以下正则表达式一起使用：

```
<legend>([^<]*)</legend> 
```

和更换

```
<legend><span>$1</span></legend> 
```

# jquery - jQuery Mobile 面板宽度

> ID：15225960
> 
> 赞同：9
> 
> 时间：2013-03-05T14:11:55.067
> 
> 标签：jquery, css, jquery-mobile

在新的 jQuery mobile 中有一个新的面板选项。我已经实现了它并且它可以工作，但我想自定义面板的宽度。标准宽度是272px，对我来说有点多。我试过使用

```
.ui-panel{width:150px;} 
```

CSS 选择器，但这只是调整面板内容的大小。面板本身保持可见并保持相同的宽度。在 Firefox 和 chrome 中使用检查器，我无法找到负责此面板的正确 div。有人可以帮我找到一种以正确方式调整面板大小的方法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-22T07:06:26.177

我想到了！没那么复杂，真的。我自己只是在使用 structure.css，但如果您使用其他 CSS 文件，则可能需要更多自定义。反正...

使用您最喜欢的编辑器，查找并替换“17em”并将其替换为您实际想要的值。左侧面板有样式，右侧面板有样式。我不会急于完成整个过程，因为这里或那里可能有一个不相关的“17em”。只需一分钟...

这是一个简单的答案，但我对自己很满意：p

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-22T08:33:37.223

我自己也遇到了同样的问题，并按照 tylerl 的建议将 17em 替换为我需要的宽度。效果很好，除了我使用 google cdn 加载 css 的事实，所以我不能直接更改它，而且总的来说我不是更改库代码的忠实粉丝。

所以玩了一下我想出了这段代码来重新定义默认的jquery mobile的css [https://gist.github.com/geekdevs/5433246](https://gist.github.com/geekdevs/5433246)

您可以分别配置左侧和右侧边栏的宽度。这是 LESS 代码，但只需将 @left-sidebar-width 和 @right-sidebar-width 替换为您需要的宽度即可使其也适用于纯 CSS。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-11T20:51:50.743

他们在此演示中展示了如何更改面板宽度：http: [//jquerymobile.com/demos/1.3.0/docs/examples/panels/panel-styling.html](http://jquerymobile.com/demos/1.3.0/docs/examples/panels/panel-styling.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-24T11:16:16.103

我不想对库 css 文件进行修改，所以我尝试了上面的补丁，但没有一个适用于**jquery mobile 1.4.1**

我必须添加更多样式才能使其正常工作。

这是我修改后的css。（分别用您的左右尺寸替换 10em 和 15 em）

```
.ui-panel {
    width: 10em;
}

.ui-panel.ui-panel-position-right {
    width: 15em;
}

.ui-panel.ui-panel-closed {
    width: 0;
}

.ui-panel-animate.ui-panel-position-left.ui-panel-display-overlay, .ui-panel-animate.ui-panel-position-left.ui-panel-display-push {
    -webkit-transform: translate3d(-10em, 0, 0);
    -moz-transform: translate3d(-10em, 0, 0);
    transform: translate3d(-10em, 0, 0)
}

.ui-panel-animate.ui-panel-position-right.ui-panel-display-overlay, .ui-panel-animate.ui-panel-position-right.ui-panel-display-push {
    -webkit-transform: translate3d(15em, 0, 0);
    -moz-transform: translate3d(15em, 0, 0);
    transform: translate3d(15em, 0, 0)
}

.ui-panel-animate.ui-panel-content-fixed-toolbar-position-left.ui-panel-content-fixed-toolbar-open.ui-panel-content-fixed-toolbar-display-reveal, .ui-panel-animate.ui-panel-content-fixed-toolbar-position-left.ui-panel-content-fixed-toolbar-open.ui-panel-content-fixed-toolbar-display-push, .ui-panel-animate.ui-panel-content-wrap-position-left.ui-panel-content-wrap-open.ui-panel-content-wrap-display-reveal, .ui-panel-animate.ui-panel-content-wrap-position-left.ui-panel-content-wrap-open.ui-panel-content-wrap-display-push {
    -webkit-transform: translate3d(10em, 0, 0);
    -moz-transform: translate3d(10em, 0, 0);
    transform: translate3d(10em, 0, 0)
}

.ui-panel-animate.ui-panel-page-content-position-left{
    -webkit-transform: translate3d(10em, 0, 0);
    -moz-transform: translate3d(10em, 0, 0);
    transform: translate3d(10em, 0, 0);
}

.ui-panel-animate.ui-panel-content-fixed-toolbar-position-right.ui-panel-content-fixed-toolbar-open.ui-panel-content-fixed-toolbar-display-reveal, .ui-panel-animate.ui-panel-content-fixed-toolbar-position-right.ui-panel-content-fixed-toolbar-open.ui-panel-content-fixed-toolbar-display-push, .ui-panel-animate.ui-panel-content-wrap-position-right.ui-panel-content-wrap-open.ui-panel-content-wrap-display-reveal, .ui-panel-animate.ui-panel-content-wrap-position-right.ui-panel-content-wrap-open.ui-panel-content-wrap-display-push {
    -webkit-transform: translate3d(-15em, 0, 0);
    -moz-transform: translate3d(-15em, 0, 0);
    transform: translate3d(-15em, 0, 0)
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-16T19:53:01.173

如果您不想全局编辑大小，请将其添加到您的自定义 css 中，在必要时添加 ID，将**23em**更改为您想要的宽度：

**注意：**这仅适用于左侧。

```
.ui-panel {
    width: 23em;
}
.ui-panel-position-left {
    left: -23em;
}
/* positioning: content wrap, fixed toolbars and dismiss */
/* panel left open */
.ui-panel-content-fixed-toolbar-position-left.ui-panel-content-fixed-toolbar-open,
.ui-panel-content-wrap-position-left.ui-panel-content-wrap-open,
.ui-panel-dismiss-position-left.ui-panel-dismiss-open {
    left: 23em;
    right: -23em;
}
/* animated: panel left open (for reveal and push) */
.ui-panel-animate.ui-panel-content-fixed-toolbar-position-left.ui-panel-content-fixed-toolbar-open.ui-panel-content-fixed-toolbar-display-reveal,
.ui-panel-animate.ui-panel-content-fixed-toolbar-position-left.ui-panel-content-fixed-toolbar-open.ui-panel-content-fixed-toolbar-display-push,
.ui-panel-animate.ui-panel-content-wrap-position-left.ui-panel-content-wrap-open.ui-panel-content-wrap-display-reveal,
.ui-panel-animate.ui-panel-content-wrap-position-left.ui-panel-content-wrap-open.ui-panel-content-wrap-display-push {
    -webkit-transform: translate3d(23em,0,0);
    -moz-transform: translate3d(23em,0,0);
    transform: translate3d(23em,0,0);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T15:06:35.723

我想你打错了。尝试

```
.ui-panel { width: 150px; } 
```

或者如果您要发布该内联，也许

```
<panel style="width: 150px;"> 
```

当然，尽管我对 jquery 很陌生，但我可能是错的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-20T16:36:23.847

你需要把下面的CSS（左面板）

```
.ui-panel{
    width: 150px!important;
}

.ui-panel-animate.ui-panel-page-content-position-left {

    transform: translate3d(150px,0,0) !important;
} 
```

# iphone - 发现差异 iphone 4s 和 5 工作错误

> ID：15225968
> 
> 赞同：0
> 
> 时间：2013-03-05T14:12:17.580
> 
> 标签：iphone, objective-c

配置文件

```
#define IS_IPHONE5  [[UIScreen mainScreen] bounds].size.height == 568 
```

主视图控制器.m

```
- ( void ) phoneType{

    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone){
        CGSize result = [[UIScreen mainScreen] bounds].size;
        if(result.height == 568){
            NSLog(@"iPhone 5");
            homeImg.image = [UIImage imageNamed:@"Background-Home.fw.png"];
            loginImg.image=[UIImage imageNamed:@"Background.fw.png"];
        }
        else{
            NSLog(@"iPhone 4S");
            homeImg.image = [UIImage imageNamed:@"Background-Home.png"];
            loginImg.image=[UIImage imageNamed:@"Background.png"];            
        }
    } 
```

这就是 iphone 4s 和 5 我发现差异的方式。当我在 iphone 5 上执行此代码时记录 iphone 4s 打印。如何更改我的代码以正确执行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:19:08.013

这仅在您至少向`Default-568h@2x.png`应用程序中添加了启动图像时才有效。否则，这将始终返回 false。（因为如果您没有启动图像，屏幕将被黑框化）

此外，您可能希望将 iPhone 5 检查更改为

```
bool isIphone5 = (([[UIDevice currentDevice] userInterfaceIdiom] 
== UIUserInterfaceIdiomPhone) && (([UIScreen mainScreen].bounds.size.height * 
[[UIScreen mainScreen] scale]) >= 1136)); 
```

由于 == 和 != 的浮点问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:16:28.210

你可以试试这个：

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    CGSize result = [[UIScreen mainScreen] bounds].size;
    if(result.height == 480)
    {
        // iPhone Classic
    }
    if(result.height == 568)
    {
        // iPhone 5
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:17:42.083

C 中数学的终极规则：永远不要使用`==`和`!=`处理浮点数。它们不像你期望的那样工作。与其检查它是否为特定值，不如检查它是否小于或大于中间值：

```
IS_IPHONE5 ([[UIScreen mainScreen] bounds].size.height > 500) 
```

此外，建议始终将宏括起来。

# inner-join - Select with Inner Join with Multipart Identifier and Being Clause

> ID：15225969
> 
> 赞同：3
> 
> 时间：2013-03-05T14:12:19.513
> 
> 标签：inner-join, identifier, multipart, having-clause

我需要为具有重复项的多部分标识符选择某些字段。

我有查询以正确获取重复项。

```
SELECT   b.MemEmpID, b.LastName, b.FirstName
               FROM     table1 As b
               GROUP BY b.MemEmpID, b.LastName, b.FirstName
               HAVING   Count(*) > 1 
```

但是在找到重复项后，我需要从同一个表中获取更多信息，但仅限于具有重复项的多部分标识符。所以像下面这样。

有人可以帮我正确的语法吗？

```
SELECT a.memempid, a.depkey, a.lastname, a.firstname, a.birthdate, a.memrelation
FROM   table1 As a
INNER JOIN(SELECT   b.MemEmpID, b.LastName, b.FirstName
               FROM     table1 As b
               GROUP BY b.MemEmpID, b.LastName, b.FirstName
               HAVING   Count(*) > 1)
ON b.memempid = a.memempid
AND b.lastname = a.lastname
AND b.firstname = a.firstname 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:43:33.580

你真的很亲近。您需要为子查询设置别名。

`table1 As b`通过分组失去了它的范围，`()`因此您需要为带括号的子查询设置别名。您可以重用`b`- 它只会知道返回的列，但为了清楚起见，我选择`(...) as c`消除歧义。

```
SELECT a.memempid, a.depkey, a.lastname, a.firstname, a.birthdate, a.memrelation
FROM   table1 As a
INNER JOIN
    (SELECT   b.MemEmpID, b.LastName, b.FirstName
     FROM     table1 As b
     GROUP BY b.MemEmpID, b.LastName, b.FirstName
     HAVING   Count(*) > 1
    ) as c
ON c.memempid = a.memempid
    AND c.lastname = a.lastname
    AND c.firstname = a.firstname 
```

# android - 使用意图打开一个内置的 android 活动。当我按下按钮或Textview（我把它作为一个按钮）时没有任何反应。请帮助

> ID：15225970
> 
> 赞同：-2
> 
> 时间：2013-03-05T14:12:19.610
> 
> 标签：android, android-intent

这是 scr java 文件 TestingbankaiActivity.java

```
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class TestingbankaiActivity extends Activity implements OnClickListener {
Button b;
TextView tv;

// Class c,c1;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.testingactivity);
    initialize();

}

private void initialize() {
    // TODO Auto-generated method stub
    b = (Button) findViewById(R.id.b1);
    tv = (TextView) findViewById(R.id.tvb1);
}

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {

    case R.id.b1:

        Intent i = new Intent(android.content.Intent.ACTION_DIAL,
                Uri.parse("tel:9642777959"));
        startActivity(i);
        break;

    case R.id.tvb1:

        Intent i1 = new Intent(android.content.Intent.ACTION_DIAL,
                Uri.parse("tel:9642777959"));
        startActivity(i1);
        break;

    }

}
}

this is the xml file .

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<Button
    android:id="@+id/b1"
    android:layout_width="70dip"
    android:layout_height="70dip"
    android:text="hhhh" />

<TextView
    android:id="@+id/tvb1"
    android:layout_width="50dip"
    android:layout_height="50dip"
    android:text="hha" />

</LinearLayout>

This is the manifest file

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.testing.bankai"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />
<uses-permission android:name="android.permission.INTERNET" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".TestingbankaiActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

最后，我得到了带有文本视图和按钮的屏幕。我想要的是，如果用户按下 textview 或按钮，它应该是动作拨号意图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T15:38:07.263

您需要将“单击按钮/文本视图”事件链接到您的代码。您所做的只是创建了按钮，但您还没有设置`OnClickListener`. 有两种方法可以做到这一点：

1) 将以下内容添加到您的 Button 和 TextView 的 layout.xml 中：

```
android:onClick="onClick" 
```

2）将以下代码添加到您的`initialize()`方法中：

```
b.setOnClickListener(this);
tv.setOnClickListener(this); 
```

# c++ - Windows CreateThread 内类函数调用，指针引用崩溃？

> ID：15225972
> 
> 赞同：0
> 
> 时间：2013-03-05T14:12:27.997
> 
> 标签：c++, windows, pointers, reference, createthread

下面我有一个`int main()`和两个头文件，其中一个是用于创建线程的类，另一个是在类`object`中创建的名为的`windows_thread`类。这个非常简单的练习应该输出 99 而不是 1（出于某种未知原因）。我还尝试使用指向一个对象的指针，该对象在从函数到类`new`时崩溃，可能是因为它不存在。我希望有人可以解决这个问题，否则我只会在.`void call()``Thread_no_1( )``object``int main()`

这是主要的。

```
#include "windows_thread.h"

int main()
{
    windows_thread* THREAD = new windows_thread();
    THREAD->thread();

    delete THREAD;

    return 0;
} 
```

这是 windows_thread.h

```
#include <windows.h>
#include <stdio.h>
#include "object.h"

#define BUF_SIZE 255

class windows_thread
{
        object OBJECT;

    public:

        windows_thread():OBJECT(99)
        {
            //OBJECT = new object(99);

        }
        ~windows_thread()
        {
            //delete OBJECT;
        }
        void thread()
        {
            std::cout<<"void thread: "<<std::endl;
            int Data_Of_Thread_1 = 1;            // Data of Thread 1
            HANDLE Handle_Of_Thread_1 = 0;       // variable to hold handle of Thread 1

            HANDLE Array_Of_Thread_Handles[1];   // Aray to store thread handles

    // Create thread 1.
            Handle_Of_Thread_1 = CreateThread( NULL, 0,  Wrap_Thread_no_1, &Data_Of_Thread_1, 0, NULL);
            if ( Handle_Of_Thread_1 == NULL)  ExitProcess(Data_Of_Thread_1);

    // Store Thread handles in Array of Thread Handles as per the requirement of WaitForMultipleObjects()
            Array_Of_Thread_Handles[0] = Handle_Of_Thread_1;

    // Wait until all threads have terminated.
            WaitForMultipleObjects( 1, Array_Of_Thread_Handles, TRUE, INFINITE);

            printf("Since All threads executed lets close their handles \n");

    // Close all thread handles upon completion.
            CloseHandle(Handle_Of_Thread_1);
        }
        void DisplayMessage (HANDLE hScreen, char *ThreadName, int Data, int Count)
        {
            TCHAR msgBuf[BUF_SIZE];
            size_t cchStringSize;
            DWORD dwChars;

    // Print message using thread-safe functions.
    //StringCchPrintf(msgBuf, BUF_SIZE, TEXT("Executing iteration %02d of %s having data = %02d \n"), Count, ThreadName, Data);
    //StringCchLength(msgBuf, BUF_SIZE, &cchStringSize);
            WriteConsole(hScreen, msgBuf, cchStringSize, &dwChars, NULL);
            Sleep(1000);
        }
        DWORD WINAPI Thread_no_1(  )
        {
            std::cout<<"Thread_no_1: "<<std::endl;
            OBJECT.call();
            //OBJECT->call();

            return 0;
        }
        static DWORD WINAPI Wrap_Thread_no_1( LPVOID lpParam )
        {
            std::cout<<"Wrap_Thread_no_1: "<<std::endl;

            windows_thread *self = reinterpret_cast<windows_thread*>(lpParam);
            self->Thread_no_1();

            return 0;
        }
}; 
```

接下来是object.h

```
#ifndef OBJECT_H
#define OBJECT_H

#include <iostream>

class object
{
        private:

            int value;

        public:

        object(int value)
        {
            std::cout<<"object::constructor: "<<std::endl;
            this->value = value;
        }
        ~object(){}
        void call()
        {
            std::cout<<"object::call(): begin"<<std::endl;
            std::cout<<value<<std::endl;
            std::cout<<"object::call(): end"<<std::endl;
        }
};
#endif 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T14:18:40.020

这个函数调用：

```
Handle_Of_Thread_1 = CreateThread(
    NULL, 
    0,  
    Wrap_Thread_no_1, 
    &Data_Of_Thread_1, // <== THIS IS A POINTER TO AN int
    0, 
    NULL
    ); 
```

`&Data_Of_Thread_1`将（指向 an 的指针`int`）传递给`CreateThread()`. 这是最终传递给`Wrap_Thread_no_1()`.

在该函数内部，然后将该指针转换为 a`windows_thread*`并通过它调用成员函数。这会在您的代码中注入**未定义的行为**。

您可能打算这样做：

```
Handle_Of_Thread_1 = CreateThread(NULL, 0,  Wrap_Thread_no_1, this, 0, NULL);
//                                                            ^^^^ 
```

# android - 如何使用Sqlite CASE WHEN 添加更多条件？

> ID：15225976
> 
> 赞同：0
> 
> 时间：2013-03-05T14:12:34.737
> 
> 标签：android, sqlite, syntax, case

当一个案例得到满足时，我希望用更多的条件来评估一行。

这是我想出的：

```
SELECT ... FROM ...
WHERE Events.CALENDAR_ID + "=?
AND case when " + Events.DTEND + ">0 
then " + Events.DTSTART + ">? end"; 
```

但是，此语句会忽略不满足这种情况的行。

```
SELECT ... FROM ...
WHERE Events.CALENDAR_ID + "=?
case when " + Events.DTEND + ">0 
then AND " + Events.DTSTART + ">? end"; 
```

然后我想出了这个，但 Sqlite 告诉我这只是糟糕的语法。

什么是正确的语法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:20:54.427

正确的语法是：

```
SELECT ... FROM ...
WHERE "case when " + Events.DTEND + ">0 " +
" then " + Events.CALENDAR_ID + "=? AND " + Events.DTSTART + ">? " +
" else " + Events.CALENDAR_ID + "=? end" 
```

# c# - 无法在我的网络服务中使用公共课程

> ID：15225978
> 
> 赞同：1
> 
> 时间：2013-03-05T14:12:39.417
> 
> 标签：c#, asp.net, web-services, asmx, web-site-project

为什么我不能使用以下公共课程：

```
namespace OrganizerUI.App_code
{
    public class Employee
    {

        private string text;

        public string Text
        {
            get { return text; }
            set { text = value; }
        }

    }
} 
```

* * *

在我的`web service`：

![在此处输入图像描述](../Images/fb7bed14e0d54049d7d9ec54a64e806d.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T14:23:27.627

通常（总是？），添加到 Visual Studio App_Code 目录的代码文件默认情况下不会设置为编译，即使它们是 .Net 代码。它们设置为“内容”，这意味着它们仅包含在输出中。如果您右键单击该文件并选择“属性”，您可以看到/将其更改为“编译”而不是“内容”。

# perl - Perl - 代码审查

> ID：15225979
> 
> 赞同：0
> 
> 时间：2013-03-05T14:12:40.123
> 
> 标签：perl, file, text, counting

我正在开发一个程序，该程序从 CSV 文件中获取信息作为源，以通过具有“客户包”的文本文件进行搜索。我只对某些条目进行了奇怪的计数，我似乎无法弄清楚是什么导致了重复计数。谁能查看我的代码并告诉我我的逻辑/语法是否关闭？（可能是）。我想要完成的只是计算 csv 文件中条目的文本文件中的总出现次数（packageid，package_description）

谢谢您的帮助！我在这里发疯了。

```
#!/usr/bin/perl

use strict;
use Text::CSV;

# Variables already declared in the other PL file ** Remove if consolidating **

my $file2 = 'master_plist.csv';
my $csv2 = Text::CSV->new(); # Create a Text::CSV object

open (CSV2, "<", $file2) or die $!; #open CSV file for parsing

while (<CSV2>) {

    if ($csv2->parse($_)) {
            my @columns2 = $csv2->fields(); # Parse CSV and load into an array for each row.
            my $packID = $columns2[0];
            my $packDESC = $columns2[1];

my $val = 'customer_packages_report.txt';

chomp ($val);

my $cnt=0;

open (HNDL, "$val") || die "wrong filename";

while ($val = <HNDL>)
{
while ($val =~ /$packID - $packDESC/ig)
{
    $cnt++;
}
}

#if ($packDESC =~ /\(/g) {
#       $packDESC =~ s/\(/\(/g;
#} 
print "Total iterations of $packDESC: $cnt\n";

close (HNDL);
# End original code

    } # Close IF
} # Close WHILE

close CSV; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:38:57.160

```
#!/usr/bin/perl

use strict;
use warnings;
use Text::CSV;

# Variables already declared in the other PL file ** Remove if consolidating **

my $file2 = 'master_plist.csv';
my $csv2 = Text::CSV->new(); # Create a Text::CSV object

open (CSV2, "<", $file2) or die "I die while opening $file2!  $!"; #open CSV file for parsing

while ($each_csv2_line=<CSV2>) {

    if ($csv2->parse($each_csv2_line)) {
            my @columns2 = $csv2->fields(); # Parse CSV and load into an array for each row.
            my $packID = $columns2[0];
            my $packDESC = $columns2[1];

            my $val = 'customer_packages_report.txt';

            chomp ($val);

            my $cnt=0;

            open (HNDL,"<","$val") or die "wrong filename: $val! $!";

            while (<HNDL>){
                $cnt++ while (/$packID - $packDESC/ig);
            }

#if ($packDESC =~ /\(/g) {
#       $packDESC =~ s/\(/\(/g;
#} 
            print "Total iterations of $packDESC: $cnt\n";

            close (HNDL);
            # End original code

    } # Close IF
} # Close WHILE

# end of script
close CSV; 
```

我的建议：

*   `$HNDL instead of HNDL`更好地为文件句柄使用<- 词法变量。
*   尝试捕捉所有错误（通过`defined`and`==0`和`eq ""`）
*   我尝试格式化您的代码并添加一些我有时使用的功能。比我更好，首先阅读[Little Perl Monk 的 Style Coding](http://perldoc.perl.org/perlstyle.html)。而且您可以使用这种语言更令人印象深刻，并且不仅可以编写`writeonly`代码。

示例（以及引用）：

“对于行输入操作符，情况完全相同`<>`，尽管 Perl 会自动为您执行此操作。
看起来您正在测试来自 STDIN 的行，而此时：

```
 while (<STDIN>) {
       do_something($_);
    } 
```

然而，这是 Perl 自动转换以检查定义性的一种特殊情况`$_`：

```
 while ( defined( $_ = <STDIN> ) ) {  # implicitly done
       do_something($_);
     } 
```

" 有效的 Perl 编程，第 24 页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T14:49:59.553

你可以做很多事情来改进你的代码：

1.  `use warnings;`.
2.  使用适当的缩进。
3.  使用描述性变量名称。而不是`$file2`（没有意义，为什么没有文件1？），使用`$package_file`或任何有意义的东西。
4.  如果您已经在使用`Text::CSV`，您可以使用`$csv->getline()`逐行浏览文件。这将简化您的代码。 [有关示例，请参阅文档](http://search.cpan.org/~makamaka/Text-CSV-1.21/lib/Text/CSV.pm)。
5.  `chomp($val)`从字符串末尾删除换行符。您在刚刚声明的没有换行符的字符串文字上使用它。那没有意义。
6.  **永远不要**使用同一个变量 ( `$val`) 来做两件完全不同的事情。这非常令人困惑。
7.  您在正则表达式中插值的变量可能包含特殊字符吗？如果是这样，您需要逃脱它们。例如，如果`$packDESC`包含句点，它将匹配正则表达式中的任何字符。要按字面意思处理变量的内容，请使用`\Q..\E`，如本例所示：`/\Q$packID - $packDESC\E/ig`.

8.  您正在打开 customer_packages_report.txt 并在 csv 文件的每一行上逐行浏览它。您可以通过*一次*读取并将结果存储在数组中来简化此操作。

9.  您不需要 while 循环来计算匹配项：`$cnt = () = /$packID - $packDESC/ig;`。这会将匹配项放入数组上下文中，返回一个匹配数组，然后将其放回标量上下文中以计算匹配项。有点棘手，但更简单。

如果没有看到数据，很难确切地说出是什么导致了您的问题。您可能有一些不必要的重复，这些重复源于您对两个文件的嵌套循环？我将首先重写以改进您的代码，然后查看问题是否仍然存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T14:49:24.250

您的代码似乎编译时`perl -c`没有错误，这很好。如果我猜测，我会假设您的问题在于您的某些字段中有元字符。正则表达式`/$packID - $packDESC/`容易受到元字符的影响。例如

```
my $str = "foo? bar";
$str =~ /$str/;       # returns false, because ? is a meta character 
```

在上面的例子中，问号`?`是一个量词，它影响它之前的任何东西，所以它的`o?`意思是“0 或 1 o”。要解决元字符问题，请使用`\Q ... \E`转义：

```
$str =~ /\Q$str/;   # will now match 
```

终止转义序列`\E`是可选的。

* * *

其他一些需要注意的事项：

*   您使用它非常好`use strict`。你也应该永远`use warnings`。不这样做不会消除代码的问题，只会隐藏它们。
*   `Text::CSV`您使用默认设置创建对象。根据您的输入，这可能合适也可能不合适。[文档](http://search.cpan.org/perldoc?Text::CSV)`binary => 1`中推荐设置。
*   使用该`parse()`功能可能不是最好的选择，文档中有很多关于`getline`.
*   正如[loldop](https://stackoverflow.com/users/826614/loldop)在评论中指出的那样，您正在重用`$val`从文件中读取。虽然在技术上*应该*可行，但它正在自找麻烦。

* * *

风格和练习笔记和实用技巧：

*   使用三参数打开和词法文件句柄是一件好事。三参数本质上意味着使用显式打开模式，这使您的脚本使用起来更安全。使用词法文件句柄意味着您的文件句柄将没有全局范围，这是一件好事。
*   这段代码

* * *

```
my @columns2 = $csv2->fields(); 
my $packID = $columns2[0];
my $packDESC = $columns2[1]; 
```

可以这样写

```
my ($packID, $packDESC) = $csv2->fields(); 
```

*   `$val`分配它后，您正在咀嚼。这是多余的，因为`chomp`默认情况下只从字符串末尾删除换行符，而您没有添加任何此类。它不会改变任何东西，但这里不需要。但是，如果您从标准输入或文件中读取某些内容，您可能希望使用`chomp`.
*   `die`在不提及错误的情况下使用`$!`是让自己生气的可靠方法。
*   不要低估使用*适当的缩进*编写代码会变得多么容易。使用具有自动缩进和着色功能的文本编辑器。我可以热烈推荐 vim（如果您使用的是 windows，请使用 gvim）。虽然它有一个学习曲线，但它是一个功能强大的编辑器，通常也已经安装在许多系统上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T15:25:48.233

由于已经有很多人对您的程序本身发表了评论，我将讨论如何成为一名更好的 Perl 程序员，并帮助您以一种有助于消除您的许多问题的方式编写代码。

看看[Perl::Tidy](http://search.cpan.org/~shancock/Perl-Tidy-20121207/lib/Perl/Tidy.pm)并彻底运行你的程序。这将有助于改进您的语法和 Perl，并将帮助您发现许多您遇到的各种问题。

此外，您应该获得一份[Perl Best Practices](http://shop.oreilly.com/product/9780596001735.do)的副本，这是大部分 Perl Tidy 的来源。而且，正如有人已经提到的，[Effective Perl Programming](http://www.pearsonhighered.com/educator/product/Effective-Perl-Programming-Ways-to-Write-Better-More-Idiomatic-Perl-2E/9780321496942.page)是另一本优秀的书。

Perl 最大的问题是很少有人*学习*它。大多数人都陷入了我们不得不自己捡起来的境地。另外，Perl 是一种相当古老且相当粗糙的语言。大多数 Perl 书籍仍然严重依赖 Perl 3.x 的编程方式，而没有提及使用`use strict;`和`use warnings;`.

您将旧的编程实践结合起来，大多数人通过破解旧程序和旧语法来学习 Perl（并且可能是由通过破解甚至更旧的程序来学习 Perl 的人编写的），您就会明白为什么 Perl 享有盛誉作为一种*只写*语言。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T15:45:42.347

您可能想使用`getline`from 方法`Text::CSV`，它可以节省几行代码。

问题可能是因为您正在搜索的字符串中有正则表达式元字符。在正则表达式中转义它们，`\Q...\E`以便按字面意思理解它们。在下面的重写中，我还添加了`\s*`而不是文字空格，以防连字符的任一侧都没有一个空格。

我还将文件句柄更改为词法句柄，其优点是当句柄超出范围时它们将自动关闭。

```
#!/usr/bin/perl

use strict;
use warnings;

use Text::CSV;

my $file2 = 'master_plist.csv';
my $csv2  = Text::CSV->new();

open(my $csv_fh, '<', $file2) or die $!;

while (my $row = $csv2->getline($csv_fh)) {

  my ($packID, $packDESC) = @$row;

  my $val = 'customer_packages_report.txt';
  chomp($val);

  open(my $fh, '<', $val) or die "wrong filename";
  my $cnt = 0;
  while ($val = <$fh>) {
    while ($val =~ /\Q$packID\E\s*-\s*\Q$packDESC\E/ig) {
      $cnt++;
    }
  }

  print "Total iterations of $packDESC: $cnt\n";
} 
```

# javascript - 使用 d3js 显示时间线

> ID：15225980
> 
> 赞同：1
> 
> 时间：2013-03-05T14:12:40.787
> 
> 标签：javascript, datetime, d3.js

我是 d3js 的新手，试图显示一个 X 轴具有时间序列的图形，从 00:00 到 23:59。尝试将 d3js 配置为解析时间，如下所示

```
var parseTime = d3.time.format("%H%M").parse;
var mytime = "2045"; // I expect it to be 8 45 PM
mytime = parseTime(mytime);
alert(JSON.stringify(mytime)); 
```

但警报显示“1900-01-01T15:15:00.000Z”而不是 20:45。我知道有些事情是非常错误的，可能是我的理解本身是错误的。

任何指向 x 系列上的时间序列数据的指针都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-04T21:00:18.007

尝试在您的 x 轴声明中添加 .tickFormat(d3.timeFormat("%H%M")) 。

有关 tickformat 的更一般解释，您可以阅读这篇文章： [https ://bl.ocks.org/mbostock/9764126](https://bl.ocks.org/mbostock/9764126)

# regex - 正则表达式环视问题

> ID：15225983
> 
> 赞同：1
> 
> 时间：2013-03-05T14:12:47.797
> 
> 标签：regex, powershell-2.0

我正在使用 Powershell 2.0。我有像`my_file_name_01012013_111546.xls`. 我试图得到`my_file_name.xls`. 我努力了：

> `.*(?=_.{8}_.{6})`

它返回 my_file_name。但是，当我尝试

> `.*(?=_.{8}_.{6}).{3}`

它返回`my_file_name_01`。

我不知道如何获取扩展名（可以是任何 3 个字符。时间/日期部分将始终为 _ 8 个字符 _ 6 个字符。

我看了很多例子并尝试了很多东西，但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:17:09.333

如果您只想查找名称和扩展名，您可能需要这样的内容：`^(.*)_[0-9]{8}_[0-9]{6}(\..{3})$`

`my_file_name`将在反向引用 1 和`.xls`反向引用 2 中。

如果您想删除其他所有内容并返回答案，您希望将“数字”替换为空：`'my_file_name_01012013_111546.xls' -replace '_[0-9]{8}_[0-9]{6}' ''`。您不能简单地将字符串的两位（名称和扩展名）作为一个匹配项拉出 - 正则表达式模式仅匹配连续的块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:00:56.823

添加时得到的原因`my_filename_01`是因为[前瞻](http://www.regular-expressions.info/lookaround.html)是零宽度。这意味着它们不使用字符串中的字符。

正如您所说，`.*(?=_.{8}_.{6})`匹配`my_file_name`是因为该字符串后面跟着一些匹配的内容`_.{8}_.{6}`，但是一旦找到该匹配项，您就只消耗`my_file_name`了 ，因此添加`.{3}`将消耗接下来的 3 个字符，即`_01`.

至于适合您需求的正则表达式，其他人已经发布了可行的替代方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T14:38:25.270

试试这个（未经测试），但它应该适用于任何 'my_file_name' 长度、任何数字长度和任何类型的扩展名。

```
"my_file_name_01012013_111546.xls" -replace '(?<=[\D_]*)(_[\d_]*)(\..*)','$2' 
```

非正则表达式解决方案：

```
$a = "my_file_name_01012013_111546.xls"

$a.replace( ($a.substring( ($a.LastIndexOf('.') - 16 ) , 16 )),"") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T14:20:50.133

您指定的原始正则表达式返回其后有 14 个字符的最大匹配项（您可以更改为相同的 (?=.{14})）。

一旦你改变了它，它会返回它后面有 14 个字符 + 下 3 个字符的最大匹配。这就是你得到这个结果的原因。

如果您可以使用反向引用，Inductiveload 描述的方法可能会更好。我会使用以下正则表达式：`(.*)[_\d]{16}\.(.*)`否则，我会分两个阶段进行

1.  获取初始部分
2.  获取扩展名

# javascript - 我正在设置全局 cookie，但在后续页面加载时似乎无法访问它们

> ID：15225989
> 
> 赞同：0
> 
> 时间：2013-03-05T14:13:10.260
> 
> 标签：javascript, cookies, path, get, global

所以这几天我一直在寻找这个问题的答案。这是我第一次尝试饼干，所以我希望这对你们来说很容易。我有一个网站询问用户是否要使用该网站的移动版本，并将他们的响应存储在 cookie 中，以便下次访问时，他们会自动转到首选版本。然而，在移动网站上，我在桌面网站上提供了一个返回“/desktop.html”的链接，该链接将他们的偏好重置为该网站的桌面版本，然后加载他们在移动网站上所在页面的相应桌面版本. 这一切都很好，但我很快发现 cookie 计划不起作用。用户将自动被重定向回移动站点。我发现这是因为“桌面. 我想我一定不能访问我之前设置的“全局”cookie。我发现的所有页面都说使用“;path=/;”设置全局cookie 字符串，但我找到的所有页面似乎都没有告诉我如何在后续页面加载时访问它——或者我只是太菜鸟了，没有意识到我做错了什么。

这是 /desktop.html 中的代码

```
 <body style="background: rgb(165, 183, 156); margin: 0pt;" onload="document.cookie = 'desktop; path=/';alert('Preference saved. To get back to the mobile site, click the mobile icon in the bottom left corner.');window.location.href='index.html';">Desktop Preference Saved</BODY> 
```

这是子目录中所有页面中的代码：

```
 <body style="background: rgb(165, 183, 156); margin: 0pt; " onload="onPageLoad();if(document.cookie.length != 0){if(document.cookie.match('mobile') && isMobile.any()){window.location.href=getMobileURL()}}else if(isMobile.any() && confirm('Go to mobile version of site?\nNote: menu navigation on the regular website does not work on a touch screen.')){window.location.href=getMobileURL();document.cookie = 'mobile; path=/';}else{document.cookie = 'desktop; path=/';if(isMobile.any()){alert('Preference saved. To get to the mobile site, click the mobile icon in the bottom left corner.');}}" onunload="onPageUnload();"> 
```

我认为它们不相关，但如果您需要查看函数 getMobileURL() 和 isMobile.*，请告诉我。

谢谢，罗伯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:06:01.527

当您不设置值时，该 cookie 将被设置为删除，这就是为什么在下一页上没有读取任何内容的原因。设置一个值，它将起作用。

```
document.cookie = 'desktop=true;... 
```

[cookie在 quirksmode 上](http://www.quirksmode.org/js/cookies.html)进行了深入解释。

# r - 如何在 RStudio 中更改 .Rprofile 位置

> ID：15225990
> 
> 赞同：7
> 
> 时间：2013-03-05T14:13:11.720
> 
> 标签：r, environment-variables, rstudio, rprofile

我在 Windows 7 上使用 RStudio 的“全新”版本。R 安装在`C:/Program Files`这意味着默认库存储在这里，并且`.libPaths()`启动时包含的两个位置都在这个文件夹中。

我想使用另一个 R 库（igraph）。由于该`C:\Program Files`文件夹是写保护的，所以我设置了另一个工作区域：`C:\Users\nick\R`并将 igraph 库安装在`C:\Users\nick\R\library`. 我可以手动将此位置添加到`.libPaths()`变量中并毫无问题地使用该库。

但是，我的问题是让 RStudio 在启动时自动将此位置添加到`.libPaths()`变量中。我读到我可以将相关命令添加到我的 .Rprofile 文件中 - 但我找不到任何这样的文件（可能在安装 RStudio 时它们不会自动创建）。然后，我创建了一个名为 .Rprofile 的文件，其中仅包含此命令。这似乎仅在保存 .Rprofile 文件时才有效`C:\Users\nick\Documents`（这是存储在 R_USER 和 HOME 环境变量中的路径）。我想要的是将 .Rprofile 文件存储在`C:\Users\nick\R`.

我已经阅读了 ?Startup 中的所有信息，它讨论了在哪里存储启动时运行的命令。但我就是无法完成这项工作。例如，如果不读取存储在主目录中的文件，似乎无法更改主目录的位置。我似乎没有任何 .Renviron 文件，并且我自己创建这些文件似乎也不起作用。

我真的很感激一个简单的答案，它解释了我如何去改变 .Rprofile 文件的读取位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-29T15:54:40.653

在 Windows 中，您可以通过打开命令行并运行来设置 R_USER 配置文件：

```
SETX R_PROFILE_USER "C:/.../.Rprofile" 
```

其中（显然）路径是您想要的 .Rpofile 的路径。在 R 中，您可以检查它是否有效：

```
Sys.getenv("R_PROFILE_USER") 
```

应该返回您指定的路径。请注意，您可能需要在设置 R_USER 变量之前关闭所有 R 会话。

# android - Android 4.2.2 RSA 禁用

> ID：15225991
> 
> 赞同：3
> 
> 时间：2013-03-05T14:13:14.187
> 
> 标签：android

如何为 android 4.2.2 禁用 RSA 身份验证我尝试了以下方法：

```
1) setprop ro.adb.secure 0
   getprop still return 1.
2) Root phone and retry method 1 
   getprop still return 1.
3) Root phone and manually change ro.adb.secure to 0 in the /default.prop
   getprop still return 1. 
```

有人知道如何禁用此检查：

![在此处输入图像描述](../Images/8f92afe12499e483a0578d7b5e78d1ef.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T14:33:28.087

这就是您尝试的方法不起作用的原因：

1.  ro.* 属性是只读的。一旦设置了只读属性，就永远无法更改或删除它。您的 ROM 可能将其设置在 default.prop 中，这是在初始化期间很早就建议的，因此 setprop 将永远无法更改它。

2.  同（1）。

3.  /default.prop 存在于 ramdisk 上，并且仅在启动时才被建议，因此在 Android 启动并运行时更改它不会对属性产生影响，并且一旦您重新启动 default.prop 将回到它原来的 ramdisk 版本。

更改此属性的唯一方法是使用包含修改过的 default.prop 的修改过的 ramdisk 重建引导分区。在 Android 上解压和重新打包 boot.img有一个很好的 HowTo [HERE 。](http://android-dls.com/wiki/index.php?title=HOWTO%3a_Unpack,_Edit,_and_Re-Pack_Boot_Images)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:59:08.173

如果您有一组固定的机器，您可以将它们的公钥收集到一个文件中并将其添加到您的设备中。

我在[这里](https://stackoverflow.com/a/15747430/33236)为单台机器描述了它，但对于多台机器，您必须重复第一步，然后将文件一次性添加到您的设备。

# groovy - 如何让 groovy 接受 vm arg -Xss

> ID：15225993
> 
> 赞同：0
> 
> 时间：2013-03-05T14:13:21.567
> 
> 标签：groovy, vmargs

我已经将一些小 Java 应用程序移植到 Groovy。Java 应用程序需要使用 VM 开关 -server -Xss15500k 启动，以防止发生堆栈溢出。问题是如何将这些 vm 参数传递给 groovy。我在这里试过这个：

```
SET PATH=%PATH%;%GROOVY_HOME%\bin
groovy -server -Xss15500k MyApp.groovy 
```

这在这里：

```
SET PATH=%PATH%;%GROOVY_HOME%\bin
SET JAVA_OPTS=-server -Xss15500k
groovy MyApp.groovy 
```

它都不起作用，并且我得到一个 OutOfmemoryError 与 Java 对应物不同。任何提示如何完成这项工作表示赞赏:-)。

谢谢，奥利弗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T14:17:21.227

如果你得到一个`OutOfMemoryError`那么你可能想要增加内存和堆栈

```
SET JAVA_OPTS=-server -Xss15500k -Xmx1G 
```

# ruby-on-rails - 在 VPS 上为 Rails 生产设置 postgres

> ID：15225994
> 
> 赞同：1
> 
> 时间：2013-03-05T14:13:29.093
> 
> 标签：ruby-on-rails, postgresql, activerecord

我目前正在 VPS 上设置 Rails 应用程序，到目前为止，该过程进展顺利。rails 连接到我的生产数据库似乎存在问题。

到目前为止我尝试了什么：创建“test”用户和生产数据库“nn_production”：

```
$ sudo -u postgres createuser -D -P test
$ sudo -u postgres createdb -O test nn_production;

\l gives:
     Name      |  Owner   | Encoding |   Collate   |    Ctype    |   Access privileges
---------------+----------+----------+-------------+-------------+-----------------------
 nn_production | test     | UTF8     | en_US.UTF-8 | en_US.UTF-8 | 
```

此外`/etc/postgresql/9.1/main/pg_hba.conf` [来自相关的SO问题](https://stackoverflow.com/questions/9797640/rails-3-2-2-or-3-2-1-postgresql-9-1-3-ubuntu-11-10-connection-error)

我只改变了这一行：

```
local   all             all                                     peer 
```

对此：

```
local   all             all                                     md5 
```

我尝试了以下方法并且有效。

```
$ psql -d nn_production -U test -W 
```

这是我的 database.yml

```
production:
adapter: postgresql
encoding: unicode
database: nn_production
min_messages: ERROR
pool: 5
host: localhost
username: test
password: test 
```

我使用 capistrano，我在 /u/apps/nn/current

现在当我尝试：

```
$ rake RAILS_ENV=production db:schema:load 
```

我知道臭名昭著

```
ActiveRecord::ConnectionNotEstablished 
```

我会非常感谢任何指示。如果缺少一些重要信息，请对我大喊。

编辑：`cat /var/log/postgresql/postgresql-9.2-main.log`

```
2013-03-05 14:32:55 CET LOG:  received fast shutdown request
2013-03-05 14:32:55 CET LOG:  aborting any active transactions
2013-03-05 14:32:55 CET LOG:  autovacuum launcher shutting down
2013-03-05 14:32:55 CET LOG:  shutting down
2013-03-05 14:32:55 CET LOG:  database system is shut down
2013-03-05 14:32:56 CET LOG:  database system was shut down at 2013-03-05 14:32:55 CET
2013-03-05 14:32:56 CET LOG:  autovacuum launcher started
2013-03-05 14:32:56 CET LOG:  database system is ready to accept connections
2013-03-05 14:32:57 CET LOG:  incomplete startup packet 
```

设置：

*   Ubuntu 12.10
*   转速
*   红宝石 1.9.3
*   轨道版本 3.2.12
*   pg 宝石 0.14.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:42:03.010

我觉得自己像个白痴。database.yaml 中的缩进很重要。浪费的总小时数：8。

# sql - 选择单行的多列作为数组的元素

> ID：15225995
> 
> 赞同：2
> 
> 时间：2013-03-05T14:13:31.570
> 
> 标签：sql, oracle

我有一个包含 100 列的表，称为 col_1、col_2、.. col_100 有没有办法将单列的值选择到 100 个元素的数组中？

（甲骨文 10.2）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T15:09:21.417

你可以像这样选择它们：

```
SQL> create type foo as table of number; -- or varray, as you wish.
  2  /

Type created.

SQL> select foo(l.a, l.b, l.c) foo from your_tab l;

FOO
-----------------
FOO(1, 2, 3) 
```

ETC..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:51:02.343

这是一种蛮力方法。可能有一种更优雅的方式，或者至少有一种可以减少打字的方式。该示例使用 5 列而不是 100 列。

```
DECLARE
  -- Change VARCHAR2(10) in the next line to your col_1 .. col_100 type
  TYPE My100Array IS TABLE OF VARCHAR2(10) INDEX BY PLS_INTEGER;
  myVals My100Array;
  indx NUMBER;
BEGIN
   SELECT 'These', 'are', 'the', 'column', 'values'
     INTO myVals(1), myVals(2), myVals(3), myVals(4), myVals(5)
     FROM DUAL;
   FOR INDX IN 1..5 LOOP
    DBMS_OUTPUT.PUT_LINE(indx || ': ' || myVals(indx));
   END LOOP;
END; 
```

这是我运行它时的输出：

```
1: These
2: are
3: the
4: column
5: values 
```

当然，这对于 100 列来说会有点困难，但是一旦你把查询排除在外，你就会得到你想要的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T21:30:44.453

Another example:

```
DECLARE 
   CURSOR c_data IS
   SELECT * FROM scott.emp; -- replace emp table with your_table

   TYPE t_source_tab IS TABLE OF scott.emp%ROWTYPE;
   l_tab    t_source_tab;
 BEGIN
   SELECT * BULK COLLECT INTO l_tab FROM scott.emp;

   -- display values in array --
   FOR i IN l_tab.FIRST ..l_tab.LAST 
   LOOP
      DBMS_OUTPUT.PUT_LINE (l_tab(i).hiredate ||chr(9)||l_tab(i).empno  ||chr(9)||l_tab(i).ename);
   END LOOP;   
 END;
 / 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-27T13:44:03.763

听起来你想取消你的数据..

不幸`UNPIVOT`的是，仅在 11g（不是 10.2）中添加了您可以手动取消透视，但我认为其他解决方案之一会更好。

但是，如果您使用的是 11g 或更高版本，您可以试试这个

```
create table my_table (col1 number,col2 number, col3 number);
Table MY_TABLE created.

insert into my_table values (4,5,6);
1 row inserted.

select * from my_table;
      COL1       COL2       COL3
---------- ---------- ----------
         4          5          6

select val from my_table unpivot ( val for col in ( col1,col2,col3));

       VAL
----------
         4
         5
         6 
```

从那里选择一个单列数组很简单

```
DECLARE 
   CURSOR c_data IS
   select val from my_table unpivot ( val for col in ( col1,col2,col3));

   TYPE t_source_tab IS TABLE OF c_data%ROWTYPE;
   l_tab    t_source_tab;
 BEGIN

    open c_data;
    fetch c_data bulk collect into l_tab;
    close c_data;

   -- display values in array --
   FOR i IN l_tab.FIRST ..l_tab.LAST 
   LOOP
      DBMS_OUTPUT.PUT_LINE (l_tab(i).val);
   END LOOP;   
 END;
 / 
```

# css - Rails and Compass - 为每个视图/控制器创建不同 CSS 的正确方法是什么？

> ID：15225996
> 
> 赞同：0
> 
> 时间：2013-03-05T14:13:35.230
> 
> 标签：css, ruby-on-rails, ruby, compass-sass

我正在使用带有[compass](http://compass-style.org/)的 rails 。

在没有指南针的情况下使用 rails 时，rails 每个控制器都有一个 css，其中包含仅与该控制器中的视图相关的内容。

我无法使用指南针获得相同的行为，这导致每个控制器都有一个大的整体文件而不是单独的文件。

解决该问题的推荐方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:03:06.677

Rails（自 3.1 起）确实为每个控制器创建了一个 css 文件，但它仅用于实际的代码分离，所有代码资产都以每种格式（.css、.js..）编译成一个主文件，这是 90% 的最佳实践时间。

如果您想将此方法用于 SCSS 或 SASS 代码，只需将文件扩展名更改为 .css.scss 或 .css.sass（即：mycontroller.css.scss）

如果您想将每个控制器的编译文件分开（您可能不需要它，所以我建议您在执行此操作之前了解资产管道），您必须自己实现自定义行为。看看这里[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

# java - Tomcat 7.0.2 上的 java.lang.IllegalStateException 但在 WAS7 上工作正常

> ID：15225997
> 
> 赞同：1
> 
> 时间：2013-03-05T14:13:37.450
> 
> 标签：java, jsf-2, tomcat7, websphere-7, illegalstateexception

我有这个应用程序`Websphere Application Server 7.0`，我正在移植到`tomcat 7.0.2`.

我的应用程序中有以下代码行：

```
parameters.remove("MainUserId");
parameters.remove("MainPassword"); 
```

这段代码在 Tomcat 上给了我以下异常

```
java.lang.IllegalStateException: No modifications are allowed to a locked ParameterMap
    at org.apache.catalina.util.ParameterMap.remove(ParameterMap.java:211)
    at com.csc.fs.accel.ui.action.admin.user.UserAccess.updateUser(UserAccess.java:1386)
    at com.csc.fs.accel.ui.action.admin.user.UserAccess.doPost(UserAccess.java:1775)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

基本上这里`parameters`是一个会话参数映射。所以根据java规范参数映射是不可变的。但这适用于 Websphere 应用程序服务器。

[在研究时，我在这里](http://grokbase.com/p/tomcat/users/113ha3smr8/caused-by-java-lang-illegalstateexception-no-modifications-are-allowed-to-a-locked-parametermap)读到一条评论说

> 如果这在 WebSphere 中有效，那么 WebSphere 没有遵循规范。要么是因为错误，要么是因为它已被明确配置为忽略规范的该部分。

有什么选择吗？除了*不从地图中删除元素*

另外，是否有可能在tomcat中有任何可以制作参数映射的配置`mutable`？