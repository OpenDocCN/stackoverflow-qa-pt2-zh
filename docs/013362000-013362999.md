# StackOverflow 问答 13362000-13362999

# ruby - 在 MongoDB 中使用 tweetstream 存储推文失败并出现以下错误

> ID：13362001
> 
> 赞同：2
> 
> 时间：2012-11-13T13:55:47.867
> 
> 标签：ruby, mongodb, tweetstream

我刚刚开始学习 ruby​​ 和 mongodb 的概念。这是我要运行的脚本

```
require 'rubygems'
require 'tweetstream'
require 'mongo'

TweetStream.configure do |config|
  config.consumer_key = '<key>'
  config.consumer_secret = '<secret>'
  config.oauth_token = '<token>'
  config.oauth_token_secret = '<token_secret'
  config.auth_method = :oauth
end

connection = Mongo::Connection.new

db = connection.db("tweetsDB")

tweets = db.collection("tweets")

client = TweetStream::Client.new

client.on_error do |message|
  puts message
end

client.follow(<user_id>,<user_id>) do |status|
        id = tweets.insert(status, :safe => true)
end 
```

注意：我已经删除了本文上面脚本中的所有静态私有值。

Mongo、bson、bson_ext 版本 - 1.7.0

错误信息

```
NoMethodError: undefined method `has_key?' for #<Twitter::Tweet:0x7f21cd14cf08>
    /var/lib/gems/1.8/gems/bson-1.7.0/lib/bson/types/object_id.rb:93:in `create_pk'
    /var/lib/gems/1.8/gems/mongo-1.7.0/lib/mongo/collection.rb:360:in `insert'
    /var/lib/gems/1.8/gems/mongo-1.7.0/lib/mongo/collection.rb:360:in `collect!'
    /var/lib/gems/1.8/gems/mongo-1.7.0/lib/mongo/collection.rb:360:in `insert'
    tracker.rb:28
    /var/lib/gems/1.8/gems/tweetstream-2.3.0/lib/tweetstream/client.rb:525:in `call'
    /var/lib/gems/1.8/gems/tweetstream-2.3.0/lib/tweetstream/client.rb:525:in `invoke_callback'
    /var/lib/gems/1.8/gems/tweetstream-2.3.0/lib/tweetstream/client.rb:533:in `yield_message_to'
    /var/lib/gems/1.8/gems/tweetstream-2.3.0/lib/tweetstream/client.rb:471:in `respond_to'
    /var/lib/gems/1.8/gems/tweetstream-2.3.0/lib/tweetstream/client.rb:411:in `connect'
    /var/lib/gems/1.8/gems/em-twitter-0.2.1/lib/em-twitter/connection.rb:296:in `call'
    /var/lib/gems/1.8/gems/em-twitter-0.2.1/lib/em-twitter/connection.rb:296:in `invoke_callback'
    /var/lib/gems/1.8/gems/em-twitter-0.2.1/lib/em-twitter/connection.rb:143:in `handle_stream'
    /var/lib/gems/1.8/gems/em-twitter-0.2.1/lib/em-twitter/connection.rb:193:in `on_body'
    /var/lib/gems/1.8/gems/em-twitter-0.2.1/lib/em-twitter/connection.rb:192:in `each'
    /var/lib/gems/1.8/gems/em-twitter-0.2.1/lib/em-twitter/connection.rb:192:in `on_body'
    /var/lib/gems/1.8/gems/em-twitter-0.2.1/lib/em-twitter/connection.rb:74:in `<<'
    /var/lib/gems/1.8/gems/em-twitter-0.2.1/lib/em-twitter/connection.rb:74:in `receive_data'
    /var/lib/gems/1.8/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run_machine'
    /var/lib/gems/1.8/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run'
    /var/lib/gems/1.8/gems/tweetstream-2.3.0/lib/tweetstream/client.rb:385:in `start'
    /var/lib/gems/1.8/gems/tweetstream-2.3.0/lib/tweetstream/client.rb:128:in `filter'
    /var/lib/gems/1.8/gems/tweetstream-2.3.0/lib/tweetstream/client.rb:106:in `follow'
    tracker.rb:27 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T13:38:46.470

如果您想盲目地将所有内容转储到 MongoDB 中，那么您可以执行以下操作：

```
client.follow(<user_id>,<user_id>) do |status|
  data = status.to_hash
  id = tweets.insert(data)
end 
```

如果您想更有选择性，那么您可以尝试以下方法：

```
# only add the following fields to the database
ONLY = %w{created_at text geo coordinate id_str}

client.follow(<user_id>,<user_id>) do |status|
  data = status.to_hash.select{|k,v| ONLY.include?(k.to_s)}
  id = tweets.insert(data)
end 
```

或者 ：

```
# add everything except the following fields to the database
EXCEPT = %w{entities}

client.follow(<user_id>,<user_id>) do |status|
  data = status.to_hash.reject{|k,v| EXCEPT.include?(k.to_s)}
  id = tweets.insert(data)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:10:56.420

似乎正在查看仅返回通用 ruby​​ 对象的[文档。](http://rdoc.info/github/intridea/tweetstream/TweetStream/Client#follow-instance_method)`Client.follow`您必须从对象中获取相关字段并将它们提取到 json（或者，更可取的是，一个[mongoid](http://mongoid.org/en/mongoid/index.html)对象）中以发送到数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T20:35:18.527

has_key? is a method available in the Hash superclass. What it's trying to do is make a json string to pass to Mongo. Except that you are passing a string, has_key? is not part of the String class. Just convert it to a hash and you should be good to go.

```
client.follow(<user_id>,<user_id>) do |status|
    id = tweets.insert({:status => status.text}, :safe => true)
end 
```

# c# - jquery.POST 到 MVC 控制器以返回 JSON

> ID：13362005
> 
> 赞同：3
> 
> 时间：2012-11-13T13:55:55.633
> 
> 标签：c#, asp.net-mvc, json, razor

我创建了以下模型

```
public class myModel
{
    public int ID;
    public string Name;
    public int[] days;
} 
```

然后我在控制器中创建了一个动作

```
[HttpPost]
public ActionResult myCtrlAction(myModel thisModel)
{
   if (ModelState.IsValid)
        {
            return Json(thisModel);
        }
        else
        {
            string errorMessage = "<div class=\"validation-summary-errors\">"
              + "The following errors occurred:<ul>";
            foreach (var key in ModelState.Keys)
            {
                var error = ModelState[key].Errors.FirstOrDefault();
                if (error != null)
                {
                    errorMessage += "<li class=\"field-validation-error\">"
                     + error.ErrorMessage + "</li>";
                }
            }
            errorMessage += "</ul>";
            return Json(new myModel { Name = errorMessage });  //just for now
        } 
   } 
```

在我的 javascript 中，我使用 jQuery.post() 作为

```
$("#myBtn").click(function () {
var mydata = {
          ID: $("#inputID").val(),
          Name: $("#inputName").val(),
          Days: $("#selectDays").select2("val")
       }
    var url = 'myController/myCtrlAction';  //definitly it was writtern as @Url.Action
    $.post(url, mydata, function(data) { alert(data); //which shows [object object] 
                     }, 'json');
 }); 
```

现在应要求，当我在 Chrome 中调试时，我在标题中看到了

**表单数据** ID：5 名称：SomeName Days[]：6 Days[]：5

作为回应，我得到了我的模型的 json 格式

***{ID: "0", Name: "null", Days: "null"}***这意味着我的模型状态是有效的，但为什么它没有值？

任何人都有任何想法。我做错了什么或者我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:14:14.200

我认为您的模型数据未设置，因此您在 Chrome 上获得空值。

如果您的 javascript 没有拼写错误（并且您在创建问题时只输入了拼写错误，请在您的方法中尝试此操作`myCtrlAction`；

首先尝试为 myModel 中的字段创建 getter 和 setter。然后;

代替;

```
 errorMessage += "</ul>";

 return Json(new myModel { Name = errorMessage });  //just for now 
```

有了这个;

```
 myModel myMODTest= new myModel();
 myMODTest.setID(1111);
 myMODTest.setName("testName");
 myMODTest.setDays({1,2,3});
 return Json(myMODTest);  //just for now 
```

查看您是否在浏览器上显示以下内容；

`{ID: "1111", Name: "testName", Days: "{1,2,3}"}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:47:03.787

我这样做如下：

*   1：JavaScript：单击按钮时：序列化表单数据并将其发送到控制器：

    ```
    function ajaxSubmitEditSupplierQuote() {
        var formData = $("#SupplierQuoteEditForm").serializeArray();
        $.ajax({
            type: "POST",
            url: '@Url.Action("Edit", "SupplierQuote")',
            data: formData,
            dataType: "json",
            cache: false,
            success: function (data1) {
                // Here I create then a new Url-string.   
                // Simple access your Json Data, as you have named it in the return of the Controller-Action.
                var strUrl = "/Equipment/" + data1.target.toString();                   
                // ...
                // 
                // ...
            }
        });
    } 
    ```

*   2：带有自定义Json返回的Controller-Action

    ```
    [HttpPost]
    public ActionResult Edit(SupplierQuoteDto supplierQuoteDto)
    {

        // ........... code

        if (_userContext.EquipmentAction.ClickedAction == ActionType.Create)
            return Json(new { target = "Create" });
        else if (_userContext.EquipmentAction.ClickedAction == ActionType.Edit)
            return Json(new { target = "Edit" });
        else
            return new EmptyResult();
    } 
    ```

*   3：或者，如果您还想在 JavaScript 中捕获 EmptyResult()，只需在

    ```
    success: function (data1) { 
        if (data1.toString() == "") {
            // .... alert
        }
        else {
            /// .... go on with coding
        }
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T14:03:57.780

检查您发布帖子的 JavaScript 代码。你有一个错字：'。' 代替 '，'：

```
$.post(url, mydata, function(data) { alert(data); }, 'json'); 
```

# ruby-on-rails-3 - Send_File 和 Rails 3.2

> ID：13362007
> 
> 赞同：0
> 
> 时间：2012-11-13T13:55:57.083
> 
> 标签：ruby-on-rails-3, stream

我正在尝试使用 send_file 在浏览器上流式传输 1000 张图片，并模拟视频流式传输。我目前使用瘦运行我的服务器（本地），我的控制器中有这个：

```
send_file 'bg.jpg', :type => 'image/jpg', :disposition => 'inline' 
```

我没有找到任何解释发送文件的教程，我听说我必须使用 ngnix 才能使其工作。有帮助流式传输图片吗？

页面返回“无法读取文件 bg.jpg”，但该文件在 assets/images/ 文件夹中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:50:40.523

尝试

```
send_file 'assets/images/bg.jpg', :type => 'image/jpg', :disposition => 'inline' 
```

由于 send_file 不是资产方法，因此您需要提供它的完整路径。

# vba - 从 VBA (MS-Access) 填写 PDF 表单

> ID：13362014
> 
> 赞同：7
> 
> 时间：2012-11-13T13:56:36.193
> 
> 标签：vba, ms-access, pdf, pdf-form

我想从我的 MS-Access 2003 .mdb 项目中填写一份 PDF 表格。PDF 是使用 Adob​​e LifeCycle Designer ES 8.2 创建的，所有字段都有重要的名称。但是，将运行 PDf 填充功能的用户没有安装 LifeCycle，而只安装了 Adob​​e Reader 9.5（可能很快会迁移到 Adob​​e Reader X，我希望我的代码能够有点面向未来）。

我该如何实施？我在 Web 上看到的大多数线程都重定向到官方 Adob​​e SDK 文档，当您只使用 VBA 时，这完全是一团糟。

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T15:10:29.477

在合并了几行代码后，终于设法使某些东西工作了。这里是。它适用于在我的 VBA 项目中设置为参考的 Adob​​e Acrobat 9.0 类型库。

```
Dim FileNm, gApp, avDoc, pdDoc, jso

FileNm = "c:\form.pdf" 'File location
Set gApp = CreateObject("AcroExch.app")

Set avDoc = CreateObject("AcroExch.AVDoc")
If avDoc.Open(FileNm, "") Then
    Set pdDoc = avDoc.GetPDDoc()
    Set jso = pdDoc.GetJSObject

    jso.getField("topmostSubform[0].Page1[0].fieldName[0]").value = "myValue"
    pdDoc.Save PDSaveIncremental, FileNm 'Save changes to the PDF document
    pdDoc.Close
End If

'Close the PDF; the True parameter prevents the Save As dialog from showing
avDoc.Close (True) 

'Some cleaning
Set gApp = Nothing
Set avDoc = Nothing
Set pdDoc = Nothing
Set jso = Nothing 
```

请注意，这`topmostSubform[0].Page1[0]`是 Adob​​e LiveCycle Designer 为您的主要 PDF 文档提供的默认名称，而`fieldName[0]`是您的字段的名称。如果您有多个具有相同名称的字段，Adobe LiveCycle Designer 会自动添加索引号，以便您可以轻松地循环浏览您的字段。

# asp.net-mvc-3 - 用户登录时带有 HTML5 离线应用程序的 ASP .NET MVC3 错误行为

> ID：13362015
> 
> 赞同：1
> 
> 时间：2012-11-13T13:56:37.703
> 
> 标签：asp.net-mvc-3, razor, html5-appcache

我正在尝试构建一个具有 HTML5 离线可能性的基于 ASP.NET MVC3（使用剃刀语法）的 Web 应用程序，但不幸的是它不能正常工作。

我阅读了很多教程，从中我使用了一些东西。

首先，这是我的 _Layout.cshtml 的相关部分：

```
 <html manifest="@Url.Content("~/offline.appcache")">
    .
    .
    @{
    if(Request.IsAuthenticated)
    {
    @Html.ActionLink("Profile", "Profile", "Accounts", null, new { id = "profile" })
    @Html.ActionLink("Logout", "Logout", "Accounts", null, new { id = "logout" })
    }
    else
    {
    @Html.ActionLink("Register", "Register", "Accounts", null, new { id = "register" })
    @Html.ActionLink("Login", "Login", "Accounts", null, new { id = "login" })
    }
    }
    .
    .
    @RenderBody() 
```

其次，这是我的 CacheManifestHandler 类：

```
 public class CacheManifestHandler : IHttpHandler
    {
    public void ProcessRequest(HttpContext context)
    {
    //don't let the browser/proxies cache the manifest using traditional caching methods.
    context.Response.Cache.SetCacheability(HttpCacheability.NoCache);
    context.Response.Cache.SetNoStore();
    context.Response.Cache.SetExpires(DateTime.MinValue);
    context.Response.ContentType = "text/cache-manifest";
    context.Response.ContentEncoding = Encoding.UTF8;

    context.Response.Write("CACHE MANIFEST" + Environment.NewLine);
    context.Response.Write("CACHE:" + Environment.NewLine);
    context.Response.Write("/Content/Main.css" + Environment.NewLine);
    .
    .
    context.Response.Write("NETWORK:" + Environment.NewLine);
    context.Response.Write("http://*" + Environment.NewLine);
    context.Response.Write("*" + Environment.NewLine);

    context.Response.Write("FALLBACK:" + Environment.NewLine);
    context.Response.Write("/ /Error/PageNotAvailableOffline" + Environment.NewLine);
    }
    } 
```

最后但同样重要的是，我将这些行放在了我的 web.config 文件中：

```
 <handlers>
    <remove name="CacheManifest" />
    <add name="CacheManifest" verb="GET" path="offline.appcache" type="CMSP.Utilities.CacheManifestHandler" />
    </handlers> 
```

离线功能有效，但主要问题是当用户以在线模式登录时，似乎什么也没发生。我必须至少刷新一次页面，然后才能看到用户登录。这很烦人。

是否有任何可能的解决方案，应用程序在在线模式下不使用离线应用程序缓存？

# c++ - 如何使用 MPI_Irecv？

> ID：13362016
> 
> 赞同：5
> 
> 时间：2012-11-13T13:56:44.230
> 
> 标签：c++, openmpi

来自 OpenMPI 文档：C++ 语法

```
Request Comm::Irecv(void* buf, int count, const Datatype&
    datatype, int source, int tag) const 
```

所以我想我会做类似的事情：

```
MPI::Request req;
req = MPI_Irecv(&ballChallenges[i], 2, MPI_INT, i, TAG_AT_BALL, MPI_COMM_WORLD); 
```

但它抱怨：

```
error: too few arguments to function ‘int MPI_Irecv(void*, int, MPI_Datatype, int, int, MPI_Comm, ompi_request_t**)’ 
```

好像我失踪了`ompi_request_t**`，但它没有记录？试过了

```
MPI_Irecv(&ballChallenges[i], 2, MPI_INT, i, TAG_AT_BALL, MPI_COMM_WORLD, &req); 
```

但失败了

```
error: cannot convert ‘MPI::Request*’ to ‘ompi_request_t**’ for argument ‘7’ to ‘int MPI_Irecv(void*, int, MPI_Datatype, int, int, MPI_Comm, ompi_request_t**)’ 
```

那么这`ompi_request_t`部分呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T01:55:24.037

这有效（C）：

```
#include <stdio.h>
#include <string.h>
#include <mpi.h>

int main(int argc, char **argv) {
    int rank;
    const char *msg="Hello!";
    const int len=strlen(msg)+1;
    char  buf[len];

    MPI_Request isreq, irreq;

    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);

    if (rank == 0) {
        MPI_Isend((void*)msg, len, MPI_CHAR, 0, 0, MPI_COMM_WORLD, &isreq);
        MPI_Irecv(buf, len, MPI_CHAR, 0, 0, MPI_COMM_WORLD, &irreq);
        MPI_Cancel(&irreq);
        MPI_Cancel(&isreq);
    }

    MPI_Finalize();
    return 0;
} 
```

*或者*这有效（C++）

```
#include <cstring>
#include <mpi.h>

using namespace MPI;

int main(int argc, char **argv) {
    const char *msg="Hello!";
    const int len=strlen(msg)+1;
    char *buf = new char[len];

    Init(argc, argv);
    int rank = COMM_WORLD.Get_rank();

    if (rank == 0) {
        Request isreq = COMM_WORLD.Isend(msg, len, MPI_CHAR, 0, 0);
        Request irreq = COMM_WORLD.Irecv(buf, len, MPI_CHAR, 0, 0);
        isreq.Cancel();
        irreq.Cancel();
    }

    Finalize();
    return 0;
} 
```

# matlab - 在矩阵中存储小数

> ID：13362018
> 
> 赞同：1
> 
> 时间：2012-11-13T13:56:50.797
> 
> 标签：matlab, matrix

我的矩阵只存储我的值的前 4 个 dp。如果矩阵中的所有值都很小，那么我们可能会看到更多的 dp，因为它会说所有元素都乘以 1.0e-03。但这还不够好，因为有时我的矩阵应该由非常小和更大的数字组成。

基本上，我经常得到 0.0000 的输出，而不是我怀疑可能更像 0.00000001 的输出。有没有办法改变这一点，例如矩阵公差？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T13:59:52.193

尝试执行

```
format longg 
```

并重新检查您的矩阵。这会改变[显示输出格式](http://www.mathworks.nl/help/matlab/ref/format.html)。

# javascript - 使用 AJAX 提交表单时关闭选项卡上的 Safari 弹出窗口

> ID：13362021
> 
> 赞同：3
> 
> 时间：2012-11-13T13:57:15.227
> 
> 标签：javascript, ajax, safari

在 Safari 浏览器中，在带有表单的页面上，当用户尝试关闭浏览器的选项卡并且表单尚未经过验证时，会打开一个系统模式弹出窗口。文本说：*您在“[页面名称]”上输入了文本。如果关闭窗口，您的更改将丢失。还是要关闭窗口？*

当帖子重定向到另一个页面时，此行为是可以的。在我们的网站上，我们有一个使用 Ajax 请求验证表单的页面。由于页面没有重新加载，即使表单已经提交，也会出现弹出窗口，最终用户可能会感到奇怪。

帖子由一个按钮触发：

1.  表单使用[jQuery Validation 插件进行验证](http://docs.jquery.com/Plugins/Validation "jQuery 验证插件")
2.  插件选项包括一个`submitHandler`选项`return false;`
3.  日期通过 发送`$.post`，并有一条消息通知用户成功/失败。

有谁知道如何避免在呼叫返回后触发此弹出窗口？在这种情况下，我们不希望强制重新加载。

请注意，用户可以[更改](https://discussions.apple.com/thread/2501604?start=0&tstart=0)此行为，但不是很容易...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:34:54.360

我无法在 Windows 上的 Safari 中复制它。

也许在提交表单后尝试清空/重置输入字段，前提是提交当然没有任何错误，或者更好的是，完全删除表单，如果之后不需要它。当然使用 DOM 操作，而不是通过重新加载页面。

附带说明一下，在发送后看到填写好的表单（即使您正在显示确认消息）对用户来说也可能很奇怪（除非它是一个多用途表单并且这种行为是预期的）。

更新：在 Mac Safari 上测试，它的行为与您描述的一样，但是如果我删除了我输入的内容（这让浏览器首先提醒我），它就不会出现。因此，简单的字段重置应该可以解决问题。

# filesystems - 你怎么称呼没有扩展名的文件名？

> ID：13362022
> 
> 赞同：13
> 
> 时间：2012-11-13T13:57:17.047
> 
> 标签：filesystems

给定文件名`foo/bar.baz`，我们可以说它`foo/`是**dirname**，`bar.baz`是**basename**，`.baz`是**extname**。但是我们可以使用类似的术语来表示`foo/bar`或`bar`部分——即“文件名无扩展名”吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-03-20T01:03:52.360

多年来，我一直在代码注释中使用“尾数”。对于计算机浮点数，尾数只是没有幂的数字。我认为扩展就像力量一样。

示例：123E56，其中尾数为 123

1.23E56 不是正确的形式，需要调整为 123E54，尾数再次为 123

因此，对于第一部分包含小数点的浮点数，只需调整幂即可将小数点一直向右移动。

一些 HP 计算器上还有一个按键，可以在没有电源的情况下显示带有所有数字的尾数。

所以对于文件名，当我离开扩展名时，剩下的是尾数。并且句点不包含在尾数中，就像它不包含在浮点数中一样（取决于浮点表示的类型。）

foo.bar : 尾数是 foo

类似的逻辑可用于术语尾数的对数数学使用，我认为这也与文件名相似。

我希望这能流行起来，因为我们真的需要为那部分取一个名字。我投票支持“尾数”，因为我已经有数千行带有使用“尾数”注释的代码，而且我不会更改它们。就像任何人无论如何都会阅读我的评论一样。我几乎为每一行代码写了一个注释行。我也创建了一个流程图文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-25T16:25:49.000

**基本名称**

[维基百科/文件名](http://en.wikipedia.org/wiki/Filename) [ruby​​/文件#basename](http://www.ruby-doc.org/core-2.0.0/File.html#method-c-basename)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-23T17:23:15.723

很好的问题，老实说，根据我的经验和谷歌搜索，这有点主观。

我想看看现有语言如何处理这个问题，原因有两个：

1.  因为真正聪明的人会花时间辩论和构建这些语言。

2.  最终，我们需要使用这些语言来完成任何事情，以便我们越接近他们所做的事情并命名事物，就越容易。

所以我会看两个，因为它们现在对我来说非常方便：

### Javascript

```
path.parse( "foo/bar.baz" )
//=> { root: '', dir: 'foo', base: 'bar.baz', ext: '.baz', name: 'bar' } 
```

**Javascript 调用不带扩展名的文件名`name`.**

### 红宝石

```
File.basename("foo/bar.baz")
#=> "bar.baz"
File.basename("foo/bar.baz", ".baz")
#=> "bar" 
```

**Ruby 没有没有扩展名的文件名。**

因此，这里似乎没有正确的标准答案。我会尝试遵循您使用的语言所做的事情和/或坚持对您和您的团队有意义的事情，最重要的**是，保持一致**。

# php - WordPress 分页 - 添加锚链接

> ID：13362026
> 
> 赞同：1
> 
> 时间：2012-11-13T13:57:31.947
> 
> 标签：php, html, wordpress, pagination, anchor

我的 index.php 中有这个锚链接：

```
<a name="blog"></a> 
```

我希望此锚链接在单击 next_posts_link 和 previous_posts_link 时起作用，因此它不会一直到达页面顶部。不过，我不知道如何为 WordPress 分页执行此操作。

这是我的分页代码：

```
<div class="pagenavi">
<?php if( function_exists( 'wp_pagenavi ' ) ) {
wp_pagenavi();
} else {
next_posts_link ('<div class="arrow-back"></div>'); }
previous_posts_link('<div class="arrow-forward"></div>') ; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:49:59.033

解决方案2：

使用 jQuery 将锚标签 #blog 添加到博客文章中的 prev/next 链接

```
<script type="text/javascript">
$(document).ready(function() {
    $('.pagenavi a').each(function(i,a){$(a).attr('href',$(a).attr('href')+'#blog')});
});
</script> 
```

演示：http: [//jsfiddle.net/mfeldheim/EkMfP/12/](http://jsfiddle.net/mfeldheim/EkMfP/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:33:24.247

不幸的是 wp_pagenavi 函数似乎封装了完整的链接构建。

如果您无法在 wordpress 或插件配置中配置通用后缀，我不建议您更改 Wordpress 代码。

相反，您可以执行一个小的 JavaScript，它将浏览器页面移动到加载时的锚点。

此示例使用 jQuery。将其粘贴到模板的底部位置。

```
<script type="text/javascript">
    $(document).ready(function() {
        $('html, body').scrollTop( 
            $('[name="blog"]').offset().top 
        );
    });
</script> 
```

无法对此进行测试，但应该可以。即使是简单的脚本也很难在 iPhone 键盘上编写。

编辑：像魅力一样工作，查看演示 [http://jsfiddle.net/mfeldheim/EkMfP/7/](http://jsfiddle.net/mfeldheim/EkMfP/7/)

# javascript - 使用 Tampermonkey 向 Chrome 添加使用用户脚本的自定义键盘快捷键

> ID：13362028
> 
> 赞同：11
> 
> 时间：2012-11-13T13:57:39.157
> 
> 标签：javascript, google-chrome, keyboard-shortcuts, userscripts, tampermonkey

我想为某个网页添加一些自定义键盘快捷键。

使用从这个问题中接受的答案作为指导：[如何将 JavaScript 键盘快捷键添加到现有的 JavaScript 函数？](https://stackoverflow.com/questions/2511388/how-can-i-add-a-javascript-keyboard-shortcut-to-an-existing-javascript-function)

我做了自己的小函数并添加了一个监听器：

```
// ==UserScript==
// @name       ChartGame
// @namespace  http://www.chartgame.com/
// @version    0.1
// @description  enter something useful
// @match      http://www.chartgame.com/play*
// @copyright  2012+, You
// ==/UserScript==
function doc_keyUp(e) {
  switch(e.keyCode)
  {
  case 49: //1
    mon_clk(3);
    break;
  case 50:
    mon_clk(6);
    break;
  case 83: //s
    BuySell(0);
    break;
  case 68: //d
    BuySell(1);
    break;
  case 70: //f
    TimelapseDwn();
    TimelapseUp();
    break;
   default:
     break;
  }
}
document.addEventListener('keyup', doc_keyUp, false); 
```

如果我在适当的网页上将其输入到 Chrome javascript 控制台，则此代码运行得非常好。我可以按照我的意愿使用键盘快捷键。唯一的问题是，如果我进入下一个游戏（即图表..），我必须重新输入包括侦听器在内的 javascript 代码。

我的印象是 Tampermonkey 允许我在特定页面上自动运行该脚本，这些页面与 .on 表达式匹配`@match`。代码确实可以运行，但没有键盘快捷键功能。

从 Chrome 控制台和 Tampermonkey 等扩展程序运行 javascript 代码缺少什么或有什么不同？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T22:06:41.163

该代码在用户脚本中不起作用，因为它正在调用目标页面定义的 javascript 函数。用户脚本在各种沙箱中运行，因此无法轻易看到目标页面的 JS。

Tampermonkey（和 Greasemonkey）通过[`unsafeWindow`](http://wiki.greasespot.net/UnsafeWindow). （普通的 Chrome 用户脚本不支持`unsafeWindow`任何有用的方式。）

因此，要使用这些函数，请像这样为它们添加前缀：

```
// ==UserScript==
// @name       ChartGame
// @namespace  http://www.chartgame.com/
// @version    0.1
// @description  enter something useful
// @match      http://www.chartgame.com/play*
// @copyright  2012+, You
// ==/UserScript==
function doc_keyUp(e) {
    switch (e.keyCode) {
        case 49:
            //1
            unsafeWindow.mon_clk(3);
            break;
        case 50:
            unsafeWindow.mon_clk(6);
            break;
        case 83:
            //s
            unsafeWindow.BuySell(0);
            break;
        case 68:
            //d
            unsafeWindow.BuySell(1);
            break;
        case 70:
            //f
            unsafeWindow.TimelapseDwn();
            unsafeWindow.TimelapseUp();
            break;
        default:
            break;
    }
}
document.addEventListener('keyup', doc_keyUp, false); 
```

* * *

* * *

另一种方法，一种适用于普通 Chrome 用户脚本的方法，是[*Inject* your code](https://stackoverflow.com/q/2303147/331508)。但是由于您使用的是 Tampermonkey，因此只需`unsafeWindow`在这种情况下使用该方法。

# core-data - 如何在 Core Data 中进行左连接？

> ID：13362031
> 
> 赞同：1
> 
> 时间：2012-11-13T13:57:39.780
> 
> 标签：core-data, nspredicate

在我的 iOS 消息应用程序中，我想显示用户与其对话者的最新消息列表。换句话说，这个视图是所有聊天的概览。

我找到了我在 sqlite 文件上尝试过的 SQL 查询[的答案：](https://stackoverflow.com/questions/1313120/retrieving-the-last-record-in-each-group)

```
SELECT m1.* FROM ZMMESSAGE m1 LEFT JOIN ZMMESSAGE m2 
ON (m1.ZINTERLOCUTORUSERNAME = m2.ZINTERLOCUTORUSERNAME AND m1.ZSENTAT < m2.ZSENTAT) 
WHERE m2.ZSENTAT IS NULL; 
```

查询给了我预期的记录，但我怎样才能做出同样的 NSFetctRequest 呢？

我的实体如下：

![在此处输入图像描述](../Images/ec11a8ca736b7f3cdfec5fa6a856b8d2.png)

# css - 使用类选择器覆盖 h4 的规则

> ID：13362033
> 
> 赞同：0
> 
> 时间：2012-11-13T13:57:49.140
> 
> 标签：css

我有以下html：

```
<div class="main">
  <div class="container">
      <h4 class="test"> Test </h4>
  </div>
</div>​ 
```

以及以下 CSS：

```
.main .container h4 {
 color: red;   

}
.test {
 color: blue;   
} 
```

为什么类 .test 不会覆盖颜色规则？我怎样才能做到这一点？

谢谢

​</p>

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T14:00:05.060

这是一个[***特异性***](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)问题。

特异性是某个选择器的重要性。在这种情况下，您的第一个声明使用两个类和一个元素。这意味着只有内联样式、#id 或具有更多类的东西才能覆盖它。

如果你想影响班级`test`，我们可以使用`.main .container .test`，这是3个班级，现在将重写它！

如果两件事具有相同的特异性，例如，如果您`.main .container h4`再次使用，则文档中最后一个将优先。

无论您的特殊性或它在文档中的位置如何，都有一种方法可以覆盖，那就是通过添加`!important`某种样式，例如`.test { color: blue !important; }`. 如果您可以使用上述内容，则不建议这样做，因为这可能会导致将来出现问题。

规范可以在[这里找到](http://www.w3.org/TR/CSS2/cascade.html#specificity)

> 选择器的特异性计算如下：
> 
> *   计数 1 如果声明来自是“样式”属性而不是带有选择器的规则，否则为 0 (= a) （在 HTML 中，元素的“样式”属性的值是样式表规则。这些规则没有选择器，所以 a=1、b=0、c=0 和 d=0。）
> *   统计选择器中 ID 属性的数量（= b）
> *   计算选择器中其他属性和伪类的数量（= c）
> *   计算选择器中元素名称和伪元素的数量（= d）
> *   特异性仅基于选择器的形式。特别是，“[id=p33]”形式的选择器被视为属性选择器（a=0，b=0，c=1，d=0），即使 id 属性被定义为“ID " 在源文档的 DTD 中。
> 
> 连接四个数字 abcd（在具有大基数的数字系统中）给出了特异性。

# string - gzip: compression of duplicates strings

> ID：13362035
> 
> 赞同：-1
> 
> 时间：2012-11-13T13:57:51.790
> 
> 标签：string, compression, gzip

My server is sending a lot of duplicate strings, packed with gzip. Can I get that all the duplicates will be compressed to one instance?

Thank in advice!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:04:23.070

Sure. Just write some code on the server to do it.

You need to use some semi-permanent storage on the server to map duplicates. APC would probably do the job. Do something like this:

Generate a hash of your strings and then use that as the storage key, if the entry already exists, then there's your duplicate. So you can simply increase the entry count and then send that count along with a copy of the string.

If indeed this is the question you are asking in the first place...

# ruby - 如何使用 JRuby 从爆炸的 jar 中运行 logstash

> ID：13362043
> 
> 赞同：1
> 
> 时间：2012-11-13T13:58:28.560
> 
> 标签：ruby, ubuntu, jruby, logstash

我对环境不是很满意`jruby`，`rvm`所以我很难用它来运行logstash（据说这是最快的方法）。

我试过的：

*   我安装了`rvm`环境（作为旁注，标准安装脚本会创建一个新`.bash_profile`的 .bashrc 脚本，当你在 Ubuntu 上时它会禁用标准的 .bashrc 脚本。这会让像我这样的新用户感到困惑......我想了几个小时为什么我的 ' '别名不起作用！）
*   `jar xvf /logstash-1.1.4-monolithic.jar`我在新目录中解压缩了logstash（ ）
*   我已按照[https://rvm.io/rvm/install/](https://rvm.io/rvm/install/)中的说明进行操作`rvm install 1.9.2`（尽管我也进行了一些尝试/错误/重做操作，所以我不记得命令的确切列表）

然后我尝试了几个命令，但没有一个起作用：

```
$ ruby logstash.rb
/home/orabig/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such     file -- logstash/agent (LoadError)
    from /home/orabig/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from logstash.rb:1:in `<main>' 
```

而以下行在几秒钟后返回：

```
jruby-1.7.0 logstash.rb agent -f ../etc/inout.config -v 
```

（使用 java 命令行调用时 inout.config 文件正在工作，如:)

```
java -jar (...)/logstash-1.1.4-monolithic.jar agent -f ../etc/inout.config -v 
```

所以我现在基本上卡住了，因为我越会尝试随机的东西，我就越害怕把我的配置搞砸......

**更新：**在logstash页面（https://github.com/logstash/logstash）上，看起来它正在使用1.6.8 ruby​​版本（但是不清楚，我不确定它是否有任何区别.. .) 所以我也试过：

```
 $ rvm install 1.6.8
  (...)
  $ rvm use 1.6.8
  $ export JRUBY_OPTS=--1.9
  $ ruby logstash.rb agent -f ../etc/inout.config -v
  $ jruby-1.6.8 logstash.rb agent -f ../etc/inout.config -v 
```

但是当我运行最后两行中的任何一个时都没有发生任何事情......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:31:58.703

rvm 工具会告诉您：您必须在登录 shell 中才能使用 rvm。

因此，运行`bash -login`或使用 rvm 来选择并运行您的 ruby​​ 版本，如下所示：

```
rvm install 1.7.0 # note that 1.7.0 will also work
export JRUBY_OPTS=--1.9
rvm 1.7.0 do bundle install
rvm 1.7.0 do ruby lib/logstash/runner.rb agent -f ../etc/inout.config -v 
```

这将告诉`rvm`您使用 jruby-1.7.0 来运行您的 logstash 代理。

# javascript - 使用内联 javascript 更改单选按钮的值

> ID：13362050
> 
> 赞同：0
> 
> 时间：2012-11-13T13:59:07.853
> 
> 标签：javascript, html, dynamic

我有一个带有两个单选按钮的表单。一个按钮标识为“trigger_unit”，另一个按钮标识为“normal_unit”。还有一个包含四个值和一个默认 NULL 值的选择下拉列表。

```
<select rel="dropdown" name="trigger_id" id="trigger_id" 
onchange="((this.value != '') ? document.getElementById('trigger_unit').checked=true : 
document.getElementById('normal_unit').checked=true;)" style="width: 120px;">
<option value="" selected="selected">--none--</option>
<option value="1">Critical</option>
<option value="2">Draw</option>
<option value="4">Heal</option>
<option value="3">Stand</option>
</select> 
```

应该发生的是，如果下拉列表中有非空白值，则 javascript 应该更改单选按钮的值。我尝试按照[此处](https://stackoverflow.com/questions/10270351/how-to-write-a-inline-if-statement-in-javascript)的内联 IF 示例进行操作，但它并不完全有效。可以这样做还是我必须编写第二个函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:10:26.423

有一小段 javascript 可用于您的 onchange 处理程序：

```
document.getElementById(this.value != '' ? 'trigger_unit' : 'normal_unit').checked=true; 
```

IE

```
<select rel="dropdown" name="trigger_id" id="trigger_id" 
    onchange="document.getElementById(
            this.value != '' ? 'trigger_unit' : 'normal_unit'
        ).checked=true;" 
        style="width: 120px;">
    <option value="" selected="selected">--none--</option>
    <option value="1">Critical</option>
    <option value="2">Draw</option>
    <option value="4">Heal</option>
    <option value="3">Stand</option>
</select> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T14:07:33.787

看起来`;`您的代码中有错误...

这个小提琴有效：http: [//jsfiddle.net/bxLfu/](http://jsfiddle.net/bxLfu/)

代码与您的相同，但没有`;`：

```
<select rel="dropdown" name="trigger_id" id="trigger_id" 
onchange="((this.value != '') ? document.getElementById('trigger_unit').checked=true : 
document.getElementById('normal_unit').checked=true)" style="width: 120px;">
<option value="" selected="selected">--none--</option>
<option value="1">Critical</option>
<option value="2">Draw</option>
<option value="4">Heal</option>
<option value="3">Stand</option>
</select> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T14:07:49.753

在上面的三元条件中，关闭 braxket 之前的结束分号会给出语法错误：

```
((this.value != '') ? document.getElementById('trigger_unit').checked=true : 
document.getElementById('normal_unit').checked=true;) 
```

将其更改为：

```
(this.value != '') ? document.getElementById('trigger_unit').checked=true : 
document.getElementById('normal_unit').checked=true; 
```

看看[小提琴](http://jsfiddle.net/gLXXK/)

# gcc - GCC - 为调试符号中的#includes 生成绝对路径

> ID：13362060
> 
> 赞同：1
> 
> 时间：2012-11-13T13:59:40.087
> 
> 标签：gcc, gdb, debug-symbols

操作系统是 Windows，GCC 是 4.7.2，GDB 是 7.3。

我在 C:/project/src/ 文件夹中有一个 .c 文件，其中包含：

```
#include "../inc/header.h" 
```

编译后我在调试符号中有一个相对路径：

```
> objdump -WL obj.o | grep header.h
C:/project/src/../inc/header.h
... 
```

但是我希望它是 C:/project/inc/header.h，因为如果我在发出 set breakpoint 命令时使用绝对路径，在 gdb 中设置 BP 对我来说会失败。

这种情况是人为的，但由于环境条件，我的问题的唯一解决方案是在调试符号中生成绝对路径或教 GDB 解析相对路径。

GCC 是否有一个开关可以在调试符号中打开绝对路径生成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:54:16.770

解决方案在 GDB 中，而不是在 GCC 中。

最简单的方法是将包含标题的目录添加到搜索路径：

```
(gdb) directory /path/to/include/ 
```

您可能需要一个更复杂的路径名替换规则：

```
(gdb) set substitute-path ../inc /path/to/inc 
```

# c# - x64 系统上可以为空的双精度和十进制更新是原子的吗？

> ID：13362069
> 
> 赞同：1
> 
> 时间：2012-11-13T14:00:11.777
> 
> 标签：c#, atomic

在大多数情况下`double`，`decimal`64 位系统上的类型更新是原子操作，因为这些类型是 64 位的。（十进制是128位所以这是错误的，感谢评论）

但是当我在 64 位系统上更新`double?`和输入时，它会是原子的吗？`decimal?`大小是多少`double?`和`decimal?`

我知道原子性不能保证，但我仍然感兴趣，如果这样的更新在一般情况下是原子的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T14:01:53.613

> 在大多数情况下，64 位系统上的 double 和 decimal 类型更新是原子操作，因为这些类型是 64 位的。

不，`decimal`从 128 位开始。另请注意，在 64 位*计算机*上运行并不一定意味着您正在运行 64 位 CLR。目前尚不清楚您在这里所说的“系统”是什么意思。

所以你甚至不应该假设`decimal`. 即使在 64 位 CLR 上，我也不想依赖 的原子性`double`，部分原因是它依赖于对齐。C# 规范明确指出（C# 4 规范的第 5.5 节）：

> 其他类型的读取和写入，包括 long、ulong、double 和 decimal，以及用户定义的类型，不保证是原子的。

所以这使得可以为空的一面有点毫无意义，但是......

> 但是当我更新双重？和十进制？在 64 位系统上输入会是原子的吗？双倍的尺寸是多少？和十进制？

`Nullable<T>`基本上是一个`T`字段和一个`bool`字段。所以存储空间将超过 64 位`double`，超过 128 位`decimal`。确切的存储很可能取决于上下文，但基本上我*不*希望这些类型的操作具有原子性。

正如其他人所说，您几乎肯定不想依赖任何没有保证的东西。就个人而言，我几乎总是尽量避免一般的无锁编码。尝试使用由 CLR/BCL 团队提供并被证明是安全的更高级别的抽象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T14:02:15.027

> 我了解不能保证原子性

就是这样。不能保证。

> 如果这样的更新在一般情况下是原子的，我仍然感兴趣。

不能保证。

就像[马克说](https://stackoverflow.com/questions/13362069/is-nullable-double-and-decimal-update-atomic-on-x64-system/13362098#comment18241063_13362069)的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T14:10:07.533

C# 规范允许将一个 64 位变量写为两个 32 位变量。

> C# 语言保留将写入 long 等同于写入两个 int 的权利，一个接一个，在实践中，一些芯片确实以这种方式实现它

[在此处](https://stackoverflow.com/a/4628660/1252687)查看 Eric Lippert 的更多信息

# sql - 使用 ASP 选择（计数？总和？）

> ID：13362071
> 
> 赞同：-1
> 
> 时间：2012-11-13T14:00:17.697
> 
> 标签：sql, asp-classic

我正在构建一个报告，输出应该是这样的（示例）：

```
['11/2012', 5, 2, 0]
['10/2012', 7, 1, 0]
['09/2012', 2, 3, 0]
['08/2012', 0, 0, 1]
['07/2012', 0, 2, 1]
['06/2012', 2, 1, 0]
['05/2012', 3, 1, 1]
['04/2012', 2, 2, 1]
['03/2012', 5, 0, 0]
['02/2012', 7, 1, 0]
['01/2012', 2, 0, 0]
['12/2011', 3, 0, 1] 
```

对于月份部分，我需要获取实际月份，然后列出一年前。我已经用这段代码做到了这一点：

```
<%
    DataAtual_PeriodoInicial= Now
    DataFinal_PeriodoInicial= DateAdd("m", -13, Now)
    DO WHILE Datediff("m", DataAtual_PeriodoInicial, DataFinal_PeriodoInicial) <> 0
%>
    ['<% Response.Write(Right("0" & Month(DataAtual_PeriodoInicial), 2)) %>/<% Response.Write(Year(DataAtual_PeriodoInicial)) %>', X, Y, Z]<br>
<%
    DataAtual_PeriodoInicial= DateAdd("m", -1, DataAtual_PeriodoInicial)
    LOOP
%> 
```

所以这正在生成：

```
['11/2012', X, Y, Z]
['10/2012', X, Y, Z]
['09/2012', X, Y, Z]
['08/2012', X, Y, Z]
['07/2012', X, Y, Z]
['06/2012', X, Y, Z]
['05/2012', X, Y, Z]
['04/2012', X, Y, Z]
['03/2012', X, Y, Z]
['02/2012', X, Y, Z]
['01/2012', X, Y, Z]
['12/2011', X, Y, Z] 
```

现在我必须抛出一些数字而不是 X、Y 和 Z。我有一个包含如下数据的表格：

```
11  2012    X
10  2012    X
10  2012    X
10  2012    X
10  2012    Y
10  2012    Y
10  2012    Z
10  2012    Z
10  2012    Z
9   2012    X
9   2012    X
9   2012    X
9   2012    Y
9   2012    Z
9   2012    Z
8   2012    X
8   2012    X
8   2012    Y
8   2012    Y
8   2012    Y
8   2012    Y
8   2012    Y
... 
```

我从这个选择开始：

```
SELECT
    datepart(month,SentDate) AS Mes,
    datepart(year,SentDate) AS Ano,
    EventType
FROM
    SomeTable
ORDER BY
    SentDate DESC 
```

我尝试了一些分组，但没有成功。我需要某种计数吗？和？我怎样才能完成这个问题顶部的输出？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:06:50.567

试试这个

```
SELECT
    datepart(month,SentDate) AS Mes,
    datepart(year,SentDate) AS Ano,
    sum(CASE WHEN EventType = 'X' THEN 1 ELSE 0 END ) X,
    sum(CASE WHEN EventType = 'Y' THEN 1 ELSE 0 END ) Y,
    sum(CASE WHEN EventType = 'Z' THEN 1 ELSE 0 END ) Z
FROM
    SomeTable
GROUP BY
    datepart(month,SentDate),
    datepart(year,SentDate)
ORDER BY
    Ano DESC,
    Mes DESC
    SentDate DESC 
```

演示在[http://sqlfiddle.com/#!3/93a11/23/0](http://sqlfiddle.com/#!3/93a11/23/0)

* * *

您还可以使用 PIVOT 表

```
SELECT * FROM
  (
  SELECT 
    datepart(month,SentDate) AS Mes,
    datepart(year,SentDate) AS Ano,
    EventType
  FROM 
    SomeTable
 ) grouped
PIVOT (COUNT(eventType) for EventType in ([X],[Y],[Z])) AS pivoted
ORDER BY
  Ano DESC,
  Mes DESC 
```

演示在[http://sqlfiddle.com/#!3/93a11/16/0](http://sqlfiddle.com/#!3/93a11/16/0)

# java - Java Android WebView显示字符串

> ID：13362073
> 
> 赞同：-1
> 
> 时间：2012-11-13T14:00:46.200
> 
> 标签：java, android, string, webview, rendering

我有一个从网站获取 html 的应用程序，恰好在只允许您登录用户的网页中，所以我设置了登录 cookie，然后我将 html 网页恢复为字符串，我试图轻松地从模拟器中删除这个字符串，但我不能复制粘贴 trought emulator-pc，有人知道我如何加载 webview 来重新渲染我的字符串并让我查看我是否已登录并且所有工作是否正常？如果可能的话，我想直接呈现字符串，而不是将其保存到 html 文件并打开它......这可能吗？谢谢，马特奥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:10:54.393

设置 webview 内容表单字符串：

```
public static void loadHtmlToWebView(WebView view, String html) { 
    view.loadData(Base64.encodeToString(html.getBytes(), Base64.DEFAULT) , "text/html", "base64");
} 
```

# sql - plsql/sql 是否可以限制从连接返回的行，或者在每行的基础上进行某种子查询？

> ID：13362076
> 
> 赞同：1
> 
> 时间：2012-11-13T14:00:55.527
> 
> 标签：sql, plsql

我正在做一个查询，查找在两个日期之间出生的所有猫。每只猫都有一个名字或多个名字。

初始查询类似于

`SELECT Id, Color FROM Cat WHERE Cat.BirthDate > dat_min AND Cat.BirthDate < dat_max;`

我还有一个名为的表`CatName`，对于每个 Cat Id，它都有一个或多个名字，这只猫是由它的不同主人起的。我只想返回与`CatName`表中 Id 匹配的名字，作为查询的一部分。所以像：

`SELECT Id, Color, Name FROM Cat JOIN CatName on .....`

对于有 5 个名字的猫，将返回 5 行。我只想要一排，第一排。如果我只检索一只猫的数据，那么我只会使用 ROWNUM 将其限制为 1 个查询，但我试图获取所有猫的列表，包括它们的名字，所以我不能这样做。

任何人都可以提供一些指导吗？我想它不必是特定于 plsql 的，该技术将与我想象的相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:25:56.883

有几种方法。

1.  您可以使用内联查询：

    ```
    SELECT id, color, 
           (SELECT name FROM CatName cn WHERE cn.id = c.id AND ROWNUM = 1) Name
      FROM cat c
     WHERE ... 
    ```

2.  您可以使用连接然后分析：

    ```
    SELECT id, color, Name
      FROM (SELECT Id, Color, Name,
                   row_number() OVER (PARTITION BY id ORDER BY 1) rn
              FROM Cat JOIN CatName on .....)
     WHERE rn = 1 
    ```

3.  您可以使用聚合：

    ```
    SELECT id, color, MAX(name) name
      FROM Cat JOIN CatName on .....
     GROUP BY id, color 
    ```

从性能的角度来看，假设`CatName`由 索引`CatId`：

*   如果返回的猫数量很少，或者您只想要许多猫中的前几只猫，那么解决方案 1 可以非常快，
*   如果返回的数据集很大并且您想要所有猫，那么解决方案 2 和 3 可以很好地利用高效的 HASH JOIN。

# mysql - 按敏感大写字母排序

> ID：13362077
> 
> 赞同：0
> 
> 时间：2012-11-13T14:01:02.890
> 
> 标签：mysql

我的表中有一些条目：

```
id txt
1 phone
2 phone
3 phone
4 Phone
5 Phone
6 PHONE
7 phone
8 aaa
9 ZZZ
10 ééé 
```

我有这个要求

```
select * from table order upper(txt) collate utf8_bin 
```

8 aaa 10 ééé 1 电话 2 电话 3 电话 4 电话 5 电话 6 电话 7 电话 9 ZZZ

我需要做另一个订单，其中条目 (1,2,3,4,5,6,7) 是一个敏感案例，前面有大写字母

我想要这个结果：

```
8 aaa
10 ééé
6 PHONE ===> CAPITAL
4 Phone ===> Capital
5 Phone ===> Capital
1 phone
2 phone
3 phone
7 phone
9 ZZZ 
```

而且我需要使用 collat​​e collat​​e utf8_bin

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:15:44.633

将此用作您的 ORDER BY 子句。这将首先排序所有 txt 不区分大小写，以按顺序获取所有名称。然后它将以 DESC 顺序区分大小写（二进制），以首先放置相同的小写名称。二进制排序会将大写字母放在小写字母之前，这就是您需要使用 DESC 的原因。

```
ORDER BY txt, binary(txt) DESC 
```

# php - jquery 在使用 PHP 引入时显示 html 标签而不是格式化它们

> ID：13362083
> 
> 赞同：0
> 
> 时间：2012-11-13T14:01:18.997
> 
> 标签：php, jquery, html, entities, custom-data-attribute

我的数据库中存储了一些数据，例如

```
&lt;b&gt;Availability:&lt;/b&gt; 
```

然后，我使用 html_entity_decode 将其回显到 PHP 的“data-promo”属性中

```
<a href="" class="button" data-promo="<?php echo html_entity_decode($mytext); ?>"></a> 
```

在我的 Jquery 文件中。我想单击上面的按钮，然后在“#key”div 中显示文本。

```
$('.button).click(function(e) {
  e.preventDefault();
  promo = $(this).attr('data-promo');
  $('div#key').html(promo);
}); 
```

除了它在“#key”div中呈现和显示的值之外，这一切都有效

```
<b>Availability</b> 
```

而不是显示标签，我只是希望它格式化输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:10:16.907

您不想使用 PHP 解码并将其插入属性中。这将使您的 HTML 格式错误。保持编码并使用JS对其进行解码。所以试试这个：

```
$('div#key').html(promo).text(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:09:23.020

尝试以下操作：

`$('div#key').text(promo);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T14:20:45.650

在这里，工作并检查

```
<?php

    // we got this from db, in your case
    $mytext = "&lt;b&gt;Availability:&lt;/b&gt"

?>

<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>Script Test</title>
    <script src="jquery.min.js"></script>
    <script>

    // example

        $(function() {
            $('.button').click(function(e) {
                e.preventDefault();
                promo = $(this).attr('data-promo');

                    $("#key").html(promo).text();

                });
        });

    </script>
</head>
<body>

    <a href="" class="button" data-promo="<?php echo html_entity_decode($mytext); ?>">Test</a>
    <div id="key"></div>

</body>
</html> 
```

# c++ - uint32 和 uint32_t 的区别

> ID：13362084
> 
> 赞同：81
> 
> 时间：2012-11-13T14:01:21.003
> 
> 标签：c++, c, uint32, uint32-t

> **可能重复：**
> [不同整数类型之间的差异](https://stackoverflow.com/questions/11786113/difference-between-different-integer-types)

C/C++ 中的*uint32*和*uint32_t*有什么区别？

它们是否依赖于操作系统？

在哪种情况下我应该使用一种或另一种？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-11-13T14:02:19.593

`uint32_t`是标准的，`uint32`不是。也就是说，如果包含`<inttypes.h>`or `<stdint.h>`，您将得到 的定义`uint32_t`。 `uint32`是某些本地代码库中的 typedef，但除非您自己定义，否则不应期望它存在。自己定义是个坏主意。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-11-13T14:03:02.837

`uint32_t`在标准中定义，在

### 18.4.1 标题`<cstdint>`概要 [cstdint.syn]

```
namespace std {
//...
typedef unsigned integer type uint32_t; // optional
//...
} 
```

`uint32`不是，它是一些编译器（可能为`typedef uint32_t uint32`）提供的快捷方式，以便于使用。

# java - wsimport 使用 cookie 生成客户端

> ID：13362088
> 
> 赞同：1
> 
> 时间：2012-11-13T14:01:36.307
> 
> 标签：java, jax-ws, maven-plugin, wsimport

我正在使用 in maven 为 SOAP 1.2 服务生成客户端，`wsimport`执行`jaxws-maven-plugin`如下：

```
<groupId>org.jvnet.jax-ws-commons</groupId>
<artifactId>jaxws-maven-plugin</artifactId>
<version>2.2</version>
<executions>
    <execution>
        <goals>
            <goal>wsimport</goal>
        </goals>
        <configuration>
            <sourceDestDir>${project.basedir}/src/main/java</sourceDestDir>
            <wsdlUrls>
                <wsdlUrl>${webservice.url}</wsdlUrl>
            </wsdlUrls>
            <extension>true</extension>
        </configuration>
    </execution> 
```

客户端第一次调用代理时，负载均衡器会生成一个 cookie 并将其发回。客户端应该将其发回，以便负载均衡器知道在哪里（哪个服务器）专用于特定客户端（想法是客户端第一次获得服务器并且 cookie 标识服务器，然后负载均衡器将客户端发送到每次通话都使用同一台服务器）

现在，有没有办法告诉插件自动启用 cookie 处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T17:01:51.067

是的，您必须设置属性`SESSION_MAINTAIN_PROPERTY`。

名为 HelloService 的服务示例：

```
Hello port = new HelloService().getHelloPort();
((BindingProvider)port).getRequestContext().put(
    BindingProvider.SESSION_MAINTAIN_PROPERTY,true); 
```

设置`SESSION_MAINTAIN_PROPERTY`告诉 JAX-WS 接受来自服务器的 cookie 并在所有后续调用中将它们发回——就像浏览器一样。这可用于维护会话。

资料来源：[Rama Pulavarthi - 使用 JAX-WS 维护会话](http://weblogs.java.net/blog/ramapulavarthi/archive/2006/06/maintaining_ses.html)。

# ios - 为什么使用 setViewControllers 会从 UINavigationController 的导航栏中删除所有内容？

> ID：13362094
> 
> 赞同：5
> 
> 时间：2012-11-13T14:01:57.070
> 
> 标签：ios, objective-c, xcode, uiviewcontroller, uinavigationcontroller

这就是问题所在。我在 a 中使用以下代码`UINavigationController`来交换`rootViewController`. 我需要能够`rootViewController`在多个不同的屏幕之间交换，并允许用户从每个屏幕向下钻取（这显然是我需要导航控制器的原因）：

```
SomeViewController *tmp = [[SomeViewController alloc] initWithNibName:@"SomeViewController" bundle:nil];
NSArray * viewControllers = [self viewControllers];
NSArray * newViewControllers = [NSArray arrayWithObjects:tmp, nil];
[self setViewControllers:newViewControllers]; 
```

现在在阅读类引用时，`UINavigationController`我看到对于“viewControllers”属性，它说：“根视图控制器位于数组中的索引 0，后视图控制器位于索引 n-2，顶部控制器是在索引 n-1 处，其中 n 是数组中的项目数。”

当我在那里打印我的 viewControllers 数组的计数时，我得到 1，即当前的 rootViewController。顶部控制器（我假设它是导航栏）不应该有什么东西吗？

一旦我使用`setViewControllers`新视图，导航栏中的所有内容都会消失。我要补充一点，我有一个左右按钮以及一个自定义标题按钮，它们都已初始化并在 init 方法中添加到导航栏，并且一直运行良好，直到它们消失在我身上。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T14:10:09.887

因为 UINavigationController 管理视图控制器的堆栈（数组），所以如果您要为其提供堆栈，它将释放并删除它的旧堆栈。如果您需要添加多个视图控制器，您可以使用`-pushViewController:animated:completion:`除了最后一个视图控制器之外的所有设置为 NO 的动画。

因为你给它的堆栈只包含一个视图控制器，`-count`所以会打印 1，事实上，它就是顶视图控制器。

# multithreading - 使用多线程处理DataTable中的行？

> ID：13362095
> 
> 赞同：0
> 
> 时间：2012-11-13T14:02:01.840
> 
> 标签：multithreading

```
//get rows from db

foreach(DataRow r in rows)
{
//connect to some other database
//update some record in datatable
//insert record into datatable
//etc...
//...
} 
```

如何使用**多线程**机制来重写上面的代码，然后我们可以从**多服务器**中受益？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T14:25:50.000

**也许这会有所帮助**

```
IEnumerable<DataRow> items = ...

Parallel.ForEach(items, item => {
   ...
}); 
```

[Parallel.ForEach](https://stackoverflow.com/questions/3789998/parallel-foreach-vs-foreachienumerablet-asparallel)

# mysql - 在特定的 mySQL 行中找到具有匹配值的列

> ID：13362102
> 
> 赞同：1
> 
> 时间：2012-11-13T14:02:43.603
> 
> 标签：mysql, sql, row

在我的表中，我需要搜索特定行中的特定列以查找包含我定义的值的列。

例如在我的桌子上

```
ID | Col1 | Col2 | Col3 | Col4 | Col5 | Col6
--------------------------------------------
1  | A    | B    | C    | C    | B    | A
2  | C    | B    | A    | A    | C    | B
3  | B    | A    | C    | B    | A    | C 
```

我需要一个查询来搜索**第 2 行中的第 4、5 和 6 列**，**并**告诉我值 B 出现在哪一列（Col6）。

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:06:46.327

使用一系列`CASE`条件来匹配`'B'`每一列将完成这项工作。每个都必须提供列的字符串文字名称作为其`THEN`值。您不能动态确定列名 - 它们必须是硬编码的。

```
SELECT
  CASE
    WHEN Col2 = 'B' THEN 'Col2' 
    WHEN Col4 = 'B' THEN 'Col4'
    WHEN Col6 = 'B' THEN 'Col6'
    ELSE 'Not found' 
  END AS which_column
FROM 
  yourtable
WHERE id = 2 
```

要返回多个，您可以将`CASE`语句包装在`CONCAT()`返回列名或空字符串的 a 中。这意味着尽管使用多个单独`CASE`的语句，而不是针对同一案例使用多个条件。

```
SELECT
  CONCAT(
    CASE WHEN col2 = 'B' THEN 'Col2 ' ELSE '' END,
    CASE WHEN col4 = 'B' THEN 'Col4 ' ELSE '' END,
    CASE WHEN col6 = 'B' THEN 'Col6' ELSE '' END
  ) AS which_columns
FROM yourtable
WHERE id = 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:05:36.200

你想要列的名称吗？

您可以使用嵌套的`if`例如

```
select if(Col4 = 'B', 'Col4', if(Col5 = 'B', 'Col5', if(Col6 = 'B', 'Col6', NULL)))
from table where ID = 2 
```**

# jquery - twitter-boostrap 水平表单验证

> ID：13362104
> 
> 赞同：0
> 
> 时间：2012-11-13T14:02:57.520
> 
> 标签：jquery, jquery-ui, twitter-bootstrap

这是一个水平的例子

```
 <input data-val="true" data-val-required="The password and confirmation password:" id="InstanceID" name="MainSearchModel.InstanceID" placeholder="Enter instanceID..." type="text" value="" />

    <input id="MainSearchModel_ServiceName" name="MainSearchModel.ServiceName" placeholder="Enter serviceName..." type="text" value="" /> 
```

我正在尝试验证表单，但是当我使用 bootstrap **class="control-group"** 和**jQuery-Live-Form-Validation-For-Twitter-Bootstrap**时，它会为错误描述创建空白空间，正如您在此处看到[的那样添加类](http://jsfiddle.net/miko5054/MFFz8/)。

验证水平表格的最佳方法是什么？

如何使消息出现在文本框的底部而不是出现在文本框的右侧？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:00:35.010

使用此按钮检查验证并禁用表单的 AJAX 和 CLIENT 验证：

```
$this -> widget('bootstrap.widgets.TbButton', array(
            'buttonType' => 'ajaxSubmit',
            'icon' => 'ok',
            'url' => Yii::app() -> createUrl('hr/userTime/create'),
            'label' => 'Submit',
            'ajaxOptions' => array('success' => 'function(data){
                    var obj = $.parseJSON(data);
                    if(obj.status=="success"){
                        $("#newUserTime").modal("hide");
                        setTimeout(function(){location.reload(true);},400);
                    } else {
                        $("#userTime-form-error-div").show();
                        $("#userTime-form-error-div").html("");
                        var $inputs = $("#user-time-form :input");
                        $inputs.each(function() {
                            $(this).removeClass("error");
                            $(this).closest(\'div[class^="control-group"]\').addClass("success validating");
                        });
                        for (var p in obj) {
                            if(document.getElementById(p)) {
                                $("#"+p).closest(\'div[class^="control-group"]\').removeClass("success");
                                $("#"+p).closest(\'div[class^="control-group"]\').addClass("error");
                            }
                            $("#userTime-form-error-div").append(obj[p]  + "<br/>");
                        }
                    }
                }'),
    )); 
```

希望这将帮助某人获得有效和错误字段的一个很好的亮点！

# android - 如何从 .ASHX 处理程序解析 XML 数据并将其显示在 android 的 gridView 中

> ID：13362109
> 
> 赞同：-1
> 
> 时间：2012-11-13T14:03:10.560
> 
> 标签：android, xml, web-services, xml-parsing

实际上我正在研究网络服务。我已经获得了一个链接 就像`http://www.url.com/requesthandler.ashx.`现在我必须从此链接访问数据并将其显示在我的自定义 gridView 中，其中包含一个 textView 和一个 ImageVIew。

我以 XML 格式从给定 URL 获取响应，如下所示。

```
<Result><Status>OK</Status><SearchedText>in</SearchedText><Books><Book><BookID>161</BookID><BookCode>EN161</BookCode><BookTitle>A Brief History of the Fourteen Infallibles</BookTitle><BookAuthor>Anonymous</BookAuthor><DatePublished>5/18/2012 12:00:00 AM</DatePublished><CPID>23</CPID><StatusID>168</StatusID><CPName>Kazim.Homayee</CPName><CPEmail>kazim.homayee@gmail.com</CPEmail><HandCoverPrice></HandCoverPrice><PDFPrice>0.00</PDFPrice><PaperBackPrice></PaperBackPrice><EPubPrice></EPubPrice><BookImage>1.jpg</BookImage><Language>English</Language><ShippingCity>Karachi</ShippingCity><ShippingState>Sindh</ShippingState><ShippingCountry>Pakistan</ShippingCountry><BookUploadPath>EN161</BookUploadPath></Book><Book><BookID>263</BookID><BookCode>EN263</BookCode><BookTitle>A Call To Divine Unity</BookTitle><BookAuthor>Mansoor L Limba</BookAuthor><DatePublished>7/17/2003 12:00:00 AM</DatePublished><CPID>23</CPID><StatusID>287</StatusID><CPName>Kazim.Homayee</CPName><CPEmail>kazim.homayee@gmail.com</CPEmail><HandCoverPrice></HandCoverPrice><PDFPrice>0.00</PDFPrice><PaperBackPrice></PaperBackPrice><EPubPrice></EPubPrice><BookImage>1.jpg</BookImage><Language>English</Language><ShippingCity>Karachi</ShippingCity><ShippingState>Sindh</ShippingState><ShippingCountry>Pakistan</ShippingCountry><BookUploadPath>EN263</BookUploadPath></Book><Book><BookID>6</BookID><BookCode>EN6</BookCode><BookTitle>A Code of Practice for Muslims in the West</BookTitle><BookAuthor>Abdul Hadi al-Hakim</BookAuthor><DatePublished>3/16/2012 12:00:00 AM</DatePublished><CPID>23</CPID><StatusID>6</StatusID><CPName>Kazim.Homayee</CPName><CPEmail>kazim.homayee@gmail.com</CPEmail><HandCoverPrice></HandCoverPrice><PDFPrice>0.00</PDFPrice><PaperBackPrice></PaperBackPrice><EPubPrice></EPubPrice><BookImage>1.jpg</BookImage><Language>English</Language><ShippingCity>Karachi</ShippingCity><ShippingState>Sindh</ShippingState><ShippingCountry>Pakistan</ShippingCountry><BookUploadPath>EN6</BookUploadPath></Book><Book><BookID>9</BookID><BookCode>EN9</BookCode><BookTitle>A DIVINCE Perspective on Rights</BookTitle><BookAuthor>Ghodratullah Mashayekhi</BookAuthor><DatePublished>3/16/2012 12:00:00 AM</DatePublished><CPID>23</CPID><StatusID>16</StatusID><CPName>Kazim.Homayee</CPName><CPEmail>kazim.homayee@gmail.com</CPEmail><HandCoverPrice></HandCoverPrice><PDFPrice>0.00</PDFPrice><PaperBackPrice></PaperBackPrice><EPubPrice></EPubPrice><BookImage>1.jpg</BookImage><Language>English</Language><ShippingCity>Karachi</ShippingCity><ShippingState>Sindh</ShippingState><ShippingCountry>Pakistan</ShippingCountry><BookUploadPath>EN9</BookUploadPath></Book><Book><BookID>247</BookID><BookCode>EN247</BookCode><BookTitle>A Divine Perspective On Rights</BookTitle><BookAuthor>Imam Sajjad Ali ibn al-Hussein</BookAuthor><DatePublished>7/12/2008 12:00:00 AM</DatePublished><CPID>23</CPID><StatusID>950</StatusID><CPName>Kazim.Homayee</CPName><CPEmail>kazim.homayee@gmail.com</CPEmail><HandCoverPrice></HandCoverPrice><PDFPrice>0.00</PDFPrice><PaperBackPrice></PaperBackPrice><EPubPrice></EPubPrice><BookImage>1.jpg</BookImage><Language>English</Language><ShippingCity>Karachi</ShippingCity><ShippingState>Sindh</ShippingState><ShippingCountry>Pakistan</ShippingCountry><BookUploadPath>EN247</BookUploadPath></Book><Book><BookID>165</BookID><BookCode>EN165</BookCode><BookTitle>A Document of Instruction by Imam Ali (as)</BookTitle><BookAuthor>Anonymous</BookAuthor><DatePublished>5/18/2012 12:00:00 AM</DatePublished><CPID>23</CPID><StatusID>185</StatusID><CPName>Kazim.Homayee</CPName><CPEmail>kazim.homayee@gmail.com</CPEmail><HandCoverPrice></HandCoverPrice><PDFPrice>0.00</PDFPrice><PaperBackPrice></PaperBackPrice><EPubPrice></EPubPrice><BookImage>1.jpg</BookImage><Language>English</Language><ShippingCity>Karachi</ShippingCity><ShippingState>Sindh</ShippingState><ShippingCountry>Pakistan</ShippingCountry><BookUploadPath>EN165</BookUploadPath></Book><Book><BookID>12</BookID><BookCode>EN12</BookCode><BookTitle>A Probe into the History of Ashura</BookTitle><BookAuthor>Dr Ibrahim Ayati</B 
```

*   这个 XML 数据包含大量数据，但我只需要访问`<BookTitle>`,`<BookCode>`和`<BookImage>`标记内的数据并将其显示在 textVIew 和 imageVIew 中。
*   我还需要一些关于 android 中可用的不同类型解析器的信息。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:11:40.557

通常有两种解析 XML 的方法：

1.  一次在文档中流式传输一个标签，并且只处理您感兴趣的标签
2.  一次将整个文档加载到分层树中，然后查找您感兴趣的节点

方法 1 的内存效率要高得多，Android 开发人员文档[在此处](http://developer.android.com/training/basics/network-ops/xml.html)建议的也是如此。

方法 2 通常更容易上手。但由于它效率较低，因此不是首选方法，因此在 Android 开发人员文档中隐藏得更多。请参阅 DocumentBuilderFactory 上的此[API 文档](http://developer.android.com/reference/javax/xml/parsers/DocumentBuilderFactory.html)和[本教程](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)以开始使用。

显示症结的片段：

```
public Document parseXml(String xml) throws Exception {
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder building = factory.newDocumentBuilder();
    InputSource input = new InputSource();
    input.setCharacterStream(new StringReader(xml));
    return builder.parse(input); 
} 
```

# windows-phone-7 - 既然 Windows Phone 8 可用，是否可以提交 Windows Phone 7.5 应用程序

> ID：13362112
> 
> 赞同：1
> 
> 时间：2012-11-13T14:03:27.800
> 
> 标签：windows-phone-7, windows-phone-8

我开发并提交了一个旨在支持 Windows 7.5 的应用程序。

该应用程序针对目标操作系统 (7.5) 进行了测试，并在受支持的操作系统下按预期运行。

该应用程序是在 Windows Phone 8 发布之前开发并提交认证的。

我收到来自 Microsoft 的认证反馈，表明认证未通过，因为他们针对不受支持的操作系统（Windows Phone 8 设备）进行了测试。

我的问题是：既然 Windows Phone 8 可用，是否可以向 Windows Phone 商店提交仅支持 Windows Phone 7.5 的应用程序？如果是这样，我应该如何在应用提交表单中指定支持的操作系统？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:55:32.930

According to Microsoft, all the existing Windows phone 7.5 apps seamlessly works on Windows Phone 8\. So, I don't see any point why your app is rejected for Windows phone 8, when it works properly on Windows phone 7.5\.

I suggest you to check the complete details in the feedback mail, why the app is rejected. I guess there are or other reasons for the rejection of the app.

Also, install the Windows phone 8 SDK and test it yourself, whether its working on WP8 or not.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:01:58.940

我遇到了类似的情况，他们只是在 WP8 商店中停用了可见性（这正是我想要的）。通过在右侧的认证说明框中写下诸如缺乏对 WP8 的支持之类的内容，您可能会取得成功。

我发现，使用地图的 WP7 应用程序在 WP8 下运行非常糟糕。

# c++ - c++ 如何在运行时获取 COM 对象 Coclass 的 progid

> ID：13362113
> 
> 赞同：3
> 
> 时间：2012-11-13T14:03:31.347
> 
> 标签：c++, visual-studio-2010, com, atl

我需要编写一个从 COM 对象中动态提取 progid 的函数。

这可能吗？

最好的方法是什么？

编辑：我需要处理的所有 coclasses 实现 IProvideClassInfo

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T14:32:05.440

首先，不能保证信息首先可用。即使您只是使用 ProgID 实例化了一个对象，您也可能无法取回它。

最简单的方法是查询其中一个`IPersist`和朋友（`IPersistStream`等）接口，然后调用[`IPersist::GetClassID`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms688664%28v=vs.85%29.aspx)获取`CLSID`. [`ProgIDFromCLSID`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms690567%28v=vs.85%29.aspx)然后使用或通过注册表查找转换为 ProgID 。

另一种选择是以这种替代方式查询`IProvideClassInfo`和`IProvideClassInfo2`访问感兴趣的 CLSID。

第三个选项，如果以上两个都不起作用，则查询`IDispatch`并尝试打开类型库，然后遍历查找 coclass 信息。

# android - ORMLite 在数据库中存储 PNG 文件

> ID：13362115
> 
> 赞同：1
> 
> 时间：2012-11-13T14:03:35.913
> 
> 标签：android, database, image, ormlite

我正在制作一个使用 ORMLite 将数据存储到 android 设备中的应用程序。

所以基本上，我创建了一个具有一些属性的类 Question，每个问题都有一个与之相关的特定图像。

我正在考虑在资产文件夹中存储我的图像，然后做这样的事情

```
@DatabaseField
private String pathToTheImage; 
```

然后循环每个问题：

```
ImageView iv = (ImageView)view.findViewById(R.id.image);
iv.setImageDrawable(new BitmapDrawable(view.getContext().getAssets().open(myQuestion.getpathToTheImage()))); 
```

所以我的问题是，在 android DB 中存储 png 文件是否有更好的主意？我找不到一个很好的教程。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:19:29.467

该`assets`文件夹仅包含您添加到应用程序中的文件。您不能写入此文件夹。

如果您只存储来自您的`assets`文件夹的图像，那么您的方法是正确的。否则，您应该使用[`context.openFileOutput()`](http://developer.android.com/reference/android/content/Context.html)在应用程序的私有目录中创建文件，并且您仍然可以使用您的方法...保留文件的路径。

另一种选择是在`Database`as`blob`类型中`ORMLite`使用`DataType.BYTE_ARRAY`. 您可以查看这篇[文章](https://stackoverflow.com/questions/6835926/ormlite-and-images-saved-as-blob-on-android)以了解有关此操作的更多详细信息。

# python - 使用逗号或点作为分隔符将 Python 字符串显式转换为浮点数

> ID：13362121
> 
> 赞同：12
> 
> 时间：2012-11-13T14:04:00.437
> 
> 标签：python, localization, floating-point, type-conversion

如何明确告诉 python 使用点或逗号作为小数分隔符读取十进制数？我不知道将运行我的脚本的 PC 的本地化设置，这不应该影响我的应用程序，我只想说：

```
f = read_float_with_point("3.14") 
```

或者

```
f = read_float_with_comma("3,14") 
```

我认为写作

```
def read_float_with_comma(num):
    return float(num.replace(",", ".") 
```

不安全，因为我不知道语言环境设置！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-13T14:07:12.157

> 因为我不知道语言环境设置

[`locale`您可以使用该模块](http://docs.python.org/2/library/locale.html)进行查找：

```
>>> locale.nl_langinfo(locale.RADIXCHAR)
'.' 
```

或者

```
>>> locale.localeconv()['decimal_point']
'.' 
```

使用它，您的代码可能会变成：

```
import locale
_locale_radix = locale.localeconv()['decimal_point']

def read_float_with_comma(num):
    if _locale_radix != '.':
        num = num.replace(_locale_radix, ".")
    return float(num) 
```

更好的是，同一个模块为您提供了一个转换功能，称为[`atof()`](http://docs.python.org/2/library/locale.html#locale.atof)：

```
import locale

def read_float_with_comma(num):
    return locale.atof(num) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-13T14:09:40.227

您可以使用`locale.atof`

```
import locale
locale.atof('12.3') 
```

[http://docs.python.org/2/library/locale.html](http://docs.python.org/2/library/locale.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T14:12:54.600

您可以使用[babel](http://babel.edgewall.org/wiki/ApiDocs/babel.numbers#babel.numbers%3aparse_decimal)解析本地格式的小数：

```
>>> parse_decimal('1,099.98', locale='en_US')
Decimal('1099.98')
>>> parse_decimal('1.099,98', locale='de')
Decimal('1099.98') 
```

# php - 使用 mailjet 发送纯文本电子邮件

> ID：13362129
> 
> 赞同：1
> 
> 时间：2012-11-13T14:04:30.400
> 
> 标签：php, mailjet

谁能告诉我如何使用[mailjet api](https://www.mailjet.com/docs/api)向指定的收件人发送纯文本电子邮件。

在文档中，我只能找到有关如何使用现有活动发送电子邮件的详细信息。我只想向我可以指定的收件人发送消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:14:36.233

使用 Mailjet 处理事务性电子邮件的最佳方式是使用 SMTP 服务，如果您有机会自定义本地 MTA 以通过 Mailjet 的 SMTP 服务器中继您的电子邮件。

# java - 在子类中调用父类方法

> ID：13362132
> 
> 赞同：0
> 
> 时间：2012-11-13T14:04:46.597
> 
> 标签：java, class, methods, parent-child

我在类（A 类）中创建了一个私有类（AB 类）。A 类有一个我在私有类（AB 类）中调用的方法。但我收到“;”的错误 在方法调用语句所在的地方一无所获。

```
public class ClassA
{
  .........
 ....
 public void Check()
   {
  .....
 }

private class ClassAB
{
  ... 
   public void callCheck()
  {
     check();// I am getting error here
   }
}
} 
```

这个错误的原因是什么？

![在此处输入图像描述](../Images/ceb4bd51e189877db688a817069f2a09.png)

如果我删除此方法调用此错误如何消失..

我不能在子类中调用父类函数吗，它会自动继承父类的所有东西..

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:10:24.710

语法错误。无论如何，看看下面：

*与实例方法和变量一样，内部类与其封闭类的实例相关联，并且可以直接访问该对象的方法和字段。此外，由于内部类与实例相关联，它本身不能定义任何静态成员。*

*作为内部类实例的对象存在于外部类的实例中。考虑以下类：*

```
 class OuterClass {
        ...
        class InnerClass {
            ...
        }
    } 
```

*InnerClass 的实例只能存在于 OuterClass 的实例中，并且可以直接访问其封闭实例的方法和字段。下图说明了这个想法。*

更多信息请访问[http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

[https://blogs.oracle.com/darcy/entry/nested_inner_member_and_top](https://blogs.oracle.com/darcy/entry/nested_inner_member_and_top)

# ruby - 检查 Object 是否为 nil 并且所需的属性是否为 nil 或为空

> ID：13362139
> 
> 赞同：1
> 
> 时间：2012-11-13T14:05:23.037
> 
> 标签：ruby

我正在寻找“优雅”的方法来检查给定对象是否为 nil 并且它的属性是 nil 或空。目前我有这张支票

```
response = foo.call() # some service call, no http code given :)
raise StandardError, "Response is not valid" if response.nil? || response['data'].nil? || reponse['data'].emtpy? 
```

有没有更优雅的方法来做到这一点，并避免三重或检查？`begin/catch`如果有人建议，包裹并不是优雅的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T14:08:00.387

那这个呢？

```
data = response.try(:[], 'data')
raise Exception, "Response is not valid" if data.nil? || data.empty? 
```

正如@ksol 在评论中正确提到的那样，`try`助手来自 ActiveSupport。但是重新实现一点也不难。

```
class Object
  def try method, *args
    if respond_to? method
      send method, *args
    else
      nil
    end
  end
end

class Foo
  def hello name
    "hello #{name}"
  end
end

f = Foo.new
f.try(:bar) # => nil
f.try(:hello, 'world') # => "hello world"
nil.try(:wat) # => nil 
```

## 备择方案

这是[Object#andand](http://andand.rubyforge.org/)如果您不想拖拽整个 activesupport 并且不想编写已经编写的代码。

```
data = response.andand['data']
raise Exception, "Response is not valid" if data.nil? || data.empty? 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T14:14:29.660

如果这是在 Rails 中，您可以执行以下操作：

```
raise "Response is not valid" unless response && response['data'].present? 
```

在 Rails 之外，我不确定您是否可以比原来的产品线做得更好。另一种变化可能是：

```
raise "Response is not valid" unless response && response['data'] && !response['data'].empty? 
```

显然，最后一行与您的没有太大不同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T14:07:16.527

```
unless response && response['data'] && !response['data'].empty? 
```

# c# - 需要帮助在 C# 中编写 XML 开始元素

> ID：13362140
> 
> 赞同：1
> 
> 时间：2012-11-13T14:05:28.200
> 
> 标签：c#, xml, xmlwriter

我试过在 MSDN、W3Schools 和许多其他网站上查找这个问题，但似乎没有人知道答案。这是我的问题：

我正在尝试为 XML 文档生成一个起始元素。我需要创建的特定元素是：

```
<ns1:getRecordsResponse xmlns:ns1="http://someurl/schemas"> 
```

根据我所做的研究，我已经能够使用以下代码正确生成该元素的后半部分：

```
writer.WriteAttributeString("xmlns", "ns1", null, "http://someurl/schemas"); 
```

不过，我无法正确生成第一部分。我尝试使用 writer.StartElement("ns1", "getRecordsResponse")，同一行但名称相反，我尝试在三个位置中的每一个中添加 null 作为第三个参数，但它永远不会正确。我也尝试过使用 WriteElementString 方法，但我不能正确地这样做，因为它会引发无效的操作异常：

```
writer.WriteElementString("ns1", "getCitationsResponse", "http://someurl/schemas", null); 
```

如何正确编写元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:10:14.373

这似乎做你想做的事：

```
using System;
using System.Xml;

class Test
{
    public static void Main(string[] args)
    {
        using (var writer = XmlWriter.Create(Console.Out))
        {
            writer.WriteStartElement("ns1", "foo", "http://someurl/schemas");
            writer.WriteAttributeString("xmlns", "ns1", null, "http://someurl/schemas");
            writer.WriteEndElement();
        }
    }
} 
```

输出（省略 XML 声明）：

```
<ns1:foo xmlns:ns1="http://someurl/schemas" /> 
```

查看[该重载的文档`WriteStartElement`](http://msdn.microsoft.com/en-us/library/6baz118x.aspx)应该清楚为什么会起作用，因为这些是按顺序排列的参数：

> *   prefix
>     类型：System.String
>     元素的命名空间前缀。
> *   localName
>     类型：System.String
>     元素的本地名称。
> *   ns
>     类型：System.String
>     要与元素关联的命名空间 URI。

# mysql - MySQL：用 SQL 查询替换特定的 MySQL 值

> ID：13362144
> 
> 赞同：0
> 
> 时间：2012-11-13T14:05:48.623
> 
> 标签：mysql, replace

我有一个包含“日期”列的数据库。

起初，设置数据库的人，他错误地将列类型设置为 varchar(9)。

日期是**01-01-2012 (10 Characters)**，因此在每个日期都缺少最后一个数字。

![在此处输入图像描述](../Images/d89e7dbfd770fa81601176794feb6cbf.png)

现在是否可以使用 MySQL 查询将所有 201 替换为 2012？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T14:07:00.443

```
UPDATE tableName
SET columnName = REPLACE(columnName, '201', '2012') 
```

或者

```
UPDATE tableName
SET columnName = CONCAT(columnName, '2') 
```

*   [SQLFiddle Demo（*包括两个查询*）](http://sqlfiddle.com/#!2/01467/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:08:23.087

首先将表大小增加到 varchar(10)。然后

```
UPDATE tableName
SET columnName = REPLACE(columnName, '201', '2012') 
```

# android - 如何将选定（选中）checkedtextview 添加到 arraylist 并将 tat arraylist 带到下一个活动？

> ID：13362151
> 
> 赞同：1
> 
> 时间：2012-11-13T14:06:23.327
> 
> 标签：android

```
 public class ListViewActivity extends ListActivity implements OnClickListener {

ArrayList<String> datas;
DBhelper query;
//ImageView image;
CheckedTextView cap;
DBhelper db;
ArrayList<byte[]> image;
ArrayList<String> caption ;
ArrayList<String> description ;
ArrayList<String> rate ;

ByteArrayInputStream imageStream;
String d;
Bitmap theImage;
ItemsAdapter itemsAdapter;
Button order, menu;
byte[] temp_image;
ArrayList<String>   completedTasks;

Intent i;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub 
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list);
    order = (Button) findViewById(R.id.order);
    order.setOnClickListener(this);

    db = new DBhelper(this);

    image = new ArrayList<byte[]>();
    caption = new ArrayList<String>();
    description = new ArrayList<String>();
    rate = new ArrayList<String>();
            // to retrieve the datas from database
    db.open();
    Cursor cursor = db.getEvents("data");
    if( cursor.moveToFirst())   {
        do{

            temp_image = cursor.getBlob(1); //retrieving the image
            //Log.e("image", temp_image.toString());// 
            String temp_caption = cursor.getString(2);//retrieving the data
            Log.e("name", temp_caption);
            String temp_description = cursor.getString(3);
            Log.e("desc", temp_description);
            String temp_rate = cursor.getString(4);
            Log.e("rate", temp_rate);
            //imageStream = new ByteArrayInputStream(temp_image);
            image.add(temp_image);
            caption.add(temp_caption);
            description.add(temp_description);
            rate.add(temp_rate);
        }while (cursor.moveToNext()) ;
        String[]   captionArray = (String[]) caption.toArray(
                new String[caption.size()]);// convert the 

                     arraylist to arrays.
                     // Adapter to set data to the list.
        itemsAdapter = new ItemsAdapter(
                ListViewActivity.this, R.layout.datalist_item,
                captionArray);
        setListAdapter(itemsAdapter);//set the adapter

        return ;
    }
    db.close();// database close
} 
```

扩展基本适配器的适配器类。私有类 ItemsAdapter 扩展 BaseAdapter { String[] items;

```
 public ItemsAdapter(Context context, int textViewResourceId,
            String[] items) {
        this.items = items;
    } 

    public View getView(final int POSITION, View convertView,
            ViewGroup parent) {

        TextView tvDescription;
        TextView tvRate;

        View view = convertView;
        ImageView img;
        if (view == null) {
            LayoutInflater vi = (LayoutInflater) 
                    getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = vi.inflate(R.layout.datalist_item, null);

        } 
        img = (ImageView) view.findViewById(R.id.ivDatas);

        cap = (CheckedTextView) view.findViewById(R.id.list_content);
        tvDescription = (TextView) view.findViewById(R.id.tvdesc);
        tvRate = (TextView) view.findViewById(R.id.tvRate);
        theImage = BitmapFactory.decodeByteArray(image.get(POSITION), 
                    0, image.get(POSITION).length );
        img.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                //Log.e("ghhf", String.valueOf(imgid));
                //Bundle b = new Bundle();
                Log.e("tag", 
                     String.valueOf(image.get(POSITION)));
                i = new 
                      Intent(ListViewActivity.this,ImageActivity.class);
                //b.putParcelable("imagePath", 
                      image.get(POSITION));
                i.putExtra("imageP", image.get(POSITION));
                //i.putExtra(image.get(POSITION));

                startActivity(i);
            }
        });
        img.setImageBitmap(theImage);

        cap.setText(caption.get(POSITION));
        tvDescription.setText(description.get(POSITION));
        tvRate.setText(rate.get(POSITION));

        return view; 
    }

    public int getCount() {
        // TODO Auto-generated method stub
        return items.length;
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }
} 
```

这里我有一个问题，当checkedtextview被选中时，我必须将checkedtextview添加到arraylist。但是在这里，当我要选择两个checkedtextview 时，它只向最后选择的arraylist 添加一个值。

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    String selection = l.getItemAtPosition(position).toString();
    String s = caption.get(position);
    //ArrayList<Long> completedIds = new ArrayList<Long>();
    completedTasks = new ArrayList<String>();
    cap = (CheckedTextView) v.findViewById(R.id.list_content); 
```

在这里，我必须获取选定的 textview 并添加到 arraylist，并将 arraylist 发送到下一个活动并显示它。

```
 if(!cap.isChecked())    {

        Log.d("checked", "true");

        completedTasks.add(s);
        cap.setChecked(true);
        Log.d("true", s);

        return ;    

    }

    else    {
        cap.setChecked(false);

        Log.d("unchecked", "true");
        //for(String str : caption )    {
        completedTasks.remove(s);
        Log.d("false", s);
        //}
        //itemsAdapter.notifyDataSetChanged();
        return ;

        //}
    }

} 
```

在这里，我们必须显示选中的数组列表。

```
 public void onClick(View v) {
    for(String str : completedTasks)    {
        Log.d("selected", str);
    }

    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:12:26.830

尝试移动这条线：`completedTasks = new ArrayList<String>();`在你的`onListItemClick`. 将其移至 onCreate 之类的。问题是每次您单击 listView 时，它都会重新制作同一个对象。这可能就是为什么您在数组中只看到一个字符串的原因。

我想你也有问题将 arrayList 放到另一个活动中。就我个人而言，我只是将其设为静态成员，但您应该比我更清楚地了解其他选项：

[如何在 Android 上将对象从一个活动传递到另一个活动？](https://stackoverflow.com/questions/2906925/android-how-do-i-pass-an-object-from-one-activity-to-another)

[在android中的活动之间传递非原始类型的数据](https://stackoverflow.com/questions/1441871/passing-data-of-a-non-primitive-type-between-activities-in-android)

# frama-c - Frama-c 中的类型检查

> ID：13362157
> 
> 赞同：2
> 
> 时间：2012-11-13T14:06:51.943
> 
> 标签：frama-c

我想知道 Frama-C 是否实现了某种与指针相关的类型检查。例如，考虑以下情况：

```
int x[10];
void * v = x;

//@ assert isOfTypeInt(x, 10)
//@ assert isOfTypeInt(v, 10) 
```

有没有和上面类似的精神？

看 ACSL 手册，有很多方法可以检查内存和指针的使用情况（其中一部分是在 Frama-C Oxygen 中实现的）。不过，我还没有找到任何通用的支持来处理类型信息。是否有我们可以用于此目的的 frama-c 插件？

谢谢，爱德华多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:42:51.613

ACSL 中确实没有这样的东西。事实上，C 中的内存位置并没有真正与它们相关的类型信息：如果我们忽略潜在的对齐约束，任何 4 字节的块都可以用于存储 32 位整数。

也就是说，Frama-C 是一个可扩展的平台，并且总是可以为特定需求编写插件。对于您的示例中的普通变量，声明的类型可以在AST中对应的字段中`x`直接访问。对于指针，如不同种类）。`vtype``varinfo``v`

# android - 创建具有不同上下文的意图

> ID：13362158
> 
> 赞同：0
> 
> 时间：2012-11-13T14:06:58.253
> 
> 标签：android, android-intent

除了（THIS，myActivity.class）之外，还有其他方法可以创建意图吗？我问是因为我想创建一个意图，以便当用户转到另一个活动并按下“返回”按钮时，他会返回到我创建意图的活动之外的活动。

如：

A 创建 B，B 创建 C，用户在活动 C 上按“返回”，返回 A。

我试过 new Intent(myOtherActivity.class, myNewActivity.class) 但它似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:33:18.967

这个问题有两点：

1.  您可以使用不同的方法启动[活动](http://developer.android.com/reference/android/app/Activity.html#startActivity%28android.content.Intent%29)，但始终使用 Intent 来实现。因此，请参阅[Intent 系统](http://developer.android.com/reference/android/content/Intent.html)以获取更多信息
2.  如果您想在使用后退按钮时启动与之前不同的活动，那么您应该[管理活动堆栈](https://stackoverflow.com/questions/6369918/how-to-manage-activity-stack)。

我希望这可以解决问题！如果不在下面评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:25:43.020

```
myOtherActivity.class 
```

不是上下文而是一个类，所以你需要提供一个 Activity 类的实际实例 - 我认为:-)

# javascript - 嵌入式 youtube 播放视频太快而没有声音

> ID：13362162
> 
> 赞同：1
> 
> 时间：2012-11-13T14:07:04.447
> 
> 标签：javascript, audio, mp4, television

我正在尝试在三星智能电视的基于 Javascript 的应用程序中实现 YT 播放器。问题是我想使用的视频没有声音播放并且速度很快。你们中有人知道为什么吗？

这是我正在使用的代码（视频以 .mp4 格式编码[http://www.youtube.com/watch?v=l4uSJ-LpkwY](http://www.youtube.com/watch?v=l4uSJ-LpkwY)）：

```
var player=false; 

function onYouTubePlayerReady(playerId) {
                   player = document.getElementById(playerId);

                   Player.init();
//                 Player.setWindow();
}               

var Player = {};

Player.init = function(){

    this.playVideo("l4uSJ-LpkwY");
    this.setWindow();

}
Player.setWindow = function(){

        document.getElementById('ytplayer').style.width = "450px";
        document.getElementById('ytplayer').style.height = "450px";     
        document.getElementById('ytplayer').setSize(450,450);

}

Player.setFull = function(){

        document.getElementById('ytplayer').style.width = "960px";
        document.getElementById('ytplayer').style.height = "540px";     
        document.getElementById('ytplayer').setSize(960,540);

}

Player.onStateChange = function(state){

}

Player.playVideo = function(url){
    player.loadVideoById(url);
}

Player.stopVideo = function(){
    player.stopVideo();
}

Player.pauseVideo = function(){
    player.pauseVideo();
} 
```

最好的问候， Jérémy D.

# sql-server - SQL Server 2008 检查索引是否存在

> ID：13362163
> 
> 赞同：18
> 
> 时间：2012-11-13T14:07:07.730
> 
> 标签：sql-server, sql-server-2008-r2

> **可能重复：**
> [SQL Server DB 中所有索引和索引列的列表](https://stackoverflow.com/questions/765867/list-of-all-index-index-columns-in-sql-server-db)

我想知道是否有一种方法可以根据列名验证特定表的 SQL Server 数据库中是否存在索引：

假设我运行以下脚本：

```
 CREATE NONCLUSTERED INDEX [MyIndexName]
  ON [dbo].[MyTable] ([CustomerId])
  INCLUDE ([Id],[ModificationDate],[ProductId])
  GO 
```

现在我想根据表名和列（以及包含子句中的列）检查索引是否存在，而不是实际的索引名。

（SQL Server 2008 R2）

谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-13T14:17:44.773

试试这个查询：

```
if exists(
           SELECT 1 
           FROM sys.indexes 
           WHERE name = 'INDEX' 
           AND object_id = OBJECT_ID('TABLENAME')
          )
 begin
 ....
 end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:42:19.617

这些信息在目录元数据视图中可用，类似于：

```
select ...
from sys.indexes i
join sys.index_columns ic on i.object_id = ic.object_id
    and i.index_id = ic.index_id
join sys.columns c
    on ic.object_id = c.object_id
    and ic.index_column_id = c.column_id
where i.object_id = object_id('MyTable')
and (c.name = 'CustomerId' and ic.key_ordinal = 1 and ic.is_descending_key = 0)
or (ic.is_included_column = 1 and c.name in ('Id', 'ModificationDate', 'ProductId')); 
```

这不会产生是/否的答案，而是向您显示可能已经涵盖您正在计划的索引的索引。您需要考虑键位置、键方向和包含的列，覆盖重叠（（K1，K2）上的索引覆盖（K1），以及包括（C1，C2，C3）覆盖（C1，C3）的索引. 对于一个真正的生产系统，你需要考虑隐含的列（例如聚集索引键）、索引过滤器表达式和索引数据空间的差异（即partitioninig）

# eventbrite - 设置 Eventbrite 支付方式

> ID：13362173
> 
> 赞同：3
> 
> 时间：2012-11-13T14:07:50.790
> 
> 标签：eventbrite

我想使用 API 设置 Eventbrite 事件的付款方式。我需要为多个帐户执行此操作，每个帐户都有不同的付款方式。有些帐户有不止一种付款方式。

payment_update API 调用只允许您打开/关闭 PayPal、Google Merchant、支票和现金。信用卡商户账户呢？Authorize.Net 呢？

Eventbrite 有关支付的文档和 API payment_update 没有详细介绍或描述不同的场景。

我的具体问题，至少现在是：

*   当我创建一个新活动并且一个帐户有一种付款方式时，该活动是否默认使用该付款方式？
*   当我创建一个新活动并且一个帐户有多个付款方式时，该活动的默认付款方式是什么？
*   如何在 payment_update API 调用（特别是信用卡账户或 Authorize.Net）中选择不属于三种付款方式之一的付款方式？

如果 Eventbrite 文档谈论这个，我还没有找到它们。指向正确的 M 到 RTF 的指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T18:10:48.470

因此，目前无法选择替代付款方式（信用卡、authorize.net）。我认为他们正在努力添加这些功能。

至于默认付款方式，我帮不上什么忙。我的建议是设置一个具有多种付款类型的帐户并尝试创建事件以查看会发生什么。

# iphone - 单个应用程序的多个 Xcode 项目

> ID：13362175
> 
> 赞同：1
> 
> 时间：2012-11-13T14:07:57.227
> 
> 标签：iphone, ios, xcode

我有一个在 App Store 上发布的应用程序，但最近我决定重新构建该应用程序，因此我有了第二个同名的 Xcode 项目。现在我准备在 App Store 上发布新应用程序，但我想确保它不会像我在开发设备上运行它时那样为我的用户创建重复的应用程序。

除了确保捆绑标识符的名称相同外，我还需要采取哪些其他步骤才能使升级过程对我的用户尽可能无缝？

# sql - 从列中获取字符串列表并按字母顺序排序

> ID：13362177
> 
> 赞同：0
> 
> 时间：2012-11-13T14:08:00.487
> 
> 标签：sql

假设我有一列字符串，我想获取此列表并将其作为列表发送给某人以查看，但是这些字符串未按字母顺序排序。无论如何，是否可以按字母顺序对这些结果进行排序，而无需实际重新排列柱子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:09:07.753

你在找`ORDER BY`条款吗？

```
SELECT * FROM yourtable ORDER BY yourcolumn 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:09:13.130

> 无论如何，是否可以按字母顺序对这些结果进行排序，而无需实际重新排列列中的数据？

你的意思是

```
SELECT * 
FROM TableName
ORDER BY somefield; 
```

假设该`ORDER BY`字段是一个字符串，这将按字母顺序对表进行排序。但这不会重新排列该列中的数据。

# windows - 在本地活动目录上不能嵌套另一个组的组成员

> ID：13362180
> 
> 赞同：1
> 
> 时间：2012-11-13T14:08:12.470
> 
> 标签：windows, permissions, active-directory, windows-xp, windows-authentication

我正在尝试创建一个文件系统权限场景来测试我目前正在开发的软件。在这种情况下，我希望一个组成为另一个组的成员。然而，在全局域控制器上，这是可行的，也是 Windows 中的最佳实践（就我而言）。

但是，如果我尝试将一个组嵌套到本地计算机上的另一个组中，它只允许我添加用户或集成安全主体（不确定这是否是正确的翻译）。

有没有办法克服这个限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T04:48:09.243

您只能将某些类型的组嵌套在其他组中。本地组不能包含其他本地组。请参阅： http: [//support.microsoft.com/kb/974815 ?wa=wsignin1.0](http://support.microsoft.com/kb/974815?wa=wsignin1.0)

对于 AD 组嵌套规则，这篇文章应该会有所帮助：[http ://technet.microsoft.com/en-us/library/cc776499(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc776499(v=ws.10).aspx)

# java - Matcher.find() 之前的 Java 正则表达式模式 Matcher.matches() 奇怪的行为

> ID：13362182
> 
> 赞同：3
> 
> 时间：2012-11-13T14:08:14.650
> 
> 标签：java, regex

我试过这个例子只是交换两行它给出了不同的输出为什么

```
String inputString = "username@gmail.com"; 
String pattern="([a-z]+@)([a-z]+)(\\.[a-z]+)";
Pattern p = Pattern.compile(pattern); 
Matcher m = p.matcher(inputString); 
```

///变化发生在这里

```
if(m.find()) 
{
   String resultString = m.replaceAll("$1xxxx$3"); 
   System.out.println(resultString); 
}

System.out.println(m.matches());//line to be changed 
```

输出 ：

用户名@xxxx.com

真的

```
System.out.println(m.matches());//line changed     
if(m.find()) 
{
   String resultString = m.replaceAll("$1xxxx$3"); 
   System.out.println(resultString); 
} 
```

输出：真

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T14:11:35.057

[`Matcher.find`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)从文档中提取

> 寻找
> 
> 公共布尔查找（）
> 
> 尝试查找与模式匹配的输入序列的下一个子序列。此方法从该匹配器区域的开头开始，**或者，如果该方法的先前调用成功并且匹配器此后尚未重置，则从前一个匹配不匹配的第一个字符开始**。
> 
> 如果匹配成功，则可以通过 start、end 和 group 方法获取更多信息。
> 
> 返回： true 当且仅当输入序列的子序列与此匹配器的模式匹配

因此，由于您调用`Matcher.matches`了 which 尝试匹配整个字符串，并且您没有重置匹配器，因此它尝试在第一个匹配之后查找开始。由于只有一个匹配项，因此它什么也找不到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T14:47:34.587

方法 replaceAll(String replacement) 的 javadoc 声明以下“调用此方法会更改此匹配器的状态。如果要在进一步的匹配操作中使用匹配器，则应首先将其重置。”

因此，我认为您会发现这种差异，因为匹配器在替换后不再处于相同状态。尝试全部替换后重置匹配器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T14:14:25.463

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html#find](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html#find) ()

查找从上次使用匹配器时中断的地方开始

首先，这意味着 inputString 的开始。

但是，由于matches() 将整个inputString 考虑在内，这会将指针移动到末尾。结果，它不再找到，并且在这种情况下 find() 为假（作为其后续）

# ruby-on-rails-3 - Heroku 上 Rails 的 Web 分析

> ID：13362183
> 
> 赞同：3
> 
> 时间：2012-11-13T14:08:14.717
> 
> 标签：ruby-on-rails-3, heroku, web-analytics

我正在考虑谷歌分析，但我的问题是我不拥有我的数据。数据始终存储在谷歌的服务器中，我也不太信任他们的脚本（他们收集的数据可能比分析所需的更多）

我阅读了有关 piwik 的信息，但它仅适用于 mySQL，heroku 使用 postgreSQL。

我发现的所有网络分析软件都适用于 php 或 mySQL。

此外，谷歌分析，在heroku和PG上获取用户分析的好解决方案是什么？我希望有一个heroku插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T02:53:33.947

如果有人仍然想知道，您可以使用 ClearDB，如果您真的想在 Heroku 上使用 Piwik，它是一个提供 MySQL 数据库即服务产品的 Heroku 插件。

[https://addons.heroku.com/cleardb](https://addons.heroku.com/cleardb)

# javascript - 如何通过 AJAX Select2 下拉加载结果

> ID：13362184
> 
> 赞同：11
> 
> 时间：2012-11-13T14:08:21.603
> 
> 标签：javascript, jquery, ajax, jquery-select2

我有一个简单的 select2 框，它加载一个下拉菜单。

但是，每次使用 AJAX 调用的结果打开选择菜单时，重新加载下拉菜单的最佳方法是什么？ajax 调用将返回

```
<option value=1>
<option value=2> 
```

等等

我已经浏览了 select2 文档上的 AJAX 示例，但对于我需要的东西来说，它看起来有点过于复杂。TIA

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-04T12:33:26.293

假设你有 html

```
 <p>
    Hidden field value set in the following format:
    <br />
    <em>'34:Donnie Darko,54:Heat,27:No Country for Old Men'
    </em></p>
<input type='hidden' id="e6" style="width: 500px;" value="34:Donnie Darko,54:Heat,27:No Country for Old Men"  />
<br /> <button id="save">Save</button>
<p>
After it's initialised, the hidden field value will change to:<br />
<em>'34,54,27'</em>
<br />
That is the value sent to the server
</p>​ 
```

对于 select2 Ajax

```
function MultiAjaxAutoComplete(element, url) {
    $(element).select2({
        placeholder: "Search for a movie",
        minimumInputLength: 1,
        multiple: true,
        id: function(e) { return e.id+":"+e.title; },
        ajax: {
            url: url,
            dataType: 'json',
            data: function(term, page) {

                return {
                    q: term,
                    page_limit: 10,
                    apikey: "z4vbb4bjmgsb7dy33kvux3ea" //my own apikey
                };
            },
            results: function(data, page) {
                alert(data);
                return {
                    results: data.movies
                };
            }
        },
        formatResult: formatResult,
        formatSelection: formatSelection,
        initSelection: function(element, callback) {
            var data = [];
            $(element.val().split(",")).each(function(i) {
                var item = this.split(':');
                data.push({
                    id: item[0],
                    title: item[1]
                });
            });
            //$(element).val('');
            callback(data);
        }
    });
};

function formatResult(movie) {
    return '<div>' + movie.title + '</div>';
};

function formatSelection(data) {
    return data.title;
};

MultiAjaxAutoComplete('#e6', 'http://api.rottentomatoes.com/api/public/v1.0/movies.json');

$('#save').click(function() {
    alert($('#e6').val());
}); 
```

尝试用这个做multiajax调用！参考 - [http://jsfiddle.net/JpvDt/112/](http://jsfiddle.net/JpvDt/112/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T07:08:01.460

尝试这个：

```
 $(document).ready(function () {
        $('#Registration').select2({
            placeholder: 'Select a registration',
            allowClear: true,
            ajax: {
                quietMillis: 10,
                cache: false,
                dataType: 'json',
                type: 'GET',
                url: '@Url.Action("GetItems", "ItemsController")', //This asp.net mvc -> use your own URL
                data: function (registration, page) {
                    return {
                        page: page,
                        pageSize: 100,
                        registration: registration,
                        otherValue: $("#OtherValue").val() // If you have other select2 dropdowns you can get this value
                    };
                },
                results: function (data, page) {
                    var more = (page * pageSize) < data.total; // whether or not there are more results available
                    return { results: data.dataItems, more: more }; // notice we return the value of more so Select2 knows if more results can be loaded
                }
            },
            formatResult: FormatResult,
            formatSelection: FormatSelection,
            escapeMarkup: function (m) { return m; }
        });
    });

    function FormatResult(item) {
        var markup = "";
        if (item.name !== undefined) {
            markup += "<option value='" + item.id + "'>" + item.name + "</option>";
        }
        return markup;
    }

    function FormatSelection(item) {
        return item.name;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T12:43:19.417

请参阅[Select2 网页上的](http://ivaynberg.github.com/select2/#ajax)**加载远程数据**示例。

每次打开时，它将使用 ajax 动态加载选择列表中的选项。

```
$("#e6").select2({
        placeholder: "Search for a movie",
        minimumInputLength: 1,
        ajax: { // instead of writing the function to execute the request we use Select2's convenient helper
            url: "http://api.rottentomatoes.com/api/public/v1.0/movies.json",
            dataType: 'jsonp',
            data: function (term, page) {
                return {
                    q: term, // search term
                    page_limit: 10,
                    apikey: "ju6z9mjyajq2djue3gbvv26t" // please do not use so this example keeps working
                };
            },
            results: function (data, page) { // parse the results into the format expected by Select2.
                // since we are using custom formatting functions we do not need to alter remote JSON data
                return {results: data.movies};
            }
        }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-13T12:32:20.403

这将帮助你

```
$(document).ready(function(){

 $("#selUser").select2({
  ajax: { 
   url: "getData.php",
   type: "post",
   dataType: 'json',
   delay: 250,
   data: function (params) {
    return {
      searchTerm: params.term // search term
    };
   },
   processResults: function (response) {
     return {
        results: response
     };
   },
   cache: true
  }
 });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-09T17:43:58.017

如果您尝试在默认情况下使用预加载的 JSON 显示下拉菜单，那么当您单击归档时，您希望显示包含填充数据的下拉菜单，而无需输入单个字母，设置**minimumInputLength: 0**并且工作方式类似于一种魅力。

如果您的任务是“使用 select2 在焦点上加载 JSON”，它将触发 JSON。

我添加了代码，但由于无法使用 AJAX 在片段中远程检索 JSON，我无法使片段工作。

*请记住，这是您添加到代码中的解决方案，不要使用下面列出的解决方案。我用它来描述修复。*

* * *

```
 $(".myContainer").select2({
    ajax: {
      url: 'myJSONpath',
      dataType: 'json',
      delay: 250,
      data: function(params) {
       return {
         q: params.term, // search term
         page: params.page
       };
      },
     minimumInputLength: 0, // so here is a trick 0 will trigger ajax call right when you click on field
     processResults: function(data, params) {
       //process your results  
     }, 
```

....因此继续使用您的其他属性...

# android - 如何获取下一个 3 个月的日期 Android

> ID：13362186
> 
> 赞同：1
> 
> 时间：2012-11-13T14:08:21.330
> 
> 标签：android, date, calendar

我使用此代码获取今天的日期并显示它

```
m_today = Calendar.getInstance(); 
```

现在我怎样才能得到下一个 3 个月的日期？像这样的东西：

2012 年 11 月 21 日至 2013 年 2 月 21 日

我可以显示第一部分，但如何显示第二部分？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T14:10:53.727

这应该工作，

```
Calendar cal = Calendar.getInstance(); //Get the Calendar instance
cal.add(Calendar.MONTH,3);//Three months from now
cal.getTime();// Get the Date object 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T14:11:05.130

```
m_today.add(Calendar.MONTH, 3); 
```

# mysql - 如何使用数据库中未定义的变量创建 mysql_query

> ID：13362188
> 
> 赞同：-1
> 
> 时间：2012-11-13T14:08:27.303
> 
> 标签：mysql

我有一个正在执行 mysql 查询的 C 代码。但是现在我想更新程序中我无法执行的特定列。谁能帮帮我吗。

```
conn = mysql_init(NULL);   // MySQL Database connection //
mysql_real_connect(conn, NULL, NULL, NULL, "bypass_new", 0, NULL, 0);
mysql_query(conn, "SELECT txnum, rxnum from data");
result = mysql_store_result(conn);
num_fields = mysql_num_fields(result);
k = 0;      

while ((row = mysql_fetch_row(result)))
{
  if(row[0])(p_info + k)->callingP   = row[0];
  if(row[1])(p_info + k)->calledP    = row[1];
  mysql_query(conn, "update data set flag_imei=1 where txnum=row[0]");
  k++;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:30:37.757

尝试以下伪代码想法，它比您提到的更快和优化：

```
 k = 0;      
 myIDsArray = array();

 while ((row = mysql_fetch_row(result)))
 {
   if(row[0])(p_info + k)->callingP   = row[0];
   if(row[1])(p_info + k)->calledP    = row[1];

   myIDsArray.addId(row[0]);

   k++;
 }

  myString = [myIDsArray joinByString:","];
  myQuery = "update data set flag_imei=1 where txnum in ( " . myString . " ) ";
  mysql_query(conn, myQuery); 
```

# ssas - 如何对状态与 MDX 中的条件匹配的金额求和，并且在按该描述进行切片时将了解上下文？

> ID：13362193
> 
> 赞同：1
> 
> 时间：2012-11-13T14:09:02.073
> 
> 标签：ssas, mdx

我需要对状态等于特定值（例如“已支付”）的金额求和。在按该维度进行切片时，还需要注意。

目前我有这个：`([Measures].[Amount], [Status].[Description].[Paid])`

但是当我按状态描述切片时，它会显示`Paid`所有状态描述的数量。

对于 where `Status.Description`= 'Unpaid' 等，它应该显示 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:06:02.343

你可以用它切片

```
except(Status.Description.children, Status.Description.Paid)
```

并且总和可以通过计算的度量来确定，例如

```
with <sum> as sum(measure.amount)
```

如果它没有自动聚合。

# android - CalledFromWrongThreadException：只有创建视图层次结构的原始线程才能接触其视图

> ID：13362195
> 
> 赞同：0
> 
> 时间：2012-11-13T14:09:08.713
> 
> 标签：android

我尝试使用线程更改 ListView 适配器的值，但它引发异常 CalledFromWrongThreadException 任何人都可以调用更改任何 View 元素值的线程吗？这是我的代码：

```
new Thread(new Runnable(){

    public void run() 
    {
        ap=(ArrayList<Application>) getBoughtApps(android_id);
        adapter1 = new MyCustomAdapter(ap);
        listView = ( ListView ) MainActivity.this.findViewById(R.id.listview);
            changeAdapter();    
    }
}).start(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:13:06.737

**第一个选项：**

使用[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html)从非 Ui 线程更新 UI。将您的代码更改为：

```
new Thread(new Runnable(){

    public void run() 
    {
      ap=(ArrayList<Application>) getBoughtApps(android_id);
       Current_Activity.this.runOnUiThread(new Runnable() {
         public void run() {

           adapter1 = new MyCustomAdapter(ap);
           listView = ( ListView ) MainActivity.this.findViewById(R.id.listview);
           changeAdapter(); 
          //Your code here..
         }
       });

    }
}).start(); 
```

* * *

**第二种选择：**

您可以使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)而不是线程来进行网络操作，或者如果应用程序需要从后台更新 Ui。`AsyncTask`您可以使用as更改当前代码：

```
private class CallwebTask extends AsyncTask<Void, Void, String>
{

    protected ArrayList<Application> doInBackground(String... params) 
    {
        ap=(ArrayList<Application>) getBoughtApps(android_id);
        return ap; // Return ArrayList<Application>
    }

    protected onPostExecute(ArrayList<Application> result) {
        Log.i("OnPostExecute :: ", String.valueOf(result.size()));
        //Put UI related code here
        adapter1 = new MyCustomAdapter(result);
        listView = ( ListView ) MainActivity.this.findViewById(R.id.listview);
        changeAdapter(); 
    }
} 
```

并开始`AsyncTask`将这一行放在开始线程的位置：

```
new CallwebTask().execute(); 
```

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:12:55.267

视图只能由 UI 线程访问。您可以从 runonUIThread 块尝试相同

```
runOnUiThread(new Runnable() {
    public void run() {
          ap=(ArrayList<Application>) getBoughtApps(android_id);
        adapter1 = new MyCustomAdapter(ap);
        listView = ( ListView ) MainActivity.this.findViewById(R.id.listview);
            changeAdapter();   
    }
}); 
```

# php - 调用带参数的静态函数作为回调

> ID：13362198
> 
> 赞同：0
> 
> 时间：2012-11-13T14:09:18.440
> 
> 标签：php

我正在尝试将静态函数作为带参数的回调传递，因为我使用的是旧版本的 PHP，我不能使用匿名函数，因为它是在原始代码[https://github.com/bobthecow/mustache 中完成的。 php/wiki](https://github.com/bobthecow/mustache.php/wiki)，在“使用所有这些选项”部分。

```
class SampleClass {

    function __construct( ) {

    }

    static function generateHTML($markup, $data) {
        require_once( 'lib/Mustache/Autoloader.php' );

        Mustache_Autoloader::register();

        $mengine = new Mustache_Engine(array(
            'escape' => /* Here I need to pass escapeMustache function */
        ));

        $renderer = new TempRenderer($data, false);
        echo $mengine->render($markup, $renderer);
    }
    static function escapeMustache($value) {
        return $value;
    }

} 
```

传递自定义转义功能的最佳方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:18:32.693

感谢@MichaelBerkowski

```
Mustache_Engine(array('escape' => array('SampleClass','escapeMustache')) 
```

# .net - 覆盖以前安装的 .NET winforms 应用程序

> ID：13362201
> 
> 赞同：3
> 
> 时间：2012-11-13T14:09:33.207
> 
> 标签：.net, vb.net, winforms

抱歉，如果以前有人问过这个问题，我已经搜索过但找不到答案。我创建了一个 WinForms VB.NET 应用程序，并使用 Visual Studio 发布工具将其部署到服务器。在它自动安装到该目录的服务器上：

> “C:\Documents and Settings\Administrator\Local Settings\Apps\2.0\C8TQL85O.NPG\WDKBJDPD.HQO\expi..tion_550653a49cafdf54_0001.0000_dd22cceef4d5bb47\MyReport.exe”

今天我对应用程序进行了一些更改，并再次部署它。在我安装它的服务器上，它自动安装在这个目录中：

> “C:\Documents and Settings\Administrator\Local Settings\Apps\2.0\C8TQL85O.NPG\WDKBJDPD.HQO\expi..tion_550653a49ca0b3f4_0001.0000_dd22cceea4d5cc47\MyReport.exe”

一开始我错过了，但是第二个目录与第一个目录*略有*不同。我现在是否无意中安装了重复的应用程序，所以安装了两个版本？

如果是这样，我如何让应用程序安装程序覆盖以前的版本？

此外，我使用 Windows 任务计划程序来启动 .EXE，这意味着我需要不断更新它以匹配目录。是否可以安装到保持不变的特定目录中？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T19:31:15.333

如果您要发布到将安装此应用程序的网络驱动器，实际上并不难。

*   使用发布向导：Build Menu -> Publish "Project Name Here"

*   选择应用程序文件将发布到的网络驱动器路径

*   在以下菜单中，选择“来自 UNC 路径或文件共享”，并选择与前一个屏幕相同的路径。

*   接下来，根据您项目的用途，您将选择应用程序的离线首选项。我通常选择是。单击下一步，然后完成。

当用户从 UNC 路径安装应用程序时，他们会在开始菜单中看到一个图标（如果您在离线首选项上选择了“是”），他们可以从那里运行它。exe 本身将位于一个文件夹中，就像您可以使用 Windows 调度程序定位的问题中的那个文件夹，但您将不得不去找到它。

# oracle - 查询 Oracale 数据库并在 Splunk 上显示结果

> ID：13362203
> 
> 赞同：0
> 
> 时间：2012-11-13T14:09:52.487
> 
> 标签：oracle, oracle-sqldeveloper, splunk, splunk-dashboard, splunk-dbconnect

有谁知道是否可以使用像 Splunk 这样的应用程序查询数据库并在仪表板中表示数据？我正在查询一个 Oracle 数据库，因为我看到 Splunk 有一些用于 MySQL 等的插件。

史蒂文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:18:43.047

Splunk Base 中即将发布一个与[SQL 无关的应用程序。](http://splunk-base.splunk.com/apps/50803/dbx-sql-database-extension)

同时，您可以使用[此示例](http://docs.splunk.com/Documentation/Splunk/5.0/AdvancedDev/ScriptExample#Script_example.2C_poll_a_database_.28Python.29)来使事情顺利进行。

我想出了它的一个变体，它从给定目录的所有子目录中读取任何 .yaml 文件（以及所有必要的数据库和查询数据），并将结果转储到由 Splunk 持续监控的 .csv 文件中。

# php - 可以从 php/c 文件中创建 sql 函数

> ID：13362208
> 
> 赞同：0
> 
> 时间：2012-11-13T14:10:06.317
> 
> 标签：php, mysql

我的数据库中有一个表，其中一个字段由 php 函数编码。现在我需要制作一个函数来解码mysql端的那个字段。像这样的东西：

```
SELECT permissions,decodePermission(id,permissions) as decoded_permissions FROM table 
```

我尝试`CREATE TABLE`在 mysql 中使用，但它非常弱，并且在 sql 中我没有像**explode()**、**base64_decode()**、**md5()**这样的函数（存在于 php 中）。所以现在我想知道是否可以从 php、c 或 perl 文件在 mysql 中创建一个函数？像这样的东西：`LOAD FILE 'path/to/c/file'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:14:08.263

不可能通过 php /c 创建函数。你使用了什么样的编码？有哪些功能？

无论如何，Mysql 中有加密函数。看看这里[https://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html](https://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html)

如果您不使用 ssl，从 mysql 获取解密数据也不是很安全

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:24:50.367

使用您选择的语言从加密的 MySql 中获取数据。理想情况下，您希望通过安全连接（环回、vpn 或至少 SSL）获取它。根据需要解密。旨在使用标准加密方法。

很多时候不是加密/解密，而是使用陷阱散列 - 结果被加密并在加密状态下进行比较。这是检查重复现象（即密码）的理想选择。

# ruby-on-rails - ember-data DS.attr 的动态数量

> ID：13362214
> 
> 赞同：2
> 
> 时间：2012-11-13T14:10:22.493
> 
> 标签：ruby-on-rails, mongodb, ember.js, ember-data, mongomapper

所以我有一个 ember-data 模型，我希望我的用户能够为每个项目创建不同/更多的 DS.attr 并随意调用它们。然后这会将json发送到我使用mondodb的rails服务器。然后我可以检查是否定义了密钥，如果没有为该文档创建它并将其保存在 mongo.xml 中。

问题是您必须在扩展 DS.Model 时对所有 DS.attr 进行硬编码，但那时我并不了解它们。

有没有办法重新打开 DS.Model 并以某种方式循环传递的 json 键（或者我可以将 allKeys 字段中的所有键从 rails 传递给客户端？？？）。

那么当有人想要创建不同的属性时，我可以动态地重新打开模型并添加这个 DS.attr 吗？

任何人有任何想法如何做到这一点，或者如果它甚至可能？

任何帮助、例子或想法都会很棒！

非常感谢瑞克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:49:36.643

假设您有一个`App.Post`模型并且您希望您的用户为帖子存储额外的属性。首先创建一个模型`App.MyModelTypes`并将所有模型类型存储在其中：

```
App.MyModelTypes = DS.Model.extend({
  modelType: DS.attr('string') // e.g. App.Post, App.Comment
  attributes: DS.hasMany('App.Attribute')
}); 
```

那么你`App.Post`应该喜欢：

```
App.Post = DS.Model.extend({
  title: DS.attr('string'),
  body: DS.attr('string'),
  // ... other base attributes
}); 
```

定义模型`App.Attribute`如下：

```
App.Attribute = DS.Model.extend({
  name: DS.attr('string')
  attrType: DS.attr('string'),

  theModelType: DS.belongsTo('App.Model'),
  attributeValues: DS.hasMany('App.AttributeValue')
}); 
```

当用户为 post 创建一个新属性时，应用程序应该创建一个`App.Attribute`属于 App.MyModelType的新属性`App.Post`。

最后，您需要一个模型来存储 Posts 的自定义属性值：

```
App.AttributeValue = DS.Model.extend({
  theModelType: DS.belongsTo('App.MyModelTypes'),
  targetId: DS.attr('number'),
  attribute: DS.belongsTo('App.Attribute'),
  value: DS.attr('string') // attribute.attrType will give us the type 
}); 
```

当用户编辑某个帖子的属性值时，您将`post.id`in `targetId`、 in `theModelType`you store`App.Post`等存储起来。

让我知道这是否适合你。

# jquery - 每次窗口调整大小时，jquery都会重复触发函数 - 但应该只执行一次

> ID：13362235
> 
> 赞同：0
> 
> 时间：2012-11-13T14:11:35.437
> 
> 标签：jquery, function, resize, window, width

我想用一些占位符 PNG 填充文章列表中的空白。如果窗口大小为 320，则需要填充奇数个项目 -> 1 个占位符。

如果窗口大小大于 320 并且只列出一篇文章或列出偶数篇文章，则应添加一或两个占位符。

工作正常，但脚本总是触发占位符，每次窗口大小发生变化。

这里是：

```
$(document).ready(function() {

//the first loaded articlelist
var str = $('.item').length;
var width = $(window).width();

if ((str % 2) != 0 && width == 320) {
$('div.item').last().after('<div class="filler"></div>');
}
if ((str % 3) === 1 && width > 320) {
$('div.item').last().after('<div class="filler"></div><div class="filler"></div>');
}
if ((str  % 3) === 2 && width > 320) {
$('div.item').last().after('<div class="filler"></div>');
}

$(window).resize(function(){
    if($(this).width() != width){
        width = $(this).width()
        if ((str % 2) != 0 && $(window).width() == 320) {
        $('div.item').last().after('<div class="filler"></div>');
    }
    if ((str % 3) === 1 && $(window).width() > 320) {
        $('div.item').last().after('<div class="filler"></div><div class="filler"></div>');
    }
    if ((str  % 3) === 2 && $(window).width() > 320) {
        $('div.item').last().after('<div class="filler"></div>');
    }
    }
});
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:15:55.493

[Jquery .one()](http://api.jquery.com/one/)应该可以解决您的问题，它只允许执行一次绑定函数

```
$(window).one("resize", function(){...} 
```

# javascript - 在 alfresco 中创建扁平文件夹别名

> ID：13362236
> 
> 赞同：1
> 
> 时间：2012-11-13T14:11:37.273
> 
> 标签：javascript, directory, alfresco

我不是非常精通Javascript。尽管如此，我需要找到一种方法来为 Alfresco 创建一个 webscript，它创建一个文件夹（空间）[B] 的别名 [A]。

如果 [B] 看起来像 companyhome/site/special/my/fo/ld/de/r，

[A] 应该看起来像 companyhome/site/myfolder

并成为指向 [B] 的别名（辅助节点父节点？）。

我希望在创建新文件夹时执行此 webscript `companyhome/site/special/`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:57:06.710

为什么需要执行 webscript？如果您使用存储库 JavaScript API 编写一些 JavaScript 并将其放入公司主页 > 数据字典 > 脚本，那么您可以触发它基于规则运行。

如果您确实需要调用外部 URL，那么您可以按照[Alfresco 中 WebScript 的 HTTP 请求中](https://stackoverflow.com/questions/7282660/http-request-from-webscript-in-alfresco)记录的方法从您的 JavaScript 操作中执行此操作。

# c# - C# 在 C++ 中只读（与 const 的细微差别）

> ID：13362238
> 
> 赞同：4
> 
> 时间：2012-11-13T14:11:40.870
> 
> 标签：c#, c++, constructor, constants, readonly

`readonly`关于在 C# 中提到的 C++ 等价物有很多问题`const`。但是，到目前为止，据我所知，我没有发现实际上是正确的，甚至没有提到我在这里所追求的细节。

[可以在 ctor ( spec](http://msdn.microsoft.com/en-us/library/aa645752%28v=vs.71%29.aspx) )中设置（甚至多次）只读字段。这允许在最终决定值之前执行各种操作。另一方面，C++ 中的 const 行为略有不同（在 C++ 和 C# 中），因为它需要在 ctor 运行之前提供最终值。

有没有办法仍然实现`readonly`C++ 中的行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T14:14:51.927

是的，使用`const`- 在编译时不必知道该值：

```
struct X
{
    const int a;
    X(int y) : a(y) {}
};

//...
int z;
cin >> z;
X x(z);   //z not known at compile time
          //x.a is z 
```

另一种选择是使用用户定义的结构，它只允许设置一次，但这太过分了（而且你可能无法在编译时强制执行）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T14:16:40.020

并不真地。

您可以做的是保护一个字段，以便它必须由 getter 访问（至少从外部），并且您可以为它创建一个只允许调用一次的 setter。

否则，`const`是你最好的选择。

# iphone - 从设置包中检索切换开关值

> ID：13362241
> 
> 赞同：5
> 
> 时间：2012-11-13T14:11:58.393
> 
> 标签：iphone, objective-c, ios, xcode, settings.bundle

我需要在名为 background 的第一个 ViewController 的 UIImageView 中加载不同的背景图像，这取决于 Settings Bundle 中用于切换开关的设置。

在 ViewController.m 中的 -viewWillAppear

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
id toggleSwitchValue = [defaults objectForKey:@"PSToggleSwitchSpecifier"];
BOOL boolToggle = [toggleSwitchValue boolValue];

// setting custom back for viewController
if (boolToggle == YES) {
    [self.backGround setImage:[UIImage imageNamed:@"1.png"]];
    NSLog(@"YES");
} else if (boolToggle == NO) {
    [self.backGround setImage:[UIImage imageNamed:@"2.png"]];
    NSLog(@"NO");
} 
```

我没有警告，但我无法设置将使用的图像。

有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:02:03.010

确保如果视图是从 nib 加载的，则在 viewDidLoad 中或之后修改视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:17:22.413

确保您的 IBOutlet 连接正确并使用 [background setImage:] 而不是点表示法。如果两者都不起作用，则您的逻辑或 userDefault 值的设置/读取存在问题。

# sql - 如何在触发器 oracle 中获取所有已删除或更新的行

> ID：13362242
> 
> 赞同：2
> 
> 时间：2012-11-13T14:12:03.033
> 
> 标签：sql, oracle, triggers

我怎样才能得到触发器中所有受影响的行。

在 sybase 中有一个“已删除”表，它在删除和更新语句期间存储受影响行的副本

[sybase 文档](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.sqlug/html/sqlug/sqlug813.htm)

oracle 中是否有在表级触发器中执行相同操作的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:21:37.083

您可以在触发器中使用`new`和值：`old`

```
CREATE OR REPLACE TRIGGER trigger_name
  BEFORE DELETE OR UPDATE ON table_name
  FOR EACH ROW
BEGIN    
    dbms_output.put('Old: ' || :old.column);
    dbms_output.put('New: ' || :new.column);
END;
/ 
```

它与 sybase 中的不同，但它正是您要寻找的。

[在这里](http://docs.oracle.com/cd/A97630_01/appdev.920/a96590/adg13trg.htm)您可以找到更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T20:12:59.633

我在 Oracle 中知道的“已删除”表没有类似物。

根据您需要执行的操作，您可以使用[复合触发器](http://www.oracle-base.com/articles/11g/trigger-enhancements-11gr1.php#compound_triggers)在受语句影响的行上完成基于集合的操作，如 Tim Hall 的[oracle-base 站点](http://www.oracle-base.com/articles/misc/database-triggers-overview.php#compound)中所述。使用这种方法，您可以定义累积（例如）一个值或计数的行级触发器，将其存储在触发器的全局部分，并在触发器的 AFTER INSERT|UPDATE|DELETE 部分中访问这些值。全局变量在所有触发点的整个持续时间内保持定义。

然而，当触发器变得如此复杂时，我不太喜欢基于触发器的解决方案，而是将代码放在应用程序包/过程/函数中。

# entity-framework - 在 LINQ 中使用带有 MAX 函数的子查询

> ID：13362249
> 
> 赞同：3
> 
> 时间：2012-11-13T14:12:33.270
> 
> 标签：entity-framework

我是 Entity Framework 的新手，所以在将普通 SQL 语句转换为 LINQ 时遇到了很多问题。以下示例是我必须做的很多事情，但我似乎无法找到解决方案......

SQL 语句：

```
SELECT * 
  FROM MyTable Table1
 WHERE Table1.Column1 = 1
   AND Table1.Column2 = 2
   AND Table1.SequenceNr = (SELECT MAX(Table2.SequenceNr) 
            FROM MyTable Table2
                  WHERE Table2.Column1 = 1
             AND Table2.Column2 = 2) 
```

==> 我有一个表（不是我的 :-)），其中包含 3 个要链接的重要列：2 个数字和一个序列号（用于保留某种历史记录）。==> 我主要需要序列号最高的记录（“最后一个”），我用上面的查询来解决它。

但是我怎样才能在 Linq (VB) 中做到这一点？我已经有了这样的东西：

```
Dim blah = (From oTmp In oDB.MyTable
           Where oTmp.Column1 = 1 And _
                 oTmp.Column2 = 2 And _
                 oTmp.SequenceNr = oDB.MyTable.Max(Function(x) x.SequenceNr)
          Select oTmp).ToList 
```

有人有什么想法吗？:)

问候，吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:23:30.530

您只需要添加`Where()`对该内部查询的调用：

```
oTmp.SequenceNr = oDB.MyTable.Where(Function(x) x.Column1 = 1 And x.Column2 =2)
                             .Max(Function(x) x.SequenceNr) 
```

# android - 如何知道 APK 文件是否比安装的更新？

> ID：13362255
> 
> 赞同：1
> 
> 时间：2012-11-13T14:12:43.677
> 
> 标签：android, apk, android-applicationinfo

我正在制作一个要从我自己的主页更新的应用程序。我做了更新程序并且工作正常。

现在，我希望仅当我页面上的 APK 比已安装的更新时才能继续更新。更新，我的意思是安装日期更新，或者 APK 的大小不同。我总是忘记更新版本名称...

所以：我如何检索已安装 APK 的安装日期，或已安装 APK 文件的日期，或 APK 的大小（/data/app 目录需要 root 访问权限，我不希望我的用户需要）？

我知道 ApplicationInfo 和 PackageManager，但在他们的文档中没有找到我需要的信息。

谢谢！L.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:12:47.320

自己找出答案。有兴趣的请看下文。

```
public long appinfo(String pkg){
    PackageManager p = context.getPackageManager();
    long labeldate = 0;
    try {
        PackageInfo label = p.getPackageInfo(pkg, 0);
        labeldate = label.lastUpdateTime;
    } catch (NameNotFoundException e) {
        e.printStackTrace();
    }
    return labeldate;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:22:36.210

我认为[这个 SO Answer](https://stackoverflow.com/questions/5311644/get-application-installed-date-on-android)就是你要找的。

仅供参考，您可能应该使用[Android 的版本控制实践。](http://developer.android.com/tools/publishing/versioning.html)这似乎是一种适得其反的解决方法，试图不必记住升级一个版本。最终，安装日期和 .apk 的大小永远不会确定您的应用程序是新的还是旧的，因为如果您删除代码，.apk 的大小可能会缩小，而且有人可能有一个更旧的版本，但是在您寻找的任何最短日期之后安装它。

我建议使用版本代码而不是版本名称来确定应用程序是否较新，因为版本名称可以是任意字符串，但版本代码是一个简单的整数比较。[这是一个明确的 SO 示例](https://stackoverflow.com/questions/3874775/detect-my-apps-own-androidversioncode-at-run-time)。

# android - Android：按下主页按钮后未调用 onResume()

> ID：13362259
> 
> 赞同：0
> 
> 时间：2012-11-13T14:13:09.930
> 
> 标签：android, android-activity, lifecycle, oncreate, onresume

我有一个在启动时调用远程服务器的活动。问题是，当应用程序在后台，并且服务器创建新内容时，在恢复我的应用程序时，除非应用程序被终止并重新启动，否则不会看到这些新内容。

我将从服务器获取所有这些信息的代码放在“onResume()”方法中，该方法在应用程序被终止并重新启动时起作用，但如果它只发送到后台按下主页按钮则不起作用。

为什么'onResume()'方法没有被调用？我该怎么做才能调用它？

提前非常感谢！

这是我的代码：

```
@Override
    protected void onResume() {
        super.onResume();
        Server server = new Server(this);
        server.GetHighlights(10, 0, null);
        server.GetNews(10, 0, null);
        server.GetBrands(12, 0, null);
        Log.i("XS2", "Resume");
    }

    public void onCreate(Bundle icicle) {
        Log.i("XS2", "Create");
        super.onCreate(icicle);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.splash_media_player);
        mPreview = (VideoView) findViewById(R.id.surface);
        if (mPreview != null) {
            mHolder = mPreview.getHolder();
            mHolder.addCallback(this);
        }

//      Server server = new Server(this);
//      server.GetHighlights(10, 0, null);
//      server.GetNews(10, 0, null);
//      server.GetBrands(12, 0, null);

        // google analytics set up
        AnalyticsHelper.initializeTrackerInstance(getApplicationContext());
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:56:37.763

是的，问题出在我身上：我的活动重定向到一个片段（它是一个飞溅活动，当它完成时，它将启动片段）。我应该在这个片段中放置“onResume()”。

感谢大家的帮助！

# android - onItemLongClick 有效， onItemClick 无效

> ID：13362263
> 
> 赞同：0
> 
> 时间：2012-11-13T14:13:16.767
> 
> 标签：android, expandablelistview, onitemclicklistener

我有一个 ExpandableListView ，它有普通和长按的侦听器，如下所示：

```
 expandableListView.setOnItemClickListener(new AdapterView.OnItemClickListener()
    {
        @Override
        public void onItemClick(AdapterView<?> adapterView, View view, int position, long id)
        {
        ...
        }
    });
    expandableListView.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener()
    {
        @Override
        public boolean onItemLongClick(AdapterView<?> adapterView, View view, int position, long id)
        {
        ...
        }
    }); 
```

奇怪的是，长项目点击监听器被调用，但正常的没有。长按返回什么或长按是否已注册都没有关系。

普通的点击监听器有什么特别之处吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:19:28.183

你不能使用 OnItemClickListener！这就是[ExpandableListView的重点](http://developer.android.com/reference/android/widget/ExpandableListView.html)

itemClick 用于展开/折叠组。你应该使用`OnChildClickListener`.

但是，您可以使用[setOnChildClickListener(ExpandableListView.OnChildClickListener onChildClickListener)](http://developer.android.com/reference/android/widget/ExpandableListView.html#setOnChildClickListener%28android.widget.ExpandableListView.OnChildClickListener%29)和[setOnGroupClickListener(ExpandableListView.OnGroupClickListener onGroupClickListener)的任意组合](http://developer.android.com/reference/android/widget/ExpandableListView.html#setOnGroupClickListener%28android.widget.ExpandableListView.OnGroupClickListener%29)

# c# - 为什么我在 asp 图像控件中的图片看起来被压扁了？

> ID：13362266
> 
> 赞同：1
> 
> 时间：2012-11-13T14:13:27.393
> 
> 标签：c#, asp.net, image

我有一个 asp.net c# 网页。在页面上，我有一个图像框，它将每 5 秒左右随机显示一张图像。问题是，有些图片看起来被压扁了。所有图片均已在 Photoshop 中裁剪为 350x350 像素，图像框大小为 350x350 像素。如果您使用其他程序查看图片，它们看起来不错，但在 asp.net 页面上它们看起来很有趣。有人可以告诉我哪里出错了吗？

谢谢，克雷格

这是在 IE 中呈现的源代码，但它看起来与我在 asp.net 默认页面中的内容完全不同。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head><title>
    Home Page
</title><link href="Styles/Site.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <form method="post" action="Default.aspx" id="ctl01">
<div class="aspNetHidden">
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTE5NTc5Mjg4MDYPZBYCZg9kFgICAw9kFgICAw9kFgICAw8WAh4HRW5hYmxlZGdkZESHdPrJrv0fd90yot44IdP2LuG176cv2XyHWiPVlPSh" />
</div>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['ctl01'];
if (!theForm) {
    theForm = document.ctl01;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>

<script src="/WebResource.axd?d=DogTP9ciF8js-919lyE5BNUR3gLIy6vQ94IA8ujQqufPbSjgjYs-MB8TFhgGkZbCezg2T7MihOn_QzXNJh8bUbKXvUZPuDq-Zo79nPbUosQ1&amp;t=634856347325009875" type="text/javascript"></script>

<script src="/ScriptResource.axd?d=4jTc4W6vHbFONhMZfZEniQ0ll2ox3vAxSkMzYB-7HtakDqsmhXCZFBXSRwOb1nRWK6CMzP0qyRYdnYMNnTFXhx2r0J9E2ik7kM8XVmq_UBEPDXqK-kLCJqvRQAvq0wv0ZlWQS1gCjlQxcxLhV1XrJQ2&amp;t=150492e7" type="text/javascript"></script>
<script src="/ScriptResource.axd?d=GHu6blHeASt9skHbsJx4uFWYiLKvlA8B1V1ZT8jJM7xJFl3ycZATlv3IHRrGJMm_fpPlBSBh8s1B1E7r9viSf2_vG2Xab8vHZGZqr8izsLUD5pjhbTenZ9dImmZEGONdwrT5ungX3KYzAap2ByhMGQe1RCN4HIeWzLfx9QPaNIL_dFC2Su5ez5Ui0Ux0TCBs0&amp;t=ffffffff940d030f" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
if (typeof(Sys) === 'undefined') throw new Error('ASP.NET Ajax client-side framework failed to load.');
//]]>
</script>

<script src="/ScriptResource.axd?d=k0ZMcbO229cP7tJHdqfAeLLkubS_PB3nLJRGVfbZzo992j-U0QXogHZ9AeLO7yXzYa70OSzRIw-wnFwxHbCbmy30q_MrEaY-iqOTNAQzXLCt0hz--HUsMHJsrrht6bk34EjhwJc7bL5h2KjWTMIm5sDlaERrkzNMJ2CYN7WaxPRUTRyOkbTPleHmC1PMtedi0&amp;t=ffffffff940d030f" type="text/javascript"></script>
<script src="/ScriptResource.axd?d=7Pyyv_WcNl6DPXEjw9wnwQXSTOHSqlXve9fO2VxG4I-t0REk8QlK5V7QxKS7jkGO1CGno7PDXkPN1ApWod5KVH--pObLgj1ukjWVTcpKZZNJKm_Fz0qDQd_RVd2qBcBGOEo0qqVjh1A8QaUZNRMFCx12FzcYFbkEV_4FAwoZHekJoj0b0U3QdytSO2iP-U-F0&amp;t=ffffffff940d030f" type="text/javascript"></script>
    <div class="page">
        <div class="header">
            <div class="title">
                <h1>
                   My Family Web Site
                </h1>
            </div>

            <div class="clear hideSkiplink">
                <a href="#NavigationMenu_SkipLink"><img alt="Skip Navigation Links" src="/WebResource.axd?d=CEw_ah6x15SB8gE6w0h-5pVp-C_glYrwEoXIAM74CoVRv4LUELJEQWVkcLYtMPI0-_6jQVupgDDSAEIK43VxSf5HH-tcHYeqNWJ2d0U1yuU1&amp;t=634856347325009875" width="0" height="0" style="border-width:0px;" /></a><div class="menu" id="NavigationMenu">
    <ul class="level1">
        <li><a class="level1" href="Default.aspx">Home</a></li><li><a class="level1" href="About.aspx">About</a></li><li><a class="level1" href="Daniel.aspx">Daniel</a></li>
    </ul>
</div><a id="NavigationMenu_SkipLink"></a>
            </div>
        </div>
        <div class="main">

    <h2>
        Welcome To The Smith Family Web Site</h2>
    <p>
        Here you can find out all of the great things going on at the homestead.
    </p>
    <script type="text/javascript">
//<![CDATA[
Sys.WebForms.PageRequestManager._initialize('ctl00$MainContent$ScriptManager1', 'ctl01', ['tctl00$MainContent$UpdatePanel1','MainContent_UpdatePanel1'], ['ctl00$MainContent$Timer1','MainContent_Timer1'], [], 90, 'ctl00');
//]]>
</script>

    <div class="picture"> 
        <span id="MainContent_Timer1" style="visibility:hidden;display:none;"></span>
        <div id="MainContent_UpdatePanel1">

                <img id="MainContent_Image1" src="Pictures/25.JPG" align="middle" style="height:350px;width:350px;" />

</div>

    </div>

        </div>
        <div class="clear">
        </div>
    </div>
    <div class="footer">

    </div>

<script type='text/javascript'>new Sys.WebForms.Menu({ element: 'NavigationMenu', disappearAfter: 500, orientation: 'horizontal', tabIndex: 0, disabled: false });</script>
<script type="text/javascript">
//<![CDATA[
Sys.Application.add_init(function() {
    $create(Sys.UI._Timer, {"enabled":true,"interval":1500,"uniqueID":"ctl00$MainContent$Timer1"}, null, null, $get("MainContent_Timer1"));
});
//]]>
</script>
</form>
</body>
</html> 
```

这是我的 asp.net 页面中的代码：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="FamilyWebSite._Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <h2>
        Welcome To The Smith Family Web Site</h2>
    <p>
        Here you can find out all of the great things going on at the homestead.
    </p>
    <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
    <div class="picture"> 
        <asp:Timer ID="Timer1" runat="server" ontick="Timer1_Tick" Interval="1500">
        </asp:Timer>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
        <Triggers>
        <asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" />
        </Triggers>
            <ContentTemplate>
                <asp:Image ID="Image1" runat="server" ImageUrl="~/Pictures/25.JPG" 
                    Width="350px" Height="350px" ImageAlign="Middle" />
            </ContentTemplate>
        </asp:UpdatePanel>

    </div>

</asp:Content> 
```

这里也是 Site.css

```
/* DEFAULTS
----------------------------------------------------------*/

body   
{
    background: #b6b7bc;
    font-size: .80em;
    font-family: "Helvetica Neue", "Lucida Grande", "Segoe UI", Arial, Helvetica, Verdana, sans-serif;
    margin: 0px;
    padding: 0px;
    color: #696969;
}

a:link, a:visited
{
    color: #034af3;
}

a:hover
{
    color: #1d60ff;
    text-decoration: none;
}

a:active
{
    color: #034af3;
}

p
{
    margin-bottom: 10px;
    line-height: 1.6em;
}

/* HEADINGS   
----------------------------------------------------------*/

h1, h2, h3, h4, h5, h6
{
    font-size: 1.5em;
    color: #fff;
    font-variant: small-caps;
    text-transform: none;
    font-weight: 200;
    margin-bottom: 0px;
    text-align: center;
}

h1
{
    font-size: 3em;
    padding-bottom: 0px;
    margin-bottom: 0px;
    text-align: center;
}

h2
{
    font-size: 1.5em;
    font-weight: 600;
}

h3
{
    font-size: 1.2em;
}

h4
{
    font-size: 1.1em;
}

h5, h6
{
    font-size: 1em;
}

p
{
    color: #fff;
}
/* this rule styles <h1> and <h2> tags that are the 
first child of the left and right table columns */
.rightColumn > h1, .rightColumn > h2, .leftColumn > h1, .leftColumn > h2
{
    margin-top: 0px;
}

/* PRIMARY LAYOUT ELEMENTS   
----------------------------------------------------------*/

.page
{
    width: 960px;
    min-height: 800px;
    background-color: #778899;
    margin: 20px auto 0px auto;
    border: 2px solid #787878;
}

.header
{
    position: relative;
    margin: 2px;
    padding: 0px;
    background: #ccc;
    width: auto;
    text-align: center;   
    border: 2px ridge #787878;

}

.header h1
{
    width: auto;
    font-weight: 700;
    margin: auto;
    padding: 4px 4px 4px 4px;
    color: Olive;
    border: none;
    line-height: 2em;
    font-size: 2em;
    text-align: center;    
    background: #000;

}

.main
{
    padding: 0px 12px;
    margin: 12px 8px 8px 8px;
    min-height: 420px;
}

.leftCol
{
    padding: 6px 0px;
    margin: 12px 8px 8px 8px;
    width: 200px;
    min-height: 200px;
}

.footer
{
    color: #4e5766;
    padding: 8px 0px 0px 0px;
    margin: 0px auto;
    text-align: center;
    line-height: normal;
}

/* TAB MENU   
----------------------------------------------------------*/

div.hideSkiplink
{
    background-color:Olive;
    width:100%;
}

div.menu
{
    padding: 4px 2px 2px 2px;
}

div.menu ul
{
    list-style: none;
    margin: 0px;
    padding: 0px;
    width: auto;
}

div.menu ul li a, div.menu ul li a:visited
{
    background-color: #465c71;
    border: 1px #4e667d solid;
    color: #dde4ec;
    display: block;
    line-height: 1.35em;
    padding: 4px 20px;
    text-decoration: none;
    white-space: nowrap;
}

div.menu ul li a:hover
{
    background-color: #000;
    color: #465c71;
    text-decoration: none;
}

div.menu ul li a:active
{
    background-color: #465c71;
    color: #cfdbe6;
    text-decoration: none;
}

/* FORM ELEMENTS   
----------------------------------------------------------*/

fieldset
{
    margin: 1em 0px;
    padding: 1em;
    border: 1px solid #ccc;
}

fieldset p 
{
    margin: 2px 12px 10px 10px;
}

fieldset.login label, fieldset.register label, fieldset.changePassword label
{
    display: block;
}

fieldset label.inline 
{
    display: inline;
}

legend 
{
    font-size: 1.1em;
    font-weight: 600;
    padding: 2px 4px 8px 4px;
}

input.textEntry 
{
    width: 320px;
    border: 1px solid #ccc;
}

input.passwordEntry 
{
    width: 320px;
    border: 1px solid #ccc;
}

div.accountInfo
{
    width: 42%;
}

/* MISC  
----------------------------------------------------------*/

.clear
{
    clear: both;
}

.title
{
    display: inline-block;
    /*float: left;*/
    text-align: center;
    width: auto;
    border: 2px groove #fff;
    padding: 2px 2px 2px 2px;
    margin: 2px 2px 2px 2px;
}

.loginDisplay
{
    font-size: 1.1em;
    display: block;
    text-align: right;
    padding: 10px;
    color: White;
}

.loginDisplay a:link
{
    color: white;
}

.loginDisplay a:visited
{
    color: white;
}

.loginDisplay a:hover
{
    color: white;
}

.failureNotification
{
    font-size: 1.2em;
    color: Red;
}

.bold
{
    font-weight: bold;
}

.submitButton
{
    text-align: right;
    padding-right: 10px;
}

.picture
{
    padding: 2px;
    margin: 5px;
    border: 3px ridge #fff;
    height: auto;
    width: inherit;
    float: left;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:00:47.997

不要将高度和宽度设置为 asp 图像标签。由于图片已经在 Photoshop 中裁剪为 350x350。asp 图像标签将呈现具有原始高度和宽度的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T07:58:13.750

编译器没有看到编辑后的图片文件。干净的重建刷新了资源。

# c# - 尽管智能感知列出了定义，但找不到定义？

> ID：13362267
> 
> 赞同：5
> 
> 时间：2012-11-13T14:13:32.703
> 
> 标签：c#, visual-studio-2010, c#-4.0, type-inference

我在使用 Visual Studio 10（现在也是 11）时遇到了一个奇怪的错误。我有一个扩展方法

```
public static S Foo<S, T>(this S s) where S : IEnumerable<T>
{
    return s;
} 
```

现在如果我打电话

```
"".Foo(); // => 'string' does not contain a definition for 'Foo' and no extension method 'Foo' accepting a first argument of type 'string' could be found (are you missing a using directive or an assembly reference?) 
```

我根本不了解引擎盖下发生了什么。烦人的部分是**智能感知列表`Foo`为`IEnumberable<T>`s**。充其量它应该给出一个`type can't be inferred error`.

如果我这样称呼它：

```
Extension.Foo(""); // => The type arguments for method 'Extension.Foo<S,T>(S)' cannot be inferred from the usage. Try specifying the type arguments explicitly. 
```

**为什么在上述情况下无法推断类型？**

**更多的：**

假设我有：

```
public static S Foo<S, T>(this S s, T t) where S : IEnumerable<T>
{
    return s;
} 
```

如果我打电话：

```
"".Foo(1); 
```

类型推断在这里非常聪明地告诉我*`Foo`应该返回`IEnumerable<int>`而`string`不是全部！*

因此，如果编译器可以知道`Foo`期望 char 作为第一个参数，那么为什么我的第一个示例不直接编译呢？**换句话说，为什么在第一个示例中编译器知道`T`在这种情况下是 char？**

正如预期的那样，这适用于第二个示例：

```
"".Foo('l'); 
```

我只是想知道为什么不能`T`像`char`第一个示例中那样推断，毕竟 string 是`IEnumberable<char>`.

* * *

# 编辑：

我从 SLaks 那里得到了答案。但奇怪的是，考虑到编译器在公开可用方法对对象进行操作时也考虑了泛型约束，C# 没有这样做（类型推断）。

换句话说：

```
public static S Foo<S, T>(this S s)
{
    return s;
} 
```

`Foo`在所有`object`s上都可用。

```
public static S Foo<S, T>(this S s) where S : IEnumerable<T>
{
    return s;
} 
```

`Foo`在所有`IEnumerable<T>`s 上都可用，因为它**知道** `S`是`IEnumerable<T>`。所以我在想 C# 甚至会推断出`T`! 感谢大家！;)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T14:16:54.490

类型推理引擎不够聪明，无法做到这一点。

C# 类型推断只查看方法*签名*。
[通用约束不是签名的一部分](http://blogs.msdn.com/b/ericlippert/archive/2009/12/10/constraints-are-not-part-of-the-signature.aspx)。

由于`T`没有直接在签名中使用，编译器不会推断它。

# php - 正确使用带有 OOP 的 PHP MVC

> ID：13362268
> 
> 赞同：0
> 
> 时间：2012-11-13T14:13:34.060
> 
> 标签：php, correctness

上周左右我一直在阅读和学习 OOP 和 MVC，所以我想知道我是否走在正确的轨道上。

这是我目前拥有的示例：

index.php 解析从 Apache mod_rewrite (.htaccess) 传入的 URL。在这个文件中，我还首先包含了我的站点特定设置和定义的变量，然后包含了相关的控制器文件，然后是视图。

```
<?php
// Include the site specific settings
require 'includes/settings.php';

// Include the HTML page header
require LIBPATH . 'views/page_header.php';

//Code to parse the url passed in from mod_rewrite
require LIBPATH . 'controllers/' . $require_url . '.inc.php';
require LIBPATH . 'views/' . $require_url . '.php';

// Include the HTML page footer
require PUBLICPATH . 'includes/page_footer.php'; 
?> 
```

转到控制器：在这个文件中，我确保设置了 $_POST 表单，然后调用模型（类）。

```
<?php
if (isset($_POST)) {
  $loginUser = new User();
  $loginUser->email = $_POST['email'];
  $loginUser->password = $_POST['password'];
  $returnArray = (json_decode($loginUser->select(), true));
  $_SESSION['userID'] = $loginUser->userID;
  $_SESSION['firstName'] = $loginUser->firstName;
  $_SESSION['lastName'] = $loginUser->lastName;
  $_SESSION['email'] = $loginUser->email;
  // Redirect code to admin area of the site
}
?> 
```

现在模型（类）代码：

```
<?php
// Basically I'm interacting with the database and returning the data in a JSON encoded array. This is always where I check to make sure that values are set and correct before doing the database queries.
?> 
```

这是使用 MVC 和 PHP OOP 的正确方法吗？

谢谢您的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:54:54.993

我建议你使用一个框架。看看[代码点火器](http://codeigniter.com/)。它不是最好的 MVC 框架，但它是我唯一用于 php 的框架。

# sql - 在 oracle 中比较日期

> ID：13362284
> 
> 赞同：1
> 
> 时间：2012-11-13T14:15:09.457
> 
> 标签：sql, oracle

例如，我在表格行`finish`中有值：

```
20-JAN-06;
21-SEP-06;
12-FEB-10;
15-MAR-09;
03-JUL-09;
23-JAN-09; 
```

我如何将它们与它们进行比较`sysdate`？我知道这段代码不正确：

```
Select name from project where finish <= sysdate ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:19:29.897

类似的尝试因为我没有预言机来测试它

```
SELECT EMP_NAME, EMPNO
FROM EMP
WHERE TRUNC(START_DATE)  = TRUNC(SYSDATE); 
```

或者

```
SELECT emp_name, empno
FROM emp
WHERE start_date >= TRUNC(SYSDATE) 
    and start_date  < TRUNC(SYSDATE)+1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:20:01.973

为什么不使用 ANSI 标准`CURRENT_TIMESTAMP`？

```
SELECT * FROM SomeTable WHERE Finish <= CURRENT_TIMESTAMP; 
```

[在这里](http://www.sqlfiddle.com/#!4/ef9cd/4)提琴

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T14:23:11.247

```
Select name 
from project 
where to_date(finish, 'DD-MON-YY') <= trunc(sysdate) 
```

# ios - iOS 6 如何从 twitter 搜索解析 JSON

> ID：13362286
> 
> 赞同：0
> 
> 时间：2012-11-13T14:15:26.560
> 
> 标签：ios, json, parsing, twitter

我找到了关于检索 twitter 用户时间线并将它们解析为 tableviews 的很好的教程，但是如果你尝试请求 twitter 搜索，那么解析就会出错。事实是，使用时间轴 NSJSONSerialization 返回一个不错的 NSArray，而使用 twitter 搜索，您会得到一个 NSArray，其值包含所有 json 信息......有没有已知的方法来解析 twitter 搜索结果或者我应该在我自己的？

现在，如果您请求时间表，这就是您所拥有的：

```
NSURL *requestURL = [NSURL URLWithString:@"https://api.twitter.com/1.1/statuses/home_timeline.json"];
NSMutableDictionary *parameters = [[NSMutableDictionary alloc] init];
[parameters setObject:@"100" forKey:@"count"];
[parameters setObject:@"1" forKey:@"include_entities"]; 
```

JSON响应是：

```
2012-11-13 20:01:20.725 MicroDebates[1108:1a03] value is: 
{
contributors = "<null>";
coordinates = "<null>";
"created_at" = "Tue Nov 13 18:50:36 +0000 2012";
entities =     {
    hashtags =();
    urls =();
    "user_mentions" =         (
                    {
            id = 171754967;
            "id_str" = 171754967;
            indices =                 (
                3,
                13
            );
            name = "Charles Huang";
            "screen_name" = 1CharlesH;
        },
                    {
            id = 3686561;
            "id_str" = 3686561;
            indices =                 (
                74,
                89
            );
            name = "Jason L. Baptiste";
            "screen_name" = JasonLBaptiste;
        }
    );
};
favorited = 0;
geo = "<null>";
id = 268425649675460608;
"id_str" = 268425649675460608;
"in_reply_to_screen_name" = "<null>";
"in_reply_to_status_id" = "<null>";
"in_reply_to_status_id_str" = "<null>";
"in_reply_to_user_id" = "<null>";
"in_reply_to_user_id_str" = "<null>";
place = "<null>";
"retweet_count" = 1;
retweeted = 0;
"retweeted_status" =     {
    contributors = "<null>";
    coordinates =         {
        coordinates =             (
            "-73.96833024999999",
            "40.75536822"
        );
        type = Point;
    };
    "created_at" = "Tue Nov 13 18:46:30 +0000 2012";
    entities =         {
        hashtags =             (
        );
        urls =             (
                            {
                "display_url" = "instagr.am/p/R-vI40kW3-/";
                "expanded_url" = "http://instagr.am/p/R-vI40kW3-/";
                indices =                     (
                    109,
                    129
                );
                url = "http://t.co/o6armOgJ";
            }
        );
        "user_mentions" =             (
                            {
                id = 3686561;
                "id_str" = 3686561;
                indices =                     (
                    59,
                    74
                );
                name = "Jason L. Baptiste";
                "screen_name" = JasonLBaptiste;
            }
        );
    };
    favorited = 0;
    geo =         {
        coordinates =             (
            "40.75536822",
            "-73.96833024999999"
        );
        type = Point;
    };
    id = 268424619332104192;
    "id_str" = 268424619332104192;
    "in_reply_to_screen_name" = "<null>";
    "in_reply_to_status_id" = "<null>";
    "in_reply_to_status_id_str" = "<null>";
    "in_reply_to_user_id" = "<null>";
    "in_reply_to_user_id_str" = "<null>";
    place =         {
        attributes =             {
        };
        "bounding_box" =             {
            coordinates =                 (
                                    (
                                            (
                        "-74.047285",
                        "40.679548"
                    ),
                                            (
                        "-73.907",
                        "40.679548"
                    ),
                                            (
                        "-73.907",
                        "40.882214"
                    ),
                                            (
                        "-74.047285",
                        "40.882214"
                    )
                )
            );
            type = Polygon;
        };
        country = "United States";
        "country_code" = US;
        "full_name" = "Manhattan, NY";
        id = 086752cb03de1d5d;
        name = Manhattan;
        "place_type" = city;
        url = "https://api.twitter.com/1.1/geo/id/086752cb03de1d5d.json";
    };
    "possibly_sensitive" = 0;
    "retweet_count" = 1;
    retweeted = 0;
    source = "<a href=\"http://instagr.am\" rel=\"nofollow\">Instagram</a>";
    text = "\"30?!? I remember when there were 2 employees!\" catchup w/ @jasonlbaptiste of @onswip @ The Smith Restaurant http://t.co/o6armOgJ";
    truncated = 0;
    user =         {
        "contributors_enabled" = 0;
        "created_at" = "Wed Jul 28 02:43:40 +0000 2010";
        "default_profile" = 0;
        "default_profile_image" = 0;
        description = "VP @Blackstone PE Ops group. Advisor: health NewCos & @TechStars network incubator @BpHealth. Ex-VC @SparkCapital. HBS healthcare cases author. Tweets are mine.";
        entities =             {
            description =                 {
                urls =                     (
                );
            };
            url =                 {
                urls =                     (
                                            {
                        "expanded_url" = "<null>";
                        indices =                             (
                            0,
                            27
                        );
                        url = "http://thesignaltonoise.com";
                    }
                );
            };
        };
        "favourites_count" = 349;
        "follow_request_sent" = "<null>";
        "followers_count" = 1580;
        following = "<null>";
        "friends_count" = 230;
        "geo_enabled" = 1;
        id = 171754967;
        "id_str" = 171754967;
        "is_translator" = 0;
        lang = en;
        "listed_count" = 92;
        location = "NYC & BK";
        name = "Charles Huang";
        notifications = "<null>";
        "profile_background_color" = C0DEED;
        "profile_background_image_url" = "http://a0.twimg.com/profile_background_images/413900237/IMG00062-20090521-1153.jpg";
        "profile_background_image_url_https" = "https://si0.twimg.com/profile_background_images/413900237/IMG00062-20090521-1153.jpg";
        "profile_background_tile" = 1;
        "profile_image_url" = "http://a0.twimg.com/profile_images/1561043828/charles_instagram_normal.jpg";
        "profile_image_url_https" = "https://si0.twimg.com/profile_images/1561043828/charles_instagram_normal.jpg";
        "profile_link_color" = 0084B4;
        "profile_sidebar_border_color" = C0DEED;
        "profile_sidebar_fill_color" = DDEEF6;
        "profile_text_color" = 333333;
        "profile_use_background_image" = 1;
        protected = 0;
        "screen_name" = 1CharlesH;
        "statuses_count" = 2833;
        "time_zone" = Quito;
        url = "http://thesignaltonoise.com";
        "utc_offset" = "-18000";
        verified = 0;
    };
};
source = "<a href=\"http://twitter.com/download/iphone\" rel=\"nofollow\">Twitter for iPhone</a>";
text = "RT @1CharlesH: \"30?!? I remember when there were 2 employees!\" catchup w/ @jasonlbaptiste of @onswip @ The Smith Restaurant http://t.co/ ...";
truncated = 0;
user =     {
    "contributors_enabled" = 0;
    "created_at" = "Sat Apr 07 05:50:05 +0000 2007";
    "default_profile" = 0;
    "default_profile_image" = 0;
    description = "CEO of Onswipe, Author of The Ultralight Startup";
    entities =         {
        description =             {
            urls =                 (
            );
        };
        url =             {
            urls =                 (
                                    {
                    "expanded_url" = "<null>";
                    indices =                         (
                        0,
                        29
                    );
                    url = "http://www.jasonlbaptiste.com";
                }
            );
        };
    };
    "favourites_count" = 548;
    "follow_request_sent" = "<null>";
    "followers_count" = 8860;
    following = 1;
    "friends_count" = 719;
    "geo_enabled" = 1;
    id = 3686561;
    "id_str" = 3686561;
    "is_translator" = 0;
    lang = en;
    "listed_count" = 656;
    location = "New York City,NY";
    name = "Jason L. Baptiste";
    notifications = "<null>";
    "profile_background_color" = 333333;
    "profile_background_image_url" = "http://a0.twimg.com/profile_background_images/560472/trans.png";
    "profile_background_image_url_https" = "https://si0.twimg.com/profile_background_images/560472/trans.png";
    "profile_background_tile" = 0;
    "profile_image_url" = "http://a0.twimg.com/profile_images/1666517323/me-ignition_normal.jpg";
    "profile_image_url_https" = "https://si0.twimg.com/profile_images/1666517323/me-ignition_normal.jpg";
    "profile_link_color" = 5454DC;
    "profile_sidebar_border_color" = 730000;
    "profile_sidebar_fill_color" = FFFFFF;
    "profile_text_color" = 000000;
    "profile_use_background_image" = 0;
    protected = 0;
    "screen_name" = JasonLBaptiste;
    "statuses_count" = 16625;
    "time_zone" = Hawaii;
    url = "http://www.jasonlbaptiste.com";
    "utc_offset" = "-36000";
    verified = 0;
};
}
2012-11-13 20:01:20.732 MicroDebates[1108:1a03] value is: {
contributors = "<null>";
coordinates = "<null>";
"created_at" = "Tue Nov 13 18:50:15 +0000 2012";
entities =     {
    hashtags =         (
    );
    urls =         (
                    {
            "display_url" = "nytimes.com/2012/11/13/opi\U2026";
            "expanded_url" = "http://www.nytimes.com/2012/11/13/opinion/bruni-the-siren-and-the-spook.html?_r=0";
            indices =                 (
                94,
                114
            );
            url = "http://t.co/aD081T2V";
        }
    );
    "user_mentions" =         (
                    {
            id = 16109501;
            "id_str" = 16109501;
            indices =                 (
                3,
                14
            );
            name = "Azmat Khan";
            "screen_name" = AzmatZahra;
        }
    );
};
favorited = 0;
geo = "<null>";
id = 268425561238560768;
"id_str" = 268425561238560768;
"in_reply_to_screen_name" = "<null>";
"in_reply_to_status_id" = "<null>";
"in_reply_to_status_id_str" = "<null>";
"in_reply_to_user_id" = "<null>";
"in_reply_to_user_id_str" = "<null>";
place = "<null>";
"possibly_sensitive" = 0;
"retweet_count" = 1;
retweeted = 0;
source = "<a href=\"http://www.tweetdeck.com\" rel=\"nofollow\">TweetDeck</a>";
text = "MT @AzmatZahra: A much-needed critique of the sexist clich\U00e9s ubiquitous to Petraeus coverage: http://t.co/aD081T2V";
truncated = 0;
user =     {
    "contributors_enabled" = 0;
    "created_at" = "Sat Feb 03 03:22:09 +0000 2007";
    "default_profile" = 0;
    "default_profile_image" = 0;
    description = "Asst Prof @ University of Michigan School of Information. Social media + HCI.";
    entities =         {
        description =             {
            urls =                 (
            );
        };
        url =             {
            urls =                 (
                                    {
                    "expanded_url" = "<null>";
                    indices =                         (
                        0,
                        33
                    );
                    url = "http://yardi.people.si.umich.edu/";
                }
            );
        };
    };
    "favourites_count" = 320;
    "follow_request_sent" = "<null>";
    "followers_count" = 1582;
    following = 1;
    "friends_count" = 768;
    "geo_enabled" = 0;
    id = 750093;
    "id_str" = 750093;
    "is_translator" = 0;
    lang = en;
    "listed_count" = 137;
    location = "Ann Arbor";
    name = "Sarita Yardi";
    notifications = "<null>";
    "profile_background_color" = 8B542B;
    "profile_background_image_url" = "http://a0.twimg.com/images/themes/theme8/bg.gif";
    "profile_background_image_url_https" = "https://si0.twimg.com/images/themes/theme8/bg.gif";
    "profile_background_tile" = 0;
    "profile_image_url" = "http://a0.twimg.com/profile_images/2152674556/image_normal";
    "profile_image_url_https" = "https://si0.twimg.com/profile_images/2152674556/image_normal";
    "profile_link_color" = 9D582E;
    "profile_sidebar_border_color" = D9B17E;
    "profile_sidebar_fill_color" = EADEAA;
    "profile_text_color" = 333333;
    "profile_use_background_image" = 1;
    protected = 0;
    "screen_name" = syardi;
    "statuses_count" = 12901;
    "time_zone" = "Eastern Time (US & Canada)";
    url = "http://yardi.people.si.umich.edu/";
    "utc_offset" = "-18000";
    verified = 0;
};
} 
```

如果您使用以下搜索查询 twitter，这就是您得到的结果：

```
NSURL *requestURL = [NSURL URLWithString:@"https://api.twitter.com/1.1/search/tweets.json"];
NSMutableDictionary *parameters =
[[NSMutableDictionary alloc] init];
[parameters setObject:@"#energyalt" forKey:@"q"];
[parameters setObject:@"100" forKey:@"count"];
[parameters setObject:@"false" forKey:@"include_entities"]; 
```

JSON 响应被解析为一个 NSDictionary，其中包含一个键“状态”和一个由所有推文一起生成的单个值（我想是搜索的值）：

```
(
    {
    contributors = "<null>";
    coordinates = "<null>";
    "created_at" = "Mon Nov 12 21:11:07 +0000 2012";
    favorited = 0;
    geo = "<null>";
    id = 268098624905416705;
    "id_str" = 268098624905416705;
    "in_reply_to_screen_name" = "<null>";
    "in_reply_to_status_id" = "<null>";
    "in_reply_to_status_id_str" = "<null>";
    "in_reply_to_user_id" = "<null>";
    "in_reply_to_user_id_str" = "<null>";
    metadata =         {
        "iso_language_code" = lt;
        "result_type" = recent;
    };
    place = "<null>";
    "retweet_count" = 0;
    retweeted = 0;
    source = "<a href=\"http://www.apple.com\" rel=\"nofollow\">iOS</a>";
    text = "#energyAlt prima prova da iOS $paolotorroni";
    truncated = 0;
    user =         {
        "contributors_enabled" = 0;
        "created_at" = "Sun Aug 09 22:14:15 +0000 2009";
        "default_profile" = 1;
        "default_profile_image" = 0;
        description = "sociologist, network analyst, agent-based modeler";
        entities =             {
            description =                 {
                urls =                     (
                );
            };
            url =                 {
                urls =                     (
                                            {
                        "expanded_url" = "<null>";
                        indices =                             (
                            0,
                            32
                        );
                        url = "http://flavors.me/digitaldust_it";
                    }
                );
            };
        };
        "favourites_count" = 20;
        "follow_request_sent" = "<null>";
        "followers_count" = 26;
        following = "<null>";
        "friends_count" = 72;
        "geo_enabled" = 1;
        id = 64267215;
        "id_str" = 64267215;
        "is_translator" = 0;
        lang = en;
        "listed_count" = 3;
        location = "43.387293,10.445572";
        name = "simone gabbriellini";
        notifications = "<null>";
        "profile_background_color" = C0DEED;
        "profile_background_image_url" = "http://a0.twimg.com/images/themes/theme1/bg.png";
        "profile_background_image_url_https" = "https://si0.twimg.com/images/themes/theme1/bg.png";
        "profile_background_tile" = 0;
        "profile_image_url" = "http://a0.twimg.com/profile_images/2745846822/da14d3f2d7e357c85456909b0bf695b7_normal.jpeg";
        "profile_image_url_https" = "https://si0.twimg.com/profile_images/2745846822/da14d3f2d7e357c85456909b0bf695b7_normal.jpeg";
        "profile_link_color" = 0084B4;
        "profile_sidebar_border_color" = C0DEED;
        "profile_sidebar_fill_color" = DDEEF6;
        "profile_text_color" = 333333;
        "profile_use_background_image" = 1;
        protected = 0;
        "screen_name" = "digitaldust_it";
        "statuses_count" = 396;
        "time_zone" = "<null>";
        url = "http://flavors.me/digitaldust_it";
        "utc_offset" = "<null>";
        verified = 0;
    };
},
    {
    contributors = "<null>";
    coordinates = "<null>";
    "created_at" = "Fri Nov 09 11:19:53 +0000 2012";
    favorited = 0;
    geo = "<null>";
    id = 266862670265868288;
    "id_str" = 266862670265868288;
    "in_reply_to_screen_name" = "<null>";
    "in_reply_to_status_id" = "<null>";
    "in_reply_to_status_id_str" = "<null>";
    "in_reply_to_user_id" = "<null>";
    "in_reply_to_user_id_str" = "<null>";
    metadata =         {
        "iso_language_code" = en;
        "result_type" = recent;
    };
    place = "<null>";
    "retweet_count" = 0;
    retweeted = 0;
    source = "<a href=\"http://www.digitaldust.it/twitter_like\" rel=\"nofollow\">digitaldust</a>";
    text = "$sugarmills productivity is also tied to policy for selling energy, and in Brazil and India is convenient !$windmills #energyalt";
    truncated = 0;
    user =         {
        "contributors_enabled" = 0;
        "created_at" = "Sun Aug 09 22:14:15 +0000 2009";
        "default_profile" = 1;
        "default_profile_image" = 0;
        description = "sociologist, network analyst, agent-based modeler";
        entities =             {
            description =                 {
                urls =                     (
                );
            };
            url =                 {
                urls =                     (
                                            {
                        "expanded_url" = "<null>";
                        indices =                             (
                            0,
                            32
                        );
                        url = "http://flavors.me/digitaldust_it";
                    }
                );
            };
        };
        "favourites_count" = 20;
        "follow_request_sent" = "<null>";
        "followers_count" = 26;
        following = "<null>";
        "friends_count" = 72;
        "geo_enabled" = 1;
        id = 64267215;
        "id_str" = 64267215;
        "is_translator" = 0;
        lang = en;
        "listed_count" = 3;
        location = "43.387293,10.445572";
        name = "simone gabbriellini";
        notifications = "<null>";
        "profile_background_color" = C0DEED;
        "profile_background_image_url" = "http://a0.twimg.com/images/themes/theme1/bg.png";
        "profile_background_image_url_https" = "https://si0.twimg.com/images/themes/theme1/bg.png";
        "profile_background_tile" = 0;
        "profile_image_url" = "http://a0.twimg.com/profile_images/2745846822/da14d3f2d7e357c85456909b0bf695b7_normal.jpeg";
        "profile_image_url_https" = "https://si0.twimg.com/profile_images/2745846822/da14d3f2d7e357c85456909b0bf695b7_normal.jpeg";
        "profile_link_color" = 0084B4;
        "profile_sidebar_border_color" = C0DEED;
        "profile_sidebar_fill_color" = DDEEF6;
        "profile_text_color" = 333333;
        "profile_use_background_image" = 1;
        protected = 0;
        "screen_name" = "digitaldust_it";
        "statuses_count" = 396;
        "time_zone" = "<null>";
        url = "http://flavors.me/digitaldust_it";
        "utc_offset" = "<null>";
        verified = 0;
    };
}
) 
```

最好的，西蒙娜

# c# - 在 WPF 数据网格中迭代行，然后将行值传递给方法并相应地样式行

> ID：13362287
> 
> 赞同：0
> 
> 时间：2012-11-13T14:15:37.933
> 
> 标签：c#, wpf, datagrid, styles

我有一个以数据表为源的 WPF 数据网格。数据网格包含一个包含 rowID 的不可见列。我需要做的是遍历datagird中的每一行，取出rowID并将其传递给一个`bool IsArchived( int rowID )`方法。如果此方法返回 true，我想以某种方式设置数据网格行的样式。

我试图实现我在[这里找到的方法](https://stackoverflow.com/questions/1934529/how-to-loop-over-the-rows-of-a-wpf-toolkit-datagrid)

```
private void colorArchived( DataGrid grid , GX3MaterialSelectionData data)
        {
            var rows = GetDataGridRows(grid);

            foreach (DataGridRow row in rows)
            {
                DataRowView rv = (DataRowView)row.Item;
                int rowID = (int)rv.Row[1];
                data.IsArchived( rowID );

            }
        }

        public IEnumerable<DataGridRow> GetDataGridRows(DataGrid grid)
        {
            var itemsSource = grid.ItemsSource as IEnumerable;
            if (null == itemsSource) yield return null;
            foreach (var item in itemsSource)
            {
                var row = grid.ItemContainerGenerator.ContainerFromItem(item) as DataGridRow;
                if (null != row) yield return row;
            }
        } 
```

但是该行`var row = grid.ItemContainerGenerator.ContainerFromItem(item) as DataGridRow;`总是返回null。

我想尽可能多地以编程方式做这件事。

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:34:17.147

这有点长，但我会使用样式选择器来完成这项工作，

作为示例，我在以下窗口中设置了数据网格。

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication1"
        Title="MainWindow" Height="350" Width="525" DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <Window.Resources>
        <local:RowStyleSelector x:Key="styleSelector"/>
    </Window.Resources>
    <Grid>
        <DataGrid  ItemsSource="{Binding Items}" RowStyleSelector="{StaticResource styleSelector}"/>
    </Grid>
</Window> 
```

样式选择器在下面的代码中定义，请注意 TestClass 表示您要放入网格的对象。

RowStyleSelector 类将为添加到网格的每一行运行一次 SelectStyle 方法。

```
public partial class MainWindow : Window
{
    public ObservableCollection<TestClass> Items
    {
        get { return (ObservableCollection<TestClass>)GetValue(ItemsProperty); }
        set { SetValue(ItemsProperty, value); }
    }

    public static readonly DependencyProperty ItemsProperty = DependencyProperty.Register("Items", typeof(ObservableCollection<TestClass>), typeof(MainWindow), new PropertyMetadata(null));

    public MainWindow()
    {
        InitializeComponent();
        Items = new ObservableCollection<TestClass>();
        for (int i = 0; i < 100; i++)
            Items.Add(new TestClass()
            {
                ID = i,
                Text = "Text for row " + i.ToString()
            });
    }
}

public class RowStyleSelector : StyleSelector
{
    public override Style SelectStyle(object item, DependencyObject container)
    {
        TestClass targetIem = item as TestClass;
        if (targetIem != null)
        {
            // You can work with your data here.
            if (targetIem.ID == 0)
            {
                // Locate and return the style for when ID = 0.
                return (Style)Application.Current.FindResource("ResourceName");
            }
            else
                return base.SelectStyle(item, container);
        }
        else
            return base.SelectStyle(item, container);
    }
}

public class TestClass
{
    public int ID { get; set; }
    public string Text { get; set; }
} 
```

编辑：针对下面的评论，请参阅修改后的 RowStyleConverter，您将不需要 TestClass。

```
public class RowStyleSelector : StyleSelector
{
    public override Style SelectStyle(object item, DependencyObject container)
    {
        System.Data.DataRow targetItem = item as System.Data.DataRow;
        if (targetItem != null)
        {
            // You can work with your data here.
            if ((int)targetItem["IDColumn"] == 0)
            {
                // Locate and return the style for when ID = 0.
                return (Style)Application.Current.FindResource("ResourceName");
            }
            else
                return base.SelectStyle(item, container);
        }
        else
            return base.SelectStyle(item, container);            
    }
} 
```

# git - Heroku 推送被拒绝，子模块安装失败

> ID：13362288
> 
> 赞同：11
> 
> 时间：2012-11-13T14:15:39.147
> 
> 标签：git, heroku, git-submodules

我的仓库使用了自定义版本的 Recurly-js，并且我使用这些说明[https://devcenter.heroku.com/articles/git-submodules](https://devcenter.heroku.com/articles/git-submodules)将其打包为子模块。但是，当我尝试部署时，现在出现以下错误：

```
----> Heroku receiving push 
-----> Git submodules detected, installing
       Submodule 'recurly-js' (/app/tmp/repo.git/recurly-js) registered for path 'recurly-js'
       Initialized empty Git repository in /tmp/build_3iacvn8h2rnha/recurly-js/.git/
       fatal: '/app/tmp/repo.git/recurly-js' does not appear to be a git repository
       fatal: The remote end hung up unexpectedly
       Clone of '/app/tmp/repo.git/recurly-js' into submodule path 'recurly-js' failed
 !     Heroku push rejected, Submodule install failed 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-13T15:50:00.120

我将答案作为对@jeffrey-k 答案的评论给出了答案，但现在我更加确定了，我会在这里写下来。

我的回购突然停止推送，这两件事“修复”了它：

1.  将所有公共子模块 URL（如果有）从使用 ssh 传输 URL 更改为只读 git 传输 URL（即 from`git@github.com:yaniv-aknin/public-project`到`git://github.com/yaniv-aknin/public-project`）。为此，您需要编辑存储库`.gitmodules`根目录中调用的文件。
2.  从我的仓库中删除所有私有子模块（如果有的话）（从它们及其目录中删除它们`.gitmodules`）`rm -fr`。
3.  提交更改。

这处理了这两种行为变化：

1.  Heroku 曾经能够使用 ssh 传输从 github 克隆子模块（大概他们有一些“通用 heroku ssh 密钥”和 github 帐户，但不确定）。
2.  Heroku 过去常常忽略失败的子模块并继续推送。

我已经打开了一张票，询问我的分析是否正确以及为什么会发生变化（我没有听到任何警告） - 如果我学到新东西，我会更新这个答案。

**更新**：来自 Heroku 支持的诺亚回复了我的票，并在很大程度上承认了我上面所说的。应更改公共回购 URL，应删除私人回购或根据[本](https://devcenter.heroku.com/articles/git-submodules#private-dependency-repositories)文档在其中嵌入凭据；后一种解决方案具有明显的安全后果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-10-20T00:21:57.220

# 其他答案都是旧的。

从 2019 年开始，您现在只需登录 Heroku 并前往此处：

*   `https://dashboard.heroku.com/apps/<YOUR-WEBSITE-NAME>/deploy/github`

并将您的 GitHub 帐户或组织与 Heroku 相关联。然后，它可以克隆您的帐户在选择推送到主 GitHub 存储库的主节点时可以访问的私有子模块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T14:41:10.860

看起来这个答案 - [https://stackoverflow.com/a/8768240](https://stackoverflow.com/a/8768240) - 讲述了这个故事。Heroku 不接受私有仓库的 git 子模块。我的 recurly-js 版本是一个分叉的、非私有的 repo。

# maven-2 - 在 Maven2 的编译或打包步骤中运行静态分析工具？

> ID：13362289
> 
> 赞同：0
> 
> 时间：2012-11-13T14:15:41.733
> 
> 标签：maven-2, static-analysis

我正在为我的团队使用 Maven 进行研究，我的构建目标之一是为每个构建运行静态分析工具，并且可能会因某些严重错误而使构建失败。但是，在 Maven 中，这些似乎被视为报告并在`site`生命周期中运行。这带来了一些问题，因为我们不打算将站点用于大多数项目，并且需要额外的步骤（或至少额外的阶段）来获得静态分析。

有没有办法在编译或打包阶段（或等效）中运行 maven-2 中的静态分析工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:40:12.220

这可以通过在部分中配置插件（例如[findbugs](http://mojo.codehaus.org/findbugs-maven-plugin/index.html)`<build>` ）并在以下部分中配置`<phase>`来完成`<executions>`：

```
<executions>
   <execution>
      <id>findbugs-run</id>
      <phase>process-classes</phase>
      <goals>
         <goal>check</goal>
      </goals>
   </execution>
</executions> 
```

# xml - xsl：只复制没有节点的内容

> ID：13362291
> 
> 赞同：3
> 
> 时间：2012-11-13T14:15:46.097
> 
> 标签：xml, xslt

我对 xsl:copy-of 有点问题，因为我只想复制节点的内容，而不是节点本身：

在 XML 中：

```
<parent>    
    <node>Hello, I'm a <b>node</b>!!!</node>
</parent> 
```

在 XSL 中：

```
<xsl:template match="parent">
    <tr>
        <td><xsl:copy-of select="node"/></td>
    </tr>
</xsl:template> 
```

结果：

```
<tr>
    <td><node>Hello, I'm a <b>node</b>!!!</node></td>
</tr> 
```

预期结果：

```
<tr>
    <td>Hello, I'm a <b>node</b>!!!</td>
</tr> 
```

问题是，如果我使用`xsl:value-of`，我会丢失`<b></b>`！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T14:23:32.290

你可以使用

```
<xsl:copy-of select="node/node()" /> 
```

它看起来有点奇怪，因为元素名称也是`node`，但是`node()`选择器所做的是从适当的节点（在这种情况下`node`，在当前上下文中调用的所有子元素）中选择所有子元素、文本节点、注释节点和处理指令元素）。

`node()`不选择属性，所以如果你开始

```
<parent>    
    <node attr="foo">Hello, I'm a <b>node</b>!!!</node>
</parent> 
```

然后`<td><xsl:copy-of select="node/node()"/></td>`会产生

```
<td>Hello, I'm a <b>node</b>!!!</td> 
```

相反，如果您说`<td><xsl:copy-of select="node/node() | node/@*"/></td>`，那么您会得到

```
<td attr="foo">Hello, I'm a <b>node</b>!!!</td> 
```

# onclick - 打开灯箱时不刷新页面

> ID：13362295
> 
> 赞同：1
> 
> 时间：2012-11-13T14:15:59.127
> 
> 标签：onclick, refresh, lightbox

我一直致力于设置列表、更改悬停图片和点击灯箱。它主要以我希望它为一件事保存的方式工作...当我单击其中一个子菜单以打开灯箱时，它似乎刷新了主页，从而返回到默认值。
[http://www.thendesign.com/new/type-test2.html](http://www.thendesign.com/new/type-test2.html) 点击“教育”，然后点击其中一个项目，看看我在说什么。
当灯箱打开/关闭时，我怎样才能让它保持在停止的位置？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:34:03.977

抱歉，直到我已经回复了您对您的其他问题的评论后，我才看到这一点。

[jquery列表，保持活动突出显示](https://stackoverflow.com/questions/13316199/jquery-list-keep-active-highlighted)

# xcode - ABPeoplePickerNavigationController 完成处理程序试图在单元格中查找文本并获取 Null

> ID：13362297
> 
> 赞同：1
> 
> 时间：2012-11-13T14:16:04.540
> 
> 标签：xcode, peoplepicker

得到一个 ABPeoplePickerNavigationController 并在显示后我想搜索单元格并找到显示的文本即用户名。然后我想检查用户是否包含在 coredata NSSet 中......我的问题，我似乎无法从 Null 单元格中获取文本。我知道电池是正确的，因为我可以愉快地使用电池配件类型。示例代码显示：

```
[self presentViewController:picker animated:YES completion:^{
 // Find the picker tableViewController
    UIView *view = picker.topViewController.view;
    UITableView *tableView = nil;
    for(UIView *uv in view.subviews)
    {
        if([uv isKindOfClass:[UITableView class]])
        {
            tableView = (UITableView*)uv;
            break;
        }
    }

// Check tableView not Null then Loop occurs here with this code in it always giving me Null
// I know the tables populated and displayed at this point so why Null ?
 .......       

 NSString *a = [[[tableView cellForRowAtIndexPath:[NSIndexPath indexPathForItem:0 inSection:x]] detailTextLabel] text];

 .......
}]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T11:47:33.680

开始认为这可能与 ios6 隐私控制有关？

# c++ - C++：创建本地对象数组

> ID：13362300
> 
> 赞同：0
> 
> 时间：2012-11-13T14:16:23.280
> 
> 标签：c++, arrays, pointers

如果我执行以下操作：

```
string* create_array(){
    string* arr = new string[2];
    string s = "hello";
    string s2 = "world";

    arr[0] = s;
    arr[1] = s2;
    return arr;
} 
```

是`arr[0] = s`制作副本`s`然后将该副本放入`arr[0]`指向的内存地址的分配吗？还是它使 arr[0] 引用本地堆栈变量`s`，在这种情况下，如果我使用从该函数调用返回的数组`arr[0]`将产生不可预测的行为？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T14:17:48.220

> 是 arr[0] = s 的赋值，复制了 s

是的。

> 然后将该副本放入 arr[0] 指向的内存地址中？

No.`arr[0]`是 a `string`，它不指向任何东西。（在内部，它可能有一个`char*`地方，但每个实例都是唯一的，`std::string`并且是一个实现细节，我添加了这个评论只是为了完整）

> 还是让 arr[0] 引用本地堆栈变量 s，在这种情况下，如果我使用从该函数返回的数组，调用 arr[0] 会有不可预测的行为？

不，它会复制。

# wolfram-mathematica - 减少 Mathematica 中的函数语法

> ID：13362304
> 
> 赞同：1
> 
> 时间：2012-11-13T14:16:32.867
> 
> 标签：wolfram-mathematica

我想知道我的代码有什么问题。我正在尝试在 Mathematica 中求解非线性方程组（最初在 wolfram 中，但命令太长）：

```
Reduce[Pi*(h^2 + 2*R*(R - r))/sqrt (h^2 + (R - r)^2) - 2*x*Pi/3*h*R - 
     x*Pi/3*h*r == 0 && 
   Pi*(h^2 + 2*r*(r - R))/sqrt (h^2 + (R - r)^2) + 2*Pi*r - 
     x*Pi/3*h*R - 2*x*Pi/3*h*r == 0 && 
   Pi*h*(r + R)/sqrt (h^2 + (R - r)^2) - x*Pi/3*R^2 - x*Pi/3*R*r - 
     x*Pi/3*r^2 == 0 && -Pi/3*h*(R^2 + R*r + r^2) + 1 == 0, {R, r, h, 
   x}]; 
```

你知道如何重新输入并解出这些方程吗？我试图根据文档输入它，但我显然犯了一些错误......

这些是原始方程（在 LaTeX 中，我不知道它们是否会在这里正确显示：

```
\begin{equation*}
     \frac{\partial}{\partial R} L(R, r, h, \lambda) = \frac{\pi(h^2 + 2R(R-r))}{\sqrt{h^2 + (R - r)^2}} - 2\lambda \frac{\pi}{3}hR - \lambda \frac{\pi}{3}hr= 0
\end{equation*}

\begin{equation*}
     \frac{\partial}{\partial r} L(R, r, h, \lambda) = \frac{\pi(h^2 + 2r(r-R))}{\sqrt{h^2 + (R - r)^2}} + 2\pi r - \lambda \frac{\pi}{3}hR - 2\lambda \frac{\pi}{3}hr= 0
\end{equation*}

\begin{equation*}
     \frac{\partial}{\partial h} L(R, r, h, \lambda) = \frac{\pi h(r + R)}{\sqrt{h^2 + (R - r)^2}} - \lambda \frac{\pi}{3}R^2 - \lambda \frac{\pi}{3}Rr - \lambda \frac{\pi}{3}r^2= 0
\end{equation*}

\begin{equation*}
     \frac{\partial}{\partial \lambda} L(R, r, h, \lambda) = - \frac{\pi}{3} h (R^2 + Rr + r^2) + 1 = 0
\end{equation*} 
```

* * *

### 编辑：

我将 pi 更正为 PI，现在它开始评估，所以可能是错误......这需要很长时间......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:21:23.740

您必须至少学习基础知识。转到帮助->文档中心，然后在搜索栏中单击该书。从一开始就解释了一切。

正如评论中已经指出的那样，**所有**函数和内置符号都以大写字母开头。因此你的电话应该是

```
Reduce[Pi*(h^2 + 2*R*(R - r))/Sqrt[h^2 + (R - r)^2] - 2*x*Pi/3*h*R - 
    x*Pi/3*h*r == 0 && 
  Pi*(h^2 + 2*r*(r - R))/Sqrt[h^2 + (R - r)^2] + 2*Pi*r - 
    x*Pi/3*h*R - 2*x*Pi/3*h*r == 0 && 
  Pi*h*(r + R)/Sqrt[h^2 + (R - r)^2] - x*Pi/3*R^2 - x*Pi/3*R*r - 
    x*Pi/3*r^2 == 0 && -Pi/3*h*(R^2 + R*r + r^2) + 1 == 0, {R, r, h, 
  x}] 
```

# java - Java 等效于 PHP 的 call_user_func()

> ID：13362307
> 
> 赞同：2
> 
> 时间：2012-11-13T14:16:39.330
> 
> 标签：java

我想做的是用字符串变量调用方法/对象。

我有 ' `foo`' 和 ' `bar`' 需要做`foo.bar()`

有没有类似 PHP 的东西`call_user_func()`？还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:20:18.570

它在 Java 中称为反射：有关详细信息，请参阅[**本教程**](http://docs.oracle.com/javase/tutorial/reflect/index.html)。

```
 foo fooObject = new foo(); //not using reflection, but you can if you need to

     //use reflection on your class()not object to get the method
     Method method = foo.class.getMethod("bar", null);

     //Invoke the method on your object(not class)
     Object bar = method.invoke(fooObject, null); 
```

`UpperCase`附带说明：您的班级名称应以eg开头`Foo`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:18:31.833

在java中你应该使用反射。

官方文档：[http ://docs.oracle.com/javase/tutorial/reflect/index.html](http://docs.oracle.com/javase/tutorial/reflect/index.html)

您的情况可能如下所示：

```
Class<?> c = Class.forName("foo");
Method  method = c.getDeclaredMethod ("bar", new Class [0] );
method.invoke (objectToInvokeOn, new Object[0]); 
```

`objectToInvokeOn`您要调用的实例/对象（类 foo）在哪里。如果你有它。

否则你应该去：

```
Class<?> c = Class.forName("foo");
Object objectToInvokeOn = c.newInstance();
Method  method = c.getDeclaredMethod ("bar", new Class [0] );
method.invoke (objectToInvokeOn, new Object[0]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T14:36:03.927

理论上没有完全等效的函数，因为 Java 是纯 OOP，因此它不提供全局范围的函数调用者 - 顺便说一下，这是复制反射本身的糟糕意图，因为 PHP 函数当时不是正确的对象.

如前所述，您可以使用[Java 的反射](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html)，其行为类似于[PHP 的](http://php.net/manual/en/book.reflection.php).

**TL;博士**

`call_user_func*`您可以使用 Java 反射类 [Class, Method, Field]来模拟东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T14:44:59.147

如果您有该类实现的接口，那么您可以创建一个具有通用方法处理的**代理类。**但这比反思更具体。

# ios - UITableView reloadData 异步

> ID：13362311
> 
> 赞同：1
> 
> 时间：2012-11-13T14:16:48.203
> 
> 标签：ios, objective-c, multithreading, uitableview, cocoa-touch

我正在为我的应用程序创建一个搜索功能，我想突出显示单元格中的搜索字符串。
为此，我将搜索字符串保存到`activeSearchString`可由`tableView:cellForRowAtIndexPath`.
`tableView:cellForRowAtIndexPath`然后突出显示`activeSearchString`它将返回的单元格中的内容。但是，它不起作用。如果您检查日志，似乎 reloadData 是异步执行的（所以 after`activeSearchString`已被释放）。
正因为如此，我的应用程序也崩溃了。任何执行`reloadData`同步或其他方法的解决方案？谢谢！

代码：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(){
    // Get the products asynchronous    
    NSString* searchString = [NSString stringWithString:@"A search string"];
    NSArray* searchResults = [[ProductServer sharedServer] productsForSearchString:searchString];
    dispatch_sync(dispatch_get_main_queue(), ^(){
        DLog(@"Begin");
        activeSearchString = [searchString retain];
        products = [searchResults retain];
        [ibTableView reloadData];
        [activeSearchString release];
        DLog(@"End");
    });
});

- (UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
        DLog();
        ProductTableViewCell* tableViewCell = [tableView dequeueReusableCellWithIdentifier:@"productCell" forIndexPath:indexPath];
        Product* product = [products objectAtIndex:[indexPath row]];

        NSDictionary* highlightAttributes = [NSDictionary dictionaryWithObjectsAndKeys:[UIColor colorWithRed:49.f/255.f green:110.f/255.f blue:184.f/255.f alpha:1.f], NSBackgroundColorAttributeName, nil];
        NSMutableAttributedString* mutableAttributedTitle = [[[NSMutableAttributedString alloc] initWithString:[product title]] autorelease];
        [mutableAttributedTitle setAttributes:highlightAttributes range:[[mutableAttributedTitle string] rangeOfString:activeSearchString options:NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch]];
        [(UILabel*)[tableViewCell titleLabel] setAttributedText:mutableAttributedTitle];

        return tableViewCell;
} 
```

日志：

```
2012-11-13 14:56:00.783 ****[5810:c07] __58-[TVCurrentlyViewController searchBarSearchButtonClicked:]_block_invoke_2 [Line 190] Begin
2012-11-13 14:56:00.783 ****[5810:c07] __58-[TVCurrentlyViewController searchBarSearchButtonClicked:]_block_invoke_2 [Line 197] End
2012-11-13 14:56:00.783 ****[5810:c07] -[TVCurrentlyViewController tableView:cellForRowAtIndexPath:] [Line 117] 
2012-11-13 14:56:00.786 ****[5810:c07] -[TVCurrentlyViewController tableView:cellForRowAtIndexPath:] [Line 117] 
2012-11-13 14:56:00.787 ****[5810:c07] -[TVCurrentlyViewController tableView:cellForRowAtIndexPath:] [Line 117] 
2012-11-13 14:56:00.789 ****[5810:c07] -[TVCurrentlyViewController tableView:cellForRowAtIndexPath:] [Line 117] 
2012-11-13 14:56:00.790 ****[5810:c07] *** -[CFString length]: message sent to deallocated instance 0x75d6d00 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T14:38:36.677

你不应该在那里发布一个全局变量。在视图控制器的 dealloc 方法中使用具有保留语义和释放的合成属性。

编辑：

在您对主线程的回调中使用`dispatch_async()`而不是。将在主线程完成更新 tableview 时阻塞全局后台队列。`dispatch_sync()``dispatch_sync()`

# iphone - 图像未正确旋转

> ID：13362319
> 
> 赞同：0
> 
> 时间：2012-11-13T14:17:29.530
> 
> 标签：iphone, ios, image, cocoa

旋转我正在尝试将我的图像旋转 90 度。它在没有旋转的情况下工作，但是当我旋转和平移时它不显示。我究竟做错了什么？

```
 NSString *filePath = [[NSBundle mainBundle] pathForResource:@"check" ofType:@"jpg"];
UIImage *newImage = [[UIImage alloc] initWithContentsOfFile:filePath];

UIGraphicsBeginImageContext(newImage.size);
//CGContextRef c = UIGraphicsGetCurrentContext();

CGContextTranslateCTM(UIGraphicsGetCurrentContext(), newImage.size.width, 0);
//CGContextTranslateCTM(UIGraphicsGetCurrentContext(), 0, newImage.size.width);
//CGContextScaleCTM(UIGraphicsGetCurrentContext(), 1.0, -1.0);
CGContextRotateCTM(UIGraphicsGetCurrentContext(), 90);
CGRect imageRect = CGRectMake(0, 0, newImage.size.height, newImage.size.width);   
CGContextDrawImage(UIGraphicsGetCurrentContext(), imageRect, newImage.CGImage);
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();

ImageView.image = viewImage; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:24:58.137

我建议使用图像视图并像这样使用它的变换：

```
UIImage *newImage = [[UIImage alloc] initWithContentsOfFile:filePath];
UIImageView *newImageView = [[UIImageView alloc] initWithImage:newImage]; 
newImageView.transform = CGAffineTransformMakeRotation(M_PI_2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:34:11.587

你应该做：

```
UIGraphicsBeginImageContext(newImage.size);

CGContextRef context = UIGraphicsGetCurrentContext();
CGContextRotateCTM (context, 90* M_PI/180); //Degrees should be in radians.

[newImage drawAtPoint:CGPointMake(0, 0)];

UIImage *viewImage =  UIGraphicsGetImageFromCurrentImageContext(); 
```

祝你好运。

更新：

实际上，这是[如何将 UIImage 旋转 90 度的副本？](https://stackoverflow.com/questions/1315251/how-to-rotate-a-uiimage-90-degrees)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T15:20:28.183

问题是我的定义声明，我需要翻转图像。这是完整的代码：（图像必须是完美的，因为 OCR 会处理图像，即使有一点偏差，也会被拒绝。

```
 CGContextRef c = UIGraphicsGetCurrentContext();
CGContextSaveGState(c);

NSString *filePath = [[NSBundle mainBundle] pathForResource:@"check" ofType:@"jpg"];
UIImage *newImage = [[UIImage alloc] initWithContentsOfFile:filePath];

NSLog(@"Rect width: %@", NSStringFromCGSize(newImage.size) );
UIGraphicsBeginImageContext(newImage.size);
CGContextTranslateCTM(UIGraphicsGetCurrentContext(), 0, newImage.size.width);
CGContextScaleCTM(UIGraphicsGetCurrentContext(), 1.0, -1.0);

CGContextTranslateCTM( UIGraphicsGetCurrentContext(), 0.5f * newImage.size.width, 0.5f * newImage.size.height ) ;
CGContextRotateCTM( UIGraphicsGetCurrentContext(), radians( -90 ) ) ;
    CGRect imageRect = CGRectMake(-(newImage.size.height* 0.5f) + 200,  -(0.5f * newImage.size.width) + 200 , newImage.size.height - 200, newImage.size.width - 200);
CGContextDrawImage(UIGraphicsGetCurrentContext(), imageRect, newImage.CGImage);

UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
ImageView.image = viewImage;

CGContextRestoreGState(c); 
```

# android - Android XML Pull 解析器中的 OutOfMemory 错误

> ID：13362329
> 
> 赞同：0
> 
> 时间：2012-11-13T14:17:50.853
> 
> 标签：android, xml-parsing

我从 HTTPResponse 解析 XML 文档。以前，我使用从 InputStream 创建的 String 对象启动了解析器。

当我更改设置以便直接在解析器中使用 inputStream 时，我得到了 OutOfMemory 异常。

奇怪的是解析字符串之前没有问题，所以我想知道为什么 InputStream 需要更多内存。

以前的代码：

```
final byte[] encodedResponseBytes = IOUtils.toByteArray(httpResponse
            .getEntity().getContent());

String message = new String(encodedResponseBytes);

parser.setInput(new StringReader(message)); 
```

新代码：

```
InputStream stream = httpResponse
            .getEntity().getContent();
parser.setInput(stream, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:20:21.250

通过更改代码，我不再有问题：

`InputStream stream = request.getResponseStream(); reader = new InputStreamReader(stream); this.xmlParser.setInput(reader);`

# c# - WCF 测试客户端给出正确的结果，但在 Chrome 中执行时没有

> ID：13362330
> 
> 赞同：2
> 
> 时间：2012-11-13T14:17:52.147
> 
> 标签：c#, wcf, web-services, rest

我正在尝试构建我的第一个 WCF 服务。我现在有以下行为。

1.  当我运行我的 WCF 服务时，我可以发送输入并在测试客户端中获得正确的结果。
2.  当我输入*`http://localhost:12345/Service1.svc`*Chrome 时，我得到一个页面。
3.  单击*`svcutil.exe http://localhost:12345/Service1.svc?wsdl`*会给我一个 XML。

但是，当我输入*[http://localhost:12345/Service1.svc/test/13](http://localhost:12345/Service1.svc/test/13)*时，我只得到一个空响应。里面什么都没有，只有`<body>`一个`<pre>`. **我做错了什么，我该如何解决？**（请记住，我是这方面的新手。）一旦我的行为按照我想要的方式工作（这样我就可以在浏览器中看到正确的结果），我将在 XML 中生成 REST 或 JSON 数据格式（如果这很重要）。

从[这个讨论](https://stackoverflow.com/questions/802518/invoking-wcf-service-method-through-a-browser)中我得到了这个。

```
namespace WcfService1
{
  [ServiceContract]
  public interface IService1
  {
    [OperationContract]
    [WebGet(UriTemplate = "/test/{indata}", 
      ResponseFormat = WebMessageFormat.Xml)]
    String Ping(String indata);
  }
} 
```

[从这个问题](https://stackoverflow.com/questions/13345557/how-to-produce-xml-output-using-wcf-service)中可以看出，我的实现如下。

```
namespace WcfService1
{
  public class Service1 : IService1
  {
    public string Ping(String indata)
    {
      return "Pong " + indata;
    }
  }
} 
```

建议的*web.config*不起作用，因此我尝试使用[本文](http://msdn.microsoft.com/en-us/library/ms734765.aspx)中的指针结合[此讨论](https://stackoverflow.com/questions/6629140/what-is-the-proper-configuration-for-a-wcf-4-rest-service)来发布元数据（无论是什么） 。我的配置文件看起来与后一个链接中的配置文件非常相似（除了我删除了诊断部分）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:22:34.440

我相信 WCF 测试客户端在 SOAP 上运行。它更多地测试了你正在服务的事实，而不是你正在服务你想要得到的东西。

根据我的经验，您得到的空体只是一条错误消息。但是，在某些情况下，例如跨域调用（不确定它是否是正确的名称，也不确定是否是可能问题的完整列表），当您在 JavaScript 中使用例如*XDomainRequest*对象（而不是通常的*XmlHttpRequest*）时，响应为空是错误消息的结果。

您是否尝试检查状态码？它是 200 OK 还是更大的东西？

我相信您已经在 Social MSDN 上提出了类似的问题，并且对于如何形成代码存在一些困惑。让我回顾一下下面的亮点。

**网页配置**

```
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>

  <system.serviceModel>
    <services>
      ...
    </services>
    <behaviors>
    </behaviors>
  </system.serviceModel>

</configuration> 
```

*services* - 描述服务性质的标签内容

```
<service name="DemoRest.RestService" 
         behaviorConfiguration="ServiceBehavior">
  <endpoint address="" binding="webHttpBinding" 
            contract="DemoRest.IRestService" 
            behaviorConfiguration="web"></endpoint>
</service> 
```

*行为*- 描述服务和端点行为的标签内容

```
<serviceBehaviors>
  <behavior name="ServiceBehavior">
    <serviceMetadata httpGetEnabled="true"/>
    <serviceDebug includeExceptionDetailInFaults="true"/>
  </behavior>
</serviceBehaviors>

<endpointBehaviors>
  <behavior name="web">
    <webHttp/>
  </behavior>
</endpointBehaviors> 
```

现在可以使用以下 URL 检索响应。

```
localhost/Service1.svc/inputData 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T19:57:54.893

您可以尝试以下操作：

1.  使用 ServiceBehaviour 属性标记服务实现

    ```
    [ServiceBehavior(AddressFilterMode = AddressFilterMode.Any)]
    public class Service1 : IService1 
    ```

2.  在 web.config 中添加/修改以下保留现有数据：

    ```
    <services>
      <service name="WcfService1.Service1">
        <endpoint binding="webHttpBinding" contract="WcfService1.IService1" />
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior>
          <webHttp />
        </behavior>
      </endpointBehaviors>
     ...
    </behaviors> 
    ```

这些步骤使其工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T18:22:39.193

[要使用dot net framework 4 简化配置](http://msdn.microsoft.com/en-us/library/ee358768.aspx)让 REST 工作，您的 web.config 需要包含以下内容：

```
<system.serviceModel>
  <!-- 1) Specify webHttp as an endpoint behavior -->
  <behaviors>
    <endpointBehaviors>
      <behavior >
        <webHttp/>
      </behavior>
    </endpointBehaviors>
  </behaviors>

  <!-- 2) Setup a protocol mapping to allow the service to be accessed via webHttp-->
  <protocolMapping>
    <add scheme="http" binding="webHttpBinding"/>
  </protocolMapping>
</system.serviceModel> 
```

要在浏览器中获取没有所有 xml 的输出，请添加以下内容：

```
<!-- Configure the webHttp standard endpoint -->
<standardEndpoints>
  <webHttpEndpoint>
    <standardEndpoint helpEnabled="true" automaticFormatSelectionEnabled="true" />
  </webHttpEndpoint>
</standardEndpoints> 
```

要允许访问服务元数据（需要轻松创建代理），请将其添加到行为元素中：

```
 <serviceBehaviors>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" />
    </behavior>
 </serviceBehaviors> 
```

我个人更喜欢旧式配置，您可以在其中显式配置端点，如下所示：

```
 <system.serviceModel>
  <services>
    <service name="WcfService1.Service1">
      <endpoint address="" binding="webHttpBinding" contract="WcfService1.IService1"  behaviorConfiguration="webHttpBehavior"/>
    </service>
  </services>
  <behaviors>
    <endpointBehaviors>
      <behavior name="webHttpBehavior">
        <webHttp automaticFormatSelectionEnabled="true"/>
      </behavior>
    </endpointBehaviors>
  </behaviors>
</system.serviceModel> 
```

最后，您可以使用*WCF 服务配置编辑器*使用 gui 进行配置。您可以在 Visual Studio 的工具菜单中找到它。打开后，使用它打开项目的 web.config 并开始编辑。

# c# - 在 IDiposable 类的 Dispose 方法中取消注册外部事件是一种好习惯吗？

> ID：13362333
> 
> 赞同：9
> 
> 时间：2012-11-13T14:18:08.147
> 
> 标签：c#, .net

我阅读了解释如何使用 Dispose 模式的优秀答案，以及它为什么会这样工作。

[正确使用 IDisposable 接口](https://stackoverflow.com/questions/538060/proper-use-of-the-idisposable-interface)

该帖子明确指出您希望在两种不同的情况下使用 Dispose 模式：

1.  摆脱非托管资源（因为我们必须这样做）
2.  摆脱托管资源（因为我们想提供帮助）

我的问题是：

*   当对象在其整个生命周期内订阅外部事件时，在 Dispose 方法中从该事件中注销也是常见/良好的做法吗？你会为此目的实现 IDisposable 接口吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T14:19:36.793

是的你应该。

这是向您的类的消费者表明它具有必须释放的“资源”的最佳方式。（即使事件订阅在技术上不是资源）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T14:42:05.290

`Dispose`在许多（大多数？）情况下，一个对象在被调用后很快就会有资格进行垃圾收集。例如，对于`IDisposable`使用 using 语句实例化的对象，这始终是正确的：

```
using(var myDisposableObject = ...)
{
    ...
} // myDisposableObject.Dispose() called here

// myDisposableObject is no longer reachable and hence eligible for garbage collection here 
```

在这种情况下，在一般情况下，我个人不会因为删除事件订阅而使代码混乱。

例如，一个 ASP.NET`Page`或`UserControl`is `IDisposable`，并且经常处理来自网页上其他控件的事件。`Page`当or被释放时，没有必要删除这些事件订阅`UserControl`，事实上，我从来没有见过一个 ASP.NET 应用程序可以这样做。

**更新**

其他回答者建议您始终取消订阅类`Dispose`方法中的事件`IDisposable`。

在一般情况下，我不同意这一点，尽管可能存在适当的应用程序特定情况。

合乎逻辑的结论是，任何订阅事件的类都应该是`IDisposable`，以便它可以确定地取消订阅 - 我认为没有任何合乎逻辑的理由为什么该建议只适用于碰巧拥有非托管资源的类。我认为这不是一个好的一般建议，原因如下：

*   创建一个类`IDisposable`以便它可以取消订阅事件会增加该类用户的复杂性。

*   取消订阅该`Dispose`方法中的事件需要开发人员跟踪需要删除的事件订阅 - 有点脆弱，因为很容易错过一个（或维护开发人员添加一个）。

*   在类从长期发布者订阅事件的情况下，使用[弱事件模式](http://msdn.microsoft.com/en-us/library/aa970850.aspx)可能更合适，以确保订阅者的生命周期不受事件订阅的影响。

*   在许多情况下（例如，一个 ASP.NET Page 类从其子控件订阅事件），发布者和订阅者的生命周期密切相关，因此无需取消订阅。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T14:21:06.470

我更喜欢双管齐下：

(1) 显式方法`UnregisterFromExternalEvents();`

(2)`Dispose()`对该方法的调用。

这样，任何控制类实例的代码都可以显式取消注册，或者信任`Dispose`以正确处理和处理此类事务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T14:32:27.260

是的，取消注册所有外部事件是一种很好的做法，但由于事件的松散耦合性质，尽管不是非常必要。它从事件生成器中删除订阅者对象的事件入口点引用，yes 会很有帮助。

对于 dispose 方法中取消订阅的部分也可以。Dispose 方法的经验法则是 - “Dispose 方法应该以一种方式卸载资源，如果多次调用 dispose 它仍然有效，即您应该在 dispose 中释放资源，并且只有一次。（这需要在 dispose 之前进行检查）资源）”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T15:14:25.537

是的，这是一个非常好的主意。事件发布者持有对事件订阅者的引用，这将防止订阅者被垃圾收集。（请参阅[事件处理程序是否会阻止垃圾收集发生？](https://stackoverflow.com/questions/298261/do-event-handlers-stop-garbage-collection-from-occuring)）

此外，如果您的事件处理程序使用您正在释放的资源，则事件处理程序（将继续由事件发布者调用）可能会在资源释放后产生异常。

因此，在释放资源**之前**从任何事件中取消注册很重要，尤其是在您使用异步或多线程时，因为在某些情况下，可能会在释放资源和从该事件中取消注册之间引发事件.

下面的代码演示了这一点：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ReleaseEvents
{
    class Program
    {
        public static event EventHandler SomethingHappened;

        static void Main( string[] args )
        {
            using ( var l_dependent = new Dependent() )
            {
                SomethingHappened( null, EventArgs.Empty );
            }

            // Just to prove the point, garbage collection
            // will not clean up the dependent object, even
            // though it has been disposed.
            GC.Collect();

            try
            {
                // This call will cause the disposed object
                // (which is still registered to the event)
                // to throw an exception.
                SomethingHappened( null, EventArgs.Empty );
            }
            catch ( InvalidOperationException e )
            {
                Console.ForegroundColor = ConsoleColor.Red;
                Console.WriteLine( e.ToString() );
            }

            Console.ReadKey( true );
        }
    }

    class Dependent : IDisposable
    {
        private object _resource;

        public Dependent()
        {
            Program.SomethingHappened += Program_SomethingHappened;
            _resource = new object();
        }

        private void Program_SomethingHappened( object sender, EventArgs e )
        {
            if ( _resource == null )
                throw new InvalidOperationException( "Resource cannot be null!" );

            Console.WriteLine( "SomethingHappened processed successfully!" );
        }

        public void Dispose()
        {
            _resource = null;
        }
    }
} 
```

第二次`SomethingHappened`引发事件时，`Dependent`该类将引发 InvalidOperationException。您必须取消注册该事件以防止这种情况发生：

```
 class Dependent : IDisposable
    {
        // ...

        public void Dispose()
        {
            Program.SomethingHappened -= Program_SomethingHappened;

            _resource = null;
        }
    } 
```

当我第一次尝试实现 MVVM 架构时，我实际上遇到了这个问题。当我在 ViewModel 之间切换时，我只是释放了我认为唯一的参考（一个 ActiveViewModel 属性）。我没有意识到我的 ViewModel 订阅的事件将它保存在内存中。随着应用程序运行时间的延长，它变得越来越慢。最终我意识到，我认为我已经发布的 ViewModels 实际上正在继续处理事件（昂贵的）。我必须明确释放事件处理程序来解决这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-30T19:06:00.360

感谢这个问题，我将把我的课程写成：

```
class Foo : IDisposable
{
    public event EventHandler MyEvent;

    /// <summary>
    /// When disposing unsubscibe from all events
    /// </summary>
    public void Dispose()
    {
        if (MyEvent != null)
        {
            foreach (Delegate del in MyEvent.GetInvocationList())
                MyEvent -= (del as EventHandler);
        }

        // do the same for any other events in the class
        //  ....
    }
} 
```

# c# - Unity Serializable 类自定义检查器

> ID：13362336
> 
> 赞同：6
> 
> 时间：2012-11-13T14:18:22.303
> 
> 标签：c#, unity3d, inspector

我有一个非常简单的统一类，UnitRange（具有最小和最大范围）。

```
[System.Serializable]
public class UnitRange {
    public int Minimum;
    public int Maximum;
} 
```

这会显示在检查器中（如果我创建了这种类型的公共变量。）虽然它的默认显示方式不是很好：

![在此处输入图像描述](../Images/801bdfa98d41b9f9f9bbc79b19e05a4a.png)

现在，我想知道如何改变这一点？我找到了如何更改单一行为的检查员，但找不到如何更改其他类的检查员。我希望它只是彼此相邻的两个数字，如下所示：

![在此处输入图像描述](../Images/de0bcd9cc1757640c95e1f910afcac03.png)

这只是一件小事，如果不可能，也不是什么大问题，尽管知道如何做也可以在以后证明更有用。

哦，是的，您可能已经注意到，我使用的是 c#，所以如果有任何示例代码在 c# 中，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:09:01.400

**这在 Unity 的更高版本中不再适用。**

才发现这是不可能的。

做到这一点的唯一方法是，每当您在单一行为中使用它时，为该单一行为提供一个自定义检查器，并在其中为该类提供您的自定义布局。为了使这更容易，您可以制作一个进行布局的方法，然后在每个单一行为中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-03T14:16:32.117

在 Unity4 中，您可以使用[PropertyDrawer](http://docs.unity3d.com/ScriptReference/PropertyDrawer.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T21:06:31.887

一种需要编写较少自定义检查器的解决方案是制作`UnitRange`一个组件。任何需要`UnitRange`你都可以注释的东西，`[RequireComponent (typeof (UnitRange))]`这样你就不必自己添加它了。检查`UnitRange`它是唯一连接的（如果不是，则错误/删除自身等）。

`Start()`然后让您的各个单元在using上缓存附加的单元范围组件，以`GetComponent<UnitRange>()`供以后使用（就像您当前所做的那样，如果您只是将可见性更改为私有并重用）。

最后 - 为 UnitRange 编写看起来不错的检查器。

# java - 无法更改 netbeans 日志记录级别

> ID：13362337
> 
> 赞同：4
> 
> 时间：2012-11-13T14:18:24.633
> 
> 标签：java, macos, logging, netbeans, netbeans-7

这不应该那么复杂...更改 netbeans 默认日志记录级别。

尽管英语不是我的主要语言，但直到现在，我认为我对它有很好的理解。我读过的每一篇文章都说很容易改变它……但我无法改变它。默认情况下，我的 netbeans 开始在 INFO 级别记录。我正在尝试将其降低到最好。

我做了一个小的 POC，启动了一个全新的 java 应用程序：

```
package javaapplication16;

import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.LogManager;
import java.util.logging.Logger;

public class JavaApplication16 {

    private static final Logger logger = Logger.getLogger(JavaApplication16.class.getName());

    public static void main(String[] args) {        
        logger.log(Level.INFO, "hello!");
    }
} 
```

它工作正常。“你好！” 在 netbeans 输出窗口中打印。它也适用于更高级别（警告，严重）。

但是，如果我将其更改为 FINE（或任何其他较低级别）。它没有用。

我做了我在互联网上找到的一切。

我将主要更改为

```
System.setProperty("javaapplication16.level", "100");
System.setProperty("javaapplication16.JavaApplication16", "100");
System.setProperty("java.util.logging.ConsoleHandler.level", "100");
try {
    LogManager.getLogManager().readConfiguration();
} catch (IOException | SecurityException ex) {
    logger.log(Level.SEVERE, null, ex);
}

logger.log(Level.FINE, "hello!"); 
```

更改 netbeans.conf 并添加`-J-Djavaapplication16.level=100`（和其他）。在应用程序根级别创建了一个**logging.properties等......它们既不是单独的也不是组合的。**

拜托，你能帮我，指出我做错了什么吗？

我的环境是：

```
Product Version: NetBeans IDE 7.2 (Build 201207171143)
Java: 1.7.0_07; Java HotSpot(TM) 64-Bit Server VM 23.3-b01
System: Mac OS X version 10.8.2 running on x86_64; US-ASCII; en_US (nb) 
```

我发现有用但对我不起作用的帖子：

*   [http://wiki.netbeans.org/DevFaqLogging](http://wiki.netbeans.org/DevFaqLogging)
*   [Netbeans 记录器](https://stackoverflow.com/questions/9744295/netbeans-logger)
*   [netbeans 日志记录教程](https://stackoverflow.com/questions/10189464/netbeans-logging-tutorial)
*   [如何将控制台中的输出记录到文件中？](https://stackoverflow.com/questions/5882868/how-to-logging-output-in-console-to-file)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-19T00:01:55.697

我遇到了同样的问题......我的解决方案（最终）是创建一个日志配置文件：

```
handlers = java.util.logging.ConsoleHandler
java.util.logging.ConsoleHandler.level = ALL 
```

并将其设置为项目运行选项：

```
>Project
>Properties
>Run
>VM Options: -Djava.util.logging.config.file=/home/myuser/logging.properties 
```

请注意属性文件的绝对路径，因为我无法从正在运行的类路径中加载它（尝试了默认项目文件夹，默认打包，在包内......什么都没有），也许当你试图加载属性文件，因为有时很难正确确定当前类路径的位置。我基于[这个线程](https://forums.netbeans.org/topic24305.html)来寻找解决方案。Netbeans 版本 7.2 和 JDK jdk1.7.0_21。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:26:54.083

```
 System.setProperty("java.util.logging.ConsoleHandler.level", "FINER"); 
```

您需要使用表示级别的字符串，而不是它们的数字等价物。该行是使用 JUL 从工作代码中复制粘贴的。从那以后，我发现[log4j](http://logging.apache.org/log4j/)是一个更好的 Java 登录框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-12T19:43:42.837

ConsoleHandler 也有一个级别，所以我分配了一个新的 ConsoleHandler 并将 Logger 和 ConsoleHandler 设置为所需的级别。那行得通！

```
 private static final Logger myLogger=Logger.getLogger(OrderApiClientJersey2_51_1.class.getName());
    static
    {
        // Default consoleHandler and Logger only log at INFO level
        Handler consoleHandler = new ConsoleHandler();  
        consoleHandler.setLevel(Level.ALL);
        myLogger.setLevel(Level.ALL);
        myLogger.addHandler(consoleHandler);
        myLogger.log(Level.FINEST, "Test Output");
    } 
```

# jquery - 未捕获的异常：无法在初始化之前调用滑块上的方法；试图调用方法“值”

> ID：13362342
> 
> 赞同：0
> 
> 时间：2012-11-13T14:18:39.230
> 
> 标签：jquery, html, jquery-ui, html5-video, jquery-slider

[我正在根据这里](http://dev.opera.com/articles/view/custom-html5-video-player-with-css3-and-jquery/)的教程编写自己的视频播放器

当我加载页面时，我收到标题错误。

这是处理滑块的代码：

```
//create html structure
//main wrapper
var $video_wrap = $('<div></div>').addClass('logan-video-player').addClass(options.theme).addClass(options.childtheme);
//controls wraper
var $video_controls = $('<div class="logan-video-controls"><a class="logan-video-play" title="Play/Pause"></a><div class="logan-video-seek"></div><div class="logan-video-timer">00:00</div><div class="logan-volume-box"><div class="logan-volume-slider"></div><a class="logan-volume-button" title="Mute/Unmute"></a></div></div>');                     
$lVideo.wrap($video_wrap);
$lVideo.after($video_controls);

//get new elements
var $logan_video_seek = $('.logan-video-seek', $video_container);

var seeksliding;            
var createSeek = function() {
    if($lVideo.attr('readyState')) {
        var video_duration = $lVideo.attr('duration');
        $logan_video_seek.slider({
            value: 0,
            step: 0.01,
            orientation: "horizontal",
            range: "min",
            max: video_duration,
            animate: true,                  
            slide: function(){                          
                seeksliding = true;
            },
            stop:function(e,ui){
                seeksliding = false;                        
                $lVideo.attr("currentTime",ui.value);
            }
        });
        $video_controls.show();                 
    } else {
        setTimeout(createSeek, 150);
    }
};

createSeek();

var gTimeFormat=function(seconds){
    var m=Math.floor(seconds/60)<10?"0"+Math.floor(seconds/60):Math.floor(seconds/60);
    var s=Math.floor(seconds-(m*60))<10?"0"+Math.floor(seconds-(m*60)):Math.floor(seconds-(m*60));
    return m+":"+s;
};

var seekUpdate = function() {
    var currenttime = $lVideo.attr('currentTime');
    if(!seeksliding) $logan_video_seek.slider('value', currenttime);
    $logan_video_timer.text(gTimeFormat(currenttime));                          
};

$lVideo.bind('timeupdate', seekUpdate); 
```

我不是 jquery 爱好者，这是我第一次使用插件，所以我不知道该怎么做。在谷歌上也找不到太多。

谢谢你的时间

**编辑**
我已经浏览了滑块小部件的 JQuery UI API 规范，发现我可能错误地设置了滑块值：

```
$logan_video_seek.slider('value', currenttime) // see seekUpdate() function above 
```

我已将其更改为如下所示：

```
$logan_video_seek.slider('option', 'value', currenttime); 
```

不幸的是，我遇到了同样的错误：

> 未捕获的异常：无法在初始化之前调用方法：试图调用方法“选项”

我在滑块 api 文档中找不到任何东西来初始化滑块。我确定会在`createSeek`上面的函数中完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T07:03:51.053

您的代码`createSeek()`正在尝试在不阻止进一步执行的情况下初始化滑块（您无需等待成功并继续不管是否发生了初始化），然后，当它`seekUpdate`尚未准备好时，`$lVideo.attr('readyState')`可能是错误的。

尝试在调用之后或之前移动`$lVideo.bind('timeupdate', seekUpdate);`，`createSeek`如下`$video_controls.show();`所示：

```
function createSeek() {
  if ($lVideo.attr('readyState')) {
    var video_duration = $lVideo.attr('duration');
    $logan_video_seek.slider({
    ...
    });
    $lVideo.bind('timeupdate', seekUpdate); // <-- notice line here
    $video_controls.show();
  } else {
    setTimeout(createSeek, 150);
  }
}; 
```

PS：你为什么不像往常一样简单地声明函数
`function myEvilFn() { /* evil code */ }`呢？
调试时，您将能够在堆栈框架中看到函数的名称，您也不应该关心它们的顺序。如果您想隐藏它们，请将它们放在另一个函数或 lambda 中）。但是使用赋值 ( `var fn=function(){...}`) 只会使它们的顺序变得不必要地重要。

# c++ - 为什么字符 'a' 没有自动转换为 97？

> ID：13362343
> 
> 赞同：3
> 
> 时间：2012-11-13T14:18:43.557
> 
> 标签：c++, integer, character, inputstream

```
char input1;
std::cout << "input1 : ";
std::cin >> input1;

int input2;
std::cout << "input2 : ";
std::cin >> input2;

std::cout << input1 << std::endl;
std::cout << input2 << std::endl;

return 0; 
```

我在 input1 处写了“a”，在 input2 处写了“a”。

```
Ouput is like this.
input1 : a
input2 : a
a
-858993460 
```

我很好奇......'a'宪章是 97 年 12 月。为什么打印-858993460？'a' 不会自动转换为 97？为什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-13T14:21:58.190

`a``int`, 作为一个字符串，不能通过以下规则转换为 an `std::cin`。考虑一下：`a`is not a valid integer in base 10.`std::cin`将无法将*字符串* `"a"`转换为`int`.

它打印的原因`-858993460`是因为`int`没有初始化，所以它可以打印任何东西，或者什么都不打印，或者做它想做的任何事情（查找未定义的行为）。

尝试这样的事情：

```
char input2_chr;
std::cin >> input2_chr;
int input2 = input2_chr; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T14:21:41.983

我认为输入只是失败了，您看到的值是未定义行为的结果（`input2`从未写入）。

如果您尝试读取整数，则字符“a”无效，因此操作员不会接受它`>>`。

您似乎以某种方式期望输入应将字符转换为该字符的 ASCII 代码，以便为您提供您请求的整数类型结果。语言不支持这种推理。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T14:27:23.610

首先，您要求输入一个字符，因此您得到了流中的第一个非空白字符。在第二个中，您要求输入一个整数，因此流会跳过空格（就像它总是对 所做的那样 `>>`）并尝试解析一个整数。由于`"a"`不能是整数值的开头，因此流设置了错误状态（ `failbit`）并返回，*而不*修改`input2`. 当您输出未初始化的变量时，您有未定义的行为。（ 在没有首先检查输入是否成功之前，您*永远不应该使用您输入的变量。）*

根据您的描述，听起来您正在尝试输入一些二进制格式。为此，您必须以二进制模式打开流，确保它充满了`"C"`语言环境，然后使用 `istream::get`or `istream::read`。（当然，您必须知道您正在读取的二进制格式是什么，以便能够将您读取的未格式化字节转换为您需要的实际信息。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-13T14:34:08.833

例如， [Aardvard 已经回答](https://stackoverflow.com/a/13362394/464581)了，您看到的是任意原始值，在 C++ 标准中称为**不确定值**，因为输入操作失败并且`input2`没有分配新值。

要输出变量值的十进制表示`char`，只需将其转换为`int`以指示输出流将其视为整数。

将其转换为最简单的方法`int`是通过在表达式中使用变量来鼓励**隐式提升**，例如简单地`+`在它前面添加一个符号：

```
#include <iostream>
using namespace std;

int main()
{
    char const  ch  = 'a';
    cout << "'" << ch << "' = " << +ch << endl;
} 
```

输出：

```
'a' = 97

```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-13T14:22:18.703

因为您在 input2 处读取整数。`a`不是整数。`input2`因此什么都不会被读取，并且会保持原来的值。

在这种情况下，它将是一些随机值，原因`input2`是未初始化。

您可以通过检查来检查读取是否成功`cin.good()`

# html - div、float或absolute的自动扩展宽度？

> ID：13362345
> 
> 赞同：1
> 
> 时间：2012-11-13T14:18:56.187
> 
> 标签：html, css

## 问题

我有一个框，其中包含有关我网站上用户的动态信息。由于数据是动态的，盒子必须自动适应内容。我没有问题让它工作，如下所示：

[示例 - jsFiddle](http://jsfiddle.net/vDgHq/2/)。

如您所见，如果内容较长，则`div#dd_ui`只是相对扩展，并且元素保持在正确的位置。

尽管上面的例子有效，但我实际上希望盒子看起来有点不同。我希望两个底部列的宽度始终彼此相同（但相对调整大小），因此允许它们的内容居中对齐。换句话说，我希望盒子看起来像这样：

![用户信息框（新外观）](../Images/981254396872fa2b7da41e5b7cc1d70e.png)

但是，当上述内容增加时，问题就出现了，因为页脚列也必须相对扩展，如下所示：

![扩展的用户信息框（新外观）](../Images/0f7c287198dfc0187006e962a8d07b78.png)

## 我的问题

*如果不使用 javascript （在这种情况下我*不会使用），我想不出任何好的方法来实现这一点。**任何人都可以看到使用 CSS 实现这一目标的好方法吗？**

我考虑过使用`width:50%;`，但这不起作用，因为两个 div之间有一个 1 像素的分隔线*（很可能是一个边框） 。*

我尝试过的一切都没有奏效，因此除了上面的 jsFiddle 中包含的代码之外，我真的没有任何代码可以用作起点。我希望这就足够了

非常感谢任何帮助:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:20:09.783

试试下面的代码：

如果 CSS 声明 ( `#dd_ui div#top div`) 的第 5 行被删除，顶部 DIV 将使用 50% 的宽度，但在这种情况下，右上角的 div 内容会出现问题。

```
 <!DOCTYPE html>
  <html><head> 
  <style>
  #dd_ui {position:absolute; top: 10px; left: 10px; padding:0px; border: 1px solid #666; font-family:arial;}
  #dd_ui div {position: relative;}
  #dd_ui div#bottom {border-top: 1px solid #666; max-height: 75px;}
  #dd_ui div div {display: inline-block; top: 0px; left: 0px; width: 50%; margin: 0px; vertical-align:top; }
  #dd_ui div#top div {position:relative; width: auto;}
  #dd_ui div#bottom div {border-left: 1px solid #666; margin-right:-1px;}
  #dd_ui div#bottom div:first-child {margin-right: 0px; border-left: 0px;}
  #dd_ui div div p {position:relative; left: 50%; display:block; width: 100%; margin: 0px; margin-left: -50%; padding:0px; border: 2px solid red;}
  #dd_ui div div span {position: relative; display: block; text-align: left; line-height: 100%;}
  #dd_ui div div.right span {text-align: right;}
  #dd_ui_name {margin:20px 20px 0px; font-size:18px; font-weight:bold;}
  #dd_ui_company {margin:5px 20px 10px; font-size:12px; color:#666;}
  #dd_ui_email {margin:23px 20px 0px; font-size:14px; font-weight:bold; width: auto;}
  #dd_ui_ac_number {margin:5px 20px 10px; font-size:12px; color:#666; }
  #dd_ui .title {font-size:12px; color:#666; margin:20px 20px 0;}
  #dd_ui .value {font-size:18px; font-weight:bold; margin:5px 20px 20px;}
  </style>
  </head><body>
  <div id="dd_ui"><div id="top"><div class="left">
        <span id="dd_ui_name">Full Name Here</span>
        <span id="dd_ui_company">Director, Company Name Limited</span>
  </div><div class="right">
        <span id="dd_ui_email">askjdhasjkhasdjkasdhaksjdhaskjdhakjdhaskdj</span>
        <span id="dd_ui_ac_number">Account Number: 5</span>
  </div></div><div id="bottom"><div class="left">
        <span class="title">Last logged In</span>
        <span class="value">09-Nov-2012 15:35</span>
  </div><div class="right">
        <span class="title">Registered With</span>
        <span class="value">2 Companies</span>
  </div><div>
  </body></html> 
```

希望对您有所帮助，您可以玩得更远。

**更新**- @BenCarey

上面的代码是正确的，但是当内容大于容器时，有一些问题会导致单元格换行。以下 jsFiddle 包含正确的代码以防止单元格换行。

[jsFiddle](http://jsfiddle.net/HUsZW/3/)

# python - 使用 Python 编辑电子表格（通过 CSV 文件传递 ）

> ID：13362346
> 
> 赞同：1
> 
> 时间：2012-11-13T14:19:13.957
> 
> 标签：python, csv

我有一个包含以下字段的电子表格：

```
id age smoker do sport
1   35  yes    rare
2   40  no     frequently
3   20  no     never 
4   ..  ..     .. 
```

我想创建一个 Python 脚本来编辑这个通过 csv 文件转换传递的电子表格。

“是”变为 1，“否”变为 0，“罕见”变为 0，“经常”变为 1，“从不”变为 2。

我已将电子表格保存为 csv 文件，使用分隔符作为 ';' 和quotechar'“'。

现在我写了这段代码：

```
import csv
filecsv=open("file.csv","r")
reader=csv.reader(filecsv, delimiter= ';' , quotechar=' " ')
out=open("outfile.csv","w")
output=csv.writer(out, delimiter= ';' , quotechar=' " ')

for row in reader:
    for field in row:
        if row[field]=='yes':
                .
                .
                .
                . 
```

但我不知道如何继续......

有人可以告诉我如何使用 python 进行这些更改吗？

使用 Python 列表或字典更好吗？

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:26:08.213

尽管 CSV 文件看起来像电子表格，但它们的核心只是文本文件。这意味着您实际上不需要使用 csv 库，而是将其作为简单字符串读取。

将文件作为字符串后，您可以使用正则表达式来转换相关值。这是一个例子：

```
import re
o = open("output","w")
data = open("file").read()
o.write( re.sub("someword","newword",data) )
o.close() 
```

请记住，您需要`re.sub()`为每个要转换的值调用一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:27:05.340

看到您对 Python 的[csv 库](http://docs.python.org/2/library/csv.html)的了解程度，对于输入 csv 的每一行，使用您需要的更改创建一个新行并将其写入一个新的 csv 文件应该是微不足道的。

请注意 csv 阅读器如何将每一行视为一个列表。接下来看csv writer的[`writerow()`](http://docs.python.org/2/library/csv.html#csv.csvwriter.writerow)方法；它需要一个 python 列表并将其写入 csv 行。您需要做的就是一次读取一行，进行您想要的更改并将其吐回给作者。使用您的代码：

```
for row in reader: #for each row in the input
    outrow = list(row) # make a copy of the row. I'm not sure if you NEED to do this, but it doesn't hurt.

    if outrow[2] == "yes": #if the value in the 3rd column, "smoker", is "yes"
        outrow[2] = 1 #change it to 1
    elif outrow[2] == "no": #if it's "no"
        outrow[2] = 0 #change it to 0.

    #repeat this process for outrow[3] (meaning column #4, "do sport")

    output.writerow(outrow) 
```

您可能注意到 python 调用第 3 列 2 和第 4 列 3 这是因为 python 从 0 开始计数（所以第 1 列是第 0 列）。您应该能够按照此示例进行所需的所有更改。

完成后不要忘记关闭文件！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T14:25:01.180

如果您将始终使用该格式并且您想逐行替换：

```
replacements_dict = {
  'yes': 1,
  'no' : 0,
  'rare': 0,
  'frequently': 1,
  'never': 2
}

for row_list in reader:
   output.writerow([
     row_list[0], 
     row_list[1]
     replacements_dict[row_list[2]],
     replacements_dict[row_list[3]]
    ]) 
```

您还可以将您的 csv 作为字符串读入内存，然后替换像 georgesl 建议这样的词

# android - Apache Commons net API 无法在 Android ICS(4.0) 上运行

> ID：13362352
> 
> 赞同：4
> 
> 时间：2012-11-13T14:19:30.200
> 
> 标签：android, apache, android-4.0-ice-cream-sandwich, ftp-client

我一直在 android 2.1 上测试 Apache commons API 3.1，到目前为止运行良好。现在我试图在 Android ICS(4.0) 上使用它，但我遇到了一个问题：当我使用“ftp.connect”命令时，应用程序抛出了一个未处理的异常

这里只是一个简单的代码，只是为了显示应用程序何时崩溃：

```
 FTPClient ftp = new FTPClient(); //so far is ok

   try {
      ftp.connect("127.0.0.1",21); //<-throws a unhandled exception (used to work on android 2.1)

    } catch (Exception e){
      Log.e("error",e.getMessage());// it doesn't reach this block
   } 
```

这就是我的 logCat 中的内容：

```
W/dalvikvm(1105): threadid=1: thread exiting with uncaught exception (group=0x409961f8) 
```

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T14:39:50.100

我猜你正面临流行的[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)。您需要将网络和互联网访问语句放在单独的线程中（与主线程不在同一个线程中）或异步任务中。[此处](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)较旧的 StackOverflow 线程中的更多解释

# xml - 将 XSD 的负载映射到 DB

> ID：13362358
> 
> 赞同：1
> 
> 时间：2012-11-13T14:19:49.150
> 
> 标签：xml, database, oracle, xsd, mapping

我的任务是创建从 xml 到 db 的转换器（Oracle 11）。

我有很多（大约 100 个）客户提供的 xsd。每个 xsd 都描述了非常复杂的数据。有些 xsd 有通用类型，但每个 xsd 都声明了里面的所有类型，所以没有通用类型的 xsd。

未提供 DB 模型。但是客户端拒绝了基于使用 oracle xmldb 的变体。

我的计划是：

1.  使用 xmlspy 生成 db 模型；
2.  使用 jaxb 生成 java 模型；
3.  使用 hibernate 将 java 映射到 db 模型；
4.  使用 jaxb 读取 xml 数据到 java 模型；
5.  使用休眠存储数据。

但是当我尝试生成 db 模块时，我看到 xmlspy 生成了超过 5000 个表。即使我可以减少它们的数量，仍然有太多的工作来验证和修复表之间生成的关系。还有很多工作来生成 java 模型并将其映射到数据库。

有没有其他方法可以解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:34:40.973

如果不分析 XML 数据并将其映射到数据库中的关系数据模型，这是一项不可能完成的任务。

您概述的方法是一个相当机械的过程，它展示了自动化这个过程是多么困难......您的 XSD 中的每个 XSD 类型在 Java 中生成了一个唯一的对象类，然后通过休眠...

如果您的模式使用类型继承，这可能会为您提供有关关系数据结构的一些线索（继承公共父类型的 XSD 类型可能属于同一个表）。也许其他人可以提供其他常见的模式来提防。

# 更新

我建议仔细查看底层 XML 数据。

我记得以前的一个 Web 服务项目，我们根据收到的原始 XML 数据完全重写了客户的模式。事实证明，他们复杂的 XSD 类型完全是多余的，只是增加了复杂性。

# makefile - Cmake：添加子项目和添加子文件夹

> ID：13362359
> 
> 赞同：2
> 
> 时间：2012-11-13T14:19:55.007
> 
> 标签：makefile, cmake

我目前想将一些自己编写的类（“mycode.cpp”和“mycode.hpp”）添加到一个使用 Cmake 配置的大型现有 C++ 项目中。这些类位于现有项目的“lib/pointrender”文件夹中的“myfolder”中（参见下面的虚拟层次结构）。

```
|- libs 
|    |- core
|    |   |- ...
|    |- pointrender
|        |- myfolder
|        |     |- mycode.cpp
|        |     |- mycode.hpp
|        |- existingclasses.cpp
|        |- existingclasses.hpp
|        |- project.cmake
|- CMakeLists.txt 
```

在 CMakesLists.txt 中，pointrender 文件夹被声明为子项目。

```
declare_subproject(libs/pointrender) 
```

如何最好地将我的代码添加到现有的 cmake 配置中？我是否将其添加为 project.cmake 中的子文件夹，并在 myfolder 中使用单独的 CMakeLists.txt？或者我最好将它添加为带有单独 project.cmake 文件的子项目？有什么不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:02:13.010

这`project.cmake`是`include()`d be some `CMakeLists.txt`and get's 作为其中的一部分执行。您正在使用的项目的作者出于某种原因推出了此功能，因此使用他们的基础架构添加自定义代码可能会更好。

执行此操作的通常方法是编写自己的`CMakeLists.txt`并`add_subdirectory()`从上层对其进行 ing。

如果您需要更多详细信息，您应该使用`project.cmake`内容更新您的问题。

# java - 您如何制作一种可以为每个参数一次更改一个参数的方法？

> ID：13362361
> 
> 赞同：0
> 
> 时间：2012-11-13T14:20:02.660
> 
> 标签：java, class, methods

你如何制作一个能够改变对象的每个参数的方法（只有 1 个）？您一次只能选择一个参数。

嗯，我的想法是这样的。我有一个对象，有 3 个变量（例如， object(first,second,third) ），我想更改对象的第一个参数，第二个和第三个...

好的，我知道如何制作一次更改一个参数的方法（但是如果我想制作一个要求所有 3 个参数的方法，我需要制作 3 个或 4 个方法。）ec，但是有没有办法只做一种方法，可以为每个参数做这一切吗？例如...

```
 double count(object.)  /*After the point you can input which 
 parameter you want to change. Method asks only for 1 object parameter,
 but you can use this method for every parameter of the object. */
    {
      return object. +19;
    } 
```

当我想调用该方法时，我可以做这样的事情

```
 count(object.first)
 count(object.second) 
```

你可以只用一种方法完成这一切。我真的不知道如何解释得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:26:17.163

您可以使用[反射](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/package-summary.html)来获取成员的实例，但这既繁重又缓慢。我更喜欢一个`HashMap<String, AtomicInteger>`：

```
public class MultiCounter {
    private Map<String, AtomicInteger> counters = new HashMap<>();
    public synchronized int count(String name) {
        AtomicInteger c = counters.get(name);
        if (c==null) {
            c = new AtomicInteger(0);
            counters.put(name, c);
        }
        return c.incrementAndGet();
    }
} 
```

稍微复杂一点，您还可以为您的 key 定义一个枚举：

```
enum Key {
    first,
    second
}

private Map<Key, AtomicInteger> counters = new EnumMap<Key, AtomicInteger>(Key.class);
public synchronized int count(Key key) {
    AtomicInteger c = counters.get(key);
    if (c==null) {
        c = new AtomicInteger(0);
        counters.put(key, c);
    }
    return c.incrementAndGet();
} 
```

这将允许

```
 int count = myCounter.count(Key.first); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:32:53.023

如果这些参数是对象并且没有像 int 或 double 这样的原始类型，那么您只需将它们传递到您的方法中，更改它们的属性值并保留它（您不需要返回任何东西）。您的调用方法将能够处理这些更改。您的参数是按值传递的（这意味着您传递的对象将被复制并且您的方法正在使用新副本）但它们的属性仍然链接到您内存中的同一区域（这意味着您的对象的属性确实具有相同的引用内存作为对象副本的属性）。

```
public void testMethod() throws Exception {
        MyObject param1 = new MyObject();
        MyObject param2 = new MyObject();
        MyObject param3 = new MyObject();

        setCountUp(param1, param2, param3);

        System.out.println(param1.getCount());
        System.out.println(param2.getCount());
        System.out.println(param3.getCount());
    }

    private void setCountUp(MyObject param1, MyObject param2, MyObject param3) {
        param1.setCount(param1.getCount() + 1);
        param2.setCount(param2.getCount() + 2);
        param3.setCount(param3.getCount() + 3);
    }

    private static class MyObject {
        private long count = 1;

        public void setCount(long count) {
            this.count = count;
        }

        public long getCount() {
            return count;
        }
    } 
```

结果将是：2 3 4

# c# - 使用字符串格式优化速度

> ID：13362363
> 
> 赞同：1
> 
> 时间：2012-11-13T14:20:05.763
> 
> 标签：c#, sharepoint, sharepoint-2010, string-formatting

我有一个应用程序可以搜索所有 SharePoint 场功能并查找特定功能。它拉回的名称格式难看，因此我通过比较运行它们以清理它们，然后将它们添加到 Xml 节点中。它是这样的：

```
 if (featureName.Contains("target feature"))
    {
      if (featureName.Equals(Constants.IMAGING_FEATURE_CACHE_SERVICE))
      {
        string cleanFeatureName = "Caching Service Feature";
        XElement cleanName = new XElement("Item", cleanFeatureName);
        infoTree.Add(cleanName);
      }
      if (featureName.Equals(Constants.IMAGING_FEATURE_IMAGE_SERVICE))
      {
       string cleanFeatureName = "Imaging Service Feature";
       XElement cleanName = new XElement("Item", cleanFeatureName);
       infoTree.Add(cleanName);
      }
      if (featureName.Equals(Constants.IMAGING_FEATURE_HEALTH_RULES))
      {
       string cleanFeatureName = "Health Rules";
       XElement cleanName = new XElement("Item", cleanFeatureName);
       infoTree.Add(cleanName);
      }
      if (featureName.Equals(Constants.IMAGING_FEATURE_INFRASTRUCTURE))
      {
       string cleanFeatureName = "Imaging Infrastructure";
       XElement cleanName = new XElement("Item", cleanFeatureName);
       infoTree.Add(cleanName);
      }
      if (featureName.Equals(Constants.IMAGING_FEATURE_MONITORING))
      {
       string cleanFeatureName = "Monitoring";
       XElement cleanName = new XElement("Item", cleanFeatureName);
       infoTree.Add(cleanName);
      }
     } 
```

完成此测试平均需要大约 2.3-2.4 秒。有没有更好的方法可以以提高速度的方式格式化/替换这些字符串？我正在考虑做一个 switch / case 语句。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:24:38.263

您可以将所有需要的替换信息放入`Dictionary<string,string>`...这将删除所有`if`逻辑，并留下一个非常快速的字典查找以`cleanFeatureName`从相应的`Constants...`

本质上，您基本上会`Dictionary`在启动时填写一次，然后您的代码将查找类似于以下内容：

```
if (YourDictionary.ContainsKey (featureName))
{
string cleanFeatureName = YourDictionary[featureName];
XElement cleanName = new XElement("Item", cleanFeatureName);
infoTree.Add(cleanName);
} 
```

这样你就不需要任何`featureName`特定的`if`子句......

如果您`Dictionary`从不同的线程访问，然后使用`ConcurrentDictionary`它是一个非常快的任何线程安全字典实现在 .NET4 及更高版本中可用...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:33:24.857

对于第一个“如果”为真的电话有多少比例？

我需要知道这一点才能给你一个完整的答案。如果答案是“大多数”，那么完全删除该测试可能会更快。试试看，无论如何。

但是，对于初学者来说，尝试将所有 .Equals() 更改为 .Equals(target, StringComparison.Ordinal) 看看这是否有很大的不同。

您也可以尝试用 switch 语句替换所有 .Equals() 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T14:36:15.217

你可以做一些不同的事情来加速你的代码。我确定 switch 语句可能会有所帮助，但关于 string.Equals 你应该知道的一件事是，如果你使用相同的编码，你应该尝试使用 StringComparison Enum 进行重载。使用 Ordinal 或 OrdinalIgnoreCase（如果您不关心大小写）实际上比默认的 Culture 或 InvariantCulture 快得多。如果在具有不同字符集的不同文化机器上工作，这可能会影响您的代码。

```
if (featureName.Equals(Constants.IMAGING_FEATURE_CACHE_SERVICE, StringComparison.Ordinal)) 
```

这是你的 swich 的样子。显然在案例之间填写您的代码，并且在每个案例结束时总是有一个中断（除非返回）。您还需要添加一个默认案例，尽管您可以在其中放置一个中断以不执行任何操作。

```
if (featureName.Contains("target feature"))
{
    switch(featureName)
    {
        case Constants.IMAGING_FEATURE_CACHE_SERVICE:
            string cleanFeatureName = "Caching Service Feature";
            XElement cleanName = new XElement("Item", cleanFeatureName);
            infoTree.Add(cleanName);
            break;
        case Constants.IMAGING_FEATURE_IMAGE_SERVICE:
            //Code here
            break;
        case Constants.IMAGING_FEATURE_HEALTH_RULES:
            //etc
            break;
        default:
            break;
    }
} 
```

# wpf - WPF：如何获取给定元素的当前活动情节提要/动画？

> ID：13362365
> 
> 赞同：2
> 
> 时间：2012-11-13T14:20:08.613
> 
> 标签：wpf, animation, storyboard

我正在从元素的动画不透明度背后的代码运行一些动画。有两种动画，一种是将 Opacity 从当前值减少到 0，另一种是将 Opacity 从当前值增加到 1。问题是可能会发生其中一个动画可能开始而前一个动画未完成的情况......所以他们都在同时改变 Opacity 属性，这看起来很糟糕。我需要的是在开始这些动画的下一个动画之前停止任何当前动画（故事板）。我希望我足够清楚......所以问题基本上是，对于给定的元素，我怎样才能获得活动的故事板/动画以阻止它们？这是针对代码背后的问题，因为 XAML 定义的动画似乎会自动执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:00:42.000

我相信您想使用[SkipStoryboardToFill](http://msdn.microsoft.com/en-gb/library/system.windows.media.animation.skipstoryboardtofill.aspx)让当前故事板跳到最后，然后运行下一个。无论参见[如何：在故事板启动后使用事件触发器控制故事板](http://msdn.microsoft.com/en-gb/library/ms744905.aspx)或[如何：在故事板开始后控制故事板，](http://msdn.microsoft.com/en-gb/library/ms741997.aspx)以在您当前拥有的代码隐藏中处理这些。

# javascript - extjs 4.1.0 控制器的 init 函数不会被调用

> ID：13362367
> 
> 赞同：1
> 
> 时间：2012-11-13T14:20:20.940
> 
> 标签：javascript, extjs, javascript-framework, extjs4.1, extjs-mvc

我对 javascript 和 extjs 都很陌生，在尝试执行 extjs 4.1 MVC Architecture 教程的步骤时遇到了这个问题。一开始一切都很好，但是当我尝试将控制器添加到应用程序时出现问题。应用程序启动函数和控制器初始化函数都没有被调用。[我在这里](http://afsweb.ms.com/ms/dev/ria/ext/4.1.0/src/ext-4.1.0-gpl/docs/index.html#!/guide/application_architecture)使用了示例代码，但我无法让“定义控制器”步骤正常工作。它发现 Users.js 没有错误消息，但它仍然不会调用控制器的 init 函数。如果我删除“控制器：['Users']”，将调用应用程序启动。有什么我想念的想法吗？

应用程序.js：

```
Ext.application({
requires: ['Ext.container.Viewport'],
name: 'Account Manager',

appFolder: 'app',

controllers: ['Users'],

launch: function() {...} 
```

用户.js：

```
Ext.define('app.controller.Users', {
extend: 'Ext.app.Controller',

init: function() {
        console.log('Initialized Users!');
}
}); 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:05:18.073

您的错误是（Ext.Application）

```
name: 'Account Manager', 
```

这是**[name 属性](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Application-cfg-name)**的 API 链接。

将其更改为：

```
name: 'app', // I would use camelcase here 
```

***解释：***

不允许在应用程序名称中使用空格。此外，它更像是一个名称空间，而不是一个名称。之后，您必须在所有类中使用它（这将是您的视图、控制器模型和存储的命名空间）。

# eclipse - 撤消 Eclipse 远程系统中已编辑的文件

> ID：13362369
> 
> 赞同：0
> 
> 时间：2012-11-13T14:20:33.740
> 
> 标签：eclipse, remote-server

我使用 Eclipse 远程系统连接到远程项目。我在 Eclipse Remote Systems 中编辑了一个 html 文件并保存并关闭了编辑后的文件。是否有可能撤消此文件中的更改？

# spring - 使用 spring-test-mvc jsonpath 进行测试返回 null

> ID：13362372
> 
> 赞同：3
> 
> 时间：2012-11-13T14:20:47.370
> 
> 标签：spring, mockito, spring-test, jsonpath, spring-test-mvc

我正在使用 Spring 的“spring-test-mvc”库来测试 Web 控制器。我有一个非常简单的控制器，它返回一个 JSON 数组。然后在我的测试中我有：

```
@Test
public void shouldGetAllUsersAsJson() throws Exception {
    mockMvc.perform(get("/v1/users").accept(MediaType.APPLICATION_JSON))
            .andExpect(content().mimeType(MediaType.APPLICATION_JSON))
            .andExpect(jsonPath("fName").exists());
} 
```

上面的测试返回：

```
java.lang.AssertionError: No value for JSON path: fName 
```

为了快速检查我实际得到的结果，我运行了以下测试：

```
@Test
public void shouldPrintResults() throws Exception {
    mockMvc.perform(get("/v1/users").accept(MediaType.APPLICATION_JSON))
            .andDo(print());
} 
```

它在正文中返回正确的 JSON 数组`MockHttpServletResponse`

我不确定为什么`jsonPath`无法`fName`在 JSON 数组中看到。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T15:57:59.210

如果您将 json 路径依赖项添加到 maven，或者将 jar 添加到您的 lib，那么它将起作用。我认为 Spring 在最新的 Spring 3.2.0 RC1 版本中不包括 jsonPath 依赖项。我猜这对于 Spring-Test-MVC 独立项目也是一样的。

这是 Maven 的依赖项：

```
<dependency>
    <groupId>com.jayway.jsonpath</groupId>
    <artifactId>json-path</artifactId>
    <version>0.8.1</version>
    <scope>test</scope>
</dependency> 
```

您可能还需要 hamcrest 库来使用 jsonPath("$.test").value("test")

```
<dependency>
    <groupId>org.hamcrest</groupId>
    <artifactId>hamcrest-library</artifactId>
    <version>1.3</version>
    <scope>test</scope>
</dependency> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-13T21:52:31.370

你的 json 响应体是什么样的？您可以通过执行`.andDo(print())`

你可能想试试`jsonPath("$.fName")`。

这是假设您的 json 响应是： `{"fName":"first name"}`

如果您的响应是一个数组，那么您需要`jsonPath("$[0].fName")`一个响应，例如： `[{"fName":"first name"},{"fName":"first name #2"}]`

您可以在以下位置查看更多示例： http: [//goessner.net/articles/JsonPath/](http://goessner.net/articles/JsonPath/)

# sql - 通过分组更新 SQL 查询

> ID：13362373
> 
> 赞同：3
> 
> 时间：2012-11-13T14:20:49.350
> 
> 标签：sql, oracle

我正在处理 Oracle 表中的一些遗留数据并具有以下内容

```
--------------------------------------------
| RefNo                         |     ID   |                          
--------------------------------------------
| FOO/BAR/BAZ/AAAAAAAAAA        |      1   |
| FOO/BAR/BAZ/BBBBBBBBBB        |      1   |
| FOO/BAR/BAZ/CCCCCCCCCC        |      1   |
| FOO/BAR/BAZ/DDDDDDDDDD        |      1   |
-------------------------------------------- 
```

对于每个 /FOO/BAR/BAZ/% 记录，我想让 ID 成为唯一的递增数字。有没有办法在 SQL 中做到这一点？

提前致谢

**编辑**

抱歉没有具体说明。我有几组记录/FOO/BAR/BAZ/、/FOO/ZZZ/YYY/。这些其他（示例）组中的每一个都需要进行相同的转换。不能使用 recnum 我希望 ID 从 1 开始，递增，对于我必须更改的每组记录。

很抱歉把我的第一篇文章弄得一团糟。输出应该是

```
--------------------------------------------
| RefNo                         |     ID   |                          
--------------------------------------------
| FOO/BAR/BAZ/AAAAAAAAAA        |      1   |
| FOO/BAR/BAZ/BBBBBBBBBB        |      2   |
| FOO/BAR/BAZ/CCCCCCCCCC        |      3   |
| FOO/BAR/BAZ/DDDDDDDDDD        |      4   |
| FOO/ZZZ/YYY/AAAAAAAAAA        |      1   |
| FOO/ZZZ/YYY/BBBBBBBBBB        |      2   |
-------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:47:01.837

让我们尝试这样的事情（Oracle 版本 10g 及更高版本）：

```
SQL> with t1 as(
  2    select 'FOO/BAR/BAZ/AAAAAAAAAA' as RefNo,  1 as ID from dual union all
  3    select 'FOO/BAR/BAZ/BBBBBBBBBB',  1 from dual union all
  4    select 'FOO/BAR/BAZ/CCCCCCCCCC',  1 from dual union all
  5    select 'FOO/BAR/BAZ/DDDDDDDDDD',  1 from dual union all
  6    select 'FOO/ZZZ/YYY/AAAAAAAAAA',  1 from dual union all
  7    select 'FOO/ZZZ/YYY/BBBBBBBBBB',  1 from dual union all
  8    select 'FOO/ZZZ/YYY/CCCCCCCCCC',  1 from dual union all
  9    select 'FOO/ZZZ/YYY/DDDDDDDDDD',  1 from dual
 10  )
 11  select row_number() over(partition by ComPart order by DifPart) as id
 12       , RefNo
 13     From (select regexp_substr(RefNo, '[[:alpha:]]+$')   as DifPart
 14                , regexp_substr(RefNo, '([[:alpha:]]+/)+') as ComPart
 15                , RefNo
 16                , Id
 17             from t1
 18           ) q
 19  ;

        ID REFNO
---------- -----------------------
         1 FOO/BAR/BAZ/AAAAAAAAAA
         2 FOO/BAR/BAZ/BBBBBBBBBB
         3 FOO/BAR/BAZ/CCCCCCCCCC
         4 FOO/BAR/BAZ/DDDDDDDDDD
         1 FOO/ZZZ/YYY/AAAAAAAAAA
         2 FOO/ZZZ/YYY/BBBBBBBBBB
         3 FOO/ZZZ/YYY/CCCCCCCCCC
         4 FOO/ZZZ/YYY/DDDDDDDDDD 
```

我认为实际更新该`ID`列并不是一个好主意。每次添加新的数据组时，都必须再次运行更新语句。更好的方法是创建一个视图，每次查询时都会看到所需的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:26:21.120

rownum 可以用作递增的 ID 吗？

```
UPDATE legacy_table
    SET id = ROWNUM; 
```

这将为表中的所有记录分配唯一值。 [此链接包含有关 Oracle Pseudocolumn 的文档](http://docs.oracle.com/cd/B19306_01/server.102/b14200/pseudocolumns009.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T14:29:49.573

您可以运行以下命令：

```
update <table_name> set id = rownum where descr like 'FOO/BAR/BAZ/%' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T14:33:22.180

这很粗略，我不确定您的 RefNo 是否是单值列，或者您只是为了简单而这样做。

```
select 
    sub.RefNo
    row_number() over (order by sub.RefNo) + (select max(id) from TABLE),

from (
    select FOO+'/'+BAR+'/'+BAZ+'/'+OTHER as RefNo
    from TABLE
    group by FOO+'/'+BAR+'/'+BAZ+'/'+OTHER
) sub 
```

# ssl - 尝试从 JAX-WS 调用 asmx https Web 服务时连接超时

> ID：13362374
> 
> 赞同：1
> 
> 时间：2012-11-13T14:20:50.690
> 
> 标签：ssl, jax-ws, webservice-client

我正在尝试调用端点超出 https 的外部 Web 服务。

我们正在尝试使用 JAX-WS（Java EE 6 的 Oracle 标准实现）进行调用。

从 SoapUI 设置代理后它可以正常工作，但是从我们的代码中我们得到这个堆栈跟踪：

```
[11/13/12 12:46:55:389 CET] 00000024 SystemErr R javax.xml.ws.WebServiceException: java.net.ConnectException: Connection timed out: no further information
[11/13/12 12:46:55:405 CET] 00000024 SystemErr R at org.apache.axis2.jaxws.ExceptionFactory.createWebServiceException(ExceptionFactory.java:175)
[11/13/12 12:46:55:405 CET] 00000024 SystemErr R at org.apache.axis2.jaxws.ExceptionFactory.makeWebServiceException(ExceptionFactory.java:70)
[11/13/12 12:46:55:405 CET] 00000024 SystemErr R at org.apache.axis2.jaxws.ExceptionFactory.makeWebServiceException(ExceptionFactory.java:128)
[11/13/12 12:46:55:405 CET] 00000024 SystemErr R at org.apache.axis2.jaxws.core.controller.impl.AxisInvocationController.execute(AxisInvocationController.java:586)
[11/13/12 12:46:55:405 CET] 00000024 SystemErr R at org.apache.axis2.jaxws.core.controller.impl.AxisInvocationController.doInvoke(AxisInvocationController.java:130)
[11/13/12 12:46:55:405 CET] 00000024 SystemErr R at org.apache.axis2.jaxws.core.controller.impl.InvocationControllerImpl.invoke(InvocationControllerImpl.java:93)
[11/13/12 12:46:55:405 CET] 00000024 SystemErr R at org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.invokeSEIMethod(JAXWSProxyHandler.java:364)
[11/13/12 12:46:55:405 CET] 00000024 SystemErr R at org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler.invoke(JAXWSProxyHandler.java:185) 
```

我们不知道为什么我们会获得连接超时，因为从 SoapUI 一切正常......

这是我们正在使用的代码：

```
ResultBlock rb = null;
Matching stub=new Matching();
MatchingSoap soapPort = stub.getMatchingSoap();
BindingProvider provider = (BindingProvider) soapPort;
Map<String, Object> context = provider.getRequestContext();
if(!"".equals("cvsa"))//Conf.getPROXY_URL()
{
    System.getProperties().get("http.proxyPort");
    //Authenticator.setDefault(new ProxyAuthenticator("user", "password")); 
    System.getProperties().put("proxySet", "true");
    System.setProperty("http.proxyHost", "proxy.xxxxx.xxxx.xx"); 
    System.setProperty("http.proxyPort", "3128"); 
}
context.put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, "https://xxx.xxx.xxx.xxx/OnlineMatchingCore/OnlineMatching.asmx" );
//context.put(JAXWSProperties.HTTP_CLIENT_STREAMING_CHUNK_SIZE, 8192);
System.out.println(provider.getEndpointReference().toString());
// Authenticator.setDefault(new ProxyAuthenticator("USER", "PASSWORD"));

// Security.setProperty("ssl.SocketFactory.provider", "com.ibm.jsse2.SSLSocketFactoryImpl");
// Security.setProperty("ssl.ServerSocketFactory.provider", "com.ibm.jsse2.SSLServerSocketFactoryImpl");

String result = soapPort.match(controlXml, batchXml, "USER", "PASSWORD"); 
```

我在网上看到很多关于此类问题的帖子，但我找不到任何解决方案：

*   [调用 HTTPS 网络服务](http://www.coderanch.com/t/566271/Web-Services/java/Invoking-HTTPS-webservice)（已经检查了这篇文章中的所有内容）

*   [使用 SSL 调用 Web 服务的 JAX-WS 会引发以下异常](http://beyondtech.ca/?p=73)（已检查）

我不知道该尝试什么，我的想法是我遗漏了一些关于告诉 java web 服务在 https 上的东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T15:38:56.753

您是否尝试设置 https 代理，而不是 http 代理？

```
System.setProperty("https.proxyHost", "proxy ip");
System.setProperty("https.proxyPort", "port"); 
```

# ruby-on-rails - 相关视频功能的最佳 API 设计

> ID：13362375
> 
> 赞同：0
> 
> 时间：2012-11-13T14:21:03.560
> 
> 标签：ruby-on-rails, web-services, api, rest

我必须设计一个 RESTful API 来获取与另一个相关的视频。用户可以使用某些属性（例如日期、视频类型）过滤列表，因此该属性的值可能不存在，在这种情况下，我们正在查找相关内容的视频的给定属性的所有值都会被考虑。

我正在使用 Ruby on Rails。

替代方案是：

```
 1\. video/ID/related/ATTRIBUTE?query="value of ATTRIBUTE"
 2\. video/ID/related?attribute="value of ATTRIBUTE"
 3\. video/ID/related/ATTRIBUTE/VALUE_OF_ATTRIBUTE 
```

不得不提的是，正如我之前所说，该值可能不存在，只有一个 ATTRIBUTE 基于其进行过滤，该值是奇异的，从固定列表中选择的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:29:22.517

**第一步：获取所有相关视频**

在第一步中，您`GET` *将所有*与给定视频相关的视频。如果这个视频在

```
GET /video/{id} 
```

那么相关视频可以在

```
GET /video/{id}/related 
```

这将返回*所有*相关视频的*完整*列表。

 ***第二步：过滤列表**

如果要*过滤*此列表，请在第二种选择中使用查询参数。

```
GET /video/{id}/related?some_attribute=foo&some_other_attribute=bar 
```

**反对 1\. 和 3 的理由。**

您的备选方案 1\. 和 3\. 引入相关视频列表的新子资源`ATTRIBUTE`。此子资源与相关视频列表中的任何内容均不对应。

**解决方案**

使用第二种选择。*

# asp.net - 在 MVC 中通过 ID 获取会话

> ID：13362377
> 
> 赞同：0
> 
> 时间：2012-11-13T14:21:09.550
> 
> 标签：asp.net, asp.net-mvc, c#-4.0, session

在 MVC 3 的控制器中。我有

```
 Session.Add("FacilityID", facility.FirstOrDefault().Name); 
```

现在在一个网络表单中，我想使用它。

```
var x = "this session"; // how to? Thanks. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:27:23.663

假设您想对 Web 表单中的 FacilityID 做一些事情：

```
var x = Session["FacilityID"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:23:52.993

然后您可以轻松访问：

```
var x = Session.Add["FacilityID"]; 
```

# python - 使用 nginx 和 fcgi 的 django 中的多个站点

> ID：13362380
> 
> 赞同：0
> 
> 时间：2012-11-13T14:21:24.497
> 
> 标签：python, django, nginx

我正在尝试使用 Nginx 在 fcgi 上仅使用一个实例来服务多个 django 项目。

我看到 django 使用 DJANGO_SETTINGS_MODULE 来处理正确的项目，但我不能告诉他在运行时选择一个特定的项目。

我试过 ./manage.py --settings=SETTINGS 但只有当你开始这个过程并且它不能动态改变。

我也在 nginx 上试过这个：

```
location /foo {
  fastcgi_split_path_info   ^()(.*)$;
  fastcgi_param             DJANGO_SETTINGS_MODULE foo.settings;
  fastcgi_param             PATH_INFO $fastcgi_script_name;
  include                   fastcgi_params;
  fastcgi_pass              127.0.0.1:8080;
}

location /bar {
  fastcgi_split_path_info   ^()(.*)$;
  fastcgi_param             DJANGO_SETTINGS_MODULE bar.settings;
  fastcgi_param             PATH_INFO $fastcgi_script_name;
  include                   fastcgi_params;
  fastcgi_pass              127.0.0.1:8080;
} 
```

但是当我打印 DJANGO_SETTINGS_MODULE 时，它始终是默认值。

那么，任何人都知道如何将特定的 URL 重定向到特定的 django 项目？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:27:30.293

`DJANGO_SETTINGS_MODULE`请求之间不能变化。您必须为每个站点运行一个 fastcgi 服务器。例如 foo on`127.0.0.1:8080`和 bar on `127.0.0.8081`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T13:45:59.447

我发现了一篇不错的博客文章，因为我想弄清楚如何在一台服务器上拥有多个 djnago 项目：

[http://www.neuraladvance.com/2011/03/29/django-nginx-fastcgi-daemontools/](http://www.neuraladvance.com/2011/03/29/django-nginx-fastcgi-daemontools/)

# node.js - 如何编译jade模板文件来获取字符串？

> ID：13362381
> 
> 赞同：15
> 
> 时间：2012-11-13T14:21:26.993
> 
> 标签：node.js, pug

我的玉模板文件中有一个视图逻辑。如何将模型传递给玉并获取 html 以通过电子邮件进一步发送？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-13T14:54:30.147

您可以尝试以下方法：

```
var jade = require('jade'),
    fs = require('fs');

fs.readFile('template.jade', 'utf8', function (err, data) {
    if (err) throw err;
    console.log(data);
    var fn = jade.compile(data);
    var html = fn({name:'Oleg'});
    console.log(html);
}); 
```

`template.jade`模板的路径在哪里。它看起来像这样：

```
!!!
html
  head
    title= 'Hello world'
  body
    p Hello #{name}! 
```

因此，您将模型作为 fn() 函数的输入传递，它的输出将是 html。

```
<!DOCTYPE html><html><head><title>Hello world</title></head><body><p>Hello Oleg!</p></body></html> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-05-03T12:35:17.080

您也可以从渲染回调中捕获字符串（快速示例）

```
exports.test1 = function(req, res){
  res.render('test1', { title: 'test1' }, function(err, body) {
    console.log(body);
  });

  res.send('wooo');
}; 
```

test1.jade

```
div
  = title
p hello world! 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-12-01T17:11:46.153

`fs.readFile()`不再需要打开模板。Jade API 包括`compileFile()`直接从文件编译的方法。

```
var jade = require("jade");

var locals = {name: "Linus"},
    render = jade.compileFile('template.jade'),
    html   = render(locals); 
```

Jade API 还包括`renderFile()`直接从给定文件返回 html 字符串的方法，使其更加简单。

```
var jade = require("jade");

var locals = {name: "Linus"},
    html   = jade.renderFile('template.jade', locals); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-27T14:23:42.917

答案都适用于加载玉模板并使用本地将其编译为 HTML。但是，如果您发送 HTML 电子邮件，则需要注意大多数客户端会删除所有 CSS 类。使用[Juice](https://www.npmjs.org/package/juice2 "果汁")（或类似的东西）内联应用所有 CSS 类。

# c# - ZeroMq 发布子地址不可用

> ID：13362384
> 
> 赞同：3
> 
> 时间：2012-11-13T14:21:34.777
> 
> 标签：c#, messaging, zeromq

我正在使用 zeromq c# 实现创建一个 pub sub 风格的通信。在我的本地机器上一切正常，但是当针对远程地址运行客户端组件（发布者）时，我得到一个“地址不可用”。据我了解，发布者将绑定到端点，订阅者将连接。

我是否误解了某些东西或者 publisherSocket.Bind("tcp://someRemoteIP:5001") 工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-21T06:25:06.623

您绑定到本地端点，并连接到远程端点。

本地端点由协议（“tcp://”）、接口（“*”、“localhost”、“eth0”（或类似）或接口的 IP 地址）和端口号（“: 5001")。

远程端点由协议（“tcp://”）、IP 地址或域名（“someremoteIP”）和端口号组成。

希望有帮助。

# php - php中的Gmail联系人API.3，如何从联系人中获取姓名和电话？

> ID：13362386
> 
> 赞同：2
> 
> 时间：2012-11-13T14:21:35.463
> 
> 标签：php, api, gmail, contacts

我需要一些建议，我无法找出来自谷歌联系人的数组，我已经从我在网上找到的示例中提取了电子邮件，但现在我需要提取联系人的姓名和电话号码，我我在执行 print_r() 的数组中看到此信息，但不知道如何获取它。

这是我的文件：

gmail.php（这个打印所有的电子邮件，这里我还需要姓名和电话）

```
include_once 'GmailOath.php';

$oauth =new GmailOath($consumer_key, $consumer_secret, $argarray, $debug, $callback);
$getcontact_access=new GmailGetContacts();

$request_token=$oauth->rfc3986_decode($_GET['oauth_token']);
$request_token_secret=$oauth->rfc3986_decode($_SESSION['oauth_token_secret']);
$oauth_verifier= $oauth->rfc3986_decode($_GET['oauth_verifier']);

$contact_access = $getcontact_access->get_access_token($oauth,$request_token, $request_token_secret,$oauth_verifier, false, true, true);

$access_token=$oauth->rfc3986_decode($contact_access['oauth_token']);
$access_token_secret=$oauth->rfc3986_decode($contact_access['oauth_token_secret']);
$contacts= $getcontact_access->GetContacts($oauth, $access_token, $access_token_secret, false, true,$emails_count);

foreach($contacts as $k => $a)
{
    $final = end($contacts[$k]);
    foreach($final as $email)
    {
            echo 'email: ' . $email["address"] .'<br>';
    }
} 
```

GmailOath.php

```
 <?php

    class GmailOath {

        public $oauth_consumer_key;
        public $oauth_consumer_secret;
        public $progname;
        public $debug;
        public $callback;

        function __construct($consumer_key, $consumer_secret, $argarray, $debug, $callback) {
            $this->oauth_consumer_key = $consumer_key;
            $this->oauth_consumer_secret = $consumer_secret;
            $this->progname = $argarray;
            $this->debug = $debug; // Set to 1 for verbose debugging output
            $this->callback = $callback;
        }

        ////////////////// global.php open//////////////
        function logit($msg, $preamble=true) {
            //  date_default_timezone_set('America/Los_Angeles');
            $now = date(DateTime::ISO8601, time());
            error_log(($preamble ? "+++${now}:" : '') . $msg);
        }

        function do_get($url, $port=80, $headers=NULL) {
            $retarr = array();  // Return value
            $curl_opts = array(CURLOPT_URL => $url,
                CURLOPT_PORT => $port,
                CURLOPT_POST => false,
                CURLOPT_SSL_VERIFYHOST => false,
                CURLOPT_SSL_VERIFYPEER => false,
                CURLOPT_RETURNTRANSFER => true);

            if ($headers) {
                $curl_opts[CURLOPT_HTTPHEADER] = $headers;
            }

            $response = $this->do_curl($curl_opts);

            if (!empty($response)) {
                $retarr = $response;
            }

            return $retarr;
        }

        function do_post($url, $postbody, $port=80, $headers=NULL) {
            $retarr = array();  // Return value

            $curl_opts = array(CURLOPT_URL => $url,
                CURLOPT_PORT => $port,
                CURLOPT_POST => true,
                CURLOPT_SSL_VERIFYHOST => false,
                CURLOPT_SSL_VERIFYPEER => false,
                CURLOPT_POSTFIELDS => $postbody,
                CURLOPT_RETURNTRANSFER => true);

            if ($headers) {
                $curl_opts[CURLOPT_HTTPHEADER] = $headers;
            }

            $response = do_curl($curl_opts);

            if (!empty($response)) {
                $retarr = $response;
            }

            return $retarr;
        }

        function do_curl($curl_opts) {

            $retarr = array();  // Return value

            if (!$curl_opts) {
                if ($this->debug) {
                    $this->logit("do_curl:ERR:curl_opts is empty");
                }
                return $retarr;
            }

            // Open curl session

            $ch = curl_init();

            if (!$ch) {
                if ($this->debug) {
                    $this->logit("do_curl:ERR:curl_init failed");
                }
                return $retarr;
            }

            // Set curl options that were passed in
            curl_setopt_array($ch, $curl_opts);

            // Ensure that we receive full header
            curl_setopt($ch, CURLOPT_HEADER, true);

            if ($this->debug) {
                curl_setopt($ch, CURLINFO_HEADER_OUT, true);
                curl_setopt($ch, CURLOPT_VERBOSE, true);
            }

            // Send the request and get the response
            ob_start();
            $response = curl_exec($ch);
            $curl_spew = ob_get_contents();
            ob_end_clean();
            if ($this->debug && $curl_spew) {
                $this->logit("do_curl:INFO:curl_spew begin");
                $this->logit($curl_spew, false);
                $this->logit("do_curl:INFO:curl_spew end");
            }

            // Check for errors
            if (curl_errno($ch)) {
                $errno = curl_errno($ch);
                $errmsg = curl_error($ch);
                if ($this->debug) {
                    $this->logit("do_curl:ERR:$errno:$errmsg");
                }
                curl_close($ch);
                unset($ch);
                return $retarr;
            }

            if ($this->debug) {
                $this->logit("do_curl:DBG:header sent begin");
                $header_sent = curl_getinfo($ch, CURLINFO_HEADER_OUT);
                $this->logit($header_sent, false);
                $this->logit("do_curl:DBG:header sent end");
            }

            // Get information about the transfer
            $info = curl_getinfo($ch);

            // Parse out header and body
            $header_size = curl_getinfo($ch, CURLINFO_HEADER_SIZE);
            $header = substr($response, 0, $header_size);
            $body = substr($response, $header_size);

            // Close curl session
            curl_close($ch);
            unset($ch);

            if ($this->debug) {
                $this->logit("do_curl:DBG:response received begin");
                if (!empty($response)) {
                    $this->logit($response, false);
                }
                $this->logit("do_curl:DBG:response received end");
            }

            // Set return value
            array_push($retarr, $info, $header, $body);

            return $retarr;
        }

        function json_pretty_print($json, $html_output=false) {
            $spacer = '  ';
            $level = 1;
            $indent = 0; // current indentation level
            $pretty_json = '';
            $in_string = false;

            $len = strlen($json);

            for ($c = 0; $c < $len; $c++) {
                $char = $json[$c];
                switch ($char) {
                    case '{':
                    case '[':
                        if (!$in_string) {
                            $indent += $level;
                            $pretty_json .= $char . "\n" . str_repeat($spacer, $indent);
                        } else {
                            $pretty_json .= $char;
                        }
                        break;
                    case '}':
                    case ']':
                        if (!$in_string) {
                            $indent -= $level;
                            $pretty_json .= "\n" . str_repeat($spacer, $indent) . $char;
                        } else {
                            $pretty_json .= $char;
                        }
                        break;
                    case ',':
                        if (!$in_string) {
                            $pretty_json .= ",\n" . str_repeat($spacer, $indent);
                        } else {
                            $pretty_json .= $char;
                        }
                        break;
                    case ':':
                        if (!$in_string) {
                            $pretty_json .= ": ";
                        } else {
                            $pretty_json .= $char;
                        }
                        break;
                    case '"':
                        if ($c > 0 && $json[$c - 1] != '\\') {
                            $in_string = !$in_string;
                        }
                    default:
                        $pretty_json .= $char;
                        break;
                }
            }

            return ($html_output) ?
                    '<pre>' . htmlentities($pretty_json) . '</pre>' :
                    $pretty_json . "\n";
        }

        function oauth_http_build_query($params, $excludeOauthParams=false) {

            $query_string = '';
            if (!empty($params)) {

                // rfc3986 encode both keys and values
                $keys = $this->rfc3986_encode(array_keys($params));
                $values = $this->rfc3986_encode(array_values($params));
                $params = array_combine($keys, $values);

                uksort($params, 'strcmp');

                $kvpairs = array();
                foreach ($params as $k => $v) {
                    if ($excludeOauthParams && substr($k, 0, 5) == 'oauth') {
                        continue;
                    }
                    if (is_array($v)) {
                        // If two or more parameters share the same name,
                        // they are sorted by their value. OAuth Spec: 9.1.1 (1)
                        natsort($v);
                        foreach ($v as $value_for_same_key) {
                            array_push($kvpairs, ($k . '=' . $value_for_same_key));
                        }
                    } else {
                        // For each parameter, the name is separated from the corresponding
                        // value by an '=' character (ASCII code 61). OAuth Spec: 9.1.1 (2)
                        array_push($kvpairs, ($k . '=' . $v));
                    }
                }

                // Each name-value pair is separated by an '&' character, ASCII code 38.
                // OAuth Spec: 9.1.1 (2)
                $query_string = implode('&', $kvpairs);
            }
            return $query_string;
        }

        function oauth_parse_str($query_string) {
            $query_array = array();

            if (isset($query_string)) {

                // Separate single string into an array of "key=value" strings
                $kvpairs = explode('&', $query_string);

                // Separate each "key=value" string into an array[key] = value
                foreach ($kvpairs as $pair) {
                    list($k, $v) = explode('=', $pair, 2);

                    // Handle the case where multiple values map to the same key
                    // by pulling those values into an array themselves
                    if (isset($query_array[$k])) {
                        // If the existing value is a scalar, turn it into an array
                        if (is_scalar($query_array[$k])) {
                            $query_array[$k] = array($query_array[$k]);
                        }
                        array_push($query_array[$k], $v);
                    } else {
                        $query_array[$k] = $v;
                    }
                }
            }

            return $query_array;
        }

        function build_oauth_header($params, $realm='') {
            $header = 'Authorization: OAuth';
            foreach ($params as $k => $v) {
                if (substr($k, 0, 5) == 'oauth') {
                    $header .= ',' . $this->rfc3986_encode($k) . '="' . $this->rfc3986_encode($v) . '"';
                }
            }
            return $header;
        }

        function oauth_compute_plaintext_sig($consumer_secret, $token_secret) {
            return ($consumer_secret . '&' . $token_secret);
        }

        function oauth_compute_hmac_sig($http_method, $url, $params, $consumer_secret, $token_secret) {

            $base_string = $this->signature_base_string($http_method, $url, $params);
            $signature_key = $this->rfc3986_encode($consumer_secret) . '&' . $this->rfc3986_encode($token_secret);
            $sig = base64_encode(hash_hmac('sha1', $base_string, $signature_key, true));
            if ($this->debug) {
                logit("oauth_compute_hmac_sig:DBG:sig:$sig");
            }
            return $sig;
        }

        /**
         * Make the URL conform to the format scheme://host/path
         * @param string $url
         * @return string the url in the form of scheme://host/path
         */
        function normalize_url($url) {
            $parts = parse_url($url);

            $scheme = $parts['scheme'];
            $host = $parts['host'];
            $port = $parts['port'];
            $path = $parts['path'];

            if (!$port) {
                $port = ($scheme == 'https') ? '443' : '80';
            }
            if (($scheme == 'https' && $port != '443')
                    || ($scheme == 'http' && $port != '80')) {
                $host = "$host:$port";
            }

            return "$scheme://$host$path";
        }

        /**
         * Returns the normalized signature base string of this request
         * @param string $http_method
         * @param string $url
         * @param array $params
         * The base string is defined as the method, the url and the
         * parameters (normalized), each urlencoded and the concated with &.
         * @see http://oauth.net/core/1.0/#rfc.section.A.5.1
         */
        function signature_base_string($http_method, $url, $params) {
            // Decompose and pull query params out of the url
            $query_str = parse_url($url, PHP_URL_QUERY);
            if ($query_str) {
                $parsed_query = $this->oauth_parse_str($query_str);
                // merge params from the url with params array from caller
                $params = array_merge($params, $parsed_query);
            }

            // Remove oauth_signature from params array if present
            if (isset($params['oauth_signature'])) {
                unset($params['oauth_signature']);
            }

            // Create the signature base string. Yes, the $params are double encoded.

            $base_string = $this->rfc3986_encode(strtoupper($http_method)) . '&' .
                    $this->rfc3986_encode($this->normalize_url($url)) . '&' .
                    $this->rfc3986_encode($this->oauth_http_build_query($params));

            $this->logit("signature_base_string:INFO:normalized_base_string:$base_string");

            return $base_string;
        }

        /**
         * Encode input per RFC 3986
         * @param string|array $raw_input
         * @return string|array properly rfc3986 encoded raw_input
         * If an array is passed in, rfc3896 encode all elements of the array.
         * @link http://oauth.net/core/1.0/#encoding_parameters
         */
        function rfc3986_encode($raw_input){

            if (is_array($raw_input)) {
                //return array_map($this->rfc3986_encode, $raw_input);
                return array_map(array($this, 'rfc3986_encode'), $raw_input);

                // return $this->rfc3986_encode($raw_input);
            } else if (is_scalar($raw_input)) {
                return str_replace('%7E', '~', rawurlencode($raw_input));
            } else {
                return '';
            }
        }

        function rfc3986_decode($raw_input) {
            return rawurldecode($raw_input);
        }

    }

    class GmailGetContacts {

        function get_request_token($oauth, $usePost=false, $useHmacSha1Sig=true, $passOAuthInHeader=false) {
            $retarr = array();  // return value
            $response = array();

            $url = 'https://www.google.com/accounts/OAuthGetRequestToken';
            $params['oauth_version'] = '1.0';
            $params['oauth_nonce'] = mt_rand();
            $params['oauth_timestamp'] = time();
            $params['oauth_consumer_key'] = $oauth->oauth_consumer_key;
            $params['oauth_callback'] = $oauth->callback;
            $params['scope'] = 'https://www.google.com/m8/feeds';

            // compute signature and add it to the params list
            if ($useHmacSha1Sig) {

                $params['oauth_signature_method'] = 'HMAC-SHA1';
                $params['oauth_signature'] =
                        $oauth->oauth_compute_hmac_sig($usePost ? 'POST' : 'GET', $url, $params,
                                $oauth->oauth_consumer_secret, null);
            } else {
                echo "signature mathod not support";
            }

            // Pass OAuth credentials in a separate header or in the query string
            if ($passOAuthInHeader) {

                $query_parameter_string = $oauth->oauth_http_build_query($params, FALSE);

                $header = $oauth->build_oauth_header($params);

                $headers[] = $header;
            } else {
                $query_parameter_string = $oauth->oauth_http_build_query($params);
            }

            // POST or GET the request
            if ($usePost) {
                $request_url = $url;
                $oauth->logit("getreqtok:INFO:request_url:$request_url");
                $oauth->logit("getreqtok:INFO:post_body:$query_parameter_string");
                $headers[] = 'Content-Type: application/x-www-form-urlencoded';
                $response = do_post($request_url, $query_parameter_string, 443, $headers);
            } else {
                $request_url = $url . ($query_parameter_string ?
                                ('?' . $query_parameter_string) : '' );

                $oauth->logit("getreqtok:INFO:request_url:$request_url");

                $response = $oauth->do_get($request_url, 443, $headers);
            }

            // extract successful response
            if (!empty($response)) {
                list($info, $header, $body) = $response;
                $body_parsed = $oauth->oauth_parse_str($body);
                if (!empty($body_parsed)) {
                    $oauth->logit("getreqtok:INFO:response_body_parsed:");
                   //print_r($body_parsed);
                }
                $retarr = $response;
                $retarr[] = $body_parsed;
            }

            return $body_parsed;
        }

        function get_access_token($oauth, $request_token, $request_token_secret, $oauth_verifier, $usePost=false, $useHmacSha1Sig=true, $passOAuthInHeader=true) {
            $retarr = array();  // return value
            $response = array();

            $url = 'https://www.google.com/accounts/OAuthGetAccessToken';
            $params['oauth_version'] = '1.0';
            $params['oauth_nonce'] = mt_rand();
            $params['oauth_timestamp'] = time();
            $params['oauth_consumer_key'] = $oauth->oauth_consumer_key;
            $params['oauth_token'] = $request_token;
            $params['oauth_verifier'] = $oauth_verifier;

            // compute signature and add it to the params list
            if ($useHmacSha1Sig){
                $params['oauth_signature_method'] = 'HMAC-SHA1';
                $params['oauth_signature'] =
                        $oauth->oauth_compute_hmac_sig($usePost ? 'POST' : 'GET', $url, $params,
                                $oauth->oauth_consumer_secret, $request_token_secret);
            } else {
                echo "signature mathod not support";
            }
    //     
            if ($passOAuthInHeader) {
                $query_parameter_string = $oauth->oauth_http_build_query($params, false);
                $header = $oauth->build_oauth_header($params);
                $headers[] = $header;
            } else {
                $query_parameter_string = $oauth->oauth_http_build_query($params);
            }

            if ($usePost){
                $request_url = $url;
                logit("getacctok:INFO:request_url:$request_url");
                logit("getacctok:INFO:post_body:$query_parameter_string");
                $headers[] = 'Content-Type: application/x-www-form-urlencoded';
                $response = $oauth->do_post($request_url, $query_parameter_string, 443, $headers);
            } else {
                $request_url = $url . ($query_parameter_string ?
                                ('?' . $query_parameter_string) : '' );

                $oauth->logit("getacctok:INFO:request_url:$request_url");
                $response = $oauth->do_get($request_url, 443, $headers);
            }

            if (!empty($response)) {
                list($info, $header, $body) = $response;
                $body_parsed = $oauth->oauth_parse_str($body);
                if (!empty($body_parsed)) {
                    $oauth->logit("getacctok:INFO:response_body_parsed:");
                    //print_r($body_parsed);

                }
                $retarr = $response;
                $retarr[] = $body_parsed;
            }
            return $body_parsed;
        }

        function GetContacts($oauth, $access_token, $access_token_secret, $usePost=false, $passOAuthInHeader=true,$emails_count) {
            $retarr = array();  // return value
            $response = array();

            $url = "https://www.google.com/m8/feeds/contacts/default/full";
            $params['alt'] = 'json';
            $params['max-results'] = $emails_count;
            $params['oauth_version'] = '1.0';
            $params['oauth_nonce'] = mt_rand();
            $params['oauth_timestamp'] = time();
            $params['oauth_consumer_key'] = $oauth->oauth_consumer_key;
            $params['oauth_token'] = $access_token;

            // compute hmac-sha1 signature and add it to the params list
            $params['oauth_signature_method'] = 'HMAC-SHA1';
            $params['oauth_signature'] =
                    $oauth->oauth_compute_hmac_sig($usePost ? 'POST' : 'GET', $url, $params,
                            $oauth->oauth_consumer_secret, $access_token_secret);

            // Pass OAuth credentials in a separate header or in the query string
            if ($passOAuthInHeader){
                $query_parameter_string = $oauth->oauth_http_build_query($params, false);

                $header = $oauth->build_oauth_header($params);

                $headers[] = $header;
            } else {
                $query_parameter_string = $oauth->oauth_http_build_query($params);
            }

            // POST or GET the request
            if ($usePost){
                $request_url = $url;
                $oauth->logit("callcontact:INFO:request_url:$request_url");
                $oauth->logit("callcontact:INFO:post_body:$query_parameter_string");
                $headers[] = 'Content-Type: application/x-www-form-urlencoded';
                $response = $oauth->do_post($request_url, $query_parameter_string, 80, $headers);

            } else {
                $request_url = $url . ($query_parameter_string ?
                                ('?' . $query_parameter_string) : '' );
                $oauth->logit("callcontact:INFO:request_url:$request_url");
                $response = $oauth->do_get($request_url, 443, $headers);
            }

            if (!empty($response)) {
                list($info, $header, $body) = $response;
                if ($body) {

                    $oauth->logit("callcontact:INFO:response:");
                    $contact = json_decode($oauth->json_pretty_print($body), true);

                   //echo $contact['feed']['entry'][0]['gd$email'][0]['address'];
                   return $contact['feed']['entry'];

                }
                $retarr = $response;
            }

            return $retarr;
        }

    }

    ?> 
```

你们能帮我解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:59:31.877

Not sure if this can help you as you say you have already used print_r *(are you using with braces?)*, but to display the contents of an array in PHP, I have always used this with success. It displays the integer ref of the array plus the data in each field.

```
<?php
  echo "<pre>";                //print array to console
    {print_r($variable_name);}
  echo "</pre>";
?> 
```

Alternately, have you checked the information here: [https://developers.google.com/google-apps/contacts/v3/#retrieving_contacts_using_query_parameters](https://developers.google.com/google-apps/contacts/v3/#retrieving_contacts_using_query_parameters)

Or try the Context.IO API - there's a call specifically for pulling contacts: [http://context.io/docs/2.0/accounts/contacts](http://context.io/docs/2.0/accounts/contacts)

Hoping any of these might help you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T08:46:03.273

对于您的第一个电话地址和备注字段的情况。

添加在 gmail.php 中循环联系人的位置

```
foreach($contacts as $k => $a)
{
  $phone1 = end($a['gd$phoneNumber'][0]);
  $note = end($a['content']);
  $adress = end($a['gd$postalAddress'][0]); 
```

# java - 将 DB 移动到 SDCard

> ID：13362391
> 
> 赞同：2
> 
> 时间：2012-11-13T14:21:45.733
> 
> 标签：java, android, database, file, sd-card

> **可能重复：**
> [将我的数据库移动到 sd 卡不起作用](https://stackoverflow.com/questions/13361377/moving-my-db-to-sd-card-not-working)

我在我的 sdcard 的根目录上得到一个名为 test4 的文件，但是当我使用 sqlite 浏览器将它移动到我的计算机时它不起作用。有任何想法吗？

```
 File data = Environment.getDataDirectory();
                    File sd = Environment.getExternalStorageDirectory();
                    if (sd.canWrite()) {
                        String currentDBPath = "/data/com.test.this/databases/this_db";
                          String backupDBPath = "/test4";
                        File currentDB = new File(data, currentDBPath);
                        File backupDB = new File(sd, backupDBPath);
                        if (currentDB.exists()) {
                            FileChannel src;
                            try {
                                src = new FileInputStream(currentDB).getChannel();
                                FileChannel dst = new FileOutputStream(backupDB)
                                        .getChannel();
                                try {
                                    dst.transferFrom(src, 0, src.size());
                                    src.close();
                                    dst.close();
                                } catch (IOException e) {
                                    e.printStackTrace();
                                }
                            } catch (FileNotFoundException e) {
                                e.printStackTrace();
                            }
                        }
                    } 
```

Windows 说该文件是“20.0 KB”。来自我的模拟器的数据库文件中有大量条目，但文件只有“9.00 KB”。我创建了多个文件“test1”、“test2”、“test3”、“test4”，但它们的大小完全相同。我的数据库不是“可复制”的吗？我不知道怎么知道。Astro 文件管理器具有文件详细信息。当我看到有关此文件的详细信息时。它给了我大小并且权限是“-rw”，不知道这是否有帮助。

# javascript - 在 Facebook 上分享画布

> ID：13362392
> 
> 赞同：4
> 
> 时间：2012-11-13T14:21:49.517
> 
> 标签：javascript, facebook, html, canvas

我有一个网站，用户可以在其中设计智能手机外壳。在某一时刻，用户应该能够在 Facebook 上分享设计，包括设计。我有对象和 , 将“样式”设置为画布的数据 URI。

共享时自定义图像的代码是：

我将如何与我的图像共享它，因为它是一个数据 URI。

谢谢

**更新**：我现在将画布保存在服务器上，并正确链接。虽然，我似乎无法编辑 Facebook 从中读取缩略图的链接的“href”。

我试过了：

var fblink = document.getElementById("facebook_share"); fblink.href="http://example.com/image.png";

和

fblink.setAttribute("href", "http://example.com/image.png");

似乎没有一个工作。'fblink' 对象是正确的，因为我可以读取 'rel' 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-17T22:54:04.643

我个人使用`canvas.toDataURL()`它生成画布内容的 base64 编码 URL。

之后，我使用以下命令解码了 URL`Base64Binary.decode(encodedPng)`

获得解码图像后，您可以将其放入表单中并通过 XMLHttpRequest 对象发送所有内容，如下面的代码所示：

```
 // Random boundary defined to separate element in form
            var boundary = '----ThisIsTheBoundary1234567890';

            // this is the multipart/form-data boundary we'll use
            var formData = '--' + boundary + '\r\n';
            formData += 'Content-Disposition: form-data; name="source"; filename="' + filename + '"\r\n';
            formData += 'Content-Type: ' + mimeType + '\r\n\r\n';

            // let's encode our image file
            for ( var i = 0; i < imageData.length; ++i ) {
                formData += String.fromCharCode( imageData[ i ] & 0xff );
            }

            formData += '\r\n';
            formData += '--' + boundary + '\r\n';
            formData += 'Content-Disposition: form-data; name="message"\r\nContent-Type: text/html; charset=utf-8\r\n\r\n';
            formData += message + '\r\n'
            formData += '--' + boundary + '--\r\n';

            // Create a POST XML Http Request
            var xhr = new XMLHttpRequest();
            xhr.open( 'POST', 'https://graph.facebook.com/me/photos?access_token=' + authToken, true );
            // Call back function if POST request succeed or fail
            xhr.onload = xhr.onerror = function() {
                if ( !(xhr.responseText.split('"')[1] == "error") ) {
                    // If there is no error we redirect the user to the FB post she/he just created
                    var userID = xhr.responseText.split('"')[7].split('_')[0];
                    var postID = xhr.responseText.split('"')[7].split('_')[1];
                    w = window.open('https://www.facebook.com/'+userID+'/posts/'+postID,
                            'width=1235,height=530');
                }
                else {
                    alert("Erreur: "+xhr.responseText);
                }
            };
            xhr.setRequestHeader( "Content-Type", "multipart/form-data; boundary=" + boundary );

            // Attach the data to the request as binary
            xhr.sendAsBinary( formData ); 
```

您可以在文件 maskToFb.html 中查看我的[Github 项目](https://github.com/gregriggins36/showcase-try-on)的完整工作示例

# zend-form - Zend Form 渲染后 UTF-8 字符消失

> ID：13362395
> 
> 赞同：1
> 
> 时间：2012-11-13T14:21:58.993
> 
> 标签：zend-form, zend-framework2

我使用 Zend Framework 2 并在我的视图脚本中有此代码。名称和描述是俄语字符串：

```
$brand = $form->get('brand');
$id = $brand->get('id');
$name = $brand->get('name');
$type = $brand->get('type');
$description = $brand->get('description');
\Zend\Debug\Debug::dump($name->getValue()); //correctly dumps russian letters
\Zend\Debug\Debug::dump($this->formText()->getEncoding()); //UTF-8 (by default) 
```

但是当我试图渲染这些元素时，我有空输入和文本区域：

```
<?= $this->formText($name) ?>
<?= $this->formTextarea($description) ?> 
```

我发现 Zend\Form\View\Helper\AbstractHelper 执行以下代码：

```
$strings[] = sprintf('%s="%s"', $escape($key), $escape($value)); 
```

之后俄语字母消失。但我仍然不知道如何解决这个问题。

# android - 对话框布局双层错透明背景

> ID：13362396
> 
> 赞同：2
> 
> 时间：2012-11-13T14:22:11.110
> 
> 标签：android, dialog, styles, themes

我想制作一个白色的、无边框的弹出视图。为此，我使用具有自定义样式的自定义对话框：

```
public Builder createNewDialog(int type) {
        AlertDialog.Builder dlg = null;
        switch (type) {
        case (1):

            dlg = new AlertDialog.Builder(new ContextThemeWrapper(this,
                    R.style.CustomDialogTheme));

            LayoutInflater inflater = this.getLayoutInflater();

            dlg.setView(inflater.inflate(R.layout.dialognewplayer, null))
                    .setPositiveButton("Add Player", null).setNegativeButton("Cancel", null).create();
            break;
        }
        return dlg;
    } 
```

//styles.xml:

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="AppTheme" parent="android:Theme.Light"></style>
    <style name="CustomDialogTheme" parent="android:Theme.Dialog">
         <item name="android:windowBackground">@color/transparent_color</item>
        <item name="android:windowIsFloating">false</item>
        <item name="android:windowNoTitle">true</item>
        <item name="android:background">#ffffff</item>
    </style>

</resources> 
```

//和colors.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
       <color name="transparent_color">#ffffff</color>
</resources> 
```

但是，正如您在图像中看到的那样，弹出窗口有一些错误......它似乎是双层的，第一层仍然有边框，透明背景仍然是黑色..我想我处理错了，但是我没看到...

![在此处输入图像描述](../Images/56b226357222bcdd037461d80702fc6b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T07:21:22.697

使用半透明主题并使用 android 自己的透明颜色。

```
<style name="CustomDialogTheme" parent="@android:style/Theme.Translucent">
    <item name="android:windowIsFloating">false</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:background">@android:color/transparent</item>
</style> 
```

# biztalk - BizTalk 2010 贸易伙伴管理：缺少添加协议的菜单选项

> ID：13362398
> 
> 赞同：2
> 
> 时间：2012-11-13T14:22:17.050
> 
> 标签：biztalk, biztalk-2010, trading

我们在 BizTalk 服务器管理控制台中添加了多个参与方 > 参与方。

我们的下一步是为各方配置协议，但我们没有菜单选项来为一方或业务单位创建新协议。它在 BizTalk Server 管理控制台中根本不可见...

有安装要求吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T23:24:18.693

您的 BizTalk 配置可能未针对 EDI/AS2 运行时完成。打开 BizTalk Server 配置向导并检查组件是否配置正确。如果它显示验证错误，您必须在应用配置之前先清除它。

如果验证错误类似于“ *some activirties already exists. Use bm.exe to remove...* ”，那么这里是步骤：

1.  打开命令提示符并 cd 到“C:\Program Files (x86)\Microsoft BizTalk Server 2013\Tracking
2.  像“bm get-activities”一样运行 bm.exe
3.  使用命令“bm remove-activity -Name: *SomeActivityName* ”删除所有活动
4.  在 BizTalk Server 配置向导中为 EDI/AS2 运行时应用重新配置。

之后，合作伙伴资料的右键菜单给了我“*新协议*”的选项。

![BizTalk 配置向导](../Images/dbfc842c2f26277d8e49d53aa3dab901.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T09:14:38.753

在 Biztalk 管理控制台中右键单击新创建的聚会->新建->协议。

# checkbox - 复选框（全选）未选中

> ID：13362400
> 
> 赞同：0
> 
> 时间：2012-11-13T14:22:20.280
> 
> 标签：checkbox

我有一个关于复选框的问题。

在这里我有 2 个复选框，如果我同时选择（汽车、公共汽车）复选框，则必须同时选中“Checkall”复选框。

我怎样才能做到这一点？（我无法删除以下可选）

```
**http://jsfiddle.net/aldimeola1122/xUU4p/10/** 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:02:48.687

你试过这个吗？请注意，live 方法更改为“checkAll”的更改方法。

```
$(document).ready(function(){
  $('.checkAll').change(function() {
    $('.chc').attr('checked', $( this ).is( ':checked' ) ? 'checked' :'');
  });

  $("#slctble").selectable({
      filter:'td',
      cancel:'td:not(.isaretle)',
      stop: function() {   
         $(".ui-selected input", this).each(function() {
              this.checked= !this.checked
          });//end-ui-selected input
         $('.chc').length == $('.chc:checked').length ?   $('.checkAll').attr('checked', 'checked') : $('.checkAll').attr( 'checked','');           
      }//endStopFunction
  });//endSelectable
}); 
```

# ios - 打开具有特定（非当前）MOM 版本的 CoreData 存储

> ID：13362403
> 
> 赞同：1
> 
> 时间：2012-11-13T14:22:28.253
> 
> 标签：ios, core-data, core-data-migration

我在 CoreData 模型版本中有各种破坏性架构更改。由于本地模式只是网络数据的缓存，我很乐意删除 sqlite 文件并强制重新下载此版本的 iOS 应用程序。

然而...

*数据库中有*一个由用户写入的实体，不应丢失。

在新版本的应用程序中，这些易失性数据不再写入 CoreData 存储，而是记录在文件系统中。

我正在逐步进行，以便（比如说）应用程序的 2.0.1 版本使用 v1 架构并复制数据，但没有破坏性架构更改，然后应用程序的 2.0.2 版本可以添加架构更改并删除数据库，知道数据已被删除是安全的，但由于应用商店更新的工作方式，无法保证用户从 .0-.1-.2 开始。他们可能会直接从 .0 到 .2，并在尝试打开核心数据存储时遇到重大更改。

任何想法，指针，建议表示赞赏。

更新：我想知道“伪造”迁移是否可能是要走的路。一种自定义迁移策略，它忽略除易失性数据之外的所有内容并且实际上不迁移它，只是将其写入文件系统。一旦运行，我将在文件系统中拥有易失性数据和基于新模式的空数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T19:02:29.937

我还认为你可能会更好地伪造迁移，这里有一些代码可以让你想要的那个妈妈。只需将 EntryModel 替换为您的模型名称，然后调整版本即可。然后在 NSPersistentStoreCoordinator 上使用“-(id)initWithManagedObjectModel”方法来获取您想要的模型上的商店协调器。

```
- (NSManagedObjectModel *)managedObjectModelForVersion:(NSString*)version {

NSString *modelPath = [[NSBundle mainBundle] pathForResource:@"EntryModel" ofType:@"momd"];
if (BETWEEN_INEX(version, @"1.0", @"1.4")) {
    modelPath = [modelPath stringByAppendingPathComponent:@"EntryModel"];
    modelPath = [modelPath stringByAppendingPathExtension:@"mom"];
} else if (BETWEEN_INEX(version, @"1.4", @"1.5")) {
    modelPath = [modelPath stringByAppendingPathComponent:@"EntryModel 2"];
    modelPath = [modelPath stringByAppendingPathExtension:@"mom"];
} else if (BETWEEN_INEX(version, @"1.5", @"1.6")) {
    modelPath = [modelPath stringByAppendingPathComponent:@"EntryModel 3"];
    modelPath = [modelPath stringByAppendingPathExtension:@"mom"];
} else if (BETWEEN_INEX(version, @"1.6", @"1.7")) {
    modelPath = [modelPath stringByAppendingPathComponent:@"EntryModel 4"];
    modelPath = [modelPath stringByAppendingPathExtension:@"mom"];
}
NSURL *modelURL = [NSURL fileURLWithPath:modelPath];
NSManagedObjectModel * oldManagedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
NSSet *vIdentifiers = [oldManagedObjectModel versionIdentifiers];
for (NSString * identifier in vIdentifiers) {
    NSLog(@"Old Model : %@",identifier);
}
return [oldManagedObjectModel autorelease];
} 
```

这也可能有用：

```
#define GREATER_THAN(w,v)              ([w compare:v options:NSNumericSearch] == NSOrderedDescending)
#define GREATER_THAN_OR_EQUAL_TO(w,v)  ([w compare:v options:NSNumericSearch] != NSOrderedAscending)
#define LESS_THAN(w,v)                 ([w compare:v options:NSNumericSearch] == NSOrderedAscending)
#define LESS_THAN_OR_EQUAL_TO(w,v)     ([w compare:v options:NSNumericSearch] != NSOrderedDescending)
#define BETWEEN_INCLUDE(w,v,z)     (GREATER_THAN_OR_EQUAL_TO(w,v) && LESS_THAN_OR_EQUAL_TO(w,z))
#define BETWEEN_EXCLUDE(w,v,z)     (GREATER_THAN(w,v) && LESS_THAN(w,z))
#define BETWEEN_INEX(w,v,z)     (GREATER_THAN_OR_EQUAL_TO(w,v) && LESS_THAN(w,z))
#define BETWEEN_EXIN(w,v,z)     (GREATER_THAN(w,v) && LESS_THAN_OR_EQUAL_TO(w,z)) 
```

# facebook - facebook 通知返回 (#15) 必须使用应用程序 access_token 调用此方法。”

> ID：13362410
> 
> 赞同：2
> 
> 时间：2012-11-13T14:23:00.403
> 
> 标签：facebook, api, notifications

我正在尝试从我的应用程序发送 facebook 通知，但实际上 Graph API Explorer 仍在返回我“（＃15）必须使用应用程序 access_token 调用此方法。”

这就是我所做的：

```
1000000001/notifications?access_token=100000000000001|Quuuuuuuuuuuuuuuuuw&href=http://www.xxx.com/&template=Hello 
```

虽然我以多种方式获取应用访问令牌，但我已经使用此令牌删除应用请求。

```
$APPLICATION_ID = "APP_ID";
$APPLICATION_SECRET = "APP_SECRET";

$token_url =    "https://graph.facebook.com/oauth/access_token?" .
        "client_id=" . $APPLICATION_ID .
        "&client_secret=" . $APPLICATION_SECRET .
        "&grant_type=client_credentials";
$app_token = file_get_contents($token_url); 
```

或 `access_token = YOUR_APP_ID|YOUR_APP_SECRET`。

我知道应用程序访问令牌不会过期。

此解决方案不起作用。 [https://stackoverflow.com/a/12771192/1022298](https://stackoverflow.com/a/12771192/1022298)

编辑。发明了 App_id 和 secret。

# php - 有条件的选择计数

> ID：13362411
> 
> 赞同：0
> 
> 时间：2012-11-13T14:23:07.260
> 
> 标签：php, select

我计算每个帖子的评论数。它有效：

```
$numComments = mysql_query("SELECT COUNT(id_post) FROM comments WHERE id_post = '". $row["id"]."' ");  
// it works if I do this: echo mysql_result($numComents,0); 
```

但我更喜欢仅在有任何评论时才显示评论数。但我有条件的问题。

```
if ($numComments > 0){
    echo mysql_result($numComments,0); 
}else{

} 
```

我怎么能说如果有评论显示数字。如果有 0 条评论不显示任何内容（我不希望它显示“有 0 条评论”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:34:28.823

尝试：

```
$result = mysql_query("SELECT COUNT(id_post) FROM comments WHERE id_post = '". $row["id"]."' "); 
$numComments = mysql_result($result,0);
if ( $numComments  > 0) {
 echo $numComments ; 
 } else {
   //do something...
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:28:46.943

尝试：

```
$number_of_rows = mysql_fetch_row($numComments)[0];

echo $number_of_rows > 0 ? $number_of_rows : ''; 
```

# wxwidgets - wxWidgets：如何将默认配置值捕获到不存在的 app.config 中？

> ID：13362413
> 
> 赞同：0
> 
> 时间：2012-11-13T14:23:09.897
> 
> 标签：wxwidgets

**摘要：**`App.config`每个人使用的单个文件`App.exe`，`wxFileConfig`应该注册默认值，`App.config`如果不存在，应该使用默认值创建，本地与全局配置文件。

* * *

我的简单应用程序在应用程序所在的同一目录中使用一个全局配置文件，与可执行文件具有相同的名称，并具有`.config`扩展名。如果配置文件尚不存在，则应为用户创建配置文件。用户应通过编辑器修改文件以替换默认值。到目前为止，我有以下代码：

```
// The configuration file name has has the executable name 
// but with the ".config" extension.
//
wxFileName configFileName(wxStandardPaths::Get().GetExecutablePath());
configFileName.SetExt("config");

// The config object uses the above file name, and captures the defaults.
//
wxFileConfig * pConfig = new wxFileConfig(wxEmptyString,
                                          wxEmptyString,
                                          wxEmptyString, 
                                          configFileName.GetFullPath(),
                                          wxCONFIG_USE_GLOBAL_FILE);
pConfig->SetRecordDefaults();    // to capture the defaults
wxFileConfig::Set(pConfig);      // to be globally accessible

// One of the configuration values is the file name for the exported
// values (the app.exe functionality, unrelated to the config file name).
// It uses a subdirectory with the name built out of the exe path, its name
// without the extension, with the "_OUTPUT" appended.
// For example, "some/path/App.exe" should produce "some/path/App_OUTPUT".
// The file name is again constructed from the bare app name with 
// the ".txt" extension.
//
wxFileName outfname(configFileName.GetPath());            // same as the exe path
outfname.AppendDir(configFileName.GetName() + "_OUTPUT"); // the subdir
outfname.SetName(configFileName.GetName());               // same name as app has
outfname.SetExt("txt");                                   // with the .txt extension
outfname.Normalize();  // actually, my real path contains also ".."    

// The above constructed filename is the default for the "output" key.
// I expect to be recorded into the pConfig because of the above
// pConfig->SetRecordDefaults();   Is my expectation correct?
//
m_output_filename = pConfig->Read("output", outfname.GetFullPath()); 
```

现在......如果配置文件不存在，如何物理写入？我在想类似的事情：

```
if (! configFileName.Exists())
{
    pConfig->??? What should be called?
} 
```

有没有更好的方法来决定是否应该写入文件？说，`pConfig`被默认值修改。有没有办法写回脏内容？

我找到`Flush()`了，但它在开头包含以下代码：

```
if ( !IsDirty() || !m_fnLocalFile.GetFullPath() )
    return true; 
```

...并且我的配置文件作为全局文件传递（参见`wxFileConfig`上面的创建）。没有设置本地配置文件。我是否应该将配置文件作为本地文件传递，即使它对每个人都是一个文件？

**更新：**我尝试将配置文件更改为本地文件，如下所示：

```
wxFileConfig * pConfig = new wxFileConfig(wxEmptyString,
                                          wxEmptyString,
                                          configFileName.GetFullPath(),
                                          wxEmptyString,
                                          wxCONFIG_USE_LOCAL_FILE); 
```

然后是`Flush()`配置文件的创建原因。它甚至可能从析构函数中自动调用。*但是配置文件必须是本地的。*`wxCONFIG_USE_GLOBAL_FILE`如问题前面所示，它不适用于。你能证实吗？这是预期的行为吗？

感谢您的时间和经验，

彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T13:24:29.207

`wxConfig`绝对不会按设计写入全局配置源（文件或注册表配置单元或其他）。要了解原因，请考虑它可能根本没有权限执行此操作 - 事实上，通常不会。

特别是，在 Unix 下，全局配置文件（类似`/etc/myapp.conf`）应该在系统管理员编辑和编辑程序时安装，而不是由运行程序的用户创建。

# php - Gii 与 Yiibooster 和 YiiBoilerplate

> ID：13362415
> 
> 赞同：1
> 
> 时间：2012-11-13T14:23:29.647
> 
> 标签：php, yii, yii-extensions

我是 Yii 框架的新手，实际上是 php 的新手。我已经下载了 YiiBoilerplate (clevertech-YiiBoilerplate-abe2511) 并按照[http://www.yiiframework.com/wiki/374/yiiboilerplate-setup-a-professional-project-structure-in-seconds/](http://www.yiiframework.com/wiki/374/yiiboilerplate-setup-a-professional-project-structure-in-seconds/)页面上提到的说明进行操作。

我想访问 Gii，但我不知道该怎么做？我正在尝试使用

`[http://localhost:8080/pm1/backend/www/index.php?r=gii]`url 但它会到达默认后端页面而不是 gii 页面。

如果没有 YiiBoilerplate，我可以使用 [http://localhost:8080/pm1/index?r=gii] 访问 Gii

如果需要任何配置，请告诉我在使用 YiiBoilerplate 时如何访问 Gii 或指向教程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T05:41:22.530

默认的 YiiBoilerplate 禁用了 gii，因此您必须启用它。如果您检查*backend/www/index.php*文件，您将看到以下行：

```
$config=require('backend/config/main.php'); 
```

它告诉我们正在加载的确切配置文件：*backend/config/main.php*。
在*backend/config/main.php*中通过取消注释以下行来启用 gii 模块：

```
'modules' => array(
    'gii' => array(
        'class' => 'system.gii.GiiModule',
        'password' => 'clevertech',
        'generatorPaths' => array(
            'bootstrap.gii'
        )
    )
), 
```

现在您可以通过以下 url 访问 gii: `http://localhost:8080/pm1/backend/www/index.php/gii/default/login`。

几点建议：

*   默认情况下`urlFormat`，`path`这就是为什么即使启用 gii`index.php?r=gii`也无法正常工作的原因
*   他们也设置`showScriptName`为 false，这意味着`index.php`不会显示，在没有`index.php`你必须做一些网络服务器重定向的情况下工作，请阅读有关提示[的指南。](http://www.yiiframework.com/doc/guide/1.1/en/topics.url#hiding-x-23x "http://www.yiiframework.com/doc/guide/1.1/en/topics.url#hiding-x-23x")
*   如果您不想隐藏 index.php，只需在*backend/config/main-local.php*中注释此行：

    ```
    'showScriptName' => $params['url.showScriptName'], 
    ```

*   另请阅读[指南的 gii 部分](http://www.yiiframework.com/doc/guide/1.1/en/topics.gii "http://www.yiiframework.com/doc/guide/1.1/en/topics.gii")。

# .htaccess - .htaccess 重写循环错误

> ID：13362417
> 
> 赞同：0
> 
> 时间：2012-11-13T14:23:30.573
> 
> 标签：.htaccess, mod-rewrite, rewrite

我需要能够做到，以便当有人访问我的网站时说：

一）[http://www.mysite.co.uk/](http://www.mysite.co.uk/)

它实际上显示以下内容：

b) [http://www.mysite.co.uk/catalog/index.php](http://www.mysite.co.uk/catalog/index.php)

并且如果用户输入（b），那么他们是 301'd 到（a）

在我的 .htaccess 中，我目前有以下内容，但这会导致 301 循环错误

```
RewriteRule ^/?$ catalog/index.php [L]
Redirect 301 /catalog/index.php http://www.mysite.co.uk 
```

有没有办法解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:54:58.107

尝试以下几行：

```
#Permanently redirect BROWSER requests for the .php script to the Site root:
RewriteCond %{THE_REQUEST}      /catalog/index.php     [NC]
RewriteRule ^.*                 http://%{HTTP_HOST}/   [R=301,L]

#Internal redirect (Alias) the root of the site to: /catalog/index.php
RewriteRule ^$                  /catalog/index.php      [L] 
```

# java - 将固定大小设置为 SWT 标签

> ID：13362419
> 
> 赞同：4
> 
> 时间：2012-11-13T14:23:38.040
> 
> 标签：java, swt

我想设置一个标签大小来固定大小。并且不改变标签大小加入它的文本我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T14:50:58.153

理想情况下，您会在正在使用的布局中设置宽度。此外，在创建标签时，您可以设置是否要包装内容（即垂直扩展）。

所以这里有一些取决于布局的例子：

表单布局：

```
// Add | SWT.WRAP to get label to wrap
Label testLabel = new Label (parent, SWT.LEFT);
FormData fd = new FormData();
fd.width = 50;
testLabel.setLayoutData (fd); 
```

网格布局：

```
// Add | SWT.WRAP to get label to wrap
Label testLabel = new Label (parent, SWT.LEFT);
GridData gd = new GridData ();
gd.widthHint = 50;
testLabel.setLayoutData (gd); 
```

# php - str_replace，用 div 替换 word 导致 p 标签中断

> ID：13362420
> 
> 赞同：0
> 
> 时间：2012-11-13T14:23:45.723
> 
> 标签：php, jquery, wordpress, str-replace

下面的代码在 WordPress 内容中搜索单词，并用链接和 div 替换这些单词。它会在 div 关闭`<p>`它插入的标签时产生问题。

```
$myposts = get_pages(args...);
$replace = array();
$i = 1;

foreach( $myposts as $post ) {
    setup_postdata($post);
    $replace[get_the_title()] = '<a href="#popupBasic' . $i . '" data-rel="popup">' . get_the_title() . '</a><div data-role="popup" class="tooltipBox" id="popupBasic' . $i . '">' . get_the_content() . '</div>';
    $i++;
}

$text = str_replace(array_keys($replace), $replace, $text); 
```

为什么 str_replace 会`<p>`像这样破坏标签？

```
<div>
    <p>Some random text thats been <a href="#" class="link">cutt</a></p><div style="display: none;"><!-- placeholder --></div> off.<p></p>
</div> 
```

如果它不能在 PHP 中修复，我们可以用 jQuery 修复它吗？我想把那个被切断的词放回去，在这种情况下是“关闭”。进入`<p>`链接后关闭的标签。最后还要删除空`<p>`标签。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T14:28:45.223

[`p`元素](http://www.w3.org/TR/html5/the-p-element.html#the-p-element)包含[*短语内容*](http://www.w3.org/TR/html5/content-models.html#phrasing-content-1)。[`div`](http://www.w3.org/TR/html5/the-div-element.html#the-div-element)在短语内容中无效，在[*流内容*](http://www.w3.org/TR/html5/content-models.html#flow-content-1)中有效。（将 a`div`放入 a`p`就像将 a`p`放入 a一样`p`。）因此浏览器正在充分利用无效标记。

尝试使用 a[`span`](http://www.w3.org/TR/html5/the-span-element.html#the-span-element)而不是 a `div`。

# javascript - 在 IE7 中加载外部 Javascript 文件的问题

> ID：13362422
> 
> 赞同：0
> 
> 时间：2012-11-13T14:23:50.590
> 
> 标签：javascript, jquery, html, css, internet-explorer-7

我有一个名为 plugins.js 的外部 javascript 文件，其中包含我在主页上的几个插件的所有 jquery 代码。它们在所有浏览器中都可以正常工作，除了 ie7，它不会加载它们中的任何一个。如果我将它们单独包含在 index.php 页面的头部，ie7 只会加载它们，但我不想这样做，因为插件脚本很长，这就是我想单独加载它的原因。

代码可以在 - www.cutecupcak.es 上看到

抱歉，我似乎无法在此处插入代码。但是外部脚本文件称为 .plugins.js

我怎样才能让 ie7 阅读这些脚本而不将它们全部移动到主页？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T14:25:49.270

你的问题是`,`- 改变

```
$('#slider').nivoSlider({ //home page slider //
  animSpeed: 1500,
  pauseOnHover: true,
  pauseTime: 5500,
}); 
```

至

```
$('#slider').nivoSlider({ //home page slider //
  animSpeed: 1500,
  pauseOnHover: true,
  pauseTime: 5500 // Removed last comma
}); 
```

IE 对额外的尾随逗号非常挑剔

注意：我通过查看 IE 中的开发人员工具发现了这个错误 - 它告诉我`Expected identifier, string or number`plugin.js 的第 12 行有一个错误

# ajax - CascadingDropDown 总是从 WebMethod 设置默认值

> ID：13362424
> 
> 赞同：0
> 
> 时间：2012-11-13T14:23:58.980
> 
> 标签：ajax, default, toolkit, autopostback, cascadingdropdown

我更新了 Ajax 控制工具包。并且 CascadingDropDown 始终从 Web 方法设置默认值（在任何回发事件之后）。（如果我更改值并按下 Autopostback="true" CascadingDropDown 设置默认值的按钮）可能导致它或我该如何修复它？

```
 <asp:UpdatePanel ID="PolicyUpdatePanel" runat="server" RenderMode="Block" UpdateMode="Always">
    <ContentTemplate>
    <%-------------------%>
    <ajaxToolkit:CascadingDropDown ID="CascadingDropDown_ddlModel" runat="server" TargetControlID="ddlModel"
                PromptText="Select it" ServicePath="~/Srv/CascadingDropDownWebService.asmx"
                ServiceMethod="GetTransportModel" Category="TransportModel" />
    <asp:DropDownList ID="ddlModel" runat="server" DataTextField="Name"
                        DataValueField="Id" AppendDataBoundItems="True" TabIndex="9" EnableViewState="true">
                        <asp:ListItem Text="Select it" Value="-1">
                        </asp:ListItem>
    </asp:DropDownList>
    <ajaxToolkit:CascadingDropDown ID="CascadingDropDown_ddlFranchise" runat="server"
                    ParentControlID="ddlModel" TargetControlID="ddlFranchise" PromptText="Select it"
                    ServicePath="~/Srv/CascadingDropDownWebService.asmx" ServiceMethod="GetFranchise"
                    Category="Franshise" />
    <asp:DropDownList ID="ddlFranchise" runat="server" DataTextField="Name" DataValueField="ID"
                    AppendDataBoundItems="True" TabIndex="42" EnableViewState="true" onchange="CheckFranchise();">
                    <asp:ListItem Text="Select it" Value="-1" />
    </asp:DropDownList>
    <%-------------------%>

    <asp:Button ID="btnSaveCalc" runat="server" Text="Calculate" CssClass="main-input"
                    CausesValidation="true" ValidationGroup="vgApplication" EnableViewState="false"
                    TabIndex="73" OnClick="btnSaveCalc_Click" OnClientClick="Validate();" /> 
```

而 WebMethod 是

```
 [WebMethod]
    public CascadingDropDownNameValue[] GetFranchise(string knownCategoryValues, string category)
    {
        StringDictionary kv = CascadingDropDown.ParseKnownCategoryValuesString(knownCategoryValues);
        Guid ModelId = new Guid(kv["TransportModel"]);

        DamageFranchiseList list = new DamageFranchiseList();
        list.FillVisibleByModelId(ModelId);

        List<CascadingDropDownNameValue> values = new List<CascadingDropDownNameValue>();
        int i = 0;

        foreach (var item in list)
        {
            i = i + 1;
            values.Add(new CascadingDropDownNameValue(item.Name.ToString(), item.ID.ToString(), list.Count >= 4 ? i == 4 : i == list.Count));
        }

        return values.ToArray();
    } 
```

# java - 原子引用的保证

> ID：13362427
> 
> 赞同：2
> 
> 时间：2012-11-13T14:24:00.783
> 
> 标签：java, multithreading, concurrency, java.util.concurrent

的语义是`AtomicReference`什么？
如果我做：

`AtomicReference<CustomObject> ref = new AtomicReference<CustomObject>();`

然后我做：

```
public void someMethod(){  
 //do something  

 ref.set(loadNewData());  

}  

private final Sempahore updatePermit = new Sempahore(1);  

private CustomObject loadNewData(){  
     CustomObject obj = null;  
     if (updatePermit.tryAcquire()) {  
        obj = ...; //do the loading and create Object  
        updatePermit.release();  
    } else {  
        //update already running, wait  
        updatePermit.acquire();  
        //release the permit immediately  
        updatePermit.release();  
        obj = ref.get(); //????
    }  
    return obj;    
} 
```

是否可以**保证**在线`obj = ref.get(); //????`将`get`返回**最新**版本的`CustomObject`?
这与 assylias 对[post](https://stackoverflow.com/questions/13356702/how-can-i-make-sure-a-method-is-only-called-once-by-multiple-threads)的回答有关：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:29:15.397

是的。
`AtomicReference`保证出版。

但是，不能保证不同的线程不会在一毫秒后设置它。

请注意，如果您不调用`compareAndSet()`，则 an`AtomicReference`并不比`volatile`字段好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T14:30:51.057

阅读[JavaDoc 的`java.util.concurrent.atomic`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/package-summary.html)：

> *   `get`具有读取`volatile`变量的记忆效应。
>     
>     
> *   `set`具有写入（分配）`volatile`变量的记忆效应。

所以保证是：`get()` *总是*返回传递给的最后一个值`set()`。在此期间你做了什么，你使用什么样的锁等等都没有关系。修改`volatile`变量（你实际上是这样做的）保证对读取该值的所有其他线程可见。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T14:32:42.883

实际上，您的代码有可能导致新数据丢失的竞争条件：

1.  第一个调用者进入 loadNewData 并开始加载新数据（有信号量）
2.  第二个调用者无法获得信号量并等待获取
3.  第一个调用者完成加载并释放信号量（但尚未返回新数据）
4.  第二个调用者获取信号量，调用`ref.get()`并获取*旧*数据
5.  第一个调用者返回传递给的新数据`ref.set()`
6.  第二个调用者返回*旧*数据，该旧数据在传递给时会覆盖新数据`ref.set()`

由于`someMethod()`总是加载新数据，并且您*总是希望调用者**在*加载新数据时等待，所有这些额外的东西都是无用的。只需在整个块周围使用一个简单的同步块（或锁）并放弃原子引用。根据链接的帖子，您似乎只想这样做一次，因此请使用初始化标志。

 *```
private boolean _initialized;

public synchronized void loadLatestData() {
  if(!_initialized) {
      // load latest data ...
      _initilized = true;
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T14:43:58.623

原子变量（包括`AtomicReference`）与字段具有相同的属性`volatile`，因为它们在线程之间建立了先发生关系。如果一个线程*A*将一个值写入 volatile 字段（或原子变量），而另一个线程*B*从同一个变量中读取，则您不一定能保证*B*是否会看到*A*的变化，但您可以保证

*   **IF** *B*看到*A写入的值*
*   **那么** *B*还将看到*A在写入 volatile 字段之前对**其他*字段（易失性和非易失性）所做的任何写入的结果。*

# android - 从 logcat 读取的前台线程在 Android ICS 中暂停

> ID：13362428
> 
> 赞同：0
> 
> 时间：2012-11-13T14:24:07.017
> 
> 标签：android, multithreading, service, logcat, foreground

我有一个在后台启动线程的应用程序。该线程读取了logcat：

```
public class MonitorLogService extends Service{

...

    private void handleCommand(Intent intent){
    if (ACTION_FOREGROUND.equals(intent.getAction())) {
        // In this sample, we'll use the same text for the ticker and the expanded notification
        CharSequence text = getText(R.string.app_name);

        // Set the icon, scrolling text and timestamp
        Notification notification = new Notification(R.drawable.stat_notify, text, System.currentTimeMillis());

        // The PendingIntent to launch our activity if the user selects this notification
        PendingIntent contentIntent = PendingIntent.getActivity(this, 0, new Intent(this, ConfigActivity.class), 0);

        // Set the info for the views that show in the notification panel.
        notification.setLatestEventInfo(this, text,getText(R.string.service_running), contentIntent);
        startForegroundCompat(R.string.service_running, notification);

        monitorLogThread = new MonitorLogThread();
        monitorLogThread.start();
    }
}

private static Thread monitorLogThread;

private class MonitorLogThread extends Thread{

    BufferedReader br; 

    @Override
    public void run() {
        try {   

                Process process;
                process = Runtime.getRuntime().exec("logcat -c");
                process = Runtime.getRuntime().exec("logcat -b events");
                br = new BufferedReader(new InputStreamReader(process.getInputStream()));
                String line;

                // Lee mientras no haya líneas nulas o el proceso se interrumpa
                while(((line=br.readLine()) != null) && !this.isInterrupted()){
                    Log.d("MyApp",line);
                }

            } catch (Exception e) {
                e.printStackTrace();
            }
    }
} 
```

在 Android 2.3 中一切正常，但在 Android 4 中有一个问题：当我离开应用程序时， **“br.readLine()”**没有返回任何行，它只是暂停了。当我再次打开应用程序时，服务返回 logcat 行。

我不明白发生了什么，因为在 Android 2.3 中一切正常。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:19:07.850

该命令`logcat -b events`转储缓冲区，但仍附加到缓冲区等待其他事件并且永远不会退出。

要`logcat`在读取缓冲区中的信息后退出，您需要添加标志`-d`。

例子：

```
logcat -d -b events 
```

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:02:29.950

不幸的是，API 16 不支持[我在这里找到的日志读取权限。](https://stackoverflow.com/questions/11461650/read-logs-permission-on-jelly-bean-api-16)

# android - Android用不同的值更新多行

> ID：13362429
> 
> 赞同：3
> 
> 时间：2012-11-13T14:24:14.473
> 
> 标签：android, sqlite, sql-update

我有一个包含 3 行 _id、名称和编号的表。我必须用不同的值更新每一行的列号。实际上我的代码是：

```
ContentValues values;
ContentResolver cr = getContentResolver();
int n[] = new int[10];
// functions to assign the values to n[]
for(int i=1; i<31;i++) {
    values = new ContentValues();
    values.put("number", n[i]);
    cr.update(MyProvider.CONTENT_URI_TABLE, values, "_id="+i, null);
} 
```

这样，我必须使用大量的 UPDATE 和对数据库的多次访问。有没有办法简化程序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T14:34:16.913

为此，我将在 ContentResolver 上使用[applyBatch()](http://developer.android.com/reference/android/content/ContentResolver.html#applyBatch%28java.lang.String,%20java.util.ArrayList%3Candroid.content.ContentProviderOperation%3E%29)方法。[基本上，它需要一个ContentProviderOperation](http://developer.android.com/reference/android/content/ContentProviderOperation.html)类型的数组，用于指定您要更新/插入/删除的内容。

虽然它不会简化您正在编写的代码，但它对您正在访问的内容提供者可能是有益的。这里的好处是内容提供者可以做一些事情，比如在事务中应用这些更新。

# ruby-on-rails - Rails 3.1 I18n 词变格

> ID：13362431
> 
> 赞同：3
> 
> 时间：2012-11-13T14:24:19.073
> 
> 标签：ruby-on-rails, internationalization

假设有一个名为“用户”的模型。我想使用表单助手为该用户创建/更新操作创建一个表单。在我的母语中，模型名称的变格会在这种情况下发生变化。

示例：
通用上下文中的模型名称应为“Пользовател* *ь* *”
表单上下文中的模型名称应为“by“Пользовател* *я* *”

我想强调的是，这个问题与多元化无关，互联网上的许多文章都涵盖了多元化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T16:35:42.600

# 回答：

我最终将以下内容添加到我的语言环境文件中：

```
cs:
  helpers:
    submit:
      user:
        create: "Vytvořit Uživatele" # Create + Accusative form of User in Czech
        update: "Uložit Uživatele"   # Update + Accusative form of User in Czech 
```

这些是通过简单的形式拾取的，我不确定它们是由常规表单助手还是由表单自动提取的。

# 进一步的想法：

到目前为止，当我将它存储在我的模型中时，我还没有弄清楚如何引用宾格形式：

```
cs:
  models:
    user:
      one:"Uživatel"
      few:"Uživatelé"
      many:"Uživatelů"
      accusative:"Uživatele" 
```

这会使它变得很干燥，因为我不再需要一个由模型名称限定的助手：

```
cs:
  helpers:
    submit:
      create: "Vytvořit <model.accusative>"
      update: "Uložit <model.accusative>" 
```

# spring-mvc - 为什么我的 Spring Controller 将我引导到错误的页面？

> ID：13362435
> 
> 赞同：0
> 
> 时间：2012-11-13T14:24:28.397
> 
> 标签：spring-mvc

我正在编写我的第一个 Spring 3.0.5 MVC 应用程序，我很困惑为什么我的控制器映射没有达到我的预期。

我有一个在用户尝试通过输入他的姓名和密码登录后调用的 VerifyPasswordController。

```
// Called upon clicking "submit" from /login
@RequestMapping(value = "/verifyPassword", method = RequestMethod.POST)
@ModelAttribute("user")
public String verifyPassword(User user,
        BindingResult result) {

    String email = user.getEmail();
    String nextPage = CHOOSE_OPERATION_PAGE; // success case
    if (result.hasErrors()) {
        nextPage = LOGIN_PAGE;
    } else if (!passwordMatches(email, user.getPassword())) {
        nextPage = LOGIN_FAILURE_PAGE;
    } else {
        // success
    }
    return nextPage;
 } 
```

我可以在调试器中验证是否正在调用此方法，但之后`verifyPassword`显示的是页面而不是`chooseOperation`页面。WebLogic 的控制台输出似乎表明我的映射是正确的：

```
INFO : org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/chooseOperation] onto handler 'chooseOperationController'
INFO : org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/chooseOperation.*] onto handler 'chooseOperationController'
INFO : org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping - Mapped URL path [/chooseOperation/] onto handler 'chooseOperationController' 
```

这是选择操作控制器：

```
@Controller
@SessionAttributes("leaveRequestForm")
public class ChooseOperationController implements PageIfc, AttributeIfc {

    @RequestMapping(value = "/chooseOperation")
    @ModelAttribute("leaveRequestForm")
    public LeaveRequest setUpLeaveRequestForm(
            @RequestParam(NAME_ATTRIBUTE) String name) {
        LeaveRequest form = populateFormFromDatabase(name);
        return form;
    }

    // helper methods omited
} 
```

我欢迎任何建议，尤其是用于调试此类映射问题的“通用”技术。顺便说一句，我也尝试“重定向”到所需的页面，但得到了相同的结果。

servlet-context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <context:component-scan base-package="com.engilitycorp.leavetracker" />

    <beans:bean id="leaveRequestForm"
          class="com.engilitycorp.leavetracker.model.LeaveRequest" />

</beans:beans> 
```

常数：

```
String LOGIN_FAILURE_PAGE = "loginFailure";
String LOGIN_PAGE = "login";
String CHOOSE_OPERATION_PAGE = "chooseOperation"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:47:19.473

请记住，您返回的字符串是 jsp 的名称（请参阅您的内部资源视图），如果您想重定向到其他控制器，您应该返回“redirect:controllerPath”，如果是 CHOOSE_OPERATION_PAGE，您应该检查 nextPage 的最终值价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:33:03.383

尝试为其他控制器指定映射，即 ChooseOperationController

```
@Controller
@RequestMapping(/chooseOps)
@SessionAttributes("leaveRequestForm")
public class ChooseOperationController implements PageIfc, AttributeIfc {
        //your controller logic
    } 
```

然后，当您指向成功视图时，指定完整路径以知道它必须引用不同的控制器。

```
String CHOOSE_OPERATION_PAGE = redirect:chooseOps/chooseOperation; 
```

# c - 打印字母及其ASCII码

> ID：13362437
> 
> 赞同：1
> 
> 时间：2012-11-13T14:24:38.447
> 
> 标签：c

我尝试打印从 A 到 Z 和从 a 到 z 的所有字母及其 ascii 代码，但是当我尝试运行它时，我最终得到了一个无限循环，那么错误在哪里？

```
#include <stdio.h>

int main(void) {
 int i;
 char ch_1,ch_2;

 for (ch_1='A'; ch_1<='Z'; ch_1++) printf("letter: %c ASCII code:%d\n",ch_1,ch_1);
 for (ch_2='a'; ch_1<='z'; ch_2++) printf("letter: %c ASCII code: %d\n",ch_2,ch_2);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T14:26:12.640

```
for (ch_2='a'; ch_2<='z'; ch_2++) 
```

并不是

```
for (ch_2='a'; ch_1<='z'; ch_2++) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T14:26:28.953

在第二行中，您的序列结束功能是错误的。它说：

```
ch_1<='z' 
```

它应该说：

```
ch_2<='z' 
```

一个常见的错误！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T14:49:54.310

您的错误在于第二个 for 循环条件。你写的是 ch_1 而不是 ch_2。

# java - Apache MyFaces 特立尼达： 标题内的对齐标签

> ID：13362447
> 
> 赞同：0
> 
> 时间：2012-11-13T14:25:09.620
> 
> 标签：java, jsf-1.2, trinidad

我正在尝试创建简单的表格，其标题对齐到左或右

如果是数字，标题应向右对齐，否则应向左对齐。

这是我的代码：

```
<tr:treeTable width="700px" var="file" value="#{bean.files}">
<tr:column>
    <f:facet name="header" >
        <tr:outputText value="File Name"/>
    </f:facet>
    <tr:outputText value="#{file.fileName}"/>
</tr:column>
<tr:column inlineStyle="text-align:right">
    <f:facet name="header" >
        <tr:outputText value="File Size"/>
    </f:facet>
    <tr:outputText value="#{file.size}"/>
    <tr:convertNumber type="number"/>
</tr:column> 
```

我的代码的输出是列行正确地向右或向左对齐，但列标题没有向右对齐，只是向左对齐。

我的问题是如何使列标题也右对齐。

在上面的示例中，我需要标题文件大小与 rigth 对齐

谢谢，

约翰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:51:39.923

您可以使用`align`的属性`tr:column`。

例子 ：

```
<tr:column align="right" headerText="File Name">
    <tr:outputText value="#{file.fileName}"/>
</tr:column> 
```

# c# - 如何在drawingContext上绘制FrameworkElement？

> ID：13362448
> 
> 赞同：0
> 
> 时间：2012-11-13T14:25:13.297
> 
> 标签：c#, .net, wpf, frameworkelement

我对一个`FrameworkElement`命名的 _frameworkElement 有一个参考，我需要`FrameworkElement`在活动中在 drawingContext 上绘制一个`OnRender`。

像这样：

```
protected override void OnRender(DrawingContext drawingContext)
{
   drawingContext. ??
   base.OnRender(drawingContext);
} 
```

我需要考虑应用于 _frameworkElement 的任何渲染转换

这个问题有什么干净的解决方案吗？谢谢

**编辑**

*为什么我需要重写 OnRender：*

由于我有一个图形应用程序，用户可以绘制形状，并使用可以绘制矩形选择区域的选择工具选择多个形状。

我所做的是将舞台画布中的选定形状重新设置为用户可以移动和调整大小的选择画布，在选择画布上进行转换后，用户将单击舞台画布，然后我将形状重新设置为舞台画布。

*问题：*

将子元素从 Canvas 移除到 Canvas 时存在瓶颈，Children.Remove & Children.Add 将花费时间来实现，特别是当用户选择大量形状进行变换时。

所以 ？

我想不要重新选择选定的形状，而是通过覆盖 OnRender 在选择 Canvas 的 drawingContext 上绘制它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-18T15:57:30.457

不，我不相信你能做到这一点，也没有真正的意义。每个元素`DrawingContext`都是独一无二`UIElement`的，框架处理在枚举时调用适当的绘图方法（例如，每个元素都有自己的 OnRender 通道）。

我并不完全遵循您的设计+问题，但也许这些会有所帮助？

[WPF画布性能-children.add多次调用](https://stackoverflow.com/questions/4846502/wpf-canvas-performance-children-add-called-many-times)

[如何在0.5秒内用WPF画出万点的线？](https://stackoverflow.com/questions/1150060/how-to-draw-line-of-ten-thousands-of-points-with-wpf-within-0-5-second?lq=1)

如果您需要深入了解 WPF 的呈现方式，[这](http://msdn.microsoft.com/en-us/library/ms748373(v=vs.110).aspx)是一本不错的读物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-01T04:36:20.433

调用代码：

```
private FrameworkElement _frameworkElement = null;

protected override void OnRender(DrawingContext dc)
{
    var rect = new Rect(new Point(0, 0), new Size(Width, Height));

    dc.DrawImage(UtilityWPF.RenderControl(_frameworkElement, Width.ToInt_Round(), Height.ToInt_Round(), false), rect);
} 
```

辅助方法：

```
public const double DPI = 96;

/// <summary>
/// This tells a visual to render itself to a wpf bitmap
/// </summary>
/// <remarks>
/// This fixes an issue where the rendered image is blank:
/// http://blogs.msdn.com/b/jaimer/archive/2009/07/03/rendertargetbitmap-tips.aspx
/// </remarks>
public static BitmapSource RenderControl(FrameworkElement visual, int width, int height, bool isInVisualTree)
{
    if (!isInVisualTree)
    {
        // If the visual isn't part of the visual tree, then it needs to be forced to finish its layout
        visual.Width = width;
        visual.Height = height;
        visual.Measure(new Size(width, height));        //  I thought these two statements would be expensive, but profiling shows it's mostly all on Render
        visual.Arrange(new Rect(0, 0, width, height));
    }

    RenderTargetBitmap retVal = new RenderTargetBitmap(width, height, DPI, DPI, PixelFormats.Pbgra32);

    DrawingVisual dv = new DrawingVisual();
    using (DrawingContext ctx = dv.RenderOpen())
    {
        VisualBrush vb = new VisualBrush(visual);
        ctx.DrawRectangle(vb, null, new Rect(new Point(0, 0), new Point(width, height)));
    }

    retVal.Render(dv);      //  profiling shows this is the biggest hit

    return retVal;
} 
```

# xslt - 浏览器不受支持的 Tridion 2011 SP1 富文本 XSLT 中的命名空间问题

> ID：13362450
> 
> 赞同：6
> 
> 时间：2012-11-13T14:25:20.757
> 
> 标签：xslt, tridion, tridion-2011

我在模式（Tridion 2011 SP1）中有一个富文本字段，附加了一个基本的 XSLT 过滤器（默认的 XSLT 或自定义的，对于这个问题并不重要）。

在 IE9 中，当我基于该架构创建组件时，源选项卡中的 XHTML 呈现良好，没有任何命名空间，例如：

```
<p>a paragraph</p>
<p>
    <a href="http://www.sdltridion.com">a link</a>
</p> 
```

我能够保存组件。

但在 Firefox（16.0.2，不支持）中，名称空间会在 Source 选项卡中呈现：

```
<p xmlns="http://www.w3.org/1999/XSL/Transform">a paragraph</p>
<p xmlns="http://www.w3.org/1999/XSL/Transform">
    <a href="http://www.sdltridion.com">a link</a>
</p> 
```

这会导致以下 XML 验证错误：

> 命名空间“http://www.yme.com/GeneralContent”中的元素“段落”在命名空间“http://www.w3.org/1999/XSL/Transform”中具有无效的子元素“p”。预期的可能元素列表：命名空间“http://www.w3.org/1999/xhtml”中的任何元素..

现在我知道它是一个不受支持的 Firefox 版本，但是这个命名空间是从哪里来的呢？Richtext XSLT 中定义的命名空间是`http://www.w3.org/1999/XSL/Transform`...

有人知道可能的解决方法吗？

这是过滤 XSLT，但正如我已经说过的，默认 XSLT 也会发生这种情况：

```
<stylesheet version="1.0" xmlns="http://www.w3.org/1999/XSL/Transform">
    <output omit-xml-declaration="yes" method="xml" cdata-section-elements="script"></output>
    <template match="/ | node() | @*">
        <copy>
            <apply-templates select="node() | @*"></apply-templates>
        </copy>
    </template>
    <template match="*[(self::br or self::p or self::div) and normalize-space(translate(., &apos; &apos;, &apos;&apos;)) = &apos;&apos; and not(@*)     and      not(processing-instruction()) and not(comment()) and not(*[not(self::br) or @* or * or node()]) and not(following::node()[not((self::text() or self::br or self::p or self::div) and normalize-space(translate(., &apos; &apos;, &apos;&apos;)) = &apos;&apos;        and         not(@*) and not(processing-instruction()) and not(comment())        and         not(*[not(self::br) or @* or * or node()]))])]">
    </template>
    <template match="br[parent::div and not(preceding-sibling::node()) and not(following-sibling::node())]">
        <text></text>
    </template>
    <template match="table|td|tr|th|tbody|p|div|a">
        <element name="{name()}">
            <choose>
                <when test="name() =&apos;img&apos;">
                    <for-each select="@*">
                        <attribute name="{name()}">
                            <value-of select="."></value-of>
                        </attribute>
                    </for-each>
                </when>
                <otherwise>
                    <for-each select="@*">
                        <choose>
                            <when test="name() =&apos;border&apos;"></when>
                            <when test="name() =&apos;cellpadding&apos;"></when>
                            <when test="name() =&apos;cellspacing&apos;"></when>
                            <when test="name() =&apos;bgcolor&apos;"></when>
                            <when test="name() =&apos;bordercolor&apos;"></when>
                            <when test="name() =&apos;width&apos;"></when>
                            <when test="name() =&apos;height&apos;"></when>
                            <when test="name() =&apos;bordercolor&apos;"></when>
                            <when test="name() =&apos;span&apos;"></when>
                            <when test="name() =&apos;style&apos;"></when>
                            <when test="name() =&apos;class&apos;">
                                <choose>
                                    <when test=". =&apos;MsoNormal&apos;"></when>
                                    <otherwise>
                                        <attribute name="{name()}">
                                            <value-of select="."></value-of>
                                        </attribute>
                                    </otherwise>
                                </choose>
                            </when>
                            <otherwise>
                                <attribute name="{name()}">
                                    <value-of select="."></value-of>
                                </attribute>
                            </otherwise>
                        </choose>
                    </for-each>
                </otherwise>
            </choose>
            <apply-templates></apply-templates>
        </element>
    </template>
    <template match="h1">
        <element name="h2">
            <apply-templates></apply-templates>
        </element>
    </template>
    <template match="td/p">
        <apply-templates></apply-templates>
    </template>
    <template match="li/p">
        <apply-templates></apply-templates>
    </template>
    <template match="link|script|font|iframe|ilayer|layer|span|small">
        <apply-templates></apply-templates>
    </template>
</stylesheet> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T15:15:57.677

我相信这个问题与这篇文章有关

[Tridion 2011 - 在 Formatting Feature 窗口中过滤 XSLT](https://stackoverflow.com/questions/13219267/tridion-2011-filtering-xslt-on-formatting-feature-window)

似乎迁移过程（或者可能是奇怪的 GUI 行为）正在改变过滤 XSLT，并且似乎影响了 RTF 字段的行为。基本上，在 XSLT 中使用名称空间和名称空间前缀的方式似乎已经改变。典型的 XSLT 使用`xsl`名称空间前缀，而您的新 XSLT 似乎排除了前缀并使用默认名称空间。

我认为这是一个错误，应该提交给支持人员，但解决方法已在相关帖子中介绍。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T15:19:36.340

好吧，您的样式表具有`<stylesheet version="1.0" xmlns="http://www.w3.org/1999/XSL/Transform">`并且确实意味着它接受输入`<element name="{name()}">`（等）元素并将它们转换为具有相同名称（例如）但在 XSLT 名称空间中的元素。`<template match="table|td|tr|th|tbody|p|div|a">``p``table``p`

因此，您可能想要的是编写带有前缀（即`<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">`和`<xsl:template match="table|td|tr|th|tbody|p|div|a">`）的 XSLT 代码，以便 XSLT 名称空间不会干扰您要创建的结果元素。

另一方面，替换 `<element name="{name()}">`为`<xsl:copy>`也应该这样做。

# spring - 如何使用 PostgreSQL 作为内存中的 SGBD（类似于 HYPERSONIC）进行单元测试？

> ID：13362452
> 
> 赞同：0
> 
> 时间：2012-11-13T14:25:29.990
> 
> 标签：spring, hibernate, postgresql, maven, in-memory-database

在运行我的测试时，我正在尝试将 PostgreSQL 与 Spring、Maven 和 Hibernate 一起用作内存中的 SGBD。

我得到的错误是数据库不存在。

```
Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (FATAL: database "test" does not exist) 
```

有没有办法指定 PostgreSQL 通过休眠在内存中创建自己的表，或者提供一个可以构建数据库的 sql 查询？

以下是我与 HYPERSONIC_IN_MEMORY 一起使用的一些属性并且工作得很好，我怎样才能将其应用于 PostgreSQL？

```
<properties>
    <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect" />
    <property name="hibernate.hbm2ddl.auto" value="create" />
</properties> 
```

这是我第一次使用 PostgreSQL，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T00:48:38.360

如果您连接到一个不存在的数据库，您似乎希望 PostgreSQL 创建一个数据库。它不支持这样做。

是的，您可以“为它提供一个可以构建数据库的 sql 查询”……但是您需要连接到数据库才能发出适当的`CREATE DATABASE`命令。

尝试在单元测试框架中使用预类或脚本来建立到 PostgreSQL 的 JDBC 连接并创建测试数据库。或者将其作为单元测试框架的功能请求，或者作为 Hibernate 的功能请求。请参阅[此论坛主题](https://forum.hibernate.org/viewtopic.php?f=6&t=956416&view=next)以进行先前的讨论。

一般建议是让 ORM*更新*现有模式，而不是创建新模式，或者使用预测试代码删除并重新创建数据库。

至于“in RAM”部分......如果这是一个速度问题，请参阅[Optimize PostgreSQL for fast testing](https://stackoverflow.com/questions/9407442/optimise-postgresql-for-fast-testing)。

# c++ - arm-linux-gnueabihf-g++ 是否有可靠的 C++0x 支持

> ID：13362469
> 
> 赞同：1
> 
> 时间：2012-11-13T14:26:35.637
> 
> 标签：c++, c++11, arm, cross-compiling, embedded-linux

我尝试使用 arm-linux-gnueabihf-g++ 编译器（来自 g++-arm-linux-gnueabihf 包）来编译带有 lambda 表达式的简单程序，并带有 -std=c++0x 开关。有用。有没有人有使用这个编译器的 C++0x 特性的经验？我想知道，这种支持是否可靠且使用安全。

该软件包来自 Ubuntu 存储库，操作系统已更新（12.04 32 位）。版本：arm-linux-gnueabihf-g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T14:33:25.183

使用`--version`标志获取 GCC 版本。然后，查阅[C++-11 功能矩阵](http://gcc.gnu.org/projects/cxx0x.html)以查看您可以在该特定版本上使用哪些功能。

# c# - 启用对具有不同主题的多个用户登录的支持？

> ID：13362470
> 
> 赞同：1
> 
> 时间：2012-11-13T14:26:46.510
> 
> 标签：c#, authentication, themes, authorization, multi-tenant

我在我的 Web 应用程序中设置了两个角色，一个是“管理员”，一个是“操作”，两个主题是蓝色和红色。

我想要做的是构建一个介绍性的多租户应用程序，它允许 2 个不同的用户登录访问不同的主题？

现在，我可以使用下拉菜单动态切换主题，但是在处理 2 个不同的用户帐户时，我很难拼凑出允许这样做的代码？

我在公共 void Page_PreInit() 事件中工作。

任何建议都会很棒，干杯。

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class _Default : Page
{
    public void Page_PreInit()
    {
        if (Roles.IsUserInRole("admin"))
        {
            Page.Theme = red;
        }
        else if (Roles.IsUserInRole("operations"))
        {
            Page.Theme = blue;

        }
    }

    public string red { get; set; }

    public string blue { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:34:41.210

下面是一个如何根据用户角色进行切换的示例。

```
 protected void Page_PreInit()  {
if (Roles.IsUserInRole("admin"))
    {
        Page.Theme = Profile.Blue;
    }
    else if (Roles.IsUserInRole("operations"))
    {
        Page.Theme = Profile.Red;
    }  } 
```

希望这可以帮助。

# powershell - 卸载解决方案中的所有项目

> ID：13362471
> 
> 赞同：0
> 
> 时间：2012-11-13T14:26:48.873
> 
> 标签：powershell, visual-studio-2012

基于[如何通过 nuget powershell 脚本重新加载 Visual Studio 项目](https://stackoverflow.com/questions/12292577/how-can-i-reload-a-visual-studio-project-thru-a-nuget-powershell-script)

我在想powershell是解决这个问题的方法，但是如果我开始一行，包管理器控制台似乎只想返回文本`{`

所以这是我试图让它运行的脚本：

```
{ $dte.Windows.Item("{3AE79031-E1BC-11D0-8F78-00A0C9110057}").Activate() 
$dte.Solution | ForEach-Object { $dte.ActiveWindow.Object.GetItem($_.name).Select(1)
$dte.ExecuteCommand("Project.UnloadProject")}
} 
```

但是当包装成`{`代码`}`时，它只是将文本作为命令块返回

如何使用 powershell 卸载整个解决方案和解决方案文件夹中的所有项目？我对powershell不是很好，但肯定有办法做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T21:26:31.253

怎么样：

```
$dte.ExecuteCommand("ProjectandSolutionContextMenus.Solution.UnloadProjects")
$dte.ExecuteCommand("ProjectandSolutionContextMenus.Solution.ReloadProjects") 
```

这就是工作。您不妨提前打电话`$dte.ExecuteCommand("File.SaveAll")`。

这回答了你的问题了吗？

# android - 更改 Android 应用的文件夹名称

> ID：13362480
> 
> 赞同：2
> 
> 时间：2012-11-13T14:27:31.710
> 
> 标签：android, eclipse, android-ndk, java-native-interface, renaming

我有一个 android 应用程序（带有 jni、ndk）。我想改变它的名字。我已经成功更改了包名称，以及 strings.xml 中的应用程序标题，如本论坛其他帖子中所建议的那样。

但是 .apk 文件仍然具有旧名称。我猜这是因为主文件夹仍然具有旧名称。如果我在 eclipse 中更改文件夹名称并“更新引用”。我收到以下错误。

```
Errors occurred during the build.
Errors running builder 'CDT Builder' on project 'NewName'.
Internal error building project NewName configuration Default
java.lang.NullPointerException
Internal error building project NewName configuration Default
java.lang.NullPointerException 
```

所以我猜它混淆了ndk-build。如果我查看 C++ 的项目属性，一切看起来都很正常（我认为）。构建路径是 ${workspace_loc:/NewName}。

关于检查什么的任何想法？

谢谢！

* * *

## 更新

好的，ndk-build 命令在命令行中运行良好。但是，如果我只从 eclipse 编译本机 c++，它会给我错误。我猜项目属性中的某些内容是错误的......

当我禁用代码检查时，项目运行良好。c++ 似乎也停留在 std 命令上。尽管我已经在我的路径中添加了三个库，如此处所述[Native c++ with Android on Eclipse - 在 stdlib 上给出错误但可以工作](https://stackoverflow.com/questions/11723210/native-c-with-android-on-eclipse-gives-error-on-stdlib-but-works)并且它们被定义为绝对路径，例如 /home/dorien/workspace2/android-ndk-r8/sources /cxx-stl/stlport/stlport

# android - SecondActivity中两个数相加后返回结果给MainActivity

> ID：13362482
> 
> 赞同：-3
> 
> 时间：2012-11-13T14:27:49.037
> 
> 标签：android, android-intent

> **可能重复：**
> [将数据发送回android中的主要活动](https://stackoverflow.com/questions/920306/sending-data-back-to-the-main-activity-in-android)

我需要在第二个活动中添加两个数字并将结果返回给主活动的逻辑吗？我希望通过 Android 中的 Intents 概念来完成。

# c++ - 使用 16 位签名格式打开 CV 不起作用...裁剪和调整图像大小

> ID：13362483
> 
> 赞同：2
> 
> 时间：2012-11-13T14:27:54.563
> 
> 标签：c++, linux, image, video, opencv

我正在尝试制作一个可以拍摄图像并放大其中一部分的块。为了做到这一点，我正在使用 OpenCV（我是新手）。

我的问题是，每当我使用 16 位签名 (cv_16sC1) 运行函数时，我都会收到错误 OpenCV Error: Unsupported format or combination of formats () in cvGetRectSubPix, file /media/virtex4/re/OpenCV-2.4.0/modules /imgproc/src/samplers.cpp，第 573 行。

首先，有谁知道这个功能是否真的适用于那个位深度？有没有办法查出来？

```
 cv::Mat image_1_in(video_frame->_width, video_frame->_height, CV_16SC1, video_frame->GetPointerToYLine(0));
  cv::Mat image_1_out(video_frame->_width, video_frame->_height, CV_16SC1, video_frame_out->GetPointerToYLine(0));

  cv::Mat temp_image;

  getRectSubPix(image_1_in, cv::Size(100, 200), cv::Point2f(200, 200), temp_image);
  resize(temp_image, image_1_out, Size(video_frame_out->_width, video_frame_out->_height)); 
```

这是许多尝试之一，每个尝试都给出相同的错误（直到我将格式更改为没有给出错误的 CV_32f）......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T06:10:54.313

它似乎`getRectSubPix`只适用于 {CV_8U, CV_8U}, {CV_32F, CV_32F} 和 {CV_8U, CV_32F} 的 {src,dst} 类型。

我深入研究了源代码并弄清楚了这一点。API 参考中没有规范。

# html - 选择元素下拉列表的最大高度（选项元素）

> ID：13362484
> 
> 赞同：11
> 
> 时间：2012-11-13T14:27:59.447
> 
> 标签：html, css

如何限制选择元素的下拉列表的高度 - 这样如果选项的总数大于此高度 - 我应该在下拉列表中滚动。如果我能在像素或项目数量方面做到这一点，我会很满意。

所以说我有以下html标记：

```
<select>
    <option selected>Select</option>
    <option>This is an option</option>
    <option>This is another Option</option>
    <option>This is another Option</option>
    <option>This is another Option</option>
    <option>This is another Option</option>
    <option>This is another Option</option>
    <option>This is another Option</option>
    <option>This is another Option</option>
    <option>This is another Option</option>
    <option>This is another Option</option>
</select> 
```

我将如何只显示前 4 个选项和滚动中的其余部分。

[这](http://jsfiddle.net/danield770/fbdHE/)是我到目前为止所拥有的，但它不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T14:32:54.267

在 StackOverflow 上搜索，我遇到了[这个](https://stackoverflow.com/questions/8788245/how-can-i-limit-the-visible-options-in-an-html-select-dropdown). 可悲的是，如果您想将其保留为下拉框，则无法在 CSS 中实现您想要的。如链接中所述，JavaScript 或 jQuery 可以解决问题，或者您可以在标签`size`上使用该属性`select`，但这会破坏下拉框的外观。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-25T12:01:00.120

我在 CSS+HTML 中找到了答案，你可以这样做：

```
<select>
  <optgroup style="max-height: 65px;" label="">
    <option selected>Select</option>
    <option>This is an option</option>
    <option>This is another Option</option>
    <option>This is another Option</option>
    <option>This is another Option</option>
    <option>This is another Option</option>
    <option>This is another Option</option>
    <option>This is another Option</option>
    <option>This is another Option</option>
    <option>This is another Option</option>
    <option>This is another Option</option>
  </optgroup>
</select> 
```

# magento - Magento - 动态定价

> ID：13362485
> 
> 赞同：2
> 
> 时间：2012-11-13T14:28:06.610
> 
> 标签：magento, dynamic, product

我创建了一个简单的电子商务应用程序，它根据许多选项计算价格。

价格是根据存储在 MySQL 中的一堆变量在 PHP 中计算的。我已将 PHP 编码为使用 jQuery AJAX 进行查询的 Web 服务。

我需要将它集成到使用 Magento 的客户现有的电子商务网站中。

我想让客户将我的“动态定价产品”添加到他们的购物车中。我需要能够添加自定义价格以及产品信息（我很高兴在单个隐藏字段中拥有）。

我熟悉编程（客户端和服务器端，大多数语言），但我一点也不熟悉 Magento。有没有一种简单的方法可以实现这一目标？理想情况下，我会将信息添加到现有表单中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:19:45.820

我能想到的最简单的方法是在 magento 中创建一个产品以用作模板。

然后创建一个观察者

```
<events>
    <sales_quote_add_item>
        <observers>
            <priceupdate_observer>
                <type>singleton</type>
                <class>mymodule/observer</class>
                <method>updatePrice</method>
            </priceupdate_observer>
        </observers>
    </sales_quote_add_item>
</events> 
```

然后在您的观察者方法中，您执行以下操作：

```
public function updatePrice($observer) {
    $event = $observer->getEvent();
    $quote_item = $event->getQuoteItem();
    $new_price = <insert logic to check if this is the custom product and to get value from ajax>
    $quote_item->setOriginalCustomPrice($new_price);
    $quote_item->save();
} 
```

（请注意，用户总是可以伪造帖子并更改商品价格）

请参阅[使用事件/观察者自定义 Magento](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method)

# jquery - ASP 和 jQuery 电子邮件表单不发送 textarea

> ID：13362486
> 
> 赞同：0
> 
> 时间：2012-11-13T14:28:14.440
> 
> 标签：jquery, asp.net, forms, email, form-submit

除了没有发送文本区域的“OtherText”值外，一切都运行良好。

HTML：

```
<label for="ReasonforRMA">Reason for RMA:</label>
<select name="ReasonforRMA" class="required" id="otherCheck">
<option value="">Choose an option</option> 
<option value="Wrong Item">Wrong Item</option>
<option value="Defective">Defective</option>
<option value="Unit Damaged">Unit Damaged</option>
<option value="Other">Other</option>
</select><br />

<label for="OtherText" id="otherLabel">Other Reason:</label>
<textarea name="OtherText" id="otherText"></textarea><br /> 
```

jQuery：

```
var textarea = $('#otherText');
var textlabel = $('#otherLabel');
textarea.hide();
textlabel.hide();

$('#otherCheck').change(function(){
        var select   = $(this).val();
        if (select == 'Other'){
          textlabel.show();
          textarea.show();
        }
        else {
          textlabel.hide();
          textarea.hide();
        }
}); 
```

ASP：

```
<%
'declare variables
Dim EmailFrom
Dim EmailTo
Dim Subject
Dim DealerName
Dim DealerNumber
Dim InvoiceNumber
Dim PONumber
Dim InvoiceDate
Dim ModelNumber
Dim SerialNumber
Dim ReasonforRMA
Dim OtherText
Dim ConditionofUnit

' get posted data into variables
EmailFrom = Trim(Request.Form("EmailFrom")) 
EmailTo = "myemail@email.com"
Subject = "Online RMA Submission"
DealerName = Trim(Request.Form("DealerName")) 
DealerNumber = Trim(Request.Form("DealerNumber")) 
InvoiceNumber = Trim(Request.Form("InvoiceNumber")) 
PONumber = Trim(Request.Form("PONumber")) 
InvoiceDate = Trim(Request.Form("InvoiceDate")) 
ModelNumber = Trim(Request.Form("ModelNumber")) 
SerialNumber = Trim(Request.Form("SerialNumber")) 
ReasonforRMA = Trim(Request.Form("ReasonforRMA")) 
OtherText = Trim(Request.Form("OtherText")) 
ConditionofUnit = Trim(Request.Form("ConditionofUnit"))

' prepare email body text
Dim Body
Body = Body & "Dealer Name: " & DealerName & VbCrLf
Body = Body & "Dealer Number: " & DealerNumber & VbCrLf
Body = Body & "Invoice Number: " & InvoiceNumber & VbCrLf
Body = Body & "PO Number: " & PONumber & VbCrLf
Body = Body & "Invoice Date: " & InvoiceDate & VbCrLf
Body = Body & "Model Number: " & ModelNumber & VbCrLf
Body = Body & "Serial Number: " & SerialNumber & VbCrLf
Body = Body & "Reason for RMA: " & ReasonforRMA & VbCrLf
Body = Body & "Other Text: " & OtherText & VbCrLf
Body = Body & "Condition of Unit: " & ConditionofUnit & VbCrLf

' send email 
Dim mail
Set mail = Server.CreateObject("CDONTS.NewMail") 
mail.To = EmailTo
mail.From = EmailFrom
mail.Subject = Subject
mail.Body = Body
mail.Send 

' send confirmation
Dim mailC
Set mailC = Server.CreateObject("CDONTS.NewMail")
mailC.To = EmailFrom
mailC.From = "ouremail@email.com"
mailC.Subject = "Confirmation of your RMA Submission"
mailC.Body = "Test Confirmation"
mailC.Send

' redirect to success page 
Response.Redirect("complete.html")
%> 
```

它正在发送除“OtherText”文本区域值之外的所有内容。我猜它只是一个错字或某处的东西，但我什么都看不到！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:43:19.623

作为良好编码的问题，您应该在这些表单 HTML 字段中使用完全相同的字符串作为名称和 id。它将避免潜在的混乱。

ASP 有可能由于其自身的原因（不正确地）使用 ID 属性作为变量名而不是 name 属性。

# c# - 无法确定 UAC 在 Windows Server 2008 64 位中是否处于活动状态

> ID：13362488
> 
> 赞同：0
> 
> 时间：2012-11-13T14:28:18.223
> 
> 标签：c#, .net, uac, windows-server-2008-x64

我有一些代码可以在除 Windows Server 2008 64 位之外的所有 Windows 操作系统上正常工作。此代码确定是否打开 UAC。

```
int TokenInfLength = 0;
布尔结果；
// 第一次调用获取 TokenInformation 的长度
结果 = GetTokenInformation(WindowsIdentity.GetCurrent().Token, TOKEN_INFORMATION_CLASS.TokenElevationType, IntPtr.Zero, TokenInfLength, out TokenInfLength);
IntPtr TokenInformation = Marshal.AllocHGlobal(TokenInfLength);

结果 = GetTokenInformation(WindowsIdentity.GetCurrent().Token, TOKEN_INFORMATION_CLASS.TokenElevationType, TokenInformation, TokenInfLength, out TokenInfLength);

如果（结果）
{
    TOKEN_ELEVATION_TYPE 海拔类型 = (TOKEN_ELEVATION_TYPE)Marshal.ReadInt32(TokenInformation);
    Marshal.FreeHGlobal(TokenInformation);

    开关（海拔类型）
    {
        case TOKEN_ELEVATION_TYPE.TokenElevationTypeDefault：
            Console.WriteLine("UAC (User Account Control) 在您的操作系统中已关闭。请打开 UAC 并重新启动您的计算机。"); 休息;
        案例 TOKEN_ELEVATION_TYPE.TokenElevationTypeFull：
            Console.WriteLine("用户有一个拆分令牌，并且进程正在运行提升");
            休息;
        案例 TOKEN_ELEVATION_TYPE.TokenElevationTypeLimited：
            Console.WriteLine("用户有一个拆分令牌，但进程没有运行提升");
            休息;
    }
}

...

枚举 TOKEN_ELEVATION_TYPE : int
{
    TokenElevationTypeDefault = 1,
    TokenElevationTypeFull,
    TokenElevationTypeLimited
}
枚举 TOKEN_INFORMATION_CLASS
{
    令牌用户 = 1，
    代币组，
    代币特权，
    代币所有者，
    TokenPrimaryGroup,
    TokenDefaultDacl,
    代币来源，
    令牌类型，
    TokenImpersonationLevel,
    代币统计，
    TokenRestrictedSids,
    令牌会话 ID，
    令牌组和特权，
    令牌会话参考，
    TokenSandBoxInert,
    TokenAuditPolicy,
    代币来源，
    TokenElevationType,
    TokenLinkedToken,
    代币高度，
    TokenHasRestrictions,
    令牌访问信息，
    TokenVirtualizationAllowed,
    TokenVirtualizationEnabled,
    代币完整性等级，
    令牌UI访问，
    TokenMandatoryPolicy,
    TokenLogonSid,
    MaxTokenInfoClass
}

```

`TOKEN_INFORMATION_CLASS.TokenElevationType`是一个枚举常量，其序数值为 18。

因此，在 WS 2008 64 位上启用了我的 UAC 后，我收到消息“UAC（用户帐户控制）在您的操作系统中已关闭。请打开 UAC 并重新启动计算机”。有谁知道怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T03:41:07.277

非常害怕这种方法。它会正确地告诉您是否有拆分令牌，但这并不一定意味着任何有用的东西。

例如：

*   如果禁用 UAC 会发生什么？您不会有拆分令牌。你会得到`TokenElevationTypeDefault`.
*   如果您以`.\Administrator`帐户身份登录会发生什么？同样的，你会得到`TokenElevationTypeDefault`

两者都不意味着您是标准用户，这是将上述逻辑误用于*“典型”*案例的常见错误。

*   如果您碰巧拥有一个，而且只有一个超级特权，并且您提升到将其放入您的令牌中怎么办？然后你就有了`TokenElevationTypeFull`——这经常被解释为意味着你是一个管理员。

无耻地摘自 Chris Jackson 的：[如何确定用户是否是在 Windows Vista 上启用 UAC 的管理员组的成员](http://blogs.msdn.com/b/cjacks/archive/2006/10/09/how-to-determine-if-a-user-is-a-member-of-the-administrators-group-with-uac-enabled-on-windows-vista.aspx)

# c# - Lookup() 和 Dictionary(Of list()) 的区别

> ID：13362490
> 
> 赞同：201
> 
> 时间：2012-11-13T14:28:21.200
> 
> 标签：c#, .net, vb.net, linq

我试图围绕哪些数据结构最有效以及何时/何地使用哪些数据结构。

现在，可能是我只是对结构不够了解，但是`ILookup(of key, ...)`a 与 a 有什么不同`Dictionary(of key, list(of ...))`？

另外，我想在`ILookup`哪里使用以及在程序速度/内存/数据访问等方面会更有效？

* * *

## 回答 #1

> 赞同：307
> 
> 时间：2012-11-13T14:33:15.503

两个显着差异：

*   `Lookup`是不可变的。耶 :) （至少，我相信具体`Lookup`类是不可变的，并且`ILookup`接口不提供任何可变成员。当然，*可能*还有其他可变实现。）
*   当您查找一个不存在于查找中的键时，您会得到一个空序列而不是`KeyNotFoundException`. （因此没有`TryGetValue`，AFAICR。）

它们在效率上可能相当——例如，查找很可能`Dictionary<TKey, GroupingImplementation<TValue>>`在幕后使用 a 。根据您的要求在它们之间进行选择。就我个人而言，我发现查找通常比 a 更合适`Dictionary<TKey, List<TValue>>`，主要是由于上面的前两点。

请注意，作为实现细节，其具体实现`IGrouping<,>`用于值 implements `IList<TValue>`，这意味着使用 with 等是有效`Count()`的`ElementAt()`。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2014-06-06T06:10:09.527

有趣的是，没有人说出实际最大的区别（直接取自[MSDN](http://msdn.microsoft.com/en-us/library/bb460184%28v=vs.110%29.aspx)）：

> 查找类似于字典。不同之处在于 Dictionary 将键映射到单个值，而 Lookup 将键映射到值的集合。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2012-11-13T14:32:14.617

a`Dictionary<Key, List<Value>>`和`Lookup<Key, Value>`逻辑上都可以保存以类似方式组织的数据，并且两者的效率顺序相同。主要区别是 a`Lookup`是不可变的：它没有`Add()`方法，也没有公共构造函数（正如 Jon 提到的，您可以毫无例外地查询不存在的键，并将键作为分组的一部分）。

至于你使用哪个，这真的取决于你想如何使用它们。如果您正在维护一个不断修改的多个值的键映射，那么 a`Dictionary<Key, List<Value>>`可能会更好，因为它是可变的。

但是，如果您有一个数据序列，并且只想要按键组织的数据的只读视图，那么查找非常容易构建，并且将为您提供只读快照。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-05-20T09:38:41.080

另一个尚未提及的区别是 Lookup()[支持空键](http://referencesource.microsoft.com/#System.Core/System/Linq/Parallel/Utils/Lookup.cs)：

> Lookup 类实现了 ILookup 接口。查找与字典非常相似，只是允许多个值映射到同一个键，并且支持空键。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-11-13T14:32:30.403

`ILookup<K,V>`an和 a的主要区别在于`Dictionary<K, List<V>>`字典是可变的。您可以添加或删除键，还可以从查找的列表中添加或删除项目。An`ILookup`是*不可变*的，一旦创建就不能修改。

两种机制的底层实现将相同或相似，因此它们的搜索速度和内存占用将大致相同。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-05-03T12:28:16.207

# 当异常不是一个选项时，去查找

`Dictionary`如果您试图获得一个`Lookup`与

正如另一个答案中提到的，它还支持空键，并且在使用任意数据查询时始终返回有效结果，因此它看起来对未知输入更具弹性（比 Dictionary 更不容易引发异常）。

如果将其与`System.Linq.Enumerable.ToDictionary`函数进行比较，则尤其如此：

```
// won't throw
new[] { 1, 1 }.ToLookup(x => x); 

// System.ArgumentException: An item with the same key has already been added.
new[] { 1, 1 }.ToDictionary(x => x); 
```

`foreach`另一种方法是在循环内编写您自己的重复密钥管理代码。

## 性能考虑，字典：明显的赢家

如果您不需要列表并且要管理大量项目`Dictionary`（甚至您自己定制的结构）会更有效：

```
 Stopwatch stopwatch = new Stopwatch();
        var list = new List<string>();
        for (int i = 0; i < 5000000; ++i)
        {
            list.Add(i.ToString());
        }
        stopwatch.Start();
        var lookup = list.ToLookup(x => x);
        stopwatch.Stop();
        Console.WriteLine("Creation: " + stopwatch.Elapsed);

        // ... Same but for ToDictionary
        var lookup = list.ToDictionary(x => x);
        // ... 
```

由于`Lookup`必须为每个键维护一个项目列表，它比 Dictionary 慢（对于大量项目，速度大约慢 3 倍）

> 查找速度：创建：00:00:01.5760444
> 
> 字典速度：创建：00:00:00.4418833

# php - MySQL 创建一个复杂的查询

> ID：13362493
> 
> 赞同：1
> 
> 时间：2012-11-13T14:28:34.493
> 
> 标签：php, mysql, sql, pivot

我有三个表，一个用户表、一个 test_sessions 表和一个课程表。

我需要创建一个包含完整用户列表的报告。在课程表中，某些课程的字段“track”= 1。如果它等于 1，我需要在报告中为该课程设置一列。

test_sessions 表有一个 complete_date 字段以及 user_id 和 course_id。

对于报告，我需要这样的东西：

```
______|Tracked Course 1|Tracked Course 2 |Tracked Course 3
User 1|complete date   |complete date    |complete date
User 2|complete date   |complete date    |complete date
User 3|complete date   |complete date    |complete date 
```

我希望能够编写一个查询来执行此操作，这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:40:02.020

这基本上是 a `PIVOT`，但 MySQL 没有 a ，`PIVOT`因此您需要使用聚合和`CASE`语句来复制它。如果您知道要获取值的课程名称，则可以对其进行硬编码：

```
select u.userName,
  max(case when c.coursename = 'Course 1' then s.completed_date end) Course1,
  max(case when c.coursename = 'Course 2' then s.completed_date end) Course2,
  max(case when c.coursename = 'Course 3' then s.completed_date end) Course3
from users u
left join test_sessions s
  on u.user_id = s.user_id
left join courses c
  on s.course_id = c.course_id
group by u.username 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/d76d5/1)

如果您的课程数量未知，则可以使用准备好的语句，类似于：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'max(case when c.coursename = ''',
      coursename,
      ''' then s.completed_date end) AS ',
      coursename
    )
  ) INTO @sql
FROM courses;

SET @sql = CONCAT('SELECT u.userName, ', @sql, ' 
                  from users u
                  left join test_sessions s
                    on u.user_id = s.user_id
                  left join courses c
                    on s.course_id = c.course_id
                  group by u.username');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/d76d5/3)

# php - 我应该为数据库中的 html 文本使用哪种类型？

> ID：13362495
> 
> 赞同：5
> 
> 时间：2012-11-13T14:28:37.053
> 
> 标签：php, mysql, phpmyadmin, tinymce

我有一个插入 tinyMCE 的文本区域，其中包含我希望保存到数据库中的 HTML 代码。

我想按原样保存该 html 代码，以便能够随时打印，甚至能够将其写入文件`(using fopen("filename","w"); )`

因为我正在设置我将使用的表，所以我不知道我应该为我的数据库中的这个 html 文本分配哪种类型的记录。

我是不是该..：

*   `addslashes/stripslashes`当我保存/标记html文本时使用？
*   还是`htmlencodechars/decodechars`？
*   还是根本没有？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:36:57.343

使用[`TEXT`](http://dev.mysql.com/doc/refman/5.0/en/blob.html)数据类型来存储 HTML，并使用 PDO 或 mysqli 而不是`addslashes`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T14:37:49.030

使用大型 varchar（例如 varchar(5000)）意味着您将能够进行全文索引，而在 TEXT 列上则不能。

如果改用 BBcode 标记之类的东西会更安全，但是如果您必须使用 HTML（希望不允许客人输入它），那么[http://htmlpurifier.org/](http://htmlpurifier.org/)之类的插件可以很好地清理 HTML。

显然，您可以使用标准 PHP 函数对 HTML 进行编码和解码，但总是存在让某些东西通过的风险。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T14:38:31.487

使用[HTMLPurifier](http://htmlpurifier.org/)从 HTML 中去除任何恶意 XSS 代码。TinyMCE 尝试这样做，但可以通过直接发布到您的脚本来绕过它。

存储数据时，使用参数化查询/准备语句而不是转义，以防止 SQL 注入。[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)可以做到这一点。[这是一个很好的 PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)，特别是如果您来自本地 mysql_* 库。

至于数据类型，任何字符串类型都可以，这取决于您的内容可以有多长。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T14:35:40.237

对数据库中的列使用“文本”类型，并使用一些数据库抽象层来代替您进行封装，例如 PDO。

`htmlencodechars()`并且`addslashes()`都不适合。进行一些编码并不重要，但要针对给定目的进行正确的编码类型。

# webgl - 如何加载collada场景（使用three.js）？

> ID：13362496
> 
> 赞同：0
> 
> 时间：2012-11-13T14:28:38.050
> 
> 标签：webgl, three.js, collada

我刚刚开始使用 three.js 并尝试从 *.dae 文件加载场景。所谓场景，我的意思是一个模型（一些建筑物），一个相机的几盏灯（我希望能够在 3dsmax 中定位它，而不是在代码中手动定位）。

我在网上找到了几个使用three.js 加载collada 文件的示例代码，但没有一个显示如何从*.dae 文件加载相机和灯光。我已经尝试了几种代码变体来做到这一点，但都没有奏效，而且太糟糕了，我什至不会在这里发布它。:P 因此，如果有人能告诉我如何做到这一点或提供教程/代码的链接，或者至少给了我一些指导方针，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:37:58.310

The collada loader in three.js doesn't support the lights (and camera) feature.

# bash - 从数字中删除前导零

> ID：13362497
> 
> 赞同：2
> 
> 时间：2012-11-13T14:28:39.690
> 
> 标签：bash

如何转换 Bash/shell 中的所有数字？

```
VAR=00005
VAR=00010
VAR=00601
VAR=00550 
```

到

```
echo $VAR #5
echo $VAR #10
echo $VAR #601
echo $VAR #550 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T14:31:00.387

```
$> cat text    
00005
00010
00601
00550

$> sed -r 's/0*([0-9]*)/\1/' text    
5
10
601
550 
```

使用`printf`：

```
$> while read n; do printf "%0d\n" $((10#$n)); done < text
5
10
601
550 
```

请注意，当数字格式需要一个数字时，内部 printf 命令将使用关于基数的常见 Bash 算术规则。为了强制使用十进制表示并作为副作用，我们还应该删除 Bash 变量的任何前导零`$((10#$n))`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T14:35:42.980

或像这样：

```
kent$  echo "00005
00010
00601
00550"|awk '$0*=1'
5
10
601
550 
```

对于您更新的问题（使用 VAR）

首先，你应该有不同的变量名，而不是和 VAR 一样。

请参见下面的示例：

```
kent$  VAR=00601

kent$  VAR=$((VAR+0))

kent$  echo $VAR
601 
```

编辑

用于评论。（08、09 无效）：

08、09在这里工作过，可能是用我的shell来做的。我有zsh。我在 bash 下测试了以下内容，它们有效。希望有帮助：

在 zsh 下：

```
kent$  v=08

kent$  v=$((v+0))

kent$  echo $v
8 
```

在bash下，下面工作

```
kent@7PLaptop:/tmp$ bash -version
GNU bash, version 3.2.48(1)-release (i486-pc-linux-gnu)
Copyright (C) 2007 Free Software Foundation, Inc.
kent@7PLaptop:/tmp$ v=08
kent@7PLaptop:/tmp$ v=$(sed 's/^0*//'<<< $v)
kent@7PLaptop:/tmp$ echo $v
8 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-06T14:07:30.043

人们遇到问题的原因是，`08`带有`09`尾随零的数字被外壳视为八进制。你可以这样做：

```
VAR="08"
let "VAR=10#${VAR}"
echo $VAR 
```

删除~~尾随~~的前导零。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T14:50:09.490

使用`extglob`，您不需要任何外部进程：

```
shopt -s extglob                       # Enable extended globbing
for i in 00005 00010 00601 00550; do
    echo ${i##+(0)}
done 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-02T23:50:20.707

`echo $((10#${VAR}))`可以做你想做的

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-13T14:31:40.307

您可以使用`printf`添加或删除前导零：

```
$ printf "%05d\n" 5    
00005

$ printf "%d\n" 00005
5

$ printf "%010d\n" 00005
0000000005 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-13T15:04:52.800

至：ДМИТРИЙ МАЛИКОВ

```
printf "%d\n" 0000
printf "%d\n" 0001
printf "%d\n" 0002
printf "%d\n" 0003
printf "%d\n" 0007
printf "%d\n" 0008
printf "%d\n" 0009
printf "%d\n" 0010
printf "%d\n" 0011
printf "%d\n" 0012 
```

结果

```
0
1
2
3
7
0 line 8: printf: 0008: invalid octal number
0 line 9: printf: 0009: invalid octal number
8 !error - correctly 10
9 !error - correctly 11
10 !error - correctly 12 
```

# android - NDEF 有效载荷可以携带多少数据？

> ID：13362500
> 
> 赞同：-1
> 
> 时间：2012-11-13T14:28:55.437
> 
> 标签：android, size, nfc, payload, ndef

google android 的文档中说：payload 字节数组，包含零到`(2 ** 32 - 1)`字节，不能为空。所以我认为一个 NDEF 记录可以携带 4GB 的数据。

但是当我检查三星 TecTiles 的最大尺寸时，`ndef.getMaxSize()` 尺寸仅为 716。

为什么三星的 TecTiles 不是 4GB？我认为任何支持 NDEF 的 NFC 标签最多可以承载 4GB 数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T17:21:39.510

在大多数情况下，限制 NDEF 消息大小的因素是标签的容量。

例如，在大多数操作系统中，文件大小可能为 2GB。但是，在 128MB 的驱动器上不能有 2GB 的文件，因为驱动器不能容纳 2GB。操作系统限制为 2GB 并不重要——驱动器在物理上无法容纳接近该限制的任何内容。

在这方面，您可以将 NFC 标签视为一个非常非常非常非常小的驱动器。NFC 标签支持的字节数因标签而异，但通常为 1KB 或更少。

# r - 计算并绘制模拟中每一代的自举置信区间

> ID：13362502
> 
> 赞同：3
> 
> 时间：2012-11-13T14:29:01.740
> 
> 标签：r, simulation, confidence-interval

我在 R 中运行一个简单的遗传漂移模拟。

```
# Population size
N<-5000
# Number with focal allele
X1<-(N/2)
# Number of generations
ngens<-(2000)
# Number of replicates
nreps<-10

# Drift function
drift <- function(N, X1, ngens, nreps) {
# Makes a matrix of NA's of nreps columns, and ngen rows
       p <- matrix(NA, nrow=ngens, ncol=nreps)
  # Set base population
       p[1,] <- X1/N
  # Repetitive sampling function, each generation sample 10 times from the generation before (gen-1)  
       for(gen in 2:ngens)
         p[gen,] <- rbinom(n=nreps, size=N, prob=p[gen-1,]) / N
       p
}
# Run function "drift" & output as data frame
p <- data.frame(drift(N, X1, ngens, nreps))
# Plot
matplot(p, type="l", ylim=c(0,1), lty=1, xlab="Generations", ylab="Proportion Focal",col="grey")
# Mean value
p$mean<-apply(p[,c(1:10)],1,mean)
matplot(p$mean, type="l", ylim=c(0,1), lty=1, xlab="Generations", ylab="Proportion Focal",col="black",add=T) 
```

**我想：**

1.  围绕每一代的平均值计算置信区间（**通过自举）**
2.  在我的数据框中添加一对具有上下置信区间估计值的列，然后可以将其绘制在 matplot 上，就像我对平均值所做的那样

谁能建议一种方法来做到这一点？我知道我需要 Boot 包并且大致知道如何使用它，但指导会很好。

问题（对我来说）是得到一个循环，该循环为每一代模拟生成一个 CI 并将其粘贴到“p”数据帧

**编辑：**

我已经按照@bakyaw 的部分建议尝试了这个，并且“for”循环改编自我曾经使用过的旧脚本。

```
myBootFunction<-function(x){
  b <- boot(x, function(u,i) mean(u[i]), R = 999)
  boot.ci(b, type = c("norm"))
}

meanList<-apply(p[c(2:ngens),c(1:nreps)],1,function(x)myBootFunction(x))
for(i in 1:49) {
  low<-meanList[[i]][[4]][[2]]
  high<-meanList[[i]][[4]][[3]]
  CIMatrix<-cbind(high,low)} 
```

注意添加了 c(2:ngens)，没有它就会出现这个错误。

> [1] “t 的所有值都等于 0.5 \n 无法计算置信区间”

然而，这仍然只是将 CIMatrix 创建为一个 1x2 双矩阵，而不是每一代都在其中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:05:45.900

如果您已经解决了问题，这可以作为答案。开机功能：

```
 library(boot)

    myBootFunction<-function(x){
        b <- boot(x, function(u,i) mean(u[i]), R = 999)
        boot.ci(b, type = c("norm", "basic", "perc"))
    } 
```

然后代替代码中的这一行：`p$mean<-apply(p[,c(1:10)],1,mean)`

您可以使用 ：

```
meanList<-apply(p[,c(1:10)],1,function(x)myBootFunction(x)) 
```

获得具有置信区间的列表后，您可以将其转换为数据框，然后对其进行处理。

# asp.net - 如何使用递增变量在标签中显示 .mdb 信息

> ID：13362507
> 
> 赞同：3
> 
> 时间：2012-11-13T14:29:21.920
> 
> 标签：asp.net, sql, vb.net, ms-access

我正在尝试设置一个 asp:label，它每天显示来自 ms-access 数据库的一个值。

我设置了一个每天递增一次的变量“ID”，我尝试使用“ID”变量作为“sID”的行号从.mdb 调用“名称”值除周六和周日外，数据库和名称应每天更改。

当我在浏览器中运行该站点时，没有语法错误。但它什么也没显示。

我不确定我的查询或显示代码是否错误。

我在下面粘贴了我的 .vb 代码。在 .aspx 上我只有

```
 Public Class Mat
    Inherits System.Web.UI.Page

    Public Sub page_load()

        Dim ID As Long
        Dim sConString As String
        Dim sCon As SqlConnection
        Dim scmd As SqlCommand

        sCon = New SqlConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Data\sAuditor.mdb")
        scmd = New SqlCommand()

        ID = 1
        If DatePart("hh", Now()) = 12 And DatePart("mi", Now()) = 0 And DatePart("ss", Now()) = 0 Then

            If DatePart("w", Now()) <> 0 And DatePart("w", Now()) <> 1 Then

                If ID < 3 Then
                    ID = ID + 1
                Else
                    ID = 1
                End If

            End If

        End If

        scmd.CommandText = "SELECT Name FROM EssAudit WHERE sID=ID"
        scmd.Connection = sCon

        Try

            sCon.Open()
            Dim sReader As SqlDataReader
            sReader = scmd.ExecuteReader

            While sReader.Read
                slabel.Text = sReader.Item("Name")
            End While

            sReader.Close()

        Catch ex As Exception
        End Try

        sCon.Close()

    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:50:21.167

您没有传递 ID 的值，而是将字符串“ID”传递给 select 语句。试试这个：

```
 scmd.CommandText = "SELECT [Name] FROM EssAudit WHERE sID=@ID"
    scmd.Parameters.AddWithValue("@ID", ID) 
```

我要补充一点，如果您在 catch 部分执行某些操作，错误消息可能会帮助您找到错误。简单地忽略错误很少是要走的路。

# android - 我的 AsyncTask 类中有其他线程。在执行以下方法之前，我如何等待它及其所有线程完成？

> ID：13362510
> 
> 赞同：5
> 
> 时间：2012-11-13T14:29:36.840
> 
> 标签：android, multithreading

AsyncTask 类启动了许多其他线程，因为我使用的是第三方库。我不确定库打开了多少线程，但我想等待它们全部完成，然后再用它们获取的数据填充我的列表视图。

目前我正在睡 10000 毫秒，但这不切实际，因为我不知道它的列表有多大。

这个问题的正确解决方案是什么？

```
task = new mTask();
        task.execute(appsList);
        new Thread(new Runnable() {
            public void run() {
                populateList();
            }
        }).start();

    }

    private class mTask extends AsyncTask<List<ApplicationInfo>, Void, Void> {
        ProgressDialog progress;

        @Override
        protected void onPreExecute() {
            progress = new ProgressDialog(MainActivity.this);
            progress.setIndeterminate(true);
            progress.show();
            super.onPreExecute();
        }

        @SuppressWarnings("deprecation")
        @Override
        protected Void doInBackground(List<ApplicationInfo>... params) {
            appDataManager = new AppDataManager(MainActivity.this,
                    mySQLiteAdapter, MainActivity.this);
            appDataManager.work(params[0]);
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            mySQLiteAdapter.close();
            progress.dismiss();
            super.onPostExecute(result);
        }
    }

    @SuppressWarnings("deprecation")
    public void populateList() {
        try {
            Thread.sleep(10000)
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        runOnUiThread(new Runnable() {

            public void run() {

                Cursor cursor;
                mySQLiteAdapter.openToRead();
                cursor = mySQLiteAdapter.queueAll();

                ArrayList<String> appsList = new ArrayList<String>();
                if (cursor.moveToFirst()) {
                    do {
                        appsList.add(cursor.getString(1));
                    } while (cursor.moveToNext());
                }
                cursor.moveToFirst();

                ArrayAdapter<String> adp = new ArrayAdapter<String>(
                        MainActivity.this, android.R.layout.simple_list_item_1,
                        appsList);
                listContent.setAdapter(adp);
                cursor.close();
                mySQLiteAdapter.close();

                Log.i("finished", "finished");
         }
         });

    } 
```

**应用数据管理器**

```
public void work(List<ApplicationInfo> appsList) {
    List<ApplicationInfo> appList = appsList;
    mySQLiteAdapter.openToWrite();
    mySQLiteAdapter.deleteAll();
    mySQLiteAdapter.close();
    for (int i = 0; i < 5; i++) {
        String name = appList.get(i).name;
        String pack = appList.get(i).packageName;
        // TODO AsyncTask
        getHtml(pack, name);
    }

}

public void getHtml(final String pack, final String name) {
    String url = MARKET_URL + pack;
            //AndroidQuery library. fetch html
    aq.ajax(url, String.class, 1000, new AjaxCallback<String>() {
        @Override
        public void callback(String url, String htm, AjaxStatus status) {
            Log.i("status", status.getMessage());
            parseHtml(htm, pack, name);

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:16:32.617

首先，我会将调用移至`populateList`您`onPostExecute`的`AsyncTask`. 我还将重写`populateList`以删除睡眠并假设它在 UI 线程上运行（消除`runOnUiThread`调用并将`run`方法的主体直接移动到`populateList`.

现在防止`AsyncTask`完成`doInBackground`，直到`AppDataManager`完成它的工作。首先定义一个完成标志和一个可以同步的锁定对象：

```
private class mTask extends AsyncTask<List<ApplicationInfo>, Void, Void> {
    boolean complete;
    static Object LOCK = new Object();
    . . .
} 
```

然后修改`AppDataManager`该类以在工作完成时提供对另一个对象的回调。定义一个字段`callback`并更新您的 api 和方法：

```
public void work(List<ApplicationInfo> appsList, Runnable callback) {
    this.callback = callback; // define a field named "callback"
    List<ApplicationInfo> appList = appsList;
    mySQLiteAdapter.openToWrite();
    mySQLiteAdapter.deleteAll();
    mySQLiteAdapter.close();
    for (int i = 0; i < 5; i++) {
        String name = appList.get(i).name;
        String pack = appList.get(i).packageName;
        // TODO AsyncTask
        getHtml(pack, name);
    }

}

public void getHtml(final String pack, final String name) {
    String url = MARKET_URL + pack;
            //AndroidQuery library. fetch html
    aq.ajax(url, String.class, 1000, new AjaxCallback<String>() {
        @Override
        public void callback(String url, String htm, AjaxStatus status) {
            Log.i("status", status.getMessage());
            parseHtml(htm, pack, name);
            if (callback != null) {
                callback.run();
            }
        }
    });
} 
```

现在修改您的`doInBackground`方法以等待设置标志：

```
protected Void doInBackground(List<ApplicationInfo>... params) {
    appDataManager = new AppDataManager(MainActivity.this,
            mySQLiteAdapter, MainActivity.this);
    appDataManager.work(params[0], new Runnable() {
        public void run() {
            synchronized (LOCK) {
                complete = true;
                LOCK.notifyAll();
            }
        }
    });
    // wait for appDataManager.work() to finish...
    synchronized (LOCK) {
        while (!complete) {
            LOCK.wait();
        }
    }
    return null;
} 
```

这应该可以完成这项工作。但是，您可能应该详细说明这一点以处理各种错误（例如，为 提供错误通知机制`AppDataManager`）。

**更新**我终于注意到你在`AppDataManager`. 因此，不要立即在 for 的回调方法中运行回调，而是`ajax()`减少一个计数器，并且仅在计数器达到 0 时回调。`work()`在进入调用的循环之前将计数器初始化为 5 `getHtml()`。由于计数器将由单独的线程修改，因此需要同步对其的访问。（或者，您可以将 an[`AtomicInteger`](http://developer.android.com/reference/java/util/concurrent/atomic/AtomicInteger.html)用于计数器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:35:20.640

如果您正在等待线程达到一个共同点，那么[CyclicBarrier似乎是解决方案](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CyclicBarrier.html)

此外，我不会创建一个线程来调用`populatelist()`它本身创建线程`runOnUiThread`，而是查看[publishProgress()](http://developer.android.com/reference/android/os/AsyncTask.html#publishProgress%28Progress)

# c# - 消息框不工作

> ID：13362512
> 
> 赞同：0
> 
> 时间：2012-11-13T14:29:46.783
> 
> 标签：c#, asp.net, .net

我正在使用 VS 2010 开发 Web 应用程序。在“管理员”批准公司后，消息框必须显示“供应商 ID：lblPage2ID 修改为“已批准”（或“未批准”或“待定”的消息") 在“管理员”选择的单选按钮上。怎么做？请参考下面的内联代码并告诉我如何将单选按钮放置在直线上。

```
 protected void rblTest_SelectedIndexChanged(object sender,EventArgs e)
    {
     _DAL.ExecuteSQL("UPDATE Company_Info SET 
          Approval_Status='"+rblTest.SelectedValue+"' WHERE Vendor_ID= '" +lblPage2ID.Text +"'");
          ClientScript.RegisterStartupScript(this.GetType(),"callfunction",
        "alert('Approval Status modified in database');", true);
      //  Page.ClientScript.RegisterClientScriptBlock (typeof(Page),"SCRIPT",
         string.Format("alert(Approval Status modified as '" +rblTest.SelectedValue+"')"), true);
      //  HttpContext.Current.Response.Write("<script>alert (Approval Status modified as 
         '" + rblTest.SelectedValue +"');</script>");
      //  ClientScript.RegisterStartupScript (this.GetType ), "callfunction", 
            "alert('Approval Status modified as '"+rblTest.SelectedValue+"');",true);
    }

    <asp:RadioButtonList ID="rblTest" align = "center" runat="server" AutoPostBack="true"   Width="152px" onselectedindexchanged="rblTest_SelectedIndexChanged" style="margin-left: 0px"> 
            <asp:ListItem  Text="Approved" Value="YES"></asp:ListItem> 
            <asp:ListItem  Text="Not Approved" Value="NO"></asp:ListItem> 
            <asp:ListItem  Text="Pending" Value="PEN"></asp:ListItem> 
     </asp:RadioButtonList> 
```

![单选按钮](../Images/e317f8f623de14bb8ac51c86ee8ede99.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:28:00.477

```
Set the RepeatDirection property of the RadioButtonList control to horizontal.

<asp:RadioButtonList ID="rblTest" align = "center" runat="server" RepeatDirection="Horizontal" AutoPostBack="true"   Width="152px" onselectedindexchanged="rblTest_SelectedIndexChanged" style="margin-left: 0px"> 
            <asp:ListItem  Text="Approved" Value="YES"></asp:ListItem> 
            <asp:ListItem  Text="Not Approved" Value="NO"></asp:ListItem> 
            <asp:ListItem  Text="Pending" Value="PEN"></asp:ListItem> 
</asp:RadioButtonList> 
```

# android - 设备屏幕上的图像太暗

> ID：13362513
> 
> 赞同：1
> 
> 时间：2012-11-13T14:29:47.947
> 
> 标签：android, graphics, png, android-canvas

我最近开始在我的游戏中使用 .png 图像，但在设备上它们太暗了。

我使用此代码来获取我的图像：

```
a=BitmapFactory.decodeResource(getResources(), R.drawable.red_ball);
atom_bmp=Bitmap.createScaledBitmap(a,60,60,false); 
```

然后我在画布上画它们：

```
canvas.drawBitmap(atom_bmp,enemies[x].x-30,enemies[x].y-30, paint); 
```

生成的图像比它们在计算机上显示的要暗得多。这怎么能解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:39:58.493

我猜您的问题与android 设备上的[Gamma（好教程）](http://www.cambridgeincolour.com/tutorials/gamma-correction.htm)设置和您用来制作图像的计算机有关。简而言之，RGB像素的数值`0-255`与屏幕上像素的亮度不是线性相关的。这些值被提升到一个幂`gamma`，其值在不同的系统上有所不同。 `gamma`通常位于范围内`1.8 - 2.2`。您可以在 Photoshop 中更改显示 gamma 以匹配 android 设备，然后适当地修改图像。您还应该确保将图像保存在[sRGB](http://en.wikipedia.org/wiki/Srgb)颜色空间中，而不是 Adob​​e RGB 之类的其他颜色空间中。

# android - 将 TableRow 中的 TextView 格式化为有效地 match_parent 和 wrap_content

> ID：13362518
> 
> 赞同：1
> 
> 时间：2012-11-13T14:30:12.417
> 
> 标签：android, layout, textview, tablelayout, tablerow

我有一个带有多个 TableRows 的 TableLayout。每行包含两个水平布局的 TextView。TextViews 有固定的宽度。每个的背景颜色不同；左边是灰色的，用作标签，右边是白色，包含一个值。但是，两者的内容都是动态的。对于任何给定的行，任何一个的内容都可能大到足以保证换行到新行。

因为背景颜色不同，我需要每个 TextView 匹配其父行，以便颜色正确填充视图。但是，如果我将 TextView 的 layout_height 设置为 match_parent，那么如果内容很大，则 TextView 不会换行。在以下屏幕截图中，标签不仅仅是显示的第一个单词：

![截图一个](../Images/4979dcde72aedc60ac8ffc57306dfeb7.png)

另一方面，如果我将 TextView 的 layout_height 设置为 wrap_content，那么如果兄弟 TextView 的高度更大（因此 TableRow 的高度），那么第一个 TextView 的背景不会填充创建的空间：

![截图二](../Images/c1d3a8298938a2772f298403f58f7ee1.png)

因此，我希望 TableRow 中的两个 TextView 在必要时换行，但也希望每个的背景始终填充 TableRow 中的空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:08:50.000

我找到了解决问题的方法：

1.  我将每个 TableRow 的背景设置为灰色（标签）颜色，并给它底部边框。
2.  我将标签 TextViews 的背景留空，将它们默认为 TableRows 的灰色背景。
3.  我将值 TextViews 的背景设置为白色，覆盖 TableRows 的背景，但仍然可以看到边框。
4.  我将标签 TextViews'设置`layout_width`为`layout_height``wrap_content`
5.  我将值 TextViews' 设置`layout_width`为`wrap_content`，但它们`layout_height`设置为`match_parent`

这适用于除电子邮件之外的每一行，其中值总是比标签占用更多空间。因此，对于该*特定*行，我将`layout_height`TextView 的值更改为`wrap_content`.

# c# - 调用 Web 服务后无法从我的 jquery 移动应用程序中检索服务器时间

> ID：13362519
> 
> 赞同：1
> 
> 时间：2012-11-13T14:30:22.407
> 
> 标签：c#, jquery, sql, web-services, jquery-mobile

我想问一个关于这个问题的一般性问题，因为我不知道在我的代码或应用程序中哪里可以找到我的问题。我有一个 J Query 移动应用程序，它有一个通过在 SQL 中调用 getDate 来检索数据库服务器时间的页面。检索此时间的 sql 执行在 Visual Studio 中开发的 C# Web 服务中传递，该服务将 JSON 字符串返回到前端。要在 C# 中调用 Web 服务，Java 脚本具有对包含 Web 服务的给定 url 的 aj Query $.post 命令。如果我在 google chrome firefox 浏览器中运行我的应用程序，一切都很好。移动应用程序页面检索正确的时间和正确的日期。如果我在测试 I Phone 或 I Pad 上查看相同的内容，我得到的信息是我几天前或几个小时前在我的浏览器上检索到的信息。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:11:15.243

Safari 的缓存可能非常激进。您可以通过为每个调用生成一个唯一的调用来为您的 POST 添加一个时间戳来克服这个问题。

```
 $.post("/MyService/", { timestamp: new Date().getTime() }, ...) 
```

# graphviz - graphviz 圆子图

> ID：13362520
> 
> 赞同：3
> 
> 时间：2012-11-13T14:30:29.837
> 
> 标签：graphviz, dot, subgraph

我有一个带有 7 个子图集群的 graphviz 表示。在每个子图中，大约有 20 个节点相互连接。

每个子图与一个或多个集群有 3 到 10 个链接（例如，集群 1 中的一个节点连接到集群 2 中的另一个节点）。

我想将所有子图放在一个圆形演示文稿中，以便我可以轻松地追踪它们之间的链接。有没有办法做到这一点？或者至少有办法固定每个子图的位置？

希望您能够帮助我。太棒了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-02-04T11:25:25.370

Graphviz 不支持渲染圆形子图集群。但是，您可以使用矩形子图来封装节点。这是一个例子：

```
digraph G {
    layout="fdp";
    node [margin=0, fontcolor=blue, fontsize=18, width=0.4, shape=circle, style=filled]

    subgraph cluster_A {
        label = "Cluster A";
        a1 ["shape"="point", "color"="blue", "style"="filled", fontsize="40"]
        a2 ["shape"="point", "color"="blue", "style"="filled", fontsize="40"]
        a3 ["shape"="point", "color"="blue", "style"="filled", fontsize="40"]        
    }

    subgraph cluster_B {
        label = "Cluster B";
        b1 ["shape"="point", "color"="green", "style"="filled", fontsize="40"]
        b2 ["shape"="point", "color"="green", "style"="filled", fontsize="40"]
        b3 ["shape"="point", "color"="green", "style"="filled", fontsize="40"]   
    }

    subgraph cluster_C {
        label = "Cluster C";
        c1 ["shape"="point", "color"="red", "style"="filled", fontsize="40"]
        c2 ["shape"="point", "color"="red", "style"="filled", fontsize="40"]
        c3 ["shape"="point", "color"="red", "style"="filled", fontsize="40"]
    }

    a1 -> b1
    a2 -> b2
    a3 -> b3
    c1 -> b1
    c2 -> b2
    c3 -> b3
} 
```

[![在此处输入图像描述](../Images/2cdf4787e526f2159aeacada1f1007ed.png)](https://i.stack.imgur.com/hes62m.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-23T19:55:12.500

您可以使用 rank 属性。这是一种可能性。在课程之外，您可以使用自己的代码探索更多可能性。

```
digraph trial {

subgraph _1 {
 rank="same";
 p0 [label="p0"];
 p1 [label="p1"];
 p2 [label="p2"];
 p0-> p1 -> p2 -> p0;
}
subgraph _2 {   
 rank="same";  
 p3 [label="p3"];
 p4 [label="p4"];
 p3 -> p4 -> p3;
}
subgraph _3 {   
 rank="same";  
 p6 [label="p6"];
 p5 [label="p5"];
 p7 [label="p5"];
 p5 -> p6 -> p7 -> p5;
}

p3 -> p1 [color="red"];
p2 -> p5 [color="red"];
p6 -> p4 [color="red"];
} 
```

![在此处输入图像描述](../Images/7cbe223ffe4b7e5642def9d97ea0af58.png)

您可以在此处阅读有关排名的信息：http: [//www.graphviz.org/doc/info/attrs.html](http://www.graphviz.org/doc/info/attrs.html)

# java - 部署应用程序时出现 Weblogic Guava 问题

> ID：13362523
> 
> 赞同：2
> 
> 时间：2012-11-13T14:30:40.767
> 
> 标签：java, deployment, weblogic, guava

我正在尝试将应用程序部署到 weblogic 服务器，但出现以下错误。
我的类路径中有 guava.jar，我尝试了从 10 开始尝试的所有最新版本。有人可以帮我解决这个问题吗？

```
 <Error> <Console> <BEA-240003> <Administration Console encountered the following error: weblogic.application.ModuleException: [HTTP:101216]Servlet: "action" failed to preload on startup in Web application: "...".
java.lang.NoSuchMethodError: com.google.common.util.concurrent.MoreExecutors.sameThreadExecutor()Lcom/google/common/util/concurrent/ListeningExecutorService;
            at com.google.common.cache.LocalCache.<clinit>(LocalCache.java:155)
            at com.google.common.cache.LocalCache$LocalManualCache.<init>(LocalCache.java:4750)
            at com.google.common.cache.LocalCache$LocalLoadingCache.<init>(LocalCache.java:4858)
            at com.google.common.cache.CacheBuilder.build(CacheBuilder.java:739)
            at com.my.app.servers.UserServer.<clinit>(UserServer.java:42)
            at com.my.app.ActionServlet.setAppProperties(DesActionServlet.java:207)
            at com.my.app.ActionServlet.init(DesActionServlet.java:167)
            at javax.servlet.GenericServlet.init(GenericServlet.java:240)
            at weblogic.servlet.internal.StubSecurityHelper$ServletInitAction.run(StubSecurityHelper.java:299)
            at weblogic.servlet.internal.StubSecurityHelper$ServletInitAction.run(StubSecurityHelper.java:250)
            at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
            at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
            at weblogic.servlet.provider.WlsSubjectHandle.run(WlsSubjectHandle.java:57)
            at weblogic.servlet.internal.StubSecurityHelper.initServletInstance(StubSecurityHelper.java:94)
            at weblogic.servlet.internal.StubSecurityHelper.createServlet(StubSecurityHelper.java:82)
            at weblogic.servlet.internal.StubLifecycleHelper.createOneInstance(StubLifecycleHelper.java:74)
            at weblogic.servlet.internal.StubLifecycleHelper.<init>(StubLifecycleHelper.java:60)
            at weblogic.servlet.internal.StubLifecycleHelper.<init>(StubLifecycleHelper.java:34)
            at weblogic.servlet.internal.ServletStubImpl.initStubLifecycleHelper(ServletStubImpl.java:624)
            at weblogic.servlet.internal.ServletStubImpl.prepareServlet(ServletStubImpl.java:565)
            at weblogic.servlet.internal.WebAppServletContext.preloadServlet(WebAppServletContext.java:1874)
            at weblogic.servlet.internal.WebAppServletContext.loadServletsOnStartup(WebAppServletContext.java:1848)
            at weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1738)
            at weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:2740)
            at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1704)
            at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:781)
            at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:213)
            at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:208)
            at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:35)
            at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:70)
            at weblogic.application.internal.flow.ScopedModuleDriver.start(ScopedModuleDriver.java:212)
            at weblogic.application.internal.ExtensibleModuleWrapper.start(ExtensibleModuleWrapper.java:111)
            at weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:124)
            at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:213)
            at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:208)
            at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:35)
            at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:70)
            at weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:24)
            at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:729)
            at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:35)
            at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:258)
            at weblogic.application.internal.SingleModuleDeployment.activate(SingleModuleDeployment.java:48)
            at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:165)
            at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:79)
            at weblogic.deploy.internal.targetserver.operations.AbstractOperation.activate(AbstractOperation.java:582)
            at weblogic.deploy.internal.targetserver.operations.ActivateOperation.activateDeployment(ActivateOperation.java:148)
            at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doCommit(ActivateOperation.java:114)
            at weblogic.deploy.internal.targetserver.operations.AbstractOperation.commit(AbstractOperation.java:335)
            at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentCommit(DeploymentManager.java:844)
            at weblogic.deploy.internal.targetserver.DeploymentManager.activateDeploymentList(DeploymentManager.java:1253)
            at weblogic.deploy.internal.targetserver.DeploymentManager.handleCommit(DeploymentManager.java:440)
            at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.commit(DeploymentServiceDispatcher.java:163)
            at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doCommitCallback(DeploymentReceiverCallbackDeliverer.java:195)
            at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$100(DeploymentReceiverCallbackDeliverer.java:13)
            at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$2.run(DeploymentReceiverCallbackDeliverer.java:68)
            at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:545)
            at weblogic.work.ExecuteThread.execute(ExecuteThread.java:256)
            at weblogic.work.ExecuteThread.run(ExecuteThread.java:221) 
```

```
Caused by: java.lang.NoSuchMethodError: com.google.common.util.concurrent.MoreExecutors.sameThreadExecutor()Lcom/google/common/util/concurrent/ListeningExecutorService; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T16:20:01.903

看起来您正在运行的 Guava 版本与编译时所针对的版本不同。可能您正在运行*多个*版本的番石榴，并且您随机得到错误的版本。如果您的其他依赖项之一错误地捆绑了 Guava，则可能会发生这种情况。

为了弄清楚这个副本`MoreExecutors`来自哪里，我听说您可以通过使用以下代码段来反思地找到它`UserServer`：

```
MoreExecutors.class.getProtectionDomain().getCodeSource().getLocation() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-27T21:39:30.067

这似乎是一个反复出现的问题（[[1]](https://stackoverflow.com/questions/9688207/guava-and-weblogicclassnotfoundexception)，[[2]](https://stackoverflow.com/questions/19625086/guava-15-0-jar-conflict-in-weblogic-12c/28774640)，[[3]](https://stackoverflow.com/questions/13386474/are-guava-11-0-2-jar-conflicting-with-com-google-common-1-0-0-0-0-6-jar)）。我自己也偶然发现了同样的问题。Weblogic首先加载它自己的（过时的）番石榴库版本，与您的应用程序版本相冲突。

解决方案是添加`prefer-application-packages`到您的`weblogic.xml`or `weblogic-application.xml`：

```
<wls:container-descriptor>
    <wls:prefer-application-packages>
            <wls:package-name>com.google.common.*</wls:package-name>
    </wls:prefer-application-packages>
</wls:container-descriptor> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T14:55:03.320

这是一个WAR项目吗？或者它只是一个 EJB jar？

如果是最新的，您有几个选择：

*   将您的 jar 文件包装到 EAR 中并在其中交付 Guava 的 jar
*   将 Guava 的 jar 添加到 AS 的 library 文件夹中
*   将您的 jar 文件与 Guava 的文件合并。例如，如果你是一个 Maven 人，你可以使用[Maven Shade Plugin](http://maven.apache.org/plugins/maven-shade-plugin/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-26T18:15:21.797

我遇到了类似的问题。我可以通过将带有 prefer-application-packages 的 weblogic-application.xml 添加到我的 EAR 来解决这个问题。

```
<?xml version="1.0" encoding="UTF-8"?>
<weblogic-application xmlns="http://xmlns.oracle.com/weblogic/weblogic-application"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"                            xsi:schemaLocation="http://xmlns.oracle.com/weblogic/weblogic-application http://xmlns.oracle.com/weblogic/weblogic-application/1.0/weblogic-application.xsd">
    <prefer-application-packages>
        <package-name>com.google.common.*</package-name>
    </prefer-application-packages>
</weblogic-application> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-05T15:46:49.383

我也遇到了这个问题，不幸的是改变 weblogic.xml 对我不起作用。起作用的是，将 guava-14.0.1.jar 放入 $JAVA_HOME/jre/lib/endorsed （如果该目录不存在，则创建此目录。）

另一个警告：起初我尝试使用更新的 guava-18 - 这导致了另一种兼容性问题（MapMaker.makeComputingMap 上的 IllegalAccessError - 更多细节[在这里](https://stackoverflow.com/questions/23957409/ava-lang-illegalaccesserror-tried-to-access-method-com-google-common-collect-ma)）。Guava 14.0.1 似乎达到了我的最佳选择 - MapMaker 类足够老，可以满足 WebLogic，而 MoreExecutors 类足够新，可以让 Cassandra Java 驱动程序工作（这就是我偶然发现这个问题的原因。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-25T13:24:02.300

我设法使用两个文件解决了这个问题：ear 中的 weblogic-application.xml 和战争中的 weblogic.xml

这是 ear -> src/main/application/META-INF/ 中的 weblogic-application.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<wls:weblogic-application
    xmlns:wls="http://xmlns.oracle.com/weblogic/weblogic-application"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/javaee_5.xsd http://xmlns.oracle.com/weblogic/weblogic-application http://xmlns.oracle.com/weblogic/weblogic-application/1.4/weblogic-application.xsd">
    <wls:prefer-application-packages>
        <wls:package-name>com.google.common.*</wls:package-name>
    </wls:prefer-application-packages>
</wls:weblogic-application> 
```

这是战争中的 weblogic.xml -> src/main/webapp/WEB-INF/

```
<?xml version="1.0" encoding="UTF-8"?>
<wls:weblogic-application
    xmlns:wls="http://xmlns.oracle.com/weblogic/weblogic-application"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/javaee_5.xsd http://xmlns.oracle.com/weblogic/weblogic-application http://xmlns.oracle.com/weblogic/weblogic-application/1.4/weblogic-application.xsd">
    <wls:prefer-application-packages>
        <wls:package-name>com.google.common.*</wls:package-name>
    </wls:prefer-application-packages>
</wls:weblogic-application> 
```

# bash - 在脚本中键入“end”以结束已启动的进程

> ID：13362527
> 
> 赞同：3
> 
> 时间：2012-11-13T14:30:50.897
> 
> 标签：bash

我有一个脚本，我在脚本中启动它，但需要键入“end”才能正确关闭，无论如何我可以从带有 PID 的脚本内部执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:54:57.837

对于这种情况，您甚至可以使用 here-string：

```
$ myscript <<< end 
```

这将使您的脚本从给定的字符串中读取，而不是`stdin`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:32:05.553

听起来你需要一个[heredoc](http://tldp.org/LDP/abs/html/here-docs.html)。

```
$ myscript <<EOF
  end
  EOF 
```

所以上面的内容将所有内容都输入到您的流程的标准输入中（但不包括该行`EOF`）

# c# - 从代码隐藏设置 asp:CustomValidator 文本

> ID：13362530
> 
> 赞同：2
> 
> 时间：2012-11-13T14:31:01.453
> 
> 标签：c#, asp.net, customvalidator, requiredfieldvalidator

我有用户 ID 和密码字段，这两个字段都适用于 RequiredFieldValidator。就在它下面，我放置了一个 CustomValidator，当密码不匹配时，我试图从代码隐藏中进行类似的验证。

```
<asp:RequiredFieldValidator runat="server" ID="PWRequired"   
    ControlToValidate="PasswordTextbox"  
    Display="None"  
    ErrorMessage="<b>Required Field Missing</b><br />A password is required." />
<asp:CustomValidator runat="server" ID="PWMatch"
    ControlToValidate="PasswordTextbox"  
    Display="None"
    ErrorMessage="<b>Password is Invalid</b><br />Please enter a valid password." />
<AjaxControl:ValidatorCalloutExtender 
    runat="Server"
    ID="PWValidationExtender"
    TargetControlID="PWRequired" 
    Width="185px"
    WarningIconImageUrl="/Images/warning.gif" />
<asp:TextBox ID="PasswordTextbox" runat="server" CssClass="passwordEntry" TextMode="Password"></asp:TextBox> 
```

（希望格式正确。我从来没有让“4个空格”的东西起作用。

然后在代码隐藏中，当密码不匹配时，我正在尝试这个：

```
CustomValidator myValidator = (CustomValidator)this.FindControl("PWMatch");
myValidator.Text = "<b>Password is Invalid</b><br />Please enter a valid password."; 
ValidatorCalloutExtender myValExtender = (ValidatorCalloutExtender)this.FindControl("PWValidationExtender");
myValExtender.ID = "PWValidationExtender";
myValExtender.TargetControlID="PWMatch";
myValExtender.WarningIconImageUrl = "/Images/warning.gif";
myValExtender.Width = new Unit(250); 
```

我希望这是我想念的简单而愚蠢的事情。我花了一整天的时间试图弄清楚这一点。

在此先感谢您的帮助。

==================================================== ========================

谢谢自由落体。我已经尝试过了，并得到“不快乐”。所以，我是从一个不同的方向来的。

我已更改为 CompareValidator，如下所示：（再次希望标记有效）

```
<asp:CompareValidator runat="server" ID="PWCompareValidator"
    ControlToValidate="PasswordTextbox"
    Operator="Equal"
    ValueToCompare="<%# GetPassword() %>"
    Text="<b>Password is Invalid</b><br />Please enter a valid password."
    Type="String" /> 
```

它给了我一条消息，但总是评估为“假”，因为没有调用 GetPassword 方法。如果我继续努力，我想我可以让它发挥作用，但如果你看到一个快速的解决方案，我会全力以赴。再次感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:54:16.823

而不是`.Text`使用`.ErrorMessage`

所以换...

```
myValidator.Text = "<b>Password is Invalid</b><br />Please enter a valid password."; 
```

到...

```
myValidator.ErrorMessage = "<b>Password is Invalid</b><br />Please enter a valid password."; 
```

* * *

**更新**（由于有问题的更新）

`CompareValidator`旨在比较实际网站上的两个值...应该`ValueToCompare`是静态值，并且通过将密码放入其中，您打开了一个安全漏洞（因为您可能会将密码发送到浏览器 - 虽然我怀疑它`ValueToCompare="<%# GetPassword() %>"`是否会真正起作用。）

这`CustomValidator`要求您至少提供一个处理程序...肯定是在服务器上提供一个（使用`OnServerValidate`属性），如果需要，在浏览器上提供一个（使用`ClientValidationFunction`属性）。在处理程序中，您必须根据检查结果设置参数的`IsValid`属性。`args`

（我说“绝对是服务器上的一个”，因为客户端脚本很容易绕过，所以你总是希望在服务器上有一些东西来捕捉任何尝试的人。）

目前还不是 100% 清楚你想要做什么，或者你目前已经完成了什么，所以除了我上面的内容之外，很难给你任何直接的建议。

* * *

**最终更新**

当您尝试检查密码时，这是我认为您需要的示例...

```
Password: <asp:TextBox runat="server" id="txtPassword"/>
<asp:RequiredFieldValidator runat="server" id="reqPassword"
   ControlToValidate="txtPassword" ErrorMessage="Provide Password" />
<asp:CustomValidator runat="server" id="cusPassword"
   ControlToValidator="txtPassword" ErrorMessage="Incorrect Password"
   OnServerValidate="cusPassword_ServerValidate"/> 
```

然后在你的代码隐藏中，你需要有处理程序

```
protected void cusPassword_ServerValidate(object sender, ServerValidateEventArgs args)
{
  args.IsValid = (txtPassword.Text == GetPassword());
} 
```

# c - 在 C 中动态地从 3D 数组到 2D 数组

> ID：13362534
> 
> 赞同：1
> 
> 时间：2012-11-13T14:31:18.933
> 
> 标签：c, arrays, multidimensional-array, malloc

如果我有一个像这样定义的动态定义的 3D 数组：

```
float   ***tmparray;
int     ii, jj;

tmparray = calloc(100, sizeof(tmparray));

for(ii = 0; ii < 100; ii++)
   tmparray[ii] = calloc(100, sizeof(tmparray[ii]));

for(ii = 0; ii < 100; ii++){
   for(jj = 0; jj < 100; jj++){
      tmparray[ii][jj] = calloc(2, sizeof(tmparray[ii][jj]));
   }
} 
```

那么我可以做类似的事情吗

```
for(ii = 0; ii < 100; ii++){
   for(jj = 0; jj < 100; jj++){
      free(tmparray[ii][jj]);
   }
} 
```

并继续像普通的二维数组一样使用它？或者这是不允许的？

**编辑：**这不是实现的代码，这只是出于好奇。所以从这个意义上说，它不是“真实”的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:53:03.750

这：

```
tmparray = calloc(100, sizeof(tmparray)); 
```

是错的：

1.  `calloc()`在指针上使用没有意义。不能保证“所有位为零”对指针具有明确定义的含义。
2.  尺寸不对；你是说你想要 100 个*指针*大小的项目，它应该是`sizeof *tmparray`。
3.  请记住，这`sizeof`不是函数，仅当参数是强制转换表达式（如`sizeof (int)`）时才需要括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:52:25.823

calloc 时出错。

```
tmparray = calloc(100, sizeof(*tmparray));

for(ii = 0; ii < 100; ii++)
   tmparray[ii] = calloc(100, sizeof(*tmparray[ii]));

for(ii = 0; ii < 100; ii++){
   for(jj = 0; jj < 100; jj++){
      tmparray[ii][jj] = calloc(2, sizeof(*tmparray[ii][jj]));
   }
} 
```

回到问题根本不，你不能，因为

```
sizeof(*tmparray[ii]) == sizeof(float*) 
```

尽管

```
sizeof(*tmparray[ii][jj]) == sizeof(float) 
```

PS 在 32 位机器上它应该可以工作，但不是一种可移植的方式。

# java - junit中不正确的findbugs“非空字段未初始化”错误

> ID：13362535
> 
> 赞同：1
> 
> 时间：2012-11-13T14:31:31.280
> 
> 标签：java, findbugs

```
import org.junit.Test;
import edu.umd.cs.findbugs.annotations.DefaultAnnotation;
import edu.umd.cs.findbugs.annotations.NonNull;

@DefaultAnnotation(NonNull.class)
public class FooTest {
    private Foo foo;

    @Before
    public void setUp() throws ParseException {
        foo = ...;
    }

    @Test
    public void testScenario1() {
        foo.getId();
        ...
    }
} 
```

这会导致 findbugs 失败：

```
NP: Nonnull field foo is not initialized 
by new FooTest( (NP_NONNULL_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR) 
```

这是为什么？FindBugs 没有看到这是一个 junit 测试吗？（因此在执行每个测试之前调用 setUp()）

一种解决方法是添加此类注释：

```
@SuppressWarnings(
  value="NP_NONNULL_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR", 
  justification="it is initialized in setUp()") 
```

但这不是很好。有更好的主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:19:58.673

> 这是为什么？FindBugs 没有看到这是一个 junit 测试吗？（因此在执行每个测试之前调用 setUp()）

基本上，是的。很明显 FindBugs 对 JUnit 测试用例及其工作方式没有特别的了解。（我有点惊讶你甚至在你的单元测试中运行 FindBugs ......）

> 一种解决方法是添加此类注释...有更好的主意吗？

将字段显式初始化为 更简单`null`。这应该会满足 FindBugs 的要求。

* * *

> 是的，我犹豫是否在测试中添加 NonNull 注释；但是测试本身可能包含错误，为什么不呢？为什么不在单元测试中运行 FindBugs？

因为这样的问题！

单元测试在性质上与普通代码不同。例如，如果`foo`字段被意外遗漏了`null`，那么最坏的情况是单元测试会崩溃，你会发现错误并修复它。它不会直接破坏生产代码，只有当您习惯于忽略失败的单元测试时才会产生任何影响。

> 我无法将 foo 初始化为 null，因为它被定义为 NonNull（由 DefaultAnnotation 定义）

好吧，根据 TimK 的回答，这意味着`foo`在构造函数完成执行后必须为非空。鉴于您已经为整个代码库（包括测试用例）指定了该不变量，您必须坚持使用它，或者添加一个异常。

一种可能是创建一个虚拟`Foo`实例，并使用它来初始化`foo`. 但是添加 SuppressWarnings 更直接...

* * *

坦率地说，你需要更深入地思考你想用 FindBugs 实现什么。在你的单元测试上运行它似乎会产生比它解决的更多的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T05:53:53.717

注释“@DefaultAnnotation(NonNull.class)”意味着 foo 被视为使用 @NonNull 注释。这意味着 foo在其生命周期**内不允许为空。**在您的测试中，在实例化类和调用 setUp 之间为空。所以 FindBugs 正确地报告了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T14:48:29.757

您能否粘贴一个真实的片段，给您相同的警告，而不是您提供的示例？

原因是我昨天遇到了这种确切的 findbugs 情况，但这是因为一个错字：

```
public class FooTest {
  private Foo foo;

  @Before
  public void setUp() throws ParseException {
    Foo foo = ...;
  } 
```

你会注意到我有`Foo foo`。这定义了 foo 的本地方法实例并对其进行初始化，而不是初始化私有类属性。

我知道您在上面的代码片段中没有这样做，但我想知道您项目中的真实代码是否犯了这个错误。这是一个简单的错字检查。

# java - 用于倾斜正态与泊松和指数的逆累积分布的 Java 数学包

> ID：13362536
> 
> 赞同：7
> 
> 时间：2012-11-13T14:31:37.120
> 
> 标签：java, apache-commons, colt, apache-commons-math

我正在寻找一个包，它为非对称（偏斜）正态分布以及泊松和指数分布提供数学函数。

我最初查看了[Colt](http://acs.lbl.gov/software/colt/)包，但它不提供逆累积函数。

所以我改用[Apache Commons Math3](http://commons.apache.org/math/)，它提供了更全面的功能集，包括所有分布的逆累积概率。

但是，现在我又碰壁了，因为我需要将正态分布参数化为非对称形状（即平均值的左侧部分与平均值的右侧部分不同）。您是否知道任何支持上述所有内容的软件包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T15:10:00.057

我们与[JSC](http://www.jsc.nildram.co.uk/)和[SSJ](http://www.iro.umontreal.ca/~simardr/ssj/indexe.html)合作过。两者都有许多分布函数及其各自的反函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:02:10.017

似乎这样的图书馆很难找到。自己实现怎么样？看看[数字食谱](http://www.nr.com/)。这本书的第 2 版是免费提供的。

# windows-xp - 卸载 PCI 设备驱动程序

> ID：13362544
> 
> 赞同：2
> 
> 时间：2012-11-13T14:32:17.823
> 
> 标签：windows-xp, uninstallation, drivers, pci

我想通过 c++ 代码从计算机上卸载 pci 设备驱动程序。我正在寻找相同的操作，例如在设备管理器中右键单击设备，然后单击“卸载”。我找到了一个名为 的函数`DiUninstallDevice`，但它仅在 Windows 7 和更高版本的 Windows 中可用。我使用的是 Windows XP。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-15T21:27:29.650

你应该看看下面的示例[DevCon](http://code.msdn.microsoft.com/windowshardware/DevCon-Sample-4e95d71c)示例代码也存在于支持 XP 的 WDK 中。在 WDK 中也有很多使用 DiFX 的示例

# java - 从 entityManager 获取所有实体

> ID：13362546
> 
> 赞同：1
> 
> 时间：2012-11-13T14:32:19.850
> 
> 标签：java, jpa, jpa-2.0, entitymanager

是否可以在不使用“查询”的情况下从 JPA 中的 EntityManager 获取所有实体？

# symfony - Symfony2 & Twig - 主题文件上传小部件

> ID：13362549
> 
> 赞同：8
> 
> 时间：2012-11-13T14:32:28.930
> 
> 标签：symfony, twig

我有一个实体的 Symfony2 编辑表单，其中一个字段用于用户的个人资料图片。

我正在尝试为 Twig 文件上传小部件设置主题，以便该字段的当前图片集显示在文件输入上方。

到目前为止，我有：

```
{% form_theme edit_form _self %}
{% block field_widget %}
    {% set type = type|default('text') %}

    {% if type == 'file' %}
        <img src="{{ value }}" /> 
    {% endif %}

    {{ block('form_widget_simple') }}
{% endblock %} 
```

一切都很好，除了 value 变量是空白的（我猜这是有道理的）。

我的问题是如何获取文件的路径？有没有办法从字段的表单值中挑选出来？我可以将它作为一个选项传递给该领域吗？

Srz，如果这是一个愚蠢的问题，对 Symfony 和 Twig 来说还是很新的......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T23:16:20.673

自定义文件小部件的更好方法是

```
{% block file_widget %}
    {% spaceless %}
     //Your custom content here
    {% endspaceless %}
{% endblock file_widget %} 
```

例如：

```
{% block file_widget %}
    {% spaceless %}
     <td>{% set type = type|default('file') %}
         <input type="{{ type }}" {{ block('widget_attributes') }} />
     </td>
    {% endspaceless %}
{% endblock file_widget %} 
```

记住“{% spaceless %}”很重要

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-19T16:16:46.747

只需以更明显的方式指向解决方案的新网址：

[http://symfony.com/doc/current/cookbook/form/create_form_type_extension.html](http://symfony.com/doc/current/cookbook/form/create_form_type_extension.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T07:56:57.933

所以看起来我在谷歌上搜索 Symfony 的东西很糟糕。我最终找到了 Symfony 食谱的这一部分：http: [//symfony.com/doc/master/cookbook/form/form_customization.html](http://symfony.com/doc/master/cookbook/form/form_customization.html)

Symfony2 将其称为表单类型扩展，他们实际上使用将图像标签添加到文件小部件作为示例。

# c++ - Qt：信号/插槽设计和性能

> ID：13362551
> 
> 赞同：3
> 
> 时间：2012-11-13T14:32:30.910
> 
> 标签：c++, qt, oop, signals, class-design

我最近开始使用 Qt，我需要对信号/插槽机制进行一些说明。我了解它是一个很好的工具，用于 GUI 和生活在不同线程中的对象之间的通信，但我不太确定是否应该在像下面这样的简单情况下使用它。

我有三个类，我们称它们为 MainWindow、DataManager 和 DataWorker。DataWorker 位于一个单独的线程中，并在新数据准备好收集时发出信号。然后在经过一些处理后在 MainWindow 小部件中可视化。我创建了 DataManager 类，以免用处理代码污染 GUI 类。

现在，我应该如何处理 DataManager 和 MainWindow 之间的通信。

* * *

选项#1 - 有一个指向 MainWindow 作为成员的指针，只需调用它的方法

```
class MainWindow
{
private:
    DataManager* dm;

public:
    MainWindow() : dm(new DataManager(this)) { }
    displayData(const char* processedData);
}

class DataManager : QObject
{
private:
    MainWindow *mw;

private slots;
    eventNewData()
    {
        // get and process the data
        mw = this->QObject.parent();
        mw->displayData(const char* processedData);
        // release data
    }
} 
```

* * *

选项 #2 - 发出新数据以调用 MainWindow 插槽

```
class MainWindow
{
private:
    DataManager* dm;

private slots:
    displayData(const char* processedData);

public:
    MainWindow() : dm(new DataManager(this)) { QObject::connect(dm, SIGNAL(newData(const char*)), this, SLOT(displayData(const char*)); }

};

class DataManager : QObject
{    
signals:
    newData(const char* processedData);

private slots;
    eventNewData()
    {
        // get and process the data
        emit newData(processedData);
        // release data
    }
} 
```

* * *

选项 1 对我来说似乎更直观，但话又说回来，我不太了解 Qt。如果有更多类我想对 newData() 信号做出反应，我可以看到使用信号和插槽的好处。

那么有什么更好的选择，两者之间的性能有什么区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:38:32.333

您不能直接从您的线程调用 GUI 函数。所以选项 #1 将不起作用，除非 DataWorker 和 DataManager::eventNewData() 之间存在信号/插槽连接。从另一个线程调用 GUI 函数的唯一方法是通过信号/插槽连接。

信号/槽通信总是会产生开销，因为它纯粹基于运行时并且对字符串进行操作（槽的名称在编译时生成，然后在运行时进行比较。）它是动态调度。直接函数调用总是更快。

所以答案很简单：如果你不需要信号，就不要使用。在这种特殊情况下，DataManager 和 MainWindow 之间的通信似乎不需要它，因为您只需要调用 MainWindow::displayData()。看起来您不需要动态更改它并调用不同的函数。信号和插槽用于提供线程间通信和类似交换机的连接。如果您都不需要，则无需使用信号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T15:33:34.043

第一个选项确实提供了比使用信号/槽机制更好的性能，但它也有一个缺点，即`MainWindow` 和之间存在紧密耦合`DataManager`。两者都互相认识，所以它们不能真正分开使用。仅此一项就应该是重构代码的理由。

也就是说，作为第三种选择，您可以让接收`MainWindow`信号的插槽成为一个帮助类，它只是将数据转换为.`DataWorker``DataManager``MainWindow`

```
class MainWindow
{
private:
    DataManager* dm;

public:
    MainWindow() : dm(new DataManager()) { }
    displayData(QString processedData);
private slots;
    eventNewData()
    {
        // get the data
        QString processedData = dm->preprocessData(data);
        displayData(processedData);
        // release data
    }
};

class DataManager
{
public:
    QString preprocessData(...);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T14:50:02.633

我不确切知道 QT 是如何工作的，所以我不确定是否会影响性能，但我的直觉说 1\. 应该没有太大的区别 2\. 在 GUI 上下文中可能无论如何都无关紧要。

使用标准 QT 机制的选项的好处是 DataManager 不需要了解有关 GUI 的任何信息。许多人认为这是一个很好的设计，因为它可以让您在不更改内部结构的情况下替换您的 GUI。

# php - PHP 中的 Facebook 连接 API 重定向到 facebook

> ID：13362552
> 
> 赞同：0
> 
> 时间：2012-11-13T14:32:32.813
> 
> 标签：php, facebook, facebook-graph-api

我遇到了 Facebook PHP API 的问题

```
<?php
$fb_ = new Facebook(array(
    'appId'  => 'MY_APPID',
    'secret' => 'MY_SECRET'
)); 
$userId = $fb_->getUser();
$errorMessage = null;

if ($userId) {
    try {
        $user_ = $fb_->api('/me');
        if (isset($user_['error_code'])) {
            $errorMessage = isset($user_['error_msg']) ? self::$user_['error_msg'] : 'An unknown error occurred';
            $errorMessage .= ' (' . $user_['error_code'] . ')';
            $user_ = null;
        }
    } catch (FacebookApiException $e) {
        $errorMessage = $e->getMessage();
        $user_ = null;
    }
}

if (!$user_)  {
    $loginUrl = $fb_->getLoginUrl(array(
        'scope' => 'email,publish_stream,user_birthday,user_location,publish_actions',
        'next' => 'http://www.mywebsite.com'
    ));
    echo '<a href="'.$loginUrl.'">Connect!</a>';
} 
?> 
```

我的问题是：当我点击“连接！” 我被重定向到 facebook 主页。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:41:04.797

我找到了原因。看起来我使用的是旧版本的 Facebook 和已弃用的 getSession。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:59:24.250

对话 url 的结构如下：

```
$loginUrl = "https://www.facebook.com/dialog/oauth?client_id="
                . $appId . "&redirect_uri=" . $redirectUrl . "&state="
                . $_SESSION['state'] . "&scope=" . $scope; 
```

回显您的 $loginUrl 并检查字符串是否是正确的 url 字符串以及结构是否相同。

# mysql - 在 SQL INNER JOIN 中使用额外的 WHERE

> ID：13362554
> 
> 赞同：4
> 
> 时间：2012-11-13T14:32:37.207
> 
> 标签：mysql, sql

```
$sql = "SELECT events.*, leagues.lname as leagueName,leagues.aliasname as AliasName, t1.tname as team1_name, t2.tname as team2_name 
FROM events 
INNER JOIN leagues ON events.leagueid = leagues.id 
INNER JOIN teams AS t1 ON events.teamhid = t1.teamid 
INNER JOIN teams AS t2 ON events.teamaid = t2.teamid 
WHERE sdate='1352835000' "; 
```

*它给出了带有COLUMNS*的 TABLE ：

```
id sdate ... leagueName AliasName team1_name team2_name 
```

如何添加附加条件：

```
WHERE AliasName LIKE 'word' AND (team1_name LIKE 'word2' OR  team2_name LIKE 'word3') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:35:06.803

您不能使用`ALIAS`column on (*这是 in-line with* )`where`子句，因此在您的情况下，您需要使用`tableName.columnName`(*除了将其包装在子查询中*)

```
WHERE leagues.aliasname LIKE 'word' AND 
     (t1.tname LIKE 'word2' OR  t2.tname LIKE 'word3') 
```

不能使用的原因是因为查询的执行顺序如下

*   FROM 子句（*您可以在此处设置 TABLE 别名*）
*   WHERE 子句
*   GROUP BY 子句
*   HAVING 子句
*   SELECT 子句（*此处为 COLUMN 别名*）
*   ORDER BY 子句

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:35:11.190

像这样：

```
SELECT *
FROM
(
    SELECT 
      events.*, 
      leagues.lname as leagueName,
      leagues.aliasname as AliasName, 
      t1.tname as team1_name, 
      t2.tname as team2_name 
    FROM events 
    INNER JOIN leagues ON events.leagueid = leagues.id 
    INNER JOIN teams AS t1 ON events.teamhid = t1.teamid 
    INNER JOIN teams AS t2 ON events.teamaid = t2.teamid 
    WHERE sdate = '1352835000'
)  t
WHERE AliasName LIKE 'word'
  AND (team1_name LIKE 'word2' OR  team2_name LIKE 'word3') 
```

# c++ - 奇怪的 C++ 向量错误？在 c++/4.7.2/vector:70:0 包含的文件中

> ID：13362557
> 
> 赞同：-1
> 
> 时间：2012-11-13T14:32:47.607
> 
> 标签：c++, vector, openmpi

我得到类似的东西：

```
[jiewmeng@JM Assignment 2]$ mpic++ basketball-match.cpp -o basketball-match && mpirun -np 12 basketball-match
In file included from /usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/vector:70:0,
                 from basketball-match.cpp:4:
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/bits/vector.tcc: In instantiation of ‘void std::vector<_Tp, _Alloc>::_M_insert_aux(std::vector<_Tp, _Alloc>::iterator, const _Tp&) [with _Tp = int [2]; _Alloc = std::allocator<int [2]>; std::vector<_Tp, _Alloc>::iterator = __gnu_cxx::__normal_iterator<int (*)[2], std::vector<int [2]> >; typename std::_Vector_base<_Tp, _Alloc>::pointer = int (*)[2]]’:
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/bits/stl_vector.h:893:4:   required from ‘void std::vector<_Tp, _Alloc>::push_back(const value_type&) [with _Tp = int [2]; _Alloc = std::allocator<int [2]>; std::vector<_Tp, _Alloc>::value_type = int [2]]’
basketball-match.cpp:145:49:   required from here
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/bits/vector.tcc:327:19: error: array must be initialized with a brace-enclosed initializer
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/bits/vector.tcc:333:4: error: invalid array assignment
In file included from /usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/x86_64-unknown-linux-gnu/bits/c++allocator.h:34:0,
                 from /usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/bits/allocator.h:48,
                 from /usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/bits/stl_tree.h:64,
                 from /usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/map:60,
                 from /usr/include/openmpi/ompi/mpi/cxx/mpicxx.h:38,
                 from /usr/include/mpi.h:2087,
                 from basketball-match.cpp:1:
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/ext/new_allocator.h: In instantiation of ‘void __gnu_cxx::new_allocator<_Tp>::construct(__gnu_cxx::new_allocator<_Tp>::pointer, const _Tp&) [with _Tp = int [2]; __gnu_cxx::new_allocator<_Tp>::pointer = int (*)[2]]’:
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/ext/alloc_traits.h:202:9:   required from ‘static void __gnu_cxx::__alloc_traits<_Alloc>::construct(_Alloc&, __gnu_cxx::__alloc_traits<_Alloc>::pointer, const _Tp&) [with _Tp = int [2]; _Alloc = std::allocator<int [2]>; __gnu_cxx::__alloc_traits<_Alloc>::pointer = int (*)[2]]’
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/bits/stl_vector.h:885:6:   required from ‘void std::vector<_Tp, _Alloc>::push_back(const value_type&) [with _Tp = int [2]; _Alloc = std::allocator<int [2]>; std::vector<_Tp, _Alloc>::value_type = int [2]]’
basketball-match.cpp:145:49:   required from here
/usr/lib/gcc/x86_64-unknown-linux-gnu/4.7.2/../../../../include/c++/4.7.2/ext/new_allocator.h:120:9: error: parenthesized initializer in array new [-fpermissive] 
```

源代码可以在**[GitHub](https://gist.github.com/4039617#file_basketball_match.cpp)**上找到。可能是什么原因？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T14:34:48.543

你的问题在这里

```
vector<int[2]> playersAtBall; 
```

向量元素的类型必须是可复制构造的。数组不是。所以你不能有一个`vector<int[2]>`. 您可以将数组包装到可复制的结构中，或者`std::pair<int, int>`改用。

如果你有 C++11 编译器，你可以使用`std::array<int,2>`，正如 mfontanini 在评论中指出的那样。如果你没有，但愿意使用 boost，你可以使用`boost::array<int, 2>`

# c# - MVC4 表单验证 - 自定义 html 消息如何？

> ID：13362561
> 
> 赞同：2
> 
> 时间：2012-11-13T14:32:52.283
> 
> 标签：c#, jquery, asp.net-mvc, validation

好吧，伙计们，我正在努力解决这个问题。我在 MVC4 和 jQuery 中使用验证插件找到了香草表单验证（突出显示文本框并显示红色文本）的示例，但是，在尝试执行自定义样式的内容时，它们并没有太大帮助。

例如，在 ajax 表单中，当用户提交表单并且参数错误（在发布后的控制器中）时，我想在页面上显示一个自定义 HTML 元素 - 一个包含文本的 div，这样我就可以为我的网站设置适当的 div 样式。

在我寻找答案的过程中，我发现了 ModelState.AddModelError() - 如果您只想显示文本而不是 div，这很好，因为它只是在我可以设置样式的页面中添加了一个，但是我需要的不仅仅是a 出现。

有没有人有任何好的演示/例子？

我添加了一个简单的示例图像，如果密码不正确，我想在右侧显示消息（html 和 css 的组合）：

![在此处输入图像描述](../Images/924e3c6c2569b6eb891b771559e7788f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:00:21.033

在您的视图中，您可以使用 ValidationMessageFor 并添加一些类。要使用它，请确保您使用 AddModelError 指定了正确的属性名称，或者您在类中结合使用了元数据验证`TryValidateModel()`

**查看代码：**

```
@Html.ValidationMessageFor(model => model.PropertyX, null, new { @class ="error-propertyx" }) 
```

**验证模型代码：**

```
[Required(ErrorMessageResourceName = "RequiredField", ErrorMessageResourceType = typeof(ValidationRes))]
public string PropertyX { get; set; } 
```

或者，如果您想要更多涉及的内容，您可以使用以下方法

[http://buildstarted.com/2010/09/14/creating-your-own-modelmetadataprovider-to-handle-custom-attributes/](http://buildstarted.com/2010/09/14/creating-your-own-modelmetadataprovider-to-handle-custom-attributes/)

创建单独的扩展方法也是一种选择，请注意，这不是最优化的代码，但它会做你想做的:)

```
public static MvcHtmlString CustomValidatioMessageFor<TModel, TProperty>(this HtmlHelper obj, Expression<Func<TModel,TProperty>> expression){

    string html = (string)obj.ValidationMessageFor(expression);
    html = "<div>" + html + "</div>";
    return new MvcHtmlString(html);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-19T10:55:43.217

```
[AttributeUsage(AttributeTargets.Field | AttributeTargets.Property, AllowMultiple = false, Inherited = true)]
    public sealed class CCompareAttribute : ValidationAttribute, IClientValidatable
    {
        private const string _defaultErrorMessage = "Confirm password should match with password field.";
        private readonly int _minCharacters = Membership.Provider.MinRequiredPasswordLength;
        private string name;

        public CCompareAttribute(string compare)
            : base(_defaultErrorMessage)
        {
            name = compare;
        }

        public override string FormatErrorMessage(string name)
        {
            return String.Format(CultureInfo.CurrentCulture, ErrorMessageString);
        }

        public override bool IsValid(object value)
        {
            string valueAsString = value as string;
            return (valueAsString != null);
        }

        public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
        {
            return new[]{
            new ModelClientValidationEqualToRule(FormatErrorMessage(metadata.GetDisplayName()),name)
        };
        }
    }

    [AttributeUsage(AttributeTargets.All, Inherited = false, AllowMultiple = false)]
    public class TypeErrorMessageAttribute : Attribute
    {
        public string ErrorMessage { get; set; }
        public string ErrorMessageResourceName { get; set; }
        public Type ErrorMessageResourceType { get; set; }

        public TypeErrorMessageAttribute()
        {
        }

        public string GetErrorMessage()
        {
            PropertyInfo prop = ErrorMessageResourceType.GetProperty(ErrorMessageResourceName);
            return prop.GetValue(null, null).ToString();
        }
    } 
```

# mysql - 设置为导致连接从不锁定？

> ID：13362565
> 
> 赞同：2
> 
> 时间：2012-11-13T14:32:57.493
> 
> 标签：mysql, database, jdbc

是否有设置（连接字符串或其他）使通过特定连接发出的所有查询从不锁定表？

我正在考虑为我的应用程序设置一个调试只读模式，该模式将连接到生产环境以进行调试/数据分析。我不确定这是一个好主意，如果我这样做，我想尽可能地保护自己。

（如果您质疑我是否应该这样做，请在评论中这样做 - 问题是关于这种设置的存在，而不是我为什么应该或不应该使用它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:48:41.557

`SET SESSION TRANSACTION ISOLATION LEVEL READ UNCOMMITED`可能会成功。查看[手册中的](http://dev.mysql.com/doc/refman/5.0/en/set-transaction.html)隔离级别文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:44:36.490

根据[http://forums.developer.mindtouch.com/showthread.php?1044-giving-a-mysql-user-read-only-privileges](http://forums.developer.mindtouch.com/showthread.php?1044-giving-a-mysql-user-read-only-privileges)（未经测试），只需授予您的调试用户选择权限，这应该可以解决您的问题问题。

# objective-c - 在 iOS 5 下 AVPlayerITem 播放缓冲区空并不总是改变

> ID：13362566
> 
> 赞同：1
> 
> 时间：2012-11-13T14:33:00.520
> 
> 标签：objective-c, ios, avfoundation, avplayer

我在 iOS 5 下（在模拟器上）的playbackBufferEmpty 属性有问题。

我正在观察该属性，以便在播放器处于缓冲状态时向用户指示。问题是我确实看到属性从 0 更改为 1，但它似乎从未从 1 更改回 0。我知道播放缓冲区不再为空，因为播放器再次开始播放并且继续没有问题。

在 iOS 6 下，一切正常。

有人对此有任何想法吗？

如果有更好的策略来显示“缓冲”消息，我很想找到它。

谢谢

-杰森

# javascript - 是否可以使用 javascript 加载 truetype 字体

> ID：13362569
> 
> 赞同：3
> 
> 时间：2012-11-13T14:33:11.267
> 
> 标签：javascript, fonts, truetype

我的服务器中有一个包含多种字体的文件夹（myserver.com/fonts）。我有一个 JavaScript 应用程序，我想在其中使用这些字体。但我不知道如何加载字体并使用它们。有谁知道如何加载 truetype 字体？我知道我可以使用 Cufon 字体来做到这一点，但我宁愿使用 truetype。

PS。我是 JavaScript 新手，任何示例都将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T14:40:23.267

使用 CSS 字体。

```
@font-face { font-family: Delicious; src: url('myserver.com/fonts/Delicious-Roman.ttf'); } 
@font-face { font-family: Delicious; font-weight: bold; src: url('myserver.com/fonts/Delicious-Bold.otf'); } 
```

然后使用 font-family 调用它：

```
h3 { font-family: Delicious, sans-serif; } 
```

您可以使用任何许可的 TrueType (.ttf) 或 OpenType (.otf) 字体。

# eclipse - STS 无法创建java虚拟机

> ID：13362576
> 
> 赞同：0
> 
> 时间：2012-11-13T14:33:26.050
> 
> 标签：eclipse, jvm

在我的 STS 安装中，我尝试将 Xmx1024 升级到 Xmx4096。我的电脑电脑安装了 8GB 内存。但它一直给我一条错误消息 - “无法创建 java 虚拟机”并以代码 1 退出。可能是什么问题，我应该怎么做才能解决它？

![在此处输入图像描述](../Images/cbb9c88600c1c68c961bcc17cd90f2ca.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:50:02.853

就是这样：您正在运行 32 位 JVM。我认为在 32 位 JVM中不能有超过 3GiB（或者可能是 2GiB，我*在那里读到）。*

您可以尝试运行 64 位 JVM 吗？

* * *

正如他们在[本文](http://javahowto.blogspot.com.ar/2006/06/6-common-errors-in-setting-java-heap.html "Java 操作方法：设置 Java 堆大小的 6 个常见错误")中所说，您似乎缺少该单元。

你不想写`Xmx4096m`吗？

# objective-c - 标识符 UIStoryboardPlaceholder 缺少代理

> ID：13362579
> 
> 赞同：13
> 
> 时间：2012-11-13T14:33:56.827
> 
> 标签：objective-c, ios, storyboard, ios-simulator, ios5.1

嗨，我似乎在开发故事板应用程序时偶然发现了奇怪的事情。

我的应用程序在启动屏幕后立即停止，在控制台中我收到错误消息：

```
Missing proxy for identifier UIStoryboardPlaceholder 
```

现在，如果我尝试让应用程序继续运行，我会在控制台中收到新消息，我认为这与第一条错误消息有问题有关

```
*** Terminating app due to uncaught exception 'NSUnknownKeyException', reason:
 '[<IntroViewController 0x6e35f40> setValue:forUndefinedKey:]: 
this class is not key value coding-compliant for the key sceneViewController. 
```

奇怪的是，我只有在使用 iOs 5.1 Simulator 时才会收到此错误。它在 iOs 6 模拟器以及同时具有 iOs 6 和 iOs 5.1 的设备上运行良好

我试图找到答案，但谷歌说它找不到 UIStoryboardPlaceholder 这个词的任何结果，更不用说整个错误消息了。我确定，我的 xcode 项目中的任何地方都没有“UIStoryboardPlaceholder”这个词（甚至在 nib 文件中也没有），也没有提到“sceneViewController”。知道可能出了什么问题吗？

**编辑：**我试图重置模拟器和清理项目，但无济于事

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-05-19T11:52:06.237

我们遇到了同样的问题：故事板文件中的视图控制器，其接口在单独的 XIB 文件中定义。（使用 Xcode 6.3.1、iOS 8.3 和 Swift 1.2。）

我们使用的是 Swift，所以我们在类声明中添加了 @objc() 声明：

```
@objc(TestViewController) class TestViewController: UIViewController 
```

我们可以使用另一个视图控制器很好地实例化视图控制器，`self.storyboard?.instantiateViewControllerWithIdentifier( "TestViewController" )`但是当呈现视图控制器（使用`self.presentViewController( viewController, animated: true, completion: nil )`）时，应用程序因相同的“缺少代理”和“键值编码不符合关键场景视图控制器”错误而崩溃。

**我们在经过多次尝试和错误的调试后发现**的解决方案是简单地***确保故事板文件中视图控制器的故事板 ID**与**类名不同*。**

 **当我们将 Storyboard ID 从“TestViewController”重命名为“testViewController”（唯一的区别是小写首字母）时，一切正常……</p>

奇怪的？你打赌，但现在一切似乎都在工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T20:09:37.083

我有同样的问题。尝试清理项目并恢复模拟器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-18T18:06:15.860

我在从 .xib 文件转换为情节提要的应用程序中遇到了同样的错误。我的应用程序包含一个 UITabBarController，点击某些选项卡会触发错误。

就我而言，问题在于我已将视图控制器复制到情节提要中，该情节提要使用“NIB 名称”属性从外部 .xib 文件加载视图控制器的视图。故事板视图控制器不支持从 .xib 文件加载视图，因此我的故事板包含一个没有视图的视图控制器。

我打开外部 .xib 文件，复制视图，将其粘贴到故事板中相应的视图控制器中，并确保粘贴的视图是故事板场景中视图控制器的下级（缩进）。然后我将视图重新连接到视图控制器中的插座。

当我重新运行应用程序时，错误消失了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T02:19:00.063

把我加到列表中去。在类上“重构 - 重命名”后出现此错误。我正在重命名的类是一个自定义 ViewController，它有自己的 .xib。我使用 Storyboard 启动一个包含“容器视图”的 viewController，它在启动时嵌入了我的自定义 ViewController。

到目前为止，唯一的出路是不使用我重构的 .xib （从容器视图中断开它）。

我的半解决方案：
我已经从之前的工作快照中恢复了我的应用程序，并从头开始创建了一个新的自定义 ViewController 和 .xib，而不是重构。将它连接到情节提要，我再次收到错误消息。清理构建并从模拟器中删除应用程序并重新运行，然后它神奇地运行而没有错误。 **出于这个原因，我相信 Xcode 中有一个带有 Refactor-Rename 的错误，它会在幕后破坏一些情节提要文件。** 一旦我确认新的 .xib 没有错误地附加到情节提要，我将类代码复制/粘贴到新的自定义 viewController 类中，并按照您的预期完成将类对象重新连接到 .xib 的过程。运行它，一切仍然有效。

仅供参考 - 这是我在尝试从错误中恢复时采取的一些失败步骤（在放弃和恢复快照之前）。
1.清洁构建。
2、在iOS模拟器中删除App。
3\. 删除自定义 ViewController .xib 中的所有视图。
4\. 将自定义 ViewController 命名为其他名称。
5\. 在 Storyboard 中，向 ViewController 添加一个空白视图，表示我的自定义 Viewcontroller 类。 **这有效并允许我的应用程序运行**，但是我的自定义类既不能加载它自己的视图来代替这个默认的空白视图，也不能在使默认的空白视图透明时看到它自己的视图。调试显示我的自定义类 .xib 视图在分配给 self.view 时为零。

我目前正在避免 Xcode 对具有 .xib 的文件进行重构重命名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-27T13:48:02.933

我有同样的错误，终于解决了。我的问题是我有：

```
[[storyboard instantiateViewControllerWithIdentifier:@"TripDetail"] methodThatDoesNotExist:@"param"] 
```**

# wdk - Windows驱动：散聚win32

> ID：13362580
> 
> 赞同：0
> 
> 时间：2012-11-13T14:33:58.480
> 
> 标签：wdk, scatter

是否可以通过 DeviceIOControl 功能进行分散收集？编写一个分散聚集函数来读写。

知道 ReadFile Scatter 和 WriteFilescatter 是否有效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:12:51.187

为什么它不起作用？就操作系统认为它有效。底层硬件/驱动程序必须能够处理 S/G 块并将它们统一为一个单元（或拆分为多个单元以进行读取操作）——但这不是操作系统范围内的东西，而是特定设备及其软件。

# asp.net - 从文件夹中检索 ASP.NET 图像

> ID：13362582
> 
> 赞同：0
> 
> 时间：2012-11-13T14:34:03.577
> 
> 标签：asp.net, image, imageurl

我正在尝试从文件夹中检索 ASP.NET 页面中的图像。这些图像是 JPEG 格式并用 ID 标记，例如 1、2、3 等。我以编程方式从 Web 应用程序中检索这些 ID，并将信息保存在标签中。

在我尝试使用的 ASP.NET 源页面中，

```
Image ID="Image1" runat="server" ImageUrl="<% "Figures/" & Me.lblid.Text & ".jpg"%>" 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:40:14.613

源代码不能以这种方式在页面的 Web 端附加到其他控件。为了实现这一点，您需要在后面的代码中执行此操作，在另一部分完成后的某个时间点。我假设您正在使用某种数据绑定来完成此操作。一种简单的方法是使用 Page_PreRender 事件来分配任何特定的图像：

```
Protected Sub Page_PreRender(ByVal sender as Object, ByVal e as EventArgs)

    Me.Image1.ImageUrl = "~/Figures/" & lblid.Text & ".jpg"

End Sub 
```

*注意：根据@Amiram Korach 的建议，在 url 中添加 ~ 用于动态解析 url*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:38:20.063

您需要在表达式的开头添加一个“=”，如果“Figures”在根文件夹中，则使用“~”。

```
<asp:Image ID="Image1" runat="server" 
     ImageUrl="<%= "~/Figures/" & Me.lblid.Text & ".jpg" %>" /> 
```

# symfony - symfony 2 在实体模式描述类型之间切换（学说）

> ID：13362583
> 
> 赞同：3
> 
> 时间：2012-11-13T14:34:04.923
> 
> 标签：symfony, doctrine-orm

我使用 SyliusSandbox 包开发商店。Sylius 使用 xml 文件来存储实体的 ORM 模式。

我已将其 xml 定义复​​制到我的 Bundle 并在那里使用它。

但对于我自己的实体，我想使用注释。所以，基本上我需要在一个包中混合两种类型的定义。如果我尝试保留一个使用注释的实体，我会收到一个错误，即找不到该实体的 xml 文件：

> 找不到类“\ShopBundle\Entity\ProductLocalized”的名为“ShopBundle\Resources\config\doctrine/ProductLocalized.orm.xml”的映射文件。

我的实体如下所示：

```
<?php

namespace Pixeljets\ShopBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Pixeljets\ShopBundle\Entity\ProductLocalized
 *
 * @ORM\Table(name="product_localized")
 * @ORM\Entity
 */
class ProductLocalized
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\ManyToOne(targetEntity="Product", inversedBy="localized")
     * @ORM\JoinColumn(name="product_id", referencedColumnName="id")
     */
    protected $product;

    /**
     * @var integer $product_id
     *
     * @ORM\Column(name="product_id", type="integer")
     */
    private $product_id;

    /**
     * @var string $title
     *
     * @ORM\Column(name="title", type="string", length=255)
     */
    private $title;

    /**
     * @var string $url
     *
     * @ORM\Column(name="url", type="string", length=255)
     */
    private $url;

    /**
     * @var string $keywords
     *
     * @ORM\Column(name="keywords", type="string", length=255, nullable=true)
     */
    private $keywords;

    /**
     * @var string $description
     *
     * @ORM\Column(name="description", type="string", length=255, nullable=true)
     */
    private $description;

    /**
     * @var string $body
     *
     * @ORM\Column(name="body", type="text", nullable=true)
     */
    private $body;

    /**
     * @var boolean $published
     *
     * @ORM\Column(name="published", type="boolean")
     */
    private $published;

    /**
     * @var string $lang
     *
     * @ORM\Column(name="lang", type="string", length=2)
     */
    private $lang;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set product_id
     *
     * @param integer $productId
     * @return ProductLocalized
     */
    public function setProductId($productId)
    {
        $this->product_id = $productId;

        return $this;
    }

    /**
     * Get product_id
     *
     * @return integer 
     */
    public function getProductId()
    {
        return $this->product_id;
    }

    /**
     * Set title
     *
     * @param string $title
     * @return ProductLocalized
     */
    public function setTitle($title)
    {
        $this->title = $title;

        return $this;
    }

    /**
     * Get title
     *
     * @return string 
     */
    public function getTitle()
    {
        return $this->title;
    }

    /**
     * Set url
     *
     * @param string $url
     * @return ProductLocalized
     */
    public function setUrl($url)
    {
        $this->url = $url;

        return $this;
    }

    /**
     * Get url
     *
     * @return string 
     */
    public function getUrl()
    {
        return $this->url;
    }

    /**
     * Set keywords
     *
     * @param string $keywords
     * @return ProductLocalized
     */
    public function setKeywords($keywords)
    {
        $this->keywords = $keywords;

        return $this;
    }

    /**
     * Get keywords
     *
     * @return string 
     */
    public function getKeywords()
    {
        return $this->keywords;
    }

    /**
     * Set description
     *
     * @param string $description
     * @return ProductLocalized
     */
    public function setDescription($description)
    {
        $this->description = $description;

        return $this;
    }

    /**
     * Get description
     *
     * @return string 
     */
    public function getDescription()
    {
        return $this->description;
    }

    /**
     * Set body
     *
     * @param string $body
     * @return ProductLocalized
     */
    public function setBody($body)
    {
        $this->body = $body;

        return $this;
    }

    /**
     * Get body
     *
     * @return string 
     */
    public function getBody()
    {
        return $this->body;
    }

    /**
     * Set published
     *
     * @param boolean $published
     * @return ProductLocalized
     */
    public function setPublished($published)
    {
        $this->published = $published;

        return $this;
    }

    /**
     * Get published
     *
     * @return boolean 
     */
    public function getPublished()
    {
        return $this->published;
    }

    /**
     * Set lang
     *
     * @param string $lang
     * @return ProductLocalized
     */
    public function setLang($lang)
    {
        $this->lang = $lang;

        return $this;
    }

    /**
     * Get lang
     *
     * @return string 
     */
    public function getLang()
    {
        return $this->lang;
    }

    /**
     * Set product
     *
     * @param Pixeljets\ShopBundle\Entity\Product $product
     * @return ProductLocalized
     */
    public function setProduct(\Pixeljets\ShopBundle\Entity\Product $product = null)
    {
        $this->product = $product;

        return $this;
    }

    /**
     * Get product
     *
     * @return Pixeljets\ShopBundle\Entity\Product 
     */
    public function getProduct()
    {
        return $this->product;
    }
}
?> 
```

我如何“告诉” symfony 对模式使用注释方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:32:16.647

您不能在包中混合元数据格式：

来自：[http ://symfony.com/doc/current/book/doctrine.html](http://symfony.com/doc/current/book/doctrine.html)

```
A bundle can accept only one metadata definition format. For example, it's not 
possible to mix YAML metadata definitions with annotated PHP entity class definitions. 
```

您将需要使用两个捆绑包或坚持使用一种格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T14:50:22.783

您应该考虑使用[DoctrineExtensions](https://github.com/l3pp4rd/DoctrineExtensions)中的可翻译行为来使您的产品支持 i18n。应该比为此创建另一个实体容易得多。

# mysql - 如何将大型mysql转储导入hadoop？

> ID：13362596
> 
> 赞同：4
> 
> 时间：2012-11-13T14:34:48.053
> 
> 标签：mysql, hadoop, sqoop

我需要将维基百科转储（mysql 表，解压文件大约需要 50gb）导入 Hadoop（hbase）。现在首先我将转储加载到 mysql 中，然后将数据从 mysql 传输到 hadoop。但是将数据加载到 mysql 需要大量时间 - 大约 4-7 天。是否可以将mysql转储直接加载到hadoop（通过一些转储文件解析器或类似的东西）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:48:24.367

据我记得——MySQL Dumps 几乎完全是一组插入语句。你可以在你的映射器中解析它们并按原样处理......如果你只有几个表，java中的硬代码解析应该是微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:08:10.780

使用[sqoop](http://sqoop.apache.org)。使用 map reduce 作业将 mysql 数据导入 HDFS 的工具。

它很方便。

# mysql - 数据库中查询搜索的算法是什么？

> ID：13362598
> 
> 赞同：10
> 
> 时间：2012-11-13T14:34:53.753
> 
> 标签：mysql, algorithm, search, optimization, data-structures

大家好，我目前正在研究搜索算法优化。

截至目前，我正在研究数据库。

在具有 SQL 支持的数据库中。

我可以为特定表编写查询。

1.  从表 1 中选择数字，其中名称 =“测试”；
2.  从表 1 中选择 *，其中名称 =“测试”；

1 从 Table1 中搜索名称为 Test 的数字，2 在所有列中搜索名称 Test。

我了解函数的概念，但是我有兴趣了解搜索的方法是什么？

它只是简单的线性搜索，从第一个索引到第 n 个索引，只要条件为真，它就会抓取，因此具有 O(n) 速度，还是它有一个独特的算法来加速它的过程？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T14:54:37.130

如果没有索引，那么是的，执行线性搜索。

但是，当您将列指定为键时，数据库通常使用[B 树索引。](http://en.wikipedia.org/wiki/B-tree)这些是专门调整的特殊数据结构格式（高 B 树分支因子）以在磁盘硬件上表现良好，其中最重要的耗时因素是寻道操作（磁头必须移动到文件的差异部分）。

您可以将索引视为列中值的排序/结构化副本。可以快速确定要搜索的值是否在索引中。如果它找到它，那么它还会找到一个指针，该指针指向主数据文件中相应行的正确位置（因此它可以去读取该行中的其他列）。有时多列索引包含查询请求的所有数据，然后它不需要跳回主文件，它可以读取它找到的内容然后完成。

还有其他类型的索引，但我想你明白了 - 复制数据并以快速搜索的方式排列它。

在大型数据库上，索引的区别在于等待几分之一秒，而可能需要几天才能完成复杂的查询。

btw- B树不是一个简单易懂的数据结构，遍历算法也很复杂。此外，遍历甚至比您会发现的大多数代码都更丑陋，因为在数据库中，它们不断地从磁盘加载/卸载数据块并在内存中对其进行管理，这大大丑化了代码。但是，如果您熟悉[二叉搜索树](http://en.wikipedia.org/wiki/Binary_search_tree)，那么我认为您已经很好地理解了这个概念。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T16:06:43.010

好吧，这取决于数据的存储方式以及您要做什么。

*   如前所述，维护条目的常见结构是[B+ 树](http://en.wikipedia.org/wiki/B+_tree)。该树针对磁盘进行了很好的优化，因为实际数据仅存储在叶子中 - 而键存储在内部节点中。它通常允许非常少量的磁盘访问，因为`k`树的顶层可以存储在 RAM 中，并且只有少数底层将存储在磁盘上，并且每个都需要读取磁盘。
*   另一种选择是[哈希表](http://en.wikipedia.org/wiki/Hash_table)。您在内存 (RAM) 中维护一个“指针”数组 - 这些指针指示一个磁盘地址，该地址包含一个存储桶，该存储桶包含具有相应哈希值的所有条目。使用这种方法，你只需要`O(1)`磁盘访问（这通常是处理数据库时的瓶颈），所以它应该是比较快的。
    但是，哈希表不允许有效的范围查询（可以在 B+ 树中有效地完成）。

以上所有方法的缺点是它需要一个键——即如果哈希表或B+树是根据关系的“id”字段构建的，然后你根据“键”搜索——它就变得没用了。
如果您想保证快速搜索关系的所有字段 - 您将需要多个结构，每个结构都根据不同的键 - 这不是非常有效的内存。

现在，根据具体使用情况，有很多优化需要考虑。例如，如果预计搜索次数非常少（比如总操作数的 loglogN 较小），那么维护 B+ 树的效率总体上要低，然后仅将元素存储为列表，并且在极少数情况下进行搜索 - 只需执行线性搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T14:44:58.683

非常好的问题，但它可以有很多答案，具体取决于表的结构以及标准化的方式......

通常要在查询中执行 seacrh，`SELECT`DBMS 对表进行排序（它使用合并排序，因为该算法适用于磁盘中的 I/O，而不是快速排序）然后根据索引（如果表有）它只匹配数字，但如果结构更复杂，DBMS 可以在树中执行搜索，但这太深了，让我在我的笔记中再次研究。

我建议激活查询执行计划，[这里有一个](http://msdn.microsoft.com/en-us/library/ms178071%28v=sql.105%29.aspx)如何在 Sql Server 2008 中执行此操作的示例。然后使用 WHERE 子句执行您的 SELECT 语句，您将能够开始了解 DBMS 内部发生了什么。

# c# - 从 shell 元数据属性中获取变形视频的显示尺寸

> ID：13362605
> 
> 赞同：3
> 
> 时间：2012-11-13T14:35:26.537
> 
> 标签：c#, video, windows-shell, windows-api-code-pack, m4v

我`Microsoft.WindowsAPICodePack.Shell.ShellFile`用来从文件路径获取视频大小（宽度和高度）。

```
public Size GetVideoSize(string videoFullPath)
{
    if (File.Exists(videoFullPath))
    {
        ShellFile shellFile = ShellFile.FromFilePath(videoFullPath);

        int videoWidth = (int)shellFile.Properties.System.Video.FrameWidth.Value;
        int videoHeight = (int)shellFile.Properties.System.Video.FrameHeight.Value;

        return new Size(videoWidth, videoHeight);
    }
    return Size.Empty;
} 
```

问题是此方法无法检索 m4v 文件的正确大小。你有什么建议吗？我可以使用什么来获得实际的宽度/高度？

示例：我有一个 m4v 视频，其实际尺寸为 856x480

*   如果我在 Windows 资源管理器中查看文件的属性，大小为 720x480（错误）
*   如果我在视频播放器中打开视频，视频将以正确的大小呈现，即使视频细节仍显示 720x480 的大小
*   如果我在 WPF 中的 MediaElement 控件中加载视频，我会通过 获得正确的大小，`mediaElement.NaturalVideoWidth, mediaElement.NaturalVideoHeight`但问题是我需要在没有任何 WPF 引用的类库中获取大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T12:39:08.800

这里的关键提示是 856/480 = 1.78，大约等于 16/9 = 1.77，这是宽屏视频的常见纵横比。像素分辨率为 1:1.33 或 1:1.5（例如 640x480 或 720x480）的视频并不罕见，但它意味着以 1:1.77（例如856x480)。这称为[变形宽银幕](http://en.wikipedia.org/wiki/Anamorphic_widescreen)。所以 720x480 可能是视频的正确*分辨率*，但不是正确的*显示尺寸*。

在窗口中显示变形宽银幕时，视频播放器通常只是保持相同的高度并拉伸宽度以获得正确的显示纵横比。如果是全屏，则宽度和高度都可能会被拉伸，但不会拉伸相同的因子，以便显示宽高比正确，并且视频完全适合屏幕分辨率。

要获得显示尺寸（这似乎是您想要的），我们需要纵横比。幸运的是，用于获取帧宽度和高度的相同[元数据属性 API](http://msdn.microsoft.com/en-us/library/windows/desktop/ff384862%28v=vs.85%29.aspx)也具有纵横比属性，即[System.Video.Horizo​​ntalAspectRatio](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760084%28v=vs.85%29.aspx)和[System.Video.VerticalAspectRatio](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760128%28v=vs.85%29.aspx)。虽然没有记录，但这些似乎是指像素纵横比，而不是图片显示纵横比。你想要的变形视频是这样的：

```
int videoWidth = (int)shellFile.Properties.System.Video.FrameWidth.Value;
int videoHeight = (int)shellFile.Properties.System.Video.FrameHeight.Value;
int horizontalAspect = (int)shellFile.Properties.System.Video.HorizontalAspectRatio.Value;
int verticalAspect = (int)shellFile.Properties.System.Video.VerticalAspectRatio.Value;
int displayWidth = videoWidth * horizontalAspect / verticalAspect;
int displayHeight = videoHeight; 
```

在您的情况下，我期望的是 Horizo​​ntalAspect = 53 和 verticalAspect = 45 （或产生类似比率的其他值）。

显示分辨率可能会四舍五入到 16 或 8 像素的精确倍数，因此您可能还需要执行以下操作：

```
int roundingMultiple = 8;
int displayWidth = videoWidth * horizontalAspect / verticalAspect;
displayWidth = ((displayWidth - 1) / roundingMultiple + 1) * roundingMultiple; 
```

这不是特定于 mkv 文件的；任何容器格式的任何变形视频文件都必须进行相同的处理。

编辑：更改了上面的代码以反映 Horizo​​ntalAspect / verticalAspect 显然是*像素*纵横比的事实。

# combobox - 组合框跳转到键入的字符

> ID：13362607
> 
> 赞同：9
> 
> 时间：2012-11-13T14:35:31.510
> 
> 标签：combobox, javafx-2

我偶然发现（在我眼中）一个愚蠢的问题。但是我没有找到解决方案（可能是因为没有使用正确的搜索关键字，或者在很容易的时候让它变得太难了..）场景：

我有一个包含 500 个客户的组合框。我必须选择一个客户。

在 Swing 中，当列表关闭并且您开始输入时，它会自动跳转到输入的字母。例如：

项目：

*   亚当
*   短剑
*   弗雷迪
*   ...
*   罗杰
*   史蒂文
*   Z人

当组合框列表打开时，我只需输入“R”，然后在摇摆中，它会跳转到以“R”开头的第一个客户。在 javafx 2 中，它似乎没有这种行为......是否有一些我必须启用的选项，或者我应该做一些事情，比如使用**可编辑**的组合框，并制作一个`filter()`在每次按键时触发的方法？

**编辑**：基于 Bhupendra 的答案的解决方案：

```
public class FilterComboBox<T> extends ComboBox<T> {
private final FilterComboBox<T> fcbo = this;

//private FilterComboBox fcbo = this;
private ObservableList<T> items;
private ObservableList<T> filter;
private String s;
private Object selection;

private class KeyHandler implements EventHandler< KeyEvent> {

    private SingleSelectionModel<T> sm;

    public KeyHandler() {
        sm = getSelectionModel();
        s = "";
    }

    @Override
    public void handle(KeyEvent event) {
        filter.clear();
        // handle non alphanumeric keys like backspace, delete etc
        if (event.getCode() == KeyCode.BACK_SPACE && s.length() > 0) {
            s = s.substring(0, s.length() - 1);
        } else {
            s += event.getText();
        }

        if (s.length() == 0) {
            fcbo.setItems(items);
            sm.selectFirst();
            return;
        }
        //System.out.println(s);
        if (event.getCode().isLetterKey()) {
            for (T item : items) {
                if (item.toString().toUpperCase().startsWith(s.toUpperCase())) {

                    filter.add(item);
                    //System.out.println(item);

                    fcbo.setItems(filter);

                    //sm.clearSelection();
                    //sm.select(item);

                }
            }
            sm.select(0);
        }

    }
}

public FilterComboBox(final ObservableList<T> items) {
    super(items);
    this.items = items;
    this.filter = FXCollections.observableArrayList();

    setOnKeyReleased(new KeyHandler());

    this.focusedProperty().addListener(new ChangeListener() {
        @Override
        public void changed(ObservableValue observable, Object oldValue, Object newValue) {
            if (newValue == false) {
                s = "";
                fcbo.setItems(items);
                fcbo.getSelectionModel().select((T)selection);
            }

        }
    });

    this.getSelectionModel().selectedItemProperty().addListener(new ChangeListener() {
        @Override
        public void changed(ObservableValue observable, Object oldValue, Object newValue) {
            if (newValue != null) {
                selection = (Object) newValue;
            }

        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T02:47:07.127

过滤器组合框的最简单形式如下面的代码所示。但它需要更多的工作来完善它。此外，如果列表很大，如您的情况，则可能存在性能问题，因为我们在每次按键时都循环遍历整个集合。

```
public class FilterComboBox extends ComboBox< String > {
    private ObservableList< String >    items;

    private class KeyHandler implements EventHandler< KeyEvent > {

        private SingleSelectionModel< String >  sm;
        private String                          s;

        public KeyHandler() {
            sm = getSelectionModel();
            s = "";
        }

        @Override
        public void handle( KeyEvent event ) {
            // handle non alphanumeric keys like backspace, delete etc
            if( event.getCode() == KeyCode.BACK_SPACE && s.length()>0)
                s = s.substring( 0, s.length() - 1 );
            else s += event.getText();

            if( s.length() == 0 ) {
                sm.selectFirst();
                return;
            }
            System.out.println( s );
            for( String item: items ) {
                if( item.startsWith( s ) ) sm.select( item );
            }
        }

    }

    public FilterComboBox( ObservableList< String > items ) {
        super( items );
        this.items = items;

        setOnKeyReleased( new KeyHandler() );
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-12T21:17:00.240

这样的代码还不够吗？

```
 comboBox.setOnKeyReleased(new EventHandler<KeyEvent>() {
        @Override
        public void handle(KeyEvent event) {
            String s = jumpTo(event.getText(), comboBox.getValue(), comboBox.getItems());
            if (s != null) {
                comboBox.setValue(s);
            }
        }
    }); 
```

...

```
static String jumpTo(String keyPressed, String currentlySelected, List<String> items) {
    String key = keyPressed.toUpperCase();
    if (key.matches("^[A-Z]$")) {
        // Only act on letters so that navigating with cursor keys does not
        // try to jump somewhere.
        boolean letterFound = false;
        boolean foundCurrent = currentlySelected == null;
        for (String s : items) {
            if (s.toUpperCase().startsWith(key)) {
                letterFound = true;
                if (foundCurrent) {
                    return s;
                }
                foundCurrent = s.equals(currentlySelected);
            }
        }
        if (letterFound) {
            return jumpTo(keyPressed, null, items);
        }
    }
    return null;
} 
```

当您按下一个字母时，这将跳转到第一个项目。如果您再次按下该字母，它将跳转到以该字母开头的下一个项目，如果没有更多以该字母开头的项目，则返回第一个项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-11T15:06:55.463

我无法真正得到 Perneel 的解决方案来满足我的需要。Bhupendra's 很好，但有一个细节：它选择了最后一个匹配的项目。如果您有从 0 到 20 的数字（作为字符串），如果键入“1”，它将返回 19 而不是 1...

下面的代码添加了解决此问题所需的行。

```
import javafx.collections.ObservableList;
import javafx.event.EventHandler;
import javafx.scene.control.ComboBox;
import javafx.scene.control.SingleSelectionModel;
import javafx.scene.input.KeyCode;
import javafx.scene.input.KeyEvent;

// TODO: Auto-generated Javadoc
/**
 * The Class FilterComboBox.
 */
public class FilterComboBox extends ComboBox< String > 
{

    /** The items. */
    private ObservableList< String >    items;

    /**
     * The Class KeyHandler.
     */
    private class KeyHandler implements EventHandler< KeyEvent > 
    {

        /** The sm. */
        private SingleSelectionModel< String >  sm;

        /** The s. */
        private String                          s;

        /**
         * Instantiates a new key handler.
         */
        public KeyHandler() 
        {
            sm = getSelectionModel();
            s = "";
        }

        /* (non-Javadoc)
         * @see javafx.event.EventHandler#handle(javafx.event.Event)
         */
        @Override
        public void handle( KeyEvent event ) 
        {
            // handle non alphanumeric keys like backspace, delete etc
            if( event.getCode() == KeyCode.BACK_SPACE && s.length()>0)
            {
                s = s.substring( 0, s.length() - 1 );
            }
            else if(event.getCode() != KeyCode.TAB )
            {
                s += event.getText();
            }

            if( s.length() == 0 ) 
            {
                sm.selectFirst();
                return;
            }
            System.out.println( s );
            for( String item: items ) 
            {
                if( item.startsWith( s ) ) 
                {
                    sm.select( item );
                    return;
                }
            }
        }

    }

    /**
     * Instantiates a new filter combo box.
     *
     * @param items the items
     */
    public FilterComboBox( ObservableList< String > items ) 
    {
        super( items );
        this.items = items;

        setOnKeyReleased( new KeyHandler() );
    }
} 
```

这个组件是一个 ComboBox，它只接受 String 作为输入并且可以通过输入一些字符来过滤。所有功劳归于 Bhupendra，我只发布此代码是为了防止其他人不得不过多考虑这个常见问题。最后编辑：添加了一个测试以防止 TAB 被视为字符（允许在表单中导航而不破坏组件）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-11-15T11:34:12.287

这是另一种选择。[以网站https://tech.chitgoks.com](https://tech.chitgoks.com/2013/07/19/how-to-go-to-item-in-combobox-on-keypress-in-java-fx-2/)
中 的示例为基础。

它具有优雅的解决方案，如果需要，也可以在前面的示例中使用。
**打字时，列表自动滚动**，非常方便。

```
 import com.sun.javafx.scene.control.skin.ComboBoxListViewSkin;
    import javafx.collections.FXCollections;
    import javafx.collections.ObservableList;
    import javafx.scene.control.ComboBox;
    import javafx.scene.control.ListView;
    import javafx.scene.input.KeyCode;
    import javafx.scene.input.KeyEvent;

    import java.time.Duration;
    import java.time.Instant;
    import java.util.Collection;

    class SearchComboBox<T> extends ComboBox<T> {

        private static final int IDLE_INTERVAL_MILLIS = 1000;

        private Instant instant = Instant.now();
        private StringBuilder sb = new StringBuilder();

        public SearchComboBox(Collection<T> choices) {
            this(FXCollections.observableArrayList(choices));
        }

        public SearchComboBox(final ObservableList<T> items) {
            this();
            setItems(items);
            getSelectionModel().selectFirst();
        }

        public SearchComboBox() {
            super();

            this.addEventFilter(KeyEvent.KEY_RELEASED, event -> {
                if (event.getCode() == KeyCode.ESCAPE && sb.length() > 0) {
                    resetSearch();
                }
            });

            this.setOnKeyReleased(event -> {

                        if (Duration.between(instant, Instant.now()).toMillis() > IDLE_INTERVAL_MILLIS) {
                            resetSearch();
                        }

                        instant = Instant.now();

                        if (event.getCode() == KeyCode.DOWN || event.getCode() == KeyCode.UP || event.getCode() == KeyCode.TAB) {
                            return;
                        } else if (event.getCode() == KeyCode.BACK_SPACE && sb.length() > 0) {
                            sb.deleteCharAt(sb.length() - 1);
                        } else {
                            sb.append(event.getText().toLowerCase());
                        }

                        if (sb.length() == 0) {
                            return;
                        }

                        boolean found = false;
                        for (int i = 0; i < getItems().size(); i++) {
                            if (event.getCode() != KeyCode.BACK_SPACE && getItems().get(i).toString().toLowerCase().startsWith(sb.toString())) {
                                ListView listView = getListView();
                                listView.getSelectionModel().clearAndSelect(i);
                                scroll();
                                found = true;
                                break;
                            }
                        }

                        if (!found && sb.length() > 0)
                            sb.deleteCharAt(sb.length() - 1);
                    }
            );

            // add a focus listener such that if not in focus, reset the search process
            this.focusedProperty().addListener((observable, oldValue, newValue) -> {
                if (!newValue) {
                    resetSearch();
                } else {
                    scroll();
                }
            });
        }

        private void resetSearch() {
            sb.setLength(0);
            instant = Instant.now();
        }

        private void scroll() {
            ListView listView = getListView();
            int selectedIndex = listView.getSelectionModel().getSelectedIndex();
            listView.scrollTo(selectedIndex == 0 ? selectedIndex : selectedIndex - 1);
        }

        private ListView getListView() {
            return ((ComboBoxListViewSkin) this.getSkin()).getListView();
        }
    } 
```

我以两种方式改进了这个例子。

1.  所有代码都封装在一个类中——不需要从外部连接任何东西。
2.  如果用户有一段时间没有显示活动，则搜索字符串将被重置。另一种解决方案是如何重置搜索：按 Backspace 键，或使 ComboBox 失去焦点。

# objective-c - nib loader 只保留 nib 中的第一个顶级 UIView？

> ID：13362608
> 
> 赞同：0
> 
> 时间：2012-11-13T14:35:35.743
> 
> 标签：objective-c, xcode, automatic-ref-counting, nib

我在启用 ARC 的项目中有一个笔尖，其中包含两个`UIViews`在顶层。一个是主视图，它连接到`view`nib 所有者的属性，像往常一样，作为弱引用。

第二个顶层`UIView`连接到文件所有者的另一个属性。如果我将该属性也定义为`weak`，则系统似乎会立即取消分配它——因此 nib 加载器似乎只保留`UIView`了 nib 文件中的第一个和 main 。这是正确的吗？如果是，是否有任何文件可以支持？我一直在寻找确认，但在 Apple 文档或 Stack Overflow 上的任何地方都找不到它。

我正在运行 Xcode 4.5.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:17:44.100

我不认为 nib 加载机制对任何对象有什么特别之处。它遵循定义的任何连接的属性规范。例如， 的`view`属性`UIViewController`说：

```
@property(nonatomic, retain) UIView *view 
```

有一个[nib 文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html)说，*“Outlets 通常应该是弱的，除了从 File's Owner 到 nib 文件中的顶级对象（或者，在 iOS 中，故事板场景）应该是强的。”* 我相信这对于 OS X 和 iOS 现在是一致的。

正如我所读到的，这意味着您负责创建一个强大的属性来引用尚未由框架处理的任何顶级对象。

# math - 如何根据距离找到点的坐标？

> ID：13362612
> 
> 赞同：0
> 
> 时间：2012-11-13T14:35:42.173
> 
> 标签：math

我有 2 个点，它们都是 3d 点，即 A(x,y,z) 和 B(x,y,z)。我知道点 a 的坐标和它们之间的距离。如何找到B点的坐标？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:38:44.283

If you only know the absolute distance between the two points, you cannot find the coordinates of point B. If you think about it, knowing one point and a distance defines a sphere.

However, if you know the difference between the coordinates in the x, y, and z axes, its as simple as adding the difference to point A to obtain point B.

# facebook - 将相册创建为页面，但无法使用 Graph API 上传照片

> ID：13362613
> 
> 赞同：2
> 
> 时间：2012-11-13T14:35:52.357
> 
> 标签：facebook, graph, photos

我进行了深入搜索，但我只能找到类似的主题，但没有人引导我找到可行的解决方案。

正如我的主题所说，我使用以下代码将相册创建为页面。

```
$page_token = $facebook->api('/'.$page['id'],'GET',array('fields'=> 'access_token'));
$facebook->setAccessToken($page_token['access_token']);

$facebook->setFileUploadSupport(true);

$args = array(
'message'=> 'test album',
'name'=> 'Test Album'
);
$ch = curl_init();
$url = 'https://graph.facebook.com/'.$page['id'].'/albums?access_token='.$page_token['access_token'];//APP_ID.'|'.APP_SECRET;
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $args);
$data = curl_exec($ch);

$newAlbum =json_decode($data,true);
$newAlbumID = $newAlbum['id']; 
```

好的，到目前为止，我收到了一个专辑 ID。但是当我查看 JSON 对象或查找时，`graph.facebook.com/ALBUM_ID`即使页面上没有专辑，我也什么也没有收到。

我有`manage_pages read_stream photo_upload publish_stream create_event rsvp_event`权限。在页面上创建一个事件工作得很好。我做错了什么？

当我尝试上传一些图片并创建相册时，它仅适用于我自己的个人资料，但我的页面需要它。我不明白为什么我会收到一个在查找时不起作用的 ID。

我希望你们能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T12:56:49.693

大家好，我想我已经解决了我的问题。起初，重要的是要知道我已经测试了几个星期以最终得到解决方案。

正如我所说，我能够在页面上创建事件和问题。今天，我将在我的个人资料上创建专辑与在页面上创建专辑进行了比较，我知道这对两者都适用。

但是当我尝试将照片上传到相册或页面墙上时，它失败了，出现了这个可爱的异常：“发生了意外错误。请稍后重试您的请求”

今天我试图删除一些权限。正如你在下面看到的

旧 -->`define('PERMISSIONS', 'offline_access read_stream photo_upload user_photos friends_photos user_photo_video_tags publish_stream read_friendlists ads_management create_event user_online_presence friends_online_presence rsvp_event manage_pages');`

新 -->`define('PERMISSIONS', 'photo_upload user_photos friends_photos publish_stream create_event manage_pages');`

现在它可以工作了！

# html - 在一行中对齐 HTML 输入字段

> ID：13362614
> 
> 赞同：1
> 
> 时间：2012-11-13T14:35:56.337
> 
> 标签：html

我想对齐删除行和取消按钮，以便它们在屏幕上显示在一行中。

```
<table>
<td colspan="7">
<form action="<?php echo appurl('administration); ?>" onsubmit="return delRowsExtra()"   method="post" name="del">
    <input type="hidden" id="selectedDel" name="selectedDel"/>
    <input type="hidden" id ="degr" name="degr" value="<?php echo $t['degree']; ?>"/>
    <input type="hidden" id="bat" name="bat"/>
    <input type="hidden" id="sec" name="sec"/>
    <input type="hidden" id="sem" name="sem"/>
    <input type="hidden" id="accTy" name="accTy"/>
    <input type="submit" value="Delete Row" style="margin-left:125px"/>
</form>
</td>
<td>
<form action="<?php echo appurl('administration'); ?>" onsubmit="return validate()" method="post" name="mainPage">
    <br/><input type="submit" value="Cancel" style="margin-left:150px" />
</form>
</td>
</table> 
```

JSfiddle：http: [//jsfiddle.net/JMudE/](http://jsfiddle.net/JMudE/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:40:08.727

向表单添加类并使用 CSS 对齐。您最好的方法是尝试`.class{ display: inline; }`使表单成为内联而不是块（额外的换行符）元素。

[http://w3schools.com/css/css_positioning.asp](http://w3schools.com/css/css_positioning.asp)
[http://w3schools.com/css/css_display_visibility.asp](http://w3schools.com/css/css_display_visibility.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:42:29.313

如果我说得对，您只想对齐删除和取消按钮。

[http://jsfiddle.net/JMudE/1/](http://jsfiddle.net/JMudE/1/)

为什么不只是`valign="bottom"`？您可以将其添加到 CSS 类、`<table>`标签或`<td>`标签中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T14:51:02.210

有一个

```
<br /> 
```

在右键之前。它会换行。删除它以对齐您的按钮。

另外，你说你想在没有 CSS 的情况下对齐，但你已经在使用内联 CSS——例如 margin-left。

# php - mustache.php 安全性

> ID：13362615
> 
> 赞同：1
> 
> 时间：2012-11-13T14:36:01.247
> 
> 标签：php, mustache

我正在构建一个应用程序，用户能够在 textarea 中输入 Mustache 标记并借助[mustache.php](https://github.com/bobthecow/mustache.php)和基于类的上下文生成输出。

示例代码：

```
<?php
$m = new Mustache_Engine;
$chris = new Chris;
echo $m->render($CUSTOM_USER_INPUT_TEXT, $chris); 
```

示例类上下文：

```
<?php
class Chris {
    public $name  = "Chris";
    public $value = 10000;
    private $test = '';

    public function taxed_value() {
        return $this->value - ($this->value * 0.4);
    }

    public $in_ca = true;
} 
```

`Chris`我的问题：除了公共方法和属性之外，用户是否有机会调用其他一些函数？（来自小胡子标记）

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T16:07:49.060

是的，如果您仔细控制渲染上下文，渲染用户输入是安全的。用户只能访问渲染上下文中对象的公共属性和方法。

请注意您授予用户访问权限的内容。他们将能够在他们可以遍历的任何对象上调用任何方法。例如，如果 Chris 有一辆汽车，暴露在`Chris::$car`，他们可以使用`{{ chris.car }}`。这意味着如果您使用 ActiveRecord 样式的域模型，则永远不应将模型对象传递到呈现上下文中。否则，用户可以调用`{{ chris.car.delete }}`.

# sql - PL SQL 更新在一个窗口中工作，但是当我尝试取回记录时它没有改变

> ID：13362620
> 
> 赞同：1
> 
> 时间：2012-11-13T14:36:19.407
> 
> 标签：sql, plsql, plsqldeveloper

所以在 PLSQL Developer 中：

```
 UPDATE someTable t
   SET animals      = 'hamsters'
   WHERE t.someIdentifier = 'XXXX';
SELECT * 
FROM someTable t  
WHERE t.someIdentifer = 'XXXX'; 
```

似乎可以工作，因为最后一行中的选择查询确实确认动物已设置为等于值“仓鼠”。

但是，当我自己运行选择查询时，

```
select * from someTable t  WHERE t.someIdentifier = 'XXXX'; 
```

动物似乎没有更新。任何有关此问题可能来自何处的一般指示都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:39:31.193

也许你忘记了`commit`更新？尝试在更新下方添加提交：

```
UPDATE someTable t
SET animals      = 'hamsters'
WHERE t.someIdentifier = 'XXXX';
commit; 
```

还有一个**不推荐**的选项，但很高兴知道：

```
SET autocommit ON 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T14:38:40.723

You need to commit the update transaction first

```
UPDATE someTable t
SET animals      = 'hamsters'
WHERE t.someIdentifier = 'XXXX';

commit;
SELECT * 
FROM someTable t  
WHERE t.someIdentifer = 'XXXX'; 
```

# visual-studio-2010 - 我可以同时使用 VS2010 和 VS2012 运行 TFS 自动构建吗？

> ID：13362628
> 
> 赞同：1
> 
> 时间：2012-11-13T14:36:43.743
> 
> 标签：visual-studio-2010, tfs, visual-studio-2012, tfsbuild

我们目前使用 TFS 2010，并为我们的各种软件版本提供了大量构建定义。我们希望将 VS2012 用于我们的下一个版本（仍然使用 TFS 2010），因此是否可以在构建控制器上同时拥有两个版本的 VS，并且构建过程是否知道要使用哪个版本的 VS，或者我们是否需要一个用于 VS2010 的构建控制器一个用于VS2012？另外我有自定义构建模板会出现任何问题吗？那么当我们升级到 TFS 2012 时会发生什么？我们能否同时使用 VS2010 和 VS2012 运行自动构建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T19:37:53.313

一般来说 - 是的。实际上 Visual Studio 并没有构建任何东西。它是处理构建任务的底层**MSBuild引擎。**

此外，只要您的项目不包含对 Visual Studio 引用路径的直接引用（例如`C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\ReferenceAssemblies`），您就可以在没有 Visual Studio 的情况下设置构建机器。如果有这样的引用，您可以将它们复制到源代码管理中的 3rd party\lib 目录，并让项目将该目录作为文件引用引用。

其他注意事项：

*   但是 Visual Studio 几乎不会是你最大的障碍。它是多目标 .NET，需要一些额外的咖啡因 :)

*   只要您满足其自定义引用，构建模板就可以工作（GAC 可以用于此问题）

*   构建控制器一次可以注册到一个服务器

*   为每个目标框架\VS 版本使用构建服务器

# javascript - 将用户 ID 从 ASP.Net 安全地传递到 Javascript

> ID：13362629
> 
> 赞同：3
> 
> 时间：2012-11-13T14:36:44.807
> 
> 标签：javascript, asp.net, forms, authentication, knockout.js

在我目前正在开发的应用程序中，我们使用 ASP.Net 表单身份验证来授予用户进一步访问该站点的权限。该站点面向移动用户，因此我们试图尽可能地脱离服务器，并利用 KnockoutJS 进行 Web 服务调用并加载数据，以便用户可以查看它。

现在 web 服务（使用 GET 方法的 REST 服务）需要用户名才能加载特定于该用户的数据。我在服务器端 (ASP.net) 上有这些信息，我可以轻松访问`User.Identity.Name`或直接访问表单身份验证 cookie 并提取信息。

我的问题是我需要从服务器获取用户名到客户端，以便可以进行服务调用。我已经考虑过安全地执行此操作，但到目前为止还一片空白。目前，我将用户名作为 url 参数传递并使用 JavaScript 将其解析出来，并检查`Page_Load`验证 url 中的用户名与登录用户匹配的方法。

我需要一种方法来安全地将用户名从 ASP.Net 传递到客户端 JavaScript，该用户已使用表单对用户进行了身份验证，以便我可以进行 REST Web 服务调用。

编辑：所以在谷歌搜索并与我的团队负责人会面后，我*认为*我们将使用类似于此示例的 OAuth 实现：

[http://www.c-sharpcorner.com/UploadFile/surya_bg2000/secure-wcf-restful-service-using-oauth/](http://www.c-sharpcorner.com/UploadFile/surya_bg2000/secure-wcf-restful-service-using-oauth/)

同样对于寻找相同答案的其他任何事情，我发现这个问题对理解 OAuth 非常有帮助：

[如果 Nonce 只能使用一次，那么 OAuth 中的时间戳有什么意义？](https://stackoverflow.com/questions/6865690/whats-the-point-of-a-timestamp-in-oauth-if-a-nonce-can-only-be-used-one-time)

假设一切都正确实施，是否会更安全（完全安全，安全，还是更不安全？）而不是通过 ASP 标签传递生成的签名，如下所述？

编辑2：经过更多的审查和更多的搜索，我们最终决定了一个框架和方法来完成这项工作。事实证明 OAuth 不一定是这里的答案，这个问题：

[但说真的.... ASP.NET WebAPI 实现示例，包括 OAuth](https://stackoverflow.com/questions/12632348/but-seriously-example-of-asp-net-webapi-implementation-including-oauth)

在弄清楚如何进行这项工作方面也有很大帮助。我们最终要做的是生成签名并放入 javascript 并像这样进行调用。签名将是时间敏感的，并且每次用户加载页面时都会重新生成，非常像 OAuth，但我们没有实现完整的规范。

**TL:DR**最终解决方案是生成哈希签名并通过 ASP 服务器标记 <% aspvar_here %> 将其放在页面上，并使用它来验证服务调用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:43:11.857

最简单的方法是在您的页面中呈现此 javascript：

```
<script type="text/javascript">
   window.UserID = '<%=HttpUtility.JavaScriptStringEncode(this.User.Identity.Name)%>';
</script> 
```

现在你可以在你的 JS 中引用它。

但是，更重要的是，如果这个用户 id 不只是用作默认参数，而是用于验证用户，这是一个安全漏洞。通常，REST 服务也应该能够查看`User.Identity.Name`而不是接收它作为参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:43:47.777

通常，用户名是由客户端提供的。然后在服务器端对其进行验证（使用任何必要的身份验证，例如密码）。

如果它已在服务器端验证（在您的情况下，这必须来自 WCF Web 服务，因为 ASMX 不能很好地处理 REST），那么您可以确定它是正确的 - 加上您已经在客户端。

编辑：正如 Knaģis 指出的那样，您可以使用 ASPX 标签获取它，假设该页面是 ASPX 页面而不是 HTML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T14:48:48.923

If you just want to have the username in the client side, the other answers explain how to do this.
But as you stated, this **IS** a security risk. Someone can modify the data on the client and impersonate another user.

The correct way to do this:

1.  After a user successfully logs in, a ***[Guid](http://msdn.microsoft.com/en-us/library/system.guid.newguid.aspx)*** is issued which uniquely identifies this user.
2.  The Guid is the token which is saved on the client and passed to the server **not the username**.
3.  All webservices receive the Guid not the username.
4.  Server has a dictionary which converts the Guid to the original username.

Another option can be to [encrypt](https://stackoverflow.com/a/2791259/1379664) the username and pass the *encrypted* value to the webservice. The webservice will need to decrypt the value in order to get the username .

# c# - 没有新对象的子节点的 XML 序列化

> ID：13362631
> 
> 赞同：3
> 
> 时间：2012-11-13T14:36:51.417
> 
> 标签：c#, .net, xml-serialization

我正在使用带有矩形的 xml 序列化，但这会产生一些讨厌的 XML ...

我的课是这样的：

```
 [Serializable]
    public class myObject
    {
       public Rectangle Region { get; set; }

       //Some other properties and methods...
    } 
```

当我将它序列化为 XML 时，这给了我这个：

```
 <myObject>
      <Region>
        <Location>
          <X>141</X>
          <Y>93</Y>
        </Location>
        <Size>
          <Width>137</Width>
          <Height>15</Height>
        </Size>
        <X>141</X>
        <Y>93</Y>
        <Width>137</Width>
        <Height>15</Height>
      </Region>
      ...
    </myObject> 
```

呸！

我希望我可以抑制`Size`和`Location`上的属性`Rectangle`，或者使用支持变量并`[XmlIgnore]`最终得到如下结果：

```
 [Serializable]
    public class myObject
    {
       [XmlElement("????")]
       public int RegionX;

       [XmlElement("????")]
       public int RegionY;

       [XmlElement("????")]
       public int RegionHeight;

       [XmlElement("????")]
       public int RegionWidth;

       [XmlIgnore]
       public Rectangle Region {get { return new Rectangle(RegionX, RegionY, RegionWidth, RegionHeight);}

       //Some other properties and methods...
    } 
```

希望能给我类似的东西：

```
 <myObject>
      <Region>
        <X>141</X>
        <Y>93</Y>
        <Width>137</Width>
        <Height>15</Height>
      </Region>
      ...
    </myObject> 
```

代码不太好，但是 XML 将由人们编辑，所以最好能得到一些在那里工作的东西......

任何想法可能会出现在“????”中？或另一种方法？

我宁愿不必实现我自己的版本`Rectangle`...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:51:10.800

感谢您的评论，我结束了一种 DTO 路线-我实现了自己的 Struct- `XmlRectangle`，持有我需要装饰的四个 int 值`[Serializable]`。我添加了隐式转换运算符，因此我可以将其用作`Rectangle`：

```
[Serializable]
public struct XmlRectangle
{
    #endregion Public Properties

    public int X {get; set; }
    public int Y {get; set; }
    public int Height { get; set; }
    public int Width { get; set; }

    #endregion Public Properties

    #region Implicit Conversion Operators

    public static implicit operator Rectangle(XmlRectangle xmlRectangle)
    {
        return new Rectangle(xmlRectangle.X, xmlRectangle.Y, xmlRectangle.Width, xmlRectangle.Height);
    }

    public static implicit operator XmlRectangle(Rectangle rectangle)
    {
        return result = new XmlRectangle(){ X = rectangle.X, Y = Rectangle.Y, Height = Rectangle.Height, width  = Rectangle.Width };
    }

    #endregion Implicit Conversion Operators
} 
```

然后将其作为数据保存的类具有`Rectangle`将其作为`XmlRectangle`序列化器公开的属性，如下所示：

```
[XmlElement("Region",typeof(XmlRectangle))]
public Rectangle Region { get; set; } 
```

# oop - 2 种不同操作的好方法名称

> ID：13362632
> 
> 赞同：1
> 
> 时间：2012-11-13T14:36:51.933
> 
> 标签：oop, design-patterns, naming-conventions

我有一个方法`Send`和一个方法`Store`。我需要一个包装器，但我找不到它的好名字。

在这种情况下你能做些什么来避免调用该方法`SendAndStoreEmail`？在外观类中命名不同的动作有什么技巧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:51:55.953

我会很高兴... `Send()`！原因如下：

`MailService.Send()`调用`MailSender.Send()` *和* `MailStorage.Store()`。`MailService.Send()`处理发送电子邮件的过程。从实现的角度来看，这个过程包括物理发送一封电子邮件并存储它。但从~~用户~~其他开发人员使用您的代码的角度来看，它只是发送电子邮件。存储它们是技术性的，无关的（？）细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:40:48.043

这完全取决于您想向外界公开哪些信息。

如果您想明确说明您的方法的作用，那么请务必使用解释性名称，例如`StoreAndSendEmail()`（您希望先存储它，然后发送它，因此请尊重您名称中操作的顺序）。

如果您不想/不需要那么清楚，您可以使用任何您想要的命名约定，例如，您可以使用`ProcessMessage()`适合您特定情况的名称。

或者只是打电话给它`SendItToBigBird()`，看看你是否有反应;-)

祝你好运！

# java - Java 中的通用观察者模式

> ID：13362636
> 
> 赞同：24
> 
> 时间：2012-11-13T14:37:12.617
> 
> 标签：java, generics, observer-pattern

`java.util.Observer`和`java.util.Observable`是丑陋的。它们需要使类型安全爱好者感到不舒服的类型转换，并且您不能将一个类定义为`Observer`没有丑陋的转换的多个事物中的一个。事实上，在“[我如何知道 Observer 类在 Java 中发送的通用对象？](https://stackoverflow.com/questions/12113283/how-do-i-know-the-generic-object-that-the-observer-class-sends-in-java) ”中，[一位回答者说](https://stackoverflow.com/a/12113384/590790)每个观察者/可观察对象中只应使用一种类型的数据。

我正在尝试在 Java 中创建一个通用版本的观察者模式来解决这两个问题。这与前面提到的帖子中的问题没有什么不同，但这个问题并没有明显得到解决（最后一条评论是 OP 未回答的问题）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-13T14:37:12.617

观察者.java

```
package util;

public interface Observer<ObservedType> {
    public void update(Observable<ObservedType> object, ObservedType data);
} 
```

Observable.java

```
package util;

import java.util.LinkedList;
import java.util.List;

public class Observable<ObservedType> {

    private List<Observer<ObservedType>> _observers = 
      new LinkedList<Observer<ObservedType>>();

    public void addObserver(Observer<ObservedType> obs) {
        if (obs == null) {
            throw new IllegalArgumentException("Tried
                      to add a null observer");
        }
        if (_observers.contains(obs)) {
            return;
        }
        _observers.add(obs);
    }

    public void notifyObservers(ObservedType data) {
        for (Observer<ObservedType> obs : _observers) {
            obs.update(this, data);
        }
    }
} 
```

希望这对某人有用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-13T15:02:31.947

我更喜欢使用注释，以便侦听器可以侦听不同类型的事件。

```
public class BrokerTestMain {
    public static void main(String... args) {
        Broker broker = new Broker();
        broker.add(new Component());

        broker.publish("Hello");
        broker.publish(new Date());
        broker.publish(3.1415);
    }
}

class Component {
    @Subscription
    public void onString(String s) {
        System.out.println("String - " + s);
    }

    @Subscription
    public void onDate(Date d) {
        System.out.println("Date - " + d);
    }

    @Subscription
    public void onDouble(Double d) {
        System.out.println("Double - " + d);
    }
} 
```

印刷

```
String - Hello
Date - Tue Nov 13 15:01:09 GMT 2012
Double - 3.1415 
```

* * *

```
@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
public @interface Subscription {
}

public class Broker {
    private final Map<Class, List<SubscriberInfo>> map = new LinkedHashMap<Class, List<SubscriberInfo>>();

    public void add(Object o) {
        for (Method method : o.getClass().getMethods()) {
            Class<?>[] parameterTypes = method.getParameterTypes();
            if (method.getAnnotation(Subscription.class) == null || parameterTypes.length != 1) continue;
            Class subscribeTo = parameterTypes[0];
            List<SubscriberInfo> subscriberInfos = map.get(subscribeTo);
            if (subscriberInfos == null)
                map.put(subscribeTo, subscriberInfos = new ArrayList<SubscriberInfo>());
            subscriberInfos.add(new SubscriberInfo(method, o));
        }
    }

    public void remove(Object o) {
        for (List<SubscriberInfo> subscriberInfos : map.values()) {
            for (int i = subscriberInfos.size() - 1; i >= 0; i--)
                if (subscriberInfos.get(i).object == o)
                    subscriberInfos.remove(i);
        }
    }

    public int publish(Object o) {
        List<SubscriberInfo> subscriberInfos = map.get(o.getClass());
        if (subscriberInfos == null) return 0;
        int count = 0;
        for (SubscriberInfo subscriberInfo : subscriberInfos) {
            subscriberInfo.invoke(o);
            count++;
        }
        return count;
    }

    static class SubscriberInfo {
        final Method method;
        final Object object;

        SubscriberInfo(Method method, Object object) {
            this.method = method;
            this.object = object;
        }

        void invoke(Object o) {
            try {
                method.invoke(object, o);
            } catch (Exception e) {
                throw new AssertionError(e);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-14T12:34:41.267

**现代更新：** [ReactiveX](http://reactivex.io/)是一个非常好的基于观察者模式的异步编程 API，它是完全通用的。如果您使用 Observer/Observable 将数据或事件从代码中的一个位置“流式传输”到另一个位置，那么您绝对应该研究一下。

它基于函数式编程，因此使用 Java 8 的 lambda 语法看起来非常流畅：

```
Observable.from(Arrays.asList(1, 2, 3, 4, 5))
        .reduce((x, y) -> x + y)
        .map((v) -> "DecoratedValue: " + v)
        .subscribe(System.out::println); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-25T22:58:51.983

[我曾经使用动态代理](http://docs.oracle.com/javase/1.4.2/docs/guide/reflection/proxy.html)为 Java 编写了观察者模式的通用实现。这是如何使用它的示例：

```
Gru gru = new Gru();
Minion fred = new Minion();
fred.addObserver(gru);
fred.moo();

public interface IMinionListener
{
    public void laughing(Minion minion);
}

public class Minion extends AbstractObservable<IMinionListener>
{
    public void moo()
    {
        getEventDispatcher().laughing(this);
    }
}

public class Gru implements IMinionListener
{
    public void punch(Minion minion) { ... }

    public void laughing(Minion minion)
    {
        punch(minion);
    }
} 
```

AbstractObservable的[完整源代码可在 pastebin 上找到](http://pastebin.com/YmVhDNzk)。回想起来，我[在博客上更详细地介绍了它的工作原理](http://whathecode.wordpress.com/2010/11/01/java-generic-observer/)，还提到了相关项目。

[Jaana 写了一篇关于不同方法的有趣总结，](http://beyond100classes.blogspot.dk/2012/01/observer-part-iv-generic-observer.html)并将动态代理方法与其他方法进行了对比。非常感谢[阿兰·拉隆德，我从那里得到了最初的想法](http://allainlalonde.blogspot.dk/2009/03/java-observer-pattern-woes.html)。我还没有检查[PerfectJPattern](http://perfectjpattern.sourceforge.net/index.html)，但它可能只包含[观察者模式的稳定实现](http://perfectjpattern.sourceforge.net/dp-observer.html)；至少它看起来像一个成熟的图书馆。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-03-27T08:54:39.310

尝试使用 Guava 的 EventBus 类。

你可以像这样声明一个观察者：

```
 public class EventObserver {
        @Subscribe 
        public void onMessage(Message message) {
            ...
        }
    } 
```

像这样新建一个 EventBus：

```
EventBus eventBus = new EventBus(); 
```

并像这样注册观察者：

```
eventBus.register(new EventObserver()); 
```

最后通知观察者，如：

```
eventBus.post(message); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-25T23:38:42.097

我发现了一个类似的请求，但它是在 codereview 上。我觉得这里值得一提。

```
import java.util.ArrayList;
import java.util.Collection;
import java.util.function.Supplier;

/**
 * like java.util.Observable, But uses generics to avoid need for a cast.
 *
 * For any un-documented variable, parameter or method, see java.util.Observable
 */
public class Observable<T> {

    public interface Observer<U> {
        public void update(Observable<? extends U> observer, U arg);
    }

    private boolean changed = false;
    private final Collection<Observer<? super T>> observers;

    public Observable() {
        this(ArrayList::new);
    }

    public Observable(Supplier<Collection<Observer<? super T>>> supplier) {
        observers = supplier.get();
    }

    public void addObserver(final Observer<? super T> observer) {
        synchronized (observers) {
            if (!observers.contains(observer)) {
                observers.add(observer);
            }
        }
    }

    public void removeObserver(final Observer<? super T> observer) {
        synchronized (observers) {
            observers.remove(observer);
        }
    }

    public void clearObservers() {
        synchronized (observers) {
            this.observers.clear();
        }
    }

    public void setChanged() {
        synchronized (observers) {
            this.changed = true;
        }
    }

    public void clearChanged() {
        synchronized (observers) {
            this.changed = false;
        }
    }

    public boolean hasChanged() {
        synchronized (observers) {
            return this.changed;
        }
    }

    public int countObservers() {
        synchronized (observers) {
            return observers.size();
        }
    }

    public void notifyObservers() {
        notifyObservers(null);
    }

    public void notifyObservers(final T value) {
        ArrayList<Observer<? super T>> toNotify = null;
        synchronized(observers) {
            if (!changed) {
                return;
            }
            toNotify = new ArrayList<>(observers);
            changed = false;
        }
        for (Observer<? super T> observer : toNotify) {
            observer.update(this, value);
        }
    }
} 
```

[来自 codereview stackexchange 的原始答案](https://codereview.stackexchange.com/a/76927)

# jquery - 为什么 .attr("checked", true) 在 Jquery 1.7 及更高版本中不起作用

> ID：13362638
> 
> 赞同：2
> 
> 时间：2012-11-13T14:37:13.510
> 
> 标签：jquery

**此代码适用于 jQuery，版本。1.6**

```
<input type="checkbox" class="radio" value="1" name="sameName" />
<input type="checkbox" class="radio" value="1" name="sameName" />
<input type="checkbox" class="radio" value="1" name="sameName" />

$("input:checkbox").click(function() {
    if ($(this).attr("checked") === true) {
        var group = "input:checkbox[name='" + $(this).attr("name") + "']";
        $(group).attr("checked", false);
        $(this).attr("checked", true);
    } else {
        $(this).attr("checked", false);
    }
});​ 
```

但是，如果我使用 jQuery 1.7 的新方法更改代码，它不会工作吗？为什么？谢谢你的时间：

```
$("input:checkbox").on('click', function() {
    if ($(this).attr("checked") === true) {
        var group = "input:checkbox[name='" + $(this).attr("name") + "']";
        $(group).attr("checked", false);
        $(this).attr("checked", true);
    } else {
        $(this).attr("checked", false);
    }
});​ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T14:39:20.240

使用`.prop('checked',true)`而不是`.attr`.

[http://api.jquery.com/prop](http://api.jquery.com/prop)

此外，`if ($(this).attr("checked") === true)`可以简化为

```
if ($(this).prop("checked")) { 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T14:39:28.400

attr 返回一个字符串。您应该使用[.prop](http://api.jquery.com/prop/)为 jQuery 1.6+ 设置选中的属性

```
$("input:checkbox").on('click', function() {
    if (this.checked) {
        var group = "input:checkbox[name='" + $(this).attr("name") + "']";
        $(group).prop("checked", false);
        $(this).prop("checked", true);
    } else {
        $(this).prop("checked", false);
    }
});​ 
```

来自 jQuery .prop() 文档

> 应该使用 .prop() 方法来设置禁用和检查，而不是 .attr() 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T14:51:57.090

因为你的代码是错误的。.on() 事件需要元素的容器。

因此，您的**HTML**代码应如下所示：

```
<div id="chkContainer">
    <input type="checkbox" class="radio" value="1" name="sameName" />
    <input type="checkbox" class="radio" value="1" name="sameName" />
    <input type="checkbox" class="radio" value="1" name="sameName" />
</div> 
```

和**JAVASCRIPT**函数如下：

```
$('#chkContainer').on('click', 'input:checkbox', function() {
    if ( $(this).is(':checked') ) {
        var group = "input:checkbox[name='" + $(this).attr("name") + "']";
        $(group).attr("checked", false);
        $(this).attr("checked", true);
    } else {
        $(this).attr("checked", false);
    }
}); 
```

这是给你的一个例子：http: [//jsfiddle.net/5xDzv/1/](http://jsfiddle.net/5xDzv/1/)

# http - SSL 自签名证书

> ID：13362641
> 
> 赞同：1
> 
> 时间：2012-11-13T14:37:25.800
> 
> 标签：http, ssl, https, certificate, signing

我可以为域 A 购买一个 SSL 证书并以域 A 作为参考签署我所有的其他域吗？

它会起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:44:29.507

您当然可以安装这些证书。然而，与自签名证书一样，主要问题是由于验证链损坏，浏览器无法验证它们。

简而言之：它不会按您的意愿工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:58:03.063

不，你不能。SSL 证书是根据特定的允许用途（在证书中编码）颁发的。这不包括签署其他证书。

因此，尽管您在技术上将能够使用证书 A 的密钥为其他域签署证书，但此类签署的证书将不会被正确验证并且无法工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T14:45:43.033

我认为您正在寻找通配符证书。为 *.mydomain.com 颁发证书将对 sub1.mydomain.com、sub2.mydomain.com 等有效。

如果您希望获得 mydomain.com 的证书并使用它为 otherdomain.com 生成证书，那将无法正常工作。

仅供参考，据我所知，通配符证书要贵得多。

编辑：重读你的问题，你想做第二个选择，不，你不能那样做。您最终会得到一个无效的证书，并且大多数浏览器都会发出巨大的警告信号，表明该证书不是来自受信任的来源。它会将您的域 A 证书引用为受信任的签名者，但事实并非如此，即使它是由链上的受信任签名者颁发的。如果您想做的事情是可能的，那么整个受信任的签名者/TLS 基础设施将毫无用处。（基本 TLS 的实用性作为验证您正在与谁打交道，您认为您的交易是值得商榷的，因为获得证书是微不足道的/便宜的。因此存在[扩展验证证书](http://en.wikipedia.org/wiki/Extended_Validation_Certificate)。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T17:31:44.710

您不能从您的证书签署更多证书。否则，您可以在自己的合法 SSL 证书下签署类似 www.paypal.com 之类的东西 - 这在一次黑帽会议上通过 MITM 攻击证明是可能的，但此后这已成为不可能。

但是，您可以获得多域证书。这些证书允许您在 SAN 字段（主题备用名称）中包含其他域。因此，证书是为单个域生成的，并且在您的 SSL 提供商的注册过程中添加了其他域。您需要验证您请求的每个域的所有权。

这些证书允许您使用一个 SSL 证书在单个 IP 上托管多个 FQDN。

此外，还有通配符证书，但这些证书只能让您使用单个证书保护 *.domain.com。

# javascript - 如何在 html 表格的空单元格覆盖的 div 上接收点击事件？

> ID：13362642
> 
> 赞同：0
> 
> 时间：2012-11-13T14:37:27.720
> 
> 标签：javascript, jquery, html, css, jquery-ui

在网页中，我有几个重叠的 html 表（使用 css 样式设置`position:absolute`）。在这些表之一的单元格中，定义了一个 div 元素，上面有一个`click`事件（使用`jquery`）。

问题是：**如果 div 元素被另一个重叠表的空单元格覆盖，则 div 元素将不再接收点击事件。**发生这种情况的条件之一是必须在覆盖表之前在 DOM 结构中设置被覆盖的 div。

请参阅此[jsfiddle](http://jsfiddle.net/4CjDZ/)以获得更好的示例。如您所见，红色元素不再接收点击事件（因为被包含蓝色元素的表格的顶部空单元格覆盖）。

我知道有这样的页面听起来很奇怪，但原因是在实际应用程序中这些表格是`ui-draggable`（因此它们可以重叠），并且表格结构用于显示小型组织结构图）。

备注：

我不能只交换表格位置`DOM`或`z-index`在其中一个表格上添加一个来解决问题，因为如前所述，表格是可拖动的（使用`jquery-ui`），因此用户可以更改情况（蓝色可以重叠红色或红色可以重叠蓝色）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:41:41.137

在不修改 HTML 的情况下，使用 CSS 执行此操作的唯一方法是设置`pointer-events:none;`重叠表，然后`pointer-events: all;`设置为蓝色的特定 TD。

看到[这个小提琴。](http://jsfiddle.net/4CjDZ/2/)

# javascript - 从文本中获取图像 url 的函数

> ID：13362644
> 
> 赞同：1
> 
> 时间：2012-11-13T14:37:29.763
> 
> 标签：javascript, regex, image, url

我正在尝试编写一个简单的 javascript 函数来从文本中提取 img url。

我几乎让它工作了，但我遇到了参数问题，我该如何删除它们并返回完整的 img url，有人可以帮助不是最擅长正则表达式的人吗

```
document.write(getImagesInText("Whether the view should  hidden from (i.e., ignored by) the accessibility service. http://jsfiddle.net/ http://thickbox.net/images/plant4.jpg afhttp://thickbox.net/images/plant4.jpg?4t34t34t"));

function getImagesInText(text){

        var html = text;
        var urlRegex = /((ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)+\.(?:jpg|jpeg|gif|png)/gi;
        return html.replace(urlRegex, '<img src="$1" width="48" height="48"/>');

} 
```

在此处查看示例。
[http://jsfiddle.net/7dJCm/1/](http://jsfiddle.net/7dJCm/1/)

更新

```
function getImagesInText( s ) {
    var html = s;
    var imgregex = /((http(s)?|ftp):\/\/[\S]*(\.jpg|.jpeg|\.gif|.png)[\S]*)/gi;
    var urlRegex = /((ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?)/gi;

    html = html.replace(/(\.jpg|\.jpeg|\.gif|\.png)/gi, function( ext ) { return ext + " "; }); 

    html = html.replace(/(http|https)/gi, function( ext ) { return " " + ext; });

    html = html.replace(urlRegex, function( path ) {
           if(path.match(/jpg|png|gif|jpeg/g)){
             return "<img width='48' height='48' src='" + path + "' />";
           }else{
             return "<a href='" + path + "'>" + path + "</a>";
           }
    });

    return html;
} 
```

[http://jsfiddle.net/7dJCm/16/](http://jsfiddle.net/7dJCm/16/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:50:07.787

```
var s = "Whether the view should  hidden from (i.e., ignored by) the accessibility service. http://jsfiddle.net/ http://thickbox.net/images/plant4.jpg afhttp://thickbox.net/images/plant4.jpg?4t34t34t";

console.log( getImagesInText(s) ) // "Whether the view should  hidden from (i.e., ignored by) the accessibility service. http://jsfiddle.net/ <img src='http://thickbox.net/images/plant4.jpg' /> af<img src='http://thickbox.net/images/plant4.jpg?4t34t34t' />"

function getImagesInText( s ) {
    var regex = /((http(s)?|ftp):\/\/[\S]*(\.jpg|\.jpeg|\.gif|\.png)[\S]*)/gi;

    return s.replace(regex, function( path ) {
        return "<img src='" + path + "' />";
    });
} 
```

# jquery - Coffeescript 不处理 ajax：成功

> ID：13362648
> 
> 赞同：3
> 
> 时间：2012-11-13T14:37:48.697
> 
> 标签：jquery, coffeescript, ruby-on-rails-3.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:07:57.500

好的，我知道了。我需要做两个改变：

*   首先，正如[这个答案](https://stackoverflow.com/a/6598137/306084)所建议的，我需要`text/json`在响应中返回一个 MIME 类型。我之前的操作是这样的：

```
 def edit
    respond_to do |format|
      format.js
      format.html
    end
  end 
```

为了得到`text/json`回应，我结束了这个：

```
 def edit
    respond_to do |format|
      format.js { render :json => { :html => render_to_string('edit')}, :content_type => 'text/json' }
      format.html
    end
  end 
```

该更改触发`ajax:success`并因此运行了开放模式功能。

*   但是，由于响应负载现在在`data.html`而不是只是`data`，我需要调整`modal.js.coffee`以实际将标记放入模态：

```
 .html(data.html) // instead of .html(data) 
```

# assembly - Tasm can't locate include file

> ID：13362654
> 
> 赞同：4
> 
> 时间：2012-11-13T14:38:12.227
> 
> 标签：assembly, tasm

In my `program.asm` I include file with the tasm directive

```
include "file.asm" 
```

however I get an error "Can't locate file file.asm". The file is in the same directory as the source code which is D:\source. Tasm is in directory `D:\tasm`. I tried to create file `TASM.CFG` in the `tasm/bin` directory with the line `/iD:\source` but that didn't help. I also tried to move the `file.asm` into the `tasm/bin` directory, that also didn't help. I also tried to specify the full path in the include directive

```
include "D:\source\file.asm" 
```

that also didn't help.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T14:57:14.350

请注意，`MASM`include 的语法很简单，`include file.asm`即没有引号。AFAIK MASM 是 TASM 的默认模式

[参考TASM 5 用户指南](http://bitsavers.trailing-edge.com/pdf/borland/turbo_assembler/Turbo_Assembler_Version_5_Users_Guide.pdf)的第 37 和 39 页

# c# - Webkit 嵌入式浏览器禁用 cookie

> ID：13362663
> 
> 赞同：1
> 
> 时间：2012-11-13T14:38:47.060
> 
> 标签：c#, winforms, browser

我在 x86 平台上的 .net 3.5 winform 应用程序中使用这个 borwser。 [http://sourceforge.net/projects/webkitdotnet/](http://sourceforge.net/projects/webkitdotnet/)

问题是，当我使用此浏览器登录 facebook 时，我从 facebook 获取了数据，然后关闭了表单，在重新加载表单（重新创建每个控件）后，facebook 再次登录。于是会议继续进行。我不想要这个，我想开始一个新的会话。我可以禁用浏览器的cookies，或者重置会话，或者类似的东西吗？

```
 public WebBrowserTabPage currentPage;

   WebBrowserTabPage page = new WebBrowserTabPage();
   tabControl.TabPages.Add(page);
   currentPage = page;
   currentPage.browser.Navigate(Url); 
```

currentPage.browser 是一个 WebKitBrowser 实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:22:20.140

我已经看到了我的问题，并且发现了一个变量（WebkitBrowser 类中的 CookiesPolicy。我已将其设置为禁用 cookie，而 facebook 在没有 cookie 的情况下无法工作。我试图从硬盘驱动器中删除 WebkitBrowser 的 cookie ，但是我没有找到。发现后，Webkitbrowser存在内存泄漏。所以我关闭了from，但它没有处理，一直留在内存中。最后我解决了问题，我已经将WebkitBrowser放在另一个项目中，我在不同的应用程序中运行。我正在使用进程间通信（IPM）在母窗体应用程序和浏览器应用程序之间进行通信在浏览器之后

```
 Application.Exit(); 
```

会话已处理，我可以再次登录 facebook。

这是带有命名管道的 IPM 的示例代码：

[http://www.codeproject.com/Articles/34073/Inter-Process-Communication-IPC-Introduction-and-S](http://www.codeproject.com/Articles/34073/Inter-Process-Communication-IPC-Introduction-and-S)

# google-chrome - Chrome gradient background have some color block

> ID：13362664
> 
> 赞同：1
> 
> 时间：2012-11-13T14:38:47.620
> 
> 标签：google-chrome, html, background, gradient

Please help me,

When I refresh [this](http://www.ddcs.com.tw/kukofashion/product/goods_detail.php?goods_id=77) page, and this page will become look like the [picture](http://i.stack.imgur.com/EAMSN.jpg).

But when I press `Ctrl+` or `Ctrl-`, this will be fine. Is it Chrome's bug? Or something I can fix?

Sorry my English is poor.

# excel - Find a Match between Two Columns by Referring to a List

> ID：13362665
> 
> 赞同：1
> 
> 时间：2012-11-13T14:38:53.037
> 
> 标签：excel, excel-2010

I have two columns (column A and column B) which has a list of companies.

Between that list of companies in column A and B, there were companies which are called 'global companies'.

I also have a list of that 'global companies' which I put it in a column (Column E). It can be put at other place as well, no problem.

How to make excel can identify between column A and column B which one is a 'global company' (by referring to column E or somewhere I put the list) and put the name of that 'global company' in column C (a new column)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:11:37.120

根据您的标准，如果您命名您的全球公司列表`GlobalCompanies`，则将此公式粘贴到 C1 中并将其向下拖动：

```
=IFERROR(VLOOKUP(A1,GlobalCompanies,1,0) & " ","")&IFERROR(VLOOKUP(B1,GlobalCompanies,1,0),"") 
```

# javascript - 如何剪切 json 字符串？

> ID：13362669
> 
> 赞同：0
> 
> 时间：2012-11-13T14:38:58.820
> 
> 标签：javascript, jquery, json

我这里有一个问题，不知道如何解决它......

我有一个这样的json文件：

```
{"data":[{"kw":"48","val":"10","val2":"05"},{"kw":"49","val":"04","val2":"05"}]} 
```

但我需要这种格式：

```
[{"kw":"48","val":"10","val2":"05"},{"kw":"49","val":"04","val2":"05"}] 
```

在 javascript/jQuery 中，我发出 ajax 请求并取回 json：

```
$.ajax({
  type : "POST",
  cache : "false", // DEBUG
  url : weburl,
  dataType : "json",
  contentType : "application/json; charset=utf-8",
  success : function(data) {
    // Strip data?
  }
  }); 
```

有谁知道如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:40:25.857

```
success : function (data) {
    var array = data ? data.data : null;
    // now perform the required operations with array variable.
} 
```

这将只返回数组，而不是包装在对象中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T14:40:04.513

```
$.ajax({
    type: "POST",
    cache: "false", // DEBUG
    url: weburl,
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    success: function(data) {
        var arrayYouWant = data.data; // http://thedailywtf.com/Articles/Data-Data-data-Data.aspx
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T14:40:14.497

为什么需要剥离它，你只是引用它

```
success : function(data) {
    var myArrayofObjects = data.data;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T14:45:23.813

为了真正理解Javascript 中的[成员运算符，特别是](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators)**点符号**。JSON 是 Javascript 的一个子集，而 JSON 对象最终是一个 Javascript 对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T14:45:49.687

不知道你所说的存档是什么意思。您的意思是简单地访问与数据属性关联的数组吗？

该数组与 JSON 字符串中的“数据”属性相关联。我可能会更改传递给成功函数的数据参数的名称。

试试这个：

```
$.ajax({
    type: "POST",
    cache: "false", // DEBUG
    url: weburl,
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    success: function(resp) {
        var yourArray = resp.data; 
        console.log(yourArray);
    }
}); 
```

# php - PHP 在 Linux 上显示错误日志

> ID：13362679
> 
> 赞同：0
> 
> 时间：2012-11-13T14:39:46.900
> 
> 标签：php, linux, error-log

我使用 PHP 作为脚本语言来创建 Web 应用程序。我的问题是如何在 linux 上看到错误日志？我忘记了命令，这有点像`tail -f blabla`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:42:03.993

取决于您的发行版以及 Apache 的安装方式（我假设您使用的是 Apache）。您应该在 /var/log 或 /var/log/httpd 中找到相关的日志。找到正确的日志文件后，您可以使用`tail -f <file>`.

您还可以通过 php.ini 中的 display_errors 开关配置 PHP 以在脚本输出中显示错误。一定要`php -i | grep php.ini`弄清楚你的相关 php.ini 在哪里（通常是 /etc/php.ini）。

# excel - 使用 Excel 或 Access 2003 组合 Excel 表

> ID：13362680
> 
> 赞同：0
> 
> 时间：2012-11-13T14:39:47.547
> 
> 标签：excel, excel-formula, pivot-table, ms-access-2003, excel-2003

我正在尝试使用 Excel 或 Access 创建合并数据集，但运气不佳。我有两个 Excel 表，都包含我可以链接它们的 ID。但是，TABLE1 每个 ID 只有一行，TABLE2 每个 ID 可以包含多行。我想保留 TABLE1 中的所有条目并添加 TABLE2 中的值，用逗号分隔倍数。例子：

```
 **TABLE1**
    CNid    start   stop
    0001    1        50
    0002    60      100
    0003    1        20

 **TABLE2**
    CNid    gene
    0001    abc
    0001    ijk
    0001    qrs
    0003    abc

 **TABLE3(Created)**
    CNid    start   stop    gene
    0001    1        50      abc,ijk,qrs
    0002    60      100 
    0003    1        20      abc 
```

我熟悉 Access 中的合并查询，但无法弄清楚如何使结果表中的每个 CNid 只有一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T00:01:44.997

虽然我使用 Excel 2007，但我认为这将在 Excel 2003 中工作，但我会分开步骤以防万一：

1.  从 Table2 中创建一个数据透视表，其中`CNid`包含行标签、`gene`列标签和 Σ 值的基因计数。

2.  以布局为例，在 L8 中放置：

    > =IF(F8=1,F$7,"")

并复制到适合，然后将L8复制到任何地方。

![SO13362680 示例](../Images/dc00625a26526030c82450d577df9eac.png)

3.  在 I8 中：

    > =L8&","&M8&","&N8&","&O8&","&P8

根据需要扩展并复制下来以适应。

4.  复制 ColumnI 并将特殊值粘贴到 ColumnJ。

5.  选择 ColumnJ 并替换为空`,,`。

6.  在 K8 中：

    > =IF(右(J8,1)=",",左(J8)-1,J8)

并复制下来以适应。

7.  将`gene`标签添加到 Table1，假设这是在 D12 中。

8.  `geneArray`使用 Workbook 范围 命名 ColumnsE:K 。

9.  在 D13 中输入：

    > =IF(ISERROR(VLOOKUP(A13,geneArray,7,0)),"",VLOOKUP(A13,geneArray,7,0))

并复制下来以适应。

10.  复制 ColumnD 并将特殊值粘贴到顶部。

11.  删除不再需要的内容。

# c++ - 使用 C++ 在 Windows 8 中无需固定到“开始”屏幕的应用快捷方式

> ID：13362685
> 
> 赞同：6
> 
> 时间：2012-11-13T14:39:57.000
> 
> 标签：c++, winapi, windows-8

我们公司有一个用 C++ 编写的安装程序，它使用 IShellLink 创建程序快捷方式，如下所述：http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb776891%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776891%28v=vs.85%29.aspx)

在 Windows 8 上，在开始菜单中创建的所有快捷方式也将在开始屏幕上显示为标题。我们要做的是以编程方式控制开始屏幕上显示的图标。在以下文章中，它将选项“System.AppUserModel.StartPinOption”描述为：

> 要创建添加应用程序快捷方式而不将其固定到开始屏幕视图，您可以在快捷方式上设置以下属性：System.AppUserModel.StartPinOption = 1。1 的符号名称是 APPUSERMODEL_STARTPINOPTION_NOPINONINSTALL。

[http://msdn.microsoft.com/en-us/library/windows/desktop/jj673981%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/jj673981%28v=vs.85%29.aspx)

使用 Windows Installer 似乎可以做到这一点，但是鉴于我们的上下文，我还没有找到一种在 C++ 中以编程方式完成相同功能的方法。

如果有人对此有任何信息或某种示例，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T22:15:06.633

我发现的一件事是“..NewInstall”字面意思就是这个意思。即使在您删除/更新 .lnk 文件后，用户对磁贴的自定义似乎也会保留。这可能是一件好事，因为更新不会重置用户的环境，但这确实意味着我需要在测试期间使用全新安装的 Windows 8。我用了一个虚拟机盒子来减少痛苦。至少我不知道如何删除从环境中设置的属性。

# drupal - Drupal 7 节点模板和视图

> ID：13362686
> 
> 赞同：0
> 
> 时间：2012-11-13T14:40:00.407
> 
> 标签：drupal, views, nodereference

我已经建立网站很长时间了，我刚开始使用 Drupal 7。为了在内容类型（节点）上获得更好的布局，我使用节点模板。我有一个内容类型事件和一个内容类型 DJ。在一个事件节点上，我有一个 DJ 与节点引用链接到它，但我希望这是一个块（视图）。当我创建视图时，我尝试了一切，我得到的只是所有的 DJ 或没有。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:41:19.253

我会使用节点关系来获取与事件关联的 DJ 节点的内容。我使用实体引用模块，但它应该做同样的工作。

# hibernate - 出现错误：对象引用未设置为 Hibernate 中的对象实例

> ID：13362693
> 
> 赞同：0
> 
> 时间：2012-11-13T14:40:11.610
> 
> 标签：hibernate, nhibernate, nhibernate-mapping, hibernate-mapping

嗨，我有两个映射：

Ansprechpartner-映射文件：

```
<class name="Book.Doa.Ansprechpartner, Book.Co" table="ANSPRECHPARTNER">
<id name="ID">
  <generator class="foreign">
    <param name="property">Parent</param>
  </generator>
</id>

<property name="AnsprechPartnerName" length="20" column="PARTNER"/>
<property name="KonfStandort" length="20" column="KONFERENZSTANDORT"/>

<one-to-one name="Parent"
        class="Book.Doa.Gebaeude, Book.Co" constrained="true"/> 
```

Ansprechparter.CS:

```
public class Ansprechpartner : DomainObject<long>
{
    public virtual string AnsprechPartnerName { get; set; }
    public virtual string KonfStandort { get; set; }
    public virtual Gebaeude Parent { get; set; }

    public Ansprechpartner()
    {
    }
    public Ansprechpartner(

        string ansprechpartnername,
        string konfstandort,
        Gebaeude parent
        )
    {
        AnsprechPartnerName = ansprechpartnername;
        KonfStandort = konfstandort;
        Parent = parent;
    }
} 
```

和

Gebaeude-映射文件：

```
<class name="Book.Doa.Gebaeude, Book.Co">
    <id name="ID">
        <generator class="native">
            <param name="sequence">GLOBALSEQUENCE</param>
        </generator>
    </id>

    <property name="Bezeichnung" not-null="true" length="64" />
    <property name="Standort" column="Konfstandort" />

  <one-to-one name="Partner" lazy="false" cascade="all" fetch="join" outer-join="true"
   class="BookIt.Domain.Ansprechpartner, BookIt.Core"  />

</class> 
```

Gebaeude.CS:

```
 public class Gebaeude : DomainObject<long>
    {

        public virtual string Bezeichnung { get; set; }
        public virtual string Adresse { get; set; }
        public virtual Stadt Stadt { get; set; }
        public virtual string Plz { get; set; }
        //Konferenzstandort ggf. unten noch hinzufügen.
        public virtual string KonfStandort { get; set; }

        public virtual Ansprechpartner Partner { get; set; }

         ......
} 
```

他们是一对一的关系。

我尝试通过以下方式获取值“AnsprechPartnerName： `room.Etage.Gebaeude.Ansprechpartner.AnsprechPartnerName`

但我总是收到错误：`Object reference not set to instance of an object`

这是为什么？我在这方面做错了什么。我的其他映射工作完美。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:56:09.823

This error simply means that you are trying to access a property of an object which is null. It does not imply that there is something wrong with your mapping, and there is no reason for us to think mapping is the problem based on data you provided.

Use a debugger and break on expression you mentioned (`room.Etage.Gebaeude.Ansprechpartner.AnsprechPartnerName`) and check if each property is set.

Is `room` not `null`?

Is `room.Etage` not `null`?

Is `room.Etage.Gebaeude` not `null`?

If one of them is not set, check in your database if data actually exists. Only then can you assume that problem is with your mapping.

# ios - 如何在情节提要中创建分组文本字段？

> ID：13362699
> 
> 赞同：0
> 
> 时间：2012-11-13T14:40:21.517
> 
> 标签：ios, cocoa, uistoryboard

嘿伙计们，我想弄清楚如何在情节提要中构建分组文本字段？有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:57:04.453

在主视图中使用 containerView 并根据需要填充两行。您需要将 Cell 模板添加到 tableView 以避免静态单元格错误消息。

# c++ - 如何使用 libpng 多次读取图像？

> ID：13362703
> 
> 赞同：1
> 
> 时间：2012-11-13T14:40:30.353
> 
> 标签：c++, image, png, libpng

有什么方法可以`png_ptr`开始刷新状态，我可以使用读取 png 图像`png_read_rows`

# java-native-interface - 带有 JNI 的 C++ 应用程序引发错误“找不到 jvm.dll。重新安装应用程序可以修复....”

> ID：13362705
> 
> 赞同：5
> 
> 时间：2012-11-13T14:40:41.403
> 
> 标签：java-native-interface, jnienv, jniwrapper

我在 VC6 中编写了一个普通的 C++ 应用程序，它使用 jni 来调用 java 中的方法。为此，我在项目目录中包含了 jni.h 和其他 lib 文件夹。

代码编译但是当我运行应用程序时它失败说“找不到jvm.dll。重新安装应用程序将修复它”。但是 jvm.dll 存在于我的电脑中。

如果我将应用程序的工作目录设置为 jvm.dll 所在的位置，那么它就像一个魅力。我无法将应用程序的工作目录设置为 jvm.dll 的目录，因为该应用程序将来将成为一个 dll。

我还尝试将系统变量中的 PATH 变量更新为 jvm.dll 的位置，但没有任何效果..

我怀疑 jvm.lib 正在从我的应用程序未提供的某个目录位置加载 jvm.dll .. 因此它失败了，..

请建议我出了什么问题。

提前致谢。

问候拉加文德拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:27:44.907

> 它没有说“找不到jvm.dll。重新安装应用程序可以解决它”。

显然那是你自己的错误信息，或者 Windows': not Java's，这是不正确的。重新安装应用程序不可能对是否`jvm.dll`可以找到任何影响。

您需要确保它`jvm.dll`在您的 PATH 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-06T22:42:42.563

即使我的 PATH 配置为 StockB 描述的，我也遇到了同样的错误。将 DLL 复制并粘贴到我的工作目录中解决了这个问题。就我而言，这是../x64/Debug。

# java - 在 Android 上使用 Teechart 增长动画

> ID：13362708
> 
> 赞同：0
> 
> 时间：2012-11-13T14:40:55.930
> 
> 标签：java, android, teechart

我正在尝试使用 Android 上的 Teecharts 使用简单的增长/收缩动画。我找不到任何教程或文档，所以我想出了以下代码：

```
 SeriesAnimation seriesAnimation = new SeriesAnimation();
    seriesAnimation.setActive(true);
    seriesAnimation.setStartAtMin(false);
    seriesAnimation.setSteps(500);
    seriesAnimation.setStartValue(0);
    Series series = Series.createNewSeries(chart.getChart(), Bar3D.class, null);
    series.add(new DateTime(System.currentTimeMillis()), 33);
    series.add(new DateTime(System.currentTimeMillis() - 10000000), 433);
    seriesAnimation.setSeries(series);

    chart.getTools().add(seriesAnimation);

    chart.addSeries(series);
    try {
        seriesAnimation.execute();
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

但是对图表完全没有影响。任何人都至少对Android版本的Teecharts动画的基本使用有任何指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T08:34:59.900

在 Steema 支持论坛中回答，[这里](http://www.teechart.net/support/viewtopic.php?f=10&t=13680&p=59953#p59953)

# c++ - 协议缓冲区 - 读取所有消息通用的标头（嵌套消息）

> ID：13362712
> 
> 赞同：7
> 
> 时间：2012-11-13T14:41:07.200
> 
> 标签：c++, protocol-buffers

我目前正在评估在项目中使用的协议缓冲区（目前还没有编写代码）。我不清楚的一件事是您将如何阅读编码消息的一部分，例如说我有一个共同的标头：

```
message Header {
  required uint16 msg_type = 1;
  required uint16 length = 2;
} 
```

假设我将多个不同的消息传递到一个队列。消费者如何计算出每条消息要读取多少数据以及应该构造什么消息类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T14:52:10.070

这里应该不需要`Header`留言；最常见的方法是遵循[此处](https://developers.google.com/protocol-buffers/docs/techniques#streaming)的“流式传输”建议。在其中，您可以将其视为一系列相同的[联合类型](https://developers.google.com/protocol-buffers/docs/techniques#union)消息，或者（我的偏好）在编写时，而不是在每个之前写一个长度前缀，包括一个指示消息类型的 varint，**然后**是长度（作为变体）。指示消息类型的数字是您发明的任意映射，因此 1 = Foo、2 = Bar、3 = Blap 等）。如果您将消息类型左移 3 位然后“或”2，那么它*本身*也将是一个格式良好的 protobuf 流，与 100% 相同`repeated YourUnionType`。

[基本上，这与此 answer](https://stackoverflow.com/questions/13242349/protobuf-streaming-lazy-serialization-api)完全相同，但不是每次都是字段 1，而是每个消息类型的数字都不同。大多数实现都有一个读取器/写入器 API，可以读取和写入原始变量，并限制读取器 API 的长度。一些实现具有帮助机制来直接支持异构消息流（基本上，为您完成上述所有工作）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T16:20:39.720

在最近的一个项目中，我使用了这样的协议缓冲区：

我们有一个“容器”消息，其中包含所有实际消息作为可选成员：

```
message ContainerMessage {
    optional Message1 message_1 = 1;
    optional Message2 message_2 = 2;
    //...
    optional MessageN message_N = N;
} 
```

在应用程序中，您可以将`ContainerMessage`其用作真实消息的有区别的联合。

Between applications, we serialized/deserialized the `ContainerMessage` and sent the serialized content, prefixed with a simple header containing the length of the serialized content.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T14:58:19.493

这将取决于您使用的协议。

请注意，例如，许多协议通过串行接口进行，在那里您可能有额外的行来告诉消息何时开始和停止。

通常，消息将在消息开始后具有固定偏移量的长度。

在其他情况下，您可能需要逐个元素地解析消息元素以找出剩余的消息量。所以嵌入在消息中的字符串可能是固定长度的，或者在开头有长度，或者可能有 \0 作为结束标记。

大多数情况下，当您将消息存储在队列中以进行进一步处理时，您将希望添加更多信息以使您的生活更轻松 - 例如，当您只有一个额外的信号告诉您消息何时停止时，您可能会在内部存储消息及其长度。

# maven - Maven：从 EAR 中删除重复的 jar

> ID：13362719
> 
> 赞同：1
> 
> 时间：2012-11-13T14:41:43.637
> 
> 标签：maven, war, ear

我们正在使用 maven 构建一个包含 WAR 的 EAR，JARS 在 EAR 的根目录和 WAR 的 lib 文件夹中都复制了，我阅读了关于从 WAR 中删除 jars 的瘦罐子，但我不想要这个，因为我想保留WAR作为独立单元，
有没有办法反过来从EAR的根文件夹中删除JAR？
附件是EAR POM

```
 <build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-ear-plugin</artifactId>
            <version>2.6</version>
            <configuration>
                <modules>
                    <webModule>
                        <groupId>com.csv.xyz</groupId>
                        <artifactId>web</artifactId>
                    </webModule>
                </modules>
            </configuration>
        </plugin>
    </plugins>
</build>
<dependencies>
    <dependency>
        <groupId>com.csv.xyz</groupId>
        <artifactId>web</artifactId>
        <version>0.0.1-SNAPSHOT</version>
        <type>war</type>
        <scope>compile</scope>
    </dependency>
</dependencies> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-08T13:34:04.980

在您的情况下，“maven-skinny-war”解决方案没有任何缺点。也看看这个问题和我的回答：[How to make maven place all jars common to war inside the same EAR to EAR root?](https://stackoverflow.com/questions/848947/how-to-make-maven-place-all-jars-common-to-wars-inside-the-same-ear-to-ear-root/15230037#15230037)

有了这个解决方案，您将首先获得使用它们自己的依赖项打包的 WAR，然后是带有瘦 WAR 的 EAR 模块。所以一切都可以自行部署，没有任何东西是重复的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:47:04.277

由于类加载器架构，我认为这不是一个好主意。如果 JAR 是 WAR 的一部分，它是由 Web 应用程序类加载器定义的，这可能会导致多个实例。如果它是 EAR 的一部分，它由企业应用程序类加载器定义，这是一个不同的类加载器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:50:07.107

要从 EAR lib 文件夹中删除依赖项，请按照 EAR pom 中提供的方式声明依赖项，例如删除 commons-lang：

```
<dependencies>  
    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.6</version>
        <scope>provided</scope>
    </dependency>    
</dependencies> 
```

只要确保你有不需要依赖的 EJB 模块！webModules 也不对 EAR 的根 lib 文件夹做出贡献，您的耳朵 pom 中是否有更多的依赖项？

# magento - Magento - 命令行索引器不接受任何命令

> ID：13362723
> 
> 赞同：0
> 
> 时间：2012-11-13T14:42:00.023
> 
> 标签：magento, indexer

我偶然发现了 Magento 索引器的一个奇怪问题。我尝试通过命令行运行它，但是，无论我写什么，我都会返回帮助屏幕。即使我运行`php -f indexer.php info`，我也只会看到帮助屏幕，但屏幕上或系统日志中都没有错误消息。我应该检查什么来找出索引器不想运行的原因？

提前感谢您的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:28:33.297

我找到了答案。在脚本不想运行的服务器上，我必须使用`php-cli`而不是`php`. 它可能与服务器配置有关。

我运行它`php-cli indexer.php info`并得到了预期的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T16:40:09.300

很可能您的 shell 文件已被修改。Next 函数负责显示帮助屏幕，在你的 shell/abstract.php 中检查它，应该如下所示：

```
protected function _showHelp()
{
    if (isset($this->_args['h']) || isset($this->_args['help'])) {
        die($this->usageHelp());
    }
} 
```

尝试调试`_args`函数内部的数组。如果数组不是您提供的，请检查`_parseArgs`同一文件中的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T05:00:18.370

您需要将您的论点与 分开`--`吗？

```
php -f indexer.php -- info 
```

# php - Yii setFlash 带注销

> ID：13362729
> 
> 赞同：3
> 
> 时间：2012-11-13T14:42:17.930
> 
> 标签：php, yii

我想使用命令序列：

```
Yii::app()->user->setFlash('success', "Successful!");
Yii::app()->user->logout();
$this->redirect(array('user/login')); 
```

用户已注销并重定向，但 Setflash 不起作用。我还尝试更改 2 个第一个命令的顺序，但遇到了同样的问题。如果我不注销用户，Setflash 工作正常。

如何使这两个命令都起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-17T22:37:47.577

这应该工作

```
Yii::app()->user->logout();
Yii::app()->session->open();
Yii::app()->user->setFlash(...); 
```

如果你需要销毁整个会话，但你想在之后设置一个 flash，你可以这样扩展 CWebUser：

```
<?php

class BaseWebUser extends CWebUser
{

        public function logout($destroySession = true)
        {
                parent::logout($destroySession);
                Yii::app()->session->open();
        }

}

?> 
```

仔细看看[这里](http://www.yiiframework.com/forum/index.php/topic/7077-setflashgetflash-problem/page__view__findpost__p__37096)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T14:33:25.867

我认为你可以使用这个：

```
public function afterLogout() {
    // Create new session
    $session=new CHttpSession;
    $session->open();

    // Set flash message
    Yii::app()->user->setFlash('success', 'You are logged out successfully.');

    // Prepare target URL after logout
    $continue_url = Yii::app()->request->hostInfo . Yii::app()->createUrl('');

    // Redirect
    CController::redirect($continue_url);
} 
```

将它放在您的 WebUser 组件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T14:45:22.377

Flash 消息存储在会话中。记录用户我们会破坏用户的当前会话。调用 session_destroy() 后，您必须再次调用 session_start() 以生成新的会话 ID 并进行此工作。Yii 很可能不会那样做。

如果您有一个“成功”消息表明注销工作非常重要 - 然后将用户重定向到“注销成功”页面。或者，您可以考虑覆盖 Yii 执行注销的方式 - 尽管我不推荐它。

# javascript - Callback/function scope in a forEach loop in JavaScript

> ID：13362738
> 
> 赞同：2
> 
> 时间：2012-11-13T14:42:42.163
> 
> 标签：javascript, foreach, scope

I discovered [dōmo](http://domo-js.com/) from Jed Schmidt which seems useful for creating server side HTML in node.js.

Basic stuff works but I lack to see how I can use loops like `forEach()` on arrays to create things like table rows. I created a basic example:

```
var domo = require('domo');

var fruits = [];
fruits.push("banana", "apple", "peach");

var document = DOCUMENT({type: "html"},
  HTML(
    HEAD(
      TITLE("bla"),
      SCRIPT({src: "/script.js"})
      ),
    BODY(
      TABLE(
        THEAD( TR( TD("Predicate"), TD("Object"))),
        TBODY(
          fruits.forEach(function(value, index) {
            console.log("I am in forEach");
            console.log("Value: "+value);
            console.log("Key: "+index);
            TR(
              TD(index),
              TD(value)
              )
          })
          )
        )

      )
    )).outerHTML;

console.log(document); 
```

This currently results in this output:

```
<!DOCTYPE html>
<html>
    <head>
        <title>
            bla
        </title>
        <script src="/script.js" type="text/javascript">
</script>
    </head>
    <body>
        <table>
            <thead>
                <tr>
                    <td>
                        Predicate
                    </td>
                    <td>
                        Object
                    </td>
                </tr>
            </thead>
            <tbody>
                <!--undefined-->
            </tbody>
        </table>
    </body>
</html> 
```

If I get that correctly I cannot access the scope of domo within the forEach loop. Is this the right interpretation and what would be the correct working way to do that?

**Solution**:

Thanks to the hint from Bergi and a fix by Jed Schmidt this fragment now works (domo >=0.5.5):

```
TBODY( fruits.map(function(value, index) {
  return TR(
    TD(String(index)),
    TD(value)
    );
}))
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:16:33.283

[`forEach`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach) returns `undefined` after having iterated the array.

I don't know whether those functions accept arrays as arguments, but you might try [`map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map):

```
TBODY( fruits.map(function(value, index) {
    console.log("I am in map");
    console.log("Value: "+value);
    console.log("Key: "+index);
    return TR(
//  ^^^^^^ dont forget this
        TD(index),
        TD(value)
    );
})) 
```

# excel - 获得卓越以不断“寻求目标”

> ID：13362741
> 
> 赞同：4
> 
> 时间：2012-11-13T14:42:48.533
> 
> 标签：excel

我有一个包含大量输入的电子表格，但只有一个输出（价格）。

我想让 excel 自动更新其中一个输入（称为输入 1），以便在调整其他输入时保持价格不变。

我知道“目标搜索”可以做到这一点，但我不想每次调整另一个输入时都必须重新运行目标搜索。我特别不想这样做，因为我想使用情景分析来单独调整其他输入，并查看输入 1 需要如何更改以保持输出（价格）不变。

有人在这里问了类似的问题：[需要 Excel 目标搜索逻辑](https://stackoverflow.com/questions/12698293/need-excel-goal-seek-logic)

但是，该帖子没有给出有用的答案。

如果有人可以帮忙，将不胜感激。

谢谢，

提摩太

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:02:36.843

您可以在 Worksheet_Change 事件中编写一个调用 Range.GoalSeek 方法的 VBA 函数。当您更改另一个单元格时，目标搜索代码应自动运行。

这是有关该方法的文档：http: [//msdn.microsoft.com/en-us/library/office/bb209907 (v=office.12).aspx](http://msdn.microsoft.com/en-us/library/office/bb209907%28v=office.12%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-22T16:47:23.820

如果方程可以设置为在定点迭代下收敛，则可以使用循环参考自动求解方程。

# gem - bundler/capistrano 没有安装正确的 ruby 版本的 gem

> ID：13362742
> 
> 赞同：5
> 
> 时间：2012-11-13T14:42:49.000
> 
> 标签：gem, ruby-on-rails-3.2, rvm, capistrano

我正在尝试使用 Capistrano 在服务器上部署我的第一个应用程序，但我对**管理 gemsets 和 ruby​​ 版本有点迷茫**。

这些是我的（服务器和工作站）版本：

*   导轨 3.2.8
*   RVM 1.16.17
*   宝石 1.8.24
*   捆绑器 1.2.1
*   pg 宝石 0.14.1

我的宝石是：

ruby-1.9.3-p194 的 Gemsets（在 /usr/local/rvm/gems/ruby-1.9.3-p194 中找到）

*   （默认）
*   全球的
*   => rail3dev20120606

我将默认 gemset 设置为：

```
rvm use 1.9.3-p194@rail3dev20120606 --default --passenger 
```

当我运行：

```
cap bundle:install 
```

任务以成功结束，但是当我执行以下操作时：

```
gem list 
```

尽管我的 Gemfile 中存在许多**缺失的宝石。**当我在**/var/www/opf/shared/bundle/ruby/**中检查我的 gem 时，我在 /var/www/opf/shared/bundle/ruby/1.9.1/gems/ 中找到一个名为**1.9.1**的文件夹我可以喜欢所有我需要的宝石（在 Gemfile 中指定）。我确定 ruby​​ 版本有问题，但我该如何解决呢？

目前，如果我执行任何 rake 命令，我会遇到 ruby​​ 崩溃 [Bug] 分段错误，因为它尝试访问数据库并使用 postgresql_adapter ：

```
/var/www/opf/shared/bundle/ruby/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/postgresql_adapter.rb:1213: [BUG] Segmentation fault 
```

我认为由于缺少许多 gem，因此必须有一些未验证的 gem 依赖项，并且可能一个 gem 使用的是不兼容的 ruby​​ 版本 1.9.1，尽管它期望使用 1.9.3。

我认为问题在于管理 ruby​​ 版本和 gems。我肯定会与 gemset 和我的 capistrano 部署进行一些混合。

我缺少经验和信息。有人可以告诉我如何在服务器上处理这个问题吗？最佳做法是什么？

**我想如何更新我的 ruby​​ 版本？使用 Capistrano deploy.rb 吗？手动？有/没有 rvm ？我看到一个新版本的ruby 1.9.3-p327 刚刚发布。**

**我应该使用 gemset 吗？我的 deploy.rb 中的 :rvm_ruby_string 怎么样。拼写正确还是应该删除 p194 部分？我应该删除 :rvm_ruby_string 吗？留着它 ？使用 .rvmrc 文件 ???**

**我真的迷路了，欢迎提供一些帮助。**

无论如何，这是我的 config/deploy.rb ：

```
require 'bundler/capistrano'
require File.join(File.dirname(__FILE__), 'deploy') + '/capistrano_database'

set :rvm_type, :system

set :rvm_ruby_string, 'ruby-1.9.3-p194@rail3dev20120606'
require 'rvm/capistrano'

set :application, 'opf'
set :deploy_to, '/var/www/opf'
set :rails_env, 'production'
set :user, 'the_user'
set :use_sudo, false

set :group_writable, false
set :scm, :git
set :repository,  'git@github.com:user/opf.git'
set :branch, 'master'

default_run_options[:pty] = true

set :deploy_via, :remote_cache

server '192.168.5.200', :web, :app, :db, :primary => true

# If you are using Passenger mod_rails uncomment this:
namespace :deploy do
  task :start do ; end
  task :stop do ; end
  task :restart, :roles => :app, :except => { :no_release => true } do
    run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
  end
end 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T22:58:10.747

gems 已安装，但它们是在 bundler 的上下文中安装的：

```
bundle exec gem list 
```

这是因为 bundler 将其设置存储在`.bundle/config`其中并且没有安装共享 gem，而是所有 gem 都安装在每个项目的单独目录中，将其视为就地 gemset。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T20:44:03.910

这篇[文章](https://stackoverflow.com/questions/7628763/rvm-gemset-bundler-capistrano-in-production)帮助我了解了管理 gem 的两种可能性：

*   [将 gems 放在 app 文件夹中](http://web-l.nl/posts/5-setting-up-a-rails-production-server-part-1)
*   [将宝石放在单独的宝石组中](http://blog.ninjahideout.com/posts/the-path-to-better-rvm-and-passenger-integration)

# spring - Spring Integration：如果一起执行，测试方法会失败

> ID：13362743
> 
> 赞同：0
> 
> 时间：2012-11-13T14:42:55.490
> 
> 标签：spring, unit-testing, spring-integration

我的应用程序的工作流程是添加一个消息头，然后根据另一个头路由消息并将消息发送到下游。我对此工作流程的测试单独成功，但在一起执行时不会成功，尽管我似乎已经重置了所有相关对象。

弹簧集成工作流程：

```
<int:header-enricher input-channel="workflowStart" output-channel="headerEnriched">
    <int:header name="correlationId" expression="headers.id.toString()" />
</int:header-enricher>

<int:header-value-router input-channel="headerEnriched" header-name="messageType">
    <int:mapping value="stp" channel="stpChannel" />
    <int:mapping value="nonStp" channel="nonStpChannel" />
</int:header-value-router>

<int:publish-subscribe-channel id="nonStpChannel"   />
<int:publish-subscribe-channel id="stpChannel" apply-sequence="true"/>

<int:chain input-channel="nonStpChannel" output-channel="systemChannel1" id="nonStpChainBlockA"> 
    <!-- do something -->
</int:chain> 

<int:chain input-channel="stpChannel" output-channel="systemChannel3" id="stpChainBlockA"> 
    <!-- do something -->
</int:chain> 
```

Java 测试类：

```
@Autowired 
    private MessageChannel workflowStart;
    @Autowired
    private MessageHandler systemChannel1OutputHandler; 
    @Autowired
    private MessageHandler systemChannel3OutputHandler; 

    @Value("/xml/tradeStp.xml")
    private Resource stpMessageResource;
    private String stpMessage;
    @Value("/xml/tradeNonStp.xml")
    private Resource nonStpMessageResource;
    private String nonStpMessage;

    @Before
    public void setup() throws Exception {
        reset(systemChannel1OutputHandler);
        reset(systemChannel3OutputHandler);
        stpMessage = IOUtils.toString(stpMessageResource.getInputStream());
        nonStpMessage = IOUtils.toString(nonStpMessageResource.getInputStream());
    }

    @Test
    public void nonStpMessageWorkflow1Test() {
        Message<String> m = MessageBuilder
                .withPayload(nonStpMessage)
                .setHeaderIfAbsent("messageType", "nonStp")
                .build();       
        workflowStart.send(m);
        verify(systemChannel1OutputHandler, times(1)).handleMessage(any(Message.class));    
    }

    @Test
    public void stpMessageWorkflow2Test() {
        Message<String> m = MessageBuilder
                .withPayload(stpMessage)
                .setHeaderIfAbsent("messageType", "stp")
                .build();
        workflowStart.send(m);
        verify(systemChannel3OutputHandler, times(1)).handleMessage(any(Message.class));
    } 
```

和测试上下文：

```
<import resource="classpath:/spring/workflow.xml"/>

<int:outbound-channel-adapter channel="systemChannel1" ref="systemChannel1OutputHandler" method="handleMessage"/>
<bean id="systemChannel1OutputHandler" class="org.mockito.Mockito" factory-method="mock">
    <constructor-arg value="org.springframework.integration.core.MessageHandler"/>
</bean> 
<int:outbound-channel-adapter channel="systemChannel3" ref="systemChannel3OutputHandler" method="handleMessage"/>
<bean id="systemChannel3OutputHandler" class="org.mockito.Mockito" factory-method="mock">
    <constructor-arg value="org.springframework.integration.core.MessageHandler"/>
</bean>

<int:outbound-channel-adapter channel="headerEnriched" ref="headerEnricherOutputHandler" method="handleMessage"/>
<bean id="headerEnricherOutputHandler" class="org.mockito.Mockito" factory-method="mock">
    <constructor-arg value="org.springframework.integration.core.MessageHandler"/>
</bean> 
```

如果我同时运行两个测试，则第一个测试成功，而第二个测试失败并显示以下消息：

```
 Wanted but not invoked:
messageHandler.handleMessage(<any>);
-> at com.company.integration.com.company.export.config.InterfaceTest.stpMessageWorkflow2Test(InterfaceTest.java:81)
Actually, there were zero interactions with this mock. 
```

我尝试以各种方式进行调试。问题似乎就在 header-value-router 之后和链之前。第二个测试的最后一个调试输出是 headerEnriched 通道上的“postSend”。非常欢迎任何建议。

更新：我没有在我的上下文中包含一个额外的 outputHandler 用于另一个测试，我现在已经包含了。通过删除 headerEnricherOutputHandler 所有测试运行良好。但是，我仍然不明白为什么在一起运行测试时这会导致问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:52:16.307

我在使用任何（类）的 Mockito 方面遇到了问题。你在哪里

```
verify(systemChannel3OutputHandler, times(1)).handleMessage(any(Message.class)); 
```

如果您删除课程，它是否可以使用，例如：

```
verify(systemChannel3OutputHandler, times(1)).handleMessage(any()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T05:14:39.300

我无法用以下内容重现您的问题，这与您的测试似乎没有本质上的不同......

```
<int:header-value-router input-channel="headerEnriched" header-name="messageType">
    <int:mapping value="stp" channel="stpChannel" />
    <int:mapping value="nonStp" channel="nonStpChannel" />
</int:header-value-router>

<int:publish-subscribe-channel id="nonStpChannel"   />
<int:publish-subscribe-channel id="stpChannel" apply-sequence="true"/>

<int:chain input-channel="stpChannel" output-channel="systemChannel1">
    <int:transformer expression="'bar'"/>
</int:chain>

<int:chain input-channel="nonStpChannel" output-channel="systemChannel3">
    <int:transformer expression="'bar'"/>
</int:chain>

<int:channel id="systemChannel1" />
<int:channel id="systemChannel3" />

<int:outbound-channel-adapter channel="systemChannel1" ref="systemChannel1OutputHandler" method="handleMessage"/>
<bean id="systemChannel1OutputHandler" class="org.mockito.Mockito" factory-method="mock">
    <constructor-arg value="org.springframework.integration.core.MessageHandler"/>
</bean> 
<int:outbound-channel-adapter channel="systemChannel3" ref="systemChannel3OutputHandler" method="handleMessage"/>
<bean id="systemChannel3OutputHandler" class="org.mockito.Mockito" factory-method="mock">
    <constructor-arg value="org.springframework.integration.core.MessageHandler"/>
</bean> 
```

.

```
@ContextConfiguration
@RunWith(SpringJUnit4ClassRunner.class)
public class Foo {

    @Autowired
    private MessageChannel headerEnriched;

    @Autowired
    private MessageHandler systemChannel1OutputHandler;

    @Autowired
    private MessageHandler systemChannel3OutputHandler;

    @Test
    public void test10() {
        Message<String> foo = MessageBuilder.withPayload("foo")
                .setHeader("messageType", "stp").build();
        headerEnriched.send(foo);
        verify(systemChannel1OutputHandler).handleMessage(any(Message.class));
    }

    @Test
    public void test30() {
        Message<String> foo = MessageBuilder.withPayload("foo")
                .setHeader("messageType", "nonStp").build();
        headerEnriched.send(foo);
        verify(systemChannel3OutputHandler).handleMessage(any(Message.class));
    }
} 
```

两项测试对我来说都运行良好。

# internet-explorer-10 - IE10 和 showModelDialog 标题显示#Name？

> ID：13362748
> 
> 赞同：3
> 
> 时间：2012-11-13T14:43:06.483
> 
> 标签：internet-explorer-10

我们正在以 IE10（兼容模式）测试我们当前的 Web 应用程序。在整个应用程序中，我们使用 showModelDialog 方法，并且对话框消息的标题总是以 #Name 结尾？即如果页面的标题是我的，那么对话框窗口上出现的标题是My#Name?。请使用下面的链接查看问题的实际效果。 [http://samples.msdn.microsoft.com/workshop/samples/author/dhtml/refs/showModalDialog2.htm](http://samples.msdn.microsoft.com/workshop/samples/author/dhtml/refs/showModalDialog2.htm)

使用下拉菜单设置对话框高度，然后单击“Push To Create”按钮。屏幕上出现的对话框标题以#Name? 结尾。在早期版本的 IE 中，它曾经是网页对话框。

有没有办法摆脱#Name？而且我不想在标题后使用空格，因为标题末尾仍然出现...。

谢谢，

# mysql - 使用 3 个表按 2 个值排序

> ID：13362751
> 
> 赞同：1
> 
> 时间：2012-11-13T14:43:12.230
> 
> 标签：mysql, sql, multiple-tables

抱歉，如果这是一个愚蠢的问题，我搜索了一下，找不到像我这样的例子的解决方案。

我有一个带有查询的小型照片共享应用程序，它输出用户的 ID 号，按他们拥有的关注者数量排序。我想稍微更改查询，以便如果用户有相同数量的关注者，他们将按他们上传的照片数量排序。

我将如何编辑我的查询？我所做的所有尝试都没有成功。

当前查询如下所示：

```
SELECT Users.ID, COUNT(User_Followers.FollowingUserID)
               AS follower_count FROM Users
               LEFT JOIN User_Followers ON Users.ID = User_Followers.FollowingUserID
               GROUP BY Users.ID
               ORDER BY follower_count DESC 
```

User_Followers 表如下所示：

```
ID     UserID     FollowingUserID    DateFollowed 
```

照片表如下所示：

```
ID     PostedByUserID     DatePosted 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:52:45.043

```
SELECT  Users.ID,   
        COUNT(User_Followers.FollowingUserID) AS follower_count 
FROM    Users
        LEFT JOIN User_Followers 
            ON Users.ID = User_Followers.FollowingUserID
        LEFT JOIN
        (
            SELECT PostedByUserID, COUNT(*) postCount
            FROM photos
            GROUP BY PostedByUserID
        ) a ON Users.ID = a.PostedByUserID
GROUP BY Users.ID
ORDER BY follower_count DESC, a.postCount DESC 
```

# c++ - 服务阻止 Windows 启动

> ID：13362753
> 
> 赞同：1
> 
> 时间：2012-11-13T14:43:20.497
> 
> 标签：c++, windows, service, startup

我们已经自动启动服务，在某些情况下会花费大量时间加载必要的数据，比如说 10 分钟。在此期间，它按预期工作（处理启动所需的一些巨大数据文件）。我通过 C++ SetServiceStatus 函数报告进度，它工作正常。

该服务不依赖于任何东西，并且只有一个依赖项，即我们自己的服务。它在这 10 分钟后启动，它需要第一个“服务器”服务完全运行才能接受请求。

我以为 Windows 会启动所有其他自动服务（通常在不到 10 分钟的时间内）然后开始正常工作，但系统在启动期间完全被阻止（我无法登录计算机或 ping 计算机），直到这个特定的服务是已启动（由 SetServiceStatus 报告 SERVICE_RUNNING）。当 out 服务完全启动时，其他缺少的系统服务（网络、远程桌面等所需的，非常随机）也将启动。这是正常行为吗？为什么非依赖进程（如远程桌面、网络连接等）在等待这个进程？我错过了什么吗？

我试图添加一些依赖项来推迟我的服务的启动，但我最终得到了许多依赖项和行为仍然以某种方式随机（因为服务的顺序是随机的）。有时我可以登录，但例如“开始”按钮仅在我的服务启动 10 分钟后才开始工作。我不确定要依赖的“最后一个服务”是什么以及要在我的依赖列表中包含哪些服务，并且在某些计算机上可以禁用此服务，并且可能会带来新问题...所以我不喜欢此解决方案非常。

另一个选项是我们服务的延迟启动选项。当所有其他自动服务正在运行时，这应该启动服务。好吧，这工作正常，Windows 启动，计算机运行和响应，我们的服务已启动，但性能很差，比平时慢很多倍，似乎延迟启动的服务优先级低得多或类似的东西。

我目前唯一的解决方案是向系统报告我的服务正在运行（通过 SetServiceStatus 函数），但要继续加载（这有效，我测试过）。但是我们的依赖服务有问题，因为它需要在第一个真正准备好时启动。它可以解决，但我仍然想知道这怎么可能，如果有什么我可以用来保持自动启动服务的当前状态，当它真正完全启动并准备好工作时报告“启动”。感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-07T14:22:03.993

尽快设置SERVICE_RUNNING，然后在后台继续处理。使您的其他服务对处于运行状态但尚未准备好服务的第一个服务具有弹性。服务处于启动状态的时间越长，我们从不同 Windows 版本中得到的问题就越多。

# ruby - 安装 ruby gem johnson osx 时出错

> ID：13362755
> 
> 赞同：0
> 
> 时间：2012-11-13T14:43:22.810
> 
> 标签：ruby, gem

我正在尝试为示例应用程序安装 gem johnson，但事实证明这很困难。我安装了 ruby​​ 版本 ruby​​ 1.9.3p286（2012-10-12 修订版 37165）[x86_64-darwin12.2.0]，并尝试安装 johnson 版本 2.0.0.pre3（失败的捆绑安装说明）。在尝试安装 johnson 时，我得到了大量的输出，所以现在我只给出第一行并希望它足够了。

```
sudo gem install johnson -v '2.0.0.pre3'
Building native extensions.  This could take a while...
ERROR:  Error installing johnson:
ERROR: Failed to build gem native extension. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T17:41:20.027

## Ruby 1.9 不兼容

我可以使用 ruby​​ 1.9.3p125 在我的 Mac 上重现此问题。

据我所知，Johnson 与 Ruby 1.9 不兼容。这个问题是两年前提出的[https://github.com/jbarnette/johnson/issues/30](https://github.com/jbarnette/johnson/issues/30)，但是该项目在过去三年中没有更新。在上面的问题链接上，他们讨论了一个实验性的 1.9.1 分支，这可能**不是**你想要的。

在 Mountain Lion 上切换到我的系统 ruby​​ (1.8.7) 允许我安装 gem：

```
$ rvm system
$ ruby --version
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]
$ sudo gem install johnson
Building native extensions.  This could take a while...
Successfully installed johnson-1.2.0
1 gem installed 
```

# javascript - 使用动态信息渲染视图

> ID：13362757
> 
> 赞同：0
> 
> 时间：2012-11-13T14:43:29.733
> 
> 标签：javascript, html, backbone.js, ejs

首先，请原谅我的幼稚问题。我知道有一个简单的答案，但我目前正在同时学习，`JavaScript`并且`BackBone`遇到了一些问题。

我只是想从我的 javascript 文件中的信息集合中将一个表添加到我的视图中。这是我的js文件：

```
(function(window,app,$){

    app.views.itemsIndex = Backbone.View.extend({
        id:"items-index",

        initialize:function(){

        },

        events:{

        },

        render:function(){
            template = new EJS({
                url:"js/templates/patron/items/itemsIndex.ejs"
            });

            this.$el.html(template.render());

            this.createDummies()

            return this;
        },

        createDummies:function(){

            var bookCollection = new app.collections.books();

            for (var i = 0; i < 10; i++) {
                var book = new app.models.book({title : 'title ' + i});
                bookCollection.add(book);

                var item = new app.views.itemsItem();
                this.$el.append(item.render().el);
            };

            console.log(bookCollection);
        }
    });

})(window,window.circulationApp || {},$) 
```

当我尝试使用错误**Uncaught ReferenceError: book is not defined渲染视图时出现错误**

下面是我的 ejs 文件：

```
<td>
    <div class="td-wrap">
        <%= book.escape('title') %></td>
    </div><!-- .td-wrap --> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:44:57.077

不了解整个事情，但据我了解，您想通过`<td>`元素呈现书籍集合

看起来 EJS 支持循环，那么为什么不直接将 Collection 插入到视图中，然后循环遍历书籍呢？

```
<% for (var i = 0; i < books.length; i++) {%>
    <%= books[i].escape('title'); %>
<% } %> 
```

`createDummies`将返回 Collection ：

```
createDummies: function() {
    var bookCollection = new app.collections.books();
    for (var i = 0; i < 10; i++) {
        var book = new app.models.book({title : 'title ' + i});
        bookCollection.add(book);
    };
    return bookCollection;
} 
```

渲染它：

```
var tpl = new EJS({
    url:"js/templates/patron/items/itemsIndex.ejs"
});

var booksCollection = this.createDummies();

this.$el.html(tpl.render({books: booksCollection})); 
```

理想情况下，在 Backbone 中，只有该`render`方法应该用于填充`$el`HTML。

# c# - 如何提高在 asp.net mvc 中返回到视图和输出的 5000 个对象的列表的性能？

> ID：13362758
> 
> 赞同：1
> 
> 时间：2012-11-13T14:43:29.857
> 
> 标签：c#, asp.net, asp.net-mvc

我正在开发的应用程序有一个医生查询列表。这是一个带有 ID 的简单表单字段，此查找将允许用户查看整个医生列表并将其添加到字段中。我们在控制器中加载列表，然后将列表返回到视图，其中数据在表格中格式化。

```
<div id="physicians-selection-dialog">
    <table id="list">
    <thead>
        <tr>
            <td>#</td>
            <td>First Name</td>
            <td>Last Name</td>
            <td>Department</td>
            <td>State Lic</td>
        </tr>
    </thead>
    <tbody>
    @foreach (var physician in Model.Physicians)
    {
        <tr><td><button class="list-select" value="@physician.PhysFxId">@physician.PhysFxId</button></td><td>@physician.PhysFirstName</td><td>@physician.PhysLastName</td><td>@physician.PhysDepartment</td><td>@physician.PhysStateLic</td></tr>
    }
    </tbody>
    </table>
</div> 
```

用户单击一个链接，该链接显示一个带有上述 html 的 jQuery 对话框，供所有 5k 医生使用。这很好用，但是渲染速度非常慢。我需要提高性能，但不确定我应该做什么？

1.  我是否应该缓存医生列表，以便每次加载视图时都不需要继续加载 5k 对象？该列表正在从数据库中加载。这个列表永远不会或很少改变，所以不用担心。
2.  有没有办法缓存html输出？
3.  对数据进行分页，但我认为他们需要一个自上而下的列表。滚动比继续单击下一步更快。

我怎样才能在这里提高性能？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T14:46:36.627

您真正应该做的只是首先从数据库中检索所需的医生。5000 项的清单是没有意义的，没有人会看它。

您可以实现一个分页系统，该系统将页码、页面大小和排序标准等内容传递给存储过程或数据层方法。然后，此方法将仅从您的数据库中检索适用的项目。通过这种方式，您将节省 DB 处理时间、网络传输时间、业务对象创建时间和渲染时间。

# html - jquery 移动应用程序中的元素高度：使用什么单位？

> ID：13362760
> 
> 赞同：0
> 
> 时间：2012-11-13T14:43:35.143
> 
> 标签：html, css, jquery-mobile, mobile, responsive-design

我正在 jquery mobile 中构建 phonegap 应用程序，需要在某些页面元素上设置高度。最好使用什么单位？我希望它不是像素，可能是百分比，但我很难找到权威的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:46:03.030

rem 单位最适合移动设备。检查此[http://snook.ca/archives/html_and_css/font-size-with-rem](http://snook.ca/archives/html_and_css/font-size-with-rem)了解更多信息

# css - 背景图像在 IE7/8 中消失

> ID：13362765
> 
> 赞同：1
> 
> 时间：2012-11-13T14:43:58.230
> 
> 标签：css, image, internet-explorer-8, background, internet-explorer-7

我们目前正在修复我们的公司网站，但我们在 IE7 和 8 中遇到了一些背景图像的问题。这些页面在 webkit 和 Fox 中呈现良好，但在 IE 中背景消失了。还没有完全弄清楚问题 - 层？文档模式？定位？- 但我希望另一双眼睛可以提供帮助。这里的页面：

[http://bmobile.co.tt/plans/](http://bmobile.co.tt/plans/) 和 [http://bmobile.co.tt/services/](http://bmobile.co.tt/services/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:53:53.060

从您的 style.css 中删除此属性样式

```
 .plans #wrap .contentlock{
      progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#f4f4f4',GradientType=0 )
    } 
```

# jquery - 我需要使用准备好的事件来进行 Dom 操作吗？

> ID：13362767
> 
> 赞同：0
> 
> 时间：2012-11-13T14:44:10.353
> 
> 标签：jquery, html, dom

我想知道 - 我是否需要使用`$(document).ready()`jQuery 等准备好的事件来进行 DOM 操作。例如，我有一个 javascript 函数：

```
function handler(input,id) {        
    $(document).ready(function(){
        document.getElementById(input).value = id;
        document.search_form.submit();  
    });

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T14:46:31.893

不，上帝不。不要那样做。`$(document).ready()`永远不应该在函数内部。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T14:45:43.173

不，这是没有必要的。相反，您可以将 JavaScript 放在文档的最末尾，然后再进行`</body>`标记。

您也可以使用该`window.onload`事件，尽管我不推荐它，因为在加载所有图像之前它不会触发，这可能是加载 DOM 之后的很长时间。

不过，这三种方法中的一种是最好的主意，因为在这些元素完全加载到浏览器中之前，您不能使用 JavaScript 来操作 DOM 元素。

也就是说，可能没有充分的理由将其放入`$(document).ready`另一个函数中。在几乎所有情况下，您都希望`$(document).ready`将其他 JavaScript 代码包围起来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T14:50:43.777

关于您的代码的一些评论：

```
1\. function handler(input,id) {        
2\.    $(document).ready(function(){
3\.        document.getElementById(input).value = id;
4\.        document.search_form.submit();  
5\.    });
6.} 
```

不需要第 2 行和第 5 行 - 因为这是一个函数，将在加载时调用而不是执行，因此您不需要准备好的处理程序。该行表示当它是`$(document).ready(function() {`时执行以下代码- 如果它在像你这样的函数内部是不需要的（但仍然可以工作）。[你可以在这里](http://api.jquery.com/ready/)阅读更多`DOM``ready``ready()`

第 3 行可以更改`$('#'+input).val(id);`为此使用 jQuery [ID 选择器](http://api.jquery.com/id-selector/)和[`val()`](http://api.jquery.com/val/)更改值的函数。

结束于

```
function handler(input,id) {        
  $('#'+input).val(id);
  document.search_form.submit();  
} 
```

根据函数名称，您可能会更改代码多一点......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T14:52:23.563

不，你没有。这取决于您何时要操作 DOM。这意味着你应该考虑你的 javascript 应该放在哪里，在`<body>`.

# ruby-on-rails - Rails - 在控制器或视图中使用类方法更好吗

> ID：13362768
> 
> 赞同：2
> 
> 时间：2012-11-13T14:44:11.380
> 
> 标签：ruby-on-rails, rails-activerecord

在我的 rails 模型中，我定义了一个类和一个方法来返回一个项目名称数组。现在我的问题是，我应该在我的视图中使用 Project.names 数组是否正确，或者我应该在控制器中生成一个数组并传递一个实例变量。

```
class Project < ActiveRecord::Base

...snip...

  def self.names
    Project.select(:name).map {|x| x.name }
  end

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:54:36.847

我一定会坚持在控制器中填充实例变量。顺便说一句，关于您的代码：

```
Project.select(:name).map {|x| x.name } 
```

可以重构为：

```
Project.select(:name).map(&:name) 
```

这个，可以重构为：

```
Project.pluck(:name) 
```

爱鲁比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:22:17.250

从实际的角度来看，在视图层和控制器逻辑之间划清界限始终是一个艰难的决定。用以下内容填充您的控制器可能是有问题的：

```
# controller
@project_names = Project.names

# view
<%= @project_names.join(", ") %> 
```

只能`@procject_names`在视图中使用。

但是，将代码从视图中保留下来会让您**以后**有机会在不更改视图的情况下执行此操作：

```
# Controller is updated
@project_names = Project.names

# Show only matching projects
if params[:search]
  @project_names = @project_names.select{|n| n =~ /#{params[:search]}/}
end

# view - still the same
<%= @project_names.join(", ") %> 
```

另外，看看基于 [装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)和[MVVM模式的](http://en.wikipedia.org/wiki/Model_View_ViewModel)**ViewModel**的[Draper](https://github.com/drapergem/draper) gem 。

 **使用 Draper，您甚至可以使您的控制器保持清洁，并根据需要为同一对象使用**多个装饰器（例如，一个用于 Web，另一个用于邮件程序），同时仍使用****相同的视图代码**来呈现输出。

放置在装饰器中的常见事情是**本地化日期**，这取决于登录用户，因此不适合视图，但会使控制器与视图层逻辑混乱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T14:46:33.043

通常认为最佳实践是将数据的拉取和数据的显示适当地分开，其中视图仅负责显示该数据。我肯定会说在控制器中生成数组并将其传递给您的视图会是一个更好的主意。

MVC 是一个相当大的话题 - 有关更多信息，请查看 Rails 指南： http: [//guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)**

# eclipse - ClearCase 快速差异日食

> ID：13362769
> 
> 赞同：1
> 
> 时间：2012-11-13T14:44:19.043
> 
> 标签：eclipse, diff, clearcase

是否可以在 Eclipse 中为 Clearcase 启用快速差异？

我使用插件

```
Rational ClearCase Remote Client for Eclipse Import 7.1.0.v201001271035--08422A2_242663 com.ibm.rational.clearcase.ccimport.feature.feature.group 
```

和

```
Rational ClearCase SCM Adapter  7.6.0.v201105111445 com.rational.clearcase.feature.group 
```

在

Windows -> Preferences -> General -> Editors -> Text Editors -> Quick Diff -> Use this reference source

不是 ClearCase 的选择。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:59:52.110

["Quick Diff"](http://eclipse.dzone.com/articles/eclipse-local-history-quick) itself isn't available in Eclipse SCM adapter:

![quick diff](../Images/f59598e9719f47a68e2f5e354f5a44d3.png)

That leaves you with the possibility to define *external* diff tools and make them open when you do a "Compare with previous" from Eclipse.
See for instance:

*   "[How do I integrate Beyond Compare with ClearCase?](https://stackoverflow.com/questions/3297834/how-do-i-integrate-beyond-compare-with-clearcase/3298184#3298184)", or
*   "[Any way to use a custom diff tool with cleartool/clearcase?](https://stackoverflow.com/questions/375398/any-way-to-use-a-custom-diff-tool-with-cleartool-clearcase/375437#375437)"

* * *

Note: with ClearCase 8.0, the RCE (Rational ClearTeam Explorer) is preferred to the Eclipse SCM Adapter, both for CCRC (ClearCase Remote Client) and full ClearCase usage.
See "[About Rational ClearCase SCM Adapter in Rational ClearCase version 8.0](http://www-01.ibm.com/support/docview.wss?uid=swg21589163)".
And "[Using the Rational ClearTeam Explorer for Eclipse](http://publib.boulder.ibm.com/infocenter/cchelp/v8r0m0/index.jsp?topic=/com.ibm.rational.clearcase.ccrc.help.doc/topics/t_ccrc_eclipse.htm)" doesn't show any "quick diff" feature either.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:46:23.450

Eclipse 的 ClearCase 插件不支持快速比较。

# ruby - rspec 错误 (LoadError)

> ID：13362772
> 
> 赞同：0
> 
> 时间：2012-11-13T14:44:33.557
> 
> 标签：ruby, rspec

我正在运行 rspec 命令

```
bundle exec rspec spec/requests 
```

导致错误：

```
ms$ bundle exec rspec spec/requests/ms/.rvm/gems/ruby-1.9.3-p286/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in `load': cannot load such file -- /Users/ms/Dropbox/Ruby/Code/<appname>/spec/requests/spec/requests (LoadError) 
```

为简单起见，我将我的应用程序的名称替换为`<appname>`. 我可以看到下面的路径`<appame>`是重复的 spec/request/spec/requests

我不知道我做了什么（什么都没有？）让这个自动开始这条错误的路径。

当我测试模型时，它是这样的：

```
cannot load such file -- /Users/i814509/Dropbox/Ruby/Code/<appname>/spec/requests/spec/models (LoadError) 
```

再次自动在我要指定的目录之前查找规范/请求目录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:12:20.603

您指定了规范/请求，但它似乎已经是默认值：
只需运行`bundle exec rspec`

另外，如果你配置了你的环境，或者不使用 rvm/pik，你可以运行`rspec`

# android - Android 监听没有 UUID 的连接

> ID：13362774
> 
> 赞同：2
> 
> 时间：2012-11-13T14:44:38.027
> 
> 标签：android, bluetooth, connect, uuid

我编写了一个使用蓝牙传输数据的安卓游戏。我从 ADK 附带的蓝牙聊天应用程序中复制了代码。我的手机似乎无法连接 UUID，所以我想用其他方法替换它。我已经用

```
Method m = device.getClass().getMethod("createRfcommSocket", new Class[] {int.class});
tmp = (BluetoothSocket) m.invoke(device, 1); 
```

现在我想知道我如何才能听到这种联系？目前有读

```
tmp = mAdapter.listenUsingRfcommWithServiceRecord(NAME_SECURE,MY_UUID_SECURE); 
```

但这显然需要发送 UUID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:25:32.857

感谢史密斯先生为我提供答案。通过一些研究，我能够找到另一个具有相同主题的[StackOverflow 问题](https://stackoverflow.com/questions/6480480/rfcomm-connection-between-two-android-devices)和[一个很好的源文件](http://code.google.com/p/android-bluetooth/source/browse/branches/two_dot_o/AndroidBluetoothLibrary/src/it/gerdavax/easybluetooth/LocalDevice2Impl.java?r=58)，其中包含我正在寻找的解决方案。

我基本上要做的是让 BluetoothAdapter 与`private BluetoothAdapter adapter = BluetoothAdapter.getDefaultAdapter();`然后侦听与

```
Method m = adapter.getClass().getMethod("listenUsingRfcommOn", new Class[] { int.class });
BluetoothServerSocket tmp = (BluetoothServerSocket) m.invoke(adapter, 1); 
```

# ruby-on-rails - Ruby on Rails 路由：具有更多参数的命名空间

> ID：13362778
> 
> 赞同：7
> 
> 时间：2012-11-13T14:44:51.747
> 
> 标签：ruby-on-rails, ruby, namespaces, routes

我有一个命名空间“商店”。在那个命名空间中，我有一个资源“新闻”。

```
namespace :shop do
  resources :news  
end 
```

我现在需要的是我的“新闻”路线可以获得一个新参数：

```
/shop/nike (landing page -> goes to "news#index", :identifier => "nike")
/shop/adidas (landing page -> goes to "news#index", :identifier => "adidas")
/shop/nike/news
/shop/adidas/news 
```

这样我就可以得到商店并过滤我的新闻。

我需要这样的路线：

```
/shop/:identfier/:controller/:action/:id 
```

我测试了许多变化，但我无法让它运行。

任何人都可以给我一个提示？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-24T06:23:05.583

您可以使用`scope`.

```
scope "/shops/:identifier", :as => "shop" do
  resources :news
end 
```

您将在下面获得这些路线：

```
$ rake routes
shop_news_index GET    /shops/:identifier/news(.:format)          news#index
                POST   /shops/:identifier/news(.:format)          news#create
  new_shop_news GET    /shops/:identifier/news/new(.:format)      news#new
 edit_shop_news GET    /shops/:identifier/news/:id/edit(.:format) news#edit
      shop_news GET    /shops/:identifier/news/:id(.:format)      news#show
                PUT    /shops/:identifier/news/:id(.:format)      news#update
                DELETE /shops/:identifier/news/:id(.:format)      news#destroy 
```

[http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T14:57:16.390

如果数据库中有耐克、阿迪达斯等，那么最直接的选择是使用匹配。

```
namespace :shop
  match "/:shop_name" => "news#index"
  match "/:shop_name/news" => "news#news"
end 
```

但是，在我看来，商店应该是您的资源。只需创建一个 ShopsController（您不需要匹配的模型，只需一个控制器）。然后你可以做

```
resources :shops, :path => "/shop"
  resources :news
end 
```

现在您可以像这样访问新闻索引页面 (/shop/adidas)：

```
shop_path("adidas") 
```

在 NewsController 中用于`:shop_id`访问商店的名称（是的，即使它是 _id，它也可以是一个字符串）。根据您的设置，您可能希望 news 是一个单一资源，或者 news 方法是一个集合方法。

另外，您确定只是重命名新闻资源不是您想要的吗？

```
resources :news, :path => "/shop" do
  get "news"
end 
```

还要记住，控制器名称和控制器数量不必与您的模型匹配。例如，您可以有一个没有 NewsController 的 News 模型和一个没有 Shop 模型的 ShopsController。如果有意义，您甚至可以考虑将 Shop 模型添加到数据库中。如果这不是您的设置，那么您可能过于简化了您的示例，您应该提供更完整的设置描述。

# objective-c - 为什么即使我更改了浮点变量的值，它也始终为 0

> ID：13362786
> 
> 赞同：-12
> 
> 时间：2012-11-13T14:45:25.297
> 
> 标签：objective-c, ios, cocos2d-iphone, box2d-iphone

我今天遇到了两个有趣的问题。以下是我在编码中所做的

1.在.H文件中，我声明了一个浮点变量“currentPer”和一个CCProgressTime变量“_strengthBar”

2.在UIPanGestureRecognizer的回调函数“processPanGesture()”中，我计算了手指的移动距离，然后更新了CCProgressTime的百分比属性。但是在屏幕上，CCProgressTime的可见部分没有更新，**所以我的第一个问题是为什么CCProgressTime在屏幕上没有更新百分比属性改变了**？

3.最后，我在回调函数 processPanGesture() 中用手指的移动距离更新了变量“currentPer”。**然后在“update”方法中，我打印currentPer，但结果总是“0”，（如果打印_stregnthBar的百分比，即使我在processPanGesture中改变了它的值，它也是“0”）为什么？我的意思是我已经改变了processPanGesture() 中 currentPer 的值。但为什么它不起作用**？如果您仍然不清楚我说的内容，请看屏幕截图。任何帮助对我来说都是非常宝贵的，感谢您的关注！

图1.AppDelegate.appFinishDidLaunchOption(),注册PanGestureRecognizer

图2.GameLayer.H文件

图3.GameLayer.mm ,init(),初始化相关变量

图4.GameLayer.processPanGesture()，手势识别器的回调函数

图 5.GameLayer.update()

![在 AppDelegate 中注册手势内容](../Images/7e875a235076e30c2ba80379b31c6e14.png) ![声明浮点变量](../Images/992f13b8a3c5e9f87d8d6de572ef2369.png)

![初始化 CCProgressTime 变量](../Images/2fcc1a5123aba81c26199d4978c8e35e.png)

![GameLayer 中的 UIPanGestureRecognizer 回调函数](../Images/ed5b4f68efa671759ddf7a754cffc35a.png)

![GameLayer 的 update(),print](../Images/2c5510e1bfb900e85618769e9e0f3efc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:55:30.330

尝试制作它；

```
NSNumber * currentPer; 
```

并使用NSNumber 的*numberWithFloat:(float)value*将浮点值分配给 NSNumber。

并在使用时

```
[currentPer floatValue]; 
```

[这里](http://objcolumnist.com/2009/05/31/nsnumber-what-is-the-point/)简要解释一下为什么要使用 NSNumber。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T13:17:05.880

终于找到原因了：是因为注册PanGestureRecognizer的GameLayer实例A和显示屏幕的GameLayer实例B不是同一个实例。这样processPanGesture()函数只是改变实例A的currentPer，虽然我打印的是实例 B 的 currentPe

# ruby-on-rails - 如何预编译特定文件夹中的所有 css 文件？

> ID：13362787
> 
> 赞同：0
> 
> 时间：2012-11-13T14:45:27.533
> 
> 标签：ruby-on-rails, ruby-on-rails-3, assets, sprockets, precompile

要预编译项目中的所有 css 文件，我可以将其添加到 production.rb：

```
config.assets.precompile << '*.css' 
```

但是我怎样才能在特定文件夹中只添加 css 文件呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:06:18.863

将所有样式表添加到您的`app/assets/stylesheets/application.css`：

```
/*
 *= require_self
 *= require_tree dir_one
 *= require_tree dir_two
 */ 
```

然后它们将被预编译。我认为这是优于使用`config.assets.precompile`.

如果您真的想使用它，那么这个 SO 问题应该会有所帮助：[如何将 config.assets.precompile 用于目录而不是单个文件？](https://stackoverflow.com/questions/12613980/how-do-i-use-config-assets-precompile-for-directories-rather-than-single-files)

# php - Yii updateAll() 将行的当前值加 1

> ID：13362789
> 
> 赞同：0
> 
> 时间：2012-11-13T14:45:30.550
> 
> 标签：php, yii

简单地说，我正在尝试这样做：

```
$widgetsUsed->updateAll(array(
                'position'=>'- 1'
            ),
            "position > {$position} AND sidebar_id = {$sidebar_id}"
         ); 
```

有没有人知道这是否可行，或者提供一些其他建议如何实现这一目标？

很难调试它，因为我无法准确地弥补数据库中正在变化的值。所以我希望这里的任何人都能直接知道如何做到这一点。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:57:04.430

您可以尝试如下

```
Yii::app()->db->commandBuilder->createUpdateCounterCommand('{{myTable}}', array(
  'position' => 1, // -1 for decrementing
  new CDbCriteria(array(
        "condition" => "position > :pos AND sidebar_id = :id",
        "params" => array(
            "pos"=>$position, 
            "id"=>$sidebar_id
        )
    ))
)); 
```

如果你有`higher version of Yii`，那么你可以使用[http://www.yiiframework.com/wiki/282/using-counters-with-activerecord/](http://www.yiiframework.com/wiki/282/using-counters-with-activerecord/)

# php - 防止用户滥用javascript代码

> ID：13362790
> 
> 赞同：2
> 
> 时间：2012-11-13T14:45:30.513
> 
> 标签：php, jquery, ajax, security, encryption

我网站上的用户可以点击一个按钮。如果他们这样做，他们将获得积分奖励。

单击此按钮时，将向服务器发出 AJAX 调用以提供奖励（存储在数据库中）。

该按钮是一个“发推文”按钮，所以我想确保他们真的在发推文。

我的问题是我想确保按钮真的被点击了。由于 javascript 代码对用户来说是完全可见的，我想他们很容易只进行 AJAX 调用而不点击它。

那么，我能做些什么呢？混淆是我唯一的选择，还是我可以加密某些东西，或者使用令牌或其他东西？

如果它可能有帮助，用户登录并使用 PHP 提供页面。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:50:14.163

基本上你不走运 - 没有万无一失的解决方案可以阻止某人编写一个简单的脚本来下载页面，解析它以获取任何安全令牌，然后调用 AJAX 请求。

您只能通过添加一些由服务器呈现并通过 AJAX 调用提交回来的额外数据来使工作稍微难一些。

您可能会考虑将验证码图像添加到按钮 - 这将阻止机器人提交数据，但也会使真实用户的生活更加困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:53:51.810

基本上，用户甚至可以复制代币，严格来说并不是一个完美的保护。混淆代码可能会有所帮助。我想你想防止编程或多次投票。你可以记录 ip 以防止多次投票并使用 csrf 令牌，但如果你的用户登录它是假定他们是受信任的，并且在操纵的情况下，你只需删除他们帐户。

我认为您应该尝试使用验证码，并且识别正在投票的用户并将他限制在多票服务器端。

但是伪造点击仍然是可行的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T14:47:25.647

您可能希望将[CSRF 令牌](http://en.wikipedia.org/wiki/Cross-site_request_forgery)附加到您的请求中，以确保在该页面和当前会话中执行了点击。

您可以实现一个过期令牌 - 您在会话中设置一次，当用户要求它时，它会失效并且您完成了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T14:48:15.307

你能只允许按钮在一定的时间范围内被点击一次吗？这可以在 PHP 中强制执行，并且非常安全。

即使您使用令牌或其他东西，用户也可能能够找到它并直接运行脚本。需要某种服务器验证，例如时间验证才能真正安全。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T14:53:49.313

1- 看起来这些用户是您网站的注册会员。如果是这种情况，只需在数据库中创建一个带有 id、username 和其他关系列的**points表。**`request`如果他们之前没有得到分数，让你的脚本工作（首先检查**用户是否登录**，然后检查用户名与用户数据库，如果他们存在关系，则拒绝请求，否则接受它，在**积分**表内） .

2-如果他们是非注册用户，请使用谷歌验证码进行检查。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-13T14:49:14.400

您可能希望实现一个基于“验证码”的系统，以确保 (1) 只有人类单击按钮 (2) 仅在按下按钮后

[http://jquerybyexample.blogspot.com/2012/04/best-5-jquery-captcha-plugins.html](http://jquerybyexample.blogspot.com/2012/04/best-5-jquery-captcha-plugins.html)

# android - 黑莓上的 Android：如何播放视频

> ID：13362791
> 
> 赞同：3
> 
> 时间：2012-11-13T14:45:38.990
> 
> 标签：android, video, blackberry-10, blackberry-android

我已经将一些应用程序从 Android 移植到 Blackberry（通过使用 Blackberry 工具重新打包它们）。大多数应用程序似乎都可以正常工作，但是我无法让视频正常工作。加载指示器出现（但不旋转）。没有其他任何事情发生（LogCat 或控制台上没有异常或任何内容。在我得到对话框后，询问我是否要关闭应用程序，因为它没有反应。

有没有人设法在黑莓 10 上使用 Android API 播放视频？有什么技巧可以使用吗？就像只是使用特殊的视频格式或我需要知道的其他任何东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T16:34:35.820

如果您在模拟器中执行此操作，则那里没有编解码器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:01:11.223

我现在收到了来自 RIM 的反馈。视频（流）不支持某些网络协议：http: [//developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_network_protocols.html](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_network_protocols.html)。还有一些坏消息：他们还说“发布时的最终操作系统更新也不支持它”。

# javascript - 如何从 JMeter 调用外部 JavaScript 文件方法

> ID：13362796
> 
> 赞同：3
> 
> 时间：2012-11-13T14:45:51.937
> 
> 标签：javascript, jmeter, hmac, sha256, cryptojs

我正在尝试为我正在构建的 SOAP/XML-RPC JMeter 请求生成 HMAC SHA256 签名。我找到了一个可以为我解决问题的 JavaScript 库：

[http://code.google.com/p/crypto-js/#HMAC](http://code.google.com/p/crypto-js/#HMAC)

问题是我找不到从 JMeter 调用外部 JavaScript 文件方法的方法。

任何帮助都将不胜感激，或者对执行任务的替代方法提出建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:30:23.827

您不需要使用任何外部 JS 库来生成 HMAC。此功能[在 Java SE 中可用](https://stackoverflow.com/a/3208472/841064)。您可以使用 Beanshell Sampler 来执行 Java 代码。

如果此功能在 Java SE 中不可用，您可以：

*   使用[操作系统进程采样器](http://jmeter.apache.org/usermanual/component_reference.html#OS_Process_Sampler)
*   使用[BSF Sampler](http://jmeter.apache.org/usermanual/component_reference.html#BSF_Sampler)，将语言设置为 javascript 并使用脚本附加文件
*   将所选库的 Jar 放入 Jmeter 的 lib 文件夹中。然后这个库将在启动时由 JMeter 加载，您可以通过 Beanshell 采样器使用它

# validation - MS Access 2007 VBA：使用 VBA 和 Chr() 验证文本字段

> ID：13362797
> 
> 赞同：1
> 
> 时间：2012-11-13T14:45:55.903
> 
> 标签：validation, vba, ms-access, chr

我正在尝试使用以下 VBA 验证表单字段的输入。这很好用。我的问题是这个 Access 应用程序创建了各种 XML 数据文件，我不希望该 xml 中的某些字符......即软返回（Shift+Enter）。我相信这个的 Chr 是 Chr(11)，但我认为我不能只将 , Chr(11)) 添加到下面数组的末尾，这将起作用......我如何使用 Chr(# ) 以链接方式？

```
 Dim i, j As Integer
 dim myField as variant

 varNo = Array("\", "/", ":", "*", "?", """", "<", ">", "|")

 If IsNull(Me.FieldValue) = False Then
    myField = Me.FieldValue 
    For i = 0 To UBound(varNo)
    j = InStr(1, myField , varNo(i))
    If j > 0 Then
        MsgBox "Cannot use character:" & Chr(13) & Chr(10) & Chr(13)
        & Chr(10) & varNo(i), vbCritical, " Illegal Character"

        Exit Sub
        Exit For
    End If
    Next
 End If 
```

上面的内容再次适用于数组中的那些东西，但我也想包括 Chr() 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:05:40.350

您可以使用空字符串作为新的最后一个元素来构建数组，然后将最后一个元素的值更改为`Chr(11)`.

```
varNo = Array("\", "/", ":", "*", "?", """", "<", ">", "|", "")
varNo(UBound(varNo)) = Chr(11) 
```

实际上，我不确定为什么有必要这样做。这对我有用...

```
varNo = Array("\", "/", ":", "*", "?", """", "<", ">", "|", Chr(11)) 
```

根据评论，我认为确认您正在评估的文本实际上包含您期望的字符会很有用。将文本输入此过程并在“立即”窗口中检查其输出。

```
Public Sub AsciiValues(ByVal pInput As String)
    Dim i As Long
    Dim lngSize As Long
    lngSize = Len(pInput)
    For i = 1 To lngSize
        Debug.Print i, Mid(pInput, i, 1), Asc(Mid(pInput, i, 1))
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:44:07.327

以下是关于另一种方法的一些注意事项：

```
'' Microsoft VBScript Regular Expressions library
'' or CreateObject ("VBScript.RegExp")

Dim rex As New RegExp

With rex
   .MultiLine = False
   .Global = True
   .IgnoreCase = False
End With

'A line for testing
sLine = "abc" & Chr(11)

'Anything that is NOT a-zA-Z0-9 will be matched
rex.Pattern = "[^a-zA-Z0-9]"
If rex.Test(sLine) Then
    Debug.Print "Problem: include only alpha numeric"
End If 
```

# vim - 显示当前文件所在文件夹内的文件列表

> ID：13362806
> 
> 赞同：3
> 
> 时间：2012-11-13T14:46:28.567
> 
> 标签：vim

想象一下我正在编辑文件，我想显示属于我正在编辑的文件的文件夹内的文件列表，以编辑其中一个。

我怎样才能做到这一点？有什么办法使用`FuzzyFinder`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T15:14:44.103

您是否阅读过 FuzzyFinder 的文档 ( `:help fuzzyfinder`)？快速打开附近的文件是该插件的主要功能之一。

*   无需安装任何东西，您可以执行以下操作：

    ```
    :Ex[plore] 
    ```

    打开`netrw`文件树。见`:help netrw`。

*   你也可以这样做：

    ```
    :e <Tab> 
    ```

    将这些行添加到您的命令行中`~/.vimrc`以更好地完成命令行：

    ```
    set wildmenu
    set wildmode=list:full 
    ```

    并阅读`:help wildmenu`和`:help commandline-completion`。

`set autochdir`顺便说一下，添加到您的 中是一个有用的选项`~/.vimrc`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:07:16.243

将 vim 当前目录更改为当前文件：

```
:cd %:h 
```

然后

FuzzyFinder 可以做你想做的（选择和编辑）。（`:FufFile`）我有映射：

```
nmap <Leader>ff :FufFile<cr> 
```

NERDTree 也可以做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T14:56:49.823

取决于您通过显示文件的意思。

要将文件列表包含在当前编辑的文件中，您可以执行以下操作：

```
:read !ls /path/to/file 
```

`:cd %:h | read !ls`（如果您不介意`vim`更改当前目录，则可以将其缩短为...）

如果您想选择另一个文件进行编辑，我建议您看一下[NerdTree](http://www.vim.org/scripts/script.php?script_id=1658)插件（[这里](http://www.catonmat.net/blog/vim-plugins-nerdtree-vim/)有一些介绍）。或者您可以简单地发出：

```
:cd %:h | e . 
```

# excel - 将数据导出到现有 Excel 文件

> ID：13362814
> 
> 赞同：1
> 
> 时间：2012-11-13T14:46:54.280
> 
> 标签：excel, xpages

我有一个带有用于开票的 Excel 电子表格模板文件的系统。我希望用户能够单击 Xpage 上的按钮，然后打开电子表格并在 Excel 中输入最新的发票数据。我不介意 Excel 是他们机器上的应用程序还是服务器上的应用程序，但我更喜欢他们机器上的本地应用程序。

我研究过 Xagents，因为我觉得这可能是答案。我知道它们可用于创建 Excel，但我无法找到任何提及打开 Excel 文件并将数据输入特定单元格的内容。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:55:33.677

编辑：您可以使用 Apache POI 来编辑和创建 Microsoft Office 文档。这是一个 java 项目，可让您处理办公文档，并且可以使用 java 使用。一个很好的起点可以是来自 webgate 的 Christian Guedemann 的博客：http: [//guedebyte.wordpress.com/2012/09/17/documents-and-spreadsheets-with-xpages-building-the-kernel-part-ii/](http://guedebyte.wordpress.com/2012/09/17/documents-and-spreadsheets-with-xpages-building-the-kernel-part-ii/) （编辑结束）

我知道并尝试将数据从 Notes 写入 Excel 的唯一方法是将数据导出到 HTML 页面并相应地设置内容类型（例如，如此处所述（有更多可用资源）： [http://www .dominoguru.com/pages/developer2010_xpagexlsexport.html](http://www.dominoguru.com/pages/developer2010_xpagexlsexport.html)

我不确定这是否有帮助，但似乎这个项目可以帮助你： [http ://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=ZK%20Spreadsheet%20for%20XPages](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=ZK%20Spreadsheet%20for%20XPages)

据我所知，这个项目可以从 XPages 加载 Excel 文件——然后也应该可以编辑这些文件。

除此之外，我能想到的唯一解决方案是从 XPage 调用的 Notes Agent。然后，该代理可以在后台运行并执行所有 Excel 工作。运行后，XPage 可以显示 Excel 文件的链接。实际上，这是我会考虑实施的解决方案 - 但也许其他人会在这里提供更好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T05:09:55.400

您不想在您的应用程序中引入对 Excel 的依赖——这不适用于 iPad 前端。不如看看[ZK 电子表格](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=ZK%20Spreadsheet%20for%20XPages)，它将满足您的需求。

但是，如果您必须拥有 Excel，那么您需要一个往返解决方案：从 URL 加载 Excel（可能由 XAgent（？）生成并将其保存回来。保存回来的部分是棘手的。普通 HTTP 不允许那个。你需要一个支持 webDAV 的服务器。注意 OpenNTF 上的一个项目（只是清除 IBM 法律），它提供 webDAV。

然而，ZK 电子表格看起来更适合您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T17:14:18.993

我在以下 URL 有一个示例数据库 --> [http://www.nnsu.com/nnsusite.nsf/%24%24OpenDominoDocument.xsp?documentId=B65507CB2DE15B3286257986005F061D&action=openDocument](http://www.nnsu.com/nnsusite.nsf/%24%24OpenDominoDocument.xsp?documentId=B65507CB2DE15B3286257986005F061D&action=openDocument)

下载 APCC.nsf。这将允许您创建/读取新的 EXCEL 电子表格，然后将生成的文件流式传输到请求的浏览器。服务器上无需安装 EXCEL 或 office。

这些示例创建了一个新工作簿，但您也可以将“模板”存储在服务器上或便笺文档中，并将其用作起点，然后将其保存到文档中或将其流式传输到请求的浏览器。

使用 Apache POI，您可以使用启动流程的注释文档中的数据读取/写入电子表格。

# c# - LINQ：Sub IEnumerable 的平均值

> ID：13362819
> 
> 赞同：3
> 
> 时间：2012-11-13T14:47:18.227
> 
> 标签：c#, linq

我有一个如下所示的数据集：

```
[
{
 "Size" : "Small",
 "Details" :
  {
    "Detail 1" : 1.0,
    "Detail 1" : 1.0,
    "Detail 2" : 1.0,
  }
},
{
 "Size" : "Small",
 "Details" :
  {
    "Detail 1" : 2.0,
    "Detail 1" : 3.0,
    "Detail 2" : 4.0,
  }
},
{
 "Size" : "Medium",
 "Details" :
  {
    "Detail 1" : 1.0,
    "Detail 1" : 1.0,
    "Detail 2" : 1.0,
    "Detail 3" : 1.0,
  }
},
//... etc
] 
```

对于具有相同“大小”的所有项目，我想单独总结匹配的“详细信息”条目，然后像“大小”d 项目一样对它们进行平均。IE：

```
[
{
 "Size" : "Small",
 "Details" :
 {
    "Detail 1" : 3.5,
    "Detail 2" : 2.5,     // Average of the summation of the two 'small' items in original data set
 },
    {
     "Size" : "Medium",
     "Details" :
      {
        "Detail 1" : 2.0, // Average of the two details for medium.
        "Detail 2" : 1.0,
        "Detail 3" : 1.0,
      }
    },
] 
```

我得到的代码就是这样，但我一直在弄清楚如何在嵌套集中进行平均。任何指针将不胜感激。

我的代码，到目前为止。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Test
{

    class ItemWithDetails
    {
        public string Size;
        public List<KeyValuePair<string, double>> Details { get; private set; }

        public ItemWithDetails(string size)
        {
            Size = size;
            Details.Add(new KeyValuePair<string, double>("Detail 1", 1));
            Details.Add(new KeyValuePair<string, double>("Detail 1", 1));
            Details.Add(new KeyValuePair<string, double>("Detail 2", 1));
            Details.Add(new KeyValuePair<string, double>("Detail 2", 1));
            Details.Add(new KeyValuePair<string, double>("Detail 2", 1));
            Details.Add(new KeyValuePair<string, double>("Detail 3", 1));

            if (size == "Large")
            {
                Details.Add(new KeyValuePair<string, double>("Detail 3", 1));
                Details.Add(new KeyValuePair<string, double>("Detail 3", 1));
                Details.Add(new KeyValuePair<string, double>("Detail 3", 1));
            }
        }
    }
    class Program
    {
        static void Main(string[] args)
        {
            var testData = new List<ItemWithDetails>()
            {
                new ItemWithDetails("Small"),
                new ItemWithDetails("Small"),
                new ItemWithDetails("Medium"),
                new ItemWithDetails("Medium"),
                new ItemWithDetails("Medium"),
                new ItemWithDetails("Large"),
                new ItemWithDetails("Large"),
                new ItemWithDetails("Large"),
            };

            // Trying to get the average of each detail, per size.

            var detailSummed = from item in testData
                               select new
                               {
                                   size = item.Size,
                                   detailsSummed = from detail in item.Details
                                                   group detail by detail.Key into detailGroup
                                                   select new
                                                   {
                                                       detailName = detailGroup.Key,
                                                       detailSum = detailGroup.Sum(a => (a.Value))
                                                   }
                               };

            var averageAcrossItems =    from item in detailSummed
                                        group item by item.size into itemGroup
                                        select new 
                                        {
                                            size = itemGroup.Key,
                                            detailsAveraged = // not sure how I can average across items, while at this level.  Do I have to flatten it?
                                        }

        }
    }
} 
```

更新：

使用 Adam Mills 代码，我更接近了，结合了两个独立的 LINQ 查询。可以将其制成一个希望更具可读性的 LINQ 查询吗？

```
 var detailSummed = from item in testData
                           select new
                           {
                               size = item.Size,
                               detailsSummed = from detail in item.Details
                                               group detail by detail.Key into detailGroup
                                               select new
                                               {
                                                   detailName = detailGroup.Key,
                                                   detailSum = detailGroup.Sum(a => (a.Value))
                                               }
                           };

        var test2 = detailSummed.GroupBy(x => x.size)
                                .Select(y =>
                                           new
                                           {
                                               Size = y.Key,
                                               DetailAverages = y   .SelectMany(x => x.detailsSummed)
                                                                    .GroupBy(x => x.detailName)
                                                                    .Select(x => new KeyValuePair<string, double>(x.Key, x.Average(c => c.detailSum)))
                                           }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:16:06.990

```
 items.GroupBy(x => x.Size)
                .Select(y =>

                        new
                            {
                                Size = y.Key,
                                Details = y.SelectMany(x => x.Details)
                                            .GroupBy(x => x.Key)
                                            .Select(x => new
                                                             {
                                                                 Key = x.Key,
                                                                 Average = x.Average(c => c.Value),
                                                                 Sum = x.Sum(c => c.Value)
                                                             })
                            }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:38:34.250

以下根据您的输入产生您想要的输出，除了它将两个`detail1`值相加`medium`：

```
var output = input
    .Select(iwd => new { Size = iwd.Size, Sums = iwd.Details.GroupBy(kvp => kvp.Key).Select(g => new { Detail = g.Key, Sum = g.Sum(kvp => kvp.Value) }) })
    .GroupBy(ds => ds.Size)
    .ToDictionary(g => g.Key, g => g.SelectMany(ds => ds.Sums).GroupBy(ds => ds.Detail).ToDictionary(dsg => dsg.Key, dsg => dsg.Sum(ds => ds.Sum) / g.Count())); 
```

请注意，它会产生一个`Dictionary<string, Dictionary<string, int>>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T15:44:55.077

这个怎么样，

首先一些设置：

```
class ItemWithDetails {

    public string Size;
    public List<KeyValuePair<string, double>> Details { get; private set; }

    public ItemWithDetails() {
      Details=new List<KeyValuePair<string,double>>();
   }
} 
```

以及要初始化的样本数据；

```
var testData = new ItemWithDetails[] {
    new ItemWithDetails { Size = "Small", 
        Details = { 
            new KeyValuePair<string,double>("Detail 1",1.0),
            new KeyValuePair<string,double>("Detail 1",1.0),
            new KeyValuePair<string,double>("Detail 2",1.0),
        }
    },
    new ItemWithDetails { Size="Small",
        Details = { 
            new KeyValuePair<string,double>("Detail 1",2.0),
            new KeyValuePair<string,double>("Detail 1",3.0),
            new KeyValuePair<string,double>("Detail 2",4.0),
        }
    },
    new ItemWithDetails { Size="Medium",

        Details = { 
            new KeyValuePair<string,double>("Detail 1",1.0),
            new KeyValuePair<string,double>("Detail 1",1.0),
            new KeyValuePair<string,double>("Detail 2",1.0),
            new KeyValuePair<string,double>("Detail 3",1.0),
        }
    },

}; 
```

现在这个查询应该以你想要的方式转换数据；

```
var q = from i in testData
        select new { 
             Size=i.Size,
             Details=i.Details
                     .GroupBy(d =>d.Key)
                     .Select(d=>new KeyValuePair<string,double>(d.Key,d.Sum(a=>a.Value)))
             } into x
        group x by x.Size into g
        let details = (
                       from a in g.SelectMany (b => b.Details)
                       group a by a.Key into g2
           select new KeyValuePair<string,double>(g2.Key,g2.Average(b=>b.Value))
                      )
       select new {
             Size=g.Key,
             Details=details
       }; 
```

并且更具可读性，只需在答案中使用匿名类型而不是 kvp：

```
var q = from i in testData
        select new { 
             Size=i.Size,
             Details= (
                      from d in i.Details
                      group d by d.Key into g1
                      select new {Key=g1.Key,Value=g1.Sum(a=>a.Value)}
                      )

             } into x
        group x by x.Size into g
       select new {
             Size=g.Key,
             Details=(
                       from a in g.SelectMany (b => b.Details)
                       group a by a.Key into g2
           select new {Key =g2.Key, Value= g2.Average(b=>b.Value)}
                      )
       }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T15:37:15.343

试试这个：

```
var x =
    from item in testData
    group item by item.Size into sizeItems
    select new
    {
        Size = sizeItems.Key,
        Details =
            from item in sizeItems
            from detail in item.Details
            group detail by detail.Key into detailNumbers
            select new KeyValuePair<string, double>(detailNumbers.Key, detailNumbers.Sum(dn => dn.Value)) into detail
            group detail by detail.Key into detailNumbers
            select new KeyValuePair<string, double>(detailNumbers.Key, detailNumbers.Average(dn => dn.Value))
    }; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T16:41:33.080

```
var detailSummed = testData
    .SelectMany(d => d.Details.GroupBy(de => de.Key).Select(de => new { Size = d.Size, DetailSize = de.Key, Sum = de.Sum(x => x.Value) } ))
    .GroupBy (d => d.Size)
    .Select (d => 
        new 
        { 
            Size = d.Key, 
            Details = d.GroupBy (x => x.DetailSize)
                .Select(x => 
                    new KeyValuePair<string, double>(x.Key, x.Average(xi => xi.Sum)))
                .ToList()
        }); 
```

让我们分解一下：

`d.Details.GroupBy(de => de.Key).Select(de => new { Size = d.Size, DetailSize = de.Key, Sum = de.Sum(x => x.Value) } )`
我们从测试数据开始，并将详细信息分组为`Size, DetailSize, Sum`匿名类型。这将使我们能够区分不同的`ItemWithDetails`.

`.SelectMany(d => ...`
这使我们可以从列表（详细信息）列表转到汇总值的扁平列表。

`.GroupBy (d => d.Size)`
这将按主要项目大小分组。此时，这会将我们汇总的数据分组到属于主要大小的所有详细信息中。我们将对这组数据进行选择。

```
.Select (d => 
    new 
    { 
        Size = d.Key, 
        Details = d.GroupBy (x => x.DetailSize)
            .Select(x => new KeyValuePair<string, double>(x.Key, x.Average(xi => xi.Sum)))
            .ToList()
    }); 
```

最后一种方法将我们的汇总值转换为它们各自的 DetailSize，其中的平均值位于`KeyValuePair`s 列表中。

# javascript - 如何监听特定 HTML 元素的布局更改？

> ID：13362828
> 
> 赞同：7
> 
> 时间：2012-11-13T14:48:09.470
> 
> 标签：javascript, html, css, layout, reflow

有哪些技术可以在现代浏览器中监听布局变化？`window.resize`不起作用，因为它仅在调整整个窗口大小时触发，而不是在内容更改导致重排时触发。

具体来说，我想知道什么时候：

*   元素的可用宽度发生变化。
*   元素的流入子元素消耗的总高度发生变化。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T15:10:45.673

没有本地事件可以为此挂钩。您需要设置一个计时器并在您自己的代码中轮询此元素的尺寸。

这是基本版本。它每 100 毫秒轮询一次。我不确定你想如何检查孩子的身高。这假设他们只会让他们的包装更高。

```
var origHeight = 0;
var origWidth = 0;
var timer1;

function testSize() {
     var $target = $('#target')     
     if(origHeight==0) {
         origWidth = $target.outerWidth();
         origHeight = $target.outerHeight();

     }
     else {
         if(origWidth != $target.outerWidth() || origHeight = $target.outerHeight()) {
             alert("change");  
         }
         origWidth = $target.outerWidth();
         origHeight = $target.outerHeight();
         timer1= window.setTimeout(function(){ testSize() }),100)
     } 

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T03:18:26.970

从一个类似的问题[How to know when an DOM element move or is resized](https://stackoverflow.com/questions/3444719/how-to-know-when-an-dom-element-moves-or-is-resized)中，有一个[来自 Ben Alman 的 jQuery 插件](http://benalman.com/projects/jquery-resize-plugin/)可以做到这一点。该插件使用 Diodeus 的答案中概述的相同轮询方法。

插件页面的示例：

```
// Well, try this on for size!
$("#unicorns").resize(function(e){
  // do something when #unicorns element resizes
}); 
```

# xaml - ItemsControl 内容在被剪裁之前溢出网格行

> ID：13362833
> 
> 赞同：0
> 
> 时间：2012-11-13T14:48:27.897
> 
> 标签：xaml, winrt-xaml, windows-store-apps

我有一个带有两行网格的页面。在第一行中，我有一个数据绑定 ItemsControl，在第二行中有一个简单的文本框。

问题是当页面加载时（即它被动画化到视图中），ItemScontrol 的内容溢出整个网格。只有在页面在片刻之后完全显示之后（它似乎正好是 1 秒，虽然我没有测量它），内容才被正确地剪辑到 Grid 行。

以下是加载页面时发生的情况（不是此屏幕截图上有一些转换，但它们对此行为没有影响）：

![在此处输入图像描述](../Images/6b73912f928c9ce70ce2a42e0a4dbbb6.png)

页面完全加载后，内容被正确剪辑：

![在此处输入图像描述](../Images/623ec71b3df4eaff43ed4860ed66f145.png)

这是伪 XAML：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <StackPanel Grid.Row="0">
        <ItemsControl ItemsSource="{Binding}">
            <!-- grid for each row -->
        </ItemsControl>
    </StackPanel>

    <StackPanel Grid.Row="1">
        <TextBox />
    </StackPanel>
</Grid> 
```

我发现如果我将 ItemsControl 的（而不是 StackPanel 的！）高度设置为固定值，剪裁可以正常工作，但是我当然不希望高度固定。

有任何想法吗？

# java - 无法连接到 servlet 中的 mysql 数据库

> ID：13362835
> 
> 赞同：0
> 
> 时间：2012-11-13T14:48:31.973
> 
> 标签：java, mysql, jsp, servlets

当我尝试连接到我的 MySQL 数据库时，我不断收到此错误：

```
exception

javax.servlet.ServletException: JDBC Problem: 
root cause

com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
root cause

java.net.ConnectException: Connection timed out: connect 
```

这是一些代码：

```
Connection con = null;
        Statement stmt = null;
        ResultSet rs = null;
        try{
            Class.forName("com.mysql.jdbc.Driver");
            con = DriverManager.getConnection
                    ("jdbc:mysql://mysql11.000webhost.com/database_name","user_name","password");
        stmt = con.createStatement();
        rs = stmt.executeQuery("INSERT into emailadresses('email') values ('"+email+"')");
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(EmailServlet.class.getName()).log(Level.SEVERE, null, ex);
        }catch(SQLException e){
            throw new ServletException("JDBC Problem: ", e);
        } 
```

编辑：我的库中有 mysql-connector-java jar 文件

编辑：发现问题我在托管我的数据库的网站上寻找答案并找到了这个：

```
JDBC/ODBC is not supported here 
```

真恶心……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:54:10.000

是的，它不是类路径问题，而是网络问题。由于某种原因，无法从您的客户端计算机与给定主机建立网络连接。所以，是的，可能有很多事情。

*   服务器实际上没有运行！
*   主机/IP 错误
*   防火墙（你这边）
*   防火墙（另一边）
*   可能存在任何其他网络问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:15:25.943

尝试从运行应用程序的机器上的任何数据库客户端（如 sqlyog）连接该数据库。如果客户端的连接也失败，那么肯定是网络问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T15:02:41.323

肯定是网络问题。请注意，您的 tcp 连接**不会**被拒绝，而是会导致超时错误。根据我的经验，这种行为可能是由未正确完成的 TCP 握手（例如，防火墙丢弃 SYN 数据包）引起的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T15:11:13.157

“表示尝试将套接字连接到远程地址和端口时发生错误的信号。通常，连接被远程拒绝（例如，没有进程正在侦听远程地址/端口）”。-[来自 Oracle 文档](http://docs.oracle.com/javase/7/docs/api/java/net/ConnectException.html)

查看您的连接字符串，确保正确输入了数据库、用户名和密码。

另一个原因可能是您的数据库服务器未启动。

# c# - 具有未编号属性的 Xml 序列化/反序列化

> ID：13362842
> 
> 赞同：0
> 
> 时间：2012-11-13T14:48:46.257
> 
> 标签：c#, xml, serialization

虽然标题可能没有意义（我很难很快描述这个问题），但我会在这里尝试解释。

我有一些 XML，其中包含一些将始终存在的值，但它还包含未定义数量的其他变量，例如：

```
<fooElements>
    <fooElement>
        <name>fooElem1</name>
        <barElement>
            <name>foobarElem1</name>
        </barElement> //There's an undefined number of these bar elements.
    </fooElement>
</fooElements> 
```

无论如何处理那些`barElements`与`fooElement`类？

我的第一个想法是在`fooElement`类中放置一个列表，然后将`barElement`（s）加载到其中，但是当我将其序列化回来时，我得到：

```
<fooElements>
    <fooElement>
        <name>fooElem1</name>
        <barList>
            <barElement>
                <name>foobarElem1</name>
            </barElement> //There's an undefined number of these bar elements.
        <barList>
    </fooElement>
</fooElements> 
```

这不是我要找的。

有什么方法可以将这个未定义的数量存储`barElements`在`fooElement`类中而不显示在 xml 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:53:31.930

只需将您的 barList 设为`XmlElement`. 例如：

```
[XmlElement("barElement")]
public List<BarElementObject> BarElements { get; set; } 
```

# progress-4gl - 这是什么帕斯卡方言？它有什么作用？

> ID：13362845
> 
> 赞同：1
> 
> 时间：2012-11-13T14:48:54.727
> 
> 标签：progress-4gl, openedge

我正在调查某人的混合 shell 脚本、perl 脚本、C 代码和一个名为“rekening.p”的奇怪文件的泥球。

```
/*--------------------------------------------------------------------------------
  File:        rekening.p
  Description: Bepalen 868-nummer dossier
  History:     nabn - 16/04/2004 - Citrix Implementatie (verwijderen van copy-fsk)
               jedf - 17/02/2010 - F2009/030 (Aanpassingen voor DBC)
               jedf - 20/12/2010 - F2010/024 (Noor)
               Pefl - 22/02/2012 - F2012/002 Sequence aanpassing + controle
--------------------------------------------------------------------------------*/
/* Parameters */
DEFINE INPUT  PARAMETER iHerv     AS INTEGER    NO-UNDO.
DEFINE INPUT  PARAMETER cParam    AS CHARACTER  NO-UNDO.
DEFINE OUTPUT PARAMETER cDosNr    AS CHARACTER  NO-UNDO.

/* Variabelen */
DEFINE VARIABLE iZetelNr    AS INTEGER   NO-UNDO INIT 0.
DEFINE VARIABLE dDosNr      AS DECIMAL   NO-UNDO.
DEFINE VARIABLE cBron       AS CHARACTER NO-UNDO INIT "":u.
DEFINE VARIABLE cPrefix     AS CHARACTER NO-UNDO INIT "":u.
DEFINE VARIABLE cMailParams AS CHARACTER NO-UNDO INIT "":u EXTENT 20.

DEFINE VARIABLE pvRestIn                AS INTEGER                    NO-UNDO.
DEFINE VARIABLE pvSeqNaamTx             AS CHARACTER                  NO-UNDO.

ASSIGN
  cParam = REPLACE(cParam, ",":u, ";":u)
  cParam = TRIM(cParam)
  cBron  = CAPS(ENTRY(1, cParam, ";":u))
  NO-ERROR.

IF NUM-ENTRIES(cParam, ";":u) >= 2
THEN ASSIGN
  cPrefix = CAPS(ENTRY(2, cParam, ";":u))
  NO-ERROR.

/* Zet sequence naam voor controle. */
CASE cPrefix:
    WHEN "934":u   THEN ASSIGN pvSeqNaamTx = 'seq-banknr-noor':U.
    WHEN "93489":u THEN ASSIGN pvSeqNaamTx = 'seq-banknr-auxircs':U.
    OTHERWISE CASE cBron:
        WHEN "DBC":u THEN .
        OTHERWISE CASE iHerv:
            WHEN 1 THEN ASSIGN pvSeqNaamTx = 'seq-banknr':U.
            WHEN 2 THEN ASSIGN pvSeqNaamTx = 'seq-bankfinnr':U.
            WHEN 3 THEN ASSIGN pvSeqNaamTx = 'seq-banknr':U.
            WHEN 4 THEN ASSIGN pvSeqNaamTx = 'seq-banknr-vd':U.
            WHEN 5 THEN ASSIGN pvSeqNaamTx = 'seq-banknr-cr':U.
            WHEN 6 THEN ASSIGN pvSeqNaamTx = 'seq-cbk':U.
        END CASE.
    END CASE.
END CASE.

IF LENGTH(pvSeqNaamTx) > 0
THEN DO:
  FIND FIRST fsk._sequence NO-LOCK
       WHERE fsk._sequence._Seq-name = pvSeqNaamTx
       NO-ERROR.
  IF  AVAILABLE fsk._sequence
  AND fsk._sequence._Seq-Max  <> ?
  AND fsk._sequence._Cycle-OK  = FALSE
  THEN DO:
    ASSIGN
      pvRestIn = DYNAMIC-CURRENT-VALUE(pvSeqNaamTx, 'fsk':U)
  . /* ff voor de debug. */
      pvRestIn = (fsk._sequence._Seq-Max - DYNAMIC-CURRENT-VALUE(pvSeqNaamTx, 'fsk':U)) / fsk._sequence._Seq-Incr
      .
    IF pvRestIn < 500
    THEN DO:
      ASSIGN
        cMailParams[1] = pvSeqNaamTx
        cMailParams[2] = STRING(pvRestIn)
    .
  RUN programs/RootMail.p
    (INPUT '868':U
    ,INPUT cMailParams
    ).

    END.
  END.
END.

CASE cPrefix:
    WHEN "934":u   THEN ASSIGN cDosNr = "9348":u + STRING(NEXT-VALUE(seq-banknr-noor   , fsk), "999999":u).
    WHEN '93489':U THEN ASSIGN cDosNr = '9348':U + STRING(NEXT-VALUE(seq-banknr-auxircs, fsk), '999999':U).
    OTHERWISE CASE cBron:
        WHEN "DBC":u THEN DO:
            ASSIGN iZetelNr = INTEGER(ENTRY(2, cParam, ";":u)) NO-ERROR.

            /* Waarschuwing sturen via e-mail dat 868-reeks bijna vol is */
            IF   CURRENT-VALUE(seq-banknr-dbc-fr, fsk) >= 49500             /* 868330 - 868334 = Franstalige klanten      */
              OR CURRENT-VALUE(seq-banknr-dbc-nl, fsk) >= 99500 THEN DO:    /* 868335 - 868339 = Nederlandstalige klanten */
                ASSIGN cMailParams[1] = (IF (iZetelNr = 0) THEN "330":u
                                                           ELSE "335":u).
                RUN programs/RootMail.p(INPUT "868":u,
                                        INPUT cMailParams).
            END.

            CASE iZetelNr:
                WHEN 0 THEN ASSIGN cDosNr = "86833":u + STRING(NEXT-VALUE(seq-banknr-dbc-fr, fsk), "99999":u).
                WHEN 1 THEN ASSIGN cDosNr = "86833":u + STRING(NEXT-VALUE(seq-banknr-dbc-nl, fsk), "99999":u).
            END CASE.
        END.
        OTHERWISE CASE iHerv:
            WHEN 1 THEN ASSIGN cDosNr = "8686":u + STRING(NEXT-VALUE(seq-banknr, fsk), "999999":u).
            WHEN 2 THEN ASSIGN cDosNr = "8685":u + STRING(NEXT-VALUE(seq-bankfinnr, fsk), "999999":u).
            WHEN 3 THEN ASSIGN cDosNr = "8686":u + STRING(NEXT-VALUE(seq-banknr, fsk), "999999":u).
            WHEN 4 THEN ASSIGN cDosNr = "8688":u + STRING(NEXT-VALUE(seq-banknr-vd, fsk), "999999":u).
            WHEN 5 THEN ASSIGN cDosNr = "8689":u + STRING(NEXT-VALUE(seq-banknr-cr, fsk), "999999":u).
            WHEN 6 THEN ASSIGN cDosNr = "8687":u + STRING(NEXT-VALUE(seq-cbk, fsk), "999999":u).
        END CASE.
    END CASE.
END CASE.

/* Bepalen controlenummer */
ASSIGN dDosNr = DEC(cDosNr).
DO WHILE dDosNr > 2100000000:
    ASSIGN dDosNr = dDosNr - 970000000.
END.
IF dDosNr MOD 97 = 0
    THEN ASSIGN cDosNr = cDosNr + "97":u.
    ELSE ASSIGN cDosNr = cDosNr + STRING(dDosNr MOD 97, "99":u). 
```

有人知道这是否是某种帕斯卡方言吗？对于加分，它有什么作用？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T14:53:38.037

这就是 PROGRESS，目前也称为 OpenEdge Advanced Business Language。

另见[http://en.wikipedia.org/wiki/OpenEdge_Advanced_Business_Language](http://en.wikipedia.org/wiki/OpenEdge_Advanced_Business_Language)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:37:00.360

是的，这确实是 Progress ABL。

这个名字`rekening.p`是一个荷兰名字，注释也是荷兰语。该变量`cBron`可以解释为`cSource`(bron=source)。

这个程序的主要原因是返回一个新的发票号码。

它接收 2 个输入参数，其中包含有关业务/客户（noor / auxircs）的一些信息。基于该信息，使用正确的*序列*返回下一个（新的）可用号码。

# python - python中的短路评估分配？

> ID：13362847
> 
> 赞同：10
> 
> 时间：2012-11-13T14:49:00.517
> 
> 标签：python

Ruby 支持这一点：

```
name = name || "default" 
```

如果我在 python 中尝试：

```
name = name or "default" 
```

口译报告：

```
NameError: name 'name' is not defined 
```

python中短路评估分配的等价物是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-13T14:50:00.633

如果您实际定义`name`它会起作用：

```
name = None
name = name or 'default' 
```

短路与实际必须定义变量无关。通常，`name`已从*某处*拉出但为空（假）值：

```
name = somefunction('name') or 'default' 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-13T14:51:03.793

```
name = globals()['name'] if 'name' in globals() else 'default' 
```

或者，更简洁地说：

```
name = globals().get('name','default') 
```

替换`locals()`内部函数。

* * *

可能会更好`try/except`：

```
try:
   name
except NameError:
   name = 'default' 
```

* * *

作为旁注，我永远不会在我的代码中使用这些成语中的任何一个。（当然，我不会使用您提到的 Javascript 或 Ruby 中的其他成语）。我会确保我的变量在一开始就被声明为默认值，然后在需要时将它们更改为非默认值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T14:58:44.437

这是一个可怕的，可怕的想法，但是......

```
name = globals().get("name", locals().get("name", "default")) 
```

...会做你想做的事（同时让你不知道你现在是否有一个全局变量或局部变量），并且丑陋到希望让你不去尝试它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-27T05:03:33.657

你可以试试这个：

```
try:
    name = "some value"
except NameError:
    name = "default value" 
```

# ios - 在地图上移动合法按钮（iOS 6）

> ID：13362850
> 
> 赞同：5
> 
> 时间：2012-11-13T14:49:09.640
> 
> 标签：ios, objective-c, iphone, mkmapview

> **可能重复：**
> [地图和法律提及](https://stackoverflow.com/questions/12891373/maps-and-legal-mention)

在 iOS 5 或更低版本中，我可以在地图视图中移动 Google 徽标。iO6 有一个“合法”按钮，这是一个 MKAttributeLabel。MKAttributeLabel 是我无法编辑的私有类。我的按钮与底部的地图重叠（按设计），所以我移动了谷歌徽标。

有没有办法重新定位 ios6 地图中的 Legal 按钮？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T16:56:42.437

法律标签是标准的 UILabel，因此您可以像更改其他标签一样更改框架：

```
UIView *legalView = nil;

for (UIView *subview in self.mapview.subviews) {
   if ([subview isKindOfClass:[UILabel class]]) {
            legalView = subview;
            break;
     }
}
legalView.frame = CGRectMake(150, 150, legalView.frame.size.width, legalView.frame.size.height); 
```

# c# - MainWindow 类中的执行方法

> ID：13362851
> 
> 赞同：1
> 
> 时间：2012-11-13T14:49:10.687
> 
> 标签：c#, wpf, events

我有一个 WPF 应用程序，我`Frame`用来加载`Page`'is. 在`Page`我调用我的自定义控件`<Controls:OrderDataGrid x:Name="cntrlOrderDataGrid" />`。在这个控件上`DataGrid`，当我导航`Page`到`Frame`. 有时加载需要一段时间，我需要知道 DataGrid 何时完成加载，所以我设置了`Loaded`事件：

```
private void dgOrders_Loaded(object sender, RoutedEventArgs e)
{ } 
```

但我不知道我是否可以通知`MainWindow`DataGrid 已结束加载。当我将`Loaded`事件设置为`Frame`然后它立即触发而不用等待我的自定义控件与数据网格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:04:07.650

您需要有效地传递事件。

保存数据网格的`Page`需要添加一个新事件；类似的东西`OrdersLoaded`。当数据网格完成加载时触发该事件。然后主窗口可以订阅该事件，从而在加载订单时告诉它。

```
public event Action OrdersLoaded;

private void dgOrders_Loaded(object sender, RoutedEventArgs e)
{
    if (OrdersLoaded != null)
        OrdersLoaded();
} 
```

# c# - 在编写 C# 时读取 XML 文件

> ID：13362854
> 
> 赞同：2
> 
> 时间：2012-11-13T14:49:21.020
> 
> 标签：c#

我有一个程序将其进度和其他数据记录到 XML 文件中。我希望能够打开这个 XML 文件而不会阻止编写器程序（不是 .NET 程序，我无法控制它），并在 XML 出现时读取它，在它全部处理完毕后等待更多，直到收到 EOF。

如何在 C# 中实现这一点？

注意有2个问题：

1.  保持阅读流打开而不阻塞其他进程。
2.  知道什么时候有更多的输入，什么时候没有输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:54:30.093

如果我需要这样做，我会执行以下操作：

使用[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)在文件更改时获得通知。然后只需读取文件并根据需要解析 XML。

我会沿着这条路线走，因为当外部应用程序写入文件时很难读取流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:52:18.350

[过去，我在一个名为Tailf](http://tailf.codeplex.com/)的操作系统程序中做了类似的事情。如果你想自己做，只需检查代码，或者从中获取所有内容，它几乎也应该适用于你，这是我只关心文本文件的部分事实。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T14:54:26.600

您可以通过传入以下标志打开文件流而不锁定它：

```
new FileStream(logFilePath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite); 
```

至于等待“EOF”，如果其他程序只是间歇性地写入数据，您可能必须在您的进度中加入某种启发式方法（即，只有在*X*分钟内没有新数据时才停止查看新数据）。

# .net - ConcurrencyMode Multiple vs Async/Await

> ID：13362866
> 
> 赞同：1
> 
> 时间：2012-11-13T14:50:07.290
> 
> 标签：.net, wcf, asynchronous, async-await

假设您有一个 WCF 服务

```
[ServiceBehavior(
    IncludeExceptionDetailInFaults = true, 
    InstanceContextMode = InstanceContextMode.Single,
    ConcurrencyMode = ConcurrencyMode.Multiple,
    UseSynchronizationContext = false)] 
```

在此实现下使用 async/await 模式进行服务操作有什么不同？即使不使用 async/await，服务调用是否会被合并并可能异步执行？即使在阅读了大量 msdn 和博客文章之后，上述场景对我来说仍然不清楚，我会异步化我的操作以确保安全。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T15:21:06.380

> 即使不使用 async/await，服务调用是否会被合并并可能异步执行？

不`ConcurrencyMode.Multiple`，将允许多个线程同时执行调用，但这与异步处理不同。

考虑单个同步请求：单个线程将接收请求并一直执行，直到完成。如果该线程阻塞，则您有一个阻塞线程等待该请求完成。您可以指定`ConcurrencyMode.Multiple`允许其他线程进入并执行其他调用而不阻塞其他请求。

现在考虑单个异步请求：单个线程将接受请求并开始执行它。该线程不会阻塞，而是“等待”，它将线程返回到线程池，直到异步操作完成。这意味着该请求上没有阻塞线程。当该方法在其之后恢复时`await`，线程池中的一些线程将用于继续请求（最终这些线程之一将完成请求）。

底线是`async`在服务器端允许比同步代码更大的规模，因为异步操作的开销比线程低。

`ConcurrencyMode`处理一个不同的问题：它是关于您的服务实现的线程安全性。如果您可以同时进行多个调用，则应指定`ConcurrencyMode.Multiple`. 如果你有天生的异步操作，你应该把它们`async`. 如果你是线程安全的*并且*自然是异步的，你应该两者都做。

# ruby - Ruby 解析错误

> ID：13362870
> 
> 赞同：0
> 
> 时间：2012-11-13T14:50:14.927
> 
> 标签：ruby, parsing

我有以下厨师食谱：

```
def prestashop_deployDatabase (username)
    sql_path = '/tmp/prestashop_create_tables.sql'

    template sql_path do
        source "prestashop152.sql.erb"
        owner "root"
        group node['mysql']['root_group']
        mode "0600"
        variables(
            :username => #{username}
        )
        action :create
    end
end 
```

由于某些原因; 它无法理解我传递的“用户名”参数。

PS：我是Ruby n00b。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:52:54.780

`#{username}`是红宝石中的评论。你应该写`"#{username}"`，或者在这种情况下更好，只是`username`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T15:09:37.093

在红宝石中：

*   `#`在**代码**中开始一行注释
*   `#{}`在**字符串**中开始插值 - 大括号中的所有内容都将被解释为 ruby​​ 代码。

由于您`#`在此处使用代码，因此它注释掉了该行的其余部分`{username}`，因此实际上您的代码是这样说的：

```
variables(
  :username =>
) 
```

这会给你一个语法错误。

# android - VerifyError Eclipse“警告：方法很大”

> ID：13362873
> 
> 赞同：1
> 
> 时间：2012-11-13T14:50:34.380
> 
> 标签：android, eclipse, verifyerror

我正在 Eclipse 中运行一个程序，该程序涉及一些数学和数据库输入。在某一时刻，它似乎太多了，因为 Eclipse 给了我一个 VerifyError。当我删除一点时它运行良好，不管我删除什么，所以它不是导致错误的特定部分，而是它的长度，似乎。这是错误消息：

```
10-27 17:04:03.855: W/dalvikvm(12618): VFY: warning: method is huge (regs=643 insnsSize=7090)
10-27 17:04:03.855: W/dalvikvm(12618): VFY:  rejected Lcom/example/simpledatabasetutorial/DatabaseManageActivity;.onClick (Landroid/view/View;)V
10-27 17:04:04.114: W/dalvikvm(12618): VFY: register2 v12-13 values 0,0
10-27 17:04:04.114: W/dalvikvm(12618): VFY:  rejecting opcode 0xab at 0x10f2
10-27 17:04:04.114: W/dalvikvm(12618): VFY:  rejected Lcom/example/simpledatabasetutorial/DatabaseManageActivity;.onClick (Landroid/view/View;)V
10-27 17:04:04.114: W/dalvikvm(12618): Verifier rejected class Lcom/example/simpledatabasetutorial/DatabaseManageActivity;
10-27 17:04:04.114: W/dalvikvm(12618): Class init failed in newInstance call (Lcom/example/simpledatabasetutorial/DatabaseManageActivity;)
10-27 17:04:04.114: D/AndroidRuntime(12618): Shutting down VM
10-27 17:04:04.114: W/dalvikvm(12618): threadid=1: thread exiting with uncaught exception (group=0x40015560)
10-27 17:04:04.145: E/AndroidRuntime(12618): FATAL EXCEPTION: main
10-27 17:04:04.145: E/AndroidRuntime(12618): java.lang.VerifyError: com.example.simpledatabasetutorial.DatabaseManageActivity 
```

任何快速解决方案的想法？也许这还远远不够，如果是这种情况，请告诉我，我将包括相关的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:35:18.720

问题实际上并不在于您的方法太大。与姜饼一样，过大的方法不再导致方法被拒绝。（第一个“rejected”消息只是出现，因为它使用`LOG_VFY_METH`宏来报告方法名称。）

真正的问题是第二个投诉，`register2 v12-13 values 0,0 ... rejecting opcode 0xab`. 0xab 是一个“加双”指令，它接受一个 64 位参数，这意味着两个 32 位 Dalvik 寄存器上的类型应该是“双低”和“双高”。验证者发现它们都是零类型，即“未知”。

所以要么在 Dalvik 验证器中存在错误，要么在生成的代码中存在错误（可能源自“dx”工具）。[您应该在http://b.android.com/](http://b.android.com/)上提交报告。

# php - 使用客户端标头/IP 检索 curl 数据

> ID：13362874
> 
> 赞同：0
> 
> 时间：2012-11-13T14:50:36.710
> 
> 标签：php, curl, http-headers

```
$url_in = 'http://vk.com/video_ext.php?oid=3145131&id=159485516&hash=d821df23b7dc0b54&hd=1';  
function curl($url, $cookie = false, $post = false, $header = false, $follow_location = false)  
{ 
$ch = curl_init($url); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
curl_setopt($ch, CURLOPT_FAILONERROR, true); 
curl_setopt($ch, CURLOPT_HEADER, $header); 
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, $follow_location); 
if ($cookie) { 
    curl_setopt ($ch, CURLOPT_COOKIE, $cookie); 
} 
if ($post) { 
    curl_setopt($ch, CURLOPT_POST, 1); 
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post); 
} 
$response = curl_exec ($ch); 
curl_close($ch); 
return $response; 
} 

$vk_video = curl($url_in); 
preg_match('|host=(.*)&|Uis', $vk_video, $link1); 
preg_match('|uid=(.*)&|Uis', $vk_video, $link2); 
preg_match('|vtag=(.*)&|Uis', $vk_video, $link3); 
$link= $link1['1'].'u'.$link2['1'].'/video/'.$link3['1'].'.360.mp4';
echo $link; 
```

问题是`vtag=`每个IP客户端都不同，那么我如何检索`vtag`客户端IP？

# wpf - 模板中的动画未针对使用路径的动画进行更新

> ID：13362880
> 
> 赞同：1
> 
> 时间：2012-11-13T14:50:56.633
> 
> 标签：wpf, arcgis, esri

我有以下 XAML 动画在 ESRI Map 控件的路径上移动的箭头。动画按预期工作，只是在地图放大或缩小时动画不会失效。如果我将动画移出屏幕并返回屏幕，则动画会正确地重新同步到缩放路径。如何设置触发器以在地图比例更改时强制重绘？

```
<esri:LineSymbol x:Key="tunnelSymbol">
    <esri:LineSymbol.ControlTemplate>
        <ControlTemplate>
            <Canvas>
                <Path x:Name="Element" StrokeStartLineCap="Round" StrokeEndLineCap="Round" StrokeDashCap="Round" StrokeLineJoin="Round" Opacity="0.5" RenderTransformOrigin="2,0" StrokeThickness="5" Stroke="#FF05AA05">
                    <Path.Effect>
                        <DropShadowEffect/>
                    </Path.Effect>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="SelectionStates">
                            <VisualState x:Name="Selected">
                            </VisualState>
                            <VisualState x:Name="Unselected"/>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal">
                                <Storyboard>
                                    <DoubleAnimation BeginTime="0" Duration="0:0:0.1" Storyboard.TargetName="Element" Storyboard.TargetProperty="(Path.StrokeThickness)" To="5"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="MouseOver">
                                <Storyboard>
                                    <DoubleAnimation BeginTime="0" Duration="0:0:0.1" Storyboard.TargetName="Element" Storyboard.TargetProperty="(Path.StrokeThickness)" To="10"/>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                </Path>
                <Path x:Name="Arrow" Stretch="Fill" Width="16" Height="16" StrokeLineJoin="Miter"
                      Data="M 0 -5 L 10 -5 M 5 0 L 10 -5 L 5 -10"
                      Stroke="Black" StrokeThickness="3">
                    <Path.RenderTransform>
                        <TransformGroup>
                            <TranslateTransform X="-8" Y="-8"/>
                            <MatrixTransform>
                                <MatrixTransform.Matrix>
                                    <Matrix/>
                                </MatrixTransform.Matrix>
                            </MatrixTransform>
                        </TransformGroup>
                    </Path.RenderTransform>
                    <Path.Triggers>
                        <EventTrigger RoutedEvent="Path.Loaded">
                            <BeginStoryboard>
                                <Storyboard>
                                    <MatrixAnimationUsingPath x:Name="MatrixAnimation" Storyboard.TargetName="Arrow"
                                                              Storyboard.TargetProperty="RenderTransform.Children[1].Matrix"
                                                              DoesRotateWithTangent="True"
                                                              Duration="0:0:5"
                                                              BeginTime="0:0:0"
                                                              RepeatBehavior="Forever" PathGeometry="{Binding Data, Source=Element, BindsDirectlyToSource=True}">
                                    </MatrixAnimationUsingPath>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Path.Triggers>
                </Path>
            </Canvas>
        </ControlTemplate>
    </esri:LineSymbol.ControlTemplate>
</esri:LineSymbol> 
```

# jquery - 使用 JQuery 发布后 ViewModel 列表数据丢失

> ID：13362882
> 
> 赞同：1
> 
> 时间：2012-11-13T14:51:00.487
> 
> 标签：jquery, asp.net-mvc-3, razor

我正在使用 asp.net mvc 3 开发一个 Web 应用程序，并尝试修改包含在我的 ViewModel 中的列表，然后将其与 JQuery 更改一起发布到我的控制器。问题是 ViewModel 在到达时不包含任何值。

ViewModel 看起来像这样：

```
public class OfferListViewModel
{
    public List<OfferViewModel> Offers { get; set; }
}

public class OfferViewModel
{
    public Guid Id { get; set; }

    public double Total { get; set; }
} 
```

控制器方法：

```
[Authorize]
public ActionResult Index()
{
    OfferList list = this._offerService.GetOfferListById(1234);

    OfferListViewModel model= new OfferListViewModel
    {
        Offers = list.OfferListProducts.Where(o => o.Product.ProductCategory == (int)ProductCategory.Print).ToViewModel().ToList()
    };

    return View(model);
} 
```

list.OfferListProducts 是一个 IEnumerable 转换了一个助手 ToViewModel() 最后 ToList()

```
[HttpPost]
[Authorize]
public ActionResult UpdateOfferList(OfferListViewModel offers)
{
    // do something
} 
```

看法：

```
@model Models.OfferListViewModel 

<form id="mywall-updateofferlist-form" class="form-horizontal" action="@Url.Action("UpdateOfferList", "MyWall")" method="post">
    @Html.HiddenFor(model => model.ProductCategory)
    <table class="table table-hover">
        <thead>
            <tr>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
            @for (int count=0; count < Model.Offers.Count(); count++)
            {
                @Html.HiddenFor(model => model.Offers[count].Id)
                <tr>
                    <td>@Html.EditorFor(model => model.Offers[count].Total)</td>
                </tr>
            }
        </tbody>
    </table>
</form> 
```

JavaScript：

```
<script type='text/javascript'>
    $(function () {
        $('form[id=mywall-updateofferlist-form]').change(function () {
            if ($(this).valid()) {
                $.post($(this).attr('action'), $(this).serialize(), function (data) {
                    if (data.success) {
                        // do something
                    } else {
                        // do something else
                    }
                });
                return false;
            }
        });
    });
</script> 
```

有人能发现错误吗？我在 ViewModels 中有更多属性，这些属性在我的控制器 post 方法中不一定需要，因此未映射/省略以简化此处的描述。这可能是一个问题吗？Id 与 HiddenFor 映射，因此在发布后是否应包含在 ViewModel 中，其他值应为 null？

编辑：

萤火虫帖子：

```
Offers[0].Id    1c5bdc21-8f8c-4ad2-a4a0-49e4011e3ba6
Offers[0].Total 0.6
Offers[1].Id    12ede957-8a7e-47a9-8e86-a388d60ea2d9
Offers[1].Total 1.12

Offers%5B0%5D.Id=1c5bdc21-8f8c-4ad2-a4a0-49e4011e3ba6&Offers%5B0%5D.Total=0.6&Offers%5B1%5D.Id=12ede957-8a7e-47a9-8e86-a388d60ea2d9&Offers%5B1%5D.Total=1.12 
```

我的问题与此类似：[View Model IEnumerable<> property is come back null (not binding) from post method?](https://stackoverflow.com/questions/9915395/view-model-ienumerable-property-is-coming-back-null-not-binding-from-post-me)

但是我已经将我的 IEnumerable 转换为一个列表，该列表可以正确显示但在发布回控制器时未映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:01:15.070

```
<script type='text/javascript'>
    $(function () {
        $('form[id=mywall-updateofferlist-form]').change(function () {

           var $this = $(this);
            if ($this.valid()) {
                $.post($this.attr('action'), $this.serialize(), function (data) {
                    if (data.success) {
                        // do something
                    } else {
                        // do something else
                    }
                });
                return false;
            }
        });
    });
</script> 
```

试试这个......当它在函数`$(this)`内部时不等于表单对象......`$post`

您应该使用 Firebug 控制台查看是否通过了正确的帖子信息。

# sql - 如何在 Rails 中为关联模型添加唯一条件

> ID：13362885
> 
> 赞同：1
> 
> 时间：2012-11-13T14:51:21.910
> 
> 标签：sql, ruby-on-rails, activerecord, associations, unique

我有一个简单的关系

`Questionnaire has_many Answers`

我有多个问卷。我想在不同的问卷中获得最新的 5 个答案。

如果我做：

`Answer.find(:all, :order => "id desc" , :limit => 5)`

我得到了最后 5 个答案，但大多数时候所有 5 个答案都属于同一份问卷。如何从不同的问卷中查询最新答案，例如

`Answer.find(:all, :order => "id desc" , :limit => 5, :conditions => "DISTINCT questionnaire.id") ??`

（这个想法是向管理员显示活动提要，例如用户 A 于 2012 年 11 月 11 日回复了问卷 X 中的答案，用户 B 于 2012 年 1 月 11 日回复了问卷 Y 中的答案等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:18:21.150

如果您使用的是 Postgres，我会这样做

```
Answer.find(:all,
  :order => "answers.attr1 asc, answers.attr2 asc, answers.attr3 asc, ..." , :limit => 5,
  :select => "DISTINCT ON (answers.questionnaire_id) answers.*") 
```

请注意，您可能必须在 order 子句中列出答案表中的每一列，除了 questions_id 之外，以便 Postgres 可以确定您要选择什么，否则它可能会模棱两可并且您可能会收到 SQL 错误。

看在上帝**的份**上升级到 Rails 3！

导轨 3：

```
Answer.order("answers.attr1 asc, answers.attr2 asc, answers.attr3 asc, ...").
  limit(5).select("DISTINCT ON (answers.questionnaire_id) answers.*") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:24:36.963

使用 GROUP BY 获取每个问题的最新答案，并限制为最新的 5 个：

```
latest_answer_ids = Answer.group(:questionnaire_id).
                           order('MAX(answers.id)').
                           limit(5).maximum(:id).values
latest_answers = Answer.where(:id => latest_answer_ids) 
```

如果您需要将其作为一个查询执行，您可以使用 Arel 构建一个子查询，如下所示：

```
answers = Answer.arel_table
latest_answers = Answer.where(:id =>
           answers.
           group(:questionnaire_id).
           project('max(id)')
  ).order('id desc').limit(5) 
```

这里的好处是子查询可以在任何 DBMS 中工作。

# sql - 更新触发器 SQL Server 2008

> ID：13362888
> 
> 赞同：1
> 
> 时间：2012-11-13T14:51:30.797
> 
> 标签：sql, sql-server-2008, view, triggers, sql-update

我在 SQL Server 2008 中创建了一个视图，其中包括连接大约 5 个不同的表来访问我需要的数据。

我将如何创建更新触发器来更新此视图中的字段？因此，例如，如果姓氏是 smith，我想将所有名字更新为 peter。

```
If Fname = peter
update Sname to Smith
end if 
```

提前谢谢了

更新这是我到目前为止所拥有的

```
CREATE TRIGGER SurName
   ON  ViewCustomer
   AFTER UPDATE
AS 
if FName= 'Peter'
BEGIN
    update ViewCustomer set SName= 'Smith'
    SET NOCOUNT ON;

END
GO 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:42:24.363

这应该可以完成这项工作。

表和视图定义。

```
CREATE TABLE Customer
  (ID int,
   FName varchar(200),
   SName varchar(200),
   RoleID int);

CREATE TABLE CustomerRole
 (RID int,
  Name varchar(100));

CREATE VIEW ViewCustomer AS
SELECT *
FROM Customer JOIN CustomerRole on RoleID = RID; 
```

触发器定义。

```
CREATE TRIGGER ViewCustomerTrigger ON ViewCustomer
INSTEAD OF UPDATE
AS
BEGIN
SET NOCOUNT ON

UPDATE Customer 
SET FName = I.FName,
    SName = CASE I.FName WHEN 'Peter' THEN 'Smith' ELSE I.SName END,
    RoleID = I.RoleID
FROM INSERTED I JOIN Customer C ON I.ID = C.ID

UPDATE CustomerRole
SET Name = I.Name
FROM INSERTED I JOIN CustomerRole R ON I.RID = R.RID
END
GO 
```

样本数据

```
INSERT INTO Customer (ID, FName, SName, RoleID)
VALUES (1, 'John', 'Wayne', 1);

INSERT INTO Customer (ID, FName, SName, RoleID)
VALUES (2, 'Jack', 'Jackson', 1);

INSERT INTO CustomerRole (RID, Name)
VALUES (1, 'Manager'); 
```

此更新将导致触发器将 SName 更新为“Smith”

```
UPDATE ViewCustomer
SET FName = 'Peter'
WHERE ID = 1 
```

[这](http://sqlfiddle.com/#!3/01a69/1/0)是它的 SQLFiddle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:25:41.737

您需要为视图创建一个 INSTEAD OF 触发器。您可以检查：

[http://msdn.microsoft.com/en-us/library/ms188601.aspx](http://msdn.microsoft.com/en-us/library/ms188601.aspx)

# c - 当我尝试增加矩阵大小时，在 AMD openCL/C 中实现矩阵向量乘法会导致系统死机

> ID：13362890
> 
> 赞同：2
> 
> 时间：2012-11-13T14:51:43.767
> 
> 标签：c, opencl, amd-gpu

对于大学的一个项目，我正在使用 AMD OpenCL 实现矩阵向量乘法。我使用的机器是运行 Ubuntu 12.04 的全新台式机，配备 Radeon HD 7970 和 AMD FX-4100 四核处理器。我 AMD APP 1.2 和 Radeon 的最新 ATI Catalyst 驱动程序。这是我正在尝试使用的内核。

```
__kernel void mvKernel(__global float* a, const __global float* x, __global float* y, int m, int n)
{
float sum = 0.0f;
 __global float* A;
int i;
int j = 0;
int indx = get_global_id(0);
__local float xs[2048];
for(i = get_local_id(0); i < n; i+= get_local_size(0)) {
    xs[i] = x[i];
} 
mem_fence(CLK_LOCAL_MEM_FENCE|CLK_GLOBAL_MEM_FENCE);
A = &a[indx];
for(i = 0; i < n; i++) {
    sum += xs[i] * A[j];
    j += m;
}
y[indx] = sum;
} 
```

在 GPU 上针对 256 x 256 的矩阵大小运行此程序时，生成的结果是正确的并且不会出现任何问题。但是，当我尝试增加作为命令行参数给出的矩阵大小时，系统将挂起，需要重新启动。但是，当我使用 AMD 的 CodeXL 调试器/分析器运行代码时，代码大部分时间都会运行，没有错误。这是我运行的主机代码

```
#include <stdio.h>
#include <stdlib.h>
#include <CL/cl.h>
#include <math.h>
#include <string.h>

char* readSource(const char* sourceFilename);

void randomInit(float* data, int size)
{
int i =0;
for(i; i < size; i++)
    data[i] = (rand()/(float)RAND_MAX) * 10;
}

void cpuMV (float* y, float* A, float* X, int M, int N)
{
for(int i = 0; i< M; i++) {
    double sum = 0;
    y[i] = 0;
    for(int k = 0; k < N; k++) {
        double a = A[i + k* M];
        double x = X[k];
        sum += a * x;
    }
    y[i] = (float) sum;
 }
}

int main( int argc, char ** argv) {
int M = atoi(argv[1]);//1024;
int N = atoi(argv[2]);//1024;
float *A, *x;
float *y;
A = (float *)malloc(sizeof(float) * M * N);
x = (float *)malloc(sizeof(float) * N);
y = (float *)malloc(sizeof(float) * M);
randomInit(A, M * N);
randomInit(x, N);
int wrong;
wrong = 0;  
cl_int err;
cl_uint numPlatforms;
cl_platform_id *platforms;

err = clGetPlatformIDs(0, NULL, &numPlatforms);
if (err != CL_SUCCESS) {
    printf("clGetPlatformIDs failed\n");
    exit(-1);
}

if(numPlatforms == 0) {
    printf("No platforms detected.\n");
    exit(-1);   
}
platforms = (cl_platform_id*)malloc(numPlatforms*sizeof(cl_platform_id));

clGetPlatformIDs(numPlatforms, platforms, NULL);

printf("%u platforms found\n", numPlatforms);
for(int i =0; i < numPlatforms; i++) {
    char buff[100];
    printf("Platform %u:\n", i);
    err = clGetPlatformInfo(platforms[i], CL_PLATFORM_VENDOR, sizeof(buff), buff, NULL);
    printf("\tVendor: %s\n", buff);
    err = clGetPlatformInfo(platforms[i], CL_PLATFORM_NAME, sizeof(buff), buff, NULL);
    printf("\tName: %s\n", buff);
    if (err != CL_SUCCESS) {
        printf("clGetPlatformInfo failed\n");
        exit(-1);
    }
}
printf("\n");

cl_uint numDevices = 0;
cl_device_id *devices;
err = clGetDeviceIDs(platforms[0], CL_DEVICE_TYPE_GPU, 0, NULL, &numDevices);
if(err != CL_SUCCESS) {
    printf("clGetDeviceIDs failed\n");
    exit(-1);
}
if (numDevices == 0){
    printf("No devices found\n");
    exit(-1);
}
devices = (cl_device_id*)malloc(numDevices*sizeof(cl_device_id));
err = clGetDeviceIDs(platforms[0], CL_DEVICE_TYPE_GPU, numDevices, devices, NULL);
printf("%u devices found\n", numDevices);
for(int i =0; i < numDevices; i++) {
    char buff[100];
    printf("Device %u:\n", i);
    err = clGetDeviceInfo(devices[i], CL_DEVICE_VENDOR, sizeof(buff), buff, NULL);
    printf("\tVendor: %s\n", buff);
    err = clGetDeviceInfo(devices[i], CL_DEVICE_NAME, sizeof(buff), buff, NULL);
    printf("\tName: %s\n", buff);
    if (err != CL_SUCCESS) {
        printf("clGetDeviceInfo failed\n");
        exit(-1);
    }
}
cl_context context;
context = clCreateContext(NULL, numDevices,devices, NULL, NULL, &err);
if(err != CL_SUCCESS){
    printf("clCreateContext failed\n");
    exit(-1);
}

cl_command_queue cmdQueue;
cmdQueue = clCreateCommandQueue(context, devices[0], 0, &err);
if(err != CL_SUCCESS) { 
    printf("clCreateCommandQueue failed\n");
    exit(-1);
}

cl_mem d_A, d_x;
cl_mem d_y;
d_A = clCreateBuffer(context, CL_MEM_READ_ONLY|CL_MEM_COPY_HOST_PTR, M * N * sizeof(float), A, &err);
if (err != CL_SUCCESS) {
    printf("clCreateBuffer for A failed\n");
    exit(-1);
}
d_x = clCreateBuffer(context, CL_MEM_READ_ONLY|CL_MEM_COPY_HOST_PTR,  N * sizeof(float), x, &err);
if (err != CL_SUCCESS) {
    printf("clCreateBuffer for x failed\n");
    exit(-1);
}
d_y = clCreateBuffer(context, CL_MEM_READ_WRITE, M * sizeof(float), NULL, &err);
if (err != CL_SUCCESS) {
    printf("clCreateBuffer for y failed\n");
    exit(-1);
}
cl_program program;
char* source;
const char *sourceFile = "MVM_Kernel2.cl";
source = readSource(sourceFile);
program = clCreateProgramWithSource(context, 1, (const char**) &source, NULL, &err);
if (err != CL_SUCCESS) {
    printf("clCreateProgramFailed");
    exit(-1);
}
cl_int buildErr;
buildErr = clBuildProgram(program, numDevices, devices, NULL, NULL, NULL);
if (buildErr != CL_SUCCESS) {
    printf("Program failed to build,\n");
    cl_build_status buildStatus;
    for(int i = 0; i < numDevices; i++) {
        clGetProgramBuildInfo(program, devices[i], CL_PROGRAM_BUILD_STATUS, sizeof(cl_build_status), &buildStatus, NULL);
        if(buildStatus == CL_SUCCESS) {
            continue;
        }
        char *buildLog;
        size_t buildLogSize;
        clGetProgramBuildInfo(program, devices[i], CL_PROGRAM_BUILD_LOG, 0, NULL, &buildLogSize);
        buildLog = (char *)malloc(buildLogSize);
        clGetProgramBuildInfo(program, devices[i], CL_PROGRAM_BUILD_LOG,buildLogSize, buildLog, NULL);
        buildLog[buildLogSize -1] = '\0';
        printf("Device %u Build Log:\n%s\n", i, buildLog);
        free(buildLog);
    }
    exit(0);
}
else {
    printf("No build errors\n");
}

cl_kernel kernel;
kernel = clCreateKernel(program, "mvKernel", &err);
if(err != CL_SUCCESS) {
    printf("clCreateKernel failed\n");
    exit(-1);
}
err = clSetKernelArg(kernel, 0, sizeof(cl_mem), &d_A);
err |= clSetKernelArg(kernel, 1, sizeof(cl_mem), &d_x);
err |= clSetKernelArg(kernel, 2, sizeof(cl_mem), &d_y);
err |= clSetKernelArg(kernel, 3, sizeof(int), &M);
err |= clSetKernelArg(kernel, 4, sizeof(int), &N);

size_t globalWorkSize[1];
globalWorkSize[0] = M * N;
size_t localWorkSize[1];
localWorkSize[0] = 256;

err = clEnqueueNDRangeKernel(cmdQueue, kernel, 1, NULL, globalWorkSize, localWorkSize, 0, NULL, NULL);
clEnqueueReadBuffer(cmdQueue, d_y, CL_TRUE, 0, M * sizeof(float), y, 0, NULL, NULL);
clFlush(cmdQueue);
err = clFinish(cmdQueue);
if(err != CL_SUCCESS) {
    printf("ERROR!!");
    exit(-1);
}
clReleaseKernel(kernel);
clReleaseProgram(program);
clReleaseCommandQueue(cmdQueue);
clReleaseMemObject(d_A);
clReleaseMemObject(d_x);
clReleaseMemObject(d_y);
clReleaseContext(context);
for(int i=0; i < (M <10 ? M : 10); i++)
    printf("vector y = %f\n", y[i]);
float* refY;
refY = (float*)malloc(M*sizeof(float));
cpuMV(refY, A, x, M, N);
for (int i = 0; i < M; ++i) {
    float diff = refY[i] - y[i];
    if (fabsf(diff)/ refY[i] > 1e-4)
        wrong++;
}
printf("There were %d errors!!\n", wrong);
free(A);
free(y);
free(x);
free(source);
free(platforms);    
free(devices);
}

char* readSource(const char *sourceFilename) {
FILE *fp;
int errs;
int size;
char *source;
fp = fopen(sourceFilename, "rb");
errs = fseek(fp, 0, SEEK_END);
if(errs != 0) {
    printf("Error seeking to end of file");
    exit(-1);
}
size = ftell(fp);
if(size<0) {
    printf("Errror getting file position");
    exit(-1);
}
errs = fseek(fp, 0, SEEK_SET);
if(errs != 0){
    printf("Error seeking to start of file\n");
    exit(-1);
}
source = (char*)malloc(size +1);
errs = fread(source, 1, size, fp);
if(errs != size) {
    printf("only read %d bytes\n", errs);
    exit(0);
}
source[size]= '\0';
return source;
} 
```

最终这需要在约 10000 阶的矩阵上工作 **编辑** 我还在我的笔记本电脑上尝试了相同的代码，它有一个 Nvidia GT525m，并且该程序对于高达 352 * 352 的矩阵运行良好，任何更大的矩阵都将是零，但它不会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T22:35:49.860

问题在于 globalWorkSize 太大 (M * N)，而它本应只有 M。这一定是 GPU 过载并导致系统冻结。我现在可以在 Nvidia 和 AMD GPU 以及 AMD CPU 上可靠地运行代码

# html - 工作 CSS 定位不取决于屏幕大小

> ID：13362891
> 
> 赞同：0
> 
> 时间：2012-11-13T14:51:50.303
> 
> 标签：html, css, browser, position

我在使用 CSS 定位元素时遇到了很多问题，这些问题与使用不同尺寸屏幕的人有关。什么是定位元素的防弹方法，以便无论视口有多大，它们都可以保持在屏幕上的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T16:05:23.017

我们这里有两个简单的例子。

在演示 1 中，无论屏幕大小/分辨率如何，div 都将始终位于屏幕的左上角。

[演示 1](http://jsfiddle.net/HGdcN/1/)

```
<div id="test">This div will always appear on top left by default regardless of screen size.</div>​
#test{ width:150px; height:150px; background-color:#666; }​ 
```

这个总是会粘在右手边，留有一些余量

[演示 2](http://jsfiddle.net/HGdcN/3/)

```
<div id="test">This div will always appear on right hand with 100 margin.</div>​
#test{float:right; margin-right:100px; width:150px; height:150px; background-color:#666; }​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:09:01.410

包装的 div。例如：

html:

```
<div class="wraped">
  <div class="someDiv">
      Hi
  </div>
  <div class="someDiv">
    Hi reloaded
  </div>
</div>​ 
```

CSS：

```
​.wraped {
  background:grey;
  width:500px;
  height:300px;
  margin:auto                
 }
 .someDiv  {
   width:230px;
   text-align:center;
   padding:10px;
   background:#ccc;
   outline:1px solid black;
   float:left;
  } 
```

[你可以在http://jsfiddle.net/wandarkaf/2VVcm/](http://jsfiddle.net/wandarkaf/2VVcm/)中预览这个 ​</p>

# php - 加入 Magento 的问题

> ID：13362893
> 
> 赞同：2
> 
> 时间：2012-11-13T14:51:53.317
> 
> 标签：php, magento

```
Table 1
--------------
|reseller_id |
|1           |
|2           |
|3           |
|4           |
--------------

Table 2
-------------------------------
|reseller_id | merchandise_id |
|1           | 1              |
|1           | 3              |
|2           | 1              |
|2           | 4              |
|3           | 2              |
-------------------------------

select * from reseller_maps inner join reseller_merch on reseller_maps.reseller_id = reseller_merch.reseller_id; 
```

在数据库方面给了我我正在寻找的东西。但是，我得到一个

```
 Call to undefined method Namespace_Class_Model_Mysql4_Reseller_Collection::joinTable() 
```

尝试在 Magento 中执行 $collection->joinTable() 时。

我试过使用 getSelect 和 join()：

```
 $collection = Mage::getModel('maps/reseller');
        $collection->getSelect()
            ->join( array( 'reseller_merch'=>$this->getTable('reseller_merch')), 'reseller_maps.reseller_id= reseller_merch.reseller_id', array('reseller_merch.*')); 
```

我得到：

```
 SQLSTATE[42000]: Syntax error or access violation: 1103 Incorrect table name '' 
```

据我所知，这是直接来自 wiki 上的示例代码：http: [//www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/using_collections_in_magento)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:36:33.013

假设您正在对标准集合进行子类化，它应该是：

```
$collection->getSelect()->join($this->getTable('maps/[table_entity]'), 'main_table.reseller_id= reseller_merch.reseller_id'); 
```

这是假设您的实体以这种方式命名。

# jsf - JSF best Way to pass parameters

> ID：13362897
> 
> 赞同：2
> 
> 时间：2012-11-13T14:52:00.523
> 
> 标签：jsf

i'm currently working with JSF, but since i'm a old and grouchy php-dev i always mess up with the GET-Parameters of an request. (In PHP you can access the request Paramerts whenever you want, using the `$_GET["paramname"]` Array.

Now, i'm working on an User Managment System. (CRUD) Usually i go with a list of all available users, having options like edit / delete. The edit link is then pointing to `http:\\localhost\editUser.xhtml?userId=5` for example.

I have also an Controller called `UserEditController` which basically holds the user entity and invokes the update.

So, inside this Controller I'm using the `@PostConstruct` Annotation to load the user with the id 5 from the DataService and store it inside a property.

Problem here is: Wenn entering PostConstruct-Method in the `APPLY_REQUEST_VALUES`-Phase im not able to access the request Parameter Map of Faces Context (Will return null for userId)

Controller (simplified):

```
@Named
@RequestScoped
UserEditController{

@Inject
private UserDataService userDataService;

private User currentUser;

@PostConstruct
public void initValues(){
    String id = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("userId");

    this.currentUser = userDataService.getUserById(id);
}

public String saveCurrentUser(){
    userDataService.updateUser(this.currentUser);
    return "userManagement"; //return to overview after saving
}

//getter and setter
} 
```

This works as intened. All the Form-Fields now are bound to user's properties like `#{userEditController.currentUser.forename}` etc.

I now added a save button with action attribute `{userEditController.saveCurrentUser()}`

However the script then enters the `APPLY_REQUEST_VALUES`-Phase And the UserEditController's initValues is called again.

*   this results in a nullpointer Exception, when trying to access the RequestParameterMap
*   and obviously i dont want to reload the user BEFORE saving it :-)

This sounds like a stupid question but i think i'm messing up between the PHP-Style and the JSF-Style to handle things.

Any Help would be appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:46:26.973

将用户（或用户 ID）传递给 BackingBean 的常用方法是使用以下选项之一：

[http://www.mkyong.com/jsf2/4-ways-to-pass-parameter-from-jsf-page-to-backing-bean/](http://www.mkyong.com/jsf2/4-ways-to-pass-parameter-from-jsf-page-to-backing-bean/)

我认为主要问题是您的 bean 是`@RequestScoped`. 如果您在编辑页面上按下保存按钮，您将发送一个新请求，因此将创建一个请求范围 bean 的新实例。只需将您的 bean 更改为`@ViewScoped`.

更多信息：

*   [JSF 2 中的通信](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T11:11:08.133

我试图将其更改为 ViewScoped 但每次访问属性时它都会以“调用构造函数”为 bean 结束......

同时我尝试了很多东西，没有按预期工作：

我可以让它工作的唯一情况是将控制器设置为“SessionScoped”。但我认为这不是一个好方法，因为我需要处理“清理”值并导致大量未定义（初始化）的 bean ......

我创建了一个简单的项目来玩 arround。这是有效的会话范围版本。但是如果我改变范围，我需要在点击保存按钮时“重新加载”当前用户。如果无法访问请求参数，我不知道如何实现。

（我尝试使用“表单”再次传递用户 ID，但后来我在“第一次”传递 id 时遇到问题）

这是我的样本。（Getter 和 Setter 可用，为了简短起见，没有提及）

用户等级：

```
public class User {

   private String firstname;
   private String lastname;

   public User (String f, String l){
       this.firstname = f;
       this.lastname = l;
   }
} 
```

数据库模拟器：

```
@Named("dbSimulator")
@SessionScoped
public class DBSimulator implements Serializable {

/**
 * 
 */
private static final long serialVersionUID = 659826879566280911L;

private Map<String, User> data;

public DBSimulator() {
    //Load data
    User u1 = new User("Mickey", "Maus");
    User u2 = new User("Peter", "Pan");

    this.data = new HashMap<String, User>();
    this.data.put("Mickey", u2);
    this.data.put("Max", u1);
}

public List<User> getUserList(){
    List<User> l = new LinkedList<User>();

    for (Map.Entry<String, User> user : data.entrySet()) {
        l.add(user.getValue());
    }

    return l;

}

public void saveUser(User user){
    this.data.put(user.getFirstname(), user);
}
} 
```

用户管理控制器：

```
@Named
@SessionScoped
public class UserManagementController implements Serializable {

/**
 * 
 */
private static final long serialVersionUID = -4300851229329827994L;

@Inject
private DBSimulator dbSimulator;

private List<User> users;

public UserManagementController() {
    System.out.println("UserManagementController:construct()");
}

@PostConstruct
public void LoadUsers(){
    this.setUsers(this.dbSimulator.getUserList());
}
} 
```

用户编辑控制器

```
@Named
@SessionScoped
public class UserEditController implements Serializable{

/**
 * 
 */
private static final long serialVersionUID = 1867483972880755108L;

@Inject
private DBSimulator dbSimulator;

private User user;

public UserEditController() {
    System.out.println("UserEditController:construct()");
}

public String activateUser(User user){
    this.setUser(user);
    System.out.println("setting User");
    return "userEdit";
}

public String save(){
    //Save user
    this.dbSimulator.saveUser(user);
    return "userManagement";
}

} 
```

最后两个 XHTML 文件：UserManagement.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:f="http://java.sun.com/jsf/core">

<h:head>
<title>Test</title>
</h:head>
<h:body>
    <h:outputText value="Select user to edit." />

    <h:dataTable value="#{userManagementController.users}" var="user">
        <h:column>
            <f:facet name="header">Firstname</f:facet>
            <h:outputText value="#{user.firstname}" />
        </h:column>

        <h:column>
            <f:facet name="header">Lastname</f:facet>
            <h:outputText value="#{user.lastname}" />
        </h:column>

        <h:column>
            <f:facet name="header">Options</f:facet>
            <h:form>
                <h:commandLink action="userEdit" actionListener="#{userEditController.activateUser(user)}" value="edit user" />
            </h:form>
        </h:column>
    </h:dataTable>
</h:body>
</html> 
```

用户编辑.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:f="http://java.sun.com/jsf/core">

<h:head>
<title>Test</title>
</h:head>
<h:body>
    <h:form>
        <h:inputText value="#{userEditController.user.firstname}"></h:inputText>
        <br /><br />
        <h:inputText value="#{userEditController.user.lastname}"></h:inputText>
        <br /><br />
        <h:commandButton value="save" action="#{userEditController.save}"></h:commandButton>
    </h:form>

</h:body>
</html> 
```

ps.：我不希望任何人“更正”我的代码 - 但也许有人能够看到完整的例子，我的 headeck 来自哪里:)

使用 ViewScoped Bean 会生成以下控制台输出：

```
[pageload]
12:07:49,126 INFO  [stdout] (http--0.0.0.0-8090-3) UserManagementController:construct()
12:07:49,334 INFO  [stdout] (http--0.0.0.0-8090-3) UserManagementController:construct()
12:07:49,341 INFO  [stdout] (http--0.0.0.0-8090-3) UserManagementController:construct()
[edit click]
12:08:35,410 INFO  [stdout] (http--0.0.0.0-8090-3) UserManagementController:construct()
12:08:35,411 INFO  [stdout] (http--0.0.0.0-8090-3) UserManagementController:construct()
12:08:35,412 INFO  [stdout] (http--0.0.0.0-8090-3) UserManagementController:construct()
12:08:35,413 INFO  [stdout] (http--0.0.0.0-8090-3) UserManagementController:construct()
12:08:35,414 INFO  [stdout] (http--0.0.0.0-8090-3) UserManagementController:construct()
12:08:35,414 INFO  [stdout] (http--0.0.0.0-8090-3) UserManagementController:construct()
12:08:35,415 INFO  [stdout] (http--0.0.0.0-8090-3) UserManagementController:construct()
12:08:35,416 INFO  [stdout] (http--0.0.0.0-8090-3) UserManagementController:construct()
12:08:35,416 INFO  [stdout] (http--0.0.0.0-8090-3) UserManagementController:construct()
12:08:35,417 INFO  [stdout] (http--0.0.0.0-8090-3) UserManagementController:construct()
12:08:35,476 INFO  [stdout] (http--0.0.0.0-8090-3) UserEditController:construct()
12:08:35,478 INFO  [stdout] (http--0.0.0.0-8090-3) setting User
12:08:35,494 INFO  [stdout] (http--0.0.0.0-8090-3) UserEditController:construct()
12:08:35,497 INFO  [stdout] (http--0.0.0.0-8090-3) UserEditController:construct() 
```

显然用户不再设置，因为（ViewScoped）UserEditController在设置用户后已经重建了两次......

# jquery - 在 Jquery 工具提示插件中插入新行

> ID：13362899
> 
> 赞同：1
> 
> 时间：2012-11-13T14:52:04.327
> 
> 标签：jquery, tooltip, jquery-tooltip

下面是我用于我的 jquery 插件的 css。

> **CSS**

```
<style type="text/css">
    body, div { font-family: arial, sans-serif;}
    body { margin: 0; padding: 0; }
    h3 {
        font-size: 110%;
        font-weight: normal;
        margin: .2em 0 .5em 0;
    }
    #tooltip {
        position: absolute;
        z-index: 3000;
        border: 1px solid #111;
        padding: 5px;
    }
    #tooltip h3, #tooltip div { margin: 0; }
</style> 
```

> **脚本**

```
<script type="text/javascript">
    $(function () {
        $('.studentclass').tooltip({ showURL: false, positionLeft: true, html:true});
        $("#block").click($.tooltip.block);
    });
</script> 
```

> **HTML**

```
<label id="lblstudentname" 
    runat="server" 
    title="Name of the student in the class "
    class="studentclass">
        STUDENT
    </label> 
```

我曾尝试使用 /br 、 /r/n 并在标题中按回车键，但它们似乎都不起作用。有人可以帮帮我吗 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:54:33.540

[该插件](http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/)允许在工具提示中使用 HTML。换行符的 HTML 是`<br>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:56:52.963

您可以使用 jquery Tipsy，它支持`<br />`.

或者，如果您仍想使用 jquery 工具提示，您可以这样做 -[带有 jquery 工具提示插件的多条 HTML 行，](https://stackoverflow.com/questions/2490644/multiple-html-lines-with-jquery-tooltip-plugin?answertab=active#tab-top)如果您想要完整的 html 支持，这是一个重复的问题/答案，类似于您想要的。

jquery 工具提示也应该支持`<br />`。

# php - 如果其他脚本 == 'POST'，则使用 $_SERVER['REQUEST_METHOD' == 'POST'] 阻止脚本运行

> ID：13362903
> 
> 赞同：0
> 
> 时间：2012-11-13T14:52:14.210
> 
> 标签：php

我的侧边栏中包含一个计算器表单，位于登录表单下方。当用户提交登录表单时，该操作会触发：

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {} 
```

我的另一种形式的陈述。我尝试添加：

```
if (isset($varOne)) {} 
```

声明，使用：

```
$varOne = $_POST['varOne']; 
```

来自计算器脚本，但这也不起作用。如果提交登录表单，计算器脚本将继续运行。我们必须如何阻止这种疯狂？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T14:54:48.600

您可以将两者结合起来：

```
if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['varOne'])) {
  // calculator button was pressed
} 
```

或者：

```
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
  if (isset($_POST['varOne'])) {
    // calculator button was pressed
  } else {
    // probably a login post
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:01:50.200

一种可能的方法是通过`<form>`标签的 get 方法传递额外的参数。

```
<form action="somefile.php?formname=login" method="post"> 

</form> 
```

对于您的计算器表格，您可以输入

```
 <form action="somefile.php?formname=calculator" method="post"> 

 </form> 
```

最后，在您的表单处理脚本上，您可以检查

```
<?php 
   if(isset($_GET['formname'])){
     if($_GET['formname']=='login'){
           //get login form fields 
          $someVar=$_POST['fieldname']; //etc etc

     }

     if($_GET['formname']=='calculator'){
           //get calculator form fields 
          $someVar=$_POST['fieldname']; //etc etc

     }

   }
?> 
```

# c# - 将“控件”转换为文本框并为其赋值

> ID：13362904
> 
> 赞同：1
> 
> 时间：2012-11-13T14:52:14.780
> 
> 标签：c#, asp.net, controls

我正在尝试创建一个表单。表单控件名称总是相同的。但是控制类型会改变。例如，我有一个名为“first_name”的控件。初始化页面时，它从数据库中检索数据，说明控件的类型（TextBox、DropDownList 或 CheckBox）；然后在页面上动态创建表单。为了保持视图状态，我在 OnInit 方法中创建了控件。

```
protected override void OnInit(EventArgs e)
{
    Control first_name;
    string ControlType = GridView1.Rows[0].Cells[1].Text;
    switch (ControlType)
    {
        case("TextBox"):
            first_name = new Control() as TextBox; first_name.ID = "first_name"; this.Controls.Add(first_name);
            break;
        case("DropDownList"):
            first_name = new Control() as DropDownList; first_name.ID = "first_name"; this.Controls.Add(first_name);
            break;
        case("CheckBox"):
            first_name = new Control() as CheckBox; first_name.ID = "first_name"; this.Controls.Add("first_name");
            break;
    }
} 
```

然后我将控件呈现到页面。

```
protected override void Render(HtmlTextWriter writer)
{
    writer.Write("first_name: ");
    first_name.RenderControl(writer);
} 
```

接下来，我尝试为控件分配值。这是我遇到问题的地方。我知道当它被全局声明时，它被声明为一个控件并保存这些值。

有没有办法在函数内全局声明它或在全局声明后更改控件的类型？

```
protected void Page_Load(object sender, EventArgs e)
{
    switch (first_name.GetType().ToString())
    {
        case ("TextBox"):
            first_name.Text = "Your First Name...";
            break;
        case ("DropDownList"):
            first_name.Items.Add("Jason");
            first_name.Items.Add("Kelly");
            first_name.Items.Add("Keira");
            first_name.Items.Add("Sandi");
            first_name.Items.Add("Gary");
            break;
        case ("CheckBox"):
            first_name.Checked = true;
            break;
    }        
} 
```

请提供一种方法，我可以做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T14:56:33.257

在你的`OnInit`你应该做`new TextBox()`而不是`new Control() as TextBox`因为第二个只会返回`null`。

你`Page_Load`会是这样的：

```
if (first_name is TextBox)
    ((TextBox)first_name).Text = "Your First Name...";
else if (first_name is DropDownList)
{
    var drp = (DropDownList)first_name;
    drp.Items.Add();
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:56:10.073

要访问特定于类型的属性，您需要`first_name`在 switch/case 语句中转换为适当的类型。

```
protected void Page_Load(object sender, EventArgs e)
{
    switch (first_name.GetType().ToString())
    {
        case ("TextBox"):
            (first_name as TextBox).Text = "Your First Name...";
            break;
        case ("DropDownList"):
            (first_name as DropDownList).Items.Add("Jason");
            (first_name as DropDownList).Items.Add("Kelly");
            (first_name as DropDownList).Items.Add("Keira");
            (first_name as DropDownList).Items.Add("Sandi");
            (first_name as DropDownList).Items.Add("Gary");
            break;
        case ("CheckBox"):
            (first_name as CheckBox).Checked = true;
            break;
    }        
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T14:57:17.963

您可以`Control`用作静态类型，并在 each 中使用另一个变量`case`：

```
Control ctrl;
switch(type)
{
  case "TextBox":
    var box = new TextBox();
    box.Text = "...";
    ctrl = box;
    break;
}
Page.Controls.Add(ctrl); 
```

显然 - 查看被覆盖的`Render`方法 - 您正在手动完成 ASP.NET Web 窗体为您完成的许多工作。您可以简单地将`ctrl`（或任何控件）添加到`Page`的`Controls`集合中。

这些`Page.Render`方法呈现`Controls`集合的所有元素，除非您覆盖它。

# c# - Mono 3.0.1 中未调用 OnSerializing 方法

> ID：13362906
> 
> 赞同：3
> 
> 时间：2012-11-13T14:52:20.427
> 
> 标签：c#, json, serialization, mono

在 Windows 上的 Visual Studio 中测试了相同的代码以确保。

在 Mac 上使用 MonoDevelop 和 Mono 框架 3.0.1。我正在尝试将对象序列化为 JSON，并且需要通过将 System.Runtime.Serialization.OnSerializingAttribute 分配给方法来填充 OnSerializing 事件中的一些属性。但是，mono 框架似乎没有调用该方法。其他序列化事件也不起作用。简化代码例如：

```
using System;
using System.IO;
using System.Runtime.Serialization.Json;
using System.Runtime.Serialization;

namespace MyApp
{
    class MainClass
    {
        public static void Main (string[] args)
        {
            Cereal specialK = new Cereal();

            DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(Cereal));

            specialK.TheValue="This is a what?";

            MemoryStream stm = new MemoryStream();
            ser.WriteObject(stm, specialK);
            string json = System.Text.Encoding.UTF8.GetString(stm.ToArray());

            Console.WriteLine(json);
            Console.ReadLine();

        }
    }

    [DataContract]
    class Cereal
    {
        [DataMember(Name="set_on_serialize")]
        private string _setOnSerialize = string.Empty;

        public Cereal() { }

        [DataMember(Name = "out_value")]
        public string TheValue
        {
            get;
            set;
        }

        [OnSerializing]
        void OnSerializing(StreamingContext content)
        {
            this._setOnSerialize = "A brick!";
        }
    }
} 
```

在 Visual Studio 中，输出为： {"out_value":"This is a what?","set_on_serialize":"Abrick!"}

在 Mac 上的 MonoDevelop 中，我得到： {"out_value":"This is a what?","set_on_serialize":""}

由于某种原因，Mono 没有调用 OnSerializing 事件。

Has anyone else encountered this or can you help explain why the code fails?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T16:20:09.460

This was a bug in Mono, I just [fixed](https://github.com/mono/mono/commit/2ff2fe25fa644248fc4d9b876fc37ff5211666f7) this for you :-)

# amazon-ec2 - 尝试 resize2fs EB 卷失败

> ID：13362910
> 
> 赞同：29
> 
> 时间：2012-11-13T14:52:35.013
> 
> 标签：amazon-ec2, diskspace, disk-partitioning

我有一个 200GB 的 EBS 卷，并且正在尝试增加可用空间。我按照以下说明操作：[http](http://www.hellersoftware.com/2012/resize-ebs-volume-attached-to-amazon-web-services-ec2-instance/) ://www.hellersoftware.com/2012/resize-ebs-volume-attached-to-amazon-web-services-ec2-instance/并设法创建快照并创建一个新的基于 EBS在那个快照上。

一切都很美好，除非我这样做：

`# resize2fs /dev/sdf`

我明白了

```
resize2fs 1.40.8 (13-Mar-2008)
resize2fs: Bad magic number in super-block while trying to open /dev/sdf
Couldn't find valid filesystem superblock. 
```

不知道那里发生了什么，但我的新卷仍然只显示 200GB，而实际上它是 800GB 卷。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-11-13T23:03:15.787

OP 声明他正在使用 XFS 文件系统。该工具`resize2fs`仅适用于 ext2、ext3 和 ext4。

有一个类似的工具可用于 XFS 文件系统，称为 xfs_growfs。您很可能必须先安装它

```
sudo yum install xfsprogs.x86_64 --assumeyes 
```

然后挂载你的文件系统

```
sudo mount -t xfs /dev/sdf /vol 
```

现在您可以扩展文件系统

```
sudo xfs_growfs /vol 
```

`df -h`现在应该显示更多可用空间

我希望这有帮助:)

提示：ext4 文件系统是 EBS 卷的推荐文件系统（用于未来）

# iphone - 单击按钮时如何显示uipickerview的值

> ID：13362912
> 
> 赞同：0
> 
> 时间：2012-11-13T14:52:40.257
> 
> 标签：iphone, objective-c, uipickerview

我想`uipickerview`在单击按钮时将值显示到文本字段中。当我尝试访问这样的值时，我实现了一个按钮操作方法，它会给出错误：

```
textfield1.text = [myarray objectatindex:row]; 
```

它正在错误使用未声明的变量行。当我在按钮操作方法中声明类型的行变量时，`nsinteger`但当我从pickerview中选择值并按下未显示在文本字段中的按钮值时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:58:47.273

这个问题在论坛上已经回答过几次了。无论如何，这里有一些可以帮助你的链接！

[教程](http://www.roseindia.net/tutorial/iphone/examples/UIPickerView/UIPickerViewExample.html)

[堆栈溢出答案](https://stackoverflow.com/questions/6529877/how-to-get-the-selected-value-of-a-uipickerview-from-a-button-click)

# ios - 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法在包中加载 NIB：

> ID：13362913
> 
> 赞同：4
> 
> 时间：2012-11-13T14:52:44.047
> 
> 标签：ios, uitableview

我有两个视图控制器，GroupListViewController 和 GroupDetailViewController，来回切换，当通过单击行单元格切换时，运行出错，我什至没有 xib。我以编程方式完成所有组件。在这里搜索相同的问题，这不是我的类型。

在下面的代码片段中，“CustomGroupListViewCell *plcc”CustomGroupListViewCell 是一个自定义 UITableViewCell，您可以实现一个空转储，

在此处列出代码。

GroupListViewController.h

```
#import <UIKit/UIKit.h>

@class GroupDetailViewController;

@interface GroupListViewController : UITableViewController
{
    NSArray * contentArray;
    GroupDetailViewController * dvController;
}

@property (nonatomic, retain) GroupDetailViewController * dvController;

@end 
```

GroupListViewController.m

```
#import "GroupListViewController.h"
#import "CustomGroupListViewCell.h"
#import "ZYAppDelegate.h"
#import "GroupDetailViewController.h"

@interface GroupListViewController ()
@end

@implementation GroupListViewController

@synthesize dvController;

- (void) viewDidLoad
{
contentArray = [[NSArray arrayWithObjects:@"heyun", @"wushi", @"ios", nil]retain];

[super viewDidLoad];

}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    // Custom initialization
    }  
    return self;
}

- (void) dealloc
{
    [dvController release];
    [super dealloc];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear: animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear: animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear: animated];
}

- (void)viewDisDisappear:(BOOL)animated
{
    [super viewDidDisappear: animated];
}

- (NSInteger)numberOfSectionsInTableView: (UITableView *)tableView
{
    return 1;
} 

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return [contentArray count];
}

// custom row height
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // dynamic with whether the cell has the gourp image or not..
    return 160;
}

// Customize the appearance of table view cells
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"PartyListCustomCell";

    CustomGroupListViewCell *plcc = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if(plcc == nil)
    {
        plcc = [[[CustomGroupListViewCell alloc] initWithStyle:UITableViewCellStyleDefault    reuseIdentifier:CellIdentifier] autorelease];
    }

    // set up custom cell
    plcc.gourpTitle.text = @"gourpTitle";

    return plcc;

 }

 - (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    if (dvController == nil)
    {
        GroupDetailViewController *aController = [[GroupDetailViewController alloc] initWithNibName:@"GroupDetailViewController" bundle:nil];

        self.dvController = aController;

        [aController release];
    }

    [dvController updateRowNumber:indexPath.row];
    [[self navigationController] pushViewController:dvController animated:YES];    

}

@end 
```

GroupDetailViewController.h

```
#import <UIKit/UIKit.h>

@interface GroupDetailViewController : UITableViewController
{
    int rowNumber;    
}

@property(readwrite) int rowNumber;
- (void) updateRowNumber:(int) theindex;

@end 
```

GroupDetailViewController.m

```
#import "GroupDetailViewController.h"

@interface GroupDetailViewController ()

@end

@implementation GroupDetailViewController

@synthesize rowNumber;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self)
    {
        // Custom initialization
    }
    return self;
}

- (void) updateRowNumber: (int) theindex
{

    rowNumber = theindex + 1;

    UILabel *label1 = [[UILabel alloc]initWithFrame:CGRectMake(50.0, 20.0, 200.0, 50.0)];

    label1.text = [NSString stringWithFormat:@"row %i was clicked ", rowNumber];
    [self.view addSubview: label1];
    [label1 release];

}

- (void)dealloc
{

    [super dealloc];
}

- (void)viewDidLoad
{

    UILabel *label1 = [[UILabel alloc]initWithFrame:CGRectMake(50.0, 20.0, 200.0, 50.0)];

    label1.text = [NSString stringWithFormat:@"row %i was clicked ", rowNumber];

    [self.view addSubview: label1];

    [super viewDidLoad];
    [label1 release];
    // Do any additional setup after loading the view from its nib.
 }

 - (void)fetchedData: (NSData *)responseData
{
    // parse out the json data
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewWillAppear:(BOOL)animated
{
     [super viewWillAppear: animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear: animated];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T15:05:04.140

通过调用初始化视图控制器时

```
[[GroupDetailViewController alloc] initWithNibName:@"GroupDetailViewController" bundle:nil]; 
```

我们希望您提供相应的 xib（“GroupDetailViewController”）。如果您不想使用 xib，只需调用

```
[[GroupDetailViewController alloc] init] 
```

并`loadView`在您的`GroupDetailViewController`班级中实施。

# c - mq_notify in Cygwin doesn't trigger

> ID：13362918
> 
> 赞同：4
> 
> 时间：2012-11-13T14:52:56.463
> 
> 标签：c, cygwin, posix, ipc, message-queue

I'm using POSIX queues (mqueue) to communicate between threads.

The problem I have is that mq_notify doesn't function as expected in my unit tests on Cygwin. It never triggers even though the msg queue goes from empty to 1 msg.

I made an example that functions on Linux. When the same code is compiled in Cygwin, it doesn't work.

Could it be that Cygwin doesn't support mq_notify or is it a bug in Cygwin?

**notification example:**

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <fcntl.h>
#include "mqueue.h"

static void error(const char *msg)
{
    perror(msg);
    exit(1);
}

static void handleMessage(union sigval sv)
{
    ssize_t n;
    char buf[256];
    struct mq_attr mqAttr = {0};
    mqd_t mqdes = *((mqd_t *) sv.sival_ptr);

    printf("handleMessage\n");
    if (mq_getattr(mqdes, &mqAttr) == -1) {
        error("mq_getattr");
    }

    printf("handleMessage msgs:%i\n", mqAttr.mq_curmsgs);

    while (mqAttr.mq_curmsgs > 0) {
        n = mq_receive(mqdes, buf, mqAttr.mq_msgsize, NULL);

        if (n == -1) {
            error("mq_receive");
            break;

        } else {
            printf("Read %ld bytes from MQ\n", (long) n);
        }

        if (mq_getattr(mqdes, &mqAttr) == -1) {
            error("mq_getattr");
        }
    }

    {
        struct sigevent sev;
        sev.sigev_notify = SIGEV_THREAD;
        sev.sigev_notify_function = handleMessage;
        sev.sigev_notify_attributes = NULL;
        sev.sigev_value.sival_ptr = &mqdes; 

        if (mq_notify(mqdes, &sev) == -1) {
           error("mq_notify");
        }
    }
}

int main(int argc, char *argv[])
{       
    struct mq_attr      mqAttr;
    mqd_t queue;
    struct sigevent sev;

    mqAttr.mq_maxmsg = 10;
    mqAttr.mq_msgsize = 50;
    mqAttr.mq_flags = 0;

    queue = mq_open(argv[1], O_CREAT | O_RDWR, 0666, NULL);

    if(queue == -1) {
        error("mq_open");
    }
    sev.sigev_notify = SIGEV_THREAD;
    sev.sigev_notify_function = handleMessage;
    sev.sigev_notify_attributes = NULL;
    sev.sigev_value.sival_ptr = &queue;  

    if (mq_notify(queue, &sev) == -1) {
       error("mq_notify");
    }

    while(1) {
    /* Pass data to mq */
        char buffer[20];
        static int cnt = 0;

        sprintf(buffer, "mq_send %i", ++cnt);
        printf("%s q:%X\n", buffer, queue);
        if (mq_send(queue, (char*)buffer, (strlen(buffer) + 1), 100) != 0) {
            error("mq_send");
        }
        usleep(1000000); // sleep 1s
    }

    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:35:52.027

我没有设置 Cygwin，所以我无法确认您所看到的内容。但是，此错误会跳出：在`handleMessage()`您重置通知并使用此行时：

```
sev.sigev_value.sival_ptr = &mqdes; 
```

这是行不通的，因为 mqdes 是当前堆栈上的一个变量。一旦队列为空，该线程（及其关联的堆栈）将消失。当这种情况发生时，当下一个线程启动时，mqdes 可以指向内存中的任何内容。一个简单的解决方法是只使用传递给当前线程的指针。

```
sev.sigev_value.sival_ptr = sv.sival_ptr; 
```

关于您的主要问题，您确定在程序中进行后续运行之前删除队列吗？如果队列不为空，则永远不会启动新线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T21:00:02.063

正如@Duck 所说，您的队列可能**不是**空的。这就是我今天遇到类似问题时的情况。您需要通过多次调用清空队列`mq_receive`才能在将来获得通知。在您的`main()`中，我建议在您之后使用以下代码`mq_notify`：

```
mqd_t queue_nb; /* non-blocking queue */

[...]

if (mq_notify(queue, &sev) == -1) {
   error("mq_notify");
}

queue_nb = mq_open(argv[1], O_NONBLOCK | O_RDONLY, 0666, NULL);
if(queue == -1) {
    error("mq_open");
}

if (mq_getattr(mqdes, &mqAttr) == -1) {
    error("mq_getattr");
}

n = 0;
while (n >= 0) {

    /* will not block */
    n = mq_receive(queue_nb, buf, mqAttr.mq_msgsize, NULL);
    if (n > 0) {
        printf("Read %ld bytes from MQ\n", (long) n);
    }
} 
```

# javascript - 全局定义的 AngularJS 控制器和封装

> ID：13362921
> 
> 赞同：28
> 
> 时间：2012-11-13T14:53:07.163
> 
> 标签：javascript, angularjs, encapsulation

根据 AngularJS 的教程，控制器函数只是位于全局范围内。

[http://docs.angularjs.org/tutorial/step_04](http://docs.angularjs.org/tutorial/step_04)

控制器函数本身会自动解析到封装范围内，还是驻留在全局范围内？我知道他们被传递了对他们自己的 $scope 的引用，但似乎函数本身只是位于全局范围内。显然，这可能会导致问题，我通过经验和教育学到了封装此外，如果它们确实存在于全局范围内，那么将它们封装在要像这样引用的对象中是否不被认为是最佳实践：

```
 Object.functionName(); 
```

而不是这样：

```
 functionName(); 
```

以防止由于全局范围的污染（即覆盖函数等）而发生的问题。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-13T15:23:11.713

AngularJS 支持两种注册控制器函数的方法——作为全局可访问的函数（你可以在提到的教程中看到这种形式）或作为模块的一部分（形成一种命名空间）。有关模块的更多信息可以在这里找到：http: [//docs.angularjs.org/guide/module](http://docs.angularjs.org/guide/module)但简而言之，可以在模块中注册一个控制器，如下所示：

```
angular.module('[module name]', []).controller('PhoneListCtrl', function($scope) {

  $scope.phones = [..];

  $scope.orderProp = 'age';
}); 
```

AngularJS 在许多示例中使用声明控制器的简短的全局函数形式，但是虽然**这种形式有利于快速示例，但不应该在实际应用程序中使用**。

简而言之：AngularJS 使得正确封装控制器函数成为可能，但也公开了一种更简单、快速和肮脏的方式来将它们声明为全局函数。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-08T09:42:43.247

[正如pkozlowski-opensource](https://stackoverflow.com/a/13363482/1957398)所回答的那样，您可以将控制器注册为模块的一部分。

如果您需要缩小，您可以通过在列表中的实际函数之前提供变量名称来简单地扩展它：

```
angular.module('[module name]', []).
  controller('PhoneListCtrl', ['$scope', function($scope) {

    $scope.phones = [..];
    $scope.orderProp = 'age';
  }]); 
```

这将在“缩小”之后工作相同：

```
angular.module('[module name]', []).
  controller('PhoneListCtrl', ['$scope', function(s) {

    s.phones = [..];
    s.orderProp = 'age';
  }]); 
```

这个符号可以在[Dependency Injection](http://docs.angularjs.org/guide/di)的“Inline Annotation”下找到。

要测试已注册为模块一部分的控制器，您必须要求 Angular 来创建您的控制器。例如：

```
describe('PhoneListCtrl test', function() {
  var scope;
  var ctrl;

  beforeEach(function() {
    module('[module name]');
    inject(function($rootScope, $controller) {
      scope = $rootScope.$new();
      ctrl = $controller('[module name]', {$scope: scope});
    });
  });

  it('should be ordered by age', function() {
    expect(scope.orderProp).toBe('age');
  });

}); 
```

这种测试控制器的方法可以在[了解控制器组件的](http://docs.angularjs.org/guide/dev_guide.mvc.understanding_controller)“测试控制器”下找到。

# c# - 带有 IDownloadManager 的 Windows 窗体 Webbrowswer 控件

> ID：13362922
> 
> 赞同：11
> 
> 时间：2012-11-13T14:53:09.613
> 
> 标签：c#, winforms, webbrowser-control, download-manager

我正在使用`Systems.Windows.Forms.Webbrowser`控件并且需要覆盖下载管理器。我已按照[此处](http://code.msdn.microsoft.com/windowsdesktop/CSIEDownloadManager-8ab5d910)的说明对表单进行子类化并覆盖`CreateWebBrowserSiteBase()`

```
/// <summary>
/// Browser with download manager
/// </summary>
public class MyBrowser : WebBrowser  
{
    /// <summary>
    /// Returns a reference to the unmanaged WebBrowser ActiveX control site,
    /// which you can extend to customize the managed <see ref="T:System.Windows.Forms.WebBrowser"/> control.
    /// </summary>
    /// <returns>
    /// A <see cref="T:System.Windows.Forms.WebBrowser.WebBrowserSite"/> that represents the WebBrowser ActiveX control site.
    /// </returns>
    protected override WebBrowserSiteBase CreateWebBrowserSiteBase()
    {
        var manager = new DownloadWebBrowserSite(this);
        manager.FileDownloading += (sender, args) =>
            {
                if (FileDownloading != null)
                {
                    FileDownloading(this, args);
                }
            };
        return manager;
    }
} 
```

在 中`DownloadWebBrowserSite`，我实现`IServiceProvider`了`IDownloadManager`在请求时提供。

```
 /// <summary>
        /// Queries for a service
        /// </summary>
        /// <param name="guidService">the service GUID</param>
        /// <param name="riid"></param>
        /// <param name="ppvObject"></param>
        /// <returns></returns>
        public int QueryService(ref Guid guidService, ref Guid riid, out IntPtr ppvObject)
        {
            if ( (guidService == Constants.IID_IDownloadManager && riid == Constants.IID_IDownloadManager ))
            {
                ppvObject = Marshal.GetComInterfaceForObject(_manager, typeof(IDownloadManager));
                return Constants.S_OK;
            }
            ppvObject = IntPtr.Zero;
            return Constants.E_NOINTERFACE;
        } 
```

`DownloadManager`取自上面的示例。

```
/// <summary>
/// Intercepts downloads of files, to add as PDFs or suppliments
/// </summary>
[ComVisible(true)]
[Guid("bdb9c34c-d0ca-448e-b497-8de62e709744")]
[CLSCompliant(false)]
public class DownloadManager : IDownloadManager
{
    /// <summary>
    /// event called when the browser is about to download a file
    /// </summary>
    public event EventHandler<FileDownloadEventArgs> FileDownloading;

    /// <summary>
    /// Return S_OK (0) so that IE will stop to download the file itself. 
    /// Else the default download user interface is used.
    /// </summary>
    public int Download(IMoniker pmk, IBindCtx pbc, uint dwBindVerb, int grfBINDF, IntPtr pBindInfo,
                        string pszHeaders, string pszRedir, uint uiCP)
    {
        // Get the display name of the pointer to an IMoniker interface that specifies the object to be downloaded.
        string name;
        pmk.GetDisplayName(pbc, null, out name);
        if (!string.IsNullOrEmpty(name))
        {
            Uri url;
            if (Uri.TryCreate(name, UriKind.Absolute, out url))
            {
                if ( FileDownloading != null )
                {
                     FileDownloading(this, new FileDownloadEventArgs(url));
                }
                return Constants.S_OK;
            }
        }
        return 1;
    }
} 
```

问题是`pmk.GetDisplayName`返回初始 URL，而不是要下载的项目的 URL。如果 URI 指向一个动态页面，例如[http://www.example.com/download.php](http://www.example.com/download.php)，我没有得到要下载的实际文件。我需要从标头中获取 URL，以便获取我应该下载的实际文件。

谷歌表示我必须创建一个`IBindStatusCallback`也实现`IHttpNegotiate`并`IServiceProvider`响应的实现`IID_IHttpNegotiate`，以便我可以看到`IHttpNegotiate.OnResponse`. 但是，我设法实现了这一点，`QueryService`似乎只要求`IID_IInternetProtocol`并且从不`IID_IHttpNegotiate`。

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T18:17:09.313

您缺少对：CreateBindCtx 的调用。

将以下内容添加到您的下载管理器：

```
 [DllImport("ole32.dll")]
        static extern int CreateBindCtx(uint reserved, out IBindCtx ppbc); 
```

然后确保在注册回调之前调用它。我在您的 Download() 方法中实现了这一点，如下所示：

```
public int Download(IMoniker pmk, IBindCtx pbc, uint dwBindVerb, int grfBINDF, IntPtr pBindInfo,
                            string pszHeaders, string pszRedir, uint uiCP)
        {
            // Get the display name of the pointer to an IMoniker interface that specifies the object to be downloaded.
            string name;
            pmk.GetDisplayName(pbc, null, out name);
            if (!string.IsNullOrEmpty(name))
            {
                Uri url;
                if (Uri.TryCreate(name, UriKind.Absolute, out url))
                {
                    Debug.WriteLine("DownloadManager: initial URL is: " + url);
                    CreateBindCtx(0, out pbc);
                    RegisterCallback(pbc, url);
                    BindMonikerToStream(pmk, pbc);

                    return MyBrowser.Constants.S_OK;
                }
            }
            return 1;
        } 
```

有了这个，您的 IHttpNegotiate 实现将被调用，您将可以访问响应标头。

# django - 如果存在，如何禁用创建资源？

> ID：13362927
> 
> 赞同：0
> 
> 时间：2012-11-13T14:53:31.670
> 
> 标签：django, tastypie

我可以创建一个使用 post 方法，但是，如果文本已经在数据库`MessageResource`中，我想返回类似“消息存在”的内容。`MessageResource`如何实施？我`MessageResource`的是

```
class MessageResource(ModelResource):
    class Meta:
        queryset = Message.objects.all()
        resource_name = "message"
        always_return_data = True
        authentication = Authentication()
        authorization = Authorization()

        filtering = {
                'body': ALL
                }

    def determine_format(self, request):
        return "application/json" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:25:47.773

你可以尝试这样的事情：

```
from tastypie.exceptions import BadRequest

class MessageResource(ModelResource):
    class Meta:
        queryset = Message.objects.all()
        resource_name = "message"
        always_return_data = True
        authentication = Authentication()
        authorization = Authorization()

        filtering = {
            'body': ALL
            }

    def determine_format(self, request):
        return "application/json"

    def hydrate(self, bundle):
        if not bundle.obj.pk and len(Message.objects.filter(text=bundle.obj.text)) > 0:
            raise BadRequest('Message exists')
        return bundle 
```

或者您也可以使用[验证](http://django-tastypie.readthedocs.org/en/latest/validation.html)。

# java - 在 Java 中使用 SQL 设置值

> ID：13362934
> 
> 赞同：4
> 
> 时间：2012-11-13T14:53:53.840
> 
> 标签：java, sql

初学者的问题：我正在尝试使用 Java 来处理关系中两个不同属性的*元组来处理 SQL（对于大学未评估的实用程序）。*我与四个属性有关系，包括一种咖啡的名称、该周的销售额以及咖啡的总销售额。

我尝试创建的代码将使用新数据更新销售额和总计字段。它意味着同时获取`totalSales`和`Sales`数组，添加它们，然后相应地更新关系中的两个属性。

到目前为止，这是我的代码（我已经删除了所有明显/不必要的代码）：

```
String updateTotalString = "update COFFEES set TOTAL = ? set SALES = ? where COF_NAME = ?";

String [] coffees = {"Columbian", "Earl Grey", "Kenyan", "Nescafe"};
int [] totalSales = {400,650,340,1000};
int[] sales = {50,75,100,100};

updateTotal = con.prepareStatement(updateTotalString);
    for (int i = 0; i < len; i++)
    {
        updateTotal.setInt(1, (sales[i] + totalSales[i]));
        updateTotal.setInt(2, sales[i]);
        updateTotal.setString(3, coffees[i]);
        updateTotal.executeUpdate();
    } 
```

不幸的是，运行它会给我一个 SQL 语法错误，主要集中在第一行 (the `String updateTotalString`)。我有一种感觉，这与我试图在一行中做两组并且语法错误有关。
有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T14:55:03.413

使用`,`而不是多个`SET`

```
String updateTotalString = "update COFFEES set TOTAL = ?, SALES = ? where COF_NAME = ?"; 
```

更新的基本语法是

```
UPDATE tableName
SET colA = '',
    colB = '', .....
WHERE .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T14:55:31.623

```
String updateTotalString =  "update COFFEES set TOTAL = ? set SALES = ? where "
                            + "COF_NAME = ?"; 
```

在您的查询中，您使用`set`了两次关键字，这是不正确的语法。

相反，您应该使用`comma`多个值之间的 a 来设置。

```
String updateTotalString = "update COFFEES set TOTAL = ?, SALES = ? where COF_NAME = ?"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T14:56:50.577

您的 Update 语法错误：

```
UPDATE `tableName`
SET
`col1` = ?,
`col2` = ?
WHERE somecondition; 
```

检查[MYSQL 更新语法](http://dev.mysql.com/doc/refman/5.0/en/update.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T14:55:30.590

您的更新字符串应如下所示：

```
String updateTotalString = "update COFFEES set TOTAL = ?, SALES = ? where COF_NAME = ?"; 
```

# javascript - 使用jquery map函数对表

> ID：13362936
> 
> 赞同：2
> 
> 时间：2012-11-13T14:54:01.723
> 
> 标签：javascript, jquery, asp.net-mvc, map

我有这张桌子：

```
 <table id="tblNyttUtstyr">
        <thead>
            <tr>
                <th data-field="UtlevertUtstyrID">UtstyrsID</th>
                <th data-field="UtstyrNavn">Navn</th>
                <th data-field="Utlevert">Utlevert</th>
                <th data-field="Comment">Kommentar</th>
            </tr>
        </thead>
<tbody>
<tr>
   <td>1</td>
   <td>Motorola defy+</td>
   <td>true</td>
</tr>
<tr>
   <td>3</td>
   <td>Samsung SII</td>
   <td>true</td>
</tr>
</tbody>
</table> 
```

然后我有这个脚本

```
var test = $("#tblNyttUtstyr tbody tr").map(function () {
            var $row = $(this);

            return {
                UtlevertUtstyrID: $row.find(":nth-child(1)").text(),
                Comment: $row.find(":nth-child(2)").text()
            };
        }).get();

        $("#console").text("content: " + test); 
```

返回值是这样的：“内容：[object],[object]”

任何人都知道如何获取值，文本而不仅仅是对象

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:57:35.093

.map 返回一个 jQuery 对象。

您需要使用回调。

```
 function setConsole(obj) {
        $("#console").text("content: " + obj.Comment);
    }

    var test = $("#tblNyttUtstyr tbody tr").map(function () {
        var $row = $(this);

        setConsole( {
            UtlevertUtstyrID: $row.find(":nth-child(1)").text(),
            Comment: $row.find(":nth-child(2)").text()
        } );

    }).get(); 
```

* * *

更新：将`setConsole`功能更改为：

```
function setConsole(obj) {
    var c = $("#console");
    c.text(c.text() + "content: " + obj.Comment);
} 
```

否则每个新对象都将被覆盖。

在这里查看我的演示：http: [//jsfiddle.net/maniator/FrURX/](http://jsfiddle.net/maniator/FrURX/)

# c# - 使用 .NET 参数从 PHP 使用 WCF 服务

> ID：13362938
> 
> 赞同：0
> 
> 时间：2012-11-13T14:54:10.797
> 
> 标签：c#, php, wcf, parameters

我有一个从远处公开 WCF 服务的应用程序，这是我的服务示例：

```
 [OperationContract(Name = "AddClient")]

    bool AddClient(Client c); 
```

我尝试从 Console Application 使用 WCF 服务，尽管 ConsoleAp. 没有任何“客户端”类的定义，我可以通过我的 ConsoleAp 制作一个“客户端”的实例，它工作得很好。

我的问题是，是否可以从基于 php 的应用程序调用此函数，它是否允许我插入“客户端”对象或以与 .NET 等效的方式定义它？

我想我可能会在这里跳过我的头，我应该做的就是发送简单的参数，问题是“客户端”有 10 多个属性/字段，而且它看起来不够干净/净化。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T15:04:00.663

> 我尝试从 Console Application 使用 WCF 服务，**尽管 ConsoleAp. 没有任何“客户端”类的定义**，我可以通过我的 ConsoleAp 制作一个“客户端”的实例，它工作得很好。

确实如此。如果添加服务引用，则会生成一个代理类，其中包含服务定义的方法和类。您可以在`Reference.cs`服务参考下的文件中看到这一点，如果您单击客户端上的转到定义（或按 F12），您将转到该位置。

或者，如果控制台应用程序包含对 WCF 服务的程序集引用，则 ConsoleApp 可以访问 WCF 项目的公共类，但这与 WSDL 或 WCF 无关。

如果您想在 PHP 中从 WSDL 生成类，您可以查看[wsdl2php](http://www.urdalen.no/wsdl2php/index.php)或[wsdl2php-interpreter](http://code.google.com/p/wsdl2php-interpreter/)（在[此处](http://www.mehtanirav.com/2009/01/28/wsdl-to-php-generate-php-code-from-a-wsdl-file/)找到）或搜索执行此操作的另一个库或工具。

# java - RESTful Web 服务中的资源路径

> ID：13362941
> 
> 赞同：3
> 
> 时间：2012-11-13T14:54:18.337
> 
> 标签：java, web-services, rest, jakarta-ee, jax-rs

我正在构建一个遵循 REST 架构风格的 Web 服务。我正在使用 JAX-RS 来简化它。然而，这个问题并不关心技术，而是正确使用资源路径。

我在我的应用程序中创建了一些资源，例如测验、问题和问题反馈。

我已经创建了路径，例如

`/quiz` `/question/1`

等等。现在，我已经看到了一些暴露路径的 Web 服务 API，例如`/approved`或`/questions/approved`. 路径的批准部分似乎更像是问题可能具有的属性（在这种情况下），我想知道这是否可以，以及将其作为请求参数和像这样的路径的一部分之间的界限在哪里？

是否可以在 web 服务中公开路径，以某种方式公开系统中的预期资源之一，例如在这种情况下`Question`，但是通过`/approved`除了正常路径之外的`/questions`路径？规则是什么，这应该是怎样的？

如果没有人问我，我会创建一条类似的路径`/questions?type=approved`：GET。

因为已批准不是我系统中的资源。还是可以创建公开资源的路径...但不要直接使用资源名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:04:01.710

您在询问只能通过附加信息才能理解的路径是否可以。好吧，他们没有*错*，但我不会选择他们。

你的问题是（用我的话）：

> 给我所有具有被批准附加功能的问题。

这归结为两个步骤：

**第一步**

获取*所有*问题。

```
GET /questions 
```

**第二步**

其中只有那些已经被批准的。

```
GET /questions?approved=true 
```

这是很自然的。

相反，为什么第二步会导致`/approved`？这有什么关系`/questions`？没有明显的方法可以回答这个问题。虽然从技术上讲，即使是奇怪的路径也可以使用，比如`/pink-elephants`应该转化为“给我所有批准的问题”，但这不是我推荐的。

# c# - 参数在 Jsonp 请求中传递 null

> ID：13362949
> 
> 赞同：0
> 
> 时间：2012-11-13T14:54:34.150
> 
> 标签：c#, jquery, json

当我传递此请求时，它将 null 传递给服务器站点上的请求参数。数据属性有问题吗？

```
$.getJSON('http://127.0.0.1:81/api/sites/GetDomainAvailability?apikey=asfasfdsf&callback=?', { "request": '{"SubDomain":"asfsadf","ParentDomain":"asfasdf","ResellerId":"asfdsd"}' }, function (results) {

    alert('Cross domain JS call achieved. Have your implementation going in here!');
}); 
```

API C#

```
[HttpGet]
public HttpResponseMessage GetDomainAvailability(GetDomainAvailabilityRequest request)
{
    if (ModelState.IsValid)
    {
        if (request == null) return Request.CreateResponse(HttpStatusCode.BadRequest, "Invalid Request");
        var domain = string.Format("{0}.{1}", request.SubDomain, request.ParentDomain);

        var manager = new CloudSitesManager();
        var isDomainAvailable = manager.GetDomainAvailability(domain);

        HttpResponseMessage response = Request.CreateResponse(HttpStatusCode.OK, isDomainAvailable);
        return response;
    }
    else
    {
        return Request.CreateResponse(HttpStatusCode.BadRequest);
    }
}

[Serializable]
public class GetDomainAvailabilityRequest
{
    public string SubDomain { get; set; }
    public string ParentDomain { get; set; }
    public string ResellerId { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:55:59.667

试试这个：

```
data: {"request":'{"SubDomain":"asfsadf","ParentDomain":"asfasdf","ResellerId":"asfdsd"}'}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:22:13.360

这是模型绑定的问题。从尝试这个开始：

```
$.getJSON('http://127.0.0.1:81/api/sites/GetDomainAvailability', {SubDomain:"asfsadf",ParentDomain:"asfasdf",ResellerId:"asfdsd"}, function (results) {

    alert('Cross domain JS call achieved. Have your implementation going in here!');
}); 
```

如果上面的方法不起作用，试试这个。我从一些代码中获取了这个，我正在做你正在尝试的完全相同的事情。

```
var data = { SubDomain: "asfsadf", ParentDomain: "asfasdf", ResellerId: "asfdsd" };

$.post('http://127.0.0.1:81/api/sites/GetDomainAvailability', data, function (results) {

    alert('Cross domain JS call achieved. Have your implementation going in here!');
}, 'json'); 
```

# curl - 从代理页面执行网络表单

> ID：13362953
> 
> 赞同：0
> 
> 时间：2012-11-13T14:54:39.690
> 
> 标签：curl, webforms

你好，我想提取一些在选择网络表单选项时触发的链接。为了测试它的行为，我将页面的 html 复制到我的服务器并尝试提交表单，但没有生成正确的链接。我也尝试添加一个命令，但它变得更糟。我怎样才能假装像在原始网络服务器上一样提交网络表单？该页面是： http: [//www.atm.it/it/Giromilano/Pagine/default.aspx](http://www.atm.it/it/Giromilano/Pagine/default.aspx) ，我的副本是： http: [//www.miafoto.it/iPhone/inarrivo/phpMi/form.html](http://www.miafoto.it/iPhone/inarrivo/phpMi/form.html) 表格要提交的结果非常不同的是第二个与公共汽车和有轨电车。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:55:45.277

问题不在于列表框，而在于与可见参数一起提交的一些隐藏参数：清理页面块 bu 块后，我只剩下一些要设置的值，它们实际上工作.

# wix - Wix：PatchFamily 没有正确过滤变换（根本）

> ID：13362954
> 
> 赞同：3
> 
> 时间：2012-11-13T14:54:41.143
> 
> 标签：wix, windows-installer, patch

首先，我使用的是 WiX 版本 3.5.2519.0，但我也在最新的 3.6 版本上对此进行了测试，结果相同。

我很难找出 PatchFamily 如何准确地过滤掉 Torch 生成的差异的某些部分。按照手册中的示例（“使用纯 WiX 构建补丁” [http://wix.sourceforge.net/manual-wix3/wix_patching.htm](http://wix.sourceforge.net/manual-wix3/wix_patching.htm)），我已经能够成功生成一个基本的安装程序 + 补丁作为广告。但是，当我尝试扩展该示例时，我遇到了一些问题。

短版：我在 Product.wxs 中将新组件 B 添加到与原始组件 A 相同的文件夹中，然后构建安装程序的 1.0 版和 1.1 版。组件 A 和 B 的文件在 1.0 和 1.1 版本之间进行了更改。

使用火炬，我生成安装程序 1.0 和 1.1 之间的转换。

使用 pyro，我创建了 msp 补丁。请注意，我没有更改 Patch.wxs，因此 PatchFamily 元素仍然只包含组件 A 的 ComponentRef，而不包含组件 B。

现在，基于此，我假设当我应用补丁时会发生什么是组件 A 的文件将被更新，但组件 B 的文件将保持不变。换句话说，该 pyro 将从 torch 中获取总变换，其中包含组件 A 和 B 的变换，但随后过滤掉所有在 PatchFamily 元素中找不到的变换动作，因此剩下的所有内容都在最终补丁是组件 A 的变换。

显然我错了，所以我真正想知道的是，如果可能的话，我如何在创建补丁时从差异中过滤掉不需要的转换？

* * *

详细版本，如果您想要文件的内容和使用的命令：

产品.wxs：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Product Id="48C49ACE-90CF-4161-9C6E-9162115A54DD"
        Name="WiX Patch Example Product"
        Language="1033"
        Version="1.0.0"
        Manufacturer="Dynamo Corporation"
        UpgradeCode="48C49ACE-90CF-4161-9C6E-9162115A54DD">
        <Package Description="Installs a file that will be patched."
            Comments="This Product does not install any executables"
            InstallerVersion="200"
            Compressed="yes" />

        <Media Id="1" Cabinet="product.cab" EmbedCab="yes" />
        <FeatureRef Id="SampleProductFeature"/>
    </Product>

    <Fragment>
        <Feature Id="SampleProductFeature" Title="Sample Product Feature" Level="1">
            <ComponentRef Id="SampleComponent" />
            <ComponentRef Id="SampleComponent2" />
        </Feature>
    </Fragment>

    <Fragment>
        <DirectoryRef Id="SampleProductFolder">
            <Component Id="SampleComponent" Guid="{C28843DA-EF08-41CC-BA75-D2B99D8A1983}" DiskId="1">
                <File Id="SampleFile" Name="Sample.txt" Source=".\$(var.Version)\Sample.txt" />
            </Component>
            <Component Id="SampleComponent2" Guid="{C28843DA-EF08-41CC-BA75-D2B99D8A1984}" DiskId="1">
                <File Id="SampleFile2" Name="Sample2.txt" Source=".\$(var.Version)\Sample2.txt" />
            </Component>
        </DirectoryRef>
    </Fragment>

    <Fragment>
        <Directory Id="TARGETDIR" Name="SourceDir">
            <Directory Id="ProgramFilesFolder" Name="PFiles">
                <Directory Id="SampleProductFolder" Name="Patch Sample Directory">
                </Directory>
            </Directory>
        </Directory>
    </Fragment>
</Wix> 
```

* * *

补丁.wxs：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Patch 
        AllowRemoval="yes"
        Manufacturer="Dynamo Corp" 
        MoreInfoURL="http://www.dynamocorp.com/"
        DisplayName="Sample Patch" 
        Description="Small Update Patch" 
        Classification="Update"
        >

        <Media Id="5000" Cabinet="RTM.cab">
            <PatchBaseline Id="RTM"/>
        </Media>

        <PatchFamilyRef Id="SamplePatchFamily"/>
    </Patch>

    <Fragment>    
        <PatchFamily Id='SamplePatchFamily' Version='1.0.0.0' Supersede='yes'>
            <ComponentRef Id="SampleComponent"/>
        </PatchFamily>
    </Fragment>
</Wix> 
```

* * *

两个子文件夹 1.0 和 1.1，都包含具有不同（不同）内容的 Sample.txt 和 Sample2.txt。

命令：

```
candle.exe -dVersion=1.0 product.wxs
light.exe product.wixobj -out 1.0\product.msi
candle.exe -dVersion=1.1 product.wxs
light.exe product.wixobj -out 1.1\product.msi
torch.exe -p -xi 1.0\product.wixpdb 1.1\product.wixpdb -out patch\diff.wixmst
candle.exe patch.wxs
light.exe patch.wixobj -out patch\patch.wixmsp
pyro.exe patch\patch.wixmsp -out patch\patch.msp -t RTM patch\diff.wixmst 
```

* * *

编辑：正如 Bob Arnson 很好地指出的那样，片段元素“成为一个不可变的原子单元，可以完全包含或排除在产品中”，因此为了单独更新文件，它们必须在不同的片段中定义. 这当然很高兴知道，因为到目前为止我只将片段视为分离元素引用和元素定义的一种方式。如果有人对远程感兴趣，以下将是 Product.wxs 的工作版本：

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Product Id="48C49ACE-90CF-4161-9C6E-9162115A54DD"
        Name="WiX Patch Example Product"
        Language="1033"
        Version="1.0.0"
        Manufacturer="Dynamo Corporation"
        UpgradeCode="48C49ACE-90CF-4161-9C6E-9162115A54DD">
        <Package Description="Installs a file that will be patched."
            Comments="This Product does not install any executables"
            InstallerVersion="200"
            Compressed="yes" />

        <Media Id="1" Cabinet="product.cab" EmbedCab="yes" />
        <FeatureRef Id="SampleProductFeature"/>
    </Product>

    <Fragment>
        <Feature Id="SampleProductFeature" Title="Sample Product Feature" Level="1">
            <ComponentRef Id="SampleComponent" />
            <ComponentRef Id="SampleComponent2" />
        </Feature>
    </Fragment>

    <Fragment>
        <DirectoryRef Id="SampleProductFolder">
            <Component Id="SampleComponent" Guid="{C28843DA-EF08-41CC-BA75-D2B99D8A1983}" DiskId="1">
                <File Id="SampleFile" Name="Sample.txt" Source=".\$(var.Version)\Sample.txt" />
            </Component>
        </DirectoryRef>
    </Fragment>

    <Fragment>
        <DirectoryRef Id="SampleProductFolder">
            <Component Id="SampleComponent2" Guid="{C28843DA-EF08-41CC-BA75-D2B99D8A1984}" DiskId="1">
                <File Id="SampleFile2" Name="Sample2.txt" Source=".\$(var.Version)\Sample2.txt" />
            </Component>
        </DirectoryRef>
    </Fragment>

    <Fragment>
        <Directory Id="TARGETDIR" Name="SourceDir">
            <Directory Id="ProgramFilesFolder" Name="PFiles">
                <Directory Id="SampleProductFolder" Name="Patch Sample Directory">
                </Directory>
            </Directory>
        </Directory>
    </Fragment>
</Wix> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T19:01:09.790

这两个组件都在同一个片段中，因此它们都包含在补丁中。如果您不希望这样，请将它们放在不同的片段中。

# matlab - 在特定像素筛选描述符

> ID：13362955
> 
> 赞同：2
> 
> 时间：2012-11-13T14:54:46.757
> 
> 标签：matlab, vlfeat

我想在图像中的坐标 ( x ,y ) 处找到 sift 描述符，其补丁大小为 5X5 邻居，坐标在中间。

它背后的目的是分析我在该坐标上获得的方向值以进行进一步处理。

matlab中有什么方法可以让我这样做吗？

我试图理解[vl_dsift](http://www.vlfeat.org/overview/dsift.html)，它会在每个点上给我筛选描述符，也许只是将它用于我想要的坐标，但不明白如何使用它......

有人可以帮助我或建议任何更好的选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T15:27:19.977

> MATLAB 命令 vl_sift（和命令行实用程序）可以绕过检测器并使用 Frames 选项计算自定义帧上的描述符。
> 
> 例如，我们可以计算以位置 (100,100) 为中心、尺度为 10 且方向为 -pi/8 的 SIFT 帧的描述符
> 
> ```
> fc = [100;100;10;-pi/8] ;
> [f,d] = vl_sift(I,'frames',fc) ; 
> ```
> 
> 也可以指定多个帧 fc。在这种情况下，它们通过增加规模重新排序。Orientations 选项指示程序使用自定义位置和比例，但要计算关键点方向，如
> 
> ```
> fc = [100;100;10;0] ;
> [f,d] = vl_sift(I,'frames',fc,'orientations') ; 
> ```
> 
> 请注意，根据局部外观，一个关键点可能有多个方向。此外，在恒定图像区域（例如一个像素区域）上计算的关键点没有方向！

结帐[http://www.vlfeat.org/overview/sift.html](http://www.vlfeat.org/overview/sift.html)。vl_feat 真的很简洁，而且很容易使用，甚至更容易安装。

# javascript - 骨干 fetch() 成功回调不起作用

> ID：13362958
> 
> 赞同：5
> 
> 时间：2012-11-13T14:54:49.703
> 
> 标签：javascript, backbone.js, callback

在我的应用程序中，有不同的用户帐户。我想要做的是，显示`loader.gif`直到时间`.fetch()`从资源 url 获取内容 + 渲染视图并`loader`在获取完成时隐藏。

现在，当用户登录时，他的 TODO 项目列表由`Todos.fetch`成功回调获取并`loader.gif`淡出。

```
$("#app").hide();
$(".loader").show();
Todos.fetch({
    success: function(){
            $("#app").show();
            $(".loader").hide();
        }
}); 
```

这适用于所有用户，除了那些没有`Todo`项目的用户。对于这些用户，成功回调不会被触发并`loader.gif`保持不变。有没有其他方法可以隐藏`loader.gif`？

* * *

在我看来，`success`只有在将单个模型添加到集合中时才会调用该函数。如果没有要添加到集合中的内容，`success`则不调用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-13T15:19:53.583

BackboneJS 获取要同步的委托。sync 返回一个 jqXHR 对象供您自己使用。

你可以：

```
Todos.fetch({
    success: function(){
            $("#app").show();
            $(".loader").hide();
        }
}).always(function() { $(".loader").hide() }); 
```

您可以在[此博客文章](http://railsadventures.wordpress.com/2012/09/02/backbone-js-models-save-always-callback/)中了解更多信息。

除此之外，请确保您的服务器在集合为空时返回有效的 json。如果响应不是有效的 json，您将失败。

# spring - Spring 应用程序：连接到 AD 代理 - OpenLDAP，让 dnPrettyNormal 接受 user@domain.com 格式？

> ID：13362964
> 
> 赞同：0
> 
> 时间：2012-11-13T14:55:06.800
> 
> 标签：spring, configuration, active-directory, ldap, openldap

我尝试在我的 Spring MVC 应用程序中对用户进行身份验证。我的域内有一个 Active Directory 服务器，但我的 Web 服务器在域外，所以我不得不建立一个 OpenLDAP 代理服务器。

首先，我已成功尝试在我的域内建立连接，因此应用程序工作正常并进行身份验证。一切都好……但是

在阅读了数百个网站（因为新的 cn=conf 配置 - 而不是 slap.conf，这是 IMO 很难学习，因为大多数网站都描述了不推荐使用的配置）和论坛之后，我终于用 ldap 配置了代理服务器后端，因此它像代理一样工作。并非没有任何问题 - 它在调用 ldapsearch 后挂起，但仍然返回结果。

问题是我的 OpenLDAP 配置的 ldapsearch 不接受带有 user@domain.com 表示法的专有名称......只有可接受......日志文件说：

> 11 月 13 日 14:24:52 ip-10-0-0-121 slapd[19149]: conn=1001 op=0 do_bind 11 月 13 日 14:24:52 ip-10-0-0-121 slapd[19149]: > >> dnPrettyNormal：11 月 13 日 14:24:52 ip-10-0-0-121 slapd[19149]：conn=1001 op=0 do_bind：无效 dn (user@domain.com) 11 月 13 日 14:24:52 ip -10-0-0-121 slapd[19149]：send_ldap_result：conn=1001 op=0 p=3

所以 >>> **dnPrettyNormal** : 是不可接受的，而是从我的 spring 应用程序生成的......

我认为有两种解决方法：

1.  （由我推荐）设置 OpenLDAP 以接受带有“at”（@）字符的符号......
2.  强制 Spring 应用程序发送格式...但是怎么做呢？

我的spring-security.xml：

```
 <authentication-manager>
    <authentication-provider ref="ldapActiveDirectoryAuthProvider" />
</authentication-manager>

<beans:bean id="ldapActiveDirectoryAuthProvider"
    class="org.springframework.security.ldap.authentication.ad.ActiveDirectoryLdapAuthenticationProvider">
    <beans:constructor-arg value="domain.com" />
    <beans:constructor-arg value="ldap://xx.xx.xx.xx:389/" /> <!--fake IP-->
    <beans:property name="authoritiesMapper" ref="grantedAuthoritiesMapper" />
    <beans:property name="useAuthenticationRequestCredentials"
        value="true" />
    <beans:property name="convertSubErrorCodesToExceptions"
        value="true" />
</beans:bean>

<beans:bean id="grantedAuthoritiesMapper"
    class="com.xxx.ActiveDirectoryGrantedAuthoritiesMapper" /> 
```

你能告诉我如何解决我的问题吗？

* * *

**解决方案/更新：**

我已经设法建立连接。现在我使用的是 LdapAuthenticationProvider 而不是 ActiveDirectoryLdapAuthenticationProvider。

```
<authentication-manager>
    <authentication-provider ref='ldapProvider' />
</authentication-manager>

<!-- This bean points at the embedded directory server created by the ldap-server 
    element above -->
<beans:bean id="contextSource"
    class="org.springframework.security.ldap.DefaultSpringSecurityContextSource">
    <beans:constructor-arg value="ldap://xx.xx.xx.xx:389/dc=domain,dc=com" />
    <beans:property name="baseEnvironmentProperties">
        <beans:map>
            <beans:entry key="java.naming.referral" value="ignore" />
        </beans:map>
    </beans:property>
    <beans:property name="userDn"
        value="CN=user,OU=group,dc=domain,dc=com" />
    <beans:property name="password" value="secret" />
</beans:bean>

<beans:bean id="ldapProvider"
    class="org.springframework.security.ldap.authentication.LdapAuthenticationProvider">
    <beans:constructor-arg>
        <beans:bean
            class="org.springframework.security.ldap.authentication.BindAuthenticator">
            <beans:constructor-arg ref="contextSource" />
            <beans:property name="userSearch">
                <beans:bean id="userSearch"
                    class="org.springframework.security.ldap.search.FilterBasedLdapUserSearch">
                    <beans:constructor-arg index="0" value="" />
                    <beans:constructor-arg index="1"
                        value="(sAMAccountName={0})" />
                    <beans:constructor-arg index="2" ref="contextSource" />
                    <beans:property name="searchSubtree" value="true" />
                </beans:bean>
            </beans:property>
        </beans:bean>
    </beans:constructor-arg>
    <beans:constructor-arg>
        <beans:bean
            class="org.springframework.security.ldap.userdetails.DefaultLdapAuthoritiesPopulator">
            <beans:constructor-arg ref="contextSource" />
            <beans:constructor-arg value="" />
            <beans:property name="searchSubtree" value="true" />
            <beans:property name="rolePrefix" value="ROLE_" />
            <beans:property name="convertToUpperCase" value="true" />
            <beans:property name="ignorePartialResultException"
                value="true" />
        </beans:bean>
    </beans:constructor-arg> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:31:43.737

该字符串`user@domain.com`不是有效的专有名称。[DN](https://www.rfc-editor.org/rfc/rfc4514)是一个逗号分隔的相对专有名称 (RDN) 序列，每个 RDN 都是一个属性类型-属性值断言，其形式`type=value`为`type`属性类型（OID 或 OID 的别名，如`mail`）。`mail=user@domain.com,dc=domain,dc=com`是有效的专有名称。更正配置中的 DN 以使用有效字符串。`@`该问题与 ' ' 字符无关。

# java - Axis2 客户端 - 使用 href 解析结果

> ID：13362968
> 
> 赞同：0
> 
> 时间：2012-11-13T14:55:13.243
> 
> 标签：java, soap, client, axis2, href

我正在开发一个使用 XMLBeans 自动生成 Axis2 代码的 Web 服务客户端。发送请求按预期工作，但我无法成功解析响应。问题是响应数据不包含在 Axis2 正在查找的元素中。Axis2 在一个`SendAndCommitResponse`元素中查找结果，该元素又包含一个元素，该元素带有一个 href `TransactionResult`。

作为参考，原始的 WSDL 在[这里](https://api.demo.globalgatewaye4.firstdata.com/transaction/v11/wsdl)。

返回 SOAP Envelope 的结构是：

```
<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tns="http://secure2.e-xact.com/vplug-in/transaction/rpc-enc/" xmlns:types="http://secure2.e-xact.com/vplug-in/transaction/rpc-enc/encodedTypes">
  <soap:Body soap:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
    <q1:SendAndCommitResponse xmlns:q1="http://secure2.e-xact.com/vplug-in/transaction/rpc-enc/Response">
      <SendAndCommitResult href="#id1"/>
    </q1:SendAndCommitResponse>
    <types:TransactionResult xsi:type="types:TransactionResult" id="id1">

    </types:TransactionResult>
  </soap:Body>
</soap:Envelope> 
```

我试图解析的结果将在`TransactionResult`标记内，但 Axis2 正在寻找`SendAndCommitResponse`.

我的问题是，有没有办法告诉 Axis2 客户端在解析结果时遵循结果数据的正确元素？如果没有，我可以手动修改生成的客户端代码直接查看`TransactionResult`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:03:43.380

您的 Web 服务可能是在 Axis1 上编写的。您可以使用 Axis1 来生成您的客户端。我遇到了同样的问题并使用 Axis1 得到了纠正

# c# - 手动在datagridview上添加行

> ID：13362971
> 
> 赞同：9
> 
> 时间：2012-11-13T14:55:21.637
> 
> 标签：c#, winforms

我在 datagridview 上插入了一个复选框列和文本框列。如何在文本框列上手动添加行。

它应该是这样的：

```
checkbox | textbox
............................
checkbox | item1
checkbox | item2
checkbox | item3
checkbox | item4 
```

这是datagridview上复选框和文本框的代码

```
public void loadgrid()
{
    DataGridViewCheckBoxColumn checkboxColumn = new DataGridViewCheckBoxColumn();
    CheckBox chk = new CheckBox();
    checkboxColumn.Width = 25;
    dataGridView1.Columns.Add(checkboxColumn);

    DataGridViewTextBoxColumn textboxcolumn = new DataGridViewTextBoxColumn();
    TextBox txt = new TextBox();
    textboxcolumn.Width = 150;
    dataGridView1.Columns.Add(textboxcolumn);     
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-13T15:01:06.053

`DataGridView`您可以传递一个对象数组，其中包含应按添加列的顺序插入的值。例如你可以使用这个：

```
dataGridView1.Rows.Add(new object[] { true, "string1" });
dataGridView1.Rows.Add(new object[] { false, "string2" }); 
```

你可以从任何你想要的对象数组中构建对象数组，只要确保匹配类型（即使用 bool 作为checkedColumn）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-13T14:59:54.137

您可以使用 Rows 集合手动填充 DataGridView 控件，而不是将其绑定到数据源。

```
this.dataGridView1.Rows.Add("five", "six", "seven", "eight");
this.dataGridView1.Rows.Insert(0, "one", "two", "three", "four"); 
```

看看[文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rows.aspx)

你也可以这样做：

```
DataGridViewRow row = (DataGridViewRow)yourDataGridView.Rows[0].Clone();
row.Cells["Column2"].Value = "XYZ";
row.Cells["Column6"].Value = 50.2;
yourDataGridView.Rows.Add(row); 
```

看到[这个答案](https://stackoverflow.com/a/10063825/395659)

# iphone - How can i send a coupon generated form my website to passbook

> ID：13362974
> 
> 赞同：3
> 
> 时间：2012-11-13T14:55:27.863
> 
> 标签：iphone, passbook

How can I send a coupon generated form my website to passbook. Actually I send the coupon via email. I would like to provide the possibility to the user to add the coupon to the iphone's passbook.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T08:26:17.813

您是否已经设计了 Passbook Pass 并希望通过电子邮件分享，或者您只是拥有“优惠券详细信息”并想要创建 Passbook Pass？

如果是前者，请将您的 Web 服务器配置为使用 mime 类型为 application/vnd.apple.pkpass 的 .pkpass 包提供服务

如果是后者，您可以使用[PassKit](http://passkit.com "PassKit 主页") Pass Designer[创建](http://create.passkit.com "存折通行证设计师")Passbook Pass ，然后您只需在电子邮件中共享 Pass URL。

无论哪种方式，我都建议使用“添加到存折”按钮，因为更多的最终用户都认可这一点。因此，您只需在“添加到存折”按钮中引用 URL。

当用户在他们的邮件客户端中点击它时——如果他们在移动设备上，或者在 Safari (>Mac OSX 10.8.2) 中——那么 Passbook 优惠券将显示在设备屏幕上并且用户可以选择添加这个到 Passbook 应用程序/钱包。

只要客户将优惠券保存在他们的 Passbook 中，您就可以通过推送更新到 Pass 与客户进行交流/互动。因此，您不必通过电子邮件发送新的优惠券或更新。

免责声明：我是 PassKit 的联合创始人之一

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T22:10:34.913

对于如何实施“PassBook”和使用电子邮件的深入指导，我建议查看以下网站/教程。

第 1 部分： [http ://www.raywenderlich.com/20734/beginning-passbook-part-1](http://www.raywenderlich.com/20734/beginning-passbook-part-1)

第 2 部分： [http ://www.raywenderlich.com/20785/beginning-passbook-in-ios-6-part-22](http://www.raywenderlich.com/20785/beginning-passbook-in-ios-6-part-22)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-25T01:35:08.043

There is not enough info to give you a good answer.

However, I can point you in the right direction. If you are running rails, check out this gem: [Passbook](https://github.com/frozon/passbook).

What you will need to do is generate a pass then have a link that downloads it with a MIME type of application/vnd.apple.pkpass. The links @KarlDaniel mentioned ([this one](http://www.raywenderlich.com/20734/beginning-passbook-part-1) and [this one](http://www.raywenderlich.com/20785/beginning-passbook-in-ios-6-part-22)) are also great resources. If you update your question to be more specific, we will be able to help more.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T08:58:22.753

如果您想直接从浏览器链接到 Passbook，那么您只需要链接到 .pkpass 捆绑包并让您的服务器使用 MIME 类型的`application/vnd.apple.pkpass` Apple 服务它，您希望您使用他们的 Add to Passbook 按钮作为链接锚点可以从他们的[存折资源中下载](http://developer.apple.com/passbook)

请注意，这仅适用于 Passbook 兼容平台上的 Passbook 兼容浏览器（当前为 OSX10.8.2+ 和 iPhone iOS6+ 上的 Safari 或 iPhone 版 Chrome）。对于其他平台或浏览器，则将下载该文件，这可能会使用户感到困惑。另请注意，iOS6 上的 Facebook 和 Twitter 浏览器尚不支持浏览器转存折。

# javascript - 不需要响应的跨域AJAX？

> ID：13362981
> 
> 赞同：1
> 
> 时间：2012-11-13T14:55:51.763
> 
> 标签：javascript, ajax

我想进行一个不需要响应的跨域 AJAX 调用（它只是用于收集数据）。我知道您插入脚本标签的 JSONP，但由于我不会返回任何 JSONP，所以我想也许有更好的方法。是否有或者我仍然需要使用相同的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T15:17:31.277

## 如果您控制目标域（收集数据的域）

您可能希望允许“外国”来源，因此您可以使用普通的 XMLHttpRequests 访问它。

在 Apache .htaccess 中，这将类似于（需要 mod_headers）：

```
Header set Access-Control-Allow-Origin * 
```

或者在 PHP 中：

```
header('Access-Control-Allow-Origin: *'); 
```

实际上在 IE8+ 中，跨域 XmlHttpRequests 使用一个特殊的专有接口（XDomainRequest），jQuery（我上次检查的时候）没有规范化。因此，您需要实现自定义*Ajax 传输*以使 jQuery 与 XSS Ajax 一起工作。那将是这样的：

```
if (window.XDomainRequest) {
    $.ajaxTransport(function (options, originalOptions, jqXHR) {
        var xdr;
        if (window.location.host != options.url.match(/:\/\/(.[^\/]+)/)[1]) {
            return {
                send: function (headers, completeCallback) {
                    xdr = new XDomainRequest();
                    xdr.onload = function () {
                        var responses = {
                            text: xdr.responseText
                        };
                        completeCallback(200, 'success', responses);
                    };
                    xdr.onerror = xdr.ontimeout = function () {
                        var responses = {
                            text: xdr.responseText
                        };
                        completeCallback(400, 'failed', responses);
                    };

                    xdr.open(options.type, options.url);
                    xdr.send(options.data);
                },
                abort: function () {
                    if (xdr) {
                        xdr.abort();
                    }
                }
            };
        }
    });
} 
```

（我实际上在生产中使用它，它应该可以工作）

* * *

## 如果您无法控制目标域

任何请求资源的东西（无论是图像、页面还是脚本）都会这样做。

脚本可能仍然是“最轻”的选项，因为它没有被渲染（因此不需要任何样式来隐藏它，并且在任何情况下都不会导致任何重排）。

```
var req = document.createElement('script');
req.setAttribute('src', '//example.com/api/count?' + encodeURI('id=1&data=foo bar'));
document.body.appendChild(req);
document.body.removeChild(req); 
```

限制：如果您无法控制调用返回的内容，并且调用返回无效的 javascript，并且您在页面上的其他代码之前执行此代码，则某些浏览器的 javascript 解释器可能会被中断（取决于严重程度由这个无效代码引起的错误）。

另请注意，如果您无法控制目标域，并且目标域不值得信赖，他们实际上可能会将令人讨厌的坏 javascript 注入站点并做令人讨厌的坏坏事。讨厌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:00:13.217

您可以动态创建表单并将其值发布到使用表单的目标属性的隐藏 iframe。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T15:01:05.867

您可以使用隐藏的 iframe，在其中创建一个以它为目标的隐藏表单：

```
// data is a key-value pair'd object as such:{"key":"value, "key":"value" }
window.xss = function (url, method, data) {
    // function to make creating hidden form elements easier:
    function hEle = function (key,value) {
        var ele = document.createElement("input");
        ele.type = "hidden";
        ele.name = key;
        ele.value = value;
        return ele;
    }

    // create the iframe(can't remember if this has to be appended to the DOM):
    var myIframe = document.createElement("iframe");

    // create the form:
    var myForm = document.createElement("form");
    myForm.setAttribute("action", url);
    myForm.setAttribute("method", method||"GET");
    myForm.target = myIframe;

    // loop through `data` adding hidden elements to the form:
    for (var key in data) {
        if(data.hasOwnProperty(key)) {
            myForm.appendChild(hEle(key, data[key]));
        }
    }

    // Once everything is setup, submit the form
    myForm.submit();
}

// to use:
xss("http://siteIDonthost.com/", "POST", {"myKey" : "OHNOES, VALUE!" }); 
```

一些注意事项：
我不记得 iframe 是否必须附加到文档中。
我不记得你是否可以像我一样定位 iframe（没有 id 等）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T15:03:08.997

我知道的唯一选择是让服务器为您执行查询（如果这是一个选项）。换句话说，在将执行请求的 Web 服务器上提供某种服务......特别是因为您不需要解析任何返回数据，这将是相当微不足道的。例如，您可以`file()`在 PHP 中使用一个简单的调用：

[http://us3.php.net/manual/en/function.file.php](http://us3.php.net/manual/en/function.file.php)

# regex - 只匹配带有问号的字符串的正则表达式

> ID：13362987
> 
> 赞同：2
> 
> 时间：2012-11-13T14:56:10.767
> 
> 标签：regex, escaping

我怎么能写一个匹配只包含问号的字符串的正则表达式

“？？？” > 真的

“？？？” > 真的

“？” > 真的

“？一种？” > 假

"?a" > 假

提前致谢 ！

编辑：我错过了 2 个案例：

“？” > 真的

“？？？” > 真的

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T14:57:00.527

就像这样简单：

```
^[?]+$ 
```

该表达式要求字符串从头到尾由`^`重复一次或多次`$`的问号（方括号防止解释为元字符）组成。`[?]``+`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T18:42:28.023

鉴于字符串可以包含空格（根据编辑），正确的正则表达式是

```
^[ ?]*[?][ ?]*$ 
```

这允许任意数量的空格和问号，并保证至少存在一个问号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T14:59:26.933

也许转义问号是一个更好的主意（因为我总是转义所有符号）：

```
^\?+$ 
```

您也不需要方括号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T18:38:12.840

```
/^(?=\s*\?)[?\s]+$/ 
```

一个解释：

```
^ 
```

匹配字符串的开头

```
(?= ... ) 
```

Lookahead，关于字符串中即将出现的内容的零宽度断言，这里用于断言：

```
 \s* 
```

任意数量的空白，后跟：

```
\? 
```

一个字面的问号。确保字符串中至少有一个问号。

```
[?\s] 
```

匹配问号或空格。

```
+ 
```

一次或多次。

```
$ 
```

匹配字符串的结尾。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T16:54:02.913

使用正则表达式`^\\?+$`

```
 String regex = "^\\?+$";
    Pattern pattern = Pattern.compile(regex);
    System.out.println(pattern.matcher("?").find());//prints true
    System.out.println(pattern.matcher("??").find());//prints true
    System.out.println(pattern.matcher("????").find());//prints true
    System.out.println(pattern.matcher("?a?").find());//prints false
    System.out.println(pattern.matcher("?a").find());//prints false 
```

# jquery - preventDefault 对我不起作用

> ID：13362991
> 
> 赞同：0
> 
> 时间：2012-11-13T14:56:28.857
> 
> 标签：jquery, preventdefault

我对 preventDefault() 感到困惑。

我得到以下工作作为我的测试

```
$('.next').click(function(e){
        if(e.preventDefault){
            console.log("asdfnext");
            e.preventDefault();
        }else{
            console.log("next");
            return false;   
        }       
    }); 
```

这是工作文件的一部分。

```
<a class='next' href='http://www.bbc.co.uk'>Next</a>
<a class='previous' href='http://www.facebook.com'>previous</a> 
```

根据上述，我可以停止链接到 bbc 或 facebook。你可以在这里查看[http://jsfiddle.net/puQ7H/](http://jsfiddle.net/puQ7H/)

但是当我尝试按照以下方式实现时，我会失败，我真的很想知道为什么

```
$('#step0Next').click(function(e){
            if($(this).is('.disabled')){
                console.log("disabled");                    
                    if(e.preventDefault){
                        console.log("asdfnext");
                        e.preventDefault();
                        return false;   
                    }else{
                        console.log("next");
                        return false;   
                    }   

            }else{
                console.log("not disabled");    
            }

        }); 
```

基本上 ==> step0Next 是我的链接 ID

我的CSS如下：

```
a.disabled { opacity:0.2; cursor: default; } 
```

我的想法是如果链接处于（'.disable'）状态，请停止下一步。

实际上链接转到下一步，我在这里停下来。:P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:56:58.713

您正在`.preventDefault`使用 if-block 检查是否存在，为什么？试试这个：

```
$('#step0Next').click(function(e){
    if($(this).hasClass('disabled')){
        console.log("disabled");                    
        e.preventDefault();   
    } else {
        console.log("not disabled");    
    }
}); 
```

而且实际上`.hasClass()`要快一点，因为它没有通过选择器引擎运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T15:02:53.787

尝试使用[event.isDefaultPrevented()](http://api.jquery.com/event.isDefaultPrevented/)

```
if(e.isDefaultPrevented()){

} 
```

> 说明：返回是否曾在此事件对象上调用 event.preventDefault()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T15:07:34.083

你不需要`return false;`，我真的不认为支票是相关的。尝试改用这个：

```
$('#step0Next').click(function(e){
       if($(this).is('.disabled')){
            console.log("asdfnext");
            e.preventDefault();
       }else{
           console.log("not disabled");    
       }
});​ 
```

# assembly - 使用一个寄存器的正弦波

> ID：13362993
> 
> 赞同：0
> 
> 时间：2012-11-13T14:56:30.220
> 
> 标签：assembly, 8051

所以我的任务是创建一个正弦波，我想出了这个，它使用两个寄存器并且可以工作......

```
 DAC    EQU 0600h   ;DAC memory mapped at address 600h
tbl_len EQU 24  ;length of sine wave table

    ORG 8100H       ;start of program

sine:   mov R7, #tbl_len    ;initialise table counter
    mov R6, #0  ;initialise table pointer

sloop:  mov dptr, #table    ;load dptr with address of table
    mov a, R6   ;load acc with table pointer
    movc    a, @a+dptr  ;read from table + table pointer

    mov dptr, #DAC  ;load dptr with 0600 DAC base address
    movx    @dptr, a    ;Output table value from DAC
    acall   delay
    inc R6  ;inc table pointer
    djnz    R7, sloop   ;dec table counter until zero
    sjmp  sine  ;Repeat loop

delay:  mov R0, #11
loop:   djnz    R0, dloop   ;go around this loop 11 times
    ret

table:  DB  1,5,18,38,65,95,128,161,192,218,238,251
    DB  255,251,238,218,192,161,128,95,65,38,18,5 
```

现在我被要求只使用一个寄存器。尽管我觉得这可能是一个非常简单的解决方案，但我还是有点困惑。任何提示都会很棒。