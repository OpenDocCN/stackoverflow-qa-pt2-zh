# StackOverflow 问答 16222000-16222999

# javascript - Internet Explorer 9 中的 HTML5 Image.onload 竞争条件

> ID：16222009
> 
> 赞同：4
> 
> 时间：2013-04-25T18:25:42.530
> 
> 标签：javascript, internet-explorer-9, html5-canvas

我发现了关于 IE 9 和在 stackoverflow 上讨论的将图像绘制到 HTML5 cnavases 的类似时间问题，但没有一个与我的完全匹配。

我遇到了一个问题，即定期调用图像的 onload 函数，但它还没有准备好被绘制到画布上。（画布保持空白）。在 onload 中，图像的“完整”属性始终为真，“宽度”和“高度”属性始终包含预期值。不抛出异常。如果我在将图像绘制到画布之前稍微延迟 onload，我永远不会得到空白绘制。我还可以将另一次尝试绘制图像与鼠标单击等事件联系起来，这总是成功的。我没有在 Chrome 或 Firefox 中观察到这一点。我很欣赏任何见解。谢谢！

```
var canvas = document.createElement('canvas');
canvas.width = 640;
canvas.height = 480;

var context = canvas.getContext("2d");

var image = new Image();

image.onload = function()
{   
    // this.complete always true here
    // A delay here seems to guarantee the draw will succeed
    context.drawImage(this, 0, 0);  // Half the time canvas remains blank after draw
    // If the canvas is still blank, a later call to context.drawImage with this image will succeed

}

image.src = "some.png"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:17:56.533

我看不到您将画布附加到身体的哪个位置——这是故意的吗？

不管怎样，试着把`createElement`里面`onload`

这会让事情始终如一吗？

```
 var canvas;
    var context;

    var image = new Image();

    image.onload = function()
    { 
        canvas = document.createElement('canvas');
        canvas.width = 640;
        canvas.height = 480;
        document.body.appendChild(canvas);
        context = canvas.getContext("2d");

        context.drawImage(this, 0, 0);  // Half the time canvas remains blank after draw
    }
    image.src="https://dl.dropboxusercontent.com/u/139992952/stackoverflow/city-q-c-640-480-6.jpg"; 
```

# android - 在使用 IabHelper 的 App Billing v3 IllegalArgumentException 中

> ID：16222015
> 
> 赞同：10
> 
> 时间：2013-04-25T18:26:05.843
> 
> 标签：android, in-app-billing

我已经在我的应用程序中实施了应用程序计费 v3 大约一个星期。我使用了很多 android 的示例代码来简化集成。我经常记录我似乎无法重现的崩溃：

```
Exception Type: java.lang.RuntimeException
Reason: Unable to destroy activity    {[package].billing.BillingActivity}: java.lang.IllegalArgumentException: Service not registered: [package].billing.util.IabHelper$1@40646a70 
```

它似乎打破了这条线：

```
if (mContext != null) mContext.unbindService(mServiceConn); 
```

我在我的 onCreate 方法中绑定了这个服务，并在我的 onDestroy 方法中处理它（这是记录这个错误的地方）。任何指针？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-05-11T21:04:51.030

您可以替换您提到的行：

```
if (mContext != null) mContext.unbindService(mServiceConn); 
```

通过这条线

```
if (mContext != null && mService != null) mContext.unbindService(mServiceConn); 
```

这应该可以解决问题

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-08-11T15:51:44.647

我检查了[示例项目](http://code.google.com/p/marketbilling/source/browse/v3/src/com/example/android/trivialdrivesample/util/IabHelper.java?r=5f6b7abfd0534acd5bfc7c14436f4500c99e0358)的最新版本，直到今天我的建议是目前**不要**使用`IabHelper`. 它有很大的缺陷。

给你一个想法：

1.)`IabHelper`启动新线程的异步方法。如果`IabHelper.dispose()`在线程运行时调用，您总是会遇到各种您甚至无法处理的异常。

2.) 如果与计费服务的连接中断，他们将其设置为`null`。但除此之外，他们**从不**检查是否`mService`是`null`在访问方法之前。`NullPointerException`所以在这种情况下它总是会崩溃。

```
public void onServiceDisconnected(ComponentName name) {
                logDebug("Billing service disconnected.");
                mService = null; 
```

而这只是冰山一角。说真的，我不明白有人如何将其发布为参考代码。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-26T01:32:52.583

我只是在android模拟器上遇到了同样的问题。Billing v3 要求至少启动一次 Google Play 应用程序，并且由于模拟器缺少 Google Play 应用程序，它无法设置助手，也无法在 onDestroy() 中处理它。

我个人的解决方法只是在 try/catch 中跳过该错误：

```
@Override
protected void onDestroy() {
    super.onDestroy();

    if (bHelper != null){
        try {
            bHelper.dispose();
        }catch (IllegalArgumentException ex){
            ex.printStackTrace();
        }finally{}
    }
    bHelper = null;
} 
```

在您处理助手的每个 onDestroy() 中添加它。对我来说很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-18T07:05:41.470

`IabHelper`班级以正常的方式工作。

你需要做的是：当你调用`startSetup`助手时，你需要传递一个回调`IabHelper.OnIabSetupFinishedListener`，它会告诉你启动设置的结果。如果回调失败，则与 google play 服务的服务连接未建立。您应该`IabHelper`根据在`IabHelper.OnIabSetupFinishedListener`. 您当然可以保留一个`boolean`字段以了解状态。

[sam](https://stackoverflow.com/users/327172/sam)提供的答案实际上是一个技巧（用他自己的话来说）。助手类不应该抛出异常，以便这些类的用户可以在这种情况下实现某些任务。

当然，`try/catch`如果您不想详细介绍，这是最好的方法（每当由于异常而出现任何问题时，首先想到的肯定是将其放在一个`try/catch`块中）。

# cocoa - 我对 NSFetchedResultsController 和从 MOC 中删除对象有什么不了解？

> ID：16222018
> 
> 赞同：1
> 
> 时间：2013-04-25T18:26:14.960
> 
> 标签：cocoa, core-data, nsfetchedresultscontroller

我正在使用 NSFetchedResultsController 成功更新 tableview，这就是我正在做的事情：

*   加载应用程序并调用`- (NSFetchedResultsController *)fetchedResultsController`以填充表格视图
*   放`self.fetchedResultsController.delegate = nil`
*   删除所有命名的实体`<myEntityName>`
*   **使用以下方法将一个或多个实体**插入MOC`[NSEntityDescription insertNewObjectForEntityForName:<myEntityName> inManagedObjectContext:managedObjectContext];`
*   挂钩 FetchedResultsController 备份：`self.fetchedResultsController.delegate = self;`
*   然后我保存 MOC

在这一切之后，FetchedResultsController 方法`controllerDidChangeContent:`触发，我已经放置`[self.tableView reloadData]`了表更新，我很高兴。

**同样，这一切都很好。**导致我头疼的原因是当我简单**地删除**`[NSEntityDescription insertNewObjectForEntityForName:entityName inManagedObjectContext:managedObjectContext];`消息时，我收到以下错误：

```
'NSInternalInconsistencyException', reason: 'no section at index 3' 
```

我大致知道发生了什么：MOC 与 FetchedResultsController 不同步，似乎当其他人遇到这种情况时，他们开始退出`controller:didChangeObject:atIndexPath:forChangeType:newIndexPath:`并`configureCell:atIndexPath:`逐行更新 fetchController。

但我的问题是：为什么简单删除 managedObject 插入消息会导致我原本可以工作的代码中断？

在我的原始代码中，我删除了 managedObjects，然后插入 managedObjects 就好了，但是当我只删除 managedObjects 时，代码会中断。

我不需要每个单元格单独更新，我当前的代码工作正常。我如何使它工作？

我在这里想念什么？

# java - 将数据导入二维公共数组

> ID：16222019
> 
> 赞同：0
> 
> 时间：2013-04-25T18:26:16.080
> 
> 标签：java, arrays

我正在为学校开发一个程序，它将 3 个程序组合在一起（一个转置二维数组，一个将对角线相加并告诉它们，一个添加行）。我遇到的问题是将所有数据导入二维数组“输入”，以便所有方法都可以使用它。每次我尝试运行程序时，它都会给我“java.lang.NullPointerException：null”。我该如何解决？

我的代码：

```
 import java.io.File;
    import java.io.FileNotFoundException;
    import java.util.Scanner;
    /**
     * This is program combines 3 programs in 1
     * 
     * @author (your name) 
     * @version (a version number or a date)
     */
    public class threeprogs
    {
// instance variables - replace the example below with your own
private int x;
public static int[][] input;
public static int[][] output;
/**
 * Runs All methods
 */
public  static void main(String[] args)
{
   //inputs info
    File file = new File("prog464a.dat");
    try { 
        Scanner scanner = new Scanner(file);
        while(scanner.hasNextInt())
        {
            for(int i = 0; i<5; i++)
            {
                for(int j = 0; j<5; j++)
                {
                    input[i][j] = scanner.nextInt();
                    output[i][j] = input[i][j];
                }   
            }
        }
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
   int programs = 0;
   while(programs <3)
    {
        //make all programs execute here
        switch (programs)
        {
                case 0:  transpose();
                 break;
                 case 1:  AddDiag();
                 break;
                 case 2:  AddRowsandCol();
                 break;
                }
         //prints output
        for(int i=0; i<5;i++)
        {
            System.out.print("\n");
            for(int j=0;j<5;j++)
            {
                System.out.print(output[i][j]);
            }
        }
    }
}
/**
 * An example of a method - replace this comment with your own
 * 
 * @param  y   a sample parameter for a method
 * @return     the sum of x and y 
 */
public static int[][] transpose()
{  
    for(int i=0; i<input.length; i++)
    {
        for(int j=1; j<input[0].length; j++)
        {
            output[i][j] = input[j][i];
        }
    }
    return output;
}
public static String AddRowsandCol()
{  
    int total = 0;
    int loop = 0;
    for(int i=0; i<5; i++)
    {
       for(int j=0; j<5; j++)
       {
           if(loop<i)
           {
                output[loop][5] = total;
                total = 0;
           }
           total += output[i][j];
        }
    }
    return "Origional Matrix\n" +input +"\n\nWithTotals" +output;
}
public static String AddDiag()
{  
    int totala = 0;
    int totalb = 0;
    int count = 5;
    for(int i=0; i<5; i++)
    {
        count--;
        totala += input[i][i];
        totalb += input[i][count];
    }
    return "Main Diagonal Sum " +totala +"\nOther Diagonal Sum" +totalb;
}
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:28:39.197

在`input`分配任何值之前应该初始化数组

```
int[][] input = new int[5][5]; 
```

同样对于`output`数组：

```
int[][] output = new int[5][5]; 
```

# jquery - 通过单击按钮 jquery 来切换下拉列表

> ID：16222023
> 
> 赞同：1
> 
> 时间：2013-04-25T18:26:32.820
> 
> 标签：jquery, button, toggle

我有一个引导程序设计的下拉菜单（链接： http: [//prntscr.com/124hf4](http://prntscr.com/124hf4)），当我单击“试用”按钮时，下拉菜单会打开，但是当我单击屏幕上的任何地方时它会关闭。仅当我再次单击“尝试”按钮时才需要关闭它。我摆脱了想法，不知道该怎么做。

编辑：我有一个隐藏功能，我尝试修改了很多想法，但什么也得不到。这里是函数代码：`null;

```
function hide(event) {
    $('span').click(function() {
        // In some cases we don't hide them
        var targetGroup = event ? $(event.target).parents().addBack() : 
        // Are we clicking anywhere in a dropdown?
        if( targetGroup && targetGroup.is('.dropdown') ) {
            // Is it a dropdown menu?
            if( targetGroup.is('.dropdown-menu') ) {
                // Did we click on an option? If so close it.
                if( !targetGroup.is('A') ) return;
            } else {
                // Nope, it's a panel. Leave it open.
                return;
            }
        }

        // Hide any dropdown that may be showing
        $(document).find('.dropdown:visible').each( function() {
            var dropdown = $(this);
            dropdown
                .hide()
                .removeData('dropdown-trigger')
                .trigger('hide', { dropdown: dropdown });
        });

        // Remove all dropdown-open classes
        $(document).find('.dropdown-open').removeClass('dropdown-open');
    });
} 
```

有任何想法吗？

点击事件的第二行是我想做的失败尝试。

# backbone.js - 使用 requirejs 在backbonejs 中扩展视图

> ID：16222026
> 
> 赞同：0
> 
> 时间：2013-04-25T18:26:44.470
> 
> 标签：backbone.js, requirejs, underscore.js, amd, extending-classes

所以我使用的视图是带有标签的侧边栏，所以我创建了一个父类 SidebarView，我从中扩展了两个新类。LeftSidebarView 和 RightSidebarView。这是父类：

```
define([
  'jquery',
  'underscore',
  'backbone',
  'eventbus'
], function ($, _, Backbone, eventBus) {
  'use strict';
  var SidebarView = Backbone.View.extend({
    tabs: [],
    isHidden: true,
    alignment: '',
    el : '',
    templateId: '',
    milliseconds: 300, 
```

注意“标签：[]”数组。从它扩展的两个类仅具有填充选项卡的初始化函数：

```
define([
  'jquery',
  'underscore',
  'backbone',
  'views/sidebar',
  'eventbus',
  'views/search'
], function ($, _, Backbone, SidebarView, eventBus, SearchView) {
  'use strict';
  var RightSidebarView = SidebarView.extend({
    alignment: 'right',
    el: "#rightSidebar",
    templateId: '#sidebarTemplate',

    initialize : function() {
      this.tabs['search'] = new SearchView({model: this.model});
    }
  });
  return RightSidebarView;
}); 
```

另一个是：

```
/*global define*/
define([
  'jquery',
  'underscore',
  'backbone',
  'views/sidebar',
  'views/listings',
  'views/listingDetails',
  'eventbus'
], function ($, _, Backbone, SidebarView, ListingsView, ListingDetailsView, eventBus) {
  'use strict';
  var LeftSidebarView = SidebarView.extend({
    alignment: 'left',
    el: "#leftSidebar",
    templateId: '#sidebarTemplate',

    initialize : function() {
      this.tabs['listings'] = new ListingsView({collection: this.collection);
      this.tabs['listingDetails'] = new ListingDetailsView();
    }
  });

  return LeftSidebarView;
}); 
```

在我的 main.js 文件中，我这样做：

```
var leftSidebarView = new LeftSidebarView({collection:listings});
var rightSidebarView = new RightSidebarView({model: searchModel}); 
```

发生的情况是作为 LeftSidebarView 实例的 leftSideBarView 和作为 RightSidebarView 实例的 rightSidebarView 在 this.tabs 中都有 3 个成员。看起来像。我仍然认为自己是一个 javascript 菜鸟，所以我不得不问这是否是预期的行为？为什么会这样？我查看了 _.extend 的文档，它说它返回一个副本而不是参考。所以我对发生这种情况感到有点惊讶。

编辑：更好地制定了介绍，并稍微清理了代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:55:32.977

tabs 属性附加到 SidebarView.prototype，这意味着它在 RightSidebarView 和 LeftSidebarView 实例之间共享。您在扩展方法中作为配置选项发送的所有内容都将覆盖基类原型并且是共享的——就像面向对象语言中的静态属性一样！这意味着您必须更改实现以在初始化方法中初始化选项卡，例如：

```
SidebarView:
initialize : function() {
    this.tabs = [];
}
RightSidebarView:
initialize: function() {
    RighitSidebarView.__super__.initialize.apply(this, arguments);
    // additinal initialization stuff...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T20:20:05.203

我假设您打算将选项卡声明为哈希而不是数组，因为您正在使用属性分配。 *您可以使用数组，但您会将元素推入其中而不是分配属性。*

您的扩展对象上不存在 tabs 属性。它在 SidebarView 的原型链上进一步定义。您可以在这个小提琴中看到，当您调用 rightSidebar.hasOwnProperty('tabs') 并且它返回 false 时。

[http://jsfiddle.net/puleos/yAMR2/](http://jsfiddle.net/puleos/yAMR2/)

```
var SidebarView = Backbone.View.extend({
    tabs: {},
    isHidden: true,
    alignment: '',
    el : '',
    templateId: '',
    milliseconds: 300
});

var RightSidebarView = SidebarView.extend({
    alignment: 'right',
    el: "#rightSidebar",
    templateId: '#sidebarTemplate',

    initialize : function() {  
      this.tabs['search'] = {type: "search"};
    }
  });

var LeftSidebarView = SidebarView.extend({
    alignment: 'left',
    el: "#leftSidebar",
    templateId: '#sidebarTemplate',

    initialize : function() {
      this.tabs['listings'] =  {type: "listings"};
      this.tabs['listingDetails'] = {type: "listing details"};
    }
});

var rightSidebar = new RightSidebarView();
var leftSidebar = new LeftSidebarView();

console.log(rightSidebar.hasOwnProperty('tabs'));  // false
console.log(rightSidebar.tabs); 
```

# oracle - 通过 DB Link 在另一台服务器上创建用户的语法

> ID：16222027
> 
> 赞同：1
> 
> 时间：2013-04-25T18:26:47.050
> 
> 标签：oracle, dblink

我想使用数据库链接在另一台服务器上创建一个用户。这可能吗？（假设我有权限）

这是在本地服务器上创建用户的语法

```
create user TEST_USER 
identified by TEST_USER_PW 
default tablespace USERS 
temporary tablespace TEMP; 
```

怎么能用数据库链接来完成？

谢谢（如果不在主题范围内，请随时将其迁移到 DBA）

编辑：Haki 提出在远程数据库上不允许 DDL 操作。一旦我找到一个，我会发布一个替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T03:38:00.447

[您可以使用DBMS_UTILITY.EXEC_DDL_STATEMENT](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_util.htm#i1002666)在数据库链接上执行 DDL ：

```
begin
    dbms_utility.exec_ddl_statement@myself(
        'create user TEST_USER 
        identified by TEST_USER_PW 
        default tablespace USERS 
        temporary tablespace TEMP');
end;
/ 
```

# php - 使用来自其他 Zend 项目的库

> ID：16222028
> 
> 赞同：0
> 
> 时间：2013-04-25T18:26:48.663
> 
> 标签：php, zend-framework

我在 Zend Framework 中有两个项目，所以我有两个不同的库，但我需要使用另一个项目中的一些类。

你知道如何在没有副本的情况下将这些类添加到我的 zend 项目中，因为当我更改一个时，我必须更改另一个？两者都在同一台服务器上

/www/project1/library/rules/classes.php

/www/project2/ <--需要这个项目中的类`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:11:52.530

将其添加到您的包含路径中。例如，在您的 index.php 文件中使用

```
set_include_path(implode(PATH_SEPARATOR, array(
  realpath(APPLICATION_PATH . '/../library'),
  realpath('/var/www/project2/library'),
  get_include_path(),
))); 
```

# javascript - 甜甜圈饼图 - 添加标题 - NVd3.js

> ID：16222038
> 
> 赞同：3
> 
> 时间：2013-04-25T18:27:28.830
> 
> 标签：javascript, d3.js, pie-chart, nvd3.js

我正在探索 NVD3.js 库。令我惊讶的是，它可以如此快速地生产出东西。

但有时似乎很难改变图表。在这种情况下，**我想为我的图表添加一个标题**。

另一件事，**我想在 tool-tip 中添加额外的数据**。所以在悬停时，它还会在我的数据中包含注释。

数据样本：

```
var data = [
{
  key: "Loans",
  y: 52.24
  note: "Expect greatest value"
}]; 
```

这是我正在玩的代码：

```
nv.addGraph(function() {

var width = 500,
    height = 500;

var chart = nv.models.pieChart()
    .x(function(d) { return d.key; })
    .values(function(d) { return d; })
    .color(d3.scale.category10().range())
    .width(width)
    .height(height)
    .donut(true);

chart.pie
    .startAngle(function(d) { return d.startAngle/2 -Math.PI/2; })
    .endAngle(function(d) { return d.endAngle/2 -Math.PI/2 ;});

  d3.select("#chart")
      //.datum(historicalBarChart)
      .datum([data])
    .transition().duration(1200)
      .attr('width', width)
      .attr('height', height)
      .call(chart);

return chart;
}); 
```

![甜甜圈饼图示例](https://i.stack.imgur.com/P8Yqs.jpg)

* * *

**更新：** 工具提示的原始代码位于`src->models->pieChart.js`：

```
tooltip = function(key, y, e, graph) {
    return '<h3>' + key + '</h3>' +
           '<p> Confidence: ' +  y + '%</p>'
  } 
```

我试过用我自己的函数覆盖它。但要么得到错误，要么没有变化。

**标题更新：**我通常使用以下代码（或类似代码）作为标题。

```
svg.append("text")
    .attr("x", (width / 2))
    .attr("y", 0 - (margin.top / 2))
    .attr("text-anchor", "middle")
    .style("font-size", "16px")
    .style("text-decoration", "underline")
    .text("Awesome Title"); 
```

但当然，这在 NVD3 中无效。我不知道使用什么函数来指定标题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-29T18:21:39.353

我认为您正在寻找图表。[tooltipContent](https://github.com/novus/nvd3/blob/master/src/models/pieChart.js#L274) () JSFiddle：http: [//jsbin.com/idosop/7/edit](http://jsbin.com/idosop/7/edit)

```
 var tp = function(key, y, e, graph) {
            console.log(key, e, y);
            return '<h3>' + key + '</h3>' +
                   '<p>!!' +  y + '!!</p>' +
              '<p>Likes: ' +  e.point.likes + '</p>';
      };
      chart.tooltipContent(tp); 
```

# c# - 我想在 C# 中动态获取选项

> ID：16222044
> 
> 赞同：0
> 
> 时间：2013-04-25T18:27:36.367
> 
> 标签：c#, forms, dynamic, for-loop, options

当我提交表单时，我想使用 for 循环获取选项值，并且我有这段代码，我怎样才能成功地让这个模块工作？

```
 for (int j = 0; j < i; j++)
        {
            String gender = Request.Form['"Option"+i'].ToString();
            Response.Write(gender);
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T18:28:39.067

我*想*你只是想要：

```
String gender = Request.Form["Option" + i].ToString(); 
```

它是索引器参数的事实在这里无关紧要。就像这样：

```
int x = 5;
String y = "Option" + x; // Now y is "Option5" 
```

但是，查看您的循环，您可能*实际上*想要使用`j`而不是`i`：

```
for (int j = 0; j < i; j++) 
```

的值`i`在循环过程中不会改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T18:28:44.837

尝试这个

```
String gender = Request.Form["Option" + j].ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T18:28:45.837

你可以这样做

```
for (int j = 0; j < i; j++)
{
    string key = string.Format("Option{0}", i);
    string gender = Request.Form[key].ToString();
    Response.Write(gender);
} 
```

但是，由于您的`for`-loop 的编写方式，它只会输出相同的表单字段`i`时间。你可能想要这样的东西：

```
for (int j = 0; j < totalFields; j++)
{
    string key = string.Format("Option{0}", j);
    string gender = Request.Form[key].ToString();
    Response.Write(gender);
} 
```

# ruby-on-rails - Resque 适用于控制器，但不适用于模型

> ID：16222045
> 
> 赞同：1
> 
> 时间：2013-04-25T18:27:40.047
> 
> 标签：ruby-on-rails, resque

我有一个 Resque 工作者，它只在控制器或观察者中使用时工作，但在模型中不工作。我尝试从触发器运行，或从控制器调用函数但没有运气。不断返回

```
Resque::NoQueueError (Jobs must be placed onto a queue.):

# models/message
def notify_receiver
  Resque.enqueue(Push, {user: receiver_id, message: message}) 
end

# workers/push
class Push
  @queue = :push_queue  
  def self.perform(options={})
    Rails.logger.info "> Push Queue"
    PushNotification.new(options).publish
  end
end 
```

谁能指出问题出在哪里？

# java - 我是 Selenium 的新手，使用 Java(Eclipse)，我在使用 firebug 时遇到了确定 xpath 的问题

> ID：16222046
> 
> 赞同：0
> 
> 时间：2013-04-25T18:27:40.500
> 
> 标签：java, xpath, selenium

当我使用萤火虫时，我把它作为 xpath 它给了我这个 /html/body/div[5]/div[2]/div/div[7]/div/div[4]/div/div[2 ]/div/ol/li/div/h3/a

我不清楚如何在 Selenium Webdriver 中使用它来单击链接。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:44:10.500

这在文档中有很好的介绍。

[http://docs.seleniumhq.org/docs/03_webdriver.jsp#selenium-webdriver-api-commands-and-operations](http://docs.seleniumhq.org/docs/03_webdriver.jsp#selenium-webdriver-api-commands-and-operations)

但是，因为它是一个非常简单的答案，您只需执行以下操作：

```
driver.findElement(By.xpath("div[5]/div[2]/div/div[7]/div/div[4]/div/div[2]/div/ol/li/div/h3/a")); 
```

（假设`driver`是一个有效的 WebDriver 实例，我省略了该`html/body`部分 - 它不是必需的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T05:42:14.670

不要不必要地使用 xpath。将来会出问题。如果没有其他方法可以像@Nora 所说的那样定位该元素，请尝试简化 xpath。

在您的情况下，您可以使用 By.linkText、By.partialLinkText。

```
driver.findElement(By.linkText("linkName")).click();

driver.findElement(By.partialLinkText("partialTextOfLink")).click();

driver.findElement(By.xpath("//a[text()='LinkText']")).click(); //simplified xpath 
```

如果该锚标记没有可用的其他属性（id、name ..etc），您可以使用上述任何一种。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T21:41:13.590

始终尝试简化 xpath，尝试使用带有此 xpath 的 firebug 来查看它是否是唯一的，如果不是，您需要更具体一些。

```
"//h3/a" 
```

# javascript - 如何在 pyside qwebview 中从本地计算机加载 javascript？

> ID：16222049
> 
> 赞同：1
> 
> 时间：2013-04-25T18:27:52.513
> 
> 标签：javascript, python, pyside, qwebview

我的文件

```
messi_fan.py
barcelona_fan.html
jq.js 
```

在同一目录中。

**messi_fan.py**

```
 f = open('barcelona_fan.html', 'r')
        html = f.read()
        f.close()
        self.webView = QWebView()
        self.webView.setHtml(html, baseUrl=QUrl('http://local'))
        self.webView.show() 
```

**barcelona_fan.html**

```
<script type="text/javascript" src = "jq.js"></script> 
```

我的问题是 jquery 没有在 Qwebview 中加载。如果我在 barcelona_fan.html 中这样使用

```
<script type="text/javascript" src = "http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script> 
```

一切都会奏效。但我想从本地加载 .js 文件。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T14:43:11.403

让 baseUrl 查看本地目录：

```
path = "c:\\foo\\bar"
self.webView.setHtml(html, baseUrl = QUrl().fromLocalFile(path)) 
```

顺便说一句：如果需要，不要忘记：

```
self.webView.settings().setAttribute(QWebSettings.LocalContentCanAccessRemoteUrls, True) 
```

# php - 使用 Yii 活动记录从 DB 中读取多行

> ID：16222051
> 
> 赞同：0
> 
> 时间：2013-04-25T18:27:58.633
> 
> 标签：php, activerecord, model, yii

我希望能够使用 Yii 框架读取多行，而不必创建多个模型对象。考虑到这一点，我正在设置一个 CDbCriteria，其条件为 RowName = :param0 OR RowName = param1... RowName = ParamN 和相应的 params 值。

我的问题有两个。首先是 findall 失败。第二个是我不知道如何从 findall 调用中获取错误代码（因此返回“heartBeat”行）。

```
class Xactions extends CActiveRecord
{
.
.
.
//example $requests data: '192.168.1.162, 192.168.1.161'
//This function should return a Xactions model which is associated with any rows
// where tcpAddress = $requests Comma separated values.
public static function HeartBeatmodel($requests)
{
        $criteria=new CDbCriteria;
        $request_arr =  explode(',', $requests);
        $criteria->condition=Xactions::request_condition("tcpAddress", count($request_arr));;
        $criteria->params= Xactions::request_params($request_arr);
        $return= Xactions::model()->findall($criteria);
        return "heartBeat"; // here for debugging purposes
}
public static function request_condition($column_name, $num_request){
        //want to end up with name=:param1 OR name=:param2....
        $return_str = "";
        for ($i = 0; $i < $num_request; $i++){
            $return_str .= $column_name . '=param' . (string)$i . ' ';
            if($i == $num_request -1 ) break; //prevents extra OR statement
            $return_str .= 'OR ';
        }
        return $return_str;
}

public static function request_params($requests){
        $return_arr = array();
        for ($i = 0; $i < count($requests); $i++){
            $return_arr['param' . (string)$i] = $requests[$i];
        }
        return $return_arr;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:42:54.063

也许这样的事情可以工作？

```
class Xactions extends CActiveRecord {
        public static function HeartBeatmodel($requests) {
                $criteria = new CDbCriteria;
                $request_arr =  explode(',', $requests);

                for($request_arr as $request) {
                    $criteria->compare('tcpAddress', $request, false, 'OR');
                }

                return Xactions::model()->findAll($criteria);
        } 
```

我正在使用 CDbCriteria->compare，您可以在此处找到规范：[http ://www.yiiframework.com/doc/api/1.1/CDbCriteria#compare-detail](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#compare-detail)

正如你所看到的，我设置`$partialMatch`为 false 和`$operator`to`OR`所以它应该完成你想要的，对吧？

编辑：我刚刚意识到，最聪明的方法就是这样

```
public static function HeartBeatmodel($requests) {
  $criteria = new CDbCriteria;
  $criteria->addInCondition('tcpAddress', explode(',', $requests));

  return Xactions::model()->findAll($criteria);
} 
```

# java - 按顺序迭代和更新大型数据集的后台任务

> ID：16222052
> 
> 赞同：1
> 
> 时间：2013-04-25T18:28:03.490
> 
> 标签：java, google-app-engine

作为后台任务，我需要按索引顺序遍历相当大的实体数据集。（实体数量约 200,000+）

我知道 TaskQueue API 以及可能的后台实例是可行的方法，但我有时会遇到 DataStoreUnavailable 和超时异常，我正在寻找的是一种使用 GAE 在后台进行迭代和更新的可靠方法蜜蜂。

了解迭代的进度对我也很有用。

我也知道实验性的 Java Map Reduce API，但在我看来，这似乎更像是一个并行处理 API，而不是有序的。（如果我错了，请纠正我。Java Map Reduce 示例目前似乎很少而且相距甚远）

有没有做这类工作的具体例子或好的模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T14:18:10.333

仅处理作业中有限数量的实体。

像往常一样从查询开始，但如果作业请求具有游标参数，请将其应用于查询。然后只获取固定数量的实体，而不是全部获取。

当作业完成，但有更多实体要处理时，检索当前查询游标，并使用游标作为请求参数再次调度相同的作业。

# linux - 在 Linux/UNIX 中加入 pthread 的主要目的是什么？

> ID：16222053
> 
> 赞同：0
> 
> 时间：2013-04-25T18:28:07.943
> 
> 标签：linux, multithreading, unix, pthreads

我是一名学生，我现在正在研究线程，尽管非常仔细地阅读了 TLPI，但我仍然不太了解为什么一个人可能会加入两个 pthread。

据我所知，它既可以用作一个线程将返回值传递给另一个线程的一种方式，也可以用作线程之间的等待机制。也就是说，我完全有可能误解了整个观点。有人愿意为我解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T09:37:48.787

线程主要用于并行处理。**加入/退出**线程意味着完成了线程的工作/目的。当目的实现时，资源应该被**释放并可供其他线程/进程使用**。资源可以是以下任何一种：

1.  Stack（正如 Basile Starynkevitch 所说）
2.  处理器时间
3.  打开的文件/共享内存/线程锁定/预订的任何其他资源。

加入线程可以仅用于**移动控制**，也可以用于**将值**作为返回值进行传输（如 Michael Burr 所说）。

# dns - 我的 EC2 实例接收不相关主机名的流量。这是怎么发生的？

> ID：16222054
> 
> 赞同：2
> 
> 时间：2013-04-25T18:28:07.747
> 
> 标签：dns, amazon-ec2, amazon-elb

我在弹性负载均衡器后面有几个 EC2 实例。这些实例为单个网站提供 HTTP 请求。我最近开始查看流量的 HOST 标头，因为我打算将我的应用程序拆分为虚拟主机。

我有规律地（一天几十次）记录一个与我的服务器完全无关的主机名请求。作为几个例子，今天我看到了带有主机名`ad.adserverplus.com`和`r1---sn-upfn-hp5e.c.youtube.com`. 我查了这些，发现 IP 地址与我的任何服务器都不相同，也不与 ELB 相同，所以我试图建立一个关于这种情况如何发生的理论。

我意识到有人可能在欺骗主机头，但这种情况经常发生，我很确定这不是正在发生的事情。我的另一个想法是，不知何故，有一些陈旧的 DNS 数据恰好将其中一个主机解析为我的 IP 地址，但这似乎偶尔会发生一次，但不会定期发生。还有哪些其他可能性，我如何验证/抹黑它们？

编辑我今天查看了一些意外的主机名，似乎它们实际上*确实*解析为一个 IP，该 IP 是我的域顶点解析到的可能 IP 之一。我将 Route 53 用于 DNS，并且我将区域顶点指向 ELB，因此当我查询我的域的 IP 地址时，我会根据我询问的时间得到不同的答案。所以这让我很好奇，这些 IP 地址是如何分配给我的，EC2 如何确保他们没有选择其他人已经在使用的 IP 地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:39:14.497

这有很多原因。首先，您应该了解您的 EC2 实例和负载均衡器的公共主机名之前可能已经使用过。如果您有一个与负载均衡器关联的弹性 IP，那么它之前也可能被使用过。

因此，您可以获得针对您当前正在使用的 IP 地址主机名的先前租户的服务器的流量。

您可以做的一件事是将您的 Web 服务器配置为拒绝流量（以 403 响应）拒绝未使用指定的正确主机名到达或来自特定外部主机的流量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-16T11:28:09.757

您的 IP 或您的 ELB 的 IP 可能曾经是一个开放代理。这意味着有人希望您将请求转发到他们的预期目的地。

但一般来说，打开 80 端口到互联网，各种机器人和僵尸会以相当稳定的狡猾请求流访问你。我想尽管 \ec2 IP 范围将是一个特别多汁的范围，可以搜索修补不良的网站以进行利用。

# c# - 获取格式错误的 SOAP 响应

> ID：16222055
> 
> 赞同：0
> 
> 时间：2013-04-25T18:28:10.953
> 
> 标签：c#, java, android, xml, soap

我是 Web 服务的新手，我正在编写一个可以与 Web 服务通信的 Android 应用程序。但是当我尝试在 android 屏幕中显示结果时，它显示：

```
MethodNameResponse{MethodNameResult=anyType{};} 
```

Web 服务应该对服务器数据库进行简单查询并发布结果，这里是调用 Web 服务的方法的代码：

```
public void Convert(String val) {
        try {
            SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE,METHOD_NAME);

            PropertyInfo p = new PropertyInfo();
            p.setName(PROPERTY_NAME);
            p.setValue(val);
            p.setType(String.class);
            request.addProperty(p);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);

            HttpTransportSE ahs = new HttpTransportSE(SOAP_ADDRESS);
            ahs.call(SOAP_ACTION, envelope);

            SoapObject response = (SoapObject) envelope.bodyIn;
                     TextView.setText(response.toString());

        } catch (Exception e) {
            Log.e(TAG, e.toString());
        }
} 
```

我的猜测是服务有问题，或者我对数据的解释不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:10:20.427

首先，将信封.body 替换为信封.get response()

您在 SoapObject 中的响应 - 因此不仅仅是您必须使用 toString 的东西。假设您知道来自服务的响应是什么样的，您将需要映射响应中的数据。（例如，您的响应可能是一个复杂的 XML 结构，因此 SoapObject 响应将反映这一点）。

这是一个使用 SoapObject 并映射响应的非常完整的示例

[http://seesharpgears.blogspot.co.uk/2010/10/ksoap-android-web-service-tutorial-with.html](http://seesharpgears.blogspot.co.uk/2010/10/ksoap-android-web-service-tutorial-with.html)

# android - 在 Android 上实现的 2D Point in triangle 测试

> ID：16222057
> 
> 赞同：0
> 
> 时间：2013-04-25T18:28:14.070
> 
> 标签：android, geometry, 2d, point, intersection

**我想在Android**平台**上**使用纯 Java确定**2D 点**是否*在*三角形内。我为 2D 点使用与 Android 中用于绘制三角形的相同表示（[Canvas.drawVertices()](http://developer.android.com/reference/android/graphics/Canvas.html#drawVertices%28android.graphics.Canvas.VertexMode,%20int,%20float%5B%5D,%20int,%20float%5B%5D,%20int,%20int%5B%5D,%20int,%20short%5B%5D,%20int,%20int,%20android.graphics.Paint%29)）保留了一个特殊奖励。

 ****我已经找到了交集测试本身的[答案](https://stackoverflow.com/questions/2049582/how-to-determine-a-point-in-a-triangle)，但它们并没有像我想要的那样适应 Android。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:28:14.070

根据与我现在有两种测试方法的问题相关的答案，我变得（非常）不耐烦并自己实施了这个。TODO：减少临时分配。

```
import android.graphics.PointF;
//...
private float sign(PointF p1, PointF p2, PointF p3) {
    return (p1.x - p3.x) * (p2.y - p3.y) - (p2.x - p3.x) * (p1.y - p3.y);
}

private boolean pointInTriangle(PointF pt, PointF v1, PointF v2, PointF v3) {
    boolean b1, b2, b3;
    b1 = sign(pt, v1, v2) < 0.0f;
    b2 = sign(pt, v2, v3) < 0.0f;
    b3 = sign(pt, v3, v1) < 0.0f;
    return ((b1 == b2) && (b2 == b3));
}

private boolean pointInTriangle(float x, float y, float[] v) {
    return pointInTriangle(new PointF(x, y), new PointF(v[0], v[1]), new PointF(v[2], v[3]), new PointF(v[4], v[5]));
} 
```****

# java - 如何设计可扩展的错误代码？

> ID：16222064
> 
> 赞同：1
> 
> 时间：2013-04-25T18:28:30.950
> 
> 标签：java, python, design-patterns, error-handling, software-design

**更新：这里的错误代码不是函数的返回值。实际上，我不是在讨论使用异常或错误代码进行错误处理。我试图弄清楚，使用什么模式来组织错误。我真正在做的就是在 Windows 蓝屏上显示错误代码。回到过去，当您的 Windows 崩溃时，您会在蓝屏上看到一个错误代码，使用该代码您可以通过查找 MS 的文档来了解发生了什么。在我的系统中，有许多插件由不同的人贡献，他们可能彼此不认识。如果我允许他们定义他们的错误代码。这主要是两个插件的错误代码可能会发生冲突**。

==================================================== ===============================================

我想设计一个可扩展的错误代码系统，允许插件定义自己的错误代码。基本思想是：

1.  系统有一系列保留的错误代码
2.  插件可以选择系统未使用的范围，然后在该范围内创建其错误代码。但是，问题是插件彼此不认识（因为插件可能由不同的人编写并根据用户的喜好安装到系统中）。所以他们的错误代码范围可能会发生冲突。

这个要求有什么好的做法吗？我用谷歌搜索了很多，但令我惊讶的是，很少有文章谈论在生产软件中设计错误代码。大多数帖子都关注异常与错误代码。

而且，有没有什么好的模式可以显示产品中的错误，用户可以弄清楚发生了什么？我的基本想法是向用户显示包含错误代码、描述和详细信息的错误。用户可以点击错误代码然后我会告诉他正确的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:59:53.993

对于您的应用程序抛出的每个异常，您将其插入数据库，您的错误代码是该记录的 id，这就是用户看到的。显然，相同的异常得到相同的 id。您需要的插件信息存储在数据库中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:01:40.953

不知道你正在构建的插件系统是做什么的......

向宿主应用程序提供这些信息不应该是插件的责任吗？为什么不让对插件执行操作的结果包含这些项目呢？这样，您的主机应用程序就不会关心插件特定的实现细节，只关心某些事情是否正常......

```
const int OP_SUCCESS = 0;

// structure returned for plugin ops
struct OperationResponse {
    int code; // any other value than OP_SUCCESS is plugin-defined
    string message; // operation optional message, even if success
    // other fields
}; 
```

所以每次调用插件都会：

```
OperationResponse r = plugin.DoOperation();

if (r.code != OP_SUCCESS) {
    // do something with r.message and other fields
} 
```

# reporting-services - 允许 SSRS 表格单元格溢出到下一个单元格（ala Excel）

> ID：16222069
> 
> 赞同：2
> 
> 时间：2013-04-25T18:28:47.707
> 
> 标签：reporting-services, textbox, ssrs-2008, bids

在 MS-Excel 中，如果单元格中的文本对于该单元格来说太长，并且其右侧的下一个单元格为空，则文本将溢出到该相邻单元格中。

有没有办法在 SSRS/BIDS 中复制这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:45:46.810

不要认为这是可能的。

您可以获得的最接近的是使用[合并单元格](http://msdn.microsoft.com/en-us/library/bb630416%28v=sql.100%29.aspx)功能，或者只是导出到 Excel 并依靠 Microsoft Excel 为您呈现这种方式。

请注意，Excel 中的功能仅在*视觉*上将文本“溢出”到下一个单元格中，实际上并不*在*该单元格中。

# html - 使用下拉提交按钮发布两种表单之一

> ID：16222074
> 
> 赞同：0
> 
> 时间：2013-04-25T18:29:15.943
> 
> 标签：html, forms, dropdownbox, submit-button

我正在尝试发布两组不同的混合值。每个表单将共享一些用户提交的文本，例如姓名和电子邮件。

```
<form method="post" action="url1">
<input type="hidden" name="donate" value="food">
<input type="hidden" name="days" value="30">
<input type="text" name="cans" value="5">
<input type="text" name="full_name" value="">
<input type="text" name="email" value="">
<input type="submit" name="submit" value="join1"/>
</form>

<form method="post" action="url1">
<input type="hidden" name="donate" value="shoes">
<input type="text" name="pairs" value="">
<input type="text" name="style" value="">
<input type="text" name="full_name" value="">
<input type="text" name="email" value="">
<input type="submit" name="submit" value="join2"/>
</form>

<possible dropdown> 
```

最好在两个表单之间进行下拉选择并提交。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:16:49.343

好吧，仅使用 html 您会遇到问题，因为提交按钮只能提交自己的表单。其他形式的表格也是无效的。

但是，使用 javascript 实现目标是一个技巧！

使用一个小功能，您可以例如隐藏除一个之外的所有其他形式：

```
function showform(index){
    var forms = document.forms;
    for(var i=0;i<forms.length;i++)
        forms[i].style.display=(i==index?"block":"none");
} 
```

然后，您只需在下拉列表中添加 onchange-event 并默认隐藏其中一个表单。这将导致这样的事情：

```
<html>
<head>
<style language="css" type="text/css">
    form input{display:block;width:100px;}
</style>
<script language="javascript" type="text/javascript">
function showform(index){
    var forms = document.forms;
    for(var i=0;i<forms.length;i++)
        forms[i].style.display=(i==index?"block":"none");
}
</script>
</head>
<body>

<select onchange='showform(this.selectedIndex);'>
<option>form1</option>
<option>form2</option>
</select>

<form  method="post" action="url1">
<input type="hidden" name="donate" value="food"/>
<input type="hidden" name="days" value="30"/>
<input type="text" name="cans" value="5"/>
<input type="text" name="full_name" value=""/>
<input type="text" name="email" value=""/>
<input type="submit" name="submit" value="join1"/>
</form>

<form id='form2' style='display:none' method="post" action="url2">
<input type="hidden" name="donate" value="shoes"/>
<input type="text" name="pairs" value="2"/>
<input type="text" name="style" value=""/>
<input type="text" name="full_name" value=""/>
<input type="text" name="email" value=""/>
<input type="submit" name="submit" value="join2"/>
 </form>

</body></html> 
```

如果您不喜欢 javascript，则需要在 php 中通过为选择元素使用附加表单并仅插入想要的表单（或隐藏其他表单）来执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-09T11:40:57.020

我已经看到您计划多表单设置的方式存在一些设计问题，有更好的技术来处理这个问题 - 但我会尝试使用您自己的技术来帮助您。

通过使用您自己的示例，这应该适合您：

```
<form id="join1" method="post" action="url1">
<input type="hidden" name="donate" value="food">
<input type="hidden" name="days" value="30">
<input type="text" name="cans" value="5">
<input type="text" name="full_name" value="">
<input type="text" name="email" value="">
</form>

<form id="join2" method="post" action="url1">
<input type="hidden" name="donate" value="shoes">
<input type="text" name="pairs" value="">
<input type="text" name="style" value="">
<input type="text" name="full_name" value="">
<input type="text" name="email" value="">
</form>

<select id="formList">
<option value="">Select form..</option>
<option value="join1">Join1</option>
<option value="join2">Join2</option>
</select>
<button id="submitBtn">Submit</button> 
```

这是实现它的javascript（使用jQuery）：

```
$('#submitBtn').on('click',function(){
    var selectedForm = $('#formList').val();
    if(selectedForm){
        $('#'+ selectedForm).submit();
    }
}); 
```

该示例也可用作 jsfiddle： [https ://jsfiddle.net/k1jf4b4L/](https://jsfiddle.net/k1jf4b4L/)

希望它有点帮助

# browser - 使用默认浏览器搜索网络，使用 applescript 搜索引擎

> ID：16222075
> 
> 赞同：0
> 
> 时间：2013-04-25T18:29:17.607
> 
> 标签：browser, applescript, search-engine, default

我正在尝试制作一个使用默认浏览器和搜索引擎进行互联网搜索的脚本。打开位置适用于使用默认浏览器打开，但我将如何使用默认搜索引擎？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T20:46:16.237

更改 Safari 中的默认搜索引擎会更改以下首选项键：

```
defaults read -g NSPreferredWebServices
defaults read -app safari SearchProviderIdentifier 
```

在未使用的 10.8 VM 上都不存在。NSPreferredWebServices 还会影响 Spotlight 菜单和 Search with Google/Yahoo!/Bing 服务。

你可以使用这样的东西：

```
query=query
id=$(/usr/libexec/PlistBuddy -c 'print NSPreferredWebServices:NSWebServicesProviderWebSearch:NSProviderIdentifier' ~/Library/Preferences/.GlobalPreferences.plist 2> /dev/null)
if [[ $id = com.yahoo.www ]]; then
    url="http://search.yahoo.com/search?p=$query"
elif [[ $id = com.bing.www ]]; then
    url="http://www.bing.com/search?q=$query"
else
    url="https://www.google.com/search?q=$query"
fi
open "$url" 
```

但是，正常的 URL 取决于语言环境。

# python - “NoneType”对象在 Chartit 中不可迭代

> ID：16222076
> 
> 赞同：1
> 
> 时间：2013-04-25T18:29:21.237
> 
> 标签：python, django

所以，我试图用我的数据创建一个数据透视图，但我不断得到“NoneType”对象不可迭代。我正在使用 Chartit。我的错误特别是'terms'：['tot_ft']}]）这特别是在数据透视图部分

这是我的代码：这是我导入的以下内容：

```
from django.shortcuts import render, get_list_or_404, get_object_or_404, redirect
from django.contrib.auth.decorators import login_required
from basketball.models import Stats, Player, League, Game, Team
from django.contrib.auth import get_user
from django.db.models import Sum
from django.http import HttpResponse, HttpResponseRedirect
from django.core.mail import send_mail, BadHeaderError
from chartit import PivotDataPool, PivotChart 
```

视图.py

```
def player_pivot_chart_view(request):
# Step 1: Create a PivotDataPool with the data we want to retrieve 
playerPivotData = PivotDataPool(
        series = 
        [{'options': {
            'source': Stats.objects.all(),
            'categories': 'player__first_name'},
        'terms': {
                'tot_ft':Sum('freeThrowsMade')}}])
pivcht = PivotChart(
            datasource = playerPivotData,
            series_options = [
                {'options': {
                    'type': 'column',
                    'stacking': True},
                'terms': ['tot_ft']}])
return render(request,'basketball/StatsPage.html', {'dataChart':pivcht}) 
```

模型.py

```
class Stats(models.Model):
    player = models.ForeignKey(Player)
    game = models.ForeignKey(Game)
    freeThrowsMade = models.PositiveIntegerField(verbose_name='FTm', default = 0)
    freeThrowsAttempted = models.PositiveIntegerField(verbose_name='FTa', default = 0)
    twoPointsMade = models.PositiveIntegerField(verbose_name='2Pm', default = 0)
    twoPointsAttempted = models.PositiveIntegerField(verbose_name='2Pa', default = 0)
    threePointsMade = models.PositiveIntegerField(verbose_name='3Pm', default = 0)
    threePointsAttempted = models.PositiveIntegerField(verbose_name='3Pa', default = 0)
    blocks = models.PositiveIntegerField(default = 0)
    steals = models.PositiveIntegerField(default = 0)
    assists = models.PositiveIntegerField(default = 0)
    fouls= models.PositiveIntegerField(default = 0) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-16T13:25:51.490

我得到了同样的错误。在 chartit 源代码中进行了一些搜索后，我找到了解决方案。

除了和:之外，您还可以为`PivotChart`构造函数提供一个可选参数。当没有给出chart_options 时，chartit默认分配给它，导致你得到的错误。这实际上是 chartit 中的一个错误。`data_source``series_options``chart_options``None`

要绕过这个，你应该发送一个空字典`chart_options`：

```
pivcht = PivotChart(
            datasource = playerPivotData,
            series_options = [
                {'options': {
                    'type': 'column',
                    'stacking': True},
                'terms': ['tot_ft']}],
            chart_options = {}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-23T21:14:22.200

我遇到了同样的问题，我知道出了什么问题的方法是将数据发送到一个模板。我将图表中的数据放在我的“base.html”上。每次我打开一个不是接收数据的模板时，我都会收到那个错误。确保你没有这样做。

# javascript - 使用 Knockout 绑定到两个对象的复选框

> ID：16222078
> 
> 赞同：1
> 
> 时间：2013-04-25T18:29:24.737
> 
> 标签：javascript, knockout.js, knockout-2.0

我正在创建一个复选框列表。该列表是从此对象创建的：

```
this.definedRoles = ko.observableArray([]); 
```

但是另一个对象有哪些框应该被选中。

```
this.userToAdd = {
        ID: ko.observable(""),
        FirstName: ko.observable(""),
        LastName: ko.observable(""),
        Active: ko.observable(""),
        Email: ko.observable(""),
        Roles: ko.observableArray([])//these are the values of the checkboxes
    }; 
```

我可以使用以下方法生成复选框：

```
<ul data-bind="foreach: $root.definedRoles" style="list-style:none;">
     <li>
         <label class="checkbox">
              <input type="checkbox" data-bind="value: Id" value="" />
              <span data-bind="text: Name"></span>
         </label>
     </li>
</ul> 
```

每次我尝试添加绑定以检查某些框时使用

```
<input type="checkbox" data-bind="value: Id, checked: $root.userToAdd.Roles.Active" value="" /> 
```

它不会产生任何结果。不确定如何应用此绑定。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:45:13.023

您可以做的是添加一个函数来检查给定用户是否具有角色，如下所示：

```
var User = function() {
    var self = this;
    self.ID = ko.observable(""),
    self.FirstName = ko.observable(""),
    self.LastName = ko.observable(""),
    self.Active = ko.observable(""),
    self.Email = ko.observable(""),
    self.Roles = ko.observableArray([])//these are the values of the checkboxes,

    self.IsRoleActive = function(role) {
        for(i=0; i<self.Roles().length; i++) { 
            if(self.Roles()[i] == role && self.Roles()[i].Active) {
                return true;
            }
        }
        return false;
    }
};

var userToAdd = new User(); 
```

然后你的绑定应该是这样的：

```
<input type="checkbox" 
       data-bind="value: Id, checked: $root.userToAdd.IsRoleActive"/> 
```

当然，这一切都只有当`Roles`并且`definedRoles`都是字符串数组时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:38:40.197

由于 Roles 是可观察的，因此您没有正确调用它：

```
$root.userToAdd.Roles().Active 
```

虽然它是一个数组，但`.Active`我认为它不会解决任何问题。

它只是一个详细说明用户角色的字符串数组吗？如果是，那么您需要执行以下操作：

```
$root.userToAdd.Roles.indexOf(Name()) !== -1 
```

查看数组是否包含角色的字符串。

# android - 清单文件所需版本 API 错误

> ID：16222087
> 
> 赞同：-1
> 
> 时间：2013-04-25T18:30:17.703
> 
> 标签：android, backwards-compatibility

在我的应用程序中，我正在使用：

**android 主题 = @android:style/Theme.DeviceDefault.Light.NoActionBar.Fullscreen** 但 Eclipse 显示错误。

**错误是：所需版本（API 14），当前最小值为 7。**

但在另一个应用程序中我使用相同的代码它没有显示任何错误.......为什么？

我的清单：

```
<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="17" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.DeviceDefault.Light.NoActionBar.Fullscreen" > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:32:42.280

更改`android:minSdkVersion="7"`为`android:minSdkVersion="14"`。这是一个代码兼容性检查。您使用的主题需要至少 14 的 android 版本，因此与 14 之前的版本不兼容。

# windows-8 - Microsoft.Web.Infrastructure Version 1.0.0.0 首先安装在全局程序集缓存中

> ID：16222088
> 
> 赞同：1
> 
> 时间：2013-04-25T18:30:18.660
> 
> 标签：windows-8, windows-phone-8, gac

我在 WMWare 虚拟 PC 中安装了 Windows 8 和 Microsoft Visual Studio Express 2012 for Windows Phone。

前段时间我下载了`WindowsPhonePowerTools`（单击一次应用程序）。它运行良好。

VS Express 2012 一直在通知我有一些可用的更新。上周二我安装了更新。VS Express 运行良好，但 WindowsPhonePowerTools 不再运行。

它说：无法安装或运行该应用程序。该应用程序要求首先在全局程序集缓存 (GAc) 中安装程序集 Microsoft.Web.Infrastructure 版本 1.0.0.0。

我在网上搜索以找到一种查看 GAC 的方法。这些指南适用于 Windows 7。[例子](http://msdn.microsoft.com/en-us/library/ex0ss12c.aspx)

如何在 Windows 8 中查看 GAC？
如何在 GAC 中安装 Microsoft.Web.Infrastructure 版本 1.0.0.0？

我刚刚下载了最新版本的 WindowsPhonePowerTools，但问题仍然存在。

谢谢如果有人可以帮助我。

# mysql - MySQL - 返回执行值的函数

> ID：16222090
> 
> 赞同：1
> 
> 时间：2013-04-25T18:30:23.800
> 
> 标签：mysql, sql, execute

我写了这个函数：

```
delimiter //

CREATE FUNCTION randomDefVal(val varchar(30), tableName varchar(30)) 
    returns varchar(30)

    BEGIN

        SET @query = concat('SELECT ',val,' FROM ',tableName,' ORDER BY rand() LIMIT 1;');
        SET @result = NULL;
        PREPARE stmt1 FROM @query;
        return (EXECUTE stmt1);

    END// 
```

但我在最后一行有一个错误：

```
SQL Error (1336): Dynamic SQL is not allowed in stored function or trigger 
```

这表明我不能写 'return (EXECUTE stmt1);' 如何返回值，这将是“执行”语句的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:43:49.073

我认为您想要的是[SELECT ... INTO](http://dev.mysql.com/doc/refman/5.5/en/select-into.html)。所以你会在你的`BEGIN`和里面有这样的东西`END`（注意我没有测试过这段代码）：

```
BEGIN
    DECLARE var_name VARCHAR(30);
    SET var_name = '';
    SELECT val INTO var_name FROM tableName ORDER BY rand() LIMIT 1;
    RETURN var_name;
END 
```

# excel - 在时间表内同时刷新外部数据源和数据透视表

> ID：16222091
> 
> 赞同：11
> 
> 时间：2013-04-25T18:30:27.410
> 
> 标签：excel, pivot-table, vba

在我上一篇文章[Auto refresh pivottables data in excel on first run 中](https://stackoverflow.com/questions/16151084/auto-refresh-pivottables-data-in-excel-on-first-run/16153407?noredirect=1#comment23085456_16153407)，我发现在我**第一次执行**时，来自**外部数据源**的**查询**被刷新，大约需要 1 分钟才能执行。在我的第二次运行中，数据透视表已更新。

 **是否有解决方案（**VBA 代码**）通过单击在时间安排（如果我们设置了计时器）内同时刷新外部数据源和数据透视表`command button`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-25T20:46:12.703

在连接属性下，取消选中“启用后台刷新”。这将使连接在被告知时刷新，而不是在其他进程发生时在后台刷新。

禁用后台刷新后，您的 VBA 过程将等待您的外部数据刷新，然后再移动到下一行代码。

然后你只需修改以下代码：

```
ActiveWorkbook.Connections("CONNECTION_NAME").Refresh
Sheets("SHEET_NAME").PivotTables("PIVOT_TABLE_NAME").PivotCache.Refresh 
```

您还可以在 VBA 中关闭后台刷新：

```
ActiveWorkbook.Connections("CONNECTION_NAME").ODBCConnection.BackgroundQuery = False 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-09-16T20:02:47.940

我使用了上述答案，但使用了 RefreshAll 方法。我还对其进行了更改以允许多个连接而无需指定名称。然后我将它链接到我的电子表格上的一个按钮。

```
Sub Refresh()

    Dim conn As Variant

    For Each conn In ActiveWorkbook.Connections
        conn.ODBCConnection.BackgroundQuery = False
    Next conn

    ActiveWorkbook.RefreshAll
End Sub 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-27T07:07:34.430

我认为有一种更简单的方法可以让 excel 等到刷新完成，而无需将 Background Query 属性设置为 False。为什么要乱弄人们的喜好呢？

Excel 2010（及更高版本）具有称为 CalculateUntilAsyncQueriesDone 的方法，您只需在调用 RefreshAll 方法后调用它。Excel 将等待计算完成。

```
ThisWorkbook.RefreshAll
Application.CalculateUntilAsyncQueriesDone 
```

在将我的模型发送给其他人之前，我通常将这些东西放在一起进行不间断的主计算。像这样的东西：

```
ThisWorkbook.RefreshAll
Application.CalculateUntilAsyncQueriesDone
Application.CalculateFullRebuild
Application.CalculateUntilAsyncQueriesDone 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-28T18:14:24.530

**例如每 5 秒 **自动刷新工作簿。****适用于模块****

 **```
Public Sub Refresh()
'refresh
ActiveWorkbook.RefreshAll

alertTime = Now + TimeValue("00:00:05") 'hh:mm:ss
    Application.OnTime alertTime, "Refresh"

End Sub 
```

**适用于打开的工作簿**

```
Private Sub Workbook_Open()
alertTime = Now + TimeValue("00:00:05") 'hh:mm:ss
Application.OnTime alertTime, "Refresh"
End Sub 
```

:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-03T16:13:40.153

我在网上找到了这个解决方案，它很好地解决了这个问题。我唯一担心的是循环遍历所有枢轴，如果它们很多，查询可能会变得很耗时：

```
Sub RefreshTables()

Application.DisplayAlerts = False
Application.ScreenUpdating = False

Dim objList As ListObject
Dim ws As Worksheet

For Each ws In ActiveWorkbook.Worksheets
    For Each objList In ws.ListObjects
        If objList.SourceType = 3 Then
            With objList.QueryTable
                .BackgroundQuery = False
                .Refresh
            End With
        End If
    Next objList
Next ws

Call UpdateAllPivots

Application.ScreenUpdating = True
Application.DisplayAlerts = True

End Sub

Sub UpdateAllPivots()
Dim pt As PivotTable
Dim ws As Worksheet

For Each ws In ActiveWorkbook.Worksheets
    For Each pt In ws.PivotTables
        pt.RefreshTable
    Next pt
Next ws

End Sub 
```****

# python - Python 准备好的语句是否容易受到 SQL 注入的影响

> ID：16222092
> 
> 赞同：2
> 
> 时间：2013-04-25T18:30:29.640
> 
> 标签：python

我开始编写一个与数据库一起使用的 Python 应用程序。阅读准备好的语句，我发现我应该如何编写它们：

```
...
strSQL = "select * from myTable where aField = $s" % (aValue)
cursor.execute(strSQL)
... 
```

我的问题是：这是否容易受到 SQL 注入的影响？如果是这样，我该如何预防？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T18:32:33.857

您正在使用[字符串格式化运算符](http://docs.python.org/2/library/stdtypes.html#string-formatting)而不是[绑定 SQL 参数](http://www.python.org/dev/peps/pep-0249/#id15)，因此您的代码确实存在 SQL 注入的风险（一旦您修复了`$s`，我认为这是一个错字）。

正确的形式是：

```
strSQL = "select * from myTable where aField = %s"
cursor.execute(strSQL, [aValue]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:32:56.567

你拥有它的方式，绝对！以下是您将如何“帮助”绕过 sql 注入

```
strSQL = "select * from myTable where aField = %s"
cursor.execute(strSQL, [aValue]) 
```

将值作为列表/元组传递给游标执行的第二个参数

# html - 是否可以将信息添加到多个 HTML 文件的头部标签，而无需手动进入每个文件？

> ID：16222093
> 
> 赞同：0
> 
> 时间：2013-04-25T18:30:29.723
> 
> 标签：html, css, stylesheet

基本上，我有一个样式表需要添加到很多 HTML 文件中。手动添加它需要很长时间，甚至不值得。是否有任何脚本或应用程序可以帮助我解决这个问题，或者我可以利用 HTML 中的任何技巧？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:56:26.060

大多数 IDE 都有一个名为“查找和替换”的功能。我使用 Netbeans，但我想几乎每个 IDE 都可以做到这一点，甚至一个像样的文本编辑器可能就足够了。通常你可以在某个地方的“编辑”菜单中找到它。

您可以搜索`</head>`并将其替换为`<link href=.../></head>`或类似的东西。

通常你可以告诉替换函数它应该在哪个文件夹中搜索，甚至是要检查的文件类型。应该很容易并在几秒钟内完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:07:52.923

您可以使用[Sublime Text 2](http://www.sublimetext.com/2)或 TextMate (Mac OS X) 等优秀的文本编辑器轻松完成此操作。以下是如何在 Sublime Text 2 中执行此操作的说明：

1.  打开崇高文本 2
2.  创建一个新窗口（文件»新窗口）
3.  确保侧栏可见（查看»侧栏...）
4.  将 HTML 文件（要添加样式表）拖放到侧边栏
5.  查找 » 在文件中查找...（注意窗口底部的迷你查找替换对话框）
6.  搜索：`</head>`
7.  其中：（清除此字段，以便它查看：打开文件和文件夹）
8.  替换：（`<link href=.../></head>`帽子提示：@PeterVR）
9.  单击**替换**
10.  确认对话框并确保保存所有文件！

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T18:33:35.160

这些 HTML 页面是否共享某些资源？您可以考虑 2 个选项：

1 - 制作一个脚本以自动将这些样式表插入到 HTML 文件头中，或者；

2 - 将样式表一次插入到已由这些文件共享的资源中（需要脚本文件即文件）；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T18:45:58.137

use php `include();` and paste it on top of files. wont take you more than 5sec per page.

# database - ServiceStack ORMLite Fluent 配置

> ID：16222095
> 
> 赞同：4
> 
> 时间：2013-04-25T18:30:48.147
> 
> 标签：database, servicestack, fluent, ormlite-servicestack

我正在寻找使用 ServiceStacks OrmLite 创建一个新项目。我过去使用过 EntityFramework，我更喜欢使用 fluent api 来映射侵入性属性。

OrmLite 是否有等效的 api 或者我是否被迫使用这些属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T02:28:55.563

[不， OrmLite](https://github.com/ServiceStack/ServiceStack.OrmLite/)不支持 Fluent Configuration只是归因于模型优先的 POCO。

这是我们正在考虑做的事情，但暂时无法使用。

# c# - 如何使用 C# 处理输入框的文本框？

> ID：16222096
> 
> 赞同：0
> 
> 时间：2013-04-25T18:30:52.053
> 
> 标签：c#

我正在尝试制作一个表单，我可以在其中从用户那里获取特定值并将其保存在表格中。该表同时对用户可见。我制作的表格使用 datagridview 显示表格。我需要输入的值正在由输入框获取。（我提到[了这个网站](http://msdn.microsoft.com/en-IN/library/microsoft.visualbasic.interaction.inputbox%28v=vs.80%29.aspx)）。

问题是，输入框取的值遵循一定的语法，我需要通知用户，我想在文本框中显示语法，当用户选择文本框输入这个值时预加载的文本被删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:34:24.033

您可以使用 MaskedTextbox 代替经典的 TextBox：

[http://msdn.microsoft.com/de-de/library/system.windows.forms.maskedtextbox.mask(v=vs.110).aspx](http://msdn.microsoft.com/de-de/library/system.windows.forms.maskedtextbox.mask(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:39:45.083

为了补充 Kai 所说的，如果提供的输入未验证，您还可以使用 ErrorProvider 类向用户提供通知。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.errorprovider.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.errorprovider.aspx) [http://www.codeproject.com/Articles/898/How-To-Use-The-ErrorProvider-Object -To-Indicate-In](http://www.codeproject.com/Articles/898/How-To-Use-The-ErrorProvider-Object-To-Indicate-In)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T18:49:31.443

您应该考虑使用[MaskedTextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx)。

一个简单的实现如下所示：

```
MaskedTextBox mskTxtBox = new MaskedTextBox();
mskTxtBox.Mask = /* format your Mask here */; 
```

另一个更具体的例子是：

```
mskTxtBox.Mask = "(123)456-7890"; //For a phone number. 
```

或者：

```
mskTxtBox.Mask = "00/00/0000"; //For a date. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T18:36:28.307

这不是标准的 .Net，它更多的是 Vb.Net，因为此类是 Microsoft.VisualBasic 程序集的一部分。我建议您改用标准 System.Windows.Forms 命名空间中的 MaskedTextBox。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx)

# mysql - MySQL LEFT JOIN 3 个表

> ID：16222097
> 
> 赞同：68
> 
> 时间：2013-04-25T18:30:56.777
> 
> 标签：mysql, sql, join

我有 3 张桌子：

```
人员（PersonID、姓名、SS）
恐惧（FearID，恐惧）
Person_Fear (ID, PersonID, FearID)
```

现在我想列出每个人都有与他们相关的恐惧（可以是多种恐惧，但也可以没有）。即使一个人没有与他们相关的恐惧，也必须显示人员表。

我想我需要做一个 LEFT JOIN，但我的代码似乎不起作用：

```
SELECT persons.name, 
       persons.ss, 
       fears.fear 
FROM   persons 
       LEFT JOIN fears 
              ON person_fear.personid = person_fear.fearid 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-04-25T18:33:35.173

您正在尝试加入`Person_Fear.PersonID`-`Person_Fear.FearID`这没有任何意义。你可能想要这样的东西：

```
SELECT Persons.Name, Persons.SS, Fears.Fear FROM Persons
LEFT JOIN Person_Fear
    INNER JOIN Fears
    ON Person_Fear.FearID = Fears.FearID
ON Person_Fear.PersonID = Persons.PersonID 
```

这通过中间表连接`Persons`到。因为 和 之间的连接是a ，所以您将获得所有记录。`Fears``Person_Fear``Persons``Person_Fear``LEFT JOIN``Persons`

或者：

```
SELECT Persons.Name, Persons.SS, Fears.Fear FROM Persons
LEFT JOIN Person_Fear ON Person_Fear.PersonID = Persons.PersonID
LEFT JOIN Fears ON Person_Fear.FearID = Fears.FearID 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-04-25T18:41:15.410

尝试这个

```
 SELECT p.Name, p.SS, f.Fear 
    FROM Persons p 
    LEFT JOIN Person_Fear fp 
    ON p.PersonID = fp.PersonID
    LEFT JOIN Fear f
    ON f.FearID = fp.FearID 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-08-30T08:32:56.193

试试这个绝对有效。

```
SELECT p.PersonID AS person_id,
   p.Name, p.SS, 
   f.FearID AS fear_id,
   f.Fear 
   FROM person_fear AS pf 
      LEFT JOIN persons AS p ON pf.PersonID = p.PersonID 
      LEFT JOIN fears AS f ON pf.PersonID = f.FearID 
   WHERE f.FearID = pf.FearID AND p.PersonID = pf.PersonID 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2018-06-06T20:12:23.597

```
Select Persons.Name, Persons.SS, Fears.Fear
From Persons
LEFT JOIN Persons_Fear
ON Persons.PersonID = Person_Fear.PersonID
LEFT JOIN Fears
ON Person_Fear.FearID = Fears.FearID; 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-04-25T18:35:51.117

```
Select 
    p.Name,
    p.SS,
    f.fear
From
    Persons p
left join
        Person_Fear pf
    inner join
        Fears f
    on
        pf.fearID = f.fearID
 on
    p.personID = pf.PersonID 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-20T22:04:54.023

```
SELECT p.*, f.Fear
FROM Persons p
LEFT JOIN Person_Fear pf ON pf.PersonID = p.PersonID
LEFT JOIN Fears f ON f.FearID = pf.FearID
ORDER BY p.PersonID 
```

* * *

1.  您需要从`Persons`表中进行选择，以确保为每个人生成一行，无论他们是否有恐惧。
2.  然后你可以让`Person_Fear`每个人都加入，`NULL`如果他们没有任何条目（如你所愿）。
3.  最后，您离开加入`Fears`，`Person_Fear`以便您可以选择恐惧的名称。
4.  或者，添加一个订单，以便每个人都将他们所有的恐惧列在一起，即使他们是`Person_Fear`在不同的时间被添加到表格中的。

# javascript - 你如何使用 Resharper 调试 Jasmine 测试？

> ID：16222098
> 
> 赞同：31
> 
> 时间：2013-04-25T18:30:57.750
> 
> 标签：javascript, unit-testing, resharper, jasmine

在 Visual Studio 2012 中使用 Resharper 运行 Jasmine 测试时，我找不到调试（遍历）JavaScript 代码的方法。我尝试使用浏览器（Chrome）运行测试，但测试运行器会在测试运行后立即关闭端口并且所以我不能在代码中设置断点。还尝试在 Internet Explorer 中运行并在 Visual Studio 中放置断点，但它不会附加到进程。我的测试有很多 ///reference 脚本，Resharper 自动包含在测试运行器中，但我不想为我要调试的每个测试手动执行此操作。请帮助我理解这一点。如果你有一个失败的茉莉花测试，那么你如何调试它？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-06-13T12:53:49.387

由于我没有`debugger;`工作，我找到了另一个解决方案。通过将以下内容添加到我的测试中，resharper 将不会收到测试已完成的通知，因此我们可以在打开的浏览器（我使用 chrome）中设置调试断点并更新（F5）页面。

```
jasmine.getEnv().currentRunner_.finishCallback = function () {}; 
```

从 Jasmine 2.0 开始，您需要使用：

```
ReSharperReporter.prototype.jasmineDone = function () { }; 
```

完成后在 resharper testrunner 窗口中停止测试。

这也可以为 QUnit 完成

```
QUnit.moduleDone = function(){} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-05-03T05:54:58.790

尝试使用`debugger`关键字。只需将以下行添加到您要调试的代码中（可能添加到规范中）：

```
debugger; 
```

它调用任何可用的调试功能。它在 IE 中不起作用，但在 Chrome 中运行良好（你写了你使用它，所以我想它仅用于调试就足够了）。

当然，在那之后一定要删除`debugger`关键字！也许没有真正简单的方法可以在一般的生产代码中避免它（如果您不仅会在 spesc 中使用它）但是如果您对这个 SO[问题](https://stackoverflow.com/questions/5418060/how-to-check-if-debugger-keyword-exists)感兴趣可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-16T17:53:34.867

正如我在[使用 resharper 和 phantom js 调试 jasmine 测试上发布的那样](https://stackoverflow.com/questions/18585883/debugging-jasmine-tests-with-resharper-and-phantom-js/35439675#35439675)

我有调试器；通过在 ReSharper 选项中将 IE 11 设置为我的测试浏览器来工作。很酷的是，您可以在 Visual Studio 版本的代码中设置断点，并使用 Visual Studio 进行设置和调试。你真的不需要与浏览器交互。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-03T16:25:32.977

我知道这是一个老问题，这个答案有点偏离主题，但如果你不想干扰回调 Chutzpah 测试运行器上下文菜单可以在这里为你提供支持。在 resharper/phantomjs 中运行测试（这样您就不会出现标签爆炸）并在 Chrome（或您首选的浏览器）中进行调试，然后单击鼠标右键：

[Chutzpah 测试运行程序上下文菜单扩展](https://marketplace.visualstudio.com/items?itemName=vs-publisher-2795.ChutzpahTestRunnerContextMenuExtension)

# java - 如何从 sqlite 数据库将图像设置为复选框？

> ID：16222099
> 
> 赞同：0
> 
> 时间：2013-04-25T18:30:57.727
> 
> 标签：java, android, sqlite

有没有办法从预填充的 sqlite 数据库中将图像设置为复选框？或者以某种方式将复选框连接到数据库中的图像。问题是我必须从数据库中随机播放图像，并且用户需要使用复选框（或其他方式，但我想出的只是复选框的想法）从 5 个图像中选择两个。如果我不必随机播放图像，我只需在每个图像下方放置一个复选框，当我选中一个框时我就会知道选择了哪个图像，但这样我就不会知道我的图像在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:45:50.070

看到这个：http: [//vikaskanani.wordpress.com/2011/07/20/android-custom-image-gallery-with-checkbox-in-grid-to-select-multiple](http://vikaskanani.wordpress.com/2011/07/20/android-custom-image-gallery-with-checkbox-in-grid-to-select-multiple)

以及[如何将图像保存到数据库](https://stackoverflow.com/questions/7512019/how-to-save-images-into-database)以从流中获取图像位图。

you can use a adapter to set bitmat into each image in gallery.

I hope this could help you.

# java - 如何为此包启用 log4j

> ID：16222104
> 
> 赞同：0
> 
> 时间：2013-04-25T18:31:11.047
> 
> 标签：java, log4j, portal-java

我正在尝试设置 log4j`DEBUG`级别`com.github.flowersinthesand`

我的 log4j.properties：

```
log4j.rootLogger=INFO, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %t %c:%L - %m%n

log4j.logger.com.github.flowersinthesand=DEBUG,stdout 
```

根据[如何在 log4j 中启用包级别日志记录，](https://stackoverflow.com/questions/10648681/how-to-enable-package-level-logging-in-log4j)除非我的包名称不正确，否则我正在正确执行此操作。我从 maven 获得了包名，假设它会涵盖所有库。

```
 <dependency>
        <groupId>com.github.flowersinthesand</groupId>
        <artifactId>portal-core</artifactId>
        <version>0.6</version>
    </dependency>
    <dependency>
        <groupId>com.github.flowersinthesand</groupId>
        <artifactId>portal-spring</artifactId>
        <version>0.6</version>
    </dependency> 
```

为什么这个包根本没有被记录？

**更新**

作为对 Lucas 确认我的 log4j 配置正确的回应。

主.java

```
package com.production;

public class Main {

    protected static final Logger logger = Logger.getLogger(Main.class.getName());

    public static void main(String[] args) throws IOException {
        logger.info("Starting server...");
        final HttpServer server = HttpServer.createSimpleServer(".", 80);

        WebappContext ctx = new WebappContext("Socket", "/");

        //enable annotation configuration
        ctx.addContextInitParameter("contextClass", "org.springframework.web.context.support.AnnotationConfigWebApplicationContext");
        ctx.addContextInitParameter("contextConfigLocation", "com");

        //allow spring to do all of it's stuff
        ctx.addListener("org.springframework.web.context.ContextLoaderListener");

        //enable web socket support
        final WebSocketAddOn addon = new WebSocketAddOn();
        for (NetworkListener listener : server.getListeners()) {
            listener.registerAddOn(addon);

            //if false, local files (html, etc.) can be modified without restarting the server
            listener.getFileCache().setEnabled(false);
        }

        //add jersey servlet support
        ServletRegistration jerseyServletRegistration = ctx.addServlet("JerseyServlet", new SpringServlet());
        jerseyServletRegistration.setInitParameter("com.sun.jersey.config.property.packages", "com.resource");
        jerseyServletRegistration.setInitParameter("com.sun.jersey.spi.container.ContainerResponseFilters", "com.resource.ResponseCorsFilter");
        jerseyServletRegistration.setInitParameter("com.sun.jersey.api.json.POJOMappingFeature", "true");
        jerseyServletRegistration.setLoadOnStartup(1);
        jerseyServletRegistration.addMapping("/api/*");

        //deploy
        logger.info("Deploying server...");
        ctx.deploy(server);

        server.start();

        //start the production process
        Production.init();

        System.in.read();
        server.stop();
    }
} 
```

配置文件

```
package com;

    @Configuration
    @ComponentScan(basePackages = {
            "com"
    })
    @PropertySource(value= {
            "classpath:/application.properties",
            "classpath:/environment-${MY_ENVIRONMENT}.properties"
    })
    @EnableJpaRepositories("com.repository")
    @EnableTransactionManagement
    public class Config {
        @Value("${db.url}")
        String PROPERTY_DATABASE_URL;
        @Value("${db.user}")
        String PROPERTY_DATABASE_USER;
        @Value("${db.password}")
        String PROPERTY_DATABASE_PASSWORD;

        @Value("${persistenceUnit.default}")
        String PROPERTY_DEFAULT_PERSISTENCE_UNIT;

        @Value("${hibernate.dialect}")
        String PROPERTY_HIBERNATE_DIALECT;
        @Value("${hibernate.format_sql}")
        String PROPERTY_HIBERNATE_FORMAT_SQL;
        @Value("${hibernate.show_sql}")
        String PROPERTY_HIBERNATE_SHOW_SQL;
        @Value("${entitymanager.packages.to.scan}")
        String PROPERTY_ENTITYMANAGER_PACKAGES_TO_SCAN;

        @Autowired
        private BeanFactory beanFactory;

        @Bean
        public DataSource dataSource() {
            MysqlDataSource dataSource = new MysqlDataSource();

            dataSource.setUrl(PROPERTY_DATABASE_URL);
            dataSource.setUser(PROPERTY_DATABASE_USER);
            dataSource.setPassword(PROPERTY_DATABASE_PASSWORD);

            return dataSource;
        }

        @Bean
        public JpaTransactionManager transactionManager() throws ClassNotFoundException {
            JpaTransactionManager transactionManager = new JpaTransactionManager();

            transactionManager.setEntityManagerFactory(entityManagerFactory().getObject());

            return transactionManager;
        }

        @Bean
        public LocalContainerEntityManagerFactoryBean entityManagerFactory() throws ClassNotFoundException {
            LocalContainerEntityManagerFactoryBean entityManagerFactoryBean = new LocalContainerEntityManagerFactoryBean();

            entityManagerFactoryBean.setDataSource(dataSource());
            entityManagerFactoryBean.setPersistenceUnitName(PROPERTY_DEFAULT_PERSISTENCE_UNIT);
            entityManagerFactoryBean.setPackagesToScan(PROPERTY_ENTITYMANAGER_PACKAGES_TO_SCAN);
            entityManagerFactoryBean.setPersistenceProviderClass(HibernatePersistence.class);

            Properties jpaProperties = new Properties();
            jpaProperties.put("hibernate.dialect", PROPERTY_HIBERNATE_DIALECT);
            jpaProperties.put("hibernate.format_sql", PROPERTY_HIBERNATE_FORMAT_SQL);
            jpaProperties.put("hibernate.show_sql", PROPERTY_HIBERNATE_SHOW_SQL);

            entityManagerFactoryBean.setJpaProperties(jpaProperties);

            return entityManagerFactoryBean;
        }

        @Bean
        public ApplicationContextProvider applicationContextProvider() {
            return new ApplicationContextProvider();
        }

        /**
         * This bean is required for @Value injection from .properties files
         */
        @Bean
        public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer () {
            return new PropertySourcesPlaceholderConfigurer();
        }

        @Bean
        public App app() {
            return new App(new Options().url("/socket/workstation/approval").packageOf(ApprovalSocketHandler.class), new SpringModule(beanFactory));
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T11:36:12.537

看起来这是我的项目中包含的日志记录包的问题。[为什么只为休眠记录日志中](https://stackoverflow.com/questions/16223764/why-does-this-only-log-for-hibernate/16224823)概述的解决方案？解决了这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T19:11:03.477

而不是`log4j.logger`我需要`log4j.category`

```
log4j.rootLogger=INFO, stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %t %c:%L - %m%n

log4j.category.com.github.flowersinthesand=TRACE
log4j.category.org.atmosphere=TRACE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:12:36.923

Grizzly 使用 JUL 日志记录：[无法让 grizzly 日志记录工作，没有写入我的 log4j 日志文件](https://stackoverflow.com/q/12370984/516433)。您需要初始化自己的 log4j 实例以写入标准输出，以便将 log4j 添加到 Grizzly 日志中。我用：

```
 <bean id="log4jConfigurer"
    class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">
    <property name="targetClass" value="org.springframework.util.Log4jConfigurer" />
    <property name="targetMethod" value="initLogging" />
    <property name="arguments">
      <list>
        <value>classpath:log4j.properties</value>
      </list>
    </property>
  </bean> 
```

但是由于您使用的是 spring 的代码配置而不是 xml 配置，您可能需要查看[Log4jConfigurer的详细信息](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/util/Log4jConfigurer.html)

# sharepoint-2010 - Sharepoint 顶部链接栏可见 true/false

> ID：16222105
> 
> 赞同：0
> 
> 时间：2013-04-25T18:31:15.260
> 
> 标签：sharepoint-2010

全部，

我在 sharepoint 中有一个默认的顶部链接栏，我们会继续添加/修改。

我们有这样的要求，即很少的链接，我们希望根据用户权限使可见的真/假。

是否可以通过共享点设置？或者我们需要通过代码来处理它？

我们使用的是 SP2010。

有什么建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:47:58.407

首先确保启用您网站的发布功能。[您可以按照此处](http://office.microsoft.com/en-001/sharepoint-server-help/enable-publishing-features-HA010157772.aspx)的步骤执行此操作。

完成后，您可以对顶部链接栏使用安全修剪和受众定位。可以在[此处](http://sharepointyankee.com/tag/top-link-bar/)找到有关如何执行此操作的步骤。但请注意，一旦您的 SharePoint 网站增长，这可能会导致性能问题。上面的链接站点中还有其他关于如何解决这些问题的建议。

# visual-studio-2012 - 从 VS 2012 发布 ClickOnce 应用程序后下载先决条件时出错

> ID：16222109
> 
> 赞同：7
> 
> 时间：2013-04-25T18:31:25.337
> 
> 标签：visual-studio-2012, clickonce, prerequisites

我从 Visual Studio 2012 发布了 ClickOnce 应用程序，并选择了 .NET 4.0 运行时和 Microsoft Report Viewer 2012 作为先决条件。我还选择从供应商的网站下载先决条件。

当我尝试在客户端 PC 上安装应用程序时，我收到以下错误：

> 安装程序检测到文件“C:\Users\MyUsername\AppData\Local\Temp\VSD537C.tmp\DotNetFX40\dotNetFx40_Full_setup.exe”自最初发布以来已更改。

该日志未提供其他详细信息。

如果我手动安装 .NET 运行时，当我再次运行 Setup.exe 时，我会收到报告查看器的相同错误。

是什么导致了这个错误，我该如何防止它发生？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-29T12:46:11.657

The files that were downloaded from Microsoft had a different public key than what was specified in the bootstrapper configuration files (Product.xml). At least some of them had been published after VS 2012 was released and must have been signed with a different key. I had to extract the public key from the digital signature certificate and use it to replace the public key specified in the product.xml file. After this, it worked fine.

To extract the public key:

*   Right click on the installer executable and click `Properties`.
*   Click the `Digital Signatures` tab.
*   Select the signature from the list and click the `Details` button.
*   On the `General` tab, click the `View Certificate` button.
*   In the `Certificate` window, click the `Details` tab and locate the field called `Public Key`.
*   Highlight and copy the data. You will need to run a find/replace to remove the blank spaces.
*   Paste this key into the public key attribute in the `Product.xml` file for this installer package.

# javascript - Javascript返回奇怪的值

> ID：16222112
> 
> 赞同：0
> 
> 时间：2013-04-25T18:31:38.040
> 
> 标签：javascript

我发现自己需要用非常小的小数做一些工作，以特定的方式格式化，而 javascript 正在对他们做一些我不理解的奇怪事情。

每个数字输入格式如下的函数：`0.0000000000`. 那是十位小数。大多数情况下，这将意味着尾随零，如下所示：`0.0011000000`.

现在，我认为这并不重要，因为在对它们进行任何其他工作之前，我通过将它们乘以 10000000000 的简单权宜之计将它们转换为整数。

但是当我这样做时，有时我会得到如下所示的结果：

```
var bigNum = 0.0000050000 * 10000000000; //Returns a value of 50000.00000000001 
```

这到底是怎么回事？最后那额外的 1 是从哪里来的？

# node.js - 错误：在节点中使用 GM 时产生 ENOENT

> ID：16222116
> 
> 赞同：34
> 
> 时间：2013-04-25T18:31:48.157
> 
> 标签：node.js, graphicsmagick

当我尝试像这样调整图像大小时：

```
 gm('public/uploads/1710410635.jpg')
                .resize(240, 240)
                .noProfile()
                .write('public/uploads/1710410635_t.jpg', function (err) {
                  if (!err) console.log('done');
                }); 
```

我收到此错误：

```
events.js:72
        throw er; // Unhandled 'error' event
              ^
Error: spawn ENOENT
    at errnoException (child_process.js:945:11)
    at Process.ChildProcess._handle.onexit (child_process.js:736:34) 
```

我的文件结构如下：

![在此处输入图像描述](https://i.stack.imgur.com/pos7a.png)

代码在`postnewsitem.js`文件中执行

为什么会发生此错误以及如何解决？

编辑：GraphicsMagick 作品，证明：

![在此处输入图像描述](https://i.stack.imgur.com/w9M7R.png)

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-10-08T15:44:41.060

安装 ImageMagick 并使用子类 imageMagick。

1.  安装 ImageMagick

    ```
    sudo apt-get install imagemagick 
    ```

2.  使用子类 imagemagick：

    ```
    var gm = require('gm').subClass({ imageMagick: true }); 
    ```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-08-27T10:30:59.537

我在安装了 gm 和 imagemagick 的 Windows 7 上运行 nodejs，似乎两个模块之间存在冲突，所以我用谷歌搜索了一下，发现了如何避免这种情况。我添加了这一行，解决了我的 ENOENT 问题： `var imageMagick = gm.subClass({ imageMagick: true });` 所以代码现在看起来像这样：

```
var gm = require('gm'); 
var imageMagick = gm.subClass({ imageMagick: true });

imageMagick('test/pig.jpg').rotate('green', 45).write('test/crazy_pig.jpg', function (err) {
    if (!err) console.log('crazy pig has arrived');
    else console.log(err);
}) 
```

或者您可以在需要 gm 时这样做，如下所示：

```
var gm = require('gm').subClass({ imageMagick: true }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-21T17:52:53.283

使用 IIS 在 Windows 上运行的 Node.js 应用程序有同样的问题。当我将相应 AppPool 的“**高级设置”中的“****加载用户配置文件**”选项设置为“ **True** ”时，问题已经消失

 ***** * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-10T10:54:58.860

我遇到了同样的问题并以给定的方式解决了它。

```
var gm = require('gm'); 

gm('public/uploads/1710410635.jpg').options({imageMagick: true}).resize(240,240).write('public/uploads/1710410635.jpg', function (err) {
if (!err) console.log('Done');
else console.log(err);
}) 
```

**注意：**如果你还没有安装 imageMagick。请先安装那个

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-28T08:23:27.630

可能发生这种情况的另一种情况（使用 Windows 时）是如果您尝试从 UNC 路径运行代码。映射驱动器号并在映射的驱动器号上运行也可以解决此问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-06T21:01:07.590

我和你有同样的问题，这是解决方案。ImageMagick 在终端/控制台中正常工作，但在 nodejs（gm 模块）中没有。在失去头发 2 天后，我通过将 PATH 变量添加到环境变量 process.env.PATH 来修复它。应该有指向您的 imagemagick 和其他可执行文件的路径。Node.js 有一些来自系统的 PATH 但出于某种原因 GM 忽略它并使用 process.env.PATH

我创建了环境变量 PATH(process.env.PATH) 并将值设置为 bin:node_modules/.bin:/usr/local/bin:/usr/bin:/bin 我正在使用 MAC OS X

我用 brew ( `brew install imagemagick`)安装了 imageMagick

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-23T11:51:23.477

因为我在stackoverflow上多次发现这个问题，所以我想分享这个答案：[https ://stackoverflow.com/a/25461564/3970623](https://stackoverflow.com/a/25461564/3970623)

“spawn ENOENT”似乎是由有效的 unix 工具安装引起的，可以使用 PATH 环境变量访问。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-11T22:29:21.357

以防万一有人在 macOS 上发现此错误，这对我有用：

```
$ brew install graphicsmagick 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-15T15:29:22.477

就我而言，这非常简单。它是在 Windows 10 中安装 GraphicsMagick 后发生的：我尝试使用在安装 GraphicsMagick 之前尚未打开的控制台。因此它使用了旧的路径信息并且没有找到 GraphicsMagick。解决方案：我必须打开一个新控制台来运行节点以使用 gm。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-07-09T11:36:27.293

/gm/lib/command.js 有一个选项，您可以在其中设置 appPath，如果 gm 已经通过终端运行，您可以获取 gm 的路径并通过 subClass 函数传递它，在我的情况下，gm 安装在 / usr/local/bin/ 在 MacOsx 上使用 brew。

```
var gm = require('gm').subClass({ appPath: "/usr/local/bin/" }); 
```****

# python - 列表的逆 python [(160,177),(198,123)]

> ID：16222118
> 
> 赞同：2
> 
> 时间：2013-04-25T18:32:00.567
> 
> 标签：python, list

我有一个清单：

`[(160, 177), (162, 169), (163, 169), (166, 173), (166, 176), (166, 177), (169, 176), (169, 177)]`

我想要这个列表的倒数，所以它变成：

`[(177, 160), (169, 162), (169, 163), (173, 166), (176, 166), (177, 166), (176, 169), (177, 169)]`

我认为你可以做类似`list1[:-1]`或类似的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T18:32:45.210

在我看来，明确地反转这些对更干净：

```
[(snd, fst) for fst, snd in thelist] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T18:33:31.387

```
a=[(160, 177), (162, 169), (163, 169), (166, 173), (166, 176), (166, 177), (169, 176), (169, 177)]
b=[e[::-1] for e in a]
print b 
```

此 Bunk 中的可运行代码 - [http://codebunk.com/bunk#-It1THfMsVDWUQMq8eRT](http://codebunk.com/bunk#-It1THfMsVDWUQMq8eRT)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T18:37:09.793

您也可以使用`map`并且在这种情况下`reversed`更喜欢[基于列表理解的解决方案](https://stackoverflow.com/a/16222146/846892)来执行此操作，因为与版本 中的 2 相比，它只需要一个循环`map`。

```
In [24]: lis=[(160, 177), (162, 169), (163, 169), (166, 173), (166, 176), (166, 177), (169, 176), (169, 177)]

In [26]: map(tuple,map(reversed,lis))  #use itertools.imap for large lists
Out[26]: 
[(177, 160),
 (169, 162),
 (169, 163),
 (173, 166),
 (176, 166),
 (177, 166),
 (176, 169),
 (177, 169)] 
```

# mysql - 在 SELECT 上创建一个虚拟列并在 MYSQL 中填充它

> ID：16222119
> 
> 赞同：0
> 
> 时间：2013-04-25T18:32:01.350
> 
> 标签：mysql, database

我有一个动物收容所的数据库。我想创建一个视图来显示从赞助、捐赠表等中的记录创建的收入/结果。

所以我需要选择所有捐赠行并将它们包含在我的视图中。我还想创建一个虚拟行并用“捐赠”填充它，以显示所有这些行都是捐赠，赞助等也是如此。

有没有办法在 MySQL 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:35:52.817

```
SELECT name, 'value_to_populate' AS 'virtual_column'
FROM table 
```

# java - 在 2 个不同的 JtabbedPanes 中创建相同的 jtable

> ID：16222120
> 
> 赞同：1
> 
> 时间：2013-04-25T18:32:12.693
> 
> 标签：java, swing, jtable, jtabbedpane, defaulttablemodel

我想创建 2 个 JTabbedPanes，它们将在其中一列中具有相同的 JTable 但不同的值。现在由于某种原因只显示了一个选项卡，我不知道为什么。我也是通过创建 2 个不同`DefaultTableModel`的 's 来做到这一点的最佳方式吗？

```
public static void tableMaker(DefaultTableModel m, DefaultTableModel m1, final Map<String, NumberHolder> uaCount)
{
    final JFrame frame = new JFrame("Strings");     
    JPanel panel1 = new JPanel();
            JPanel panel2 = new JPanel();
    JTabbedPane tabbedPane = new JTabbedPane();

    m.addColumn("String");
    m.addColumn("Occurrences");
            m1.addColumn("String");
    m1.addColumn("Occurrences");
    JTable table = new JTable(m);
            JTable table = new JTable(m1);
    table.setAutoCreateRowSorter(true);
    JScrollPane scrollPane1 = new JScrollPane(table1);
            JScrollPane scrollPane2 = new JScrollPane(table2);
    frame.getContentPane().setLayout(new BorderLayout());                                                       
    panel1.add(scrollPane1);
            panel2.add(scrollPane2);
    frame.getContentPane().add(panel1, BorderLayout.CENTER);
            frame.getContentPane().add(panel2, BorderLayout.CENTER);        
    frame.add(tabbedPane, BorderLayout.NORTH);
    tabbedPane.setTabLayoutPolicy(JTabbedPane.SCROLL_TAB_LAYOUT);
    tabbedPane.addTab("Tab 1", null, panel1,
                "String length 2");
    tabbedPane.addTab("Tab 1", null, panel2,
                "String length 2"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T18:41:47.013

> 我想创建 2 个 JTabbedPanes，它们将在其中一列中具有相同的 JTable 但不同的值。现在由于某种原因只显示了一个选项卡，我不知道为什么。我也是通过创建 2 个不同的 DefaultTableModel 来做到这一点的最佳方式吗？

*   只创建一个 DefaultTableModel，

*   然后所有更改都会同步，

*   每个 JTable 可以有不同的 ColumnModel、Renderer 等

[尽可能简单的（SSCCE）代码](http://sscce.org/)

![在此处输入图像描述](https://i.stack.imgur.com/qrgOV.jpg)![在此处输入图像描述](https://i.stack.imgur.com/W28ua.jpg)

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTabbedPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;

public class MyTabbedPane {

    private JTabbedPane tabbedPane = new JTabbedPane();
    private JFrame f = new JFrame();
    private String[] columnNames = {"First Name", "Last Name", "Sport",
        "# of Years", "Vegetarian"};
    private Object[][] data = {
        {"Kathy", "Smith", "Snowboarding", new Integer(5), (false)},
        {"John", "Doe", "Rowing", new Integer(3), (true)},
        {"Sue", "Black", "Knitting", new Integer(2), (false)},
        {"Jane", "White", "Speed reading", new Integer(20), (true)},
        {"Joe", "Brown", "Pool", new Integer(10), (false)}
    };
    private DefaultTableModel model = new DefaultTableModel(data, columnNames) {
        private static final long serialVersionUID = 1L;

        @Override
        public Class getColumnClass(int column) {
            return getValueAt(0, column).getClass();
        }
    };

    public MyTabbedPane() {
        tabbedPane.addTab("Tab1", new JScrollPane(new JTable(model)));
        tabbedPane.addTab("Tab2", new JScrollPane(new JTable(model)));
        tabbedPane.addTab("Tab3", new JScrollPane(new JTable(model)));
        tabbedPane.addTab("Tab4", new JScrollPane(new JTable(model)));
        tabbedPane.setTabPlacement(JTabbedPane.TOP);
        tabbedPane.setTabLayoutPolicy(JTabbedPane.SCROLL_TAB_LAYOUT);
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(tabbedPane, BorderLayout.CENTER);
        f.pack();
        f.setVisible(true);
    }

    public static void main(String args[]) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                MyTabbedPane frame = new MyTabbedPane();    
            }
        });
    }
} 
```

# c# - 我可以从 Android 应用程序调用 Silverlight 服务吗？

> ID：16222121
> 
> 赞同：1
> 
> 时间：2013-04-25T18:32:19.527
> 
> 标签：c#, android, xamarin-studio

我有一个 Silverlight 业务应用程序和一个在其中开发的 WCF 服务。我曾经从 Visual Studio 2010 下的 Windows Phone 应用程序调用它。有没有办法可以从 Visual Studio 2010 下开发的 Android 应用程序或 Xamarin Studio 调用此服务？如果是，我可以提供样本或参考资料或关于如何完成的想法吗？谢谢

# java - Java - 从项目中的类，检查文件是否存在于不同的项目中

> ID：16222123
> 
> 赞同：1
> 
> 时间：2013-04-25T18:32:27.383
> 
> 标签：java, file, project, exists

我在一个项目 cd.ef.gh/country/terms/license/CreateLicense.java

从类 CreateLicense.java，我想检查一个文件是否存在于不同的项目中。但是下面的代码总是返回下降

```
File newfile = new File(uv.wx.yz/legal/expiry/notice/readme.txt) 
if(newfile.exists()) // this always returns false , even though the readme.txt file is exactly at that location. 
```

我显然在这里遗漏了一件简单的事情或忽略了一些明显的事情

请帮忙

谢谢

# core-data - nsmanagedobject 核心数据多对多关系故障

> ID：16222125
> 
> 赞同：0
> 
> 时间：2013-04-25T18:32:32.827
> 
> 标签：core-data, entity, nsmanagedobject

在我的 CoreData 应用程序中，所有反向多对多关系都有关系错误。- 观察使用`NSLog(@"%@", [self description])`. 数据保存后打开后出现故障。

关系删除规则可能是罪魁祸首。

这是一个例子。

```
Person
friends<<--->>  (An inverse many-to-many relationship on self.
addresses<<--|  (A many-many relationship to Address
             |
Address      |
owners<<-----| (A many-many relationship to person.address Addresses can be shared 
```

`Address.owners`关系设置为拒绝。关系被`Person.addresses`设置为无效。`Person.friends`关系设置为拒绝。

我很感激一些澄清：

给定一个更简单的情况，即不共享地址。

```
AddressBoook    Person         Address
    people-------->addresses---->>owner 
```

`Person.address`设置为无效。（仅在删除所有者时删除地址）Address.owner 设置为 .... 无操作。（不想删除这个人。或者无效？因为 Person 仍然由 AddressBook 对象持有

*   我们要删除什么，关系或拥有对象。
*   在多对多关系中，我们是否可以考虑，在移除最后一个对象或第一个对象时发生无效化，从而将其他对象悬空在空间中。一定是删除了Set!。

谢谢

# ember.js - Ember.js 中的兄弟属性绑定

> ID：16222131
> 
> 赞同：1
> 
> 时间：2013-04-25T18:32:48.347
> 
> 标签：ember.js

我是一个相对的 Ember 新手，所以我可能在这里遗漏了一些明显的东西。我正在尝试为 Bootstrap 手风琴构建自定义视图。我为此使用了相对视图，虽然它正在工作，但我想了解我是否可以简化一点。具体来说，我想知道是否可以使嵌入的`href`计算属性`toggleView`依赖于`elementId`嵌入`bodyView.`的这是顶层视图，它是一个集合：

```
App.AccordionView = Em.CollectionView.extend({
  headingTemplateName: 'accordion-heading',
  innerTemplateName: 'accordion-inner',
  tagName: 'div',
  classNames: ['accordion'],
  contentBinding: 'controller.content', 
```

项目视图对应于具有`accordion-group`css 类的 DOM 元素。

```
 itemViewClass: Em.View.extend({
    tagName: 'div',
    classNames: ['accordion-group'],
    target: null,
    template: Em.Handlebars.compile("{{view view.headingView contentBinding='view.content'}}{{view view.bodyView viewName='bodyViewInstance' contentBinding='view.content'}}"),

    headingView: Em.View.extend({
      tagName: 'div',
      template: Em.Handlebars.compile("{{view view.toggleView contentBinding='view.content'}}"),
      classNames: ['accordion-heading'],
      toggleView: Em.View.extend({
        tagName: 'div', // Can be an 'a'
        templateNameBinding: 'parentView.parentView.parentView.headingTemplateName',
        classNames: ['accordion-toggle'],
        attributeBindings: ['dataToggle:data-toggle', 'dataParent:data-parent', 'href'],
        dataToggle: 'collapse',
        dataParent: function() {
          return this.get('parentView.parentView.parentView.elementId');
        }.property(), 
```

请注意，我已使`href`属性依赖于`target`项目视图中的字段。

```
 href: function() {
          return "#" + this.get('parentView.parentView.target');
        }.property('parentView.parentView.target')
      })
    }),
    bodyView: Em.View.extend({
      tagName: 'div',
      template: Em.Handlebars.compile("{{view view.innerView contentBinding='view.content'}}"),
      classNames: ['accordion-body', 'collapse'], 
```

该字段在`bodyView`嵌入视图实例插入 DOM 时设置。

```
 didInsertElement: function() {
        this.get('parentView').set('target', this.get('elementId'));
      },
      innerView: Em.View.extend({
        tagName: 'div',
        classNames: ['accordion-inner'],
        templateNameBinding: "parentView.parentView.parentView.innerTemplateName"
      })
    })
  })
}); 
```

这一切都有效。但是，我想在下面做这样的事情`toggleView`：

```
href: function() {
  return "#" + this.get('parentView.parentView.bodyViewInstance.elementId');
}.property('parentView.parentView.bodyViewInstance.elementId') 
```

当我这样做时，我收到以下错误，我不确定我是否理解原因：

```
Error: Something you did caused a view to re-render after it rendered but before it was inserted into the DOM. 
```

有什么办法可以完成我想做的事情吗？

# c# - 关于异步任务，为什么需要 Wait() 来捕获 OperationCanceledException？

> ID：16222132
> 
> 赞同：3
> 
> 时间：2013-04-25T18:32:49.570
> 
> 标签：c#, asynchronous, .net-4.0, exception-handling, task-parallel-library

我正在按照[此处](http://msdn.microsoft.com/en-us/library/dd997396.aspx)的示例代码来了解异步任务。我修改了代码以编写任务工作与主要工作的一些输出。输出将如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/Zhibf.png)

我注意到，如果我删除 Wait() 调用，程序运行相同，除了我无法捕获任务取消时引发的异常。有人可以解释需要 Wait() 才能击中 catch 块的幕后发生的事情吗？

一个警告是，Visual Studio 调试器将错误地停止在`Console.WriteLine(" - task work");`消息“OperationCanceledException 未被用户代码处理”的行上。发生这种情况时，只需单击继续或按 F5 即可查看程序的其余部分运行。有关详细信息，请参阅[http://blogs.msdn.com/b/pfxteam/archive/2010/01/11/9946736.aspx](http://blogs.msdn.com/b/pfxteam/archive/2010/01/11/9946736.aspx)。

```
using System;
using System.Threading;
using System.Threading.Tasks;

namespace ConsoleApplication1
class Program
{
  static void Main()
  {
     var tokenSource = new CancellationTokenSource();
     var cancellationToken = tokenSource.Token;

    // Delegate representing work that the task will do.
     var workDelegate 
            = (Action)
              (
                () =>
                   {
                       while (true)
                       {
                          cancellationToken.ThrowIfCancellationRequested(); 
              // "If task has been cancelled, throw exception to return"

          // Simulate task work
                  Console.WriteLine(" - task work"); //Visual Studio  
           //erroneously stops on exception here. Just continue (F5). 
           //See http://blogs.msdn.com/b/pfxteam/archive/2010/01/11/9946736.aspx
                          Thread.Sleep(100);
                       }
                   }
              );

     try
     {
     // Start the task
         var task = Task.Factory.StartNew(workDelegate, cancellationToken);

      // Simulate main work
         for (var i = 0; i < 5; i++)
         {
             Console.WriteLine("main work");
             Thread.Sleep(200);
         }

       // Cancel the task
         tokenSource.Cancel();

       // Why is this Wait() necessary to catch the exception?
       // If I reomve it, the catch (below) is never hit, 
       //but the program runs as before.
          task.Wait();
     }
     catch (AggregateException e)
     {
         Console.WriteLine(e.Message);
         foreach (var innerException in e.InnerExceptions)
         Console.WriteLine(innerException.Message);
     }

     Console.WriteLine("Press any key to exit...");
     Console.ReadKey();
   }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T20:52:50.877

当异常被 抛出时，它会从您的委托中`ThrowIfCancellationRequested`传播出去。`Task`此时，它被框架捕获并添加到该`Task`. 同时，也`Task`就是过渡到`Faulted`状态。

理想情况下，您希望观察所有`Task`异常。如果您将`Task`s 用作基于任务的异步模式的一部分，那么在某些时候您应该`await`使用`Task`，它会在`Task`. 如果您将`Task`s 用作任务并行库的一部分，那么在某些时候您应该调用`Wait`or `Task<T>.Result`，它会传播 , 上的所有异常`Task`，包裹在`AggregateException`.

如果您没有观察到`Task`异常，那么当`Task`最终确定时，运行时将引发`TaskScheduler.UnobservedTaskException`然后忽略该异常。（这是 .NET 4.5 的行为；4.5 之前的行为会引发`UnobservedTaskException`然后终止进程）。

在您的情况下，您无需等待任务完成，因此退出 try/catch 块。一段时间后，`UnobservedTaskException`引发，然后忽略异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:35:16.630

如果您不等待任务完成，您的程序将继续运行，因此您将通过 catch-block。

另一方面，如果您要`await`执行任务，则仍然会捕获异常

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T18:35:32.677

如果您不等待`task`完成，您的程序将在抛出异常之前退出（或至少离开该执行区域）。

如果主线程已经在

```
Console.ReadKey(); 
```

它不会“备份”到`try/catch`块。

# ruby-on-rails - RailsAdmin 中的范围关联

> ID：16222136
> 
> 赞同：4
> 
> 时间：2013-04-25T18:33:04.017
> 
> 标签：ruby-on-rails, scope, associations, rails-admin

我尝试确定关联范围，以便用户在编辑关系时看不到已发送的提醒。但是，我确实希望它们可以在“显示”视图中看到，而不是在“编辑”视图中。

我无法在每个领域的基础上工作。我可以使用 proc 确定整个 has_many 调用的范围，但这不会让我在“显示”页面上显示结果，因为它是模型范围的。这是我当前的代码，基于 RailsAdmin wiki 似乎不起作用：

```
 group :reminders do
    label 'Reminders'
    field :reminders do
      active true

      associated_collection_scope do
        Proc.new { |scope|
          scope = scope.where(sent: false)
        }
      end

    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-15T19:43:09.023

也许尝试将您的代码扔到`edit do ; end`块内。所以，会变成：

```
edit do  
  group :reminders do
    label 'Reminders'
    field :reminders do
      active true

      associated_collection_scope do
        Proc.new { |scope|
          scope = scope.where(sent: false)
        }
      end

    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T17:45:01.550

```
associated_collection_cache_all true 
```

它应该有帮助

# c# - 反序列化 json 字符串给出的值不能为空。参数名称：s

> ID：16222141
> 
> 赞同：0
> 
> 时间：2013-04-25T18:33:22.873
> 
> 标签：c#, asp.net, json, deserialization, json.net

```
"[{\"active\":true,\"campaignId\":11401,\"createdtime\":1355919181000,\"description\":\"Ankit Demo Edited By Nirav\",\"enddate\":1363132800000,\"groupId\":10179,\"isdeleted\":false,\"lastmodifiedby\":10405,\"modifiedtime\":1362556187000,\"name\":\"Ankit Demo\",\"noofweek\":12,\"organizationId\":11153,\"startdate\":1355875200000,\"status\":2,\"userId\":11161},

{\"active\":true,\"campaignId\":21901,\"createdtime\":1358493958000,\"description\":\"sdadadasd\",\"enddate\":1359072000000,\"groupId\":10179,\"isdeleted\":false,\"lastmodifiedby\":10405,\"modifiedtime\":1358751277000,\"name\":\"NEW CAMP TEST\",\"noofweek\":1,\"organizationId\":10707,\"startdate\":1358467200000,\"status\":4,\"userId\":10405},

{\"active\":true,\"campaignId\":33601,\"createdtime\":1361441582000,\"description\":\"dasdsadasd\",\"enddate\":1363219200000,\"groupId\":10179,\"isdeleted\":false,\"lastmodifiedby\":10405,\"modifiedtime\":1361795632000,\"name\":\"BHAVIK UTC\",\"noofweek\":3,\"organizationId\":10707,\"startdate\":1361404800000,\"status\":2,\"userId\":10405}]" 
```

我的字符串变量中有Above Jsong String ..我想将此json字符串转换为我的自定义类的对象..我创建了自定义类..以下是我从HttpWebResponse获取json响应的代码并在我的自定义类的列表对象中转换

```
 HttpWebResponse response = default(HttpWebResponse);
        try
        {
            response = (HttpWebResponse)request.GetResponse();
            //    response.Close()
            string sResult = null;

            using (StreamReader responseReader = new StreamReader(response.GetResponseStream()))
            {
                sResult = responseReader.ReadToEnd();

            }
            response.Close();
            Console.WriteLine(sResult);

  List<Class1> myDeserializedObjList = (List<Class1>)Newtonsoft.Json.JsonConvert.DeserializeObject(Request[sResult], typeof(List<Class1>));
          int counts=  myDeserializedObjList.Count;

        } 
```

但它给了我错误

```
Value cannot be null.
Parameter name: s 
```

谁能指导我如何解决这个问题？

这是我想使用 System 将 json 字符串中的对象分配给我的自定义类；使用 System.Collections.Generic；使用 System.Linq；使用 System.Web；

```
/// <summary>
/// Summary description for Class1
/// </summary>
public class Class1
{

    private Boolean active;

    public Boolean Active
    {
        get { return active; }
        set { active = value; }
    }
    private long campaignId;

    public long CampaignId
    {
        get { return campaignId; }
        set { campaignId = value; }
    }
    private long createdtime;

    public long Createdtime
    {
        get { return createdtime; }
        set { createdtime = value; }
    }
    private string description;

    public string Description
    {
        get { return description; }
        set { description = value; }
    }
    private long enddate;

    public long Enddate
    {
        get { return enddate; }
        set { enddate = value; }
    }
    private long groupId;

    public long GroupId
    {
        get { return groupId; }
        set { groupId = value; }
    }
    private Boolean isdeleted;

    public Boolean Isdeleted
    {
        get { return isdeleted; }
        set { isdeleted = value; }
    }
    private long modifiedtime;

    public long Modifiedtime
    {
        get { return modifiedtime; }
        set { modifiedtime = value; }
    }
    private long lastmodifiedby;

    public long Lastmodifiedby
    {
        get { return lastmodifiedby; }
        set { lastmodifiedby = value; }
    }
    private string name;

    public string Name
    {
        get { return name; }
        set { name = value; }
    }
    private int noofweek;

    public int Noofweek
    {
        get { return noofweek; }
        set { noofweek = value; }
    }
    private long organizationId;

    public long OrganizationId
    {
        get { return organizationId; }
        set { organizationId = value; }
    }
    private long startdate;

    public long Startdate
    {
        get { return startdate; }
        set { startdate = value; }
    }
    private Boolean status;

    public Boolean Status
    {
        get { return status; }
        set { status = value; }
    }
    private long userId;

    public long UserId
    {
        get { return userId; }
        set { userId = value; }
    }

    public Class1()
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-25T18:50:55.603

如果你`Request[sResult]`是你提到的 json 字符串。尝试

```
Newtonsoft.Json.JsonConvert.DeserializeObject<List<Class1>>(Request[sResult]); 
```

编辑，我的意思是：

```
List<Class1> myDeserializedObjList =Newtonsoft.Json.JsonConvert.DeserializeObject<List<Class1>>(Request[sResult]); 
```

# razor - 标签或@html.Label ASP.net MVC 4

> ID：16222151
> 
> 赞同：12
> 
> 时间：2013-04-25T18:33:54.387
> 
> 标签：razor, asp.net-mvc-4

ASP.net MVC 4 的新手并试图理解 Razor。如果我只想在我的 .cshtml 页面中显示一些文本，我可以使用

```
<label class="LabelCSSTop">Introduction</label> 
```

或者我应该使用：

```
 @Html.Label("STW", htmlAttributes: new { @class = "LabelCSSTop" }) 
```

不确定一个是否比另一个更受欢迎，或者是否可以。如果后者无论如何都会发出标签标签，我应该坚持前者吗？

同样，如果我只想显示一个文本框，我可以这样做：

`<input id="txtName" type="text" />`

或者我应该这样做：

`@Html.TextBox("txtName", "")`

是否存在我应该在常规 html 标记上使用 @Html 的情况？

提前致谢！！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T18:39:39.900

对于您的标签片段，这并不重要。我会选择更简单的语法（纯 HTML）。

大多数辅助方法也不允许您包围另一个元素。在选择使用/不使用一个时，这可能是一个考虑因素。

## 强类型等价物

然而，值得注意的是，您使用何种`@Html.[Element]For<T>()`方法获得了重要的功能。请注意方法名称末尾的“For”。

例子：

```
@Html.TextBoxFor( o => o.FirstName ) 
```

这将处理基于对象层次结构的 ID/名称创建（这对于模型绑定至关重要）。它还将添加不显眼的验证属性。这些方法将表达式作为参数，该参数引用模型中的属性。此属性的元数据由 MVC 框架获取，因此它比其字符串参数对应物“了解”更多有关该属性的信息。

它还允许您以强类型的方式处理 UI 代码。Visual Studio 将突出显示语法错误，而它不能对字符串执行此操作。视图也可以选择与解决方案一起编译，允许额外的编译时检查。

## 其他注意事项

有时，HTML 帮助器方法还会执行其他有用的任务，例如`Html.Checkbox`还会`Html.CheckboxFor`创建一个隐藏字段以与复选框一起使用。另一个例子是路由感知的与 URL 相关的方法（例如超链接）。

```
<!-- bad -->
<a href="/foo/bar/123">my link</a>

<!-- good -->
@Html.ActionLink( "my link", "foo", "bar", new{ id=123 } )

<!-- also fine (perhaps you want to wrap something with the anchor) -->
<a href="@Url.Action( "foo", "bar", new{ id=123 } )"><span>my link</span></a> 
```

使用纯 HTML 与在呈现视图时必须执行的代码相比，有一点性能优势，尽管这**不**应该是决定因素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T18:43:02.763

取决于你在做什么。

如果您有 SPA（单页应用程序），您可以使用：

```
<input id="txtName" type="text" /> 
```

否则，建议使用 Html 帮助程序，以使您的控件与模型绑定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-05T14:36:45.913

如果您只想在 .cshtml 页面中显示一些文本，我不推荐 @Html.Label 也不推荐使用 html 标签。[该元素表示用户界面中的标题。](http://www.w3.org/wiki/HTML/Elements/label)您会看到在@Html.Label 的情况下，添加了一个**for**属性，指的是一个可能不存在的元素的id。该属性的值为模型字段的值，其中非字母数字用下划线代替。您应该使用*@Html.Display*或*@Html.DisplayFor*，可能包含在一些普通的 html 元素 line span 或 p 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T18:39:07.137

帮助器主要用于帮助您为模型的强类型属性显示标签、表单输入等。通过使用帮助程序和 Visual Studio Intellisense，您可以大大减少生成网页时可能出现的拼写错误的数量。

话虽如此，您可以继续为视图模型的属性或要显示的不属于视图模型的项目手动创建元素。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T18:43:19.730

说到标签，我想说这取决于你喜欢什么。例如，它可以与 HTML 帮助标签一起使用的一些示例

*   处理超链接时，因为 HTML 助手简化了路由
*   当您绑定到模型时，使用`@Html.LabelFor`,`@Html.TextBoxFor`等
*   当您使用 时`@Html.EditorFor`，您可以在编辑器视图中指定特定的行为 och 外观

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-25T18:38:58.830

@html.label 和 @html.textbox 在您想以一种简单的方式将其绑定到您的模型时使用......这无法通过输入等方式在一行中实现

# jquery - 无法使用 getJson 函数访问 json

> ID：16222153
> 
> 赞同：-9
> 
> 时间：2013-04-25T18:33:58.910
> 
> 标签：jquery, json

我正在尝试切换到对所有内容都使用 jQuery。我不太明白为什么这个功能不起作用。我有一个简单的 JSON 文件，其中包含以下内容：

```
 {  "status" : "active" } 
```

我只是在检查某些东西是否已切换到开启状态。我制作了一个简单的页面来检查我的 json 请求，但我从警报中得到未定义的返回。

```
<html>
<script scr="js/jquery-1.9.1.min.js"></script>
<script>
var results;;
$(document).read(function (){
  $.getJSON('myurl.com/myFile.json'),
     function(result){
       alert(result);a
     }
});
</script>
</head>
<body>
</body>
</html> 
```

所以我不确定为什么会出现未定义的情况。更糟糕的是，我认为它会出现`[Object][object]`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T18:37:06.167

尝试这个：

```
$(document).ready(function (){
     $.getJSON('myurl.com/myFile.json',function(result){
          alert(result);
     });
}); 
```

*   应该`$(document).ready`不是`$(document).read`
*   删除`a`警报后的多余部分。
*   `'myurl.com/myFile.json')`去掉 url <-- 这个后面多余的括号
*   在开始新事物之前，请先看看[jQuery API 。](http://api.jquery.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:35:00.673

```
$(document).ready(function (){
    $.getJSON('myurl.com/myFile.json',function(result){
        alert(result);
    });
}); 
```

有关正确的语法，请参见 - [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/) 和[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:37:43.890

尝试以下

```
<script>
$(document).ready(function (){
  $.getJSON('myurl.com/myFile.json'),
     function(result){
       alert(result.status);
     }
});
</script> 
```

# python - 具有真实请求数据的懒惰海盗模式

> ID：16222155
> 
> 赞同：4
> 
> 时间：2013-04-25T18:34:13.173
> 
> 标签：python, zeromq

我正在使用 PyZMQ 绑定学习 zmq，但我在使用 Lazy Pirate 模式时遇到了麻烦。因此，这里是[Lazy Pirate 服务器](http://zguide.zeromq.org/py%3alpserver)和[Lazy Pirate 客户端](http://zguide.zeromq.org/py%3alpclient)的代码。

在示例客户端发送请求，但它是简单的数字。如何使用文本数据提出真正的请求并保持模式实现？

另外，我并不真正理解客户端代码中的变量-它无限增加=>当达到int变量最大值`sequence`时python不会崩溃吗？`sequence`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T23:41:07.150

首先，`sequence`代码中的变量基本上是一个消息标识符。单个请求尝试失败的方式有两种：

1.  请求消息永远不能发送
2.  请求消息发送，但客户端厌倦了等待并在响应返回之前超时

在第二种情况下，如果您没有`sequence`编号，您不知道您的哪个请求实际上是成功的请求。

考虑这个客户历史：

*   发送请求#1
*   暂停
*   发送请求#2
*   暂停
*   发送请求#3
*   收到回复

哪个请求触发了响应？由于上面提到的第二种请求失败，它可能是三个请求中的任何一个。通过`sequence`响应中的数字，我们可以准确地知道哪个请求是服务器处理的请求。

示例客户端中“来自服务器的格式错误的回复”背后的想法是，如果客户端正在处理请求 #3（请求 #1 和 #2 已超时），它会丢弃响应 #n（其中 n < 3）直到它收到它接受的响应 #3。

要发送多个序列号，请使用序列化格式并发送整个对象。

例如，我可以定义`class MyRequest { int sequence; string text; }`然后将其作为 JSON 发送到服务器。

可以用 int64 替换无限递增的`sequence`变量，然后就可以了，或者您可以执行类似使用 GUID 作为标识的请求的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-06T23:23:55.827

不幸的是，Timothy Shields 上面的回答是 100% 不正确的。**您可以在他的书Code Connected Volume 1**[的免费下载版本中](http://hintjens.com/books) 阅读 Hintjen 的评论。重要的一点来自第 141 页，如下...

 **> 客户端对每条消息进行排序，并检查回复是否完全按顺序返回：没有请求或回复丢失，没有回复多次返回或乱序返回。运行测试几次，直到您确信这种机制确实有效。在生产应用程序中不需要序列号；他们只是帮助我们信任我们的设计。

对于裸 TCP 可能失败的方式的有趣讨论，这是[一个很好的讨论](http://www.cliffc.org/blog/2013/08/15/tcp-is-unreliable/#comments)。阅读评论。我毫不怀疑蒂姆知识渊博，他只是因为没有认识到懒惰海盗模式特别**只**使用 REQ-REP 而犯了错误，因此比他的评论所暗示的更可靠。**

# amazon-s3 - MX 记录和 Amazon S3

> ID：16222156
> 
> 赞同：1
> 
> 时间：2013-04-25T18:34:13.413
> 
> 标签：amazon-s3, dns, gmail, mx-record

我在设置 Google Apps 帐户时遇到问题。我相信我的 S3 存储桶导致了问题。我像 Google 要求的那样配置 MX 记录，今天 mij DNS 提供商承认记录在哪里传播。

现在，当我尝试继续设置我的 Google Apps 帐户时，它卡住了并且不提供任何信息。我在 Amazon S3 存储桶上托管了一个静态网站。

试图查看 MX 记录是否可用，我使用了这个工具[MX Toolbox](http://mxtoolbox.com/) 来查看我的 MX 记录是否可用，但它们不可用。有人有同样的问题或有什么专业建议吗？

顺便说一句：域名是 xntriek.be

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-12T00:41:26.330

我怀疑你必须做的如下：

1.) 在您的 DNS 注册商处更改设置以使用不同的名称服务器。对于我的注册商 namecheap，我去管理 -> 将名称服务器转移到第 3 方（或某些变体）->（保持此屏幕向上 - 应该有一组 5 条以上的空白记录）

2.) 设置 Amazon Route 53。3
.) 在 Route 53 控制台中为您的域名“创建托管区域” 4.) 此托管区域应与“委托集”（R53 控制台右侧）相关联 - 4您将粘贴到您在上面 (1) 中找到的屏幕中的记录。5.) 保存并配置 Route 53，就像您使用 DNS 提供商配置记录一样。（CNAME 别名和 mx 转发）

必须在 R53 而不是在注册商处执行此操作的原因是**将 cname 记录别名设置为，例如 www.yourdomain.com.aws.us-east.amazon blah blah blah 告诉 mx 流量转到 amazon 以获取有关怎么办**。当然，如果您尚未设置 Route 53，则没有针对该流量的进一步说明。

我希望这有帮助！

# bundle - Launch4J - 为 Windows 7 64 位机器捆绑 JRE

> ID：16222159
> 
> 赞同：1
> 
> 时间：2013-04-25T18:34:21.957
> 
> 标签：bundle, java, freeze, launch4j

我使用 Launch4J（连同 Inno Setup Compiler）来创建桌面应用程序。

它在 Windows 7 32 位上运行良好，但在 Windows 7 64 位上 JRE 挂起。据推测，这是因为我捆绑了一个 32-but JRE (jre6)。

我想知道是否有人知道是否有可能（甚至有必要）捆绑一个或多个 JRE，以便我的同一个应用程序可以在 64-but 系统上运行？

已阅读此页面 - [http://java.com/en/download/faq/java_win64bit.xml](http://java.com/en/download/faq/java_win64bit.xml) - 似乎没有太多线索。我正在捆绑 jre6，所以也许 jre7 已经解决了这个问题？

没有要测试的 64 位设置，所以如果有任何经验的人可以在这里分享他们的知识，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T04:07:37.670

如果您打算专门在 32 位环境中开发和测试，我强烈建议您强制您的应用程序在 32 位 JRE 中运行，即使在 64 位机器上也是如此。

有关如何在此处配置 Launch4J 以强制[使用 32 位 JRE 的信息：将 Launch4J 配置为仅使用 32 位 JVM](https://stackoverflow.com/questions/2688932/configure-launch4j-to-use-32-bit-jvm-only)

# java - Java 从文本文件中读取

> ID：16222162
> 
> 赞同：0
> 
> 时间：2013-04-25T18:34:34.000
> 
> 标签：java, user-interface, import

我正在尝试使用扫描仪将一些数据从文本文件加载到 GUI。我的文本文件中有两个部分：俱乐部和会员。代码在俱乐部部分运行正常。例如，如果我的列表中有 4 个俱乐部，则会显示所有俱乐部，但对于“成员”部分，无论列表中有多少成员，都只会显示第一个成员。这是我的代码：

```
public void load (String fileName) throws FileNotFoundException {
     FileInputStream fileIn = new FileInputStream("Clubs.txt");
     Scanner scan = new Scanner(fileIn);

     while (scan.hasNextLine()){
            String line = scan.nextLine();
            if(line.equals("Members")){
                String firstName = scan.next();
                String lastName = scan.next();
                Pupil p1 = new Pupil( firstName, lastName);
                pupils[nbrPupils] = p1;
                nbrPupils ++;

               }   
             else if(line.equals("Clubs")){ 
                 while (scan.hasNext()){
                 String club = scan.nextLine();
                 Club aNewClub = new Club(club);
                 clubs[nbrClubs] = aNewClub;
                 nbrClubs ++;

                }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:40:41.930

提示：你`while (scan.hasNext())`在这个`Clubs`部分做，但你没有在这个`Members`部分做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:44:54.720

从`while`循环转换为`if`条件，因为您只想检查是否有下一行

```
else if (line.equals("Clubs")) {
       if (scan.hasNext()) {/////here if you use while loop , it will loop until the file is finish 
         String club = scan.nextLine();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:53:37.117

```
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class ReadFile {

    /**
     * @param args
     * @throws Exception 
     */
    public static void main(String[] args) throws Exception {
        // TODO Auto-generated method stub
        new ReadFile().load("");
    }

    public void load (String fileName) throws FileNotFoundException {
         FileInputStream fileIn = new FileInputStream("C:\\Clubs.txt");
         Scanner scan = new Scanner(fileIn);
         boolean membersfound =false;
         while (scan.hasNextLine()){
                String line = scan.nextLine();

                if(line.equals("Members") || membersfound){

                    String firstName = scan.next();
                    String lastName = scan.next();
                   System.out.println("Member   "+firstName +":"+ lastName);

                   }   
                 else if(line.equals("Clubs") ){ 
                     while (scan.hasNext()){
                     String club = scan.nextLine();
                     if( club.equals("Members")){
                         membersfound = true;
                         break;
                     }
                     System.out.println("Clubname :" + club
                             );                

                    }

            }
}
    }
} 
```

我本可以修改整个程序。但我想告诉你你的错误 样本 clubs.txt 文件 Members member1 member2 member3 Clubs club1 club2 club3

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-25T18:51:19.010

当您这样做`scan.nextLine()`时，它将扫描仪移动到您当前读取的行之后。因此，如果您继续这样做`scan.next()`，扫描仪将从当前行的末尾开始（在这种情况下`line`）并读取它之后的内容。

[看这里](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#nextLine%28%29)它说：

“将此扫描仪前进到当前行并**返回被跳过的输入**”

你所能做的就是打电话`split()`或`substring()`打开`line`并提取你需要的信息。

# sql-server-2012 - NT AUTHORITY\ANONYMOUS LOGON 的“Restore-SQLdatabase”登录失败

> ID：16222164
> 
> 赞同：0
> 
> 时间：2013-04-25T18:34:41.473
> 
> 标签：sql-server-2012, powershell-2.0, database-backups, database-restore

我有一个用于数据库备份/恢复的 powershell 脚本。出于某种原因，我正在使用`new-pssession`and远程执行脚本`invoke-command`。我是

```
1.connecting to remote server
2.the local server is in a domain
3.the remote server is in same domain
4.Using the domain account which exist in both the machine and have admin rights.
5.My SQL Service (I mean the instance/engine) is running with 
  the same Domain account 
```

使用命令备份`Backup-SQLdatabase`成功，但还原`Restore-SQLdatabase`失败并出现错误`Login failed for NT AUTHORITY\ANONYMOUS LOGON`。

只是为了试验/错误，我将“NT AUTHORITY\ANONYMOUS LOGON”添加到必须进行恢复但没有运气的机器的管理员组中。

任何线索我做错了什么（或）我该如何解决这个问题。

感谢你的帮助。

谢谢。

**编辑：**交换机可以`-SQLTrustedConnection`解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T14:10:00.480

经过一番尝试，我发现了一个窍门。必须进行还原的机器我添加了“NT AUTHORITY\ANONYMOUS LOGON”作为用户。

如何添加：

使用 SSMS 连接到数据库实例 -> 展开安全性 -> 展开登录 -> 右键单击​​登录 -> 创建新登录

# facebook - Facebook 万岁令牌不工作

> ID：16222168
> 
> 赞同：0
> 
> 时间：2013-04-25T18:34:49.643
> 
> 标签：facebook, facebook-graph-api

这就是 fb degugger 所说的

应用 ID：MY_APP_ID：APP_NAME

元数据：[]

用户身份：

USER_ID：姓名

发行：未知

过期：1366920000（约一个小时）

有效：真

来源：网络

范围：create_note manage_pages photo_upload publish_actions publish_stream read_stream share_item status_update user_groups video_upload

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T18:26:44.143

首先通过 javascript sdk 生成一个临时令牌

```
FB.login(function(response) {
  if (response.status=='connected') {
    if (response.authResponse.accessToken) {
    var token = response.authResponse.accessToken;
           ............rest of the codes 
```

然后在服务器端使用 curl 调用扩展您的令牌以获取最终令牌 -
[https://graph.facebook.com/oauth/access_token?grant_type=fb_exchange_token&client_id=APP_ID&client_secret=APP_Client_Secret&fb_exchange_token=your_temporary_token](https://graph.facebook.com/oauth/access_token?grant_type=fb_exchange_token&client_id=APP_ID&client_secret=APP_Client_Secret&fb_exchange_token=your_temporary_token)

希望这能解决你想要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T03:40:21.060

确保您遵循此文档[https://developers.facebook.com/docs/howtos/login/extending-tokens/](https://developers.facebook.com/docs/howtos/login/extending-tokens/)中描述的步骤？

[https://graph.facebook.com/oauth/access_token?grant_type=fb_exchange_token&client_id=APP_ID&client_secret=APP_SECRET&fb_exchange_token=ORIGINAL_USER_ACCESS_TOKEN](https://graph.facebook.com/oauth/access_token?grant_type=fb_exchange_token&client_id=APP_ID&client_secret=APP_SECRET&fb_exchange_token=ORIGINAL_USER_ACCESS_TOKEN)

# java - 使用 ArrayList 循环中的 MediaMetadataRetriever 时出现 NullPointerException

> ID：16222169
> 
> 赞同：0
> 
> 时间：2013-04-25T18:34:50.243
> 
> 标签：java, android

我找到了这个例子： http: [//xjaphx.wordpress.com/2011/06/28/query-mp3-information-using-android-supported-function/](http://xjaphx.wordpress.com/2011/06/28/query-mp3-information-using-android-supported-function/) for MediaMetadataRetriever，它工作正常。但是当我尝试使用它形成一个循环并将数据添加到 ArrayList 时，我收到了这个错误：

```
04-25 20:20:27.121: E/AndroidRuntime(20692): FATAL EXCEPTION: main
04-25 20:20:27.121: E/AndroidRuntime(20692): java.lang.NullPointerException
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:394)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.widget.AbsListView.obtainView(AbsListView.java:2159)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.widget.ListView.makeAndAddView(ListView.java:1831)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.widget.ListView.fillDown(ListView.java:674)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.widget.ListView.fillFromTop(ListView.java:735)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.widget.ListView.layoutChildren(ListView.java:1652)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.widget.AbsListView.onLayout(AbsListView.java:1994)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.view.View.layout(View.java:14003)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.view.ViewGroup.layout(ViewGroup.java:4375)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.view.View.layout(View.java:14003)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.view.ViewGroup.layout(ViewGroup.java:4375)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1663)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1521)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1434)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.view.View.layout(View.java:14003)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.view.ViewGroup.layout(ViewGroup.java:4375)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.view.View.layout(View.java:14003)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.view.ViewGroup.layout(ViewGroup.java:4375)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:1892)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1711)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.view.Choreographer.doCallbacks(Choreographer.java:562)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.view.Choreographer.doFrame(Choreographer.java:532)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.os.Handler.handleCallback(Handler.java:725)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.os.Looper.loop(Looper.java:137)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at android.app.ActivityThread.main(ActivityThread.java:5039)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at java.lang.reflect.Method.invokeNative(Native Method)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at java.lang.reflect.Method.invoke(Method.java:511)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-25 20:20:27.121: E/AndroidRuntime(20692):    at dalvik.system.NativeStart.main(Native Method) 
```

这是带有 MediaMetadataRetriever 的类：

```
 public class GenreListing extends Activity {

           ListView listView;
            ArrayAdapter<String> adapter;

            private SongsManager songManager;
            private Utilities utils;            
            private List<String> songs = new ArrayList<String>();       
            private static final String SD_PATH = new String ("/sdcard/");

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.genre_list);

            ListView lv = (ListView) findViewById(R.id.genreOutput);

            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, songs);        

            lv.setAdapter(adapter);

            songManager = new SongsManager();
            utils = new Utilities();

                updatePlaylist();

    }   

         private void updatePlaylist() {
                File home = new File(SD_PATH);
                String out = "";
                if (home.listFiles(new Mp3Filter()).length > 0) {
                    for (File file : home.listFiles(new Mp3Filter())) {
    MediaMetadataRetriever mmr = new MediaMetadataRetriever();
mmr.setDataSource(file.getPath());

                        String genre = "";
                        //String genre = mmr.extractMetadata(MediaMetadataRetriever.METADATA_KEY_ALBUMARTIST);
                        genre = mmr.extractMetadata(MediaMetadataRetriever.METADATA_KEY_ALBUMARTIST);   

                    songs.add(genre);
                    mmr.release();

                    }               

            }
    } 
```

}

# javascript - 从 Closure 编译器解开 JS 源代码

> ID：16222174
> 
> 赞同：1
> 
> 时间：2013-04-25T18:35:12.480
> 
> 标签：javascript, google-closure

我想修改[一个 javascript 应用程序以供我使用](https://github.com/thinkpixellab/agent8ball)^*。问题是，js 是用 Google Closure Compiler 编译的。显然，我应该修改源（在存储库中可用），然后重新编译。

这是我第一次接触 GCC。我浏览了文档并得出结论，关键是通过关键字使用[deps.js](https://github.com/thinkpixellab/agent8ball/blob/master/public/javascripts/deps.js)`goog.addDependency`中提到的来源。所以我建立了一个 HTML 文件并引用了所有的来源。加载这个文件我得到 118 *ReferenceError: goog is not defined*在 firebug 控制台中的错误。

然后我阅读了更多内容，发现该应用程序已在[kbuild](https://github.com/kevmoo/kbuild)的帮助下编译，并且它使用配置文件[config.kb](https://github.com/thinkpixellab/agent8ball/blob/master/config.kb)将正确的参数发送到 GCC。这个文件，表明第一个文件应该是[loader.js](https://github.com/thinkpixellab/agent8ball/blob/master/public/javascripts/eightball/loader.js)，所以我重新排序了`<script>`标签并移动了

```
<script type="text/javascript" src="./eightball/loader.js"></script> 
```

到顶部。但同样的错误被抛出。那么，缺少什么？

[* 许可证是 MIT，权利没有问题。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:48:44.087

首先，该应用程序似乎正在使用[Google Closure](https://developers.google.com/closure/)，这是由 Google 开发的 JavaScript 库。

^(这（*当然*）与 Google Closure Compiler***完全***不同，[Google Closure Compiler](https://developers.google.com/closure/compiler/)是一个 JavaScript 缩小和混淆引擎（该死的这些大公司和他们对所有东西命名的追求）。)

*这意味着您应该在列出您的部门之前*包含 Closure 引导程序；这就是应用程序本身所做的，就像在[主视图](https://github.com/thinkpixellab/agent8ball/blob/master/app/views/main/index.haml)中一样，它会调用[`game_js`helper](https://github.com/thinkpixellab/agent8ball/blob/master/app/helpers/main_helper.rb) ，如果应用程序尚未编译，它会[包含](https://github.com/thinkpixellab/agent8ball/blob/master/app/helpers/main_helper.rb#L9-10)Closure的文件。`base`

* * *

**TLDR：**

尝试`/javascripts/closure/closure/goog/base.js`先包含该文件。

# python - 我可以使字典可用于多个 python 脚本吗？

> ID：16222176
> 
> 赞同：1
> 
> 时间：2013-04-25T18:35:18.107
> 
> 标签：python

我有一个地址字典，其中列出了他们的用户名和密码，如下所示：

```
address_dict = {'address1':{'username':'abc', 'password':'123'}, 'address2':{'username':'xyz', 'password':'456'}} 
```

有没有办法让这个字典可供多个脚本读取和可能写入？喜欢将其保存为单独的python文件并导入它还是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T18:37:41.630

是的，您可以这样做：

```
# module.py

address_dict = {'address1':{'username':'abc', 'password':'123'}, 'address2':{'username':'xyz', 'password':'456'}}

# main.py

import module
print(module.address_dict) 
```

如果你不喜欢这个`module.`前缀，你可以像这样导入字典：

```
from module import address_dict
print(address_dict) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T18:40:19.080

要在运行时访问和修改它，您可以在模块中定义它然后导入它。但是，如果您希望您的更改是持久的（即下次运行脚本时查看更改的版本），您需要其他东西，例如数据库。

在这种情况下，最简单的使用可能[`shelve`](http://docs.python.org/2/library/shelve.html)是基于`pickle`. `pickle`如果你愿意，你也可以使用它自己。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T18:37:48.263

看看泡菜:)

[http://docs.python.org/2/library/pickle.html](http://docs.python.org/2/library/pickle.html)

您可以使用它将对象转储到文件中，也可以使用任何其他 python 脚本将它们读回。

# python - 使用 Python（不使用 SciPy）检测照片中的特定水印

> ID：16222178
> 
> 赞同：5
> 
> 时间：2013-04-25T18:35:24.263
> 
> 标签：python, image-processing, computer-vision, python-imaging-library, image-comparison

我有大量图片（数十万张），对于每张图片，我需要说明它的右上角是否有水印。水印总是相同的并且在相同的位置。它采用带符号和一些文本的丝带形式。我正在寻找简单快速的方法来做到这一点，理想情况下，不使用 SciPy（因为它在我正在使用的服务器上不可用——但它可以使用 NumPy）

到目前为止，我已经尝试使用 PIL 和裁剪功能来隔离水印应该存在的图像区域，然后将直方图与 RMS 功能进行比较（请参阅[http://snipplr.com/view/757/compare-两个 pil-images-in-python/](http://snipplr.com/view/757/compare-two-pil-images-in-python/)）。这不是很好，因为两个方向都有很多错误。

任何想法将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-25T21:08:36.967

另一种可能性是使用机器学习。我的背景是自然语言处理（不是计算机视觉），但我尝试使用您对问题的描述创建一个训练和测试集，并且它似乎有效（对看不见的数据 100% 准确度）。

### 训练集

训练集由带有水印（正例）和不带水印（负例）的相同图像组成。

### 测试集

测试集由不在训练集中的图像组成。

### 示例数据

如果有兴趣，您可以使用[示例训练和测试图像进](http://bwbaugh.com/stack-overflow/16222178_watermark.tar)​​行尝试。

### 代码：

完整版可[作为要点](https://gist.github.com/bwbaugh/5463151)。摘录如下：

```
import glob

from classify import MultinomialNB
from PIL import Image

TRAINING_POSITIVE = 'training-positive/*.jpg'
TRAINING_NEGATIVE = 'training-negative/*.jpg'
TEST_POSITIVE = 'test-positive/*.jpg'
TEST_NEGATIVE = 'test-negative/*.jpg'

# How many pixels to grab from the top-right of image.
CROP_WIDTH, CROP_HEIGHT = 100, 100
RESIZED = (16, 16)

def get_image_data(infile):
    image = Image.open(infile)
    width, height = image.size
    # left upper right lower
    box = width - CROP_WIDTH, 0, width, CROP_HEIGHT
    region = image.crop(box)
    resized = region.resize(RESIZED)
    data = resized.getdata()
    # Convert RGB to simple averaged value.
    data = [sum(pixel) / 3 for pixel in data]
    # Combine location and value.
    values = []
    for location, value in enumerate(data):
        values.extend([location] * value)
    return values

def main():
    watermark = MultinomialNB()
    # Training
    count = 0
    for infile in glob.glob(TRAINING_POSITIVE):
        data = get_image_data(infile)
        watermark.train((data, 'positive'))
        count += 1
        print 'Training', count
    for infile in glob.glob(TRAINING_NEGATIVE):
        data = get_image_data(infile)
        watermark.train((data, 'negative'))
        count += 1
        print 'Training', count
    # Testing
    correct, total = 0, 0
    for infile in glob.glob(TEST_POSITIVE):
        data = get_image_data(infile)
        prediction = watermark.classify(data)
        if prediction.label == 'positive':
            correct += 1
        total += 1
        print 'Testing ({0} / {1})'.format(correct, total)
    for infile in glob.glob(TEST_NEGATIVE):
        data = get_image_data(infile)
        prediction = watermark.classify(data)
        if prediction.label == 'negative':
            correct += 1
        total += 1
        print 'Testing ({0} / {1})'.format(correct, total)
    print 'Got', correct, 'out of', total, 'correct'

if __name__ == '__main__':
    main() 
```

### 示例输出

```
Training 1
Training 2
Training 3
Training 4
Training 5
Training 6
Training 7
Training 8
Training 9
Training 10
Training 11
Training 12
Training 13
Training 14
Testing (1 / 1)
Testing (2 / 2)
Testing (3 / 3)
Testing (4 / 4)
Testing (5 / 5)
Testing (6 / 6)
Testing (7 / 7)
Testing (8 / 8)
Testing (9 / 9)
Testing (10 / 10)
Got 10 out of 10 correct
[Finished in 3.5s] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T20:10:31.227

水印的位置是否准确？水印是如何应用于背景图像的？

我假设水印是部分加法或乘法函数。加水印的图像大概是这样计算的：

```
resultPixel = imagePixel + (watermarkPixel*mixinValue) 
```

mixinValue 将是 0.0-1.0，因此您可以通过使用 (1-mixinValue) 的乘数重新应用水印来完成混合。这应该会产生与水印匹配的像素。只需针对原始水印测试结果图像的颜色即可。

```
testPixel = resultPixel + (watermarkPixel*(1-mixinValue))
assert testPixel == watermarkPixel 
```

当然，水印图像的压缩可能会导致您的 testPixel 出现一些差异。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-24T09:57:56.947

您始终可以使用 restb.ai 的[Specialized Image Recognition](http://restb.ai) API 来自动化水印检测过程。

```
导入请求

url = "https://api.restb.ai/segmentation"

querystring = {"client_key":"your-free-key-here","model_id":"re_logo","image_url":"http://demo.restb.ai/img/gallery/realestate/logos-watermarks/ re_logo-1.jpg"}

response = requests.request("GET", url, params=querystring)

打印（响应。文本）
```

[Logo & Watermark 检测演示截图](https://i.stack.imgur.com/A05ch.png)

# php - 允许多人登录 PHP 帐户

> ID：16222180
> 
> 赞同：-3
> 
> 时间：2013-04-25T18:35:31.217
> 
> 标签：php

嘿伙计们，我想知道他们是否有办法让多个帐户同时登录一个用户帐户。我有一个 MySQL 数据库，PHP 从中创建会话，所以我知道它与操作会话或其他东西有关。所以我的问题是如何让某人登录一个帐户并让另一台计算机上的另一个人登录同一个帐户，而另一个人不会被踢掉。

大卫

编辑：

因此，在每个页面上都有一些功能可以为用户执行某些任务，而我的老板正在开会，正在向某人展示一些东西，他们都从不同的计算机登录到同一个帐户，她正在向这些人展示一些东西，而他一直被踢.....是不是因为我有

```
if(!isset($_SESSION['myusername'])){
    header("location:./mainlogin.php");
    exit;
} 
```

在每一页上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:37:18.173

除非您专门设置了代码来防止它发生，否则这将是会话的默认行为。两个用户都会为同一用户打开一个会话。

# ruby-on-rails - 如何将 check_box_tag 用于非布尔值？

> ID：16222183
> 
> 赞同：0
> 
> 时间：2013-04-25T18:35:33.863
> 
> 标签：ruby-on-rails

我的数据库中有一个名为 property_types 的字段，它有一个字符串值，值可以是“Condo”或“Single Family Home”或“Commercial”。我想在用户的搜索表单中显示每个属性类型，每个属性类型旁边都有一个复选框，以便用户可以选择哪些属性类型应该包含在他们的搜索结果中。

但是，如果 property_type 字段不是布尔值并且它有几个可能的值，我该如何使用 check_box_tag 来做到这一点，它只能有一个 true 或 false 值？

编辑：

我将此复选框代码添加到搜索表单所在的属性/索引并显示搜索结果：

```
<%= check_box_tag(:condo, value = "1", checked = true) %> 
```

在 properties_controller 我添加了这个：

```
@properties = @properties.where(:property_type => "Condo") if params[:condo].present? 
```

当然它不起作用，因为我不知道我在做什么，但这是否符合正确的路线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:52:11.097

好吧，看看你的要求，我建议你将值保留在`true`and `false`，并且在你的控制器上，当你持久化对象时，你检查所有被选中的可能性 ( `true`) 并将你的`project_types`属性放在一起。

```
project_types += 'condo&' if params[:condo]
project_types += 'commercial&' if params[:commercial]
... 
```

当然，`&`我在示例中添加的只是为了演示，因为我不知道您将如何创建此字符串。

编辑：

好吧，也许你应该重构你的模型。我相信如果该`project_types`属性不存在会更容易，相反，您有几个以字符串命名的布尔属性。然后你可以像这样搜索：

```
@properties.where(:condo => params[:condo], :commercial => params[:commercial]) 
```

并且更容易理解代码。

# image - 调整大小时背景图像不适合浏览器

> ID：16222192
> 
> 赞同：4
> 
> 时间：2013-04-25T18:36:02.863
> 
> 标签：image, browser, background-image, stretch, css

当我调整窗口大小时，我似乎无法让我的背景适合我的浏览器。请帮忙！这里有一些图片来告诉你发生了什么：[查看图片](http://imgur.com/a/UjWEW "点击这里") 第一张图片是它应该如何安装，第二张是我水平拉伸它的时候，第三张是我垂直拉伸的时候（对不起，不知道为什么它上传了我的图片两次）

这是我正在使用的代码：

```
body {
    background: url('images/bkg-img.png');
    repeat: no-repeat;
    -webkit-background-size: cover;
       -moz-background-size: cover;
         -o-background-size: cover;
            background-size: cover;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:08:43.540

问题在于`background-size: cover`覆盖了*背景定位区域*（参见[W3C 页面](http://www.w3.org/TR/css3-background/#the-background-size)），在某些情况下，也就是计算出的正文高度。并不总是和窗户一样高！

我发现的最简单的解决方案也是放一个

```
 html {height:100%} 
```

在样式表中。但是您可能需要对您的设置进行一些试验才能使其以您想要的方式工作。我很确定它因浏览器而异，并且取决于您使用的是标准模式还是怪癖模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:41:43.043

有很多方法可以做到这一点，如果你将图像设置为`background-image`身体，它不会缩小或扩大，它会保持不变，这是预期的行为。

你可以使用某物。像这样：

```
<div id="bg">
  <img src="images/bg.jpg" alt="">
</div> 
```

和他们的风格：

```
#bg {
  position: fixed; 
  top: -50%; 
  left: -50%; 
  width: 200%; 
  height: 200%;
}
#bg img {
  position: absolute; 
  top: 0; 
  left: 0; 
  right: 0; 
  bottom: 0; 
  margin: auto; 
  min-width: 50%;
  min-height: 50%;
} 
```

为了能够将您的内容放在背景图像之上，请将您的内容放在另一个 div 中，例如：

```
<div class="pagewrap">
    <p>Content</p>
</div> 
```

它的类别：

```
.pagewrap {
    position: relative;
    z-index: 2;
    width: 100%;
    height: 100%;
} 
```

[查看演示](http://css-tricks.com/examples/FullPageBackgroundImage/css-2.php)或[其他技术](http://css-tricks.com/perfect-full-page-background-image/)，关于[z-index](https://stackoverflow.com/questions/7490146/z-index-relative-or-absolute)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:53:43.563

## 固定图像

如果您不需要背景图像随页面滚动，您仍然可以将背景图像应用于`body`标签，如果您设置`background-attachment: fixed;`

```
body {
    background: url('images/bkg-img.png') no-repeat 0 0 fixed;
    -webkit-background-size: cover;
       -moz-background-size: cover;
         -o-background-size: cover;
            background-size: cover;
} 
```

## jQuery

如果 bg 图像确实需要随页面滚动，则可能值得应用一些 JavaScript 或 jQuery 代码，以保持 HTML 和 CSS 相对简单。

```
function stretchBg(width, height, contain) {
    var pageWidth  = $(document).width();
    var pageHeight = $(document).height();

    if ((pageWidth / pageHeight) > (width / height) == !!contain)
        $('body').css({backgroundSize: 'auto ' + pageHeight + 'px'});
    else
        $('body').css({backgroundSize: pageWidth + 'px auto'});
}

$(document).ready(function(){ stretchBg(640, 480); });   // Page load
$(window).resize(function(){  stretchBg(640, 480); });   // Browser resize 
```

[JSFiddle Demo](http://jsfiddle.net/Matt_Coughlin/6Ctf7/)   （和[独立版本](http://jsfiddle.net/Matt_Coughlin/6Ctf7/show)的演示）

为了保持纵横比，图像的原生宽度和高度被传递给上述函数，以及可选的第三个参数，用于 bg 图像是否应该覆盖或包含页面（默认为封面）。

或者，这里有一个[更高级的演示](http://jsfiddle.net/Matt_Coughlin/YYym9/1/)（和[独立版本](http://jsfiddle.net/Matt_Coughlin/YYym9/1/show)），它会自动检测当前应用于 body 标签的 bg 图像的原始分辨率。下面是一个使用它的例子：

```
$(document).ready(function(){
    FullBodyBackground.init({contain: false});
}); 
```

# gnupg - 使用 gpgme 从服务器导入密钥

> ID：16222195
> 
> 赞同：4
> 
> 时间：2013-04-25T18:36:14.333
> 
> 标签：gnupg, gpgme

我正在尝试使用 GPGME 从密钥服务器导入密钥。我确定密钥存在，因为当我使用浏览器访问服务器时可以看到它。我按照手册制作了这个：

```
gpgme_key_t key;
gpgme_keylist_mode_t mode = gpgme_get_keylist_mode(ctx);
mode &= ~GPGME_KEYLIST_MODE_LOCAL;
mode |= GPGME_KEYLIST_MODE_EXTERN;

err = gpgme_set_keylist_mode(ctx, mode);    
err = gpgme_get_key(ctx, id, &key, 0); 
```

开始配置keyring目录：

```
gpgme_set_engine_info(GPGME_PROTOCOL_OpenPGP, NULL, KeyringDir); 
```

该目录包含一个 gpg.conf 文件，其中包含指定服务器 URL 的“keyserver”条目。全局 gpg.conf 也具有相同的指令和相同的 URL。

问题是导入失败并出现错误“文件结束”，这意味着“未找到”。我传递的 id 有 8 个以 0x 开头的字符，因为我听说不同格式可能存在问题。浏览此站点时，我发现此相关问题[search for a public key on a keyserver with GPGME](https://stackoverflow.com/questions/13870240/search-for-a-public-key-on-a-keyserver-with-gpgme/13921186#13921186)但是我不确定应该如何使用这些功能，并且它们没有出现在手册中。

谢谢您的帮助。

# c# - .Net 聊天室哈希 (eStreamChat)

> ID：16222197
> 
> 赞同：0
> 
> 时间：2013-04-25T18:36:20.867
> 
> 标签：c#, .net, hash, chat, sha

我有一个特定于[eStreamChat](http://www.estreamchat.com/ "eStreamChat")（.Net 的开源聊天室）的问题。他们网站上的文档或在线示例似乎没有太多内容，因此如果有人可以提供帮助，那就太好了。我认为问题出在我的哈希上。

到目前为止，我已经成功地下载并导入了该项目并设置了一个虚拟 IIS 目录，以便我可以在自己的应用程序中使用它。我在我自己的一个网页上创建了一个链接，将我带到他们的`ChatRoom.aspx`网页。将我带到那里的链接采用所需的格式，例如：

```
http://localhost:10833/eStreamChat/ChatRoom.aspx?id=lowens&timestamp=130425080917&hash=eb9fa849033cbf7b967ba472efb46363903f96dc 
```

页面加载完毕，我可以看到聊天室，但弹出以下错误消息：无法加入聊天室！哈希无效！

为了做到这一点，我已按照[此页面上的说明进行操作：](https://estreamchat.estreamdesk.com/forums/43879/topics/18421 "这一页")

我不明白的唯一一行是：**您可以从 web.config 文件配置密钥，**所以如果有人可以解释我应该在 web.config 中做什么，它可能会有所帮助。

抛出的错误来自`RemoteAuthUserProvider.cs`. 这是代码：

```
NameValueCollection hrefParams = HttpUtility.ParseQueryString(hrefUri.Query);

var calculatedHash = Miscellaneous.CalculateChatAuthHash(hrefParams["id"] ?? String.Empty,
                hrefParams["target"] ?? String.Empty, hrefParams["timestamp"]);

if (hrefParams["hash"] != calculatedHash)
{
    throw new SecurityException("Hash is invalid!");
} 
```

调试后：

`hrefParams["hash"]`是“eb9fa849033cbf7b967ba472efb46363903f96dc”这是

`calculatedHash`是“5129cf1cf65350a387ce53a2b0d31c960f9d96d3”

那么为什么那个哈希值不一样呢？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:00:28.217

在 appSettings 的 Web.config 中，需要一个值：

```
<appSettings> 
    <add key="AuthSecretKey" value="ENTER A VALUE HERE"/>
</appSettings> 
```

这个值需要和网站提供的click方法中的secretKey匹配，这样hash才能匹配。

# linq - 使用 Linq 根据子对象属性最小值选择和更新

> ID：16222201
> 
> 赞同：2
> 
> 时间：2013-04-25T18:36:34.350
> 
> 标签：linq, c#-4.0

我有一个类型供应商，它有一个属性 SupplierId 和另一个属性 NearestLocation，它是一个类型 SupplierLocation，SupplierLocation 由属性 SupplierId 和 DistanceFromDevice

```
class Supplier
{
    public int SupplierId { get; set; }
    public SupplierLocation NearestLocation { get; set; }
}

class SupplierLocation
{
    public int SupplierId { get; set; }
    public decimal DistanceFromDevice { get; set; }
    public double Longitude { get; set; }
    public double Latitude {get; set;}
} 
```

我有一个供应商可以拥有多个位置的所有供应商位置的列表。我还计算了每个位置的 DistanceFromDevice 属性。我有一个列表，其 ID 可以在 SupplierLocations 列表中找到。

我想使用 linq 将我的供应商通过 SupplierId 加入到 SupplierLocation 并使用具有该特定供应商的所有位置的最小 DistanceFromDevice 值的 Location 填充 Supplier 类的 NearestLocation 属性。

希望这是有道理的。这可以使用linq完成吗？

提前谢谢了。保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:22:49.370

那么，您想设置等于一的`NearestLocation`位置`Supplier`吗？`SupplierId``List<SupplierLocation>`

假设您有一个`List<SupplierLocation>`名为“Locations”并且“currentSupplier”是`Supplier`您要分配的 NearestLocation：

```
try
{

    var minForSupplier = Locations.Where(x => x.SupplierId == currentSupplier.SupplierId).Min(x => x.DistanceFromDevice);

    currentSupplier.NearestLocation = Locations.Where(x => x.SupplierId == currentSupplier.SupplierId && x.DistanceFromDevice == minForSupplier).Single();
}
catch(InvalidOperationException e)
{
    // There is more than one SupplierLocation
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:48:25.047

这是 LINQPad 中的一个工作示例

```
void Main()
{
    var suppliers = new List<Supplier> 
    {
        new Supplier() {SupplierId = 1},
        new Supplier() {SupplierId = 2},
        new Supplier() {SupplierId = 5}
    };      

    var locations = new List<SupplierLocation>
    {
        new SupplierLocation {SupplierId = 1, DistanceFromDevice = 10, Latitude = 1, Longitude = 2},
        new SupplierLocation {SupplierId = 1, DistanceFromDevice = 20, Latitude = 1, Longitude = 3},
        new SupplierLocation {SupplierId = 1, DistanceFromDevice = 30, Latitude = 1, Longitude = 4},
        new SupplierLocation {SupplierId = 1, DistanceFromDevice = 40, Latitude = 1, Longitude = 5},
        new SupplierLocation {SupplierId = 2, DistanceFromDevice = 10, Latitude = 2, Longitude = 2},
        new SupplierLocation {SupplierId = 2, DistanceFromDevice = 20, Latitude = 2, Longitude = 3},
        new SupplierLocation {SupplierId = 3, DistanceFromDevice = 10, Latitude = 3, Longitude = 2}
    };

    var result = from s in suppliers
        join l in locations on s.SupplierId equals l.SupplierId
        into grp
        where grp.Count() > 0
        select new Supplier() { SupplierId = s.SupplierId, NearestLocation = grp.OrderBy (g => g.DistanceFromDevice).First()};

    result.Dump();
}

class Supplier
{
    public int SupplierId { get; set; }
    public SupplierLocation NearestLocation{ get; set; }
}

class SupplierLocation
{ 
    public int SupplierId { get ;set; }
    public decimal DistanceFromDevice  { get; set; }
    public double Longitude { get; set; }
    public double Latitude {get; set;}  
} 
```

# java - Java StAX 解析器中的编码

> ID：16222202
> 
> 赞同：1
> 
> 时间：2013-04-25T18:36:33.747
> 
> 标签：java, xml, encoding, stax

我正在使用 StAX 读取 XML 文件，但遇到像 žćčšđ 这样的字符问题。代码与 SAX 中的代码几乎相同，但我没有那种问题。

这是 xml 文档的一部分

```
<?xml version = "1.0" encoding="UTF-8" ?>      
<Autor>
        <Id>1</Id>
        <Meno>Jano Žiška</Meno>
        <Email>dfdsfsfdsdf@gmail.com</Email>
        <tel_cislo typ="mobil">0944564685</tel_cislo>  
        <plat>500</plat>
      </Autor> 
```

爪哇

```
 public static void main(String[] args) {
            try {
              XMLInputFactory f = XMLInputFactory.newInstance();
              XMLStreamReader r = f.createXMLStreamReader(new FileReader(SUBOR));
            }
....
          if (r.getLocalName().equals(ELEMENT_MENO) == true) {
            String v = r.getElementText();
             System.out.println("meno:\t\t\t " + v);
          } 
```

如何在java中指定编码？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:33:58.917

除非您有充分的*理由*，否则您应该始终使用带有 XML 的*二进制*流（InputStream/OutputStream），而不是字符流（Reader/Writer）。使用字符流有损坏 xml 的风险（如 OP 的原始代码所示）。

```
XMLStreamReader r = f.createXMLStreamReader(new FileInputStream( SUBOR )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:42:00.247

不要使用 FileReader，而是这样做：

```
XMLStreamReader r = f.createXMLStreamReader(
        new InputStreamReader(
                new FileInputStream( SUBOR ),
                Charset.forName( "UTF8" ) ) ); 
```

# forms - 将 Applicative Form 迁移到 Monadic - 获取当前时间戳

> ID：16222203
> 
> 赞同：3
> 
> 时间：2013-04-25T18:36:44.863
> 
> 标签：forms, haskell, yesod

我有一个有效的应用程序表单，但我想添加一个与模型中的任何字段都不对应的 textField。除了一个字段外，一切正常。我的模型的一部分是表示上传时间戳的 UTCTime 值。使用申请表格，我有以下代码：

```
-- some stuff
<*> aformM (liftIO getCurrentTime)
-- more stuff 
```

而且我似乎找不到与 aformM 等效的单子形式。我尝试了以下方法：

```
(timeRes, timeView) <- mformM (liftIO getCurrentTime) 
```

希望一元形式有一个等效的函数，类似于我们拥有 areq/mreq、aopt/mopt 等，但我的代码无法编译。所以，我的问题是：有没有办法使用单子形式获取当前时间戳？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T11:46:32.943

通常不需要显示更新时间戳，因此在 MForm monad 中，您只需选择值并将其添加到应用结果中。

```
 currentTime <- liftIO getCurrentTime

   (field1_Res, field1_View) <- mreq ...

   let  myRecord_Res = MyRecord <$> pure currentTime <*> field1_Res <*> field2_Res <*> ... 
```

# jquery - jQuery 多选

> ID：16222204
> 
> 赞同：0
> 
> 时间：2013-04-25T18:36:45.587
> 
> 标签：jquery, multi-select

我试图在这个“Filterable jQuery Portfolio”中选择多个类别。Currently the widget is functional and correctly sorts when one item is selected. 我正在尝试选择多个类别，然后过滤项目。

这是一个示例图像

[jQuery 图像示例](http://i.imgur.com/X0hFfUj.jpg)

这是jQuery代码，我不确定是否使用“MultiSelect”以及放置它的位置。

```
 jQuery('document').ready(function() {
// PORTFOLIO SORTING
jQuery('div.nimble-portfolio-filter ul li a').click(function() {
    jQuery(this).css('outline','none');
    jQuery('div.nimble-portfolio-filter ul .current').removeClass('current');
    jQuery(this).parent().addClass('current');
    var filterVal = jQuery(this).attr('rel');
    if(filterVal == 'all') {
        jQuery('div.nimble-portfolio ul li.hidden').fadeIn('normal').removeClass('hidden');
    } else {
        jQuery('div.nimble-portfolio ul li').each(function() {
            if(!jQuery(this).hasClass(filterVal)) {
                jQuery(this).fadeOut('normal').addClass('hidden');

            } else {
                jQuery(this).fadeIn('normal').removeClass('hidden');
            }
        });
    } 
```

这是[演示的链接](http://www.nimble3.com/portfolio/)

# hadoop - 在 reudcer 类中使用全局变量

> ID：16222205
> 
> 赞同：2
> 
> 时间：2013-04-25T18:36:47.213
> 
> 标签：hadoop, mapreduce, global-variables, hdfs, reduce

我需要在我的 mapreduce 程序中使用全局变量，如何在下面的代码中设置它并在 reducer 中使用全局变量。

```
public class tfidf
{
  public static tfidfMap..............
  {
  }
  public static tfidfReduce.............
  {
  }
  public static void main(String args[])
  {
       Configuration conf=new Configuration();
       conf.set("","");
  } 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T23:01:51.413

模板代码可能看起来像这样（Reducer 未显示，但主体相同）

```
import java.io.IOException;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.conf.Configured;
import org.apache.hadoop.io.LongWritable;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.Mapper.Context;
import org.apache.hadoop.util.Tool;
import org.apache.hadoop.util.ToolRunner;

public class ToolExample extends Configured implements Tool {

    @Override
    public int run(String[] args) throws Exception {
        Job job = new Job(getConf());
        Configuration conf = job.getConfiguration();

        conf.set("strProp", "value");
        conf.setInt("intProp", 123);
        conf.setBoolean("boolProp", true);

        // rest of your config here
        // ..

        return job.waitForCompletion(true) ? 0 : 1;
    }

    public static class MyMapper extends
            Mapper<LongWritable, Text, LongWritable, Text> {
        private String strProp;
        private int intProp;
        private boolean boolProp;

        @Override
        protected void setup(Context context) throws IOException,
                InterruptedException {
            Configuration conf = context.getConfiguration();

            strProp = conf.get("strProp");
            intProp = conf.getInt("intProp", -1);
            boolProp = conf.getBoolean("boolProp", false);
        }
    }

    public static void main(String args[]) throws Exception {
        System.exit(ToolRunner.run(new ToolExample(), args));
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-26T01:20:54.790

在集群（本地除外）环境中，如果 map/reduce 程序是用 Java 编写的（其他语言的单独进程），则 MapReduce 程序将运行其自己的 JVM。有了这个，你就不能实现在一个类中声明一个静态变量和值，并在 MapReduce 流程中一路改变，并期望另一个 JVM 中的值。共享对象是您所需要的，以便 mapper/reduce 可以设置和获取值。

实现这一目标的方法很少。

1.  正如 Chris 所提到的，使用 Configuration set()/get() 方法将值传递给 mapper 和/或 reducer。在这种情况下，您必须在创建作业之前将值设置为配置对象。

2.  使用 HDFS 文件写入数据并从 mapper/reducer 中读取数据。记得清理上面创建的 HDFS 文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-29T13:01:19.057

Hadoop 计数器（用户定义）是另一种全局变量。作业完成后可以查看这些值。例如：如果您想计算输入中错误/良好记录的数量（由各种映射器/减速器处理），您可以使用计数器。@Mo：您可以根据需要使用计数器

# php - mod_rewrite 和条件 - 查询字符串上的“if”

> ID：16222207
> 
> 赞同：2
> 
> 时间：2013-04-25T18:36:50.387
> 
> 标签：php, mod-rewrite

我是新手，但最近几天一直在研究 .htaccess mod_rewrite ，我终于开始了解它了。我想知道是否可以进行简单检查以查看查询字符串是否等于特定内容..例如：

```
#First check
RewriteCond $1 !^(img|font|js|css|scripts) [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l

#if $2 is upgrade, use this ReWrite
RewriteCond %{QUERY_STRING} $2=upgrade
RewriteRule ^([^/\.]+)/([^/\.]+)/?$ index.php?page=$1&subpage=upgrade&tool=$2 [QSA,L]

#If not found... Use this regular ReWrite
RewriteCond $1 !^(img|font|js|css|scripts) [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^([^/\.]+)/([^/\.]+)/?$ index.php?page=$1&user=$2 [QSA,L] 
```

我已经搜索了条件等，但没有任何关于编写这样一个语句的可能性的“是或否”，尽管我发现了类似的方面（[在此处的 stackoverflow 上找到](https://stackoverflow.com/questions/13066142/htaccess-redirect-if-query-string-variable-present)），例如：

```
RewriteCond %{QUERY_STRING} (^|&)user=upgrade(&|$) [NC]
RewriteRule ^([^/\.]+)/([^/\.]+)/?$ index.php?page=$1&user=upgrade&tool=$2 [L] 
```

无法让它工作。

# ios - 核心数据自定义迁移

> ID：16222211
> 
> 赞同：9
> 
> 时间：2013-04-25T18:37:05.920
> 
> 标签：ios, objective-c, core-data, core-data-migration

我的旧核心数据模型有一个`NSDate`字段，我想将其更改为`NSNumber`. 我在 SO 和其他博客上阅读了 Apple 文档和几个类似的问题（请参阅问题末尾的参考资料）

但无论我做什么，我都会收到同样的错误：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“映射与源/目标模型不匹配”

我只有 2 个版本的模型，并且我已经一次又一次地验证源模型和目标模型是正确的。

我什至放弃了所有更改并重新创建了一个新模型、映射和实体（`NSManagedObject`子类）。我已经坚持了将近 2 天了，并且不知道我在做什么。任何关于我做错了什么的指针都将不胜感激。

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {
    if (_persistentStoreCoordinator != nil) {
        return _persistentStoreCoordinator; 
    }

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"Old.sqlite"];

    NSError *error = nil;
    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

    NSString *sourceStoreType = NSSQLiteStoreType;
    NSURL *sourceStoreURL = storeURL;

    NSURL *destinationStoreURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"New.sqlite"];
    NSString *destinationStoreType = NSSQLiteStoreType;
    NSDictionary *destinationStoreOptions = nil;

    NSDictionary *sourceMetadata =
    [NSPersistentStoreCoordinator metadataForPersistentStoreOfType:sourceStoreType
                                                               URL:sourceStoreURL
                                                             error:&error];

    if (sourceMetadata == nil) {
        NSLog(@"source metadata is nil");
    }

    NSManagedObjectModel *destinationModel = [_persistentStoreCoordinator managedObjectModel];
    BOOL pscCompatibile = [destinationModel
                           isConfiguration:nil
                           compatibleWithStoreMetadata:sourceMetadata];

    if (pscCompatibile) {
        // no need to migrate
        NSLog(@"is compatible");
    } else {
        NSLog(@"is not compatible");

        NSManagedObjectModel *sourceModel =
        [NSManagedObjectModel mergedModelFromBundles:nil
                                    forStoreMetadata:sourceMetadata];

        if (sourceModel != nil) {
            NSLog(@"source model is not nil");

            NSMigrationManager *migrationManager =
            [[NSMigrationManager alloc] initWithSourceModel:sourceModel
                                           destinationModel:destinationModel];

            NSURL *fileURL = [[NSBundle mainBundle] URLForResource:@"MyMigrationMapping" withExtension:@"cdm"];
            NSMappingModel *mappingModel = [[NSMappingModel alloc] initWithContentsOfURL:fileURL];

            NSArray *newEntityMappings = [NSArray arrayWithArray:mappingModel.entityMappings];
            for (NSEntityMapping *entityMapping in newEntityMappings) {
                entityMapping.entityMigrationPolicyClassName = NSStringFromClass([ConvertDateToNumberTransformationPolicy class]);
            }
            mappingModel.entityMappings = newEntityMappings;

            BOOL ok = [migrationManager migrateStoreFromURL:sourceStoreURL
                                                       type:sourceStoreType
                                                    options:nil
                                           withMappingModel:mappingModel
                                           toDestinationURL:destinationStoreURL
                                            destinationType:destinationStoreType
                                         destinationOptions:nil
                                                      error:&error];

            if (ok) {
                storeURL = destinationStoreURL;
            }
        } else {
            NSLog(@"e nil source model");
        }
    }

    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                             [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                             [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption,
                             nil];

    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }    

    return _persistentStoreCoordinator;
} 
```

我的自定义`NSEntityMigration`类：

```
 - (BOOL)createDestinationInstancesForSourceInstance:(NSManagedObject *)sInstance
                                      entityMapping:(NSEntityMapping *)mapping
                                            manager:(NSMigrationManager *)manager
                                              error:(NSError **)error
{
    // Create a new object for the model context
    NSManagedObject *newObject =
    [NSEntityDescription insertNewObjectForEntityForName:[mapping destinationEntityName]
                                  inManagedObjectContext:[manager destinationContext]];

    NSArray *arrayOfKeys = @[@"startDate", @"endDate", @"creationTime", @"timeStamp"];

    for (NSString *key in arrayOfKeys) {
        // do our transfer of NSDate to NSNumber
        NSDate *date = [sInstance valueForKey:key];
        NSLog(@"Key: %@, value: %@", key, [date description]);

        // set the value for our new object
        [newObject setValue:[NSNumber numberWithDouble:[date timeIntervalSince1970]] forKey:key];
    }

    // do the coupling of old and new
    [manager associateSourceInstance:sInstance withDestinationInstance:newObject forEntityMapping:mapping];

    return YES;
} 
```

一些参考资料：

1.  [多遍核心数据迁移的示例或解释？](https://stackoverflow.com/questions/5995231/example-or-explanation-of-core-data-migration-with-multiple-passes)
2.  [核心数据 - 默认迁移（手动）](https://stackoverflow.com/questions/9170064/core-data-default-migration-manual)
3.  [http://www.preenandprune.com/cocoamondo/?p=468](http://www.preenandprune.com/cocoamondo/?p=468)
4.  [http://www.timisted.net/blog/archive/core-data-migration/](http://www.timisted.net/blog/archive/core-data-migration/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T11:32:20.983

我承认我不明白错误的原因。在我的迁移中，每个实体都有一个策略，并且在使用它之前我正在检查实体。不确定这个额外的`if`内容是否会对您有所帮助：

```
- (BOOL)createDestinationInstancesForSourceInstance:(NSManagedObject *)sInstance
                                  entityMapping:(NSEntityMapping *)mapping
                                        manager:(NSMigrationManager *)manager
                                          error:(NSError **)error {

    NSEntityDescription *sourceInstanceEntity = [sInstance entity];
   if ([[sInstance name] isEqualToString:@"<-name-of-entity>"] ) {
       newObject = [NSEntityDescription insertNewObjectForEntityForName:@"<-name-of-entity>"
                       inManagedObjectContext:[manager destinationContext]];
       NSArray *arrayOfKeys = @[@"startDate", @"endDate", @"creationTime", @"timeStamp"];

      for (NSString *key in arrayOfKeys) {
           // do our transfer of NSDate to NSNumber
           NSDate *date = [sInstance valueForKey:key];
           NSLog(@"Key: %@, value: %@", key, [date description]);

          // set the value for our new object
          [newObject setValue:[NSNumber numberWithDouble:[date timeIntervalSince1970]] forKey:key];
      }
   }

// do the coupling of old and new
[manager associateSourceInstance:sInstance withDestinationInstance:newObject forEntityMapping:mapping];

return YES; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-09T08:24:22.947

你所做的一切都比它必须的复杂得多。您可以在完全不迁移数据库的情况下完成所有这些操作。您可以向实现它的子类添加另一个属性：

```
///in your .h
@property(nonatomic, copy) NSNumber* startDateNumber
/// in you .m
-(NSNumber*) startDateNumber{
    if (self.startDate) {
        return @(self.startDate.timeIntervalSince1970);
    }
    return nil;
}
-(void)setStartDateNumber:(NSNumber*)startDateNumber{
    if(startDateNumber){
        self.startDate =[NSDate dateWithTimeIntervalSince1970:startDateNumber.doubleValue];
    }else{
        self.startDate = nil;
    }
} 
```

有重复的属性 (`startDate`和`startDateNumber`) 有点烦人，但它要简单得多，并且没有任何迁移问题。

# xslt - XSLT：合并文件，但过程性能更好

> ID：16222218
> 
> 赞同：0
> 
> 时间：2013-04-25T18:37:20.647
> 
> 标签：xslt, xslt-2.0, xslt-grouping

我有两个 XML 文件并希望合并，合并的标准如下：

nodes1.xml 文件内容：

```
<nodes>
  <node>
    <type>a</type>
    <name>joe</name>
  </node>
  <node>
    <type>b</type>
    <name>sam</name>
  </node>
  <node>
    <type>c</type>
    <name>pez</name>
  </node>
  <node>
    <type>g</type>
    <name>lua</name>
  </node>
  <node>
    <type>a</type>
    <name>tol</name>
  </node>
  <node>
    <type>c</type>
    <name>jua</name>
  </node>
</nodes> 
```

nodes2.xml 文件内容：

```
<nodes>
  <node>
    <type>a</type>
    <name>jill</name>
  </node>
  <node>
    <type>c</type>
    <name>imol</name>
  </node>
  <node>
    <type>h</type>
    <name>teli</name>
  </node>
  <node>
    <type>f</type>
    <name>jopp</name>
  </node>
  <node>
    <type>c</type>
    <name>zolh</name>
  </node>
</nodes> 
```

通过我的 xsl 模板，我得到：

```
<?xml version="1.0" encoding="UTF-8"?>
<nodes>
  <node tipo="a">
    <name>joe</name>
    <name>tol</name>
    <name>jill</name>
  </node>
  <node tipo="c">
    <name>pez</name>
    <name>jua</name>
    <name>imol</name>
    <name>zolh</name>
  </node>
  <node tipo="h">
    <name>teli</name>
  </node>
  <node tipo="f">
    <name>jopp</name>
  </node>
</nodes> 
```

我需要一个解决方案来获得更好的性能。我目前的解决方案是：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:variable name="Source2" select="document('nodes2.xml')/nodes/node"/>
  <xsl:variable name="Source1" select="document('nodes1.xml')/nodes/node"/>
  <xsl:template match="/nodes" >
    <nodes>
      <xsl:for-each-group select="node" group-by="type">
        <node tipo="{type}">
          <xsl:apply-templates select="$Source1[type=current-grouping-key()]/name"/>
          <xsl:apply-templates select="$Source2[type=current-grouping-key()]/name"/>
        </node>
      </xsl:for-each-group>
    </nodes>
  </xsl:template>

  <xsl:template match="name">
    <name><xsl:value-of select="."/></name>
  </xsl:template>
</xsl:stylesheet> 
```

我用 java saxon 运行它：

```
$ java net.sf.saxon.Transform nodes2.xml mysolution.xsl 
```

我认为将输入文件同时放在一个变量中是“一种耻辱”，但我想不出有什么不同的做法。

我感谢帮助或指针。

——保利诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T08:56:06.473

假设您将第二个文件作为 XSLT 代码的主要输入，您可以使用以下内容：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:param name="source1-uri" select="'nodes1.xml'"/>
  <xsl:variable name="doc1" select="doc($source1-uri)"/>

  <xsl:key name="by-type" match="nodes/node" use="type"/>

  <xsl:template match="/nodes" >
    <nodes>
      <xsl:for-each-group select="key('by-type', node/type, $doc1), node" group-by="type">
        <node tipo="{current-grouping-key()}">
          <xsl:copy-of select="for $n in current-group() return $n/name"/>
        </node>
      </xsl:for-each-group>
    </nodes>
  </xsl:template>

</xsl:stylesheet> 
```

我不确定合并`name`元素的顺序是否对您很重要，但为了确保使用 Saxon 9.5 我得到您在结果示例中发布的顺序，我不得不使用`<xsl:copy-of select="for $n in current-group() return $n/name"/>`而不是更短更常用的顺序`<xsl:copy-of select="current-group()/name"/>`。

因此，该解决方案应该更有效，主要是通过对所有 input 进行分组`node`，当然然后只需使用 of`current-group()`而不是再次使用谓词选择节点。

# php - YouTube 嵌入，来自数据库查询的 URL

> ID：16222221
> 
> 赞同：-1
> 
> 时间：2013-04-25T18:37:29.027
> 
> 标签：php, html, mysql

我想使用用户在其个人资料中放置的 URL 显示 youtube 嵌入。

如果数据库中的 URL 是[http://youtube.com/embed/URL ，它可以正常工作](http://youtube.com/embed/URL)

我希望用户能够只输入一个常规 URL（[http://youtube.com/URL](http://youtube.com/URL)因为我希望它对他们来说很容易。

有没有办法解决这个问题？

非常感谢您的帮助，我对此很陌生！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:45:24.663

尝试复制并粘贴它，看看它是否有效：

```
echo '<br>';
echo '<iframe width="560" height="315" src="' . stripslashes($row['videourl']) . '" frameborder="0" allowfullscreen></iframe>'; 
```

如果由于输入 URL 的人没有放在`embed`他们的链接中而没有显示它，那么我建议的只是让该人输入视频的 ID，然后您创建 URL 的其余部分。

例如，如果用户想要发布的视频的 URL 是，`https://www.youtube.com/watch?v=0TL5CSPFzTU`那么他们只需输入`0TL5CSPFzTU`，您就可以这样输出代码：

```
echo '<iframe width="560" height="315" src="https://www.youtube.com/embed/' . stripslashes($row['videourl']) . '" frameborder="0" allowfullscreen></iframe>'; 
```

您必须设置一些东西来阻止他们输入完整的 URL，或者除了 ID 之外的任何东西，但是有很多教程可以实现这一点。

# c++ - BOOST_TEST_PASSPOINT 有什么作用？

> ID：16222222
> 
> 赞同：1
> 
> 时间：2013-04-25T18:37:30.450
> 
> 标签：c++, boost-unit-test-framework

谁能告诉我它的功能`BOOST_TEST_PASSPOINT`是什么？[官方文档](http://www.boost.org/doc/libs/1_53_0/libs/test/doc/html/utf/user-guide/test-output/BOOST_TEST_PASSPOINT.html)链接到错误的页面，并且在[过去四年中一直存在](https://svn.boost.org/trac/boost/ticket/3392)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:54:20.680

哎呀！奇怪的是，文档很难修复。

该宏`BOOST_TEST_PASSPOINT()`是一个无参数的等价于[`BOOST_TEST_CHECKPOINT()`](http://www.boost.org/doc/libs/1_40_0/libs/test/doc/html/utf/user-guide/test-output/BOOST_TEST_CHECKPOINT.html).

如果发生测试错误，将打印最后一个检查点的行。

# database - 用于预填充 SQL CE 数据库的工具

> ID：16222232
> 
> 赞同：0
> 
> 时间：2013-04-25T18:37:51.937
> 
> 标签：database, windows-phone-8, sql-server-ce

`LINQ to SQL`最近开始了一个用作数据层的 WP8 项目。我已经完成了所需域类的建模，并希望在模拟器上填充我的测试数据库。我现在设法下载了创建的`SDF`文件（*ISETool.exe*）我的问题：如何打开这个文件？是否有一些 GUI 工具来读/写这个 SQL CE 数据库？

我正在使用`Visual Studio 2012 Express for Windows Phone`- 如果需要此信息。

任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:16:15.100

您可以使用我的 SQL Server Compact Toolbox，支持从 csv 和 SQL Server 导入。有关演练，请参阅我的博客。

# javascript - Facebook 不再抓取 apps.facebook.com

> ID：16222236
> 
> 赞同：0
> 
> 时间：2013-04-25T18:38:29.497
> 
> 标签：javascript, facebook, graph, facebook-canvas

我曾经能够将“apps.facebook.com/my_app”之类的链接发布到我的业务页面，并使用位于我的画布页面根目录中的 og: 标签创建帖子。此页面重定向到页面选项卡 (www.facebook.com/my_page/sk=app_12345678)。一切正常。

几天以来，这不再起作用：它仍然重定向，但不包含图像。

此外，URL linter 现在拒绝 lint 任何 'apps.facebook.com' URL。说：

> 此调试器无法抓取 Facebook URL。试试你自己的。

有没有其他人看过这个？这是新事物吗？有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T16:31:11.510

好吧，似乎只是另一个暂时的 Facebook 故障......再次工作！

# asp.net - 在 ListView Eval 调用的结果上调用函数

> ID：16222237
> 
> 赞同：1
> 
> 时间：2013-04-25T18:38:36.783
> 
> 标签：asp.net, html, listview, eval

我的页面中有一个列表视图，我想显示一些统计信息，我的 Restaurant 类有一个 Reservations 属性`public List<Reservation> Reservations { get; private set; }`，在我的 ListView 中，我想显示预订数量，但没有创建像“ReservationsCount”这样的新属性，没有什么比这`<%#Eval("Reservations")%>.Count`不起作用

```
<td id="Td10" runat="server">
    <%#Eval("Reservations")%>
</td> 
```

结果`<%#Eval("Reservations")%>`在 aspx 页面中被视为对象，而不是餐厅列表，我真的不知道为什么，我只是从 asp.net 开始，所以请帮忙，也许解决方案非常简单:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:45:36.487

尝试在:`count()`之后直接应用`Eval()`

```
<%# ((List<Reservation>)Eval("Reservations")).Count() %> 
```

据我所知，您需要参考`System.Linq`才能使其正常工作。没有`Linq`你可以尝试使用的`Count`属性`List<T>`：

```
<%# ((List<Reservation>)Eval("Reservations")).Count %> 
```

# python - 从 python 中的 sqlite 调用仅 1 个单元格中的数据

> ID：16222240
> 
> 赞同：2
> 
> 时间：2013-04-25T18:38:43.057
> 
> 标签：python, sql, sqlite

我的问题基本上是双重的。首先，我有一个使用 SQlite 的数据库，我使用 Python 运行它。

我的数据库是：

```
CREATE TABLE cards (id integer primary key autoincrement not null, ref text unique
check(ref!=''), name text, description text, quantity integer default 0, cat1 text,
cat2 text);

INSERT INTO "cards" VALUES(1,'lx247','green door',NULL,20,'abstract','');
INSERT INTO "cards" VALUES(2,'lxx247','green door',NULL,20,'abstract','');
INSERT INTO "cards" VALUES(3,'lxx2f47','green door',NULL,20,'abstract',''); 
```

我正在运行以下 python 代码：

```
import sqlite3 as lite
import sys
con = lite.connect('cards.db')
idn = raw_input("Enter your ID number")
with con:
    cur=con.cursor()
    cur.execute("SELECT quantity FROM cards WHERE ref=?", idn)  
    print "Quantity" + str(cur.fetchone()) 
```

首先，当我执行此脚本并在提示符中输入“lx247”时，我收到以下错误消息：

```
Enter your ID numberlx247
Traceback (most recent call last):
  File "test1.py", line 7, in <module>
    cur.execute("SELECT quantity FROM cards WHERE ref=?", idn)  
sqlite3.ProgrammingError: Incorrect number of bindings supplied. 
The current statement uses 1, and there are 5 supplied. 
```

我已经确定它所指的 5 是我在 idn 输入 (lx247) 中输入的字符数。如果我换行：

```
cur.execute("SELECT quantity FROM cards WHERE ref=?", idn) 
```

至

```
cur.execute("SELECT quantity FROM cards WHERE id=?", idn) 
```

并在提示符处输入'2'，它返回：

```
Enter your ID number2
Quantity(20,) 
```

所以这告诉我它处理 idn 参数以查找 ref 列的方式有问题。所以我的第一个问题是**如何让它在 ref 列中查找我在 idn 中输入的值**？

第二个问数据库中的条目为 20+x，所以我希望在 python 中创建一个变量，它是某个参考条目的数量列的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:40:00.803

您需要传入*一系列*参数，使其成为具有一个元素的元组：

```
cur.execute("SELECT quantity FROM cards WHERE ref=?", (idn,)) 
```

Python 字符串也是序列，所以如果`idn`是 5 个字符的字符串，python 会看到一个长度为 5 的序列。

数据库总是返回多*行列*，即使是只有一列的结果。行本质上是一个 Python 元组，一个序列。这与您的参数问题相同`idn`，但相反。通过索引从结果行中取出一列：

```
print "Quantity " + str(cur.fetchone()[0]) 
```

示例数据库的快速演示：

```
>>> import sqlite3
>>> con = sqlite3.connect(':memory:')
>>> con.executescript('''\
... CREATE TABLE cards (id integer primary key autoincrement not null, ref text unique
... check(ref!=''), name text, description text, quantity integer default 0, cat1 text,
... cat2 text);
... 
... INSERT INTO "cards" VALUES(1,'lx247','green door',NULL,20,'abstract','');
... INSERT INTO "cards" VALUES(2,'lxx247','green door',NULL,20,'abstract','');
... INSERT INTO "cards" VALUES(3,'lxx2f47','green door',NULL,20,'abstract','');
... ''')
<sqlite3.Cursor object at 0x10ad66ab0>
>>> idn = 'lx247'
>>> cur=con.cursor()
>>> cur.execute("SELECT quantity FROM cards WHERE ref=?", (idn,))
<sqlite3.Cursor object at 0x10ad66b20>
>>> print "Quantity " + str(cur.fetchone()[0])
Quantity 20 
```

# c - 为什么C程序二维数组第二行替换第一行

> ID：16222241
> 
> 赞同：-2
> 
> 时间：2013-04-25T18:38:45.560
> 
> 标签：c, arrays, multidimensional-array

我首先将 buf 传递给数组是 schArray[i][0] = buf;

例如我需要 `buf`进入`schArray`

```
ABCDEFG to [0][0] 

1234567 to [1][0] 
```

但我不能做这个结果

我的结果第二行替换第一行

```
Time 1:  [0][0]  = ABCDEFG
         [1][0]  = null

Time 2 :[0][0]  = 1234567
        [1][0]  = 1234567 
```

替换 [0][0]

```
char ***schArray;

int q,k;

schArray = (char***)malloc(sizeof(char*)*1000);
for(q = 0; q < 1000; q++){

    schArray[q] = (char**)malloc(sizeof(char)*100);

    for(k = 0; k < 1000; k++){
        schArray[q][k] = (char*)malloc(sizeof(char)*100);
    }
}

while(strncmp(buf, KEYWORD_endP,KEYWORD_PS_SZ)!=0){
  schArray[commandnum][0] = buf;

  printf("%s\n",schArray[0][0]);
  printf("%s\n",schArray[1][0]);
  printf("%s\n",schArray[2][0]);

  val=printCommand(buf);

  printf("child: %d\n",val);

  // printf("child:%d",val);

  memset(buf, 0, 80);

  write(cTop[i][1],&buf,80*sizeof(char));
  read(pToc[i][0],&buf,80*sizeof(char));
  commandnum++;
} 
```

预期产出

```
ABCDEFG 

1234567 
```

实际输出

```
1234567

1234567 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:32:51.053

主要问题是这一行：

```
schArray[commandnum][0] = buf; 
```

这不会复制`buf`，它会将数组元素设置为指向 的位置`buf`。所以每次你指向同一个缓冲区。

您需要使用`strcpy()`将缓冲区复制到数组元素中：

```
strcpy(schArray[commandnum][0], buf); 
```

另一个问题是您调用的循环，`malloc()`参数`sizeof`不正确。

```
schArray = malloc(sizeof(char**)*1000);
for(q = 0; q < 1000; q++){
    schArray[q] = malloc(sizeof(char*)*100);
    for(k = 0; k < 1000; k++){
        schArray[q][k] = malloc(sizeof(char)*100);
    }
} 
```

您也不需要强制转换`malloc()`. 它返回`void*`，这将根据需要自动转换（在 C 中，但不是在 C++ 中）。包括显式转换可以掩盖其他错误，例如忘记`#included`声明的`malloc()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:33:16.947

请不要将大量指针数组分配给指向字符的指针。初学 C 程序员通常一开始就习惯于使用数组。然后他们想进入更复杂的领域并开始使用二维数组。然后他们意识到他们必须将他们的东西移动到堆中，然后他们似乎无法放弃 C 数组方案而只是转向更有用的东西。

具体来说，您不需要使用 C 数组语法`myarray[3][4]`访问元素，例如访问 x=3、y=4 处的元素。是时候自己开始做数学了，让自己（和其他人）头疼不已。

```
#define MY_ARRAY_HEIGHT 1000
#define MY_ARRAY_WIDTH 1000

static inline char getElement(char *myArray, unsigned x, unsigned y) {
    return myArray[x + y * MY_ARRAY_WIDTH];
}

int main(void) {
    char *myArray = malloc (MY_ARRAY_HEIGHT * MY_ARRAY_WIDTH);

    // initialize it, etc.
    printf("element at 3,4 = %d\n", getElement(myArray, 3, 4));
    return 0;
} 
```

# c# - 获取当前模拟用户的用户名

> ID：16222242
> 
> 赞同：0
> 
> 时间：2013-04-25T18:38:51.797
> 
> 标签：c#, asp.net, impersonation

我试图在我的 asp.net c# 网站中模拟一个远程活动目录帐户，该网站托管在无域计算机（或其他域）上。我已经得到这个工作：

```
IntPtr token = IntPtr.Zero;
LogonUser( "username", "ad.some.other.domain.com", "password", LOGON_TYPE_NEW_CREDENTIALS, LOGON32_PROVIDER_WINNT50, ref token))
{
   WindowsImpersonationContext wic; 
   wic = WindowsIdentity.Impersonate(token);
   //run code under the impersonated user.

   //System.Environment.UserName returns windows user (not impersonated one)
   //WindowsIdentity.GetCurrent() returns windows user (not impersonated one)
 } 
```

我的代码运行，但我无法获得模拟用户的“用户名”。我理解这是因为我使用 LOGON_TYPE_NEW_CREDENTIALS 作为我的登录类型，从技术上讲，它不会模拟，而是使用令牌在模拟帐户下运行网络连接。这工作正常，但理想情况下，我的网站将在模拟用户下运行，因此我可以获得用户名，可能还有其他功能。基本上我想以模拟用户的身份与站点交互，而不仅仅是以模拟用户的身份运行网络连接。我已尝试将 LOGON32_LOGON_INTERACTIVE 作为登录类型，但这不允许我在我的站点上验证域帐户，该站点在非域计算机上运行。

有什么我可以做的，以便我可以完全模拟（获取用户名等）并使用来自非域计算机的活动目录进行身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:50:17.043

我不确定您使用的是哪种网站，如果您需要使用 ASP.Net 或 MVC

```
<identity impersonate="true" /> 
```

[http://msdn.microsoft.com/en-CA/library/aa292118%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-CA/library/aa292118%28v=vs.71%29.aspx)

# excel - 需要选择工作簿中的所有单元格以将所有“=”替换为“####”

> ID：16222244
> 
> 赞同：0
> 
> 时间：2013-04-25T18:39:00.397
> 
> 标签：excel, replace, cells, formulas

我需要 Excel VBA 代码来选择我的工作簿（不是工作表）中的所有单元格。有很多 Sheets("Name").Cells 但我没有看到工作簿中所有单元格的简单方法。我需要用“####”替换工作簿中单元格中的所有“=”。感谢所有的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:52:21.173

**VBA解决方案**

```
Option Explicit

Sub ReplaceAllValues()

    Dim TheSheet        As Worksheet
    Dim MatchCase       As Boolean

    For Each TheSheet In Worksheets
        TheSheet.Cells.Replace _
            What:="=", _
            Replacement:="####", _
            LookAt:=xlPart, _
            MatchCase:=False
    Next

End Sub 
```

*   Alt + F11 打开 VB 编辑器
*   菜单插入 -> 模块
*   输入您的代码
*   保存代码（启用宏的 excel）
*   按 F5（或菜单运行 -> 运行子/用户窗体）

**内置替换解决方案**

如果你想使用内置的查找和替换： ![在此处输入图像描述](https://i.stack.imgur.com/G373g.png)

> 如果您有例如*=a1+b1*并且您甚至想将其替换为 ####a1+b1 ，请记住取消选中“匹配整个单元格内容”。

# lambda - 方案 lambda 和所有程序运行

> ID：16222248
> 
> 赞同：0
> 
> 时间：2013-04-25T18:39:07.207
> 
> 标签：lambda, scheme, r5rs

尝试运行这些程序时，似乎一切都很好，直到我打电话

```
 (set! fib (mem 'memorize fib))
 (fib 10)
 (fib 10)
 (set! fib (mem 'unmemorize fib))
 (fib 4) 
```

在我将 'memorize TO ' 更改为 unmemorize 之后发生的事情是它现在都做到了

```
(define (mem mem-it func)
  (let ((table (make-table)))
    (case mem-it
      ((memoize)
       (display " --- memoize ---\n")
       (lambda (args)
         (let ((prev-com-res (lookup args table))) ;; prev-com-res = previously-computed-result
           (display " --- memoize2 ---\n")
           (or prev-com-res                            
               (let ((result (func args)))                  
                 (insert! args result table)
                 result)))))
      ((unmemoize)
       (display " --- unmemoize --- \n")
       (lambda (args)
         (let ((comp (func args)))
           comp)))
      (else
       (display " -- Unknown command! --\n"))))) 
```

我不明白我什么时候调用'unmemoize，它也进入了memoize =S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:04:09.123

The problem is that when you call `(mem 'unmemoize fib)` you are passing `fib` which you memoized in your first line!

Do this **[Sorry this 'fix' is wrong]**

```
(define (mem mem-it func)
  (let ((table (make-table))
        (original-func func))     ;; added
    (case mem-it
      ((memoize)
       (display " --- memoize ---\n")
       (lambda (args)
         (let ((prev-com-res (lookup args table))) ;; prev-com-res = previously-computed-result
           (display " --- memoize2 ---\n")
           (or prev-com-res                            
               (let ((result (func args)))                  
                 (insert! args result table)
                 result)))))
      ((unmemoize)
       (display " --- unmemoize --- \n")
       original-func)                   ;; changed
      (else
       (display " -- Unknown command! --\n"))))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T12:32:03.307

好的，所以您已经诊断出了问题，这就是解决方案。

任何记忆化的函数都会接收一些参数（否则我们将没有任何东西可以记忆它）。这意味着我们可以使用不带参数的调用来恢复原始函数：

```
(define (mem mem-it func)
    (case mem-it
      ((memoize)
       (display " --- memoize ---\n")
       (let ((table (make-table)))                 ;; changed
        (lambda args   (if (null? args) func       ;; changed 
         (let ((prev-com-res (lookup args table))) 
           (display " --- memoize2 ---\n")
           (or prev-com-res                            
               (let ((result (apply func args)))   ;; changed             
                 (insert! args result table)
                 result)))))))                     ;; changed
      ((unmemoize)
       (display " --- unmemoize --- \n")
       (func))                                     ;; changed 
      (else
       (display " -- Unknown command! --\n")))) 
```

形式的 lambda 表达式将`(lambda args ...body...)`其所有参数收集在一个列表中。例如：

```
(define qq (lambda args args))
;Value: qq

(qq 1 2 3)
;Value 12: (1 2 3) 
```

* * *

正如 Barmar 在评论中正确指出的那样，这不适用于具有可变数量参数的函数，对于这些函数，没有参数的调用是有意义的。但对于所有其他人来说，它会起作用。但是，让它在所有情况下都能正常工作，也是可能的。我们必须定义一个特殊符号，并检查它`eq?`以触发恢复：

```
(define mem
 (let ((trigger (list 'trigger))                
       (check   (list 'check))) 
  (lambda (mem-it func)                               ;; changed
    (case mem-it
      ((memoize)
       (display " --- memoize ---\n")
       (let ((table (make-table)))                    ;; changed
        (lambda args   (if (eq? check trigger) func   ;; changed 
         (let ((prev-com-res (lookup args table))) 
           (display " --- memoize2 ---\n")
           (or prev-com-res                            
               (let ((result (apply func args)))      ;; changed 
                 (insert! args result table)
                 result)))))))                        ;; changed
      ((unmemoize)
       (display " --- unmemoize --- \n")
       (let ((c check))                            ;; changed...
         (set! check trigger)  ;; or: (fluid-let ((check trigger))
         (let ((f (func)))     ;;       (func))
           (set! check c)
           f)))                                    ;; ...changed
      (else
       (display " -- Unknown command! --\n")))))) 
```

这甚至在考虑参数之前就有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T16:08:15.037

您要做的就是将原始定义保存在某处，以便在取消记忆时恢复它。

```
(define *original-functions* (make-table))

(define (mem mem-it func)
  (let ((table (make-table))
        (original-func func))     ;; added
    (case mem-it
      ((memoize)
       (display " --- memoize ---\n")
       (let ((new-func
              (lambda args
                (let ((prev-com-res (lookup args table))) ;; prev-com-res = previously-computed-result
                  (display " --- memoize2 ---\n")
                  (or prev-com-res                            
                      (let ((result (apply func args)))                  
                        (insert! args result table)
                        result))))))
         (insert! new-func original-func *original-functions*)
         new-func))
      ((unmemoize)
       (display " --- unmemoize --- \n")
       (lookup func *original-functions*))
      (else
       (display " -- Unknown command! --\n"))))) 
```

# javascript - Jquery从左到右滑动使div在幻灯片上跳起来

> ID：16222252
> 
> 赞同：3
> 
> 时间：2013-04-25T18:39:23.833
> 
> 标签：javascript, jquery, html

我正在尝试创建一种效果，当单击链接时，它会使初始 div 向左滑动并显示第二个 div 向左滑动，当从第二个 div 单击链接时，第一个 div 向右滑动div 也向右滑动。

到目前为止，这是我的代码

HTML

```
<div id="box1">
    <a href="#" id="click1">Click to show other div</a>
     <br>
    Ut accumsan dignissim lorem non posuere.Aliquam iaculis nibh    ultricies sem amet.Class aptent taciti sociosqu ad posuere.
</div>

<div id="box2" style="display:none">
    <a href="#" id="click2">Click to show other div</a>
     <br>
    Ut accumsan dignissim lorem non posuere.Aliquam iaculis nibh    ultricies sem amet.Class aptent taciti sociosqu ad posuere.
</div> 
```

JS

```
$(document).ready(function () {
    $('#click1').click(function () {
        $('#box1').hide("slide", {
            direction: "left"
        }, 1000);
        $('#box2').show("slide", {
            direction: "right"
        }, 1000);
    });
    $('#click2').click(function () {
        $('#box2').hide("slide", {
            direction: "right"
        }, 1000);
        $('#box1').show("slide", {
            direction: "left"
        }, 1000);
    });
}); 
```

这是迄今为止我所拥有的 JSFiddle 链接[http://jsfiddle.net/rayshinn/abNmN/4/](http://jsfiddle.net/rayshinn/abNmN/4/)

问题是当我单击链接并调用幻灯片动画时，第二个隐藏的 div 会跳到位。有没有一种方法可以在没有 div 弹出/跳跃效果的情况下从左到右创建平滑的动画？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:50:59.443

在相对定位的包装器中使用绝对定位。

[小提琴示例](http://jsfiddle.net/abNmN/6/)（更新）

HTML

```
<div id="wrapper">
    <div class="slidingDiv" id="box1">...</div>
    <div class="slidingDiv" id="box2" style="display:none">...</div>
</div> 
```

CSS

```
#wrapper {
    position:relative;
}

#wrapper div {
    position:absolute;
    top:0;
} 
```

Javascript自动高度计算

```
var maxHeight = 0;
$('.slidingDiv').each(function() {
    if($(this).height() > maxHeight) maxHeight = $(this).height();
});
$('#wrapper').height(maxHeight); 
```

# jquery - 如何在 jQuery 中重新索引过滤的 div

> ID：16222254
> 
> 赞同：0
> 
> 时间：2013-04-25T18:39:26.003
> 
> 标签：jquery, indexing, visibility

我有一个过滤器函数，它通过查找类并隐藏其他所有内容来使用 div 类。我还有一个动态添加 div 的函数，但它不能与 filter 函数一起正常工作。使用索引号将动态添加的 div 添加到每行的末尾。

**问题是隐藏的 div 保留了它们原来的索引号。我想将它们全部分离（保留 div 的内容）并将它们添加到选定的 div 之后。**

```
Example before filtering (A0 = filter/index):
A0  B1  A2
<Dynamic Div after Row 1>
A3  B4  B5

This is what happens now when I filter:
B1  B4  B5
A0  A2  A3
<Dynamic Div after Row 1 - because A2 is the end of row 1 according to the index>

This is what I need to happen:
B0  B1  B2
<Dynamic Div after Row 1 - index numbers were changed>
A3  A4  A5 
```

这是我的过滤功能：

```
$('nav a').click(function(){
    var content = '.content';
    var portfolio = '#portfolio > a';
    var getClass = $(this).attr('class'); //get the filter via class

    //hides any active content windows
    if($(content).length) { $(content).slideUp(300, function(){ $(this).remove(); }); }

    if(getClass){
        $('.tags').not("." + getClass).slideUp(300, function() {     //hide all tags except selected tag
            $("." + getClass).slideDown(300);   //show selected tag if already hidden
            $(portfolio).children($('.tags').not("." + getClass).parent()).detach();
        });
    } else {
        $('.tags').slideDown(300); //show all
    }

}); 
```

这是我不正确的行：

```
$(portfolio).children($('.tags').not("." + getClass).parent()).detach(); 
```

我需要选择投资组合中的 .tags 以便不删除导航元素，但我需要选择该 div 的锚链接（父元素）。

Stackoverflow 不允许我发布我的元素的图像，我无法让 html 代码看起来正确，但基本上我的元素看起来像： `a href="content.php"` `div class="tags branding" style="background:url(images/BacktoSchool-header.jpg)"` `div class="text"` `Content Name`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T04:08:21.007

我在导航中更改了一行，使 name 属性保持类值，这样我就可以隐藏所有`'.tags'`而不删除导航元素或需要定位投资组合的子类，然后是类的父类。

工作代码的变化是：

```
var getClass = $(this).attr('name'); //get the filter via name

if(getClass){
    $('.tags').not("." + getClass).slideUp(300, function() {     //hide all tags except selected tag
        $("." + getClass).slideDown(300);   //show selected tag if already hidden
            $holder = $('.tags').not("." + getClass).parent().detach();  //detaches all the other tags
            $holder.insertAfter($(portfolio + ':last'))  //appends them
        });
    } else {
        $('.tags').slideDown(300); //show all
    } 
```

# testing - 沙盒 API 凭据不起作用

> ID：16222255
> 
> 赞同：1
> 
> 时间：2013-04-25T18:39:27.880
> 
> 标签：testing, paypal, shopping-cart

我已将 zen cart payment express checkout 模块设置为沙盒模式，以便我可以对其进行测试，但沙盒 API 凭据不起作用，并且网站不指向 sandbox.payal。任何人都可以告诉我为什么会发生这种情况？谢谢你..

# android - 使用 if/if else/else 语句进行碰撞检测。怎么提高？

> ID：16222256
> 
> 赞同：2
> 
> 时间：2013-04-25T18:39:33.300
> 
> 标签：android, andengine, collision

我目前正在 AndEngine 中开发一个游戏，我已经通过检查每辆车与敌人数组的每个单独索引来设置我与敌人的碰撞检测，因为出于某种原因，for 循环不起作用。这非常不方便，因为它不仅使增加和减少敌人成为一件苦差事，而且看起来很糟糕！它看起来像这样：

```
if (rManager.getInstance().iceArray[0].getIceSprite().collidesWith(rManager.getInstance().carArray[r].getCarSprite()))
{
    rManager.getInstance().carArray[r].setCarSpeed(1f);
} else if (rManager.getInstance().iceArray[1].getIceSprite().collidesWith(rManager.getInstance().carArray[r].getCarSprite())) {
    rManager.getInstance().carArray[r].setCarSpeed(1f);
} else if (rManager.getInstance().iceBergArray[0].getIceBergSprite().collidesWith(rManager.getInstance().carArray[r].getCarSprite())) {
    rManager.getInstance().carArray[r].setCarSpeed(0f);
} else {
    rManager.getInstance().carArray[r].setCarSpeed(0.5f);
} 
```

我尝试的 for 循环是这样的， [r] 是汽车阵列的每一辆车，但它似乎没有做任何事情。

```
for (int h = 0; h < rManager.getInstance().snowArray.length; h++)
{
    if (rManager.getInstance().snowArray[h].getSnowSprite().collidesWith(rManager.getInstance().carArray[r].getCarSprite())) {
        String temp = rManager.getInstance().carArray[r].toString();
        Log.e("SNOW", "SNOWWWWW!" + rManager.getInstance().snowArray[h].toString());
        rManager.getInstance().carArray[r].setCarSpeed(0.2f);
    }
} 
```

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T18:46:35.203

您应该使用工厂模式或策略模式来删除 if else。

请参阅下面的链接以供参考。

[http://www.cumps.be/nl/blog/read/design-patterns-strategy-pattern](http://www.cumps.be/nl/blog/read/design-patterns-strategy-pattern)

还是[没有“switch”语句的策略模式？](https://stackoverflow.com/questions/3834091/strategy-pattern-with-no-switch-statements)

**编辑**：

根据您的代码，startegy 模式应该实现下面的伪代码。我根据您上面已经发布的代码做了一些假设。

您将创建一个包含逻辑和适当操作的字典，如下所示：

```
 Dictionary<Func<RManager, int, bool>, Action<Car>> 
 ruleUpdates = 
 new Dictionary<Func<RManager, int, bool>, Action<Car>>(); 
```

每个`Func<Ice, Car, bool>`你应该像这样实现

```
private bool ZeroElementEqualIcePrite(RManager rManager, int r)
    {
        return rManager.getInstance().iceArray[0].collidesWith(rManager.getInstance().carArray[r].getCarSprite());
    } 
```

和行动应执行如下：

```
public static void DoUpdateOneLevel(Car car)
{
    car.setCarSpeed(1f);
} 
```

从那里我们可以用相同的方式在您的代码之后实现类似的所有逻辑。您可以在下面初始化字典

```
ruleUpdates.Add(FirstElementEqualIcePrite, DoUpdateOneLevel);
ruleUpdates.Add(SecondElementEqualIcePrite, DoUpdateOneLevel);
ruleUpdates.Add(FirstElementEqualIceBergPrite, DoUpdateZeroSpeed);
ruleUpdates.Add(SecondElementEqualIceBergPrite, DoUpdateZeroSpeed); 
```

之后，您只需循环遍历 executionList 的每个键，如下所示。

```
foreach (KeyValuePair<Func<RManager, int, bool>, Action<Car>> 
 ruleUpdate in ruleUpdates)
    {
       if (ruleUpdate.Key.Invoke(rManager, r))
       {
          ruleUpdate.Value.Invoke(rManager.getInstance().carArray[r]);
          break;
       }
    } 
```

希望这有帮助。遵循该策略，您的代码将干净且易于更改，也不太关心 if / then / else 逻辑。您可以在将来轻松扩展它。

# android - Android facebook 轻松分享没有 api 麻烦？

> ID：16222269
> 
> 赞同：0
> 
> 时间：2013-04-25T18:39:53.757
> 
> 标签：android, facebook, share

并不是说我懒得设置 api 代码来让它工作，而是让我的客户经历所有的麻烦来设置一个 facebook 应用程序、一个 heroku 网站、ssh、git 等真的会让他们生气。

我真正想做的是让我的客户应用程序的用户分享一些预先生成的文本、一个链接和一张包裹在一起的图片，就像一个小的 Facebook 时间线故事。有没有一种快速简便的方法来做到这一点？

# actionscript-3 - 矢量图形的最佳 Flash 引擎？

> ID：16222273
> 
> 赞同：0
> 
> 时间：2013-04-25T18:40:05.373
> 
> 标签：actionscript-3, flash, vector, game-engine, movieclip

嗨，谁能给我一个可以使用矢量图像或与 flash 专业 cs6 影片剪辑合并的 flash 库的链接？

在 Illustrator 或 Flash Pro CS6 中制作的矢量图像？

cs6专业本机足以制作“优化”游戏吗？使用更少的内存等。

我正在寻找一个 Flash 游戏引擎，我仍然可以为 FlashDevelop 和 Flashpunk 编写代码，但也可以制作矢量图形。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T13:14:45.110

首先，有几点需要注意：

*   Flash 支持矢量图形。这是在语言的基本代码中实现的，因此无论您在做什么，您都可以使用矢量图形（尽管由于各种原因，一些预构建的引擎将需要光栅图像）
*   FlashDevelop 在 IDE 或集成开发环境中，这意味着它是一个工具，就像记事本或 Microsoft Word 一样，但您可以在其中键入代码。它不是游戏引擎。
*   您似乎已经发现，Flashpunk 是为光栅图形设计的，而不是矢量图形。
*   你的游戏最终如何“优化”是你的结果，而不是你使用的工具。如果您在矢量图形中使用具有数千个顶点的艺术资产，那么世界上没有任何代码库可以使您的游戏免于未优化。所以是的，您可以只使用 Flash CS6 制作一个完全优化的游戏
*   Flash CS6 实际上是二合一：内容创建工具（用于制作或分组艺术资产）和 Actionscript 集成开发环境。

牢记这一切，您确实可以在 Flash 中开发内容，然后将该内容从 Flash 导出到 FlashDevelop。执行此操作的首选方法是 SWC 导入。基本上，您在 Flash 中构建一个包含所有图形和声音的 .fla 文件，**为库中要在 FlashDevelop 中使用的每个 Flash DisplayObject 分配一个类名**，进入 Flash 中的发布设置并启用 .swc 输出，然后发布。然后在 FlashBuilder 中导入，你可以简单地调用

```
this.addChild(new graphic001()) 
```

在您用 flash builder 编写的类中（当然，它扩展了 DisplayObjectContainer）。

可以找到一个很好的示例教程：[这里](http://cote.cc/blog/linking-swc-files-in-your-actionscript-editor)

不过，要回答您最初的问题，以防万一我错了并且您**已**为此做好准备（或者下一个要查看此问题的人是），我建议您使用 Citrus Engine。Nape 物理引擎非常易于使用，一旦您对传统的 displayList 格式充满信心，您就可以开始使用 starling 框架，而无需切换到其他引擎。但是我想指出，我真的不认为你已经准备好这样做了。您最好先完成几个“制作游戏”的 Flash 教程，例如[这个](http://www.flashgametuts.com/tutorials/as3/how-to-make-a-vertical-shooter-in-as3-part-1/)。

# reporting-services - SSRS 2008 面积图中被吞没的数据标签

> ID：16222278
> 
> 赞同：2
> 
> 时间：2013-04-25T18:40:16.283
> 
> 标签：reporting-services, ssrs-2008

我在 SSRS 2008 R2 中有一个堆积面积图。

![在此处输入图像描述](https://i.stack.imgur.com/sNAqg.jpg)

如您所见，数据标签被左右吞下。如果我将图表类型更改为任何面积图，我也会遇到同样的问题。如果我更改为线型，它会在 y 轴和图表之间留出空间。

你知道解决这个问题的任何方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T15:20:11.023

我找不到真正解决我的问题的方法。使用 Label、SmartLabels 和 NoMoveDirections 属性根本不会影响我的图表 - 很奇怪。

所以我删除了轴，并将数据标签的填充作为相应的区域。它看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/lyakx.jpg)

有总比没有好...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T18:12:59.313

默认情况下，智能标签放置在静态位置。您可以通过更改 NoMoveDirections 属性来允许它们移动。在您的情况下，看起来将 Left 和 Right 更改为 False 应该可以解决问题。

![在此处输入图像描述](https://i.stack.imgur.com/4ASHt.png)

# javascript - 将 javascript 变量转换为 jQuery 对象的成本是多少？

> ID：16222282
> 
> 赞同：10
> 
> 时间：2013-04-25T18:40:20.483
> 
> 标签：javascript, jquery

有时我在 Javascript 函数中看到，如果`jQuery`重复使用变量到的转换，则可以先将其分配给局部变量：

```
$variable = $(variable); 
```

这是否必要，转换成本是多少？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T18:45:44.257

无论如何，存储对象比每次要在其上使用 jQuery 方法时都必须重新实例化 jQuery 对象要快……即使它对于缓存`$(this)`或`$(anObject)`.

用于描述这种“现在存储，以后使用”方法的术语是“缓存”。它通常被称为“缓存”的原因是因为缓存是指存储一次对某事物的引用并使用它，而无需稍后再返回以再次获取相同的事物（非常非技术性，非 100% 准确的描述）。

重点是处理选择器。jQuery 每次都必须查询 DOM，这是昂贵的部分。与 DOM 操作（以及 jQuery 首先处理您的选择）相比，生成对象和存储引用并没有那么昂贵。

如果您只是从对象引用中创建一个 jQuery 对象，那么它几乎没有破坏性，因为发生的处理是创建 jQuery 对象......所以它实际上仅限于 jQuery 所做的任何事情。这仍然是一种很好的做法，并且仍然可以防止一些不必要的处理。例如，这个：

```
var element = document.getElementById("div_id");
$(element).someMethod();
// Later:
$(element).someOtherMethod(); 
```

效率稍低，因为每次都会创建一个新的 jQuery 对象。它可以很容易地被压缩为在一个变量中存储对单个 jQuery 对象的引用，并引用它。

我能想到的一个警告是它不是一个*实时*的元素列表（如果选择 DOM 元素）。例如，您可能希望使用 class 缓存所有元素`testing-class`，如下所示：

```
var myelements = $(".testing-class"); 
```

但是如果将另一个元素添加到带有`testing-class`类的 DOM 中，`myelements`则不会被反映。它将具有相同的先前列表。所以在这种情况下，显然需要重新查询和更新 DOM `myelements`。

对我来说，缓存的最佳实践是在一个范围内......而不是整个页面。如果您正在运行一个函数，并且它选择了一些元素，请在开头缓存它，然后使用它。但是不要全局缓存它并在整个页面中使用它；将其缓存一个执行周期。

例如，我会这样做：

```
function someFunc() {
    var elements = $(".class-stuff");
    // Use `elements` here

    // code

    // Use `elements` here
    someOtherFunc(elements);
}

function someOtherFunc(el) {
    // Use `el` here
}

someFunc();

// Some time later:
someFunc(); 
```

但我不会这样做：

```
var elements = $(".class-stuff");

function someFunc() {
    // Use `elements`
}

function someOtherFunc() {
    // Use `elements`
}

someFunc();
someOtherFunc();

// Some time later
someOtherFunc(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:48:41.753

这取决于变量是什么。如果原始变量只是单个 DOM 元素，那么它并不是*特别*昂贵 - DOM 遍历已经完成，所以您要做的就是将该元素包装在 jQuery 伪数组中并附加原型。

但是，如果原始变量是选择器，那么您绝对应该缓存结果以避免重复从 DOM -> 元素列表转换。

无论如何，最好不要重复自己，因此缓存`$(variable)`只是良好的代码卫生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:46:34.130

如果`$(variable)`无论如何调用，这个赋值基本上没有成本——这只是在内存中存储对对象的引用。

纯粹主义者可能会指出，因为现在存储了 jQuery 对象，所以它不能被垃圾回收，这是真的。所以我想如果你有**很多**这些可能会导致内存问题，但它本身没有成本可言。

这样做的**原因**是因为与创建对象相关联的成本，即`$(variable)`零件。如果多次这样做可能会很昂贵。存储对对象的引用意味着只需要创建一个。

另一个重要的一点：以下声明

```
var $variable = $(variable); 
```

如果它是在闭包的调用上下文中完成的，它的行为可能会有所不同。也就是说，如果在 var 语句的范围内定义了一个函数，该变量将“停留”以供该函数使用。这可能具有与上述相同的效果（没有 gc 和指针内存），并增加了更长的生命周期。（因为只要函数有可能被调用，它就会一直存在。）

# javascript - jQuery可拖动droppable不能显示多个div

> ID：16222284
> 
> 赞同：0
> 
> 时间：2013-04-25T18:40:25.457
> 
> 标签：javascript, jquery, css

我按照 jquery ui draggable and droppable 来尝试在特定区域显示 3 个 div。这是代码：--CSS：

```
#content-1 { width: 200px; height: 100px; border: 1px solid red; display: none; }
        #content-2 { width: 200px; height: 100px; border: 1px solid red; display: none; }
        #content-3 { width: 200px; height: 100px; border: 1px solid red; display: none; } 
```

--js：

```
$(function() {
            $("#li-1").draggable({
                appendTo: "body",
                helper: "clone"
            });
            $(".ui-widget-content").droppable({
                drop: function(event, ui) {
                    $("#content-1").show();
                }
            });
            $("#li-2").draggable({
                appendTo: "body",
                helper: "clone"
            });
            $(".ui-widget-content").droppable({
                drop: function(event, ui) {
                    $("#content-2").show();
                }
            });
            $("#li-3").draggable({
                appendTo: "body",
                helper: "clone"
            });
            $(".ui-widget-content").droppable({
                drop: function(event, ui) {
                    $("#content-3").show();
                }
            });
        }); 
```

--HTML：

```
<div id="products">
        <div id="catalog">
            <div>
                <ul>
                    <li id="li-1">dashboard-1</li>
                    <li id="li-2">dashboard2</li>
                    <li id="li-3">dashboard3</li>
                </ul>
            </div>

        </div>
    </div>
    <div id="cart">
        <div class="ui-widget-content">
            <div id="content-1"></div>
            <div id="content-2"></div>
            <div id="content-3"></div>
        </div>
    </div> 
```

结果是它只能显示一个 div。这段代码中的错误是什么？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:11:21.413

我不厌其烦地将您的代码放入[http://jsbin.com](http://jsbin.com)以查看那里发生了什么。下次请注意自己做。

您的问题是您正在`.droppable`为相同的元素定义相同的功能`.ui-widget-content`。所以很自然地，你要重写同一个函数的定义三遍，只有最后一个定义有效。

这是您希望完成的方式：

```
$(function() {
        $("#li-1").draggable({
            appendTo: "body",
            helper: "clone"
        });
        $("#li-2").draggable({
            appendTo: "body",
            helper: "clone"
        });
        $("#li-3").draggable({
            appendTo: "body",
            helper: "clone"
        });
        $(".ui-widget-content").droppable({
            drop: function(event, ui) {

              // Retrieving the id of the element being dragged
              var element = ui.draggable.attr('id');

              if (element == "li-1") {
                $("#content-1").show();
              } else if (element == "li-2") {
                $("#content-2").show();
              } else if (element == "li-3") {
                $("#content-3").show();
              }
            }
        });
    }); 
```

演示：http: [//jsbin.com/ozixur/3/edit](http://jsbin.com/ozixur/3/edit)

# c# - LINQ 中的动态变量

> ID：16222287
> 
> 赞同：1
> 
> 时间：2013-04-25T18:40:35.087
> 
> 标签：c#, linq, dynamics-crm-2011, dynamics-crm

我在 LINQ 中有以下语句：

```
var eventsWithTag = (from occurence in occurrences1
                     join eventTag in serviceContext.CreateQuery("adx_eventtag_event")
                         on occurence.Event.GetAttributeValue<Guid>("adx_eventid") equals eventTag.GetAttributeValue<Guid>("adx_eventid")
                     join tag in serviceContext.CreateQuery("adx_eventtag")
                         on eventTag.GetAttributeValue<Guid>("adx_eventtagid") equals tag.GetAttributeValue<Guid>("adx_eventtagid")
                     where tag.GetAttributeValue<string>("adx_name") == "scotland"
                     select occurence).OrderBy(x => x.Start); 
```

在这种情况下，这适用于“Scotland”的固定字符串搜索。但是我需要替换它以反映当前页面主题。所以基本上我需要更换

```
== "scotland" 
```

和

```
== getBranch() 
```

其中 getBranch 将相关分支名称作为字符串返回。

这将导致我尝试

```
eventsWithTag = (from occurence in occurrences1
join eventTag in serviceContext.CreateQuery("adx_eventtag_event") on occurence.Event.GetAttributeValue<Guid>("adx_eventid") equals eventTag.GetAttributeValue<Guid>("adx_eventid")
join tag in serviceContext.CreateQuery("adx_eventtag") on eventTag.GetAttributeValue<Guid>("adx_eventtagid") equals tag.GetAttributeValue<Guid>("adx_eventtagid")
where tag.GetAttributeValue<string>("adx_name") == getBranch()
select occurence).OrderBy(x => x.Start); 
```

但这不起作用，从我对 LINQ 知之甚少的情况来看，这是因为您不能以这种方式使用变量。

所以我的问题是：如何将上面的 LINQ 查询与分支的动态值一起使用。

请注意：我看过其他关于此的帖子，但我显然没有 LINQ 知识来将它们转移到我的特定需求。刚刚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:07:06.530

一切看起来都正确，所以我会仔细检查您的 getBranch()...

如果这有效：

```
var branch = "scotland";
eventsWithTag = 
    (from occurence in occurrences1
     join eventTag in serviceContext.CreateQuery("adx_eventtag_event") on occurence.Event.GetAttributeValue<Guid>("adx_eventid") equals eventTag.GetAttributeValue<Guid>("adx_eventid")
     join tag in serviceContext.CreateQuery("adx_eventtag") on eventTag.GetAttributeValue<Guid>("adx_eventtagid") equals tag.GetAttributeValue<Guid>("adx_eventtagid")
     where tag.GetAttributeValue<string>("adx_name") == branch 
     select occurence)
    .OrderBy(x => x.Start); 
```

然后 pswg 的答案应该有效，而您的问题在于 getBranch 返回的值与任何记录都不匹配...

在稍微不同的问题上，我对为什么需要在 equals 语句中获取实际属性感到有些困惑，因为根据[this](http://msdn.microsoft.com/en-us/library/gg334415.aspx)，它应该像这样正常工作：

```
var branch = "scotland";
eventsWithTag = 
    (from occurence in occurrences1
     join eventTag in serviceContext.CreateQuery("adx_eventtag_event") on occurence.Event["adx_eventid"] equals eventTag["adx_eventid"]
     join tag in serviceContext.CreateQuery("adx_eventtag") on eventTag["adx_eventtagid"] equals tag["adx_eventtagid"]
     where tag["adx_name"] == branch 
     select occurence)
    .OrderBy(x => x.Start); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T18:41:26.510

您可以事先拨打电话：

```
var branch = getBranch();
eventsWithTag = 
    (from occurence in occurrences1
     join eventTag in serviceContext.CreateQuery("adx_eventtag_event") on occurence.Event.GetAttributeValue<Guid>("adx_eventid") equals eventTag.GetAttributeValue<Guid>("adx_eventid")
     join tag in serviceContext.CreateQuery("adx_eventtag") on eventTag.GetAttributeValue<Guid>("adx_eventtagid") equals tag.GetAttributeValue<Guid>("adx_eventtagid")
     where tag.GetAttributeValue<string>("adx_name") == branch 
     select occurence)
    .OrderBy(x => x.Start); 
```

# java - android listview：如何更改特定单元格的背景颜色（按索引）？

> ID：16222288
> 
> 赞同：1
> 
> 时间：2013-04-25T18:40:37.267
> 
> 标签：java, android, listview

您好，在此先感谢您，

有没有办法改变特定单元格的背景颜色？即按索引号？我正在尝试通过添加 - if(position==3) 来修改下面的本教程代码。不知道我做错了什么，或者它是否被允许。任何帮助是极大的赞赏。

```
public ItemListBaseAdapter(Context context, ArrayList < ItemDetails > results) {
    itemDetailsrrayList = results;
    l_Inflater = LayoutInflater.from(context);
}

public int getCount() {
    return itemDetailsrrayList.size();
}

public Object getItem(int position) {
    return itemDetailsrrayList.get(position);
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if (convertView == null) {
        convertView = l_Inflater.inflate(R.layout.item_details_view, null);
        holder = new ViewHolder();
        holder.txt_itemName = (TextView) convertView.findViewById(R.id.name);
        holder.txt_itemDescription = (TextView) convertView.findViewById(R.id.itemDescription);
        //  holder.txt_itemPrice = (TextView) convertView.findViewById(R.id.price);
        holder.itemImage = (ImageView) convertView.findViewById(R.id.photo);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    ////////////////////////////  TEST CODE - Header cells ////////////////

      if(position == 2){
      convertView.setBackgroundColor(android.R.color.background_light);
  }

    if (position == 3) {
         convertView.setBackgroundColor(android.R.color.background_light);
    }
    if (position == 14) {
         convertView.setBackgroundColor(android.R.color.background_light);
    }
    /////////////////////////////////////

    holder.txt_itemName.setText(itemDetailsrrayList.get(position).getName());
    holder.txt_itemDescription.setText(itemDetailsrrayList.get(position).getItemDescription());
    // holder.txt_itemPrice.setText(itemDetailsrrayList.get(position).getPrice());
    holder.itemImage.setImageResource(imgid[itemDetailsrrayList.get(position).getImageNumber() - 1]);

    return convertView;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:53:38.790

据我所知，[BaseAdapter](http://developer.android.com/reference/android/widget/BaseAdapter.html)中没有 setBackground() （如果这是你继承的）。如果 setBackground() 是您创建的方法，那么如果您不将其作为参数传递，我不明白您如何设置特定视图的颜色。你不想打电话给convertView吗？[setBackgroundColor()](http://developer.android.com/reference/android/view/View.html#setBackgroundColor%28int%29)代替？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:38:39.030

对于任何其他初学者来说，将这个片段添加到 getView() 对我有用。希望它可以帮助某人。

```
 if(position == 0 || position == 7 || position == 9 || position == 15 ){

      convertView.setBackgroundColor(Color.DKGRAY);
  }
  else
  {
      convertView.setBackgroundColor(Color.BLACK);
  } 
```

# mysql - MySQL：如何在一个查询中将三个表与分配表连接起来？

> ID：16222294
> 
> 赞同：0
> 
> 时间：2013-04-25T18:41:06.760
> 
> 标签：mysql

我有三张桌子：

```
ITEMS
itemid | itemname
1      | Item 1

FEATURES
featureid | featurename
1         | feature1
2         | feature2
3         | feature3
4         | feature4
...       | ...

ASSIGN
assignid | itemid | featureid
1        | 1      | 1
1        | 1      | 2
1        | 1      | 3
1        | 1      | 4 
```

我想要一个查询，它会给我类似的结果：

```
ITEMS
itemid | itemname | featurename1 | featurename2  | etc
1      | Item 1   | feature1     | feature2      | etc 
```

有没有办法在没有第二次查询的情况下做到这一点？我发誓我只是想错了吗？有任何想法吗？

注意：特征可以是 0 到 50 个不同的特征。我的数据库设计可能是错误的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:55:10.060

使用您的 ASSIGN 表链接它们，然后您可以使用`GROUP_CONCAT()`它来做您想做的事情。尝试这个：

```
SELECT
  ITEMS.itemid,
  ITEMS.itemname,
  FEATURES.featureid,
  GROUP_CONCAT(FEATURES.featurename) AS FEATURES
FROM ITEMS
 JOIN ASSIGN ON ITEMS.itemid = ASSIGN.itemid
 JOIN FEATURES ON FEATURES.featureid = ASSIGN.featureid 
```

[SQL 小提琴链接](http://sqlfiddle.com/#!2/d7859b/11/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:47:46.950

只需使用您的 ASSIGN 表作为 ITEMS 和 FEATURES 的交叉参考。因此，通过 ASSIGN 表中的外键将所有内容连接在一起，如下所示：

```
SELECT
  ITEMS.itemid
, ITEMS.itemname
, FEATURES.featureid
, FEATURES.featurename
, ASSIGN.assignid
FROM `ITEMS`
 JOIN `ASSIGN`
   ON ITEMS.itemsid = ASSIGN.itemid
 JOIN `FEATURES`
   ON FEATURES.featureid = ASSIGN.featureid 
```

# c# - 通过 C# Web 浏览器抓取网站以获取元素名称和 id

> ID：16222296
> 
> 赞同：5
> 
> 时间：2013-04-25T18:41:20.293
> 
> 标签：c#, html

我正在尝试抓取[网站](http://www.pof.com/#!/viewprofile.aspx?profile_id=53753812)以获取`Textarea`信息。

我在用着：

```
HtmlDocument doc = this.webBrowser1.Document; 
```

当我查看视图源时，它显示`<textarea name="message" class="profile">`

但是当我尝试使用以下方式访问此文本区域时：

```
 HtmlDocument doc = this.webBrowser1.Document;

 doc.GetElementsByTagName("textarea")
      .GetElementsByName("message")[0]
      .SetAttribute("value", "Hello"); 
```

它显示错误：

```
 Value of '0' is not valid for 'index'. 'index' should be between 0 and -1.
Parameter name: index 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:22:30.713

对于您当前的需要，您可以简单地使用它：

```
doc.GetElementsByTagName("textarea")[0].InnerText = "Hello"; 
```

对于复杂的事情，您可以使用 HtmlDocument 类和 MSHTML 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T08:14:12.353

我可以将[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)委托给您！

我想您尝试访问使用 cookie 来确定用户是否登录（或未登录）的网站。如果没有，它将强制您注册/登录，否则您将无权看到任何内容。我对吗？

您的浏览器存储该 cookie，而您的 C# 没有！（广义而言）
您需要创建一个 cookie 容器来解决该问题。

您的 C#-App 可能会登录，请求 cookie/会话，可能会从响应头中获取 Cookie，然后您应该能够抓取配置文件或任何您想要的东西。
获取发送到服务器的 Post Data。您可以使用[Fiddler](http://fiddler2.com/home)、Tamper 等工具/插件。

**例如 PostdataString：** user_name=TESTUSER&password=TESTPASSWORD&language=en&action%3Asubmit=Submit

这是您可以使用的片段。

```
 //Create the PostData
        string strPostData = "user_name=" + txtUser.Text + "&password=" + txtPass.Text + "&language=en&action%3Asubmit=Submit";
        CookieContainer tempCookies = new CookieContainer();
        ASCIIEncoding encoding = new ASCIIEncoding();
        byte[] data = encoding.GetBytes(strPostData);

        //Create the Cookie
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://www.website.com/login.php");
        request.Method = "POST";
        request.KeepAlive = true;
        request.AllowAutoRedirect = false;
        request.Accept = "Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
        request.ContentType = "application/x-www-form-urlencoded";
        request.Referer = "http://www.website.com/login.php";
        request.UserAgent = "User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1";
        request.ContentLength = data.Length;

        Stream requestStream = request.GetRequestStream();
        requestStream.Write(data, 0, data.Length);

        HttpWebResponse response;
        response = (HttpWebResponse)request.GetResponse();
        string sRequestHeaderBuffer = Convert.ToString(response.Headers);

        requestStream.Close();

        //Stream(-output) of the new website
        StreamReader postReqReader = new StreamReader(response.GetResponseStream());

        //RichTextBox to see the new source.
        richTextBox1.Text = postReqReader.ReadToEnd(); 
```

您将需要调整其间的 Cookie 参数并将您当前的 sessionid 以及添加到代码中。这取决于您访问的请求网站。
**例如：**

```
 request.Headers.Add("Cookie", "language=en_US.UTF-8; StationID=" + sStationID + "; SessionID=" + sSessionID); 
```

# java - 显示方法参数类型的所有数组元素

> ID：16222297
> 
> 赞同：0
> 
> 时间：2013-04-25T18:41:22.603
> 
> 标签：java, dynamic, reflection

我想获取包含方法的 Param 类型的数组的所有元素（使用**Java.reflect**动态获取），

如果我在方法中有 2 个参数，这是代码：

```
Method testMethod = c.getMethod(method.getName(), new Class[] {int.class, String.class}); 
```

但它应该是动态的，所以我使用 :`method.getTypeParameters()`它返回所有参数类型的数组。

然后当我写：

```
Method testMethod = c.getMethod(method.getName(), new Class[] {method.getParameterTypes}); 
```

但它给了我：***类型不匹配：无法从 Class[] 转换为 Class***

我知道我必须循环参数，因为我有：

```
method.getParameterTypes[0] // gives  "int" 
```

和

```
method.getParameterTypes[1] // gives  "String" 
```

那么我该如何实现呢？也许是一个循环？你对此有什么想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:44:18.440

> ```
> Method testMethod = c.getMethod(
>     method.getName(), new Class[] {method.getParameterTypes}); 
> ```

应该

```
Method testMethod = c.getMethod(
    method.getName(), method.getParameterTypes()); 
```

第一个问题是您`()`缺少`getParameterTypes`. Java 在调用方法时需要显式括号。

第二个问题是您试图将`getParameterTypes`, a的结果`Class<?>[]`放在 a`Class[]`中。a 唯一`Class[]`可以包含的是单个类，而不是数组，所以只需使用`getParameterTypes()`.

* * *

我不清楚你为什么要这样做。您可以`Method`从接口中获取 a 并将其应用于该接口的实例，而无需在实例的具体类上查找方法。对于抽象类也是如此。除非继承图中存在漏洞或某种奇怪的相应静态方法约定，否则您不需要使用一个方法签名来获取另一种方法。其中任何一个都可能是重构的机会。

你的代码库中的反射越少，人们学习就越容易，你从错误查找器和其他分析工具中获得的成果就越多，你遇到的不完整类路径问题就越少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:45:01.853

如果`Arrays.toString(method.getParameterTypeas())`您想*查看*类型，请使用。如果要遍历它们并使用它们，请使用循环：

```
for (Class<?> type : method.getParameterTypeas()) {
    // use the type
} 
```

# mysql - 如何调整这个 3 Table MySQL 连接查询以消除包含空值列的行？

> ID：16222298
> 
> 赞同：2
> 
> 时间：2013-04-25T18:41:25.003
> 
> 标签：mysql, sql, join, multiple-tables

我不太确定如何最好地表达这个问题。我不一定需要一种方法来消除包含具有空值的列的行——我只需要弄清楚如何调整我的查询，以便它只为我需要的每个用户生成单行结果......这是一些背景信息有助于澄清：

好的，所以我有 5 个表：users、local_ads（本地广告）、local_rev（本地收入报告）、nat_ads（国家广告）和 nat_rev（国家收入报告）。

每个月，用户都会提交一份国家收入报告和一份地方收入报告。当用户创建他们的月度报告时，他们将获得本地和国家报告的唯一报告 ID。report_id 和相应的 user_id 存储在各自的表中（local_rev 或 nat_rev）。

然后用户向每个报告提交广告。为当月本地报告提交的本地广告存储在 local_ads 表中，对于给定用户，他们的每个广告共享相同的 report_id。全国广告也是如此。

local_rev 和 nat_rev 表中的每个广告都有一个价格和尺寸列。

我正在尝试执行一个查询，该查询将为每个用户生成本地广告总尺寸、本地广告数量、本地广告总价、全国广告总尺寸、全国广告数量和全国广告总价 WHERE month="x"。

这是最接近我需要的查询：

```
SELECT u.franchise, lr.lrr_id, CountLocId, TotalPrice, nr.nrr_id, CountNatId, TotalNMoney,     
(
TotalPrice + TotalNMoney
)TotalRev
FROM users u
LEFT JOIN local_rev lr ON u.user_id = lr.user_id
LEFT JOIN (

SELECT lrr_id, COUNT( lad_id ) CountLocId, SUM( price ) TotalPrice
FROM local_ads
GROUP BY lrr_id
)la ON lr.lrr_id = la.lrr_id
LEFT JOIN nat_rev nr ON u.user_id = nr.user_id
LEFT JOIN (

SELECT nrr_id, COUNT( nad_id ) CountNatId, SUM( tmoney ) TotalNMoney
FROM nat_ads
WHERE MONTH =  'February'
GROUP BY nrr_id
)na ON nr.nrr_id = na.nrr_id
WHERE lr.month =  'February'
ORDER BY franchise
LIMIT 0 , 30 
```

问题是它为每个用户生成一行，*每个月*而不是一个月。您可以在以下结果中看到这一点。在结果中，不具有 NULL 值的行是我想要的行。所以我只需要弄清楚如何消除具有 NULL 值的行。

```
userA   84  39  5200    158 NULL    NULL    NULL
userA   84  39  5200    53  NULL    NULL    NULL
userA   84  39  5200    182 NULL    NULL    NULL
userA   84  39  5200    81  5   5900    11100
userB   93  1   100     51  NULL    NULL    NULL
userB   93  1   100     200 NULL    NULL    NULL
userB   93  1   100     84  9   5742    5842 
```

因此，我尝试使用我在 Stackoverflow 上找到的数十个不同示例以及其他来源。当应用于我的特定查询时，我无法工作。我花了几个小时进行随机调整，希望得到我需要的结果，但没有运气。在这里发帖绝对是我最后的手段！

抱歉，我啰嗦了这么多，我只是想确保我提供了帮助解决我的问题所需的所有信息。非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:44:59.520

`LEFT JOIN`将on更改`na`为`INNER JOIN`.

# php - Wordpress 管理页面剥离表单标签

> ID：16222301
> 
> 赞同：0
> 
> 时间：2013-04-25T18:41:33.903
> 
> 标签：php, html, forms, wordpress

我有一个我在wordpress 中编写的php 页面，它应该从数据库中获取一些信息并将其显示到页面上。我正在尝试添加直接从页面更新信息的功能，并且某些东西似乎正在剥离我的第一个表单标签，但不是其他标签。有没有人见过这样的事情，或者可能知道可能发生的事情？

这是PHP

```
function display_terms_by_brand()
{
global $wpdb;
$sql = "SELECT * FROM ".NINJA_FORMS_TERMS_TEXT;
$terms = $wpdb->get_results($sql, ARRAY_A);
?>

<script type="text/javascript">
    jQuery(document).ready(function(){
        jQuery('.edit').click(function(){
            jQuery(this).parent().find('.edit').css('display' , 'none')
            jQuery(this).parent().find('.save').css('display' , 'block')
            jQuery(this).parent().siblings('span[id*=brand_text_]').children('span').toggle();
            jQuery(this).parent().siblings('span[id*=brand_text_]').children('textarea').toggle();
        }); 
    })
</script>

<div id="termsHeader" style="font-weight:bold; font-size:16px; padding:10px 0; height:30px; min-width:600px;">
    <span style="width:10%; text-align:center; float:left; padding:0 30px;">Brand</span>
    <span style="width:67%; text-align:center; float:left;">Text</span>
    <span style="width:9%; text-align:center; float:right; padding:0 15px;">Edit / Save</span>
</div>

<div style="clear:both;"><!-- --></div>
<hr />

<?php
foreach($terms as $curr_term) {
?>

    <div style="width:100%; padding:20px 0; min-width:600px;" class="term">
        <span style="width:10%; height:50px; padding:30px; float:left; text-align:center;" id="brand_name_<?php echo $curr_term['text_id'] ?>">
            <?php echo $curr_term['brand_name'] ?>
        </span>
        <span style="width:67%; height:50px; padding:30px 10px; float:left;" id="brand_text_<?php echo $curr_term['text_id'] ?>">
            <span> <?php echo stripslashes($curr_term['brand_text']) ?> </span>
            <textarea style="display:none; width:100%;"><?php echo stripslashes($curr_term['brand_text']) ?></textarea>
        </span>
        <span style="width:12%; height:50px; padding:30px 10px; float:right;">
            <form action="/wp-admin/admin.php?page=ninja-forms-extend" method="post" name="edit_<?php echo $curr_term['text_id'] ?>" id="edit_<?php echo $curr_term['text_id'] ?>">
                <input name="brand_name" type="hidden" value="<?php echo $curr_term['brand_name'] ?>" />
                <textarea name="brand_text" style="display:none;">TEST</textarea>
                <input class="termsEditButton termsButtons edit" style="width:150px; margin:0 auto; display:block;" name="edit" type="button" value="Edit Optin Statement" />  
                <input class="termsSaveButton termsButtons save" style="width:150px; margin:0 auto; display:none;" name="save" type="button" value="Save Optin Statement" />  
                <input class="termsDeleteButton termsButtons delete" style="width:150px; margin:0 auto; display:block;" name="delete" type="button" value="Delete Optin Statement" />  
            </form>
        </span>
    </div>

    <div style="clear:both;"><!-- --></div>
<?php
}
?>

<hr />
<h2>Add New Terms text</h2>
<form action="<?php echo $_SERVER['PHP_SELF'] ?>?page=ninja-forms-extend" method="post" name="add_new_term_text" id="add_new_term_text">
    <label style="float:left;width:50px;clear:left;font-weight:bold">Brand</label><input name="brand_name" type="text" size="38" />&nbsp;&nbsp;(This will be the shortcode to display the text)<br />
    <label style="float:left;width:50px;clear:left;font-weight:bold">Text</label><textarea name="brand_text" cols="35" rows="5"></textarea><br />
    <input name="submit" type="submit" value="Add New Terms Text" />
</form>
<?php
return;
} 
```

第一次通过循环的结果html是这样的：

```
<div style="width:100%; padding:20px 0; min-width:600px;" class="term">
        <span style="width:10%; height:50px; padding:30px; float:left; text-align:center;" id="brand_name_1">
            caprizehouse            </span>
        <span style="width:67%; height:50px; padding:30px 10px; float:left;" id="brand_text_1">
            <span> I certify that I am a resident of Canada over the age of 18, I agree to the <a href="http://coreg.intela.com/media/ca-prizehouse/privacypolicy.htm" class="fancylink" target="_blank">Privacy Policy</a> and <a href="http://coreg.intela.com/media/ca-prizehouse/terms.htm" class="fancylink" target="_blank">Terms and Conditions</a>, and I would like to receive the Canadian Prize House newsletter. </span>
            <textarea style="display:none; width:100%;">I certify that I am a resident of Canada over the age of 18, I agree to the &lt;a href="http://coreg.intela.com/media/ca-prizehouse/privacypolicy.htm" class="fancylink" target="_blank"&gt;Privacy Policy&lt;/a&gt; and &lt;a href="http://coreg.intela.com/media/ca-prizehouse/terms.htm" class="fancylink" target = "_blank"&gt;Terms and Conditions&lt;/a&gt;, and I would like to receive the Canadian Prize House newsletter.</textarea>
        </span>
        <span style="width:12%; height:50px; padding:30px 10px; float:right;">

                <input name="brand_name" type="hidden" value="caprizehouse">
                <textarea name="brand_text" style="display:none;">TEST</textarea>
                <input class="termsEditButton termsButtons edit" style="width:150px; margin:0 auto; display:block;" name="edit" type="button" value="Edit Optin Statement">  
                <input class="termsSaveButton termsButtons save" style="width:150px; margin:0 auto; display:none;" name="save" type="button" value="Save Optin Statement">  
                <input class="termsDeleteButton termsButtons delete" style="width:150px; margin:0 auto; display:block;" name="delete" type="button" value="Delete Optin Statement">  

        </span>
    </div> 
```

注意表单标签是如何丢失的。从其他两个通过循环，这是页面的 HTML 输出：

```
<div style="width:100%; padding:20px 0; min-width:600px;" class="term">
        <span style="width:10%; height:50px; padding:30px; float:left; text-align:center;" id="brand_name_2">
            canadianprizes          </span>
        <span style="width:67%; height:50px; padding:30px 10px; float:left;" id="brand_text_2">
            <span> I certify that I am a Canadian resident above the age of 18 years and I agree to and accept the  <a target="_blank" class="fancylink" href="http://www.canadianprizes.com/media/canadianprizes/terms.jspx"> Terms and Conditions</a>, <a target="_blank" class="fancylink" href="http://www.canadianprizes.com/media/canadianprizes/privacy.jspx">Privacy Policy</a> and <a target="_blank" class="fancylink" href="http://www.canadianprizes.com/media/canadianprizes/prizepolicy.jspx">Competition Rules</a>. I consent to my personal details being provided to  selected clients, sponsors and affiliates and to being contacted via email, phone, SMS or mail, as described in the Privacy Policy. </span>
            <textarea style="display:none; width:100%;">I certify that I am a Canadian resident above the age of 18 years and I agree to and accept the  &lt;a target="_blank" class="fancylink" href="http://www.canadianprizes.com/media/canadianprizes/terms.jspx"&gt; Terms and Conditions&lt;/a&gt;, &lt;a target="_blank" class="fancylink" href="http://www.canadianprizes.com/media/canadianprizes/privacy.jspx"&gt;Privacy Policy&lt;/a&gt; and &lt;a target="_blank" class="fancylink" href="http://www.canadianprizes.com/media/canadianprizes/prizepolicy.jspx"&gt;Competition Rules&lt;/a&gt;. I consent to my personal details being provided to  selected clients, sponsors and affiliates and to being contacted via email, phone, SMS or mail, as described in the Privacy Policy.</textarea>
        </span>
        <span style="width:12%; height:50px; padding:30px 10px; float:right;">
            <form action="/wp-admin/admin.php?page=ninja-forms-extend" method="post" name="edit_2" id="edit_2">
                <input name="brand_name" type="hidden" value="canadianprizes">
                <textarea name="brand_text" style="display:none;">TEST</textarea>
                <input class="termsEditButton termsButtons edit" style="width:150px; margin:0 auto; display:block;" name="edit" type="button" value="Edit Optin Statement">  
                <input class="termsSaveButton termsButtons save" style="width:150px; margin:0 auto; display:none;" name="save" type="button" value="Save Optin Statement">  
                <input class="termsDeleteButton termsButtons delete" style="width:150px; margin:0 auto; display:block;" name="delete" type="button" value="Delete Optin Statement">  
            </form>
        </span>
    </div> 
```

在那里，您会注意到正确应用了表单标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-08T00:30:18.837

I had the same problem. Turned out I'd totally overlooked the fact that i was pulling in the form within the main options form.

# python - python中的ode集成与mathematica结果

> ID：16222302
> 
> 赞同：4
> 
> 时间：2013-04-25T18:41:35.950
> 
> 标签：python, wolfram-mathematica, precision, differential-equations

**编辑：** 所以我发现 NDSolve for ODE 正在使用 Runge Kutta 来求解方程。如何在我的 python 代码上使用 Runge Kutta 方法来解决下面的 ODE？

从我关于[带有浮动条目的文本文件的](https://stackoverflow.com/questions/16325258/text-files-with-float-entries-python)帖子中，我能够确定这一点，`python`并`mathematica`立即开始以 10 到负 6 的容差开始发散。

**结束编辑**

在过去的几个小时里，我一直试图弄清楚为什么我在 Mathematica 和 Python 中的解决方案会有所`5000`不同`km`。

我被引导相信一个程序在模拟超过数百万秒的飞行时间时具有更高的容错性。

我的问题是哪个程序更准确，如果不是python，我该如何调整精度？

有了，我离我所在的地方`Mathematica`不到 10公里。`L4``Python``5947`

代码如下：

`Python`

```
import numpy as np
from scipy.integrate import odeint
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D
from numpy import linspace
from scipy.optimize import brentq

me = 5.974 * 10 ** (24)  #  mass of the earth                                     
mm = 7.348 * 10 ** (22)  #  mass of the moon                                      
G = 6.67259 * 10 ** (-20)  #  gravitational parameter                             
re = 6378.0  #  radius of the earth in km                                         
rm = 1737.0  #  radius of the moon in km                                          
r12 = 384400.0  #  distance between the CoM of the earth and moon                 
d = 300 #  distance the spacecraft is above the Earth                             
pi1 = me / (me + mm)
pi2 = mm / (me + mm)
mue = 398600.0  #  gravitational parameter of earth km^3/sec^2                    
mum = G * mm  #  grav param of the moon                                           
mu = mue + mum
omega = np.sqrt(mu / (r12 ** 3))

nu = -np.pi / 4  #  true anomaly  pick yourself                                   

xl4 = r12 / 2 - 4671  #  x location of L4                                         
yl4 = np.sqrt(3) / 2 * r12  #  y                                                  

print("The location of L4 is", xl4, yl4)

#  Solve for Jacobi's constant                                                    
def f(C):
    return (omega ** 2 * (xl4 ** 2 + yl4 ** 2) + 2 * mue / r12 + 2 * mum / r12
            + 2 * C)

c = brentq(f, -5, 0)

print("Jacobi's constant is",c)

x0 = (re + 200) * np.cos(nu) - pi2 * r12  #  x location of the satellite          
y0 = (re + 200) * np.sin(nu)  #  y location                                       

print("The satellite's initial position is", x0, y0)

vbo = (np.sqrt(omega ** 2 * (x0 ** 2 + y0 ** 2) + 2 * mue /
               np.sqrt((x0 + pi2 * r12) ** 2 + y0 ** 2) + 2 * mum /
               np.sqrt((x0 - pi1 * r12) ** 2 + y0 ** 2) + 2 * -1.21))

print("Burnout velocity is", vbo)

gamma = 0.4678 * np.pi / 180  #  flight path angle pick yourself                  

vx = vbo * (np.sin(gamma) * np.cos(nu) - np.cos(gamma) * np.sin(nu))
#  velocity of the bo in the x direction                                          
vy = vbo * (np.sin(gamma) * np.sin(nu) + np.cos(gamma) * np.cos(nu))
#  velocity of the bo in the y direction                                          

print("The satellite's initial velocity is", vx, vy)

#  r0 = [x, y, 0]                                                                 
#  v0 = [vx, vy, 0]                                                               
u0 = [x0, y0, 0, vx, vy, 0]

def deriv(u, dt):
return [u[3],  #  dotu[0] = u[3]                                                 
        u[4],  #  dotu[1] = u[4]                                                 
        u[5],  #  dotu[2] = u[5]                                                 
        (2 * omega * u[4] + omega ** 2 * u[0] - mue * (u[0] + pi2 * r12) /
         np.sqrt(((u[0] + pi2 * r12) ** 2 + u[1] ** 2) ** 3) - mum *
         (u[0] - pi1 * r12) /
         np.sqrt(((u[0] - pi1 * r12) ** 2 + u[1] ** 2) ** 3)),
        #  dotu[3] = that                                                        
        (-2 * omega * u[3] + omega ** 2 * u[1] - mue * u[1] /
         np.sqrt(((u[0] + pi2 * r12) ** 2 + u[1] ** 2) ** 3) - mum * u[1] /
         np.sqrt(((u[0] - pi1 * r12) ** 2 + u[1] ** 2) ** 3)),
        #  dotu[4] = that                                                        
        0]  #  dotu[5] = 0                                                       

dt = np.linspace(0.0, 6.0 * 86400.0, 2000000.0)  #  secs to run the simulation    
u = odeint(deriv, u0, dt)
x, y, z, x2, y2, z2 = u.T

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')
ax.plot(x, y, z, color = 'r')
#  adding the Lagrange point                                                      
phi = np.linspace(0, 2 * np.pi, 100)
theta = np.linspace(0, np.pi, 100)
xm = 2000 * np.outer(np.cos(phi), np.sin(theta)) + xl4
ym = 2000 * np.outer(np.sin(phi), np.sin(theta)) + yl4
zm = 2000 * np.outer(np.ones(np.size(phi)), np.cos(theta))
ax.plot_surface(xm, ym, zm, color = '#696969', linewidth = 0)
ax.auto_scale_xyz([-8000, 385000], [-8000, 385000], [-8000, 385000])
#  adding the earth                                                               
phi = np.linspace(0, 2 * np.pi, 100)
theta = np.linspace(0, np.pi, 100)
xm = 2000 * np.outer(np.cos(phi), np.sin(theta))
ym = 2000 * np.outer(np.sin(phi), np.sin(theta))
zm = 2000 * np.outer(np.ones(np.size(phi)), np.cos(theta))
ax.plot_surface(xm, ym, zm, color = '#696969', linewidth = 0)
ax.auto_scale_xyz([-8000, 385000], [-8000, 385000], [-8000, 385000])

plt.show()

#  The code below finds the distance between path and l4                          
my_x, my_y, my_z = (xl4, yl4, 0.0)

delta_x = x - my_x
delta_y = y - my_y
delta_z = z - my_z
distance = np.array([np.sqrt(delta_x ** 2 + delta_y ** 2 + delta_z ** 2)])

minimum = np.amin(distance)

print("Closet approach to L4 is", minimum) 
```

`Mathematica`

```
ClearAll["Global`*"];
me = 5.974*10^(24);
mm = 7.348*10^(22);
G = 6.67259*10^(-20);
re = 6378;
rm = 1737;
r12 = 384400;

\[Pi]1 = me/(me + mm);
\[Pi]2 = mm/(me + mm);
M = me + mm;
\[Mu]1 = 398600;
\[Mu]2 = G*mm;
\[Mu] = \[Mu]1 + \[Mu]2;
\[CapitalOmega] = Sqrt[\[Mu]/r12^3];
\[Nu] = -\[Pi]/4;

xl4 = 384400/2 - 4671;
yl4 = Sqrt[3]/2*384400 // N;

Solve[\[CapitalOmega]^2*(xl4^2 + yl4^2) + 2 \[Mu]1/r12 + 
   2 \[Mu]2/r12 + 2*C == 0, C]
x = (re + 200)*Cos[\[Nu]] - \[Pi]2*r12 // N
y = (re + 200)*Sin[\[Nu]] // N

{{C -> -1.56824}}

-19.3098

-4651.35

vbo = Sqrt[\[CapitalOmega]^2*((x)^2 + (y)^2) + 
   2*\[Mu]1/Sqrt[(x + \[Pi]2*r12)^2 + (y)^2] + 
   2*\[Mu]2/Sqrt[(x - \[Pi]1*r12)^2 + (y)^2] + 2*(-1.21)]

10.8994

\[Gamma] = 0.4678*Pi/180;
vx = vbo*(Sin[\[Gamma]]*Cos[\[Nu]] - Cos[\[Gamma]]*Sin[\[Nu]]);
vy = vbo*(Sin[\[Gamma]]*Sin[\[Nu]] + Cos[\[Gamma]]*Cos[\[Nu]]);

r0 = {x, y, 0};
v0 = {vx, vy, 0}

{7.76974, 7.64389, 0}

s = NDSolve[{x1''[t] - 
      2*\[CapitalOmega]*x2'[t] - \[CapitalOmega]^2*
       x1[t] == -\[Mu]1/((Sqrt[(x1[t] + \[Pi]2*r12)^2 + 
             x2[t]^2])^3)*(x1[t] + \[Pi]2*
          r12) - \[Mu]2/((Sqrt[(x1[t] - \[Pi]1*r12)^2 + 
             x2[t]^2])^3)*(x1[t] - \[Pi]1*r12), 
    x2''[t] + 
      2*\[CapitalOmega]*x1'[t] - \[CapitalOmega]^2*
       x2[t] == -\[Mu]1/(Sqrt[(x1[t] + \[Pi]2*r12)^2 + x2[t]^2])^3*
       x2[t] - \[Mu]2/(Sqrt[(x1[t] - \[Pi]1*r12)^2 + x2[t]^2])^3*
       x2[t], x3''[t] == 0, x1[0] == r0[[1]], x1'[0] == v0[[1]], 
    x2[0] == r0[[2]], x2'[0] == v0[[2]], x3[0] == r0[[3]], 
    x3'[0] == v0[[3]]}, {x1, x2, x3}, {t, 0, 1000000}];

ParametricPlot3D[
 Evaluate[{x1[t], x2[t], x3[t]} /. s], {t, 0, 10*24*3600}, 
 PlotStyle -> {Red, Thick}]

g1 = ParametricPlot3D[
   Evaluate[{x1[t], x2[t], x3[t]} /. s], {t, 0, 5.75*3600*24}, 
   PlotStyle -> {Red}, 
   PlotRange -> {{-10000, 400000}, {-10000, 400000}}];
g2 = Graphics3D[{Blue, Opacity[0.6], Sphere[{-4671, 0, 0}, re]}];
g3 = Graphics3D[{Green, Opacity[0.6], Sphere[{379729, 0, 0}, rm]}];
g4 = Graphics3D[{Black, Sphere[{xl4, yl4, 0}, 2000]}];
Show[g2, g1, g3, g4, Boxed -> False]

(*XYdata=Flatten[Table[Evaluate[{x1[t],x2[t],x3[t]}/.s],{t,5.5*24*\
3600,5.78*24*3600,1}],1];
X1Y1data=Flatten[Table[Evaluate[{x1'[t],x2'[t],x3'[t]}/.s],{t,5.5*24*\
3600,5.78*24*3600,1}],1];
SetDirectory[NotebookDirectory[]];
Export["OrbitData.txt",XYdata,"CSV"];
Export["OrbVeloc.txt",X1Y1data,"CSV"];*) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-05T07:41:10.713

如果此时您的问题已减少到只想使用 Runge-Kutta，您可以例如替换此行：

```
u = odeint(deriv, u0, dt) 
```

像这样：

```
#reverse the order of arguments
def deriv2(t,u):
    return deriv(u,t)

# initialize a 4th order Runge-Kutta ODE solver
solver = ode(deriv2).set_integrator('dopri5')
solver.set_initial_value(u0)
u = np.empty((len(dt), 6))
u[0,:] = u0
for ii in range(1,len(dt)):
    u[ii] = solver.integrate(dt[ii]) 
```

（+显然用 ode 替换 odeint 导入）。

请注意，对于这种类型的 ODE，这要慢得多。

要使用 dop853，请使用 solver.set_integrator('dop853')。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T04:58:35.463

我重新编写了 ode 的 def deriv 部分，它现在可以工作了！所以`Mathematica`情节和`Python`同意。

```
def deriv(u, dt):
    return [u[3],  #  dotu[0] = u[3]                                                 
            u[4],  #  dotu[1] = u[4]                                                 
            u[5],  #  dotu[2] = u[5]                                                 
            (2 * omega * u[4] + omega ** 2 * u[0] - mue * (u[0] + pi2 * r12) /
             np.sqrt(((u[0] + pi2 * r12) ** 2 + u[1] ** 2) ** 3) - mum *
             (u[0] - pi1 * r12) /
             np.sqrt(((u[0] - pi1 * r12) ** 2 + u[1] ** 2) ** 3)),
            #  dotu[3] = that                                                        
            (-2 * omega * u[3] + omega ** 2 * u[1] - mue * u[1] /
             np.sqrt(((u[0] + pi2 * r12) ** 2 + u[1] ** 2) ** 3) - mum * u[1] /
             np.sqrt(((u[0] - pi1 * r12) ** 2 + u[1] ** 2) ** 3)),
            #  dotu[4] = that                                                        
            0]  #  dotu[5] = 0 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-27T15:21:25.593

检查准确性的一种方法可能是：

花一个时间，使 2 个轨迹彼此足够不同（例如，轨迹中的最后一个时间/点）。将此作为新的起点并及时整合到初始时间（或者，如果您愿意，可以在时间上向前整合，但反转模拟中所有物体的速度）。此模拟的最后一点应该（接近）您在原始模拟中的初始点。通过比较您与原始初始点的实际接近程度，您可以判断 python 与 mathematica 求解器例程的优劣。我的猜测是 Mathematica 例程要好得多，所以所有这些 Python 的东西都是浪费时间。

另一种方式可能是这样：使用 Mathematica，您得到的是一个插值函数，您可以用符号方式推导它，然后对其导数进行数值计算。将这些值插入 ODE 的不同点，看看它们是否满足 ODE。在 python 中做类似的事情并比较结果。

# android - Android - TextView 根本不出现

> ID：16222304
> 
> 赞同：0
> 
> 时间：2013-04-25T18:41:42.210
> 
> 标签：android, android-layout, android-linearlayout, textview

我希望每个 TextView 出现在每个 ImageButton 下，但我的情况下的 TextView 根本没有出现，我不明白为什么。感谢您的帮助。这是我的 activity.xml ：

> ```
> <ImageView
>     android:id="@+id/imageView1"
>     android:layout_width="200dp"
>     android:layout_height="200dp"
>     android:layout_gravity="center"
>     android:src="@drawable/logo" />
> 
> <LinearLayout
>     android:id="@+id/linearLayout1"
>     android:layout_width="match_parent"
>     android:layout_height="wrap_content"
>     android:orientation="horizontal" >
> 
>     <ImageButton
>         android:id="@+id/imageButtonProjet"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:layout_marginBottom="25dp"
>         android:layout_marginLeft="25dp"
>         android:adjustViewBounds="false"
>         android:scaleType="centerCrop"
>         android:src="@drawable/projet" />
> 
>     <ImageButton
>         android:id="@+id/imageButtonWorkitem"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:layout_marginBottom="25dp"
>         android:layout_marginLeft="25dp"
>         android:adjustViewBounds="false"
>         android:scaleType="centerCrop"
>         android:src="@drawable/workitem" />
> 
>     <ImageButton
>         android:id="@+id/imageButtonUser"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:layout_marginBottom="25dp"
>         android:layout_marginLeft="25dp"
>         android:adjustViewBounds="false"
>         android:scaleType="centerCrop"
>         android:src="@drawable/user" />
> 
>     <TextView
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:layout_below="@id/imageButtonProjet"
>         android:layout_marginLeft="32dp"
>         android:text="Projects"
>         android:textColor="@color/text_color" >
>     </TextView>
> 
>     <TextView
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:layout_below="@id/imageButtonWorkitem"
>         android:layout_marginLeft="62dp"
>         android:text="WorkItem"
>         android:textColor="@color/text_color" >
>     </TextView>
> 
>     <TextView
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:layout_below="@id/imageButtonUser"
>         android:layout_marginBottom="28dp"
>         android:layout_marginLeft="65dp"
>         android:text="Users"
>         android:textColor="@color/text_color" >
>     </TextView>
> </LinearLayout> 
> ```

非常感谢您的帮助。在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:50:17.440

```
android:layout_below 
```

不适用于`LinearLayout`. 您应该使用`RelativeLayout`来强制项目出现在彼此相关的位置。

根据您希望`ImageButton`s 出现的位置，您可能需要添加类似

```
<ImageButton
android:id="@+id/imageButtonWorkitem"
  android:layout_below="@id/imageButtonWorkitem" 
```

或者

```
<ImageButton
android:id="@+id/imageButtonWorkitem"
  android:layout_toRightOf="@id/imageButtonWorkitem" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:56:09.703

layout_below 仅适用于相对布局。如果您仍想使用 LinearLayout，那么这就是方法。您只是使用一个具有水平方向的 LinearLayout。所有这一切都会水平排列项目，因此文本视图会离开屏幕。您需要一个 2 个子 LinearLayouts，其方向设置为水平，而父对象的方向设置为垂直。

```
 <ImageView
    android:id="@+id/imageView1"
    android:layout_width="200dp"
    android:layout_height="200dp"
    android:layout_gravity="center"
    android:src="@drawable/logo" />

     <LinearLayout
     android:id="@+id/linearLayout_parent"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:orientation="vertical" >
     <LinearLayout
     android:id="@+id/linearLayout1"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:orientation="horizontal" >
     <ImageButton
     android:id="@+id/imageButtonProjet"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_marginBottom="25dp"
     android:layout_marginLeft="25dp"
     android:adjustViewBounds="false"
     android:scaleType="centerCrop"
     android:src="@drawable/projet" />

     <ImageButton
     android:id="@+id/imageButtonWorkitem"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_marginBottom="25dp"
     android:layout_marginLeft="25dp"
     android:adjustViewBounds="false"
     android:scaleType="centerCrop"
     android:src="@drawable/workitem" />

    <ImageButton
    android:id="@+id/imageButtonUser"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="25dp"
    android:layout_marginLeft="25dp"
    android:adjustViewBounds="false"
    android:scaleType="centerCrop"
    android:src="@drawable/user" />
    </LinearLayout>

   <LinearLayout
     android:id="@+id/linearLayout2"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:orientation="horizontal" >
    <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="32dp"
    android:text="Projects"
    android:textColor="@color/text_color" >
    </TextView>

    <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="62dp"
    android:text="WorkItem"
    android:textColor="@color/text_color" >
    </TextView>

    <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="28dp"
    android:layout_marginLeft="65dp"
    android:text="Users"
    android:textColor="@color/text_color" >
    </TextView>
    </LinearLayout>

    </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:47:34.483

您需要在线性布局中的图像视图之间交替。此外，您可能根本看不到文本视图，因为整体布局可能太高了。

```
<ImageView
android:id="@+id/imageView1"
android:layout_width="200dp"
android:layout_height="200dp"
android:layout_gravity="center"
android:src="@drawable/logo" />

<LinearLayout
android:id="@+id/linearLayout1"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<ImageButton
    android:id="@+id/imageButtonProjet"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="25dp"
    android:layout_marginLeft="25dp"
    android:adjustViewBounds="false"
    android:scaleType="centerCrop"
    android:src="@drawable/projet" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/imageButtonProjet"
    android:layout_marginLeft="32dp"
    android:text="Projects"
    android:textColor="@color/text_color" >
</TextView>

<ImageButton
    android:id="@+id/imageButtonWorkitem"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="25dp"
    android:layout_marginLeft="25dp"
    android:adjustViewBounds="false"
    android:scaleType="centerCrop"
    android:src="@drawable/workitem" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/imageButtonWorkitem"
    android:layout_marginLeft="62dp"
    android:text="WorkItem"
    android:textColor="@color/text_color" >
</TextView>

<ImageButton
    android:id="@+id/imageButtonUser"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="25dp"
    android:layout_marginLeft="25dp"
    android:adjustViewBounds="false"
    android:scaleType="centerCrop"
    android:src="@drawable/user" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/imageButtonUser"
    android:layout_marginBottom="28dp"
    android:layout_marginLeft="65dp"
    android:text="Users"
    android:textColor="@color/text_color" >
</TextView>
</LinearLayout> 
```

# zooming - 无法在没有对象消失的情况下缩放滚动宇宙 java 3d

> ID：16222307
> 
> 赞同：0
> 
> 时间：2013-04-25T18:41:47.780
> 
> 标签：zooming, behavior, java-3d, orbit

好吧，这有点烦人，当我尝试缩小时，我的对象开始消失，然后变黑并与背景合并，所以我不能尽可能地缩小，我正在使用 OrbitBehavior 并设置边界然后我将它稳定到我的宇宙的观察平台上，如下所示：

```
 OrbitBehavior B = new OrbitBehavior(zonaDibujo);
 B.setSchedulingBounds(new BoundingSphere(new Point3d(0.0, 0.0, 0.0), 1000.0) );
 universo.getViewingPlatform().setViewPlatformBehavior(B); 
```

有任何想法吗？

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T16:56:58.967

这可能与使用的内存量有关。在运行程序之前尝试为程序设置一些内存分配器

CMD 中的示例

Java -Xms1024M -Xmx8192M

就像

```
 Xms is the starting heap size 
  Xmz is the maximum heap size 
```

# eclipse - Scala 中的这段代码有什么问题？（长期需要）

> ID：16222309
> 
> 赞同：1
> 
> 时间：2013-04-25T18:42:01.560
> 
> 标签：eclipse, scala, types, long-integer

我是使用 Scala 的新手，大多数时候我不知道如何处理错误消息。有人可以帮我处理这段代码吗？我需要更改什么才能使此代码正常工作？顺便说一句，我正在用 Scala 编写 Euklid 的最大公约数。

```
 def userInput() {
    var x: String = Console.readLine("Please enter the first number you want to calculate. ")
    var y: String = Console.readLine("Please enter the second number you want to calculate. ")
    println(userInput())
  }

  def ggt(firstNumber: Long, secondNumber: Long): Long = {
    var x = firstNumber
    var y = secondNumber

    if (y == 0) {
      return x
    }

  } 
```

我得到的错误是“类型不匹配；发现：需要的单位：长”在这一行：if（y == 0）{

我应该改变什么？提前感谢你们的帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T18:49:26.570

您的`ggt`函数需要返回 a`Long`并且它并不总是这样做。首先，您可以删除`return`关键字，因为 scala 函数将始终返回最后一行的内容。然后，您需要一个返回值何时`y != 0`使此函数定义有效。现在，它正在返回`Unit`，这就像`void`因为那里没有 else 块。更改为这样的内容，您应该已准备就绪：

```
def ggt(firstNumber: Long, secondNumber: Long): Long = {
  var x = firstNumber
  var y = secondNumber

  if (y == 0) x
  else y
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T18:55:18.823

首先，如果你想从命令行读取数字，那么你的 userInput 不正确，应该是这样的：

```
def readNumbers(): (Long, Long) = {
  println("Print the first number")
  val first = Console.readLong()
  println("Println the seconds number")
  val second = Console.readLong()
  (first, second)
} 
```

然后读数字：

```
val (a, b) = readNumbers() 
```

GCD方法：

```
def gcd(a: Long, b: Long): Long = if (b == 0) a else gcd(b, a % b) 
```

并在数字上调用它：

```
gcd(a, b) 
```

一方面，Scala 是函数式的，因此每个表达式都会产生一些值，而在 Scala 中 if 是表达式，而不是语句。

# python - Python从tcp套接字解包二进制流

> ID：16222310
> 
> 赞同：3
> 
> 时间：2013-04-25T18:42:03.007
> 
> 标签：python, sockets, struct

好的，所以我认为熟悉 Python 是个好主意。（我有过Java、php、perl、VB等方面的经验，不是什么高手，而是中级知识）

所以我正在尝试编写一个脚本，该脚本将从套接字中获取数据，并将其转换为屏幕。要遵循的粗略开始代码：

我的代码似乎正确地从套接字读取二进制信息，但我无法解压缩它，因为我无权访问原始结构。

我有这个流的输出和不同的程序，（写得很糟糕，这就是我要解决这个问题的原因）

当我打印出recv时，就像这样......

```
b'L\x00k\x07vQ\n\x01\xffh\x00\x04NGIN\x04MAIN6Product XX finished reprocessing cdc XXXXX at jesadr 0c\x00k\x07vQ\n\x01\xffF\x00\x06CSSPRD\x0cliab_checkerCCheckpointed to XXXXXXXXXXXXXXXX:XXXXXXX.XXX at jesadr 0 (serial 0)[\x00l\x07vQ\n\x00\xff\x01\x00\x05MLIFE\x06dayendBdayend 1 Copyright XXXX XXXXXXX XXXXXXX XXXXX XXX XXXXXX XXXXXXXX. 
```

从这个角度来看，并将其与另一个程序的输出进行比较，我推测它应该被分解为..

```
b'L\x00k\x07vQ\n\x01\xffh\x00\x04NGIN\x04MAIN6Product XX finished reprocessing cdc XXXXX at jesadr 0' 
```

有相应的信息

```
04-23
00:00:43
10
1
NGIN
MAIN
255
104
Product XX finished reprocessing cdc XXXXX at jesadr 0 
```

现在，根据我的研究，看起来我需要使用“结构”并将其解压缩，但是我不知道它的原始结构，我只知道从中可以获得哪些信息，老实说，我搞清楚这件事真是费了好大劲。

我已经使用 python 解释器尝试解开该行的点点滴滴，但这是一个令人沮丧的练习。

如果有人至少可以帮助我入门，我将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:32:21.923

好的。我想我已经设法解码它，虽然我不确定中间的 16 位值。

这个 Python 2.7 代码...

```
from cStringIO import StringIO
import struct
import time

def decode(f):

    def read_le16(f):
        return struct.unpack('<h', f.read(2))[0]

    def read_timestamp(f):
        ts = struct.unpack('<l', f.read(4))[0]
        return time.ctime(ts)

    def read_byte(f):
        return ord(f.read(1))

    def read_pascal(f):
        l = ord(f.read(1))
        return f.read(l)

    result = []

    # Read total length
    result.append('Total message length is %d bytes' % read_le16(f))

    # Read timestamp
    result.append(read_timestamp(f))

    # Read 3 x byte
    result.append(read_byte(f))
    result.append(read_byte(f))
    result.append(read_byte(f))

    # Read 1 x LE16
    result.append(read_le16(f))

    # Read 3 x pascal string
    result.append(read_pascal(f))
    result.append(read_pascal(f))
    result.append(read_pascal(f))

    return result

s = 'L\x00k\x07vQ\n\x01\xffh\x00\x04NGIN\x04MAIN6Product XX finished reprocessing cdc XXXXX at jesadr 0c\x00k\x07vQ\n\x01\xffF\x00\x06CSSPRD\x0cliab_checkerCCheckpointed to XXXXXXXXXXXXXXXX:XXXXXXX.XXX at jesadr 0 (serial 0)[\x00l\x07vQ\n\x00\xff\x01\x00\x05MLIFE\x06dayendBdayend 1 Copyright XXXX XXXXXXX XXXXXXX XXXXX XXX XXXXXX XXXXXXXX.'

f = StringIO(s)
print decode(f)
print decode(f)
print decode(f) 
```

...产量...

```
['Total message length is 76 bytes', 'Tue Apr 23 05:00:43 2013', 10, 1, 255, 104, 'NGIN', 'MAIN', 'Product XX finished reprocessing cdc XXXXX at jesadr 0']
['Total message length is 99 bytes', 'Tue Apr 23 05:00:43 2013', 10, 1, 255, 70, 'CSSPRD', 'liab_checker', 'Checkpointed to XXXXXXXXXXXXXXXX:XXXXXXX.XXX at jesadr 0 (serial 0)']
['Total message length is 91 bytes', 'Tue Apr 23 05:00:44 2013', 10, 0, 255, 1, 'MLIFE', 'dayend', 'dayend 1 Copyright XXXX XXXXXXX XXXXXXX XXXXX XXX XXXXXX XXXXXXXX.'] 
```

时间戳是 5 小时，所以我假设这是一个时区的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:55:30.340

在不知道二进制流的结构的情况下，虽然有足够的时间对其进行逆向工程，但很难解析，你可能会接近或幸运。

虽然如果客户端程序使用了 pickle 协议，那么你很幸运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T20:40:11.553

到目前为止，我只对代码进行了逆向工程，而不是二进制流，所以我远非你所面临挑战的专家。但是，我想就如何尝试解决您的问题分享我的想法。也许那里的某个人觉得这很有用（也许有时我自己一个人）。

TL;DR 相关教育视频：[Harald Welte at 27C3](http://media.ccc.de/browse/congress/2010/27c3-4036-en-reverse_engineering_a_real_word_rfid_payment_system.html "27C3：对现实世界的 RFID 支付系统进行逆向工程")

## 路线图

### 1\. 背景

尽可能多地获取有关程序的信息（编程语言、已知的序列化程序/序列化格式、已知的怪癖等）、域、该领域的任何规范……

### 2\. 收藏

收集流的足够长的部分，或者，如果您知道消息的外观（任何消息开始/消息结束标记），则收集适当的消息束。还要收集参考程序的相应输出。

### 3\. 低垂的果实

尝试识别可以在有线协议和相应输出中轻松发现的字符串和数字。记下哪些部分不是很好理解。

### 4.睁大眼睛

通过查找有线协议消息中的重复和差异来扩展您的知识。尝试将那些“有趣的地方”与记录输出中的重复和差异相匹配。

### 5\. 假设

根据你所知道的创建关于线路格式的假设。尤其要考虑第 1 步中的信息，这些信息可能会对您正在发生的事情有所帮助。另外，想想时间戳、序列号、校验和、消息头、元数据等等。

### 6\. 验证

在代码中实现你的假设。针对您记录的数据集运行它以测试它是否按预期工作。然后，针对一组（可能更长的）新鲜样本——甚至你以前从未见过——来支持你的假设。如果出现问题，请返回步骤#5。

### 7.从头再来

根据需要循环执行上述步骤，直到您可以提取您需要的所有信息，甚至更多信息。

## 闭幕致辞

我认为进行密集测试是一个好主意，以便确信您对有线协议的理解是正确的。这包括 A) 单元测试，以确保您在测试新假设时不会破坏脆弱代码中的内容，以及 B) 如验证步骤中所述，将新样本扔到代码中并检查您的期望是否仍然有效。

**但即便如此，你也可能错了。**即使进行了彻底的测试，这也不能*保证*您的假设是正确的。随时准备以新的方式思考，因为看起来如此清晰的东西实际上可能完全不同。

如有必要，请疯狂了解有线格式中可能隐藏的其他内容或事物的排列和/或关联方式。

在我的这段可能无用的文本之后，让我以一段视频结束：[Harald Welte 在 27C3](http://media.ccc.de/browse/congress/2010/27c3-4036-en-reverse_engineering_a_real_word_rfid_payment_system.html "27C3：对现实世界的 RFID 支付系统进行逆向工程")关于对真实世界的 RFID 支付系统进行逆向工程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T18:45:19.697

我会说你使用 struct 是对的，但 struct 的糟糕之处在于你总是必须知道原始结构。

也许阅读 tcp 规范和 iso 会有所帮助，尽管弄清楚它仍然是一个地狱：/

# java - 阻止精灵相互穿过

> ID：16222312
> 
> 赞同：-1
> 
> 时间：2013-04-25T18:42:19.277
> 
> 标签：java, position, sprite

在我正在制作的游戏中，我想让僵尸无法穿过对方或玩家。

我不想让僵尸在撞到对方时停下一会儿或朝另一个方向移动，因为这看起来很奇怪，我希望僵尸始终跟随玩家。我当时的想法是跟踪僵尸之前的 x 和 y 位置（我已经在做），然后当它与另一个僵尸或玩家碰撞时，它会在与另一个僵尸碰撞之前传送到最后一个 x 和 y 位置精灵。

这行得通吗？有没有更好的方法来做到这一点？在僵尸与另一个精灵碰撞之前，我将如何跟踪最新的 x 和 y 位置？

我已经有了让僵尸碰撞的代码

```
for(int i = 0; i < zombies.size(); i++){
            Zombie z = (Zombie) zombies.get(i);
            Rectangle r2 = z.getBounds();
            for(int j = i + 1; j < zombies.size(); j++){
                Zombie z2 = (Zombie) zombies.get(j);
                Rectangle r1 = z2.getBounds();
                if(r2.intersects(r1)){
                    //the code for stoping the sprites from going through each other should be here
                }
            }
        } 
```

我只是想知道我应该在 if 语句中使用什么来使精灵不会相互通过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:54:34.593

作为对 tile 选项的一点建议：

假设你的游戏区域被组织成一个 16x16 的瓷砖地图，它可能看起来像这样：

```
Tile Map[16][16]; 
```

现在如果你的精灵移动了，你就会知道你想去哪个图块。

```
if(Map[NewX][NewY].Occupant == NULL) {
    Map[NewX][NewY].Occupant = Sprite;
    Map[Sprite.X][Sprite.Y].Occupant = NULL;
    Sprite.setLocation(NewX, NewY);
} 
```

包含一个`Tile`指向`Sprite`名为`Occupant`. 这个小理论将让您轻松检查您想去的领域是否已经被占用......或者如果没有，则移动。

如果相关领域已被占用，僵尸将停止移动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:56:00.740

您可能应该同时进行碰撞检查和移动：

```
for(int i = 0; i < zombies.size(); i++){
    Zombie z = (Zombie) zombies.get(i);

    // New code here:
    int x = z.getX();
    int y = z.getY();
    attemptZombieMove(z);

    Rectangle r2 = z.getBounds();
    for(int j = 0; j < zombies.size(); j++){
        if (i == j) {
            continue;
        }
        Zombie z2 = (Zombie) zombies.get(j);
        Rectangle r1 = z2.getBounds();
        if(r2.intersects(r1)){
            //the code for stoping the sprites from going through each other should be here
        }
    }
} 
```

请注意，我更改了内部`for`循环，以便`j`从 0 开始。我这样做是因为我们想要更改僵尸在循环中间的位置。因此，当我们检查僵尸 A 是否发生碰撞时，它可能不会与僵尸 B 发生碰撞，但在 B 移动后它们会发生碰撞。

您的碰撞检测可以将`z`'sx 和 y 值重置为`int`您在尝试移动之前抓取的 s `z`。你可以让它比这更复杂 - 如果 x 中存在冲突，则重置 x，如果 y 中存在冲突，则重置 y（如果两者都存在冲突，则重置两者）。这样僵尸就可以撞到另一个僵尸或墙壁或其他东西，然后沿着它走。

一个建议是使刻度足够短，以使每个僵尸在每个刻度中只移动一个像素。那样的话，让僵尸不移动并不会让它后退那么远，僵尸之间只需要一个像素的间隙，它们就可以全速朝着玩家前进。如果将其与小 1 个像素的碰撞框结合起来，那么您应该在僵尸移动时获得所需的僵尸密度。

此外，您可以`Zombie`扩展一个`CollidableObject`类，然后让内部循环遍历`CollidableObject`包含所有僵尸的 s 集合。这样你也可以编写一个`Wall`类，一个`Obstacle`类等，让它们都 extend `CollidableObject`，并将更多的对象放入`CollidableObject`列表中，并且与僵尸和障碍物的碰撞都将在一个循环中得到处理。

# automapper - 如何使用 AutoMapper 将 DataRow 映射到 WCF 服务中的对象？

> ID：16222313
> 
> 赞同：2
> 
> 时间：2013-04-25T18:42:21.603
> 
> 标签：automapper

我有一个调用存储过程并返回 DataTable 的 WCF 服务。我想在发送给消费者之前将 DataRows 转换为自定义对象，但不知道该怎么做。假设我从存储过程中检索了一个客户。为了简短起见，这里是通过 DataRow 的客户：

```
string lastName = dt.Rows[0]["LastName"].ToString();
string firstName = dt.Rows[0]["FirstName"].ToString();
string age = System.Convert.ToInt32(dt.Rows[0]["Age"].ToString()); 
```

我可以轻松找回客户。现在，我创建了一个 Customer 对象，如下所示：

```
public Customer
{
     public string LastName {get;set;}
     public string FirstName {get;set;}
     public int Age {get;set;}
} 
```

我从包管理器控制台加载了 AutoMapper。然后我在我的客户身上放了一个公共静态方法，如下所示：

```
public static Customer Get(DataRow dr)
{
     Mapper.CreateMap<DataRow, Customer>();
     return Mapper.Map<DataRow, Customer>(dr);
} 
```

当我单步执行我的代码时，从 Get() 返回的客户中的每个属性都是空的。我在这里想念什么？我是否必须添加自定义扩展才能从 DataRow 映射？这是一个[似乎相关的线程，](https://stackoverflow.com/questions/4759611/map-rowdatacollection-to-dto-using-automapper)但我认为 AutoMapper 会立即支持这一点，特别是因为属性名称与列名称相同。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T19:51:03.043

这行得通！

```
public static Customer GetSingle(DataTable dt)
{
    if (dt.Rows.Count > 0) return null;

    List<Customer> c = AutoMapper.Mapper.DynamicMap<IDataReader, List<Customer>>(dt.CreateDataReader());

    return c[0];
} 
```

# java - 使用 JavaScript 从获取的数据中更改 HTML 标签？

> ID：16222314
> 
> 赞同：1
> 
> 时间：2013-04-25T18:42:30.603
> 
> 标签：java, javascript, html

我正在尝试从使用 API 获取的数据中更改 HTML 标记。我现在正在页面上显示来自 API 的文本，但该文本包含我想制作不同标题的标题标签。例如到一个 . 我曾尝试使用：function(){ $('p').replaceWith('divs rule!'); }); 但这适用于整个页面。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:44:17.813

您可以在检索时替换数据：

```
.done(function (html) {
    $(html).find("p").replaceWith("divs rule!");
}); 
```

# forms - Symfony2：将参数传递给 query_builder 的 Form 实体对象

> ID：16222315
> 
> 赞同：0
> 
> 时间：2013-04-25T18:42:31.633
> 
> 标签：forms, symfony

在我的表格中，我使用此代码

```
$form->add('user', 'entity', 
        array(
                'label' => 'User Name',
                'class' => 'DotArtBundle:User',
                'property' => 'name',
                'query_builder' => function(EntityRepository $er){
                                return $er->createQueryBuilder('u')->where('u.type = 1');
                            }
            )
    ); 
```

我想

如果用户角色`ROLE_ADMIN`运行此代码并显示所有用户（此代码执行此操作）

如果用户角色是`ROLE_USER`此代码，则仅在列表中显示经过身份验证的用户

```
 'query_builder' => function(EntityRepository $er){
         return $er->createQueryBuilder('u')->where('u.type = 1 and u.id = ' . $this->getUser()->getId());
    } 
```

**错误** 我检查此代码并返回错误：

```
 $where  = 'u.id = '.$userid;
 $form = $this->createFormBuilder($poduct)
              ->add('user', 'entity', 
                      array(
                        'label' => 'نانم کاربری',
                        'class' => 'DotArtBundle:User',
                        'property' => 'name',
                        'query_builder' => function(EntityRepository $er){
                                               return $er->createQueryBuilder('u')->where($where);
                                                }
                                )
                        )
Notice: Undefined variable: where in C:\xampp\htdocs\ArtGirl\src\Dot\ArtBundle\Controller\ProductController.php line 38 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T05:35:38.117

**解决方案：**

```
$where  = '';
$userid = $this->getUser()->getId();
if (!$this->get('security.context')->isGranted('ROLE_ADMIN')){
    $where = ' and u.id = ' . $userid;
}

$form->add('user', 'entity', 
    array(
            'label' => 'نانم کاربری',
            'class' => 'DotArtBundle:User',
            'property' => 'name',
            'query_builder' => function(EntityRepository $er) use ($where){
                            return $er->createQueryBuilder('u')->where('u.type = 1 '.$where);
                        }
        )
) 
```

# java - 逻辑帮助 - java 正则表达式

> ID：16222317
> 
> 赞同：0
> 
> 时间：2013-04-25T18:42:38.323
> 
> 标签：java, android, regex, logic

我有一个包含图像标签的字符串，超过 1 个。现在我需要正则表达式输出`alt=`标签。我试过这样：

```
while (m3.find()) {
    Pattern p4 = Pattern.compile("<!\\[CDATA\\[(.*?)\\]\\]>");
    Matcher m4 = p4.matcher(m3.group());

    while (m4.find()) {
         if(m4.group().contains("<img src")) {
            Pattern p6 = Pattern.compile("<img src(.*?)/>");
        Matcher m6 = p6.matcher(m4.group());

        while (m6.find()) {
                Pattern p7 = Pattern.compile("alt=\"(.*?)\"");
                Matcher m7 = p7.matcher(m6.group());

            while (m7.find()) {
messages.add(m4.group().replace(m6.group(), m7.group().replace("alt=",  "").replace("\"", "")).replace("<![CDATA[", "").replace("]]>", ""));
                                } 
                            }
                        } else {
                            messages.add(m4.group().replace("<![CDATA[", "").replace("]]>", ""));
                        }
                    }
                } 
```

问题是：有超过 1 个图像标签。`messages`是一个数组列表。`messages.add`对于实际消息中的所有图像，我只需要 1 个。代码本身做了一些非常不同的事情，我不知道如何修复它或我的错误在哪里：/我只想用 的内容替换整个内容`alt="..."`，但每个实际消息都包含。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T23:03:58.447

[也许你应该使用像jsoup](http://jsoup.org/)这样的第三方库，它允许以 jquery 方式解析、提取和修改 html 文档。使用这个库，更改某些 html 元素的属性（如[这里所解释的](http://jsoup.org/cookbook/modifying-data/set-attributes)）应该像这样工作：

```
Document doc = Jsoup.parse(html);
doc.select("div.comments a").attr("rel", "nofollow"); 
```

# sitecore - 如何过滤显示在 Sitecore 树列表中的项目？

> ID：16222318
> 
> 赞同：2
> 
> 时间：2013-04-25T18:42:38.763
> 
> 标签：sitecore, sitecore6

我在 Sitecore 中有以下内容结构：

*   家
    *   产品
        *   AE
            *   样品产品 A
            *   B 样品产品 B
        *   缩略词
        *   KO
            *   L 样品产品 L
        *   PT
        *   乌兹别克斯坦

此外，每个产品都有一个名为“Active”的复选框字段。我想要一个允许用户选择一个或多个产品的 Treelist - 但他们应该只被允许选择选中 Active 复选框的产品。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T08:46:22.640

您还可以使用属性`IncludeTemplatesForDisplay`或`IncludeTemplatesForSelection`保持 TreeList 字段清洁。

`IncludeTemplatesForDisplay`确保只有那些模板会显示在 TreeList 中。
`IncludeTemplatesForSelection`允许您定义可以在 TreeList 字段中实际选择的模板。

在您的情况下，您可以设置`IncludeTemplatesForDisplay`Products 项目的模板，然后是 AE 等项目，以及实际的 Products 模板。如果您随后选择`IncludeTemplatesForSelection`，则可以确保内容编辑器仍然只能选择实际的产品项目。

其他参数是`ExcludeTemplatesForSelection`、`DatabaseName`、`ExcludeTemplatesForDisplay`、`IncludeItemsForDisplay`和。`ExcludeItemsForDisplay``AllowMultipleSelection`

请记住，不允许在选中复选框的情况下进行选择，但您可以考虑基于字段创建自定义字段`TreeList`，该字段具有检查字段是否已设置的附加属性`Active`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T23:40:43.390

听起来您可以使用 Sitecore 查询来实现您所需要的。查看[文档](http://sdn.sitecore.net/upload/sdn5/developer/using%20sitecore%20fast%20query/using%20sitecore%20fast%20query001.pdf)以了解确切的语法规则。

不过，并非所有字段类型都支持 Sitecore 查询，因此您需要使用支持的字段类型（Multilist）。或者，您可以实现[与 query 一起使用的自定义 TreeList 字段类型](http://sdn.sitecore.net/Scrapbook/Custom%20TreeList%20that%20supports%20query.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T00:17:14.770

我不确定是否有一种开箱即用的方法将树列表（或任何基于列表的字段）的数据源设置为一组项目并按其字段的值进行过滤。

换个角度想想怎么样。

如果您在树的其他地方有一个树的产品部分的镜像，但不是所有产品都在这个镜像部分中，您将只有活动的产品。此镜像部分中的项目将具有一个下拉链接字段，该字段映射到树的原始部分中的原始产品。要使此列表保持最新，您可以在保存原始产品时使用自定义操作。保存产品时，如果选中活动复选框，则在树的镜像产品部分创建**镜像产品**类型的项目（例如），并将下拉链接设置为原始产品。保存产品时，如果未选中“活动”复选框，则找到映射到正在保存的该产品的镜像产品并将其删除。

最后，树列表的数据源将是树的这些镜像产品部分的根，而不是原始产品本身。这样，您的树形列表的选项将始终仅映射到选中了“活动”复选框的产品的项目。

要记住的一件事：当您删除镜像产品时，如果它被树列表引用，则该引用将保留；在尝试使用树列表项之前，您需要让代码检查 null。

# php - 使用 PHP EWS 删除定期日历项目？

> ID：16222319
> 
> 赞同：3
> 
> 时间：2013-04-25T18:42:39.703
> 
> 标签：php, exchangewebservices, php-ews

在过去的几天里，我一直在学习使用[PHP-EWS 类](https://github.com/jamesiarmes/php-ews/wiki)来读取/更新/删除日历条目。我已经能够创建单个事件、读取一天的所有日历事件并删除事件。我的问题是我找不到有关删除整个系列重复事件的任何信息。当我删除一个事件时，我的代码只删除了 1 个事件的条目，而不是所有重复的实例。

不确定我是否只是将错误的 Id 和 ChangeKey 传递给删除代码，或者是否有特殊代码来处理重复事件。

我删除事件的代码如下：

```
<?php
// Define the delete item class
$request = new EWSType_DeleteItemType();
// Send to trash can, or use EWSType_DisposalType::HARD_DELETE instead to bypass the bin directly
$request->DeleteType = EWSType_DisposalType::MOVE_TO_DELETED_ITEMS;
$request->SendMeetingCancellations = EWSType_CalendarItemCreateOrDeleteOperationType::SEND_ONLY_TO_ALL;

$items = new EWSType_NonEmptyArrayOfBaseItemIdsType();
foreach ($IDs as $id) {
// Set the item to be deleted
    $item = new EWSType_ItemIdType();
    $item->Id = $id['Id'];
    $item->ChangeKey = $id['ChangeKey'];
    $items->ItemId[] = $item;
}
$request->ItemIds = $items;
// Send the request
$response = $this->ews->DeleteItem($request);
?> 
```

**更新：**

我创建了一个类来处理我的大部分 EWS 命令​​。这是我创建的用于处理获取主事件 ID 的函数。

```
public function GetMasterEventID($EventID)
{
    if (empty($EventID)) {
        return false;
    }

    $types = array('GetItemType', 'ItemQueryTraversalType', 'ItemResponseShapeType',
                   'DefaultShapeNamesType', 'NonEmptyArrayOfPathsToElementType', 'PathToUnindexedFieldType', 
                   'NonEmptyArrayOfBaseItemIdsType', 'RecurringMasterItemIdType');
    $this->LoadTypes($types);

    $request = new EWSType_GetItemType();
    $request->Traversal = EWSType_ItemQueryTraversalType::SHALLOW;
    $request->ItemShape = new EWSType_ItemResponseShapeType();
    $request->ItemShape->BaseShape = EWSType_DefaultShapeNamesType::ID_ONLY;

    $properties = array('item:Subject', 'item:Categories', 'item:DateTimeCreated',
                        'item:LastModifiedTime', 'item:Sensitivity', 'item:ItemClass',
                        'calendar:Start', 'calendar:End', 'calendar:CalendarItemType',
                        'calendar:IsRecurring', 'calendar:Recurrence', 'calendar:FirstOccurrence',
                        'calendar:LastOccurrence', 'calendar:ModifiedOccurrences', 'calendar:DeletedOccurrences');
    $request->ItemShape->AdditionalProperties = new EWSType_NonEmptyArrayOfPathsToElementType();
    foreach ($properties as $p) {
        $entry = new EWSType_PathToUnindexedFieldType();
        $entry->FieldURI = $p;
        $request->ItemShape->AdditionalProperties->FieldURI[] = $entry;
    }

    $request->ItemIds = new EWSType_NonEmptyArrayOfBaseItemIdsType();
    $request->ItemIds->RecurringMasterItemId = new EWSType_RecurringMasterItemIdType();
    $request->ItemIds->RecurringMasterItemId->OccurrenceId = $EventID;

    $response = $this->ews->GetItem($request);
    return $response;
} 
```

LoadTypes() 函数只是循环遍历所需的 EWSType 文件，然后包含它们，因此我不必加载每个类型文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T06:47:50.767

您首先需要找到周期性系列的主约会的 ID，然后删除该主约会。

我不'做' PHP，但这些是实际的 SOAP 调用做的伎俩。也许他们可以帮助您重回正轨：

从事件中获取重复出现的主 ID（和一些数据）：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://schemas.microsoft.com/exchange/services/2006/types" xmlns:mes="http://schemas.microsoft.com/exchange/services/2006/messages">
   <soapenv:Header>
      <typ:RequestServerVersion Version="Exchange2007_SP1"/>
   </soapenv:Header>
   <soapenv:Body>
      <mes:GetItem>
         <mes:ItemShape>
            <typ:BaseShape>IdOnly</typ:BaseShape>
            <typ:AdditionalProperties>
              <typ:FieldURI FieldURI="item:Subject" /> 
              <typ:FieldURI FieldURI="item:Categories" />
              <typ:FieldURI FieldURI="item:DateTimeCreated" />
              <typ:FieldURI FieldURI="item:LastModifiedTime" />
              <typ:FieldURI FieldURI="item:Sensitivity" />
              <typ:FieldURI FieldURI="item:ItemClass" />
              <typ:FieldURI FieldURI="calendar:Start" />
              <typ:FieldURI FieldURI="calendar:End" />
              <typ:FieldURI FieldURI="calendar:CalendarItemType" />
              <typ:FieldURI FieldURI="calendar:IsRecurring" />
              <typ:FieldURI FieldURI="calendar:Recurrence" />
              <typ:FieldURI FieldURI="calendar:FirstOccurrence" />
              <typ:FieldURI FieldURI="calendar:LastOccurrence" />
              <typ:FieldURI FieldURI="calendar:ModifiedOccurrences" />
              <typ:FieldURI FieldURI="calendar:DeletedOccurrences" />
            </typ:AdditionalProperties>
         </mes:ItemShape>
         <mes:ItemIds>
            <typ:RecurringMasterItemId OccurrenceId="AAMkADkyZT[snip]kgAAEA=="/>
         </mes:ItemIds>
      </mes:GetItem>
   </soapenv:Body>
</soapenv:Envelope> 
```

删除项目：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:typ="http://schemas.microsoft.com/exchange/services/2006/types" xmlns:mes="http://schemas.microsoft.com/exchange/services/2006/messages">
   <soapenv:Header>
      <typ:RequestServerVersion Version="Exchange2007_SP1"/>
      <typ:MailboxCulture>en-US</typ:MailboxCulture>
      <typ:TimeZoneContext>
        <typ:TimeZoneDefinition Id="W. Europe Standard Time"/>
      </typ:TimeZoneContext>
   </soapenv:Header>
   <soapenv:Body>
      <mes:DeleteItem DeleteType="HardDelete" SendMeetingCancellations="SendToNone">
         <mes:ItemIds>
            <!--You have a CHOICE of the next 3 items at this level-->
            <typ:ItemId Id="AQMkADkyZTQxNjUzLTcwZTQtNGRlNS04M2VmLWMxYmIBNWJiADUwZTYARgAAA4Kt4mOTlXZJrZx0v5cQm8IHAISmF1hx/2pAhQBTVUBmYgoAAAMhAAAAhKYXWHH/akCFAFNVQGZiCgAB57O2JwAAAA=="/>
            <!--typ:OccurrenceItemId RecurringMasterId="?" InstanceIndex="?"/>
            <typ:RecurringMasterItemId OccurrenceId="?"/-->
         </mes:ItemIds>
      </mes:DeleteItem>
   </soapenv:Body>
</soapenv:Envelope> 
```

# android - 在 Android 中阻止特定应用程序（通过修改源代码）

> ID：16222320
> 
> 赞同：2
> 
> 时间：2013-04-25T18:42:42.230
> 
> 标签：android, android-intent, android-source, android-framework

该项目涉及修改 Android 以阻止/拒绝启动特定应用程序。因此，如果用户尝试以任何方式启动任何预先列出的应用程序，则不应启动该应用程序。

我将修改 Android 源代码。有哪些不同的方法可以做到这一点？欢迎提出建议。

我认为其中一种可能的方法是`Process.java`在`frameworks/base/core/java/android/os`. 此类具有`start`接收`uid`作为输入参数的功能。我认为从这个参数我们可以知道正在为哪个应用程序创建新进程。这是正确的方法吗？

此外，由于应用程序是使用意图启动的，是否可以（通过修改任何类）删除特定意图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T01:31:01.547

通常，当应用程序（其活动、服务）可以处理意图并且用户更喜欢该应用程序来处理它时。在`ActivityManagerService(Ams)`Android框架中会先看目标activity/service对应的应用是否还活着。如果尚未启动或终止，则 Ams 将通过调用`startProcessLocked`方法启动该应用程序。

```
final ProcessRecord startProcessLocked(String processName,
            ApplicationInfo info, boolean knownToBeDead, int intentFlags,
            String hostingType, ComponentName hostingName, boolean allowWhileBooting,
            boolean isolated) {
    //you can get the uid from ApplicationInfo.uid
    ...
    startProcessLocked(app, hostingType, hostingNameStr);
    ...
}

private final void startProcessLocked(ProcessRecord app,
            String hostingType, String hostingNameStr) {
    //prepare its uid, gid, gids for starting that process
    ...
    Process.ProcessStartResult startResult = Process.start("android.app.ActivityThread",
                    app.processName, uid, uid, gids, debugFlags, mountExternal,
                    app.info.targetSdkVersion, null, null);
    ...
} 
```

所以在那个方法中，它开始了一个新的过程。这`Process.start`就是您在问题中提到的，它最终调用 Zygote 来分叉一个新进程。

我觉得在ams中截取应用程序启动过程是比较好的方法。您可以获得有关此应用程序的更多信息，它也是您`Process.start`方法的上游。

更新：

刚刚注意到您正在考虑限制意图。一个意图可以由多个应用程序处理，因此我们不能限制应用程序发送特定的意图。但是我们可以修改解析过程。`Resolving`意味着 Android 框架需要确定哪个活动/服务可以处理这个意图。如果有多个选择并且用户没有设置任何偏好，则会出现以下对话框：

![意图处理](https://i.stack.imgur.com/y48m7.jpg)

因此，可以修改解析过程，让 Android 框架放弃您的特定应用程序能够处理该意图的事实。我认为这也是一种完成工作的方式，但它更加复杂，因为 Android 以不同的方式解析活动、服务和接收者的意图。对于活动，Ams 将调用`resolveIntent`以`PackageManagerService`获取要开始的活动。对于服务，它是get调用的`resolveService`方法。`PackageManagerService`所以你需要以不同的方式处理它们。但是因为他们都会在他们的实现中得到一个 ResolveInfo 的列表，所以你可以很容易地过滤掉你的应用程序。例如，在`resolveIntent`中`PackageManagerService`：

```
@Override
public ResolveInfo resolveIntent(Intent intent, String resolvedType,
        int flags, int userId) {
    if (!sUserManager.exists(userId)) return null;
    enforceCrossUserPermission(Binder.getCallingUid(), userId, false, "resolve intent");
    List<ResolveInfo> query = queryIntentActivities(intent, resolvedType, flags, userId);
    //filter out here!!!!
    return chooseBestActivity(intent, resolvedType, flags, query, userId);
} 
```

如果您查看`ResolveInfo.java`.

对于receiver来说就更复杂了，因为AndroidManifest.xml中注册的receiver和by`registerReceiver(...)`是不同的。如果broadcastIntent 中的intent 没有设置标志FLAG_RECEIVER_REGISTERED_ONLY（常见情况），那么解析结果将是一个收听该广播的接收者列表，其中可能包含两种接收者。对于 AndroidManifest.xml 中的那些，Ams 将调用`queryIntentReceiver`以`PackageManagerService`获取收听广播的接收者列表。对于由 动态注册的`registerReciever(...)`，它们是由`ActivityManagerService`not管理的`PackageManagerService`，所以 Ams 会直接调用`mReceiverResolver.queryIntent`来获取那些接收者。`mReceiverResolver`定义为：

```
final IntentResolver<BroadcastFilter, BroadcastFilter> mReceiverResolver
        = new IntentResolver<BroadcastFilter, BroadcastFilter>() {
        ...
} 
```

因此，您需要做的是重写 queryIntent 方法以过滤掉应用程序中的接收者。对于 ContentProvider，该方法`resolveContentProvider`位于`PackageManagerService`. 同样的处理方式。

# c# - 使用 jQuery 将值传递给后面的代码

> ID：16222321
> 
> 赞同：3
> 
> 时间：2013-04-25T18:42:50.373
> 
> 标签：c#, jquery, asp.net

需要从带有参数的超链接将网页中的值传递给代码隐藏，例如 page.aspx?id=1。如果合适，我想使用 jQuery

如何将此值传递给后面的代码而不在浏览器中公开为查询字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:48:05.423

一种方法是使用 ASP.NET 隐藏字段。

```
<asp:HiddenField id="hdnWhatever" runat="server" value="blah" /> 
```

然后可以使用 javascript 或 jquery 操作此字段，也可以轻松地在您的代码隐藏中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:51:07.400

尝试将表单提交为 jSON .. 示例 -> 将 [#form-request] 替换为您的表单，并将 [/index.php?option=com_seomozapi&task=request.save] 替换为文件操作/目标 .. return false 将继续关注当前页面（无服务器端刷新）

```
getScript('//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js', function() {
    js = jQuery.noConflict();
    js(document).ready(function() {
        js('#form-request').submit(function(event) {

            console.log('test 1');

            $.post('/index.php?option=com_seomozapi&task=request.save'); ?>', $('#form-request').serialize(), function (data, textStatus) {
                //Do something here
            });
            console.log('test 3');
            return false;
            console.log('test 4');
        });
    });
}); 
```

# android - 在 DDMS 中找不到 SqliteDatabase

> ID：16222322
> 
> 赞同：0
> 
> 时间：2013-04-25T18:42:52.343
> 
> 标签：android, sql

我已经坚持了一段时间了，我多次更改我的代码，这让我很痛苦。无论如何，我已经在 sql 数据库浏览器中创建了一个数据库，我一直在阅读如何将它放置在我正在开发的应用程序中时刻。所以我把它放在我的资产文件夹中并创建了一个数据库助手 java 类。但我只是可以将我的 DB 文件放入 Eclipse DDMS 我查看了堆栈溢出的答案，但只是不知道问题出在哪里。我再次将我的 DBHelper 代码更改为[Database not copying from assets](https://stackoverflow.com/questions/5945196/database-not-copying-from-assets/5945326#5945326)并且在我的 DDMS 中仍然没有 DB 文件。

你看到的图像是我现在的样子。这是我对 android 新手所做的第一个计算机编码。谢谢

[http://s1.postimg.org/6u667r3bj/snip1.jpg](http://s1.postimg.org/6u667r3bj/snip1.jpg)

[http://s13.postimg.org/l5vsas40n/snip2.jpg](http://s13.postimg.org/l5vsas40n/snip2.jpg)

```
 package com.mybasicapp;

   import java.io.File;
   import java.io.FileOutputStream;
   import java.io.IOException;
   import java.io.InputStream;
   import java.io.OutputStream;

   import android.content.Context;
   import android.database.SQLException;
   import android.database.sqlite.SQLiteDatabase;
   import android.database.sqlite.SQLiteException;
   import android.database.sqlite.SQLiteOpenHelper;

   public class DataBaseHelper extends SQLiteOpenHelper{
   private Context mycontext;

  private String DB_PATH = "/data/data/gr.peos/databases/";
 //private String DB_PATH = 
 mycontext.getApplicationContext().getPackageName()+"/databases/";
 private static String DB_NAME = "BLib.sqlite";//the extension may be .sqlite or .db
 public SQLiteDatabase myDataBase;
  /*private String DB_PATH = "/data/data/"
                        + mycontext.getApplicationContext().getPackageName()
                        + "/databases/";*/

  public DataBaseHelper(Context context) throws IOException  {
   super(context,DB_NAME,null,1);
   this.mycontext=context;
   boolean dbexist = checkdatabase();
   if(dbexist)
  {
    //System.out.println("Database exists");
    opendatabase(); 
  }
  else
  {
    System.out.println("Database doesn't exist");
   createdatabase();
  }

 }

  public void createdatabase() throws IOException{
   boolean dbexist = checkdatabase();
   if(dbexist)
   {
    //System.out.println(" Database exists.");
   }
   else{
       this.getReadableDatabase();
    try{
        copydatabase();
    }
    catch(IOException e){
        throw new Error("Error copying database");
      }
    }
  }
  private boolean checkdatabase() {
    //SQLiteDatabase checkdb = null;
   boolean checkdb = false;
    try{
    String myPath = DB_PATH + DB_NAME;
    File dbfile = new File(myPath);
    //checkdb = SQLiteDatabase.openDatabase(myPath,null,SQLiteDatabase.OPEN_READWRITE);
    checkdb = dbfile.exists();
     }
     catch(SQLiteException e){
    System.out.println("Database doesn't exist");
    }

     return checkdb;
   }
  private void copydatabase() throws IOException {

   //Open your local db as the input stream
   InputStream myinput = mycontext.getAssets().open(DB_NAME);

  // Path to the just created empty db
   String outfilename = DB_PATH + DB_NAME;

   //Open the empty db as the output stream
    OutputStream myoutput = new FileOutputStream("/data/data/gr.peos/databases  
  /BLib.sqlite");

    // transfer byte to inputfile to outputfile
   byte[] buffer = new byte[1024];
    int length;
   while ((length = myinput.read(buffer))>0)
   {
    myoutput.write(buffer,0,length);
    }

     //Close the streams
     myoutput.flush();
     myoutput.close();
     myinput.close();

   }

   public void opendatabase() throws SQLException
  {
   //Open the database
  String mypath = DB_PATH + DB_NAME;

 myDataBase = SQLiteDatabase.openDatabase(mypath, null, SQLiteDatabase.OPEN_READWRITE);

    }

    public synchronized void close(){
  if(myDataBase != null){
    myDataBase.close();
    }
    super.close();
    }

  @Override
   public void onCreate(SQLiteDatabase arg0) {
// TODO Auto-generated method stub

    }

   @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
// TODO Auto-generated method stub

   }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:02:31.103

If I understand you correct, you wont to add a ready SQLite file to you db folder.

1.  Open your emulator and make sure it's selected.

2.  In the DDMS open /data/data/[your_package_name]/databases folder and select it.

3.  Use the - + buttons to pull and insert the files.

![enter image description here](https://i.stack.imgur.com/c8epW.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:15:10.397

使用 SQLiteOpenHelper 是正确的方法。这对我很有效。但是，我要覆盖的唯一功能是

```
public void onCreate(SQLiteDatabase db) 
public void onUpgrade (SQLiteDatabase db, int oldVersion, int newVersion) 
```

我想我让它在其默认位置创建数据库，在我的应用程序内部存储区域的根目录中。

就您而言，如果我了解您发布的内容，您希望将数据库从资产文件夹复制到内部存储。我的建议是 4 个部分：

1.  暂时让 Android 为你创建一个空的 db 并弄清楚它放在哪里。
2.  修改您的 copyDatabase 代码以复制到该位置。
3.  重写 onCreate 以调用 copyDatabase。Android 只会在不存在数据库时调用 onCreate，因此您可以无条件调用 copyDatabase。
4.  将来，当您进行架构更改时，请在 onUpgrade 中处理它们。

这应该就是全部了。让我知道你在这方面的进展情况。

一个警告：onCreate 已经创建了一个空数据库，所以我不确定从资产复制数据库是否会起作用，而无需以某种方式关闭并重新打开数据库。我正在使用的另一种方法是将 DDL 放在您的资产文件中，然后在 onCreate 中处理它。像这样的东西（除了我使用的是字符串数组而不是资产文件）：

```
String[] ddl = 
{
  "CREATE TABLE [T1] ([id] INTEGER NOT NULL, [col1] CHAR);" +
  "CREATE TABLE [T2] ([id] INTEGER NOT NULL, [col2] CHAR)";
};

db.beginTransaction();
try
{
  for (int i = 0, limit = ddl.length;  i < limit;  i++)
    db.execSQL (ddl [i]);
} finally {
  db.endTransaction();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:01:58.537

您不必创建数据库并在项目中手动移动它。如果它不存在，它将自动创建。因此，有 2 种方法可以覆盖创建数据库并在数据库版本更改时对其进行更改。打电话

```
super(context, DB_NAME, null, 1); 
```

在构造函数中，“1”是您的数据库版本。如果将其更改为“2”并且数据库已经存在，则会调用“onUpgrade”。

```
public void onCreate(SQLiteDatabase db) 
```

如果您的数据库不存在，将自动调用。在此，您想向其中添加表格。

```
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
```

如果设备上的数据库版本低于应用程序中给定的数据库版本，将自动调用。在这种方法中，如果表格在版本之间发生了变化，您可以更改表格。

我建议创建第二个类来与您的数据库交互（打开/关闭/插入）。看看这个教程：[http ://www.vogella.com/articles/AndroidSQLite/article.html#databasetutorial_database](http://www.vogella.com/articles/AndroidSQLite/article.html#databasetutorial_database)

# java - Java - 如何从 LinkedHashMap 中获取一对？

> ID：16222324
> 
> 赞同：1
> 
> 时间：2013-04-25T18:42:55.977
> 
> 标签：java, key-value, linkedhashmap

具体来说，我想在“for each”循环中使用 LinkedHashMap。例如，假设我创建了一个 LinkedHashMap：

```
LinkedHashMap<String, Integer> someHash = new LinkedHashMap<String, Integer>(); 
```

然后我用一些东西填充它：

```
someHash.put("One", new Integer(1));
someHash.put("Two", new Integer(2)); 
```

现在我怎么能通过并得到每一对？我想要一些类似的东西：

```
for(<String, Integer> pair : someHash)
{
    //Do stuff.
} 
```

但这当然行不通。有没有一种简单的方法可以从哈希中检索“对”对象？还是我只需要遍历长度并分别获取值和键？另外，如果是这种情况，我真的应该使用不同的对象吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T18:44:50.443

您可以`Map.Entry`用来模拟`Pair`C++ 中存在的对象。

```
for(Map.Entry<String, Integer> entry : someHash.entrySet()) 
{
   System.out.println("Key: " + entry.getKey() + " Value: " + entry.getValue());
} 
```

这`entrySet`是您的所有键/值对`Map`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:47:39.410

像这样使用

```
 LinkedHashMap<String, Integer> someHash = new LinkedHashMap<String, Integer>();
    someHash.put("One", new Integer(1));
    someHash.put("Two", new Integer(2));

    for(String key : someHash.keySet())
    {
         System.out.println("Key : "+key + "  Value : "+someHash.get(key));
    } 
```

# mysql - MySQL获取结果的最大ID，除非列中的值等于1

> ID：16222325
> 
> 赞同：0
> 
> 时间：2013-04-25T18:42:56.690
> 
> 标签：mysql

我知道如何获得 Max ID。这很容易。但我有一种情况，MaxID 可能是值为 1 的行。示例.. 我有以下表格：

```
 CREATE TEMPORARY TABLE people (
    id INT NOT NULL
    ,NAME VARCHAR(50) NOT NULL
);

INSERT INTO people (id, NAME) VALUES (1, 'tony');
INSERT INTO people (id, NAME) VALUES (2, 'dave');
INSERT INTO people (id, NAME) VALUES (3, 'dan');

CREATE TEMPORARY TABLE orders (
    id INT NOT NULL
    ,peopleid INT NOT NULL
    ,VALUE INT
);

INSERT INTO orders (id, peopleid, VALUE) VALUES (1, 1, NULL);
INSERT INTO orders (id, peopleid, VALUE) VALUES (2, 1, 1);
INSERT INTO orders (id, peopleid, VALUE) VALUES (3, 1, NULL);
INSERT INTO orders (id, peopleid, VALUE) VALUES (4, 2, NULL);
INSERT INTO orders (id, peopleid, VALUE) VALUES (5, 2, NULL);
INSERT INTO orders (id, peopleid, VALUE) VALUES (6, 2, NULL);
INSERT INTO orders (id, peopleid, VALUE) VALUES (7, 2, NULL);
INSERT INTO orders (id, peopleid, VALUE) VALUES (8, 1, NULL);
INSERT INTO orders (id, peopleid, VALUE) VALUES (9, 2, NULL); 
```

当我运行查询时：

```
SELECT * FROM people AS p
    LEFT JOIN orders AS o ON o.peopleid = p.id 
```

我得到结果：

```
id  name  id  peopleid  value
1   tony  1   1         null
1   tony  2   1         1
1   tony  3   1         null
1   tony  8   1         null
2   dave  4   2         null
2   dave  5   2         null
2   dave  6   2         null
2   dave  7   2         null
2   dave  9   2         null
3   dan   null null     null 
```

我需要结果

```
id  name  id  peopleid  value
1   tony  2   1         1
2   dave  9   2         null
3   dan   null null     null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:45:49.293

```
 SELECT id FROM tablename
 ORDER BY value=1 DESC, id DESC
 LIMIT 1;

 SELECT persons.personid,persons.name,othertable.id
 FROM persons
 LEFT JOIN othertable 
    ON othertable.personid = persons.personid
 LEFT JOIN othertable check
    ON check.personid = persons.personid
    ON  check.id > othertable.id
    AND (othertable.value!=1 OR check.value=1)
 WHERE check.personid IS NULL; 
```

最后：

```
SELECT people.id,people.NAME,orders.id,orders.VALUE
FROM people
LEFT JOIN orders 
  ON orders.peopleid = people.id
LEFT JOIN orders checkbigger
  ON  checkbigger.peopleid = people.id
  AND (
    (
      checkbigger.id > orders.id
      AND orders.value <=> checkbigger.value
    )
    OR
    (
      orders.value IS NULL AND checkbigger.value IS NOT NULL
    )
  )
WHERE checkbigger.id IS NULL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:54:32.523

这将在不使用`LIMIT`. 如果没有`value = 1`行，则第一个`MAX`将为 null，因此`COALESCE`返回第二个`MAX`。如果有`value = 1`行，第一个`MAX`将是非空的，因此它会被返回。

```
SELECT
  COALESCE(
    MAX(CASE WHEN value = 1 THEN id END),
    MAX(CASE WHEN value IS NULL THEN id END))
FROM a 
```

# c# - 自定义配置部分处理程序的问题

> ID：16222326
> 
> 赞同：1
> 
> 时间：2013-04-25T18:43:00.860
> 
> 标签：c#, app-config, configurationsection, custom-sections

所以我对使用 app-config 文件完全陌生，我试图创建一个自定义配置处理程序，以便我可以从同一个键中读取多个值，我按照 Microsoft 网站上的文档进行操作，但遇到了问题。

每次我尝试运行我的代码时，它都会抛出这个错误

“无法识别的属性‘数据类型’。请注意，属性名称区分大小写。（C:\Users\stephen.carmody\Desktop\FlatFileFactory - Copy\FlatFileFactory\bin\Debug\FlatFileFactory.vshost.exe.Config 第 21 行）”

它似乎只识别元素中的前两个值，第三个“数据类型”抛出错误

这是我的配置文件

```
 <?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <!-- Configuration section-handler declaration area. -->
 <configSections>
  <sectionGroup name="propertyValuesGroup">
  <section
    name="propertyValues"
    type="FlatFileTestCaseAutomater.CustomConfigurationSectionHandler,FlatFileFactory"
    allowLocation="true"
    allowDefinition="Everywhere"
  />
</sectionGroup>
<!-- Other <section> and <sectionGroup> elements. -->
</configSections>

<!-- Configuration section settings area. -->

<propertyValuesGroup>
<propertyValues>
  <cHeaderProperty name="txnNo" nullable="yes" datatype="int" maxlength="" />
</propertyValues>
</propertyValuesGroup>

</configuration> 
```

这是我的自定义处理程序类：

```
namespace FlatFileTestCaseAutomater
{
    class CustomConfigurationSectionHandler : ConfigurationSection
    {
        [ConfigurationProperty("cHeaderProperty")]
        public CHeaderPropertyElement Property
    {
        get
        {
            return (CHeaderPropertyElement)this["cHeaderProperty"];
        }
        set
        { this["cHeaderProperty"] = value; }
    }
}

public class ClaimHeaderElement : ConfigurationElement
{
    [ConfigurationProperty("name", DefaultValue = "", IsRequired = true)]
    [StringValidator(InvalidCharacters = "~!@#$%^&*()[]{}/;'\"|\\", MinLength = 1, MaxLength = 60)]
    public String Name
    {
        get
        {
            return (String)this["name"];
        }
        set
        {
            this["name"] = value;
        }
    }

    [ConfigurationProperty("dataType", DefaultValue = "", IsRequired = true)]
    [StringValidator(InvalidCharacters = "~!@#$%^&*()[]{}/;'\"|\\", MinLength = 1, MaxLength = 60)]
    public String DataType
    {
        get
        {
            return (String)this["dataType"];
        }
        set
        {
            this["dataType"] = value;
        }
    }

    [ConfigurationProperty("maxLength", DefaultValue = int.MaxValue, IsRequired = false)]
   // [IntegerValidator(ExcludeRange = false, MaxValue = 24, MinValue = 0)]
    public int MaxLength
    {
        get
        { return (int)this["maxLength"]; }
        set
        { this["maxLength"] = value; }
    }

}

} 
```

这是调试期间发生中断的代码片段：

```
 FlatFileTestCaseAutomater.CustomConfigurationSectionHandler config =
    (FlatFileTestCaseAutomater.CustomConfigurationSectionHandler)System.Configuration.ConfigurationManager.GetSection(
    "propertyValuesGroup/propertyValues"); 
```

我知道之前已经发布过类似的帖子，但我已经在这几个小时没有运气了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:59:04.677

> 我可能错了，但你在配置中的名字似乎不是同一个“大小写”，它们都是小写的（数据类型和最大长度），粘贴到这里时是错字吗？

属性确实区分大小写 - 它应该是（基于您的代码）

```
<cHeaderProperty name="txnNo" nullable="yes" dataType="int" maxLength="" /> 
```

# javascript - 地理位置：仅移动谷歌地图标记而不重新加载地图

> ID：16222330
> 
> 赞同：7
> 
> 时间：2013-04-25T18:43:16.147
> 
> 标签：javascript, html, google-maps, google-maps-api-3, geolocation

当设备移动或设备变得更准确时，我只需要更新标记。当位置变化时也重新加载地图，我只需要移动制造商。我有以下代码：

```
if (navigator.geolocation) {
    navigator.geolocation.watchPosition(

    function(position){
    var latitude = position.coords.latitude;
    var longitude = position.coords.longitude;
    var accuracy = position.coords.accuracy;
    var coords = new google.maps.LatLng(latitude, longitude);
    var mapOptions = {
        zoom: 20,
        center: coords,
        streetViewControl: false,
        mapTypeControl: false,
        navigationControlOptions: {
            style: google.maps.NavigationControlStyle.SMALL
        },
        mapTypeId: google.maps.MapTypeId.ROADMAP
        };

     var capa = document.getElementById("capa");
     capa.innerHTML = "latitud: " + latitude + " longitud: " + "   aquesta es la precisio en metres  :  " + accuracy;  

        map = new google.maps.Map(
            document.getElementById("mapContainer"), mapOptions
            );
        var marker = new google.maps.Marker({
                position: coords,
                map: map,
                title: "ok"
        });

    },function error(msg){alert('Please enable your GPS position future.');  

  }, {maximumAge:0, timeout:5000, enableHighAccuracy: false});

}else {
    alert("Geolocation API is not supported in your browser.");
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T19:00:40.487

I believe that the problem is that you create a new map inside the watchPosition function. You only need to create one marker and then update its position inside the watchPosition function.

```
navigator.geolocation.watchPosition(
    function (position) {
        setMarkerPosition(
            currentPositionMarker,
            position
        );
    });

function setMarkerPosition(marker, position) {
    marker.setPosition(
        new google.maps.LatLng(
            position.coords.latitude,
            position.coords.longitude)
    );
} 
```

Maybe this example will help you:

```
<!doctype html>
<html lang="en">

    <head>
        <title>Google maps</title>
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=false&language=en"></script>
        <script type="text/javascript">

            var map,
                currentPositionMarker,
                mapCenter = new google.maps.LatLng(40.700683, -73.925972),
                map;

            function initializeMap()
            {
                map = new google.maps.Map(document.getElementById('map_canvas'), {
                   zoom: 13,
                   center: mapCenter,
                   mapTypeId: google.maps.MapTypeId.ROADMAP
                 });
            }

            function locError(error) {
                // the current position could not be located
                alert("The current position could not be found!");
            }

            function setCurrentPosition(pos) {
                currentPositionMarker = new google.maps.Marker({
                    map: map,
                    position: new google.maps.LatLng(
                        pos.coords.latitude,
                        pos.coords.longitude
                    ),
                    title: "Current Position"
                });
                map.panTo(new google.maps.LatLng(
                        pos.coords.latitude,
                        pos.coords.longitude
                    ));
            }

            function displayAndWatch(position) {
                // set current position
                setCurrentPosition(position);
                // watch position
                watchCurrentPosition();
            }

            function watchCurrentPosition() {
                var positionTimer = navigator.geolocation.watchPosition(
                    function (position) {
                        setMarkerPosition(
                            currentPositionMarker,
                            position
                        );
                    });
            }

            function setMarkerPosition(marker, position) {
                marker.setPosition(
                    new google.maps.LatLng(
                        position.coords.latitude,
                        position.coords.longitude)
                );
            }

            function initLocationProcedure() {
                initializeMap();
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(displayAndWatch, locError);
                } else {
                    alert("Your browser does not support the Geolocation API");
                }
            }

            $(document).ready(function() {
                initLocationProcedure();
            });

        </script>
    </head>

    <body>
        <div id="map_canvas" style="height:600px;"></div>
    </body>

</html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-31T15:26:08.797

一种简单的方法是，只需调用`map.clearOverlays();`然后阅读添加新职位`map.addOverlay(<marker>)`

# javascript - 无法将光标移动到空 p 标签

> ID：16222333
> 
> 赞同：1
> 
> 时间：2013-04-25T18:43:31.333
> 
> 标签：javascript, html, dom

好的，这个问题让我发疯了。

我正在实现内容可编辑 div 中输入键的功能。当用户按下回车键时，我创建一个新的 p 标记并将其附加到文档中的位置，或者如果用户在段落中间按下回车键，则拆分节点。一切正常，但是我发现了这个问题。

如果`<p></p>`当用户在输入后键入他的第一个字母时我附加一个空的 p 标签而不在其中添加内容，则光标不会移动到这个 p 标签。但是，如果我添加一个空格`<p>&nbsp;</p>`就可以了。显然，我不想每次添加新段落时都添加空格。

我试图通过添加一个字符来解决这个问题，比如“A”，然后将光标移动到那里并删除“A”。但是，它仍然是同样的问题。

有什么想法为什么会发生这种情况，我该怎么做才能解决？

**编辑：**我试图通过 css 隐藏第一个字母，`visibility:hidden`但是 p 标签被完全忽略了！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-25T18:53:46.003

为您的元素添加宽度和高度`<p />`并将显示属性更改为块或内联块

```
p {
    display: inline-block;
    width: 10px;  
    height: 10px;
} 
```

# ruby-on-rails-3 - :via => [:options] 在 ruby on rails 路线

> ID：16222334
> 
> 赞同：8
> 
> 时间：2013-04-25T18:43:31.293
> 
> 标签：ruby-on-rails-3

在某些 Rails 应用程序中，我在 routes.rb 中看到了这一点

```
root :to => "home#index", :via => [:get]
root :to => "accounts#manage", :via => [:options] 
```

我无法理解这两个根 URL 是如何存在的。谷歌搜索也无助于清除 :options 参数。任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-25T19:00:21.273

As per the [HTTP spec](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.2) (and explained a bit more [here](http://zacstewart.github.io/2012/04/14/http-options-method.html)), there is an OPTIONS verb - which routes can support.

The impetus for using OPTIONS is to request documentation for a web service API; results are meant to provide information regarding how the API may be used.

```
ActionDispatch::Routing::HTTP_METHODS
=> [:get, :head, :post, :put, :delete, :options] 
```

To get back to your question, in a typical browser GET request, the first route will be used. When an OPTIONS request is made, the second route will be used.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:54:16.677

您可以使用 :via 选项将请求限制为一种或多种 HTTP 方法

请参阅[有关路由的 rails 指南](http://guides.rubyonrails.org/routing.html#http-verb-constraints)

`:post`, `:get`, `:put`, `:delete`, `:options`, `:head`, 和`:any`允许作为此选项的值。

正如[博客文章](http://www.tsheffler.com/blog/?p=428)中所解释的，OPTIONS 只是另一个支持[CORS 请求](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS?redirectlocale=en-US&redirectslug=HTTP_access_control)的 HTTP 动词（一种进行跨域 AJAX 请求的方法）。

**更新**发现一篇博文解释`:options`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-02T08:48:24.040

对于 Rails 5 及更高版本：在 routes.rb

```
 match "/404", :to => "errors#not_found", via:  :all
  match "/500", :to => "errors#internal_server_error", via: :all 
```

对于控制器：

```
class ErrorsController < ApplicationController
  layout 'xyz'
  def not_found
  end

  def internal_server_error
  end
end 
```

这将在生产中起作用，如果您也希望在开发中也一样，那么在 development.rb 中更改：

```
 config.consider_all_requests_local = false 
```

# java - GXT FileUploadField 的按键事件

> ID：16222335
> 
> 赞同：0
> 
> 时间：2013-04-25T18:43:34.810
> 
> 标签：java, gwt, file-upload, gxt

仅限 GX​​T 3.x。

对我来说越来越明显的是，Sencha 故意设计 FileUploadField 来阻止所有按键事件被检测到。

我试图拦截 onBrowserEvent(Event) 并且无法检测到我在关注 FileUploadField 组件时由按键生成的任何按键事件。

按键事件分流在哪里？

我找不到任何按键处理程序插入方法。

我希望允许通过按空格键或输入键来触发文件上传。

如果没有从头开始重写一个全新的组件，有人可以告诉我我能做些什么来实现键盘激活文件上传的目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T00:20:17.343

`onBrowserEvent`除非您沉没它们，否则不会收到任何事件-您确定要打电话`sinkEvents`吗？你是如何添加处理程序的？如果您使用`addDomHandler`，它将为您接收它们，但`addHandler`假设它们不是 dom 事件，或者您已经调用了`sinkEvents`. 如果不接收事件，浏览器不知道将该事件传递给 GWT 小部件。如果*所有*事件都是自动下沉的，那么每次您在页面上移动鼠标时，您都会看到事件的风暴，因为 mousemove 会为您传递的每个小部件及其所有父级触发。

如果您 override `onBrowserEvent`，那么您正在构建描述如何处理来自浏览器的实际事件的方法 - 这是`com.google.gwt.user.client.DOM`类连接到 Widget 以为其提供事件的地方。如果没有使该方法成为最终方法，那么只要浏览器正在生成这些事件并将它们传递给事件侦听器，就无法阻止您（小部件用户）获取这些事件。

即使 onBrowserEvent 已被覆盖并成为最终事件，您*仍然*`NativePreviewHandler`可以通过创建 a并检查事件发生的位置来访问许多事件。这让您在事件进入小部件本身之前就进入事件 - 您可以在那里调用`NativePreviewEvent.cancel()`以防止它在小部件本身上发生，或者您可以在处理程序的早期处理它。

# android - Android 内置弹窗发送器

> ID：16222340
> 
> 赞同：0
> 
> 时间：2013-04-25T18:43:50.047
> 
> 标签：android, email, bluetooth, popup, built-in

我想知道是否已经有任何内置的 android 弹出窗口，提供一些发送文件的选项。通过蓝牙/电子邮件和其他选项（如果存在）。

是否已经使用任何默认弹出窗口？还是我必须自己做？

我在google上搜索并没有得到很好的结果。

非常感谢提前;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:54:19.133

听起来您正在寻找[Share Intent](http://developer.android.com/training/sharing/send.html)。[这里](http://mobile.tutsplus.com/tutorials/android/android-sdk-implement-a-share-intent/)也有一个很好的教程，以防您发现上一个链接中缺少官方文档。

# c# - 异步按钮事件有时不起作用

> ID：16222342
> 
> 赞同：2
> 
> 时间：2013-04-25T18:43:51.827
> 
> 标签：c#

```
namespace knowledge
{
    public partial class FrmFtpr : Form
    {

    private readonly ILog _log = LogManager.GetLogger("Ftp");
        private CancellationTokenSource  _cancellationTokenSource;

    private IEnumerable<FtpHost> GetFtpHost()
        {
          //get all ftp site info

            return ftpHost;
        }

        private async Task DoWork()
        {
            while (!_cancellationTokenSource.IsCancellationRequested)
            {
                var ftpHosts = GetFtpHosts();
                var ftpTasks = ftpHosts.Select(Upload);
                await Task.WhenAll(ftpTasks); 
            }
        }

        private async Task Upload(FtpHost ftpHost)
        {
            //upload files to a ftp
        }

        private async void btnStart_Click(object sender, EventArgs e)
        {
            _cancellationTokenSource = new CancellationTokenSource();

            _log.Info(" Started");
            btnCancel.Enabled = true;
            btnStart.Enabled = false;
            await DoWork();
        }

        private async void btnCancel_Click_1(object sender, EventArgs e)
        {
            _cancellationTokenSource.Cancel();
            _log.Info(" Stoped");
            btnStart.Enabled = true;
            btnCancel.Enabled = false;
        }
    }

} 
```

以上代码用于监控一些目录，并将这些目录中的文件上传到不同的ftp。

如果 GetFtpHost 返回 null 或 0，表单将冻结，但如果 GetFtpHost 返回一些值，我可以在开始和取消按钮之间切换。winform不会冻结。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T22:11:02.893

通过修改如下代码，问题已得到解决。现在这个应用程序可以扫描dirs周期（例如每1分钟）然后如果当前上传没有完成，等待。否则开始新的一轮。

```
public partial class FrmFtpr : Form
{
    private readonly ILog _log = LogManager.GetLogger("Ftp");
    private CancellationTokenSource  _cancellationTokenSource;
    private Task _task;

    private IEnumerable<FtpHost> GetFtpHost()
    {
      //get all ftp site info

        return ftpHost;
    }

    private async Task Upload(FtpHost ftpHost)
    {
        //upload files to a ftp
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        if (_task != null && !_task.IsCompleted)
            return;

        var ftpTargets = GetFtpTargets().ToList();

        if (ftpTargets.Count == 0)
            return;

        _task = Task.Factory.StartNew(() =>
            {
               var tasks = ftpTargets.Select(Upload).ToArray();
                Task.WaitAll(tasks);
            });
    }

    private async void btnStart_Click(object sender, EventArgs e)
    {
        _cancellationTokenSource = new CancellationTokenSource();
        _log.Info(" Started");
        btnCancel.Enabled = true;
        btnStart.Enabled = false;
        timer1.Start();
    }

    private async void btnCancel_Click_1(object sender, EventArgs e)
    {
        _cancellationTokenSource.Cancel();
        _task.Wait();
        _log.Info(" Stoped");
        timer1.Stop();
        btnStart.Enabled = true;
        btnCancel.Enabled = false;
    }
} 
```

# sql - 将 GUID 转换为 varchar(32)

> ID：16222343
> 
> 赞同：14
> 
> 时间：2013-04-25T18:43:52.733
> 
> 标签：sql, sql-server, ssms, guid, varchar

如何将作为`36`字符的 GUID 转换为 VARCHAR(32)？

我正在尝试将数据从一个表复制到另一个表。这两个表中有两个相似的列。

1.  **Table1.colx**是一个 GUID，因此`36`由于连字符，它的总长度是字符
2.  对应的列是**table2.colx**但它是一个 VARCHAR(32)

我正在寻找一种将 GUID 转换为 VARCHAR 的方法，但我必须删除连字符。到目前为止，我试图找到一种方法来做到这一点都没有成功。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-25T18:46:02.057

我假设这是来自 SSMS 标记的 SQL Server。

将 GUID 转换为字符串，然后将连字符替换为空字符串：

```
REPLACE(CAST(table1.colx AS VARCHAR(36)),'-','') 
```

# java - Puppet启动Tomcat时中文字符显示不正确，手动启动时有效

> ID：16222347
> 
> 赞同：1
> 
> 时间：2013-04-25T18:44:11.647
> 
> 标签：java, tomcat, character-encoding, puppet, file-encodings

所以这里有一个有趣的...

我们通过 Fatwire 上传文件，将文件存储在 Unix 文件系统上。Fatwire 在幕后使用 Tomcat。

一个 Puppet 代理处理我们的 jar 部署和重启。

上传文件名中包含中文字符的图像文件时，存储在文件系统中的文件显示可怕的??? 而不是正确的字符。

当我们使用 Puppet 部署的相同 jar 文件但只需手动重新启动时，它可以完美运行。

我已经在 J​​AVA_OPTS 和 CATALINA_OPTS 设置中设置了 -Dfile.encoding=UTF-8 。

帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T05:49:22.947

我很确定这是一些环境变量。

您可能可以按如下方式进行测试：

*   从 shell 停止 java 进程
*   从那个 shell 运行 Puppet

如果显示中文字符，则很可能是环境变量。

# c# - 为 Windows 窗体应用程序创建 SQL 数据库

> ID：16222353
> 
> 赞同：1
> 
> 时间：2013-04-25T18:44:47.263
> 
> 标签：c#, .net, sql-server, network-programming

我对 C# 编程还有些陌生，我对如何创建一个 SQL 数据库感到有些困惑，许多不同的计算机都可以通过映射路径连接访问该数据库。谁能建议最好的方法来做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:48:36.147

我会提醒您不要在映射的 UNC 路径上使用共享文件数据库。数据库服务器的存在是有充分理由的。如果您希望节省资金并且只有少量数据和少数用户，我建议您尝试[SQL Express 2012 。](http://www.microsoft.com/en-us/sqlserver/editions/2012-editions/express.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:49:00.943

如果您想使用 C# 代码创建数据库，这里有一个链接[http://www.codeproject.com/Articles/10213/Create-an-SQL-Server-Database-Using-Csharp](http://www.codeproject.com/Articles/10213/Create-an-SQL-Server-Database-Using-Csharp)。否则，您可以使用 SQL Server 管理工作室创建一个新数据库 - 这是链接[http://msdn.microsoft.com/en-us/library/ms186312%28v=sql.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms186312%28v=sql.90%29.aspx)。

# php - 传递给 array_filter 时参数丢失

> ID：16222355
> 
> 赞同：1
> 
> 时间：2013-04-25T18:44:48.873
> 
> 标签：php

```
 foreach( $items as $item) {
    $taskid = (int) $goal['goal_id'];
    $items[$i]['tasks'] = array();
    $items[$i]['tasks'] = array_filter($tasks, function($task, $taskid){    
    return $task['task_id'] == $taskid;
    }); 
```

为什么 $taskid 没有被传递给 array_filter 函数，如果从内部回显它返回 null 但如果在设置后立即回显它会给出正确的值，例如

```
 foreach( $items as $item) {
    $taskid = (int) $goal['goal_id'];
    echo $taskid; 
```

将返回任何整数

如果我手动设置一个值，函数的返回部分也可以工作，即

```
 return $task['task_id'] == 2; 
```

指导赞赏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T18:55:53.550

问题是变量范围和函数参数。

首先，array_filter 需要一个带有单个参数的函数，该参数是数组中位置的值。它不处理密钥。

你`$taskid = (int) $goal['goal_id'];`在匿名函数之外设置，并且你有一个同名的局部变量，它是 null 因为 array_filter 只传递一个参数。

```
foreach( $items as $item) {
  $taskid = (int) $goal['goal_id'];
  $items[$i]['tasks'] = array();
  # Per the OP, you can pass the necessary variable in via 'use'
  $items[$i]['tasks'] = array_filter($tasks, function($task) use($taskid){
    return $task['task_id'] == $taskid;
  });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T19:14:26.943

谢谢你，一旦你指出它是可变范围和匿名函数，它很容易通过在函数闭包中引用来修复。

```
 $items[$i]['tasks'] = array_filter($tasks, function($task) use(&taskid){    
    return $task['task_id'] == $taskid;
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:56:03.303

该[`array_filter`](http://us3.php.net/array_filter)函数将数组值一一传递给回调函数。您不能像您尝试做的那样使用匿名回调函数传递其他参数。

一个有效的例子是：

```
$array = ["Bob","Sam","Jack"];
print_r(
    array_filter(
        $array, 
        function($value) { 
            return ($value !== 'Jack'); 
        }
    )
); 
```

退货

```
Array ( [0] => Bob [1] => Sam ) 
```

# qt-creator - 有什么方法可以在构建之前自动删除文件夹吗？

> ID：16222365
> 
> 赞同：3
> 
> 时间：2013-04-25T18:45:03.973
> 
> 标签：qt-creator, qmake

基本上，我想删除名为：

```
build-[Project Name]-Desktop_Qt_5_0_2_MSVC2010_32bit-Debug 
```

在编译之前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:07:25.283

转到项目设置（Ctrl+5，又名第 5 模式），并使用自定义命令“rmdir”和参数“/s /q path-to-target-directory”添加新的构建步骤。

不要忘记自定义构建步骤应该在列表的顶部，在“qmake”步骤之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T19:07:28.827

查看 qmake 的系统命令，它允许执行操作系统的任何 shell 命令：http: [//harmattan-dev.nokia.com/docs/library/html/qt4/qmake-function-reference.html#system-命令](http://harmattan-dev.nokia.com/docs/library/html/qt4/qmake-function-reference.html#system-command)

在windows中你可以放

```
system(rmdir /Q /S "build-[Project Name]-Desktop_Qt_5_0_2_MSVC2010_32bit-Debug") 
```

在您的 .pro 文件中。如果您需要其他平台，您可以检查它是哪个平台，并使用相同的语法为该平台调用适当的 shell 命令。

# unmanaged - 非托管导出 (DLLExport) 崩溃

> ID：16222367
> 
> 赞同：3
> 
> 时间：2013-04-25T18:45:04.243
> 
> 标签：unmanaged, dllexport

我正在使用 RGiesecke DLLExport 库生成一个 C# DLL，该 DLL 可以从基于 VC6 的遗留应用程序动态加载。它导出方法，并从 VC6 代码中调用它们。没问题。但是，只要我尝试将变量声明为我的任何一个 .net 类，它就会崩溃。

```
 //I tried CallingConvention = CallingConvention.StdCall too
    [DllExport(CallingConvention = CallingConvention.Winapi)]
    static void GetDwgReferences(string fileName)
    {
        //OK: inialize System classes of .net
        DateTime dateTime = DateTime.Now;

        //crashing here: declare a variable of my static class (.net assemebly)
        //SafeString safeString;

        //crashing here: declare a variable of my class (.net assemebly)
        //Email email;

        //crashing here: initialize an object of my class (.net assemebly)
        //DwgXrefs dwgXrefs = new DwgXrefs();

        //crashing here by declcare a variable of third-party library (.net assemebly)
        //ExSystemServices _serv;
     } 
```

怎么了？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T22:00:12.020

我在这里遇到了类似的问题，试图将非托管导出与 Metatrader 一起使用来加载相关的托管 dll。

经过一番挖掘，我想我找到了问题所在。应用程序域可能不是您期望的位置，CLR 正在尝试解析您的程序集，但由于无法描述的错误而失败。在我的情况下，应用程序域实际上是在主机应用程序的目录中执行的，所以我认为情况总是如此。

我建议你做的是构建一个没有依赖关系的裸 dll，并放置如下内容：

```
static void Initialize()
{
        SimpleLog.WriteLog("App -" + AppDomain.CurrentDomain.BaseDirectory);
}

[DllExport("Test", CallingConvention = CallingConvention.StdCall)]
public static void Test()
{
    Initialize();
} 
```

我不确定，但我认为您可能不能在这里使用静态构造函数？

在日志中，您应该看到该域的执行目录。如果你把你的程序集放在这里（希望）它应该可以工作。它在这里为我解决了这个问题。我想下一个问题是我们可以在运行时更改域，因为我可能不想将这些程序集放在这里。

如果您需要简单记录器的源代码，请使用谷歌 - 显然不要使用具有 dll 依赖项的第三方记录框架！

我认为我的改编自这个： http: [//www.codeproject.com/Articles/80175/Really-Simple-Log-Writer](http://www.codeproject.com/Articles/80175/Really-Simple-Log-Writer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T19:14:14.063

正如另一个答案所述，如果不明确地在 C# dll 的每个方法中的 try / catch 块中捕获错误，就很难知道 C# 抛出了什么错误。

您可能需要导出为 CallingConvention.StdCall 并另外将传入字符串编组为非托管 LPWStr 类型：

```
[DllExport(CallingConvention = CallingConvention.StdCall)]
static void GetDwgReferences([MarshalAs(UnmanagedType.LPWStr)] string fileName)
{
} 
```

请参阅[将 C# DLL 导出到 Metatrader Build 600+](http://vb6-to-csharp.blogspot.com/2014/05/code-to-export-c-dll-to-metatrader.html)的代码，了解使用 Robert Giesecke 的用于非托管导出的 C# 项目模板将 C# dll 导出到旧版应用程序 (MT4) 的工作示例。

此外，您可能会发现[Native 和 .NET 互操作性](http://msdn.microsoft.com/en-us/library/zbz07712%28v=vs.100%29.aspx)很有趣，尽管它主要面向从 .NET 中访问本机代码。

# knockout.js - 在淘汰赛 attr 中动态添加/删除 div

> ID：16222368
> 
> 赞同：0
> 
> 时间：2013-04-25T18:45:08.493
> 
> 标签：knockout.js

我有两个 observables 1.Data 和 2.Image（调用 Ajax 来获取图像。为此，我正在传递数据 ID）。如果找到图像，那么我需要显示图像和数据，如下所示。例如：

```
<div class="MainDiv">
        <div class="ImageDiv"><img id="img"  src:"/...image/" /></div>
        <div class="dataDiv" data-bind="text: data/>
</div> 
```

假设如果找不到图像，那么我需要像隐藏图像 div

```
<div class="MainDiv">
        /* Hide this when no image  <div class="ImageDiv"><img src="" /> */
        <div class="dataDiv" data-bind="text: data/>
</div> 
```

我使用 ko attr 如下所示： Var ImageFound 包含布尔值。如果为 true 则显示图像 div 和数据 div，否则仅显示数据 div。

```
<div  data-bind="attr: { class: ImageFound ? 'ImageDiv' : 'DataDiv' }">. 
```

你能建议如何做到这一点吗？

这是视图模型代码：

```
 // This function internally makes Ajax call for every data to get the corresponding image

        function LoadImages(result) {
            $.each(result, function (id, data) {
                if (data.ImageUrl != null) {
                    return http.get(Url +'/?imageId=' + data.ImageUrl)
                    .success(function (imageResponse) {

                        if (imageResponse == null || imageResponse == "") {
                        newItem.ImageFound= false;
                        }else {
                            var newItem = vm.Data()[id];
                            newItem.Image = "" + imageResponse;
                            newItem.ImageFound= true;
                            vm.data.replace(vm.data()[id],newItem)
                            vm.data(result);
                        }
                    })
                    .fail(function (exception) { }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:56:14.677

您也可以`visible`像这样使用绑定：

```
<div class="MainDiv">
  <div class="ImageDiv" data-bind="visible: ImageFound()">
    <img id="img"  src:"/...image/" />
  </div>
  <div class="dataDiv" data-bind="visible: !ImageFound(), text: data"/>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:47:13.530

如果 ImageFound 是可观察的，那么您需要将其称为一个：

```
<div data-bind="attr: { class: ImageFound() ? 'ImageDiv' : 'DataDiv' }"> 
```

否则，您所做的就是解决 observable（就 javascript 而言，这只是一个函数）是否存在。并且它永远存在，因此将永远解析为真。

# visual-studio - 如何使用 Visual Studio 2012 中的 MSBuild 文件？

> ID：16222370
> 
> 赞同：4
> 
> 时间：2013-04-25T18:45:09.117
> 
> 标签：visual-studio, visual-studio-2012, msbuild, build-automation

我有一个正在学习的简单 MSBuild 文件。

这里是：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Clean" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup Label="Globals">
    <ProjectGuid>{D5A16164-962E-4A6D-9382-240F31AB6C50}</ProjectGuid>
  </PropertyGroup>
  <Target Name="Clean">
    <ItemGroup>
      <BinFiles Include="bin\*.*" />
      <fff Include="f\*.*" />
    </ItemGroup>
    <Delete Files="@(BinFiles)" />
    <Delete Files="@(fff)" />
  </Target>
</Project> 
```

现在我想将它包含在 Visual Studio 解决方案中，并能够从 Visual Studio 2012 运行“干净”目标。我尝试将其命名`testproject.msbuildproj`为互联网似乎建议“有效”，但它不起作用。当我运行 clean 命令时，我只是得到“意外错误”。

如果我将项目重命名为`testproject.csproj`，它会做一些不直观的事情，比如创建编译目录，但它确实会正确运行我的 clean 命令。但是，这是不可取的，因为它会创建`obj`和`bin/x86/debug`键入目录。它在 Visual Studio 中看起来也很愚蠢，因为它仍然提供了“引用”下拉菜单。

如何在没有随机错误或错误假设的情况下仅使用 Visual Studio 中的普通 MSBuild 项目？

注意我只是在 Visual Studio 中遇到了这个问题。从命令行使用 msbuild 它可以完美运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T12:18:56.447

Visual Studio 在**打开**csproj 文件时会创建 bin / obj 文件夹。当您单击 Build / Rebuild / Clean 时，它只使用项目文件中的适当目标。

您无法阻止 VS 创建这些文件夹，但您可以通过设置适当的属性要求它在临时文件夹中创建它们 - 有关详细信息，请参阅[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/bb629394.aspx)。

因此，步骤是将您的项目重命名为`csproj`，并将以下行添加到项目中：

```
<PropertyGroup>
  <OutputPath>$(Temp)\bin</OutputPath>
  <IntermediateOutputPath>$(Temp)\obj</IntermediateOutputPath>
</PropertyGroup> 
```

我通常使用一些不同的方法来处理来自 VS 的 MSBUILD 文件：

*   `csproj`我使用带有删除部分的常规文件`Import ... CSharp.targets`作为构建项目的纯容器。
*   我使用“包含到项目”添加带有目标和逻辑的实际构建文件，以及所有属性、必要的工件（如 XSLT 等），因此我可以管理层次结构并从 VS.Net 中更改任何文件。
*   我在文件中重新定义`Build`/`Rebuild`目标以`csproj`满足我的需要，例如 Build 可能包含最小输出，而在重建诊断时。

像这样：

```
<Target Name="Build">
  <Exec Command="%windir%\Microsoft.NET\Framework64\v4.0.30319\msbuild.exe Builds\build.proj /t:Build /v:m" />
</Target>
<Target Name="Rebuild">
  <Exec Command="%windir%\Microsoft.NET\Framework64\v4.0.30319\msbuild.exe Builds\build.proj /t:Build /v:d" />
</Target> 
```

# windows - DLL 使用 LoadLibrary 加载两次

> ID：16222371
> 
> 赞同：3
> 
> 时间：2013-04-25T18:45:09.790
> 
> 标签：windows, winapi

我有`A.DLL`和`B.DLL`

使用 VS 2010，我在`A.DLL`项目的 C++ 函数中设置断点，并使用*procexp.exe*查看当前加载的 DLL。很明显，`A.DLL`是加载的。

我需要`B.DLL`从这个函数调用。注意：`B.DLL`对`A.DLL`. 这个库被称为`A.LIB`

使用`LoadLibrary`，我执行以下语句：

```
HANDLE hLib = LoadLibrary("B.DLL"); 
```

执行完这一行后，我再次查看*procexp.exe*。`A.DLL`加载了两次！！如果我删除对 的`A.LIB`依赖`B.DLL`，这将不会发生。Process Explorer 报告这两个实例`A.DLL`具有不同的基地址，因此它们实际上是不同的模块。

我的问题是为什么这会加载另一个实例`A.DLL`？它是否有可能实现`A.DLL`已经加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T13:40:14.170

所以我无法弄清楚为什么`A.DLL`要加载两次的原因，所以我继续并重组了我的代码并提出了一个更好的解决方案。（最终对我来说效果很好）

`B.DLL`我没有对 的库依赖，而是`A.DLL`删除了该依赖，并且没有使用通过 公开的一些可导出函数`A.LIB`，而是使用了一个`function pointer`for 这个函数，并通过对 LoadLibrary、GetProcAddress 等的调用将其传递下来。

这样做，它不会加载`A.DLL`两次，现在一切都很好:)

# regex - 替换视觉工作室的正则表达式？

> ID：16222378
> 
> 赞同：0
> 
> 时间：2013-04-25T18:45:30.000
> 
> 标签：regex, visual-studio, search, visual-studio-2012, replace

正则表达式可以用什么替换所有`NBinTree<Whatever_1>::Whatever_2`实例`NBinTreeWhatever_2<Whatever_1>`？

我尝试`.NBinTree<\1>::\2[ ]$`了搜索和`NBinTree\2<\1>`替换，但它根本没有做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:05:54.973

`NBinTree<(\w+)>::(\w+)`用替换匹配项`NBinTree$2<$1>`。

确保选中“使用正则表达式”框。

# regex - Varnish中的正则表达式？这个正则表达式匹配什么？

> ID：16222388
> 
> 赞同：2
> 
> 时间：2013-04-25T18:46:01.177
> 
> 标签：regex, varnish

我在我的日志中看到一个清除请求，该请求将变为清漆形式
`req.url ~ "^(.*)(?<!\\d{1})534328(?!\\d{1})"`。我不确定正则表达式完全匹配什么。我知道清漆使用 POSIX 正则表达式。我正在尝试为正则表达式生成示例匹配，`^(.*)(?<!\\d{1})534328(?!\\d{1})`但无法找到一个可以帮助我的工具。

编辑：对不起，我`The regular expression engine is now PCRE instead of POSIX regular expressions.`根据[这里的变更日志犯了一个错误。](https://www.varnish-cache.org/trac/wiki/changelog_2.0.6-2.1.0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:48:10.567

它匹配`534328`既不在数字之前也不在数字之后的内容。

```
^            # line beginning
(.*)         # any character repeated any number of times, including 0
(?<!\d{1})   # negative look-behind assertion: single digit
534328       # literal 534328       
(?!\d{1})    # negative look-ahead assertion: single digit 
```

* * *

```
 "whatever 534328"      ←  match
  "wharrgarbl 1534328"   ←  no match
  "any chars  5343289"   ←  no match
  "hello world a534328b" ←  match 
```

*   [环视断言](http://www.regular-expressions.info/lookaround.html)

# java - 如何从 ResultSet 对象中获取 COUNT？

> ID：16222398
> 
> 赞同：0
> 
> 时间：2013-04-25T18:46:26.687
> 
> 标签：java, jdbc, resultset

我将以下查询传递给 ResultSet 对象：

```
String query = "SELECT COUNT( DISTINCT KEY ), SOURCE FROM MY_TBL\n" +
            "GROUP BY SOURCE\n" +
            "ORDER BY SOURCE"; 
```

我想捕获我为每个 SOURCE 获得的计数并将它们加总。我如何通过 ResultSet 捕获这些计数，因为 COUNT 不是 ResultSet 中的列名，我认为我不能通过返回它的值`rs.getInt("COUNT")`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T18:49:43.270

`getInt`[重载](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getInt%28int%29)，使用索引（an ）而不是`int`列名：

```
 rs.getInt(1); // the first column is 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:54:39.463

尝试使用别名

```
String query = "SELECT COUNT( DISTINCT KEY ) AS COUNT, SOURCE FROM MY_TBL\n" +
        "GROUP BY SOURCE\n" +
        "ORDER BY SOURCE"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-17T17:30:39.247

我认为最好使用

```
Statement st = conn.createStatement();
ResultSet rs = st.executeQuery("SELECT * from Customer");
ResultSetMetaData rsmd = rs.getMetaData();

int numCols = rsmd.getColumnCount(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-12-05T19:29:19.973

我认为“getColumnCount”重新定义表中的列数而不是行数......

# php - 如何获取屏幕分辨率并将其放入 PHP 变量中

> ID：16222401
> 
> 赞同：0
> 
> 时间：2013-04-25T18:46:39.657
> 
> 标签：php, javascript, jquery, screen

大家好，我有一个大问题试图解决这个问题。我知道我必须使用 JavaScript，但我就是不明白如何使用。这是我的脚本：

```
<?php 
$posts = query_posts('order=DESC&cat=-2');
$cols = 4;
$filas = array_chunk($posts, $cols);
$columnas = array();
foreach( $filas as $row => $articulos ) {
foreach( $articulos as $ix => $articulo ) {
  $columnas[$ix] = isset($columnas[$ix]) ? $columnas[$ix] : array();
  $columnas[$ix][] = $articulo;
}
}
?>
<?php foreach($columnas as $posts):?> etc, etc ... <?php endforeach; ?> 
```

$cols 值将根据用户的窗口屏幕而变化。IE = 如果窗口屏幕是（某个值）那么 $cols =（某个值）

我将非常感谢这方面的任何帮助。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T18:57:38.590

您可以执行类似使用 ajax 脚本 onload 页面的操作。这将使您的网站变慢，但它应该具有正确的效果：

HTML

```
<div class="container">
    <!-- Place columns here -->
</div> 
```

jQuery

```
$(document).load(function(){
    var winWidth = $(window).width();
    $.post('phpscript', {width: winWidth}, function(data) {
        $('.container').html(data);
    });
}); 
```

PHP

```
<?PHP
    //Your PHP script to format your page in however many columns
    //Have your script here take the width of your page
    //Do do math to find how many columns
    //Query whatever you need to get those columns
    //Return the HTML
?> 
```

这将允许您返回您想要的任何列布局。虽然，我确信制作一些好的 CSS 来制作尽可能多的列会更容易。

# ruby-on-rails-3 - rails 为特定页面设计 401 未经授权

> ID：16222404
> 
> 赞同：6
> 
> 时间：2013-04-25T18:46:50.960
> 
> 标签：ruby-on-rails-3, devise, http-status-code-401, warden

我无法辨别为什么我的应用返回 401 Unauthorized。我的机构控制器中的其他操作在未登录时工作得很好。但是，这个页面和另一个页面返回 401。如果登录，这些页面工作得很好，但它们不需要登录。我什至已经这样做了至于清空视图和操作，但页面仍然返回 401。通过提琴手调试时，我只收到 302 重定向。

我尝试在其他地方进行研究，并尝试了[Warden authentication 的解决方案，即召回 401 Unauthorized](https://stackoverflow.com/questions/11467354/warden-authentication-recalls-401-unauthorized)没有成功。

**安慰**

```
Started GET "/institutions/3" for 127.0.0.1 at 2013-04-25 14:38:15 -0400
    Processing by InstitutionsController#show as HTML
      Parameters: {"id"=>"3"}
      ←[1m←[36mInstitution Load (0.0ms)←[0m  ←[1mSELECT `institutions`.* FROM `institutions` WHERE `institutions`.`id` = 3 LIMIT 1←[0m

Load data...
Load assets... 
```

然后我提交表单，方法设置为 GET

```
Started GET "/visit/schedule/preview?utf8=%E2%9C%93&selected_ids=4693" for 127.0.0.1 at 2013
-04-25 14:28:53 -0400
Processing by InstitutionsController#previewselectedvisits as HTML
  Parameters: {"utf8"=>"√", "selected_ids"=>"4693"}
Completed 401 Unauthorized in 0ms

Started GET "/users/sign_in" for 127.0.0.1 at 2013-04-25 14:28:53 -0400
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (15.6ms)
  Rendered auth/_login.html.erb (0.0ms)
  Rendered auth/_loginmodal.html.erb (0.0ms)
  Rendered shared/_navbarout.html.erb (0.0ms)
  Rendered shared/_navbar.html.erb (0.0ms)
  ←[1m←[36mInstitution Load (0.0ms)←[0m  ←[1mSELECT name FROM `institutions` ←[0m
  Rendered search/_searchbar.html.erb (0.0ms)
  Rendered search/_searchresults.html.erb (0.0ms)
  Rendered shared/_footer.html.erb (0.0ms)
Completed 200 OK in 140ms (Views: 46.8ms | ActiveRecord: 15.6ms)

Load assets... 
```

**相关路线**

```
devise_for :users
match 'visit/schedule/preview' => 'institutions#previewselectedvisits', :as => :preview_visits, :via => :get
match "institutions/:id" => "institutions#show", :as => :show_institution 
```

**耙路线**

```
 new_user_session GET    /users/sign_in(.:format)                             devise/sessions#new
              user_session POST   /users/sign_in(.:format)                             devise/sessions#create
      destroy_user_session DELETE /users/sign_out(.:format)                            devise/sessions#destroy
             user_password POST   /users/password(.:format)                            devise/passwords#create
         new_user_password GET    /users/password/new(.:format)                        devise/passwords#new
        edit_user_password GET    /users/password/edit(.:format)                       devise/passwords#edit
                           PUT    /users/password(.:format)                            devise/passwords#update
  cancel_user_registration GET    /users/cancel(.:format)                              devise_invitable/registrations#cancel
         user_registration POST   /users(.:format)                                     devise_invitable/registrations#create
     new_user_registration GET    /users/sign_up(.:format)                             devise_invitable/registrations#new
    edit_user_registration GET    /users/edit(.:format)                                devise_invitable/registrations#edit
                           PUT    /users(.:format)                                     devise_invitable/registrations#update
                           DELETE /users(.:format)                                     devise_invitable/registrations#destroy
         user_confirmation POST   /users/confirmation(.:format)                        devise/confirmations#create
     new_user_confirmation GET    /users/confirmation/new(.:format)                    devise/confirmations#new
                           GET    /users/confirmation(.:format)                        devise/confirmations#show
               user_unlock POST   /users/unlock(.:format)                              devise/unlocks#create
           new_user_unlock GET    /users/unlock/new(.:format)                          devise/unlocks#new
                           GET    /users/unlock(.:format)                              devise/unlocks#show
    accept_user_invitation GET    /users/invitation/accept(.:format)                   devise/invitations#edit
    remove_user_invitation GET    /users/invitation/remove(.:format)                   devise/invitations#destroy
           user_invitation POST   /users/invitation(.:format)                          devise/invitations#create
       new_user_invitation GET    /users/invitation/new(.:format)                      devise/invitations#new
                           PUT    /users/invitation(.:format)                          devise/invitations#update
            preview_visits GET    /visit/schedule/preview(.:format)                    institutions#previewselectedvisits
          show_institution        /institutions/:id(.:format)                          institutions#show
          vote_institution        /institutions/:id/vote/:visittype_id(.:format)       institutions#vote
                                  /institutions/:id/:offset(.:format)                  institutions#show
              institutions        /institutions(.:format)                              institutions#index
           schedule_visits        /schedule(.:format)                                  institutions#index
              auth_failure        /auth/failure(.:format)                              services#failure
                                  /auth/:service/:callback(.:format)                   services#create
                  services GET    /services(.:format)                                  services#index
                           POST   /services(.:format)                                  services#create
                   service DELETE /services/:id(.:format)                              services#destroy
                login_user        /users/login(.:format)                               users#login
             myvisits_user        /users/myvisits(.:format)                            users#myvisits
       email_myvisits_user        /users/myvisits/email(.:format)                      users#emailmyvisits
    remove_visit_from_user        /users/removevisit/:id/:user_id(.:format)            users#rmvisit
            addvisits_user        /users/addvisits(.:format)                           users#addvisits
          changevisit_user        /users/visits/:user_id/:visit_id/:is_going(.:format) users#toggle_user_going_on_visit
        add_family_to_user        /users/invite(.:format)                              users#addfamilymember
add_family_default_to_user        /users/profile/addfamilymemberdefault(.:format)      users#addfamilymember_default
   remove_family_from_user        /users/profile/removefamilymember(.:format)          users#rmfamilymember
       update_profile_user        /users/profile/update(.:format)                      users#update
 update_profile_other_user        /users/profile/update/:id(.:format)                  users#update
         edit_profile_user        /users/profile/edit(.:format)                        users#edit
         show_profile_user        /users/profile(.:format)                             users#show
                     users        /users(.:format)                                     users#show
                  families GET    /families(.:format)                                  families#index
                           POST   /families(.:format)                                  families#create
                new_family GET    /families/new(.:format)                              families#new
               edit_family GET    /families/:id/edit(.:format)                         families#edit
                    family GET    /families/:id(.:format)                              families#show
                           PUT    /families/:id(.:format)                              families#update
                           DELETE /families/:id(.:format)                              families#destroy
                    visits        /visits(.:format)                                    visits#index
                   company        /company(.:format)                                   company#aboutus
                       edu        /edu(.:format)                                       edu#index
                      root        /                                                    institutions#index 
```

**宝石文件**

```
source 'https://rubygems.org'
gem 'rails', '3.2.12'
gem 'mysql2'
gem 'execjs'
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
gem 'simple_form'

gem 'devise'
gem 'devise_invitable'
gem 'omniauth'
gem "omniauth-google-oauth2"
gem 'omniauth-linkedin-oauth2'
gem 'omniauth-facebook'

#in-place editing
gem 'best_in_place'

#email template convert to inline
gem 'roadie'

#amazon web services and images
gem 'paperclip'
gem 'aws-sdk' 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-30T01:25:46.390

检查您的 InstitutionsController 和 ApplicationController 的代码 - 查找带有`current_user`或`before_filter`在其中的语句

```
 class InstitutionsController < ApplicationController
    before_filter :login_required, :only => [:method1,:method2]
    ...
 end 
```

可能是您尝试调用的方法被列为需要身份验证，但您没有登录。

您还可以发布带有预览方法的机构控制器的摘录吗？

另一个可能的问题是您的路线可能定义不正确：

```
 match 'visit/schedule/preview' => 'institutions#previewselectedvisits', :as => :preview_visits, :via => :get 
```

机构控制器真的有一个名为的方法`previewselectedvisits`吗？

# image - YouTube 视频大图的 URL

> ID：16222407
> 
> 赞同：13
> 
> 时间：2013-04-25T18:46:55.040
> 
> 标签：image, url, youtube, thumbnails, image-size

我有兴趣为我的应用程序获取 youtube 视频的预览图像，我正在使用预览的 url：

[http://img.youtube.com/vi/EqWRZrupLrI/0.jpg](http://img.youtube.com/vi/EqWRZrupLrI/0.jpg)

但这有上下两排黑色小排，我希望它更大。我读过 0 是更大的图景。

有谁知道是否可以获得具有更好图像的网址？对于我的项目，我需要图像在网址上

我很感激帮助

问候 ：）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-25T19:02:27.870

`0.jpg` is the full-size 480p thumbnail and there is no bigger thumbnail except for full HD videos (`maxresdefault.jpg`).

But why do you expect a bigger thumbnail for such a video ? Your video example has a resolution of 240p, the thumbnail is already much bigger than the video resolution.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T18:59:27.163

Please check the following SO post:

[How do I get a YouTube video thumbnail from the YouTube API?](https://stackoverflow.com/questions/2068344/how-to-get-thumbnail-of-youtube-video-link-using-youtube-api)

[YouTube thumbnail link doesn't work in all cases](https://stackoverflow.com/questions/11334710/youtube-thumbnail-link-doesnt-work-in-all-cases)

It will surely solve your problem. I recommend to query the youtube api to get the thumbnail with max resolution.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-12-05T08:47:06.153

每张图片都有 4 个类别，例如

```
https://img.youtube.com/vi/<insert-youtube-video-id-here>/0.jpg
https://img.youtube.com/vi/<insert-youtube-video-id-here>/1.jpg
https://img.youtube.com/vi/<insert-youtube-video-id-here>/2.jpg
https://img.youtube.com/vi/<insert-youtube-video-id-here>/3.jpg 
```

你也可以通过这个获得更多的图像尺寸

-- 默认

```
https://img.youtube.com/vi/<insert-youtube-video-id-here>/default.jpg 
```

——为了高品质

```
https://img.youtube.com/vi/<insert-youtube-video-id-here>/hqdefault.jpg 
```

-- 中等质量

```
https://img.youtube.com/vi/<insert-youtube-video-id-here>/mqdefault.jpg 
```

-- 对于最大尺寸

```
https://img.youtube.com/vi/<insert-youtube-video-id-here>/maxresdefault.jpg 
```

# c# - 如何使用 OracleDataReader 检索给定记录的所有字段？

> ID：16222408
> 
> 赞同：4
> 
> 时间：2013-04-25T18:46:57.763
> 
> 标签：c#, asp.net, datareader

[我的问题与此](https://stackoverflow.com/questions/2994539/how-can-i-loop-through-all-of-the-columns-of-the-oracledatareader)类似，我如何使用 OracleDataReader 检索给定记录的所有字段？目前，我一直在使用这种方法，它一次只返回一个列值：

```
public string Select_File(string filename, string subdirectory, string envID)
{
    Data_Access da = new Data_Access();
    OracleConnection conn = da.openDB();

    OracleCommand cmd = new OracleCommand();
    cmd.Connection = conn;
    cmd.CommandText = "SELECT * FROM EIP_Deployment_Files" 
        + " WHERE Filename ='" + filename + "'"
        + " AND Subdirectory = '" + subdirectory + "'"
        + " AND Environment_ID = '" + envID + "'";
    cmd.CommandType = CommandType.Text;

    string x;
    OracleDataReader dr = cmd.ExecuteReader();
    if (dr.HasRows) // file exists in DB
    {
        dr.Read();
        x = dr.GetString(2).ToString(); // return baseline filename (index 2)
    }
    else
    {
        x = "New File";
    }

    cmd.Dispose();
    da.CloseDB(conn);
    return x;
} 
```

我确信这种方法远非完美，人们会很快指出这一点（我基本上是由我的主管给的，因为我之前没有任何 ASP.NET 经验）但我真正关心的是它的工作原理。我的问题是：如何修改它以返回给定记录的*所有字段？*

这些字段将是 VARCHAR2、CHAR 或 DATE 数据类型（如果有区别的话），其中一些值可能为空。我在想我可以将它们转换为字符串并将它们作为列表返回吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T20:25:29.417

如果你想要这样的东西：

```
List<User> lstUser = new List<User>();
            string sqlQuery = "Select * from User_T where User_Name='" + oUser.UserName + "' And Password='" +oUser.Password + "' AND IsActive='"+1+"' AND IsDelete='"+0+"'";
            string connectionString = "Data Source=ORCL;User Id=ACCOUNTS;Password=ACCOUNTS";
            using (DBManager dbManager = new DBManager(connectionString))
            {
                try
                {

                    dbManager.Open();
                    OracleDataReader dataReader = dbManager.ExecuteDataReader(sqlQuery);
                    while (dataReader.Read())
                    {
                        oUser = new User();
                        oUser.Id = Convert.ToInt32(dataReader["ID"]);
                        oUser.CompanyId = Convert.ToInt32(dataReader["Company_ID"]);
                        oUser.BranchId = Convert.ToInt32(dataReader["Branch_ID"]);
                        oUser.UserName = Convert.ToString(dataReader["User_Name"]);
                        lstUser.Add(oUser);
                    }
                    dataReader.Close();
                    dataReader.Dispose();

                }
                catch
                (Exception)
                {

                }
                finally
                {
                    dbManager.Close();
                    dbManager.Dispose();
                } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-25T18:59:27.770

To read all the data from the columns of the current row in a DataReader, you can simply use GetValues(), and extract the values from the array - they will be Objects, of database types.

```
Object[] values;
int numColumns = dr.GetValues(values); //after "reading" a row
for (int i = 0; i < numColumns; i++) {
    //read values[i]
} 
```

MSDN - "For most applications, the GetValues method provides an efficient means for retrieving all columns, rather than retrieving each column individually."

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-01-27T11:45:02.537

很抱歉发布一个非常古老的问题的答案。由于没有一个答案是正确的（他们有安全问题或没有检查 DBNull），我决定发布我自己的答案。

```
public async Task<StringBuilder> FetchFileDetailsAsync(string filename, string subdirectory, string envId)
    {
        var sb = new StringBuilder();
        //TODO: Check the parameters

        const string connectionString = "user id=userid;password=secret;data source=" +
                                        "(DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=10.0.0.8)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=xe)))";

        const string selectQuery = "SELECT * FROM EIP_Deployment_Files"
                                + " WHERE Filename = :filename"
                                + " AND Subdirectory = :subdirectory"
                                + " AND Environment_ID = :envID"
                                + " AND rownum<=1";

        using (var connection = new OracleConnection(connectionString))
        using (var cmd = new OracleCommand(selectQuery, connection) {BindByName = true, FetchSize = 1 /*As we are expecting only one record*/})
        {

            cmd.Parameters.Add(":filename", OracleDbType.Varchar2).Value = filename;
            cmd.Parameters.Add(":subdirectory", OracleDbType.Varchar2).Value = subdirectory;
            cmd.Parameters.Add(":envID", OracleDbType.Varchar2).Value = envId;

            //TODO: Add Exception Handling
            await connection.OpenAsync();
            var dataReader = await cmd.ExecuteReaderAsync(CommandBehavior.CloseConnection);

            var rowValues = new object[dataReader.FieldCount];
            if (dataReader.Read())
            {
                dataReader.GetValues(rowValues);
                for (var keyValueCounter = 0; keyValueCounter < rowValues.Length; keyValueCounter++)
                {
                    sb.AppendFormat("{0}:{1}", dataReader.GetName(keyValueCounter), 
                        rowValues[keyValueCounter] is DBNull ? string.Empty : rowValues[keyValueCounter])
                      .AppendLine();
                }

            }
            else
            {
                //No records found, do something here
            }
            dataReader.Close();
            dataReader.Dispose();
        }
        return sb;
    } 
```

# r - 导入数据时避免重复语句

> ID：16222415
> 
> 赞同：0
> 
> 时间：2013-04-25T18:47:17.800
> 
> 标签：r, loops, import

我编写了以下代码将数据导入 R：

```
## specify where all the data files are stored 
DataFolder <- "DataFolder"

## obtain the name of each file in DataFolder
files <- list.files(DataFolder)

## obtain name of each file
LocNames <- unique(sub("^([^.]*).*", "\\1", files)) # this removes the extension and keeps the unique names

for (i in 1:length(LocNames)){

  #
  car <- read.table(paste(DataFolder, paste(LocNames[i], ".car", sep=""), sep="/"),
                    header = TRUE, sep = "\t", colClasses=c(dateTime="POSIXct"))  
  car <- aggregate(car[colnames(car)[2:length(colnames(car))]],list(dateTime = cut(car$dateTime,breaks = "hour")),mean, na.rm = TRUE)

  #  
  light <- read.table(paste(DataFolder, paste(LocNames[i], ".light", sep=""), sep="/"),
                    header = TRUE, sep = "\t", colClasses=c(dateTime="POSIXct"))
  light <- aggregate(light[colnames(light)[2]],list(dateTime = cut(light$dateTime, breaks = "hour")),mean, na.rm = TRUE)
} 
```

所以，在这里我有一个 DataFolder，我的所有文件都存储在其中。这些文件是根据记录数据的位置和文件的扩展名命名的，该文件的扩展名是被测变量的名称。这里我们以汽车销售和灯光为例。

从这里开始，我想减少循环内参数的大小，因此不必在另一个变量之后重复相同的步骤命名一个变量，我只想写变量名，例如汽车、灯光，然后是结果显示的脚本将被返回。

如果我的意图不明确，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:52:10.517

只需使用一个功能。大意是什么

```
## specify where all the data files are stored 
DataFolder <- "DataFolder"

## obtain the name of each file in DataFolder
files <- list.files(DataFolder)

readMyFiles <- function(DataFolder, LocNames, extension){
  data <- read.table(paste(DataFolder, paste(LocNames[i], ".", extension, sep=""), sep="/"),
                    header = TRUE, sep = "\t", colClasses=c(dateTime="POSIXct"))  
  data <- aggregate(data[colnames(data)[2:length(colnames(data))]],list(dateTime = cut(data$dateTime,breaks = "hour")),mean, na.rm = TRUE)
  data
}

## obtain name of each file
LocNames <- unique(sub("^([^.]*).*", "\\1", files)) # this removes the extension and keeps the unique names

for (i in 1:length(LocNames)){

  car <- readMyFiles(DataFolder, LocNames, ".car")

  light <- readMyFiles(DataFolder, LocNames, ".light")
} 
```

# php - 变量是否可以评估为多维 PHP 数组索引

> ID：16222418
> 
> 赞同：1
> 
> 时间：2013-04-25T18:47:24.140
> 
> 标签：php, arrays

给定一个多维数组或字典`$array`。

并假设`$array['foo']['bar']['baz'] = 'something';`

除了通过 eval 语句对我来说，还有其他方法可以使用多维索引`foo/bar/baz`吗？（用例是动态创建索引，即函数不知道 /foo/bar/baz/ 是什么）。

我能想到的唯一方法是：

```
$item = testGetIndex($array, "'foo']['bar']['baz'");

function testGetIndex($array, $index) {
  eval('$item = $array[' . $index . '];');
  return $item;
} 
```

* * *

**注意**：我应该提到我不想搜索这个数组。这是一个奇怪的用例。我被传递了一个非常大的多维数组，不得不使用像..

`$array[foo][bar]..[baz]`对数组进行修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:51:20.027

在这里公然重用[我的答案](https://stackoverflow.com/questions/16086423/converting-config-ini-like-string-dot-separated-value-to-actual-array-keys/16086531#16086531)：

```
function recurseKeys(array $keys,array $array){
    $key = array_shift($keys);
    if(!isset($array[$key])) return null;
    return empty($keys) ?
        $array[$key]:
        recurseKeys($keys,$array[$key];
}
$values = recurseKeys(explode('/','foo/bar/baz'),$yourArray); 
```

**编辑：**正如杰克指出的那样，不需要递归：

```
function findByKey(array $keys,array $array){
    while(!is_null($key = array_shift($keys))){
        if(!isset($array[$key])) return null;
        $array = $array[$key];
    }
    return $array;
}
$values = findByKey(explode('/','foo/bar/baz'),$yourArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:54:05.693

一个简单的循环就可以做到，比如：

```
function get(array $array, $keys) {
  $val = $array;
  foreach (explode('/', $keys) as $part) {
    if (!isset($val[$part])) {
      return null;
    }
    $val = $val[$part];
  }
  return $val;
}

$array['foo']['bar']['baz'] = 'something';
echo get($array, 'foo/bar/baz'); 
```

[http://ideone.com/vcRvXW](http://ideone.com/vcRvXW)

**编辑**：

对于修改，只需使用引用：

```
function set(array &$array, $keys, $value) {
  $val = &$array;
  foreach (explode('/', $keys) as $part) {
    if (!isset($val[$part])) {
      $val[$part] = array();
    }
    $val = &$val[$part];
  }
  $val = $value;
} 
```

[http://ideone.com/WUNhF6](http://ideone.com/WUNhF6)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T18:53:15.633

使用路径修改数组：

```
function setPath(&$root, $path, $value)
{
        $paths = explode('/', $path);
        $current = &$root;

        foreach ($paths as $path) {
                if (isset($current[$path])) {
                        $current = &$current[$path];
                } else {
                        return null;
                }
        }

        return $current = $value;
}
$path = 'foo/bar/baz';
$root = array('foo' => array('bar' => array('baz' => 'something')));

setPath($root, $path, '123'); 
```

您可以调整函数以仅返回对要更改的元素的引用：

```
function &getPath(&$root, $path)
{
        $paths = explode('/', $path);
        $current = &$root;

        foreach ($paths as $path) {
                if (isset($current[$path])) {
                        $current = &$current[$path];
                } else {
                        return null;
                }
        }

        return $current;
}

$x = &getPath($root, $path);

$x = 456; // $root['foo']['bar']['baz'] == 456 
```

# c# - 如何应用文本框控件模板？

> ID：16222421
> 
> 赞同：5
> 
> 时间：2013-04-25T18:47:38.233
> 
> 标签：c#, wpf, xaml, .net-4.0, controltemplate

我正在尝试简化一些代码并提高我的可维护性。

我最初正在寻找一种使文本框向左对齐的方法，该方法可以在达到最大值后收缩和扩展至最大值，而无需在网格单元内居中。

所以我开始写一些这样的代码......

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="200" />
    </Grid.ColumnDefinitions>
    <TextBox Text="Some text"
             VerticalAlignment="Center"
             HorizontalAlignment="Stretch"
             Margin="10"
             MaxWidth="150" />
</Grid> 
```

**（代码清单 1）**

这会产生看起来像这样的东西......

![以网格为中心的文本框](https://i.stack.imgur.com/pUUs9.png)

**（图1）**

如您所见，这会将 TextBox 以其最大宽度居中，但它与网格单元格的中心对齐。

那么我可能会像这样改变文本框的水平对齐方式......

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="200" />
    </Grid.ColumnDefinitions>
    <TextBox  Text="Some text"
              VerticalAlignment="Center"
              HorizontalAlignment="Left"
              Margin="10"
              MaxWidth="100" />
</Grid> 
```

**（代码清单 2）**

但不幸的是，这只产生看起来像这样的东西......

![太小 TextBox 左对齐](https://i.stack.imgur.com/XZcrB.png)

**（图2）**

同样，这是不对的，因为尽管右侧有所有空白空间，但文本框并没有像我想要的那样扩展到其最大宽度 100。

最终，我发现如果将 TextBox 放在嵌套网格中，就可以达到预期的效果。

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="200" />
    </Grid.ColumnDefinitions>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*"
                              MaxWidth="120" />
            <ColumnDefinition Width="0*" />
        </Grid.ColumnDefinitions>
        <TextBox Text="Some text"
             VerticalAlignment="Center"
             HorizontalAlignment="Stretch"
             Margin="10"
             MaxWidth="100" />
    </Grid>
</Grid> 
```

**（代码清单 3）**

这会产生这个......

![正确的文本框](https://i.stack.imgur.com/Ak96i.png)

**（图3）**

如您所见，嵌套网格填充了整个 200 宽的空间，但文本框填充了左侧的 100，并在右侧留下了空白空间。（如果此窗口可调整大小，它将适当缩小和扩大）

我想将*代码清单 3*的方法应用到样式或控件模板，因此我可以将它一揽子应用到适用于这种情况的 TextBox。

在一个完美的场景中，我会做类似的事情......

```
<TextBox Text="Some text"
         VerticalAlignment="Center"
         HorizontalAlignment="Stretch"
         Margin="10"
         MaxWidth="100"
         Style="{StaticResource ExpandingTextBox}" /> 
```

**（代码清单 4）**

*并达到与图3*相同的结果。

我尝试了以下...

```
<Style TargetType="{x:Type TextBox}"
       x:Key="ExpandingTextBox">
    <Setter Property="OverridesDefaultStyle"
            Value="True"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="TextBox">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*"
                                          MaxWidth="170" />
                        <ColumnDefinition Width="0*" />
                    </Grid.ColumnDefinitions>
                    <ContentPresenter/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

**（代码清单 5）**

但这只会导致文本框从我的表单中消失。我不太擅长写这样的模板，所以我有点不知所措。

另外，我刚刚意识到的一件事是嵌套列的宽度 = MaxWidth + 2 x Margin。我不介意在 TextBox 声明中明确设置列宽，但如果它可以是自动的，那就太好了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T22:56:15.580

您需要在模板中使用 TextBox 而不是 ContentPresenter。您将 TextBox 的默认模板替换为不再具有文本输入区域的模板。试试这样：

```
 <Style TargetType="{x:Type TextBox}" x:Key="ExpandingTextBox">
        <Setter Property="OverridesDefaultStyle" Value="True"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="TextBox">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="1*"
                                      MaxWidth="170" />
                            <ColumnDefinition Width="0*" />
                        </Grid.ColumnDefinitions>
                        <TextBox  Text="{TemplateBinding Text}"
                                  VerticalAlignment="Center"
                                  HorizontalAlignment="Stretch"
                                  Margin="10"
                                  MaxWidth="100"
                         />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

这应该可以，但是 imo 有点奇怪..

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-26T16:11:43.397

感谢[jure](https://stackoverflow.com/users/2300730/jure "法理")让我开始。与往常一样，事实证明该解决方案比最初允许的要复杂一些。

让我们看看我做了什么。

使用上一篇文章中提出的想法，经过一番摸索，我想出了以下代码。

```
<Style TargetType="{x:Type TextBox}"
       x:Key="ExpandingTextBox">
    <Setter Property="OverridesDefaultStyle"
            Value="True" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="TextBox">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*">
                            <ColumnDefinition.MaxWidth>
                                <Binding Path="MaxWidth"
                                         RelativeSource="{RelativeSource TemplatedParent}">
                                </Binding>
                            </ColumnDefinition.MaxWidth>
                        </ColumnDefinition>
                        <ColumnDefinition Width="0*" />
                    </Grid.ColumnDefinitions>
                    <TextBox  Text="{TemplateBinding Text}">
                        <TextBox.MaxWidth>
                            <Binding Path="MaxWidth"
                                     RelativeSource="{RelativeSource TemplatedParent}" />
                        </TextBox.MaxWidth>
                    </TextBox>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

**（代码清单 6）**

当然，像这样在我的页面的 XAML 标记中应用它......

```
<TextBox  Grid.Column="1"
          Grid.Row="3"
          Text="{Binding Path=Username}"
          Style="{StaticResource ExpandingTextBox}"
          Margin="10"
          MaxWidth="200" /> 
```

**（代码清单 7）**

这给出了这样的结果......

![不正确的样式模板](https://i.stack.imgur.com/Ouqm6.png)

**（图4）**

在查看了该图像并思考了一会儿之后，我发现问题是即使我在样式中正确应用了最大宽度，最大宽度属性仍被应用于 XAML 中控件的根.

本质上是将其压缩到页面上的最大宽度，然后在完成之后，根据样式应用最大宽度！

如此简单，却又如此难以捉摸！

因此，我修改了样式以使用 Tag 属性以应用于样式化的最大宽度元素，因为 Tag 属性在根部不做任何事情。

```
<Style TargetType="{x:Type TextBox}"
       x:Key="ExpandingTextBoxMaxWidthInTag">
    <Setter Property="OverridesDefaultStyle"
            Value="True" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="TextBox">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*">
                            <ColumnDefinition.MaxWidth>
                                <Binding Path="Tag"
                                         RelativeSource="{RelativeSource TemplatedParent}">
                                </Binding>
                            </ColumnDefinition.MaxWidth>
                        </ColumnDefinition>
                        <ColumnDefinition Width="0*" />
                    </Grid.ColumnDefinitions>
                    <TextBox  Text="{TemplateBinding Text}">
                        <TextBox.MaxWidth>
                            <Binding Path="Tag"
                                     RelativeSource="{RelativeSource TemplatedParent}" />
                        </TextBox.MaxWidth>
                    </TextBox>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

**（代码清单 8）**

像这样在 XAML 中应用...

```
<TextBox  Grid.Column="1"
          Grid.Row="3"
          Text="{Binding Path=Username}"
          Style="{StaticResource ExpandingTextBoxMaxWidthInTag}"
          Margin="10"
          Tag="200" /> 
```

*最后*给出这样的预期结果......

![显示布局的所需结果](https://i.stack.imgur.com/qsIEz.png)

**（图5）**

![没有显示布局的期望结果](https://i.stack.imgur.com/MavbE.png)

**（图6）**

所以，真正的诀窍是意识到我不一定要限制整个模板化控件的最大宽度，而只是想限制控件内部 TextBox 的宽度！

一旦我弄清楚了，使用 Tag 属性才有意义，该属性对根级别的控件没有任何作用！

我希望这可以帮助其他可能遇到此问题的人！

# java - 如何在 JBoss SOA 5.x 上部署 JPA 2 应用程序？

> ID：16222424
> 
> 赞同：0
> 
> 时间：2013-04-25T18:47:41.610
> 
> 标签：java, jpa, jboss, classloader, ear

我正在迁移最初在 JBoss SOA 服务器版本 5.2 上使用 EJB3 持久性（JPA 1.0）编写的应用程序，以便它使用来自 JPA 2.0（休眠实现）的类型安全查询和标准查询。到目前为止，我完全无法部署 EAR，因为它找不到正确版本的 javax.persistence 库。该错误表明它找不到类 javax.persistence.criteria.Expression。据我所知，它正在从 JBoss 内置的 ejb3-persistence 库中加载 javax.persistence 类。我尝试了各种方法，这些方法应该会导致 JBoss 首先使用应用程序库，但无济于事。任何帮助，将不胜感激。

我尝试过的方法：

1.  向 jboss-app.xml 文件添加“<loader-repository>”配置
2.  将 jboss-classloading.xml 文件添加到 EAR 的 META-INF 文件夹
3.  修改 ear-deployer-jboss-beans.xml 文件以使用隔离类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T16:20:59.820

答案是“jboss-classloading.xml”文件适用于 Web 应用程序，但无法覆盖已发布的 EJB 的类加载。已发布 EJB 的库在服务器级别必须是唯一的，并且由于 JBoss aleady 包含一个处理 java.persistence.* 命名空间的库，因此您不能在 EJB 中使用任何其他版本的 JPA。

# java - 在 Java EE 应用程序中保存上传文件的首选方式是什么？

> ID：16222426
> 
> 赞同：0
> 
> 时间：2013-04-25T18:47:43.940
> 
> 标签：java, spring, jakarta-ee, spring-mvc

正如标题所说，在 Java EE Web 应用程序中保存上传文件的首选方式是什么？我阅读了一些关于其他问题的答案，即不建议将文件保存到 servlet 容器的文件系统，而无需进一步解释。有人说你应该将它保存到数据库中（但我怀疑我之前读过的内容），有人说你应该使用 JCR，我能找到的唯一实现是 Apache JackRabbit，它似乎不是很活跃？

什么是最好的选择？除了上面提到的还有没有？您会选择其中一个的原因是显而易见的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:27:21.143

根据您的环境，您可能需要做以下几件事之一：

1.  您的服务器在云端。您需要使用共享云存储服务，例如[Amazon S3](http://aws.amazon.com/s3/)（顺便说一句，它有一个不错的 API）

2.  您托管在传统服务器上。在这种情况下，最佳做法是使用共享 NAS，但云存储也是一种选择，除非您的客户有监管问题

3.  您主要处理许多小（er）文件，并且希望它们可搜索。对于这种情况，您将选择一个 BLOB 数据库列。

4.  如果您正在处理大文件（如视频），您可能需要查看 NAS/云存储，并将数据库用作对 NAS/S3 位置的参考

这些选项的原因是因为您不想将数据沙箱化到正在运行的实例中。这种架构允许您的应用程序的其他实例联机或进行简单的服务器迁移，并且仍然可以访问共享数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:52:04.920

正如您已经看到的，JCR 并不是那么受欢迎。从平台的角度来看，使用文件系统都不是一个好主意（例如，windows 对最大文件路径长度有限制，对合法文件名的限制，以及目录中 >~100K 文件在减速到爬行之前的问题) 和架构视角 - 考虑集群您的应用程序：

如果您使用任何形式的本地存储，您将无法轻松进行集群（因为并非所有文件都可以从所有节点轻松访问），因此您需要选择可从所有集群节点访问的内容。DB 非常适合。某种集群缓存（或 hadoop）也可能很合适，具体取决于您的问题的具体情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:02:46.480

In my opinion this message this question depends on what you want to save. Big files like HD video is are much faster accessed via filesystem. Using a database on the other hand makes it easier because you don't have to know the file are actually saved.

Small amount and small files > database Otherwise filesystem

Another pro for using filesystem as storage is the ability to implement a full text search framework like apache luscene.

# java - 获取 ArrayIndexOutOfBoundsException

> ID：16222430
> 
> 赞同：1
> 
> 时间：2013-04-25T18:47:56.923
> 
> 标签：java, arrays

我有这个代码：

```
public class OddSum1 {
   public OddSum1() {
   }
   public static void main(String[] args) {

   int OddLimit = Integer.parseInt(args[0]);
   int sum = 0;

   for (int i = 1; i <= OddLimit; i += 2) {
     sum += i;
   }

   System.out.println("The sum of odd numbers from 1 to " + OddLimit + " is " + sum);

   }    
} 
```

每当我运行它时，我都会收到此错误：

```
java.lang.ArrayIndexOutOfBoundsException: 0
    at OddSum1.main(OddSum1.java:7)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at edu.rice.cs.drjava.model.compiler.JavacCompiler.runCommand(JavacCompiler.java:272) 
```

它应该提示用户输入一个数字，然后将奇数从 1 与输入的数字相加，我猜这是一个问题`int OddLimit = Integer.parseInt(args[0])`；

但我只是不知道如何解决它，任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T18:50:07.807

> 它应该提示用户输入

您需要将参数传递给 main、命令行参数，然后将索引更改为`0`

例如：

```
$java YourMainClass 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:04:42.557

您可以从下面采取两种方法中的任何一种：

方法 1：您可以通过将其作为参数传递给 main 方法来指定oddLimit：

代码 ：

```
public class OddSum1 {
public OddSum1() {
}
public static void main(String[] args) {
int OddLimit = Integer.parseInt(args[0]);
int sum = 0;
for (int i = 1; i <= OddLimit; i += 2)
sum += i;
System.out.println("The sum of odd numbers from 1 to " + OddLimit + " is " + sum);
}    
} 
```

编译和运行代码：

`javac OddSum1.java`

`java OddSum1 20`

方法 2：从提示中交互式读取 OddLimit

代码：

```
public class OddSum1 {
public OddSum1() {
}
public static void main(String[] args) {

int OddLimit = Integer.parseInt(System.console().readLine());
int sum = 0;

for (int i = 1; i <= OddLimit; i += 2)
sum += i;

System.out.println("The sum of odd numbers from 1 to " + OddLimit + " is " + sum);

}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:50:22.147

它不会提示您输入。您必须将输入添加到命令行。

```
java OddSum1 5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T18:53:51.743

如果使用 Eclipse，请从顶部菜单中选择 Run->Run... 并在 Arguments 选项卡下为 Program 参数提供一个编号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T18:51:51.197

你的数组`args`是空的。

```
int OddLimit = Integer.parseInt("100"); 
```

硬编码数字，或从命令行传递它

# ruby-on-rails - 多态和一对多关联

> ID：16222432
> 
> 赞同：0
> 
> 时间：2013-04-25T18:47:59.497
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, associations

我有一个与 Grade | 多态关联的协作模型。学校，以及与用户的一对多关联

```
 belongs_to :owner, polymorphic: true
  belongs_to :user, foreign_key: "teacher_id" 
```

这是我管理可以访问学校或年级的用户的方式。现在，我需要做这样的事情

```
School.first.teachers 
Grade.first.teachers 
```

我认为在年级/学校模型中会是这样的

```
has_many :teachers, through: :collaborations, foreign_key: "teacher_id" 
```

但这似乎不是正确的解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:01:23.670

```
has_many :collaborations, :as => :owner
has_many :teachers, :through => :collaborations, :source => :user 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:00:20.337

You need to establish the polymorphic association to collaborations. Try:

```
class School < ActiveRecord::Base
  has_many :collaborations, :as => :owner
  has_many :teachers, :through => :collaborations
end 
```

# jquery - 使用 jquery 设置延迟或超时

> ID：16222437
> 
> 赞同：-1
> 
> 时间：2013-04-25T18:48:13.300
> 
> 标签：jquery

```
$('.showmenu').bind("mouseenter", function (e) {
                $('ul.secondul').show();
});
$('.showmenu').bind("mouseleave", function (e) {
                $('ul.secondul').hide();
}); 
```

有没有办法让第二个功能不会立即触发，而是在延迟 1 秒后触发？因此，当用户不小心将鼠标移出下拉菜单选项卡时，该选项卡不会立即关闭并让用户有机会将鼠标移回其上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:50:02.030

你可以这样做：

```
$('.showmenu')
.bind("mouseenter", function (e) {
    if($(this).data("timer"))
        clearTimeout($(this).data("timer"));
    $('ul.secondul').show();
})
.bind("mouseleave", function (e) {
    $(this).data("timer", setTimeout(function(){
        $('ul.secondul').hide();
    }, 1000));
}); 
```

使用`$(this).data`，因为它是一个类，你可以有更多的`.showmenu`项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:50:24.597

你可以做这样的事情 -

```
vat timeout;
$('.showmenu').bind("mouseenter", function (e) {
                $('ul.secondul').show();
                clearTimeout(timeout);
});
$('.showmenu').bind("mouseleave", function (e) {
            timeout = setTimeout(function(){
             $('ul.secondul').hide();
            },1000);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T19:00:09.970

如果你使用`fadeIn()`and `fadeOut()`（或其他动画），你可以`delay()`像这样链接它：

```
$('.showmenu').hover(

  function () {
    $('ul.secondul').stop(true,true).fadeIn(200);
  },

  function () {
    $('ul.secondul').stop(true, true).delay(1000).fadeOut(200);
  }

); 
```

小提琴：http: [//jsfiddle.net/7VcwF/](http://jsfiddle.net/7VcwF/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T18:54:01.223

我相信 jQuery hover 是你想要使用的：

```
$('.showmenu').hover(
    function() {
        $('ul.secondul').show();
    },
    function() {
        $('ul.secondul').hide();
    }
); 
```

# r - 使用基于多列的二进制数据创建新列

> ID：16222438
> 
> 赞同：0
> 
> 时间：2013-04-25T18:48:20.343
> 
> 标签：r, binary-data

我有一个数据框，我想根据之前列中的记录创建一个具有 0/1 的新列（这将代表一个物种的缺席/存在）。我一直在尝试这个：

```
update_cat$bobpresent <- NA #creating the new column

x <- c("update_cat$bob1999", "update_cat$bob2000", "update_cat$bob2001","update_cat$bob2002", "update_cat$bob2003", "update_cat$bob2004", "update_cat$bob2005", "update_cat$bob2006","update_cat$bob2007", "update_cat$bob2008", "update_cat$bob2009") #these are the names of the columns I want the new column to base its results in

bobpresent <- function(x){
  if(x==NA)
    return(0)
  else
    return(1)
} # if all the previous columns are NA then the new column should be 0, otherwise it should be 1 
```

update_cat$bobpresence <- sapply(update_cat$bobpresent, bobpresent) #将函数应用到新列

一切都很顺利，直到我收到此错误的最后一个字符串：

```
Error in if (x == NA) return(0) else return(1) : 
  missing value where TRUE/FALSE needed 
```

有人可以给我建议吗？您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:06:16.173

根据定义，所有操作`NA`都将产生`NA`，因此`x == NA` *总是*计算为`NA`。如果要检查一个值是否为`NA`，则必须使用该`is.na`函数，例如：

```
> NA == NA
[1] NA
> is.na(NA)
[1] TRUE 
```

您传递给的函数`sapply`期望 TRUE 或 FALSE 作为返回值，但它却得到 NA ，因此出现错误消息。你可以通过重写你的函数来解决这个问题：

```
bobpresent <- function(x) { ifelse(is.na(x), 0, 1) } 
```

无论如何，根据您的原始帖子，我不明白您要做什么。此更改仅修复了您遇到的错误`sapply`，但修复程序的逻辑是另一回事，并且您的帖子中没有足够的信息。

# ruby - 如何访问新的浏览器选项卡

> ID：16222446
> 
> 赞同：3
> 
> 时间：2013-04-25T18:48:50.490
> 
> 标签：ruby, watir

Watir noob在这里。我正在尝试连接并操作新生成的浏览器选项卡，但对如何识别新选项卡有点困惑。这是我所拥有的：

Windows 7（32 位）IE 10

红宝石 1.9.3-p392/TDM-32.4.5.2

本地宝石

瓦蒂尔（4.0.2 x86-mingw32）

水经典（3.6.0）

水网驱动程序（0.6.3）

脚本的基本要点：

```
require 'rubygems'
require 'Watir'
ie=Watir::Browser.new 
```

...原始浏览器选项卡上的脚本的第一部分已完成。原始浏览器选项卡生成第二个浏览器选项卡，我需要访问它。我在某处阅读了回复，我需要在附加到浏览器选项卡之前链接到它，但是我很难通过 href、url 或标题识别链接：（其中 'path...' =网址）

```
ie.link(:href, "path...").click 
```

--未捕获的异常：无法定位元素，使用 {:tag_name=>["a"], :href=>"path..."

```
ie.link(:url, "path...").click 
```

--未捕获的异常：无法定位元素，使用 {:tag_name=>["a"], :url=>"path..."

```
ie.a(:href, "path...").click 
```

--无法定位元素，使用 {:tag_name=>["a"], :url=>"path..."}

但是，如果我尝试以下操作：

```
ie2 = Watir::IE.attach(:title, 'New_Tab_Title') 
```

--“找不到标题为 New_Tab_Title 的窗口”

首先，我如何指向新的 url 或浏览器选项卡？如果我在第二个选项卡打开后执行 ie.close，则第一个选项卡会关闭，因此很明显我无法识别这个新选项卡（即使它看起来有焦点）。

其次，我是否正确假设我需要先连接到链接/url，然后附加到浏览器选项卡，然后我可以继续填充字段？

最后，我可以使用短名称 url，因为生成的 url 很长，还是我们需要插入整个 url？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T20:05:12.087

### 我建议在选项卡处理上使用 watir-webdriver：

### 尝试以下

```
MEDBEDbs-iMac:~ medbedb$ irb
1.9.3p392 :001 > require 'watir-webdriver'
 => true 
1.9.3p392 :002 > b = Watir::Browser.new :chrome
 => #<Watir::Browser:0x..f87e94a30e87e1e60 url="about:blank" title="about:blank"> 
1.9.3p392 :003 > b.goto "http://www.w3schools.com/html/html_links.asp"
 => "http://www.w3schools.com/html/html_links.asp" 
1.9.3p392 :004 > b.title
 => "HTML Links" 
```

### 此处将在新选项卡中打开一个新窗口。

```
1.9.3p392 :005 > b.a(:text, 'HTML links').click
 => [] 
1.9.3p392 :006 > b.windows.count
 => 2 
```

### 但是 watir-webdriving 仍在处理上一页..

```
1.9.3p392 :007 > b.title
 => "HTML Links" 
```

### 切换到最近打开的标签。

```
1.9.3p392 :008 > b.windows.last.use
 => #<Watir::Window:0x..fd949289f2b083062 located=true> 
1.9.3p392 :009 > b.title
 => "Tryit Editor v1.7" 
```

### 从这里您可以在新选项卡中做任何您需要的事情。

```
1.9.3p392 :010 > b.windows.last.close
 => #<Watir::Window:0x..fd949289f2b083062 located=true> 
```

### 关闭新标签后，watir 将切换回初始标签。

```
1.9.3p392 :011 > b.title
 => "HTML Links" 
1.9.3p392 :012 > b.close
 => true 
```

向我们展示网页的代码或网址以获得更详细的结果...

# ruby - 需要一个块的自定义 RSpec 匹配器

> ID：16222450
> 
> 赞同：5
> 
> 时间：2013-04-25T18:49:07.447
> 
> 标签：ruby, rspec

如何创建以下 RSpec 匹配器？

```
foo.bars.should incude_at_least_one {|bar| bar.id == 42 } 
```

如果我正在重新发明轮子，请告诉我，但我也很想知道如何创建一个带块的自定义匹配器。一些内置的匹配器可以做到这一点，所以这是可能的。我试过这个：

```
RSpec::Matchers.define :incude_at_least_one do |expected|
  match do |actual|
    actual.each do |item|
      return true if yield(item)
    end
    false
  end
end 
```

我也尝试过`&block`在两个级别上通过。我错过了一些简单的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:23:25.393

我从 Neil Slater 的代码开始，然后让它工作：

```
class IncludeAtLeastOne
  def initialize(&block)
    @block = block
  end

  def matches?(actual)
    @actual = actual
    @actual.any? {|item| @block.call(item) }
  end

  def failure_message_for_should
    "expected #{@actual.inspect} to include at least one matching item, but it did not"
  end

  def failure_message_for_should_not
    "expected #{@actual.inspect} not to include at least one, but it did"
  end
end

def include_at_least_one(&block)
  IncludeAtLeastOne.new &block
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:26:09.327

已经讨论过将这样的匹配器添加到 rspec。我不确定你的块问题，但你可以用看起来不那么优雅的方式来表示这个测试：

```
foo.bars.any?{|bar| bar.id == 42}.should be_true 
```

可能比制作自定义匹配器更容易，并且如果您的测试类似于`it "should include at least one foo matching the id"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:31:52.707

RSpec DSL 不会这样做，但你可以这样做：

```
class IncludeAtLeastOne
  def matches?(target)
    @target = target
    @target.any? do |item|
      yield( item )
    end
  end

  def failure_message_for_should
    "expected #{@target.inspect} to include at least one thing"
  end

  def failure_message_for_should_not
    "expected #{@target.inspect} not to include at least one"
  end
end

def include_at_least_one
  IncludeAtLeastOne.new
end

describe "foos" do
  it "should contain something interesting" do
    [1,2,3].should include_at_least_one { |x| x == 1 }
  end
end 
```

# html - HTML5 到原生应用程序的安全问题

> ID：16222455
> 
> 赞同：0
> 
> 时间：2013-04-25T18:49:28.730
> 
> 标签：html, security, mobile, native

您是否会选择使用 HTML5 构建应用程序，但当安全性是您的客户端的优先事项时？

假设为一家数据非常敏感的银行创建 HTML5 移动应用程序，您会使用什么技术，原生技术还是 HTML5？

对于这样的主题，互联网上有什么好的教程吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:55:37.703

客户端的安全性并不是真正的问题。您需要担心*服务器*端的安全性。您必须假设，无论您将哪种代码放入客户端，都会有人对其进行破解/逆向工程。由于您无法控制客户端，因此您必须将精力集中在服务器上。由于必须保护服务器的 API，因此客户端平台并不重要，只要您使用 HTTPS 来加密/保护传输中的信息，并且您不会将敏感的服务器端信息泄露给客户端。

构建安全的 Web 应用程序是一项艰巨的工作，远远超出 SO 所能回答的范围。[我强烈建议您获取并阅读The Web Application Hacker's Handbook 的](https://rads.stackoverflow.com/amzn/click/com/1118026470)副本（我已经阅读并喜欢它），或者看起来很有前途的新书，[Web Application Defender's Cookbook](https://rads.stackoverflow.com/amzn/click/com/1118362187)。

# php - 使用 Javascript 修改 div 内容是整个网站的好方法吗？

> ID：16222458
> 
> 赞同：0
> 
> 时间：2013-04-25T18:49:30.383
> 
> 标签：php, javascript, jquery

我目前正在开发自己的作品集，我对使用哪种架构有一些疑问。

目前，我有一个`index.html`页面，其中包含当有人到达该网站时我想要显示的所有信息。我还有一个`/views/`文件夹，其中包含其余内容（例如`cv.html`，`about_me.html`...）

当我从菜单中单击一个元素时，它会使用 jQuery 将适当的内容加载到我的“内容”div 中。所以用户总是停留在同一个页面（索引页面）上，但是内容会发生变化。

但是，我正在尝试使该网站以不同的语言提供，我想知道如何做到这一点。我想`/eng/`在我的文件夹中有一个文件`/views/`夹，只有英文的 HTML 内容。然后我会检查语言是否设置为英语，以便知道使用 jQuery 将哪些内容包含在页面中。

但我不知道我将如何做到这一点，这种方法有多好，或者使用哪种方法来解决这个问题。另外，使用 Javascript 更改 div 内容的方式是我做的好习惯吗？你会推荐什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:00:28.393

改写你的问题：“一个简单的解决方案对一个简单的问题有好处吗？”。

不要过度设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T21:28:10.987

我认为你有一个很好的解决方案。

在您的 javascript 文件中，只需为该语言声明一个具有默认值的变量。

```
var lang = 'eng'; 
```

加载页面时：

```
$('#link').on('click',function(e) {
    e.preventDefault();

    var path_to_load 'views/'+lang+'/'+$(this).attr('href');
        // Do normal .load or .ajax here
}); 
```

更改语言时，您可以使用带有`data-lang-code="eng"`或的按钮或链接`data-lang-code="no"`，或任何您喜欢的东西。

```
$('.lang_choices').on('click',function(e) {
    e.preventDefault();

    lang = $(this).data('lang-code');
    // Load frontpage for the new language here.
}); 
```

编辑：此解决方案建立在您的 - 文件夹中不同语言的子文件夹的想法`/views/`之上。

超级编辑：关于你问的最后一个问题。使用ajax加载部分页面是很典型的WEB2.0。看看 Facebook 是如何做到的。更少的刷新 = 更快的加载时间。此外，在使用 ajax 时，您还有许多简洁的功能。淡入内容，让 div 动画到一侧，新内容从另一侧“飞入”。我试图在我认为合适的地方尽可能多地使用 ajax。除非您的网站非常复杂并且有很多不同的设计（从您的问题来看，它看起来不是那样），否则我建议您继续使用此解决方案。

# php - 以 HTML 格式发送的电子邮件

> ID：16222460
> 
> 赞同：0
> 
> 时间：2013-04-25T18:49:32.757
> 
> 标签：php, html, wordpress

我有一个触发电子邮件的 php 应用程序。现在收件人正在收到一封电子邮件，其中所有的 HTML 都打印在一个文本中。。似乎在这里找不到错误，有什么想法吗？

```
$user_info = get_userdata($venderid);

$shoperMail = $user_info->user_email;
$shoperName = $user_info->display_name;

$to      = $shoperMail.", info@orders.com";
$subject = "Sales Order from website";

$message  = '';
$message  = "Hi $shoperName,<br><br>";
$message .= "A Gift has been redeemed for your services.<br><br>";
$message .= "Customer: $currentuserName<br><br>";
$message .= "Redemption Amount: $$redempt<br><br>";
$message .= "Customer code:$confirmationCode<br><br>";
$message .= "To access their contact & order information, simply log in to your account & select: Gift Cards > Vendor Orders.<br><br>";
$message .= "*Once you have provided the customer with your company's voucher, certificate or online coupon code, please 'Approve' their purchase.<br><br>";
$message .= "Log in: <a href='".$url."/login/'>http://test.com</a><br><br>";
$message .= "If you have any questions, please don't hesitate to contact me.<br><br>";
$message .= "Test test<br>order Gift Cards<br><i>doing cool stuff.</i><br><br>toll free: 866.test x.tes x 9<br><a href='http://www.test.com/'>Test.com</a>,<br><a href='http://www.facebook.com/test/'>facebook.com/test</a><br><a href='http://twitter.com/test/'>twitter.com/test</a><br><br><br>" ;
$message .= "**The information transmitted is intended only for the person or entity to which it is addressed and may contain confidential and/or privileged material. Any review, re-transmission, dissemination or other use of, or taking of any action in reliance upon this information by persons or entities other than the intended recipient is prohibited. If you received this email in error, please contact the sender immediately by return electronic transmission and then immediately delete this transmission, including all attachments, without copying, distributing or disclosing same. ";

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= "To: ".$shoperMail."\r\n";
$headers .= "From: orders@prders.com\r\n";

mail($to,$subject,$message,$headers); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:01:05.930

You need to set the HTML content type, example from the [Codex](http://codex.wordpress.org/Function_Reference/wp_mail):

```
add_filter( 'wp_mail_content_type', 'my_set_html_content_type' );
wp_mail( 'me@example.net', 'The subject', '<p>The <em>HTML</em> message</p>' );
remove_filter( 'wp_mail_content_type', 'my_set_html_content_type' ); // reset content-type 
```

Filter callback:

```
function my_set_html_content_type()
{
    return 'text/html';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T21:18:44.230

我已将您的代码嵌入到我通常使用的相同 html-mail-markup 中。

试试这个：

```
// Getting info    
$user_info = get_userdata($venderid);
$shoperMail = $user_info->user_email;
$shoperName = $user_info->display_name;
$to = $shoperMail.", info@orders.com";

// HTML
$message  = '';
$message  = "Hi $shoperName,<br><br>";
$message .= "A Gift has been redeemed for your services.<br><br>";
$message .= "Customer: $currentuserName<br><br>";
$message .= "Redemption Amount: $$redempt<br><br>";
$message .= "Customer code:$confirmationCode<br><br>";
$message .= "To access their contact & order information, simply log in to your account & select: Gift Cards > Vendor Orders.<br><br>";
$message .= "*Once you have provided the customer with your company's voucher, certificate or online coupon code, please 'Approve' their purchase.<br><br>";
$message .= "Log in: <a href='".$url."/login/'>http://test.com</a><br><br>";
$message .= "If you have any questions, please don't hesitate to contact me.<br><br>";
$message .= "Test test<br>order Gift Cards<br><i>doing cool stuff.</i><br><br>toll free: 866.test x.tes x 9<br><a href='http://www.test.com/'>Test.com</a>,<br><a href='http://www.facebook.com/test/'>facebook.com/test</a><br><a href='http://twitter.com/test/'>twitter.com/test</a><br><br><br>" ;
$message .= "**The information transmitted is intended only for the person or entity to which it is addressed and may contain confidential and/or privileged material. Any review, re-transmission, dissemination or other use of, or taking of any action in reliance upon this information by persons or entities other than the intended recipient is prohibited. If you received this email in error, please contact the sender immediately by return electronic transmission and then immediately delete this transmission, including all attachments, without copying, distributing or disclosing same. ";

// Subject
$subject = "Sales Order from website";

// Header 
$innerboundary ="=_".time()."_=";
$header ="MIME-Version: 1.0\n"; 
$header.="To: ".$to."\n"; 
$header.="From: orders@prders.com\n";
$header.="Reply-To: orders@prders.com\n";
$header.="X-Mailer: kmPHP-Mailer\n"; 
$header.="Content-Type: multipart/alternative;\n\tboundary=\"".$innerboundary."\"\n";

// Body
$body.="\n--".$innerboundary."\n"; 
$body.="Content-Type: text/html;\n\tcharset=\"iso-8859-1\"\n"; 
$body.="Content-Transfer-Encoding: base64\n\n"; 
$body.=chunk_split(base64_encode(($message)))."\n\n"; 
$body.="\n--".$innerboundary."--\n"; 
$body.="\n\n"; 

// Send
mail($shoperMail,$subject,$body,$header); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T21:33:52.797

重申上面的 Marc B 评论

> 不要手动构建 MIME 电子邮件。使用[phpmailer](http://phpmailer.worxware.com/)或[swiftmailer](http://swiftmailer.org/)。他们为您自动完成这一切，您所要做的就是提供 html。

这样做将使您更容易以不同的方式解决问题。

# ios - 有没有人基于 RACSignal 制作了自我更新的可变表视图？

> ID：16222464
> 
> 赞同：23
> 
> 时间：2013-04-25T18:49:40.583
> 
> 标签：ios, objective-c, reactive-cocoa, racsignal

现在有了[对 KVO 的全面支持](https://github.com/ReactiveCocoa/ReactiveCocoa/issues/212)，是否有人制作了一个可变表视图，它以 RACSignal 作为其数据源？理想情况下不需要任何配置的东西。

```
RACSignal *commentsSignal;
UITableView *table = [UITableView new];
table.dataSourceSignal = commentsSignal;
[self.view addSubview:table];
// No more basic config 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-16T18:30:12.193

是的，我创建了一个将表视图绑定到信号的“绑定助手”：

[http://www.scottlogic.com/blog/2014/05/11/reactivecocoa-tableview-binding.html](http://www.scottlogic.com/blog/2014/05/11/reactivecocoa-tableview-binding.html)

您可以使用它将信号绑定到表格视图，其中单元格在 nib 中定义，如下所示：

```
// create a cell template
UINib *nib = [UINib nibWithNibName:@"CETweetTableViewCell" bundle:nil];

// bind the ViewModels 'searchResults' property to a table view
[CETableViewBindingHelper bindingHelperForTableView:self.searchResultsTable
                        sourceSignal:RACObserve(self.viewModel, searchResults)
                        templateCell:nib]; 
```

在上面的示例中，表格视图通过 绑定到`NSArray`视图模型上的属性`RACObserve(self.viewModel, searchResults)`，但是任何`RACSignal`发出数组的都可以很好地绑定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-04T21:22:35.890

ReactiveCocoa 3.0（目前正在开发中）在 UITableView 上添加了一个类别来做到这一点。

我已经有几个星期没有更新它了，但我为它做了一个早期的 podspec：[https ://gist.github.com/adlai-holler/ae321c3398d7db9a55c0](https://gist.github.com/adlai-holler/ae321c3398d7db9a55c0)

# xaml - 编辑富文本块的视觉状态（选定的文本颜色）

> ID：16222472
> 
> 赞同：0
> 
> 时间：2013-04-25T18:50:06.307
> 
> 标签：xaml, windows-store-apps

有没有办法更改 xaml 中富文本块的选定文本的默认颜色？

我检查了 kits/design 文件夹中的主题资源和通用 xaml 文件，没有看到任何用于覆盖所选文本的画笔。我确定我可以挂钩到 selectionchanged 事件，但我更愿意在 xaml 中设置它。

默认颜色是紫色，所以它被设置在我找不到的地方。

这一定是 Windows 商店应用程序中最难使用的控件，关于它的一切都是一场战斗！

# jquery - 在显示当前 iframe 时预加载下一个 iframe

> ID：16222473
> 
> 赞同：0
> 
> 时间：2013-04-25T18:50:06.307
> 
> 标签：jquery, asp.net, iframe

我在 ASP.net 中工作，我有两个 url 用于使用计时器和 iframe 显示为“SlideShow”。它工作正常，但是，我想让它在当前页面显示时已经加载下一页。然后，当计时器点击时，下一页显示没有任何加载时间。因此，该用户看不到两个页面之间的任何延迟。

有人可以帮助我如何实现这一目标吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:22:58.230

您可以使用 jQuery 向 dom 添加 1 个或多个隐藏 iFrame，并添加属性 src="[url-to-load]"。

```
var $frame = $('<iframe />');
$frame.css('display', 'none')
      .attr('src', '[url-to-load]');

$(document.body).append($frame); 
```

然后您需要自己编写轮播功能

# arrays - 用于生成列表/数组的 Bash Brace 扩展的 Powershell 等效项

> ID：16222477
> 
> 赞同：18
> 
> 时间：2013-04-25T18:50:11.840
> 
> 标签：arrays, powershell, brace-expansion

在编写 Bash 脚本时，您可以使用[大括号扩展](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_04.html)来快速生成列表：

![Bash 大括号扩展](https://i.stack.imgur.com/drkLt.png)

在 Powershell 中生成类似列表的最简单方法是什么？我可以使用 .. 或 , 运算符来[生成一个数组](http://blogs.technet.com/b/heyscriptingguy/archive/2011/12/09/easily-create-and-manipulate-an-array-of-arrays-in-powershell.aspx)，但是如何在项目前加上静态字符串文字？

```
PS C:\Users\gb> 1..5
1
2
3
4
5

PS C:\Users\gb> "test"+1..5
test1 2 3 4 5

PS C:\Users\gb> "test","dev","prod"
test
dev
prod

PS C:\Users\gb> "asdf"+"test","dev","prod"
asdftest dev prod 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-25T21:04:12.277

```
PS C:\> "test","dev","prod" | % { "server-$_" }
server-test
server-dev
server-prod
PS C:\> 1..5 | % { "server{0:D2}" -f $_ }
server01
server02
server03
server04
server05
PS C:\> 1..5 | % { "192.168.0.$_" }
192.168.0.1
192.168.0.2
192.168.0.3
192.168.0.4
192.168.0.5 
```

请注意，这`%`是`ForEach-Object`cmdlet 的别名。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-25T18:57:25.293

我希望在这里被证明是错误的，但我不相信有一种方法可以*完全*像使用 bash 或用很少的击键来做到这一点。

您可以通过管道遍历列表`foreach-object`来实现相同的结果。

`1..5 | foreach-object { "test" + $_ }`

或使用速记：

`1..5 | %{"test$_"}`

在这两种情况下（`%`是 的别名`foreach-object`），输出为：

```
test1
test2
test3
test4
test5 
```

注意：如果您要将其构建到用于发布/分发/重用的脚本中，请使用更详细`foreach-object`的，而不是简写`%`- 以提高可读性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-06-16T15:07:08.737

我有一种方法可以使用[int 的 tostring 方法](https://docs.microsoft.com/en-us/dotnet/api/system.int32.tostring?view=netcore-3.1)。末尾的“000”是一个特殊的格式代码。它总是填充正确数量的零。如果您真的想要简洁和神秘，您还可以使用带有方法名称的通配符，例如 t*g。

```
1..10 | % tostring computer000

computer001
computer002
computer003
computer004
computer005
computer006
computer007
computer008
computer009
computer010

1..10 | % t*g 192\.168\.1\.0

192.168.1.1
192.168.1.2
192.168.1.3
192.168.1.4
192.168.1.5
192.168.1.6
192.168.1.7
192.168.1.8
192.168.1.9
192.168.1.10 
```

'x' 也是十六进制打印的格式代码。

```
10..15 | % tostring x

a
b
c
d
e
f 
```

总是有-replace，它也适用于数组。'^' 是“行首”的正则表达式。使用“$”代替“行尾”。

```
(echo test dev prod) -replace '^','server-'

server-test
server-dev
server-prod 
```

哈，我以前从来没有试过这个。

```
(echo test dev prod) -replace (echo ^ server-)

server-test
server-dev
server-prod 
```

也许他们可以在 powershell 8 中进行大括号扩展...

# batch-file - 在 .bat 命令中自动化我的工作

> ID：16222487
> 
> 赞同：1
> 
> 时间：2013-04-25T18:50:25.177
> 
> 标签：batch-file, wmi, rename

这组命令运行不干净。它正确重命名但不加入域或将用户添加到本地组管理员。

```
@echo off
SET /P compName=Name of the computer:%=%
SET /P duName=Computer User:%=%
SET /P adminUserName=Admin UserName:%=%
SET /P adminPassword=Admin Password:%=%
echo If the Above information was entered incorrectly or is incorrect please exit this application now.
PAUSE
CLS

echo Renaming the computer %compName%.
wmic COMPUTERSYSTEM WHERE Name="%ComputerName%" CALL Rename Name="%compName%" Password=null UserName=null

PING 1.1.1.1 -n 1 -w 3000 > nul

echo Error Level: %errorlevel%
echo Joining the computer to the Doamin.net Domain.
wmic COMPUTERSYSTEM WHERE Name="%COMPUTERNAME%" CALL JoinDomainOrWorkgroup FJoinOptions=1 Name="Domain.net" UserName="%adminUserName%" Password="%adminPassword%"
echo Error Level: %errorlevel%

PING 1.1.1.1 -n 1 -w 3000 > nul

echo Adding %duName% to the Administrator's group.
net LOCALGROUP Administrators /ADD %duName%
echo Error Level: %errorlevel%

PING 1.1.1.1 -n 1 -w 3000 > nul

echo Restarting computer...
Shutdown /R /c "Restarting computer and applying changes." 
```

但是，如果我用 PAUSE 替换 Ping 命令，它确实可以顺利通过。问题是我希望它自动化并且我不想使用不同的编码语言。我认为问题在于 WMIC 已经用于重命名并且 PAUSE 将其释放，然后它再次为域重新初始化然后当然添加到管理员组失败，因为它始终是域帐户，但我再次不确定。任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:01:01.247

In my opinion it will be much easier if you use powershell instead of bat file. To add computer to domain you can use examples from [http://letitknow.wordpress.com/2011/02/12/domain-join-using-powershell-v2-0-part-i/](http://letitknow.wordpress.com/2011/02/12/domain-join-using-powershell-v2-0-part-i/). To add user to local admin group üyou can use this one [http://gallery.technet.microsoft.com/scriptcenter/Add-AD-UserGroup-to-Local-fe5e9239](http://gallery.technet.microsoft.com/scriptcenter/Add-AD-UserGroup-to-Local-fe5e9239)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:06:28.060

首先你应该使用

```
ping -n 1 1.1.1.1 > Nul 
```

只需将 -n 1 更改为您想要等待的秒数。选项应该在目标之前，但这只是语义问题

如果您认为 WMIC 行导致问题，请将其替换为 NETDOM 命令。它更容易使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:06:08.510

我建议完全更改`wmic`并`start /wait "" wmic`删除 PING。

# xslt - 使用 XSLT 查找文本模式的索引

> ID：16222488
> 
> 赞同：1
> 
> 时间：2013-04-25T18:50:26.870
> 
> 标签：xslt, xpath

我需要一个转换来找到节点内文本模式的索引。例如在下面的 XML 中。如果我的节点文本模式`<txt>`是“ain”，则答案将是 6、15、26 和 41。

```
<root>
  <info find="ain">
    <txt>The rain in Spain falls mainly in the plain.</txt>
  </info>
</root> 
```

转变为...

```
<find>
  <txt>The rain in Spain falls mainly in the plain.</txt>
  <hit ndx="6"/>
  <hit ndx="15"/>
  <hit ndx="26"/>
  <hit ndx="41"/>
</find> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T04:08:24.730

**这个 XSLT 2.0 转换**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/*/info">
  <xsl:variable name="vSeq" select="string-to-codepoints(txt)"/>
  <xsl:variable name="vPatSeq" select="string-to-codepoints(@find)"/>

  <xsl:sequence select=
   "for $vPat in string(@find),
        $vPatLength in string-length(@find)
     return
        index-of($vSeq, $vPatSeq[1])
                [$vPat eq codepoints-to-string(subsequence($vSeq, ., $vPatLength))]
   "/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<root>
  <info find="ain">
    <txt>The rain in Spain falls mainly in the plain.</txt>
  </info>
</root> 
```

**产生正确的结果**：

```
 6 15 26 41 
```

* * *

**下面是同样简短的转换，它使用它来生成所需的 XML 结果：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*/info">
  <xsl:variable name="vSeq" select="string-to-codepoints(txt)"/>
  <xsl:variable name="vPatSeq" select="string-to-codepoints(@find)"/>

  <find>
   <xsl:copy-of select="txt"/>

   <xsl:for-each select=
   "for $vPat in string(@find),
        $vPatLength in string-length(@find)
     return
        index-of($vSeq, $vPatSeq[1])
                [$vPat eq codepoints-to-string(subsequence($vSeq, ., $vPatLength))]">

    <hit ndx="{.}"/>
   </xsl:for-each>
  </find>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个提供的 XML 文档（如上）时，会产生所需的结果**：

```
<find>
   <txt>The rain in Spain falls mainly in the plain.</txt>
   <hit ndx="6"/>
   <hit ndx="15"/>
   <hit ndx="26"/>
   <hit ndx="41"/>
</find> 
```

**或者，可以使用**：

```
<xsl:for-each select=
  "(1 to string-length(txt) -string-length($vPat) +1)
    [starts-with(substring($vTxt, .), $vPat)]
"> 
```

**完整的转换是**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

     <xsl:template match="/*/info">
      <xsl:variable name="vTxt" select="txt"/>
      <xsl:variable name="vPat" select="string(@find)"/>

      <find>
       <xsl:copy-of select="txt"/>

           <xsl:for-each select=
            "(1 to string-length(txt) -string-length($vPat) +1)
                 [starts-with(substring($vTxt, .), $vPat)]
            ">

            <hit ndx="{.}"/>
           </xsl:for-each>
      </find>
     </xsl:template>
</xsl:stylesheet> 
```

**请注意此解决方案的简单性和直接性**：

*   没有递归。

*   没有命名模板。

*   没有`xsl:function`。

*   没有`xsl:param`。

*   没有`xsl:if`。

*   没有额外的命名空间声明。

*   没有`substring-after()`。

*   没有正则表达式。

*   没有`replace()`。

*   没有`tokenize()`。

*   没有 regex-group()` s。

*   没有`string-join()`。

*   没有`count()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T20:42:05.313

**编辑：**这是一个 XSLT 2.0 解决方案：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:strip-space elements="*" />

  <xsl:template match="info[@find]">
    <find>
      <xsl:copy-of select="txt[1]" />

      <xsl:variable name="pattern" 
                    select="replace(@find, '[-/\\^$*+?.()|\[\]{}]', '\\$0')" />
      <xsl:variable name="parts" select="tokenize(txt, $pattern)" />

      <xsl:for-each select="1 to count($parts) - 1">
        <xsl:variable name="soFar"
                      select="string-join($parts[position() &lt;= current()], 
                                          $pattern)" />
        <hit ndx="{1 + string-length($soFar)}" />
      </xsl:for-each>
    </find>
  </xsl:template>
</xsl:stylesheet> 
```

而且因为我已经对此进行了研究，所以这里有一个 XSLT 1.0 方法。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:strip-space elements="*" />

  <xsl:template match="info[@find]">
    <find>
      <xsl:copy-of select="txt[1]" />
      <xsl:call-template name="Matches">
        <xsl:with-param name="text" select="txt[1]" />
        <xsl:with-param name="pattern" select="@find" />
      </xsl:call-template>
    </find>
  </xsl:template>

  <xsl:template name="Matches">
    <xsl:param name="text" />
    <xsl:param name="pattern" />
    <xsl:param name="offset" select="1" />

    <xsl:variable name="found" select="substring-before($text, $pattern)" />
    <xsl:if test="$found">
      <hit ndx="{$offset + string-length($found)}" />

      <xsl:call-template name="Matches">
        <xsl:with-param name="text" select="substring-after($text, $pattern)" />
        <xsl:with-param name="pattern" select="$pattern" />
        <xsl:with-param name="offset" 
                        select="$offset + 
                                string-length($found) + 
                                string-length($pattern)" />
      </xsl:call-template>
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行任何一个时，结果是：

```
<find>
  <txt>The rain in Spain falls mainly in the plain.</txt>
  <hit ndx="6" />
  <hit ndx="15" />
  <hit ndx="26" />
  <hit ndx="41" />
</find> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T19:26:19.190

使用递归。如果您使用的是 XSLT2，那么最简单的方法是创建一个函数：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:s="http://string-functions"
    version="2.0">

    <xsl:function name="s:indexes" as="element(find)">
        <xsl:param name="str1"/>
        <xsl:param name="str2"/>
        <find value="{$str2}">
            <txt><xsl:value-of select="$str1"/></txt>
            <xsl:sequence select="s:indexes($str1, $str2, 0)"/>
        </find>
    </xsl:function>

    <xsl:function name="s:indexes" as="element(hit)*">
        <xsl:param name="str1"/>
        <xsl:param name="str2"/>
        <xsl:param name="offset"/>                
        <xsl:variable name="sub-before" select="substring-before($str1, $str2)"/>
        <xsl:if  test="$sub-before ne ''">
            <xsl:variable name="position" select="$offset + string-length($sub-before) + 1"/>
            <xsl:variable name="rest" select="substring(substring-after($str1, $sub-before), string-length($str2))"/>
            <xsl:variable name="new-offset" select="$offset + string-length($str1) - string-length($rest)"/>
            <hit test="{$position}"/>
            <xsl:sequence select="s:indexes($rest, $str2, $new-offset)"/>
        </xsl:if>
    </xsl:function>

    <xsl:template match="*">
        <xsl:sequence select="s:indexes('The rain in Spain falls mainly in the plain', 'ain')"/>
    </xsl:template>

</xsl:stylesheet> 
```

=>

```
<find value="ain">
    <txt>The rain in Spain falls mainly in the plain</txt>
    <hit test="6"/>
    <hit test="15"/>
    <hit test="26"/>
    <hit test="41"/>
</find> 
```

# php - PhpUnit 在 Symfony 2 项目中的 PhpStorm 中失败，退出代码为 255

> ID：16222504
> 
> 赞同：7
> 
> 时间：2013-04-25T18:51:57.237
> 
> 标签：php, symfony, phpunit, phpstorm

我无法让 phpunit 在 PhpStorm 的 Symfony 项目中工作 -`phpunit -c app`在 OSX 终端中工作正常。

这是错误：

```
Unable to attach test reporter to test framework of test framework quit unexpectedly
/Applications/MAMP/bin/php/php5.4.4/bin/php/private/var/folders/4l/hw8g4qlj6nnc37lfkc6hcj7w0000gn/T/ide-phpunit.php --bootstrap
/Users/greg/Repos/MyApp/app/bootstrap.php.cache --configuration    
/Users/greg/Repos/MyApp/app/phpunit.xml.dist
MyApp\MyBundle\Tests\Controller\MyControllerTest 
/Users/greg/Repos/MyApp/src/HvH/MyBundle/Tests/Controller/MyControllerTest.php

Testing started at 11:45 AM ...

Process finished with exit code 255 
```

编辑：这是来自 PHP 日志的错误：

```
Fatal error: Uncaught exception 'InvalidArgumentException' with message 'The "app/" directory does not exist.' in /Users/greg/Repos/MyApp/vendor/symfony/symfony/src/Symfony/Component/Finder/Finder.php:650 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-11T15:50:07.053

我遇到了同样的问题，并在文档中找到了以下解决方案：http: [//symfony.com/doc/current/book/testing.html#your-first-functional-test](http://symfony.com/doc/current/book/testing.html#your-first-functional-test)

> 为了运行您的功能测试，WebTestCase 类引导您的应用程序的内核。在大多数情况下，这会自动发生。但是，如果您的内核位于非标准目录中，则需要修改 phpunit.xml.dist 文件以将 KERNEL_DIR 环境变量设置为内核目录：
> 
> ```
> <phpunit>
>     <!-- ... -->
>     <php>
>         <server name="KERNEL_DIR" value="/path/to/your/app/" />
>     </php>
>     <!-- ... -->
> </phpunit> 
> ```

因此，请检查您的 phpunit.xml.dist 配置文件并尝试将绝对路径添加到您的应用程序目录。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-04T17:21:31.820

PhpStorm 并不总是从项目根目录实例化测试运行程序，要解决此问题，请在运行/调试配置中的“自定义工作目录”下添加项目根目录的绝对路径。这将使您不必在 phpunit.xml.dist 配置中添加应用程序的绝对路径，它还将确保可以找到包含的任何相对路径文件（例如 JSON 测试数据）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-27T02:52:27.797

使其工作的步骤（在 PHPStorm 8.0.1 中测试）：

**1）** `Preferences > PHP > PHPUnit` **确保没有为默认配置文件或默认引导文件设置任何内容。**

**2）通过** `Run > Edit Configurations >` **在** `Command Line` **小节中进行自定义 PHPUnit 配置，并确保：**

**a) 设置** `Custom working directory:` **为** `/absolute/path/to/vendor`。

**b）选中“使用替代配置文件：”并将其设置为** `/absolute/path/to/vendor/your_app/(sub_app_if_applicable)/phpunit.xml.dist`

然后您可以通过指定类和文件来运行套件中的任何测试类，或者只需选中“在配置文件中定义”即可根据配置运行所有测试类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-20T14:48:35.877

我遇到了同样的问题。如果您使用的是 yii2/phpStorm，请尝试在调试配置部分的“替代配置文件”下`codeception.yml`进行选择。`unit.yml`

# c++ - 在 openGL 中模拟太阳系

> ID：16222505
> 
> 赞同：-3
> 
> 时间：2013-04-25T18:51:58.527
> 
> 标签：c++, math, opengl, modeling

我正在寻找在 c++ 和 openGL 中模拟太阳系，我想知道是否有一种便宜的方法可以生成，它可以返回一个 x、y、z 向量，我可以使用它来更新每个行星的位置框架。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T19:52:25.083

关于行星位置，您有几种选择。

*   不准确（但“在球场上”）：假设行星在平面上绕圈运动
*   有点不准确（但更接近现实）：从 JPL 的太阳系动力学小组下载行星的“[轨道元素”；](http://ssd.jpl.nasa.gov/txt/p_elem_t1.txt)[使用开普勒方程](http://en.wikipedia.org/wiki/Kepler%27s_equation)传播轨道（比听起来简单得多）。这大部分是正确的（尤其是对于大行星）。
*   准确：下载行星位置的[JPL 星历](http://ssd.jpl.nasa.gov/?ephemerides)表（DE405 或 DE421），并使用可用的阅读器之一（例如[SPICE](http://naif.jpl.nasa.gov/naif/)）以尽可能高的精度检索状态（请注意，这不一定是“计算成本高” )
*   准确：下载[VSOP](http://en.wikipedia.org/wiki/VSOP_%28planets%29)数据及相关程序（不如JPL的星历表准确，但也是“任务初步设计级”）。

我发现了一些我不久前编写的代码，用于演示使用 SPICE 和 OpenGL可视化[DE421数据的“快速而肮脏”的方式。](ftp://ssd.jpl.nasa.gov/pub/eph/planets/ascii/de421/)也许它可以帮助你。

![简单截图](https://i.stack.imgur.com/2uMbZ.png)

```
#include<cstdlib>
#include<cmath>
#include<OpenGL/gl.h>
#include<OpenGL/glu.h> 
#include<GLUT/glut.h>
#include<SpiceUsr.h>

// hard-code some parameters - in a real application all this would be dynamic
#define ALTITUDE 700E6      // in kilometers
#define CLIPPING 100E7
#define FOV 45.0        // 45-degree field-of-view
#define WIN_WIDTH 1024
#define WIN_HEIGHT 1024

// callback to render the trajectory of a planet using spice (notice
// that I use 366 points - one per day starting at epoch 0.0
// (01-Jan-2000 12:00:00 ET) - (r, g, b) is the color
void render_planet(const char* planet, int r, int g, int b) {
  unsigned int N = 366;
  double et = 0.0;
  double state[3];
  double lt;

  // we just want a simple line
  glBegin(GL_LINE_STRIP);
  glColor4d(r, g, b, 1.0);

  for(unsigned int k=0; k<N; k++) {
    // call spice to calculate position
    spkpos_c(planet, et, "ECLIPJ2000", "None", "Sun", state, &lt);
    // add the point to the pipeline
    glVertex3d(state[0], state[1], state[2]);    
    // increase time by one day
    et = 86400 * k;
  }
  glEnd();    
}

// callback to handle window resizing
void changeSize(int w, int h) {
if (h == 0) h = 1;  
  float ratio =  w * 1.0 / h;
  glMatrixMode(GL_PROJECTION);
  glLoadIdentity();
  glViewport(0, 0, w, h);
  gluPerspective(FOV, ratio, 0.2f, CLIPPING);
  glMatrixMode(GL_MODELVIEW);
}

// callback to render scene
void renderScene() {
  // use a nice dark gray for the background (as opposed to pitch black)
  glClearColor(50/255.0, 50/255.0, 50/255.0, 1);
  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);  
  glLoadIdentity();
  gluLookAt(0.0, 0.0,  ALTITUDE, 
        0.0, 0.0,  0.0,  
        0.0, 1.0,  0.0);     
  // here we tell the application which planets to draw, the colors
  // are (r, g, b), so (1, 1, 0) is all red and all green (yellow),
  // and so forth - of course this can be simplified to use arbitrary
  // colors
  render_planet("Mercury", 1, 1, 0);
  render_planet("Venus", 0, 1, 0);
  render_planet("Earth", 0, 0, 1);
  render_planet("Mars", 1, 0, 0);
  glutSwapBuffers();  
}

int main(int argc, char* argv[]) {
  // initialize spice kernels
  furnsh_c("/data/spice/allkernels.txt");
  glutInit(&argc, argv);  
  glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);
  glutInitWindowPosition(0, 0);
  glutInitWindowSize(WIN_WIDTH, WIN_HEIGHT);
  glutCreateWindow("Simple Trajectory Viewer");
  glutDisplayFunc(renderScene);
  glutReshapeFunc(changeSize);
  glutMainLoop();
  return EXIT_SUCCESS;  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:24:15.813

如果你想用 OpenGL 开发一个完整的太阳能或其他系统，我建议你看看[这](https://rads.stackoverflow.com/amzn/click/com/1568817118)本书。它教你这种应用程序开发。否则你的问题有太多可能的解决方案。你应该让我更具体。

# asp.net - 创建用户 (CustomProfile) 错误

> ID：16222509
> 
> 赞同：0
> 
> 时间：2013-04-25T18:52:06.907
> 
> 标签：asp.net

我正在为一个 Web 项目做一个 CustomProfile，到目前为止我一直在管理。我使用了本指南： http: [//msdn.microsoft.com/en-us/magazine/cc163457.aspx](http://msdn.microsoft.com/en-us/magazine/cc163457.aspx)并遵循了它。我的项目是 VB.NET，所以我按照 C# 文件的说明进行操作。我创建了一个自定义表格，根据我的需要对其进行了调整，但我面临两个问题。

```
 Sub SiteCreateUserWizard_CreatedUser(ByVal sender As Object, ByVal e As System.EventArgs)
    Dim UserProfile As ProfileCommon = Profile.GetProfile(SiteCreateUserWizard.UserName)
    UserProfile.FirstName = FirstNameTextBox.Text
    UserProfile.LastName = LastNameTextBox.Text
    UserProfile.Branch = branch.SelectedValue

    UserProfile.ProfileVersion = Microsoft.Samples.SqlTableProfileProvider.ProfileVersion
    UserProfile.Save()
End Sub 
```

UserProfile.ProfileVersion 行给了我一个错误。“错误 7 'ProfileVersion' 不是 'ProfileCommon' 的成员”和“错误 8 'ProfileVersion' 不是 'Microsoft.Samples.SqlTableProfileProvider' 的成员。”

如果我评论这条线，它会在一定程度上起作用。一旦我尝试注册用户，它就会给我以下错误：解析器错误消息：无法识别的配置属性：profileVersion。这是我的 webconfig 文件....

```
 <profile defaultProvider="MyCustomProfileProvider">
  <providers>
    <add name="MyCustomProfileProvider" type="Microsoft.Samples.SqlTableProfileProvider" connectionStringName="LocalSqlServer" table="CustomProfile" applicationName="/"  profileVersion="1" />

  </providers>

  <properties>
    <add name="FirstName" type="string" defaultValue="[null]" customProviderData="FirstName;nvarchar" />
    <add name="LastName" type="string" defaultValue="[null]" customProviderData="LastName;nvarchar" />
    <add name="MaternallastName" type="string" defaultValue="[null]" customProviderData="MaternalLastName;nvarchar" />
    <add name="Branch" type="string" defaultValue="[null]" customProviderData="Branch;nvarchar" />

  </properties> 
```

如果我取出 ProfileVersion 它甚至不起作用。欢迎任何建议。卡在这半天了，呵呵。

```
</profile> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:20:09.060

如果您使用的是 ASP.NET 4.5，新方法是 SimpleMembershipProvider，它更好、更容易，并且支持开箱即用的 OAuth 以启用“通过 Facebook 登录”类型的登录！[首先阅读这篇文章](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)。至于提供配置文件方案，请查看[此帖子。](https://stackoverflow.com/questions/12352218/how-do-i-manage-profiles-using-simplemembership)

另一个要查看的帖子在[这里](https://stackoverflow.com/questions/13224405/update-custom-user-profile-fields-with-simplemembershipprovider)，并解释了访问其他基于用户/个人资料的信息的其他方法！

# matlab - 如何使用 Eratosthenes 的筛子编写列出素数的函数

> ID：16222517
> 
> 赞同：0
> 
> 时间：2013-04-25T18:52:22.610
> 
> 标签：matlab, primes, sieve-of-eratosthenes

我应该编写一个函数或脚本，使用“Eratosthenes 筛”找到所有小于给定整数 n>2 的素数 p，从而避免不必要的存储（我可以创建长度为 n 但不能更多的向量）

```
n = input('Enter your number');
v=[1:n];
v(1)=0
for i=2:n
    s=0;
    for j=v(2)
        if i>v(2) &&  mod(i,j)==0
           s=s+1;
        end
    end
    if s>0
      v(i)=0;
    end
end
for i=v(v>v(find(v,1,'first'))):n
s=0;
    for j=v(v>v(find(v,1,'first')))
        if i>v(v>v(find(v,1,'first'))) & mod(i,j)==0
           s=s+1
        end
    end
    if s>0
      v(i)=0;
    end 
end     

v 
```

我意识到这与我应该编写的代码相去甚远。但这是我想到的唯一想法，它只删除可被 2 和 3 整除的数字，我需要通过对每个条目重复此操作来找到所有素数。这显然不聪明。但我觉得可以为此创建一个循环。但我没有编写这个循环。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T06:45:43.913

翻译 Goran Belfinger 对 Matlab 的回答中的代码（恐怕我无法按照您的 OP 中的代码进行操作）：

```
N = input('Enter your number: ');

primes = 2:N;
p=2;

while (p <= N)
    for i = 2*p:p:N
        primes(i - 1) = 0;
    end;
    p = p + 1;
end

primes = primes(primes > 0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T19:19:23.750

这是伪代码（对不起，我不知道matlab）。我查看了[wikipedia](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)上的算法并在 Java 中对其进行了测试。

```
fill your array with numbers from 2 to N

p=2
while p<=n
    for i=2*p, while i<=N, increment i=i+p
        mark element as 0
    end for
    increment p by 1
end while

print all array elements that are not 0 
```

# java - 使用二维数组时出现运行时异常

> ID：16222519
> 
> 赞同：0
> 
> 时间：2013-04-25T18:52:39.097
> 
> 标签：java, arrays, multidimensional-array, runtimeexception

我写了一个类，它有一个基于用户输入增长的二维数组，并允许用户在数组中输入数字。用户将输入`2 2`尺寸和`2 4 5 4`数字它会像这样打印出来

```
2 2 
2 2 
```

在我输入数组大小`7 1`、7 行和 1 列之前，它一直有效。我得到一个例外

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 1
    at Assignment7.main(Assignment7.java:55) 
```

我不明白为什么

```
import java.util.Scanner;
public class Assignment7 
{
public static void main(String[] args) 

    {

    Scanner scan = new Scanner(System.in);

    System.out.print(" ");

    int [][] nums = new int[scan.nextInt()][scan.nextInt()];

    System.out.print(" ");

    for (int i = 0; i < nums.length; ++i)
        {

        for (int j = 0; j < nums.length; ++j)

            {

            nums[i][j] = scan.nextInt();

            }           
        }           

    for (int i = 0; i < nums.length; ++i)

        {

            System.out.print("\n");

        for (int j = 0; j < nums.length; ++j)

        {

            System.out.print(nums[i][j]);

         }

        }

    }               
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T18:53:35.913

第二维的长度应该是`nums[i].length`，注意：（`i`对于你的例子）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:56:05.657

对于您的内部循环，您正在使用外部数组的大小：

```
for (int i = 0; i < nums.length; ++i)
    {
    for (int j = 0; j < nums.length; ++j) 
```

这应该是：

```
for (int i = 0; i < nums.length; ++i)
    {
    for (int j = 0; j < nums[i].length; ++j) 
```

# java - 将扩展类添加到多图

> ID：16222523
> 
> 赞同：0
> 
> 时间：2013-04-25T18:53:06.540
> 
> 标签：java, generics

我正在尝试按如下方式创建多图：

```
Multimap<String, ? extends A> order = LinkedListMultimap.create();
B b = new B();
order.put("key", b); // shows error 
```

`B`在哪里

```
class B extends A {} 
```

错误如下：

> `put(String, capture#2-of ? extends A)`类型中的方法`Multimap<String,capture#2-of ? extends A>`不适用于参数`(String, B)`。

我应该可以添加一个`B`since `B`extends `A`。但我做不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:02:49.650

If you *mean* a multimap from `String` to objects of type `A` or any subtype of `A`, then that's a `Multimap<String, A>`. If you mean a multimap from `String` to objects of some *specific but unknown* subtype of `A`, then that's a `Multimap<String, ? extends A>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:02:26.877

You can not add values to **order**, because they key is

```
? extends A 
```

and compiler doesn't know the lower bound type.

# c# - 如何使用 C# 访问特定的 XML 元素

> ID：16222524
> 
> 赞同：3
> 
> 时间：2013-04-25T18:53:07.663
> 
> 标签：c#, asp.net, xml

我正在使用一个仅是 XML 的 API，而且自从我对 XML 做过任何事情以来，它已经很久了。

响应如下。

我如何获得`<status>`. 我试过这样做：

```
XmlNodeList results = xmlDoc.GetElementsByTagName("ProcessRequestResult"); 
```

但是我最终得到了充满 XML 的 InnerText，我无法弄清楚如何正确解析。

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
<ProcessRequestResponse>
<ProcessRequestResult>
    <ConsumerAddEntryResponse>
          <Status>Failed</Status> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T18:56:15.063

[使用XmlDocument](http://msdn.microsoft.com/en-CA/library/system.xml.xmldocument.aspx)加载您的 xml并使用[XPath](http://msdn.microsoft.com/en-us/library/ms256115.aspx)获取所需的节点。（我没有测试这条线，但它看起来像这样）

文件加载过程：

```
var xmlDocument = new XmlDocument();
xmlDocument.Load("someXmlFile.xml"); 
```

节点加载过程：

```
//Single node would be :
XmlNode xNode = xmlDocument.SelectSingleNode("//ConsumerAddEntryResponse/Status");

//More than 1 node would be :
XmlNodeList xNodes = xmlDocument.SelectNodes("//ConsumerAddEntryResponse/Status"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T19:12:40.067

使用 Linq To Xml 怎么样？

```
var xDoc = XDocument.Parse(xml); //OR XDocument.Load(filename)
string status = xDoc.Descendants("Status").First().Value; 
```

**编辑**

我用来测试的xml

```
string xml = @"<?xml version=""1.0"" encoding=""utf-8""?>
            <soap:Envelope xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"">
            <soap:Body>
                <ProcessRequestResponse>
                    <ProcessRequestResult>
                        <ConsumerAddEntryResponse>
                                <Status>Failed</Status>
                        </ConsumerAddEntryResponse>
                    </ProcessRequestResult>
                </ProcessRequestResponse>
            </soap:Body>
            </soap:Envelope>"; 
```

**编辑 2**

```
 string xml = @"<?xml version=""1.0"" encoding=""utf-8""?>
            <soap:Envelope xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/"" xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"">
            <soap:Body>
                <ProcessRequestResponse xmlns=""http://submission.api.domain/"">
                    <ProcessRequestResult>
                        <ConsumerAddEntryResponse>
                                <Status>Failed</Status>
                        </ConsumerAddEntryResponse>
                    </ProcessRequestResult>
                </ProcessRequestResponse>
            </soap:Body>
            </soap:Envelope>";

var xDoc = XDocument.Parse(xml);
XNamespace ns = "http://submission.api.domain/";
string status = xDoc.Descendants(ns + "Status").First().Value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:08:11.500

此外，可以使用 LINQ2XML

```
var s = "<ProcessRequestResponse.....";
var doc = XDocument.Parse(s);
string value = doc.Element("ProcessRequestResponse")
.Element("ProcessRequestResult")
.Element("ConsumerAddEntryResponse")
.Element("Status")
.Value; 
```

# c# - 在 Visual Studio 2012 中无法从异常返回代码

> ID：16222526
> 
> 赞同：3
> 
> 时间：2013-04-25T18:53:11.877
> 
> 标签：c#, exception, visual-studio-2012

Visual Studio 的所有早期版本都有一个非常有用的功能：如果我在 try...catch 构造的 catch 块中设置断点，那么当发生异常时，我可以将代码的当前位置拖动到 try 块。它允许我查看发生了什么错误。例如：

```
try
{
    int i=0;
    int j=1/i;
}
catch(Exception ex)
{
    string s="";  //here I may set a break point and then drag a cursor to try block
} 
```

但这在 VS 2012 中是不可能的！我无法返回尝试阻止。我可能错过了选项中的某些内容吗？如果他们取消了此功能，那将是非常可悲的。 **解决方案**：我的网站位于应用程序池 ASP.NET V4.0 集成下，其中属性“启用 32 位应用程序”设置为 false。当我将应用程序池更改为另一个并将此属性设置为 True 时，我成功返回尝试块

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T18:54:37.103

在 Visual Studio 2010 中也不能这样做，这在 Visual Studio 2012 中并不是什么新鲜事。

**编辑：除非它看起来是 Ultimate（启用 Intellitrace）**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T19:04:25.247

看起来您要求的功能仅在您使用最终版本的 Visual Studio 时才内置：

[发生异常后逐步执行程序 - Visual Studio](https://stackoverflow.com/questions/4408786/step-through-a-program-backwards-after-an-exception-has-occurred-visual-studio)

我使用 Ultimate 和 IntelliTrace 使其成为可能：

![在此处输入图像描述](https://i.stack.imgur.com/q7uqj.png)

![在此处输入图像描述](https://i.stack.imgur.com/PkR4T.png)

# c++ - 从 std::tuple of double 的 std::vector 线程安全读取？

> ID：16222529
> 
> 赞同：1
> 
> 时间：2013-04-25T18:53:16.580
> 
> 标签：c++, c++11, concurrency, thread-safety, stdvector

考虑一个包含以下向量的类：

```
std::vector<std::tuple<double, double, double> > _data; 
```

和以下成员函数：

```
inline double second(const unsigned int i) const
{
    return std::get<1>(_data[i]);
} 
```

我是否保证这个函数是线程安全的（注意我返回了一个双精度的副本）？

如果不是，这个函数的线程安全版本是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:59:20.190

`std::vector`如果可以由另一个线程修改，则这不是线程安全的。为了使其线程安全，`std::vector`必须同步对 的访问。一种可能的解决方案是引入 a[`std::mutex`](http://en.cppreference.com/w/cpp/thread/mutex)并将其与`std::vector`实例相关联。在这种情况下，`std::mutex`将是包含 的类的成员变量`std::vector`：

```
#include <mutex>

class X
{
private:
    std::vector<std::tuple<double, double, double>> data_;
    mutable std::mutex data_mutex_;
public:
    double second(const unsigned int i) const
    {
        // Note that 'operator[]' is not bounds checked.
        // Recommend adding a check to ensure 'i' is
        // within range or use 'at()'.

        std::lock_guard<std::mutex> lk(data_mutex_);
        return std::get<1>(data_[i]);
    }
}; 
```

请注意，添加`std::mutex`使类不可复制，因为它本身是不可复制的。

# vim - 为什么我需要二进制模式的 vim 才能使“noeol”工作？

> ID：16222530
> 
> 赞同：48
> 
> 时间：2013-04-25T18:53:24.240
> 
> 标签：vim, newline

这个问题是我用于“在 vim 中保存文件而不强制在文件末尾添加换行符”烦恼的 Workaround[的](https://stackoverflow.com/a/16114535/183132)后续问题。

基本上我不能用`set noeol`在我的`.vimrc`，因为它什么都不做！

如果我以二进制模式编辑文件，它会做它应该做的事情。（`vim -b file`而不是`vim file`）

这是为什么？

无论如何，有一个简单的偏好，`.vimrc`即不在我编辑的每个文件中添加换行符？

另外，如果我开始以二进制模式编辑每个文件，我会遇到什么样的问题？到目前为止，我还没有看到任何区别。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-04-25T20:39:29.340

Vim 在文件最后一行末尾“添加”的是“换行”字符，不应与“换行”混淆。

“[换行符”字符](https://en.wikipedia.org/wiki/Newline)或更准确地说“行尾”字符 ( `<EOL>`) 表示“在此点之后的任何内容都必须被视为在另一行上”。使用这种解释 -`<EOL>`是行*终止符*- 文件的最后一行实际上是最后一行带有`<EOL>`.

问题是大多数编辑器和 IDE 有不同的解释——`<EOL>`是一个行*分隔符*——并且，从逻辑上讲，默认*不会*在新`<EOL>`文件的最后一行末尾添加`<EOL>`行”在真正的最后一行之后。

简而言之，Vim 没有添加“新行”：其他编辑器（错误地）将其“新行”解释为“新行”。

但是您可以通过执行以下操作来解决该问题：在编写文件之前，`:set binary noeol`如果您希望它保持“ `<EOL>`-free”，请执行此操作。

然而，`:h 'binary'`关于它的危险有很多话要说，`:set binary`所以我想说一直“打开”它听起来是个坏主意。

为了说明不同的行为，当您尝试用 连接两个文件时会发生这种情况`<EOL>`：

```
$ cat file1    $ cat file2         $ cat file1 file2

lorem ipsum    Le tramway jaune    lorem ipsum
dolor sit      avance lentement    dolor sit
amet           dans le             amet
                                   Le tramway jaune
                                   avance lentement 
                                   dans le 
```

这就是当您尝试在没有以下情况下连接两个文件时发生的情况`<EOL>`：

```
$ cat file1    $ cat file2         $ cat file1 file2

lorem ipsum    Le tramway jaune    lorem ipsum
dolor sit      avance lentement    dolor sit
amet           dans le             ametLe tramway jaune
                                   avance lentement 
                                   dans le 
```

第一个行为在某种程度上是预期的行为，也是 Vim 和许多（如果不是大多数）UNIX-y 程序默认使用*终止符*`<EOL>`解释并在最后一行末尾添加一个字符的原因。

下图显示了一个简单的文件，使用`<EOL>`创建`nano`（与 Vim 相同）并在 Eclipse、TextMate、Sublime Text、Vim、Xcode 和 TextEdit 中打开。

![<停产>](https://i.stack.imgur.com/LCo7e.png)

（编辑）**此文件中没有第 4 行，**并且正确显示该文件的唯一编辑器是 Vim。行号列的唯一目的是提供有关缓冲区的信息。在只有 3 行的情况下显示 4 行是一个严重错误。（完结）

这张图片显示了另一个没有`<EOL>`使用 Sublime Text 创建并在相同的编辑器/IDE 中打开的简单文件。

![否 <EOL>](https://i.stack.imgur.com/DbnlK.png)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-09-21T22:16:55.963

从版本 7.4.785 vim 有`fixendofline`设置。您可以避免`binary`（有一些副作用）并简单地设置

```
set noendofline
set nofixendofline 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-25T19:39:54.763

根据 vimdoc [`noeol`](http://vimdoc.sourceforge.net/htmldoc/options.html#%27noeol%27)，除非打开模式，否则什么都不做`binary`。

```
 *'endofline'* *'eol'* *'noendofline'* *'noeol'*
'endofline' 'eol'   boolean (default on)
            local to buffer
            {not in Vi}
    When writing a file and this option is off and the 'binary' option
    is on, no <EOL> will be written for the last line in the file.  This
    option is automatically set when starting to edit a new file, unless
    the file does not have an <EOL> for the last line in the file, in
    which case it is reset.  Normally you don't have to set or reset this
    voption.  When 'binary' is off the value is not used when writing the
    file.  When 'binary' is on it is used to remember the presence of a
    <EOL> for the last line in the file, so that when you write the file
    the situation from the original file can be kept.  But you can change
    it if you want to. 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-26T12:11:45.750

> 在 .vimrc 中有一个简单的偏好，即不在我编辑的每个文件中添加换行符

你可以使用我的[PreserveNoEOL 插件](http://www.vim.org/scripts/script.php?script_id=4550)。通过这个简单的设置，你就完成了；或者，您也可以影响每个缓冲区：

```
:let g:PreserveNoEOL = 1 
```

# objective-c - 使用多个 JSON 对象设置单元格的文本

> ID：16222531
> 
> 赞同：0
> 
> 时间：2013-04-25T18:53:33.130
> 
> 标签：objective-c, string, cocoa-touch, nsstring

我有一个简单的 Web 服务，可以将一些数据传递到表格视图中，并且工作正常。

这是我目前拥有的代码：

```
[[cell detailTextLabel] setText:[item objectForKey:@"Ball 1"]]; 
```

正如我所说，这完美地工作并显示一个球号，例如“1”，取自网络服务。

我想做的是让它显示，例如“1 & 3”。

查看其他一些代码，我认为它可能是：

```
[[cell detailTextLabel] setText:[item objectForKey:@"Ball 1"]item objectForKey:@"Ball 2"]]; 
```

我对 Objective-C 完全陌生，我正在做一些教程，我正在尝试对它们进行一些扩展。由于我不确定术语，因此搜索某些内容的答案有点困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:59:13.000

使用字符串连接，例如`stringWithFormat`：

```
NSString *concated = [NSString stringWithFormat:@"%@ & %@", [item objectForKey:@"Ball 1"], [item objectForKey:@"Ball 3"]]; 
```

现在将此字符串设置为标签：

```
[[cell detailTextLabel] setText:concated]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:00:28.893

I'm not sure if you want to set the text from the strings in item or if you simply want to print "1 & 3"

Let's pretend it's the first. You can set the text by

```
cell.detailTextLabel.text = [[NSString stringWithFormat:@"%@ %@",  [item objectForKey:@"Ball 1"], [item objectForKey:@"Ball 3"]]; 
```

NSString stringWithFormat: will construct a string and replace %@ with the NSObject you provide, becareful because if you put an int or a float it will crash. You need to use the proper identifiers to write properly, %d for int and %f for float for example.

If you simply want to write "1 & 3" into text it's this.

```
cell.detailTextLabel.text = @"1 & 3"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T19:07:20.007

您的单元格的`text`属性需要用一个字符串设置，但您有两个要使用的字符串。您需要组合这些字符串。

Cocoa Touch 中的字符串对象是`NSString`，它有一些方法可以为你工作。在这种情况下，最好的是[`stringWithFormat:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-stringWithFormat_). 这需要一个“格式字符串”，它描述了您想要的输出，以及插入到结果中的其他参数。

在这种情况下，您的格式字符串将是：`@"%@ & %@"`. 那是一个带有两个[格式说明符](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html#//apple_ref/doc/uid/TP40004265)的字符串文字——两个`%@`s。每个说明符指示应插入到字符串中的以下参数的类型——在这种情况下，任何类型的对象（与`int`or相对`float`）。字符串中的`&`没有特殊含义——它将按原样出现在结果中。

要获得您调用的结果，请`stringWithFormat:`传递您的格式字符串和要插入的两个对象：

```
NSString * result = [NSString stringWithFormat:@"%@ & %@", [item objectForKey:@"Ball 1"], [item objectForKey:@"Ball 2"]]; 
```

现在您有一个字符串，并且可以将其分配给您的单元格`text`：

```
[[cell detailTextLabel] setText:result]; 
```

# php - 如何在 Symfony2 Forms 中添加单独的单选按钮？

> ID：16222540
> 
> 赞同：0
> 
> 时间：2013-04-25T18:53:54.470
> 
> 标签：php, symfony

我有一个用于设置 mysql、sqlite 和 postgre 配置的表单。我将它们安排在单独的选项卡上（使用引导程序）。同样，我有一个表单字段：连接类型（三个选项）。为此，我使用选择字段类型。

如何为数据库的每个选项卡创建一个单选按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:59:41.093

您需要在您的字段[`expanded`](http://symfony.com/doc/current/reference/forms/types/choice.html#expanded)上将选项设置为 true 。`choice`

例如，在您的表单类型中：

```
$builder->add('connection_type', 'choice', array(
    'choices' => array('MySQL' => 'mysql', 'SQLite' => 'sqlite', 'PostgreSQL' => 'postgresql'),
    'expanded' => true,
)); 
```

# c# - 如何隐藏模型中的默认值以防止在表单中显示？

> ID：16222544
> 
> 赞同：0
> 
> 时间：2013-04-25T18:54:04.053
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, entity-framework-4

在我的剃刀形式中，我有这个：

```
 @Html.TextBoxFor(vm => vm.User.TotalSales) 
```

因为 User 对象不为空，TotalSales 的值默认为 0，并且显示在表单中。

有没有办法使用内置的帮助程序来清除它，或者我必须通过 javascript 或其他东西来做到这一点？

恐怕如果我必须通过 javascript 执行此操作，当用户发布表单并且出现错误时，我的 javascript 会在不应该时再次擦除该文本框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:00:05.077

In my app I did properties nullable and marked them with RequiredAttribute.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:12:33.637

使用具有必需属性的模型验证。像这样的东西。

```
[Required]
 public int age{ get; set; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T18:57:46.223

您可以在输出文本框之前进行检查：

```
@if (vm.User.TotalSales != 0)
{
    Html.TextBoxFor(vm => vm.User.TotalSales)
}
else{
    Html.TextBoxFor(vm => vm.User.TotalSales.Age, new { @Value = "" }) 
} 
```

# php - 如何将变量的值传递给mysql foreach行

> ID：16222545
> 
> 赞同：-2
> 
> 时间：2013-04-25T18:54:05.333
> 
> 标签：php, mysql, sql

```
 $sql = mysql_query("SELECT * From orders");

 while ($row = mysql_fetch_array($sql))
 {
     $datef = strtotime($row['Date1']);
     $dates = strtotime($row['Date2']);
     $rprice = $row['Pprice'];

     $datediff = floor(($datef + $dates ) / 86400);
     $total = $datediff * $rprice;

     echo $total; 
 } 
```

在该代码之后，我想更新一个表并将**每行**的价格插入到列中。至于我回声，`$total`我只回来了 1 行...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:07:55.273

试试这个，如果它有效

```
 function total($date1,$date2,$price){

  $datedif = floor(($date1 + $date2 ) / 86400);
 $total = $datedif * $price ;
  return $total ;

 }
 $sql=mysql_query("SELECT * From orders");

 while ($row = mysql_fetch_array($sql)) 

{   $datef = strtotime($row['Date1']);
    $dates = strtotime($row['Date2']);
    $rprice=$row['Pprice'];
    echo total($datef,$dates,$rprice).'<br />' ;

 } 
```

编辑：

```
insert into ammounts (Total_Cost) VALUES ('total($datef,$dates,$rprice)')
WHERE id = '$row["id"]' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:42:33.413

假设您在表中有`order_id`作为 PRIMARY KEY 和`total`列的库`orders`。

```
 while ($row = mysql_fetch_array($sql)) 

{   $datef = strtotime($row['Date1']);
    $dates = strtotime($row['Date2']);
    $rprice=$row['Pprice'];
    $total=total($datef,$dates,$rprice);
    $query=mysql_query("UPDATE orders SET total = $total WHERE order_id = '$row[order_id]'") or die(mysql_error());
    echo $total.'<br />' ;
 } 
```

# r - 使用 ts 函数构建时间相关图

> ID：16222552
> 
> 赞同：0
> 
> 时间：2013-04-25T18:54:21.403
> 
> 标签：r, time-series

我有以下数据集，其中时间戳列在`[1] "POSIXlt" "POSIXt"`

```
8       73      794   4927          4910       0       1753     4       0 2006-06-11 04:43:56          2          N
9       73     1744   4929          4928       0        146     9       0 2006-06-11 04:47:24          4          N
10      73     1520   4930          4913       0       2401     4       0 2006-06-11 04:47:54          5          N
11      73     1744   4931          4929       0        461   315       0 2006-06-11 04:49:37          6          N
12      73     1743   4933          4925       0        113    45       0 2006-06-11 04:52:12          7          N
13      73     1744   4934          4931       0       1248   787       0 2006-06-11 04:58:22          8          N
14      73     1744   4936          4934       0       1268    20       0 2006-06-11 05:01:11          9          N
15      73     1745   4938          4937       2        720    53       0 2006-06-11 05:06:56         11          N
16      73     1744   4939          4936       0       1290    22       0 2006-06-11 05:14:35         12          N
17      73      605   4940          3072       3        436   367       0 2006-06-11 05:21:44         13          N
18      73     1936   5734          5731      10        531   133       0 2006-08-21 19:55:50         19          N
19      73     1936   5735          5734      10        502   -29       0 2006-08-21 19:56:31         20          N
20      73     1745   7808          5692       2        746    23       0 2007-11-22 22:09:17         21          N 
```

我正在尝试使用 ts 函数来获取日期列和第 6 列之间的图，但是当我尝试将数据框转换为 ts 列时：我收到以下错误：

```
Error in attr(data, "tsp") <- c(start, end, frequency) : 
  invalid time series parameters specified 
```

这就是我尝试将 df 转换为 ts 对象的方式

```
df.ts <- ts(data=df.old$timestamp, frequency=12, start=c(2006,6), end=c(2007,12)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T22:49:54.067

'ts' 包需要有规律的时间序列，似乎你在这里有一个不规则的时间序列。你可以使用包'zoo'或'lubridate'来处理规则和不规则的时间序列。

# html - 悬停在 chrome 中不工作，但在 IE、safari、firefox 中工作

> ID：16222562
> 
> 赞同：1
> 
> 时间：2013-04-25T18:54:39.467
> 
> 标签：html, css, google-chrome, drop-down-menu

我是 CSS 新手，我正在尝试学习如何使用 CSS 创建菜单。我创建了它，但发现了一个问题。它在其他浏览器中运行良好，但在 chrome 中运行良好。我没有得到什么问题。

以下是此菜单中使用的样式表。

```
#main
{width: 150px;}

#main ul,
#main li,
#main a,
{

  padding: 0px;
 border: 0px;
margin: 0px;

}

#main ul,#main li
{
 list-style-type: none;
}

ul#main li > a
{
display: block;
    position: relative;
    width: 100px;
    padding-left:10px;
    text-align: left;
align: center;
    height: 32px;

    color: #FFFFFF;
    font: bold 12px/32px Arial, sans-serif;
    text-decoration: none;
}

ul#main > li
{
  padding:0px 0px 5px 5px;
  background-color: #E44d2e;
 align:center;
border-bottom: solid 1px;

}

 ul#submenu
{
position: relative;
z-index: 10;
float: right;
border-bottom: solid 1px;
 border: 0px;
height: 0px;
overflow: hidden;
display:none;

}

ul#main li:hover
{
height: 40px;
padding: 0px 0px 0px 0px;
width: 150px;
display:block;
  background-color:#ec633f;

border-bottom: solid 1px;
text-align:center;

}

ul#main li:hover > ul#submenu
{
position: relative;
z-index: 10;
float: none;
top: -32px;
left: 150px;
margin: 0px;
height: auto;
 padding: 0px 0px 0px 0px;
display:block;
  background-color: #f9e5cc;
color: black;

}

ul#submenu li:hover
{

z-index: 10;
  float: none;
 margin: 0px;
 height: auto;
 padding: 0px 0px 0px 0px;
display:block;
 background-color: #f3d8bd;

}

ul#submenu li > a
{ 
color: black;
}
</style> 
```

以下是用于创建 html 菜单的代码

```
<ul id="main">
<li > <a href="#">Google</a><ul id="submenu"><li><a href="#">Test 1</a></li><li><a href="#">Test 1</a></li></ul></li>
<li id="submenu"><a href="#"> Microsoft</a><ul id="submenu"><li ><a href="#" >Test 1</a></li><li><a href="#">Test 1</a></li></ul></li>
<li > <a href="#">Apple</a><ul id="submenu"><li><a href="#">Test 1</a></li><li><a href="#">Test 1</a></li></ul></li>
<li > <a href="#">IBM</a><ul id="submenu"><li><a href="#">Test 1</a></li><li><a href="#">Test 1</a></li></li></ul></li>
</ul> 
```

上述代码的工作示例位于：[工作代码] [http://techisquest.blogspot.in/2013/04/simple-css-menu.html](http://techisquest.blogspot.in/2013/04/simple-css-menu.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T12:42:23.230

经过大量的 R 和 DI 发现问题。CSS 中使用的以下选择器是错误的：

```
ul#submenu li:hover

ul#submenu li > a 
```

这些应该像

```
ul#main  li ul#submenu li:hover

and 

ul#main  li ul#submenu li a:hover 
```

上述更改解决了我的问题。

# java - 是否可以在任意位置配置其他文件夹以在 war 文件中提供静态资源

> ID：16222565
> 
> 赞同：1
> 
> 时间：2013-04-25T18:54:44.603
> 
> 标签：java, tomcat, war

默认情况下，web-app 下的文件在像 tomcat 这样的应用程序容器中作为静态资源提供。因此，如果我将 helloworld.html 之类的文件保存在其中，我可以在浏览器中查看它

```
http://localhost:8080/myapp/helloworld.html 
```

是否可以配置除 web-app 以外的其他文件夹来提供静态内容。我宁愿从war文件本身中执行此操作，而不必以tomcat范围的方式对其进行配置。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:01:29.250

[Maven's war plugin](http://maven.apache.org/plugins/maven-war-plugin/usage.html) is a good fit here. This offers several configuration options when building the war so it'll be independent of your web server.

And [an example](http://maven.apache.org/plugins/maven-war-plugin/examples/adding-filtering-webresources.html) where a different directory can be hosted as you suggest

```
<project>
  ...
  <build>
    <plugins>
      <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.3</version>
    <configuration>
      <webResources>
        <resource>
          <!-- this is relative to the pom.xml directory -->
          <directory>resource2</directory>
        </resource>
      </webResources>
    </configuration>
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

Here's an another example they give where a different webapp folder can be used.

```
<project>
...
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.3</version>
            <configuration>
                <webappDirectory>/sample/servlet/container/deploy/directory</webappDirectory>
            </configuration>
        </plugin>
    </plugins>
</build>
...
</project> 
```

# thread-safety - QImage::fromData 不是线程安全的

> ID：16222566
> 
> 赞同：1
> 
> 时间：2013-04-25T18:54:49.337
> 
> 标签：thread-safety, qthread, qimage

如果在多个 QThread 中运行以下代码会崩溃：

```
//mutex.lock();
qImage = QImage::fromData((const uchar*)bin,size);
//mutex.unlock(); 
```

我可以用互斥锁来解决这个问题，但这违背了多线程的目的。你有什么建议？

谢谢

# c++ - 变量初始化与计数器冲突

> ID：16222570
> 
> 赞同：0
> 
> 时间：2013-04-25T18:54:53.880
> 
> 标签：c++

以下代码的目标是每 16 次传输执行一次程序：代码中的 cw 是竞争窗口的值（其技术知识在这里不重要）

```
int Nt;
Nt = (Nt + 1) % 16;
if (Nt == 0) 
cw_ = cw * 16;  // action once transmission count is 16
 else
    cw_ = cw; 
```

问题是我必须初始化 Nt 的值，否则代码可能会变得容易出错；但我不能将**int Nt = 0**放入代码中，因为它每次都会执行，并且每次运行上述代码以获得 16 的计数后，我需要 Nt 的值递增。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:57:12.397

永久存放`Nt`在其他地方。或者，但这具有全局变量等缺点，使其在函数中成为静态的。

# c - 以下情况下 % 符号在 printf 语句中的作用

> ID：16222575
> 
> 赞同：-1
> 
> 时间：2013-04-25T18:55:21.007
> 
> 标签：c, printf

在以下两种情况下，我无法理解输出。编译器：Windows 上的 Borland C++ 5.02 案例 1：

```
#include <stdio.h>

int main()
{
    char str[] = "HELLO";
    printf("%abc %2s", str, str);
    return 0;
}
output:%abc %2s 
```

案例二：

```
#include <stdio.h>

int main()
{
    char str[] = "HELLO";
    printf("abc %2s", str, str);  //% sign removed
    return 0;
}
output:abc 1310540 
```

请让我理解输出。如果这听起来很幼稚，请原谅。我在 C 语言中有点天真。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:23:32.623

这是我的猜测：

```
printf("%abc %2s", str, str); 
```

您古老的编译器早于`%a`格式字符串的引入。因此运行时意识到它遇到了它无法识别的格式字符串并放弃尝试格式化。在任何情况下，您都不能将字符串传递给`%a`并期望任何有意义的东西。因此，即使您的编译器理解 '%a'，行为也将是未定义的。试图理解 UB 几乎没有什么收获。修复你的代码。

```
printf("abc %2s", str, str); 
```

应该输出

```
abc HELLO 
```

甚至在你古老的编译器上。如果没有，那是编译器运行时中的一个错误。

我个人准备打赌您的编译器将为该程序生成该输出。我宁愿想象你的问题被错误地转录了。问题中的输出与代码不匹配，反之亦然。

你的pastebin证实了这一点：

```
#include<stdio.h>

int main()
{
  char str[] = "HELLO";
    printf("abc %d", str, str);//different from code in question

    return 0;
}

Output: abc -1083086374 
```

因此，不仅讨论 UB 有点毫无意义，而且当您运行的版本与问题中的代码不同时，讨论程序更是毫无意义。将来，我敦促您使用复制/粘贴将代码传输到 Stack Overflow 问题中，并双重和三重检查输出是否与您声称的一样。

底线：现在是 2013 年。没有理由使用 BCC v5.02。是时候及时向前迈进了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:09:48.637

第一个是未定义的行为，因为您尝试将要打印的字符串作为十六进制浮点数打印。

第二个例子是有效的。它打印一个至少包含两个字符的字符串。第二个参数`str`被忽略。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:12:30.707

我不得不说您只需要阅读[完整的 POSIX 文档`printf`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/printf.html)（您也可以`man 3p printf`从 Linux 控制台键入）或带有编译器/C 标准库实现的文档。

基本上，在字符之后遇到的`%`字符以非常特定的方式进行解释。a 后面的字符`%`属于“标志”、“长度修饰符”和“转换指定”类别——除了转换说明符之外，每个都是可选的。您的第二个示例应该给您一个警告，因为您的值比转换说明符多，而且它甚至似乎有一个错误，因为您不能将数字标志（“2”）与字符串转换说明符一起使用并且它吐出废话（也许你的十进制指针）。

# plugins - 自定义 SpecFlow TestGeneratorProvider 注册导致测试生成时出现 NullReferenceException

> ID：16222579
> 
> 赞同：5
> 
> 时间：2013-04-25T18:55:30.453
> 
> 标签：plugins, configuration-files, nullreferenceexception, specflow

我正在尝试在 SpecFlow 1.9 中添加我的 CodedUI 测试生成器插件。我正在尝试使用新的插件注册，因为旧类型的注册会在我们的解决方案中导致各种问题，因为我们不希望将自定义生成器提供程序放在 Specflow 安装目录中（每个开发人员机器上的目录都不同） .

我首先将新的[Specflow.CustomPlugin NuGet 包](http://www.nuget.org/packages/SpecFlow.CustomPlugin)添加到 .NET 4.0 类库。

基于 CodedUI 生成器的示例，我将其拼凑在一起：

```
using TechTalk.SpecFlow.Infrastructure;
[assembly: GeneratorPlugin(typeof(CodedUIGeneratorProvider.Generator.SpecFlowPlugin.CodedUIGeneratorPlugin))]

namespace CodedUIGeneratorProvider.Generator.SpecFlowPlugin
{
    using System.CodeDom;

    using BoDi;

    using TechTalk.SpecFlow.Generator;
    using TechTalk.SpecFlow.Generator.Configuration;
    using TechTalk.SpecFlow.Generator.Plugins;
    using TechTalk.SpecFlow.Generator.UnitTestProvider;
    using TechTalk.SpecFlow.UnitTestProvider;
    using TechTalk.SpecFlow.Utils;

    /// <summary>
    /// The CodedUI generator plugin.
    /// </summary>
    public class CodedUIGeneratorPlugin : IGeneratorPlugin
    {
        /// <summary>
        /// The register dependencies.
        /// </summary>
        /// <param name="container">
        /// The container.
        /// </param>
        public void RegisterDependencies(ObjectContainer container)
        {
        }

        /// <summary>
        /// The register customizations.
        /// </summary>
        /// <param name="container">
        /// The container.
        /// </param>
        /// <param name="generatorConfiguration">
        /// The generator configuration.
        /// </param>
        public void RegisterCustomizations(ObjectContainer container, SpecFlowProjectConfiguration generatorConfiguration)
        {
            container.RegisterTypeAs<CodedUIGeneratorProvider, IUnitTestGeneratorProvider>("default");
            container.RegisterTypeAs<MsTest2010RuntimeProvider, IUnitTestRuntimeProvider>("default");
        }

        /// <summary>
        /// The register configuration defaults.
        /// </summary>
        /// <param name="specFlowConfiguration">
        /// The spec flow configuration.
        /// </param>
        public void RegisterConfigurationDefaults(SpecFlowProjectConfiguration specFlowConfiguration)
        {
        }
    }

    /// <summary>
    /// The CodedUI generator.
    /// </summary>
    public class CodedUIGeneratorProvider : MsTest2010GeneratorProvider
    {
        /// <summary>
        /// Initializes a new instance of the <see cref="CodedUiGeneratorProvider"/> class.
        /// </summary>
        /// <param name="codeDomHelper">
        /// The code dom helper.
        /// </param>
        public CodedUIGeneratorProvider(CodeDomHelper codeDomHelper)
            : base(codeDomHelper)
        {
        }

        /// <summary>
        /// The set test class.
        /// </summary>
        /// <param name="generationContext">
        /// The generation context.
        /// </param>
        /// <param name="featureTitle">
        /// The feature title.
        /// </param>
        /// <param name="featureDescription">
        /// The feature description.
        /// </param>
        public override void SetTestClass(TestClassGenerationContext generationContext, string featureTitle, string featureDescription)
        {
            base.SetTestClass(generationContext, featureTitle, featureDescription);

            foreach (CodeAttributeDeclaration declaration in generationContext.TestClass.CustomAttributes)
            {
                if (declaration.Name == "Microsoft.VisualStudio.TestTools.UnitTesting.TestClassAttribute")
                {
                    generationContext.TestClass.CustomAttributes.Remove(declaration);
                    break;
                }
            }

            generationContext.TestClass.CustomAttributes.Add(new CodeAttributeDeclaration(new CodeTypeReference("Microsoft.VisualStudio.TestTools.UITesting.CodedUITestAttribute")));
        }
    }
} 
```

并且在尝试如下配置时：

```
 <specFlow>
    <!-- For additional details on SpecFlow configuration options see http://go.specflow.org/doc-config -->
    <plugins>
      <add name="CodedUIGeneratorProvider" path="." type="GeneratorAndRuntime"/>
    </plugins>
    <generator dependencies="CodedUIGeneratorProvider"/>
    <runtime dependencies="CodedUIGeneratorProvider"/>
  </specFlow> 
```

我收到以下错误消息：

> error 生成错误：SpecFlow 配置错误 -> 无法解析属性“dependencies”的值。错误是：对象引用未设置为对象的实例。

该错误似乎是在 SpecFlow 配置代码内部引起的，堆栈跟踪如下：

```
 System.Configuration.dll!System.Configuration.ConfigurationProperty.ConvertFromString(string value) + 0x2a bytes
 System.Configuration.dll!System.Configuration.ConfigurationElement.DeserializePropertyValue(System.Configuration.ConfigurationProperty prop, System.Xml.XmlReader reader) + 0x36 bytes
 System.Configuration.dll!System.Configuration.ConfigurationElement.DeserializeElement(System.Xml.XmlReader reader, bool serializeCollectionKey) + 0x221 bytes
 System.Configuration.dll!System.Configuration.ConfigurationElement.DeserializeElement(System.Xml.XmlReader reader, bool serializeCollectionKey) + 0x78e bytes
 System.Configuration.dll!System.Configuration.ConfigurationSection.DeserializeSection(System.Xml.XmlReader reader) + 0x3c bytes
 TechTalk.SpecFlow.dll!TechTalk.SpecFlow.Configuration.ConfigurationSectionHandler.CreateFromXml(string xmlContent) + 0xb0 bytes
 TechTalk.SpecFlow.Generator.dll!TechTalk.SpecFlow.Generator.Configuration.GeneratorConfigurationProvider.LoadConfiguration(TechTalk.SpecFlow.Generator.Interfaces.SpecFlowConfigurationHolder configurationHolder, TechTalk.SpecFlow.Generator.Configuration.SpecFlowProjectConfiguration configuration) + 0x41 bytes
 TechTalk.SpecFlow.Vs2010Integration.dll!TechTalk.SpecFlow.Vs2010Integration.Generator.VsGeneratorInfoProvider.GenGeneratorConfig() + 0x52 bytes
 TechTalk.SpecFlow.Vs2010Integration.dll!TechTalk.SpecFlow.Vs2010Integration.Generator.VsGeneratorInfoProvider.GetGeneratorInfo() + 0x3a bytes
 TechTalk.SpecFlow.IdeIntegration.dll!TechTalk.SpecFlow.IdeIntegration.Generator.RemoteGeneratorServices.GetGeneratorInfo() Line 38 + 0x9 bytesC#
 TechTalk.SpecFlow.IdeIntegration.dll!TechTalk.SpecFlow.IdeIntegration.Generator.RemoteGeneratorServices.GetTestGeneratorFactoryForCreate() Line 43 + 0xa bytesC#
 TechTalk.SpecFlow.IdeIntegration.dll!TechTalk.SpecFlow.IdeIntegration.Generator.GeneratorServices.CreateTestGenerator() Line 24 + 0xa bytesC#
 TechTalk.SpecFlow.IdeIntegration.dll!TechTalk.SpecFlow.IdeIntegration.Generator.IdeSingleFileGenerator.GenerateCode(string inputFilePath, string inputFileContent,  TechTalk.SpecFlow.IdeIntegration.Generator.GeneratorServices generatorServices, TechTalk.SpecFlow.Generator.Interfaces.ProjectSettings projectSettings) Line 38 + 0x29 bytesC#
 TechTalk.SpecFlow.IdeIntegration.dll!TechTalk.SpecFlow.IdeIntegration.Generator.IdeSingleFileGenerator.Generate(string inputFilePath, string inputFileContent,  TechTalk.SpecFlow.IdeIntegration.Generator.GeneratorServices generatorServices, TechTalk.SpecFlow.Utils.CodeDomHelper codeDomHelper,  TechTalk.SpecFlow.Generator.Interfaces.ProjectSettings projectSettings) Line 23 + 0x12 bytesC#
 TechTalk.SpecFlow.IdeIntegration.dll!TechTalk.SpecFlow.IdeIntegration.Generator.IdeSingleFileGenerator.GenerateFile(string inputFilePath, string outputFilePath,  System.Func<TechTalk.SpecFlow.IdeIntegration.Generator.GeneratorServices> generatorServicesProvider, System.Func<string,string> inputFileContentProvider,  System.Action<string,string> outputFileContentWriter) Line 92 + 0x13 bytesC#
 TechTalk.SpecFlow.Vs2010Integration.dll!TechTalk.SpecFlow.VsIntegration.SingleFileGenerator.SpecFlowSingleFileGeneratorBase.GenerateInternal(string inputFilePath, string inputFileContent, EnvDTE.Project project, string defaultNamespace, System.Action<TechTalk.SpecFlow.VsIntegration.SingleFileGenerator.SingleFileGeneratorError> onError, out string generatedContent) + 0x18e bytes
 TechTalk.SpecFlow.Vs2010Integration.dll!TechTalk.SpecFlow.VsIntegration.SingleFileGenerator.SingleFileGeneratorBase.Generate(string inputFilePath, string inputFileContents, string defaultNamespace, System.IntPtr[] rgbOutputFileContents, out uint pcbOutput, Microsoft.VisualStudio.Shell.Interop.IVsGeneratorProgress generateProgress) + 0xc3 bytes
 [Native to Managed Transition] 
```

哪个反射器告诉我的只能是那个`TechTalk.SpecFlow.IdeIntegration.Generator.RemoteGeneratorServices.generatorInfoProvider`意思`null`。

我不知道如何解决这个问题。可用于解决此问题的文档很少。

# 问题：

如果我能让这个工作，我会很高兴。或者，我很想看到一种配置“旧方式”的方法，而不必将文件放在 SpecFlow 安装目录中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T20:18:42.397

我发现了问题:)

在插件的Register Customizations方法中，不要使用名字注册，直接使用`RegisterTypeAs`方法：

```
public void RegisterCustomizations(ObjectContainer container, SpecFlowProjectConfiguration generatorConfiguration)
{
    container.RegisterTypeAs<CodedUIGeneratorProvider, IUnitTestGeneratorProvider>();
} 
```

然后配置看起来很简单，像这样：

```
<specFlow>
  <!-- For additional details on SpecFlow configuration options see http://go.specflow.org/doc-config -->
  <plugins>
    <add name="CodedUIGeneratorProvider" path="." type="Generator"/>
  </plugins>
</specFlow> 
```

这样，您可以将插件程序集（必须名为`*.SpecflowPlugin.dll`）放在项目目录中，或者使用项目目录中的相对路径并将其设置在项目的`path=".\Lib"`属性中`plugins\add`。

有关更多信息，请参阅：[https ://jessehouwing.net/specflow-custom-unit-test-generator/](https://jessehouwing.net/specflow-custom-unit-test-generator/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-27T11:59:12.333

对于使用 SpecFlow 2.1.0 来到这里的开发人员，请在上面的 CodedUIGeneratorProvider 类中添加以下内容：

```
 public void Initialize(GeneratorPluginEvents generatorPluginEvents, GeneratorPluginParameters generatorPluginParameters)
    {
        generatorPluginEvents.CustomizeDependencies += GeneratorPluginEvents_CustomizeDependencies;
    }

    private void GeneratorPluginEvents_CustomizeDependencies(object sender, CustomizeDependenciesEventArgs eventArgs)
    {
        eventArgs.ObjectContainer.RegisterTypeAs<CodedUIGeneratorProvider, IUnitTestGeneratorProvider>();
    } 
```

CustomPlugin 接口的接口已更改，因此必须连接到自定义事件才能注册自定义。

请参阅[https://github.com/techtalk/SpecFlow/wiki/Plugins](https://github.com/techtalk/SpecFlow/wiki/Plugins)

# java - android Fragments 的新手 - 寻找一些答案

> ID：16222581
> 
> 赞同：0
> 
> 时间：2013-04-25T18:55:36.547
> 
> 标签：java, android, android-fragments

我对android相当陌生，并且已经在一个应用程序上工作了几个星期。我希望该应用程序可以在手持设备和平板电脑上运行。我决定在我的平板电脑上运行之后实现片段，但我很难绕开它来让球滚动起来。我的应用程序最像：您看到的第一页是您可以导航到的各种活动的菜单列表，其中一些调用其他活动。我已经阅读了无数的教程，但仍有一些问题，我希望有人能帮忙。我没有任何运气在互联网上找到答案。

1）主菜单应该在一个片段中还是只保留一个调用片段的活动？（我认为它也应该是一个片段）

2）我读过活动只是片段的门户，所以在主菜单中我所有的逻辑都应该放在片段中吗？

3) 为什么 Eclipse 会在向导设置中抛出一个虚拟类？不应该删除这个包并将数组适配器或其他任何东西放入主菜单的逻辑中，还是我需要另一个类有充分的理由？

4) 我还在某处读到 Main 活动必须称为 Main.java，这是真的吗？我不明白为什么会这样。

我意识到对于掌握片段的人来说，这些可能都是非常简单的问题，但我没有！感谢您的任何回答肯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:02:41.963

1) 是的，如果您正在处理逻辑和用户界面，并且您正在努力做到最好并希望拥有一个可以轻松支持多种屏幕尺寸的结构，那么您的菜单应该是一个片段。

我认为活动是处理要显示的片段的机制。

所以在手机上，第一个活动只是显示菜单片段并启动一个新活动来处理选择。

在平板电脑上，您可能在屏幕左侧有菜单片段，并在用户选择时为屏幕右侧进行片段转换

2）您的活动仍然需要协调这些片段，如我在 1 中的示例。

3）你不需要那个类

4）你可以命名任何东西，任何东西。注意清单中指定的内容。如果您在清单中指定它，您的应用甚至可以在启动器中有多个起点/图标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:05:42.517

1）如果您想要根据设备和/或方向不同的布局，那么可以。也许您希望主菜单位于平板电脑左侧的窗格中，而它是手机上的全屏列表。

2）这有点难以回答。这完全取决于你如何设计你的应用程序，这里没有对错之分。您可以选择类似 MVC 的方法，将实际逻辑放入控制器中。您可以让您的 Activity 处理选择菜单项时发生的情况。您可以使用事件总线（Otto 或 Guava）在片段之间进行通信。由你决定。

3) 不需要

4) 不，您不必将其命名为 Main.java。我认为您可能会将其与标准 J2SE 程序的 public static void main(String[] args) 入口点混淆？

# c# - 本地应用程序远程数据库

> ID：16222582
> 
> 赞同：1
> 
> 时间：2013-04-25T18:55:37.367
> 
> 标签：c#, asp.net, database, architecture

这超出了我通常的领域，所以请原谅我的无知。

我正在为本地应用程序开发一个 C# 中的 Windows(7) 插件，该应用程序将查询数据库，将结果返回给应用程序（简单）。问题是**人们可以在家工作，**所以如果我使用 MS **SQL Express 数据库**（就像我通常那样），它会暴露在互联网上，而且我已经阅读过暴露在互联网上的 MS SQL 服务器**通常**会很快受到攻击。

我可以使用插件安装数据库，但我相信这会使管理数据库、更新和故障排除成为一场噩梦，因为会有 15 个单独的部署。

任何人都可以**建议采取的方法来为****查询远程数据库的****本地应用程序**安装一个插件，这不是一个巨大的安全责任，或者说互联网可访问的 sql express delpoymeny 的安全性？

 **谢谢 第一篇关于堆栈溢出的帖子，我在发布之前确实搜索了答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:59:45.687

通常，您需要在数据库和远程客户端之间建立某种类型的 Web 服务层。

在这种情况下，您将拥有一个公开某些服务调用的 Web 应用程序。调用应该需要某种类型的身份验证并对数据库执行必要的操作。**

# javascript - 从自定义功能区按钮与 onSave 调用时，Javascript 的行为不同

> ID：16222595
> 
> 赞同：2
> 
> 时间：2013-04-25T18:56:16.073
> 
> 标签：javascript, dynamics-crm-2011

我正在尝试向自定义实体 MFA 添加版本控制功能，但遇到了一个非常奇怪的问题。我有一个从两个地方调用的 javascript webresource：表单上的 onSave 事件，以及作为自定义功能区按钮的操作。具体来说，onSave 事件调用 captureSave，而功能区按钮调用 makeARevision。

当从保存按钮/事件调用时，一切都按预期工作；所有信息，包括新的更改，都被拉到一个新记录并保存在那里，而原始记录在没有保存更改的情况下关闭，也没有保存提示。但是，当通过自定义功能区按钮调用时，任何未保存的更改都不会被带到新记录中，并且旧记录会提示保存。此外，即使用户选择将更改保存到旧记录，更改也不会保存，表单也不会自动关闭。

以下代码是有问题的网络资源。company_MFASaveOrRevise 只是一个 html 页面，询问用户是否要保存记录或创建新修订。任何关于导致差异的原因或如何解决它们的想法都值得赞赏。

```
function captureSave(executionContext) {
    if (Xrm.Page.ui.getFormType() != 1 && Xrm.Page.data.entity.getIsDirty()) {
        var retVal = showModalDialog(Xrm.Page.context.getServerUrl() + '/Webresources/company_MFASaveOrRevise', null, 'dialogWidth: 300px; dialogHeight: 100px');
        if (retVal == "Revise") {
            executionContext.getEventArgs().preventDefault();
            makeARevision();
        }
        else if (retVal == "Save") {
        }
    }
}

function createLookupValue(oldLookup) {
    var lookupVal = new Object();
    lookupVal.Id = oldLookup.id;
    lookupVal.LogicalName = oldLookup.entityName;
    lookupVal.Name = oldLookup.Name;
    return lookupVal;
}

function makeARevision() {
    var revisedMFA = {};
    revisedMFA['company_mfaname'] = Xrm.Page.data.entity.attributes.get('company_mfaname').getValue();
    revisedMFA['company_mfadate'] = Xrm.Page.data.entity.attributes.get('company_mfadate').getValue();
    revisedMFA['company_estimatedliqdate'] = Xrm.Page.data.entity.attributes.get('company_estimatedliqdate').getValue();
    revisedMFA['company_actualliqdate'] = Xrm.Page.data.entity.attributes.get('company_actualliqdate').getValue();
    revisedMFA['company_mfanumber'] = Xrm.Page.data.entity.attributes.get('company_mfanumber').getValue();
    revisedMFA['company_revisionno'] = Xrm.Page.data.entity.attributes.get('company_revisionno') == null ? 0 : Xrm.Page.data.entity.attributes.get('company_revisionno').getValue() + 1;
    revisedMFA['company_requester'] = createLookupValue(Xrm.Page.data.entity.attributes.get('company_requester').getValue()[0]);
    revisedMFA['company_mfapreviousrev'] = Xrm.Page.data.entity.attributes.get('company_totalmfatodate').getValue();
    revisedMFA['company_contract'] = createLookupValue(Xrm.Page.data.entity.attributes.get('company_contract').getValue()[0]);

    $.ajax({
        type: 'POST',
        contentType: 'application/json; charset=utf-8',
        datatype: 'json',
        url: getODataUrl() + '/' + 'company_mfaSet',
        data: JSON.stringify(revisedMFA),
        beforeSend: function (XMLHttpRequest) {
            //Specifying this header ensures that the results will be returned as JSON.
            XMLHttpRequest.setRequestHeader('Accept', 'application/json');
        },
        success: function (data, textStatus, request) {
            Xrm.Utility.openEntityForm("company_mfa", data.d.company_mfaId.toUpperCase());
            var attributes = Xrm.Page.data.entity.attributes.get();
            for (var i in attributes) {
                attributes[i].setSubmitMode('never');
            }
            Xrm.Page.ui.close();
        },
        error: function (request, textStatus, errorThrown) {
            alert(errorThrown);
            //alert("There was an error creating the revision");
        }
    });
} 
```

编辑：我`debugger;`在不同的地方插入并且正在使用 VS2012 调试器，发现属性被正确设置为不提交，但显然这并没有阻止弹出确认对话框（即使它在调用 webresource 时有效通过保存按钮）。此外，`Xrm.Page.data.entity.attributes.get(attributeName)`在 onSave 事件期间调用时返回更改后的值，但从功能区调用时返回更改前的值。我仍然不知道为什么或如何解决它。还有什么我应该寻找的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:15:16.193

从功能区调用时使用 F12 调试您的代码（请记住，因为它在功能区中，所以您的 javascript 代码将位于动态脚本/脚本块中）。

# java - 先建立连接，再重定向用户

> ID：16222597
> 
> 赞同：0
> 
> 时间：2013-04-25T18:56:19.687
> 
> 标签：java, javascript, ajax, jakarta-ee

我有一个想法要做一些很甜的东西，但我不确定是否可行。这是一个非常基本的 ajax 函数示例，我可能会使用它来建立服务器连接...

```
function getFakePage(userId)
{
    var ajaxObject, path, params;

    ajaxObject = getAjaxObject();
    params = "?userId=" + userId
    path = getInternalPath() + "someServlet" + params;

    ajaxObject.open("GET", path, true);
    ajaxObject.send();

    // On ready state change stuff here
} 
```

所以假设我有一个这样的网址......

```
https://localhost:8443/Instride/user/1/admin 
```

我想使用 javascript 将用户重定向到这个 URL。通常我会这样做...

```
window.location = "https://localhost:8443/Instride/user/1/admin"; 
```

但我的想法是创建一个可以将代码与代码结合起来的 javascript **（请不要使用 js 框架）**函数。基本上我想要完成的是通过 ajax 创建与服务器的连接，在该服务器上发送一个 servlet 我希望用户重定向到的 url，然后将用户重定向到该 URL。因此，无论用户在世界上的任何地方连接到我的服务器需要多长时间，他们都会看到加载图标而不是空白白页。`ajax``window.location`

因此，要准确说明我要完成的工作；我不想将 window.location 放在我的 ajax 函数的成功中（因为这将包含两次往返），并且我不想为请求的资源返回大量 HTML 并将其添加到页面中。我想用 ajax 建立与服务器的连接，发送一个 servlet 用户想要访问的 URL，然后以某种方式覆盖 ajax 函数来重定向该用户。这可能吗？

我知道你们中的一些人可能会认为这很愚蠢，但当您谈论的是海外用户的拨号连接缓慢而盯着白页时，情况并非如此。如果可能的话，我很想听听一些见解。非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:05:22.977

您不能同时执行 AJAX 请求和位置更改。如果您只想执行一个请求，则必须选择其中一种方法。IE。返回一些数据并替换当前页面上的内容，或加载一个全新的页面。

想要两者都做没有任何意义。你*可能*想要的是*有状态*的URL；您的 URL 与显示的内容匹配的位置，即使该内容来自 AJAX 请求。在这种情况下，一个简单的解决方案是使用`#`您可以自由更改的 URL 部分 ( `window.location.hash`)。一些现代浏览器支持更改整个 URL 而不会导致页面重新加载。我自己使用`#`并取得了巨大的成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:22:47.047

首先，让我说最好的解决方案是找到导致缓慢的原因并修复它。

现在关于你的问题，是的，你可以做到。您甚至可以将其硬塞到现有的应用程序中。但这不会很漂亮。它伴随着它自己的一系列问题。但这里是步骤：

1.  浏览器调用 ajax 缓存服务请求“somepage.html”
2.  浏览器加载加载图标
3.  服务器创建 somepage.html 并将其缓存在临时缓存中，（ehcache 或其他库会很好，可能会根据大小为缓存提供文件支持）
4.  服务器使用缓存页面的 ID 响应 ajax 请求
5.  浏览器现在重定向到“somepage.html?cacheId={cacheId}”，其中 id 来自 ajax 调用。
6.  服务器使用过滤器来查看是否可以为页面而不是实际页面提供任何缓存，从而加快请求速度。

话虽如此，最好使用加载图标快速加载新页面，同时通过 ajax 完成任何繁重的工作。

# c# - 如何定义派生类的“列表”？

> ID：16222601
> 
> 赞同：1
> 
> 时间：2013-04-25T18:56:44.870
> 
> 标签：c#, class, types, derived

我有一个基类和一些派生类

```
public class MyBase {...}
public class MyClass1 : MyBase {...}
public class MyClass2 : MyBase {...} 
```

现在我想列出这些派生类（类！！不是类的实例！），然后我想随机创建这些派生类之一的一个实例。

这是如何运作的？？

这是我想要的伪 C# :)

```
List<MyBase> classList = new List<MyBase> () { MyClass1, MyClass2, MyClass3, ...}

MyBase randomInstance = new classList[random.Next(0,classList.Count-1)](); 
```

（不幸的是，这个 List 构造需要 MyBase 的实例而不是类名）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T19:06:03.190

类似的东西（假设一个无参数的构造函数，并且 B 和 C 是从 A 派生的）：

```
List<Type> types = new List<Type> { typeof(A), typeof(B), typeof(C) };

A instance = (A)Activator.CreateInstance(types[r.Next(0, types.Count)]); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T19:16:22.137

您可以从这样的类型创建

```
class MyBase
{
}

class MyClass1 : MyBase
{
}

class MyClass2 : MyBase
{
} 
```

这使用[System.Activator](http://msdn.microsoft.com/en-us/library/b4wc81dc.aspx)创建对象。

```
void Main()
{
    var typesToPickFrom = new List<Type>()
    {
        typeof(MyBase),
        typeof(MyClass1),
        typeof(MyClass2)
    };

    var rnd = new Random();
    Type typeToCreate = typesToPickFrom [rnd.Next(typesToPickFrom.Count)];
    object newObject = Activator.CreateInstance(typeToCreate);
} 
```

您可以根据需要进行投射。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T19:00:20.610

如您所说，如果您想“创建”一个随机实例：

```
var selection = random.Next(0,2)

switch (selection)
{
    case 1: return new MyBase();
    case 2: return new MyClass1();
    case 3: return new MyClass2();
} 
```

为所有这些类定义一个公共可能很有用`interface`，这样您就可以从方法中返回一些东西。或者您可以简单地返回一个`object`或一个`dynamic`。

# emacs - OSX - 如何定义打开目录树窗口的保存文件

> ID：16222602
> 
> 赞同：0
> 
> 时间：2013-04-25T18:56:46.527
> 
> 标签：emacs

我需要一些帮助，请定义一个打开目录树的另存为函数，而不是仅仅在状态栏中给我一个路径。. . 具体来说，`ns-popup-save-panel`当前版本的 emacs 无法识别。我正在寻找类似的东西`write-file filename &optional confirm`。我尝试了不同的组合，但我仍然无法获得弹出菜单保存文件目录树。我已经弄清楚了键盘快捷键。当我尝试插入时，Emacs 抱怨 void 变量`write-file filename &optional confirm`。只是简单的旧`write-file`或`save-buffer`不打开目录列表。

```
(defun mac-key-save-file-as (&optional filename)
"Save buffer to a file, selecting file by dialog.
Displays sheet.  File is saved once user has dismissed sheet."
    (interactive)
   (ns-popup-save-panel "Select File to Save Buffer" default-directory (if buffer-file-name (file-name-nondirectory buffer-file-name) "Untitled"))
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T19:58:09.140

Mx ns RET

这会显示所有请求 ns- 的命令的列表

问题中引用的代码来自 Aquamacs 2.4。

从源代码构建的最新版本的 Emacs (24.3) 使用不同的名称。在这种特殊情况下，新名称是`ns-write-file-using-panel`.

# jquery - Jquery Autocomplete 未能获得焦点

> ID：16222607
> 
> 赞同：1
> 
> 时间：2013-04-25T18:57:06.613
> 
> 标签：jquery, autocomplete

我正在使用自动完成功能，我想在列表中添加一个标题，这让我很复杂，我遇到了一些问题：这是我的代码：

```
 var autocompleteCounselor = function () {

              $(this.el).find('.alternateCounselorAutocomplete').autocomplete({
                  minLength: 0,
                  source: this.counselorValidDelegates,
                  focus: function (event, ui) {
                    console.log(ui);
                      $(".alternateCounselorAutocomplete").val(ui.item.NAME());
                      return false;
                  },
                  select: function (event, ui) {
                      onAutocompleteAlternateCounselorSelected.apply(_self, [event, ui, _self.counselorFullValidDelegates]);
                  }
                }).data("ui-autocomplete")._renderMenu = function(ul, items){
                  var self = this;

                  ul.append("<li><span>Name</span>"+
                    "<span>Title</<span>" +
                    "<span>Phone</<span> "+
                    "<span>Location</<span>"+
                    "<span>Department</span></li>");
                    $.each(items, function(index, item){
                       /*return $("<li>")
                          .append("<div class='listcounsuler'><span>" + "<a>" + item.NAME() + "</a>" + "</span>" + "<span>" + item.TITLE() + "</span>" + "<span>" + item.PHONE() + "</span>" + "<span>" + item.LOCATION() + "</span>" + "<span>" + item.DEPARTMENT() + "</span>" + "</div>")
                          .appendTo(ul);*/
                           self._renderItem(ul, item);
                     });
                 /* ul.append("</tbody></table>");*/

                };

               $('.alternateCounselorAutocomplete').autocomplete().data("ui-autocomplete")._renderItem = function (ul, item) {
                      return $("<li>")
                       .append("<div class='listcounsuler'><span>" + "<a>" +
                        item.NAME() + "</a>" + "</span>" + "<span>" + item.TITLE() +
                        "</span>" + "<span>" + item.PHONE() + "</span>" + "<span>" +
                        item.LOCATION() + "</span>" + "<span>" + item.DEPARTMENT() +
                        "</span></div>")
                    .appendTo(ul);
              };

              $('.alternateCounselorAutocomplete').autocomplete("search", "");

              $(this.el).find('.counselorEdit').on('click', function () {
                  $('.alternateCounselorAutocomplete').autocomplete('close');
              });

          }; 
```

菜单完美呈现，问题是当我将注意力集中在 li 上时，在控制台中我看到错误：Uncaught TypeError: Cannot call method 'NAME' of undefined

我看到焦点项目未定义：对象{项目：未定义}

函数渲染项也可以正常工作，我可以看到我想要的“li”。
我通过 _renderItemData 更改了 _renderItem 并且它继续发生，我尝试了几件事，但我无法得到解决方案。欢迎任何帮助。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T20:29:22.727

我解决了它从render_menu调用到self._renderItemData ..

# mysql - 我将如何过滤昨天（不是最后 24 小时）并在我的标题中显示昨天的日期？

> ID：16222608
> 
> 赞同：0
> 
> 时间：2013-04-25T18:57:09.293
> 
> 标签：mysql, sql

我正在创建 SQL 报告以从 NetBackup OpsCenter 数据库（MySQL？）查询结果，并且正在学习如何使用 SQL，所以请原谅我的无知。

我在下面创建的报告显示了前一天的故障（而不是之前的 24 小时，每次运行都会有所不同）。

```
SELECT (GETDATE()-1) AS 'Date', statusCode AS STATUS, COUNT(*) AS COUNT

FROM domain_JobArchive

WHERE DATEDIFF(day, UtcBigIntToNomTime(endTime), GETDATE()) =1
and masterServerId=59

GROUP BY statusCode; 
```

我想改变它，所以它报告日期被用作标题......而不是它自己的列。

电流输出： `Count of errors for yesterday (non-PCI)`

`Date STATUS COUNT Apr 24, 2013 11:43:10 AM 288 1 Apr 24, 2013 11:43:10 AM 0 6861 Apr 24, 2013 11:43:10 AM 1 52 Apr 24, 2013 11:43:10 AM 6 63 Apr 24, 2013 11:43:10 AM 50 1 Apr 24, 2013 11:43:10 AM 58 2 Apr 24, 2013 11:43:10 AM 191 1 Total 7 Rows , 1 Page(s)`

所需的输出： `Count of errors for Apr 24, 2013 (non-PCI)`

`STATUS COUNT 0 6861 1 52 6 63 50 1 58 2 191 1 288 1 Total 7 Rows , 1 Page(s)`

这样，每次执行时 - 它都会提取相同的确切数据。

如果它从昨天早上 7 点到今天早上 7 点，那就更好了……不管它何时执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:14:50.900

我认为这应该有效。从您的日期时间减去 7 小时，然后将其与昨天的日期进行比较。您可以从 SELECT 语句中删除日期。这不是必需的。

```
SELECT statusCode AS STATUS, COUNT(*) AS COUNT

FROM domain_JobArchive

WHERE DATE(DATE_SUB(UtcBigIntToNomTime(endTime), INTERVAL 7 HOUR)) = DATE_SUB(curdate(), INTERVAL 1 DAY)
and masterServerId=59

GROUP BY statusCode; 
```

# r - 计算 shapefile 中的多边形

> ID：16222617
> 
> 赞同：3
> 
> 时间：2013-04-25T18:57:35.600
> 
> 标签：r, extract, polygon, area, shapefile

所以我有多个物种范围，如下所示（例如蓝色）这个范围从东到西横跨非洲：

![示例物种范围](https://i.stack.imgur.com/y81Tv.png)

我可以通过`gArea`在`rgeos`包中使用来获得总面积。我想知道的是*这个文件有多少个单独的多边形*- 即总范围有多少不同的区域（这可能是岛屿，或者只是分开的人口）以及*这些多边形的范围是什么*。我一直在使用以下代码：

```
#Load example shapefile
shp <- readShapeSpatial("species1.shp")

#How many polygon slots are there?
length(shp@polygons)

>2

#How many polygons are in each slot
length(shp@polygons[[1]]@Polygons
length(shp@polygons[[2]]@Polygons 
```

并获得特定区域的面积：

```
shp@polygons[[1]]@Polygons[[1]]@area 
```

它是否正确？我担心范围中间的一个湖可能会自己构成一个多边形？我想最终得到一个大致如下的列表：

```
 Species A    Species B
Polygon 1      12          11
Polygon 2      13          10
Polygon 2      14          NA 
```

如果我想为每个物种编译一个列表，如果上面的代码是正确的，那么有多少多边形及其各个范围将非常简单地传递给循环。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T18:41:15.640

这是一个非常平淡无奇的解决方案，但它现在可以完成工作。

```
for(i in 1:length(shpfiles)){

shp <- shpfiles[[i]]

#1) Create master list of all polygon files within a shapefile

#How many lists of polygons are there within the shpfile
num.polygon.lists <- length(shp@polygons)

#Get all polygon files
master <- vector(mode="list")
for(i in 1:num.polygon.lists){
m <- shp@polygons[[i]]@Polygons

master[[i]] <- m
}

#Combine polygon files into a single list
len <- length(master)

if(len > 1) {

root <- master[[1]]
for(i in 2:length(master)){
root <- c(master[[i]], root)}

} else {root <- master[[1]]}

#Rename
polygon.files <- root

#2) Count number of polygon files that are not holes

#Create a matrix for the total number of polygon slots that are going to be counted
res <- matrix(NA,ncol=1 , nrow=length(polygon.files))

#Loop through polygons returning whether slot "hole" is TRUE/FALSE
for(i in 1:length(polygon.files)){

r <- isTRUE(polygon.files[[i]]@hole)

res[[i,1]] <- r
}

#Count number times "FALSE" appears - means polygon is not a hole
p.count <- table(res)["FALSE"]
p.count <- as.numeric(p.count)

print(p.count)

} 
```

这是一个开始

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-26T14:35:11.850

我使用以下代码来找出 shapefile 的每一“行”中有多少个多部分多边形......

sapply（shapefile@polygons，函数（p）长度（p@Polygons））

# python - Python - Tkinter - 图形用户界面

> ID：16222618
> 
> 赞同：1
> 
> 时间：2013-04-25T18:57:35.807
> 
> 标签：python, user-interface, python-2.7, tkinter

我正在使用 Python 为我当前的项目创建一个新应用程序。这是我第一次使用它，这是一次学习经历......

我的应用程序中有一个按钮，`askcolor()`可以从 Python 调用该函数。第一次一切正常，但在那之后，它给了我以下错误。

```
AttributeError: 'str' object has no attribute 'set' 
```

这是我在我的应用程序中工作的顺序：

1.  用户点击`Select Color`按钮：

    ```
    self.bc_bttn=Button(self, text='Select Color', command=lambda: self.callback()) 
    ```

2.  该函数调用该`callback`函数，我选择了正确的颜色

    ```
    def callback(self):
         (triple, hexstr) = askcolor()
         if triple:
             triple_string = str(triple)
             triple_string2 = re.findall('[0-9, ]',triple_string);
             triple_bkgColor = ''.join(triple_string2)
             print triple_bkgColor
             self.overlayColorValue.set(triple_bkgColor) 
    ```

3.  `self.overlayColorValue.set(triple_bkgColor)`更改文本字段条目的值，以便用户在应用程序上看到正确的值

4.  我按下`Save`按钮

    ```
    self.overlayColorValue = self.bc_ent.get()
    body.set('overlay-color', self.overlayColorValue) 
    ```

5.  我的更改被写入 xml 文件

    ```
    tree.write(CONFIG_XML) 
    ```

6.  这次一切正常，但如果我想再次做同样的事情来改变颜色。然后单击`Select Color`按钮时出现以下错误

    ```
    AttributeError: 'str' object has no attribute 'set' 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:08:45.073

您将`self.overlayColorValue`属性替换为 的返回值`self.bc_ent.get()`，即`str`.

据推测，在此之前，它是一个标签，而您想调用`.set()`它：

```
self.overlayColorValue.set(self.bc_ent.get())
body.set('overlay-color', self.overlayColorValue.get()) 
```

# python - 根据索引从numpy数组中获取子数组

> ID：16222621
> 
> 赞同：3
> 
> 时间：2013-04-25T18:57:40.523
> 
> 标签：python, numpy

我有一个 numpy 数组向量，我想根据索引获取一个子集：

```
import numpy as np
input=np.array([1,2,3,4,5,6,7,8,9,10])
index=np.array([0,1,0,0,0,0,1,0,0,1]) 
```

什么是输出输出= [2,7,10]的pythonic方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T19:00:22.817

```
output = input[index.astype(np.bool)] 
```

或者

```
output = input[np.where(index)[0]] 
```

# java - Java 4 Queens 修改

> ID：16222623
> 
> 赞同：1
> 
> 时间：2013-04-25T18:57:42.987
> 
> 标签：java, n-queens

请注意：我被要求以任何我喜欢的方式修改 NQueens 问题。我已经想到了这种方式，并想实现它。这不是一个直接的家庭作业问题，而是一个我如何实施自己的修改的问题。

我在下面编写了一个解决 4 个皇后的代码。所以根据这段代码，没有两个皇后可以在同一行、同一列、同一对角线上，从而不被攻击。我正在尝试修改它，如果我放置一个皇后，那么它可以放在同一列但跳过两行，它可以放在同一行跳过两列，同样它可以放在同一个对角线上跳过两个行和两列。

**所以基本上，简单来说，女王可以放置在同一行，同一列和同一对角线上，跳过两个块。**

对于 4 个皇后输出当前如下所示：

```
* Q * *
* * * Q
Q * * *
* * Q * 
```

和

```
* * Q *
Q * * *
* * * Q
* Q * * 
```

但是也应该给出以下输出：

```
Q * * Q
* * * *
* * * *
Q * * Q 
```

所以在这里，女王每两个街区后被放置，水平，垂直和对角线。

代码：

```
import java.util.*;

public class Queens {

/***************************************…
* Return true if queen placement q[n] does not conflict with
* other queens q[0] through q[n-1]
****************************************/
public static boolean isConsistent(int[] q, int n) {
for (int i = 0; i < n; i++) {
if (q[i] == q[n]) return false; // same column
if ((q[i] - q[n]) == (n - i)) return false; // same major diagonal
if ((q[n] - q[i]) == (n - i)) return false; // same minor diagonal
}
return true;
}

/***************************************…
* Print out N-by-N placement of queens from permutation q in ASCII.
****************************************/
public static void printQueens(int[] q) {
int N = q.length;
for (int i = 0; i < N; i++) {
for (int j = 0; j < N; j++) {
if (q[i] == j) System.out.print("Q ");
else System.out.print("* ");
}
System.out.println();
} 
System.out.println();
}

/***************************************…
* Try all permutations using backtracking
****************************************/
public static void enumerate(int N) {
int[] a = new int[N];
enumerate(a, 0);
}

public static void enumerate(int[] q, int n) {
int N = q.length;
if (n == N) printQueens(q);
else {
for (int i = 0; i < N; i++) {
q[n] = i;
if (isConsistent(q, n)) enumerate(q, n+1);
}
}
} 

public static void main(String[] args) {

enumerate(4);
}

} 
```

我究竟做错了什么？如何更改我的代码以使其适用于修改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:38:44.943

在您的模型中这是不可能的。
在你的模特皇后有下一个坐标：

```
Oy = q[Ox]; 
```

结果

```
Q * * Q
* * * *
* * * *
Q * * Q 
```

数组应该在同一位置有两个值

```
q[0] == 0  
q[0] == 3  
q[3] == 0  
q[3] == 3 
```

在一维数组中是不可能的。你应该改变模型和算法

# desire2learn - 为什么替换字符串在 Desire2Learn 内容中不能正常工作？

> ID：16222625
> 
> 赞同：1
> 
> 时间：2013-04-25T18:57:49.387
> 
> 标签：desire2learn, valence

我想知道为什么替换字符串在 Desire2Learn 小部件中正常工作，但在 Desire2Learn 内容工具中却不行。有没有计划在那里修复它们？当我们决定购买 Desire2Learn 时，它们并没有像我们想象的那样工作，这确实给我们带来了很多麻烦。

这篇文章解释了内容中替换字符串的行为。
[Desire2Learn 替换内容中的字符串](https://stackoverflow.com/questions/15772647/desire2learn-replace-strings-in-content)

如果您可以在课程内容中实际使用它，这将非常有用。事实上，它不是很有用。 [课程部分的替换字符串？](https://stackoverflow.com/questions/11800371/replacement-string-for-course-section)

# ruby-on-rails - NilClass 的未定义方法“model_name”：Class [Ch. 9 MHartl教程]

> ID：16222628
> 
> 赞同：0
> 
> 时间：2013-04-25T18:58:04.283
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

总结 Mhartl rails 教程，我遇到了这个错误。

**错误信息：**

```
NoMethodError in Users#edit

Showing /Users/ME/Sites/rails_projects_updated/first_app/app/views/users/edit.html.erb where line #6 raised:

undefined method `model_name' for NilClass:Class
Extracted source (around line #6):

3: 
4: <div class="row">
5:   <div class="span6 offset3">
6:     <%= form_for(@user) do |f| %>
7:       <%= render 'shared/error_messages' %>
8: 
9:       <%= f.label :name %> 
```

**编辑.html.erb**

```
<% provide(:title, "Edit user") %> 
<h1>Update your profile</h1>

<div class="row">
  <div class="span6 offset3">
    <%= form_for(@user) do |f| %>
      <%= render 'shared/error_messages' %>

      <%= f.label :name %>
      <%= f.text_field :name %>

      <%= f.label :email %>
      <%= f.text_field :email %>

      <%= f.label :password %>
      <%= f.password_field :password %>

      <%= f.label :password_confirmation, "Confirm Password" %>
      <%= f.password_field :password_confirmation %>

      <%= f.submit "Save changes", class: "btn btn-large btn-primary" %>
    <% end %>

    <%= gravatar_for @user %>
    <a href="http://gravatar.com/emails">change</a>
  </div>
</div> 
```

**用户控制器**

```
class UsersController < ApplicationController

  def new
      @user = User.new

      respond_to do |format|
        format.html # new.html.erb
        format.json { render json: @user }
      end
    end

  def show
    @user = User.find(params[:id])
  end

   def create
       @user = User.new(params[:user])
       if @user.save
         sign_in @user
         flash[:success] = "Welcome to the Sample App!"
         redirect_to @user
       else
         render 'new'
       endx
     end

       def edit
         @user = User.find(params[:id])
       end

       def update
         @user = User.find(params[:id])
         if @user.update_attributes(params[:user])
           # Handle a successful update.
         else
           render 'edit'
         end
       end
     end
   end 
```

如果我可以提供任何其他控制器/视图/模型，请告诉我，我会相应地更新帖子！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:04:02.363

您的创建控制器有一个 endx，它应该有一个结束。

```
def create
  @user = User.new(params[:user])
  if @user.save
    ...
  endx
end 
```

应该

```
def create
  @user = User.new(params[:user])
  if @user.save
   ...
  end
end 
```

# ios - 如何将图像路径存储在plist中？

> ID：16222629
> 
> 赞同：1
> 
> 时间：2013-04-25T18:58:09.127
> 
> 标签：ios, objective-c

我知道这可能是一个愚蠢的问题，但我将我的大部分游戏数据存储在一个 plist 中——我想包括对我游戏中使用的图像的引用——与“支持文件”相同的层次结构。我有不同类型的图像存储在 3 个单独的文件夹中。例如，一个文件夹称为 imageclue。我怎么能将路径存储在我的 plist 中，我被卡住了，因为我不能将路径存储在我的 plist 中作为字符串 - 文件名.jpg。我已经尝试获取文件的路径，但是当我将其注销时。

抱歉，如果我解释得不好，请提前感谢您的帮助:)

编辑**

我有一个 plist 文件添加到我的程序中我不想以编程方式添加到它，因为图像是常量 - 下面的屏幕截图显示的是教程而不是 filename.jpg（因为当我的图像被存储时，这将不起作用在文件中）我想知道我使用什么路径名作为字符串。

![在此处输入图像描述](https://i.stack.imgur.com/KhCWr.png)

该图像来自 appcoda.com 的教程 - 它说缩略图是图像路径文件。如果您查看左侧图像的存储位置 - 它们与程序文件一起存储。我的图像在那里的一个文件夹中，所以我对在我的 plist 中输入图像文件的内容感到困惑。

希望这能澄清我的意思，对不起:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:33:10.860

像这样做，

```
NSDictionary *imagePaths = @{@"image 1": [NSHomeDirectory() stringByAppendingPathComponent:@"image 1"]};
[self writeToPlist:imagePaths];

- (void)writeToPlist:imagePaths:(id)plist{
  NSError *error;
  NSData *data = [NSPropertyListSerialization dataWithPropertyList:plist format:kCFPropertyListXMLFormat_v1_0 options:0 error:&error];
  if(error){
    NSLog(@"Could not write to file");
    return;
  }
  [data writeToFile:[self plistPath] atomically:YES];
} 
```

同样明智的加载就这么简单；

```
[self loadImagePathForImageNamed:@"image 1"];
- (NSString*)loadImagePathForImageNamed:(NSString*)imageName{

}

- (NSString*)loadImagePathForImageNamed:(NSString*)imageName{
    NSData *data = [NSData dataWithContentsOfFile:[self plistPath]];
  NSString *error;
  NSPropertyListFormat format;
  NSDictionary *dictionary = [NSPropertyListSerialization propertyListFromData:data mutabilityOption:NSPropertyListImmutable format:&format errorDescription:&error];
  if(error){
    NSLog(@"Could not open plist %@", error);
    return nil;
  }
  return dictionary[imageName];
} 
```

当文件不存在时，您可能必须通过创建一个新文件来处理错误，否则这应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:05:36.160

在 .h 文件中存储三个变量

```
@interface YourViewController : UIViewController 
{
    NSString *folder1;
    NSString *folder2;
    NSString *folder3;
} 
```

在 viewdidload 中：

```
-(void) viewdidLoad
{
    //get the documents directory:
    NSArray *paths = NSSearchPathForDirectoriesInDomains
    (NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    //getting the folder name:
    folder1 = [NSString stringWithFormat:@"%@/imageclue",
                           documentsDirectory];

    folder2 = [NSString stringWithFormat:@"%@/folder2",
                           documentsDirectory];

    folder3 = [NSString stringWithFormat:@"%@/folder3",
                           documentsDirectory];

}

-(NSArray*) getPlistFromFolder:(NSString*)folder imageName:(NSString*)image
{
    NSString *imageTitle = [NSString stringWithFormat:@"%@/image",
                       folder];

    NSArray *data = [[NSArray alloc] initWithContentsOfFile:plistName];
    return data;
} 
```

所以在 plist 文件中，只存储图像名称。

希望这可以帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T20:07:06.810

您以正确的方式存储路径，当您的图像位于应用程序包中时，只需在 plist 中存储带有扩展名的图像文件名，以获取更多参考，您可以在 plist 中定义键名而不是“item1”、“item2”。

现在来到实际问题，如何从 plist 访问图像

`recipes.plist`第 1 步：从应用程序包中读取您的

```
NSString *bundlePath = [[NSBundle mainBundle] pathForResource:@"recipes" ofType:@"plist"];
NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:bundlePath]; 
```

第 2 步：现在从中获取要加载的图像/缩略图名称

第 3 步：在控制器中定义以下函数，从名称返回图像

```
- (UIImage *)getImageWithName:(NSString *)imageFileName
{
    NSString *ext = [imageFileName pathExtension];
    NSString *imagePath = [[NSBundle mainBundle] pathForResource:[imageFileName stringByDeletingPathExtension] ofType:ext];
    return [UIImage imageWithContentsOfFile:imagePath];
} 
```

如何使用

假设您要使用键“Item2”加载图像，然后编写以下代码

```
NSString *imageFileName = [[dict objectForKey:@"Thumbnail"] valueForKey:@"Item2"];
UIImage *item2Image = [self getImageWithName:imageFileName]; 
```

对于“第 6 项”

```
NSString *imageFileName1 = [[dict objectForKey:@"Thumbnail"] valueForKey:@"Item6"];
UIImage *item6Image = [self getImageWithName:imageFileName1]; 
```

# image - 在 MATLAB 中更改每个像素的位数

> ID：16222631
> 
> 赞同：1
> 
> 时间：2013-04-25T18:58:19.853
> 
> 标签：image, matlab, editor, bits-per-pixel

如何更改加载到 MATLAB 中的图像的每像素位数？我使用文件对话框和 imread 函数将图像加载到矩阵中。我只需要更改该图像的每像素位数。使用户能够选择从 1 位到 8 位的任何位置。我知道如何让用户能够选择一个我只是不知道谁来改变它。如何改变这一点？（顺便说一句，我在 MATLAB R2012a 中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:40:36.700

此文档页面包含有关您要执行的操作的大量信息：[减少图像中的颜色数量](http://www.mathworks.co.uk/help/images/reducing-the-number-of-colors-in-an-image.html)。

一个简单的例子如下（几乎直接取自该页面），它将抖动图像并产生一个颜色图（与 OP 的答案略有不同 - 不确定你想做什么）：

```
>> RGB = imread('peppers.png');
>> [x,map] = rgb2ind(RGB, 2); % Reduce to a 2-colour image
>> imagesc(x)
>> colormap(map) 
```

您应该根据可以容纳多少位的最大数量来选择颜色的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:42:01.293

我理解它的方式，你想做这样的事情：

```
imdata = rgb2gray(imread('ngc6543a.jpg') );  % Assuming that we have a grayscale uint8 image
figure('name', 'Before');
imagesc(imdata);
colormap('gray');

numberOfBits = input('Enter number of bits:\n');
maxValue = 2^numberOfBits - 1;

newImage = imdata * (maxValue / 256);
figure('name', 'After');
imagesc(newImage);
colormap('gray'); 
```

该图像`ngc6543a.jpg`是示例图像，因此您可以按原样立即运行此代码。

# json - 您将如何为任意键设计 JSON Schema？

> ID：16222633
> 
> 赞同：40
> 
> 时间：2013-04-25T18:58:28.227
> 
> 标签：json, jsonschema

我有以下 JSON 输出数据：

```
{
   "label_name_0" : 0,
   "label_name_5" : 3,
   .
   .
   .
   "label_name_XXX" : 4
} 
```

输出很简单：与整数值关联的 key[1] 名称。如果键名没有改变，我可以很容易地想出类似于这样的 JSON Schema：

```
 {
        "type": "array"
        "title": "Data output",
        "items" :{ 
            "properties": {
                "label_name": {
                   "type": "integer",
                   "default": 0,
                   "readonly": True,
            }
        }
    }, 
```

由于键名本身是未知的并且不断变化，因此我必须为其设计架构。我唯一知道的是，密钥`string`不超过 100 个字符。如何为`lable_name_xxx`不断变化的键定义 JSON 模式。

[1] 不确定我是否使用了正确的术语

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-08-19T12:30:03.760

On json-schema.org you will find something appropriate in the [File System Example](http://json-schema.org/learn/file-system.html#fstab-schema) section. You can define `patternProperties` inside an `object`.

```
{
    "type": "object",
    "properties": {
        "/": {}
    },
    "patternProperties": {
        "^(label_name_[0-9]+)+$": { "type": "integer" }
    },
    "additionalProperties": false,
 } 
```

The regular expression `(label_name_[0-9]+)+` should fit your needs. In JSON Schema regular expressions are explicitly anchored with `^` and `$`. The regular expressions defines, that there has to be at least one property (`+`). The property consists of `label_name_` and a number between `0` and `9` whereas there has to be at least one number `([0-9]+)`, but there can also arbitrary many of them.

By setting `additionalProperties` to `false` it constrains object properties to match the regular expression.

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2017-02-20T16:40:05.003

正如康拉德的回答所说，使用`patternProperties`. 但是使用 代替`properties`，这不是必需的，我认为 Konrad 只是从他的参考示例中粘贴了该示例，该示例期望路径以`/`. 在下面的示例中，模式匹配`regex .*`接受任何属性名称，并且我只允许使用字符串或 null 类型`"additionalProperties": false`。

```
 "patternProperties": {
    "^.*$": {
      "anyOf": [
        {"type": "string"},
        {"type": "null"}
      ]
    }
  },
  "additionalProperties": false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-02T13:50:22.507

[比 patternProperties 更简单的解决方案，因为 OP 对键名（文档](http://json-schema.org/understanding-json-schema/reference/object.html#additional-properties)）没有任何要求：

```
{
    "type": "object",
    "additionalProperties": {
        "type": "integer",
        "default": 0,
        "readonly": true,
    }        
} 
```

`default`并`readonly`包括在内，因为它们已包含在 OP 的初始建议中，但不是必需的。

# php - 检测是否有人在使用远程桌面

> ID：16222634
> 
> 赞同：-1
> 
> 时间：2013-04-25T18:58:28.813
> 
> 标签：php, rdp, citrix

PHP 中有没有办法查明是否有人从 Windows 终端服务/Citrix/RDP 远程桌面环境中连接到我的网站？

当（并且仅当）有人通过远程桌面连接使用 IE9 连接到它时，我的 Web 应用程序会遇到一些严重的性能问题。我知道我应该寻找这些问题的原因并相信我。但是我发现由于某种原因切换到 IE8 兼容模式可以解决问题。所以暂时我想检测是否有人通过远程桌面连接使用 IE9 连接到我的网站，这样我就可以强制他们使用 IE8 兼容模式。

任何关于为什么我的 Web 应用程序在远程桌面 IE9 中速度如此之慢的任何想法也是受欢迎的。我的 Web 应用程序是基于 PHP/jQuery/jQueryUI/jqGrid/mySQL 构建的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:12:07.790

PHP、HTTP、HTML、DOM 甚至浏览器 DOM 扩展中没有任何东西可以知道您是否在终端服务会话下运行。

唯一的方法是使用 ActiveX 控件或 .NET 小程序直接查询 Win32。在 C#/.NET 中，您可以使用`System.Windows.Forms.SystemInformation.TerminalServerSession`，然后将该信息返回到服务器，但您只能在页面加载后执行此操作。

这可能是 IE9 改进的硬件加速渲染功能的问题，因为终端服务使用虚拟`rdpdd`显示驱动程序。尝试在终端服务器的 IE 中禁用此选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:14:21.607

远程桌面用户使用浏览器作为主机（服务器或 citrix）应用程序内的设置。服务器管理员可以定义浏览器设置（IE 的增强安全设置）等选项 病毒扫描程序集成

以及可用的浏览器（IE 7-8-9-10）。那些浏览器在渲染中的行为不同

IE-XXX 兼容模式可由您的应用程序控制 [http://msdn.microsoft.com/library/cc817574.aspx](http://msdn.microsoft.com/library/cc817574.aspx)

每页：

```
<meta http-equiv="X-UA-Compatible" content="IE=8"/> 
```

即使 html 中不存在“!DOCTYPE”，页面也将始终以“IE8 标准模式”呈现

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE9"/> 
```

即使 html 中不存在“!DOCTYPE”，该页面也将始终以“IE9 标准模式”呈现

```
<meta http-equiv="X-UA-Compatible" content="IE=9"/> 
```

即使 html 中不存在“!DOCTYPE”，该页面也将始终以“IE9 标准模式”呈现

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"/> 
```

在这种配置下，将使用 IE 渲染引擎的最高可用版本。它不关心是否使用了“！DOCTYPE”。此功能可与“IE=7”和“IE=8”相媲美。这是用来兼容最高IE版本的。

所以我认为您不需要关心 RDP 或 Citrix 主机，而是支持在正确模式下使用 IE。

# html - 图像上的两个文本块

> ID：16222635
> 
> 赞同：1
> 
> 时间：2013-04-25T18:58:36.003
> 
> 标签：html, css

我试图在图像上放置两个文本块，一个在左上角，另一个在右下角。左上角的文字没问题，但我不能把文字放在右下角。

这是html代码：

```
<section class="feed">

    <div class="section">
        <img src="">
        <p class="text1"><span>Text 1</span></p>
        <p class="text2"><span>Text 2</span></p>
    </div>

    <div class="section">
        <img src="">
        <p class="text1"><span>Text 3</span></p>
        <p class="text2"><span>Text 4</span></p>
    </div>

</section> 
```

现在是 CSS：

```
.section {
    position: relative;
    width: 65%;
    margin: 3.375em 0 0 5%;
}
img {
    width: 100%;
}
.text1 {
    position: absolute;
    top: 7.5%;
    width: 100%;
}
.text1 span {
    color: white;
    font: 1.5em Helvetica, Sans-Serif;
    font-weight: 300;
    background: rgb(0, 0, 0);
    /* fallback color */
    background: rgba(0, 0, 0, 0.7);
    padding: 0.625em;
}
.text2 {
    /* don't know how to put this one in the bottom right */
}
.text2 span {
    color: white;
    font: 1em Helvetica, Sans-Serif;
    font-weight: 300;
    background: rgb(241, 91, 87);
    /* fallback color */
    background: rgba(241, 91, 87, 0.7);
    padding: 0.625em;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T19:03:56.213

You could just position it absolute, but starting from the bottom right, in stead of the top left you did with the first text block. Something like this:

```
.text2 {
    position: absolute;
    bottom: 0;
    right: 0;
} 
```

To see the code in action: [http://jsfiddle.net/KzFDx/](http://jsfiddle.net/KzFDx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:06:35.753

这是一种 ez 方法来做到这一点。

```
<div style="background= your image here no repeat, width height.....">
<p style="position, size,.... ></P>
<p style="position, size...."></P>
</div> 
```

# vbscript - ActiveX 组件无法创建对象：Mercury.ObjectRepositoryUtil

> ID：16222643
> 
> 赞同：2
> 
> 时间：2013-04-25T18:59:11.667
> 
> 标签：vbscript, qtp, activexobject

我创建了一个 VB 脚本，将 QTP 的对象存储库文件 (.tsr) 转换为 XML，然后转换为 Excel。此 Excel 文件格式也是通过 VB 脚本配置的。但是效果很好，我试图在新机器上运行它，但出现错误：

ActiveX 组件无法创建对象：Mercury.ObjectRepositoryUtil。

脚本：

```
Public Function ExportTSRToXML(TSRPath,XMLPath)
Set XMLRepositoryObj = CreateObject("Mercury.ObjectRepositoryUtil")
XMLRepositoryObj.ExportToXML TSRPath, XMLPath
ExportTSRToXML = XMLPath
Set XMLRepositoryObj = Nothing
End Function 
```

以下是我解决此问题的步骤： 1\. 使用 REGSVR32 注册 RepositoryUtil.dll 2\. 使用 SYSWOW64 下的 CSCRIPT.exe 运行 vbscript 文件

在上面提到的第 2 步，我在执行脚本时看到错误：“Microsoft VBScript 运行时错误：无效的过程调用或参数”

我错过了什么？想不通。

谢谢您的帮助。同样，这段代码在多台机器上工作得很好。新机器（64 位）具有统一功能工具 11.5 而不是 QTP 11.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-14T15:07:04.890

尝试从命令行启动脚本：`%SystemRoot%\SysWow64\cscript <yourscript-here>`。64位机器自动启动64位解释器，这个com对象不兼容

# python - ssh paramiko 无法读取输出

> ID：16222645
> 
> 赞同：0
> 
> 时间：2013-04-25T18:59:12.053
> 
> 标签：python, linux

我正在使用连接到服务器，`paramiko`并且正在尝试使用它`channel.send`来接收顺序输出。下面的脚本无法捕获来自`channel.recv`. 有任何想法吗？

```
import paramiko
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect("xx.xx.xx.xx",username='kshk',password='xxxxxxxx',key_filename='/home/krisdigitx/.ssh/id_rsa')
channel = ssh.invoke_shell()
channel.send('df -h\n')

while channel.recv_ready():
    outp = channel.recv(1024)
print outp 
```

给出：

```
krisdigitx@krisdigitx-Dell-System-XPS-L702X:~/SCRIPTS$ python test.py 
Traceback (most recent call last):
  File "test.py", line 11, in <module>
    print outp
NameError: name 'outp' is not defined 
```

在解释器模式下运行脚本有效......

```
>>> import paramiko
>>> ssh = paramiko.SSHClient()
>>> ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
>>> ssh.connect("xx.xx.xx.xx",username='kshk',password='xxxxx',key_filename='/home/krisdigitx/.ssh/id_rsa')
>>> channel = ssh.invoke_shell()
>>> channel.send('df -h\n')
6
>>> while  channel.recv_ready():
...     outp = channel.recv(1024)
... 
>>> print outp
/dec/sda
                      7.2T  6.6T  622G  92% /tmp/xxx
[kshk@server ~]$ 
>>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:04:15.063

you define outp in the scope of the context manager that you create with the with statement. try printing inside the suite of the context manager i.e.

```
while channel.recv_ready():
    outp = channel.recv(1024)
    print outp 
```

or do this:

```
outp = ""
while channel.recv_ready():
    outp = channel.recv(1024)
print outp 
```

# xml - 获取xsl中元素值的平均值

> ID：16222647
> 
> 赞同：1
> 
> 时间：2013-04-25T18:59:16.560
> 
> 标签：xml, variables, xslt, average

我今天第一次处理 xsl。我拥有的 XML 文件如下所示：

```
<student_course>
<students>
    <student num="">
    <name gender=""></name>
    <course cid="1"></course>
    <course cid="2"></course>
    <course cid="3"></course>
    <course cid="4"></course>
    <comments></comments>
    </student>  
</students>
<courses>
    <course cid="1"></course>
    <course cid="2"></course>
    <course cid="3"></course>
    <course cid="4"></course>
</courses>
</student_course> 
```

有10多个学生，我需要为每个学生打印出每门课程的所有成绩。我已经使用 for-each 完成了。我需要做的是在列的底部，显示该课程的平均成绩（学生/课程）一些东西，但这似乎不起作用，每次我尝试创建一个变量时，我只能在设置后立即调用它，我一定是做错了什么。我如何获得下所有值的平均值`student_courses/students/student/course[@cid]`？

目前我让我的 xsl 显示一个包含 4 列和 11 行的表格（1 行用于标题，10 行用于学生成绩），然后在第 12 行显示平均值。

先谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:34:35.950

我想到了。要获得平均值，最简单的方法是使用 for-each 以及 sum() 和 count() 函数。我所需要的只是将它添加到我希望显示平均值的地方：

```
<xsl:value-of select="sum(/student_course/students/student/course[@cid='1']) div count(/student_course/students/student/course[@cid='1'])"/> 
```

只需更改不同课程的 cid 值。

# java - 循环检查条件

> ID：16222648
> 
> 赞同：9
> 
> 时间：2013-04-25T18:59:16.977
> 
> 标签：java, loops

我想向更有经验的开发人员询问一件简单但对我来说并不明显的事情。假设您有这样的代码（Java）：

```
for(int i=0; i<vector.size(); i++){
   //make some stuff here
} 
```

我经常遇到这样的说法，所以也许它没有错。但对我来说，似乎没有必要在每次迭代中调用 size 方法。我会使用这样的方法：

```
int vectorSize = vector.size();
for(int i=0; i<vectorSize; i++){
    //make some stuff here
} 
```

这里也是一样的：

```
for(int i=0; i<myTreeNode.getChildren().size(); i++){
   //make some stuff here
} 
```

我绝对不是编程方面的专家，所以我的问题是：我是在寻找一个完整的对冲还是在专业代码中处理这些细节很重要？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T19:02:51.053

A method invocation requires that the JVM does indeed do additional stuff. So what you're doing, at first view seems like an optimization.

However, some JVM implementations are smart enough to inline method calls, and for those, the difference will be nonexistent.

The Android programming guidelines for example always recommend doing what you've pointed out, but again, the JVM implementation manual (if you can get your hands on one) will tell you if it optimizes code for you or not.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T19:07:29.540

通常`size()`是一个小的恒定时间操作，因此调用`size`的成本与执行循环体的成本相比是微不足道的，及时编译器可能会为您处理这种优化；因此，这种优化可能没有太多好处。

也就是说，这种优化不会对代码的可读性产生不利影响，因此不是可以避免的；由于这个原因，通常应该避免只影响速度的代码优化（与例如将 O(n) 操作更改为 O(1) 操作的优化相反），例如，您可以[展开循环](http://en.wikipedia.org/wiki/Loop_unwinding)：

```
int i;
int vectorSizeDivisibleBy4 = vectorSize - vectorSize % 4; // returns lowest multiple of four in vectorSize
for(i = 0; i < vectorSizeDivisibleBy4; i += 4) {
    // loop body executed on [i]
    // second copy of loop body executed on [i+1]
    // third copy of loop body executed on [i+2]
    // fourth copy of loop body executed on [i+3]
}
for(; i < vectorSize; i++) { // in case vectorSize wasn't a factor of four
    // loop body
} 
```

通过将循环展开四次，您将`i < vectorSize`评估的次数减少了四倍，代价是使您的代码变得难以阅读（它也可能会弄乱指令缓存，从而导致负面的性能影响）。不要这样做。但是，就像我说的，`int vectorSize = vector.size()`不属于这一类，所以就这样吧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:16:15.450

乍一看，您建议的替代方案接缝优化，但就速度而言，它*与*常用方法相同，因为：

在 java 向量中调用 size() 函数的复杂度时间具有 O(1) 阶复杂度，因为每个向量始终存储一个包含其大小的变量，因此您无需在每次迭代中计算其大小，你只需访问它。

[注意：您可以在http://www.docjar.com/html/api/java/util/Vector.java.html](http://www.docjar.com/html/api/java/util/Vector.java.html)中看到 size() 函数只是返回一个受保护的变量 elementCount。

# jquery - 如何创建一个占位符 在我的选择元素中，我想要一个默认文本，例如“请选择一个选项”。此外，我将 jQuery 插件验证与我的表单一起使用，这样如果用户没有在我的选择元素中选择某些内容，他就无法提交表单。问题是，如果我的选择中有“请选择一个选项”，则表单将生效。如何处理这个问题？

> ID：16222655
> 
> 赞同：2
> 
> 时间：2013-04-25T18:59:36.630
> 
> 标签：jquery, html, select, placeholder

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T19:04:02.363

```
<select>
    <option value="">Please select an option</option> 
```

`<option>` content is only used when the `value` is not empty.

[http://jsfiddle.net/s5AVg/](http://jsfiddle.net/s5AVg/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-12T12:52:38.177

```
<select>
    <option style="display:none">please select an option</option>
    <option disabled="disabled">I am a line</option>
    <option>1</option>
    <option>2</option>
    <option>3</option>
</select> 
```

# ruby-on-rails - Is it possible to let a user keep being logged in when he's accessing to sub domain www?

> ID：16222662
> 
> 赞同：1
> 
> 时间：2013-04-25T18:59:48.090
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

I implemented Devise in my App.

It was working fine. But one thing I'm not satisfied with: When a user log into example.com first, then access to www.example.com, he is logged out.

Is it possible to let him stay as logged in by configuring something?

# powershell - Powershell - 使用模块编译

> ID：16222664
> 
> 赞同：5
> 
> 时间：2013-04-25T19:00:03.750
> 
> 标签：powershell, module, compilation, active-directory

我创建了一个基于 Active-Directory 模块的登录脚本，它查询用户组成员以映射他的驱动器等。

我已经用 PowerGui 编译它，并创建了一个 EXE 文件。问题是，用户计算机上不存在该模块。

有没有办法在没有模块的情况下做到这一点，或者将模块添加到编译中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T09:52:40.047

对于组成员资格，您也可以在不连接到 AD 的情况下获取它，并解析 WHOAMI 实用程序的输出

```
$groups = WHOAMI /GROUPS /FO CSV | ConvertFrom-Csv | Select-Object -ExpandProperty 'Group Name'

if($groups -contains 'group1')
{
   do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T03:41:30.040

**一种方法是使用 Active-Directory 服务接口 (ADSI)**。

您可以在另一个 SO 帖子中找到（[我可以将用户与不同域的组匹配吗？](https://stackoverflow.com/a/7794945/608772)）一种使用 ADSI 查找用户所属的所有组的方法，在帖子中它是 C# 代码，但很容易翻译。

这是一个简单搜索开始的小例子。

```
Clear-Host
$dn = New-Object System.DirectoryServices.DirectoryEntry ("LDAP://WM2008R2ENT:389/dc=dom,dc=fr","jpb@dom.fr","Pwd")

# Look for a user
$user2Find = "user1"
$Rech = new-object System.DirectoryServices.DirectorySearcher($dn)
$rc = $Rech.filter = "((sAMAccountName=$user2Find))"
$rc = $Rech.SearchScope = "subtree"
$rc = $Rech.PropertiesToLoad.Add("mail");

$theUser = $Rech.FindOne()
if ($theUser -ne $null)
{
  Write-Host $theUser.Properties["mail"]
} 
```

**另一种方法是使用[System.DirectoryServices.AccountManagement 命名空间](http://msdn.microsoft.com/en-us/library/bb299745.aspx)。**

这种方式也是使用ADSI，不过是封装的，需要Framework .NET 3.5。您还可以在[同](https://stackoverflow.com/a/7794945/608772)一篇文章中的 Edited *(2011-10-18 13:25)*部分中找到使用这种方式的 C# 代码。

**您还可以使用 WMI ：**

```
$user2Find = "user1"
$query = "SELECT * FROM ds_user where ds_sAMAccountName='$user2find'"
$user = Get-WmiObject -Query $query -Namespace "root\Directory\LDAP"
$user.DS_mail 
```

您可以在本地服务器上或域内的计算机上使用此解决方案，但从域外向 WMI 进行身份验证会稍微复杂一些。

# spring - Hibernate not saving object to database

> ID：16222668
> 
> 赞同：1
> 
> 时间：2013-04-25T19:00:12.403
> 
> 标签：spring, hibernate, model-view-controller

I've been trying to set up a little hibernate/spring MVC project.

I've gotten the Spring .jsp page to display data from the database, but i cannot figure out how to have hibernate save the objects to the database.

Here is my (relevant) Code:

GroupDAOImpl.java (the method)

```
@Override
public void saveGroup(Group group){
    Session session = sessionFactory.openSession();
    Transaction transaction = session.beginTransaction();
    session.save(group);

    transaction.commit();
    session.close();
} 
```

HelloController.java Method:

```
 public ModelAndView add(HttpServletRequest request, HttpServletResponse response, Group group) throws Exception {
    groupDAO.saveGroup(group);
    return new ModelAndView("redirect:list.htm");
} 
```

jsp Page:

```
<form:form action="add.htm" commandName="group">
<table>
    <tr>
        <td>group Name :</td>
        <td><form:input path="name"/></td>
    </tr>

    <tr>
        <td colspan="2"><input type="submit" value="Register"></td>
    </tr>
</table> 
```

Log from the Server:

```
Hibernate: insert into groups (id, name, shoppingList_id) values (default, ?, ?) 
```

Debugger Value of "group" in GroupDAOImpl saving method:

```
id = 2
name = "jjjj" 
```

Any ideas? Greatly appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-26T20:42:02.777

据我所知，休眠属性需要以休眠为前缀，例如

```
<property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver" /> 
```

解决这个问题，这可能是你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T22:14:05.107

实际上我们在日志中看到了 SQL 请求：

```
Hibernate: insert into groups (id, name, shoppingList_id) values (default, ?, ?) 
```

我猜你解释得不好，你希望它是你现有对象的 SQL 更新查询。

如果要更新对象，SpringMVC 绑定提供的 Group 实例应该知道对象 id。实际上，表单不会发送 Group id，因此您的应用程序无法知道应该更新哪个对象。

即使知道 ID，也需要调用 Session.merge 而不是 Session.save :)

# cakephp - CakePHP Get translated data from the model

> ID：16222671
> 
> 赞同：0
> 
> 时间：2013-04-25T19:00:21.237
> 
> 标签：cakephp, cakephp-2.0, translate

I am using cakephp 2.x to make one site multilingual and I am using the i18n extract and the TranslateBehavior Core Library.

The i18n works fine and the TranslateBehavior Core Library works fine when I try to save data. But when I want to read it I have to say to the controller the specific locale with:

```
$this->Home->locale = 'spa'; 
```

or

```
$this->Home->locale = 'eng'; 
```

Instead the core library makes it automatically by me. I have to specify all the times the locale? Or does exist something that do it automatically?

Thank you very much

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T09:33:48.717

Cakephp 1.3 上有一篇关于 i18n 的详细文章，我希望你的 2.x 也能在这个说理论上工作，所以你可以尝试一下[http://codeatomic.com/developing-cakephp-multilingual-website/](http://codeatomic.com/developing-cakephp-multilingual-website/)

# javascript - 如何将 HTML 按钮值分配给 javascript 中的变量？

> ID：16222679
> 
> 赞同：-2
> 
> 时间：2013-04-25T19:00:36.423
> 
> 标签：javascript, html, button, calculator, assign

我正在制作一个简单的计算器（加、减、乘、除）。我需要一种方法，以便我可以将按钮值分配给 javascript 变量，这样我就可以将这些值放在一起（即像 12345 这样的数字），这样我就可以进行计算了。有任何想法吗？注意：我是新手，所以越简单越好，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:10:09.813

最简单的解决方案是将处理程序附加到范围内的所有按钮，然后在单击时读出文本（或某些数据属性）。

```
<div id="buttons">
    <button>1</button>
    <button>2</button>
    <button>3</button>
    <button>4</button>
    .
    .
    .
</div> 
```

然后听听点击事件。

```
$("#bottons button").click(function() {
    var n = parseInt($(this).text());
    // n is now the integer that was clicked.
    // do with it something :)
}); 
```

同样，这只是最快的例子。但无论如何，希望它有所帮助。

# ruby - bundle install against an older version of ruby for one gem

> ID：16222680
> 
> 赞同：0
> 
> 时间：2013-04-25T19:00:36.673
> 
> 标签：ruby, gem, rvm, linecache

I can install the linecache (0.46) gem against ruby v 1.8.x, but not 2.0.0\. When I run bundle install, I want to specify that I want to install all gems against 2.0.0 except linecache, which I want to install against 2.0.0\. How can I do that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:30:43.547

我最终只是为所有宝石使用旧版本的 ruby​​ 安装。我使用了`rvm use "ree-1.8.7-2012.02"`and `bundle install`，并且成功了。

# sharepoint - Infopath：检查 SharePoint 列表字段值时未运行规则

> ID：16222681
> 
> 赞同：0
> 
> 时间：2013-04-25T19:00:38.370
> 
> 标签：sharepoint, sharepoint-2010, infopath, infopath2010, infopath-forms-services

使用发布到 SharePoint 2010 表单库的 InfoPath 2010，我添加到“表单加载”区域的规则似乎没有运行。这是我的场景：

1.  在表单加载时，我添加了一个规则来检查 SharePoint 字段（来自我的表单发布到的 SharePoint 列表）是否设置为字符串，例如“启用”。该规则将 infopath（布尔字段）中的标志设置为“true”。

2.  在表单提交时，我添加了一条规则将标志设置为“false”。

3.  当标志为“false”时，即在最初提交表单之后，表单上的每个字段都有“禁用此控件”的规则。

4.  对此进行测试，我将表单提交到 SharePoint，打开它，果然字段被禁用。那里一切都好。

5.  我在 SharePoint 项目中手动将字符串字段更改为“启用”，因此我希望我的规则能够运行并更新标志。我再次打开表格。

字段仍然被禁用！该标志仍设置为“假”！

为什么这不起作用？要么永远不会运行规则，要么条件以某种方式失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T16:27:38.110

我能够通过执行以下操作来修复它：

1.  确保选中“仅包含活动表单的数据”（我必须将此字段分隔到另一个数据连接中，因为无法为我正在使用的另一个字段检查该框），并且

2.  确保在规则中我从数据连接下的“dataFields”文件夹而不是“queryFields”中选择

有了这两件事，表单现在的行为就像它应该的那样。

# iphone - 从文本文件中读取 - Objective C

> ID：16222682
> 
> 赞同：14
> 
> 时间：2013-04-25T19:00:39.403
> 
> 标签：iphone, ios, objective-c

我正在尝试熟悉目标 C，我目前的目标是读取文本文件中的项目列表并将它们存储在 NSString 数组中。

目前这就是我所拥有的：

```
NSString *filepath = [[NSBundle mainBundle] pathForResource:@"myList" ofType:@"txt"];
NSData* data = [NSData dataWithContentsOfFile:filepath];
NSString* string = [[NSString alloc] initWithBytes:[data bytes]
                                             length:[data length]
                                           encoding:NSUTF8StringEncoding];

NSString* delimiter = @"\n";
listArray = [string componentsSeparatedByString:delimiter]; 
```

我不确定这是否重要，但`myList.txt`在我的支持文件中。

目前，我的列表中只有一项。但是，我什至无法将 1 项存储到我的`listArray`.

我确信我错过了一些愚蠢的东西，我只是 Objective C 的新手。

**编辑：** 我很抱歉之前没有提到这一点。我没有收到任何错误。我的数组只是空的。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-25T19:26:08.370

我将建议进行一些简化，这可能会解决您的问题，因为我无法说出您的问题是什么。根据信息，我不确定您在读取文件时是否获得了正确的文件内容。

```
NSString *filepath = [[NSBundle mainBundle] pathForResource:@"myList" ofType:@"txt"];
NSError *error;
NSString *fileContents = [NSString stringWithContentsOfFile:filepath encoding:NSUTF8StringEncoding error:&error];

if (error)
    NSLog(@"Error reading file: %@", error.localizedDescription);

// maybe for debugging...
NSLog(@"contents: %@", fileContents);

NSArray *listArray = [fileContents componentsSeparatedByString:@"\n"];
NSLog(@"items = %d", [listArray count]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-15T10:42:11.823

如果文件的内容是这样的：

```
[{"Title":"20","Cost":"20","Desc":""},{"Title":"10","Cost":"10.00","Desc":""},{"Title":"5","Cost":"5.00","Desc":""}] 
```

尝试这个

```
-(id)readFromDocumentDBFolderPath:(NSString *)fileName
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *appFile = [documentsDirectory stringByAppendingPathComponent:fileName];
    NSFileManager *fileManager=[NSFileManager defaultManager];
    if ([fileManager fileExistsAtPath:appFile])
    {
        NSError *error= NULL;
        NSData* data = [NSData dataWithContentsOfFile:appFile];
        id resultData = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:nil];
        if (error == NULL)
        {
            return resultData;
        }
    }
    return NULL;
} 
```

# c# - ASP.NET WebAPI - How do I receive Base64 encoded binary from JSON post?

> ID：16222684
> 
> 赞同：4
> 
> 时间：2013-04-25T19:00:51.997
> 
> 标签：c#, json, binary, base64, blob

I want to send a BLOB to my API. I've got a model with two properties: `Id (int)`, `Blob (byte[])`... How is this received by the WebAPI controller? Will it recognize the model and convert the Base64 encoded BLOB from the JSON into a `byte[]`? Currently I'm able to receive the Id, but not the Blob (it was sent through XHR without any problems)

# binding - Cocos2d-x lua script sample codes

> ID：16222685
> 
> 赞同：1
> 
> 时间：2013-04-25T19:00:52.487
> 
> 标签：binding, lua, cocos2d-x

I've been programming with Cocos2d for a while now and I'm pretty familiar with it. But when it comes down to Cocos2d-x lua script, I'm having a really hard time understanding and following the structures. The Cocos2d-x lua template comes with a sample script "hello.lua", which is good, I follow through it and understand it no problem. However, bellowing are my questions,

1, In Cocos2d, you can struct a custom CCSprite class and import"SpriteClass.h" in another class that needs it. And in Cocos2d-x lua, you can create the same custom sprite script and access it in another script via require "scriptname", yeah? So, all you need to write is script and no need to create any classes?

2, I want to learn how to bind C++ the lua in Cocos2d-x lua. I posted this question [here](https://stackoverflow.com/questions/16203849/cocos2d-x-lua-binding) and got a pretty good answer, but after reading and searching, I still have trouble figure out where is the binding take place. Should I write it in a .ccp class or .lua script? I also trying to find any samples to study from but I found no luck. Can anyone here post any good source to learn or any sample code I can study?

PS: this question isn't the same as [the other one](https://stackoverflow.com/questions/16203849/cocos2d-x-lua-binding) I posted. I'm asking how to separate script so that I don't write everything in one script. As well as some example binding codes I can study.

# bash - 将文件路径转换为字符串

> ID：16222688
> 
> 赞同：1
> 
> 时间：2013-04-25T19:01:07.400
> 
> 标签：bash, shell

我在尝试找到将目录路径中的字符串替换为另一个字符串的方法时出错

```
sed: Error tryning to read from {directory_path}: It's a directory 
```

外壳脚本

```
#!/bin/sh

R2K_SOURCE="source/"
R2K_PROCESSED="processed/"
R2K_TEMP_DIR=""

echo " Procesando archivos desde $R2K_SOURCE "

for file in $(find $R2K_SOURCE )
do
        if [ -d $file ]
        then
                R2K_TEMP_DIR=$( sed 's/"$R2K_SOURCE"/"$R2K_PROCESSED"/g' $file )
                echo "directorio $R2K_TEMP_DIR"
        else
#               some code executes
                :
        fi
done

# find $R2K_PROCCESED -type f -size -200c -delete 
```

我知道它在这条线上的错误

```
R2K_TEMP_DIR=$( sed 's/"$R2K_SOURCE"/"$R2K_PROCESSED"/g' $file ) 
```

但我不知道如何告诉 sh 将 $file 变量视为字符串而不是目录对象。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T19:07:59.037

如果您想替换部分路径名，您可以回显路径名并将其带到管道上的 sed。此外，您必须通过将 sed 命令放入双引号而不是单引号来启用通配符，并更改 's' 命令的分隔符，如下所示：

```
R2K_TEMP_DIR=$(echo "$file" | sed "s:$R2K_SOURCE:$R2K_PROCESSED:g") 
```

然后您将能够在“s”命令中使用斜杠进行操作。

**更新：**

更好的是删除无用的回声并改用“这里是字符串”：

```
R2K_TEMP_DIR=$(sed "s:$R2K_SOURCE:$R2K_PROCESSED:g" <<< "$file") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T19:54:33.530

首先，不要使用：

```
for item in $(find ...) 
```

因为您可能会使命令行超载。`$(...)`此外，直到进程完成，for 循环才能开始。反而：

```
find ... | while read item 
```

您还需要注意时髦的文件名。该`for`循环将对所有带有空格的文件进行咳嗽。只要`find | while`文件的名称中只有一个空格而不是两个空格，它们就可以工作。更好的：

```
find ... -print0 | while read -d '' -r item 
```

这将在文件名之间放置空值，`read`并将在这些空值上中断。这样，可以毫无问题地读取带有空格、制表符、新行或任何其他可能导致问题的文件。

您的 sed 行是：

```
R2K_TEMP_DIR=$( sed 's/"$R2K_SOURCE"/"$R2K_PROCESSED"/g' $file ) 
```

这是试图做的是编辑你`$file`的目录。您想要做的是调整目录名称本身。因此，您必须将名称`sed`作为管道回显：

```
R2K_TEMP_DIR=$(echo $file | sed 's/"$R2K_SOURCE"/"$R2K_PROCESSED"/g') 
```

但是，您最好使用环境变量参数来过滤您的环境变量。

基本上，您有一个名为的目录`source/`，您要查找的所有文件都在该目录下。你只是想改变：

```
 source/foo/bar 
```

至

```
 processed/foo/bar 
```

你可以做这样的事情 ${file#source/}。`#`表示这是一个左侧*过滤*器，它将删除最少的数量以匹配`#`. 检查手册页`bash`并在*Parameter Expansion*下查找。

这个，你可以做这样的事情：

```
#!/bin/sh

R2K_SOURCE="source/"
R2K_PROCESSED="processed/"
R2K_TEMP_DIR=""

echo " Procesando archivos desde $R2K_SOURCE "

find $R2K_SOURCE -print0 | while read -d '' -r file
do
    if [ -d $file ]
    then
        R2K_TEMP_DIR="processed/${file#source/}"
        echo "directorio $R2K_TEMP_DIR"
    else
#       some code executes
        :
    fi
done 
```

`R2K_TEMP_DIR="processed/${file#source/}"``source/`从一开始就删除了`$file`，你只是`processed/`在它的位置前面加上。

更好的是，它的效率更高。在您的原始脚本中，`$(..)`创建另一个 shell 进程来运行您`echo`的，然后通过管道输出到另一个进程来运行`sed`。（假设您使用[loentar](https://stackoverflow.com/a/16222814/368630)的解决方案）。您不再运行任何子流程。您的目录名称的整个修改是内部的。

顺便说一句，这也应该有效：

```
R2K_TEMP_DIR="$R2K_PROCESSED/${file#$R2K_SOURCE}" 
```

我只是没有测试。

# c# - 从字符串中获取日期

> ID：16222693
> 
> 赞同：9
> 
> 时间：2013-04-25T19:01:34.003
> 
> 标签：c#, string, datetime

假设我有以下字符串之一：

```
"Hello, I'm a String... This is a Stackoverflowquestion!! Here is a Date: 16.03.2013, 02:35 and yeah, plain text blah blah..-."

"This the other string! :) 22.11.2012\. Its a Date you see"

"Here we have 2 Dates, 23.12.2012 and 14.07.2011" 
```

从字符串 (in ) 中获取这些日期的最佳和最快方法是`DateTime`什么？

（仅字符串中第一次出现的日期）

理想的回报：

```
String 1: 16.03.2013 (as a DateTime)
String 2: 22.11.2012 ("           ")
String 3: 23.12.2012 ("           ") 
```

所以我会调用一个类似的方法：

```
DateTime date1 = GetFirstDateFromString(string1); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-25T19:08:21.063

这将提取、解析和打印输入文本中的所有日期：

```
var regex = new Regex(@"\b\d{2}\.\d{2}.\d{4}\b");
foreach(Match m in regex.Matches(inputText))
{
    DateTime dt;
    if (DateTime.TryParseExact(m.Value, "dd.MM.yyyy", null, DateTimeStyles.None, out dt))
        Console.WriteLine(dt.ToString());
} 
```

现在，如果您只想要第一次约会，您可以这样做：

```
static DateTime? GetFirstDateFromString(string inputText)
{
    var regex = new Regex(@"\b\d{2}\.\d{2}.\d{4}\b");
    foreach(Match m in regex.Matches(inputText))
    {
        DateTime dt;
        if (DateTime.TryParseExact(m.Value, "dd.MM.yyyy", null, DateTimeStyles.None, out dt))
            return dt;
    }
    return null;
} 
```

请注意，该方法返回一个 nullable `DateTime`，因此当字符串不包含日期时它可以返回 null。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-25T19:07:48.640

如果您的日期始终采用该格式，您可以尝试使用正则表达式来获取日期字符串，然后使用它`DateTime.ParseExact`来获得您想要的结果：

```
public DateTime? GetFirstDateFromString(string input)
{
    DateTime d;

    // Exclude strings with no matching substring
    foreach (Match m in Regex.Matches(input, @"[0-9]{2}\.[0-9]{2}\.[0-9]{4}"))
    {
        // Exclude matching substrings which aren't valid DateTimes
        if (DateTime.TryParseExact(match.Value, "dd.MM.yyyy", null, 
            DateTimeStyles.None, out d))
        {
            return d;
        }
    }
    return null;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T19:09:54.057

尝试这个：

```
using System;
using System.Text.RegularExpressions;

public class Example
{
   public static DateTime? GetFirstDateFromString(string input);
   {
      string pattern = @"\d{2}\.\d{2}\.\d{4}";
      Match m = Regex.Match(input, pattern);
      DateTime result;
      foreach(string value in match.Groups)  
          if (DateTime.TryParseExact(match.Groups[1], "dd.MM.yyyy", CultureInfo.CurrentCulture, DateTimeStyles.None, out result)
              return result;
      return null;
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-08T21:42:52.063

对我来说，这段代码可以从包含日期的字符串文本中获取日期。

```
var regex = new Regex(@"\d{2}\/\d{2}\/\d{4}");
 foreach (Match m in regex.Matches(line))
 {
  DateTime dt;
  if (DateTime.TryParseExact(m.Value, "MM/dd/yyyy", null, DateTimeStyles.None, out dt))
  remittanceDateArr[chequeNo - 1] = dt.ToString("MM/dd/yyyy");                                   
  rtbExtract.Text = rtbExtract.Text + remittanceDateArr[chequeNo - 1] + "\n";
                            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T19:07:17.577

创建一个方法，其参数是正则表达式，以捕获日期格式和从中提取日期的字符串。我相信如果您没有将要使用的格式，那么将无法从字符串中的一系列字母数字字符中提取日期。

# android - Android：DialogFragment.dismissInternal 处 DialogFragment.dismissAllow 处的 NullPointerException

> ID：16222698
> 
> 赞同：12
> 
> 时间：2013-04-25T19:01:43.920
> 
> 标签：android, android-fragments, nullpointerexception, dialogfragment

显示 ProgressDialog 时应用程序崩溃。我正在使用滑出式键盘在手机上进行测试。显示对话框时，我滑动键盘和应用程序崩溃。

```
public static class ProgressDialogFragment extends DialogFragment
{

    public ProgressDialogFragment()
    {
        super();
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState)
    {
        final ProgressDialog dialog = new ProgressDialog(getActivity());
        dialog.setMessage(getString(R.string.dlg_progress_title));
        dialog.setIndeterminate(true);
        dialog.setCancelable(false);
        return dialog;
    }

    @Override
    public void show(FragmentManager manager, String tag)
    {
        try
        {
            super.show(manager, tag);
        }
        catch (IllegalStateException e)
        {
            Log.d(TAG, e.getMessage());
        }
    }

} 
```

崩溃日志：

```
> 04-25 20:49:46.999: E/AndroidRuntime(7904): FATAL EXCEPTION: main
04-25 20:49:46.999: E/AndroidRuntime(7904): java.lang.NullPointerException
04-25 20:49:46.999: E/AndroidRuntime(7904):     at android.support.v4.app.DialogFragment.dismissInternal(DialogFragment.java:184)
04-25 20:49:46.999: E/AndroidRuntime(7904):     at android.support.v4.app.DialogFragment.dismissAllowingStateLoss(DialogFragment.java:165)
04-25 20:49:46.999: E/AndroidRuntime(7904):     at com.fisherman.activity.HomeActivity$2.onPostExecute(HomeActivity.java:268)
04-25 20:49:46.999: E/AndroidRuntime(7904):     at com.fisherman.activity.HomeActivity$2.onPostExecute(HomeActivity.java:1)
04-25 20:49:46.999: E/AndroidRuntime(7904):     at android.os.AsyncTask.finish(AsyncTask.java:417)
04-25 20:49:46.999: E/AndroidRuntime(7904):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
04-25 20:49:46.999: E/AndroidRuntime(7904):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
04-25 20:49:46.999: E/AndroidRuntime(7904):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 20:49:46.999: E/AndroidRuntime(7904):     at android.os.Looper.loop(Looper.java:130)
04-25 20:49:46.999: E/AndroidRuntime(7904):     at android.app.ActivityThread.main(ActivityThread.java:3835)
04-25 20:49:46.999: E/AndroidRuntime(7904):     at java.lang.reflect.Method.invokeNative(Native Method)
04-25 20:49:46.999: E/AndroidRuntime(7904):     at java.lang.reflect.Method.invoke(Method.java:507)
04-25 20:49:46.999: E/AndroidRuntime(7904):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
04-25 20:49:46.999: E/AndroidRuntime(7904):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
04-25 20:49:46.999: E/AndroidRuntime(7904):     at dalvik.system.NativeStart.main(Native Method) 
```

我完成的课程是静态的，因为应用程序崩溃：

```
> 04-25 20:48:50.757: E/AndroidRuntime(7863): Caused by: android.support.v4.app.Fragment$InstantiationException: Unable to instantiate fragment com.fisherman.activity.HomeActivity$ProgressDialogFragment: make sure class name exists, is public, and has an empty constructor that is public
04-25 20:48:50.757: E/AndroidRuntime(7863):     at android.support.v4.app.Fragment.instantiate(Fragment.java:405)
04-25 20:48:50.757: E/AndroidRuntime(7863):     at android.support.v4.app.FragmentState.instantiate(Fragment.java:97)
04-25 20:48:50.757: E/AndroidRuntime(7863):     at android.support.v4.app.FragmentManagerImpl.restoreAllState(FragmentManager.java:1767)
04-25 20:48:50.757: E/AndroidRuntime(7863):     at android.support.v4.app.FragmentActivity.onCreate(FragmentActivity.java:208)
04-25 20:48:50.757: E/AndroidRuntime(7863):     at com.fisherman.activity.HomeActivity.onCreate(HomeActivity.java:50)
04-25 20:48:50.757: E/AndroidRuntime(7863):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-25 20:48:50.757: E/AndroidRuntime(7863):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
04-25 20:48:50.757: E/AndroidRuntime(7863):     ... 12 more
04-25 20:48:50.757: E/AndroidRuntime(7863): Caused by: java.lang.InstantiationException: com.fisherman.activity.HomeActivity$ProgressDialogFragment
04-25 20:48:50.757: E/AndroidRuntime(7863):     at java.lang.Class.newInstanceImpl(Native Method)
04-25 20:48:50.757: E/AndroidRuntime(7863):     at java.lang.Class.newInstance(Class.java:1409)
04-25 20:48:50.757: E/AndroidRuntime(7863):     at android.support.v4.app.Fragment.instantiate(Fragment.java:394) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-28T07:20:56.050

您是否在执行后关闭对话框？它可能会导致应用程序崩溃因此，如果您忘记关闭对话框，请在执行后关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T12:19:27.120

HomeActivity$2.onPostExecute(HomeActivity.java:268)

您是否异步调用对话框？

# android - android - 启动另一个应用程序的活动以获得它的结果

> ID：16222704
> 
> 赞同：10
> 
> 时间：2013-04-25T19:02:01.247
> 
> 标签：android, android-intent, android-activity, launch

我有两个应用程序，A 和 B。

从 A 开始，我使用以下代码启动 B 以获得结果：

```
Intent fmIntent = getPackageManager().getLaunchIntentForPackage("com.example.B");
fmIntent.putExtra("hello", "world");
startActivityForResult(fmIntent, REQUEST_TEST); 
```

从 B 开始，我正在执行以下操作：

```
getIntent().putExtra("completed", true);
setResult(RESULT_OK, getIntent());
finish(); 
```

如果我对同一个应用程序中的活动执行上述操作，它会按预期工作。

但是，由于它是两个不同的应用程序，我收到一个没有数据的空意图和一个未设置的结果代码。我应该如何编辑上述内容以确保始终保持一个意图？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-11-30T11:28:27.097

用于`setFlags(0)`清理可以由以下人员创建的所有标志`getLaunchIntentForPackage`：

```
Intent fmIntent = getPackageManager().getLaunchIntentForPackage("com.example.B");
fmIntent.setFlags(0);
fmIntent.putExtra("hello", "world");
startActivityForResult(fmIntent, REQUEST_TEST); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-08T23:51:34.933

相关问题“ [Android onActivityResult 在活动开始之前触发！](https://stackoverflow.com/questions/3524140/android-onactivityresult-triggered-before-activity-even-starts) ”中提供了解决方案。以这种方式创建意图：

```
Intent myIntent = new Intent();
myIntent.setClassName("com.example.B", "com.example.B.ActivityB");
startActivityForResult(myIntent, 600); 
```

我面临同样的问题并以这种方式解决。

# linux - git 查找并重命名多个文件名和文件夹名中的字符串

> ID：16222705
> 
> 赞同：0
> 
> 时间：2013-04-25T19:02:04.460
> 
> 标签：linux, git, unix, grep, find

所以基本上我需要在我的 github 项目中找到包含字符串'persons'的所有文件和文件夹

```
find . -type f -print | grep "persons"
find . -type d -print | grep "persons" 
```

以上对我有用。

```
But I also need to rename all the above files and folders with 'members' 
```

我可以用几个命令完成上述操作吗？我不知道如何对上面递归地执行 git mv oldfilename newfilename 而不是手动替换它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:22:28.827

```
for dir in `find /DIR -type d -iname '*persons*'` ; do
    git mv "${dir}" "${dir/persons/members}"
done 
```

会做。对于文件，请使用`-type f`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:25:08.253

```
find . -depth -name persons |  while read F; do mv $F $(dirname $F)/members; done 
```

# android - android logcat 中的运行时异常

> ID：16222707
> 
> 赞同：0
> 
> 时间：2013-04-25T19:02:07.453
> 
> 标签：android, android-logcat, runtimeexception

我想从服务器（WAMP）数据库中检索数据，并且想在单个列表视图中显示。我花了很长时间才了解这一点，最后我实现了，但是 logcat 显示了几个 android 运行时错误。我修复了一些错误，并发布了一些我无法修复的错误。我的 .java 文件：

```
 package com.example.least;

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class MainActivity extends ListActivity {

    // url to make request
    private static String url = "http://localhost/android_connect/final.php";

    // JSON Node names
    private static final String TAG_CONTACTS = "opass";
    private static final String TAG_ID = "User_ID";

    // contacts JSONArray
    JSONArray contacts = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Hashmap for ListView
        ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(url);

        try {
            // Getting Array of Contacts
            contacts = json.getJSONArray(TAG_CONTACTS);

            // looping through All Contacts
            for(int i = 0; i < contacts.length(); i++){
                JSONObject c = contacts.getJSONObject(i);

                // Storing each json item in variable
                String id = c.getString(TAG_ID);

                // Phone number is agin JSON Object

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(TAG_ID, id);

                // adding HashList to ArrayList
                contactList.add(map);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        /**
         * Updating parsed JSON data into ListView
         * */
        ListAdapter adapter = new SimpleAdapter(this, contactList,
                R.layout.list_item,
                new String[] { TAG_ID }, new int[] {
                        R.id.textView1});

        setListAdapter(adapter);

        // selecting single ListView item
        ListView lv = getListView();

        // Launching new screen on Selecting Single ListItem
        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String name = ((TextView) view.findViewById(R.id.textView1)).getText().toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                in.putExtra(TAG_ID, name);

                startActivity(in);
            }
        });
    }

} 
```

logcat 异常：

```
04-25 19:35:02.353: D/AndroidRuntime(5650): Shutting down VM
04-25 19:35:02.353: W/dalvikvm(5650): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-25 19:35:02.393: E/AndroidRuntime(5650): FATAL EXCEPTION: main
04-25 19:35:02.393: E/AndroidRuntime(5650): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.least/com.example.least.MainActivity}: android.os.NetworkOnMainThreadException
04-25 19:35:02.393: E/AndroidRuntime(5650):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at android.os.Looper.loop(Looper.java:137)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at java.lang.reflect.Method.invokeNative(Native Method)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at java.lang.reflect.Method.invoke(Method.java:511)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at dalvik.system.NativeStart.main(Native Method)
04-25 19:35:02.393: E/AndroidRuntime(5650): Caused by: android.os.NetworkOnMainThreadException
04-25 19:35:02.393: E/AndroidRuntime(5650):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at com.example.least.JSONParser.getJSONFromUrl(JSONParser.java:39)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at com.example.least.MainActivity.onCreate(MainActivity.java:45)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at android.app.Activity.performCreate(Activity.java:5104)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-25 19:35:02.393: E/AndroidRuntime(5650):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-25 19:35:02.393: E/AndroidRuntime(5650):     ... 11 more
04-25 19:35:02.603: D/dalvikvm(5650): GC_CONCURRENT freed 211K, 13% free 2588K/2944K, paused 24ms+30ms, total 226ms 
```

主 Activity.xml 文件：

```
<ListView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/list">
</ListView> 
```

因此我是 android 新手，我正在努力解决这些类型的错误。请帮我修复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:06:14.493

问题是`Caused by: java.lang.RuntimeException: Binary XML file line #1: You must supply a layout_width attribute.`，它是在线引起的`at com.example.least.MainActivity.onCreate(MainActivity.java:36)`

`R.layout.activity_main`因此，请检查缺少该`layout_width`属性的布局文件。

顺便说一句，尽管您是 Android 新手，但您至少应该在将其发布到网络上之前阅读 logcat，因为在许多情况下（这就是其中之一），logcat 会告诉您错误在哪里以及它是由什么引起的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-11T09:44:17.707

问题是您正在尝试在 create 内部执行与网络相关的操作。Android 只允许网络相关的操作，例如从线程或 AsyncTask 内的 webservice 获取值。所以尝试添加Asynctask或线程

# jquery - JQuery Mobile: how to neutralize JQM on one element?

> ID：16222709
> 
> 赞同：0
> 
> 时间：2013-04-25T19:02:19.010
> 
> 标签：jquery, css, jquery-mobile

**Given my html structure as:**

```
<body>
  <div data-role="page" data-theme="b">
  <header>My header</header>
    <div data-role="content">
    My page-specific content
    </div>
  <footer>My footer</footer>
  </div><!-- page end-->
</body><!-- body end--> 
```

I want JQM.js (and JQM.css) to work on the header, footer, but not on the page.

**.1\. How to neutralize JQM.js on this single `<div data-role="content">` element ?**

* * *

**Optional:** 2\. If possible, how neutralizing JQM.css on same element ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:11:23.297

更改`data-role="content"`为`data-role="none"`

# html - CSS Nav bar not spanning full length

> ID：16222711
> 
> 赞同：0
> 
> 时间：2013-04-25T19:02:23.337
> 
> 标签：html, css

I know I've been asking a lot of questions and you guys have been great. There are two problems I'm having with my Nav.

1) First, the NAV isn't spanning the whole way. 2) For whatever reason, under "Services", the dropdown is spanning out long enough to fit all the links, but under "About Us", "Photo Credit" isn't.

Here's the link: [http://matthewtbrown.com/jeffandcricketquilt/index2.html](http://matthewtbrown.com/jeffandcricketquilt/index2.html)

```
nav li {
    font-family: 'bitterregular';
    font-size:16px;
}

nav ul {
    background: #000; /* Old browsers */
    list-style: none;
    position: relative;
    display: inline-table;
}

nav ul:after {
    content: ""; clear: both; display: block;
}

nav ul ul {
    display: none;
}

nav ul li:hover > ul {
    display: block;
}

nav ul li {
    float: left;
    color:#fff;
}

nav ul li:hover a {
    color:#FFF;
}

nav ul li a {
    display: block;
    padding: 10px 40px;
    color:#FFF;
    text-decoration: none;
}

nav ul ul {
    background: #FFF;
    border-radius: 0px; 
    padding: 0;
    position: absolute; 
    top: 100%;
}

nav ul ul li {
    float: none; 
    border-top: 1px solid #444;
    border-bottom: 1px solid #444;
    border-color:#FFF;                  
    position: relative;
    background-color:#000;
    font-size:12px;
}

nav ul ul li a {
    padding: 8px 40px;
    color:#FFF;             }   
    nav ul ul li a:hover {
    background-color:#000;
    color:#999;
}

nav ul  li a:hover {
    background-color:#000;
    color:#999;
}

nav ul ul ul {
    position: absolute; left: 100%; top:0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:09:09.910

在我看来，您的`<nav>`元素实际上跨越了整个宽度，但`nav ul`不是。

删除`display: inline-table;`，它跨越了整个宽度。这也应该修复“照片信用”链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:10:50.513

从. `display: inline-table;`_ `nav ul`这应该可以解决这两个问题。:)

# php - 在本地工作以准备实时服务器

> ID：16222713
> 
> 赞同：0
> 
> 时间：2013-04-25T19:02:27.733
> 
> 标签：php, codeigniter, localhost, live, mamp

我即将在本地开发一个新的 Codeigniter 应用程序。我很好奇我应该使用的正确文件结构，这有助于适应适当的最佳实践。我没有更改 MAMP 中的默认根目录。我想要做的设置是，当我准备好上传到一个实时站点时，我不需要做任何额外的事情来让它工作。我确实配置了 index.php 文件，以便它显示系统和应用程序文件夹的正确位置。站点一是主要站点。

现在我有这个：

当地的

```
/MAMP
    /htdocs
        /sites
            /site1
                /system
                /application
                /public_html
                    index.php
            /site2
                /system
                /application
                /public_html
                    index.php
            /site3
                /system
                /application
                /public_html
                    index.php 
```

居住

```
/root
    /application
    /dev
        /site1
            /application
            /system
            /public_html
                index.php
                .htaccess
        /site2
            /application
            /system
            /public_html
                index.php
                .htaccess
    /sites
        /site3
            /application
            /system
            /public_html
                index.php
                .htaccess
        /site4
            /application
            /system
            /public_html
                index.php
                .htaccess
    /public_html
        /public_html
            /assets
                /css
                /js
                /images
            index.php
            .htaccess
    /system 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T23:25:50.130

CodeIgniter 在根文件夹 index.php 中有一个环境变量，您可以设置它来确定您的系统是生产还是开发。这是路由所有传入请求的 index.php。

为您的开发机器设置此环境变量，并为您的实时服务器设置一个单独的文件。

在 application/config 中，您可以将单独的生产和开发配置文件存储在与环境变量同名的文件夹下。

# java - 在 Camel DSL 中使用 Exchange 属性“到”

> ID：16222720
> 
> 赞同：5
> 
> 时间：2013-04-25T19:02:46.557
> 
> 标签：java, apache-camel

我想在 Camel Exchange 上设置一个属性，然后在保存文件时使用这个属性。在我的骆驼 dsl 中，我有以下内容：

```
.process(processorToSetExhangeProperty)  // sets the property <uid> on the exchange
.to("file:/tmp?fileName=file-" + property("uid") + ".xml") 
```

该文件正在保存为：

```
"file-property{uid}.xml" though 
```

我的处理器如下：

```
@Override
public void process(Exchange exchange) throws Exception {
    UUID uuid = UUID.randomUUID();
    exchange.setProperty("uid", uuid.toString());
    exchange.setOut(exchange.getIn());
} 
```

关于可能出了什么问题或如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T20:50:46.030

**更新** 了上面接受的新答案，而不是以前的答案：

* * *

答案是[是]：

.to("file:/tmp?fileName=file-${property.uid}") + ".xml")

这个简单的表达式引入了交换属性。有关您可以提取的内容的完整列表，请参阅[简单表达式语言参考](http://camel.apache.org/simple.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-20T15:37:28.810

骆驼中的`to`不在运行时解释。

如果你想动态地构建你的 URI，你应该使用接收者列表。见[https://camel.apache.org/manual/latest/faq/how-to-use-a-dynamic-uri-in-to.html](https://camel.apache.org/manual/latest/faq/how-to-use-a-dynamic-uri-in-to.html)

# autohotkey - Autohotkey：无法弄清楚为什么这会与其余代码一起推动 Shift

> ID：16222721
> 
> 赞同：0
> 
> 时间：2013-04-25T19:02:46.873
> 
> 标签：autohotkey, shift

我正在尝试制作一个宏，只要我按住鼠标侧键，它就会重复按 O 和 M，但突然之间，它现在也按 shift。知道为什么或如何解决它吗？

```
delaybetweenfkeys:=0
fkeydowndelay:=5

XButton1::
Down := True
Send, {O Down}{m Down}
Loop
{
Send, {O Down}{m Down}
Sleep, 5
Send, {O Up}{m Up}
If !Down
  Break
}
Send, {O Up}{m Up}
Return
XButton1 Up::Down := False 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:09:17.900

你告诉它发送一个大写“O”，为了实现这一点，它发送 Shift+o。因此，如果您同时按下了其他键，它也会被移动。

# asp.net - Asp.net enableViewStateMac=true not hashing

> ID：16222727
> 
> 赞同：0
> 
> 时间：2013-04-25T19:03:10.087
> 
> 标签：asp.net, viewstate

I've got an ASP.net web forms application. I'm trying to work through some security issues with it. Previously the developers before me had disabled MAC on the viewstate. I'm trying to reenable it.

The problem I'm having is that I have pages `enableViewState="true"`, `enableViewStateMac="true"` and also a `machineKey` entry in my web.config to do this globally, but the security tools I'm using are still reporting an unhashed viewstate. I've searched the entire solution for any references to `EnableViewStateMac` in case there were page level directives turning it off and I'm not coming up with any.

So my question is this, what other ways/reasons would the application level directive not work?

# angularjs - 首次运行后 Angular 服务“未定义”

> ID：16222731
> 
> 赞同：0
> 
> 时间：2013-04-25T19:03:30.617
> 
> 标签：angularjs

所以我的 readingController 第一次在主体中调用 getRomanization ，然后它又调用 Romanize 工厂服务（如下所示控制器）。这一切都在第一次正常工作，但第二次在 checkRomanization 结束时调用 getRomanization 时，罗马化服务出现`undefined`在 Chrome 中。Romanize 服务会发生什么？为什么它只成功运行一次？

请帮我解决这个问题，因为我已经被困了很长时间。

```
var readingController = function ($scope, Romanize){
    $scope.getRomanization = function(Romanize){
        $scope.currentMaterial = $scope.sections[$scope.sectionNumber].tutorials[$scope.tutorialNumber].material[$scope.questionNumber];
        Romanize.get($scope.currentMaterial).then(function(d){
            $scope.romanized = d;
        });

        $scope.$apply();
    };
    $scope.getRomanization(Romanize);
    $scope.$apply();
    $scope.checkRomanization = function(userRomanization){
        if ($scope.romanized === userRomanization){
            $scope.questionNumber++;
            $scope.getRomanization();
        };
    }
}

app.factory('Romanize', ['$http', 'Position', function($http, Position){
    return{
      get: function(query){
            var url= Position.sections[Position.sectionNumber].romanizeService + "?korean=" + query;
            var promise = $http.get(url).then(function(d) {
                var parts = $(d.data).find("span");
                var array = [];
                for (var x = 0; x<parts.length; x++){
                    array.push(parts[x].title);
                }
                var result = array.join("");
                return result;
            });
            return promise;
        }
    };
}]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:09:07.920

您对 getRomanize 的第二次调用缺少服务名称作为参数

```
$scope.checkRomanization = function(userRomanization){
    if ($scope.romanized === userRomanization){
        $scope.questionNumber++;
        $scope.getRomanization(Romanize);
    };
}; 
```

# ruby - 如何在 Ubuntu 12.04 上正确安装 ruby 2.0.0？

> ID：16222738
> 
> 赞同：79
> 
> 时间：2013-04-25T19:04:02.917
> 
> 标签：ruby, ubuntu

我已经成功安装`rvm`，但是当我运行以下命令时

```
sudo apt-get update 
```

或者：

```
rvm install 2.0.0 
```

我有以下错误：

```
W: Failed to fetch http://ppa.launchpad.net/cheleb/blender-svn/ubuntu/dists/precise/main/source/Sources  404  Not Found

W: Failed to fetch http://ppa.launchpad.net/cheleb/blender-svn/ubuntu/dists/precise/main/binary-amd64/Packages  404  Not Found

W: Failed to fetch http://ppa.launchpad.net/cheleb/blender-svn/ubuntu/dists/precise/main/binary-i386/Packages  404  Not Found

W: Failed to fetch http://ppa.launchpad.net/ferramroberto/oneiric/ubuntu/dists/precise/main/source/Sources  404  Not Found

W: Failed to fetch http://ppa.launchpad.net/ferramroberto/oneiric/ubuntu/dists/precise/main/binary-amd64/Packages  404  Not Found

W: Failed to fetch http://ppa.launchpad.net/ferramroberto/oneiric/ubuntu/dists/precise/main/binary-i386/Packages  404  Not Found 
```

我该如何解决这些错误？

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2013-04-25T20:45:00.573

请按照以下步骤操作

```
sudo apt-get -y update
sudo apt-get -y install build-essential zlib1g-dev libssl-dev libreadline6-dev libyaml-dev
cd /tmp
wget http://cache.ruby-lang.org/pub/ruby/2.0/ruby-2.0.0-p481.tar.gz
tar -xvzf ruby-2.0.0-p481.tar.gz
cd ruby-2.0.0-p481/
./configure --prefix=/usr/local
make
sudo make install 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2014-07-17T12:10:41.140

# 用于`rvm`安装稳定的 ruby​​：

```
curl -sSL https://get.rvm.io | bash -s stable --ruby 
```

或者，如果您已经拥有 rvm，请获得稳定版本：

```
rvm get stable 
```

安装ruby并使用特定版本的ruby（记得使用登录shell）

```
/bin/bash --login
rvm install 2.0.0
rvm use 2.0.0
rvm rubygems latest
ruby --version 
```

可以在[RVM 官方网站上找到](https://rvm.io/rvm/install)。

编辑：正如@prem 指出的那样，首先运行它，**如果出现公钥错误，请按照上述步骤操作**

`gpg --keyserver hkp://keys.gnupg.net --recv-keys \ 409B6B1796C275462A1703113804BB82D39DC0E3`

# 用于`rbenv`安装红宝石：

安装必要的依赖项：

```
sudo apt-get update && sudo apt-get install git-core curl zlib1g-dev \
build-essential libssl-dev libreadline-dev libyaml-dev libsqlite3-dev \
sqlite3 libxml2-dev libxslt1-dev libcurl4-openssl-dev \
python-software-properties libffi-dev 
```

安装`rbenv`：

```
cd
git clone git://github.com/sstephenson/rbenv.git .rbenv
echo 'export PATH="$HOME/.rbenv/bin:$PATH"' >> ~/.bash_profile
echo 'eval "$(rbenv init -)"' >> ~/.bash_profile

git clone git://github.com/sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build
echo 'export PATH="$HOME/.rbenv/plugins/ruby-build/bin:$PATH"' >> ~/.bash_profile
source ~/.bash_profile 
```

安装红宝石：

```
rbenv install -v 2.0.0 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2015-09-14T16:17:03.983

从[travis-cli Ubuntu 安装说明](https://github.com/travis-ci/travis.rb#other-unix-systems)，[Brightbox Ruby NG(NextGeneration)](https://launchpad.net/~brightbox/+archive/ubuntu/ruby-ng) ppa：

```
$ sudo apt-get install python-software-properties
$ sudo apt-add-repository ppa:brightbox/ruby-ng
$ sudo apt-get update
$ sudo apt-get install ruby2.1 ruby-switch
$ sudo ruby-switch --set ruby2.1 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-04-03T18:18:53.387

虽然这个答案被接受了，但我强烈建议使用 rvm 。在没有它的情况下，我尝试安装 ruby​​ 时遇到了麻烦。参见例如本指南：

[https://www.digitalocean.com/community/articles/how-to-install-ruby-on-rails-on-ubuntu-12-04-lts-precise-pangolin-with-rvm](https://www.digitalocean.com/community/articles/how-to-install-ruby-on-rails-on-ubuntu-12-04-lts-precise-pangolin-with-rvm)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-12-31T14:20:17.093

任何安装 ruby​​ 的简单方法都是使用[ruby​​-install](https://github.com/postmodern/ruby-install)。我从头开始构建 ruby​​ 时出现编译错误，但`ruby-install`没有遇到此类问题。

*编辑：*我过去遇到过问题，`rvm`我觉得我应该积极反对这个。不过，这只是我个人。我对 的运气还不错`rbenv`，但总是将它与 结合使用`ruby-install`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-25T20:08:02.973

您启用了一些不适用于您的 Ubuntu 版本的 ppa 源。在 /etc/apt/sources.list 中将它们注释掉，运行 sudo apt-get update ，你会没事的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-01-20T00:36:55.143

使用**rbenv**

第一步是为 Ruby 安装一些依赖项。

```
sudo apt-get update
sudo apt-get install git-core curl zlib1g-dev build-essential libssl-dev libreadline-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt1-dev libcurl4-openssl-dev python-software-properties 
```

使用**rbenv**安装是一个简单的两步过程。首先安装**rbenv**，然后安装**ruby** ​​-build ：

```
cd
git clone git://github.com/sstephenson/rbenv.git .rbenv
echo 'export PATH="$HOME/.rbenv/bin:$PATH"' >> ~/.bashrc
echo 'eval "$(rbenv init -)"' >> ~/.bashrc
exec $SHELL

git clone git://github.com/sstephenson/ruby-build.git ~/.rbenv/plugins/ruby-build
echo 'export PATH="$HOME/.rbenv/plugins/ruby-build/bin:$PATH"' >> ~/.bashrc
exec $SHELL

rbenv install 2.0.0
rbenv global 2.0.0
ruby -v 
```

[gorails.com 上的原始帖子](https://gorails.com/setup/ubuntu/14.04)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-04-11T23:48:38.560

我将**@PravinMishra**的源代码放入[Gist](https://gist.github.com/rubo77/ba9b64b160fe46e44aa1)中，现在您可以简单地使用这一个衬里：

```
wget -O - https://git.io/vvkI4 | bash 
```

**注意：**不要盲目相信我的要点，下载文件并在运行之前查看它！

# sql-server - 单点登录和数据库查询

> ID：16222739
> 
> 赞同：0
> 
> 时间：2013-04-25T19:04:07.947
> 
> 标签：sql-server, asp.net-mvc, login, asp.net-web-api

我有一个 mssql 数据库，其中包含一个用户表和大约 6 个不同应用程序的表。每个应用程序在数据库中都有自己的架构。当用户登录时，会显示他有权访问的应用程序列表。

我想将用户表和应用程序分离到他们自己的数据库中，主要有两个原因。

1.  可扩展性
2.  维护

项目的第一步是将用户表移动到它自己的数据库中。然后使用 web api 服务允许任何应用程序与数据交互。例如 - IsUserValid、CreateUser、UpdatePassword....

我看到的问题是某些应用程序具有通过连接调用用户表的存储过程。例如： SELECT user.username, user.firstname, user.lastname, app.column1, app.column2 from users inner join app on users.username = app.username

有没有优雅的方法来解决这个问题？我知道我可以在两个单独的数据库中加入两个表，但我希望能够将应用程序数据库和用户数据库移动到单独的服务器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:46:19.860

您始终可以创建[链接服务器](http://msdn.microsoft.com/en-us/library/ff772782.aspx)并跨多个服务器查询数据。

```
SELECT * FROM schema.Table1 t1 JOIN server2.schema2.Table2 t2 ON t1.UserId = t2.UserId 
```

替代解决方案是使用某种复制来跨所有数据库复制数据或修改过程，使它们不依赖于用户数据。

# javascript - How to get alert to display using javascript after draggin?

> ID：16222741
> 
> 赞同：0
> 
> 时间：2013-04-25T19:04:12.437
> 
> 标签：javascript

I have the below javascript. The draggable portion of the code works, but the alert for some reason isn't working. Any advice on how to fix it to get the alert to display?

```
 <script src="http://twitter.github.io/bootstrap/assets/js/jquery.js"></script>

<%= javascript_include_tag "application" %>
<%= javascript_include_tag "jsapi" %>
<%= javascript_include_tag "jquery-1.3.2.min" %>
<%= javascript_include_tag "jquery-ui-1.7.1.custom.min" %>
   <script type="text/javascript">
  // When the document is ready set up our sortable with it's inherant function(s)
  $(document).ready(function() {

    $("#test-list").sortable({
      handle : '.handle',
      update : function () {
        var order = $('#test-list').sortable('serialize');
      }

    });
      });
  </script>
  <script>

   $(function(){
       $('#test1').on('click',function(){
          alert('test');
          // CONCATENATE TEXT
          // user = $('.user:nth-child(1)').text()+ ','+ $('.user:nth-child(2)').text();
          // alert(user);
          // $('#personalassessment_set3').val(user);
       });
   }); 
```

```
<input id="test1" type="button" value="Set Value" /> 
```

# php - SQL BETWEEN 语句不返回任何结果？

> ID：16222746
> 
> 赞同：0
> 
> 时间：2013-04-25T19:04:26.300
> 
> 标签：php, mysql, sql

我正在尝试从我的数据库中提取两个值之间的经度和纬度值（存储为 decimal(10,6) ），但由于某种原因，其中一个值没有返回任何结果。

这是我的查询：

```
SELECT * FROM `location` WHERE location_latitude BETWEEN 53.76200 AND 53.765000 AND location_longitude BETWEEN -2.710000 AND -2.720000 
```

当我只查询纬度时，我得到的结果很好。问题似乎只在于经度。我对这一切还是很陌生，但它可能与经度值之前的减号有关吗？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T19:06:26.467

更改参数的顺序`BETWEEN`：

```
AND location_longitude BETWEEN -2.720000 AND -2.710000 
```

由于`-2.72`小于`-2.71`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:06:51.137

`location_longitude BETWEEN -2.710000 AND -2.720000`返回真当且仅当 -2.71 <= 经度 <= -2.72。该表达式始终返回 false，因为 -2.72 < -2.71。切换两个值。

[MySQL 的文档之间。](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between)

# maven - 使用 maven 构建一个胖罐子

> ID：16222748
> 
> 赞同：135
> 
> 时间：2013-04-25T19:04:34.753
> 
> 标签：maven, jar, maven-assembly-plugin

我有一个代码库，我想将它作为 jar 分发。它还依赖于外部 jar，我想将其捆绑在最终的 jar 中。

我听说这可以使用 来完成`maven-assembly-plug-in`，但我不明白如何。有人可以指点我一些例子。

现在，我正在使用 fat jar 来捆绑最终的 jar。我想使用 maven 实现同样的目标。

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2013-04-25T19:17:10.247

**注意：如果您是spring-boot应用程序，请阅读答案末尾**

将以下插件添加到您`pom.xml` 的最新版本可以[在](https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-assembly-plugin)

```
...
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>CHOOSE LATEST VERSION HERE</version>
            <configuration>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
            </configuration>
            <executions>
                <execution>
                    <id>assemble-all</id>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
... 
```

配置此插件后，运行`mvn package`将生成两个 jar：一个仅包含项目类，第二个包含所有依赖项的 fat jar，后缀为“-jar-with-dependencies”。

如果您想`classpath`在运行时正确设置，那么还要添加以下插件

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <configuration>
        <archive>
            <manifest>
                <addClasspath>true</addClasspath>
                <mainClass>fully.qualified.MainClass</mainClass>
            </manifest>
        </archive>
    </configuration>
</plugin> 
```

* * *

**对于 Spring Boot 应用程序**，只需使用以下插件（选择适当的版本）

```
<plugin>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-maven-plugin</artifactId>
    <configuration>
        <fork>true</fork>
        <mainClass>${start-class}</mainClass>
    </configuration>
    <executions>
        <execution>
            <goals>
                <goal>repackage</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2013-04-25T19:16:50.247

您可以使用[maven-shade-plugin](http://maven.apache.org/plugins/maven-shade-plugin/index.html)。

在构建中配置阴影插件后，该命令`mvn package`将创建一个包含所有依赖项的单个 jar。

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2014-05-29T15:43:10.320

也许你想要`maven-shade-plugin`，捆绑依赖，最小化未使用的代码并隐藏外部依赖以避免冲突。

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-shade-plugin</artifactId>
            <version>3.1.1</version>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>shade</goal>
                    </goals>
                    <configuration>
                        <minimizeJar>true</minimizeJar>
                        <createDependencyReducedPom>true</createDependencyReducedPom>
                        <dependencyReducedPomLocation>
                            ${java.io.tmpdir}/dependency-reduced-pom.xml
                        </dependencyReducedPomLocation>
                        <relocations>
                            <relocation>
                                <pattern>com.acme.coyote</pattern>
                                <shadedPattern>hidden.coyote</shadedPattern>
                            </relocation>
                        </relocations>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

参考：

*   [http://maven.apache.org/plugins/maven-shade-plugin/plugin-info.html](http://maven.apache.org/plugins/maven-shade-plugin/plugin-info.html)
*   [http://maven.apache.org/plugins/maven-shade-plugin/shade-mojo.html](http://maven.apache.org/plugins/maven-shade-plugin/shade-mojo.html)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-06-27T18:06:51.780

实际上，添加

```
<archive>
   <manifest>
    <addClasspath>true</addClasspath>
    <packageName>com.some.pkg</packageName>                     
    <mainClass>com.MainClass</mainClass>
  </manifest>
</archive> 
```

对 maven-jar-plugin 的声明不会为我将主类条目添加到清单文件中。我必须将它添加到 maven-assembly-plugin 才能在清单中得到它

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-04-25T19:32:19.283

您可以使用[onejar-maven-plugin](http://onejar-maven-plugin.googlecode.com/svn/mavensite/index.html)进行打包。基本上，它将您的项目及其依赖项组装为一个 jar，不仅包括您的项目 jar 文件，还包括所有外部依赖项作为“jar of jars”，例如

```
<build>
    <plugins>
        <plugin>
            <groupId>com.jolira</groupId>
            <artifactId>onejar-maven-plugin</artifactId>
                <version>1.4.4</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>one-jar</goal>
                        </goals>
                    </execution>
                </executions>
        </plugin>
    </plugins>
</build> 
```

[注 1：项目主页](http://onejar-maven-plugin.googlecode.com/svn/mavensite/usage.html)提供配置选项。

注意 2：出于某种原因，onejar-maven-plugin 项目未在 Maven 中心发布。但是[jolira.com 会](https://github.com/jolira/onejar-maven-plugin)跟踪原始项目并将其发布到 groupId `com.jolira`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-30T20:15:34.627

另一种方法是使用 maven [shade](http://maven.apache.org/plugins/maven-shade-plugin/usage.html)插件来构建一个`uber-jar`.

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-shade-plugin</artifactId>
    <version> Your Version Here </version>
    <configuration>
            <!-- put your configurations here -->
    </configuration>
    <executions>
            <execution>
                    <phase>package</phase>
                    <goals>
                            <goal>shade</goal>
                    </goals>
            </execution>
    </executions>
</plugin> 
```

# windows-8 - 我可以使用不同的用户帐户启动 Windows 8 设备模拟器吗？

> ID：16222750
> 
> 赞同：2
> 
> 时间：2013-04-25T19:04:47.673
> 
> 标签：windows-8, visual-studio-2012, windows-store-apps, simulator

我注意到 VS2012 中的模拟器（显然）正在使用相同的帐户打开一个新的 Windows 会话，这会导致很多问题：

*   我不能使用现代 UI 版本的 IE，因为 IE 不是我的默认浏览器。但是如果我将它设置为模拟器中的默认浏览器，它也会成为我的主机会话中的默认浏览器，这是我不想要的
*   对于计划在会话开始时启动的应用程序，将在模拟器中启动一个新实例。例如：
    *   Dropbox：如果两个实例都尝试同步同一个物理文件夹，可能会导致严重问题
    *   Spark：它检测到其他人从另一台计算机连接了同一个帐户，所以我在主机会话中断开连接
    *   Logitech Setpoint：它在模拟器中捕获鼠标滚轮，这意味着我不能在主机会话中再使用滚轮（我必须在模拟器中杀死 Setpoint 才能修复它）

在我看来，解决此问题的最佳方法是让模拟器使用不同的用户帐户打开一个会话，这样它就不会干扰我当前的会话。但我找不到任何控制模拟器行为的选项......有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:25:34.123

这是不可能的，因为子会话用于模拟器，这是仅对当前用户可用的功能。可以在[此处查看有关子会话的更多信息](http://msdn.microsoft.com/en-us/library/windows/desktop/jj553447%28v=vs.85%29.aspx)

一种解决方案是对该实例进行虚拟化并进行远程调试，这样您就可以在没有上述任何问题的情况下进行部署和调试。

[http://msdn.microsoft.com/en-us/library/windows/apps/hh441469.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh441469.aspx)

# php - 如何专门为 Safari 调用 html

> ID：16222752
> 
> 赞同：0
> 
> 时间：2013-04-25T19:04:50.980
> 
> 标签：php, wordpress, browser, if-statement, safari

我正在使用 Wordpress，我的索引页面上有响应式 html，与 safari 不一致，但是我创建了可以与 Safari 一起使用的 html，是否有一个 php if 语句可以用来调用该 html？

我在 Wordpress 中为此使用了一个插件，但该插件在激活“源重定向站点”时不起作用。

常规 html - "173.83.251.7/~grebesba/" Safari 特定 173.83.251.7/~grebesba/5453-2/

我正在寻找一个 php 代码

"* php> ..... 常规代码

如果别的？Safari 特定代码

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T21:09:52.710

也许不是您正在寻找的答案，但是：

更好的解决方案是追踪 javascript/css/markup-bug。只为一个浏览器做黑客是丑陋的，从长远来看可能最终导致更多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:12:59.983

您可以检查用户代理：

```
$user_agent = $_SERVER['HTTP_USER_AGENT'];
if( strpos( $user_agent, 'Safari' ) !== false ){
    // do Safari stuff
} 
```

# c# - 从列表中设置 System.Windows.Point 的 Y 坐标会导致修改错误

> ID：16222757
> 
> 赞同：2
> 
> 时间：2013-04-25T19:05:22.663
> 
> 标签：c#

当我从列表中访问点时，我在设置点的 Y 坐标时遇到了一些问题。

例如，这有效。

```
System.Windows.Point test = new System.Windows.Point(6,5);
test.Y = 6; 
```

但是，如果我有一个点列表并且我通过列表访问一个点来设置 Y 坐标，我会收到一个错误。

```
List<System.Windows.Point> bfunction = new List<System.Windows.Point>();
bfunction.Add(new System.Windows.Point(0, 1));
bfunction[0].Y = 6; 
```

bfunction[0] 带有下划线，并给我一个错误“无法修改 'System.Collections.Generic.List.this[int]' 的返回值，因为它不是变量。”

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T19:10:16.977

基本上，编译器会阻止你犯错。当您访问时`bfunction[0]`，将返回该点的*副本*。`Point`不幸的是（IMO）是一个可变结构。因此，如果编译器允许您更改副本，那么该副本将被丢弃，并且该语句将毫无意义。相反，您需要使用一个变量来获取副本，在此处进行更改，然后将其放回列表中：

```
Point point = bfunction[0];
point.Y = 6;
bfunction[0] = point; 
```

如果是引用类型，这将不是必需的，如果是*不可变*值类型`Point`，您将没有机会犯错误。您仍然需要单独获取和设置，但它会是这样的：`Point`

 *```
bfunction[0] = bfunction[0].WithY(6); 
```

... where`WithY`将返回一个与原始值`Point`相同`X`但指定的值`Y`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-19T03:22:03.380

我也遇到了同样的问题，谢谢你的回复。

这是我的解决方案：

```
if (reset == false && run == true)

{
  for ( int i = 0;i < locations.Count;i++)

  {
    double stepX = rnd.Next(-1, 2) * 5 * rnd.NextDouble();
    double stepY = rnd.Next(-1, 2) * 5 * rnd.NextDouble();
    double stepZ = rnd.Next(-1, 2) * 5 * rnd.NextDouble();
    Vector3d transform = new Vector3d(stepX, stepY, stepZ);

    locations[i] += transform;

    // Constrain points to boundary conditions

    Point3d ptx = locations[i]; // make temp variable to hold all points
    ptx.X = CV.Constrain(ptx.X, 0, bX - 1); // access X coordinates and modify them
    locations[i] = ptx; // assign new X coordinates to points in List

    Point3d pty = locations[i];
    pty.Y = CV.Constrain(pty.Y, 0, bY - 1);
    locations[i] = pty;

    Point3d ptz = locations[i];
    ptz.Z = CV.Constrain(ptz.Z, 0, bZ - 1);
    locations[i] = ptz;

    Component.ExpireSolution(true);

  }

} 
```*

# wordpress - 防止网站被抓取

> ID：16222759
> 
> 赞同：4
> 
> 时间：2013-04-25T19:05:23.180
> 
> 标签：wordpress, web-scraping

[在http://www.vibrantneo.org](http://www.vibrantneo.org)上有一个 wordpress 网站，目前正在 [http://vibrantneo.123productpages.com/上进行](http://vibrantneo.123productpages.com/) **克隆**。非常奇怪的是，这个特定的域 ( [http://www.123productpages.com](http://www.123productpages.com) ) 似乎对**很多**内容都这样做了，但网络上却没有任何投诉。

未选择此服务。这是在未经同意的情况下完成的。我检查了 Firebug，没有提到引用该站点的原始服务器。这是一个恶意网站吗？为什么没有讨论这种影响他人的“服务”？

*** 更新 *** 事实证明这 123productpages 实际上是在以某种方式引用主机上的[http://www.vibrantneo.org](http://www.vibrantneo.org)的实际文件。例如：将 wp-config 更改为无效凭据会导致两个站点都关闭。

可能是某种木马。关于这个域及其实践如何没有被更多公开仍然令人困惑。希望这篇文章能在我指出失败点的同时找到遇到同样问题的人。

*** 更新 #2 *** 所以看起来它不像我想象的那么恶意。虽然还是很不道德。看起来就像提取内容并更改对其域的所有引用一样简单。所有内容仍托管在真实服务器上。

例如：[http](http://blah.123productpages.com) : //blah.123productpages.com 将镜像 www.blah.com。当然，他们似乎必须“设置”那个特定的域。

我目前的修复包括添加一个简单的 js 片段来检查伪加密域，看看它是否是正确的域，如果不是则重定向。

以下是 blah.com 的示例。`domain`只是域，blah.com 由简单的 123 分隔（当然可以生成更复杂的密钥）。

```
<script type="text/javascript">
    var u = top.location.toString();
    var domain = 'b123l123a123h123.123c123o123o123m'.toString();
    var domain_decrypted = domain.replace(/123/gi, '');

    if (u.indexOf(domain_decrypted) == -1) {
        top.location = 'http://' + domain_decrypted;
    }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:07:43.740

如果您以公开消费的方式公开内容，则可能会被抓取。您可以花时间寻找看起来像是来自抓取工具的流量，然后阻止该 IP，但这是一场乏味的猫捉老鼠游戏。

我的建议是接受这是将内容放到网络上并继续前进的现实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:15:19.090

也许您可以向 123productpages.com 发送传真，禁止他们复制您的内容？

以下是根据 whois 的联系信息：

> WhoIs 检查 123productpages.com ：
> 
> =-=-=-=
> 
> 注册方式：DomainPeople, Inc.
> 
> 域名：123productpages.com
> 
> 注册人联系人： WhoisProtector Inc. WhoisProtector 123productpages.com () 传真： 100 N Riverside, Suite 800 Chicago, IL 60606 US
> 
> 管理联系人： WhoisProtector Inc. WhoisProtector 123productpages.com (123productpages.com@WhoisProtector.com)
> +1.3129947654 传真： 100 N Riverside, Suite 800 Chicago, IL 60606 US
> 
> 技术联系人： WhoisProtector Inc. WhoisProtector 123productpages.com (123productpages.com@WhoisProtector.com)
> +1.3129947654 传真： 100 N Riverside, Suite 800 Chicago, IL 60606 US
> 
> 状态：锁定
> 
> 名称服务器：ns1.publishergateway.net ns2.publishergateway.net 创建日期：2009 年 6 月 28 日 18:47:26 到期日期：2013 年 6 月 28 日 18:47:00

# http - 突变应该总是使用 POST 吗？

> ID：16222763
> 
> 赞同：0
> 
> 时间：2013-04-25T19:05:43.367
> 
> 标签：http, post, get, xss, http-method

从哲学上讲，我习惯于总是对不改变状态的 HTTP 请求使用 GET，而对改变状态的请求使用 POST。然而，最近我在这方面遇到了一些困难，这导致我做出了例外。我很好奇使用错误的 HTTP 动词是否有任何非哲学上的缺点，例如跨站点攻击等安全问题。

### 例外 #1

我想触发下载动态打包到存档中的请求文件列表。但是，文件列表可能会变得如此之大，以至于当在 URL 中编码为查询字符串参数时，它们超出了 Internet Explorer 中的 url 长度限制。为了解决这个问题，我最终通过 POST 触发了下载。

### 例外 #2

有一个按钮始终显示，无论您是否登录，但它只能在您登录时改变状态。如果您在未登录时按下它，您将被带到登录页面一个查询字符串参数，指示您接下来打算去的地方。当您登录时，它会将您重定向到那里以完成您的操作。但是，重定向只能生成 GET，不能生成 POST。所以我们允许 GET 在这种情况下改变状态。

这些异常是否有任何漏洞或缺点？这些是否允许通过检查引用标头无法防止的任何跨站点请求伪造场景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T15:34:24.317

对主题问题的回答：是

例外 #1：GET 请求可以有正文。您不必将所有内容都放在 URL 中

例外 #2：更改表单以在未登录时使用 GET 并在登录时使用 POST。

不推荐使用referer。有各种各样的变通方法，一些公司软件出于隐私考虑将其剥离。我强烈推荐一种基于令牌的 CSRF 缓解方法。

# android - 如何在我的设备上获取 logcat 以显示来自所有进程的日志

> ID：16222766
> 
> 赞同：10
> 
> 时间：2013-04-25T19:06:06.967
> 
> 标签：android, logcat

我正在尝试编写一个读取我设备上所有日志的应用程序。我有一个客户端/服务架构，我看到来自客户端和服务进程的日志消息，但我没有看到来自手机上任何其他应用程序的任何消息（我确实看到使用桌面 logcat 的其他消息）。

我需要root吗？

# 代码片段

### 显现

```
<uses-permission android:name="android.permission.READ_LOGS" /> 
```

### 日志阅读器

```
Runtime.getRuntime().exec("logcat -c").waitFor();

Process process = Runtime.getRuntime().exec("logcat -v long *:*");
BufferedReader reader = 
    new BufferedReader(new InputStreamReader(process.getInputStream()));
while (true) {
    String nextLine = reader.readLine();
    if (!nextLine.contains("LogWatcher-D")) {
        Log.w("LogWatcher-D", "See: " + nextLine);
    }

    // Process line
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-25T19:15:14.730

在 Android 4.1+ 上，您只能访问由您的进程记录的日志消息，除非您拥有该`READ_LOGS`权限。该权限要求您的应用使用与设备固件签名相同的签名密钥进行签名，或者您的应用安装在系统分区上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-15T19:12:28.673

要以编程方式从其他应用程序读取日志，您需要在所有 apk 的清单文件中分配相同的 android:sharedUserId。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-05T02:51:26.407

还有另一种方法可以在没有 root 的情况下访问所有应用程序的所有日志。它需要启用远程调试。看看开源的[无根 Logcat 应用程序](https://github.com/tananaev/rootless-logcat)。

# c# - 转换为添加 Razor (v4) MVC 的表单应用程序不会在共享文件夹中查找布局

> ID：16222769
> 
> 赞同：0
> 
> 时间：2013-04-25T19:06:09.320
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, entity-framework-5

我正在转换基于表单的应用程序以添加一些 MVC 4 视图页面。

我已经能够让页面正常工作，但是当我创建视图时，它永远不会在我的 Views/Shared 文件夹中查看，并且要求我将共享页面放在同一个视图文件夹中，而不是默认为共享布局（如果未指定）。

MVC4 中的路由信息​​优先级存储在哪里，所以我将其配置为首先查看共享文件夹？在一个稍微相关的问题中，是否有任何方法可以在右键单击 Controllers 文件夹和向导以显示脚手架视图时显示添加控制器向导选项？（例如见下图的添加向导）

![在此处输入图像描述](https://i.stack.imgur.com/ubUNK.png) 更新：经过一段令人沮丧的时间后，我已将文件添加到错误消息所需的路径中，但我仍然收到错误消息。似乎路由正在工作，因为当我返回一个字符串时，路由会找到并显示它。当我使用 ActionResult 并且由于某种原因找不到“关联”文件时，问题似乎发生了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:13:41.783

在您`_ViewStart.cshtml`文件`Views`夹中的文件中，您应该具有以下内容：

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

这就是告诉它在哪里寻找布局的原因。

# c++ - QThread - 它的问题（初学者）

> ID：16222776
> 
> 赞同：1
> 
> 时间：2013-04-25T19:06:23.183
> 
> 标签：c++, qt

我尝试使用 QThread，但我做不到 :( 我的示例线程：

```
#include "worker.h"
#include "mainwindow.h"
#include <QDebug>
Worker::Worker() {}

Worker::~Worker() {
    qDebug() << "Worker ends.";
}

void Worker::run() {
    qDebug() << "Worker start.";
    sleep(2);
    emit finished();
} 
```

和代码 on_btnStart_clicked()：

```
Worker *worker = new Worker;
QThread *workerThread = new QThread(this);
connect(workerThread, SIGNAL(started()), worker, SLOT(start()));
connect(workerThread, SIGNAL(finished()), worker, SLOT(quit()));
worker->moveToThread(workerThread);
workerThread->start(); 
```

工人开始，但永远不会结束（如果我关闭应用程序，我会得到`QThread: Destroyed while thread is still running`。另一个问题 - 我如何在线程和我的应用程序之间传输数据？我想将 QThread 用于 QLabel（例如：计时器）。我找不到任何好的教程我可以毫无问题地编译。任何人都可以帮助我？
而且，如果我可以问，我如何为表单启动像 onCreate() 这样的线程？我想创建简单的计时器来计算应用程序运行的时间。
问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T13:04:57.740

您应该通读[这篇](http://woboq.com/blog/qthread-you-were-not-doing-so-wrong.html)文章。

> 查看 Qt 4.8 QThread 文档的第一个代码示例。它有许多样板代码，只是为了在一个线程中运行一些代码。甚至还有一个漏洞：QThread 永远不会退出并被销毁。

提交的补丁已被接受，但他转发给您的 href 链接仍然显示旧代码。

[此补丁片段](https://codereview.qt-project.org/#patch,sidebyside,45271,5,src/corelib/doc/snippets/code/src_corelib_thread_qthread.cpp)差异显示右侧的有效方法。

它显示了两种方法，子类化`QThread`和使用`QObject->Worker` 您可以将其用作示例来构建您的代码。正如他在博客中提到的那样，应用适合您要求的方法。

# html - CSS垂直div填充但不溢出？

> ID：16222777
> 
> 赞同：0
> 
> 时间：2013-04-25T19:06:24.853
> 
> 标签：html, css

```
<div id="main" style="overflow:hidden;height:80%;>
    <div id="header">
    </div>
    <div id="content" style="overflow:hidden;">
    </div>
</div> 
```

我在主 div 中有两个 div，我希望内容 div 填满主 div 的其余部分，但如果内容填满内容 div 超过其填充高度，我不希望内容 div 增长任何更高。

我见过其他一些类似这样的 stackoverflow 问题，但没有一个答案对我有用。试过：[让DIV垂直填充页面的其余部分？](https://stackoverflow.com/questions/2898221/make-div-fill-remainder-of-page-vertically),[获取 CSS Div 以填充可用高度](https://stackoverflow.com/questions/2297453/get-css-div-to-fill-available-height), 以及[如何使 DIV 填充浏览器窗口的剩余垂直空间？](https://stackoverflow.com/questions/4980308/how-to-make-a-div-fill-the-remaining-vertical-space-of-the-browser-window)

我认为主要区别在于我需要内容 div 填充，但也不会溢出。这可能只用css吗？

更新：我一直在尝试不同的代码，这就是我想要的：http: [//jsfiddle.net/zXnnp/](http://jsfiddle.net/zXnnp/)。但由于某种原因，我无法在我的本地主机上复制它。然后我发现这是因为我在使用[http://jamesflorentino.github.io/nanoScrollerJS/](http://jamesflorentino.github.io/nanoScrollerJS/)并且由于某种原因 class="nano" 在内容 div 上搞砸了。还在调查哪里出了问题。

更新 2：class="nano" 有高度：100%；所以我只是用 height:auto; 覆盖它 现在一切都很好。感谢所有的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:26:21.660

我不确定你在追求什么，但也许这会让你接近：

[http://jsfiddle.net/isherwood/TCVvn/1](http://jsfiddle.net/isherwood/TCVvn/1)

```
#main {
    height: 80%;
    width: 80%;
    position: absolute;
}
#header {
    height: 50px;
    position: relative;
    top: 0;
}
#content {
    position: absolute;
    top: 70px;
    right: 5px;
    left: 5px;
    bottom: 5px;
    overflow: auto;
}

<div id="main">
    <div id="header">Header</div>
    <div id="content">Content</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:19:28.343

您是否尝试过使用 CSS 属性 max-height？这是来自 CSS 2，不应该有任何兼容性问题。

[http://www.w3schools.com/cssref/pr_dim_max-height.asp](http://www.w3schools.com/cssref/pr_dim_max-height.asp)

如果您发布一些可编辑的代码，那么我们可以使用它并帮助您找到使其工作的一些方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:34:44.657

你可以这样做：

```
/* stretch the body to full height */
body, html {
    height: 100%;
}

/* stretching the containers */
#header {
     height: 50px; /* just a random number i chose, not sure what you wanted here */   
}
#content {
    height: 100%;
    margin-bottom: -50px; /* same as the header height, but negative */
} 
```

你可以在这里看到代码：http: [//jsfiddle.net/mRK24/](http://jsfiddle.net/mRK24/)

神奇之处在于首先将您的身体拉伸到视口高度。然后#main 将变为视口高度的 80%。接下来，您给标题一些固定的高度，并将内容设置为 100% 的高度，底部边距与标题的高度相同。

请注意，由于`overflow:hidden;`. 奇怪，因为您不知道用户视口的高度，所以您无法知道多少。也许您应该考虑将内容的溢出设置为滚动，因为我无法想象您会希望部分内容不可见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T19:45:23.290

继续`overflow:hidden`，`<div id="#main">`让内容 div 尽可能高，没有溢出限制。`#main`如果它太高`#content`而无法放入`#main`.

# vb.net - 程序安装后创建 CSV 文件 - VB.NET

> ID：16222782
> 
> 赞同：0
> 
> 时间：2013-04-25T19:06:39.267
> 
> 标签：vb.net, csv, installation

我正在尝试在我的 VB.NET (WPF) 程序中编写一个新的 CSV 文件。当我在 Visual Studio 2012 中运行程序时，一切正常。但是，当我使用 InstallShield 创建安装文件并部署程序时，csv 文件不会出现在我期望的位置。我似乎没有收到错误。

我把文件放在这里：

```
cGetOutputFileName = System.AppDomain.CurrentDomain.BaseDirectory + "Experiments\" + cFileName
Dim Writer As StreamWriter = File.AppendText(cGetOutputFileName() + ".csv") 
```

我在安装程序项目助手的基本目录下创建了一个名为 Experiments 的文件夹，但它没有被填充。

# javascript - 如何attr类

> ID：16222785
> 
> 赞同：0
> 
> 时间：2013-04-25T19:06:47.527
> 
> 标签：javascript, jquery, target

我有一段有人为我写的代码，如下所示：

```
var $me = $('.me'),
        crazyNumber = 99999999,
        allOfYou = [
            { 
                elements: $me.parentsUntil('.you'),
                target: $me.parentsUntil('.you').parent()
            },
            { 
                elements: $me.nextUntil('.you'),
                target: $me.nextUntil('.you').andSelf().filter(':last').next()
            },
            { 
                elements: $me.prevUntil('.you'),
                target: $me.prevUntil('.you').andSelf().filter(':last').prev()
            }
        ],
        sorted = allOfYou.sort(function (objA, objB) {
            var a = objA.elements.length + 1 || crazyNumber,
                b = objB.elements.length + 1 || crazyNumber;
            return a - b;
        });

    $('#who').html('you ' + sorted[0].target.data('verb') + ' me'); 
```

最后，我想`div#who`从我那里得到 html，但我不明白代码，我试过了：`target.data('verb')`

```
$('#who').html(sorted[0].target.data.class);
$('#who').html(sorted[0].attr('class'));
$('#who').html(sorted[0] + $(this).attr('class')); 
```

还有许多其他事情，似乎没有任何效果（我不熟悉 Jquery 目标..）

[JsFiddle 的示例](http://jsfiddle.net/FyqsW/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:10:54.490

可能，你正在寻找这个 -

```
$('#who').html(sorted[0].target.attr('class')); 
```

[http://jsfiddle.net/mohammadAdil/FyqsW/3/](http://jsfiddle.net/mohammadAdil/FyqsW/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:11:04.560

jQuery 对象被保存到目标中。

```
sorted[0].target.attr("class"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T19:12:11.607

你在附近，替换你的代码：

```
$('#who').html(sorted[0].attr('class')); 
```

有了这个：

```
$('#who').html(sorted[0].target.attr('class')); 
```

# javascript - 使用 Javascript document.write 构建字符串

> ID：16222786
> 
> 赞同：0
> 
> 时间：2013-04-25T19:06:50.467
> 
> 标签：javascript, string, concatenation, document.write

我正在尝试从 javascript 编写一个 div 元素。我希望使用 document.write() 将行编写如下：

```
<div class="Square15px" onmouseover="changeColor('boxid')"></div> 
```

我调用编写 div 元素的函数：

```
<script type="text/javascript">
      colorPicker("box1");
 </script> 
```

我尝试了 document.write() 方法，以几种不同的方式构建字符串，例如：

```
function colorPicker(box) {
    var box = document.getElementById(box);
    var boxid = box.id;
    var AquaStr1 = '<div class="AquaSquare15px" onmouseover="changeColor("';
    var AquaStr2 = '")></div>';

    var AquaString = AquaStr1.concat(boxid, AquaStr2);
    document.writeln(AquaString);
} 
```

我还尝试使用 + 作为 concat 运算符以多种不同的方式拆分字符串。字符串在 boxid 的末尾构建不正确。无论我如何编写代码块，我都会得到相同的结果：

```
<div class="AquaSquare15px" onmouseover="changeColor(" box1?)=""/> 
```

我似乎在这里看不到我的错误，我已经查看了我能找到的所有帮助。除了引号和 box1 之间的空格外，一切都是正确的，直到出现神秘的问号。我查看了 IE9 开发人员工具 (F12) 的结果。我不是一个经验丰富的程序员，所以我怀疑我在某种程度上是错误的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:22:13.420

正如评论部分指出的那样：你不应该使用`document.write`. 但是，您的字符串连接出错了。试试这个：

```
function colorPicker(box) {
    var boxid = document.getElementById(box).id;
    var aquaStr = '<div class="AquaSquare15px" onmouseover="changeColor(\''+boxid+'\')"></div>';

    document.writeln(aquaStr);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:17:12.880

我想问题可能是引号。应该：

```
var AquaStr1 = '<div class="AquaSquare15px" onmouseover="changeColor(\'';
var AquaStr2 = '\')"></div>'; 
```

此外，您不应该用新的声明覆盖您的函数参数：

```
function colorPicker(box) {
    var box = document.getElementById(box); 
```

而是使用另一个名称，例如

```
function colorPicker(boxid) {
    var box = document.getElementById(boxid); 
```

话虽如此，通过 id 获取元素并在读取它之后读取它的 id 并没有多大意义：

```
var box = document.getElementById(box);
var boxid = box.id; 
```

您已经将 ID 作为函数参数。

**建议结果：**

```
function colorPicker(boxid) {
    var AquaStr1 = '<div class="AquaSquare15px" onmouseover="changeColor(\'';
    var AquaStr2 = '\')"></div>';

    var AquaString = AquaStr1.concat(boxid, AquaStr2);
    document.writeln(AquaString);
} 
```

正如其他人已经建议的那样，您不应该使用`document.write`. 例如，使用 jQuery 会看起来像这样：

```
$('body').append(AquaString); 
```

[这是一个演示。](http://jsfiddle.net/5bgEn/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:21:06.220

您在属性值中使用引号而没有对它们进行 HTML 编码。此外，您缺少属性值的结束引号，因此结束标记和其他一些代码将在属性内结束。

您可以转义引号：

```
var AquaStr1 = '<div class="AquaSquare15px" onmouseover="changeColor(&quot;';
var AquaStr2 = '&quot;)"></div>'; 
```

或者您可以改用撇号，但是您需要在字符串中转义它们：

```
var AquaStr1 = '<div class="AquaSquare15px" onmouseover="changeColor(\'';
var AquaStr2 = '\')"></div>'; 
```

# qt - 按 QML ListView 中的角色对 QAbstractListModel 派生模型进行排序

> ID：16222797
> 
> 赞同：8
> 
> 时间：2013-04-25T19:07:19.030
> 
> 标签：qt, sorting, qml, qabstractlistmodel, qsortfilterproxymodel

我创建了一个基于底层 QHash 的 QAbstractListModel 派生模型。由于我需要在 QML 中使用模型，因此我无法使用 Qt 小部件和视图集成的排序功能。

我尝试使用 QSortFilterProxyModel 但它似乎不适用于我的模型。让模型在 QML 中正常工作还不够乏味，现在我被困在排序上。

任何建议表示赞赏。

以下是模型来源：

```
typedef QHash<QString, uint> Data;

class NewModel : public QAbstractListModel {
    Q_OBJECT
    Q_PROPERTY(int count READ count NOTIFY countChanged)

public:
    NewModel(QObject * parent = 0) : QAbstractListModel(parent) {}

    enum Roles {WordRole = Qt::UserRole, CountRole};

    QHash<int, QByteArray> roleNames() const {
        QHash<int, QByteArray> roles;
        roles[WordRole] = "word";
        roles[CountRole] = "count";
        return roles;
    }

    QVariant data(const QModelIndex &index, int role = Qt::DisplayRole) const {
        if (index.row() < 0 || index.row() >= m_data.size()) return QVariant();
        Data::const_iterator iter = m_data.constBegin() + index.row();

        switch (role) {
        case WordRole:
            return iter.key();
        case CountRole:
            return iter.value();
        } return QVariant();
    }

    int rowCount(const QModelIndex &parent) const {
        Q_UNUSED(parent)
        return m_data.size();
    }

    int count() const { return m_data.size(); }

public slots:
    void append(const QString &word) {
        bool alreadyThere = m_data.contains(word);
        if (alreadyThere) m_data[word]++;
        else m_data.insert(word, 1);

        Data::const_iterator iter = m_data.find(word);
        uint position = delta(iter);

        if (alreadyThere) {
            QModelIndex index = createIndex(position, 0);
            emit dataChanged(index, index);
        } else {
            beginInsertRows(QModelIndex(), position, position);
            endInsertRows();
            emit countChanged();
        }
    }

    void prepend(const QString &word) {
        if (m_data.contains(word)) m_data[word]++;
        else m_data.insert(word, 1);
    }

signals:
    void countChanged();

private:
    uint delta(Data::const_iterator i) {
        uint d = 0;
        while (i != m_data.constBegin()) { ++d; --i; }
        return d;
    }

    Data m_data;
}; 
```

这是“尝试”对其进行排序：

```
NewModel model;
QAbstractItemModel * pm = qobject_cast<QAbstractItemModel *>(&model);
QSortFilterProxyModel proxy;
proxy.setSourceModel(pm);
proxy.setSortRole(NewModel::WordRole);
proxy.setDynamicSortFilter(true); 
```

唉，代理作为模型工作，但它不对条目进行排序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-21T08:24:05.150

如果启用 QSortFilterProxyModel::setDynamicSortFilter(true)，则需要调用一次 QSortFilterProxyModel::sort(...) 函数，让代理知道采用哪种方式排序。

这样，每当模型更新时，代理都会自动再次对所有内容进行排序。

```
proxy.setDynamicSortFilter(true);
proxy.sort(0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T20:22:06.577

首先，不需要`qobject_cast<QAbstractItemModel *>`向下转换——它`NewModel`是 the 的派生类，`QAbstractItemModel`并且多态性原则说，您可以在父类适用的任何地方使用子类。

其次，您的`prepend`方法不使用`beginInsertRows`and `endInsertRows`。这违反了 MVC API。如果您以这种方式使用它，您将在附加的视图和代理模型中获得数据损坏。

第三，你没有提到你是否真的使用你的代理模型作为附加视图的模型:)。

最后，您将其用作插入`QHash`数据的后备存储。`QHash::iterator`这是一个非常有趣的解决方案，但有些东西是行不通的——插入或删除会导致哈希表增长/缩小，这意味着更改您通过模型索引发布的所有数据。这是行不通的。`QHash`当您需要稳定的订单时不要使用。您的方法的`O(n)`复杂性`delta`应被解释为警告；这是错误的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-05T07:33:06.007

看看[https://github.com/oKcerG/SortFilterProxyModel](https://github.com/oKcerG/SortFilterProxyModel)。这个项目很好地向 QML 公开了 QSortFilterProxyModel 的功能。我在不同的项目中使用了它，它确实有效。但是，如果您想实施自己的解决方案，那么您的想法就很重要了。

# iphone - 使用标签控制多个按钮

> ID：16222802
> 
> 赞同：0
> 
> 时间：2013-04-25T19:07:31.000
> 
> 标签：iphone, ios

我的应用程序中有 28 个按钮。我需要在一个函数中控制它们。我要做的就是让所有按钮都可见。我给按钮贴了标签。我用for循环尝试过，但我做不到，我该如何解决这个问题？

```
(IBAction)btnAction:(id)sender{

UIButton *btnPressed = (UIButton *)sender;

NSUInteger i=btnPressed.tag;

for(i=0; i<29; i++)
{
    btnPressed.hidden=NO;

} 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T19:12:57.500

使用 IBOutletCollection 代替标签。所以现在你有一个*NSArray*指向*所有*的按钮。现在只需循环浏览该 NSArray。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T05:16:46.710

使用 IBOutletCollection。请参阅以下链接以获取答案。

[IBOutletCollection](http://www.bobmccune.com/2011/01/31/using-ios-4s-iboutletcollection/) 和

[IBOutletCollection (UIbutton)](https://stackoverflow.com/questions/9159567/iboutletcollection-uibutton)

[UIButtons 的 IBOutletCollection - 更改按钮的选定状态](https://stackoverflow.com/questions/10888422/iboutletcollection-of-uibuttons-changing-selected-state-of-buttons)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:13:49.103

您可以创建一个 IBAction 方法，检查标签值，然后做您想做的事

```
- (IBAction)btnAction:(id)sender{
     UIButton *btnPressed = (UIBUtton *)sender;

    // Check button tags and write code accordingly //
  } 
```

# jquery - 在没有隐藏溢出的情况下，transitionend 事件在 FireFox 中没有持续触发

> ID：16222805
> 
> 赞同：4
> 
> 时间：2013-04-25T19:07:44.660
> 
> 标签：jquery, html, css, firefox, css-transitions

我在 Firefox (v20.0.1) 上遇到了一个问题，它不会始终触发 transitionend 事件。如果我将`overflow: hidden`样式保留在动画 div 上，则效果很好。

我创建了一个示例来说明： [http ://codepen.io/harryfino/full/jphis](http://codepen.io/harryfino/full/jphis)

此示例在 Chrome 和 IE10 中运行良好，但在 Firefox 中，您不会看到第二次单击时触发的 transitionend 事件。然后在第三次单击时，它将触发两次，并且两个元素都将被隐藏。如果您注释掉该`page.removeClass('is-animating')`行，它会正确触发事件。

关于删除的背景故事`overflow: hidden`：实际代码中的 div 溢出容器并且无法隐藏。

我想知道为什么它没有在第二次点击时触发事件，作为奖励，为什么`overflow: hidden`会影响它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-23T07:30:36.140

正如@Orchestrator 建议的那样，这有望解决您的问题。

这是Firefox中的常见错误。我认为这是因为同时添加了两个类。解决方案非常简单 - 只需将 addClass 方法包装在 timeout 中：

```
setTimeout( function(){
 if (direction === 'in') {
   container.addClass('is-drilled-in');
 } else {
   container.removeClass('is-drilled-in');
 }
}, 50); 
```

*正如 Nikola Boychev @ codersclan 所回答的那样*

# java - 如何将可写表复制到 JExcel 中的不同工作簿？

> ID：16222806
> 
> 赞同：1
> 
> 时间：2013-04-25T19:07:47.147
> 
> 标签：java, jxl

我正在尝试通过某种方法创建一个可写表，然后将其包含到另一个由调用者上下文创建的工作簿中，但在导入可写表时我似乎没有太多选项。

这就是我想要做的。

```
MainWorkbook wb = Workbook.createWorkbook(new File("file.xls"));
Sheet resultSheet = SheetCreator(/* some args */); //SheetCreator returns a writablesheet 
```

但是当我尝试使用 Workbook.importsheet 方法将 resultSheet 复制到 wb 时，它会返回此错误。

```
Message: jxl.write.biff.WritableSheetImpl cannot be cast to jxl.read.biff.SheetImpl 
```

好像我没有导入可写表的选项？？请照亮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:15:56.347

您正在尝试将 WriteableSheet 转换为工作表。我会采取保存工作表并将其重新加载为普通工作表的方法。

# java - 在 OrientDB 的 shortestPath() 中获取访问的边

> ID：16222813
> 
> 赞同：6
> 
> 时间：2013-04-25T19:07:58.623
> 
> 标签：java, graph-theory, orientdb, graph-databases

我是 OrientDB 的新手，我想使用新的 shortestPath() 方法来获取两个顶点之间的边。

我要做的是：

```
OSQLSynchQuery<T> sql = new OSQLSynchQuery<T>("select shortestpath(" + firstVertex + ", " + secondVertex + ").asString()");

List<ODocument> execute = db.query(sql); 
```

而我只能得到的是`[#-2:1{shortestpath:[#8:1, #8:3]} v0]`。

所以，我想知道如何从这个输出或我没有得到的输出中提取边缘（好吧，在这种情况下只有一个边缘，因为这两个顶点是直接连接的）`asString()`：

```
[#-2:1{shortestpath:[2]} v0] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-28T12:45:43.180

对我来说，dante 或 Lvca 解释它的方式不起作用：

```
select flatten(shortestPath) from (select shortestPath(#12:0,#12:2,'BOTH') 
```

这会导致控制台出错或 OrientDB Studio 中没有返回记录。

相反，当我为函数结果使用别名时，它终于起作用了。所以也许试试这个表格：

```
select flatten(sp) from (select shortestPath(#12:0,#15:2,'BOTH') as sp) 
```

（注意。我使用的是 v1.7.4）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T21:39:09.863

OrientDB 有集合和地图类型。要使集合成为结果集（您感兴趣的内容），您必须将其展平：

```
select flatten( shortestpath(" + firstVertex + ", " + secondVertex + ") ) 
```

要获得边缘输出边缘，有很多方法。下面是其中的一些：

```
select vertices.out from (
   select flatten( shortestpath(" + firstVertex + ", " + secondVertex + ") ) as vertices
) 
```

或者还有：

```
select flatten( shortestpath(" + firstVertex + ", " + secondVertex + ").out ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T15:53:22.587

尝试

```
select expand(shortestPath) from (select shortestPath(" + firstVertex + ", " + secondVertex + ")) 
```

您将收到顶点。

# php - php `preg_replace` only replace once time?

> ID：16222815
> 
> 赞同：1
> 
> 时间：2013-04-25T19:08:03.550
> 
> 标签：php, preg-replace

`preg_replace` only replace once time? i am tring to remoe unwanted words from a sentence, why in this situation, "an" hasn't been replaced?

[http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)

in `modifier` part, what should i set?

```
$items = "This is an apple... ";
echo preg_replace('/ an | is /i',' ',$items);
//This an apple... 
```

I need return "This apple...", thanx.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:10:27.783

Put it in parenthesises and surround it with word boundaries (`\b`):

```
$items = "This is an apple... ";
echo preg_replace('/\b(an|is)\b/i', ' ', $items);
//This     apple 
```

You can remove extra spaces, by using the following:

```
$items = "This is an apple... ";
echo trim(preg_replace(array('/\b(an|is)\b/i', '/[ ]+/'), ' ', $items));
//                                              ^^^^^^
//This apple 
```

Another example with the same code:

```
$items = "An apple, this is";
echo trim(preg_replace(array('/\b(an|is)\b/i', '/[ ]+/'), ' ', $items));
//apple, this 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:54:45.393

As commented by `@Mark B` your regex is not giving expected result because first replacement is happening for `[space]is[space]` and that removes the trailing space from the the next match `[space]an[space]` and hence you get `This an apple...`.

Here is the correct way to use preg_replace in your case using lookahead and lookbehind:

```
$items = "This is an apple... ";
echo '[' . preg_replace('/ *(?<= )(an|is)(?= ) */i', ' ', $items) . "]\n";
// OUTPUT: [This  apple... ] 
```

# css - 在中间/中心对齐 div 内容？

> ID：16222821
> 
> 赞同：0
> 
> 时间：2013-04-25T19:08:28.110
> 
> 标签：css, html

嗨，有人可以帮我解决这个问题，因为我已经尝试了一切。

我正在尝试对齐名为“包装器”的 div 内的中心内容。

无论我做什么内容都不会对齐页面的中心。希望有人可以帮助我谢谢。

CSS：

```
body {
        font-family:Arial, Helvetica, sans-serif; 
        font-size:medium; 
        color:#3f3f3f; 
        background:#26265d; 
        padding:0; 
        margin:0;
        text-align:center;
    }

.wrapper {width:100%; overflow:hidden; margin:auto; display:block; text-align:center;
     position:relative; margin-left:auto;
margin-right:auto;

} 
```

html:

```
<div class="wrapper">
<?php include("includes/mod_home/mod_newest.php"); ?>
</div> 
```

php页面：

```
<?php
        $newest_set = get_newest_member();
        $newest_count = mysql_num_rows($newest_set);
        while ($newest = mysql_fetch_array($newest_set)) {
        $strn = "".$newest['display_name']."";
        $max = 13;
        if(strlen($strn) > $max) {
        $strn = substr($strn, 0, $max) . '...'; } 
$photo = "../data/photos/{$newest['id']}/_default.jpg";

if (!file_exists($photo)) {
    $photo = "../data/photos/0/_default.jpg";
}

            echo"
            <div class=\"mod_newest_image\">
            <a href=\"profile.php?id={$newest['id']}\"><img width=95px src=\"".$photo."\"/></a>

            </div>";

    }
    ?>

<style>

.new_text{
    color:#373775;
    position:absolute;
}
.mod_newest_image img{
    border:2px solid #6f6f6f;
    -moz-box-shadow: 0px 0px 5px #CCC;
    -webkit-box-shadow: 0px 0px 5px #CCC;
    box-shadow: 0px 0px 5px #CCC;
    width:95px;
    height:120px;
    display:block;
 float:left;
 position:relative;
 margin:3px;

 }
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:14:35.820

如果您尝试使用 margin: 0 auto; 将其居中，则您的包装器的宽度不能为 100% 您需要为包装器提供小于 100% 的值才能使其正常工作。

```
.wrapper {width:1000px; overflow:hidden; margin: 0 auto; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:19:41.017

`wrapper need size`，不需要`position:relative`；

如果您的图像大小与包装不同。您可能需要添加`margin: 0 auto;`以对齐包装器内部的中心

# android - 设置最小和最大缩放级别

> ID：16222825
> 
> 赞同：2
> 
> 时间：2013-04-25T19:08:57.123
> 
> 标签：android, zooming, osmdroid

使用 OSMDroid API 的缩放界面出现问题 - 似乎无法使缩放控件缩放到 18 级以上。使用 12-22 级的本地（SD 卡）自定义地图缓存。我们可以从 12 -18 放大，但不能超过。似乎没有任何方法可以设置最小或最大缩放。有人对此设置的定义有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T05:28:14.780

您需要创建一个扩展 MapView 的类，您可以通过覆盖 getMaxZoomLevel() 和 getMinZoomLevel() 来设置它，如下所示：

```
public class CustomMapView extends MapView {

/* constructors */  

@Override
public int getMaxZoomLevel() {
    return 22;
}

@Override
public int getMinZoomLevel() {
    return 12;
}

} 
```

不要忘记在布局中将 MapView 调用更改为 CustomMapView：

```
<com.yourpackage.CustomMapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    /> 
```

和活动：

```
private CustomMapView mMapView;
.
.
.
mMapView = (CustomMapView) findViewById(R.id.mapview); 
```

# vb.net - 在VB中绘制一条线而不使用Autocad的事务类

> ID：16222831
> 
> 赞同：0
> 
> 时间：2013-04-25T19:09:20.870
> 
> 标签：vb.net, autocad

我正在使用事务类画一条线

```
 Public Sub CreateLine()
    Dim acDoc As Document = Application.DocumentManager.MdiActiveDocument
    Dim acCurDb As Database = acDoc.Database
    Using acTrans As Transaction = acCurDb.TransactionManager.StartTransaction()
        Dim acBlkTbl As BlockTable
        acBlkTbl = acTrans.GetObject(acCurDb.BlockTableId, OpenMode.ForRead)
        Dim acBlkTblRec As BlockTableRecord
        acBlkTblRec = acTrans.GetObject(acBlkTbl(BlockTableRecord.ModelSpace), _
                                        OpenMode.ForWrite)
       procedure(acTrans, acBlkTblRec, 11, 3, 0, 5, 5, 0)
       acTrans.Commit()
    End Using
  End Sub
Private Sub procedure(ByVal var1 As Transaction, ByVal var2 As BlockTableRecord, ByVal                       x As Double, ByVal y As Double, ByVal z As Double, ByVal x1 As Double, ByVal y1 As Double, ByVal z1 As Double)
    Dim ac As Line = New Line(New Point3d(x, y, z), _
                                      New Point3d(x1, y1, z1))
    var2.AppendEntity(ac)
    var1.AddNewlyCreatedDBObject(ac, True)

End Sub 
```

我的任务是在不使用事务的情况下创建行，任何人都可以帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T05:40:20.493

您可以使用 ActiveX API：

```
<CommandMethod("DRAWLINE")> _
Public Sub DrawLine()
    Dim acadApp As Object
    acadApp = Application.AcadApplication
    Dim startPoint(0 To 2) As Double
    Dim endPoint(0 To 2) As Double
    startPoint(0) = 1.0 : startPoint(1) = 1.0 : startPoint(2) = 0.0
    endPoint(0) = 5.0 : endPoint(1) = 5.0 : endPoint(2) = 0.0
    acadApp.ActiveDocument.ModelSpace.AddLine(startPoint, endPoint)
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T19:21:35.873

使用`Autodesk.Autocad.Interop`and`Autodesk.Autocad.Interop.Common`引用和命名空间。

访问所需的文档`as AcadDocument`。

```
Dim Doc as AcadDocument 'and set it to the document you want
Doc.ModelSpace.AddLine(...parameters...) 
```

* * *

根据您使用的 Autocad 版本，您可以访问应用程序`as AcadApplication`。（并且从您获得的 acadapplication 实例中`Documents`）

# c# - 为什么这个 Linq-to-SQL 查询在执行 Where 子句时不强制转换对象？

> ID：16222834
> 
> 赞同：1
> 
> 时间：2013-04-25T19:09:25.560
> 
> 标签：c#, windows-phone-7, linq-to-sql

我有一个类似于如下的 Linq 查询，

```
var dataByWheels = this.Db.Cars.Cast<IVehicle>().Where(v => (v.NumWheels == 4)); 
```

`IVehicle`在这种情况下，是一个定义类必须具有`NumWheels`属性的接口。该类`Cars`类似于如下，

```
[Table]
public class Car : IVehicle
{
     [Column]
     public double Weight { get; set; }

     ...

     public int NumWheel 
     {
         get { return 4; }
     }
} 
```

所以在这种情况下，`NumWheels`属性没有存储在数据库中，但是如果转换完成，那么它应该没问题。但是引发了一个异常，

```
The member 'MyProject.IVehicle.NumWheels' has no supported translation to SQL 
```

这意味着它没有执行演员表。当我在它确实工作`ToList()`后将 a 插入链`Cast`中时，但我想这是过早地解决了查询并创建了整个表的巨大列表，并且我想避免，因为我正在使用电话。

我究竟做错了什么？

（注意我更改了名称和查询以使其更简单）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:17:47.877

发生这种情况是因为当您针对 LINQ to SQL 类发出`Where`语句时，LINQ to SQL 引擎期望您直接对数据库执行 WHERE 语句，并尝试将该语句映射到它无法执行的原始 T-SQL，`NumWheels`因为不是数据库列。

为了克服这个问题，你可以先做一个`ToList`，但要注意如果你这样做会影响性能。此代码将循环遍历整个`Cars`表并在内存中进行过滤。但是，我想不出另一种方法来实现您的目标。

```
var dataByWheels = this.Db.Cars.ToList().Where(v => (v.NumWheels == 4)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:14:14.863

问题不在于您的 LINQ，而在于您的使用上下文。这个特定的 LINQ 查询正在 Queryable 上使用，Cast 将强制它转到 DB 并拉回此时的所有结果。然后，您可以对可枚举进行强制转换并继续，但在这种情况下，它很可能不是您要寻找的。

该错误只是表明您编写了一个无法映射到 SQL 并在 SQL 服务器上执行的表达式。这是 EF 的事情，而不是 LINQ 的事情。

# ruby-on-rails-3 - ActiveRecord - NoMethodError

> ID：16222836
> 
> 赞同：0
> 
> 时间：2013-04-25T19:09:39.330
> 
> 标签：ruby-on-rails-3, activerecord

这些 AREL 查询在 Rails 3 中不起作用。有人可以帮我破译这个错误吗？

```
NoMethodError (undefined method `id' for #<ActiveRecord::Relation:0xabf6f44>):
  app/controllers/admin_controller.rb:206:in `save_user' 
```

**所有这些都会导致与上图相同的错误**

```
 @existing = Privilege.find(:first, :conditions => "b2b_user_id = #{@user.id} AND vendor_id = #{@vendor_id}")

  @existing = Privilege.find_by_sql("SELECT * FROM b2b_privileges WHERE b2b_user_id = ? AND vendor_id = ? LIMIT 1",@user.id,@vendor_id)

  @existing = Privilege.where(:b2b_user_id => @user.id, :vendor_id => @vendor_id) 
```

但是当我改变这个时：

```
@user = B2bUser.where("id = ?",params[:id]) 
```

对此：

```
@user = B2bUser.find_by_id(params[:id]) 
```

查询有效。为什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:56:45.250

使用方法“where”得到的只是一个关系，把它想象成一个仍未执行的查询，然后你必须调用一个方法来检索数据，例如：first、all、last、to_a 等

```
@user = B2bUser.where("id = ?",params[:id]) #this is just an active record relation
@user = B2bUser.where("id = ?",params[:id]).first #this is your object 
```

阅读一些关于关系的内容，它们是非常有趣的 [关系](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html)

# ruby-on-rails - has_many：通过外键？

> ID：16222838
> 
> 赞同：24
> 
> 时间：2013-04-25T19:09:46.813
> 
> 标签：ruby-on-rails, foreign-keys, associations, has-many-through

我已经阅读了有关此问题的多个问题，但尚未找到适合我情况的答案。

我有 3 个模型`Apps`：`AppsGenres`和`Genres`

以下是每个领域的相关领域：

```
Apps
application_id

AppsGenres
genre_id
application_id

Genres
genre_id 
```

这里的关键是我**没有**使用`id`这些模型中的字段。

我需要根据这些`application_id`和`genre_id`字段关联表。

这是我目前得到的，但它没有让我得到我需要的查询：

```
class Genre < ActiveRecord::Base
  has_many :apps_genres, :primary_key => :application_id, :foreign_key => :application_id
  has_many :apps, :through => :apps_genres
end

class AppsGenre < ActiveRecord::Base
  belongs_to :app, :foreign_key => :application_id
  belongs_to :genre, :foreign_key => :application_id, :primary_key => :application_id
end

class App < ActiveRecord::Base
  has_many :apps_genres, :foreign_key => :application_id, :primary_key => :application_id
  has_many :genres, :through => :apps_genres
end 
```

作为参考，这是我最终需要的查询：

```
@apps = Genre.find_by_genre_id(6000).apps

SELECT "apps".* FROM "apps" 
   INNER JOIN "apps_genres" 
      ON "apps"."application_id" = "apps_genres"."application_id" 
   WHERE "apps_genres"."genre_id" = 6000 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-25T21:08:55.967

**更新**试试这个：

```
class App < ActiveRecord::Base
  has_many :apps_genres, :foreign_key => :application_id
  has_many :genres, :through => :apps_genres
end

class AppsGenre < ActiveRecord::Base
  belongs_to :genre, :foreign_key => :genre_id, :primary_key => :genre_id
  belongs_to :app, :foreign_key => :application_id, :primary_key => :application_id
end

class Genre < ActiveRecord::Base
  has_many :apps_genres, :foreign_key => :genre_id
  has_many :apps, :through => :apps_genres
end 
```

带查询：

```
App.find(1).genres 
```

它生成：

```
SELECT `genres`.* FROM `genres` INNER JOIN `apps_genres` ON `genres`.`genre_id` = `apps_genres`.`genre_id` WHERE `apps_genres`.`application_id` = 1 
```

并查询：

```
Genre.find(1).apps 
```

生成：

```
SELECT `apps`.* FROM `apps` INNER JOIN `apps_genres` ON `apps`.`application_id` = `apps_genres`.`application_id` WHERE `apps_genres`.`genre_id` = 1 
```

# java - 如何使用 Spring Security 创建注销？

> ID：16222841
> 
> 赞同：2
> 
> 时间：2013-04-25T19:10:00.670
> 
> 标签：java, spring, spring-mvc, spring-security

我正在尝试找到一种方法来设置一个 URL，该 URL 将从系统中注销我的用户。这仅用于测试。现在我们在 spring secuirty 中使用默认登录页面

这是我的 spring-secuirty.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                        http://www.springframework.org/schema/security
                        http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <global-method-security pre-post-annotations="enabled" />

    <http use-expressions="true">
        <intercept-url access="hasRole('ROLE_VERIFIED_MEMBER')" pattern="/ask-union**" />
        <intercept-url access="hasRole('ROLE_VERIFIED_MEMBER')" pattern="/ask-welfare**" />
        <intercept-url pattern='/*' access='permitAll' />

        <form-login default-target-url="/ask-union" />

        <logout logout-success-url="/" />

        <session-management session-fixation-protection="newSession">
            <concurrency-control max-sessions="1"/>
        </session-management>

    </http>

    <authentication-manager>
        <authentication-provider>
            <user-service>
                <user name="xxxxx@aol.com.dev" password="testing" authorities="ROLE_VERIFIED_MEMBER" />
               ser-service>

        </authentication-provider>
    </authentication-manager>
</beans:beans> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:12:02.953

将此行添加到您的配置中

```
<logout logout-url="/sign-out"/> 
```

然后，如果您有指向该 URL 的链接，那么它会将您注销

（在您的注销成功配置下方添加它）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T11:44:51.650

I am a bit late on this. But answer may help others.

Use following code. logout-success-url is the URL you want take user after logging out.

```
<http auto-config="true" use-expressions="true" access-denied-page="/denied">       
    <logout invalidate-session="true" logout-success-url="/landing" delete-cookies="JSESSIONID" />
</http> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T20:15:45.187

`your-domain/projectPath/sign-out`仔细检查您正在使用的 URL -根据 SJS 的示例，绝对路径应该是。如果你的 spring-security.xml 文件的相关部分如下所示，它*应该可以*工作：

```
<http use-expressions="true">

. . .

    <logout
        logout-success-url="/"
        logout-url="/sign-out"/> 
```

如果您能够进行身份验证，则只需浏览到该路径，它就会将您注销。如果它仍然没有尝试使用 URL 中指定的中间子目录，即`your-domain/projectPath/some-subdirectory/log-out`.

你能认证吗？失败的可能不仅仅是注销方面......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-26T22:44:27.350

迟到了，但供将来参考——如果您有兴趣了解如何从 XML 实例化和配置安全过滤器，请查看以下包：

```
org.springframework.security.config.annotation.web.configurers 
```

对于注销过滤器配置，这将是 LogoutConfigurer 类。如果您查看**LogoutConfigurer.createLogoutFilter()**方法，您将看到默认的注销过滤器是如何创建的。这意味着您可以在 @Configuration 类中执行以下操作：

```
@Bean
public LogoutFilter logoutFilter() {
    // NOTE: See org.springframework.security.config.annotation.web.configurers.LogoutConfigurer 
    // for details on setting up a LogoutFilter
    SecurityContextLogoutHandler securityContextLogoutHandler = new SecurityContextLogoutHandler();
    securityContextLogoutHandler.setInvalidateHttpSession(true);

    LogoutFilter logoutFilter = new LogoutFilter("/", securityContextLogoutHandler);
    logoutFilter.setLogoutRequestMatcher(new AntPathRequestMatcher("/logout"));
    return logoutFilter;
} 
```

如果你有这个，那么你可以通过 bean 进一步配置，或者让该 bean 自动拾取，因为它的方法名称是*logoutFilter()*

# php - PHP Ajax 我想永久更改

> ID：16222843
> 
> 赞同：0
> 
> 时间：2013-04-25T19:10:01.113
> 
> 标签：php, javascript, ajax

我有一个“添加为好友”按钮，我希望它永久更改为“待处理请求”，直到我单击它时确认请求。当我单击该按钮时，是的，它会更改为“待处理请求”，但是每当我刷新页面时，它都会恢复为“添加为好友”。关于我应该如何做的任何帮助？

PHP部分

```
<div class="member" data-user="<?php echo $member['xmpp_user']; ?>" data-uid="<?php echo $member['uid']; ?>">
    <img src="https://s3.amazonaws.com/wheewhew/user/<?php echo $member['uid']; ?>/photos/<?php echo $member['profile_pic']; ?>" />
    <div class="member_name"><?php echo $member['firstname']." ".$member['lastname']; ?></div>
    <div id="addbutton"><button type="submit" class="add" id="<?php echo $member['uid']; ?>"> Add as Buddy </button></div>
</div> 
```

JS部分

```
function addBuddy(){
    var xmpp_user = $(this).parent().parent().attr('data-user')+'@example.com/default';
    var to_uid = $(this).parent().parent().attr('data-uid');

    $.ajax({
        type: "POST",
        url: "./ajax/addBuddy",
        data: "from_uid="+uid+"&to_uid="+to_uid,

       success: function(data) {
          var ret = eval('('+data+')');
          if(ret.status == 'success'){
            connection.send($pres({to:xmpp_user,type:'subscribe'}).tree());
          }
          else if(ret.status == 'requested'){
            document.getElementById(to_uid).innerHTML="Pending Request";
          }
        }

    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:11:54.517

这是因为，在您的 PHP 代码中，您没有检查是否有待处理的请求。你也可能想知道这是否是你应该做的事情。

想想你希望用户体验如何工作以及它是否有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:15:06.563

您应该在某处存储该用户有邀请，通常这是在数据库中完成的，存储后您可以执行类似的操作

```
<div id="addbutton">
<button type="submit" class="add" id="<?php echo $member['uid']; ?>"> 
<?php echo $has_request? "Pending Request":"Add as Buddy"?> 
</button></div> 
```

# c++ - 如何通过套接字发送所有数据？

> ID：16222844
> 
> 赞同：0
> 
> 时间：2013-04-25T19:10:01.047
> 
> 标签：c++, sockets, winsock

我试图通过套接字发送大量数据，有时当我调用 send （在 Windows 上）时，它不会按预期发送我请求的所有数据。所以，我写了一个小函数，应该可以解决我的问题——但它会导致数据发送不正确并导致图像损坏的问题。我正在制作一个简单的聊天室，您可以在其中相互发送图像（屏幕截图）。

为什么我的功能不起作用？

我怎样才能让它工作？

```
void _internal_SendFile_alignment_512(SOCKET sock, BYTE *data, DWORD datasize)
{       
    Sock::Packet packet;
    packet.DataSize = datasize;
    packet.PacketType = PACKET_FILETRANSFER_INITIATE;
    DWORD until = datasize / 512;

    send(sock, (const char*)&packet, sizeof(packet), 0);

    unsigned int pos = 0;

    while( pos != datasize )
    {
        pos += send(sock, (char *)(data + pos), datasize - pos, 0);
    }

} 
```

我的接收方是：

```
public override void OnReceiveData(TcpLib.ConnectionState state)
{
    if (state.fileTransfer == true && state.waitingFor > 0)
    {
        byte[] buffer = new byte[state.AvailableData];
        int readBytes = state.Read(buffer, 0, state.AvailableData);
        state.waitingFor -= readBytes;
        state.bw.Write(buffer);
        state.bw.Flush();

        if (state.waitingFor == 0)
        {
            state.bw.Close();
            state.hFile.Close();
            state.fileTransfer = false;
            IPEndPoint ip = state.RemoteEndPoint as IPEndPoint;
            Program.MainForm.log("Ended file transfer with " + ip);
        }
    }
    else if( state.AvailableData > 7)
    {          
        byte[] buffer = new byte[8];
        int readBytes = state.Read(buffer, 0, 8);
        if (readBytes == 8)
        {
            Packet packet = ByteArrayToStructure<Packet>(buffer);
            if (packet.PacketType == PACKET_FILETRANSFER_INITIATE)
            {
                IPEndPoint ip = state.RemoteEndPoint as IPEndPoint;
                String filename = getUniqueFileName("" + ip.Address);
                if (filename == null)
                {
                    Program.MainForm.log("Error getting filename for " + ip);

                    state.EndConnection();
                    return;
                }

                byte[] data = new byte[state.AvailableData];
                readBytes = state.Read(data, 0, state.AvailableData);

                state.waitingFor = packet.DataSize - readBytes;
                state.hFile = new FileStream(filename, FileMode.Append);
                state.bw = new BinaryWriter(state.hFile);
                state.bw.Write(data);
                state.bw.Flush();
                state.fileTransfer = true;
                Program.MainForm.log("Initiated file transfer with " + ip);
            }
        }
    }
} 
```

它接收所有数据，当我调试我的代码并看到它`send()`没有返回总数据大小（即它必须被多次调用）并且图像中有黄线或紫线时 - 我怀疑有什么问题发送数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:16:05.837

我误解了问题和解决方案的意图。感谢@Remy Lebeau 的评论以澄清这一点。基于此，您可以编写[http://beej.us/guide/bgnet/output/print/bgnet_USLetter.pdf](http://beej.us/guide/bgnet/output/print/bgnet_USLetter.pdf)`sendall()`的第 7.3 节中给出的函数

```
int sendall(int s, char *buf, int *len)
{
    int total = 0; // how many bytes we've sent
    int bytesleft = *len; // how many we have left to send
    int n = 0;
    while(total < *len) {
       n = send(s, buf+total, bytesleft, 0);
       if (n == -1) { 
           /* print/log error details */
           break;
       }
       total += n;
       bytesleft -= n;
    }
    *len = total; // return number actually sent here
    return n==-1?-1:0; // return -1 on failure, 0 on success
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:18:20.557

您需要检查 send() 的返回值。特别是不能简单的假设是发送的字节数，也有出错的情况。试试这个：

```
while(datasize != 0)
{
    n = send(...);
    if(n == SOCKET_ERROR)
        throw exception("send() failed with errorcode #" + to_string(WSAGetLastEror()));
    // adjust pointer and remaining number of bytes
    datasize -= n;
    data += n;
} 
```

顺便提一句：

*   做那个`BYTE const* data`，你不会修改它指向的东西。
*   您的其余代码似乎太复杂了，特别是您无法通过与 512 之类的幻数对齐来解决问题。

# python - Python菜单不循环？

> ID：16222851
> 
> 赞同：1
> 
> 时间：2013-04-25T19:10:36.810
> 
> 标签：python, loops, menu

好吧，原谅我，这是我在这里的第一个问题。此外，编程还是新手。

无论如何，我一直在编写一个可以维护购物清单的程序。主要思想是您可以添加杂货、删除它们、更改它们、检查列表并退出程序。

我几乎可以正常工作，但是，我的问题是，如果用户选择例如选项 1，他们可以无限期地这样做（按设计），但是当他们转到选项 2 时，程序将在他们尝试和返回选项一（对于 3 返回到 2 或 1 和 4 到较小的数字也类似）。

主要程序是：

```
import moduloListas as mod
abarrotes=[]
frutas=[]
limpieza=[]
listaTotal=[abarrotes,frutas,limpieza]

opcion=mod.menu()

while opcion=='1':
    listaTotal=mod.ingresar(listaTotal)
    opcion=mod.menu()

while opcion=='2':
    listaTotal=mod.eliminar(listaTotal)
    opcion=mod.menu()

while opcion=='3':
    listaTotal=mod.cambiar(listaTotal)
    opcion=mod.menu()

while opcion=='4':
    print "\nAbarrotes: ",listaTotal[0]
    print "\nFrutas:    ",listaTotal[1]
    print "\nLimpieza:  ",listaTotal[2]
    opcion=mod.menu() 
```

菜单是：

```
def menu():
    print "___....----Menu Principal----....___"
    print "1\.    Ingresar un articulo"
    print "2\.    Eliminar un articulo"
    print "3\.    Cambiar un articulo"
    print "4\. Mostrar las listas de articulos"
    print "5\.     Salir de Programa"
    print "\n"
    posibles=['1','2','3','4','5']
    opcion=raw_input("Por favor hacer una seleccion: ")
    while opcion not in posibles:
        print "Por favor, solo ingresa 1,2,3,4 o 5"
        opcion=raw_input("Por favor hacer una seleccion: ")
    return opcion 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:19:00.933

这可以通过将`while`循环更改为来完成。

```
while True:
    opcion=mod.menu()
    if opcion=='1':
        listaTotal=mod.ingresar(listaTotal)
    elif opcion=='2':
        listaTotal=mod.eliminar(listaTotal)
    elif opcion=='3':
        listaTotal=mod.cambiar(listaTotal)
    elif opcion=='4':
        print "\nAbarrotes: ",listaTotal[0]
        print "\nFrutas:    ",listaTotal[1]
        print "\nLimpieza:  ",listaTotal[2]
    else:
        break 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:15:46.423

尝试将第一个代码块更改为以下内容：

```
import moduloListas as mod
abarrotes = []
frutas = []
limpieza = []
listaTotal = [abarrotes, frutas, limpieza]

opcion = mod.menu()
while opcion != '5':
    if opcion == '1':
        listaTotal = mod.ingresar(listaTotal)
    elif opcion == '2':
        listaTotal = mod.eliminar(listaTotal)
    elif opcion == '3':
        listaTotal = mod.cambiar(listaTotal)
    elif opcion == '4':
        print "\nAbarrotes: ", listaTotal[0]
        print "\nFrutas:    ", listaTotal[1]
        print "\nLimpieza:  ", listaTotal[2]
    opcion = mod.menu() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T19:16:02.510

做

```
while True:
    if opcion == '1':
        ...
    if opcion=='4':
       ....
    opcion = input() 
```

然后当然，必须有一些退出选项......'5'或其他。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T19:48:22.613

你的代码流动的方式意味着一旦你移动到一个小于一的数字，你就不能向后“向上”移动程序流。再次尝试更改变量`opcion`意味着真值语句被评估为假，从而中断了 while 循环。

你的代码：

```
while opcion=='2':
listaTotal=mod.eliminar(listaTotal)
opcion=mod.menu() 
```

因此，更改`opcion`会中断该循环并移动到代码的下一部分（向下），这意味着它似乎在向下移动数字时有效，但不能向上移动。

相反，您应该使用带有`if`and`elif`语句的单个 while 循环。

```
while True:
    opcion = mod.menu()
    if "1" in opcion:
        listaTotal=mod.ingresar(listaTotal)
    ... 
```

依此类推，如 Sukrit Kalra 的回答（我只是希望澄清为什么会发生这种情况）。

# c++ - C++ 序列化和压缩向量 以独立于平台的方式

> ID：16222852
> 
> 赞同：0
> 
> 时间：2013-04-25T19:10:46.587
> 
> 标签：c++, serialization, vector, struct, cross-platform

我正在寻找序列化一个向量以在 zeromq 中作为消息发送。该结构将仅包含基本类型（bool、string、int、float）。

由于我通过网络传输，我想使用某种压缩来节省带宽。

我也希望这在某种程度上与平台无关。我将从 Linux 机器广播，但接收者可能是 Windows 或 Linux。

第三方库是可以的，只要它们可以在 Windows 和 Linux 下工作。

要发送 zeromq 消息，通常使用 memcpy 之类的东西来“加载”数据。 [http://api.zeromq.org/2-1:zmq-msg-data](http://api.zeromq.org/2-1:zmq-msg-data)

有人可以将我指向适当的库并提供序列化/压缩和随后的反序列化/解压缩的简单示例代码。我想发送的结构如下所示：

```
struct sampledata {
  string testing_text;
  int testing_int;
  float testing_number;
  bool testing_bool;
} 
```

我觉得这一定是一个常见的 C++ 编程问题，应该已经为它开发了好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:25:16.853

您正在寻找的是一个通用的序列化库；[有很多可用的选项](http://en.wikipedia.org/wiki/Comparison_of_data_serialization_formats)。

我特别喜欢两个：Google 的[Protocol Buffers](https://code.google.com/p/protobuf/)和 Apache 的[Avro](http://avro.apache.org/)。您可以将其中任何一个与 ZMQ 一起使用。

如果您访问 ZMQ[常见问题解答](http://www.zeromq.org/area%3afaq)（转到“常规”部分），您会发现 Protocol Buffers 是上述代理的序列化格式之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:32:44.557

我至少会考虑将[Boost Serialization](http://www.boost.org/doc/libs/release/libs/serialization/doc/index.html)与[Boost gzip-filtered stream](http://www.boost.org/doc/libs/release/libs/iostreams/doc/classes/gzip.html)结合使用。

# ruby - Ruby 奇怪的 JSON 解析问题

> ID：16222858
> 
> 赞同：0
> 
> 时间：2013-04-25T19:10:54.713
> 
> 标签：ruby, json, parsing

我正在从似乎在 JSON 中的网页下载内容。它是一个大文件，格式如下：

```
"address1":"123 Street","address2":"Apt 1","city":"City","state":"ST","zip":"xxxxx","country":"US" 
```

这些条目中大约有 1000 个，每个条目都包含在括号内。当我使用 RestClient.get 下载页面时（open-uri 出于某种原因抛出了 http 500 错误），数据格式如下：

```
\"address\1":\"123 Street\",\"address2\":\"Apt 1\",\"city\":\"City\",\"state\":\"ST\",\"zip\":\"xxxxx\",\"country\":\"US\" 
```

当我然后使用 json 类

```
parsed = JSON.parse(data_out) 
```

它完全打乱了数据结构中条目的顺序，以及每个条目中对象的顺序，例如：

```
"address1"=>"123 Street", "city"=>"City", "country"=>"US", "address2"=>"Apt 1" 
```

如果相反我使用

```
data_j=data_out.to_json 
```

然后我得到：

```
\\\"address\\\1":\\\"123 Street\\\",\\\"address2\\\":\\\"Apt 1\\\",\\\"city\\\":\\\"City\\\",\\\"state\\\":\\\"ST\\\",\\\"zip\\\":\\\"xxxxx\\\",\\\"country\\\":\\\"US\\\" 
```

此外，仅使用 json 类似乎允许我选择我想要的条目：

```
parsed[1]["address1"]
=> "123 Street"

data_j[1]["address1"]
TypeError: can't convert String into Integer
from (irb):17:in `[]'
from (irb):17
from :0 
```

知道发生了什么吗？我想既然 json 命令正在工作，我可以使用它们，但令人不安的是它扰乱了对象的条目和顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T06:47:51.360

尽管数据以字符串形式显示为有序，但它*表示*的是无序数据集。该行：

```
parsed = JSON.parse(data_out) 
```

您使用的是将字符串形式转换为 Ruby 中可用内容的正确方法。我无法从您的示例中看到完整的结构，所以我不知道顶层是数组还是基于 id 的哈希。我怀疑后者，因为您说从 Ruby 中查看时它变得无序。因此，如果您知道您对地址的哪一部分感兴趣，您可能会有如下代码：

```
# Writes all the cities
parsed.each do |id,data|
   puts data["city"]
end 
```

如果外部结构是一个数组，你会这样做：

```
# Writes all the cities
parsed.each do |data|
   puts data["city"]
end 
```

# ruby - 追加后保存回调未运行

> ID：16222862
> 
> 赞同：0
> 
> 时间：2013-04-25T19:11:26.397
> 
> 标签：ruby, datamapper

我在尝试使用`<<`运算符附加关系时遇到问题。如果我在追加后保存，我的回调似乎没有运行。

我有两个模型：

## 织物

```
class Fabric
  include DataMapper::Resource

  property :id,           Serial
  property :name,         String
  property :fixed_color,  Boolean
  property :active,       Boolean, :default => true

  has 1,      :cut
  has n,      :colors, :through => Resource

  after :save, :add_to_fishbowl

  def add_to_fishbowl
    puts self.colors.size
  end
end 
```

## 颜色

```
class Color
  include DataMapper::Resource

  property :id,   Serial
  property :name, String

  has n,      :cut
  has n,      :fabrics, :through => Resource
end 
```

我创建了两种颜色和一种面料：

```
yellow = Color.new(:name => "yellow")
red = Color.new(:name => "red")

f = Fabric.create(:name => "tricot", :fixed_color => false) 
```

如果我使用附加运算符，我的回调不会运行：

```
f.colors << red
f.save
f.colors << yellow
f.save
puts f.colors.size
=> 0
=> 2 
```

如果我添加数组，它是：

```
f.colors = f.colors + [red]
f.save
f.colors = f.colors + [yellow]
f.save
puts f.colors.size
=> 0
=> 1
=> 2
=> 2 
```

我正在运行 ruby​​ 1.9.3p392 和 data_mapper (1.2.0)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:37:23.713

你缺少关系，**有 n，:cuts**

```
class Color
  include DataMapper::Resource

  property :id,   Serial
  property :name, String

  has n,      :cuts
  has n,      :fabrics, :through => Resource
end 
```

# javascript - Fine-uploader 在提交和取消时文件名中唯一但升序的 ID

> ID：16222864
> 
> 赞同：0
> 
> 时间：2013-04-25T19:11:36.693
> 
> 标签：javascript, jquery, fine-uploader

此问题与 Widen Fine-Uploader ( [https://github.com/Widen/fine-uploader](https://github.com/Widen/fine-uploader) )有关

我得到了这个分段上传表格。没有自动上传。我想上传几张图片，并以每张图片的唯一名称保护它们。

例如。你选择 4 张图片。通过精细上传上传。我已经有一个画廊ID。所有图像都应使用gallery-id和唯一的升序数字保存在文件名下。像这样：

1234-1.jpg 1234-2.jpg 1234-3.jpg 1234-4.jpg

听起来很简单，但有两个问题：

*   image-id 需要上升而不跳过任何一个。如果您在上传之前取消（删除）文件，则可能会发生这种情况。因此需要在选择所有文件之后设置图像 ID，或者在删除文件时需要填写空 ID。

*   图像的顺序必须严格遵守您在输入时选择文件的顺序。您选择的第一张图片变成 1234-1.jpg，第二张变成 1234-2.jpg ...所以我无法在重新加载后在 imageHandler 脚本中设置 ID。它会按顺序抓取第一个不能是第一个图像的完整图像，因为我在上传时使用了多个同时连接。

我尝试过这样的事情：

```
.on('submitted', function(event, id, name) {
    var picId = id+1;

    $(this).fineUploader('setParams', {
        'currentGid': 1234,
        'picId':picId
    });
}) 
```

或者

```
params: {
        fileNum: function() {
        return $(this).attr('id');
        }
} 
```

或使用 fileCount++ 但没有什么像我需要的那样工作..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T13:07:03.217

您的应用程序听起来有点脆弱，解决这个问题可能符合您的最大利益。

You'll simply need to maintain a map of your unique ids along with the ids maintained for each file by Fine Uploader. In your "submitted" handler, add a key/value pair to the map. In a "cancel" handler, adjust the items in the map appropriately. In an "upload" handler, call the "setParams" API method. Your parameters will by the gallery ID, the unique ID you've been tracking in your map for that specific file, and be sure to pass the id of the file as your last parameter to the "setParams" call. This lets Fine Uploader know that this parameter is only for that specific file.

Please see the [callbacks documentation](http://docs.fineuploader.com/api/callbacks.html) for more info.

Here's a code example:

```
var fileIds = [];

$('#myFineuploaderContainer').fineUploader({
   //set your options here
})
   .on('submitted', function(event, id, name) {
      fileIds.push(id);
   })
   .on('cancel', function(event, id, name) {
      var fileIdPosition = $.inArray(id, fileIds);      
      fileIds.splice(fileIdPosition, 1);
   })
   .on('upload', function(event, id, name) {
      var params = {
         currentGid: 1234,
         picId: $.inArray(id, fileIds)
      };

      $(this).fineUploader('setParams', params, id);
   }); 
```

# c# - LINQ FirstOrDefault 测试 null

> ID：16222869
> 
> 赞同：1
> 
> 时间：2013-04-25T19:12:06.427
> 
> 标签：c#, .net, linq, list

`Word1252_7bit`是一个结构
`Key`是`Int32`

如果找不到值，如何测试 null？

没有 w.Key == -1 但我不知道测试是否没有返回值。

最后 Debug 行引发异常。

```
List<Word1252_7bit> Words7bit = GetWord1252_7bit();

Word1252_7bit word1252_7bit ;

word1252_7bit = Words7bit.FirstOrDefault(w => w.Key == 1000);
Debug.WriteLine(word1252_7bit.Key.ToString() + " " + word1252_7bit.Value);

word1252_7bit = Words7bit.FirstOrDefault(w => w.Key == -1);
//if (word1252_7bit == null) Debug.WriteLine("word1252_7bit == null");
Debug.WriteLine( word1252_7bit.Key.ToString() + " " + word1252_7bit.Value ) ; 
```

如果我应该使用 FirstOrDefault 以外的其他东西，请告诉我。在独特的 Int32 上寻找速度搜索。

不确定它是否有区别，但 Key 是唯一的，我使用 Key 来覆盖 GetHashCode()，并且为了节省空间 Key 确实是 UInt32 的一部分

```
public Int32 Key
{
  get
  {
    return (Int32)( pack[0] & ( (1<<25) - 1 ) ) ;
  }
}

public struct Word1252_7bit : iWord
{
    // this maps 128 values to "Windows-1252" 
    // this is not ASCII 
    // this is SQL char 8bit normalized to FormD, remove control chars, remove redactions, and cast to lower - 129 - just have to cheat on 1
    private static byte[] Win1252_128to256 = new byte[] {  
             32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63
           , 64, 91, 92, 93, 94, 95, 96, 97, 98, 99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121
           ,122,123,124,125,126,128,130,131,132,133,134,135,137,139,145,146,147,148,149,150,151,152,153,155,156,160,161,162,163,164,165,166
           ,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,215,223,230,240,247,248,254 };
    private static Encoding win1252 = Encoding.GetEncoding("Windows-1252");
    private UInt32[] pack;
    public Int32 Key { get { return (Int32)(pack[0] & ((1 << 25) - 1)); } }
    public override bool Equals(Object obj)
    {
        // Check for null values and compare run-time types.
        if (obj == null) return false;
        if (!(obj is Word1252_7bit)) return false;
        Word1252_7bit comp = (Word1252_7bit)obj;
        if (comp.pack == null) return false;
        if (comp.pack.Count() == 0) return false;
        return (comp.Key == this.Key);
    }
    public override int GetHashCode()
    {
        return Key;
    }
    public byte[] Bytes
    {
        get
        {
            byte b;              
            List<byte> bytes = new List<byte>(((pack.Length - 1) * 4) + 1);

            b = (byte)((pack[0] >> 25) & ((1 << 7) - 1));
            bytes.Add(Win1252_128to256[b]);

            if (pack.Length > 1)
            {                       
                UInt32 cur32;
                byte bits4 = 0;
                byte bits3 = 0;
                for (int i = 1; i < pack.Length; i++)
                {
                    cur32 = pack[i];

                    if ((i-1) % 2 == 0)
                    {
                        bits4 = (byte)((cur32 >> 28) & ((1 << 4) - 1));
                    }
                    else
                    {   // pick up that odd i7
                        bits3 = (Byte)((cur32 >> 28) & ((1 << 3) - 1));
                        b = (byte)((UInt32)bits3 | ((UInt32)bits4 << 3));
                        if (b == 0) break;
                        bytes.Add(Win1252_128to256[b]);
                    }

                    b = (byte)(cur32         & ((1 << 7) - 1));
                    if (b == 0) break;
                    bytes.Add(Win1252_128to256[b]);

                    b = (byte)((cur32 >>  7) & ((1 << 7) - 1));
                    if (b == 0) break;
                    bytes.Add(Win1252_128to256[b]);

                    b = (byte)((cur32 >> 14) & ((1 << 7) - 1));
                    if (b == 0) break;
                    bytes.Add(Win1252_128to256[b]);

                    b = (byte)((cur32 >> 21) & ((1 << 7) - 1));
                    if (b == 0) break;
                    bytes.Add(Win1252_128to256[b]);

                    //Debug.WriteLine(win1252.GetString(bytes.ToArray()));   
                }
            }
            return bytes.ToArray();
        }
    }
    public String Value
    {
        get
        {
            return win1252.GetString(Bytes);
        }
    }
    public Int32 Lenght { get { return Bytes.Count(); } }
    public Word1252_7bit(UInt32[] Pack)
    {
        if(Pack == null) throw new IndexOutOfRangeException();
        if (Pack.Length == 0) throw new IndexOutOfRangeException();
        pack = Pack;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:14:58.780

`FirstOrDefault<T>``T`将返回找到的第一个项目或如果没有找到的默认值。对于引用类型，这是`null`，但对于值类型，这是不同的。例如，整数的默认值为`0`.

您可以使用以下[`default`](http://msdn.microsoft.com/en-us/library/xwth0h0d%28v=vs.110%29.aspx)关键字：

```
if (word1252_7bit.Equals(default(Word1252_7bit)))
    Debug.WriteLine("not found"); 
```

^(*注意：您可能必须编写您自己的覆盖[`Equals`](http://msdn.microsoft.com/en-us/library/2dts52z7.aspx)以获得您期望的结果。*)

通常，您将无法区分未找到的项目和已找到但等于默认值的项目。你可以这样做：

```
int foundAt = Words7bit.FindIndex(w => w.Key == -1);
if (foundAt == -1)
    Debug.WriteLine("not found");
else
    word1252_7bit = Words7bit[foundAt]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:38:21.333

要获得更多控制权，您可以定义自己的`Default`值，例如使用以下内容：

```
public static T FirstOrDefault<T>(this IEnumerable<T> sequence, T defaultValue)
{
    foreach (var element in sequence)
        return element;
    return defaultValue; // default(T);
    // return sequence.Any() ? sequence.First() : defaultValue;
} 
```

然后像这样使用它

```
word1252_7bit = Words7bit.Where(w => w.Key == 1000)
    .FirstOrDefault(Word1252_7bit.Default); 
```

其中“默认”是为您的结构定义的默认实例。就像是...

```
public static readonly Word1252_7bit Default = new Word1252_7bit 
{ 
    Key = Int32.MinValue,
    Value = "default",
}; 
```

**编辑：**改进`FirstOrDefault`的代码（基于原始实现）

# reporting-services - 显示所有 SSRS 报告字段值，不带换行符

> ID：16222873
> 
> 赞同：0
> 
> 时间：2013-04-25T19:12:15.643
> 
> 标签：reporting-services

我有一个 SSRS 报告，其中包含我无法修改的数据集。我只能更改报告的格式。

我试图弄清楚如何让其中一个报告字段以列表或 csv 方式内联显示其许多值。现在它打印一个值并执行换行符，然后是下一个值和另一个换行符，依此类推......我希望我的值在没有换行符的情况下打印。

我尝试在表达式中使用 Replace 函数（将 vbcrlf 替换为“，”）但没有成功...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:41:38.387

您没有提供足够的信息来可靠地回答问题。[很可能，您的问题与此问题](https://stackoverflow.com/q/10997770/419956)重复，[我的回答也](https://stackoverflow.com/a/11057590/419956)将回答您的问题。基本情况是：

1.  创建多值参数`@MyParameter`
2.  设置要从数据集中检索的参数的默认值
3.  在您的文本框中使用表达式`=Join(Parameters!MyParameter.Value, ", ")`

同样的免责声明也适用于此：如果有很多值，此解决方案可能效果不佳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T03:02:13.267

听起来您只是想要一个表达式来删除源数据中的换行符，以便它打印在一行上。您可能需要一些试验和错误来处理我们实际的字符，但您可能想从替换开始：

vbCrLf

vbLf

vbCr

[更多关于在这个问题](https://stackoverflow.com/questions/7160820/replace-line-breaks-using-regex)中替换换行符

您可以在报告中创建一个 Code 函数来进行替换，类似于[此问题](https://stackoverflow.com/questions/9929793/ssrs-2008-multi-line-data-displaying-as-one-line-in-report)中的答案。

# jquery - 使用 jQuery Tree 呈现组织数据的最佳方式

> ID：16222876
> 
> 赞同：0
> 
> 时间：2013-04-25T19:12:18.597
> 
> 标签：jquery, tree

我对如何呈现数据的设计布局有点坚持。情况如下：

*有不同的部门，每个部门都有不同的员工。现在每个部门都可以有子部门，员工在子部门工作。*

我需要在 html 页面上显示整个布局，最好使用 jQuery 树或其他东西。我正在考虑类似于树结构的东西，其中部门以分层格式显示，如下所示：

```
Dept A
 - Dept A.1
   - Dept A.1.1
   - Dept A.1.2
 - Dept A.2
   - Dept A.2.1
     - Dept A.2.1.1 
```

现在我还需要在每个部门下显示员工，并提供从一个部门到另一个部门的拖动功能。这就是我坚持设计的地方，即如何在 html 页面中以适当的方式描述它。

有人可以帮我解决这个问题吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:18:20.060

在 Javascript 中创建一个对象 Dept ，它包含一个名称数组和一个子 Dept 数组，并在需要时将一个对象插入到一个对象中，然后您可以遍历该对象，直到没有东西可以遍历。

# r - 以编程方式下载 R 中的 ROIC 和其他财务数据

> ID：16222879
> 
> 赞同：0
> 
> 时间：2013-04-25T19:12:32.173
> 
> 标签：r, stock

有没有什么地方可以以编程方式下载公司季度报告中通常报告的 ROIC 和其他数据？

我知道我可以从[http://chart.yahoo.com/table.csv](http://chart.yahoo.com/table.csv)访问股票的每日价格数据，但我找不到有关财务表现的任何信息。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-04T21:21:07.043

[Intrinio](http://intrinio.com)使用 httr 包在 R 中提供该数据。您可以按照[此处的说明](http://blog.intrinio.com/intrinio-financial-data-in-r-and-rstudio/)进行操作，我将在此处对其进行修改以获得ROIC：

```
#Install httr, which you need to request data via API
install.packages("httr")
require("httr")

#Create variables for your usename and password, get those at intrinio.com/login
username <- "Your_API_Username"
password <- "Your_API_Password"

#Making an api call for roic. This puts together the different parts of the API call

base <- "https://api.intrinio.com/"
endpoint <- "data_point"
stock <- "T"
item1 <- "roic"
call1 <- paste(base,endpoint,"?","ticker","=", stock, "&","item","=",item1, sep="")

#Now we use the API call to request the data from Intrinio's database

ATT_roic <- GET(call1, authenticate(username,password, type = "basic"))

#That gives us the ROIC value, but it isn't in a good format so we parse it

test1 <- unlist(content(ATT_roic,"parsed"))

df <- data.frame(test1) 
```

您可以为任何美国股票代码修改该代码，并且可以将 roic 更改为数百个其他财务指标。如果您想提取历史 roic 或特定日期范围的 roic，请参阅我在此答案开头发布的说明。

# heroku - 如何在 Rails 中使用 Heroku 和 Sendgrid 配置设计电子邮件？

> ID：16222885
> 
> 赞同：11
> 
> 时间：2013-04-25T19:12:42.513
> 
> 标签：heroku, devise, ruby-on-rails-3.2, sendgrid

我有一个添加了 Devise 的简单 Rails 3.2.7 应用程序，它部署到 Heroku 并添加了 Sendgrid。它在 heroku 上可以正常工作，除非它需要进行需要发送电子邮件的密码检索。从我读过的所有帖子中，我怀疑我以某种方式错误地设置了邮件参数。任何建议表示赞赏。

对于 config/environments/production.rb 我添加了

```
config.action_mailer.default_url_options = { :host => 'smtp.sendgrid.net'} 
```

对于 config/initializers/devise.rb 我添加了

```
config.mailer_sender = "mail-to-send@from.com" 
```

对于 config/environments.rb 我添加了

```
ActionMailer::Base.smtp_settings = {
:address        => 'smtp.sendgrid.net',
:port           => '587',
:authentication => :plain,
:user_name      => ENV['SENDGRID_USERNAME'],
:password       => ENV['SENDGRID_PASSWORD'],
:domain         => 'heroku.com',
:enable_starttls_auto => true
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T19:55:54.107

所以，你的问题是你引用了错误的环境变量。Heroku 将您的 SendGrid 凭据存储在`ENV['SENDGRID_USERNAME']`和中`ENV['SENDGRID_PASSWORD']`。您使用您的实际用户名和密码作为密钥名称。

这将起作用：

```
ActionMailer::Base.smtp_settings = {
  :address        => 'smtp.sendgrid.net',
  :port           => '587',
  :authentication => :plain,
  :user_name      => ENV['SENDGRID_USERNAME'],
  :password       => ENV['SENDGRID_PASSWORD'],
  :domain         => 'heroku.com',
  :enable_starttls_auto => true
} 
```

# javascript - 平滑流式传输 .ism 到 HTML5 视频标签

> ID：16222889
> 
> 赞同：3
> 
> 时间：2013-04-25T19:12:52.827
> 
> 标签：javascript, html5-video, smooth-streaming, smooth-streaming-player

我知道将视频作为 HTML5 标记中的源流式传输时最好的选择是 .mp4。但是，假设我有一个只输出零散到一个主义/清单的来源。

有没有办法，无论是通过其他库还是凌乱的黑客，我可以把这个视频变成在屏幕上呈现为标签的东西？我找到的最接近的是[演练：构建您的第一个 HTML5 平滑流播放器](http://msdn.microsoft.com/en-us/library/jj573656%28v=vs.90%29.aspx)，因为它允许这样做 - 但我既没有 Windows 8，也不想让它运行能够支持 .NET 的服务器。我希望有一些东西，无论是否混乱，我都可以完全在 javascript 中实现这一点，并且无需部署即可在本地执行。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-02T21:04:55.940

首先，[W3C](http://www.w3.org/)还没有为自适应比特率流提供标准。所以目前大部分浏览器只支持简单的渐进式下载播放。因此，据我所知，没有平滑流播放器的 JS 实现，而且微软也没有开发一个。

您提供的示例使用“Microsoft Smooth Streaming Client SDK Beta 2 for Windows 8”，它是一个 C++ 库，仅适用于[Windows 应用商店应用程序](http://www.windowsstore.com/)开发。它与浏览器无关。

所以，不幸的是，这还不可能。更重要的是，我怀疑这是否会发生，因为每个人都在等待[MPEG DASH](http://dashif.org/mpeg-dash/)最终确定。

更新。请注意，您始终可以使用 Silverlight 应用程序来播放 SmoothStreaming。引用的[HTML5 播放器框架](https://playerframework.codeplex.com/wikipage?title=Player%20Framework%20for%20HTML5&referringTitle=Home)能够回退到 Silverlight。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-15T16:46:28.123

Microsoft Smooth Streaming 没有运气，但关于类似的 MPEG-DASH（请参阅[http://blog.johndeutscher.com/2013/06/10/mpeg-dash-preview-from-windows-azure-media-services](http://blog.johndeutscher.com/2013/06/10/mpeg-dash-preview-from-windows-azure-media-services)）：

“Dash.js 已获得许可（在 BSD 许可下），因此任何寻求提供自己的 DASH-AVC/264 兼容播放器的人都可以研究和重用它。目标是让第三方更容易构建自适应流媒体视频播放器。”

[http://msopentech.com/blog/2013/06/20/ms-open-tech-contributes-to-open-source-adaptive-streaming-video-player/](http://msopentech.com/blog/2013/06/20/ms-open-tech-contributes-to-open-source-adaptive-streaming-video-player/)

另请参阅： [https](https://dvcs.w3.org/hg/html-media/raw-file/tip/media-source/media-source.html) : //dvcs.w3.org/hg/html-media/raw-file/tip/media-source/media-source.html 这是 Dash.js 所必需的

# javascript - JavaScript 闭包上下文的其他属性会发生什么？

> ID：16222892
> 
> 赞同：0
> 
> 时间：2013-04-25T19:13:01.677
> 
> 标签：javascript, function, closures

我会尽量清楚我的问题，所以：

有很多博客和教程解释了闭包，但我没有弄清楚创建闭包的上下文的其他属性会发生什么？[jsFiddle](http://jsfiddle.net/bogdan_vq/Uea6G/)

```
function func(){

    this.context_field = "context_field";
    this.context_method = function(){
        console.log("context method");
    };

    func = function(param, change){
        if(typeof(change) === 'undefined'){
           //......
            console.log(param + " " + context_field + " from original func - closure\n\n");
           //.....
    }
    return func;
};

func()("Init finished and call");
func("Call again", ""); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:28:53.390

在此示例中，没有创建上下文，因为函数 'func' 中的关键字 'this' 指的是窗口（全局对象）。

要创建上下文声明变量，如下所示：

```
var context_field = "context_field";
var context_method = function(){
    console.log("context method");
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:06:03.793

因此，创建闭包的上下文的其他属性是活动的，可以在闭包内部调用，但让它们在外部可用的唯一方法是返回它们。

```
function func(){

    var context_field = "context_field";
    var context_method = function(){
        console.log("context method lives on");
    };

    func = function(param){
        console.log(param + " func and " + context_field);
        return context_method;
    }
    return func;
};

func()("Init finished and call");
func("Call again")(); 
```

# c++ - 试图验证表达式树中的叶节点

> ID：16222894
> 
> 赞同：-2
> 
> 时间：2013-04-25T19:13:05.227
> 
> 标签：c++, binary-tree

我创建了一个布尔函数来验证表达式树中的叶节点。如果节点是任何运算符，则返回 false。否则，它应该返回 true。它递归地调用自己......这就是我认为的问题所在。你可以让布尔函数递归吗？这是我的功能

```
bool validate(tnode* node)
{
  if(node == NULL)
  {
    cout<<"Node is null";       
    return false;
  }
  if(node->left == NULL && node->right==NULL) 
  {
    cout<<node->key<<endl<<endl;
    if(node->key == '+' || '-' || '*' || '/')
        return false;
    else 
        return true;
  }     
  else
        validate(node->left);
        validate(node->right);      
} 
```

它实际上完美地打印出我所有叶节点的值，它们是：abcd 2 e 3。但是当我在我的主函数中运行它时，它总是返回错误。关于为什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:14:56.900

```
 if(node->key == '+' || '-' || '*' || '/') 
```

应该

```
if(node->key == '+' || node->key == '-' || node->key == '*' || node->key == '/') 
```

同时：

```
else {
    validate(node->left);
    validate(node->right);   
} //should not miss the parenthesis 
```

你可能应该这样做：

```
else{
      bool left = validate(node->left);
      bool right = validate(node->right);
      return (left && right);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:14:56.553

您没有将结果存储在任何地方。

```
validate(node->left);
validate(node->right); 
```

应该更像

```
_Bool res = validate(node->left); 
```

然后对结果做一些事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:23:13.800

它总是返回的原因`false`是这个表达式：

```
(node->key == '+' || '-' || '*' || '/') 
```

实际上意味着

```
(node->key == '+') || ('-' != 0) ... 
```

这总是正确的，因为`-`字符没有零值。

你也不需要把它变成一个 if-else 子句，我建议这样：

```
return !(node->key == '+' || node->key == '-'
      || node->key == '*' || node->key == '/'); 
```

至于最后一部分，我认为你需要这样做：

```
else
    return validate(node->left) && validate(node->right); 
```

# javascript - 未捕获的类型错误：无法设置 null onclick 的属性“onclick”不起作用

> ID：16222895
> 
> 赞同：2
> 
> 时间：2013-04-25T19:13:08.290
> 
> 标签：javascript, html

见下文是我的javascript，

```
<script type="text/javascript">
document.getElementById('auth').onclick=change;
function change(){
    this.className="account_holder";
}
</script> 
```

html是

```
<td id="auth" class="authorised_reportericon" >
                        <a href="{% url incident.views.authorised_reporter %}">
                        <p align="center" style="color:black;font-size:16px;">Authorised Reporters</p></a>
                    </td> 
```

我为 onclick 分配了 td 的 id，但由于未捕获 TypeError：无法设置属性 'onclick' 为 null

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T19:15:27.800

放在`document.getElementById('auth').onclick=change;`里面`window.onload`，比如：

```
window.onload = function () {
    document.getElementById('auth').onclick=change;
}; 
```

根据您收到的错误，我猜您的 Javascript 是在您的相关 HTML 呈现之前执行的，这意味着`id`找不到带有“auth”的元素。将它放在整个 DOM 准备就绪的事件中应该可以解决问题。

演示：[这里](http://jsfiddle.net/bYMDy/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T19:16:27.197

很可能您已将脚本放置在`head`文档中，这意味着它在页面的其余部分呈现之前运行。

相反，将它移到 , 内`body`，到最底部，就在结束`</body>`标记之前。

```
<!doctype html>
<html>
    <head>
        <title>my page</title>
    </head>
    <body>

        <!-- your page content -->

        <!-- your script -->
        <script type="text/javascript">
        document.getElementById('auth').onclick=change;
        function change(){
            this.className="account_holder";
        }
        </script>
    </body>
</html> 
```

现在元素将在脚本运行之前可用。这是因为页面按从上到下的顺序呈现，而脚本在加载时会阻塞呈现。

因此，当脚本位于头部时，它会阻止其下方的其余页面呈现，直到脚本完成，这意味着`"auth"`尚不存在。

在最后使用脚本的这种定位技术允许它运行可能比等待`window.onload`事件快得多。

# perforce - 如何在 perforce 中找到上次更新特定文件的时间？

> ID：16222896
> 
> 赞同：1
> 
> 时间：2013-04-25T19:13:27.577
> 
> 标签：perforce

也就是说，对于给定的源文件`foo.c`，我如何确定它上次被任何人更新的时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:49:31.843

使用以下内容：

```
p4 filelog -s -m1 file 
```

解释：

*   `file`是相关文件的本地路径或仓库路径
*   `-m1`将输出限制为文件的最新版本
*   `-s`指定您想要缩短的输出

例子：

```
p4 filelog -s -m1 foo.c
p4 filelog -s -m1 /path/on/disk/to/foo.c
p4 filelog -s -m1 //depot/path/to/foo.c 
```

# shopify - 将 Shopify 商店隐藏在付费墙后面

> ID：16222898
> 
> 赞同：1
> 
> 时间：2013-04-25T19:13:31.783
> 
> 标签：shopify

我正在尝试创建一个需要付费会员才能使用的商店。我喜欢 Shopify 提供的服务。是否有可能（通过他们的 API 或使用现有应用程序）强制用户在访问商店之前购买会员资格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T20:21:56.593

如果您可以设置子域并使用 Stripe，这很简单。没有帐户就没有人可以进入 Shopify，除非通过您，没有人会获得帐户。一旦他们通过您的 Stripe 表单购买了会员资格，您就可以创建他们的 Shopify 帐户，并向他们发送使用 Shopify 的邀请。

没有什么比这更简单了……

# php - 将 json 数组添加/组合到 JSON 文件 php 中的数组

> ID：16222899
> 
> 赞同：1
> 
> 时间：2013-04-25T19:13:37.673
> 
> 标签：php, json, array-push

在两天的大部分时间里，我一直在尝试解决这个问题，但没有成功。我正在尝试使用 php 组合/添加到存储在我服务器上的 .json 文件中的 json 数组。

**这是我试图结合的一个简短版本。**

盒子.json：

```
[{"date":"25.4.2013 10:40:10"},{"comment":"some text"},{"comment":"some more text"}] 
```

发布的json：

```
[{"date":"25.4.2013 10:45:15"},{"comment":"another quote"},{"comment":"quote"}] 
```

**这就是我需要的。**

```
[{"date":"25.4.2013 10:40:10"},{"comment":"some text"},{"comment":"some more text"},
{"date":"25.4.2013 10:45:15"},{"comment":"another quote"},{"comment":"quote"}] 
```

**这就是我得到的。（数组中的数组）**

```
[{"date":"25.4.2013 10:40:10"},{"comment":"some text"},{"comment":"some more text"},
[{"date":"25.4.2013 10:45:15"},{"comment":"another quote"},{"comment":"quote"}]] 
```

**这是我的代码：**

```
<?php
$sentArray = $_POST['json'];
$boxArray = file_get_contents('ajax/box.json');
$sentdata = json_decode($sentArray);
$getdata = json_decode($boxArray);
$sentdata[] = $getdata;   /* I also tried array_push($sentdata, $getdata); */
$json = json_encode($sentdata);
$fsize = filesize('ajax/box.json');
if ($fsize <= 5000){
    if (json_encode($json) != null) { /* sanity check */
    $file = fopen('ajax/box.json' ,'w+');
    fwrite($file, $json);
    fclose($file);
}else{
    /*rest of code*/
}
?> 
```

请帮助我的理智开始受到质疑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:16:54.500

这是你的问题

```
$sentdata[] = $getdata; 
```

利用`foreach`

```
foreach($getdata as $value)
    $sentdata[] = $value; 
```

**更新：**`$sentdata`但我认为你 不需要这个`$getdata`

```
foreach($senttdata as $value)
    $getdata[] = $value; 
```

然后放到`$getdata`你的文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:29:32.553

```
$box = json_decode(file_get_contents('ajax/box.json'));
$posted = json_decode($_POST['json']);
$merge = array_merge ((array)$box,(array)$posted); 
```

如果 $box 或 $posted 变为 null 或 false，则强制转换（数组）防止错误，它将是一个空数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:17:50.240

而不是这个：

```
$sentdata[] = $getdata;   /* I also tried array_push($sentdata, $getdata); */ 
```

尝试：

```
$combinedData = array_merge($sentData, $getData);
$json = json_encode($combinedData); 
```

通过使用[array_merge](http://www.php.net/manual/en/function.array-merge.php)，您可以将数组组合成一个数组，而不是将一个数组作为值添加到另一个数组中。

请注意，我更改了结果数据的名称 - 尽量避免使用相同名称和不同大小写的变量，这将使事情更容易理解（对于您和支持您的代码的未来开发人员）。

干杯

# c# - 字符串 HTML 中的双引号

> ID：16222902
> 
> 赞同：5
> 
> 时间：2013-04-25T19:13:45.503
> 
> 标签：c#, string

我想存储这个：

```
<span class="icon phone">m</span> 
```

在一个字符串中。我该怎么做呢？

试过：`@"<span class="+"icon phone"+">m</span>";`

试过：`@"<span class="+@"icon phone"+">m</span>";`

请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T19:14:56.123

改为使用单引号。

```
var html = "<span class='icon phone'>m</span>"; 
```

或将文字字符串中的引号加倍

```
var html = @"<span class=""icon phone"">m</span>"; 
```

或使用反斜杠字符转义引号字符

```
var html = "<span class=\"icon phone\">m</span>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T19:49:57.593

怎么样

```
new XElement("span", new XAttribute("class", "icon phone"), "m").ToString() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T19:16:16.513

您还可以省略 @ 并使用反斜杠转义双引号`\`：

```
"<span class=\"icon phone\">m</span>" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T19:14:55.410

您可以通过键入 " 两次来做到这一点。它将出现一次，在 @-string 中。

因此，在您的情况下，要存储：

```
<span class="icon phone">m</span> 
```

你的字符串是：

```
string s = @"<span class=""icon phone"">m</span>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T19:15:36.470

要将引号保存在字符串中，您必须对其进行屏蔽：

您可以通过`string mystring = @"<span class=""icon phone"">m</span>";`或直接使用反斜杠屏蔽引号来屏蔽`(\)` `string mystring = "<span class=\"icon phone\">m</span>";`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T19:16:00.417

简单地

```
String html = "<span class=\"icon phone\">m</span>" 
```

或者您可以使用字符串文字：

```
String html = @"<span class=""icon phone"">m</span>" 
```

而已。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-25T19:16:06.007

尝试这个：

```
 string str="<span class=\"icon phone\">m</span>"; 
```

# java - GAE 上的 Primefaces 3.5 JSF 2.1 ClassNotFoundException

> ID：16222904
> 
> 赞同：0
> 
> 时间：2013-04-25T19:14:12.323
> 
> 标签：java, google-app-engine, jsf, jsf-2, primefaces

我尝试将我的 JSF 2.1 Webapp 迁移到 Google App 引擎。

一切在本地开发模式下运行正常，在 GAE 上部署也正常，但是当我尝试访问任何页面时，我得到 HTTP 代码 500。日志文件显示有一个 ClassNotFoundException：

```
INFO: com.sun.faces.lifecycle.ELResolverInitPhaseListener populateFacesELResolverForJsp: JSF1027: [null] 
      The ELResolvers for JSF were not registered with the JSP container.
WARNING: populateFacesELResolverForJsp: JSF1027: [null] The ELResolvers for JSF were not registered with the JSP container.
javax.servlet.ServletException: java.lang.RuntimeException:  
java.lang.ClassNotFoundException: com.sun.org.apache.xerces.internal.dom.ElementNSImpl
at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:268)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:438)
at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:480)
at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:487)
at com.google.tracing.TraceContext.runInContext(TraceContext.java:774)
at com.google.tracing.TraceContext$DoInTraceContext.runInContext(TraceContext.java:751)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:342)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:334)
at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:484)
at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
at java.lang.Thread.run(Thread.java:722) 
```

我已经尝试部署相应的库 jaxp-ri-1.4.jar 没有效果。

有关我的配置和第三方库的更多信息：

```
- Mojarra JSF 2.1.12
- Primefaces 3.5
- Primefaces Extensions 
- Prettyfaces 3.3.3
- Ebay Finding Api
- STATE_SAVING_METHOD set to 'client'
-  i use EL 2.2 form jboss seam  <context-param>
    <param-name>com.sun.faces.expressionFactory</param-name>
    <param-value>org.jboss.el.ExpressionFactoryImpl</param-value>
    </context-param> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T15:12:19.840

经过一些调试后，我发现 eBay Finding API 会导致问题，因为它使用 SOAP 进行服务调用。无需调用 eBay Api，一切正常。

```
com.sun.org.apache.xerces.internal.dom.NodeImpl is a restricted Class 
```

似乎 eBay 查找 API 与 Google App Engine 不兼容，因为它使用 JAX-WS。

# ios - iOS/iPhone - 在视图之间传递自定义对象。对象总是返回 null

> ID：16222909
> 
> 赞同：0
> 
> 时间：2013-04-25T19:14:26.693
> 
> 标签：ios, uiview, uiviewcontroller, nsobject

我正在尝试在视图之间传递一个自定义类。我已经为该类设置了一个属性，但是当我访问该属性时，属性总是返回 null：

**第一视图.m：**

```
- (void)initNextEventView{
NSDate *eventDate = [eventDatePicker date];
NSString *eventName = eventNameTextfield.text;

LocateEventViewController *locView = [[LocateEventViewController alloc]init];
locView.eventDTO.name = eventName;
locView.eventDTO.date = eventDate;

[[self navigationController] pushViewController:locView animated:YES];
} 
```

**LocateEventVC.h（2.视图）：**

```
@interface LocateEventViewController : UIViewController<MKMapViewDelegate, UISearchBarDelegate, BSForwardGeocoderDelegate>
@property (strong, nonatomic) IBOutlet UIImageView *imageBackground;
@property (strong, nonatomic) EventDTO *eventDTO; 
```

因此，当我记录**eventDTO**的属性时，它返回 null ..

任何帮助都会很棒

**编辑1（2.视图）：** 这就是我记录的方式：

```
NSLog(@"name on 2\. view: %@", eventDTO.name);
self.eventDTO.place = tmpEventPlace;
// init friends view!

//passing to next view
EventMembersViewController *members = [[EventMembersViewController alloc]init];

members.eventDTO = self.eventDTO; 
```

**事件DTO.h**

```
@interface EventDTO : NSObject

@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) UserDTO * creatorIsAppUser;
@property (nonatomic, retain) ContactDTO * creatorIsNotAppUser;
@property (nonatomic, retain) NSString * description;
@property (nonatomic, retain) NSDate * date;
@property (nonatomic, readwrite) NSInteger *eventID;
@property (nonatomic, retain) CustomPlacemark * place;
@property (nonatomic, retain) NSMutableArray *invitedMembers;
@property (nonatomic, retain) NSMutableArray *acceptedMembers;

- (NSNumber*)getLatidude;
- (NSNumber*)getLongitude; 
```

**事件DTO.m**

```
@synthesize place, date, eventID, name, acceptedMembers, description, invitedMembers;

- (NSNumber*)getLatidude{
    return [NSNumber numberWithDouble:place.coordinate.latitude];
}

- (NSNumber*)getLongitude{
    return [NSNumber numberWithDouble:place.coordinate.longitude];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:16:21.580

请参阅此帖子以获取完整说明。简而言之，你做错了：

[在视图控制器之间传递数据](https://stackoverflow.com/questions/5210535/passing-data-between-view-controllers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:16:43.077

您确定在访问and`eventDTO`之前设置或分配了该属性吗？`eventName``eventDate`

我的猜测是它`eventDTO`本身是零。`nil`在 Objective-C 中允许调用方法或访问对象的属性。它不会像在 C++ 或 Java 中那样崩溃，它只是什么都不做，`nil`如果 ht 方法有返回值则返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:30:15.873

我猜该属性`eventDTO`没有正确初始化，它`nil`本身就是。

在 Objective-C 中发送消息`nil`是合法的，它只是默默地失败并返回`nil`。在学习 Objetive-C 时，这是一个常见的陷阱。访问属性只是发送消息的语法糖。

顺便说一句，Objective-C 中的“空对象”由 、not 或 表示，`nil`尽管它们都为零。`null``NULL``NO`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T19:47:22.767

```
LocateEventViewController *locView = [[LocateEventViewController alloc]init];
locView.eventDTO.name = eventName;
locView.eventDTO.date = eventDate; 
```

当您启动`locView`时，对象 eventDTO 不存在。您必须在那里启动一个新的 eventDTO，例如：

```
LocateEventViewController *locView = [[LocateEventViewController alloc]init];
YourClass *eventDTO = [[YourClass alloc] init];
locView.eventDTO = eventDTO;
locView.eventDTO.name = eventName;
locView.eventDTO.date = eventDate; 
```

或直接在`-init`您的方法中`LocateEventViewController`添加

```
-(id)init {
...
self.eventDTO = [[YourClassHere alloc] init];
...
} 
```

# actionscript-3 - 使用 Flex 附加带有 ActionScript3 的 Sprite

> ID：16222916
> 
> 赞同：1
> 
> 时间：2013-04-25T19:14:38.493
> 
> 标签：actionscript-3, apache-flex

所以我使用 Flex 来访问一些有用的库，但我不想处理 MXML 的东西。所以我是用纯 AS3 写的。

基本上，我正在使用这个 MXML 加载主 AS3 类：

```
<?xml version="1.0" encoding="utf-8"?>
<local:Canvas xmlns:fx="http://ns.adobe.com/mxml/2009" xmlns:local="asset.*" /> 
```

现在从那里开始，AS3 接管并完成所有工作。但是，当我尝试`Canvas`使用 addChild() 方法向我的主类（它只是扩展应用程序）绘制一些东西时，它会抛出这个错误：

```
Type Coercion failed: cannot convert MyObject to mx.core.IUIComponent. 
```

我也尝试将它直接添加到`Canvas`对象的`stage`，但它是空的。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T19:16:29.427

您可以将对象包装在`UIComponent`假设`MyObject`是`DisplayObject`.

```
var uicomponent:UIComponent = new UIComponent(); 
uicomponent.addChild(yourObject);
canvas.addChild(uiComponent); 
```

# android - 在 Android 内核级别访问和使用加速度计的值

> ID：16222919
> 
> 赞同：0
> 
> 时间：2013-04-25T19:14:53.810
> 
> 标签：android, linux-kernel, accelerometer

如何访问 android 内核空间中的加速度计并使用它的数据？我正在做一个项目，我需要在手机移动（在汽车中）时控制手机的一些功能，并且我想使用加速度计来帮助确定手机是否加速。这一切都必须在内核空间中完成。我在 android 开发者页面上找到了如何使用加速度计和 SensorEvent 来检测用户级应用程序中的变化。但是如何在内核级别做类似的事情呢？我应该进行系统调用吗？

通过环顾四周和搜索，我认为这些文件位于 /goldfish/drivers/hwmon/ 中，但我不太确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T20:59:50.193

加速度计输入，在前级，取自*/dev/input/event*设备。您可以使用工具箱的 来验证这一点`getevent()`，它会在您倾斜手机时实时显示输入事件（如果有记忆，您需要*/dev/input/event3*但您可以自己轻松检查）。

加速度计的驱动程序会导出这个字符设备，然后 Android 运行时（在*libhardware*的帮助下）随后会转换为熟悉的 SensorEvent。没有用于此的内核 API。您最简单的解决方案是直接与*/dev/event*交互。这可以通过两种方式完成：

1.  用户模式守护进程监听*/dev/event*，并与您的内核线程进行通信（例如，通过阻塞内核模块导出的另一个字符设备、反向系统调用等）

2.  不推荐但可以工作 - 从内核模式打开*/dev/input/event*（使用直接调用`sys_open`然后调用`sys_read`）。这将需要“解决”内核保护（最值得注意`KERNEL_DS`的是设置）。

# tsql - 使用多列不存在

> ID：16222941
> 
> 赞同：0
> 
> 时间：2013-04-25T19:15:51.160
> 
> 标签：tsql, sql-server-2005

我试图在我的#TempTable 中查找不在临时表中的所有记录。需要注意的是，比较需要在 16 个字段上进行。

我尝试了几种组合，但似乎没有任何效果。

```
 SELECT CustomerAccountNo FROM #TempTable        
    WHERE NOT EXISTS
    (SELECT e.[CustomerAccountNo] ,
    e.[MeterNo] ,
    e.[CustomerName1] ,
    e.[ServiceAddress1] ,
    e.[ServiceAddress2] ,
    e.[ServiceCity] ,
    e.[ServiceState] ,
    e.[ServiceZip] ,
    e.[BillingAddress1] ,
    e.[BillingAddress2] ,
    e.[BillingAddress3] ,
    e.[BillingCity] ,
    e.[BillingState] ,
    e.[BillingZip] ,
    e.[BillingZip4] ,
    e.[PrimaryPhoneNumber] FROM #TempTable e
    JOIN dbo.Staging s
    ON e.CustomerAccountNo = s.CustomerAccountNo AND
    e.MeterNo = s.MeterNo AND
    e.CustomerName1 = s.CustomerName1 AND
    e.ServiceAddress1 = s.ServiceAddress1 AND
    e.ServiceAddress2 = s.ServiceAddress2 AND
    e.ServiceCity = s.ServiceCity AND
    e.ServiceState = s.ServiceState AND
    e.ServiceZip = s.ServiceZip AND
    e.BillingAddress1 = s.BillingAddress1 AND
    e.BillingAddress2 = s.BillingAddress2 AND
    e.BillingAddress3 = s.BillingAddress3 AND
    e.BillingCity = s.BillingCity AND
    e.BillingState = s.BillingState AND
    e.BillingZip = s.BillingZip AND
    e.BillingZip4 = s.BillingZip4 AND
    e.PrimaryPhoneNumber= s.PrimaryPhoneNumber          
    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T19:20:35.820

代替 a `JOIN`，尝试使用[except。](http://msdn.microsoft.com/en-us/library/ms188055%28v=sql.90%29.aspx)

```
SELECT CustomerAccountNo, MeterNo -- and so on
FROM #TempTable
EXCEPT
SELECT CustomerAccountNo, MeterNo -- and so on
FROM Staging 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T19:32:14.003

您应该提供更详细的情况以获得正确答案。

显然，您的 FROM 子句和 WHERE 子句之间没有任何联系，因此查询将全部返回。

试试这个：

```
SELECT CustomerAccountNo FROM #TempTable t       
WHERE NOT EXISTS
    (SELECT 1 FROM dbo.Staging s WHERE
    t.CustomerAccountNo = s.CustomerAccountNo AND
    t.MeterNo = s.MeterNo AND
    t.CustomerName1 = s.CustomerName1 AND
    t.ServiceAddress1 = s.ServiceAddress1 AND
    t.ServiceAddress2 = s.ServiceAddress2 AND
    t.ServiceCity = s.ServiceCity AND
    t.ServiceState = s.ServiceState AND
    t.ServiceZip = s.ServiceZip AND
    t.BillingAddress1 = s.BillingAddress1 AND
    t.BillingAddress2 = s.BillingAddress2 AND
    t.BillingAddress3 = s.BillingAddress3 AND
    t.BillingCity = s.BillingCity AND
    t.BillingState = s.BillingState AND
    t.BillingZip = s.BillingZip AND
    t.BillingZip4 = s.BillingZip4 AND
    t.PrimaryPhoneNumber= s.PrimaryPhoneNumber          
    ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:19:38.407

只需进行连接并查找空值。像这样

```
SELECT e.*
 FROM #TempTable e
 LEFT JOIN dbo.Staging s
    ON e.CustomerAccountNo = s.CustomerAccountNo AND
    e.MeterNo = s.MeterNo AND
    e.CustomerName1 = s.CustomerName1 AND
    e.ServiceAddress1 = s.ServiceAddress1 AND
    e.ServiceAddress2 = s.ServiceAddress2 AND
    e.ServiceCity = s.ServiceCity AND
    e.ServiceState = s.ServiceState AND
    e.ServiceZip = s.ServiceZip AND
    e.BillingAddress1 = s.BillingAddress1 AND
    e.BillingAddress2 = s.BillingAddress2 AND
    e.BillingAddress3 = s.BillingAddress3 AND
    e.BillingCity = s.BillingCity AND
    e.BillingState = s.BillingState AND
    e.BillingZip = s.BillingZip AND
    e.BillingZip4 = s.BillingZip4 AND
    e.PrimaryPhoneNumber= s.PrimaryPhoneNumb
    WHERE s.CustomerAccountNo is null 
```

# sql - msaccess 查找包含特定文本的查询

> ID：16222943
> 
> 赞同：1
> 
> 时间：2013-04-25T19:15:56.950
> 
> 标签：sql, ms-access, ms-access-2007

我正在尝试编写一个查询，列出包含特定文本“TEXT”的访问数据库中的查询

我上网查了一下，发现是这样的：

```
SELECT [Name] FROM MsysObjects
WHERE (([Type] = 5) AND ([Name] Not Like "~*") AND ([Name] Not Like "MSys*"))
ORDER BY [Name]; 
```

但我的问题是如何在查询中找到实际文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:33:53.370

经过一番搜索，我能够写/找到这个：

```
SELECT DISTINCT MSysObjects.Name
FROM MSysObjects INNER JOIN MSysQueries ON MSysObjects.Id = MSysQueries.ObjectId
WHERE (((MSysQueries.Expression) Like "*TEXT*") AND ((MSysObjects.Type)=5)); 
```

# javascript - 同步 Javascript；没有回调

> ID：16222944
> 
> 赞同：0
> 
> 时间：2013-04-25T19:15:57.000
> 
> 标签：javascript, jquery

我有一个适用于大多数浏览器的应用程序。不幸的是，对于 Windows Phone 8 上的 Internet Explorer 10，我可以更改的内容非常有限。有一些函数在 WP IE10 中不起作用——但我想通过劫持这些函数来解决这些问题，而不是重写任何代码。

```
var valueNeeded =  myFunction("settings")

// This function cannot have another param without me having to change lots of code
myFunction = function (field) {
    db.values('tblStorage', null, 10).done(function (results) {
        return (results[i].value);
    });
} 
```

我遇到的问题是数据库调用不是阻塞/同步的，因此返回不起作用。通常我会在参数中添加一个回调，但是因为我想要一个适用于所有浏览器的代码库，所以我真的不能这样做。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:21:58.070

异步函数要求整个调用栈是异步的。

我会将您的代码重写为：

```
myFunction("settings").done(function (value) {
    console.log("value", value);
});

myFunction = function (field) {
    // v-- added return here                 v-- then here, so we return another promise (so we can call .done())
    return db.values('tblStorage', null, 10).then(function (results) {
        return (results[i].value);
    });
} 
```

那么`myFunction`返回什么？它返回一个承诺。承诺，当它被解决时，它将具有您要求的价值。

更准确地说：`myFunction`返回 的值`db.values(/**/).then()`，这是一个承诺。`db.values(/**/)`还返回一个承诺。您可以堆叠 Promise 并将它们链接在一起以获得一种异步管道和过滤器。

如果你解开这些函数，你会得到这样的东西：

```
myFunction = function (field) {
    var value_promise = db.values('tblStorage', null, 10);
    var filtered_value_promise = value_promise.then(function (results) {
        return (results[i].value);
    });
    return filtered_value_promise;
} 
```

# iis-7 - 从 IIS 中的 WindowsAuthentication 中删除 NEGOTIATE

> ID：16222946
> 
> 赞同：6
> 
> 时间：2013-04-25T19:16:02.410
> 
> 标签：iis-7, iis-7.5, windows-authentication, kerberos

我有一个在 IIS 7.5 中运行的站点，该站点使用与实际服务器名称不同的 DNS 别名进行访问。在 IE 8 中，集成身份验证失败，但在 Firefox 和 Chrome 中一切正常。（IE 多次提出凭据质询，然后显示 401.1 错误页面。）

我发现这是由于 IE 在 NTLM 上使用 Kerberos（又名“协商”），而 Kerberos 需要注册服务主体名称（使用 SETSPN），以便正确处理 DNS 名称和服务器名称之间的不匹配。

然而，我的网站不需要模拟——拥有授权就足够了。因此，我不想弄乱 SetSPN，而是想从 IIS 中的 WindowsAuthentication 方法列表中删除“协商”。

我已经搜索了相当长的时间来了解如何在 IIS 中执行此操作。我玩过很多`appcmd`命令——但我就是找不到在线示例，或者通过阅读 MSDN 文档或使用`appcmd /?`使`appcmd`命令仅适用于站点内的特定应用程序而不是整个 Web 服务器来弄清楚如何。两天后的几个搜索小时，至少访问了 3 打网页，我仍然没有结果。

我是如何完成这项工作的——看起来应该很容易！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T19:16:02.410

在 IIS 中打开配置编辑器。它带有 IIS 7.5，或者您可以下载 IIS 7.0 的[IIS 管理包](http://www.iis.net/downloads/microsoft/administration-pack)。导航到要影响的范围（服务器、站点或应用程序），然后打开图标：

![IIS 配置编辑器](https://i.stack.imgur.com/VZiIR.png).

将部分更改为`system.webServer/security/authentication/windowsAuthentication`：

![IIS 配置编辑器 - Windows 身份验证](https://i.stack.imgur.com/h2rSu.png)

单击该`providers`项目，然后单击`Edit Items`右侧。选择“协商”项，然后单击“删除”：

![IIS 配置编辑器 - Windows 身份验证 - 提供程序](https://i.stack.imgur.com/qBUEM.png)

关闭对话框并单击右侧`Apply`的窗格。`Actions`

你的问题解决了！不再有 Kerberos/协商！

**注意**：您还可以`Generate Script`在操作窗格中单击以显示将在 C#、javascript 或命令行中使用 appcmd 进行更改的代码。

作为参考，这里是在`appcmd`不使用配置编辑器的情况下完成这项工作的声明。

```
appcmd.exe set config "Virtual/path/to/application" -section:system.webServer/security/authentication/windowsAuthentication /-"providers.[value='Negotiate']" /commit:apphost 
```

# python - 将文件逐行读入Python中的数组元素

> ID：16222956
> 
> 赞同：22
> 
> 时间：2013-04-25T19:16:19.200
> 
> 标签：python, arrays, file, readline

因此，在 Ruby 中，我可以执行以下操作：

```
testsite_array = Array.new
y=0
File.open('topsites.txt').each do |line|
testsite_array[y] = line
y=y+1
end 
```

在 Python 中如何做到这一点？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-25T19:17:20.387

```
testsite_array = []
with open('topsites.txt') as my_file:
    for line in my_file:
        testsite_array.append(line) 
```

这是可能的，因为 Python 允许您直接迭代文件。

或者，更直接的方法，使用[`f.readlines()`](http://docs.python.org/2/library/stdtypes.html#file.readlines)：

```
with open('topsites.txt') as my_file:
    testsite_array = my_file.readlines() 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-25T19:17:20.210

只需打开文件并使用该`readlines()`功能：

```
with open('topsites.txt') as file:
    array = file.readlines() 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-25T19:17:39.063

在python中，您可以使用`readlines`文件对象的方法。

```
with open('topsites.txt') as f:
    testsite_array=f.readlines() 
```

或简单地使用`list`，这与使用相同，`readlines`但唯一的区别是我们可以将可选的大小参数传递给`readlines`：

```
with open('topsites.txt') as f:
    testsite_array=list(f) 
```

帮助`file.readlines`：

```
In [46]: file.readlines?
Type:       method_descriptor
String Form:<method 'readlines' of 'file' objects>
Namespace:  Python builtin
Docstring:
readlines([size]) -> list of strings, each a line from the file.

Call readline() repeatedly and return a list of the lines so read.
The optional size argument, if given, is an approximate bound on the
total number of bytes in the lines returned. 
```

# command-line - 请解释批处理命令

> ID：16222966
> 
> 赞同：1
> 
> 时间：2013-04-25T19:16:52.720
> 
> 标签：command-line, batch-file

我想用当前日期和时间的名称创建一个文件夹。经过大量搜索后，我发现这确实有效。

有人可以解释这些批处理命令的作用吗？

```
set timestamp=%DATE:/=-%@%TIME::=-%
set timestamp=%timestamp: =%
mkdir "%timestamp%" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T19:23:11.987

在行间插入echo语句，可以看到timestamp的值是多少

```
set timestamp=%DATE:/=-%@%TIME::=-%
echo %timestamp%
set timestamp=%timestamp: =%
echo %timestamp%
mkdir "%timestamp%" 
```

基本上，代码只是从日期和冒号中删除正斜杠，因为这些不是有效的目录名称，用连字符替换它们。

读集/？环境变量替换以获得更好的想法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T19:24:02.937

```
set timestamp=%DATE:/=-%@%TIME::=-% 
```

那是字符串替换。

第一个：

**%DATE:/=-%**将 DATE 变量中的“/”字符替换为“-”字符

（请参阅：控制台上的**Echo %DATE% ）**

第二：

将“@”字符添加到 DATE 变量之后和 TIME 变量之前的字符串。

第三：

**%TIME::=-%**将“:”字符替换为“-”字符。

（请参阅：控制台上的**Echo %Time% ）**

```
set timestamp=%timestamp: =% 
```

接下来的替换将自己的空格替换为任何字符（因此删除空格），但实际上给出了任何空格，因此在您的示例代码中没有必要。

您可以在此处了解有关变量字符串替换的更多信息：http: [//ss64.com/nt/syntax-replace.html](http://ss64.com/nt/syntax-replace.html)

您还可以简化代码，因为无需先设置值：

```
mkdir "%DATE:/=-%@%TIME::=-%" 
```

# redhawksdr - 解决初始参考“NameService”的问题

> ID：16222968
> 
> 赞同：0
> 
> 时间：2013-04-25T19:16:59.620
> 
> 标签：redhawksdr

我已经按照安装说明进行了多次梳理，但我仍然无法确定为什么我无法解析 NameService。我运行了omniNames 服务，但是当我运行omniEvents 时，我得到以下信息

```
omniEvents: [32190]: Warning - failed to resolve initial reference 'NameService'. Exception NO_RESOURCES 
```

当我尝试在 IDE 的沙盒中连接时，我收到了同样的错误消息，但我仍然能够在 IDE 沙盒中运行组件并连接它们。

我运行 nameclt list 并收到以下输出

`Cannot resolve the root context. Have you set up the configuration file properly?`

我的配置文件包含以下内容

```
InetRef = NameService=corbaname::127.0.0.1
InetRef = EventService=corbaloc::127.0.0.1:11169/omniEvents 
```

我还验证了服务正在使用 netstat 在正确的端口上启动。

我缺少什么才能连接到名称服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T21:38:58.560

看来您的错误可能是由于 /etc/omniORB.cfg 中的拼写错误。在您的示例中，当它应该是“InitRef”时使用“InetRef”。

仔细检查设置，然后重新启动omniNames 和omniEvents 并再次尝试nameclt。如果您收到如下错误：

```
$ nameclt list
Caught a TRANSIENT exception when trying to validate the type of the 
NamingContext. Is the naming service running? 
```

仔细检查omniNames 是否确实在运行（即ps -ef | grep omniNames）。

# go - 获取切片的所有排列

> ID：16222979
> 
> 赞同：6
> 
> 时间：2013-04-25T19:17:25.270
> 
> 标签：go, permutation

我想知道是否有办法在 Go 中找到一个充满字符的切片的所有排列？

在 Python 中，您可以使用`itertools.product`列表、字符或整数，并且可以获得所有可能的排列。

我已经查看了那里是否有包裹，但我似乎找不到。欢迎任何帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T19:35:30.110

任何实现的排列[`sort.Interface`](http://golang.org/pkg/sort/#Interface)：[排列{First,Next}](http://godoc.org/github.com/cznic/mathutil#PermutationFirst)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T19:30:37.473

这是我编写的置换函数的实现......

[https://github.com/itcraftsman/GoPermutation](https://github.com/itcraftsman/GoPermutation)

```
func permutate(slice [][]int) (permutations [][][]int){
    f := fac(len(slice))
    for i := 0; i < len(slice); i++ {
        elem, s := splice(slice, i)
        pos := 0
        for count := 0; count < (f / len(slice)); count++{
            if pos == (len(s) -1) {
                pos = 0
            }
            s = swap(s, pos, pos +1)
            permutation := make([][]int, len(slice))
            permutation = s
            permutation = append(permutation, elem)
            permutations = append(permutations, permutation)
            pos++
        } 
    } 
    return
} 
```

它将 2D 切片作为输入并返回 3D 切片，但您可以轻松更改代码，以便该函数将简单切片作为输入并返回具有所有排列的 2D 切片

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-15T07:33:02.603

不确定这是否能回答您的问题，但这是一个简单的递归实现，可以找到下面的输出。

```
package main

import "fmt"

func main() {
    values := [][]int{}

    // These are the first two rows.
    row1 := []int{1, 2, 3}
    row2 := []int{4, 5, 6}
    row3 := []int{7, 8, 9}

    // Append each row to the two-dimensional slice.
    values = append(values, row1)
    values = append(values, row2)
    values = append(values, row3)

    fmt.Println(getPermutation(values))
}

func getPermutation(vids [][]int) [][]int {
    toRet := [][]int{}

    if len(vids) == 0 {
      return toRet
    }

    if len(vids) == 1 {
        for _, vid := range vids[0] {
            toRet = append(toRet, []int{vid})
        }
        return toRet
    }

    t := getPermutation(vids[1:])
    for _, vid := range vids[0] {
        for _, perm := range t {
            toRetAdd := append([]int{vid}, perm...)
            toRet = append(toRet, toRetAdd)
        }
    }

    return toRet
} 
```

[https://play.golang.org/p/f8wktrxkU0](https://play.golang.org/p/f8wktrxkU0)

上述代码段的输出：

```
[[1 4 7] [1 4 8] [1 4 9] [1 5 7] [1 5 8] [1 5 9] [1 6 7] [1 6 8] [1 6 9] [2 4 7] [2 4 8] [2 4 9] [2 5 7] [2 5 8] [2 5 9] [2 6 7] [2 6 8] [2 6 9] [3 4 7] [3 4 8] [3 4 9] [3 5 7] [3 5 8] [3 5 9] [3 6 7] [3 6 8] [3 6 9]] 
```

# r - R中多个类别之间的密度图

> ID：16222980
> 
> 赞同：0
> 
> 时间：2013-04-25T19:17:30.660
> 
> 标签：r, density-plot

我有一个数据集的文本文件。它列出了两个变量：它来自的个人以及与该个人相关的特定值。为方便起见，假设这是一个人，并且在他们的一生中任意测量体重。

该文件设置如下（带有标题）：

```
person     weight #header line
individual_1     arbitrary_weight_value
individual_2     arbitrary_weight_value
individual_3     arbitrary_weight_value
individual_1     arbitrary_weight_value 
```

等等。我正在尝试使用 R 创建每个人权重的密度图。所有权重的总密度图如下：

```
d <- density(my_data$weight)
plot(d) 
```

但是，我想要每个人的个人密度图。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:35:28.610

这个数据框是否与您拥有的实际数据相似？

```
df <- data.frame(id = rep(LETTERS[1:8], 10), weight = as.integer(rnorm(80, 80, 10)))

> head(df)
  id weight
1  A     78
2  B     72
3  C     76
4  D     58
5  E     84
6  F     78

library(ggplot2)
ggplot(df, aes(x=weight)) + 
  geom_density(alpha=.2, fill="#FF6666") +
  facet_wrap( ~ id, nrow=2) 
```

![在此处输入图像描述](https://i.stack.imgur.com/Xzsy5.png)

# asp.net - 奇怪的列表框行为。除非添加另一个项目或通过退出和返回重新加载页面，否则新项目不会显示

> ID：16222981
> 
> 赞同：1
> 
> 时间：2013-04-25T19:17:31.133
> 
> 标签：asp.net, webforms

这是我屏幕的一部分： ![我的屏幕](https://i.stack.imgur.com/ExIqo.jpg)

用户可以从下拉列表中选择一个选项，然后单击添加按钮。这是添加按钮的代码：

```
 protected void btnModuleAdd_Click(object sender, EventArgs e)
    {   
        var selectedModule = ddlModsList.SelectedItem.ToString();
        var graphicName = this.GraphicName;

        var xr = new GraphicModuleXRef();
        xr.GraphicName = graphicName;
        xr.Module = selectedModule;

        // Take drop down list selection and add it to GraphicModuleXRef table.
        var context = new XRefDataContext();
        context.GraphicModuleXRefs.InsertOnSubmit(xr);
        context.SubmitChanges();
    } 
```

基本上，它接受用户的选择并将其写到表格中。这部分工作正常。

在我的 Page_Load 中，我检查是否 IsPostback，如果是，我运行以下代码：

```
private void LoadOtherModulesUsed()
    {
        if (this.GraphicName != null)
        {
            lbModules.Items.Clear();
            var context = new XRefDataContext();
            var q = context.GraphicModuleXRefs
                           .Where(a => a.GraphicName.Contains(this.GraphicName));

            foreach (GraphicModuleXRef gr in q)
            {
                lbModules.Items.Add(new ListItem(gr.Module.ToString()));
            }
        }
    } 
```

此代码从表中读取，查找与条件匹配的所有记录，并将它们添加到列表框中。

所以，我期望发生的是重新加载页面并重新填充列表框，包括刚刚添加到表中的新条目。但是，这并没有发生。屏幕像重新加载一样刷新，但条目没有出现在列表框中。然而，它就在那里，只是看不见而已。如果用户添加另一个条目，通过单击“添加”按钮，列表会“向上滚动”一行，并且可以看到前一个条目。但是，不是新的。如果用户退出屏幕并重新进入，则可以看到列表框中的所有条目。几乎就像列表框太短而无法显示所有记录，但我尝试了不同的高度，没有区别。

我想知道是否有人可以指出我正确的方向？

简而言之，当向列表框添加新项目时，除非添加另一个项目，否则它不会立即可见，从而“滚动”列表。在添加另一个条目之前，即使使用滚动条滚动列表也不会显示新条目。而且，如果您向上滚动列表，您可以看到先前的条目。这么奇怪！

编辑：试图更简单地描述这一点：

1.  用户通过按添加按钮将项目添加到列表框。
2.  新项目不会出现在列表框中。
3.  用户通过按添加按钮将另一个项目添加到列表框。
4.  如果用户向上滚动列表框，则先前的项目现在显示在列表框中。
5.  但是，除非重复第 3 步，否则不会出现刚刚添加的最新项目。
6.  此外，退出页面然后返回加载列表中的每个项目并且所有项目都是可见的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:29:52.350

这是一个时间问题。发生的事情是 Page_Load 在这种情况下首先运行，然后 Click 事件处理程序在添加新条目之前有效地绑定了控件。这就是为什么你总是落后一个刷新。我会像这样重构您的代码，以便一切都以正确的顺序运行！要了解事件执行的时间安排，我强烈建议您[阅读 MSDN 上的这篇文章，它真棒](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx#lifecycle_events)，它将真正帮助您充分利用 ASP.NET。

另外[阅读 MSDN 上的这篇文章（也很棒）](http://msdn.microsoft.com/en-GB/library/75x4ha6s%28v=vs.100%29.aspx)，尤其是 ViewState 部分将解释 DropDown 如何保留其详细信息，即使在修改后的代码中，您仅在页面不是回发并且单击事件是时才填充它被解雇了。

希望这可以帮助！

```
public void Page_Load(object sender, EventArgs e)
{
   if (IsPostBack) return;
   LoadOtherModulesUsed();
}

private void LoadOtherModulesUsed()
{
    if (this.GraphicName != null)
    {
        lbModules.Items.Clear();
        var context = new XRefDataContext();
        var q = context.GraphicModuleXRefs
                       .Where(a => a.GraphicName.Contains(this.GraphicName));

        foreach (GraphicModuleXRef gr in q)
        {
            lbModules.Items.Add(new ListItem(gr.Module.ToString()));
        }
    }
}

protected void btnModuleAdd_Click(object sender, EventArgs e)
{   
    var selectedModule = ddlModsList.SelectedItem.ToString();
    var graphicName = this.GraphicName;

    var xr = new GraphicModuleXRef();
    xr.GraphicName = graphicName;
    xr.Module = selectedModule;

    // Take drop down list selection and add it to GraphicModuleXRef table.
    var context = new XRefDataContext();
    context.GraphicModuleXRefs.InsertOnSubmit(xr);
    context.SubmitChanges();
    LoadOtherModulesUsed();
} 
```

# visual-c++ - 如何创建和维护特定于机器的 Visual C++ 解决方案设置？

> ID：16222982
> 
> 赞同：2
> 
> 时间：2013-04-25T19:17:33.123
> 
> 标签：visual-c++, version-control, settings

我的团队一直在开发一个软件包。代码受源代码版本控制。到目前为止，每个开发人员都在手动设置自己的开发环境（我们使用 Visual C++，最近升级到 2012）。现在项目的结构变得越来越复杂，构建配置也很重要，为了方便新手，我决定创建一个可移植的解决方案并将其添加到源代码控制系统中。

问题是我需要开发人员能够根据他们的特定需求（主要是预处理器#define's）设置解决方案，而不会干扰其他人的解决方案。

VC++ 正在为每个项目创建一个 .user 文件，该文件似乎旨在为每个用户保存设置，但我不确定如何添加设置以便将它们存储在此文件中（我从源代码管理中排除）而不是在项目文件或属性表文件（包含在源代码管理中）中。

我怎样才能做到这一点？谢谢。

# html - 显示某些标签 django 模板

> ID：16222983
> 
> 赞同：0
> 
> 时间：2013-04-25T19:17:35.320
> 
> 标签：html, django, python-2.7, django-templates

如果我希望能够使用 django tempalte 变量只显示某些标签（比如在论坛帖子中），我该怎么做？

说我帖子的内容是：

```
<div><b>Hell</div>o <i>everyone</i></b> 
```

我不想显示 div 标签，但是 b 和 i 标签很好。我知道您可以使用 |safe 和 autoescape，但这似乎可以转义所有 html。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T21:22:48.333

您可以使用带有**正则表达式的****自定义 Django 过滤器**来执行此操作。

 **看看这里：[http](http://djangosnippets.org/snippets/60/) ://djangosnippets.org/snippets/60/用你需要的替换正则表达式来删除你不想要的 HTMl 标签。**

# math - 平面上的切线

> ID：16222994
> 
> 赞同：1
> 
> 时间：2013-04-25T19:18:16.947
> 
> 标签：math, opengl, opengl-es

目前我正在尝试做一些凹凸贴图，但想知道如何找到平面的切线。我已经定义了我的法线，但不确定切线，我画了一个图表，想要确认这是否正确。

T 代表切线，N 代表法线 ![在此处输入图像描述](https://i.stack.imgur.com/R9YmA.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T21:05:33.027

这是一个[链接](http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-13-normal-mapping/)，您可以显示切线的漂亮图片并解释为什么选择切线的某些方向。请记住，任何垂直于法线的向量都是有效的切线（围绕法线的一整圈向量将沿着切线平面传播。）因此，您的图表在技术上是正确的。切线（和双切线）向量通常被选择为沿着纹理的正 U 和 V 方向彼此成直角移动，但可以简化凹凸/法线贴图。请参阅链接。

# c++ - 将一个字符串解析为两个双精度

> ID：16222997
> 
> 赞同：2
> 
> 时间：2013-04-25T19:18:27.707
> 
> 标签：c++, string, parsing, double

我有一个格式为#########s###.## 的字符串，其中#### 只是几个数字，第二部分通常是小数，但并非总是如此。

我需要将两个数字分开，并将它们设置为两个双打（或其他一些有效的数字类型。

我只能为此使用标准方法，因为运行它的服务器只有标准模块。

我目前可以使用 find 和 substr 获取第二块，但不知道如何获取第一块。我还没有做任何将第二部分更改为数字类型的操作，但希望这会容易得多。

这就是我所拥有的：

```
 string symbol,pieces;

    fin >> pieces; //pieces is a string of the type i mentioned #####s###.##
    unsigned pos;
    pos = pieces.find("s");
    string capitals = pieces.substr(pos+1);
    cout << "Price of stock " << symbol << " is " << capitals << endl; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T19:34:07.430

`istringstream`让它变得容易。

```
#include <iostream>
#include <sstream>
#include <string>

int main(int argc, char* argv[]) {
  std::string input("123456789s123.45");

  std::istringstream output(input);

  double part1;
  double part2;

  output >> part1;

  char c;

  // Throw away the "s"
  output >> c;

  output >> part2;

  std::cout << part1 << ", " << part2 << std::endl;

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T19:22:39.220

您可以在调用时指定计数和偏移量[`substr`](http://www.sgi.com/tech/stl/basic_string.html)：

```
string first = pieces.substr(0, pos);
string second = pieces.substr(pos + 1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T19:23:23.677

您可以执行与第二部分相同的操作：

```
 unsigned pos;
 pos = pieces.find("s");
 string firstPart = pieces.substr(0,pos); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T19:28:59.917

抓住第一块很容易：

```
string firstpiece = pieces.substr(0, pos); 
```

至于转换为数字类型，我发现`sscanf()`对此特别有用：

```
#include <cstdio> 

std::string pieces;
fin >> pieces; //pieces is a string of the type i mentioned #####s###.##

double firstpiece = 0.0, capitals = 0.0;
std::sscanf(pieces.c_str() "%lfs%lf", &firstpiece, &capitals);
... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T19:29:02.413

此代码将`string`根据您的需要拆分并将它们转换为`double`，它也可以很容易地更改为转换`float`为：

```
#include <iostream>
#include <sstream>
#include <string>
#include <stdexcept>

class BadConversion : public std::runtime_error {
public:
  BadConversion(std::string const& s)
    : std::runtime_error(s)
    { }
};

inline double convertToDouble(std::string const& s,
                              bool failIfLeftoverChars = true)
{
  std::istringstream i(s);
  double x;
  char c;
  if (!(i >> x) || (failIfLeftoverChars && i.get(c)))
    throw BadConversion("convertToDouble(\"" + s + "\")");
  return x;
}

int main()
{
  std::string symbol,pieces;

    std::cin >> pieces; //pieces is a string of the type i mentioned #####s###.##
    unsigned pos;
    pos = pieces.find("s");
    std::string first = pieces.substr(0, pos);
    std::string second = pieces.substr(pos + 1);
    std::cout << "first: " << first << " second " << second << std::endl;
    double d1 = convertToDouble(first), d2 = convertToDouble(second) ;
    std::cout << d1 << " " << d2 << std::endl ;
} 
```

仅供参考，我从[之前的一个答案](https://stackoverflow.com/questions/16181630/how-to-check-stdstring-if-its-indeed-an-integer/16181759#16181759)中获取了转换代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-25T19:41:42.913

有些人会抱怨这不是 C++-y，但这是有效的 C++

```
 char * in = "1234s23.93";
  char * endptr;
  double d1 = strtod(in,&endptr);
  in = endptr + 1;
  double d2 = strtod(in, &endptr); 
```