# StackOverflow 问答 14562000-14562999

# c# - 从字符串创建日期时间

> ID：14562000
> 
> 赞同：-4
> 
> 时间：2013-01-28T12:25:21.067
> 
> 标签：c#, .net

我需要用 HH:MM:SS + 当前日期创建一个 DateTime

```
string myTime = "08:50:00";
DateTime currentDateTime = DateTime.UtcNow.date; 
```

结果应该是结合了这些信息的 DateTime。怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:26:51.373

您需要使用`ParseExact`- [http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)

所以：

```
var provider = CultureInfo.InvariantCulture;
var date = DateTime.ParseExact(myTime,"hh:mm:ss",provider); 
```

它应该使用当前日期作为日期部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:30:52.950

这是你想要的吗：

```
DateTime dateTime = DateTime.Today + TimeSpan.Parse(myTime); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:28:45.600

```
string myDateTimeString;  
DateTime dt;   
dt = Convert.ToDateTime(myDateTimeString); 
Response.Write(dt.Day + "/" + dt.Month + "/" + dt.Year); 
```

见[http://www.ezineasp.net/post/C-Convert-String-to-DateTime.aspx](http://www.ezineasp.net/post/C-Convert-String-to-DateTime.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T12:30:50.770

你可以尝试类似的东西

```
 const string myTime = "08:50:00";
  DateTime now = DateTime.Now;
  string[] split = myTime.Split(':');
  DateTime dt = new DateTime(now.Year, now.Month, now.Day, int.Parse(split[0]), int.Parse(split[1]), int.Parse(split[2])); 
```

但是您应该添加一些空值检查和其他验证。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T12:33:03.183

```
string myTime = "08:50:00";
                DateTime currentDateTime = DateTime.UtcNow.Date;
               string myDateTime = string.Format("{0}-{1}-{2} {3}", currentDateTime.Year, currentDateTime.Month, currentDateTime.Day,
                              myTime);

               DateTime dt = Convert.ToDateTime(myDateTime, new CultureInfo("en-GB"));

                //or
                DateTime myNewDatetime = new DateTime(currentDateTime.Year, currentDateTime.Month, currentDateTime.Day,
                                                      8, 50, 0); 
```

# node.js - Node.js：将内部模块放在文件夹结构中的什么位置？

> ID：14562001
> 
> 赞同：5
> 
> 时间：2013-01-28T12:25:22.553
> 
> 标签：node.js, npm, directory-structure, node-modules

## 情况

我经常看到具有以下结构的 Node.js 应用程序：

*常见模式：*

*   `lib/`或`src/`- 自写代码
    *   `index.js`- 主要代码
    *   *内部模块*...（例如为本项目自行编写）
*   `node_modules`
    *   *外部模块*...（例如取自另一个项目）
*   `package.json`

## 我的问题

我不喜欢这种模式的地方：

*   我**对此感到不舒服**，因为您必须在ing时**明确指定**内部模块的目录路径：`require()`

    ```
    // /lib/index.js

    var internalMod = require('./internal'); // `require('internal')` (without path) wouldn't work
    internalMod.doSomething(); 
    ```

## 我的点子

所以我认为将**内部模块放在一个`node_modules`文件夹中（**项目中的某个地方）也是一个好主意。`node`即使您没有明确指定路径，也可以找到它们。

*例如：*

*   `src/`- 自写代码
    *   `index.js`- 主要代码
    *   `node-modules`- 用于内部
        *   *内部模块*...
*   `node_modules`- 用于外部
    *   *外部模块*...（例如取自另一个项目）
*   `package.json`

## 我的问题

1.  **我的计划有什么缺点吗？**
2.  **是否有另一个想法将内部模块放置在文件夹结构中？**

感谢您的回答（或评论）。- 如果有任何不清楚的地方，请发表评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T08:44:23.160

也许您可以使用`npm link`将模块拉入 node_modules？请参阅：[https ://docs.npmjs.com/cli/link](https://docs.npmjs.com/cli/link)

# javascript - localscroll活动链接url识别

> ID：14562005
> 
> 赞同：1
> 
> 时间：2013-01-28T12:25:33.127
> 
> 标签：javascript, jquery

通过 localscroll 和 scrollto，我构建了一个水平滑动页面（[Environment](http://mhdev.square7.ch/ngoctest)），还将哈希添加到 url。示例：当从 localScroll 单击导航中的链接时，它会在 url (index.html#media) 中添加哈希。

现在通过 Localscroll 没有活动链接支持，我想添加它并在这里找到了一些解决方案：[Stackoverflow](https://stackoverflow.com/questions/7181836/jquery-localscroll-how-to-add-class-to-clicked-a)

我很高兴，但后来我尝试重新加载页面，当用户在媒体部分时，例如在媒体部分，不支持识别 url，并且它不会将选定的类添加到当前选择的导航链接中网址。

所以我做了更多的研究，发现了那个网站：[网站](http://intelligentstudios.co.uk/HTML/index-sixlinks.html)

很棒，但它不适用于我的水平设置。我几乎没有开始了解javascript，我什至根本不知道如何jquery，所以我用我的逻辑修改了脚本并且到目前为止：

我添加了类，即使当我通过鼠标滚轮滚动时，它也很好地将类添加到所有导航链接。但是：它不会删除它们。

```
<script style="text/javascript">
    $(function(){
        var sections = {},
            _width   = $(window).width(),
            i        = 0;

        // Grab positions of our sections 
        $('.section').each(function(){
            sections[this.name] = $(this).offset().left;
        });

        $(document).scroll(function(){
            var $this = $(this),
                pos   = $this.scrollLeft();

            for(i in sections){
                if(sections[i] > pos && sections[i] < pos + _width){
                    $('#nav ul li a').removeClass('selected');
                    $('#nav_' + i).addClass('selected');
                }  
            }
        });
    });

    $(".scroll").click(function(event){
        event.preventDefault();
        var full_url = this.href;
        var parts = full_url.split("#");
        var trgt = parts[1];
        var target_offset = $("#"+trgt).offset();
        var target_top = target_offset.left;
        $('html, body').animate({scrollLeft:target_top}, 800);
    });
</script> 
```

如何更新链接以删除选定的类？

编辑：我认为我很接近我认为它需要更改 for 标头

```
if(sections[i] > pos && sections[i] < pos + _width) 
```

将“选定”类分配给当前查看的幻灯片需要进行哪些更改

# node.js - 命令“docpad run”出现错误：“module”未定义

> ID：14562008
> 
> 赞同：1
> 
> 时间：2013-01-28T12:25:46.050
> 
> 标签：node.js, docpad

我已将我的配置从*docpad.coffee*迁移到**docpad.js**（个人偏好使用纯 Javascript）

从那以后，我无法执行命令

```
docpad run 
```

而且我不断收到此错误：

![错误](../Images/a7578e508b3da3b8176f72573f82b3cc.png)

我已经针对 JSLint 验证了我的配置，并确保没有语法错误。

我很乐意使用 docpad.coffee，但如果有人可以帮助我解决这个问题，那就太好了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T10:41:07.510

这是因为 Windows 将“.js”扩展名识别为 javascript 文件，并在您发出“docpad run”命令时尝试运行您的 docpad.js 文件。Windows 脚本宿主是 Windows 用来本地运行 js 文件的东西（因此实际上与节点或 docpad 本身无关）。错误消息中对“模块”的引用是因为这是 docpad.js 文件的第一行，而 Windows 脚本主机不知道“模块”是什么。您只需将 docpad.js 文件重命名为 .coffee（我相信所有 javascript 都是有效的咖啡脚本），然后 windows 消息就会消失。

编辑：我刚刚在具有 docpad.js 文件而不是 docpad.coffee 的 docpad 骨架上进行了测试。只需将其重命名为 docpad.coffee 确实可以解决问题。将其重命名回 .js 会导致在发出“docpad run”命令时出现“Windows Script Host”错误消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-18T11:44:52.817

您可以使用`docpad.cmd run`而不是`docpad run`区分本地 docpad.js 和全局 npm 安装的 docpad.cmd。

# php - While 循环和 mysql_fetch_array - Codeigniter 等效性

> ID：14562012
> 
> 赞同：3
> 
> 时间：2013-01-28T12:25:54.217
> 
> 标签：php, codeigniter

我正在尝试将一些古老的代码转换为普通的 PHP 标准（我已经阅读了 mysql 函数的问题......），我使用 Codeigniter 作为我的框架，这是原始代码：

```
$query_pag_data = "SELECT id,name from messages LIMIT $start, $per_page";
$result_pag_data = mysql_query($query_pag_data) or die('MySql Error' . mysql_error());

$msg = "";

while ($row = mysql_fetch_array($result_pag_data)) {
$htmlmsg=htmlentities($row['message']);
    $msg .= "<li><b>" . $row['msg_id'] . "</b> " . $htmlmsg . "</li>";
}

$msg = "<div class='data'><ul>" . $msg . "</ul></div>"; // Content for Data 
```

这是我的尝试：

```
$this->load->model("main_model");
$result=$this->main_model->user_list($start, $per_page);

$msg = "";

foreach ($result->result() as $row){
     $htmlmsg = htmlentities($row->name);
     $msg .= "<li><b>" . $row->id . "</b> " . $htmlmsg . "</li>";
}

$msg = "<div class='data'><ul>" . $msg . "</ul></div>"; // Content for Data 
```

我的模型：

```
function user_list($start, $per_page) {
    $query = $this->db->get('users', $start, $per_page); 
    return $query;
} 
```

虽然这不能正常工作，但我相信它与 while 以及 mysql_fetch_array 的工作方式有关，我尝试了一些带有 while 循环的解决方案，但似乎没有到达那里。

更多信息：这是一个 ajax 分页功能，我在上面的尝试加载了结果，但是 foreach 循环现在正在将以前的结果加载到下一页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:31:56.237

试试这个：

```
function user_list($start, $per_page) {
   $query = $this->db->get('users', $per_page, $start);
   // flip $start/$per_page from your code
   return $query;
} 
```

# android - Android - 将字符串经度解析为浮动导致错误

> ID：14562014
> 
> 赞同：1
> 
> 时间：2013-01-28T12:26:07.053
> 
> 标签：android, string, type-conversion

我需要将我的 CMS 数据（以字符串形式提供）转换为浮点值，但出现异常

```
NumberFormatException: invalid float value: "16.385837" 
```

代码如下所示：

```
Double.valueOf(myString.trim()).doubleValue(); 
```

我也试过这样：

```
Double.parseDouble(myString).doubleValue(); 
```

但我收到了同样的信息。你知道有什么问题吗？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:31:34.593

```
try {
  String s = "16.385837";
  Double d = Double.parseDouble(s); 
  System.out.println(d);// which will prints 16.385837
} catch (NumberFormatException e) {
  // p did not contain a valid double
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:29:28.240

```
String s = e1.getText().toString();
Float f= Float.parseFloat(s); 
```

使用此代码，这将帮助你

把你的价值放在s的地方；然后你可以解析字符串浮动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:31:07.770

试试这个，

```
 Double.parseDouble(String.valueOf("16.385837")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T12:41:36.737

尝试

`Double.parseDouble(myString) not .doubleValue();`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T13:02:29.630

试试这个

```
try {
        Double d = Double.parseDouble(String.valueOf("16.385837")); 
        System.out.println(d);
     } catch (NumberFormatException e) {
         // Handle The Exception During  Parsing
     } 
```

# ruby - 如何使用 json 对象使用 knockout.js 将值保存到数据库

> ID：14562016
> 
> 赞同：3
> 
> 时间：2013-01-28T12:26:13.037
> 
> 标签：ruby, json, knockout.js, ruby-on-rails-3.2

我有一个任务要做 knockout.js。在这里，我有一个模范员工，其中包含字段名称、国家和州。编辑时我想保存它。但是当我这样做时，我无法保存它。我的编辑页面是

```
<%= javascript_include_tag "knockout-2.2.0" %>
<script>
$(document).ready(function() {

    // Here's my data model
        var ViewModel = function(){
            this.country = ko.observable();
            this.state = ko.observable();
            this.name = ko.observable();
            this.fullName = ko.computed(function() {
                return this.country() + " " + this.state();
                 }, this);

            this.save = function(){

                var jsonData = ko.toJSON(ViewModel);
                alert("Could now send this to server: " + JSON.stringify(jsonData));

                $.ajax({
                    url: '/employees/<%=@employee.id%>',
                    dataType: 'json',
                    type: 'PUT',
                    data: { total_changes: JSON.stringify(jsonData) },

                    success: function(data){
                        alert("Successful");
                    },
                    failure: function(){
                        alert("Unsuccessful");
                    }
                });
            }
};

        ko.applyBindings(new ViewModel());

});
</script>

<%= form_for(@employee) do |f| %>
  <% if @employee.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@employee.errors.count, "error") %> prohibited this employee from being saved:</h2>

      <ul>
      <% @employee.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br />
    <input data-bind='value: name, valueUpdate: "afterkeydown"' />
  </div>
 <div class='label'>
        <%= f.label :country %><br />
        <input data-bind='value: country, valueUpdate: "afterkeydown"' />
  </div>
  <div class="field">
    <%= f.label :state %><br />
    <input data-bind='value: state, valueUpdate: "afterkeydown"' />
  </div>

<p>Name:
<span data-bind="text: name"> </span></p>

<p>Country:
<span data-bind="text: country"> </span></p>

<p>State:
<span data-bind="text: state"> </span></p>
 <button data-bind='click: save'>Submit</button>
  </div>
<% end %> 
```

我无法获取 json 对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:46:16.840

尝试使用

```
var jsonData = ko.toJSON(this); 
```

代替

```
var jsonData = ko.toJSON(ViewModel); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T21:46:44.337

直接使用这个 --- data: { total_changes: ko.toJSON(this) }。

# iphone - 如何从 4X4 imageView 矩阵创建 1 个组合图像

> ID：14562018
> 
> 赞同：2
> 
> 时间：2013-01-28T12:26:16.400
> 
> 标签：iphone, ios, uiimageview, uiimage

我正在创建**“拼图游戏”**，因为我已经将单个图像划分为 4X4 矩阵，例如

![在此处输入图像描述](../Images/bde48eb73f6536cb43af0771dfc50b2e.png)

现在我有 16 个不同的图像视图，我需要将它们组合成一个图像并存储在数据库中。那么是否可以将 4x4 矩阵图像组合成一张图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:32:59.577

是的，而且相当容易。

```
UIGraphicsBeginImageContext(fullSize);
CGContextRef context = UIGraphicsGetCurrentContext();

for (int i = 0; i < 4; i++) {

    for (int j = 0; j < 4; j++) {

        UIImage *image = [self imageAtRow:i column:j];
        CGFloat imageSize = 40;
        CGRect imageRect = CGRectMake (imageSize * i, imageSize * j, imageSize, imageSize);
        CGContextDrawImage(context, imageRect, image.CGImage);  

    }

}

UIImage *result = UIGraphicsGetImageFromCurrentImageContext();  
UIGraphicsEndImageContext(); 
```

`result`将是您创建的全尺寸图像（160x160，如果它是 4x4 和 40 个尺寸的图像）

**编辑**

用于`UIGraphicsBeginImageContextWithOptions(fullSize, NO, 0.0);`支持视网膜显示器

# backbone.js - 在 backone.js 中完成提取后如何排序

> ID：14562025
> 
> 赞同：1
> 
> 时间：2013-01-28T12:26:32.093
> 
> 标签：backbone.js, backbone-views

单击“按年龄排序”时，我正在调用一个函数以从服务器获取数据并按年龄值排序。我在完成提取后执行此操作，但它没有任何结果并返回所有..

有人给出了正确的方法来实现这一点吗？

我的代码：

视图类中的这段代码，

```
 sortByAge:function(){
        this.collection.fetch() //fetching new collection
        .done(function(data){ // once done i am passing data
            var filterType = data.sort('age') // correct way need to sort.
            that.collection.reset(filterType); // refreshing the collection
        })
    }, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:24:56.203

如果在执行 a 之前`fetch`您已经知道需要按[文档](http://backbonejs.org/#Collection-fetch)`collection`中的某些特定排序`column`，我们可以将选项传递给. 所以可能看起来像这样：`ajax``fetch``fetch`

```
this.collection.fetch({
  data: {
    sort_by: "age"
  }
}); 
```

`sort_by`参数将在为集合`server`指定的正在执行的代码中可用`url`，因此您可以从服务器返回按`sort_by`列排序的数据。然后可能是听`reset`事件做一些工作。

如果你想`collection`在客户端得到它之后进行排序，你可以看看这些类似的问题。

1.  [初始化后对主干集合进行排序](https://stackoverflow.com/questions/7005411/sorting-a-backbone-collection-after-initialization)
2.  [动态排序backbone.js集合的正确方法](https://stackoverflow.com/questions/9865804/proper-way-to-sort-a-backbone-js-collection-on-the-fly)

# java - 在 TableView Javafx 中插入数据

> ID：14562027
> 
> 赞同：0
> 
> 时间：2013-01-28T12:26:35.133
> 
> 标签：java, javafx-2, javafx

我正在尝试将数据插入到 Javafx TableView 中，实际上我做到了，但它用以下字符串填充了该行：

IntegerProperty [值：72] 等...

我怎样才能只显示值填充我的行？

我的表视图代码：

```
@FXML TableView tableView = new TableView<MetaDadosInfo>();
@FXML javafx.scene.control.TableColumn instituicaoCol;
@FXML javafx.scene.control.TableColumn anoCol;
@FXML javafx.scene.control.TableColumn tamanhoCol;
@FXML javafx.scene.control.TableColumn tipoCol;
@FXML javafx.scene.control.TableColumn nomeCol;

final ObservableList<MetaDadosInfo> data = FXCollections.observableArrayList(
    new MetaDadosInfo(codigoInstituicao, ano, size, type, name));

instituicaoCol.setCellValueFactory(
        new PropertyValueFactory<MetaDadosInfo, String>("codigoInstituicao"));

anoCol.setCellValueFactory(
        new PropertyValueFactory<MetaDadosInfo, String>("ano"));

tamanhoCol.setCellValueFactory(
        new PropertyValueFactory<MetaDadosInfo, String>("size"));

tipoCol.setCellValueFactory(
        new PropertyValueFactory<MetaDadosInfo, String>("type"));

nomeCol.setCellValueFactory(
        new PropertyValueFactory<MetaDadosInfo, String>("name"));

tableView.setItems(data); 
```

MetaDadosInfo 类：

```
public class MetaDadosInfo {
    private SimpleIntegerProperty codigoInstituicao;
    private SimpleIntegerProperty ano;
    private SimpleLongProperty size;
    private SimpleStringProperty type;
    private SimpleStringProperty name;

    public MetaDadosInfo(int codigoInstituicao, int ano, long size, String type, String name) {
        this.codigoInstituicao = new SimpleIntegerProperty (codigoInstituicao);
        this.ano = new SimpleIntegerProperty (ano);
        this.size = new SimpleLongProperty (size);
        this.type = new SimpleStringProperty (type);
        this.name = new SimpleStringProperty (name);
    }

    public SimpleIntegerProperty getCodigoInstituicao() {
        return codigoInstituicao;
    }

    public void setCodigoInstituicao(SimpleIntegerProperty codigoInstituicao) {
        this.codigoInstituicao = codigoInstituicao;
    }

    public SimpleIntegerProperty getAno() {
        return ano;
    }

    public void setAno(SimpleIntegerProperty ano) {
        this.ano = ano;
    }

    public SimpleLongProperty getSize() {
        return size;
    }

    public void setSize(SimpleLongProperty size) {
        this.size = size;
    }

    public SimpleStringProperty getType() {
        return type;
    }

    public void setType(SimpleStringProperty type) {
        this.type = type;
    }

    public SimpleStringProperty getName() {
        return name;
    }

    public void setName(SimpleStringProperty name) {
        this.name = name;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:30:39.847

错误出现在我的 MetaDadosInfo 类的 getter 和 setter 中，正确的方法是：

```
public class MetaDadosInfo {
    private SimpleIntegerProperty codigoInstituicao;
    private SimpleIntegerProperty ano;
    private SimpleLongProperty size;
    private SimpleStringProperty type;
    private SimpleStringProperty name;

    public MetaDadosInfo(int codigoInstituicao, int ano, long size, String type, String name) {
        this.codigoInstituicao = new SimpleIntegerProperty (codigoInstituicao);
        this.ano = new SimpleIntegerProperty (ano);
        this.size = new SimpleLongProperty (size);
        this.type = new SimpleStringProperty (type);
        this.name = new SimpleStringProperty (name);
    }

    public int getCodigoInstituicao() {
        return codigoInstituicao.get();
    }

    public void setCodigoInstituicao(int codigoInstituicao) {
        this.codigoInstituicao.set(codigoInstituicao);
    }

    public int getAno() {
        return ano.get();
    }

    public void setAno(int ano) {
        this.ano.set(ano);
    }

    public Long getSize() {
        return size.get();
    }

    public void setSize(long size) {
        this.size.set(size);
    }

    public String getType() {
        return type.get();
    }

    public void setType(String type) {
        this.type.set(type);
    }

    public String getName() {
        return name.get();
    }

    public void setName(String name) {
        this.name.set(name);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T18:13:30.403

在浪费了我的一天之后，我终于能够以非常简单的方式找到解决方案

```
package test;

import java.util.HashMap;
import java.util.Map;
import javafx.application.Application;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.geometry.Insets;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.control.Label;
import javafx.scene.control.TableCell;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.scene.control.cell.MapValueFactory;
import javafx.scene.control.cell.TextFieldTableCell;
import javafx.scene.layout.VBox;
import javafx.scene.text.Font;
import javafx.stage.Stage;
import javafx.util.Callback;
import javafx.util.StringConverter;

public class Test extends Application {

    public static final String Column1MapKey = "A";
    public static final String Column2MapKey = "B";

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage stage) {
        Scene scene = new Scene(new Group());
        stage.setTitle("Table View Sample");
        stage.setWidth(300);
        stage.setHeight(500);
        final Label label = new Label("Student IDs");
        label.setFont(new Font("Arial", 20));
        TableColumn<Map, String> firstDataColumn = new TableColumn<>("Class A");
        TableColumn<Map, String> secondDataColumn = new TableColumn<>("Class B");
        firstDataColumn.setCellValueFactory(new MapValueFactory(Column1MapKey));
        firstDataColumn.setMinWidth(130);
        secondDataColumn.setCellValueFactory(new MapValueFactory(Column2MapKey));
        secondDataColumn.setMinWidth(130);
        TableView table_view = new TableView<>();
        table_view.setItems(generateDataInMap());
        table_view.setEditable(true);
        table_view.getSelectionModel().setCellSelectionEnabled(true);
        table_view.getColumns().setAll(firstDataColumn, secondDataColumn);

//        Callback<TableColumn<Map, String>, TableCell<Map, String>> cellFactoryForMap = new Callback<TableColumn<Map, String>, TableCell<Map, String>>() {
//            @Override
//            public TableCell call(TableColumn p) {
//                return new TextFieldTableCell(new StringConverter() {
//                    @Override
//                    public String toString(Object t) {
//                        return t.toString();
//                    }
//
//                    @Override
//                    public Object fromString(String string) {
//                        return string;
//                    }
//                });
//            }
//        };
//        firstDataColumn.setCellFactory(cellFactoryForMap);
//        secondDataColumn.setCellFactory(cellFactoryForMap);
        final VBox vbox = new VBox();
        vbox.setSpacing(5);
        vbox.setPadding(new Insets(10, 0, 0, 10));
        vbox.getChildren().addAll(label, table_view);
        ((Group) scene.getRoot()).getChildren().addAll(vbox);
        stage.setScene(scene);
        stage.show();
    }

    private ObservableList<Map> generateDataInMap() {
        int max = 10;
        ObservableList<Map> allData = FXCollections.observableArrayList();
        for (int i = 1; i < max; i++) {
            Map<String, String> dataRow = new HashMap<>();
            String value1 = "A" + i;
            String value2 = "B" + i;
            dataRow.put(Column1MapKey, value1);
            dataRow.put(Column2MapKey, value2);
            allData.add(dataRow);
        }
        return allData;
    }
} 
```

只需尝试更改并以您的方式使用它也可以直接在结果集中使用

快乐编码，快乐创新

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T19:13:53.930

这不适用于 PropertyValueFactory，因为您没有使用您在数据模型中定义的属性的预期命名约定来声明 JavaFX bean。

有关如何正确使用 PropertyValueFactory，请参阅此帖子： [如何正确使用 PropertyValueFactory？](https://stackoverflow.com/questions/16377820/how-to-use-the-propertyvaluefactory-correctly/16387259#16387259)

# jquery - 隐藏链接上的光标

> ID：14562028
> 
> 赞同：1
> 
> 时间：2013-01-28T12:26:34.977
> 
> 标签：jquery, css, drop-down-menu, cursor, hyperlink

我在我正在研究的 RapidWeaver 主题上使用链接抑制器。jQuery 代码如下。它所做的只是杀死下拉菜单的父链接，以便无法单击它们。不幸的是，'手'光标或`pointer`光标仍然出现！

```
// Link Suppressor script by Will Woodgate - visit willwoodgate.com for more information
$(document).ready(function(){
    $("#nav li:has(ul)").hover(function() {
        $(this).children("a").addClass("nolink").click(function(e) {
            e.preventDefault();
        });
    });
}); 
```

我还想做的是添加样式，`cursor:default;`以便当您将鼠标悬停在死链接上时显示正确的光标（默认光标）！我需要在 jQuery 中做这部分样式。这是必不可少的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:28:27.817

当您向元素添加类`nolink`时，`a`您可以简单地在 CSS 中执行此操作：

```
.nolink { cursor: default; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:55:57.023

RW 支持论坛上有相关主题，例如这里 [http://forums.realmacsoftware.com/discussion/60662/change-pointing-finger-to-cursor](http://forums.realmacsoftware.com/discussion/60662/change-pointing-finger-to-cursor) 我已经解释了什么是“nolink”类并发布了链接到有关主题的文章（因为 RW 中还没有用于链接抑制的内置解决方案）。

最好的，
彼得

# sql - 在访问中按行的值求和

> ID：14562036
> 
> 赞同：-2
> 
> 时间：2013-01-28T12:27:08.723
> 
> 标签：sql

在我的数据库中按行计数时遇到问题。我有一个包含 2 列的表：2011 及其值和 2012 及其值和总列：表书籍：

```
 2011 2012  TOTAL
   1    2     ?
   6    9     ?
   4   10     ?
  56   12     ? 
```

我怎样才能`sum(1+2), sum (6+9)`在每一行的“TOTAL”列中写入结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:29:42.273

这应该很简单，不要使用`SUM()`

```
SELECT year1, year2, (year1 + year2) AS Total
FROM   tableName 
```

**更新**

```
UPDATE tableName
SET    Total = (year1 + year2) 
```

# python - 将 Django 从 1.3 升级到 1.4.3 后，Syncdb 无法删除过时的内容类型

> ID：14562038
> 
> 赞同：0
> 
> 时间：2013-01-28T12:27:22.543
> 
> 标签：python, django, content-type, syncdb

**如何成功删除过时的内容？
键入 yes 会产生以下结果：**

```
Creating tables ... 
```

以下内容类型已过时，需要删除：

```
auth | message 
```

通过外键与这些内容类型相关的任何对象也将被删除。您确定要删除这些内容类型吗？如果您不确定，请回答“否”。

```
Type 'yes' to continue, or 'no' to cancel: yes 
```

回溯（最近一次通话最后一次）：...

```
raise errorclass, errorvalue
django.db.utils.DatabaseError: 
(1146, "Table '<db_name>.auth_group_permissions' doesn't exist")
Process finished with exit code 1 
```

**我尝试的另一件事是：**

```
from django.contrib.contenttypes.models import ContentType
ct = ContentType.objects.get(app_label='auth',model='messages') 
```

我收到以下信息：

```
DoesNotExist: ContentType matching query does not exist. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:49:46.467

你可以做一个

```
python manage.py dbshell 
```

并检查您之前创建的所有表格。

查看**auth_group_permissions**是否存在。如果它不存在，我想您可以手动创建它并再次执行该过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:58:00.683

的`model`contenttype 的字段`auth.message`是`'message'`而不是`'messages'`。
所以试试

`ct = ContentType.objects.get(app_label='auth',model='message')`

然后，您可以列出`ct.permission_set.all()`甚至运行`ct.delete()`（在事务中并打印要删除的相关对象）以重现问题。

另外，关于'missing table'的错误很奇怪，你能在数据库中检查该表是否真的存在吗？还是您在 1.3 中配置了多个数据库？

# python - 如何在python中将多个变量作为SUDS数据传递？

> ID：14562040
> 
> 赞同：0
> 
> 时间：2013-01-28T12:27:31.920
> 
> 标签：python, soap, wsdl, suds

通常，我使用dicts来调用soap方法：

```
 SoapData = {'id':'1', 'nya':'meow'}
  Check ('SoapMethodName', SoapData) 
```

它创建了这样的东西：

```
<data:id>1</data:id>

<data:nya>meow</data:nya> 
```

这很好用。但有时我需要这样的请求：

```
<arg1>12<arg1>

<arg2>meow<arg1> 
```

这意味着我不能使用字典。所以我需要一个新函数，它获取 2 个数据参数：

```
 Check2 ('SoapMethodName', id, nya) 
```

如果需要 20 个数据参数怎么办？我如何通过它们？数组似乎不起作用，有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:14:45.697

```
args = [id, nya]
Check2('SoapMethodName', *args) 
```

# php - 在哪里放置静态wsdl文件而不是在php中的每个请求上动态生成wsdl文件

> ID：14562042
> 
> 赞同：1
> 
> 时间：2013-01-28T12:27:37.497
> 
> 标签：php, soap, wsdl

我正在使用 NuSoap Web 服务。我的网络服务端点类型是 wsdl。问题是无法连接和更新状态。

这是我的网址 [http://abc.testsite.com/LMSCallbackService/LMSExternalOrientationService.svc](http://abc.testsite.com/LMSCallbackService/LMSExternalOrientationService.svc)

动态生成的WSDL文件Soap地址位置应该是 [http://abc.testsite.com/LMSCallbackService/LMSExternalOrientationService.svc?wsdl](http://abc.testsite.com/LMSCallbackService/LMSExternalOrientationService.svc?wsdl)

但是当前的 Soap 地址位置就像 http: **//clwebwtrv4.colo** .testsite.com/LMSCallBackService/LMSExternalOrientationService.svc?wsdl [链接错误。]

我怎样才能删除粗体项目？

我在网上搜索了一些东西，想出了以下解决方案

> 使用静态 wsdl 文件，而不是动态生成 wsdl 文件。

注意：不知道如何停止动态生成wsdl文件，也不知道静态wsdl文件放在哪里。

问题： - 将静态 wsdl 文件放在哪里？- 如何停止动态生成 wsdl 文件？

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T04:59:13.597

**使用静态 WSDL 的方法：**

将 wsdl 文件保存到某个位置，调用时使用物理路径。

`$url = 'http://www.testsite.com/abc/preprod_sunflower.wsdl'`

前任：`$client = new nusoap_client($url,true);`

**注意：**在该 WSDL 文件中不要忘记提供正确的“Soap 地址位置”。

而已。希望它的使用充分。

**坏处：**

在更新 NuSoap 时，它会产生一些问题。所以我们需要更新我们的 WSDL 文件。

# python - 提示时如何让 Travis-CI 输入密码？

> ID：14562046
> 
> 赞同：1
> 
> 时间：2013-01-28T12:27:41.577
> 
> 标签：python, google-app-engine, travis-ci

测试成功后，我试图让 Travis-CI 将我的 GAE 应用程序上传到 GAE。我认为我必须：

1.  在. [_](https://stackoverflow.com/questions/13114334/run-a-google-app-engine-on-travis-ci-and-test-it-with-phantomjs) _`before_script`
2.  中`after-script`，运行`appcfg.py update`。

但是，根据 GAE 的文档（[https://developers.google.com/appengine/docs/python/tools/uploadinganapp#Uploading_the_App](https://developers.google.com/appengine/docs/python/tools/uploadinganapp#Uploading_the_App)），它说您不能将密码作为命令行选项输入。

有没有办法可以配置 Travis-CI 在提示输入密码时输入我的密码`appcfg.py`？我知道 Travis-CI 能够存储和传递安全环境变量（[http://about.travis-ci.org/docs/user/build-configuration/#Secure-environment-variables](http://about.travis-ci.org/docs/user/build-configuration/#Secure-environment-variables)）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:43:15.203

如果不使用用户/密码，请使用 OAuth 选项并在您的 travis 脚本中提供令牌。

# c# - 泛型类型参数协方差和多接口实现

> ID：14562047
> 
> 赞同：44
> 
> 时间：2013-01-28T12:27:42.077
> 
> 标签：c#, generics, types, interface, covariance

如果我有一个带有协变类型参数的通用接口，如下所示：

```
interface IGeneric<out T>
{
    string GetName();
} 
```

如果我定义这个类层次结构：

```
class Base {}
class Derived1 : Base{}
class Derived2 : Base{} 
```

然后我可以在一个类上实现接口两次，就像这样，使用显式接口实现：

```
class DoubleDown: IGeneric<Derived1>, IGeneric<Derived2>
{
   string IGeneric<Derived1>.GetName()
   {
     return "Derived1";
   }

   string IGeneric<Derived2>.GetName()
   {
     return "Derived2";
   }  
} 
```

如果我使用（非泛型）`DoubleDown`类并将其转换为`IGeneric<Derived1>`或`IGeneric<Derived2>`按预期运行：

```
var x = new DoubleDown();
IGeneric<Derived1> id1 = x;        //cast to IGeneric<Derived1>
Console.WriteLine(id1.GetName());  //Derived1
IGeneric<Derived2> id2 = x;        //cast to IGeneric<Derived2>
Console.WriteLine(id2.GetName());  //Derived2 
```

但是，将 to 强制转换`x`会`IGeneric<Base>`产生以下结果：

```
IGeneric<Base> b = x;
Console.WriteLine(b.GetName());   //Derived1 
```

我预计编译器会发出错误，因为两个实现之间的调用不明确，但它返回了第一个声明的接口。

为什么允许这样做？

（受[A 类实现两个不同的 IObservables 的启发？](https://stackoverflow.com/questions/14560134/a-class-implementing-two-different-iobservables)我试图向同事表明这会失败，但不知何故，它没有）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-05T17:05:22.823

如果您已经测试了这两个：

```
class DoubleDown: IGeneric<Derived1>, IGeneric<Derived2> {
    string IGeneric<Derived1>.GetName() {
        return "Derived1";
    }

    string IGeneric<Derived2>.GetName() {
        return "Derived2";
    }
}

class DoubleDown: IGeneric<Derived2>, IGeneric<Derived1> {
    string IGeneric<Derived1>.GetName() {
        return "Derived1";
    }

    string IGeneric<Derived2>.GetName() {
        return "Derived2";
    }
} 
```

您一定已经意识到，实际上结果**会随着您声明要实现的接口的顺序而变化**。但我会说它只是**unspecified**。

首先，规范（§13.4.4 接口映射）说：

> *   如果有多个成员匹配，**则不指定**哪个成员是 IM 的实现
> *   这种情况**只有**在 S 是构造类型时才会发生，其中在泛型类型中声明的两个成员具有**不同的签名**，但类型参数使它们的签名相同。

这里我们有两个问题需要考虑：

*   Q1：你们的通用接口有**不同的签名**吗？
    A1：是的。它们是`IGeneric<Derived2>`和`IGeneric<Derived1>`。

*   Q2：该语句`IGeneric<Base> b=x;`可以使它们的签名与类型参数相同吗？
    A2：没有。您通过通用协变接口定义调用了该方法。

因此，您的呼叫满足**未指定**的条件。但这怎么会发生呢？

请记住，**无论您指定什么接口来引用 type 的对象`DoubleDown`，它始终是一个`DoubleDown`**. 也就是说，它总是有这两种`GetName`方法。实际上，您指定引用它的接口执行***合同选择***。

以下为实测截图部分

![在此处输入图像描述](../Images/cbf8d1f82dd59fbd6177d9e55f06170f.png)

此图像显示了运行时将返回的内容`GetMembers`。在所有情况下，您都引用它，`IGeneric<Derived1>`或`IGeneric<Derived2>`,`IGeneric<Base>`没有什么不同。以下两张图片显示了更多细节：

![在此处输入图像描述](../Images/f41ddea931eab437f56be02014e65985.png) ![在此处输入图像描述](../Images/e3f16980377c0e9dc5c1affe950a56ff.png)

如图所示，这两个通用派生接口既没有相同的名称，也没有其他签名/令牌使它们相同。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-09T07:32:18.433

编译器不能就行抛出错误

```
IGeneric<Base> b = x;
Console.WriteLine(b.GetName());   //Derived1 
```

因为编译器可以知道没有歧义。 `GetName()`实际上是 interface 上的有效方法`IGeneric<Base>`。编译器不会跟踪运行时类型`b`以知道其中存在可能导致歧义的类型。所以由运行时决定做什么。运行时可能会抛出异常，但 CLR 的设计者显然反对这一点（我个人认为这是一个不错的决定）。

换句话说，假设您只是简单地编写了方法：

```
public void CallIt(IGeneric<Base> b)
{
    string name = b.GetName();
} 
```

并且您没有提供`IGeneric<T>`在您的程序集中实现的类。你分发这个和许多其他人只实现这个接口一次，并且能够很好地调用你的方法。但是，最终有人会使用您的程序集并创建`DoubleDown`该类并将其传递给您的方法。编译器应该在什么时候抛出错误？当然，包含调用的已编译和分发的程序集`GetName()`不会产生编译器错误。你可以说 from `DoubleDown`to的赋值`IGeneric<Base>`产生了歧义。但是我们可以再一次在原始程序集中添加另一个级别的间接：

```
public void CallItOnDerived1(IGeneric<Derived1> b)
{
    return CallIt(b); //b will be cast to IGeneric<Base>
} 
```

再一次，许多消费者可以打电话`CallIt`或打电话`CallItOnDerived1`就可以了。但是我们的消费者传递`DoubleDown`也正在进行一个完全合法的调用，当他们调用时不会导致编译器错误，`CallItOnDerived1`因为转换 from `DoubleDown`to`IGeneric<Derived1>`当然应该没问题。因此，除了可能在 的定义上之外，编译器不会在任何时候抛出错误`DoubleDown`，但这将消除在没有解决方法的情况下做一些可能有用的事情的可能性。

实际上，我已经在其他地方更深入地回答了这个问题，如果可以更改语言，我还提供了一个潜在的解决方案：

[当逆变导致歧义时，没有警告或错误（或运行时失败）](https://stackoverflow.com/questions/13568337/no-warning-or-error-or-runtime-failure-when-contravariance-leads-to-ambiguity/14184540#14184540)

鉴于更改语言以支持这一点的可能性几乎为零，我认为当前的行为是可以的，除了它应该在规范中进行布局，以便 CLR 的所有实现都应该以相同的方式运行。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-13T19:02:37.093

问题问：“为什么这不会产生编译器警告？”。在VB中，它确实（我实现了它）。

类型系统没有携带足够的信息来*在调用时*提供关于方差歧义的警告。所以警告必须更早发出......

1.  在 VB 中，如果你声明了一个`C`同时实现`IEnumerable(Of Fish)`和的类`IEnumerable(Of Dog)`，那么它会给出一个警告，说两者在常见情况下会发生冲突`IEnumerable(Of Animal)`。这足以消除完全用 VB 编写的代码中的方差歧义。

    但是，如果问题类是在 C# 中声明的，则无济于事。另请注意，如果没有人在其上调用有问题的成员，则**声明这样的类是完全合理的。**

2.  在 VB 中，如果您从这样的类执行强制`C`转换为`IEnumerable(Of Animal)`，那么它会在强制转换时发出警告。**即使您从 metadata 导入问题类，**这也足以消除方差歧义。

    然而，这是一个糟糕的警告位置，因为它不可操作：你不能去改变演员表。对人们唯一可行的警告是**返回并更改类定义**。另请注意，如果没有人在其上调用有问题的成员，则**执行此类强制转换是完全合理的。**

*   问题：

    > VB 为何会发出这些警告，而 C# 却不会？

    回答：

    当我把它们放到 VB 中时，我对正式的计算机科学充满热情，并且只写了几年编译器，我有时间和热情来编写它们。

    [Eric Lippert](https://stackoverflow.com/users/88656/eric-lippert)用 C# 做这些。他有智慧和成熟，看到在编译器中编写此类警告将花费大量时间，而这些时间本可以更好地花在其他地方，并且足够复杂，因此具有很高的风险。事实上，VB 编译器在这些警告中存在错误，这些错误仅在 VS2012 中修复。

此外，坦率地说，不可能提出足够有用的警告信息以使人们能够理解它。顺便，

*   问题：

    > 在选择调用哪一个时，CLR 如何解决歧义？

    回答：

    它基于原始源代码中继承语句的**词法**顺序，即您声明`C`实现`IEnumerable(Of Fish)`和的词法顺序`IEnumerable(Of Dog)`。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-03-13T21:18:23.190

天哪，对于一个相当棘手的问题，这里有很多非常好的答案。加起来：

*   语言规范没有明确说明在这里做什么。
*   当有人试图模拟接口协变或逆变时，通常会出现这种情况。既然 C# 有接口变化，我们希望更少的人会使用这种模式。
*   大多数时候，“只选一个”是一种合理的行为。
*   CLR 如何实际选择在模棱两可的协变转换中使用哪个实现是实现定义的。基本上，它会扫描元数据表并选择第一个匹配项，而 C# 恰好按源代码顺序发出表。但是，您不能依赖这种行为；任何一个都可以更改，恕不另行通知。

我只想添加另一件事，那就是：坏消息是*接口重新实现语义*与 CLI 规范中指定的行为在出现这些歧义的情况下并不完全匹配。好消息是，当重新实现具有这种歧义的接口时，CLR 的实际行为通常是您想要的行为。发现这一事实引发了我、Anders 和一些 CLI 规范维护者之间的激烈辩论，最终结果是规范或实现都没有改变。由于大多数 C# 用户甚至不知道从什么接口重新实现开始，我们希望这不会对用户产生不利影响。（没有客户引起我的注意。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-28T13:26:10.157

试图深入研究“C# 语言规范”，看起来没有指定行为（如果我没有迷路的话）。

**7.4.4 函数成员调用**

> 函数成员调用的运行时处理包括以下步骤，其中 M 是函数成员，如果 M 是实例成员，则 E 是实例表达式：
> 
> [...]
> 
> > o 确定要调用的函数成员实现：
> > 
> > > • 如果 E 的编译时类型是一个接口，则要调用的函数成员是由 E 引用的实例的运行时类型提供的 M 的实现。这个函数成员是通过**应用接口映射规则**来确定的（§ 13.4.4) 确定由 E 引用的实例的运行时类型提供的 M 的实现。

**13.4.4 接口映射**

> 类或结构 C 的接口映射为 C 的基类列表中指定的每个接口的每个成员定位一个实现。确定特定接口成员 IM 的实现，其中 I 是声明成员 M 的接口通过检查每个类或结构 S，从 C 开始并针对 C 的每个连续基类重复，直到找到匹配项：
> 
> • 如果 S 包含与 I 和 M 匹配的显式接口成员实现的声明，则该成员是 IM 的实现
> 
> • 否则，如果 S 包含与 M 匹配的非静态公共成员的声明，则此成员是 IM 的实现 如果多个成员匹配，**则未指定哪个成员是 IM 的实现**。仅当 S 是构造类型，其中在泛型类型中声明的两个成员具有不同的签名，但类型参数使它们的签名相同时，才会发生这种情况。

# matlab - 如何提取白色车辆的车牌

> ID：14562058
> 
> 赞同：0
> 
> 时间：2013-01-28T12:28:33.607
> 
> 标签：matlab

> **可能重复：**
> [图像中的分段数字 - Matlab](https://stackoverflow.com/questions/5545020/segment-digits-in-an-image-matlab)

我正在使用 MATLAB 研究车牌识别系统。我尝试使用阈值和数学形态学来提取车牌，但是当车辆为白色时，我在提取车牌区域时遇到了问题。我搜索了网络，但其中大多数都在使用边缘检测。谁能帮我在不使用边缘检测的情况下提取车牌？

# html - 如何定位其父项中任何类型的第一个标题

> ID：14562065
> 
> 赞同：1
> 
> 时间：2013-01-28T12:28:56.677
> 
> 标签：html, css, css-selectors

我正在尝试清理我的 CMS 富文本编辑器的输出，并且我想很好地分隔内容。我正在为副本中的所有标题添加页边距，但我想从第一个标题中删除它。

虽然如果第一个内容是“p”而不是标题，那是行不通的。过去，我在“+”选择器上取得了一些成功，但似乎无法实现。

```
<div class="body_copy">
    <h5>My Heading here</h5>

    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco.</p>

    <p>
        <img src="images/image1.jpg" alt="">
    </p>

    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>

    <h5>Another heading here</h5>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p> 
```

将不胜感激您的任何想法！

编辑：我认为如果我针对每个 p + h2、p + h3 并将 margin-top 应用于它们，我就可以正常工作。如果有更好的方法，我仍然感兴趣吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:02:17.830

如果标题元素始终是其父元素的第一个子元素，那么最简单的选择是：

```
h1, h2, h3 /* ...etc */ {
    margin-top: 1em;
}

h1:first-child, h2:first-child, h3:first-child /* ...etc */ {
    margin-top: 0;
} 
```

要将其限制为元素`:first-child`内部和直接子`.body_copy`元素的标题，只需修改选择器：

```
.body_copy > h1,
.body_copy > h2,
.body_copy > h3 /* ...etc */ {
    margin-top: 1em;
}

.body_copy > h1:first-child,
.body_copy > h2:first-child,
.body_copy > h3:first-child /* ...etc */ {
    margin-top: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:48:11.933

根据[CSS2 选择器](http://www.w3.org/TR/CSS2/selector.html#pattern-matching)（您的问题中不涉及[CSS3 选择器](http://www.w3.org/TR/selectors/#selectors)`+`......并且您最好为这两个链接添加书签:)，是相邻的兄弟选择器（CSS3 中的相邻兄弟组合器），只有在绝对相邻的情况下才会匹配元素（一个接一个，中间什么都没有）。

您可能需要考虑[General Sibling Combinator](http://www.w3.org/TR/selectors/#general-sibling-combinators)，`E ~ F`它将与元素 E 之前（但不是立即）之前的每个 F 元素相匹配，这将为您提供更大的灵活性，并希望获得您想要达到的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:41:49.963

您正在寻找`~`选择器。与 + 选择器相比，它不那么严格。

```
div > h1 {
    margin-top: 0;
}

div > h1 ~ h1 {
    margin-top: 20px;
} 
```

在上面的例子中，除了 div 中的第一个标题之外，div 中的所有标题都将在 20px 的顶部有一个边距。

我希望这有帮助！

# c - 如何在 Linux 中显示所有用户进程 [with date, parent id, user-name]？

> ID：14562068
> 
> 赞同：0
> 
> 时间：2013-01-28T12:29:16.257
> 
> 标签：c, linux

我在 Kubuntu 但我不想使用任何其他库，我只能使用 linux 函数。我知道有一个库[http://procps.sourceforge.net/](http://procps.sourceforge.net/)但这不是重点。我想打印一个由登录用户拥有的进程，显示他们的日期、父进程 ID 和用户名，如何在 C 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:43:15.740

`system("ps -aef | grep username");`将获得用户拥有的所有进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:50:51.520

这些信息存储在`/proc`：每个进程都有自己的目录，命名为它的 PID。

您需要遍历所有这些目录并收集您需要的数据。就是`ps`这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T13:00:07.703

我认为您必须扫描`/proc`文件夹。我会给你一个关于如何开始的想法。抱歉，我没有时间对您的请求进行完整编码 =(

（查看[此处](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)的`/proc/[pid]/stat`部分以了解 stat 文件的格式）

```
 while((dirEntry = readdir("/proc")) != NULL) 
  {

      // is a number? (pid)
      if (scanf(dirEntry->d_name, "%d", &dummy) == 1) 
      {
          // get info about the node (file or folder)
          lstat(dirEntry->d_name, &buf);

          // it must be a folder
          if (buf.st_mode != S_IFDIR)
              continue;

          // check if it's owned by the uid you need
          if (buf.st_uid != my_userid)
              continue;

          // ok i got a pid of a process owned by my user
          printf("My user own process with pid %d\n", dirEntry->d_name);

          // build full path of stat file (full of useful infos)
          sprintf(stat_path, "/proc/%s/stat", dirEntry->d_name;

          // self explaining function (you have to write it) to extract the parent pid
          parentpid = extract_the_fourth_field(stat_path);

          // printout the parent pid
          printf("parent pid: %d\n", parentpid);

          // check for the above linked manual page about stat file to get more infos
          // about the current pid
      }
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T13:59:34.417

我建议从`/proc`. proc 文件系统是 Linux 中实现的最好的文件系统。

如果没有，您可以考虑编写一个内核模块，该模块将实现您自己的系统调用（以获取当前进程的列表），以便可以从用户空间程序调用它。

```
/* ProcessList.c 
    Robert Love Chapter 3
    */
    #include < linux/kernel.h >
    #include < linux/sched.h >
    #include < linux/module.h >

    int init_module(void)
    {
    struct task_struct *task;
    for_each_process(task)
    {
    printk("%s [%d]\n",task->comm , task->pid);
    }

    return 0;
    }

    void cleanup_module(void)
    {
    printk(KERN_INFO "Cleaning Up.\n");
    } 
```

上面的代码取自[这里](http://linuxgazette.net/133/saha.html)的文章。

# c# - 在等待 TcpClient 的响应时 10 秒后退出我的 while 循环

> ID：14562069
> 
> 赞同：1
> 
> 时间：2013-01-28T12:29:16.083
> 
> 标签：c#, while-loop, tcpclient, ping, break

我正在尝试在我的基本客户端-服务器聊天中实现 ping。我的问题在服务器端。我发送 ping，然后我想等待最多 10 秒，让客户端 ping 我回来。如果客户端在 10 秒后没有 ping 回，我希望我的 while 循环中断。这是我所做的：

```
public void ping()
{
    send("#PIN#");
    bool ponged = false;
    while (true) 
    {
        string rec = receive(); // it blocks here !!!!!!!!!!
        if (rec == "#PON#")
            ponged = true;
    }
} 
```

`send()`我的和`receive()`方法没有问题。他们在其他地方工作得很好。我尝试同时使用秒表和计时器来使循环在 10 秒后中断。问题在于接收功能阻塞直到收到消息。这是接收函数中阻塞的部分：

```
bytesRead = clientStream.Read(byteMsg, 0, 4096); 
```

据我所知，这是从我的客户接收消息的正确方法。但是当然，如​​果客户端断开连接，我将永远不会被 ping 回来，这意味着我的 receive() 方法将永远不会结束。`stopWatch.Elapsed()`如果我的接收方法永远不会结束，那么我的 while 循环永远不会有机会`ElepsedEventHandler`从`Timer`.

**所以问题是，我如何在知道该 while 循环中的一种方法可能不会结束的情况下强制该 while 循环在 10 秒后中断？**

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:33:42.713

如果您使用 NetworkStream 读取数据，则可以使用[ReadTimeout](http://msdn.microsoft.com/en-us/library/bk6w7hs8%28v=vs.80%29.aspx)属性。

> 如果读取操作未在此属性指定的时间内完成，则读取操作将引发 IOException。

# java - scala.concurrent.forkjoin.ForkJoinPool 与 java.util.concurrent.ForkJoinPool

> ID：14562070
> 
> 赞同：10
> 
> 时间：2013-01-28T12:29:18.330
> 
> 标签：java, scala, fork-join

为什么 ForkJoinPool 是为 Scala 分叉的？

首选哪种实施方式和哪种情况？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-28T12:48:53.497

scala 库拥有自己的 ForkJoinPool 副本的明显原因是 scala 必须在 1.7 之前的 JVM 上运行，并且`ForkJoinPool`仅在 Java 1.7 中引入。

此外，对内部（scala）使用进行了一些更改，例如：

[https://github.com/scala/scala/commit/76e9da2ca4c31daec2b04848c3c2dbad6ecd426e](https://github.com/scala/scala/commit/76e9da2ca4c31daec2b04848c3c2dbad6ecd426e)

鉴于scala的版本可能不会给你任何优势（如果你正在编译和运行java 1.7），我会说你自己使用你可能应该使用java的版本。至少 java 的版本被精确记录并完全“公开”，而 scala 版本的状态尚不清楚（它很可能仅供内部使用）。但是，在某些地方，您可能别无选择。例如`ForkJoinTasks`，有一个`forkJoinPool`方法需要 scala 版本的`ForkJoinPool`. 如果有人能够获得/找到任何官方声明 scala 版本的`ForkJoinPool`声明它确实是公开且稳定的，那么我会很高兴地恢复这个建议。

# javascript - 如果在角度视图中太长，则将列文本放在工具提示中

> ID：14562073
> 
> 赞同：0
> 
> 时间：2013-01-28T12:29:30.093
> 
> 标签：javascript, html, angularjs

我在我的 htm 页面中有一个使用 AngularJs 列的表。

如果列中的文本超过 8 个字符，我想将文本放在工具提示中

这是我的专栏：

```
<td>
<i class="column3">
    {{stoneEntity.StoneProperties.StockId}}
</i>
</td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:59:30.423

使用这样的指令：

```
app.directive('showTooltip', function() {
    var MAX_SIZE = 8;
    return {
        restrict: 'A',
        scope: { label: '=showTooltip' },
        link: function (scope, element, attrs) {                        
            if ((scope.label || '').length > MAX_SIZE) {                
                element.text(scope.label.substring(0, MAX_SIZE));
                element.attr('title', scope.label);                
            } else {
                element.text(scope.label);
            }
        }
    }
}); 
```

注意：为简单起见，`MAX_SIZE`在指令中定义了 ，但您可以更改它并接收最大尺寸作为参数。

**jsfiddle**：http: [//jsfiddle.net/bmleite/h5Np6/](http://jsfiddle.net/bmleite/h5Np6/)

# ios - 激活 UISwitch 时如何添加/删除 UITableViewCell？

> ID：14562075
> 
> 赞同：0
> 
> 时间：2013-01-28T12:29:33.120
> 
> 标签：ios, uitableview, nsmutablearray, uiswitch

以下是视频显示问题： [http ://www.youtube.com/watch?v=vWznBUsppRg](http://www.youtube.com/watch?v=vWznBUsppRg)

将单元格添加到部分时，我的 Array 出现了奇怪的行为。我正在开发一个 mobilesubstrate 调整..这就是为什么我没有发布整个方法。

打开时，单元格将添加到该部分的底部。但是当关闭时，UISwitch 单元格下的单元格会按预期删除，但会破坏 indexPaths。

.m 的顶部：

```
static NSUserDefaults *prefs = nil;
static UISwitch *switchView = nil;
static NSMutableArray *array = nil; 
```

-viewDidLoad 我正在使用 -

```
BOOL state = [prefs boolForKey:@"betaVid"];

array = [[NSMutableArray alloc] initWithObjects:@"Show Cached Videos", @"(Beta) Send Videos", @"Video Quality", @"Visit Website", @"Made by: @CokePokes", nil];

if (state == FALSE){
    [array removeObject:@"Video Quality"]; //remove from array

} 
```

-numberOfRowsInSection 我有：

```
if (section == 3){ 

    return [array count];

}

return section; 
```

-cellForRowAtIndexPath 我有：

```
prefs = [NSUserDefaults standardUserDefaults];
BOOL state = [prefs boolForKey:@"betaVid"];

if (indexPath.section == 3){

static NSString *CellIdentifier = @"Cell";
//NSString *CellIdentifier = [NSString  stringWithFormat:@"Cell_%d",indexPath.row];

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

}

// Configure the cell...

    cell.textLabel.text = [NSString stringWithFormat:@"%@", [array objectAtIndex:indexPath.row]];

    NSInteger counted = [array count];
    NSLog(@"~~~~~~~~~~~~~~~~~~~hmmmmm.... Really is: %d", counted);

    if (counted == 4){

        NSLog(@"~~~~~~~~~~~~~~~~~~~Array count is _4_. Really is: %d", counted);

        if (indexPath.row == 0){

            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
            cell.textLabel.textAlignment = UITextAlignmentLeft;

        } else if (indexPath.row == 1){

            switchView = [[UISwitch alloc] initWithFrame:CGRectZero];
            cell.accessoryView = switchView;
            [cell setSelectionStyle:UITableViewCellSelectionStyleNone];

            switchView.on = [prefs boolForKey:@"betaVid"];

            [switchView addTarget:self action:@selector(switchChanged:) forControlEvents:UIControlEventValueChanged];

        } else if (indexPath.row == 2){

          //set up cell appearance..not important now

        } else if (indexPath.row == 3){

           //set up cell appearance..not important now

        }

    } else if (counted == 5){
        NSLog(@"~~~~~~~~~~~~~~~~~~~~Array count is _5_. Really is: %d", counted);

        if (indexPath.row == 0){

            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
            cell.textLabel.textAlignment = UITextAlignmentLeft;

        } else if (indexPath.row == 1){

            switchView = [[UISwitch alloc] initWithFrame:CGRectZero];
            cell.accessoryView = switchView;
            [cell setSelectionStyle:UITableViewCellSelectionStyleNone];

            switchView.on = [prefs boolForKey:@"betaVid"];

            [switchView addTarget:self action:@selector(switchChanged:) forControlEvents:UIControlEventValueChanged];

        } else if (indexPath.row == 2){

            //set up cell appearance..not important now

        }

return cell;

}

return indexPath; 
```

最后是 UISwitch switchChanged：

```
switchView = sender;
NSLog( @"The switch is %@", switchView.on ? @"ON" : @"OFF" );
prefs = [NSUserDefaults standardUserDefaults];

[prefs setBool:switchView.on forKey:@"betaVid"];
[prefs synchronize];

BOOL state = [prefs boolForKey:@"betaVid"];

NSIndexPath *indexPath = [NSIndexPath indexPathForRow:2 inSection:3];
NSArray *indexPaths = [NSArray arrayWithObject:indexPath];

if (state == TRUE) {        

    [self.table beginUpdates];
    [array addObjectsFromArray:indexPaths];
    [self.table insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationLeft];
    [self.table endUpdates];

    [self.table reloadData];

} else if (state == FALSE){

    [self.table beginUpdates];
    [array removeObjectAtIndex:indexPath.row];
    [self.table deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationLeft];
    [self.table endUpdates];

   [self.table reloadData];

} 
```

我查看了几乎所有关于 Stack 上的 deleteRowsAtIndexPaths 和 insertRowsAtIndexPaths 的帖子，但没有一个有大量示例可以处理/解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:53:21.703

当开关打开时，您的数据模型（数组）被以下行损坏：

```
[array addObjectsFromArray:indexPaths]; 
```

我想你的意思是：

```
[array insertObject:@"Video Quality" atIndex:indexPath.row]; 
```

如果不是这样，那么如果您可以明确说明预期的行为是什么，那将有所帮助。

# mysql - mongodb 像 concat mysql 查询

> ID：14562076
> 
> 赞同：0
> 
> 时间：2013-01-28T12:29:36.100
> 
> 标签：mysql, mongodb, sql-like, concat

我在 Mysql 中有一个表，其中有一些 D 和 C 类的 IP，我使用该表来测试请求 IP 是否在数据库中或属于这样的 C 类：

```
select * from My_Table 
where '192.168.1.12' LIKE CONCAT(ip, '%'); 
```

（其中 192.168.1.12 是我正在针对我的表测试的请求 IP）

在我的数据库中，如果我有 C 格式的 ip '192.168.1'，我会得到一个匹配项。

我正在考虑使用 MongoDB 并在每个 IP（C 或 D 类格式）是 _id （默认索引）的文档中具有相同的信息。

如果正则表达式正好相反，我怎样才能让它与 MongoDB 一起工作？（如果我事先有 C 课）

如果我将每个请求 IP 拆分为 C 类以使用正则表达式进行检查，例如：

```
db.my_table.find(_id: '^/split_ip/') 
```

我必须通过迭代再次检查我的应用程序的每个结果，我认为这不是一个好的解决方案。

所以，我想知道您是否有任何建议或建议给我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:40:54.947

您可以使用 $in 运算符从单个查询中获取所有匹配项。

`{ _id: {$in : [/^192.0.1.1/, /^194.1.1/ ] }}`

因为您`/^`在正则表达式中使用选项，所以将使用索引。

这有帮助吗？

# java - JComponent 绘制问题

> ID：14562081
> 
> 赞同：3
> 
> 时间：2013-01-28T12:29:54.400
> 
> 标签：java, swing, jcomponent, jcalendar

我正在尝试用 Java 创建一个自定义日历。为此，我扩展`javax.swing.JComponent`.

```
public class GMCalendar extends JComponent { ... } 
```

在我的构造函数中，我做了一些基本设置并加载我的图像：

```
calendarDay = Toolkit.getDefaultToolkit().createImage(getClass().getResource("/resources/images/calendar_day.png")); 
```

它应该画我`paintComponent`的日历，但它不会全部画，这看起来很奇怪。

```
public void paintComponent(Graphics g) {
    super.paintComponent(g);

    Calendar calendar = Calendar.getInstance();
    calendar.add(Calendar.MONTH, currentMonth);
    int numberOfWeeks = calendar.getActualMaximum(Calendar.WEEK_OF_MONTH);

    for (int i = 0; i < 7; i++) {
        for (int j = 0; j < numberOfWeeks; j++) {
            int x = i * (DAY_SIZE + DAY_SPACE);
            int y = j * (DAY_SIZE + DAY_SPACE);
            g.drawImage(calendarDay, x, y, null);
        }
    }
} 
```

结果要么什么都没有，要么是这样的：

![奇怪的日历](../Images/517781eb82e752d409174f070323316e.png)

似乎在组件的大小大于*1x1***之前**`paintComponent`被调用。

 ***这是在我的`main()`：

```
GMContainerFrame cf = new GMContainerFrame();
cf.setMinimumSize(new Dimension(800,600));
cf.setVisible(true); 
```

这是来自`GMContainerFrame`（不使用`LayoutManager`！）的构造函数：

```
calendarFrame = new GMMiniFrame("Kalender", new GMCalendar(), 230); 
```

`GMMiniFrame`延伸`JSplitPane`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T12:37:01.420

*   不要重新发明轮子，使用`JPanels`，最好用`JLabels`layed by`GridLayout`

*   通过使用`JLabels`（`JPanel`嵌套多个`JComponents`）没有理由`paintComponents`

*   通知`JLabel`是透明的，非不透明的，

*   使用`JCalendar`/ `JDatePicker`from `SwingX`，我最喜欢的是[Kai Toedter 的 JCalendar](http://www.toedter.com/)，（渲染器、编辑器、特殊日子、最小和最大日期没有问题）***

# javascript - 年龄和出生日期验证javascript

> ID：14562086
> 
> 赞同：-3
> 
> 时间：2013-01-28T12:30:16.803
> 
> 标签：javascript, html, validation

我有一个输入字段“年龄/出生日期”。如果我可以输入年龄或日期，我如何验证该字段。

```
<tr>
<td>Date of birth / age:<span style="color:#ff0000">*</span><div id="dob_id" style="display:none;">Please Enter Valid Date</div></td>
<td><input class="formField" name="dob" value="" /></td> 
```

我使用以下代码来验证日期。

```
function dobcheck()
        {               
            var x = document.getElementById("dob_id");
            x.style.display="none";
            var currentTime = new Date()
            var month = currentTime.getMonth() + 1
            var day = currentTime.getDate()
            var year = currentTime.getFullYear()
            if(day<10){day='0'+day} 
            if(month<10){month='0'+month}
            var today = day + "/" + month + "/" + year;
            var ip=document.getElementsByName("dob")[0].value;
            if(ip>=today)
            {
                x.style.display="block";
                x.style.color="red";                    
            }

        } 
```

日期验证工作正常。但我需要验证出生日期或年龄取决于输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:50:03.107

这应该适用于您的 HTML：

```
function dobcheck()
{  
    var date_separator = '/'; // Assign your date separator here.
    var me = document.getElementsByClassName('formField')[0].value.replace(/^\s|\s$/g, '');

    if(me.match(/[^0-9]/g) == null)
    {
        // Age is entered.
        alert('My age is '+me);
    }
    else if(me.match(/[^0-9]/g).length == 2)
    {
        // For dates in format dd-mm-yy
        var t = me.split(date_separator);
        if(!isNaN(t[0]) && !isNaN(t[0]) && !isNaN(t[0]) )
        {
            alert('My Date of birth is '+me);
        }
    }
} 
```

干杯！！

# r - 如何重塑这个复杂的数据框？

> ID：14562089
> 
> 赞同：0
> 
> 时间：2013-01-28T12:30:35.367
> 
> 标签：r, reshape

这是我数据的前 4 行；

```
 X...Country.Name Country.Code                               Indicator.Name
1           Turkey          TUR           Inflation, GDP deflator (annual %)
2           Turkey          TUR Unemployment, total (% of total labor force)
3      Afghanistan          AFG           Inflation, GDP deflator (annual %)
4      Afghanistan          AFG Unemployment, total (% of total labor force)
     Indicator.Code     X2010
1 NY.GDP.DEFL.KD.ZG  5.675740
2    SL.UEM.TOTL.ZS 11.900000
3 NY.GDP.DEFL.KD.ZG  9.437322
4    SL.UEM.TOTL.ZS        NA 
```

我希望我的数据重新形成两列，每个指标代码一个，并且我希望每一行对应一个国家，就像这样；

```
Country Name NY.GDP.DEFL.KD.ZG SL.UEM.TOTL.ZS
Turkey       5.6         11.9
Afghanistan  9.43        NA 
```

我想我可以用 Excel 做到这一点，但我想学习 R 方式，这样我就不需要每次遇到问题时都依赖 excel。如果需要，[这是数据的输入。](https://gist.github.com/raw/4655137/31c3901cb48e1b8e4747f9c7d0106558f366ce97/mydata)

编辑：我实际上想要 3 个列，一个用于每个指标，一个用于国家名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T12:40:38.857

坚持使用基础 R，使用`reshape`. 我冒昧地清理了列名。在这里，我只向您展示几行输出。删除`head`以查看完整输出。这假设您`data.frame`的名称为“mydata”。

```
names(mydata) <- c("CountryName", "CountryCode", 
                   "IndicatorName", "IndicatorCode", "X2010")
head(reshape(mydata[-c(2:3)], 
             direction = "wide", 
             idvar = "CountryName", 
             timevar = "IndicatorCode"))
#       CountryName X2010.NY.GDP.DEFL.KD.ZG X2010.SL.UEM.TOTL.ZS
# 1          Turkey                5.675740                 11.9
# 3     Afghanistan                9.437322                   NA
# 5         Albania                3.459343                   NA
# 7         Algeria               16.245617                 11.4
# 9  American Samoa                      NA                   NA
# 11        Andorra                      NA                   NA 
```

基础 R 中的另一个选项是`xtabs`，但`NA`被替换为`0`：

```
head(xtabs(X2010 ~ CountryName + IndicatorCode, mydata))
#                 IndicatorCode
# CountryName      NY.GDP.DEFL.KD.ZG SL.UEM.TOTL.ZS
#   Afghanistan             9.437322            0.0
#   Albania                 3.459343            0.0
#   Algeria                16.245617           11.4
#   American Samoa          0.000000            0.0
#   Andorra                 0.000000            0.0
#   Angola                 22.393924            0.0 
```

结果`xtabs`是 a `matrix`，所以如果你想要 a `data.frame`，用 包装输出`as.data.frame.matrix`。

# c# - c# 将图片文件保存到ram

> ID：14562094
> 
> 赞同：2
> 
> 时间：2013-01-28T12:30:54.637
> 
> 标签：c#, file, image, ram

我正在开发一个图像处理程序，我需要从视频中保存一些图片并对它们进行一些处理。处理 1 张图片时实际上并不需要时间，但是当我处理 100 张图片时，我将文件保存到硬盘上会有所不同，这就是为什么需要时间的原因是，我的功能m using 是一个现成的函数，它只接受（文件名）该函数非常复杂，所以我无法构建自己的函数（如果这是你的想法）

我现在在想两件事，想听听你对它们的看法：

1.  改变函数的输入，但是如何？有没有办法将此输入从（文件名）更改为包含这些图片的数组？
2.  将文件保存到内存。但是如何按名称将文件保存到ram，并能够在函数中将它们用作（文件名）？

感谢您的帮助，非常感谢

这是我的代码，但我仍然有问题：

```
 Capture video = new Capture("c:\\5.avi");
            Image<Bgr, Byte> Imageframe ;

            Dictionary<string, MemoryStream> dict = new Dictionary<string, MemoryStream>();

                Imageframe = video.QueryFrame();
                Bitmap bmp = Imageframe.ToBitmap();
                dict.Add("mypicture.png", new MemoryStream());
                bmp.Save(dict["mypicture.png"],imageformat.png); 
```

它所说的图像格式在上下文中不存在

这是我使用的功能：

```
Image<Bgr, byte> result;
                 result = DrawMatches.Draw("box.png", "box_in_scene.png", out matchTime,i); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T12:34:26.700

您可以使用`MemoryStream`. 如果你想给它们命名，你可以使用 a `Dictionary<string,MemoryStream>`，例如：

```
Dictionary<string,MemoryStream> dict = new Dictionary<string,MemoryStream>();

dict.Add("mypicture.png",new MemoryStream());

image.Save(dict["mypicture.png"]); 
```

但是，您需要为这些流编写清理代码，这并没有考虑到最终您可能会用完所有物理 RAM，然后开始进入页面文件，无论如何它都是基于磁盘的。

顺便说一句，如果这是在您控制的服务器上，并且您没有将该软件发布给最终用户，您可以获得一个 RAM 磁盘驱动器（仅在 Google 附近就有很多），它使用物理 RAM 作为 Windows 可用的实际磁盘。然后你可以加载/保存到那个。

**非常非常粗糙的**EmguCv 变体：

```
// Global dictionary of memory streams
Dictionary<string,MemoryStream> dict = new Dictionary<string,MemoryStream>();

// Add image memory stream to dictionary
dict.Add("mypicture.png",new MemoryStream());

// Get bitmap from EmguCv
Bitmap bmp = image.ToBitmap();

// Save bitmap to image memory stream
bmp.Save(dict["mypicture.png"],ImageFormat.Png);

// Get bitmap from memory stream
dict["mypicture.png"].Seek(0,SeekOrigin.Begin);
Bitmap new_bmp = Image.FromStream(dict["mypicture.png"]);

// Convert bitmap to EmguCv image
Image<Bgr,Byte> new_img = new Image<Bgr,Byte>(new_bmp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:35:16.253

尝试使用[MemoryStream](http://msdn.microsoft.com/en-gb/library/system.io.memorystream%28v=vs.90%29.aspx)与文件一样处理内存，并尝试通过[线程将文件保存在硬盘上](http://msdn.microsoft.com/en-us/library/aa645740%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:37:46.277

我了解您正在使用您没有源代码的 DLL。您也许可以将其加载到反射器中，并对其进行修改以将图像作为参数而不是文件名。我过去使用过 Red Gate 的反射器，它对我有用：[http ://www.reflector.net/](http://www.reflector.net/)

# android - Android ABS 中心标题与主页按钮

> ID：14562095
> 
> 赞同：3
> 
> 时间：2013-01-28T12:31:03.103
> 
> 标签：android, android-actionbar, actionbarsherlock

我设法使用自定义视图将 ABS 的标题居中，但主页按钮不见了。如何解决？将这个主页按钮放在自定义视图中的唯一方法是什么？（要清楚：主页按钮应该在左边而不是在中间）

自定义视图：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:gravity="center"
    android:background="@android:color/transparent">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="hello"/>

</LinearLayout> 
```

活动代码：

```
getSupportActionBar().setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM);
getSupportActionBar().setCustomView(R.layout.widget_actionbar_title);
getSupportActionBar().setHomeButtonEnabled(true); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:10:52.173

```
 getSupportActionBar().setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM);
    View customView = LayoutInflater.from(this).inflate(
            R.layout.app_icon, null);
    ActionBar.LayoutParams params = new ActionBar.LayoutParams(
            ActionBar.LayoutParams.MATCH_PARENT,
            ActionBar.LayoutParams.MATCH_PARENT, Gravity.CENTER);

    getSupportActionBar().setCustomView(customView, params);
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
    getSupportActionBar().setHomeButtonEnabled(true);
    getSupportActionBar().setDisplayShowHomeEnabled(true);
    getSupportActionBar().setIcon(getResources().getDrawable(R.drawable.back_button)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-16T03:36:28.920

添加这个：

```
getSupportActionBar().setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM  | ActionBar.DISPLAY_SHOW_HOME); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-05T16:17:25.760

解决方案很简单）
改变你的布局

```
android:layout_width="match_parent" 
```

对此：

```
android:layout_width="wrap_content" 
```

这会有所帮助，因为您的初始布局占据了所有可见的位置，并且没有“家”的位置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T12:39:05.863

我必须添加此代码才能使其工作：

```
getSupportActionBar().setDisplayShowHomeEnabled(true); 
```

# java - 在 Java 中实例化抽象类：为什么会这样？

> ID：14562105
> 
> 赞同：0
> 
> 时间：2013-01-28T12:31:30.627
> 
> 标签：java, abstract, extend, inner-classes

> **可能重复：**
> [面试：我们可以实例化抽象类吗？](https://stackoverflow.com/questions/13670991/interview-can-we-instantiate-abstract-class)

我有一个定义了所有方法的抽象类（即其中不包含抽象方法），如下所示：

```
public abstract class MyAbstractClass {
  String s;
  public void setString(String s) {
    this.s = s;
  }
  public String getString() {
    return this.s;
  }
} 
```

还有一个 JUnit 测试类：

```
public class TestClass {

  MyAbstractClass c;
  @Before
  public void setUp() {
    // What is happening here? And why does this work with an abstract class?
    // Instantiation? Extending the abstract class? Overwriting?
    c = new MyAbstractClass() { };
    // This will not work: (Why?)
    // c = new MyAbstractClass();
  }

  @Test
  public void test_AllMethodsAvailable() {
    // Why can I access the abstract class' methods?
    // Shouldn't they be overwritten? Or did I extend the class?
    c.setString("Test");
    assertEquals("Test", c.getString());
  }
} 
```

我不太明白为什么分配给`c`在第一种情况下有效但在第二种情况下无效，或者那里实际发生了什么（因此，为什么访问抽象类的方法在测试中有效）。

有人可以解释一下（并可能指向我解释为什么这样做的Javadoc，文章或书籍）吗？

为什么我可以在那里“实例化”一个抽象类？（这实际上是我在做什么？）

它与内部类有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:32:08.910

您正在使用该代码创建一个***匿名内部类。***您以这种方式创建的类是隐式扩展`MyAbstractClass`的。

由于您的`abstract`类没有`abstract`方法，因此您不必提供实现，因此可以使用。

如果您不了解内部类，可以查看[官方文档](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)，我认为这非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:33:21.837

> 它与内部类有关吗？

```
 c = new MyAbstractClass() { }; 
```

绝对，上面是**匿名内部类**声明，你并没有真正实例化一个抽象类（你不能），但你实际上是在创建一个**匿名内部类**（`a sub-type of MyAbstractClass`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:33:29.513

当您编写时`c = new MyAbstractClass() { };`，您实际上创建了一个匿名类，它扩展了`MyAbstractClass`，并且不是抽象的。由于`MyAbstractClass`已经定义了所有方法，因此实例化是有效的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T12:34:42.680

您对 c 的分配有效，因为您正在使用匿名非抽象类对 MyAbstractClass 进行子类化， c 是非抽象类的实例。

由于您的抽象类中没有任何抽象方法，因此您的匿名类不必实现任何东西。

# tinymce - 默认调整大小 TinyMCE

> ID：14562106
> 
> 赞同：1
> 
> 时间：2013-01-28T12:31:31.573
> 
> 标签：tinymce

我是第一次使用 TinyMCE，我喜欢它，但有点封闭。我想默认调整图像大小，例如，添加图像时，默认将其设置为 300px 宽度（然后用户可以将其拖得更大或更小）。

不知道摸哪里！图像列表中是否有命令（您可以附加以使 TinyMCE 显示图像列表的 js）？或者我必须破解css？或者我必须深入研究 TinyMCE 代码？

提前谢谢你，马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:03:34.553

如果您可以更改代码文件，请执行以下操作

打开 tiny_mce/plugins/advimage/js/image.js

```
Locate insertAndClose : function() 
```

在 var ed = tinyMCEPopup.editor 之后插入，......；

```
 if(f.width.value == ""){
 f.width.value = 300;
 } 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:10:03.317

有几种选择。我会走css的方式。查看 tinycme 初始化配置设置[content_css](http://www.tinymce.com/wiki.php/Configuration%3acontent_css)。使用附加的自己的 css 文件，您可以轻松地将图像的宽度设置为 300 像素。

# python-2.7 - python解释器中的无限循环

> ID：14562112
> 
> 赞同：1
> 
> 时间：2013-01-28T12:32:07.113
> 
> 标签：python-2.7, infinite-loop, python

我正在关注python官方教程。
我创建了一个斐波那契函数`fib()`，如教程中所示，
给定参数的函数的输出`1`是（令我惊讶），
无限的`0`.

```
>>> def fib(n):
...     a, b = 0, 1
...     while a < n:
...         print a, 
...         a, b = b, a + b
... 
>>> fib(0)
>>> fib(1)
0 0 0 0 0 0 0 0 0 0 (...repeats infinitely, had to break out with ^+Z ...) 
```

我试图重现该问题，但未能成功。

```
>>> def fib(n):
...     a, b = 0, 1
...     while a < n:
...         print a,
...         a, b = b, a + b
... 
>>> fib(0)
>>> fib(1)
0
>>> fib(1)
0 
```

这是一个已知问题还是解释器中的一些临时故障？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T13:15:31.703

我可以重现这个：

```
>>> def fib(n):
...     a,b = 0,1
...     while a < n:
...         print a,
...         a,b = b, a+b
... 
>>> fib(5)
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
```

我是怎么做到的？上面的代码真的

```
def fib(n):
[tab]a,b = 0,1
[tab]while a < b:
[tab][4 spaces]print a,
[eight spaces]a,b = b, a+b 
```

混合制表符和空格会使解释器混淆它应该如何解析缩进。结果，该`a,b = b, a+b`行实际上并不在`while`循环内，即使它看起来像它。

# ios - 日期和月份的验证

> ID：14562113
> 
> 赞同：1
> 
> 时间：2013-01-28T12:32:07.473
> 
> 标签：ios, nsdate

我有一个使用 NSDate 的当前日期，这是 ma start date..我在当前日期加上 4 天，我得到了 ma endDate..

```
NSString *StrtDate= [dateFormatter stringFromDate:[NSDate date]];

int daysToAdd = 4;
NSDate *newDate1 = [[NSDate date] dateByAddingTimeInterval:60*60*24*daysToAdd];
NSString *StopDate= [dateFormatter stringFromDate:newDate1]; 
```

假设当前日期是今天的日期..那是 1 月 28 日结束日期变为 1 月 32 日，这是无效的仪式吗？你如何验证日期？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:35:17.547

您是否运行代码并检查结果日期是否确实是 1 月 32 日？

该框架足够智能，可以理解有效日期。你会得到正确的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:35:36.763

您无需担心这一点，因为日期框架知道每个月有多少天。

# ruby-on-rails - 使用自定义 url 方案打开 sublime

> ID：14562129
> 
> 赞同：5
> 
> 时间：2013-01-28T12:33:04.880
> 
> 标签：ruby-on-rails, sublimetext2, url-scheme

rails gem 更好地提供了一个很好的接口来调试 rails web 应用程序。单击文件名应该会打开您喜欢的文本编辑器，例如 TextMate。然而，使用 Sublime，什么都不会发生。

如何为 subl:// 注册一个 url 方案处理程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T12:36:54.943

有同样的问题。经过一番搜索，我在 github 上找到了[subl-handler 。](https://github.com/asuth/subl-handler)

您需要设置您的 sublime，以便您可以在终端中使用 subl-command。寻找本[指南](http://www.sublimetext.com/docs/2/osx_command_line.html)。

安装解决了这个问题。

# javascript - js - 页面上可用空间的宽度和高度

> ID：14562130
> 
> 赞同：0
> 
> 时间：2013-01-28T12:33:07.827
> 
> 标签：javascript, jquery, html

是否可以获取页面上可用空间的宽度和高度？- 换句话说：可以放置在页面上而没有滚动条的矩形的最大尺寸。

我正在使用一个 jquery 数据表，其中整个内容都是可滚动的 - 我想将“sScrollY”值设置为可能的最大值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:43:14.230

如果我很好理解，试试这个 jsbin：http: [//jsbin.com/exojes/3/edit](http://jsbin.com/exojes/3/edit)

JS

```
$(function() {

    var div = $('div').eq(0),
        de  = document.documentElement;

    div.css({
      width: de['offsetWidth'] + 'px',
      height: de['offsetHeight'] + 'px' 
    });

}); 
```

CSS

```
div {
   /* box-sizing is useful if you're using borders or inner paddings */
   -webkit-box-sizing: border-box; 
   -moz-box-sizing: border-box; 
   box-sizing: border-box; 

   border: 2px green dotted;
   position: absolute;
   top: 0; left: 0;
} 
```

* * *

否则，在不涉及 javascript 的情况下，您可以只使用这个 CSS

```
html, body, div {
   height: 100%;
   width: 100%;
}

div {
   -webkit-box-sizing: border-box; 
   -moz-box-sizing: border-box; 
   box-sizing: border-box; 
   border: 2px green dotted;
   position: absolute;
   top: 0; left: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:43:37.427

下面会给你窗口的宽度和高度

```
width = $(window).width();
height = $(window).height(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:47:33.030

你可以得到`width`and `height`of`body`并使用它

```
var height = $("body").height();
var width = $("body").width(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T12:58:53.460

在其他内容上放置一个包装器，并使用以下 JavaScript 来获取页面上的可用空间量。

```
var wHeight = parseFloat(document.getElementById("wrapper").style.height);
var pHeight = $("body").height();
var empty = pHeight - wHeight; 
```

# c# - 有没有办法在 JSON.Net 中模拟 Jackson 的 Mixins？

> ID：14562131
> 
> 赞同：1
> 
> 时间：2013-01-28T12:33:08.950
> 
> 标签：c#, java, .net, jackson, json.net

我目前正在开发一些实用程序库来帮助两个现有系统之间的集成。作为集成过程的一部分，我需要能够将对象转换为 JSON。

由于各种原因，我需要能够修改序列化的字段名称（即将驼峰大小写转换为蛇大小写，并且在某些情况下完全更改字段名称）。

系统的一半（大部分）是用 Java 编写的，完全在我的控制之下。我对 JSON 进行序列化/反序列化的首选解决方案是使用 Jackson。由于各种原因，我们认为修改现有实体类以应用杰克逊所需的属性来生成正确的 JSON 是一种风险。幸运的是，Jackson 提供了 Mixins，它本质上允许我动态地应用注解。这远远优于编写自定义序列化器和反序列化器来完成相同的工作。

系统的另一半是一个 ASP.Net 应用程序，我想再次修改尽可能少的现有代码。我目前正在使用 JSON.Net 进行序列化/反序列化，它似乎支持我需要的一切，包括定义属性以覆盖属性名称。

但是，我似乎无法解决的一件事是 JSON.Net 是否支持与 Jackson 相同的 Mixins 概念。如果我能摆脱它，我想避免修改现有的 .NET 实体类以包含新属性，但我找不到任何文档表明 JSON.Net 中存在此功能。

那么，有人知道是否有（记录/未记录的）方法可以使用 JSON.Net 应用类似 Jackson 的 mixin，还是我需要编写客户序列化器/反序列化器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:35:11.247

不确定这是否有帮助，但作为[ClassMate](https://github.com/cowtowncoder/java-classmate)项目的一部分，Jackson 的混入处理有某种外部实现。库也做了很多其他的事情，所以我不知道提取处理常规注释和混入合并的部分有多容易。

# gps - 如何根据先前已知的纬度/经度计算当前位置纬度/经度

> ID：14562135
> 
> 赞同：0
> 
> 时间：2013-01-28T12:33:33.407
> 
> 标签：gps, latitude-longitude

我需要计算用户当前位置的经纬度值。但是，我不能使用 GPS/网络。我知道用户以前的经纬度位置。该先前位置已从 GPS 提供商处查询。找到此初始位置后，GPS 将不再可用。用户从该点沿特定方向行进一定距离。这两个值，距离和行进方向（以角度表示）都是已知的。有什么方法可以根据这些可用信息（以前的纬度/经度坐标、距离和从先前位置行进的方向）得出新的纬度/经度坐标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:20:46.727

这种导航方法称为[航位推算](http://en.wikipedia.org/wiki/Dead_reckoning)：给定一个初始位置，任务是根据已知信息推断当前位置，例如航向、经过时间和速度（或航向和距离）。[您可能会在此处](http://www.efalk.org/Navigation/math.html)找到一些用于蜜饯新位置的公式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T11:29:57.183

Stefan 为您提供了一个很好的起点。但是，根据您要对这些信息做什么，您可能会更好地使用[卡尔曼滤波器](http://en.wikipedia.org/wiki/Kalman_filter)，这将允许您考虑起始位置、行进距离和行进方向的误差。如果用户不是只移动一次，而是多次移动，则尤其如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:34:25.830

此链接[GeoTools - 如何使用 GeoTools 类进行航位推算和课程计算](https://stackoverflow.com/questions/3917340/geotools-how-to-do-dead-reckoning-and-course-calculations-using-geotools-class)回答了我的问题。给定角度、距离和起始地理点，可以使用[GeoTools (java) 进行计算。](http://www.geotools.org/)请参阅 SO 链接以查看示例。

# svg - 将多个 SVG 文件合并为一个

> ID：14562136
> 
> 赞同：34
> 
> 时间：2013-01-28T12:33:41.450
> 
> 标签：svg

首先，我知道有很多类似的问题，但似乎没有一个对我有用。我想知道是否有任何方法可以将多个 svg 文件合并到一个文件中。有点像这样：

```
<svg id="background" ...>
   <svg id="first" ...>
       ...
   </svg>
   <svg id="second" ...>
       ...
   </svg>
   ...
</svg> 
```

是否有某种模板或教程可以帮助我做到这一点？最后，我想使用 java und javafx 2.2 以编程方式执行此操作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T22:46:48.833

要以这种方式更改 SVG，您应该查看我的 SVG Stacking Tool。由于 SVG 是 XML，因此可以使用 XSLT 来转换数据：

*   [SVG 堆叠 GitHub 存储库](https://github.com/hofmannsven/SVG-Stacking)

**更新：**正如评论中指出的那样，似乎存在一个错误，因此多次请求 SVG 文件。可以在此处找到更多详细信息和可能的解决方案：

*   [使用 SVG Sprites 的问题](https://www.smashingmagazine.com/2016/05/safari-svg-sprite-bug/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-28T17:18:43.823

您可以尝试[svg-join](https://github.com/Climenty/svg-join)在一个符号集合中组合多个 SVG。

此工具为您创建两个文件。第一个是“svg-bundle.svg”：

```
<svg ...>
  <symbol id="svg1" ...>
  <symbol id="svg2" ...>
</svg> 
```

每个符号都是您单独的 SVG 文件。

最后一个是“svg-bundle.css”：

```
.svg_svg1,
.svg_svg2 {
  width: 20px; // for example
  height: 20px;
} 
```

现在您可以在 html 中使用它：

```
<link rel="stylesheet" type="text/css" href="svg-bundle.css" />
...
<svg class="svg_svg1"><use xlink:href="svg-bundle.svg#svg1"></svg>
<svg class="svg_svg2"><use xlink:href="svg-bundle.svg#svg2"></svg> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-11T10:19:45.920

我认为最好和最简单的方法就是这样做，假设你只需要支持主流浏览器的最新两个主要版本，Android 9 Chrome、iOS 13 Safari、桌面：Chrome、Firefox、Safari、Edge 87。

1**编辑**：首先压缩所有 SVG，因为它们可能会在 CSS 中破坏，否则使用例如[https://jakearchibald.github.io/svgomg/](https://jakearchibald.github.io/svgomg/)

2 创建一个**单独**的样式表并嵌入 svg：

```
.icon-1 {
  background-image: url('data:image/svg+xml;utf8,<svg>...</svg>');
}
.icon-2 {
  background-image: url('data:image/svg+xml;utf8,<svg>...</svg>');
} 
```

3 使用 js 延迟加载此样式表 - 因为这些样式表往往会变得非常大，并且通常不需要阻止页面的呈现。

我逃脱`#`了`%23`（不知道是否真的有必要），似乎您**不需要**以其他方式转义常规 svg - 虽然没有测试它们是否包含内联样式标签（这些样式无论如何都可以移动到您的样式表中）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-12-18T00:20:31.983

在搜索了大量资源后，我发现有一个非常方便的 python 解决方案：[https ://github.com/astraw/svg_stack](https://github.com/astraw/svg_stack)

假设你手头有两个 svg 文件，11.svg 12.svg，你可以做的是：

```
python svg_stack.py --direction=h --margin=100 11.svg 12.svg > 1.svg 
```

您可能认为有 6 个 svg 文件以这种方式布局：

```
11 12
21 22
31 32 
```

您可以执行以下步骤：

```
# merge 11 12
python svg_stack.py --direction=h --margin=100 11.svg 12.svg > 1.svg
# merge 21 22
python svg_stack.py --direction=h --margin=100 21.svg 22.svg > 2.svg
# merge 31 32
python svg_stack.py --direction=h --margin=100 31.svg 32.svg > 3.svg
# merge all
python svg_stack.py --direction=v --margin=100 1.svg 2.svg 3.svg > final.svg 
```

请注意，您可以使用`v`和更改合并方向`h`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-06T12:47:25.667

我使用了 Victor gem [https://github.com/DannyBen/victor](https://github.com/DannyBen/victor)

```
first_svg = File.open("first.svg").read
second_svg = File.open("second.svg").read

first_content = first_svg.split("\n")[1..-2].join(", ")
second_content = second_svg.split("\n")[1..-2].join(", ")

svg = Victor::SVG.new width: "100%", height: "100%"
svg << first_content
svg << second_content

svg.save 'final.svg' 
```

* * *

## 回答 #6

> 赞同：-8
> 
> 时间：2013-01-28T14:11:24.207

您是说您拥有完全不同的 SVG 文档吗？在那种情况下，试图将它们塞进一份文件有什么意义呢？我很困惑。

如果你的意思是你想将一个 svg 元素包含在另一个元素中，那是完全可能的，从这个意义上说，你的样本在语法上是正确的。

如果出于某种原因您真的想在单个 SVG 文档中保存本质上不同的文档，那么我想您可以使用 CSS 来打开和关闭每个文档的显示。

```
#first, #second { display: none; }
.display-first #first { display: block; }
.display-second #second { display: block; }

function toggle_first () { document.body.classList.toggle("first"); } 
```

或类似的规定。

# c# - 发布后运行 exe 时出错：“此程序可能未正确安装”

> ID：14562138
> 
> 赞同：5
> 
> 时间：2013-01-28T12:33:45.833
> 
> 标签：c#, forms, publishing

为什么在我发布我的项目后，我不能在关闭项目后只运行我的 exe（您在“调试”文件夹中找到的那个）而不收到此错误消息？- 因此不使用我发布的项目，仍然只使用 exe

我创建了一个测试项目只是为了测试是否是这种情况，并且每次都会发生这种情况。

*   创建一个新的 windows 项目。
*   构建它。
*   转到调试文件夹。
*   将exe复制到桌面
*   运行程序

*   因此打开了一个空白表格。

*   现在关闭它。
*   并且再次出现错误消息。

你如何摆脱这个？我读过你应该在清单等中添加东西，但肯定有更简单的方法吗？我在 Windows 7 64 位机器上使用 Visual Studio 2008。

编辑：

我找到了问题的解决方案。发生这种情况的原因是因为我的项目名称中有“安装程序”或“安装程序”这个词，你能相信吗……这样的事情可能会影响这样的项目。

我发现这个问题在这里得到了解答[如何防止 Vista 上出现“此程序可能未正确安装”消息](https://stackoverflow.com/questions/1577412/program-compatibility-assistant-thinks-my-app-is-an-installer) 这确实是程序这样做的原因。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T07:06:00.367

发生这种情况是因为项目名称中包含“Installer”或“Setup”字样。创建一个没有这些词的名称的项目解决了这个问题。（确实是一个很奇怪的问题）

指向类似问题和答案的链接[here](https://stackoverflow.com/questions/1577412/program-compatibility-assistant-thinks-my-app-is-an-installer)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T13:02:25.127

使用以下内容为您的应用程序添加清单：

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?> 
  <assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0"> 
    <compatibility xmlns="urn:schemas-microsoft-com:compatibility.v1"> 
      <application> 
        <!--The ID below indicates application support for Windows Vista --> 
          <supportedOS Id="{e2011457-1546-43c5-a5fe-008deee3d3f0}"/> 
        <!--The ID below indicates application support for Windows 7 --> 
          <supportedOS Id="{35138b9a-5d96-4fbd-8e2d-a2440225f93a}"/> 
      </application> 
    </compatibility>
  </assembly> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:59:32.600

Windows 似乎认为您的程序是安装程序。[MSDN 中](http://msdn.microsoft.com/en-us/library/aa905330.aspx#wvduac_topic3)有一个页面，其中包含有关 Windows 为何将您的应用程序视为安装程序的信息。

也许[这个问题](https://stackoverflow.com/questions/5276501/this-program-might-not-have-installed-correctly)的答案可以帮助你找到答案？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-19T11:00:51.687

关闭 UAC 适用于 Windows 7。您无需重命名您的应用程序。

1.  按开始按钮并输入“uac”
2.  打开“用户账户控制设置”
3.  将滑块一直拖到底部
4.  重启你的电脑
5.  再次打开您的 .NET 应用程序

但是，如果您无法关闭 UAC（例如在商用机器上），那么最好的方法是重命名您的应用程序以从清单中的 [AssemblyTitle] 字段中删除“setup”或“installer”。

# jquery - 使用ajax jQuery提交表单时无法从服务器加载数据

> ID：14562141
> 
> 赞同：1
> 
> 时间：2013-01-28T12:33:53.757
> 
> 标签：jquery, ajax, forms

我有一个表格：

```
<form name="viewCustomerDetail" method="post">
    <label>View Account Detail</label>
    <ul>
        <li><input name="accountNumber" id="accountNumber" type="text" class="adminsearch"/></li>
        <li><input name="submit" id="submit" type="button" value="Get Customer"/></li>
    </ul>
</form> 
```

和`script`：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#submit").click(function(){
            var acc = $("#accountNumber").val();
            src = "pass.php";

            $.ajax({
                url: src,
                data: 'action=account&type=viewDetail&accNo='+acc,
                cache: false,
                type:'GET',
                success: function(data, textStatus, XMLHttpRequest){
                    if(data!=0) {
                        $("#userInfo").html("");                        
                        $("#userInfo").css("display","block");
                        $("#userInfo").append(data);
                    }else{
                        $("#userInfo").html('');                        
                        $("#userInfo").append('<span class="alert-red alert-icon">Please Enter correct Account Number.</span>');
                        $("#userInfo").css("display","block");
                    }
                 },
             });
         });
     });
</script> 
```

当`script`我单击 时，它运行良好`button`，但如果我将它更改`<input type="button"/>`为`<input type="submit"/>`它不起作用。而且，我想在按下**ENTER**键`script`时运行。任何人都可以提供帮助，我是and的新手。**`<input type="text">``jQuery``ajax`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:39:54.143

尝试将您的处理程序附加到表单的[提交](http://api.jquery.com/submit/)事件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:42:41.053

对于按键（回车），已经有一个线程，您可以在此处找到。我确定答案符合您的需要：[如何从 textarea 提交带有 ENTER 键的 AJAX 表单？](https://stackoverflow.com/questions/6358883/how-to-submit-an-ajax-form-with-enter-key-from-textarea)

这里的代码：

```
jQuery('.new-reply-text').keypress(function(e) {
if (e.keyCode == 13 && !e.shiftKey) {
    e.preventDefault();
    this.form.submit();
}
}); 
```

对于点击甚至使用 jQuerys .submit() 函数：

```
$("#submit").submit(); 
```

在提交中，您可以通过其中的 ajax 请求传递另一个函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T12:44:52.330

在使用`type="submit"`您的表单时，您将执行默认操作，您必须使用上面在一个答案中指定的阻止默认方法。

用于附加事件以输入按键

```
$('#textbox').keypress(function(event){

var keycode = (event.keyCode ? event.keyCode : event.which);
if(keycode == '13'){
//yourcode
}

}); 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T12:38:36.627

用这个

```
$('#form_id').bind('submit',function(e) {
  e.preventDefault(); //Will prevent the submit...
  //Add additional code here
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T12:46:21.093

然后创建一个表单 ID 作为 viewCustomerDetail

```
$("#accountNumber").keypress(function(event) {
 if ( event.which == 13 ) {
$("#viewCustomerDetail").submit();
}
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-06T06:50:28.093

只需制作一个 Submit 函数`Submit()`，然后在 Button click 上调用它，如下所示：

```
input type="Button" value="Submit" onclick="Submit()" 
```

不要将其类型更改为`submit.in submit()`，在提交时输入您想要执行的代码。**

# objective-c - 初始化时的 UiSearchBar OffScreen - iPad

> ID：14562143
> 
> 赞同：1
> 
> 时间：2013-01-28T12:34:12.543
> 
> 标签：objective-c, xcode, ipad, ios6, uisearchbar

我有以下代码在 iOS5 下工作，用于将 UISearchBar 放在 iPad 上 UITableView 的顶部：

```
- (void)viewDidLoad
{
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {

        CGRect searchViewFrame = CGRectMake(33, 33, 264, 45);
        UIView *containerSearch = [[UIView alloc] initWithFrame: searchViewFrame];
        searchBar = [[UISearchBar alloc] init];
        searchBar.barStyle = UIBarStyleDefault;
        [containerSearch addSubview: searchBar];
        self.tableView.tableHeaderView = containerSearch;

        searchController = [[UISearchDisplayController alloc]
                            initWithSearchBar:searchBar
                            contentsController:self];

        searchBar.delegate = self;
        searchController.delegate = self;
        searchController.searchResultsDelegate=self;
        searchController.searchResultsDataSource=self; 

        [searchBar release];
    } 
```

然而，在 iOS6 下，这段代码的行为很奇怪。当 iPad 以横向模式启动时，UISearchBar 处于屏幕外。在将 ipad 旋转为纵向并转回横向之前，它不会出现在正确的位置。

这只是一个 iOS6 错误还是关于如何修复它的任何建议？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:53:18.147

您是否尝试过使用框架初始化搜索栏？`searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0,0,265,45)];`

# php - 用卷曲刮

> ID：14562144
> 
> 赞同：0
> 
> 时间：2013-01-28T12:34:13.253
> 
> 标签：php, curl, web-scraping

我正在尝试使用 PHP CURL 从某些网站上抓取一些信息，问题是它给了我错误（不同）的内容，而不是用普通浏览器打开它

示例站点是这样的： [http ://web.vecer.com/portali/vecer/v1/default.asp?kaj=3&id=2010091905576453](http://web.vecer.com/portali/vecer/v1/default.asp?kaj=3&id=2010091905576453)

我正在尝试获取元标记，在浏览器中它返回为：

```
<meta name="title" content="Razmere v Preboldu se umirjajo" />
<meta name="description" content="Za prebivalci Prebolda je nemirna no&#269;, ki ji je sledilo jutro s &#353;e dodatnimi padavinami..." />
<link rel="image_src" href="http://web.vecer.com/portali/podatki/2010/09/19/slike/online_Prebold0-100.jpg" />
<link rel="target_url" href="http://web.vecer.com/portali/vecer/v1/default.asp?kaj=3&id=2010091905576453" /> 
```

但我的卷曲得到了这个：

```
<title>VECER.COM: </title>
<meta name="title" content="" />
<meta name="description" content="" />
<link rel="image_src" href="-100.jpg" />
<link rel="target_url" href="http://web.vecer.com/portali/vecer/v1/default.asp?kaj=3&id=1899123000000000"> 
```

这是我的代码：

```
function curl($url){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);

    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 5.1) AppleWebKit/535.6 (KHTML, like Gecko) Chrome/16.0.897.0 Safari/535.6'); 
    curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");
    curl_setopt($ch, CURLOPT_COOKIEJAR, "cookie.txt");
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
    curl_setopt($ch, CURLOPT_REFERER, "http://www.windowsphone.com");

    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-19T14:19:19.160

嗨，对于元数据和所有其他属性抓取，您可以使用[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

```
$target_url = "http://stackoverflow.com/questions";
$userAgent = 'Googlebot/2.1 (http://www.googlebot.com/bot.html)';

// make the cURL request to $target_url
$ch = curl_init();
curl_setopt($ch, CURLOPT_USERAGENT, $userAgent);
curl_setopt($ch, CURLOPT_URL,$target_url);
curl_setopt($ch, CURLOPT_FAILONERROR, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_AUTOREFERER, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch, CURLOPT_TIMEOUT, 10);
$html= curl_exec($ch);
if (!$html) {
echo "<br />cURL error number:" .curl_errno($ch);
echo "<br />cURL error:" . curl_error($ch);
exit;
}

// parse the html into a DOMDocument
$dom = new DOMDocument();
@$dom->loadHTML($html);

  // grab all the on the page

$xpath = new DOMXPath($dom);
$hrefs = $xpath->evaluate("/html/body//a");

for ($i = 0; $i < $hrefs->length; $i++) {
$href = $hrefs->item($i);
$url = $href->getAttribute('href');
//storeLink($url,$target_url);
echo "<br />Link stored: $url";
} 
```

# php - 错误：将 magento 从 1.5 升级到 1.7 时，在非对象上调用成员函数 getAllOptions()

> ID：14562145
> 
> 赞同：1
> 
> 时间：2013-01-28T12:34:16.647
> 
> 标签：php, magento-1.7, magento-1.5, magento

我有一个基于社区版 1.5 的 magento 站点，当我将它升级到 1.7 时出现错误：“在非对象上调用成员函数 getAllOptions()...” 几乎所有解决方案都尝试过，但无法做出它工作。

完整的错误消息是：

```
Call to a member function getAllOptions() on a non-object in /site-path/app/code/core/Mage/Core/Model/Cache.php on line 434 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T23:32:43.907

您的网店是否使用 Aitoc Extensions ？

[http://www.magentocommerce.com/boards/viewthread/279027/](http://www.magentocommerce.com/boards/viewthread/279027/)

您需要重新安装或升级扩展，但同时您可以做的是：

评论 App/Mage.php 第 198 行

```
//self::$_appRoot = null; 
```

因为这一行被调用：app/code/core/Mage/Core/Model/Config/Options.php 第54行：

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-26T04:27:36.747

> 致命错误：在非对象上调用成员函数 getAllOptions()。在文件 app/code/core/Mage/Core/Model/Cache.php 中。

**评论 App/Mage.php 第 198 行 //self::$_appRoot = null;**

# java - 无法建立与 Exchange Web 服务的连接 - Java API

> ID：14562153
> 
> 赞同：5
> 
> 时间：2013-01-28T12:34:39.860
> 
> 标签：java, exchangewebservices

我正在测试**Microsoft Exchange Web Service Java API**（1.2 版）以从服务器读取邮件。这是我的代码：

```
String url = "https://my-server/EWS/exchange.asmx";
ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2007_SP1);
service.setTraceEnabled(true);
service.setCredentials(new WebCredentials("user", "password"));
service.setUrl(url.toURI());

Mailbox mailbox = new Mailbox("foo@bar.com");
FolderId folder = new FolderId(WellKnownFolderName.Inbox, mailbox);
ItemView view = new ItemView(10);
view.getOrderBy().add(ItemSchema.DateTimeReceived, SortDirection.Descending);
FindItemsResults<Item> items = service.findItems(folder, view); 
```

不幸的是，此代码引发以下错误：

```
Exception in thread "main" microsoft.exchange.webservices.data.EWSHttpException: Connection not established
    at microsoft.exchange.webservices.data.HttpClientWebRequest.throwIfConnIsNull(Unknown Source)
    at microsoft.exchange.webservices.data.HttpClientWebRequest.getResponseCode(Unknown Source)
    at microsoft.exchange.webservices.data.EwsUtilities.formatHttpResponseHeaders(Unknown Source)
    at microsoft.exchange.webservices.data.ExchangeServiceBase.traceHttpResponseHeaders(Unknown Source)
    at microsoft.exchange.webservices.data.ExchangeServiceBase.processHttpResponseHeaders(Unknown Source)
    at microsoft.exchange.webservices.data.SimpleServiceRequestBase.internalExecute(Unknown Source)
    at microsoft.exchange.webservices.data.MultiResponseServiceRequest.execute(Unknown Source)
    at microsoft.exchange.webservices.data.ExchangeService.findItems(Unknown Source)
    at microsoft.exchange.webservices.data.ExchangeService.findItems(Unknown Source)
    at foo.bar.TestMail.main(TestMail.java:52) 
```

我无法理解当前代码有什么问题。你有什么线索，或者至少有一些测试可以尝试吗？

请注意，`https//my-server/exchange.asmx`我的 Java 代码可以访问 Web 服务 ( )。

不确定它是否有帮助，但我在日志显示的跟踪中发现：

```
<Trace Tag="EwsResponse" Tid="1" Time="2013-01-28 10:47:03Z">
<html><head><title>Error</title></head><body>The function requested is not supported
</body></html>
</Trace> 
```

* * *

**编辑**

我又做了一个测试。这一次，我使用默认凭据 - 所以我自己的电子邮件帐户 - 使用`service.setUseDefaultCredentials(true);`而不是设置`WebCredentials`对象。连接仍未建立，但我收到另一个错误（我只记录了跟踪日志中有趣的部分）：

```
<h1>You are not authorized to view this page</h1>
You do not have permission to view this directory or page using the credentials that you supplied because your Web browser is sending a WWW-Authenticate header field that the Web server is not configured to accept.
(...)
<h2>HTTP Error 401.2 - Unauthorized: Access is denied due to server configuration.<br>Internet Information Services (IIS)</h2> 
```

当然，我无法访问或更改 Exchange 服务器端的任何内容。有没有办法使认证成功？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:00:34.267

问题是由于使用的身份验证方案造成的。默认情况下，EWS 使用 NTLM，但我的 Exchange 服务器未配置为接受这种身份验证。我必须使用 LDAP 身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-04T13:52:01.307

我收到了上述错误并花了很多时间试图修复它。我的最终解决方案是完全放弃 EWS 1.2 版并使用以下 javax.mail 代码，如下所示：

```
package javaapplication4;
import java.util.Date;
import java.util.Properties;

import javax.mail.Message;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.MimeMessage;

public class JavaApplication4 {
    public static void main(String[] args) throws Exception {
           new JavaApplication4().send_email();
    }
    private void send_email() throws Exception
    {
        Properties props = new Properties();
        props.put("mail.smtp.host", "smtp.yourserver.net");
        props.put("mail.from", "yourusername@youremailaddress.com");
        props.put("mail.smtp.starttls.enable", "true");
        props.put("mail.smtp.ssl.enable", "false");
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.port", "587");

        Authenticator authenticator = new Authenticator();
        props.setProperty("mail.smtp.submitter", authenticator.getPasswordAuthentication().getUserName());

        Session session = Session.getInstance(props, authenticator);
        MimeMessage msg = new MimeMessage(session);
        msg.setFrom();
        msg.setRecipients(Message.RecipientType.TO, "yourusername@youremailaddress.com");  
            // also tried @gmail.com
        msg.setSubject("JavaMail ssl test");
        msg.setSentDate(new Date());
        msg.setText("Hello, world!\n");

        Transport transport;
        transport = session.getTransport("smtp");
        transport.connect();
        msg.saveChanges(); 
        transport.sendMessage(msg, msg.getAllRecipients());
        transport.close();
    }
    private class Authenticator extends javax.mail.Authenticator {
       private PasswordAuthentication authentication;
       public Authenticator() {
           String username = "yourusername@youremailaddress.com";
           String password = "yourpassword";
           authentication = new PasswordAuthentication(username, password);
       }
       protected PasswordAuthentication getPasswordAuthentication() {
           return authentication;
       }
   }
} 
```

您将需要获取并将from ( [http://www.oracle.com/technetwork/java/index-138643.html](http://www.oracle.com/technetwork/java/index-138643.html)`javamail-1.4.7` )加载到项目中。 `mail.jar`

我们做的一件事可以说明情况是下载 Thunderbird 邮件客户端，它可以自动发现有关交换服务器的信息，以确保我们所有的设置都是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-20T06:33:34.570

> 这是 EWS JAVA api 1.2 的示例，这是您可以尝试的方法之一

```
package com.ea.connector.exchange;
import java.net.URI;
import java.net.URISyntaxException;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import microsoft.exchange.webservices.data.BasePropertySet;
import microsoft.exchange.webservices.data.ExchangeCredentials;
import microsoft.exchange.webservices.data.ExchangeService;
import microsoft.exchange.webservices.data.FindItemsResults;
import microsoft.exchange.webservices.data.Item;
 import microsoft.exchange.webservices.data.ItemSchema;
import microsoft.exchange.webservices.data.ItemView;
import microsoft.exchange.webservices.data.LogicalOperator;
import microsoft.exchange.webservices.data.OffsetBasePoint;
import microsoft.exchange.webservices.data.PropertySet;
import microsoft.exchange.webservices.data.SearchFilter;
import microsoft.exchange.webservices.data.SortDirection;
import microsoft.exchange.webservices.data.WebCredentials;
import microsoft.exchange.webservices.data.WebProxy;
import microsoft.exchange.webservices.data.WellKnownFolderName;

import org.apache.commons.httpclient.NTCredentials;

import com.ea.connector.exchange.bean.ExchangeConnectionParamBean;
import com.ea.connector.exchange.util.ExchMessageProperties;
import com.ea.connector.net.ExchGetItemRequest;

public class Test {

protected static ArrayList<String> propertiesToFetch = new ArrayList<String>();

private static ExchangeService mService;

 // private Settings mSettings;
//  
//  private int imailCount;

private Date dStartDate;
private Date dEndDate;
private static ExchangeConnectionParamBean objParamBean;
public void setPropertiesToBeFetched(List<String> filter) {
    propertiesToFetch.addAll(filter);
}
public Date getConnectorStartDate() {
    return dStartDate;
}

public void setConnectorStartDate(Date dStartDate) {
    this.dStartDate = dStartDate;
}

public ExchangeConnectionParamBean getParamBean() {
    return objParamBean;
}

public void setParambean(ExchangeConnectionParamBean objParambean) {
    Test.objParamBean = objParambean;
}

public Date getConnectorEndDate() {
    return dEndDate;
}

public void setConnectorEndDate(Date dEndDate) {
    this.dEndDate = dEndDate;
}

    public static void main(String []args) throws URISyntaxException,Exception
    {
        setCredentialsAndGetExchRequest();
        System.out.println("conncection established");
    }

    protected static ExchGetItemRequest setCredentialsAndGetExchRequest() throws   URISyntaxException,Exception{

        @SuppressWarnings("unused")
        FindItemsResults<Item> resultMails;

        mService = new ExchangeService();
        mService.setUrl(new URI("https://outlook.office365.com/EWS/Exchange.asmx"));
        WebProxy paramWebProxy=new WebProxy("ptbproxy.domain.com",8080);
        mService.setWebProxy(paramWebProxy);

        ExchangeCredentials cred = new WebCredentials("EA_Test_mailbox@domain.com","Zuxu0000");
        NTCredentials ntCredentials = new NTCredentials("EA_Test_mailbox@domain.com","Zuxu0000",                 "",
                "");
        mService.setCredentials(cred);
//          ProxyHost httpProxy=new ProxyHost("ptbproxy.domain.com",8080);
//          UsernamePasswordCredentials cred1=new     UsernamePasswordCredentials("EA_Test_mailbox@domain.com","Zuxu0000");

//          ExchGetItemRequest req = new ExchGetItemRequest(String.valueOf(new URI("http://outlook.office365.com/EWS/Exhanges.asmx")),ntCredentials);
        ExchGetItemRequest req = new ExchGetItemRequest("https://outlook.office365.com/EWS/Exhange.asmx",ntCredentials);

        SearchFilter filter = getSearchFilter();

        PropertySet propertySet = new PropertySet(BasePropertySet.IdOnly);
        ItemView itemView = new ItemView(1000, 0, OffsetBasePoint.Beginning);
        itemView.getOrderBy().add(ItemSchema.DateTimeReceived, SortDirection.Descending);
        itemView.setPropertySet(propertySet);

        //mService.setTimeout(500000);

        req.setProperties(new    ExchMessageProperties().getExchMessageProperties(propertiesToFetch));

              /*Fetching of  mail ids start here*/
                resultMails = getMails(filter, itemView);

                return req;
    }   

    protected static SearchFilter getSearchFilter() throws ParseException {
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-mm-dd HH:mm:ss");
    Date d1 = sdf.parse("2014-11-04 00:00:00");
    Date d2 = sdf.parse("2014-11-05 00:00:00");

        SearchFilter greaterThanEq = new SearchFilter.IsGreaterThanOrEqualTo(
                ItemSchema.DateTimeReceived,sdf.format(d1));
        SearchFilter lessThan = new SearchFilter.IsLessThan(
                ItemSchema.DateTimeReceived, sdf.format(d2));
        SearchFilter mailFilter = new SearchFilter.IsEqualTo(
                ItemSchema.ItemClass, "IPM.Note");
      return new SearchFilter.SearchFilterCollection(LogicalOperator.And,
                greaterThanEq, lessThan, mailFilter);
    }
    private static FindItemsResults<Item> getMails(SearchFilter searchFilter,
            ItemView itemView) throws Exception {
        FindItemsResults<Item> items = null;

        int count = 0;

        int maxTries = 3;

        while (true) {
            try {
                items = mService.findItems(WellKnownFolderName.Inbox,
                        searchFilter, itemView);
                break;
            } catch (Exception e) {
                if (++count == maxTries)
                    throw e;
            }
        }

        return items;
    } 
```

}

# java - 如何在mac上设置java环境变量

> ID：14562156
> 
> 赞同：7
> 
> 时间：2013-01-28T12:34:42.373
> 
> 标签：java, macos, environment-variables

如何设置可以`System.getenv()`在 Mac OS X Lion 上读取的 java 环境变量？我在 Eclipse 中开发。

我在终端中使用了这个命令，`export VAR_NAME=Value`但`System.getEnv(VAR_NAME)`返回`null`.

我尝试过`java -DVAR_NAME=Value`，但没有执行任何操作。我只得到 java 参数的帮助。

我在当前项目文件夹中创建了`.bash_profile`包含以下内容的文件：`export VAR_NAME=Value`. 它不工作。

我还在`.MacOSX`里面创建了一个包含单个文件的文件夹`environment.plist`，在这个文件中我使用 XCode 编写了属性及其值。没有任何工作。

我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T13:14:55.110

目前尚不清楚您在这里实际在做什么。如果您尝试为*从 Eclipse*启动的 Java 命令设置环境变量，那么简单的解决方案是通过 Eclipse 命令启动器配置进行设置。另一种选择是：

1.  退出 Eclipse，
2.  `export VAR_NAME=Value`在命令外壳实例中运行，并且
3.  *从同一个 shell 实例*启动 Eclipse 。

* * *

重新尝试过的事情。

> 我在终端中使用了这个命令，`export VAR_NAME=Value`但`System.getEnv(VAR_NAME)`返回`null`.

如果您`export`从命令提示符运行该命令，然后立即从同一命令提示符启动该命令，则*应该*可以。export 命令告诉命令提示符使用的 shell 实例添加`VAR_NAME`到它导出到运行命令*后启动的子进程的环境变量列表中。`export`*已经全部启动的子进程*不会看到变化*。

我强烈怀疑您是在启动 Eclipse`export` *之后*运行的……或者您没有从该 shell 实例启动 Eclipse。如果这两者中的任何一个为真，则该`export`命令不会影响 Eclipse 的环境变量，它（默认情况下）传递给您从 Eclipse 启动的任何 Java 程序。

> 我尝试过`java -DVAR_NAME=Value`，但没有执行任何操作。我只得到 java 参数的帮助。

失败有几个原因：

*   这`-DVAR_NAME=...`是设置系统属性而不是环境变量，并且
*   你还没有告诉`java`你要开始的班级的名字！

> 我在当前项目文件夹中创建了`.bash_profile`包含以下内容的文件：`export VAR_NAME=Value`

这只会影响在您创建文件*后*启动的新 shell 实例。它不会影响现有的。

> 我还在 environment.plist 中使用单个文件创建了文件夹 .MacOSX，在这个文件中我使用 XCode 编写了属性及其值。

我不知道那会做什么。你在哪里创建的那个文件夹？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-25T15:05:41.130

1.打开终端

2.export VAR_NAME=值

3.打开/Applications/Eclipse.app

# performance - 如何仅在整数中使用 mongodb 中的地理索引？（就像一个有瓷砖的游戏板）

> ID：14562159
> 
> 赞同：1
> 
> 时间：2013-01-28T12:34:44.117
> 
> 标签：performance, mongodb

如何仅在整数中使用 mongodb 中的地理索引？（就像一个有瓷砖的游戏板）

```
use geoTest
db.tiles.remove()
db.tiles.dropIndexes()
db.tiles.ensureIndex({"tiles": "2d"}, {min:-1000000000000000000, max: 1000000000000000000})
db.tiles.insert({id: "1234", tiles: [[10, 10], [20, 20]]})
db.tiles.insert({id: "1234", tiles: [1000000, 1000000]})
db.tiles.find({tiles: {$within:{$box:[[11,11],[20,20]]}}})
db.tiles.find({tiles: {$within:{$box:[[11,11],[10000000,1000000]]}}}) 
```

但这会像这样保存图块：10.0 而不是 10。

*   这会有性能问题还是我不​​应该关心这个？
*   索引中有这么大的间隔是不是很糟糕？{最小值：-1000000000000000000，最大值：1000000000000000000}
*   在某处`tiles: [[10, 10], [20, 20]]`和其他地方使用`tiles: [1000000, 1000000]`可能会导致性能问题，或者可以吗？（注意第一个有 2 个位置，第二个有一个位置）

# ruby-on-rails - 用户可以查看并获得其他用户解决方案的评论

> ID：14562160
> 
> 赞同：-2
> 
> 时间：2013-01-28T12:34:44.413
> 
> 标签：ruby-on-rails, polymorphic-associations

我在我的`Review`模型上使用多态关联`User`和`Post`。但是，我也会为每条评论拥有一个所有者。

所有者我的意思是关联`user`模型。但这带来了问题，因为**用户可以评论并拥有其他用户的评论**

最好的方法是什么。欢迎任何解决方案的想法。

**评论.rb**

```
belongs_to :reviewable, polymorphic: true
belongs_to :user # owner of the reviews 
```

**用户.rb**

```
 # reviews from others
  has_many :reviews, as: :reviewable, dependent: :destroy 
  has_many :reviews  # user written reviews 
```

**Post.rb**

```
 has_many :reviews, as: :reviewable, dependent: :destroy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:18:43.057

明显的问题是您的`User`模型中有两个同名的关联。一个简单的解决方法是重命名其中一个。由于您`Post`已经有一个`reviews`与类似的`reviews`多态关联匹配的关联，您可以将用户撰写的评论重命名为：

```
has_many :reviews_by_me, class_name: 'Review' 
```

通过指定类名，Rails 可以推断出其余的信息，并`Review`在`user_id`您的`User`.

# android - 如何针对不同的屏幕尺寸缩放应用程序？

> ID：14562163
> 
> 赞同：2
> 
> 时间：2013-01-28T12:34:49.720
> 
> 标签：android, actionscript-3, air

我正在寻找一种强大的方法来针对不同的屏幕尺寸向上或向下扩展我的 AIR for Android 应用程序。

该应用程序将私下发布，并且可能只会安装在分辨率范围很小（通常为 720 或 1080p）的设备上

现在，首先，我了解到您无法动态更改舞台高度和宽度，并且只能在应用程序设置中设置一次。所以首先，我是否将我的应用程序设置为最大分辨率，1080p，并按比例缩小。还是我将它设置在 1080 到 720 之间的中间位置并让它上下缩放？

其次，我应该如何扩展它？我应该使用`Stage.scaleMode`，如果是，哪种模式？

如果无法直接调整舞台大小，如何缩放应用程序？

我查看了以下页面，但由于某些奇怪的原因，它们似乎不能很好地工作，如果有的话？

[链接 1](http://gregsramblings.com/2010/05/06/scaling-an-adobe-air-application-to-fit-multiple-resolutions-and-netbooks/) [链接 2](http://www.adobe.com/devnet/air/articles/multiple-screen-sizes.html) [链接 3](http://www.adobe.com/devnet/flash/articles/authoring_for_multiple_screen_sizes.html) [链接 4](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e31.html#WS0D75B487-23B9-402d-A52D-CB3C4CEB9EE4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:25:42.730

你可以动态地做所有事情！

利用：

```
stage.scaleMode = StageScaleMode.NO_SCALE;
stage.align = StageAlign.TOP_LEFT 
```

并在应用程序启动时自行处理。通过使用相对值而不是固定像素来定位您的项目

要获取设备尺寸和 DPI，请使用：

```
Capabilities.screenResolutionX;
Capabilities.screenResolutionY;
Capabilities.screenDPI; 
```

如果您使用的是位图，请不要让它们缩放太多，而是先向下再向上。还要检查位图的 .smoothing 属性。最好准备好不同大小的位图，并根据您的屏幕大小在某些启动方法中替换它们。

第二个链接你postet acutally很好地解释了这一切

# tsql - T-SQL 需要帮助优化表值函数

> ID：14562164
> 
> 赞同：1
> 
> 时间：2013-01-28T12:34:49.357
> 
> 标签：tsql, function, sql-server-2012

我需要帮助来优化我的一个函数中的 SQL 逻辑。请注意，我无法使用存储过程。

这是我的桌子。它将使用包含大量记录的@MainTable 进行初始化。

```
DECLARE TABLE @ResultTable
(
    ResultValue INT
) 
```

这些是存储一些参数的表——它们也可以是空的。

```
DECLARE TABLE @ParameterOne (ParameterOne INT)
DECLARE TABLE @ParameterTwo (ParameterOne NVARCHAR(100))
...
DECLARE TABLE @ParameterN(ParameterN TINYINT) 
```

现在，我需要将很多表加入到我的@MainTable 中，以便从中仅选择其中的一些记录。所选记录取决于存储在参数表中的信息。

所以，我目前的解决方案是：

```
INSERT INTO  ResultTable(ResultValue)
SELECT ResultValue 
FROM MainTable M
INNER JOIN @MainOne MO
    ON M.ID=MO.ID
....
INNER JOIN @MainN MN
    ON M.IDN=MN.ID
WHERE (EXISTS (SELECT 1 FROM @ParameterOne WHERE ParameterOne=MO.ID) OR NOT EXISTS (SELECT 1 FROM @ParameterOne))
       AND 
      ...
       AND
      (EXISTS (SELECT 1 FROM @ParameterN WHERE ParameterN=MN.Name) OR NOT EXISTS (SELECT 1 FROM @ParameterN )) 
```

因此，我们的想法是仅当记录与参数表中的当前条件匹配时才添加记录。

因为我无法使用过程来构建动态查询，所以我正在使用 WHERE 子句以及每个参数表的 EXISTS 和 NOT EXISTS 组合。

问题是当我添加越来越多的参数表时它的工作速度会变慢。是否有其他方法可以在不使用大量 IF/ELSE 语句检查哪些参数表有记录的情况下执行此操作 - 它会使函数变得更大且难以阅读。

欢迎提出想法和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:07:18.667

好问题。

尝试以下一种：

```
INSERT INTO  ResultTable(ResultValue)
SELECT ResultValue 
FROM MainTable M
INNER JOIN (SELECT * FROM @MainOne WHERE (EXISTS (SELECT 1 FROM @ParameterOne WHERE ParameterOne=@MainOne.ID) OR NOT EXISTS (SELECT 1 FROM @ParameterOne))) MO
    ON M.ID=MO.ID
....
INNER JOIN (SELECT * FROM @MainN WHERE (EXISTS (SELECT 1 FROM @ParameterN WHERE ParameterOne=@MainN.Name OR NOT EXISTS (SELECT 1 FROM @ParameterN))) MO
    ON M.IDN=MN.ID 
```

好处：

1.  JOIN 的结果更快，因为它没有处理所有数据（它已经被过滤了）
2.  调整起来看起来更简单

# c# - 使用 Quartz.NET 和 Simple Injector 进行构造函数注入

> ID：14562176
> 
> 赞同：39
> 
> 时间：2013-01-28T12:35:20.317
> 
> 标签：c#, .net, dependency-injection, quartz.net, simple-injector

目前我正在使用 Quartz.NET 编写一个服务来安排它的运行。

我想知道是否有人有使用 Quartz.NET 和 Simple Injector 的构造函数注入的经验。

以下基本上是我希望实现的目标

```
public class JobImplementation: IJob
{
    private readonly IInjectedClass injectedClass;

    public JobImplementation(IInjectedClass _injectedClass)
    {
         injectedClass = _injectedClass
    }

    public void Execute(IJobExecutionContext _context)
    {
        //Job code
    } 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-28T13:02:18.117

根据[this blog post](http://blog.goyello.com/2009/09/21/how-to-use-quartz-net-in-pro-way/)，您需要实现一个自定义`IJobFactory`，如下所示：

```
public class SimpleInjectorJobFactory : IJobFactory
{
    private readonly Container container;
    private readonly Dictionary<Type, InstanceProducer> jobProducers;

    public SimpleInjectorJobFactory(
        Container container, params Assembly[] assemblies)
    {
        this.container = container;

        // By creating producers, jobs can be decorated.
        var transient = Lifestyle.Transient;
        this.jobProducers =
            container.GetTypesToRegister(typeof(IJob), assemblies).ToDictionary(
                type => type,
                type => transient.CreateProducer(typeof(IJob), type, container));
    }

    public IJob NewJob(TriggerFiredBundle bundle, IScheduler _)
    {
        var jobProducer = this.jobProducers[bundle.JobDetail.JobType];
        return new AsyncScopedJobDecorator(
            this.container, () => (IJob)jobProducer.GetInstance());
    }

    public void ReturnJob(IJob job)
    {
        // This will be handled automatically by Simple Injector
    }

    private sealed class AsyncScopedJobDecorator : IJob
    {
        private readonly Container container;
        private readonly Func<IJob> decorateeFactory;

        public AsyncScopedJobDecorator(
            Container container, Func<IJob> decorateeFactory)
        {
            this.container = container;
            this.decorateeFactory = decorateeFactory;
        }

        public async Task Execute(IJobExecutionContext context)
        {
            using (AsyncScopedLifestyle.BeginScope(this.container))
            {
                var job = this.decorateeFactory();
                await job.Execute(context);
            }
        }
    }
} 
```

此外，您还需要以下注册：

```
var container = new Container();

container.Options.ScopedLifestyle = new AsyncScopedLifestyle();

var factory = new StdSchedulerFactory();

IScheduler scheduler = await factory.GetScheduler();

scheduler.JobFactory = new SimpleInjectorJobFactory(
    container, 
    Assembly.GetExecutingAssembly()); // assemblies that contain jobs

// Optional: register some decorators
container.RegisterDecorator(typeof(IJob), typeof(LoggingJobDecorator));

container.Verify(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-14T21:07:36.693

迟到了，但[https://github.com/hbiarge/Quartz.Unity](https://github.com/hbiarge/Quartz.Unity)非常适合结合 Quartz.NET 和 Unity。

```
IUnityContainer container = new UnityContainer();
container.AddNewExtension<Quartz.Unity.QuartzUnityExtension>();
// do your other Unity registrations
IScheduler scheduler = container.Resolve<IScheduler>();

scheduler.ScheduleJob(
    new JobDetailImpl(myCommandName, typeof(MyCommand)),
    TriggerBuilder.Create()
        .WithCronSchedule(myCronSchedule)
        .StartAt(startTime)
        .Build()
);
scheduler.Start(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-27T08:38:21.773

使用来自 asp.net 核心的依赖注入引擎的 Quartz.net 只需几个步骤。

将 nuget 包添加到您的项目中：

```
Microsoft.Extensions.DependencyInjection 
```

创建自定义 JobFactory：

```
public class JobFactory : IJobFactory
{
    protected readonly IServiceProvider _serviceProvider;

     public JobFactory(IServiceProvider serviceProvider) 
         => _serviceProvider = serviceProvider;

     public IJob NewJob(TriggerFiredBundle bundle, IScheduler scheduler)
         => _serviceProvider.GetService(bundle.JobDetail.JobType) as IJob;

     public void ReturnJob(IJob job) 
         => (job as IDisposable)?.Dispose();
 } 
```

配置调度器时指定 JobFactory：

```
 var scheduler = await StdSchedulerFactory.GetDefaultScheduler();
 scheduler.JobFactory = new JobFactory(_serviceProvider); 
```

对于某些人来说，在板上使用 Quartz.net 和 DI（来自 asp.net 核心）作为 win 服务的有用示例：

```
public class WinService : ServiceBase
{
    private Scheduler _scheduleManager;

    private readonly Startup _startup;

    public WinService()
    {
        ServiceName = "SomeWinService";
        _startup = new Startup();
    }

    static void Main(string[] args)
    {
        var service = new WinService();

        // Working as Windows-service
        if (Console.IsInputRedirected && Console.IsOutputRedirected)
        {
            ServiceBase.Run(service);
        }
        // Working as console app
        else
        {
            service.OnStart(args);
            Console.WriteLine("Press any key to stop...");
            Console.ReadKey();
            service.OnStop();
        }
    }

    protected override void OnStart(string[] args)
    {
        _startup.RegisterServices();
        _scheduleManager = new Scheduler(_startup.ServiceProvider);
        _scheduleManager.StartTracking().Wait();
    }

    protected override void OnPause()
        => _scheduleManager.PauseTracking().Wait();

    protected override void OnContinue()
        => _scheduleManager.ResumeTracking().Wait();

    protected override void OnStop()
    {
        _scheduleManager.StopTracking().Wait();
        _startup.DisposeServices();
    }
}

public class Startup
{
    private IServiceProvider _serviceProvider;

    public IServiceProvider ServiceProvider => _serviceProvider;

    public void RegisterServices()
    {        
        _serviceProvider = new ServiceCollection()
            //.AddTransient(...)
            //.AddScoped(...)
            //.AddSingleton(...)
            .BuildServiceProvider();

    }

    public void DisposeServices()
    {
        if (_serviceProvider == null)
            return;

        if (_serviceProvider is IDisposable)
        {
            ((IDisposable)_serviceProvider).Dispose();
        }
    }
}

public class Scheduler
{        
    private readonly IServiceProvider _serviceProvider;

    private IScheduler _scheduler;

    public Scheduler(IServiceProvider serviceProvider) 
        => _serviceProvider = serviceProvider;

    public async Task StartTracking()
    {
        _scheduler = await StdSchedulerFactory.GetDefaultScheduler();
        _scheduler.JobFactory = new JobFactory(_serviceProvider);
        await _scheduler.Start();

        // Schedule your jobs here
    }

    public async Task PauseTracking() => await _scheduler?.PauseAll();

    public async Task ResumeTracking() => await _scheduler?.ResumeAll();

    public async Task StopTracking() => await _scheduler?.Shutdown();
} 
```

# wpf - 如何使用 XAML 中的触发器更改路径填充（在按钮上）

> ID：14562186
> 
> 赞同：13
> 
> 时间：2013-01-28T12:35:51.080
> 
> 标签：wpf, xaml, triggers, path, fill

我有一个带有路径作为图标的按钮，当鼠标悬停在整个按钮上时（不仅是路径），我想更改路径的填充。谢谢。

```
 <Button Name="Test_Button"
            Width="220"
            Height="80"
            Padding="2">

        <Canvas Width="76"
                Height="76"
                Clip="F1 M 0,0L 76,0L 76,76L 0,76L 0,0">

            <Path Canvas.Left="19"
                  Canvas.Top="19"
                  Width="38"
                  Height="38"
                  Data="F1 M 35,19L 41,19L 41,35L 57,35L 57,41L 41,41L 41,57L 35,57L 35,41L 19,41L 19,35L 35,35L 35,19 Z "
                  Stretch="Fill">
                <Path.Style>
                    <Style TargetType="{x:Type Path}">
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Path.Fill" Value="Red" />
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="False">
                                <Setter Property="Path.Fill" Value="Gray" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Path.Style>
            </Path>
        </Canvas>
    </Button> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-28T13:15:23.617

您可以绑定`Path.Fill`到 Button 的[Foreground](http://msdn.microsoft.com/en-us/library/system.windows.controls.control.foreground.aspx)属性并以 Button Style 修改 Foreground：

```
<Button Name="Test_Button" Width="220" Height="80" Padding="2">
    <Canvas Width="76" Height="76" Clip="F1 M 0,0L 76,0L 76,76L 0,76L 0,0">
        <Path Canvas.Left="19" Canvas.Top="19" Width="38" Height="38" Stretch="Fill"
              Fill="{Binding Foreground, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Button}}"
              Data="F1 M 35,19L 41,19L 41,35L 57,35L 57,41L 41,41L 41,57L 35,57L 35,41L 19,41L 19,35L 35,35L 35,19 Z">
        </Path>
    </Canvas>
    <Button.Style>
        <Style TargetType="Button">
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Foreground" Value="Red" />
                </Trigger>
                <Trigger Property="IsMouseOver" Value="False">
                    <Setter Property="Foreground" Value="Gray" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </Button.Style>
</Button> 
```

# c# - 当一组子字符串连接形成结果字符串时，如何防止字符串出现在结果字符串中？

> ID：14562187
> 
> 赞同：0
> 
> 时间：2013-01-28T12:35:52.363
> 
> 标签：c#, regex, string, parsing, filter

我有 5 个字符串，我们称它们为

*   `EarthString`
*   `FireString`
*   `WindString`
*   `WaterString`
*   `HeartString`

它们都可以有不同的长度，它们中的任何一个都可以是空的，或者可以很长（但不能为空）。

这5个字符串是很要好的朋友，每个周末都用这个c#语句将它们串联起来形成一个结果字符串

`ResultString = EarthString + FireString + WindString + WaterString + HeartString`

根据这些字符串的值，有时（仅有时）`ResultString`将包含“Captain Planet”作为子字符串。

我的问题是，如何在连接 5 个字符串之前对其进行操作，这样当它们组合时，“Captain Planet”将**永远不会**作为子字符串出现在结果字符串中？

我现在能想到的唯一方法是按顺序检查每个字符串中的每个字符，但这似乎很乏味。由于 5 个好朋友字符串中的每一个都可以是任意长度，因此单独检查字符还需要某种连接，然后才能确定是否需要删除任何字符。

编辑：结果字符串是连接在一起的 5 个字符串的过滤版本，所有其他内容保持不变，除了“Captain Planet”字符串被删除。是的，我正在寻找一种允许在连接之前对 5 个字符串进行操作的解决方案。（这实际上是我遇到的更大编程问题的简化）。多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:41:44.970

你不能这样做有什么特别的原因吗？

```
ResultString.Replace("CaptainPlanet", "x"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:50:19.593

如果你想在连接前做，你可以

根据它们所包含的“CaptainPlanet”部分为每个字符串的开头和结尾分配一个数值。例如：如果 Air = "net the big Captain"，那么它会得到 3 的起始值和 7 的结束值。要确定是否可以安全地连接 2 个值，您只需检查左侧字符串的结尾 + 右侧字符串的开头是否不等于“CaptainPlanet”的总长度。如果您有非常大的字符串，这将允许您仅检查字符串的前 x 和最后 x 字符来计算开始/结束值。

此解决方案不考虑 ei air = "Cap" 、 earth ="tain" 和 fire="Planet" 等短字符串。在这种情况下，对于那些比“CaptainPlanet”长度短的令牌，您需要有一个特殊情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:48:09.857

如果删除多少个字符并不重要，您可以删除`'C'`所有字符串中的 fe all。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T12:58:34.917

原始答案清除了所有字符串，但正如 J.Steen 所指出的，已经有一个预期输出的公式。所以我们开始了。

1.  `elementString.Replace("Captain Planet", "")`在每个子字符串上运行。

2.  现在您必须在每个子字符串上识别“Captain Planet”的所有前缀/后缀，并保留该信息以便在合并之前对其进行处理。也就是说，例如，如果子字符串以“Capt”结尾，那么您应该有一个信息，即“子字符串末尾包含 'Captain Planet' 的 4 个首字母的前缀”。您还必须考虑完整子字符串的情况（例如，其中一个字符串是“ptain Pla”）。如果任何例如前缀可以递归或重复，问题也会变得更加复杂（例如，“CaptainCap”包含“CaptainCaptain”的两种有效前缀，并且“apt”可以在结果字符串的两个位置找到）；

3.  您在连接之前处理该信息，以便结果字符串与`ResultString.Replace("Captain Planet", "")`. 恭喜，您使程序变得比必要的复杂得多！

但简而言之，您*无法同时*获得所需的结果（除了组合结果输出之外的所有子字符串都完好无损）并在连接步骤之前完全进行处理。

# java - Apache POI 在没有 Microsoft Office 的情况下在 linux 中工作

> ID：14562190
> 
> 赞同：3
> 
> 时间：2013-01-28T12:36:06.193
> 
> 标签：java, linux, apache-poi

我已经在我的 linux 机器上下载了 Apache POI，我想编写创建 excel 文件并在其中存储数据的 java 程序。

我的问题是，我的机器没有微软办公包。

Apache POI 会在其中工作吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T12:40:38.433

是的，它会！

MS 的东西不是 POI 库的依赖项。否则，所有支持 Poi 的应用程序都必须部署到 Windows 机器上，真是一场噩梦！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:54:14.173

`Apache POI`使用类生成电子表格`HSSFWorkbook`，然后您可以将它们保存为 in`ODF`或`XLS`format。

```
File file = File.createTempFile(filename, ".XLS");

//Creating output stream to empty file
FileOutputStream fos =  new FileOutputStream(file);    

HSSFWorkbook workbook = new HSSFWorkbook();

HSSFSheet firstSheet = workbook.createSheet("Sheet 1");

HSSFRow row[] = new HSSFRow[size];

row[0] = createHeaderRow(firstSheet.createRow(0));

row[0].createCell(0).setCellValue("test value");

workbook.write(fos); 
```

# iphone - MVC - 视图或控制器中的按钮操作？

> ID：14562192
> 
> 赞同：1
> 
> 时间：2013-01-28T12:36:13.740
> 
> 标签：iphone, ios, model-view-controller, uiviewcontroller

使用 MVC。我有一个按钮。按钮绘图在视图中。按钮动作应该在控制器中，对吧？如何向按钮添加操作？从视图来看，不应该保留控制器（对于 MVC）的引用，然后是如何设置操作。按钮是否应该公开并由控制器访问？

或者，应该在控制器中绘制按钮。（不好）

或者，使用委托（但是 MVC 中的每个视图控制器对都必须有一个委托）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:51:20.173

**控制器应该可以访问按钮，以便它可以设置操作。**

例如，您可以像使用 UITableCells 一样进行操作 :) --> 您可以在视图上有一个属性按钮

但这是一个有争议的问题，也取决于个人品味

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:53:11.077

在控制器的标头中创建一个 IBAction：

```
-(IBAction)buttonPressed:(id)sender; 
```

现在在 Interface Builder 中将您的按钮连接到此操作（使用 CTRL 从按钮拖动到文件所有者）。

接下来在控制器的实现中，您可以编写在按下按钮时执行的代码`-(void)buttonPressed:(id)sender`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:53:54.557

也许您可以使按钮成为您视图的属性。或者您可以创建一个公开的视图方法，例如`-(void)setupButtonSelector:(SEL)selector`；选择器是您的按钮选择器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T13:39:19.377

知道了。必须设置 addTarget:nil。该操作将传递给链中的下一个响应者。在这种情况下，视图控制器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T13:25:02.083

在视图中使用的按钮上设置目标选择器。并使用选择器方法名称定义一个方法。

前任：

```
[button addTarget:self action:@selector(YourMethodName) forControlEvents:UIControlEventTouchUpInside]; // Declare this where you are adding button in view.

-(void)YourMethodName // Use this where you need to perform that button action.
{
   // Do what you need.
} 
```

如果您在运行时添加包含该按钮的视图。请尝试另一个技巧。添加按钮时为该按钮设置标签值。在您的控制器中，通过其标签值访问该按钮并在按钮上添加目标。

前任;

```
UIButton *btn = (UIButton*)[self.view viewWithTag:10];
    [btn addTarget:self action:@selector(methodName) forControlEvents:UIControlEventTouchUpInside]; 
```

# android - MAC FTP 客户端（在 /usr/bin 中）喜欢我写的 FTP 服务器，但 FTP 咖啡馆，android 应用程序，讨厌它

> ID：14562193
> 
> 赞同：0
> 
> 时间：2013-01-28T12:36:20.003
> 
> 标签：android, ftp

SYST 命令响应应该是什么？

作为对 SYST 命令的响应，我已发送消息“215 MACOS Mac OS X.\r\n”。但是FTP网吧不行。他向我发送消息“未知解析器类型：MACOS Mac OS X”。

我在我的代码中修改什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:54:06.810

尝试将第一个字段 (UNIX) 作为[保留名称官方列表中](https://www.rfc-editor.org/rfc/rfc943#page-26)`215 UNIX Type: L8`的知名名称。[FTP RFC](https://www.rfc-editor.org/rfc/rfc959#page-33)没有指定“Type:”字符串，但它似乎是其他 FTP 服务器发送的内容，因此遵循他们的示例是明智的（特别是如果您期望有古怪的客户端）。L8 指定服务器使用本地的 8 位格式。同样，我建议使用大多数 FTP 服务器所做的事情。

# r - 内部使用 strsplit 的用户定义函数的语法

> ID：14562195
> 
> 赞同：1
> 
> 时间：2013-01-28T12:36:50.047
> 
> 标签：r, syntax, user-defined-functions, strsplit

我正在编写一个实用函数来进行一些数据格式转换，但我无法正确说明它，以便它适用于我希望它适用的数据，并返回正确形状的结果。

我有一个名为 HiRawTiny 的测试数据集，下面展示了 str。V1中的数据是char。我有一个名为 GetRank 的测试函数，它的工作是将所有字符放在“：”右侧并将它们强制转换为数字。这也在下面得到证明。我在 fn 中用于获取 strsplit 输出的列表语法列表对我来说有点不透明，坦率地说，我是通过反复试验得出的，但在传递单个值时它似乎工作正常。但是当我向它传递一个向量（一个数据框列）时，它并没有给我一个与我传递给它的向量长度相同的向量结果，而只是一个值。

我应该怎么做才能解决这个问题？我是 R 新手（尽管我在几十年前曾经使用过 S），并且怀疑我陷入了语法混乱。鉴于我正在尝试做的事情，我的函数语法是否错误？我应该考虑使用“应用”或其朋友之一来做到这一点吗？或者 fn 是否应该能够本地处理矢量输入/矢量输出？

```
str(HiRawTiny)

>'data.frame':  10 obs. of  7 variables:  
>$ V1: chr  "RANK:1" "RANK:2" "RANK:3" "RANK:4" ...  
$ V2: chr 
> "SOURCEID:CWC02001632398F4C" "SOURCEID:CWC020000F0D57DD6"
> "SOURCEID:CWC0200214C29872E" "SOURCEID:CWC0200163206B9F2" ...  
$ V3:
> chr  "TIME:01:04:2012-22:23:58" "TIME:01:04:2012-12:07:55"
> "TIME:01:04:2012-12:39:51" "TIME:02:04:2012-07:18:25" ...  
$ V4: chr 
> "SCORE:3142" "SCORE:3040" "SCORE:2911" "SCORE:2882" ...  
$ V5: chr 
> "TIEBREAK:4923864" "TIEBREAK:5787094" "TIEBREAK:766764"
> "TIEBREAK:1872936" ...  
$ V6: chr  "" "" "" "" ...  
$ V7: chr  "" ""
> "" "" ...

 GetRank function(x) {as.numeric(strsplit(x, split=":")[[1]][2]) }

GetRank(HiRawTiny[1,1]) [1] 1
GetRank(HiRawTiny[2,1]) [1] 2
GetRank(HiRawTiny[,1]) [1] 1

#"What I want is a vector of GetRank being applied to all of column 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T12:48:10.603

`strsplit`返回一个`list`. 的每个元素都`list`包含分割后的字符串。您可以将 更改`list`为`matrix`with`do.call`然后`rbind`选择第二列，

```
GetRank <- function(x) {as.numeric(do.call(rbind, strsplit(x, split=":"))[, 2]) }

GetRank(HiRawTiny$V1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T13:17:52.963

只是另一种方式（使用@Stephan's `foo`）：

```
# split by strsplit, results in a list with the 2nd element of 
# each element of the list always being the number you want.
# so pick it up using sapply with "[[" and convert it to numeric
> as.numeric(sapply(strsplit(foo, ":"), "[[", 2)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T12:42:10.417

您将需要`unlist`结果，`strsplit`然后提取您感兴趣的那些条目。

```
foo <- paste("RANK:",1:10,sep="")
GetRank <- function(x) {
  as.numeric(unlist(strsplit(x,":"))[seq(2,2*length(x),by=2)])
}
GetRank(foo) 
```

尝试将数据逐位输入函数并跟踪每个连续步骤中发生的情况。

# joomla - 谷歌索引如何工作？

> ID：14562198
> 
> 赞同：-1
> 
> 时间：2013-01-28T12:37:01.017
> 
> 标签：joomla, sitemap, google-index

我最近在网上上传了一个 joomla 网站。我使用了谷歌网站管理员并上传了站点地图，这是我使用 joomla 的 xmap 组件制作的。这发生在大约 4 天前，现在我在网站管理员中得到了 Submitted: 12 Indexed: 11。

我在谷歌搜索发现的是，如果我复制并粘贴我的网站（或子菜单项）的 url，它将被找到。但是使用关键字，甚至复制和粘贴标题，根本找不到我的网站。我读到了在网络上爬行的谷歌蜘蛛，但我不确定我是否明白：

*   是不是需要时间来更新我在谷歌数据库中的网站内容？

*   我可以做些别的事情来提供一些关键字或内容吗（我在某处读到“robots.txt 文件”，但我认为这再次提供了指向站点地图的链接）？

任何有关这方面的信息将不胜感激。先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:43:07.187

这有一个过程，机器人与此有关。

希望这篇文章能帮助你进一步理解：

[谷歌索引](http://www.googleguide.com/google_works.html)，

[阅读更多](http://chillfire.blogspot.com/2009/10/google-indexing-and-how-i-think-it.html)

![在此处输入图像描述](../Images/15c82057abb9f585d23e912929716809.png)

> Google 不保证我们会抓取您的所有网址或将其编入索引。但是，我们会使用您站点地图中的数据来了解您网站的结构，这将使我们能够改进我们的爬虫计划并在未来更好地抓取您的网站。在大多数情况下，网站管理员将从提交站点地图中受益，并且在任何情况下您都不会因此受到处罚

# ios - 为什么我的 iOS 独立网络应用程序不从服务器重新检索缓存的图像？

> ID：14562204
> 
> 赞同：2
> 
> 时间：2013-01-28T12:37:24.903
> 
> 标签：ios, web, offline-caching, cache-manifest, iphone-standalone-web-app

我创建了一个单页网站，旨在安装在 iOS 主屏幕上并作为独立的 Web 应用程序访问。它是单个页面，并且 cache.manifest 确保相关资产被离线缓存。

在经历了很多起起落落之后，现在整个事情似乎都可以在线和离线工作。然而，有一个问题让我感到困惑。仅当我从主屏幕启动页面时**，即使存在连接，也不会从 Web 检索到一些未缓存的资产**。我有这些资产的离线回退，但我只希望在没有可用连接时启动回退。

我的 cache.manifest 看起来像这样：

```
CACHE MANIFEST
# 2013-01-28:v2

# Explicitly cached 'master entries'.
CACHE:
gfx/logo.png
styles/default.css
scripts/default.js
(...lots of other assets...)
gfx/slide.jpg

# Resources that require the user to be online.
NETWORK:
*

# Fallback when offline.
FALLBACK:
content/slides/ gfx/slide.jpg 
```

目录中的图像`content/slides/`不会被缓存。如果没有连接，我希望将每个图像替换`gfx/slide.jpg`为缓存的图像，这可以工作。当有连接时，我希望该`NETWORK: *`指令将确保从 web 检索 content/slides/ 目录中的图像，但这不会发生。

我需要在清单文件中更改任何内容以指示内容/幻灯片中的图像应该在它们回退到使用 gfx/slide.jpg 之前从网络上检索吗？

即使稍后通过可用的互联网连接访问该页面，是否还有其他人遇到过陷入后备规则的情况？

# php - 跨域ajax调用+php

> ID：14562205
> 
> 赞同：0
> 
> 时间：2013-01-28T12:37:25.457
> 
> 标签：php, ajax

我想通过 jquery ajax 调用（跨域）从 web 服务获取数据。从 web 服务获取数据后，我需要使用 php 将其显示为数据表。任何人都可以帮助我解决这个问题，或者只是给我一些示例。

我的ajax函数如下：

```
$.ajax({
      type: "POST",

      url:"my webservice url",

      //data: json,
      //contentType: "application/json; charset=utf-8",
      crossDomain: true,
      dataType: 'json',
      async:false,

      success: function(data, textStatus, jqXHR)
          {
              alert("Download success");
              alert(data);
          },
          error : function(jqXHR, exception) 
          {
              alert(jqXHR.status);
          }
      }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:38:58.377

```
$.ajax({
   url:"yourPageName.php",
   dataType: 'jsonp', // N.B! JSONP   It is lower Case OK?
   success:function(json){
     // json (an  Array)
     alert("Success");
 },
 error:function(){
     alert("Error");
 }, 
```

});

欲了解更多信息，请访问这里[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:06:51.260

Jsonp 是更好的方法。但是如果你真的用 json 你可以添加

```
header("Access-Control-Allow-Origin: *"); 
```

到你的 php 代码。这样，您的服务器将响应任何请求和域。您可以自定义“*”以接受域。 **但请注意，这会导致安全问题。**

# c# - SQL 命令未按预期执行

> ID：14562206
> 
> 赞同：1
> 
> 时间：2013-01-28T12:37:30.143
> 
> 标签：c#, sql

这段代码有什么问题？我想从 SQL 行中捕获最后一个值并将其显示在`TextBox`. 请帮助我。

```
private void textBox2_Leave(object sender, EventArgs e)
{
    cmd.Connection = cn;
    cmd.CommandType = CommandType.Text;
    cmd.CommandText = "select last(remain) from item_new_customer where cust=" + textBox2.Text + "";
    float h = (float)cmd.ExecuteScalar();
    textBox20.Text = h.ToString();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:39:36.520

```
cmd.CommandText = "select max(remain) from item_new_customer where cust='" + textBox2.Text + "'"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T12:45:42.957

您对 SQL 注入开放，使用参数来避免它。

为了回答你的实际问题，我假设你想要这个专栏：`remain`。但是您想要最后插入的记录的值。由于您没有提到检测插入顺序的列，因此我使用主键列（不推荐）：

```
string sql = "SELECT TOP 1 remain FROM dbo.tablename WHERE cust=@cust ORDER BY id DESC";
using(var con = new SqlConnection(connectionString))
using(var cmd = new SqlCommand(sql, con))
{
    cmd.Parameters.AddWithValue("@cust", textBox2.Text);
    con.Open();
    double h = (double)cmd.ExecuteScalar();
    textBox20.Text = h.ToString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T11:29:56.540

非常感谢所有我最后的正确代码是：

```
cmd.Connection = cn;
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = "select top 1(remain) from item_new_customer where cust='"+textBox2.Text+"' order by id desc";
        int h = (int)cmd.ExecuteScalar();
        textBox20.Text = h.ToString(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T12:40:39.220

您在 : 之后缺少单引号`textBox2.Text`：

```
private void textBox2_Leave(object sender, EventArgs e)
{
    cmd.Connection = cn;
    cmd.CommandType = CommandType.Text;

    cmd.CommandText = 
   "select max(remain) from item_new_customer where cust=" + textBox2.Text + "'";
                                                          //Missing tick here ^ 
    float h = (float)cmd.ExecuteScalar();
    textBox20.Text = h.ToString();
} 
```

此外，您的代码是[SQL 注入](http://en.wikipedia.org/wiki/Sql_injection)的公开邀请。

# iphone - IOS事件机制

> ID：14562208
> 
> 赞同：1
> 
> 时间：2013-01-28T12:37:35.143
> 
> 标签：iphone, ios, events

我想使用事件在我的不同模块之间进行通信。IOS中有事件机制吗？我正在寻找类似于 Android 中的 BroadcastReceiver 的东西。

谢谢。铅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:43:21.873

### 同一进程中不同模块之间：

这里 NSNotification 很酷：http:
[//mobile.tutsplus.com/tutorials/iphone/ios-sdk_nsnotificationcenter/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_nsnotificationcenter/)

* * *

### 进程之间

IOS 不提供任何真正的专用方法来执行此操作。但是您可以（很多人）为此使用自定义 url 方案：http:
[//mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-working-with-url-schemes/)

# ms-access - 从 Access 导出到 Excel 到现有工作表

> ID：14562209
> 
> 赞同：1
> 
> 时间：2013-01-28T12:37:35.493
> 
> 标签：ms-access, vba

示例：我有 excel 文件 test.xls，其中有 sheet1、sheet2、sheet3、sheet4 和一些信息。我想将 4 个查询的结果导出到这些工作表，但我想在最后一行数据之后添加结果，而不是覆盖它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:33:53.257

我最近在做类似的事情。在 Excel 中，我使用了 VBA。

```
Dim cn As Object
Dim rs As Object
Dim strFile As String
Dim strCon As String
Dim strSQL As String
Dim s As String
Dim i As Integer, j As Integer
Dim StartDate As Date, EndDate As Date, ModStartDate As Date, ModEndDate As Date

'Modify the Start date because Maint 24hr cycle is 930 - 930 not 12 - 12
ModStartDate = StartDate - 1

''Access database
strFile = "S:\IT\Databases\Main_BE.mdb"

''This is the Jet 4 connection string, you can get more
''here : http://www.connectionstrings.com/excel
strCon = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & strFile & ";"

''Late binding, so no reference is needed
Set cn = CreateObject("ADODB.Connection")
Set rs = CreateObject("ADODB.Recordset")
cn.Open strCon

'Get the info from Access
strSQL = "SELECT * FROM Work_Orders " _
    & "WHERE Repair_Start_Date >= #" & ModStartDate & "# " _
    & "AND Repair_Start_Date <= #" & EndDate & "# " _
    & "ORDER BY Repair_Start_Date, Repair_Start_Time"
rs.Open strSQL, cn

'Paste the SQL query at A10 Sheet3
Sheet3.Cells(10, 1).CopyFromRecordset rs

''Tidy up
rs.Close
Set rs = Nothing
cn.Close
Set cn = Nothing 
```

您只需要修改 SQL 语句，然后添加一个新行，您可以使用一个变量来计算现有行数：

```
"=Counta(some range:some range)" 
```

然后只需将 1 添加到下一行的变量中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T05:45:23.857

谢谢大家！我可以使用以下方法解决它：

```
 Private Sub Command0_Click()
Dim rstName As Recordset
Set rstName = CurrentDb.OpenRecordset("query1")

Dim objApp As Object, objMyWorkbook As Object, objMySheet As Object, objMyRange As   Object

Set objApp = CreateObject("Excel.Application")
Set objMyWorkbook = objApp.Workbooks.Open("c:/exportarexcell/teste.xls")
Set objMySheet = objMyWorkbook.Worksheets("FolhaTeste")
Set objMyRange = objMySheet.Cells(objApp.ActiveSheet.UsedRange.Rows.Count + 1, 1)

With objMyRange
 rstName.MoveFirst 'Rewind to the first record
 .Clear
 .CopyFromRecordset rstName
End With
End Sub 
```

# mysql - Mysql-不允许插入重复的条目

> ID：14562215
> 
> 赞同：-2
> 
> 时间：2013-01-28T12:37:47.603
> 
> 标签：mysql

我有以下存储过程允许插入到数据库中。我想更改存储过程以便不输入重复条目。我想用于检查重复项的列是 Material_Name 和 Material_Data.how我应该改变SP吗？谁来帮帮我。

```
CREATE PROCEDURE `sp_upload_file`(IN Training_Id INT,IN filename VARCHAR(200), IN path VARCHAR(200),IN materialdata MEDIUMBLOB)
BEGIN
INSERT INTO `training_material`
    (`Training_Id`,
    `Material_Name`,
    `Material_Path`,
    `Material_Data`,
    `Created_Date`,
    `Modified_Date`)
 VALUES 
    (Training_Id,
    filename,
    path,
    materialdata,
    NOW()
    ,NOW());

END$$

DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:41:42.047

通过创建`UNIQUE` *约束*来改变表，

```
ALTER TABLE training_material
ADD CONSTRAINT trainmat_UQ UNIQUE(Material_Name, Material_Data) 
```

# android - android：检查和更改按钮的图像

> ID：14562219
> 
> 赞同：0
> 
> 时间：2013-01-28T12:37:52.623
> 
> 标签：android, image, android-layout

在我的应用程序中，我正在检查按钮的图像 1 秒。n 更改它。发生的是当它第一次检查 n 更改按钮的图像时。第二次它不更改图像。这是代码-

```
myTimer.schedule(new TimerTask() {      
        @Override
        public void run() {
            runOnUiThread(new Runnable() {
                public void run() {

                    Random rand=new Random();
                    int num = rand.nextInt(buttonIds.length);
                    int buttonId = buttonIds[num];
                    Button bb=(Button) findViewById(buttonId);

                    Drawable a=bb.getBackground();

                    if(getResources().getDrawable(R.drawable.happy).equals(a))
                    {
                    bb.setBackgroundResource(R.drawable.happy);
                    }
                    else
                     {
                    bb.setBackgroundResource(R.drawable.whoa);
                     }

                }
            });
        }

    },0, 1000); 
```

按钮的第一次图像是快乐的（图像文件的名称）。如何更改按钮的图像并检查？感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:44:23.623

我认为您的 if 条件不正确，您检查背景图像是否快乐，您再次设置快乐..而不是您应该设置哇...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:46:19.863

如果我是你，我会使用 boolean(isHappy) 来通知图片是否快乐，因为你不必实例化当前图像，所以它更容易和更快，也许它会解决你的问题，我不是完全确定“等于”是这样工作的，但这只是我的猜测。

无论如何，我认为您的代码有一个小错误，条件使图片总是很开心。

# django - Django-lean 未通过测试，两个/两个组中的用户都没有

> ID：14562220
> 
> 赞同：1
> 
> 时间：2013-01-28T12:37:56.607
> 
> 标签：django, django-lean

我正在尝试[django-lean](https://bitbucket.org/akoha)，但我的行为很奇怪，有时会显示测试或控制，但有时会同时显示或都不显示（对于相同的请求）。

我运行了测试，`./manage.py test experimets`两个测试失败了：

```
======================================================================
FAIL: testIntegrationWithAnonymousVisitor (experiments.tests.test_tags.ExperimentTagsTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/ubuntu/dev/skin/experiments/tests/test_tags.py", line 35, in testIntegrationWithAnonymousVisitor
    client_factory=lambda i: Client())
  File "/home/ubuntu/dev/skin/experiments/tests/test_tags.py", line 76, in doTestIntegration
    self.assertTrue(in_test != in_control)
AssertionError: False is not true

======================================================================
FAIL: testIntegrationWithRegisteredUser (experiments.tests.test_tags.ExperimentTagsTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/ubuntu/dev/skin/experiments/tests/test_tags.py", line 55, in testIntegrationWithRegisteredUser
    client_factory=create_registered_user_client)
  File "/home/ubuntu/dev/skin/experiments/tests/test_tags.py", line 76, in doTestIntegration
    self.assertTrue(in_test != in_control)
AssertionError: False is not true 
```

这到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-26T20:22:31.273

我自己也遇到了同样的问题。解决方案在文档中是正确的：

> 确保 django.core.context_processors.request`TEMPLATE_CONTEXT_PROCESSORS`在 settings.py

这应该在你的`settings.py`

```
TEMPLATE_CONTEXT_PROCESSORS = (
      "django.contrib.auth.context_processors.auth",
      "django.core.context_processors.debug",
      "django.core.context_processors.i18n",
      "django.core.context_processors.media",
      "django.core.context_processors.static",
      "django.core.context_processors.tz",
      "django.contrib.messages.context_processors.messages",
      "django.core.context_processors.request",
  ) 
```

# android - Java.IO.File 到 C# 中的 System.IO.Stream？

> ID：14562226
> 
> 赞同：1
> 
> 时间：2013-01-28T12:38:25.517
> 
> 标签：android, mono, xamarin.android

我正在尝试将部分用 Java (Android) 编写的代码移动到 C# (Mono for android)，但我一直在寻找一种方法来做到这一点。Java中的部分代码如下：

```
private Bitmap decodeFile(File f){
     try {
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f), null, o);
     ...
     } catch(FileNotFoundException ex){
     } 
```

确切地说，根据[DecodeStream](http://androidapi.xamarin.com/?link=T%3aAndroid.Graphics.BitmapFactory/M/DecodeStream)的第一个参数的要求从`Java.IO.File`to转换是我的问题。这个语句应该如何改写？`System.IO.Stream`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:25:30.773

我通常使用静态 System.File 方法来获取对应的 FileStream：

```
var stream = File.OpenRead("PathToFile") 
```

在您的情况下，您应该摆脱 java 中的“文件”类：文件是 .NET 中的静态类。您可以将路径直接（作为字符串）传递给您的 decodeFile 函数吗？

```
 private Bitmap decodeFile(string f){
 try {
    var o = new BitmapFactory.Options();
    o.inJustDecodeBounds = true;
    using (var stream = File.OpenRead(f)) {
      BitmapFactory.decodeStream(stream, null, o);
    ...
    }
 } catch(FileNotFoundException ex){
 } 
```

# php - Drupal 7.x：如何使用 PHP 输入格式创建新节点？

> ID：14562229
> 
> 赞同：0
> 
> 时间：2013-01-28T12:38:49.363
> 
> 标签：php, mysql, drupal

我想执行自定义 PHP 脚本，该脚本将删除特定类型的所有节点（Feed 项）。如何使用 PHP 输入格式创建一个新节点，以便我可以将代码粘贴到节点正文中？请指定详细步骤。

```
$node_type = 'Feed items';

  //fetch the nodes we want to delete
  $result = db_query("SELECT nid FROM {node} WHERE type='%s'",$node_type);
  while ($row = db_fetch_object($result)){
    node_delete($row->nid);
    $deleted_count+=1;
  }
  //simple debug message so we can see what had been deleted.
  drupal_set_message("$deleted_count nodes have been deleted"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:14:06.963

您想要实现的目标并不完全清楚。您是否只想执行该 PHP 代码一次？或者每当创建某种类型的节点时？

如果您只想执行一次 PHP 代码，您可以安装 devel 模块 ( [http://drupal.org/project/devel](http://drupal.org/project/devel) ) 并将您的代码粘贴到`<your_site_url>/devel/php`

- 编辑

另一种选择是创建一个引导 Drupal 并运行您的代码的 php 页面： [http ://www.avenuewebmedia.com/drupalbootstrap-connect-drupal-external-php-script](http://www.avenuewebmedia.com/drupalbootstrap-connect-drupal-external-php-script)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:55:46.880

好的，我自己管理如何做到这一点：我必须首先启用“PHP 过滤器”模块（在 Drupal 核心中，默认情况下禁用）。在管理 > 配置 > 内容创作 > 文本格式 > 添加文本格式，在“启用过滤器”中标记“PHP 评估器”，在角色中选择“管理员”，保存配置。然后我新建了一个节点（文章），将输入格式设置为PHP，将代码粘贴到节点正文中，添加标题并点击提交。代码已执行。当然，我们需要在完成后删除节点。

# wix - 将数据写入 MSI 数据库

> ID：14562231
> 
> 赞同：1
> 
> 时间：2013-01-28T12:38:55.333
> 
> 标签：wix, windows-installer, wix3.5, wix3.6, wixlib

我需要能够更新二进制表，我这样做：

```
View v = session.Database.OpenView("SELECT `Data` FROM `Binary` WHERE `Name` = '{0}'", binaryKeyName);

            v.Execute();

            var IsReadOnly = session.Database.IsReadOnly;

            Record r = v.Fetch();

            StreamReader reader = new StreamReader(r.GetStream("Data"));
            string text = reader.ReadToEnd();
            text = text.Replace(@"Test12345", "TTTest");

            byte[] byteArray = Encoding.ASCII.GetBytes(text);
            MemoryStream stream = new MemoryStream(byteArray); 
```

一旦我有了流，我想更新数据库表。我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:47:53.997

WiX 附带的`dtf.chm`文档包含以下有关如何更新二进制表的示例：

```
Database db = null;
View view = null;
Record rec = null;
try
{
    db = new Database("product.msi", DatabaseOpenMode.Direct);
    view = db.OpenView("UPDATE `Binary` SET `Data` = ? WHERE `Name` = '{0}'", binName))
    rec = new Record(1);
    rec.SetStream(1, binFile);
    view.Execute(rec);
    db.Commit();
}
finally
{
    if (rec != null) rec.Close();
    if (view != null) view.Close();
    if (db != null) db.Close();
} 
```

# java - Android中的自定义DialogPreference

> ID：14562232
> 
> 赞同：0
> 
> 时间：2013-01-28T12:39:04.863
> 
> 标签：java, android

在我的项目中，我正在使用`SeekBarPreference`. 我参考[http://android.hlidskialf.com/blog/code/android-seekbar-preference](http://android.hlidskialf.com/blog/code/android-seekbar-preference)代码完美无误，但是当我在其他活动中获取共享偏好值时。然后我总是发现0为什么？我使用以下代码获取共享偏好值：-

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
 String str=Integer.toString( prefs.getInt("duration", 0)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:07:50.157

使用共享首选项代码获取并输入以下值：

将值放入 sharedpreferences 的代码：

```
public static final String PREFS_NAME = "Prefs";
SharedPreferences settings = getSharedPreferences(PREFS_NAME, MODE_WORLD_READABLE);
SharedPreferences.Editor editor = settings.edit();  
editor.putInt("no", 11);
editor.commit(); 
```

从 sharedpreferences 中获取值的代码：

```
 SharedPreferences settings = getSharedPreferences(PREFS_NAME, MODE_WORLD_READABLE);   

    String in=Integer.toString(settings.getInt("no", 0)); 
```

# php - php chmod 父目录影响

> ID：14562235
> 
> 赞同：1
> 
> 时间：2013-01-28T12:39:07.017
> 
> 标签：php, chmod

问题：如果父文件夹对每个人（755、753 等）的权限低于 777，这会对放置更深的文件夹有影响吗？

例子：

我有三个文件夹（一个在另一个），比​​方说：“f1/f2/f3” 在文件夹“f2”中我有“script.php”文件，它试图将“f3”文件夹从 755 设置为 777 权限：

```
<?
chmod("/f3",0777);
?> 
```

“f1”和“f3”是 755，“f2”和“script.php”是 777。

我从浏览器运行 script.php，但它不起作用。

# asp.net-mvc-3 - jqGrid：没有这样的方法：resetSelection

> ID：14562240
> 
> 赞同：0
> 
> 时间：2013-01-28T12:39:19.880
> 
> 标签：asp.net-mvc-3, jqgrid, lib.web.mvc

我正在为 jqGrid 使用强类型帮助器 - [Lib.Web.Mvc](https://github.com/tpeczek/Lib.Web.Mvc)

我不能强制 jqGrid 对我的数据进行排序。当我单击标题中的箭头时，我在 Firebug 中收到以下错误：

> 未捕获的异常：jqGrid - 没有这样的方法：resetSelection

当我点击行中的单元格时，我得到：

> 未捕获的异常：jqGrid - 没有这样的方法：setSelection

这是我的 js 代码：

```
@{
      var grid = new Lib.Web.Mvc.JQuery.JqGrid.JqGridHelper<ViolationViewModel>("products",
      dataType: Lib.Web.Mvc.JQuery.JqGrid.JqGridDataTypes.Json,
      methodType: Lib.Web.Mvc.JQuery.JqGrid.JqGridMethodTypes.Post,
      pager: true,
      rowsNumber: 5,
      sortingName: "Id",
      sortingOrder: Lib.Web.Mvc.JQuery.JqGrid.JqGridSortingOrders.Asc,
      url: Url.Action("Violation", "Cabinet"),
      viewRecords: true,
      rowsList: new List<int>() { 5, 10, 20, 30, 50, 100 },
      autoWidth: true,
      loadOnce: true,
      rowsNumbers: true
    );
} 
```

我正在使用`loadOnce`选项。

这段代码在行动：

```
 [AcceptVerbs(HttpVerbs.Post)]
        public ActionResult Violation(JqGridRequest request)
        {
            JqGridResponse response = new JqGridResponse()
                {
                    TotalRecordsCount = 7
                };
            response.Records.Add(new JqGridRecord<ViolationViewModel>("1", new ViolationViewModel
                {
                    Id = 1,
                    Name = "Test1"
                }));

            response.Records.Add(new JqGridRecord<ViolationViewModel>("2", new ViolationViewModel
            {
                Id = 2,
                Name = "Test2"
            }));

            response.Records.Add(new JqGridRecord<ViolationViewModel>("3", new ViolationViewModel
            {
                Id = 3,
                Name = "Test3"
            }));

            response.Records.Add(new JqGridRecord<ViolationViewModel>("4", new ViolationViewModel
            {
                Id = 4,
                Name = "Test4"
            }));

            response.Records.Add(new JqGridRecord<ViolationViewModel>("5", new ViolationViewModel
            {
                Id = 5,
                Name = "Test5"
            }));

            response.Records.Add(new JqGridRecord<ViolationViewModel>("6", new ViolationViewModel
            {
                Id = 6,
                Name = "Test6"
            }));

            response.Records.Add(new JqGridRecord<ViolationViewModel>("7", new ViolationViewModel
            {
                Id = 7,
                Name = "Test7"
            }));

            return new JqGridJsonResult() { Data = response };
        } 
```

# asp.net - 如何使用 ReportViewer 创建报表？

> ID：14562241
> 
> 赞同：1
> 
> 时间：2013-01-28T12:39:22.760
> 
> 标签：asp.net, visual-studio-2010, reportviewer

我现在需要做一个`report`。我在这里找到了一些线程，但它只是展示了如何实现一些reportviewer的功能，我需要`create one`从一开始就知道如何......它与在WindowsForm上创建一个真正不同;\

任何帮助或提示？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:51:20.857

最近刚做了。有很多手册，比如这个[MSDN Walkthrough: Creating a ReportViewer Report](http://msdn.microsoft.com/en-us/library/ms252073%28v=vs.80%29.aspx)或者这个

[使用 Visual Studio 2010 创建 ASP.NET 报告 - 第 1 部分](http://weblogs.asp.net/rajbk/archive/2010/05/09/creating-an-asp-net-report-using-visual-studio-2010-part-1.aspx)

[使用 Visual Studio 2010 创建 ASP.NET 报告 - 第 2 部分](http://weblogs.asp.net/rajbk/archive/2010/05/09/creating-a-asp-net-report-using-visual-studio-2010-part-2.aspx)

[使用 Visual Studio 2010 创建 ASP.NET 报告 - 第 3 部分](http://weblogs.asp.net/rajbk/archive/2010/05/09/creating-a-asp-net-interactive-report-using-visual-studio-2010-part-3.aspx)

# php - 将 Ajax 中的变量发布到 PHP 页面并没有得到响应

> ID：14562245
> 
> 赞同：-2
> 
> 时间：2013-01-28T12:39:49.283
> 
> 标签：php, ajax

我正在使用 ajax 将数据发布到 php 页面，但没有返回响应。

```
$('#card_list select').live('change', function() {
    var productID = $(this).attr('value');
    var divID = $(this).attr('id');
    $.ajax({
            type: "POST",
            url: "inc/change_thumbnail.php",
            data: "products_id="+productID,
            cache: false,
            success: function (response) {
                alert(productID);
                alert(divID);
                $("#"+divID).attr("src", response);
            },
            error: function (err) {
                alert('Sorry, no thumbnail for product');
            }
        });
}) 
```

在php页面上如下

```
<?php
$products_id = $_GET["products_id"];
echo "img/products/thumb/".$products_id.".jpg";
?> 
```

它应该交换产品缩略图。但是 $product_id 变量没有被拾取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:43:30.080

看起来您正在使用 POST 发送数据并尝试使用 GET 在 PHP 页面上获取它。

更改 $products_id = $_GET["products_id"]; 到 $products_id = $_POST["products_id"];

会是一个好的开始。

# mysql - MySQL 查询在 windows 和 unix 上返回不同的结果

> ID：14562250
> 
> 赞同：0
> 
> 时间：2013-01-28T12:40:03.093
> 
> 标签：mysql

我有两张表，temp_students 和exam_verify。temp_students 包含学生的 surname、othername 和exam_number，而exam_verify 包含一个列，该列是以前参加过考试的考生的surname、othername 和exam_number（替换所有空字符串）的串联。我正在尝试获取那些姓氏、其他名字和考试编号在exam_verify 中精确的准学生。

这是我的查询：

```
SELECT d.surname,d.othernames,d.exam_number FROM temp_students d 
WHERE UPPER(REPLACE(CONCAT(d.surname,d.othernames,d.exam_number),' ','')) NOT IN 
(SELECT s.exact_search_code FROM exam_verify s); 
```

但是当我在windows机器上的mysql（相同版本）上运行它时，它可以工作，但是当我在solaris上的mysql上的相同数据集上运行它时，我得到相反的结果。

有什么问题？

# aptana3 - osx上的aptana全屏和转义键

> ID：14562252
> 
> 赞同：1
> 
> 时间：2013-01-28T12:40:11.893
> 
> 标签：aptana3

我通常将我的 Aptana（Aptana Studio 3，内部版本：3.3.1.201212171919）窗口在 OSX 上全屏显示。一个非常烦人的功能是，一旦你点击逃生，它就会离开全屏。我经常不经意地使用这个键。我拥有全屏的其他应用程序似乎都没有这样的行为（eclipse、iterm、chrome）。

我搜索了一下，发现 aptana 中有一个叫做 ToggleFullScreenEscapeHandler 的东西，看起来它的设计目的是在这里做错事。

我检查了关键首选项，没有任何与全屏有关的选项，而退出按钮实际上是为了隐藏查找屏幕。

那么如何关闭这个东西呢？

就个人而言，我认为让任何应用程序全局函数绑定到完全转义是有点奇怪，因为它以特定于上下文的方式使用它的频率。

# android - Android相机预览人像比例

> ID：14562255
> 
> 赞同：3
> 
> 时间：2013-01-28T12:40:17.017
> 
> 标签：android, camera, surfaceview

请帮助正确配置 Android 相机（在 HTC Desire 2.3.3 上测试）以在旋转（人像）模式下从相机预览。预览必须占不到一半的屏幕，宽度必须等于设备宽度，并且比例必须根据相机纵横比动态设置。我当前的代码：

```
public class CameraSurface extends SurfaceView implements SurfaceHolder.Callback {
…
public void surfaceCreated(SurfaceHolder holder) {
try {
    if (camera != null) {
                try {
                    camera.stopPreview();
                } catch (Exception ignore) {
                }
                try {
                    camera.release();
                } catch (Exception ignore) {
                }
                camera = null;
            }

            camera = Camera.open();             
            camera.setPreviewDisplay(holder);
        } catch (Exception ex) {
            try {
                if (camera != null) {
                    try {
                        camera.stopPreview();
                    } catch (Exception ignore) {
                    }
                    try {
                        camera.release();
                    } catch (Exception ignore) {
                    }
                    camera = null;
                }
            } catch (Exception ignore) {    
            }
        }
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        try {
            if (camera != null) {
                try {
                    camera.stopPreview();
                } catch (Exception ignore) {
                }
                try {
                    camera.release();
                } catch (Exception ignore) {
                }
                camera = null;
            }
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        try {
            Camera.Parameters parameters = camera.getParameters();
            float bff = 0;
            try {
                List<Camera.Size> supportedSizes = null;

                //maximize supported resizes, TODO remove as hardcode
                w*=1.5;
                h*=1.5;

                // On older devices (<1.6) the following will fail
                // the camera will work nevertheless
                supportedSizes = Compatibility.getSupportedPreviewSizes(parameters);

                // preview form factor
                float ff = (float) w / h;
                Log.d("TAG", "Screen res: w:" + w + " h:" + h
                        + " aspect ratio:" + ff);

                // holder for the best form factor and size                 
                int bestw = 0;
                int besth = 0;
                Iterator<Camera.Size> itr = supportedSizes.iterator();

                // we look for the best preview size, it has to be the closest
                // to the
                // screen form factor

                while (itr.hasNext()) {
                    Camera.Size element = itr.next();
                    // current form factor
                    float cff = (float) element.width / element.height;
                    // check if the current element is a candidate to replace
                    // the best match so far
                    // current form factor should be closer to the bff
                    // preview width should be less than screen width
                    // preview width should be more than current bestw
                    // this combination will ensure that the highest resolution
                    // will win
                    Log.d("TAG", "Candidate camera element: w:"
                            + element.width + " h:" + element.height
                            + " aspect ratio:" + cff);
                    if ((ff - cff <= ff - bff) && (element.width <= w)
                            && (element.width >= bestw)) {
                        bff = cff;
                        bestw = element.width;
                        besth = element.height;
                    }
                }
                Log.d("TAG", "Chosen camera element: w:" + bestw + " h:"
                        + besth + " aspect ratio:" + bff);
                // Some Samsung phones will end up with bestw and besth = 0
                // because their minimum preview size is bigger then the screen
                // size.
                // In this case, we use the default values: 480x320
                if ((bestw == 0) || (besth == 0)) {
                    Log.d("Mixare", "Using default camera parameters!");
                    bestw = 480;
                    besth = 320;
                }               
                parameters.setPreviewSize(bestw,besth);
            } catch (Exception ex) {
                parameters.setPreviewSize(480,320);

                bff=1.5f;
            }
            makeResizeForCameraAspect(bff);                     
            camera.setDisplayOrientation(90);//only Android 2.2 and later
            camera.setParameters(parameters);               
            camera.startPreview();
        } catch (Exception ex) {
            Log.e(TAG,"",ex);
        }
    }

    private void makeResizeForCameraAspect(float cameraAspectRatio){
        LayoutParams layoutParams=this.getLayoutParams();
        int matchParentWidth=this.getWidth();           
        int newHeight=(int)(matchParentWidth/cameraAspectRatio);
        if(newHeight!=layoutParams.height){
            layoutParams.height=newHeight;
            layoutParams.width=matchParentWidth;    
            this.setLayoutParams(layoutParams);
            this.invalidate();
        }
    }
} 
```

活动布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >  
    <org.mixare.CameraSurface
        android:id="@+id/camera_surface"
        android:layout_width="match_parent"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"

         />
    <!--CameraSurface layout_height will be changed during it's loading process -->
</RelativeLayout> 
```

AndroidManifest 配置为纵向：

```
 <activity android:label="@string/app_name" android:name=".MixView" 
    android:screenOrientation="portrait"  
    android:launchMode="singleTop" > 
```

实际图片：

![在此处输入图像描述](../Images/0012a45bb7af70af90b5ca917bc65ab3.png) - 设备旋转肖像

![在此处输入图像描述](../Images/be1e2dcea0d9a693c8cd5208ce628160.png) - 设备旋转景观

在相同的主题中发现：[Android - Camera preview is sideways](https://stackoverflow.com/questions/3841122/android-camera-preview-is-sideways)，[Android camera rotate](https://stackoverflow.com/questions/5309029/android-camera-rotate)，但我的代码得到了相同的结果

在这里你可以看到图像的错误比例。如何以适当的比例显示旋转和缩放的相机预览？

部分代码取自 Mixare 开源项目，[http://www.mixare.org/](http://www.mixare.org/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-17T12:18:46.027

我知道我回答这个问题为时已晚，但是可以通过将相机的显示方向设置为 90 度来解决这个问题，即`camera.open()`在类`SurfaceCreated`方法之后添加以下行`CameraSurface`

`camera.setDisplayOrientation(90);`

希望这可以帮助其他有同样问题的人。

# r - for 循环遍历数据框列表并将结果保存在新数据框中

> ID：14562257
> 
> 赞同：3
> 
> 时间：2013-01-28T12:40:21.657
> 
> 标签：r

我想从数据框列表中获取一些值并将结果保存在新的数据框中。这就是我的代码的样子：

```
for (i in 1:length(covpatient)){

    a <- names(covpatient[i])
    b <- sum(covpatient[[i]]$cov == 0)
    c <- sum(covpatient[[i]]$cov > 0 & covpatient[[i]]$cov <= 40)
    d <- sum(covpatient[[i]]$cov > 40 & covpatient[[i]]$cov <= 100)
    e <- sum(covpatient[[i]]$cov > 100)
    summary <- c(a,b,c,d,e) 
```

}

因此，对于列表 covpatient 中的每个数据框，我想创建一个包含 5 个元素（a、b、c、d、e）的汇总变量。然后我想创建一个新的 data.frame 来存储所有汇总值（5 列和 i 行）。

有人可以帮我一把吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T12:43:54.453

一种方法是使用`lapply`with`rbind`然后调用`as.data.frame`. 由于没有数据可玩，我会给出大致的想法。

```
o <- lapply(1:length(covpatient), function(i) {
    a <- names(covpatient[i])
    b <- sum(covpatient[[i]]$cov == 0)
    c <- sum(covpatient[[i]]$cov > 0 & covpatient[[i]]$cov <= 40)
    d <- sum(covpatient[[i]]$cov > 40 & covpatient[[i]]$cov <= 100)
    e <- sum(covpatient[[i]]$cov > 100)
    c(a,b,c,d,e)
})
out <- as.data.frame(do.call(rbind, o)) 
```

# java - FileNotFoundException 在 android 4.0.4 中解析 json 但适用于 android 2.3.3

> ID：14562258
> 
> 赞同：1
> 
> 时间：2013-01-28T12:40:37.767
> 
> 标签：java, android, http

我正在尝试访问显示我的 android 应用程序内容的 json。FileNotFound 异常在 Android 4.0.4 中抛出，但 json 可以在 Android 2.3.3 中访问。也可以使用相同的 url 从浏览器访问 json。代码有什么问题？任何人都可以帮助我解决这个问题。

我正在使用下面的代码：

```
url = new URL("http://www.dynamiskdesign.se/ipromotionnew/json/148.json");

HttpURLConnection httpURLConnection = (HttpURLConnection) url.openConnection();
httpURLConnection.setRequestMethod("GET");
httpURLConnection.setDoOutput(true);
httpURLConnection.connect();

InputStream input = httpURLConnection.getInputStream();

if (input != null) {
    writer = new StringWriter();
    char[] buffer = new char[1024];
    Reader reader = new BufferedReader(new InputStreamReader(input, "UTF-8"));
    int n;
    while ((n = reader.read(buffer)) != -1) {
        writer.write(buffer, 0, n);
    }
    input.close();
}

String jsontext = writer.toString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:42:52.280

这是因为网络和线程的结合。
该页面上也有说明（链接）。我也有这个，看看这个答案： [httpclient (phpmyadmin) not working on Android 4.0+](https://stackoverflow.com/questions/13342638/httpclient-phpmyadmin-not-working-on-android-4-0)

我认为这个解决方案可以工作：

```
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.AsyncTask;
import android.util.Log;
import android.widget.TextView;
//  
public class Connector extends AsyncTask<TextView, Void, String> {

    @Override
    protected String doInBackground(TextView... params) {
        // TODO Auto-generated method stub
        return GetSomething();
    }

    private final String getSomething() {   
         try{
                url=new URL("http://www.dynamiskdesign.se/ipromotionnew/json/148.json");
                HttpURLConnection httpURLConnection=(HttpURLConnection)url.openConnection();
                httpURLConnection.setRequestMethod("GET");
                httpURLConnection.setDoOutput(true);
                httpURLConnection.connect();
                InputStream input=httpURLConnection.getInputStream();

        } catch(Exception e) {
                Log.e("log_tag", "Error in http connection " + e.toString());
        }

        //convert response to string
        try{
                if (input != null) 
                {
                    writer = new StringWriter();
                    char[] buffer = new char[1024];
                    Reader reader = new BufferedReader(new InputStreamReader(input, "UTF-8"));
                    int n;
                    while ((n = reader.read(buffer)) != -1) {
                        writer.write(buffer, 0, n);
                    }
                    input.close();
                }

        } catch(Exception e) {
                Log.e("log_tag", "Error converting result "+e.toString());
        }
        //parse json data
        try {
                String jsontext = writer.toString();

        } catch(JSONException e) {
                Log.e("log_tag", "Error parsing data "+e.toString());
        }
        return returnString; 
    }    

    protected void onPostExecute(String page) {   
        //onPostExecute
    }   
} 
```

# c# - C# 通过从 Console.ReadLine 返回的字符串引用属性

> ID：14562262
> 
> 赞同：1
> 
> 时间：2013-01-28T12:40:47.767
> 
> 标签：c#, string, properties

我是 C# 的新手，并且随着我的前进而慢慢学习。在控制台应用程序中，我希望能够输入要显示的属性的名称。我偶然发现的问题是 ReadLine 将返回一个字符串，我不知道如何将该字符串转换为对实际属性的引用。

我写了一个简单的例子来解释我想要做什么。该示例现在将只输入它获得两次的任何输入。

我已经尝试过`typeof(Person).GetProperty(property).GetValue().ToString()`，但我得到的只是一条错误消息，指出 GetValue 没有采用 0 个参数的重载。

谢谢里卡德

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Reflection;

namespace AskingForHelp1
{
    class Program
    {
        static void Main(string[] args)
        {
            Person p = new Person();
            p.FirstName = "Mike";
            p.LastName = "Smith";
            p.Age = 33;

            p.displayInfo(Console.ReadLine());
        }
    }

    class Person
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public UInt16 Age { get; set; }

        public Person()
        {
            FirstName = "";
            LastName = "";
            Age = 0;
        }

        public void displayInfo(string property)
        {
            Console.WriteLine(property + ": " + property);
            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:45:45.540

你应该像这样使用 smth：

```
public static object GetPropValue( object src, string propName )
 {
    return src.GetType( ).GetProperty( propName ).GetValue( src, null );
 } 
```

第二个参数是索引： index 类型：System.Object[] 索引属性的可选索引值。对于非索引属性，此值应为 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:44:08.610

`GetValue`需要你的类的一个*实例*才能真正*从*. 像这样：

```
typeof(Person).GetProperty(property).GetValue(this).ToString()
// to be used in a non-static method of Person 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:45:23.250

您需要为 GetValue 函数提供包含该属性的对象的引用。

你需要改变你的 displayInfo 功能：

`public void displayInfo(string property, Person p)`

然后在这个函数中你可以调用 GetValue 函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T13:10:44.397

这将为您提供您正在寻找的东西。

```
 static void Main(string[] args)
    {
            Person p = new Person();
            p.FirstName = "Mike";
            p.LastName = "Smith";
            p.Age = 33;
            Console.WriteLine("List of properties in the Person class");
            foreach (var pInfo in typeof (Person).GetProperties())
            {
                Console.WriteLine("\t"+ pInfo.Name);
            }
            Console.WriteLine("Type in name of property for which you want to get the value and press enter.");
            var property = Console.ReadLine();
            p.displayInfo(property);
    }

    class Person
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public UInt16 Age { get; set; }

        public Person()
        {
            FirstName = "";
            LastName = "";
            Age = 0;
        }

        public void displayInfo(string property)
        {
            // Note this will throw an exception if property is null 
            Console.WriteLine(property + ": " + this.GetType().GetProperty(property).GetValue(this, null));
            Console.ReadKey();
        }
    } 
```

# php - PHP 解析 html 并更改链接

> ID：14562264
> 
> 赞同：1
> 
> 时间：2013-01-28T12:40:53.110
> 
> 标签：php, html

我正在使用 PHP 创建一个代理服务器，我想知道是否可以将链接（相对和绝对）转换为绝对 URL，然后更改链接，以便它们转到我网站上的某个位置。很难解释，但这基本上是我想要的

```
<html>
<body>
 <a href='http://www.google.com'>This is a link</a><br><br>
 <a href='/index.php'>This is another</a><br>
 <form action='/act.php'>
   <input type='submit'>
 </form> 
```

我会使用哪个

```
file_get_contents("http://www.thiswebsite.com") 
```

预期的输出将是

```
 <html>
<body>
 <a href='proxy.php?url=http://www.google.com'>This is a link</a><br><br>
 <a href='proxy.php?url=http://www.thiswebsite.com/index.php'>This is another</a><br>
 <form action='proxy.php?url=http://www.thiswebsite.com/act.php'>
   <input type='submit'>
 </form> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:50:51.630

您可以尝试使用 PHP DOMDocument API。你会写这样的东西：

```
<?php
$document = file_get_contents("http://www.thiswebsite.com");
$doc = new DOMDocument();
$doc->loadHTML($document);

$xpath = new DOMXpath($doc);
$anchors = $xpath->query("//a[@href]");
foreach( $anchors as $anchor) {
    $href = $anchor->getAttribute("href");
    $your_site_prefix = "proxy.php?url=";
    $anchor->setAttribute("href", $your_site_prefix . $href);
}

echo $xpath->document->saveHTML();
?> 
```

# jsf - primefaces上传什么都不做

> ID：14562267
> 
> 赞同：1
> 
> 时间：2013-01-28T12:41:04.910
> 
> 标签：jsf, upload, primefaces

我现在正在尝试使用 primefaces 而不是自制的文件上传系统，我遇到的唯一问题是它似乎什么也没做，有什么想法吗？

我正在使用 glassfish，我添加了

commons-io-1.4.jar commons-fileupload-1.2.1/jar

到我在 netbeans 中的图书馆

这是我的 xhtml

```
<p:fileUpload fileUploadListener="#{fileUploadController.upload}"
                                  mode="advanced" 
                                  update="messages"
                                  sizeLimit="100000000" 
                                  allowTypes="/(\.|\/)(gif|jpe?g|png)$/"/>

                    <p:growl id="messages" showDetail="true"/> 
```

网页.xml,

```
 <filter>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
    <init-param>
        <param-name>thresholdSize</param-name>
        <param-value>51200</param-value>
    </init-param>
    <init-param>
        <param-name>uploadDirectory</param-name>
        <param-value>C:\Users\Richard\printing~subversion\fileupload\web\Uploaded</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

文件上传控制器.java

```
 @ManagedBean(name="fileUploadController")
public class FileUploadController {
   private String destination="C:/Users/Richard/printing~subversion/fileupload/web/Uploaded";

    public void upload(FileUploadEvent event) {  
        FacesMessage msg = new FacesMessage("Success! ", event.getFile().getFileName() + " is uploaded.");  
        FacesContext.getCurrentInstance().addMessage(null, msg);
        // Do what you want with the file        
        try {
            copyFile(event.getFile().getFileName(), event.getFile().getInputstream());
        } catch (IOException e) {
            e.printStackTrace();
        }

    }  

    public void copyFile(String fileName, InputStream in) {
           try {

                // write the inputStream to a FileOutputStream
                OutputStream out = new FileOutputStream(new File(destination + fileName));

                int read = 0;
                byte[] bytes = new byte[1024];

                while ((read = in.read(bytes)) != -1) {
                    out.write(bytes, 0, read);
                }

                in.close();
                out.flush();
                out.close();

                System.out.println("New file created!");
                } catch (IOException e) {
                System.out.println(e.getMessage());
                }
    }
} 
```

我也试过这个例子：[http ://e-blog-java.blogspot.co.uk/2010/04/ppr-multi-file-upload-with-primefaces.html](http://e-blog-java.blogspot.co.uk/2010/04/ppr-multi-file-upload-with-primefaces.html)

但问题是当我复制代码时我无法上传显示？

有人知道发生了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:22:29.867

您是否在项目中包含了必要的导入？如果我没记错的话，我曾经使用过 primefaces 上传，我需要为该上传内容包含一个特定的 Maven 依赖项。

快速谷歌后：

```
Commons IO
Commons File Upload 
```

或行家风格：

```
<dependency>
    <groupId>commons-io</groupId>
    <artifactId>commons-io</artifactId>
    <version>1.3.2</version>
</dependency>
<dependency>
    <groupId>commons-fileupload</groupId>
    <artifactId>commons-fileupload</artifactId>
    <version>1.2.1</version>
</dependency> 
```

结合上面的答案:)

```
fileUploadListener="#{uploaderBB.handleFileUpload}" 
```

资源： [资源](http://www.java-tutorial.ch/java-server-faces/file-upload-with-primefaces)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T14:58:02.537

好的解决了这个问题！，对于primefaces，您必须先放置过滤器，然后是您可能拥有的任何其他过滤器（我确实有一个来自先前文件上传的过滤器）所以现在我的web.xml看起来像：

```
<!-- <filter>
            <filter-name>Upload Filter</filter-name>
            <filter-class>richard.fileupload.UploadFilter</filter-class>
            <init-param>
                <param-name>sizeThreshold</param-name>
                <param-value>1024</param-value>
            </init-param>
        </filter>
        <filter-mapping>
            <filter-name>Upload Filter</filter-name>
            <url-pattern>/upload/*</url-pattern>
        </filter-mapping> -->
        <context-param>
            <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
            <param-value>server</param-value>
        </context-param>
        <filter>
            <filter-name>PrimeFaces FileUpload Filter</filter-name>
            <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
            <init-param>
                <param-name>thresholdSize</param-name>
                <param-value>20480</param-value>
            </init-param>
            <init-param>
                <param-name>uploadDirectory</param-name>
                <param-value>C:/Users/Richard/printing~subversion/fileupload/web/WEB-INF/uploaded</param-value>
            </init-param>
        </filter>
        <filter-mapping>
            <filter-name>PrimeFaces FileUpload Filter</filter-name>
            <servlet-name>Faces Servlet</servlet-name>
        </filter-mapping>
        <servlet>
            <servlet-name>Faces Servlet</servlet-name>
            <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        </servlet>
        <servlet-mapping>
            <servlet-name>Faces Servlet</servlet-name>
            <url-pattern>*.xhtml</url-pattern>
        </servlet-mapping>
        <welcome-file-list>
            <welcome-file>/GUI/index.xhtml</welcome-file>
        </welcome-file-list>
        <context-param>
            <param-name>javax.faces.PROJECT_STAGE</param-name>
            <param-value>Development</param-value>
        </context-param>
        <context-param>
            <param-name>facelets.LIBRARIES</param-name>
            <param-value>/WEB-INF/corejsf.taglib.xml</param-value>
        </context-param>
        <context-param>
            <param-name>javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL</param-name>
            <param-value>true</param-value>
        </context-param> 
```

我唯一注意到的是现在它们作为 TMP 文件上传，我还可以使用这个文件，例如稍后打印出来吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-09-18T16:31:36.690

**编辑**

这个问题是从 2013 年 1 月开始的，当时只有 PrimeFaces 3.5。对于 3.5，默认值为 commons-fileupload。所以对于 3.5，不需要下面的 context-param。

如果您使用 PrimeFaces 4 并遇到此问题：

PrimeFaces 4 的默认设置是“本机”。如果你想使用 commons-fileupload 你需要在你的`web.xml`：

```
<context-param>
    <param-name>primefaces.UPLOADER</param-name>
    <param-value>commons</param-value>
</context-param> 
```

使用 WebLogic，我使用的是默认值，但在尝试上传时，什么也没发生。没有错误。无论哪种方式，使用 Tomcat 都很好。我只用 Tomcat ant WebLogic 尝试过。

# c# - VS2010 中的单元测试

> ID：14562269
> 
> 赞同：5
> 
> 时间：2013-01-28T12:41:06.657
> 
> 标签：c#, unit-testing, mstest

我公司最近将我们的项目从VS2008升级到VS2010。一个值得关注的领域是我们的单元测试。在 VS 2008 中，大多数单元测试在 VS2008 中都有这段代码`public TestContext TestContext { get; set; }`，这没有问题，但是在 VS2010 中，我现在收到如下错误：

> 无法为 VisitorTestAdapterTest 类设置 TestContext 属性。错误：System.ArgumentException：“Microsoft.VisualStudio.TestTools.TestTypes.Unit.UnitTestAdapterContext”类型的对象无法转换为“Microsoft.VisualStudio.TestTools.UnitTesting.TestContext”类型

如果我只是将其注释掉，测试工作正常，但正在寻找造成这种情况的原因。有谁知道单元测试框架发生了什么变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T12:51:40.500

确保`TestContext`引用了正确的 -type。对于 VS2010，这是提到的`Microsoft.VisualStudio.TestTools.UnitTesting.TestContext`. 因此：

*   确保单元测试具有正确的`using`语句：

    ```
    using Microsoft.VisualStudio.TestTools.UnitTesting; 
    ```

*   确保您的测试项目引用了正确的库

*   如果您的测试不使用，`TestContext`您可以完全安全地删除它。

# draggable - 使 div 可拖动到新位置并停留在那里

> ID：14562273
> 
> 赞同：1
> 
> 时间：2013-01-28T12:41:24.220
> 
> 标签：draggable, kendo-ui

这是一个关于 Kendo UI 可拖动的新手问题。我试图查看他们的示例，但无法真正理解。

我想让一个 div 可拖动到另一个位置。设置时我可以拖动 div，但释放时它会消失，我希望它留在新位置。我已经尝试过了，但它不起作用。

```
$('.draggable').kendoDraggable({
    axis: "x",
    hint: Hint,
    dragstart: DragStart,
    drag: Drag,
    dragend: DragEnd
});

function Hint (element) {
    console.log("hint");
    return element;
}

function DragStart(){
    console.log("dragstart");
}

function Drag(){
    console.log("draging");
}

function DragEnd(event) { 
    console.log("dragend");
    console.log(event.x.location);
    $('.draggable').css({'left': event.x.location});
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T09:45:26.150

我想[这](https://stackoverflow.com/questions/14880790/kendo-ui-draggable-like-wndows-desktop)就是你想要的，我为它做了一个 Demo。

```
$('.draggable').kendoDraggable({
    hint     : function (original) {
        return original.clone().addClass("ob-clone");
    },
    dragstart: function (e) {
        $(e.target).addClass("ob-hide");
    }
});
$('body').kendoDropTarget({
    drop: function (e) {
        var pos = $(".ob-clone").offset();
        $(e.draggable.currentTarget)
                .removeClass("ob-hide")
                .offset(pos);
    }
})
```

```
.draggable {
    position: absolute;
    background: red;
    width: 100px;
    height: 100px;
    vertical-align: middle;
}

.ob-hide {
    display: none;
}

.ob-clone {
    background: #cccccc;
}
```

```
<link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.common.min.css" rel="stylesheet"/>
<link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.default.min.css" rel="stylesheet"/>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://cdn.kendostatic.com/2013.1.319/js/kendo.all.min.js"></script>

<div id="drop" style="position: absolute; width: 100%; height: 100%; border: 2px solid #000000">
    <div class="draggable">
        Drag 1
    </div>
    <div class="draggable">
        Drag 2
    </div>
</div>
```

jsFiddle：http: [//jsfiddle.net/Wayou/fjrcw/](http://jsfiddle.net/Wayou/fjrcw/)

# java - 无法使用 nio 将 BLOB 写入内存映射文件

> ID：14562276
> 
> 赞同：0
> 
> 时间：2013-01-28T12:41:31.680
> 
> 标签：java, jdbc, blob, memory-mapped-files

我想从 BLOB 字段中编写一个内存映射文件。该字段可以包含未压缩、gzip 或 bzip2 压缩数据。现在我已经使用以下代码读取 blob 并使用 FileOutputStream 写入文件，但我想让它更快。

```
private static void writeBLOB(
Statement myStatement,
String fileName
  ) throws SQLException, IOException {

// step 1: initialize the LOB column to set the LOB locator
myStatement.executeUpdate(
  "INSERT INTO EDR_RRP_INFO(file_name, DEC_EDR_INFO) " +
  "VALUES ('" + fileName + "', EMPTY_BLOB())"
);

// step 2: retrieve the row containing the LOB locator
ResultSet blobResultSet = myStatement.executeQuery(
  "SELECT DEC_EDR_INFO " +
  "FROM EDR_RRP_INFO " +
  "WHERE file_name = '" + fileName + "' " +
  "FOR UPDATE"
);
blobResultSet.next();

// step 3: create a LOB object and read the LOB locator
BLOB myBlob =
  ((OracleResultSet) blobResultSet).getBLOB("DEC_EDR_INFO");

// step 4: get the buffer size of the LOB from the LOB object
int bufferSize = myBlob.getBufferSize();

// step 5: create a buffer to hold a block of data from the file
byte [] byteBuffer = new byte[bufferSize];

// step 6: create a file object
File myFile = new File(fileName);

// step 7: create a file input stream object to read
// the file contents
FileInputStream myFileInputStream = new FileInputStream(myFile);

// step 8: create an input stream object and call the appropriate
// LOB object output stream function
OutputStream myOutputStream = 3myBlob.getBinaryOutputStream();

// step 9: while the end of the file has not been reached,
// read a block from the file into the buffer, and write the
// buffer contents to the LOB object via the output stream
int bytesRead;

while ((bytesRead = myFileInputStream.read(byteBuffer)) != -1) {

  // write the buffer contents to the output stream
  // using the write() method
  myOutputStream.write(byteBuffer);

} // end of while

// step 10: close the stream objects
myFileInputStream.close();
myOutputStream.close();

System.out.println("Wrote content from file " +
  fileName + " to BLOB");

 } // end of writeBLOB() 
```

任何人都可以帮助我吗？我尝试过不同的方法但失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:43:55.370

如果您根本不创建文件，您将获得最佳加速:-)

除此之外，为了获得良好的性能，`bufferSize`应该是 8 * 1024 或更大。您可以使用 NIO，但根据我的经验，它通常不会有太大帮助。

但是有一个错误：您的程序没有考虑到该`read`方法没有完全读取所有字节。您需要使用`myOutputStream.write(byteBuffer, 0, bytesRead);`而不是`myOutputStream.write(byteBuffer);`

# mysql - SQL 查询计算从前一天到第二天花费的小时数

> ID：14562277
> 
> 赞同：1
> 
> 时间：2013-01-28T12:41:32.980
> 
> 标签：mysql, sql, sql-server

表名：时间日志

```
TimeLogID | EmployeeID | TimeLog
------------------------------------------
1         | 1          | 1/1/2013 11:00 PM
2         | 1          | 1/2/2013 07:00 AM
3         | 1          | 1/2/2013 11:00 PM
4         | 1          | 1/3/2013 07:00 AM 
```

表名：时间表

```
ScheduleID | EmployeeID | TimeIN   | TimeOUT
----------------------------------------------
1          | 1          | 11:00 PM |  07:00 AM 
```

我的问题是，考虑到员工从晚上 11 点开始工作，然后在早上 7 点结束，我如何进行查询来计算员工花费的时间。希望有人可以帮助我解决这个问题。谢谢。

基本上，我需要每个工作日的工作时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:12:48.413

您可以使用此查询

```
select
  e.TimeLogID,
  e.EmployeeID,
  ifnull(TIMESTAMPDIFF(HOUR,e.TimeLog,la.TimeLog),0) as timediff
from emp_time as e
left join (
        select 
            * 
        from emp_time
    ) as la on la.TimeLogID = (
                    select  
                        min(TimeLogID ) 
                    from emp_time 
                    where TimeLogID  > e.TimeLogID  
                    limit 1
                ); 
```

输出

```
TimeLogID EmployeeID timediff 
1           1           20 
2           1           4 
3           1           20 
4           1           0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:34:10.433

这是仅计算时间差异的 Oracle 查询。我认为如果你用你的表替换 dual，它应该适用于任何 SQL。有 LAG/LEAD 函数可以比较上一行/下一行的值，但我不知道这些函数在您的 SQL 版本中是否可用。我希望这对你有用：

```
SELECT trunc(mydate / 3600) hr
 , trunc(mod(mydate, 3600) / 60) mnt
 , trunc(mod(mydate, 3600) / 60 /60) sec
  FROM 
  (
   SELECT (to_date('01/02/2013 23:00:00', 'mm/dd/yyyy  hh24:mi:ss') -
           to_date('01/01/2013 07:00:00', 'mm/dd/yyyy  hh24:mi:ss')) * 86400 mydate
    FROM dual
  )
 / 
```

# php - 使用 if 和 isset() 进行模板化的 PHP 查询字符串

> ID：14562278
> 
> 赞同：1
> 
> 时间：2013-01-28T12:41:33.613
> 
> 标签：php, templates, request, isset

我目前正在通过使用 .htaccess 强制通过 index.php 来组织我的网站。然后我将包含一些使用`$REQUEST_URI`来显示相关模板的逻辑（参见代码）。我的问题是我发现每次都必须检查请求数组值是否设置很烦人，例如`if (isset($request[1])&&$request[1]=="projects"){...`

有没有办法我可以写`if ($request[1]=="projects"){...`

`$request[1]`上述行，如果未设置，即在主页上，则会引发错误。

这是我的完整代码。它显示了 mydomain.com/projects/house 上的单个项目，并显示了 mydomain.com/projects 上的项目列表

```
$request = explode("/", $_SERVER['REQUEST_URI']);

if (isset($request[1])&&$request[1]=="projects"){

    require("./controller/projects.php");

    if (isset($request[2])){
        include("./view/project.html");
    } else {
        include("./view/project-list.html");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:46:42.757

做一个功能！

```
function current_controller() {
    if(isset($request[1])
        return $request[1];
}

if(current_controller() === "projects") { ... } 
```

或者你可以做

```
function is_current_controller($controller) {
    if(isset($request[1])&&$request[1] === $controller)
        return true;
    return false;
}

if(is_current_controller("projects") { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:54:37.213

为什么不放弃使用 else/elseif 方法`swtich()`？

像这样

```
$request = explode("/", $_SERVER['REQUEST_URI']);
$check = $request[];

switch($check) {
 case "1";
   include (folder/file1.php);
   break;
 case "2";
   include (folder/file2.php);
   break;     
 case "3";
   include (folder/file3.php);
   break; 
```

}

# c++ - 根据设置的位数计算组合

> ID：14562286
> 
> 赞同：1
> 
> 时间：2013-01-28T12:42:04.097
> 
> 标签：c++, c, algorithm

我需要在 0<=r<=n 时计算所有可能的 n 个事物的组合，其中一种方法是生成最大为 0 到 2^n-1 的数字。但我需要生成这些数字，以便根据该数字中设置的位数对数字进行排序。对于 n=3：

```
0         // numbers with 0 bits set

1 2 4     // numbers with 1 bits set

3 5 6     // numbers with 2 bits set

7         // numbers with 3 bits set 
```

我需要知道如何生成数字，以便它们按位集的递增/递减顺序排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:49:09.193

[quant_dev在这里](https://stackoverflow.com/a/7292539/15721)很好地涵盖了迭代一些项目的所有组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:54:14.783

实施常规算法来生成组合，但还要保存一个额外的数组，您可以在其中存储按照 1 位集排序的数字。然后，对于生成的每个组合，将数字替换为对应位置的数字减去我描述的数组中排序的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:07:08.157

这是一个简单的方法函数，它计算数字表示中设置的位数：

```
// Counts how many bits are set in the representation of the input number n
int numOfBitsSet(int n)
{
    int cnt = 0;
    while (n != 0)
    {
        cnt += (n & 1);
        n = n >> 1;
    }

    return cnt;
} 
```

以下是您如何在 (C++11) 程序中使用它来执行您想要的操作：

```
#include <algorithm>
#include <vector>
#include <iostream>
#include <iterator>

using namespace std;

int main()
{
    // For instance...
    int n = 3;

    // Fill up a vector of 2^n entries (0 .. 2^(n - 1))
    vector<int> v(1 << n);
    iota(begin(v), end(v), 0);

    // For each number of bits...
    for (size_t i = 0; i <= n; i++)
    {
        cout << "Numbers with " << i << " bits set: ";

        // Find the first number with i bits set...
        auto it = find_if(begin(v), end(v), [i] (int x) { 
            return (numOfBitsSet(x) == i); 
            });

        while (it != end(v))
        {
            cout << *it << " ";

            // Find the next number with i bits set...
            it = find_if(next(it), end(v), [i] (int x) { 
                return (numOfBitsSet(x) == i); 
                });
        }

        cout << endl;
    }
} 
```

如果 C++11 不适合您，您将不得不使用仿函数而不是 lambda，并`std::iota`用手动循环替换：

```
#include <algorithm>
#include <vector>
#include <iostream>
#include <iterator>

using namespace std;

struct bit_count_filter
{
    bit_count_filter(int i) : _i(i) { }
    bool operator () (int x) const { return numOfBitsSet(x) == _i; }
    int _i;
};

int main()
{
    // For instance...
    int n = 3;

    // Fill up a vector of 2^n entries (0 .. 2^(n - 1))
    vector<int> v(1 << n);
    for (size_t i = 0; i < v.size(); i++)
    {
        v[i] = i;
    }

    // For each number of bits...
    for (size_t i = 0; i <= n; i++)
    {
        cout << "Numbers with " << i << " bits set: ";

        // Find the first number with i bits set...
        auto it = find_if(begin(v), end(v), bit_count_filter(i));
        while (it != end(v))
        {
            cout << *it << " ";

            // Find the next number with i bits set...
            it = find_if(next(it), end(v), bit_count_filter(i));
        }

        cout << endl;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T13:38:48.423

你可以递归地做到这一点：

```
void setnbits(unsigned int cur, int n, int toset, int max)
{
    if(toset == 0)
    {
        printf("%d ", cur >> (n + 32 - max) , n);
        return;
    }
    toset--;
    for(int i = 1 ; i <= n-toset ; i++)
    {
        setnbits((cur >> i) | 0x80000000, n-i, toset , max);
    }
} 
```

可以这样称呼：

```
for(int z = 0 ; z < 4 ; z++)
{
    printf("%d bits: ", z);
    setnbits(0, 3, z, 3);
    printf("\n");
} 
```

印刷：

```
0 bits: 0
1 bits: 1 2 4
2 bits: 3 5 6
3 bits: 7 
```

这些数字不保证按数字顺序排列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T18:59:16.353

这很容易。有两种情况：

1) 最后 1 位之前有 0 位：00011100100 **1** -> 0001110010 **1** 0。

你应该把它移到左边

2）有一个1位链：00011 **01111** 00 -> 00011 **1** 000 **111**

然后您应该将最后一位移动到左侧（链之前）最近的 0 位，并将该链的所有其他位移动到右侧。

通过这种方式，您将按递增顺序获得所有需要的数字。

# c# - 带有 c# 的 asp.net 中的虚拟路径提供程序

> ID：14562292
> 
> 赞同：0
> 
> 时间：2013-01-28T12:42:15.777
> 
> 标签：c#, asp.net

在我的 Web 应用程序中，我从数据库中读取静态页面，但同时正常的 asp.net 页面也会访问数据库。因此加载页面需要更多时间。

# c# - 将数据库或表从 SQL Server 导出到 SQLite 文件

> ID：14562294
> 
> 赞同：1
> 
> 时间：2013-01-28T12:42:25.657
> 
> 标签：c#, asp.net

我正在为从 SQL Server 数据库创建 SQLite 文件的 Web 服务工作。而这个 SQLite 文件由 iPhone 设备下载。

我使用了从以下 URL 下载的代码。

[http://www.codeproject.com/Articles/26932/Convert-SQL-Server-DB-to-SQLite-DB](http://www.codeproject.com/Articles/26932/Convert-SQL-Server-DB-to-SQLite-DB)

所以这段代码使用了`System.Data.SQLLite.dll`.

在这段代码中，我们首先获取所有表并创建它。创建此表后，我们将插入该表的所有行。这对我来说非常耗时。

因此，我需要解决其他可以将 SQL 服务器数据导出到 SQLite 数据库的方法。

它是我们可以导出整个数据库的任何命令吗？

# iphone - 如何在 iPhone 中添加手势？

> ID：14562295
> 
> 赞同：0
> 
> 时间：2013-01-28T12:42:26.043
> 
> 标签：iphone, objective-c

我想为我的 iPhone 添加手势。我想要一个功能，比如用户可以添加一个手势，比如画一个字母，比如“f”，并将一个像 facebook 这样的应用程序绑定到它。然后，下次用户绘制 f facebook 时会自动打开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:29:20.013

您正在寻找基于预定义路径的自定义手势识别器。

这就是克里斯迈尔斯所做的`CMUnistrokeGestureRecognizer`。

1.  你定义一个自定义`UIBezierPath`
2.  将其与`CMUnistrokeGestureRecognizer`
3.  它使用不同的手势识别器的委托方法

它在[Chris 的博客](http://blog.chrismiles.info/2012/12/introducing-cmunistrokegesturerecognizer.html)上有描述，也可以在[Github](https://github.com/chrismiles/CMUnistrokeGestureRecognizer)上找到。

要检测多笔手势，您可以链接多个单笔手势识别器，要求它们都以给定的顺序成功，并且每个笔划之间的时间最长。

检测到完整手势时打开 Facebook 应用程序就像调用一样简单

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"fb://"]] 
```

# sqlalchemy - SqlAlchemy 进行奇怪的隐式查询

> ID：14562297
> 
> 赞同：2
> 
> 时间：2013-01-28T12:42:36.690
> 
> 标签：sqlalchemy

我的用户模型中有关系

```
photos = relationship('UserPhoto', backref='user', lazy='joined') 
```

在我得到所有条目之后

```
users = query.all() 
```

SA 使用 LEFT OUTER JOIN 查询 userPhoto 表

我开始遍历它们并打印所有属性突然SA对每个条目进行奇怪的隐式查询

```
INFO:sqlalchemy.engine.base.Engine:BEGIN (implicit)
INFO:sqlalchemy.engine.base.Engine:SELECT users.id AS users_id, ... FROM users 
WHERE users.id = %(param_1)s
INFO:sqlalchemy.engine.base.Engine:{'param_1': <integer idetifier>}
INFO:sqlalchemy.engine.base.Engine:SELECT user_photo.id... FROM user_photo 
WHERE %(param_1)s = user_photo.user_id
INFO:sqlalchemy.engine.base.Engine:{'param_1': <integer idetifier>} 
```

我花了几个小时找出原因，但仍在搜索

如果我像下面这样构造加入自己：

```
query.options(joinedload_all('some field')) 
```

SA 仅使用 join 进行选择

# android - Android 自定义 EditText 文本对齐底部

> ID：14562300
> 
> 赞同：1
> 
> 时间：2013-01-28T12:42:44.830
> 
> 标签：android, custom-controls, android-edittext, vertical-alignment

我为 EditText 的背景创建了一个自定义可绘制对象。我需要文本左下对齐。它在屏幕上呈现良好，但文本未与可绘制对象的右侧或底部对齐。我还尝试了重力：底部并尝试将填充设置在顶部，希望它将其向下移动。还有什么我可以做的吗？

![在此处输入图像描述](../Images/5c29f9b619dae8c869dc0010284f72a1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:55:48.103

右边和底线定义了内容区域。

您在右侧绘制的线跨越图像的上半部分。这就是为什么文本不会与底部对齐的原因。

你应该画一条稍长的线。

查看默认使用的图像。（不过我在这里把它改成了蓝色）。

![在此处输入图像描述](../Images/a2bd8cea98d21eba788a889e67df0657.png)

这将给出与您相同的结果。文本不会与底部对齐。

现在，如果我将右线延伸到底部，我将获得下图。

![在此处输入图像描述](../Images/03a626e82679469ff134747f95010e61.png)

这将为您提供预期的结果。

# asp.net - 如何在使用 Asp.net 启用过滤功能的 Jqgrid 中添加 FilterToolBar

> ID：14562305
> 
> 赞同：0
> 
> 时间：2013-01-28T12:42:58.607
> 
> 标签：asp.net, jqgrid

我开发了一个 Jqgrid 来显示数据库，现在我需要在其中添加 Filtertoolbar 它将过滤从下拉菜单中选择值的记录...

下面是我的 Jqgrid 代码..

```
$(function () {
    $("#UsersGrid").jqGrid({
        url: 'getGriddahico.ashx',
        datatype: 'json',
        height: 250,
        colNames: ['UserID', 'UserName', 'FirstName', 'MiddleName', 'LastName', 'EmailID'],
        colModel: [
                { name: 'UserID', index: 'UserID', width: 100, sortable: true },
                { name: 'UserName', width: 100, sortable: true},
                { name: 'FirstName', width: 100, sortable: true },
                { name: 'MiddleName', width: 100, sortable: true },
                { name: 'LastName', width: 100, sortable: true },
                { name: 'EmailID', width: 150, sortable: true }
            ],
        rowNum: 10,
        rowList: [10, 20, 30],
        pager: '#UsersGridPager',
        sortname: 'UserID',
        viewrecords: true,
        sortorder: 'asc',
        autowidth: true,
        toppager: true,
        footerrow: true,

    });

    $("#UsersGrid").jqGrid('navGrid', '#UsersGridPager', { edit: false, add: false, del: false, search: false });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:25:31.653

客户端很容易：您可以通过`search: true,`或将过滤器按钮标记为可搜索的列等作为寻呼机的一部分。你会在 SO 上找到很多关于这两者的例子。我强烈建议您使用带有 Firebug 或 Chrome 的 Firefox 之类的浏览器，这样您就可以看到客户端发送到服务器控件的过滤内容。

在服务器端，您应该查看 Oleg 在 [ASP.NET MVC 2.0 Implementation of search in jqgrid](https://stackoverflow.com/questions/5500805/asp-net-mvc-2-0-implementation-of-searching-in-jqgrid)中的回答，您将在其中看到 Filters 帮助器类，以及如何根据 jqGrid 的控件实现数据的动态过滤。我遵循并使用它来实现服务器端过滤以将数据传递到我的网格。

祝你好运......这是一个设置，但当你完成后它会给你一个非常强大的客户端工具。

# boonex-dolphin - 某些页面未使用 https 安全加载

> ID：14562306
> 
> 赞同：4
> 
> 时间：2013-01-28T12:43:01.957
> 
> 标签：boonex-dolphin

我们已将网站从 http 迁移到 https。我们还为网站安装了 ssl 认证。该网站是海豚7.1

问题是当我们加载网站时，页面正在使用 https 加载，但锁定符号没有出现。

当我在 Firefox 中加载该网站时，它显示“该网站不提供身份信息。您与该网站的连接只是部分加密，并不能防止窃听。”

当我在 chrome 浏览器中加载网站时，它会显示某些网页的锁定符号，但不是全部。问题是该网站引用了不安全的内容，例如内容来自 http 网站。

请帮助我并告诉我此问题的解决方案。

提前致谢。

# javascript - D3js 过滤器选择

> ID：14562308
> 
> 赞同：4
> 
> 时间：2013-01-28T12:43:11.683
> 
> 标签：javascript, d3.js, filtering, circle-pack

我正在创建[财富 500 强](http://gomashup.com/cms/fortune_500_companies)数据的交互式[气泡图。](https://github.com/mbostock/d3/wiki/Pack-Layout)我正在尝试减少选择，但无法弄清楚为什么它没有按我的预期工作。

```
var bubble = d3.layout.pack()
    ...

d3.json("js/data/fortune2009.json", function(json) {

    var node = svg.data([json]).selectAll("g.node")
        .data(bubble.nodes); // filter here?

    node.enter()
        .append("g")
        .attr("class", "node")
        .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });

    node.append("circle")
        .attr("r", function(d) { return d.r; })
        .attr("class", function(d) { return "q" + color(d.Profit) + "-9"; });

    node.filter(function(d) { return !d.children; })
        .append("text")
        .attr("dy", ".3em")
        .style("text-anchor", "middle")
        .text(function(d) { return d.Company.substring(0, d.r / 3); });
}); 
```

JSON 数据如下所示：

```
{
    "children":[
    {
        "Year" : "2009",
        "Rank" : "1",
        "Revenue" : "442",
        "Profit" : "851.00",
        "Company" : "Exxon Mobil"
    },
    ....
} 
```

我想删除父节点。我正在尝试使用[此处](https://github.com/mbostock/d3/wiki/Selections#wiki-filter)描述的过滤器功能。

```
.filter(function(d) { return !d.children; }) 
```

但是，如果我在初始化`node`选择的地方添加过滤器函数，则要么什么都没有发生，要么我得到一个错误。

（当我在附加文本之前应用它时过滤器起作用）

我该如何解决这个问题？

**更新：**这是一个 JSFIDDLE [http://jsfiddle.net/B9w4N/8/](http://jsfiddle.net/B9w4N/8/)显示我的问题。

![在此处输入图像描述](../Images/409aed8645e59d343a6431f3fb2941f0.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T17:46:18.640

你有正确的想法。您只需要在创建圆圈的位置应用过滤器（除了创建文本的位置）：

```
node
    .filter(function(d) { return !d.children; })
    .append("circle")
    .attr("r", function(d) { return d.r; }); 
```

[JSFiddle](http://jsfiddle.net/SWcwn/)上的分叉版本

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T01:39:05.020

您可以过滤布局输出的数组：

```
var node = svg.data([fortune2009]).selectAll("g.node")
    .data(function(d) { 
        return bubble.nodes(d).filter(function(v) {
            return v.depth > 0;
        });
    }); 
```

查看更新的小提琴：http: [//jsfiddle.net/B9w4N/10/](http://jsfiddle.net/B9w4N/10/)

# c# - DataContracts 中的 DataMembers 是否有限制

> ID：14562313
> 
> 赞同：0
> 
> 时间：2013-01-28T12:43:15.803
> 
> 标签：c#, datacontract, datamember

我创建了一个类并添加了属性，使用-Attribute`DataContract`制作了一些属性。`DataMember`

在我添加第六个之后`DataMember`，对象将不会序列化......通过删除它再次工作的属性......

我有点困惑，我的研究没有给我一个合适的解释或解决方案:(

```
[DataContract]
public class MyClass {

    [DataMember]
    public Guid ID { get; set; }

    [DataMember]
    public String Name_1 { get; set; }

    [DataMember]
    public String Name_2 { get; set; }

    [DataMember]
    public String Name_3 { get; set; }

    [DataMember]
    public String Name_4 { get; set; }

    [DataMember]
    public String Name_5 { get; set; }

} 
```

糟糕...这是 .Net 4.0 和 ASP.Net Dev'Server

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:45:22.320

在摆弄之后，我确定这是数据量。

我切换到 Json.NET ......现在它工作正常 :)

# dll - 与 ffmpeg 共享构建链接

> ID：14562321
> 
> 赞同：0
> 
> 时间：2013-01-28T12:43:49.113
> 
> 标签：dll, linker, ffmpeg, cygwin, shared-libraries

我正在尝试在开发环境中使用该`ffmpeg`库。`cygwin`我从这里下载了[共享版本](http://ffmpeg.zeranoe.com/builds/)（64 位）。`bin`文件夹包含但`dlls`不包含`.a`或`.dll.a`文件。链接，这样做是这样的：

```
$ gcc encoding_mp3.o -L/cygdrive/c/Users/Desktop/webserver/cygnus/lib/w32api -L/cygdrive/c/Users/Desktop/webserver/cygnus/ffmpeg/ffmpeg_shared/bin -lavcodec-54 -lm -luser32 -lpthread -o encoding_mp3 
```

导致以下错误：

```
/cygdrive/c/Users/Desktop/webserver/cygnus/ffmpeg/ffmpeg_shared/bin/avcodec-54.dll: file not recognized: File format not recognized collect2: ld returned 1 exit status 
```

我的问题：
1.`bin/`共享构建中的文件夹仅包含`avcodec-54.dll`. 有没有办法将 a 转换`dll`为`dll.a`or `.a`？
2\. 我哪里错了？

如果需要源代码，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:46:09.590

您需要下载“开发”版本或“静态链接”版本（在页面上稍微向下）。dll 不能转换为库，也不能（通常）用于生成它们自己的小导入存根（.dll.a）

从您链接的页面中，“开发包提供了在其他程序中使用 .dll 文件所需的头文件和 .lib/.dll.a 文件。” .a / .lib 通常位于“lib”文件夹中。

# testing - 使用循环生成字符串 Jmeter

> ID：14562322
> 
> 赞同：0
> 
> 时间：2013-01-28T12:43:51.427
> 
> 标签：testing, jmeter, load-testing, stress-testing

初始化时我有循环的开始和循环的结束，如 int i=0，循环应该继续直到 i=99。

在每次迭代中，我需要生成值为 i like 的字符串`Sk+i`。
每次迭代时，它都应该生成类似的值

```
sk001
sk002
...
sk099 
```

不仅是这个字符串，这个循环应该以特定的形式生成它，比如

```
<register><name>sk001</name>
  <name>sk002</name>
  ...
  <name>sk099</name>
</register> 
```

如何在 Jmeter 中实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:50:03.427

我已经使用 BeanShell 采样器完成了它

```
String authString ="<name>" + "${name}" + "</name>";

String temp=vars.get("acc");

vars.put("acc",temp+authString); 
```

其中 ${name} 是我从迭代名称数组中获得的值。

它将连接旧值和新值。

# php - 导出可配置的产品尺寸属性

> ID：14562328
> 
> 赞同：0
> 
> 时间：2013-01-28T12:44:09.453
> 
> 标签：php, magento, csv, feed

我有以下问题：我正在尝试为价格比较引擎构建产品提要。我的商店卖衣服，我所有的产品都是可配置的。例如，可配置的产品 T Shirt 由 3 个简单的产品组成，服装尺寸为 S、M 和 L。

我的提要导出到 .csv 文件。每个可配置产品都有一条线。问题是我需要一个名为“size”的列，其中包含相关简单产品的所有现有尺寸（例如 S|M|L）。

我尝试了几种解决方案，例如：

```
$prod_size = $product->getResource()->getAttribute('size')->getFrontend()->getValue($product);

$prod_size = $product->getAttributeText('size');

$prod_size = $product->getData('size');

$prod_size = $product->getSize(); 
```

我使用此语句将关联产品中的数据连接到可配置产品：

```
if ($GROUPED_PRODUCT['prod_size'] != "") {
    $PRODUCT['prod_size'] = $GROUPED_PRODUCT['prod_size'];
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:12:53.623

这将获得可配置产品的所有属性及其值。

```
$productAttributeOptions = $product->getTypeInstance(true)->getConfigurableAttributesAsArray($product);
$attributeOptions = array();
foreach ($productAttributeOptions as $productAttribute) {
    foreach ($productAttribute['values'] as $attribute) {
        $attributeOptions[$productAttribute['label']][$attribute['value_index']] = $attribute['store_label'];
    }
}
print_r($attributeOptions); 
```

根据您的需要进行修改。

# asp.net-mvc - .net mvc 等效于 JSF ui:include

> ID：14562329
> 
> 赞同：1
> 
> 时间：2013-01-28T12:44:15.070
> 
> 标签：asp.net-mvc, templates, include

我正在从 JSF 项目转移到 .net 项目。facelets 的一大优点是能够将`<ui:include>`您的 html 模块化为更易于管理和重用的小片段。

到目前为止，我还没有在 .net MVC 中看到任何可以提供同样灵活性的东西。

有什么建议/建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:41:20.837

如果您使用的是 asp.net mvc 3 或 4，则可以在视图中使用 @Html.renderpartial，即使您从控制器使用也有 PartialViewResult

# java - 可展开的列表视图没有展开

> ID：14562332
> 
> 赞同：4
> 
> 时间：2013-01-28T12:44:20.467
> 
> 标签：java, android, expandablelistview

嗨需要像这样准备屏幕

![在此处输入图像描述](../Images/f0711f812a50894d0959659a7f32aa6d.png)

这是我的可扩展列表视图代码

适配器类：**NewAdapter.java**

```
public class NewAdapter extends BaseExpandableListAdapter {

    public ArrayList<ParentBean> groupItem;
    ArrayList<String> tempChild;
    public ArrayList<Object> Childtem = new ArrayList<Object>();
    public LayoutInflater minflater;
    public Activity activity;

    public NewAdapter(ArrayList<ParentBean> grList, ArrayList<Object> childItem) {
        groupItem = grList;
        this.Childtem = childItem;
    }

    public void setInflater(LayoutInflater mInflater, Activity act) {
        this.minflater = mInflater;
        activity = act;
    }

    @Override
    public Object getChild(int groupPosition, int childPosition) {
        return null;
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        return 0;
    }

    @Override
    public View getChildView(int groupPosition, final int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
        tempChild = (ArrayList<String>) Childtem.get(groupPosition);
        TextView text = null;
        if (convertView == null) {
            convertView = minflater.inflate(R.layout.childrow, null);
        }

        text = (TextView) convertView.findViewById(R.id.textView1);
        text.setText(tempChild.get(0));
        text = (TextView) convertView.findViewById(R.id.textView2);
        text.setText(tempChild.get(1));
        text = (TextView) convertView.findViewById(R.id.textView3);
        text.setText(tempChild.get(2));
        convertView.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Toast.makeText(activity, tempChild.get(childPosition),
                        Toast.LENGTH_SHORT).show();
            }
        });
        return convertView;
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        return 1;
    }

    @Override
    public Object getGroup(int groupPosition) {
        return null;
    }

    @Override
    public int getGroupCount() {
        return groupItem.size();
    }

    @Override
    public void onGroupCollapsed(int groupPosition) {
        super.onGroupCollapsed(groupPosition);
    }

    @Override
    public void onGroupExpanded(int groupPosition) {
        super.onGroupExpanded(groupPosition);
    }

    @Override
    public long getGroupId(int groupPosition) {
        return 0;
    }

    @Override
    public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {
        ViewHolder holder=null;
        if (convertView == null) {
            convertView = minflater.inflate(R.layout.grouprow, null);
            holder = new ViewHolder();
            holder.name=(TextView)convertView.findViewById(R.id.playername);
            holder.team = (TextView) convertView.findViewById(R.id.vs);
            holder.salary = (TextView) convertView.findViewById(R.id.salary);
            convertView.setTag(holder);

        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        ParentBean playerdetails = groupItem.get(groupPosition);
        holder.name.setText(playerdetails.getPlayername());
        holder.team.setText(playerdetails.getPlayerteam());
        holder.salary.setText(playerdetails.getPlayersalary());
        return convertView;
    }

    @Override
    public boolean hasStableIds() {
        return false;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return false;
    }

    private class ViewHolder {
        TextView team;
        TextView name;
        TextView salary;
    }
    class ParentBean{
        String playername,playerteam,playersalary;

        public ParentBean(String playername,String playerteam,String playersalary) {
            this.playername=playername;
            this.playersalary=playersalary;
            this.playerteam=playerteam;
        }

        /**
         * @return the playername
         */
        public String getPlayername() {
            return playername;
        }

        /**
         * @param playername the playername to set
         */
        public void setPlayername(String playername) {
            this.playername = playername;
        }

        /**
         * @return the playerteam
         */
        public String getPlayerteam() {
            return playerteam;
        }

        /**
         * @param playerteam the playerteam to set
         */
        public void setPlayerteam(String playerteam) {
            this.playerteam = playerteam;
        }

        /**
         * @return the playersalary
         */
        public String getPlayersalary() {
            return playersalary;
        }

        /**
         * @param playersalary the playersalary to set
         */
        public void setPlayersalary(String playersalary) {
            this.playersalary = playersalary;
        }

    }
} 
```

这是我的活动：**MainActivity.java**

```
public class MainActivity extends ExpandableListActivity implements
        OnChildClickListener {
    Context context;
    ArrayList<ParentBean> groupItem = new ArrayList<ParentBean>();
    ArrayList<Object> childItem = new ArrayList<Object>();
    NewAdapter mNewAdapter;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ExpandableListView expandbleLis = getExpandableListView();
        expandbleLis.setDividerHeight(2);
        expandbleLis.setGroupIndicator(null);
        expandbleLis.setClickable(true);
        expandbleLis.setFocusable(true);
        context=this;
        getData();
        mNewAdapter = new NewAdapter(groupItem, childItem);
        mNewAdapter.setInflater((LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE),this);
        getExpandableListView().setAdapter(mNewAdapter);

        expandbleLis.setOnChildClickListener(this);
    }

    public void getData() {
        JsonDataCallback callback=new JsonDataCallback(MainActivity.this) {

            @Override
            public void receiveData(Object object) {
                String jsonData=(String)object;
                setData(jsonData);
            }
        };
        callback.execute("http://111.93.7.119:8080/FirstPickService/Players?sportid=fc2e88e6-ac87-4d27-b6b3-863baa9f06ec",null,null);
    }

    protected void setData(String jsonData) {
        try {
            JSONObject players=new JSONObject(jsonData);
            final JSONArray playersArray=players.getJSONArray("players");
            for(int i=0;i<playersArray.length();i++)
            {
                JSONObject jsonObj=playersArray.getJSONObject(i);
                String teamplayer=jsonObj.getString("playerfullname");
                String psalary=jsonObj.getString("playerprice");
                String strTeamVS=jsonObj.getString("teamid")+"@"+jsonObj.getString("awayteam");
                groupItem.add(mNewAdapter.new ParentBean(teamplayer, psalary, strTeamVS));

                String strsalary = jsonObj.getString("playerpricelong");
                ArrayList<String> child = new ArrayList<String>();
                child.add(psalary);
                child.add(strTeamVS);
                child.add(strsalary);
                childItem.add(child);
            }
            mNewAdapter.notifyDataSetChanged();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Override
    public boolean onChildClick(ExpandableListView parent, View v,
            int groupPosition, int childPosition, long id) {
        Toast.makeText(MainActivity.this, "Clicked On Child",
                Toast.LENGTH_SHORT).show();
        return true;
    }
} 
```

我不确定，但我使用了一个按钮进行选择，因为该可扩展列表失去焦点并且在单击列表项时没有显示子项...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:10:15.953

尝试`non-focusable`在 xml 中制作选择按钮。

# git - GIT 存储澄清

> ID：14562335
> 
> 赞同：6
> 
> 时间：2013-01-28T12:44:40.537
> 
> 标签：git, lifetime, git-stash

我已经在我的 ubuntu 服务器中安装了 GIT。

我有一个习惯，就是经常在 git 中存放需要更多工作的文件。

到目前为止，我还没有遇到任何关于存储的问题。

我想澄清当我创建一个存储时它是否有生命周期，它是否会在几天后被删除或清除。我在存储中的更改有多安全。

在进行任何其他更改时，存在存储被删除的风险。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T12:53:43.110

由于大约 git 版本 1.6.0 存储设置为不过期。该 git 版本的变更日志说：

```
By default, stash entries never expire.  Set reflogexpire in [gc
"refs/stash"] to a reasonable value to get traditional auto-expiration
behaviour back 
```

因此，如果您希望存储过期，请按照上面的提示进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:51:17.143

git stash 中的提交具有作为本地引用的引用，因此它们将无限期地存在（即不会被垃圾收集）。

# sql - 这两个查询有什么区别；891 对 49 结果

> ID：14562336
> 
> 赞同：0
> 
> 时间：2013-01-28T12:44:41.510
> 
> 标签：sql, sql-server-2008, subquery, left-join

环境：MS SQL Server 2008。

我有以下两个查询，一个返回 891 行，这是错误的，另一个是 49，正确的结果大小。这两个查询都使用了两个子查询，它们本质上是相同的，只是子查询的顺序被翻转了。

注释为的子查询`Entitlements`返回登录用户有权查看其他子查询的行，这些子查询进一步受到用户搜索条件的限制。

谁能解释为什么结果集大小不同？

我认为这与`Entitlement`使用 a 的子查询`left outer join`以及`where clause`在获取过程的最后过滤结果有关。但不确定。

查询 1（错误的结果集）：

```
 select
    this_.PROFILE_ID as y0_,
    personalda1_.lastName as y1_,
    personalda1_.fullName as y2_ 
from
    PROFILE this_ 
inner join
    PERSONALDATA personalda1_ 
        on this_.PERSONALDATA_ID=personalda1_.PERSONALDATA_ID 
where
    this_.PROFILE_ID in (
        /* Entitlements */ select
            this_.PROFILE_ID as y0_ 
        from
            PROFILE this_ 
        left outer join
            APPOINTMENTDETAILS appointmen1_ 
                on this_.PROFILE_ID=appointmen1_.PROFILE_ID 
        left outer join
            OTHERAPPOINTMENT othera2_ 
                on this_.PROFILE_ID=othera2_.PROFILE_ID 
        where
            (
                appointmen1_.orgUnit='00000177'
                or othera2_.organizationUnit='00000177'
            )
    ) 
    and this_.PROFILE_ID in (
        /* criteria query */ select
            distinct this_.PROFILE_ID as y0_ 
        from
            PROFILE this_ 
        inner join
            APPOINTMENTDETAILS appointmen1_ 
                on this_.PROFILE_ID=appointmen1_.PROFILE_ID 
        where
            appointmen1_.endDate='9999-12-31'
            and appointmen1_.area='ABCD'
    ) 
order by
    personalda1_.lastName asc; 
```

查询 2（正确的结果集）：

```
 select
    this_.PROFILE_ID as y0_,
    personalda1_.lastName as y1_,
    personalda1_.fullName as y2_ 
from
    PROFILE this_ 
inner join
    PERSONALDATA personalda1_ 
        on this_.PERSONALDATA_ID=personalda1_.PERSONALDATA_ID 
where
    this_.PROFILE_ID in (
        select
            distinct this_.PROFILE_ID as y0_ 
        from
            PROFILE this_ 
        inner join
            APPOINTMENTDETAILS appointmen1_ 
                on this_.PROFILE_ID=appointmen1_.PROFILE_ID 
        where
            appointmen1_.endDate='9999-12-31'
            and appointmen1_.area='ABCD'
    ) 
    and this_.PROFILE_ID in (
    /* Entitlements */ select
            this_.PROFILE_ID as y0_ 
        from
            PROFILE this_ 
        left outer join
            APPOINTMENTDETAILS appointmen1_ 
                on this_.PROFILE_ID=appointmen1_.PROFILE_ID 
        left outer join
            OTHERAPPOINTMENT other2_ 
                on this_.PROFILE_ID=other2_.PROFILE_ID 
        where
            (
                appointmen1_.orgUnit='00000177'
                or other2_.organizationUnit='00000177'
            )            
    ) 
order by
    personalda1_.lastName asc; 
```

试图理解查询执行计划，但并不容易理解。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:45:29.317

我发现了问题，列出以帮助处于相同情况的其他人：

它是`R2`，如在`MS SQLServer2008 R2`。

结果发现一台服务器很旧`SQLServer 2008`，没有`R2`安装，另一台是`R2`.

当这些查询在 上运行时`R2`，两者都产生了相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:07:02.887

转到“不良”结果并找到不应返回的*记录*。试着弄清楚为什么它会被包含在内，你可能会发现问题所在。

此外，您不需要`distinct`在子查询中。

另外：这与正确的查询相同吗？

```
SELECT
    this_.PROFILE_ID as y0_,
    personalda1_.lastName as y1_,
    personalda1_.fullName as y2_ 
from
    PROFILE this_ 
inner join
    PERSONALDATA personalda1_ 
        on this_.PERSONALDATA_ID=personalda1_.PERSONALDATA_ID 
where
    this_.PROFILE_ID in (
        /* Entitlements */ 
        select
            this_.PROFILE_ID as y0_ 
        from
            PROFILE this_ 
        left outer join
            APPOINTMENTDETAILS appointmen1_ 
                on this_.PROFILE_ID=appointmen1_.PROFILE_ID 
        left outer join
            OTHERAPPOINTMENT othera2_ 
                on this_.PROFILE_ID=othera2_.PROFILE_ID 
        where
            (
                appointmen1_.orgUnit='00000177'
                or othera2_.organizationUnit='00000177'
            )
        AND
            appointmen1_.endDate='9999-12-31'
        AND
            appointmen1_.area='ABCD'
    ) 
```

# informix - 从 Informix 数据库中读取数据。拥有带有 *.IDX、*.Dat 文件的文件夹 app.dbs

> ID：14562340
> 
> 赞同：1
> 
> 时间：2013-01-28T12:44:52.023
> 
> 标签：informix

我有一个朋友有一个管理应用程序，他想在 Excel 中导入他的一些数据。

问题是我不知道如何读取这种类型的文件，

在他的应用程序目录中，他有一个名为 app.dbs 的文件夹。里面有 *.idx 和 *.dat 文件。

读取这些文件的最简单方法是什么？也许是 ODBC 连接器，或者安装某些版本的 Informix DB？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:30:36.337

这听起来像是 C-ISAM 文件或 Informix-SE（标准引擎）安装。你当然不能直接阅读它们。谷歌搜索[Informix C-ISAM 文件 ODBC](https://www.google.com.au/search?q=informix%20c-isam%20files%20odbc)会生成大量结果。[此页面](http://en.wikipedia.org/wiki/IBM_Informix_C-ISAM)还解释了两者之间的关系。

我从未使用过 SE，但假设它的安装与它的老大哥 Informix Dynamic Server 相当相似（我相信确实如此），请在您朋友的计算机上查看“Informix”目录。您可能会找到一个`%INFORMIXDIR%`环境变量来为您指明正确的方向。在其中，在其子目录中查找`bin`名为`dbaccess.exe`. 从 DOS 提示符下运行它，你应该希望得到一个 SQL 解释器，它允许你读取和提取数据。

如果您没有运气找到这样的目录，那么“管理应用程序”很可能正在直接编写 C-ISAM，并且您将需要 C-ISAM 的 ODBC 驱动程序，正如您所推测的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T03:42:00.330

`app.dbs`包含`.dat`和文件的名称`.idx`几乎可以肯定地表明您拥有一个 Informix SE（标准引擎）数据库（有人可能伪造了它，但这不太可能）。

假设您可以使用 Informix ODBC 驱动程序和 SE 本身来访问数据库，或者您可以使用基于 ISAM 的 ODBC 驱动程序来访问数据库。这部分取决于这是一次性迁移还是在应用程序继续在数据库上工作时的持续访问。

假设所有这些都安装在 Windows 上，您确实应该找到一个 %INFORMIXDIR% 目录，该目录将`dbaccess.exe`在`bin`子目录中，并且`sqlexec.exe`在`bin`目录或`lib`目录中（它将`$INFORMIXDIR/lib`在 Unix 上；我是不确定Windows）。这些应该能够访问数据库。如果你找到`sqlexec`但没有`dbaccess`，那么你有一个非常旧的版本（超过 20 年，但我知道其他人仍在使用这样的过时版本）。您应该能够通过运行`dbaccess -V`或来识别版本`sqlexec -V`。如果它是 7.25，那么它是相当新的（这已经存在了十年或更长时间）；如果它比那更古老，它就接近过时了。

# objective-c - 以 NSData 为密钥的 AES128 解密

> ID：14562344
> 
> 赞同：0
> 
> 时间：2013-01-28T12:44:57.473
> 
> 标签：objective-c, encryption, aes

我很难`NSData`用`NSData key`. 虽然使用一切解密`NSString`工作正常，但使用数据作为密钥，该方法返回 null `NSData`，即使状态正常，并且密钥对于该数据也是正确的。这是我的电话

```
NSData *decrypted = [AES AES128DecryptWithKey:data key:mute];
NSLog(@"DECRYPTED >> %@", decrypted); 
```

还有我的方法

```
+ (NSData*)AES128DecryptWithKey:(NSData*) data key:(NSData*)key {

    NSUInteger dataLength = [data length];
    NSLog(@"trying to decrypt >> %@ with key >> %@", data, key );

    size_t bufferSize           = dataLength + kCCBlockSizeAES128;
    void* buffer                = malloc(bufferSize);

    size_t numBytesDecrypted    = 0;
    CCCryptorStatus cryptStatus = CCCrypt(kCCDecrypt, kCCAlgorithmAES128, kCCOptionPKCS7Padding,
                                          [key bytes], kCCKeySizeAES128,
                                          NULL /* initialization vector (optional) */,
                                          [data bytes], dataLength, /* input */
                                          buffer, bufferSize, /* output */
                                          &numBytesDecrypted);
    NSLog(@"cryptstatus %d", cryptStatus);
    if (cryptStatus == kCCSuccess)
    {
        return [NSData dataWithBytesNoCopy:buffer length:numBytesDecrypted];
    }

    free(buffer); //free the buffer;
    return nil;
} 
```

NSLog 输出：

```
trying to decrypt >> <152f052e 79436003 7a9c1a59 3b82f1c4>
with key >> <1b510e76 ac0000a1 027af26a e25ad24a>
cryptstatus 0
DECRYPTED >> <> 
```

调查了一下`RNEncryptor`，但它只有 aes256，而我需要 128。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:38:36.977

可能是单字节块仅包含填充字节。在这种情况下，零字节将是预期的结果。

这不是您的密文的情况，在您的情况下，加密期间没有应用填充，因此当您尝试取消填充数据时会失败。

# c - 我们如何在构建代码时保存日志？

> ID：14562349
> 
> 赞同：2
> 
> 时间：2013-01-28T12:45:23.157
> 
> 标签：c, linux, logging

我正在使用 make 在 C 中构建代码，我将如何保存构建日志？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T12:47:10.343

如果你们都想保存日志并在控制台上查看，可以使用以下[`tee`](http://linux.die.net/man/1/tee)命令：

```
make 2>&1 | tee build.log 
```

该`2>&1`部分是告诉外壳重定向`stderr`到`stdout`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T12:48:07.007

Shell 输出重定向将在这里为您提供帮助。

```
make 2>&1 > output.log 
```

请参阅：[进行输出重定向](https://stackoverflow.com/questions/7119875/make-output-redirection)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T12:47:10.167

通常，最有趣的输出（编译器警告和错误）会发送到 stderr。在 bash 中：

```
$ make 2> out 
```

然后检查名为`out`. 这`2>`是一个[Bash 输出重定向运算符](http://www.gnu.org/software/bash/manual/bashref.html#Redirecting-Output)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T12:48:33.787

如果要保存 make 的输出，请使用：

```
make 1>std.out 2> err.out 
```

1 表示标准输出，2 表示错误输出

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T12:49:39.057

如果您使用标准制作，我假设您通过终端执行此操作，因此您只需执行 : `make >> mylogfile.log`。
有关 I/O 重定向的更多技巧，请查看[此处](http://www.linuxsa.org.au/tips/io-redirection.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T13:00:24.040

```
make 2>&1 > output.log 
```

这将帮助你

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-28T13:06:35.610

除了另一个答案提出的重定向之外，请考虑[脚本](http://linux.die.net/man/1/script)实用程序，它会写入您与 shell 及其子程序或与另一个程序交互的完整日志：输入和输出。

有时您必须在制作过程中进行干预，在失败时修复某些内容，然后重新启动。当这样的事情被匆忙完成时，有一个关于你所做的事情的协议是有益的，*而不必考虑在你做的时候记录或记录*。

# jpa - 此类未定义公共默认构造函数，或构造函数引发异常。内部异常：java.lang.InstantiationException

> ID：14562356
> 
> 赞同：1
> 
> 时间：2013-01-28T12:45:33.043
> 
> 标签：jpa, eclipselink

大家好，我的 JPA 项目有问题。Fichier.java 结束 Application.java 实现了一个接口“FileSystemElement.java”那些是我的类 Application.java

```
package com.bfi.webtop.model;

import java.io.Serializable;
import java.util.*;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.IdClass;
import javax.persistence.Table;

/** @pdOid d477195f-149e-4336-8586-19d6a09ee2d4 */
@Entity
@Table(name="application_")
public abstract class Application implements FileSystemElement, Serializable {
//  public Application() {
//      super();
//  }

  public Application(int id_app, String url) {
super();
this.id_app = id_app;
this.url = url;
  }

      public Application() {
  super();
  // TODO Auto-generated constructor stub
   }

  private int id_app;

  private java.lang.String url;

  /**
  * @return the url
  */
  public java.lang.String getUrl() {
return url;
   }

         /**
  * @param url the url to set
     */
      public void setUrl(java.lang.String url) {
          this.url = url;
    }

    /**
      * @return the id_app
   */
 @Id
 @GeneratedValue(strategy=GenerationType.AUTO)
public int getId_app() {
return id_app;
}

/**
 * @param id_app the id_app to set
 */
public void setId_app(int id_app) {
this.id_app = id_app;
}

} 
```

Fichier.java

```
package com.bfi.webtop.model;

/***********************************************************************
 * Module:  Fichier.java
 * Author:  Marwa
 * Purpose: Defines the Class Fichier
 ***********************************************************************/

import java.util.*;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;

@Entity
public abstract class Fichier implements FileSystemElement {
 private int id_fichier;

   private java.lang.String extension;
   private java.lang.Boolean supprim;
/**
 * @return the extension
 */
public java.lang.String getExtension() {
return extension;
}
/**
 * @param extension the extension to set
 */
 public void setExtension(java.lang.String extension) {
this.extension = extension;
}
/**
 * @return the supprim
 */
public java.lang.Boolean getSupprim() {
return supprim;
}
/**
 * @param supprim the supprim to set
 */
public void setSupprim(java.lang.Boolean supprim) {
this.supprim = supprim;
}
/**
* @return the id_fichier
*/
@Id
@GeneratedValue(strategy=GenerationType.AUTO)
public int getId_fichier() {
return id_fichier;
}
/**
 * @param id_fichier the id_fichier to set
*/
 public void setId_fichier(int id_fichier) {
this.id_fichier = id_fichier;
}

public Fichier() {
super();
}

} 
```

文件系统元素.java

```
package com.bfi.webtop.model;

import javax.annotation.Generated;
import javax.persistence.metamodel.StaticMetamodel;

@Generated(value="Dali", date="2013-01-28T10:33:26.416+0100")
@StaticMetamodel(FileSystemElement.class)
public class FileSystemElement_ {
} 
```

其他类具有相同的结构当我尝试这样做时：jpa tooles> 从实体生成表我有以下错误

> 线程“主”javax.persistence.PersistenceException 中的异常：异常> [EclipseLink-28019]（Eclipse Persistence Services - 2.4.0.v20120608-r11652）：org.eclipse.persistence.exceptions.EntityManagerSetupException 异常描述：部署 PersistenceUnit [webtop ] 失败的。关闭此 PersistenceUnit 的所有工厂。内部异常：异常 [EclipseLink-0] (Eclipse Persistence Services - 2.4.0.v20120608-r11652)：org.eclipse.persistence.exceptions.IntegrityException
> 
> ## 描述符例外：

异常 [EclipseLink-34] (Eclipse Persistence Services - 2.4.0.v20120608-r11652)：org.eclipse.persistence.exceptions.DescriptorException 异常描述：此类未定义公共默认构造函数，或构造函数引发异常。内部异常：java.lang.InstantiationException 描述符：RelationalDescriptor(com.bfi.webtop.model.Application --> [DatabaseTable(application_)])

异常 [EclipseLink-34] (Eclipse Persistence Services - 2.4.0.v20120608-r11652)：org.eclipse.persistence.exceptions.DescriptorException 异常描述：此类未定义公共默认构造函数，或构造函数引发异常。内部异常：java.lang.InstantiationException 描述符：RelationalDescriptor(com.bfi.webtop.model.Fichier --> [DatabaseTable(FICHIER)])

异常 [EclipseLink-34] (Eclipse Persistence Services - 2.4.0.v20120608-r11652)：org.eclipse.persistence.exceptions.DescriptorException 异常描述：此类未定义公共默认构造函数，或构造函数引发异常。内部异常：java.lang.InstantiationException 描述符：RelationalDescriptor(com.bfi.webtop.model.Raccourci --> [DatabaseTable(RACCOURCI)])

## 运行时异常：

```
at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createDeployFailedPersistenceException(EntityManagerSetupImpl.java:616)
at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.deploy(EntityManagerSetupImpl.java:596)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.getDatabaseSession(EntityManagerFactoryDelegate.java:186)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryDelegate.createEntityManagerImpl(EntityManagerFactoryDelegate.java:278)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManagerImpl(EntityManagerFactoryImpl.java:304)
at org.eclipse.persistence.internal.jpa.EntityManagerFactoryImpl.createEntityManager(EntityManagerFactoryImpl.java:282)
at org.eclipse.jpt.jpa.eclipselink.core.ddlgen.Main.perform(Main.java:85)
at org.eclipse.jpt.jpa.eclipselink.core.ddlgen.Main.execute(Main.java:76)
at org.eclipse.jpt.jpa.eclipselink.core.ddlgen.Main.main(Main.java:63)
Caused by: Exception [EclipseLink-28019] (Eclipse Persistence Services -       2.4.0.v20120608-r11652): org.eclipse.persistence.exceptions.EntityManagerSetupException 
```

异常描述：PersistenceUnit [webtop] 的部署失败。关闭此 PersistenceUnit 的所有工厂。内部异常：异常 [EclipseLink-0] (Eclipse Persistence Services - 2.4.0.v20120608-r11652)：org.eclipse.persistence.exceptions.IntegrityException

我正在使用 Eclipse Juno 有什么帮助吗？

}

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-11T17:29:14.567

您已将 Fichier 类定义为抽象类：

```
public abstract class Fichier 
```

删除*摘要*，它会起作用。这种情况下的错误消息有些令人困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:21:24.050

如错误所述，您需要为 Application 类提供默认（无参数）构造函数。

如果您不想将构造函数公开给您的应用程序，则构造函数可以是私有的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-19T14:25:59.480

考虑在您的类中创建无参数构造函数，然后清理您的项目并尝试。我有同样的问题，使用 lombok 我修复了它

# java - Mysql，使用逗号为列添加值

> ID：14562358
> 
> 赞同：4
> 
> 时间：2013-01-28T12:45:43.200
> 
> 标签：java, mysql, hibernate

在我的数据库中，我们有一个名为的列`deleteList`，其中包含逗号分隔的值。如何将值附加到数据库中的现有记录？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T12:47:14.023

如果要连接值，则需要第二次*更新。*

```
UPDATE tableName
SET    deleteList = CONCAT(deleteList, ',', 'NEWVALUE')
WHERE  colName = val 
```

在哪里

*   `NEWVALUE`是您要添加到列表中的值
*   `colName`是标识要更新的行的键。

# batch-file - 打破批处理文件中的嵌套for循环

> ID：14562362
> 
> 赞同：9
> 
> 时间：2013-01-28T12:45:57.000
> 
> 标签：batch-file

在两次遇到这个问题之后，我想我会在这里发布它，看看是否有人知道如何解决它。

我似乎无法使用 跳出嵌套循环`goto`，因为看起来当它跳出内部循环时，括号不匹配，因为它从未到达内部闭合循环。

我已将其范围缩小为一个非常简单的示例

```
for %%a in (1,2,3) do (
for %%b in (4,5,6) do (
echo Breaking
goto :BREAK
)
:BREAK
) 
```

这会导致错误

```
) was unexpected at this time. 
```

我想也许添加额外的括号可能会解决问题，但除非我知道我要中断，否则它无济于事，如果是有条件的中断，那也是同样的问题。

是否有任何简单的替代方法可以将内部循环中断回外部，即使它是使用`if`'s 和`else`'s 的条件中断？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T13:53:25.993

通过在标签中放置内部循环来中断。

```
for %%a in (1, 2, 3) DO (

   call :innerloop 
)
:innerloop
for %%b in (4, 5, 6) DO (
  if %%b==<something> (
    echo    break
    goto :break
  )

)
:break 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-02T01:37:35.813

您也可以使用与 FOR 相关联的控制变量在 break 之后省略其余的迭代：

```
@echo off
for %%a in (1,2,3) do (
   echo Top-level loop: %%a
   set break=
   for %%b in (4,5,6) do if not defined break (
      echo Nested loop: %%a-%%b
      if %%b == 4 (
         echo Breaking
         set break=yes
      )
   )
) 
```

此方法将嵌套 for-body 的代码保留在其原始位置，并允许在 for-body 内的多个点处轻松设置中断。

安东尼奥

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-14T08:45:14.297

安东尼奥的提议非常好。我在示例中使用它来解析文件列表中的一些 CSV 或 HTML 文件。（嵌套 for 循环）。第一次看解析文件列表，第二次解析每个文件的内容。分隔符是 ; 或者 /。

```
@dir /O /B j:\temp\*.txt > j:\temp\filelist.doc
@for /F "tokens=1" %%a in (j:\temp\filelist.doc) DO (
 @echo j:\temp\%%a
 @set ef=
 @for /F "delims=;/ tokens=1,2,3,4,5,6,7*" %%b in (j:\temp\%%a) DO @if not defined ef (
  @if %%e == CNAME (
   @echo Do something here
   @set ef=yes
  )
 )
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-16T05:10:48.553

`DEFINED`[可以出于多种原因](https://ss64.com/nt/set.html)行恶。我不建议使用它，除非您确切知道它是如何工作的以及所有潜在的用例。

> 避免在变量名中使用任何分隔符（空格、逗号等）是一种很好的做法，例如，如果变量名包含分隔符，IF DEFINED _variable 通常会失败。

一个更安全的答案，也不使用`EXIT`or `GOTO`：

```
@echo off

SETLOCAL ENABLEDELAYEDEXPANSION

Set time_to_exit=false

FOR /L %%O IN (1,1,3) DO (
    echo [  Outer  ] loop iteration %%O
    FOR /L %%I IN (1,1,3) DO (
        IF NOT "!time_to_exit!"=="true" (
            echo ]Inner[ loop iteration %%I
            IF "%%O"=="2" Set time_to_exit=true
        )
    )
) 
```

输出：

```
[  Outer  ] loop iteration 1
]Inner[ loop iteration 1
]Inner[ loop iteration 2
]Inner[ loop iteration 3
[  Outer  ] loop iteration 2
]Inner[ loop iteration 1
[  Outer  ] loop iteration 3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-04T06:23:39.863

欢迎来到 DOS BAT 及其所有地方性故障。最初 DOS BAT 不支持嵌套循环 _at _all；他们仍然不能完全正确地工作。为避免所有故障、怪异和不一致，请改用 Microsoft PowerShell。

您可以通过重组脚本以使用由“调用”语句调用的内部子例程来避免嵌套循环。使每个“for”都执行一个调用子例程的语句，而不是将动作放在内联块中。

一个密切相关的问题是，即使是顶级循环也似乎无法正常工作。那是因为 '( ... )' 便利结构在最初几年后被固定在 BAT 语言中，并且不能很好地与该语言的其余部分配合使用。特别是，当第一次进入块时，'( ... )' 中的 _everything 会被一次性替换。像 'if %NOMORE%==yes ...' 这样的构造行为不正常，因为 %NOMORE% 的值仅在输入块时被替换一次，_不是您每次执行时所期望的那样。因此，如果该值稍后被循环内部或外部的任何内容更改，则“if”测试将_看不到新值。

解决此问题的一种方法是笨拙地重组您的 BAT 文件，或者使用一堆“goto”，因此它不使用“（...）”，或者使用一堆对其他不需要的子例程的调用，或者两者兼而有之——这是 BAT wallahs 在引入块的语法便利之前多年所做的（伴随着奇怪的行为）。解决此问题的更好方法是使用“延迟扩展”（即“如果！NOMORE!==yes ...”而不是“如果 %NOMORE%==yes ...”）。[您的 Windows 版本必须支持延迟扩展，并且必须在您的 setlocal 语句中启用。]

* * *

由于新信息和对评论的回应，进行了大量编辑。（有关更多信息，请参阅第一条评论。）

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-28T13:25:56.450

你能提供更多关于你的要求的信息吗？同时，如果它符合您的要求，您可以尝试一下。如果您需要更多信息，请随时通知我。

```
@echo off
for %%a in (1,2,3) do ( 
for %%b in (4,5,6) do (
echo Breaking
goto Break 
)
)
:Break 
```

# java - 如果测试用例失败，Selenium Web 驱动程序无法关闭 Firefox 实例

> ID：14562363
> 
> 赞同：4
> 
> 时间：2013-01-28T12:46:02.033
> 
> 标签：java, junit4, selenium-webdriver

伙计们，我正在使用带有 selenium web 驱动程序 2.28 的 junit。问题是，如果我运行一个成功的测试用例，web 驱动器能够关闭 firefox 实例，但是当测试用例失败时，selenium web 驱动程序无法关闭 firefox。我正在使用带有 selenium-server-standalone-2.28.0.jar 的 FF 15.0.1。请回复谢谢萨希尔

```
private void startWebdriver() throws UIException{
    //2) Prevent re-use.
    if(UIHandlerWD.this.profile == null)
        throw new 
            UIException(
                UIException.Code.UI, 
                    "Webdriver instance cannot be instantiated."
            );              

    //3) Configure Selenium Webdriver.
    if (this.profile.browserType.equalsIgnoreCase("*firefox")){
        FirefoxProfile fProfile = new FirefoxProfile();

       // profile.SetPreference("network.http.phishy-userpass-length", 255);
        fProfile.setAcceptUntrustedCertificates(true);
        DesiredCapabilities dc = DesiredCapabilities.firefox();
        dc.setJavascriptEnabled(true);
        dc.setCapability(FirefoxDriver.PROFILE, fProfile);

        //this.webdriver = new FirefoxDriver(dc);
        this.webdriver = new FirefoxDriver(dc);
    }
    else if (this.profile.browserType=="INTERNETEXPLORER")
        this.webdriver = new InternetExplorerDriver();
    else
        throw new 
        UIException(
            UIException.Code.UI, 
                "Unknown browser type '" + this.profile.browserType +"'."
        );          

    //4) Start Webdriver.
    this.webdriver.get(this.profile.getURL().toString());
    this.webdriver.manage().timeouts().
    implicitlyWait(5, TimeUnit.SECONDS);
    this.webdriver.manage().timeouts().
    pageLoadTimeout(this.profile.timeout, TimeUnit.SECONDS);

}

void stopWebdriver() {
    if(this.webdriver != null){
        try{
        Thread.sleep(5000);
        }
    catch (Exception e) {
        // TODO: handle exception
    }
        this.webdriver.close();
    }
    this.webdriver = null;
    this.profile = null;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-04T22:06:54.863

添加`webdriver.quit()`到`@AfterClass`方法。

close() 将关闭当前活动窗口。如果当前活动窗口是最后一个窗口，它在功能上等同于执行 quit()。

然而，它确实需要有一个有效的活动会话才能做到这一点。如果您的测试失败，则该会话可能已死，因此当您调用 close() 时，它不知道将命令发送到何处并引发异常。

quit() 将结束所有会话并关闭所有客户端，它基本上是一个清理所有命令的命令。如果所有客户端/会话已经关闭/结束，它也不会抛出任何异常。

# python - 对两个 List 的操作

> ID：14562367
> 
> 赞同：7
> 
> 时间：2013-01-28T12:46:16.420
> 
> 标签：python, algorithm, list

让我从一些背景开始。

假设我有这个列表：

```
interactions = [ ['O1', 'O3'],
               ['O2', 'O5'],
               ['O8', 'O10']
               ['P3', 'P5'],
               ['P2', 'P19'],
               ['P1', 'P6'] ] 
```

列表中的每个条目（例如：）`O1, O3`是两个实体之间的交互（尽管我们在这里处理的所有内容都是字符串）。列表中有许多不同的实体。

我们还有以下列表：

```
similar = ['O1', 'P23'],
          ['O3', 'P50'],
          ['P2', 'O40'],
          ['P19', 'O22'] 
```

**其中每个条目是两个不同**实体之间的相似关系。

所以**O1**类似于**P23**并且**O3**类似于**P50**并且 [O1, O3] 交互因此交互 ['P23', 'P50'] 是一个转换的交互。

同样，**P2**与**O40**相似，**P19与****O22**相似，并且[P2, P19] 相互作用，因此相互作用 ['O40', 'O22'] 是转换后的相互作用。

转换后的交互将始终来自同一类型，例如：[PX, PX] 或 [OX, OX]。

## 代码

所以我编写了以下代码来生成这些关系转移：

```
from collections import defaultdict

interactions = [ ['O1', 'O3'],
                 ['O2', 'O5'],
                 ['O8', 'O10']
                 ['P3', 'P5'],
                 ['P2', 'P19'],
                 ['P1', 'P6'] ]

similar = [ ['O1', 'H33'],
            ['O6', 'O9'],
            ['O4', 'H1'],
            ['O2', 'H12'] ]

def list_of_lists_to_dict(list_of_lists):
  d = defaultdict(list)
  for sublist in list_of_lists:
    d[sublist[0]].append(sublist[1])
    d[sublist[1]].append(sublist[0])
  return d

interactions_dict = list_of_lists_to_dict(interactions)
similar_dict = list_of_lists_to_dict(similar)

for key, values in interactions_dict.items():
  print "{0} interacts with: {1}".format(key, ', '.join(values))
    if key in similar_dict:
      print " {0} is similar to: {1}".format(key, ', '.join(similar_dict[key]))
      forward = True
  for value in values:
    if value in similar_dict:
      print " {0} is similar to: {1}".format(value, ', '.join(similar_dict[value]))
      reverse = True
      if forward and reverse:
        print "     thus [{0}, {1}] interact!".format(', '.join(similar_dict[key]), 
         ',  '.join(similar_dict[value]))
  forward = reverse = False 
```

我的尝试确实产生了正确的输出，但它也产生了不需要的输出。例如，有时它会在不同类型的实体之间生成输出：`O1, P1`，以及完全相同的实体之间：`O1, O1`。它还以不同的形式输出重复的结果，例如：`O1, P1`, `P1, O1`- 两者的意思相同，所以我们只想要这个条目一次。所有这些都是不受欢迎的行为。

所以我的问题是，我该如何重组我的尝试来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T17:13:28.813

我对整体算法有一些建议：

*   保留所有相似关系的字典，例如 O1:P23 和 P23:O1 都可以在字典中。
*   在找到转换之前，请检查以确保交互的两个部分都可以转换，例如 O1 和 O3 必须都是字典中的键
*   这应该防止任何转换被列为 O 和 P 一起，你说这是不需要的输出。
*   如果您认为这将是一个问题，您还可以保留结果字典以检查重复项。

JF Sebastian 的回答解决了其中一些问题，但我认为您应该注意原始字典的构造方式，这将使得出有意义的结果变得容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:00:53.993

如果相似关系既不是对称的也不是传递的：

```
from collections import defaultdict
from itertools import product

# entity -> similar entities
d = defaultdict(list) # use `set` if `similar` has duplicate entries
for k, v in similar:
    d[k].append(v)

for a, b in interactions:
    for x, y in product(d[a], d[b]): 
       # a, b interact; a is similar to x, b is similar to y
       #note: filter undesired x, y interactions here
       print x, y # transformed interaction 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T11:05:56.040

如果您将列表转换为字典，那么您可以轻松匹配字典的键并检索这些键的值。

# javascript - 为什么 Internet Explorer 将我的内容推送到页面的中间，好像在上面创建了一个巨大的边距？

> ID：14562369
> 
> 赞同：0
> 
> 时间：2013-01-28T12:46:20.400
> 
> 标签：javascript, internet-explorer, css-float, double, margin

我创建了一个将在 .aspx 模板中使用的 html 页面。我使用的 html 代码非常基本，包括一个电子邮件订阅表单。表单及其代码直接取自 Mailchimp，因为它们是我正在使用的电子邮件客户端。问题是该页面在除 Internet Explorer 之外的所有浏览器中都能正常加载，这会将我的整个 html 代码推到页面下方。我有一个包含在表单（jquery-1.8.2.min.js）中的 jquery 文件，我不确定这是否干扰了我的 html 代码，或者它是否是我没有为 Internet 正确指定的代码本身的问题探险家。我也不确定它是否与 Mailchimp 表单有关。我已经尽一切可能解决这个问题，但似乎没有任何效果。如果有人可以提供帮助或有任何想法，我将不胜感激。请在下面查看我的代码和屏幕截图。谢谢，加里

这是我的代码：

HTML

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> <head> <meta
 http-equiv="Content-Type" content="text/html; charset=UTF-8" /> <link
 href="page1.css" rel="stylesheet" type="text/css" /> </form>

      <script type="text/javascript" src="js/jquery-1.8.2.min.js">                 
      </script>
 </head>

 <body> <div id="_wrapper">

         <div id="_formsection">

            <h1>Welcome</h1>
             <p>Subscribe for a monthly discount code</p>

         <!-- Begin MailChimp Signup Form-->        
         <div id="mc_embed_signup">             
         <form action="form_name_goes_here"

              method="post" id="mc-embedded-subscribe-form" 
              name="mc-embedded-subscribe-form" 
              class="validate" target="_blank" novalidate />            
             <div class="mc-field-group">           
            <label for="mce-EMAIL">
           <span class="asterisk"></span></label>           
input type="email" value="Enter
 your email address" name="EMAIL" class="required email" 
             id="mce-EMAIL" />          </div>          <div id="mce-responses" class="clear">          <div class="response" id="mce-error-response"
 style="display:none"></div>            <div class="response"
 id="mce-success-response" style="display:none"></div>          </div>  
            <div class="clear"><input type="submit" value="Subscribe" name="subscribe" 
             id="mailsubmit" class="button"></div>
             </form>
                    </div>      <!--End mc_embed_signup-->

         </div><!--end form section-->

        <div id="grid_section">

            <div class="section1">
                <a href="">
                <img src="images/section1_hydrogel.jpg" 
                alt="PowerBar HydroGel Image" />
                <h4>PowerBar HydroGel Coming Soon</h4>
                <p>Click here to register for updates</p></a>
            </div>

            <div class="section2">
                <a href="">
                <img src="images/section2_action_camera.jpg" 
                alt="Rollei Bullet HD Action Camera Image" />
                <h4>Rollei Bullet HD Action Camera</h4>
                <p>Get 20% off the Rollei Bullet HD and start recording your adventures</p></a>
            </div>

            <div class="section3">
            <a href="">
            <img src="images/section3_gp4000.jpg" 
            alt="GP4000S Tyre Sale Image" />
            <h4>GP4000S Tyre Sale</h4>
            <p>Was €51.99 but you can get it now for €39.99 with free delivery</p></a>
            </div>

             <div class="section4">
                <a href="">
                <img src="images/section4_streetracer.jpg" 
                alt="BMC Streetracer Image" />
                <h4>BMC Streetracer for only €999.99</h4>
                <p>Great new year offer for you to buy this quality manufactured Swiss frame for only
                  €999.99</p></a>
            </div>

             <div class="section5">
                <a href="" target="_blank">
                <img src="images/section5_facebook.jpg" 
                 alt="Facebook Image" />
                <h4>Discounts on Facebook</h4>
                <p>We give out regular discounts on social media so follow us there to get the 
                 updates</p></a>
            </div>

             <div class="section6">
                <a href="">
                <img src="images/section6_isoactive.jpg" 
                 alt="Facebook Image" />
                <h4>IsoActive Sports Drink</h4>
                <p>This Isotonic Sports Drink for Maximum Hydration was €26.99 and you can get it now
                  for only €24.99</p></a>
            </div>

        </div><!--end grid section-->

    </div><!--end wrapper-->     </body>
 </html> 
```

这是我的 CSS

```
@charset "UTF-8"; /* CSS Document */

      body { font-family:"Helvetica Neue",Arial,Sans-serif; }

      #_wrapper{ width: 620px; 
                 overflow: hidden; 
                 margin: 0 auto; }

      /* ------------Form Section-------------- */
      #_formsection{ width: 620px;  
                     height: 350px;     
                     margin: 0 auto;    
                     background-image: url(images/background1.jpg);     
                    background-repeat:no-repeat;}

      #_formsection img{ margin: 10px 0 0 0;    
                         float: left;   
                         padding-left: 20px; }

      #_formsection h1{ margin: 30px 0 0 0;     
                        float: right;   
                        font-size: 20px;    
                        padding-right: 280px;   
                        color: #FFF;    
                        text-shadow: #666 2px 2px 1px; }

      #_formsection p{ clear: both;     
                       margin: 100px 0 10px 0;  
                       float: left;     
                       padding-left: 55px;  
                       color: #FFF;     
                       text-shadow: #666 2px 2px 1px;
                  display: inline; }

     #mc_embed_signup{ clear: both;     
                       float: left;     
                       margin-right: 0px;   
                       padding-left: 50px;  
                       width: 290px; }

     .mc-field-group{ width: 200px;     
                      float: left;  
                      overflow: hidden; }

     input#mce-EMAIL{ width: 185px;     
                      height: 25px;
                      font-size: 10px;  
                      padding-left: 10px;
                      color: #999;
                      letter-spacing: -0.02em;
                      text-shadow: 0px 1px 0px #fff;
                      background: -webkit-gradient(linear, left top, left bottom, from(#e1e1e1), to(#ffffff));
                      background: -moz-linear-gradient(top,  #e1e1e1,  #ffffff);
                      -webkit-border-radius: 3px;
                      -moz-border-radius: 3px;
                      border-radius: 3px;
                      border: 1px solid #CCC;   
                      outline:none;
                      transition: all 0.25s ease-in-out;
                      -webkit-transition: all 0.25s ease-in-out;
                      -moz-transition: all 0.25s ease-in-out;
                      border-radius:3px;
                      -webkit-border-radius:3px;
                      -moz-border-radius:3px; }

                  input#mce-EMAIL:focus {
                      box-shadow: 0 0 3px (255, 140, 0, 1);
                      -webkit-box-shadow: 0 0 3px rgba(255, 140, 0, 1); 
                      -moz-box-shadow: 0 0 3px rgba(255, 140, 0, 1);
                      border:1px solid rgba(255,140,0, 0.8);  }

                 #mailsubmit { color: #999;     
                     border: 1px solid #CCC;    
                     font-size: 10px;   
                     letter-spacing: -0.02em;
                     text-shadow: 0px 1px 0px #fff;
                     outline: none;
                     background: -webkit-gradient(linear, left top, left bottom, from(#e1e1e1), to(#ffffff));
                     background: -moz-linear-gradient(top,  #e1e1e1,  #ffffff);
                     -webkit-border-radius: 3px;
                     -moz-border-radius: 3px;
                     border-radius: 3px;    
                     width: 90px;   
                     float: right;  
                     height: 29px;  
                     cursor: pointer; }

              /* ------------End Form Section-------------- */

              /* ------------Grid Section-------------- */
                #grid_section{ clear: both;     
                               width: 620px;    
                               margin: 0 auto;  
                               margin-top: 20px; }

                   .section1 { border: 1px solid #CCC;  
                               float: left;     
                               width: 200px;
                          height: 250px;    
                               margin-right: 7px;   
                               display:inline; }

               .section1 img{  margin-top: 1px;     
                               margin-left: 1px;    
                               margin-right: 1px; }

                .section1 h4{  margin-top: 5px;     
                               margin-bottom: 0px;  
                               margin-left: 5px;    
                               color: #666;     
                               font-size: 16px;     
                               font-weight: bold; }

                 .section1 p{  margin-top: 5px;     
                               margin-left: 5px;    
                               color: #666;
                          font-size: 12px; }

                 .section1 a{ text-decoration: none;    
                              color: #666; }

                 .section1 a:hover{ text-decoration: none; }

                 .section2 { border: 1px solid #CCC;    
                             float: left;   
                             width: 200px;
                        height: 250px;  
                             margin-right: 7px;     
                             display:inline; }

                 .section2 img{ margin-top: 1px;    
                                margin-left: 1px;   
                                margin-right: 1px; }

                  .section2 h4{ margin-top: 5px;    
                                margin-bottom: 0px;     
                                margin-left: 5px;   
                                color: #666;    
                                font-size: 16px;    
                                font-weight: bold; }

                   .section2 p{ margin-top: 5px;    
                                margin-left: 5px;   
                                color: #666;
                           font-size: 12px; }

                   .section2 a{ text-decoration: none;  
                                color: #666; }

             .section2 a:hover{ text-decoration: none; }

             .section3 { border: 1px solid #CCC;    
                         float: right;  
                         width: 200px;
                            height: 250px;  
                         display:inline; }

            .section3 img{  
                        margin-top: 1px;    
                        margin-left: 1px;   
                        margin-right: 1px; }

            .section3 h4{ margin-top: 5px;
                     margin-bottom: 0px;    
                         margin-left: 5px;  
                          color: #666;   
                          font-size: 16px;  
                          font-weight: bold; }

             .section3 p{ margin-top: 5px;  
                          margin-left: 5px;     
                          color: #666;
                     font-size: 12px; }

             .section3 a{ text-decoration: none;    
                          color: #666; }

       .section3 a:hover{ text-decoration: none; }

              .section4 { border: 1px solid #CCC;   
                          float: left;  
                          width: 200px;
                     height: 250px;     
                          margin: 7px 7px 0 0;  
                          display:inline;   
                          overflow: hidden; }

           .section4 img{ margin-top: 1px;  
                          margin-left: 1px;     
                          margin-right: 1px; }

            .section4 h4{ margin-top: 5px;  
                          margin-bottom: 0px;   
                          margin-left: 5px;     
                          color: #666;  
                          font-size: 16px;  
                          font-weight: bold; }

             .section4 p{ margin-top: 5px;  
                          margin-left: 5px;     
                          color: #666;
                     font-size: 12px; }

             .section4 a{ text-decoration: none;    
                          color: #666; }

       .section4 a:hover{ text-decoration: none; }

              .section5 { border: 1px solid #CCC;   
                          float: left;  
                          width: 200px;
                     height: 250px; 
                   margin: 7px 7px 0 0;     
                          display:inline;   
                          overflow: hidden; }

          .section5 img{ margin-top: 1px;   
                         margin-left: 1px; 
                  margin-right: 1px; }

          .section5 h4{ margin-top: 5px;    
                        margin-bottom: 0px; 
                 margin-left: 5px; 
                 color: #666;   
                        font-size: 16px;    
                        font-weight: bold; }

           .section5 p{ margin-top: 5px;    
                        margin-left: 5px;   
                        color: #666;
                        font-size: 12px; }

           .section5 a{ text-decoration: none;  
                        color: #666; }

     .section5 a:hover{ text-decoration: none; }

            .section6 { border: 1px solid #CCC;     
                        float: right;   
                        width: 200px;
                   height: 250px; 
                 margin: 7px 0 0 0;     
                        display:inline;     
                        overflow: hidden; }

         .section6 img{ margin-top: 1px;    
                        margin-left: 1px;   
                        margin-right: 1px; }

          .section6 h4{ margin-top: 5px; 
                 margin-bottom: 0px;    
                        margin-left: 5px; 
                 color: #666; 
                 font-size: 16px;   
                        font-weight: bold; }

           .section6 p{ margin-top: 5px;    
                        margin-left: 5px;   
                        color: #666;
                   font-size: 12px; }

           .section6 a{ text-decoration: none; 
                 color: #666; }

     .section6 a:hover{ text-decoration: none; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:03:47.450

不确定它是否是您粘贴到 stackoverflow 中的方式，但您需要缩进您的内容。您需要为文件大小节省额外开销的日子已经一去不复返了。使用 notepad++ 可以帮助您很快找到此错误，您使用什么文件编辑器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:55:09.240

一些元素来自此代码：

```
<div id="mc_embed_signup">            
  <form action="form_name_goes_here"

     method="post" id="mc-embedded-subscribe-form" 
       name="mc-embedded-subscribe-form" 
     class="validate" target="_blank" novalidate />           
      <div class="mc-field-group">          
     <label for="mce-EMAIL">
    <span class="asterisk"></span></label> 
```

关闭 mc-field-group 上方的这个 DIV。还没有关闭表格，最好仔细检查注册表单代码

```
</div><!--end form section--> 
```

# sql - 在调试带有 SQL 语句到 V_$UNDOSTAT 的 Shell 脚本时出错

> ID：14562377
> 
> 赞同：0
> 
> 时间：2013-01-28T12:46:49.857
> 
> 标签：sql, linux, oracle, shell

我想每 6 小时将 UNDO 表空间的统计信息存储在一个表中。我创建了简单的表：

```
CREATE TABLE SYS.TB_UNDOSTAT (
 MAX_UNDOBLKS NUMBER,
 MAX_QUERY_LENGTH NUMBER,
 MAX_QUERY_ID VARCHAR2(13),
 DATE_OF_STAT DATE,
 DMY_OF_STAT VARCHAR2(30),
 TIME_OF_STAT VARCHAR2(30)); 
```

之后，我创建了 Oracle 外部作业：

```
BEGIN
   DBMS_SCHEDULER.CREATE_JOB
        (job_name=>'ACCUMULATE_UNDOSTAT',
        repeat_interval =>'FREQ=DAILY; BYHOUR=05,11,17,23',
        job_type=>'EXECUTABLE',
        job_action=>'/home/oracle/scripts/UNDOSTAT/accumulate_undostat_111.bsh',
        enabled =>TRUE,
        auto_drop=>FALSE,
        comments=>'Take accumulate statistics from V$UNDOSTAT to 
        SYS.TB_UNDOSTAT one time through 6 hours On 111 Server'
        );
END; 
```

accumulate_undostat_111.bsh 文件内容为：

```
#!/bin/bash
export ORACLE_HOME=/u01/home/oracle/product/11.2.0/db_1
export ORACLE_SID=parustest
export PATH=$ORACLE_HOME/bin:$PATH 
sqlplus -s << EOF
/ as sysdba
INSERT INTO FGA_OWNER.TB_UNDOSTAT (MAX_UNDOBLKS, MAX_QUERY_LENGTH,
MAX_QUERY_ID, DATE_OF_STAT, DMY_OF_STAT, TIME_OF_STAT)
SELECT max(undoblks), max(maxquerylen), maxqueryid, sysdate, to_char(sysdate,'DD.MM.YYYY'), 
to_char(sysdate,'HH24:MI:SS') FROM SYS.V_$UNDOSTAT GROUP BY maxqueryid;
COMMIT;
exit;
EOF
exit 0 
```

作业创建没有任何问题。已授予所有必要的权限。但是当我调试我的 shell 脚本时，我遇到了一些问题：

```
[oracle@parustest111 UNDOSTAT]$ bash -o xtrace accumulate_undostat_111.bsh            + export ORACLE_HOME=/u01/home/oracle/product/11.2.0/db_1
+ ORACLE_HOME=/u01/home/oracle/product/11.2.0/db_1
+ export ORACLE_SID=parustest
+ ORACLE_SID=parustest
+ export PATH=/u01/home/oracle/product/11.2.0/db_1/bin:/u01/home/oracle/product/11.2.0/db_1/bin:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/home/oracle/bin
+ PATH=/u01/home/oracle/product/11.2.0/db_1/bin:/u01/home/oracle/product/11.2.0/db_1/bin:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/home/oracle/bin
+ sqlplus -s
to_char(sysdate,'HH24:MI:SS') FROM V_ GROUP BY maxqueryid
                                   *
ERROR at line 4:
ORA-00942: table or view does not exist

Elapsed: 00:00:00.00

Commit complete.

Elapsed: 00:00:00.00
+ exit 0
[oracle@parustest111 UNDOSTAT]$ 
```

有人可以解释并帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T12:55:23.763

在 unix shell 中，`$`是变量的开始，所以你的语句

```
FROM SYS.V_$UNDOSTAT 
```

由 shell 解释，以便`$UNDOSTAT`查找名为`UNDOSTAT`. 为了防止这种情况，你必须逃避声明

```
FROM SYS.V_\$UNDOSTAT 
```

例如：

```
$ cat foo.bash
#!/bin/bash

sqlplus /<<EOF
select count(*) from v$session;
EOF

$ ./foo.bash

SQL*Plus: Release 11.2.0.2.0 Production on Mon Jan 28 12:56:43 2013

Copyright (c) 1982, 2010, Oracle.  All rights reserved.

Connected to:
Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - 64bit Production
With the Partitioning, Real Application Clusters, OLAP, Data Mining
and Real Application Testing options

SQL> select count(*) from v
                     *
ERROR at line 1:
ORA-00942: table or view does not exist 
```

与：

```
$ cat foo2.bash
#!/bin/bash

sqlplus /<<EOF
select count(*) from v\$session;
EOF

$ ./foo2.bash

SQL*Plus: Release 11.2.0.2.0 Production on Mon Jan 28 12:56:49 2013

Copyright (c) 1982, 2010, Oracle.  All rights reserved.

Connected to:
Oracle Database 10g Enterprise Edition Release 10.2.0.4.0 - 64bit Production
With the Partitioning, Real Application Clusters, OLAP, Data Mining
and Real Application Testing options

SQL>
  COUNT(*)
----------
       184 
```

更好的是，如果我是你，我会让 SQL 文件分开，然后调用它

```
sqlplus -s << EOF
/ as sysdba
@yoursql.sql
COMMIT;
exit;
EOF 
```

该`yoursql.sql`文件刚刚包含您所有的`SQL`. 那就不用担心逃逸的东西了。

# java - Quartz JobDataMap 不适用于非原始类型

> ID：14562379
> 
> 赞同：4
> 
> 时间：2013-01-28T12:47:01.217
> 
> 标签：java, quartz-scheduler

**Quartz JobDataMap**有以下问题。我希望当使用简单的 Quartz **Job**并将非原始对象（例如**StringBuilder**的实例）传递给**JobDateMap**时，应该始终使用我放置的对象的不同副本来调用方法*execute （来自我的工作）。*不幸的是，我总是得到放入**JobDateMap**的对象实例（就像它是 StatefulJob 一样）。

在下面的示例中，我希望在每次调用中都得到一个 '*'，而我每次都得到一个 '*'。

```
public class MyJob implements Job {

    public static void main(String[] args) throws SchedulerException {

        SchedulerFactory schedFact = new StdSchedulerFactory();
        Scheduler sched = schedFact.getScheduler();

        JobDetail jobDetail = new JobDetail("job", Scheduler.DEFAULT_GROUP, MyJob.class);
        jobDetail.getJobDataMap().put("param", new StringBuilder());

        Trigger trigger = TriggerUtils.makeImmediateTrigger("trigger", 10, 100);
        trigger.setGroup(Scheduler.DEFAULT_GROUP);

        sched.scheduleJob(jobDetail, trigger);
        sched.start();

        try {
            Thread.sleep(1000L);
        } catch (Exception e) {}

        sched.shutdown(true);

    }

    @Override
    public void execute(JobExecutionContext context) throws JobExecutionException {
        StringBuilder sb = (StringBuilder) context.getMergedJobDataMap().get("param");
        sb.append("*");
        System.out.println(sb.toString());

    }
} 
```

我想，我错过了关于 Quartz 是如何工作的一些东西。有谁知道什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-20T18:23:39.807

Quartz 中还有其他工具可以让您以更优化的方式传递非基元。查看 SchedulerContext 类功能。

```
using System;
using System.Text;
using Quartz;
using Quartz.Impl;

namespace QuartzNET.Samples
{
    class Program
    {
        static void Main(string[] args)
        {
            // Create RAMJobStore instance
            DirectSchedulerFactory.Instance.CreateVolatileScheduler(1);
            ISchedulerFactory factory = DirectSchedulerFactory.Instance;

            // Get scheduler and add object
            IScheduler scheduler = factory.GetScheduler();
            scheduler.Context.Add("History", new StringBuilder("Runtime History: "));

            // Create job and trigger
            IJobDetail job = JobBuilder.Create<MyJob>()
                                       .WithIdentity("MyJob")
                                       .Build();
            ITrigger trigger = TriggerBuilder.Create()
                                             .WithIdentity("Trigger")
                                             .StartNow()
                                             .WithSimpleSchedule(x => x
                                                .WithInterval(TimeSpan.FromMinutes(1))
                                                .RepeatForever())
                                             .Build();

            // Run it all
            scheduler.Start();
            scheduler.ScheduleJob(job, trigger);
        }
    }

    class MyJob : IJob
    {
        public void Execute(IJobExecutionContext context)
        {
            var history = context.Scheduler.Context["History"] as StringBuilder;
            history.AppendLine(context.NextFireTimeUtc.ToString());
            Console.WriteLine(context.NextFireTimeUtc);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-01T19:07:23.670

> “仅在 JobDataMap 中存储原始数据类型（包括字符串）以避免短期和长期的数据序列化问题。”

来源：[http ://www.quartz-scheduler.org/documentation/2.3.1-SNAPSHOT/best-practices.html#jobdatamap-tips](http://www.quartz-scheduler.org/documentation/2.3.1-SNAPSHOT/best-practices.html#jobdatamap-tips)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-06-29T18:52:44.547

根据[JobDataMap 的最佳实践](http://www.quartz-scheduler.org/documentation/2.4.0-SNAPSHOT/best-practices.html#only-store-primitive-data-types-including-strings-in-the-jobdatamap)，我们不应该将复杂的对象放入 JobDataMap 以避免短期或长期问题。（可能存在序列化问题，当然不能通过修改 Complex 对象类来实现 Serializable 来解决。）

**解决方法：** 将复杂对象作为**Json 字符串**传递，并在从 JobDataMap 中检索到它们后对其进行反序列化。

例如，

```
class OrderLine {
        private long orderLineId;
        private Item item;
    }
    class Item {
        private long itemId;
        private String itemName;
   }
//Putting OrderLine object in JobDataMap
    jobDetail.getJobDataMap().put("complexData", new Gson().toJson(new OrderLine()));
// Retrieving data from JobDataMap
    String complexDataString = 
        context.getJobDetail().getJobDataMap().getString("complexData");
    OrderLine orderLine = new Gson().fromJson(complexDataString, OrderLine.class); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-15T17:17:44.903

我在我们的项目中遇到了同样的错误，但我意识到我有一个不同的设置阻止了它。如果您配置它，您可以使用非“属性相关”的对象。您正在石英设置的配置文件中查找此值。

```
<add key="quartz.jobStore.useProperties" value="false" /> 
```

False 允许您使用除属性之外的其他对象。一旦我改变了这个（我的是真的），它就开始为我工作了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-09T20:01:38.070

我使用 JSON 将复杂对象发送到作业。它不是很聪明，但适合我的目的。

在您的应用程序中：

```
jobDetail.getJobDataMap().put("YOUR_PARAM_NAME", yourObject.toJson()); 
```

在你的工作中：

```
JobDataMap dataMap = context.getJobDetail().getJobDataMap();
String jsonObject = dataMap.getString("YOUR_PARAM_NAME");
YourClass yourObject = YourClass.fromJson(jsonObject); 
```

# iphone - 如何在 PSPDFKit 中添加按钮操作

> ID：14562382
> 
> 赞同：0
> 
> 时间：2013-01-28T12:47:10.253
> 
> 标签：iphone, ios, objective-c, pdf, pspdfkit

我正在使用 PSPDFKit 并想知道如何以编程方式在同一页面上添加按钮（比如 pdf 的第 21 页），当我单击该按钮时，我应该转到另一个视图控制器，在那里我将根据页码获取数据。

例如，我在所有页面上都有按钮，如果我单击第 21 页按钮 1，我应该被重定向到新的视图控制器，并且我将有标签，上面写着第 21 页。

任何想法/建议如何完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:13:45.417

查看 PSPDFCatalog 中的 PSCButtonPDFViewController 以了解如何将按钮添加到 PSPDFPageView。然后很容易添加一个自定义目标来执行您想要的操作。

# nhibernate - 如何用 NHibernate 正确定义值对象？

> ID：14562388
> 
> 赞同：1
> 
> 时间：2013-01-28T12:47:40.203
> 
> 标签：nhibernate, fluent-nhibernate

我想按组件查询 NHibernate Linq。该组件包含一个 Date 属性，该属性**未包含**在**覆盖 Equals**中。我只想在要求相等时跳过 Date 属性。目前在**Address 类的 ctor 中设置了 Date 属性**，因此查询将返回**0 行**。我知道这打破了值对象的概念，但我只想知道为什么下面的代码不能正常工作。

**THE QUERY** *如您所见，日期属性在查询中*

```
select user0_.Id     as Id0_,
       user0_.Name   as Name0_,
       user0_.Number as Number0_,
       user0_.Date   as Date0_
from   test1 user0_
where  (user0_.Number = 1 /* @p0 */
        and user0_.Date = '2013-01-28T14:29:47.00' /* @p1 */) 
```

**主要的**

```
class Program
    {
        private static ISessionFactory _sessionFactory;

        private static void CreateSessionFactory()
        {
            FluentConfiguration config = Fluently
                .Configure(new Configuration().Configure())
                .Mappings(m => m.FluentMappings.AddFromAssemblyOf<UserMap>());
            new SchemaExport(config.BuildConfiguration()).Create(false, true);
            _sessionFactory = config.BuildSessionFactory();
        }

        [STAThread]
        static void Main(string[] args)
        {
            CreateSessionFactory();

            using (var session = _sessionFactory.OpenSession())
            using (var tx = session.BeginTransaction())
            {
                var user = new User()
                {
                    Name = "Nik",
                    Address = new Address(1)
                };
                session.Save(user);
                tx.Commit();
            }

            using (var session = _sessionFactory.OpenSession())
            using (var tx = session.BeginTransaction())
            {
                session.Query<User>().Where(x => x.Address == new Address(1)).Single();
                tx.Commit();
            }
        }
    } 
```

**类和映射**

```
public class Address : IEquatable<Address>, IEqualityComparer<Address>
    {
        protected Address() { }

        public Address(int number)
        {
            Number = number;
            Date = DateTime.Now;
        }

        public virtual int Number { get; protected set; }
        public virtual DateTime Date { get; protected set; }

        public override bool Equals(object obj)
        {
            return Number == ((Address)obj).Number;
        }

        public override int GetHashCode()
        {
            return Number.GetHashCode();
        }

        public bool Equals(Address other)
        {
            return Number == other.Number;
        }

        public bool Equals(Address x, Address y)
        {
            return x.Number == y.Number;
        }

        public int GetHashCode(Address obj)
        {
            return obj.GetHashCode();
        }
    }

    public class User
    {
        public virtual Guid Id { get; set; }
        public virtual string Name { get; set; }
        public virtual Address Address { get; set; }
    }

    public class UserMap : ClassMap<User>
    {
        public UserMap()
        {
            Table("test1");
            Id(x => x.Id).GeneratedBy.GuidNative();
            Map(x => x.Name);
            Component(x => x.Address, cm =>
            {
                cm.Map(x => x.Number);
                cm.Map(x => x.Date);
            });
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:04:51.970

您已将地址映射为组件。因此，当您要求 NHibernate 将 user.Address 与某个 Address 实例进行比较时，它会比较每个属性。NHibernate 不会分析编译后的代码来确定 Equals() 方法中使用了哪些属性。

代码工作正常。

您可以编写查询来分别比较每个属性，而不是比较整个地址。或者尝试重新思考设计，使 Address 成为真正的价值对象。

# gwt - GWT 中的文件处理（在服务器端）

> ID：14562389
> 
> 赞同：0
> 
> 时间：2013-01-28T12:47:42.520
> 
> 标签：gwt

我对 gwt 文件处理有一些疑问。

1.  如何在 gwt 中进行文件处理（在服务器端）。如何创建简单的文件。我的意思是哪个类特别用于创建和处理它？

2.  文件在哪里创建。它是在服务器包下还是其他地方？

3.  如何解决序列化和序列化问题。??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:00:54.773

GWT 是一种客户端技术。它与服务器无关（也可以仅用于客户端，例如移动应用、Chrome 应用、浏览器扩展）。GWT-RPC 和 RequestFactory 默认使用 Java servlet（不排除在其他语言/技术中实现 RequestFactory），但在其他方面没有要求或限制。

所以，服务器端，在大多数情况下，它只是 Java，并且取决于您的部署目标（例如 AppEngine 限制您可以做什么，servlet 容器也可以有安全策略，当然您依赖于授权在文件系统级别）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:32:10.647

由于 GWT 是一种纯客户端技术，因此您拥有所有可能的选项，例如纯 Servlet。您在选择上传方法方面不受任何限制。

但是，有许多开源项目可以使用进度条和多个文件上传等不错的功能。这些也与一些 GWT 小部件集成在一起。检查这个项目，例如[http://code.google.com/p/gwtupload/](http://code.google.com/p/gwtupload/)

# javascript - 如何将缩放的图像保留在边界框中

> ID：14562391
> 
> 赞同：1
> 
> 时间：2013-01-28T12:47:52.620
> 
> 标签：javascript, jquery, jquery-ui, jquery-slider, jquery-draggable

我使用 jQuery 和 jQuery UI 来缩放图像。有一个固定大小的容器 div，然后是一个比该容器大得多的图像，可在该容器内拖动。

下面的滑块控制图像的缩放级别，这很好用。我的问题是，当缩小图像的大小时，如果它被拖到靠近边界容器的边缘，它应该捕捉到该边缘并从剩余的边缘缩放。我无法让它工作。

图像通过边缘并继续按比例缩小。

您可以通过缩放图像、将顶部移动到靠近容器边缘然后再向下缩放来查看行为。

任何帮助将不胜感激，代码在这里 - [http://jsbin.com/egivat/5/edit](http://jsbin.com/egivat/5/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:28:02.627

任何动画都可以在一个固定点上完成检查这个链接

[“CSS3”上的动画旋转](https://stackoverflow.com/questions/11154540/animate-rotation-on-css3)

codeMonkey 给出的答案可能对你有用！

# php - 了解异或 PHP

> ID：14562392
> 
> 赞同：1
> 
> 时间：2013-01-28T12:47:53.847
> 
> 标签：php, xor

我正在我的程序中编写部分来更新用户，并且有密码和确认密码。我不想对数据库中的密码字段做任何事情，除非他们填写了这些字段。

所以我有错误检查：

```
if(($sql['password']!="") && ($sql['cpassword']!=""))
            {
                if($sql['password'] == $sql['cpassword'])
                {
//update
} 
```

}

但是，如果他们只填写了一个密码字段，我想写一个快速行来抛出错误消息。所以我想：

```
if($sql['password'] ^ $sql['cpassword']) 
            {
                echo You must fill out <i>both</i> password fields and they <i>must</i> match.";
            } 
```

会做，但似乎没有。然后我添加了一个 NOT 运算符！，这似乎工作得很好，但是如果两个字段都*没有*，我仍然会收到错误消息:(

从我可以从[这个](https://stackoverflow.com/a/4749620/1445985)答案中看到的逻辑来看，简单的 XOR 似乎可以工作。但它没有，有人可以向我解释为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:32:32.533

XOR 当然不是你想要的。

正如大卫所说，如果值不同，异或将返回“真”结果，但是当您对两个字符串进行异或运算时，异或运算仅在最短字符串的位置完成。

例子

`'AAAA' ^ 'AAAA'`这将返回一个空字符串（假等效值），因为值相同。

`'AAAA' ^ 'bbbb'`这将返回一个非空字符串（真等效值）..

`'AAAA' ^ 'AAAAbbbb'`这将返回一个空字符串（假等效值），即使字符串不同。这是因为运算结果只考虑了前 4 个字符。

在 Sandy Lee 的例子`(bool)$string`中并没有真正的帮助。

`(bool)'0'`=假

`(bool)'1'`= 真

这不会告诉您字符串是否为空。它只是为您提供字符串的布尔等效值。

这里根本不需要使用 XOR。这不是工作的正确工具。也不需要尝试做任何花哨的事情，简单的工具可以完美地工作。

```
$password = trim($password);
$confirm = trim($confirm);

if (!$password || !$confirm) {
    // One of the fields was not completed.
}
elseif ($password !== $confirm) {
    // Fields did not match
}
else {
    // Update password
} 
```

# python - 使用 Flask 和 PyMongo

> ID：14562395
> 
> 赞同：2
> 
> 时间：2013-01-28T12:47:56.683
> 
> 标签：python, mongodb, flask

我有 Flask 应用程序，它看起来像这样：

```
from flask import Flask
app = Flask(__name__)
from pymongo import MongoClient

def get_db():
    c = MongoClient()
    return c.mydb

@app.route("/")
def hello():
    db = get_db()
    db.foo.find_one(...)
    ...

if __name__ == "__main__":
    app.run() 
```

似乎它工作正常。但我不确定一件事。我在每个视图调用中创建一个 MongoClient 实例（并连接到 db）。但是我应该关闭连接吗？

也许我应该在每次视图调用后关闭连接，如下所示：

```
@app.before_request
def before_request():
    g.db = get_db()

@app.teardown_request
def teardown_request(exception):
    g.db.close() 
```

你怎么处理这些东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T16:25:00.053

[`MongoClient`](http://api.mongodb.org/python/current/api/pymongo/mongo_client.html#pymongo.mongo_client.MongoClient)内置了连接池支持，默认大小为 10。因此，您应该创建一个`MongoClient`保持打开状态并由所有视图调用共享的实例。

# ruby - ruby 从正则表达式中删除可变长度字符串，留下连字符

> ID：14562402
> 
> 赞同：0
> 
> 时间：2013-01-28T12:48:28.860
> 
> 标签：ruby

我有一个这样的字符串：“im@ -33.870816,151.203654” 我想提取包括连字符在内的两个数字。我试过这个：

```
mystring = "im@ -33.870816,151.203654"
/\D*(\-*\d+\.\d+),(\-*\d+\.\d+)/.match(mystring) 
```

这给了我：

```
33.870816,151.203654 
```

我如何获得连字符？

我需要在红宝石中做到这一点

编辑：我应该澄清一下，“im@”只是一个例子，数字之前可以有任何字符集。这些数字大多用逗号组成。我在使用连字符 (-) 时遇到问题

Edit2：请注意，这两个数字是纬度，经度。这种模式大多是固定的。但是，理论上，前面的字符串可以是任意的。我不希望它没有。或连字符，但你永远不知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:01:53.947

这个怎么样？

```
arr = "im@ -33.2222,151.200".split(/[, ]/)[1..-1] 
```

而 arr 是`["-33.2222", "151.200"]`, （使用[split 方法](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-split)）。

现在

`arr[0].to_f`是`-33.2222`和`arr[1].to_f`是`151.2`

编辑：按照评论中的建议，用 [1..-1] 剥离“im@”部分。

EDIT2：此外，无论第一个字符是什么，这项工作都有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T13:02:52.757

如果要使用连字符捕获两个数字，可以使用此正则表达式：

```
> str = "im@ -33.870816,151.203654"
> str.match(/([\d.,-]+)/).captures
=> ["33.870816,151.203654"] 
```

**编辑：**现在它捕获连字符。这个单独捕获每个数字：[http ://rubular.com/r/NNP2OTEdiL](http://rubular.com/r/NNP2OTEdiL)

**注意：**在这种情况下，使用`String#scan`将匹配给定模式的 *所有出现*

```
> str.scan /\b\s?([-\d.]+)/
=> [["-33.870816"], ["151.203654"]] # Good, but flattened version is better
> str.scan(/\b\s?([-\d.]+)/).flatten
=> ["-33.870816", "151.203654"] 
```

我建议你玩一下[Rubular](http://rubular.com/r/NNP2OTEdiL)。还有一些关于 Ruby 正则表达式的文档：

[http://www.ruby-doc.org/docs/ProgrammingRuby/html/language.html#UJ](http://www.ruby-doc.org/docs/ProgrammingRuby/html/language.html#UJ)
[http://www.regular-expressions.info/ruby.html](http://www.regular-expressions.info/ruby.html)
[http://www.ruby-doc.org/ core-1.9.3/Regexp.html](http://www.ruby-doc.org/core-1.9.3/Regexp.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T12:58:11.243

您的正则表达式不起作用，因为连字符被 捕获`\D`，因此您必须对其进行修改以仅捕获正确的字符集。

`[^0-9-]*`将是一个不错的选择。

# ios - iOS 中的 Music Visualizer 是否有任何自定义控件？

> ID：14562403
> 
> 赞同：1
> 
> 时间：2013-01-28T12:48:30.820
> 
> 标签：ios, cocoa-touch

我正在寻找`Visualizer`在我的音乐应用程序中显示音乐。

Apple 不支持 Music Visualizer。

我正在使用`MPMusicPlayerController's` `iPodMusicPlayer`.

有没有`framework`或`controls`或`SDK`为音乐`Visualizer`？

感谢您的阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:14:44.523

如果你想显示波形，那么你可以试试这个： [https ://github.com/gyetvan-andras/cocoa-waveform](https://github.com/gyetvan-andras/cocoa-waveform)

# asp.net - Ajax POST 不起作用

> ID：14562408
> 
> 赞同：0
> 
> 时间：2013-01-28T12:48:38.673
> 
> 标签：asp.net, ajax, jquery

我正在使用 jquery ajax post 将整个页面 html 发送回服务器 我的代码是这样的

```
 $(document).ready(function () {

    var pcontent = document.body.innerHTML;

    var url = new URI().addQuery("pcontent", pcontent);

    $.ajax({
        url: url, type: "POST"
      , success: function (data) {

          alert(data.html());
      },
        complete: function () {
            alert(1);
        },
        error: function (jqXHR, error, errorThrown) {
            if (jqXHR.status) {
                alert(jqXHR.responseText);
            } else {
                alert("Something went wrong");
            }
        }
    });
    return false;
}); 
```

但是代码会出现这样的错误

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN""http://www.w3.org/TR/html4/strict.dtd">

<HTML><HEAD><TITLE>Request URL Too Long</TITLE>

<META HTTP-EQUIV="Content-Type" Content="text/html; charset=us-ascii"></HEAD>

<BODY><h2>Request URL Too Long</h2>

<hr><p>HTTP Error 414\. The request URL is too long.</p>

</BODY></HTML> 
```

据我了解，我无法通过 ajax 帖子发送整个页面 html。是真的吗？或者还有什么其他的东西让我犯了这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T12:52:24.303

URL 中的字符数有限制。您的 URL 中最多可以包含 2000 个字符。不要在 URL 中发送您的 html，而是使用 jquery ajax 的“数据”参数。就像是

```
$.ajax({
        url: url, type: "POST", data: {pcontent: $(pcontent).serialize()} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T12:57:46.870

微软这样描述 HTTP 错误 414：

服务器拒绝为请求提供服务，因为 Request-URI 太长。这种罕见的情况很可能发生在以下情况：

> 客户端错误地将 POST 请求转换为具有长查询信息的 GET 请求。
> 
> 客户端遇到了重定向问题（例如，重定向的 URL 前缀指向自身的后缀）。
> 
> 服务器受到客户端的攻击，该客户端试图利用某些服务器中存在的安全漏洞，这些服务器使用固定长度的缓冲区来读取或操作 Request-URI。IIS 检查 URI 的字符串长度，当 URI 比预期的长时不为请求提供服务

从您的查询中，您将整个 innerHtml 作为 URL 发送。这可能是原因之一。改为使用`data`。

# pdf - cete.DynamicPdf formattedTextArea 不呈现 html

> ID：14562412
> 
> 赞同：0
> 
> 时间：2013-01-28T12:48:50.827
> 
> 标签：pdf, pdf-generation, formatted-text, dynamicpdf

我正在尝试使用 cete.dynamicpdf 和 html 创建具有文本格式的 pdf 我正在使用据推测可以处理 html 输入的 formattedtextarea。

```
 FontFamily ff = new FontFamily("fontFamily", font);
        FormattedTextAreaStyle style = new FormattedTextAreaStyle(ff, fontSize, true);
        FormattedTextArea textArea = new FormattedTextArea(HttpUtility.HtmlDecode(text), x * mmToPoints, y * mmToPoints, w * mmToPoints, h * mmToPoints, style); 
```

我目前正在将**一些简单的文本**标签传递给“文本”，但是当创建文档时，看不到粗体文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:40:13.883

我需要为 fontfamily 对象定义一些字体以使标签工作

```
 //Building font objects and FontFamily object. 
        TrueTypeFont verdanaRegularFont = new TrueTypeFont("verdana.TTF");
        TrueTypeFont verdanaBoldFont = new TrueTypeFont("verdanab.TTF");
        TrueTypeFont verdanaBoldItalicFont = new TrueTypeFont("verdanaz.TTF");
        TrueTypeFont verdanaItalicFont = new TrueTypeFont("verdanai.TTF");
        FontFamily verdanaFontFamily = new FontFamily("VerdanaFontFamily", verdanaRegularFont, verdanaBoldFont, verdanaItalicFont, verdanaBoldItalicFont); 
        FormattedTextAreaStyle style = new FormattedTextAreaStyle(verdanaFontFamily, fontSize, true);
        FormattedTextArea textArea = new FormattedTextArea(HttpUtility.HtmlDecode(text), x * mmToPoints, y * mmToPoints, w * mmToPoints, h * mmToPoints, style); 
```

# c# - XML反序列化泛型方法

> ID：14562415
> 
> 赞同：10
> 
> 时间：2013-01-28T12:48:58.860
> 
> 标签：c#, .net, generics, serialization, xml-deserialization

我有下一个 XML 文件：

```
<Root>
    <Document>      
        <Id>d639a54f-baca-11e1-8067-001fd09b1dfd</Id>
        <Balance>-24145</Balance>
    </Document>
    <Document>      
        <Id>e3b3b4cd-bb8e-11e1-8067-001fd09b1dfd</Id>
        <Balance>0.28</Balance> 
    </Document>
</Root> 
```

我将其反序列化为此类：

```
[XmlRoot("Root", IsNullable = false)]
public class DocBalanceCollection
{
    [XmlElement("Document")]
    public List<DocBalanceItem> DocsBalanceItems = new List<DocBalanceItem>();
} 
```

哪里`DocBalanceItem`是：

```
public class DocBalanceItem
{
    [XmlElement("Id")]
    public Guid DocId { get; set; }

    [XmlElement("Balance")]
    public decimal? BalanceAmount { get; set; }
} 
```

这是我的反序列化方法：

```
public DocBalanceCollection DeserializeDocBalances(string filePath)
{
    var docBalanceCollection = new DocBalanceCollection();

    if (File.Exists(filePath))
    {
        var serializer = new XmlSerializer(docBalanceCollection.GetType());
        TextReader reader = new StreamReader(filePath);
        docBalanceCollection = (DocBalanceCollection)serializer.Deserialize(reader);
        reader.Close();
    }

    return docBalanceCollection;
} 
```

一切正常，但我有很多 XML 文件。除了编写`Item`课程外，我还必须`ItemCollection`为每个课程编写课程。而且我必须`DeserializeItems`为每个实现方法。

**我可以在不创建`ItemCollection`类的情况下反序列化我的 XML 文件吗？我可以编写一个通用方法来反序列化所有这些吗？**

想到的唯一解决方案 - 为所有这些类创建一个接口。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T14:35:46.423

`List<T>`您可以使用 XmlSerializer反序列化泛型。但是，首先您需要将`XmlType`属性添加到您的`DocBalanceItem`，以便它知道列表元素的命名方式。

```
[XmlType("Document")]
public class DocBalanceItem
{
    [XmlElement("Id")]
    public Guid DocId { get; set; }

    [XmlElement("Balance")]
    public decimal? BalanceAmount { get; set; }
} 
```

然后修改您的`DeserializeDocBalances()`方法以返回 a`List<T>`并向序列化程序传递一个`XmlRootAttribute`实例以指示它`Root`作为根元素查找：

```
public List<T> DeserializeList<T>(string filePath)
{
    var itemList = new List<T>();

    if (File.Exists(filePath))
    {
        var serializer = new XmlSerializer(typeof(List<T>), new XmlRootAttribute("Root"));
        TextReader reader = new StreamReader(filePath);
        itemList = (List<T>)serializer.Deserialize(reader);
        reader.Close();
    }

    return itemList;
} 
```

那么你应该能够做到

`var list = DeserializeList<DocBalanceItem>("somefile.xml");`

由于该方法现在返回一个 generic `List<T>`，您不再需要为每种类型创建自定义集合。

PS - 我使用提供的文档在本地测试了这个解决方案，它确实有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-28T15:38:56.353

任何字符串对象都可以通过以下方法反序列化。

```
public static T genericDeserializeSingleObjFromXML<T>(T value, string XmalfileStorageFullPath)
        {             
            T Tvalue = default(T);
            try
            {
                XmlSerializer deserializer = new XmlSerializer(typeof(T));
                TextReader textReader = new StreamReader(XmalfileStorageFullPath);
                Tvalue = (T)deserializer.Deserialize(textReader);
                textReader.Close();

            }
            catch (Exception ex)
            {                   
            System.Windows.Forms.MessageBox.Show("serialization Error : " + ex.Message);                
            }
            return Tvalue;
        } 
```

为了使用此方法，您应该已经序列化 xml 文件中的对象。调用方法是：

```
XmlSerialization.genericDeserializeSingleObjFromXML(new ObjectName(), "full path of the XML file"); 
```

# sql - 如何将 SQL 语句字符串拆分为多行？

> ID：14562420
> 
> 赞同：-1
> 
> 时间：2013-01-28T12:49:31.670
> 
> 标签：sql, sql-server, string, tsql

```
DECLARE @NewLineChar AS CHAR(2) = CHAR(13) + CHAR(10)
DECLARE @STRING VARCHAR(MAX)
    SET @STRING ='SELECT FirstLine AS FL SELECT SecondLine AS SL'
  PRINT LEN(@STRING)
  PRINT @STRING+
        CASE 
          WHEN LEN(@STRING)>2 THEN (@STRING+@NewLineChar)
          ELSE @STRING 
         END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:08:55.073

我想你正在寻找这个：

```
DECLARE @Delimiter VarChar(30) = 'SELECT';
DECLARE @NewLineChar AS CHAR(2) = CHAR(13);
DECLARE @STRING VARCHAR(MAX);
    SET @STRING ='SELECT FirstLine AS FL SELECT SecondLine AS SL';

PRINT REPLACE(@STRING, @Delimiter, @NewLineChar + @Delimiter); 
```

输出是：

```
 SELECT FirstLine AS FL 
 SELECT SecondLine AS SL 
```

我不确定您为什么要寻找比`2`您要求的输出更大的长度。

# unix - 有没有办法在 UNIX 排序中忽略标题行？

> ID：14562423
> 
> 赞同：120
> 
> 时间：2013-01-28T12:49:33.760
> 
> 标签：unix, sorting, command-line

我有一个固定宽度字段文件，我正在尝试使用 UNIX（在我的情况下为 Cygwin）排序实用程序对其进行排序。

问题是文件顶部有一个两行标题，它被排序到文件底部（因为每个标题行都以冒号开头）。

有没有办法告诉排序“通过未排序的前两行”或指定将冒号行排序到顶部的排序 - 其余行始终以 6 位数字开头（这实际上是我的关键'正在排序）如果有帮助的话。

例子：

```
:0:12345
:1:6:2:3:8:4:2
010005TSTDOG_FOOD01
500123TSTMY_RADAR00
222334NOTALINEOUT01
477821USASHUTTLES21
325611LVEANOTHERS00 
```

应排序为：

```
:0:12345
:1:6:2:3:8:4:2
010005TSTDOG_FOOD01
222334NOTALINEOUT01
325611LVEANOTHERS00
477821USASHUTTLES21
500123TSTMY_RADAR00 
```

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-01-28T13:03:00.027

```
(head -n 2 <file> && tail -n +3 <file> | sort) > newfile 
```

括号创建了一个子shell，将标准输出包裹起来，以便您可以通过管道传输或重定向它，就好像它来自单个命令一样。

* * *

## 回答 #2

> 赞同：98
> 
> 时间：2014-03-09T11:54:32.897

如果您不介意使用`awk`，您可以利用`awk`的内置管道功能

例如。

```
extract_data | awk 'NR<3{print $0;next}{print $0| "sort -r"}' 
```

这将逐字打印前两行并将其余部分通过管道传输`sort`。

请注意，这具有非常特殊的优势，即能够有选择地对管道输入的部分进行排序。建议的所有其他方法只会对可以多次读取的普通文件进行排序。这适用于任何事情。

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2014-12-08T23:11:14.613

这是一个适用于管道数据的版本：

```
(read -r; printf "%s\n" "$REPLY"; sort) 
```

如果您的标题有多行：

```
(for i in $(seq $HEADER_ROWS); do read -r; printf "%s\n" "$REPLY"; done; sort) 
```

这个解决方案来自[这里](http://jeffgraves.me/2013/12/11/skip-header-with-bash-sort/)

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2019-05-15T14:31:37.440

在简单的情况下，`sed`可以优雅地完成工作：

```
 your_script | (sed -u 1q; sort) 
```

或等效地，

```
 cat your_data | (sed -u 1q; sort) 
```

关键在于`1q`-- 打印第一行（标题）并退出（将其余输入留给`sort`）。

对于给出的示例，`2q`将起到作用。

`-u`那些 s（特别是 GNU）需要开关（无缓冲），`sed`否则它们会以块的形式读取输入，从而消耗您想要通过的数据`sort`。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-01-28T12:56:17.640

您可以使用`tail -n +3 <file> | sort ...`（tail 将从第 3 行输出文件内容）。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-01-28T13:13:10.150

```
head -2 <your_file> && nawk 'NR>2' <your_file> | sort 
```

例子：

```
> cat temp
10
8
1
2
3
4
5
> head -2 temp && nawk 'NR>2' temp | sort -r
10
8
5
4
3
2
1 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-02-01T21:05:31.393

只需要两行代码...

```
head -1 test.txt > a.tmp; 
tail -n+2 test.txt | sort -n >> a.tmp; 
```

对于数字数据，-n 是必需的。对于 alpha 排序，不需要 -n。

示例文件：
$ cat test.txt

> 标题
> 8
> 5
> 100
> 1
> -1

结果：
$ cat a.tmp

> 标题
> -1
> 1
> 5
> 8
> 100

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-02-14T22:37:43.787

所以这是一个 bash 函数，其中参数与排序完全相同。支持文件和管道。

```
function skip_header_sort() {
    if [[ $# -gt 0 ]] && [[ -f ${@: -1} ]]; then
        local file=${@: -1}
        set -- "${@:1:$(($#-1))}"
    fi
    awk -vsargs="$*" 'NR<2{print; next}{print | "sort "sargs}' $file
} 
```

这个怎么运作。此行检查是否至少有一个参数以及最后一个参数是否为文件。

```
 if [[ $# -gt 0 ]] && [[ -f ${@: -1} ]]; then 
```

这会将文件保存到单独的参数中。因为我们即将删除最后一个参数。

```
 local file=${@: -1} 
```

在这里，我们删除最后一个参数。因为我们不想将它作为排序参数传递。

```
 set -- "${@:1:$(($#-1))}" 
```

最后，我们执行 awk 部分，传递参数（如果是文件，则减去最后一个参数）以在 awk 中排序。这最初是由 Dave 建议的，并被修改为采用排序参数。我们依赖这样一个事实，`$file`如果我们正在管道，它将是空的，因此被忽略了。

```
 awk -vsargs="$*" 'NR<2{print; next}{print | "sort "sargs}' $file 
```

使用逗号分隔文件的示例用法。

```
$ cat /tmp/test
A,B,C
0,1,2
1,2,0
2,0,1

# SORT NUMERICALLY SECOND COLUMN
$ skip_header_sort -t, -nk2 /tmp/test
A,B,C
2,0,1
0,1,2
1,2,0

# SORT REVERSE NUMERICALLY THIRD COLUMN
$ cat /tmp/test | skip_header_sort -t, -nrk3
A,B,C
0,1,2
2,0,1
1,2,0 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-10-21T12:28:00.977

使用 Python：

```
import sys
HEADER_ROWS=2

for _ in range(HEADER_ROWS):
    sys.stdout.write(next(sys.stdin))
for row in sorted(sys.stdin):
    sys.stdout.write(row) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-01-27T07:26:37.823

这是从其他答案派生的 bash shell 函数。它处理文件和管道。第一个参数是文件名或标准输入的“-”。剩余的参数被传递给排序。几个例子：

```
$ hsort myfile.txt
$ head -n 100 myfile.txt | hsort -
$ hsort myfile.txt -k 2,2 | head -n 20 | hsort - -r 
```

外壳函数：

```
hsort ()
{
   if [ "$1" == "-h" ]; then
       echo "Sort a file or standard input, treating the first line as a header.";
       echo "The first argument is the file or '-' for standard input. Additional";
       echo "arguments to sort follow the first argument, including other files.";
       echo "File syntax : $ hsort file [sort-options] [file...]";
       echo "STDIN syntax: $ hsort - [sort-options] [file...]";
       return 0;
   elif [ -f "$1" ]; then
       local file=$1;
       shift;
       (head -n 1 $file && tail -n +2 $file | sort $*);
   elif [ "$1" == "-" ]; then
       shift;
       (read -r; printf "%s\n" "$REPLY"; sort $*);
   else
       >&2 echo "Error. File not found: $1";
       >&2 echo "Use either 'hsort <file> [sort-options]' or 'hsort - [sort-options]'";
       return 1 ;
   fi
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-03-05T07:56:53.253

这与 Ian Sherbin 的回答相同，但我的实现是：-

```
cut -d'|' -f3,4,7 $arg1 | uniq > filetmp.tc
head -1 filetmp.tc > file.tc;
tail -n+2 filetmp.tc | sort -t"|" -k2,2 >> file.tc; 
```

* * *

## 回答 #12

> 赞同：-5
> 
> 时间：2016-03-09T12:22:07.103

```
cat file_name.txt | sed 1d | sort 
```

这将做你想要的。

# ios - 来自谷歌驱动器的目标 c 列表文件

> ID：14562424
> 
> 赞同：6
> 
> 时间：2013-01-28T12:49:34.807
> 
> 标签：ios, objective-c, google-drive-api

我正在开发 ios 应用程序，包括谷歌驱动器。在谷歌驱动器中，当我试图列出文件时，它会在单个页面中显示所有文件夹、子文件夹、子文件。这是我的代码

```
GTLQueryDrive *query = [GTLQueryDrive queryForFilesList];

    [driveService executeQuery:query completionHandler:^(GTLServiceTicket *ticket,
                                                         GTLDriveFileList *filesList,
                                                         NSError *error) {
if (error == nil) {

            [FilesFromGoogleDrive addObjectsFromArray:filesList.items
             ];

        }; 
```

我不想列出主页中的所有文件。我需要类似于 google drive 应用程序来按顺序访问文件夹、子文件夹、子文件。我从过去一周开始尝试这个，但没有好的结果。所以请帮助我如何访问文件夹，子文件夹。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T22:34:50.593

如果要列出由 标识的文件夹中的所有文件`folderId`，可以使用以下代码（来自[https://developers.google.com/drive/v2/reference/children/list](https://developers.google.com/drive/v2/reference/children/list)）：

```
+ (void)printFilesInFolderWithService:(GTLServiceDrive *)service
                             folderId:(NSString *)folderId {
  // The service can be set to automatically fetch all pages of the result. More
  // information can be found on https://code.google.com/p/google-api-objectivec-client/wiki/Introduction#Result_Pages.
  service.shouldFetchNextPages = YES;

  GTLQueryDrive *query =
    [GTLQueryDrive queryForChildrenListWithFolderId:folderId];
  // queryTicket can be used to track the status of the request.
  GTLServiceTicket *queryTicket =
    [service executeQuery:query
        completionHandler:^(GTLServiceTicket *ticket,
                            GTLDriveChildList *children, NSError *error) {
          if (error == nil) {
            for (GTLDriveChildReference *child in children) {
              NSLog(@"File Id: %@", child.identifier);
            }
          } else {
            NSLog(@"An error occurred: %@", error);
          }
        }];
} 
```

另一种选择是搜索`folderId`其父母收藏中的文件：

[https://developers.google.com/drive/search-parameters](https://developers.google.com/drive/search-parameters)

例如，您可以有如下搜索查询：

```
'1234567' in parents 
```

其中“1234567”是您要为其列出文件的文件夹的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:10:10.310

我希望这是你想要的。只需使用此代码，此代码将为您提供所需的东西。

```
-(void)getFileListFromSpecifiedParentFolder {
        GTLQueryDrive *query2 = [GTLQueryDrive queryForChildrenListWithFolderId:<some_folder_id or root>];
        query2.maxResults = 1000;

        // queryTicket can be used to track the status of the request.
        [self.driveService executeQuery:query2
            completionHandler:^(GTLServiceTicket *ticket,
                            GTLDriveChildList *children, NSError *error) {
                NSLog(@"\nGoogle Drive: file count in the folder: %d", children.items.count);
                //incase there is no files under this folder then we can avoid the fetching process
                if (!children.items.count) {
                    return ;
                }

                if (error == nil) {
                    for (GTLDriveChildReference *child in children) {

                        GTLQuery *query = [GTLQueryDrive queryForFilesGetWithFileId:child.identifier];

                        // queryTicket can be used to track the status of the request.
                        [self.driveService executeQuery:query
                            completionHandler:^(GTLServiceTicket *ticket,
                                                GTLDriveFile *file,
                                                NSError *error) {

                                                NSLog(@"\nfile name = %@", file.originalFilename);
                                                }];
                    }
                }
            }];
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T19:06:54.167

这是我的做法：

```
NSString* currentFolderID = @"root";//folder id for the Google Drive root directory
GTLQueryDrive *query = [GTLQueryDrive queryForFilesList];
NSString* queryQ = [NSString stringWithFormat: @"trashed = false and '%@' in parents", currentFolderID];
query.q  = queryQ;
[_googleService executeQuery:query completionHandler:^(GTLServiceTicket *ticket,
                                                                                GTLDriveFileList *files,
                                                                                NSError *error)
                   {
                       if (error == nil)
                       {
                            [self listFiles: files.items];
 } 
```

使用@"root" 作为父级列出根目录中的文件，并使用子文件夹项的 file.identifier 作为父级列出文件。要从子文件夹中查询文件，请使用以下 2 行来获取子文件夹中所有文件的父标识符。

```
GTLDriveFile subFolderItem;
currentFolderID = subFolderItem.identifier; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-10T16:13:20.733

要获取 Google Drive 的所有文件列表，请使用以下代码：

```
GTLQueryDrive *query = [GTLQueryDrive queryForFilesList];
query.q = [NSString stringWithFormat:@"'%@' IN parents", @"root"];

[self.serviceDrive executeQuery:query completionHandler:^(GTLServiceTicket *ticket,
                                                          GTLDriveFileList *files,
                                                          NSError *error) {

    if (error == nil)
    {
        NSMutableArray * driveFiles = [[NSMutableArray alloc] init];
        [driveFiles addObjectsFromArray:files.items];

        for (GTLDriveFile *file in driveFiles)
            NSLog(@"File is %@", file.title);

    }
    else
    {
        NSLog(@"An error occurred: %@", error);
    }
}]; 
```

# html - 文字阴影覆盖

> ID：14562426
> 
> 赞同：0
> 
> 时间：2013-01-28T12:49:41.653
> 
> 标签：html, css

HTML

```
<ul>
  <li><a href="#">Home</a></li>
  <li><a href="#" class="active">About</a></li>
</ul> 
```

CSS

```
ul li:nth-child(even) a {
    text-shadow: 1px 1px 1px red;
}

.active {
    text-shadow: none;
} 
```

第二个列表项仍然有阴影。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T12:52:12.700

这是一个特殊性的问题：第一个规则获胜，因为它具有`13`比第二个更大的特殊性（计算为 1 个伪类和 3 个元素：）（只有 1 个类，没有元素：） `10`：你应该改写

```
ul li:nth-child(even) a.active {
   text-shadow: none;
} 
```

或 - 一般而言 - 任何其他有效规则，其特异性大于或等于`13`.

如果您无法更改第二个选择器，您可以简单地`!important`在属性上使用applyed，但应尽可能少地限制它的使用。

* * *

有关详细信息，另请参阅：

*   这个关于[特异性的参考（MDN）](https://developer.mozilla.org/en-US/docs/CSS/Specificity)；
*   [Smashing Magazine](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)上的这篇文章介绍了特异性以及如何计算它。

# c# - HttpWebRequest BeginGetResponse Windows Phone 中的参数异常

> ID：14562427
> 
> 赞同：0
> 
> 时间：2013-01-28T12:49:43.800
> 
> 标签：c#, .net, windows-phone-7, parameters, httpwebrequest

我将我的应用程序 POST 请求发送到某个 URL。当我第一次发送它时，没关系，但是当我再次调用方法时`SendBookingFreeCapacity()`，我得到了

`ApplicationUnhandledExceptionEventArgs`在 App.xaml 中的函数中`"private void Application_UnhandledException(object sender, ApplicationUnhandledExceptionEventArgs e)"`。

问题是行：

```
webRequest.BeginGetResponse(new AsyncCallback(GetBookingFreeCapacitydResponseCallback), webRequest); 
```

这是我的代码：

```
public static void SendBookingFreeCapacity() {
    var url = "https://..../getFreeCapacity";

    HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(url);
    webRequest.Method = "POST";
    webRequest.ContentType = "application/x-www-form-urlencoded";

    webRequest.BeginGetRequestStream(
        new AsyncCallback(GetBookingFreeCapacityRequestStreamCallback), 
        webRequest);
}

private static void GetBookingFreeCapacityRequestStreamCallback(
    IAsyncResult asynchronousResult)
{
    try {
        HttpWebRequest webRequest = 
            (HttpWebRequest)asynchronousResult.AsyncState;

        string postData = string.Empty;

        System.IO.Stream postStream = 
            webRequest.EndGetRequestStream(asynchronousResult);

        postData = "<?xml version=\"1.0\"?>" 
                   + "<request>" 
                   + "<login>" + Globals.Login + "</login>" 
                   + "<password>" + Globals.Password + "</password>" 
                   + "<hotId>" + htl.hotId + "</hotId>" 
                   + "<term>" 
                   + "<from>" + dayParser(Globals.PrijezdDate) + "</from>" 
                   + "<to>" + dayParser(Globals.OdjezdDate) + "</to>" 
                   + "</term>" 
                   + "</request>";

        byte[] byteArray = System.Text.Encoding.UTF8.GetBytes(postData);

        postStream.Write(byteArray, 0, byteArray.Length);
        postStream.Close();

        webRequest.BeginGetResponse(
            new AsyncCallback(GetBookingFreeCapacitydResponseCallback),
             webRequest); //after this I get the exception
    }
    catch (Exception ex) { }
}

private static void GetBookingFreeCapacitydResponseCallback(
    IAsyncResult asynchronousResult)
{
    try {
        HttpWebRequest webRequest =
            (HttpWebRequest)asynchronousResult.AsyncState;
        //some code...
    }
    catch (Exception ex) { }
} 
```

你有什么提示是什么导致的吗？问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T00:50:42.377

一些用户遇到同样的问题。

[如何修复 HttpWebResponse 中的 System.ArgumentException？](https://stackoverflow.com/questions/13598666/how-to-fix-system-argumentexception-in-httpwebresponse)

在这种情况下，原因仍然未知。

[System.ArgumentException：Windows Phone 中的 [net_WebHeaderInvalidControlChars]](https://stackoverflow.com/questions/10116963/system-argumentexception-net-webheaderinvalidcontrolchars-in-windoows-phone)

在这种情况下，原因是 HTTP 请求标头中的非 ASCII 字符。

PS 你不应该在非英语操作系统或 IDE 上开发。我 99% 确定你得到 System.ArgumentException，但是你的“我有这个异常名称以我的语言本地化”使得在谷歌上搜索解决方案和寻求帮助变得更加困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:46:11.980

我创建了解决方案...创建新页面...

# ruby-on-rails - 重新打包来自多个模型的查询结果。导轨式

> ID：14562429
> 
> 赞同：1
> 
> 时间：2013-01-28T12:49:56.850
> 
> 标签：ruby-on-rails, json, models

我有一个呈现 json 的控制器。这是代码：

```
class AppLaunchDataController < ApiController
    def index
        service_types = []
        vendors = []
        tariffs = []
        fields = []
        vendors_hash = {}
        service_types_hash = {}
        tariffs_hash = {}
        fields_hash = {}

        @service_types = ServiceType.select("title, id").all.each do |service_type|
            service_types_hash = {id: service_type.id, title: service_type.title}
            service_types << service_types_hash
            @vendors = service_type.vendors.select("title, id").all.each do |vendor|
                vendors_hash = {id: vendor.id, title: vendor.title}
                vendors << vendors_hash
                @tariff = vendor.tariffs.select("title, id").all.each do |tariff|
                    tariffs_hash = {id: tariff.id, title: tariff.title}
                    tariffs << tariffs_hash
                    @fields  = tariff.fields.select("id, current_value, value_list").all.each do |field|
                        fields_hash = {id: field.id, current_value: field.current_value, value_list: field.value_list}
                        fields << fields_hash
                    end
                    tariffs_hash[:fields] = fields
                    fields = []
                end
                vendors_hash[:tariffs] = tariffs
                tariffs = []
            end
            service_types_hash[:vendors] = vendors
            vendors = []
        end
        render json: service_types
    end
end 
```

返回值如下所示：

```
[{"id":1,"title":"Water",
"vendors":[{"id":1,"title":"Vendor_1",
"tariffs":[{"id":1,"title":"Unlim",
"fields":[{"id":1,"current_value":"200","value_list":null},{"id":2,"current_value":"Value_1","value_list":"Value_1, Value_2, Value_3"}]},{"id":2,"title":"Volume",
"fields":[]}]},
{"id":2,"title":"Vendor_2",
"tariffs":[]}]},
{"id":2,"title":"Gas",
"vendors":[]},
{"id":3,"title":"Internet",
"vendors":[]}] 
```

它有效，但我确信还有另一种（更多的 rails-）方法可以获得结果。如果有人以前处理过，请帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:09:02.400

只需使用

```
# for eager-loading :
@service_types = ServiceType.includes( vendors: {tariffs: :fields} ) 
# now for the json :
@service_types.to_json( include: {vendors: {include: {tariffs: { include: :fields}}}} ) 
```

如果您的`ServiceType`对象将始终具有这种表示形式，只需覆盖模型的`as_json`方法：

```
class ServiceType
  def as_json( options={} )
    super( {include: :vendors }.merge(options) ) # vendors, etc.
  end
end 
```

这是在 rails 中鼓励的方式：调用`to_json`模型只会调用`as_json`，可能还有其他选项。事实上，`as_json`描述了该模型的规范 json 表示。有关更多信息，请参阅[api dock](http://apidock.com/rails/ActiveRecord/Serialization/to_json)`to_json`。

If your needs are more peculiar ( as using selects for a faster query ), you can always roll your own `to_json_for_app_launch_data` method on the model (using or not `as_json`), or even better on a [presenter](https://github.com/drapergem/draper)

# php - 使用 ajax 调用 javascript 函数

> ID：14562433
> 
> 赞同：0
> 
> 时间：2013-01-28T12:50:15.773
> 
> 标签：php, javascript, ajax

我正在使用多选下拉列表来过滤存储在我的数据库中的图像。结果是分页的，但是一旦过滤结果，分页就会失败。过滤器使用 ajax 对数据库进行 php 调用。

我认为正在发生的是，一旦将结果加载到 div 中，分页 javascript 函数已经触发并且不会第二次。有没有办法在每次过滤结果时调用该函数？

我相信我每次只需要回忆一下：

```
 <script type="text/javascript">

jQuery(function($){

    $('ul#items').easyPaginate({
        step:6
    });

});    

    </script> 
```

阿贾克斯调用：

```
<script>
function filterResults(sel)
{
    var selectedOptions = [];
    for (var i = 0; i < sel.options.length; i++) {
        if (sel.options[i].selected) {
            selectedOptions.push("'" + sel.options[i].value + "'");
        }
    }
    if (selectedOptions.length == 0) {
        document.getElementById("divResults").innerHTML="";
        return;
    }
    str = selectedOptions.join(",");
    if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    } else  {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            document.getElementById("divResults").innerHTML=xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET","filter_ajax.php?filter="+str,true);
    xmlhttp.send();
}

</script> 
```

ajax_filter.php：

```
<?php

    include ("connect.php");

    $filter = $_GET["filter"];
    $filterIn = $filter;

        $result = mysql_query("SELECT * FROM edt_images
                                WHERE category1 IN ($filterIn)
                                OR category2  IN ($filterIn)
                                OR category3  IN ($filterIn)
                                OR category4 IN ($filterIn)
                                OR category5 IN ($filterIn)
                                OR category6 IN ($filterIn)")                           
            or die(mysql_error());

        echo "<div id='results_container'>";
        echo "<ul id='items'>";

        while ($row = mysql_fetch_array($result)) {

            echo "<li><img src='files/300x200/thumb2_".$row['item_name'].".".$row['file_extension']."' class='filtered_images' border='0'/></li>"; 
        }
        echo "</ul>";
        echo "</div>";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:27:03.377

如果您使用 jQuery，您可以`filterResults`利用它提供的框架大大简化函数中的代码。我会[在这里](http://api.jquery.com/)阅读一下，因为您会对广泛的功能感到惊讶。

**这段代码是你之前代码的 jQuery 等价物，**

```
 function filterResults(sel) {
        var selectedOptions = [];
        for (var i = 0; i < sel.options.length; i++) {
            if (sel.options[i].selected) {
                selectedOptions.push("'" + sel.options[i].value + "'");
            }
        }
        if (selectedOptions.length == 0) {
            $("divResults").html("");
            return;
        }
        filteStr = selectedOptions.join(",");
        $.ajax({
            url: "http://www.google.com",
            type: "get",
            dataType: "html",
            data: {
                filter: filteStr
            },
            success: function (responseHtml) {
                $("divResults").html(responseHtml);
                //You can put your code here
                $('ul#items').easyPaginate({
                    step: 6
                });
            },
            error: function (responseHtml) {
                //Handle error
            }
        });
    } 
```

为了回答这个问题，`success`ajax 调用回调中的代码将在从服务器接收到数据后执行。上面的代码应该可以按预期工作。

几乎所有要知道的东西都[在这里](http://www.w3schools.com/)和[这里](http://www.w3schools.com/)。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:30:00.223

出色地

根据评论，我将不得不研究 javascript 和 jquery，以前从未真正关心过它。

无论如何，通过调用 javascript 函数

```
if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            document.getElementById("divResults").innerHTML=xmlhttp.responseText;
            RESTATING HERE
} 
```

我能够让它工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-28T13:26:12.557

将 javascript 调用放入您的 php-ajax 回显中，例如：

```
<?
$msg = "hello";
?>
<script type="text/javascript">alert("<?=$msg?>"></script> 
```

# r - 如何从一组段（spatstat 中的 psp）中获取 SpatialPolygons（SP 类）？

> ID：14562438
> 
> 赞同：3
> 
> 时间：2013-01-28T12:50:33.543
> 
> 标签：r, polygons, spatstat, maptools

[我有一组随机段在窗口](https://stackoverflow.com/questions/14362127/how-to-generate-a-list-of-segments-from-a-list-of-random-self-intercepting-lines)中（在 spatstat R 中）绘制一种镶嵌（三角形，矩形...... ）。我需要将其转换为一组多边形（SpatialPolygons）来计算一些指数（如面积、形状指数......）。

这显然很简单，但我找不到如何去做......

这是[Carl Witthoft](https://stackoverflow.com/questions/14362127/how-to-generate-a-list-of-segments-from-a-list-of-random-self-intercepting-lines)的一段代码，它生成了一个随机模式的自截断段：

```
ranpoly <- function(numsegs=10,plotit=TRUE) {

require(spatstat)
# temp fix: put the first seg into segset. Later make it a constrained random.
segset<-psp(c(0,1,1,0,.25),c(0,0,1,1,0),c(1,1,0,0,1),c(0,1,1,0,.75),owin(c(0,1),c(0,1)) ) #frame the frame
for (jj in 1: numsegs) {
# randomly select a segment to start from, a point on the seg, the slope,and direction
# later... watch for slopes that immediately exit the frame
endx <-sample(c(-0.2,1.2),1)  #force 'x1' outside the frame
# watch that sample() gotcha
if(segset$n<=5) sampset <- c(5,5) else sampset<-5:segset$n
startseg<-sample(sampset,1) #don't select a frame segment
# this is slope of segment to be constructed
slope <- tan(runif(1)*2*pi-pi) # range +/- Inf 
# get length of selected segment
seglen<-lengths.psp(segset)[startseg]
startcut <- runif(1) 
# grab the coords of starting point (similar triangles)
startx<- segset$ends$x0[startseg] + (segset$ends$x1[startseg]-segset$ends$x0[startseg])*startcut #seglen
starty<- segset$ends$y0[startseg] + (segset$ends$y1[startseg]-segset$ends$y0[startseg])*startcut #seglen
# make a psp object with that startpoint and slope; will adjust it after finding intersections
endy <- starty + slope*(endx-startx)
newpsp<-psp(startx,starty,endx,endy,segset$window,check=FALSE)
# don't calc crossing for current element of segset
hits <- crossing.psp(segset[-startseg],newpsp)
segdist <- dist(cbind(c(startx,hits$x),c(starty,hits$y)))
# dig back to get the crosspoint desired -- have to get matrixlike object out of class "dist" object
# And, as.matrix puts a zero in location 1,1 kill that row.
cutx <- hits$x[ which.min( as.matrix(segdist)[-1,1] )]
cuty <- hits$y[which.min(as.matrix(segdist)[-1,1] )]
segset <- superimpose(segset,psp(startx,starty,cutx,cuty,segset$window))

} #end jj loop
if(plotit) plot(segset,col=rainbow(numsegs))
return(invisible(segset))
}

segset=ranpoly() 
```

segset 是我需要创建 SpatialPolygons 对象的 psp 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:05:17.087

谷歌搜索让`spatstat as spatialPolygons`我找到了[第一个命中](http://cran.r-project.org/web/packages/spatstat/vignettes/shapefiles.pdf)，这是 spatstat 中专门用于处理 shapefile 的小插图。它在如何将`sp`-classes 转换为 spatstat 对象上花费了大量时间。您可能对第 3.2.5 节：*SpatialPolygons 类的对象*和第 3.2.6 节：*SpatialPolygonsDataFrame*类的对象最感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:52:18.383

假设您有一组 spatstat 对象，您可以尝试类似（未经测试）：

```
require(sp)

# VECTOR OF spatstat OBJECT NAMES
segs <- (seg1,seg2,seg3)

segPolys <- as(segs[1], "SpatialPolygons")
  for( i in 2:length(segs)) {
    y <- as(segs[i], "SpatialPolygons")
      slot(y[[i]], "ID") <- paste(i)
    segPolys <- c(slot(y, "polygons"),segPolys)
   } 
```

# perl - 为什么 Perl 的 Image::Magick 会在半透明图像周围创建轮廓，而合成却没有？

> ID：14562440
> 
> 赞同：3
> 
> 时间：2013-01-28T12:50:35.967
> 
> 标签：perl, image-processing, imagemagick

我正在开发一个程序，以使用[Image::Magick](http://www.imagemagick.org/script/perl-magick.php)为产品图像动态添加水印。我正在使用`composite`该`dissolve`方法。水印图像是具有透明度的 PNG。它在 Linux 上运行，带有`ImageMagick 6.7.6-9 2012-05-16 Q16`.

考虑以下任意示例图像：

## 背景（`test.jpg`）：

![背景（产品图片）](../Images/ecb3b360e633e2a8970a486e961525bd.png)

## 水印/覆盖 ( `example.png`):

![示例水印](../Images/13c0e02b177112d6977afa704545aa65.png)

如果我将这些与命令行工具放在一起`composite`，一切都很好。

```
composite -dissolve 60% -gravity center example.png test.jpg out.jpg 
```

![CLI 的正确输出](../Images/7ae5dee36a7991281a5734b95b1b2148.png)

文本（这需要是图像，其中也将包含图形）叠加在背景上。边缘就是它们在原始水印图像中的样子。

```
#!/usr/bin/perl
use strict; use warnings;
use Image::Magick;

# this objects represents the background
my $background = Image::Magick->new;
$background ->ReadImage( 'test.jpg' );

# this objects represents the watermark
my $watermark = Image::Magick->new;
$watermark->ReadImage( 'example.png');

# there is some scaling going on here...
# both images are scaled down to have the same width
# but the problem occurs even if I turn the scaling off

# superimpose the watermark
$background->Composite(
  image    => $watermark,
  compose  => 'Dissolve',
  opacity  => '60%',
  gravity  => 'Center',
);

$background->Write( filename => 'out.jpg' ); 
```

这是这个 Perl 程序的输出：

![Perl 程序的奇怪输出](../Images/8e418ae0858d07d7f47c64768d33a6a9.png)

如您所见，新图像有一些奇怪的边缘，几乎就像一个轮廓。该图像越大（原始源图像都> 1000px），该轮廓变得越明显。

这是一个特写：

![正确图像的特写](../Images/d31c9d845042cf5591daf6182b50c65d.png)

![错误图像的特写](../Images/6f2d71d1baec4ff461b8be02d59e1e5f.png)

我相信这可能与 JPEG 压缩的强度有关，因为错误的图像有更多的伪像。但这意味着 Perl 的 Image::Magick 和 CLI 的默认值是不同的。我还没有弄清楚如何设置压缩。

无论如何，我很高兴收到任何关于为什么会发生这种情况的意见，或者关于如何摆脱它的想法和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:47:08.420

我快速浏览了 PerlMagick 源代码，当溶解的图像具有 alpha 通道时，似乎`Composite`有问题。`Dissolve`以下对我有用：

```
$watermark->Evaluate(
  operator => 'Multiply',
  value    => 0.6,
  channel  => 'Alpha',
);

$background->Composite(
  image    => $watermark,
  gravity  => 'Center',
); 
```

# session-timeout - Spring 框架 HttpSessionRequiredException

> ID：14562441
> 
> 赞同：1
> 
> 时间：2013-01-28T12:50:39.363
> 
> 标签：session-timeout, spring-3, httpsession

我们在项目中使用 Spring Framework。如果应用程序超时，则会出现以下错误。出现此错误时如何重定向到登录页面？我可以为此错误配置应用程序上下文吗？

PS.：我们不使用 Spring-Security

```
 org.springframework.web.HttpSessionRequiredException : Expected session
    attribute 'UserPrinciple'
          at
    org.springframework.web.method.annotation.ModelFactory.initModel(ModelFactory.java:103)
          at
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:614)
          at
    org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
          at
    org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
          at
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
          at
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
          at
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
          at
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
          at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
          at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
          at
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
          at
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
          at
    org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
          at
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
          at
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
          at
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
          at
    org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
          at
    org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
          at
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
          at
    org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
          at
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
          at
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
          at
    org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
          at
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
          at
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
          at org.apache.coyote.AbstractProtocol
    $AbstractConnectionHandler.process(AbstractProtocol.java:585)
          at org.apache.tomcat.util.net.JIoEndpoint
    $SocketProcessor.run(JIoEndpoint.java:310)
          at
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
          at java.util.concurrent.ThreadPoolExecutor
    $Worker.run(ThreadPoolExecutor.java:603)
          at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:53:23.930

这可能会帮助你..

```
<error-page>
        <exception-type>org.springframework.web.HttpSessionRequiredException</exception-type>
        <location>/login.jsp</location>
</error-page> 
```

# r - 将循环的相关输出保存到矩阵

> ID：14562443
> 
> 赞同：0
> 
> 时间：2013-01-28T12:50:45.207
> 
> 标签：r, loops, correlation

我有一个如下所示的设置

```
for(V in (seq(1, 250, by = 5))){
   for(n in (seq(1, 250, by = 5))){

        # 1) Working Algorithm creating a probability 
             ie. vector in range [0:1] 

        # 2) Take the natural log of this probability 
        a <-  log(lag(Probability), base = exp(1))

        # 3) calculate price differences
        b <-  abs(diff(Price) -1)

        # 4) Then compute correlation between a and b
        cor(a, b) 

        # 5) Here I'd like to save this in the corresponding index of matrix
   }
} 
```

这样我就得到了一个 [V, n] 大小的矩阵作为输出，它从每个循环中收集。

我对此有一些问题。

*   第一个问题是我的相关性不可计算，因为`Probability`通常为 0，因此在向量中创建了一个`ln(0) = -Inf`输入。`ln(Probability)`有没有办法计算带有输入的向量的`std.dev`或？`cor``Ln``-Inf`

*   我的第二个问题是如何将此相关输出保存到为每个循环生成的矩阵中？

谢谢你的帮助。我希望这足够清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:58:24.043

您可以使用 -Inf 执行的操作是将其替换为 NA，例如：

```
x = runif(10)
x[3] = 1/0
> is.infinite(x)
 [1] FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
x[is.infinite(x)] <- NA
> x
 [1] 0.09936348 0.66624531         NA 0.90689357 0.71578917 0.14655174
 [7] 0.59561047 0.41944552 0.67203026 0.03263173 
```

并使用`na.rm`参数`sd`：

```
>  sd(x, na.rm = TRUE)
[1] 0.3126829 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T13:03:17.623

对于您的第二个问题（我的第二个问题是如何将此相关输出保存到为每个循环生成的矩阵中？），您可以在循环之前初始化一个矩阵并将每个计算的相关性存储在相应的索引中，例如：

```
sz <- seq(1, 250, by = 5)
out_mat <- matrix(0, nrow=length(sz), ncol=length(sz))
# then continue with your for-loop
for (V in 1:length(sz)) {
    for(n in length(sz)) {
        # here instead of accessing V and n in computing probability
        # use sz[V] and sz[n]
        ...
        ...
        # after computing the correlation, here use V and n (not sz[V] or sz[n])
        out_mat[V, n] <- c # c holds the value of cor(a,b)
    }
 } 
```

# c# - Microsoft JScript 运行时错误：“Sys.Extended.UI”为空或不是对象

> ID：14562451
> 
> 赞同：4
> 
> 时间：2013-01-28T12:51:03.277
> 
> 标签：c#, asp.net

我的页面有问题。当它打开时，它显示以下错误消息：

**Microsoft JScript 运行时错误：“Sys.Extended.UI”为空或不是对象**

```
<ajax:ToolkitScriptManager ID="tsm" runat="server" CombineScripts="false" >

    </ajax:ToolkitScriptManager> 
```

并显示错误

```
$create(Sys.Extended.UI.ModalPopupBehavior, {"BackgroundCssClass":"modalBackground1","DropShadow":true,"PopupControlID":"ctl00_ContentPlaceHolder1_panelPopupAddDefaultAddress","PopupDragHandleControlID":"ctl00_ContentPlaceHolder1_panelPopupAddDefaultAddressDragHandle","dynamicServicePath":"/SJM.Framework.Website/Order/ActiveOrders.aspx","id":"ctl00_ContentPlaceHolder1_modalPopupAddDefaultAddress"}, null, null, $get("ctl00_ContentPlaceHolder1_hiddenTargetControlForModalPopup")); 
```

谁能告诉我是什么问题。我试过了，但我还没有找到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-17T08:06:25.867

我收到此错误是因为我在某处使用的是 ScriptManager 而不是 ToolkitScriptManager。我用 Take kit 脚本管理器应用程序替换脚本管理器的那一刻开始工作正常。

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T13:18:12.193

您是否尝试过使用更新版本的`AjaxControlToolkit`? 我正在使用 ( ~~`4.5.7.123`~~)`3.5.7.123`并且此问题不存在。

此外，您可能想看看这个解决方案：

[http://forums.asp.net/p/1209962/2132128.aspx#2132128](http://forums.asp.net/p/1209962/2132128.aspx#2132128)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-12T21:59:58.757

我在 .NET 4.0 解决方案中看到此错误，并且我引用的 AjaxControlToolkit.dll 文件是 v4.5.xy 当我尝试使用 v4.1.vw 的 AjaxControlToolkit.dll 文件时，错误消失了，其中我不记得 x、y、v 和 w 是什么。

要找出 AjaxControlToolkit.dll 文件的版本，请在将其添加为 Reference 后右键单击它，然后选择 Properties——有一个名为 Version 的属性会告诉您。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-19T00:30:11.233

我刚刚通过添加指令解决了“'Sys.Extended.UI' 为空或不是对象”问题：

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajaxToolkit" %> 
```

由于某种原因，它在 .aspx 代码中丢失了。

并通过更换`<asp:ScriptManager ID="ScriptManager1" runat="server" />`

和

```
<ajaxToolkit:ToolkitScriptManager runat="server" ID="ToolkitScriptManager" EnablePartialRendering="true"></ajaxToolkit:ToolkitScriptManager> 
```

# css - 在 Div 中居中超大图像

> ID：14562457
> 
> 赞同：191
> 
> 时间：2013-01-28T12:51:27.137
> 
> 标签：css

我一直在尝试解决如何仅使用 css 在 div 中将超大图像居中。

我们使用的是流体布局，因此图像容器的宽度会随着页面宽度的变化而变化（div 的高度是固定的）。图像位于一个 div 中，带有一个嵌入的 boxshadow 值，以便看起来好像您正在浏览图像的页面。

图像本身的大小已被调整为以尽可能宽的值填充周围的 div（设计有一个`max-width`值）。

如果图像小于周围的 div，这很容易做到：

```
margin-left: auto;
margin-right: auto;
display: block; 
```

但是当图像大于 div 时，它只是从左边缘开始，并且偏离中心到右侧（我们使用的是`overflow: hidden`）。

我们可以指定一个`width=100%`，但是浏览器在调整图像大小方面做得很糟糕，并且网页设计以高质量图像为中心。

关于使图像居中以`overflow:hidden`均匀切断两个边缘的任何想法？

* * *

## 回答 #1

> 赞同：380
> 
> 时间：2013-10-16T21:13:56.203

尝试这样的事情。无论它们的大小如何，这都应该相对于其父元素垂直和水平地将中间的任何巨大元素居中。

```
.parent {
    position: relative;
    overflow: hidden;
    //optionally set height and width, it will depend on the rest of the styling used
}

.child {
    position: absolute;
    top: -9999px;
    bottom: -9999px;
    left: -9999px;
    right: -9999px;
    margin: auto;

} 
```

* * *

## 回答 #2

> 赞同：195
> 
> 时间：2016-12-09T11:56:48.380

这是一个旧的 Q，但是没有 flexbox 或绝对位置的现代解决方案就是这样工作的。

```
margin-left: 50%;
transform: translateX(-50%); 
```

```
.outer {
  border: 1px solid green;
  margin: 20px auto;
  width: 20%;
  padding: 10px 0;
  /*   overflow: hidden; */
}

.inner {
  width: 150%;
  background-color: gold;
  /* Set left edge of inner element to 50% of the parent element */
  margin-left: 50%; 
  /* Move to the left by 50% of own width */
  transform: translateX(-50%); 
}
```

```
<div class="outer">
  <div class="inner">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quos exercitationem error nemo amet cum quia eaque alias nihil, similique laboriosam enim expedita fugit neque earum et esse ad, dolores sapiente sit cumque vero odit! Ullam corrupti iure eum similique magnam voluptatum ipsam. Maxime ad cumque ut atque suscipit enim quidem. Lorem ipsum dolor sit amet, consectetur adipisicing elit. Excepturi impedit esse modi, porro quibusdam voluptate dolores molestias, sit dolorum veritatis laudantium rem, labore et nobis ratione. Ipsum, aliquid totam repellendus non fugiat id magni voluptate, doloribus tenetur illo mollitia. Voluptatum.</div>
</div>
```

那么它为什么起作用呢？
乍一看，我们似乎向右移动了 50%，然后又向左移动了 50%。这将导致零偏移，那又如何呢？
但 50% 不一样，因为上下文很重要。如果使用相对单位，边距将计算**为父**元素宽度的百分比，而变换将是相对于**同一**元素的 50%。

我们在添加CSS之前就有这种情况

```
 +---------------------------+
       | Parent element P of E     |
       |                           |
       +-----------------------------------------+
       | Element E                               |
       +-----------------------------------------+
       |                           |
       +---------------------------+ 
```

随着`margin-left: 50%`我们添加的样式

```
 +---------------------------+
       | Parent element P of E     |
       |                           |
       |             +-----------------------------------------+
       |             | Element E                               |
       |             +-----------------------------------------+
       |             |             |
       +-------------|-------------+
       |>>>>> a >>>>>|

       a is 50% width of P 
```

和向左的`transform: translateX(-50%)`转变

```
 +---------------------------+
       | Parent element P of E     |
       |                           |
+-----------------------------------------+
| Element E         |                     |
+-----------------------------------------+
|<<<<<<<<< b <<<<<<<|              |
       |            |              |
       +------------|--------------+
       |>>>>> a >>>>|

       a is 50% width of P
       b is 50% width of E 
```

不幸的是，这仅适用于水平居中，因为边距百分比计算始终与宽度相关。即不仅`margin-left`和`margin-right`，而且`margin-top`和`margin-bottom`是相对于宽度计算的。

浏览器兼容性应该没问题： [https ://caniuse.com/#feat=transforms2d](https://caniuse.com/#feat=transforms2d)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-01-28T12:54:33.723

在 div 中放置一个大 div，将其居中，并将图像居中放在该 div 中。

这将其水平居中：

HTML：

```
<div class="imageContainer">
  <div class="imageCenterer">
    <img src="http://placekitten.com/200/200" />
  </div>
</div> 
```

CSS：

```
.imageContainer {
  width: 100px;
  height: 100px;
  overflow: hidden;
  position: relative;
}
.imageCenterer {
  width: 1000px;
  position: absolute;
  left: 50%;
  top: 0;
  margin-left: -500px;
}
.imageCenterer img {
  display: block;
  margin: 0 auto;
} 
```

演示：http: [//jsfiddle.net/Guffa/L9BnL/](http://jsfiddle.net/Guffa/L9BnL/)

要将其垂直居中，您可以将其用于内部 div，但您需要图像的高度才能将其绝对放置在其中。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-04-17T05:31:59.023

游戏迟到了，但我发现这种方法非常直观。 [https://codepen.io/adamchenwei/pen/BRNxJr](https://codepen.io/adamchenwei/pen/BRNxJr)

CSS

```
.imageContainer {
  border: 1px black solid;

  width: 450px;
  height: 200px;
  overflow: hidden;
}
.imageHolder {
  border: 1px red dotted;

  height: 100%;
  display:flex;
  align-items: center;
}
.imageItself {
  height: auto;
  width: 100%;
  align-self: center;

} 
```

HTML

```
<div class="imageContainer">
  <div class="imageHolder">
    <img class="imageItself" src="http://www.fiorieconfetti.com/sites/default/files/styles/product_thumbnail__300x360_/public/fiore_viola%20-%202.jpg" />
  </div>
</div> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-01-29T06:09:22.060

我非常喜欢将图像作为 div/node 的背景——那么`background-position: center`无论屏幕大小如何，您都可以使用该属性将其居中

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-02-08T18:52:45.837

不要对图像标签使用固定或明确的宽度或高度。相反，编码：

```
 max-width:100%;
      max-height:100%; 
```

例如：http: [//jsfiddle.net/xwrvxser/1/](http://jsfiddle.net/xwrvxser/1/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-11-18T19:25:57.517

将一些弹性和溢出设置为隐藏很简单。

[![在此处输入图像描述](../Images/e92b8c9fe9e18d6539c4e0fb8aa4e9f9.png)](https://i.stack.imgur.com/G3JxM.jpg)

```
<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        div {
            height: 150px;
            width: 150px;
            border: 2px solid red;

            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
    <div>
        <img src="sun.jpg" alt="">
    </div>
</body>
</html> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-01-19T12:57:32.500

您可以使用的一个选项是`object-fit: cover`它的行为有点像`background-size: cover`. 更多关于[对象拟合](https://developer.mozilla.org/en-US/docs/Web/CSS/object-fit)。

忽略下面的所有JS，这只是为了演示。

这里的关键是您需要在包装器中设置图像并为其提供以下属性。

```
.wrapper img {
  height: 100%;
  width: 100%;
  object-fit: cover;
} 
```

我在下面创建了一个演示，您可以在其中更改包装器的高度/宽度并查看效果。图像将始终垂直和水平居中。它将占据其父级宽度和高度的 100%，并且不会被拉伸/压扁。这意味着图像的纵横比保持不变。通过放大/缩小来应用更改。

唯一的缺点`object-fit`是它[不适](https://caniuse.com/#feat=object-fit)用于 IE11。

```
// for demo only
const wrapper = document.querySelector('.wrapper');
const button = document.querySelector('button');
const widthInput = document.querySelector('.width-input');
const heightInput = document.querySelector('.height-input');

const resizeWrapper = () => {
  wrapper.style.width = widthInput.value + "px";
  wrapper.style.height = heightInput.value + "px";
}

button.addEventListener("click", resizeWrapper);
```

```
.wrapper {
  overflow: hidden;
  max-width: 100%;
  margin-bottom: 2em;
  border: 1px solid red;
}

.wrapper img {
  display: block;
  height: 100%;
  width: 100%;
  object-fit: cover;
}
```

```
<div class="wrapper">
  <img src="https://i.imgur.com/DrzMS8i.png">
</div>

<!-- demo only -->
<lable for="width">
  Width: <input name="width" class='width-input'>
</lable>
<lable for="height">
  height: <input name="height" class='height-input'>
</lable>
<button>change size!</button>
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-06-29T05:01:29.473

以@yunzen 的出色回答为基础：

我猜很多搜索这个主题的人都在尝试使用大图像作为“英雄”背景图像，例如在主页上。在这种情况下，他们通常希望文本出现在图像上，并使其在移动设备上很好地缩小。

这是这样一个背景图像的完美 CSS（在`<img>`标签上使用它）：

```
/* Set left edge of inner element to 50% of the parent element */
margin-left: 50%;

/* Move to the left by 50% of own width */
transform: translateX(-50%);

/* Scale image...(101% - instead of 100% - avoids possible 1px white border on left of image due to rounding error */
width: 101%;

/* ...but don't scale it too small on mobile devices - adjust this as needed */
min-width: 1086px;

/* allow content below image to appear on top of image */
position: absolute;
z-index: -1;

/* OPTIONAL - try with/without based on your needs */
top: 0;

/* OPTIONAL - use if your outer element containing the img has "text-align: center" */
left: 0; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-28T12:56:31.467

宽度和高度仅作为示例：

```
parentDiv{
    width: 100px;
    height: 100px;
    position:relative; 
}
innerDiv{
    width: 200px;
    height: 200px;
    position:absolute; 
    margin: auto;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
} 
```

如果您的父 div 的左侧和顶部不是屏幕窗口的顶部和左侧，它必须为您工作。这个对我有用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-10-20T11:06:27.823

我发现这是一个更优雅的解决方案，没有 flex：

```
.wrapper {
    overflow: hidden;
}
.wrapper img {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    /* height: 100%; */ /* optional */
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-09-04T00:19:45.980

基于@Guffa的回答
，因为我失去了2个多小时来居中一个非常宽的图像，
对我来说，图像尺寸为2500x100px，视口为1600x1200或全高清1900x1200的工作方式如下：

```
 .imageContainer {
  height: 100px;
  overflow: hidden;
  position: relative;
 }
 .imageCenter {
  width: auto;
  position: absolute;
  left: -10%;
  top: 0;
  margin-left: -500px;
 }
.imageCenter img {
 display: block;
 margin: 0 auto;
 } 
```

我希望这可以帮助其他人更快地完成任务:)

# hibernate - 谁能告诉我如何将 Jasper Report 与 Struts2 和 Hibernate 集成？

> ID：14562460
> 
> 赞同：0
> 
> 时间：2013-01-28T12:51:36.850
> 
> 标签：hibernate, jsp, struts2, jasper-reports

我已经使用 struts2 和 hibernate 框架创建了一个 Web 应用程序。在我的应用程序中，我计划使用 jasper report 进行报告，我通常在桌面应用程序中使用它来进行报告。在桌面应用程序中调用 jasper 报告非常容易。但是在使用 struts2 和 hibernate 框架的 Web 应用程序中，我不知道如何在 jsp 中调用 jasper 报告。谁能告诉我如何在使用 struts2 和 hibernate 框架的 web 应用程序中集成 jasper 报告

这是我到目前为止所做的源代码

**Sample.jasper**位于带有 struts.xml 和 hibernate.conf.xml 的默认文件夹中（它都在预览模式下工作）

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report name" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="a309cf26-d77c-4e85-8d52-2a89cff70117">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="43"/>
    <queryString language="hql">
        <![CDATA[FROM Login]]>
    </queryString>
    <field name="id" class="java.lang.Integer"/>
    <field name="name" class="java.lang.String"/>
    <field name="pass" class="java.lang.String"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="79" splitType="Stretch"/>
    </title>
    <pageHeader>
        <band height="35" splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="61" splitType="Stretch">
            <staticText>
                <reportElement uuid="5eaebc5a-8cc1-45dd-9596-c4057ea97aed" x="118" y="41" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[NAME]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="5eaebc5a-8cc1-45dd-9596-c4057ea97aed" x="271" y="41" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[PASSWORD]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="30" splitType="Stretch">
            <textField>
                <reportElement uuid="07e4ccc0-6491-4a87-b03b-bed972fb344d" x="118" y="4" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{name}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="07e4ccc0-6491-4a87-b03b-bed972fb344d" x="271" y="4" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{pass}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <columnFooter>
        <band height="45" splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport> 
```

**struts.xml**（我不知道如何从动作中调用碧玉）

```
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <!-- Configuration for the default package. -->
   <package name="default" extends="struts-default">

    </package>
</struts> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:17:23.567

看看[**Struts2 JasperReport 教程**](http://struts.apache.org/2.3.8/docs/jasperreports-tutorial.html)（下一次，*在*提问之前；）

然后，您的包应该扩展`jasperreports-default`（为使用 JasperReports 而创建的特定拦截器堆栈），而不是`struts-default`：

```
<package name="default" namespace="/" extends="jasperreports-default"> 
```

并且您的 Action 应该返回一个[Jasper 结果类型](http://struts.apache.org/2.3.8/docs/jasperreports-plugin.html)：

```
<result name="success" type="jasper">
    <param name="location">/jasper/our_compiled_template.jasper</param>
    <param name="dataSource">myList</param>
    <param name="format">PDF</param>
</result> 
```

还要确保您拥有最新的 Struts2 版本，大多数选项都`Struts2 2.1.2+`兼容...

# c++ - 图节点父列表中的weak_ptr VS shared_ptr

> ID：14562464
> 
> 赞同：10
> 
> 时间：2013-01-28T12:51:59.313
> 
> 标签：c++, c++11, shared-ptr, directed-acyclic-graphs

我有一个由 Graph 和 Node 类实现的有向无环图。每个节点都有一个指向子节点的指针列表和一个指向父节点的指针列表。我最近添加了父母，因为一些算法需要快速访问父列表并且图形很小，每个节点只有几个连接，所以没有内存问题。

Child 列表使用 std::shared_ptr 以便节点至少只要有父节点就保存在内存中。但我不希望一个节点拥有它的父母，所以我使用了weak_ptr作为指向父母的指针。

但随后算法出现了问题。算法必须从weak_ptr创建一个新的shared_ptr，所以我不能直接使用operator==，并且使用标准函数如std::find()需要编写一个名为my_weak_ptr.lock()的lambda函数，然后比较它到一些shared_ptr。

如果我切换到 shared_ptr，负责删除节点的代码中的任何小错误都可能导致内存泄漏。或者，如果我有一个指向已删除节点的指针，代码将能够访问一个不应该存在的节点，因此查找一些错误可能会变得更加困难。但是在不取消引用/删除/等方面，使用 shared_ptr 与 weak_ptr 一样安全。当不应该时，（所以它比原始 C++ 指针更好）和 std::find() 可以直接使用，因为 shared_ptr 可以被取消引用，不像weak_ptr。

这里是否有“更好”的设计，或者这是这种特定情况的问题，这取决于例如，如果我执行weak_ptr::lock() 的额外操作或冒着难以找到的错误的风险，这有多重要？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T13:41:16.603

正如您自己所说，`shared_ptr`在两个方向上使用都会创建导致内存泄漏并且很难找到和破坏的圈子 - 您将失去（几乎） shared_ptr 提供的所有好处。`weak_ptr`应该是这样。

你说你的算法必须锁定`weak_ptr`- 我不同意。算法必须从节点获取父`shared_ptr`节点。锁定父节点`weak_ptr`并返回结果是节点的任务，可以正确设置为父节点，也可以设置为 NULL。

节点是否将其父节点存储为`shared_ptr`或是一个实现细节`weak_ptr`。`shared_ptr`通过仅向任何客户提供 s 来封装该细节。

```
class Node
{
  /* ... */
  std::weak_ptr<Node> parent;
public:
  std::shared_ptr<Node> getParent()
  {
    return parent.lock();
  }
}; 
```

**编辑：** 当然，如果有不止一个父母，在概念上同样适用。

**Edit2：** 在评论中，您提到算法迭代您的父母列表，因此有必要为每个算法编写 lambda。如果您经常使用这些算法，请考虑编写一个迭代器适配器，它会自动锁定目标`weak_ptr`并返回`shared_ptr`：

```
template <class WPIterator>
struct LockTheWeakIterator
{
  //static_assert that WPiterator's value_type is some weak_ptr
  //typedef all those iterator typedefs
  typedef typename WPIterator::value_type::element_type element_type;

  shared_ptr<element_type> operator*()
  { return iter->lock(); }

  //provide all the other operators - boost.operators might help with that...

  WPIterator iter;
};

template <class IT>
LockTheWeakIterator<It> lockTheWeak(It iter);

//somewhere...
auto theParentIter = std::find_if(lockTheWeak(parents.begin()), 
  lockTheWeak(parents.end()), 
  whatIAmLookingFor); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T14:02:04.413

大多数有向无环图根本不需要指向其父级的弱指针，而是使用普通指针。在这两种情况下，一旦被删除，每个节点都有责任将自己从每个客户端的父列表中删除。如果您需要在某些特殊情况下从某个父指针检索共享指针，您可以使用 std::shared_from_this 以与您现在使用 lock() 类似的方式。通过这种方式，您可以节省创建和处理共享指针的工作，但仅限于您需要它们的地方。

# javascript - 无法从 jquery 函数中访问 javascript 类

> ID：14562471
> 
> 赞同：0
> 
> 时间：2013-01-28T12:52:31.033
> 
> 标签：javascript, jquery, oop

我在 javascript 类中有这个函数：

```
this.checkSections = function(){
        jQuery('#droppable #section').each( function() {
            nextId = jQuery(this).next().attr('id');
            if (nextId != 'small' && nextId != 'large'){
                jQuery(this).remove();
                this.sections --;
                this.followArticles = 0;
            }else{
                articles = 0;
                obj = jQuery(this).next();
                while (nextId == 'small' || nextId == 'large'){
                    articles++;
                    obj = obj.next()
                    nextId = obj.attr('id');
                    //alert(nextId);
                }
                this.followArticles = articles;
                alert(this.sections);
            }
        });
    } 
```

the `alert(this.sections);`（最后几行）给出了`undefined`虽然 the`sections`被定义和使用的输出。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T12:56:04.533

`this`始终是局部变量，因此在每个函数中都会被覆盖。

您可能会做的是指向您的课程，例如`var myClass = this;`并使用`myClass`而不是`this`.

```
 this.checkSections = function(){

    var myClass = this;

    jQuery('#droppable #section').each( function() {
        nextId = jQuery(this).next().attr('id');
        if (nextId != 'small' && nextId != 'large'){
            jQuery(this).remove();
            myClass.sections --;
            myClass.followArticles = 0;
        }else{
            articles = 0;
            obj = jQuery(this).next();
            while (nextId == 'small' || nextId == 'large'){
                articles++;
                obj = obj.next()
                nextId = obj.attr('id');
                //alert(nextId);
            }
            myClass.followArticles = articles;
            alert(myClass .sections);
        }
    });
} 
```

# java - 如何处理 JAX-RS 中的意外异常

> ID：14562473
> 
> 赞同：0
> 
> 时间：2013-01-28T12:52:32.863
> 
> 标签：java, spring, servlets, jersey, jax-rs

我的技术栈是 Tomcat (servlet 3.0)、Jersey for JAX-RS、Spring 和 Hibernate。当出现意外错误时，例如 Hibernate 中的某些数据转换错误，我不希望客户端看到我的堆栈跟踪，以了解 Tomcat 默认尝试打印的那些异常。但是，我想记录这些异常，以便找出问题所在并进行修复。

我的第一次尝试是使用来自 JAX-RS 的 ExceptionMapper 并且天真地认为这可以解决我的问题。但后来我注意到 Jersey 抛出了它自己的异常，例如未映射的 url 是 com.sun.jersey.api.NotFoundExceptions。这会导致记录我不想要的 404 异常。更糟糕的是，客户端不再获得 404，而是状态码 500。

我可以为球衣抛出的异常创建异常映射器，但我可能会错过一些东西。有这样的最佳实践吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T13:11:59.627

Jersey 直接抛出的所有异常都是 WebApplicationException 的子类，因此如果您想全部捕获它们，只需为该类创建一个 ExceptionMapper 就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:25:00.003

看看这个页面：[http](http://www.rexsl.com/rexsl-core/trap.html) ://www.rexsl.com/rexsl-core/trap.html 。它解释了如何/应该如何捕获 Web 应用程序中的所有运行时异常。建议的解决方案`ExceptionMapper`只会捕获 JAX-RS 异常，这还不够，尤其是在您使用 DB 和 Hibernate 时。

`ExceptionTrap`该类的源代码在[这里](https://github.com/yegor256/rexsl/blob/master/src/main/java/com/rexsl/core/ExceptionTrap.java)。

# vb.net - 快速加入 2 个列表而不重复

> ID：14562476
> 
> 赞同：1
> 
> 时间：2013-01-28T12:52:37.093
> 
> 标签：vb.net, linq

我基本上有 2 个相同对象类型的列表。第一个 (A,B,C,D) 是我的一个对象的属性。

我需要在我的对象中加入第二个列表（B，E，F），但排除重复项。

这意味着我不能只做：

```
 ListA.AddRange(ListB) 
```

我将不得不将其更改为

```
 ForEach item in ListB
       If Not ListA.Contains(item)
          ListA.Add(item)
       EndIf
    Next 
```

或添加：

```
 ListA = ListA.Distinct() 
```

有没有更快更流畅的编码方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T12:58:19.463

如果您已经覆盖了`Equals`并且`GetHashcode`可以[`Enumerable.Union`](http://msdn.microsoft.com/en-us/library/bb358407.aspx)直接使用：

```
var ListC = ListA.Union(ListB).ToList(); 
```

否则，您可以实施`IEqulityCompararer<Foo>`和使用`ListA.Union(ListB, comparer)`.

假设`Foo`是您的类的类型，并且`Name`是您要用于检测重复项的属性。

```
public class FooComparer : IEqualityComparer<Foo>
{
    public bool Equals(Foo x, Foo y)
    {
        if (x == null || y == null) return false;
        // 'A' = 'a' just to demonstrate case-insensitive duplicates
        return x.Name.Equals(y.Name, StringComparison.OrdinalIgnoreCase);
    }

    public int GetHashCode(Foo obj)
    {
        if (obj == null) return int.MinValue;
        return obj.Name.GetHashCode();
    }
} 
```

现在将此比较器用于[`Union`](http://msdn.microsoft.com/en-us/library/bb358407.aspx)：

```
var ListC = ListA.Union(ListB, new FooComparer()).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T12:57:42.703

没有更快的方法可以做到这一点，因为无论您做什么，都需要检查两个列表中的每个元素以查看它是否重复，然后您可以使用自己的代码或使用 Linq 来完成。

无论如何，您将拥有 list1.Count * list2.Count 操作

# java - JAVA 更改 JSESSIONID cookie

> ID：14562477
> 
> 赞同：3
> 
> 时间：2013-01-28T12:52:39.293
> 
> 标签：java, session, wicket, jsessionid

我在 JBOSS 5 上使用 JAVA 和 Wicket。我需要更改 JSESSIONID cookie 值以获取在另一个客户端中使用的相同 Session（设置另一个客户端的 JSESSIONID）。我需要它来验证另一个没有键盘的客户端）。什么是最好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:32:19.123

如果你*真的*想破解`JSESSIONID`（**我不推荐**），你可以这样做：

*   编写一个 Servlet 过滤器
*   `HttpServletRequest`在该过滤器中为（必须将此类的新实例传递给）编写一个包装器`chain.doFilter()`（让我们称之为`RequestWrapper`）
*   在`RequestWrapper`覆盖`getSession(boolean)`方法中

在`getSession(booelan)`实施中，您必须

*   识别（并记住）您要与非键盘用户“共享”的会话（这应该首先出现）
*   确定您想要进行“更改”时的情况（当通过某种检查确定您的非键盘用户时）
*   当您必须“更改”时，您*可以*从`getSession()`

关键时刻是：**你如何识别你的非键盘用户？**如果你不能安全地做到这一点（从你提供的当前信息我看不到它），这是一个**安全漏洞**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:14:26.367

我建议您在应用程序中实现某种**自动登录功能。**有很多可能性（**客户端证书**，或与其他一些 AA 提供商**的单点登录，甚至是域 cookie）。**

如果您尝试使用另一个应用程序登录，您的选项是**HTTP 基本身份验证**、客户端证书，或者只是将用户名/密码发布到您的登录页面（虽然这不是最安全的）。

我更喜欢**Client Certificate**，因为这是最安全的解决方案。

# java - 无法理解日期解析

> ID：14562478
> 
> 赞同：0
> 
> 时间：2013-01-28T12:52:56.353
> 
> 标签：java, date

我有字符串`"1/28/2013 3:26:51 PM"`

```
SimpleDateFormat formatter = new SimpleDateFormat("M/dd/yyyy h:mm:ss a");
    try {
        this.createDate = formatter.parse(xmlPhoto.getCreateDate());
        this.shootDate = formatter.parse(xmlPhoto.getShootDate());
    } catch (ParseException e) {
        e.printStackTrace();
    } 
```

我想从这个字符串中创建一个日期对象，但我得到一个`ParseExceprion`和偏移量 = 19。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T13:05:22.360

标记可能与您的`AM/PM`默认标记不匹配`Locale`。尝试：

```
new SimpleDateFormat("M/dd/yyyy h:mm:ss a", Locale.ENGLISH) 
```

# actionscript-3 - 使用 AS3 录制和播放操作

> ID：14562482
> 
> 赞同：0
> 
> 时间：2013-01-28T12:53:16.343
> 
> 标签：actionscript-3, audio, drawing, record, audiovideoplayback

我正在制作一个绘图应用程序，它允许用户在画布上自由绘图，在一定范围的坐标 x，y 上会发出声音。我的目标是让用户稍后记录和回放整个动作，并像观看视频一样观看。虽然我能够使绘图笔画工作，但我在录制和播放部分遇到问题，尤其是内部音频的录制。我已经搜索了很长时间，我发现这与我的概念非常相似

这是我发现的一个很好的例子，由 ronnie [http://ronnieswietek.com/piano/piano_example.swf](http://ronnieswietek.com/piano/piano_example.swf) 完成 来源：[http ://ronnieswietek.com/piano/piano_example.fla](http://ronnieswietek.com/piano/piano_example.fla)

我有什么办法可以将钢琴键替换为绘图笔画，它会根据坐标生成声音并像示例一样记录和播放笔画和声音？

我被困住和困惑试图找出一种方法来做到这一点..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:43:48.187

如果您可以执行代码来绘制笔画，那么您需要做的就是为这些笔画命令的执行加上时间戳。有很多方法可以解决这个问题。我写了一个例子（只为你）。

您可以将其粘贴到新的 Flash 文档中并运行它。

```
/* First we'll create some variables */

var recording:Array = new Array(); // This is where we'll store all the instances of user action.
var playStart:Number = 0; // Playback will depend on whether this variable is greater than 0.
stage.addEventListener(Event.ENTER_FRAME, tic); // This will run once every frame update.

/* Next we'll create some helper functions */

function createButton(name:String, hue:uint):MovieClip {
    // We'll use this to make some fancy buttons.
    var box:MovieClip = new MovieClip();
    var shape:Sprite = new Sprite();
    shape.graphics.beginFill(hue);
    shape.graphics.drawRect(0, 0, 100, 25);
    box.addChild(shape);

    var txt:TextField = new TextField();
    txt.text = name;
    txt.x = 10;
    txt.y = 3;
    txt.mouseEnabled = false;
    box.addChild(txt);

    return box;
}

function drawCircle(X:Number, Y:Number, Hue:uint = 0x000000):void {
    // This creates circles on stage.
    var circle:Shape = new Shape();
    circle.graphics.beginFill(Hue);
    circle.graphics.drawCircle(0, 0, 10);
    circle.graphics.endFill();
    circle.x = X;
    circle.y = Y;
    addChild(circle);
}

/* Now lets create some buttons; Record, Stop, and Play. And rig'em up to some actions. */

var recordBtn:MovieClip = createButton("Record", 0x10ab00);
addChild(recordBtn);
recordBtn.addEventListener("mouseUp", startRecording);

var stopRecordBtn:MovieClip = createButton("Stop", 0xe90000);
stopRecordBtn.x = 101;
addChild(stopRecordBtn);
stopRecordBtn.addEventListener("mouseUp", stopRecording);

var playBtn:MovieClip = createButton("Play", 0x0069ab);
playBtn.x = 202;
addChild(playBtn);
playBtn.addEventListener("mouseUp", playRecording);

/* In the same order, we'll create those functions */

function startRecording(e:Event):void {
    // Here we'll store a timestampe of when the recording started.
    recording[0] = flash.utils.getTimer();
    // Register for mouseclicks on the stage; we need some kind of input to track.
    stage.addEventListener("mouseUp", recordAction);
}

function stopRecording(e:Event):void {
    // Conversely, we stop recording by not listening anymore.
    stage.removeEventListener("mouseUp", recordAction);
}

function playRecording(e:Event):void {
    // Just like recording, we keep track of when we started.
    playStart = flash.utils.getTimer();
}

function recordAction(e:Event):void {
    if (recording.length >= 1) {
        // First, we create the timestamp, and other relavent info.
        var tick:Object = {
            "time":flash.utils.getTimer(),
            "x":e["stageX"],
            "y":e["stageY"]
        }

        // And store it in our numerical index
        recording.push(tick);
        trace("Time: " + (tick.time - recording[0]) + " Coords: " + tick.x + "," + tick.y);

        // Then we do whatever action we were supposed to do (draw line, play sound, etc.).  Here, we'll draw a circle at the mouse coordinates.
        drawCircle(tick.x, tick.y);
    }
}

function tic(e:Event):void {
    if (playStart > 0) { // Assuming we've indexed a start time...
        if (recording.length > 1) { // and we actually have actions to playback.
            // We'll first normalize those bizzare numbers to a zero starting number.
            var nextAction:Number = recording[1].time - recording[0];
            var playHead:Number = flash.utils.getTimer() - playStart;
            if (playHead > nextAction) {
                // Now that we've matched the time, we execute the same action we did before.
                drawCircle(recording[1].x, recording[1].y, 0xFFFFFF);
                // ... and in this example, I'm removing that instance since we no longer need it.
                recording.splice(1, 1);
            }
        } else {
            // If the length of the recording reaches zero, we'll automatically stop playback too.
            playStart = 0;
        }
    }

} 
```

# asp.net - 从 .aspx.vb 表单检查在 class.vb 中定义的函数的返回

> ID：14562484
> 
> 赞同：0
> 
> 时间：2013-01-28T12:53:38.153
> 
> 标签：asp.net, vb.net, vb.net-2010

真的很奇怪，我找不到任何关于标题的东西。我的问题是我有一个`class1.vb`包含`Function read`. 该函数基本上`string ByVal`从 my中接收 a，`Reading.aspx.vb`它基本上是一个文本。然后它会读取该文本并搜索一个单词。如果找到“海”这个词，那么`Function read Returns a MsgBox("found")`。

在我`Reading.aspx.vb`的 中，文本字符串是通过`Reading.aspx.vb`调用函数从我的代码传递的：

**读取.aspx.vb**

```
 Dim rd as new class1
 rd.read(txtString) 
```

**类1.vb**

```
>  Public Function Read(ByVal value1 As String) 
```

代码阅读到这里并搜索单词`sea`

如果找到该单词`sea`，则 `Function Read`返回，`Found`否则返回`Not found`。

`Function Read`我的问题是如何确定`Read1.aspx.vb`表单的返回值是什么。因为我打算从我的`Read.aspx.vb`表格中检查`Function read`返回的内容。如果返回`found`则停止循环遍历其他文本文件，如果返回`Not found`则继续在`Read.aspx.vb`. 所以我的问题是如何`Class1.vb Function Read()`从我的`Read.aspx.vb`表单中确定我的返回值并采取相应的行动。有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:42:44.810

我从你的问题中了解到，你有这样的事情：

```
Public Class Test
    Public Function Read(ByVal value As String) As String
        If (value.Contains("sea")) Then
            Return "Found"
        End If

        Return "Not Found"
    End Function        
End Class 
```

所以，你所要做的就是。

```
If (rd.Read("Lorem Ipsum Dolor Sit Amet sea Lorem") = "Found") Then
    DoSomethingWhenFound()
Else
    DoSomethingWhenNotFound()
End If 
```

你没试过这个吗？

# org-mode - 按类别而不是按文件的时间报告

> ID：14562486
> 
> 赞同：2
> 
> 时间：2013-01-28T12:53:41.190
> 
> 标签：org-mode

在 org-mode 时间报告（在 org-agenda 视图中使用 R 激活）中，时间按文件求和。有没有办法（或不方便）按类别进一步总结？

通过文件总结时间对于议程中文件很少的人（例如 self.org、people.org、academia.org、salary.org）是实用的，但对于将所有内容收集在一个 org 文件中的人来说是不切实际的（似乎有很多人在 Internet 上描述了他们的配置），或者有很多 org 文件的人（到目前为止我的情况，以及其他一些人在讨论中的情况）。该系统的一个扩展，将使报告对所有人可用，将按类别对时间求和（例如，文件标题中的#+CATEGORY）。这将与#+CATEGORY 信息已经在议程视图中替换文件名的方式保持一致，从而允许在按类别排序时将来自不同文件的任务排序在一起。

我正在使用 GNU Emacs 24.3.50.1 和 Org-mode 版本 7.9.3d。

# postgresql - 将值传递给 PostgreSQL 中的 db_link_exec 查询

> ID：14562488
> 
> 赞同：0
> 
> 时间：2013-01-28T12:53:47.863
> 
> 标签：postgresql, dblink

我需要将从数据库中读取的一些信息插入到属于另一个表的表中。

我在 RECORD 变量中有我的信息，我们称之为 my_row。

显然，当我尝试

```
SELECT dblink_exec('INSERT INTO remote_table VALUES (my_row.*)'); 
```

它无法识别 my_row 是谁。

我还有什么其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:40:26.033

尝试类似：

```
SELECT dblink_exec('INSERT INTO remote_table VALUES '|| quote_literal(my_row.*)); 
```

这个想法- 使用动态SQL。要将行转换为其文本表示，请转义特殊字符并形成`INSERT`语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:04:58.323

这是一个选项：

```
CREATE TABLE junk(a text, b text,c TIMESTAMP, d hstore);

DO
$BODY$
DECLARE 
RecordVar junk%rowtype;
SqlCommand TEXT:= 'INSERT INTO junk(a,b,c,d) VALUES(';
BEGIN
   RecordVar.a = 'junk''''a';
   RecordVar.b = 'junkb';
   RecordVar.c = NOW();
   RecordVar.d = '"key1"=>"value1"';
   SqlCommand := SqlCommand  || '''' || RecordVar.a || '''' || ',' || '''' || RecordVar.b || '''' || ',' ||'''' || RecordVar.c || '''' || ',' ||'''' || RecordVar.d || '''' || ');';

   RAISE NOTICE 'SQL = %',SqlCommand;

   PERFORM dblink('dblink_logging',SqlCommand);

END;
$BODY$

    Select a,b,c from junk;
    junk'a|junkb|2013-01-28 09:53:22.308|"key1"=>"value1"
    DROP TABLE junk; 
```

# javascript - 如何求两个数组的平均值？

> ID：14562489
> 
> 赞同：0
> 
> 时间：2013-01-28T12:53:48.383
> 
> 标签：javascript, arrays

我有两个具有相同条目数的数组，例如：

```
var one = [0,20,30,40] ;
var two = [43,20,10,50] ; 
```

我需要以百分比查找这两个数组的相似性，
我尝试了类似的方法：

```
var avg = (one[0]-two[0] + one[1]-two[1] + one[2]-two[2] + one[3]-two[3]) / 4 ; 
```

但是结果并不好，
如何计算这样的适当平均值？

**编辑：*请把它想象成两个声音数据的相似性！***
意思是：

```
var one = [0,20,30,40] ;
var two = [0,40,60,80] ; 
```

*这些的平均值将是100％..*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:00:59.193

如果您只想要一个数字，它是两个数组组合的平均值，请尝试以下操作：

```
var one = [0,20,30,40];
var two = [43,20,10,50];
var i, j;
var average = 0;

for(i = 0; i < one.length; i++){
    average += one[i];
}
for(j = 0; j < two.length; j++){ // (two arrays for flexibility.)
    average += two[j];
}
console.log(average /= (i+j));
// 26.625 
```

如果你想要数组的平均值，在特定索引处，试试这个：

```
var one = [0,20,30,40];
var two = [43,20,10,50];
var i;
var average = [];

for(i = 0; i < one.length; i++){
    average.push((one[i] + two[i]) / 2);
}

console.log(average);
// [21.5, 20, 20, 45] 
```

**编辑：**

根据我对您的编辑的了解，您希望将平均百分比添加到`one`, 以获得`two`. 这应该有效：

```
var i, n = 0;
var average = 0;

var one = [0,20,30,40] ;
var two = [0,60,70,120] ;

for(i = 0; i < one.length; i++){
    if(one[i] != 0){
        average += two[i] / one[i];
        n++;
    }
}
average = (average / n - 1)*100; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-28T13:29:31.350

```
var one = [0,20,30,40];
var two = [43,20,10,50];
var temp=one.concat(two)
var sum=0 , average=0;
for (i=0; i<temp.length;i++){
sum+=temp[i];
} 
avg=sum/i
document.write(sum);
document.write("<br>");
document.write(avg); 
```

这是一个简单的代码。让我知道这是否是您要求的。

# .net - Protobuf-net Vs BinarySerializer 序列化列表 尺寸

> ID：14562490
> 
> 赞同：1
> 
> 时间：2013-01-28T12:53:50.407
> 
> 标签：.net, protobuf-net

我已经开始使用 protobuf-net 库。它将序列化速度提高了 30%，但我对生成的文件大小有疑问。

我的数据模型是：

```
 [Serializable]
    [ProtoContract(SkipConstructor = true)]
    private class ReportDataItem
    {
        [ProtoMember(1)]
        public Int32 C11 { get; set; }
        [ProtoMember(2)]
        public Int32 C12 { get; set; }
        [ProtoMember(3)]
        public Int32 C13 { get; set; }
        [ProtoMember(4)]
        public Int32 C14 { get; set; }
        [ProtoMember(5)]
        public Int32 C15 { get; set; }
        [ProtoMember(6)]
        public Int32 C16 { get; set; }
        [ProtoMember(7)]
        public Int32 C17 { get; set; }
        [ProtoMember(8)]
        public Int32 C18 { get; set; }
        [ProtoMember(9)]
        public Int32 C19 { get; set; }
        [ProtoMember(10)]
        public Int32 C110 { get; set; }

        [ProtoMember(11)]
        public Int64 C21 { get; set; }
        [ProtoMember(12)]
        public Int64 C22 { get; set; }
        [ProtoMember(13)]
        public Int64 C23 { get; set; }
        [ProtoMember(14)]
        public Int64 C24 { get; set; }
        [ProtoMember(15)]
        public Int64 C25 { get; set; }
        [ProtoMember(16)]
        public Int64 C26 { get; set; }
        [ProtoMember(17)]
        public Int64 C27 { get; set; }
        [ProtoMember(18)]
        public Int64 C28 { get; set; }
        [ProtoMember(19)]
        public Int64 C29 { get; set; }
        [ProtoMember(20)]
        public Int64 C210 { get; set; }

        [ProtoMember(21)]
        public String C31 { get; set; }
        [ProtoMember(22)]
        public String C32 { get; set; }
        [ProtoMember(23)]
        public String C33 { get; set; }
        [ProtoMember(24)]
        public String C34 { get; set; }
        [ProtoMember(25)]
        public String C35 { get; set; }
        [ProtoMember(26)]
        public String C36 { get; set; }
        [ProtoMember(27)]
        public String C37 { get; set; }
        [ProtoMember(28)]
        public String C38 { get; set; }
        [ProtoMember(29)]
        public String C39 { get; set; }
        [ProtoMember(30)]
        public String C310 { get; set; }
    }

    [Serializable]
    [ProtoContract()]
    private class ReportData
    {
        [ProtoMember(1, DataFormat = DataFormat.Group)]
        public List<ReportDataItem> ReportDataItems { get; set; }
    }

    [Serializable]
    [ProtoContract()]
    private class Report
    {
        [ProtoMember(1)]
        public ReportData ReportData { get; set; }
    } 
```

所以当我尝试序列化时：

```
 private static void ObjectSerialization()
    { 
```

常量字符串 someData = @"qtwretyfsjdabvfsjdlfudspogds;kfg;lkfdsl;gkl;dsfkgl;kdfsgr;iweprpo\z\xlvcfmxzcbvjiorsdifdlf\jl;dsa";

```
 Report report = new Report();
            report.ReportData = new ReportData {ReportDataItems = new List<ReportDataItem>()};

            for (int j = 0; j < 10; j++)
            {
                ReportDataItem reportDataItem = new ReportDataItem();

                reportDataItem.C11 = j;
                reportDataItem.C12 = j;
                reportDataItem.C13 = j;
                reportDataItem.C14 = j;
                reportDataItem.C15 = j;
                reportDataItem.C16 = j;
                reportDataItem.C17 = j;
                reportDataItem.C18 = j;
                reportDataItem.C19 = j;
                reportDataItem.C110 = j;

                reportDataItem.C21 = j;
                reportDataItem.C22 = j;
                reportDataItem.C23 = j;
                reportDataItem.C24 = j;
                reportDataItem.C25 = j;
                reportDataItem.C26 = j;
                reportDataItem.C27 = j;
                reportDataItem.C28 = j;
                reportDataItem.C29 = j;
                reportDataItem.C210 = j;

                reportDataItem.C31 =someData;
                reportDataItem.C32 = someData;
                reportDataItem.C33 = someData;
                reportDataItem.C34 = someData;
                reportDataItem.C35 = someData;
                reportDataItem.C36 = someData;
                reportDataItem.C37 = someData;
                reportDataItem.C38 = someData;
                reportDataItem.C39 = someData;
                reportDataItem.C310 = someData;

                report.ReportData.ReportDataItems.Add(reportDataItem);
            }

            using (Stream stream = new FileStream(@"c:\Test\Object\0.bin", FileMode.Create, FileAccess.Write, FileShare.Write))
            {
                Serializer.Serialize(stream, report);
            }

            using (Stream stream = new FileStream(@"c:\Test\Object\bf_0.bin", FileMode.Create, FileAccess.Write, FileShare.Write))
            {
                BinaryFormatter formatter = new BinaryFormatter();
                formatter.Serialize(stream, report);
            }
} 
```

我在下面提供了结果：

*   ***protobuf-net**文件大小**10428 字节***
*   ***BinaryFormatter**文件大小**3458 字节***

您能帮我找到减小结果 protobuf-net 文件大小的正确解决方案吗？我从 VS 包管理器作为包安装了 Protobuf-net。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:12:20.577

我将最后几行更改为：

```
using (Stream stream = new FileStream(@"pb.bin", FileMode.Create,
     FileAccess.Write, FileShare.Write))
{
    Serializer.Serialize(stream, report);
    Console.WriteLine(stream.Length);
}
Console.WriteLine(new FileInfo("pb.bin").Length);

using (Stream stream = new FileStream(@"bf.bin", FileMode.Create,
     FileAccess.Write, FileShare.Write))
{
    BinaryFormatter formatter = new BinaryFormatter();
    formatter.Serialize(stream, report);
    Console.WriteLine(stream.Length);
}
Console.WriteLine(new FileInfo("bf.bin").Length); 
```

获取写入流的数据量，以及文件的最终大小。我的结果：

```
1628
1628
3144
3144 
```

这对我来说看起来不错。请验证您的数据。

您是否有可能使用比“某些数据”更大的字符串？如果是这样，那么有一个重要的问题：您是否可能在实际代码中复制字符串？如果不是，则 BF 测试无效，因为默认情况下它将使用*参考跟踪*，因此只存储一次字符串 - 但您的真实数据的行为会非常不同。如果您***要***多次使用相同的字符串，那么您可以在 protobuf-net 中模仿这种重用：

```
[ProtoMember(21, AsReference=true)]
public String C31 { get; set; }
[ProtoMember(22, AsReference = true)]
public String C32 { get; set; }
[ProtoMember(23, AsReference = true)]
public String C33 { get; set; }
[ProtoMember(24, AsReference = true)]
public String C34 { get; set; }
[ProtoMember(25, AsReference = true)]
public String C35 { get; set; }
[ProtoMember(26, AsReference = true)]
public String C36 { get; set; }
[ProtoMember(27, AsReference = true)]
public String C37 { get; set; }
[ProtoMember(28, AsReference = true)]
public String C38 { get; set; }
[ProtoMember(29, AsReference = true)]
public String C39 { get; set; }
[ProtoMember(30, AsReference = true)]
public String C310 { get; set; } 
```

现在的输出：

```
939
939
3144
3144 
```

然而！如果字符串通常*不*重复，这将略微增加输出，并且会使其他 protobuf 实现难以使用它（它是有效的 protobuf 数据，但通过一些巫术）。

例如，如果您有自定义名称/国家/地区名称/状态等以字符串表示但重复批次的内容，则上述内容很有用。

# javafx-2 - 如何在 Hackintosh 上运行 JavaFX

> ID：14562493
> 
> 赞同：1
> 
> 时间：2013-01-28T12:54:01.927
> 
> 标签：javafx-2, java-7, hackintosh

我在 JavaFx 中创建了一个应用程序并进行了部署。它可以在 Mac 和 Windows 系统中完美运行，但在 Hackintosh 系统中无法运行。

当我启动应用程序时，它会显示“ `JAVAFX Application quit unexpectedly`”消息。

我猜这发生在 Hackintosh 系统中的每个 java 应用程序中。

我还需要在 hackintosh 中运行 javafx，有什么解决方案吗？

# eclipse - 如何使 Eclipse/EPIC 与 perlbrew 一起工作

> ID：14562501
> 
> 赞同：4
> 
> 时间：2013-01-28T12:54:15.460
> 
> 标签：eclipse, perl, epic, perlbrew

我使用 Eclipse/EPIC 进行编程/调试，使用 perlbrew 在 perl 版本之间切换。出于任何原因，Eclipse/EPIC 无法识别切换由 perlbrew 启动的 perl 版本。切换版本是持久的，但只会影响终端会话。我已经尝试过这个论坛中建议的方法......

*单击 Window->Preferences->Perl EPIC 并将 Perl 可执行文件设置为*

```
perl5/perlbrew/bin/perl 
```

......但这没有用。输入后，Eclipse/EPIC 会尝试运行该`perl -v`命令，但该命令失败。我认为这是因为在此路径中没有可访问的可执行 perl 命令。实际上应该由 perlbrew 更改的路径设置显然没有任何效果。当指向绝对路径时...

`perl5/perlbrew/perls/<version>/bin/perl`

...Eclipse/EPIC 考虑了请求的版本，但这实际上不是我想要的。有没有其他合适的方法可以让 Eclipse/EPIC 与 perbrew 一起工作？我正在运行： MAC OS X -> Mountain Lion, Eclipse -> 4.2 JUNO, EPIC -> 0.5, perlbrew -> 0.58 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-21T03:54:17.150

尝试使用完整路径：

```
/Users/<user>/perl5/perlbrew/perls/<version>/bin/perl 
```

正如对您的问题的评论所建议的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T07:46:31.570

我发现的唯一解决方法是使用 perl 的包装器并将其设置为 perl 解释器。如果您的 perlbrew init 在默认路径中，您可以使用以下 bash 包装器：

```
#!/bin/bash
ACTIVE_PERL=`grep -o 'PERLBREW_PATH=.*' $HOME/.perlbrew/init | sed -e 's/"\|:/\n/g' | awk '/perls\/perl/ { print $0."/perl" }'`
$ACTIVE_PERL "$@" 
```

将它放在某处，使其可执行（ chmod 0755 ）并将其设置为 EPIC 中的 perl 解释器。每次 EPIC 转到 perl 解释器时都会执行该操作，因此如果您使用 perlbrew 切换，则会执行此操作。希望能帮助到你。

# push-notification - 带有 Android GCM 和 Fresh Planet 扩展的空中推送通知

> ID：14562503
> 
> 赞同：1
> 
> 时间：2013-01-28T12:54:22.937
> 
> 标签：push-notification, google-cloud-messaging, air-native-extension

我正在为 Android 和 iOS 使用 Fresh Planet 的 AIR 推送通知扩展。每个人都说它工作正常，但我无法让它与 Android 一起工作。

我正确地实例化了扩展，并尝试按照他们在文档中所说的在 GCM 上注册我的设备，调用...

```
PushNotification.getInstance().registerForPushNotification("myAPPid"); 
```

它工作正常，因为我可以在 LogCat 中看到下一行：

```
c2dmRegister(23756): C2DMRegisterFunction.call 464122159769
c2dmRegister(23756): intent with extras PendingIntent{41284dc8: android.os.BinderProxy@412745c8} ... 464122159769 
```

但是，在那之后什么也没有发生。接收器类永远不会被调用，因此，as3 回调永远不会被调用......

我不知道还能做什么。

在此先感谢，保拉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:33:07.560

添加“空气”。在前面对应的 android 清单中的应用程序 id 是它对我有用的原因。

另请参阅[https://github.com/freshplanet/ANE-Push-Notification/issues/11](https://github.com/freshplanet/ANE-Push-Notification/issues/11)

# mpi - 如何将 MKL 与 MPI 链接？

> ID：14562506
> 
> 赞同：0
> 
> 时间：2013-01-28T12:54:27.813
> 
> 标签：mpi, intel-mkl

我想用 MKL 编译这个 C 代码，但是当我使用 command 运行它时`mpicc -mkl mkl_thread.c`，它给了我一个关于 unrecognized command line option 的错误`-mkl`。当我`mpicc mkl_thread.c -o mkl_thread`以 . 我不知道如何使用 MKL 运行​​或链接它。

我的代码是：

```
define NUM_PROCS 5 

int main (int argc, char ** argv)

{

    int threads_per_proc[NUM_PROCS] = { 1,2 ,3, 4,5 };
    int rank;
    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    // ...
    // Signal an error if rank >= 5
    // ...
    mkl_set_num_threads(threads_per_proc[rank]);
    MPI_Finalize();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:01:20.743

`-mkl`是英特尔无法识别的特定选项`mpicc`。

对于非英特尔编译器，您可以明确指定链接选项。

```
$ mpicc mkl_thread.c -o mkl_thread \
        -I$(MKLROOT)/include -L$(MKLROOT)/lib/intel64 \
        -lmkl_intel_lp64 -lmkl_intel_thread -lmkl_core \
        -liomp5 -lpthread -lm 
```

有关其他链接选项，请参阅[英特尔® 数学核心函数库链接线顾问](http://software.intel.com/sites/products/mkl/)。

# crystal-reports - Crystal Reports 2011 计算给定日期范围内的工作天数

> ID：14562508
> 
> 赞同：0
> 
> 时间：2013-01-28T12:54:30.250
> 
> 标签：crystal-reports

我正在尝试为工匠制作一份使用报告。报告提示输入开始日期和结束日期。如果工匠在日期范围内的任何一天休假，它应该检查休假表，并将休假天数添加到指定日期范围内的周末和公共假期，然后从数字中减去上述总计数日期范围内的天数（这样做是为了只保留工匠实际工作的天数）。我怎样才能最好地使用 Crystal Reports 实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:48:47.867

可以[在这篇文章](https://stackoverflow.com/a/14646487/909134)中找到计算两个日期之间工作日的公式。

您可以从子报表中的运行总数中获取休假日期的数量，并将其作为共享变量返回到主报表（如果无法在主报表中包含该变量，如果没有其他数据会更容易获得） . 然后从上面链接的公式的结果中减去该数字。
在子报表上使用参数并将主报表日期参数链接到它们。

# matlab - 用matlab看视频

> ID：14562513
> 
> 赞同：0
> 
> 时间：2013-01-28T12:54:41.253
> 
> 标签：matlab

> **可能重复：**
> [在 Matlab 中读取电影文件](https://stackoverflow.com/questions/5591331/reading-a-movie-file-in-matlab)

我想用 MATLAB 读取 AVI 文件，但出现异常：

> 索引超出矩阵维度。

这是我的代码：

```
obj = mmreader('vidd.avi');
a=read(obj);
frames=get(obj,'numberOfFrames');
for k=1:frames-1
    I(k).cdata=a(:,:,:,k);
    I(k).colormap=[];
end
implay(I); 
```

# c++ - libpqxx 结束准备好的语句和结果

> ID：14562515
> 
> 赞同：2
> 
> 时间：2013-01-28T12:54:51.170
> 
> 标签：c++, postgresql, libpqxx

我将通过 libpqxx 和 C++ 创建到 Postgresql 数据库的连接，然后执行几个准备好的语句，这些语句返回结果（我将遍历它们）。我来自Java背景，过程是：

1.  打开数据库连接
2.  准备报表
3.  调整准备好的语句参数
4.  执行语句
5.  遍历结果集
6.  关闭结果集
7.  关闭准备好的语句
8.  关闭数据库连接

我有 1-5 和 8 的示例代码，但我找不到如何关闭结果对象和准备好的语句对象

示例代码：

```
connection C("dbname=mydbname user=postgres password=mypass hostaddr=127.0.0.1 port=5432");
string tableName("mydbtable");
if (C.is_open()) {
    cout << "We are connected to " << C.dbname() << endl;
} else {
    cout << "We are not connected!" << endl;
}

result r;
try {
    const std::string sql =
            "SELECT * FROM " + tableName + " WHERE sn_autoinc10 = $1";
    C.prepare("find", sql);
    //C.prepare("findtable", ) ("integer");
    work W(C);
    r = W.prepared("find")(0).exec();
    for (int rownum = 0; rownum < r.size(); ++rownum) {
        const result::tuple row = r[rownum];
        for (int colnum = 0; colnum < row.size(); ++colnum) {
            const result::field myField = row[colnum];
            std::cout << myField.c_str() << ' ';
        }
        std::cout << std::endl;
    }
    C.disconnect();
} catch (const std::exception &e) {
    std::cerr << e.what() << std::endl;
} 
```

我是否需要使用 c++ 和 libpqxx 显式关闭结果和准备好的语句以避免内存泄漏？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T23:25:57.523

事务和结果对象在被删除时会自动清理，这意味着当它们超出范围时会被清理。

所以你的代码不会泄漏内存，但它并不*完美*：

*   你不应该重用`r`变量 - 最好在`try`块内声明结果对象，这样它就会在不需要时被清除；
*   您不应该`C.disconnect()`在`try`块内调用 - 最好只允许`C`超出范围。

在 C++ 中，您不应该在最小需要范围之外声明变量 - 让编译器为您优化它。

# ruby - Omniauth Github 身份验证

> ID：14562526
> 
> 赞同：1
> 
> 时间：2013-01-28T12:55:28.247
> 
> 标签：ruby, github, omniauth, ruby-on-rails-4

我正在构建一个允许用户使用他们的 Github 身份验证凭据登录的应用程序。问题是，我在文档中找不到任何关于限制对某些用户的访问的内容。例如，我希望来自一组特定组织的用户能够登录并非所有只有 github 帐户的人。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:47:16.640

您可以选择在循环中的哪个时间点对它们进行身份验证，在 Github 之前还是在 Github 之后。从您的问题来看，您希望在身份验证期间/之后执行此操作。Github 允许您添加组织信息，但我没有使用过它，所以我不知道作为会员标志符有多安全，但我认为它已经足够好了。

在 auth 上，您将在[auth hash](https://github.com/intridea/omniauth/wiki/Auth-Hash-Schema)`info`的键中收到有关用户的大量详细信息，该键位于 Rack env 下的 key 下。如果您查看返回的身份验证哈希，它可能包含组织详细信息，或者您可以在此时请求它们。您可以在此基础上运行一个简单的条件，如果用户不在，则让他们失败。如果您查看[Omniauth wiki 上的 Sinatra 示例，](https://github.com/intridea/omniauth/wiki/Sinatra-Example)您会看到它说的一点`'omniauth.auth'``# do whatever you want with the information!`. 在这一点上，您将检查并通过或失败它们（我选择它是因为它比 Rails 示例更清晰，但对于 Rails，您只需在控制器中映射到的操作中执行相同的操作）。您可以引发异常，或者（我的选择是）将它们重定向到故障端点，这取决于您。

如果可能的话，最好在人们尝试登录之前警告他们。

# android - android中的发送事件

> ID：14562528
> 
> 赞同：0
> 
> 时间：2013-01-28T12:55:30.727
> 
> 标签：android, adb

我在一些文档中看到**getevent**给出了一些十六进制值，并且在传递给**sendevent**时，我们需要将这些值转换为十进制。我的问题是，如果值是十六进制的**ffffffff**，我们应该在 sendevent 中传递什么值？我尝试通过 -1 和 4294967295 但没有得到预期的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:40:00.053

发送事件参数在[toolbox/sendevent.c](https://android.googlesource.com/platform/system/core/+/android-4.2.1_r1/toolbox/sendevent.c)中定义为：

```
struct input_event {
    struct timeval time;
    __u16 type;
    __u16 code;
    __s32 value;
}; 
```

并使用以下命令转换命令行参数`atoi()`：

```
event.value = atoi(argv[4]); 
```

我不明白为什么`-1`行不通。你如何检查命令是否失败？

# html - HTML 中带有表 td 和 tr 的行分隔符

> ID：14562532
> 
> 赞同：1
> 
> 时间：2013-01-28T12:55:44.437
> 
> 标签：html, css

我想像这样在 html 表格中放置行分隔符：如下所示的**黑**线 Z 形“镜像”，我尝试设置最后一个左侧**td**和第一个右侧**td**边框，但我无法想到我怎么能德拉姆垂直线

![在此处输入图像描述](../Images/6424fab758ac02ece6637e4e7b3f14b5.png)

我试过这个： -

```
<table style="width: 100%">
            <tr>
                <td colspan="2" style="text-align: right">
                    <!--<img src=""/>-->
                </td>
            </tr>
            <tr>
                <td colspan="2" style="text-align: center">
                    <label style="font-size: 26px; color: #1513CB">Register To Brand</label>
                </td>
            </tr>
            <tr>
                <td>
                    <div>
                        <div style="font-size: 20px; color: #1513CB">Welcome!</div>
                        <div style="font-size: 18px; color: black">Dr John.G.Doe Phd</div>
                    </div>
                </td>
                <td style="border-bottom: 1px solid black"></td>
            </tr>
            <tr>
                <td>
                    <table>
                        <tr>
                            <td>
                                <img src="Images/TabScore1.png" width="25" height="25" /></td>
                            <td>
                                <img src="Images/TabScore1.png" width="25" height="25" /></td>
                            <td></td>
                        </tr>
                    </table>
                </td>
                <td>
                    <input type="text" /></td>
            </tr>
            <tr>
                <td >
                    <input type="text" /></td>
                <td>
                    <input type="text" /></td>
            </tr>
            <tr>
                <td >
                    <input type="text" /></td>
                <td>
                    <input type="text" /></td>
            </tr>
            <tr>
                <td style="border-bottom: 1px solid black";">
                    <input type="text" /></td>
                <td>
                    <input type="text" /></td>
            </tr>
        </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:00:33.070

你在正确的轨道上。您只需为表格元素添加更多`border-X`样式和设置。`border-collapse: collapse`

另请注意，通常右侧单元格的边界将覆盖其左侧兄弟单元的边界。覆盖顶部“兄弟姐妹”边界的底部单元格也是如此（我知道，这里不是真正的兄弟姐妹，但你明白了......）。

```
<table style="width: 100%; border-collapse: collapse;">
        <tr>
            <td colspan="2" style="text-align: right">
                <!--<img src=""/>-->
            </td>
        </tr>
        <tr>
            <td colspan="2" style="text-align: center">
                <label style="font-size: 26px; color: #1513CB">Register To Brand</label>
            </td>
        </tr>
        <tr>
            <td>
                <div>
                    <div style="font-size: 20px; color: #1513CB">Welcome!</div>
                    <div style="font-size: 18px; color: black">Dr John.G.Doe Phd</div>
                </div>
            </td>
            <td></td>
        </tr>
        <tr>
            <td>
                <table>
                    <tr>
                        <td>
                            <img src="Images/TabScore1.png" width="25" height="25" /></td>
                        <td>
                            <img src="Images/TabScore1.png" width="25" height="25" /></td>
                        <td></td>
                    </tr>
                </table>
            </td>
            <td  style="border-top: 1px solid black; border-left: 1px solid black;">
                <input type="text" /></td>
        </tr>
        <tr>
            <td >
                <input type="text" /></td>
            <td style="border-left: 1px solid black;">
                <input type="text" /></td>
        </tr>
        <tr>
            <td >
                <input type="text" /></td>
            <td style="border-left: 1px solid black;">
                <input type="text" /></td>
        </tr>
        <tr>
            <td style="border-bottom: 1px solid black";">
                <input type="text" /></td>
            <td style="border-left: 1px solid black;">
                <input type="text" /></td>
        </tr>
    </table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:17:15.310

您需要折叠表格以删除*`td`s*的默认间距，例如*`table-collapse: collapse;`*. 然后只需*`border-right: solid 1px;`*在表格左侧的每个第一个 td 上添加一个。

```
<html>
    <head></head>
    <body>
        <table style="width: 100%; border-collapse: collapse;">
            <tbody>
                <tr>
                    <td colspan="2" style="text-align: right;">
                        <!--<img src=""/>-->
                    </td>
                </tr>
                <tr>
                    <td colspan="2" style="text-align: center">
                        <label style="font-size: 26px; color: #1513CB">Register To Brand</label>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div>
                            <div style="font-size: 20px; color: #1513CB">Welcome!</div>
                            <div style="font-size: 18px; color: black">Dr John.G.Doe Phd</div>
                        </div>
                    </td>
                    <td style="border-bottom: 1px solid black"></td>
                </tr>
                <tr>
                    <td style="border-right: solid 1px;">
                        <table>
                            <tbody>
                                <tr>
                                    <td>
                                        <img src="Images/TabScore1.png" width="25" height="25" />
                                    </td>
                                    <td>
                                        <img src="Images/TabScore1.png" width="25" height="25" />
                                    </td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                    <td>
                        <input type="text" />
                    </td>
                </tr>
                <tr>
                    <td style="border-right: solid 1px;">
                        <input type="text" />
                    </td>
                    <td>
                        <input type="text" />
                    </td>
                </tr>
                <tr>
                    <td style="border-right: solid 1px;">
                        <input type="text" />
                    </td>
                    <td>
                        <input type="text" />
                    </td>
                </tr>
                <tr>
                    <td style="border-bottom: 1px solid black;border-right: solid 1px;">
                        <input type="text" />
                    </td>
                    <td>
                        <input type="text" />
                    </td>
                </tr>
            </tbody>
        </table>
    </body>
</html> 
```

# android - 在 Android Eclipse 中旋转图像时出错

> ID：14562535
> 
> 赞同：2
> 
> 时间：2013-01-28T12:56:01.223
> 
> 标签：android, eclipse

这是我的主要代码..

```
public class MainActivity extends Activity {

private static int RESULT_LOAD_IMAGE = 1;
private Spinner spinner1;
Bitmap b;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

     addListenerOnSpinnerItemSelection();

    Intent i = new Intent(Intent.ACTION_PICK,   android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
            startActivityForResult(i, RESULT_LOAD_IMAGE);

}

/*@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}*/

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    ImageView imageView = (ImageView) findViewById(R.id.imgView);

    if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
        Uri selectedImage = data.getData();
        String[] filePathColumn = { MediaStore.Images.Media.DATA };

        Cursor cursor = getContentResolver().query(selectedImage,
                filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        String picturePath = cursor.getString(columnIndex);
        cursor.close();

        b = BitmapFactory.decodeFile(picturePath);

        imageView.setImageBitmap(b);

    }

}

public void addListenerOnSpinnerItemSelection() {
    ImageView imageView = (ImageView) findViewById(R.id.imgView);
    spinner1 = (Spinner) findViewById(R.id.spinner1);
    spinner1.setOnItemSelectedListener(new CustomOnItemSelected(imageView, this , b));
  }

} 
```

这是另一堂课。。

```
public class CustomOnItemSelected implements OnItemSelectedListener {

ImageView i;
Context c;
private Bitmap myBitmap;

CustomOnItemSelected(ImageView i,Context c, Bitmap b)
{
    this.i = i;
    this.c = c;
    myBitmap = b;
}

//private static final float ROTATE_FROM = 0.0f; 
```

// 私有静态最终浮点数 ROTATE_TO = -10.0f * 360.0f;

public void onItemSelected(AdapterView parent, View view, int pos,long id) { Toast.makeText(parent.getContext(), "OnItemSelectedListener : " + parent.getItemAtPosition(pos).toString(), Toast.LENGTH_SHORT).show( );

```
 if(parent.getItemAtPosition(pos).toString().equals("Rotate"))
  {

       Matrix mat = new Matrix();
        mat.postRotate(90);
        Bitmap bMapRotate = Bitmap.createBitmap(myBitmap, 0, 0, myBitmap.getWidth(), myBitmap.getHeight(), mat, true); //GIVING ERROR ON THIS LINE...
        i.setImageBitmap(bMapRotate);
    } 
```

它给出了空指针异常错误..请帮助我，出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:02:59.353

在调用 b（您的位图）之前，您的 CustomOnItemSelected 对象是在 addListenerOnSpinnerItemSelection() 中创建的，它是从 onCreate 调用的。因此，当分配给 myBitmap 时，b 为空。

将 addListenerOnSpinnerItemSelection() 调用移动到 onActivityResult() 以确保在调用 CustomOnItemSelected 构造函数之前创建位图。

# encryption - 如何将 256 位公钥编码为可变长度的单词序列

> ID：14562539
> 
> 赞同：2
> 
> 时间：2013-01-28T12:56:29.240
> 
> 标签：encryption, cryptography, steganography

[编辑] 我已经完全改写了这个问题，试图更简洁明了

我正在寻找一个 1-1 函数，`encode`这样

*   `encode( 32_bytes_of_data ) => {w_1, w_2, ..., w_n}`， 在哪里：
    *   w_1 ... w_n 是真正的英文单词
    *   n 应该是合理的——我不想用 256 个字来编码 256 位

理想情况下： - n 不应该对所有输入值都相同，但这不是一个非常重要的要求。

目标 - 使公钥更具可读性和可识别性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:31:38.253

如果您不担心手动检查并且只寻求防止明显的正则表达式，那么有几种选择，增加烦恼因素：

*   [对于这种事情， ROT13](https://en.wikipedia.org/wiki/ROT13)已经在 usenet 上使用过无数次了。它将击败 base-64 检测

*   使用 256 位作为整数，并在 ASCII 中使用其 base-10 表示。它看起来像这样：115792089237316195423570985008687907853269984665640564039457584007913129639936

*   您可以将先前的数字编码成一个[看说的序列](https://en.wikipedia.org/wiki/Look-and-say_sequence)并拼写它：二一、一五、一七……

*   [将 256 位编码为 base-26](https://stackoverflow.com/questions/2267362/convert-integer-to-a-string-in-a-given-numeric-base-in-python#226744)，并使用编码后的 26 个字母作为短语中每个单词的第一个字符。你需要大约55个字。如果您觉得有创意，您可以使用每个单词的前*两个*字符，然后将其减少到 27 个，但您可能不得不使用非常奇怪的单词。如果你不关心外观，只需发布​​ 55 个字符：`ennjuuzflkeenzhszxamvlrnusvcpknavbgzllukzllrkvatszirbkq`

*   如果你想使用 unicode，有[110,000 个不同的字符](https://en.wikipedia.org/wiki/Unicode)。假设其中只有一半是可打印的，那么每个字符的熵略高于 15 位，因此您需要 17 个字符来编码 256 位

*   如果您和您的收件人可以预先共享任意数量的数据（您必须*至少*共享有关“隐写”方法的知识），您可以为字典中的每个单词分配一个数值。英语中大约有[1,000,000 个单词](http://www.statisticbrain.com/total-number-of-english-words/)，因此每个单词都有大约 20 位熵。您需要 256/20=13 个单词。生成密钥以纠正语法和语法并重写[Jabberwocky的奖励积分](https://duckduckgo.com/Jabberwocky)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:24:51.730

您可以将密钥编码为每个单词一位，其中单词长度的奇偶性表示该位：具有偶数个字母的单词是 0 位，具有奇数个字母的单词是 1 位。[我在我的博客上](http://programmingpraxis.com/2011/06/10/steganography/)讨论这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-21T11:59:52.743

一个有 100 万字的字典可以提供输入到 19 位编码，只有 524k 字。由于您的 32 位输入/19 = 1.68，因此您至少需要两个字进行编码。这主要是因为可以保守地存储 2^19 个值，比如 524,288 个单词。

然后我注意到你说的是 32 字节，所以这是 256 / 19 或 13.47 ......称之为 14 个字来编码你的数据。也许制作确定性钱包的人使用 20 位并用他们喜欢使用的 12 个单词短语来覆盖它。

最大的好处必须是自我纠错 12 词短语种子具有：任何拼写错误实际上都是由我们正确拼写这些单词的能力所发现的。这很漂亮。

# android - 读取所有行并在 ListView 中显示它们

> ID：14562540
> 
> 赞同：0
> 
> 时间：2013-01-28T12:56:31.487
> 
> 标签：android, sqlite, android-sqlite

我正在尝试从 SQLite 数据库中获取所有行并将它们显示在 ListView 中。而且我无法返回包含所有值的列表。数据库是预先创建的，现在位于 /raw 文件夹中。

表（FTSgesla_content）：

```
ID     Value1         Value3
1      Some text1     Some text1
2      Some text2     Some text2 
```

这是我的代码：

```
public class GeslaPodatkovnaBaza 
{
    private static final String TAG = "GeslaPodatkovnaBaza";

    public static final String KEY_WORD = SearchManager.SUGGEST_COLUMN_TEXT_1;
    public static final String KEY_DEFINITION = SearchManager.SUGGEST_COLUMN_TEXT_2;

    private static final String DATABASE_NAME = "gesla";
    private static final String FTS_VIRTUAL_TABLE = "FTSgesla";
    private static final int DATABASE_VERSION = 1;

    private final DictionaryOpenHelper mDatabaseOpenHelper;
    private static final HashMap<String,String> mColumnMap = buildColumnMap();

    /**
     * Constructor
     * @param context The Context within which to work, used to create the DB
     */
    public GeslaPodatkovnaBaza(Context context) {
        mDatabaseOpenHelper = new DictionaryOpenHelper(context);
    }

    public GeslaPodatkovnaBaza createDatabase() throws SQLException 
    {
        try 
        {
            mDatabaseOpenHelper.createDataBase();
        } 
        catch (IOException mIOException) 
        {
            Log.e(TAG, mIOException.toString() + "  UnableToCreateDatabase");
            throw new Error("UnableToCreateDatabase");
        }
        return this;
    }

    public GeslaPodatkovnaBaza open() throws SQLException 
    {
        try 
        {
            mDatabaseOpenHelper.openDataBase();
            mDatabaseOpenHelper.close();
            mDatabaseOpenHelper.getReadableDatabase();
        } 
        catch (SQLException mSQLException) 
        {
            Log.e(TAG, "open >>"+ mSQLException.toString());
            throw mSQLException;
        }
        return this;
    }

    public void close() 
    {
        mDatabaseOpenHelper.close();
    }

    public ArrayList<HashMap<String,String>> getAllWords()
    {
        return mDatabaseOpenHelper.getAll();
    }

    private static HashMap<String,String> buildColumnMap() 
    {
        HashMap<String,String> map = new HashMap<String,String>();
        map.put(KEY_WORD, KEY_WORD);
        map.put(KEY_DEFINITION, KEY_DEFINITION);
        map.put(BaseColumns._ID, "rowid AS " +
                BaseColumns._ID);
        map.put(SearchManager.SUGGEST_COLUMN_INTENT_DATA_ID, "rowid AS " +
                SearchManager.SUGGEST_COLUMN_INTENT_DATA_ID);
        map.put(SearchManager.SUGGEST_COLUMN_SHORTCUT_ID, "rowid AS " +
                SearchManager.SUGGEST_COLUMN_SHORTCUT_ID);
        return map;
    }

    public Cursor getWord(String rowId, String[] columns) 
    {
        String selection = "rowid = ?";
        String[] selectionArgs = new String[] {rowId};

        return query(selection, selectionArgs, columns);

        /* This builds a query that looks like:
         *     SELECT <columns> FROM <table> WHERE rowid = <rowId>
         */
    }

    public Cursor getWordMatches(String query, String[] columns) 
    {
        //String selection = KEY_WORD + " MATCH ?";
        String selection = FTS_VIRTUAL_TABLE + " MATCH ?"; //išče tudi po opisih
        String[] selectionArgs = new String[] {query+"*"};

        return query(selection, selectionArgs, columns);
    }

    private Cursor query(String selection, String[] selectionArgs, String[] columns) {
        /* The SQLiteBuilder provides a map for all possible columns requested to
         * actual columns in the database, creating a simple column alias mechanism
         * by which the ContentProvider does not need to know the real column names
         */
        SQLiteQueryBuilder builder = new SQLiteQueryBuilder();
        builder.setTables(FTS_VIRTUAL_TABLE);
        builder.setProjectionMap(mColumnMap);

        Cursor cursor = builder.query(mDatabaseOpenHelper.getReadableDatabase(),
                columns, selection, selectionArgs, null, null, null);

        if (cursor == null) {
            return null;
        } else if (!cursor.moveToFirst()) {
            cursor.close();
            return null;
        }
        return cursor;
    }

    public static class DictionaryOpenHelper extends SQLiteOpenHelper 
    {

        private final Context mHelperContext;
        private SQLiteDatabase mDatabase;

        private static String DB_PATH="/data/data/com.example.enigmar/databases/";
        private static String DB_NAME="gesla";

        DictionaryOpenHelper(Context context) 
        {
            super(context, DB_NAME, null, 1);
            this.mHelperContext = context;
        }

        @Override
        public void onCreate(SQLiteDatabase db)
        {

        }

        //THIS IS THE FUNCTION
        public ArrayList<HashMap<String,String>> getAll()
        {
            ArrayList<HashMap<String,String>> list = new ArrayList<HashMap<String,String>>();
            HashMap<String, String> item;// = new HashMap<String, String>();

            String stavekSQL = "SELECT c0suggest_text_1, c1suggest_text_2 FROM FTSgesla_content ORDER BY c0suggest_text_1 ASC";
            //String selectQuery = "SELECT  * FROM " + DATABASE_NAME;
            Cursor cursor = mDatabase.rawQuery(stavekSQL, null);

            if(cursor.moveToFirst())
            {
                do
                {
                    item = new HashMap<String, String>();
                    item.put("line1", cursor.getString(0));
                    Log.e("ListIzBaze", "dodalBesedo1");
                    item.put("line2", cursor.getString(1));
                    Log.e("ListIzBaze", "dodalBesedo2");
                    list.add(item);
                }
                while(cursor.moveToNext());
            }
            Log.e("ListIzBaze", "VracamList");
            return list;
            //return mDatabase.execSQL(stavekSQL);
        }

        public void createDataBase() throws IOException
        {

            boolean mDataBaseExist = checkDataBase();

            if(!mDataBaseExist)
            {
                this.getReadableDatabase();
                this.close();
                try 
                {
                    copyDataBase();
                    Log.e(TAG, "createDatabase database created");
                } 
                catch (IOException mIOException) 
                {
                    throw new Error("ErrorCopyingDataBase");
                }
            }

        }

        private boolean checkDataBase()
        {

            File dbFile = new File(DB_PATH + DB_NAME);
            return dbFile.exists();

        }

        private void copyDataBase() throws IOException
        {

            //InputStream mInput = mHelperContext.getAssets().open(DB_NAME);
            final Resources resources = mHelperContext.getResources();

            String outFileName = DB_PATH + DB_NAME;

            OutputStream mOutput = new FileOutputStream(outFileName);
            InputStream mInput = resources.openRawResource(R.raw.gesla);

            byte[] mBuffer = new byte[1024];
            int mLength;
             while ((mLength = mInput.read(mBuffer))>0)
             {
                 mOutput.write(mBuffer, 0, mLength);
             }
             mOutput.flush();
             mOutput.close();
             mInput.close();

            }

        public boolean openDataBase() throws SQLException
        {

            String mPath = DB_PATH + DB_NAME;
            mDatabase = SQLiteDatabase.openDatabase(mPath, null, SQLiteDatabase.CREATE_IF_NECESSARY);
            return mDatabase != null;
        }

        @Override
        public synchronized void close() {

        if(mDatabase != null)
            mDatabase.close();

        super.close();

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:54:41.063

**在 Android 中制作列表视图**：

• 首先，我们必须将所有这些值存储在列表视图中。为此，我们使用 List 函数。

• 然后，我们必须在一个列表数组适配器中设置这些列表值。

• 您应该将活动扩展到列表活动。

• 确保在main.xml 中有一个ID 为@android:id/list 的ListView 元素。

**功能：**

```
 List<String[]. 
```

• 设置列表适配器。

```
 Cursor c=db.rawQuery("select * from sv_tb_fieldnotes where sv_fieldnote_created_by_fk='" + get_userid + "'",null);
     List<String[]> list = new ArrayList<String[]>();

         c.moveToFirst();
         while(!c.isAfterLast())
         {
             title=new String[]{c.getString(3),c.getString(0)};
             list.add(title);
             c.moveToNext(); 
         }      

     c.close();
     db.close();
     fetch_fieldnote_title=new String[list.size()]; 
     fetch_fieldnote_id=new String[list.size()]; 
            int x=0;
            String assigning_fetch_fieldnote_title;
            String assigning_fetch_fieldnote_id;
            for (String[] name : list) {
                assigning_fetch_fieldnote_title =name[0];
                assigning_fetch_fieldnote_id=name[1];
                fetch_fieldnote_title[x]=assigning_fetch_fieldnote_title;
                fetch_fieldnote_id[x]=assigning_fetch_fieldnote_id;
                x++;
            }

            //To generate the list view.
 setListAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,fetch_fieldnote_title));
 }

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    //Toast.makeText(this, stg1[position], 2000).show();
    fetch_title=fetch_fieldnote_title[position];
    fetch_id=fetch_fieldnote_id[position];
    //To register the list view with context menu.
    registerForContextMenu(getListView());
    super.onListItemClick(l, v, position, id);
} 
```

# javascript - 添加了异步行为，无法使代码适合它

> ID：14562543
> 
> 赞同：0
> 
> 时间：2013-01-28T12:56:36.660
> 
> 标签：javascript, jquery, ajax

在我使用之前

```
//get state
   MyClass.prototype.getState = function(key) {
       var value;
       switch(this._options.type){
          case "cookie":
                value = $.cookie(key);
                break;

          case "localStorage":
                value = window.localStorage.getItem(key);
                break;
        }

        this._options.afterGetState(key, value);
        return value;
    };

   //set state
   MyClass.prototype.setState = function(key, value) {
        switch(this._options.type){
          case "cookie":
                $.cookie(key, value); 
                break;

          case "localStorage":
                window.localStorage.setItem(key, value));
                break;
        }
        return this._options.afterSetState(key, value);
      };

    MyClass.prototype.ended = function() {
        return !!this.getState("is_ended");
      };

    MyClass.prototype.setStep = function(value) {
        if (value != null) {
          this._current = value;
          return this.setState("step", value);
        } else {
          this._current = this.getState("step");
          if (this._current === null || this._current === "null") {
            return this._current = 0;
          } else {
            return this._current = parseInt(this._current);
          }
        }
      };

      MyClass.prototype.end = function() {
        this.setState("end", "true");
      }; 
```

已经使用过localStorage 和cookie。现在我添加了将数据存储在 db 中的功能，因此我必须使用 ajax 和 async 函数。所以我改变了代码：

```
//get state async
   MyClass.prototype.getState = function(key, callback) {
        oldThis = this;
        //h-mmm... what if callback is null or undefined? Will it work for function(){ }?
        callback = typeof callback != 'undefined' ? callback : function(){ }
        switch(this._options.storageType){

          case "cookie":
            setTimeout(function(){ 
                    value = callback($.cookie(key)); 
                    oldThis._options.afterGetState(key, value);
                    return value;
                  },
              0);
            break;

          case "localStorage":
            setTimeout(function(){ 
                  callback(window.localStorage.getItem(key));
                  oldThis._options.afterGetState(key, value);
                  return value;
                },
              0);
            break;

          case "db":
            $.ajax({
                type: "GET",
                url: "/123",
                data: { .... },
                success: function(data){
                  value = callback(data);
                  oldThis._options.afterGetState(key, value);
                  return value;
                },
                error: function() {
                  alert('Error occured');
                  return undefined;
                }
            });
            break;
        }
      };

  //set state async
  MyClass.prototype.setState = function(key, value, callback) {
        oldThis = this;
        callback  = callback || function(){ }
        switch(this._options.storageType){
          case "cookie":
                setTimeout(function(){ 
                        callback($.cookie(key, value)); 
                        return oldThis._options.afterSetState(key, value);
                     },
                0);
                break;

          case "localStorage":
                setTimeout(function(){ 
                      callback(window.localStorage.setItem(key, value));
                      return oldThis._options.afterSetState(key, value);
                    },
                0);
                break;

          case "database":
                $.ajax({
                    type: "POST",
                    url: "123",
                    data: { .... },
                    success: function(data){
                      callback(data);
                      return oldThis._options.afterSetState(key, value);
                    },
                    error: function() {
                        alert('Error occured');
                    }
                });
            break;
        }
      }; 
```

那么如何更改prototype.ended、prototype.setStep 和prototype.end 函数呢？这是我所做的：

```
//nothing has been changed. Is this correct? It seems to be so.
MyClass.prototype.ended = function() {
    return !!this.getState("end");
  };

MyClass.prototype.setStep = function(value) {
    if (value != null) {
      this._current = value;
      return this.setState("step", value, function(value){ return value; });
    } else {
        oldThis = this;
        this.getState("step", function(value){ oldThis._current = value; });
      if (this._current === null || this._current === "null") {
        return this._current = 0;
      } else {
        return this._current = parseInt(this._current);
      }
    }
  };

//nothing has been changed. Is this correct as well?
  MyClass.prototype.end = function() {
    this.setState("end", "true");
  }; 
```

底线是我不知道应该从哪里返回值： from`prototype.setState and prototype.getState`或 from `prototype.end, prototype.enden and prototype.setStep`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:11:16.823

在处理异步操作时，您必须使用回调函数而不是`return`语句。

例如，这个同步代码：

```
function syncFunc() {
    return 10;
}
var val = syncFunc();
doSomethingWithVal(val); 
```

当函数是异步的时候应该变成这样：

```
function asyncFunc(callback) {
    setTimeout(function() {
       var data = 10;
       // Call the callback when async op is finished
       callback(data);
    }, 1000);
}
asyncFunc(doSomethingWithVal); 
```

* * *

就您的特定代码而言，这意味着这不起作用：

```
MyClass.prototype.ended = function() {
    return !!this.getState("end");
}; 
```

你不能返回`ended`（它可能总是返回`undefined`，因为`getState`会在回调之前返回）。你不能再使用类似的东西`var x = obj.ended()`了，你必须重新考虑你的逻辑。也是如此`setStep`，您不能只返回 的返回值，`getState`因为它现在是异步的。

# gcc - gcc中的-s（小写字母s）命令行开关是什么意思？

> ID：14562544
> 
> 赞同：0
> 
> 时间：2013-01-28T12:56:37.517
> 
> 标签：gcc, mingw

我有这条线：

```
g++ -I d:\boost -Os -s -o test.exe test.cpp -lshlwapi -lgdi32 -std=c++11 -ftree-vectorize -static` 
```

而且我找不到`-s`它的用途，我知道大 S 做什么，但小 S 一无所获。

顺便说一句，实际的命令行 gcc 参考在哪里，这个：[http](http://tigcc.ticalc.org/doc/comopts.html) ://tigcc.ticalc.org/doc/comopts.html 已有10 年历史。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T12:59:18.653

来自`man gcc`：

> -s 从可执行文件中删除所有符号表和重定位信息

它相当于`strip`命令。

# canvas - 保存带背景的画布图像 - Windows 8 c# Metro 应用程序？

> ID：14562545
> 
> 赞同：0
> 
> 时间：2013-01-28T12:56:38.960
> 
> 标签：canvas, windows-8, background, microsoft-metro, save

我想用它的背景图像保存我的画布。但是当我保存所有内容时，只有我的台词，没有别的。

我的经典代码“保存画布”：

```
 private async void save_Click_1(object sender, RoutedEventArgs e)
    {
        if (_inkManager.GetStrokes().Count > 0)
        {
            try
            {
                Windows.Storage.Pickers.FileSavePicker save = new Windows.Storage.Pickers.FileSavePicker();
                save.SuggestedStartLocation = Windows.Storage.Pickers.PickerLocationId.Desktop;
                save.DefaultFileExtension = ".png";
                save.FileTypeChoices.Add("PNG", new string[] { ".png" });
                StorageFile filesave = await save.PickSaveFileAsync();
                IOutputStream ab = await filesave.OpenAsync(FileAccessMode.ReadWrite);
                if (ab != null)
                    await _inkManager.SaveAsync(ab);
            }
            catch (Exception)
            {
            }
        }
    } 
```

你知道我该如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:13:32.230

我不认为您正在保存画布 - 您正在保存[InkManager](http://msdn.microsoft.com/en-us/library/windows/apps/br242141.aspx)（在文档中说它只保存笔划，没有其他内容）。请注意，InkManager 不是 UI 元素 - 它只是一个您“挂钩”的对象”。

据我所知，画布（和所有其他 UIElements）不能转换为图像。这是 Win8 的一个限制，Silverlight/WPF 没有让我最恼火。

# php - PHP + Apache - 解析 URL mod_rewrite

> ID：14562546
> 
> 赞同：1
> 
> 时间：2013-01-28T12:56:49.277
> 
> 标签：php, apache, mod-rewrite, parse-url

我想将 mod_rewrite 与 PHP 一起使用，使用以下格式解析 URL：

`http://www.domain.com/Path-to-index.php/Class_to_Load/Function_to_Execute/Arguments_as_array_to_the_function`

要加载的类将包含在 directory`classes`中，带有`strtolower`then `ucfirst`，例如：

`http://www.domain.com/Path-to-index.php/SAMPLE`将包含`classes/Sample.php`并执行函数`action_index`，因为没有使用函数。

然后，当这个 url 打开: 时`http://www.domain.com/Path-to-index.php/SAMPLE/Login/User`，PHP 应该包含`classes/Sample.php`并执行`action_Login($args = Array(0 => "User"));`.

请我需要知道如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:38:08.517

您的 index.php 可能看起来像这样：

```
// @todo: check if $_SERVER['PATH_INFO'] is set
$parts = explode('/', trim($_SERVER['PATH_INFO'], '/')); // get the part between `index.php` and `?`

// build class name & method name
// @todo: implement default values
$classname = ucfirst(strtolower(array_shift($parts)));
$methodname = "action_" . array_shift($parts);

// include controller class
// @todo: secure against LFI
include "classes/$classname.php"

// create a new controller
$controller = new $classname();

// call the action
// @todo: make sure enough parameters are given by using reflection or default values
call_user_func_array(Array($controller, $methodname), $parts); 
```

您用于从 url 中删除 index.php 的 .htaccess：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

使用自己的框架来学习更多关于 PHP 的知识总是很有趣，但如果你真的要编写更大的代码，我强烈建议使用知名且文档齐全的框架。那里有很多好的框架，它们之前都经过了良好的测试并在生产中使用过。只需看看`@todo`上面的所有通知。这些都是框架已经处理好的问题，你不需要关心这些事情。

# cakephp - 在单个表单中验证多个模型

> ID：14562549
> 
> 赞同：3
> 
> 时间：2013-01-28T12:56:59.613
> 
> 标签：cakephp

我必须使用“CakePHP”以单一形式验证多个模型。我有2个模型。

**发票**

```
public $validate = array(
        'type' => array(
            'rule' =>'notEmpty',
            'message' => 'Select Invoice Type.',
            'required' => true
        ),
        'number' => array(
            'rule' =>'numeric',
            'message' => 'Enter Invoice Number.',
            'required' => true
        ),
        'date' => array(
            'rule' => array('date', 'dmy'),
            'allowEmpty' => true,
            'message' => 'Enter Invoice Date.'
        ),
    );

    public $belongsTo = array(
        'Client' => array(
            'className' => 'Client',
            'foreignKey' => 'client_id'
        )); 
```

**客户**

```
public $validate = array(
        'name' => array(
            'rule' =>'notEmpty',
            'message' => 'Enter Your Name.',
            'required' => true
        ),
        'company' => array(
            'rule' =>'notEmpty',
            'message' => 'Enter Your Company Name.',
            'required' => true
        ),
        'address' => array(
            'rule' =>'notEmpty',
            'message' => 'Enter Your address.',
            'required' => true
        )
    );

    public $hasMany = 'Invoice'; 
```

我有一个表单，其中包含“ *clientName* ”、“ *Address* ”、“ *InvoiceNumber* ”和“ *InvoiceDate* ”等字段。我使用了 saveAll()，但它只是验证`Invoice`数据而不是`Client`数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:13:00.027

看看以下答案：[https ://stackoverflow.com/a/4673403/1110760](https://stackoverflow.com/a/4673403/1110760)

> hasMany 模型的字段应为数组（与父模型组合时），请参阅在字段名称之间添加 .0

如果您还想在仍然卡住时发布您的表格，我们可以为您提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-01T08:42:07.227

取自这里[http://book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html](http://book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html)

```
if ($this->ModelName->saveAll(
    $this->request->data, array('validate' => 'only')
)) {
  // validates
} else {
  // does not validate
} 
```

# javascript - 如何在jquery的输入字段中用空格键一一显示数组元素？

> ID：14562550
> 
> 赞同：0
> 
> 时间：2013-01-28T12:57:04.387
> 
> 标签：javascript, jquery

我有一个带有很多字符串的大数组我想将它一个一个地显示在文本字段中，并用空格键自动连接到每个字符串

我的代码在这里

```
<script>
    x=0
    function abc(){

    for (i=0;i<words[x].length;i++){
        if(x=0)
            x++;

        document.getElementById("type").value=words[x];
    }

</script> 
```

我的输入字段 id 是`type`，我的数组是`words`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T12:58:36.453

每次迭代都将值设置为一个新单词，它不会添加到值中。您可以使用空格连接数组并将其设置为元素值：

```
document.getElementById("type").value = words.join(' '); 
```

# iphone - 如何从 iPhone 的表格视图中获取选定单元格的单元格值

> ID：14562551
> 
> 赞同：8
> 
> 时间：2013-01-28T12:57:05.727
> 
> 标签：iphone, ios, ios6

我在表格视图控制器中显示图像，其中图像从 URL 呈现为 XML 文件。它适用于将图像列为滚动视图。现在我想选择一个特定的图像，窗口应该单独显示选定的单元格图像。为此，我需要获取 Cell 值。如果是这样，我如何获取特定的单元格值并将其相应的图像显示为下一个窗口中的集合视图。

请给我一个想法。为了您更好地理解，我在图片下方粘贴了我的故事板当前的外观以及我如何需要输出。 ![故事板和输出](../Images/51e6f991e395cf80bc6a1d049d0a977f.png)

希望你能理解我的问题。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-28T13:04:50.493

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
// here we get the cell from the selected row.
          UITableViewCell *selectedCell=[tableView cellForRowAtIndexPath:indexPath]; 

// perform required operation
         UIImage * image =selectedCell.image;

// use the image in the next window using view controller instance of that view.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T13:12:17.043

你应该使用 UITableViewDelegate

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath; 
```

indexPath 将返回所选行的部分数和行数。

```
indexPath.section;
indexPath.row 
```

我希望这很清楚。为了进一步了解，您可以参考以下教程： [http ://www.edumobile.org/iphone/iphone-programming-tutorials/using-iphone-tableview-for-displaying-data/](http://www.edumobile.org/iphone/iphone-programming-tutorials/using-iphone-tableview-for-displaying-data/) [http://www.raywenderlich.com/ 1797/how-to-create-a-simple-iphone-app-tutorial-part-1](http://www.raywenderlich.com/1797/how-to-create-a-simple-iphone-app-tutorial-part-1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T13:10:30.910

在这种情况下，我认为您应该为行中的每个图像维护 id 。如果每行有一张图片，它可能是您的行号。然后从

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

您可以将 id 传递给下一个视图控制器。在此视图控制器中，您应该使用此 id 来获取创建集合视图所需的数据。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-19T07:36:25.383

对我来说，这是有效的..

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    customerVC = [[UIStoryboard storyboardWithName:@"Main" bundle:nil]instantiateViewControllerWithIdentifier:@"customerInfoView"];

    customerVC.selectedText = cell.textLabel.text;
    //customerVC is destination viewController instance)

    [self.navigationController pushViewController:customerVC animated:YES]; 
} 
```

在您的目标视图控制器头文件中，只需声明一个字符串，如

```
@property NSString *selectedText; 
```

在 viewcontroller.m 中分配像

```
self.selectedBiller.text = self.selectedText; 
```

（selectedBiller在这里是一个标签）

# ruby-on-rails-3 - 如何在 Rails 中将字符串变形为模型名称？

> ID：14562553
> 
> 赞同：8
> 
> 时间：2013-01-28T12:57:10.613
> 
> 标签：ruby-on-rails-3

有一个`http://localhost:3000/me/posts/new?type=note`

我想通过`type`控制器中的参数创建一个模型，并且我有一个名为 Post::Note 的模型。

那么如何通过 params[:type] string 创建它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T13:01:07.300

尝试这个：

```
note_klass = params[:type].camelize.constantize
note = note_klass.new 
```

## 回复：问题编辑

如果你的`Note`类不是全局的，你可以使用这个：

```
const_name = params[:type].camelize
note_klass = Post.const_get(const_name) 
```

# android - 过滤后的 ListView onItemClick 在原始位置返回项目

> ID：14562556
> 
> 赞同：6
> 
> 时间：2013-01-28T12:57:29.677
> 
> 标签：android, listview, filter

我有一个从自定义填充自定义行的列表视图`BaseAdaptor`。点击任何一行，我打开一个新的`Activity`. 在我将过滤器功能添加到此列表之前，一切正常。当我搜索列表然后单击一个项目时，它不会打开与过滤结果关联的活动。它会在原始列表中的该位置打开一个与项目相关的活动。

例如。- 原始清单：AA、BA、CC、DA、ED、FF

搜索：'A' 过滤结果：AA、BA、DA

但是，当我单击项目时`DA`，它会打开 Activity 的`CC`. 非常烦人。我已经调用`notifyDataSetChanged()`了适配器。

我已经被这个问题困扰了一段时间。我真的不知道如何解决它。我没有发布代码，因为它有很多代码，我真的不想把所有东西都放在这里。

如果有人可以告诉我如何从过滤列表中选择项目.. 它会很棒。

谢谢！告诉我是否需要其他内容来理解我的问题！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T13:23:11.580

谢谢大家的回复，但我发现了问题。

我希望这可以帮助另一个人。有了这个基本的东西，有时很难找到错误，我们采用了非常复杂的方法！

为了开始我的新活动，我从自定义适配器中获取项目位置，而不覆盖 getItem() 函数。

```
Object obj = myListAdapter.getItem(position); 
```

我重写了函数

```
@Override
public Object getItem(int position) {
    return myList.get(position);
} 
```

瞧！得到了正确的活动开口。（我知道*facepalm* ..）无论如何感谢您的回答！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:05:43.510

发生这种情况是因为您的 CustomAdapter 使用您的第一个光标而不是过滤的光标

您可以在适配器定义中使用它：

```
public Cursor swapCursor(Cursor c1)
{
    super.swapCursor(c1);
    c = c1;
    notifyDataSetChanged();
    return c;

} 
```

并在您的通话活动中使用

```
YourCustomAdapter.swapCursor(FilteredCursor); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-14T03:04:25.323

您可以做的是，在您的自定义 SearchViewAdapter（即）您设置的类（上下文、资源、Arraylist）中，您可以创建一个方法来存储传递给 SearchViewAdapter 的原始 ArrayList 并创建一个获取原始位置的方法从 listView 中选择的对象：

```
 //in your custom SearchViewAdapter create methods store() and getPos() 

public void store(ArrayList<SearchViewClass>originalList){
   mylist=new ArrayList<>(originalList);
      }  //The store method should be called once in searchView Activity when you pass all needed values into your Arraylist            

public int getPos(Object obj){
    return mylist.indexOf(obj);
} 
```

然后在您的 SearchView Activity 或您正在实现 searchView 的任何地方，在 listView.setOnItemClickListener 上，您调用 getpos(adapterView.getItemAtPosition(i)) 方法，该方法将 adapterView.getItemAtPosition(i) 作为参数。getpos()方法返回原始对象位置的索引，不管searchView引起的过滤。然后可以在索引上switch()，

```
listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
@Override
public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
 switch (searchViewAdapter.getPos(adapterView.getItemAtPosition(i))){
               case 0:...break}
} 
```

# python - Django：无法更改默认语言

> ID：14562564
> 
> 赞同：6
> 
> 时间：2013-01-28T12:57:48.210
> 
> 标签：python, django, internationalization, translation

我已经在`en-gb`语言代码方面开发了一段时间。现在接近发布日期，我打算将默认语言切换为`en-us`，但无论我做什么，初始`request.LANGUAGE_CODE`设置都设置为`en-gb`即使对于未注册的用户也是如此。

仅供参考，我实际上想将 time_zone 保留为伦敦，只需将默认语言更改为美式英语。现在我已经改变了两者只是为了让它工作，但仍然没有快乐。

```
#TIME_ZONE = 'Europe/London'
TIME_ZONE = 'US/Eastern'

LANGUAGE_CODE = 'en-us'
#LANGUAGE_CODE = 'en-gb'

ugettext = lambda s: s

LANGUAGES = (
    ('en', ugettext('American English')),
    ('en-gb', ugettext('British English'))
)

USE_I18N = True
USE_L10N = True
USE_TZ = True 
```

我会错过什么？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T13:07:53.227

`LANGUAGE_CODE`仅当 Django 找不到要使用的语言时才默认。您的会话中可能已经有`en-gb`Django 获取的 cookie。

阅读[Django 如何发现语言首选项](https://docs.djangoproject.com/en/stable/topics/i18n/translation/#how-django-discovers-language-preference)，以获取有关 Django 确定请求语言所采取的步骤的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-31T13:54:46.997

看看[Django 如何发现语言偏好](https://docs.djangoproject.com/en/1.9/topics/i18n/translation/#how-django-discovers-language-preference)。

在您的情况下，我敢打赌您已经`LocaleMiddleware`启用，它会从`Accept-Language`您的浏览器随每个请求发送的标头中获取您的语言。您可以在浏览器的首选项中更改该标题，尽管许多用户不知道这一点，并保持在他们系统上的默认值。例如，在 Firefox 中，您可以在“首选项”、“内容”、“选择”（在“语言”下）进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-24T21:40:45.837

有一段时间有这个问题...我后来发现我的 settings.py 文件中缺少一个中间件...那就是->`'django.middleware.locale.LocaleMiddleware',`

[Django 如何发现语言偏好](https://docs.djangoproject.com/en/3.2/topics/i18n/translation/#how-django-discovers-language-preference)

[![中间件的放置位置](../Images/97e578f360509986831eb5321e4823a3.png)](https://i.stack.imgur.com/aZqWG.png)

# c# - 如何将图像类型转换为位图

> ID：14562566
> 
> 赞同：5
> 
> 时间：2013-01-28T12:58:02.867
> 
> 标签：c#, image

我正在制作一个适用于`.BMP`固定大小的应用程序。我制作了用于调整大小但无法转换的模块`PNG`，`JPEG`以及将其他图片格式转换为`.bmp`.

有没有简单的方法，因为有多种压缩方案，很难为每个单独编写模块。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T13:12:25.950

用[这个](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/8327dd31-2db1-4daa-a81c-aff60b63fee6/)

```
public BitmapImage ImageFromBuffer(Byte[] bytes)
{
    MemoryStream stream = new MemoryStream(bytes);
    BitmapImage image = new BitmapImage();
    image.BeginInit();
    image.StreamSource = stream;
    image.EndInit();
    return image;
} 
```

或使用这个

```
Image Dummy = Image.FromFile("image.png");
Dummy.Save("image.bmp", ImageFormat.Bmp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:12:17.157

好吧，请看这个问题：

[转换为 BMP](https://stackoverflow.com/questions/1060442/png-to-bmp)

和

[MSDN ImageFormat 成员](http://msdn.microsoft.com/de-de/library/system.drawing.imaging.imageformat_members%28v=vs.71%29.aspx)

```
using(Image img = Image.FromFile("image.png"))
{
    img.Save("image.bmp", ImageFormat.Bmp);
    // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:16:49.633

您已经[加载到内存](http://msdn.microsoft.com/en-us/library/stf701f5.aspx)中的每个图像都独立于源格式。[操作后，您可以使用任何可用的格式](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.imageformat.aspx)将其写回磁盘，只需调用[`Save()`](http://msdn.microsoft.com/en-us/library/9t4syfhh.aspx)所需格式的方法即可

```
var bmp1 = Image.FromFile("myJpegFile.jpg");
bmp1.Save("c:\\button.bmp", System.Drawing.Imaging.ImageFormat.Bmp); 
```

# iphone - 正确排序 NSString 数组，包括以破折号或特殊符号开头的单词（对于字典）

> ID：14562569
> 
> 赞同：1
> 
> 时间：2013-01-28T12:58:06.587
> 
> 标签：iphone, ios, objective-c, xcode

我是 iOS 新手，正在尝试构建一个字典应用程序。我有一个`NSMutableDictionary`of 单词和定义，我将其单词（键）保存在一个单独`NSArray`的`NSStrings`called`sortedWords`中。

```
sortedWords = [[NSMutableArray alloc] initWithArray:[[entries allKeys] sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)]]; 
```

如您所见，我正在对字典中的每个键进行不区分大小写的比较。然而，最近的一次数据库更新在我的字典中包含了新词，这些新词仅仅是以破折号开头的后缀。这些条目现在位于所有以字母 A 开头的条目之前，并按字母顺序列出。

我想要实现的是保持所有条目甚至后缀的字母顺序，但使后缀成为每个字母的第一个条目。例如，对于`E`，条目的顺序将是：

```
-er
-est
each
eager
eagle 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:12:06.183

您可以使用自己的比较器请求排序。您的比较器基本上删除了 - 前缀，然后比较两个字符串。像这样的东西：

```
[sortedWords sortUsingComparator:^(NSString *obj1, NSString *obj2) {

    NSString *temp1 = obj1;
    NSString *temp2 = obj2;
    if ([obj1 hasPrefix:@"-"])
         temp1 = [obj1 substringFromIndex:1];
    if ([obj2 hasPrefix:@"-"])
         temp2 = [obj2 substringFromIndex:1];

    return [temp1 caseInsensitiveCompare:temp2];
}]; 
```

我没有测试这段代码，但它至少应该作为一个指南！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T06:49:07.683

感谢@manecosta 的回答。但是，完整的解决方案相当复杂：

```
#define hasDash hasPrefix:@"-"
// ...

NSMutableArray *arr = [NSMutableArray arrayWithArray:@[@"-con", @"baby",
    @"context", @"zebra", @"-ar", @"-am", @"Big", @"chastity",
    @"-b", @"American", @"brute"]];

[arr sortUsingComparator:^NSComparisonResult(NSString *s1, NSString *s2) {
    if (![s1 hasDash] && ![s2 hasDash]) {
        return [s1 caseInsensitiveCompare:s2];
    } else if ([s1 hasDash] && [s2 hasDash]) {
        NSString *c1 = [s1 substringFromIndex:1];
        NSString *c2 = [s2 substringFromIndex:1];
        return [c1 caseInsensitiveCompare:c2];
    } else if ([s1 hasDash]) {
        NSString *c1 = [s1 substringFromIndex:1];
        if ([[[c1 substringToIndex:1] uppercaseString]
             isEqualToString:[[s2 substringToIndex:1] uppercaseString]]) {
            return NSOrderedAscending;
        } else {
            return [c1 caseInsensitiveCompare:s2];
        }
    } else { // if ([s2 hasDash]) {
        NSString *c2 = [s2 substringFromIndex:1];
        if ([[[s1 substringToIndex:1] uppercaseString]
             isEqualToString:[[c2 substringToIndex:1] uppercaseString]]) {
            return NSOrderedDescending;
        } else {
            return [s1 caseInsensitiveCompare:c2];
        }
    }
}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:02:26.027

您可以创建自己的比较功能，并随心所欲地发挥您的魔力

在您的班级某处添加此 C++ 外观方法

```
NSInteger sortStrings(id value1, id value2, void *context); // This is just to avoid a warning when compiling the project :)

NSInteger sortStrings(id value1, id value2, void *context) {

    ... value1 and value2 will be NSStrings, compare them however you want ....

    returning -1 will mean value1 should come before
    returning 1 will mean value2 should come before
    returning 0 will mean they are equal and it won't matter which one is first

} 
```

要进行排序，请执行以下操作：

```
[array sortUsingFunction:sortStrings context:nil]; 
```

**编辑**

你可以传递任何你想要的东西`context:`，它会在`context`对象的函数中提供给你，以防你需要任何环境变量或其他东西

在进行排序时，数组也需要是一个 NSMutableArray

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T13:09:07.487

您可以使用下面的代码实现自己的算法进行比较。

```
NSArray *sortedArray = [tempArray sortedArrayUsingComparator:^(id o1, id o2) {
            NSString *string1 = (NSString *)o1;
            NSString *string2 = (NSString *)o2;

            return [string1 compare:string2];
        }]; 
```

# django - Django 模板：排序子集：_set.all

> ID：14562570
> 
> 赞同：0
> 
> 时间：2013-01-28T12:58:06.600
> 
> 标签：django, templates

在 django 模板中，对于每个类别，我都会遍历每个子类别。但是如何对子类别进行排序？我需要它灵活，以便我可以选择我的排序。

```
{% for cat in categories %}  
     {% for subcat in cat.subcategories_set.all%}
     {% endfor %}
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:03:33.680

您可以使用`dictsort`模板标签，它可以让您按任何键进行排序。[文档](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#dictsort)

# http - 将 Accept-Encoding 字段留空是否有效？

> ID：14562572
> 
> 赞同：3
> 
> 时间：2013-01-28T12:58:09.590
> 
> 标签：http, http-headers, http-accept-encoding

我发现 Accept-Encoding 的例子违反了文档中的规范：

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14#sec14.3](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14#sec14.3)

“Accept-Encoding”头域定义如下：

```
 Accept-Encoding  = "Accept-Encoding" ":"
                      1#( codings [ ";" "q" "=" qvalue ] ) 
```

所以根据 的语法`1#(...)`，它应该在值列表中至少包含**一个**元素。但是其中一个例子出现在它之后：

```
 Accept-Encoding: 
```

它有一个空白值部分。我错过了什么吗？谁能告诉我这种用法是否有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:06:12.810

您真的应该停止查看 RFC 2616。请参阅[http://trac.tools.ietf.org/wg/httpbis/trac/wiki](http://trac.tools.ietf.org/wg/httpbis/trac/wiki)。

您的问题的答案在这里：[http](http://trac.tools.ietf.org/wg/httpbis/trac/ticket/25) ://trac.tools.ietf.org/wg/httpbis/trac/ticket/25 ，所以是的，空字段值是有效的。

# android - Android：如何删除重复事件

> ID：14562575
> 
> 赞同：1
> 
> 时间：2013-01-28T12:58:14.757
> 
> 标签：android, android-calendar, android-event

我正在构建一个日历提供程序，它将日历事件与服务器同步。当我尝试删除一个事件时，如果该事件是非重复的，它工作正常。当我尝试删除重复事件时，它不会显示任何错误或任何内容，但日历中的所有事件都会消失。之后日志没有显示任何错误，它只给了我所有标准日志，但之后日历上什么也没有出现。这是我用于删除所有事件（重复和非重复）的代码：

```
resolver.delete(ContentUris.withAppendedId(Events.CONTENT_URI, id), null, null); 
```

其中`resolver`是`ContentResolver`和`id`是数据库中事件的ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:13:50.437

这是我的错误。上面的代码可以很好地删除事件

# javascript - 如何在纯 HTML5/CSS/Jquery 中显示 epub 格式的书

> ID：14562580
> 
> 赞同：17
> 
> 时间：2013-01-28T12:58:32.667
> 
> 标签：javascript, jquery, html, css, epub

是否可以使用纯 HTML5、CSS 和 Jquery 在 Web 浏览器中显示 epub 格式的书籍？有人可以建议我该怎么做吗？我还必须使其具有响应性才能使其在 iPad 上运行。我知道，但我不知道如何使用 HTML 和 Javascript 阅读 epub。

epub 可能包含一些数学函数，我也需要正确显示它们。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-28T13:56:38.497

> 是否可以使用纯 HTML5、CSS 和 jQuery 在 Web 浏览器中显示 epub 格式的书籍？

是的，有可能。

为什么要写一个 epub 阅读器？那里已经有很多了。

无论如何，您的问题是通用问题的特定形式，是否可以为 epubs 编写电子书阅读器？显然，是的，可能已经写好了。如果你可以用一种语言或一个平台编写它，你可以用另一种语言编写它。

但实际上，您甚至不需要编写阅读器，因为 epub 只是罐头中的小网站。将 epub 文件解压缩到服务器上的某个位置，然后将浏览器导航到其中一个页面。瞧，你在读。你想要一个目录？导航到 toc.xhtml 或等效文件，然后就可以了。

从一页移动到下一页怎么样？您需要知道页面应该以什么顺序显示。编写一个小型服务器组件来解析通常称为 content.opf 的文件，并根据清单元素中文件的顺序，发出一些 HTML一个前进和后退按钮和一个 iframe 来显示内容。当你在做的时候，解析出标题和其他有趣的元数据。这一切本质上就是 epubjs 所做的。

但是我从您的问题中直觉到您想完全在客户端/浏览器端执行此操作。好吧，这也已经以 Readium 的形式完成了，您应该看看。使用您最喜欢的 JS 解压缩库（警告，可能会很慢）解压缩 epub 文件，并编写一些 JS 来解析元数据并抛出页面，这很可能是在 iframe 中，周围有一些 chrome。

但是，如果您想要分页输出，人们对电子书阅读器的期望是什么？这是事情开始变得棘手的地方，并且可能是退后一步并再次问自己为什么要这样做的好地方。无论如何，如果你决定你真的想要分页显示，那么你将需要找出一些逻辑组合，包括窗口、框架、剪辑、偏移和/或使用“区域”来帮助你。一些电子书阅读器只是在这里踢，说，滚动/未分页输出有什么问题？

但是电子书阅读器还有很多其他的功能。例如，大多数都允许您更改行距、边距或字体大小。这些用户设置如何与本书的 CSS 文件中的样式交互？一些读者采用解析 CSS 的方法（也有相应的库）并重写它以获得您或您的用户想要的结果。

更喜欢应用程序而不是浏览器应用程序？将整个 shebang 包裹在 PhoneGap 中。

要成为称职的读者，您将不得不担心许多其他事情。就在我的脑海中，这包括显示某些书籍指定的“指南”或“地标”，在会话之间记住阅读位置和用户选项，并且可能提供某种书架功能。

尽管某些客户端电子书阅读器确实使用 jQuery，但请记住，由于 epub 是 HTML5/CSS2.5/JS，因此内容本身只能由现代浏览器可靠地显示。但是如果你有一个现代浏览器，你不需要 jQuery 中 90% 的头发，它是为跨浏览器兼容性而设计的。您最好使用更轻量级的组件，例如 Backbone 和/或 Underscore。您可能甚至不需要选择器库，因为您将拥有 querySelector。

祝你好运！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-13T12:18:13.670

对于科学论文（期刊文章），有一个“最佳解决方案”可以***在 browser 上模拟 EPUB 阅读器***。它可以使用 XML ( [JATS](http://jats.nlm.nih.gov/) ) 或 XHTML（来自 EPUB）内容。*PubReader*使用 HTML5 和 CSS3 中可用的特性和功能。

通过 CSS 和 Javascript，它实现了格式化、分页、导航和文本重排。整篇文章作为单个 HTML 页面加载到浏览器中，并在本地处理分页等。看：

*   [PubMed Central 的 PubReader 正在运行！](http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3547968/?report=reader)

*   [PubReader 描述](http://www.ncbi.nlm.nih.gov/pmc/about/pubreader/)

*   [PubReader 源代码](https://github.com/NCBITools/PubReader)

PS：PubReader 类似于@torazaburo 的建议，[EPUB-Readium 浏览器界面](http://readium.github.io/readium-viewer-demo1/)。

# android - 每 50 毫秒更换一次 ImageView 的 CPU 密集型任务

> ID：14562581
> 
> 赞同：0
> 
> 时间：2013-01-28T12:58:32.933
> 
> 标签：android

编辑：增加了赏金。希望这会引起人们对手头问题的关注。

我目前正在尝试解决一个动画在应用程序的主屏幕上连续运行动画婴儿睡觉的问题。这是通过使用 imageView 并将动画中的当前图像替换为下一个图像来完成的。鉴于有超过 500 张图像，这变得非常占用 CPU，因为每次替换图像时都会重新计算整个视图层次结构。有没有办法在这个动画期间不重新计算整个视图层次？

运行方法如下所示：

```
 @Override
    public void run() {
        if (bitmap != null) {
            bitmap.recycle();
        }
        final String name = String.format(Locale.ENGLISH, pattern, current);
        final int id = getResources().getIdentifier(name, "drawable", getPackageName());
        if (id != 0) {
            bitmap = BitmapFactory.decodeResource(getResources(), id);
            view.setImageBitmap(bitmap);
        }
        current++;
        if (runAgain()) {
            frameCounter++;
            long nextAt = firstFrameAt + (frameCounter * interval);
            long delay = nextAt - SystemClock.elapsedRealtime() - 1;
            if (delay > 0) {
                handler.postDelayed(this, delay);
            } else {
                this.run();
            }
        }
    } 
```

编辑：我一直在考虑创建自己的自定义 ImageView 并覆盖导致问题的任何方法。这会是一个可行的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:45:08.097

是的，只是阻止布局请求。覆盖 onRequestLayout 并且不要调用超级。您可能必须在您的父级中执行一些手动 onLayout 以设置正确的大小（或者如果您是 ICS 则覆盖布局方法......不能在 2.x 中将其标记为最终版本）。说得通？

我的容器视图示例：

```
@Override
public void requestLayout() {

}

// i'm ignoring the widths/heights here an manually setting it to what i know it should be. The children DO need a layout initially or their widths will be 0 and not show. 
 // 

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    super.onLayout(changed, l, t, r, b);
    int count = getChildCount();
    for (int i=0; i<count; i++) {
        ImageView iv = (ImageView)getChildAt(i);
        iv.layout(0, 0, width, height);
    }
} 
```

所以现在每次孩子发生变化时，我都不必重新验证整个视图层次结构，因为我知道尺寸没有改变。这在设备上节省了大量的 CPU。您可能还想考虑这样的事情：[优化的图像视图](http://www.senab.co.uk/2013/01/17/snippet-imageview-layout-optimisation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:11:33.267

我通过实现我自己的自定义 ImageView 覆盖以下两种方法解决了这个问题：

```
@Override
public void setImageBitmap(final Bitmap bitmap) {
    if (VERSION.SDK_INT < VERSION_CODES.ICE_CREAM_SANDWICH) {

        // The currently set Drawable
        Bitmap oldBitmap = null;
        try
        {
            oldBitmap = ((BitmapDrawable)this.getDrawable()).getBitmap();   
        }catch(NullPointerException e)
        {
            Log.d("setImageBitmap", "oldBitmap is null");
        }

        if (null != oldBitmap && oldBitmap != bitmap) {
            final int oldWidth = oldBitmap.getWidth();
            final int oldHeight = oldBitmap.getHeight();

            /**
             * Ignore the next requestLayout call if the new Bitmap is the
             * same size as the currently displayed one.
             * */
            mIgnoreNextRequestLayout = oldHeight == bitmap.getHeight()
                    && oldWidth == bitmap.getWidth();
        }
    }

    super.setImageBitmap(bitmap);
}

@Override
public void requestLayout() {
    if (!mIgnoreNextRequestLayout) {
        super.requestLayout();
        Log.d("RequestLayout", "Requesting new layout");
    }
    else
        Log.d("RequestLayout", "Ignoring next requestLayout");

    // Reset Flag so that the requestLayout() will work again
    mIgnoreNextRequestLayout = false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:26:52.783

覆盖 ImageView 和（至少）它的 onDraw() 方法，使用 Canvas.drawBitmap 来绘制位图。

使用后台线程，您可以预取图像并创建一个小的 FIFO 位图队列，然后使用计时器机制触发队列中下一个位图的下一次绘制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T15:31:13.217

根据源代码`ImageView`：

```
/**
 * Sets a drawable as the content of this ImageView.
 * 
 * @param drawable The drawable to set
 */
public void setImageDrawable(Drawable drawable) {
    if (mDrawable != drawable) {
        mResource = 0;
        mUri = null;

        int oldWidth = mDrawableWidth;
        int oldHeight = mDrawableHeight;

        updateDrawable(drawable);

        if (oldWidth != mDrawableWidth || oldHeight != mDrawableHeight) {
            requestLayout();
        }
        invalidate();
    }
}

/**
 * Sets a Bitmap as the content of this ImageView.
 * 
 * @param bm The bitmap to set
 */
@android.view.RemotableViewMethod
public void setImageBitmap(Bitmap bm) {
    // if this is used frequently, may handle bitmaps explicitly
    // to reduce the intermediate drawable object
    setImageDrawable(new BitmapDrawable(mContext.getResources(), bm));
} 
```

很明显，对您提供的新位图的边界进行了检查，以决定是否请求布局。

```
 if (oldWidth != mDrawableWidth || oldHeight != mDrawableHeight) {
            requestLayout();
        } 
```

根据您的描述，我相信您的图像应该具有完全相同的大小，因为您几乎要创建电影效果。所以，检查它们的尺寸。如果它们已经具有相同的尺寸，您应该检查是否真的`the entire View Hierachy is re-calculate`！

旁注：

*   您可能应该检查图像的大小：大图像的解码也是 CPU 密集型的。
*   我建议您在单独的线程上解码下一个图像，然后在 50 毫秒过去时设置它，或者等到它们过去。换句话说，不要等待您的处理程序，解码下一个图像并在解码完成时通知。
*   您正在调用`recycle`位图！请检查文档：*`This is an advanced call, and normally need not be called, since the normal GC process will free up this memory when there are no more references to this bitmap.`*我不确定回收是否非常密集，但在这种情况下请遵循文档并且不要调用它。

# ms-access - Microsoft.ACE.OLEDB.12.0 Provider 无法再在 Windows 8 下打开 .mdb

> ID：14562587
> 
> 赞同：12
> 
> 时间：2013-01-28T12:58:44.757
> 
> 标签：ms-access, windows-8, 64-bit, oledb, office-2013

我有一个 x64 应用程序，它使用 Microsoft.ACE.OLEDB.12.0 提供程序来读取 Windows 7 (x64) 上的 MS Access 数据库，它工作正常（安装了 Office 2010）。

在安装了 Office 2013 的 Windows 8 下运行的同一应用程序失败，并显示一条消息，指出提供程序无法打开以前的版本。

在安装了 Office 2013 的 Windows 8 下，还有 Microsoft.ACE.OLEDB.15.0，但我仔细检查了我的代码并确定它在连接字符串中指定了 12.0。

该提供程序是否有不同的“版本” - 或者我错过了什么？

我已经在 Windows 8 下重新编译了一个使用 x86 平台的测试程序，并将提供程序更改为 Microsoft.Jet.OLEDB.4.0 并且一切正常。不幸的是，该模块是一个更大的生态系统的一部分，需要能够在 x64 下运行（特别是 excel 的插件），并且访问数据库是由套件通过应用程序从供应商的网站下载的，所以它是将数据库转换或将所有内容更改为 x86 是不切实际的。

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-28T13:41:21.163

我突然想到检查每个提供程序使用的文件版本，并通过注册表搜索，发现在安装了 Office 2013 的干净 Windows 8 安装下，两个提供程序都指向同一个程序集。

(C:\Program Files\Common Files\microsoft shared\OFFICE15\ACEOLEDB.DLL)

然后我下载并运行了 Microsoft Access Database Engine Redistributable ( [http://www.microsoft.com/en-us/download/details.aspx?id=13255](http://www.microsoft.com/en-us/download/details.aspx?id=13255) )，然后将正确版本的 12.0 提供程序安装到 C:\ Program Files\Common Files\microsoft shared\OFFICE14\ACEOLEDB.DLL 并且应用程序的行为符合预期。

MS 包含一个标为 12.0 的提供程序，它的行为不再像 12.0，这似乎很奇怪。

无论如何-希望能帮助拉头发 4-5 小时的人...

克雷格

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-10T18:13:39.050

安装旧版 ACE 可再发行组件的问题在于，下次您在 Office 2013 中运行 Access 时，Office 将自行“修复”并将版本 12 的指针切换回 Office15 目录。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-23T08:12:11.843

只是为了澄清OP描述的行为：

对于 Office 2013 (ACE 15.0)，Microsoft 取消了对使用 Jet 3.x 及更早版本（即 Access 97 及更早版本）创建的 mdb-Files 的支持。因此，我强烈假设导致问题的 OP 数据库是 Access97-DB。Jet 4.0 数据库（Access 2000，还有 .mdb）仍然受支持，不会产生任何错误。

Office 2013 还将其较新的驱动程序注册为早期版本的事实是 MS 故意尝试保持许多程序和脚本正常工作，这些程序和脚本内置了一个硬编码的提供程序名称。正如您在升级时所认识到的那样，这只会使许多程序和脚本**正常**工作, 不是**所有**的...

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-06-04T14:15:09.747

我使用的是**Windows 8.1 64 位**和 Microsoft **Office 2013** 我安装了**“Microsoft Access Database Engine 2010 Redistributable”**，但没有任何改变，但出现了同样的错误！安装**“2007 Office System 驱动程序：数据连接组件”**解决了该问题。

我通过这个[链接](http://social.msdn.microsoft.com/Forums/en-US/1d5c04c7-157f-4955-a14b-41d912d50a64/how-to-fix-error-the-microsoftaceoledb120-provider-is-not-registered-on-the-local-machine?forum=vstsdb)找到了这个解决方案。

> 尝试连接到 Visual Studio 中的 Access 数据库但不断收到此错误？
> 
> 尝试先安装这个：http: [//www.microsoft.com/download/en/details.aspx?id=13255](http://www.microsoft.com/download/en/details.aspx?id=13255)
> 
> 但是，如果像我一样，这对您不起作用，请尝试以下方法：
> 
> 注意：这确实适用于 Office 2010，即使它适用于 2007 Office，不要问我为什么会这样 :)
> 
> 1.  下载并安装：[http ://www.microsoft.com/download/en/confirmation.aspx?id=23734](http://www.microsoft.com/download/en/confirmation.aspx?id=23734)
>     
>     
> 2.  在 VS 中点击添加数据源，按照向导进行操作！:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-12T12:37:53.853

此外，32 位版本的 Redistributable 似乎适用于 64 位 Windows 操作系统上的 Office 2013_64 位，而 64 位版本的 Redistributable 不适用于我的情况

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-16T22:34:54.040

1.  安装 Microsoft Access 数据库引擎 2010 Redistributable x 64( [http://www.microsoft.com/en-us/download/details.aspx?id=13255](http://www.microsoft.com/en-us/download/details.aspx?id=13255) )
2.  将您的数据库转换为新格式 (.mdb -> .accdb)
3.  在整个项目中搜索“Microsoft.Jet.OleDb.4.0”并将其替换为 Microsoft.ACE.OLEDB.12.0

# ruby-on-rails-3 - 为什么 Ruby on Rails 需要这么长时间才能启动？

> ID：14562588
> 
> 赞同：11
> 
> 时间：2013-01-28T12:58:46.567
> 
> 标签：ruby-on-rails-3, performance

我在具有 8GB RAM 的 2011 Macbook Pro 上运行 Ruby on Rails。我在没有选项的情况下启动 rails 需要 2 秒，加载控制台需要 12 秒。Rails 这段时间在做什么？我不敢相信这需要 12 秒。`app`我的应用程序没有那么大——文件夹中有 10,607 行。

```
$ time rails > /dev/null

real    0m2.830s
user    0m2.751s
sys 0m0.076s

$ time echo exit | rails console > /dev/null

real    0m12.825s
user    0m11.779s
sys 0m0.898s 
```

我正在运行 Ruby 1.9.3 和 Rails 3.2：

```
$ ruby -v
ruby 1.9.3p327 (2012-11-10 revision 37606) [x86_64-darwin12.0.0]
$ rails -v
Rails 3.2.11
$ wc -l `find app -name *.rb`
10607 total 
```

**编辑：**

对一个空的 rails 项目做同样的事情（只是`rails new`）：

```
marc@menasor ~/dev/rails_empty $ time rails > /dev/null
real    0m2.192s
marc@menasor ~/dev/rails_empty $ time echo exit | rails c > /dev/null
real    0m3.807s 
```

因此，启动一个空的 Rails 项目需要将近 4 秒。这 4 秒发生了什么？

以下是在配备 4GB RAM 的 SSD 的 Macbook Air 上启动我的原始 Rails 项目的一些时间。

```
$ time rails
real    0m1.161s
$ time echo exit | rails console
real    0m20.356s 
```

所以 SDD 减少了 rails 的启动时间将近 2 秒，所以我假设是在做大量的 IO。不过，启动 rails 控制台的时间已经增加了。

**编辑：**

在 Reck 的建议之后添加分析数据：

```
Total: 404 samples
 116  28.7%  28.7%      116  28.7% garbage_collector
  62  15.3%  44.1%      258  63.9% Kernel#require
  12   3.0%  47.0%       28   6.9% Journey::Visitors::Each#visit
  12   3.0%  50.0%       12   3.0% Regexp#===
   9   2.2%  52.2%       52  12.9% Module#class_eval
   9   2.2%  54.5%       12   3.0% Module#module_eval
   9   2.2%  56.7%        9   2.2% Module#remove_method
   8   2.0%  58.7%        9   2.2% Module#enable
   7   1.7%  60.4%       24   5.9% Journey::Visitors::Visitor#visit
   6   1.5%  61.9%      255  63.1% Kernel#tap
   5   1.2%  63.1%      237  58.7% BasicObject#instance_exec
   5   1.2%  64.4%        5   1.2% Psych::Nodes::Scalar#initialize
   4   1.0%  65.3%        8   2.0% Array#uniq
   4   1.0%  66.3%       11   2.7% Enumerable#inject
   4   1.0%  67.3%       71  17.6% Kernel#load
   4   1.0%  68.3%       61  15.1% Kernel.load 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T21:54:07.093

我们可以只分析 rails 引导序列，看看我们是否从中学到了什么。

*   添加`gem 'perftools.rb'`到您的 gemfile（'.rb' 位不是错字）
*   跑`bundle install`
*   添加`require 'perftools'`到顶部`/environments/development.rb`
*   添加`PerfTools::CpuProfiler.start('/tmp/dev_prof')`到配置块中`development.rb`
*   选择一个您可以在应用程序中轻松访问的网址。在我的例子中，url 是 localhost:3000/games。
*   找到处理该 url 调用的控制器方法。在我的例子中，它是 GamesController 中的 index 方法。
*   添加`require 'perftools'`到 GamesController 的顶部
*   添加`PerfTools::CpuProfiler.stop`到 GamesController 的 index 方法中。

现在用'rails s'启动rails开发环境。

*   一旦加载了rails，就去访问localhost:3000/games，这会导致分析器写入/tmp/dev_prof。
*   导航到 /tmp 文件夹并运行 'pprof.rb --tex /tmp/dev_prof | 较少的'

顶部的电话是占用时间最多的电话。您可能会注意到垃圾收集器占用了相当多的时间。幸运的是，我们可以改进这一点：

*   运行“导出 RUBY_GC_MALLOC_LIMIT=60000000”
*   运行“导出 RUBY_FREE_MIN=200000”

当您重做分析时，垃圾收集器现在应该占用更少的时间。有关更多信息，请参阅[http://whalesalad.com/posts/reduce-rails-boot-time-by-30-40-percent](http://whalesalad.com/posts/reduce-rails-boot-time-by-30-40-percent)。

```
Before:
  82  35.8%  35.8%       82  35.8% garbage_collector
  30  13.1%  48.9%      131  57.2% Kernel#require
   9   3.9%  52.8%        9   3.9% Regexp#===
   6   2.6%  55.5%       25  10.9% Module#class_eval
   5   2.2%  57.6%        8   3.5% Module#module_eval
   4   1.7%  59.4%        9   3.9% Journey::Visitors::Visitor#visit
   4   1.7%  61.1%      129  56.3% Kernel#tap
   4   1.7%  62.9%       33  14.4% Kernel.load
   4   1.7%  64.6%        4   1.7% Module#enable
   3   1.3%  65.9%        3   1.3% Enumerable#any?
   3   1.3%  67.2%       20   8.7% EventMachine.run_machine

After:
  33  18.1%  18.1%       33  18.1% garbage_collector
  31  17.0%  35.2%      137  75.3% Kernel#require
   5   2.7%  37.9%        6   3.3% Module#enable
   5   2.7%  40.7%        6   3.3% Module#module_eval
   5   2.7%  43.4%        5   2.7% Regexp#===
   4   2.2%  45.6%      125  68.7% BasicObject#instance_exec
   4   2.2%  47.8%       20  11.0% EventMachine.run_machine 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T17:46:11.527

我遇到了同样的问题，虽然我的笔记本电脑已经 4 年了，只有 4gb 内存，但是我现在正在使用这个：[https ://github.com/thedarkone/rails-dev-boost](https://github.com/thedarkone/rails-dev-boost)

对我来说，它已将加载环境的时间缩短到几秒钟（3/4）。希望它可以帮助你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T13:25:41.740

可能是因为您在开发环境中运行 rails。在这里查看开发和生产之间的一些区别 - [Rails 的开发和生产环境之间有什么重要的区别？](https://stackoverflow.com/questions/4739209/what-important-differences-are-there-between-rails-development-and-production-e)

# php - 从 XML 中获取具有属性值的特定标签

> ID：14562590
> 
> 赞同：-2
> 
> 时间：2013-01-28T12:58:54.160
> 
> 标签：php, xml, simplexml

我有一个如下的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<response uri="/crm/private/xml/SalesOrders/getRecords">
    <result>
        <SalesOrders>
            <row no="1">
                <FL val="SALESORDERID">580005000000187001</FL>
                <FL val="SO Number"><![CDATA[580005000000187002]]></FL>
                <FL val="Subject"><![CDATA[Sales order test from sri 02]]></FL>
                <FL val="Due Date"><![CDATA[2013-03-10]]></FL>
                <FL val="Status"><![CDATA[Created]]></FL>
                <FL val="ACCOUNTID">580005000000088096</FL>
                <FL val="Account Name"><![CDATA[Best Western Pavilions]]></FL>
                <FL val="SMOWNERID">580005000000052003</FL>
                <FL val="Sales Order Owner"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="SMCREATORID">580005000000052003</FL>
                <FL val="Created By"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="MODIFIEDBY">580005000000052003</FL>
                <FL val="Modified By"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="Created Time"><![CDATA[2013-01-17 20:32:19]]></FL>
                <FL val="Modified Time"><![CDATA[2013-01-17 20:32:19]]></FL>
                <FL val="Sub Total"><![CDATA[250]]></FL>
                <FL val="Tax"><![CDATA[0]]></FL>
                <FL val="Adjustment"><![CDATA[0]]></FL>
                <FL val="Grand Total"><![CDATA[250]]></FL>
                <FL val="Product Details">
                    <product no="1">
                        <FL val="Product Id">580005000000171125</FL>
                        <FL val="Product Name"><![CDATA[The Grilling Maestro]]></FL>
                        <FL val="Unit Price">10.0</FL>
                        <FL val="Quantity">20.0</FL>
                        <FL val="Quantity in Stock">0.0</FL>
                        <FL val="Total">200.0</FL>
                        <FL val="Discount">0.0</FL>
                        <FL val="Total After Discount">200.0</FL>
                        <FL val="List Price">10.0</FL>
                        <FL val="Net Total">200.0</FL>
                        <FL val="Tax">0.0</FL>
                        <FL val="Product Description"><![CDATA[null]]></FL>
                    </product>
                    <product no="2">
                        <FL val="Product Id">580005000000171131</FL>
                        <FL val="Product Name"><![CDATA[Uptown Deli   Soup du Jour]]></FL>
                        <FL val="Unit Price">25.0</FL>
                        <FL val="Quantity">1.0</FL>
                        <FL val="Quantity in Stock">0.0</FL>
                        <FL val="Total">50.0</FL>
                        <FL val="Discount">1.23</FL>
                        <FL val="Total After Discount">23.77</FL>
                        <FL val="List Price">25.0</FL>
                        <FL val="Net Total">48.77</FL>
                        <FL val="Tax">0.0</FL>
                        <FL val="Product Description"><![CDATA[null]]></FL>
                    </product>
                </FL>
                <FL val="Terms and Conditions"><![CDATA[iBanquet T and C]]></FL>
                <FL val="Description"><![CDATA[Sales Order from iBanquet]]></FL>
                <FL val="Discount"><![CDATA[0]]></FL>
            </row>
            <row no="2">
                <FL val="SALESORDERID">580005000000134001</FL>
                <FL val="SO Number"><![CDATA[580005000000134003]]></FL>
                <FL val="Subject"><![CDATA[Test]]></FL>
                <FL val="CONTACTID">580005000000120009</FL>
                <FL val="Contact Name"><![CDATA[Sydney Lai]]></FL>
                <FL val="Carrier"><![CDATA[FedEX]]></FL>
                <FL val="Excise Duty"><![CDATA[0]]></FL>
                <FL val="Sales Commission"><![CDATA[0]]></FL>
                <FL val="Status"><![CDATA[Created]]></FL>
                <FL val="ACCOUNTID">580005000000088100</FL>
                <FL val="Account Name"><![CDATA[Best Western Sportstown Anaheim]]></FL>
                <FL val="SMOWNERID">580005000000052003</FL>
                <FL val="Sales Order Owner"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="SMCREATORID">580005000000052003</FL>
                <FL val="Created By"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="MODIFIEDBY">580005000000052003</FL>
                <FL val="Modified By"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="Created Time"><![CDATA[2012-11-08 14:51:50]]></FL>
                <FL val="Modified Time"><![CDATA[2012-11-08 14:51:50]]></FL>
                <FL val="Sub Total"><![CDATA[45]]></FL>
                <FL val="Tax"><![CDATA[0]]></FL>
                <FL val="Adjustment"><![CDATA[0]]></FL>
                <FL val="Grand Total"><![CDATA[45]]></FL>
                <FL val="Product Details">
                    <product no="1">
                        <FL val="Product Id">580005000000059016</FL>
                        <FL val="Product Name"><![CDATA[Beef Stoganoff]]></FL>
                        <FL val="Unit Price">14.95</FL>
                        <FL val="Quantity">1.0</FL>
                        <FL val="Quantity in Stock">-25.0</FL>
                        <FL val="Total">45.0</FL>
                        <FL val="Discount">0.0</FL>
                        <FL val="Total After Discount">45.0</FL>
                        <FL val="List Price">45.0</FL>
                        <FL val="Net Total">45.0</FL>
                        <FL val="Tax">0.0</FL>
                        <FL val="Product Description"><![CDATA[null]]></FL>
                    </product>
                </FL>
                <FL val="Discount"><![CDATA[0]]></FL>
            </row>
            <row no="3">
                <FL val="SALESORDERID">580005000000118001</FL>
                <FL val="SO Number"><![CDATA[580005000000118003]]></FL>
                <FL val="Subject"><![CDATA[SAirpriya's Birthday]]></FL>
                <FL val="POTENTIALID">580005000000069001</FL>
                <FL val="Potential Name"><![CDATA[Sandeep]]></FL>
                <FL val="Due Date"><![CDATA[2012-10-17]]></FL>
                <FL val="Carrier"><![CDATA[FedEX]]></FL>
                <FL val="Excise Duty"><![CDATA[0]]></FL>
                <FL val="Sales Commission"><![CDATA[0]]></FL>
                <FL val="Status"><![CDATA[Created]]></FL>
                <FL val="ACCOUNTID">580005000000088090</FL>
                <FL val="Account Name"><![CDATA[Best Western Anaheim Inn]]></FL>
                <FL val="SMOWNERID">580005000000052003</FL>
                <FL val="Sales Order Owner"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="SMCREATORID">580005000000052003</FL>
                <FL val="Created By"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="MODIFIEDBY">580005000000052003</FL>
                <FL val="Modified By"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="Created Time"><![CDATA[2012-10-16 14:45:18]]></FL>
                <FL val="Modified Time"><![CDATA[2012-10-16 14:45:18]]></FL>
                <FL val="Sub Total"><![CDATA[1080]]></FL>
                <FL val="Tax"><![CDATA[0]]></FL>
                <FL val="Adjustment"><![CDATA[0]]></FL>
                <FL val="Grand Total"><![CDATA[1080]]></FL>
                <FL val="Product Details">
                    <product no="1">
                        <FL val="Product Id">580005000000059016</FL>
                        <FL val="Product Name"><![CDATA[Beef Stoganoff]]></FL>
                        <FL val="Unit Price">14.95</FL>
                        <FL val="Quantity">24.0</FL>
                        <FL val="Quantity in Stock">-25.0</FL>
                        <FL val="Total">1080.0</FL>
                        <FL val="Discount">0.0</FL>
                        <FL val="Total After Discount">1080.0</FL>
                        <FL val="List Price">45.0</FL>
                        <FL val="Net Total">1080.0</FL>
                        <FL val="Tax">0.0</FL>
                        <FL val="Product Description"><![CDATA[null]]></FL>
                    </product>
                </FL>
                <FL val="Discount"><![CDATA[0]]></FL>
            </row>
            <row no="4">
                <FL val="SALESORDERID">580005000000070009</FL>
                <FL val="SO Number"><![CDATA[580005000000070011]]></FL>
                <FL val="Subject"><![CDATA[iBanquet]]></FL>
                <FL val="QUOTEID">580005000000070003</FL>
                <FL val="Quote Name"><![CDATA[iBanquet]]></FL>
                <FL val="Carrier"><![CDATA[UPS]]></FL>
                <FL val="Excise Duty"><![CDATA[0]]></FL>
                <FL val="Sales Commission"><![CDATA[0]]></FL>
                <FL val="Status"><![CDATA[Created]]></FL>
                <FL val="ACCOUNTID">580005000000058001</FL>
                <FL val="Account Name"><![CDATA[Hotel Skysurf]]></FL>
                <FL val="SMOWNERID">580005000000052003</FL>
                <FL val="Sales Order Owner"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="SMCREATORID">580005000000052003</FL>
                <FL val="Created By"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="MODIFIEDBY">580005000000052003</FL>
                <FL val="Modified By"><![CDATA[Adithya Buddhavarapu]]></FL>
                <FL val="Created Time"><![CDATA[2012-06-19 19:17:12]]></FL>
                <FL val="Modified Time"><![CDATA[2012-06-29 19:55:00]]></FL>
                <FL val="Sub Total"><![CDATA[20538]]></FL>
                <FL val="Tax"><![CDATA[0]]></FL>
                <FL val="Adjustment"><![CDATA[0]]></FL>
                <FL val="Grand Total"><![CDATA[20538]]></FL>
                <FL val="Product Details">
                    <product no="1">
                        <FL val="Product Id">580005000000059032</FL>
                        <FL val="Product Name"><![CDATA[Carrot Cake]]></FL>
                        <FL val="Unit Price">10.0</FL>
                        <FL val="Quantity">441.0</FL>
                        <FL val="Quantity in Stock">-882.0</FL>
                        <FL val="Total">4410.0</FL>
                        <FL val="Discount">0.0</FL>
                        <FL val="Total After Discount">4410.0</FL>
                        <FL val="List Price">10.0</FL>
                        <FL val="Net Total">4410.0</FL>
                        <FL val="Tax">0.0</FL>
                        <FL val="Product Description"><![CDATA[null]]></FL>
                    </product>
                    <product no="2">
                        <FL val="Product Id">580005000000059022</FL>
                        <FL val="Product Name"><![CDATA[Chicken Parmigiano]]></FL>
                        <FL val="Unit Price">15.0</FL>
                        <FL val="Quantity">122.0</FL>
                        <FL val="Quantity in Stock">-122.0</FL>
                        <FL val="Total">1464.0</FL>
                        <FL val="Discount">0.0</FL>
                        <FL val="Total After Discount">1464.0</FL>
                        <FL val="List Price">12.0</FL>
                        <FL val="Net Total">1464.0</FL>
                        <FL val="Tax">0.0</FL>
                        <FL val="Product Description"><![CDATA[null]]></FL>
                    </product>
                    <product no="3">
                        <FL val="Product Id">580005000000059030</FL>
                        <FL val="Product Name"><![CDATA[Coconut Cake]]></FL>
                        <FL val="Unit Price">10.0</FL>
                        <FL val="Quantity">1222.0</FL>
                        <FL val="Quantity in Stock">-1222.0</FL>
                        <FL val="Total">14664.0</FL>
                        <FL val="Discount">0.0</FL>
                        <FL val="Total After Discount">14664.0</FL>
                        <FL val="List Price">12.0</FL>
                        <FL val="Net Total">14664.0</FL>
                        <FL val="Tax">0.0</FL>
                        <FL val="Product Description"><![CDATA[null]]></FL>
                    </product>
                </FL>
                <FL val="Discount"><![CDATA[0]]></FL>
            </row>
        </SalesOrders>
    </result>
</response> 
```

`<FL val="Sales Order Owner">`我只需要显示存储在标签下的销售订单所有者名称的名称。

得到xml后，我转换成数组，然后尝试访问。我的代码是这样的：

```
foreach ($xml_sales->result->SalesOrders->row as $t) {
  foreach ($t->FL as $rr) {
    echo $rr."<br />";  
  }
} 
```

显示所有 FL 值。

/ ***** ** *** ** *** *****编辑后****** ** *** ****** /

```
$file_sales_content = "https://crm.zoho.com/crm/private/xml/SalesOrders/getRecords?authtoken=XXX&scope=crmapi"  
$doc = new DOMDocument();
$doc->loadXML( $file_sales_content );   
$xpath = new DOMXPath( $doc );
$items = $xpath->evaluate( '//FL[@val="Sales Order Owner"]' );
for ( $i = 0; $i < $items->length; $i++ ) {
 echo $items->item( $i )->textContent . '<br>';
} 
```

实际上通过这个 url，我得到了 xml 文件。但最后我收到了一些警告，例如：`Warning: DOMDocument::loadXML() [domdocument.loadxml]: Start tag expected, '<' not found in Entity, line: 1 in C:\xampp\htdocs\ibanquet\manager\user_list.php on line 34`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:08:21.477

您需要做的只是创建[`DOMDocument`](http://php.net/manual/en/class.domdocument.php)对象、加载您的 xml、[`DOMXpath`](http://php.net/manual/en/class.domxpath.php)为您的文档创建对象并评估 xpath 表达式：

```
$xml = file_get_contents( "https://crm.zoho.com/crm/private/xml/SalesOrders/getRecords?authtoken=XXX&scope=crmapi" );

$doc = new DOMDocument();
$doc->loadXML( $xml );

$xpath = new DOMXPath( $doc );
$items = $xpath->evaluate( '//FL[@val="Sales Order Owner"]' );
for ( $i = 0; $i < $items->length; $i++ ) {
    echo $items->item( $i )->textContent . '<br>';
} 
```

它将输出：

```
Adithya Buddhavarapu
Adithya Buddhavarapu
Adithya Buddhavarapu
Adithya Buddhavarapu 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:11:39.513

你最好用 Xpath 表达式来表达：

```
$owner = ($nodes = $xml_sales->xpath('//FL[@val = "Sales Order Owner"][1]')) 
         ? (string) $nodes[0] 
         : NULL; 
```

这将给出：

```
Adithya Buddhavarapu 
```

在你的情况下。如果未找到该元素，则为`NULL`.

```
//FL[@val = "Sales Order Owner"][1] 
```

这是 xpath 表达式。上面写着：

`FL`获取文档中具有第一个元素 ( )`val`值的属性的任何元素。`"Sales Order Owner"``[1]`

如果您需要每行，它的工作原理类似，只需运行 xpath *per row*。见[`SimpleXMLElement::xpath`](http://php.net/simplexmlelement.xpath)。

# c# - 使用 TCHAR** x[] 参数从 C# 编组到 DLL

> ID：14562591
> 
> 赞同：2
> 
> 时间：2013-01-28T12:59:00.773
> 
> 标签：c#, .net, dll, marshalling, dllimport

我正在尝试从某些 C# 调用 Win32 DLL。DLL函数声明如下：

```
extern "C" __declspec(dllexport) UINT foo(TCHAR** list[], int& listSize, TCHAR* error); 
```

在 C# 中，我像这样声明外部函数：

```
[DllImport("foo.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]
static extern uint foo(StringBuilder[] list, ref int listSize, StringBuilder error); 
```

我的问题与*list*参数有关，它是 StringBuilder 类的数组。

我调用 DLL 函数的一些测试代码如下：（注意：我意识到缺少边界检查等。在这个阶段，我只是想让事情正常工作）。

```
// allocate a buffer for a possible error message being returned
StringBuilder error = new StringBuilder(1000);

// allocate buffers for the list of strings returned
StringBuilder[] list = new StringBuilder[10];
for (int i = 0; i < 10; i++)
{
    list[i] = new StringBuilder(1000);
}

int listSize = list.Length;

uint result = foo(list, ref listSize, error); 
```

将 StringBuilder 作为*错误*参数的缓冲区传递，可以正常工作。我可以在 DLL 中设置它的内容，如下所示：

```
_tcscpy(error, _T("Something went wrong"); 
```

当 C# 对*foo*的调用返回时，*字符串错误*变量具有我们在 DLL 中设置的文本。

但是，我无法弄清楚如何编组*StringBuilder[] 列表*参数。

在 C++ 中，我可以设置*列表*数组的内容：

```
_tcscpy((*list)[0], _T("First item")); 
// and so on... 
```

而且，即使没有由于任何可能的编组问题而发生崩溃，当对*foo()*的调用返回时，C# 中的*列表*也不包含我们在 C++ 中设置的任何字符串。

 *我猜问题出在*DllImport*以及我如何声明*list*参数应该被编组。

顺便说一句，示例 DLL 有一个匹配函数，然后调用该函数以释放上面显示的示例*foo*返回的“TCHAR** 列表” 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:17:46.500

我已经有一段时间没有这样做了，但是您应该尝试以下操作以正确编组数组*列表*：

*向list*添加一个 `[MarshalAs(UnmanagedType.LPArray, ArraySubType.LPTStr, SizeParamIndex=1)]` 属性，您应该添加一个，因为数据是在 C++ 代码中分配的。*`out`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:18:22.680

好的，我找到了解决问题的方法。看起来答案在于*IntPtr*。C 函数在“TCHAR** list[]”中创建并返回了一个字符串数组。

首先，我将 C# 中的声明更改为：

```
[DllImport("foo.dll", CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Auto)]
static extern uint foo(out IntPtr[] list, ref int listSize, StringBuilder error); 
```

然后，当对 DLL 的调用返回时，我需要从数组中提取字符串：

```
string[] returnedList = new string[listSize];
IntPtr[] ptrArray = new IntPtr[listSize];

Marshal.Copy(list, ptrArray, 0, listSize);

for (int i = 0; i < listSize; i++)
{
    returnedList[i] = Marshal.PtrToStringAuto(ptrArray[i]);
} 
```

这导致从 C DLL 中取回字符串数组。**

# php - ＃warning＃当我将我的php文件从一个站点复制到同一个Zend中的另一个站点时调用未定义的函数'print_r'

> ID：14562593
> 
> 赞同：2
> 
> 时间：2013-01-28T12:59:03.990
> 
> 标签：php, zend-studio, php-5.2

![在此处输入图像描述](../Images/f70687b9d2d0dff3537450357aeff942.png)

*   我真的不明白这里发生了什么。我所做的是将一个 php 文件复制到同一个 Zend 中的另一个项目中。这是一个警告，而不是错误。

*   我的电脑应该只有一个php版本，所以似乎与php版本无关。

*   该函数是标准的“print_r”，所以它似乎与未定义的函数无关。

代码很正常，比如：print_r("image:");

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T02:49:11.730

> 试试这个 kb.zend.com/index.php?View=entry&EntryID=415 – @Rakesh Sharma

要解决此问题，用户需要手动将相关内容添加到“.buildpath”文件中。

*   关闭项目（项目|关闭项目）。
*   使用文本编辑器打开位于项目根目录中的“.buildpath”文件。如果该文件不存在，请创建它。将正确的内容粘贴到“.buildpath”文件中：

PHP 项目的 .buildpath 内容

```
<?xml version="1.0" encoding="UTF-8"?>
<buildpath>
    <buildpathentry kind="src" path=""/>
    <buildpathentry kind="con" path="org.eclipse.php.core.LANGUAGE"/>
</buildpath> 
```

Zend 框架项目的 .buildpath 内容

```
<?xml version="1.0" encoding="UTF-8"?>
<buildpath>
    <buildpathentry kind="src" path=""/>
    <buildpathentry kind="con" path="org.eclipse.php.core.LANGUAGE"/>
    <buildpathentry kind="con" path="org.zend.php.framework.CONTAINER"/>
</buildpath> 
```

*   保存文件。
*   打开您的项目（项目|打开项目）。
*   重建项目（项目|清洁）。

**构建过程完成后，您应该不会看到标准 PHP 函数的警告。**

# android - 在 Parse.com 上获取图像文件的链接

> ID：14562595
> 
> 赞同：2
> 
> 时间：2013-01-28T12:59:08.250
> 
> 标签：android, image, file, parse-platform

我的表中有文件列。

该文件代表图像。

文件没问题，我可以[将它作为字节数组获取。](https://stackoverflow.com/questions/14503689/get-file-from-parseobject)

我可以获得此图片的直接（网络）链接吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T18:49:34.340

`getUrl()`您可以使用该方法获取文件的URL 。因此，如果`imageFile`是 a `ParseFile`，您将通过以下方式获取 URL：

```
imageFile.getUrl(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-21T07:54:11.027

`getUrl()`不再工作。而是使用以下内容。

```
var imageURL = imageFile.url(); 
```

# css - 当父项暂时隐藏且不显示时，webkit 会丢失过渡动画

> ID：14562596
> 
> 赞同：3
> 
> 时间：2013-01-28T12:59:08.513
> 
> 标签：css, css-transitions

似乎当我们更改过渡子元素的父元素的显示属性时，在 webkit 中子元素的动画停止 - 当元素的显示恢复时，子样式显示为好像过渡已经完成/ css 过渡属性不存在。

在 firefox 中，过渡不会中断，就好像即使父元素（和内部元素）暂时隐藏，元素也会继续过渡

这是该问题的复制：[https](https://tinker.io/95219/1) ://tinker.io/95219/1动画，然后在矩形过渡时隐藏显示。尝试在 Firefox 和 webkit 中查看差异

这是一个已知的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:05:40.253

使用`visibility: hidden;`而不是`display: none;`似乎有效。

像这样：[https ://tinker.io/95219/3](https://tinker.io/95219/3)

```
.hidden {
    visibility: hidden;
} 
```

如果您想模拟`display: none;`（即好像元素确实完全隐藏），您可以将高度设置为零，如下所示：[https](https://tinker.io/95219/4) ://tinker.io/95219/4 （必须定位`#container`而不是`#parent`实现这一点。

```
#container.hidden {
    visibility: hidden;
    height: 0;
} 
```

# c# - Windows azure Worker Role 每周电子邮件发送

> ID：14562597
> 
> 赞同：3
> 
> 时间：2013-01-28T12:59:10.377
> 
> 标签：c#, azure, azure-storage, azure-web-roles, azure-worker-roles

如何在 Windows azure 应用程序中使用 Worker Role 发送每周电子邮件报告

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:02:28.040

正确，如果您使用移动服务，您可以非常轻松地将某些脚本设置为以固定时间间隔运行。当然支持一次/周间隔。详细信息可在以下位置找到：[https ://www.windowsazure.com/en-us/develop/mobile/tutorials/schedule-backend-tasks/](https://www.windowsazure.com/en-us/develop/mobile/tutorials/schedule-backend-tasks/)

但是，如果您已经在云服务上运行应用程序，您可能希望查看使用 Windows Azure 商店中的调度程序加载项。SendGrid 可能是最简单的电子邮件选项，因为您也可以通过商店将其添加到您的订阅中。
此处提供了使用 SendGrid 和 Windows Azure 发送电子邮件的文档：[https](https://www.windowsazure.com/en-us/develop/net/how-to-guides/sendgrid-email-service/) ://www.windowsazure.com/en-us/develop/net/how-to-guides/sendgrid-email-service/ 有关调度程序附加组件的详细信息可在此处获得： [https](https://www.windowsazure.com/en-us/store/service/?name=scheduler)
://www.windowsazure.com/en-us/store/service/?name= scheduler 有关 SendGrid 的详细信息，包括针对 Windows Azure 客户的免费优惠，可在此处获得：[https://www.windowsazure .com/en-us/store/service/?name=sendgrid](https://www.windowsazure.com/en-us/store/service/?name=sendgrid)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:49:33.737

我建议您使用 Windows Azure 移动服务，而不是工作人员角色。我推荐使用它的原因是因为它原生支持任务调度。您可以在此处阅读更多相关信息：http: [//www.windowsazure.com/en-us/develop/mobile/tutorials/schedule-backend-tasks/](http://www.windowsazure.com/en-us/develop/mobile/tutorials/schedule-backend-tasks/)。还可以在此处查看使用 Send Grid 和 Windows Azure 移动服务发送电子邮件的示例：http: [//www.windowsazure.com/en-us/develop/mobile/tutorials/send-email-with-sendgrid/](http://www.windowsazure.com/en-us/develop/mobile/tutorials/send-email-with-sendgrid/)。您只需将这两者结合起来，就可以创建一个每周发送电子邮件的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:00:45.660

[如果您在角色中没有其他方法， SendGrid](http://sendgrid.com/)是一种易于使用的发送电子邮件服务。

# linux - shell脚本的开关

> ID：14562599
> 
> 赞同：0
> 
> 时间：2013-01-28T12:59:14.947
> 
> 标签：linux, shell

为 shell 脚本实现开关 [例如：-m] 的最佳方法是什么？我可以通过 switch case 语句来做到这一点。但我很想知道是否有任何其他标准方法可以通过开关将所有参数放入变量中。例如：-m A1 A2 -c c1 c2

因此， M[] 可以采用 -m 并且 C[] 都可以采用 -c

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:00:21.840

最著名的方法是使用`getopts`，请参阅[http://wiki.bash-hackers.org/howto/getopts_tutorial](http://wiki.bash-hackers.org/howto/getopts_tutorial)

一个例子 ：

```
#!/bin/bash

while getopts ":a" opt; do
  case $opt in
    a)
      echo "-a was triggered!" >&2
      ;;
    \?)
      echo "Invalid option: -$OPTARG" >&2
      ;;
  esac
done 
```

# qt - 如何从 QTableView 获取当前编辑器？

> ID：14562600
> 
> 赞同：4
> 
> 时间：2013-01-28T12:59:17.593
> 
> 标签：qt

有没有办法在编辑过程中获取编辑器（一个 QLineEdit 实例）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T13:53:00.270

委托创建编辑小部件，但不存储它并且视图不授予对它的访问权限（可能是因为它不是持久的）。

因此，您必须继承`QStyledItemDelegate`并重新实现`createEditor(QWidget*, const QStyleOptionViewItem&, const QModelIndex&) const`以存储返回指针的副本。然后，您可以通过委托提供对编辑器的访问权限。

AFAIK 您不能在单个视图中一次创建多个编辑器，并且[不鼓励](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#setItemDelegate)跨视图共享委托，因此保留最后创建的编辑器就足够了。我还将创建一个私有插槽，将指针归零并将其连接到创建的编辑器的破坏信号 - 所以你知道它总是有效的。

# iphone - IOS 6 中的音量检测

> ID：14562605
> 
> 赞同：1
> 
> 时间：2013-01-28T12:59:26.843
> 
> 标签：iphone, ios6

我正在创建一个应用程序，当应用程序处于后台并且用户更改 iPhone 应用程序中的音量时，应该知道它。有什么想法或线索吗？

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions

{
    //self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

    // Override point for customization after application launch.

    AudioSessionInitialize(NULL, NULL, NULL, NULL);

    AudioSessionSetActive(true);

    [[NSNotificationCenter defaultCenter]
     addObserver:self
     selector:@selector(volumeChanged:)
     name:@"AVSystemController_SystemVolumeDidChangeNotification"
     object:nil];

    self.window.backgroundColor = [UIColor whiteColor];

    [self.window makeKeyAndVisible];

    LoginVC *login=[[LoginVC alloc]initWithNibName:@"LoginVC" bundle:nil];

    self.navigate=[[UINavigationController alloc]initWithRootViewController:login];

    [self.window addSubview:navigate.view];

    [login release];

    [self.window makeKeyAndVisible];

    return YES;

}

- (void)volumeChanged:(NSNotification *)notification
{

    float volume =
    [[[notification userInfo]
      objectForKey:@"AVSystemController_AudioVolumeNotificationParameter"]
     floatValue];

    NSLog(@"chfi");

  // Do stuff with volume
} 
```

我已经使用了此代码，但它没有被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:08:35.627

你可以设置一个监听器。当音量改变时，回调方法将被调用。

# android - Jelly Bean Plus 中的演示类不拦截 onTouchEvent

> ID：14562608
> 
> 赞同：3
> 
> 时间：2013-01-28T12:59:33.850
> 
> 标签：android, android-alertdialog, touch-event, android-4.2-jelly-bean, display-manager

我正在开发一个 android 应用程序，它在辅助显示器上显示一些独特的内容。Jelly Bean Plus(4.2.1) 中新引入了演示类。这是一种特殊的对话框，其目的是在辅助显示器上呈现内容我正在使用辅助显示器模拟器测试我的应用程序，该模拟器可以从设置 - 开发人员选项中打开现在我想拦截辅助显示器上的触摸事件。看看我的演讲课

```
public class NewPresentation extends Presentation {

    public NewPresentation(Context outerContext, Display display) {
        super(outerContext, display);
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.notes_preview);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        return super.onTouchEvent(event);
    }
} 
```

但是，当我触摸辅助显示器上的某个位置时，这个 onTouchEvent 并没有触发。

我怀疑，由于 Presentation 扩展了 Dialog，它不能拦截触摸事件（不确定），Presentation 类也是如此

有没有办法让 Presentation 类拦截触摸事件？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-03T11:26:30.947

由于 Presentation 类扩展为 Dialog，并且对话框本身是可点击的，因此您可以从您的 Presentation 类中获得触摸事件。我在启用了辅助显示和触摸输入的设备上尝试了示例应用程序，它工作正常。您的辅助显示器可能没有触控支持

# ajax - 骨干抛出集合[方法]函数错误

> ID：14562615
> 
> 赞同：2
> 
> 时间：2013-01-28T13:00:04.947
> 
> 标签：ajax, backbone.js, collections, sync, fetch

我一直在玩 Backbone，我正在尝试了解它是如何工作的，以便我可以使用主干创建 phonegap 应用程序。0.9.9 版本一切正常，升级到 0.9.10 后返回：

```
TypeError: collection[method] is not a function

   collection[method](resp, options);

backbone-0.9.10.js (line 821) 
```

似乎该问题与以下部分有关：

```
var params = _.extend({
    'method': 'GET',
    'url': this.url,
    'cache': true,
    'dataType': 'json',
    'processData': true
}, options);

console.log(params);

return $.ajax(params); 
```

我无法找出问题所在。

0.9.9 的工作版本

```
http://92.245.6.92/backbone.peoples/index.html 
```

0.9.10 已升级且无法使用的版本

```
http://92.245.6.92/backbone.peoples/index2.html 
```

您能否帮我看看我的代码是否存在重大错误或发生了什么。0.9.10 是 1.0 的候选版本，所以我希望这不适用于任何新版本。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:19:10.953

fetch`success`回调签名从 更改`0.9.9`为`0.9.10`。回调签名现在是

```
function(collection, resp, options) { ... 
```

在您的应用程序中，您已覆盖`Collection.sync`，并使用 ( `app.js:35`) 执行回调：

```
options.success = function(data, textStatus, jqXHR) {
    model.parse(data);
    if(success)
        success(data, textStatus, jqXHR);
}; 
```

这会导致 Backbone 尝试调用对象上的方法`reset`，该`data`对象是一个普通的 javascript 数组并且没有这样的方法。要遵守新 API，您需要使用以下命令调用它：

```
var collection = this;
options.success = function(data, textStatus, jqXHR) {
    model.parse(data);
    if(success)
        success(collection , data, options);
}; 
```

# string - 用空格分割R中不均匀的字符串

> ID：14562623
> 
> 赞同：3
> 
> 时间：2013-01-28T13:00:35.257
> 
> 标签：string, r, split, dataframe

我阅读了许多关于在 R 中拆分字符串的帖子。但是，我遇到了一个错误，我认为这是由于变量被读入 R 的方式，即在某些情况下，由于 ID 较短，因此在日期之后有空格。我正在尝试将字符变量“VESSELID”拆分为 2 个新变量：“vesselID”和“DATE”。下面是我的数据集的一个子集。

```
> dput(df)
structure(list(SETID = c(24153L, 24187L, 24215L, 31990L, 31990L, 
31995L, 31995L, 31995L, 31996L, 31996L, 31996L, 31997L, 31997L, 
32002L, 32002L, 32002L, 32002L, 32003L, 32003L, 32003L), VESSELID = c("6830 2002/08/13  ", 
"6830 2002/08/12  ", "6830 2002/08/15  ", "105372 2002/08/23", 
"105372 2002/08/23", "104234 2002/07/20", "104234 2002/07/20", 
"104234 2002/07/20", "104234 2002/07/21", "104234 2002/07/21", 
"104234 2002/07/21", "104234 2002/07/22", "104234 2002/07/22", 
"5744 2002/08/14  ", "5744 2002/08/14  ", "5744 2002/08/14  ", 
"5744 2002/08/14  ", "5744 2002/08/13  ", "5744 2002/08/13  ", 
"5744 2002/08/13  ")), .Names = c("SETID", "VESSELID"), row.names = c(1L, 
2L, 3L, 10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 
21L, 22L, 23L, 24L, 25L, 26L), class = "data.frame") 
```

我确实尝试了以下方法：

```
library(reshape2)
test <- data.frame(df, colsplit(df$VESSELID, split= " ",names=c("vesselID","DATE"))) 
```

但是，我收到此错误消息：

```
Error in colsplit(log21$VESSELID, split = " ", names = c("vesselID", "DATE")) : 
      unused argument(s) (split = " ") 
```

该`split`命令似乎无法正常工作。我不知道如何修复我的字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:07:56.733

我实际上只是`read.table`在该列上使用，如下所示。假设您的数据集称为“mydata”：

```
mydata.new <- cbind(mydata[-2], 
                    read.table(text = as.character(mydata$VESSELID), 
                               strip.white=TRUE, header = FALSE))
names(mydata.new)[2:3] <- c("VesselID", "Date")
mydata.new
#    SETID VesselID       Date
# 1  24153     6830 2002/08/13
# 2  24187     6830 2002/08/12
# 3  24215     6830 2002/08/15
# 10 31990   105372 2002/08/23
# 11 31990   105372 2002/08/23
# 12 31995   104234 2002/07/20
# 13 31995   104234 2002/07/20
# 14 31995   104234 2002/07/20
# 15 31996   104234 2002/07/21
# 16 31996   104234 2002/07/21
# 17 31996   104234 2002/07/21
# 18 31997   104234 2002/07/22
# 19 31997   104234 2002/07/22
# 20 32002     5744 2002/08/14
# 21 32002     5744 2002/08/14
# 22 32002     5744 2002/08/14
# 23 32002     5744 2002/08/14
# 24 32003     5744 2002/08/13
# 25 32003     5744 2002/08/13
# 26 32003     5744 2002/08/13 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T13:06:32.317

参数名称不是`split`，它是`pattern`：

```
test <- data.frame(df, colsplit(df$VESSELID, pattern = " ",names=c("vesselID","DATE"))) 
```

给出：

```
 SETID          VESSELID vesselID         DATE
1  24153 6830 2002/08/13       6830 2002/08/13  
2  24187 6830 2002/08/12       6830 2002/08/12  
3  24215 6830 2002/08/15       6830 2002/08/15  
10 31990 105372 2002/08/23   105372   2002/08/23
11 31990 105372 2002/08/23   105372   2002/08/23
12 31995 104234 2002/07/20   104234   2002/07/20
13 31995 104234 2002/07/20   104234   2002/07/20
14 31995 104234 2002/07/20   104234   2002/07/20
15 31996 104234 2002/07/21   104234   2002/07/21
16 31996 104234 2002/07/21   104234   2002/07/21
17 31996 104234 2002/07/21   104234   2002/07/21
18 31997 104234 2002/07/22   104234   2002/07/22
19 31997 104234 2002/07/22   104234   2002/07/22
20 32002 5744 2002/08/14       5744 2002/08/14  
21 32002 5744 2002/08/14       5744 2002/08/14  
22 32002 5744 2002/08/14       5744 2002/08/14  
23 32002 5744 2002/08/14       5744 2002/08/14  
24 32003 5744 2002/08/13       5744 2002/08/13  
25 32003 5744 2002/08/13       5744 2002/08/13  
26 32003 5744 2002/08/13       5744 2002/08/13 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T13:26:20.460

尝试：

```
do.call("rbind", strsplit(VESSELID, " ")) 
```

应该返回类似：

```
[,1]     [,2]         [,3]    
[1,] "6830"   "2002/08/13" ""      
[2,] "6830"   "2002/08/12" ""      
[3,] "6830"   "2002/08/15" ""      
[4,] "105372" "2002/08/23" "105372"
[5,] "105372" "2002/08/23" "105372"
[6,] "104234" "2002/07/20" "104234"
[7,] "104234" "2002/07/20" "104234"
[8,] "104234" "2002/07/20" "104234"
[9,] "104234" "2002/07/21" "104234"
[10,] "104234" "2002/07/21" "104234"
[11,] "104234" "2002/07/21" "104234"
[12,] "104234" "2002/07/22" "104234"
[13,] "104234" "2002/07/22" "104234"
[14,] "5744"   "2002/08/14" ""      
[15,] "5744"   "2002/08/14" ""      
[16,] "5744"   "2002/08/14" ""      
[17,] "5744"   "2002/08/14" ""      
[18,] "5744"   "2002/08/13" ""      
[19,] "5744"   "2002/08/13" ""      
[20,] "5744"   "2002/08/13" "" 
```

从那里拿走你需要的东西

# jquery - 从自定义控件生成的 jquery 在回发后不起作用

> ID：14562624
> 
> 赞同：0
> 
> 时间：2013-01-28T13:00:34.787
> 
> 标签：jquery, controls, postback, generated

我正在创建一个自定义控件来为控件生成 jQuery 验证脚本，这些控件的验证规则取决于配置，因此经常更改。其中一项要求是，由于大量的回发和潜在的低带宽网络，必须在客户端进行验证。下面给出了我的自定义控件的输出示例。我遇到的常见问题是 jquery 在回发后停止工作，并且我尝试使用 PageLoad、Sys.Application.... 等，但这仍然是一个问题。我是 jQuery 的新手（一般是 JS），想知道当可能只有一个时生成大量 PageLoad 声明是否是问题所在？由于每个控件的动态验证规则，我无法对任何脚本进行硬编码。

```
 output.WriteLine("<script type='text/javascript'>" +
                        "$(document).ready(" +

                        "function () {" +
                        "  $('#" + ControlToValidate + "').mouseenter(function () {" +
                        "      $('#validate_msg_" + ControlToValidate + "').text('some error');" + 
                        "  });" +

                        "});" +
                        "</script>");

        output.WriteLine("<div id='validate_msg_" + ControlToValidate + "' style='color:Red'></div"); 
```

非常感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:34:33.160

您需要在每次页面加载时使用`<asp:scriptmanager>`并以编程方式加载脚本文件（将您的 jscript 放入文件中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:55:49.753

添加到以下两个地图可以解决问题，第一个在初始加载后调用，第二个在每个 AJAX 调用之后调用。

> $(document).ready(validatefunction); Sys.WebForms.PageRequestManager.getInstance().add_endRequest(validateFunction);

# python - 如何使用机器学习从给定的地理数据集在 python 中进行预测？

> ID：14562625
> 
> 赞同：7
> 
> 时间：2013-01-28T13:00:35.520
> 
> 标签：python, numpy, machine-learning, scikit-learn, forecasting

我正在分析一些地理数据，并试图根据时间和地理位置来预测/预测下一次事件的发生。数据按以下顺序（带有样本数据）

```
时间戳纬度经度事件
13307266 102.86400972 70.64039541 “事件 A”
13311695 102.8082912 70.47394645 “事件 A”
13314940 102.82240522 70.6308513 “事件 A”
13318949 102.83402128 70.64103035 “事件 A”
13334397 102.84726242 70.66790352 “事件 A”

```

第一步是将其分为 100 个区域，以减少尺寸和复杂性。

```

时间戳区
13307266 47
13311695 65
13314940 51
13318949 46
13334397 26

```

下一步是进行时间序列分析，然后我被困在这里 2 个月，阅读了很多文献并认为这些是我的选择 * ARIMA（自动回归方法） * 机器学习

我想利用机器学习来使用 python 进行预测，但无法真正弄清楚如何。具体来说，是否有任何特定于用例的 python 库/开源代码，我可以在这些库上进行构建。

编辑1：为了澄清，数据松散地依赖于过去的数据，但在一段时间内是均匀分布的。可视化数据的最佳方式是，想象由算法控制的 N 个代理，该*算法*分配给它们从网格中挑选资源的任务。资源是社会经济结构的功能，也强烈依赖于地理。*“算法*”的兴趣在于能够明智地预测需求区域和时间。

ps：对于像 ARIMA 这样的自回归模型，Python 已经有一个库[http://pypi.python.org/pypi/statsmodels](http://pypi.python.org/pypi/statsmodels)。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-28T13:27:59.573

如果没有示例数据或现有代码，我无法为您提供任何具体的东西。

然而，通常用你想探索的领域的命名法重新表述你的问题是有帮助的。在机器学习方面：

*   您的问题的**特征**：如何指定您的输入。时间戳是连续的，地理区域是离散的。
*   您的问题的**目标标签**：一个事件，确切地说是否发生了给定事件。
*   您的问题受到**监督**：以前数据的目标标签可用。您有（时间戳、地理区域）到事件映射的先前实例。
*   目标标签是*离散*的，所以这是一个**分类**问题（与**回归**问题相反，输出是连续的）。

所以我会说你有一个监督分类问题。顺便说一句，您可能想先进行某种时间正则化；我猜事件的模式取决于一天中的什么时间、一个月中的一天或一年中的一个月，您可能希望将其表示为附加功能。

在这里查看一个流行的 Python ML 库，scikit-learn：

[http://scikit-learn.org/stable/supervised_learning.html](http://scikit-learn.org/stable/supervised_learning.html)

并查阅其中一位贡献者最近在 scikit-learn 的备忘单上发布的帖子：

[http://peekaboo-vision.blogspot.de/2013/01/machine-learning-cheat-sheet-for-scikit.html](http://peekaboo-vision.blogspot.de/2013/01/machine-learning-cheat-sheet-for-scikit.html)

您的第一个好选择是尝试[支持向量机（SVM）](http://scikit-learn.org/stable/modules/svm.html)，如果失败，也可以尝试[k 最近邻（kNN）](http://scikit-learn.org/stable/modules/neighbors.html)。请注意，使用[集成分类](http://scikit-learn.org/dev/modules/ensemble.html)器通常优于仅使用给定 SVM/kNN 的一个实例。

究竟如何将 SVM/kNN 与时间作为特征应用可能需要更多的研究，因为 AFAIK（和其他人可能会纠正我）SVM/kNN 需要均值为零的有界输入（或归一化为均值为零） . 只需做一些随机的谷歌搜索，您就可以找到某些 SVM 内核，例如傅立叶内核，它可以为您转换时间序列特征：

用于时间序列分析的 SVM 内核
[http://www.stefan-rueping.de/publications/rueping-2001-a.pdf](http://www.stefan-rueping.de/publications/rueping-2001-a.pdf)

scikit-learn 允许您为 SVM 指定自定义内核。请参阅：
[http ://scikit-learn.org/stable/auto_examples/svm/plot_custom_kernel.html#example-svm-plot-custom-kernel-py](http://scikit-learn.org/stable/auto_examples/svm/plot_custom_kernel.html#example-svm-plot-custom-kernel-py)

凭借您对 ML 命名法的了解以及手头的示例数据，您可能需要考虑将问题发布到[Cross Validated](https://stats.stackexchange.com/)，即 Stack Exchange 统计数据。

编辑1：更多地考虑这个问题，您需要真正了解您的功能和相应的标签是否独立且同分布（IID）。例如，如果您模拟森林火灾如何随时间蔓延。很明显，给定区域着火的可能性取决于其邻居是否着火。AFAIK SVM 和 kNN 假设数据是 IID。在这一点上，我开始超出我的深度，但我认为您至少应该尝试几种 ML 方法，看看会发生什么！记得交叉验证！（scikit-learn 会为你做这件事）。

# rally - 用户故事查询有什么用？

> ID：14562627
> 
> 赞同：1
> 
> 时间：2013-01-28T13:00:45.833
> 
> 标签：rally

我正在尝试构建一个自定义应用程序以每页绘制 8 个用户故事卡。这旨在用于打印所有用户故事（并节省纸张:)）。

出于某种原因，我失败了，我似乎无法在 Rally SDK 中找到有关使用的文档？

`types`特别是查询中字段的所有选项是什么？我在 SO 和 web of `types: ['HierarchicalRequirement']`.. 中看到了一些示例，这种类型的含义是什么，我还可以使用哪些其他选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:14:12.390

您是否在应用程序目录中看到了 Print Story Cards 应用程序？

[http://developer.help.rallydev.com/print-story-cards-app](http://developer.help.rallydev.com/print-story-cards-app)

它每页打印 4 个 - 将其修改为 8 个应该不难。

HierarchicalRequirement 是用户故事的名称。您可以在此处的 WSAPI 文档中查看所有可用类型及其字段：

[https://rally1.rallydev.com/slm/doc/webservice/](https://rally1.rallydev.com/slm/doc/webservice/)

# java - JTable：如何使 JComboBox 单元格渲染器大于渲染单元格？

> ID：14562630
> 
> 赞同：1
> 
> 时间：2013-01-28T13:00:54.560
> 
> 标签：java, swing, jtable, jcombobox

我正在使用这种`JTable`方法创建一个以 JComboBox 作为其呈现外观的单元格。

```
public void addComboBoxToColumn(String[] options, int column_index){
    ComboTableCellRenderer renderer = new ComboTableCellRenderer();
    JComboBox<String> combo = new JComboBox<String>(options);
    TableCellEditor combo_editor  = new DefaultCellEditor(combo);
    TableColumn column = getColumnModel().getColumn(column_index);
    column.setCellRenderer(renderer);
    column.setCellEditor(combo_editor);     
} 
```

...

```
public class ComboTableCellRenderer implements ListCellRenderer, TableCellRenderer 
{
    DefaultListCellRenderer listRenderer = new DefaultListCellRenderer();
    DefaultTableCellRenderer tableRenderer = new DefaultTableCellRenderer();

    private void configureRenderer(JLabel renderer, Object value)
    {
        if (value != null)
            renderer.setText((String)value);
    }

    public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus)
    {
        listRenderer = (DefaultListCellRenderer)listRenderer.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
        configureRenderer(listRenderer, value);
        return listRenderer;
    }

    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)
    {
        tableRenderer = (DefaultTableCellRenderer)tableRenderer.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
        configureRenderer(tableRenderer, value);
        return tableRenderer;
    }

} 
```

我的问题是组合框始终是单元格的大小。我不要那个。是否有可能使组合框更大？组合框中的某些选项太大且半隐藏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:12:35.137

> 我的问题是组合框始终是单元格的大小。我不要那个。是否有可能使组合框更大？组合框中的某些选项太大且半隐藏。

*   没有`Dimmension`屏幕上的单元格跳跃是不可能的，不要混淆用户

*   为了避免可能的副作用，我会

*   创建未装饰的弹出窗口`JDialog`（用于可编辑`JComboBox`）`JWindow`，，放在那里`JComboBox`

*   添加`ListSelectionListener`（必须更改`ListSelectionMode`为`SINGL`E）

*   将内置的`KeyBinding`for `JTable`(`TableCellEditor`或`double_click`)更改`F2`为显示`JDialog`/`JWindow`必须在屏幕上以所需为中心`Point`，`setVisible`必须包裹在`invokeLater`

*   add `ItemListener`, test for `SELECTED`, on 选择将值存储到 ( `setValueAt()`) `XxxTableModel`，然后隐藏`JDialog`/`JWindow`

*   仅对整个实例使用一个`JDialog`（`removeAll`从内容窗格重用于从 的另一个操作），仅一个用于`GUI``JVM``JTable`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:10:00.433

覆盖[JTable.editCellAt](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/javax/swing/JTable.java#JTable.editCellAt%28int,int%29)。这是通过调用`setBounds`它来定位表格单元格编辑器的方法。只需以您喜欢的方式设置不同的边界，也许应该跨越几列。

# android - 如何在 Android 中保留 4.1 主题并删除 TitleBar？

> ID：14562631
> 
> 赞同：4
> 
> 时间：2013-01-28T13:00:54.320
> 
> 标签：android, android-4.2-jelly-bean, android-theme

当我在 Eclipse 中创建新的 Android 应用程序时，其`AndroidManifest.xml`主题设置为 application is `android:theme="@style/AppTheme"`& style.xml 如下。

```
 <resources>
       <style name="AppTheme" parent="android:Theme.Light" />
   </resources> 
```

&我的屏幕是这样的。 ![android:theme= 时的图像](../Images/1162be6c769422c9c7a20fa6ac7d8ccd.png)

我想从应用程序中删除 TitleBar，但想显示 Android 4.1 的主题。

为此，我尝试了

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Light.NoTitleBar" > 
```

现在我的屏幕看起来像这样，TitleBar 已删除，但主题已更改。

![android:theme= 时的图像](../Images/c4febf71e543bb74265a177538530101.png)

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T13:03:31.970

改用这个：`@android:style/Theme.Holo.NoActionBar`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:09:51.623

试着把它放在你的清单中。

> ```
> android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
> ```

# objective-c - 在可可中绑定搜索字段和表格视图

> ID：14562633
> 
> 赞同：6
> 
> 时间：2013-01-28T13:00:56.223
> 
> 标签：objective-c, cocoa, search, tableview

我有一个 nstableview。我想根据在 OSX 的搜索栏中输入的字符过滤结果。那么如何在 OSX 中而不是在 IOS 中绑定表视图和搜索字段？：） 谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T13:21:12.083

我有一个[项目](http://www.keepandshare.com/doc/5462248/arraycontrollersortsearch-zip-58k?da=y)，您可以下载并查看它是如何工作的。

步骤如下：

1.  拖动 NSArrayController，设置所有绑定。创建 NSSearchField。

2.  在绑定检查器中，搜索“绑定到 ArrayController”。

3.  将控制器键设置为“filterPredicate”。

4.  将谓词格式设置为“property1 包含 $value” 如果您希望单个搜索字段搜索多个值（例如 3），请使用 || 如：“property1 包含 $value || property2 包含 $value || property3 包含 $value”

另外，这个[StackOverFlow 问题](https://stackoverflow.com/questions/14253391/sort-the-contents-of-an-nsscrollview-nstableview-using-binding-in-arraycontrol)。

# linux - ffmpeg 附加时正确的音频流

> ID：14562634
> 
> 赞同：1
> 
> 时间：2013-01-28T13:00:58.577
> 
> 标签：linux, audio, ffmpeg

我使用以下例程将 2 个 mp4 文件附加在一起：

```
ffmpeg -y -i one.mp4 -vcodec copy -vbsf h264_mp4toannexb -acodec copy one.ts
ffmpeg -y -i two.mp4 -vcodec copy -vbsf h264_mp4toannexb -acodec copy two.ts

cat one.ts two.ts >> joined.ts

ffmpeg -y -i joined.ts -vcodec copy -acodec copy -absf aac_adtstoasc joined.mp4 
```

这很好用，但是当 one.mp4 没有音频流时（文件是使用 ffmpeg 从单个 jpeg 创建的，所以没有声音），例程会附加文件，但 two.mp4 的音频从视频的开头开始。我应该如何解决这个问题？我应该在我的附加例程中添加开关，以便 two.mp4 中的音频开始播放它应该在哪里播放，还是应该在 ffmpeg 命令中添加一些东西来从 jpg 创建视频？

这是我用来创建不包含声音的 one.mp4 的命令：

```
ffmpeg -y -loop 1 -i blah.jpg -t 3 -vcodec libx264 one.mp4 
```

# javascript - 如何使用正则表达式从字符串中获取想要的部分

> ID：14562636
> 
> 赞同：0
> 
> 时间：2013-01-28T13:01:00.513
> 
> 标签：javascript, regex, string

我有一个像@'test'这样的字符串，我必须只得到没有@''的测试词

如何在 javascript 中将它们与正则表达式匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:03:15.887

试试下面的正则表达式：

```
@\'([^']*)\' 
```

得到`group(1)`

如果您的语言支持后视（例如 python、perl、java...）：

```
(?<=@\')[^']* 
```

应该在没有分组的情况下工作。

哦，刚刚看到你编辑你的问题，据我所知，js不支持look-behind，那么你可以选择1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:42:37.420

```
var firsName= "@'test'" 
```

var objName = firsName .replace('@', "'"); lastName=objName.replace(/[']/g,'');

我就这样修好了。我不知道这是不是最好的方法。谢谢你的帮助

# android - alert.dialog 中的 Spinner 崩溃

> ID：14562638
> 
> 赞同：0
> 
> 时间：2013-01-28T13:01:17.563
> 
> 标签：android, android-spinner, android-alertdialog

我有一个警报对话框，其中有一个微调器：

```
LayoutInflater inf = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View layout = inf.inflate(R.layout.change_bike_state, null);

AlertDialog.Builder changeState = new AlertDialog.Builder(activity);

changeState.setTitle(bikeName + " " + stateName);
changeState.setView(layout);

String state_data[] = new String[3];

state_data[0]="Alquilada";
state_data[1]="No alquilada";
state_data[2]="Mantenimiento";

Spinner states = (Spinner) layout.findViewById(R.id.bike_states);

ArrayAdapter adapter = new ArrayAdapter(activity,android.R.layout.simple_spinner_item, state_data);

states.setAdapter(adapter);

   //positive and negative button

    changeState.show(); 
```

change_bike_state.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<Spinner
    android:id="@+id/bike_states"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />
</LinearLayout> 
```

显示了微调器， ![在此处输入图像描述](../Images/1d85909c16726ee83eac5fe288b64cd7.png)

但点击时崩溃。

```
01-28 12:42:43.114: E/AndroidRuntime(417): FATAL EXCEPTION: main
01-28 12:42:43.114: E/AndroidRuntime(417): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
01-28 12:42:43.114: E/AndroidRuntime(417):  at android.view.ViewRoot.setView(ViewRoot.java:509)
01-28 12:42:43.114: E/AndroidRuntime(417):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
01-28 12:42:43.114: E/AndroidRuntime(417):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
01-28 12:42:43.114: E/AndroidRuntime(417):  at android.app.Dialog.show(Dialog.java:241)
01-28 12:42:43.114: E/AndroidRuntime(417):  at android.app.AlertDialog$Builder.show(AlertDialog.java:802)
01-28 12:42:43.114: E/AndroidRuntime(417):  at android.widget.Spinner.performClick(Spinner.java:257)
01-28 12:42:43.114: E/AndroidRuntime(417):  at android.view.View$PerformClick.run(View.java:8816)
01-28 12:42:43.114: E/AndroidRuntime(417):  at android.os.Handler.handleCallback(Handler.java:587)
01-28 12:42:43.114: E/AndroidRuntime(417):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-28 12:42:43.114: E/AndroidRuntime(417):  at android.os.Looper.loop(Looper.java:123)
01-28 12:42:43.114: E/AndroidRuntime(417):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-28 12:42:43.114: E/AndroidRuntime(417):  at java.lang.reflect.Method.invokeNative(Native Method)
01-28 12:42:43.114: E/AndroidRuntime(417):  at java.lang.reflect.Method.invoke(Method.java:521)
01-28 12:42:43.114: E/AndroidRuntime(417):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-28 12:42:43.114: E/AndroidRuntime(417):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-28 12:42:43.114: E/AndroidRuntime(417):  at dalvik.system.NativeStart.main(Native Method) 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:08:00.707

`Alertdialog`在你的not中传递活动上下文`activity`。您的对话框无法找到它应该在哪个活动上下文中显示。所以尝试如下：

> ```
>  LayoutInflater inf = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
>             View layout = inf.inflate(R.layout.view_map, null);
>             AlertDialog.Builder changeState = new AlertDialog.Builder(
>                     context);
>             changeState.setTitle("bikeName" + " " + "stateName");
>                changeState.setView(layout);
>             String state_data[] = new String[3];
>             state_data[0] = "Alquilada";
>             state_data[1] = "No alquilada";
>             state_data[2] = "Mantenimiento";
>             Spinner states = (Spinner) layout
>                     .findViewById(R.id.bike_states);
>             ArrayAdapter adapter = new ArrayAdapter(context,
>                     android.R.layout.simple_spinner_item, state_data);
>             states.setAdapter(adapter);
>             // positive and negative button
>             changeState.show(); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:05:06.860

```
View layout = inf.inflate(R.layout.change_bike_state, (ViewGroup)getCurrentFocus()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:20:05.097

尝试这个，

```
 LayoutInflater inf = (LayoutInflater)  context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
 View layout = inf.inflate(R.layout.change_bike_state, null);

 AlertDialog.Builder changeState = new AlertDialog.Builder(YourActivity.this);

 changeState.setTitle(bikeName + " " + stateName);
 changeState.setView(layout);

 String state_data[] = new String[3];

  state_data[0]="Alquilada";
 state_data[1]="No alquilada";
 state_data[2]="Mantenimiento";

Spinner states = (Spinner) layout.findViewById(R.id.bike_states);

ArrayAdapter adapter = new ArrayAdapter(activity,android.R.layout.simple_spinner_item,     state_data);

 states.setAdapter(adapter);

   //positive and negative button

 AlertDialog alert = changeState.create();

  alert.show(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T13:27:40.637

用这种方式充气`AlertDialog's Layout`

```
 View layout = inf.inflate(R.layout.change_bike_state, null, true); 
```

代替

```
 View layout = inf.inflate(R.layout.change_bike_state, null); 
```

# mysql - spork/guard 重载模式

> ID：14562639
> 
> 赞同：1
> 
> 时间：2013-01-28T13:01:18.063
> 
> 标签：mysql, ruby-on-rails, rspec, guard, spork

我使用 spork 和 guard 来加速我的 Rails 3.2 应用程序中的测试套件。然而，在添加新迁移后，guard 中的测试表现得很奇怪：即使我之前运行`rake db:migrate`过，它们也表现得不知道模式的变化。当我停止守卫并跑步时，它们开始表现正常`rake spec`。我想它的行为方式是这样的，因为 spork/guard 在测试之前不会更新架构。是否可以配置 spork 以更新模式`#prefork`并保护以在模式更改时重新加载 spork？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:16:31.017

您需要运行`rake db:test:prepare`以应用迁移以用于测试环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T04:15:04.520

理论上，以下默认 Spork 设置代码应在每次运行测试时重新加载架构。你有吗？

```
 ActiveRecord::Schema.verbose = false
  silence_stream STDOUT do
    load Rails.root.join('db', 'schema.rb') # use db agnostic schema by default
    load Rails.root.join('db', 'seeds.rb')
  end 
```

# magento-1.7 - 免费扩展编辑主页

> ID：14562641
> 
> 赞同：-2
> 
> 时间：2013-01-28T13:01:33.107
> 
> 标签：magento-1.7, magento

我正在研究 magento，我的客户希望我编辑主页。我不擅长编码，所以我正在寻找一些扩展来编辑主页。我尝试了很多方法，但没有得到扩展。请向我推荐一些免费的 magento 扩展来编辑主页，例如将列从一个地方移到另一个地方。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:19:12.593

登录您的 Magento 管理员。转到`CMS -> Pages -> Home page`并在内容部分编辑它。

您不会在 Magento 中获得所有内容的扩展。

# collision-detection - 使用 OpenCascade，如何快速对 2 个形状进行碰撞检测？

> ID：14562652
> 
> 赞同：3
> 
> 时间：2013-01-28T13:02:03.857
> 
> 标签：collision-detection, computational-geometry, opencascade

使用 OpenCascade，如何对 2 个形状进行碰撞检测？可能有几种方法。一是计算它们的交集，并检查交集结果。另一种方法是计算它们的最小距离。哪种方式更快？或者有什么更快的方法？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T15:53:17.223

在 brep 数据结构上计算最小距离是一项相当昂贵的操作。OCC 确实提供了用于碰撞检测的商业选项 [1]。您的其他选择可能是使用 ODE 或 Bullit 在表示 BRep 的网格上执行碰撞检测。这就是我们在 PythonOCC 项目中采用的方法，参见 [2]

[1] [http://www.opencascade.org/support/products/coldet/](http://www.opencascade.org/support/products/coldet/)

[2] [http://www.pythonocc.org/resources/dyn/cad-and-rigid-body-simulation/](http://www.pythonocc.org/resources/dyn/cad-and-rigid-body-simulation/)

编辑：最近，我为我正在开发的离线机器人软件集成了优秀的 FCL 库 [3]。它的伟大之处在于它可以很好地处理退化网格，并且您可以非常快速地计算执行网格到网格的距离（使用 ODE 不可能）。python ( cython ) 绑定是一项正在进行的工作 [4] 但稳定且 python 开销几乎不明显，我可以推荐这种方法。

[3] [https://github.com/flexible-collision-library/fcl](https://github.com/flexible-collision-library/fcl)

[4] [https://github.com/neka-nat/python-fcl](https://github.com/neka-nat/python-fcl)

# javascript - 如何在成功期间转移控制：jquery to html form

> ID：14562653
> 
> 赞同：0
> 
> 时间：2013-01-28T13:02:07.133
> 
> 标签：javascript, jquery, html

我正在使用以下 jquery 语句来验证用户详细信息。

```
 $.ajax({
        type: "POST",
        url: "Login",
        data:'uname='+encodeURIComponent(uname)+'&'+'pass='+encodeURIComponent(pass),
        dataType: "json",

        //if received a response from the server
        success: function( data, textStatus, jqXHR) {
             if(data==true)
             {
                 $("#error").show(1500).css({visibility: "visible"});
                  $("#error").append("<b>success!</b>");
              } 
```

但我需要在成功期间将控制权转移到其他 html 页面。

```
$("#error").show(1500).css({visibility: "visible"});
$("#error").append("<b>success!</b>"); 
```

我正在尝试更改上述语句以转移控制权。请任何人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:18:57.060

在您成功登录的条件下使用：

```
window.location ='index1.html'; 
/* or whatever url you want and make sure path is correct relative to page or use absolute url */ 
```

这告诉浏览器使用 javascript 打开该 url

# iframe - 自动下载包含 phps 文件的 iframe

> ID：14562654
> 
> 赞同：0
> 
> 时间：2013-01-28T13:02:08.500
> 
> 标签：iframe, download

我真的不明白这一点，我创建了几个包含 iframe 和 phps 文件的教程（代码示例）。在我的本地主机服务器上，它们显示得很好，现在我已经将它上传到我的网络主机，当我打开教程时它开始下载 iframe 源。

这可能是什么原因？

# php - 如何明智地从数据库类别中获取最新记录？

> ID：14562658
> 
> 赞同：-2
> 
> 时间：2013-01-28T13:02:16.760
> 
> 标签：php, mysql

我有一张名为 images 的表

这里是 ：

```
+------------------+---------------+----------------------+
| iid |  category  |   imagename   |       uploaddate     |
+------------------+---------------+----------------------+
|  1  |    cat1    |    123.png    | 2013-01-01 01:01:01  |
|  2  |    cat2    |    456.png    | 2013-01-01 01:01:02  |
|  3  |    cat2    |    789.png    | 2013-01-01 01:01:03  |
|  4  |    cat3    |    001.png    | 2013-01-01 01:01:04  |
|  5  |    cat3    |    002.png    | 2013-01-01 01:01:05  |
|  6  |    cat3    |    002.png    | 2013-01-01 01:01:06  |
|  7  |    cat4    |    004.png    | 2013-01-01 01:01:07  |
|  8  |    cat4    |    005.png    | 2013-01-01 01:01:08  |
|  9  |    cat4    |    006.png    | 2013-01-01 01:01:09  |
|  10 |    cat4    |    007.png    | 2013-01-01 01:01:10  |
+------------------+---------------+----------------------+ 
```

现在我想明智地检索图像类别。这意味着一次从每个类别中获取图像，并按上传日期降序排列。

请不要建议：`SELECT * FROM images GROUP BY category ORDER BY uploaddate DESC` 因为我使用分页来显示图像，并且每个页面都包含来自不同类别的不同图像。

我解决了这个问题，但还有其他方法可以解决它......这是我的解决方案：

=> 查找所有不同的类别并将其保存在数组中。

=> 迭代 for 循环并从该特定类别中获取图像。

```
for($i=0;$i<count($distinctcat);$i++)
    {
        $qry = "SELECT * FROM images WHERE category = '".$distinctcat."'";
        // fetch that data then save it in to array
    } 
```

=> 按日期排列图像。

=> 根据我们的分页限制和页码使用 array_slice 函数切割数组

任何人都可以建议我更好的解决方案或单个查询来处理所有这些事情......

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:04:52.920

以下查询将获取每个类别的所有最新图像，

```
SELECT  a.*
FROM    images a
        INNER JOIN
        (
            SELECT  category, MAX(uploaddate) max_date
            FROM    images
            GROUP   BY category
        ) b ON a.category = b.category AND
                a.uploadDate = b.max_date 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/803e1/1)

但如果你`category`只想要特定的，你可以使用`ORDER BY`和`LIMIT`

```
SELECT  a.*
FROM    images a
WHERE   category = 'categoryName'
ORDER   BY uploadDate DESC
LIMIT   1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/803e1/3)

# iphone - 使用 OAuth 在 iphone 中集成 Twitter

> ID：14562661
> 
> 赞同：-3
> 
> 时间：2013-01-28T13:02:23.763
> 
> 标签：iphone, objective-c, api, twitter, oauth

在我的 iPhone 应用程序中，我有一个选项可以在我的朋友列表中导入 twitter 关注者。（在我的应用程序中显示的朋友列表）据我所知，我需要遵循以下步骤。1\. 在我的应用程序中集成 Twitter OAuth 并获取 access_token。2.find API 用于从 twitter 开发者网站获取关注者列表。如果有人有好的方法，请指导我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:11:26.983

您可以使用（在 iOS 5 及更高版本上）Accounts + Twitter 框架，让您更轻松地访问 Twitter。这样，您无需手动处理 OAuth 协议。您还可以利用用户可能已经在操作系统级别设置其 Twitter 帐户这一事实，这意味着您不需要他们再次登录。请参阅下面的链接，了解如何使用这些。

关于关注者列表的第二个问题，您可以使用以下 API 资源获取关注者列表：[https ://dev.twitter.com/docs/api/1.1/get/followers/list](https://dev.twitter.com/docs/api/1.1/get/followers/list)

将该 API 与 Twitter 框架一起使用应该会得到您所追求的结果/

**来源**

帐户框架参考：http: [//developer.apple.com/library/ios/#documentation/Accounts/Reference/AccountsFrameworkRef/_index.html#//apple_ref/doc/uid/TP40011024](http://developer.apple.com/library/ios/#documentation/Accounts/Reference/AccountsFrameworkRef/_index.html#//apple_ref/doc/uid/TP40011024)

Twitter 框架参考：http: [//developer.apple.com/library/ios/#documentation/Twitter/Reference/TwitterFrameworkReference/_index.html#//apple_ref/doc/uid/TP40011014](http://developer.apple.com/library/ios/#documentation/Twitter/Reference/TwitterFrameworkReference/_index.html#//apple_ref/doc/uid/TP40011014)

有关如何使用这些框架的示例代码：http: [//developer.apple.com/library/ios/#samplecode/Tweeting/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011191](http://developer.apple.com/library/ios/#samplecode/Tweeting/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011191)

# backbone.js - 模型属性未由主干中的 Collection.fetch() 设置

> ID：14562667
> 
> 赞同：1
> 
> 时间：2013-01-28T13:02:38.187
> 
> 标签：backbone.js

我有这个代码：

```
app.Collections.quotes = new app.Collections.Quotes();
    app.Collections.quotes.fetch({
        success: function(){
            console.log(app.Collections.quotes.at(0).get("NetAmount"));
        }
    }); 
```

Console.log 返回“未定义”。

然而，我可以看到服务器返回的响应是一个对象数组，而 Backbone 确实创建了 27 个模型，但它们都没有任何属性！

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:14:30.737

根据问题评论，看起来您可能已经覆盖了`Model.parse`. 如果这样做，则需要返回要设置为模型属性的属性哈希：

```
parse: function(response) {
  //do something with response
  return response;
} 
```

# ios - 尝试在 MKMapView 中加载创建的地图

> ID：14562669
> 
> 赞同：-3
> 
> 时间：2013-01-28T13:02:55.013
> 
> 标签：ios, google-maps, mkmapview, mapkit

我正在尝试加载我在 Google-Maps 中使用 kml 文件创建的地图。[谷歌地图链接。](https://maps.google.de/maps/ms?msid=216922877238935477022.0004d406a819496582bb2&msa=0)我不得不说这只是一个例子，但它是相同的原理。

最简单的方法是加载 WebView，但这在我看来很难看。

感谢您阅读我的问题！

最好的问候 CTS

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T14:39:26.997

将 a 加载`KML`到 a 中`MKMapView`：

1.  [将必要的框架](http://developer.apple.com/library/ios/#recipes/xcode_help-project_editor/Articles/AddingaLibrarytoaTarget.html)（`MapKit.framework`和`CoreLocation.framework`）添加到您的目标；

2.  加载和解析 KML；

3.  在 KML 的基础上创建您的注释；和

4.  设置您的地图`region`以包含注释。

因此，这可能看起来像：

```
#import <MapKit/MapKit.h>

- (void)loadKml:(NSURL *)url
{
    // parse the kml

    Parser *parser = [[Parser alloc] initWithContentsOfURL:url];
    parser.rowElementName = @"Placemark";
    parser.elementNames = @[@"name", @"Snippet", @"coordinates", @"description"];
    parser.attributeNames = nil;
    [parser parse];

    // add annotations for each of the entries

    for (NSDictionary *locationDetails in parser.items)
    {
        MKPointAnnotation *annotation = [[MKPointAnnotation alloc] init];
        annotation.title = locationDetails[@"name"];
        annotation.subtitle = locationDetails[@"Snippet"];
        NSArray *coordinates = [locationDetails[@"coordinates"] componentsSeparatedByString:@","];
        annotation.coordinate = CLLocationCoordinate2DMake([coordinates[1] floatValue], [coordinates[0] floatValue]);
        [self.mapView addAnnotation:annotation];
    }

    // update the map to focus on the region that encompasses all of your annotations

    MKCoordinateRegion region;
    if ([self.mapView.annotations count] > 1)
    {
        region = [self regionForAnnotations:self.mapView.annotations];
        region = MKCoordinateRegionMake(region.center, MKCoordinateSpanMake(region.span.latitudeDelta * 1.05, region.span.longitudeDelta * 1.05));  // expand the region by 5%
    }
    else
    {
        id<MKAnnotation> annotation = self.mapView.annotations[0];
        region = MKCoordinateRegionMakeWithDistance(annotation.coordinate, 100.0, 100.0);
    }
    [self.mapView setRegion:region animated:YES];
} 
```

我`Parser`的类只是`NSXMLParser`我编写的一个子类，它将创建一个数组，`items`每次出现一个`rowElementName`，并且对于每一行，它将获取`elementNames`数组中列出的元素。

解析器.h：

```
#import <Foundation/Foundation.h>

@interface Parser : NSXMLParser

@property (nonatomic, strong) NSString *rowElementName; // this is the element name that identifies a new row of data in the XML
@property (nonatomic, strong) NSArray *attributeNames;  // this is the array of attributes we might want to retrieve for that element name
@property (nonatomic, strong) NSArray *elementNames;    // this is the list of sub element names for which we're retrieving values

@property (nonatomic, strong) NSMutableArray *items;    // after parsing, this is the array of parsed items

@end 
```

解析器.m：

```
#import "Parser.h"

@interface Parser () <NSXMLParserDelegate>

@property (nonatomic, strong) NSMutableDictionary *item;     // while parsing, this is the item currently being parsed
@property (nonatomic, strong) NSMutableString *elementValue; // this is the element within that item being parsed

@end

@implementation Parser

- (id)initWithContentsOfURL:(NSURL *)url
{
    self = [super initWithContentsOfURL:url];

    if (self)
    {
        self.delegate = self;
    }

    return self;
}

- (id)initWithData:(NSData *)data
{
    self = [super initWithData:data];

    if (self)
    {
        self.delegate = self;
    }

    return self;
}

- (id)initWithStream:(NSInputStream *)stream
{
    self = [super initWithStream:stream];

    if (self)
    {
        self.delegate = self;
    }

    return self;
}

#pragma mark - NSXMLParserDelegate methods

- (void)parserDidStartDocument:(NSXMLParser *)parser
{
    self.items = [[NSMutableArray alloc] init];

    if (!self.rowElementName)
        NSLog(@"%s Warning: Failed to specify row identifier element name", __FUNCTION__);
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict
{
    if ([elementName isEqualToString:self.rowElementName])
    {
        self.item  = [[NSMutableDictionary alloc] init];

        for (NSString *attributeName in self.attributeNames)
        {
            id attributeValue = [attributeDict valueForKey:attributeName];
            if (attributeValue)
                [self.item setObject:attributeValue forKey:attributeName];
        }
    }
    else if ([self.elementNames containsObject:elementName])
    {
        self.elementValue = [[NSMutableString alloc] init];
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if (self.elementValue)
    {
        [self.elementValue appendString:string];
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if ([elementName isEqualToString:self.rowElementName])
    {
        [self.items addObject:self.item];
        self.item = nil;
    }
    else if ([self.elementNames containsObject:elementName])
    {
        [self.item setValue:self.elementValue forKey:elementName];
        self.elementValue = nil;
    }
}

@end 
```

最后，我`loadKml`使用的唯一其他实用方法是`regionForAnnotations`，它基于一系列注释定义了一个区域。[Rob Mooney 写了一个简单的例程](https://gist.github.com/923301)来做到这一点：

```
- (MKCoordinateRegion)regionForAnnotations:(NSArray *)annotations {

    CLLocationDegrees minLat = 90.0;
    CLLocationDegrees maxLat = -90.0;
    CLLocationDegrees minLon = 180.0;
    CLLocationDegrees maxLon = -180.0;

    for (id <MKAnnotation> annotation in annotations) {
        if (annotation.coordinate.latitude < minLat) {
            minLat = annotation.coordinate.latitude;
        }
        if (annotation.coordinate.longitude < minLon) {
            minLon = annotation.coordinate.longitude;
        }
        if (annotation.coordinate.latitude > maxLat) {
            maxLat = annotation.coordinate.latitude;
        }
        if (annotation.coordinate.longitude > maxLon) {
            maxLon = annotation.coordinate.longitude;
        }
    }

    MKCoordinateSpan span = MKCoordinateSpanMake(maxLat - minLat, maxLon - minLon);

    CLLocationCoordinate2D center = CLLocationCoordinate2DMake((maxLat - span.latitudeDelta / 2), maxLon - span.longitudeDelta / 2);

    return MKCoordinateRegionMake(center, span);
} 
```

# broadcastreceiver - 如何从广播接收器打开通话记录

> ID：14562671
> 
> 赞同：0
> 
> 时间：2013-01-28T13:02:57.767
> 
> 标签：broadcastreceiver, calllog

如何从广播接收器打开通话记录

```
am using a broadcast receiver to monitor call is coming from which number...

and for that i need to open calllog to show to the user

how to open call log from broadcastreceiver? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:10:29.783

在 stackoverflow.com 中长时间搜索后

现在我可以使用广播接收器打开通话记录

```
Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("content://call_log/calls"));
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(i); 
```

# javascript - Angularjs - 使用指令来实例化其他指令？

> ID：14562679
> 
> 赞同：11
> 
> 时间：2013-01-28T13:03:21.403
> 
> 标签：javascript, angularjs

所以让我们在我的 HTML 中说我有这样的东西：

```
<tabcontent></tabcontent> 
```

然后这个指令的javascript是这样的：

```
tabsApp.directive('tabcontent', function(){

  var myObj = {
    priority:0,
    template:'<div></div>',
    replace: true,
    controller: 'TabCtrl',
    transclude: false,
    restrict: 'E',
    scope: false,
    compile: function (element, attrs){
      return function (parentScope, instanceEle){
        parentScope.$watch('type', function(val) {
          element.html('<div '+val+'></div>');
        });
      }
      $compile(parentScope);
    },
    link: function postLink(scope, iElement, iAttrs){}
  };
  return myObj;

}); 
```

HTML 被正确解析，并且 type 的值在控制器 JS 中找到。

```
so <tabcontent></tabcontent> is replaced with <div recipe></div> for example.. 
```

（那部分确实发生了）

所以我也有一个配方指令：

```
tabsApp.directive('recipe', function(){

  var myObj = {
    priority:0,
    template:'<div>TESTING</div>',
    replace: true,
    controller: 'TabCtrl',
    transclude: false,
    restrict: 'E',
    scope: false,
    compile: function (element, attrs){
      return {
        pre: function preLink(scope, iElement, iAttrs, controller){},
        post: function postLink(scope, iElement, iAttrs, controller){}
      }
    },
    link: function postLink(scope, iElement, iAttrs){}
  };
  return myObj;

}); 
```

这显然非常简单，仅用于测试。但是配方指令没有被处理......

这里发生了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-28T14:28:06.167

你需要改变两件事：

1.  该`recipe`指令不得仅限于**E**（元素）。如果要生成类似的指令`<div recipe></div>`，则必须至少将**A**（属性）添加到`restrict`指令配置的属性中：

    ```
    app.directive('recipe', function() {
       return {
          restrict: 'E',
          ... 
    ```

2.  您需要`tabcontent`在“watch”之后编译指令的 HTML 内容：

    ```
    app.directive('tabcontent', function($compile){
       return {    
       ...    
       link: function (scope, iElement, iAttrs) {
                scope.$watch('type', function(val) {
                   iElement.html('<div '+val+'></div>');           
                   $compile(iElement.contents())(scope);         
                 });
             }
       ... 
    ```

**jsFiddle**：http: [//jsfiddle.net/bmleite/n2BXp/](http://jsfiddle.net/bmleite/n2BXp/)

# joomla - Twitter Bootstrap 导航栏仅在登录时切换一次

> ID：14562680
> 
> 赞同：2
> 
> 时间：2013-01-28T13:03:29.850
> 
> 标签：joomla, twitter-bootstrap

我正在为客户建立一个 Joomla 网站（不幸的是）。我已经安装了一个使用 Bootstrap 作为其基础的模板，并与 Joomla 进行了一些集成，称为 H5BPTB。我遇到的问题是，当我在小屏幕上访问主页并切换响应式导航栏时，它工作正常，但是登录后，导航栏将打开一次，然后关闭，但除非我刷新，否则不再响应这页纸。

我在 stackoverflow 的其他地方阅读了一些参考资料，认为这是`.collapse`Bootstrap CSS 类中缺少 CSS 转换的问题。我检查了，他们没有丢失。我还阅读了另一个答案，该答案表明`support.transition`Bootstrap JS 中的其他一些 Javascript 覆盖存在问题。我也无法在任何其他 JS 文件中找到对它的引用。这还有什么可能吗？

另外我应该补充一点，导航栏在 IE 中运行良好，但在 Firefox 或 Chrome 中却不行。

这是网站：[http ://avantgardeinternational.eu](http://avantgardeinternational.eu)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T14:23:07.920

我建议您尝试更新主题中的引导文件。它们都在 2.1.1 版本上，据我所见，有些人在早期的 Bootstrap 版本中遇到了类似的问题。

您要更改的文件是：

[http://avantgardeinternational.eu/templates/h5bptb/css/bootstrap.min.css](http://avantgardeinternational.eu/templates/h5bptb/css/bootstrap.min.css) [http://avantgardeinternational.eu/templates/h5bptb/css/bootstrap-responsive.min.css](http://avantgardeinternational.eu/templates/h5bptb/css/bootstrap-responsive.min.css) [http://avantgardeinternational.eu/templates/ h5bptb/js/libs/bootstrap/bootstrap.min.js](http://avantgardeinternational.eu/templates/h5bptb/js/libs/bootstrap/bootstrap.min.js)

如果这不起作用，我会尝试环顾四周并确保某些脚本没有冲突，这可能意味着禁用除 Bootstrap JS 之外的所有脚本。然后看看它是否工作正常。

[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

**编辑**：刚刚尝试过，稍微改变了样式的CSS，但它仍然不起作用。我认为它没有正确地将 JS 加载到页面中，我现在会尝试...

**编辑2**：所以在试了一下之后，我得出的结论是现在只有一个解释......我观察到您登录和注销时页面之间的区别。当您登录时，页面中会加载各种其他 JS 位。

其中之一必须是覆盖 Bootstrap 崩溃方法，从而阻止它工作。登录时会加载一些额外的脚本以及更多样式。它可能正在尝试删除这些然后再试一次。

# jquery - jQuery mobile：特定于页面的 javascript、标签页面

> ID：14562681
> 
> 赞同：2
> 
> 时间：2013-01-28T13:03:29.427
> 
> 标签：jquery, jquery-mobile, event-handling

我正在使用标签创建一个包含多个页面的 JQM 站点。例如 index.html#a 在其中一个页面上我需要初始化一个地图，比如 index.html#map。但是我突然想到，无论我将地图初始化脚本放在哪里，当 index.html 第一次加载时，脚本仍然会执行，我想避免这种情况。

虽然我可能会将地图脚本与一些按钮相关联，但我也希望能够在有人直接加载 index.html#map 时加载地图。

所以归结为如何将 JavaScript 与子页面（带有标签的页面）相关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:14:32.660

我希望所有这些页面都是单个 HTML 文件的一部分。如果我是正确的，你不需要使用这个语法：

```
index.html#map 
```

这个就足够了：

```
#map 
```

假设这是您的 HTML：

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
            <a href="#second" class="ui-btn-right">Next</a>
        </div>

        <div data-role="content">

        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div> 
    <div data-role="page" id="second">
        <div data-theme="a" data-role="header">
            <h3>
                Second Page
            </h3>
            <a href="#index" class="ui-btn-left">Back</a>
        </div>

        <div data-role="content">

        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>    
</body>
</html> 
```

然后将 javascript 关联到某个页面，请使用以下语法：

```
$(document).on('pagebeforeshow', '#index', function(){       
    alert('Index page');
});

$(document).on('pagebeforeshow', '#second', function(){       
    alert('Second page');
}); 
```

这是一个有效的 jsFiddle**[示例](http://jsfiddle.net/Gajotres/yWTG2/)**。

也可以看看我的个人博客**[ARTICLE](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**，它将帮助你处理 jQuery Mobile 页面事件。或者看看我的另一个[**答案**](https://stackoverflow.com/questions/14468659/jquery-mobile-document-ready-vs-page-events/14469041#14469041)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:16:27.233

使用回调参数：

```
$(document).ready(function(){
var s = document.createElement("script");
s.type = "text/javascript";
s.src  = "http://maps.google.com/maps/api/js?v=3&sensor=true&callback=gmap_draw";
window.gmap_draw = function(){
   alert ("Callback code here");
};
$("head").append(s);  
}); 
```

确保回调是全局的。你可以在这里找到对应的线程：[lazy load google maps api v3 jQuery callback](https://stackoverflow.com/questions/4102579/lazy-load-google-maps-api-v3-jquery-callback)

# dynamics-crm-2011 - ms crm 2011 报价开始使用 javascript 重新计算

> ID：14562682
> 
> 赞同：0
> 
> 时间：2013-01-28T13:03:30.300
> 
> 标签：dynamics-crm-2011

我已经复制了一个包含所有引用细节的报价。是否可以使用 javascript 启动重新计算过程？我怎样才能做到这一点？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:06:03.147

您需要刷新窗口以获取更新的报价总额：

`window.location.reload(true)`

# python - WHERE 子句中的 MySQL 和 SQLAlchemy 整数转移

> ID：14562690
> 
> 赞同：1
> 
> 时间：2013-01-28T13:04:07.760
> 
> 标签：python, mysql, sqlalchemy

我有一个表，其中包含一个名为`region_code`with`Integer`作为其数据类型的列。在我的 Python 程序中，我有这一行：

```
region = session.query(Region).filter(Region.region_code/100 == region_prefix).one() 
```

这里的重要部分是选择的**过滤**方法

```
Region.region_code/100 == region_prefix 
```

其中 region_code 是表中的整数列， region_prefix 变量保存一个整数值

是表`region_code`中的整数列，其中包含类似的值，`1199, 1200, 1300, 1499`而 region_prefix 变量（来自程序）包含类似的整数值`11, 12, 13, 14`。

我现在想要使用此过滤器选项实现的是对`region_code`（因此将所有内容削减到小数位后）执行整数除法，以便能够将其与`region_prefix`.

**例子：**

```
region_prefix = 11 
```

假设 Region 表中存在一个条目

```
region_code = 1199 
```

过滤器内的计算应如下所示

```
1199 / 100 = 11 
```

所以有了这个结果，我可以过滤`region_prefix (11=11)`. **这适用于 MSSQL (Microsoft)。**

不幸的是（就我而言）**MySQL**除法运算符`/`不进行整数除法。所以结果`1199/100`将是`11.99`，所以我的查询不会在数据库中找到合适的条目（因为 11.99 ！= 11）。然而 MySQL 实际上已经实现了除法：**DIV**操作符。

所以下面的 SQL 查询对我来说很好用：

```
SELECT * FROM Region where region_code DIV 100 = 11; 
```

**所以我的问题是：** *如何`filter`使用 SQLAlchemy 方法`DIV`而不是`/`运算符？这可能吗？还是使用本机查询的唯一解决方法？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:20:40.753

幸运的是 SQLAlchemy 允许自定义操作符。有一些简单的方法可以做到这一点（只需在查询中指定）或更复杂的版本（完全定义新运算符并使其具有多数据库意识）。所以这取决于你在寻找什么。

[http://docs.sqlalchemy.org/en/latest/core/custom_types.html?highlight=operators#redefining-and-creating-new-operators](http://docs.sqlalchemy.org/en/latest/core/custom_types.html?highlight=operators#redefining-and-creating-new-operators)

```
region = (session
    .query(Region)
    .filter(Region.region_code.op('div')(region_prefix))
    .one()
) 
```

和花哨的方式：

[http://docs.sqlalchemy.org/en/rel_0_8/core/types.html#types-operators](http://docs.sqlalchemy.org/en/rel_0_8/core/types.html#types-operators)

```
from sqlalchemy import Integer

class DivisibleInteger(Integer):
    class comparator_factory(Integer.Comparator):
        def div(self, other):
            return self.op('div')(other) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:20:06.407

为什么不在你的 python 脚本中单独执行除法运算，将结果保存到变量中，然后在查询中传递变量而不是运算？

# github - 适用于 2 位开发人员的 Git 分支和合并步骤

> ID：14562708
> 
> 赞同：0
> 
> 时间：2013-01-28T13:05:30.803
> 
> 标签：github, branching-and-merging

这是我第一次使用 Git Hub。所以请与我合作。

我正在与另一位开发人员一起开发 iOS 项目。现在，由于我们正在开发 2 个不同的功能，我认为为每个开发人员创建单独的分支是个好方法。所以我计划按照以下步骤进行

1.  `functionality1`使用从当前分支命名的本地分支

    ```
    git checkout -b functionality1 
    ```

2.  `functionality1`在分支中提交我的代码

3.  使用将该分支推送到远程

    ```
    git push origin functionality1 
    ```

    这会将我的分支添加到远程服务器。我需要远程分支，因为我可以在任何地方工作。

4.  我将使用它在主分支中合并它

    ```
    git checkout master
    git merge functionality1 
    ```

5.  现在`functionality1`合并到`master`分支中（前提是没有发生冲突）

其他开发人员将遵循相同的步骤。
我们还不想删除分支。

Now once both branches are merged into `master`, how can each developer will get the merged code from `master` branch into their respective branches (`functionality1` & `functionality2`) & then continue on working on same branch (`functionality1` & `functionality2`)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:09:35.833

IMHO you shouldn't unless you *really* need the new functionality. Because by merging e.g. `master` back into `functionality1` you make it dependend upon the other feature branch. A good read is the [`gitworkflows(7)`](http://git-scm.com/docs/gitworkflows) man-page.

# asp.net - WebControl.CssClass 与 WebControl.Attributes["class"]

> ID：14562709
> 
> 赞同：0
> 
> 时间：2013-01-28T13:05:33.403
> 
> 标签：asp.net, css, web-controls

在 web 控件上设置 css 类的两种方法有什么区别？它们是如何同步的？如果我将类添加到`CssClass`and `Attributes["class"]`，它将如何呈现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:08:16.690

它们都将被渲染为相同的。

作为`class="myClass"`html 中的一个。

如果设置了属性`CssClass`，将优先并覆盖`Attributes["class"]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T18:38:34.113

但请记住：如果您想检查您的 WebControl 是否分配了“myClass”，您必须查看 CssClass 和 AttributeCollection。（并且您必须检查包含，因为字符串中可以有更多的 CssClasses。）

# kendo-ui - kendo 可观察数组排序

> ID：14562716
> 
> 赞同：3
> 
> 时间：2013-01-28T13:05:48.380
> 
> 标签：kendo-ui

我在视图模型中有一个可观察的数组。我用模板显示数组的日期：

```
<table align="center">   
  <thead>
    <tr>
      <th>Name</th>
      <th>Surname</th>
   </tr>
  </thead>
  <tbody data-template="row-template" data-bind="source: client"></tbody> 
</table> 
```

但是如果我想对数组进行排序？并按姓名或姓氏显示“客户”订单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:54:09.640

如果您的数据数组是这样的（作为 json，如果不转换为 json 或使用服务器进行数据绑定）

```
[{name:'name1',surname:'surname1'},{name:'name2',surname:'surname2'},{name:'name3',surname:'surname3'}] 
```

您可以使用此代码进行客户端排序。

```
$("table").kendoGrid({
  dataSource: {
     data:[{name:'name1',surname:'surname1'},{name:'name2',surname:'surname2'},{name:'name3',surname:'surname3'}],
     sort: {
        field: "name",
        dir: "desc"
     }
  },
  sortable: true,
  columns: [
     {
        field: "name",
        title: "Name"
     },
     {
        field: "surname",
        title: "Surname"
     }
  ]}); 
```

如果我理解你的正确，这将解决你的问题。

# flash - Firefox 中的 Flash 不显示

> ID：14562719
> 
> 赞同：0
> 
> 时间：2013-01-28T13:06:04.510
> 
> 标签：flash, firefox, open-flash-chart

我在我的网络上使用 Open Flash Chart，在 Chrome 中它显示完美，但在 FF 中它只是不可见，什么都没有。有什么建议该怎么办？这是某种错误吗？

```
var cesta = encodeURIComponent("./safe/kalkulace_graf1.php?k_polozka=<? echo $co; ?>&tit=false");
swfobject.embedSWF("./open-flash-chart.swf", "nahledGrafu", "400", "102", "9.0.0", "expressInstall.swf", {"data-file": cesta } );

<div id="nahledGrafu" width=200 height=100>
    <a href="http://get.adobe.com/cz/flashplayer/?no_redirect">
        <img src="../obrazky/flash-player.jpg" style="margin-left:115px" height="100" alt="Chybí Flash Player" title="Nemáte zapnutý nebo nainstalovaný Flash player.">
    </a>
</div> 
```

# c# - Web服务调用上的FaultException错误

> ID：14562722
> 
> 赞同：0
> 
> 时间：2013-01-28T13:06:15.780
> 
> 标签：c#, wcf, faultexception

我创建了一个从数据库返回一些类别的网络服务。如果我与客户测试 WCF 提供的一切都是完美的。我开始建立一个客户端。我在我的 service 中添加了一个 service 引用`http://localhost/Transaction/transaction.svc`。我创建了客户端 Web 服务的新实例

```
 TransactionClient tc = new TransactionClient("BasicHttpEndpoint");
 Category[] availableCategories = tc.GetAllCategories(); 
```

我进入`Object reference not set to an instance of an object`第二行代码。端点名称正确。

知道为什么会出错吗？

PS：如果您需要更多代码，请告诉我要发布的内容。提前致谢。

编辑 ：

```
 [OperationContract]
  List<Category> GetAllCategories();

  Implementation : 
  public List<Category> GetAllCategories()
   { return db.GetAllCategories()} 
```

该服务正在运行，我使用 WCFClient 进行测试，因此我的其余代码必须正确。

这是从数据库中获取项目的代码。我尝试使用发布的解决方案，但应用程序没有停止。

```
List<Category> response = new List<Category>();
            connect();

            SqlCommand cmd = new SqlCommand("select id_category, name from tbl_category", conn);
            try
            {
                dr = cmd.ExecuteReader();
                while (dr.Read())
                {
                    Category new_category = new Category();
                    new_category.id_category = int.Parse(dr["id_category"].ToString());
                    new_category.name = dr["name"].ToString();
                    response.Add(new_category);
                }

            }
            catch (SqlException ex)
            {
                Console.Out.Write(ex.ToString());
            }
            finally
            {
                dr.Close();
                conn.Close();
            }

            return response; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:06:52.617

`FaultException`是从 WCF 通道的另一端转移的异常。意思是，该异常并没有在您调用的线上发生`tc.GetAllCategories();`，而是在服务器端，在处理该方法时发生。

`FaultException`包装发生在服务器端的异常。从您粘贴的内容中我们可以看到，它是`NullReferenceException`. 要找到它发生的确切位置，请在`GetAllCategories`方法中设置断点并逐步执行它直到它失败。由于这是一个 WCF 服务，处理方法调用中的异常不会使服务崩溃，而是将异常包装并发送回客户端。

另一种查找错误发生位置的方法是调试服务，在 Visual Studio 中打开 Debug -> Exceptions 并勾选*Common Language Runtime Exceptions*旁边的 Throw 列中的复选框。这告诉 VS 调试器在发生错误时停止执行，即使 WCF 会捕获异常。

# android - Android如何测试方向变化

> ID：14562724
> 
> 赞同：0
> 
> 时间：2013-01-28T13:06:30.393
> 
> 标签：android, android-layout, junit4

我有一个关于单元测试 android 方向变化的问题。我的应用程序同时支持纵向和横向，我必须测试当方向改变时视图层次结构是否正确绘制。

我创建了两种测试方法来检查这个，我有这样的东西：

```
public void testOnCreate() throws Exception {
    //Check all the activity components
    assertNotNull(activity);
    assertNotNull(application);

    //Check if the rights components are available on the screen
    assertNotNull(LayoutInflater.from(activity));
    activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    testOrientationPortrait();
} 
```

在这种特殊情况下，测试通过，并且视图层次结构被正确绘制。但是当我尝试使用以下方法测试景观时：

```
public void testOrientationChange() throws Exception {
    assertNotNull(activity);
    activity.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

    //Check if the rights components are available on the screen
    assertNotNull(LayoutInflater.from(activity));
    testOrientationLandscape();
} 
```

方向改变了，但是视图层次结构失败了，因为视图具有来自纵向的属性。

任何想法如何解决这一问题？

谢谢，方舟

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:27:49.927

覆盖此方法并在方法中进行更改：

```
@Override
 public void onConfigurationChanged(Configuration newConfig) {
  // TODO Auto-generated method stub
  super.onConfigurationChanged(newConfig);

 } 
```

不要忘记添加

```
 <activity

        android:configChanges="orientation"
        >
    </activity> 
```

在你的清单中。

这可以用来检查方向。getResources().getConfiguration().orientation

# optimization - 如何限制powershell中并发作业的数量？

> ID：14562729
> 
> 赞同：1
> 
> 时间：2013-01-28T13:07:02.870
> 
> 标签：optimization, powershell, limits

我正在尝试获得 2000 多台计算机的正常运行时间。由于未在这些计算机上配置 winrm，因此我无法使用 invoke-command -computername $computers。所以我试图用它`start-job`来加快速度，但 start-job 没有带有`throttleLimit`参数作为调用命令。所以我的脚本会触发大量的 powershell.exe 直到它杀死我的记忆......有没有办法限制并发作业？

这就是我现在所拥有的：

```
$jobs=@()
Get-QADComputer -SearchRoot $OU -SizeLimit 3000 |%{
    $jobs+= Start-Job -ArgumentList $_.name -ScriptBlock {(param $cn)
    if (Test-Connection -Quiet $cn){
        $lastboottime=(Gwmi -computername $cn -Class Win32_OperatingSystem).lastbootuptime
        $sysuptime = (Get-Date) – [System.Management.ManagementDateTimeconverter]::ToDateTime($lastboottime)

        $cn +" "+$sysuptime.days
    }
}
}

$jobs|%{ Wait-Job $_ -Timeout 30 |Receive-Job ;Remove-Job $_} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:07:12.097

虽然这是一种可行的方法，但您根本不必使用工作。`Get-WMIObject`接受 a`String[]`作为`ComputerName`参数，如果传递了多个计算机名，它将同时轮询多台机器（我认为最多 32 台，但我不记得确切）并在结果中返回一个额外的字段，`PSComputerName`

你可以更简单地做到这一点。

```
$servernames = @();
$servernames += get-qadcomputer -searchroot $ou|select name|%{if(test-connection -quiet $_.name) {$_.name}}
get-wmiobject -computername $servernames win32_operatingsystem|select PSComputername,LastBootTime 
```

然后从那里计算每台计算机的正常运行时间。

编辑（Kayasax）：这是最终配方：

```
$alive=@()
$obj=@()

Get-QADComputer -SearchRoot $ou -SizeLimit 4000 |select -ExpandProperty name |foreach-object {
    if (Test-Connection -Quiet -count 1 $_){ $alive+=$_ }
}

Get-wmiobject -computername $alive -Class Win32_OperatingSystem |select PSComputerName, lastBootUpTime |foreach-object{
    $sysuptime = (Get-Date) – [System.Management.ManagementDateTimeconverter]::ToDateTime($_.lastBootUpTime)
    $props=@{"name"=$_.PSComputername;"uptime"=$sysuptime.days}
    $obj+= new-Object -TypeName PSCustomObject -property $props
}

$obj |sort-object uptime -desc 
```

# css - Font-Awesome 图标无法在 Android 版 Chrome 上正确显示

> ID：14562731
> 
> 赞同：2
> 
> 时间：2013-01-28T13:07:11.080
> 
> 标签：css, google-chrome, font-awesome

我的 Font-Awesome 图标无法在 Chrome for Android 的以下页面上正确呈现：

[http://nylen.tv/public/chrome-issue.html](http://nylen.tv/public/chrome-issue.html)

每个`td.description`元素（ZZZZZ 行）的末尾都有一个或两个 Font-Awesome 图标。在我的 Galaxy Nexus 上，如果页面以纵向模式加载，这些不会显示。如果页面以横向模式加载，它们会显示，但如果手机随后翻转到纵向模式，它们就会消失。我的 Nexus 7 上也出现了类似的问题。

我不认为我的标记有问题。它适用于我尝试过的所有其他浏览器，并且 HTML 和 CSS 验证除了 Font-Awesome 的供应商前缀 CSS 属性。

有没有人见过这样的东西？任何解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:33:48.540

此问题已在 Chrome for Android 更新中得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:00:44.830

我在 Chrome 中遇到了类似的问题……在我的桌面上。代替图标的是一个垂直的矩形在它的位置上呈现。

在其他地方，在您网站自己的样式表中，建议您可以将高度和宽度设置为 1em，并将显示设置为 :block，就像这样...

```
i {
  width: 1em;
  height: 1em;
  display:block;
  cursor: pointer;
} 
```

但我发现问题是我没有在 font-awesome.min.css 中正确设置相对字体路径......这样做的方向在这里：

[http://fortawesome.github.com/Font-Awesome/#integration][1]

**还要确保每个 URL 前面都带有“src”标签...**

```
@font-face{
  font-family:'FontAwesome';
  src:url('../font/fontawesome-webfont.eot?v=3.0.1');
  src:url('../font/fontawesome-webfont.eot?#iefix&v=3.0.1') format('embedded-opentype');
  src:url('../font/fontawesome-webfont.woff?v=3.0.1') format('woff');
  src:url('../font/fontawesome-webfont.ttf?v=3.0.1') format('truetype');
  font-weight:normal;
  font-style:normal } 
```

# magento - 已应用 Magento 优惠券代码，我可以将订单状态更新为“处理中”吗？

> ID：14562733
> 
> 赞同：1
> 
> 时间：2013-01-28T13:07:16.620
> 
> 标签：magento, magento-1.7, status, coupon

当客户通过**优惠券代码**部分或全部付款时，订单状态设置为“**待付款**”。我们使用第三方订单管理应用程序，它只提取状态为“**处理**中”的订单。

正常订单会自动设置为“处理中”，因此只有使用优惠券代码时才会出现问题。

当客户应用优惠券代码时，是否有办法自动将订单状态更新为“处理中”？

谢谢你的帮助

**（Magento 社区 1.7）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:42:30.523

我认为这是可能的，但您可能必须将其与创建发票结合起来——因为优惠券金额涵盖了订单价值，并且从技术上讲，订单已支付。我将创建一个观察者来捕获`sales_order_place_after`并将其用于以下目的：

```
$order = $observer->getOrder();
/**
add code to check if the coupon amount covers the order value
*/
$invoice = Mage::getModel('sales/service_order', $order)->prepareInvoice();
$invoice->register();
$invoice->getOrder()->setIsInProcess(true);
$invoice->getOrder()->setState(Mage_Sales_Model_Order::STATE_PROCESSING, true, '', false);
$transactionSave = Mage::getModel('core/resource_transaction')
    ->addObject($invoice)
    ->addObject($invoice->getOrder());
$transactionSave->save();
$invoice->getOrder()->save(); 
```

# twitter - 推特小部件中的缓慢滚动

> ID：14562734
> 
> 赞同：1
> 
> 时间：2013-01-28T13:07:22.953
> 
> 标签：twitter, widget

我在 Web 应用程序中使用 Twitter 小部件，它的滚动速度非常慢，我尝试在周围的 div 和小部件加载到 iframe 中的每个标签上设置 webkit-overflow-scrolling，但没有任何帮助。我不知道我错过了什么，但设置 webkit-overflow-scrolling:touch; 右边的标签应该使它滚动良好。

任何输入表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-04T08:39:39.733

在调整 twitter 小部件大小后，在周围的 div 中使用 overflow:"auto" 或 overflow-y:"scroll" 进行垂直滚动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-04T07:47:45.883

请使用这些自定义 twitter 小部件或使用自定义 twitter 提要。调查这些答案。

1)[有没有办法自定义嵌入式 Twitter 提要？](https://stackoverflow.com/questions/12865972/is-there-any-way-to-customize-embedded-twitter-feed/33516292#33516292)

2)[嵌入式时间线的动态时间线选择 - Hashtag Timeline](https://stackoverflow.com/questions/25446833/dynamic-timeline-selection-for-embedded-timelines-hashtag-timeline/33516239#33516239)

可能对你有帮助

# javascript - 覆盖对象属性值（简单链接列表示例）

> ID：14562736
> 
> 赞同：0
> 
> 时间：2013-01-28T13:07:33.697
> 
> 标签：javascript, json, data-structures

我正在用 JavaScript 做一个简单的链接列表（我是新手），我有以下代码，

```
var List = function () {
  this.LinkedList = {
    "Head": {}
  };
};
List.prototype = {
  insert: function (element) {
    var Node = this.head();
    while (Node.hasOwnProperty("Node")) {
      Node = this.next(Node);
    }
    Node["Node"] = {
      "element": element
    };
  },
  remove: function (element) {
    var Node = this.head();
    while (Node.element != element) {
      Node = this.next(Node);
    }
    delete Node.element;
    Node = Node.Node; //overwriting Node with Node.Node
  },
  next: function (Node) {
    return Node.Node;
  },
  head: function () {
    return this.LinkedList.Head;
  },
  getList: function () {
    return this.LinkedList;
  }
}; 
```

当我做插入时，它做得很好，

```
var myList = new List();
myList.insert(1);
myList.insert(5);
myList.insert(6);
myList.insert(2); 
```

这给了我一个列表，

```
 {
    "Head": {
        "Node": {
            "element": 1,
            "Node": {
                "element": 5,
                "Node": {
                    "element": 6,
                    "Node": {
                        "element": 2
                    }
                }
            }
        }
    }
} 
```

现在，当我进行删除时，它没有给出正确的列表：

```
myList.remove(5);

{
    "Head": {
        "Node": {
            "element": 1,
            "Node": {
                "Node": {
                    "element": 6,
                    "Node": {
                        "element": 2
                    }
                }
            }
        }
    }
} 
```

我想要得到的是这样的：

```
{
    "Head": {
        "Node": {
            "element": 1,
            "Node": {
                "element": 6,
                "Node": {
                    "element": 2
                }
            }
        }
    }
} 
```

关于如何解决这个问题的任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:30:59.460

这是因为`Node = Node.Node`没有将下一个节点分配为当前节点。您只是分配`Node.Node`给变量`Node`。这样，您就不会覆盖。从某种意义上说，您只能获得“读取权限”。

要解决此问题并获得传递引用的好处，*请修改变量引用的对象的属性*。这样，您就可以阅读*和*修改权限。

一个简短的示例来解释您的代码中发生的事情：

```
//so we create an object
var foo = {}
  , bar;

//and assign a baz property carrying bam
foo.baz = 'bam';

//we reference foo.baz with bar
bar = foo.baz;

//so we expect that bar is bam
console.log(bar); //bam

//however, in this operation, we merely assign a value boom to bar
//and not modify foo.baz
bar = 'boom';

//with bar modified in that way, foo.baz remains as bam
console.log(bar); //boom
console.log(foo.baz) //bam? 
```

因此，[这是一种简化的方法](http://jsfiddle.net/e6vcD/1/)，其中包含代码的剥离版本：

```
var List = function () {
    this.head = {}
};
List.prototype = {
    insert: function (element) {
        var node = this.head;
        while (node.next) {
            node = node.next
        }
        node.next = {
            "element": element
        };
    },
    remove: function (element) {

        //so we start with head
        var node = this.head;

        //basically, we assign node as the next node
        //that way, we'll be operating on next instead of node
        //so we can modify the values

        //while the next isn't the one we are after
        while (node.next.element != element) {
            //point to the next
            node = node.next;
        }

        //when we get our target, delete it
        delete node.next.element;

        //we don't assign to the variable node, but to a property
        //of the object node is referencing to
        node.next = node.next.next;
    }
}; 
```

顺便说一句，详细地命名你的变量、属性和东西。

# c# - 访问列表 多个线程中的元素并报告进度

> ID：14562737
> 
> 赞同：1
> 
> 时间：2013-01-28T13:07:38.327
> 
> 标签：c#, multithreading, .net-3.5

在我的应用程序中，我有来自我的数据库的人员列表。对于每个人，我必须调用 5 个（目前）服务来搜索一些信息。如果服务返回信息，我将其添加到那个人（特定人的订单列表）
因为服务独立工作，我想我可以尝试并行运行它们。我已经这样创建了我的代码：

```
using System;
using System.Collections.Generic;
using System.Threading;

namespace Testy
{
    internal class Program
    {
        internal class Person
        {
            public int Id { get; set; }
            public string Name { get; set; }
            public List<string> Orders { get; private set; }

            public Person()
            {
                // thanks for tip @juharr
                Orders = new List<string>();
            }

            public void AddOrder(string order)
            {
                lock (Orders) //access across threads
                {
                    Orders.Add(order);
                }
            }
        }

        internal class Service
        {
            public int Id { get; private set; }

            public Service(int id)
            {
                Id = id;
            }

            //I get error when I use IList instead of List
            public void Search(ref List<Person> list) 
            {
                foreach (Person p in list)
                {
                    lock (p) //should I lock Person here? and like this???
                    {
                        Search(p);
                    }
                }
            }
            private void Search(Person p)
            {
                Thread.Sleep(50);
                p.AddOrder(string.Format("test order from {0,2}",
                                      Thread.CurrentThread.ManagedThreadId));
                Thread.Sleep(100);
            }
        }

        private static void Main()
        {
            //here I load my services from external dll's
            var services = new List<Service>();
            for (int i = 1; i <= 5; i++)
            {
                services.Add(new Service(i));
            }

            //sample data load from db    
            var persons = new List<Person>();

            for (int i = 1; i <= 10; i++)
            {
                persons.Add(
                    new Person {Id = i, 
                    Name = string.Format("Test {0}", i)});
            }

            Console.WriteLine("Number of services: {0}", services.Count);
            Console.WriteLine("Number of persons: {0}", persons.Count);

            ManualResetEvent resetEvent = new ManualResetEvent(false);
            int toProcess = services.Count;

            foreach (Service service in services)
            {
                new Thread(() =>
                    {
                        service.Search(ref persons);
                        if (Interlocked.Decrement(ref toProcess) == 0)
                            resetEvent.Set();
                    }
                    ).Start();
            }

            // Wait for workers.
            resetEvent.WaitOne();

            foreach (Person p in persons)
            {
                Console.WriteLine("{0,2} Person name: {1}",p.Id,p.Name);
                if (null != p.Orders)
                {
                    Console.WriteLine("    Orders:");
                    foreach (string order in p.Orders)
                    {
                        Console.WriteLine("    Order: {0}", order);
                    }
                }
                else
                {
                    Console.WriteLine("    No orders!");
                }
            }
            Console.ReadLine();
        }
    }
} 
```

我的代码有两个问题：

1.  ~~当我运行我的应用程序时，我应该得到 10 人的列表，每个人有 5 个订单，但有时（3-5 次运行的）第一人我只得到 4 个订单。**我怎样才能防止这种行为？**~~
    **解决了！感谢@juharr**
2.  如何从我的线程报告进度？我想得到的是我的程序类中的一个函数，每次从服务中添加订单时都会调用它——我需要它来显示每个报告的某种进展。
    我正在尝试此处描述的解决方案：[https](https://stackoverflow.com/a/3874184/965722) ://stackoverflow.com/a/3874184/965722 ，但我想知道是否有更简单的方法。理想情况下，我想将委托添加到`Service`类并将所有线程代码放在那里。
    **我应该如何将事件和委托添加到`Service`类以及如何在 Main 方法中订阅它？**

* * *

**我正在使用 .NET 3.5**

我添加了此代码以便能够获取进度报告：

```
using System;
using System.Collections.Generic;
using System.Threading;

namespace Testy
{
    internal class Program
    {
        public class ServiceEventArgs : EventArgs
        {
            public ServiceEventArgs(int sId, int progress)
            {
                SId = sId;
                Progress = progress;
            }

            public int SId { get; private set; }
            public int Progress { get; private set; }
        }

        internal class Person
        {
            private static readonly object ordersLock = new object();

            public int Id { get; set; }
            public string Name { get; set; }
            public List<string> Orders { get; private set; }

            public Person()
            {
                Orders = new List<string>();
            }

            public void AddOrder(string order)
            {
                lock (ordersLock) //access across threads
                {
                    Orders.Add(order);
                }
            }
        }

        internal class Service
        {
            public event EventHandler<ServiceEventArgs> ReportProgress;

            public int Id { get; private set; }
            public string Name { get; private set; }

            private int counter;

            public Service(int id, string name)
            {
                Id = id;
                Name = name;
            }

            public void Search(List<Person> list) //I get error when I use IList instead of List
            {
                counter = 0;
                foreach (Person p in list)
                {
                    counter++;
                    Search(p);
                    Thread.Sleep(3000);
                }
            }

            private void Search(Person p)
            {
                p.AddOrder(string.Format("Order from {0,2}", Thread.CurrentThread.ManagedThreadId));

                EventHandler<ServiceEventArgs> handler = ReportProgress;
                if (handler != null)
                {
                    var e = new ServiceEventArgs(Id, counter);
                    handler(this, e);
                }
            }
        }

        private static void Main()
        {
            const int count = 5;
            var services = new List<Service>();
            for (int i = 1; i <= count; i++)
            {
                services.Add(new Service(i, "Service " + i));
            }

            var persons = new List<Person>();

            for (int i = 1; i <= 10; i++)
            {
                persons.Add(new Person {Id = i, Name = string.Format("Test {0}", i)});
            }

            Console.WriteLine("Number of services: {0}", services.Count);
            Console.WriteLine("Number of persons: {0}", persons.Count);
            Console.WriteLine("Press ENTER to start...");
            Console.ReadLine();

            ManualResetEvent resetEvent = new ManualResetEvent(false);
            int toProcess = services.Count;

            foreach (Service service in services)
            {
                new Thread(() =>
                    {
                        service.ReportProgress += service_ReportProgress;
                        service.Search(persons);
                        if (Interlocked.Decrement(ref toProcess) == 0)
                            resetEvent.Set();
                    }
                    ).Start();
            }

            // Wait for workers.
            resetEvent.WaitOne();

            foreach (Person p in persons)
            {
                if (p.Orders.Count != count)
                    Console.WriteLine("{0,2} Person name: {1}, orders: {2}", p.Id, p.Name, p.Orders.Count);
            }
            Console.WriteLine("END :)");
            Console.ReadLine();
        }

        private static void service_ReportProgress(object sender, ServiceEventArgs e)
        {
            Console.CursorLeft = 0;
            Console.CursorTop = e.SId;
            Console.WriteLine("Id: {0,2}, Name: {1,2} - Progress: {2,2}", e.SId, ((Service) sender).Name, e.Progress);
        }
    }
} 
```

我为服务类添加了自定义 EventArgs，事件。在此配置中，我应该运行 5 个服务，但其中只有 3 个报告进度。
我想象如果我有 5 个服务，我应该有 5 个事件（5 行显示进度）。
这可能是因为线程，但我不知道如何解决这个问题。

示例输出现在如下所示：

```
Number of services: 5
Number of persons: 10
Press ENTER to start...
Id:  3, Name: Service 3 - Progress: 10
Id:  4, Name: Service 4 - Progress: 10
Id:  5, Name: Service 5 - Progress: 19
END :) 
```

它应该如下所示：

```
Number of services: 5
Number of persons: 10
Press ENTER to start...
Id:  1, Name: Service 1 - Progress: 10
Id:  2, Name: Service 2 - Progress: 10
Id:  3, Name: Service 3 - Progress: 10
Id:  4, Name: Service 4 - Progress: 10
Id:  5, Name: Service 5 - Progress: 10
END :) 
```

* * *

**上次编辑**
我已将所有线程创建移至单独的类，`ServiceManager`现在我的代码如下所示：

```
using System;
using System.Collections.Generic;
using System.Threading;

namespace Testy
{
    internal class Program
    {
        public class ServiceEventArgs : EventArgs
        {
            public ServiceEventArgs(int sId, int progress)
            {
                SId = sId;
                Progress = progress;
            }

            public int SId { get; private set; } // service id
            public int Progress { get; private set; }
        }

        internal class Person
        {
            private static readonly object ordersLock = new object();

            public int Id { get; set; }
            public string Name { get; set; }
            public List<string> Orders { get; private set; }

            public Person()
            {
                Orders = new List<string>();
            }

            public void AddOrder(string order)
            {
                lock (ordersLock) //access across threads
                {
                    Orders.Add(order);
                }
            }
        }

        internal class Service
        {
            public event EventHandler<ServiceEventArgs> ReportProgress;

            public int Id { get; private set; }
            public string Name { get; private set; }

            public Service(int id, string name)
            {
                Id = id;
                Name = name;
            }

            public void Search(List<Person> list)
            {
                int counter = 0;
                foreach (Person p in list)
                {
                    counter++;
                    Search(p);
                    var e = new ServiceEventArgs(Id, counter);
                    OnReportProgress(e);
                }
            }

            private void Search(Person p)
            {
                p.AddOrder(string.Format("Order from {0,2}", Thread.CurrentThread.ManagedThreadId));
                Thread.Sleep(50*Id);
            }

            protected virtual void OnReportProgress(ServiceEventArgs e)
            {
                var handler = ReportProgress;
                if (handler != null)
                {
                    handler(this, e);
                }
            }
        }

        internal static class ServiceManager
        {
            private static IList<Service> _services;

            public static IList<Service> Services
            {
                get
                {
                    if (null == _services)
                        Reload();
                    return _services;
                }
            }

            public static void RunAll(List<Person> persons)
            {
                ManualResetEvent resetEvent = new ManualResetEvent(false);
                int toProcess = _services.Count;

                foreach (Service service in _services)
                {
                    var local = service;
                    local.ReportProgress += ServiceReportProgress;
                    new Thread(() =>
                        {
                            local.Search(persons);
                            if (Interlocked.Decrement(ref toProcess) == 0)
                                resetEvent.Set();
                        }
                        ).Start();
                }
                // Wait for workers.
                resetEvent.WaitOne();
            }

            private static readonly object consoleLock = new object();

            private static void ServiceReportProgress(object sender, ServiceEventArgs e)
            {
                lock (consoleLock)
                {
                    Console.CursorTop = 1 + (e.SId - 1)*2;
                    int progress = (100*e.Progress)/100;
                    RenderConsoleProgress(progress, '■', ConsoleColor.Cyan, String.Format("{0} - {1,3}%", ((Service) sender).Name, progress));
                }
            }

            private static void ConsoleMessage(string message)
            {
                Console.CursorLeft = 0;
                int maxCharacterWidth = Console.WindowWidth - 1;
                if (message.Length > maxCharacterWidth)
                {
                    message = message.Substring(0, maxCharacterWidth - 3) + "...";
                }
                message = message + new string(' ', maxCharacterWidth - message.Length);
                Console.Write(message);
            }

            private static void RenderConsoleProgress(int percentage, char progressBarCharacter,
                                                      ConsoleColor color, string message)
            {
                ConsoleColor originalColor = Console.ForegroundColor;
                Console.ForegroundColor = color;
                Console.CursorLeft = 0;
                int width = Console.WindowWidth - 1;
                var newWidth = (int) ((width*percentage)/100d);
                string progBar = new string(progressBarCharacter, newWidth) + new string(' ', width - newWidth);
                Console.Write(progBar);
                if (!String.IsNullOrEmpty(message))
                {
                    Console.CursorTop++;
                    ConsoleMessage(message);
                    Console.CursorTop--;
                }
                Console.ForegroundColor = originalColor;
            }

            private static void Reload()
            {
                if (null == _services)
                    _services = new List<Service>();
                else
                    _services.Clear();

                for (int i = 1; i <= 5; i++)
                {
                    _services.Add(new Service(i, "Service " + i));
                }
            }
        }

        private static void Main()
        {
            var services = ServiceManager.Services;
            int count = services.Count;

            var persons = new List<Person>();

            for (int i = 1; i <= 100; i++)
            {
                persons.Add(new Person {Id = i, Name = string.Format("Test {0}", i)});
            }

            Console.WriteLine("Services: {0}, Persons: {1}", services.Count, persons.Count);
            Console.WriteLine("Press ENTER to start...");
            Console.ReadLine();
            Console.Clear();
            Console.CursorVisible = false;

            ServiceManager.RunAll(persons);

            foreach (Person p in persons)
            {
                if (p.Orders.Count != count)
                    Console.WriteLine("{0,2} Person name: {1}, orders: {2}", p.Id, p.Name, p.Orders.Count);
            }
            Console.CursorTop = 12;
            Console.CursorLeft = 0;
            Console.WriteLine("END :)");
            Console.CursorVisible = true;
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:26:44.797

基本上你有一个创建订单的竞争条件。想象一下两个线程的以下执行。

线程 1 检查 Orders 是否为 null 并且它是。
线程 2 检查 Orders 是否为 null 并且它是。
线程 1 将 Orders 设置为一个新列表。
线程 1 获得锁。
线程 1 添加到订单列表。
线程 2 将 Order 设置为一个新列表。（您刚刚丢失了 Thread 1 添加的内容）

您需要在锁中包含订单的创建。

```
public void AddOrder(string order)
{
    lock (Orders) //access across threads
    {
        if (null == Orders)
            Orders = new List<string>();
        Orders.Add(order);
    }
} 
```

或者你真的应该在 Person 构造函数中创建 Order 列表

```
public Person()
{
    Orders = new List<Order>();
} 
```

此外，您应该真正创建一个单独的对象进行锁定。

```
private object ordersLock = new object();

public void AddOrder(string order)
{
    lock (ordersLock) //access across threads
    {
        Orders.Add(order);
    }
} 
```

编辑：

在您创建线程的 foreach 中，您需要创建服务的本地副本以在 lambda 表达式中使用。这是因为 foreach 将更新服务变量，而线程最终可能会捕获错误的变量。所以像这样。

```
foreach (Service service in services)
{
    Service local = service;
    local.ReportProgress += service_ReportProgress;
    new Thread(() =>
        {
            local.Search(persons);
            if (Interlocked.Decrement(ref toProcess) == 0)
                resetEvent.Set();
        }
    ).Start();
} 
```

请注意，订阅不需要在线程内。

`Search`或者，您可以在类的方法中移动线程的创建`Service`。

此外，您可能希望在类中创建一个`OnReportProgress`方法，如下所示：`Service`

```
protected virtual void OnReportProgress(ServiceEventArgs e)
{
    EventHandler<ServiceEventArgs> handler = ReportProgress;
    if (handler != null)
    {
        handler(this, e);
    }
} 
```

`Search`然后在你的方法中调用它。就我个人而言，我会在公共`Search`方法中调用它并使计数器成为局部变量，以允许`Service`在另一个列表中重用该对象。

最后，在写入控制台时，您需要在事件处理程序中添加一个额外的锁，以确保一个线程在另一个线程写入输出之前不会更改光标位置。

```
private static object consoleLock = new object();

private static void service_ReportProgress(object sender, ServiceEventArgs e)
{
    lock (consoleLock)
    {
        Console.CursorLeft = 0;
        Console.CursorTop = e.SId;
        Console.WriteLine("Id: {0}, Name: {1} - Progress: {2}", e.SId, ((Service)sender).Name, e.Progress);
    }
} 
```

此外，您可能希望`Console.Clear()`在以下位置使用：

```
...
Console.WriteLine("Number of services: {0}", services.Count);
Console.WriteLine("Number of persons: {0}", persons.Count);
Console.WriteLine("Press ENTER to start...");
Console.Clear();
Console.ReadLine();
... 
```

在写出结束语句之前，您需要更新光标位置。

```
Console.CursorTop = 6;
Console.WriteLine("END :)"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:27:17.307

这可能无法完全回答您的问题（但我认为您可能有竞争条件），当您开始处理线程时，您需要在从不同线程更新对象时实现适当的同步。您应该确保在任何给定时间只有一个线程能够更新 person 类的实例。p.AddOrder( 应该具有确保只有一个线程在更新 Person 对象的互斥锁。

# android - 为什么我的应用与 Google Play 中的 nexus 7 不兼容？

> ID：14562738
> 
> 赞同：3
> 
> 时间：2013-01-28T13:07:39.473
> 
> 标签：android, manifest, tablet

我刚刚发布了适用于手机和平板电脑的应用程序，但它没有出现在平板电脑的 Google Play 中。

检查 Nexus 7 和华硕 eeeePad

这是我的清单文件中的内容：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17"/>
<supports-screens android:largeScreens="true" android:normalScreens="true" android:smallScreens="true" android:xlargeScreens="true" android:resizeable="true" android:anyDensity="true"/>
<uses-permission android:name="bluey.com.permission.C2D_MESSAGE"/>
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE"/>
<uses-permission android:name="android.permission.VIBRATE"/>
<uses-permission android:name="android.permission.WAKE_LOCK"/>
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.CALL_PHONE"/>
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS"/>
<uses-permission android:name="android.permission.SEND_SMS"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-feature android:name="android.hardware.telephony" android:required="false"/>
<uses-feature android:name="android.hardware.camera" android:required="false"/>
<uses-feature android:name="android.hardware.bluetooth" android:required="false"/>
<uses-feature android:name="android.hardware.location" android:required="false"/> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-13T16:02:15.010

希望答案还为时不晚。查看您的权限并记住 Nexus 7 具有-没有
电话
功能 -单个前置摄像头（需要 android.hardware.camera 功能的应用在 Nexus 7 上不可用）
始终声明不重要的硬件功能到您的应用程序为 required="false"
在您的权限列表中要求
`<uses-permission android:name="android.permission.CALL_PHONE"/>`
这就是为什么您的应用程序与 Nexus 7 不兼容的原因，如果调用对于您的应用程序运行不是必需的，只需在您的清单中声明

```
<uses-feature android:name="android.hardware.telephony" android:required="false"/> 
```

希望有帮助

# javascript - 按键加速

> ID：14562740
> 
> 赞同：-2
> 
> 时间：2013-01-28T13:07:45.460
> 
> 标签：javascript

我想在javascript中添加加速。例如，如果我按下并按住一个按钮，那么对象会朝所选方向加速移动。

有人可以建议，如何开始这个？我应该记录按键的时间吗？如果是，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:32:29.613

[你应该做运动学](https://en.wikipedia.org/wiki/Kinematics#Velocity_and_speed)的圆顶研究。

您可以使用一个简单的循环来模拟位置、速度和加速度之间的对应关系。

我做了一个简单的例子（使用 jQuery 访问 DOM/CSS）：

```
var position = 0;
var velocity = 0;
var acceleration = 0.1;

var $thing = $("#thing");

var loop = function () {
    $thing.css("left", position + "px");

    position = position + velocity;
    velocity = velocity + acceleration;
}

window.setInterval(loop, 100); 
```

你可以在这里运行它：http: [//jsfiddle.net/QAn3Z/](http://jsfiddle.net/QAn3Z/)

现在您只需要添加按键检测。

这应该让你开始。带着更具体的问题或问题回来，他们会比“我应该如何开始”更少被否决；-)

# node.js - 节点：使用 connect-mongo 进行会话时出现“错误设置 TTL 索引”

> ID：14562752
> 
> 赞同：0
> 
> 时间：2013-01-28T13:08:27.160
> 
> 标签：node.js, express, mongoose, connect

我正在尝试将 Express 应用程序部署到 heroku 并收到以下错误：

```
2013-01-28T12:44:55+00:00 heroku[web.1]: Starting process with command `coffee    server.coffee`
2013-01-28T12:44:57+00:00 app[web.1]: Express server listening on port 13715
2013-01-28T12:44:57+00:00 app[web.1]: /app/node_modules/connect-mongo/node_modules/mongodb/lib/mongodb/connection/server.js:537
2013-01-28T12:44:57+00:00 app[web.1]:               ^
2013-01-28T12:44:57+00:00 app[web.1]:         throw err;
2013-01-28T12:44:57+00:00 app[web.1]:     at Db.indexInformation (/app/node_modules/connect-mongo/node_modules/mongodb/lib/mongodb/db.js:1372:30)
2013-01-28T12:44:57+00:00 app[web.1]: Error: Error setting TTL index on collection : sessions
2013-01-28T12:44:57+00:00 app[web.1]:     at module.exports._get_collection (/app/node_modules/connect-mongo/lib/connect-mongo.js:137:23)
2013-01-28T12:44:57+00:00 app[web.1]:     at Cursor.toArray (/app/node_modules/connect-mongo/node_modules/mongodb/lib/mongodb/cursor.js:152:22)
2013-01-28T12:44:57+00:00 app[web.1]:     at Db.ensureIndex (/app/node_modules/connect-mongo/node_modules/mongodb/lib/mongodb/db.js:1228:28)
2013-01-28T12:44:57+00:00 app[web.1]:     at Cursor.nextObject.self.queryRun (/app/node_modules/connect-mongo/node_modules/mongodb/lib/mongodb/cursor.js:594:39)
2013-01-28T12:44:57+00:00 app[web.1]:     at Db._executeQueryCommand (/app/node_modules/connect-mongo/node_modules/mongodb/lib/mongodb/db.js:1814:5)
2013-01-28T12:44:57+00:00 app[web.1]:     at Cursor.close (/app/node_modules/connect-mongo/node_modules/mongodb/lib/mongodb/cursor.js:947:5)
2013-01-28T12:44:57+00:00 app[web.1]:     at Cursor.nextObject.commandHandler (/app/node_modules/connect-mongo/node_modules/mongodb/lib/mongodb/cursor.js:594:21)
2013-01-28T12:44:57+00:00 app[web.1]:     at EventEmitter.emit (events.js:126:20)
2013-01-28T12:44:57+00:00 app[web.1]:     at g (events.js:192:14) 
```

当我在本地运行它时，它工作正常。在这两种情况下，我都连接到 MongoHQ。以下是我的 server.coffee 的相关部分：

```
express          = require 'express'
mongoStore       = require("connect-mongo")(express)

app.configure ->
  app.use express.errorHandler()
  app.use express.logger("dev")
  app.use express.bodyParser()
  app.use express.methodOverride()
  app.use express.cookieParser(config.cookieSecret)
  app.use express.session(
    secret: config.sessionSecret
    cookie:
      httpOnly:         true
      secure:           true
    store: new mongoStore(
      url:              config.db
      collection:       "sessions"
      auto_reconnect:   true
    )
  )
  app.use express.csrf()
  app.use express.static(config.root + "/public")
  app.use assets()
  app.use flash()

  app.use passport.initialize()
  app.use passport.session()

  app.use app.router 
```

我正在使用节点 0.8.14、express 3.0.3、mongoose 3.4.0、connect-mongo 0.3.2。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-01T02:18:27.303

我有同样的症状。通过使用[此](https://stackoverflow.com/questions/16226472/mongoose-autoreconnect-option)问题中的代码来获取更多错误信息，从而克服了它；它帮助我意识到问题确实是连接字符串中的用户 ID 和密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:19:44.333

原来我的配置文件指向 dev 和 prod 中的同一个数据库。这就是导致错误的原因。

# sql - 计算表记录的最大存储大小？

> ID：14562758
> 
> 赞同：4
> 
> 时间：2013-01-28T13:09:04.100
> 
> 标签：sql, sql-server, sql-server-2005

有没有办法确定 SQL Server 中记录的最大大小超过手动操作？例如：

```
CREATE TABLE test (
    id INT PRIMARY KEY IDENTITY(1, 1),
    name VARCHAR(256),
    test_date DATETIME
) 
```

所以，如果我没记错的话，在手动计算时，该记录可能最多为`272 bytes`. 但是，我有一个包含更多列的表，并且我需要为多个表执行此操作，所以我想知道是否可以通过简单的查询来执行此操作。

例如，我找不到任何信息，`INFORMATION_SCHEMA.TABLES`甚至找不到`INFORMATION_SCHEMA.COLUMNS`我认为可以做一个简单`SUM`的地方。此外，`sysobjects`似乎`syscolumns`没有必要的信息。该`syscolumns`表确实有一个`length`字段，但这不是实际的存储大小。

谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T13:15:00.897

试试这个：

```
Select  schema_name(T.schema_id) As SchemaName,
        T.Name As TableName,
        Sum(C.max_length) As RowSize
From    sys.tables T
        Inner Join sys.columns C
            ON T.object_id = C.Object_ID
        INNER JOIN sys.types S
            On C.system_type_id = S.system_type_Id
Group By schema_name(T.schema_id),
        T.Name
Order By schema_name(T.schema_id),
        T.Name 
```

# iphone - 查看显示/隐藏不起作用

> ID：14562761
> 
> 赞同：0
> 
> 时间：2013-01-28T13:09:34.893
> 
> 标签：iphone, xcode

在我的 HomeViewController 中有 homeView 和 loginView。当我在 homeview 中单击注销按钮时，我隐藏了 homeview 并显示 loginView。所以用户进入 homeView。我再次单击注销按钮 homeView 不隐藏

应用委托.m

```
HomeViewController *home =[[HomeViewController alloc]initWithNibName:@"HomeViewController" bundle:nil];
    navigationController = [[UINavigationController alloc]initWithRootViewController:home];
    [viewsArray addObject:navigationController];
 [self.tabbarController setViewControllers:viewsArray];

homeViewController.m:

-(IBAction)logout:(id)sender
{
   homeView.hidden=YES;
   loginView.hidden=NO;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:13:46.530

我可以建议查看您的代码的事情：

1- 确保 homeView 和 loginView 在 IB 中正确连接，而不是 nil。
2-确保注销方法与注销按钮挂钩并实际被调用。

希望有帮助！

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:33:22.557

像这样制作 homeView 和 loginView 的 IBoutlet。

```
@property( nonatomic,retain)IBOutlet UIView *homeView;
@property( nonatomic,retain)IBOutlet UIView *loginView; 
```

现在将您的故事板视图连接到编码的 IBOutlet 视图

# xml - XSL 合并时，将具有特定名称的元素 N 与其他 XML 的元素 N 匹配

> ID：14562763
> 
> 赞同：0
> 
> 时间：2013-01-28T13:09:41.150
> 
> 标签：xml, xslt, xpath, merge

我有两个需要合并的 XML 文档。

```
<!-- A.xml -->
<cm:Process>
    <cm:Other />
    <cm:Elements />
    <cm:Request>
        <!-- stuff -->
    </cm:Request>
    <cm:ElementCouldBeHereToo />
    <cm:Request>
        <!-- stuff -->
    </cm:Request>
</cm:Process>

<!-- B.xml -->
<gateway-orders>
    <response>
        <status />
    </response>
    <response>
        <status />
    </response>
</gateway-orders> 
```

第一个是原始 XML。请求已被提取并发送到系统，接下来是响应。现在我需要合并这两个并将请求 N 与响应 N 匹配，以便我可以从响应中提取一些信息。XSL 在 A.xml 上工作并将 B.xml 作为参数。首先，我只是尝试在 A.xml 中的请求中创建 B.xml 中正确响应的副本。

我遇到的问题是我认为我可以使用`position()`，但意识到这不起作用，因为这些`cm:Request`元素与其他元素混合在一起。还有另一种方法可以用来以某种方式匹配这些吗？

这是我尝试过的：

```
<xsl:import href="identity-transform.xsl" />

<xsl:param name="responses" />

<xsl:template match="cm:Request">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()" />
        <xsl:apply-templates select="$responses/*[1]/*[position()]" />
    </xsl:copy>
</xsl:template> 
```

这里有两个问题。

1.  首先，`position()`不会匹配。有没有办法获取`cm:Request`您所在元素的数量/位置，而不是所有兄弟元素的数量/位置？因此，`cm:Request`无论前面是否有任何元素，第一个总是给出 1。
2.  其次，由于某种原因，我得到了每个请求中*所有响应的副本。*如果我更改`position()`为 example `1`，我只会在每个请求中获得第一个响应的副本。我在这里做错了什么？

希望有人知道我应该在这里做什么，因为我现在有点空白，我的 Google-fu 让我失望了：P

**总而言之**，如何将第 n 个元素与 name`blah`与参数节点集中的第 n 个子元素进行匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:38:09.477

这个怎么样：

```
<xsl:template match="cm:Request">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()" />
        <xsl:variable name="reqNum" select="count(preceding-sibling::cm:Request | .)" />
        <xsl:apply-templates select="$responses/*[1]/response[$reqNum]" />
    </xsl:copy>
</xsl:template> 
```

要解释这一点：

> > 2.其次，由于某种原因，我得到了每个请求中所有响应的副本。如果我用例如 1 更改 position()，我只会得到每个请求中第一个响应的副本。我在这里做错了什么？

在这种情况下，`position()`实际行为与您认为的不同。如果您在该模板中执行此操作：

```
<xsl:variable name="pos" select="position()" /> 
```

*然后* `$pos`将具有当前`cm:Request`相对于其所有兄弟姐妹的位置，但在这里：

```
$responses/*[1]/*[position()] 
```

`position()`正在上下文中进行评估`$responses/*[1]/*`。因此，对于第一个`<response>`this 评估为`$responses/*[1]/*[1]`，对于第二个响应，this 评估为`$responses/*[1]/*[2]`，因此始终选择两者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:39:06.210

一种方法应该是

```
<xsl:template match="cm:Request">
  <xsl:variable name="index"><xsl:number/></xsl:variable>
  <xsl:copy>
     <xsl:apply-templates select="@* | node()"/>
     <xsl:apply-templates select="$responses/*[1]/*[position() = $index]"/>
  </xsl:copy>
</xsl:template> 
```

# c# - 对 writeshared 打开的文件进行原子写入

> ID：14562765
> 
> 赞同：0
> 
> 时间：2013-01-28T13:09:46.643
> 
> 标签：c#, filestream, atomic

我在多个进程中以 writeshare 和追加模式打开了一个文件流。有谁知道单个无缓冲的写操作是否可以被认为是原子的？

还是我必须开发一种方法来同步不同的写入以确保我的数据安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:07:51.010

我找到了自己的路。

您可以使用此构造函数打开文件流。

```
new FileStream(FileName,
    FileMode.Append,
    System.Security.AccessControl.FileSystemRights.AppendData,
    FileShare.ReadWrite, 4096, FileOptions.None); 
```

使用**System.Security.AccessControl.FileSystemRights.AppendData**参数打开流，使用**FileMode.Append**，操作系统将尝试以原子方式写入缓冲区。

如果您的写入大于缓冲区大小，则操作将不是原子的，因此您必须检查缓冲区大小。

# grails - 计数大于零的 Grails 标准

> ID：14562766
> 
> 赞同：2
> 
> 时间：2013-01-28T13:09:48.517
> 
> 标签：grails, criteria, hibernate-criteria

我在 grails 中有以下标准

```
def quizList = Quiz.createCriteria().list{
            createAlias('user', 'u')
            projections {
                groupProperty('u.id')
                property "u.firstName"
                property "u.lastName"
                count "id",'quizCount'

            }
            gt('quizCount',0)
        } 
```

不幸的是，每当我添加`gt('quizCount',0)`到标准时，它就会开始失败说

```
could not resolve property: quizCount 
```

我的测验类有一个用户作为字段。

```
class User {
    String firstName
    String lastName
    String email
    String password
}

class Quiz {
    User user
    String quizName
} 
```

**该标准的目标是找到所有测验超过零的用户。** 我很确定我在做一些愚蠢的事情！任何建议将不胜感激。

谢谢

# javascript - js函数表现得很奇怪

> ID：14562771
> 
> 赞同：1
> 
> 时间：2013-01-28T13:09:58.923
> 
> 标签：javascript, html, submit

我有这个逻辑：用户在表单中提供他的地址，我将使用这个地址，在提交功能中我将获取这个地址的纬度和经度，并将其保存到表单中的隐藏输入字段中，然后使用这些提交表单里面经纬度。

我的js函数：

```
var geocoder = new google.maps.Geocoder();
function geocodeme(adr) {
    var address = adr;

    geocoder.geocode(
        {'address': address}, 
        function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                var latitude = results[0].geometry.location.lat();
                var longitude = results[0].geometry.location.lng();
                //alert(latitude + ' - ' + longitude);
                $('#lat').val(latitude);
                $('#long').val(longitude);
            } 
        }
    ); 
}

function submitme(){
    var adres = str + '+' + hnr + '+' + plz + '+' + stadt + '+' + land;
    var codemeadr = str + ' ' + hnr + ' ' + plz + ' ' + stadt + ' ' + land;         
    geocodeme(codemeadr);

    //document.addform.submit();
    alert($('#lat').val() + ' -- ' + $('#long').val());
} 
```

我的表格：

```
....
<input type="hidden" name="lat" id="lat" />
<input type="hidden" name="long" id="long" />
<a href="javascript:submitme();"> Submit </a> 
```

问题是我第一次点击提交时，经纬度为空（未设置），但第二次点击提交时，它们已设置，这是为什么？为什么它不能在第一次提交调用时设置纬度和经度？

顺便说一句：所有这些参数`str`，`hnr`..它们确实存在并且它们不是空的，但这在这里甚至无关紧要..

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:11:10.950

那是因为`geocoder.geocode`是异步的。您必须在给它的回调中处理结果。

此行必须在回调中：

```
alert($('#lat').val() + ' -- ' + $('#long').val()); 
```

当然，您此时放置的任何行都不能使用正确的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:33:41.727

异步回调，这意味着当您调用 geocodeme 时它会立即返回。在 Google 回复您的请求后调用回调 (function(results, status))。

```
...
            if (status == google.maps.GeocoderStatus.OK) {
                var latitude = results[0].geometry.location.lat();
                var longitude = results[0].geometry.location.lng();
                //alert(latitude + ' - ' + longitude);
                $('#lat').val(latitude);
                $('#long').val(longitude);
                document.addform.submit();
...
// call this function on button click not on submit
function submitme(){
    var adres = str + '+' + hnr + '+' + plz + '+' + stadt + '+' + land;
    var codemeadr = str + ' ' + hnr + ' ' + plz + ' ' + stadt + ' ' + land;         
    geocodeme(codemeadr);
// this function returns immediately, even when geocode is not retrieved yet.
    //document.addform.submit();
    alert($('#lat').val() + ' -- ' + $('#long').val());
} 
```

# grails - grails中tablib中的弹出框

> ID：14562777
> 
> 赞同：0
> 
> 时间：2013-01-28T13:10:05.557
> 
> 标签：grails, popup, taglib

如何在 taglib 中创建自定义是或否警报弹出框消息，同时在 grails 中删除一行。

这是我的代码。

```
 def submitDeleteButtonAttrs=['class':'delete', 'action':'delete','src':'../images/user_delete.png'
                                                ,'value':deleteLabel
                                                ,'formnovalidate':''
                                                ,'onclick':'return confirm('+deleteMessage+');' ]
    def deleteButton=g.actionSubmitImage(submitDeleteButtonAttrs);

    def searchTextHiddenFieldAttrs=['name':'searchText',
                                                'value':searchTextValue]    
    def searchTextHiddenField=g.hiddenField(searchTextHiddenFieldAttrs);

    def advSearchTextHiddenFieldAttrs=['name':'advancedSearchText',
        'value':advancedSearchTextValue];
    def advsearchTextHiddenField=g.hiddenField(advSearchTextHiddenFieldAttrs);

    def searchCriteriaHiddenFieldAttrs=['name':'searchCriteria',
        'value':searchCriteriaValue];
    def searchCriteriaHiddenField=g.hiddenField(searchCriteriaHiddenFieldAttrs);
    def operationAttrs=['name':'searchOperator','value':searchOperatorValue];
    def operationSelectHiddenField= g.hiddenField(operationAttrs);

         def uIDAttrs=['name':'id',
                'value':subscriberForUID[0]];
            def uidField=g.hiddenField(uIDAttrs);

          htmlOutput <<"""<td class="${innerClassName}"><form method="post">${uidField} ${searchTextHiddenField} ${advsearchTextHiddenField} ${deleteButton}</form></td>""" 
```

在此代码中，弹出窗口无法正常工作。

任何人都可以帮助我在上面的代码中犯错的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:15:10.263

如果您不介意，我建议您使用 twitter bootstrap 的模态。放置两个按钮（取消按钮、删除按钮），单击时会将参数传递给控制器​​。 [http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

# c# - C#在自己的构造函数之后调用基类的构造函数？

> ID：14562779
> 
> 赞同：25
> 
> 时间：2013-01-28T13:10:15.100
> 
> 标签：c#, class, inheritance, constructor, superclass

调用自己的构造函数**后**如何调用基类的构造函数？

问题是，基类的构造函数调用了一个抽象方法（在子类中重写），它需要访问变量`x`，在子类的构造函数中初始化？

简短的示例代码：

```
abstract class BaseClass
{
    protected string my_string;

    protected abstract void DoStuff();

    public BaseClass()
    {
        this.DoStuff();
    }
}

class SubClass : BaseClass
{
    private TextBox tb;

    public SubClass()
        : base()
    {
        this.my_string = "Short sentence.";
    }

    protected override void DoStuff()
    {
        // This gets called from base class' constructor
        // before sub class' constructor inits my_string
        tb.Text = this.my_string;
    }
} 
```

**编辑：**根据答案，这显然是不可能的。是否有一种自动化的方式来调用创建`this.DoStuff();`后的每个对象`SubClass`？当然，我可以`this.DoStuff();`在子类的构造函数中添加所有其他行，但是拥有大约 100 个这样的类，感觉很愚蠢。还有其他解决方案，还是我应该使用手动解决方案？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-28T13:15:03.163

你不能。

此外，您通常不应该`virtual`在构造函数中调用方法。看到这个[答案](https://stackoverflow.com/a/119543/870604)。

* * *

根据您的实际代码而不是您编写的简单示例，您可以将值作为基本构造函数和`DoStuff`方法的参数传递。例如：

```
abstract class BaseClass
{
    private string my_string;

    protected abstract void DoStuff(string myString);

    public BaseClass(string myString)
    {
        this.my_string = myString;
        this.DoStuff(this.my_string);
    }
}

class SubClass : BaseClass
{
    private TextBox tb;

    public SubClass()
        : base("Short sentence.")
    {
    }

    protected override void DoStuff(string myString)
    {
        tb.Text = myString;
    }
} 
```

如果您的实际代码无法实现，那么编写多个代码`DoStuff()`就可以完成这项工作。还要记住密封你的`SubClass`类，这样其他人就不能通过`DoStuff`再次修改方法来引入错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T13:14:46.400

我不会在构造函数中调用抽象方法，因为调用该方法的实例的构造函数可能没有执行

*调用虚拟方法时，直到运行时才会选择执行该方法的实际类型。当构造函数调用虚方法时，调用该方法的实例的构造函数可能尚未执行。要修复违反此规则的情况，请不要从类型的构造函数中调用类型的虚方法。*

[http://msdn.microsoft.com/en-us/library/ms182331%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms182331%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-30T07:34:39.343

你不能那样做。但是您可以将主类的启动代码放入单独的初始化方法中。然后，您可以在特定构造函数中调用该方法 > 在构造函数代码之后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-05T16:22:26.773

在构造函数实际运行之前你不能构造一个类有什么原因吗？它需要对如何创建派生类承担更大的责任，这可能不是最佳实践，但它似乎有效。

```
abstract class BaseClass {
    protected string my_string;

    protected abstract void DoStuff();

    public BaseClass() {
        this.DoStuff();
    }
}

class SubClass: BaseClass {
    TextBox tb;

    bool Constructed = false;
    void Constructor() {
        if (!Constructed) {
            Constructed = true;
            this.my_string = "Short sentence.";
        }
    }
    public SubClass()
        : base() {
        Constructor();
    }

    protected override void DoStuff() {
        Constructor();
        // This gets called from base class' constructor
        // before sub class' constructor inits my_string
        tb.Text = this.my_string;
    }
} 
```

# android - “表 X 没有名为 Y 的列”错误将数据插入 SQLite 数据库

> ID：14562789
> 
> 赞同：3
> 
> 时间：2013-01-28T13:11:16.840
> 
> 标签：android, sqlite, sqliteopenhelper

在我的数据库中插入数据时出现错误。

```
01-28 20:59:06.277: I/Database(553): sqlite returned: error code = 1, msg = table tableKo has no column named phone
01-28 20:59:06.309: E/Database(553): Error inserting phone= email= address= name=
01-28 20:59:06.309: E/Database(553): android.database.sqlite.SQLiteException: table tableKo has no column named phone: , while compiling: INSERT INTO tableKo(phone, email, address, name) VALUES(?, ?, ?, ?);
01-28 20:59:06.309: E/Database(553):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
01-28 20:59:06.309: E/Database(553):    at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:91)
01-28 20:59:06.309: E/Database(553):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:64)
01-28 20:59:06.309: E/Database(553):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:80)
01-28 20:59:06.309: E/Database(553):    at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:36)
01-28 20:59:06.309: E/Database(553):    at android.database.sqlite.SQLiteDatabase.compileStatement(SQLiteDatabase.java:1145)
01-28 20:59:06.309: E/Database(553):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1536)
01-28 20:59:06.309: E/Database(553):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1410)
01-28 20:59:06.309: E/Database(553):    at com.example.databasetest.DBHandler.insertData(DBHandler.java:76)
01-28 20:59:06.309: E/Database(553):    at com.example.databasetest.MainActivity.saveButtonHandler(MainActivity.java:39)
01-28 20:59:06.309: E/Database(553):    at java.lang.reflect.Method.invokeNative(Native Method)
01-28 20:59:06.309: E/Database(553):    at java.lang.reflect.Method.invoke(Method.java:521)
01-28 20:59:06.309: E/Database(553):    at android.view.View$1.onClick(View.java:2067)
01-28 20:59:06.309: E/Database(553):    at android.view.View.performClick(View.java:2408)
01-28 20:59:06.309: E/Database(553):    at android.view.View$PerformClick.run(View.java:8816)
01-28 20:59:06.309: E/Database(553):    at android.os.Handler.handleCallback(Handler.java:587)
01-28 20:59:06.309: E/Database(553):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-28 20:59:06.309: E/Database(553):    at android.os.Looper.loop(Looper.java:123)
01-28 20:59:06.309: E/Database(553):    at android.app.ActivityThread.main(ActivityThread.java:4627)
01-28 20:59:06.309: E/Database(553):    at java.lang.reflect.Method.invokeNative(Native Method)
01-28 20:59:06.309: E/Database(553):    at java.lang.reflect.Method.invoke(Method.java:521)
01-28 20:59:06.309: E/Database(553):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-28 20:59:06.309: E/Database(553):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-28 20:59:06.309: E/Database(553):    at dalvik.system.NativeStart.main(Native Method) 
```

我使用一个单独的类来扩展 SQLiteOpenHelper 来处理我的数据库。我已经在互联网上搜索以了解我的表如何没有列名这是我的代码：我的主类

```
package com.example.databasetest;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;

public class MainActivity extends Activity {

    EditText nameET;
    EditText addressET;
    EditText phoneET;
    EditText emailET;

    String name;
    String address;
    String phone;
    String email;

    DBHandler handler;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        nameET = (EditText)findViewById(R.id.nameET);
        addressET = (EditText)findViewById(R.id.addressET);
        phoneET = (EditText)findViewById(R.id.phoneET);
        emailET = (EditText)findViewById(R.id.emailET);

        name = nameET.getText().toString();
        address = addressET.getText().toString();
        phone = phoneET.getText().toString();
        email = emailET.getText().toString();
        handler = new DBHandler(this);
    }
    public void saveButtonHandler(View v) { 
        handler.insertData(name, address, phone, email);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

这是我的数据库处理程序类

```
package com.example.databasetest;

import android.content.ContentValues;
import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBHandler {

    public static final String TABLE_NAME = "tableKo";
    public static final String DATABASE_NAME = "databaseKo";
    private static final int DATABASE_VERSION = 1;
    private static final String TAG = "DBHandler";

    public static final String COL_ID = "_id";
    public static final String COL_NAME = "name";
    public static final String COL_ADDRESS = "address";
    public static final String COL_PHONE = "phone";
    public static final String COL_EMAIL = "email";

    private final Context context;
    private SQLiteDatabase db;
    private MySQLiteOpenHelper DBHelper;

    private static final String CREATE_DATABASE ="create table "
            + TABLE_NAME + "(" + COL_ID
            + " integer primary key, " + COL_NAME
            + " text not null, " + COL_ADDRESS + "text not null,"
            + COL_PHONE + "text not null," + COL_EMAIL + "text not null);";
    public DBHandler(Context ctx) {
        this.context = ctx;
        DBHelper = new MySQLiteOpenHelper(context);
    }
    private static class MySQLiteOpenHelper extends SQLiteOpenHelper{
        public MySQLiteOpenHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }
        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            try {
                db.execSQL(CREATE_DATABASE);
              } catch (SQLException e) {
                e.printStackTrace();
              } 
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            Log.w(TAG, oldVersion + " to " + newVersion
                    + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
            onCreate(db);
        }

    }
    public DBHandler open() throws SQLException {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        DBHelper.close();
    }
    public void insertData (String name, String address, String phone, String email) {
        open();
        ContentValues values = new ContentValues();
        values.put(COL_NAME, name);
        values.put(COL_ADDRESS, address);
        values.put(COL_PHONE, phone);
        values.put(COL_EMAIL, email);

        db.insert(TABLE_NAME, null, values);
        //db.execSQL("Insert into " +TABLE_NAME+ " VALUES('"+COL_ID+"','"+name+"','"+address+"','"+phone+"','"+email+"');");
        db.close();
    }
} 
```

我的代码有什么问题？在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T13:12:58.350

你错过了一个空间：

代替

```
COL_PHONE + "text not null," 
```

采用

```
COL_PHONE + " text not null," 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-28T21:43:09.757

这个问题通常可以通过删除设备上的应用程序并重新安装来解决。首先检查代码中的列名与数据库中的列名，如果它们不匹配，则意味着您仍然拥有数据库的旧副本您进行更改后未更改的设备。

# c# - 如何为文本文件制作自定义解析器

> ID：14562790
> 
> 赞同：0
> 
> 时间：2013-01-28T13:11:20.960
> 
> 标签：c#, asp.net, regex

实际上我使用数据表设置了四列，我希望该列从文本文件中检索值。我使用正则表达式从文本文件中删除特定行。

我的目标是我想使用数据表在网格上显示文本文件，所以首先我尝试使用正则表达式创建数据表并删除行（在程序中显示）。

在这里，我发布了我的完整代码。

```
namespace class
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        { 
            StreamReader sreader = File.OpenText(@"C:\FareSearchRegex.txt");
            string line;
            DataTable dt = new DataTable();
            DataRow dr;
            dt.Columns.Add("PTC");
            dt.Columns.Add("CUR");
            dt.Columns.Add("TAX");
            dt.Columns.Add("FARE BASIS");
            while ((line = sreader.ReadLine()) != null)
            {
                var pattern = "---------- RECOMMENDATION 1 OF 3 IN GROUP 1 (USD 168.90)----------";
                var result = Regex.Replace(line,pattern," ");
                dt.Rows.Add(line);    
            }
        }
    }

    class Class1
    {
        string PTC;
        string CUR;
        float TAX;

        public string gsPTC
        {
            get{ return PTC; }
            set{ PTC = value; }
        }

        public string gsCUR
        {
            get{ return CUR; }
            set{ CUR = value; }
        }

        public float gsTAX
        {
            get{ return TAX; }
            set{ TAX = value; }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:23:26.717

如果您的格式是严格的（例如总是 4 列）并且您只想删除这一完整行，我认为没有任何理由使用正则表达式：

```
var rows = File.ReadLines(@"C:\FareSearchRegex.txt")
    .Where(l => l != "---------- RECOMMENDATION 1 OF 3 IN GROUP 1 (USD 168.90)----------")
    .Select(l => new { line = l, items = l.Split(','), row = dt.Rows.Add() });
foreach (var x in rows)
    x.row.ItemArray = x.items; 
```

（假设字段用逗号分隔）

**编辑**：这适用于您的 pastebin：

```
string header = "  PTC       CUR                 TAX           FARE BASIS";
bool takeNextLine = false;
foreach (string line in File.ReadLines(@"C:\FareSearchRegex.txt"))
{
    if (line.StartsWith(header))
        takeNextLine = true;
    else if (takeNextLine)
    {
        var tokens = line.Split(new[] { @"   " }, StringSplitOptions.RemoveEmptyEntries);
        dt.Rows.Add().ItemArray = tokens.Where((t, i) => i != 2).ToArray();
        takeNextLine = false;
    }
} 
```

（因为您有一个要从结果中排除的空列，所以我使用了笨拙且可能容易出错（？）的查询`Where((t, i) => i != 2)`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:12:05.007

要解析文件，您需要：

1.  将文件的文本拆分为数据块。在您的情况下，一个块可以通过标题`PTC CUR TAX FARE BASIS`和`TOTAL`行来识别。要拆分文本，您需要按如下方式标记输入>（i）定义一个正则表达式以匹配标题，（ii）定义一个正则表达式以匹配`Total`行（页脚）；使用 (i) 和 (ii) 您可以按外观索引的顺序连接它们并确定每个块的总大小（参见`(x,y)=>new{StartIndex = x.Match.Index, EndIndex = y.Match.Index + y.Match.Length})`下面的行）。使用`String.Substring`方法来分离块。

2.  从每个单独的块中提取数据。知道数据是按行拆分的，您只需遍历块中的所有行（忽略页眉和页脚）并处理每一行。

这段代码应该有帮助：

```
string file = @"C:\FareSearchRegex.txt";
string text = File.ReadAllText(file);
var headerRegex = new Regex(@"^(\)>)?\s+PTC\s+CUR\s+TAX\s+FARE BASIS$", RegexOptions.IgnoreCase | RegexOptions.Multiline);
var totalRegex = new Regex(@"^\s+TOTAL[\w\s.]+?$",RegexOptions.IgnoreCase | RegexOptions.Multiline);
var lineRegex = new Regex(@"^(?<Num>\d+)?\s+(?<PTC>[A-Z]+)\s+\d+\s(?<Cur>[A-Z]{3})\s+[\d.]+\s+(?<Tax>[\d.]+)",RegexOptions.IgnoreCase | RegexOptions.Multiline);
var dataIndices = 
    headerRegex.Matches(text).Cast<Match>()
        .Select((m, index) => new{ Index = index, Match = m })
        .Join(totalRegex.Matches(text).Cast<Match>().Select((m, index) => new{ Index = index, Match = m }),
            x => x.Index,
            x => x.Index,
            (x, y) => new{ StartIndex = x.Match.Index, EndIndex = y.Match.Index + y.Match.Length });
var items = dataIndices
    .Aggregate(new List<string>(), (list, x) =>
    {
        var item = text.Substring(x.StartIndex, x.EndIndex - x.StartIndex);
        list.Add(item);
        return list;
    });

var result = items.SelectMany(x => 
{
    var lines = x.Split(new string[]{Environment.NewLine, "\r", "\n"}, StringSplitOptions.RemoveEmptyEntries);
    return lines.Skip(1) //Skip header
        .Take(lines.Length - 2) // Ignore footer
        .Select(line =>
        {
            var match = lineRegex.Match(line);
            return new
            {
                Ptc = match.Groups["PTC"].Value,
                Cur = match.Groups["Cur"].Value,
                Tax = Convert.ToDouble(match.Groups["Tax"].Value)
            };
        });
}); 
```

# c# - 如何将我的 c# 程序作为计划任务运行

> ID：14562792
> 
> 赞同：7
> 
> 时间：2013-01-28T13:11:33.253
> 
> 标签：c#, .net

我对 c# 还是很陌生，所以你必须忍受我。

我开发了一个 Windows 窗体程序，它更新一些 SQL 记录作为我们的一个客户的一天结束的过程。

下一步是我需要将程序安装在服务器上，并在程序中模拟一个按钮点击，变成一个定时任务。

我知道如何在启动程序并输入参数的服务器端设置任务。但我不确定我需要在我的程序中包含哪些代码来实现这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T13:12:56.653

考虑使用[Windows 任务计划程序](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa383614%28v=vs.85%29.aspx)。

您可以将您的业务逻辑提取到一个单独的 DLL 并编写一个简单的控制台应用程序，该应用程序将在通过命令行接受参数后运行您的任务。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-28T13:13:50.273

我的建议是不要从计划任务中运行基于 GUI/窗口的应用程序——这在实践中通常是疯狂的。理想情况下，部署一个基于控制台的应用程序版本，该版本需要执行（可能带有参数参数）并且不需要任何用户（或准用户）交互。

如果您根本*无法*创建应用程序的“系统版本”，那么我想您有两个选择，两者都非常丑陋：1）创建某种宏脚本而不是您的程序执行，该脚本可以执行程序并发出“点击”，2）通过调用按钮点击处理程序在您的应用程序启动时执行“点击”（可能基于一个参数，使其在执行模式中具有双重性。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T13:16:35.570

我认为您也在询问命令行参数传递。[请参阅此问题](https://stackoverflow.com/questions/491595/best-way-to-parse-command-line-arguments-in-c)的答案。

特别是，我强烈推荐[接受的答案](https://stackoverflow.com/a/2067916/12570)：[NDesk.Options](http://www.ndesk.org/Options)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-06T10:03:36.613

如果它是一个windows应用程序，只需转到bin文件夹，获取可执行文件，最后使用windows schedule task为其安排一个任务，并选择exe文件作为您的目标应用程序。

如果它是 Web 应用程序，您可能希望将您的代码包含在 quartz.net 计划的作业中，详细信息在quartz.net 网站上。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T13:14:46.463

非常流行的解决方案是 Quartz.NET [http://quartznet.sourceforge.net/](http://quartznet.sourceforge.net/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-28T13:19:48.137

我有类似的任务要做winforms作为windows任务。我所做的是

在`windows task scheduler`中`task tab`，`Run`下放你的exe然后/自动，它将按计划运行。

示例：winform.exe /Auto

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-28T13:19:48.180

如果我正确理解了您的问题，那么您可能会这样做：

*   [在 C# 中解析命令行参数的最佳方法是什么？](https://stackoverflow.com/questions/491595/best-way-to-parse-command-line-arguments-in-c)-> 检查答案并选择一个库来处理 args 或编写您自己的代码来执行此操作。
*   如果存在这些参数，则通过[创建计划任务创建计划任务](https://stackoverflow.com/questions/7394806/creating-scheduled-tasks)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-28T13:13:01.753

看看 Timer 类
[http://msdn.microsoft.com/en-us/library/system.timers.timer(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer(v=vs.110).aspx)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-28T13:26:18.057

为什么不将数据库更新逻辑提取为[Windows 服务](http://msdn.microsoft.com/en-us/library/d56de412%28v=vs.80%29.aspx)

您可以将 sql 处理部分分开，并为您的表单应用程序和 Windows 服务`DLL`使用公共部分。`DLL`

一个窗口服务在后台运行，可以在计算机启动时自动启动，可以暂停和重新启动，并且不显示任何用户界面。

此外，您无需安装任何第三方软件，并且可以将窗口服务代码库移植到`.Net Framework`安装了所需版本的任何 Windows 机器上。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-07-30T07:48:30.223

添加参考： `Microsoft.Win32.TaskScheduler`
然后编写以下代码：

```
using (TaskService ts = new TaskService())
Microsoft.Win32.TaskScheduler.Task task = ts.GetTask(TaskName); 
task.Run(); //start
task.Stop(); //End 
```

# javascript - javascript中的ascii键码问题

> ID：14562795
> 
> 赞同：0
> 
> 时间：2013-01-28T13:11:41.143
> 
> 标签：javascript

我在 javascript 中看到了一个奇怪的问题，或者可能是因为 javascript 对我来说是新的。

我试图在 onkeypress 时允许一些操作，但仅在按下字母数字或特殊字符时。这是我的代码：

```
if(e.keyCode>=32 && e.keyCode<=126 ){
    alert(e.keyCode);}
} 
```

如果我按下任何特殊字符键，它不会发出警报，比如`{,]>.`我在这里遗漏了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:18:16.233

`keyCode`逗号 ( ) 是 188。这`,`可能是为什么？

[http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:28:05.140

您假设这`keyCode`会给您一个 ASCII 索引，但[事实并非如此](https://developer.mozilla.org/en-US/docs/DOM/event.keyCode)。由于此假设，您的范围标准不正确。

[MDN 说：](https://developer.mozilla.org/en-US/docs/DOM/event.keyCode)

> **在一个`keypress`事件中，按下的键的 Unicode 值存储在`keyCode`or`charCode`属性中，而不是两者。**如果按下的键生成一个字符（例如'a'），`charCode`则设置为该字符的代码，尊重字母大小写。（即`charCode`考虑是否按住shift键）。否则，按键的代码存储在`keyCode`.
> 
> `keyCode`始终在 keydown 和 keyup 事件中设置。在这些情况下，永远不会设置 charCode。
> 
> **要获取密钥的代码，无论它是否存储在`keyCode`or`charCode`中，请查询 which 属性。**
> 
> **有关与特定键关联的 keyCode 值的列表，请运行[示例 7：显示事件对象常量](https://developer.mozilla.org/en-US/docs/Gecko_DOM_Reference/Examples#Example_7:_Displaying_Event_Object_Constants)中的示例并查看生成的 HTML 表。**

按照指示进行操作表明您的某些“特殊”字符超出了您指定的范围限制。

Kevin 还指出了[这个有用的表格](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)，但您最好使用[更规范的](https://stackoverflow.com/a/6474860/560648) [按键处理](https://stackoverflow.com/a/4285801/560648)方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T13:36:11.587

您需要`which`在大多数浏览器和`keyCode`IE 中使用该属性。您确实有正确的事件：仅`keypress`当您对键入的字符而不是按下的物理键感兴趣时才会这样做。

这是我最喜欢的参考资料：http: [//unixpapa.com/js/key.html](http://unixpapa.com/js/key.html)

```
document.onkeypress = function(e) {
    e = e || window.event;
    var charCode = (typeof e.which == "number") ? e.which : e.keyCode;
    var charTyped = String.fromCharCode(charCode);

    alert("Character typed: " + charTyped);
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T13:49:25.263

您应该使用`which`，它应该可以在 Firefox 和 Chrome 中使用。

试试这个：

```
document.onkeypress = function(e) {
    console.log(e.keyCode + " -- " + e.which + " -- " + e.charCode);

    if(e.which >= 32 && e.which <= 126 ){
        alert(e.which);
    }
}; 
```

# android - 谷歌播放服务问题

> ID：14562797
> 
> 赞同：1
> 
> 时间：2013-01-28T13:11:48.027
> 
> 标签：android, google-play-services

我正在为外国客户开发一个 Android 应用程序，该应用程序必须为用户提供直接访问 Google play 杂志以购买杂志的权限，问题是 Google play 杂志在我的国家/地区不可用，我必须先运行测试在 Google Play 商店中发布应用程序。

所以我怎么能从我的国家访问这个杂志商店，这个访问只是为了测试而不是为了购买杂志

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:15:04.917

在这些情况下，您的客户应该为您提供有限的 VPN 访问权限，这样您就只能通过他们的网关访问他们的 Intranet。

作为替代方案，您可以使用一些代理服务，您的请求显示为网关的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:19:22.597

在您的手机上安装**SuperSU**，即使您所在的国家/地区不允许，它也可以访问所有 google play 内容。[https://play.google.com/store/apps/details?id=eu.chainfire.supersu&hl=en](https://play.google.com/store/apps/details?id=eu.chainfire.supersu&hl=en)

您的手机需要**ROOTED**。

在此处查找您的移动根说明：http: [//forum.xda-developers.com/](http://forum.xda-developers.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:08:18.100

您可以定义一个新代理（这里有一些示例 -> [http://www.free-proxy.fr/](http://www.free-proxy.fr/)）。
这个想法是让谷歌相信你在美国。

使用该解决方案，无需root

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-07T23:53:57.950

你可以使用这个网站[http://www.serversproxy.net/](http://www.serversproxy.net/)非常有用。您可以取消阻止热门网站，例如 YouTube、Facebook、MySpace 和许多其他网站。

# c - GCC 中如何维护递归调用栈？

> ID：14562800
> 
> 赞同：-9
> 
> 时间：2013-01-28T13:12:05.517
> 
> 标签：c, gcc, compiler-construction

GCC 如何确保堆栈不溢出？它不应该检查 Size 是否小于它可以保留的 MAX 并相应地提示用户，尤其是当它被隐式定义时？这不是一个很好的编程范例吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T13:13:23.420

它没有。如果递归足够深，**就会**溢出，编译器对此无能为力。

* * *

> **编辑**：我应该指出，在我回答这个问题时，问题只是简单地说：
> 
> “GCC 如何确保堆栈不溢出？”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:45:47.137

Linux 使用“警戒区”。它在每个线程的堆栈末尾放置一个或多个访问保护页。

如果程序访问保护区，则操作系统处理故障。如果线程已经在使用它的最大允许堆栈，那么它会终止某些东西（线程或整个进程，我不记得是哪个）。否则，它会尝试将内存映射到保护区占用的地址以用作堆栈，并保护新扩大的堆栈末尾之外的新区域。

提示用户并不真正适合像 Linux 这样的操作系统，其中许多进程不受用户监控，因此在问题出现时可能没有任何登录用户。所以你的过程失败了。由于它是一个通用编译器，gcc 也不会尝试运行时用户交互。

其他操作系统和平台可能有也可能没有堆栈保护页面（Windows 有）。gcc 真正需要做的就是确保如果堆栈将被超出，它不会因为向前跳很长的路而“错过”保护页面。

# jena - Jena 在添加实例后更改了我的 owl 文件

> ID：14562810
> 
> 赞同：1
> 
> 时间：2013-01-28T13:12:34.950
> 
> 标签：sparql, jena, owl, protege

我有一个用 protege 4.2 创建的 owl 文件。当我使用 Jena 添加一些实例时，Jena 更改了文件结构，但文件扩展名保持不变（.owl），该文件在 protege 中是可读的，但有一些错误。任何人都知道我的代码的问题在哪里？

因为在使用 Jena 进行编辑后，[sparql](/questions/tagged/sparql "显示标记为“sparql”的问题")查询的结果有点奇怪。

例如，在使用 Jena 进行编辑之前

```
 <owl:NamedIndividual rdf:about="&ontologies;thesis_ontology_1try#AM6">
    <rdf:type rdf:resource="&ontologies;thesis_ontology_1try#ApplicationModel"/>
    <hasID rdf:datatype="&xsd;string">20125157-d62b-45de-8809-84186c7169b5AM6</hasID>
    <name rdf:datatype="&xsd;string">GebÃ¤udemodell / Buildingmodel</name>
    <hasContent rdf:resource="&ontologies;cpixml"/>
    <hasLevelOfDetail rdf:resource="&ontologies;thesis_ontology_1try#4"/>
    <hasDomain rdf:resource="&ontologies;thesis_ontology_1try#BIM"/>
    <hasType rdf:resource="&ontologies;thesis_ontology_1try#Object"/>
    <hasPhase rdf:resource="&ontologies;thesis_ontology_1try#SLCT"/>
    <hasContent rdf:resource="&ontologies;thesis_ontology_1try#ifc"/>
</owl:NamedIndividual> 
```

耶拿之后

```
<rdf:Description rdf:about="http://www.semanticweb.org/thato/ontologies/2012/10/9/thesis_ontology_1try#AM6">
<hasContent rdf:resource="http://www.semanticweb.org/thato/ontologies/2012/10/9/cpixml"/>
<rdf:type rdf:resource="http://www.w3.org/2002/07/owl#NamedIndividual"/>
<hasDomain rdf:resource="http://www.semanticweb.org/thato/ontologies/2012/10/9/thesis_ontology_1try#BIM"/>
<hasType rdf:resource="http://www.semanticweb.org/thato/ontologies/2012/10/9/thesis_ontology_1try#Object"/>
<hasID rdf:datatype="http://www.w3.org/2001/XMLSchema#string">20125157-d62b-45de-8809-84186c7169b5AM6</hasID>
<hasPhase rdf:resource="http://www.semanticweb.org/thato/ontologies/2012/10/9/thesis_ontology_1try#SLCT"/>
<rdf:type rdf:resource="http://www.semanticweb.org/thato/ontologies/2012/10/9/thesis_ontology_1try#ApplicationModel"/>
<hasContent rdf:resource="http://www.semanticweb.org/thato/ontologies/2012/10/9/thesis_ontology_1try#ifc"/>
<name rdf:datatype="http://www.w3.org/2001/XMLSchema#string">GebÃ¤udemodell / Buildingmodel</name>
<hasLevelOfDetail rdf:resource="http://www.semanticweb.org/thato/ontologies/2012/10/9/thesis_ontology_1try#4"/>
<rdf:type rdf:nodeID="A28"/>
<rdf:type rdf:resource="http://www.w3.org/2002/07/owl#Thing"/>
<rdf:type rdf:nodeID="A29"/>
<rdf:type rdf:nodeID="A30"/>
<rdf:type rdf:nodeID="A31"/>
<rdf:type rdf:nodeID="A32"/>
<rdf:type rdf:resource="http://www.w3.org/2000/01/rdf-schema#Resource"/>
<rdf:type rdf:nodeID="A33"/>
<rdf:type rdf:nodeID="A34"/>
<rdf:type rdf:nodeID="A12"/>
<rdf:type rdf:nodeID="A15"/>
<rdf:type rdf:nodeID="A35"/>
<rdf:type rdf:nodeID="A5"/>
<Linkedby rdf:resource="http://www.semanticweb.org/thato/ontologies/2012/10/9/thesis_ontology_1try#LM2"/>
<isAMof rdf:resource="http://www.semanticweb.org/thato/ontologies/2012/10/9/thesis_ontology_1try#MMC2"/> 
```

这是代码

```
public static void main(String[] args) throws IOException {
InputStream in = FileManager.get().open("./src/thesis_ontology_1try.owl");
OntModel model = ModelFactory.createOntologyModel(OntModelSpec.OWL_MEM_MICRO_RULE_INF, null);
model.read(in, null);
in.close();

String NS = "http://www.semanticweb.org/thato/ontologies/2012/10/9/thesis_ontology_1try#";
OntClass ApplicationModel = model.getOntClass(NS + "ApplicationModel");

Individual dom = model.getIndividual(NS + "RFP");
Individual pha = model.getIndividual(NS + "SLCT");
Individual lev =  model.getIndividual(NS + "3");

Individual new1 = model.createIndividual(NS + "new1", ApplicationModel);  

ObjectProperty domain = model.createObjectProperty(NS +"hasDomain");
ObjectProperty phase = model.createObjectProperty(NS +"hasPhase");
ObjectProperty lod = model.createObjectProperty(NS +"hasLevelOfDetail");

model.add(new1, domain, dom);
model.add(new1, phase, pha);
model.add(new1, lod, lev);

PrintStream p= new PrintStream("./src/thesis_ontology_1try.owl");
model.writeAll(p, "RDF/XML", null);
p.close();

System.out.println("Done");

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T14:58:49.083

```
model.writeAll(p, "RDF/XML", null); 
```

试试漂亮的打印机“RDF/XML-ABBREV”。

但无论哪种方式，它都是相同的三元组，不同的写法，这才是最重要的。

# ruby-on-rails - 没有在 Rails 3 中保存我的 seed.rb 文件中的第一个种子数据

> ID：14562814
> 
> 赞同：0
> 
> 时间：2013-01-28T13:12:48.100
> 
> 标签：ruby-on-rails, seed

我想知道为什么即使语法确实正确，也没有保存作为代理的第一个数据。

请看我的种子文件：

分贝/种子.rb

```
Agency.delete_all
puts "Creating agency: agency@example.com..."
Agency.create(email: 'agency@example.com', password: 'password')
puts "Done!\n\n"

Admin.delete_all
puts "Creating admin: admin@example.com..."
Admin.new
Admin.create(email: 'admin@example.com', password: 'password')
puts "Done!\n\n" 
```

当我进入控制台并点击`User.all`

仅保存了最后一个数据，即**“管理员”**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T04:13:53.557

感谢您的所有建议...

我尝试删除它`delete_all`并且它有效。

对不起，这样的新手问题。

# java - 为 Apache POI 设置路径

> ID：14562817
> 
> 赞同：1
> 
> 时间：2013-01-28T13:12:53.797
> 
> 标签：java, linux, apache-poi

我想创建excel文件并使用java程序在该文件中写入数据。

就是在[这里](http://www.techbrainwave.com/?p=554)，我在存在 java 文件的位置提取了 Apache POI。并将该路径包含在路径变量中。

当我尝试编译它时给出以下错误：

```
data.java:3: package org.apache.poi.hssf.usermodel does not exist
import org.apache.poi.hssf.usermodel.HSSFCell;
                                    ^
data.java:4: package org.apache.poi.hssf.usermodel does not exist
import org.apache.poi.hssf.usermodel.HSSFCellStyle;
                                    ^
data.java:5: package org.apache.poi.hssf.usermodel does not exist
import org.apache.poi.hssf.usermodel.HSSFRichTextString;
                                    ^
data.java:6: package org.apache.poi.hssf.usermodel does not exist
import org.apache.poi.hssf.usermodel.HSSFRow;
                                    ^
data.java:7: package org.apache.poi.hssf.usermodel does not exist
import org.apache.poi.hssf.usermodel.HSSFSheet;
                                    ^
data.java:8: package org.apache.poi.hssf.usermodel does not exist
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
                                    ^
data.java:11: package org.apache.poi.hssf.usermodel does not exist
import org.apache.poi.hssf.usermodel.HSSFFont;
                                    ^
data.java:12: package org.apache.poi.ss.usermodel does not exist
import org.apache.poi.ss.usermodel.IndexedColors;
                              ^ 
```

这是 Poi 文件列表。在这个列表中我必须包括哪一个？

```
root@:[/u01/isac/code/CWSA/isac/java/exportAPI/poi-3.9]

$ ll    

total 9044    

-rw-r--r--  1 root root   27138 Nov 25 15:23 LICENSE    
-rw-r--r--  1 root root     890 Nov 25 15:23 NOTICE    
drwxr-xr-x 16 root root    4096 Nov 26 17:22 docs    
drwxr-xr-x  2 root root    4096 Nov 26 17:22 lib    
drwxr-xr-x  2 root root    4096 Nov 26 17:22 ooxml-lib    
-rw-r--r--  1 root root 1869113 Nov 26 17:22 poi-3.9-20121203.jar    
-rw-r--r--  1 root root  309368 Nov 26 17:22 poi-examples-3.9-20121203.jar    
-rw-r--r--  1 root root   30446 Nov 26 17:22 poi-excelant-3.9-20121203.jar    
-rw-r--r--  1 root root  936648 Nov 26 17:22 poi-ooxml-3.9-20121203.jar    
-rw-r--r--  1 root root 4802621 Nov 26 17:22 poi-ooxml-schemas-3.9-20121203.jar    
-rw-r--r--  1 root root 1226511 Nov 26 17:22 poi-scratchpad-3.9-20121203.jar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:23:52.067

您应该在javac的*-cp*选项中指定 jar 位置：

```
javac -cp /path/to/your/jar/poi-<version>.jar data.java 
```

此外，您可能希望使用构建工具来管理您的依赖关系，例如[maven](http://maven.apache.org)或[ivy](http://ant.apache.org/ivy/)用于 ant。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:18:34.593

您必须将 jar 文件（poi lib）放在类路径中，而不是与 data.java 相同的目录。（顺便说一句，它应该是 Data.java）。因为你很可能有自己的包结构，比如`com.myapp`.

并且PATH变量与java类路径无关。如果设置或取消设置它没有区别。

# c++ - C++ 的 Web 服务/SOAP

> ID：14562825
> 
> 赞同：1
> 
> 时间：2013-01-28T13:13:22.873
> 
> 标签：c++, web-services, soap, axis2c

我花了很多时间试图找到一个好的开源工具来将 web 服务与 c/c++ 集成。

*   GSOAP：我不能使用它，因为许可证，如果您使用它的工具通过 WSDL 生成代码，则无法使用 GPL 许可证。

*   WWSAPI：仅适用于 Windows 的 Appart，如果您仔细阅读文档，当您需要可再发行组件时，您必须邮寄到 Microsoft 电子邮件，所以，我想我也应该付费。

*   Axis2C：项目没有维护（根本没有），如果你想使用 wsdl 编码工具，你会遇到很多内存泄漏。

在这里阅读其他帖子，有人在谈论axis2c，但使用SVC客户端API而不是生成代码工具。我正在使用它，它可以工作，但我的问题是，值得使用 SVC 客户端 API，而不是开发自己的套接字，在 xml 之前设置信封？我不是 SOAP 专家，SVC 客户端 API 可以节省我的时间吗？它的带有 SVC 客户端 API 的 AXIS2c 隐藏了更多的 WebServices 概念，如果我手动制作，我应该实现这些概念吗？

提前致谢！

# java - 如何从 64 位 Eclipse 构建 32 位 Eclipse 插件应用程序

> ID：14562830
> 
> 赞同：5
> 
> 时间：2013-01-28T13:13:30.937
> 
> 标签：java, eclipse

我安装了 64 位 Eclipse Indigo，我尝试使用产品导出向导将我的应用程序导出为可执行文件，一切正常。除了它生成的可执行文件是 64 位可执行文件，我需要它在 32 位机器上运行. 有没有办法解决这个问题？

甚至可以从 64 位 Eclipse 构建 32 位插件应用程序吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T13:20:52.770

我用于类似问题的解决方案（从 Eclipse 4 构建基于 Eclipse 3 框架的应用程序）是定义一个目标。这是如何做到的：

1.  同时安装 Eclipse 32 和 Eclipse 64
2.  启动你的 Eclipse 64
3.  进入Window/Preferences/Plug-in Development/Target Platform
4.  单击“添加”，然后单击“无”
5.  单击“添加”然后单击“安装”并选择您的 Eclipse 32 目录
6.  创建目标后，选择它（仍在 Window/Preferences/Plug-in Development/Target Platform 中）

现在，在您的 .product 中，“Eclipse Product Export Wizard”将构建一个 Eclipse 32 位可执行文件。

[请参阅此相关答案](https://stackoverflow.com/questions/11523187/switch-perspective-in-a-rcp-application-since-eclipse-juno)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T13:54:28.397

为了将您的应用程序导出到多个平台，32 位和 64 位，您需要首先定义一个目标平台，然后在其中安装所谓的“ [delta pack](http://download.eclipse.org/eclipse/downloads/drops4/R-4.2.1-201209141800/#DeltaPack) ”。

> 增量包包含来自 SDK 的所有平台特定资源，用于 RCP 应用程序的跨平台导出。

[这](http://ugosan.org/eclipse-rcp-delta-pack/)是有关如何安装 deltapack 的教程（请注意将目标平台版本与 deltapack 版本匹配）。另一件重要的事情：您的工作区 eclipse 安装和目标平台安装不能相同。我的意思是它们可以并且大多数时候是相同的 eclipse 变体/版本，但是为了正确导出多平台项目，您不能使用正在运行的平台作为目标。

安装 deltapack 并重新加载目标平台后，导出产品向导将显示一个附加复选框“为多个平台构建”。如果您选中它，单击下一步将带您进入一个新步骤，您可以在其中选择 Eclipse 支持的任何架构/操作系统。

更多关于目标平台和 deltapakc 的内容包含在 L.Vogel 的总是很好但有点过时 的[教程](http://www.vogella.com/articles/Eclipse3RCP/article.html#deployment_deltapack)中。

# ruby - 如何使用从数据库中获取数据来创建 XML

> ID：14562832
> 
> 赞同：0
> 
> 时间：2013-01-28T13:13:42.607
> 
> 标签：ruby, xml, ruby-on-rails-3

我正在从数据库中获取数据并以 XML 格式发送响应，如下所示。

我想将数据提取到数组或散列中，然后响应 xml.. 或创建直接 xml..

请参考下面的xml示例...

```
<Response>
    <Tolls>
        <Toll>
            <Id>123</Id>
            <Name>Bradfield Highway</Name>
            <Address>Bradfield Highway, New York</Address>
            <Charge>5.95</Charge>
            <Location lat="41.145556" lng="-73.995"/>
               <EntryRects>
                 <EntryRect>
                   <Points>
                      <Point lat="41.145556" lng="-73.995"/>
                      <Point lat="41.145556" lng="-73.995"/>
                      <Point lat="41.145556" lng="-73.995"/>
                      <Point lat="41.145556" lng="-73.995"/>
                   </Points>
                 </EntryRects>
                 ...
               </EntryRects>
         </Toll>
        <Toll>
            ...
        </Toll>
        ...
    </Tolls>
</Response> 
```

如果有人知道，请尽快给我回复...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:55:39.687

您没有说您使用的是什么数据库，但许多人可以为您生成 XML 作为查询的结果，而不是返回正常的“选择”语句的输出。这将是最快/最简单的路径，因为无论如何数据都必须返回到您的应用程序，因此让 DBM 即时进行转换。

第二个最简单的方法是使用像[Nokogiri](http://nokogiri.org)、 Builder 或其他几个 gem 之一。他们可以处理非 ASCII 字符的编码，指定正确的标头，并确保嵌套和标签闭包是正确的。这就是人们使用这些工具的原因，因为它们节省了大量的编码。

最后的选择应该是尝试自己做。仅仅因为您提出了这个问题，我怀疑您并不真正了解创建格式良好的 XML 的内容。*可以*使用诸如 ERB 或 HAML 之类的东西来帮助嵌套生成微不足道的 XML 输出，但编码将直接落在您身上。如果您坚持这样做，请开始阅读 Stack Overflow 页面右侧的所有相关链接，以及您可以找到的任何 XML 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:32:08.640

您应该使用[Builder::XmlMarkup](http://builder.rubyforge.org/)，它提供了一种创建 XML 标记和数据结构的简单方法

# html - 将跨度和图像垂直居中在 div 内

> ID：14562838
> 
> 赞同：0
> 
> 时间：2013-01-28T13:14:00.157
> 
> 标签：html, css

如何在此处垂直居中跨度和图像？

```
<div id="foo">
  <span>Im great</span>
  <image src="">
</div>

div {
  height:350px; 
  background:yellow;
}
div span{
  line-height: 350px;
  background: red;
} 
```

[演示](http://codepen.io/anon/pen/LlCyj)

当我删除图像时，跨度居中，但如果我添加图像，跨度不再居中..为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:24:33.293

这似乎有效

```
<div id="foo">
<span style="vertical-align:middle;">Im great</span>
<image style="vertical-align:middle;" src="http://t2.gstatic.com/images?q=tbn:ANd9GcROD-0j3FBYzU2dxJMpps3ZWiYl0dKoEdt1EE4c5zVHtPfhyw_59q4WEX2S">
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:20:08.690

将它们包装在一个 div 中，然后使用以下内容：

HTML：

```
<div id="foo">
    <div class="wrapper">
      <span>Im great</span>
      <image src="">
    </div>
</div> 
```

CSS：

```
#foo{
  position: relative;
}
.wrapper{
    position: absolute;
    margin: auto;
    top: 0;
    bottom: 0;
} 
```

如果你想完全居中，你可以添加：`left: 0`, `right: 0`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:22:19.470

[http://cdpn.io/yvanH](http://cdpn.io/yvanH)

在 span 之后添加`<br />`标签让 img 在 span 下面流动

# xslt - 使用 xslt 树明智地获取 xml 属性值

> ID：14562839
> 
> 赞同：0
> 
> 时间：2013-01-28T13:14:09.083
> 
> 标签：xslt

这是我的 xml 文件：

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="try.xsl"?>
<oneday>
    <team1 id="1" team="India">
        <team2 id="2" team="gujarat">
            <team3 id="3" team="guj11"></team3>
        </team2>
    </team1>
</oneday> 
```

这是我的 xsl 文件：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
<xsl:output method="text" />

<xsl:template match="*">
        <xsl:value-of select="local-name()"/>

        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="text()[normalize-space(.)]">
        <xsl:value-of select="concat(':', .)"/>
    </xsl:template>
</xsl:stylesheet> 
```

这是我的输出：

```
oneday
    team1
        team2
            team3 
```

但我想输出这样的东西：

```
oneday
    team1:India
        team2:Gujarat
            team3:Guj11 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:25:17.583

这个怎么样：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text" />

  <xsl:template match="*">
    <xsl:apply-templates select="ancestor::*" mode="spacing" />

    <xsl:value-of select="local-name()"/>
    <xsl:if test="@team">
      <xsl:value-of select="concat(':', @team)"/>
    </xsl:if>
    <xsl:text>&#xA;</xsl:text>

    <xsl:apply-templates select="*" />
  </xsl:template>

  <xsl:template match="*" mode="spacing">
    <xsl:text>    </xsl:text>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例 XML 上运行时，这会产生：

```
oneday
    team1:India
        team2:gujarat
            team3:guj11 
```

在稍微复杂的 XML 上运行时：

```
<oneday>
  <team1 id="1" team="India">
    <team2 id="2" team="gujarat">
      <team3 id="3" team="guj11"></team3>
    </team2>
    <team6 team="Mumbai" />
  </team1>
  <team4 team="France">
    <team5 team="Paris" />
  </team4>
</oneday> 
```

它产生：

```
oneday
    team1:India
        team2:gujarat
            team3:guj11
        team6:Mumbai
    team4:France
        team5:Paris 
```

# python - 带有列表框的 Tkinter / Python 网格布局

> ID：14562842
> 
> 赞同：1
> 
> 时间：2013-01-28T13:14:14.053
> 
> 标签：python, user-interface, widget, tkinter

我在使用带有 Tkinter 和 Python 的网格正确排列所有内容时遇到了一些麻烦。我想让菜单栏在最顶部，然后是两个列表框（每侧一个），在窗口中间有几个按钮。

目前，两个列表框都出现在窗口的右下角，按钮位于左上角，与菜单按钮重叠。

考虑到它们的大小，如何处理列表框的网格布局。它们可以占据多个网格单元吗？例如，如果我在 (row=1, column = 1) 中放置一个列表框，在行 (row = 1, column = 2) 中放置另一个列表框，Tkinter 会自动加宽单元格，使其成为列表框的宽度，还是会只是重叠列表框？

```
def __init__(self,root):
    self.frame = Frame(root, width=500)
    self.frame.pack()
    self.BuildMainWindow(self.frame)
    self.ListboxSet = 0 
    self.frame.grid()
    return

#displays the menu bar and options
def BuildMainWindow(self, frame):
    menubar = Frame(frame,relief=RAISED,borderwidth=1)
    menubar.pack()

    mb_file = Menubutton(menubar,text='file')
    mb_file.menu = Menu(mb_file)
    mb_file.menu.add_command(label='open', command = self.openfile)
    mb_file.grid(row = 1, column = 1)

    mb_edit = Menubutton(menubar,text='edit')
    mb_edit.menu = Menu(mb_edit)
    mb_edit.grid(row=1, column = 3)

    mb_file['menu'] = mb_file.menu
    mb_edit['menu'] = mb_edit.menu

#upon selecting a directory from the menu and listboxes/buttons are created
def BuildListbox(self, directory):
    self.listbox1 = Tkinter.Listbox()
    self.listbox2 = Tkinter.Listbox()
    self.listbox1.grid(row=2, column=1)
    self.listbox2.grid(row=2 ,column=10)
    self.listbox2.bind('<<ListboxSelect>>', lambda e:SortActions.GetWindowIndex(self,e))
    self.listbox2.bind('<B1-Motion>', lambda e:SortActions.MoveWindowItem(self,e))

    i = 0
    for filename in sorted(os.listdir(directory)):
        self.listbox1.insert(i, filename)
        i = i + 1

    self.bAddToListTwo = Button(self.frame, text = "->", command = lambda:SortActions.AddToListTwo(self,self.listbox1.curselection()))
    self.bAddToListTwo.grid(row=5, column = 5)
    self.bAddAll = Button(self.frame, text = "Add All To Playlist", command = lambda:SortActions.AddAllFiles(self))
    self.bAddAll.grid(row=6, column = 5)
    self.bRemoveFromListTwo = Button(self.frame, text = "Remove From Playlist", command = lambda:SortActions.RemoveFromListTwo(self,self.listbox2.curselection()))
    self.bRemoveFromListTwo.grid(row=7, column = 5)
    self.bSavePlaylist = Button(self.frame, text = "Save Playlist", command = lambda:SortActions.SaveList(self))
    self.bSavePlaylist.grid(row=8, column = 5) 
```

**更新 - 我让它工作。正如我所怀疑的，我在初始化期间有一些奇怪的框架配置。**

```
def __init__(self,root):
    self.BuildMainWindow(root)
    self.ListboxSet = 0 
    return

#displays the menu bar and options
def BuildMainWindow(self, root):
    menubar = Menu(root)
    root.config(menu=menubar)

    # Create a menu button labeled "File" that brings up a menu
    filemenu = Menu(menubar)
    menubar.add_cascade(label='File', menu=filemenu)

    # Create entries in the "File" menu
    # simulated command functions that we want to invoke from our menus
    filemenu.add_command(label='Open', command=self.openfile)
    filemenu.add_separator(  )
    filemenu.add_command(label='Quit', command=sys.exit)

#upon selecting a directory from the menu and listboxes/buttons are created
def BuildListbox(self, directory):
    self.listbox1 = Tkinter.Listbox()
    self.listbox2 = Tkinter.Listbox()
    self.listbox1.grid(row=1, column=1, rowspan = 4, columnspan = 5)
    self.listbox2.grid(row=1 ,column=15, rowspan = 4, columnspan = 5)
    self.listbox2.bind('<<ListboxSelect>>', lambda e:SortActions.GetWindowIndex(self,e))
    self.listbox2.bind('<B1-Motion>', lambda e:SortActions.MoveWindowItem(self,e))

    i = 0
    for filename in sorted(os.listdir(directory)):
        self.listbox1.insert(i, filename)
        i = i + 1

    self.bAddToListTwo = Button(text = "->", command = lambda:SortActions.AddToListTwo(self,self.listbox1.curselection()))
    self.bAddToListTwo.grid(row=1, column = 6)
    self.bAddAll = Button(text = "Add All To Playlist", command = lambda:SortActions.AddAllFiles(self))
    self.bAddAll.grid(row=2, column = 6)
    self.bRemoveFromListTwo = Button(text = "Remove From Playlist", command = lambda:SortActions.RemoveFromListTwo(self,self.listbox2.curselection()))
    self.bRemoveFromListTwo.grid(row=3, column = 6)
    self.bSavePlaylist = Button(text = "Save Playlist", command = lambda:SortActions.SaveList(self))
    self.bSavePlaylist.grid(row=4, column = 6) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T13:43:17.120

Tkinter 小部件*可以*占用超过 1 个网格单元，但您需要使用`columnspan`和`rowspan`关键字自行管理布局`.grid`。

例如，要获取布局：

```
 --------------------------------------------
 |      Button1      |  Button2 |           |
 --------------------------------  Button3  |
 | Label1  |  Label2 |  Label3  |           |
 -------------------------------------------- 
```

您需要执行以下操作：

```
Button1.grid(row=0,column=0,columnspan=2)
Button2.grid(row=0,column=2)
Button3.grid(row=0,column=4,rowspan=2)
Label1.grid(row=1,column=0)
Label2.grid(row=1,column=1)
Label3.grid(row=1,column=2) 
```

*非常小的脚本*

```
import Tkinter as tk

root = tk.Tk()
Button1 = tk.Button(root,text="Button1")
Button2 = tk.Button(root,text="Button2")
Button3 = tk.Button(root,text="Button3")
Label1 = tk.Label(root,text="Label1")
Label2 = tk.Label(root,text="Label2")
Label3 = tk.Label(root,text="Label3")

Button1.grid(row=0,column=0,columnspan=2)
Button2.grid(row=0,column=2)
Button3.grid(row=0,column=4,rowspan=2)
Label1.grid(row=1,column=0)
Label2.grid(row=1,column=1)
Label3.grid(row=1,column=2)

root.mainloop() 
```

# c - 为什么将 char** 作为 const char** 传递会产生警告？

> ID：14562845
> 
> 赞同：38
> 
> 时间：2013-01-28T13:14:26.390
> 
> 标签：c, gcc

我一直收到这个警告：

```
note: expected ‘const char **’ but argument is of type ‘char **’ 
```

现在，我通过将参数转换为`const char **`. 有没有其他方法可以摆脱它？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-28T16:11:10.240

**简答**

你可以安全地`char **`输入到`const char**`? ***没有***。（无论如何都不安全），原因比你想象的要微妙得多。你能用另一种方式摆脱它吗？当然。`const char*`从您的值中加载一个值数组`char*`并传递它。（或更改被调用者原型，但那是作弊=P）。

*考虑下面的代码，除了*调用一个函数之外，它基本上完成了你想要的所有事情。标记线展示了等效的投射点

```
const char *s = "Test";
char *p = NULL;
char **pp = &p;             // Put address of our pointer in our pointer-to-pointer.
const char **cpp = pp;      // Here: assigning  char** to const char**
*cpp = s;                   // perfectly legal; pp and s both finish "char const"
*p = 0;                     // ru ro raggy 
```

真正盯着它需要一段时间，诚然我一开始也没有看到。@sheu 在我真正思考足够长的时间以意识到他一直都是对的之前大约 24 小时做了一个扎实的工作（实际上我在写这个答案之前赞成这个答案）。然后我认为他错了，同时他认为他的答案不适用。事实证明，我们*都*错了，因为他第一次是对的，第二次我错了，现在……呃。

在 VS2012 和 VS2010 上，标记的行都会在没有强制转换的情况下标记错误。**clang**将在 C 中使用警告编译它，但允许它（我发现这令人惊讶）。鉴于，你确实必须真正走出你快乐的地方才能打破它，但它仍然是破碎的。

其余部分是关于识别指针类型、它们的常量以及什么等价于什么的谩骂。

* * *

**指针和常量的长篇大论**

警告是因为`char **`并且`const char **`不等效（duh）。正确地说，您可以修复原型（被调用者），或修复调用者（通过加载数组`const char *`并传递它）。但是你能安全地将第一个转换为第二个吗？嗯……

请记住，按照标准`const`，它会立即转到其*左侧*的项目。在数据类型的最左侧声明它是该语言支持的一个优点，但通常会带来混乱或问题。根据经验，如果`const`出现在 decl 的最左侧紧挨在类型之前，它适用于数据*类型*；**不是**后续指针（如果有）。当它出现在*任何东西的右侧时，*它适用于立即左侧的 decl 部分，无论是数据类型部分*还是*指针部分，但无论如何它只适用于*单个*部分。

大量样本如下：

**无间接**：

```
const char ch;    // const character. must be initialized.
char const ch;    // same as above 
```

**单间接**：

```
char *p;               // p is mutable, *p is mutable
const char *p;         // p is mutable, *p is const
char const *p;         // same as above.
char *const p;         // p is const, *p is mutable, must be initialized.
char const *const p;   // p is const, *p is const, must be initialized. 
```

**双重间接**：

```
char **p;        // ptr-to-ptr-to-char
                 // p, *p, and **p are ALL mutable

const char **p;  // ptr-to-ptr-to-const-char
                 // p and *p are mutable, **p is const

char const **p;  // same as above

char *const *p;  // ptr-to-const-ptr-to-char
                 // p is mutable, *p is const, **p is mutable.

char **const p;  // const-ptr-to-ptr-to-char
                 // p is const, *p is mutable, **p is mutable.
                 // must be initialized.

const char **const p;  // const-ptr-to-ptr-to-const-char
                       // p is const, *p is mutable, **p is const.
                       // must be initialized.

char const **const p;  // same as above

char const *const *p;  // ptr-to-const-ptr-to-const-char
                       // p is mutable, *p is const, **p is const.

const char *const *p;  // same as above.

char *const *const p;  // const-ptr-to-const-ptr-to-char
                       // p is const, *p is const, **p is mutable.
                       // must be initialized. 
```

当然，谁可以离开家而不...

```
char const *const *const p;   // const-ptr-to-const-ptr-to-const-char
                              // everything is const.
                              // must be initialized.

const char *const *const p;   // same as above 
```

那么这对您的问题有何影响？在 C 中编译该代码时，如果没有强制转换，您将收到编译器警告（如果使用 编译，则会出现错误`-Werror`）。在 C++ 中编译时，您将只是简单的错误，因为参数签名不匹配。但为什么？

因为这些没有直接等价物：

```
const char **p;  // ptr-to-ptr-to-const-char
                 // p and *p are mutable **p is const

char **p;        // ptr-to-ptr-to-char
                 // p, *p, and **p are all mutable 
```

使用**clang**编译时，C 中的确切警告如下：

> main.c:15:9：传递`char **`给类型参数`const char **`会丢弃嵌套指针类型中的限定符。

另一方面，VS2010 和 VS2012 都抛出一个错误：

> 错误 C2440：“正在初始化”：无法从“char **”转换为“const char **”

看起来很奇怪，但 VS 实际上更正确（奇迹永远不会停止）。

这是完全有道理的。*在类型声明中隐藏的事实*是，第一个不允许修改最终数据，第二个允许。从上面我们知道`char **`和`const char **`(aka. `char const **`), 是*不*一样的。一个的底部是指向 a 的指针`const char`，而另一个是指向 的指针`char`。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-01-28T13:21:50.313

**编辑**：我什至回答了错误的问题。我的回答完全无关紧要！请忽略我。

**编辑2**：在绅士提问者澄清他的问题后，事实证明我的回答实际上是相关的。 *这就是生活。*

这是 C 的一个有趣的部分，如果你足够认真地思考它，这是有道理的。

基本上，转换：

```
char** ptr;
const char** const_ptr;
const_ptr = ptr;  // <-- BAD! 
```

不允许。

为什么，你可能会问？“我让事情*变得更加*const！这显然是件好事！”

* * *

好吧，想想这个。如果允许，那么：

```
const char c = 'A';
char* ptr;
const char** const_ptr = &ptr;  // <-- ILLEGAL, but what if this were legal?
*const_ptr = &c;
*ptr = 'B';  // <- you just assigned to "const char c" above. 
```

BAM你死了。所以不行 ：-）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T13:16:38.013

警告告诉您，您正在调用的函数需要给定的参数，`const char**`但您正在传递一个`char**`参数。要摆脱这个警告，你可以

*   真的传入一个`const char**`
*   将您的参数转换为 a `const char**`（就像您目前正在做的那样）
*   更改函数原型，使函数期望`char**`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-30T17:28:02.370

我仍然认为这是不对的。在示例中：

```
const char c = 'A';
char* ptr;
const char** const_ptr = &ptr;  // <-- ILLEGAL, but what if this were legal?
*const_ptr = &c;
*ptr = 'B';  // <- you just assigned to "const char c" above. 
```

打破这一点的行是：

```
*const_ptr = &c; 
```

因为我们将一个非 const 子指针设置为一个 const 指针。如果这在哪里：

```
const char *const *const_ptr 
```

然后

```
*const_ptr = &c 
```

将是正确的，它不会让你分配给 const char c。

我不认为编译器应该阻止你做更多的事情。

# html - 我的完整日历的 css 有问题。宽度自动没有响应

> ID：14562853
> 
> 赞同：2
> 
> 时间：2013-01-28T13:14:48.207
> 
> 标签：html, css, twitter-bootstrap

我正在使用完整日历来显示一些事件日期，但宽度值有问题。我希望它能够在最低 1024x768 分辨率和其他更大的屏幕尺寸（例如 1366x768 尺寸）下正常工作我尝试引用 fullcalendar.css 中的每个宽度值，启用、禁用所有 css 文件，插入内联样式。有人建议使用引导响应，但它也没有顺利进行。现在我可以在 1024x768 分辨率下完美地看到我的日历，但在更大的分辨率下，日历和右表之间存在差距。我使用了 chrome 的工具检查元素，它说那个空白区域没有任何东西，例如边距或填充。

我的标题是：

```
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <!-- CSS FILES -->
    <!--[if !IE]><!-->
        <link rel="stylesheet" href="/assets/default/css/style.css" type="text/css" />
    <!--<![endif]-->
    <!--[if IE]>
        <link rel="stylesheet" type="text/css" href="/assets/default/css/all-ie-only.css" />
    <![endif]-->
    <link rel="stylesheet" href="/assets/default/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="/assets/default/css/bootstrap-responsive.css" type="text/css" />
    <link rel="stylesheet" href="/assets/default/scripts/jquery-ui-1.9.2.custom/css/smoothness/jquery-ui-1.9.2.custom.min.css" type="text/css" />
    <link rel="stylesheet" href="/assets/default/css/fullcalendar.css" type="text/css" />
    <link rel="stylesheet" href="/assets/default/css/fullcalendar.print.css" type="text/css" />
    <link href="assets/default/css/bootstrap-responsive.css" rel="stylesheet">
    <!-- END CSS FILES -->

    <!-- JS FILES -->
    <script src="/assets/default/scripts/jquery-1.8.3.min.js" type="text/javascript" ></script>
    <script src="/assets/default/scripts/jquery-ui-1.9.2.custom/js/jquery-ui-1.9.2.custom.min.js" type="text/javascript" ></script>
    <script src="/assets/default/scripts/bootstrap.min.js" type="text/javascript" ></script>
    <script src="/assets/default/scripts/fullcalendar.js" type="text/javascript" ></script>
    <!-- END JS FILES -->

    <title>Permission System</title>
</head> 
```

[这是我的 style.css 的副本：](http://speedy.sh/uXndZ/style.css)

和我的完整日历 div：

```
<div style="min-width: 45%; width: auto; float: left; margin-left: 0px;" id="calendar" ></div> 
```

请帮助我快要发疯了！

如果您认为更容易理解，我可以向您发送 teamviewer 信息。

[所有关于 css 的代码和一些图片](http://www.speedyshare.com/zenpp/all-css-tpl-and-pics.rar)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T17:38:31.120

取出 fullcalendar.print.css 并确保您拥有完整的日历 css 和 js，以排除任何打印 css 问题。打印 css 应该只包含在打印媒体上，而不是屏幕上。在此页面上查看[FullCalendar Source](http://arshaw.com/fullcalendar/)我在标题中找不到任何对 print.css 的引用。

# php - 尝试调试视频时未出现警报

> ID：14562854
> 
> 赞同：0
> 
> 时间：2013-01-28T13:14:49.283
> 
> 标签：php, javascript, jquery, video

我如何调试自己的视频，因为目前没有出现警报。我用的是IE9，播放器是jwplayer。我是否遗漏了某些东西，或者我是否将用于调试的 javascript 代码放在了错误的位置，因为我试图将它放在 jwplayer 元素的下方和上方。我应该在单击播放时看到警报还是应该立即出现？

```
<div id="myElement">Loading the player...</div>

<?php echo 'This is the videoPath '.$dbVideoFile; ?>

<script type="text/javascript">

    jwplayer("myElement").setup({
        file: "<?php echo $dbVideoFile; ?>",
    });

var myvid = document.getElementById('myElement');
if (myvid.error) {
 switch (myvid.error.code) {
   case MEDIA_ERR_ABORTED:
      alert("You stopped the video.");
      break;
   case MEDIA_ERR_NETWORK:
      alert("Network error - please try again later.");
      break;
   case MEDIA_ERR_DECODE:
      alert("Video is broken..");
      break;
   case MEDIA_ERR_SRC_NOT_SUPPORTED:
      alert("Sorry, your browser can't play this video.");
      break;
 }
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:24:33.097

首先，您尝试从 div 元素而不是视频中获取错误，第二件事您尝试在加载代码时立即执行此操作- jwplayer 可能在页面/文档加载时运行，或者至少在某些超时时运行，并且在那个特定的暂时还没有玩家。您应该将回调函数附加到 onError jwplayer 事件，然后尝试找出问题所在。代码常量也`MediaError`没有在全局范围内定义，它们绑定到`MediaError`对象，所以你应该使用例如`MediaError.MEDIA_ERR_ABORTED`而不是仅仅`MEDIA_ERR_ABORTED`

```
jwplayer("myElement").setup({
    file: "<?php echo $dbVideoFile; ?>",
    events: {
        onError: function (message) {

            console.error('Video error: ' + message);

            // note that jwplayer is replacing your original div element with new one with same id
            // you can try to get video tag created by jwplayer:
            var videos = document.getElementById('myElement').getElementsByTagName();
            if (videos.length && videos[0].error) {
                switch (videos[0].error.code) {
                    case MediaError.MEDIA_ERR_ABORTED:
                       alert("You stopped the video.");
                       break;
                    case MediaError.MEDIA_ERR_NETWORK:
                       alert("Network error - please try again later.");
                       break;
                    case MediaError.MEDIA_ERR_DECODE:
                       alert("Video is broken..");
                       break;
                    case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:
                       alert("Sorry, your browser can't play this video.");
                       break;
                    default:
                       alert('Unknown error');
                       break;
                }
            }
        }
    }
}); 
```

请参阅[jwplayer 事件的文档](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/12540/javascript-api-reference#Events)

# ruby - 如何在不更改当前目录的情况下获取下一个和上一个目录的完整路径名？

> ID：14562855
> 
> 赞同：1
> 
> 时间：2013-01-28T13:14:50.893
> 
> 标签：ruby

我尝试了以下帮助我看到的方法`1-level down directory path`：

```
E:\WIPData\Ruby\Scripts>irb
irb(main):001:0> Dir.pwd
=> "E:/WIPData/Ruby/Scripts"
irb(main):004:0> Dir.pwd.gsub(/\/Scripts/,'')
=> "E:/WIPData/Ruby"
irb(main):005:0> 
```

有没有办法从当前目录获取`directory full path` ***1-level up***和***1-level down而不更改它？***

```
 File structure
             =================

             Dir-> E:\WIPData\
                   |                     
            (E:\WIPData\Ruby)      
                    |
  --------------------------------------------------
  |          |           |       |                 |
(xxx)     (yyyy)      (zzzz)   (pppp)       (E:\WIPData\Ruby\Scripts) <= It is PWD 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:38:41.847

您可以通过这种方式在当前目录中找到第一个子目录：

```
Dir.glob('*').find { |fn| File.directory?(fn) } 
```

尽管如此，正如有人所说，它并不是唯一定义的。

和第一个父目录这样：

```
File.expand_path("..", Dir.pwd) 
```

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:20:02.207

要从路径获取父目录，请使用：

```
File.dirname('/path/to/a/file.txt')
=> "/path/to/a" 
```

除非只有一个，否则无法获取“子”目录，因为文件系统没有默认子目录的概念。如果只有一个，这对您来说是一个明显的选择，但对您的代码来说却不是。仅获取子目录的列表：

```
Dir.entries('.').select{ |e| File.directory?(e) } 
```

这将返回`'.'`（又名当前目录）下的子目录作为数组，这将`['.', '..']`至少分别表示当前目录和父目录。例如，在我的 pry 实例正在运行的当前目录中，我返回：

```
[".", "..", ".svn", "old"] 
```

作为可用目录的列表。哪个是默认值？我可以这样做：

```
Dir.entries('.').select{ |e| File.directory?(e) && !e[/^\./] }
=> ["old"] 
```

它返回唯一的“可见”目录，即它不是“隐藏”目录，因为它不以`'.'`. 这不是默认值，因为正如我所说，文件系统没有“默认”子目录概念。在另一个目录中，我可能会看到返回了许多目录，因此我必须指定要进入哪个目录或用于文件访问。

Ruby 有一套不错的[File](http://www.ruby-doc.org/core-1.9.3/File.html)和[Dir](http://www.ruby-doc.org/core-1.9.3/Dir.html)工具，以及[Find](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/find/rdoc/Find.html)类，因此请阅读他们的文档以了解您可以做什么。

# dynamic - 使用 Autolayout iOS 6 + 的动态表格单元格高度

> ID：14562859
> 
> 赞同：10
> 
> 时间：2013-01-28T13:15:02.783
> 
> 标签：dynamic, uitableview, ios6, height

我有`UITableviewCell`子类。在那个单元格中，我有 2 个标签（`lblComment`和`lblDateTimeStampe`）和一个视图来显示评级星。我希望 lblComment 的动态高度适合所有文本。它应该根据评论的长度扩大和缩小高度。我之前已经实现了这个，但没有像下面这样**的 AutoLayout**

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath  {  

    NSString *label =  self.userComment.commentText;
    CGSize stringSize = [label sizeWithFont:[UIFont boldSystemFontOfSize:15]
                          constrainedToSize:CGSizeMake(320, 9999) 
                              lineBreakMode:UILineBreakModeWordWrap];

    return stringSize.height+10;

} 
```

现在我正在使用自动布局功能。

如何使用 Autolayout 实现这一目标？

任何形式的帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-20T00:28:04.110

不幸的是，自动布局不会帮助你`tableView:heightForRowAtIndexPath`。您仍然必须实现该方法。

您可以使用`UIView`'`systemLayoutSizeFittingSize:`方法，但这意味着您必须实例化和配置一个表格视图单元格，这可能会非常昂贵。不过，您可以将其保留在屏幕外并将其重新用于计算。但在这一点上，您并没有真正节省太多的开发工作量，因此像以前手动进行计算可能是最好/最快的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T23:56:09.683

您可以使用免费提供的 Sensible TableView 框架。该框架会随着内容的增长自动调整单元格的大小。如果表格视图已经显示，它也会动态地执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T09:18:59.083

我已经使用自动布局实现了相同问题的解决方案，并且可以正常工作。

首先，您需要为 lblComment 定义 heightConstraint。

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
UIFont *font = [UIFont fontWithName:@"YourFontName" size:YourFontSize] ;
UITextView *calculationView = [[UITextView alloc] init];
[calculationView setFont:font];
[calculationView setTextAlignment:NSTextAlignmentLeft];
[calculationView setText:lblComment.text];
int width = 0;
if(self.appDelegate.isDeviceiPhone)
    width = 284;
else
    width = 720;
CGSize size = [calculationView sizeThatFits:CGSizeMake(width, FLT_MAX)];
   return size.height;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
  {
//initialize the cell..

UIFont *font = [UIFont fontWithName:@"YourFontName" size:YourFontSize];

UITextView *calculationView = [[UITextView alloc] init];
[calculationView setFont:font];
[calculationView setTextAlignment:NSTextAlignmentLeft];
[calculationView setText:cell.lblComment.text];

int width = 0;

if(self.appDelegate.isDeviceiPhone)
    width = 284;
else
    width = 720;

CGSize size = [calculationView sizeThatFits:CGSizeMake(width, FLT_MAX)];

cell.lblDetailHeightConstraint.constant = size.height;

// the other stuff...
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-05-11T12:30:50.240

如果您在 IB 中正确设置约束，这应该可以工作。您不必以编程方式添加元素，尽管正如您所说的那样也可以。

假设您在 tableviewcell 中有 label1（可变高度）、label2 和 view1，您应该：

1.  在 label2 和 view1 上设置固定高度约束
2.  将 view1 的底部固定到单元格的底部
3.  固定view1和label2的垂直间距
4.  固定label2和label1的垂直间距
5.  将 label1 的顶部间距固定到单元格的顶部

只要确保你对 label1 没有高度限制，如果你这样做，它应该只大于或等于。通过这样的配置，您可以继续使用 heightForRowAtIndexPath 并且 label1 将根据单元格的高度垂直扩展和收缩。

# db2 - SQL 是否有等效的 JDFTVAL？

> ID：14562864
> 
> 赞同：1
> 
> 时间：2013-01-28T13:15:08.970
> 
> 标签：db2, ibm-midrange, rpgle

对于 Iseries/IBMi DB2。

我将多个文件/表连接在一起。

我已经在 DDS 和 SQL 中编写了代码。

DDS 逻辑文件完全按预期工作，但我不能将它用于 rpgle 中的嵌入式 sql，因为它默认为 SQE 引擎，从而导致可怕的性能。

另一方面，SQL 视图在`NULLs`我使用`IFNULL( MBRDESCR, '')`. 但现在`MBRDECSR`是一个`VARCHAR`。这是不可接受的。

那么如何在没有`NULLs`and的情况下创建 SQL 连接`VARCHARs`？

要求的示例代码：

**DDS：**

```
                                            JDFTVAL                                              
                R TRANSR JFILE(TRANSPF MBRPF)                                

                J 加入(1 2)
                                            JFLD(MBRID MBRID)                                  
      *                                                
                  TRANSID JREF(1)     
                  MBRID JREF(1)                               
                  MBRNAME JREF(2)                               
                  MBRSURNME JREF(2)                               
      *                   
                K TRANSID                                                       
                K MBRID

```

SQL：

```
创建视图 TRANSV01 为 (                 
    选择 TRANSID ,
           ,                 
           CAST(IFNULL(MBRNAME , '') as Char(20)) ,                 
           CAST(IFNULL(MBRSURNME, '') as Char(25))                  
    来自 TRANSPF
    - 成员名字                                                               
    MBRID 上的左外连接 MBRPF = MBRID     
) RCDFMT TRANSR；                                                             

```

请注意以下事项：

1.  上面的例子是简化的

2.  不是 TRANSPF 中的每个 MBRID 在 MBRPF 中都有对应的条目（即没有引用约束）。因此，当 MBRPF 加入 TRANSPF 时，MBRNAME、MBRSURNME 中将有 NULL 值。除非使用 JDFTVAL 或 IFNULL()。

3.  由于 rpgle 中的性能和 extname()，我不喜欢使用 VARCHAR。

4.  我不希望有 NULL 值，我不希望 pgm 必须处理它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:55:31.310

假设它是您认为不受欢迎的“允许空值”，请使用 UNION。第一个 SELECT 选择所有匹配的行，这将为您设置 NOT NULL 属性。第二个 SELECT 选择所有不匹配的行 - 您为这些行提供填充字段。

```
CREATE VIEW TRANSV01 AS (                 
    SELECT TRANSID                                 ,
           MBRID                                   ,                 
           MBRNAME  ,
           MBRSURNME
    FROM TRANSPF
    --Member Name                                                               
    JOIN MBRPF on MBRID = MBRID     
  UNION
    SELECT TRANSID                                 ,
           MBRID                                   ,                 
           CAST('') as Char(20)) ,                 
           CAST('') as Char(25))                  
    FROM TRANSPF
    --Member Name                                                               
    EXCEPTION JOIN MBRPF on MBRID = MBRID     
) RCDFMT TRANSR; 
```

# r - R中使用多个数据源的函数

> ID：14562865
> 
> 赞同：1
> 
> 时间：2013-01-28T13:15:09.543
> 
> 标签：r, function

我有许多不同的表，我想在 R 中编写一个函数，其中：

表 1：

```
 coordinates var1.pred  var1.var observed    residual      zscore fold
1  (2579410, 1079720)  5.057024 0.4325275    5.468  0.41097625  0.62489903    1
2  (2579330, 1079730)  5.329797 0.3945041    4.498 -0.83179667 -1.32431534    2
3  (2579260, 1079770)  4.788211 0.5576228    5.114  0.32578861  0.43628035    3
4  (2579930, 1080030)  5.067753 0.4972365    4.764 -0.30375347 -0.43076434    4
5  (2579700, 1079770)  5.116632 0.5792768    4.626 -0.49063190 -0.64463327    5
6  (2579540, 1079640)  4.865667 0.6122453    6.522  1.65633254  2.11682434    6
7  (2579860, 1079880)  5.139779 0.4655840    4.856 -0.28377887 -0.41589245    7 
```

如果“观察到”的值超出了以下两个值的容差，则将其标记为异常值：

```
var1.pred+(1.96*sqrt(var1.var))
var1.pred-(.96*sqrt(var1.var)) 
```

换句话说：

```
 if   
   var1.pred-(1.96*sqrt(var1.var)) < 'observed' <  var1.pred-(1.96*sqrt(var1.var)) 
```

结果正常，否则结果异常。

此外，列的名称相同，表名称为 1,2,3 .... 。

```
 dat <- structure(list(coordinates = structure(c(3L, 2L, 1L, 7L, 5L,                                
     4L, 6L), .Label = c("(2579260, 1079770)", "(2579330, 1079730)",                                
     "(2579410, 1079720)", "(2579540, 1079640)", "(2579700, 1079770)",                              
     "(2579860, 1079880)", "(2579930, 1080030)"), class = "factor"),                                
         var1.pred = c(5.057024, 5.329797, 4.788211, 5.067753, 5.116632,                            
         4.865667, 5.139779), var1.var = c(0.4325275, 0.3945041, 0.5576228,                         
         0.4972365, 0.5792768, 0.6122453, 0.465584), observed = c(5.468,                            
         4.498, 5.114, 4.764, 4.626, 6.522, 4.856), residual = c(0.41097625,                        
         -0.83179667, 0.32578861, -0.30375347, -0.4906319, 1.65633254,                              
         -0.28377887), zscore = c(0.62489903, -1.32431534, 0.43628035,                              
         -0.43076434, -0.64463327, 2.11682434, -0.41589245), fold = 1:7), .Names = c("coordinates", 
     "var1.pred", "var1.var", "observed", "residual", "zscore", "fold"                              
     ), row.names = c(NA, -7L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T13:24:16.813

这应该有效：

```
dat$outlier = with(as.data.frame(dat), 
                   ifelse(observed > (var1.pred + (.95*var1.var)) | # | = OR
                          observed < (var1.pred - (.95*var1.var)),
             "outlier", "normal")) 
```

我的代码与您的描述有点不同，因为我检查值是否在范围之外，而不是在范围内。以上在您的示例代码上运行：

```
> dat
         coordinates var1.pred  var1.var observed   residual     zscore fold
1 (2579410, 1079720)  5.057024 0.4325275    5.468  0.4109762  0.6248990    1
2 (2579330, 1079730)  5.329797 0.3945041    4.498 -0.8317967 -1.3243153    2
3 (2579260, 1079770)  4.788211 0.5576228    5.114  0.3257886  0.4362803    3
4 (2579930, 1080030)  5.067753 0.4972365    4.764 -0.3037535 -0.4307643    4
5 (2579700, 1079770)  5.116632 0.5792768    4.626 -0.4906319 -0.6446333    5
6 (2579540, 1079640)  4.865667 0.6122453    6.522  1.6563325  2.1168243    6
7 (2579860, 1079880)  5.139779 0.4655840    4.856 -0.2837789 -0.4158925    7
  outlier
1 outlier                                                                   
2 outlier                                                                   
3  normal                                                                   
4  normal                                                                   
5  normal                                                                   
6 outlier                                                                   
7  normal 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T13:29:36.673

保罗的回答都很好，只是建议略有不同。

```
> dat
         coordinates var1.pred  var1.var observed   residual     zscore fold
1 (2579410, 1079720)  5.057024 0.4325275    5.468  0.4109762  0.6248990    1
2 (2579330, 1079730)  5.329797 0.3945041    4.498 -0.8317967 -1.3243153    2
3 (2579260, 1079770)  4.788211 0.5576228    5.114  0.3257886  0.4362803    3
4 (2579930, 1080030)  5.067753 0.4972365    4.764 -0.3037535 -0.4307643    4
5 (2579700, 1079770)  5.116632 0.5792768    4.626 -0.4906319 -0.6446333    5
6 (2579540, 1079640)  4.865667 0.6122453    6.522  1.6563325  2.1168243    6
7 (2579860, 1079880)  5.139779 0.4655840    4.856 -0.2837789 -0.4158925    7

> dat$label <- ifelse(dat$observed < dat$var1.pred-(1.96*sqrt(dat$var1.var)) |  dat$observed > dat$var1.pred+(1.96*sqrt(dat$var1.var)), "outlier", "normal" )

> dat
         coordinates var1.pred  var1.var observed   residual     zscore fold   label
1 (2579410, 1079720)  5.057024 0.4325275    5.468  0.4109762  0.6248990    1  normal
2 (2579330, 1079730)  5.329797 0.3945041    4.498 -0.8317967 -1.3243153    2  normal
3 (2579260, 1079770)  4.788211 0.5576228    5.114  0.3257886  0.4362803    3  normal
4 (2579930, 1080030)  5.067753 0.4972365    4.764 -0.3037535 -0.4307643    4  normal
5 (2579700, 1079770)  5.116632 0.5792768    4.626 -0.4906319 -0.6446333    5  normal
6 (2579540, 1079640)  4.865667 0.6122453    6.522  1.6563325  2.1168243    6 outlier
7 (2579860, 1079880)  5.139779 0.4655840    4.856 -0.2837789 -0.4158925    7  normal 
```

更新：顺便说一句，如果您正在寻找执行此操作的函数，并且当您提到列名始终相同时，您可以将函数编写为

```
checkRange <- function(dat) {
  dat$label <- ifelse(dat$observed < dat$var1.pred-(1.96*sqrt(dat$var1.var)) |  dat$observed   dat$var1.pred+(1.96*sqrt(dat$var1.var)), "outlier", "normal" )
  return(dat)
}
> dat <- checkRange(dat)

> dat
         coordinates var1.pred  var1.var observed   residual     zscore fold   label
1 (2579410, 1079720)  5.057024 0.4325275    5.468  0.4109762  0.6248990    1  normal
2 (2579330, 1079730)  5.329797 0.3945041    4.498 -0.8317967 -1.3243153    2  normal
3 (2579260, 1079770)  4.788211 0.5576228    5.114  0.3257886  0.4362803    3  normal
4 (2579930, 1080030)  5.067753 0.4972365    4.764 -0.3037535 -0.4307643    4  normal
5 (2579700, 1079770)  5.116632 0.5792768    4.626 -0.4906319 -0.6446333    5  normal
6 (2579540, 1079640)  4.865667 0.6122453    6.522  1.6563325  2.1168243    6 outlier
7 (2579860, 1079880)  5.139779 0.4655840    4.856 -0.2837789 -0.4158925    7  normal 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:35:09.727

哈米德给你一个好消息。已经存在使这样的工作非常容易的软件包。我个人最喜欢这种工作的是“plyr”包。要将 [tolerances] 列添加到数据框中，您将使用“ddply”函数（输入是数据框，输出是数据框，因此“ply”的“dd”前缀）。

```
library(plyr)
ddply(dat, .(fold), mutate, tolerances=ifelse(observed < (var1.pred - 0.95 * var1.var)|observed > (var1.pred + 0.95 * var1.var),"Outlier","Normal")) 
```

我将为后代解释这些函数参数中的每一个，以便您可以根据需要调整它们。我们告诉 'ddply' 从数据框 [dat] 加载数据，并且我们使用列 [fold] 作为主键。我们必须告诉 'ddply' 使用什么作为键，因为它会自动尝试聚合适合键的数据。使用 [fold] 确保我们得到每一行的结果。接下来，我们使用“mutate”函数，它保留所有原始数据，但添加我们指定的新列。最后，我们指定了一个新列 [tolerances]，其中包含一个“ifelse”语句，用于检查 [observed] 值是小于容差下限还是高于容差上限。如果为真，则值为“异常值”，如果为假，则值为“正常”。

# c# - 2 个 DataGridView 合二为一，与背景色透明重叠

> ID：14562874
> 
> 赞同：1
> 
> 时间：2013-01-28T13:15:41.863
> 
> 标签：c#, events, datagridview, overlapping

我有一个关于 DataGridviews 的问题。我想让 2 个 DGV 相互重叠。上面的 DGV 应该是透明的，以便我可以看到来自 DGV 的值，即 belov。或者我怎样才能在一个带有 Event 的 DGV 中做到这一点？或其他方式来做到这一点？

![在此处输入图像描述](../Images/877385e582e99f45f85006fb55d7b961.png)

# php - 数组序列化问题

> ID：14562875
> 
> 赞同：0
> 
> 时间：2013-01-28T13:15:42.087
> 
> 标签：php, jquery, mysql, serialization, query-string

我将一些已通过使用 jQuery 序列化的信息存储到 MySQL 数据库中：

```
$(function () {
    $("#sortable").sortable({
        stop: function (event, ui) {
            $("#q35list").val($(this).sortable('serialize'));
        }
    });
    $("#sortable").disableSelection(); 
```

这会将相关信息存储在数据库中（通过 .php 保存页面）。

但是，当我返回它并使用以下命令对其进行反序列化时：

```
$arr = unserialize($results['q35list']);
if(!$arr) $arr=array();
var_dump($arr); 
```

这不是一个数组！如下：

```
string(55) "Set[]=2&Set[]=1&Set[]=3&Set[]=4&Set[]=5&Set[]=6&Set[]=7" 
```

我现在处于从树上看不到木头的地步……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:21:54.127

jQuery 序列化和 PHP 序列化是两个不同的东西。jQuery 专注于能够通过 CGI（GET 或 POST）发送数据，PHP 序列化专注于将结构化数据存储在字符串中。

**它们不可互换。**

必须在同一个平台上进行序列化和反序列化，否则行不通。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T13:19:35.653

我不太确定，但你不能使用这个`parse_str()`功能

像这样

```
parse_str($string, $array); 
```

其中 $string 是来自 mysql 的数据， $array 是您可以用来获取数据的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:23:52.670

可能有一种更简单的方法可以解决您的问题，但如果没有其他方法，您也可以使用[`explode()`](http://php.net/manual/en/function.explode.php)将字符串切割成部分并创建您的数组。

# .htaccess - 如何排除某些文件名在 .htaccess 中被热链接阻止

> ID：14562876
> 
> 赞同：1
> 
> 时间：2013-01-28T13:15:45.183
> 
> 标签：.htaccess, wildcard, hotlinking

我目前在我的照片文件夹的 .htaccess 中有以下内容。

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?siteabc.com [NC]
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?sitexyz.com [NC]
RewriteRule \.(jpg|jpeg|png|gif)$ http://example.com/images/bandwidth.png [NC,R,L] 
```

这会阻止所有不允许的域对我们的照片文件进行热链接，并在其位置显示[http://example.com/images/bandwidth.png](http://example.com/images/bandwidth.png)。

但是，我想做的是允许网站能够热链接我们的缩略图。缩略图图像具有这种文件名格式

```
filenameabc_100_cw100_ch100_thumb.jpg
filenameabc_100_cw100_ch100_thumb.png
filenamexyz123_100_cw100_ch100_thumb.png 
```

例如，文件名都以 _thumb.ext 结尾

所以我想做的是修改上面的 .htaccess 以全局阻止所有访问，但以 thumb 结尾的文件名除外，例如 *_thumb.jpg 或 *_thumb.png

我不知道如何编写这样的规则。

如果有人有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:31:13.013

修改问题中的规则集：

你可以试试这个：

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?siteabc.com [NC]
RewriteCond %{HTTP_REFERER} !^http(s)?://(www\.)?sitexyz.com [NC]
# Add this other exception
RewriteCond %{REQUEST_URI}  !_thumb\.  [NC]
RewriteRule \.(jpg|jpeg|png|gif)$ http://example.com/images/bandwidth.png [NC,R,L] 
```

# javascript - 透过地面覆盖物窥视土地

> ID：14562878
> 
> 赞同：0
> 
> 时间：2013-01-28T13:15:46.393
> 
> 标签：javascript, google-earth, google-earth-plugin

我在谷歌地球上覆盖大地图，但底层地图的一部分通过图像窥视：
![http://www.viseyes.org/Capture.JPG)](../Images/83869d191eaa83ad7cd8f78456e08bee.png)

我尝试了各种设置`setAltitudeMode()`，`setAltitude()`但没有任何乐趣。

这是一个已知的错误，还是有解决方法？

谢谢！

账单

```
seg = ge.createGroundOverlay(m.mid);

latLonBox = ge.createLatLonBox('');
latLonBox.setBox(m.north, m.south, m.east, m.west, m.rotatio);
seg.setLatLonBox(latLonBox);    

icon = ge.createIcon('');
icon.setHref(m.url);

seg.setDrawOrder(-1);
seg.setIcon(icon);
ge.getFeatures().appendChild(seg); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:01:47.263

你想要的设置是`<altitudeMode>clampToGround</altitudeMode>`

仅供参考 - 唯一允许的两个选项是`clampToGround`and `absolute`（如果使用 ，还有更多选项`gx:altitudeMode`）

你也应该有`<altitude>0</altitude>`

从提供的图像来看，您已将模式设置为`absolute`非零`altitude`

我也会避免使用负数`drawOrder`- 我不确定它们是否有效？此外，您希望它位于 GE 图像的顶部，因此 drawOrder 应该高于它（我怀疑它的 drawOrder 是 -2 或更低）

祝你好运！

编辑：在评论中看到示例页面（对我有用）后，我认为您应该确定您拥有的插件版本并可能对其进行更新。要么更新您的视频卡驱动程序。

[这个链接](http://www.google.com/earth/explore/products/plugin.html)会告诉你你有什么版本（它在 GE 窗口下列出）

我正在使用 6.2.2.6613 但我相信最新的是 7.x。如果您低于 6.x，我建议您进行更新

[此链接](http://support.google.com/earth/bin/answer.py?hl=en&answer=178389)包含有关如何手动卸载 GE 插件的信息，然后只需访问您的网页重新安装即可

# c# - C# - 列表框键/值对

> ID：14562880
> 
> 赞同：0
> 
> 时间：2013-01-28T13:16:00.253
> 
> 标签：c#, windows-phone-7, user-interface

我有一个字典，其中包含如下数据：

```
key     Value
UK01    Building 1
UK02    Building 2 
```

我有一个文本框，其中的数据填充如下：

```
foreach (var building in dictionary)
{
    listbox1.Items.Add(building.Value);
} 
```

然后显示`Building 1 Building 2, ...`

问题：

我想要做的是，当`SelectionChanged`触发 时，我可以访问已选择选项的键/值并将它们存储为变量，以便以后使用。目前我只能选择项目，即“1号楼”，或者我可以得到，`SelectedInded`但这只会给我：1、2、..我明白为什么。

因此是否可以（优雅地）在不显示密钥的情况下访问键/值？我试图使用一个类：

```
 public class Test
 {
    public ID { get; set; }
    public value { get; set; }

 } 
```

但这没有用。有没有人有什么建议？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:07:26.730

您需要`DataTemplate`在您的中使用 a`ListBox`以确保列表框知道如何呈现其内容。假设您遵循上述基于类的方法：

```
<ListBox>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding value}">
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

`DataTemplate`这将为您添加到其中的每个项目创建一个，`ListBox`其中包含一个文本块，该文本块绑定到添加的项目的属性

阅读绑定 - 它是 WPF/WP7/Silverlight 中最强大的功能之一，并且可能是最广泛的绑定实现之一

[http://www.mono-software.com/blog/post/Mono/166/Data-binding-in-Windows-Phone-7-application/](http://www.mono-software.com/blog/post/Mono/166/Data-binding-in-Windows-Phone-7-application/)

编辑：

虽然我很确定 ListBox 的默认模板只是在每个项目上调用 'ToString()' ......所以它应该可以正常工作！

哦，考虑让成员成为自动属性而不是字段：

```
public string ID { get; set; } 
```

编辑：

好的，我对 Linq 不是很好，但由于查询应该返回一个`IEnumerable<KeyValuePair<string, string>>`据我所见，你可以枚举它并建立你的对象，例如

```
var myList = new ObservableCollection<MyClass>();
foreach(var kvp in dict) 
{
    myList.Add(new MyClass(kvp.Key, kvp.Value)); 
    // Or myList.Add(new MyClass() { ID = kvp.Key, Value = kvp.Value }); depending on your constructor
} 
```

话虽如此，你没有理由不能只指向字典项的键/值（`KeyValuePair<string, string>`就像其他任何东西一样只是一个引用类型）

这：

```
<ListBox>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <TextBlock Text="{Binding Key}">
                <TextBlock Text="{Binding Value}">
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

应该给你

```
{Key}
{Value}
{Key}
{Value}
{Key}
{Value} 
```

在您的列表框中

假设您不需要结果项中的任何其他功能`KeyValuePair`就足够了。创建一个类只是为了显示一些值可能是矫枉过正，因为您已经完成了 99% 的工作。

您可能想查看一些 MVVM 模式，并且可能想要查看 MVVM 框架（我有偏见，因为我一直使用它，但 Caliburn.Micro 非常容易上手并支持 WP7）。

您的代码不会更复杂，但某些事情会为您连接起来，它会为您提供更多关于绑定等问题的反馈（有些绑定很难弄清楚，尤其是当弹出窗口/上下文菜单是涉及）

如果您对基于 XAML 的技术进行开发是认真的，它们与 MVVM 模式齐头并进，而一个框架让事情变得轻而易举

If you are interested there's an easy to follow tut here:

[https://caliburnmicro.codeplex.com/wikipage?title=Basic%20Configuration%2c%20Actions%20and%20Conventions&referringTitle=Documentation](https://caliburnmicro.codeplex.com/wikipage?title=Basic%20Configuration%2c%20Actions%20and%20Conventions&referringTitle=Documentation)

Another variation on the same tut with a bit more info is here:

[http://buksbaum.us/2010/08/01/caliburn-micro-hello-world/](http://buksbaum.us/2010/08/01/caliburn-micro-hello-world/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:20:23.920

我认为你只需要覆盖`ToString`你的类中的函数`Test`，它应该可以按照你的意愿工作

像这样：

```
public override string ToString()
{
   return Value;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:20:17.670

我知道 WPF，它应该有点相似。**在那里，您可以使用称为数据绑定**的东西将控件绑定到集合。

[http://msdn.microsoft.com/en-us/magazine/cc163299.aspx](http://msdn.microsoft.com/en-us/magazine/cc163299.aspx)

[http://blogs.msdn.com/b/wriju/archive/2011/07/25/windows-phone-7-binding-data-to-listbox-through-code.aspx](http://blogs.msdn.com/b/wriju/archive/2011/07/25/windows-phone-7-binding-data-to-listbox-through-code.aspx)

# json - 将 json 数据从客户端传递到服务

> ID：14562881
> 
> 赞同：0
> 
> 时间：2013-01-28T13:16:08.983
> 
> 标签：json, wcf, service, client

我正在尝试将 RESTful 架构添加到现有的 SOAP 服务，以便我同时拥有 Rest 和 SOAP 兼容服务。我正在使用 WebGets 和 WebInvokes 在服务接口中添加现有方法。从方法签名中可以看出，对象作为参数传递，对象从方法中返回。这就是为什么按照[http://www.codeproject.com/Articles/327420/WCF-REST-Service-with-JSON](http://www.codeproject.com/Articles/327420/WCF-REST-Service-with-JSON)我使用 Json 作为消息格式。在 chrome addon Advanced Rest Client 中有一个很好的功能，即在 POST 查询时发送 json 数据。但我无法理解的是，我系统中的客户端在调用此服务时应该如何发送 Json 数据？

这是来自客户的电话：

```
client.GenerateInvitation(sessionId, email, loggedInstitution); 
```

服务接口：

```
[OperationContract]
        [WebInvoke( Method = "POST",ResponseFormat = WebMessageFormat.Json,
        RequestFormat = WebMessageFormat.Json,
        UriTemplate = "Rest/GenerateInvitation?ses={sessionId}&em={email}"]
        PartialInvitation GenerateInvitation(string sessionId, string email, Institution  institution); 
```

这是数据合同：

```
 public partial class Institution
      {

    [DataMember]
        public System.Guid Guid { get; set; }
        [DataMember]
        public string Name { get; set; }
        [DataMember]
        public string Phonenumber { get; set; }
    } 
```

这是一个实现的方法 GenerateInvitation：

```
public PartialInvitation GenerateInvitation(string sessionId, string email, Institution institution)
        {
            Session session = GetSession(sessionId);
            if (session != null)
            {
                if (((  session.User.Institutions.Where(i => i.Guid ==             institution.Guid).FirstOrDefault() != null &&
                                session.User.AccessLevel == ACCESS_LEVEL_MED
                            ) ||  session.User.AccessLevel == ACCESS_LEVEL_HIGH
                        ) && EmailTools.IsValidEmail(email) )
                {
                    List<User> usersWithMatchingEmail = db.Users.Where(u => u.Email == email).ToList();

                    foreach (User usr in usersWithMatchingEmail)
                    {
                        if (session.User.AccessLevel == ACCESS_LEVEL_MED)
                        {
                            if (usr.AccessLevel != ACCESS_LEVEL_LOW) throw new InvalidOperationException("Cannot invite non trainees");
                        }
                        if (session.User.AccessLevel == ACCESS_LEVEL_HIGH)
                        {
                            if (usr.AccessLevel == ACCESS_LEVEL_HIGH) throw new InvalidOperationException("Admin's cannot invite each other, they have full power without invitations");
                        }
                    }
                    List<Invitation> invitations = db.Invitations.Where(i => i.Email == email).ToList();
                    Invitation invitation = invitations.Where(i => i.Institution.Guid == institution.Guid).FirstOrDefault();
                    if (invitation == null)
                    {
                        invitation = new Invitation
                        {
                            Guid = Guid.NewGuid(),
                            Email = email,
                            Institution = db.Institutions.Where(i => i.Guid == institution.Guid).FirstOrDefault(),
                            InvitationCode = Convert.ToBase64String(Guid.NewGuid().ToByteArray()).Substring(0, 8).ToUpper(),
                            InvitedOn = DateTime.Now,
                            ExpiresOn = DateTime.Now.AddDays(INVITATION_EXPIRY_DAYS),
                            InvitedBy = session.User
                        };

                        while ((db.Invitations.Where(i => i.InvitationCode == invitation.InvitationCode).FirstOrDefault()) != null)
                        {
                            invitation.InvitationCode = Convert.ToBase64String(Guid.NewGuid().ToByteArray()).Substring(0, 8).ToUpper();
                        }

                        if (invitation.Institution != null)
                        {
                            db.Invitations.Add(invitation);
                            db.SaveChanges();
                            SendInvitation(invitation);
                            return PartialInvitation.FromInvitation(invitation);
                        }
                    }
                    SendInvitation(invitation);
                    return PartialInvitation.FromInvitation(invitation);
                }
            }
            return null; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:50:48.940

使用 WCF REST 时无法生成客户端代码，因此您的客户端可能仍连接到您的 SOAP 端点。要生成 Rest 客户端，请查看以下博客：http: [//blogs.msdn.com/b/pedram/archive/2008/04/21/how-to-consume-rest-services-with-wcf.aspx](http://blogs.msdn.com/b/pedram/archive/2008/04/21/how-to-consume-rest-services-with-wcf.aspx)

# mysql - 如何在没有死锁的情况下批量更新 InnoDB 表？

> ID：14562882
> 
> 赞同：2
> 
> 时间：2013-01-28T13:16:11.553
> 
> 标签：mysql, sql-update, innodb, deadlock

我有两个表，一个具有多对多关系（`fooBarTable`与列`fooId`和），另一个具有列的`barId`InnoDB 表并计算 in 的出现。`fooCounterTable``fooId``counter``fooId``fooBarTable`

从 中删除所有`barId`'s 时`fooBarTable`，我需要`fooCounterTable`相应地更新。

我尝试的第一件事是：

```
UPDATE fooCounterTable SET counter = counter - 1
    WHERE fooId IN (SELECT fooId FROM fooBarTable WHERE barId = 42 ORDER BY fooId); 
```

但我得到了这个错误：

```
MySQL error (1205): Lock wait timeout exceeded; try restarting transaction 
```

在添加`barId`'s 时更新表可以使用此 SQL 语句正常工作：

```
INSERT INTO `fooCounterTable` (fooId, counter) VALUES (42,1), (100,1), (123,1)
    ON DUPLICATE KEY UPDATE counter = counter + 1; 
```

所以我想在减少计数器时我会做同样的事情，即使插入 0 值看起来很愚蠢，这永远不会发生：

```
INSERT INTO `fooCounterTable` (SELECT fooId, 0 FROM fooBarTable WHERE barId = 42 ORDER BY fooId)
    ON DUPLICATE KEY UPDATE counter = counter - 1;' 
```

在大多数情况下，这似乎工作正常，但有时我会陷入僵局：

```
MySQL error (1213): Deadlock found when trying to get lock; try restarting transaction 
```

因此，我阅读了有关死锁的信息并发现`SELECT ... FOR UPDATE`并尝试了以下方法：

```
START TRANSACTION;
SELECT fooId FROM fooCounterTable 
    WHERE fooId IN (SELECT fooId FROM fooBarTable WHERE barId = 42 ORDER BY fooId) FOR UPDATE;
UPDATE fooCounterTable SET counter = counter - 1
    WHERE fooId IN (SELECT fooId FROM fooBarTable WHERE barId = 42 ORDER BY fooId);
COMMIT; 
```

这导致：

```
MySQL error (2014): commands out of sync 
```

谁能告诉我如何解决我的问题？

**更新**

发生最后一个错误（2014），因为我在执行 UPDATE 语句之前没有使用和释放 SELECT 语句的结果，这是强制性的。我解决了这个问题，我摆脱了错误 2014，但我仍然不时出现死锁（错误 1205），我不明白，为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:09:43.247

你知道在触发这个查询时你刚刚删除了什么 fooID 吗？

如果是这样，这似乎可行...

```
UPDATE fooCounterTable SET counter = 
  (SELECT count(*) FROM fooBarTable WHERE fooId = 42) 
  WHERE fooID = 42 
```

我想知道你是否真的需要那个柜台。如果您的索引设置正确，那么更规范化的方法不应该有太多的速度损失。

# c# - 为所有线程设置默认线程文化？

> ID：14562883
> 
> 赞同：18
> 
> 时间：2013-01-28T13:16:17.127
> 
> 标签：c#, multithreading

> **可能重复：**
> [设置应用程序的 CurrentCulture 和 CurrentUICulture](https://stackoverflow.com/questions/468791/setting-currentculture-and-currentuiculture-of-an-application)

我想为我在应用程序中打开的每个线程设置默认区域性。有没有办法设置它（无需在每个线程上单独设置）

谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-28T13:17:54.900

如果您使用的是 .net 4.5，则可以使用以下属性

`CultureInfo.DefaultThreadCurrentCulture`财产

*在 .NET Framework 4 及以前的版本中，默认情况下，所有线程的区域性都设置为 Windows 系统区域性。对于当前文化与默认系统文化不同的应用程序，这种行为通常是不可取的。在 .NET Framework 4.5 中，DefaultThreadCurrentCulture 属性使应用程序能够定义应用程序域中所有线程的默认区域性。*

[http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.defaultthreadcurrentculture.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.defaultthreadcurrentculture.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T13:22:26.043

如果您选择不使用 .NET 4.5，则可以创建一个静态帮助程序类，该类使用默认区域性构造线程。

# git - Bang 别名不起作用

> ID：14562892
> 
> 赞同：1
> 
> 时间：2013-01-28T13:16:59.160
> 
> 标签：git, msysgit, git-alias

我尝试添加一些 bang 别名（比如...！git stash pop）。但那些不起作用。

```
[alias]
    pop = !git stash pop 
```

不幸的是，这不起作用（请忽略我可以在没有爆炸的情况下使用它的事实 - 我需要一个命令来测试它。我的别名更复杂）。

```
$ git pop
fatal: 'stash' appears to be a git command, but we were not
able to execute it. Maybe git-stash is broken? 
```

它没有爆炸声

```
[alias]
    pop = stash pop 
```

正如预期的那样

```
$ git pop
No stash found. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:30:31.313

我将其追溯到路径中有非 ascii 用户名和空格！

Windows 中路径中的空格确实适用于 msysgit 可执行文件。但对任何 bash 都不起作用。您需要在它周围添加引号才能在 bash 中工作。那打破了msysgit。所以我需要将 git 安装到非间隔路径。然后它找不到我的 SSH 密钥，因为我的主目录 /home/Tomáš -> 是 /home/Tom%45%64 或类似的东西中的非 ascii 字符。所以我需要重命名我的本地用户。这似乎完全解决了这个问题。

# android - Android：如何自定义 AlertDialog、Dialog 和 Spinner 标题

> ID：14562894
> 
> 赞同：3
> 
> 时间：2013-01-28T13:17:00.043
> 
> 标签：android, android-spinner, android-alertdialog, android-dialog

我想自定义所有对话框、alertDialogs 和微调器。我想更改文本的颜色和标题栏的背景。

![在此处输入图像描述](../Images/69d3ae5e83d6412aec44f9c50d677172.png)

我尝试更好地解释：我希望文本 (JOLLY BAR DI ...) 为白色，标题的背景（从对话框顶部到包含标题下方的软蓝线）为蓝色（# 044592）。

我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T15:22:43.490

好的，我几乎解决了这个问题（我正在回答我自己的问题，因为它可能会帮助其他与我有同样问题的人）。微调器、DatePickers 等问题仍然存在。

对于 AlertDialogs 我做了这样的事情：

```
AlertDialog.Builder builder = new AlertDialog.Builder(MyActivity.this, AlertDialog.THEME_HOLO_LIGHT);
//Then I do what I need with the builder (except for setTitle();
LayoutInflater inflater = getLayoutInflater();
View view=inflater.inflate(R.layout.dialog_custom_title, null);
TextView title = (TextView)view.findViewById(R.id.myTitle);
title.setText("Title I want to show");
builder.setCustomTitle(view);
AlertDialog alert = builder.create();
alert.show(); 
```

dialog_custom_title.xml ：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#044592" >

   <TextView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/myTitle"
        android:layout_width="fill_parent"
        android:textSize="20dp"
        android:layout_height="70dp"
        android:layout_marginLeft="25dp"
        android:paddingTop="22dp"
        android:textColor="@android:color/white"
        android:textStyle="bold" />

</RelativeLayout> 
```

对于我希望看起来像对话框的活动，我这样做：我在 Manifest.xml 中声明它们如下：

```
<activity
     android:name="com.aveschini.AnotherActivity"
     android:screenOrientation="portrait"
     android:label="My Dialog"
     android:theme="@style/MyDialog"
     android:windowSoftInputMode="adjustPan" /> 
```

然后，在 res/values/styles.xml 文件中，我这样做：

```
 <style name="AppTheme" parent="android:Theme.Holo.Light" />

    <style name="MyDialog" parent="android:Theme.Holo.Light.Dialog">
        <item name="android:windowTitleStyle">@style/DialogWindowTitle</item>
    </style>

    <style name="DialogWindowTitle">
        <item name="android:textAppearance">@style/TextAppearance.DialogWindowTitle</item>
        <item name="android:background">#044592</item>
    </style>

    <style name="TextAppearance.DialogWindowTitle" parent="android:TextAppearance">
        <item name="android:textColor">@android:color/white</item>
        <item name="android:textStyle">bold</item>
        <item name="android:textSize">20sp</item>
    </style> 
```

我仍然得到标题和正文之间的浅蓝色分隔线......仍在努力。如前所述，我仍然不知道如何处理 Spinners、DatePicker 等......

这就是结果：AlertDialog：

![在此处输入图像描述](../Images/2afd8da69347c96936c175eaecb58e76.png)

还有一个看起来像对话框的 Activity：

![在此处输入图像描述](../Images/05e10b5347b15ebf741d49e3c5060a9a.png)

# php - curl_multi_add_handle() 可以重复调用吗？

> ID：14562898
> 
> 赞同：0
> 
> 时间：2013-01-28T13:17:16.063
> 
> 标签：php, curl, libcurl

```
$queue = curl_multi_init();
foreach ($urls as $url) {
        $ch = curl_init();
        curl_multi_add_handle($queue , $ch);
    }

curl_multi_exec($queue, $active)
***then call curl_multi_add_handle() second time***
    foreach ($OtherUrls as $url) {
            $ch = curl_init();
            curl_multi_add_handle($queue , $ch);
        } 
```

但是发现添加的$OtherUrls 没有被获取。似乎 curl_multi_add_handle() 在 curl_multi_exec() 被调用后不能被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:31:44.350

我认为这个问题的事实和细节太少，我们无法指出任何特定的缺陷。

但您几乎可以在您认为合适的任何时间点为多功能手柄添加简单的手柄。至少在您关闭手柄之前。

# c - 在 Ubuntu 中使用 C 语言进行套接字编程

> ID：14562901
> 
> 赞同：1
> 
> 时间：2013-01-28T13:17:18.533
> 
> 标签：c, sockets, unix

我正在 ubuntu 中学习套接字程序，为此我编写了以下用于服务器客户端通信的程序。该程序未打开端口。我还有一些关于服务器客户端通信的其他问题：

*   当服务器接受客户端请求时，服务器是否在接受请求的那一刻开始从客户端读取？
*   u_connect 和 u_accept() 返回的文件描述符是否相同？（我找不到它，因为我的端口没有打开）
*   由于我在同一台计算机上测试服务器客户端通话，我可以使用随机数作为端口吗？

我正在使用一个包含用于套接字编程的 OS 函数的[包装库。](http://usp.cs.utsa.edu/usp/programs/usp_apC.tar)

这是代码：

服务器.c

```
int main()
{
  char client[50];
  char buf[1024];
  u_port_t portnumber;
  portnumber = 4862;
  int fd = u_open(portnumber);
  int communFd = u_accept(fd, client, 50);
  printf("Opened com %d\n\n", communFd);
  fprintf(stderr, "\nComun fd is %d\n\n\n", communFd);
  read(communFd, buf, 1024);
  write(STDOUT_FILENO, buf, 1024);
  fprintf(stderr, "\n\nReading complete\n");
  return 0;
} 
```

客户端.c

```
int main()
{
  u_port_t portnumber;
  portnumber = 4862;
  char client[] = "Alfred";
  char buf[1024];
  int communFd = u_connect(portnumber, client);
  printf("comun is %d\n", communFd);
  read(STDIN_FILENO, buf, 1024);
  write(communFd, buf, 1024);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:52:32.313

首先，我建议不要使用该包装器，因为它使用了一些非常古老的技术。我建议阅读[getaddrinfo](http://pubs.opengroup.org/onlinepubs/009695399/functions/getaddrinfo.html)、[bind](http://pubs.opengroup.org/onlinepubs/009695399/functions/bind.html)、[listen](http://pubs.opengroup.org/onlinepubs/009695399/functions/listen.html)、[recv](http://pubs.opengroup.org/onlinepubs/009695399/functions/recv.html)、[send](http://pubs.opengroup.org/onlinepubs/009695399/functions/send.html)和[close](http://pubs.opengroup.org/onlinepubs/009695399/functions/close.html)以及滚动您自己的 POSIX 套接字代码。你会得到更好的理解。我还建议阅读[Beej 的网络编程指南](http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html)。也许一本书甚至会派上用场……

1.  不。 read() 函数进行读取，而不是服务器。关于这一点，最好将 read() 的返回值存储在某处并找出它的重要意义。[这](http://pubs.opengroup.org/onlinepubs/009695399/functions/read.html)是手册，如果您像我们许多人一样相信阅读是一种比反复试验更有效的机制。
2.  不。 u_open 似乎返回一个服务器套接字，其中 read() 不是一个有效的操作，尽管 accept() 是。u_accept 似乎返回一个对等套接字，其中 accept() 不是有效操作，尽管 read() 是。
3.  当然，前提是端口大于 1024（小于 1024 通常需要超级用户权限），小于 65535，并且端口尚未绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:48:43.050

这是错误的。

```
read(communFd, buf, 1024);
write(STDOUT_FILENO, buf, 1024); 
```

你应该这样做：

```
ssize_t r;
size_t space_left = 1024
while ((r=read(communFd, buf, space_left))>0) {
    space_left-=r;
    write(STDOUT_FILENO,buf,r);
} 
```

因为在一次写入中发送的内容可能会通过网络分段并通过多次读取来检索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:40:09.563

> 当服务器接受客户端请求时，服务器是否在接受请求的那一刻开始从客户端读取？

当客户端（通过 write()）发送的数据被接收到并且可以进入套接字读取缓冲区时，服务器可以读取。

> u_connect 和 u_accept() 返回的文件描述符是否相同？（我找不到它，因为我的端口没有打开）

不，即使服务器端和客户端在同一个进程中运行也不会。

> 由于我在同一台计算机上测试服务器客户端通话，我可以使用随机数作为端口吗？

您可以绑定从 0 到 65535 的端口。从 0 到 1024 的端口已被调用`known ports`并已分配给特定服务`IANA`。我的建议是使用*49152-65535*范围内的端口号，但没有人禁止您使用较低的值。

如果端口被另一个进程绑定，它将返回错误代码。尝试另一个

# ant - 仅在满足条件时执行 Ant 任务

> ID：14562904
> 
> 赞同：41
> 
> 时间：2013-01-28T13:17:31.520
> 
> 标签：ant

仅当满足条件时，我才需要在特定目标中执行 Ant 任务。

我找到了一种在目标级别定义条件的方法，但不是在任务级别。我还发现了一个实现[IF 任务](http://ant-contrib.sourceforge.net/tasks/tasks/if.html)的贡献。

我的问题是，您是否知道通过标准 Ant 任务实现此目标的任何方法？

更长的解释：我正在尝试启动 Tomcat 服务器以防它停止。要检测它是否已停止，我使用以下代码：

```
<echo message="Checking whether Tomcat is running"/>
<condition property="tomcat.running">
  <socket server="${tomcat.host}" port="${tomcat.port}"/> 
</condition> 
```

`${tomcat.running}`所以我在这个目标中的下一个任务是一个 exec 任务，只有当它是 false时才应该执行。正如我所说，我不想在目标中添加单个任务来使用除非属性。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-28T17:07:15.660

Ant 目标可以有一个可选的`if`or`unless`子句。`if`这意味着仅当属性已设置、使用子句或未使用`unless`子句¹设置时才执行任务。有趣的是，在第一次执行任何相关任务***后***`if`检查or`unless`子句。

 *这意味着，您可以在标准 Ant 中执行此操作，作为仅在满足特定条件时执行 Ant 任务的一种方式：

```
 <target name="test.if.tomcat.is.running">
      <condition property="tomcat.running">
          <socket server="${tomcat.host}" port="${tomcat.port}"/> 
      </condition>
</target>

<target name="my.target"
    if="tomcat.running"
    depends="test.if.tomcat.is.running">
    <yaddah/>
    <yaddah/>
    <yaddah/>
</target> 
```

您指定希望 Ant 执行 Target `my.target`。Ant 注意到这`my.target`取决于`test.if.tomcat.is.running`目标，并将首先执行该目标。如果 Tomcat 实际正在运行，该`test.if.tomcat.is.running`任务将设置该属性。`tomcat.running`否则，不设置该属性。

最后，Ant 会回到`my.target`目标，查看是否设置了属性`tomcat.running`，只有设置了才会执行目标`my.target`。

或者，您可以使用 Ant-contrib 任务，这可以使您的整个构建过程更容易理解。

如果你想走 Ant-Contrib 路线，有一个简单的方法来设置 Ant-Contrib，所以 Ant-contrib jar 实际上是你项目的一部分。如果有人从版本控制系统中签出您的项目，他们还将获得 Ant-contrib jar，因此不必自己安装 Ant-Contrib。

下载 Ant-Contrib jar，并将其放入项目根目录中名为`antlib/ac`. 可`antlib`用于各种可选任务 jar，例如[Findbugs](http://findbugs.sourceforge.net)或 PMD。只需将每个可选的 Ant jar 放在它们自己的目录下`antlib`（就像我把 Ant-Contrib 放在目录下一样`ac`）。

然后，在您的 中`build.xml`，您以这种方式指定 Ant-Contrib 任务：

```
<taskdef resource="net/sf/antcontrib/antlib.xml">
   <classpath>
       <fileset dir="${basedir}/antlib/ac"/>
   </classpath>
</taskdef> 
```

现在，您可以使用 Ant-Contrib 任务，而不必担心它们是否安装在特定机器上。您签出您的项目，并且您可以自动访问这些任务。

* * *

**1.**没错，该`if/unless`子句检查是否设置了属性而不是`true`/`false`可能会引起很多混乱。我见过开发人员将属性设置为`false`or `no`，然后想知道为什么目标实际上正在执行，因为`if`子句设置为 false。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-08-28T09:57:17.110

从*版本 1.9.1* (*)开始，如果您在项目元素中声明必要的命名空间，则ant 支持**在任何任务上**以更细粒度的方式使用**if- 和 unless- 条件。**

 **(*)*请使用最新版本的 ant（撰写本文时为 1.9.6），因为版本 1.9.1 包含缺陷 WRT 这个新功能，正如用户 @Rebse 亲切指出的那样。*

在下面的示例中，您可以尝试评论/取消评论属性...

```
<project name="test"
         xmlns:if="ant:if"
         xmlns:unless="ant:unless">

  <property name="is.good" value="hohoho"/>
  <!--property name="hide.base" value="boo"/-->

  <target name="foo">
     <echo unless:set="hide.base">${basedir}</echo>
     <echo if:set="is.good">GOOD</echo>
  </target>
</project> 
```

...并观察如下输出：

```
Buildfile: D:\test\ant\taskcondition\build.xml
foo:
     [echo] D:\test\ant\taskcondition
     [echo] GOOD
BUILD SUCCESSFUL
Total time: 191 milliseconds 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-21T17:54:18.710

如果您想要“if else”类型的实现：

```
<target name="test.if.tomcat.is.running">
      <condition property="tomcat.running" value="true" else="false">
          <socket server="${tomcat.host}" port="${tomcat.port}"/> 
      </condition>
</target>

<target name="my.target.running"
    if="${tomcat.running}"
    depends="test.if.tomcat.is.running">
...
</target>

<target name="my.target.ifnotrunning"
    unless="${tomcat.running}"
    depends="test.if.tomcat.is.running">
   .....
</target> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-12T11:37:57.647

在某些情况下，您无法使 Ant 目标依赖于另一个 Ant 目标，因为**if**应该基于在 exec 之前初始化的值进行评估（我可以提供一个清晰的示例，但为了简单起见，我不会提供）。

在类 Unix 系统上，替代方案（在某些情况下更可取）如下：

```
<!-- the property that contains the value to be checked agains IF -->
<property name="myprop" value="true"/>

<!-- the Ant's exec combined with OS-IF command -->
<exec executable="bash">
        <arg value="-c" />
        <arg value="if [ &quot;${myprop}&quot; != &quot;$${myprop}&quot;] || [&quot;${tag_exists}&quot; != &quot;true&quot; ]; then my-bash-command _arguments_; fi" />
</exec> 
```

在上面的**my-bash-command**说明了您要执行的命令/程序，并且***参数***说明了该命令的参数。

请注意，如果未设置**myprop**，则 ${myprop} 将简单地计算为字符串“$”+“{”+“myprop”+“}”（即“${myprop}”），因此我们有将**myprop**的值与该字符串进行比较。

另一方面，当设置**myprop**时，它的值可能是字符串**true/false**，因此为了检查是否满足我们的条件，我们应该将**myprop****与**字符串**true**（或您可能拥有的任何值）进行比较。

**Conclusion**: using the Ant's **exec** combined with the OS command **IF** we can execute arbitrary OS commands/programs without the need of another Ant target. Using the same logic as above the **IF**-like statement may be tweaked to work even on Windows.***

# android - AsyncTask 中的 progressDialog 停止旋转

> ID：14562905
> 
> 赞同：2
> 
> 时间：2013-01-28T13:17:32.077
> 
> 标签：android, android-progressbar

我试图在加载一些信息时将 ProgressDialog 放入 AsyncTask 并旋转。问题是它启动良好，但突然停止旋转，一瞬间，该应用程序似乎不再工作了。旋转只是获取堆栈，直到加载所有信息时它消失并且信息正确显示。这是我正在使用的 AsyncTask：

```
 public class LoadCarsTask extends AsyncTask<String, Car, List<Car>>{

    private SearchFragmentActivity sma;
    private ListFragment fragment;

    public LoadCarsTask (ListFragment fragment){
        this.fragment = fragment;
        dialog = new ProgressDialog(fragment.getActivity());
    }

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        adapter = new SearchCarListAdapter(SearchCarListActivity.this.getActivity(), showedCars, showedDistance, showedReviews, showedPhotos);
        dialog.setMessage("Finding Cars...");
        dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        dialog.show();
    }

    public SearchFragmentActivity getSma() {
        return sma;
    }

    public void setSma(SearchFragmentActivity sma) {
        this.sma = sma;
    }

    @Override
    protected List<Car> doInBackground(String... params) {
        maxPerHour = Double.parseDouble(filterparams[0]);
        maxPerKm = Double.parseDouble(filterparams[1]);
        maxDistance = Double.parseDouble(filterparams[2]);
        longitude = Double.parseDouble(filterparams[3]);
        latitude = Double.parseDouble(filterparams[4]);
        URL url;
        try {
            //A long calculation goes here
        return cars;
    }

    @Override
    protected void onProgressUpdate(Car... values) {
        // TODO Auto-generated method stub
        super.onProgressUpdate(values);         
    }

    @Override
    protected void onPostExecute(List<Car> result) {
        super.onPostExecute(result);
        SearchFragmentActivity.setCars(cars);
        sfa.setUpDistances();
        distance = SearchFragmentActivity.getDistances();
        setUpReviews();
        setUpPhotos();
        while (carsCount<carsNumber && carsCount<cars.size()){
            showedCars.add(cars.get(carsCount));
            showedDistance.add(distance.get(carsCount));
            showedPhotos.add(photos.get(carsCount));
            showedReviews.add(reviews.get(carsCount));
            carsCount++;
        }
        adapter = new SearchCarListAdapter(SearchCarListActivity.this.getActivity(), showedCars, showedDistance, showedReviews, showedPhotos);
        adapter.setCurrentLocation(loc);
        setListAdapter(adapter);
        if(dialog.isShowing())
            dialog.dismiss();
        //sma.showAvailableCarsOnMap(); 
    }

}

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:47:00.720

```
 private class DownloadFilesTask extends AsyncTask<URL, Integer, Long> {
     protected Long doInBackground(URL... urls) {
         int count = urls.length;
         long totalSize = 0;
         for (int i = 0; i < count; i++) {
             totalSize += Downloader.downloadFile(urls[i]);
             publishProgress((int) ((i / (float) count) * 100));
             // Escape early if cancel() is called
             if (isCancelled()) break;
         }
         return totalSize;
     }

     protected void onProgressUpdate(Integer... progress) {
         setProgressPercent(progress[0]);
     }

     protected void onPostExecute(Long result) {
         showDialog("Downloaded " + result + " bytes");
     }
 } 
```

检查[此](http://developer.android.com/reference/android/os/AsyncTask.html)链接以获取更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:26:33.690

尝试这个，

```
protected class GetTask extends AsyncTask<Void, Void, Integer> {

    protected void onPreExecute() {
    ProgressDialog  mProgressDialog = ProgressDialog.show(MainActivity.this,
                "", "Finding cars");
    }

    @Override
    protected Integer doInBackground(Void... params) {
        // TODO Auto-generated method stub
        //Do your stuff

        return 0;
    }

    protected void onPostExecute(Integer result) {
        super.onPostExecute(result);

        if (mProgressDialog.isShowing()) {
            mProgressDialog.dismiss();
        }

    }
} 
```

# python - python flask-security：加密错误“无法识别哈希”

> ID：14562911
> 
> 赞同：4
> 
> 时间：2013-01-28T13:18:04.207
> 
> 标签：python, flask

我在 Flask 项目中使用 Flask-Security。基本上一切正常，直到我尝试打开密码加密。基本上我遵循了这个：[http](http://packages.python.org/Flask-Security/configuration.html) ://packages.python.org/Flask-Security/configuration.html 这导致我添加了这个：

```
app.config['SECURITY_PASSWORD_HASH'] = 'bcrypt'
app.config['SECURITY_PASSWORD_SALT'] = '$2a$16$PnnIgfMwkOjGX4SkHqSOPO' 
```

不幸的是，这会导致错误：

```
File "/home/geoadmin/.virtualenvs/flask/lib/python2.7/site-packages/flask/app.py", line 1701, in __call__
return self.wsgi_app(environ, start_response)
File "/home/geoadmin/.virtualenvs/flask/lib/python2.7/site-packages/flask/app.py", line 1689, in wsgi_app
response = self.make_response(self.handle_exception(e))
File "/home/geoadmin/.virtualenvs/flask/lib/python2.7/site-packages/flask/app.py", line 1687, in wsgi_app
response = self.full_dispatch_request()
File "/home/geoadmin/.virtualenvs/flask/lib/python2.7/site-packages/flask/app.py", line 1360, in full_dispatch_request
rv = self.handle_user_exception(e)
File "/home/geoadmin/.virtualenvs/flask/lib/python2.7/site-packages/flask/app.py", line 1358, in full_dispatch_request
rv = self.dispatch_request()
File "/home/geoadmin/.virtualenvs/flask/lib/python2.7/site-packages/flask/app.py", line 1344, in dispatch_request
return self.view_functions[rule.endpoint](**req.view_args)
File "/home/geoadmin/.virtualenvs/flask/lib/python2.7/site-packages/flask_security/decorators.py", line 171, in wrapper
return f(*args, **kwargs)
File "/home/geoadmin/.virtualenvs/flask/lib/python2.7/site-packages/flask_security/views.py", line 72, in login
if form.validate_on_submit():
File "/home/geoadmin/.virtualenvs/flask/lib/python2.7/site-packages/flask_wtf/form.py", line 123, in validate_on_submit
return self.is_submitted() and self.validate()
File "/home/geoadmin/.virtualenvs/flask/lib/python2.7/site-packages/flask_security/forms.py", line 165, in validate
if not verify_password(self.password.data, self.user.password):
File "/home/geoadmin/.virtualenvs/flask/lib/python2.7/site-packages/flask_security/utils.py", line 84, in verify_password
return _pwd_context.verify(get_hmac(password), password_hash)
File "/home/geoadmin/.virtualenvs/flask/lib/python2.7/site-packages/passlib/context.py", line 2534, in verify
record = self._get_or_identify_record(hash, scheme, category)
File "/home/geoadmin/.virtualenvs/flask/lib/python2.7/site-packages/passlib/context.py", line 2258, in _get_or_identify_record
return self._identify_record(hash, category)
File "/home/geoadmin/.virtualenvs/flask/lib/python2.7/site-packages/passlib/context.py", line 1455, in identify_record
raise ValueError("hash could not be identified")
ValueError: hash could not be identified 
```

我对发生的事情一无所知。我以为我生成了一个很好的 bcrypt 哈希，但是网站上没有密码加密的真实示例，而且错误本身让我感到困惑：/

使用的软件： - Ubuntu 12.04LTS - Python 2.7.2 - FLask 0.9 - Flask-Security 1.5.4 - 通过 MongoAlchemy 在 MongoDB 2.2 上运行

谢谢你的帮助！！

编辑：感谢 Bikeshedder，这可能是罪魁祸首：

```
# Create a user to test with
@app.before_first_request
def create_user():
    user_datastore.create_user(email='test@test.net', password='testerdetest') 
```

我假设 create_user 方法会自动加密密码。但显然它没有......这里的文档并不是很清楚：

```
Class flask_security.datastore.MongoEngineUserDatastore(db, user_model, role_model)
A MongoEngine datastore implementation for Flask-Security that assumes the use of the Flask-MongoEngine extension.
create_user(**kwargs)
Creates and returns a new user from the given parameters. 
```

编辑 2：进一步研究 BikeShedder 的建议，我将标准用户创建更改为：

```
# Create a user to test with
@app.before_first_request
def create_user():
    user_datastore.create_user(email='test@test.net', password=bcrypt.hashpw('testerdetest', app.config['SECURITY_PASSWORD_SALT']) 
```

这样就解决了错误，但它给了我一个“无效密码”，这意味着烧瓶安全所做的事情与我在加密中所做的不同......啊！

编辑 3：从 bcrypt 更改为 passlib（flask-security 也使用）

```
app.config['SECURITY_PASSWORD_SALT'] = '/2aX16zPnnIgfMwkOjGX4S' 
```

和

```
user_datastore.create_user(email='test@test.net', password=passlib.hash.bcrypt.encrypt('testerdetest', salt=app.config['SECURITY_PASSWORD_SALT'])) 
```

仍然得到一个无效的密码:(如果我查看[https://github.com/mattupstate/flask-security/blob/develop/flask_security/utils.py](https://github.com/mattupstate/flask-security/blob/develop/flask_security/utils.py)的源代码，它似乎只使用了 sha512 加密......我不明白文档然后...

编辑 5：已解决（感谢您将我置于正确的方向！）flask.ext.security.utils.encrypt_password() 成功了。但是，我仍然怀疑它是否真的是 bcrypt，但是好吧，它至少是加密的......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-12T12:04:13.877

我有同样的问题，我解决了它：

```
from flask.ext.security.utils import encrypt_password
user_datastore.create_user(email='test@test.fr', password=encrypt_password('password')) 
```

优点是我们可以选择我们想要的 SECURITY_PASSWORD_HASH 和 SECURITY_PASSWORD_SALT 值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T13:28:32.283

由于您没有解释何时发生此错误，我不得不猜测它是在尝试登录时发生的。

如果是这种情况，这意味着存储在 DB 中的密码格式错误。它可能仍然是纯文本，并且 Flask-Security 无法找出正在使用的散列算法。

解决此问题的最简单方法是重置用户的密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-12T01:13:16.897

老问题，但[开发人员](https://github.com/mattupstate/flask-security/issues/143#issuecomment-28662247)给出了明确的答案......

> 这完全取决于您如何将用户添加到数据库中。如果您已设置 SECURITY_REGISTERABLE = True，并且仅通过内置注册表单添加用户，那么您会没事的。如果您通过任何其他方式添加用户，则必须在将用户记录保存到数据库之前使用 flask_security.utils.encrypt_password 加密密码。

```
from flask.ext.security.utils import encrypt_password
db.create_user(email='test@test.com', password=encrypt_password('password')) 
```

# facebook-social-plugins - 访问 http://developers.facebook.com/apps 总是重定向到我的“公司”页面

> ID：14562920
> 
> 赞同：-3
> 
> 时间：2013-01-28T13:18:52.487
> 
> 标签：facebook-social-plugins, user-permissions

每次我尝试访问[http://developers.facebook.com/apps](http://developers.facebook.com/apps)时，都会被重定向到我的公司页面。我正在尝试设置一个可以在我的网站上使用的应用程序，但这使它变得非常困难。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:22:48.753

你正在攻击公司的防火墙，它禁止程序员在工作时间使用 Facebook……

这当然不是 Stack Overflow 的问题（这个网站是针对编程问题的），这样的问题最好在[SuperUser.com上提出](https://superuser.com/)

# c++ - 具有两个线程（生产者、消费者）的 STL 队列

> ID：14562922
> 
> 赞同：3
> 
> 时间：2013-01-28T13:19:00.183
> 
> 标签：c++, multithreading, winapi, thread-safety

我想要队列安全的关键部分，以便线程不会同时访问队列。即使我评论与关键部分相关的行，此代码也有效。谁能解释为什么？

```
queue<int> que;
CRITICAL_SECTION csection;
int i=0;

DWORD WINAPI ProducerThread(void*)
{

    while(1)
    {
        //if(TryEnterCriticalSection(&csection))
        {
            cout<<"Pushing value "<<i<<endl;
            que.push(i++);
            //LeaveCriticalSection(&csection);
        }
    }
}

//Consumer tHread that pops out the elements from front of queue
DWORD WINAPI ConsumerThread(void*)
{
    while(1)
    {
        //if(TryEnterCriticalSection(&csection))
        {
            if(!que.empty())
            {
                cout<<"Value in queue is "<<que.front()<<endl;
                que.pop();
            }
            else
                Sleep(2000);
            //LeaveCriticalSection(&csection);
        }
    }
}

int _tmain(int argc, _TCHAR* argv[])
{
    HANDLE handle[2];
    //InitializeCriticalSection(&csection);
    handle[0]=NULL;
    handle[1]=NULL;
    handle[0]=CreateThread(0,0,(LPTHREAD_START_ROUTINE)ProducerThread,0,0,0);
    if(handle[0]==NULL)
        ExitProcess(1);

    handle[1]=CreateThread(0,0,(LPTHREAD_START_ROUTINE)ConsumerThread,0,0,0);
    if(handle[1]==NULL)
        ExitProcess(1);

    WaitForMultipleObjects(2,handle,true,INFINITE);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:31:44.250

在您的特定情况下， cout 将比“get”花费数百倍的时间。并且当队列为空时您会睡觉，这允许其他线程在您的“消费者”线程获取任何队列之前填充大量队列。

全速运行（没有调试打印，没有睡眠），确保你运行了很长时间，并用简单的数学检查另一端的值。

像这样的东西：

```
int old_val = val;
while(1)
{
    if(!que.empty())
    {
       int  val = que.front();

       que.pop();
       if (old_val+1 != val)
       {
          /// Do something as things have gone wrong!
       }
     }
} 
```

请注意，这也可能不会立即/微不足道地出错。你想运行它几个小时，最好在机器上运行其他东西——比如一个批处理文件：

```
@echo off
:again 
dir c:\ /s > NUL:
goto again 
```

[自从我为 Windows 编写批处理脚本以来已经有一段时间了，所以这可能不是 100% 正确，但我认为你应该能够在谷歌上搜索我出错的任何答案——这个想法是“中断”机器]。

此外，尝试运行一对线程的多个副本，每对有一个单独的队列——这将强制执行更多的调度活动，并可能引发问题。

就像安东说的那样，其中一些东西通常很难重现。我在实时操作系统中遇到了一个问题，队列被弄乱了——唯一真正的迹象是内存最终在“压力测试”期间耗尽（它会做“随机”的事情，包括几个不同的中断源）。该操作系统已经在数百个单元的生产测试中进行了测试，并作为真正的生产系统投入使用[并且在不同处理器上运行的相同代码再次在世界各地操作电话交换机，没有客户抱怨内存泄漏] ，貌似没有内存泄漏！但是队列处理中的一个“漏洞”，在一个函数中，只是运行。在认为是压力测试本身偶尔会遇到一些奇怪的情况导致排队时，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T13:33:48.763

这*意外地*起作用，大概有两个原因：

1.  它不起作用，但你永远不会注意到。消费者拉出队列中的任何东西，或者它认为队列中的任何东西。如果什么都没有，它会一直休眠，直到生产者推送了一些东西。这“有效”是因为生产者只追加到末尾，而消费者只从头开始读取。除了更新`size`。您很可能最终会拥有一个处于存在元素但`size`不反映它的状态的队列。这是令人讨厌的，但相反的情况，也可能迟早发生，更令人讨厌。
    你没有办法知道。好吧，您最终可能会知道，排队的工作项是否由于某种原因“消失”或者内存不足，但请尝试找出原因。
2.  您使用`printf`（或`std::cout`，相同），它在内部被关键部分锁定。这种“类型”以您需要的方式锁定对队列的访问，*除非它没有*。它将在 99.9% 的时间内工作（偶然地，因为消费者将被阻止尝试打印，这比追加到队列的生产者需要更长的时间来唤醒）。但是，当在打印之后发生上下文切换时，它会突然失败。砰，你死定了。

您确实**绝对**需要使用关键部分对象或互斥锁来保护关键代码部分。否则，结果是不可预测的。与人们可能相信的相反，“但它有效”不是一件好事，它是可能发生的最糟糕的事情。因为它只能在它不起作用之前起作用，然后你不知道为什么。

也就是说，您可以使用 IO 完成端口，它可以非常有效地为您完成所有工作。您可以使用[GetQueuedCompletionStatus](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364986%28v=vs.85%29.aspx)从端口拉出一个“事件”，并使用[PostQueuedCompletionStatus](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365458%28v=vs.85%29.aspx)发布一个。完成端口完成队列的整个处理，包括为您与多个消费者进行适当的同步（并且它以 LIFO 顺序执行，这有利于避免上下文切换和缓存失效）。
每个事件都包含一个指向`OVERLAPPED`结构的指针，但完成端口不使用它，您可以传递*任何*指针（或者，如果您觉得这样更好，传递一个指向 an 的指针，`OVERLAPPED`后跟您自己的数据）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:23:01.720

`CRITICAL_SECTION`防止这种错误的最大问题之一是*很难重现它们*。您必须预测它会如何失败而无法展示它。

当您保护自己的代码而不是包装非线程安全的库调用时，通常可以通过`Sleep`在某个地方添加 a 来触发竞争条件。在您发布的代码中，生产者没有机会这样做（无论不变量被破坏，它都在内部完成），并且当只有一个消费者时，消费者检查空队列`que.push`的潜在 [TOCTTOU问题不存在。](http://en.wikipedia.org/wiki/Time_of_check_to_time_of_use)如果我们可以添加`Sleep`到队列实现中，那么我们就能以可预测的方式使事情出错。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-28T16:49:25.327

如果只有一个生产者和一个消费者，队列代码对于这种弹出轮询是安全的。如果生产者推送使用临时索引/指针将数据插入下一个空队列位置，并且仅将递增的“临时索引”存储到队列“下一个空”成员中，则 queue.empty 可以返回 true，直到它可以安全消费者要弹出的数据。这种操作可能是偶然设计的，也可能是偶然发生的。

一旦你有多个生产者或多个消费者，它肯定会爆炸，迟早。

编辑-即使一个生产者和一个消费者的队列证明是安全的，除非有文档记录，否则您不应依赖它-某些 b* *** *d 将在下一个版本中更改实现:(

# c# - Weird CLR/Compiler behavior in Release Mode but not in Debug Mode

> ID：14562927
> 
> 赞同：0
> 
> 时间：2013-01-28T13:19:21.770
> 
> 标签：c#, compiler-construction, compact-framework, clr, dispose

I am developing an application for Windows CE and .NET Compact Framework 3.5.

**The code runs fine in Debug mode but when I change the mode to Release I get various exceptions**. I think it is related to some optimizations compiler trying to achieve in Release mode, like disposing and garbage collecting an object too early.

Following method, trying to insert entities to Sql Compact database, throws two exceptions(I think it is randomly):

```
public int Add<T>(List<T> entities)
    {
        int rowsEffected = 0;
        EntityMetadata metadata = GetMetadata<T>();
        using (SqlCeCommand command = new SqlCeCommand())
        {
            command.Connection = connection;
            command.CommandType = CommandType.TableDirect;
            command.CommandText = metadata.EntityMapAttribute.TableName;
            SqlCeResultSet set = command.ExecuteResultSet(ResultSetOptions.Scrollable | ResultSetOptions.Updatable);

            // Get generated Id, used in the loop below
            command.CommandType = CommandType.Text;
            command.CommandText = "SELECT @@IDENTITY";
            foreach (var entity in entities)
            {
                SqlCeUpdatableRecord record = set.CreateRecord();
                PropertyMetadata pkPropertyMetadata = null;
                foreach (var prop in metadata.PropertyMetadataList)
                {
                    if (prop.Attribute.IsPK)
                    {
                        // Identify PK Property, avoid setting values (db automatically sets id)
                        pkPropertyMetadata = prop;
                    }
                    else
                    {
                        object columnValue = prop.GetAccesssorDelegates<T>().Getter(entity);
                        record.SetValue(prop.Attribute.ColumnNumber, columnValue);
                    }
                }
                set.Insert(record);

                // Get Id of the inserted entity
                if (pkPropertyMetadata != null)
                {
                    object rawid = command.ExecuteScalar();
                    object convertedId = Convert.ChangeType(rawid, pkPropertyMetadata.Attribute.ColumnType, null);
                    pkPropertyMetadata.GetAccesssorDelegates<T>().Setter(entity, convertedId);
                }
                rowsEffected++;
            }
            return rowsEffected;
        }
    } 
```

**Exception 1:**

```
Test 'M:Babil04_Mobil.Tests.ORMTests.Engine_Works' failed: Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
System.AccessViolationException: Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
at System.Data.SqlServerCe.NativeMethods.ExecuteQueryPlan(IntPtr pTx, IntPtr pQpServices, IntPtr pQpCommand, IntPtr pQpPlan, IntPtr prgBinding, Int32 cDbBinding, IntPtr pData, Int32& recordsAffected, ResultSetOptions& cursorCapabilities, IntPtr& pSeCursor, Int32& fIsBaseTableCursor, IntPtr pError)
at System.Data.SqlServerCe.SqlCeCommand.ExecuteCommandText(IntPtr& pCursor, Boolean& isBaseTableCursor)
at System.Data.SqlServerCe.SqlCeCommand.ExecuteCommand(CommandBehavior behavior, String method, ResultSetOptions options)
at System.Data.SqlServerCe.SqlCeCommand.ExecuteScalar()
MORMEngine.cs(182,0): at MORM.MORMEngine.Add[T](List`1 entities)
Tests\ORMTests.cs(187,0): at Babil04_Mobil.Tests.ORMTests.Engine_Works() 
```

**Exception 2:**

```
Test 'M:Babil04_Mobil.Tests.ORMTests.Can_Insert_Multiple' failed: Cannot access a disposed object.
Object name: 'SqlCeResultSet'.
    System.ObjectDisposedException: Cannot access a disposed object.
    Object name: 'SqlCeResultSet'.
    at System.Data.SqlServerCe.SqlCeResultSet.CreateRecord()
    MORMEngine.cs(162,0): at MORM.MORMEngine.Add[T](List`1 entities)
    Tests\ORMTests.cs(187,0): at Babil04_Mobil.Tests.ORMTests.Can_Insert_Multiple() 
```

The unit test that calls the method throwing exception:

```
[Test]
    public void Can_Insert_Multiple()
    {
        MORMEngine engine = new MORMEngine(connectionString);
        engine.OpenConnection();

        List<TestInventory> inventories = new List<TestInventory>();
        for (int i = 0; i < 10000; i++)
        {
            inventories.Add(new TestInventory
            {
                Code = "test" + i
            });
        }

        Stopwatch watch = new Stopwatch();
        watch.Start();

        int rows = engine.Add<TestInventory>(inventories);

        watch.Stop();
        Console.WriteLine("Completed in {0} ms.", watch.ElapsedMilliseconds);
        Assert.That(rows == 10000);
    } 
```

Expcetions say that SqlCeResultSet is already **disposed**. Neither I call `Dispose()` method on the object nor set it to `null`. Why does it get disposed? Why does it run fine in Debug mode but not in Release mode?

Any ideas would be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:00:35.890

Per my earlier comments - it appears that there are no references to `engine` in the test after the `int rows = engine.Add<TestInventory>(inventories);` line, and the only reference to `engine` (via an implicit `this`) in `Add<T>(List<T>)` is the line where the connection is accessed. Subsequent to this line, there are no further references to the engine, and so in Release mode it will become eligible for GC. It appears (given that my suggestion corrected the issue) that there may be a finalizer somewhere (either in your `MORMEngine`, or perhaps elsewhere) that is causing the connection to be disposed whilst `Add<>()` is still running. (In Debug mode, the lifetimes of objects is extended until they exit scope so as to simplify debugging, which is likely why this issue only appears in Release mode)

To ensure that the engine remains alive throughout the call to `Add<>()`, the following approaches appear to work:

```
...
        watch.Start();

        int rows = engine.Add<TestInventory>(inventories);

        GC.KeepAlive(engine); // Ensure that the engine remains alive until Add completes

        watch.Stop();
... 
```

Or preferably explicitly dispose the `engine` with a `using()` statement:

```
[Test]
public void Can_Insert_Multiple()
{
    using (MORMEngine engine = new MORMEngine(connectionString))
    {
        engine.OpenConnection();

        List<TestInventory> inventories = new List<TestInventory>();
        for (int i = 0; i < 10000; i++)
        {
            inventories.Add(new TestInventory
            {
                Code = "test" + i
            });
        }

        Stopwatch watch = new Stopwatch();
        watch.Start();

        int rows = engine.Add<TestInventory>(inventories);

        watch.Stop();
        Console.WriteLine("Completed in {0} ms.", watch.ElapsedMilliseconds);
        Assert.That(rows == 10000);
    }
} 
```

# api - cURL 和 Google Maps API 没有输出

> ID：14562931
> 
> 赞同：2
> 
> 时间：2013-01-28T13:19:27.120
> 
> 标签：api, curl

没有地址的输出..这个PHP代码有什么问题？有什么解决办法吗？

谢谢

```
 <?php
            $str = "Street 1 ZIP City";
            $adr = $str;
            $url = "http://maps.googleapis.com/maps/api/geocode/json?adress=$adr&sensor=false";

            $curl = curl_init();
            curl_setopt($curl, CURLOPT_URL, $url);
            curl_setopt($curl, CURLOPT_HEADER, false);
            curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
            curl_setopt($curl, CURLOPT_ENCODING, "");
            $curlData = curl_exec($curl);
            curl_close($curl);

            $address = json_decode($curlData);
            print_r($address);
            ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:29:42.337

您的请求字符串中有错字：`adress`而不是`address`. 正确的请求字符串是：

```
$url = "http://maps.googleapis.com/maps/api/geocode/json?address=$adr&sensor=false"; 
```

而且在将其粘贴到请求字符串之前，您最好使用 PHP 的`urlencode()`函数作为参数。`$adr`

我已经复制并粘贴了您的代码，其中包含之前列出的更改，即我有：

```
 $str = "Street 1 ZIP City";
            $adr = urlencode($str);
            $url = "http://maps.googleapis.com/maps/api/geocode/json?address=$adr&sensor=false";

            $curl = curl_init();
            curl_setopt($curl, CURLOPT_URL, $url);
            curl_setopt($curl, CURLOPT_HEADER, false);
            curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
            curl_setopt($curl, CURLOPT_ENCODING, "");
            $curlData = curl_exec($curl);
            curl_close($curl);

            $address = json_decode($curlData);
            print_r($address); 
```

此示例在我的浏览器中的输出是：

```
stdClass Object
(
    [results] => Array
        (
            [0] => stdClass Object
                (
                    [address_components] => Array
                        (
                            [0] => stdClass Object
                                (
                                    [long_name] => 1st Street
                                    [short_name] => 1st St
                                    [types] => Array
                                        (
                                            [0] => route
                                        )

                                )

                            [1] => stdClass Object
                                (
                                    [long_name] => Rock Hill
                                    [short_name] => Rock Hill
                                    [types] => Array
                                        (
                                            [0] => locality
                                            [1] => political
                                        )

                                )

                            [2] => stdClass Object
                                (
                                    [long_name] => York
                                    [short_name] => York
                                    [types] => Array
                                        (
                                            [0] => administrative_area_level_2
                                            [1] => political
                                        )

                                )

                            [3] => stdClass Object
                                (
                                    [long_name] => South Carolina
                                    [short_name] => SC
                                    [types] => Array
                                        (
                                            [0] => administrative_area_level_1
                                            [1] => political
                                        )

                                )

                            [4] => stdClass Object
                                (
                                    [long_name] => United States
                                    [short_name] => US
                                    [types] => Array
                                        (
                                            [0] => country
                                            [1] => political
                                        )

                                )

                            [5] => stdClass Object
                                (
                                    [long_name] => 29730
                                    [short_name] => 29730
                                    [types] => Array
                                        (
                                            [0] => postal_code
                                        )

                                )

                        )

                    [formatted_address] => 1st Street, Rock Hill, SC 29730, USA
                    [geometry] => stdClass Object
                        (
                            [bounds] => stdClass Object
                                (
                                    [northeast] => stdClass Object
                                        (
                                            [lat] => 34.9241861
                                            [lng] => -81.01329
                                        )

                                    [southwest] => stdClass Object
                                        (
                                            [lat] => 34.923073
                                            [lng] => -81.0157245
                                        )

                                )

                            [location] => stdClass Object
                                (
                                    [lat] => 34.923658
                                    [lng] => -81.014494
                                )

                            [location_type] => GEOMETRIC_CENTER
                            [viewport] => stdClass Object
                                (
                                    [northeast] => stdClass Object
                                        (
                                            [lat] => 34.924978530291
                                            [lng] => -81.013158269708
                                        )

                                    [southwest] => stdClass Object
                                        (
                                            [lat] => 34.922280569709
                                            [lng] => -81.015856230292
                                        )

                                )

                        )

                    [partial_match] => 1
                    [types] => Array
                        (
                            [0] => route
                        )

                )

            [....more addresses here..]

        )

    [status] => OK
) 
```

# cakephp - 从关联中过滤条件

> ID：14562932
> 
> 赞同：1
> 
> 时间：2013-01-28T13:19:30.830
> 
> 标签：cakephp, foreign-keys, conditional-statements, model-associations

我有一个搜索功能，非常适合员工，所以我可以按姓名搜索。现在，我想通过 staffgroup.groupname 过滤员工，但不幸的是我收到了这个错误：

```
Column not found: 1054 Unknown column 'staffgroups.groupname' in 'where clause' 
```

我有以下表格布局

*   员工（一个人可以属于多个组）
*   staff_staffgroups（HABTM 链接表）
*   staffgroups（有组名）

* * *

我使用的条件如下：

```
$tmpConditions['AND'][] = array('Staff.isActive =' => "1");
$tmpConditions['OR'][] =  array('Staff.lastname LIKE' => "%$name%");
$tmpConditions['OR'][] = array('staffgroups.groupname LIKE' => "%$group%");
[...]

$this->Staff->recursive = 1;
$this->paginate = array('conditions' =>  $tmpConditions );
$this->set('staffs', $this->paginate()); 
```

我无法让它工作，尽管我认为条件设置正确。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:50:23.893

由于 HABTM 协会，您不能“开箱即用”地做到这一点。你必须手工完成。

首先你需要得到你正在寻找的 StaffGroup.id(s)

```
$group_ids = $this->Staff->StaffGroup->field('id', array('groupname LIKE' => '%$group%') ); 
```

然后解绑定HABTM关联，然后将join表绑定为hasMany关联

```
$this->Staff->UnbindModel( array('hasAndBelongsToMany' => array('StaffGroup')) );
$this->Staff->bindModel(array('hasMany' => array('StaffStaffGroup'))); 
```

您现在可以执行搜索

```
$this->Staff->StaffStaffGroup->find(
    'all', 
    array(
        'conditions' => array(
            'StaffStaffGroup.staff_group_id' => $group_ids,
            'Staff.isActive =' => "1",
            'Staff.lastname LIKE' => "%$name%",
        )
    )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:24:34.823

```
$tmpConditions['OR'][] = array('staffgroups.groupname LIKE' => "%$group%"); 
```

不遵循[CakePHP 约定](http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.htm)。它应该是：

```
$tmpConditions['OR'][] = array('StaffGroup.group_name LIKE' => "%$group%"); 
```

[模型和数据库约定](http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html#model-and-database-conventions)：

*楷模：*

> 模型类名是单数和 CamelCased。Person、BigPerson 和ReallyBigPerson 都是常规模型名称的示例。

*数据库表：*

> 对应于 CakePHP 模型的表名是复数形式并带有下划线。上述模型的基础表分别是 people、big_people 和 real_big_people。

*数据库字段：*

> 包含两个或多个单词的字段名称带有下划线，例如 first_name。

按照这些约定，您应该有一个名为的表`staff_groups`，其中包含一个名为 的字段`group_name`。关联的模型将命名为`StaffGroup`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:48:27.943

只需更改`staffgroups`为`Staffgroup`. 模型与表的命名约定意味着 db 表`my_tables`将被命名为 model `MyTable`。请参阅[http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html#model-and-database-conventions](http://book.cakephp.org/2.0/en/getting-started/cakephp-conventions.html#model-and-database-conventions)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T14:41:45.137

在您的`$tmpConditions`数组中，您应该具有以下格式：

```
$tmpConditions = array(
       "AND" => array('Staff.isActive =' => "1"),
       "OR"  => array(
                'Staff.lastname LIKE' => "%$name%",
                'Staffgroup.groupname LIKE' => "%$group%"
       )
); 
```

我假设您有一个名为的表`staffgroups`，并且它实际上包含字段`groupname`。

还有线

> `$this->Staff->recursive = 1;`

应该

```
$this->paginate = array(
      ...
      'recursive' => 1
); 
```

我相信这应该做的工作......

# magento - 致命错误：在升级后第 434 行的 /app/code/core/Mage/Core/Model/Cache.php 中的非对象上调用成员函数 getAllOptions()

> ID：14562937
> 
> 赞同：0
> 
> 时间：2013-01-28T13:19:52.083
> 
> 标签：magento

我已将我们的网站从升级`Magento Version 1.5.1`到`Magento Version 1.7.2`，但我也无法访问前端和后端并得到这个

```
Fatal error: Call to a member function getAllOptions() on a non-object in /app/code/core/Mage/Core/Model/Cache.php on line 434. 
```

我也删除了所有缓存文件和会话文件，并将 var 文件夹`permission`从更改`755`为`777`.

我也从数据库中删除了所有缓存。

请给我解决方案，

谢谢

# c# - if else 语句查询，Validator

> ID：14562938
> 
> 赞同：1
> 
> 时间：2013-01-28T13:19:58.047
> 
> 标签：c#, validation

我有一个插入客户端表单，它允许我的管理员将客户端插入到数据库表中。

我的客户表包含以下列：1）c_id 2）c_name 3）c_address 4）c_contactinfo 5）c_refno 6）c_profileinfo 7）staff_id

我还有另一张桌子，叫做员工桌。在人员表中，数据库包含以下列： 1) u_id 2) 用户名​​ 3) u_password 4) 角色

*注意，staff id 和 u_id 是一回事。

我想要做的是，为我的 textBox_staffid.Text 创建某种验证，以便它只允许数据库中存在的员工 ID 号。例如，如果员工 ID 最多为 5，则用户不能输入 6 作为员工 ID。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:58:36.663

为什么不使用 ComboBox，这样就不需要验证？

1.  取回`List<Staff>`
2.  绑定`ComboBox` `ItemsSource`到您检索到的`List<Staff>`
3.  绑定`DisplayMemberPath`,`SelectedValuePath`和`SelectedValue`

这样，您将只能选择现有的员工 ID。

令人兴奋的是，您可以将其设置`Dictionary<T1, T2> StaffMembers`为绑定到您的属性`ComboBox` `ItemsSource`。

对于 WPF：

XAML：

```
 <ComboBox ItemsSource={Binding StaffMembers} SelectedValuePath="Key" DisplayMemberPath="Value" /> 
```

代码隐藏：

```
 List<Staff> staffList = dbContext.Staff.ToList().Distinct();
 foreach(Staff s in staffList) {
      StaffMembers.Add(s.u_id, s.u.username);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:35:15.973

您可以尝试附加到文本框的[离开](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.leave%28v=vs.100%29.aspx "离开")事件，并在那里查询数据库（或您创建的表的缓存）以查看文本框中的值是否在人员表中。如果表格中没有它，您可以重新关注 staffid 文本框，以便他们必须输入有效的 ID。

# c - C Linux：位于共享库中的全局变量作为单例

> ID：14562939
> 
> 赞同：8
> 
> 时间：2013-01-28T13:19:57.763
> 
> 标签：c, linux, shared-libraries

如果该库被多个进程使用，是否可以将位于共享库 (.so) 中的全局变量用作单例？

例如初始值为 0，进程 1 递增 var 然后 proc2 递增 val 并打印它。

到目前为止，我的实验表明，这两个进程都保留了变量的副本，如果第一个增加它，第二个仍然会读取 0。所以行为不像 Windows DLL...

我在这里的一篇文章中读到，如果全局变量*不是*静态的（在 lib 中）并且它在 lib 标头中声明为 extern，则 var 对于所有进程都是唯一的。但到目前为止，我还没有能够做到这一点 - var 仍然是每个进程的副本。

有人可以对此提供很好的解释吗？以及如何做到这一点...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T13:32:18.903

如果一个共享库（或 Windows DLL）被多个进程使用，任何可修改的数据仍然是进程私有的。有像*写时复制*这样的机制，只要它只被读取，相同的数据就会被共享，但只要它被任一进程写入就会被复制。因此，对于每个流程，有效的数据仍然是独立的。另请参见[共享库地址空间](https://stackoverflow.com/questions/8034579/shared-library-address-space)。

如果要在进程之间共享数据，则需要使用[共享内存](http://en.wikipedia.org/wiki/Shared_memory)，并确保进程之间对共享内存的访问是同步的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:35:26.977

每个进程都存在于自己的内存空间中。（想象一下，如果可以的话，您可能会对机器造成严重破坏，只需加载某个其他进程正在使用的库，就可以完全随意地破坏它们的地址空间！）因此，全局变量是全局的，但仅在进程内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T13:44:07.117

Linux 不支持共享链接器布局的全局变量。该内存将位于不可共享的空间中。

如果您只想与后代进程共享数据（而不是与单独启动的任意进程共享数据，这恰好链接到同一个共享库），那么最简单的方法是让库创建一个构造函数中的映射`mmap()`（在父进程中最初加载库时调用）。

`MAP_ANONYMOUS`将and`MAP_SHARED`标志传递给`mmap`- 这意味着继承映射的子进程将具有与父进程（和其他子进程）共享的映射

# django-admin - 在 Django Admin 中将预填充的 slug 字段设置为只读

> ID：14562943
> 
> 赞同：4
> 
> 时间：2013-01-28T13:20:14.967
> 
> 标签：django-admin

我想根据其他字段值（如“lock_slug”）将 slug 字段设置为 read_only。

意味着会有两个条件。

1) 当 "lock_slug" 的值为 false 时，slug 字段直接从字段 "title" 预填充。

```
prepopulated_fields = {"slug": ("title",),} 
```

2) 当“lock_slug”的值为真时，slug 字段设为只读。

```
def get_readonly_fields(self, request, obj = None):
    if obj and obj.lock_slug == True:
        return ('slug',) + self.readonly_fields        
    return self.readonly_fields 
```

这两个独立工作正常，但同时使用时会出现问题。

意味着当我尝试在编辑时添加 get_readonly_fields() 时，由于 prepopulated_fields 会出错。这两个相互崩溃。

将有任何解决方案可以在管理员方面工作。

我也参考下面的链接

[根据另一个字段的值在 Django Admin 中使字段只读](https://stackoverflow.com/questions/11601148/making-a-field-readonly-in-django-admin)

[django admin 在修改 obj 时将字段设为只读，但在添加新 obj 时需要](https://stackoverflow.com/questions/4343535/django-admin-make-a-field-read-only-when-modifying-obj-but-required-when-adding)

但不能同时工作这两个。

谢谢，

米纳克什

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-10T13:08:23.643

这是另一种方式：

```
class PostAdmin(admin.ModelAdmin):
    list_display = (
        'title',
        'slug',
    )
    prepopulated_fields = {'slug': ('title',)}

    def get_readonly_fields(self, request, obj=None):
        if obj:
            self.prepopulated_fields = {}
            return self.readonly_fields + ('slug',)
        return self.readonly_fields 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-21T14:15:55.977

正如@Rexford 指出的那样，投票最多的答案不适用于最近的 django 版本，因为您不能将 readonly 设置为预填充字段。

顺便说一句，你仍然可以得到你想要的，只需`get_prepopulated_fields`使用相同的逻辑覆盖该方法，即：

```
class PageAdmin(admin.ModelAdmin):
    prepopulated_fields = {
        'slug': ('title', ),
    }

    def get_readonly_fields(self, request, obj=None):
        readonly_fields = super().get_readonly_fields(request, obj)
        if request.user.is_superuser:
            return readonly_fields
        return list(readonly_fields) + ['slug', ]

    def get_prepopulated_fields(self, request, obj=None):
        prepopulated_fields = super().get_prepopulated_fields(request, obj)
        if request.user.is_superuser:
            return prepopulated_fields
        else:
            return {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T07:02:37.437

我们不能将预填字段设为只读。因此，我创建了未预填充的新字段并在该字段上执行操作，我的问题得到解决。

# asp.net - 如何检查 ASP.NET 中的会话状态是否已更改

> ID：14562945
> 
> 赞同：0
> 
> 时间：2013-01-28T13:20:18.480
> 
> 标签：asp.net, vb.net, visual-studio-2008

你好，我有 2 个不同的 aspx 页面。第 1 页是带有文本字段的主页。第 2 页是另一个页面，我可以添加成员，并且它也在第 1 页的框架中。

在第 2 页中，我计算成员并将其保存到会话中。

```
Dim anzahlExterneTeilnehmer As Integer = BookITVbSQL.SQLrunScalarBookit(externeTeilnehmerSQL)

Session("anzahlExterneTeilnehmer") = anzahlExterneTeilnehmer 
```

第 1 页中的文本字段应该实时显示文本字段中的结果，而无需刷新整个页面。

我认为我需要一个检查会话更改的事件。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:22:56.867

没有会话更改警报的事件 - 只有会话开始和结束事件。您需要采取主动方法，使用 AJAX 从客户端手动轮询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:28:02.357

另一种方法可能是将 page2 重写为页面 1 中托管的用户控件。

# sql-server-2005 - 创建的工作文件/秒突然失控

> ID：14562947
> 
> 赞同：1
> 
> 时间：2013-01-28T13:20:31.393
> 
> 标签：sql-server-2005

在我的一个数据库中，我创建的工作文件/秒性能计数器突然失控，平均在 10K 和 20K 之间。

有没有人知道如何找出导致此问题的查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-02T20:41:39.953

遗憾的是，当您看到每秒创建大量工作文件时，SQL Server 文档在完全描述这里发生的事情方面并不是那么好。

但是，它们确实提供了一些见解：http: [//msdn.microsoft.com/en-us/library/ms177426.aspx](http://msdn.microsoft.com/en-us/library/ms177426.aspx)

首先，他们指出创建工作文件（而不是工作表）是为了存储 HASH 连接和散列聚合 - 由于尝试在 BOTH 上连接/组合/聚合大量行/结果的操作，通常会进行散列等式的两侧（与嵌套循环或其他连接/操作相比）。有关不同 JOIN 类型的更多信息，请参阅此内容（请记住，并非所有哈希 = 连接）：http: [//msdn.microsoft.com/en-us/library/ms191426%28v=SQL.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms191426%28v=SQL.100%29.aspx)

所以。翻译：您看到大量工作文件的原因是因为您的工作负载一遍又一遍地将来自一个表（或一组 JOIN）的大量结果“混搭”到另一个表（或一组 JOIN）。

在多租户系统中，通常会看到每秒创建的工作文件数很高（即高于大多数调优专家推荐的 SINGLE 数据库的典型范围 < 20）。但是您报告的数字显然很高。

也就是说： - 如果您没有遇到其他问题（用户威胁要杀死您，页面加载缓慢等），那么（如果您有大量 RAM）这可能不是一个大问题。相反，它可能只是服务器处理得很好的一种“潜伏”问题，但这会阻碍你的扩展能力。- 修复或更正此问题的唯一真正方法是查看您的代码和操作。如果您在单个/巨大的切片 + 切块查询中组合大量行，尝试针对大量数据执行 JOIN 的 GOB + 聚合，然后将这些单个查询分解为多个较小的“子查询”和“预过滤”可以/将减少正在创建的工作文件的数量，并且将对整体性能和吞吐量产生明显影响（即，

我在这里写过“预过滤”的概念：http: [//devproconnections.com/database-development/generating-high-performance-sql-server-query-results](http://devproconnections.com/database-development/generating-high-performance-sql-server-query-results)

# jquery - 将自动宽度设置为皇家滑块 jquery 的缩略图

> ID：14562950
> 
> 赞同：0
> 
> 时间：2013-01-28T13:20:41.907
> 
> 标签：jquery, plugins

我正在使用皇家滑块插件。我想将缩略图图像宽度设为自动。并且活动指针（.rsNavItem .rsThumb .rsNavSelected）宽度应该是自动或相应图像的大小。任何人都可以帮忙吗？请！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-19T21:19:29.480

这就是我在我的代码中所做的

```
.rsNavItem .rsThumb .rsNavSelected {
        width: auto !important;
 } 
```

JS正在添加内联`css`，因此`!important`

# java - Java：如何在扩展 Thread 并且是主类的线程数组的一部分的不同类中调用方法？

> ID：14562953
> 
> 赞同：0
> 
> 时间：2013-01-28T13:20:53.247
> 
> 标签：java, multithreading

我有一个简单的主类，它在套接字上侦听，并在它们加入时将（联网）客户端添加到线程数组中（例如服务器侦听新的聊天客户端，并将每个客户端添加为线程，并维护列表线程作为数组）。

其他工作正常，这些是服务器侦听并将新客户端添加到称为 thdRunningClientsPool[] 的线程数组的代码行

```
//add a new ClientHandler type object( ClientHandler class extends Thread) to my Thread Array
public void run() {
............
 thdRunningClientsPool[intRunningClients]= new 
                   Thread( new ClientHandler(clientSocket));
 thdRunningClientsPool[intRunningClients].start(); 
```

现在，ClientHandler 类有一个方法 void SendMessage(string Message)

添加新客户端后，如何使用此 SendMessage 方法发送消息？当我使用这个

```
thdRunningClientsPool[intRunningClients].SendMessage("hi"); 
```

未找到 SendMessage 方法。Java 将 thdRunningClientsPool(intRunningClients) 视为线程，而不是 ClientHandler 类的对象，因此我无法访问我的 SendMessage 方法。

我怎样才能解决这个问题？任何建议都非常感谢:) THxxx

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T13:24:36.537

首先，一般建议：使用`implements Runnable`而不是`extends Thread`. 将为您省去很多麻烦。

至于您的问题，您不能调用作为参数传递给您`sendMessage`的`Thread`实例的实例。您必须更改代码以保存对您`ClientHandler`的 s 的引用；你真的不需要外部`Thread`实例的数组。只需启动它们并放开它们。

您还应该重新考虑自己启动所有这些线程的选择，这通常是一个坏主意，因为它会浪费系统资源。但是，重新设计代码的这方面超出了您的问题范围。

# java - HTTP 客户端不工作

> ID：14562957
> 
> 赞同：0
> 
> 时间：2013-01-28T13:21:05.607
> 
> 标签：java, http, netbeans, httpclient, illegalargumentexception

我正在尝试构建一个简单的 HTTP 客户端程序，该程序将请求发送到 Web 服务器并将响应打印给用户。

运行代码时出现以下错误，但不确定是什么原因造成的：

**-1 线程“main”中的异常 java.lang.IllegalArgumentException：端口超出范围：-1 at java.net.InetSocketAddress.(InetSocketAddress.java:118) at java.net.Socket.(Socket.java:189) at com.example.bookstore.MyHttpClient.execute(MyHttpClient.java:18) 在 com.example.bookstore.MyHttpClientApp.main(MyHttpClientApp.java:29) Java 结果：1**

下面是我的 MyHttpClient.java 类

```
public class MyHttpClient {

MyHttpRequest request;

public MyHttpResponse execute(MyHttpRequest request) throws IOException {

    this.request = request;

    int port = request.getPort();
    System.out.println(port);

    //Create a socket
    Socket s = new Socket(request.getHost(), request.getPort());
    //Create I/O streams
    BufferedReader inFromServer = new BufferedReader(new InputStreamReader(s.getInputStream()));
    PrintWriter outToServer = new PrintWriter(s.getOutputStream());
    //Get method (POST OR GET) from request
    String method = request.getMethod();

     //Create response
     MyHttpResponse response = new MyHttpResponse();

    //GET Request
    if(method.equalsIgnoreCase("GET")){
        //Construct request line
        String path = request.getPath();
        String queryString = request.getQueryString();
        //Send request line to server
        outToServer.println("GET " + path + " HTTP/1.0");

        //=================================================\\

        //HTTP RESPONSE

        //RESPONSE LINE

        //Read response from server
        String line = inFromServer.readLine();
        //Get response code - should be 200.
        int status = Integer.parseInt(line.substring(9, 3));
        //Get text description of response code - if 200 should be OK.
        String desc = line.substring(13);

        //HEADER LINES

        //Loop through headers until get to blank line...
        //Header name: Header Value - structure
        do{
            line = inFromServer.readLine();
            if(line != null && line.length() == 0){
                //line is not blank
                //header name start of line to the colon.
                String name = line.substring(0, line.indexOf(": "));
                //header value after the colon to end of line.
                String value = String.valueOf(line.indexOf(": "));
                response.addHeader(name, value);
            }
        }while(line != null && line.length() == 0);

        //MESSAGE BODY
        StringBuilder sb = new StringBuilder();
        do{
            line = inFromServer.readLine();
            if(line != null){
                sb.append((line)+"\n");
            }
        }while(line != null);

        String body = sb.toString();
        response.setBody(body);

        //return response
        return response;
    }

    //POST Request
    else if(method.equalsIgnoreCase("POST")){
        return response;

    }
    return response;
} 
```

}

这是 MyHttpClientApp.java 类

```
public class MyHttpClientApp {

public static void main(String[] args) {
    String urlString = null;
    URI uri;
    MyHttpClient client;
    MyHttpRequest request;
    MyHttpResponse response;

    try {
        //==================================================================
        // send GET request and print response
        //==================================================================
        urlString = "http://127.0.0.1/bookstore/viewBooks.php";
        uri = new URI(urlString);

        client = new MyHttpClient();

        request = new MyHttpRequest(uri);
        request.setMethod("GET");
        response = client.execute(request);

        System.out.println("=============================================");
        System.out.println(request);
        System.out.println("=============================================");
        System.out.println(response);
        System.out.println("=============================================");

}
    catch (URISyntaxException e) {
        String errorMessage = "Error parsing uri (" + urlString + "): " + e.getMessage();
        System.out.println("MyHttpClientApp: " + errorMessage);
    }
    catch (IOException e) {
        String errorMessage = "Error downloading book list: " + e.getMessage();
        System.out.println("MyHttpClientApp: " + errorMessage);
    }
} 
```

}

我的HttpRequest

```
public class MyHttpRequest {

private URI uri;
private String method;
private Map<String, String> params;

public MyHttpRequest(URI uri) {
    this.uri = uri;
    this.method = null;
    this.params = new HashMap<String, String>();
}

public String getHost() {
    return this.uri.getHost();
}

public int getPort() {
 return this.uri.getPort();
}

public String getPath() {
    return this.uri.getPath();
}

public void addParameter(String name, String value) {
    try {
        name = URLEncoder.encode(name, "UTF-8");
        value = URLEncoder.encode(value, "UTF-8");
        this.params.put(name, value);
    }
    catch (UnsupportedEncodingException ex) {
        System.out.println("URL encoding error: " + ex.getMessage());
    }
}

public Map<String, String> getParameters() {
    return this.params;
}

public String getQueryString() {
    Map<String, String> parameters = this.getParameters();
    // construct StringBuffer with name/value pairs
    Set<String> names = parameters.keySet();
    StringBuilder sbuf = new StringBuilder();
    int i = 0;
    for (String name : names) {
        String value = parameters.get(name);
        if (i != 0) {
            sbuf.append("&");
        }
        sbuf.append(name);
        sbuf.append("=");
        sbuf.append(value);
        i++;
    }

    return sbuf.toString();
}

public String getMethod() {
    return method;
}

public void setMethod(String method) {
    this.method = method;
}

@Override
public String toString() {
    StringBuilder sbuf = new StringBuilder();

    sbuf.append(this.getMethod());
    sbuf.append(" ");
    sbuf.append(this.getPath());
    if (this.getMethod().equals("GET")) {
        if (this.getQueryString().length() > 0) {
            sbuf.append("?");
            sbuf.append(this.getQueryString());
        }
        sbuf.append("\n");
        sbuf.append("\n");
    }
    else if (this.getMethod().equals("POST")) {
        sbuf.append("\n");
        sbuf.append("\n");
        sbuf.append(this.getQueryString());
        sbuf.append("\n");
    }

    return sbuf.toString();
} 
```

}

我的HttpResponse

```
public class MyHttpResponse {

private int status;
private String description;
private Map<String, String> headers;
private String body;

public MyHttpResponse() {
    this.headers = new HashMap<String, String>();
}

public int getStatus() {
    return this.status;
}

public void setStatus(int status) {
    this.status = status;
}

public String getDescription() {
    return this.description;
}

public void setDescription(String description) {
    this.description = description;
}

public Map<String, String> getHeaders() {
    return this.headers;
}

public void addHeader(String header, String value) {
    headers.put(header, value);
}

public String getBody() {
    return body;
}

public void setBody(String is) {
    this.body = is;
}

@Override
public String toString() {
    StringBuilder sbuf = new StringBuilder();

    sbuf.append("Http Response status line: ");
    sbuf.append("\n");
    sbuf.append(this.getStatus());
    sbuf.append(" ");
    sbuf.append(this.getDescription());
    sbuf.append("\n");
    sbuf.append("---------------------------------------------");
    sbuf.append("\n");
    sbuf.append("Http Response headers: ");
    sbuf.append("\n");
    for (String key: this.getHeaders().keySet()) {
        String value = this.getHeaders().get(key);
        sbuf.append(key);
        sbuf.append(": ");
        sbuf.append(value);
        sbuf.append("\n");
    }
    sbuf.append("---------------------------------------------");
    sbuf.append("\n");
    sbuf.append("Http Response body: ");
    sbuf.append("\n");
    sbuf.append(this.getBody());
    sbuf.append("\n");

    return sbuf.toString();
} 
```

}

任何想法可能会发生什么？提前谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T13:25:35.123

我猜您的请求没有明确指定端口，因此您的 request.getPort() 返回-1。然后你尝试连接到端口-1。这是非法的。

取而代之的是，在使用端口之前：检查它是否 <= 0，在这种情况下使用 80 作为默认值。

```
int port = request.getPort();
if(port<=0) port=80; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:27:26.430

由于 URI 中没有设置端口，因此从端口返回 javadocs -1：

[http://docs.oracle.com/javase/6/docs/api/java/net/URI.html#getPort()](http://docs.oracle.com/javase/6/docs/api/java/net/URI.html#getPort())

```
The port component of this URI, or -1 if the port is undefined 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:26:01.093

很多重建轮子在这里进行。为什么不使用 Java 的内置 HTTP 客户端（至少；也有很多第三方 HTTP 客户端做得很好）。

```
URL url = new URL("http://stackoverflow.com");
final HttpURLConnection connection = url.openConnection();
connection.setDoInput(true);
connection.connect();
int responseCode = connection.getResponseCode(); 
```

等等

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-28T13:26:40.350

采用

```
 uri = URIUtil.encodeQuery(urlString) 
```

反而

```
 uri = new URI(urlString); 
```

# javascript - 从文本字段中获取值并将其发布到 javascript 变量中

> ID：14562964
> 
> 赞同：0
> 
> 时间：2013-01-28T13:21:31.867
> 
> 标签：javascript, html, var

> **可能重复：**
> [为什么 jQuery 或诸如 `getElementById` 之类的 DOM 方法找不到元素？](https://stackoverflow.com/questions/14028959/why-does-jquery-or-a-dom-method-such-as-getelementbyid-not-find-the-element)

我有这个脚本：

```
<script>
var dataoriginale = document.getElementById("savedataoriginale").value;
</script> 
```

和这个文本字段：

```
<input name="savedataoriginale" id="savedataoriginale" type="text" value="testtest"> 
```

但是当我尝试打印 javascript var

```
<script>document.write(dataoriginale)</script> 
```

我不确定。

为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:28:23.870

这是因为在从输入中获取值之前，您有 2 个冲突 js 会话

这是工作选项

```
<input name="savedataoriginale" id="savedataoriginale" type="text" value="testtest">
<script>
var dataoriginale = document.getElementById("savedataoriginale").value;
document.write(dataoriginale);
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T13:27:50.137

很可能是因为`<script>`在`<input>`. 发生这种情况是因为在未解析 DOM 时`document.getElementById("savedataoriginale").value`返回。`undefined`

要解决这个问题，请将您的`<script>`标签放在 之后，`<input>`并确保它在解析 DOM 之前不会运行。您也可以像这样使用 DOMContentLoaded 事件：

```
document.addEventListener("DOMContentLoaded", function(){
  var dataoriginale = document.getElementById("savedataoriginale").value;
  alert( dataoriginale );
},false); 
```

更多信息：

*   [如何在没有 JQuery 的情况下模仿跨浏览器 $(document).ready() 行为](https://stackoverflow.com/questions/9784346/how-to-imitate-cross-browser-document-ready-behavior-without-jquery)

*   [document.ready 类似于 javascript 中的功能？](https://stackoverflow.com/questions/11739128/document-ready-like-functionality-in-javascript)

PS。你不需要在你的元素上同时拥有`id`和`name`属性。`<input>`名称已弃用。身份证就够了。

# wpf - 无法在 Visual Studio 2012 中打开 xaml.cs 文件

> ID：14562965
> 
> 赞同：0
> 
> 时间：2013-01-28T13:21:33.013
> 
> 标签：wpf, visual-studio-2012

我试图`.xaml.cs`在 Visual Studio 2012 中打开一个文件，但双击该文件什么也不做，而右键单击并选择`Open`什么也不做。

如果我尝试打开任何其他`.xaml.cs`文件，它工作正常 - 所以它被隔离到一个文件。

例如...

*   ImportUserControl.xaml - 可以正常打开
*   ImportUserControl.xaml.cs - 不会打开
*   ExportUserControl.xaml - 可以正常打开
*   ExportUserControl.xaml.cs - 无法打开

我也尝试`.xaml`在 Visual Studio 中打开文件并选择`View Code`。

什么可能导致这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:31:06.157

对此的解决方案不是很好，但我想这很明显。

我关闭了 Visual Studio，然后重新打开它。这解决了问题。

# c# - SQLite c# 参数

> ID：14562967
> 
> 赞同：0
> 
> 时间：2013-01-28T13:21:40.460
> 
> 标签：c#, sqlite

我正在尝试对`SQLiteCommand`3 个单独的表执行包含 3 个插入的操作。在所有 3 个表中，主键被调用`offset`。在第三条语句中，我想插入两行。

该命令共有11个参数

这是我之前用于初始化命令的代码（我想重用该命令，但即使在第一次使用该语句时也会出现这个特殊问题）：

```
_insertBlockInNewPage = new SQLiteCommand("insert into page(offset) values (?); insert into block(offset, length, originaloffset, page) values (?, ?, ?, ?); insert into chunk(offset, length, page, free) values (?, ?, ?, 0), (?, ?, ?, 1)", _db);
for (var i = 0; i < 11; i++) _insertBlockInNewPage.Parameters.Add(new SQLiteParameter(DbType.Int64));
_insertBlockInNewPage.Prepare(); 
```

这是将使用此命令的方法：

```
public void InsertBlockInNewPage(long offset, long length, long originalOffset, long pageLength)
{
    _insertBlockInNewPage.Parameters[0].Value = offset;
    _insertBlockInNewPage.Parameters[1].Value = offset;
    _insertBlockInNewPage.Parameters[2].Value = length;
    _insertBlockInNewPage.Parameters[3].Value = originalOffset;
    _insertBlockInNewPage.Parameters[4].Value = offset;
    _insertBlockInNewPage.Parameters[5].Value = offset;
    _insertBlockInNewPage.Parameters[6].Value = length;
    _insertBlockInNewPage.Parameters[7].Value = offset;
    _insertBlockInNewPage.Parameters[8].Value = offset + length;
    _insertBlockInNewPage.Parameters[9].Value = pageLength - length;
    _insertBlockInNewPage.Parameters[10].Value = offset;
    _insertBlockInNewPage.ExecuteNonQuery();
} 
```

这里重要的是参数 5 的值为 0，参数 8 的值为 131072（即不相同）。当我执行这个命令时，它会抛出一个异常，告诉我主键必须是唯一的。

奇怪的是，如果我只在块表中插入一行，它就可以工作。更奇怪的是，如果我在单独的块表中执行插入`SQLiteCommand`，但仍然同时插入 2 行，它也可以工作。所以我猜我一定是参数做错了。但我真的看不出这段代码有什么问题。谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:29:40.217

在 SQLite 中，参数索引从 SQL 语句的开头开始计算。

这意味着不可能将未命名的参数与多个 SQL 命令一起使用`SQLCommand`。

您可以尝试使用编号参数：

```
insert into page(offset) values (?1);
insert into block(offset, length, originaloffset, page) values (?2, ?3, ?4, ?5);
... 
```

# c# - 如何将 schemaLocation 属性添加到 XML 文档

> ID：14562975
> 
> 赞同：4
> 
> 时间：2013-01-28T13:22:21.147
> 
> 标签：c#, xml, xsd

请查看以下 XML 命名空间和 schemaLocation。

```
<agr:ABWInvoice 
  xsi:schemaLocation = "
    http://services.agresso.com/schema/ABWInvoice/2011/11/14 
    http://services.agresso.com/schema/ABWInvoice/2011/11/14/ABWInvoice.xsd" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:agrlib = "http://services.agresso.com/schema/ABWSchemaLib/2011/11/14"
  xmlns:agr = "http://services.agresso.com/schema/ABWInvoice/2011/11/14"
>

</agr:ABWInvoice> 
```

我以以下方式添加了命名空间，这似乎工作正常：

```
XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
ns.Add("xsi", "http://www.w3.org/2001/XMLSchema-instance");
ns.Add("agrlib", "http://services.agresso.com/schema/ABWSchemaLib/2011/11/14");
ns.Add("agr", "http://services.agresso.com/schema/ABWInvoice/2011/11/14"); 
```

但是，如何添加以下架构位置？有任何想法吗？

```
xsi:schemaLocation="http://services.agresso.com/schema/ABWInvoice/2011/11/14 http://services.agresso.com/schema/ABWInvoice/2011/11/14/ABWInvoice.xsd" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T02:36:47.627

```
xs:schemaLocation="..." 
```

不是命名空间声明：它是一个属性（其值恰好是命名空间，但没关系）。因此，您可以使用设置属性值的方法来添加它。我不熟悉 C# XML API，但它可能类似于

```
XmlElement.SetAttributeValue (localname, prefix, namespace, value) 
```

`localname`应该是`"schemaLocation"`
`prefix`= `"xsi"`
`namespace`= `"http://www.w3.org/2001/XMLSchema-instance"`
`value`=`"your schema location"`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-29T08:27:44.680

Mike 的回复使我得到以下答案：

```
 [XmlAttributeAttribute("schemaLocation", AttributeName = "schemaLocation", 
    Namespace = "http://www.w3.org/2001/XMLSchema-instance")]
    public string SchemaLocation = "http://services.agresso.com/schema/ABWInvoice/2011/11/14 http://services.agresso.com/schema/ABWInvoice/2011/11/14/ABWInvoice.xsd"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-06T11:09:50.167

只需在您的课程中添加此代码

公共部分类 MyClass{

```
 [XmlAttribute(Namespace = System.Xml.Schema.XmlSchema.InstanceNamespace)]
    public string schemaLocation = "http://www.adap.cx/m3/x4 lksdjv45.xsd"; 
```

... }

# android - 在 OSX 10.8.2 上检测 Android 手机

> ID：14562981
> 
> 赞同：0
> 
> 时间：2013-01-28T13:22:34.390
> 
> 标签：android, eclipse, macos, usb, adt

我正在尝试在各种设备上测试 Android 应用程序。我将手机安装在装有 10.8.2 的 MacBook 上。它曾经是即插即用的问题，我将手机插入并从 Ecclipse 运行应用程序。一切都很好。

最近没这么多。当我从 Ecclipse 运行应用程序时，它会打开模拟器，当我执行“adb devices”时，列表是空白的。我在三星、索尼爱立信和 HTC 的手机上试过这个，结果相同。

然后我尝试像这样更新“adb_usb.ini”中的供应商列表：

```
# ANDROID 3RD PARTY USB VENDOR ID LIST -- DO NOT EDIT.
# USE 'android update adb' TO GENERATE.
# 1 USB VENDOR ID PER LINE

# Acer
0x0502
# Amazon Kindle
0x1949
# ASUS
0x0B05

etc. 
```

当我重新启动 adb 服务器并再次运行“adb devices”时，我得到以下信息：

```
* daemon not running. starting it now on port 5037 *
ADB server didn't ACK 
```

我没有任何关于如何解决此问题的线索。任何想法或提示都非常感谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:37:46.637

我在工作的 MBP 和在家的 MBA 上使用 10.8.2。一切顺利。即插即用）也许您已经安装了一些干扰 adb 服务器的软件，例如防病毒/防火墙/某种与 USB 相关的应用程序。还要检查您是否使用最新的 adb 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:27:57.553

有时会卡住。通过活动监视器杀死 adb 的服务，然后重新启动 Eclipse。如果这没有帮助，请尝试重新启动 MacBook，它应该会有所帮助！

# android - Android：关闭网络连接后未加载地图

> ID：14562982
> 
> 赞同：0
> 
> 时间：2013-01-28T13:22:34.590
> 
> 标签：android, android-maps

当我启动应用程序时，地图加载正常。现在我停止了网络连接，滑动了几个屏幕并再次启动了网络连接。现在，当我滑动屏幕时，我得到了 NullPointerException。调用 onResume 时地图无法加载。

在 onCreate 我正在这样做

```
@Override
    protected void onCreate(Bundle arg0) {
        super.onCreate(arg0);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.cityattractions);
        Utils utils = new Utils();
        if (getIntent() != null && getIntent().getBooleanExtra("EXIT", false)) {
             finish();

            if(utils.getUserAcceptance(this)){
            utils.cleanUpSession();
            activity = this;
            context = this;
            Log.d(TAG, "onCreate");
            utils.loadStartUpInfo(this);
            Intent intent = getIntent();
            Bundle b = intent.getExtras();
            String moduleName = null;

            MapView mapView = (MapView) activity.findViewById(R.id.defaultmapView);
            mapView.setVisibility(View.GONE);

            if (b != null) {
                moduleName = b.getString("neighborhood");
            }

            MenuUtils menuUtils = new MenuUtils();
            ((ImageView) findViewById(R.id.custom_menu)).setOnTouchListener(new OpenPopup(this));
            if (moduleName != null && moduleName.equalsIgnoreCase("myneighbor")) {

                setMyNeighborHoodLocation();
                new Utils().loadCityNames(activity, -1, -1, -1, null, 0, true);
                new MapUtils().drawMap(this);
            } else {

                manager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
                listener = new ManageLocation();    
                listener.setSucessCallBack(this, "setLocation");
                listener.setFailureCallBack(this, "setNoLocation");

                manager.requestLocationUpdates(
                        utils.getCurrentPlaceLocationProvider(manager), 0, 0,
                        listener); 
```

在 onResume 我正在做如下

```
protected void onResume() {

        super.onResume();

        Utils utils = new Utils();
        if (new Utils().isConnectionAvailable(activity)) {  
        manager.requestLocationUpdates(
                utils.getCurrentPlaceLocationProvider(manager), 0, 0,
                listener); }

                    new MapUtils().drawMap(this);
                } 
```

我尝试在 onPause() 方法中取消注册 LocationListener。但似乎没有任何效果。有人可以指出我正确的方向吗？

这是我的日志猫

```
 Caused by: java.lang.NullPointerException
01-28 18:41:02.013: E/AndroidRuntime(32082):    at org.appright.mycity.maps.MapUtils.drawMap(MapUtils.java:59)
01-28 18:41:02.013: E/AndroidRuntime(32082):    at org.appright.mycity.activity.CityAttractions.onResume(CityAttractions.java:500)
01-28 18:41:02.013: E/AndroidRuntime(32082):    at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1199)
01-28 18:41:02.013: E/AndroidRuntime(32082):    at android.app.Activity.performResume(Activity.java:5280)
01-28 18:41:02.013: E/AndroidRuntime(32082):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2606)
01-28 18:41:02.013: E/AndroidRuntime(32082):    ... 10 more 
```

# java - 在 xml 中设置 xmlschema

> ID：14562983
> 
> 赞同：0
> 
> 时间：2013-01-28T13:22:39.313
> 
> 标签：java, android, xsd, jibx

我正在使用 jibx lib 生成 xsd 到 java 代码。我也使用 ant 创建了 jar 文件。我们需要在哪里设置 xmlschemalocation，所以当我们如下执行 marshalmessage 时，我们可以获得 xsd 位置。

```
public String marshalMessage(Object message) 
    {
        try {
            IBindingFactory jc = BindingDirectory.getFactory(DeviceCapability.class);       

            IMarshallingContext marshaller = jc.createMarshallingContext();     

            ByteArrayOutputStream out = new ByteArrayOutputStream();        

            marshaller.marshalDocument(message, URL_ENCODING, null, out);
            return out.toString(STRING_ENCODING);
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (JiBXException e) {
            e.printStackTrace();
        }
        return null;
    } 
```

//这是用来创建对象的

```
DeviceCapability devicecapability  = new  DeviceCapability();
 devicecapability.setHref("Hello");
 String xml = marshalMessage(devicecapability); 
```

* * *

> 生成的 xml o/p 是 ?xml version="1.0" encoding="UTF-8"?> /DeviceCapability xmlns="http://zigbee.org/sep" href="Hello"//>

我想要像下面这样的 o/p ?xml version="1.0" encoding="UTF-8"?>DeviceCapability xmlns="http://zigbee.org/sep" href="Hello" xmlns:xsi="http:// /www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://zigbee.org/abc abc.xsd/>

有人可以告诉我如何使用 jibx 添加模式定位。我使用过 ant codegen/bind 工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:46:19.587

JiBX 可以轻松处理多个名称空间。您所要做的就是在架构定义 (.xsd) 文件中指定所有命名空间。例如，这是我的一个模式定义中的一个片段：

> <xs:import namespace="http://javafx.com" schemaLocation="javafx.xsd"/>
> <xs:element name="jnlp">
> <xs:complexType>
> <xs:sequence>
> <xs:element ref= "信息" maxOccurs="unbounded"/>
> <xs:element ref="jfx:javafx-desc" minOccurs="0" maxOccurs="1"/>
> </xs:sequence>

JiBX 生成的 XML 具有您想要的名称空间定义。

Don - JiBX 贡献者

# c++ - 没有“对 *this”功能的右值引用的解决方法

> ID：14562984
> 
> 赞同：67
> 
> 时间：2013-01-28T13:22:41.127
> 
> 标签：c++, c++11, move-semantics, rvalue-reference

我有一个围绕可移动对象的代理容器类，并希望代理能够隐式产生对基础对象的右值引用，但仅在移动代理本身时。

我相信我将能够按照提案 n2439 ["Extending move semantics to *this"](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2439.htm)来实现此行为，但它在 gcc 的版本中尚不可用，并且暂时不会。

下面的代码是我最终的目标，但目前还不可能。在我可以使用此功能之前，是否有任何等效的解决方法？

```
template< class T >
struct movable_proxy {
    operator T&&() && {
        return std::move(value);
    }

    operator const T&() const& {
        return value;
    }

private:
    T value;
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T10:05:25.103

好问题。我最近尝试编写类似的代理类，但从未获得好的解决方案。我发现的最好的方法是在每次需要代理为 r 值的情况下调用成员函数：

```
ORef<T> move() {
    return ORef<T>( this->release() );
} 
```

这将声明某个 r 值的语义从 更改`std::move(proxy)`为`proxy.move()`，但也允许返回不同类型的对象（隐式转换为您所需的类型）。

我使用它的编码实践是始终将代理对象作为右值传递，这会强制手动指定语义（移动、共享引用、复制或其他），但这当然会使使用错误成为潜在问题（例如`x.move()`，在最终使用之前调用`x`） .

# c# - 按下键只允许 WPF 文本框中的一个字符事件

> ID：14562985
> 
> 赞同：4
> 
> 时间：2013-01-28T13:22:41.720
> 
> 标签：c#, .net, wpf

我有一个文本框，当输入的键是“返回”时，它有 keydown 事件字母“a”被覆盖变成“b”，但不会变成“ab”。有谁知道这是什么原因？

```
private void barcodetexbox_KeyDown(object sender, KeyEventArgs e)
{
    if (scannedString.Text != "" && e.Key==Key.Return)
    {
        //do something
    }
} 
```

在“MainWindow.xaml”中

```
<TextBox x:Name="scannedString" HorizontalAlignment="Left" Height="50" 
    Margin="468,164,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="450"
    FontSize="24" Focusable="True" Padding="0,6,0,0" 
    KeyDown="barcodetexbox_KeyDown" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T13:25:51.313

KeyDown 事件旨在让您知道哪些键同时按下，并且您的条形码阅读器似乎模拟键盘，因此您需要连接它发送的字符

在您的 Key_Down 事件中，您必须执行以下操作：

`this.scannedString += e.Key;`

当你看到返回时：

`barcodeTextBox.Text = this.scannedString;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T14:04:06.457

不确定我是否理解您的问题，但我认为这是您的解决方案：

```
private void scannedString_PreviewKeyDown(object sender, KeyEventArgs e)
    {
        if ((sender as TextBox).Text !="" && e.Key == Key.Return)
        {
            MessageBox.Show((sender as TextBox).Text); // I mean do some thing
            (sender as TextBox).Clear();
        }
    } 
```

我已经用条形码扫描仪对其进行了测试，效果很好。

# parsing - Groovy：解析 mysql 数据库更改的文件

> ID：14562987
> 
> 赞同：0
> 
> 时间：2013-01-28T13:22:54.127
> 
> 标签：parsing, text, groovy

我有一个包含内容的文本文件：

```
ACTION = NEW        // (NEW, CHANGE)
NEW_NUMBER = '123456'
NUMBER_FOR_CHANGE = '789456'
TEXT_NAME1 = 'TEST1'
TEXT_NAME2 = 'TEST2'
TEXT_NAME3 = 'TEST3' 
```

我想在 Groovy 脚本上编写一个代码来解析这个文件并进行下一个更改：

如果行动=新：

```
`sql.executeInsert "INSERT INTO TABLE.DB (NUMBER, NAME1, NAME2, NAME3) VALUES ($NEW_NUMBER, $TEXT_NAME1, $TEXT_NAME2, $TEXT_NAME3)" ` 
```

如果行动=改变：

```
 sql.executeUpdate "UPDATE TABLE.DB SET NAME1 = $TEXT_NAME1, NAME2 = $TEXT_NAME2, NAME3 = $TEXT_NAME3 WHERE NUMBER LIKE $NUMBER_FOR_CHANGE" 
```

如果动作 = 删除：

```
 sql.execute "DELETE FROM TABLE.DB WHERE NUMBER = $NUMBER_FOR_CHANGE" 
```

我将不胜感激任何帮助

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:44:56.483

这样的事情应该这样做吗？

```
def sqlstr = new Properties().with { props ->
  new File( '/path/to/file' ).withReader { r ->
    load( r )
    switch( props.ACTION ) {
      case 'NEW':
        "INSERT INTO TABLE.DB (NUMBER, NAME1, NAME2, NAME3) VALUES ($NEW_NUMBER, $TEXT_NAME1, $TEXT_NAME2, $TEXT_NAME3)"
        break
      case 'CHANGE':
        "UPDATE TABLE.DB SET NAME1=$TEXT_NAME1, NAME2=$TEXT_NAME2, NAME3=$TEXT_NAME3 WHERE NUMBER = $NUMBER_FOR_CHANGE"
        break
      case 'DELETE':
        "DELETE FROM TABLE.DB WHERE NUMBER = $NUMBER_FOR_CHANGE"
        break
      default:
        throw new RuntimeException( "Unknown ACTION $props.ACTION" )
    }
  }
}

// Assuming sql is set up right:
sql.execute sqlstr 
```

# javascript - Javascript：从两个文本输入和一个单选按钮输入生成一个 URL

> ID：14562988
> 
> 赞同：0
> 
> 时间：2013-01-28T13:22:55.297
> 
> 标签：javascript, forms

我有一个带有两个纯整数文本框、一组单选按钮和一个提交按钮的表单。我希望它获取这三个输入的值，并使用它们生成具有三个变量的 URL，如下所示：

```
http://domain.com/file.php?var1=&var2=&var3= 
```

编辑：为了澄清，输出在页面上，而不是在 URL 中。我创建了一个基于 URL 变量显示不同内容的 php 图像，并且该图像应该能够在用户认为合适的情况下在其他站点上使用。

EDIT2：我的基本 HTML：

```
<form>
<input type="text" id="var1" />
<br />
<input type="text" id="var2" />
<br />
<br />
<input type="radio" name="var3" value="1" />
<br />
<input type="radio" name="var3" value="2" />
<br />
<br />
<input type="button" id="URLGenerate" value="Generate" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:35:43.863

好吧，这是解决此问题的方法：

*1\. 创建 HTML*

您需要为`id`每个文本框分配一个（文本框`<input type="text"/>`在 html 中定义。然后您需要定义为的单选按钮`<input type="radio"/>`。确保所有单选按钮具有相同的`name`属性。这是一个[简短的介绍](http://www.echoecho.com/htmlforms10.htm)。

*2\. 使用 Javascript 获取值*

您可以通过其 id 访问每个元素。

*3.更改当前网址*

`window.location`制作 URL 后，您可以通过在 Javascript 中指定来更改它。

我想如果有人想让它更简单，他们必须为你输入代码！;)

**更新**

使用您添加到问题中的代码，我创建了一个解决问题的 javascript 程序：

```
//assign the button event handler
document.getElementById( 'URLGenerate' ).addEventListener( 'click', onGenerate );

//given the name of a radio button group, it returns the value of the selected radio button or null if none of them are selected
function getRadioButtonValue ( name ) {
  var allRadios = document.getElementsByName( name );
  for ( var i = 0; i < allRadios.length; i++ ) {
    if ( allRadios[i].checked ) {
      return allRadios[ i ].value;
    }
  }
  return null;//or any other value when nothing is selected
}

function onGenerate() {
  //the base url
  var url = 'http://domain.com/file.php';
  //an array of all the parameters
  var params = [];
  //get the value from the edit box with id=var1
  params.push( 'var1=' + document.getElementById( 'var1' ).value );
  //get the value from the edit box with id=var2
  params.push( 'var2=' + document.getElementById( 'var2' ).value );

  //get the value of the radio box
  params.push( 'var3=' + getRadioButtonValue( 'var3' ) );

  //join all the parameters together and add to the url
  url += '?' + params.join( '&' );
  alert( url );
} 
```

这是一个[可以现场试用的 JSBin](http://jsbin.com/itovat/3/)，您可以在此处查看 HTML/JS：http: [//jsbin.com/itovat/3/edit](http://jsbin.com/itovat/3/edit)

# .htaccess - 需要 Htaccess 基本帮助

> ID：14562989
> 
> 赞同：1
> 
> 时间：2013-01-28T13:22:56.290
> 
> 标签：.htaccess

我正在尝试在我的网络主机上安装friendica（hourb，类似于000webhost，但使用ssh）。

我将它安装到目录/子域 imoppen.domain.com (domain.com/imoppen)

但它说：.htaccess 中的 URL 重写不起作用。检查您的服务器配置。我无法继续安装。

我认为这与目录的 rewritebase 部分有关，但我不知道如何修复它。

它还在 php 中给出了一个错误，但这对我来说并不是什么大问题；

```
 Warning: set_time_limit() has been disabled for security reasons in /home/username/public_html/imoppen/boot.php on line 290 
```

我的第一个 .htaccess (domain.com) 包含：

```
# DO NOT REMOVE THIS LINE AND THE LINES BELOW ERRORPAGEID:yLaNyW

ErrorDocument 404 /404.html

# DO NOT REMOVE THIS LINE AND THE LINES ABOVE yLaNyW:ERRORPAGEID

RewriteBase / 
```

我的第二个 .htaccess (domain.com/installationdirectory) 包含：

```
Options -Indexes
AddType application/x-java-archive .jar
AddType audio/ogg .oga

<FilesMatch "\.(out|log)$">
Deny from all
</FilesMatch>
SetEnv PHP_VER 5_3

<IfModule mod_rewrite.c>
  RewriteEngine on
  # Protect repository directory from browsing
  RewriteRule "(^|/)\.git" - [F]

  # Rewrite current-style URLs of the form 'index.php?q=x'.
  # Also place auth information into REMOTE_USER for sites running
  # in CGI mode.

  # If you have troubles or use VirtualDocumentRoot
  # uncomment this and set it to the path where your friendica installation is
  # i.e.:
  # Friendica url: http://some.example.com
  # RewriteBase /
  # Friendica url: http://some.example.com/friendica
  # RewriteBase /imoppen/
  #
    RewriteBase /

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ index.php?q=$1 [E=REMOTE_USER:%{HTTP:Authorization},L,QSA]

</IfModule> 
```

如您所见，我尝试使用 rewritebase 部分，但不幸的是它不起作用。我的整体 php 版本设置为 5.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:56:22.077

好像您在使用hourb托管（我也是）我通过转到设置-> htaccess -> 允许URL重写来解决它

# python - Python 等价于 sum() 使用 xor()

> ID：14562991
> 
> 赞同：12
> 
> 时间：2013-01-28T13:23:00.267
> 
> 标签：python, sum, xor

我喜欢 Python 的 sum 函数：

```
>>> z = [1] * 11
>>> zsum = sum(z)
>>> zsum == 11
True 
```

我想要使​​用 xor (^) 而不是添加 (+) 的相同功能。我想使用地图。但我无法弄清楚如何做到这一点。有什么提示吗？

我对此不满意：

```
def xor(l):
    r = 0
    for v in l: r ^= v
    return v 
```

我想要一个使用地图的 1 班轮。提示？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-28T13:24:46.327

```
zxor = reduce(lambda a, b: a ^ b, z, 0)

import operator
zxor = reduce(operator.xor, z, 0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-04-28T13:38:05.937

请注意，开始`Python 3.8`，并引入[赋值表达式（PEP 572）](https://www.python.org/dev/peps/pep-0572/)（`:=`运算符），我们可以使用和更新列表推导式中的变量，从而将列表简化为其元素的异或：

```
zxor = 0
[zxor := zxor ^ x for x in [1, 0, 1, 0, 1, 0]]
# zxor = 1 
```

# c - 将 IEEE 754 浮点数转换为 MIL-STD-1750A 浮点数

> ID：14562997
> 
> 赞同：4
> 
> 时间：2013-01-28T13:23:17.303
> 
> 标签：c, floating-point, type-conversion, floating-accuracy

我正在尝试将 IEEE 754 32 位单精度浮点值（标准 c 浮点变量）转换为[MIL-STD-1750A](http://www.xgc.com/manuals/mil-std-1750a-1.7.pdf)格式的无符号长变量。我在帖子底部包含了 IEEE 754 和 MIL-STD-1750A 的规范。现在，我的代码在转换指数时遇到问题。我也看到了转换尾数的问题，但我还没有解决这些问题。我正在使用上面链接中表 3 中列出的示例来确认我的程序是否正确转换。其中一些例子对我来说没有意义。

1.  这两个例子怎么会有相同的指数呢？

    ```
    .5 x 2^0 (0100 0000 0000 0000 0000 0000 0000 0000) 
    -1 x 2^0 (1000 0000 0000 0000 0000 0000 0000 0000) 
    ```

    .5 x 2^0 有一位小数，-1 没有小数位，所以 .5 x 2^0 的值应该是

    ```
    .5 x 2^0 (0100 0000 0000 0000 0000 0000 0000 0010) 
    ```

    对？（0010 代替 0001，因为 1750A 使用加 1 偏置）

2.  最后一个例子怎么能使用全部 32 位，第一位为 1，表示负值呢？

    ```
    0.7500001x2^4 (1001 1111 1111 1111 1111 1111 0000 0100) 
    ```

3.  我可以看到指数为 127 的值应该是 7F（0111 1111），但是指数为负的 127 的值呢？会是 81（1000 0001）吗？如果是这样，是因为那是 127 的二进制补码 +1 吗？

谢谢

![1750A规格](../Images/faed77c517aae23891ca6d772803a976.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:49:29.390

> 1）这两个例子怎么能有相同的指数？

据我了解，符号和尾数有效地定义了 [-1.0,1.0) 范围内的 2 补码值。

当然，这会导致冗余表示（0.125*2 ¹ = 0.25*2 ⁰等）。因此，通过禁止 [-0.5,0.5) 范围内的尾数值来选择规范的归一化表示。

因此，在您的两个示例中，-1.0 和 0.5 都属于“允许的”尾数范围，因此它们都具有相同的指数值。

> 2）最后一个例子如何使用所有32位并且第一位为1，表示负值？

这对我来说不合适；您是如何获得该代表权的？

> 3) 指数为负的 127 的值呢？会是 81（1000 0001）吗？

我相信是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T21:32:01.613

1.  请记住，分数是“有符号分数”。带符号的值以 2 的补码格式存储。因此，将零视为一。
    因此，该数字可以写为 -0.111111111111111111111 (base 2) x 2^0 ，接近一（如果我的数学正确，则收敛到 1.0）

2.  在最后一个例子中，原始文档中有一个负号（-0.7500001x2^4）