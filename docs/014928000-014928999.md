# StackOverflow 问答 14928000-14928999

# file - 使用工厂的模型中的 FilesSize 验证器

> ID：14928003
> 
> 赞同：0
> 
> 时间：2013-02-18T00:55:25.037
> 
> 标签：file, validation, frameworks, zend-framework2

那是我在 Object\Model 中的模型 SiteDesign.php：

```
namespace Object\Model;

use Zend\Validator\StringLength;
use Zend\Validator\NotEmpty;
use Zend\Validator\File\Size;
use Zend\InputFilter\Factory as InputFactory;
use Zend\InputFilter\InputFilter;
use Zend\InputFilter\InputFilterAwareInterface;
use Zend\InputFilter\InputFilterInterface;

class SiteDesign {

public $logo_filename;
public $background_image;
public $background_color;

public function exchangeArray($data) {
    $this->logo_filename = (isset($data['logo_filename'])) ? $data['logo_filename'] : null;
    $this->background_image = (isset($data['background_image'])) ? $data['background_image'] : null;
    $this->background_color = (isset($data['background_color'])) ? $data['background_color'] : null;
}

public function setInputFilter(InputFilterInterface $inputFilter) {
    throw new \Exception('Not used');
}

public function getInputFilter() {
    if (!$this->inputFilter) {
        $inputFilter = new InputFilter();

        $factory = new InputFactory();

        $inputFilter->add($factory->createInput(array(
                    'name' => 'logo_filename',
                    'filters' => array(
                        array('name' => 'StripTags'),
                        array('name' => 'StringTrim'),
                    ),
                    'validators' => array(
                        array(
                            'name' => 'FilesSize',
                            'options' => array(
                                'max' => 4 * 1024,
                                'messages' => array(
                                    Size::TOO_BIG => 'Размерът на логото не може да надвишава 5MB.',
                                ),
                            ),
                        ),
                    ),
                )));

        $inputFilter->add($factory->createInput(array(
                    'name' => 'background_image',
                    'filters' => array(
                        array('name' => 'StripTags'),
                        array('name' => 'StringTrim'),
                    ),
                    'validators' => array(
                        array(
                            'name' => 'FilesSize',
                            'options' => array(
                                'max' => 4 * 1024,
                                'messages' => array(
                                    Size::TOO_BIG => 'Размерът на изображението за фон не може да надвишава 5MB.',
                                ),
                            ),
                        ),
                    ),
                )));

        $inputFilter->add($factory->createInput(array(
                    'name' => 'background_color',
                    'filters' => array(
                        array('name' => 'StripTags'),
                        array('name' => 'StringTrim'),
                    ),
                    'validators' => array(
                    ),
                )));

        $this->inputFilter = $inputFilter;
    }

    return $this->inputFilter;
} 
```

}

但有一条错误消息：

## Zend\ServiceManager\ServiceManager::get 无法获取或创建 FilesSize 的实例

那么是否可以使用工厂直接在模型中定义 FilesSize 验证器？这是正确的方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T09:12:36.487

从[`Zend\Validator\ValidatorPluginManager`](https://github.com/zendframework/zf2/blob/release-2.1.1/library/Zend/Validator/ValidatorPluginManager.php#L80)（负责按名称实例化验证器）起，正确的名称是“FileSize”（那里的“s”太多）。

# ruby - rbenv 在使用系统时破坏了我的 gem 安装目录

> ID：14928009
> 
> 赞同：3
> 
> 时间：2013-02-18T00:55:58.880
> 
> 标签：ruby, macos, rbenv

我想使用 rbenv 在每个项目的基础上设置 ruby​​ 版本。否则，我想将我的默认系统 ruby​​ 设置用于其他所有内容。

我遇到的问题是即使`rbenv version`返回`system`，`gem`命令仍然使用 rbenv shim ( `.rbenv/shims/gem`)。所以当我做`gem environment`我的安装目录是`'/Library/Ruby/Gems/1.8'`。我宁愿它仍然存在`~/.gem/`。我可以看到它仍然是当我运行时`/usr/bin/gem enviroment`。我不知道 rbenv shim gem 是从哪里得到它的设置的。

我已经尝试在我的 shell 中修改我的 GEM_HOME 并更改它，`~/.gemrc`但这没有任何效果。我一直在寻找没有运气。希望这里有人可以提供帮助。只是一些指向 rbenv gem shim 从中提取其值的指针会很有帮助。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T20:48:54.057

由于 rbenv 垫片在您的 PATH 中非常高，它们的目的是拦截任何对 、 和类似的调用`ruby`，`gem`即使当前选择的 Ruby 版本是“系统”。你不应该为此担心。

现在，系统 Ruby 的默认安装路径将始终为`/Library/Ruby/Gems/1.8`. 这是我的`RBENV_VERSION=system gem env`：

```
 - GEM PATHS:
     - /Library/Ruby/Gems/1.8
     - /Users/mislav/.gem/ruby/1.8
     - /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/gems/1.8 
```

但是，如果您**不**使用`sudo`（而且您不应该使用），`gem install`则不会对该目录具有写入权限，并且会将 gem 安装在下一个可写路径中，即`~/.gem/ruby/1.8`. 这似乎是你想要的行为。

# c# - 如何从不在表单中的公共类中获取复选框值

> ID：14928013
> 
> 赞同：0
> 
> 时间：2013-02-18T00:56:27.980
> 
> 标签：c#, c#-4.0

我有一个位于表单中的复选框，我想从不在表单中的公共类中获取它的值。它应该如下所示。

```
public class Employee
{
    // ...

    public string LookUpName(string doc)
    {
        if (checkbox1.checked == true)
        {
            return something;
        }
        else 
            return something;
    }
} 
```

这种方式的问题是在类中无法识别复选框`LookUpName`。请问有什么帮助吗？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T00:59:36.157

将 Employee 类与 UI 解耦，并将值作为参数传入：

```
public string LookUpName(string doc, bool isSomething)
{
      if (isSomething)
      {
           return something;
      }

      return somethingElse;
} 
```

另外，`checkbox1`对于复选框来说不是一个好名字......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T00:59:48.203

它应该反过来。您的 CheckBox 应该从属性中获取其值。然后你的班级可以对该属性做出反应。

# r - 是否可以在情节中使用两个以上的字符作为点

> ID：14928015
> 
> 赞同：2
> 
> 时间：2013-02-18T00:56:40.220
> 
> 标签：r, plot, points

我正在尝试在每个点都由一个数字表示的图中绘制点。但是，这些点似乎只能是一个字符长，如下面的代码生成的图中所示：

```
set.seed(1); plot(rnorm(15), pch=paste(1:15)) 
```

![在此处输入图像描述](../Images/d22621e720ace458bf22a9d072e3dd0b.png)

我想知道是否有任何解决方法。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T01:02:49.910

```
set.seed(1); plot(rnorm(15), pch=paste(1:15),type='n')
text(x=1:15,y=rnorm(15),label=round(rnorm(15),2)) 
```

![在此处输入图像描述](../Images/fe1f23b2180074c37ecbb7fc6f8eefe2.png)

另一个网格选项使用`lattice`例如：

```
dat <- data.frame(x=1:15,y=rnorm(15))
xyplot(y~x,data=dat,
       panel=function(x,y,...){
         panel.xyplot(x,y,...)
         panel.text(x,y,label=round(rnorm(15),2),adj=2,col='red')}) 
```

![在此处输入图像描述](../Images/a90af3df6b94cc8bfeb381e6ae46e390.png)

# python - 检查字符串在python中是否只有白色字符

> ID：14928017
> 
> 赞同：3
> 
> 时间：2013-02-18T00:57:17.250
> 
> 标签：python, string

检查字符串是否只有白色字符（如 \r \t \n " "）的最简单方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T01:03:46.550

`isspace()`字符串方法告诉你：

```
>>> "   ".isspace()
True
>>> " x  ".isspace()
False 
```

另一种选择是剥去末端：

```
if not s.strip():
    print "It was all whitespace!" 
```

# python - TypeError: __init__() 得到了一个意外的关键字参数“评分”

> ID：14928018
> 
> 赞同：3
> 
> 时间：2013-02-18T00:57:30.947
> 
> 标签：python, svm, scikit-learn, cross-validation

[当明显](http://scikit-learn.org/dev/auto_examples/grid_search_digits.html)
`TypeError: __init__() got an unexpected keyword argument 'scoring'` 的评分是一个参数时[（](http://scikit-learn.org/dev/modules/generated/sklearn.grid_search.GridSearchCV.html#sklearn.grid_search.GridSearchCV) http://scikit-learn.org/dev/modules [/生成/sklearn.grid_search.GridSearchCV.html#sklearn.grid_search.GridSearchCV](http://scikit-learn.org/dev/modules/generated/sklearn.grid_search.GridSearchCV.html#sklearn.grid_search.GridSearchCV)）？

```
from __future__ import print_function

from sklearn import datasets
from sklearn.cross_validation import train_test_split
from sklearn.grid_search import GridSearchCV  
from sklearn.metrics import classification_report
from sklearn.svm import SVC

print(__doc__)

# Loading the Digits dataset
digits = datasets.load_digits()

# To apply an classifier on this data, we need to flatten the image, to
# turn the data in a (samples, feature) matrix:
n_samples = len(digits.images)
X = digits.images.reshape((n_samples, -1))
y = digits.target

# Split the dataset in two equal parts
X_train, X_test, y_train, y_test = train_test_split(
X, y, test_size=0.5, random_state=0)

# Set the parameters by cross-validation
tuned_parameters = [{'kernel': ['rbf'], 'gamma': [1e-3, 1e-4],
                 'C': [1, 10, 100, 1000]},
                {'kernel': ['linear'], 'C': [1, 10, 100, 1000]}]

scores = ['precision', 'recall']

for score in scores:
    print("# Tuning hyper-parameters for %s" % score)
    print()

    clf = GridSearchCV(SVC(C=1), tuned_parameters, scoring=score)
    clf.fit(X_train, y_train, cv=5)

    print("Best parameters set found on development set:")
    print()
    print(clf.best_estimator_)
    print()
    print("Grid scores on development set:")
    print()
    for params, mean_score, scores in clf.grid_scores_:
        print("%0.3f (+/-%0.03f) for %r"
          % (mean_score, scores.std() / 2, params))
    print()

    print("Detailed classification report:")
    print()
    print("The model is trained on the full development set.")
    print("The scores are computed on the full evaluation set.")
    print()
    y_true, y_pred = y_test, clf.predict(X_test)
    print(classification_report(y_true, y_pred))
    print()

# Note the problem is too easy: the hyperparameter plateau is too flat and the
# output model is the same for precision and recall with ties in quality. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T01:11:28.997

该参数`scoring`是 0.14 开发版本中的新参数，示例代码适用于该版本。你安装的scikit可能是[0.13](http://scikit-learn.org/0.13/modules/generated/sklearn.grid_search.GridSearchCV.html#sklearn.grid_search.GridSearchCV)或更早的版本，没有评分参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T01:11:45.880

您正在运行开发版本吗？

例如[0.12不支持该参数](http://scikit-learn.org/0.12/modules/generated/sklearn.grid_search.GridSearchCV.html#sklearn.grid_search.GridSearchCV)

# c - 从 C 文件中解析二维矩阵

> ID：14928020
> 
> 赞同：-1
> 
> 时间：2013-02-18T00:57:42.287
> 
> 标签：c

我是 C 编程的新手，正在寻找解决问题的编程方法。作为我的第一个编程软件，我尝试从文本文件中读取二维矩阵并将其存储在数组中。我的目的是比较字符串中的数字，以获得图表中的老式最短路径算法。

首先，我有一种读取每一行的方法，用 fscanf 解析它，然后用 strcpy 将每一行存储在一个二维数组中。尽管我设法在循环中使用 fprint 将其显示在显示器上，但在一个 [][]-矩阵中复制多个 []-行似乎存在结构上的不可行性。编译器用一些讨厌的评论来折磨我，比如关于 strcpy. 在 C 中，洞的想法似乎是一个不可行的死胡同。

那么有人知道如何从文件中读取矩阵并将其放在统一的字符串数组中以比较值吗？指针，结构，什么？一个不错的解决方案是可以在矩阵中读取几个浮点变量。

也许你们中的一些更有经验的人有一个想法？

谢谢！Threx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:12:32.417

这取决于您的文本文件的结构方式。如果文件中的所有数字都是这样的

```
11223344
44556677 
```

那么你可以使用类似的东西

```
#include <stdio.h>
#include <string.h>    

char *charbuffer, ROWS, COLS;
char matrix[ROWS][COLS]
for (row = 0; row < ROWS; row++) {
    for (col = 0; col < COLS; col++) {
        if (fgets(charbuffer, 3, file)) {
            matrix[row][col] = strdup(charbuffer);
        }
    }
} 
```

where从一次`fgets(buffer, n, file)`获取字符并将字符保存到（那个额外的字符是字符串终止）。在这种特殊情况下，第一次迭代将获取，保存到缓冲区并将其复制到缓冲区。`n - 1``file``n``buffer``\0``11``11\0`

确保您了解 和[之间的](http://careerride.com/c-strdup%28%29-and-strcpy%28%29.aspx)[区别`strcpy``strdup`](http://careerride.com/c-strdup%28%29-and-strcpy%28%29.aspx)。上面的循环将失败并用 s 填充您的矩阵`77`。

如果您的文件具有不同的结构，您可以将 替换为`fgets`适当的函数，例如`fscanf`.

**编辑**：`strdup`是一个 POSIX 函数。如果您碰巧使用的是 Windows 或没有可用的功能，您可以使用：

```
char *strdup(const char *string) {
    char *pointer = malloc(strlen(string) + 1);
    if (pointer) { 
        strcpy(pointer, string); 
    }
    return pointer;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:13:15.483

将矩阵转换为字符串将其作为字符串传递，并在将字符串作为参数发送到的函数中，将拆分拆分回数组。

# 编辑

糟糕，请忽略我的想法，因为我没有阅读完整的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-13T10:45:28.703

您是否尝试过仅对矩阵使用一维数组？

例如，通过一点数学，您可以阅读每个条目： 为您提供行和列`matrix[i * columns + j]` 上的元素。`i``j`

# html - 如何用css制作前卫的角落

> ID：14928021
> 
> 赞同：0
> 
> 时间：2013-02-18T00:58:05.530
> 
> 标签：html, css

有谁知道如何制作像下面这样的前卫角落？看看边缘如何环绕角落。我也想知道这个词（如果有的话）。跨浏览器支持（IE8 及更高版本，额外的 IE7）是必须的。谢谢你的帮助。

![在此处输入图像描述](../Images/77696a3e03a774a78559a3fd7b41e070.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T01:04:47.377

看看[这个教程](http://www.sitepoint.com/pure-css3-ribbons/)。我不知道它的跨浏览器兼容性如何（因为它是 CSS3），但它达到了你想要的效果。

HTML：

```
<div>
    <h2></h2>
</div> 
```

CSS：

```
div {
    width: 200px;
    padding: 50px;
    margin: 0 auto;
    border: 1px solid #333;
}

h2 {
    position: relative;
    width: 50%;
    height: 50px;
    margin: 30px 10px 10px -70px;
    background-color: orange;
}

h2:after {
    content: ' ';
    position: absolute;
    width: 0;
    height: 0;
    left: 0px;
    top: 100%;
    border-width: 5px 10px;
    border-style: solid;
    border-color: #666 #666 transparent transparent;
} 
```

[JS 小提琴示例](http://jsfiddle.net/2w8eU/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:06:20.353

```
.box{
    background: #666;
    border: 4px solid #fff;
    box-shadow: 0px 0px 20px #000;
    width: 200px;
    height: 200px;
    margin: 40px auto;
    position: relative;
}

.ribbon{
    background: #FFA500;
    position: absolute;
    width: 100%;
    top: 20px;
    left: -20px;
    height: 20px;
    padding-right: 20px;
}

.ribbon::before{
    content: '';
    position: absolute;
    left: 0px;
    top: 20px;
    width: 0px;
    height: 0px;
    border-style: solid;
    border-width: 0 16px 10px 0;
    border-color: transparent #FFA500 transparent transparent;    
    z-index: -5;
} 
```

HTML：

```
<div class="box">
    <div class="ribbon"></div>
</div> 
```

（[演示](http://dabblet.com/gist/4974592)）

我不认为 IE 7/8 支持`::before`伪元素，所以如果你想要 IE 兼容性添加另一个元素并`::before`在其上放置样式:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T01:22:59.023

这`edgy corner`实际上只是一个`div`与一个`triangle`，你只需要**一个**元素来做到这一点。

```
<div id="myCorner"></div> 
```

**myCorner**将是 div，而**myCorner:after**将是三角形。

看看：http: [//jsfiddle.net/Starx/Xp6E7/2/](http://jsfiddle.net/Starx/Xp6E7/2/)

![在此处输入图像描述](../Images/158d6ed72840d5a594b0fdf53ab4535e.png)

```
#myCorner
{
    width:100px;
    height:70px;
    background-color:orange;
     -webkit-box-shadow: 0 4px 5px -3px black;
       -moz-box-shadow: 0 4px 5px -3px black;
            box-shadow: 0 4px 5px -3px black;
    position:relative;

}

#myCorner:after
{
    content:"";    
    position:absolute;
    left: 0;
    top:100%;
    width: 0px;
    height: 0px;
    border-style:solid;
    border-width: 5px 10px;
    border-color: orange orange transparent transparent;
    z-index: -1;
} 
```

# r - 因子分析错误

> ID：14928026
> 
> 赞同：0
> 
> 时间：2013-02-18T00:58:22.800
> 
> 标签：r, factor-analysis

我正在对 500 个变量和 1316 条记录进行因子分析。我收到以下错误：

```
Error in solve.default(cv) : 
  system is computationally singular: reciprocal condition number = 2.5024e-18 
```

我使用的语法是：

```
factor.out1 <- factanal(covmat=cor(factor3, use="complete.obs"),factor=50,rotation="none") 
```

任何建议都会有很大帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:58:54.457

```
 com.kakao.talk com.android.phone com.gau.go.launcherex com.android.browser com.android.contacts com.nhn.android.search com.kakao.story
1              61               616                     0                 363                   48                      0               4
2             180               192                     0                  70                   94                     60              10
3             270               109                     0                 411                   53                      0               0
4             610                55                     0                  23                   47                    201              18
5             653                 0                     0                  11                    0                    153              64
6             341               147                     0                   2                    0                     58             437
7             167               118                     0                   1                    1                    109               0
8               0               379                     0                   4                  289                    121               0
9            1254                93                  1434                 616                   86                      7             268
10           1907               111                   328                   0                  119                   1073               0 
```

here is a sample of 10 obs and 7 rows

# css - 自定义 CSS：自定义填充

> ID：14928035
> 
> 赞同：0
> 
> 时间：2013-02-18T00:59:09.517
> 
> 标签：css, wordpress, padding

[http://www.shaunhillphotography.co.uk/news/](http://www.shaunhillphotography.co.uk/news/)

我试图从白色空间的顶部到第一个标题获得 25px 的填充。到目前为止我发现的问题是，如果我对该标题应用样式，它会改变所有这些，这使得其余部分看起来很奇怪。

相反，在[http://www.shaunhillphotography.co.uk/](http://www.shaunhillphotography.co.uk/)的首页上，我想缩小座右铭“热爱生活”之间的差距。喜欢摄影”和图像滑块，而不会弄乱任何其他标题的样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T01:02:08.053

1.  距顶部 25px 的内边距。我会将填充应用于#content-sm DIV。
2.  将样式应用于#post-110 DIV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:01:23.740

将填充添加到容器中：

```
#container {
    padding-top: 25px;
} 
```

对于第二个问题，只需删除`<p>`标题和图像幻灯片之间的空白即可。

# c# - 实体框架多级联路径错误

> ID：14928037
> 
> 赞同：0
> 
> 时间：2013-02-18T00:59:35.487
> 
> 标签：c#, entity-framework-5

到目前为止，为了使用 Entity Framework 实现我想要的，我所做的事情是这样的：

```
// User.cs
public class User {
  public Guid ID { get; set; } // column: user_id
  public virtual ICollection<Event> Events { get; set; }
}
// Event.cs
public class Event {
  public Guid ID { get; set; } // column: event_id
  public virtual Guid UserID { get; set; } // column: event_userid
  public virtual ICollection<User> Guests { get; set; }
}
// MyAppContext.cs
...
protected override void OnModelCreating(DbModelBuilder mb) {
  mb.Entity<User>()
    .HasKey(u => u.ID)
    .HasMany(u => u.Events)
    .WithOptional()
    .HasForeignKey(e => e.UserID);

  mb.Entity<Event>()
    .HasKey(e => e.ID)
    .HasMany(e => e.Guests)
    .WithMany();
}
... 
```

我期望数据库结构如下：

```
TABLE: user
user_id uniqueidentifier not null primary key

TABLE: event
event_id uniqueidentifier not null primary key
event_userid uniqueidentifier not null foreign key references user(user_id)

TABLE: event_guests
event_id uniqueidentifier not null
user_id uniqueidentifier not null 
```

我有一种感觉，我上面使用的流畅 API 不会提供预期的数据库结构，而且，我得到以下异常，我不知道如何修复：

```
Introducing FOREIGN KEY constraint 'FK_xxx' on table 'event_guests'
may cause cycles or multiple cascade paths. Specify ON DELETE NO
ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints.
Could not create constraint. See previous errors. 
```

我是实体框架的新手，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:27:15.330

Try replacing your configurations with a single many to many configuration.

```
modelBuilder.Entity<User>()
            .HasMany(a => a.Events)
            .WithMany(b=> b.Guests)
            .Map(x =>
            {
                x.MapLeftKey("UserId");
                x.MapRightKey("EventId");
                x.ToTable("EventGuests");
            }); 
```

# php - 请告知为什么表单没有重定向到 url？

> ID：14928041
> 
> 赞同：0
> 
> 时间：2013-02-18T00:59:56.667
> 
> 标签：php

请帮助这个 php 联系表。它有效，但是，我想将访问者重定向到不同的 .html 页面而不是显示感谢消息，但我不想丢失联系表单信息。谢谢 ！

我正在使用非常简单的联系表格：

```
<form method="POST" action="sendmail.php" class="form">
        <p class="yourName"> Submit Name:</p>
        <input name="text" class="name" placeholder="Name" name="name">
        <p class="yourEmail">Submit Email:</p>
        <input type="text" class="email" placeholder="Email" name="email">
        <p class="yourInquiry">Submit Inquiry:</p>
        <input type="submit" value="Submit" class="Button">    
    </form>

<?php
    $to = "xyz@hotmail.com";
    $subject = "Inquiry from ". $_POST['name'];
    $headers = "MIME-Version: 1.0" . "\r\n";
    $headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
    $html`enter code here` = "";
    foreach ($_POST as $name => $value) {
        $html .= "<strong>$name</strong><br>";
        $html .= "<p>$value</p><br>";
    }
    if (mail($to, $subject, $html,$headers)) {
        /* Success Message */   
    } else {
        /* Error message */
    }

    header('Location:about.html');

    } else {
    echo "You didnt enter anything";
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:02:39.450

`header`和相关功能（特别是`setcookie`）必须出现在页面上的任何内容之前。在这种情况下，您的表格会在它之前发送。

您可以重新排列您的代码，以便表单处理出现在表单之前，或者开始您的代码`ob_start`以绕过限制（但如果您确实打算将回调传递给函数，这只是一个好主意）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:02:49.983

在使用函数之前，您不得输出（或回显）任何内容`header()`

将所有逻辑放在脚本顶部，将 html 标记放在底部，这样您就可以执行 `header('Location:about.html');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T01:07:05.057

首先，如果您想使用标头位置重定向，则不能显示任何消息，例如成功消息或错误消息。

第二次使用 header("Location:about.html");

尝试更改代码的顺序，如下所示

```
<?php

if(isset($_POST["yourName"])){
    $to = "xyz@hotmail.com";
    $subject = "Inquiry from ". $_POST['name'];
    $headers = "MIME-Version: 1.0" . "\r\n";
    $headers .= "Content-type:text/html;charset=iso-8859-1" . "\r\n";
    $html`enter code here` = "";
    foreach ($_POST as $name => $value) {
        $html .= "<strong>$name</strong><br>";
        $html .= "<p>$value</p><br>";
    }
    if (mail($to, $subject, $html,$headers)) {
        /* Success Message */   
    } else {
        /* Error message */
    }

    header("Location:about.html");

    } else {
    echo "You didnt enter anything";
}
    ?>

<form method="POST" action="sendmail.php" class="form">
        <p class="yourName"> Submit Name:</p>
        <input name="text" class="name" placeholder="Name" name="name">
        <p class="yourEmail">Submit Email:</p>
        <input type="text" class="email" placeholder="Email" name="email">
        <p class="yourInquiry">Submit Inquiry:</p>
        <input type="submit" value="Submit" class="Button">    
    </form> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-18T01:05:00.873

您不能在 header 语句之前输出任何内容，您必须将 header() 语句更改为：

```
header('Location: http://www.example.com/about.html'); 
```

# sql - SQL在apache derby中创建域

> ID：14928051
> 
> 赞同：1
> 
> 时间：2013-02-18T01:01:17.790
> 
> 标签：sql, derby

因此，我尝试在 Apache derby 中创建一个基本域，并且我很确定我的语法正确，因为我参考了有关该主题的多个文档。这是我输入的内容

```
create domain Weight float not null check (weight >=5 or <= 10);` 
```

我什至基本上都试过了；

```
create domain Weight float 
```

Apache Derby 是否缺少某些东西，我收到此错误：

`ERROR 42X01: Syntax error: Encountered "domain" at line 1, column 8.`

任何想法为什么它给我这个错误，我认为德比可能有不同的语法，但我不确定。

# video - 有没有办法使用 ColdFusion 获取视频文件的持续时间？

> ID：14928052
> 
> 赞同：3
> 
> 时间：2013-02-18T01:01:18.087
> 
> 标签：video, coldfusion

我有一个播放随机视频和图像文件的系统，我想用它们设置一些淡入淡出的过渡。现在，我希望时机恰到好处，所以我认为最好的开始方法是确定我将要播放的视频的持续时间。我在使用 JavaScript 确定文件持续时间时遇到了一些问题，所以我将其搁置一会，并认为我可以通过 ColdFusion 来做到这一点。

我试过让最好的朋友谷歌找到答案，但无济于事。所以这里的任何人都知道如何确定刚刚使用 ColdFusion 上传的视频文件的持续时间？

谢谢。

**更新：**

我设法找到了一些东西：

```
<!--- Set CrLf definition --->
<cfset CrLf = Chr(13)&Chr(10) />
<!--- Use FF Probe to extract stream information, Stream 1 contains duration, width and height info about the file --->
<cfexecute name="c:\inetpub\wwwroot\ffprobe.exe" arguments="#testFile# -show_streams" timeout="60" variable="info" errorVariable="errorOut" />
<!--- Concentrates on extracting information from the very first stream in the returned variable --->
<cfset StreamStart = Find("[STREAM]", info) />
<cfset StreamEnd = Find("[/STREAM]", info) />
<cfset Stream = Mid(info, StreamStart+9, StreamEnd - StreamStart - 12)&CrLf />
<!--- ^^ Parses out first stream --->
<!--- vv Extracts the duration, don't really mind the long decimal bit at the end! --->
<cfset adRefreshTime = Mid(Stream, Find("duration=",Stream)+9, Find(CrLf, Stream, Find("duration=",Stream)+9)-(Find("duration=",Stream)+9)) /> 
```

抽出的流在持续时间中包含十进制秒数，而不是 HH:MM:SS.mmm，所以我只是将其解析出来......即时持续时间......你怎么看？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T16:40:25.070

我自己的（免费/开源）VideoConverter.cfc 通常可以做到这一点。

[https://github.com/sebtools/Video-Converter](https://github.com/sebtools/Video-Converter)

```
 <cfset sInfo = VideoConverter.getVideoInfo(path)> 
```

在该方法返回的结构中查找“持续时间”键。如果存在，那么 VideoConverter.cfc 能够计算出视频的持续时间。

在内部，它使用 ffmpeg.exe 来获取该信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T01:08:46.140

对于 mp3，您可以使用它。如果您传递视频文件，则可以处理视频

```
<cfset mp3File = createObject("java", "coldfusion.util.MP3File").init("C:\music.mp3")>
<cfoutput>mp3File.getDuration() : #mp3File.getDuration()# Sec</cfoutput><br> 
```

编辑：尝试使用 wmv 文件，它给了我 4076 秒的 11 分 6 秒视频。用 mp3 试过，它说 3:24 秒的 mp3 需要 207 秒。我正在使用 CF9.01

# python - Reportlab 文本背景大小与字体大小不匹配

> ID：14928057
> 
> 赞同：2
> 
> 时间：2013-02-18T01:01:56.480
> 
> 标签：python, text, reportlab

我试图在一个简单的黑条上添加一个带有白色文本的标题（包含来自页面的内容，所以做一个实际的标题是很复杂的）。问题是文本的背景似乎与文本不成比例，如我的 MWI 所示：

```
from reportlab.lib import colors
from reportlab.lib.enums import TA_JUSTIFY, TA_RIGHT, TA_CENTER, TA_LEFT
from reportlab.lib.pagesizes import letter, landscape
from reportlab.platypus import PageTemplate, Frame, NextPageTemplate, BaseDocTemplate, SimpleDocTemplate, Paragraph, Spacer, Image, Table, TableStyle, PageBreak
from reportlab.platypus import ListFlowable, ListItem
from reportlab.lib.styles import getSampleStyleSheet, ParagraphStyle
from reportlab.lib.units import inch
from reportlab.rl_config import defaultPageSize
from reportlab.pdfbase.pdfmetrics import stringWidth
from reportlab.pdfgen import canvas

#c = canvas.Canvas("tables.pdf")
doc = SimpleDocTemplate("mwi.pdf",pagesize=letter,
                        rightMargin=72,leftMargin=72,
                        topMargin=72,bottomMargin=60)

styles=getSampleStyleSheet()
styles.add(ParagraphStyle(name='Table Top Black Back', fontName ='Helvetica',fontSize=14, backColor = colors.black, textColor=colors.white, alignment=TA_LEFT))
styles.add(ParagraphStyle(name='Table Top Red Back', fontName ='Helvetica',fontSize=9, backColor = colors.red, textColor=colors.black, alignment=TA_LEFT))

styleN = styles["BodyText"]

# Header
# report: topic/subtopic overview
report = []
ptext = 'Test' 
report.append(Paragraph(ptext, styles["Table Top Black Back"]))
report.append(Spacer(1, 24))

ptext = 'Test' 
report.append(Paragraph(ptext, styles["Table Top Black Back"]))
report.append(Spacer(1, 24))

ptext = 'Test' 
report.append(Paragraph(ptext, styles["Table Top Red Back"]))
report.append(Spacer(1, 48))

# Build Document
doc.build(report) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-14T08:32:03.740

首先，从您的代码中，它不会编译，因为它给出了错误。

```
ImportError: cannot import name ListFlowable
ImportError: cannot import name ListItem 
```

我删除了这些的导入，因为这里不需要。

背景大小不匹配的原因是因为您没有在段落中指定“leading”属性，您更改了“fontSize”，但没有更改“leading”属性。

这个“引导”是什么？这是相邻文本行之间的间距；一个好的经验法则是使其比磅值大 20%。要获得双倍行距文本，请使用高前导。

默认情况下，fontSize 设置为 10，leading 设置为 12。

因此，在上面的示例中，只要将 fontSize 设置为 14，但前导值仍为 12，这就是文本大小不合适的原因。

解决方案是在上面的示例中定义稍大的前导。

我不认为这是一个错误，而是一个非最佳设计考虑。这是一个非常主观的话题，不确定报告实验室开发人员当时正在经历什么。

```
from reportlab.lib import colors
from reportlab.lib.enums import TA_JUSTIFY, TA_RIGHT, TA_CENTER, TA_LEFT
from reportlab.lib.pagesizes import letter, landscape
from reportlab.platypus import PageTemplate, Frame, NextPageTemplate, BaseDocTemplate, SimpleDocTemplate, Paragraph, Spacer, Image, Table, TableStyle, PageBreak
from reportlab.lib.styles import getSampleStyleSheet, ParagraphStyle
from reportlab.lib.units import inch
from reportlab.rl_config import defaultPageSize
from reportlab.pdfbase.pdfmetrics import stringWidth
from reportlab.pdfgen import canvas

#c = canvas.Canvas("tables.pdf")
doc = SimpleDocTemplate("mwi.pdf",pagesize=letter,
                    rightMargin=72,leftMargin=72,
                    topMargin=72,bottomMargin=60)

styles=getSampleStyleSheet()
styles.add(ParagraphStyle(name='Table Top Black Back', fontName ='Helvetica',fontSize=14, leading=16,backColor = colors.black, textColor=colors.white, alignment=TA_LEFT))
styles.add(ParagraphStyle(name='Table Top Red Back', fontName ='Helvetica',fontSize=9, leading=12, backColor = colors.red, textColor=colors.black, alignment=TA_LEFT))

styleN = styles["BodyText"]

# Header
# report: topic/subtopic overview
report = []
ptext = 'Test' 
report.append(Paragraph(ptext, styles["Table Top Black Back"]))
report.append(Spacer(1, 24))

ptext = 'Test' 
report.append(Paragraph(ptext, styles["Table Top Black Back"]))
report.append(Spacer(1, 24))

ptext = 'Test' 
report.append(Paragraph(ptext, styles["Table Top Red Back"]))
report.append(Spacer(1, 48))

# Build Document
doc.build(report) 
```

希望这可以帮助。快乐的报告实验室编码。

# php - 他们说 HTML 中的 javascript 代码被认为是不好的做法，如何解决这个问题？

> ID：14928068
> 
> 赞同：1
> 
> 时间：2013-02-18T01:04:35.437
> 
> 标签：php, javascript, html, idioms, inlining

因此，我知道将 javascript 混合到 HTML 中是不好的，即使在头脑中也是如此。但是让我们看看这段代码（我想从列表中删除项目）

```
.
.
.
<div>item1 <a href="#" onclick="return deleteThisItemById (1);">delete me</a><br />
<div>item4 <a href="#" onclick="return deleteThisItemById (4);">delete me</a><br />
<div>item5 <a href="#" onclick="return deleteThisItemById (5);">delete me</a><br />
.
.
. 
```

此列表由 PHP 生成。deleteThisItemById() 位于外部`.js`文件中。这仍然被认为是坏事吗？如果是这样，规范的解决方案是什么？jQuery 是可以接受的，原始的 javascript 也是如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T01:08:41.583

```
$(function() {
  $('a#my_id1').click(function() {
    var myId = $(this).attr('id');
    return deleteThisItemByID(myId);
  });
});

<div>
    item1 
    <a id="my_id1" href="#">delete me</a>
</div> 
```

顺便说一句，您的 HTML 无效。您的 div 标签嵌套不正确。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T01:09:25.867

简单...为您要删除的项目提供一个类或 id **（如果只有一个项目，则仅使用 id）**

```
<div>item1 <a href="#" class='deleteMe'>delete me</a><br /></div>
<div>item4 <a href="#" class='deleteMe'>delete me</a><br /></div>
<div>item5 <a href="#" class='deleteMe'>delete me</a><br /></div> 
```

然后使用 jQuery 定位元素

```
$('.deleteMe').on('click', function(event) {
    $(this).remove();
}); 
```

注意...如果您想删除整个 div，请使用此选择器：

```
$('.deleteMe').closest('div').on('click', function(event) {
    $(this).remove();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T01:25:15.967

你可以使用 addEventListener 来做到这一点。然后你的 html 中不会有 js 代码：

```
var elems = document.querySelectorAll("div.removable");
for(var i=0;i<elems.length;i++){      
    elems[i].querySelector("a").addEventListener("click",function(e){
        var toRemove = this.parentNode;
        var parent = toRemove.parentNode;
        parent.removeChild(toRemove);
    },false);
} 
```

但是，我遍历了 div，因此为此添加了一个类：

```
<div>
    <div  class="removable">item1 <a href="#">delete me</a></div><br />
    <div  class="removable">item2 <a href="#">delete me</a></div><br />
    <div  class="removable">item2 <a href="#">delete me</a></div><br />
</div> 
```

看看这个[小提琴](http://jsfiddle.net/TjtaT/4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T01:38:39.103

我喜欢在代表这些对象的 dom 元素的“data-”属性中存储 id 和类似的元数据。

在这种情况下，我通常会使用类似的设置

```
<ul class="posts">
  <li class="post" data-post="####">
    <p>content...</p>
    <ul class="actions">
      <li>
        <a class="delete">delete</a>
      </li>
    </ul>
  </li>
</ul> 
```

然后在页面底部包含的 .js 文件中：

```
$('.posts').on('click', '.actions .delete',
function() {
  // which post should be deleted?
  var $post = $(this).closest('.post');
  // remove the DOM element
  $post.remove();
  // some sort of ajax operation
  $.ajax({
    // url, dataType, etc
    data: { post_id: $post.data('id') }
  });
}); 
```

这一个处理程序将应用于主列表中的所有“.action .delete”元素，这意味着如果您想添加一个使用 ajax 修改或添加时间到列表的加载程序或分页，一个事件处理程序仍然可以很好地工作.

# php - 如何在 AJAX 调用中调用 php 函数而不是 php 类

> ID：14928075
> 
> 赞同：0
> 
> 时间：2013-02-18T01:05:08.337
> 
> 标签：php, javascript, ajax

这是我要问的一个非常简单而愚蠢的问题：

我对 PHP 很陌生，我想知道是否有一种方法可以通过 AJAX 调用 PHP 类中的一个函数。

例如这样的：

```
$.ajax({
        url:'newPHPClass.php/My_Function_Name'
        ...
}); 
```

所以在php中，它会像：

```
<?php
class newPHPClass {
    function My_Function_Name(){

    }
}
?> 
```

为什么我需要这个？所以我不会有这么多的 php 文件。相反，我将有一个内部具有不同功能的单个 php 类。它看起来更干净，额外的文件更少。

我以前使用过 ASP.NET MVC C#。在 ASP.NET 中，我可以简单地将控制器的名称放在 AJAX 的 URL 部分，`/`然后是我的函数名称（可以在我的 Global.asax.cs 文件中修改）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T01:33:12.140

```
<?php

$action = $_POST['action'];

class Foo {

    function execute($action) {
        switch($action) {
            case "method1":
                $this->doMethod1();
                break;
            case "method2":
                $this->doMethod2();
                break;
        }
    }

    function doMethod1() {
        echo "Foo::doMethod1";
    }

    function doMethod2() {
        echo "Foo::doMethod2";
    }
}

$foo = new Foo();
$foo->execute($action);

?> 
```

并`foo.php?action=method1`用作 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T01:42:25.463

首先，您不通过 AJAX*调用函数或方法，而是向页面***发出**请求。如果您对 PHP 文件进行 AJAX 调用，例如：

```
<?php
class newPHPClass {
    function My_Function_Name(){

    }
}
?> 
```

除了为该类分配空间然后在请求结束时立即销毁它之外，什么都不会返回，服务器端也不会发生任何事情。

对于您的问题：在客户端（Javascript）上，您将如何管理类和文件组织并不重要：AJAX 调用只会请求一个文件。

我建议你**至少有**两个不同的文件：函数或类的声明和管理响应的文件。你需要与执行和声明分开一点，因此我会避免这样的事情：

```
class A { ... }
$a = new A;
$a->myMethod(); 
```

根据 AJAX 输出，我会选择这样的东西：

```
# class.php
class A {...}

# ajax.php
$a = new A;
$a->myMethod(); 
```

最后一个建议：当它们没有意义时不要使用类。将一堆函数分组在一个类中对我来说并没有真正的 OOP 感觉。我认为您正在使用带有过程代码的类。因此，我会使用一个声明一堆函数的文件。

# javascript - 重叠水平矩形的问题

> ID：14928077
> 
> 赞同：0
> 
> 时间：2013-02-18T01:05:17.250
> 
> 标签：javascript

所以我正在尝试解决图形问题。基本上有一个容器，比方说它的 600px 宽。如果该容器中只有一个矩形（没有重叠的矩形），它将占据它的宽度。但是，问题是当这些矩形重叠时，宽度必须相应缩小。我们得到了这个矩形的左上角和左下角的 y 坐标。（例如它开始向下 60px 并在大容器向下 120 px 结束）

所以我写了一个重叠算法来检查是否存在重叠并计算矩形重叠的矩形数量（包括它自己）。然后我将容器宽度除以重叠元素的最大数量，以获得较小矩形的宽度。

```
 for (i = 0; i < events.length; i++) {
        var event = events[i];
        var numCollisions = 0;  
        for (j = 0; j < events.length; j++) {
            var eventCmp = events[j];
            if (event.start <= eventCmp.start && event.end > eventCmp.start ||
                event.start < eventCmp.end && event.end >= eventCmp.end) {
            numCollisions++;   
        }
    } 
```

但是，我注意到这有一个很大的问题。如果你看下面这张图片，最右边的矩形有两个重叠的矩形。通过我的算法，您会得到不正确的容器宽度/3（包括矩形本身）。实际答案是容器宽度/2。

![在此处输入图像描述](../Images/ec61c82405b6d94997d0da37fc0846c2.png)

所以问题是（在这个冗长的解释之后）我需要找出两个矩形是否水平对齐。几个小时以来，我一直在努力解决这个问题。关于我如何做到这一点的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:19:47.783

好吧，最简单的答案是`divide by 2 IF you have a collision`（不关心你实际有多少碰撞）。如果你需要更复杂的东西，你能展示一个更复杂的案例吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:34:18.117

一个不太理想但易于实施的算法是：

```
foreach y coord in the main container
    rects = find all rects which contain this y coord
    foreach rects as rect
       rect.maxHorizNeighbors = max(rects.length, rect.maxHorizNeighbors) 
```

您还需要解决一些其他问题，但这应该可以帮助您开始家庭作业。特别是，在某些情况下，您可能最终会出现水平间隙。生病让你自己找到。

# objective-c - 更正 iOS Obj.C 中的选择器错误

> ID：14928078
> 
> 赞同：0
> 
> 时间：2013-02-18T01:05:21.947
> 
> 标签：objective-c

我使用的是 iOS 6.1，有一个关于错误的问题。

'RegFile' 用作前一个参数的名称，而不是作为选择器的一部分。

RegFile: .... RegFile : 清除错误后的空格，但我想了解如何解决此问题。空白清除错误但否定方法？

![空白消除错误但否定方法](../Images/c07c6334f40ab0f4f122a53f15b65959.png)

```
#import <Foundation/Foundation.h>

@class FileHandle;

@interface FileHandle : NSObject {
  NSArray *paths;
  NSFileManager *fileManager;
}

- (NSString *)GetSyncFileName;
- (void)CreateBarcodeDirectory;
- (void)ReadRegistry:(NSString *)RegFile :(char *)RegData;  // Whitespace after RegFile clears error but negates the method??
- (void)SaveRegistry:(NSString *)RegFile:(char *)RegData :(NSString *)RegString;
- (NSString *)ReadDataFromFile :(int)path :(NSString *)filename :(char *)data;
- (void)WriteDataToFile :(int)path :(NSString *)filename :(NSString *)data :(NSString *)content;
- (NSArray *)GetFileList :(int)path;
- (NSString *)GetDirectory:(int)path;

@property (nonatomic, retain) NSArray *paths;
@property (nonatomic, retain) NSFileManager *fileManager;
@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T01:15:32.977

你的 NSString 参数应该有一个参数名称：

```
-(void)readRegistry:(NSString *) stringName regFile:(char *) regData; 
```

此外，方法的名称（及其所有部分）应以小写字母开头。

# google-maps - 显示标记的 GMap

> ID：14928080
> 
> 赞同：-1
> 
> 时间：2013-02-18T01:05:37.637
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我正在尝试从 MySql 数据库加载标记（我使用了一个 php 文件，它转换了提供 xml 输出的数据），但我只看到了地图。在阅读了 StackOverflow 上的帖子后，我仍然不知道它是如何工作的。

```
<!DOCTYPE html>
<html>
<head>
<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDY0kkJiTPVd2U7aTOAwhc9ySH6oHxOIYM&sensor=true"></script>
</head>

<body>

<script>
function initialize()
{
var map=new google.maps.Map(document.getElementById("mapka"), {
    center:new google.maps.LatLng(51.109612,17.036276),
    zoom:12,
    mapTypeId:google.maps.MapTypeId.ROADMAP
});

    downloadUrl("dane.php", function(data)
    {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++)
    {
        var nazwa = markers[i].getAttribute("nazwa");
        var lat = parseFloat(markers[i].getAttribute("lat"));
        var lng = parseFloat(markers[i].getAttribute("lng"));
        var point = new google.maps.LatLng(lat,lng);

        var marker = new google.maps.Marker({
        map: map,
        position: point
        });
    }
});
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}
function doNothing() {}

google.maps.event.addDomListener(window, 'load', initialize);

</script>

<div id="mapka" style="width:700px;height:500px;"></div>

</body>
</html> 
```

XML 如下所示：

```
<dane>
    <marker lat="51.110287" lon="17.062647" nazwa="Hello_1" address="Street_1"/>
    <marker lat="51.111807" lon="17.058012" nazwa="Hello_2" address="Street_2"/>
</dane> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:02:10.443

您尝试访问一个属性`lng`，但为 XML 内的标记定义的属性是`lon`

# php - 将 imagedestroy() 从光盘中删除

> ID：14928081
> 
> 赞同：4
> 
> 时间：2013-02-18T01:05:39.047
> 
> 标签：php, image, compression, gd

```
function png2jpg($originalFile, $outputFile, $quality) {
    $image = imagecreatefrompng($originalFile);
    imagejpeg($image, $outputFile.'.jpg', $quality);
    imagedestroy($image);
} 
```

我正在使用它来压缩图像，但我一直发现我保存的文件已删除。imagedestroy() 是否会导致它节省内存，或者它还会删除输出文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T01:07:28.013

不只是在记忆中。

从手册

> imagedestroy() 释放与图像图像相关的任何内存。

使用[unlink()](http://php.net/manual/en/function.unlink.php)删除文件

# pdf - PDF阅读器视图控制器

> ID：14928082
> 
> 赞同：1
> 
> 时间：2013-02-18T01:06:08.203
> 
> 标签：pdf, download, viewer

想知道是否有人可以举例说明如何下载文件以用于此 PDF 阅读器代码？我很新，一直在努力，但我认为是时候看看有经验的眼睛了。谢谢！

```
//
//  ReaderViewController.m
//  Reader v2.6.0

/////////////////////////////
#import "ReaderConstants.h"
#import "ReaderViewController.h"
#import "ThumbsViewController.h"
#import "ReaderMainToolbar.h"
#import "ReaderMainPagebar.h"
#import "ReaderContentView.h"
#import "ReaderThumbCache.h"
#import "ReaderThumbQueue.h"

#import <MessageUI/MessageUI.h>

@interface ReaderViewController () <UIScrollViewDelegate, UIGestureRecognizerDelegate, MFMailComposeViewControllerDelegate,
                                    ReaderMainToolbarDelegate, ReaderMainPagebarDelegate, ReaderContentViewDelegate, ThumbsViewControllerDelegate>
@end

@implementation ReaderViewController
{
    ReaderDocument *document;

    UIScrollView *theScrollView;

    ReaderMainToolbar *mainToolbar;

    ReaderMainPagebar *mainPagebar;

    NSMutableDictionary *contentViews;

    UIPrintInteractionController *printInteraction;

    NSInteger currentPage;

    CGSize lastAppearSize;

    NSDate *lastHideTime;

    BOOL isVisible;
}

#pragma mark Constants

#define PAGING_VIEWS 3

#define TOOLBAR_HEIGHT 44.0f
#define PAGEBAR_HEIGHT 48.0f

#define TAP_AREA_SIZE 48.0f

#pragma mark Properties

@synthesize delegate;

#pragma mark Support methods

- (void)updateScrollViewContentSize
{
    NSInteger count = [document.pageCount integerValue];

    if (count > PAGING_VIEWS) count = PAGING_VIEWS; // Limit

    CGFloat contentHeight = theScrollView.bounds.size.height;

    CGFloat contentWidth = (theScrollView.bounds.size.width * count);

    theScrollView.contentSize = CGSizeMake(contentWidth, contentHeight);
}

- (void)updateScrollViewContentViews
{
    [self updateScrollViewContentSize]; // Update the content size

    NSMutableIndexSet *pageSet = [NSMutableIndexSet indexSet]; // Page set

    [contentViews enumerateKeysAndObjectsUsingBlock: // Enumerate content views
        ^(id key, id object, BOOL *stop)
        {
            ReaderContentView *contentView = object; [pageSet addIndex:contentView.tag];
        }
    ];

    __block CGRect viewRect = CGRectZero; viewRect.size = theScrollView.bounds.size;

    __block CGPoint contentOffset = CGPointZero; NSInteger page = [document.pageNumber integerValue];

    [pageSet enumerateIndexesUsingBlock: // Enumerate page number set
        ^(NSUInteger number, BOOL *stop)
        {
            NSNumber *key = [NSNumber numberWithInteger:number]; // # key

            ReaderContentView *contentView = [contentViews objectForKey:key];

            contentView.frame = viewRect; if (page == number) contentOffset = viewRect.origin;

            viewRect.origin.x += viewRect.size.width; // Next view frame position
        }
    ];

    if (CGPointEqualToPoint(theScrollView.contentOffset, contentOffset) == false)
    {
        theScrollView.contentOffset = contentOffset; // Update content offset
    }
}

- (void)updateToolbarBookmarkIcon
{
    NSInteger page = [document.pageNumber integerValue];

    BOOL bookmarked = [document.bookmarks containsIndex:page];

    [mainToolbar setBookmarkState:bookmarked]; // Update
}

- (void)showDocumentPage:(NSInteger)page
{
    if (page != currentPage) // Only if different
    {
        NSInteger minValue; NSInteger maxValue;
        NSInteger maxPage = [document.pageCount integerValue];
        NSInteger minPage = 1;

        if ((page < minPage) || (page > maxPage)) return;

        if (maxPage <= PAGING_VIEWS) // Few pages
        {
            minValue = minPage;
            maxValue = maxPage;
        }
        else // Handle more pages
        {
            minValue = (page - 1);
            maxValue = (page + 1);

            if (minValue < minPage)
                {minValue++; maxValue++;}
            else
                if (maxValue > maxPage)
                    {minValue--; maxValue--;}
        }

        NSMutableIndexSet *newPageSet = [NSMutableIndexSet new];

        NSMutableDictionary *unusedViews = [contentViews mutableCopy];

        CGRect viewRect = CGRectZero; viewRect.size = theScrollView.bounds.size;

        for (NSInteger number = minValue; number <= maxValue; number++)
        {
            NSNumber *key = [NSNumber numberWithInteger:number]; // # key

            ReaderContentView *contentView = [contentViews objectForKey:key];

            if (contentView == nil) // Create a brand new document content view
            {
                NSURL *fileURL = document.fileURL; NSString *phrase = document.password; // Document properties

                contentView = [[ReaderContentView alloc] initWithFrame:viewRect fileURL:fileURL page:number password:phrase];

                [theScrollView addSubview:contentView]; [contentViews setObject:contentView forKey:key];

                contentView.message = self; [newPageSet addIndex:number];
            }
            else // Reposition the existing content view
            {
                contentView.frame = viewRect; [contentView zoomReset];

                [unusedViews removeObjectForKey:key];
            }

            viewRect.origin.x += viewRect.size.width;
        }

        [unusedViews enumerateKeysAndObjectsUsingBlock: // Remove unused views
            ^(id key, id object, BOOL *stop)
            {
                [contentViews removeObjectForKey:key];

                ReaderContentView *contentView = object;

                [contentView removeFromSuperview];
            }
        ];

        unusedViews = nil; // Release unused views

        CGFloat viewWidthX1 = viewRect.size.width;
        CGFloat viewWidthX2 = (viewWidthX1 * 2.0f);

        CGPoint contentOffset = CGPointZero;

        if (maxPage >= PAGING_VIEWS)
        {
            if (page == maxPage)
                contentOffset.x = viewWidthX2;
            else
                if (page != minPage)
                    contentOffset.x = viewWidthX1;
        }
        else
            if (page == (PAGING_VIEWS - 1))
                contentOffset.x = viewWidthX1;

        if (CGPointEqualToPoint(theScrollView.contentOffset, contentOffset) == false)
        {
            theScrollView.contentOffset = contentOffset; // Update content offset
        }

        if ([document.pageNumber integerValue] != page) // Only if different
        {
            document.pageNumber = [NSNumber numberWithInteger:page]; // Update page number
        }

        NSURL *fileURL = document.fileURL; NSString *phrase = document.password; NSString *guid = document.guid;

        if ([newPageSet containsIndex:page] == YES) // Preview visible page first
        {
            NSNumber *key = [NSNumber numberWithInteger:page]; // # key

            ReaderContentView *targetView = [contentViews objectForKey:key];

            [targetView showPageThumb:fileURL page:page password:phrase guid:guid];

            [newPageSet removeIndex:page]; // Remove visible page from set
        }

        [newPageSet enumerateIndexesWithOptions:NSEnumerationReverse usingBlock: // Show previews
            ^(NSUInteger number, BOOL *stop)
            {
                NSNumber *key = [NSNumber numberWithInteger:number]; // # key

                ReaderContentView *targetView = [contentViews objectForKey:key];

                [targetView showPageThumb:fileURL page:number password:phrase guid:guid];
            }
        ];

        newPageSet = nil; // Release new page set

        [mainPagebar updatePagebar]; // Update the pagebar display

        [self updateToolbarBookmarkIcon]; // Update bookmark

        currentPage = page; // Track current page number
    }
}

- (void)showDocument:(id)object
{
    [self updateScrollViewContentSize]; // Set content size

    [self showDocumentPage:[document.pageNumber integerValue]];

    document.lastOpen = [NSDate date]; // Update last opened date

    isVisible = YES; // iOS present modal bodge
}

#pragma mark UIViewController methods

- (id)initWithReaderDocument:(ReaderDocument *)object
{
    id reader = nil; // ReaderViewController object

    if ((object != nil) && ([object isKindOfClass:[ReaderDocument class]]))
    {
        if ((self = [super initWithNibName:nil bundle:nil])) // Designated initializer
        {
            NSNotificationCenter *notificationCenter = [NSNotificationCenter defaultCenter];

            [notificationCenter addObserver:self selector:@selector(applicationWill:) name:UIApplicationWillTerminateNotification object:nil];

            [notificationCenter addObserver:self selector:@selector(applicationWill:) name:UIApplicationWillResignActiveNotification object:nil];

            [object updateProperties]; document = object; // Retain the supplied ReaderDocument object for our use

            [ReaderThumbCache touchThumbCacheWithGUID:object.guid]; // Touch the document thumb cache directory

            reader = self; // Return an initialized ReaderViewController object
        }
    }

    return reader;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    assert(document != nil); // Must have a valid ReaderDocument

    self.view.backgroundColor = [UIColor scrollViewTexturedBackgroundColor];

    CGRect viewRect = self.view.bounds; // View controller's view bounds

    theScrollView = [[UIScrollView alloc] initWithFrame:viewRect]; // All

    theScrollView.scrollsToTop = NO;
    theScrollView.pagingEnabled = YES;
    theScrollView.delaysContentTouches = NO;
    theScrollView.showsVerticalScrollIndicator = NO;
    theScrollView.showsHorizontalScrollIndicator = NO;
    theScrollView.contentMode = UIViewContentModeRedraw;
    theScrollView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    theScrollView.backgroundColor = [UIColor clearColor];
    theScrollView.userInteractionEnabled = YES;
    theScrollView.autoresizesSubviews = NO;
    theScrollView.delegate = self;

    [self.view addSubview:theScrollView];

    CGRect toolbarRect = viewRect;
    toolbarRect.size.height = TOOLBAR_HEIGHT;

    mainToolbar = [[ReaderMainToolbar alloc] initWithFrame:toolbarRect document:document]; // At top

    mainToolbar.delegate = self;

    [self.view addSubview:mainToolbar];

    CGRect pagebarRect = viewRect;
    pagebarRect.size.height = PAGEBAR_HEIGHT;
    pagebarRect.origin.y = (viewRect.size.height - PAGEBAR_HEIGHT);

    mainPagebar = [[ReaderMainPagebar alloc] initWithFrame:pagebarRect document:document]; // At bottom

    mainPagebar.delegate = self;

    [self.view addSubview:mainPagebar];

    UITapGestureRecognizer *singleTapOne = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap:)];
    singleTapOne.numberOfTouchesRequired = 1; singleTapOne.numberOfTapsRequired = 1; singleTapOne.delegate = self;
    [self.view addGestureRecognizer:singleTapOne];

    UITapGestureRecognizer *doubleTapOne = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleDoubleTap:)];
    doubleTapOne.numberOfTouchesRequired = 1; doubleTapOne.numberOfTapsRequired = 2; doubleTapOne.delegate = self;
    [self.view addGestureRecognizer:doubleTapOne];

    UITapGestureRecognizer *doubleTapTwo = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleDoubleTap:)];
    doubleTapTwo.numberOfTouchesRequired = 2; doubleTapTwo.numberOfTapsRequired = 2; doubleTapTwo.delegate = self;
    [self.view addGestureRecognizer:doubleTapTwo];

    [singleTapOne requireGestureRecognizerToFail:doubleTapOne]; // Single tap requires double tap to fail

    contentViews = [NSMutableDictionary new]; lastHideTime = [NSDate date];
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    if (CGSizeEqualToSize(lastAppearSize, CGSizeZero) == false)
    {
        if (CGSizeEqualToSize(lastAppearSize, self.view.bounds.size) == false)
        {
            [self updateScrollViewContentViews]; // Update content views
        }

        lastAppearSize = CGSizeZero; // Reset view size tracking
    }
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    if (CGSizeEqualToSize(theScrollView.contentSize, CGSizeZero)) // First time
    {
        [self performSelector:@selector(showDocument:) withObject:nil afterDelay:0.02];
    }

#if (READER_DISABLE_IDLE == TRUE) // Option

    [UIApplication sharedApplication].idleTimerDisabled = YES;

#endif // end of READER_DISABLE_IDLE Option
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];

    lastAppearSize = self.view.bounds.size; // Track view size

#if (READER_DISABLE_IDLE == TRUE) // Option

    [UIApplication sharedApplication].idleTimerDisabled = NO;

#endif // end of READER_DISABLE_IDLE Option
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (void)viewDidUnload
{
#ifdef DEBUG
    NSLog(@"%s", __FUNCTION__);
#endif

    mainToolbar = nil; mainPagebar = nil;

    theScrollView = nil; contentViews = nil; lastHideTime = nil;

    lastAppearSize = CGSizeZero; currentPage = 0;

    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    if (isVisible == NO) return; // iOS present modal bodge

    if ([UIDevice currentDevice].userInterfaceIdiom == UIUserInterfaceIdiomPad)
    {
        if (printInteraction != nil) [printInteraction dismissAnimated:NO];
    }
}

- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration
{
    if (isVisible == NO) return; // iOS present modal bodge

    [self updateScrollViewContentViews]; // Update content views

    lastAppearSize = CGSizeZero; // Reset view size tracking
}

/*
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    //if (isVisible == NO) return; // iOS present modal bodge

    //if (fromInterfaceOrientation == self.interfaceOrientation) return;
}
*/

- (void)didReceiveMemoryWarning
{
#ifdef DEBUG
    NSLog(@"%s", __FUNCTION__);
#endif

    [super didReceiveMemoryWarning];
}

- (void)dealloc
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}

#pragma mark UIScrollViewDelegate methods

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    __block NSInteger page = 0;

    CGFloat contentOffsetX = scrollView.contentOffset.x;

    [contentViews enumerateKeysAndObjectsUsingBlock: // Enumerate content views
        ^(id key, id object, BOOL *stop)
        {
            ReaderContentView *contentView = object;

            if (contentView.frame.origin.x == contentOffsetX)
            {
                page = contentView.tag; *stop = YES;
            }
        }
    ];

    if (page != 0) [self showDocumentPage:page]; // Show the page
}

- (void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView
{
    [self showDocumentPage:theScrollView.tag]; // Show page

    theScrollView.tag = 0; // Clear page number tag
}

#pragma mark UIGestureRecognizerDelegate methods

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)recognizer shouldReceiveTouch:(UITouch *)touch
{
    if ([touch.view isKindOfClass:[UIScrollView class]]) return YES;

    return NO;
}

#pragma mark UIGestureRecognizer action methods

- (void)decrementPageNumber
{
    if (theScrollView.tag == 0) // Scroll view did end
    {
        NSInteger page = [document.pageNumber integerValue];
        NSInteger maxPage = [document.pageCount integerValue];
        NSInteger minPage = 1; // Minimum

        if ((maxPage > minPage) && (page != minPage))
        {
            CGPoint contentOffset = theScrollView.contentOffset;

            contentOffset.x -= theScrollView.bounds.size.width; // -= 1

            [theScrollView setContentOffset:contentOffset animated:YES];

            theScrollView.tag = (page - 1); // Decrement page number
        }
    }
}

- (void)incrementPageNumber
{
    if (theScrollView.tag == 0) // Scroll view did end
    {
        NSInteger page = [document.pageNumber integerValue];
        NSInteger maxPage = [document.pageCount integerValue];
        NSInteger minPage = 1; // Minimum

        if ((maxPage > minPage) && (page != maxPage))
        {
            CGPoint contentOffset = theScrollView.contentOffset;

            contentOffset.x += theScrollView.bounds.size.width; // += 1

            [theScrollView setContentOffset:contentOffset animated:YES];

            theScrollView.tag = (page + 1); // Increment page number
        }
    }
}

- (void)handleSingleTap:(UITapGestureRecognizer *)recognizer
{
    if (recognizer.state == UIGestureRecognizerStateRecognized)
    {
        CGRect viewRect = recognizer.view.bounds; // View bounds

        CGPoint point = [recognizer locationInView:recognizer.view];

        CGRect areaRect = CGRectInset(viewRect, TAP_AREA_SIZE, 0.0f); // Area

        if (CGRectContainsPoint(areaRect, point)) // Single tap is inside the area
        {
            NSInteger page = [document.pageNumber integerValue]; // Current page #

            NSNumber *key = [NSNumber numberWithInteger:page]; // Page number key

            ReaderContentView *targetView = [contentViews objectForKey:key];

            id target = [targetView processSingleTap:recognizer]; // Target

            if (target != nil) // Handle the returned target object
            {
                if ([target isKindOfClass:[NSURL class]]) // Open a URL
                {
                    NSURL *url = (NSURL *)target; // Cast to a NSURL object

                    if (url.scheme == nil) // Handle a missing URL scheme
                    {
                        NSString *www = url.absoluteString; // Get URL string

                        if ([www hasPrefix:@"www"] == YES) // Check for 'www' prefix
                        {
                            NSString *http = [NSString stringWithFormat:@"http://%@", www];

                            url = [NSURL URLWithString:http]; // Proper http-based URL
                        }
                    }

                    if ([[UIApplication sharedApplication] openURL:url] == NO)
                    {
                        #ifdef DEBUG
                            NSLog(@"%s '%@'", __FUNCTION__, url); // Bad or unknown URL
                        #endif
                    }
                }
                else // Not a URL, so check for other possible object type
                {
                    if ([target isKindOfClass:[NSNumber class]]) // Goto page
                    {
                        NSInteger value = [target integerValue]; // Number

                        [self showDocumentPage:value]; // Show the page
                    }
                }
            }
            else // Nothing active tapped in the target content view
            {
                if ([lastHideTime timeIntervalSinceNow] < -0.75) // Delay since hide
                {
                    if ((mainToolbar.hidden == YES) || (mainPagebar.hidden == YES))
                    {
                        [mainToolbar showToolbar]; [mainPagebar showPagebar]; // Show
                    }
                }
            }

            return;
        }

        CGRect nextPageRect = viewRect;
        nextPageRect.size.width = TAP_AREA_SIZE;
        nextPageRect.origin.x = (viewRect.size.width - TAP_AREA_SIZE);

        if (CGRectContainsPoint(nextPageRect, point)) // page++ area
        {
            [self incrementPageNumber]; return;
        }

        CGRect prevPageRect = viewRect;
        prevPageRect.size.width = TAP_AREA_SIZE;

        if (CGRectContainsPoint(prevPageRect, point)) // page-- area
        {
            [self decrementPageNumber]; return;
        }
    }
}

- (void)handleDoubleTap:(UITapGestureRecognizer *)recognizer
{
    if (recognizer.state == UIGestureRecognizerStateRecognized)
    {
        CGRect viewRect = recognizer.view.bounds; // View bounds

        CGPoint point = [recognizer locationInView:recognizer.view];

        CGRect zoomArea = CGRectInset(viewRect, TAP_AREA_SIZE, TAP_AREA_SIZE);

        if (CGRectContainsPoint(zoomArea, point)) // Double tap is in the zoom area
        {
            NSInteger page = [document.pageNumber integerValue]; // Current page #

            NSNumber *key = [NSNumber numberWithInteger:page]; // Page number key

            ReaderContentView *targetView = [contentViews objectForKey:key];

            switch (recognizer.numberOfTouchesRequired) // Touches count
            {
                case 1: // One finger double tap: zoom ++
                {
                    [targetView zoomIncrement]; break;
                }

                case 2: // Two finger double tap: zoom --
                {
                    [targetView zoomDecrement]; break;
                }
            }

            return;
        }

        CGRect nextPageRect = viewRect;
        nextPageRect.size.width = TAP_AREA_SIZE;
        nextPageRect.origin.x = (viewRect.size.width - TAP_AREA_SIZE);

        if (CGRectContainsPoint(nextPageRect, point)) // page++ area
        {
            [self incrementPageNumber]; return;
        }

        CGRect prevPageRect = viewRect;
        prevPageRect.size.width = TAP_AREA_SIZE;

        if (CGRectContainsPoint(prevPageRect, point)) // page-- area
        {
            [self decrementPageNumber]; return;
        }
    }
}

#pragma mark ReaderContentViewDelegate methods

- (void)contentView:(ReaderContentView *)contentView touchesBegan:(NSSet *)touches
{
    if ((mainToolbar.hidden == NO) || (mainPagebar.hidden == NO))
    {
        if (touches.count == 1) // Single touches only
        {
            UITouch *touch = [touches anyObject]; // Touch info

            CGPoint point = [touch locationInView:self.view]; // Touch location

            CGRect areaRect = CGRectInset(self.view.bounds, TAP_AREA_SIZE, TAP_AREA_SIZE);

            if (CGRectContainsPoint(areaRect, point) == false) return;
        }

        [mainToolbar hideToolbar]; [mainPagebar hidePagebar]; // Hide

        lastHideTime = [NSDate date];
    }
}

#pragma mark ReaderMainToolbarDelegate methods

- (void)tappedInToolbar:(ReaderMainToolbar *)toolbar doneButton:(UIButton *)button
{
#if (READER_STANDALONE == FALSE) // Option

    [document saveReaderDocument]; // Save any ReaderDocument object changes

    [[ReaderThumbQueue sharedInstance] cancelOperationsWithGUID:document.guid];

    [[ReaderThumbCache sharedInstance] removeAllObjects]; // Empty the thumb cache

    if (printInteraction != nil) [printInteraction dismissAnimated:NO]; // Dismiss

    if ([delegate respondsToSelector:@selector(dismissReaderViewController:)] == YES)
    {
        [delegate dismissReaderViewController:self]; // Dismiss the ReaderViewController
    }
    else // We have a "Delegate must respond to -dismissReaderViewController: error"
    {
        NSAssert(NO, @"Delegate must respond to -dismissReaderViewController:");
    }

#endif // end of READER_STANDALONE Option
} 
```

# html - 页面刷新后如何保持切换状态

> ID：14928085
> 
> 赞同：0
> 
> 时间：2013-02-18T01:06:18.803
> 
> 标签：html, local-storage

我有可扩展的菜单，您可以在[此链接](http://jsbin.com/ewirez/2/)中查看代码..

我的问题是如何在页面刷新后保持切换状态。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:09:35.887

如何将其保存在会话变量中？

```
Session("TopMenuState") = XYZ 
```

其中 XYZ 是您的状态信息

# 更新

嗯，我会用我有限的 Javascript 技能尽力解释。

检查本地存储/会话存储是否可用，如下所示

```
if(typeof(Storage)!=="undefined")
  {
  // localStorage and sessionStorage supported
  }
else
  {
  // localStorage and sessionStorage NOT supported
  } 
```

一旦您对本地存储可用感到满意，那么您可以继续编写实际脚本，否则，有人会认为代码可能不起作用？

此外，当用户单击滑动菜单中的链接时，想法是保留他/她单击的菜单的名称，当页面加载或呈现菜单时，您可以检查会话/本地存储查看单击了哪个菜单项（如果有）

因此，在滑动菜单中的链接中，您最终可能会得到以下内容：

```
<div class="menuContent">
  <a class="slider"><img alt="" id="bot" src="images/arrow_bottom.png"></a>
  <ul id="nav">
    <li><a href="#"><img src="images/t1.png" /> Home</a></li>
    <li>
      <ul id="1">
        <li><a href="#"><img src="images/empty.gif" />Link 1</a></li>
        <li><a href="#"><img src="images/empty.gif" />Link 2</a></li>
        <li><a href="#"><img src="images/empty.gif" />Link 2</a></li>
        <li><a href="#"><img src="images/empty.gif" />Link 3</a></li>
        <li><a href="#"><img src="images/empty.gif" />Link 4</a></li>
      </ul>
      // THIS LINE MODIFIED
      <span onclick="ProcessMenuLink('MenuItem1')" class="sub" tabindex="1"><img src="images/t2.png" />HTML/CSS</span>
    </li>
    <li>
      <ul id="2">
        <li><a href="#"><img src="images/empty.gif" />Link 6</a></li>
        <li><a href="#"><img src="images/empty.gif" />Link 7</a></li>
        <li><a href="#"><img src="images/empty.gif" />Link 8</a></li>
        <li><a href="#"><img src="images/empty.gif" />Link 9</a></li>
        <li><a href="#"><img src="images/empty.gif" />Link 10</a></li>
      </ul>
      // THIS LINE MODIFIED
      <span onclick="ProcessMenuLink('MenuItem2')" class="sub" tabindex="1"><img src="images/t3.png" />jQuery/JS</span>
    </li>
    <li><a href="#"><img src="images/t2.png" />PHP</a></li>
  </ul>
</div> 
```

请注意：我的 javascript 技能有限，因此您可能需要检查此代码！它很可能在这里和那里缺少分号。

然后在子例程或函数中，您可能会有以下内容：

```
Void ProcessMenuLink(MenuItemId){
  if(typeof(Storage)!=="undefined")
    {
    // localStorage and sessionStorage supported
    //If the menuitem selected is valid
    if (MenuItemId == 1) Then 
      {
      //Save the selected menu ID/Name
      localStorage.MySelectedMenuItem=MenuItemId;
      // OPTIONAL - Call the toggle subroutine to toggle the selected menuitems
      // Code to call sliding routine if its not executed via the CLASS parameter
      }
    }
  else
    {
    // localStorage and sessionStorage NOT supported
    }
  } 
```

现在，您已将 SELECTED MENU ITEM 保存在本地存储中，我假设页面会重新加载。

因此，当您的页面加载时，您将需要调用执行菜单动画或 SLIDING 的子例程，并根据本地存储的选定菜单项值将相关值传递给它。

```
Sub Window.OnLoad
  //load locally stored data
  if (localStorage.MySelectedMenuItem == 'MenuItem1')
    {
    // menu item with id 'MenuItem1' was selected so call the sliding routine
    // using whatever value you used to identify your first sliding menu
    }
  else
    {
    if (localStorage.MySelectedMenuItem == 'MenuItem2')
      {
      // menu item with id 'MenuItem2' was selected so call the sliding routine
      // using whatever value you used to identify your first sliding menu
      }
    else
      {
      // nothing was selected or an invalid selection was specified
      // show the menu items in their DEFAULT state
      }
    }
End Sub 
```

我不完全确定如何在 Javascript 中调用/执行该函数

好吧，我只能为我来自 VB 背景的弱 Java 技能道歉，

但我希望你明白我的意思，它可以帮助你解决你的问题。

# javascript - 等待外部应用程序启动 Javascript

> ID：14928087
> 
> 赞同：0
> 
> 时间：2013-02-18T01:06:25.573
> 
> 标签：javascript, html, web, rtsp

首先：这只需要在 Mac 上工作。

我有一个`<meta http-equiv=Refresh Content=1;url=rtsp://example.com/file.sdp`应该自动询问/打开 QuickTime 播放器。我试图让它在 QuickTime 播放器启动后立即执行一个 javascript 函数。

难道就不能等5秒之类的吗？

否：在 Safari 中这很好；在 chrome 和 firefox 中，我希望它等到启动应用程序或 ok 按钮被按下，然后再执行 javascript 函数

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:14:40.637

您可以将要触发的内容包装在 javascript timeout 中

```
setTimeout ( expression, timeout ); 
```

例子：

```
function hello() {  
   alert('hello'); // or play anything.
}
setTimeout(hello, 5000);   // unit in miliseconds (5000 means 5 seconds) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:56:24.083

谢谢大家的回答。我要展示我最终在这里做了什么。

```
<meta http-equiv=Refresh Content=1;url=rtsp://####.com/####.sdp />

<script type='text/javascript'>
function checkfinish() {
var answer = confirm('Finished with this page?')
if (answer)
  window.location = "previous-page"
}
setTimeout ( checkfinish, 5000 )
</script> 
```

我发现我做错了什么：

```
Trying to do this! 
```

我决定不让它自动重定向；让它在底部留下一个返回上一页的按钮。

无论如何，感谢您的所有帮助。

# xcode - 忽略 install_name_tool 将框架设为私有

> ID：14928091
> 
> 赞同：2
> 
> 时间：2013-02-18T01:06:54.420
> 
> 标签：xcode, dylib, install-name-tool, libgphoto2

我使用[GPhoto2 框架](https://github.com/lnxbil/GPhoto2.framework)编写了一个简单的应用程序，只要框架位于最初编译的位置，它就可以工作。不过，我想把它移到应用程序包中，所以它不需要单独安装，所以我需要让它相对于这个主可执行文件工作。

不幸的是，该框架不是 Xcode 项目。它使用脚本构建，所以我不能简单地更改安装目录构建设置，这是我在寻找答案时经常看到的解决方案。作为 Xcode 和 Mac 编程的新手，我也无法知道如何将框架转换为 Xcode 项目。

我遇到的另一个建议是使用 install_name_tool 更新库 ID 和依赖项，将绝对路径替换为“@executable_path/../Frameworks/GPhoto2.framework”形式的路径。该框架不是一个单一的二进制文件，而是包含许多 .dylib 和 .so 库，但所有这些库的更新只成功了一半。

我已将 Xcode 设置为在构建框架时将框架复制到应用程序包中。然后，如果我从最初编译的位置删除框架，则应用程序无法加载，OS X 生成的报告说 libgphoto2 库无法再找到，正如预期的那样。

如果我随后使用 install_name_tool 更新应用程序包内的所有框架库以及应用程序二进制文件本身中的引用，则应用程序将加载但找不到任何连接的相机。使用 otool 我能够验证所有引用都已正确更改。

但是，如果我将框架的副本替换到其原始位置，它就会再次正常工作，识别连接的摄像机，无论该框架使用相对位置还是绝对位置。显然，尽管加载，它仍在查看此位置。我什至尝试依次从框架中的原始位置删除每个单独的库文件，以查看问题是否只是其中依赖的结果，但无论缺少哪个，应用程序都将无法工作。

顺便说一句，如果我使用框架的更新版本构建应用程序，它会失败说找不到库“@executable_path/../Frameworks/GPhoto2.framework/prefix/lib/libgphoto2.2.dylib”

我是在做错什么或错过了一步，还是我试图对在 Xcode 之外创建的框架做不可能的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T17:46:03.183

万一有人遇到这个未来，我的问题的答案是我没有做错任何事。问题是 libtool ltdl 正在加载 .so 文件，因为它需要绝对路径，所以这些是在构建时设置的。

我修补了文件 gphoto2-abilities-list.c 和 gphoto2-port-info-list.c 以便在运行时它将相对库路径与可执行位置结合起来。因此，我还需要增加 FILENAME_MAX 常量，以允许邮件应用程序从例如桌面运行。但这与 install_name_tool 的使用一起使我可以将 GPhoto2 作为框架添加到我的应用程序中，而无需任何外部依赖项。

使用 install_name_tool 后无法使用框架在 XCode 中构建我的应用程序的最后一个问题仍然存在，但为此我只使用了原始框架构建，然后在编译后我在更新的同时更新了复制框架中的引用主要可执行文件中的那些。

# linux - 在linux的嵌套for循环中调用可执行文件

> ID：14928095
> 
> 赞同：0
> 
> 时间：2013-02-18T01:07:38.093
> 
> 标签：linux, bash

我试图在嵌套的 for 循环中调用带有两个参数的可执行文件（我也在用 bash 脚本编写）。我以为我做对了，但我所有的值在文本文件中显示为 0。即倾斜 0 角度 0，即使这些值显然不是。我的代码是这样的：

```
for (( i=0; i <=3; i++)); do
    for (( j=0; j <= 3; j++ )); do
        ./solar_sim 'i' 'j' >> solarResults.txt
        echo -n "$i"
    done
    echo " "
done 
```

`

solar_sim 提供给我们并输出这样的一行，我将其写入文件：

`10000 hours, angle: 0.00 degrees, temperature: 0.00 degrees C, total power: 119871.00 Watts` 我在调用 solar_sim 时做错了吗？我也尝试使用 $i 和 $j

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:09:54.280

你的错误是这一行：

```
./solar_sim 'i' 'j' >> solarResults.txt 
```

应该这样重写：

```
./solar_sim "$i" "$j" >> solarResults.txt 
```

此外，`echo`单独使用就足够了，无需`echo " "`打印换行符

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T01:11:25.407

看起来您忘记了取消引用 i 和 j 变量的“$”

```
./solar_sim "$i" "$j" >> solarResults.txt 
```

# python - Python - matplotlib - 加权图

> ID：14928097
> 
> 赞同：3
> 
> 时间：2013-02-18T01:07:50.253
> 
> 标签：python, matplotlib, libreoffice

是否可以`weighted graphs`使用 matplotlib 在 python 中绘图？我没有在 matplotlib 网站上找到它。

如果我不能用 来做`matplotlib`，我可以用别的东西来做吗？我们可以做`libreoffice`吗？

本质上这就是我的数据的样子。

```
a,b,5
b,c,10
a,c,7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:15:18.917

得到答案：[链接](https://mathoverflow.net/questions/55200/good-programs-for-drawing-graphs-directed-weighted-graphs)指向我们给出的答案`William Stein`。所有功劳归于他。

这是答案：

试试[Sage](http://www.sagemath.org/) - 它是开源的，可以绘制加权有向图。例如：

```
A = random_matrix(ZZ,6, density=0.5)
G = DiGraph(A, format='weighted_adjacency_matrix')  # graph from matrix
H = G.plot(edge_labels=True, graph_border=True)
H.show()             # display on screen
H.save('graph.pdf')  # save plot to vector pdf for inclusion in a paper 
```

这是同一页面中另一个由 :`Nick Loughlin`

试试[Graphviz——](http://www.graphviz.org/)它是开源的，就使用而言非常灵活。

它擅长自动布局等，例如 Maple 会把事情弄得一团糟。

# function - VHDL位旋转函数语法错误？

> ID：14928101
> 
> 赞同：0
> 
> 时间：2013-02-18T01:08:12.657
> 
> 标签：function, vhdl, hdl

我这样做是为了我的学校工作，我正在制作自己的滚动/移位功能。下面是我写的代码，但是当我尝试编译它时，我在 rownum<=rol(rowcount,1); 上得到语法错误

```
library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

architecture main of proj is

function "rol" (a: std_logic_vector; n : natural)
                return std_logic_vector is
begin
return std_logic_vector(unsigned(a) rol n);
end function;

signal rownum : std_logic_vector(2 downto 0);
signal rowcount : std_logic_vector(2 downto 0);

begin

process begin
wait until rising_edge(i_clock);
**rownum<=rol(rowcount,1);**

end process;

end architecture main; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:32:00.933

There are a couple of things that need to be addressed here.

Firstly, you need an entity statement:

```
entity  proj is
    port(
    i_clock : in std_logic
    );
end  proj; 
```

This declares what signals are inputs and outputs for your entity. In this case, it's just a clock. You can add rownum and rowcount inputs and outputs too as needed.

Your function name shouldn't be in inverted commas, and overloading an existing operator isn't a good idea either.

```
function rol_custom (a: std_logic_vector; n : natural)
            return std_logic_vector is
begin
return std_logic_vector(unsigned(a) rol n);
end function; 
```

Here's the synthesizable code:

```
library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

entity  proj is
    port(
    i_clock : in std_logic
    );
end  proj;

architecture main of proj is

function rol_custom (a: std_logic_vector; n : natural)
                return std_logic_vector is
begin
return std_logic_vector(unsigned(a) rol n);
end function;

signal rownum : std_logic_vector(2 downto 0);
signal rowcount : std_logic_vector(2 downto 0);

begin

process begin
wait until rising_edge(i_clock);
rownum<=rol_custom(rowcount,1);

end process;

end architecture main; 
```

However, even though this now should synthesize, the results won't make any sense, because rowcount has not been given a value. In order to define it, you might want to add a process which drives the signal based on certain criteria (a counter?) or add it as an input in the entity definition.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:45:56.153

如果你的向量代表数字，你应该为它们使用数字类型。根据需要使用`ieee.numeric_std`库和 a`unsigned`或`signed`类型。 `rol`然后就可以工作了。您不必创建自己的。

# google-chrome-extension - 检测 Chrome 浏览器退出？

> ID：14928105
> 
> 赞同：2
> 
> 时间：2013-02-18T01:08:44.670
> 
> 标签：google-chrome-extension

我尝试了一切，但似乎没有什么对我有用。我试图通过像下面的代码那样检测窗口关闭来检测浏览的关闭，但这对我不起作用。我做错了什么，是否有另一种检测 Chrome 关闭的解决方案？

```
chrome.windows.onRemoved.addListener(function(windowId){
  alert("Browser exit!");
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T02:56:21.413

您的一般问题是退出浏览器意味着浏览器无法再运行您的脚本来检查它是否已经退出 - 这就像试图问一个人是否已经死了：答案（如果你得到一个）只是永远将是“不”。

您可能会尝试的一种解决方案是具有以下[`background`权限](http://developer.chrome.com/extensions/declare_permissions.html#bg)的长时间运行的后台页面：

> 让 Chrome 早起晚关，让应用程序和扩展程序的寿命更长。
> 
> 当任何已安装的托管应用程序、打包应用程序或扩展程序具有“后台”权限时，Chrome 会在用户登录其计算机后立即运行（不可见）——在用户启动 Chrome 之前。“后台”权限还使 Chrome 继续运行（即使在其最后一个窗口关闭后），直到用户明确退出 Chrome。

即使在所有浏览器窗口都关闭后，此权限也允许 Chrome 继续运行您的扩展程序。通常情况下，Chrome 只能在打开窗口的情况下进行操作，所以我们遇到了 Chrome 无法检测到所有窗口何时关闭的问题（如上所述）。有了后台权限，即使所有窗口都已关闭，Chrome 也可以保留运行扩展程序代码的能力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:41:25.597

我只是想在我的扩展程序退出而不是整个浏览器时获得控制权；我的扩展只使用一个文本框，所以我将它的 onblur 属性设置为一个函数并将我的退出代码放在那里；可能不是你要找的，但它对我有用！

chrome 开发者网站建议不要使用后台页面，因为“它们会消耗内存和其他资源”；

我同意一种更一致的方式来控制扩展退出将是有用的；它是一个看起来与 dom 集成在一起的 html 页面；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-15T13:01:10.683

chrome 不提供任何 API 来检测 chrome 浏览器即将关闭。但是，当使用 chrome 扩展时，我们可以在后台页面中检测到 chrome 浏览器打开事件。

背景.js

```
 chrome.runtime.onStartup.addListener(function () {
        console.log("extension started: " + Date.now());
    }); 
```

chrome 浏览器启动时将触发此事件。接下来，您可以使用任何技巧来识别 chrome 浏览器是否退出。

# android - Android 模拟器：更改软键盘语言

> ID：14928108
> 
> 赞同：1
> 
> 时间：2013-02-18T01:09:16.103
> 
> 标签：android, eclipse, android-emulator

我想更改我的 Android 模拟器软键盘语言。到目前为止，我有一个日本的布局，我尝试了很多东西都没有成功。我想要一个英语（或任何西方拉丁语）布局。有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T05:22:16.347

长按如下所示的键

![捕获 1](../Images/28ad4e3a4e701f2c6eb9d45099fff4f4.png)

它将显示以下菜单

![在此处输入图像描述](../Images/c0c2e2d19945f1eb37fc72413e23d382.png)

选择适当的键盘类型和语言，它将显示该键盘

![在此处输入图像描述](../Images/f90ea2cfe13e709b01315acfce897b49.png)

# python - Django 1.3 静态文件

> ID：14928112
> 
> 赞同：0
> 
> 时间：2013-02-18T01:09:49.097
> 
> 标签：python, django

就像关于 Django 1.3 的第 10 亿个静态文件问题一样。我一直在寻找和尝试很多东西，但似乎没有什么对我有用。任何帮助，将不胜感激。将尝试提供尽可能多的信息。

网址文件

```
urlpatterns = patterns('',
url(r'^projectm/statictest/$','project_management.views.statictest'),) 
```

看法

```
def statictest(request):
return render_to_response('statictest.html',locals()) 
```

模板

```
<html><head><title>Static Load Test Page</title></head>
<body>
{% load static %}
<img src="{{ STATIC_URL }}testimage.jpg" />
</body></html> 
```

设置

```
STATIC_ROOT = '/home/baz/framework/mysite/static/'
STATIC_URL = '/static/'
STATICFILES_DIRS = ('',)
STATICFILES_FINDERS = (
'django.contrib.staticfiles.finders.FileSystemFinder',
'django.contrib.staticfiles.finders.AppDirectoriesFinder',
)
TEMPLATE_DIRS = (
"/home/baz/framework/mysite/templates" 
```

文件

```
-bash-3.2$ pwd
/home/baz/framework/mysite/templates
statictest.html

-bash-3.2$ pwd
/home/baz/framework/mysite/project_management/static
-bash-3.2$ ls
testimage.jpg 
```

不太确定是否还有其他有用的信息。但基本上当我去这个测试页面并检查页面源时，url指向

```
<img src="/static/testimage.jpg" /> 
```

但是图像不加载。我也在多个浏览器上试过这个。也许我在某处遗漏了一个 imort 声明？

为帮助欢呼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:59:29.523

Are you using the built in `runserver` command or do you serve the Django app some other way?

If you use `runserver` then your problem is that you don't tell Django where to find your static assets in the filesystem. You need to set STATIC_ROOT to a filesystem path where your static assets can be found. Try setting it to: `/home/baz/framework/mysite/project_management/static/`

If you are using a different server (like gunicorn behind Nginx for example) then it is the responsibility of the front-end server to intercept requests for `/static/` and serve them for you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:05:04.987

还记得在设置“STATIC_ROOT”后运行“collectstatic”管理命令。

[https://docs.djangoproject.com/en/1.4/howto/static-files/#deploying-static-files-in-a-nutshell](https://docs.djangoproject.com/en/1.4/howto/static-files/#deploying-static-files-in-a-nutshell)

# jquery - html5画布放置文本太低？

> ID：14928116
> 
> 赞同：1
> 
> 时间：2013-02-18T01:10:54.150
> 
> 标签：jquery, html, text, canvas

我正在玩元素，当我在画布上放置文本时发现它太低了。

```
 var canvas = document.getElementById('myCanvas');
  var context = canvas.getContext('2d');

  var imageObj = new Image();

  imageObj.onload = function() {
    context.drawImage(imageObj, 0, 0);
    context.textBaseline = 'top';
    context.font = 'normal 50px Arial';
    context.fillText("1AFG", 0, 0);
  };
  imageObj.src = 'http://planttagmaker.herobo.com/images/tag_templates/hibiscus_template.png'; 
```

文本被放置在画布顶部下方 10-20 像素处。有人可以解释为什么吗？我确信我可能误解了基线。本质上，我希望文本位于画布的顶部。X 和 Y 坐标是动态的，因此仅从 y 坐标中减去 10 或 20 像素并不是一个可行的解决方案。

再次感谢您的时间，托德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T02:04:24.283

我成功地将像素中的字体大小转换为点，这给出了文本的像素高度（[http://www.html5canvastutorials.com/tutorials/html5-canvas-text-metrics/](http://www.html5canvastutorials.com/tutorials/html5-canvas-text-metrics/)）。然后我将该值用于 y 位置，将 textBaseline 保持为其默认值，按字母顺序排列。

这是代码：

```
var canvas = document.getElementById('canvas');
var context = canvas.getContext('2d');

var imageObj = new Image();

imageObj.onload = function () {
    var fontSize = 50;
    context.drawImage(imageObj, 0, 0);
    context.font = 'normal ' + fontSize + 'px Arial';
    context.fillText("1AFG", 0, pixelsToPoints(fontSize));
};
imageObj.src = 'http://planttagmaker.herobo.com/images/tag_templates/hibiscus_template.png';

function pixelsToPoints(pixels) {
    return pixels * 72 / 96;
} 
```

[您可以在http://jsfiddle.net/5Mxez/](http://jsfiddle.net/5Mxez/)看到一个示例，它应该在您缩放字体大小时起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T01:37:13.213

它把它放在正确的地方。文本不会占据由字体大小定义的整个高度（即它不会是 50 像素高）。显示的高度由 定义`line-height`。因此，要使文本位于顶部，您需要定义`line-height`小于您的字体大小。

通常这样做是这样的：

```
normal 50px/45px Arial 
```

第二个数字在哪里`line-height`。我在 的规格中看到了这一点`<canvas>`，但我无法让它工作。

而是`line-height`你所追求的。这是一个演示，显示它与`<div>`. 我仍在尝试让它与`<canvas>`.

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/eLxEt/)]]]

### HTML：

```
<div id="myDiv">1AFG</div>
<canvas id="myCanvas"></canvas> 
```

### CSS：

```
#myDiv {
    background-image: url( 'http://placekitten.com/100' );
    width: 100px;
    height: 100px;
    font: 50px/40px Arial;
} 
```

### 脚本：

```
var canvas = document.getElementById('myCanvas');
var context = canvas.getContext('2d');

var imageObj = new Image();

imageObj.onload = function() {
    context.drawImage(imageObj, 0, 0);
    context.textBaseline = 'top';
    context.font = '50px/40px Arial';
    context.fillText("1AFG", 0, 0);
};
imageObj.src = 'http://placekitten.com/100'; 
```

# php - bind_param、无效对象或资源反复出现问题

> ID：14928117
> 
> 赞同：2
> 
> 时间：2013-02-18T01:10:54.097
> 
> 标签：php, mysql, sqlbindparameter

我遇到了这个问题`bind_param`，我不知道出了什么问题：

```
<?php
$mysqli = new mysqli("$host","$user","$pass","$db");
if(isset($_GET['catName'])) {
    $category = "%" . $_GET['catName'] . "%";
}

//setup query
$catSearch = $mysqli->stmt_init();

//search values
$catQuery = "SELECT lister_id,
             logo_file_name,
             listing_name,
             street_address,
             city,
             state,
             zip

      FROM listers

      INNER JOIN listings

      ON listers.lister_id = listings.lister_id

      WHERE listings.listing_category LIKE ?";

$catSearch->prepare($catQuery);
$catSearch->bind_param('s', $category);
$catSearch->bind_result($id, $imgfile, $name, $address, $city, $state, $zip);
$catSearch->execute();
$catSearch->store_result();
$mainRows = $catSearch->num_rows();
?> 
```

我得到的警告是：

```
Warning: mysqli_stmt::bind_param(): invalid object or resource mysqli_stmt in C:\wamp\www\RP\catSearch.php on line 29 
```

让我感到沮丧的是，这种精确的语法将 7 或 8 个其他文档放在一起，就像它一样，但由于某种原因，这个语法一直在中断。我检查了每张桌子，它们都很好（这是上次发生这种情况的问题）。我确保我`stmt_init()`在其他一切之前宣布我的好（之前也有问题）。我在整张`$_GET['catName']`纸上都印有回声，所以它通过了（曾经也有问题）。

另外，一个更元的问题，但有人告诉我使用 bind_param 是防止 SQL 注入的最佳方法；这真的是我需要的所有安全吗？（我的意思是，在合理的范围内，我确信安全性更高，但这是一个小型黄页类型的网站）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-18T01:32:16.493

好的，感谢@michaelberkoski 和这里另一个页面的一些帮助，我发现了这个问题。因为两个表都包含 lister_id，所以它抛出了一个错误，我将查询更改为：

```
$catQuery = "SELECT listers.lister_id,
             listers.logo_file_name,
             listers.listing_name,
             listers.street_address,
             listers.city,
             listers.state,
             listers.zip

      FROM listers

      INNER JOIN listings

      ON listers.lister_id = listings.lister_id

      WHERE listings.listing_category LIKE ?"; 
```

我在哪里添加表格。(listers.) 到我正在检索的每一列。像魅力一样工作。

# api - Speakerdeck.com 的 API

> ID：14928119
> 
> 赞同：8
> 
> 时间：2013-02-18T01:11:03.057
> 
> 标签：api, rest, github

我一直在寻找 Speakerdeck.com 是否有 API。不幸的是，Google 和 Bing 认为我正在该站点中搜索与 API 相关的幻灯片。我在 Speakerdeck.com 或 Github.com 上找不到信息，有 API 吗？如果是这样，我在哪里可以找到文档？

非常感谢任何帮助。

# c - 在没有指针的情况下在 C 中编写归并排序

> ID：14928124
> 
> 赞同：2
> 
> 时间：2013-02-18T01:11:41.717
> 
> 标签：c, function, recursion, mergesort

我正在尝试用 C 编写作业代码，该代码将从用户输入中获取 10 个整数到一个数组中，并使用递归合并排序对其进行排序。我们还没有讨论过指针，所以我想避免在我的代码中使用它（许多在线示例使用指针）。

这是我的代码：

```
/* This code will take input for 10 integers given by the user
into an array, sort them with a recursive merge function
and print the updated array in ascending order. */

#include <stdio.h>
#define ARRSIZE 10

void merge_sort (int arr[], int temp[], int left, int right);
void merge (int arr[], int temp[], int left, int mid, int right);

int main (void){
    int arr[ARRSIZE], temp[ARRSIZE], left, right, i;

    printf("Enter 10 integers for an array:");
    for(i=0;i<ARRSIZE;i++){
        printf("\narray value %d:", i+1);
        scanf("%d", &arr[i]);
    }
    left = 0;
    right = ARRSIZE-1;

    merge_sort(arr, temp, left, right);

    printf("\nHere is your updated array:");
    printf("\n{");
    for(i=0;i<ARRSIZE;i++){
        printf("%d,", arr[i]);
    }
    printf("}");

    return 0;
}

void merge_sort (int arr[], int temp[], int left, int right){
    if(left<right){
        int mid = (right-left)/2;
        merge_sort(arr, temp, left, mid);
        merge_sort(arr, temp, mid+1, right);
        merge(arr, temp, left, mid, right);
    }
}

void merge (int arr[], int temp[], int left, int mid, int right){
    int i, j, tempi = 0;
    for(i=left, j=mid+1; i<=mid && j<=right ;){
        // mid+1 is the start of the right array
        if(arr[i]<arr[j] && i<=mid){
            temp[tempi] = arr[i];
            tempi++;
            i++;
        }
        else if(arr[i]>arr[j] && j<=right){
                temp[tempi] = arr[j];
                tempi++;
                j++;
             }
    }
    for(i=0,j=right; i<=j; i++){
        arr[i] = temp[i];
    }
} 
```

当我在我的 linux shell 中运行它时，我不断收到分段错误。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:29:17.323

好吧，我已经发现了一个微妙的错误：`int mid = (right-left)/2;`应该是`int mid = (left+right)/2;`

另外，我发现了什么流程：

1.  为了简单起见，您应该使用`tempi = left`。只需将数组的传入部分复制到临时数组的相应部分。

2.  在合并周期中，您可以在定义中放置递增 tempi `for`：

    for( ...; ...; ++tempi)

3.  在该循环中，您在从该位置读取值*后检查边界。*这真是太糟了。非常。虽然，您在这里没有遇到任何问题，只是因为您正在检查`for`定义内的边界:) 只需删除它们：

    ```
    for (i = left, j = 1 + mid; i <= mid && j <= right; ++tempi)
    {  
        if (arr[i] < arr[j])        temp[tempi] = arr[i++];
        else /* arr[j] <= arr[i] */ temp[tempi] = arr[j++];
    } 
    ```

4.  因为当任一子数组到达结束时此循环退出，您必须将其余项目从另一个子数组复制到 temp[]：

    ```
    if (i > mid) i = j; /* if we need to copy right subarray */
    for (; tempi <= right; ++tempi, ++i) temp[tempi] = arr[i]; 
    ```

5.  所以，你从临时数组复制回来看起来像

    ```
     for (i = left; i <= right; ++i) arr[i] = temp[i]; 
    ```

# java - “预览”无法解析为类型，导入已定义

> ID：14928128
> 
> 赞同：-3
> 
> 时间：2013-02-18T01:12:20.053
> 
> 标签：java, android, eclipse, android-camera, preview

为什么 Eclipse 告诉我 Preview 无法解析为类型？

预览在哪里定义？

是的，我试过 ctrl+shift+o

```
import android.app.Activity;
import android.content.pm.ActivityInfo;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.view.Window;

public class MainActivity extends Activity {
    Preview preview;
    MediaRecorder recorder; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:33:42.063

`Preview`不是进口的。这就是为什么它给你错误。

至于为什么不导入它取决于。

可能是错字和错误的。如果它是您自己编写的自定义类，请尝试清理并构建。

或者您可能没有添加包含该类的库，如果 eclipse 没有通过导入该类来提供快速修复，则更有可能发生这种情况。

# python - 为什么python在某些情况下不能判断1.0等于1，而在其他情况下可以？

> ID：14928135
> 
> 赞同：0
> 
> 时间：2013-02-18T01:13:12.087
> 
> 标签：python

有一个python代码如下：

```
import sys
import fileinput, string
K = 3
f = raw_input("please input the initial "+str(K)+" lamba: ").split()

Z = []
sumoflamba = 0.0
for m in f:
    j = m.find("/")
    if j!=-1:
            e=float(m[:j])/float(m[j+1:])
    else:
            e = float(m)
    sumoflamba+=e
    if e==0:
            print "the initial lamba cannot be zero!"
            sys.exit()
    Z.append(e)
print sumoflamba
if sumoflamba!=1:
    print "initial lamba must be summed to 1!"
    sys.exit() 
```

当我使用 0.7、0.2、0.1 运行它时。它将打印警告并退出！但是，当我使用 0.1、0.2、0.7 运行它时。它工作正常。0.3、0.3、0.4 也可以。我不知道......有人可以解释一下吗？对于所有这些情况，“print sumoflamda”将为 1.0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T01:27:03.957

几乎 Lattyware 提供的链接解释了 - 但简而言之，如果没有明确的精度，你不能指望相等比较在浮点中工作。如果您将值四舍五入或将其转换为整数，您将获得可预测的结果

```
>>> f1 = 0.7 + 0.2 + 0.1
>>> f2 = 0.1 + 0.2 + 0.7
>>> f1 == f2
False
>>> round(f1,2) == round(f2,2)
True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:17:54.260

浮点数不精确。你对它们的操作越多，它们积累的不精确性就越多。有些数字可以精确表示，但大多数不能。比较它们是否相等几乎总是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T01:18:38.040

检查浮点数是否相等是一种不好的做法。您可以在这里做的最好的事情是检查您的号码是否在所需的范围内。有关浮点如何工作的详细信息，请参阅[http://en.wikipedia.org/wiki/Floating_point#Internal_representation](http://en.wikipedia.org/wiki/Floating_point#Internal_representation)

# c - 在 C 语言编写的 CLI 程序中嵌入由 Flex 和 Bison 生成的 yyparse()

> ID：14928137
> 
> 赞同：0
> 
> 时间：2013-02-18T01:13:26.250
> 
> 标签：c, command-line-interface, bison

我正在研究野牛手册中给出的 mfcalc 示例的改进版本，您可以在[此处](https://github.com/jcatumba/mfcalc)找到代码。

我一直在尝试使用 main.c 文件中的 yyparse() ，实际上代码可以正常工作

```
int main (int argc, char const *argv[]) {
    init_table ();
    return yyparse ();
} 
```

但我想添加一个提示，所以我写了

```
int main (int argc, char const *argv[]) {
    char command[101];
    FILE *fp;
    init_table ();

    while (1) {
        printf ("[mfcalc]: "); /*prompt*/
        memset (command, 0x00, sizeof(command));
        fgets (command, 100, stdin);
        fp = fopen("command.txt", "w+");
        fprintf(fp, "%s", command);
        yyin = fp;
        yyparse ();
        fscanf (yyout, "%s", output);
        printf ("%s\n", output);
        fclose (fp);
    }
} 
```

也就是说，将 yyin from 重新定义`stdin`为常规文件，发出提示信息，在 yyin 上执行解析器，读取 yyout 的输出并打印到屏幕。但这不能正常工作，我只得到一个空行。当我证明我得到的程序时：

```
[mfcalc]: 3 + 4

[mfcalc]: 
```

此外，未显示错误代码。有什么想法可以解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:34:14.560

我还没有编译它，但是在阅读了您的代码后，我认为问题可能出在文件上。写入后文件指针位于文件末尾，因此 yyparse 没有输入。您可以使用 fseek 和 fsetpos 来修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:01:57.327

Why don't you just rewrite mfcalc's scanner to take characters from the string instead of a file?

# javascript - 强制 Visual Studio 插入相对文件引用路径

> ID：14928138
> 
> 赞同：4
> 
> 时间：2013-02-18T01:14:16.980
> 
> 标签：javascript, visual-studio, visual-studio-2012, intellisense, typescript

我目前正在编写一个 TypeScript 应用程序，我正在尝试通过将解决方案资源管理器中的文件拖放到我正在处理的 typescript 文件中来添加对解决方案中其他文件的引用。

直到上周，Visual Studio 还在我的文件顶部插入以下代码：

```
/// <reference path="lib/lib.d.ts" /> 
```

但是现在它正在插入类似于以下内容的路径：

```
/// <reference path="file:///C:/TFS/Branch/scripts/lib/lib.d.ts" /> 
```

我的工作需要相对路径，因为该项目必须在多台机器上工作，有没有办法强制 Visual Studio 创建相对路径而不是绝对路径？

提前致谢！

格里福克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T03:35:29.370

我更改为 Typescript 项目并开始工作。我认为问题在于我设置 Web 项目的方式。

# java - Android HashMap of or

> ID：14928141
> 
> 赞同：0
> 
> 时间：2013-02-18T01:14:52.777
> 
> 标签：java, android, hashmap

I apologize if the seems trivial but I always get confused on proper programming techniques. Sometimes there are too many ways to do one thing.

I have a `HashMap <String, String>` to store most of my data. I have a double that I would like to store in the same map. My question is:

If possible is it better to convert the non string to a string and store it in the current data structure; or would it be better to store a `HashMap<String, Object>` and cast the data accordingly when it gets used?

In this example would it be better to convert the `Double` to a `String` to store in the `HashMap<String, String>`?

Or, store all the data in a `HashMap<String, Object>` map and access it by casting data like this?

```
 Double dub = (Double) map.get(doublekey); 
```

I am using this in Android development and was wondering which is the preferred method of doing things.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T01:26:40.103

I would say there isn't a hard and fast rule here. Ideally you wouldn't have to make this choice. The real question is why do you have a random double that must be stored in your hash map? If this is a one-time thing then it's probably not a problem to just convert it to a string. If however, you anticipate many doubles as well as string which must be stored, perhaps a different approach would be best. Using the type Object will make things more difficult for you down the line because you can no longer assume there are only Strings in the hash map. If you do change it to Object make sure you carefully check for anywhere in your code which may assume that Object is a string.

# python - Python - 移动对象\标签\按钮并更改其属性

> ID：14928146
> 
> 赞同：0
> 
> 时间：2013-02-18T01:16:27.807
> 
> 标签：python, tkinter

所以我正在学习 python，而教我的书给了我两种使用 tkinker 创建标签的方法：

```
self.canvas.create_text(30,10,text="Welcome",tags="text") 
```

&

```
self.lbl = Label(frame1, text = "Welcome") 
```

在前面的例子中，移动它很容易：

```
self.canvas.move("text", 1, 0) 
```

在后一个示例中，更改其背景颜色很容易：

```
self.lbl["bg"] = "red" 
```

但是，我*不*知道如何在任一示例中移动它并更改它的背景颜色，至少不知道如何逐步移动它。我可以做这个：

```
 self.lbl.place(x=2) 
```

但除非我能提前得到 x 坐标，否则我只能移动一次。我可以提前设置它，但如果可能的话，我想避免这个选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T22:29:27.420

有两种方法可以做到。

首先，`Canvas`文本没有背景，但您可以使用矩形创建自己的背景。

```
text = self.canvas.create_text(30, 10, text="Welcome", tags="text")
# The canvas.bbox method returns the corner coordinates of the provided item id.
rect = self.canvas.create_rectangle(self.canvas.bbox(text), fill='red')
# Then you need to reposition the rectangle so that it is behind the text.
self.canvas.lower(rect, text) 
```

从那里您只需按照您在问题中提到的相同方式移动它们。将组标签添加到文本和矩形将使您不必分别移动这两个项目。

`.winfo_x()`其次，您可以使用和`.winfo_y()`方法获取小部件的当前 x、y 坐标。因此，移动`Label`变成了一个简单的加法/减法问题：

```
self.lbl.place(x=self.lbl.winfo_x()+2) 
```

我不知道有一种方法可以像移动方法对画布所做的那样以增量方式移动小部件。

至于哪个最好，我想不出他们之间的太多。我想使用 a`Canvas`意味着你不能重叠可能在窗口中的任何其他小部件，因为文本只会滚动到视图之外，如果你开始使用的`ttk`版本，`Label`那么样式就不那么简单了，虽然这并不难。

# php - 仅显示和大写文件名，不带路径

> ID：14928155
> 
> 赞同：0
> 
> 时间：2013-02-18T01:17:28.423
> 
> 标签：php

我试图只显示大写的文件名。我已经做到了这一点，它在域的根目录中完美运行：

```
$path = $_SERVER["SCRIPT_NAME"]; 
$path = str_replace('_', ' ', ($path));
$path = str_replace('/', '', ($path)); 
$path = ucwords($path);

echo basename ($path,".php"); 
```

但是，如果我在一个或两个目录下，它也会返回路径。

例子： `/public_html/mydomain-com/one_two_three_four_five.php`

结果：一二三四五//完美我想要的

例子： `/public_html/mydomain-com/test/one_two_three_four_five.php`

结果：睾丸二三四五//不完美

例子： `/public_html/mydomain-com/test/pathtest/one_two_three_four_five.php`

结果：Testpathtestone 二三四五 // 不完美

我无法弄清楚如何摆脱路径并到处寻找答案，但找不到任何接近的东西。

此外，是否有适用于任何一种/或两种情况的东西？（我希望）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:20:06.867

尝试使用 explode() 函数将路径拆分为每个文件夹名和文件名，然后将数组的最后一个元素大写并打印出数组。

例如：

```
$fields = explode('/', $path);

$fields[count($fields)-1] = ucwords($fields[count($fields)-1]);
$new_path = "";
foreach($fields as $field) {
    $new_path .= $field . ' ';
}

$new_path = str_replace('_', ' ', $new_path); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:23:07.863

你可以使用这样的东西

```
$pos = strrpos($path, '/');
$path = substr($path, $pos);
$path = str_replace('_', ' ', $path);
$path = ucwords($path); 
```

这将做的是找到最后一次出现的`/`，然后返回子字符串。脚本的其余部分保持不变。

# python - 如何将关键字添加到分词器？

> ID：14928162
> 
> 赞同：1
> 
> 时间：2013-02-18T01:18:49.913
> 
> 标签：python, compiler-construction, token, tokenize

我正在使用 generate_token 函数来标记特定代码。问题是我无法添加“打印”和“输入”作为关键字。它将它们作为 NAME 而不是关键字返回。如何添加这些令牌？

```
import token
import tokenize

try:
    from cStringIO import StringIO
except:
    from io import StringIO
file = open(filename)
characters = file.read()
file.close()
code_reader = StringIO(characters).readline

for num, (ttyp, ttok, _, _, _) in enumerate(tokenize.generate_tokens(code_reader)):
    print("%5d %15s %r" % (num, token.tok_name[ttyp], ttok)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T01:28:52.457

该`tokenize`模块没有说明任何关于关键字的内容。所有关键字都作为 NAME 返回，然后您必须决定哪些是关键字，通常使用`keyword`模块。不过，如果您愿意，也可以使用其他方式。

# objective-c - 使用 NSCollectionView 进行文本编辑

> ID：14928164
> 
> 赞同：1
> 
> 时间：2013-02-18T01:19:41.937
> 
> 标签：objective-c, cocoa, nstextfield, nscollectionview

我一直在用头撞墙（可可）大约一个星期来解决这个问题，如果可能的话想得到一些建议。

我正在尝试向用户提供代表功能列表的 NSTextField 列表——让他们使用“添加”按钮添加其他文本字段。这是更大表单的一部分，用户应该能够通过整个表单（包括列表）

我使用 NSCollectionView 实现了上述操作，除了选项卡似乎间歇性地停止在 NSCollectionView 中工作，原因我无法弄清楚。您将点击选项卡，当突然完全跳过集合视图时正常循环，或者有时如果您在集合视图中的特定文本字段中，点击选项卡只会突出显示文本但永远不会跳转到下一个字段，无需在集合视图外单击鼠标。我想知道是否有人以前经历过这种情况......或者对调试这样的事情有什么建议？每次控件成为响应者时，我都尝试记录下一个响应者是什么，并且似乎没有任何模式可以解释为什么制表符突然停止工作然后又重新开始。

有 3 个 TabView，每个都有一个集合视图。我一直想知道这是否会导致问题？

感谢任何人都可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:32:53.837

好的，经过这么长时间，我可能已经解决了这个问题（无论如何……我在无数次运行中没有看到任何问题，并且通常每次至少发生一次）

在主窗口上打开自动重新计算视图循环似乎已经解决了正在发生的任何事情。我不得不承认我不完全理解为什么，除了可能是因为选项卡视图和集合视图需要重新计算关键循环以保持一切同步。我想我需要对关键循环的工作原理进行更多研究......

# windows - 管理用户的 Schtasks 权限错误？

> ID：14928165
> 
> 赞同：7
> 
> 时间：2013-02-18T01:19:43.263
> 
> 标签：windows, batch-file, permissions, cmd, windows-task-scheduler

我知道这已经以不同的方式被问过几次，但对于我的具体情况没有任何帮助。

这一切都是通过 Windows 命令行在 Windows 7 Home Premium 台式计算机上完成的。我试图使用 schtasks 创建一个简单的批处理程序，以便在我登录时自动打开一堆程序。但是，当我尝试创建任务时，它说我的批处理文件的访问被拒绝。

```
 schtasks /create /tn Startup /tr "C:\ComputerStartup.bat" /sc onlogin
    ERROR: Access is denied. 
```

所以我尝试进行身份验证（我以管理员用户身份运行它）。

```
 schtasks /create /s Jackson-HP /u Jackson /sc onlogon /tn Startup /tr C:\ComputerStartup.bat 
```

它提示我的用户输入密码。我的电脑没有密码，所以我按回车键，它说：

```
 ERROR: User credentials are not allowed on the local machine. 
```

我不知道如何解决这个问题。我仍然是创建批处理文件的新手，所以我可能会犯一个新手错误。感谢您提供的任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-12T21:20:30.450

尝试使用提升的（管理员）命令提示符并使用 /ru 命令行开关而不是 /u 开关。如果您还想指定密码，请使用 /rp。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-16T01:58:07.673

我遇到了这个问题并通过重新创建计划任务（通过导出和导入）来解决它。似乎如果运行它的用户不是任务的“作者”，那么它将抛出拒绝访问错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-26T18:44:05.250

这是一个老问题，所以您可能已经弄清楚或继续前进，但我的理解是 schtasks 不适用于没有密码的帐户。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-07T14:38:14.813

我知道这是一个老问题，但没有解决方案，我发现它严格来说是 schtasks.exe 中的一个错误

我发现了一个奇怪的解决方法/技巧，使用主机。文件（！）虽然。

见[https://eskerahn.dk/wordpress/?p=2724](https://eskerahn.dk/wordpress/?p=2724)

我只用 /Query 尝试过，但如果它不能处理其他的，我会感到惊讶

某些 * * CENSORED * * 某处似乎有（错误的）想法，他们永远不需要使用比您以交互方式登录的凭据更高的凭据访问本地计算机....

# java - 对应图文的多页应用

> ID：14928166
> 
> 赞同：0
> 
> 时间：2013-02-18T01:19:45.193
> 
> 标签：java, android, arrays, string, image

我是 Java 和 Android 的新手。过去一周我一直在尝试为我的手机制作一个应用程序。该应用程序由 4 个页面组成，如下图所示：

![解释四页的图表](../Images/aaf058acf66f1b53d0646f4a0cfd86db.png)

*   第 1 页：包含占据屏幕大小的图片。如果我点击图片，它需要转到“第 2 页”。

*   第 2 页：由左侧的图标（例如国旗）和一个文本字段（例如 USA）组成。单击“美国”条时，需要转到第 3 页。

*   第 3 页：由文本、图片和字符串中的更多文本组成。此页面需要与第 2 页中单击的条带相对应（本例中为“美国”）。“page 3”和“page 4”底部还有两个按钮，按下时需要转到相应的页码。

*   第 4 页：如果在“第 3 页”上按下“更多”按钮，则会显示此页面。

我希望这款手机至少可以在 Android 2.2 或 2.3 上运行。所有徽标、图片和字符串文本都需要在本地可用（资源文件夹），而不是基于网站。`ListView`我已经尝试了's 和按钮的各种组合以及' `OnClickListener`s 以及 toast 屏幕。我有限的编程知识令人沮丧。

我的问题是是否有一个模板可以帮助我使用这个应用程序？或者如果有任何网络资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:27:59.273

有一些简单的方法可以做到这一点。如果您想向后兼容 SDK 8，您可以通过两种方式做到这一点。您可以为每个布局使用片段或活动。如果您实现片段，我建议您阅读[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)里面的内容，您将了解使用 FragmentActivity 而不是 Activity。阅读此链接[http://developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)因为它将具有在旧版本的 SDK 中实现片段所需的库。看起来您正在寻找一些位于布局底部的导航按钮。为了在 SDK 8 中完全实现在屏幕底部具有此视图的布局，您需要创建自己的视图并将其放置在屏幕底部。RelativeLayout 和 alignParentBottom = "true" 将完成此操作。还有一种方法可以使用 ViewPager 来执行此操作，该方法也可以满足您的向后兼容性要求。很抱歉我向您提供的信息量很大，但我真的建议您查看用户就该主题发布的其他问题。[如何导航到android中的另一个页面？](https://stackoverflow.com/questions/5202800/how-to-navigate-to-another-page-in-android)例如。祝你好运，你要找的所有东西都可以通过谷歌搜索得到。也许不是一下子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:22:47.290

在 Android 中，单独的“页面”或“屏幕”可以实现为`Activity`s. 您需要扩展`Activity`该类并添加您希望显示的组件。大多数布局可以在 XML 文件中完成。我强烈建议您在 Google 上搜索说明 Android 编程基础知识的教程。从那里，您可以从创建一个包含两个页面的应用程序开始。然后每次只添加一点点，直到您获得所需的完整应用程序。

# python - 循环遍历数组以在python中查找欧几里得距离

> ID：14928169
> 
> 赞同：3
> 
> 时间：2013-02-18T01:20:12.587
> 
> 标签：python, loops, numpy

这是我迄今为止所拥有的：

```
Stats2003 = np.loadtxt('/DataFiles/2003.txt') 
Stats2004 = np.loadtxt('/DataFiles/2004.txt') 
Stats2005 = np.loadtxt('/DataFiles/2005.txt') 
Stats2006 = np.loadtxt('/DataFiles/2006.txt')
Stats2007 = np.loadtxt('/DataFiles/2007.txt') 
Stats2008 = np.loadtxt('/DataFiles/2008.txt')
Stats2009 = np.loadtxt('/DataFiles/2009.txt') 
Stats2010 = np.loadtxt('/DataFiles/2010.txt') 
Stats2011 = np.loadtxt('/DataFiles/2011.txt') 
Stats2012 = np.loadtxt('/DataFiles/2012.txt') 

Stats = Stats2003, Stats2004, Stats2004, Stats2005, Stats2006, Stats2007, Stats2008, Stats2009, Stats2010, Stats2011, Stats2012 
```

我正在尝试计算每个数组与其他数组之间的欧几里得距离，但这样做有困难。

通过计算距离，我得到了我想要的输出：

```
dist1 = np.linalg.norm(Stats2003-Stats2004)
dist2 = np.linalg.norm(Stats2003-Stats2005)
dist11 = np.linalg.norm(Stats2004-Stats2005) 
```

等，但我想用循环进行这些计算。

我正在使用 Prettytable 将计算结果显示到表格中。

谁能指出我正确的方向？我还没有找到任何以前有效的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:47:10.600

看[`scipy.spatial.distance.cdist`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.cdist.html)。

从文档中：

> 计算两个输入集合中每对之间的距离。

因此，您可以执行以下操作：

```
import numpy as np
from scipy.spatial.distance import cdist
# start year to stop year
years = range(2003,2013)
# this will yield an n_years X n_features array
features = np.array([np.loadtxt('/Datafiles/%s.txt' % year) for year in years])
# compute the euclidean distance from each year to every other year
distance_matrix = cdist(features,features,metric = 'euclidean') 
```

`(m,n)`如果您知道开始年份，并且您没有丢失任何年份的数据，那么很容易确定在距离矩阵中的坐标处比较了哪两年。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T01:49:41.580

要执行循环，您需要[将数据保留在变量名之外](http://nedbatchelder.com/blog/201112/keep_data_out_of_your_variable_names.html)。一个简单的解决方案是改用字典。这些循环隐含在 dict 理解中：

```
import itertools as it

years = range(2003, 2013)
stats = {y: np.loadtxt('/DataFiles/{}.txt'.format(y) for y in years}
dists = {(y1,y2): np.linalg.norm(stats[y1] - stats[y2]) for (y1, y2) in it.combinations(years, 2)} 
```

现在访问特定年份的统计信息，例如 2007 年，通过`stats[2007]`元组和距离，例如`dists[(2007, 20011)]`.

# c# - 带有复选框语法错误的 Ajax.BeginForm()

> ID：14928170
> 
> 赞同：2
> 
> 时间：2013-02-18T01:20:30.560
> 
> 标签：c#, ajax, razor, asp.net-mvc-4, checkbox

我在部分视图中有一个 Ajax.BeginForm()，其中包含一个布尔值的 CheckBox。模型如下；

```
public class ViewBusinessAdd
{
    [Required(ErrorMessage="Name must be supplied")]
    [Display(Name = "Business Name")]
    public string Name { get; set; }

    [Required(ErrorMessage = "Contact must be supplied")]
    [Display(Name = "Business Contact")]
    public string Contact { get; set; }

    [Display(Name = "Phone Number")]
    public string Number { get; set; }

    public string Postcode { get; set; }

    public Dictionary<string, string> States  { get; set; }

    public string AddressRegion { get; set; }

    public bool IsFacebookPost { get; set; }

    public List<RecommendationViewAttribute> Attributes { get; set; }
} 
```

CheckBox 使用 Html 助手呈现；

```
<div class="control-group">
   <label class="control-label">
      @Html.LabelFor(m => m.IsFacebookPost, "Post recommendation")
      <img src="~/Content/images/f_logo.png" alt="Facebook" />
   </label>
   <div class="controls">
      @Html.CheckBoxFor(m => m.IsFacebookPost)
   </div>
</div> 
```

这会在渲染时生成以下 HTML；

```
<input data-val="true" data-val-required="The IsFacebookPost field is required." id="IsFacebookPost" name="IsFacebookPost" type="checkbox" value="true" /><input name="IsFacebookPost" type="hidden" value="false" /> 
```

提交表单时，它会在 Chrome 中产生此错误；

> Uncaught SyntaxError: Unexpected token u

如果我删除 CheckBox 表单提交没有任何错误。如果我将其转换为非 Ajax 表单，它也会提交，但不幸的是，这不适用于页面设计。

我对此感到非常困惑-我什至将其更改为 RadioButton 并且存在相同的行为。有没有人有任何想法？

编辑：忘记添加它是一个 Javascript 错误。

编辑：错误来自下面返回的 jQuery 库；

> parseJSON: function( data ) { // 尝试先使用原生 JSON 解析器进行解析
> 
> ```
>  if ( window.JSON && window.JSON.parse ) {
>       return window.JSON.parse( data );
>   } 
> ```

但这只有在我使用 Razor HTML 帮助程序生成复选框时才会发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:29:53.313

我被这个咬了，花了大约 6 个小时试图找出问题所在。根据 Jquery 开发人员的说法，这是 1.9.1 中的预期行为。如果您使用 jQuery Migrate 1.1.1 插件，一切都应该正常工作，除了我认为可以关闭的控制台警告。

[http://bugs.jquery.com/ticket/13412](http://bugs.jquery.com/ticket/13412)

请参阅错误报告，这实际上不是错误:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T11:22:57.150

好吧，jQuery 1.9.1 似乎引入了一个错误。我已经降级到 1.8.3 并且复选框的 Razor 助手现在可以正常工作。如果有人感兴趣，降级的步骤；

> 卸载包 jQuery -force
> 
> 安装包 jQuery -version 1.8.3

# git - gitolite：“按需”创建野生存储库

> ID：14928172
> 
> 赞同：1
> 
> 时间：2013-02-18T01:20:38.863
> 
> 标签：git, gitolite

有没有一种方法可以按需创建*野生存储库，而无需先将**CREATOR*用户公钥添加到*gitolite*？我想设置一个命名空间*anon/CREATOR/*任何人都可以创建存储库。

不幸的是，这不起作用：

```
repo anon/CREATOR/[a-z0-9]+
    C    = @all
    RW+D = CREATOR 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:49:58.043

考虑到：

*   `CREATOR`是“参数化创建 repo 的用户的名称”（来自[“wild” repos 上的 Gitolite 页面](http://sitaramc.github.com/gitolite/wild.html)）
*   公钥是了解*谁*在执行 git 命令的方式（例如用于创建所述狂野 repo 的 git clone）

我怀疑是否有可能允许`@all`根据一个人的名字创建一个 repo。

# python - 如何使用任意字段/任意数量的字段实现数据库兼容的python对象

> ID：14928173
> 
> 赞同：0
> 
> 时间：2013-02-18T01:21:04.847
> 
> 标签：python, sql, django, json

我正在创建一个 python 程序来与许多不同类型的概念对象进行交互。例如，它可能代表一个人，在这种情况下，它会是这样的：

```
type = "person"
name = "Bono"
profession = "performer"
nationality = "Irish" 
```

但是，它也可能代表一本杂志，在这种情况下，它看起来像这样

```
type = "publication"
name = "Rolling Stone"
editor = ("Jann Wenner" , "Will Dana")
founding_year = "1967" 
```

除了类型和名称之外，所有其他字段都是可选的。这是一个棘手的问题——它是为爬虫编写的代码的一部分，因此所有其他字段都是动态确定/创建的。换句话说，我们不会知道我们需要一个“编辑器”字段，直到刮板将“编辑器”吐回代码

理想情况下，这将作为一个 python 列表字典相当简单地实现。但是，我们将处理大量记录——太多而无法同时保存在内存中。因此，我希望具有数据库兼容性——类似于 Django 的 MVC，这样我们就可以轻松地查询记录集。

我考虑过的一个选项是 Django 字段集，但看起来它们仍处于测试阶段，我担心我会失去一些我可以存储的通用性——理想情况下，我可以存储任何类型的数据一个键，(value_list) 对。我喜欢任何有关字段集或示例代码的可行性的意见。

我考虑过的另一个选项是 Django MVC 和 JSON 的组合。在这种情况下，我将为每个对象设置三列——类型、名称和属性。属性将是所有其他属性的 JSON 序列化（或其他适当的腌制方法），因此一旦拥有对象，就可以重构它的属性并查询集合。我会存储[这样](https://stackoverflow.com/questions/4342176/how-do-i-serialize-a-python-dictionary-into-a-string-and-then-back-to-a-diction)或[这样](http://djangosnippets.org/snippets/513/)的东西（链接）。使用这种方法，我将无法轻松搜索字典中的任何属性。

我非常感谢任何意见或指导。如果有人知道类似的项目，我很想知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:26:00.863

这似乎是使用 NoSQL 数据库的绝佳机会。像 MongoDB 这样的东西不依赖于固定模式，因此它可能适合您的场景。

# ios - 库链接，但 Xcode 说“找不到文件”。

> ID：14928174
> 
> 赞同：3
> 
> 时间：2013-02-18T01:21:16.737
> 
> 标签：ios, xcode

这刚刚开始发生在我的项目中，我不知道该怎么做。

我一直在使用 Parse 框架，到目前为止一切都很好。但是现在，即使包含该库：

![在此处输入图像描述](../Images/d09d6bb3e037cccf216a03601d0860f6.png)

并链接：

![在此处输入图像描述](../Images/d459e3c66341b970781e6631d441e15b.png)

当我将它导入类时，我仍然收到“'Parse/Parse.h'文件未找到”错误。更奇怪的是（至少对我而言），该项目仍在构建和运行。当我构建或清理项目时，警告会消失，但它会立即重新出现。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-08T20:14:50.320

对于所有没有发现问题的人：

1.  转到构建设置并搜索“框架搜索路径”，然后删除所有内容并放入 ./ 并使其递归（通过双击它）

2.  重要 - 不要在 Windows 上下载 Parse 框架然后复制到 Mac！框架内部有一些链接，在复制时它们会损坏。直接从 Mac 下载框架，并在添加到 xcode 时确保它在 XCode 框架中具有“Headers”文件夹。

我希望它可以帮助一些人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:06:08.010

您是否尝试过将 #import "Parse/Parse.h" 更改为 #import ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T02:36:13.587

编译器将在一个特殊的搜索路径中搜索头文件。在您的情况下，文件“Parse/Parse.h”似乎不在编译器的头文件搜索路径中。在您的编译器设置中检查这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-28T02:48:35.640

你有多少目标？如果不止一个，则调试目标可能不包含框架。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-02-28T02:23:43.883

当我使用名为“TodoTable”的演示时，我遇到了同样的问题，我通过删除 中的链接`target -> Build Phases -> Link Binary With Libraries -> Parse.framework`，然后再次添加它来解决这个问题。您可以通过单击`+`按钮，然后选择`Add other...`，然后在项目文件夹中找到该`Parse.framework`文件。之后，重建您的项目，就可以了。

# ruby-on-rails - Rails ActiveSupport:关注和私有方法

> ID：14928176
> 
> 赞同：26
> 
> 时间：2013-02-18T01:21:55.443
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-4, activesupport-concern

这是一个关于rails关注的好主意：http: [//37signals.com/svn/posts/3372-put-chubby-models-on-a-diet-with-concerns](http://37signals.com/svn/posts/3372-put-chubby-models-on-a-diet-with-concerns)

制作不属于公共 API 的非常小的方法也是一个好主意。在不使用关注点的情况下，它们将成为 ruby​​ 类中的私有方法。

在 Rails ActiveSupport::Concern 模块中创建私有方法有意义吗？如果是这样，private 是否适用于关注定义中的常规实例方法和类方法？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2015-11-17T22:31:09.637

> `ActiveSupport::Concern`在 Rails模块中创建私有方法有意义吗？

考虑到关注点是最终将包含在其他类中的智能模块——是的，确实如此。它只是一个可移植的代码，可提取的行为，我想在编写它时将它视为我的控制器（或模型等）的一部分。所以基本上你只是声明方法`private`或`protected`像往常一样。

也许[您链接的帖子](https://signalvnoise.com/posts/3372-put-chubby-models-on-a-diet-with-concerns)自 2013 年以来已更新，但 DHH 在其中的一个示例中确实做到了这一点：

```
module Dropboxed
  extend ActiveSupport::Concern

  included do
    before_create :generate_dropbox_key
  end

  def rekey_dropbox
    generate_dropbox_key
    save!
  end

  private # <- Let's list some privates

  def generate_dropbox_key
    self.dropbox_key = SignalId::Token.unique(24) do |key| 
      self.class.find_by_dropbox_key(key)
    end
  end
end 
```

至于`private`类方法，我同意@Hugo 并且自己从未使用过它们，但是您可以通过以下方式实现这一点：

```
module Dropboxed
  extend ActiveSupport::Concern

  included do
    private_class_method :method_name
  end

  module ClassMethods
    def method_name
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T01:47:47.847

这只是我的意见，但现在我对私有类方法摸不着头脑，它们有什么用？无论如何，如果您真的需要它们，请参阅这篇文章：[如何创建私有类方法？](https://stackoverflow.com/questions/4952980/creating-private-class-method)

在关注模块中拥有私有实例方法确实有意义，并且可以正常工作。私有类方法也可以正常工作，但要遵循上述帖子。

# json - ExtJS 提交表单有问题，无法解码 JSON 响应

> ID：14928181
> 
> 赞同：0
> 
> 时间：2013-02-18T01:22:50.957
> 
> 标签：json, forms, extjs, submit, root

我正在使用 ExtJS 表单提交将表单数据提交到 Web 服务器。根据提交的结果，我需要提醒用户。我之前发送了格式的回复

'{"success": "false", "msg": "创建项目时出错。请重试。"}'

并且使用 form.submit 的成功属性可以正常工作。但是，我不得不调整响应的格式

'{"data":[{"success": "false", "msg": "创建项目时出错。请重试。"}]}'

因为这是访问相同结果的单独模块所需的 JSON 格式。

尽管它现在被包装在根元素中，但无论如何让 form.submit 正确读取信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:30:51.797

表单具有“[阅读器](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-cfg-reader)”属性。尝试配置它：

```
reader: {
    root: 'data'
} 
```

# visual-studio-2010 - 更改 try-catch 突出显示颜色

> ID：14928182
> 
> 赞同：0
> 
> 时间：2013-02-18T01:22:56.650
> 
> 标签：visual-studio-2010

当我在 Visual Studio 中调试到 try catch 时，它将使用默认配色方案突出显示整个 try catch 块，如下所示。

![突出显示的尝试捕获颜色的图片](../Images/aa1e0b31cd4d36bd9848a94d9ffab28d.png)

当使用像黑曜石之子这样的黑色背景配色方案时，这很烦人。

我该如何改变它？

我尝试了工具->选项->环境->字体和颜色[文本编辑器]中的大多数选项。我可以在那里或其他地方找到它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T12:53:07.030

工具 | 选项 | 字体和颜色 | 只读区域

# django - django i18n 翻译不能在 nginx 上工作，但可以在 runserver 上工作

> ID：14928183
> 
> 赞同：0
> 
> 时间：2013-02-18T01:22:57.000
> 
> 标签：django, internationalization, translation

我花了一段时间在我的本地开发服务器（runserver）上进行翻译，然后在我部署到 nginx 服务器（另一台服务器）之后，翻译再次停止工作。我无法弄清楚缺少什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T03:14:55.880

正如 i18n [docs](https://docs.djangoproject.com/en/1.4/topics/i18n/)中提到的，Django 接受一个`Accept-Language`标头。可能 nginx 不会将该标头传递给 Django，因此您必须手动传递它。只需将`proxy_pass_header`如下概述的内容添加到您的 nginx 配置中。

```
location / {
    proxy_pass ...
    proxy_pass_header "Accept-Language";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T07:53:13.643

终于搞定了，不知何故ubuntu不喜欢locale目录中的文件夹名称'zh_cn'，而是喜欢zh_CN。

# javascript - 在你的 ember.js 网络应用程序中，伪持久状态应该存在于哪里？

> ID：14928193
> 
> 赞同：2
> 
> 时间：2013-02-18T01:25:05.287
> 
> 标签：javascript, ember.js, ember-data

我最近正在阅读 @twbrandt 撰写的出色的[ember.js](https://twitter.com/twbrandt)[入门](http://twbrandt.github.com/)文章，发现他对您的控制器/视图/模型/路由器/模板“应该负责”的内容的解释很有趣。

当你有一个数据库支持的模型一切都很好时，把持久化的状态放在模型对象中，任何没有持久化的状态很可能会在控制器中找到。

但是想象一下，您允许您的客户定义给定模型的外观（某种配置）。从这个配置中，您需要搭建一个“结构”以在运行时添加这些模型。

例如，您允许您的客户定义他们的业务每天营业的小时数。从这个配置中，您需要在页面上添加一个空的或“人造”模型来填满一整天。您创建这些人造模型是因为您还需要在每个工作日获取这些模型的持久版本（因为客户实际上可以使用应用程序创建一个）。

因此，使用配置我留下了一个模型（实际上保存到数据库/等），但我需要将这个模型与一个实际上并不存在但在车把模板中它确实有帮助的模型混合这是一个 shim 的版本，因此 html 并不复杂（将逻辑保留在 javascript 中）。

目前我将此逻辑存储在模型本身上，因为持久化的实际模型与作为单个数组绑定到车把模板的人造模型/占位符之间的“混合”（但通常只有其中一些是持久性支持的）楷模）。

我的问题是——这个数组是否应该成为控制器的一部分，因为“其中一些”没有得到支持？或者整个数组是否应该覆盖 ember-data 的“查找”方法（就像我现在正在做的那样）以启用“在存在时用真实模型替换每个仿制品”行为？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T18:34:05.703

视图使用控制器来显示数据。控制器是模型的代理，视图可以显示来自模型的信息。

但是您不必将模板链接到模型。您可以在您的控制器上拥有在您的车把模板中使用的属性。然后，在保留关联记录时，由您将这些数据传输/操作到模型。您还可以在模型上拥有不`DS.attr`存在因此不会持久化的属性。

使用样本来响应/理解您的问题会更容易。

# android - 如何使用 sendevent 或其他方式模拟来自后台服务的触摸？

> ID：14928197
> 
> 赞同：34
> 
> 时间：2013-02-18T01:25:54.037
> 
> 标签：android, shell, android-ndk, android-service

是否可以从后台应用程序（或服务）模拟触摸或运行 sh 脚本（模拟触摸）？

在没有 USB 或其他连接到 PC 的情况下测试 android 系统需要它，这就是为什么我不能（或不知道如何）使用 Monkey 或其他自动测试工具。

补充信息：我找到了用 root 运行 shell 命令的方法（测试的设备 root）：

[无法通过 android 代码执行 sendevent shell 命令](https://stackoverflow.com/questions/7011626/unable-to-execute-sendevent-shell-command-through-the-android-code)（创建触摸模拟）。 [在系统分区上写入文件](https://stackoverflow.com/questions/7879920/android-writing-file-on-system-partition)（以 root 权限运行命令）

我也得到了模拟触摸的事件。

结果我有：

```
//sendevent commands to simulate touch (verify it work from cmd)
String[] touchEvent = { "sendevent /dev/input/event0 0 0 0\n",
                        "sendevent /dev/input/event6 3 53 499\n",
                        "sendevent /dev/input/event6 3 54 680\n",
                        "sendevent /dev/input/event6 3 58 40\n",
                        "sendevent /dev/input/event6 3 48 3\n",
                        "sendevent /dev/input/event6 3 57 0\n",
                        "sendevent /dev/input/event6 0 2 0\n",
                        "sendevent /dev/input/event6 0 0 0\n",
                        "sendevent /dev/input/event6 0 2 0\n",
                        "sendevent /dev/input/event6 0 0 0\n",
                        "sendevent /dev/input/event0 3 0 2\n",
                        "sendevent /dev/input/event0 0 0 0\n"};

try{
    Thread.sleep(2000);
    Process root = Runtime.getRuntime().exec("su");
    DataOutputStream os = new DataOutputStream(root.getOutputStream());             
    for(int i = 0; i < touchEvent.length; i++){
            Log.i(TAG, touchEvent[i]);  
            os.writeBytes(touchEvent[i]);
            os.flush();
    }
    root.waitFor();
} catch (IOException e) {
    Log.e(TAG, "Runtime problems\n");
    e.printStackTrace();
} catch (SecurityException se){
    se.printStackTrace();
} catch (InterruptedException e) {
    e.printStackTrace();
} 
```

我没有任何例外，但它不是触摸模拟。

任何人都可以帮助解决这个问题吗？

如果有另一种方法可以使用 C 上的 android ndk 或守护进程来实现，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-22T01:40:41.310

我无法执行“sendevent”命令，但为自己找到了另一种方法，希望对某人有所帮助。

对于模拟触摸，我使用了来自 android.app.Instrumentation 的 sendPointerSync()，它仅适用于“android.permission.INJECT_EVENTS”权限。为了使用它，您应该将您的应用程序编译为系统应用程序。为此，您应该按照以下步骤操作：

1.  从android源获取文件：

    **root-of-android-source-tree/out/host//framework/signapk.jar**

    **root-of-android-source-tree/build/target/product/security/platform.x509.pem**

    **root-of-android-source-tree/build/target/product/security/platform.pk8**

2.  使用获取文件签署您的应用程序：

    命令“ **java -jar signapk.jar platform.x509.pem platform.pk8 YourApp-unsigned.apk** ” YourApp-signed.apk。

3.  adb install YourApp-signed.apk
    *   运行你的应用
    *   使用“adb shell ps”确认您的应用程序作为系统运行。

触摸模拟代码（模拟需要新线程）：

```
Thread thread = new Thread(){
       @Override
       public void run(){
               Instrumentation m_Instrumentation = new Instrumentation();

               m_Instrumentation.sendPointerSync(MotionEvent.obtain(
                       SystemClock.uptimeMillis(),
                       SystemClock.uptimeMillis(),
                       MotionEvent.ACTION_DOWN,posx, posy, 0));
               m_Instrumentation.sendPointerSync(MotionEvent.obtain(
                       SystemClock.uptimeMillis(),
                       SystemClock.uptimeMillis(),
                       MotionEvent.ACTION_UP,width*4/5,height, 0));
       }
   }; 
```

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.yourapp"
    **android:sharedUserId="android.uid.system"**
    android:versionCode="1"
    android:versionName="1.0" > 
```

使用资源：

*   [在 Android 上以编程方式注入事件 - 第 1 部分](http://www.pocketmagic.net/2012/04/injecting-events-programatically-on-android/#.UUu1jzdj8fX)
*   [如何使用系统权限编译 Android 应用程序](https://stackoverflow.com/questions/3598662/how-to-compile-android-application-with-system-permissions)
*   [此处编译说明](https://groups.google.com/group/Android-DevPhone-Updating/tree/browse_frm/month/2010-04?_done=/group/Android-DevPhone-Updating/browse_frm/month/2010-04?&&pli=1)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-03-11T19:31:34.910

当我发现一个更简单的解决方案时，我正要实施您的解决方案 - 希望它对某人有所帮助。由于您已经拥有 root 设备，因此您无需作为系统应用程序进行签名。

要模拟位置 (100,200) 的触摸，您只需使用**Runtime.exec**从服务内部调用**输入**，如下所示：

 **```
Process process = Runtime.getRuntime().exec("su");
DataOutputStream os = new DataOutputStream(process.getOutputStream());
String cmd = "/system/bin/input tap 100 200\n";
os.writeBytes(cmd);
os.writeBytes("exit\n");
os.flush();
os.close();
process.waitFor(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-25T07:05:31.650

您可以使用“滑动”输入。查看[Input.java 源代码](https://android.googlesource.com/platform/frameworks/base/+/HEAD/cmds/input/src/com/android/commands/input/Input.java)，您可以看到进行滑动所需的参数。

这是[我为模拟滑动](https://gist.github.com/MiichaelD/cde0163a9839d0ff1bd11b9c3ce894d0)以通过点击而不是滑动[来玩 smove 游戏](https://play.google.com/store/apps/details?id=com.sm.smove)而制作的一个要点，只是为了测试这一点。您需要超级用户访问权限才能使用此实现。**

# embedded - 微控制器和闪存芯片编程开发与仿真

> ID：14928198
> 
> 赞同：0
> 
> 时间：2013-02-18T01:26:05.603
> 
> 标签：embedded, emulation, microcontroller, simulator, flash-memory

我刚开始学习微控制器编程，似乎入门有很多困难，尤其是模拟部分。

这是我需要编写的一个应用程序：我需要在闪存芯片中存储几个波形文件，并使用 Cortex-M0 从闪存中读取音乐，并组合播放它们，或者运行一些基本信号对它们进行处理。

我正在寻找一个支持端到端模拟的 IDE。我查看了 CoIDE（因为如果我在谷歌上搜索免费的 Cortex IDE，那是第一个出现的），在确定 Cortex 之前，我还查看了 MPLAB，但我没有看到其中任何一个支持闪存芯片模拟。我似乎能够正确模拟芯片，但我没有看到构建虚拟闪存芯片的方法。

我错过了什么吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T07:41:54.597

首先 - MPLAB 是 Microchip 产品的 IDE，而 Microchip 没有任何 ARM 芯片，所以这个 IDE 根本帮不了你。

至于 CooCox - 这个 IDE 基本上是 Eclipse + GCC 工具链，据我所知，网络上可用的大多数工具链都没有启用模拟器，即使它们启用了，这也只是一个指令模拟器（可能不适合你的架构，但我不确定），所以你也可以在 PC 上编写你的软件，在那里测试它，然后将它移动到真正的硬件上——算法的工作原理是一样的（如果你使用可移植代码，所以使用“int “在 64 位桌面上不是一个好主意，最好对所有内容使用类型）。

只有像 IAR 或 Keil 这样的大型商业 IDE 和工具链可能为您的芯片提供模拟器（但这也可能有问题，因为这些都是相当新的），您只需要几千欧元就可以了。

我的建议 - 在进行嵌入式工作时忘记模拟器。

出现这种情况的原因可能很简单——不可能准确地模拟真实的硬件。要实现这样的目标，您首先必须拥有设备的完整 IP 内核，以及芯片内所有连接和外围设备的准确 VHDL（或类似的东西）描述。我只是没有看到所有供应商都将此类信息提供给任何愿意创建 IDE 的公司（；然后您需要一个用于 VHDL（或其他任何东西）的实时模拟器，能够模拟具有大量外围设备的非常大的芯片. 这可能是可能的，所以让我们转移到另一点。在现实世界中，芯片不是在真空中运行的，它连接到具有真实现象和真实信号的真实硬件。你无法准确地模拟。

Your project is quite a good example of the problems listed above. You may find a simulator of your ARM Cortex-M0 chip, but you won't be able to simulate the external flash chip connected to your microcontroller. You may as well stop looking, as I assure you that you won't find anything like that. BTW - your chip does not have external memory bus, so you'll have to operate the memory completely in software (the contents of external memory will NOT be mapped to some address range of your chip).

So as a final note - lack of simulator is not a problem - you have a debugger (which is capable of some things you could use simulator for), you have multiple debug-like-methods (blinking LEDs, printfs(), ...), you have h/w tools to check the system (multimeters, oscilloscopes, logic analyzers, ...), so it's not that bad (;

One more thing about CooCox. For me the idea is a bit fishy - it's free, it's based on free components, so why it's not open-source (some places claim it is, so where's the source)? There were other "free" environments like that in the past and it turned out that "free" meant "let's use free beta-testers for a while", and when the project reached some level of maturity it became commercial or severely limited in the free version... Atollic TrueStudio comes to mind as a great example of this strategy (and people LOVED it when it was free - everyone recommended it - "don't bother with GCC, use atollic, it's free and has no limitations"). I don't know how will future of CooCox look like, but this software is sometimes a bit strange, sometimes a big buggy and does not support all chips, so first check whether it "likes" your chip of choice. Oh - and it's done by people from China.

Embedded work may seem very like writing code for PC, but actually is a big shift in a way you think...

# android - 将图像保存在本地存储phonegap中

> ID：14928202
> 
> 赞同：15
> 
> 时间：2013-02-18T01:26:37.653
> 
> 标签：android, image, cordova, camera, local-storage

我对phonegap很陌生，它说它具有捕获功能。所以我使用它并且非常好。但是我在 html 中显示了图片，但我不知道如何保存图片。

根据[http://docs.phonegap.com/en/1.7.0/cordova_camera_camera.md.html](http://docs.phonegap.com/en/1.7.0/cordova_camera_camera.md.html)

您可以对编码的图像或 URI 做任何您想做的事情，例如：

在标签中渲染图像（参见下面的示例） **在本地保存数据（LocalStorage、Lawnchair 等）** 将数据发布到远程服务器

不幸的是，没有关于如何做到这一点的示例代码

如何将图像保存在 LocalStorage 或设备库中？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-05-20T11:46:38.120

太好了，您找到了解决方案，我按照以下方式进行了操作。希望它可以帮助别人。

只需在按钮单击事件上调用**capturePhoto函数。**

```
// A button will call this function
//
function capturePhoto() {
    sessionStorage.removeItem('imagepath');
    // Take picture using device camera and retrieve image as base64-encoded string
    navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50, destinationType: Camera.DestinationType.FILE_URI });
}

function onPhotoDataSuccess(imageURI) { 
        // Uncomment to view the base64 encoded image data
        // console.log(imageData);

        // Get image handle
        //
        var imgProfile = document.getElementById('imgProfile');

        // Show the captured photo
        // The inline CSS rules are used to resize the image
        //
        imgProfile.src = imageURI;
        if(sessionStorage.isprofileimage==1){
            getLocation();
        }
        movePic(imageURI);
}

// Called if something bad happens.
// 
function onFail(message) {
    alert('Failed because: ' + message);
}

function movePic(file){ 
    window.resolveLocalFileSystemURI(file, resolveOnSuccess, resOnError); 
} 

//Callback function when the file system uri has been resolved
function resolveOnSuccess(entry){ 
    var d = new Date();
    var n = d.getTime();
    //new file name
    var newFileName = n + ".jpg";
    var myFolderApp = "MyAppFolder";

    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSys) {      
    //The folder is created if doesn't exist
    fileSys.root.getDirectory( myFolderApp,
                    {create:true, exclusive: false},
                    function(directory) {
                        entry.moveTo(directory, newFileName,  successMove, resOnError);
                    },
                    resOnError);
                    },
    resOnError);
}

//Callback function when the file has been moved successfully - inserting the complete path
function successMove(entry) {
    //Store imagepath in session for future use
    // like to store it in database
    sessionStorage.setItem('imagepath', entry.fullPath);
}

function resOnError(error) {
    alert(error.code);
} 
```

这段代码的作用是

捕获图像并将其存储在设备 SD 卡上的**MyAppFolder中。**并将**图像路径**存储在会话中，以便将其插入本地数据库。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-10T18:27:15.843

将选项中的 saveToPhotoAlbum 设置为 True 也很有效。[从这里](http://docs.phonegap.com/en/2.9.0/cordova_camera_camera.md.html#cameraOptions)的 2.9 文档中得到。

# c# - 读取和修改制表符分隔文件

> ID：14928208
> 
> 赞同：0
> 
> 时间：2013-02-18T01:27:13.987
> 
> 标签：c#, csv

我需要读取然后写出我当前记录的记录。

这是我到目前为止的代码：

```
private void ShipRecords()
{
  using (TextReader tr = File.OpenText(appSettings.CreditCardTranFile))
  {
    var strLine = string.Empty;
    string[] arrColumns = null;
    while ((strLine = tr.ReadLine()) != null)
    {
      arrColumns = strLine.Split('\t');
      if (arrColumns[0] == "A")
      {
        if (PublishRecord(arrColumns))
        {
          arrColumns[0] = "P";
          // I need to save here
        }

      }
    }
    tr.Close();
  }
} 
```

此时如何通过更改将记录写回？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:11:10.887

在这里，我没有对此进行测试，因为我不确定您到底要做什么，但是像这样..这就是我要做的。

```
private void ShipRecords()
    {
        StreamWriter writer;
        StreamReader reader;

        try
        {
            writer = new StreamWriter(outputFile);
            reader = new StreamReader(inputFile);

            string line;
            string[] columns;

            while ((line = reader.ReadLine()) != null)
            {
                columns = line.Split('\t'); // you may want to check that you get the correct number of columns etc.

                if (columns[0] == "A" && PublishRecord(columns))
                    columns[0] = "P";

                writer.WriteLine(String.Join("\t", columns));
            }
        }
        catch { }
        finally
        {
            try { writer.Close(); }
            catch { }
            try { reader.Close(); }
            catch { }
        }
    } 
```

我建议您避免使用那种 Hungarian-Case 风格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T06:27:30.823

我不确定这是否是一个选项，但您也可以更改方法的签名以返回

```
IEnumerable<string> 
```

并使用

```
yield return "stringValue"; 
```

在你的循环中。然后调用者可以在常规的 foreach 循环中处理写入。

# python - 获取文件夹中带有标题的文件列表

> ID：14928209
> 
> 赞同：0
> 
> 时间：2013-02-18T01:27:29.617
> 
> 标签：python, google-drive-api

因此，我通过 Google Drive API 获取文件，如下所示：

```
GET https://www.googleapis.com/drive/v2/files/{...}/children?q={...} 
```

但是返回的 JSON 似乎不包含文件的标题。相反，它更像

```
{
    ...
    "items": [[{u'kind': u'drive#childReference', u'childLink': u'https://www.googleapis.com/drive/v2/files/...', u'id': u'...', u'selfLink': u'https://www.googleapis.com/drive/v2/files/.../children/...'}, ...]
} 
```

应用程序是否被迫`get`对每个项目进行 a 以获得标题？这似乎非常低效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:46:46.190

您使用的请求旨在仅列出信息有限的文件夹的子项。也许将[文件列表](https://developers.google.com/drive/v2/reference/files/list)请求与限制性查询一起使用对您很有用，例如

```
https://www.googleapis.com/drive/v2/files?q='0B7Gsb83y7LCsMHUweWFRUTlBeEU'+in+parents&key={YOUR_API_KEY} 
```

这样您将获得有关每个节点的更多信息，您可以使用*fields*参数限制您收到的信息，例如

```
https://www.googleapis.com/drive/v2/files?q='0B7Gsb83y7LCsMHUweWFRUTlBeEU'+in+parents&fields=items%2Fdescription&key={YOUR_API_KEY} 
```

[您可以使用帮助页面](https://developers.google.com/drive/v2/reference/files/list)中提供的“字段编辑器”构建*字段*参数并了解您有哪些选项，只需在那里搜索“使用字段编辑器”

希望这会有所帮助，问候

# javascript - 父子框架之间的Jquery可排序和可拖动

> ID：14928210
> 
> 赞同：5
> 
> 时间：2013-02-18T01:27:34.640
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable, jquery-ui-draggable

我正在尝试在父框架和子框架之间实现 jQuery Draggable|Droppable|Sortable。我有一个这个原型，但是发生了一些奇怪的行为

```
win = document.getElementById('frame').contentWindow;

element = win.document.getElementById('sortable');
$(element).sortable();
console.log(element);
$( "#draggable" ).draggable({
      connectToSortable: $(element),
     iframefix: true,
    helper: function() {return $("<div/>").css('background-color','red');}
}); 
```

iframe 页面还包含

```
$("#sortable").sortable(); 
```

这是 jsfiddle [http://jsfiddle.net/vxAzs/5/](http://jsfiddle.net/vxAzs/5/)

当我尝试将元素放在 iframe 上时它工作正常，但是当我尝试对 iframe 上的元素进行排序时，元素坚持我认为的两个页面的点击事件（所以在我点击两个父页面之前它不会被丢弃和 iframe）。我认为这与父级和 iframe 中的 .sortable() 调用有关，但如果我删除 droppable 停止工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T07:01:40.133

好的，这就是我的操作方法。要在父框架中的元素上创建拖动并将其放入 iframe 中的可排序列表中，我从 iframe 内部在父框架的元素上创建了可拖动

```
win = document.getElementById('<identifier for Iframe>').contentWindow;
win.jQuery(dragelement,parent.document).draggable({
connectToSortable : $("#sortable")
)} 
```

奇迹般有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:03:05.933

在您的代码中注释这一行，

```
//$(element).sortable({iframefix:true}); 
```

这是小提琴：[链接](http://jsfiddle.net/qHWN2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T14:45:46.753

iframeFix 区分大小写：更改

```
iframefix: true, 
```

到

```
iframeFix: true, 
```

# java - 使用 SwingWorker 在 GUI 中添加进度条

> ID：14928213
> 
> 赞同：0
> 
> 时间：2013-02-18T01:27:58.770
> 
> 标签：java, multithreading, swing, user-interface, progress-bar

我使用 SwingWorker 用 Ja​​va Swing API 制作进度条。

我有一个扩展 SwingWorker 的类

```
 class Swinger extends SwingWorker {
private ClassAnalyzer classAnalyzer;

public Swinger(ClassAnalyzer classAnalyzer){
     this.classAnalyzer = classAnalyzer;
}
        @Override
        public Void doInBackground() throws InterruptedException {

            try
        {     
            int progress = 0;
            while (progress < 100) {

 // at this point I make certain elaboration on classAnalyzer                 

                progress++;

                //Call the process method to update the GUI
                publish(progress);

            }                       
        }
        catch(InterruptedException e)
        {
        }
        return null;
    }

    @Override
    protected void process(List chunks) {
     for (Integer chunk : chunks) {
        progressBar.setValue(chunk);

        //if the switchtype checkbox is selected then
        //change the progressbar to a determined type
        //once the progress has reached 50
        if (chunk > 49)
        {
            if (switchType.isEnabled() && switchType.isSelected())
            {
                progressBar.setStringPainted(true);

            }

        }
     }
 }

} 
```

和第二堂课（我正在写一段）

```
 public Tester()
{
    JFrame guiFrame = new JFrame();

    //make sure the program exits when the frame closes
    guiFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    guiFrame.setTitle("Creating a Table Example");
    guiFrame.setSize(700,200);

    //This will center the JFrame in the middle of the screen
    guiFrame.setLocationRelativeTo(null);

    goButton = new JButton("Go");
    goButton.setActionCommand("Go");
    goButton.addActionListener(new ActionListener()
    {

        //When the button is clicked the SwingWorker class is executed and
        //the button is disabled
        @Override
        public void actionPerformed(ActionEvent event)
        {

            progressBar.setStringPainted(progressType.isSelected());
            ClassAnalyzer c = new ClassAnalyzer();
            Swinger task = new Swinger(c);
            task.execute();

            int methods = c.getNumberOfMethods();

            if(methods == 0){
            JOptionPane.showMessageDialogo(null, "methods not found");
            }

            goButton.setEnabled(false);
        }
    });

    } 
```

当我在第二个类的测试器中启动时，在进度条出现之前显示消息“未找到方法”，而我希望出现消息以防万一。该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T01:46:32.160

该类`SwingWorker`还定义了一个[`done`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html#done%28%29)方法，您可以在其中定义任务完成后要做什么。

```
class Swinger extends SwingWorker {

    // all the rest of your code ^^

    @Override
    protected void done() {
        if(this.classAnalyzer.getNumberOfMethods() == 0)
            JOptionPane.showMessageDialog(null, "methods not found");            
    }
} 
```

您不必担心线程问题，因为此方法也在 EDT 上调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T01:49:26.200

`task.execute()`将启动一个后台（将在其中`doInBackground`调用该方法）并且程序将继续执行。

`task.execute()`不是阻塞方法，这是使用它的原因，所以不要阻塞事件调度线程

您可以`SwingWorker`使用`PropertyChangeListener`

```
final ClassAnalyzer c = new ClassAnalyzer();
Swinger task = new Swinger(c);
task.addPropertyChangeListener(new PropertyChangeListener() {
    @Override
    public void propertyChange(PropertyChangeEvent evt) {
        if (evt.getPropertyName().equals("state") && evt.getNewValue().equals(SwingWorker.StateValue.DONE)) {
            int methods = c.getNumberOfMethods();

            if(methods == 0){
                JOptionPane.showMessageDialogo(null, "methods not found");
            }
        }
    }
});
task.execute(); 
```

# c# - 相同 (?) C# 和 VB.NET LINQ 查询返回不同的结果

> ID：14928214
> 
> 赞同：9
> 
> 时间：2013-02-18T01:28:08.870
> 
> 标签：c#, .net, vb.net, linq

可能真的很容易，但我就是看不到它......

我在 LINQ 中复制 MS Access 查询。我首先用 C# 编写它来测试它，因为我更喜欢 C#，然后我将它翻译成 VB.Net 语法。据我所知，这两个查询应该是相同的，但是 C# 查询返回正确的结果，而 VB.NET 一个返回零结果。

任何人都可以看到差异可能在哪里？

C# 查询：

```
var table1 = dc.MainTable.Where(o => o.Year == 423).ToList().Select(o => new
{
    Key_ID = o.Key_ID.Value,
    CropID = o.CropID.Value,
    GroupID = o.GroupID.Value,
    Surface1 = o.Surface1.Value,
    Surface2 = o.Surface2.Value
});

var table2 = dc.OtherTable.Where(o => o.Year == 423).ToList().Select(o => new
{
    Key_ID = o.Key_ID.Value,
    CropID = int.Parse(o.SAKU_CD),
    GroupID = int.Parse(o.SAN_DAN_NO),
    Surface1 = Convert.ToDouble(o.KEIHAN_MEN.Value),
    Surface2 = Convert.ToDouble(o.SAKU_MEN.Value)
});

var output = table1.Join(table2, t1 => new 
{ 
    t1.Key_ID, 
    t1.CropID, 
    t1.GroupID, 
    t1.Surface1, 
    t1.Surface2 
}, 
t2 => new 
{ 
    t2.Key_ID, 
    t2.CropID, 
    t2.GroupID, 
    t2.Surface1, 
    t2.Surface2 
}, (t1, t2) => new OutputDataType() 
{ 
    Key_ID = t1.Key_ID, 
    Year = 423 
}).ToList(); 
```

VB.NET 查询：

```
Dim table1 = MainTable.Where(Function(o) o.Year.Value = 423).ToList().Select(Function(o) New With
{
    .Key_ID = o.Key_ID.Value,
    .CropID = o.CropID.Value,
    .GroupID = o.GroupID.Value,
    .Surface1 = o.Surface1.Value,
    .Surface2 = o.Surface2.Value
}).ToList()

Dim table2 = OtherTable.Where(Function(o) o.Year.Value = 423).ToList().Select(Function(o) New With
{
    .Key_ID = o.Key_ID.Value,
    .CropID = Convert.ToInt32(o.SAKU_CD),
    .GroupID = Convert.ToInt32(o.SAN_DAN_NO),
    .Surface1 = Convert.ToDouble(o.KEIHAN_MEN.Value),
    .Surface2 = Convert.ToDouble(o.SAKU_MEN.Value)
}).ToList()

Dim output = table1.Join(table2, Function(t1) New With
{
    t1.Key_ID,
    t1.CropID,
    t1.GroupID,
    t1.Surface1,
    t1.Surface2
}, Function(t2) New With
{
    t2.Key_ID,
    t2.CropID,
    t2.GroupID,
    t2.Surface1,
    t2.Surface2
}, Function(t1, t2) New OutputDataType With {.Key_ID = t1.Key_ID, .Year = 423}).ToList() 
```

在 C# 和 VB.Net`table1`中`table2`都是一样的，所以它一定是`Join`失败的。

编辑

我只是将`Join`VB.Net 中的更改为查询语法，如下所示：

```
Dim output = From t1 In MainTable
                 Join t2 In OtherTable
                 On t1.Key_ID Equals t2.Key_ID And t1.GroupID Equals t2.GroupID And t1.CropID Equals t2.CropID And t1.Surface1 Equals t2.Surface1 And t1.Surface2 Equals t2.Surface2
                 Select New OutputDataTypeData With {.Key_ID = t1.Key_ID, .Year = 423} 
```

这给出了正确的结果。但我真的不明白这与扩展方法`Join`语法有何不同？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T08:12:40.870

当您使用[`Join`](http://msdn.microsoft.com/en-us/library/bb534675.aspx)扩展方法时，您提供的键`outerKeySelector`和`innerKeySelector`参数将使用该`Equals`方法进行比较。

但是 C# 和 VB.Net 在这里处理**匿名类型**的方式不同：

**C＃**

```
var a = new {Foo = 1, Bar = 2 };
var b = new {Foo = 1, Bar = 2 };
bool result = a.Equals(b); // true 
```

**VB.Net**

```
Dim a = new with {.Foo = 1, .Bar = 2}
Dim b = new with {.Foo = 1, .Bar = 2}
Dim result = a.Equals(b) ' False ' 
```

这里发生了什么事？

C# 使用*值相等*来比较两个对象，比较属性的值。

VB.Net 使用*引用相等*来比较两个对象，因此结果是`False`.

为了让你的代码工作，你必须明确告诉 VB.Net 使用[`Key`](http://msdn.microsoft.com/en-us/library/bb384767.aspx)关键字比较属性：

> 关键属性与非关键属性在几个基本方面不同：
> 
> *   仅比较关键属性的值以确定两个实例是否相等。
> *   关键属性的值是只读的，不能更改。
> *   编译器为匿名类型生成的哈希码算法中仅包含键属性值。

```
Dim a = new with {Key .Foo = 1, Key .Bar = 2}
Dim b = new with {Key .Foo = 1, Key .Bar = 2}
Dim result = a.Equals(b) # True 
```

查询语法有效，因为在这种情况下，您不是在比较匿名类型/对象，而只是比较`int`s 和`double`s。

# asp.net-mvc - 有人可以帮助我了解接口是如何在这里工作的吗？

> ID：14928215
> 
> 赞同：0
> 
> 时间：2013-02-18T01:28:10.693
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我已经实现了以下代码，但不知道接口发生了什么。我有两个项目：Project.Web 和 Project.Core。

在 Project.Web 中，我有一个实现 DataSource 接口的基础结构命名空间：

```
namespace Project.Web.Infrastructure
{
    public class ProjectDataSource : DbContext, IProjectDataSource
    {

        public ProjectDataSource() : base("DefaultConnection") // 1) What is this constructor doing?
        {

        }

        public DbSet<Set> Sets { get; set; }
        public DbSet<Card> Cards { get; set; }

        void IProjectDataSource.Save()   // 2) This method isn't even defined in the interface, what value does it provide?
        {
            SaveChanges();
        }

        IQueryable<Card> IProjectDataSource.Cards // 3) This gets me a list of Cards, but from where?
        {
            get { return Cards; }
        }

        IQueryable<Set> IProjectDataSource.Sets
        {
            get { return Sets; }
        }

    }
} 
```

现在，在 Project.Core 我有 IProjectDataSource，接口：

```
namespace Project.Core
{
    public interface IProjectDataSource
    {
        IQueryable<Card> Cards { get; }
        IQueryable<Set> Sets { get; }
        IQueryable<Side> Sides { get; }
        void Save();
    }
} 
```

在 Web 项目控制器中，我有这样的代码：

```
namespace Project.Web.Controllers
{
    public class SetController : Controller
    {
        private readonly ProjectDataSource _db;

        public SetController(ProjectDataSource db)
        {
            _db = db;
        } 
```

问题 1-3 在代码中，我的最后一个问题是 4) 最后一段代码到底发生了什么？为什么拥有 SetController 的构造函数会使代码耦合度降低？

任何带有清晰示例的指针都会有所帮助——我一直在努力理解接口，因此我可以开始在我的 MVC 应用程序中实现服务层，但我有点挣扎。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:37:18.377

1.  提供调用基类 (DbContext) 构造函数的无参数构造函数，该构造函数采用单个字符串参数，传递值“DefaultConnection”。（您似乎首先使用的是实体框架代码，我相信这是在您的配置文件中用作连接字符串的名称。）

2.  我不明白这个问题 - Save 方法是在界面上定义的？

3.  我相信 Entity Framework Code First 会根据约定在数据库中查询名为“Card”的表。

4.  照原样，它不会使代码耦合度降低，您需要一个构造函数来接受`IProjectDataSource`（接口）而不是`ProjectDataSource`（该接口的实现）。然后，您的代码将不依赖于该具体实现，因此您可以将其换成可以轻松实现该接口的替代实现。（如果您在应用程序中使用诸如[Ninject之类的依赖注入库来满足依赖关系并创建控制器，这将更容易实现。）](http://www.ninject.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T07:55:19.300

关于问题 2) 和 3) - .Save 和 .Cards 在 IProjectDataSource（您的自定义数据访问接口）和 DbContext（您从中利用功能的基类）上定义。它们都是公共的并且具有相同的签名。您要确保它们是通过 IProjectDataSource 而不是 DbContext 访问的——因此是前面的 IProjectDataSource。这是要走的路，针对接口进行编程。该功能来自 DbContext，它是“基础”实现。

乔恩已经回答了 1 和 4。

# postgresql - 如何在 PostgreSQL 存储过程中使查询原子化？

> ID：14928216
> 
> 赞同：5
> 
> 时间：2013-02-18T01:28:16.877
> 
> 标签：postgresql, concurrency, atomic, plpgsql

我认为如果一个进程从唯一的用户 ID 中选择余额并尝试进行插入，那么余额将被错误地更新，但另一个进程在此之前读取了余额。我该如何解决？

```
CREATE OR REPLACE FUNCTION incBalance(INTEGER, BIGINT) RETURNS void AS $$   
DECLARE   
    balanceRecord record;
    newBalance bigint;  
BEGIN   
    FOR balanceRecord IN    
        SELECT balance FROM users WHERE userid = $1
    LOOP
        newBalance := balanceRecord.balance + $2;
        UPDATE users SET balance = newBalance WHERE userid = $1;   

    END LOOP; 
    RETURN;   
END;   
$$ LANGUAGE plpgsql; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T04:08:02.637

对于这个特定的查询，您可以将其重写为单个 SQL 语句：

```
UPDATE users SET balance = balance + $2 WHERE userid = $1; 
```

更一般地说，您希望让事务系统处理原子性和数据一致性。在 Postgres 中，存储过程总是在事务上下文中执行——如果你不是从显式事务块调用它，它会为你创建一个。

[http://www.postgresql.org/docs/14/static/sql-set-transaction.html](http://www.postgresql.org/docs/14/static/sql-set-transaction.html)讨论了如果默认值不够严格，如何设置隔离级别。

您将需要阅读[http://www.postgresql.org/docs/14/static/mvcc.html](http://www.postgresql.org/docs/14/static/mvcc.html)以帮助确定适合特定存储过程的级别。请注意第 13.2.2 和 13.2.3 节，它们警告说更高的隔离级别会受到序列化异常的影响，这些异常应该被捕获并且事务重试作为确保一致性的机制。

如果我有这样的过程，我会在过程的第一个 BEGIN 块的开头添加一条语句，以确保事务在足够的隔离级别上运行。如果事务中还没有做**任何**工作，它会在必要时提出它。如果调用上下文是一个**已**完成工作的事务，如果封闭的事务块尚未充分提高隔离级别，则会导致错误。如果隔离级别已经高于您在此处指定的级别，它不会降低隔离级别**。**

```
SET TRANSACTION ISOLATION LEVEL REPEATABLE READ; 
```

# clojure - 在 Clojure 中没有标准库的情况下反转序列

> ID：14928217
> 
> 赞同：2
> 
> 时间：2013-02-18T01:28:22.160
> 
> 标签：clojure, reverse

我正在尝试解决 4clojure.org 上设置的问题。我在 23 号（在不使用“反向”功能的情况下反转字符串）。我收到此错误：

> 不知道如何从：java.lang.Long 创建 ISeq

这是我的代码：

```
(fn rev [coll] 
  (if (= () coll)
    nil
    ((cons(rev (rest coll))(first coll))))) 
```

现在编辑到这个：

```
(fn rev [coll] 
  (if (empty? coll)
    coll
    (concat(rev (rest coll))((list first coll))))) 
```

大概这是从试图将序列的头部到序列的其余部分的结尾。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T01:57:56.043

This error is because you are trying to `cons` a `seq` to an element rather than an element to a `seq`. In other words, your arguments to `cons` are in the wrong order. But, if you corrected the order, you'd just be piecing a list back together in the same order.

Using the same general idea you have, you could turn the second argument into a list by wrapping it in `(list ...)` and then `concat` the two lists together:

```
(fn rev [coll] 
  (if (empty? coll)
    coll
    (concat
      (rev (rest coll))
      (list (first coll))))) 
```

You'll discover more concise solutions as you go along.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T01:53:59.850

in clojure的第二个参数`cons`应该是一个序列，然而，`(first coll)`它不是一个序列，而是一个集合的一个元素。也许您传递了数字集合，因此`(first coll)`吐出一个数字（长），而 clojure 无法`ISeq`从该数字创建。

```
user=> (doc cons)
-------------------------
clojure.core/cons
([x seq])
  Returns a new seq where x is the first element and seq is
    the rest. 
```

您可以像下面这样简单地实现反向：

```
(fn rev [coll]
    (reduce conj () coll)) 
```

我检查了上面的代码，它通过了 4clojure 站点中的所有三个测试用例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-14T20:00:37.280

像 OP 一样，我在尝试使用`when-let`and `if`、`next`and`last`等构建递归解决方案时感到沮丧。所以现在我试图理解@ntalbs 的答案，看看我是否可以更进一步，研究[http 上的 Clojure 文档： //clojuredocs.org/quickref/Clojure%20Core](http://clojuredocs.org/quickref/Clojure%20Core)。

**第 1 部分 - 观察：**
`cons`是列表的函数，而是`conj`集合的通用函数，`concat`并列在序列的“使用（修改）”下，但它返回一个惰性序列。那么这些东西在实践中有何不同呢？

1.  参数顺序很重要：你不能`conj`一个值和一个序列，只有一个序列和一个值。因为`cons`情况正好相反。`concat`似乎更宽容。

    ```
    user=> (type (conj 1 '(2 3 4 5)))
    ClassCastException java.lang.Long cannot be cast to clojure.lang.IPersistentCollection  clojure.core/conj (core.clj:83)
    user=> (type (cons '(2 3 4 5) 1))
    IllegalArgumentException Don't know how to create ISeq from: java.lang.Long  clojure.lang.RT.seqFrom (RT.java:505) 
    ```

2.  三种不同的返回类型：Cons、PersistentList 或 LazySeq

    ```
    user=> (type (cons 1 '(2 3 4 5)))
    clojure.lang.Cons
    user=> (type (conj '(2 3 4 5) 1))
    clojure.lang.PersistentList
    user=> (type (concat 1 '(2 3 4 5)))
    clojure.lang.LazySeq 
    ```

3.  不同类型集合的不同行为：

    ```
    user=> (cons 3 (sorted-set 5 7 2 7))
    (3 2 5 7)     ; type = Cons, 3 is just appended to the list, 
    user=> (conj (sorted-set 5 7 2 7) 3)
    #{2 3 5 7}    ; type = PersistentTreeSet, with 3 in the correct position.
    user=> (concat 3 (sorted-set 5 7 2 7))   ; LazySeq can't be directly returned, so...(order doesn't matter)
    IllegalArgumentException Don't know how to create ISeq from: java.lang.Long  clojure.lang.RT.seqFrom (RT.java:505) 
    ```

在我看来，`conj`具有最直接的行为，所以我会优先使用它，除非我真的想要一个惰性序列或特别是一个列表。

**第 2 部分——@Ramy 的“对我来说太密集”** 理解@ntalbs 的解决方案。

上面的描述表明这`conj`是将东西添加到集合中的最合适的方法，这正是@ntalbs 的解决方案所做的。的用法`reduce`位于[http://clojuredocs.org/clojure_core/clojure.core/reduce](http://clojuredocs.org/clojure_core/clojure.core/reduce) 这是一种在将集合中的值收集在一起的同时应用函数的有效方法。

```
(reduce f val coll) 
```

因此，`reduce`将适用`f`于集合的每个成员，以`val`. 因此，该调用`(reduce conj () coll)`获取集合并首先应用`(conj () (first coll))`。然后它适用`(conj result (second coll))`, 和`(conj result (third coll))`, 等等, 其中`result`是上一步的结果。

`reduce`看起来是一个非常强大的命令。

**第 3 部分——又一个解决方案**

```
(fn rev [coll]
    (into () coll)) 
```

从文档来看，`into`似乎是`(reduce conj to-coll from-coll)`. 我不确定这是优雅还是密集。不过，它确实可以用最少的击键来工作。

# javascript - 使用 SQLite 从数据库中列出单独的表数据

> ID：14928218
> 
> 赞同：0
> 
> 时间：2013-02-18T01:28:38.917
> 
> 标签：javascript, database, html, sqlite

我目前正在使用 HTML5 和 javascript 创建一个应用程序。我正处于编写评估代码的阶段，老师可以检查学生的进度。我正在为每个即时注册的学生创建一个单独的表格（这不会是每个教室的大量数字）。现在我需要在同一屏幕上打印每个表中的所有数据，目前我正在运行它，因此它会打印我数据库中每个表的名称，但我无法进一步了解：

```
var tableName = db.execute("SELECT name FROM sqlite_master WHERE type='table' ORDER BY name");

var tbl = document.getElementById('tbl');

while (tableName.isValidRow()) {

var tr = document.createElement('tr');
var name = tableName.fieldByName('name');
tr.appendChild(document.createTextNode(name));
tbl.appendChild(tr);
tableName.next();

}

} 
```

我想我必须在初始循环中创建另一个 while 循环，但尝试过但没有成功。

# keyboard-shortcuts - 如何将快捷方式映射到 xmonad 或 xwindows 中的任意键序列？

> ID：14928221
> 
> 赞同：0
> 
> 时间：2013-02-18T01:29:01.757
> 
> 标签：keyboard-shortcuts, shortcut, xmonad

我有一个快捷方式，我想在使用 xmonad 时在任何 chrome 实例上执行（或者通用的 xwindows 解决方案会很方便）

基本上它与 chrome/firefox/opera 相同的键序列“分离当前浏览器选项卡并发送到屏幕 n”

伪代码

```
//detach current tab and send to screen n
if current_window_is_browser
     map <alt-t>6 <ctrl-l><ctrl-c><ctrl-w><ctrl-n><ctrl-v><enter><alt-shift-6> 
```

我玩弄了标签分离脚本，但它们似乎不是最新的（esp chrome）。无论如何，我希望所有浏览器都使用相同的命令。

有任何想法吗？干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T18:56:07.857

您可能想看看[xdotool](http://www.semicomplete.com/projects/xdotool/xdotool.xhtml)

通过 apt 安装：sudo apt-get install xdotool

使用 xdotool 你可以：

```
xdotool key alt+t 6 ... 
```

当然，您可以将 xdotool 保存为脚本并在 xmonad 中使用键绑定执行它。

# websocket - TCP 套接字到 Websocket？

> ID：14928222
> 
> 赞同：13
> 
> 时间：2013-02-18T01:29:04.703
> 
> 标签：websocket

那里有很多 websocket -> 套接字包装器（例如[websockify](https://github.com/kanaka/websockify)），但是那里有相反的东西吗？具体来说，我希望能够使用应用程序连接到 TCP 套接字，并将代理转换为 websocket 并转换到另一个 websocket 服务器。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T16:39:12.853

从 WebSocket 客户端到 TCP 服务器的桥接是一种通用的解决方案，将较低级别的 TCP 协议封装到较高级别的 WebSocket 协议中。它允许浏览器（或其他 websocket 客户端）与任意 TCP 服务器通信。请注意，客户端 (JavaScript) 应用程序必须仍然能够解码/编码 TCP 服务器使用的协议。

反向操作不是通用的，需要对从 TCP 客户端应用程序到桥接器的消息进行特殊框架，以便桥接器知道如何将 WebSocket 消息编码到 TCP 服务器。WebSockets 是基于消息的传输，而 TCP 是较低级别的流传输。TCP 传输层在协议本身中没有消息的概念，因此必须在高层处理。换句话说，您需要做的工作几乎与直接在您的应用程序中实现 WebSocket 客户端所需的工作量一样多。实际上，直接实现可能较少，因为已经有适用于大多数流行语言的 WebSocket 客户端库。

如果不更改客户端和网桥（以添加消息边界和操作码信息），您将无法通过网桥将预先存在的 TCP 客户端连接到现有的 WebSocket 服务器，或者您将需要一个忽略 WebSiocket 的特殊 WebSocket 服务器消息边界并将传入数据视为流（在更高层处理消息解析）。

也许您可以给出一个您认为这可能有用的用例？

**免责声明**：我制作了 websockify。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-16T16:43:38.173

我不确定你在寻找什么，但如果将来对某人有帮助，我会写下我为解决我的问题所做的事情。

**我的问题：** 我希望能够在我的 Web 应用程序的服务器上托管 noVNC，并且我希望非 websocket vnc 服务器能够在不使用 websockify 的情况下理解它。

**我的解决方案：** 我使用[ws-tcp-bridge](https://github.com/andrewchambers/ws-tcp-bridge) node.js 模块来桥接 websocket 端口<--lport>，noVNC 客户端将在该端口与 vnc tcp 服务器的主机连接。

**示例：** 这通过从 vncserver 的机器上运行以下命令来实现：

`ws-tcp-bridge --method=ws2tcp --lport=5555 --rhost=127.0.0.1:5902`

这样我就能够在 port 托管一个非 websocket vncserver`5902`并通过 noVNC 在 port 与它连接`5555`。

[没有对此进行太多测试，但与x11vnc](http://www.karlrunge.com/x11vnc/) vnc 服务器配合得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T08:45:20.703

我不完全清楚你在问什么，但 WebSocket API 主要适用于客户端。

如何编写服务器端脚本以及使用什么语言完全取决于您。在编写服务器端脚本时，您应该能够选择是否使用 TCP 套接字等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-20T16:37:48.850

这是我编写的这种代理的基本实现： [https ://github.com/jimparis/unwebsockify/](https://github.com/jimparis/unwebsockify/)

正如@kanaka 所描述的，从 TCP 到 Websockets 不是通用操作，但是如果您只是想将纯字节流发送到期望的服务器，这将起作用。

从自述文件：

> Unwebsockify 是一个 TCP 到 WebSocket 代理/桥接器。它接受普通的 TCP 连接并连接到 WebSocket 服务器，有效地将 WS 支持添加到本机不支持它的客户端。它本质上与 websockify 正好相反。

还有一个有用的例子：

> Eclipse Mosquitto 在服务器端支持 WebSocket，但在客户端不支持（用于桥接）。要通过 websocket 桥接两个 MQTT 实例，请在客户端上运行 unwebsockify：
> 
> `venv/bin/python unwebsockify.py --port 13232 --subproto mqtt wss://server/`
> 
> 并使用例如配置和运行 MQTT 客户端实例
> 
> `address 127.0.0.1:13232`

# asp.net-mvc - Azure 和传统托管 / 分布式和传统身份验证

> ID：14928224
> 
> 赞同：1
> 
> 时间：2013-02-18T01:29:23.207
> 
> 标签：asp.net-mvc, authentication, azure, dotnetopenauth, federated-identity

为了构建一个 ASP.NET MVC3 应用程序框架，我想要一个身份验证机制：

*   支持 SSO / 联合安全性，例如通过 OAuth 或 OpenID。
*   也为支持本地帐户留下了空间。
*   在传统的托管环境中工作，或者可以利用 Azure 中的独特功能。
*   避免了[MembershipProvider 和 SimpleMembership](http://brockallen.com/2012/09/02/think-twice-about-using-membershipprovider-and-simplemembership/)的陷阱。
*   适用于 .net 4.5 / MVC 4
*   适用于 Azure Web 角色或 Azure 网站。
*   奖励：适用于 MVC 3

我认为没有一个单一的身份验证解决方案可以解决这些目标。如果我的 Web 应用程序框架可配置为使用以下任一项，那么我似乎可以最好地实现这些目标：

*   [访问控制服务 (ACS) 2.0 版](http://msdn.microsoft.com/en-us/library/windowsazure/gg429786.aspx)，享受[新的“身份和访问”Visual Studio 2012 工具](http://yorkporc.wordpress.com/2012/11/04/visual-studio-websso-with-mvc4-dotnet-4-5-identity-model-and-acs-v2/)
*   [DotNetOpenAuth](http://www.dotnetopenauth.net/documentation/securityscenarios/)或者[DotNetOpenAuth.AspNet](https://nuget.org/packages/DotNetOpenAuth.AspNet)

所以我的问题是：

1.  我支持两者的计划是否适合我的既定目标？或者是否可以使用 ACS 获得所有目标？例如，ACS 是否提供自己的免服务“独立”程序集，在传统托管服务提供商上使用时可以发挥与 DotNetOpenAuth 相同的作用？
2.  为了轻松启用，我需要触摸哪些配置“点”和部分？

    1.  这可以简单地使用 XDT 并根据构建目标转换 web.config 来完成吗？
    2.  ACS 是否使用可识别的挂钩点（例如 HTTPModule）来重定向到身份验证服务 - 还是使用更深层次的工具集？

我只是想确定我实现目标的策略是相当可靠的，并且我知道我要做什么。我也希望这两种方法仍然适用于标准的、可声明的 RolePrincipal。这样，我的授权机制可以保留给我的 Web 应用程序框架进行内部处理。

# c# - 为什么当变量不为空时显示 NullReferenceException？

> ID：14928225
> 
> 赞同：7
> 
> 时间：2013-02-18T01:29:31.657
> 
> 标签：c#, .net-4.0, visual-studio-2012, nullreferenceexception, visual-studio-debugging

![NRE](../Images/bc24746f688ce6eaa454b8cd399087c8.png)

为什么 VS 2012 将 Type 变量显示为 NullReferenceException，而它也显示为`value = "Retailer"`.

![在此处输入图像描述](../Images/aa73a542390939f17a8d7d571b9974d4.png)

我有一个新生儿，我正在努力限制睡眠，所以如果我在这里遗漏了一些明显的东西，我深表歉意。LoggedInUser.Employer 对象已被实例化，这条线在 1/2 的时间内工作正常。但随后它开始破裂。不确定这是否有帮助 - 需要睡觉......

```
 private string _type;
    public string Type
    {
        get { return _type; }
        set
        {
            if (value != null)
            {
                TypeEnum = (Constants.BusinessType)Enum.Parse(typeof(Constants.BusinessType), value, true);
                _type = value;
            }
        }
    } 
```

![在此处输入图像描述](../Images/f0c928c447a1bdb8035764c22c1bb20b.png) 我开始怀疑这是否是一个跨线程问题...

![在此处输入图像描述](../Images/fe8efa55d5da8837746e100e5471c8a3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T21:23:58.443

`ExecutionContext`负责存储实例的 ASP.NET`HttpContext.Current`不会自然地“流向”其他线程。从您的错误堆栈跟踪来看，您正在使用 ASP.NET MVC，这是一个抽象出`HttpContext`. 您可能来自 WebForms 背景，直接使用它很常见？

## 同步上下文

[这篇文章](http://blogs.msdn.com/b/pfxteam/archive/2012/06/15/executioncontext-vs-synchronizationcontext.aspx)提供的细节比我能合理介绍的要多得多。不过，与您的情况最相关的一些要点是：

*“ExecutionContext 都是关于‘环境’信息的，这意味着它存储与当前环境或你正在运行的‘上下文’相关的数据。”*

这种“环境”信息是……`HttpContext.Current`及其各种属性（包括`Session`）。

*“这意味着我们用来控制执行细节的环境上下文不再可行，因为 TLS 不会在这些异步点之间“流动”。”*

TLS 是线程本地存储（`HttpContext.Current`等）。简而言之，async = 可能会丢失`HttpContext.Current`。

## MVC 方式

还记得我说过 MVC 主要是抽象的`HttpContext`吗？

`Session`在[Controller.Session](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.session%28v=vs.100%29.aspx)中。（很抱歉，我尚未在异步控制器操作中对此进行测试，因此目前无法验证它是否适合您的需求，或者您是否需要额外的工作才能使其配合。）

`Request`在[Controller.Request中](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.request%28v=vs.100%29.aspx)

`User`在[Controller.User中](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.user%28v=vs.100%29.aspx)

还有其他...[检查出来](http://msdn.microsoft.com/en-us/library/dd493088%28v=vs.100%29.aspx)。

## 会话替代方案？

你考虑过替代品吗？您不必走太远就能找到暗示 Session + ASP.NET MVC 是个坏主意的文章。我不会对它是否是“坏事”这样笼统的东西进行权衡，但看看你的例子，在我看来你正在处理用户个人资料数据，而不是“会话”数据。

Session 并不是缓存用户配置文件信息的正确位置。就此而言，缓存它是否合适？*会话期间*用户配置文件是否会更改？如果他们自己更改，您会重置会话吗？如果单独的管理员用户在登录时更改了他们的个人资料怎么办？

探索替代方案超出了*此*问题的范围，但请注意您可能在这里尝试解决错误的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T20:29:00.473

String.IsNullOrEmpty 不会在字符串上引发此异常，即使它为 null，所以 Type 属性不是问题。LoggedInUser 在没有错误之前使用了 2 行，因此将 Employer 属性作为罪魁祸首（除非 String 不是内置的 String）。

您可以在其上添加对 null 的检查以确认：

```
if (LoggedInUser.Employer != null) 
{
    if (String.IsNullOrEmpty(LoggedInUser.Employer.Type))
    {
        ...  
    }
}
else
{
    // debug output
} 
```

假设 Employer 为 null，您需要在此处提供该属性定义。因为您只有在多个用户登录时才能看到这一点，所以我怀疑它不应该出现在某个地方的静态声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:03:09.357

我的猜测是您在某处声明了一个名为“String”的字段 - 尝试使用小写的“string.IsNullOrEmpty”或“System.String.IsNullOrEmpty”作为一个......

# android - 清理数据框

> ID：14928230
> 
> 赞同：1
> 
> 时间：2013-02-18T01:30:04.533
> 
> 标签：android

我有一个包含 2500 行和 14 列的数据框。其中一列被命名`Interest.Rate`，其中每个条目后跟一个`%`符号。您能否告诉我如何从该列`%`的所有条目中删除该标志。`Interest.Rate`

谢谢

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:11:50.313

我不是 android 程序员，但如果您的数据框是一个文本文件，例如调用`data-frame.txt`并由一个空格分隔：

```
Sth Interest.Rate Sth
1 2% 3
4 5% 6 
```

您可以`awk`为此使用：

```
awk "/Interest/{print} !/Interest/{gsub(/%/,\"\");print}" data-frame.txt 
```

或者，如果您有一个不同于空格的字段分隔符（例如，_），您可以通过以下方式告诉 awk：

```
awk -F"_" "/Interest/{print} !/Interest/{gsub(/%/,\"\");print}" data-frame.txt 
```

测试系统：windows xp sp3、cmd.exe、msys-1.0 awk

# clojure - 如何从 Clojure 调用 Java 类的 eval 方法？

> ID：14928235
> 
> 赞同：2
> 
> 时间：2013-02-18T01:31:27.260
> 
> 标签：clojure, clojure-java-interop

如果某个 Java 类有一个名为“eval”的方法，我如何从 Clojure 调用它？

执行以下操作似乎从 clojure.core 调用 eval 方法，而不是 TestObject 的 eval：

```
(defn test[x] 
  (let [obj (new TestObject)] 
    (. obj eval x))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:37:30.247

```
(defn test[x] 
  (let [obj (new TestObject)] 
    (.eval obj x))) 
```

**编辑。**然而，这很奇怪。Dot 特殊形式`.`需要一个符号作为第二个参数，并且这个符号的名称被解释为类方法/字段的名称。因此`eval`无法评估`eval`您的情况。

# jira - 在 .NET 应用程序中使用 Jira API（不仅限 SOAP/REST）

> ID：14928236
> 
> 赞同：1
> 
> 时间：2013-02-18T01:31:32.347
> 
> 标签：jira

我正在通过 Web 服务将 Jira 客户端用于 .NET；这使我能够执行各种任务，例如检索和更新问题、字段等。问题是当检索问题时，一些问题字段采用 wiki 文本格式，例如

```
* Heading
*# point 1
*# point 2 
```

我需要将此格式转换为纯文本或 HTML。在做了一些研究之后，我发现这个功能是由 JIRA Api 提供的

类 AtlassianWikiRenderer [http://docs.atlassian.com/jira/latest/com/atlassian/jira/issue/fields/renderer/wiki/AtlassianWikiRenderer.html](http://docs.atlassian.com/jira/latest/com/atlassian/jira/issue/fields/renderer/wiki/AtlassianWikiRenderer.html)

我的问题是如何 在 .NET 项目中使用[http://docs.atlassian.com/jira/latest/overview-summary.html中指定的功能（AtlassianWikiRenderer）或其他功能？](http://docs.atlassian.com/jira/latest/overview-summary.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:19:50.187

除非您在应用程序和 JIRA 之间提供额外的通信方法，否则您不能使用 .NET 应用程序中的 JIRA API 类。这可能是：

*   扩展 JIRA SOAP 服务
*   将您自己的 REST 服务实现为插件

另一种方法是将问题视图页面获取为 HTML 并对其进行解析。这不是很好，但它有效。甚至一些商业产品也使用这种方式。

# bash - Bash：删除名称末尾的数字。

> ID：14928238
> 
> 赞同：1
> 
> 时间：2013-02-18T01:31:45.993
> 
> 标签：bash, file-rename

我有类似的文件：alien-skull-2224154.jpg snow-birds-red-arrows-thunderbirds-blue-angels-43264.jpg dead-space-album-1053.jpg

如何在 bash 中删除 .jpg 之前的“ID”字符串 id 始终由前面的单词用“-”分隔，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T01:50:17.710

这是使用[bash 参数替换](http://www.cyberciti.biz/tips/bash-shell-parameter-substitution-2.html)的一种方法：

```
for i in *.jpg; do mv "$i" "${i%-*}.jpg"; done 
```

或者对于更一般的情况（即，如果您有其他文件扩展名），请尝试：

```
for i in *.*; do mv "$i" "${i%-*}.${i##*.}"; done 
```

结果：

```
alien-skull.jpg
dead-space-album.jpg
snow-birds-red-arrows-thunderbirds-blue-angels.jpg 
```

* * *

根据下面的评论，试试这个 bash 脚本：

```
declare -A array

for i in *.*; do

    j="${i%-*}.${i##*.}"

    # k="$j"
    # k="${i%-*}-0.${i##*.}"

    for x in "${!array[@]}"; do

        if [[ "$j" == "$x" ]]; then
            k="${i%-*}-${array[$j]}.${i##*.}"
        fi
    done

    (( array["$j"]++ ))

    mv "$i" "$k"
done 
```

请注意，您需要取消注释值，`k`具体取决于您希望如何格式化文件名。如果取消注释第一行，则只会增加重复的基本名称：

```
dead-space-album.jpg
dead-space-album-1.jpg
dead-space-album-2.jpg
dead-space-album-3.jpg 
```

如果取消注释第二行，您将获得以下信息：

```
alien-skull-0.jpg
alien-skull-1.jpg
alien-skull-2.jpg
alien-skull-3.jpg 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T01:40:08.177

假设所有文件 ID 都是数字，您可以使用 rename 命令。

```
rename 's/-\d+//' *.jpg 
```

这可能不适用于每个 *nix，因此这里有一个有用的替代链接： [http ://www.cyberciti.biz/tips/renaming-multiple-files-at-a-shell-prompt.html](http://www.cyberciti.biz/tips/renaming-multiple-files-at-a-shell-prompt.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T14:51:12.533

这是运行良好的最终代码。谢谢大家的时间！

```
for i in *.jpg; 
do

if [[  -e "${i%-*}.jpg" ]]; then
    num=1
    while [[ -e "${i%-*}-$num.jpg" ]]; do
        (( num++ ))
    done
 mv "$i" "${i%-*}-$num.jpg";

else 
rename 's/-\d+//' *.jpg
fi
 done 
```

# javascript - Javascript表单验证不检查给定变量

> ID：14928241
> 
> 赞同：0
> 
> 时间：2013-02-18T01:32:38.010
> 
> 标签：javascript, validation

我正在尝试使用 Javascript 验证表单，但密码长度检查不起作用，但从我所看到的代码中没有明显的错误。

形式：

```
<form id="reg_form" onsubmit="return false;">
        <input type="text" maxlength="255" placeholder="Email..." name="email" /><br />
        <input type="password" placeholder="Password..." name="password" /><br />
        <input type="text" maxlength="30" placeholder="Username..." name="username" /><br />
        <input type="text" maxlength="255" placeholder="First Name..." name="fname" /><br />
        <input type="text" maxlength="255" placeholder="Last Name..." name="lname" /><br />

        <!-- Start Div With reCaptcha In -->

        <!-- End Div With reCaptcha In -->

        <input type="submit" value="Sign-up" onclick="register(this.form, this.form.email, this.form.password, this.form.username, this.form.fname, this.form.lname);" />
    </form> 
```

Javascript函数：

```
<script>
  function register(form, email, password, username, fname, lname) {
    document.getElementById("reg_error").style.display = "block";
    if (email.value.length < 1) {
      document.getElementById("reg_error").innerHTML = "Please Enter An Email Address!";
      return;
    }
    if (password.value.length < 6) {
      document.getElementById("reg_error").innerHtml = "Passwords Must Be Longer Than 6 Characters!";
      return;
    }
    if (username.value.length < 5 || username.value.length > 30) {
      document.getElementById("reg_error").innerHTML = "Username Must Be Between 5 And 30 Characters Long!";
      return;
    }
    if (fname.value.length < 1) {
      document.getElementById("reg_error").innerHTML = "Please enter a first name!";
      return;
    }
    if (lname.value.length < 1) {
      document.getElementById("reg_error").innerHTML = "Please enter a last name!";
      return;
    }
    var info = new FormData();
    info.append("email", email.value);
    info.append("p", hex_sha512(password.value));
    password.value = "";
    info.append("username", username.value);
    info.append("fname", fname.value);
    info.append("lname", lname.value);
    if (window.XMLHttpRequest) {
      register_ = new XMLHttpRequest();
    } else {
      register_ = new ActiveXObject("Microsoft.XMLHTTP");
    }
    register_.onreadystatechange = function () {
      if (register_.readyState == 4 && register_.status == 200) {
        document.getElementById("reg_error").innerHTML = register_.responseText;
      }
    }
    register_.open("POST", "scripts/signup.php", true);
    register_.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    register_.send(info);
  }
</script> 
```

除了查询密码值长度的语句之外，所有 if 语句都能正常工作。任何帮助，将不胜感激。当我通过 console.log() 测试它们时，这些值被正确传递；

我正在使用 HTML5 样板。我不想使用 jQuery 来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:36:04.047

`innerHTML`您在这部分拼写错误 ：

```
if (password.value.length < 1) {
    document.getElementById("reg_error").innerHtml = ... 
```

将其更改为：

```
document.getElementById("reg_error").innerHTML = ... 
```

# ios - AVPlayer - UILabel 在视频中不可见

> ID：14928243
> 
> 赞同：8
> 
> 时间：2013-02-18T01:33:38.267
> 
> 标签：ios, objective-c, avplayer

```
 NSString *urlPath;
    NSURL *videoUrl;

    urlPath = [[NSBundle mainBundle] pathForResource:@"fogLoop" ofType:@"mp4"];
    videoUrl = [NSURL fileURLWithPath:urlPath];

    avPlayer = [AVPlayer playerWithURL:videoUrl];
    avPlayerLayer = [AVPlayerLayer playerLayerWithPlayer:avPlayer];

    avPlayerLayer.frame = videoView.layer.bounds;

    avPlayerLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;

    [videoView.layer addSublayer: avPlayerLayer];

    avPlayer.actionAtItemEnd = AVPlayerActionAtItemEndNone;

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(playerItemDidReachEnd:)
                                                 name:AVPlayerItemDidPlayToEndTimeNotification
                                               object:[avPlayer currentItem]];

    [avPlayer play]; 
```

我在这个视图上有几个 UILabel。我真的只是想把视频作为背景元素。使用此代码，它似乎可以播放所有 UI 元素。如何让它进入后台？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T09:21:12.683

您可以使用视图层的 zPosition 属性（它是一个 CALayer 对象）来更改视图的 z-index。

```
 theView.layer.zPosition = 1; 
```

并把标签放在前面

# java - 带有android错误的SQLite

> ID：14928250
> 
> 赞同：-2
> 
> 时间：2013-02-18T01:35:07.837
> 
> 标签：java, android, sqlite

我对编程和安卓比较陌生，我正在开发一个小记事本应用程序。我从网上的教程中学习了如何使用 SQLite，但是出了点问题……当我运行应用程序时，它一直告诉我名称中没有列……但是有！我究竟做错了什么？我检查了几十次语法，我像教程一样一一做。我知道这个问题不止一次在这里，但是在阅读答案时，我仍然找不到解决我的具体问题的方法。基本上我只是添加了 2 个带有标题和文本的注释，并希望在 ListView 的主要活动中显示它们，但由于数据库问题没有显示任何内容。
非常感谢您的帮助:) 提前谢谢

这是课程：

```
import java.util.ArrayList;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseManager extends SQLiteOpenHelper{

    private static final String DATABASE_NAME = "notesDb";
    private static final int DATABASE_VERSION = 1;

    private static final String TABLE_NAME = "notes";
    private static final String NOTE_ID = "_id";
    private static final String NOTE_TITLE = "title";
    private static final String NOTE_TEXT = "text";
    private static final String NOTE_CREATION_DATE = "creationDate";

    public DatabaseManager(Context context){

        super(context, DATABASE_NAME, null, DATABASE_VERSION);

    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String CREATE_NOTES_TABLE = "CREATE TABLE "+TABLE_NAME+"(" + NOTE_ID +" INTEGER PRIMARY KEY,"+ NOTE_TITLE + "TEXT,"
                + NOTE_TEXT + "TEXT," + NOTE_CREATION_DATE + "TEXT" + ")";
        db.execSQL(CREATE_NOTES_TABLE);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS" + TABLE_NAME);
        onCreate(db);

    }

    public void addNote(Note note){
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(NOTE_TITLE, note.getTitle());
        values.put(NOTE_TEXT, note.getText());
        values.put(NOTE_CREATION_DATE, note.getCurrentTime());

        db.insert(TABLE_NAME, null, values);
        db.close();

    }

    public void deleteNote(Note note){
        SQLiteDatabase db = this.getWritableDatabase();

        db.delete(TABLE_NAME, NOTE_ID + "?=",new String[]{String.valueOf(note.getId())} );
        db.close();
    }

    public String[] listNotes(){
        ArrayList<String> tempArray = new ArrayList<String>();
        String[]notesArray = new String[0];
        String sqlQuery = "SELECT * FROM " + TABLE_NAME;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor c = db.rawQuery(sqlQuery,null);

        if(c.moveToFirst()){
            do{
                tempArray.add(c.getString(c.getColumnIndex(NOTE_TITLE)));
            }
            while(c.moveToNext());
        }
        c.close();
        notesArray = tempArray.toArray(notesArray);
        return notesArray;
    }

} 
```

笔记对象：

```
import java.util.Calendar;

public class Note {

    private int id;
    private String text;
    private String title;
    private String creationTime;
    private String currentTime;

    public Note(){

    }

    public String getCurrentTime(){
        return getDayOfMonth()+"/"+getMonth()+"/"+getYear()+" "+getDay()+", "+getHour()+":"+getMinutes();
    }

    public String getMonth(){
        int currentMonth = Calendar.getInstance().get(Calendar.MONTH);
        String month = new String();
        switch(currentMonth){
        case 0:
            month = "01";
            break;
        case 1:
            month = "02";
            break;
        case 3:
            month = "04";
            break;
        case 4:
            month = "05";
            break;
        case 5:
            month = "06";
            break;
        case 6:
            month = "07";
            break;
        case 7:
            month = "08";
            break;
        case 8:
            month = "09";
            break;
        case 9:
            month = "10";
            break;
        case 10:
            month = "11";
            break;
        case 11:
            month = "12";
            break;
        }
        return month;
    }

    public String getDayOfMonth(){
        int currentDayOfMonth = Calendar.getInstance().get(Calendar.DAY_OF_MONTH);
        String dayOfMonth = new String();
        if(currentDayOfMonth<10){
            dayOfMonth = "0"+currentDayOfMonth;
        }
        else{
            dayOfMonth = ""+currentDayOfMonth;
        }
        return dayOfMonth;
    }

    public String getYear(){
        String year = ""+Calendar.getInstance().get(Calendar.YEAR);
        return year;
    }

    public String getDay(){
        int currentDay = Calendar.getInstance().get(Calendar.DAY_OF_WEEK);
        String day = new String();
        switch(currentDay){
        case 1:
            day = "Sun";
            break;
        case 2:
            day = "Mon";
            break;
        case 3:
            day = "Tue";
            break;
        case 4:
            day = "Wed";
            break;
        case 5:
            day = "Thu";
            break;
        case 6:
            day = "Fri";
            break;
        case 7:
            day = "Sat";
            break;

        }
        return day;
    }

    public String getHour(){
        int currentHour =  Calendar.getInstance().get(Calendar.HOUR_OF_DAY);
        String hour = new String();
        if(currentHour<10){
            hour = "0"+currentHour;
        }
        else{
            hour = ""+currentHour;
        }
        return hour;
    }

    public String getMinutes(){
        int currentMinutes = Calendar.getInstance().get(Calendar.MINUTE);
        String minutes = new String();
        if(currentMinutes<10){
            minutes = "0"+currentMinutes;
        }
        else{
            minutes = ""+currentMinutes;
        }
        return minutes;
    }

    public void setText(String text){
        this.text = text;
    }

    public String getText(){
        return this.text;
    }

    public void setTitle(String title){
        this.title = title;
    }

    public String getTitle(){
        return this.title;
    }

    public void setId(int id){
        this.id = id;
    }

    public int getId(){
        return this.id;
    }

} 
```

主要活动：

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        DatabaseManager db = new DatabaseManager(this);
        Note n1 = new Note();
        Note n2 = new Note();
        n1.setTitle("n1 title");
        n1.setText("n1 text");
        n2.setTitle("n2 title");
        n2.setText("n2 text");
        db.addNote(n1);
        db.addNote(n2);
        String[]notes = db.listNotes();
        ArrayAdapter<String>adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,notes);
        ListView lv = (ListView)findViewById(R.id.notes_list);
        lv.setAdapter(adapter);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    } 
```

}

和xml文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <ImageView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/board"
        android:scaleType="fitXY"/>

    <ImageButton
        android:id="@+id/add_note"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:layout_alignParentRight="true"
        android:layout_marginRight="10dp"
        android:src="@drawable/note"
        android:background="@android:color/transparent"/>

    <ListView
        android:id="@+id/notes_list"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_alignParentTop="true"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:55:53.033

您的表创建字符串 CREATE_NOTES_TABLE 字符串在查询中缺少分号。在最后一个 ")" 后面的字符串中包含一个分号 (;)；IE。做了 ”）;”;

# c# - 从 XML 阅读器将 xml 元素添加到列表

> ID：14928251
> 
> 赞同：1
> 
> 时间：2013-02-18T01:35:23.920
> 
> 标签：c#, .net, xml, list, xmlreader

我有一个名为投资组合的 xml 文件，我将其位置作为字符串传递。从元素下的投资组合文件中读取文件名列表。在 xml 文件中，我有一个名为的元素，我需要读取价格数据中的 4 个值并将其存储到字符串列表中。我不知道我这样做是否正确。我不知道 foreach 循环的参数应该是什么。

XML 文件：

```
<priceData>
    <file name="ibmx.xml"/>
    <file name="msft.xml"/>
    <file name="ulti.xml"/>
    <file name="goog.xml"/>
</priceData> 
```

这是我的 C# 函数

```
public static  void readPortfolio(string filename)
{
    XmlTextReader reader = new XmlTextReader(filename);
    reader.Read();
    List<string> priceDataFile = new List <string> ();
    foreach(var file in reader) //Don't know what the parameters should be.
    {
        priceDataFile.Add(reader.Value); //Not sure if I am passing what I want
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:24:28.850

你可以这样做 。以下将每个属性的文件名添加到列表替换中，我已经`.XML`用您的路径位置声明了您的文件的副本。

```
XDocument document = XDocument.Load(@"C:\Sample_Xml\PriceData.xml");
List<string> priceDataFile = new List<string>();
var priceData = (from pd in document.Descendants("priceData")
                  select pd);

foreach (XElement priceValue in priceData.Elements())
{
    priceDataFile.Add(priceValue.FirstAttribute.Value.ToString());
} 
```

这就是您的 priseDataFile 列表内容在 QuickWatch 中查看时的样子

```
[0] "ibmx.xml"
[1] "msft.xml"
[2] "ulti.xml"
[3] "goog.xml" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:35:03.727

使用 XDocument 类是一个很好的解决方法。但是如果你想使用 XmlTextReader 类，代码已经列出如下。然后您将获得包含 XML 文件列表的结果。另一方面，名称是示例代码中的一个属性。所以你应该使用 reader.GetAttribute("name") 来获取价值。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;
using System.Xml.Linq;

namespace XmlReaderTest
{
    class Program
    {
        static void Main(string[] args)
        {
            XmlTextReader reader = new XmlTextReader("../../Portfolio.xml");
            reader.WhitespaceHandling = WhitespaceHandling.None;
            List<string> priceDataFile = new List<string>();
            while (reader.Read())
            {
                if (reader.Name == "file")
                {
                    priceDataFile.Add(reader.GetAttribute("name"));
                }
                else
                    continue;
            }

            reader.Close();

            foreach (string file in priceDataFile)
            {
                Console.WriteLine(file);
            }

            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T03:27:40.467

改用 LINQ to XML (.NET 3.0+)：

```
XDocument doc = XDocument.Load(path);
List<string> list = doc.Root
                       .Elements("file")
                       .Select(f => (string)f.Atribute("name"))
                       .ToList(); 
```

# ruby-on-rails - 使用 RABL 从 AR 结果创建一个简单的键/值对映射

> ID：14928252
> 
> 赞同：0
> 
> 时间：2013-02-18T01:35:26.650
> 
> 标签：ruby-on-rails, json, rabl

我正在尝试构建的 JSON 非常简单——它是类别到属于每个类别的可用产品的映射。它应该看起来像：

```
{
   category_permalink : [<product 1>, <product 2>],
   another_category   : [<another product>, <yet another>]
} 
```

并且 Category has_many Products 所以可以在控制器中获取，例如

```
Category.where(:permalink => params[:selected_categories]).includes :products 
```

但是，RABL 似乎真的想把所有东西都包装在一个数组中。我尝试了许多不同的变化，包括像

```
 collection @categories
 node do |cat|
   { cat.permalink => partial('products/product', :object => cat.products) }
 end 
```

这很接近，但将整个结果包装在一个数组中，并为每个类别提供了 N 个单元素数组。

我想要这个 JSON 的原因是它可以很好地与拉这个查询的前端应用程序一起工作。其他任何事情都意味着 JS 级别的一些丑陋的黑客攻击。

我知道我也不必为此使用 RABL，但它是这个应用程序的一种标准，我想看看它是否可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:50:33.357

经典案例拉头发，大声问出问题10分钟后解决。我想我忘了我还在使用红宝石......

```
@categories.each do |cat|
   node(cat.permalink) do
      partial('products/product', :object => cat.products.active)
   end
end 
```

# actionscript-3 - AS3 动画在第 1 帧处停止

> ID：14928254
> 
> 赞同：0
> 
> 时间：2013-02-18T01:35:38.410
> 
> 标签：actionscript-3, flash, animation, actionscript

我真的是 AS3 的新手，我曾经在 AS2 中编码，但一年多以来我没有使用 Flash 或 ActionScript。我的问题是当我按下左箭头或右箭头时，该箭头被拒绝将角色向右移动，而动画仅在第一帧处停止。空闲动画效果很好，但是每次我按下按钮时，步行动画都会在第 1 帧开始和停止。

```
vector.gotoAndPlay("parado");

var leftKeyDown:Boolean = false;
var rightKeyDown:Boolean = false;
var mainSpeed:Number = 7;

vector.addEventListener(Event.ENTER_FRAME, moveChar);
function moveChar(event:Event):void{

    if(leftKeyDown){
        if(vector.currentLabel!="andando"){
            vector.x -= mainSpeed;
            vector.scaleX=-1;
            vector.gotoAndPlay("andando");
        }
    } else {
        if(rightKeyDown){
            if(vector.currentLabel!="andando") {
                vector.x += mainSpeed;
                vector.scaleX=1;
                vector.gotoAndPlay("andando");
            }
        }
    }
}

stage.addEventListener(KeyboardEvent.KEY_DOWN, checkKeysDown);
function checkKeysDown(event:KeyboardEvent):void{

    if(event.keyCode == 37){
        leftKeyDown = true;
    }

    if(event.keyCode == 39){
        rightKeyDown = true;
    }
    }
    stage.addEventListener(KeyboardEvent.KEY_UP, checkKeysUp);
    function checkKeysUp(event:KeyboardEvent):void{

    if(event.keyCode == 37){
        leftKeyDown = false;
    }
    if(event.keyCode == 39){
        rightKeyDown = false;
    }
} 
```

仅供参考：“parado”是我的空闲动画，“andando”是我的行走动画。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T03:59:31.200

它不会在第 1 帧停止，它只是一直被发送回第 1 帧。考虑一下按住按钮几秒钟会发生什么：

*   `rightKeyDown`开始为假。该分支中没有代码被执行。

*   用户持有右箭头，`rightKeyDown`变为真

*   `moverChar`检查`rightKeyDown`，发现它是真的，并将角色发送到“andando”。

*   `moveChar`再次运行，sees`rightKeyDown`是真的，但角色仍然在“andando”帧，所以它什么也不做。

*   字符在“andando”之后进入帧。

*   `moverChar`运行，`rightKeyDown`仍然是真的，但框架不再是“andando”，所以它重置回它。

并且在用户按住键的所有时间内重复，因此它似乎卡在第 1 帧和第 2 帧中

解决此问题的一些替代方法：

* * *

仅在用户按下或释放按钮时更改关键帧，而不是中间的每一帧。

```
function moveChar(event:Event):void{

    if(leftKeyDown){
        vector.x -= mainSpeed;
        // No frame checks or frame changes here.
    }
    [...]

function checkKeysDown(event:KeyboardEvent):void{
    if(event.keyCode == 37){
        leftKeyDown = true;
        vector.scaleX=-1;
        vector.gotoAndPlay("andando");
        // Send the character to the correct frame when the user presses the key.
    }
    [...]

function checkKeysUp(event:KeyboardEvent):void{
    if(event.keyCode == 37){
        leftKeyDown = false;
        vector.gotoAndPlay("parado");
        // Send it back to idle when the user releases the key.
    }
    [...] 
```

* * *

另一种选择是将每个动画单独存储在一个影片剪辑中，并将它们放在一个容器影片剪辑中。所以角色符号中只有两帧，一帧用于空闲动画，另一帧用于行走动画。在您的代码中，您使用`gotoAndStop`而不是`gotoAndPlay`，因此是否每帧都调用它并不重要。

* * *

编辑：还尝试对条件进行分组。

```
} else {
    if(rightKeyDown){
        if(vector.currentLabel!="andando") {
            vector.x += mainSpeed;
            vector.scaleX=1;
            vector.gotoAndPlay("andando");
        }
    }
} 
```

可以改写为

```
} else if (rightKeyDown && vector.currentLabel != "andando"){
    vector.x += mainSpeed;
    vector.scaleX=1;
    vector.gotoAndPlay("andando");
} 
```

# php - PHP检查来自（POST）的变量是否包含任何数值

> ID：14928257
> 
> 赞同：0
> 
> 时间：2013-02-18T01:36:28.030
> 
> 标签：php

我需要检查一个字段是否包含任何数值，如果是，它将返回脚本。

这是我的脚本

```
if ($name != null && $age != null) {
    if (!preg_match("/^[a-z]$/", $param)) {
        echo 'You cannot use numbers for your name lol!';
        return;
    }
    if (!is_numeric($age)) {
        echo 'You must use numbers for your age!';
        return;
    }
    mysql_select_db("jony", $connectMysql);
    $sql="INSERT INTO person (name, age) VALUES ('$_POST[name]','$_POST[age]')";

    if (!mysql_query($sql,$connectMysql))
        die('MySQL problem:'.mysql_error());
        mysql_close($connectMysql);
        header('location: http://localhost/index.php.php');
} else {
    echo 'Fields are empty!';
    return;
} 
```

我用它来检查字段 '$name' 是否为数字，如果是，它将返回它：

```
 if (is_numeric($name)) {
        echo 'You cannot use numbers for your name lol!';
        return;
    } 
```

如果我只在字段中输入数字，它就可以正常工作。

但是如果我包含数字+字符，它将继续代码并忽略返回。为什么会这样？我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:47:25.893

你可以[在这里测试](http://www.solmetra.com/scripts/regex/index.php)

尝试

```
preg_match('/^[a-z]+$/', $name); 
```

代替

```
preg_match('/^[a-z]$/', $name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:47:46.037

例如，您可以这样做：

```
if (preg_match('#[0-9]#',$name)){ 
     echo 'You cannot use numbers for your name lol!';
     return;
} 
```

# universal-image-loader - Android-Universal-Image-Loader ImagePager - 如何在设备旋转时避免活动回到第一页

> ID：14928262
> 
> 赞同：0
> 
> 时间：2013-02-18T01:37:08.947
> 
> 标签：universal-image-loader

当我旋转设备时，ImagePagerActivity 显示第 1 页（在滚动视图中）。如何解决？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:59:40.143

```
public class ImagePagerActivity extends BaseActivity {

    private static final String STATE_POSITION = "STATE_POSITION";

    ViewPager pager;

    public void onCreate(Bundle savedInstanceState) {
        // ...

        if (savedInstanceState != null) {
            pagerPosition = savedInstanceState.getInt(STATE_POSITION);
        }

        // ...

        pager.setCurrentItem(pagerPosition);
    }

    public void onSaveInstanceState(Bundle outState) {
        outState.putInt(STATE_POSITION, pager.getCurrentItem());
    }

    ...
} 
```

# django - 在 Google App Engine 上为 DataStore 设置 Django

> ID：14928267
> 
> 赞同：11
> 
> 时间：2013-02-18T01:37:36.883
> 
> 标签：django, google-app-engine, google-cloud-datastore

如何在 Google App Engine 上设置 Django 以使用 DataStore？我做了一堆搜索，有些似乎指向了一个叫做 django-nonrel 的东西。但我找不到任何看起来像最新的权威指南（日期为 2012-2013 年左右）的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-11-16T02:02:58.347

djangae项目似乎是您正在寻找的[。](https://github.com/potatolondon/djangae)从他们的[文档中](https://djangae.readthedocs.io/en/latest/)：

> Djangae (jan-gee) 是一个 Django 应用程序，它允许您在 Google App Engine 上运行 Django 应用程序，包括（如果您愿意）使用 Django 模型并将 App Engine 数据存储区作为底层数据库。

它有一个支持 AppEngine 的 Datastore 的数据库后端，因此您可以使用 Django 的 ORM。除了 Django 的默认字段外，项目中还添加了许多其他字段类型。

不过，您应该仔细考虑[限制列表。](https://djangae.readthedocs.io/en/latest/db_backend/#what-cant-it-do)

# ios - 如何将每帧数据存储在可以通过Matlab打开的iOS电影文件中？

> ID：14928268
> 
> 赞同：0
> 
> 时间：2013-02-18T01:37:48.707
> 
> 标签：ios, matlab, metadata, movie, avassetwriter

我正在对只能在设备上执行的 iPhone 上的相机输出进行处理。我现在需要将每个处理过的帧与处理步骤提供的一些附加信息一起存储。最终我需要在 Matlab 中打开数据来进一步分析。

目前我使用 AVAssetWriter 编写一个 mov 文件，同时构建一个单独的 data.txt 文件，我在每次录制结束时通过电子邮件发送给自己。

这个过程很不愉快，因为这意味着我每次录制内容时都必须下载 data.txt 文件。然后我必须从手机中导入电影文件（我显然不能通过电子邮件发送电影文件，因为它对于电子邮件来说太大了），然后我必须给它们两个通用名称。

是否有 iOS 支持的视频格式，并且我可以在 Matlab 中打开它允许我获取每帧数据和元数据？有没有比我现在做的更好的方法？我看到有一个 AVMediaTypeText 但我没有找到它的示例代码，我怀疑我可以将它交错到一个 mov 文件中......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:13:18.160

在我看来，您应该创建一个“元文件”，其中包含有关电影名称和位置的信息 - 然后将元文件的名称传递给 matlab，它从中访问所有元数据并确定要打开的电影文件。换句话说 - 扭转问题：不是将元数据添加到 mov，而是将 mov 信息添加到元文件。

我认为这可以解决您提到的 90% 的头痛问题？

# php - Firefox 中带有多个视频（幻灯片）的 VideoJS

> ID：14928271
> 
> 赞同：1
> 
> 时间：2013-02-18T01:38:20.740
> 
> 标签：php, html, wordpress, firefox, video.js

我一直在为客户开发一个网站，这是一个 WordPress 网站，主题内置了 Flexslider。我正在尝试使用 VideoJS 制作视频幻灯片。

在 slideshow.php 文件中，我让它循环播放给定的幻灯片帖子并创建必要的标记。它生成包含 HTML5 视频标签的 div，并为其提供唯一 ID。由于试图播放的视频是 .mp4 格式，而 Firefox 不接受这一点，VideoJS 应该回退到 Flash 播放器——它部分地这样做了。

幻灯片上的所有其他视频似乎都有效，而其他视频则留下了一个空的黑匣子。注意：这只发生在 Firefox 中；据我所知，Chrome、IE 和 Safari 都很好。

一个活生生的例子可以在这里看到： http: [//churchcoalition.org/](http://churchcoalition.org/)

如果有人对让所有视频在 Firefox 中运行有任何建议，我们将不胜感激。

**编辑：尽管代码没有更改，但现在似乎没有任何视频在 FF 中运行。**

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:14:08.880

您需要使用插件。希望对您有所帮助。

[http://wordpress.org/extend/plugins/wpreso-video-featurebox/](http://wordpress.org/extend/plugins/wpreso-video-featurebox/)

[http://wordpress.org/extend/plugins/captain-slider/](http://wordpress.org/extend/plugins/captain-slider/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T22:36:11.130

不是修复它的最整洁的方法，但仍然是一个修复。

我检查了用户代理，如果 Firefox 字符串匹配，它会输出一个使用另一个 Flash 播放器的，如果不匹配，它会使用 VideoJS 代码。我仍然不确定为什么 VideoJS 上的 Flash 回退不起作用，但这个修复对我有用。

# wcf - wcf方法soap消息格式

> ID：14928276
> 
> 赞同：1
> 
> 时间：2013-02-18T01:39:24.683
> 
> 标签：wcf, soap

我知道定义的肥皂消息格式。

```
<?xml version='1.0' encoding='UTF-8'?>
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope"
xmlns:wsa="http://www.w3.org/2005/08/addressing">
<soapenv:Header>
    <wsa:To>http://localhost:5000/axis2/services/xdsrepositoryb</wsa:To>
    <wsa:MessageID>urn:uuid:AFBE87CB65FD88AC4B1220879854302</wsa:MessageID>
    <wsa:Action>urn:ihe:iti:2007:ProvideAndRegisterDocumentSet-b</wsa:Action>
</soapenv:Header>
<soapenv:Body>
    <xdsb:ProvideAndRegisterDocumentSetRequest xmlns:xdsb="urn:ihe:iti:xds-b:2007">
        <lcm:SubmitObjectsRequest xmlns:lcm="urn:oasis:names:tc:ebxml-regrep:xsd:lcm:3.0">
            <rim:RegistryObjectList xmlns:rim="urn:oasis:names:tc:ebxml-regrep:xsd:rim:3.0">
                <rim:ExtrinsicObject id="Document01" mimeType="text/plain"/>
            </rim:RegistryObjectList>
        </lcm:SubmitObjectsRequest>
        <xdsb:Document id="Document01">base64 content goes here</xdsb:Document>
    </xdsb:ProvideAndRegisterDocumentSetRequest>
</soapenv:Body> 
```

我想编写一个 wcf 服务来公开一个可以使用这种肥皂消息的方法。

我只是不知道soap消息和wcf方法之间的关系。更具体地说，wcf方法、参数和soap消息之间的关系是什么？

如何编写符合上述肥皂消息的 wcf 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:54:35.467

虽然您可以通过逆向工作来构建与此特定示例匹配的数据合约，但这通常不是一个好主意。样本可能不能代表可以通过的数据。相反，通过获得一份官方 WSDL 文档或一组描述合同的 XSD，您的情况会好得多。

如果您对特定 WCF 消息在原始 SOAP 形式中的外观感到好奇，最简单的查看方法可能是启用 WCF 跟踪并查看跟踪。

# makefile - 为什么这个 makefile 每次都构建每个依赖项？

> ID：14928277
> 
> 赞同：0
> 
> 时间：2013-02-18T01:39:29.287
> 
> 标签：makefile, stata

我正在使用 makefile 运行几个与文本文件、其他数据集等一起使用的 Stata 文件。**每次运行 make 时，它​​都会运行`analysis.do`，即使我没有对任何依赖项进行任何更改。** 这是生成文件：

```
.PHONY: clean spotless

STATACOMMAND=/opt/stata/stata-mp -b

analysis.txt: analysis.do uniform.dta normal.dta
    $(STATACOMMAND) analysis.do

uniform.dta: uniform.do
    $(STATACOMMAND) uniform.do

normal.dta: normal.do noise.txt
    $(STATACOMMAND) normal.do

clean:
    -rm *.log

spotless: clean
    -rm analysis.txt
    -rm *.dta 
```

分析.do

```
use normal.dta, clear
merge t using uniform.dta
log using analysis.txt, text
regress norm unif
log close 
```

正常的.do

```
clear
insheet using "noise.txt", clear
gen t = _n
gen norm = rnormal()
sort t
save normal.dta, replace 
```

制服.do

```
clear
set obs 10
gen t = _n
gen unif = runiform()
sort t
save uniform.dta, replace 
```

噪音.txt

```
noise
14
49
59
63
55
13
60
54
26
39 
```

我的实际代码有更多文件显示此问题，但我希望这个简单的示例至少可以帮助我缩小范围。

更新：文件修改时间是否以某种方式没有更新？`make -d`每次运行 makefile 时，我都会在最后看到这些消息：

```
Finished prerequisites of target file `analysis.txt'.
 Prerequisite `analysis.do' is older than target `analysis.txt'.
 Prerequisite `uniform.dta' is newer than target `analysis.txt'.
 Prerequisite `normal.dta' is newer than target `analysis.txt'.
Must remake target `analysis.txt'. 
```

这是另一个例子。假设我已经跑`make`了几次。以下是文件修改时间：

```
-rw-r--r-- 1 ricardo ricardo  105 Mar  1 19:25 analysis.do
-rw-r--r-- 1 ricardo ricardo 1.1K Mar  2 13:26 analysis.log
-rw-r--r-- 1 ricardo ricardo 1.5K Mar  1 19:25 analysis.txt
-rw-r--r-- 1 ricardo ricardo  317 Mar  1 19:41 makefile
-rw-r--r-- 1 ricardo ricardo   36 Mar  1 19:34 noise.txt
-rw-r--r-- 1 ricardo ricardo  103 Mar  1 19:33 normal.do
-rw-r--r-- 1 ricardo ricardo  803 Mar  1 19:38 normal.dta
-rw-r--r-- 1 ricardo ricardo 1007 Mar  1 19:38 normal.log
-rw-r--r-- 1 ricardo ricardo   83 Mar  1 19:28 uniform.do
-rw-r--r-- 1 ricardo ricardo  594 Mar  1 19:38 uniform.dta
-rw-r--r-- 1 ricardo ricardo  991 Mar  1 19:38 uniform.log 
```

再次运行`make`后，时间到了。**除了****Stata 自动生成的文件**外，没有时间变化。**`.log`**

```
-rw-r--r-- 1 ricardo ricardo  105 Mar  1 19:25 analysis.do
-rw-r--r-- 1 ricardo ricardo 1.1K Mar  2 13:29 analysis.log
-rw-r--r-- 1 ricardo ricardo 1.5K Mar  1 19:25 analysis.txt
-rw-r--r-- 1 ricardo ricardo  317 Mar  1 19:41 makefile
-rw-r--r-- 1 ricardo ricardo   36 Mar  1 19:34 noise.txt
-rw-r--r-- 1 ricardo ricardo  103 Mar  1 19:33 normal.do
-rw-r--r-- 1 ricardo ricardo  803 Mar  1 19:38 normal.dta
-rw-r--r-- 1 ricardo ricardo 1007 Mar  1 19:38 normal.log
-rw-r--r-- 1 ricardo ricardo   83 Mar  1 19:28 uniform.do
-rw-r--r-- 1 ricardo ricardo  594 Mar  1 19:38 uniform.dta
-rw-r--r-- 1 ricardo ricardo  991 Mar  1 19:38 uniform.log 
```

这可能是问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T18:08:36.550

这是你的问题：

```
dta/raw4a.dta dta/raw4b.dta: raw4.do raw4datasource/ftp/%.csv
    $(STATA) raw4.do

raw4datasource/ftp/%.csv: ; 
```

第一条规则并不像你想的那样。先决条件列表中有一个“%”，但目标中没有。*这不是模式规则。*这些目标不依赖于表单的所有现有文件（或可构建文件）`raw4datasource/ftp/{something}.csv`，它们依赖于目标**`raw4datasource/ftp/%.csv`**。没错，一个文件`%`名中有一个。该文件不存在。它不会被构建，因为第二条规则什么都不做。

我看到了四个这样的规则，其他的事情都依赖于它们。

您必须重新考虑这些规则的设计；决定你想让它们做什么，弄清楚如何让它们工作，并*在你尝试将它们连接到 makefile 的其余部分之前单独测试它们*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T09:42:24.630

看来您的**stata**有问题。我从未使用过此工具，但查看他们的[文档](http://www.stata.com/help.cgi?log)，您可能应该尝试`analysis.log`代替`analysis.txt`，以及以下脚本：

```
use normal.dta, clear
merge t using uniform.dta
log using analysis, replace text
regress norm unif
log close 
```

# r - 为什么 lapply() 不保留我的 data.table 键？

> ID：14928278
> 
> 赞同：12
> 
> 时间：2013-02-18T01:39:29.643
> 
> 标签：r, data.table, lapply

我在列表中有一堆 data.tables。我想应用`unique()`到列表中的每个 data.table，但这样做会破坏我所有的 data.table 键。

这是一个例子：

```
A <- data.table(a = rep(c("a","b"), each = 3), b = runif(6), key = "a")
B <- data.table(x = runif(6), b = runif(6), key = "x")

blah <- unique(A) 
```

在这里，`blah`还有一把钥匙，世间一切都对了：

```
key(blah)

# [1] "a" 
```

但是，如果我将 data.tables 添加到 list 并使用`lapply()`，则键会被破坏：

```
dt.list <- list(A, B)

unique.list <- lapply(dt.list, unique) # Keys destroyed here

lapply(unique.list, key) 

# [[1]]
# NULL

# [[2]]
# NULL 
```

这可能与我没有真正理解“通过引用”分配键的含义有关，因为我遇到了键消失的其他问题。

所以：

*   **为什么 lapply 不保留我的密钥？**
*   说“通过引用”分配键是什么意思？
*   我什至应该将 data.tables 存储在列表中吗？
*   如何安全地存储/操作 data.tables 而不必担心丢失我的密钥？

**编辑：**

对于它的价值，可怕的`for`循环也可以正常工作：

```
unique.list <- list()

for (i in 1:length(dt.list)) {
  unique.list[[i]] <- unique(dt.list[[i]])
}

lapply(unique.list, key)

# [[1]]
# [1] "a"

# [[2]]
# [1] "x" 
```

但这是 R，`for`循环是*邪恶*的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T02:00:16.057

有趣的是，请注意这两个不同结果之间的差异

```
lapply(dt.list, unique) 
lapply(dt.list, function(x) unique(x)) 
```

如果你使用后者，结果如你所料。

* * *

看似意外的行为是由于第一个`lapply`语句正在调用`unique.data.frame`（即 from `{base}`）而第二个语句正在调用`unique.data.table`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-18T09:21:58.157

好问题。事实证明，它记录在`?lapply`（见注释部分）：

> 由于历史原因，由 lapply 创建的调用未被评估，并且已经编写了依赖于此的代码（例如 bquote）。这意味着录制的呼叫始终采用 FUN(X[[0L]], ...) 的形式，其中 0L 替换为当前整数索引。这通常不是问题，但如果 FUN 使用 sys.call 或 match.call 或者它是使用调用的原始函数，则可能会出现问题。*这意味着使用包装器调用原始函数通常更安全，因此在 R 2.7.1 中需要例如 lapply(ll, function(x) is.numeric(x)) 以确保 is.numeric 的方法调度发生正确。*

# wxpython - 如何在报告模式下使 wx.ListCtrl 上的图标不可见？

> ID：14928281
> 
> 赞同：0
> 
> 时间：2013-02-18T01:40:31.527
> 
> 标签：wxpython

我必须得到一个只有两个字符串列的列表。在 GTK 上一切正常，但在 Windows 7 上我得到了这个： ![Windows 7的](../Images/01676a6267d5a4a5a36c3c2d708d35f1.png)

```
class ListViewCtrl(wx.ListCtrl, listmix.ListCtrlAutoWidthMixin):
    def __init__(self, parent, ID, pos=wx.DefaultPosition, size=wx.DefaultSize, style=0):
        wx.ListCtrl.__init__(self, parent, ID, pos, size, style)
        listmix.ListCtrlAutoWidthMixin.__init__(self)

class ListView(wx.Panel, listmix.ColumnSorterMixin):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent, -1, style=wx.WANTS_CHARS)

        self.il = wx.ImageList(16, 16)        
        self.up = self.il.Add(resources.filter_up.GetBitmap())
        self.dn = self.il.Add(resources.filter_down.GetBitmap())
        self.list = ListViewCtrl(self, -1, style=wx.LC_REPORT | wx.SIMPLE_BORDER | wx.LC_EDIT_LABELS | wx.LC_SORT_ASCENDING)
        self.list.SetImageList(self.il, wx.IMAGE_LIST_SMALL)

        i = 0
        _program_dir = os.path.split(__file__)[0] 
        self.itemDataMap = {}
        for fn in os.listdir(os.path.join(_program_dir, '../design/caps')):            
            self.itemDataMap[i] = (fn, "Line {0}".format(i+1))
            i += 1            
        self.PopulateList()

        listmix.ColumnSorterMixin.__init__(self, 3)
        self.__DoLayout()

    def __DoLayout(self):
        sizer = wx.BoxSizer(wx.VERTICAL) 
        sizer.Add(self.list, 1, wx.EXPAND)
        self.SetSizer(sizer)        
        self.SetAutoLayout(True)

    def PopulateList(self):
        info = wx.ListItem()
        info.m_mask = wx.LIST_MASK_TEXT | wx.LIST_MASK_IMAGE | wx.LIST_MASK_FORMAT
        info.m_image = -1
        info.m_format = 0
        info.m_text = "File name"
        self.list.InsertColumnInfo(0, info)
        info.m_text = "Column 2"
        self.list.InsertColumnInfo(1, info) 
        for k, v in self.itemDataMap.items():
            index = self.list.InsertStringItem(sys.maxint, v[0])
            self.list.SetStringItem(index, 1, v[1])
            self.list.SetItemData(index, k)
        self.list.SetColumnWidth(0, 100)
        self.list.SetColumnWidth(1, wx.LIST_AUTOSIZE)        
        self.currentItem = 0

    def GetListCtrl(self):
        return self.list

    def GetSortImages(self):
        return (self.dn, self.up) 
```

每行使用附件图像列表中的图像编号 0。我怎样才能摆脱这个图标？

*wxPython 2.9.2.4，Win7 x64*

**更新：**

这是来自 GTK 的列表（没有您看到的图标）：

![GTK](../Images/5c8056a09f7f9008c88d1264c50d686e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:17:12.033

Microsoft ListView 小部件有一个很棒的“功能”，如果有一个图像列表分配给控件，那么它假定您总是希望为每个项目显示一个图像。如果您没有为某个项目指定一个，那么它将为您使用图像列表中的第一个，因为根据 MS 的说法，这是您真正想要做的，但只是忘了自己做。显然。

无论如何，解决方法是让图像列表中的第一个图像成为一个完全透明的图标，或者明确地为这些项目分配一些其他图标。

# .net - 标记为“动态”的变量值存储在哪里？

> ID：14928284
> 
> 赞同：0
> 
> 时间：2013-02-18T01:41:09.537
> 
> 标签：.net, c#-4.0, dynamic, value-type, reference-type

在 .net 上，值类型存储在堆栈中，引用类型存储在堆中（它是堆栈上的引用）。

但是如果一个变量被标记为`dynamic`，根据数据的运行时类型，这条规则是否仍然有效？

我正在寻找一些指向这一点的参考资料，但没有找到任何参考资料。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:03:49.180

*动态*类型的变量是运行时的 System.Object。因此，它始终是对存储在 GC 堆上的对象的引用。如果您为变量分配值类型值，那么它将使用标准装箱转换进行装箱。

# google-apps - webViewLink 现在返回“404 Not Found”

> ID：14928287
> 
> 赞同：3
> 
> 时间：2013-02-18T01:41:37.600
> 
> 标签：google-apps, google-drive-api

上周可通过 webViewLink 查看的公用文件夹 URI 现在返回 HTTP 404 - Not Found 错误。

这些文件夹仍然是公开的，包含 index.html 并列在此测试脚本中：

[https://googledrive.com/host/0B0YvUuHHn3Mna3Rzb19tLTYyOXc/](https://googledrive.com/host/0B0YvUuHHn3Mna3Rzb19tLTYyOXc/)

Web 文件夹或 webViewLink 中没有任何变化。服务器有什么变化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:29:58.310

这是一个有意的改变。正如评论中提到的，“任何有链接的人”都不起作用，应该是“在网络上公开”。Google 将更新文档。

不幸的是，这在没有向社区发出警告的情况下被更改，这是不可原谅的。如果你被这个咬了真的很抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T23:01:31.363

好的。我知道了。因此，如果您仍然无法看到您的 html 公开文件，请**打开索引文件**和 *文件 -> 允许查看者下载。* 是的，请务必将文件夹和文件共享为“在网络上公开”。

# ios - 更改 UILabel 文本

> ID：14928293
> 
> 赞同：3
> 
> 时间：2013-02-18T01:43:16.683
> 
> 标签：ios, objective-c

我对 Objective-C 和 XCode 相当陌生。我正在尝试更新屏幕上的文本标签，

我调用了一个函数`loadData`，`viewDidLoad`它工作正常。我正在尝试打印在`loadData`函数中生成的字符串。生成该字符串后，我使用：

```
self.MyLabel.text=string; 
```

但不更新。我也在使用`IBOutlet`，我认为它可能与不同的线程有关，但我不确定。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T01:51:58.950

您是否尝试过更新标签后

```
- (void)viewDidLoad {
   // call another method before assigning to retrieve the string here.
   self.MyLabel.text=string;
} 
```

有时`UIViewController`和`IB`setup 的方式需要你在`viewDidLoad`. 尝试`NSLog(@"%@", self.MyLabel)`在您尝试分配的任何地方查看它是否不为空

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:47:00.667

你的说法是正确的：

```
self.mylabel.text = @"Test"; 
```

因此，请确保 IBOutlet 已正确连接（实心灰色圆圈）。

还要检查字符串是否包含正确的值。

# command-line - 批量重命名脚本以仅保留原始文件名的某些字符？

> ID：14928294
> 
> 赞同：2
> 
> 时间：2013-02-18T01:43:17.520
> 
> 标签：command-line, batch-file, file-rename

我需要用可变大小的原始文件名重命名数千个 rar 文件。我必须通过保留原始文件名的前 3 个和最后 4 个字符并在中间添加 3 个随机字符 [数字] 来使它们长 10 个字符。

### 例子：

### 输入：

《John Doe - Jane Doe - 19073275.rar》

《XXXX-XYXY-98705674.rar

### 输出：

"joh1273275.rar"

"XXX9795674.rar"

接下来，.bat 应该为每个文件生成一个带有原始名称和修改后的 .txt！

我知道这是可能的，但是在编写它时我完全是愚蠢的。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:54:40.667

下面的批处理文件做你想做的事：

```
@echo off
setlocal EnableDelayedExpansion
for %%a in (*.rar) do (
   set name=%%~Na
   set num=00!random!
   set newName=!name:~0,3!!num:~-3!!name:~-4!
   ren "%%a" "!newName!%%~Xa"
   echo "%%a" modified to "!newName!%%~Xa" >> log.txt
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:50:14.683

我会编写一个脚本以任何简单的方式生成名称（比如前 6 个 + 后 4 个），然后检查是否有任何重复项要手动清理（或者第二遍移动中间，或者......）。除非这是一项重复性的工作（每天都做），否则不值得完全自动化。

# jquery - 在列表中的图像下方放置文本（使用 jQuery 灯箱）

> ID：14928297
> 
> 赞同：1
> 
> 时间：2013-02-18T01:44:10.527
> 
> 标签：jquery, html, css

现在我有大量的图片供 jQuery Lightbox 插件使用，格式简单如下：

```
<div id="gallery"><ul>
    <li><a href="photos/1.jpg"><img src="photos/1_t.jpg" width="72" height="72" alt="" /></a></li>
    <li><a href="photos/2.jpg"><img src="photos/2_t.jpg" width="72" height="72" alt="" /></a></li>
    <li><a href="photos/3.jpg"><img src="photos/3_t.jpg" width="72" height="72" alt="" /></a></li>
    <li><a href="photos/4.jpg"><img src="photos/4_t.jpg" width="72" height="72" alt="" /></a></li>
    <li><a href="photos/5.jpg"><img src="photos/5_t.jpg" width="72" height="72" alt="" /></a></li>
</ul></div> 
```

CSS：

```
#gallery {
    background-color: #efefef;
    border:1px solid #ccc;
    background-size: 100%;
    width: 90%;
    margin-top:20px;
}

#gallery ul { list-style: none; }
#gallery ul li { 
    display: inline; margin-left: 5px; margin-right: 5px; 
    font-size:.4em;

}
#gallery ul img {
    border: 5px solid #3e3e3e;
    border-width: 2px 2px 2px;
}
#gallery ul a:hover img {
    border: 5px solid #fff;
    border-width: 2px 2px 2px;
    border-color: #8f8f8f;
    color: #fff;
}
#gallery ul a:hover { color: #fff; } 
```

而我正在尝试做的是让它在每张图片下都有文字说明。前任：

```
<li><a href="photos/1.jpg">
        <img src="photos/1_t.jpg" width="72" height="72" alt="" /></a>
        Image 1
    </li> 
```

但现在我只是让标题显示在图像的右侧。我想不出最好的方法来做这件事。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:58:40.947

Try;

HTML:

```
<li><a href="photos/1.jpg"><img src="photos/1_t.jpg" width="72" height="72" alt="" /></a><p>Image 1</p></li> 
```

CSS:

```
#gallery ul li { 
   float:left; margin-left: 5px; margin-right: 5px; 
   font-size:.4em;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T01:54:39.403

除了`<br>`图片后的标题外，我还使用`display: inline-block`了`<li>`元素而不是`display: inline`.

[http://jsfiddle.net/nfEMs/1/](http://jsfiddle.net/nfEMs/1/)

# objective-c - `stringByReplacingCharactersInRange`方法调用后xCode上`NSString`末尾的垃圾

> ID：14928298
> 
> 赞同：3
> 
> 时间：2013-02-18T01:44:14.730
> 
> 标签：objective-c, xcode, nsstring

我使用以下代码替换文件的扩展名：

```
NSString *fileOriginal = [url lastPathComponent];
NSString *fileSource = @"";
NSRange range = [fileOriginal rangeOfString:@"." options:NSBackwardsSearch];
if (range.length > 0) {
    range.length = fileOriginal.length - range.location;
    fileSource = [fileOriginal stringByReplacingCharactersInRange:range withString:[NSString stringWithFormat:@".%@", @"cpp"]];
} else {
    fileSource = [fileOriginal stringByAppendingString:[NSString stringWithFormat:@".%@", gFileExtension]];
} 
```

代码工作正常。但是调试器在末尾显示垃圾`NSString`：

![在此处输入图像描述](../Images/3909e0351c2da5871b951a827bce3f36.png)

如果我尝试添加`retain`到字符串，结果相同。到底发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:00:20.653

Assuming your definition of `gFileExtension` is valid, why not try this:

```
NSString *fileSource;
if ([[fileOriginal pathExtension] length] > 0)
{
    fileSource = [[fileOriginal stringByDeletingPathExtension] stringByAppendingPathExtension:gFileExtension];
}
else
{
    fileSource = [fileOriginal stringByAppendingPathExtension:gFileExtension];
} 
```

Using the path handling built into `NSString`, you don't have to worry about the dot; it's done for you.

# use-case - 接口应该是用例图中系统的一部分吗？

> ID：14928300
> 
> 赞同：1
> 
> 时间：2013-02-18T01:44:48.350
> 
> 标签：use-case, diagramming

我的系统是一个汽水罐机器。您可以投入硬币并从这台机器上购买苏打水。界面是键盘和数字屏幕。

我的要求之一是用户可以将 x 美元放入机器中，然后将商品添加到他的订单中。然后，机器将向他显示订单总额。

也就是说，“显示用户订单总额”我应该在我的用例图中显示这个吗？如果是，那么我该如何展示它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T12:35:40.380

不，你不应该。有几个原因。

1.  用例通常用于传达功能需求。需求应该是独立于解决方案的。他们应该概述系统应该做什么，而不是“如何”。如果您有一个必须使用的给定接口，那么您会将其记录为约束，而不是用例。参见 A. Cockburn，编写有效的用例，p。191“**错误修正：用户界面细节太多**”
2.  用例从用户的角度描述与系统的交互。您可能还希望将系统作为参与者包括在内；但仍然......：
3.  ...您描述的用例可能太细了。参见 A. Cockburn，编写有效的用例，p。192“修正的错误：非常低的目标水平”

如果您仍想在用例图中突出显示该方面（根据您的需要可能很有用），请考虑将用例命名为“验证订单总额”并将其分配给您的主要参与者。IMO 对于子功能级别来说非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:12:31.687

这在很大程度上取决于您的要求；我对您的示例的直觉是，您应该这样做。

你如何展示它也取决于你的要求。如果需要在数字屏幕上显示订单总额，请包括数字屏幕。如果该部分未指定（即可能是收据、语音输出、解释性舞蹈），那么您只需说“显示订单总数（以某种方式）”。它可以像一个带标签的盒子一样简单，或者，如果您的工具允许，它可以是一个看起来像数字屏幕的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-24T08:57:57.973

您概述的需求应该包含在用例本身中，或者作为“分解”每个用例的活动图的一部分。在用例图上显示如此详细的要求是不合适的

# haskell - 隐式提升的正确性

> ID：14928302
> 
> 赞同：9
> 
> 时间：2013-02-18T01:45:38.787
> 
> 标签：haskell, types

想象一下，我有一个在 monad 上通用的值：

```
m :: (Monad m) => m A  -- 'A' is some concrete type 
```

现在假设我以两种不同的方式将此值专门用于具体的 monad 转换器堆栈：

```
m1 :: T M A
m1 = m

m2 :: T M A
m2 = lift m 
```

...其中`M`和`T M`是单子，并且`T`是单子转换器：

```
instance Monad M where ...
instance (Monad m) => Monad (T m) where ...
instance MonadTrans T where ... 
```

...并且这些实例遵守单子定律和单子变换器定律。

我们可以推断出：

```
m1 = m2 
```

`m`...除了它的类型之外一无所知？

这只是一个冗长的询问是否`lift m`是 的有效替换的方式`m`，假设两者都进行了类型检查。表述这个问题有点困难，因为它需要`m`在替换之前和之后将类型检查作为两个单独的 monad。据我所知，这种替换类型检查的唯一方法是 if`m`对 monad 是通用的。

我模糊的直觉是替换应该总是正确的，但我不确定我的直觉是否正确，或者如果它是正确的，如何证明它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T03:33:39.970

If `m :: Monad m => m A`, then`m`必须等价于`return x`for some `x :: A`，因为获得任何东西的唯一方法`:: m x`是`return`and `(>>=)`。但是为了使用`(>>=)`，您必须能够生成一些`m y`，您可以`return`使用`(>>=)`. 无论哪种方式，您最终都必须使用`return`，并且单子定律保证整个表达式将等效于`return x`.

（如果`m`在 monad 上完全多态，那么您必须能够在 处使用它`m ~ Identity`，因此它不能使用任何花哨的 monad 技巧，除非您将参数传递给它。这种技巧[在此处](http://comonad.com/reader/2011/searching-infinity/)和[此处](http://okmij.org/ftp/Computation/lem.html)使用。）

鉴于此`m = return x`，我们通过 monad 转换器法则 ( `lift . return = return`) 知道`lift m = m`。

当然，这只适用于这种特定类型。如果你有，比如说，`m :: MonadState S m => m A`那么`m`很容易不同于`lift m`——例如，有一个类似的类型`StateT A (State A) A`，`get`并且`lift get`会不同。

（当然，所有这些都忽略了⊥。再说一次，如果你不这样做，大多数 monad 无论如何都不遵守法律。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T03:35:17.750

我相信这是一个草率的[归纳证明](http://en.wikipedia.org/wiki/Structural_induction)，你`m`的等价于`lift m`.

我认为我们必须尝试证明`m`（或者更确切地说，关于 type 的所有可能值`(Monad m) => m A`）。如果我们认为`Monad`只包含绑定和返回，而忽略底部，`fail`那么您`m`必须在顶层是以下之一：

```
mA = return (x)
mB = (mX >>= f) 
```

因为通过单子变换定律，`mA`的两种形式是等价的：`m`

```
lift (return (x)) = return (x) 
```

这是基本情况。然后我们剩下第二个变压器定律来推理`mB`：

```
lift (mX >>= f) = lift mX >>= (lift . f) 
```

并且我们想证明 our`mB`等于那个扩展：

```
mX >>= f = lift mX >>= (lift . f) 
```

我们假设 bind 的左边是等价的（`mX = lift mX`），因为这是我们的归纳假设（对吗？）。

因此，我们需要`f = lift . f`通过弄清楚`f`必须是什么样子来证明：

```
f :: a -> m b
f = \a -> (one of our forms mA or mB) 
```

看起来`lift . f`像：

```
f = \a -> lift (one of our forms mA or mB) 
```

这让我们回到了我们的假设：

```
m = lift m 
```

# php - 作曲家自动加载未在 Silex 中加载类

> ID：14928304
> 
> 赞同：9
> 
> 时间：2013-02-18T01:46:09.247
> 
> 标签：php, autoload, silex

我遇到了使用 composer 在 Silex 应用程序中加载类的情况。

该课程位于：

```
src/custom/UserProvider.php 
```

在我的 composer.json 中，我添加了以下几行：

```
"autoload": {
   "psr-0": {
        "CustomNamespace": "src/custom/"
    }
} 
```

在我的 UserProvider.php 文件中，我有：

```
namespace CustomNamespace; 
```

当我在控制台中运行*composer update*时，这一行被添加到 /vendor/composer/autoload_namespaces.php

```
'CustomNamespace' => $baseDir . '/src/custom/', 
```

但是，当我尝试使用该类时：

```
new CustomNamespace\UserProvider(); 
```

我收到了这个错误：

> 致命错误：在第 27 行的 /home/ubuntu/www/project/web/index.php 中找不到类“CustomNamespace\UserProvider”

有谁知道发生了什么？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T12:50:42.877

问题正是@Maerlyn 在他的评论中所说的。

当我将文件移动到**src/custom/CustomNamespace/UserProvider.php时，一切正常**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T09:18:31.950

如果有人遇到我的问题，我将在此处添加一条注释，该问题与此问题相同，但与区分大小写有关。

我将我的站点从 OS X（不区分大小写）移至 Ubuntu（区分大小写），它抱怨该类不存在。该文件被命名为 myclass.php，当我将它重命名为 MyClass.php 时，它起作用了。

# javascript - 编写一个 JQuery/Javascript 淡入淡出函数

> ID：14928307
> 
> 赞同：1
> 
> 时间：2013-02-18T01:46:32.293
> 
> 标签：javascript, jquery

我正在尝试编写一个函数，该函数将能够在单个 HTML 页面上的多个 div 内淡入/淡出图像。div 中的图像需要同时从每个 div 淡入。然后淡出，然后是 div 中的下一个图像。在每个 div 中创建一个迷你图像旋转演示。

我无法解决这个问题:) 我可以很容易地在没有页面上的功能的情况下实现这一点，但是，我想要一些我可以很容易地在页面上使用尽可能多的 div 重复的东西。有人可以教育我吗:) 提前感谢您的任何建议，我无法在网上找到这个。

例子

```
function imageRotationFunction(var1, var2, var3) {
   //logic I need help with
} 
```

.

```
imageRotationFunction(<array of ID's to fade>, <number of seconds to fade in>, <number of seconds between fades>); 
```

HTML 页面有：

```
<div id='fadein0'>
  <img class='imageRotation' src='someimage0.png'>
  <img class='imageRotation' src='someimage1.png'>
  <img class='imageRotation' src='someimage2.png'>
  <img class='imageRotation' src='someimage3.png'>
</div>

<div id='fadein1'>
  <img class='imageRotation' src='otherimage0.png'>
  <img class='imageRotation' src='otherimage1.png'>
  <img class='imageRotation' src='otherimage2.png'>
  <img class='imageRotation' src='otherimage3.png'>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T01:57:06.227

尝试这样的事情：

HTML：

```
<div class="fadebox">
  <img src="image0.png" />
  <img src="image1.png" />
  <img src="image2.png" />
  <img src="image3.png" />
</div>
<div class="fadebox">
  <img src="image0.png" />
  <img src="image1.png" />
  <img src="image2.png" />
  <img src="image3.png" />
</div> 
```

CSS：

```
.fadebox {
    position:relative;
}
.fadebox>img {
    position:absolute;
    left:0; top:0;
    opacity:0;
    transition:opacity 1s linear;
    -webkit-transition:opacity 1s linear;
}
.fadebox>img:first-child {
    position:static;
} 
```

JavaScript：

```
(function() {
    var divs = document.querySelectorAll(".fadebox"), l = divs.length, i;
    for( i=0; i<l; i++) {
        (function(div) {
            var imgs = div.children, l = imgs.length, i = -1,
                step = function() {
                    if(i > -1) imgs[i].style.opacity = 0;
                    i = (i+1)%l;
                    imgs[i].style.opacity = 1;
                };
            step();
            setInterval(step,5000);
        })(divs[i]);
    }
})(); 
```

在上面，`1s`是发生淡入淡出所需的时间，是淡入淡出`5000`之间的毫秒数（包括过渡，因此在这种情况下，图像将保持显示 4 秒）

请注意，这仅适用于支持浏览器，如下所示：

*   IE、Chrome 和 Firefox 在其最新版本中应该可以正常工作
*   IE9 工作，但图像之间不褪色
*   IE8及以下因不支持而无法使用`opacity`
*   IE7及以下因不支持而无法使用`querySelectorAll`

最后两种情况可以通过添加合适的`filter`样式（IE8）和匀场`querySelectorAll`（IE7及以下）来修复

# android - android - 同一个项目不能正常运行

> ID：14928308
> 
> 赞同：1
> 
> 时间：2013-02-18T01:46:38.667
> 
> 标签：android

我正在开发一个使用谷歌地图 API V2 的简单应用程序，它一切正常，没有昨天显示地图的问题。今天我用的是一模一样的项目，地图无法显示，只有加减号。其他部分都很好。

此外，当我尝试更改其上的任何代码时，它现在在 xml 文件上出现一些错误，例如“不正确的行结尾：找到回车符 (\r) 而没有相应的换行符 (\n)”。在此之前它完全可以正常工作。

我仍然是所有这些的初学者。也许我的 Eclipse 有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:30:55.050

这听起来更像是一个 Eclipse/行编码问题，而不是一个 android 问题。

尝试打开文件的属性，然后在“资源”下。您应该在右侧看到“文本文件编码”部分。检查这些设置是否对您的平台和项目有意义。

更一般地说，您可能还希望检查您的日食偏好。转到：常规-> 工作区应该有一个“文本文件编码”和“新文本文件行分隔符”部分。

您需要确保这些是合适的，这样这个问题就不会再出现

编辑：更改这些设置后，您将要重建问题（又名项目 - >清理）以确保它全部应用

# java - 了解 Java 正则表达式

> ID：14928316
> 
> 赞同：0
> 
> 时间：2013-02-18T01:47:48.280
> 
> 标签：java, regex

```
Enter your regex: a?
Enter input string to search: ababaaaab
I found the text "a" starting at index 0 and ending at index 1.
I found the text "" starting at index 1 and ending at index 1.
I found the text "a" starting at index 2 and ending at index 3.
I found the text "" starting at index 3 and ending at index 3.
I found the text "a" starting at index 4 and ending at index 5.
I found the text "a" starting at index 5 and ending at index 6.
I found the text "a" starting at index 6 and ending at index 7.
I found the text "a" starting at index 7 and ending at index 8.
I found the text "" starting at index 8 and ending at index 8.
I found the text "" starting at index 9 and ending at index 9.

Enter your regex: a*
Enter input string to search: ababaaaab
I found the text "a" starting at index 0 and ending at index 1.
I found the text "" starting at index 1 and ending at index 1.
I found the text "a" starting at index 2 and ending at index 3.
I found the text "" starting at index 3 and ending at index 3.
I found the text "aaaa" starting at index 4 and ending at index 8.
I found the text "" starting at index 8 and ending at index 8.
I found the text "" starting at index 9 and ending at index 9.

Enter your regex: a+
Enter input string to search: ababaaaab
I found the text "a" starting at index 0 and ending at index 1.
I found the text "a" starting at index 2 and ending at index 3.
I found the text "aaaa" starting at index 4 and ending at index 8\. 
```

* * *

上面的例子来自`Java Documentation`于量词。
根据我从上面给出的示例中了解到的情况，以下是贪婪量词的工作原理：

## ? 和 *

将寻找提到的字符的存在。如果未找到它们前面的字符，则将该位置标记为零长度匹配。
`*`一个字符一个字符的匹配，而`?`一个组。

## +

`+`将进行正则表达式的逐组匹配。它不会进行零长度匹配。

我的问题是：
我对量词的理解是正确的还是我搞砸了？
此外，是否有任何对大脑友好的 Java 正则表达式指南（Google 上没有针对初学者的可用指南）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T01:51:28.797

是的，你的理解是正确的。

如需指南，只需查找正则表达式；除了函数调用和其他什么之外，Java 没有什么太具体的东西。例如，1 秒搜索导致[http://www.aivosto.com/vbtips/regex.html](http://www.aivosto.com/vbtips/regex.html)

**编辑**：Explosion Pills 指向[http://www.regular-expressions.info/](http://www.regular-expressions.info/)这是一个很好的来源。它有一个[特定于 Java 的部分](http://www.regular-expressions.info/java.html)，但当然模式本身仍然是标准的正则表达式语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T02:19:12.610

> *   一个字符一个字符的匹配，而 ? 去一个团体。

`*`匹配零个或多个。 `?`匹配零或 1。

这些都与群体或角色无关。正则表达式中的“组”或“捕获组”是带括号的元素，可以通过该方法单独提取`java.util.regex.Matcher.group`。

`(foo)*`匹配`""`, `"foo"`，`"foofoo"`所以显然正文不需要是单个字符。

`(foo)?`匹配`""`and`"foo"`但不是`"foofoo"`.

> *   将进行正则表达式的逐组匹配。它不会进行零长度匹配。

No. `+`与 body 匹配一次或多次，因此`x*`相当于`(?:x+)?`。`+`操作员可以很好地执行零长度匹配 。`()+`匹配空字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T01:54:29.960

我的理解是，`?`如果字符出现 0 次或 1 次`*`则匹配，如果出现任意次数（包括 0）`+`则匹配，如果至少出现一次则匹配。

# java - Java Swing 图像不显示？

> ID：14928317
> 
> 赞同：1
> 
> 时间：2013-02-18T01:47:50.100
> 
> 标签：java, swing, debugging

我已经用 Java 编写了一个小程序，作为我的编程课程的一部分，它记录一个人的生日并找到他们出生的星期几。根据分配规范，我们也将把这个小程序放在我们的 Amazon EC2 虚拟服务器上。

现在，当从 JTable 中选择此人时，程序会获取他们的信息以及图像文件的路径，该图像文件也位于他们的信息旁边的 JTable 中。因此，例如，您可以选择包括：

> | 约翰·多伊 | 17 | 02 | 2013 | /图像/约翰.jpg |

当我在本地机器上运行它时，一切都按预期工作 - 计算日期并显示图像。但是，当我将它放在我的服务器上时，会发生以下两种情况之一：

1.  如果我将“显示日期”代码放在“显示图像”代码之前，那么当我按下“计算”按钮时，只显示文本而图像不显示。
2.  如果我将“显示图像”代码放在“显示日期”代码之前，当我按下“计算”按钮时不会发生任何事情。

这里可能会发生什么？我的图像仍在“images/Name.jpg”路径中，我什至尝试使用整个路径（“ [https://myUsername.course.ca/assignment/images/Name.jpg](https://myUsername.course.ca/assignment/images/Name.jpg) ”）。都不行！这种奇怪的行为会有什么明显的原因吗？

```
/**
 * Method that handles the user pressing the "Calculate" button
 */
private class btnCalculateHandler implements ActionListener {
    public void actionPerformed(ActionEvent e) {
        int result;

        name = (String)table.getValueAt(table.getSelectedRow(), 0);

        day = Integer.parseInt((String)table.getValueAt(table.getSelectedRow(), 1));
        month = Integer.parseInt((String)table.getValueAt(table.getSelectedRow(), 2));
        year = Integer.parseInt((String)table.getValueAt(table.getSelectedRow(), 3));

        result = calculateDayOfWeek(day, month, year);

        writeToFile();

        ImageIcon imgPerson = new javax.swing.ImageIcon((String)table.getValueAt(table.getSelectedRow(), 4));
        Image person = imgPerson.getImage();
        Image personResized = person.getScaledInstance(75, 100, java.awt.Image.SCALE_SMOOTH);
        ImageIcon imgPersonResized = new ImageIcon(personResized);
        image.setIcon(imgPersonResized);

        outputValue.setText(name + " was born on a " + days[result] + ".");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:05:39.507

我看到的第一个问题是......

```
ImageIcon imgPerson = new javax.swing.ImageIcon((String)table.getValueAt(table.getSelectedRow(), 4)) 
```

`ImageIcon(String)`用于指定图像的文件名。这应该用于加载本地磁盘的图像，而不是网络路径。

If the images are loaded relative to the to the applet, you would use `Applet#getImage(URL, String)` passing it a reference of `Applet#getDocumentBase()`

Something like `getImage(getDocumentBase(), (String)table.getValueAt(table.getSelectedRow(), 4))`

A better choice would be to use `ImageIO`. The main reason for this is that it won't use a background thread to load the image and will throw a `IOException` if something goes wrong, making it easier to diagnose any problems...

Something like...

```
BufferedImage image = ImageIO.read(new URL(getDocumentBase(), (String)table.getValueAt(table.getSelectedRow(), 4))); 
```

# python - 使用python动态打印

> ID：14928319
> 
> 赞同：1
> 
> 时间：2013-02-18T01:48:12.137
> 
> 标签：python, dynamic, printing

我有点需要帮助，将特定的动态打印到文本文件，

我可以在终端中使用 1,2,3,4,5 执行动态打印，但是当我尝试打印到文本文件时，它不起作用.. 例如：list = 1,2,3,4,5 动态打印列表

1 //1 更改为 2 然后更改为 3 依此类推

但是当打印到文件时它会这样做：1 2 3 4 5

有人对此有任何想法吗？提前致谢

# jquery - jquery加载以提取特定图像

> ID：14928320
> 
> 赞同：1
> 
> 时间：2013-02-18T01:48:13.267
> 
> 标签：jquery, load

我正在尝试使用 jquery 加载，将特定图像加载到 div 中，这就是我到目前为止所拥有的，不太有效：

```
$(document).ready(function () {  

$('#violin_img_1').load('http://www.klossal.com/klossviolins/inventory.html', function() {
    $(".violin:first").find('.photo').find('img');
});   

}); 
```

.inventory 页面中的 div 结构如下：

```
<div id="bow_cello-VictorFetique_1093" class="iso bow bow_cello instrument_container">
    <div class="about background_notselected">
        <div class="about_txt">
            <div class="about_summary">
                <h3>
                    Price: $15,000
                </h3>
                <br class="spacer">
                <h3>
                        A ﬁne French cello bow branded: Vtor FETIQUE A PARIS, sold with ETIENNE VATELOT certiﬁcate.
                        81 Grams, round reddish brown Pernambuco stick, silver winding, silver mounted ebony frog.   
                </h3>
            </div>
            <h1>
                 Victor Fetique, 1093
            </h1>
            <h2>
                Cello Bow
            </h2>
        </div>
    </div>
    <div class="tile">
        <img class="inventory_tile_img" src="http://www.klossal.com/klossviolins/tiles/inventory_tile.png" alt="">
    </div>
    <div class="photo">
        <img class="instrument" src="http://www.klossal.com/klossviolins/instruments/bows/cellos/VictorFetique_1093.jpg" alt="">
        <div class="enlarge bc">
            <img class="enlarged_unselected" src="http://www.klossal.com/klossviolins/elements/fullscreen_unselected.png"/>
            <img class="enlarged_selected" src="http://www.klossal.com/klossviolins/elements/fullscreen_selected.png"/>
            <div id="VictorFetique_1093" class="enlarged_txt">Enlarge Image</div>
        </div> 
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T02:05:03.807

好吧，如果你想访问那个元素，你应该像这样加载它：

```
$('#violin_img_1').load('http://www.klossal.com/klossviolins/inventory.html .violin:first .photo img') 
```

你也是同一个域吗？：

> 由于浏览器安全限制，大部分“Ajax”请求都受同源策略的约束；请求无法从不同的域、子域或协议成功检索数据。

[关联](http://api.jquery.com/load/)

# arrays - “double”类型的输入参数的未定义函数“avg”

> ID：14928323
> 
> 赞同：0
> 
> 时间：2013-02-18T01:48:32.840
> 
> 标签：arrays, image, matlab, cell

输入此代码时，我不断收到此错误。我试图最终使用嵌套的 for 循环将彩色图像转换为灰度。继承人错误消息“未定义函数 'avg' 类型的输入参数 'double'”

```
x = imread('RickMoranis.jpg');
r = size(x, 1);
c = size(x, 2);

 for row = 1:r 
    for col = 1:c 
       y= mean(avg(row,col,:));
    end
end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T01:53:28.030

没有内置函数`avg`。

很可能，你想写

```
y= mean(x(row,col,:)); 
```

请注意，除了双循环，您还可以编写

```
y = mean(x,3); 
```

最后，如果你有图像处理工具箱，你会想检查`rgb2gray`RGB 到灰度的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:56:09.303

如果您希望 avg 计算平均值，请使用平均值。看来您的代码中已经有了命令 mean 。matlab中没有内置函数avg。

# r - R - 计算一个字符串的字符与另一个字符之间的匹配，没有替换

> ID：14928326
> 
> 赞同：11
> 
> 时间：2013-02-18T01:48:46.787
> 
> 标签：r

我有一个关键字（例如“绿色”）和一些文字（“我不喜欢他们，我是山姆！”）。

**我想看看关键字（'g'，'r'，'e'，'e'，'n'）中有多少个字符出现在文本中（以任何顺序）。**

在这个例子中，答案是 3 - 文本没有 G 或 R，但有两个 E 和一个 N。

我的问题是，如果文本中的字符与关键字中的字符匹配，则它*不能*用于匹配关键字中的不同字符。

例如，如果我的关键字是'green'，那么“匹配字符”的数量仍然是 3（一个 N 和两个 E），因为文本中只有两个 E，而不是 3（匹配关键字中的第三个 E） .

我怎么能用 R 写这个？这只是在我记忆的边缘打勾-我觉得这是一个常见问题，但措辞不同（有点像没有替换的采样，但是“匹配没有替换”？）。

例如

```
keyword <- strsplit('greeen', '')[[1]]
text <- strsplit('idonotlikethemsamiam', '')[[1]]
# how many characters in keyword have matches in text,
# with no replacement?
# Attempt 1: sum(keyword %in% text)
# PROBLEM: returns 4 (all three Es match, but only two in text) 
```

更多预期输入/输出示例（关键字、文本、预期输出）：

*   '绿色'，'idonotlikethemsamiam'，3（G，E，E）
*   '绿色'，'idonotlikethemsamiam'，3（G，E，E）
*   “红色”、“idonotlikethemsamiam”、2（E 和 D）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-18T02:15:31.033

函数 pmatch() 非常适合这个。虽然在这里使用长度是本能的，但长度没有 na.rm 选项。所以为了解决这个麻烦，我们使用了 sum(!is.na()) 。

```
keyword <- unlist(strsplit('greeen', ''))
text <- unlist(strsplit('idonotlikethemsamiam', ''))

sum(!is.na(pmatch(keyword, text)))

# [1] 3

keyword2 <- unlist(strsplit("red", ''))
sum(!is.na(pmatch(keyword2, text)))

# [1] 2 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T01:53:51.663

也许您正在寻找关键字的独特组成部分？尝试：

```
keyword <- unique(strsplit('greeen','')[[1]]) 
```

# webkit - WebView 标题有时不应该为 null

> ID：14928327
> 
> 赞同：0
> 
> 时间：2013-02-18T01:49:09.580
> 
> 标签：webkit, vala, webkitgtk

我正在用 Vala 和 WebKitGTK+ 编写一个简单的浏览器。我需要做的一件事是将窗口的标题设置为网页标题的标题，因此我使用`web_view.notify["title"].connect`. 但是，有时 title 的值是`null`，而它显然不应该是。

我记得的一些例子：

*   在 Google 中搜索任何内容。转到下一个结果页面将标题设置为`null`。
*   单击锚链接（例如[http://example.com/page.html#section](http://example.com/page.html#section)）

无论如何，使用 Web Inspector 表明页面确实有一个标题集。

这是我应该报告的错误吗？或者也许我做错了什么？这是我正在使用的代码：

```
//valac --thread --pkg webkitgtk-3.0 --pkg gtk+-3.0 --vapidir=./ test.vala
//The vapidir folder should have webkitgtk-3.0.vapi and webkitgtk-3.0.deps

using WebKit;
using Gtk;

public class Test : Gtk.Window {
    public WebView webview;
    public Test () {
        this.title = "Test";
        this.window_position = Gtk.WindowPosition.CENTER;
        this.set_default_size (800, 600);
        this.hide_titlebar_when_maximized = false;

        this.destroy.connect (() => {
            Gtk.main_quit ();
        });

        var scroll = new ScrolledWindow (null, null);
        this.webview = new WebView ();
        this.add (scroll);
        scroll.add (webview);

        webview.settings.enable_developer_extras = true;
        webview.notify["title"].connect ((sender, property) => {
            if (webview.title != null) {
                this.title = webview.title;
                stdout.printf (webview.title + "\n");
            } else {
                stdout.printf ("(null)\n");
            }
        });

        webview.web_inspector.inspect_web_view.connect ((p0) => {
            var w = new Window ();
            w.window_position = WindowPosition.CENTER;
            w.title = "Inspector";
            w.set_default_size (800,600);
            WebView view = new WebView ();
            unowned WebView view2 = view;
            w.add (view2);
            w.show_all ();
            return view2;
        });
    }

    public static int main (string[] args) {
        Gtk.init (ref args);

        Test app = new Test ();
        app.webview.load_uri ("http://google.com");
        app.show_all ();
        Gtk.main ();
        return 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T13:54:18.197

有一个`title_changed`为此目的而调用的信号，您应该始终使用 webkitgtk 提供的信号而不是 GLib`notify`功能。
（每次值更改时都会发出 GLib `notify`，即使更改只是为了清除旧值，例如在您的情况下。）

# python - 字符串索引超出范围是什么意思？

> ID：14928332
> 
> 赞同：-1
> 
> 时间：2013-02-18T01:50:02.813
> 
> 标签：python, python-3.x

我正在尝试使用 python 制作黑白棋游戏。这是空白板的代码

```
 #reversi
import random
import sys
board = range(9)
def char_range(start, end, step=1):
    for char in range(ord(start), ord(end), step):
        yield char
def drawBoard(board):
    ###this prints out the board
    HLINE = ' +-+-+-+-+-+-+-+-+'
    VLINE = ' | | | | | | | | |'
    print('  a b c d e f g h')
    print(HLINE)
    for y in range(8):
        print(y+1, end = '|.|')
        for x in char_range('a','h'):
            print('| %s' %(board[x][y]), end='.')
        print('|')
        print(HLINE)
def resetBoard(board):
    #blanks out the board
    for x in char_range('a', 'h'):
        for y in range(8):
            board[x][y] = '.'
    #starters
    board[c][3] = 'X'
    board[c][4] = 'O'
    board[d][3] = 'O'
    board[d][4] = 'X'
def getNewBoard():
    #new board
    board = []
    for i in range(9):
        board.append([' '] * 9)
    return board
getNewBoard()
drawBoard(board)
resetBoard(board) 
```

出于某种原因，当我执行它时，我收到以下消息：

```
 File "C:\Users\Larry\Desktop\test.py", line 18, in drawBoard
print('| %s' % (board[x][y]), end='.')
IndexError: string index out of range 
```

这是什么意思。我需要改变吗

```
char_range() 
```

或者

```
 print('| %s' % (board[x][y]), end='.') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:15:58.293

正如 wim 评论的那样，dict 通常是实现这样的板的完美方式

```
def getNewBoard():
    #new board
    board = {}
    for x in range(8): # or x in 'abcdefgh': if you prefer
        for y in range(8):
            board[x, y] = ' '
    return board 
```

并且不要忘记将董事会分配给`board`

```
board = getNewBoard() 
```

# php - jQuery .ajax 将整个 JavaScript 数组传递给 PHP

> ID：14928335
> 
> 赞同：1
> 
> 时间：2013-02-18T01:50:11.727
> 
> 标签：php, jquery, ajax

```
tdata = new Array();  
tdata['id'] = "helloid";  
tdata['name'] = "helloname";  
tdata['location'] = "hellolocation";  
tdata['about'] = "helloabout";  
tdata['company'] = "hellocompany";  
tdata['website'] = "hellowebsite";  

$.ajax({
    url: 'export.setsession.php',
        data: { tdata: tdata.id 
    },
    type: 'post',
    success: function (output) {
        //$(location).attr('href', 'index.php');
        alert("girdsposted");
    }
}); 
```

以上工作正常，但如果可能的话，我想将数组作为一个整体传递，例如 data: { tdata: tdata } 而不是仅传递 id。这是可能的还是有替代方案？我还不能将整个数组放入 PHP 中，这是我可以阅读的某种形式......

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T01:56:31.427

使用以下命令创建 JSON 字符串：

```
JSON.stringify({ json: tdata }); 
```

然后将其转换为 PHP 数组：

```
json_decode($data); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T01:59:09.950

Have you considered using the [JSON.stringify() method](http://www.json.org/js.html), which will transform your tdata element into a JSON string :

```
data: JSON.stringify(tdata) 
```

# c# - 将字符串放入列表 并输出

> ID：14928336
> 
> 赞同：0
> 
> 时间：2013-02-18T01:50:13.250
> 
> 标签：c#, .net, string, winforms, list

我有一个测试项目，将 4 个字符串放在一个列表中，但似乎做错了。我正在尝试使用 for 和 foreach 循环在 2 个文本框中查看我的列表。

```
private void button1_Click(object sender, EventArgs e)
{
    List<string[]> testList2 = new List<string[]>();

    string[] text = { textBox1.Text, textBox2.Text, textBox3.Text, textBox4.Text };
    testList2.Add(text);

    textBox5.Text = testList2.Count.ToString();

    foreach (string[] list1 in testList2)
    {
        foreach (string list2 in list1)
        {
            textBox6.Text = list2.ToString();
        }
    }
    string temp = testList2.ToString();
    for (int i = 0; i < testList2.Count; i++)
    {
        for (int j = 0; j < i; j++)
        {
            textBox7.Text = testList2[j].ToString();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:05:10.383

如果没有您告诉我们您的问题是什么，我只能猜测并非所有值都在您想要的文本框中。您应该使用 AppendText 而不是 Text

```
 private void button1_Click(object sender, EventArgs e)
    {
        List<string[]> testList2 = new List<string[]>();

        String[] text = { textBox1.Text, textBox2.Text, textBox3.Text, textBox4.Text };
        testList2.Add(text);

        textBox5.Text = testList2.Count.ToString();

        foreach (string[] list1 in testList2)
        {
            foreach (string list2 in list1)
            {
                textBox6.AppendText(list2);
            }
        }

        for (int i = 0; i < testList2.Count; i++)
        {
            for (int j = 0; j < i; j++)
            {
                textBox7.AppendText(testList2[i][j]);
            }
        }
    }
} 
```

如果我是正确的，您尝试制作的是字符串列表。如果是这样，就没有嵌套的理由。这是你想要的吗？

```
 private void button1_Click(object sender, EventArgs e)
    {
        List<String> testList2= new List<String>();

        testList2.Add(textBox1.Text);
        testList2.Add(textBox2.Text);
        testList2.Add(textBox3.Text);
        testList2.Add(textBox4.Text);

        textBox5.Text = testList2.Count.ToString();

        foreach (String val in testList2)
        {      
            textBox6.AppendText(val);
        }

        for (int i = 0; i < testList2.Count; i++)
        {
            textBox7.AppendText(testList2[i]);
        }
    }
} 
```

# php - PHP/jQuery 传递回车似乎破坏了 jQuery

> ID：14928340
> 
> 赞同：1
> 
> 时间：2013-02-18T01:50:22.613
> 
> 标签：php, jquery, jquery-ui

jQuery 前端，php/mySql 后端...我正在传递一个文本区域 - 为 htmlspecialchars() 擦洗它并执行 mysql_real_escape_string() 一切正常，但是当我尝试将其拉出并“编辑”它时以同样的形式，jQuery 停止工作 - 到模式窗口甚至不会弹出的地步......

一切都按预期工作 - 直到我在文本区域中输入回车符......

我正在使用这个 js 来填充表单字段...

```
// loop and populate - must have matching field names to key names
$.each( data, function( key, value ) {
    $( '#' + key ).val( value );
}); 
```

我正在使用 JSON 调用来填充编辑表单...并且 JSON 会返回回车...所以问题不在后端...

JSON

```
{ "id":"12", "for_customer_id":"18","customer_id":"20", "engagement_label":"", "part_number":"asdwew", "part_description":"wwe wew  wew", "defect_description":" asd asd asd asd as ", "notification_date":"01/01/2013", "notification_timeCTZ":"3pm", "emp_training_on_file":"Yes", "work_instructions":"hhhllkjijj asd  asd  a sd a
new row", "supervisor_id":"25", "start_date":"", "end_date":"", "date_completed":"" } 
```

“工作说明” - 它说“新行”就在 CR 之后。

我错过了什么？？？谢谢

我可能选择了“错误”的方式来执行此操作 - 但我决定在 PHP 中的服务器上执行此操作……但是即使我正确替换了 chrs，JSON 似乎仍然存在消耗问题……在哪里我可以找到 JSON 和回车所需的信息吗...帮助！谢谢。

我的 PHP 放入 db 已被清除...基于一些阅读 - 我尝试了 1,2 和 3 个斜杠 () （这是一个在字符串到达​​ SQL 语句之前格式化字符串的函数）

```
function parse( $text ){
$parsedText = str_replace( chr(10), '', $parsedText );
return str_replace( chr(13), '\\\n', $parsedText );
} 
```

我的 PHP 出来了 - 再次基于一些阅读...由于需要特定的数据结构，我正在制作自己的 JSON...（这是一个在将字符串放入 JSON 之前格式化字符串的函数）

```
function parseString( $string ) {//function to make JSON CR and the like suitable for comsumption 
$string = str_replace( '\\', '\\\\', $string );
$string = str_replace( '/', '\\/', $string );
$string = str_replace( '"', '\\'.'"', $string );
$string = str_replace( '\b', '\\b', $string );
$string = str_replace( '\t', '\\t', $string );
$string = str_replace( '\n', '\\n', $string );
$string = str_replace( '\f', '\\f', $string );
$string = str_replace( '\r', '\\r', $string );
$string = str_replace( '\u', '\\u', $string );
return $string;
} 
```

# java - 如何处理 $_REQUEST 中的可变数据量？

> ID：14928344
> 
> 赞同：0
> 
> 时间：2013-02-18T01:50:57.007
> 
> 标签：java, php, http

让我先说我并不真正了解 PHP……我正在为一个项目摆弄它。

我正在将 Java 程序中的数据发布到我的 .php 文件中。我当前的问题是，现在我希望我的 Java 函数将数据发布到 PHP 文件，但它不会一直存在。例如，有时我想发送这些对：

```
 (fruit1, apple)
 (fruit2, orange)
 (fruit3, banana) 
```

有时我只想发送

```
 (fruit1, apple)  
 (fruit2, orange) 
```

我怎样才能智能`$_REQUEST`地知道数据是否存在？如果当我这样做`$_REQUEST['fruit3']`并且那里什么都没有，就像在最后一种情况下，会发生什么？那是一个`null`吗？在这种情况下会`if ($_REQUEST['fruit3'])`评估为假吗？

我显然想最终做这样的事情：（这是一种伪代码）

```
 for ($i=0; $i < totalFruits; $i++)
 {
       processFruit($_REQUEST[fruit + 'i']);
 } 
```

我很感激任何帮助以干净/正确的方式做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T01:54:30.510

您可以简单地遍历请求中的每个变量并检查它是否以水果开头。使用严格 === 条件，因为您正在检查字符串中的起始位置而不是错误。

```
foreach ($_REQUEST as $key => $val) {
    // make sure fruit is at the beginning of the string, but not false
    if (strpos($key, 'fruit')===0) { 
        processFruit($val);
    }
} 
```

# php - 谁能解释这段代码？如何用 PHP 模拟它？

> ID：14928347
> 
> 赞同：0
> 
> 时间：2013-02-18T01:51:05.180
> 
> 标签：php, web-applications, pike

所以我正在尝试使用一些用 pike 编写的代码来制作一个相对复杂的 php 脚本。完整的源代码可在此处获得：[http](http://www.text-image.com/pic2html.pike) ://www.text-image.com/pic2html.pike 。这只是一种学习体验，因为我不会发布它。但是我想让它工作！

```
int main(int arg 

            if (temp > 10485760) {
                werr("Image too large (10MB limit).");
                return 0;
        }

        string info = Stdio.stdin.read(temp);

        if (strlen(info) < temp) {
                werr("Insufficient data uploaded.");
                return 0;
        } 
```

我理解第 3 行的 if 语句。“如果整数 'temp' 大于 10485760，则使用字符串执行函数 'werr' ('Image too large (10MB limit.');

我也理解第 8 行的 if 语句，它与第一个语句非常相似。

我不明白的是

```
string info = Stdio.stdin.read(temp); 
```

我不明白

```
int main(int arg 
```

如果我不得不猜测，我会说函数的结果将应用于一个名为“main”的整数？那正确吗？这怎么能在php中模拟？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T02:01:59.633

我不知道这种语言，但似乎与 C++ 非常相似。

这：

```
int main(int arg 
```

是 PHP 中不存在的 main 函数的开头，因此您可以省略它。在编译语言中，主函数是程序启动时调用的第一个函数。在 PHP 中，请求的文件只是每行执行一次。

并且：

```
string info = Stdio.stdin.read(temp); 
```

感觉像：

```
std::string info;
std::cin >> info; 
```

刚刚从标准输入流中读取。PHP 中没有 iostream 之类的东西，输入是 cookie、POST、GET、DELETE、PUT 等，并且是根据请求进行的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T02:02:14.940

这看起来像 C++ 代码（amybe Java 或 C#？但我不知道任何一个 htose）。所有 C 和 C++ 程序都必须只有一个名为`main()`. 当从 C 或 C++ 代码编译的 .exe 运行时，从那里开始执行。它返回一个整数，以便调用它的任何内容都可以判断它是否成功。

这个`werr`电话可能是一些“写错误”的孩子。

第 8 行：`string info = Stdio.stdin.read(temp);`使用标准 i/o 例程（在 stdio 中）从标准输入（stdin）读取一行，并将其存储在一个名为`info`string 的变量中。

要转换为 PHP，请尝试使用谷歌搜索 ;-)

提示：您可能需要一个表格（但另请参阅[此问题](https://stackoverflow.com/questions/554760/php-standard-input)）。

# arduino - 在 Arduino TFT 触摸屏上制作按钮

> ID：14928348
> 
> 赞同：1
> 
> 时间：2013-02-18T01:51:18.080
> 
> 标签：arduino, microcontroller

所以我有一个 Arduino MEGA2560 和一个 TFT 屏蔽触摸屏。我使用其中一个示例制作 2 个按钮以显示在屏幕上，只需使用`drawRect()`. 但是当我按下它们时，如何让这两个盒子做一些事情呢？我知道这 2 个盒子的坐标，那么如何让它们“感知”触摸并转移到另一个显示屏幕？也许代码示例会很有帮助！谢谢。

我当前的代码如下：您可以向其中添加必要的部分。

```
#include <Adafruit_GFX.h>    // Core graphics library
#include <Adafruit_TFTLCD.h> // Hardware-specific library

#define LCD_CS A3 // Chip Select goes to Analog 3
#define LCD_CD A2 // Command/Data goes to Analog 2
#define LCD_WR A1 // LCD Write goes to Analog 1
#define LCD_RD A0 // LCD Read goes to Analog 0

#define LCD_RESET A4 // Can alternately just connect to Arduino's reset pin

#define BLACK   0x0000
#define BLUE    0x001F
#define RED     0xF800
#define GREEN   0x07E0
#define CYAN    0x07FF
#define MAGENTA 0xF81F
#define YELLOW  0xFFE0
#define WHITE   0xFFFF

Adafruit_TFTLCD tft(LCD_CS, LCD_CD, LCD_WR, LCD_RD, LCD_RESET);

void setup(void) {
  Serial.begin(9600);
  progmemPrintln(PSTR("TFT LCD"));

#ifdef USE_ADAFRUIT_SHIELD_PINOUT
  progmemPrintln(PSTR("Using Adafruit 2.8\" TFT Arduino Shield Pinout"));
#else
  progmemPrintln(PSTR("Using Adafruit 2.8\" TFT Breakout Board Pinout"));
#endif

  tft.reset();

  uint16_t identifier = tft.readID();

  if(identifier == 0x9325) {
    progmemPrintln(PSTR("Found ILI9325 LCD driver"));
  } else if(identifier == 0x9328) {
    progmemPrintln(PSTR("Found ILI9328 LCD driver"));
  } else if(identifier == 0x7575) {
    progmemPrintln(PSTR("Found HX8347G LCD driver"));
  } else {
    progmemPrint(PSTR("Unknown LCD driver chip: "));
    Serial.println(identifier, HEX);
    progmemPrintln(PSTR("If using the Adafruit 2.8\" TFT Arduino shield, the line:"));
    progmemPrintln(PSTR("  #define USE_ADAFRUIT_SHIELD_PINOUT"));
    progmemPrintln(PSTR("should appear in the library header (Adafruit_TFT.h)."));
    progmemPrintln(PSTR("If using the breakout board, it should NOT be #defined!"));
    progmemPrintln(PSTR("Also if using the breakout, double-check that all wiring"));
    progmemPrintln(PSTR("matches the tutorial."));
    return;
  }

  tft.begin(identifier);

  progmemPrint(PSTR("Text                     "));
  Serial.println(startText());
  delay(0);

  progmemPrintln(PSTR("Done!"));
}

void loop(void) {

    startText();
    delay(9999999);

}

unsigned long startText() {
  tft.fillScreen(BLACK);
  unsigned long start = micros();
  tft.setCursor(0, 0);
  tft.println();
  tft.println();
  tft.setTextColor(GREEN);    tft.setTextSize(2.8);
  tft.println("Welcome ");
  tft.println();
  tft.setTextColor(WHITE);    tft.setTextSize(2.5);

  tft.println();

  tft.drawRect(5, 150, 110, 110, YELLOW);
  tft.drawRect(130, 150, 110, 110, RED);
  tft.setCursor(155, 170);
  tft.setTextColor(RED);
  tft.println("OFF");
  tft.fillRect(5, 150, 110, 110, YELLOW);
  tft.fillRect(13, 158, 94, 94, BLACK);
  tft.setTextColor(GREEN);
  tft.setCursor(20, 170);
  tft.println("ON");

  return micros() - start;

}

// Copy string from flash to serial port
// Source string MUST be inside a PSTR() declaration!
void progmemPrint(const char *str) {
  char c;
  while(c = pgm_read_byte(str++)) Serial.print(c);
}

// Same as above, with trailing newline
void progmemPrintln(const char *str) {
  progmemPrint(str);
  Serial.println();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-04T12:24:10.170

您需要触摸屏库

```
#include <TouchScreen.h>
//inside loop  
    TSPoint p = ts.getPoint();
    // Retrieve a point  
    p = ts.getPoint();
    Serial.print("X = "); Serial.print(p.x);
    Serial.print("\tY = "); Serial.print(p.y);
    Serial.print("\tPressure = "); Serial.println(p.z); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-04-15T13:01:13.947

Here is an UART TFT LCD, it supports WYSIWYG editor to build your GUI in PC and download it via USB.

It can be controlled by Arduino via UART, so just use the Serial.print() you can make it display many images. And you can even build Font by yourself and download to the LCD.

See [https://www.indiegogo.com/projects/nextion-a-cost-effective-high-performance-tft-hmi/x/4467372](https://www.indiegogo.com/projects/nextion-a-cost-effective-high-performance-tft-hmi/x/4467372)

# java - Java：文件到字符串，使用缓冲区的问题，字节数组不干净

> ID：14928349
> 
> 赞同：0
> 
> 时间：2013-02-18T01:51:19.493
> 
> 标签：java, string, buffer, bytearray

采取以下静态方法：

```
public static String fileToString(String filename) throws Exception {
        FileInputStream fis = new FileInputStream(filename);
        byte[] buffer = new byte[8192];
        StringBuffer sb = new StringBuffer();   
        int bytesRead; // unused? weird compiler messages...
        while((bytesRead = fis.read(buffer)) != -1) { // InputStream.read() returns -1 at EOF
            sb.append(new String(buffer));
        }
        return new String(sb);
    } 
```

如您所见，一切看起来都不错，非常适合小型文本文件。但是，一旦您处理包含数千行的大文件，就会遇到重复文本的问题。根据我的直觉，我认为`byte[] buffer`是“不洁”，可以这么说。所以我在方法中添加了以下行：

`buffer = new byte[8192];`

所以现在是：

```
public static String fileToString(String filename) throws Exception {
    FileInputStream fis = new FileInputStream(filename);
    byte[] buffer = new byte[8192];
    StringBuffer sb = new StringBuffer();   
    int bytesRead; // unused? weird compiler messages...
    while((bytesRead = fis.read(buffer)) != -1) { // InputStream.read() returns -1 at EOF
        sb.append(new String(buffer));
        buffer = new byte[8192]; // added new line here
    }
    return new String(sb);
} 
```

它是完美的，除了在静态方法返回的字符串末尾，我得到很多空字符（取决于缓冲区大小）。这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:24:46.517

不要重新发明轮子。如果您不做学校作业，请使用**Apache commons IO**等现有库。 [http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html#toString%28java.io.InputStream,%20java.nio.charset.Charset%29](http://commons.apache.org/io/apidocs/org/apache/commons/io/IOUtils.html#toString%28java.io.InputStream,%20java.nio.charset.Charset%29)

例如，您只需几行就可以将文件读入字符串，如下所示：

```
public static String fileToString(String filepath) throws Exception {
     return IOUtils.toString(new FileInputStream(filepath), "utf-8");
} 
```

这将使您免于大量手写自定义代码，并且可能有更少的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T02:00:29.977

actually: `// unused? weird compiler messages...`

is not weird. You never read this.

how could `sb.append(new String(buffer));` know how many bytes are written to the buffer.

Exactly, this is where bytesRead comes into play.

So you need `new String(bytes, offset, length)`

```
public static String fileToString(String filename) throws Exception {
    FileInputStream fis = new FileInputStream(filename);
    byte[] buffer = new byte[8192];
    StringBuffer sb = new StringBuffer();   
    int bytesRead; // unused? weird compiler messages...
    while((bytesRead = fis.read(buffer)) != -1) { // InputStream.read() returns -1 at EOF
        sb.append(new String(buffer,0,bytesRead));
        buffer = new byte[8192];
        bytesRead=0;
    }
    return new String(sb);
} 
```

might work

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T02:04:38.777

你真的不应该读取字节并从原始字节创建一个字符串。这是错误的，因为它完全忽略了文本的编码。您可能很幸运并且正在阅读 ASCII，在这种情况下，一切都会顺利进行。在所有其他情况下，这是自找麻烦。

您确实应该使用包装了 InputStreamReader 的 BufferedReader，该 InputStreamReader 包装了您的源 InputStream。

# asp.net - 如何解决 Kerberos 双跳问题？

> ID：14928350
> 
> 赞同：36
> 
> 时间：2013-02-18T01:51:19.833
> 
> 标签：asp.net, wcf, impersonation, kerberos

我在从 Web 应用程序中调用 Web 服务时遇到了一些问题，我希望这里的人能够提供帮助。据我所知，这*似乎*与 Kerberos[双跳问题](http://blogs.technet.com/b/askds/archive/2008/06/13/understanding-kerberos-double-hop.aspx)有关。但是，如果是这样，我不确定该怎么做才能真正解决问题。为了让事情变得更难，我没有适当的权限来更改 Active Directory 帐户，因此我需要知道在请求更改时要求什么。在我的情况下，我需要将凭据（集成 Windows 身份验证）从 Web 应用程序传递到后端 Web 服务，以便 Web 服务在正确的用户上下文下运行。

这是我的确切问题：

**这有效**

![工作场景](../Images/9b7080792e9bc1cea5352d7d7e39b5f5.png)

**这不起作用**

![非工作场景](../Images/1de6a5395eda86fcff01012b9b040276.png)

工作场景和非工作场景之间的唯一区别是工作场景在本地主机上运行应用程序（无论是开发人员的 PC 还是在相关服务器上），而非工作示例在另一台机器上运行*。*两种场景之间的代码完全相同。

**我试过的**

1.  将 SPN 添加到为每个服务器运行应用程序池的域帐户`setspn -a http/server1 DOMAIN\account`
2.  不同的模仿方法
3.  删除模拟代码`using(...)`并作为应用程序池帐户执行 Web 服务调用。这按预期工作。

有没有人知道我可以做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-19T19:22:46.893

必须信任中间服务器才能进行委派。否则，将不会委托任何凭证，并且中间服务器无法模拟原始客户端。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T17:10:19.363

通常原因是服务器 1 没有将委托令牌传递给服务器 2。因此，当服务器 2 尝试使用该身份验证票证前往其他地方（可能是 SQL 服务器）时，它会失败。

您应该为 WCF 调用设置模拟级别

```
ClientCredentials.Windows.AllowedImpersonationLevel = TokenImpersonationLevel.Delegation 
```

[http://msdn.microsoft.com/en-us/library/system.servicemodel.security.windowsclientcredential.allowedimpersonationlevel.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.security.windowsclientcredential.allowedimpersonationlevel.aspx)

# python - 如何将异步插入到 mongodb 的日志中？

> ID：14928351
> 
> 赞同：3
> 
> 时间：2013-02-18T01:51:23.647
> 
> 标签：python, mongodb, asynchronous, pymongo

我想使用 PyMongo 作为 Django 应用程序的记录器。

我不介意日志表中的某些插入是否丢失，因此我想将日志发送到另一台服务器的mongodb，并继续执行而不等待确认。

我正在阅读 pymongo 文档，但我不清楚集合中的插入是否阻塞。

我正在考虑在 django 模型方法中执行此操作

```
from pymongo import MongoClient
conn = MongoClient('mongoserver', 27017)
db   = conn.main
col  = db.log
col.insert({"user": "Pedro", "action": "search", "Origin": "Katmandu"}, w=0)
conn.close() 
```

我不知道我的插入是否像那样异步以及是否应该关闭连接

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T02:54:27.327

因为您将`w=0`参数传递给`insert`，所以该操作是非阻塞的，并且该调用将简单地将文档排队以进行插入和返回。

并保持连接打开以获得最佳性能。

# c# - 是什么导致asp.net内存不足异常

> ID：14928353
> 
> 赞同：3
> 
> 时间：2013-02-18T01:51:29.390
> 
> 标签：c#, asp.net, out-of-memory, streamreader

我有一个简单的 asp.net 网站，它将一个大文本文件读入内存并进行一些处理。下面是引发 OOM 异常的代码。在阅读了大约 350k 行之后，我得到了这个错误。每行平均有 1k 个字符。IIS 或 ASP.Net 网站是否存在内存限制？我的服务器仍然有大量的物理内存。谢谢。

```
List<string> geos = new List<string>();
using (StreamReader geoReader = new StreamReader(File.OpenRead("file.txt")))
{
    while (geoReader.EndOfStream == false)
    {
        try
        {
            geos.Add(geoReader.ReadLine());
        }
        catch (Exception ex) { }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T02:23:01.023

您的工作进程很可能配置为 32 位 (x86)。在这种情况下，您将至少在大约 2GB 的已分配对象上达到 OOM，但很可能更早。

如果您确实需要在内存中加载超过 1GB 的对象，请考虑在 64 位进程中运行您的代码。

注意：上面假设您实际上内存不足，而不是尝试一次进行 2GB+ 分配 - 默认情况下会抛出 OOM（据我所知，最新的 .Net 允许更大的分配）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T03:18:18.180

我在 msdn 上进行了一些搜索，发现了一些可能对您有所帮助的东西。

> 有几件事需要考虑：首先，当“Process\Virtual Bytes”在虚拟地址空间限制（通常为 2 GB）的 600 MB 以内时，遇到 OutOfMemoryException 的可能性开始显着增加，其次，测试表明“Process\Virtual Bytes”通常比“Process\Private Bytes”大不超过 600 MB。这种差异部分是由于 GC 维护的 MEM_RESERVE 区域，允许它在需要时快速提交更多内存。总之，这意味着当“Process\Private Bytes”超过 800 MB 时，遇到 OutOfMemoryException 的可能性会增加。在此示例中，机器具有 4 GB 的物理 RAM，因此您需要将内存限制设置为 20% 以避免出现内存不足的情况。您可以尝试使用这些数字来最大限度地利用机器上的内存，但如果您想安全地使用它，示例中的数字将起作用。总而言之，将内存限制设置为物理 RAM 的 60% 或 800 MB 中的较小值。由于 v1.1 支持 3 GB 虚拟地址空间，如果将 /3GB 添加到 boot.ini，则可以安全地使用 1,800 MB 而不是 800 MB 作为上限

[http://msdn.microsoft.com/en-us/library/ms972959](http://msdn.microsoft.com/en-us/library/ms972959)

另一个可能的原因可能是没有安装 Service Pack 1 for .NET Framework 1.1。我猜在没有安装服务包的情况下发生内存异常的可能性更高。

# java - 在 SQLite android 中添加表

> ID：14928356
> 
> 赞同：-1
> 
> 时间：2013-02-18T01:52:06.003
> 
> 标签：java, android, sqlite

我正在研究如何在 sqlite 数据库中添加表以获取更多信息，但我无法掌握它是如何真正完成的。

我有这个代码：

```
package com.example.database;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase.CursorFactory;

public class SQLiteAdapter {

 public static final String MYDATABASE_NAME = "SCORING";
 public static final String MYDATABASE_TABLE = "SCORING_TABLE";
public static final String MYDATABASE_TABLE1 = "Assessment";
 public static final int MYDATABASE_VERSION = 3;
 public static final String KEY_ID = "_id";
 public static final String KEY_CONTENT1 = "Content1";
 public static final String KEY_CONTENT2 = "Content2";
 public static final String KEY_CONTENT3 = "Content3";

 //create table SCORING (ID integer primary key, Content text not null);
 private static final String SCRIPT_CREATE_DATABASE =
  "create table " + MYDATABASE_TABLE + " ("
  + KEY_ID + " integer primary key autoincrement, "
  + KEY_CONTENT1 + " text not null, "
  + KEY_CONTENT2 + " text not null, "
  + KEY_CONTENT3 + "text not null);";

 private SQLiteHelper sqLiteHelper;
 private SQLiteDatabase sqLiteDatabase;

 private Context context;

 public SQLiteAdapter(Context c){
  context = c;
 }

 public SQLiteAdapter openToRead() throws android.database.SQLException {
  sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
  sqLiteDatabase = sqLiteHelper.getReadableDatabase();
  return this; 
 }

 public SQLiteAdapter openToWrite() throws android.database.SQLException {
  sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
  sqLiteDatabase = sqLiteHelper.getWritableDatabase();
  return this; 
 }

 public void close(){
  sqLiteHelper.close();
 }

 public long insert(String content1, String content2, String content3){

  ContentValues contentValues = new ContentValues();
  contentValues.put(KEY_CONTENT1, content1);
  contentValues.put(KEY_CONTENT2, content2);
  contentValues.put(KEY_CONTENT3, content3);
  return sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);
 }

 public int deleteAll(){
  return sqLiteDatabase.delete(MYDATABASE_TABLE, null, null);
 }

 public Cursor queueAll(){
  String[] columns = new String[]{KEY_ID, KEY_CONTENT1, KEY_CONTENT2, KEY_CONTENT3};
  Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns,
    null, null, null, null, null);

  return cursor;
 }

 public class SQLiteHelper extends SQLiteOpenHelper {

  public SQLiteHelper(Context context, String name,
    CursorFactory factory, int version) {
   super(context, name, factory, version);
  }

  @Override
  public void onCreate(SQLiteDatabase db) {
   // TODO Auto-generated method stub
   db.execSQL(SCRIPT_CREATE_DATABASE);
  }

  @Override
  public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
   // TODO Auto-generated method stub
// If you need to add a column
    if (newVersion > oldVersion) {
        db.execSQL("ALTER TABLE SCORING_TABLE ADD COLUMN Content4 TEXT");
    }
  }
 } 
} 
```

对于第二个，我很难将数据输入到第二个表中

```
package com.example.database;

import com.example.database.R;
import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class AndroidSQLite extends Activity {

 EditText  inputContent2;
 TextView textView1, textView2;
 Button buttonAdd, buttonDeleteAll;

 private SQLiteAdapter mySQLiteAdapter;
 ListView listContent;

 SimpleCursorAdapter cursorAdapter;
 Cursor cursor;

   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);

   textView1 = (TextView)findViewById(R.id.textView1);
   textView2 = (TextView)findViewById(R.id.textView2);
   inputContent2 = (EditText)findViewById(R.id.content2);
   buttonAdd = (Button)findViewById(R.id.add);
   buttonDeleteAll = (Button)findViewById(R.id.deleteall);
      listContent = (ListView)findViewById(R.id.contentlist);

   mySQLiteAdapter = new SQLiteAdapter(this);
   mySQLiteAdapter.openToWrite();

   cursor = mySQLiteAdapter.queueAll();
   String[] from = new String[]{SQLiteAdapter.KEY_ID, SQLiteAdapter.KEY_CONTENT1,     SQLiteAdapter.KEY_CONTENT2, SQLiteAdapter.KEY_CONTENT3};
   int[] to = new int[]{R.id.id, R.id.text1, R.id.text2, R.id.text3};
   cursorAdapter =
    new SimpleCursorAdapter(this, R.layout.row, cursor, from, to);
   listContent.setAdapter(cursorAdapter);

   buttonAdd.setOnClickListener(buttonAddOnClickListener);
   buttonDeleteAll.setOnClickListener(buttonDeleteAllOnClickListener);

   }

   Button.OnClickListener buttonAddOnClickListener
   = new Button.OnClickListener(){

  @Override
  public void onClick(View arg0) {
   // TODO Auto-generated method stub 
             int a=Integer.parseInt(textView1.getText().toString());
             int  b=a+2;
          String s1 = String.valueOf(b);
          textView1.setText(s1);
         Toast.makeText(getApplicationContext(), "Wrong",
                    Toast.LENGTH_SHORT).show();

   String data1 = textView1.getText().toString();
   String data2 = inputContent2.getText().toString();
   String data3 = textView2.getText().toString();
   mySQLiteAdapter.insert(data1, data2, data3);
   updateList();

  }

   };

   Button.OnClickListener buttonDeleteAllOnClickListener
   = new Button.OnClickListener(){

  @Override
  public void onClick(View arg0) {
   // TODO Auto-generated method stub
   mySQLiteAdapter.deleteAll();
   updateList();
  }

   };

 @Override
 protected void onDestroy() {
  // TODO Auto-generated method stub
  super.onDestroy();
  mySQLiteAdapter.close();
 }

 private void updateList(){
  cursor.requery();
   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:39:29.877

我个人发现使用 ContentProviders 是一种更清晰、更易于维护的方式来管理多个表。

这里有一篇很好的文章解释了 ContentProviders 和其他处理 android 数据库的方法/

[http://www.vogella.com/articles/AndroidSQLite/article.html#tutorialusecp](http://www.vogella.com/articles/AndroidSQLite/article.html#tutorialusecp)

# jquery - .attr() 不适用于 javascript:appendChild 创建的 lement

> ID：14928357
> 
> 赞同：1
> 
> 时间：2013-02-18T01:52:12.377
> 
> 标签：jquery, html, append, attr

我有一组缩略图，例如：

```
<div id='thumb' class='anImage.jpeg'>
<img src='anImage.jpg' />
</div>
......
<div id='thumb' class='anotherImage.jpeg'>
<img src='anotherImage.jpg' />
</div> 
```

如您所见，我使用每个 DIV 的“类”以便将来能够通过它包含的图像名称找到所需的 DIV。

我有一个 Uploader（模仿 ajax，使用 iframe）。当我上传新图片时，我的 javascript 函数会从 php 文件中获得确认。如果没问题，我的 js 代码会添加（末尾的 appendChild）一个新的 DIV&IMG，如下所示：

```
<div id='thumb' class='newUploaded.jpeg'>
<img src='newUploaded.jpg' />
</div> 
```

现在关于问题：我有另一个 jQuery 函数，通过单击任何图像（重命名按钮）发送到被单击的 php 文件图像名称。但是在服务器端重命名文件后，我需要使用 jQuery 在客户端更新图像名称。所以，我做类似的事情：

```
$.ajax({
.....
success: function(){
   $("div.oldname").attr("class", "newname");
}
.....
}); 
```

并且仅当文件是在上传后刚刚创建时才起作用。我的代码不适用于刚刚由 javascript appendChild() 函数创建的元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:54:46.407

发现..问题是

```
<div class="filename"></div> 
```

文件名如：img.jpg 有一个点 :) 所以我们的类不正确：

```
$('div.img.jpg').blabla() // more than 1 dot ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:02:18.007

您是否尝试过删除旧类并添加新类而不是使用 .attr() 方法：

```
$("div.oldname").removeClass('oldname').addClass('newname'); 
```

另外，您将文件名用作类是否有原因？

# java - 为什么我的 RPC 返回一个使我的应用程序崩溃的字符串？

> ID：14928359
> 
> 赞同：1
> 
> 时间：2013-02-18T01:52:21.813
> 
> 标签：java, google-app-engine

我试图将我的代码缩减到最简单的程度：

这是我的服务器代码

```
public String updateContact(Long AdminID, Long ID,
     String Name,String Phone,
     String KnownAs, String Notes) throws NotLoggedInException {
    {
      String ReturnName="Server NAME";
      LOG.log(Level.WARNING, "updateContact returning:'"+ReturnName+"'");
      return(ReturnName);
    } 
```

这是我的客户代码

```
LogMe(2,"JVD20130217 BEFORE UpdateContact");
ContactService.updateContact(CompanyInfo.getID(), CurrentContactID,
       CurrentContact.getName(), CurrentContact.getPhone(),
       CurrentContact.getKnownAs(), CurrentContact.getNotes(),
       new AsyncCallback<String>()
            {
              public void onFailure(Throwable error)
              {
                LogMe(2,"FAILED UpdateContact");
              }
              public void onSuccess(String NewNamex)
              {
                LogMe(2,"a SUCCESS UpdateContact");
                LogMe(2,"b UpdateContact:"+ "NewNamex: '" + NewNamex+"'");
              }
          });
          LogMe(2,"JVD20130217 AFTER UpdateContact"); 
```

这是输出日志：

```
2: JVD20130217 BEFORE UpdateContact
2: JVD20130217 AFTER UpdateContact 
```

所以你可以看到它似乎永远不会从 RPC 调用返回，但是服务器日志如下：

```
18-Feb-2013 01:49:15 com.diarybooker.server.ContactServiceImpl updateContact
WARNING: updateContact returning:'Server JOHN' 
```

所以看起来它返回OK....

有人知道我可以做些什么来进一步调查吗？或者更好的是，告诉我有什么问题！

# java - Servlet3.0环境中的web.xml文件在哪里？

> ID：14928361
> 
> 赞同：0
> 
> 时间：2013-02-18T01:53:06.377
> 
> 标签：java, jsp, servlet-3.0

我正在寻找`web.xml`Servlet 3.0 环境中的文件。原因是因为我想将欢迎文件从“index.jsp”更改为“hello.jsp”。

我知道在`web.xml`文件中，有一个welcome-file-list，我想更改此设置，以便将index.jsp URL 映射更改为hello.jsp。

所以，我的问题是，web.xml 文件在哪里，或者如果 Servlet 3.0 中没有这样的文件，我该如何更改我的 URL 映射？

很高兴得到这个问题的答案，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T01:56:30.360

使用 servlet 3.0 并不总是需要它，所以如果它不存在，您可以在其中添加一个`WEB-INF/web.xml`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T06:23:45.797

在`Servlet 3.0 web.xml`文件中可以省略。

直接的问题是然后如何映射？

就像下面使用`Annotations`.

```
 @WebServlet(name = "MyServlet",
  urlPatterns = {"/myservlet"}, 
  initParams = {@WebInitParam(name="param1", value="value1")}
 )
 public MyServlet extends HttpServlet
 { 
```

如果您想添加`welcome file`400,500 个状态码异常 ...blah blah ..

用路径创建一个`WEB-INF/web.xml`并给那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T02:00:23.130

The web.xml file is created by yourself when the servlet created

# perl - Perl 谷歌日历 API

> ID：14928371
> 
> 赞同：3
> 
> 时间：2013-02-18T01:53:51.337
> 
> 标签：perl, google-calendar-api

我编写了一个连接到 Google 日历 API 的 Perl 脚本。我遇到了一些问题。

我想删除事件`> "15 Feb 2013"`（有 date的事件`15 Feb 2013 onward`），我找不到这个变量，有人可以建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T05:52:54.613

[Net::Google::Calendar](http://search.cpan.org/dist/Net-Google-Calendar/)是与 Google Calendar API 一起使用的现有库。它有一个[delete_entry 方法](http://search.cpan.org/dist/Net-Google-Calendar/lib/Net/Google/Calendar.pm#delete_entry_%3CNet%3a%3aGoogle%3a%3aCalendar%3a%3aEntry%3E)，这似乎是你想要的。

如果我理解您的要求正确，您想查找从 2013 年 2 月 15 日开始的所有事件并删除它们？我相信那会是...

```
use Net::Google::Calendar;

my $cal = Net::Google::Calendar->new;
$cal->login($username, $password);

my @events = $cal->get_events(
    start-min => "2013-02-15",
);
for my $event (@events) {
    $cal->delete_entry($event);
} 
```

使用原始 API，您将使用[list](https://developers.google.com/google-apps/calendar/v3/reference/events/list)获取条目，使用 timeMin 和 timeMax 来搜索它。然后使用 eventId将其[删除。](https://developers.google.com/google-apps/calendar/v3/reference/events/delete)

```
https://www.googleapis.com/calendar/v3/calendars/$calendarId/events?timeMin=2013-02-15 
```

为您获取事件列表，然后...

```
https://www.googleapis.com/calendar/v3/calendars/$calendarId/events/$eventId 
```

在他们每个人上删除它们。

但是您可能应该使用该模块。

# linux - 如何从远程机器获取文件夹到本地机器？

> ID：14928382
> 
> 赞同：23
> 
> 时间：2013-02-18T01:54:30.980
> 
> 标签：linux, scp

我正在尝试`scp -r usernameipaddress:/path /pathwhereIwanttocopy`，但由于连接被拒绝，我得到了它。

我怎么才能得到它？我怎样才能建立联系？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-18T02:00:02.457

-r 标志应该可以工作。在您的示例中，您似乎忘记了要复制的文件夹的名称。尝试：

```
scp -r nameOfFolderToCopy username@ipaddress:/path/to/copy/ 
```

将文件夹从本地计算机复制到远程计算机。或者

```
scp -r username@ipaddress:/path/of/folder/to/copy /target/local/directory 
```

将文件夹从远程计算机复制到本地计算机。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T02:16:14.203

您可能还想检查一下[`rsync`](http://www.comentum.com/rsync.html)。它有很多用于处理重复项、权限等的选项。

```
rsync -r username@computer:/path/to/source /path/to/dest 
```

或用于上传

```
rsync -r /path/to/source username@computer:/path/to/dest 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T02:04:53.550

如果您的用户目录中有一个文件夹`working`，您只需要：

```
scp -r username@ipaddress:working ./ 
```

很可能你会得到“权限被拒绝”：

```
scp -r username@ipaddress:/working ./ 
```

* * *

你能检查一下`ssh`服务是否在远程机器上运行吗？如果您可以登录，请尝试：

```
ps -aux | grep sshd 
```

# python - 通过代理使用 urllib2

> ID：14928385
> 
> 赞同：2
> 
> 时间：2013-02-18T01:54:56.260
> 
> 标签：python, http, proxy, urllib2

我正在尝试`urllib2`通过代理使用；但是，在尝试了使用 传递我的验证详细信息的几乎所有变体之后`urllib2`，我要么得到一个永远挂起并且什么都不返回的请求，要么得到`407 Errors`. 我可以使用我的浏览器很好地连接到网络，该浏览器连接到 prox-pac 并相应地重定向；但是，即使我使用 prox-pac 重定向到的代理，我似乎也无法通过命令行等执行任何`curl`操作。我尝试使用 将代理设置为 pac 文件中的所有代理，但都不起作用。`wget``urllib2``urllib2`

我当前的脚本如下所示：

```
import urllib2 as url

proxy = url.ProxyHandler({'http': 'username:password@my.proxy:8080'})
auth = url.HTTPBasicAuthHandler()
opener = url.build_opener(proxy, auth, url.HTTPHandler)
url.install_opener(opener)
url.urlopen("http://www.google.com/") 
```

抛出`HTTP Error 407: Proxy Authentication Required`，我也试过：

```
import urllib2 as url

handlePass = url.HTTPPasswordMgrWithDefaultRealm()
handlePass.add_password(None, "http://my.proxy:8080", "username", "password")
auth_handler = url.HTTPBasicAuthHandler(handlePass)
opener = url.build_opener(auth_handler)
url.install_opener(opener)
url.urlopen("http://www.google.com") 
```

挂起`curl`或`wget`超时。

我需要做什么来诊断问题？我怎么可能通过我的浏览器而不是从同一台计算机上的命令行使用看似相同的代理和凭据进行连接？

会不会跟路由器有关系？如果是这样，它如何区分浏览器`HTTP`请求和命令行`HTTP`请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T07:08:28.107

像这样的挫折是促使我使用[Requests](http://python-requests.org "要求")的原因。如果您正在使用 urllib2 进行大量工作，那么您真的应该检查一下。例如，要使用 Requests 执行您希望执行的操作，您可以编写：

```
import requests
from requests.auth import HTTPProxyAuth

proxy = {'http': 'http://my.proxy:8080'}
auth = HTTPProxyAuth('username', 'password')
r = requests.get('http://wwww.google.com/', proxies=proxy, auth=auth)
print r.text 
```

或者你可以将它包装在一个 Session 对象中，每个请求都会自动使用代理信息（另外它会自动存储和处理 cookie！）：

```
s = requests.Session(proxies=proxy, auth=auth)
r = s.get('http://www.google.com/')
print r.text 
```

# asp.net - 在 ASP.NET VB 中编辑 IIS 7 绑定

> ID：14928389
> 
> 赞同：0
> 
> 时间：2013-02-18T01:55:42.057
> 
> 标签：asp.net, vb.net, iis-7.5, windows-server-2008-r2

请问如何使用 VB ASP.NET 在代码中向 IIS 7.5 站点添加新绑定？我不需要编辑、枚举或删除绑定，只需添加一个新绑定。

我想将 IP 88.11.23.12 上的 www.bobspasta.com 添加到站点 PASTASITEDOTNET4（虚构数据）

谢谢您的帮助。

海量极客

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:53:06.810

这就是我在 VB.NET 中的做法

将 IIS 作为 ServerManager，szSite 作为站点，strBind 作为字符串
strBind = "www.bobspasta.com"

IIS = New ServerManager()
szSite = IIS.Sites("PASTASITEDOTNET4")
szSite.Bindings.Add("*:80:" & strBind, "http")

IIS.CommitChanges()
szSite.Stop()
Thread.Sleep(250 )
szSite.Start()

# entity-framework - 配置两端都需要的关系（一对一）

> ID：14928399
> 
> 赞同：0
> 
> 时间：2013-02-18T01:56:41.380
> 
> 标签：entity-framework

[http://msdn.microsoft.com/en-US/data/jj591620#RequiredToRequired](http://msdn.microsoft.com/en-US/data/jj591620#RequiredToRequired)上的示例代码是否正确？该代码要求在 Instructor 类上使用 OfficeAssignment 道具。由于明显的原因，它不会解决。现在在 ef 上建立一对一关系的正确方法是什么？

```
// Configure the primary key for the OfficeAssignment
modelBuilder.Entity<OfficeAssignment>()
.HasKey(t => t.InstructorID);

modelBuilder.Entity<Instructor>()
.HasRequired(t => t.OfficeAssignment)
.WithRequiredPrincipal(t => t.Instructor);

public class OfficeAssignment
{
    // Specifying InstructorID as a primary
    [Key()]
     public Int32 InstructorID { get; set; }

    public string Location { get; set; }

    // When the Entity Framework sees Timestamp attribute
    // it configures ConcurrencyCheck and DatabaseGeneratedPattern=Computed.
    [Timestamp]
    public Byte[] Timestamp { get; set; }

    // Navigation property
    public virtual Instructor Instructor { get; set; }
}

public class Instructor
{
   public Instructor()
   {
        this.Courses = new List<Course>();
   }

    // Primary key
    public int InstructorID { get; set; }
    public string LastName { get; set; }
    public string FirstName { get; set; }
    public System.DateTime HireDate { get; set; }

    // Navigation properties
    public virtual ICollection<Course> Courses { get; private set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:40:42.957

本地/办公室导航属性周围有错误。一些故意重命名以澄清也许这......

```
using System;
using System.Collections.Generic;
using System.Data.Entity;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace one2one
{
class Program
{
    static void Main(string[] args)
    {
        var context = new Demo();
        var instructor = new Instructor();
        instructor.FirstName = "Big";
        instructor.LastName = "Willi";
        context.Set<Instructor>().Add(instructor);

        var office = new OfficeAssignment();
        office.Location = "is this where the demo broke down ? See POCO ";
        office.InstructorUsingThisOffice = instructor;

        context.Set<OfficeAssignment>().Add(office);

        context.SaveChanges();
    }
}
public class OfficeAssignment
{
    // Specifying InstructorID as a primary
    public Int32 InstructorID { get; set; }
    public string Location { get; set; }

    // Navigation property
    public virtual Instructor InstructorUsingThisOffice { get; set; }
}

public class Instructor
{

    // Primary key
    public int InstructorID { get; set; }
    public string LastName { get; set; }
    public string FirstName { get; set; }
   //navigation
    //missing
    public virtual OfficeAssignment TheofficeToUse { get; set; }

}
public class Demo : DbContext
{

    DbSet<OfficeAssignment> officeAssignments { get; set; }
    DbSet<Instructor> Instructors { get; set; }
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        // Configure the primary key for the OfficeAssignment
        modelBuilder.Entity<OfficeAssignment>()
        .HasKey(t => t.InstructorID);

        modelBuilder.Entity<Instructor>()
                    .HasRequired(t => t.TheofficeToUse)
                    .WithRequiredPrincipal(d => d.InstructorUsingThisOffice);  //current entity is principal, the navigation back.
       // and we share the same key... MUST with EF 1:1 foreign key

    }
}
} 
```

# mono - Mono CSharp Evaluator：创建两个动作 via two distinct Run() crashes I'm trying to embed mono in a c++ executable, and mono crashes on the second evaluator.Run(..) as below. Any idea of what I missed ? Using mono 3.0.3. E 问问题 问问题 2013-02-18T01:56:56.247 341 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm trying to embed mono in a c++ executable, and mono crashes on the second evaluator.Run(..) as below. Any idea of what I missed ? Using mono 3.0.3. EmbeddedMonoTest.cpp // EmbeddedMonoTest.cpp : Defines the entry point for the console application. // #include "stdafx.h" #include <mono metadata="" debug-helpers.h="">#include <mono metadata="" exception.h="">#include <mono jit="" jit.h="">#include <mono metadata="" assembly.h="">int _tmain(int argc, _TCHAR* argv[]) { MonoDomain* domain = mono_jit_init_version ("ClassLibrary1", "v4.0.30319"); MonoAssembly* assembly = mono_domain_assembly_open (domain, "ClassLibrary1.dll"); mono_assembly_get_image(mono_domain_assembly_open (domain, "Mono.CSharp.dll")); MonoImage* image = mono_assembly_get_image (assembly); MonoClass* klass = mono_class_from_name(image, "ClassLibrary1", "Class1"); MonoMethod* test = mono_class_get_method_from_name(klass, "Test", 0); mono_runtime_invoke(test, NULL, NULL, NULL); return 0; } Class1.cs using System; using System.Reflection; using Mono.CSharp; namespace ClassLibrary1 { public class Class1 { public static void Test() { var assembly = Assembly.GetAssembly(typeof(Class1)); CompilerSettings settings = new CompilerSettings(); ReportPrinter printer = new ConsoleReportPrinter(); CompilerContext context = new CompilerContext(settings, printer); Evaluator evaluator = new Evaluator(context); evaluator.ReferenceAssembly(assembly); evaluator.Run("using System; using ClassLibrary1;"); evaluator.Run("Action action = args => {{ 'x'.ToString(); }}; "); evaluator.Run("Action b = args => {{ 'x'.ToString(); }}; "); } } } The error : Unhandled exception at 0x0274b00d in EmbeddedMonoTest.exe: 0xC0000005: Access violation reading location 0x00000000. Try something like this: HTML:![](image0.png) ![](image1.png) ![](image2.png) ![](image3.png)![](image0.png) ![](image1.png) ![](image2.png) ![](image3.png)CSS: .fadebox { position:relative; } .fadebox>img { position:absolute; left:0; top:0; opacity:0; transition:opacity 1s linear; -webkit-transition:opacity 1s linear; } .fadebox>img:first-child { position:static; } JavaScript: (function() { var divs = document.querySelectorAll(".fadebox"), l = divs.length, i; for( i=0; i <l; i++)="" {="" (function(div)="" var="" imgs="div.children," l="imgs.length," i="-1," step="function()" if(i="">-1) imgs[i].style.opacity = 0; i = (i+1)%l; imgs[i].style.opacity = 1; }; step(); setInterval(step,5000); })(divs[i]); } })(); In the above, 1s is the time it takes for the fade to happen, and 5000 is the number of milliseconds the between fades (including the transition, so in this case the image will stay displayed for 4 seconds) Note that this only works in supporting browsers, like so: IE, Chrome and Firefox should work just fine in their latest versions IE9 works, but don't fade between images IE8 and below don't work due to not supporting opacity IE7 and below don't work due to not supporting querySelectorAll The last two cases can be fixed by adding a suitable filter style (IE8) and shimming querySelectorAll (IE7 and below) mono 4 0 回答 0 Related 2 python - 来自 python 的 FQL 多查询因 unicode 查询而失败 3 extjs - 如何使 Extjs Button 看起来像一个链接？ 2 javascript - 未显示颜色框的内联内容 1 javascript - Jquery SlickGrid - 为分组行添加区别 1 jquery - jQuery .on keyup 在没有按键时触发 1 c# - “无可用来源”错误 2 javascript - Chrome 似乎不允许 window.print() 1 hadoop - 具有两个-inputFormat 的 Hadoop 流式传输？ 3 meteor - 在 Meteor 中，如何在另一个字段更改时更新一个 db 字段？ 2 php - php循环列表中的随机产品 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14928400
> 
> 赞同：2
> 
> 时间：
> 
> 标签：mono

I'm trying to embed mono in a c++ executable, and mono crashes on the second evaluator.Run(..) as below. Any idea of what I missed ?

Using mono 3.0.3\.

EmbeddedMonoTest.cpp

```
// EmbeddedMonoTest.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include <mono/metadata/debug-helpers.h>
#include <mono/metadata/exception.h>
#include <mono/jit/jit.h>
#include <mono/metadata/assembly.h>
int _tmain(int argc, _TCHAR* argv[])
{
    MonoDomain* domain = mono_jit_init_version ("ClassLibrary1", "v4.0.30319");
    MonoAssembly* assembly  = mono_domain_assembly_open (domain, "ClassLibrary1.dll");  
    mono_assembly_get_image(mono_domain_assembly_open (domain, "Mono.CSharp.dll")); 
    MonoImage* image = mono_assembly_get_image (assembly);
    MonoClass* klass = mono_class_from_name(image, "ClassLibrary1", "Class1");
    MonoMethod* test = mono_class_get_method_from_name(klass, "Test", 0);
    mono_runtime_invoke(test, NULL, NULL, NULL); 
    return 0;
} 
```

Class1.cs

```
using System;
using System.Reflection;
using Mono.CSharp;

namespace ClassLibrary1
{
    public class Class1
    {
        public static void Test()
        {

            var assembly = Assembly.GetAssembly(typeof(Class1));

            CompilerSettings settings = new CompilerSettings();
            ReportPrinter printer = new ConsoleReportPrinter();
            CompilerContext context = new CompilerContext(settings, printer);
            Evaluator evaluator = new Evaluator(context);
            evaluator.ReferenceAssembly(assembly);
            evaluator.Run("using System; using ClassLibrary1;");
            evaluator.Run("Action<object> action = args => {{ 'x'.ToString(); }}; ");
            evaluator.Run("Action<object> b = args => {{ 'x'.ToString(); }}; ");
        }
    }
} 
```

The error :

```
Unhandled exception at 0x0274b00d in EmbeddedMonoTest.exe: 0xC0000005: Access violation reading location 0x00000000. 
```</l;></mono></mono></mono></mono>

# php - 在 Zend Framework 2 中生成 SEF url

> ID：14928402
> 
> 赞同：0
> 
> 时间：2013-02-18T01:57:17.607
> 
> 标签：php, zend-framework2

在 ZF1 中，您可以通过执行以下操作来创建 SEF urkl

```
 <a href="<?php $this->url(array('controller'=>'MyCOntroller', 
 'action'=>'MyActions'));?>">My link</a> 
```

我们如何在 ZF2 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:04:16.177

您也可以在 Zend Framework 2 中获得类似的结果，如下所示：

```
<a href="<?php echo $this->url(
    'route-name', 
    array('controller'=>'MyCOntroller',  'action'=>'MyActions')
); ?>">My link</a> 
```

检查[有关路由的参考和有关](http://framework.zend.com/manual/2.1/en/modules/zend.mvc.routing.html)[URL 视图帮助](http://framework.zend.com/manual/2.1/en/modules/zend.view.helpers.html#url-helper)程序和[控制器 URL 插件帮助程序](http://framework.zend.com/manual/2.1/en/modules/zend.mvc.plugins.html#the-url-plugin)的文档

# javascript - How can I remap one JSON lines to hierachycal JSON?

> ID：14928406
> 
> 赞同：3
> 
> 时间：2013-02-18T01:57:59.250
> 
> 标签：javascript, json

I am meeting now the difficult problem for me that hurt my heart, I want to convert [01] JSON to [02].

[01] JSON :

```
{locations: [
    {
        country: "Australia",
        area: "NSW",
        city: "Gordon"
    },
    {
        country: "Australia",
        area: "NSW",
        city: "Chatswood"
    }
]}; 
```

[02] JSON :

```
{countries: [
    {
        name: "Australia",
        areas: [
            {
                 name: "NSW",
                 cities: [
                      {
                           name: "Gordon"
                      },
                      {
                           name: "Chatswood"
                      }
                 ]
            }
        ]
    } 
]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:26:36.480

Since you're going to be doing a bunch of lookups I suggest using a collection of objects rather than your final structure with arrays. You can then either convert it to the final structure or modify code to use it the way it is.

```
var countries = {};
for (var i=0, loc; loc = locations[i]; i++) {
    if (!countries[loc.country]) countries[loc.country] = {};
    if (!countries[loc.country][loc.area]) countries[loc.country][loc.area] = [];
    countries[loc.country][loc.area].push(loc.city);
}
alert(JSON.stringify(countries)); 
```

# c# - WinForms child form to another process

> ID：14928409
> 
> 赞同：0
> 
> 时间：2013-02-18T01:58:14.257
> 
> 标签：c#, winforms

I'm trying to create child form on other process form without activation, everything is ok except that my form appearing in front of screen when showing - after f.Visible=true - but i need to keep both of them somewhere behind.

Here's code:

```
public class OSD {
    public class OSD_form:Form {
        protected override bool ShowWithoutActivation {
            get { return true; }
        }
        protected override CreateParams CreateParams {
            get {
                CreateParams p=base.CreateParams;

                //p.Style |= 0x40000000; // WS_CHILD
                p.ExStyle|=0x8000000; // WS_EX_NOACTIVATE
                p.ExStyle|=0x00080000; // WS_EX_LAYERED
                p.ExStyle|=0x0020; // WS_EX_TRANSPARENT

                return p;
            }
        }
    }
    private OSD_form f=null;
    public IntPtr AttachedTo=IntPtr.Zero;

    public OSD() {
        f=new OSD_form();

        f.FormBorderStyle=FormBorderStyle.None;
        f.ShowInTaskbar=false;
    }

    public void Show() {
        long l2=winapi.GetWindowLong(f.Handle,winapi.GWL_EXSTYLE);
        l2|=winapi.WS_EX_LAYERED;
        l2|=winapi.WS_EX_TRANSPARENT;
        winapi.SetWindowLong(f.Handle,winapi.GWL_EXSTYLE,new IntPtr(l2));
        winapi.SetLayeredWindowAttributes(f.Handle,0,(255*90)/100,winapi.LWA_ALPHA);

        window w=new window(AttachedTo);
        f.Width=160;
        f.Height=60;
        f.Left=w.Client.Left+4;
        f.Top=w.Client.Top+4;

        f.Show(new WindowWrapper(AttachedTo));

        f.Visible=true;

    }
} 
```

# ios - 将初始化代码放在哪里令人困惑

> ID：14928411
> 
> 赞同：0
> 
> 时间：2013-02-18T01:58:19.937
> 
> 标签：ios, uiview

我有一个 UIView，为此我实现了该`init`方法。这对我有用，因为我总是用下面的简单代码初始化我的 UIViews。

```
MYView *view = [[MYView alloc] init];
[self.view addSubview:view];
[view setFrame:CGRectMake(0,0,99,99)]; 
```

问题：这个视图可以与故事板一起使用吗？还是我需要实现其他“init”方法？另外，如果有人用 实例化视图会发生什么`initWithFrame`？我是否需要实现所有“init”方法来处理所有这些情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T02:26:42.720

Storyboard 和 XIB 文件将使用这些`initWithCoder:`方法。

# ruby-on-rails - Rails gem ckeditor 在它自己的配置之前加载自定义 config.js

> ID：14928413
> 
> 赞同：4
> 
> 时间：2013-02-18T01:58:42.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ckeditor

我已经安装了 ckeditor gem，除了我的自定义工具栏定义外，一切正常。我在开发环境中工作。在 Chrome 中检查检查器我看到我的 custom.js 文件在 ckeditor gem 的配置之前被请求，因此可能被覆盖。我想我在[这里](https://github.com/galetahub/ckeditor/issues/105#issuecomment-5202254)找到了一个糟糕的解决方案，但我想知道是否有人找到了更好的解决方案。

这是我当前的 application.js 配置的示例：

```
//= require jquery
//= require jquery_ujs
//= require jquery-ui
//= require ckeditor/init
//= require_tree ./ckeditor
//= require_directory . 
```

我有嵌套在 assets-javascripts-ckeditor 中的 config.js 文件。我也在`:ckeditor => {:uiColor => "#D6A11A", :toolbar => "admin"}`我的 cktext_area 表单方法中使用该参数。我知道它正在被读取，因为 uiColor 会相应地发生变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-13T00:53:45.940

我从来没有真正弄清楚这一点。升级到最新版本的 ckeditor-rails gem 并遵循所有安装说明已解决此问题。此外，如果您有任何 ckeditor 使用的自定义 .js 配置文件，请确保将它们添加到 application.rb 中的预编译资产路径中。

# casting - GLSL implicit int to float error yielded at "float to float"…?

> ID：14928414
> 
> 赞同：0
> 
> 时间：2013-02-18T01:58:45.100
> 
> 标签：casting, glsl, fragment-shader

The following line in my fragment-shader…</p>

`gl_FragColor.r = curPosition.x;`

raises warning C7011: implicit cast from "int" to "float" but `curPosition` is defined as `vec3` (so it is a float) and `gl_FragColor.r` is … well … a float. so… what's the problem?

# c# - How to include an executable with my project and call it in .NET

> ID：14928417
> 
> 赞同：1
> 
> 时间：2013-02-18T01:59:11.107
> 
> 标签：c#, .net

I have an .exe file, which is just a command line tool for a certain encryption. I have a .NET project and I want to include this with my program and be able to make command line calls to this exe and gets its response...

How can I include this .exe?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T02:06:58.987

[使用ProcessStartInfo.RedirectStandardOutput](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandardoutput.aspx)属性可以很容易地实现这一点。完整的示例包含在链接的 MSDN 文档中；唯一需要注意的是，您可能还必须重定向标准错误流才能查看应用程序的所有输出。

```
Process process = new Process();
process.StartInfo.FileName = "your_application.exe";
process.StartInfo.Arguments = "argument1 argument2 argument2 ...";
process.StartInfo.UseShellExecute = false;
process.StartInfo.RedirectStandardOutput = true;
process.Start();    

Console.WriteLine(process.StandardOutput.ReadToEnd());

process.WaitForExit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T02:04:25.850

您可以创建一个调用可执行文件函数的类库 (DLL)。基本上，您在其他项目中引用创建的 DLL。它充当您的应用程序和其他可执行文件之间的中间人。

看[这里](http://www.homeandlearn.co.uk/csharp/csharp_s16p1.html)

在您的类库项目中包含可执行项目，以便您可以调用加密函数。

# php - How can I supress system() from printing to screen?

> ID：14928422
> 
> 赞同：0
> 
> 时间：2013-02-18T02:00:10.667
> 
> 标签：php

Trying to test how long mongo takes to retrieve each document.

However, `system()` prints the result to screen and I think that may slow down the process.

How could I supress it from printing to screen?

```
<?php
$m = new MongoClient();
$db = $m->selectDB("test");
$collection = new MongoCollection($db, "fakestat");
for($i=0;$i<1000;$i++){
        $index[]=rand(1,432050);
}
$fp = fopen('logTime.txt','w');
fwrite($fp, "startTimeSec\t startTimeNanoSec\t endTimeSec\t endTimeNanoSec\n");

foreach($index as $val) {
        $startTime = system("date +%s'\t'%N");
        $results[] = $collection->findOne(array("capture"=>"$val"));
        $endTime = system("date +%s'\t'%N");
        fwrite($fp, sprintf("%s\t %s\n", $startTime, $endTime));
}
fclose($fp);
$m->close();
?> 
```

Update: Using `exec()` and it seems to be work abeit still rather slow.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:34:08.247

两种选择：

1.  使用[shell_exec](http://www.php.net/manual/en/function.shell-exec.php)而不是`system`

    ```
    $startTime = shell_exec("date +%s'\t'%N"); 
    ```

2.  请改用[微时间](http://php.net/manual/en/function.microtime.php)。

    > microtime — 返回当前的 Unix 时间戳，以微秒为单位

    ```
    $startTime = microtime(); 
    ```

# python - 使用 python 正则表达式搜索整行

> ID：14928426
> 
> 赞同：1
> 
> 时间：2013-02-18T02:00:23.703
> 
> 标签：python, regex

我正在制作一个简单的命令行 python 程序，并使用拼写检查器验证用户输入。我早些时候在 SO 上找到了[http://norvig.com/spell-correct.html](http://norvig.com/spell-correct.html)，并使用它来验证我的用户将输入的内容。就我而言，我正在根据 BART 站点列表验证用户输入。用户必须准确输入电台名称，或从拼写检查器处获得建议。这是我正在验证的 BART 车站列表。

```
Lake Merritt
Daly City
Fruitvale
Coliseum/Oakland Airport
San Leandro
.
.
. 
```

我所做的与我找到的示例代码之间的区别在于，我正在验证多个单词——“Daly City”，而不仅仅是“Fruitvale”。我对正则表达式和 python 不是很好，我试图弄清楚如何阅读每一行，并检查从行首到结尾的所有内容。所以我很难找出一个正则表达式来读取一行中的所有内容。这是我要更改的代码：

```
def words(text): return re.findall('[a-z]+', text.lower()) 
```

其中 text 是示例中使用的大文本文件

我试过

```
def words(text):
  lines=text.split('\n')
  return re.search('[a-z]+', lines) 
```

认为这会起作用，因为这（至少对我而言）意味着我在每一行中搜索字符串中至少一个小写字符。但是，我得到了这个

```
Traceback (most recent call last):
File "spell.py", line 15, in <module>
NWORDS = train(words(file('stations.txt').read()))
File "spell.py", line 6, in words
return re.search('[a-z]+', lines)
File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/re.py",       line 142, in search
return _compile(pattern, flags).search(string)
TypeError: expected string or buffer 
```

我不确定该怎么做。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:24:13.147

也许使用`difflib`而不是 Norvig 的拼写校正器。`difflib`有一个[get_close_matches](http://docs.python.org/2/library/difflib.html#difflib.get_close_matches)函数，可以帮助您猜测 BART 站中哪个字符串最接近用户输入的字符串。例如，

```
import difflib

bart_stations = ['Lake Merritt', 'Daly City', 'Fruitvale', 'Coliseum/Oakland Airport',
                 'San Leandro']

while True:
    text = raw_input('Enter BART station: ')
    if not text: break  # Pressing Enter quits
    guess = difflib.get_close_matches(text, bart_stations, n=1, cutoff=0)[0]
    print('Closest match: {g}'.format(g = guess)) 
```

运行脚本产生：

```
% test.py
Enter BART station: Merit
Closest match: Lake Merritt
Enter BART station: Fruity
Closest match: Fruitvale
Enter BART station: Coli
Closest match: Daly City
Enter BART station: Col
Closest match: Coliseum/Oakland Airport
Enter BART station: Lean
Closest match: San Leandro
Enter BART station: 
```

# java - android sherlock setDisplayHomeAsUpEnabled 不起作用以及如何设置自定义目标？

> ID：14928431
> 
> 赞同：6
> 
> 时间：2013-02-18T02:00:57.247
> 
> 标签：java, android

我已经调用了 setDisplayHomeAsUpEnabled(true) 并且箭头正在显示，但它没有去哪里，我还想手动设置按钮的链接/目标以转到自定义位置。

如何指定自定义位置？谢谢你。

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-18T02:05:17.857

如果你像标题所说的那样使用 ActionBarSherlock，你应该改用：

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true); 
```

无论哪种方式，要处理点击，您都必须为`android.R.id.home`in`onOptionsItemSelected()`

例如：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        //do your own thing here
        return true;
    default: return super.onOptionsItemSelected(item);  
    }
} 
```

另外，通过自定义位置，我不知道您的意思，您当然*可以*`new Intent()`做某事。

 *但是，为了使事情与 Android 指南保持一致，您*应该*使用向上图标来实际向上。*

# javascript - 将变量（从 json 中获取）插入到元素中

> ID：14928434
> 
> 赞同：0
> 
> 时间：2013-02-18T02:01:32.893
> 
> 标签：javascript, json, variables, callback, youtube

我有一个从 YouTube json 回调中获取视频标题的函数，该函数有效 - 但是我在将变量插入元素时遇到问题。

这是我正在抓取的提要：

```
<script type="text/javascript" src="http://gdata.youtube.com/feeds/api/videos/2WNrx2jq184?v=2&amp;alt=json-in-script&amp;callback=youtubeFeedCallback"></script> 
```

我正在使用的 javascript 函数：

```
function youtubeFeedCallback(data) {
var info = data.entry.title.$t;
document.write(info);
} 
```

这很好用，但我想将它插入到 ID 为“box”的 div 中。

通常我会使用以下内容（并将其添加到函数中 - 并删除 document.write）：

```
var box = document.getElementById('box');
box.innerHTML = info; 
```

我只是不能让它工作。实现我想要做的事情的正确方法是什么？谢谢

[http://jsfiddle.net/b3VYT/](http://jsfiddle.net/b3VYT/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T02:11:04.447

要么确保脚本位于元素下方，要么将代码包装在`document.ready`回调中，以便在加载 DOM 之前它不会运行。

[http://jsfiddle.net/b3VYT/1](http://jsfiddle.net/b3VYT/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:09:50.973

您需要确保在执行脚本之前声明了您正在使用的元素：

```
<div id='test'></div>
<script>
    function youtubeFeedCallback(data) {
         document.getElementById('test').innerHTML = data.entry.title.$t;
    }
</script> 
```

[例子](http://jsfiddle.net/bA2zc/)

# asp.net-web-api - 剑道网格发布和删除将空值发送到控制器

> ID：14928441
> 
> 赞同：2
> 
> 时间：2013-02-18T02:02:18.210
> 
> 标签：asp.net-web-api, kendo-ui, kendo-grid

我正在发布一个 kendoui 网络网格，它没有发送数据，我看不出我在做什么与失败的[样本不同。](http://demos.kendoui.com/web/grid/editing-popup.html)我正在发布到控制器，但它是空的（如果批处理：true 或 null 如果批处理：false）

```
 var crudServiceBaseUrl = "api/Certifications/",
                dataSource = new kendo.data.DataSource({
                    transport: {
                        read:  {
                            url: crudServiceBaseUrl + member.id,
                            dataType: "json"
                        },
                        update: {
                            url: crudServiceBaseUrl,
                            type: "Post",
                            dataType: "json"
                        },
                        destroy: {
                            url: crudServiceBaseUrl,
                            type: "Delete",
                            contentType: "application/json; charset=utf-8",
                            dataType: "json"
                        },
                        create: {
                            url: crudServiceBaseUrl,
                            type: "Post",
                            dataType: "json"
                        },
                        parameterMap: function (options, operation) {
                            if (operation !== "read" && options.models) {
                                return {models: kendo.stringify(options.models)};
                            }
                        }
                    },
                     editable: { //disables the deletion functionality
                     update: true,
                     destroy: true
                  },
                 batch: true,
                    pageSize: 30,
                    schema: {
                        model: {
                            id: "Id",
                            fields: {
                                Id: { editable: false, nullable: true },
                                MemberId: { editable: false, nullable: true },
                                Name: { validation: { required: true} },
                                AuthorityName: { validation: { required: true} },
                                StartDate: { type: "date", validation: { required: true} },
                                EndDate: { type: "date" }
                            }
                        }
                    }
                });

                $("#certifications").kendoGrid({
                dataSource: dataSource,
                pageable: true,
                height: 300,
                toolbar: ["create"],
                columns: [
                    { field: "Name", title: "Product Name", width: 250 },
                    { field: "AuthorityName", title: "Authority", format: "{0:c}", width: "140px" },
                    { field: "StartDate", title: "Earned", template: '#= kendo.toString(StartDate,"MM/dd/yyyy") #', width: 50 },
                    { field: "EndDate", title: "Expired", template: '#= kendo.toString(EndDate,"MM/dd/yyyy") #', width: 50 },
                    { command: ["edit", "destroy"], title: "&nbsp;", width: "130px" }],
                editable: "popup"
            }); 
```

网络API：

```
 public Certification DeleteCertification(CertificationVm cert)
        {
            var model = Uow.Certifications.Get(cert.Id);
            if (model == null)
                throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.NoContent));
            Uow.Certifications.Delete(model);
            Uow.Commit();
            return model;
        } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T03:38:09.497

我想通了，虽然我不得不离开这个例子[http://demos.kendoui.c​​om /web/grid/editing-popup.html](http://demos.kendoui.com/web/grid/editing-popup.html)

修复是添加内容类型，正确使用 dataType: "json" 如上所述，从 batch: true 更改为 batch: false 并将参数映射更改为以下

```
 destroy: {
                                    url: crudServiceBaseUrl,
                                    type: "Delete",
                                    contentType: "application/json; charset=utf-8",
                                    dataType: "json"
                                },

parameterMap: function (model, operation) {
                                    if (operation !== "read" && model) {
                                        return  kendo.stringify(model) ;
                                    }
                                } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:13:53.593

没有像 jsonp + POST 这样的东西 - 在[这里](https://stackoverflow.com/questions/2699277/post-data-to-jsonp)讨论。除非你真的知道为什么需要它，否则不要使用 jsonp。

# c - C编程，调用函数

> ID：14928442
> 
> 赞同：0
> 
> 时间：2013-02-18T02:02:20.807
> 
> 标签：c

我是 C 的新手，我正在尝试迭代地调用流中的 line 并检查它是否包含我的搜索字符串或者它是否为空。我不知道如何进行此检查，我收到一条警告，指出指针和整数之间的 [警告] 比较或 [警告] 赋值使指针从整数中生成，而无需强制转换，每当我尝试执行此操作时。谁能帮忙？谢谢。

```
#include <stdio.h>
#include <errno.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>

int main(int argc, char *argv[]) {

    FILE *fpntr;
    char *file_pathname, *first_line;

      if (argc != 2) {
         fprintf(stderr, "usage: %s FILE\n", argv[0]);
         return EXIT_FAILURE;
      }
   file_pathname = argv[1];

   if ((fpntr = fopen(file_pathname, "r")) == NULL ) {
        fprintf(stderr, "Error opening file %s: %s\n", file_pathname, strerror(errno));
    return EXIT_FAILURE;
    } else {
       grep_stream();
       fclose(fpntr);
    }
     return EXIT_SUCCESS;
     }

 int grep_stream(FILE *fpntr, char *string, char *file_pathname) {
          //warning is on next line
     while ((? = get_next_line(fpntr)) == NULL ) {
         perror("Error reading line");
         exit(EXIT_FAILURE);
}
elseif()
{
    printf("First line in : %s \n %s", file_pathname, string);
}

}

    char *get_next_line(FILE *fpntr) {
   char *buff = malloc(101);
   int pos = 0;
   int next;

   while ((next = fgetc(fpntr)) != '\n' && next != EOF) {

    buff[pos++] = next;

    }
    buff[pos] = '\0';
     if (buff != NULL ) {
    return buff;
     } else
      return NULL ;

          } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:49:58.840

请记住，C 代码是从上到下编译的。读取该行时`get_next_line`未声明该函数。`while`

要么将`get_next_line`' 的定义移到 ' 之前`main`，要么通过以下方式向前声明它：

```
char *get_next_line(FILE *fpntr); 
```

预先。您收到警告而不是错误的原因是未声明的函数被假定为返回`int`，并且没有对其参数做出任何假设。也就是说，它们具有类型`int()`。

此外，为了您和那些将回答您的问题（或与您合作）的人，请正确格式化您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:32:02.993

> ... i am trying to iteratively call line in stream...

Why not use `fgets()`?

Secondly, to match a substring in a string, you can use `strstr()`

Please use standard C library instead of re-inventing the wheel. It saves the day usually.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T06:12:00.993

```
#include <assert.h> // I'm too dumb to program without assertions!
#include <stdio.h>
#include <errno.h>
#include <string.h>
#include <stdlib.h>
//#include <unistd.h>  I prefer stdlib.h, couldn't see any need for non-portable header...

#define MAX_LINE    (101)       // define funky constants in one place for easy changing later.

// declare functions before using them
void grep_stream(FILE *fpntr, char *file_pathname);
char *get_next_line(FILE *fpntr);

int main(int argc, char *argv[]) {

    FILE *fpntr;
    char *file_pathname;

    if (argc != 2) {
        fprintf(stderr, "usage: %s FILE\n", argv[0]);
        return EXIT_FAILURE;
        }
    file_pathname = argv[1];

    if ((fpntr = fopen(file_pathname, "r")) == NULL ) {
        fprintf(stderr, "Error opening file %s: %s\n", file_pathname, strerror(errno));
        return EXIT_FAILURE;
        }
    else {
        grep_stream(fpntr, file_pathname);
        fclose(fpntr);
        }
    return EXIT_SUCCESS;
    }

void grep_stream(FILE *fpntr, char *file_pathname) {
    char*   line;
    int     got_first = 0;

    assert(fpntr);
    assert(file_pathname);  // I worry the guy who wrote main() might be an idiot like me!

    //warning is on next line [not anymore!]
    while ((line = get_next_line(fpntr)) != NULL ) {
        if(!got_first) {
            printf("First line in : %s \n%s\n", file_pathname, line);
            got_first = 1;
            }
        // if we're not going to use it, let's not leak memory
        free(line);
        }
    }

char *get_next_line(FILE *fpntr) {
    char *buff = malloc(MAX_LINE);
    int pos = 0;
    int next;

    assert(buff != NULL);   // wouldn't it be nice to know malloc() worked?
    while ((next = fgetc(fpntr)) != '\n' && next != EOF) {
        buff[pos++] = (char)next;
        assert(pos < (MAX_LINE-1)); // don't want to be right back on SO with a seg fault, eh?
        }
    buff[pos] = '\0';

    if(next == EOF) {
        free(buff);
        buff = NULL;
        }

    return buff;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T02:09:07.240

将 * 添加到整数的指针以将其从指针转换为整数

# scala - 如何将 JSON 转换为 Scala 类（不是 Case 类），然后从该大类中填充一组案例类

> ID：14928443
> 
> 赞同：2
> 
> 时间：2013-02-18T02:03:01.630
> 
> 标签：scala, playframework, salat

我正在使用 Scala 2.10、Salat 和 Play frmework 2.1-RC2（即将升级到 2.1 版本）和 MongoDB 构建应用程序。

这是一个匿名应用程序，其中向消费者公开 JSON Web 服务。到目前为止，JSON 直接使用 Play 的 Json API 和隐式转换器转换为模型对象。我必须重构一些案例类以避免 22 个元组的限制，现在我正在重构而不是平面案例类，以拥有一个嵌入式案例（和嵌入式 MongoDB 集合）。

Web 服务接口应保持不变，客户端仍应像以前一样在平面结构中传递 JSON 数据，但应用程序需要将它们映射到适当的案例类结构中。处理这种情况的最佳方法是什么。怕写了很多转换代码<-> Flat JSON <-> 复杂案例类结构<-> 从复杂案例类再到flat JSON输出。

您将如何处理这样的要求？我假设许多其他人可能已经面临案例类 22 元组限制来处理这种要求？你会如何处理这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:17:15.047

Play 2.1 json 库严重依赖组合器 ( `path1 and path2`)。这些组合器都具有相同的 22 限制。这为您提供了两种选择：

1.  不要使用组合器并以艰难的方式构造对象：`path(json)`将为您提供路径中该点的值。在 ScalaJsonCombinators搜索“访问 JsPath 的值”[将](http://www.playframework.com/documentation/2.1.0/ScalaJsonCombinators)提供更多示例。
2.  首先将 json 转换为单个对象中不超过 22 个值的结构，然后使用普通组合器。更多关于转换的信息可以在这里找到：[ScalaJsonTransformers](http://www.playframework.com/documentation/2.1.0/ScalaJsonTransformers)

# java - Android java.util.HashMap 无法转换为 java.lang.String

> ID：14928446
> 
> 赞同：1
> 
> 时间：2013-02-18T02:04:11.707
> 
> 标签：java, android, string

```
public void onItemClick(AdapterView<?> parentAdapter, View view, int position,
                                     long id) {
                TextView clickedView = (TextView) view;
                /* Line 79 */ String selectedRouteName = (String) parentAdapter.getItemAtPosition(position);
                String temp = selectedRouteName.substring(0, 2); 
```

显示的错误是：

```
02-18 01:56:53.676: E/AndroidRuntime(821): java.lang.ClassCastException: java.util.HashMap cannot be cast to java.lang.String
02-18 01:56:53.676: E/AndroidRuntime(821):  at com.coltonnicotera.londontransitguide.SchedulesActivity$1.onItemClick(SchedulesActivity.java:79) 
```

不知道是什么原因造成的，我发现[java.lang.String 无法转换为 java.util.HashMap 异常](https://stackoverflow.com/questions/10872292/java-lang-string-cannot-be-cast-to-java-util-hashmap-exception)，看来我做的一切都是正确的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T02:06:19.663

这意味着它`parentAdapter.getItemAtPosition(position)`正在返回一个**HashMap**实例，您正在尝试将其转换为带有该行的字符串

```
String selectedRouteName = (String) parentAdapter.getItemAtPosition(position); 
```

您应该检查该**AdaptaverView**的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T02:50:50.723

请将java与现实生活进行比较，您正在尝试将**DOG**对象转换为**Peacock**对象，这是不可能的。

您应该使用`toString()`对象类的方法进行字符串转换。

# javascript - 水平扩展的 HTML 输入字段

> ID：14928451
> 
> 赞同：0
> 
> 时间：2013-02-18T02:04:52.190
> 
> 标签：javascript, html, css

我有一个输入字段：

```
<input type="text" id="TextField" /> 
```

并将其设置为调整大小：

```
#TextField {
   resize: horizontal;
} 
```

但它不会调整大小。

当文本接近文本字段的末尾（右侧）时，如何使文本字段水平（而不是垂直）调整大小？或者，是否有任何内置方法可以使其工作（可能在 CSS 中使用某些东西）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T02:18:11.300

您将需要根据文本的宽度计算框的宽度。这是一个可能有帮助的类似问题。[用 JavaScript 计算文本宽度](https://stackoverflow.com/questions/118241/calculate-text-width-with-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T02:22:10.757

顺便说一句，有一个插件可以帮助您实现您正在寻找的内容[调整输入框](https://stackoverflow.com/questions/931207/is-there-a-jquery-autogrow-plugin-for-text-fields)

# python - Pyramid：如何在一个视图中获取所有应用程序的路线？

> ID：14928462
> 
> 赞同：5
> 
> 时间：2013-02-18T02:05:50.010
> 
> 标签：python, python-3.x, pyramid

我想查看我的应用程序拥有的所有路由。将它们作为响应返回，例如 key=>value 对：

```
'route1' => '{foo:\w+}'
'route2' => '{baz:\w+\d+}'
... and so on 
```

但我不知道如何将它们纳入我的视野。例如，这是我的观点。我希望它返回路线图。我这样做：

```
@view_config(route_name='route1')
def someView(request):
    routes = request.registry.settings.getRoutes()  ## what should I print here to get a map of routes?
    r = ''
    for k,v in sorted(routes.items()):
        r += str(k) + "=>" + str(v) + "<br/>";
    return Response(r) 
```

有一个`RoutesConfiguratorMixin`有方法的类`get_routes_mapper`。我试图导入该类并调用它的方法，但得到一个错误，`registry`它的实例中没有：

```
from pyramid.config.routes import RoutesConfiguratorMixin as Router

r = Router();
routes = r.get_routes_mapper();
## ... and the same code as above 
```

不工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T04:02:20.707

有两种方式，一种是支持的（公共的），一种是不支持的（私有的）。

选项 #1 是使用自省器，并[在此处](http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/narr/introspector.html)进行说明。

选项 #2 是使用路由映射器（不是公共 api），就像金字塔调试工具栏在其[路由面板](https://github.com/Pylons/pyramid_debugtoolbar/blob/master/src/pyramid_debugtoolbar/panels/routes.py)中所做的那样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-10-10T18:25:44.043

Pyramid 安装了一个`proutes`为此目的调用的 bin 脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-10T00:12:12.543

安装 pshell 然后 pshell 以使用您的应用配置登录到 pshell。然后运行

```
print("\n".join([r.path for r in app.routes_mapper.routelist])) 
```

# java - Java 仅使用默认构造函数不会通过输入的参数进行计算

> ID：14928464
> 
> 赞同：-4
> 
> 时间：2013-02-18T02:06:03.820
> 
> 标签：java, parameters, default-constructor

我已经查看了几次代码，但我不确定是什么影响了它并强制它只使用默认构造函数。例如，如果我尝试输入 2000 作为投资金额，它仍将默认为 1000。

```
public class Investment {
    private double moneyInvested;
    private double yearsInvested;

    public final static double AMOUNT_DEFAULT = 1000;
    public final static double YEARS_DEFAULT = 5;

    public final static double RATE = 0.12;

    public Investment() {
        moneyInvested = AMOUNT_DEFAULT;
        yearsInvested = YEARS_DEFAULT;
    }

    public Investment(double AMOUNT_DEFAULT, double YEARS_DEFAULT) {
        if (moneyInvested <= 0) {
            moneyInvested = AMOUNT_DEFAULT;
        }

        if (yearsInvested <= 0) {
            yearsInvested = YEARS_DEFAULT;
        }
    }

    public double getMoneyInvested() {
        return moneyInvested;
    }

    public double getYearsInvested() {
        return yearsInvested;
    }

    public void setMoneyInvested(double inputMoney) {
        moneyInvested = inputMoney;

        if (inputMoney <= 0) {
            inputMoney = 1000;
        }
    }

    public void setYearsInvested(double inputYears) {
        yearsInvested = inputYears;

        if (inputYears <= 0) {
            inputYears = 1;
        }
    }

    public static String returnValue(double inputYears, double inputMoney) {
        double returnInvestment;
        int initYears = 1;
        String returnValue = "";

        while (initYears <= inputYears) {
            returnInvestment = Math.pow(1.12, initYears) * inputMoney;
            int investReturn = (int) returnInvestment;

            returnValue = "The amount at end of year " + initYears + " is "
                    + investReturn;

            JOptionPane.showMessageDialog(null, returnValue);
            initYears++;
        }
        return returnValue;
    }
}

public class MakeInvestment {
    public static void main(String[] args) {
        Investment otherClass = new Investment();
        double yA = otherClass.YEARS_DEFAULT;
        double mA = otherClass.AMOUNT_DEFAULT;

        while (inputAmount() == false) {
            inputAmount();
        }

        while (inputYears() == false) {
            inputYears();
        }

        otherClass.returnValue(yA, mA);

    }

    public static boolean inputAmount() {
        String amountAmount = "";

        amountAmount = JOptionPane.showInputDialog(null,
                "Enter the amount to invest (9999).", "Investment Amount",
                JOptionPane.QUESTION_MESSAGE);

        if (amountAmount == null || amountAmount.length() == 0) {
            JOptionPane
                    .showMessageDialog(
                            null,
                            "Nothing entered - You must enter a number for amount invested.",
                            "Investment Amount Error",
                            JOptionPane.ERROR_MESSAGE);
            return false;
        }

        for (int i = 0; i < amountAmount.length(); i++) {
            if (!Character.isDigit(amountAmount.charAt(i))) {
                JOptionPane.showMessageDialog(null,
                        "You must enter a number for amount invested.",
                        "Investment Amount Error", JOptionPane.ERROR_MESSAGE);
                return false;
            }
        }

        double dblAmount = Double.parseDouble(amountAmount);

        return true;
    }

    public static boolean inputYears() {
        String yearAmount = "";

        yearAmount = JOptionPane.showInputDialog(null,
                "Enter the number of years to invest.", "Investment Years",
                JOptionPane.QUESTION_MESSAGE);

        if (yearAmount == null || yearAmount.length() == 0) {
            JOptionPane
                    .showMessageDialog(
                            null,
                            "Nothing entered - You must enter a number for years to invest.",
                            "Investment Years Error", JOptionPane.ERROR_MESSAGE);
            return false;
        }

        for (int i = 0; i < yearAmount.length(); i++) {
            if (!Character.isDigit(yearAmount.charAt(i))) {
                JOptionPane.showMessageDialog(null,
                        "You must enter a number of years to invest.",
                        "Investment Years Error", JOptionPane.ERROR_MESSAGE);
                return false;
            }
        }

        double dblYear = Double.parseDouble(yearAmount);

        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T02:10:23.073

没有什么是“强迫它使用默认构造函数”。您只是调用了默认构造函数

> ```
> Investment otherClass = new Investment() 
> ```

要使用 2 参数构造函数，请传入参数

```
new Investment(2000.0D, 5.0D) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:11:48.420

我猜这些线：

```
public final static double AMOUNT_DEFAULT = 1000;
public Investment(double AMOUNT_DEFAULT, double YEARS_DEFAULT) 
```

是问题所在。您声明 AMOUNT_DEFAULT=1000 并将其声明为最终结果。因此，它将始终等于 1000。尝试在构造函数中使用不同的变量名。

编辑：出于兴趣，我很快对此进行了测试，看来代码实际上会按您的预期工作。但是，避免这种变量命名仍然对您有利。

# vb.net - 将 Crystal Report 从 VB6 移植到 VB.NET

> ID：14928465
> 
> 赞同：0
> 
> 时间：2013-02-18T02:06:07.473
> 
> 标签：vb.net, crystal-reports, vb6-migration

我在将相当大的 VB6 项目移植到 .NET 方面做了大量工作，但在水晶报告中遇到了障碍。我已将 dsr 文件转换为 rpt。下一阶段是将其放入代码中

VB6的方式是使用以下

```
Dim report As New cryMyReport 
```

即使将 rpt 文件导入项目后，`cryMyReport`也无法识别。

我需要做什么才能让我的 .NET 应用程序识别并使用 rpt 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:25:20.290

我经常提到人们[http://vb.net-informations.com/crystal-report/vb.net_crystal_report_step_by_step.htm](http://vb.net-informations.com/crystal-report/vb.net_crystal_report_step_by_step.htm)

本质上，您需要添加 Crystal 引用（您需要安装 Crystal Reports for Visual Studio 运行时），添加 CrystalReportViewer，然后使用以下代码：

```
Imports CrystalDecisions.CrystalReports.Engine
Public Class Form1
    Private Sub Button1_Click(ByVal sender As System.Object, 
    ByVal e As System.EventArgs) Handles Button1.Click
        Dim cryRpt As New ReportDocument
        cryRpt.Load("PUT CRYSTAL REPORT PATH HERE\CrystalReport1.rpt")
        CrystalReportViewer1.ReportSource = cryRpt
        CrystalReportViewer1.Refresh()
    End Sub
End Class 
```

# sql-server - 如何在 SQL Server Management Studio 中创建与 MYOB 的链接服务器？

> ID：14928467
> 
> 赞同：0
> 
> 时间：2013-02-18T02:06:12.813
> 
> 标签：sql-server, myob

我需要从 MYOB 中提取数据，并希望通过 Microsoft SQL Server Management Studio 中的链接服务器来完成。

注意：MYOB 数据文件位于网络共享上。

提供者字符串：

```
Driver={MYOAU1001};Database=M:\Premier19\xxx.MYO;TYPE=MYOB;UID=Administrator;PWD=xxx;KEY=;ACCESS_TYPE=READ_WRITE;DRIVER_COMPLETION=DRIVER_NOPROMPT;SQL_LOGIN_TIMEOUT=30; 
```

至今没有成功。我收到以下错误：

> *无法为链接服务器“MYOB”初始化 OLE DB 提供程序“MSDASQL”的数据源对象。
> 链接服务器“MYOB”的 OLE DB 提供程序“MSDASQL”返回消息“[Microsoft][ODBC Driver Manager] Driver's SQLSetConnectAttr failed”。
> 链接服务器“MYOB”的 OLE DB 提供程序“MSDASQL”返回消息“[MYOB ODBC] - 公司文件不存在。”。（Microsoft SQL Server，错误：7303）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T01:06:06.723

尝试像这样构建它 sConnString = "Driver={" & MYOBDriver & "};" & _ "数据库=" & 数据文件名 & ";" & _ "TYPE=MYOB;UID=" & MYOBUser & ";PWD=" & MYOBPassword & ";" & _ "KEY=" & 密钥文件名 & ";ACCESS_TYPE=READ_WRITE;" & _ "HOST_EXE_PATH=" & MYOBExepath & ";" & _ "DRIVER_COMPLETION=DRIVER_PROMPT;SQL_LOGIN_TIMEOUT=90;" & _ "SUPPRESS_WARNINGS=TRUE;"

在查询中也使用 OPENROWSET

请注意，您的错误消息指出您没有包含公司文件名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:20:13.800

不幸的是，我不太确定链接服务器连接是什么。但是，MYOB ODBC 驱动程序并不是真正的 SQL 连接。它只是一个使用 MYOB .exe 并提供一些看起来有点像 SQL 但实际上不是 SQL 接口的接口。

如果您可以提供更多信息，例如您在 MYOB ODBC 界面中的连接设置？

# coffeescript - 如何使用 Coffeescript 胖箭头在事件处理程序中引用父对象

> ID：14928472
> 
> 赞同：0
> 
> 时间：2013-02-18T02:06:31.457
> 
> 标签：coffeescript, arrow-functions

嗨，我是 Js 和 Coffeescript 的新手，我觉得很难引用`App`以下示例中的父对象的属性

```
App =
  init: ->
    this.foo = 'bar'
    this.bindEvent()
  bindEvent: ->  
    $('#test').click(this.show)
  show: ->
    alert this.foo

App.init() 
```

我认为胖箭头可能会起作用，但是一旦我更改为`show: =>`，`this`在`show`方法的上下文中指的是窗口对象，而不是`App`我想要的对象。任何人都可以告诉我如何做对吗？

[http://jsfiddle.net/kZpHX/](http://jsfiddle.net/kZpHX/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T06:01:18.947

当你定义你的`show`函数时，`@`(AKA `this`) 实际上是`window`这样的

```
show: => console.log(@) 
```

将绑定`show`到`window`. 问题是您只是在定义一个对象，所以没有任何东西可以绑定：您没有定义一个类，`this`所以`window`. 您可以`App`像这样明确引用：

```
App =
  #...
  show: -> alert(App.foo) 
```

演示：http: [//jsfiddle.net/ambiguous/3sRVh/](http://jsfiddle.net/ambiguous/3sRVh/)

`this.foo`in会做正确的`init`事，因为说`App.init()`建立了预期`this`。

您也可以`this`手动连接所需的：

```
bindEvent: ->
  $('#test').click => @show()

# or
bindEvent: ->
  _this = @ # JavaScript style
  $('#test').click -> _this.show() 
```

演示： http: [//jsfiddle.net/ambiguous/byL45/，http](http://jsfiddle.net/ambiguous/byL45/) : [//jsfiddle.net/ambiguous/MT8fG/](http://jsfiddle.net/ambiguous/MT8fG/)

或者您可以为您的应用创建一个类：

```
class App
  constructor: ->
    @foo = 'bar'
    @bindEvent()
  bindEvent: ->  
    $('#test').click(@show)
  show: =>
    console.log(@foo)

new App 
```

这样你的`show: =>`行为就会像你期望的那样。

演示：http: [//jsfiddle.net/ambiguous/byatH/](http://jsfiddle.net/ambiguous/byatH/)

# java - 从 Arduino IDE 中的 Serial 获得的拆分数组 char

> ID：14928473
> 
> 赞同：1
> 
> 时间：2013-02-18T02:06:47.140
> 
> 标签：java, c, string, char, arduino

使用 Arduino IDE，我试图从 Serial 中读取一个字符串，在我需要处理它之后，从中分离一些字节。字符串以 开头`@`和结尾`;`。数据的“部分”是：

*   字节 0：“@”
*   字节 1 到 3：节 A，它是一个整数
*   字节 3 到 6：部分 B，它是一个整数
*   字节 7 到 63：C 部分，它是一个浮点数

例如，如果我有字符串`@002001100.0;`，A 部分是 002，B 部分是 001，C 部分是 100.0。

为了从 Serial 中读取整个字符串，我正在做

```
 char UsartBuffer = 0;
  char UsartString[64];

  boolean commandReceived = false;
  if (Serial.available() >0) {
    UsartBuffer = Serial.read();
    UsartString[0] = UsartBuffer;
    int counter = 0;

    if (UsartBuffer == '@'){
      while (UsartBuffer != ';'){
        if (Serial.available() >0){
          UsartBuffer = Serial.read();
          if (UsartBuffer != ' '){
            counter++;
            UsartString[counter] = UsartBuffer;
          }
        }

      }
      UsartString[counter+1]='\0';
      commandReceived = true;
    }
  } 
```

为了分割我所做的字符串

```
char* getClass(String command){
  char returnStr[3];
  for (int i = 0; i < 3; i++){
    returnStr[i] = command[i+1];
  }
  return returnStr;
}

char* getSubClass(String command){
  char returnStr[3];
  for (int i = 0; i < 3; i++){
    returnStr[i] = command[i+4];
  }
  return returnStr;
}

char* getDataValue(String command){
  char returnStr[56];
  int lastByte = 56;
  for (int i=0; i<56; i++){
    if (command[i+7]==';'){
      lastByte = i;
      break;
    }
  }

  for (int i = 0; i < lastByte; i++) returnStr[i] = command[i+7];
  for (int i = lastByte; i < 56; i++) returnStr[i] = '/0';
  return returnStr;
} 
```

当我这样做的时候

```
if (commandReceived){
  Serial.println(UsartString);
  Serial.println(getClass(UsartString));
  Serial.println(getSubClass(UsartString));
  Serial.println(getDataValue(UsartString));
} 
```

我得到了甚至奇怪的结果：

```
@002000107.0;
a

!œ
107.0Ñ 
```

因此，同样，我做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:02:15.877

问题似乎是由于`getClass()`,`getSubClass()`并`getDataValue()`返回局部变量 ( `returnStr`)。一旦函数返回，这些值就会丢失。

避免这种情况的几种方法：

返回一个`String`对象（本地`String`将在函数退出时被复制）：

```
String getClass(String command) {
    String returnStr;
    for (int i = 0; i < 3; i++) {
        returnStr += command[i+1];
    }

    return returnStr;
} 
```

在函数内动态分配`char*`（使用`malloc()`）-如果你这样做，你需要小心之后释放它（使用`free()`）：

```
char* getClass(String command) {
    size_t length = 3;
    char* returnStr = (char*) malloc(length);
    for (int i = 0; i < length; i++) {
        returnStr[i] = command[i+1];
    }

    return returnStr;
}

// Usage
char* classStr = getClass(UsartString);
Serial.println(classStr);
free(classStr); 
```

将预先分配的`char`数组传递给函数 - 这可以是调用函数中的局部变量：

```
void getClass(String command, char* returnStr) {
    for (int i = 0; i < 3; i++) {
        returnStr[i] = command[i+1];
    }

    return returnStr;
}

// Usage
char returnStr[3];
getClass(UsartString, returnStr);
Serial.println(returnStr); 
```

# assembly - 组装 - 验证 ISBN（某处的逻辑错误）

> ID：14928479
> 
> 赞同：1
> 
> 时间：2013-02-18T02:07:35.870
> 
> 标签：assembly, x86

我正在为[大学课程](http://www.csee.umbc.edu/~chang/cs313.s13/project1.shtml)做一个项目。

首先，我不是要求一个完整的解决方案。我很难找到哪里出错了。当我输入有效的 ISBN 3201541974 时，我的程序会打印“无效”代码块。对于您可以看到的任何逻辑错误，我将不胜感激，并且我也很想知道是否有比一次盯着我的所有代码更好的调试方法。我习惯于依赖简单的打印语句和断点。

编辑：问题就在这里

```
L1_top:
        mov     al, [esi]               ; get a character
        inc     esi         ; update source pointer
        sub     al, 0
        add     ah, al
        cmp     ah, 11
    ....... 
```

我从 al 中减去 0 的原因是因为 al 最初是一个字符。从 al 中减去 '0' 会将其转换为 int 或 w/e。我错误地减去了 0 而不是 '0'

正确的线是

```
 sub     al, '0' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T04:12:50.883

首先，我想说的是，我实际上是这门课程的助教，你只是寻求帮助调试而不是寻求答案，这很好，但我们确实有办公时间，而且我们非常友好。

我先回答比较简单的问题。有一种更简单的方法可以找到代码中的问题，它称为 gdb。它基本上只是一个调试器。以这种方式进行调试非常有帮助，因为它允许您在运行程序时查看寄存器和内存中的实际内容。这是有关如何使用它的一些信息的链接。我建议你阅读它，因为它真的很有帮助。[gdb 帮助](http://www.csee.umbc.edu/~chang/cs313.s13/gdb_help.shtml)。

现在进入更复杂的部分。

*   我不明白为什么你有 msg10 或 msg11，当你理解逻辑的设置方式时，你也可以摆脱它们和 msg5。
*   在您的错误检查中，您可能希望将 eax 与 11 进行比较，如果相等则跳转。这样，如果有正确的位数，它只需要处理逻辑。（10 位数 + 新行）
*   在您的循环中，您应该检查该值是否在“0”和“9”之间（是的，撇号很重要，它们告诉计算机这些值是 ASCII 而不是数字）或“X”。
*   完成之后，您应该检查“sum”和“t”是否大于或等于 11，如果是，则减去 11，并通过整个循环 10 次，每个字符一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T04:24:40.823

不幸的是，“打印语句”并不那么容易编写——只需调用“print_debug_out”函数就会改变大部分相关状态（标志、堆栈等）。但是您*可以*编写它们并且只执行一次。创建一个调试函数和宏的迷你库！

我也打算建议`gdb`。使用调试信息 (-g) 组装并使用 gdb 进行调试。您可能需要找到教程或 GUI 包装器，但学习使用 gdb（或其他调试器，就此而言）将是非常值得的。

请注意，您可以在源代码以及调试器中设置断点。只需使用`int 3`or`int3`说明。

# database - 如何升级 teamcity 使用的数据库？

> ID：14928483
> 
> 赞同：0
> 
> 时间：2013-02-18T02:08:33.357
> 
> 标签：database, configuration, teamcity

我正在尝试从 teamcity 6.5 升级到 7.1.4a。

我在启动时进入维护模式，它有助于通知我有一个：

版本不匹配：配置版本为 544，但数据库版本为 454。

Data Directory 目录路径：/opt/TeamCity-7.1.4a/.BuildServer 存在

数据库属性文件存在

内部数据库文件存在

数据库数据库类型：ORACLE

数据库连接网址：**

服务器：Oracle Oracle Database 11g 企业版 11.2.0.1.0 - 64 位生产，带有分区和自动存储管理选项

服务器版本：11.2

驱动：Oracle JDBC驱动11.2.0.1.0

驱动版本：11.2

版本 软件版本：544

数据目录版本：544

数据库版本：454

所有方便的信息，但我如何实际升级它。谷歌似乎表明我应该点击“升级”按钮。问题是没有一个。

那么我该如何真正升级它呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-01-19T10:17:17.260

该问题发生在**外部数据库**的不匹配版本上。在我的情况下，帮助更新和恢复 Teamcity：从 8.1.6 升级到 9.0.1，TeamCity 9.0.1 将要求将驱动程序升级到最新版本 5.1。如果 MySQL 服务器版本为 5.5 或更高版本，则 JDBC 驱动程序版本应为 5.1.23 或更高版本。升级到：连接器/J 5.1.34；团队城市 9.0；MySQL 5.6.22（MySQL 5.0.33+、5.1.49+、5.5+（**请注意，由于 MySQL 中的错误，5.0.20、5.0.22 和 5.1 至 5.1.34 的版本与 TeamCity 不兼容**））

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T02:17:25.310

你有没有看到这个[配置版本是 XXX 但数据库版本是 YYY](http://confluence.jetbrains.com/display/TCD5/Configuration+version+is+XXX+but+Database+version+is+YYY)

解决方案之一是删除数据库中的所有表。

# angularjs - 如何使用 Angular 指令处理单个 HTML 元素上的多个触摸事件

> ID：14928485
> 
> 赞同：2
> 
> 时间：2013-02-18T02:08:44.727
> 
> 标签：angularjs, touch, swipe

在我的移动应用程序中，我在主视图中以 HTML 格式显示内容：

```
<div class="imageView" na-swipe="next()" na-tap="showControls()"> content here </div> 
```

为了使用 jQuery（或 Hammer.js）处理事件`swipe`，`touch`我创建了这两个指令：

```
angular.module("naModule").directive 'naTap', ->
  (scope, element, attrs) ->
    tapping = false
    element.bind 'touchstart', -> tapping = true
    element.bind 'touchmove', -> tapping = false
    element.bind 'touchend', -> scope.$apply(attrs['naTap']) if tapping

angular.module("naModule").directive 'naSwipe', ->
  (scope, element, attrs) ->
    tapping = false
    swiping = false
    element.bind 'touchstart', -> tapping = true
    element.bind 'touchmove', -> swiping = true
    element.bind 'touchend',  -> scope.$apply(attrs['naSwipe']) if (swiping and tapping) 
```

`naSwipe`似乎运行良好，即在`next()`执行滑动时调用......但是，当我点击`next()`并`showControls()`同时开火时......**我如何干净地分开触摸并在这个 div 上滑动？**谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T03:32:47.063

我认为您以错误的方式处理您的用例。

考虑使用一个指令，其模板是您描述的标记，并在该指令的 link() 函数中定义要捕获的事件。

类似于以下指令：

```
angular.module('naModule').directive('imageView', function() {
    return {
        restrict: 'E',
        replace: true,
        scope: {
            // As required for your content ...
        },
        template: '<div class="imageView"> content here </div>',
        controller: function($scope, $attrs) {
            $scope.next = function() {
                // handle function..
            }

            $scope.showControls = function() {
                // handle function..
            }
        },
        link: function(scope, element, attrs, controller) {
            element.bind('touchstart', function(e) {
                scope.tapping = true;
                scope.swiping = true;
            }

            element.bind('touchmove', function(e) {
                scope.tapping = false;
                scope.swiping = true;
            }

            element.bind('touchend', function(e) {
                if(scope.tapping) {
                    scope.next();
                } else {
                    scope.showControls();
                }
            }
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:31:41.530

在某个地方，您需要重置`swiping`为 false。这可能应该作为 touchstart 回调的一部分来完成。

# java - NoClassDefFoundError 在运行时使用 Lucene IndexableField

> ID：14928492
> 
> 赞同：2
> 
> 时间：2013-02-18T02:10:08.357
> 
> 标签：java, ant, runtime-error, lucene

我编写了一个程序，它使用 Lucene 来匹配刮板的地址。编译和运行 NetBeans 时一切正常，但是从命令行构建和运行时，我收到以下信息：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/lucene/index/IndexableField
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186) 
```

我发现类 IndexableField.class 不在任何 jar 文件中，所以我不知道为什么它首先可以工作，更不用说为什么它在从终端构建和运行后就不能工作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-12T23:47:13.857

我遇到了这个问题。根据 Lucene 文档，我将 4 个罐子添加到类路径中并解决了问题。以下来自文档。

“设置你的 CLASSPATH

首先，您应该下载最新的 Lucene 发行版，然后将其解压到工作目录。

您需要四个 JAR：Lucene JAR、queryparser JAR、通用分析 JAR 和 Lucene 演示 JAR。您应该在解压档案时创建的 core/ 目录中看到 Lucene JAR 文件——它应该命名为 lucene-core-{version}.jar。您还应该在 queryparser、analysis/common/ 和 demo/ 下分别看到名为 lucene-queryparser-{version}.jar、lucene-analyzers-common-{version}.jar 和 lucene-demo-{version}.jar 的文件。

将所有这四个文件放在您的 Java CLASSPATH 中。”

# apache - .htaccess URL 屏蔽而不是重定向

> ID：14928498
> 
> 赞同：2
> 
> 时间：2013-02-18T02:11:14.137
> 
> 标签：apache, .htaccess, url-masking

我正在尝试将 URL 隐藏起来，就像**`www.somedomain.com/subfolder/index.php?p=page3`**它显示真实的 URL 一样**`www.somedomain.com/subfolder/page3`**，我知道这里已经问了很多这样的问题，我确实搜索了很多，但大多数结果也没有满足我的要求除了有关 htaccess 调整的基础知识，我几乎一无所知。

我搜索时得到的一个结果具有以下 htaccess 代码：

> 选项 +FollowSymLinks
> 选项 +Indexes
> RewriteEngine On
> RewriteRule ^index.php$ %{QUERY_STRING} [C]
> RewriteRule p=(.*) www.somedomain.com/subfolder/$1? [R=301,L]

它完成了有关 URL 重写的技巧，但它重定向页面而不是仅仅屏蔽 URL，并且它给出了 404 错误，即使我删除了 R=301 它也不起作用。

当我启动子文件夹的索引页面时，上面的代码也会出现 500 服务器错误**`www.somedomain.com/subfolder/`**。

最后我想提一下，我正在使用 localhost 中的子目录进行测试，以防万一，因为我在网上找到的一些代码要么根本不起作用，要么给出 500 服务器错误。

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T04:33:45.983

你可以试试这个：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
# Prevent loops
RewriteCond %{REQUEST_URI} !index\.php         [NC]
RewriteCond %{REQUEST_URI} ^/([^/]+)/([^/]+)/? [NC]
RewriteRule .*  %1/index.php?page=%2           [L] 
```

静默地图：

`http://www.somedomain.com/anyfolder/val`带或不带斜杠。

以上是在浏览器地址栏中输入并显示的 URL。

到：

`http://www.somedomain.com/anyfolder/index.php?p=val`

字符串`anyfolder`和`val`被假定为动态的。

对于永久重定向，请替换`[L]`为`[R=301,L]`.

# java - 递归方法适用于带有控制台的java，但不适用于android

> ID：14928499
> 
> 赞同：9
> 
> 时间：2013-02-18T02:11:18.427
> 
> 标签：java, android, methods, recursion, static

我写了一个递归方法，它从字符串中的字符中获取所有可能的字符组合。我还有一种方法可以访问它并返回组合列表：

```
public static void uns(String word, StringBuilder s, List combos)
{
    for(char c: word.toCharArray())
    {
        s.append(c);
        if(word.length() != 1) 
            {
            uns(removeChar(word, c),s,combos);
            }
        else
        {
            combos.add(s.toString());
        }
        s.deleteCharAt(s.toString().length()-1);
    }

}

public static List getCombinations(String word)
{
    List<String> combinations = new ArrayList<String>();
    uns(word,new StringBuilder(),combinations);
    return combinations;
}

public static String removeChar(String s, char c)
{
    int index = s.indexOf(c);
    return s.substring(0,index)+s.substring(index+1);
} 
```

在 Java 中对其进行测试时，它运行时没有任何缺陷。出于某种原因，当我在 Android 中使用它时，列表中填充了正确数量的元素，但每个元素都是相同的。例如，对于单词“here”，它返回一个填充有“eerh”的列表。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T02:34:59.040

这是一个非常奇怪的故障（绝对是可重现的），您可能需要对此提交错误报告。

但是，这是一个临时解决方法；而不是 using `.toString()`，这似乎以某种方式重用了引用（即使我这样做`.substring(0)`了），所以它们都得到了更新；如果您在每次迭代后打印出列表，您就会明白我的意思。

这是我的老套/低效解决方案。改变：

```
combos.add(s.toString()); 
```

... 到：

```
combos.add(s + ""); 
```

这有效地将字符串正确地克隆到数组中，因此它们不会被操纵：

> `02-17 19:33:48.605: I/System.out(6502): [Combos]: [here, heer, hree, hree, here, heer, ehre, eher, erhe, ereh, eehr, eerh, rhee, rhee, rehe, reeh, rehe, reeh, ehre, eher, erhe, ereh, eehr, eerh]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:53:10.290

我不是很肯定，但我认为字符串类的 valueOf() 方法也可以。也许尝试使用 List 而不是 StringBuilder，向列表中添加字符并尝试 String.valueOf(s.get(i)); 这应该将字符转换为字符串。我不明白为什么 out 在 Android 中不起作用，但您可能需要稍微修改一下循环。希望有帮助。

# mongodb - MongoDB - 为 eshop 构建集合和查询的正确方法

> ID：14928502
> 
> 赞同：-1
> 
> 时间：2013-02-18T02:11:23.623
> 
> 标签：mongodb, doctrine-odm

我是 MongoDB 的新手，我找到了 eshop 的解决方案。如何最好地构建：

收藏：

*   需要许多项目类型，如 cd、dvd、书籍.. 与作者
*   需要促销包 = 项目有很多项目（cd、dvd、书籍..）

询问：

*   需要这些物品的目录
*   需要过滤 - 作者、项目类型

我不确定它是否可能以及何时使用嵌入以及何时引用.. 我也在考虑教义2 odm 鉴别器

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:23:41.660

收藏：

*   *products*：它包含以下字段：类型、作者（这是另一个具有名称的对象等）
*   *促销包*：它包含名称、折扣等字段。

此外，*产品*集合包含一个名为“promotional_package”的字段，该字段包含一个promotionalPackages对象的*_id*

查询：

*   按作者过滤 →`db.products({ 'author.name': 'authorName' })`
*   按类型过滤 →`db.products({ type:'DVD' })`
*   要获取促销商品，您需要进行 2 个查询：一个获取促销包的 _id，`db.promotionalPackages.find({name:'my_promotional_package'})`另一个获取属于它的所有产品`db.products.find({ promotional_package: promotional_package._id })`

注意：避免 dbref 在 products 和 PromotionPackages 之间进行引用*，*你不需要它。

通常：将您访问的所有对象/文档（产品和作者）放在一起，并将可以单独访问的对象分开。研究您的用例，然后是您的查询，并为您的模式建模，以便在单个查询中获取 http 响应中所需的所有对象。

任何疑问？

# javascript - Jquery：如何创建双 .not() 语句？

> ID：14928512
> 
> 赞同：3
> 
> 时间：2013-02-18T02:13:29.963
> 
> 标签：javascript, jquery, jquery-selectors, attributes

我在 s 中有 3 层嵌套菜单`<ul>`，例如：

```
<div id="menu">
    <ul>
    <li><a href="somewhere.html">enu Item</a>
      <ul>
        <li><a href="somewhere.html">Menu Item 2</a>
            <ul>
               <li><a href="somewhere.html">Menu Item 3</a></li>
             </ul>
        </li>
      </ul>   
    </li>
    </ul>
</div> 
```

我想用jquery将`ul`s的第一级的href属性替换为#，但保留第2个和第3个a标签的href属性。

我创建了这个脚本，它适用于 2nd level `ul`，但不适用于第三级。

```
$("#menu ul li a").not("#ctamenu ul li ul a").attr("href", "#"); 
```

我试过这个：

```
$("#menu ul li a").not("#menu ul li ul a").not("#menu ul li ul li a").attr("href", "#") 
```

但这不起作用 - 第 3 层仍然有`href='#'`

有没有办法做一个“双重不”的声明？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T02:16:19.270

第三层嵌套在您缺少的另一个`ul`中，但使用子选择器会更容易：

```
#menu > ul > li > a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:51:22.477

根据您的情况，您可能会发现`class="first-level"`在第一级锚标记上创建添加很有帮助。然后您可以使用`$('.first-level')`，因为您的菜单的逻辑变得更加依赖于级别，因此更易于维护。

# jquery - Galleriffic jQuery 插件可防止其他 jQuery 事件

> ID：14928513
> 
> 赞同：1
> 
> 时间：2013-02-18T02:13:30.247
> 
> 标签：jquery, galleriffic

我想将一些我自己的 jQuery 添加到位于 Galleriffic 画廊插件 ( [http://www.twospy.com/galleriffic/](http://www.twospy.com/galleriffic/) ) 上的图像“标题”区域的对象中。

但是，我放入标题区域的任何 jQuery 都不会执行。就好像所有事件都被丢弃了。

我认为这是因为 Galleriffic 使用 remove() 而不是 detach()，所以我将所有内容都更改为 detach()，但这并没有帮助。我仍然似乎从“标题”区域中的所有内容中删除了所有事件。

有没有人知道如何将您自己的自定义 jQuery 添加到此标题区域并保留它？或者有任何其他关于为什么我在使用 detach() 后我在该区域中的所有事件都会被删除的其他指示？

我对这里的任何创意持开放态度！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:41:35.163

[您需要使用事件委托机制](http://api.jquery.com/on/)`caption`向元素注册事件处理程序。

前任：

```
$('#caption').on('click', 'a', function(){
    console.log($(this).attr('href'))
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/RUXyW/5/)

# php - Symfony2 通过 3rd Party REST API 进行身份验证

> ID：14928514
> 
> 赞同：12
> 
> 时间：2013-02-18T02:13:53.393
> 
> 标签：php, api, symfony, restful-authentication

我正在使用 Symfony2 编写一个应用程序，它将与[Wordnik REST API 接口](http://developer.wordnik.com/docs)。

目前，Wordnik API 不提供 OAuth 功能，因此我必须接受用户名和密码，然后我会透明地将其传递给 API 接口。

我想将此 API 身份验证集成到 Symfony2 的安全系统中，但到目前为止我还无法确定最佳实现路线是什么。

我认为[自定义用户提供程序](http://symfony.com/doc/2.0/cookbook/security/custom_provider.html)不正确，因为密码未存储在我的系统中。[所有关于自定义身份验证提供程序](http://symfony.com/doc/2.0/cookbook/security/custom_authentication_provider.html)的示例似乎都与将应用程序的一部分*作为*API 保护有关，而不是*针对*REST API。

我也不清楚 FOSUserBundle 在多大程度上有助于解决这个问题。

*理想流量：*

*   用户提供凭据。
*   凭证被传递给第 3 方 REST API
*   如果凭据正确：
    *   如果相应的“第三方用户”实体不存在，则由我的应用程序创建。
    *   使用此“第三方用户”实体对用户进行身份验证。

在 Symfony2 安全上下文中实现这一点的最佳方法是什么？

谢谢！

*相关问题：*

*   [Symfony2 上通过外部 API 配置用户身份验证的问题](https://stackoverflow.com/questions/14264066/problems-configuring-user-authentication-by-external-api-on-symfony2)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T23:40:12.270

您必须按照以下说明实现自定义身份验证提供程序： http: [//symfony.com/doc/current/cookbook/security/custom_authentication_provider.html](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)

我不能告诉你最好的方法是什么，只是为了帮助你开始：你创建一个监听器、一个令牌、一个提供者和一个工厂。

侦听器的尝试身份验证方法采用用户提供的凭据并使用该输入创建一个新令牌。在方法的最后，您将添加： return $this->authenticationManager->authenticate($token);

您的提供商将在身份验证方法中使用此令牌来发送 API 请求。

对于不存在的用户，您有两个选择： - 在 API 调用之后并在您检查它是否已经存在之后，在身份验证方法中创建一个用户，我认为这不是他们要走的路 - 创建您自己的身份验证失败处理程序，例如[https ://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Http/Authentication/DefaultAuthenticationFailureHandler.php](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Http/Authentication/DefaultAuthenticationFailureHandler.php)但在 onAuthenticationFailure 方法的顶部添加 if ($exception instanceof UsernameNotFoundException && (null ! == $token = $exception->getToken()) && $token instanceof YourWordnikToken) { // 在此处创建该用户 }

这只是它如何工作的基本想法......我在 IRC 上，昵称 hacfi - 如果您需要进一步的指导，请告诉我

# php - jquery ajax删除记录

> ID：14928516
> 
> 赞同：2
> 
> 时间：2013-02-18T02:14:06.097
> 
> 标签：php, jquery, ajax, json

我正在尝试删除表中逗号分隔字符串中的值。如果我手动设置帖子值，那么执行此操作的脚本（delete_url.php）本身就可以正常工作，但是我在使用 ajax 将这些值传递给脚本时遇到了问题。在我想要传递值的页面中，我有：

```
<script type="text/javascript">
            $(document).ready(function() {

                 $('.delete').click(function() {
        $.ajax({
            type: 'POST',
            url: '../scripts/delete_link.php', 
            data: 'link=' + $(this).attr('data_link') + '&topic_pk=' + $(this).attr('data_topic'),
            success: function() {

            }
        });        
    });
            });
        </script> 
```

和：

```
<a class='delete_link' href='#' data_link='<?php echo urlencode($link); ?>' data_topic='<?php echo $topic_pk; ?>' onclick="return confirm('Are you certain you want to DELETE this link?')";><img src="../images/delete.png" width="16" height="16" alt="delete" title="delete this link" border='0' /></a> 
```

我可能应该使用 json，但不确定执行此操作的正确方法。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:34:41.250

我已使用以下内容更新了我的代码，现在可以删除记录并删除页面上的条目：

```
<script type="text/javascript">
$(document).ready(function(){

    $('table#delTable td a.delete_link').click(function()
    {
        if (confirm("Are you sure you want to delete this row?"))
        {
            var id = $(this).parent().parent().attr('id');
            var data = 'id=' + id ;
            var parent = $(this).parent().parent();

            $.ajax(
            {
                   type: "POST",
                   url: '../scripts/delete_link.php',
                   data: 'link=' + $(this).attr('data_link') + '&topic_pk=' + $(this).attr('data_topic') + '&topic_introduction=' + $(this).attr('data_introduction'),
                   cache: false,

                   success: function()
                   {
                    parent.fadeOut('fast', function() {$(this).remove();});
                   }
             });
        }
    });
});

 </script> 
```

和表：

```
<table id='delTable' width="100%" border="0" cellpadding="5">
<?php 
if(!empty($retrieved_links)){
    foreach($retrieved_links as $link){
?>
  <tr>
    <td><?php echo $link; ?></td>
    <td width='16' align='center' valign='middle'><a class='delete_link' href='#' data_link='<?php echo urlencode($link); ?>' data_topic='<?php echo $topic_pk; ?>' data_introduction='<?php echo $topic_introduction; ?>'><img src="../images/delete.png" width="16" height="16" alt="delete" title="delete this link" border='0' /></a></td>
  </tr>
<?php }
}
?>
</table> 
```

和 delete_link.php：

```
<?php
require_once('../connection/connect.php');
mysql_select_db($database, $connection);

$link = urldecode($_POST['link']);
$topic_pk = $_POST['topic_pk'];
$topic_introduction = $_POST['topic_introduction'];

if(!empty($link)){

$query_get_topic = "SELECT * FROM topic WHERE topic_pk = '$topic_pk'";
$result_get_topic = mysql_query($query_get_topic, $connection) or die(mysql_error());
$row_get_topic = mysql_fetch_assoc($result_get_topic);

$retrieved_links = explode(",", $row_get_topic['links']);   

$delete_link = array_search($link,$retrieved_links);

unset($retrieved_links[$delete_link]);
$updated_links = mysql_real_escape_string(implode(',',$retrieved_links));

$links_body = str_replace(',', '<p>', $updated_links);
$topic = $topic_introduction . '<p>' . $links_body;

$query = "UPDATE topic SET links = '$updated_links', topic = '$topic' WHERE topic_pk = '$topic_pk'";
$result = mysql_query($query, $connection) or die(mysql_error());
}
mysql_close();
?> 
```

# r - R中的随机人口统计数据框健全性检查

> ID：14928517
> 
> 赞同：1
> 
> 时间：2013-02-18T02:14:06.740
> 
> 标签：r, dataframe, sanity-check

我正在尝试制作一个包含人口统计信息的样本数据框。我想确保生成的每一行数据都是合乎逻辑的。具体来说，没有一行表示 22 岁以下同时拥有博士学位的人。如何让数据框对此进行逻辑检查？下面是我目前正在使用的代码。变量“a”是要输出的行数，“b”是年龄中位数，“d”是 NA 的概率。

```
AgeFn <- function(a,b){
  MedianYr <- b
  Year <- 1900 + as.POSIXlt(Sys.Date())$year
  RNormYr <- as.integer((rnorm(a)*10+MedianYr))
  Age1 <- Year - RNormYr
}

EducationFn <- function(a, d){
  EducationLs <- c("Some High School", "High School Grad", "Associates", "Bachelors",     
  "Masters", "Profession", "Doctorate", NA)
  Education1 <- sample(EducationLs, a, replace=TRUE, prob=c(0.085, 0.25, 0.075, 0.176, 0.072,   
  0.019, 0.012, d))
  return(Education1)
}

UserGen <- function(a,b,d){
  ID <- c(1:a)
  Age <- AgeFn(a,b,c)
  Education <- EducationFn(a,d) 
  data.frame(ID, Age, Gender, Education)
} 
```

系统：Mac OS 10.8.2，RStudio：v0.97.312

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T02:48:59.060

如果你想检查你的 data.frame 是否有不需要的组合，你可以使用如下命令：

```
subset(df, Age <= 22 & Education == 'Doctorate') 
```

或者

```
df[df$Age <= 22 & df$Education == 'Doctorate',] 
```

两者都将返回数据框中符合您的条件的任何行。

如果您的意图是从以另一个已建立变量为条件的概率分布中进行抽样，您可以尝试`ifelse`. 一个详细的例子：

```
EduByAge <- function (Age) {
  ifelse(Age < 12 , sample(c('Elementary', 'Middle'), size=1),
    ifelse(Age < 22, sample(c('Elementary', 'Middle', 'High', 'College'), size=1),
           ifelse(Age < 35, sample(c('Elementary','Middle','High','College','Masters','Doctorate'),size=1), 'None')))
} 
```

# runtime-error - 我在每个类中都有三个以上的元素，但是我得到了这个错误：“类不能小于 scikit-learn 中的 k=3”

> ID：14928518
> 
> 赞同：16
> 
> 时间：2013-02-18T02:14:07.873
> 
> 标签：runtime-error, svm, scikit-learn, cross-validation

这是我的目标（y）：

```
target = [7,1,2,2,3,5,4,
      1,3,1,4,4,6,6,
      7,5,7,8,8,8,5,
      3,3,6,2,7,7,1,
      10,3,7,10,4,10,
      2,2,2,7] 
```

我不知道为什么我正在执行：

```
...
# Split the data set in two equal parts
X_train, X_test, y_train, y_test = train_test_split(
X, y, test_size=0.5, random_state=0)

# Set the parameters by cross-validation
tuned_parameters = [{'kernel': ['rbf'], 'gamma': [1e-3, 1e-4],
                 'C': [1, 10, 100, 1000]},
                {'kernel': ['linear'], 'C': [1, 10, 100, 1000]}]

scores = ['precision', 'recall']

for score in scores:
    print("# Tuning hyper-parameters for %s" % score)
    print()

    clf = GridSearchCV(SVC(C=1), tuned_parameters)#scoring non esiste
    # I get an error in the line below
    clf.fit(X_train, y_train, cv=5)
... 
```

我收到此错误：

```
Traceback (most recent call last):
  File "C:\Python27\SVMpredictCROSSeGRID.py", line 232, in <module>
clf.fit(X_train, y_train, cv=5)  #The minimum number of labels for any class cannot be less than k=3.
File "C:\Python27\lib\site-packages\sklearn\grid_search.py", line 354, in fit
return self._fit(X, y)
File "C:\Python27\lib\site-packages\sklearn\grid_search.py", line 372, in _fit
cv = check_cv(cv, X, y, classifier=is_classifier(estimator))
File "C:\Python27\lib\site-packages\sklearn\cross_validation.py", line 1148, in check_cv
cv = StratifiedKFold(y, cv, indices=is_sparse)
File "C:\Python27\lib\site-packages\sklearn\cross_validation.py", line 358, in __init__
" be less than k=%d." % (min_labels, k))
ValueError: The least populated class in y has only 1 members, which is too few. The minimum number of labels for any class cannot be less than k=3. 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-18T02:28:18.760

该算法要求您的训练集中至少有 3 个标签实例。尽管您的`target`数组至少包含每个标签的 3 个实例，但是当您在训练和测试之间拆分数据时，并非所有训练标签都有 3 个实例。

您要么需要合并一些类标签，要么增加训练样本来解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:58:31.000

如果您无法拆分测试集和训练集，并且在每个折叠中都填充了足够多的每个类，那么请尝试更新 Scikit 库。

```
pip install -U scikit-learn 
```

您将收到与警告相同的消息，因此您可以运行代码。

# python - 连接到远程服务器时 MySQLdb 的安全性？

> ID：14928519
> 
> 赞同：5
> 
> 时间：2013-02-18T02:14:18.500
> 
> 标签：python, security, mysql-python

```
 db = MySQLdb.connect(host ="host",
        user="user",
        passwd="pass",
        db="dbname")
    q = db.cursor() 
```

所以，这是我的代码块，我只是想知道，逆向工程有多容易，mysqldb 是否通过明文发送身份验证？

我正在创建一个通过 Internet 连接到 mySQL 服务器的程序，有人可以获取我的凭据吗？

有人可以获取我的服务器登录详细信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:32:37.823

MySQL 服务器可以配置为使用 SSL 来保护连接。有关使用带有 SSL 连接的 MySQLdb 的示例，请参见[此处](https://stackoverflow.com/questions/7287088/ca-ssl-parameter-for-python-mysqldb-not-working-but-key-does)，有关配置服务器的一些信息，请参见[此处。](http://dev.mysql.com/doc/refman/5.1/en/configuring-for-ssl.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T04:09:51.363

在上面的示例中，用户名、密码和所有其他数据将以明文形式发送。

这里有两个相关的问题[Python MySQLDB SSL Connection](https://stackoverflow.com/questions/3173650/python-mysqldb-ssl-connection)， Python MySQLdb 的[CA SSL 参数不起作用，但是 key 可以吗？](https://stackoverflow.com/questions/7287088/ca-ssl-parameter-for-python-mysqldb-not-working-but-key-does)

如果您有权更改配置 MySQL 服务器，我们可以帮助配置 SSL。

MySQL 支持加密连接。您要连接的 MySQL 服务器必须配置为使用 SSL，并且客户端在连接时必须添加 SSL 参数。

[使用 SSL 连接](http://dev.mysql.com/doc/refman/5.0/en/using-ssl-connections.html)

```
shell> mysql --ssl-ca=ca-cert.pem ... 
```

您可以测试您要连接的服务器是否支持 SSL my added `--ssl-ca=ca-cert.pem`。ca-cert.pem：在服务器端和客户端使用它作为[--ssl-ca](http://dev.mysql.com/doc/refman/5.0/en/ssl-options.html#option_general_ssl-ca)的参数。（如果使用 CA 证书，两边必须相同。）

[MySQL SSL 示例](http://dev.mysql.com/doc/refman/5.0/en/creating-ssl-certs.html)描述了为 SSL 设置 MySQL 和连接的过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T13:39:08.230

密码不应在代码中硬编码。Python 具有 config.py 模块的约定，您可以在其中将这些值与其余代码分开。

请看这里：

[http://dev.mysql.com/doc/refman/5.5/en/connector-python-coding.html](http://dev.mysql.com/doc/refman/5.5/en/connector-python-coding.html)

上面已经回答了有关 SSL 以防止泄露的问题。

法比奥@fcerullo

# c - 那么“返回 0”实际上是什么意思呢？

> ID：14928520
> 
> 赞同：18
> 
> 时间：2013-02-18T02:15:08.153
> 
> 标签：c, return

我非常精通 PHP，但我已经开始涉足 C。我看过代码

```
return 0; 
```

在不返回值的函数的末尾。这在 PHP 中没有使用，因为如果函数没有返回值，则会自动返回值 NULL。

我要问的是，用简单的英语，`return 0`实际做了什么？是否像 PHP 一样，将其参数作为函数调用的值返回？这只是好习惯吗？

我知道这个问题以前被问过很多次，但我是从 PHP 开发人员的角度来问的。谷歌抛出的答案并没有那么简洁。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-18T02:26:29.193

> 是否像 php 一样，将其参数作为函数调用的值返回？这只是好习惯吗？

是的，PHP 和许多其他语言都从“C”中借用了`return`关键字。并且在所有语言中，`return`关键字具有相同的功能——从函数中返回。关键字后面的任何内容`return`都是返回给调用者的值。

这是一个好习惯吗？是和否。并非所有函数**都应该**返回一个值。甚至在标准库中也有不少，不返回任何值。因此它们的返回类型是`void`.

但是`main`函数应该返回`0`(also `EXIT_SUCCESS`) 以识别程序已成功执行。否则 -1（也`EXIT_FAILURE`）

编辑：（感谢@KeithThompson）：

`EXIT_FAILURE`是实现定义的。`1`是一个共同的价值，`EXIT_FAILURE`但重点是，你不必知道。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-18T02:29:25.123

由于历史原因，可以编写`return 0;`从已声明为的函数返回`void`，如下所示：

```
void foo( /* arguments */ )
{
  /* do things */
  return 0;
} 
```

这没有任何作用，并且`0`（或您放在那里的任何东西）都被扔掉了。此外，如果你这样做，明智的编译器会给你一个警告信息。所以不要这样做。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-18T02:19:47.987

如果没有定义其他返回类型，C 中的函数默认返回 int。如果调用者正在查看返回值，return 0 将是确保函数返回已知值而不是随机值的好习惯。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-18T02:18:47.430

它实际上是返回一个 0 的整数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-27T04:32:45.197

C 编程语言允许程序退出或从主函数返回，通过返回整数或返回宏`EXIT_SUCCESS`和`EXIT_FAILURE`. 在 Unix 上，它们分别等于 0 和 1。AC 程序也可以使用`exit()`指定整数状态或退出宏的函数作为第一个参数。

除了宏`EXIT_SUCCESS`和之外`EXIT_FAILURE`，C 标准没有定义返回码的含义。返回码的使用规则因平台而异。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-27T14:18:29.637

在 C 中，只有在函数的开头声明一个带有 void 的函数时，才不必返回值。第一个例子：

```
#include <stdio.h>
 int main()
{
   printf("Hello World!");
    return 0; // you have to use return because main starting with int
} 
```

第二个例子：

```
#include <stdio.h>
void main()
{
printf("Hello World!");
//in this case return is useless, main is a void function

} 
```

# c# - C#：非阻塞睡眠

> ID：14928522
> 
> 赞同：-1
> 
> 时间：2013-02-18T02:15:30.960
> 
> 标签：c#, multithreading

我正在为我的 Logitech G510 LCD 键盘编写一个小应用程序，但遇到了一个小问题。绘制到我的屏幕后，我希望我的程序处于空闲状态并作为进程保持活动状态，但不消耗计算机上的任何资源。

但是，每当引发某个事件时，我都需要打开一个表单。我相信`Thread.Sleep()`这不是最好的方法。

这是我的代码大致如下所示：

```
int main(){
    InitLCD();
    DrawStuff();

    Wait();
}

void HandleEvent(){
    //Create a Form if none exists
}

//Must be called before exiting
void OnExit()
{
    CloseLCD();
} 
```

也许一个关心事件的单独线程是一个解决方案？如果是这样，怎么做？

EDIT:// 该应用程序是一个不可见的 WinForm 应用程序。这意味着，启动时不会创建任何表单。仅当引发所述事件时，才会创建实际表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:37:11.770

以这种方式尝试逻辑：

```
public static class Program
    {
        private static AutoResetEvent waithandle = new AutoResetEvent(true);
        static void Main()
        {
            LCDClass lcd = new LCDClass();
            lcd.mid_event += LcdOnMidEvent;
            lcd.exit_event += LcdOnExitEvent;
            lcd.init();

            Thread thread = new Thread(lcd.DrawStuff);
            thread.Start(waithandle);
            waithandle.WaitOne();

        }

        private static void LcdOnExitEvent(object sendet, EventArgs eventArgs)
        {
            //lcd work finished
        }

        private static void LcdOnMidEvent(object sendet, EventArgs eventArgs)
        {
            // handle event, create form
            Application.Run(new MyForm());
        }

    }

    internal class LCDClass
    {
        private AutoResetEvent waithandle;
        internal delegate void MyEventHandler(object sendet, EventArgs e);

        internal event MyEventHandler mid_event;

        protected virtual void OnMidEvent(object sendet)
        {
            MyEventHandler handler = mid_event;
            if (handler != null) handler(sendet, EventArgs.Empty);
        }

        internal event MyEventHandler exit_event;

        protected virtual void OnExitEvent(object sendet)
        {
            MyEventHandler handler = exit_event;
            if (handler != null) handler(sendet, EventArgs.Empty);
        }

        public void init()
        {
        }

        public void DrawStuff(object state)
        {
            // do work here

            // raise event
            mid_event(this, null);

            //do more work

            // raise event
            exit_event(this, null);
            waithandle.Set();

        }

    } 
```

# javascript - 为什么 readyState 不等于 4？

> ID：14928529
> 
> 赞同：1
> 
> 时间：2013-02-18T02:16:25.550
> 
> 标签：javascript, php, ajax, debugging, readystate

我试图学习如何使用ajax从数据库接收数据，但我遇到了一些问题......

问题是当我提交查询时我没有看到任何东西...我知道问题是因为 readyState 不等于 4...但是为什么呢？

我在 index.html 文件中有这段代码：

```
<script language="javascript" type="text/javascript">
<!-- 
//Browser Support Code
function ajaxFunction(){
    var ajaxRequest;  // The variable that makes Ajax possible!

    try{
        // Opera 8.0+, Firefox, Safari
        ajaxRequest = new XMLHttpRequest();
    } catch (e){
        // Internet Explorer Browsers
        try{
            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try{
                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e){
                // Something went wrong
                alert("Your browser broke!");
                return false;
            }
        }
    }
    // Create a function that will receive data sent from the server
    ajaxRequest.onreadystatechange = function(){
        if(ajaxRequest.readyState == 4){
            document.myForm.time.value = ajaxRequest.responseText;
        }
    }
    var age = document.getElementById('age').value;
    var wpm = document.getElementById('wpm').value;
    var sex = document.getElementById('sex').value;
    var queryString = "?age=" + age + "&wpm=" + wpm + "&sex=" + sex;
    ajaxRequest.open("GET", "ajax-example.php" + queryString, true);
    ajaxRequest.send(null); 
}

//-->
</script>

<form name='myForm'>
   Max Age: <input type='text' id='age' /> <br />
   Max WPM: <input type='text' id='wpm' />
   <br />
   Sex: <select id='sex'>
          <option>m</option>
          <option>f</option>
        </select>

    <input type='button' onclick='ajaxFunction()' value='Query MySQL' />
</form> 
```

以及 ajax-example.php 文件中的这段代码：

```
<?php
$dbhost = "localhost";
$dbuser = "root";
$dbpass = "*************";
$dbname = "*************";
    //Connect to MySQL Server
mysql_connect($dbhost, $dbuser, $dbpass);
    //Select Database
mysql_select_db($dbname) or die(mysql_error());
    // Retrieve data from Query String
$age = $_GET['age'];
$sex = $_GET['sex'];
$wpm = $_GET['wpm'];
    // Escape User Input to help prevent SQL Injection
$age = mysql_real_escape_string($age);
$sex = mysql_real_escape_string($sex);
$wpm = mysql_real_escape_string($wpm);
    //build query
$query = "SELECT * FROM ajax_example WHERE ae_sex = '$sex'";
if(is_numeric($age))
    $query .= " AND ae_age <= $age";
if(is_numeric($wpm))
    $query .= " AND ae_wpm <= $wpm";
    //Execute query
$qry_result = mysql_query($query) or die(mysql_error());

    //Build Result String
$display_string = "<table>";
$display_string .= "<tr>";
$display_string .= "<th>Name</th>";
$display_string .= "<th>Age</th>";
$display_string .= "<th>Sex</th>";
$display_string .= "<th>WPM</th>";
$display_string .= "</tr>";

    // Insert a new row in the table for each person returned
while($row = mysql_fetch_array($qry_result)){
    $display_string .= "<tr>";
    $display_string .= "<td>$row[ae_name]</td>";
    $display_string .= "<td>$row[ae_age]</td>";
    $display_string .= "<td>$row[ae_sex]</td>";
    $display_string .= "<td>$row[ae_wpm]</td>";
    $display_string .= "</tr>";

}
echo "Query: " . $query . "<br />";
$display_string .= "</table>";
echo $display_string;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T01:25:41.693

操作顺序必须是：

1.  创建 AJAX 对象
2.  打开连接
3.  设置 readystatechange 处理程序
4.  发送请求。

您的项目 2 和 3 的顺序错误，因此事件处理程序正在被清除并且永远不会被调用。

编辑：还应该指出的是，`new XMLHttpRequest`自 2007 年以来，随着 IE7 的发布，它已经完全跨浏览器。您现在不需要使用那些 ActiveXObjects。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T01:18:24.310

它看起来像两件事之一：

*   `localhost`被用作域；它应该是`127.0.0.1`
*   `ajax-example.php`正在本地主机上运行，​​但关联的 HTML 文件不是

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-09T16:59:23.397

var queryString = "?age=" + 年龄 + "&wpm=" + wpm + "&sex=" + 性别；

> 你应该使用 double and(&&) 试试看

var queryString = "?age=" + 年龄 + "&&wpm=" + wpm + "&&sex=" + 性别；

# javascript - 如何为ajax返回的html标签注册事件？

> ID：14928530
> 
> 赞同：1
> 
> 时间：2013-02-18T02:16:26.363
> 
> 标签：javascript, jquery

我是 jquery 的新手，所以我不知道我是否正确地为问题命名。对于回发 html 标记，我可以注册以下事件：

```
$(document).ready(function () {
 $(":input[data-autocomplete]").each(function () {
 ...}); 
```

现在我需要允许用户单击按钮以通过触发 ajax 调用来添加更多项目，并附加包含新项目标记的服务器响应：

```
$(this).click(function(){
     $.get("my url", {}, function (data) {$("#xxx").append(data);});
     }); 
```

我的问题是：现在返回的“数据”中有一些带有属性 [data-autocomplete] 的新标记，我该如何为它们进行相同的事件注册？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T02:24:53.810

尝试使用***on***委托事件：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

```
$(document).on("click", ":input[data-autocomplete]", function(event){
   alert($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T02:32:33.527

你的意思是：附加内容包括一些新的输入，你需要在附加它们后注册事件如下？

```
$(this).click(function(){
    $.get("my url", {}, function (data) {
        $("#xxx").append(data);
        $("#xxx").find(":input[data-autocomplete]").each(function () {
        ...});
    });
}); 
```

# php - PHP cURL 重定向到本地主机

> ID：14928532
> 
> 赞同：0
> 
> 时间：2013-02-18T02:16:37.310
> 
> 标签：php, redirect, curl, login, localhost

我正在尝试使用带有 cURL 的 php 脚本登录到外部网页。我是 cURL 的新手，所以我觉得我错过了很多东西。我找到了一些示例并对其进行了修改以允许访问 https 页面。最终，我的目标是能够登录到页面并在登录后按照指定的链接下载.csv。到目前为止，我拥有的是一个测试登录到页面的脚本；脚本如下所示：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://www.websiteurl.com/login');
curl_setopt($ch, CURLOPT_POSTFIELDS,'Email='.urlencode($login_email).'&Password='.urlencode($login_pass).'&submit=1');
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_COOKIEJAR, "cookie.txt");
curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.3) Gecko/20070309 Firefox/2.0.0.3");
curl_setopt($ch, CURLOPT_REFERER, "https://www.websiteurl.com/login");
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
$output = curl_exec($ch); 
```

我有几个问题。首先，这是否有理由不自行重定向？我查看页面内容的唯一方法是

```
echo $output 
```

即使 CURLOPT_RETURNTRANSFER 和 CURLOPT_FOLLOWLOCATION 都设置为 True。

其次，页面的 URL 停留在“localhost/folderName/test.php”，而不是指向实际的网站。谁能解释为什么会这样？因为脚本实际上并没有重定向到登录的网页，所以我似乎无法做任何我需要做的事情。

我的问题与 cookie 有关吗？我的 cookies.txt 文件与我的 .php 脚本位于同一个文件夹中。（顺便说一句，我正在使用 wampServer ）。它应该位于其他地方吗？

一旦我能够解决这两个问题，似乎我需要做的就是重定向到启动 .csv 文件下载过程的链接。

感谢您的帮助，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T02:22:22.113

回答您的部分问题：

从[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)：

> CURLOPT_RETURNTRANSFER TRUE 将传输作为 curl_exec() 的返回值的字符串返回，而不是直接输出。

换句话说 - 完全按照您的描述进行。它会将响应返回到一个字符串，然后您`echo`就可以看到它。按照要求...

> - - - 编辑 - - -

至于你问题的第二部分 - 当我将脚本的最后三行更改为

```
$output = curl_exec($ch);
header('Location:'.$website);
echo $output; 
```

显示的页面地址更改为`$website`- 在我的情况下，它是我用来存储相当于您的“ [https://www.websiteurl.com/login](https://www.websiteurl.com/login) ”的变量

我不确定那是您想要做的 - 因为我不确定我是否了解您的下一步。如果您被登录站点重定向，新地址不会是返回的标头的一部分吗？您是否不需要提取该地址以执行下一个请求（`wget`或其他）以下载您想要获取的文件？

为此，您需要将 CURLOPT_HEADER 设置为 TRUE，

您可以获取最终的 URL

```
$last_url = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL); 
```

（参见[cURL ，将 url 重定向到一个变量](https://stackoverflow.com/questions/4062819/curl-get-redirect-url-to-a-variable)）。

相同的链接还有一个有用的脚本，用于完全解析标头信息（返回时返回`CURLOPT_HEADER==true`。它在 nico limpica 的答案中。

底线：如果您将 CURL 指向特定站点，CURL 会获取您的浏览器会收到的信息；这并不意味着您的浏览器的行为就像您将其指向该站点一样...

# php - 当我尝试检索为对象 $obj 设置的值时，我得到一个空白

> ID：14928533
> 
> 赞同：1
> 
> 时间：2013-02-18T02:16:59.640
> 
> 标签：php, class

在以下脚本中，我尝试为 object 设置值`$var_1`并`$var_2`使用该`set`方法`$obj`。但是当我调用 get 方法来检索为该对象设置的值时，我得到一个空白。这是为什么 ？

```
<?php
class Tester {

    public $var_1;
    public $var_2;

    public function set() {
        $var_1 = 20;
        $var_2 = "Tu jo aa jaaye..toh is ghar ko sawanrta dekhun";
    }

    public function get() {
        return "Var_1 is : {$var_1} and Var_2 is : {$var_2}";
    }
}

$obj = new Tester();
$obj_c = clone $obj;
$obj_nc = $obj;

$obj->set();
echo $obj->get();

echo $obj_nc->get(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T02:18:10.653

`$this`在 PHP 中是必需的。否则，您将引用局部变量。

```
public function someFunc()
{
    //$this->var and $var are in no way linked:
    $var = 1; //A local variable named $var with a value of 1
    $this->var = 2; // A property of $this object with a value of 2
} 
```

* * *

附带说明一下，您应该一路发展`display_errors` `On`并[`error_reporting`](http://php.net/manual/en/function.error-reporting.php)一路向上。如果是这种情况，您会看到您引用了未定义变量的通知。（请注意，error_reporting 可以说应该在生产服务器上一直启动[如果您的代码是用它来编写的]，但`display_errors`永远不应该`On`在生产环境中——应该使用日志。）

# ide - 如何让 IntellIJ 对项目中的所有主文件使用 JVM 选项？

> ID：14928534
> 
> 赞同：7
> 
> 时间：2013-02-18T02:17:01.213
> 
> 标签：ide, intellij-idea, jvm, native

我可以配置一个主文件以使用所需的本机，但在我的项目中有多个主要功能，因此当我可以选择调试任何我想要的文件时，我需要所有文件来使用 JVM 选项，而无需为每个文件创建配置一

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T02:37:59.267

您可以更改**默认**节点下的配置（新版本中的**模板**），所有新配置都将继承其设置。确保更改正确的默认配置类型，`Application`这很可能是您需要的。

![应用](../Images/c387548e789829ce0a0e50c9c5b5d5b0.png)

[有关详细信息，请参阅文档](https://www.jetbrains.com/help/idea/changing-default-run-debug-configurations.html)。

# css - HTML 'class' 元素属性可以包含换行符吗？

> ID：14928536
> 
> 赞同：20
> 
> 时间：2013-02-18T02:17:04.997
> 
> 标签：css, html

HTML5 元素的 'class' 属性可以包含换行符吗？它在规范中是否允许并且浏览器是否支持它？

我问是因为我有一些代码可以动态地将各种类插入到元素中，这造成了一条非常长的难以管理的行。通常我会使用变量构建类值，但我使用的 CMS 需要将模板条件标签与 HTML 内联定位。我不能使用变量或 PHP。

我在研究中发现，一些 HTML 标记属性必须是一行，但我无法发现类属性是否是其中之一。

有人知道吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-18T02:26:28.490

Per the [HTML 4 spec](http://www.w3.org/TR/html4/index/attributes.html), the `class` attribute is [`CDATA`](http://www.w3.org/TR/html4/types.html#type-cdata):

> User agents should interpret attribute values as follows:
> 
> o Replace character entities with characters
> 
> o Ignore line feeds
> 
> o Replace each carriage return or tab with a single space.

so you're in good shape there.

The [HTML5 spec](http://www.w3.org/TR/html5/dom.html#classes) describes a class as a [set of space separated tokens](http://www.w3.org/TR/html5/infrastructure.html#set-of-space-separated-tokens), where a 'space' includes newlines.

So you should be good there, too.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T02:41:13.507

> HTML5 元素的属性可以`[class]`包含换行符吗？

是的。[HTML5 规范说](http://www.w3.org/html/wg/drafts/html/master/single-page.html#classes)：

> 该属性（如果指定）必须具有一个值，该值是一[组以空格分隔的标记](http://www.w3.org/html/wg/drafts/html/master/single-page.html#set-of-space-separated-tokens)，表示该元素所属的各种类。

链接继续说：

> 一**组以空格分隔的标记**是包含零个或多个单词（称为标记）由一个或多个[空格字符](http://www.w3.org/html/wg/drafts/html/master/single-page.html#space-character)分隔的字符串，其中单词由一个或多个字符的任何字符串组成，其中没有一个是[空格字符](http://www.w3.org/html/wg/drafts/html/master/single-page.html#space-character)。

空格字符包括：

*   空格 ( `' '`)
*   选项卡 ( `\t`)
*   换行 ( `\n`)
*   换页 ( `\f`)
*   回车 ( `\r`)

> 就本规范而言，**空格字符**是 U+0020 SPACE、“tab”（U+0009）、“LF”（U+000A）、“FF”（U+000C）和“CR”（U +000D)。

您将添加到 UTF-8 文档的换行符是：

*   换行符 ( `\n`)
*   回车 ( `\r`)
*   回车后紧跟换行符 ( `\r\n`)

# c# - 为什么我在这条线上出现错误？

> ID：14928542
> 
> 赞同：4
> 
> 时间：2013-02-18T02:17:36.173
> 
> 标签：c#, .net

```
float startPos = e.Graphics.MeasureString(toMeasure, f);
                    e.Graphics.DrawString(keyword, f, sb, new PointF(e.Bounds.X + (int)startPos, e.Bounds.Y)); 
```

这是`f`：

```
using (Font f = new Font(FontFamily.GenericSansSerif, 8, FontStyle.Regular)) 
```

这是`toMeasure`：

```
string toMeasure = data[e.Index].Substring(0, keywords - 1); 
```

错误在线：

```
float startPos = e.Graphics.MeasureString(toMeasure, f); 
```

错误是：

> *无法将类型“System.Drawing.SizeF”隐式转换为“float”*

我该如何解决？由于第二行应该浮动，但第一行不能从转换`SizeF`为`float`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T02:22:17.400

如果你想要的`Width`你`string`将不得不`Width`从`SizeF`返回的结构中获得`MeasureString`

例子：

```
float startPos = e.Graphics.MeasureString(toMeasure, f).Width; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T02:19:40.827

方法[`MeasureString`](http://msdn.microsoft.com/en-us/library/6xe5hazb.aspx)返回`SizeF`对象。

```
SizeF startPos = e.Graphics.MeasureString(toMeasure, f); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T02:20:18.083

正如错误所说，[MeasureString](http://msdn.microsoft.com/en-sg/library/6xe5hazb.aspx)函数返回 a [`System.Drawing.SizeF`](http://msdn.microsoft.com/en-sg/library/6xe5hazb.aspx)，即 a `ordered pair of floating-point numbers`。

# jquery - 带有ajax效果的mvc post

> ID：14928543
> 
> 赞同：2
> 
> 时间：2013-02-18T02:17:42.773
> 
> 标签：jquery, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

在我问这个问题之前，请参阅谷歌科学博览会网站以供参考：[https ://www.googlesciencefair.com/en/2013/](https://www.googlesciencefair.com/en/2013/)

在该站点中，当我单击一个按钮时，它会发布到另一个页面。我这样说是因为：

*   有一个新网址
*   刷新/停止浏览器按钮闪烁

但是，视觉效果看起来只是一个 ajax 调用。我这样说是因为：

*   只有相关部分得到更新
*   页眉、侧边栏甚至页脚似乎都没有重新加载
*   新内容只是“滑入”

有没有什么方法可以使用 ASP.NET MVC 3 达到同样的效果？

谢谢！

## 编辑

我知道如何进行 ajax 调用并获得结果。但是，当我这样做时，URL 不会改变。我想知道进行 ajax 调用并同时更改 URL，就像谷歌科学博览会网站一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:01:15.757

谢谢大家的回答。最终的答案是他们正在使用[Angular JS](http://angularjs.org/)来达到预期的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T04:11:03.160

如果您使用附加的开发工具运行它并查看网络请求，它看起来就像是在进行 ajax 调用

![在此处输入图像描述](../Images/0de53042f59472ce7f86ba349a538e9b.png)

# php - PHP 变量名语法：数字和变量作为变量名的一部分

> ID：14928548
> 
> 赞同：0
> 
> 时间：2013-02-18T02:18:34.800
> 
> 标签：php, arrays, loops

我有一个定义为数组的变量，它内置在一个循环中：

```
$years=array("2010","2011","2012");

    foreach($years as $year)
    {
    ///an SQL query + some PDO that queries a different table based on $year
    $dataset_full_{$year} = $stmt->fetchAll(PDO::FETCH_ASSOC);
    } 
```

所以你最终得到了一组名为

```
$dataset_full_2010
$dataset_full_2011
$dataset_full_2012 
```

当我`print_r($dataset_full_2012);`然而我什么都得不到，但如果我继续定义

```
$current_year="2012"; 
```

然后

```
print_r($dataset_full_{$current_year}); 
```

我得到了我的数组。我在这里滥用了什么语法？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:24:33.250

为了安全起见，您始终可以使用中间字符串：

```
$var_name = "dataset_full_" . $year;
$$var_name = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

您还可以在花括号内使用连接：

```
${"dataset_full_" . $year} = ... 
```

[这是文档](http://www.php.net/manual/en/language.variables.variable.php)

# c++ - 使用指针c ++显示用户输入

> ID：14928550
> 
> 赞同：-1
> 
> 时间：2013-02-18T02:18:48.707
> 
> 标签：c++

帮助我知道它有什么问题，因为我只是一个初学者，我正在尝试构建一个程序，要求用户输入短句，直到用户退出并以相反的顺序显示它们：示例用户输入：

```
My name is Todd
I like to travel 
```

并像这样显示：

```
I like to travel
My name is Todd 
```

任何人都可以帮助我使其正常工作；它可以正常工作，但不会在执行后立即退出。我希望能够抓住窗户。提前致谢

```
#include <iostream>
#include <iterator>
#include <vector>
using namespace std;

int main(int argc, char *argv[])
{
    const int SIZE = 500;
    char input[SIZE];

    // collection that will hold our lines of text
    vector<string> lines;
    do
    {   // prompt the user
        cout << "Enter a short sentence(<enter> to exit): ";
        cin.getline(input,SIZE);
        if (!getline(cin, input) || input.empty())
            break;
        lines.push_back(input);
    } while (true);

    // send back to output using reverse iterators
    //  to switch line order.
    copy(lines.rbegin(), lines.rend(),
         ostream_iterator<string>(cout, "\n"));
      // assume the file to reverse-print is the first
    //  command-line parameter. if we don't have one
    //  we need to leave now.
    if (argc < 2)
        return EXIT_FAILURE;

    // will hold our file data
    std::vector<char> data;

    // open file, turning off white-space skipping
    cin>>(argv[1]);
    cin.seekg(0, cin.end);
    size_t len = cin.tellg();
    cin.seekg(0, cin.beg);

    // resize buffer to hold (len+1) chars
    data.resize(len+1);
    cin.read(&data[0], len);
    data[len] = 0; // terminator

    // walk the buffer backwards. at each newline, send
    //  everything *past* it to stdout, then overwrite the
    //  newline char with a nullchar (0), and continue on.
    char *start = &data[0];
    char *p = start + (data.size()-1);
    for (;p != start; --p)
    {
        if (*p == '\n')
        {
            if (*(p+1))
                cout << (p+1) << endl;
            *p = 0;
        }
    }

    // last line (the first line)
    cout << p << endl;

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:27:23.347

I managed to get this to work by using `std::string` in place of `char input[SIZE]`. I also removed the `cin.getline` part in the loop because it's not really needed.

```
std::string input;

do {
    // cin.getline(input, SIZE); <-- removed this line
    if (!getline(cin, input) || input.empty())
       break;
    lines.push_back(input);
} while (true); 
```

See a demo [here](http://liveworkspace.org/code/4yc7Hy%241673).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:48:19.883

既然您说它工作正常...（也许您应该考虑将其添加到您的帖子中，而不仅仅是在评论中）

您需要在执行完成后*按住窗口。*

然后，这很简单。

```
#include <cstdlib>
// whatever.....
int main(){
  ......//whatever 
   .......//foo
    .......//bar
  system("pause"); // hold the window
} 
```

`system()`用虚拟无限循环替换应该也可以，这可以节省但`#include <cstdlib>`会消耗 CPU 时间。

# java - 多表密码

> ID：14928552
> 
> 赞同：0
> 
> 时间：2013-02-18T02:19:40.447
> 
> 标签：java

我正在为多字母密码编写一个 Java 程序。我有这段代码：

```
while (i != 4 && count != cipherlen) {
    if ((((int) ciphertext.charAt(i)) - 65) == 0) {
        plaintext[count] = (char) (90 - (((int) keyreader.charAt(i)) - 65));
    }

    if ((((int) keyreader.charAt(i)) - 65) > (((int) ciphertext
            .charAt(i)) - 65)) {
        System.out.println("first");

        plaintext[count] = ((char) (90 - ((((int) keyreader.charAt(i)) - (65)) - (((int) ciphertext
                .charAt(i)) - 65))));
        //System.out.println(text);
    }
    else {
        //System.out.println("second");
        plaintext[count] = ((char) ((((int) ciphertext.charAt(count)) - ((int) keyreader
                .charAt(i))) + 64));
    }
} 
```

它在所有情况下都能正常工作，除非它遇到一个值，假设密文是 A，然后我减去 65，在这种情况下它给出了一些虚拟值。

你能帮我确定问题是什么吗？

设`AAAD`为密钥，`NIFQFWBACP`为密文，则生成的明文为`MHEMEVA=BO`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:14:33.407

在 Java 中，`char`是数字类型。您可以对`char`值进行算术运算，而无需转换为其他类型。

因此，让我们首先将您的代码翻译成具有模糊可读性的等效内容...

```
while (i != 4 && count != cipherlen) {
    if (ciphertext.charAt(i) == 'A') {
        plaintext[count] = 'Z' - (keyreader.charAt(i) - 'A');
    }

    if (keyreader.charAt(i) > ciphertext.charAt(i)) {
        System.out.println("first");

        plaintext[count] = 'Z' - (keyreader.charAt(i) - 'A') - 
                           (ciphertext.charAt(i) - 'A');
        //System.out.println(text);
    }
    else {
        //System.out.println("second");
        plaintext[count] = ciphertext.charAt(count) - 
                           keyreader.charAt(i) + ('A' - 1));
    }
} 
```

在这一点上，我会观察到：

*   我无法从您的代码中辨别出您*要做*什么。这根本没有意义。
*   乍一看，您实际上在做的事情*似乎不是可逆加密。*
*   在这种情况下，我不知道您所说的“虚拟值”是什么意思。
*   因为你不改变`count`or `cipherlen`or `i`。循环体要么执行零次，要么执行无限次。这与您在问题中所说的关于它在大多数情况下“正常工作”的说法相矛盾。

如果您在此处提供您尝试实施的加密过程*的英文*描述，并清楚说明您希望看到的内容和实际看到的内容，将会有所帮助。

# c - Memcpy 铸造 C

> ID：14928555
> 
> 赞同：2
> 
> 时间：2013-02-18T02:19:59.323
> 
> 标签：c

我对 C 有点生疏，我正在研究 memcpy 的实现。我想知道为什么需要将指针 pDst 转换为无符号字符？pSrc 也一样？

```
void memcpy( void *pDst, void *pSrc, int len )
{
    int i;

    if( pDst == NULL || pSrc == NULL )
        return;

    for( i=0; i<len; i++ ) {
        ((unsigned char*)pDst)[i] = ((unsigned char*)pSrc)[i];
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T02:22:30.167

指向的指针`void`是表示“指向任何东西的指针”的有用简写，但相反，编译器不知道所指向的东西有多大。

因此，当您对其进行任何类型的算术运算时（例如将其索引为数组），您必须使用一些明确的大小。在这种情况下，因为您尝试进行逐字节复制，所以您使用强制转换`unsigned char`，这通常是说“1 字节”的一种方式。

（乍一看，这似乎*总是*正确的。但在其他情况下`memcpy`，您可能指向更大的东西，例如某种结构，那么索引/算术实际上是指该结构大小的增量，因此您可以从一个结构跳到下一个结构。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T02:22:05.007

因为你不能取消引用 a `void*`。您必须明确告诉编译器您希望它复制多少字节。在 的情况下`unsigned char`，这将是 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T02:32:28.860

您必须将其强制转换为`char *`或`unsigned char *`告诉编译器必须添加多少字节，`char *`否则`unsigned char *`将添加 1 个字节。下一个元素 = 实际上元素 + (i * 类型的长度) 并且`void *`是无类型，因此您必须将其转换为`char *`

# python - 如何将单行拆分为多行

> ID：14928558
> 
> 赞同：-2
> 
> 时间：2013-02-18T02:20:11.960
> 
> 标签：python

创建一个包含 20 个单词的句子的测试文件。读取文件，然后插入回车符 (\n) 并将测试写入一个新的文本文件，该文件将由四行五个单词组成。

这就是我到目前为止所拥有的

```
my_file = open("twentywords.txt", "r")
temp_file = open("newfile.text", "w")

i = 1
for words in my_file:
    if i%5 == 0:
        print(words, file = temp_file)
    i = i + 1 
```

我们还没有学习复杂的工具，所以保持简单炖

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:16:09.990

* * *

非常不可读，但单行：

```
mystring = my_file.read()
print "\n".join(([" ".join(line) for line in  zip(*(iter(mystring.split()),) * 5)])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:22:45.590

用于`.split()`制作单词列表：

```
>>> 'This is a test'.split()
['This', 'is', 'a', 'test'] 
```

不带参数调用`.split()`会使字符串被所有空白字符分割。

从那里，您可以使用切片和`.join()`：

```
>>> '-'.join(['This', 'is', 'a', 'test'])
'This-is-a-test'
>>> ['This', 'is', 'a', 'test'][1:3]
['is', 'a'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T03:16:33.560

以字符串形式读入整个文件。使用空格作为分隔符拆分字符串。将数组元素写入输出文件。在每个第五个元素处插入一个 \n。

# ruby - Ruby：解析 API 响应

> ID：14928560
> 
> 赞同：1
> 
> 时间：2013-02-18T02:20:18.820
> 
> 标签：ruby, amazon-ec2, hosts

我正在尝试运行此脚本：http: [//dysinger.net/2008/10/13/using-amazon-ec2-metadata-as-a-simple-dns](http://dysinger.net/2008/10/13/using-amazon-ec2-metadata-as-a-simple-dns)但dosnt工作，因为它使用的是旧的亚马逊sdk版本，我重写了它以使用新版本：

```
#!/usr/bin/env ruby

require "rubygems"
require "aws-sdk"

%w(optparse rubygems aws-sdk resolv pp).each {|l| require l}
options = {}
parser = OptionParser.new do |p|
  p.banner = "Usage: hosts [options]"
  p.on("-a", "--access-key USER", "The user's AWS access key ID.") do |aki|
    options[:access_key_id] = aki
  end
  p.on("-s",
       "--secret-key PASSWORD",
       "The user's AWS secret access key.") do |sak|
    options[:secret_access_key] = sak
  end
  p.on_tail("-h", "--help", "Show this message") {
    puts(p)
    exit
  }
  p.parse!(ARGV) rescue puts(p)
end
if options.key?(:access_key_id) and options.key?(:secret_access_key)
  puts "127.0.0.1 localhost"
   AWS.config(options)
    AWS::EC2.new(options)
    answer = AWS::EC2::Client.new.describe_instances
    answer.reservationSet.item.each do |r|
    r.instancesSet.item.each do |i|
      if i.instanceState.name =~ /running/
        puts(Resolv::DNS.new.getaddress(i.privateDnsName).to_s +
             " #{i.keyName}.ec2 #{i.keyName}")
      end
    end
  end
else
  puts(parser)
  exit(1)
end 
```

这应该做的是输出一个新的 /etc/hosts 文件，其中包含我的 ec2 实例。

我得到一个响应=D，但答案是一个哈希，因此我得到了

```
error undefined method `reservationSet' for #<Hash:0x7f7573b27880>. 
```

这是我的问题，因为我根本不了解 Ruby（我所做的只是阅读亚马逊文档并玩弄，所以我得到了答案）。不知何故，在原始示例中这似乎有效。我想那时，API 并没有返回一个哈希值，无论如何......我怎样才能像上面那样遍历一个哈希值，让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:13:59.183

此代码可以帮助您：

```
answer = AWS::EC2::Client.new.describe_instances
reservations = answer[:reservation_set]
reservations.each do |reservation|
  instances = reservation[:instances_set]
  instances.each do |instance|
    if instance[:instance_state][:name] == "running"
      private_dns_name = instance[:private_dns_name]
      key_name = instance[:key_name]
      address = Resolv::DNS.new.getaddress(private_dns_name)
      puts "{address} #{key_name}.ec2 #{key_name}"
    end
  end
end 
```

通常将您的代码从使用带有名称的方法更改`item.fooBarBaz`为使用哈希，例如`item[:foo_bar_baz]`

当你在学习 Ruby 时，“pp”命令对于漂亮的打印变量非常有用，例如：

```
pp reservations

pp instances

pp private_dns_name 
```

# regex - sed - 如何使用 sed 提取 IP 地址？

> ID：14928573
> 
> 赞同：20
> 
> 时间：2013-02-18T02:22:20.020
> 
> 标签：regex, sed

这是一个作业，所以我别无选择，只能使用 sed。

给定一个文件*messages*，我如何提取所有 IP 地址并打印它们？

我第一次尝试

```
sed -n '/((1?[0-9][0-9]?|2[0-4][0-9]|25[0-5])\.){3}(1?[0-9][0-9]?|2[0-4][0-9]|25[0-5])/p' messages 
```

但它什么也没打印。在做了一些研究后，我发现 sed 不支持非贪婪运算符，如 ? 和|。

我一直在绞尽脑汁，但如果没有非贪婪的运营商，我想不出办法做到这一点。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-18T02:28:21.953

[grep](/questions/tagged/grep "显示标记为“grep”的问题")在那里会更合适（如果你有`sed`，你也应该有`grep`）：

```
grep -oE '((1?[0-9][0-9]?|2[0-4][0-9]|25[0-5])\.){3}(1?[0-9][0-9]?|2[0-4][0-9]|25[0-5])' messages 
```

这是你自己的`regex`，没有修改（测试OK）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-18T03:04:56.163

如果你有`GNU sed`，你可以简单地添加`-r`标志来使用 ERE：

```
sed -rn '/((1?[0-9][0-9]?|2[0-4][0-9]|25[0-5])\.){3}(1?[0-9][0-9]?|2[0-4][0-9]|25[0-5])/p' file 
```

否则，您将需要转义某些字符：

```
sed -n '/\(\(1\?[0-9][0-9]\?\|2[0-4][0-9]\|25[0-5]\)\.\)\{3\}\(1\?[0-9][0-9]\?\|2[0-4][0-9]\|25[0-5]\)/p' file 
```

这些字符包括：

*   使用括号的组：`(`,`)`
*   出现大括号：`{`,`}`
*   “或”管道：`|`
*   非贪婪问号：`?`

通常（尽管不适合您的情况）我使用以下内容来匹配 IP 地址：

```
sed -rn '/([0-9]{1,3}\.){3}[0-9]{1,3}/p' file 
```

或者在兼容模式下：

```
sed -n '/\([0-9]\{1,3\}\.\)\{3\}[0-9]\{1,3\}/p' file 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-18T02:33:52.380

使用`sed -r`（扩展正则表达式）或转义捕获组`\`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-11T11:42:29.703

你也能做到：

视窗：

```
ipconfig | perl -nle'/(\d+\.\d+\.\d+\.\d+)/ && print $1' | sed '2 d' | head -n1; 
```

操作系统：

```
ifconfig | perl -nle'/(\d+\.\d+\.\d+\.\d+)/ && print $1' | sed '1 d' | head -n1; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-14T05:40:51.393

如果你`git-bash`使用`Windows`. 这很方便。

```
 export LC_ALL=C; ipconfig | sed -n 's/IPv4//gp;' | sed -En 's/.*(10.*)/\1/gp' 
```

```
以太网适配器 VMware Network Adapter VMnet1:

   连接特定的 DNS 后缀 . . . . . . . :
   本地链接 IPv6 地址. . . . . . . . : fe80::3177:bf7b:590:c787%6
   IPv4 地址 . . . . . . . . . . . . : 192.168.31.1
   子网掩码  . . . . . . . . . . . . : 255.255.255.0
   默认网关. . . . . . . . . . . . . :

以太网适配器 VMware Network Adapter VMnet8:

   连接特定的 DNS 后缀 . . . . . . . :
   本地链接 IPv6 地址. . . . . . . . : fe80::c8de:747e:34fe:58cd%12
   IPv4 地址 . . . . . . . . . . . . : 192.168.239.1
   子网掩码  . . . . . . . . . . . . : 255.255.255.0
   默认网关. . . . . . . . . . . . . :

以太网适配器 以太网:

   连接特定的 DNS 后缀 . . . . . . . : some.com
   本地链接 IPv6 地址. . . . . . . . : fe80::9d9:bb4d:e77a:3a98%15
   IPv4 地址 . . . . . . . . . . . . : 10.11.68.42
   子网掩码  . . . . . . . . . . . . : 255.255.254.0
   默认网关. . . . . . . . . . . . . : 10.11.168.1 
```

该脚本只会为您提供`10`前缀`ip`地址`10.11.68.42`。

该脚本可以解释为

> 匹配行包含`IPv4`并替换`IPv4`为空白并打印，然后捕获带有前缀的`10`内容并打印它

# ios - 镜像 UIWebView 的最佳方式

> ID：14928576
> 
> 赞同：23
> 
> 时间：2013-02-18T02:22:41.963
> 
> 标签：ios, uiwebview, calayer, cadisplaylink

我需要将 UIWebView 的 CALayer 镜像到较小的 CALayer。较小的 CALayer 本质上是较大的 UIWebView 的一个点。我很难做到这一点。唯一接近的是 CAReplicatorLayer，但鉴于原件和副本必须有 CAReplicatorLayer 作为父级，我无法在不同的屏幕上拆分原件和副本。

我正在尝试做的一个说明：

![在此处输入图像描述](../Images/9098dcffcb262944277fd7a67ca828a7.png)

用户需要能够与较小的 CALayer 交互，并且两者都需要同步。

我试过用 renderInContext 和 CADisplayLink 来做这件事。不幸的是，存在一些滞后/卡顿，因为它试图每秒重新绘制 60 次每一帧。我需要一种方法来进行镜像，而不需要在每一帧上重新绘制，除非实际发生了变化。所以我需要一种知道 CALayer（或子 CALayer）何时变脏的方法。

我不能简单地拥有两个 UIWebView，因为两个页面可能不同（时间关闭、背景不同等）。我无法控制正在显示的网页。我也无法显示整个 iPad 屏幕，因为屏幕上还有其他不应显示在外部屏幕上的元素。

较大的 CALayer 和较小的“pip” CALayer 都需要在 iOS 6 中逐帧平滑匹配。我不需要支持早期版本。

该解决方案必须是应用商店可通过的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T23:08:25.583

如评论中所写，如果主要需要知道何时更新图层（而不是如何更新），我将原始答案移到“旧答案”行之后，并添加评论中讨论的内容：

第一（100% Apple Review Safe ;-)

*   您可以定期对原始 UIView 进行“截图”并比较生成的 NSData（旧的和新的）--> 如果数据不同，则图层内容会更改。FULL RESOLUTION 截图无需比较，但你可以用更小的截图来比较，以获得更好的性能

第二：性能友好和“理论上”审查安全......但不确定：-/

*   在此链接[http://www.lombax.it/documents/DirtyLayer.zip](http://www.lombax.it/documents/DirtyLayer.zip)您可以找到一个示例项目，每次 UIWebView 层变脏时都会提醒您；-)

我试图解释我是如何得到这段代码的：

主要目标是了解 TileLayer（UIWebView 使用的 CALayer 的私有子类）何时变脏。

问题是您无法直接访问它。但是，您可以使用方法 swizzle 来更改每个 CALayer 和子类中的 layerSetNeedsDisplay: 方法的行为。

您必须确保避免对原始行为进行根本性更改，并且只在调用方法时添加“通知”。

当您成功检测到每个 layerSetNeedsDisplay: 调用后，剩下的就是了解“哪个是”所涉及的 CALayer --> 如果是内部 UIWebView TileLayer，我们会触发“isDirty”通知。

但是我们无法遍历 UIWebView 内容并找到 TileLayer，例如简单地使用“isKindOfClass:[TileLayer class]”肯定会给你一个拒绝（Apple 使用静态分析器来检查私有 API 的使用）。你能做什么？

一些棘手的事情......例如......将涉及的图层大小（调用 layerSetNeedsDisplay:) 与 UIWebView 大小进行比较？;-)

此外，有时 UIWebView 会更改子 TileLayer 并使用新的，因此您必须多次执行此检查。

最后一件事：layerSetNeedsDisplay：当你简单地滚动 UIWebView 时并不总是调用（如果已经构建了层），所以你必须使用 UIWebViewDelegate 来拦截滚动/缩放。

您会发现该方法 swizzle 是某些应用程序中被拒绝的原因，但它始终以“您更改了对象的行为”为动机。在这种情况下，您不会更改某些东西的行为，而只是在调用方法时进行拦截。如果您不确定，我认为您可以尝试一下或联系 Apple 支持以检查它是否合法。

旧答案

我不确定这对性能是否足够友好，我只在同一设备上使用两个视图进行了尝试，并且效果非常好……您应该使用 Airplay 进行尝试。

解决方案非常简单：您使用 UIGraphicsGetImageFromCurrentImageContext 对 UIWebView / MKMapView 进行“截图”。您每秒执行 30/60 次，并将结果复制到 UIImageView 中（在第二个显示器上可见，您可以将其移动到任何您想要的位置）。

要检测视图是否更改并避免在无线链路上进行流量，您可以逐字节比较两个 uiimage（旧帧和新帧），并仅在与前一个不同时设置新的。（是的，它有效！;-)

今晚我唯一没有做的就是快速进行比较：如果您查看随附的示例代码，您会发现比较确实是 cpu 密集型的（因为它使用 UIImagePNGRepresentation() 来转换 NSData 中的 UIImage）并使整个应用程序运行缓慢。如果您不使用比较（复制每一帧），则应用程序快速流畅（至少在我的 iPhone 5 上）。但我认为解决它的可能性很大……例如每 4-5 帧进行一次比较，或者在后台优化 NSData 创建

我附上一个示例项目：[http ://www.lombax.it/documents/ImageMirror.zip](http://www.lombax.it/documents/ImageMirror.zip)

在项目中，帧比较被禁用（如果有注释）我在此处附上代码以供将来参考：

```
// here you start a timer, 50fps
// the timer is started on a background thread to avoid blocking it when you scroll the webview
- (IBAction)enableMirror:(id)sender {

    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul); //0ul --> unsigned long
    dispatch_async(queue, ^{

        // 0.04f --> 25 fps
        NSTimer __unused *timer = [NSTimer scheduledTimerWithTimeInterval:0.02f target:self selector:@selector(copyImageIfNeeded) userInfo:nil repeats:YES];

        // need to start a run loop otherwise the thread stops
        CFRunLoopRun();
    });
}

// this method create an UIImage with the content of the given view
- (UIImage *) imageWithView:(UIView *)view
{
    UIGraphicsBeginImageContextWithOptions(view.bounds.size, view.opaque, 0.0);
    [view.layer renderInContext:UIGraphicsGetCurrentContext()];

    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return img;
}

// the method called by the timer
-(void)copyImageIfNeeded
{
    // this method is called from a background thread, so the code before the dispatch is executed in background
    UIImage *newImage = [self imageWithView:self.webView];

    // the copy is made only if the two images are really different (compared byte to byte)
    // this comparison method is cpu intensive

    // UNCOMMENT THE IF AND THE {} to enable the frame comparison

    //if (!([self image:self.mirrorView.image isEqualTo:newImage]))
    //{
        // this must be called on the main queue because it updates the user interface
        dispatch_queue_t queue = dispatch_get_main_queue();
        dispatch_async(queue, ^{
            self.mirrorView.image = newImage;
        });
    //}
}

// method to compare the two images - not performance friendly
// it can be optimized, because you can "store" the old image and avoid
// converting it more and more...until it's changed
// you can even try to generate the nsdata in background when the frame
// is created?
- (BOOL)image:(UIImage *)image1 isEqualTo:(UIImage *)image2
{
    NSData *data1 = UIImagePNGRepresentation(image1);
    NSData *data2 = UIImagePNGRepresentation(image2);

    return [data1 isEqual:data2];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T18:10:13.280

我认为您使用 CADisplayLink 的想法很好。主要问题是您试图刷新每一帧。您可以使用该`frameInterval`属性自动降低帧速率。或者，您可以使用该`timestamp`属性来了解上次更新发生的时间。

另一个可能可行的选择：要知道图层是否脏，为什么不让一个对象成为所有图层的代表，`drawLayer:inContext:`当每个图层需要绘制时都会触发它？然后相应地更新其他层。

# actionscript-3 - Flash 中的单 swf 预加载器包装器

> ID：14928580
> 
> 赞同：0
> 
> 时间：2013-02-18T02:23:19.327
> 
> 标签：actionscript-3, flash, preloader

我有一个要为其创建预加载器的 .swf。最后，我想要一个结合了预加载器和内容 .swf 的文件。

我可以在 Flash 预加载器上找到的每个教程都提供以下两种选择之一：

1.  在预加载器包装器中使用 URLRequest 加载外部内容 .swf。这不起作用，因为我不想要两个 .swf。

2.  [像这样](http://www.newgrounds.com/bbs/topic/699675)的“单一 swf”解决方案适用于您在 Flash IDE 中创建的资产。我以为我可以很容易地走这条路，但我遇到了麻烦。我无法使用 Flash IDE 导入我的内容 .swf。我可以像这样使用嵌入标签：

    ```
    [Embed(source="content.swf")]
    private var MyContent:Class; 
    ```

    但似乎这个嵌入的内容是在第一帧导出的，所以我的预加载器只在加载内容 .swf*后出现。*我猜这是沿着这些路线的东西。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:00:54.270

> 但似乎这个嵌入的内容是在第一帧导出的

您是绝对正确的，`Ebmed`默认情况下都嵌入在第一帧中，但 mxmlc 通过元标记在第一帧中创建带有预加载器的两个帧 swf 来提供解决方案：

```
[Frame(factoryClass="Preloader")] 
```

您可以在此处找到分步指南[http://www.bit-101.com/blog/?p=946](http://www.bit-101.com/blog/?p=946)。

# javascript - 尝试计数标记时出现 ajax 和 javascript 问题

> ID：14928581
> 
> 赞同：3
> 
> 时间：2013-02-18T02:23:30.197
> 
> 标签：javascript, jquery, html, ajax

我的 javascript 有问题。我正在尝试为每个从 db 确定的正确选择的答案计算分数。如果答案不正确，则标记为“0”，否则标记取决于数据库中答案的标记。

但我遇到了 javascript 的问题：

首先它说`connect.php`，这只是简单地导航到它连接到数据库的页面，但这是正确的还是我想链接到它将运行查询以查找答案标记的页面？

其次，它说我`response`的代码中未定义，我不应该调用它。

我的问题是我能否澄清上述 2。我正在尝试使用 ajax 和 javascript，如果一个强大的程序员可以解决我遇到的这个问题并能够正确设置代码以便它能够计数每个正确答案标记。

我有一个我正在尝试遵循的 jsfiddle，但是如果有人可以编辑 fiddle 以获得一个用于计数标记的虚拟版本，然后能够提供代码片段来说明正确的代码应该是什么，那么这将对我很有帮助。

目前 jsfiddle 确定选择的答案是正确还是不正确，小提琴在这里：http: [//jsfiddle.net/bWthd/3/](http://jsfiddle.net/bWthd/3/)

实际代码：

PHP/HTML：

```
 $qandaquery = "SELECT q.QuestionId, Answer, AnswerMarks, OptionType
                            FROM Question q
                            INNER JOIN Answer an ON q.QuestionId = an.QuestionId
                            INNER JOIN Option_Table o ON q.OptionId = o.OptionId
                            WHERE SessionId = ?
                            GROUP BY q.QuestionId
                            ORDER BY RAND()";

        ...

            $qandaqrystmt->bind_result($qandaQuestionId,$qandaAnswer,$qandaAnswerMarks,$OptionType);

            $arrQuestionId = array();

            while ($qandaqrystmt->fetch()) {
            $arrQuestionId[ $qandaQuestionId ] = $qandaQuestionId;

          }

        foreach ($arrQuestionId as $key=>$question) {

        ?>

        <div class="queWrap" data-q_id="<?php echo $key; ?>">

        $options = explode('-', $arrOptionType[$key]);
        if(count($options) > 1) {
            $start = array_shift($options);
            $end = array_shift($options);
            do {
                $options[] = $start;
            }while(++$start <= $end);
         }
         else{
            $options = explode(' or ', $option);
         }

    if($arrReplyType[$key] == 'Single'){
     foreach($options as $indivOption) {
         echo '<div class="ck-button"><label class="fixedLabelCheckbox"><input type="radio"
        name="options_<?php echo $key; ?>[]" id="option-' . $indivOption . '" value="' . 
     $indivOption . '" /><span>' . $indivOption . '</span></label></div>';
     }
     }else if($arrReplyType[$key] == 'Multiple'){
           foreach($options as $indivOption) {
         echo '<div class="ck-button"><label class="fixedLabelCheckbox"><input type="checkbox" name="options_<?php echo $key; ?>[]" id="option-' . $indivOption . '" value="' . $indivOption . '" /><span>' . $indivOption . '</span></label></div>';
     }

}

    <p><input type='text' class='questionIds' name='questionids' value='<?php echo htmlspecialchars($arrQuestionId[$key]); ?>' /></p>

    } 
```

**JAVASCRIPT/AJAX：**

```
$(function() {

      $('.queWrap .ck-button').change(function() {
        var $ch_box = $(this),
            $qwrap=$ch_box.closest('.queWrap')
            q_id = $qwrap.data('q_id'),
            val = $ch_box.val();

        var dataToServer = {
            q_id: q_id,
            valueSelected: val
        }

$.post('connect.php', dataToServer,function(){ 
        var status=response.status
        $qwrap.find('.status').text( status).addClass(status);
        if( status=='correct'){
            updateScore( response.points)
        }
    })

})

function updateScore( newScore){
    var score= $points.data('score')+newScore;
    $points.data('score',score).text( 'Score: '+score)
}

    }); 
```

**更新：**

当前代码：

```
 function update() {
    var score = 0;
    $('.queWrap').each(function(element) {
        var $qwrap = $(element),
        q_id = $qwrap.data('q_id'),
        val = $qwrap.find('input:checked').val();

                var dataToServer = {
            q_id: q_id,
            valueSelected: val
        }

        $.post('connect.php', dataToServer,function(response){ 
            var status = response.status
            $qwrap.find('.status').text(status).addClass(status);
            if (status == 'correct'){
                score += response.points; 
                $points.data('score', score).text('Score: ' + score);
            }
        })

    });

    }

...
//HTML
<div class="status">&nbsp;</div> 
```

好的，没有错误，但没有出现和计算标记。是不是因为`connect.php`我包含在javascript函数中。我是否需要导航到连接到 db`connect.php`的页面或导航到运行查询以查找每个选定答案的答案标记的页面？我的时间不多了，所以请您尽快为我实现代码，因为我必须完成它。我希望发生以下情况：

*   计算每个选择的答案的分数，如果选择的答案不正确，那么值就是`0`那些答案，如果答案正确，那么它的分数是从数据库中确定的。如何让每个正确答案按钮包含它自己的 answerId？

*   要确定 answerId，我们可以使用文本输入中显示的 questionId（参见顶部的 PHP/HTML 代码片段），然后根据每个答案按钮的值，检索与每个问题的答案值匹配的 answerid。

下面是显示的示例数据库`Answer Table`

```
AnswerId (auto PK)  QuestionId  Answer  AnswerMarks
1                   72          A        2
2                   72          C        1
3                   73          B        2
4                   73          C        2
5                   73          E        1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:43:22.677

您的 updateScore 函数工作错误。您应该将每个问题的分数存储在一个数据元素中，并在 updateScore() 函数中将所有这些加起来，并将总和放入 $points 元素中。像这样的东西：

```
$(function() {

    $('.queWrap .ck-button').change(function() {
        update();
    });

    function update() {
        var score = 0;
        $('.queWrap').each(function(element) {
            var $qwrap = $(element);
            var q_id = $qwrap.data('q_id');
            var val = $qwrap.find('input:checked').val();

            var dataToServer = {
                q_id: q_id,
                valueSelected: val
            };

            $.post('connect.php', dataToServer, function(response){ 
                var status = response.status
                $qwrap.find('.status').text(status).addClass(status);
                if(status == 'correct'){
                    score += response.points; 
                    $points.data('score', score).text('Score: ' + score);
                }
            });  
        });

    }

} 
```

每次更改答案时都应调用此函数。（我不确定这只是一个例子）。

# spring-security - 春季安全注释@Preauthoritze不起作用

> ID：14928582
> 
> 赞同：0
> 
> 时间：2013-02-18T02:23:32.010
> 
> 标签：spring-security

我尝试使用 Spring security 3.1

但是当我 ROLE_USER 权限

它什么也没做（注释 @PreAuthorize("hasRole('ROLE_ADMIN')") ）

我正在使用 spring 3.1M 和 springsecurity 3.1

我还需要做什么吗？

以下是我的springsecurity配置代码

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xmlns:s="http://www.springframework.org/schema/security"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
                            http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                            http://www.springframework.org/schema/security
                            http://www.springframework.org/schema/security/spring-security-3.1.xsd">

      <s:global-method-security pre-post-annotations="enabled">
        <!-- <s:expression-handler ref="expressionHandler"/> -->
      </s:global-method-security>

        <s:http pattern="/css/**" security="none" />
        <s:http pattern="/js/**" security="none" />
        <s:http pattern="/favicon.ico" security="none" />
        <s:http pattern="/index.jsp" security="none" />

        <s:http auto-config="true" use-expressions="true" access-denied-page="/denied.jsp">

            <s:intercept-url pattern="/web/index" access="permitAll" />
            <s:intercept-url pattern="/web/**" access="isAuthenticated()"/>
            <s:intercept-url pattern="/web/study/*" access="hasRole('ROLE_USER')"/>

            <s:form-login />
            <s:logout />

            <s:session-management>
                <s:concurrency-control
                    error-if-maximum-exceeded="true" max-sessions="1" expired-url="/expired.jsp" />
            </s:session-management>
        </s:http>

        <!-- Declare an authentication-manager to use a custom userDetailsService -->
        <s:authentication-manager>
            <s:authentication-provider user-service-ref="userDetailsService">
                <s:password-encoder ref="passwordEncoder" />
            </s:authentication-provider>
        </s:authentication-manager>

        <!-- Use a Md5 encoder since the user's passwords are stored as Md5 in the 
            database -->
        <bean
            class="org.springframework.security.authentication.encoding.Md5PasswordEncoder"
            id="passwordEncoder" />

        <s:authentication-manager alias="authenticationManager">
            <!-- If you want to use a database, then you can use -->
            <s:authentication-provider user-service-ref="userDetailsService">

                <s:password-encoder ref="passwordEncoder" />
            </s:authentication-provider>
        </s:authentication-manager>

    </beans> 
```

和控制器代码

```
 package com.app.web.study.language.action;

    import java.util.*;

    import javax.annotation.Resource;
    import javax.servlet.http.HttpServletRequest;
    import org.slf4j.Logger;
    import org.slf4j.LoggerFactory;
    import org.springframework.security.access.annotation.Secured;
    import org.springframework.security.access.prepost.PreAuthorize;
    import org.springframework.stereotype.Controller;
    import org.springframework.transaction.annotation.Transactional;
    import org.springframework.ui.Model;
    import org.springframework.web.bind.annotation.RequestMapping;
    import org.springframework.web.bind.annotation.RequestMethod;
    import org.springframework.web.bind.annotation.RequestParam;
    import com.app.web.common.BaseController;
    import com.app.web.study.language.service.impl.StudyServiceImpl;

    @Controller
    public class StudyController extends BaseController {

        protected static Logger logger = LoggerFactory.getLogger("StudyController");

        @Resource(name="studyServiceImpl")
        private StudyServiceImpl studyServiceImpl;

        @PreAuthorize("hasRole('ROLE_ADMIN')") 
        @RequestMapping(value = "/study/list", method = RequestMethod.GET)
        public String study( Locale locale
                           , Model model 
                           , HttpServletRequest  req) {
            logger.info("study", locale);

            HashMap<String, Object> parameters = new HashMap<String, Object>(); 
            List list = studyServiceImpl.getList(parameters);  

            model.addAttribute("ctx", getCrreuntUrl() );
            model.addAttribute("list", list );

            //model.addAttribute("activeUsers", getlistActiveUsers());

            return "base.study";
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:40:45.863

您是否可能遇到此问题[Spring Security 常见问题解答](http://static.springsource.org/spring-security/site/faq/faq.html#faq-method-security-in-web-context)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-17T16:51:25.380

您需要为目标类启用代理..

```
<s:global-method-security pre-post-annotations="enabled" proxy-target-class="true"/> 
```

# java - 如何显示启动画面，在后台加载数据，然后隐藏启动画面？

> ID：14928586
> 
> 赞同：2
> 
> 时间：2013-02-18T02:24:20.263
> 
> 标签：java, multithreading, swing, splash-screen, countdownlatch

我正在设计一个简单的 JavaFX 表单。

首先，我加载 JavaFX 环境（并等待它完成），如下所示：

```
final CountDownLatch latch_l = new CountDownLatch(1);
try {
    // init the JavaFX environment
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            new JFXPanel(); // init JavaFX
            latch_l.countDown();
        }
    });
    latch_l.await();
} 
```

这工作正常。（之所以需要先用这种方式加载JavaFX，是因为它主要是一个Swing应用，里面有一些JavaFX组件，不过是后面加载的）

现在，我想在启动时添加一个启动画面，并在 JavaFX 环境加载时显示它（实际上在屏幕上显示了大约 5 秒，因为我的应用程序有徽标、商标等）需要出示）

所以我想出了一个 SplashScreen 类，它只在屏幕上显示一个 JWindow，就像这样：

```
public class SplashScreen {

    protected JWindow splashScreen_m = new JWindow();
    protected Integer splashScreenDuration_m = 5000;

    public void show() {
        // fill the splash-screen with informations
        ...

        // display the splash-screen
        splashScreen_m.validate();
        splashScreen_m.pack();
        splashScreen_m.setLocationRelativeTo(null);
        splashScreen_m.setVisible(true);
    }

    public void unload() {
        // unload the splash-screen
        splashScreen_m.setVisible(false);
        splashScreen_m.dispose();
    }
} 
```

现在，我希望启动画面加载并显示自身 5 秒。同时，我也希望加载 JavaFX 环境。

所以我像这样更新了 CountDownLatch ：

```
final CountDownLatch latch_l = new CountDownLatch(2); // now countdown is set to 2

final SplashScreen splash_l = new SplashScreen();

try {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            // show splash-screen
            splash_l.show();
            latch_l.countDown();

            // init the JavaFX environment
            new JFXPanel(); // init JavaFX
            latch_l.countDown();
        }
    });
    latch_l.await();
    splash_l.unload();
} 
```

所以，它正在工作，但飞溅只停留在 JavaFX 环境加载，所以基本上它卸载得非常快（这是正常的，考虑到我编写的代码）。

如何在不冻结 EDT 的情况下至少显示 5 秒的闪屏（如果 JavaFX 加载速度更快）？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T03:20:54.077

最重要的问题是您阻塞了事件调度线程，这意味着它在被阻塞时无法显示/更新任何内容。同样的问题也适用于 JavaFX。

你也应该永远不要从它们各自的事件队列之外的任何东西中更新。

现在，有很多方法可以解决这个问题，但`SwingWorker`可能是目前最简单的方法。

![在此处输入图像描述](../Images/debf74c9ade7b9e9b78547c66741ecc9.png)

我道歉，这是我对 JavaFX 的全部曝光......

```
public class TestJavaFXLoader extends JApplet {

    public static void main(String[] args) {
        new TestJavaFXLoader();
    }

    public TestJavaFXLoader() throws HeadlessException {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                Loader loader = new Loader();
                loader.addPropertyChangeListener(new PropertyChangeListener() {
                    @Override
                    public void propertyChange(PropertyChangeEvent evt) {
                        if (evt.getPropertyName().equals("state") && evt.getNewValue().equals(SwingWorker.StateValue.DONE)) {
                            System.out.println("Load main app here :D");
                        }
                    }
                });
                loader.load();
            }
        });
    }

    public class Loader extends SwingWorker<Object, String> {

        private JWindow splash;
        private JLabel subMessage;

        public Loader() {
        }

        protected void loadSplashScreen() {
            try {
                splash = new JWindow();
                JLabel content = new JLabel(new ImageIcon(ImageIO.read(...))));
                content.setLayout(new GridBagLayout());
                splash.setContentPane(content);

                GridBagConstraints gbc = new GridBagConstraints();
                gbc.gridwidth = GridBagConstraints.REMAINDER;

                subMessage = createLabel("");

                splash.add(createLabel("Loading, please wait"), gbc);
                splash.add(subMessage, gbc);
                splash.pack();
                splash.setLocationRelativeTo(null);
                splash.setVisible(true);
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

        protected JLabel createLabel(String msg) {
            JLabel message = new JLabel("Loading, please wait");
            message.setForeground(Color.CYAN);
            Font font = message.getFont();
            message.setFont(font.deriveFont(Font.BOLD, 24));
            return message;
        }

        public void load() {
            if (!EventQueue.isDispatchThread()) {
                try {
                    SwingUtilities.invokeAndWait(new Runnable() {
                        @Override
                        public void run() {
                            loadSplashScreen();
                        }
                    });
                } catch (Exception exp) {
                    exp.printStackTrace();
                }
            } else {
                loadSplashScreen();
            }
            execute();
        }

        @Override
        protected void done() {
            splash.dispose();
        }

        @Override
        protected void process(List<String> chunks) {
            subMessage.setText(chunks.get(chunks.size() - 1));
        }

        @Override
        protected Object doInBackground() throws Exception {

            publish("Preparing to load application");
            try {
                Thread.sleep(2500);
            } catch (InterruptedException interruptedException) {
            }
            publish("Loading JavaFX...");

            runAndWait(new Runnable() {
                @Override
                public void run() {
                    new JFXPanel();
                }
            });

            try {
                Thread.sleep(2500);
            } catch (InterruptedException interruptedException) {
            }
            return null;
        }

        public void runAndWait(final Runnable run)
                throws InterruptedException, ExecutionException {
            if (Platform.isFxApplicationThread()) {
                try {
                    run.run();
                } catch (Exception e) {
                    throw new ExecutionException(e);
                }
            } else {
                final Lock lock = new ReentrantLock();
                final Condition condition = lock.newCondition();
                lock.lock();
                try {
                    Platform.runLater(new Runnable() {
                        @Override
                        public void run() {
                            lock.lock();
                            try {
                                run.run();
                            } catch (Throwable e) {
                                e.printStackTrace();
                            } finally {
                                try {
                                    condition.signal();
                                } finally {
                                    lock.unlock();
                                }
                            }
                        }
                    });
                    condition.await();
//                    if (throwableWrapper.t != null) {
//                        throw new ExecutionException(throwableWrapper.t);
//                    }
                } finally {
                    lock.unlock();
                }
            }
        }
    }
} 
```

我在[这里](http://www.guigarage.com/2013/01/invokeandwait-for-javafx/)`runAndWait`找到了代码

# php - 两个表单在提交时相互干扰

> ID：14928593
> 
> 赞同：0
> 
> 时间：2013-02-18T02:25:00.013
> 
> 标签：php

我在一个页面上有两个表单-'indexpage 加上一个包含的页面'。他们的行动指向如此行动=''。问题是当我在搜索栏上点击提交时，它显示标题错误。登录的提交工作正常。我将问题一直缩小到

```
tabindex="6" type="submit" 
```

在登录表单的提交按钮中。

他们都有不同的名字。

登录表单：

```
echo'<div id="container"> 
  <div id="topnav" class="topnav"> <font color="white">Have an account? &nbsp</font> <a href="login" class="signin"><span>Sign in</span></a><a href="/*********/register" class="signin3"><span>Sign Up</span></a> </div>
  <fieldset id="signin_menu">';
  output_errors($errors);
  echo'
    <form id="signin" action="" method="POST" >
    <br>
      <label for="username"><font color="black">Username or email</font></label>
      <input id="username" name="username" value="" title="username" tabindex="4" type="text">
      </p>
      <p>
        <label for="password"><font color="black">Password</font></label>
        <input id="password" name="password" value="" title="password" tabindex="5" type="password">
      </p>
      <p class="remember">
        <input id="signin_submit" name="submit" value="Sign in" tabindex="6" type="submit">
        <input id="remember" name="remember_me" value="1" tabindex="7" type="checkbox">
        <label for="remember"><font color="black">Remember me</font></label>
      </p>
      <p class="forgot"> <a href="/*********/recovery/password" id="resend_password_link">Forgot your password?</a> </p>
      <p class="forgot-username"> <A id=forgot_username_link 
title="If you remember your password, try logging in with your email" 
href="/recovery/username">Forgot your username?</A> </p>
    </form>
  </fieldset>
</div>'; 
```

搜索表格：

```
<form action='' method='POST'>
<input type='text' value='". $clean ."' name='keywords'/> 
<input type='submit' name='submit2' Value='Search'/>
</form> 
```

标头错误：

> 警告：无法修改标头信息 - 标头已由 C:\Program Files (x86)\xampp\htdocs 中的（输出开始于 C:\Program Files (x86)\xampp\htdocs** ******* \index.php:298）发送** ******* \pages\search.inc.php 第 35 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:30:48.513

I'm petty sure that error is due to you trying to output (echo/print) something before trying to redirect in the headers. Redirects `header('Location: /anotherpage.php');` after an echo or some printed HTML are probably the cause.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:43:33.013

我在登录提交的输入中发现了问题。这就是我所做的。

我改变这个

```
<input id="signin_submit" name="submit" value="Sign in" tabindex="6" type="submit"> 
```

太这

```
<input name="submit" value="Sign in" type="submit"> 
```

显然 tabindex 和 id 有某种问题，不知道为什么。

# c# - 相同的画布到不同的 FlipViewItem

> ID：14928596
> 
> 赞同：1
> 
> 时间：2013-02-18T02:25:10.887
> 
> 标签：c#, xaml, canvas, windows-store-apps

我正在使用翻转视图从我的程序中制作不同的方法。但是，我需要为每个不同的视图使用相同的画布。

有没有办法做到这一点？

我的代码是这样的：

 `````
<FlipView x:Name="_flipVw1">
   <FlipViewItem x:Name="ViewModelos">
      <Canvas x:Name="canvas"/>
   </FlipViewItem>
   <FlipViewItem x:Name="ViewModelos">
      <Canvas x:Name="canvas1"/>
   </FlipViewItem>
   <FlipViewItem x:Name="ViewModelos">
      <Canvas x:Name="canvas2"/>
   </FlipViewItem>
 </FlipView> 
````  `而不是这个，我想为所有 FlipViewItem 使用相同的画布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:35:45.140

不幸的是，您`Canvas`只能有一个逻辑父级，您将无法将其添加`Canvas`到多个`FlipViewItems`.

为什么它们都需要相同`Canvas`，如果它们只是具有通用布局控件或您可以制作的东西`ControlTemplate`。

如果你解释你的最终目标，有人可能会提供帮助。

一个想法可能是制作 a `VisualBrush`，`Canvas`并将其应用于`VisualBrush`所有`FlipViewItems`，当您在整个`VisualBrush` `Canvas`更新 UI 上绘制时，它们应该都显示相同。

```
<Window.Resources>
    <VisualBrush x:Key="MyCanvasVisual">
        <VisualBrush.Visual>
            <Canvas />
        </VisualBrush.Visual>
    </VisualBrush>
</Window.Resources>

<FlipViewItem>
    <FlipViewItem Content="{StaticResource MyCanvasVisual}" />
    <FlipViewItem Content="{StaticResource MyCanvasVisual}" />
    <FlipViewItem Content="{StaticResource MyCanvasVisual}" />
</FlipViewItem> 
```

但是我不确定您在画布上的哪个位置绘图，因此此方法可能不适用于您的情况``

# c - 这是 C 中动态数组分配的正确代码吗

> ID：14928600
> 
> 赞同：0
> 
> 时间：2013-02-18T02:26:01.513
> 
> 标签：c, memory, dynamic

```
void dynamicArray(int** num1, int** num2, char*** str, int size)
{
    int i = 0;

    *(num1) = (int*)malloc(sizeof(int) * size);
    *(num2) = (int*)malloc(sizeof(int) * size);

    *(str) = (char**)malloc(sizeof(char*) * size);

    for( i = 0; i < size; i++){
        *(*(str) + i) = (char*)malloc(sizeof(char) *5);
    }

    return;
} 
```

我是否成功地为我的 ***char 正确分配了内存？我正在尝试创建一个二维数组“句子”。我的主程序有问题，我认为这可能是问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:18:53.327

从评论：

> 我遇到的问题是字符串数组。在另一个函数中，我为每个 *strPtr 分配一个字符串。当我这样做时，它会覆盖它之前的所有值。即 *strPtr = "你" *strPtr + 1 = hi。现在 *strPtr + 0 完全等于 hi。

由于这段代码看起来不错，但你在这里的解释看起来很有趣，我认为你*使用*的数组是错误的。

```
*strPtr[1] != *strPtr + 1 
*strPtr[1] == *(strPtr + 1) == strPtr[1][0] 
```

您应该使用第二行中的一种形式，而不是第一行。

# php - PHP 和 mysqli：来自数据库的 HTML 表

> ID：14928604
> 
> 赞同：0
> 
> 时间：2013-02-18T02:26:20.323
> 
> 标签：php, database, mysqli

我正在尝试从数据库中提取几个字段的数据并使用 mysqli 填充 HTML 表。我试图研究这个问题已经提出了使用 mysql 或似乎将 mysql 与 mysqli 混合的解决方案。我一直在尝试使用 API 来查找可能有效但似乎无法显示表格的函数。任何建议，将不胜感激。

```
<?php
ini_set('display_errors', 'On');
ini_set('display_startup_errors', 'On');
error_reporting(E_ALL);

$mysqli = new mysqli("$dbhost", "$dbuser", "$dbpass", "$dbname");
if ($mysqli->connect_errno) {
    echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
}

if (!$stmt = $mysqli->query("SELECT aid, aname FROM actor_info")) {
    echo "Query Failed!: (" . $mysqli->errno . ") ". $mysqli->error;
}

if (!$stmt->execute()) {
    echo "Execute failed: (" . $stmt->errno . ") " . $stmt->error;
}

if (!$stmt->bind_result($aid, $aname)) {
    echo "Binding parameters failed: (" . $stmt->errno . ") " . $stmt->error;
}

echo "ACTOR INFORMATION";
echo "<table border='1' cellpadding='2' cellspacing='2'";
echo "<tr><td>ID</td><td>NAME</td>";
while ($row = mysqli_fetch_array($stmt)) {
        echo "<tr>";
        echo "<td>".$aid."</td>";
        echo "<td>".$aname."</td>";
        echo "</tr>";
}
else {
    echo "No records found";
}
$stmt->free();
$mysqli->close();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:51:53.553

```
while ($row = mysqli_fetch_array($stmt)) {
    echo "<tr>";
    echo "<td>" . $row["aid"] . "</td>";
    echo "<td>" . $row["aname"] . "</td>";
    echo "</tr>";
} 
```

# java - Setting an object to an unknown class type in Java

> ID：14928614
> 
> 赞同：2
> 
> 时间：2013-02-18T02:26:50.033
> 
> 标签：java, arrays, class

Sorry I'm a beginner just starting out using Java and I've encountered this problem

I have two classes, say they are

```
class Dog {

}

class Cat {

} 
```

then I created an array that is filled up with either one of those two

```
Object[][] myAnimal = new Object[4][5]; 
```

I want to set a variable equal to a random Object from my array, but I don't know which class it came from. Is there any way to do this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T02:43:58.760

理想的解决方案是创建自己的超类，比如`Animal`声明了抽象方法。例如，您可以这样做：

```
abstract class Animal {
    public abstract void speak();
} 
```

然后`Cat`，`Dog`每个人都为抽象方法提供自己的实现：

```
class Cat {
    public void speak() {
        System.out.println("Meow!");
    }
}

class Dog {
    public void speak() {
        System.out.println("Woof!");
    }
} 
```

现在您可以简单地将您的数组声明为

```
Animal[][] myAnimal = new Animal[4][5]; 
```

在数组中放置一些动物：

```
myAnimal[0][0] = new Dog();
myAnimal[0][1] = new Cat(); 
```

然后告诉动物说话：

```
myAnimal[0][0].speak();
myAnimal[0][1].speak(); 
```

我已经省略了`main()`这里的语法，但我希望你可以自己把它放在一起。这里使用的概念称为“多态性”。我强烈建议您研究它，以帮助您在设计代码时使用这个关键的 OO 概念。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T02:35:26.013

好吧，假设您的数组充满了两个类之一的实例，您可以执行以下操作：

```
if(myAnimal[x][x] instanceof Dog) //it is an instance of the Dog class 
```

你真的不应该做这样的事情，特别是作为一个初学者。你说你想随机选择一只狗或猫？更好的方法是保留两个单独的数组，一个用于狗，一个用于猫。然后你可以从两个数组中选择一个随机元素，你就会知道你正在处理什么类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T03:01:14.347

在这种情况下，访问者模式将是非常好的考虑方法。比方说，您正在制作一款需要针对不同对象（猫、狗、金钱等）做出不同反应的游戏。所以这样做：

创建一个具有以下定义的接口`IAnimal`：

```
interface IAnimal {
    void visit(IAnimalVisitor visitor, Object param);
}

class Cat implements IAnimal {
    void visit(IAnimalVisitor visitor, Object param) {
        visitor.visit(this, param);
    }
}

class Dog implements  IAnimal {
    void visit(IAnimalVisitor visitor, Object param) {
        visitor.visit(this, param);
    }
} 
```

将为定义的每种动物类型`IAnimalVisitor`包含一个`visit()`方法。所以它会像：

```
interface IAnimalVisitor {
    public void visit(Cat c, Object param);
    public void visit(Dog c, Object param);
} 
```

然后，您可以根据需要使用逻辑来处理猫和狗。例如：

```
class AnimalFeeder implements IAnimalVisitor {
    public void visit(Cat c, Object param) {
        c.feed(milk);
        c.feed(cat_food);
    }
    public void visit(Dog d, Object param) {
        d.feed(dog_food);
    }
} 
```

然后你可以使用上面的食物喂养类来喂养你的`IAnimal`数组，如下所示：

```
IAnimal[] animals = new IAnimal[] { new Cat(), new Dog(), 
    new Dog(), new Cat() };

IAnimalVisitor feeder = new AnimalFeeder();
for(IAnimal animal : animals) {
    animal.visit(feeder, null); 
} 
```

您可以完全自由地处理类中的任何层次结构。只需将`visit()`每个动物类类型的`IAnimalVisitor`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T02:42:00.853

我认为您必须使用反射 api，如果您想要该类实例，则必须在运行时检查任何对象...我认为您的问题是您不想将条件设为静态以及如何为不同的不同动态设置条件动物，今天它的狗，老虎明天它的牛等等......所以请使用refelction api

# apache-pig - PIG - Read each line into its field

> ID：14928620
> 
> 赞同：0
> 
> 时间：2013-02-18T02:27:51.490
> 
> 标签：apache-pig

Is there a way I can read each line from a logfile into its own field. I thought with ('\n') as a delimiter I should be able to achieve that.

File - *test*

```
Audit file /u01/app/oracle/admin/st01/adump/st011_ora_27063_1.aud
Node name:      test0041
CLIENT USER:[6] 'oracle' 
```

So I would like to read this into three fields as

```
filename - Audit file /u01/app/oracle/admin/st01/adump/st011_ora_27063_1.aud
nodename - Node name:      test0041
username - CLIENT USER:[6] 'oracle' 
```

I tried this but it didnt help.

```
A = LOAD 'test' using PigStorage ('\n') AS (filename, nodename, username); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T06:20:51.843

如果您的文件那么小，为什么不对文件进行预处理，例如在 LOAD 之前将 \n 转换为 \t ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T22:01:16.630

您不能使用 '\n' 作为 PigStorage 的分隔符。根据[Pig10 文档](http://pig.apache.org/docs/r0.10.0/func.html#pigstorage)：

> 记录分隔符——对于加载语句，Pig 将换行符（'\n'）、回车符（'\r' 或 CTRL-M）和组合的 CR + LF（'\r\n'）字符解释为记录分隔符（不要使用这些字符作为字段分隔符）。对于 store 语句，Pig 使用换行符 ('\n') 作为记录分隔符。

如果要解析日志文件，则必须编写自定义加载器。

# php - Apache2 error 200 OK

> ID：14928621
> 
> 赞同：0
> 
> 时间：2013-02-18T02:27:56.917
> 
> 标签：php, error-handling, http-headers, apache2

i have some annoying error:

```
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html><head>
<title>200 OK</title>
</head><body>
<h1>OK</h1>
<p>The server is temporarily unable to service your
request due to maintenance downtime or capacity
problems. Please try again later.</p>
</body></html> 
```

The PHP code:

```
.
.
    for ($i = 0; $i < sizeof($rows); $i++) {
    $Lenght = mt_rand(300, 400);
                    for ($x = 0; $x < $Lenght; $x++) {
                        $NColumn1 .= mt_rand(0, 9);
                        $NColumn2 .= mt_rand(0, 9);
                    }
                    $database->exec("UPDATE Child SET Column1 = '$NColumn1', Column2 = '$NColumn2' WHERE Parent_ID = '$Parent_ID';");
                } 
```

I have 300 records in a table Child where I UPDATE with new one and that works just fine but during this proces I get a downloaded php file with 200 OK and in background my table is updating. I am using ***Zend Server CE SP1 5.6.0 with PHP 5.4 and Apache2***. I searched and fond somthing about **HEADER** handlings and in php.ini file to change **allow_url_fopen = On** to **allow_url_fopen = Off , and search error log in Apache2**. So I try all of that but nothing. So, is it possible to fix or disable that kind of error or do somthing to avoid it? Realy need a good help!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T16:45:24.023

我刚刚遇到了同样的问题并找到了这个链接： [ZendEnablerConf.xml](http://www.muenster-webdesign.net/blog/zend-server-community-edition/)

你可能想把它从德语翻译过来。;)

我相信您需要查找 ZendEnablerConf.xml 并更改超时：

```
<timeout connectionTimeout = "60" requestTimeout = "300" /> 
```

# python - 如何在 python 中循环遍历 csv，将行写入满足新条件的新文件

> ID：14928626
> 
> 赞同：0
> 
> 时间：2013-02-18T02:28:43.440
> 
> 标签：python, for-loop, while-loop

我已经有一段时间了，我认为向专家寻求建议对我来说是最有利的。我知道我不是以最好的方式写这个，而且我已经陷入了一个兔子洞并让自己感到困惑。

我有一个.csv。一堆，其实。那部分不是问题。

CSV 顶部的行并不是真正的 CSV 数据，但它确实包含一条重要信息，即数据对其有效的数据。对于某些类型的报告，它位于一条线上，而另一些则位于另一条线上。

我的数据从顶部开始，通常是 10 或 11，但我不能总是确定。我知道第一列总是有相同的信息（数据表的标题）。

我想从前面的行中提取报告日期，对于文件类型 A，执行 stuffA，对于文件 tpye B，执行 stuffB，然后将该行写入新文件。我在增加行时遇到问题，我不知道我做错了什么。

样本数据：

```
"Attribute ""OPSURVEYLEVEL2_O"" [Category = ""Retail v1""]"
Date exported: 2/16/13
Exported by user: William
Project: 
Classification: Online Retail v1
Report type: Attributes
Date range: from 12/14/12 to 12/14/12
"Filter OpSurvey Level 2(mine):  [ LEVEL:SENTENCE TYPE:KEYWORD {OPSURVEYLEVEL2_O:""gift certificate redemption"", OPSURVEYLEVEL2_O:""combine accounts"", OPSURVEYLEVEL2_O:""cancel account"", OPSURVEYLEVEL2_O:""saved project moved to purchased project"", OPSURVEYLEVEL2_O:""unlock account"", OPSURVEYLEVEL2_O:""affiliate promotions"", OPSURVEYLEVEL2_O:""print to store coupons"", OPSURVEYLEVEL2_O:""disclaimer not clear"", OPSURVEYLEVEL2_O:""prepaid issue"", OPSURVEYLEVEL2_O:""customer wants to use coupons for print to store"", OPSURVEYLEVEL2_O:""customer received someone else's order"", OPSURVEYLEVEL2_O:""hi-res images unavailable"", OPSURVEYLEVEL2_O:""how to re-order"", OPSURVEYLEVEL2_O:""missing items"", OPSURVEYLEVEL2_O:""missing envelopes: print to store"", OPSURVEYLEVEL2_O:""missing envelopes: mail order"", OPSURVEYLEVEL2_O:""group rooms"", OPSURVEYLEVEL2_O:""print to store"", OPSURVEYLEVEL2_O:""print to store coupons"", OPSURVEYLEVEL2_O:""publisher: card not available for print to store"", OPSURVEYLEVEL2_O:publisher}]"
Total: 905
OPSURVEYLEVEL2_O,Distinct Document,% of Document,Sentiment Score
PRINT TO STORE,297,32.82,-0.1
... 
```

示例代码

```
#!/usr/bin/python

import csv, os, glob, sys, errno

path = '/path/to/Downloads'
for infile in glob.glob(os.path.join(path,'report_ATTRIBUTE_OP*.csv')):
    if 'OPSURVEYLEVEL2' in infile:
        prime_column = 'ops2'
    elif 'OPSURVEYLEVEL3' in infile:
        prime_column = 'ops3'
    else:
        sys.exit(errno.ENOENT)
    with open(infile, "r") as csvfile:
        reader = csv.reader(csvfile)
        report_date = 'DATE NOT FOUND'
        # import pdb; pdb.set_trace()
        for row in reader:
            foo = 0
            while foo < 1: 
                if row[0][0:].find('OPSURVEYLEVEL') == 0:
                    foo = 1
                if "Date range" in row:
                    report_date = row[0][-8:]
                break
            if foo >= 1:
                if row[0][0:].find('OPSURVEYLEVEL') == 0:
                    break
                if 'ops2' in prime_column:
                    dup_col = row[0]
                    row.insert(0,dup_col)
                    row.append(report_date)
                elif 'ops3' in prime_column:
                    row.append(report_date)
                with open('report_merge.csv', 'a') as outfile:
                    outfile.write(row)
            reader.next() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:17:54.013

我可以在这段代码中看到两个问题。

首先是代码不会在`row`. 该行：

```
if "Date range" in row: 
```

... 应该：

```
if "Date range" in row[0]: 
```

第二个是代码：

```
if row[0][0:].find('OPSURVEYLEVEL') == 0:
    break 
```

... 在数据表的标题行之后跳出`for`循环，因为那是最近的封闭循环。我怀疑`while`在此代码的先前版本中的某个地方还有另一个。

`if`使用语句而不是`while`and ，代码更简单（并且没有错误）`if`，如下所示：

```
 for row in reader:
        if foo < 1: 
            if row[0][0:].find('OPSURVEYLEVEL') == 0:
                foo = 1
            if "Date range" in row[0]:  # Changed this line
                print("found report date")
                report_date = row[0][-8:]
        else:
            print(row)
            if row[0][0:].find('OPSURVEYLEVEL') == 0:
                break
            if 'ops2' in prime_column:
                dup_col = row[0]
                row.insert(0,dup_col)
                row.append(report_date)
            elif 'ops3' in prime_column:
                row.append(report_date)
            with open('report_merge.csv', 'a') as outfile:
                outfile.write(','.join(row)+'\n') 
```

# ruby - How do get the full command line in ruby?

> ID：14928630
> 
> 赞同：10
> 
> 时间：2013-02-18T02:29:37.777
> 
> 标签：ruby

How do I get the full command line in ruby?

```
$ rails c
> $0 
=> "script/rails"
> ARGV
[]
> `ps -eo "%p|$|%a" | grep '^\\s*#{Process.pid}'`.strip.split("|$|")[1]
=> "/home/sam/.rvm/rubies/ruby-1.9.3-p194-perf/bin/ruby script/rails console" 
```

Is there anything cleaner than ninja ps I can do to get the same results?

To clarify, in case there is confusion, I want the exact same output as:

```
`ps -eo "%p|$|%a" | grep '^\\s*#{Process.pid}'`.strip.split("|$|")[1] 
```

ARGV is coming back blank.
$0 is missing the full path.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T05:20:14.220

我会使用：

```
#!/usr/bin/env ruby

puts "Process ID: #{ $$ }"
puts `ps axw`.split("\n").select{ |ps| ps[ /\A#{ $$ }/ ] } 
```

在脚本中运行它会输出：

```
18222 s000 S+ 0:00.25 /Users/foo/.rbenv/versions/1.9.3-p385/bin/ruby /Users/foo/.rbenv/versions/1.9.3-p385/bin/rdebug /Users/foo/Desktop /test.rb

```

# scala - Scala Play 外部重定向

> ID：14928631
> 
> 赞同：3
> 
> 时间：2013-02-18T02:29:50.023
> 
> 标签：scala, redirect, playframework

当我致力于实现 TinyUrl 时，我想根据输入哈希将用户重定向到网页。

```
 def getTask(hash: Int) = Action {
    val url: Option[String] = Task.getTask(hash)
    // redirect to show(url) 
  } 
```

但是，我不知道如何将用户重定向到外部 URL。

我看到了这个[相关的帖子](https://stackoverflow.com/questions/10019420/play-framework-redirect-with-params)，但是我在使用时遇到了这个编译时错误`redirect`

`not found: value redirect`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T08:06:02.843

`redirect`不存在。
但是`Redirect`，它是`play.api.mvc`包的成员，确实如此。

以下是您的操作应如下所示的示例：

```
import play.api.mvc._

def getTask(hash: Int) = Action {
  val url: Option[String] = Task.getTask(hash)

  url match {
    case Some(url) => Redirect(url)
    case None => NotFound("This URL leads nowhere. :(")
  }
} 
```

# javascript - highcharts How to automatically extended columns

> ID：14928634
> 
> 赞同：2
> 
> 时间：2013-02-18T02:30:28.883
> 
> 标签：javascript, jquery, highcharts

hi all:can i automatically extended columns with a empty value like this:

![chart](../Images/e6f29d30a70dbdc5c22024afc0b29602.png)?

[code link](http://jsfiddle.net/rKBjq/) Thanks a lot!

```
john's value = 0 in second column 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:38:03.667

不幸的是，此选项不可用。

# c# - Using MEF with the Enterprise Library

> ID：14928636
> 
> 赞同：2
> 
> 时间：2013-02-18T02:30:36.317
> 
> 标签：c#, mef, enterprise-library

I'm trying to override the default Unity Container behavior for the Enterprise Library so that I can use my MEF container. There are a few resources with explanations of how to do this but I'm just not getting it:

*   [http://blogs.msdn.com/b/bobbrum/archive/2009/06/23/enterprise-library-5-0-some-architecture-changes.aspx](http://blogs.msdn.com/b/bobbrum/archive/2009/06/23/enterprise-library-5-0-some-architecture-changes.aspx)
*   [http://entlib.uservoice.com/forums/90505-silverlight-integration-pack/suggestions/1284693-mef-configurator-for-enterprise-library-container](http://entlib.uservoice.com/forums/90505-silverlight-integration-pack/suggestions/1284693-mef-configurator-for-enterprise-library-container)
*   [http://entlib.codeplex.com/discussions/261443](http://entlib.codeplex.com/discussions/261443)

There is also this post on SO but the code does not compile because `LogWriter` is protected. I assume this referred to an old version:

*   [.net Mef with Enterprise Library 5.0](https://stackoverflow.com/questions/5637678/net-mef-with-enterprise-library-5-0)

What I understand is that I need to use the `CommonServiceLocator` for my MEF container and then attach this to the Enterprise Library container. Here's what I have for my container configurator:

```
public class MefContainerConfigurator : IContainerConfigurator, IServiceLocator
{
    [Import] private CatalogExportProvider provider;

    public object GetService(Type serviceType)
    {
            throw new NotImplementedException();   
    }

    public object GetInstance(Type serviceType)
    {
        return provider.GetExportedValue<Type>();
    }

    public object GetInstance(Type serviceType, string key)
    {
        throw new NotImplementedException();
    }

    public IEnumerable<object> GetAllInstances(Type serviceType)
    {
        throw new NotImplementedException();
    }

    public TService GetInstance<TService>()
    {
        return provider.GetExportedValue<TService>();
    }

    public TService GetInstance<TService>(string key)
    {
        return provider.GetExportedValue<TService>(key);
    }

    public IEnumerable<TService> GetAllInstances<TService>()
    {
        return provider.GetExportedValues<TService>();
    }

    public void RegisterAll(IConfigurationSource configurationSource, ITypeRegistrationsProvider rootProvider)
    {
        throw new NotImplementedException();
    }
} 
```

And in my bootstrapper:

```
var configurator = new MefContainerConfigurator();
// Does this line read the Enterprise Library configuration from the app.config?
IConfigurationSource cs = new SystemConfigurationSource();

EnterpriseLibraryContainer.ConfigureContainer(configurator, cs); 
```

I think maybe I need to make use of the `LogWriterImpl` and `ExceptionManagerImpl` classes as these have constructors which accept configuration. My questions at this point would be:

*   How do I retrieve the configuration from the `IConfigurationSource` and feed it into the constructors for the `LogWriterImpl` and `ExceptionManagerImpl` constructors?
*   `EnterpriseLibraryContainer.ConfigureContainer` calls `RegisterAll` in my `MefContainerConfigurator`. Is this where I'm supposed to register all of the enterprise library types into the container?
*   The methods from the `IServiceLocator` interface that I have left as NotImplemented; I couldn't find a way to use these to return objects from my container. Am I supposed to leave them as not implemented and use the generic methods instead?

**Edit**

I still cannot get this totally right. Based on @Chris Tavares answer, I wrote my `RegisterAll` method in the `MefContainerConfigurator` to iterate through the TypeRegistrations and add them to a container. I cannot for the life of me figure out how to merge these to my `AggregateContainer` that is created in my `Bootstrapper` class so that I can actually use these exports outside of the `ContainerConfigurator`:

```
public void RegisterAll(IConfigurationSource configurationSource, ITypeRegistrationsProvider rootProvider)
{
    var registrations = rootProvider.GetRegistrations(configurationSource);

    foreach (var type in registrations)
    {
        var builder = new RegistrationBuilder();

        builder.ForType(type.ServiceType).Export();

        var cat = new AssemblyCatalog(type.ServiceType.Assembly, builder);
        var container = new CompositionContainer(cat);
        container.ComposeParts(this);
    }
} 
```

ConfigureAggregateCatalog in Prism bootstrapper:

```
protected override void ConfigureAggregateCatalog()
{
    AggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(RegionNames).Assembly));
    // Module assemblies
    AggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(DataEntryModule).Assembly));
    AggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(ReportingModule).Assembly));
    AggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(StatusBarModule).Assembly));
    AggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(SplashScreenModule).Assembly));
    AggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(WelcomeModule).Assembly));
    AggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(AdministrationModule).Assembly));

    AggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(Bootstrapper).Assembly));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T01:27:38.403

您的容器配置器非常不完整。您有一种方法可以实现：RegisterAll，但您没有实现它。

您不必从 config 中读取原始配置信息；相反，当您调用 EnterpriseLibraryContianer.ConfigureContainer 时，Entlib 将旋转配置源，挑选出所有重要的位，并为您提供一系列 TypeRegistration 对象。那些家伙给你类型映射，以及构造函数依赖等。基本上所有你需要在你的容器中注册依赖的东西（在这种情况下，MEF）。

所以基本上你需要做的就是编写代码，将抽象的 TypeRegistration 对象转换为 MEF 的正确配置。

Unity 在这方面并不特别。它也有一个配置器，并且遵循完全相同的过程，因此您可以查看 entlib 代码作为您需要做的各种事情的示例。

我根本不知道 MEF api，所以很遗憾无法帮助您进行具体实施。

# ruby-on-rails - 使用 Gmaps4rails 更改气球文本

> ID：14928648
> 
> 赞同：0
> 
> 时间：2013-02-18T02:32:37.160
> 
> 标签：ruby-on-rails, ruby, gmaps4rails

我正在使用 Gmaps4rails 在我的 rails 应用程序中显示谷歌地图。我在地图上正确显示了一个位置列表，但是当我单击其中一个点时，弹出的气球没有显示我想要显示的信息。我认为更改气球信息的数据/格式并不难，但我找不到此气球信息的存储位置！

Gmaps4rails 中的哪些文件定义了单击地图上的某个点时在气球中显示的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:07:52.163

您必须`gmaps4rails_infowindow`在模型中重新定义方法，例如：

```
 def gmaps4rails_infowindow
    "<h1>#{self.name}</h1><p>#{self.address}</p><p>#{self.description}</p>"
  end 
```

[安全警告](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Security-Warning)

# apache - 判断 Apache 上正在运行哪些脚本的方法

> ID：14928654
> 
> 赞同：0
> 
> 时间：2013-02-18T02:32:59.367
> 
> 标签：apache

有没有办法告诉 Apache 上正在运行哪些脚本？我的服务器被黑了，有人安装了一个发送大量垃圾邮件的脚本。我查看了我的文件，看不到任何新内容，我找不到他们隐藏脚本的位置。

我真的需要追踪所有这些垃圾邮件的来源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:40:01.350

检查您的 .htaccess 文件以查看它是否已被篡改。否则检查 index.php 之类的文件是否有不需要的代码，您可能会尝试查找 base64_decode 和 eval。这些通常用于运行此类代码。

这是 WordPress，如果是 Securi 提供的服务可以扫描并修复这类事情。

# javascript - 按钮 在 JavaScript 中单击以在表格中添加一行

> ID：14928656
> 
> 赞同：0
> 
> 时间：2013-02-18T02:33:03.273
> 
> 标签：javascript, jquery, html

我的任务是制作一个带有表格和按钮的页面。当用户按下按钮时，表格中会添加一行。所以，我的 html 页面上有一个按钮 ( `<button id="my_button">Bla-bla</button>`) 和一个表格 ( `<table id="my_table">`)。我有一个单独的 JavaScript 文件。在那个文件中，我写道：

```
$(function() {
    $(my_button).click(function(){            
       tbl = document.getElementById("my_table");
       row = tbl.insertRow(0);      
       var newCell = row.insertCell(0);
       newCell.height=300;
       newCell.innerHTML="Some New Text";
    });
}); 
```

但是有一个问题：当我按下按钮时，该行添加了几毫秒，然后它消失了，我再次看到没有新行的表格。有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:44:58.520

如果您打算将 jQuery 用于单击事件，您不妨在代码中始终如一地使用它。

试一试：[jsfiddle](http://jsfiddle.net/uX6Zq/1/)

```
$("#my_button").click(function(){            
    $("#my_table").append('<tr style="height:300px"><td>Some New text</td></tr>');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T03:42:34.087

如果没有看到您的标记，可能是因为系统的评论表明表单正在提交并且页面正在刷新。

如果是这种情况，简单的解决方案是在处理程序中使用 event.preventDefault()：

```
$(function() {
    $(my_button).click(function(){ 
        event.preventDefault();           
        tbl = document.getElementById("my_table");
        row = tbl.insertRow(0);      
        var newCell = row.insertCell(0);
        newCell.height=300;
        newCell.innerHTML="Some New Text";
   }); 
```

});

[您可以在jquery 文档](http://api.jquery.com/event.preventDefault/)中阅读有关 preventDefault 的更多信息

根据其他答案，如果您可以访问 jquery，则可以通过在整个代码中使用它来整理该方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T04:10:46.090

这里有一个小例子

html代码

```
<table class="authors-list">
    <tr>
        <td>author's first name</td><td>author's last name</td>
    </tr>
    <tr>
        <td>
            <input type="text" name="first_name" />
        </td>
        <td>
            <input type="text" name="last_name" />
        </td>
    </tr>
</table>
<a href="#" title="" class="add-author">Add Author</a> 
```

jQuery代码

```
var counter = 1;
jQuery('a.add-author').click(function(event){
    event.preventDefault();
    counter++;
    var newRow = jQuery('<tr><td><input type="text" name="first_name' +
        counter + '"/></td><td><input type="text" name="last_name' +
        counter + '"/></td></tr>');
    jQuery('table.authors-list').append(newRow);
}); 
```

请参阅此链接以了解此代码 [http://jsfiddle.net/yUfhL/](http://jsfiddle.net/yUfhL/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-19T09:27:51.597

```
<script type="text/javascript"> 
          $(document).ready(function(){        
               $(document).on("click","td.addNewButton",function(e) {   
                     var row = $(this).parent().parent().children().index($(this).parent());   
                     var html = $('#myTable tbody tr:eq('+row+')').html();   
                     $('#myTable tbody tr:eq('+row+')').after('<tr>'+html+'</tr>');  
               }); 
         }); 
    </script> 
```

这对你很好:)

# c++ - 没有编译 el main：未定义对 main 的引用

> ID：14928663
> 
> 赞同：0
> 
> 时间：2013-02-18T02:34:30.860
> 
> 标签：c++, makefile

我正在用一个类 main.c 做一个项目并使用 makefile 编译它

Estado.h

```
#ifndef ESTADO_H
#define ESTADO_H
using namespace std;
#include <string>
class Estado
{
    private:
        int ident;
        bool estInit;
    bool estEnd;

    public: 
    Estado();
        virtual ~Estado();
        Estado(int ident,bool inits,bool ends);
        void setIdent(int id);
        void setInitS(bool inits);
    void setEndS(bool ends);
        int getIdent();
    bool getInitS();
    bool getEndS();
};
#endif // TRANS_H 
```

Estado.c

```
#include "Estado.h"

Estado::Estado(int ident,bool inits,bool ends)
{
    this->ident=ident;
    this->estInit=inits;
    this->estEnd=ends;
}

void Estado::setIdent(int id){
    ident=id;
}
void Estado::setInitS(bool inits){
    estInit=inits;
}
void Estado::setEndS(bool ends){
    estEnd=ends;
}
int Estado::getIdent(){
    return ident;
}
bool Estado::getInitS(){
    return estInit;
}
bool Estado::getEndS(){
    return estEnd;
} 
```

主程序

```
#include <iostream>
#include <vector>
#include"Trans.h"
#include"Estado.h"

using namespace std;

int menu();
void cargarAutomata(int numEstados,int numTrans);
int main()
{
    int numEstados,numTrans,opc;
    cout<<"\t\t**************************************\t\t"<<endl;
    cout<<"\t\t*INGRESO DE PARAMAETROS PARA LA TABLA*\t\t"<<endl;
    cout<<"\t\t**************************************\t\t"<<endl;
    cout<<"Indica la cantidad de estados"<<endl;
    cin>>numEstados;
    cout<<"Indica la cantidad de transiciones"<<endl;
    cin>>numTrans;

    cargarAutomata(numEstados,numTrans);

    return 0;
}

void cargarAutomata(int numEstados,int numTrans){
    vector<Estado> *states(numEstados,Estado());

} 
```

生成文件

```
CC=g++ -c 
LN=g++

Practica1:  Estado.o Trans.o
    $(LN) Estado.o Trans.o -o Practica1 

transicion.o: Trans.c 
    $(CC) Trans.c Trans.o

est.o: Estado.c 
    $(CC) Estado.c Estado.o 
```

出现以下错误

g++ -o Practica1 Estado.o Trans.o
/usr/lib/gcc/i486-linux-gnu/4.4.5/../../../../lib/crt1.o：在函数`_start': (.text+0x18): undefined reference to`main'collect2 : ld 返回 1 退出状态 make: *** [Practica1] 错误 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:38:50.327

你从来没有实现你的析构函数。将此添加到您的 Estado.c 文件中：

```
Estado::~Estado {
    ...
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:38:57.200

似乎你的makefile中有一个错误。试试下面的makescript。

```
CC=g++ -c 
LN=g++

Practica1:  Estado.o Trans.o main.o
    $(LN) Estado.o Trans.o main.o -o Practica1 

transicion.o: Trans.c 
    $(CC) Trans.c -o Trans.o

est.o: Estado.c 
    $(CC) Estado.c -o Estado.o

main.o: main.c
    $(CC) main.c -o main.o 
```

# java - 当使用 node(*) 副 node(1,2,3...) 时，Java Neo4j Cypher 查询导致 unsupportedException

> ID：14928667
> 
> 赞同：1
> 
> 时间：2013-02-18T02:35:00.197
> 
> 标签：java, neo4j, cypher

给定以下代码：

```
public class Foo
{

     public void go(String relationship)
     {
             RestGraphDatabase rest = new RestGraphDatabase(
            prop.getProperty("address"), prop.getProperty("username"),
            prop.getProperty("password"));
             ExecutionEngine engine = new ExecutionEngine(rest,
            StringLogger.SYSTEM);
             ExecutionResult result = engine
                .execute("start n=node(7,8,9)  match(n)-[" + relationship
                        + "]->(x) return n,x,caution");    
                    scala.collection.Iterator<Node> nodes = result.columnAs("n");                
     }
} 
```

上面的工作并允许我迭代我的列但是：

```
public class Foo
{

     public void go(String relationship)
     {
             RestGraphDatabase rest = new RestGraphDatabase(
            prop.getProperty("address"), prop.getProperty("username"),
            prop.getProperty("password"));
             ExecutionEngine engine = new ExecutionEngine(rest,
            StringLogger.SYSTEM);
             ExecutionResult result = engine
                .execute("start n=node(*)  match(n)-[" + relationship
                        + "]->(x) return n,x,caution");    
                    scala.collection.Iterator<Node> nodes = result.columnAs("n");                
     }
} 
```

导致迭代器抛出不受支持的异常。`node(*)`列出值不是语法糖吗？如果不是，我该如何`node(*)`迭代它？

堆：

> 2013-02-18 03:13:22.227+0000 信息 [org.neo4j]: 开始 n=node(*) 匹配 (n)-[警告]->(x) 返回 n,x,警告列表 (n, x ，注意）
> 
> org.neo4j.rest.graphdb.RestGraphDatabase.getNodeManager(RestGraphDatabase.java:33) 的 org.neo4j.rest.graphdb.AbstractRemoteDatabase.getNodeManager(AbstractRemoteDatabase.java:136) 的线程“main”java.lang.UnsupportedOperationException org.neo4j.tooling.GlobalGraphOperations.(GlobalGraphOperations.java:39) 在 org.neo4j.tooling.GlobalGraphOperations.at(GlobalGraphOperations.java:51) 在 org.neo4j.cypher.internal.executionplan.builders.GraphGlobalStartBuilder$$anonfun$ createStartPipe$1.apply(GraphGlobalStartBuilder.scala:51) at org.neo4j.cypher.internal.executionplan.builders.GraphGlobalStartBuilder$$anonfun$createStartPipe$1.apply(GraphGlobalStartBuilder.scala:51) at org.neo4j.cypher.internal.pipes .StartPipe$$anonfun$createResults$1.apply(StartPipe.scala:36) 在 org.neo4j。cypher.internal.pipes.StartPipe$$anonfun$createResults$1.apply(StartPipe.scala:35) at scala.collection.Iterator$$anon$13.hasNext(Iterator.scala:371) at scala.collection.Iterator$$anon $13.hasNext(Iterator.scala:371) at scala.collection.Iterator$$anon$11.hasNext(Iterator.scala:327) at scala.collection.Iterator$$anon$11.hasNext(Iterator.scala:327) at org .neo4j.cypher.internal.ClosingIterator$$anonfun$hasNext$1.apply$mcZ$sp(ClosingIterator.scala:36) at org.neo4j.cypher.internal.ClosingIterator$$anonfun$hasNext$1.apply(ClosingIterator.scala: 35) 在 org.neo4j.cypher.internal.ClosingIterator.failIfThrows(ClosingIterator.scala:87) 在 org.neo4j 的 org.neo4j.cypher.internal.ClosingIterator$$anonfun$hasNext$1.apply(ClosingIterator.scala:35) .cypher.internal.ClosingIterator.hasNext（ClosingIterator.scala：35）在 org.neo4j.cypher.PipeExecutionResult.hasNext(PipeExecutionResult.scala:139) 在 scala.collection.Iterator$$anon$11.hasNext(Iterator.scala:327) 在 scala.collection.Iterator$class.isEmpty(Iterator .scala:256) 在 scala.collection.AbstractIterator.isEmpty(Iterator.scala:1156)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:28:05.247

使用 RestCypherQueryEngine，请参阅[此 stackoverflow 帖子](https://stackoverflow.com/questions/13811095/unsupportedoperationexception-while-executing-cypher-query-in-java-to-neo4j-serv)。如果您查看源代码，似乎有很多不支持：[AbstractRemoteDatabase](https://github.com/neo4j/java-rest-binding/blob/master/src/main/java/org/neo4j/rest/graphdb/AbstractRemoteDatabase.java)。;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:16:28.687

这个查询的实际目标是什么？这会返回您的整个图表？

如果您想对数据做一些事情，请**在**服务器端的查询中进行，而不是通过网络拉取数据。

您的查询中也没有名为“警告”的标识符。

```
start n=node(*)  
match(n)-[" + relationship + "]->(x) 
return n,x,caution 
```

# c++ - 读取向量迭代器时访问不正确

> ID：14928678
> 
> 赞同：0
> 
> 时间：2013-02-18T02:36:52.443
> 
> 标签：c++, vector, iterator

我有一个`vector<int>`叫`pitches`. 我在`bad access`下面的最后一行定期：

```
int play = 0;
bool didFind = 0;
vector<int>::const_iterator iterator;

for (iterator = pitches.begin(); iterator != pitches.end(); ++iterator) {
    if (*iterator > lastpitch) { // lastpitch is an int
        didFind = 1;
        play = *iterator;
        break;
    }
}

if (!didFind) play = *(pitches.begin()); // this line gives me bad access 
```

我之前曾尝试过`*pitches.begin()`最后一行，但总是提供错误的访问权限，我现在明白了。但是，虽然我现在很少得到它，但`play=*(pitches.begin());`偶尔还是会这样做。我在上面看不到任何会导致这种情况的东西，任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T02:41:33.773

如果`pitches`向量有大小`0`，里面的东西

```
 for (iterator=pitches.begin();iterator!=pitches.end();++iterator) 
```

不会被执行，因此`didFind=0`.

内部的语句`if`被评估。却`pitches`是空虚的意思`pitches.begin()==pitches.end()`。取消引用 a`pitches.end()`是为了越界访问，因此给出`bad access`.

# javascript - 将窗口页面和选项卡重定向到外部网站

> ID：14928680
> 
> 赞同：0
> 
> 时间：2013-02-18T02:37:04.760
> 
> 标签：javascript, internet-explorer, google-chrome, firefox

我在打开新窗口选项卡到外部网站时遇到了一些浏览器问题。

它应该做什么：当前窗口被重定向到一个页面，同时它打开一个新的窗口选项卡并被重定向到一个外部页面。

它在 Firefox 上运行良好，但不支持 IE 或 Chrome，因为它不会打开新窗口选项卡并重定向。但是，它确实可以在当前窗口上很好地重定向到我想要的页面。有人知道为什么吗？

```
<script type="text/javascript">window.open('Site A');</script> (This doesn't open in IE, and Chrome open in a new window instead of tab)

<script>top.location.href="Site B"</script> (This line works fine in FF, IE, and Chrome)

<script type="text/javascript"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:44:17.030

尝试 window.location 而不是 top.location.href。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:51:03.090

你的代码看起来不错，理论上它应该可以工作，确保弹出窗口没有被浏览器阻止。

# asp.net-mvc - 业务逻辑是否应该在模型中？(MVC4)

> ID：14928690
> 
> 赞同：3
> 
> 时间：2013-02-18T02:39:04.703
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我的 MVC 应用程序中有一个名为“Stores”的类，它有一个名为“IsInCompliance”的类，它取决于其他几个字段的值。逻辑将通过并说“如果这个、这个和这个是真的，那么 IsInCompliance 是真的”。

这应该属于模型定义，还是将这个逻辑更好地放置在服务层或控制器中？我想我有四个选择：

1.  模型内方法中包含的逻辑
2.  控制器中包含的逻辑写回模型
3.  模型调用的服务中包含的逻辑
4.  控制器调用的服务中包含的逻辑

哪个最好？如果 3 是最好的，那是不是存在循环依赖（因为我的模型项目依赖于服务项目，而服务项目又依赖于模型项目）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T02:42:42.377

4 号是正确的方法。

控制器应该充当一个薄的“流量控制”层，并将所有逻辑委托给它们下面的服务层（或者如果逻辑不太明显，则委托给业务层——但这是一个不同的架构问题）。

您的模型通常应该是一个纯 POCO 结构，可选择包含数据模型内部事物的微逻辑。例如，ID 生成和数据完整性操作。

您的大部分逻辑（对于相对简单/基于 CRUD 的应用程序）通常应该驻留在服务层中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T02:48:05.290

这是偏好/风格的问题，但我一直认为与 Model 对象密切相关的方法属于该对象。

以此为例（我在没有打开的 VS.NET 实例的情况下即时编码，所以请原谅任何语法错误，只是试图将其用作通信工具）：

```
public class Person 
{
    public Int32 Age { get; set; }

    public bool IsEligibleToEnterLegallyBindingContract() 
    {
        return Age >= 18;
    }
 } 
```

我会断言，包含自省其自身属性并且不依赖于其他模型对象的消息和/或属性的方法的模型对象是良好的对象设计和 MVC 环境中的良好建模方法。

**更新**我与一位同事就此进行了讨论，他向我指出了[贫血域模型](http://martinfowler.com/bliki/AnemicDomainModel.html)，这是 Martin Fowler 的一篇优秀文章。在我的同事推荐后，我将这篇文章读了好几遍。

Fowler 先生文章的最后一段（这是来自 martinfowler.com 的直接引述，并承认并给予该网站的信用）：

*“一般来说，你在服务中发现的行为越多，你就越有可能剥夺自己从领域模型中获得的好处。如果你所有的逻辑都在服务中，那么你就是在偷盲自己。”*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T02:49:54.663

MVC 就是关于分离关注点。保持这种方式。通过将业务逻辑放在单独的类（层）中，将逻辑与数据分开。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T02:53:53.597

通常我对模型而不是在模型中执行操作，但这是个人喜好。我会（在你的情况下）在服务层中编写逻辑，然后从控制器进行协调调用，该调用将在模型上运行。尽管如此，我相信有些人将此称为[贫血域模型](http://martinfowler.com/bliki/AnemicDomainModel.html)。

我认为任何方法都没有错，但我个人会选择 4 号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T10:42:02.423

我想这取决于你的编码风格。

选项 1 或选项 4 是否正确取决于您询问的对象。

对于这样的事情，我认为选项 1 是正确的。

如果 IsInCompliance 仅取决于模型中其他属性的值，那么它应该在模型中。

如果 IsInCompliance 的值取决于其他类，那么是的，它应该在服务层中。

将这样的东西移动到服务层会导致贫血域模型，您的模型类最终只是 dto 的

在面向对象的设计中，这被认为是一种反模式。

仍然有很多东西需要在服务层中，我只是不认为这是其中之一。

# html - 引导基本网格

> ID：14928692
> 
> 赞同：0
> 
> 时间：2013-02-18T02:39:26.123
> 
> 标签：html, css, twitter-bootstrap

![在此处输入图像描述](../Images/efee3874e107c69502d1194efa243435.png)

为了学习响应式网页设计，我正在自学如何使用引导程序进行设计。我创建了一个基本网格；网格的代码如下所示。

HTML：

```
<div class="row">
  <div class="span6 red01">span6</div>
  <div class="span6 green01">span6</div>
</div> 
```

CSS：

```
body { padding: 0px; }
.red01 { background: #ff0000; }
.green01 { background: #00ff00; } 
```

我可以在我的网页上看到这两个 div，但我的问题是它们是如何对齐的。我想在我的笔记本电脑屏幕上水平对齐它们。我试过摆弄这个，但不能让它工作。任何人都可以借他们的专业知识吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:14:07.920

请为你检查这个[JSfiddle](http://jsfiddle.net/shail/fez34/)

在此处查看[结果 2 col的结果](http://jsfiddle.net/shail/fez34/show)

```
 <div class="container">  
       <div class="row">  
          <div class="span12">  
             <h1>Bootstrap 12 col spanning full page</h1>   
   </div>
           <div class="span6">  
              <p> Paragraph test col1</p>   
       </div>  
       <div class="span6">  
               <p> Paragraph test col2.</p>   
        </div>  
       </div>  
    </div> 
```

`.container class`-> 它是一个固定宽度的包装器，在 bootstrap.css 中预定义。

`.container-fluid`-> 这是流体包装

`.row`--> 这个类被构建为包含一行列。每个新行都会创建一个新区域，用于根据需要布置列。

# python - Python 鼻子测试继承：从子类加载单元测试夹具

> ID：14928693
> 
> 赞同：7
> 
> 时间：2013-02-18T02:39:30.353
> 
> 标签：python, unit-testing, nose, nosetests

我正在将 Python 项目的测试套件从 unittest 转换为 nose。该项目的现有框架（基于 unittest）相当笨重，包含大量用于测试发现和运行的高度定制的代码，因此我正在尝试迁移到鼻子以使一切更加精简。

但是，我遇到了生成测试套件的代码的问题。

该项目的框架有两种运行测试的方式。一个是

```
class TestSomething(unittest.TestCase):

    def setUp(self):
        ...

    def test_x(self):
        ...

    def test_y(self):
        ...

suite = unittest.TestSuite()
suite.addTest(unittest.makeSuite(TestSomething)) 
```

这是“直截了当”的方式，它是所有鼻子示例和教程所显示的，并且有效。但是，第二种方法是定义一个包含所有测试逻辑的测试类，然后在包含不同设置配置的各种子类中创建测试用例，并从超类继承测试：

```
class TestSomething(unittest.TestCase):

    def test_x(self):
        ...

    def test_y(self):
        ...

class TestCase1(TestSomething):

    def setUp(self):
        ...

class TestCase2(TestSomething):

    def setUp(self):
        ...

suite = unittest.TestSuite()

cases = [TestCase1,TestCase2]
suite.addTests([unittest.makeSuite(case) for case in cases]) 
```

这就是鼻子失败的原因。它首先尝试运行测试方法，这显然不起作用，因为超类中没有 setUp() 并且 test_x() 和 test_y() 中使用的许多变量尚未定义。

我在任何地方都没有找到任何这样的例子，而且 Nose 的（相当稀疏且难以导航）文档似乎也没有提到它。这怎么能和鼻子一起工作？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-18T06:52:02.873

首先，正如 unutbu 所指出的，您不应该给以`TestSomething`开头的名称`Test`，因为`nose`自动将此类类视为测试用例。此外，`nose`运行`TestCase`他找到的所有子类，从而执行以下操作：

```
class Something(unittest.TestCase):
    ... 
```

给出完全相同的结果。我认为你不应该继承`TestCase`该类并将其用作混合：

```
class Something(object):
    def test_x(self):
        # here the various assertEqual etc. do not resolve, but you can use them
        # as if they were present, since in real test-cases they will be inherited
        # from unittest.TestCase.
        ...
    ...

class TestCase1(unittest.TestCase, Something):
    def setUp(self):
        ... 
```

另一种方法是将类的`__test__`属性设置为`False`：

```
class TestSomething(unittest.TestCase):
    __test__ = False
    def test_x(self):
        ...

class TestCase1(TestSomething):
    __test__ = True  #must put this
    def setUp(self):
        ... 
```

或者，您可以使用`nose.istest`and`nose.nottest`标记哪个类是测试用例，哪个不是：

```
@tools.nottest
class TestSomething(unittest.TestCase):
    def test_x(self):
        ...

@tools.istest
class TestCase1(TestSomething):
    sef setUp(self):
        ... 
```

# iphone - 每天在预设时间截取“查找我的朋友”的应用程序

> ID：14928695
> 
> 赞同：-1
> 
> 时间：2013-02-18T02:39:34.423
> 
> 标签：iphone, module, jailbreak

我想写一个应用程序，在每天的指定时间截屏找到我的朋友。这样的事情甚至可能吗？我对开发世界很陌生，只看过斯坦福教程视频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:21:56.570

您无法使用 iPhone SDK 实现此目的。

# c# - SQL Server 错误，'关键字不支持'数据源'

> ID：14928700
> 
> 赞同：0
> 
> 时间：2013-02-18T02:40:27.353
> 
> 标签：c#, asp.net, database, sql-server-2008, datasource

我目前正在尝试将一些值插入数据源，然后使用 DataList 控件将它们显示在另一个页面上。但是，经过一些测试和实验，我发现错误从一开始就出现了。

这是我绑定到按钮的代码。

```
protected void btnSend_Click(object sender, EventArgs e)
    {
    Page.Validate("vld2");
    SendMail();
    lblMsgSend.Visible = true;
    txtPhone.Text = "";
    txtEmail.Text = "";
    txtName.Text = "";
    txtComment.Text = "";

    //SQL Server Database
    SqlConnection conn; //manages connection to database
    SqlCommand cmd; //manages the SQL statements
    string strInsert; //SQL INSERT Statement
        try
        {
            //create a connection object
            conn = new SqlConnection("DataSource=localhost\\sqlexpress;" +
                                     "Initial Catalog=RionServer;" +
                                     "Integrated Security=True;");
            //Build the SQL INSERT Document
            strInsert = "INSERT INTO CommentsAdmin (Name,Phone,Email,Comments)"
                + "VALUES(@Name,@Phone,@Email,@Comments);";
            //associate the INSERT statement with the connection
            cmd = new SqlCommand(strInsert, conn);
            //TELL the SqlCommand WHERE to get the data from
            cmd.Parameters.AddWithValue("Name", txtName);
            cmd.Parameters.AddWithValue("Phone", txtPhone);
            cmd.Parameters.AddWithValue("Email", txtEmail);
            cmd.Parameters.AddWithValue("Comments", txtComment);
            //open the connection
            cmd.Connection.Open();
            //run the SQL statement
            cmd.ExecuteNonQuery();
            //close connection
            cmd.Connection.Close();
            //display status message on the webpage
            lblMsgSend.Text = "Thank you for the comment! Please hit the 'Return to Main Page' to return to the Main Page!";
        }
        catch (Exception ex)
        {
            lblMsgSend.Text = ex.Message;
        }
    } 
```

这是我的网页图像及其显示的错误。

![SQL 服务器错误。 不支持关键字“数据源”](../Images/4ec4cca063f3ee010248b56fa6784465.png)

如果您需要更多信息，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T02:44:56.720

在您的连接字符串中，它应该是“数据源”，而不是“数据源”。只需添加一个空格。

# sql - SQLCipher 提供哪些密码和模式？

> ID：14928702
> 
> 赞同：0
> 
> 时间：2013-02-18T02:40:36.353
> 
> 标签：sql, cryptography, sqlcipher

在 SQLCipher 中，我可以使用`PRAGMA cipher`. 默认密码是 AES-256-cbc。支持的密码和操作模式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:39:20.837

SQLCipher 使用 OpenSSL，因此依赖于库支持的底层密码套件，使用标准密码长度模式标识符进行初始化。但是，此功能主要保留用于需要备用密码的特定情况。我们通常建议集成使用默认的 aes-256-cbc。

# php - CakePHP：递归列名

> ID：14928703
> 
> 赞同：0
> 
> 时间：2013-02-18T02:40:52.023
> 
> 标签：php, cakephp, model

我正在尝试使用多个模型开发 CakePHP 应用程序并在这些模型中定义关系。

现在，我需要检索模型的字段集（即列名）来创建一个漂亮的表单。我熟悉 getColumnTypes 和架构，但我需要递归地获取字段，以便我可以将输出提供给 Backbone.js。

例如，假设我有一个带有“name”字段的 Customer 模型，以及一个与 Address 模式的 hasOne 关系，带有一个“street”字段，我需要以某种方式获得如下所示的结构。

```
{
  "name",
  "Address": {
    "subschema": {"street"}
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T02:52:27.460

您需要定义`hasOne`从地址到子模式等的关系，并且在查询数据时使用[递归关键字](http://book.cakephp.org/2.0/en/models/model-attributes.html#recursive)

# rubygems - Rubygems 没有使用 $GEM_PATH 环境变量

> ID：14928705
> 
> 赞同：0
> 
> 时间：2013-02-18T02:41:02.633
> 
> 标签：rubygems, rvm

我在 linux 上使用 rvm gemsets 来处理带有旧版本 rails 和 ruby​​ 的 rails 应用程序。除了 ruby​​gems 没有看到 ruby​​ 或 gem 的正确路径之外，一切都有意义。为了说明，我想使用 ruby​​ 1.8.7 和一个名为 smsx 的 gemset

```
➜  rails git:(master) ✗ rvm current
ruby-1.8.7-p371@smsx 
```

正如预期的那样

```
➜  rails git:(master) ✗ echo $GEM_PATH
/home/matt/.rvm/gems/ruby-1.8.7-p371@smsx:/home/matt/.rvm/gems/ruby-1.8.7-p371@global 
```

然而

```
➜  rails git:(master) ✗ gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.25
  - RUBY VERSION: 1.9.3 (2013-02-06 patchlevel 385) [i686-linux]
  - INSTALLATION DIRECTORY: /home/matt/.rvm/gems/ruby-1.9.3-p385
  ... more ...
  - GEM PATHS:
     - /home/matt/.rvm/gems/ruby-1.9.3-p385
     - /home/matt/.rvm/gems/ruby-1.9.3-p385@global
  ... more ... 
```

所以 ruby​​gems 认识到我正在使用 rvm，但认为我正在使用不同的 ruby​​ 和默认 gemset。就像 ruby​​gems 完全忽略了相关的环境变量。

关于可能原因的任何建议？

编辑：

应要求提供的附加信息

```
➜  rails git:(master) ✗ echo $PATH
/home/matt/.rvm/gems/ruby-1.8.7-p371@smsx/bin:/home/matt/.rvm/gems/ruby-1.8.7-  p371@global/bin:/home/matt/.rvm/rubies/ruby-1.8.7-p371/bin:/home/matt/.rvm/bin:/home/matt/.rvm/gems/ruby-1.9.3-p385/bin:/home/matt/.rvm/gems/ruby-1.9.3-p385@global/bin:/home/matt/.rvm/rubies/ruby-1.9.3-p385/bin:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games

➜  rails git:(master) ✗ which gem
gem () {
    typeset result
    (
        typeset rvmrc
    rvm_rvmrc_files=("/etc/rvmrc" "$HOME/.rvmrc") 
    if [[ -n "${rvm_prefix:-}" ]] && ! [[ "$HOME/.rvmrc" -ef "${rvm_prefix}/.rvmrc" ]]
    then
        rvm_rvmrc_files+=("${rvm_prefix}/.rvmrc") 
    fi
    for rvmrc in "${rvm_rvmrc_files[@]}"
    do
        [[ -s "${rvmrc}" ]] && source "${rvmrc}" || true
    done
    unset rvm_rvmrc_files
    command gem "$@"
) || result=$? 
hash -r
return ${result:-0} 
```

}

我正在使用 oh-my-zsh。

# sockets - 为什么在 DNS 中记录后有额外的时间段

> ID：14928707
> 
> 赞同：0
> 
> 时间：2013-02-18T02:41:20.663
> 
> 标签：sockets, networking, dns, network-programming

我在DNS设置中发现，记录后有一段时间。我想知道这是什么原因？

例如`test.test.com.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T02:53:47.307

“点”是 DNS 层次结构的根，在某些系统上，如果您不使用它，DNS 服务器会认为它是当前区域中的记录并将其附加，而不是将其视为 FQDN（完全合格域名）

G

# c# - 无法将 int 类型隐式转换为 system.drawing.size

> ID：14928709
> 
> 赞同：-3
> 
> 时间：2013-02-18T02:41:58.617
> 
> 标签：c#, c#-4.0

这给了我错误“无法将 int 类型隐式转换为 system.drawing.size”

```
myNumericUpDown.MinimumSize = 0; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T02:45:29.523

[Size](http://msdn.microsoft.com/en-us/library/system.drawing.size.aspx)是一个具有两个整数属性的结构。你可以做`myNumericUpDown.MinimumSize = new Size(10,10);`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T02:46:45.363

大小定义为`Width`and `Height`，如果要设置`MinimumSize`，则必须声明一个`Size`对象并设置`Width`and`Height`

例子

```
myNumericUpDown.MinimumSize = new Size(0,0); 
```

或者简单地说：

```
 myNumericUpDown.MinimumSize = Size.Empty 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T02:46:00.420

很清楚编译器在抱怨什么。

该属性是类型`System.Drawing.Size`，您正在尝试使用`int`.

例如：

`myNumericUpDown.MinimumSize = new Size(2,4);`

MSDN 参考[这里](http://msdn.microsoft.com/en-us/library/system.drawing.size.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T02:45:59.943

`MinimumSize`是获得`SIZE`类的属性。

```
myNumericUpDown.MinimumSize = new Size(1,1) 
```

*   [UpDownBase.MinimumSize 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.updownbase.minimumsize.aspx)

但是，如果您的意思是`Minimum`（*获取或设置旋转框的最小允许值*）

```
myNumericUpDown.Minimum = 1 
```

*   [NumericUpDown.Minimum 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.numericupdown.minimum.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T02:45:50.783

`Size`是一个定义在`System.Drawing`

您不能隐式转换 from`Size`到`int`。

```
[SerializableAttribute]
[TypeConverterAttribute(typeof(SizeConverter))]
[ComVisibleAttribute(true)]
public struct Size 
```

你可能是说`myNumbericUpDown.MinimumSize = new Size(1,1);`

# r - 将 ggplot 标题放在绘图的右上角

> ID：14928711
> 
> 赞同：16
> 
> 时间：2013-02-18T02:42:02.417
> 
> 标签：r, ggplot2

我正在使用`theme_minimal()`在 ggplot0.9.3 中找到的具有白色背景的优秀作品。我想将我的情节标题放在情节右上角的自定义位置。在下面的示例中，我知道`x`and`y`值，但我想知道是否有一种方法可以传递`xmax`和`ymax`值来确保文本放置在右上角。理想情况下，文本将是正确的。

```
#example plot
p <- qplot(mpg, wt, data = mtcars, colour = cyl)
p +  annotate("text", x = 30, y = 5, label = "Custom Title")

#what I would like
p + annotate("text", y= ymax, x =xmax_or_RightJustified) 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2015-01-05T10:26:10.663

你可以做

```
p + annotate("text",  x=Inf, y = Inf, label = "Some text", vjust=1, hjust=1) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-18T05:48:06.520

您可以使用函数`max()`和`min()`inside `annotate()`，然后添加`hjust=1`以确保将文本放置在绘图内（对齐）。

```
p + annotate("text", y= max(mtcars$wt), x =max(mtcars$mpg),label="Custom Title",hjust=1) 
```

# ios - 日期计算期间的奇怪错误

> ID：14928714
> 
> 赞同：2
> 
> 时间：2013-02-18T02:42:36.530
> 
> 标签：ios, objective-c, xcode

我创建了一个 iOS 应用程序，它比较各种日期范围并返回范围之间的天数重叠。该应用程序按预期工作，但是当我在模拟器的用户界面中点击“计算”按钮时，控制台返回以下文本（摘录）：

```
 *** -[__NSCFCalendar components:fromDate:toDate:options:]: fromDate cannot be nil
I mean really, what do you think that operation is supposed to mean with a nil fromDate?
An exception has been avoided for now.
A few of these errors are going to be reported with this complaint, then further violations will simply silently do whatever random thing results from the nil.
Here is the backtrace where this occurred this time (some frames may be missing due to compiler optimizations): 
```

该应用程序不会崩溃，Xcode 也不会检测到任何问题。不过，我宁愿不要忽视这一点。有谁知道发生了什么？这是我的代码：

```
NSDate *overlapFrom12_range1 = [range1Start laterDate:startdate1];
    NSDate *overlapTo12_range1   = [range1End earlierDate:enddate2];

    NSInteger days12_range1;
    if ([overlapFrom12_range1 compare:overlapTo12_range1] > 0)
    {

        days12_range1 = 0;
    }
    else
    {
        NSCalendar *calendar = [NSCalendar currentCalendar];
        NSDateComponents *comp = [calendar components:NSDayCalendarUnit fromDate:overlapFrom12_range1 toDate:overlapTo12_range1 options:0];
        days12_range1 = [comp day] +1;
    } 
```

* * *

我将您的建议添加到我的代码中，如下所示：

```
 NSInteger days12_range1;

    if ([overlapFrom12_range1 compare:overlapTo12_range1] > 0)
    {

        days12_range1 = 0;

    }
        else
    {
        if ([date1.text length] > 0 && [date2.text length] > 0)
        {

            NSCalendar *calendar = [NSCalendar currentCalendar];
            NSDateComponents *comp = [calendar components:NSDayCalendarUnit fromDate:overlapFrom12_range1 toDate:overlapTo12_range1 options:0];
            days12_range1 = [comp day] +1;
        }
    } 
```

但是，错误仍然发生......仅当日期文本字段为空时。我是否以错误的方式使用代码片段？

顺便说一句，这是发生错误的“回溯”：

> ( 0 CoreFoundation 0x01cb0c04 -[ **NSCFCalendar 组件：fromDate:toDate:options:] + 84 1 App
> 0x00004de6 -[ViewController 计算] + 598 2 libobjc.A.dylib
> 0x010f2705 -[NSObject performSelector:withObject:withObject:] + 77 3 UIKit 0x000262c0 -[UIApplication sendAction:to:from:forEvent:] + 96 4 UIKit
> 0x00026258 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 61 5 UIKit 0x000e7021 -[UIControl sendAction:to:forEvent:] + 66 6 UIKit
> 0x000e757f - [UIControl(内部) _sendActionsForEvents:withEvent:] + 578 7 UIKit 0x000e66e8 -[UIControl touchesEnded:withEvent:] + 546 8 UIKit
> 0x00055cef -[UIWindow _sendTouchesForEvent:] + 846 9 UIKit
> 0x00055f02 -[UIWindow sendEvent:] + 273 10 UIKit
> 0x00033d4a -[UIApplication sendEvent:] + 436 11 UIKit
> 0x00025698 _UIApplicationHandleEvent + 9874 12 GraphicsServices
> 0x01bfcdf9 _PurpleEventCallback + 339 13 GraphicsServices
> 0x01bfcad0 PurpleEventCallback + 46 14 CoreFoundation
> 0x01c16bf5 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION** + 53 15 CoreFoundation 0x01c16962 __CFRunLoopDoSource1 + 146 16 CoreFoundation 0x01c47bb6 __CFRunLoopRun + 2118 17 CoreFoundation
> 0x01c46f46 0x01c46f46 规范
> 0x01c46e1b CFRunLoopRunInMode + 123 19 GraphicsServices
> 0x01bfb7e3 GSEventRunModal + 88 20 GraphicsServices
> 0x01bfb668 GSEventRun + 104 21 UIKit
> 0x00022ffc UIApplicationMain + 1211 22 App
> 0x00001e5d main +
> App01d853 开始）

更新：

好的，我在我的代码中进行了一些广泛的搜索，最后，使用 NSLog，我能够查明受影响的区域。这是导致问题的代码：

```
NSDateFormatter *dateFormatter1 = [[NSDateFormatter alloc] init]; //allocate and initialize dateformatter1
[dateFormatter1 setDateFormat:@"MM/dd/yyyy"]; //set date format using dateformatter1
NSDate *startdate1 = [dateFormatter1 dateFromString: date1.text]; //set startdate

NSDateFormatter *dateFormatter2 = [[NSDateFormatter alloc] init]; //allocate and initialize dateformatter2
[dateFormatter2 setDateFormat:@"MM/dd/yyyy"]; //set date format using dateformatter2
NSDate *enddate2 = [dateFormatter2 dateFromString: date2.text]; //set enddate

    int days12 = [[[NSCalendar currentCalendar] components:NSDayCalendarUnit                                                   fromDate:startdate1 toDate:enddate2 options:0] day] + 1;

    result12.text = [[NSString alloc] initWithFormat:@"%i", days12];

NSLog (@"Startdate1 is %@ and Enddate2 is %@.", startdate1, enddate2); 
```

NSLog 显示 startdate1 和 enddate2 都是（null）。如果 startdate1 和 enddate2 > 0，我将创建一个 if 语句来仅计算 days12（和 result12），但我必须稍后使用 date12 变量，所以它不起作用。还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:07:15.517

好吧，我想通了。这是我修复它的方法：

```
int days12;

    if ([value1 length] == 0)
    {
        days12 = 0;
        result12.text= [[NSString alloc] initWithFormat:@"%i", days12];
    }
    else
    {
        days12 = [[[NSCalendar currentCalendar] components:NSDayCalendarUnit                                                   fromDate:startdate1 toDate:enddate2 options:0] day] + 1;

        result12.text = [[NSString alloc] initWithFormat:@"%i", days12];
    } 
```

感谢您的帮助！

# r - 如何在 rgl 中绘制具有交互作用的回归平面

> ID：14928716
> 
> 赞同：2
> 
> 时间：2013-02-18T02:42:50.303
> 
> 标签：r, plot, regression, interaction, rgl

`rgl`我想使用的交互式绘图系统从具有交互项的模型中绘制回归曲面。使用以下方法很容易为没有交互项的模型绘制回归平面：

```
plot3d(x=x1, y=x2, z=y1, type="s", col="yellow", size=1)
planes3d(a=coef(mod1)[2], b=coef(mod1)[3], c=-1, d=coef(mod1)[1], alpha=.5) 
```

然而，当飞机扭曲时，这似乎更加困难。在这个问题之后：[r 中曲线函数的 3D 等效项](https://stackoverflow.com/questions/11875941/3d-equivalent-of-the-curve-function-in-r)，我正在尝试：

```
f2 <- function(x, y) as.vector(coef(mod2)%*%c(1, x, y, x*y))

curve_3d <- function(f2, x_range=c(0, 40), y_range=c(0, 40)){ 
  if (!require(rgl) ) {stop("load rgl")}

  xvec <- seq(x_range[1], x_range[2], by=1)
  yvec <- seq(y_range[1], y_range[2], by=1)
  fz   <- outer(xvec, yvec, FUN=f2)
  persp3d(xvec, yvec, fz, alpha=.5)
}
open3d()
plot3d(x=x1, y=x2, z=y2, type="s", col="yellow", size=1)
curve_3d(f2) 
```

但是，它不起作用。（我也尝试过其他一些事情，但我保持简短。）到目前为止，我的主要问题似乎是`f2`; 但是，我也希望它看起来像`planes3d`，我不确定这是否会给我一个线框。

这是一个例子：

```
set.seed(897)
x1 = rep(c(0, 10, 20, 30, 40), times=25)
x2 = rep(c(0, 10, 20, 30, 40), each=25)
y2 = 37 + 0.7*x1 + 1.2*x2 - 0.05*x1*x2 + rnorm(125, mean=0, sd=5)
mod2 = lm(y2~x1*x2)
open3d()
plot3d(x=x1, y=x2, z=y2, type="s", col="yellow", size=1)
curve_3d(f2) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T08:21:57.403

```
grd <- expand.grid(x1=unique(x1), x2=unique(x2) )
grd$pred <-predict(mod2, newdata=grd)
persp3d(x=unique(grd[[1]]), y=unique(grd[[2]]), 
              z=matrix(grd[[3]],5,5), add=TRUE) 
```

![在此处输入图像描述](../Images/a4d25f32cba97aa6b0a4c33bf60aca8f.png)

# java - View.INVISIBLE 和 android:invisible 值的区别

> ID：14928717
> 
> 赞同：1
> 
> 时间：2013-02-18T02:42:58.447
> 
> 标签：java, android, textview

我是 Android 开发的新手，所以我正在开发一个简单的应用程序，它隐藏按下某个按钮的 textview，所以在按钮的 OnClick 事件方法的 java 代码中，我将 textview 设置为不可见，我使用了：

```
textView.setVisibility(1); 
```

因为1是[android参考](http://developer.android.com/reference/android/view/View.html#attr_android%3avisibility)中描述的“不可见”的值，但它不起作用，所以在我使用之后

```
textView.setVisibility(View.INVISIBLE); 
```

它有效，那么什么时候使用“1”值？以及为什么 View.INVISIBLE = 4 而不是 1 如android参考所说的那样？

在 android 参考中，我可以看到属性 android:visibility 的值 Invisible 定义为 1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T02:46:52.240

两者是有区别的。根据[Android参考](http://developer.android.com/reference/android/view/View.html#INVISIBLE)

```
textView.setVisibility(1); 
```

与

```
textView.setVisibility(View.IMPORTANT_FOR_ACCESSIBILITY_YES); 
```

如果要隐藏视图，请使用：

```
textView.setVisibility(View.INVISIBLE); 
```

或者

```
textView.setVisibility(4); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T03:12:30.620

这是一个很好的问题，我检查了Android源代码（frameworks/base/core/java/android/view/View.java）

```
case com.android.internal.R.styleable.View_visibility:
    final int visibility = a.getInt(attr, 0);
    if (visibility != 0) {
          viewFlagValues |= VISIBILITY_FLAGS[visibility]; //here is the key to your question
          viewFlagMasks |= VISIBILITY_MASK;
    }
    break; 
```

这是 VISIBILITY_FLAGS 的内容：

```
private static final int[] VISIBILITY_FLAGS = {VISIBLE, INVISIBLE, GONE}; 
```

数组元素的值其实就是[Android Reference中显示的值](http://developer.android.com/reference/android/view/View.html#INVISIBLE)

```
/**
     * This view is visible.
     * Use with {@link #setVisibility} and <a href="#attr_android:visibility">{@code
     * android:visibility}.
     */
    public static final int VISIBLE = 0x00000000;

    /**
     * This view is invisible, but it still takes up space for layout purposes.
     * Use with {@link #setVisibility} and <a href="#attr_android:visibility">{@code
     * android:visibility}.
     */
    public static final int INVISIBLE = 0x00000004;

    /**
     * This view is invisible, and it doesn't take any space for layout
     * purposes. Use with {@link #setVisibility} and <a href="#attr_android:visibility">{@code
     * android:visibility}.
     */
    public static final int GONE = 0x00000008; 
```

所以即使你在 manifest 文件中使用 android:invisible，Android 框架最终还是会调用值为 4 的 setVisibility(...)。

# c++ - 在opencv中连接向量Rect

> ID：14928721
> 
> 赞同：1
> 
> 时间：2013-02-18T02:43:53.860
> 
> 标签：c++, opencv, image-processing

我有两个矩形向量

```
std::vector<cv::Rect>faces;
std::vector<cv::Rect>windows; 
```

我需要将窗口与面孔连接起来......为此我将代码编写为

```
 int fsize=faces.size();
    for(int i=0;i<windows.size();i++)
    {
        faces[fsize]=windows[i];
        fsize++;
    } 
```

但我认为这段代码会造成分段错误......有人知道任何更好的......或任何内置函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T02:47:50.533

使用插入：

```
faces.insert(faces.end(), windows.begin(), windows.end()); 
```

或移动内容：

```
faces.insert(faces.end(), std::make_move_iterator(windows.begin()), 
                          std::make_move_iterator(windows.end())); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T02:48:57.660

您将替换`faces`为`windows`and if`windows`有更多的元素比`faces`您访问的边界之外的`faces`.

如果您真的是说`Concatenating`而不是`replacing`：

```
faces.reserve(faces.size() + windows.size());
faces.insert(faces.end(), windows.begin(), windows.end()); 
```

# php - 变量的 PHP 值未定义

> ID：14928722
> 
> 赞同：1
> 
> 时间：2013-02-18T02:43:58.340
> 
> 标签：php

我在 PHP 代码中收到“通知：未定义的索引：k”。K 是文本字段的名称，我使用 $_GET[] 方法来获取 k 的值。在下面提到的示例中，即使在提交表单后，我也试图保持该值可用。此代码第一次运行良好，但第二次出现上述错误。

```
 <form name="keywordquery" method="get" action="keywordsearch.php">
<fieldset class="fieldsetclass"><legend class="legendclass">Search by 
     Keywords</legend>
    <div id="searchbox">
   <input type="text" name="k" value="<?php if(isset($_GET['k'])){echo  
   htmlentities($_GET['k']);} ?>" style="border: 1px, thin; width:92%; "/> <input     
    type="image" style="margin-bottom: 0; margin-top: 2px;" src="search.png" 
    value="submit" />
</div>
</fieldset>
    </form>
   </div>
  <table id="dataTable" cellpadding="0" cellspacing="0" border="1" style="border-    
   radius:20px; box-shadow: 9px 5px 8px #7E9044;">
  <tbody>    
<?php
        // PAGINATION Code. check if the starting row variable was passed in the 
    URL or not
  if (!isset($_GET['startrow']) or !is_numeric($_GET['startrow'])) {

  //we give the value of the starting row to 0 because nothing was found in URL
  $startrow = 0;
  //otherwise we take the value from the URL
   } else {
  $startrow = (int)$_GET['startrow'];
   }

$k1 = $_GET['k'];

$term = explode(" ", $k1);
$query = "SELECT * FROM data ";
foreach ($term as $each) {
$i++;
    if($i==1)
    {
        $query .= "WHERE keywords LIKE '%$each%' ";
    }

else {
    $query .= " OR WHERE keywords LIKE '%$each%' ";
}

}

$query .= "LIMIT $startrow, 1";

$connection = mysql_connect("xxxx", "xxxxx","");
if(!$connection)
echo "No database connected";
$dbase = mysql_select_db("xxxxxxxx", $connection);
if(!$dbase)
echo "No datatable connected";
$ourquery1 = mysql_query ($query);
if(!$ourquery1)
echo "No query found";

$row1 = mysql_num_rows ($ourquery1);
if ($row1 > 0)
{

    while($result = mysql_fetch_assoc($ourquery1))
    {
        echo "<tr>";
        $title = $result['title'];
        $link = $result['link'];
        $region = $result['region'];
        $sector = $result['sector'];
        $theme = $result['theme'];      
        echo "<td> <a href=$link><h3>$title<h3></a>";
        echo "<h4>Sector: $sector&nbsp; &nbsp; &nbsp; 
                    &nbsp; &nbsp; &nbsp; Theme: $theme &nbsp; 
        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> Region: $region </td>";
    }
}

    echo "</tbody>";
       echo '<a href="'.$_SERVER['PHP_SELF'].'?startrow='.($startrow+1).'">Next</a>';
       echo '<a href="'.$_SERVER['PHP_SELF'].'?startrow='.($startrow-1).'">Prev</a>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:09:18.467

替换行： $k1 = $_GET['k'];

类似于： $k1 = isset($_GET['k'])? $_GET['k'] : $default_k_value;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T03:15:41.173

您没有显示完整的表格，因此很难判断出了什么问题，但这里有一个提示。将 $_GET 与 $_REQUEST 交换。

例子：

```
<?php if(isset($_REQUEST['k'])){echo  
   htmlentities($_REQUEST['k']);} ?> 
```

如果表单使用 POST 方法，则该值将在 $_POST 中。如果表单使用 GET 方法，则该值将在 $_GET 中。但是 $_REQUEST 将包含表单字段，无论表单使用的是 POST 还是 GET。

# php - 链接在 Chrome 中有效但在 IE 中无效？

> ID：14928726
> 
> 赞同：0
> 
> 时间：2013-02-18T02:44:31.207
> 
> 标签：php, html, internet-explorer, google-chrome, href

所以我刚刚建立了一个新页面，链接在我的本地机器上的 Chrome 和 IE 10 中工作，但是当我将网站上传到我的服务器时，链接只能在 chrome 中工作？IE 的行为就像那里什么都没有？

这是后面的代码，如果您想自己尝试，这里是链接。我什至还没有尝试过Firefox。恐怕那会怎样。

[http://www.AnthonyRussell.info](http://www.AnthonyRussell.info)

提前致谢！

```
 <hr>
    <a href="index.html"><button style="width:180px; height:40px" >Home</button></a>
    <a href="bio.html"><button style="width:180px; height:40px">Biography</button></a>
    <a href="projects.html"><button style="width:180px; height:40px">Projects</button></a>
    <a href="resume.html"><button style="width:180px; height:40px">Abv Resume</button></a>
    <a href="goals.html"><button style="width:180px; height:40px">Goals</button></a>
    <a href="contact.html"><button style="width:180px; height:40px">Contact</button></a>
    <hr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:52:21.717

你不能有一个`<button>`inside`<a>`标签。你想做什么来需要一个按钮元素？

更新：

有关更多信息和可能的解决方法，请尝试：

[锚链接内的按钮在 Firefox 中有效，但在 Internet Explorer 中无效？](https://stackoverflow.com/q/802839/1306351)

但我会说设计自己的 CSS 按钮会更好。如果您时间紧迫，请尝试[http://www.cssbuttongenerator.com/ 。](http://www.cssbuttongenerator.com/)

# r - R - 回归中仅与一个因子水平的交互作用

> ID：14928730
> 
> 赞同：9
> 
> 时间：2013-02-18T02:45:11.673
> 
> 标签：r, lm

在回归模型中是否可以只包含与一个因子的一个虚拟变量的交互？例如，假设我有：

```
x: numerical vector of 3 variables (1,2 and 3)
y: response variable
z: numerical vector 
```

是否可以建立一个模型，如：

```
y ~ factor(x) + factor(x) : z 
```

但只包括与一级的交互`X`？我意识到我可以为每个级别创建一个单独的虚拟变量`x`，但如果可能的话，我想简化一些事情。

非常感谢任何输入！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T03:41:11.200

您缺少的一个关键点是，当您看到诸如 之类的显着影响时`x2:z`，这并不意味着`x`与`z`when相互作用`x == 2`，而是意味着*与*（或您的参考水平）*之间的差异与 z 相互作用。`x == 2``x == 1`*这不是与`x`交互的级别`z`，而是为 设置的对比之一`x`。

因此，对于具有默认处理对比的 3 水平因子：

```
df <- data.frame(x = sample(1:3, 10, TRUE), y = rnorm(10), z = rnorm(10))
df$x <- factor(df$x)
contrasts(df$x)
  2 3
1 0 0
2 1 0
3 0 1 
```

如果您真的认为只有第一个对比很重要，您可以创建一个新变量来比较`x == 2`并`x == 1`忽略`x == 3`：

```
df$x_1vs2 <- NA
df$x_1vs2[df$x == 1] <- 0
df$x_1vs2[df$x == 2] <- 1
df$x_1vs2[df$x == 3] <- NA 
```

然后使用它运行你的回归：

```
lm(y ~ x_1vs2 + x_1vs2:z) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:49:02.567

```
X <- data.frame(x = sample(1:3, 10, TRUE), y = rnorm(10), z = rnorm(10))
lm(y ~ factor(x) + factor(x):z, data=X) 
```

是你想要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T02:54:42.860

像这样的东西可能是你需要的：

```
y~factor(x)+factor(x=='SomeLevel'):z 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T03:03:21.647

如果`x`已编码为数据中的一个因素，例如

```
y ~ x + I(x=='some_level'):z 
```

或者，如果`x`在您的数据框中是数字类型，那么

```
y ~ as.factor(x) + I(as.factor(x)=='some_level'):z 
```

或仅对数据的某些子集进行建模，请尝试：

```
lm(y ~ as.factor(x) + as.factor(x):z, data = subset(df, x=='some_level')) 
```

# ios - 在 iOS 中合成 CGFloat 属性

> ID：14928731
> 
> 赞同：1
> 
> 时间：2013-02-18T02:45:13.570
> 
> 标签：ios, properties

我声明了一个属性如下。从我在网上的阅读中，不清楚我是否也应该如下合成。我已经看到支持两种不同方法的博客文章。

```
@property (assign, nonatomic) CGFloat someFloat; 
```

然后在实现中：

```
@synthesize someFloat = _someFloat; 
```

在某些情况下，我也看到过：

```
@synthesize someFloat; 
```

从阅读中，我了解到“someFloat”是一个属性名称，而“_someFloat”是通过综合创建的。所以我的印象是第一种方法是正确的。但是，我使用第二种方法没有问题。我在其他代码和博客中看到了第二种方法。

**有人可以告诉我正确的方法是什么，为什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T02:50:32.507

一般来说，您不再需要手动编写`@synthesize`。在你的例子中，如果你写

```
@property (assign, nonatomic) CGFloat someFloat; 
```

编译器会自动为你合成，相当于你写

```
@synthesize someFloat = _someFloat; 
```

因此，您将能够通过使用来访问属性`self.someFloat`或访问实现文件中的 ivar `_someFloat`。

但是，如果您像这样手动合成它

```
@synthesize someFloat; 
```

编译器会自动创建一个名为`someFloat`... 的支持 ivar，因此，您仍然可以通过 getter 访问该变量`self.someFloat`（即相当于`[self someFloat]`调用）。

`someFloat`或者，您可以通过简单地使用实现中的某处来访问 ivar ...

一般来说，不建议这样合成，因为当您打算使用 getter 访问变量时，很容易意外使用 ivar。

**规则的例外**

然而，在某些情况下，编译器有时仍会对综合变量感到困惑。例如，如果您有一个是 的子类的类，那么`NSManagedObject`您仍然*需要*`@synthesize`手动编写（当然，假设您实际上想要合成该属性......但您可能不会......）。

这样做的原因有两个：（1）编译器似乎还没有很好地理解这些属性（或者至少在我使用过的情况下它没有），以及（2）很多次，您实际上**不想**在子类上设置`@synthesize`属性`NSManagedObject`......相反，您希望它们是`@dynamic`（因此 getter/setter 将在运行时根据`NSManagedObject`子类魔法的要求生成）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T02:50:47.487

只需跳过该`@synthesize`语句，编译器将生成与您相​​同的内容：

```
@synthesize someFloat = _someFloat; 
```

# java - 在 Derby 数据库中，“用户名”和“表所有者”是如何关联的，设置它们的简单方法是什么？

> ID：14928740
> 
> 赞同：0
> 
> 时间：2013-02-18T02:46:01.630
> 
> 标签：java, hibernate, derby, squirrel-sql

我正在使用 Derby 来学习 Hibernate；我曾经把它作为一个嵌入式数据库，但是我用数据填充它的 ant 工作遇到了麻烦，所以我正在切换到网络版本。

除了我的 Java/Hibernate 程序，我还使用 Squirrel 客户端访问数据库。我只想要一个尽可能简单的设置；我什至不需要正常的安全性、加密等。

我一直在使用 Squirrel 创建数据库，并使用 sql 脚本创建表。然后我从 Eclipse 中运行一个 ant 作业，将数据放入表中。当我只有一个嵌入式数据库时，ant 脚本会加载一条记录，然后说数据库“已经打开”；我切换到网络服务器模式以允许 ant 脚本执行多个记录。

松鼠客户端拒绝连接，除非有非0长度的用户名和密码，所以我输入了admin/admin。

当我这样做时，数据库表似乎以某种方式组织在用户名下。squirrel 中的“对象”窗口显示了数据库名称、ADMIN 和它下面的一些其他内容、TABLE 和 ADMIN 下的一些其他内容，然后是我在 ADMIN 下创建的表。ADMIN 没有出现在 Sql 脚本中，只出现在我用来创建和登录数据库的用户名中，所以我假设表在 ADMIN 下，因为那是我的用户名；我不知道它还会从哪里来。

无论我是否将“username=admin;password=admin”放在我的休眠配置中的 URL 上，它都表示我尝试添加的（第一个）表不存在。

那么有人可以告诉我我必须做什么才能让 Squirrel 和 Java/Hibernate 在 Derby 数据库中访问彼此相同的表吗？我认为对上述术语的基本理解——用户名、模式、qualifiedName 和 simpleName，因为它们被 Squirrel 和/或 Derby 使用，可能会起到作用。

这是表创建之一：

```
create table AdUser
(   id bigint generated by default as identity (start with 1),
    name varchar(255),
    password varchar(255),
    primary key (id),
    unique(name)
); 
```

这是休眠配置文件：

```
<property name="hibernate.connection.url"> jdbc:derby://localhost:1527/C:/Users/rcook/workspaceGalileoLaptop/BHChap3/BegHibernateDB;username=admin;password=admin</property>
<property name="hibernate.connection.driver_class"> org.apache.derby.jdbc.ClientDriver40 </property>
<!--  <property name="hibernate.connection.username">sa</property>  -->
<!--  <property name="hibernate.connection.password"></property> -->
<property name="hibernate.dialect">   org.hibernate.dialect.DerbyDialect  </property>

<property name="hibernate.connection.pool_size">0</property>
<property name="hibernate.show_sql">false</property> 
```

让我重复一遍；这适用于嵌入式数据库中的一条记录，因此我相信用于连接、创建映射对象、提交等的代码都可以正常工作；但我确信我在使用两种访问方法的登录时做错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:16:42.903

每个数据库内部确实有一个中间级别的表组织，称为“模式”；您可以在此处阅读有关 Derby 架构实现的更多信息：http: [//db.apache.org/derby/docs/10.9/ref/rrefschemaname.html](http://db.apache.org/derby/docs/10.9/ref/rrefschemaname.html)

请注意，架构名称默认为您的用户名，但您始终可以在查询中明确指定架构名称：

```
select * from admin.aduser; 
```

访问不同的表

```
select * from rcook.aduser; 
```

# assembly - nasm中$$的真正含义是什么

> ID：14928741
> 
> 赞同：4
> 
> 时间：2013-02-18T02:46:07.980
> 
> 标签：assembly, nasm, segment

`$$`在 NASM 中定义为当前段地址。但它的真正含义是什么？我写了两个`asm`文件来测试它：

***a.asm***

```
extern another

[section .text]
global _start
_start:
    mov ebx, $$
    call another 
```

***b.asm***

```
[section .text]
global another
another:
    mov eax, $$
    ret 
```

***编译***

```
nasm -f elf a.asm -g
nasm -f elf b.asm -g
ld -o test a.o b.o 
```

使用 gdb 调试最终文件`test`，我发现虽然我定义了两个同名的部分，但`$$`两个文件中的部分不同。所以我猜：

1.  一旦我在文件中定义了一个部分， 的值`$$`就是该部分的起始地址。并且`$$`与所谓的段寄存器（cs，ss，fs，gs，.etc）无关。
2.  如果我在其他文件中定义了另一个具有相同名称的部分，它将被解释为不同的部分。但是如果同名的两个section定义在同一个文件中，无论它们之间是否有其他的section定义，总是被解释为同一个section，具有相同的`$$`值。如下所示，这两个`.text`部分是一样的。

    ```
    [section .text]
    global _start
    _start:
        mov ebx, $$

    [section .d]
    d:
        mov ecx, $$ 

    [section .text]
    another:
        mov eax, $$
        ret 
    ```

3.  我想有一些 NASM 可以识别的部分名称，并在编译时将它们放在正确的位置。比如`.data`，那么这些 NASM 可以识别并对其进行操作的部分名称是什么？非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T09:36:29.393

`$$`是当前节的开始地址。它是一个可重定位的值（不是“标量”——您会在错误消息中找到这个词，但在手册中却没有）。它是一个偏移量，所以不关心段寄存器中的内容。

*   文档：[https ://www.nasm.us/doc/nasmdoc3.html#section-3.5](https://www.nasm.us/doc/nasmdoc3.html#section-3.5)
*   引导扇区的示例用例：[https ://www.nasm.us/doc/nasmdo13.html#section-13.1.3](https://www.nasm.us/doc/nasmdo13.html#section-13.1.3)
*   相关：[$ 究竟是如何在 NASM 中工作的？](https://stackoverflow.com/questions/47494744/how-does-work-in-nasm-exactly)（因为`$$`通常与 一起使用`$`）。

关于它唯一有用的是`$ - $$`，到目前为止该部分的长度。`$ - $$`是一个“标量”（标签之间的任何差异），并且可以用于表达式中，否则会导致 Nasm 抱怨“不是标量值”。

Nasm“已知”的部分名称取决于输出格式 - “-f obj”根本不知道。`.text`, `.data`, 并且`.bss`非常通用 - 一些输出格式知道其他格式。找到它们的最佳位置是手册中的“输出格式”章节。[http://www.nasm.us](http://www.nasm.us)如果您没有下载手册。这些名称区分大小写，并且以“.”开头。是必须的。

我觉得这里有一个我错过的“问题”。你到底想做什么？

# ios - 非动画故事板转场

> ID：14928742
> 
> 赞同：0
> 
> 时间：2013-02-18T02:46:21.413
> 
> 标签：ios, xcode, uinavigationcontroller, storyboard, uinavigationbar

我有一个应用程序，其中有一个 ViewController，一旦按下按钮，它就会转到 DetailViewController。在 ViewController 中，我隐藏了导航栏以便有更多空间来显示图像，而在 DetailViewController 中这是必要的。

当我点击 DetailViewController 中的后退按钮时，它会返回，但是因为它有一个导航栏并且 ViewController 没有动画的 segue 看起来很糟糕。我想知道，有没有办法让默认的后退按钮（嵌入导航控制器时出现）给你一个**非动画**的转场？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:01:38.543

尝试使用`[[self navigationController] setNavigationBarHidden:{YES,NO} animated:{YES,NO}];` in`view{Will,Did}{Dis}appear`而不是通过 Xcode UI 控件设置所有内容

使用它们也可以通过动画获得良好的效果。

* * *

但是，如果您真的想删除整个动画：[单击导航栏中的“返回”按钮时阻止动画？](https://stackoverflow.com/questions/3119528/prevent-the-animation-when-clicking-back-button-in-a-navigation-bar)

# cordova - Phonegap 草坪椅适配器

> ID：14928744
> 
> 赞同：1
> 
> 时间：2013-02-18T02:46:33.863
> 
> 标签：cordova, local-storage, lawnchair

我应该在 phonegap 中使用哪个适配器来覆盖最多的 android 和 iOS 设备？除了为应用程序提供云存储之外，如果 phongap 文件 Api 是一个不错的选择，还有什么是备份数据的好选择？

# mysql - MYSQL 如果不喜欢 A 然后喜欢 B

> ID：14928745
> 
> 赞同：0
> 
> 时间：2013-02-18T02:46:34.943
> 
> 标签：mysql, sql, case, sql-like

我想做一个 sql 查询 l 但我如何在 SQL SELECT 语句中执行 IF...THEN ，例如：“从 table1，table2 中选择名称，其中 if(name like a then name like a) else name like b”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T02:48:48.240

您可以使用`OR`连接两个布尔子句的运算符：

```
WHERE name LIKE ...
   OR name LIKE ... 
```

请注意，`OR`它的优先级低于`AND`，因此如果要将其与其他限制结合使用，则需要使用括号；例如：

```
WHERE ( name LIKE '%a%' OR name LIKE '%b%' )
  AND id < 1000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T02:55:24.877

SQL 不是一种编程语言，它没有 if、then、else 等。如果所需的条件可以用 AND 和 OR 等集合操作表示，那么您就可以做到。

否则，您需要编写存储过程、存储函数或存储例程。请参阅[http://dev.mysql.com/doc/refman/5.1/en/stored-routines.html](http://dev.mysql.com/doc/refman/5.1/en/stored-routines.html)，这将允许您编写程序代码。集合操作通常要快得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T02:56:43.897

MySQL 支持`IF`语句和`CASE`语句。假设 a 和 b 是其中一个表中的列，并且 name 是另一个表中的列，请尝试这样的操作：

```
 select name 
    from table1,table2
    where name like 
       case 
          when name like a 
          then a
          else b
       end 
```

还有一些示例小提琴：[http ://sqlfiddle.com/#!2/c6ce6/1](http://sqlfiddle.com/#!2/c6ce6/1)

您可能希望在 LIKE 查询中使用 '%' —— 如果是这样，则相应地 CONCAT。如果需要，可以将相同的逻辑用于字符串值。

请发布您的表结构、示例数据和所需的输出，以便我们能够完全理解您的问题并提供最佳答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T03:02:40.120

曾经尝试过 mysql 存储过程[http://www.mysqltutorial.org/getting-started-with-mysql-stored-procedures.aspx](http://www.mysqltutorial.org/getting-started-with-mysql-stored-procedures.aspx)吗？

您可能想检查一下：[使用“if”和“else”存储过程 MySQL](https://stackoverflow.com/questions/6326082/using-if-and-else-stored-procedures-mysql)

希望这可以帮助！:)

# objective-c - 忽略 cocos2d 中精灵的透明区域

> ID：14928748
> 
> 赞同：0
> 
> 时间：2013-02-18T02:47:03.903
> 
> 标签：objective-c, cocos2d-iphone

我已经被困了好几个星期，现在试图弄清楚如何忽略对精灵透明区域的触摸。我一直在尝试使用本教程来跟踪像素完美碰撞 - [http://www.learn-cocos2d.com/2011/12/fast-pixelperfect-collision-detection-cocos2d-code-1of2/](http://www.learn-cocos2d.com/2011/12/fast-pixelperfect-collision-detection-cocos2d-code-1of2/)无济于事。这是我的代码目前的样子：

```
-(void)checkTap:(CGPoint)touch{
BOOL yesNo = NO;
if(yesNo == NO)
{
    sprTap.position = ccp(touch.x, touch.y);
}}

-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
NSSet *allTouch = [event allTouches];
UITouch *touch = [[allTouch allObjects]objectAtIndex:0];
CGPoint location = [touch locationInView:[touch view]];
location = [[CCDirector sharedDirector]convertToGL:location];

[self checkTap:location];
touchFlag = 0;

for(int i = 0; i < [sprArray count]; i++)
{
  KKPixelMaskSprite *sprite = (KKPixelMaskSprite *)[sprArray objectAtIndex:i];
        if([sprTap intersectsNode:sprite])
        {
            selectedSprite = sprite;
            touchFlag = 1;
            break;
        }
}}

-(void)ccTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
NSSet *allTouch = [event allTouches];
UITouch *touch = [[allTouch allObjects]objectAtIndex:0];
CGPoint location = [touch locationInView:[touch view]];
location = [[CCDirector sharedDirector]convertToGL:location];

[sprTap setPosition:location];
if(touchFlag == 1)
{
  _spriteTouch = TRUE;
  [selectedSprite setPosition:location];
}
else
{
  for(int i = 0; i < [sprArray count]; i++)
  {
      KKPixelMaskSprite *sprite = (KKPixelMaskSprite *)[sprArray objectAtIndex:i];
                if([sprTap intersectsNode:sprite])
                {
                    selectedSprite = sprite;
                    touchFlag = 1;
                    break;
                }
            }
        }
}} 
```

问题是当 sprTap 的边界框与精灵的边界框相交时，它会同时移动，因为我的精灵不是完美的正方形，所以不会这样做。我也试过 pixelMaskIntersectsNode 但这似乎也不起作用。我怎么能忽略对精​​灵透明部分的触摸？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:10:37.797

您可以使用 CGMutablePathRef 来检测透明部分：

[请参阅我在此线程](https://stackoverflow.com/questions/12333822/detect-transparent-part-on-the-sprite-in-cocos2d/12516903#12516903)中的答案。

有关如何创建 CGPath 的信息：[这里](https://stackoverflow.com/questions/14953630/cgpath-is-not-detected-properly-in-cocos2d/14954003#14954003)

欲了解更多信息，请[点击这里](http://bobueland.com/cocos2d/2011/the-magic-of-cgpaths/)

# ruby-on-rails - 嵌套模型形成 Rails 3

> ID：14928749
> 
> 赞同：3
> 
> 时间：2013-02-18T02:47:11.423
> 
> 标签：ruby-on-rails

我正在关注 Railscast 196，其中 R Bates 制作了嵌套形式。他有一个调查模型，该模型与一个问题模型有一个 has_many 关联。调查还接受_nested_attributes_for :questions。在surveys_controller 的新操作中，他执行以下操作以在调查表单中创建三个问题字段

```
 def new
    @survey = Survey.new
    3.times { @survey.questions.build }
  end 
```

在 form_for @survey 中，他有以下内容可以在表单中创建问题字段

```
<% f.fields_for :questions do |builder| %>

  <p>
    <%= builder.label :content, "Question" %><br />
    <%= builder.text_area :content, :rows =>  3 %>

  </p> 
```

在视频中，一旦他点击新调查，就会显示三个问题字段（以及表单的其他元素）。表格中与问题相关的元素没有出现在我面前。我认为他在 Rails 3 发布之前制作了这一集，所以可能发生了一些变化，但是，我不知道是什么，除了我没有看到做 3.times 的结果（@survey.questions.build）

模型

```
class Survey < ActiveRecord::Base
  attr_accessible :name

  has_many :questions, :dependent => :destroy
  accepts_nested_attributes_for :questions
end 
```

形式

```
<%= form_for @survey do |f| %>
  <%= f.error_messages %>
  <p>
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </p>

  <% f.fields_for :questions do |builder| %>

  <p>
    <%= builder.label :content, "Question" %><br />
    <%= builder.text_area :content, :rows =>  3 %>

  </p>
  <% end %>
  <p><%= f.submit %></p>
<% end %> 
```

html表单

```
<form accept-charset="UTF-8" action="/surveys" class="new_survey" id="new_survey" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;"><input name="authenticity_token" type="hidden" value="AWvA3/JpixF0C3sO8OzA5mMGsJzknvu99eovYv7M78E="></div>

  <p>
    <label for="survey_name">Name</label><br />
    <input id="survey_name" name="survey[name]" size="30" type="text">
  </p>

  <p><input name="commit" type="submit" value="Create Survey"></p>
</form> 
```

更新

在表格内，我添加了这个

```
 <%= @survey.questions %> 
```

它显示了这个

```
[#<Question id: nil, survey_id: nil, content: nil, created_at: nil, updated_at: nil>, #<Question id: nil, survey_id: nil, content: nil, created_at: nil, updated_at: nil>, #<Question id: nil, survey_id: nil, content: nil, created_at: nil, updated_at: nil>] 
```

所以调查控制器的新操作中的 3.times 显然是有效的，但由于某种原因，当我这样做时，这些字段没有显示

```
<% f.fields_for :questions do |builder| %>

      <p>
        <%= builder.label :content, "Question" %><br />
        <%= builder.text_area :content, :rows =>  3 %>

      </p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T03:10:11.750

我应该在你第一次发帖时就看到了。无论如何，您`=`的`fields_for`. 那应该是

```
<%= f.fields_for :questions do |builder| %> 
```

# c++ - 浮点限制代码不产生正确的结果

> ID：14928764
> 
> 赞同：3
> 
> 时间：2013-02-18T02:49:11.150
> 
> 标签：c++, floating-point, rounding

我绞尽脑汁想弄清楚为什么这段代码没有得到正确的结果。我正在寻找浮点正和负溢出/下溢级别的十六进制表示。该代码基于此站点和[Wikipedia 条目](http://steve.hollasch.net/cgindex/coding/ieeefloat.html)：

**7f7f ffff ≈ 3.4028234 × 10 ^(38)** （最大单精度）——来自维基百科条目，对应于正溢出

这是代码：

```
#include <iostream>
#include <cstdio>
#include <cstdlib>
#include <cmath>

using namespace std;

int main(void) {

    float two = 2;
    float twentyThree = 23;
    float one27 = 127;
    float one49 = 149;

    float posOverflow, negOverflow, posUnderflow, negUnderflow;

    posOverflow = two - (pow(two, -twentyThree) * pow(two, one27));
    negOverflow = -(two - (pow(two, one27) * pow(two, one27)));

    negUnderflow = -pow(two, -one49);
    posUnderflow = pow(two, -one49);

    cout << "Positive overflow occurs when value greater than: " << hex << *(int*)&posOverflow << endl;

    cout << "Neg overflow occurs when value less than: " << hex << *(int*)&negOverflow << endl;

    cout << "Positive underflow occurs when value greater than: " << hex << *(int*)&posUnderflow << endl;

    cout << "Neg overflow occurs when value greater than: " << hex << *(int*)&negUnderflow << endl;

} 
```

输出是：

> 当值大于时发生正溢出：`f3800000` 当值小于时发生负溢出`7f800000` ：当值大于时发生正下溢：当值大于`1` 时发生负溢出：`80000001`

To get the hexadecimal representation of the floating point, I am using a method described [here](http://forums.devshed.com/c-programming-42/printing-a-float-as-a-hex-number-567826.html):

Why isn't the code working? I know it'll work if positive overflow = `7f7f ffff`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T03:23:28.793

Your expression for the highest representable positive float is wrong. The page you linked uses `(2-pow(2, -23)) * pow(2, 127)`, and you have `2 - (pow(2, -23) * pow(2, 127))`. Similarly for the smallest representable negative float.

Your underflow expressions look correct, however, and so do the hexadecimal outputs for them.

Note that `posOverflow` and `negOverflow` are simply `+FLT_MAX` and `-FLT_MAX`. But note that your `posUnderflow` and `negUnderflow` are actually *smaller* than `FLT_MIN`(because they are denormal, and `FLT_MIN` is the smallest positive *normal* float).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T03:30:36.853

Floating point loses precision as the number gets bigger. A number of the magnitude 2^(127) does not change when you add 2 to it.

Other than that, I'm not really following your code. Using words to spell out numbers makes it hard for me to read.

Here is the standard way to get the floating-point limits of your machine:

```
#include <limits>
#include <iostream>
#include <iomanip>

std::ostream &show_float( std::ostream &s, float f ) {
    s << f << " = ";
    std::ostream s_hex( s.rdbuf() );
    s_hex << std::hex << std::setfill( '0' );
    for ( char const *c = reinterpret_cast< char const * >( & f );
          c != reinterpret_cast< char const * >( & f + 1 );
          ++ c ) {
        s_hex << std::setw( 2 ) << ( static_cast< unsigned int >( * c ) & 0xff );
    }
    return s;
}

int main() {
    std::cout << std::hex;
    std::cout << "Positive overflow occurs when value greater than: ";
    show_float( std::cout, std::numeric_limits< float >::max() ) << '\n';
    std::cout << "Neg overflow occurs when value less than: ";
    show_float( std::cout, - std::numeric_limits< float >::max() ) << '\n';
    std::cout << "Positive underflow occurs when value less than: ";
    show_float( std::cout, std::numeric_limits< float >::denormal_min() ) << '\n';
    std::cout << "Neg underflow occurs when value greater than: ";
    show_float( std::cout, - std::numeric_limits< float >::min() ) << '\n';
} 
```

output:

```
Positive overflow occurs when value greater than: 3.40282e+38 = ffff7f7f
Neg overflow occurs when value less than: -3.40282e+38 = ffff7fff
Positive underflow occurs when value less than: 1.17549e-38 = 00008000
Neg underflow occurs when value greater than: -1.17549e-38 = 00008080 
```

The output depends on the endianness of the machine. Here the bytes are reversed due to little-endian order.

Note, "underflow" in this case isn't a catastrophic zero result, but just denormalization which gradually reduces precision. (It may be catastrophic to performance, though.) You might also check `numeric_limits< float >::denorm_min()` which produces `1.4013e-45 = 01000000`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T03:03:12.327

Your code assumes integers have the same size as a float (so do all but a few of the posts on the page you've linked, btw.) You probably want something along the lines of:

```
for (size_t s = 0; s < sizeof(myVar); ++s) {
    unsigned char *byte = reinterpret_cast<unsigned char*>(myVar)[s];
    //sth byte is byte
} 
```

that is, something akin to the templated code on that page.

Your compiler may not be using those specific IEEE 754 types. You'll need to check its documentation.

Also, consider using `std::numeric_limits<float>.min()`/`max()` or `cfloat` `FLT_` constants for determining some of those values.

# iphone - 如何实现可以在背景上滚动的 UITableView

> ID：14928768
> 
> 赞同：0
> 
> 时间：2013-02-18T02:49:42.070
> 
> 标签：iphone, ios, uitableview

我正在尝试实现一个表格视图，其中表格视图单元格可以在类似于 facebook Poke 应用程序的工作方式的背景上滚动。他们是使用自定义的 uitableview 还是使用 uicollectionview 实现接口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T04:45:14.717

`UIImageView`使用您的背景图像创建一个。然后将表格视图的`backgroundView`属性设置为图像视图。这种方法适用于普通样式表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T03:14:35.700

您可以为表格视图和单元格提供清晰的背景颜色（在 IB 或代码中），并为窗口提供背景颜色——如果您想要背景中的图像，您可以使用 colorWithPatternImage:。

# asp.net - 无法运行空的 ASP.Net MVC 3 应用程序

> ID：14928776
> 
> 赞同：2
> 
> 时间：2013-02-18T02:50:47.300
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, visual-web-developer-2010

我已经安装了：

*   视觉 Web 开发者 2010 速成版
*   [ASP.Net MVC 3](http://www.microsoft.com/en-us/download/details.aspx?id=1491)

我去了**文件**>**新项目**> **ASP.Net MVC 3 Web 应用程序**

我选择了带有**ASPX**视图引擎的**空**模板。VWD 生成了大量文件。

 **当我单击**Run**时，我收到以下错误：

> “/”应用程序中的服务器错误。
> 
> 无法找到该资源。
> 
> 说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。
> 
> 请求的网址：/
> 
> * * *
> 
> 版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.1

我在这里想念什么？是否需要做其他事情才能使其运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T02:53:17.283

是的，这是真的

空应用程序没有定义单个控制器或视图。这一切都取决于你。大多数人都是从应用程序开始的。**

# python - 如何刷新到python中的文件？

> ID：14928782
> 
> 赞同：0
> 
> 时间：2013-02-18T02:51:18.220
> 
> 标签：python, python-2.7, io

我有这个片段并且发生了一件奇怪的事情：

```
out = open("./out.txt","w+")
for line in open("./int.txt","r").readlines():
    for key in dic.keys():
        if line.count(key) > 0:
            line = re.sub(key,dic[key],line)
    print line
    out.write(line) 
```

python shell 的输出是正确的，它包含根据文件切换后的所有行，`dic{}`而`out`文件只包含大约一半的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:53:08.867

文件并不总是立即写入磁盘，它们需要在最后刷新 try out.flush()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T03:08:23.897

我建议使用[该`with`语句](http://docs.python.org/release/2.5.3/ref/with.html)来管理输出文件句柄的上下文，以便它在作用域的末尾关闭（这样当您查看它时，它是最新的）。`for`循环使用您的输入文件为您执行此操作。

```
with open("./out.txt", "w+") as out:
    for line in open("./int.txt", "r"):
        for key in dic.keys():
            if key in line:
                line = re.sub(key, dic[key], line)
        print line,
        out.write(line) 
```

其他一些小改动：

*   `.readlines()`不需要
*   `if key in line:`一旦找到第一个实例，将停止搜索`key`，提高效率。`line`
*   `print line,`不会在`line`.

还要考虑是否`line = line.replace(key, dic[key])`足够，因为您不是在`line`.

# python - Frame 实例没有 __call__ 方法

> ID：14928785
> 
> 赞同：0
> 
> 时间：2013-02-18T02:51:34.960
> 
> 标签：python, tkinter

当您单击虚线时，我正在尝试将虚线更改为实线。相反，单击一行时出现此错误：

```
Traceback (most recent call last):
  File "/Users/dan/Documents/pyCatan/path_engine.py", line 106, in <module>
    root.mainloop()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk/Tkinter.py", line 1017, in mainloop
    self.tk.mainloop(n)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk/Tkinter.py", line 1414, in __call__
    self.widget._report_exception()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk/Tkinter.py", line 1175, in _report_exception
    root = self._root()
AttributeError: Frame instance has no __call__ method 
```

类似问题中的常见原因是污染具有多种用途的变量，但我在这里不这样做。另外，我已经声明了正在调用的方法，这是另一个类似问题中的错误。

这是我的菜鸟代码：

```
from map_gen import MapGen
from gen_board import CatanApp
from Tkinter import *

class PathEngine(object):
    '''Use the configuration options to show or hide certain attributes.'''

    # show the edges explicitly 
    SHOW_EDGES = False 
    # show road intersections as nodes, explicitly
    SHOW_NODES = True
    # color the hexes to their resource color
    COLOR_HEXES = False

    CLICK_ADD_EDGES = True

    # dimensions
    HEIGHT = 600
    WIDTH = 800

    def __init__(self, root):
        self._model = MapGen()
        self._model.gen()
        CatanApp.set_vertices(self._model.get_map())
        self._model.prepare()
        frame = Frame(root, height=PathEngine.HEIGHT, width=PathEngine.WIDTH)
        frame.pack()
        self._canvas = MapDrawer(frame)
        self.render()
        self._canvas.config(height=PathEngine.HEIGHT, width=PathEngine.WIDTH)
        self._canvas.pack()

    def render(self):
        if PathEngine.SHOW_NODES:
            for node in self._model.get_nodes():
                self._canvas.draw_node(*node)
        self.add_edges()

    def add_edges(self):
        for edge in self._model.get_roads():
            if PathEngine.CLICK_ADD_EDGES:
                self._canvas.draw_dashed_edge(edge[0][0], edge[0][1], edge[1][0], edge[1][1])

class MapDrawer(Canvas):
    NODE_RADIUS = 20

    def __init__(self, master):
        Canvas.__init__(self, master)
        self._root = master

    def draw_dashed_edge(self, x1, y1, x2, y2, color=None):
        if color is None:color = "black"
        t = "road_%s_%s" % (str((x1, y1)), str((x2, y2)))
        self.create_line(
            x1,
            y1,
            x2,
            y2,
            fill=color,
            dash=(1, 1),
            width=3,
            tags=("road", t)
        )
        f = lambda event: self.solidify_dashed_edge(t)                  
        self.tag_bind(t, "<Button-1>", f)

    def solidify_dashed_edge(self, tag):
        self.itemconfigure(tag, dash=(0, 1))

    def draw_node(self, x, y, color=None):
        if color is None: color = "white"
        self.create_oval(
            x - MapDrawer.NODE_RADIUS / 2,
            y - MapDrawer.NODE_RADIUS / 2,
            x + MapDrawer.NODE_RADIUS / 2,
            y + MapDrawer.NODE_RADIUS / 2,
            fill=color,
            outline="black"
        )

if __name__ == "__main__":
    root = Tk()
    engine = PathEngine(root)
    root.mainloop() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T03:01:47.667

看起来您在`_root`向您的: 中添加属性时遇到了名称冲突`Canvas`：

```
>>> import Tkinter as tk
>>> a = tk.Canvas()
>>> print a._root
<bound method Canvas._root of <Tkinter.Canvas instance at 0xee1c0>> 
```

这是在没有私有数据的python中工作的危险之一:-)。请注意，这`_root`是一个`Canvas`对象的方法。您使用实例属性覆盖该方法：

```
class MapDrawer(Canvas):
    NODE_RADIUS = 20

    def __init__(self, master):
        Canvas.__init__(self, master)
        self._root = master 
```

`master`对象在哪里`Frame`。

# actionscript-3 - 是否可以在 ActionScript 3 中更改继承的访问修饰符？

> ID：14928792
> 
> 赞同：1
> 
> 时间：2013-02-18T02:52:51.400
> 
> 标签：actionscript-3

我目前正在做一个项目，我有大量的类继承自其他类，这些类继承自其他类等等。它可能比它应该的更复杂，但我是抽象的傻瓜。

无论如何，有时我需要将 getter/setter 从公共更改为私有。我想这并不是真正的需要，而是希望切断子类中预设的东西，但仍需要在父类中公开访问。

所以一个例子是：

```
Class Base {
    public function set label( value:String ):void{};
}

Class A extends Base {}

Class B extends A {
    public function B() {
        super();
        this.label = "stuff";
    }

    override public function set label( value:String ):void {
        //this setter should not be publicly available since the label should not be possible to change in this class
    }
} 
```

目前，在这些情况下，我正在做两件事之一：

1.  覆盖 setter 以不执行任何操作或将其设置为默认值，以便它仍然可以更新/渲染/任何内容
2.  抛出一个错误，说它在该类中不可用

我做了一些搜索，一切似乎都表明这是不可能的，但我从未发现它明确指出这是不可能的。那么是否可以更改继承属性/函数的访问修饰符？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T03:44:53.793

这是不可能的，而且确实不应该，因为它会导致混乱和不可预测的类层次结构。对于初学者来说，如果你做了这样的事情，你就会打破[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)：超类应该始终可以被它的派生类替换。更改 API 显然可以防止这种情况发生 - 如果另一个程序员不小心交换了类型，则可能会导致运行时错误和/或莫名其妙的故障。

如果您正在建模的类具有不同的行为，从而使您“隐藏”其他公共 API 方法，您可能不应该为此使用继承 - 或者可能以不同的方式使用。根据您的描述，我猜想在您的层次结构的大部分中，无论如何您可能应该使用组合而不是继承。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T03:46:52.687

*由于马蒂华莱士*的评论中的原因，这是不可能的。但这并不是一件不寻常的事情。

但是，在您使用的替代方案中，属性所有者是基类，因此它应该始终知道派生类对其自身属性所做的任何事情。

因此，我更喜欢这样的东西，而不是你的 hack：

```
public class Base   {
        protected var _isLabelUsable:Boolean = true;

        public function set label( value:String ):void {
            if (!_isLabelUsable)
                throw new Error("Access of undefined property label.");

            // Set Label here
        }
    }

public class A extends Base {

}

public class B extends A {      
        public function B() {
            super();            
            _isLabelUsable = false; 
        }       
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-05T17:28:17.587

这些都是有效的点，但是......在某些情况下它们都是无效的。给定一个来自外部源的基类。比如，mx:Panel。它具有属性 'titleIcon:Class' 派生类继承了所有属性和功能。但是使用它的人永远不能直接设置 titleIcon，因为派生类的部分功能取决于已知图标名称的可用性。它提供了一个属性 iconName:String。设置它也会设置titleIcon。现在如何防止人们仍然直接设置图标？UI 为 AS3 和 MXML 提供旧属性，编译器（当然）不会抱怨。

如果 titleIcon 是 setter/getter 对（在本例中是），而不是 final，则派生类可以覆盖 setter 并引发错误，而 iconName setter 会将图标类分配给 super.titleIcon。但是，这很笨拙，不适用于最终函数或变量。

如果有办法至少告诉 UI 不再提供该属性或显示警告...

# nsmutablearray - 对 NSIndexPaths 数组进行排序

> ID：14928793
> 
> 赞同：13
> 
> 时间：2013-02-18T02:53:00.763
> 
> 标签：nsmutablearray, nsindexpath

我有一个`NSMutableArray`包含`NSIndexPath`对象的对象，我想按它们`row`的升序对它们进行排序。

最短/最简单的方法是什么？

这是我尝试过的：

```
[self.selectedIndexPaths sortUsingComparator:^NSComparisonResult(id obj1, id obj2) {
    NSIndexPath *indexPath1 = obj1;
    NSIndexPath *indexPath2 = obj2;
    return [@(indexPath1.section) compare:@(indexPath2.section)];
}]; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-18T03:02:13.913

你说你想排序`row`，但你比较`section`。此外，`section`is `NSInteger`，因此您不能在其上调用方法。

修改您的代码如下排序`row`：

```
[self.selectedIndexPaths sortUsingComparator:^NSComparisonResult(id obj1, id obj2) {
    NSInteger r1 = [obj1 row];
    NSInteger r2 = [obj2 row];
    if (r1 > r2) {
        return (NSComparisonResult)NSOrderedDescending;
    }
    if (r1 < r2) {
        return (NSComparisonResult)NSOrderedAscending;
    }
    return (NSComparisonResult)NSOrderedSame;
}]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-18T12:36:13.030

您还可以使用 NSSortDescriptors 来按 'row' 属性对 NSIndexPath 进行排序。

如果`self.selectedIndexPath`是不可变的：

```
NSSortDescriptor *rowDescriptor = [[NSSortDescriptor alloc] initWithKey:@"row" ascending:YES];
NSArray *sortedRows = [self.selectedIndexPaths sortedArrayUsingDescriptors:@[rowDescriptor]]; 
```

或者如果`self.selectedIndexPath`是 a `NSMutableArray`，简单地说：

```
NSSortDescriptor *rowDescriptor = [[NSSortDescriptor alloc] initWithKey:@"row" ascending:YES];
[self.selectedIndexPaths sortedArrayUsingDescriptors:@[rowDescriptor]]; 
```

简单而简短。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-06-13T14:55:47.227

对于可变数组：

```
[self.selectedIndexPaths sortUsingSelector:@selector(compare:)]; 
```

对于不可变数组：

```
NSArray *sortedArray = [self.selectedIndexPaths sortedArrayUsingSelector:@selector(compare:)] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-30T14:01:14.953

迅速：

```
let paths = tableView.indexPathsForSelectedRows() as [NSIndexPath]
let sortedArray = paths.sorted {$0.row < $1.row} 
```

# jquery - 如何隐藏特定的 的并在特定的时候显示它 被点击？

> ID：14928799
> 
> 赞同：0
> 
> 时间：2013-02-18T02:53:22.177
> 
> 标签：jquery

我想要发生的是我想隐藏与其他人相等的`<li>`' s 。并在单击时显示那些s ？`parent_id``<li>``group_id``<li>``'<li>'`

这是我的示例`<ul>`，它是 PHP 生成的。

![在此处输入图像描述](../Images/1e467af498fadf9829b73bcb5c487dd4.png)

PHP代码：

```
foreach($navs as $nav){
                                            echo '<li parent_id="'.$nav['parent_id'].'" group_id="'.$nav['group_id'].'"><a href="#'.$nav['group_id'].'" class="scroll" title="'.$nav['nav'].'">'.$nav['nav'].'</a></li>';
                                        } 
```

样本输出： ![在此处输入图像描述](../Images/35c071be2ac025b040b267afc2837e2e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T03:07:48.003

你可以试试

```
$('#navigitions li[parent_id!="1"]').hide();

function hideSubItems(siblings) {
    if(siblings.length == 0) {
        return;
    }

    siblings.each(function(){
        var siblings = $(this).siblings('[parent_id="' + $(this).attr('group_id') + '"]').hide();
        hideSubItems(siblings)
    });
}

$('#navigitions li').click(function(){
        var siblings = $(this).siblings('[parent_id="' + $(this).attr('group_id') + '"]').toggle();
        hideSubItems(siblings)
    }); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/g4jGX/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T03:04:10.177

```
var ids = [],
    $li = $('li');

// Collect all group IDs
$li.each(function () {
    var group_id = $.attr(this, 'group_id');
    if ( ! ~$.inArray(group_id, ids) ) ids.push(group_id);
})
// Hide any li whose parent_id is in the ids array
.each(function () {
    if ( ~$.inArray($.attr(this, 'parent_id'), ids) ) $(this).hide();
})
// When an li is clicked, show any li whose parent_id is equal to this group_id
.click(function () {
    $li.filter('[parent_id=[' + $.attr(this, 'group_id') + ']').show();
}); 
```

# mysql - vbulletin 3.8：通过mysql添加的新子论坛不会显示

> ID：14928801
> 
> 赞同：0
> 
> 时间：2013-02-18T02:53:36.640
> 
> 标签：mysql, sql, vbulletin

如何使vbulletin显示通过mysql添加的子论坛？

我通过在“论坛”表中插入一个新行在 vbulletin 中添加了一个新的子论坛。但是，该子论坛并没有显示在页面中。然后我尝试在admincp中添加子论坛，然后页面显示最近添加的子论坛和我通过mysql添加的子论坛。

我真的不明白。除了在“论坛”表中插入新行以使其显示在 vbulletin 中之外，在 admincp 中添加子论坛是否还有其他作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:00:10.177

我想当您通过控制面板添加论坛时，它会自动重建信息。

直接在数据库中创建论坛后，尝试通过 ACP > 维护 > 更新计数器重建论坛信息

# ruby-on-rails-2 - 通过 Rails 2.3.17 中的关联扩展注入范围

> ID：14928813
> 
> 赞同：0
> 
> 时间：2013-02-18T02:54:48.947
> 
> 标签：ruby-on-rails-2, scopes

我正在从 Rails 2.3.5 升级到 2.3.17 并且遇到了一个非常模糊的问题。我使用以下扩展在关联访问器中注入范围，并提供自定义构建器：

```
module XYZFilterExtension

  def in_context(context)
    if proxy_owner.context == :abc && context != :admin
      scoped(:conditions => {:startup => false})
    else
      scoped({})
    end
  end

end

module OtherExtension
  def build_with_component_instance(attributes = nil)
    attributes ||= {}
    attributes.reverse_merge!(:parent_id => proxy_owner.component_instance.id)

    instance = build
    instance.build_component_instance
    instance.attributes = attributes

    instance
  end
end

has_many :pages, :extend => [ABCExtension, OtherExtension] 
```

在 Rails 2.3.5 中，我可以调用：

```
Something.pages.in_context(:abc).build_with_component_instance 
```

我会得到一个 Page 对象（它是关联`component_instance`的，构建很复杂，因为它是从另一个方向构建的多态关联）。

现在我得到：

```
undefined method `build_with_component_instance' for #<Class:0x1151dcae8> 
```

检查范围，我能发现的唯一区别是调用`proxy_scope`创建的范围`in_context()`返回 2.3.17 中的 Page 模型和 2.3.5 中的范围。

我不知道从这里去哪里。我无法将范围提取到一个模块中以包含在每个模型中，因为我需要根据`proxy_owner`关联做出决定。

**更新：**似乎问题在于扩展方法在范围的上下文中不可用。很奇怪，但我想这有点道理。不幸的是，我的范围定义和构建扩展都需要了解它们的关联上下文。欢迎任何想法:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T08:28:41.630

我最终没有找到解决这个问题的方法。最后我不得不在它发生的特定情况下避免这个错误。幸运的是，它只在应用程序的几个地方。

# ios - 确定哪个 Storyboard 处于活动状态

> ID：14928817
> 
> 赞同：1
> 
> 时间：2013-02-18T02:56:14.673
> 
> 标签：ios, storyboard

我需要弄清楚如何识别在任何给定时间处于活动状态的情节提要。我有一个专门的天赋，我需要识别情节提要（UIView），然后根据用户按下的内容以编程方式更改内容。

1.  所有故事板都有标识符。
2.  在根视图的 viewDidLoad 中，我有以下内容。

```
- (void)viewDidLoad
 self.topViewController = 
    [storyboard instantiateViewControllerWithIdentifier:@"View1"];
{ 
```

我想做的是确定用户在哪个情节提要上，并根据媒体执行以下 sudo-code

```
- (void)viewDidLoad
if (storyboard.name != RootView)
   self.topViewController = 
    [storyboard instantiateViewControllerWithIdentifier:@"View1"];
{
else if (storyboard.name = View2){
   self.topViewController = 
    [storyboard instantiateViewControllerWithIdentifier:@"View2"];
} 
```

ETC....

我已经逐步完成了代码并看到了 StoryboardID，但是我很确定你不打算使用它......

提前感谢杰里米

更新：导航说明

我正在尝试实现`ECSlideViewController`，但它正在努力。有效地将幻灯片添加到正确的功能以显示更多选项。所以，这种想法很容易被证明是恶心的。我有主人`UIViewController<title:HomeView>`，然后我在屏幕上有 4 个按钮，可以连接到其他按钮`UIViewControllers<View1>`，`UIViewController<View2>`等等。

为了在 View1、View2、View3、View4 上产生效果，我需要将类（`ECSlideViewController`根据示例）带入`UIViewController<HomeView>`. 但是，如果我更改下面的代码来表示这个......

```
self.topViewController = 
    [storyboard instantiateViewControllerWithIdentifier:@"HomeView"]; 
```

它崩溃是因为它调用了自己。不好，循环编码是不行的。

但是如果我将它设置为原来的样子

```
self.topViewController = 
    [storyboard instantiateViewControllerWithIdentifier:@"FirstTop"]; 
```

（顺便说一句 firstTop 是与示例一起使用的视图的标题）

它有效，但随后无视`UIViewController<HomeView>`

这就是为什么我问是否有办法识别`self.title`（`UIViewController`说故事板......我不好），因为我将在它周围放置条件逻辑，以便不将代码放入`UIViewController<HomeView>`.

`ECSlideViewController`除非您下载并开始使用它，否则这真的很难解释。但实际上我只想测试 self.title ......我想......

另一个想法是将逻辑带入`UIViewControllers`四个中并让它在那里工作......但是它通过 nil 吓坏了，因为它期待一个标识符......

希望这是有道理的....

J。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:13:58.447

好的伙计们，

完全抛弃了 ECSlideViewController。我发现一些文章解释了当您有多个 UiViewController 无法正确传递数据时会出现问题。我最终使用了安德鲁斯的建议。[http://www.youtube.com/feed/UCJA_puohXgnze8gPaerTeig](http://www.youtube.com/feed/UCJA_puohXgnze8gPaerTeig) 它对我来说更容易。

虽然我注意到苹果有什么设计指南，这通常是不可以的，但我希望他们不会介意。

再次感谢大家！

J。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:28:43.483

我不确定这是否有帮助，但听起来您必须比较实例才能获得所需的结果。我还没有尝试过，但我会在您的应用程序委托中创建每个故事板的属性，然后在您的视图控制器中引用应用程序委托进行比较。这可能不是最好的编码实践，但我会把它交给你。

类似（未经测试的代码）：

```
- (void)testStoryBoard //After awake from nib or viewDidLoad
 {
    NXAppDelegate *appDelegate = (NXAppDelegate *)[[UIApplication sharedApplication] delegate];
    if ([self.storyBoard isEqual:appDelegate.view1StoryBoard]) 
         NSLog(@"View1 Storyboard");
    else 
         NSLog(@"View 2 Storyboard");
 } 
```

# python - 正则表达式 - 超过 10 个字符

> ID：14928820
> 
> 赞同：3
> 
> 时间：2013-02-18T02:56:28.613
> 
> 标签：python, regex

您如何指示需要超过 10 个字符的正则表达式？我知道 '*' 大于 0，并且 '+' 大于 1，但是要求大于 10 的语法是什么？谢谢大家！！！！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-18T02:57:32.770

您使用大括号表示法。例如，正则表达式`a{10,}`将匹配 10 个或更多`a`字符。`a{10,20}`将匹配至少 10 且不超过 20`a`秒。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-18T02:57:50.523

这取决于您的正则表达式的外观，但这可能会起作用：

```
[^stuff]{10,} 
```

*   `{10,}`至少匹配 10 个。
*   `{,10}`最多匹配 10 个。
*   `{10,15}`匹配 10 到 15 之间。

# pointers - 在 Golang 中传递指向地图的指针

> ID：14928826
> 
> 赞同：9
> 
> 时间：2013-02-18T02:57:21.057
> 
> 标签：pointers, map, go

我在 Go 中创建指向地图的指针时遇到了一些麻烦。如果我正确传递了 map 参数，你能告诉我吗？它将整数值与结构配对。

```
 type symbol_table struct{
                   ---
                   ---
                   ---
    }
    //is the map parameter being called correctly?
func TD(..., symbolMAP *map[int]symbol_table, ...){

                   ---
                   ---
                   ---
    }
    func main(){
               symbolMAP:=make(map[int] symbol_table)
               TD(&symbolMAP)
       } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T15:48:59.910

是的，您正确地传递了它，尽管不是惯用的。正如系统所指出的，传递地图本身而不是指向它的指针几乎总是更好。

现在对整个问题发表评论，Rahul，你不应该“稍后再回到这篇文章”。这不是使用stackoverflow的方式。您提出的问题相对简单（“您能否让我知道我是否正确传递了 map 参数？”）并且您在示例代码中提供了足够的信息，以便提供简单的答案，例如我刚刚给出的答案。您应该接受答案，或者，如果您非常后悔提出问题，请完全删除该问题。

你提到了你可能有的其他问题。这很好，但他们不在这里，没有理由让这个问题处于未回答的状态。当您编写好新问题后，将它们作为新的和单独的问题发布。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-01-19T22:32:57.267

正如评论中已经指出的那样，**不需要将指针传递给 map**。

**地图已经是一种引用**类型。地图的变化将从其他变量中观察到。

另请参阅 Q/A：[Go-Pointer to map](https://stackoverflow.com/q/2809543/772000)。

# python - 为什么python线程中的代码示例中有空格

> ID：14928829
> 
> 赞同：8
> 
> 时间：2013-02-18T02:57:46.043
> 
> 标签：python, multithreading

我正在阅读[PyMOTW 线程帖子](http://www.doughellmann.com/PyMOTW/threading/index.html#thread-objects)

第一个例子：

```
import threading

def worker():
    """thread worker function"""
    print 'Worker'
    return

threads = []
for i in range(5):
    t = threading.Thread(target=worker)
    threads.append(t)
    t.start() 
```

我运行它，得到结果：

```
Worker
-Worker
Worker
-Worker
Worker 
```

是`-`a `space`，格式每次都会不同

但是不知道为什么会有`space`？

有时它也会输出`empty line`，为什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-18T04:17:06.377

如果您检查打印语句的字节码，它看起来像这样：

```
>>> def f():
...  print "Worker"
...
>>> dis.dis(f)
  2           0 LOAD_CONST               1 ('Worker')
              3 PRINT_ITEM
              4 PRINT_NEWLINE
              5 LOAD_CONST               0 (None)
              8 RETURN_VALUE 
```

事实上，打印多个项目会产生多个 PRINT_ITEM 字节码：

```
>>> def g():
...  print "Worker", "Hello"
...
>>> dis.dis(g)
  2           0 LOAD_CONST               1 ('Worker')
              3 PRINT_ITEM
              4 LOAD_CONST               2 ('Hello')
              7 PRINT_ITEM
              8 PRINT_NEWLINE
              9 LOAD_CONST               0 (None)
             12 RETURN_VALUE 
```

为了使多个项目之间有一个空格，文件对象有一个名为 softspace 的标志，指示是否应该在下一个项目之前输出一个空格。PRINT_ITEM 和 PRINT_NEWLINE 的代码大致如下所示：

```
def PRINT_ITEM(f, item):
    if f.softspace:
        f.write(' ')
    f.write(str(item))
    f.softspace = True

def PRINT_NEWLINE(f):
    f.write('\n')
    f.softspace = False 
```

当您一次从多个线程写入标准输出时，这些操作会以随机方式交错。因此，您可以连续拥有两个 PRINT_ITEM，而不是交替使用 PRINT_ITEM 和 PRINT_NEWLINE。如果发生这种情况，您的输出中将有额外的空格，因为两个 PRINT_ITEM 和 softspace 标志会产生额外的空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T04:33:03.867

尝试使用 sys.stdout.write("Worker\n")

# c - Pthread 中的并发

> ID：14928832
> 
> 赞同：0
> 
> 时间：2013-02-18T02:58:05.100
> 
> 标签：c, linux, pthreads

我有 ac 程序在 Linux 内核 2.6.18-194 中运行，服务器有 1 个带有 6 核的超线程 cpu 套接字，线程 1 接收数据，然后线程 2 和线程 3 将线程 1 接收到的数据传递给另一个进程，线程 2 和线程 3 都成功后传完数据，thread1会再次接收数据！！

流动的是 thread1 来源：

```
 DoGetDataFromSocket() ;
        iGlbBOOKReadDone = 0 ;
        iGlbPOSIReadDone = 0 ;
        sem_post(sembook) ;
        sem_post(semposi) ;
        sem_wait(semfinished) ; 
```

以下是thread2和thread3的源码：

```
 if(bThisThreadIsBook==1)
        sem_wait(sembook) ;
    else
        sem_wait(semposi) ;

    DoPassDatatoAnotherProcess() ;

    if(bThisThreadIsBook==1)
    {
        __sync_add_and_fetch(&iGlbBOOKReadDone,1) ;
    }
    else
    {
        __sync_add_and_fetch(&iGlbPOSIReadDone,1) ;
    }

    Pthread_mutex_lock(&DoneMutex) ;
    if(  (iGlbBOOKReadDone == 1) && (iGlbPOSIReadDone == 1) )
        sem_post(semfinished) ;
    Pthread_mutex_unlock(&DoneMutex) ; 
```

它对我来说很好，我尝试删除 thread2 和 thread3 中的 mutex_lock DoneMutex ，它仍然可以正常工作，我很好奇的是，如果 thread2 正在执行 __sync_add_and_fetch(&iGlbBOOKReadDone,1) ，并且 thread3 正在执行 __sync_add_and_fetch(&iGlbPOSIReadDone,1)完全相同的时间，那么两个线程都会将 if( (iGlbBOOKReadDone == 1) && (iGlbPOSIReadDone == 1) ) 设为 false ，并且永远不会调用 sem_post(semfinished) ，但是我做了很多压力测试，这永远不会发生！！它与 __sync_add_and_fetch 函数有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:06:59.687

正如我在评论中提到的，无论您是否使用互斥锁，您都有一个`semfinished`可以发布信号两次的竞争条件，这意味着`thread1`可能不允许线程在未来一轮中完成。

很容易看出，两者都`thread2`可以在通话`thread3`之前同时“到达”空白行。`pthread_mutex_lock()`如果发生这种情况，那么两个线程都会调用`sem_post(semfinished)`.

为了避免这种情况并使代码更易于推理，使您可以确定`thread2`和`thread3 will call`sem_post(semfinished) 中的一个，您可能需要考虑执行以下操作：

*   线程1：

    ```
    DoGetDataFromSocket() ;
    threadDoneCount = 0;
    sem_post(sembook) ;
    sem_post(semposi) ;
    sem_wait(semfinished) ; 
    ```

*   线程 2 和线程 3：

    ```
    if(bThisThreadIsBook==1)
        sem_wait(sembook) ;
    else
        sem_wait(semposi) ;

    DoPassDatatoAnotherProcess() ;

    int doneCount = __sync_add_and_fetch(&threadDoneCount,1) ;

    if (doneCount == 2)
        sem_post(semfinished) ; 
    ```

# android - Android 应用程序错误 - 重复 id 0x7f04000f、标签 null 或父 id 0x0 与 com.google.android.gms.maps.SupportMapFragment 的另一个片段

> ID：14928833
> 
> 赞同：6
> 
> 时间：2013-02-18T02:58:08.843
> 
> 标签：android, android-layout

我正在尝试制作一个简单的 android 应用程序，但无法修复此错误。

该应用程序具有 4 个选项卡固定按钮导航，并且在第 4 个选项卡上并切换到另一个选项卡时会发生错误。在任何其他页面上都可以正常工作，但第 4 个选项卡每次都会导致致命错误。除了 TextView 元素之外，该页面上没有任何内容。谁能帮我找出问题所在或指出正确的方向？

```
02-17 21:48:54.378: E/AndroidRuntime(5543): FATAL EXCEPTION: main
02-17 21:48:54.378: E/AndroidRuntime(5543): android.view.InflateException: Binary XML file line #12: Error inflating class fragment
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at com.example.testthree.MainActivity$MapSectionFragment.onCreateView(MainActivity.java:241)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.support.v4.app.FragmentManagerImpl.attachFragment(FragmentManager.java:1264)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:672)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.support.v4.view.ViewPager.populate(ViewPager.java:1012)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:523)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:495)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.support.v4.view.ViewPager.setCurrentItem(ViewPager.java:476)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at com.example.testthree.MainActivity.onTabSelected(MainActivity.java:95)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at com.android.internal.app.ActionBarImpl.selectTab(ActionBarImpl.java:570)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at com.android.internal.app.ActionBarImpl$TabImpl.select(ActionBarImpl.java:1067)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at com.android.internal.widget.ScrollingTabContainerView$TabClickListener.onClick(ScrollingTabContainerView.java:489)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.view.View.performClick(View.java:4084)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.view.View$PerformClick.run(View.java:16966)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.os.Handler.handleCallback(Handler.java:615)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.os.Handler.dispatchMessage(Handler.java:92)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.os.Looper.loop(Looper.java:137)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.app.ActivityThread.main(ActivityThread.java:4745)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at java.lang.reflect.Method.invokeNative(Native Method)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at java.lang.reflect.Method.invoke(Method.java:511)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at dalvik.system.NativeStart.main(Native Method)
02-17 21:48:54.378: E/AndroidRuntime(5543): Caused by: java.lang.IllegalArgumentException: Binary XML file line #12: Duplicate id 0x7f04000f, tag null, or parent id 0x0 with another fragment for com.google.android.gms.maps.SupportMapFragment
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:285)
02-17 21:48:54.378: E/AndroidRuntime(5543):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
02-17 21:48:54.378: E/AndroidRuntime(5543):     ... 30 more 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-18T03:45:24.030

在我的地图片段中使用以下代码修复它：

```
public void onDestroyView() {
    super.onDestroyView();
    FragmentManager fm = getActivity().getSupportFragmentManager();
    Fragment fragment = (fm.findFragmentById(R.id.map));
    FragmentTransaction ft = fm.beginTransaction();
    ft.remove(fragment);
    ft.commit();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T03:34:55.000

虽然不是标签专家，但我似乎对地图/地图片段有问题。

您是否在所有选项卡中多次包含地图？

我会尝试确保任何添加的片段（和地图片段）的 id 是唯一的。

您可能还会发现删除您不使用的任何片段以减少发生冲突的机会很有用。这可能类似于删除选项卡内当前未显示的片段。但就像我说的，我不是标签方面的专家。

# python - Google App Engine Image API 不一致

> ID：14928835
> 
> 赞同：1
> 
> 时间：2013-02-18T02:58:44.753
> 
> 标签：python, google-app-engine, blobstore

我已使用 blobstore 上传 API 将 8MB、7296 x 5472 像素的图像上传到 GAE。当以原始大小显示时（通过在 URL 末尾附加 =s0），它显示正常，大小和分辨率是正确的，与默认 URL 相同，没有附加任何内容（512 宽度）。但是，当调整到 1920 时，图像大小会跳到 33.45 MB (=s1920)。你可以自己检查这个。

图片网址： http: [//lh5.ggpht.com/8kuSpgSom_kMZ13laFfpuC8UGWu_DGQXOzLKR213jzk3s9rEOC3483bcyfJ1PHfPyRU38GU5faJ7BLbGgSkx2P4ijg](http://lh5.ggpht.com/8kuSpgSom_kMZ13laFfpuC8UGWu_DGQXOzLKR213jzk3s9rEOC3483bcyfJ1PHfPyRU38GU5faJ7BLbGgSkx2P4ijg)

将 =s0 和 =s1920 附加到它。

我在 Firefox 和 Chrome 中都检查了这一点，结果相同。即使图像已完全显示，该页面似乎仍会继续加载。

顺便说一句：最大允许长度不是 1600 吗？为什么1920甚至可以工作？

注意：图片不是我的。[您可以在此处](http://www.meetup.com/KAYAK-GULF-NATURE-COAST-CENTRAL-FLORIDA-RIVERS/photos/7429762/ "原始图像")找到原始图像：

# python - Django中的python AssertionError

> ID：14928838
> 
> 赞同：-1
> 
> 时间：2013-02-18T03:00:18.070
> 
> 标签：python, django

我正在阅读[http://www.djangobook.com/en/2.0/chapter04.html](http://www.djangobook.com/en/2.0/chapter04.html)。我是 python 和 django 的新手，但有 php 的经验。

我遇到了以下情况：

```
>>> t = Template("My name is {{ person.first_name }}.")
>>> class PersonClass3:
... def first_name(self):
... raise AssertionError, "foo"
>>> p = PersonClass3()
>>> t.render(Context({"person": p})) 
```

这给出了以下错误；

```
Traceback (most recent call last):
...
AssertionError: foo 
```

有人介意解释为什么会发生此错误吗？我不确定我是否理解问题所在。我了解第 1,2 和 5 行，但不了解其他行。

谢谢，

账单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:13:35.217

您的代码已经完成了示例试图显示的内容。你“引发”了一个异常，导致你的程序停止执行，因为没有处理程序来处理它。

[本指南](http://www.doughellmann.com/articles/how-tos/python-exception-handling/index.html)可能是一个很好的起点。

# ruby-on-rails - Capistrano 部署失败并显示“无法读取用户名”

> ID：14928840
> 
> 赞同：2
> 
> 时间：2013-02-18T03:00:40.260
> 
> 标签：ruby-on-rails, git, capistrano

我想知道为什么我的上限部署失败。

我正在使用 capistrano。

这是我的 deploy.rb：

```
set :application, "gppb"
set :repository,  "git@github.com:AppSource/gppb.git"
set :scm, :git
set :user, "gppb.com"
set :deploy_to, "/home/gppb.com/apps/#{application}"
set :use_sudo, false
set :keep_releases, 5
# set :scm, :git # You can set :scm explicitly or Capistrano will make an intelligent guess based on known version control directory names
# Or: `accurev`, `bzr`, `cvs`, `darcs`, `git`, `mercurial`, `perforce`, `subversion` or `none`

role :web, "test.gppb.appsource.biz"                          # Your HTTP server, Apache/etc
role :app, "test.gppb.appsource.biz"                          # This may be the same as your `Web` server
role :db,  "test.gppb.appsource.biz", :primary => true # This is where Rails migrations will run

# if you want to clean up old releases on each deploy uncomment this:
# after "deploy:restart", "deploy:cleanup"

# if you're still using the script/reaper helper you will need
# these http://github.com/rails/irs_process_scripts

# If you are using Passenger mod_rails uncomment this:
namespace :deploy do
  task :start do ; end
  task :stop do ; end
  task :restart, :roles => :app, :except => { :no_release => true } do
    run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
  end
end 
```

这是错误：

![在此处输入图像描述](../Images/b3a05330992e05fe2be76864da858e47.png)

要查看完整图像，请单击此处-> [http://d.pr/i/wnIb](http://d.pr/i/wnIb)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:04:38.790

看起来您应该将 :user 设置为“gppbv2”。这是服务器上远程用户的参数。此外，Unix 用户名中不能有句点。

# apache - 通过 Apache CGI 启动 VLC

> ID：14928842
> 
> 赞同：1
> 
> 时间：2013-02-18T03:01:04.663
> 
> 标签：apache, bash, cgi, vlc

这是我试图通过 CGI 与之通信的 shell 脚本

```
#!/bin/bash
echo "Content-type: text/html"
echo ""

QUERY_STRING=4FuSI-LcC54

timeout 600 vlc -vvv http://www.youtube.com/watch?v="$QUERY_STRING" --sout "#transcode{venc=x264{keyint=60,profile=baseline,level=3.0,nocabac},vcodec=x264,vb=150,scale=1,acodec=mp4a,ab=96,channels=2,samplerate=48000}:rtp{dst=10.4.175.251,port=10000,mux=ts}"

echo "VLC Started!" 
```

QUERY_STRING 临时设置为用于测试目的的值。通常，它应该包含 HTTP GET 参数。当我通常从 bash 中调用它时，我可以很好地调用这个脚本而不会出错。但是，如果我尝试从 HTTP GET 请求中调用它，VLC 会崩溃并进入关闭阶段。

# html - WebSocket API 连接问题

> ID：14928843
> 
> 赞同：0
> 
> 时间：2013-02-18T03:01:12.320
> 
> 标签：html, api, cakephp, websocket

我想我在 websocket 连接方面遇到了初学者的问题。

事情是这样的，我正在研究使用 websocket 并遵循以下代码：

```
<!DOCTYPE HTML>
<html>
<head>
<script type="text/javascript">
function WebSocketTest()
{
  if ("WebSocket" in window)
  {
     alert("WebSocket is supported by your Browser!");
     // Let us open a web socket
     var ws = new WebSocket("ws://172.16.0.195:8080/echo");
     ws.onopen = function()
     {
        // Web Socket is connected, send data using send()
        ws.send("Message to send");
        alert("Message is sent...");
     };
     ws.onmessage = function (evt) 
     { 
        var received_msg = evt.data;
        alert("Message is received...");
     };
     ws.onclose = function()
     { 
        // websocket is closed.
        alert("Connection is closed..."); 
     };
  }
  else
  {
     // The browser doesn't support WebSocket
     alert("WebSocket NOT supported by your Browser!");
  }
}
</script>
</head>
<body>
<div id="sse">
   <a href="javascript:WebSocketTest()">Run WebSocket</a>
</div>
</body>
</html> 
```

...我从互联网上复制的。当我测试它时，Firefox 说我的浏览器支持 websocket 功能，但它没有与我的服务器建立连接。我尝试在端口 80 中远程登录我们的服务器，我可以连接到它。但是如果我要在我的页面中使用 websocket 连接，它就不再建立连接了。

非常感谢您提前提供任何输入/帮助。

[编辑] ** 顺便说一句，我指定的 websocket 连接中的“.../echo”是否与它有关？我的意思是，我的服务器中是否必须有一些 echo.php？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:00:09.027

本教程对我帮助很大：

[开始使用 HTML5 的 Web Sockets](http://wickedlysmart.com/getting-started-with-html5s-web-sockets/)

现在我已经设置了我的服务器。

# ios - 使用 AirPlay 时在 AVPlayerDemo 中限制 UISlider 擦洗

> ID：14928844
> 
> 赞同：3
> 
> 时间：2013-02-18T03:01:14.090
> 
> 标签：ios, uislider, avplayer, airplay, apple-tv

在Apple 的[AVPlayerDemo](http://developer.apple.com/library/ios/#samplecode/AVPlayerDemo/Introduction/Intro.html)示例项目的 AVPlayerDemoPlaybackViewController 中设置`mPlayer.usesExternalPlaybackWhileExternalScreenIsActive`为之后，您如何限制擦洗，使其不会落后于 AppleTV？`YES`

我的意思是，当您来回快速移动滑块时，AppleTV 会执行每项`seekToTime`操作，但执行此操作所需的时间比用户滑动所需的时间要长。

该演示的问题之一是它同时使用了“Touch Drag Inside”和“Value Changed”事件，这导致它两次发送相同的值。如果您删除“值已更改”，它会有所改善，但仍然滞后。

我试过四舍五入到整秒，然后只`seekToTime`在第二秒改变时发送，但这似乎没有多大帮助。我真正需要做的是，用户移动滑块的速度越快，发送的命令就越少，而当用户移动的速度越慢时，发送的命令就越多。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T23:39:20.993

UISlider 已经在某种程度上限制了自己。移动得越快，从 A 点到 B 点获得的值就越少。这不足以阻止搜索操作在 AirPlay 上叠加。

但是，您可以使用`seekToTime:completionHandler:`来防止像这样堆积：

```
if(seeking) {
    return;
}

seeking = YES;
[player seekToTime:CMTimeMakeWithSeconds(time, NSEC_PER_SEC) completionHandler:^(BOOL finished) {
    seeking = NO;
}]; 
```

这会丢弃任何新的搜索，直到正在进行的搜索完成。这似乎运作良好。您只需要确保在用户停止擦洗后发送最后一次查找操作。

虽然 NSTimer 可以做同样的事情，但它不太准确，并且结果会根据连接的延迟而有所不同。以这种方式使用的完成处理程序可确保搜索不会堆积，无论延迟时间如何。

我还发现 UISlider 的“Value Changed”动作可以在任何触摸启动动作之前发生。所以最好改用触摸拖动内部/外部动作，这保证在触摸开始后发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-04T07:16:28.157

用一些额外的代码改进了卢克的答案：

```
static NSTimeInterval ToleranceForAsset(AVAsset *asset) {
    NSTimeInterval tolerance = 0.0;
    for (AVAssetTrack *track in asset.tracks) {
        NSTimeInterval trackTolerance = CMTimeGetSeconds(track.minFrameDuration);
        tolerance = MAX(tolerance, trackTolerance);
    }
    return tolerance;
}

@interface MyPlayerWrapper ()

@property (strong, nonatomic) AVPlayer *player;
@property (assign, nonatomic) NSTimeInterval playerTime;
@property (assign, nonatomic, getter=isSeeking) BOOL seeking;
@property (assign, nonatomic) CGFloat latestSetTime;

@end

@implementation MyPlayerWrapper

- (NSTimeInterval)playerTime {
    return CMTimeGetSeconds(self.player.currentItem.currentTime);
}

- (void)setPlayerTime:(NSTimeInterval)playerTime {
    NSTimeInterval tolerance = ToleranceForAsset(self.player.currentItem.asset);
    if (tolerance) {
        // round to nearest seek tolerance (for example 1/30 sec)
        playerTime = floor(playerTime / tolerance) * tolerance;
    }

    self.latestSetTime = playerTime;
    if (self.isSeeking) {
        return;
    }

    self.seeking = YES;
    [self.player seekToTime:CMTimeMakeWithSeconds(playerTime, self.player.currentItem.duration.timescale) toleranceBefore:kCMTimeZero toleranceAfter:kCMTimeZero completionHandler:^(BOOL finished) {
        self.seeking = NO;
        if (ABS(self.player.currentItem.currentTime - latestSetTime) > MAX(tolerance, DBL_EPSILON)) {
            self.playerTime = latestSetTime;
        }
    }];
}

@end 
```

# python - （GAE，Python）如何读取和更新属性值作为原子操作？

> ID：14928846
> 
> 赞同：0
> 
> 时间：2013-02-18T03:01:20.497
> 
> 标签：python, google-app-engine

我想读取一个特定的属性值并相应地更新它。要求是，如果两个或多个进程尝试更新相同的值，则只有一个应该成功，另一个应该失败，因为一旦更改了属性值，第二个进程也尝试更新属性值的基础现在已经过时了。

例如，将属性“status”设置为值“True”，如果它是“False”。现在，如果两个进程最初都读取“False”，然后第一个进程将其更改为“True”，那么第二个进程应该重新读取属性值，而不是将其更新为“True”或只是“阻塞”直到前一次读取-write 完成。（在我们的应用程序中，写操作紧跟在读操作之后，因此需要这是一个原子操作。）

在 Python 2.5 中开发并使用 db.Model。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T06:20:03.433

您想在事务中进行读+写。

[https://developers.google.com/appengine/docs/python/datastore/transactions](https://developers.google.com/appengine/docs/python/datastore/transactions)

# c# - 从 Xml 文件中读取并添加到字符串列表中

> ID：14928849
> 
> 赞同：0
> 
> 时间：2013-02-18T03:01:56.010
> 
> 标签：c#, xml, list, xmlreader, xmlnode

试图从我的电脑上的 XML 文件中读取。该函数使用字符串值来传递静态函数。我想为每笔交易创建一个我猜的所谓的“节点”。我想说数组数组，因为我来自 C++/Java 背景。每个 List 中都有一个内容列表。交易列表，在每个交易中，我都有与该交易对应的股票价值、行动价值、日期价值和股票价值。这就是我到目前为止所拥有的。

XML 文件

```
<stocks>
<transaction>
<ticker>GOOG</ticker>
<action>buy</action>
<date>20071116</date>
<shares>44</shares>
</transaction>
<transaction>
<ticker>IBMX</ticker>
<action>buy</action>
<date>20080104</date>
<shares>350</shares>
</transaction> 
```

C# 代码

```
public static  void readXML(string filename)
    {
        XmlTextReader reader = new XmlTextReader(filename);
        List<List<string>> transList = new List<List<string>>();
        XmlNode node = 

        foreach(var transaction in reader())
        {
            transList.Add(new Transaction(node.get ticker,node.action,node.date,node.shares)

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:38:13.710

```
 public class Transaction
    {
        public string Ticker {get; set;}
        public string Action {get; set;}
        public string Date {get; set;}
        public int NumShares {get; set;}
    }

    private List<Transaction> getTransactionsFromFile(string filename)
    {
        XmlDocument xDoc = new XmlDocument();
        xDoc.Load(filename);
        List<Transaction> tranList = new List<Transaction>();

        foreach (XmlNode x in xDoc)
        {
            if (x.Name == "stocks")
            {
                foreach (XmlNode y in x.ChildNodes)
                {
                    if (y.Name == "transaction")
                    {
                        Transaction tempTran = new Transaction();
                        foreach (XmlNode z in y.ChildNodes)
                        {
                            if (z.Name == "ticker")
                            {
                                tempTran.Ticker= z.InnerText;
                            }
                            if (z.Name == "action")
                            {
                                tempTran.Action= z.InnerText;
                            }
                            if (z.Name == "date")
                            {
                                tempTran.Date = z.InnerText;
                            }
                            if (z.Name == "shares")
                            {
                                tempTran.NumShares = int.Parse(z.InnerText);
                            }

                            if (z.Name == "PassOutputToChildSteps")
                        }
                        //add the constructed Transaction Object to the Transaction List...
                        tranList.Add(tempTran);
                    }
                }
            }
        }
        return tranList;
    } 
```

# assembly - 这些寻址模式有什么区别......？

> ID：14928855
> 
> 赞同：2
> 
> 时间：2013-02-18T03:02:38.053
> 
> 标签：assembly, addressing-mode

寄存器，间接，基数+位移，双重间接和PC相对之间有什么区别。鉴于它们在某些情况下的使用，我不太确定我是否了解如何区分这些不同的寻址模式。有人可以帮我识别它们之间的区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T05:04:59.653

从语法上讲，在汇编代码级别，寻址方式由多种因素决定...

*   使用的 OP 代码（例如，某些操作使用隐式特定的寄存器或寻址模式）
*   操作数：这些是对寄存器、内存还是立即值的引用
*   一些指令，例如字节指令，如`MOV DWORD PTR ...`

然而，操作数和围绕它们的语法通常与确定寻址模式最相关。这可以用 x86 MOV 操作来说明，因为相同或非常相似的语法适用于 x86 系列 CPU 上的其他操作。类似的语法和规则适用于其他处理器，但当然架构上的差异（例如寄存器的列表和角色）以及其他差异使得以下相对于 x86 特定。
`MOV`具有将其第二个参数引用的数据复制到其第一个参数引用的位置的效果。关于这些引用的性质，有许多可能的组合：

```
MOV <reg>, <reg>      ;  register to register
MOV <reg>, <mem>      ;  memory to register
MOV <mem>, <reg>      ;  register to memory
MOV <reg>, <const>    ;  immediate value to register
MOV <mem>, <const>    ;  immediate value to memory 
```

此外，当相应的操作数在括号中时，这些引用可能是间接的。例如 `MOV WORD PTR [ebx], 99` ，将表示为 16 位整数的值 99 移动到 EBX 寄存器指向的内存位置。

此外，括号中的间接内存位置可以表示为*简单*的算术表达式，例如`MOV [esi+eax], dl`。这里，寄存器 DL 中的字节被复制到通过添加 ESI 和 EAX 寄存器的内容找到的内存位置。请注意，这不必只是两个寄存器，它也可以是诸如`[esi + 8*ebx]`or之类的表达式`[esi - 16]`。

考虑到所有这些，这里有一些 MOV 操作的例子：

```
MOV eax, [edx]   ; Copies 4 bytes in memory at the address contained in EDX 
                 ; into EAX the size (4bytes) is implied by the size of EAX.

MOV [MyVar], ebx ; Copies the contents of EBX into the 4 bytes at memory address
                 ; MyVar. (Assumes MyVar is a 32-bit constant).

MOV eax, [esi-4] ; Copies 4 bytes at memory address ESI -4 into EAX

MOV [esi+eax], bl ; Copies the contents of BL (one byte) into the byte at address
                  ; ESI+EAX

MOV BYTE PTR [MyVar], 123 ;  Copies the (decimal) value 123 coded as an 8 bits
                          ; to the memory address contained by MyVar.
                          ; Here the size directive (BYTE PTR) is necessary. 
```

# python - 将python中的双引号shell命令传递给subprocess.Popen（）？

> ID：14928860
> 
> 赞同：59
> 
> 时间：2013-02-18T03:03:07.963
> 
> 标签：python, subprocess

我一直在尝试传递一个命令，该命令仅适用于命令行`"concat:file1|file2"`中 ffmpeg 参数周围的文字双引号。

但是，我不能使用`subprocess.Popen()`. 任何人都知道如何将引号传递给 subprocess.Popen？

这是代码：

```
command = "ffmpeg -i "concat:1.ts|2.ts" -vcodec copy -acodec copy temp.mp4"

output,error = subprocess.Popen(command, universal_newlines=True,
stdout=subprocess.PIPE,
stderr=subprocess.PIPE).communicate() 
```

当我这样做时，ffmpeg 除了在 concat 段周围引用引号外，不会采取任何其他方式。有没有办法成功地将这一行传递给 subprocess.Popen 命令？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-02-18T03:10:59.270

我建议使用列表形式的调用而不是引用的字符串版本：

```
command = ["ffmpeg", "-i", "concat:1.ts|2.ts", "-vcodec", "copy",
           "-acodec", "copy", "temp.mp4"]
output,error  = subprocess.Popen(
                    command, universal_newlines=True,
                    stdout=subprocess.PIPE, stderr=subprocess.PIPE).communicate() 
```

这更准确地表示了将要传递给最终进程的确切参数集，并且无需弄乱 shell 引用。

也就是说，如果您绝对想使用纯字符串版本，只需使用不同的引号（和`shell=True`）：

```
command = 'ffmpeg -i "concat:1.ts|2.ts" -vcodec copy -acodec copy temp.mp4'
output,error  = subprocess.Popen(
                    command, universal_newlines=True, shell=True,
                    stdout=subprocess.PIPE, stderr=subprocess.PIPE).communicate() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-08-23T08:45:01.903

使用单引号`'around the "whole pattern"'`自动转义双精度或显式`"escape the \"double quotes\""`. 您的问题与此无关`Popen`。

只是为了记录，我遇到了一个问题，特别是在 Windows 下`list`传递给`Popen`它的基于 - 的命令**不会**在 glob 模式周围保留正确的双引号（即在[接受的答案中建议的内容）。](https://stackoverflow.com/a/14928914/512111)`' '.join(cmd)`在传递列表之前将列表加入字符串以`Popen`解决问题。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-12-10T05:20:29.240

这适用于 python 2.7.3 自从旧版本的 python 以来，将 stderr 传输到 stdout 的命令已经改变：

把它放在一个名为 test.py 的文件中：

```
#!/usr/bin/python
import subprocess

command = 'php -r "echo gethostname();"'
p = subprocess.Popen(command, universal_newlines=True, shell=True, 
stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
text = p.stdout.read()
retcode = p.wait()
print text 
```

调用它：

```
python test.py 
```

它打印我的主机名，即 apollo：

```
apollo 
```

阅读 subprocess 手册：http: [//docs.python.org/2/library/subprocess.html](http://docs.python.org/2/library/subprocess.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-17T22:20:27.653

我一直在处理类似的问题，通过 ssh 运行相对复杂的命令。它也有多个双引号和单引号。因为我正在通过 , 等管道`python`传输`ssh`命令`powershell`。

如果您可以将命令转换为 shell 脚本，并通过 运行 shell 脚本`subprocess.call/Popen/run`，这些问题就会消失。

因此，根据您是在 Windows 上还是在 linux 或 mac 上，将以下内容放入 shell 脚本中 (`script.sh`或`script.bat`)

```
ffmpeg -i "concat:1.ts|2.ts" -vcodec copy -acodec copy temp.mp4 
```

然后你可以运行

```
import subprocess; subprocess.call(`./script.sh`; shell=True) 
```

无需担心单引号等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-31T06:50:12.557

还在为包含空格的字符串参数而苦苦挣扎，并且不想使用**shell=True**。

解决方案是对内部字符串使用双引号。

```
args = ['salt', '-G', 'environment:DEV', 'grains.setvals', '{"man_version": "man-dev-2.3"}']

try:
    p = subprocess.Popen(args, stdin=subprocess.PIPE
                             , stdout=subprocess.PIPE
                             , stderr=subprocess.PIPE
                        )
    (stdin,stderr) = p.communicate()
except (subprocess.CalledProcessError, OSError ) as err:
    exit(1)
if p.returncode != 0:
    print("Failure in returncode of command:") 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-08T23:42:39.950

任何遭受这种痛苦的人。它也适用于用引号括起来的参数。

```
params = ["ls", "-la"]
subprocess.check_output(" ".join(params), shell=True) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-11T15:06:09.510

您问题中的这行代码不是有效的 Python 语法：

```
command = "ffmpeg -i "concat:1.ts|2.ts" -vcodec copy -acodec copy temp.mp4" 
```

如果你有一个只有这一行的 Python 文件，你会得到一个语法错误。用双引号括起来的字符串文字中不能有双引号，除非它们用反斜杠转义。因此，您可以通过将其替换为以下内容来修复该行：

```
command = "ffmpeg -i \"concat:1.ts|2.ts\" -vcodec copy -acodec copy temp.mp4" 
```

修复这一行的另一种方法是在 Python 中对字符串文字使用单引号，这样当字符串本身包含双引号时 Python 就不会混淆：

```
command = 'ffmpeg -i "concat:1.ts|2.ts" -vcodec copy -acodec copy temp.mp4' 
```

修复语法错误后，您可以使用 using 解决该问题`subprocess`，如[本答案](https://stackoverflow.com/a/14928914/247696)中所述。我还写了这个答案来解释一个有用的[心理模型`subprocess`。](https://stackoverflow.com/a/70668916/247696)

# mysql - 为什么 SELECT MIN(CAST(`field` as SIGNED)) 舍入我的结果值？

> ID：14928867
> 
> 赞同：0
> 
> 时间：2013-02-18T03:03:48.723
> 
> 标签：mysql, sql, min

当我尝试使用此查询时

```
SELECT MIN(CAST(`field` as SIGNED)) 
```

结果最终被四舍五入。因此，我应该得到的不是 7.56，而是 7。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T03:05:28.227

因为您正在使用`SIGNED`，请尝试`DECIMAL`

```
SELECT MIN(CAST(`field` as DECIMAL(10,4))) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d9362/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T03:07:23.200

...CAST（值作为十进制（10,5））

# jquery - 确保至少选中 40 多个单选按钮中的 1 个

> ID：14928873
> 
> 赞同：0
> 
> 时间：2013-02-18T03:04:30.073
> 
> 标签：jquery, jquery-validate

我正在使用 jquery.validate 表单表单验证。问题是表格上有大约 40 个无线电输入，`s1_AM`, `s1_PM`, `s2_AM`, `s2_PM`，每个`radio`输入大约有 10 个。必须检查四个选项中的至少一个，但不是全部四个。如果我`class="required"`输入代码，这是不正确的，因为它需要所有四个选项。我该如何解决这个问题？

理想情况下，id 喜欢保持验证方式不变，但如果收音机为空，则添加警报。

jQuery

```
jQuery.validator.messages.required = "";
$("#enroll").validate({
invalidHandler: function(e, validator) {
    var errors = validator.numberOfInvalids();
    if (errors) {
        var message = errors == 1
            ? 'You missed 1 required field'
            : 'You missed ' + errors + ' required fields';
        $("div.Error span").html(message);
        $("div.Error").show();
    } else {
        $("div.Error").hide();
    }
}
}); 
```

收音机是动态的顺便说一句：

```
if($row['s1_AM_fill'] < $row['s1_AM_cap']) {
   $s1_AM .= '<input type="radio" name="s1_AM" id="s1_AM_'.$id.'" value="'.$id.'" />;
} 
```

再加上三个，`s1_PM`for`s2_AM`和`s2_PM`。

这就是我所做的，除了警报一旦开始，它就不会停止

```
$('#submit').click(function () {$("ul.courses").each(function(){
  $(this).find("input[type=radio]").each(function(){
    alert("You must select at least 1 available course");
});
return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:10:03.610

您不应使用仅可能干扰插件的内置事件处理程序的附加`submit`或处理程序函数。`click`

您只需使用[插件的内置`addMethod()`方法](http://docs.jquery.com/Plugins/Validation/Validator/addMethod)创建一个新规则。像这样的东西...

```
jQuery.validator.addMethod('customrule', function() {
    return ($("input[name='s1_AM']:checked").val() || $("input[name='s1_PM']:checked").val() || $("input[name='s2_AM']:checked").val() || $("input[name='s2_PM']:checked").val());
}, 'Please select from at least one group' ); 
```

新规则检查是否至少`radio`使用了四个组中的一个。该规则的应用如下...

```
$(document).ready(function() {

    $('#enroll').validate({ // initialize the plugin
        rules: {
            's1_AM': {
                customrule: true
            },
            's1_PM': {
                customrule: true
            },
            's2_AM': {
                customrule: true
            },
            's2_PM': {
                customrule: true
            }
        },
        groups: { // use this option to consolidate the four messages into one
            groupname: "s1_AM s1_PM s2_AM s2_PM"
        }
    });

}); 
```

**工作演示：http: [//jsfiddle.net/93jTZ/](http://jsfiddle.net/93jTZ/)**

您需要根据自己的项目规范调整错误放置功能。

其他选项： [http ://docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

# ios - 针对 LinkedIn API 的 OAuth 不断返回 401。这是什么原因造成的？

> ID：14928877
> 
> 赞同：1
> 
> 时间：2013-02-18T03:04:51.593
> 
> 标签：ios, api, oauth, linkedin, afnetworking

我正在使用 AFNetworking、AFOAuth1Client 和 AFLinkedInOAuth1Client 从 LinkedIn 的 API 获取 OAuth 令牌。这一切都运作良好。

当我使用 getPath 拨打电话时，`v1/people/~`我一直收到 401。

如果我将代码中的所有相同值推送到 LinkedIn 控制台，生成的链接将为我提供我所追求的基本个人资料。

是什么导致了 401？我有一种感觉，要么是 AFNetworking，要么是我的配置。

另外，您对如何诊断潜在问题有任何建议吗？

**下面的代码**

```
+ (JJLinkedInClient *)sharedInstance {
    DEFINE_SHARED_INSTANCE_USING_BLOCK(^{
        return [[self alloc] init];
    });
}

- (id)init {

    if ( (self = [super init]) ) {
        _client = [[AFLinkedInOAuth1Client alloc] initWithBaseURL:[NSURL URLWithString:kJJLinkedInAPIBaseURLString]
                                                              key:@"XXXXXXXX"
                                                           secret:@"YYYYYYYY"];

//        [_client registerHTTPOperationClass:[AFJSONRequestOperation class]];
        [_client registerHTTPOperationClass:[AFHTTPRequestOperation class]];
//        [_client setDefaultHeader:@"Accept" value:@"application/json"];
    }

    return self;
}

- (void)authorize:(void(^)())success {

    __block JJLinkedInClient *weakSelf = self;

    [self.client authorizeUsingOAuthWithRequestTokenPath:@"uas/oauth/requestToken"
                                      userAuthorizationPath:@"uas/oauth/authorize"
                                                callbackURL:[NSURL URLWithString:@"XXXXXXX://linkedin-auth-success"]
                                            accessTokenPath:@"uas/oauth/accessToken"
                                               accessMethod:@"POST"
                                                    success:^(AFOAuth1Token *accessToken) {
                                                        NSLog(@"Success: %@", accessToken);
                                                        [weakSelf getProfile];
                                                        success();
                                                    } failure:^(NSError *error) {
                                                        NSLog(@"Error: %@", error);
                                                    }];
}

- (void)getProfile {

    [self.client getPath:@"v1/people/~"
              parameters:nil
                 success:^(AFHTTPRequestOperation *operation, id responseObject) {
                     NSLog(@"%@", responseObject);
                 }
                 failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                     NSLog(@"%@", error);
                 }];    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:38:38.740

问题出在 AFOAuth1Client 内部的 AFPercentEscapedQueryStringPairMemberFromStringWithEncoding 函数中。它不需要转义波浪号，并且需要转义逗号。

由于这是一个静态函数，我认为我不能在 AFLinkedInOAuth1Client 中覆盖它。我会跟进@mattt，看看他说了什么。现在你可以把它改成这个，让它工作：

```
static NSString * AFPercentEscapedQueryStringPairMemberFromStringWithEncoding(NSString *string, NSStringEncoding encoding) {
    static NSString * const kAFCharactersToBeEscaped = @":/?&=;+!@#$(),";
    static NSString * const kAFCharactersToLeaveUnescaped = @"[].~";
//    static NSString * const kAFCharactersToBeEscaped = @":/?&=;+!@#$()~";
//    static NSString * const kAFCharactersToLeaveUnescaped = @"[].";

    return (__bridge_transfer  NSString *)CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (__bridge CFStringRef)string, (__bridge CFStringRef)kAFCharactersToLeaveUnescaped, (__bridge CFStringRef)kAFCharactersToBeEscaped, CFStringConvertNSStringEncodingToEncoding(encoding));
} 
```

# android - Facebook android API函数executeGraphPathRequestAsync没有给出预期结果

> ID：14928878
> 
> 赞同：1
> 
> 时间：2013-02-18T03:04:52.483
> 
> 标签：android, facebook, facebook-graph-api

我试图通过在使用 FB SDK v3 的 android 应用程序中使用 Graph API 来发现用户是否喜欢特定的 facebook 页面。

以下调用起作用并报告用户的所有喜欢以及与每个结果项目有关的所有其他细节。

```
Request.executeGraphPathRequestAsync(session, "me/likes", new Request.Callback() 
```

由于我对任何外围数据不感兴趣，我只想取回 id 以便查找我感兴趣的页面，但是当我添加如下参数时......

```
Request.executeGraphPathRequestAsync(session, "me/likes?fields=id", new Request.Callback() 
```

...调用没有返回任何对象。如果我在 Graph API 资源管理器中发布相同的查询，它们会返回预期的结果。

除了这个问题之外，是否有可能将查询结果限制为仅以页面 ID 开头，因为我已经知道那条信息？我对返回的其余数据没有用处，并且不希望不必要地占用用户带宽。我搜索了高低，似乎不可能。正如示例所暗示的那样，在尝试同时通过用户和页面 ID 进行限制时，即使 FQL 资源管理器也不起作用。将“AND page_id=xxx”添加到查询时，我得到一个空的结果集。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-29T08:44:45.560

据我所知，您无法使用“executeGraphPathRequestAsync”中的字段运行查询。而是使用“Request”并使用“RequestAsyncTask”运行。简短的例子：

```
 String grapPath = "me/home";

        Bundle params = new Bundle();
        params.putString("fields", "type,id,object_id,created_time,from,picture,likes");
        params.putString("limit", "500");

        Request request = new Request(session, grapPath, params, HttpMethod.GET, new Callback()
        {

            @Override
            public void onCompleted(Response response)
            {
                if (response != null)
                {
                    Log.d(TAG_NAME, "response: " + response.toString());
                }

            }
        });

        RequestAsyncTask task = new RequestAsyncTask(request);
        task.execute(); 
```

希望我能帮助你:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T00:01:33.440

Facebook SDK 会将“?access_token”添加到图形路径字符串的末尾。所以图形命令最终看起来像：

```
me/likes?fields=id?access_token 
```

将字段分解为参数包。

在 Facebook 错误帖子中发现此问题已解决：http: [//developers.facebook.com/bugs/314504765319932 ?browse=search_5116b87d245900257505334](http://developers.facebook.com/bugs/314504765319932?browse=search_5116b87d245900257505334)

# java - 抽象类中缺少“AssignmentOperator Expression”？

> ID：14928881
> 
> 赞同：0
> 
> 时间：2013-02-18T03:05:33.000
> 
> 标签：java, assignment-operator

对于以下代码：

```
private double currentTime;
private Queue<ScheduledEvent<S>> diary;

public Simulation() {
    diary = new PriorityQueue<ScheduledEvent<S>>;
} 
```

在一个名为的抽象类`Simulation<S>`中，我得到了以下所有 Eclipse 错误。

*   `Syntax error on tokens, delete these tokens`
*   `Syntax error, insert ">>" to complete ReferenceType2`
*   `Syntax error, insert "AssignmentOperator Expression" to complete Assignment`
*   `Syntax error, insert ";" to complete BlockStatements`

原因是什么？我没有看到任何可能导致这种情况的拼写错误或空作业。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T03:07:46.420

因为你不见了`()`

```
diary = new PriorityQueue<ScheduledEvent<S>>(); 
```

您正在调用构造函数，即使没有传递仍然需要的任何参数`()`

# javascript - 如何使用javascript从段文本中提取xml？

> ID：14928883
> 
> 赞同：0
> 
> 时间：2013-02-18T03:05:42.327
> 
> 标签：javascript, xml

如何使用javascript从段文本中提取xml？

我有一段文字：

```
hello world <a><b>value</b></a> some demo 
```

我想使用javascript提取文本中的xml：

```
 <a><b>value</b></a> 
```

有没有 js 库可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:09:35.833

我推荐[JKL ParseXML](http://www.kawa.net/works/js/jkl/parsexml-e.html)，它是轻量级的，专为此目的而构建。

# loadrunner - 在 Load runner11 中负载测试 vuser

> ID：14928884
> 
> 赞同：0
> 
> 时间：2013-02-18T03:06:34.813
> 
> 标签：loadrunner

我正在使用 Load runner 11.0。是否可以使用具有一个用户 ID 和密码的 1 个脚本在控制器中加载测试 500 个具有唯一密码和用户 ID 的 vuser？或者我是否必须通过发送 500 个用户 ID 和密码来使用 Vugen 脚本中的参数？详细的答案将非常有帮助。我需要尽快得到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:43:35.000

是的，这是可能的。请查看有关 VUGEN 参数化的学生培训文档，了解每个用户使用唯一数据的情况。作为替代方案，您还可以在 PDF 版本的用户手册中找到此信息，这些手册随 LoadRunner 的每个副本一起安装在参数化部分下。

# jquery - IE 9 上未显示 Jquery/ajax 加载的表

> ID：14928887
> 
> 赞同：0
> 
> 时间：2013-02-18T03:06:43.227
> 
> 标签：jquery, ajax, html-table

我有一个由 Jquery/AJAX 加载的表

```
function initializeDaily() {
jQuery.post(
        'ajax-functions.php', 
        {
            'action':'getdailyStatus'
        }, 
        function(response){
            var html = response
            $('#daily_result').append(html) //append to table #daily_result

            var rowid = $('#daily_result tr:first-child').attr('id')

            getDetails(rowid)
        })
} 
```

这将适用于所有其他浏览器，而不适用于 IE9。getDetails(rowid) 会起作用，所以我不相信有语法错误

另一方面，如果我这样做：

```
function initializeDaily() {
jQuery.post(
        'ajax-functions.php', 
        {
            'action':'getdailyStatus'
        }, 
        function(response){
            var html = '    <table id="daily_result" cellspacing="0">'+"\n"
            html += response
            html += '   </table>'+"\n"  
            $('#data_scroll').html(html) //div that holds the table

            var rowid = $('#daily_result tr:first-child').attr('id')

            getDetails(rowid)
        })
} 
```

表加载正常，但我的`$("#daily_result").on("click", "tr", function(event))`不起作用。

有解决办法吗？如果有人能告诉我出了什么问题，那将有很大帮助=）

**编辑

好的...我设法让它工作。但是，我认为这不是最好的方法。

这就是我所做的：

```
 jQuery.post( //its still post
    'ajax-functions.php', 
    {
        'action':'getdailyStatus'
    }, 
    function(response){
        var html = response

        $('#data_scroll').html(html)

        var rowid = $('#daily_result tr:first-child').attr('id')

        //moved my event handler here; after the loading of the table
        $("#daily_result").on("mouseenter mouseleave", "tr", function(event){
            if(event.type == "mouseenter"){
                $(this).css("background","#999")
                $(this).css("color","#FFF")
            }
            else {
                $(this).removeAttr('style')
            }
        })
        getDetails(rowid)
    }) 
```

有什么办法可以做得更好吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:46:13.173

尝试

```
$('#daily_result').load('ajax-functions.php', {
            'action':'getdailyStatus'
        }, function(){
            var rowid = $('#daily_result tr:first-child').attr('id')
            getDetails(rowid)
        }); 
```

# python - 使用 struct.pack 和 python 创建数据包

> ID：14928888
> 
> 赞同：2
> 
> 时间：2013-02-18T03:06:50.117
> 
> 标签：python

我想使用 python 创建一个数据包。数据包有 4 个字段，每个字段 32 位。我有示例代码：

```
import socket, sys, os, struct
field1 = 1
field2 = '255.255.255.0'
field3 = 20
field4 = '192.168.0.1'

struct.pack=('!L4sL4s',field1,field2,field3) 
```

但我没有输出。如何格式化此数据包，以便每个变量可以有 4 个字节。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T03:27:45.343

```
>>> struct.pack('!L4sL4s', field1, socket.inet_aton(field2),
                           field3, socket.inet_aton(field4))
'\x00\x00\x00\x01\xff\xff\xff\x00\x00\x00\x00\x14\xc0\xa8\x00\x01' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T03:11:29.613

您将元组分配`('!L4sL4s',field1,field2,field3)`给`struct.pack`. 你需要这样调用`struct.pack`：（`struct.pack('!L4sL4s',field1,field2,field3,field4)`没有=符号）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T03:13:08.810

调用的结果将`pack`返回给您，您可以将其分配给变量。您的行应如下所示：

```
my_packet = struct.pack('!L4sL4s',field1,field2,field3) 
```

请注意，此行需要一个 unsigned long int，然后是长度为 4 的字符串，然后是 long int，然后是长度为 4 的字符串。`field2`并且`field4`都比这长。例如，尝试使用`len(field2)`看看它有多长！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T03:17:06.850

您正在对打包字符串和整数进行奇怪的组合。您可以将字符串打包为无符号整数，如下所示：

```
>>> import struct
>>> field2 = '255.255.255.0'
>>> struct.pack('4B',*tuple(int(x) for x in field2.split('.')))
'\xff\xff\xff\x00' 
```

考虑到这一点，您可能想要做的是：

```
from itertools import chain
f2_int = map(int,field2.split('.'))
f4_int = map(int,field4.split('.'))
struct.pack('L4BL4B',*chain([field1],f2_int,[field3],f4_int)) 
```

演示：

```
>>> import struct
>>> field1 = 1
>>> field2 = '255.255.255.0'
>>> field3 = 20
>>> field4 = '192.168.0.1'
>>> from itertools import chain
>>> f2_int = map(int,field2.split('.'))
>>> f4_int = map(int,field4.split('.'))
>>> struct.pack('L4BL4B',*chain([field1],f2_int,[field3],f4_int))
'\x01\x00\x00\x00\xff\xff\xff\x00\x14\x00\x00\x00\xc0\xa8\x00\x01' 
```

事实证明，我可能在这里重新发明轮子。此外，您可能想检查一下[`socket.inet_aton`](http://docs.python.org/2/library/socket.html#socket.inet_aton)，它看起来像您所说的那样将您的 IP 地址正确地打包成 32 位。

# ruby - 如何使用 sinatra 在 ruby 中以恒定速率刷新实例变量？

> ID：14928889
> 
> 赞同：0
> 
> 时间：2013-02-18T03:06:52.147
> 
> 标签：ruby, web-applications, sinatra

我是一个完全的红宝石菜鸟，只是想知道是否有可能（以及如何）制作这段代码：

```
require 'sinatra'

get '/' do
  "#{Time.now}"
end 
```

每秒更改时间？

基本上就像这里的例子：[http](http://www.javascriptkit.com/script/cut2.shtml) ://www.javascriptkit.com/script/cut2.shtml 。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T08:16:39.197

**不要**在服务器端执行此操作

*   效率低下 - 您必须每秒通过网络发送数据
*   这很困难——学习 Javascript 比学习所有的 Ruby 工具来完成这样的工作要容易；即使你是在服务器端做的，你也可能需要编写相当多的 Javascript 才能让它正常工作，例如，如果你要使用 Juggernaut
*   如果您正在做 Web 开发，那么无论如何学习 Javascript 基本上都是强制性的。

您不能拥有客户端 Ruby，因为浏览器不知道如何解释和执行 Ruby。他们知道 HTML、Javascript 等。参见。[网络媒体类型](http://en.wikipedia.org/wiki/Internet_media_type#Type_text)

# jquery - jQuery 变量缓存和链接的奇怪性能

> ID：14928890
> 
> 赞同：0
> 
> 时间：2013-02-18T03:06:54.980
> 
> 标签：jquery, performance, chain

我到处读到变量缓存和链接 jQuery 函数调用对性能有好处。

但是，我遇到了[这个 jsperf 测试](http://jsperf.com/caching-jquery-objects-perf/13)，它似乎展示了一些有趣的怪癖。

请参阅以下测试用例：

**案例 1：没有缓存**

```
$(".myClass").css("color", "red");
$(".myClass").css("opacity", 1);
$(".myClass").css("display", "block"); 
```

**案例 2：链接**

```
$(".myClass").css("color", "red").css("opacity", 1).css("display", "block"); 
```

**案例 3：对象缓存**

```
var $myDiv = $(".myDiv");
$myDiv.css("color", "red");
$myDiv.css("opacity", 1);
$myDiv.css("display", "block"); 
```

**案例 4：对象缓存 + 链接**

```
var $myDiv = $(".myClass");
$myDiv.css("color", "red").css("opacity", 1).css("display", "block"); 
```

**案例5：普通的jQuery**

```
$(".myClass").css({
  color: "red",
  opacity: 1,
  display: "block"
}); 
```

这是我的电脑（Win7 FF18）上按测试用例排序的性能测试结果：

1.  **无缓存 - 7,284 ops/s - 慢 92%，最慢**
2.  链接 - 10,284 ops/s - 慢 89%
3.  **对象缓存 - 95,968 ops/s - 最快**
4.  对象缓存 + 链接 - 10,353 ops/s - 89% 慢
5.  普通 jQuery - 10,172 ops/s - 慢 89%

*（这些结果与使用其他浏览器进行的测量一致。）*

如您所见，测试用例 1 是预期的最慢的。奇怪的是，测试用例 3 最快，而测试用例 2、4 和 5 也很慢。

最大的惊喜是测试用例 3 比测试用例 4 快得多。换句话说，链接 jQuery 调用大大降低了性能。

您是否在自己的浏览器上注意到了这一点？

也许这是 .css() 方法的一个好处，但就个人而言，我认为现代 Javascript 引擎已经进行了特殊的代码优化，以增强来自同一根对象的函数调用序列。

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:14:09.443

“对象缓存”测试要快得多，因为它实际上并没有做任何事情。

它使用与其他选择器不同的选择器：`.myDiv`而不是`.myClass`. 没有`.myDiv`元素，因此调用作用于空结果集。

如果你[修复了那个损坏的测试](http://jsperf.com/caching-jquery-objects-perf/16)，你得到的结果更像你所期望的：重复选择器仍然是最慢的，而其他 4 个选项在速度方面或多或少都是等效的。

# magento - Magento - 这些资源模型是什么？

> ID：14928897
> 
> 赞同：1
> 
> 时间：2013-02-18T03:07:48.427
> 
> 标签：magento, model

我正在尝试了解 Magento ORM 数据库访问的语法。有人可以帮助解释此 XML 配置文件中使用的部分。

```
 <models>
        <modulex>
            <class>MynameSpace_Modulex_Model</class>
            <resourceModel>modulex_mysql4</resourceModel>
        </modulex>   

        <modulex_mysql4>
            <class>MynameSpace_Modulex_Model_Mysql4</class>              
            <entities>
                <blogpost>
                    <table>my_blog_posts</table>
                </blogpost>
            </entities>                 
        </modulex_mysql4>        
    </models> 
```

*   模型 - 用于定义与数据库访问和业务逻辑相关的类的部分

*   modulex - 特定模块的名称；本节中包含的内容仅适用于名为 modulex 的模块

*   resourceModel - 指示要遵循的目录或指向 XML 实体？特定于数据库访问？

*   modulex_mysql4 - 上面使用的 resourceModel 的定义？为什么不把它放在 modulex 部分？

*   class MynameSpace_Modulex_Model - 指向这个模块中类的位置？创建类的实例？

*   实体 - 在我的模块中定义资源模型

*   blogpost - 模型名称（MynameSpace/Modulex/Model 中的文件和类）

*   my_blog_posts - sql 表的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T05:37:42.117

## 模型和资源模型之间有很大的区别

*   模型 - 处理业务逻辑（在任何 MVC 中）
*   资源模型 - 处理数据库交互

## 解释你的例子

*   `Modulex`- 型号名称
*   `MynameSpace_Modulex_Model`- 是的，模块模型目录的路径。仅在触发查询时实例化，如：Mage::getModel('modulex/modulex')->load(1); 但是如果你只是使用 Mage::getModel('modulex/modulex'); 它不会实例化，因为 Magento 相信延迟加载。
*   `Entities`- 表示该模块将使用哪些表。它还用于获取模块特定实体的表名。（见下面的例子）
*   `blogpost`- 不，这不是你的型号名称。您的型号名称是 Modulex。blogpost 是指表 my_blog_posts 的实体表名称（请参见下面的示例） `my_blog_posts`- 是的，它是您的数据库表的名称
*   `mysql4`- 从社区版 1.6 开始，mysql4 已被弃用，现在用作资源。资源用于直接与数据库交互。

模型和实体表名的使用示例：

`$table = Mage::getSingleton('core/resource')->getTableName('modulex/blogpost');`

在这里，modulex = 你的模型，blogpost = 你的实体表名。两者都用于获取数据库表名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T03:03:09.693

*“从社区版本 1.6 开始，mysql4 已被弃用，现在用作资源。资源用于直接与数据库交互。”*

如果我理解更改，那么 config.xml 将来应该看起来更像这样......

```
...
<global>
  <models>
    <modulex>
      <class>Msc_Modulex_Model</class>
      <resourceModel>modulex_resource</resourceModel>
    </modulex>

<!--    <modulex_mysql4>                            -->
<!--        <class>MynameSpace_Modulex_Model_Mysql4</class>    -->
<!--        <entities>                                -->
<!--            <blogpost>                            -->
<!--                <table>my_blog_posts</table>    -->
<!--            </blogpost>                            -->
<!--        </entities>                             -->
<!--    </modulex_mysql4>                            -->

    <modulex_resource>
      <class>MynameSpace_Modulex_Model_Resource</class>
      <deprecatedNode>modulex_mysql4</deprecatedNode>
      <entities>
        <blogpost>
           <table>my_blog_posts</table>
        </blogpost>
      </entities>
    </modulex_resource>
  </models>
</global>
... 
```

Blogpost.php 中也有相应的变化

```
<?php
// in \app\code\local\Msc\Module5\Model\Mysql4\Blogpost.php
//class Msc_Modulex_Model_Mysql4_Blogpost extends Mage_Core_Model_Mysql4_Abstract{
class Msc_Modulex_Model_Resource_Db_Blogpost extends Mage_Core_Model_Resource_Db_Abstract{
    protected function _construct()
    {
        $this->_init('modulex/blogpost', 'my_blogpost_id');
    }   
} 
```

# eclipse - Maven eclipse - 没有出现多个项目依赖项

> ID：14928904
> 
> 赞同：1
> 
> 时间：2013-02-18T03:09:44.780
> 
> 标签：eclipse, maven, m2eclipse

我有一堆 Maven 项目，它们都是父项目的一部分。当我将父项目导入 Eclipse 时，我希望子项目的源文件夹会列在我的父项目中，但事实并非如此。它们也不会出现在“Maven Dependencies”部分。

这是正确的行为还是我错过了什么。如果这是正确的行为，那么这样做的最佳做法是什么？

我应该将每个项目导入 Eclipse，然后编辑我的父项目的构建路径以包含它们吗？我真的不喜欢这种方法，因为我想通过 maven 做所有事情。

注意：我不是`mvn eclipse:eclipse`用来生成我的项目文件，我直接在eclipse IDE中使用maven插件作为：*导入现有的maven项目*

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:47:00.060

导入您的父项目，然后关闭它（右键单击包资源管理器中的项目 > `close project`）。选择它并转到`file > import > maven > existing maven projets`这里你应该看到子项目的列表，然后选择想要的`finish`。

现在在您的包资源管理器中，您应该拥有：

*   `parent-project`您在其中工作并`pom-parent`最终在`src-parent`

*   每个`child-project`您在相应的项目上工作的`pom-child`项目`src-child`

If some dependencies are missing try to update the projects (right click on the projects in the package explorer `maven > update project`)

Normally you don't have to edit the build path in eclipse it must be handle by the maven nature of the project (the maven nature is often represent by a `M` on the icons of the projects)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:22:04.617

通常，如果您不导入“依赖项”项目，Eclipse 只会使用本地 repo (.m2) 中的 jars。

但是，我不明白您所说的“我有一堆 Maven 项目，它们都是父项目的一部分”。

项目不是彼此的一部分。并且子项目源不应列在源文件夹中。您只使用字节码。

如果您想“查看所有源”：但是，如果您将源导出为源 jar，则可以对代码有一个完整的“视图”。

如果您希望能够跨项目进行调试：那么您必须在 Eclipse 中导入所有项目。如果项目已关闭，Eclipse 将使用该 jar，就像该项目不存在一样。如果项目是打开的，它将使用该项目（不确定如何，但它工作顺利）。

# sql - 可空列的唯一索引

> ID：14928907
> 
> 赞同：0
> 
> 时间：2013-02-18T03:10:14.670
> 
> 标签：sql, sql-server

我有一张有很多记录的表。X 列可以为空，并且很多记录在该列中有 NULL。我可以在此列上创建唯一的非聚集索引吗？那些空值不是违反唯一约束吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T05:44:21.193

如果您不是 SQL Server **2008**或更高版本 - 您可以设置过滤的唯一索引以排除/忽略所有`NULL`值。

```
CREATE UNIQUE NONCLUSTERED INDEX uixYourIndexName
ON dbo.YourTableName(YourColumnName)
WHERE YourColumnName IS NOT NULL 
```

这基本上会“过滤掉”所有`NULL`值 - 根本不将它们包含在索引中。任何使用相同`WHERE`子句的查询都可以使用此过滤索引来查找这些行。

如果没有过滤索引，则**无法**在列上创建 UNIQUE INDEX，因为使用 UNIQUE 索引，您只能`NULL`在该列中拥有一行。

# c++ - Opencv：如何计算矩形向量的镜像

> ID：14928909
> 
> 赞同：1
> 
> 时间：2013-02-18T03:10:24.040
> 
> 标签：c++, opencv, image-processing

我正在做一个视频处理项目，需要从源图像的镜像中找到一个 ROI。

ROI 坐标是相对于镜像的，我需要将其映射到原始源图像。opencv中是否有任何内置函数？

ROI 是一个矩形，我所说的*镜像*是指相对于 Y 轴翻转图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:51:29.390

这对我有用：

```
cv::Rect r;

for(int i=0;i<rectg.size();i++)
{
     r=rectg[i];
     r.x=rotated_img.cols-r.x-r.width;
     rectg[i]=r;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T06:16:27.847

[cvSetImageROI](http://docs.opencv.org/modules/core/doc/old_basic_structures.html?highlight=roi#void%20cvSetImageROI%28IplImage%2a%20image,%20CvRect%20rect%29)用于设置 ROI 区域。这里`rect`是您想要感兴趣的区域。[cvGetImageROI](http://docs.opencv.org/modules/core/doc/old_basic_structures.html?highlight=roi#CvRect%20cvGetImageROI%28const%20IplImage%2a%20image%29)返回选中的 ROI 矩形。

```
void cvSetImageROI(IplImage* image, CvRect rect) 
```

# uiviewcontroller - 如何从不是选项卡之一的 UIViewController 中选择 TabBarController 中的特定选项卡？

> ID：14928910
> 
> 赞同：0
> 
> 时间：2013-02-18T03:10:29.130
> 
> 标签：uiviewcontroller, uitabbarcontroller

我花了一个小时研究这个问题，尽管搜索了 SO，但还是无法弄清楚。基本上，我有一个 TabBarController (TBC)，其中有几个选项卡，每个选项卡都有一个关联的 UIViewController。在我的应用程序中，我***还有***其他 UIViewControllers，它们根本不属于 TBC。我在这些非 TBC UIViewController 之一上有一个按钮，单击该按钮时，不仅应该导航到 TBC，而且还应该导航到不为 0 的特定选项卡索引。

我发现很多人说，“哦，只是参考 self.tabBarController...blah blah blah”，但是当我在我的一个非 TBC UIViewControllers 中时，self 对我不起作用。

我确实找到了以下我认为可能有效但没有成功的方法。代码获取我需要的 TBC 的引用，分配一个非零索引以预期其显示，然后执行 segue。不幸的是，我继续只看到 segue 之后的第一个选项卡。

```
// doesn't work...    
UITabBarController *TBC = [self.storyboard instantiateViewControllerWithIdentifier:@"TBC"];
TBC.selectedIndex = 1;
[self performSegueWithIdentifier:@"goTBC" sender:nil]; 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:56:26.580

我最终通过在我的 AppDelegate 中创建一个 int 变量来跟踪应该显示的默认值为 0 的选项卡索引来解决这个问题。然后，在我的 TabBarController 的 viewWillAppear 方法中，我将 selectedIndex 设置为我存储在 AppDelegate 中的选项卡索引。这可以解决问题，尽管我认为它可能不是最干净的。

```
- (void)viewWillAppear:(BOOL)animated
{
     // Assume ad is your app delegate...
     // Assume navToIndex is the int I referenced above in app delegate
     self.selectedIndex = ad.navToIndex;
} 
```

# wpf - 如果 WPF UserControl 是 GDI+ 应用程序的子窗口，如何使 WPF UserControl 透明？

> ID：14928911
> 
> 赞同：0
> 
> 时间：2013-02-18T03:10:36.700
> 
> 标签：wpf, transparency, gdi+

我是桌面开发的初学者。我将 WPF UserControl 添加为带有 HwndSource 的 GDI+ 本机 C++ 应用程序的子窗口，但我的 UserControl 的背景不透明（它是透明的，因为我在纯 WPF 应用程序中使用此 UserControl）。无论我将其设置为空还是透明，它都会呈现为不透明的黑色。有什么方法可以使我的 WPF UserControl 的背景透明，我的选择是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:37:57.767

UsesPerPixelOpacity = true; 来自 HwndSourceParameters 已经解决了这个问题。还需要设置窗口样式标志：

```
 p.WindowStyle = (int)0x94000C00;
    p.ExtendedWindowStyle = 0x00080088; 
```

# jsf-2 - 在 JSF2 h:inputText 组件中使用引导相关的标签

> ID：14928912
> 
> 赞同：1
> 
> 时间：2013-02-18T03:10:38.313
> 
> 标签：jsf-2, twitter-bootstrap

无论如何在 JSF2 组件中使用引导相关的标签吗？例如，我有兴趣使用需要类似的 bootstrap typeahead 功能

```
<h:inputText id="typeahead" type="text" data-provide="typeahead"></h:inputText> 
```

但是因为`data-provide`它不存在，`h:inputText`所以它被剥离了，所以 typeahead 功能显然不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T12:02:23.223

取决于您使用的 JSF 版本。

在**JSF 2.0/2.1**中，不能指定其他属性。JSF HTML 渲染器只会渲染预定义的属性。您需要创建一个自定义渲染器来完成所需的工作。为了最大限度地减少样板代码，您必须扩展特定于实现的渲染器。目前还不清楚您使用的是哪一个，所以这里只是一个针对 Mojarra 的示例：

```
import com.sun.faces.renderkit.html_basic.TextRenderer;

public class MyTextRenderer extends TextRenderer {

    @Override
    protected void getEndTextToRender(FacesContext context, UIComponent component, String currentValue) throws IOException {
        Object dataProvide = component.getAttributes().get("data-provide");

        if (dataProvide != null) {
            context.getResponseWriter().writeAttribute("data-provide", dataProvide, null);
        }

        super.getEndTextToRender(context, component, currentValue);
    }

} 
```

按如下方式注册它`faces-config.xml`以使其运行：

```
<render-kit>
    <renderer>
        <component-family>javax.faces.Input</component-family>
        <renderer-type>javax.faces.Text</renderer-type>
        <renderer-class>com.example.MyTextRenderer</renderer-class>
    </renderer>
</render-kit> 
```

* * *

在**JSF 2.2**中，可以通过新的`passthrough`命名空间或`<f:passThroughAttribute>`标签来实现。另请参阅[JSF 2.2 中有哪些新功能？- HTML5 传递属性](http://jdevelopment.nl/jsf-22/#1089)。

因此，所以：

```
<html ... xmlns:a="http://xmlns.jcp.org/jsf/passthrough">
...
<h:inputText id="typeahead" a:data-provide="typeahead" /> 
```

*（请注意，该`type`属性默认为`text`已经）*

或者：

```
<h:inputText id="typeahead">
    <f:passThroughAttribute name="data-provide" value="typeahead" />
</h:inputText> 
```

### 也可以看看：

*   [JSF 不呈现自定义 HTML 标记属性](https://stackoverflow.com/questions/16666472/custom-html-tag-attributes-are-not-rendered-by-jsf/)

# windows-phone-8 - Windows phone 8 模拟器不接收推送。

> ID：14928915
> 
> 赞同：4
> 
> 时间：2013-02-18T03:11:09.613
> 
> 标签：windows-phone-8, windows-phone

我正在运行 Windows Phone 8 模拟器，并且正在注册一个示例应用程序，并且我收到了 URI，但是当我尝试发送通知时，我没有在模拟器中收到。我曾经能够将示例应用程序与 WP7 模拟器一起使用，它正在工作，我能够在 WP8 上访问互联网，但不能访问通知。任何解决此问题的指针都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T20:32:52.890

这就是我看到的情况：

1-如果我在收到多个通知后没有打开应用程序，看起来操作系统将不再显示通知。

2-如果您尝试发送太多通知。

3-如果应用程序打开，通知将不会显示为祝酒词。

4-有时我不得不打开浏览器并访问网站以强制设备连接到互联网，可能是因为手机在 wifi 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T03:52:07.447

这是一个非常开放的问题，因为可能存在多个问题，但从这个开始（来源：[MSDN](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff637317%28v=vs.105%29.aspx#BKMK_PushNots)）：

> 必须先准备好 Windows Phone 模拟器上的推送客户端服务，然后才能使用推送通知 API。启动模拟器后，模拟器上的推送客户端服务需要两分钟才能激活，从第一次出现“开始”屏幕开始。

# php - 使用 AJAX 用 PHP 数组填充 HTML 表单

> ID：14928916
> 
> 赞同：0
> 
> 时间：2013-02-18T03:11:12.983
> 
> 标签：php, ajax, jquery, forms

我正在寻找一种简单的方法来做到这一点。

考虑这个我最喜欢的水果的 PHP 数组，按降序排列：

```
$fruits = array('Banana', 'Orange', 'Rasberry'); 
```

考虑这个 HTML 表单：

```
<form action="" method="get">
What's your name?<br />
<input type="text" name="name" />
Name your favorite fruit<br />
<input type="text" name="favorite" /><br />
Choose a fruit you like<br />
<select name="oneyoulike">
<option value="Blueberry">Blueberry</option>
<option value="Orange">Orange</option>
</select>
</form> 
```

我想在输入我的名字后“自动填写”这个 HTML 表单。这样输入文本`favorite`将显示`Banana`或将显示`$fruits[0]`，因为它是与数组的唯一匹配项。`<select>``Orange``$fruits`

# c# - 沿立方体表面绘制点

> ID：14928917
> 
> 赞同：1
> 
> 时间：2013-02-18T03:11:18.887
> 
> 标签：c#, 3d, xna

所以对于一个任务，我必须把一个立方体变成一个球体。所需要的只是沿着立方体的表面有一堆点（不需要连接或实际上在立方体上，但必须形成一个立方体，尽管连接会更容易查看）并且有它们平滑地转化为球形。

主要问题是我从未学习过如何在 XNA 4.0 中提出观点，而且据我所见，它与我们在 OpenGL 中所做的非常不同（我们在上一堂课中学习了旧的）。

谁能帮我弄清楚制作我需要的立方体形状吗？每边将有 10x10 个点，边缘上的点由该边缘的表面共享。该结构需要易于复制或修改，因为我需要具有开始状态、结束状态和中间状态来转换两个状态之间的点。

如果我遗漏了任何可能重要的内容，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:28:21.500

首先，您应该熟悉[Primitives3D 示例](http://xbox.create.msdn.com/en-US/education/catalog/sample/primitives_3d)。它说明了您需要的所有呈现 API。

以下是我解决这个问题的方法（你可以在 MSDN 上查找这些类和方法，希望能帮助你充实细节）：

1.  `Vector3[]`创建一个表示围绕 (0,0) 的适当细分的单位立方体的数组
2.  创建第二个数组，`Vector3[]`并用于`Vector3.Normalize`从第一个数组复制顶点。这将创建一个单位球体，其顶点与原始立方体匹配。
3.  创建一个数组`VertexPositionColor[]`。随意填写颜色数据。
4.  用于`Vector3.Lerp`循环前两个数组，插入每个元素以设置第三个数组中的位置。这为您提供了一个可以设置动画的参数 - 您必须在每一帧都执行此操作（`Update`可能是最好的）。
5.  创建一个索引数组 ( `short[]`)，描述镶嵌立方体的三角形列表（以及两者之间的球体和动画）。
6.  设置一个`BasicEffect`进行渲染。这涉及设置它的`World`,`View`和`Projection`矩阵，也许还可以打开`VertexColorEnabled`。如果您想要照明，请参阅示例了解详细信息（您需要使用带有法线的顶点类型，并正确地为这些法线设置动画）。
7.  使用效果渲染的方式是：`foreach(EffectPass effectPass in effect.CurrentTechnique.Passes) { effectPass.Apply(); /* your stuff here */ }`
8.  你可以创建一个`DynamicVertexBuffer`并`IndexBuffer`用它们绘制。但是对于像这样简单的事情，`DrawUserIndexedPrimitives`要容易得多（[这是最近的答案，其中包含一些细节](https://gamedev.stackexchange.com/a/49578/288)，[这是另一个](https://stackoverflow.com/a/14796485/165500)带有完整示例的答案`BasicEffect`）。

请注意，您应该只在启动时创建这些对象（这`LoadContent`是一个好地方）。在渲染过程中，您只是在使用它们。

如果您的 3D 渲染有问题，并且您正在绘制文本或精灵，请参阅[这篇文章](http://blogs.msdn.com/b/shawnhar/archive/2010/06/18/spritebatch-and-renderstates-in-xna-game-studio-4-0.aspx)以了解如何修复它。

# javascript - 用带有谷歌扩展的新内容替换网站上的 div 内容

> ID：14928918
> 
> 赞同：0
> 
> 时间：2013-02-18T03:11:20.567
> 
> 标签：javascript, jquery, google-chrome-extension

我正在为我的朋友们准备这个恶作剧。我不是一名经验丰富的程序员，虽然我想成为一名程序员，但我只有有限的时间对我的朋友们进行这种恶作剧。所以这是交易。我使用网页[https://www.webpage.com/lol/data.asp](https://www.webpage.com/lol/data.asp)（将替换为代码中的 URL，因为该论坛对新用户有限制）。在这个站点上有一个名为“data_div”的 div，我想注入一些代码，以便在页面加载时（当我加载扩展名 ofc 时），div 中的数据被我的 HTML 文档中的数据替换。在本文档中，我只有一个包含新数据的表格，它将替换原始表格。我该怎么做？

到目前为止，通过阅读论坛帖子（here 和 elswhere）并使用 google 来帮助我，由于我是编程新手，所以我进展甚微。

这是我得到的代码。

清单.json

```
{  "name": "prank",
  "version": "0.1",
  "permissions": [
    "URL"
  ],
  "content_scripts": [
    {
      "matches": ["JQUERY URL", "URL"],
      "js": ["jquery-1.9.1.min.js", "myscript.js"],
      "run_at": "document_end"
    }
  ],
  "manifest_version": 2
} 
```

myscript.js

```
chrome.extension.sendRequest({cmd: "read_file"}, function(html){
    $("data_div").html(html);
}); 
```

背景.html

```
chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
    if(request.cmd == "read_file") {
        $.ajax({
            url: chrome.extension.getURL("cont.html"),
            dataType: "html",
            success: sendResponse
        });
    }
}) 
```

以及 cont.html 中的 HTML 表格内容。

这是行不通的，如果有人能做到这一点，或者给我写一个有用的东西，我将不胜感激。

当我进入网站时，扩展程序加载但没有做任何事情。我什至不确定我是否可以访问网站上的 div 并更改它，或者这是否是正确的方法。我是全耳的家伙，拜托，请帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:33:35.483

在我看来，您的 jquery 选择器在这一行中是错误的：

```
$("data_div").html(html); 
```

您需要在 data_div 前面加上 # 或 . 取决于标记。

在您的问题中，您说 div 称为 data_div，我不确定这到底是什么意思。Below are the three options that I can think of, for what you might mean and the appropriate selector that you would need to use: data here use this selector: $("#data_div") data here use this selector: $(". data_div") 数据在这里使用这个选择器：$("div[name=data_div]")

如果您需要更多信息，可以阅读有关[JQuery 选择器](http://api.jquery.com/category/selectors/?rdfrom=http://docs.jquery.com/mw/index.php?title=Selectors&redirect=no)的文档。

## 更新

为了使调试更简单，请尝试将我的脚本内容更改为（删除所有 ajax 调用）：

$("#data_div").html('一些测试内容');

如果这可行，您就知道问题不在于您的选择器，而在于 ajax。然后你可以从那里建立东西。

# php - 将数组复制到 xml 无法更改 xml 标记标题

> ID：14928922
> 
> 赞同：0
> 
> 时间：2013-02-18T03:11:39.490
> 
> 标签：php, xml, arrays

例如我有一个数组

```
Array ( [0] => car [1] => bmw [2] => colour [3] => red [4] => quality [5] => good) 
```

我也有一门课，将数组复制到 xml。

它像这样将数组复制到xml

```
<root>
<0>car</0>
<1>bmw</1>
<2>colour</2>
<3>red</3>
<4>quality</4>
<5>good</5>
</root> 
```

我需要像这样将数组复制到xml

```
<root>
<car>bmw</car>
<colour>red</colour>
<quality>good</quality> 
</root> 
```

我的课

```
class Array2XML {

    private $writer;
    private $version = '1.0';
    private $encoding = 'UTF-8';
    private $rootName = 'root';

    function __construct() {
        $this->writer = new XMLWriter();
    }

    public function convert($data) {
        $this->writer->openMemory();
        $this->writer->startDocument($this->version, $this->encoding);
        $this->writer->startElement($this->rootName);
        if (is_array($data)) {
            $this->getXML($data);
        }
        $this->writer->endElement();
        return $this->writer->outputMemory();
    }
    public function setVersion($version) {
        $this->version = $version;
    }
    public function setEncoding($encoding) {
        $this->encoding = $encoding;
    }
    public function setRootName($rootName) {
        $this->rootName = $rootName;
    }
    private function getXML($data) {
        foreach ($data as $key => $val) {
            if (is_numeric($key)) {
                $key = 'key'.$key;
            }
            if (is_array($val)) {
                $this->writer->startElement($key);
                $this->getXML($val);
                $this->writer->endElement();
            }
            else {
                $this->writer->writeElement($key, $val);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:49:30.310

您需要将每两个值配对以获取要添加的元素的名称和值。例如，您可以这样做[`array_chunk`](http://php.net/array_chunk)：

```
$data  = Array(0 => 'car', 1 => 'bmw', 2 => 'colour', 3 => 'red', 4 => 'quality', 5 => 'good');
$count = count($data);
if ($count % 2) {
    throw new InvalidArgumentException('Array not of pairs.');
}

$xml = new XMLWriter();
$xml->openMemory();
$xml->startDocument();
$xml->startElement('root');

foreach (array_chunk($data, 2) as $pair) {
    list($name, $value) = $pair;
    $xml->writeElement($name, $value);
}

$xml->endElement();
echo $xml->outputMemory(); 
```

由于您无论如何都在使用内存，因此您也可以使用 SimpleXML 来执行此操作：

```
$data  = Array(0 => 'car', 1 => 'bmw', 2 => 'colour', 3 => 'red', 4 => 'quality', 5 => 'good');
$count = count($data);
if ($count % 2) {
    throw new InvalidArgumentException('Array not of pairs.');
}

$xml = new SimpleXMLElement('<root/>');

foreach (array_chunk($data, 2) as $pair) {
    list($name, $value) = $pair;
    $xml->{$name}[] = $value;
}

echo $xml->asXML(), "\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T03:39:40.180

在您的`convert($data)`方法中，更改以下部分：

```
if (is_array($data)) {
    $this->getXML($data);
} 
```

至：

```
if(is_array($data))
{
    if(count($data)%2===0)
    {
        $cache=array();
        while(count($data)>0)
        {
            list($key,$val)=array_splice($data,0,2);
            $cache[$key]=$val;
        }
        print_r($cache);//just to debug
        $this->getXML($cache);
    }
    else
    {
        $this->getXML($data);
    }
} 
```

我没有测试你的整个班级，但对于操纵部分，我确实测试了：

```
$data=array("car","bmw","colour","red","quality","good");
if(count($data)%2===0)
/* ...... */
print_r($cache); 
```

上面的代码输出：

```
Array
(
    [car] => bmw
    [colour] => red
    [quality] => good
) 
```

# php - 旧的 javascript 和 CSS 文件被加载

> ID：14928924
> 
> 赞同：1
> 
> 时间：2013-02-18T03:12:01.733
> 
> 标签：php, javascript, html, css

我正在使用 LAMP 堆栈开发一个简单的 php 网站。很多时候，当我编辑一个 javascript 文件时，带有编辑的新文件不会出现在 chrome 的调试器或 firebug 中。同样，当我编辑一个 css 文件时，旧 css 文件会被加载。我什至重命名了旧的 css 文件，但仍然加载了旧文件。它是否被缓存在某个地方？我什至尝试重新启动服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:14:24.440

`ctrl + F5`是清除给定页面上缓存文件的快捷方式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T03:15:09.230

按住`shift`并单击重新加载以强制 Chrome 从服务器加载所有文件。

# java - 多线程的JList重绘方法

> ID：14928932
> 
> 赞同：1
> 
> 时间：2013-02-18T03:13:39.013
> 
> 标签：java, swing, concurrency, jlist, defaultlistmodel

我有一个程序每秒检查数据库中新插入的行，如果找到新记录，我必须清除我的 listModel 并再次从数据库中检索所有数据并将其重新显示在列表中。

```
 itemListModel.clear();

    ArrayList resultArrayList = DBQueries.getAllSubmittedSaleTransaction();
    Iterator iterate = resultArrayList.iterator();

    int i = 0;
    while (iterate.hasNext()) {
        Hashtable data = (Hashtable) iterate.next();            
        itemListModel.add(i, data);

        this.itemList.addNotify();
        this.itemList.validate();
        this.itemList.repaint();

        i++;
    }
    this.validate();
    this.repaint(); 
```

但是，问题是，重绘方法有时有效，有时无效。有什么聪明的方法可以做到这一点吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T03:17:26.803

如果要更新模型，则不需要重新绘制 JList，尤其是`fireContentsChanged(...)`在添加新数据后调用模型时。确保只更改 Swing 事件线程上的模型。

考虑到你

*   在 SwingWorker 中执行数据库查询。
*   将 PropertyChangeListener 添加到 SwingWorker
*   当 SwingWorker 的 state 属性更改为 时`SwingWorker.StateValue.DONE`，让 GUI 从 SwingWorker 获取新数据并在 EDT 上填充 ListModel
*   然后让你的 ListModel 触发它的`fireContentChanged(...)`方法。
*   ListModel 应该扩展 AbstractListModel。
*   请注意，如果您能够使用 DefaultListModel，您甚至不必调用该`fireContent....()`方法，因为 DefaultListModel 会为您执行此操作。

# mysql - 限制每个组的查询

> ID：14928934
> 
> 赞同：1
> 
> 时间：2013-02-18T03:13:54.783
> 
> 标签：mysql, select, greatest-n-per-group

我有这个查询：

```
select pl.photo_id, pl.user_id, pl.liker_id, p1.filename user_filename, p2.filename liker_filename 
FROM photo_likes pl 
 left join photos p1 on (pl.photo_id = p1.photo_id) 
 left join photos p2 on (pl.liker_id = p2.user_id and p2.avatar = 1)
where pl.user_id = $id order by pl.liker_id, pl.date_liked desc 
```

它得到了正确的数据，但我想修改它以限制数据。所以，简而言之，这个查询会得到所有喜欢他们照片的人的所有喜欢，它工作得很好，这可以为每个人抓取很多照片。但我想将其限制为每个人只能获得 5 个：

所以，说`user A`喜欢我的 10 张照片，`user B`喜欢我的 8 张照片，喜欢我`user C`的 2 张照片，我只想要来自 的最后 5 个，来自`user A`的最后 5 个`user B`和来自 的最后 2 个`user C`。如果这是有道理的，怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:26:55.393

您的查询很好，但我将其包装起来并使用 MySQL 变量检查每个返回变量并增加每个“liker”的序列。当喜欢的人发生变化时，将序列设置回 1.... 然后，对序列应用 HAVING < 6。您不能在 WHERE 子句中执行此操作，因为您希望每条记录都是 QUALIFIED，这会不断更新 @likeSeq 和 @lastLiker。只有在完成之后，HAVING 才会说......之后，如果 seq 大于您的 5 上限，它会将其丢弃。

每个打印屏幕包含的每个备用行...

```
select
      AllRanks.*
   from 
      ( select
                PreQualified.*,
                @likeSeq := if( PreQualified.Liker_ID = @lastLiker, @likeSeq +1, 1 ) as Seq,
                @lastLiker := PreQualified.Liker_ID
             from
                ( select 
                        pl.photo_id, 
                        pl.user_id, 
                        pl.liker_id, 
                        p1.filename user_filename, 
                        p2.filename liker_filename 
                     FROM 
                        photo_likes pl 
                           left join photos p1 
                              on pl.photo_id = p1.photo_id
                           left join photos p2 
                              on pl.liker_id = p2.user_id 
                             and p2.avatar = 1
                     where 
                        pl.user_id = $id 
                     order by 
                        pl.liker_id, 
                        pl.date_liked desc ) PreQualified,
                ( select @lastLiker := 0,
                         @likeSeq := 0 ) sqlvars
      ) AllRanks
   where
      AllRanks.Seq < 6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T03:24:36.840

您可以将连接的表包装在子查询中吗？

```
select ...
from photo_likes
left join photos p1 ...
left join (select p2.filename liker_filename from photos where p1.liker_id = p2.user_id and avatar = 1 LIMIT 5) p2
where ... 
```

# asp.net - LINQ to SQL 的执行时间是 SSMS SQL 的 50 倍

> ID：14928939
> 
> 赞同：4
> 
> 时间：2013-02-18T03:14:14.843
> 
> 标签：asp.net, sql-server, performance, linq-to-sql, ssms

我有一个使用 Linq to SQL 的 asp.net 应用程序。

来自应用程序的一项查询超时（执行时间超过 30 秒）。我增加了 DataContext 的 CommandTimeout，它确实在 45 秒内完成。

我将 Linq 到 SQL 生成的 SQL 从 SQL Profiler 复制到 SSMS，并使用与我在应用程序中使用的用户凭据相同的用户凭据执行它，我得到了亚秒级的执行时间。

我正在使用一个新的 DataContext 来执行查询，所以查询在它自己的事务中运行。

我的连接字符串如下所示：

```
Data Source=.\SQLEXPRESS;Initial Catalog=MyDB;Integrated Security=False; user id=MyUser; password=@#$%^&* 
```

有人知道为什么我会得到如此不同的结果吗？

这是SQL：

```
exec sp_executesql N'SELECT [t1].[MatchCount], [t1].[RequestId], [t1].[Site], [t1].[Client]
FROM (
    SELECT ROW_NUMBER() OVER (ORDER BY [t0].[RequestId]) AS [ROW_NUMBER], [t0].[MatchCount], [t0].[RequestId], [t0].[Site], [t0].[Client]
    FROM [dbo].[ReportingRequestsSubsetWithMatches] AS [t0]
    WHERE ([t0].[Finish] < @p0) AND ([t0].[Finish] > @p1)
    ) AS [t1]
WHERE [t1].[ROW_NUMBER] BETWEEN @p2 + 1 AND @p2 + @p3
ORDER BY [t1].[ROW_NUMBER]',N'@p0 datetime,@p1 datetime,@p2 int,@p3 int',@p0='2013-02-02 00:00:00',@p1='2013-02-01 00:00:00',@p2=10,@p3=10 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T21:15:15.370

比较 SSMS 和 LINQ 会话的 SET 选项：

```
SELECT * FROM sys.dm_exec_sessions
WHERE session_id in (@@SPID, @LINQSESS) 
```

（将 @LINQSESS 替换为您的 Linq 会话 ID）

* * *

[ARITHABORT](http://msdn.microsoft.com/en-us/library/ms190306.aspx)通常是罪魁祸首，看看这是否能解决您的问题：

```
new SqlCommand("SET ARITHABORT ON", connection).ExecuteNonQuery(); 
```

# c# - 通过短信发送详细信息

> ID：14928946
> 
> 赞同：0
> 
> 时间：2013-02-18T03:15:16.560
> 
> 标签：c#, windows-phone-7, mvvm, sms, windows-phone-7.1

详情页：

```
// When page is navigated to set data context to selected item in list
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    string selectedIndex = "";
    if (NavigationContext.QueryString.TryGetValue("selectedItem", out selectedIndex))
    {
        int index = int.Parse(selectedIndex);
        DataContext = App.ViewModel.Items[index];
    }
} 
```

是否可以将存储在 DataContext 中的详细信息内容作为短信发送？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-20T06:36:11.727

也许它会帮助你：[http ://www.ginktage.com/2011/03/how-to-send-sms-in-windows-phone-7-using-c/](http://www.ginktage.com/2011/03/how-to-send-sms-in-windows-phone-7-using-c/)

将“Body”属性设置为包含详细内容的文本。

# ruby-on-rails - 在 ruby on rails 中建立抽象关联

> ID：14928947
> 
> 赞同：0
> 
> 时间：2013-02-18T03:15:28.087
> 
> 标签：ruby-on-rails, devise, devise-invitable

我在 devise_invitable 中覆盖了 InvitationsController 的 create 方法，其原始代码如下所示：

```
 def create
    self.resource = resource_class.invite!(resource_params, current_inviter)

    if resource.errors.empty?
      set_flash_message :notice, :send_instructions, :email => self.resource.email
      respond_with resource, :location => after_invite_path_for(resource)
    else
      respond_with_navigational(resource) { render :new }
    end
  end 
```

我正在尝试将一些 fields_for 添加到邀请表单中，以便在此控制器中创建成员时可以构建与成员关联的一些对象。我可以通过添加类似的东西来明确地做到这一点

```
 resource.my_associations.build(params[:my_association]) 
```

有没有办法概括构建语句？也许从参数中暗示类名并在事先不知道它叫什么的情况下建立关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:01:28.133

如果 params 哈希仅包含您的关联名称，那么您可以编写类似

```
params.each do |association, attributes|
  resource.send(association.to_s.pluralize).build(attributes)
end 
```

# c# - 如何用 Dapper 插入 DateTime（或 DateTime2）？

> ID：14928953
> 
> 赞同：3
> 
> 时间：2013-02-18T03:16:39.587
> 
> 标签：c#, .net, datetime, dapper, datetime2

我正在尝试执行以下操作：

```
var p = new DynamicParameters();
p.Add(...);
p.Add(...);
// ideally I want to insert null for end date, but I also tried DateTime.MinValue
// or some other date, but doesn't help
p.Add("@endDate", null, DbType.DateTime, ParameterDirection.Input);
using (var con = new SqlConnection(ConnectionString))
{
    // stored procedure does 'select SCOPE_IDENTITY()' to return the id of inserted row.
    int id = con.Query<int>("StoredProcedureName", p, commandType: CommandType.StoredProcedure).First();
} 
```

这是抛出“InvalidCastException”，我相信这是因为日期。我以前在 sql db 中有 endDate 的 datetime2(20) ，将其更改为 datetime 以查看它是否修复它，但没有。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T03:31:10.620

这里的无效转换是`SCOPE_IDENTITY()`实际返回`decimal`的。参数工作正常。

# php - 将函数的引用作为参数传递

> ID：14928956
> 
> 赞同：3
> 
> 时间：2013-02-18T03:17:12.567
> 
> 标签：php

如何将函数的引用作为参数传递给另一个函数？我试图实现一个回调，我需要在之前传递函数的引用。`returnProduct`我该怎么做？

```
<?php
class Tester {
    public function calculate($var_1,$var_2,$var_3) {
        $product = var_3($var_1,$var_2);
        echo $product;
    }

    public function returnProduct($var_1,$var_2) {
        return $var_1*$var_2;   
    }
}

$obj = new Tester();
$obj->calculate(100,2,$obj->returnProduct); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T03:24:16.660

将您的行更改`$product =`为：

```
$product = call_user_func($var_3,$var_1,$var_2); 
```

并将您的呼叫线路更改为：

```
$obj->calculate(100,2,array($obj,'returnProduct')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T03:31:38.757

如果您只想使用 的方法`Tester`，可以将方法名称作为字符串传递，例如

```
public function calculate($var_1, $var_2, $var_3) {
    $product = $this->$var_3($var_1, $var_2);
    echo $product;
} 
```

然后调用它

```
$obj->calculate(100, 2, 'returnProduct'); 
```

为了谨慎起见，您可以使用恰当命名的方法检查该方法是否存在[`method_exists()`](http://php.net/manual/en/function.method-exists.php)

# c - 将数据放入字符串数组时出错

> ID：14928959
> 
> 赞同：-1
> 
> 时间：2013-02-18T03:17:30.723
> 
> 标签：c, arrays, string, pointers

```
 void readit(FILE* filePtr, int* num1, int* num2, char** strings, int lines)
     {
int t;
char line[50];

for (t = 0; t < lines; t++){
    fgets(line, 50, filePtr);
    *(strings + t) = strtok(line, " "));
    *(num2 + t) = atoi(strtok(NULL, " "));
    *(num2 + t) = atoi(strtok(NULL, " "));
} 
```

在此代码中，*strings 部分未按预期执行。每次通过代码都会覆盖整个字符串数组。fgets 正在读取正确的数据，如果我打印第一个令牌的值，则每个循环都符合我的预期。在循环之外，（或在 if i print (i - 1) 所有数组 *str + 1、*str + 2 等内部）将包含最后一次通过的值。

例如。

```
 *(strings + 0) = "Hi";
         printf("%s", *(strings + 0)); //Will print hi

         //next iteration
         *(strings + 1) = "You";
         printf("%s", *(strings + 1)); // will print you
         printf("%s", *(strings + 0)); // will print you as well 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T03:59:02.293

问题是您只有一个不断被覆盖的字符串缓冲区。记住`strtok`不分配新内存它返回一个指向它传递的缓冲区的指针。每次通过循环`strtok`套`*(strings + t) = line`。然后在下一个循环中，您将日期覆盖在`line`. 你最终得到的是一个 char 指针数组，它们都指向同一个字符串缓冲区。（您还返回一个指向局部变量的指针，这是未定义的行为）

您的代码相当于以下内容：

```
 char *strings[2];
    char line[50];
    strcpy(line, "Hi");
    *(strings + 0) = line;
     printf("%s", *(strings + 0)); //Will print hi

     //next iteration
     strcpy(line, "You");
     *(strings + 1) = line;
     printf("%s", *(strings + 1)); // will print you
     printf("%s", *(strings + 0)); // will print you as well 
```

因此，两者当然`strings+0`都`string+1`指出`line`要改变`strings+0`打印的内容。

您要么需要动态分配内存，要么需要以可以`strcpy`进入的缓冲区为基础。例如：

```
char strings[5][50];
readit(filtPtr, &num1, &num2, strings, 50);

...

void readit(FILE* filePtr, int* num1, int* num2, char** strings, int lines)
{
     int t;
     char line[50];

    for (t = 0; t < lines; t++){
        fgets(line, 50, filePtr);
        strcpy(*(strings + t), strtok(line, " ")));
        *(num2 + t) = atoi(strtok(NULL, " "));
        *(num2 + t) = atoi(strtok(NULL, " "));
    }
} 
```

# c - ZGEMM 使用 SSE，不提供加速

> ID：14928960
> 
> 赞同：1
> 
> 时间：2013-02-18T03:17:40.553
> 
> 标签：c, performance, memory, sse, matrix-multiplication

我正在执行复数双精度（ZGEMM）的矩阵矩阵乘法，并认为使用 SSE 会有所帮助，但实际上它会减慢代码速度。我想知道，也许是因为它的内存受限？

下面是伪代码：

为了将两个复数相乘，我使用以下方法，如 intel 建议的那样（假设 real 和 complex 连续存储）：

如果 M=(a+ib) 且 IN= (c+id)：

```
M1 = _mm_loaddup_pd(&M[0]);//M1->|a|a|
I1 = _mm_load_pd(&IN);//I1->|d|c|
T1 = _mm_mul_pd(M1,I1);//T1->|a*d|a*c|

M1 = _mm_loaddup_pd(&M[1]);//M1->|b|b|
I1 = _mm_shuffle_pd(I1,I1,1);//I1->|c|d|
I1 = _mm_mul_pd(M1,I1);//I1->|b*c|b*d|

T1 = _mm_addsub_pd(T1,I1); //T1-> |ad+bc|ac-bd| 
```

因此 T1 存储复数乘法的结果。

这是矩阵乘法（`C[i][j] += A[i][k]*B[k][j]`）：

```
/*Assumes real and imaginary elements are stored contiguously*/
/*Used loop order: ikj for better cache locality and used 2*2 block matrix mult*/
for(i=0;i<N;i+=2){
  for(k=0;k<N;k+=2){
    /*Perform the _mm_loaddup() part here for A[i][k],A[i][k+1],A[i+1][k],A[i+1][k+1] since im blocking for 2*2 matrix mult i.e will load duplicates of 8 double values into 8 SIMD registers here*/
     A00r = _mm_loaddup_pd(&A[(i*N+k)*2+0]);
     A00i = _mm_loaddup_pd(&A[(i*N+k)*2+1]);
     A01r = _mm_loaddup_pd(&A[(i*N+k)*2+2]);
     A01i = _mm_loaddup_pd(&A[(i*N+k)*2+3]);
     A10r = _mm_loaddup_pd(&A[((i+1)*N+k)*2+0]);
     A10i = _mm_loaddup_pd(&A[((i+1)*N+k)*2+1);
     A11r = _mm_loaddup_pd(&A[((i+1)*N+k)*2+2);
     A11i = _mm_loaddup_pd(&A[((i+1)*N+k)*2+2);
     for(j=0;j<N;j+=2){
       double out[8] = {0,0,0,0,0,0,0,0};
       op00=op01=op10=op11=_mm_setzero_pd();

       B00 = _mm_loadu_pd(&B[(k*N+j)*2]);
       B00_r = _mm_shuffle_pd(B00,B00,1);
       B01 = _mm_loadu_pd(&B[(k*N+j+1)*2]);
       B01_r = _mm_shuffle_pd(B01,B01,1);

       /*Perform A[i][k]*B[k][j], A[i][k]*B[k][j+1], A[i+1][k]*B[k][j], A[i+1][k]*B[k][j+1]  and assign it to op00,op01,op10,op11 respectively -> takes 8 _mm_mul_pd() and 4 _mm_addsub_pd()*/

       T1 = _mm_mul_pd(A00r,B00);
       T2 = _mm_mul_pd(A00i,B00_r);
       op00 = _mm_addsub_pd(T1,T2);

       T1 = _mm_mul_pd(A00r,B01);
       T2 = _mm_mul_pd(A00i,B01_r);
       op01 = _mm_addsub_pd(T1,T2);

       T1 = _mm_mul_pd(A10r,B00);
       T2 = _mm_mul_pd(A10i,B00_r);
       op10 = _mm_addsub_pd(T1,T2);

       T1 = _mm_mul_pd(A10r,B01);
       T2 = _mm_mul_pd(A10i,B01_r);
       op11 = _mm_addsub_pd(T1,T2);

       B00 = _mm_loadu_pd(&B[((k+1)*N+j)*2]);
       B00_r = _mm_shuffle_pd(B00,B00,1);
       B01 = _mm_loadu_pd(&B[((k+1)*N+j+1)*2]);
       B00_r = _mm_shuffle_pd(B01,B01,1);

      /*Perform A[i][k+1]*B[k+1][j],A[i][k+1]*B[k+1][j+1],A[i+1][k+1]*B[k+1][j],A[i+1][k+1]*B[k+1][j+1] and add it to op00,op01,op10,op11 respectively-> takes 8 _mm_mul_pd(), 4 _mm_add_pd(), 4 _mm_addsub_pd()*/

       T1 = _mm_mul_pd(A01r,B10);
       T2 = _mm_mul_pd(A01i,B10_r);
       op00 = _mm_add_pd(op00,_mm_addsub_pd(T1,T2));

       T1 = _mm_mul_pd(A01r,B11);
       T2 = _mm_mul_pd(A01i,B11_r);
       op01 = _mm_add_pd(op01,_mm_addsub_pd(T1,T2));

       T1 = _mm_mul_pd(A11r,B10);
       T2 = _mm_mul_pd(A11i,B10_r);
       op10 = _mm_add_pd(op10,_mm_addsub_pd(T1,T2));

       T1 = _mm_mul_pd(A11r,B11);
       T2 = _mm_mul_pd(A11i,B11_r);
       op11 = _mm_add_pd(op11,_mm_addsub_pd(T1,T2));

      /*Store op00,op01,op10,op11 into out[0],out[2],out[4] and out[6] -> 4 stores*/

       _mm_storeu_pd(&out[0],op00);
       _mm_storeu_pd(&out[2],op01);
       _mm_storeu_pd(&out[4],op10);
       _mm_storeu_pd(&out[6],op11);
      /*Perform the following 8 operations*/
      C[(i*N+j)*2+0] += out[0];
      C[(i*N+j)*2+1] += out[1];
           .
           .
           .
      C[((i+1)*N+j)*2+3] += out[7];
     }
  }
} 
```

L1 缓存为 32KB，所以我也使用了缓存阻塞（切片大小为 16*16，这使得工作集大小为 12KB(3*2^4*2^4*2^3*2)）但它没有没什么帮助。我只能得到大约 50% 的理论峰值性能。关于如何改进这一点的任何指示？

# regex - regexpr 并且只匹配价格而不是其他数字

> ID：14928965
> 
> 赞同：0
> 
> 时间：2013-02-18T03:18:00.983
> 
> 标签：regex, r

我正在尝试编写仅从一行文本中提取价格的代码。

[受RegEx 的价格](https://stackoverflow.com/questions/1547574/regex-for-prices)激励？，我想出了以下命令：

```
gregexpr('\\d+(\\.\\d{1,2})', '23434 34.232 asdf 3.12  ')

[[1]]
[1]  7 19
attr(,"match.length")
[1] 5 4
attr(,"useBytes")
[1] TRUE 
```

但是，就我而言，我只想`3.12`匹配而不是`34.232`. 有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T03:20:36.447

我认为这应该有效：

```
'\\d+\\.\\d{1,2}(?!\\d)' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T03:22:10.297

```
\\d+\\.\\d{1,2}(?!\\d) 
```

我不确定 100% 支持负前瞻`r`，所以这里有一个替代方案：

```
\\d+\\.\\d{1,2}(?:[^\\d]|$) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-18T03:20:41.620

一位或多位数字后跟一个点，后跟 1 或 2 位数字，后跟空格或字符串结尾

```
\\d+\\.\\d{1,2}(\w|$) 
```

编辑：根据评论，R 使用双重转义

# php - 如何在单页主页上发布表单数据

> ID：14928966
> 
> 赞同：1
> 
> 时间：2013-02-18T03:18:16.333
> 
> 标签：php, html, forms, post

```
<form name="makeup" action="index.php" method="post">
                <select id="skin_shade">
                    <option value="skin_shade_1">Dark</option>
                    <option value="skin_shade_2">Light</option>
                </select></br>
                Acne:<input type="checkbox" value="acne"/></br>
                Oil:<input type="checkbox" value="oily"/></br>
                Straight Hair:<input type="checkbox" value="straight"/></br>

            <input type="submit" value="Submit"/>
        </form>

<?php
echo $_POST['skin_shade']?>; 
```

我点击提交后没有任何输出，除了表单重置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T03:20:11.547

更改`<select id="skin_shade">`为`<select name="skin_shade">`?

# c - 在 C 和 mmap() 中 & 代表什么

> ID：14928972
> 
> 赞同：-5
> 
> 时间：2013-02-18T03:18:56.587
> 
> 标签：c, mmap

```
int fd = open("/dev/mem", O_RDWR);
present = (unsigned char *)mmap(0, 
              getpagesize(), 
              PROT_READ|PROT_WRITE, 
              MAP_SHARED, 
              fd, 
              0x22400000);

if ((*present & 1) == 0)
{
  printf("Converter not present\n");
  exit(1);
} 
```

1) 前面代码中的“&”运算符是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T03:20:23.990

它是[按位和运算符](http://msdn.microsoft.com/en-us/library/z0zec0b2%28v=vs.71%29.aspx)。这意味着操作的结果是执行`and`两个操作数的二进制，但逐位（按位方式，即）。

在这种情况下，它正在检查 present 指向的内存的第一位是否为 0。

# macos - 在 UNIX 中构建特定于程序的快捷方式

> ID：14928976
> 
> 赞同：0
> 
> 时间：2013-02-18T03:20:18.787
> 
> 标签：macos, unix

我有一个名为 carmel 的程序，我可以通过以下方式从命令行运行它：

`carmel -h`

或我选择的任何后缀。加载文件时，我可以说：

`carmel fsa1.fst``fsa1.fst`位于我的血红素文件夹中，`/Users/adam/`.

我希望将默认文件位置设置为，例如，`/Users/adam/carmel/files`并且不希望每次都输入它。`carmel`当我键入然后查看该位置时，有没有办法让 UNIX 知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:22:10.690

这种行为没有标准的 Unix 快捷方式。一些应用程序将检查环境变量以查看其文件的位置。但是在[`carmel/src/carmel.cc`](https://github.com/graehl/carmel/blob/master/carmel/src/carmel.cc)GitHub 上查看，我会说你必须编写一个包装脚本。像这样：

```
#!/usr/bin/env bash
# Save as ${HOME}/bin/carmel and ensure ${HOME}/bin is before
# ${carmel_bin_dir} in your ${PATH}. Also ensure this script
# has the executable bit set.

carmel_bin_dir=/usr/local/bin # TODO change this?
working_directory=${CARMEL_HOME-${HOME}/carmel/files}

if [[ ! -d "${working_directory}" ]]; then
    echo "${working_directory} does not exist. Creating."
    mkdir -p "${working_directory}" || echo "Failed to create ${working_directory}"
fi

pushd "${working_directory}"
echo "Launching ${carmel_bin_dir}/carmel ${@} from $(pwd)..."
${carmel_bin_dir}/carmel ${@}
popd 
```

或者，由于源是免费提供的，您可以添加一些代码来阅读`${CARMEL_HOME}`（或类似的）并将其作为拉取请求提交。

祝你好运！

# vb.net - 当 VB.NET 中的变量值发生变化时产生中断

> ID：14928977
> 
> 赞同：0
> 
> 时间：2013-02-18T03:20:20.973
> 
> 标签：vb.net, interrupt

我有一个大型程序可以更改变量的值，例如`Var`递增或递减。任何时候当`Var = 5`我想执行一个子程序时，比如说`Flag()`.

实现这一点的“适当”方式是什么？

我想到的是：

```
While True
    If Var = 5 then
        Flag()
    End If
End While 
```

但它看起来很傻。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T03:23:49.923

将其包装在一个属性中，每当 setter 更改时调用一个函数：

```
Public Class MyVarWrapper
    Private _i As Integer

    Public Property Var() As Integer
        Get
            Return _i
        End Get
        Set
            _i = value
            FunctionToCall()
        End Set
    End Property
End Class 
```

或者实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T03:23:53.120

创建一个子或属性，使用它更改您的变量，这样您就可以检查值。

```
Public Class Form1
    Dim Var As Integer

    Private Sub updateVar(value As Integer)
        Var = value
        If Var = 5 Then
            MsgBox("Var = 5")
        End If
    End Sub

End Class 
```

# csv - 我可以在不使用合并表的情况下将 KML 和 CSV 数据导入同一个 Fusion Table 吗？

> ID：14928984
> 
> 赞同：0
> 
> 时间：2013-02-18T03:21:20.003
> 
> 标签：csv, kml, google-fusion-tables

我正在做一个项目，我们正在寻求自动化我们拥有的地图应用程序。我们有一个 Python 脚本，可以将我们的数据转换为 CSV 文件，然后为该数据创建关联的 KML 文件。有没有办法将这两个文件导入同一个 Fusion Table，而无需创建两个表，然后将它们合并到一个唯一键上，或者可能将 CSV 合并到 KML 文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:04:52.570

如果您知道如何创建 KML，请将 FusionTables 所需的 KML 片段放在 CSV 中的正确列中。

# objective-c - 如何保持工具栏隐藏，直到我的数组不包含 null 或 0？

> ID：14928989
> 
> 赞同：0
> 
> 时间：2013-02-18T03:22:30.873
> 
> 标签：objective-c

我试图隐藏工具栏，直到我的数组中没有 null 或 0。但它可以有任何其他数字。我尝试对它们进行操作，但它也不起作用...我在 IBAction 方法中执行此操作所以每次单击它时，它都会检查数组...仅当它不包含 0 或 null 时，栏工具栏会出现...我做错了吗？

没有字符串只有数字值；

这是我下面的逻辑。

我像这样初始化了我的数组

```
for (NSInteger i = 0; i < myData.count; ++i)
{
    [arrayData addObject:[NSNull null]];
}

NSNumber *zero = 0;

if ([arrayData containsObject:@"null"] || [arrayData containsObject:zero]) {
    [self.navigationController setToolbarHidden:TRUE];
}
else{
    [self.navigationController setToolbarHidden:FALSE animated:TRUE];
} 
```

NSLog 下面

```
"<null>",
"<null>",
"<null>",
"<null>",
1,
"<null>",
"<null>",
"<null>" 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:42:10.653

你的 if 语句应该是：

```
if ([arrayData containsObject:[NSNull null]] || [arrayData containsObject:@0]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T03:30:26.683

`NSNumber *zero = 0;`

您正在将指针的值设置为`0`，使其成为指向 nil 的指针。试试`NSNumber *zero = @0;`。`@0`创建一个`NSNumber`值为 的对象`0`。

`[arrayData containsObject:@"null"]`**正如AKV**所指出的，那是你真正想要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T03:37:12.397

`if ([arrayData containsObject:@"null"] || [rankData containsObject:zero])`

containsObject:@"null" -> 您是在检查值为“null”的字符串还是检查数组是否为空？

`[arrayData count]==0`或`arrayData==nil`将完成第二个要求的工作。

* * *

`[rankData containsObject:zero]`可以写成`[rankData containsObject:@"0"]`

# android - 使用新的 Google Play API 计算 android 测试覆盖率

> ID：14928990
> 
> 赞同：2
> 
> 时间：2013-02-18T03:22:34.947
> 
> 标签：android, maven, code-coverage, emma, google-cloud-messaging

我有一个使用 Google Cloud Messaging (GCM) 的新应用程序，因此使用了新的 Google Play API。

因为 Google Play API 不能仅在实际设备上的模拟器中运行，所以到目前为止，我无法使用我通常的 maven、jenkins、sonar 和 emma 设置来生成任何代码覆盖率。

更具体地说，我可以运行检测测试并生成一个 emma.ec 文件，但由于该文件是在设备上而不是 sdcard 上生成的，因此我无法使用 maven 从设备中提取文件。

我相信我可以将生成的 emma.ec 位置更改为 sdcard，但我没有。或者根我的手机并以这种方式提取文件。

所以我的问题是，有没有人知道提取此文件或以其他方式解决这些限制的另一种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T03:53:05.500

您实际上并不想测试 Google Play API 中的覆盖率，但您想测试处理 API 的代码的覆盖率，因此在这里模拟是有意义的。

首先，您将与 Google Play API 的交互封装在您自己的类中，该类仅将调用委托给 Play API。然后，您可以为您的测试模拟该服务，这样它就不会与 Google Play API 交互，而是返回有意义的测试数据，就好像它来自 Google Play API 一样。通过这种方式，您可以测试处理成功、失败和边缘情况的代码。

# ruby-on-rails - 如果在模型中可以访问确定某人是否已登录的 cookie，这是否是一个安全漏洞？

> ID：14928991
> 
> 赞同：1
> 
> 时间：2013-02-18T03:22:54.320
> 
> 标签：ruby-on-rails

我目前正在学习[http://ruby.railstutorial.org/chapters/上的 Rails 教程](http://ruby.railstutorial.org/chapters/)

在第 7-8 章的某个地方，我在部署到 Heroku 时遇到了一个错误（不幸的是我忘记了这个错误），但我发现在线解决方案是让 remember_token 变量在用户模型中可访问。我不确定该解决方案是否合法，但它有效，所以我继续本教程没有问题。

remember_token 是一个变量，定义如下：

```
self.remember_token = SecureRandom.urlsafe_base64 
```

换句话说，它是一个随机的字符串，所以它本身是非常安全的。即没有人能猜到。

它与 cookie 一起使用，以确定是否有人以前登录过：

```
def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
end

def signed_in?
    !current_user.nil?
end

def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
end 
```

但是我的用户模型具有以下内容：

```
attr_accessible :email, :name, :password, :password_confirmation, :remember_token 
```

...而且我想知道这个 remember_token 作为可访问属性是否会是一个安全漏洞。理论上有人可以使用客户端命令行并使用类似的东西获取remember_token`user.remember_token`吗？一旦他们拥有了remember_token，他们就不能只是模拟以前登录的状态，因此不需要密码/电子邮件组合吗？请有更多经验的人对此有所了解吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T03:43:35.490

attr_accessible 使列可通过批量分配进行更新。

因此，在 remember_token 上允许它意味着理论上他们可以为 user#update 破解一个新的 POST 表单，并将其设置为他们通过表单传递的任何内容。

但是，我*认为*您的建议是不可能的。有人可以使用什么样的控制台来让用户访问您的模型？

要获得这种访问权限，他们必须在您的服务器上运行控制台，在 Rails 根目录中......这不太可能。

一个人不太可能访问*另一个*用户的 remember_token，除非您通过控制器操作让其他用户访问其他用户（即不是他们自己的用户）的详细信息。允许访问用户自己的 remember_token 无关紧要——他们已经拥有它。

# silverlight - Silverlight：从样式修改鼠标悬停/聚焦状态按钮的 Canvas.Zindex

> ID：14928993
> 
> 赞同：0
> 
> 时间：2013-02-18T03:23:09.877
> 
> 标签：silverlight

我想从样式而不是从代码隐藏中修改鼠标悬停/聚焦状态按钮的 ZIndex。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T07:32:07.303

你真的不能用一种风格来做到这一点。

在这方面，您可以期望的最好的结果是创建一个将更改 ZIndex 属性的 Behavior。但是您必须为行为创建一个[附加属性](https://stackoverflow.com/questions/11056466/how-to-put-behavior-in-style-for-textbox-in-silverlight)，以便您可以在样式中设置它。它会起作用，但您应该考虑另一种方法。

您可以在页面/视图中定义视觉状态。然后使用[交互触发器](https://stackoverflow.com/questions/2900353/wpf-silverlight-states-activate-from-xaml)，您可以在 MouseOver 和 GotFocus 上使用 GoToState 操作触发该视觉状态。

* * *

**编辑：**如果您寻求的是可重用性，请从 Button 派生一个类型并改用您的类型。然后，您可以定义从 Button 中的代码想到的任何行为。

# iphone - (# ﾟДﾟ) 是一个 5 个字母的单词。但是在 iOS 中，[@"(# ﾟДﾟ)" 长度] 是 7。为什么？

> ID：14928995
> 
> 赞同：6
> 
> 时间：2013-02-18T03:23:33.870
> 
> 标签：iphone, ios, nsstring, uitextinput

(# ﾟДﾟ) 是一个 5 个字母的单词。但在 iOS 中，[@"(# ﾟДﾟ)" 长度] 是 7。

1.  为什么？

2.  我`<UITextInput>`用来修改 a`UITextField`或中的文本`UITextView`。当我制作 5 个字符长度的 UITextRange 时，它​​可以覆盖 (# ﾟДﾟ) 。那么，为什么这个 (# ﾟДﾟ) 在 and 中看起来像一个 5 个字符的单词`UITextField`，`UITextView`但在 NSString 中看起来像一个 7 个字符的单词？？？

3.  在这种情况下，如何获得正确的字符串长度？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T04:53:10.453

**1）**正如评论中的许多人已经说过的那样，您的字符串由 5 个组合字符序列（如果您愿意，也可以是字符簇）组成。`unichar`当被s as`NSString`的`length`方法分解时，你会得到一个 7 ，这是`unichar`在内存中表示你的字符串所需的 s 数。

**2)**显然`UITextField`and`UITextView`正在以 unichar 精明的方式处理字符串。好消息，你也可以。见#3。

**3）**您可以通过使用一些`NSString`正确处理组合字符序列的API来获取组合字符序列的数量。我很快就完成了一个简单的例子，它是一个小`NSString`类别：

```
@implementation NSString (ComposedCharacterSequences_helper)
-(NSUInteger)numberOfComposedCharacterSequences{
    __block NSUInteger count = 0;
    [self enumerateSubstringsInRange:NSMakeRange(0, self.length)
                             options:NSStringEnumerationByComposedCharacterSequences
                          usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop){
                              NSLog(@"%@",substring); // Just for fun
                              count++;
                          }];
    return count;
}
@end 
```

这又是快速代码；但它应该让你开始。如果你像这样使用它：

```
NSString *string = @"(# ﾟДﾟ)";
NSLog(@"string length %i", string.length);
NSLog(@"composed character count %i", [string numberOfComposedCharacterSequences]); 
```

你会看到你得到了想要的结果。

有关 API 的深入解释，`NSString`请查看`WWDC 2012 Session 215 Video "Text and Linguistic Analysis"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T05:02:52.287