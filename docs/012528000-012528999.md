# StackOverflow 问答 12528000-12528999

# ruby-on-rails - Rails：测试需要访问 Rails 环境的助手（例如 request.fullpath）

> ID：12528001
> 
> 赞同：6
> 
> 时间：2012-09-21T09:39:41.883
> 
> 标签：ruby-on-rails, testing, rspec

我有一个助手可以访问`request.fullpath`. 在孤立的辅助测试中，`request`不可用。我该怎么办？我可以以某种方式嘲笑它或类似的东西吗？

我正在使用最新版本的 Rails 和 RSpec。这是我的助手的样子：

```
def item(*args, &block)
  # some code

  if request.fullpath == 'some-path'
    # do some stuff
  end
end 
```

所以有问题的代码行是#4，其中助手需要访问`request`助手规范中不可用的对象。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T13:25:06.600

是的，您可以模拟请求。我在这里有一个很长的答案来描述如何做到这一点，但实际上这不一定是你想要的。

只需在示例中的辅助对象上调用辅助方法即可。像这样：

```
describe "#item" do
  it "does whatever" do
    helper.item.should ...
  end
end 
```

这将使您可以访问测试请求对象。如果你需要为请求路径指定一个特定的值，你可以这样做：

```
before :each do
  helper.request.path = 'some-path'
end 
```

* * *

实际上，为了完整起见，让我包含我的原始答案，因为根据您尝试做的事情，它可能仍然会有所帮助。

以下是模拟请求的方法：

```
request = mock('request')
controller.stub(:request).and_return request 
```

您可以类似地将存根方法添加到返回的请求中

```
request.stub(:method).and_return return_value 
```

以及在一行中模拟和存根的替代语法：

```
request = mock('request', :method => return_value) 
```

如果你的 mock 收到你没有存根的消息，Rspec 会抱怨。如果还有其他东西，只需在帮助器对象上调用您的请求帮助器方法，而您在测试中并不关心，您可以通过将模拟设置为“空对象”来关闭 rspec，例如。像这样

```
 request = mock('request').as_null_object 
```

看起来您可能需要通过以下特定测试：

```
describe "#item" do
  let(:request){ mock('request', :fullpath => 'some-path') }

  before :each do
    controller.stub(:request).and_return request
  end

  it "does whatever"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:14:54.423

在帮助规范中，您可以使用`controller.request`（`controller.request.stub(:fullpath) { "whatever" }`应该可以）访问请求

# module - header.tpl 中的幻灯片

> ID：12528005
> 
> 赞同：-1
> 
> 时间：2012-09-21T09:40:01.307
> 
> 标签：module, header, positioning, slideshow, opencart

我正在使用带有自定义主题的 Opencart 1.5.3.1。将幻灯片定位在标题本身（即在 header.tpl 中）时出现问题。我已经学会了为幻灯片模块制作新位置的方法，但它只是在标题之前或之后显示它 - 我需要它在里面。一旦我在标题之前或之后，我试图在 header.tpl 文件中回显它，但它给了我消息：警告：未定义的变量......

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:17:25.110

模块不能放在标题中，它是故意以这种方式构建的。页面的每个部分都有自己的控制器，通常是一个模型。您收到变量错误的原因是未加载 sideshow 控制器，仅加载了 header 控制器和模型。

在不更改模块集成的核心的情况下，您最好尝试在标题控制器中实现幻灯片放映控制器。

# asp.net - 如何在服务器端获取 javascript 日历值

> ID：12528008
> 
> 赞同：0
> 
> 时间：2012-09-21T09:40:08.763
> 
> 标签：asp.net

我是 Asp.net 的新手。我正在使用Javascript日历它使用输入标签。如果我使用`runat="server"`这样我可以在cs页面上获得价值，那么它不会显示日历。如何从输入标签获取日历值到 .cs 页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:07:14.393

在您的 aspx 页面中创建一个隐藏字段，该字段应为 runat="server"。

然后

在按钮上单击调用 javascript 函数说 jsOnclikfun() 并将此函数写为

```
<script type="text/javascript">
    function jsOnclikfun() {
        var dateInputtext = document.getElementById("Id Of input textbox which you are trying to make runat=server");

        var hdDateValue = document.getElementById('<%= hiddenField_Id.ClientID %>');

        hdDateValue.value = dateInputtext.value;

        return true;
    }
</script> 
```

现在在服务器端，您需要从隐藏字段中获取数据作为 hiddenfieldID.Value。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:49:01.393

最简单的方法：

在您的控件上有一个隐藏的字段。使用以下方法在 javascript 中设置它：

$('#<%=hdDate.ClientID %>').val("这里的日期值");

然后您可以访问cs文件中的这个隐藏字段。

# html - Facebook 自定义 HTML 页面在 Chrome 中不起作用

> ID：12528009
> 
> 赞同：0
> 
> 时间：2012-09-21T09:40:14.427
> 
> 标签：html, facebook, google-chrome, iframe

我通过粘贴自己的源代码创建了自定义 HTML facebook 页面。它在所有浏览器 Firefox、Safari、IE 中都能正常工作。但在 Google Chrome 中，它不会加载外部 CSS、javascript 和所有内容。它只是文本。

Facebook页面在这里： http: [//www.facebook.com/KoucPavelMilanCerny/app_190322544333196](http://www.facebook.com/KoucPavelMilanCerny/app_190322544333196)

有什么想法该怎么做？Chrome 是否会阻止在 iframe 中加载外部 CSS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:57:02.380

如果您使用 Chrome Inspector 工具并查看控制台选项卡，您会看到以下问题： ![在此处输入图像描述](../Images/1b444ab126f62f9fdb0f87aa4d2b177d.png)

尝试将您的 css 和 js 托管在与网页相同的服务器上。

# email - drupal_mail() HTML

> ID：12528011
> 
> 赞同：0
> 
> 时间：2012-09-21T09:40:23.147
> 
> 标签：email, drupal

我正在尝试发送一封带有一些 HTML 的简单电子邮件，`drupal_mail()`正在发送电子邮件，但所有 HTML 似乎都已被删除。

```
$body = '<div style="width: 600px; margin: 0px auto">';
$body .= '<img align="center" src="' . $url . '" style="max-width: 600px; height: auto; margin: 0px auto">';
$body .= '<p style="margin: 30px 0px 0px 0px; line-height: 18px">' . nl2br($message) . '</p>';
$body .= '</div>';

params = array(
    'subject' => 'An e-card from HKUST',
    'body' => $body
);

if(drupal_mail('ecard', 'ecard_email', $single_email, language_default(), $params, $yourEmail, TRUE)) {
    echo 'Send';
}

function ecard_mail($key, &$message, $params) {
    $headers = array(
        'MIME-Version' => '1.0',
        'Content-Type' => 'text/html; charset=UTF-8; format=flowed',
        'Content-Transfer-Encoding' => '8Bit',
        'X-Mailer' => 'Drupal'
    );
    foreach($headers as $key => $value) {
        $message['headers'][$key] = $value;
    };

    $message['subject'] = $params['subject'];
    $message['body'][] = $params['body'];
} 
```

我在这里还缺少什么吗？

编辑：当我在 gmail 中查看电子邮件时，我可以看到：

```
X-PHP-Originating-Script: 381:system.mail.inc
MIME-Version: 1.0
Content-Type: text/html; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8Bit
X-Mailer: Drupal 
```

所以我猜HTML在发送之前被drupal过滤了

# entity-framework - 删除然后插入对象实体框架

> ID：12528014
> 
> 赞同：0
> 
> 时间：2012-09-21T09:40:37.003
> 
> 标签：entity-framework

我有这个方法可以删除对象（如果存在）并以任何方式插入新实例：

```
 internal void SaveCarAccident(WcfContracts.BLObjects.Contract.Dtos.CarAccident DTOCarAccident)
    {                       
         using(var context = BLObjectsFactory.Create())
        {
            context.ContextOptions.ProxyCreationEnabled = false;
            CarAccident NewCarAccident = ConvertToCarAccident(DTOCarAccident);
            CarAccident carFromDB = context.CarAccident.FirstOrDefault(current => current.CarAccidentKey.Equals(NewCarAccident.CarAccidentKey));
            if(carFromDB != null)
                context.CarAccident.DeleteObject(carFromDB);
            context.CarAccident.AddObject(NewCarAccident);
            context.SaveChanges();
        }
    } 
```

我有时会遇到表中已存在密钥的异常。
我想知道我保存更改的方式是否有问题（在删除和插入之后保存，而不是在每个之后保存）
当时我遇到异常时，很少有客户端同时激活该方法，我阻止了其他客户端已经在写了，但这可能是问题吗？
谢谢伊兰
_

# c# - 使用表单加载事件将字符串写入面板

> ID：12528016
> 
> 赞同：2
> 
> 时间：2012-09-21T09:40:43.350
> 
> 标签：c#, .net, winforms, gdi

我正在尝试使用`DrawString()`面板（`panel1`）上的方法绘制字符串。`Form1`我希望在 form( ) 加载时发生这种情况。但这不会发生。但是如果我在 click 事件处理程序中使用相同的代码（如下所示），则字符串被绘制出来`panel1`。我在哪里做错了？

```
 private void Form1_Load(object sender, EventArgs e)
    {

        /*string rand = getRandomString();
        textBox1.Text = rand;*/
        string rand = "Hello";
        SolidBrush sbr = new SolidBrush(Color.Black);
        Graphics g = panel1.CreateGraphics();
        FontFamily fam = new FontFamily("Magneto");
        Font font = new System.Drawing.Font(fam, 24, FontStyle.Bold);
        g.DrawString(rand, font, sbr, new Point(20, 20));
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T09:44:31.693

您发布的代码仅执行一次 - 当表单触发重绘时（例如在其上获取另一个表单等），它将消失。按钮单击事件中的方法也是如此。

在面板上绘制的方法如下：

```
private void Panel1_Paint(object sender, PaintEventArgs e)
{

    var g = e.Graphics;
    /*string rand = getRandomString();
    textBox1.Text = rand;*/
    string rand = "Hello";
    using (var sbr = new SolidBrush(Color.Black))
    { 
        FontFamily fam = new FontFamily("Magneto");
        Font font = new System.Drawing.Font(fam, 24, FontStyle.Bold);
        g.DrawString(rand, font, sbr, new Point(20, 20));
    }

} 
```

每次需要重绘时都会触发控件的绘制事件，因此无论您绘制什么都不会意外消失。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T09:47:17.780

此事件发生在窗体显示之前。因此，在您在面板上绘制文本后，面板会重新绘制并且您的更改会丢失。

如果重新绘制表单，即使在事件期间稍后绘制的文本`Click`也会消失，因此您需要处理 Panel 控件的`Paint`事件并在那里进行绘制。

# java - 单击 jmenu 时调用 actionperformed 方法

> ID：12528018
> 
> 赞同：0
> 
> 时间：2012-09-21T09:40:46.377
> 
> 标签：java, swing, events, awt, jmenu

我可以使用swing调用jmenu的actionperformed方法吗

我正在使用以下代码

```
 JMenu menu1= new JMenu("File");
     MenuBar mb= new MenuBar();
      mb.add(menu1);
      set JmenuBar(mb)
     menu1.addActionListener(this);

  public void actionPerformed(ActionEvent ae)
  {

      JOptionPane.showMessaageDialog(null,"menu clicked");
     // but its not working

      } 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:50:51.777

JMenu 旨在执行的操作是打开一个带有 JMenuItems 的弹出窗口，它不支持做任何其他事情（即使它支持，它也会让您的用户感到困惑）。自定义操作应该由弹出窗口中的 JMenuItems 处理。使用以下内容安装它们：

```
JMenu menu ..
Action myAction = new AbstractAction("Do XY") {
    public void actionPerformed(..) {
        // implement doing XY
    } 
};
menu.add(myAction); 
```

# ios - iOS6 中的手势识别器和自动布局，从中心缩放

> ID：12528019
> 
> 赞同：8
> 
> 时间：2012-09-21T09:40:50.390
> 
> 标签：ios, xcode, cgaffinetransform, autolayout, cgaffinetransformscale

下面的手势识别器代码通常会从中心缩放视图，但在 iOS6 中启用自动布局时不会。启用自动布局后，视图似乎从其原点缩放。其他仿射变换（尤其是缩放和旋转）也没有像我预期的那样工作。

任何人都有这个问题，或者可以启发我处理这个问题的正确方法？

```
- (IBAction)handlePinch:(UIPinchGestureRecognizer *)recognizer {    
    recognizer.view.transform = CGAffineTransformScale(recognizer.view.transform, recognizer.scale, recognizer.scale);
    recognizer.scale = 1;  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T06:52:46.147

使用自动布局，您应该编辑您的约束，因为转换和约束可能会发生冲突……我遇到了同样的问题，WWDC 的[这次](https://speakerdeck.com/wwdcman/session-228-best-practices-for-mastering-auto-layout/)会议对我帮助很大。观看 30:35 开始的视频

# iphone - 如何在不重新加载的情况下在表中显示最后添加的数据？

> ID：12528022
> 
> 赞同：1
> 
> 时间：2012-09-21T09:41:12.623
> 
> 标签：iphone, objective-c, xcode, uitableview, tablecell

我有一个表格视图，在 viewDidLoad 时有 20 行。现在我有一个按钮可以在表格中再添加 1 行数据。此时我不想重新加载表格并希望显示最后一行的更新表格。可能吗？如果是，请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:44:29.360

你可以这样做

```
[tableView beginUpdates];
[self.table insertRowsAtIndexPaths:path withRowAnimation:UITableViewRowAnimationRight];
[tableView endUpdates]; 
```

# java - Resteasy 没有找到 ExceptionMapper 提供者

> ID：12528024
> 
> 赞同：3
> 
> 时间：2012-09-21T09:41:34.133
> 
> 标签：java, rest, jax-rs, resteasy, provider

我已经尝试了很多方法来完成这项工作，但无论如何它都不起作用。另外，我没有找到有关此的适当文档。我正在尝试`CustomExceptionMapper`为我的`CustomException`类型实现一个。被`CustomException`正确抛出，但没有被捕获。

我认为用注释`CustomExceptionMapper`就`@Provider`足够了，但它没有被检测到。我试图允许在 web.xml 中进行扫描，但我发现了这个：[https](https://issues.jboss.org/browse/AS7-1739) ://issues.jboss.org/browse/AS7-1739 。我正在使用 7.0.1 Final。可能解决方案是更改版本，但这个决定不取决于我。

我还发现您可以尝试覆盖`getClasses()`or`getSingletons`方法并在那里添加您的`CustomExceptionMapper`，但它只是没有检测到它。

我的应用程序类的样子：

```
import java.util.HashSet;
import java.util.Set;

import javax.ws.rs.ApplicationPath;
import javax.ws.rs.core.Application;

@ApplicationPath("/service")
public class MyApp extends Application {

    @Override
    public Set<Class<?>> getClasses() {
        Set<Class<?>> classes = new HashSet<Class<?>>();
        classes.add(TestExceptionMapper.class); 
        return classes;

    }
} 
```

和映射器

```
@Provider
public class TestExceptionMapper implements ExceptionMapper<TestException> {

    public Response toResponse(TestException ex) {
       //something, but I cannot reach it.
    }
} 
```

Web.xml

```
 <context-param>
    <param-name>resteasy.providers</param-name>
    <param-value>com.mycompany.rest.exceptions.TestExceptionMapper</param-value>        
</context-param>

<servlet>
    <servlet-name>RestletServlet</servlet-name>
    <servlet-class>org.restlet.ext.servlet.ServerServlet</servlet-class>
    <init-param>
        <param-name>org.restlet.application</param-name>
        <param-value>com.mycompany.rest.application.myApplication</param-value>
    </init-param>
</servlet> 
```

以及通过 URL 调用的服务：

```
@Stateless
@Path("/somePath")
public class someService {

    @GET //this should be post, but for testing I'm using get
    @Path("/some/update/someth")
    @Produces()
    public String updateSometh(@NotNull @QueryParam("key") String key, @QueryParam(value = "somethID") Long somethID) throws TestException {
       // ....
    } 
```

如果你用正确的参数调用它，它就可以工作。但是，如果您输入了错误的参数，则不会。
我也想说应用程序正在运行，但我只想添加映射器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:27:19.060

异常映射器适用于从资源方法体中抛出的异常。如果您修改资源以抛出`TestException`：

```
public String updateSometh(@NotNull @QueryParam("key") String key, 
            @QueryParam(value = "somethID") Long somethID) throws TestException {
   throw new TestException();
} 
```

映射器应该捕获异常。问题出在你测试的方式上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T09:50:38.453

您的 web.xml 是否具有 resteasy 提供者的上下文参数？

像这样的东西

```
<context-param>
    <param-name>resteasy.providers</param-name>
    <param-value>packagename.TestExceptionMapper</param-value>
</context-param> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-08T13:18:54.020

您还可以通过覆盖 classes() 方法在您的 javax.ws.rs.core.Application 类中注册自定义 ExceptionMapper，如下所示：

```
@ApplicationPath("/api")
public class RestApplication extends Application {

  @Override
  public Set<Class<?>> getClasses() {
    Set<Class<?>> classes = new HashSet<>();
    // other resource classes ...

    classes.add(CustomExceptionMapper.class);
    return classes;
  }
} 
```

ExceptionMapper 本身可以使用 java.lang.Exception 作为 Type 参数来处理任何类型的异常。

```
@Provider
public class CustomExceptionMapper implements ExceptionMapper<Exception> {
    //...
} 
```

# svn - 从 SVN 获取代码 - 使用特定版本

> ID：12528028
> 
> 赞同：0
> 
> 时间：2012-09-21T09:41:43.230
> 
> 标签：svn

我有一个关于从 SVN 获取代码的问题。如果有人能给我一些完成这项工作的建议，我们将不胜感激。

我在存储库托管上的应用程序有以下场景

修订版 4（修订版 3 中更改的 1 个更改文件）修订版 3（更改了 1 个文件）修订版 2（添加了 1 个文件）

我想获得一份工作副本，其中包括从修订 2 到 Head 的所有更改，但不包括修订 3 的更改。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:51:38.010

也许这可以帮助你？

```
svn merge <repository_location> . -c -3 
```

但也要谨慎，想想以下情况：

```
revision2: you change some text
revision3: you add some text
revision4: you change the text added in revision3 
```

如果您想要 2 和 4 的更改，而不是 3，那么您就有问题了。因为在这种情况下，修订版 4 对修订版 3 中所做的添加一无所知。当您合并一系列修订版时，这也是分支/合并时的常见问题，但您忘记合并分支中的几个修订版。合并回您的后备箱后，它们将消失。但我现在飘了...

# cakephp-2.0 - 从cakephp中的父选择框填充选择框

> ID：12528031
> 
> 赞同：0
> 
> 时间：2012-09-21T09:41:49.283
> 
> 标签：cakephp-2.0, multi-select

我想在我的应用程序中实现以下图像：

![在此处输入图像描述](../Images/a53a4b6adf97a41cfdf4b95ca92902a4.png)`ADD`在这里，我想在单击按钮 时用第一个框中的选定项目填充第二个框。

我如何用 cakephp 实现这个。

我是 cakephp 的新手

谷歌中的图片：

[http://lh4.ggpht.com/70kyxWGqbi72F5L-DjvJ09UUkDVpXjsS5_6_ndgjRfPE7hmNfnlXRCxNzddgBcfh8YqI6w=s162](http://lh4.ggpht.com/70kyxWGqbi72F5L-DjvJ09UUkDVpXjsS5_6_ndgjRfPE7hmNfnlXRCxNzddgBcfh8YqI6w=s162)

如果有任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:01:59.590

我打赌你可以用 PHP 做到这一点，但我认为 jQuery 会是一个更简单更好的选择

```
$("#move").click(function(){
    $("#one :selected").each(function(index, item){
        $("#two").append(item);
    });
});​ 
```

检查工作的jsfiddle [http://jsfiddle.net/4fCFb/](http://jsfiddle.net/4fCFb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:16:14.717

有一个插件可以从单个多选框创建这种效果。看看这个：

[http://www.quasipartikel.at/multiselect/](http://www.quasipartikel.at/multiselect/)

# ssis - 复制表到mysql到mysql

> ID：12528033
> 
> 赞同：0
> 
> 时间：2012-09-21T09:42:00.340
> 
> 标签：ssis

> 大家好
> 
> 我想将表从mysql复制到mysql。
> 
> 源MYSQL服务器IP为：172.16.10.50
> 
> 目标MYSQL服务器IP为：172.16.10.152
> 
> 我使用了 ADO.Net 源和 Ado.Net 目标。
> 
> 但在执行时我遇到了这个错误。
> 
> [ADO NET 目的地 [16]] 错误：数据插入过程中发生异常，提供程序返回的消息是：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“status”、“status_name”、“selectable”、“campaign_id”、“human_answered”、“categor”附近使用正确的语法
> 
> [SSIS.Pipeline] 错误：SSIS 错误代码 DTS_E_PROCESSINPUTFAILED。在处理输入“ADO NET 目标输入”(19) 时，组件“ADO NET 目标”(16) 上的 ProcessInput 方法失败，错误代码为 0xC020844B。已识别的组件从 ProcessInput 方法返回错误。该错误是特定于组件的，但该错误是致命的，将导致数据流任务停止运行。在此之前可能会发布错误消息，其中包含有关失败的更多信息。
> 
> 请帮我解决这个问题。
> 
> 问候 Neha Prajapati

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:43:08.973

如果您仔细阅读错误消息（或者可能不够模糊），您会看到错误消息指出您有一个**Syntax Error**。您尝试通过 SSIS 运行的查询是什么？

# c# - 在 MenuItem onclick 中交换图像

> ID：12528036
> 
> 赞同：0
> 
> 时间：2012-09-21T09:42:09.620
> 
> 标签：c#, asp.net, menuitem

有没有办法在 MenuItem Control Onclick 事件中交换图像。我的代码为

```
<asp:Menu ID="menuTabs" CssClass="menuTabs" StaticMenuItemStyle-CssClass="tab" StaticSelectedStyle-CssClass="selectedTab"                        OnMenuItemClick="menuTabs_MenuItemClick" runat="server" Orientation="Horizontal"
BackColor="#f4f4f4" BorderStyle="None">
<StaticSelectedStyle CssClass="selectedTab"></StaticSelectedStyle>
<StaticMenuItemStyle CssClass="tab"></StaticMenuItemStyle>
<Items>
<asp:MenuItem Text="" Value="0" Selected="true" ImageUrl="~/Images/Widget1.jpg"    />
<asp:MenuItem Text="" Value="1" ImageUrl="~/Images/Widget2.jpg"/>
</Items>
</asp:Menu>    
<asp:MultiView ID="multiTabs" ActiveViewIndex="0" runat="server">
<asp:View>
</asp:View>
</asp:MultiView> 
```

代码隐藏：

```
 protected void menuTabs_MenuItemClick(object sender, MenuEventArgs e)
    {
    multiTabs.ActiveViewIndex = Int32.Parse(menuTabs.SelectedValue);
    int i;            
    for (i = 0; (i <= (menuTabs.Items.Count - 1)); i++)
    { if ((i == Int32.Parse(e.Item.Value)))
    { menuTabs.Items[i].ImageUrl = "/Images/Widget1.jpg";
      menuTabs.Items[i].PopOutImageUrl = "/Images/Widget2.png";
    }
    else
    { menuTabs.Items[i].ImageUrl = "/Images/Widget1_over.jpg";
      menuTabs.Items[i].PopOutImageUrl = "/Images/Widget2_over.png";
    }
    } } 
```

我不能在 Jquery 中使用正常的图像交换，因为控件项也没有 id 值...任何关于交换 MenuItem 控件的建议。??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:46:38.497

阿特拉特我得到了这个。

```
 protected void menuTabs_MenuItemClick(object sender, MenuEventArgs e)
        {
            multiTabs.ActiveViewIndex = Int32.Parse(menuTabs.SelectedValue);
            if (menuTabs.Items[0].Selected == true)
            {

                menuTabs.Items[0].ImageUrl = "~/Images/widget1_over.png";
                menuTabs.Items[1].ImageUrl = "~/Images/widget2.png";
            }

            if (menuTabs.Items[1].Selected == true)
            {
                menuTabs.Items[1].ImageUrl = "~/Images/widget2_over.png";
                menuTabs.Items[0].ImageUrl = "~/Images/widget1.png";

            }
        } 
```

# lotus-notes - 带有富文本的 Firefox 中的 XPage 加载时间

> ID：12528043
> 
> 赞同：1
> 
> 时间：2012-09-21T09:42:21.733
> 
> 标签：lotus-notes, xpages

我用富文本编辑器和日期选择器创建了一个 XPage。当我使用此 XPage 打开文档并从读取模式更改为编辑模式时。加载（无缓存）需要 5-10 秒（chrome 只需 0.5 秒）。

如您所见，问题是它会加载大量的 dojo 资源。它仅在富文本编辑器或/和日期选择器位于 XPage 中时发生。

有没有办法告诉 domino 服务器将 dojo lib 作为一个压缩文件发送？或者是否有另一种解决方案来解决这个问题。

谢谢。

**更新** 该属性`xsp.resources.aggregate=true`不适用于此问题。

![萤火虫延迟](../Images/c56a7ee69f582db9c51f3cf08d538a16.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:51:02.880

您可以使用“*使用运行时优化的 javascript 和 CSS 资源*”。此选项可在*应用程序属性*的“ *XPages* ”部分中找到。这将添加参数

```
xsp.resources.aggregate=true 
```

到您的*xsp.properties*文件并为您的整个应用程序启用该功能。

或者，您可以仅通过将以下行添加到 XPage 源代码来为一个 XPage 启用此功能：

```
<xp:this.properties>
    <xp:parameter name="xsp.resources.aggregate" value="true" />
</xp:this.properties> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T11:52:53.530

最后我发现了问题。仅当editbutton在带有文档和富文本编辑器的面板上进行部分更新时才会导致。如果我进行完全刷新，它将加载压缩文件。

# php - php中片段插入过程的自动化

> ID：12528044
> 
> 赞同：0
> 
> 时间：2012-09-21T09:42:23.493
> 
> 标签：php, automation

好吧，我不知道这一点以及如何做到这一点，但这让我发疯了。所以这就是事情..

假设我在 20 个文件中有这段代码。

```
while(//some_condition):
    .....
   // do something here
    .....
endwhile; 
```

现在我需要将这个循环包装在一个条件标签中，比如这样。

```
if(// condition_for_if ):
    while(//some_condition):
        .....
        //do something here
        .....
    endwhile;
endif; 
```

问题是，如果您在大量文件中有此任务，有时在一个文件中包含多个实例，这是一项超级乏味的工作。

我怎样才能自动化这个过程？我可以在 php 中编写一个脚本来做到这一点吗？起初，我想到了像 wordpress 这样的安装程序脚本的想法，但我清楚地明白不能那样做。

该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:49:33.150

将您的代码放入它自己的单独文件中的函数中，将其包含在您使用它的脚本中，并在需要时简单地调用该函数，并传递任何所需的参数。或者您甚至可以将单独的文件设为一个类并这样做。

# sql - SQL优化：从一个表中选择不同的

> ID：12528048
> 
> 赞同：-1
> 
> 时间：2012-09-21T09:42:31.080
> 
> 标签：sql, oracle, query-optimization

假设我有这样的 SQL

```
select  distinct CUSTOMER_PRODUCT_ORDER as ORDER
from MASTER_LIST 
where PROJECT_ID     = "ABCDD"
 order by   ORDER ASC 
```

如何优化运行此 sql 的性能？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-21T09:44:16.970

我认为在大多数情况下，使用 group by 会更好，性能更高：

```
select  CUSTOMER_PRODUCT_ORDER as ORDER
from MASTER_LIST 
where PROJECT_ID     = "ABCDD"
GROUP BY CUSTOMER_PRODUCT_ORDER
 order by   ORDER ASC 
```

# javascript - 如果移除了一个 DOM 元素，它的监听器是否也会从内存中移除？

> ID：12528049
> 
> 赞同：391
> 
> 时间：2012-09-21T09:42:32.513
> 
> 标签：javascript, jquery, dom, memory, memory-leaks

如果移除了一个 DOM 元素，它的监听器是否也会从内存中移除？

* * *

## 回答 #1

> 赞同：350
> 
> 时间：2012-09-21T09:43:38.987

## 现代浏览器

**纯 JavaScript**

如果被移除的 DOM 元素是无引用的（没有指向它的引用），那么**是**的 - 元素本身被垃圾收集器以及与之关联的任何事件处理程序/侦听器拾取。

```
var a = document.createElement('div');
var b = document.createElement('p');
// Add event listeners to b etc...
a.appendChild(b);
a.removeChild(b);
b = null; 
// A reference to 'b' no longer exists 
// Therefore the element and any event listeners attached to it are removed. 
```

然而; 如果存在仍然指向所述元素的引用，则该元素及其事件侦听器将保留在内存中。

```
var a = document.createElement('div');
var b = document.createElement('p'); 
// Add event listeners to b etc...
a.appendChild(b);
a.removeChild(b); 
// A reference to 'b' still exists 
// Therefore the element and any associated event listeners are still retained. 
```

**jQuery**

可以公平地假设 jQuery 中的相关方法（例如`remove()`）将以完全相同的方式运行（考虑使用example`remove()`编写）。`removeChild()`

然而，**这不是真的**；jQuery 库实际上有一个内部方法（未记录，理论上可以随时更改）称为`cleanData()` [（这是这个方法的样子](http://pastebin.com/7SntG5y2)），它会在从 DOM 中删除时自动清理与元素关联的所有数据/事件（通过. `remove()`,`empty()`等`html("")`）。

* * *

## 旧版浏览器

较旧的浏览器 - 特别是较旧版本的 IE - 由于事件侦听器保持对它们所附加的元素的引用而存在内存泄漏问题。

如果您想更深入地了解用于修复旧版 IE 版本内存泄漏的原因、模式和解决方案，我完全建议您阅读[**这篇 MSDN 文章，了解和解决 Internet Explorer 泄漏模式。**](http://msdn.microsoft.com/en-us/library/ie/bb250448%28v=vs.85%29.aspx)

还有几篇与此相关的文章：

*   [JScript 内存泄漏](http://javascript.crockford.com/memory/leak.html)
*   [IE8 内存泄漏](http://blog.j15r.com/blog/2009/07/12/Memory_Leaks_in_IE8)
*   [JavaScript 内存泄漏](http://javascript.info/tutorial/memory-leaks)

在这种情况下，自己手动删除侦听器可能是一个好习惯（仅当内存对您的应用程序至关重要并且您实际上是针对此类浏览器时）。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-21T10:11:57.287

关于 jQuery：

> .remove() 方法从 DOM 中取出元素。当您想要删除元素本身以及其中的所有内容时，请使用 .remove()。除了元素本身，所有与元素关联的绑定事件和 jQuery 数据都将被删除。要删除元素而不删除数据和事件，请改用 .detach()。

参考：[http ://api.jquery.com/remove/](http://api.jquery.com/remove/)

jQuery v1.8.2`.remove()`源代码：

```
remove: function( selector, keepData ) {
    var elem,
        i = 0;

    for ( ; (elem = this[i]) != null; i++ ) {
        if ( !selector || jQuery.filter( selector, [ elem ] ).length ) {
            if ( !keepData && elem.nodeType === 1 ) {
                jQuery.cleanData( elem.getElementsByTagName("*") );
                jQuery.cleanData( [ elem ] );
            }

            if ( elem.parentNode ) {
                elem.parentNode.removeChild( elem );
            }
        }
    }

    return this;
} 
```

显然 jQuery 使用`node.removeChild()`

据此：[https](https://developer.mozilla.org/en-US/docs/DOM/Node.removeChild) ://developer.mozilla.org/en-US/docs/DOM/Node.removeChild ，

`The removed child node still exists in memory, but is no longer part of the DOM. You may reuse the removed node later in your code, via the oldChild object reference.`

即事件侦听器可能会被删除，但`node`仍存在于内存中。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-07T00:03:27.437

不要犹豫，观察堆以查看事件处理程序中的内存泄漏，该事件处理程序保持对带有闭包的元素的引用，并且元素保持对事件处理程序的引用。

垃圾收集器不喜欢循环引用。

通常的内存泄漏情况：承认一个对象有一个元素的引用。该元素具有对处理程序的引用。并且处理程序有一个对象的引用。该对象具有对许多其他对象的引用。该对象是您认为通过从您的集合中取消引用它而丢弃的集合的一部分。=> 整个对象及其引用的所有内容都将保留在内存中，直到页面退出。=> 你必须为你的对象类考虑一个完整的杀死方法，或者信任一个 mvc 框架。

此外，不要犹豫使用 Chrome 开发工具的保留树部分。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-06-08T11:58:26.633

只是扩展其他答案...

**删除元素时不会删除委托的事件处理程序。**

```
$('body').on('click', '#someEl', function (event){
  console.log(event);
});

$('#someEL').remove(); // removing the element from DOM 
```

现在检查：

```
$._data(document.body, 'events'); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-03-30T06:39:21.340

关于`jQuery`，以下常用方法还将删除其他构造，例如数据和事件处理程序：

[消除（）](https://api.jquery.com/remove/)

> 除了元素本身，所有与元素关联的绑定事件和 jQuery 数据都将被删除。

[空的（）](https://api.jquery.com/empty/)

> 为了避免内存泄漏，jQuery 在删除元素本身之前从子元素中删除其他构造，例如数据和事件处理程序。

[html()](http://api.jquery.com/html/)

> 此外，在用新内容替换这些元素之前，jQuery 从子元素中删除了其他结构，例如数据和事件处理程序。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-21T09:43:10.917

是的，垃圾收集器也会删除它们。不过，旧版浏览器可能并非总是如此。

# css - 水平对齐 Bootstrap Carousel 中的图像并且不限制高度

> ID：12528050
> 
> 赞同：0
> 
> 时间：2012-09-21T09:42:36.507
> 
> 标签：css, twitter-bootstrap, carousel

我正在使用 Twitter Bootstrap 2 for Carousel：

```
 <div id="pageCarousel" class="carousel slide" >
        <div class="carousel-inner">

                <div class="item">
                    <img src="image1.jpg"/>
                </div>

                <div class="item">
                    <img src="image2.jpg"/>
                </div>

                <div class="item">
                    <img src="image3.jpg"/>
                </div>

        </div>

        <!-- carousel nav -->
        <a class="carousel-control left" href="#pageCarousel" data-slide="prev">&lsaquo;</a>
        <a class="carousel-control right" href="#pageCarousel" data-slide="next">&rsaquo;</a>
    </div> 
```

我想要实现的是水平对齐图像。并且还显示图像的完整高度。

# eclipse - EntityManager 的 getReference 不是延迟加载

> ID：12528051
> 
> 赞同：4
> 
> 时间：2012-09-21T09:42:42.290
> 
> 标签：eclipse, jpa, persistence

尝试持久化包含成员变量的实体是不可能的，该成员变量是对不在当前持久性上下文中的其他实体的引用，当发生这种情况时，需要获取所需的实体并将其设置在原始实体中尊重这种关系，并被允许坚持下去。

当我需要完成此操作时，我通常会使用 EntityManager 的*find*方法，但这会访问数据库并获取整个实体以及它的关系，这些关系可能没有为延迟加载进行注释。我很高兴了解*getReference*，它可能不会访问数据库，而是返回只有主键可用的代理表示，而这实际上是这种情况所需的全部。

不幸的是，经过一些调试后，当我通过 Eclipse 调试模式“检查”它时，我发现自己能够查看有关*getReference*实体的所有信息，而不仅仅是主键。

我错过了什么吗？我被调试模式欺骗了吗？是否可以像在代理引用上使用 getter 方法一样获取信息？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:56:51.043

当您使用 Eclipse 调试器检查它时，调试器会初始化代理。只需打开 SQL 日志记录，执行该`em.getReference()`方法，并验证您的 JPA 引擎没有执行任何选择语句。

# image-processing - 在 WinRT 中将保存的照片转换为 WritableBitmap

> ID：12528054
> 
> 赞同：0
> 
> 时间：2012-09-21T09:42:47.397
> 
> 标签：image-processing, windows-runtime

我拍了一张照片并保存了，但我需要对其进行图像处理。我尝试使用以下代码，但`WritableBitmap`不接受位图，它需要一个流。

var writeableBitmap = new WritableBitmap(位图);

这是代码：

```
CameraCaptureUI cam = new CameraCaptureUI();
var capturedImage = await cam.CaptureFileAsync(CameraCaptureUIMode.Photo);
if (capturedImage != null)
{
    var img = new BitmapImage();
    img.SetSource(await capturedImage.OpenReadAsync());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T22:06:53.423

这应该可以解决问题 - 您需要改用 OpenAsync。

```
 var dialog = new CameraCaptureUI();
            var file = await dialog.CaptureFileAsync(CameraCaptureUIMode.Photo);
            if (file != null)
            {
                var stream = await file.OpenAsync(FileAccessMode.Read);
                var img = new BitmapImage();
                img.SetSource(stream);
                AccountPictureImage.Source = img;
            } 
```

# android - Android GridView - 滚动时随机定位

> ID：12528055
> 
> 赞同：3
> 
> 时间：2012-09-21T09:42:52.263
> 
> 标签：android, gridview, android-gridview

我正在尝试使用 gridview 使用[本](http://www.mkyong.com/android/android-gridview-example/)教程制作一些菜单。

不幸的是，当我滚动菜单时，菜单项的位置是随机的。我正在使用 .xml 来显示图像和标题。

顺便说一句：有没有办法对 GridView 进行排序？

```
public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View gridView;

    if (convertView == null) {
     String tmp = menuItems[position];

        gridView = new View(context);

        gridView = inflater.inflate(R.layout.menuitem, null);

        TextView label = (TextView) gridView.findViewById(R.id.menuitem_label);
        label.setText(context.getString(context.getResources().getIdentifier("string/txt_"+tmp, null, context.getPackageName())));

        ImageView img = (ImageView) gridView.findViewById(R.id.menuitem_image);
     SVG svg_img = SVGParser.getSVGFromResource(context.getResources(), context.getResources().getIdentifier("raw/"+tmp, null, context.getPackageName()));
     if (svg_img != null)
        img.setImageDrawable(svg_img.createPictureDrawable());

  } else {
     gridView = (View) convertView;
  }

    return gridView;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T10:05:19.457

```
 public View getView(int position, View convertView, ViewGroup parent) {
        View gridView;
            if (convertView == null) {  // if it's not recycled, initialize some attributes
             LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            gridView = inflater.inflate(R.layout.menuitem, null);

           }
           else
           { 
             gridView= convertView;
           }

         TextView label = (TextView) gridView.findViewById(R.id.menuitem_label);
        label.setText(context.getString(context.getResources().getIdentifier("string/txt_"+tmp, null, context.getPackageName())));

    ImageView img = (ImageView) gridView.findViewById(R.id.menuitem_image);
     SVG svg_img = SVGParser.getSVGFromResource(context.getResources(),   context.getResources().getIdentifier("raw/"+tmp, null, context.getPackageName()));

    img.setImageDrawable(svg_img.createPictureDrawable());

        return gridView;

    } 
```

请研究更多关于网格视图和回收的信息。网络中有很多教程以及堆栈溢出中的教程

我只是重新创建你的代码。我还没试过

# android - 在android中注册新的mime类型

> ID：12528056
> 
> 赞同：11
> 
> 时间：2012-09-21T09:42:53.887
> 
> 标签：android, email, mime-types, attachment

这与[如何从电子邮件应用程序中使用我的应用程序打开附件有关的问题？(mime type, intent filter ...)](https://stackoverflow.com/questions/12423446/how-to-open-an-attachment-with-my-applicacion-from-within-the-email-app-mime-t)我以为我已经解决了，但事实并非如此。

我发现一些电子邮件客户端（例如，三星 Galaxy SII 内置电子邮件客户端）不支持 sendIntent.setType() 方法，并且在向电子邮件添加附件时，它不会添加 setType 方法中指定的 mime 类型. 结果是当电子邮件到达时我无法打开附件。

因此，为了能够从任何电子邮件客户端打开附件，我认为他们唯一的方法就是创建一个与我的自定义扩展相关联的新 mime 类型。

但我找不到任何方法来注册新的 mime 类型。我知道它可以像某些应用程序那样完成（ASTRO 文件资源管理器），但我不知道在哪里可以找到有关添加新 mime 类型的信息。

**编辑（2012 年 10 月 1 日）** ASTRO 文件资源管理器仅为其进程添加 mime 类型。它们无法在其进程之外被读取，因此我没有任何可以使用的示例。

我一直在查看 MimeTypeMap 源代码，看起来它只使用一组预定义的 mime 类型，您不能添加新的类型。

我尝试使用反射（只是为了检查）并且能够添加一个 mime 类型，但它只对我的进程可见，就好像我的进程有自己的 MimeTypeMap 副本，所以电子邮件客户端仍然不会打开附件。

有人可以帮忙吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T16:34:05.743

据我了解，您的数据规范仅基于文件扩展名`.xyz`。因此，当您在意图过滤器中声明它时，您需要确保您对除`patternPath`.

尝试将其拆分为多个`<data>`标签，并确保它与`mimeType`:

```
 <data android:scheme="file" />                               
    <data android:mimeType="*/*" />
    <data android:pathPattern=".*\\.xyz" />
    <data android:host="*" /> 
```

另请参阅[文档`<data>`](http://developer.android.com/guide/topics/manifest/data-element.html)以确保所有子类型匹配。

据我了解，您文件的底层数据结构可能会导致某些设备出现问题。例如，假设您的`.xyz`文件类型是 XML；电子邮件客户端可能认为提供的`text/xml`mime 类型比您声明的类型更具体，而是调用它。

在这种情况下，解决方案可能是声明多个意图过滤器，其中一次还包括`<data android:mimeType="text/xml" />`. （这或多或少符合[这个答案](https://stackoverflow.com/a/7055944/154306)的建议。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-25T14:48:27.980

尝试将**action.SEND**和**action.SEND_MULTIPLE**添加到 Manifest - 您的应用程序的定义。为我工作，所以我的应用程序出现在应用程序列表中，我可以共享文件和内容。

```
<intent-filter>
 <action android:name="android.intent.action.GET_CONTENT" />
 <action android:name="android.intent.action.SEND" />
 <action android:name="android.intent.action.SEND_MULTIPLE" />
 <category android:name="android.intent.category.DEFAULT" />
 <data android:mimeType="*/*" />
</intent-filter> 
```

# push-notification - 发送错误令牌后iOS推送通知错误

> ID：12528057
> 
> 赞同：0
> 
> 时间：2012-09-21T09:42:59.637
> 
> 标签：push-notification, apple-push-notifications, apns-php

我一直在实现一个小的 PHP 脚本，它将推送通知发送到 Apple 的 APN 服务器。我有一个数据库，其中包含在我的应用程序中注册推送通知的所有设备令牌。我的脚本将查询数据库中的令牌并将它们发送给 Apple。一切都很好，但是......我手动将错误的令牌插入到我的表中并再次执行脚本。

我已经意识到，在将错误的令牌发送给 Apple 之后，之后的所有通知都不会到达设备。如果一切正常，Apple 似乎不会返回任何 OK，但如果出现问题，它会发送一个 KO 代码。对于那个错误的令牌，我收到了 Apple 的错误消息，但之后我没有收到所有其他通知的任何回复。

我只为数据库中的所有令牌打开一个连接。

我用这一行准备了一个套接字上下文：

```
$streamContext = stream_context_create(array(
   'ssl' => array(
    'local_cert' => $this->signFile
   )
  )); 
```

然后启动与 APN 服务器的通信通道：

```
$this->hFile = stream_socket_client(self::$serverUrl[$environment], $err, $errstr, 60, STREAM_CLIENT_CONNECT, $streamContext); 
```

最后我发送消息：

```
fwrite($this->hFile, $command); 
```

我想为每个通知设置一个新的连接，但我想先询问 SO 意见......

顺便说一句，我知道 PHP 不是最好的选择，但它是其他地方的要求，我们被迫以这种方式设置系统。

谢谢你，祝你有美好的一天，

亚历克斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:57:07.050

我终于找到了解决方案：一旦检测到令牌无效，我就会关闭连接并再次打开它，以便在错误的令牌之后立即开始发送令牌。

# c# - gdal_retile.py 中的更改以设置自己的比例

> ID：12528059
> 
> 赞同：0
> 
> 时间：2012-09-21T09:43:03.290
> 
> 标签：c#, python, gdal

我使用`gdal_retile.py`脚本将栅格切割成图块（重写为`C#`）。一切正常，但我希望我的脚本以不同的方式工作。我想要的是改变第一级规模。我希望使用以下模式计算它：

```
private const double MetersPerInch = 0.0254;
private const double DPI = 96;

private double GetScale(int meters, int pixels)
{
    return meters/pixels/MetersPerInch*DPI;
} 
```

**例如。**

如果我得到一个大小为 的栅格`4k x 4k px`，`100 km`那么：
`scale = 100000 / 4000 / 0.0254 * 96 = ~94488`
现在我需要找到第一个比计数高的比例，它是 2 的幂。在这种情况下，它是`1:131072`。我应该将它设置为我的第一级规模。下一级的规模应该是 2 的幂：`[1:262144, 1:524288, 1:1048576, ...]`。

any1 可以帮我修改脚本吗？我不在乎语言（可以用`Python`or完成`C#`）。

提前感谢任何解决方案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:54:20.277

好的，我做到了！

这是源代码（也许 some1 将来会需要它 - 小心，因为我在行中进行了更改`370`，`432`并且`433`- 如果你想将我的更改恢复为原始代码，只需将`_scaleFactor`变量替换为`2`并删除所有`_scaleFactor`计算）：[http： //pastebin.com/0qUCVk9J](http://pastebin.com/0qUCVk9J)

# android - 如何在中心显示自定义对话框

> ID：12528079
> 
> 赞同：0
> 
> 时间：2012-09-21T09:44:06.670
> 
> 标签：android, customdialog

我的 android 应用程序有一个自定义对话框。它显示图像和文本，左右两个按钮。这是我的对话框

```
public class GalleryPopUp extends Dialog {

    private Context context;
    private ArrayList<Bitmap> bitmapList = null;
    private List<News> homeNewsList = null;
    private Button btnArrowLeft;
    private Button btnArrowRight;
    private ImageView imageView;
    private int selectedIndex = 0;
    private TextView textView;
    static final RelativeLayout.LayoutParams FILL = new RelativeLayout.LayoutParams(
            LayoutParams.FILL_PARENT,
            LayoutParams.FILL_PARENT);

    public GalleryPopUp(Context context, ArrayList<Bitmap> bitmapList,
            List<News> homeNewsList, int selectedIndex) {
        super(context, android.R.style.Theme_Translucent_NoTitleBar);
        this.context = context;
        this.bitmapList = bitmapList;
        this.homeNewsList = homeNewsList;
        this.selectedIndex = selectedIndex;

    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = inflater.inflate(R.layout.gallery_popup, null);
        btnArrowLeft = (Button)view.findViewById(R.id.btnArrowLeft);
        btnArrowRight = (Button)view. findViewById(R.id.btnArrowRight);
        imageView = (ImageView) view.findViewById(R.id.imageView);
        textView = (TextView)view. findViewById(R.id.textView);
        imageView.setScaleType(ImageView.ScaleType.FIT_XY);
        imageView.setImageBitmap(bitmapList.get(selectedIndex));
        News news = homeNewsList.get(selectedIndex);
        textView.setTextSize(15);
        textView.setTypeface(TypeFaceUtils.TYPEFACE_THOOLIKA);
        textView.setText(news.getNewsTitle());
        btnArrowLeft.setOnClickListener(listenerbtnArrowLeft);
        btnArrowRight.setOnClickListener(listenerbtnArrowRight);
        setContentView(view);
    }

    private android.view.View.OnClickListener listenerbtnArrowLeft = new android.view.View.OnClickListener() {

        @Override
        public void onClick(View v) {
            selectedIndex = selectedIndex - 1;
            if (selectedIndex < homeNewsList.size() && selectedIndex >= 0) {
                imageView.setImageBitmap(bitmapList.get(selectedIndex));
                News news = homeNewsList.get(selectedIndex);
                textView.setTypeface(TypeFaceUtils.TYPEFACE_THOOLIKA);
                textView.setText(news.getNewsTitle());
            }
            else
            {
                GalleryPopUp.this.dismiss();
            }
        }
    };

    private android.view.View.OnClickListener listenerbtnArrowRight = new android.view.View.OnClickListener() {

        @Override
        public void onClick(View v) {
            selectedIndex = selectedIndex + 1;
            if (selectedIndex < homeNewsList.size()) {
                imageView.setImageBitmap(bitmapList.get(selectedIndex));
                News news = homeNewsList.get(selectedIndex);
                textView.setTypeface(TypeFaceUtils.TYPEFACE_THOOLIKA);
                textView.setText(news.getNewsTitle());
            }
            else
            {
                GalleryPopUp.this.dismiss();
            }
        }
    };
} 
```

Gallery_popup.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/imageView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true" />

    <TextView
        android:id="@+id/textView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/imageView"
        android:layout_gravity="center_horizontal|bottom"
        android:gravity="center_horizontal"
        android:text=""
        android:textColor="#000000" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/imageView"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/imageView"
        android:gravity="center" >

        <Button
            android:id="@+id/btnArrowRight"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/btn_arrow_right" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/imageView"
        android:layout_alignParentLeft="true"
        android:layout_alignTop="@+id/imageView"
        android:gravity="center" >

        <Button
            android:id="@+id/btnArrowLeft"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:background="@drawable/btn_arrow_left" />
    </LinearLayout>

</RelativeLayout> 
```

我怎样才能在父母的中心准确地显示这个对话框。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:39:58.557

最好的方法是像这样改变你的布局：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"

        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    <RelativeLayout 
        android:id="@+id/relativeLayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"

    android:layout_centerInParent="true"
 > 
```

试试看，让我知道它是否有效。

```
 <TextView
            android:id="@+id/textView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/imageView"
            android:layout_gravity="center_horizontal|bottom"
            android:gravity="center_horizontal"
            android:text=""
            android:textColor="#000000" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/imageView"
            android:layout_alignParentRight="true"
            android:layout_alignTop="@+id/imageView"
            android:gravity="center" >

            <Button
                android:id="@+id/btnArrowRight"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/btn_arrow_right" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/imageView"
            android:layout_alignParentLeft="true"
            android:layout_alignTop="@+id/imageView"
            android:gravity="center" >

            <Button
                android:id="@+id/btnArrowLeft"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_centerVertical="true"
                android:background="@drawable/btn_arrow_left" />
        </LinearLayout>

    </RelativeLayout>
   </RelativeLayout> 
```

# objective-c - 在 Quartz2d 中创建具有多个页面的 PDF 文件

> ID：12528082
> 
> 赞同：1
> 
> 时间：2012-09-21T09:44:14.113
> 
> 标签：objective-c, ios, pdf, core-graphics, cgpdfdocument

我目前正在开发 iOS PDF 阅读器。我能够在 PDF 文件的页面上绘制注释。但是，我无法导出这样一个超过一页的 PDF 文件。

我写了一个只能导出第一页的函数：

```
- (void)createPDFFileFromPath:(NSString*)oldPath to:(NSString*)newPath{

CFStringRef path = CFStringCreateWithCString (NULL, [oldPath cStringUsingEncoding:NSUTF8StringEncoding],kCFStringEncodingUTF8);

CFURLRef url = CFURLCreateWithFileSystemPath (NULL, path, kCFURLPOSIXPathStyle, 0);
CGPDFDocumentRef document = CGPDFDocumentCreateWithURL(url);
int pageCount = CGPDFDocumentGetNumberOfPages(document);
CGPDFPageRef pdfPage = CGPDFDocumentGetPage(document, 1);
CGRect frame = CGPDFPageGetBoxRect(pdfPage, kCGPDFMediaBox);

UIGraphicsBeginPDFContextToFile(newPath, frame, nil);
UIGraphicsBeginPDFPageWithInfo(frame, nil);

CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetRGBFillColor(context,1.0,1.0,1.0,1.0);
CGContextFillRect(context, frame);

//Draw other graphics e.g. annnoation into context here.

// Flip the context so that the PDF page is rendered right side up.
CGContextTranslateCTM(context, 0.0, frame.size.height);
CGContextScaleCTM(context, 1.0, -1.0);

CGContextDrawPDFPage(context, pdfPage);
UIGraphicsEndPDFContext();
CGPDFDocumentRelease(document); 
```

}

如何修改此方法以导出多个页面？

# java - 我应该使用 Spring AOP 吗？

> ID：12528084
> 
> 赞同：9
> 
> 时间：2012-09-21T09:44:22.770
> 
> 标签：java, spring, spring-mvc

我是 Spring 新手，我想澄清一下。我为私人机构开发了一个学生管理应用程序。它可以记录学生详细信息（地址、电话号码、注册课程、年级等）、课程详细信息、学生付款、报告生成模块、讲座详细信息等，

但是，我并没有使用太多的 AOP 来开发这个应用程序，除了日志记录这样的极少数情况。但据我所知，Spring AOP 是 Spring 的重要组成部分。我的问题是，AOP 是 spring 的重要组成部分，还是我错过了我应该使用它的地方（我猜我犯了新手错误，即不经常使用 AOP）？如果是这样，你能否澄清我应该在哪里使用这些概念，以便我可以从我的错误中吸取教训。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T10:48:24.160

我的观点是，如果您正在构建一个框架（如 spring），AOP 非常棒，因为它允许框架实现不会对框架用户产生太大影响的横切代码，例如在 spring 中：

```
@Transactional 
```

服务类中的这一行代码调用重要的事务管理功能。

但是，对于普通的网络应用程序（例如），应谨慎使用自定义方面，因为：

*   它们的可读性较差
*   一种先进的技术，因此并非所有开发人员都会熟悉它们
*   不完全支持工具（例如 checkstyle、PMD、findBugs 不支持方面），请参阅：[代码分析工具和 Inter-Type-Declarations](https://stackoverflow.com/questions/2227792/code-analysis-tools-and-inter-type-declarations)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T09:52:02.207

我想这些年来我只在少数几个项目中积极使用过 AOP。在我使用 Spring 的工作中，与大多数其他 Spring 功能相比，我很少使用它。因此，我知道它以及它可以做什么，但我不担心我没有勾选那个特定的框。

了解它是什么以及它可以为您做什么是很有用的。然而，Spring 已经在为您工作，利用了这一点，您很可能已经在不知道它的情况下使用它！*了解 AOP 及其工作原理是这里的主要问题*。因此，听起来您已经涵盖了这一点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T10:11:47.730

> 据我所知，AOP 是 Spring 的重要组成部分

**是**的，正如您已经在使用的那样`AOP for logging`，为了更好地理解 AOP，请在[aop上阅读此处](http://en.wikipedia.org/wiki/Aspect-oriented_programming)

基本上，aop 通过以下方式增加了应用程序的模块化`separation of cross-cutting concerns.`

比如它在`transaction management logging`等的时候帮助了你很多。

**spring中的AOP**使用：

1.  提供声明式事务管理等声明式企业服务
2.  允许用户实现自定义方面。

[来源](http://static.springsource.org/spring/docs/1.2.x/reference/aop.html)

据我了解，您可以在应用程序中使用事务管理。当您维护与学生相关的 、 等`students`记录`course`时。`fee`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T12:09:53.617

Spring AOP 用于跟踪大型业务应用程序中用户的整个活动。
更像是使用 AOP 进行日志记录，我们可以识别用户使用的类和方法，如果任何方法中发生任何错误，开发人员或客户帮助人员可以很快发现问题，并且可以比读取日志文件更快地给出解决方案。

# android - Android 4.0.3 SIP API 是否支持 NAT？

> ID：12528089
> 
> 赞同：1
> 
> 时间：2012-09-21T09:44:36.037
> 
> 标签：android, sip, nat

我正在使用 Android 4.0.3 SIP Api 并且能够在同一网络上的 2 个用户之间进行 sip 呼叫。但如果其中一位用户位于 NAT/防火墙后面，则它不起作用。

1.  Android SIP api 是否支持 NAT？如果没有，是否有任何解决方法。
2.  如果我使用其他 STUN 客户端找到我的公共 IP，我可以在 SipManager 或 SipProfile 类或任何其他类中将其提供给 Android SIP api 吗？似乎没有直接的方法可以做到这一点，但有任何解决方法吗？
3.  如果目前不支持 NAT，是否有任何期望在即将发布的 Android 版本中提供此支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T02:00:20.437

不要使用 Android 提供的 sip 库。使用第三方或自己编写。Android 自带的功能非常有限，并非所有设备都支持。

# objective-c - 目标c中的[self self]是什么意思？

> ID：12528098
> 
> 赞同：11
> 
> 时间：2012-09-21T09:45:15.180
> 
> 标签：objective-c, ios

我只是在阅读[https://github.com/MugunthKumar/MKNetworkKit](https://github.com/MugunthKumar/MKNetworkKit)的一些源代码，并看到了这个

```
 +(void) initialize {

  if(!_sharedNetworkQueue) {
    static dispatch_once_t oncePredicate;
    dispatch_once(&oncePredicate, ^{
      _sharedNetworkQueue = [[NSOperationQueue alloc] init];
      [_sharedNetworkQueue addObserver:[self self] forKeyPath:@"operationCount" options:0 context:NULL];
      [_sharedNetworkQueue setMaxConcurrentOperationCount:6];

    });
  }            
} 
```

那个 [self self] 在这里是什么意思？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T09:49:29.917

`-self`是[*协议*](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/self)[中定义`NSObject`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/self) *的方法。它返回接收者，即您向其发送消息的对象`self`。如果你这样做`[a self]`，你会`a`回来，是的，如果你这样做`[self self]`（或`self.self`），你确实会`self`回来。*

 *它在您应该附加新组件但打算观察整个对象的键值路径中可能很有用，例如在 Cocoa Bindings 中。我在您发布的代码中没有看到任何应用程序，但代理可能采用`self`不同的方式，指向代理本身，而不是远程/转发对象。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-21T09:48:51.043

它是一样的`self`，只是一个多余的调用。

```
[self self] // ---> Same object of self 
```*

# c++ - RegOpenKeyEx() 出错

> ID：12528099
> 
> 赞同：4
> 
> 时间：2012-09-21T09:45:18.293
> 
> 标签：c++, qt, winapi, registry, windows-7-x64

我正在使用 Qt 和 mingw 来编写一个更改注册表的程序，但是当我调用时：

```
RegOpenKeyEx(HKEY_LOCAL_MACHINE,
             "SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\DefaultProductKey",
             0,
             KEY_ALL_ACCESS|KEY_WOW64_64KEY,
             &key); 
```

Qt 返回：

```
`KEY_WOW64_64KEY' undeclared (first use in this function) 
```

我已经添加`"#include <windows.h>"`，但它仍然无法正常工作。

我发现这个帖子[Error with RegOpenKeyEx](https://stackoverflow.com/questions/5247862/error-with-regopenkeyex?answertab=votes#tab-top)，它和我的问题一样，而且答案看起来不错。但我没有使用 Windows XP，我使用的是 7（64 位）。所以我尝试放入 targetver.h ：

```
#ifndef _WIN32_WINNT_WIN7
#define _WIN32_WINNT_WIN7 (0x0601)
#endif  /* _WIN32_WINNT_WIN7 */ 
```

它仍然不起作用...... :(

我能做些什么 ？:(

谢谢 ：）

（对不起，我的英语不好）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T09:48:30.967

您必须`_WIN32_WINNT`在包含标题之前定义（不是_WIN32_WINNT_WIN7）`windows.h`：

```
#ifndef _WIN32_WINNT
#define _WIN32_WINNT (0x0601)
#endif  /* _WIN32_WINNT */

#include <windows.h> 
```

# java - 在android中加载自动完成视图建议的最佳方法

> ID：12528105
> 
> 赞同：2
> 
> 时间：2012-09-21T09:45:45.237
> 
> 标签：java, android, autocompletetextview

这是我在android中的第一个应用程序。我想知道这是否是最好的方法。我正在尝试使用 mysql db 中的数据加载自动完成文本视图。该数据是根据用户输入的文本从 db 中检索的。

这就是我的做法。

1.在自动完成视图中添加了一个 textwatch 监听器。在 afterTextchanged 方法中，我正在调用一个异步任务，该任务使用 php Web 服务连接到 db，并从 mysql 表中检索数据并加载到数组中。在执行该任务后，我正在设置适配器。（阵列适配器）。

我的问题是，对于输入/修改的每个字母都会调用 aftertextchanged，db 调用在这里发生。那么，把所有的数据库代码都保存在这里，好吗？加载列表也需要时间。

有没有其他最好的方法来做到这一点。

感谢您的答复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:54:14.923

当一个新字符添加到输入框时，取消正在进行`AsyncTask`的获取建议并使用新参数开始一个新字符。并向用户指示正在加载建议，以便用户可以选择等待，如果他愿意。

这是一篇解释取消的理想方法的帖子`AsyncTask`：[取消正在执行的 AsyncTask的理想方法](https://stackoverflow.com/questions/2735102/ideal-way-to-cancel-an-executing-asynctask)

***更新：***

如果您缓存第一个字符输入时的所有结果（无需取消），您可以随着用户在编辑框中键入更多字符而逐渐加快速度`Asynctask`，因为这将是初始列表，其中包含从第一个开始的所有字符串特点。以下所有结果（在新字符上，即第 2、第 3 ..）将是此列表的子集。使用 管理列表`ArrayAdapter`。编辑框应该是一个[AutoCompleteTextView。](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)

这样，您只需要为第一个字符运行 asynctask。

***更新 2：*** 您可以在`onCreate`. 听起来是个更好的选择。。

```
 AutoCompleteTextView act = 
                        (AutoCompleteTextView)findViewById(R.id.act_contact);
    ContentResolver content = getContentResolver();
    Cursor cursor = content.query(
                            ContactsContract.Contacts.CONTENT_URI, 
                            PEOPLE_PROJECTION, null, null, null);
    ContactListAdapter adapter = new ContactListAdapter(this, cursor);
    act.setAdapter(adapter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:07:04.170

您可以尝试使用 Android 本地 DB 从您的服务器存储数据，然后使用本地 DB 填充您的 ArrayAdapter，这肯定会提高性能。

希望能帮助到你 ...

# scala - specs2：将常见的 Given 移动到超类中

> ID：12528106
> 
> 赞同：0
> 
> 时间：2012-09-21T09:45:46.083
> 
> 标签：scala, specs2

在 Specs2 中，我在可变规范中使用带有 ScalaCheck 的 Given/When/Then 样式，并且我有一个常用的 Given 步骤来创建 ScalaCheck`Gen`对象，我想将它移动到所有测试的公共超类中那一步。（嗯，实际上，进入一个特征，但也许这并没有什么区别。）

但是，我的测试有一些非常复杂的设置代码，必须以正确的顺序运行，而且我的 specs2 测试代码已经有了相当深的类层次结构，到目前为止，我尝试过的每一个技巧都可以让事情在正确的顺序未能保持执行顺序相同。从表面上看，这似乎很奇怪，但我当然不知道 specs2 在这种情况下实际上是如何执行的，所以我真的只是在猜测。

所以我的问题是，我怎样才能将 Given 步骤移动到超类或特征中，而不会以任何显着方式影响执行顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:51:05.983

这不是火箭科学——这只是在所有设置代码运行后显式调用 Given 步骤的问题。因此，您可以将 Given 步骤放入方法中，并在设置代码之后调用该方法。

更复杂的解决方案不一定有效。不要把它放在一个`step`.

# c# - 在 c# 中检查整数值是否为 Null

> ID：12528107
> 
> 赞同：57
> 
> 时间：2012-09-21T09:45:47.707
> 
> 标签：c#, .net

我有一个整数值，我需要检查它是否为 NULL。我使用空合并运算符得到它

C＃：

```
public int? Age;

if ((Age ?? 0)==0)
{
   // do somethig
} 
```

现在我必须检查一个较旧的应用程序，其中声明部分不是三元的。那么，如何在没有空合并运算符的情况下实现这一点。

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-09-21T09:47:20.603

`Nullable<T>`（或`?`）公开一个`HasValue`标志来表示是否设置了一个值或该项是否为空。

此外，可空类型支持`==`：

`if (Age == null)`

是`??`空合并运算符，不会产生布尔表达式，而是返回一个值：

```
int i = Age ?? 0; 
```

所以对于你的例子：

```
if (age == null || age == 0) 
```

或者：

```
if (age.GetValueOrDefault(0) == 0) 
```

或者：

```
if ((age ?? 0) == 0) 
```

或三元：

```
int i = age.HasValue ? age.Value : 0; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-21T09:48:18.563

几件事：

`Age`不是整数 - 它是可为*空*的整数类型。它们是不相同的。有关详细信息，请参阅[`Nullable<T>`](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)MSDN 上的文档。

`??`是[空合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)，而不是三元运算符（实际上称为[条件运算符](http://msdn.microsoft.com/en-us/library/ty67wk28.aspx)）。

要检查可空类型是否有值，请使用`HasValue`，或直接检查`null`：

```
if(Age.HasValue)
{
   // Yay, it does!
}

if(Age == null)
{
   // It is null :(
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-10T19:43:52.267

只需您可以这样做：

```
 public void CheckNull(int? item)
    {
        if (item != null)
        {
            //Do Something
        }

    } 
```

从 C# 版本 9 开始，您可以这样做：

```
 public void CheckNull(int? item)
  {
    if (!(item is null))
    {
        //Do Something
    }

  } 
```

或者更具可读性：

```
 public void CheckNull(int? item)
  {
    if (item is not null)
    {
        //Do Something
    }

  } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T09:50:30.070

Adam 已经给出了正确的答案，但是您还有另一种选择来重构您的代码：

```
if (Age.GetValueOrDefault() == 0)
{
    // it's null or 0
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T09:56:05.523

如上所述，[`??`](http://msdn.microsoft.com/en-us/library/ms173224.aspx)是空合并运算符。所以相当于

```
(Age ?? 0) == 0 
```

不使用[`??`](http://msdn.microsoft.com/en-us/library/ms173224.aspx)运算符是

```
(!Age.HasValue) || Age == 0 
```

* * *

但是，没有任何版本的 .Net 具有[Nullable< T >](http://msdn.microsoft.com/en-us/library/1t3y8s4s.aspx)但不是[`??`](http://msdn.microsoft.com/en-us/library/ms173224.aspx)，所以你的声明，

> 现在我必须检查一个较旧的应用程序，其中声明部分不是三元的。

是双重无效的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-29T15:27:19.757

因为*int*是一个 ValueType 那么您可以使用以下代码：

```
if(Age == default(int) || Age == null) 
```

或者

```
if(Age.HasValue && Age != 0) or if (!Age.HasValue || Age == 0) 
```

# symfony - 我应该在 Doctrine 2 中使用 YAML/XML 还是注解映射？

> ID：12528108
> 
> 赞同：11
> 
> 时间：2012-09-21T09:45:51.373
> 
> 标签：symfony, doctrine-orm

我在 Symfony 框架中使用 Doctrine 2 作为 ORM。对实体使用基于注释的映射，我将不得不编写大量代码（setter 和 getter、映射信息等）。使用 YAML/XML，我不必只写列定义和元数据。在 Doctrine 文档中，他们主要使用示例中的注释，很少使用 YAML 或 XML。

我应该使用 YAML/XML 还是注释？

[对于注释，我可以在http://docs.doctrine-project.org/en/latest/reference/annotations-reference.html](http://docs.doctrine-project.org/en/latest/reference/annotations-reference.html)找到每个注释的文档。不过，我在 YAML 或 XML 中找不到注释的等价物；如何将注释转换为等效的 YAML/XML 表达式？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-21T09:57:22.393

这基本上取决于偏好。

这是我对事物的看法：

注释的优点：

*   更容易使用，因为它们接近于它们所描述的（属性）
*   正如您已经注意到的，很多示例都使用它们

yaml/xml 的优点

*   这使域对象保持干净，因此持久层绝对不会泄漏到域中（即使是以注释的形式）

如果您更改数据库或域，您仍然必须以任何一种形式维护它们，因此从这个角度来看，在任何方向上都没有真正的优势。

从性能的角度来看，在生产中您应该使用学说的缓存来缓存映射，所以它们在这里也是相等的。

关于这一点：“我将不得不编写大量代码、setter 和 getter、映射信息”：

Doctrine 需要私有/受保护的属性，因此您仍将编写 getter 和 setter。而且您仍将在另一个地方编写映射信息。

就个人而言，我会使用注释，因为如果您需要它们，查找示例和信息会容易得多。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-07-11T13:44:41.840

使用注释有一个缺点。由于它们是在注释上定义的（这很奇怪），因此您将无法使用预编译器（如 Zend Guard）或*一些*字节码 php 缓存扩展来增强代码性能（**其中一些**会去除注释）。因为注释是唯一具有这种技术缺陷的规范，我不建议使用它。

此外，在评论上写“功能性”的东西也很奇怪。

XML 比 YAML 详细得多，但也更广为人知。XML 的文档示例是所有选项中最差的。

YAML 比其他任何一种都更具可读性，但它也依赖于空间标识（有些人不喜欢）。Symfony 默认使用 YAML 进行配置，因此许多使用 Symfony 的人选择使用 YAML 进行学说映射——这意味着 YAML 示例有很好的文档记录，并且那里有很多资源。

我个人更喜欢 YAML。我可以使用教义模式工具自动生成实体（这意味着我不必编写 getter/setter）。我还可以使用预编译器/字节码缓存选项，而不必担心我的注释被删除。

* * *

附加信息：

如果您使用的是 PHP 7.0 或更高版本，那么`opcache.save_comments = 0`如果您使用注释，则永远无法在 php.ini 上进行设置。PHP 有一种去除注释的本机方式，这会破坏您的应用程序。Guilherme Blanco 是 Doctrine 最活跃的维护者之一，也是开发大多数项目（Doctrine、Symfony）使用的注释检索类的人，他反对[评论注释](http://marc.info/?l=php-internals&m=144847292318327&w=2)（如果你阅读了整个线程，你会发现他非常热情对这个）。关于 Reddit 上的评论注释问题也有一些[广泛的讨论](https://www.reddit.com/r/PHP/comments/1ztstd/rant_it_baffles_me_that_people_think_using/)，大多数人似乎都同意这是一个坏主意。

尽管如此，Symfony 的官方最佳实践书还是建议人们使用注释。因此，大多数 Symfony 包可能会使用注释作为它们的元数据格式。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-21T09:51:43.217

我认为这是个人品味的问题，我更喜欢注释。

我使用注释是因为如果您想了解该字段上方的字段的任何信息，否则您必须打开一个新文件并搜索您需要的规则。

找出它以创建这两种情况的最佳方法。然后你看看你喜欢什么。

# jquery - 在 jqGrid 中使用保存参数时覆盖默认的 Content-Type

> ID：12528109
> 
> 赞同：1
> 
> 时间：2012-09-21T09:45:55.023
> 
> 标签：jquery, jqgrid

我在**jqGrid的 inline_editing 中使用****saveRow**函数，默认的 Content-Type 是“ **application/x-www-form-urlencoded; charset=UTF-8** ”，如下

 ****```
保存参数 = {
    “成功函数”：空，
    “网址”：我的网址，
        “额外参数”：{}，
    “aftersavefunc”：空，
    “错误函数”：空，
    “afterrestorefunc”：空，
    “restoreAfterError”：是的，
    “mtype”：“POST”
}

jQuery("#grid_id").jqGrid('saveRow',rowid, saveparameters);

```

我想将 Content-Type 覆盖为“ **application/json; charset=utf-8** ”，这样我就可以像

```
成功函数：函数（响应）{
    //解析json响应
}

```

这可能吗以及如何覆盖它？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:13:55.893

不，不幸的是，网格不允许您`contentType`在此特定调用中指定选项[`jQuery.ajax`](http://api.jquery.com/jQuery.ajax/)- 您可以在源代码中自己查看[`grid.inlinedit.js`](https://github.com/justinethier/jqGrid/blob/master/js/grid.inlinedit.js#L261). 因此，它使用您在问题中提到的默认内容类型。

但也许没关系。看起来您真正想要的是接收 JSON 数据，在这种情况下，发送到服务器的数据格式无关紧要。响应格式由`dataType`选项控制，在 jqGrid API 中也无法指定。但是，它是根据服务器响应的 MIME 类型推断出来的：

> 默认值：智能猜测（xml、json、脚本或 html）您期望从服务器返回的数据类型。如果没有指定，jQuery 将尝试根据响应的 MIME 类型推断它（XML MIME 类型将产生 XML，在 1.4 中 JSON 将产生一个 JavaScript 对象，在 1.4 中脚本将执行脚本，其他任何内容都将是作为字符串返回）。可用的类型（以及作为第一个参数传递给成功回调的结果）是：

所以只要确保你在你的回复中设置了 MIME 类型就`application/json; charset=utf-8`可以了。****

# algorithm - 比较 Big O、Theta 和 Omega 之间的算法复杂度

> ID：12528112
> 
> 赞同：0
> 
> 时间：2012-09-21T09:46:04.943
> 
> 标签：algorithm, big-o, complexity-theory, big-theta

各位晚安

我需要一些帮助来比较大 O 和 Θ 算法。
我可以理解如何比较两个大 O，但是
在如何将大 O 与 Θ 或大 O 与 Ω 等进行比较等方面，我的理解有些困难。

我将在下面发布一些示例：

Θ(2ⁿ) vs Ο(2ⁿ)
Θ(n ^(0.6) ) vs Θ(n ^(logn) )
O(n) vs Ω(n⋅logn)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T10:30:47.330

> Θ(2^n) 与 Ο(2^n)

我有一个和大象一样大的东西[*]，还有一个不比大象大的东西。比较它们的大小。

> Θ(n^0.6) 与 Θ(n^logn)

`n^log n`大于`n^0.6`，因为`log n`大于常数。但我懒得为他们想动物。

> O(n) 与 Ω(nlogn)

我有一个不比老鼠大的东西，还有一个不比猫小的东西。比较它们的大小。

[*] 呃……因为东西和大象趋向于无穷大，它们的大小是一样的，无论如何。这个类比并不完美，但重点是 big-O 的意思是“不大于”，big-Omega 的意思是“不小于”，而 big-Theta 的意思是“既不大于也不小于” ”。“更大”和“更小”都是用相同的标准来判断的，实际上是指“`f(n)`在幅度上没有比常数大/小多次`g(n)`，足够大`n`”

# sql - Oracle 中的正则表达式

> ID：12528114
> 
> 赞同：2
> 
> 时间：2012-09-21T09:46:16.770
> 
> 标签：sql, regex, database, oracle, database-administration

我想在表格的列中获取字符串模式。我正在使用类似的查询

```
select CALCULATION_DETAILS 
  from DS_ELEMENT_CALC_PROPERTY 
 where REGEXP_LIKE(CALCULATION_DETAILS, 'fm.get'); 
```

我无法根据我的要求找出确切的正则表达式。

`CALCULATION_DETAILS`是`clob`，它包含一个非常长的 JavaScript 代码字符串。它有一个类似`fm.get('11abc') or fm.get('11') or fm.get('ab1c') or fm.get('abc')`t 的语法。

我想获取`CALCULATION_DETAILS`其中`fm.get('11abc') or fm.get('111')`以数字开头的意思`fm.get()`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:49:56.137

您在寻找以下内容吗？

```
SELECT
    CALCULATION_DETAILS 
FROM 
    DS_ELEMENT_CALC_PROPERTY 
WHERE
    REGEXP_LIKE(CALCULATION_DETAILS, 'fm.get\(''[0-9]+' 
```

> fm.get() 内部有一个或多个空格的模式。例如： fm.get('ab d') 或 fm.get('ab d ed d')

```
SELECT
    CALCULATION_DETAILS 
FROM 
    DS_ELEMENT_CALC_PROPERTY 
WHERE
    REGEXP_LIKE(CALCULATION_DETAILS, 'fm.get\(''[a-zA-Z0-9] [a-zA-Z0-9 ]+''\)') 
```

# wcf-security - WCF 客户端验证 BinarySecurityToken 作为响应

> ID：12528115
> 
> 赞同：2
> 
> 时间：2012-09-21T09:46:19.297
> 
> 标签：wcf-security, wcf-client, digital-signature, x509

我正在为使用 SSL 传输、相互身份验证和数字签名的第三方 SOAP 服务（我相信在 Java 后端）编写 WCF 客户端。

我已经通过 SSL 建立了连接，并使用相关的客户端证书正确签署了请求。请求成功通过，第三方已确认我发送的消息的有效性。

但是，当我们收到服务的响应时，问题就来了。响应返回带有签名的时间戳和正文。有一个 BinarySecurityToken 和一个 SecurityTokenReference，其 Reference 字段类型为[http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3](http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3)

目前，我从客户端收到以下异常：

> 遇到异常：System.ServiceModel.Security.MessageSecurityException：找不到“System.IdentityModel.Tokens.X509SecurityToken”令牌类型的令牌身份验证器。根据当前的安全设置，不能接受该类型的令牌。

我目前正在使用配置如下的customBinding：

```
<customBinding>
  <binding name="Custom">
    <security
        defaultAlgorithmSuite="Basic256Rsa15"
        allowSerializedSigningTokenOnReply="true"
        authenticationMode="CertificateOverTransport"
        securityHeaderLayout="Strict"
        messageSecurityVersion="WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10">
      <secureConversationBootstrap />
    </security>
    <textMessageEncoding messageVersion="Soap11" />
    <httpsTransport requireClientCertificate="true" />
  </binding>
</customBinding> 
```

我找不到有关如何使用此 BinarySecurityToken 来验证响应签名的任何信息，甚至找不到有关如何将客户端配置为接受“该类型的令牌”的任何信息

提前感谢您的任何帮助或建议，

菲尔半

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:21:52.740

事实证明，通过将 messageSecurityVersion 更改为：

> WSSecurity10WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10

已解决问题，我现在可以处理返回的安全令牌

# javascript - Javascript字符串对象只读？

> ID：12528122
> 
> 赞同：6
> 
> 时间：2012-09-21T09:46:38.503
> 
> 标签：javascript, string, readonly

```
a=new String("Hello"); 
```

![细绳（](../Images/96b7cc7f15fa3487a3d7ac09d3ae0aa5.png)

```
a[0]==="H" //true
a[0]="J"
a[0]==="J" //false
a[0]==="H" //true 
```

这是否意味着我只能在`.split("")`then之前将字符串用作 char 数组`.join("")`？

* * *

**答案：**是的，在`Javascript strings are readonly`（又名不可变）这个问题在这里得到回答：

*   [JavaScript 字符串是不可变的吗？我需要 JavaScript 中的“字符串生成器”吗？](https://stackoverflow.com/questions/51185/are-javascript-strings-immutable-do-i-need-a-string-builder-in-javascript)
*   [不可变是什么意思？](https://stackoverflow.com/questions/3200211/what-does-immutable-mean)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:51:13.113

那是正确的。

您当然可以构建一个函数来为您处理这个问题。

有关不同示例，请参阅此 SO Post：

[如何在 JavaScript 中替换特定索引处的字符？](https://stackoverflow.com/questions/1431094/how-do-i-replace-a-character-at-a-particular-index-in-javascript)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T09:53:39.693

字符串是[不可变](http://en.wikipedia.org/wiki/Immutable_object#JavaScript)的，所以是的。`a`如果要更改字符串，则应重新分配。您也可以使用`slice`:`a = 'j'+a.slice(1)`或`replace`: `a = a.replace(/^h/i,'j')`。

你可以创建一个自定义的可变`String`对象，就像[这个实验](http://jsfiddle.net/KooiInc/k7kuc/)一样（特别是见方法`replaceCharAt`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T10:08:26.923

如果有必要能够对字符串执行操作，就好像它是一个数组或字符一样，您可能会创建一些原型：

```
String.prototype.splice = function(start,length,insert) {
    var a = this.slice(0, start);
    var b = this.slice(start+length, this.length);
    if (!insert) {insert = "";};
    return new String(a + insert + b);
};

String.prototype.push = function(insert) {
    var a = this
    return new String(a + insert);
};

String.prototype.pop = function() {
    return new String(this.slice(0,this.length-1));
};

String.prototype.concat = function() {
    if (arguments.length > 0) {
        var string = "";
        for (var i=0; i < arguments.length; i++) {
            string += arguments[i];
        };
        return new String(this + string);
    };
};

String.prototype.sort = function(funct) {
    var arr = [];
    var string = "";
    for (var i=0; i < this.length; i++) {
        arr.push(this[i]);
    };
    arr.sort(funct);
    for (var i=0; i < arr.length; i++) {
        string += arr[i];
    };
    return new String(string);
};

var a = new String("hello");
var b = a.splice(1,1,"b");
var c = a.pop();
var d = a.concat(b,c);
var e = a.sort(); 
```

返回你好，hbllo，地狱，hellohbllohell，ehllo

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T10:15:51.880

Strings 原型的 .valueOf() 方法不会返回其原始值吗？像，

![在此处输入图像描述](../Images/5a16595d543b1d5f6d271c26285a1c96.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T10:17:12.163

基本上，javascript中的字符串由两种类型区分，一种是原始的，另一种是对象的。字符串对象是字符序列。

您可以使用原始类型的 string 。

```
 var x = "hello";

   console.log(x);

     output : "hello"
    x = "j"+x.substring(1);
    console.log(x);
    output : "jello"; 
```

或使用

```
 var x = new String("hello");
  console.log(x.toString());
  x = "j"+x.substring(1); 
```

# google-analytics - 如何在 Google 电子商务跟踪代码中添加带撇号的名称？

> ID：12528132
> 
> 赞同：0
> 
> 时间：2012-09-21T09:47:18.750
> 
> 标签：google-analytics, e-commerce

我正在使用谷歌电子商务跟踪代码来跟踪注册，但很少有公司名称中带有撇号的代码没有被代码报告。

请查看链接，然后查看以下代码：[Google 电子商务跟踪] [https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingEcommerce#Example](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingEcommerce#Example)

```
 var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXX-X']);
  _gaq.push(['_trackPageview']);
  _gaq.push(['_addTrans',
   '1234',           // order ID - required
   'L'Oreal',        // affiliation or store name
   '11.99',          // total - required
   '1.29',           // tax
   '5',              // shipping
   'San Jose',       // city
   'California',     // state or province
   'USA'             // country
 ]); 
```

我猜欧莱雅`'`在其名称中包含 a ，`affiliation or store name`以上将仅`L`将其视为其名称，并且它将获得欧莱雅作为额外的并且它停止将数据提交给谷歌。

为此，我们可以使用如下双引号：

```
var pageTracker = _gat._getTracker("UA-xxxxx-x");
pageTracker._trackPageview();
pageTracker._addTrans(
  "1234",            // order ID - required
  "L'oreal",  // affiliation or store name
  "11.99",           // total - required
  "1.29",            // tax
  "15.00",           // shipping
  "San Jose",        // city
  "California",      // state or province
  "USA"              // country
); 
```

或者需要任何旁路？请建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:28:54.833

您可以使用双引号，但我建议使用单引号并通过`\`在它们之前放置 a 来转义文本中的任何单引号：

```
_gaq.push(['_addTrans',
  '1234',           // order ID - required
  'L\'Oreal',        // affiliation or store name
... 
```

# validation - Extjs 4 - 作为验证器的错误消息？

> ID：12528135
> 
> 赞同：1
> 
> 时间：2012-09-21T09:47:23.470
> 
> 标签：validation, extjs, extjs4, extjs4.1, extjs4.2

我正在锁定在 Extjs4 中提醒消息的方式，就像验证器警报一样（红色标签，文本字段旁边有消息）。

我不能使用验证器，因为我的错误消息应该在按下回车后出现，而不仅仅是在输入文本字段时出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:43:58.650

您可以使用**[markInvalid](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Text-method-markInvalid)**方法将自定义错误应用于字段。

*但是注意调用isValid时这个标记会被清除*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:12:56.807

您应该像平常一样使用验证器，只需设置 validateOnChange: false。该字段仍将 validateOnBlur 因为默认设置为 true。我相信输入会触发该字段的模糊，这将反过来通过此更改验证该字段。

# recursion - Erlang 递归函数的评估（为什么会这样）

> ID：12528139
> 
> 赞同：3
> 
> 时间：2012-09-21T09:47:32.867
> 
> 标签：recursion, erlang, evaluation

我开始学习一些 Erlang，现在我被以下“问题”所困扰。

我知道递归是如何工作的，并且我知道 HigherOrderFunctions 的基础知识。

因此，为了更深入地了解整个概念，我自己使用 fold 实现了“lists:all/2”：

```
fold(_, Start, []) -> Start;
fold(F, Start, [H|T]) -> fold(F, F(H, Start), T).

all(Pred, L) ->
    F = fun(H, ToF) ->
        case Pred(H) of
            true -> ToF;
            false -> false
        end
    end,
    fold(F, true, L). 
```

我知道这个版本不关心空列表，但这不是困扰我的。我不知道为什么它是如何工作的。

当我使用我的列表 [1,2,3] 并将 Pred 设置为“fun(X) when X == 3 -> true; (_) -> false end”时，它显然返回“false”。但为什么？如果我在返回某些东西之前将其作为最后一次电话在纸上完成，我会得到：

```
fold(F, F(H, Start), T) 
```

其中 F 是 Pred，F(H, Start) 返回“true”，因为最后一个元素是 3，T 是一个空列表 []。

因此，当我做对时，最后一次调用应该是 fold(_, true, []) ，因此应该返回“true”，而事实并非如此。

在评估最后一个表达式时，我在这里遗漏了什么还是我有什么问题？这个函数是否以某种方式对“Pred”的所有返回使用逻辑与？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T10:18:10.417

基本上，您对最后一次通话是正确的，但是在进行分析时，您已经替换`true`了`Start`value，实际上这个 value 是`false`：

```
fold(F, true, [1,2,3]) 
```

评估为：

```
fold(F, true, [1|[2,3]]) -> fold(F, F(1, true), [2,3]) 
```

这反过来评估为：

```
fold(F, false, [2|3]) -> fold(F, F(2, false) [3]) 
```

这反过来评估为：

```
fold(F, false, [3|[]]]) -> fold(F, F(3, false), []) 
```

评估为：

```
fold(_, false, []) -> false 
```

因为 in last call`Pred`是 true，而你正在返回`ToF`，这是 false。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T10:30:06.113

[尽量避免简单问题的复杂解决方案](http://en.wikipedia.org/wiki/KISS_principle)（代码紧凑性是函数式语言的好处之一）：

```
all(_, []) ->
   true;
all(Pred, [H|T]) ->
   case Pred(H) of
      true ->
         all(Pred, T);
      false ->
         false
   end. 
```

# mysql - 减少执行mysql查询所需的时间

> ID：12528140
> 
> 赞同：0
> 
> 时间：2012-09-21T09:47:33.277
> 
> 标签：mysql, insert, query-optimization

我有两个数据库和三个相似的表（mdl_user、mdl_course 和 mdl_course_enrol）。

mdl_user 和 mdl_course 中用户和课程的 id 值在两个数据库中是不同的。这两个值都由第三个表引用，即 mdl_course_enrol。在数据库 1 中，表为空，而在数据库 2 (nlbdb1_9) 中，表已填满。我正在尝试执行一个查询，以便在 mdl_course_enrol 中输入正确的值。以下是我的查询： -

```
Insert into mdl_course_enrol 
(userid, courseid, registrationdate, expirydate, status, startdate, enddate, roleassignmentid)
Select u1.id, c1.id, t2.registrationdate, t2.expirydate, t2.status, t2.startdate, t2.enddate, t2.roleassignmentid
from 
nlbdb1_9.mdl_course_enrol as t2, mdl_user as u1, mdl_course as c1
where 
t2.userid=(Select u1.id from nlbdb1_9.mdl_user as u2 where t2.userid=u2.id and BINARY u2.email=BINARY u1.email)
and
t2.courseid=(Select c1.id from nlbdb1_9.mdl_course as c2 where t2.courseid=c2.id and BINARY c2.fullname = BINARY c1.fullname); 
```

以下是表结构：-

```
CREATE TABLE `mdl_course_enrol` (
  `id` bigint(10) unsigned NOT NULL AUTO_INCREMENT,
  `userid` bigint(10) unsigned NOT NULL,
  `courseid` bigint(10) unsigned NOT NULL,
  `registrationdate` bigint(10) unsigned NOT NULL,
  `expirydate` bigint(10) unsigned NOT NULL,
  `status` varchar(32) NOT NULL DEFAULT 'Not Attempted',
  `startdate` bigint(10) NOT NULL,
  `enddate` bigint(10) NOT NULL,
  `roleassignmentid` bigint(10) unsigned NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=14962 DEFAULT CHARSET=utf8;

CREATE TABLE `mdl_course` (
  `id` bigint(10) NOT NULL AUTO_INCREMENT,
  `category` bigint(10) NOT NULL DEFAULT '0',
  `sortorder` bigint(10) NOT NULL DEFAULT '0',
  `fullname` varchar(254) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `shortname` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `idnumber` varchar(100) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `summary` longtext CHARACTER SET utf8 COLLATE utf8_unicode_ci,
  `summaryformat` tinyint(2) NOT NULL DEFAULT '0',
  `format` varchar(10) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL DEFAULT 'topics',
  `showgrades` tinyint(2) NOT NULL DEFAULT '1',
  `sectioncache` longtext CHARACTER SET utf8 COLLATE utf8_unicode_ci,
  `modinfo` longtext CHARACTER SET utf8 COLLATE utf8_unicode_ci,
  `newsitems` mediumint(5) NOT NULL DEFAULT '1',
  `startdate` bigint(10) NOT NULL DEFAULT '0',
  `numsections` mediumint(5) NOT NULL DEFAULT '1',
  `marker` bigint(10) NOT NULL DEFAULT '0',
  `maxbytes` bigint(10) NOT NULL DEFAULT '0',
  `legacyfiles` smallint(4) NOT NULL DEFAULT '0',
  `showreports` smallint(4) NOT NULL DEFAULT '0',
  `visible` tinyint(1) NOT NULL DEFAULT '1',
  `visibleold` tinyint(1) NOT NULL DEFAULT '1',
  `hiddensections` tinyint(2) NOT NULL DEFAULT '0',
  `groupmode` smallint(4) NOT NULL DEFAULT '0',
  `groupmodeforce` smallint(4) NOT NULL DEFAULT '0',
  `defaultgroupingid` bigint(10) NOT NULL DEFAULT '0',
  `lang` varchar(30) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `theme` varchar(50) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `timecreated` bigint(10) NOT NULL DEFAULT '0',
  `timemodified` bigint(10) NOT NULL DEFAULT '0',
  `requested` tinyint(1) NOT NULL DEFAULT '0',
  `enablecompletion` tinyint(1) NOT NULL DEFAULT '0',
  `completionstartonenrol` tinyint(1) NOT NULL DEFAULT '0',
  `completionnotify` tinyint(1) NOT NULL DEFAULT '0',
  `coursedisplay` tinyint(2) NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `mdl_cour_cat_ix` (`category`),
  KEY `mdl_cour_idn_ix` (`idnumber`),
  KEY `mdl_cour_sho_ix` (`shortname`),
  KEY `mdl_cour_sor_ix` (`sortorder`)
) ENGINE=InnoDB AUTO_INCREMENT=45 DEFAULT CHARSET=utf8 COMMENT='Central course table';

CREATE TABLE `mdl_user` (
  `id` bigint(10) unsigned NOT NULL AUTO_INCREMENT,
  `auth` varchar(20) NOT NULL DEFAULT 'manual',
  `confirmed` tinyint(1) NOT NULL DEFAULT '0',
  `policyagreed` tinyint(1) NOT NULL DEFAULT '0',
  `deleted` tinyint(1) NOT NULL DEFAULT '0',
  `mnethostid` bigint(10) unsigned NOT NULL DEFAULT '0',
  `username` varchar(100) NOT NULL DEFAULT '',
  `password` varchar(32) NOT NULL DEFAULT '',
  `pwdlastchange` bigint(10) unsigned NOT NULL DEFAULT '0',
  `idnumber` varchar(255) NOT NULL DEFAULT '',
  `firstname` varchar(100) NOT NULL DEFAULT '',
  `lastname` varchar(100) NOT NULL DEFAULT '',
  `email` varchar(100) NOT NULL DEFAULT '',
  `emailstop` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `nric` varchar(15) NOT NULL DEFAULT '',
  `skype` varchar(50) NOT NULL DEFAULT '',
  `yahoo` varchar(50) NOT NULL DEFAULT '',
  `aim` varchar(50) NOT NULL DEFAULT '',
  `msn` varchar(50) NOT NULL DEFAULT '',
  `phone1` varchar(20) NOT NULL DEFAULT '',
  `phone2` varchar(20) NOT NULL DEFAULT '',
  `institution` varchar(40) NOT NULL DEFAULT '',
  `department` varchar(30) NOT NULL DEFAULT '',
  `address` varchar(70) NOT NULL DEFAULT '',
  `city` varchar(20) NOT NULL DEFAULT '',
  `country` varchar(2) NOT NULL DEFAULT '',
  `lang` varchar(30) NOT NULL DEFAULT 'en_utf8',
  `theme` varchar(50) NOT NULL DEFAULT '',
  `timezone` varchar(100) NOT NULL DEFAULT '99',
  `firstaccess` bigint(10) unsigned NOT NULL DEFAULT '0',
  `lastaccess` bigint(10) unsigned NOT NULL DEFAULT '0',
  `lastlogin` bigint(10) unsigned NOT NULL DEFAULT '0',
  `currentlogin` bigint(10) unsigned NOT NULL DEFAULT '0',
  `lastip` varchar(15) NOT NULL DEFAULT '',
  `secret` varchar(15) NOT NULL DEFAULT '',
  `picture` tinyint(1) NOT NULL DEFAULT '0',
  `url` varchar(255) NOT NULL DEFAULT '',
  `description` text,
  `mailformat` tinyint(1) unsigned NOT NULL DEFAULT '1',
  `maildigest` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `maildisplay` tinyint(2) unsigned NOT NULL DEFAULT '2',
  `htmleditor` tinyint(1) unsigned NOT NULL DEFAULT '1',
  `ajax` tinyint(1) unsigned NOT NULL DEFAULT '1',
  `autosubscribe` tinyint(1) unsigned NOT NULL DEFAULT '1',
  `trackforums` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `timemodified` bigint(10) unsigned NOT NULL DEFAULT '0',
  `trustbitmask` bigint(10) unsigned NOT NULL DEFAULT '0',
  `imagealt` varchar(255) DEFAULT NULL,
  `screenreader` tinyint(1) NOT NULL DEFAULT '0',
  `nlbid` bigint(10) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `mdl_user_mneuse_uix` (`mnethostid`,`username`),
  KEY `mdl_user_del_ix` (`deleted`),
  KEY `mdl_user_con_ix` (`confirmed`),
  KEY `mdl_user_fir_ix` (`firstname`),
  KEY `mdl_user_las_ix` (`lastname`),
  KEY `mdl_user_cit_ix` (`city`),
  KEY `mdl_user_cou_ix` (`country`),
  KEY `mdl_user_las2_ix` (`lastaccess`),
  KEY `mdl_user_ema_ix` (`email`),
  KEY `mdl_user_aut_ix` (`auth`),
  KEY `mdl_user_idn_ix` (`idnumber`)
) ENGINE=MyISAM AUTO_INCREMENT=5902 DEFAULT CHARSET=utf8 COMMENT='One record for each person'; 
```

我正在尝试运行插入查询，但它花费的时间太长。有什么办法可以减少时间吗？

以下是解释选择后的输出：-

![在此处输入图像描述](../Images/dad0c79280c1f59dfe80b1ed3f6625ee.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:05:30.917

我不能保证这会更快。但是，我猜测问题出在相关子查询中。您可以通过运行 select-only 部分来验证这一点，以查看它是否在合理的时间内运行。

此版本将相关子查询重写为连接：

```
Insert into mdl_course_enrol(userid, courseid, registrationdate, expirydate, status,
                             startdate, enddate, roleassignmentid)
    Select u.id, c.id, t2.registrationdate, t2.expirydate, t2.status, t2.startdate,
           t2.enddate, t2.roleassignmentid
    from nlbdb1_9.mdl_course_enrol t2 join
         nlbdb1_9.mdl_user u2
         on t2.userid = u2.userid join
         mdl_user u
         on (u.email collate utf8_unicode_ci = u2.email collate utf8_unicode_ci)  join
         nlbdb1_9.mdl_course c2
         on t2.courseid=c2.id join
         mdl_course c
         on (c2.fullname collate utf8_unicode_ci = c.fullname collate utf8_unicode_ci ) 
```

# ssis - 如何在 ssis 2008 中获取从子到父的变量值？

> ID：12528142
> 
> 赞同：0
> 
> 时间：2012-09-21T09:47:37.533
> 
> 标签：ssis

在我的场景中，更新从子级传递给父级的表值。
我正在使用 EPT（执行包任务）来调用子包，并且子包中的变量值之一将在父包中更新。所以我正在使用父包配置，但父包级别中没有填充值。

在我的情况下，在子包级别和父包级别中，变量名称应该相同。

请在这种情况下帮助我。

问候，拉维。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T06:36:50.760

不要在 child 和 master pacakge 中创建变量，而是在 child 中使用 master 包变量作为读取变量并将值分配给该变量。然后在执行孩子后回到主人那里，变量用子值更新。我试过了，成功了。

谢谢拉维库玛

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-31T08:04:00.213

我们只能在运行时将子变量值分配给父变量。由于父包充当子包的容器，因此可以访问父变量，但只能在运行时访问。

这可以使用子包中的脚本任务来实现。

以下是步骤：-

1-在父包中创建一个变量。2- 在子包中创建一个子变量。3- 在子包中打开脚本任务。4-将 ReadOnlyVariables 变量选项指定为子变量。5 将 ReadWriteVariables 变量选项指定为父变量。

(** 注意：- 父变量在 ReadWriteVariables 变量选项中不可用，但不用担心只需手动给出名称示例：- “User::ParentVariable”

**“这是可行的，因为脚本任务在设计时不会验证在其 ReadOnlyVariables 和 ReadWriteVariables 属性中声明的变量名称。”** )

6-编辑脚本任务并使用以下代码将子变量值分配给父变量。

```
 public void Main()

{
  Dts.Variables["Parentvariable"].Value=Dts.Variables["Childvariable"].Value.ToString();

} 
```

希望它有所帮助......谢谢:) !!!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:05:51.263

我相信使用父包配置在子包中设置变量就像通过值而不是通过引用将变量传递给函数。换句话说，您在执行时将子变量的值设置为父包中变量的值。由于这两个项目是单独的可执行文件，因此变量的范围不能（至少到 2008 年）从子级传递给父级。您将需要查看将数据存储在其他位置（也许将其存储到表中）并在控件返回父包后从该位置检索它。我相信你在 2012 年可能有更高级别的范围变量，但我还没有将任何包移动到那个级别，所以我不得不推迟到那些可能使用过 2012 年的人。

# android - 想要获得 Sprite Touch 但不在透明区域

> ID：12528145
> 
> 赞同：3
> 
> 时间：2012-09-21T09:47:48.200
> 
> 标签：android, andengine, game-physics

我正在 Andengine 中开发壁纸，在这个壁纸中，我希望精灵在触摸时进行交互，但我不希望精灵在用户触摸 Sprite 的透明区域时进行交互（应该在用户触摸精灵的彩色区域时进行交互），如何有可能..请帮助...我将非常感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:26:09.250

您将需要使用其他方法进行命中检测。有这家伙实现的像素级碰撞检测： [https ://github.com/m5/andengine-pixel-perfect](https://github.com/m5/andengine-pixel-perfect)

还有Box2D 版本。尝试使用物理编辑器 (http://www.codeandweb.com/physicseditor) 使您的 box2D 形状与您的精灵轮廓相匹配。

# apache-camel - 骆驼找不到组件烟雾

> ID：12528147
> 
> 赞同：0
> 
> 时间：2012-09-21T09:47:59.377
> 
> 标签：apache-camel, smooks

我正在尝试在骆驼路线上进行 smooks 转换。我已经看到骆驼对它有本机支持，但是当我运行我的简单路线时：

```
 <beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:camel="http://camel.apache.org/schema/spring"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">

  <camel:camelContext xmlns="http://camel.apache.org/schema/spring">
    <!-- here is a sample which processes the input files
         (leaving them in place - see the 'noop' flag)
         then performs content based routing on the message using XPath -->
    <camel:route>
      <camel:from uri="file:src/main/resources/smookFromCsvToXml/from"/>
          <camel:to uri="smooks://src/main/resources/config/smooks.xml"/>
          <camel:to uri="file:src/main/resources/smookFromCsvToXml/to"/>
    </camel:route>
  </camel:camelContext>

</beans> 
```

我收到以下错误：

```
*************************************
Error occurred while running main from: org.apache.camel.spring.Main
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.camel.maven.RunMojo$1.run(RunMojo.java:440)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.camel.RuntimeCamelException: org.apache.camel.FailedToCreateRouteException: Failed to create route route1 at: >>> To[smooks://src/main/resources/config/smooks.xml] <<< in route: Route[[From[file:src/main/resources/smookFromCsvToXml/from]]... because of Failed to resolve endpoint: smooks://src/main/resources/config/smooks.xml due to: No component found with scheme: smooks
    at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1280)
    at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:120)
    at org.apache.camel.spring.CamelContextFactoryBean.onApplicationEvent(CamelContextFactoryBean.java:280)
    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:97)
    at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:303)
    at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:911)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:428)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:93)
    at org.apache.camel.spring.Main.createDefaultApplicationContext(Main.java:186)
    at org.apache.camel.spring.Main.doStart(Main.java:140)
    at org.apache.camel.support.ServiceSupport.start(ServiceSupport.java:60)
    at org.apache.camel.main.MainSupport.run(MainSupport.java:140)
    at org.apache.camel.main.MainSupport.run(MainSupport.java:326)
    at org.apache.camel.spring.Main.main(Main.java:73)
    ... 6 more
Caused by: org.apache.camel.FailedToCreateRouteException: Failed to create route route1 at: >>> To[smooks://src/main/resources/config/smooks.xml] <<< in route: Route[[From[file:src/main/resources/smookFromCsvToXml/from]]... because of Failed to resolve endpoint: smooks://src/main/resources/config/smooks.xml due to: No component found with scheme: smooks
    at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:873)
    at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:171)
    at org.apache.camel.impl.DefaultCamelContext.startRoute(DefaultCamelContext.java:722)
    at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:1779)
    at org.apache.camel.impl.DefaultCamelContext.doStartCamel(DefaultCamelContext.java:1572)
    at org.apache.camel.impl.DefaultCamelContext.doStart(DefaultCamelContext.java:1437)
    at org.apache.camel.spring.SpringCamelContext.doStart(SpringCamelContext.java:179)
    at org.apache.camel.support.ServiceSupport.start(ServiceSupport.java:60)
    at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:1405)
    at org.apache.camel.spring.SpringCamelContext.maybeStart(SpringCamelContext.java:228)
    at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:118)
    ... 19 more
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: smooks://src/main/resources/config/smooks.xml due to: No component found with scheme: smooks
    at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:485)
    at org.apache.camel.util.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:50)
    at org.apache.camel.model.RouteDefinition.resolveEndpoint(RouteDefinition.java:186)
    at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:107)
    at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:113)
    at org.apache.camel.model.SendDefinition.resolveEndpoint(SendDefinition.java:61)
    at org.apache.camel.model.SendDefinition.createProcessor(SendDefinition.java:55)
    at org.apache.camel.model.ProcessorDefinition.makeProcessor(ProcessorDefinition.java:441)
    at org.apache.camel.model.ProcessorDefinition.addRoutes(ProcessorDefinition.java:179)
    at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:870)
    ... 29 more
************************************* 
```

该应用程序使用 maven camel 插件运行，所以这是我的 pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

  <modelVersion>4.0.0</modelVersion>

  <groupId>com.ddelizia</groupId>
  <artifactId>CamelRouterTester</artifactId>
  <packaging>jar</packaging>
  <version>0.0.1-SNAPSHOT</version>

  <name>A Camel Spring Route</name>
  <url>http://www.myorganization.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
    <camelVersion>2.10.1</camelVersion>
  </properties>

  <repositories>
    <repository>
      <id>release.fusesource.org</id>
      <name>FuseSource Release Repository</name>
      <url>http://repo.fusesource.com/nexus/content/repositories/releases</url>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <releases>
        <enabled>true</enabled>
      </releases>
    </repository>
    <repository>
      <id>snapshot.fusesource.org</id>
      <name>FuseSource Snapshot Repository</name>
      <url>http://repo.fusesource.com/nexus/content/repositories/snapshots</url>
      <snapshots>
        <enabled>true</enabled>
      </snapshots>
      <releases>
        <enabled>false</enabled>
      </releases>
    </repository>
    <repository>
      <id>ea.fusesource.org</id>
      <name>FuseSource Early Access Repository</name>
      <url>http://repo.fusesource.com/nexus/content/groups/ea</url>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <releases>
        <enabled>true</enabled>
      </releases>
    </repository>
  </repositories>

  <pluginRepositories>
    <pluginRepository>
      <id>release.fusesource.org</id>
      <name>FuseSource Release Repository</name>
      <url>http://repo.fusesource.com/nexus/content/repositories/releases</url>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <releases>
        <enabled>true</enabled>
      </releases>
    </pluginRepository>
    <pluginRepository>
      <id>snapshot.fusesource.org</id>
      <name>FuseSource Snapshot Repository</name>
      <url>http://repo.fusesource.com/nexus/content/repositories/snapshots</url>
      <snapshots>
        <enabled>true</enabled>
      </snapshots>
      <releases>
        <enabled>false</enabled>
      </releases>
    </pluginRepository>  
    <pluginRepository>
      <id>ea.fusesource.org</id>
      <name>FuseSource Early Access Repository</name>
      <url>http://repo.fusesource.com/nexus/content/groups/ea</url>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <releases>
        <enabled>true</enabled>
      </releases>
    </pluginRepository>
  </pluginRepositories>

  <dependencies>
    <dependency>
      <groupId>org.apache.camel</groupId>
      <artifactId>camel-core</artifactId>
      <version>${camelVersion}</version>
    </dependency>
    <dependency>
      <groupId>org.apache.camel</groupId>
      <artifactId>camel-spring</artifactId>
      <version>${camelVersion}</version>
    </dependency>

    <!-- logging -->
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-api</artifactId>
      <version>1.6.1</version>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-log4j12</artifactId>
      <version>1.6.1</version>
    </dependency>
    <dependency>
      <groupId>log4j</groupId>
      <artifactId>log4j</artifactId>
      <version>1.2.16</version>
    </dependency>

    <!-- testing -->
    <dependency>
      <groupId>org.apache.camel</groupId>
      <artifactId>camel-test</artifactId>
      <version>${camelVersion}</version>
      <scope>test</scope>
    </dependency>

  </dependencies>

  <build>
    <defaultGoal>install</defaultGoal>

    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>2.4</version>
        <configuration>
          <source>1.6</source>
          <target>1.6</target>
        </configuration>
      </plugin>

      <!-- allows the route to be ran via 'mvn camel:run' -->
      <plugin>
        <groupId>org.apache.camel</groupId>
        <artifactId>camel-maven-plugin</artifactId>
        <version>${camelVersion}</version>
      </plugin>
    </plugins>
  </build>

</project> 
```

所以它接缝骆驼无法检索这个组件（我正在使用骆驼工件的最新版本），所以我应该添加一些其他依赖项吗？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:39:38.157

我找到了解决方案，我错过了添加到我的 pom.xml 中的 smooks 依赖项：

```
<dependency>
    <groupId>org.milyn</groupId>
    <artifactId>milyn-smooks-all</artifactId>
    <version>1.5.1</version>
</dependency> 
```

现在它起作用了！:)

# php - 获取访问者的真实IP，更好地信任real_ip 或forwared_for？

> ID：12528149
> 
> 赞同：-1
> 
> 时间：2012-09-21T09:48:10.417
> 
> 标签：php, nginx

我想要一些东西来确定访问者的真实 IP 地址。

该脚本包括 X_REAL_IP 和 X_FORWARDED_FOR。我只是想知道我应该首先检查哪个以获得最佳结果？

任何想法？

[编辑] 我会更具体。

Nginx 如何以及何时可以同时设置 w_real_ip 和 x_forwarded_for？当两者都设置时，我应该阅读哪一个？它取决于服务器配置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:49:40.403

你需要检查他们两个。
`REMOTE_ADDR`- 真实或代理 IP
`X_REAL_IP`和`X_FORWARDED_FOR`- 代理标头。并非所有代理都设置它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:51:01.357

X-Forwared-For 是代理服务器通常添加客户端地址的标头：“192.168.1.1, 10.10.10.1, 10.10.1.1”。变量 $proxy_add_x_forwarded_for 执行此添加。X-Real-IP 是非标准标头，其中 nginx 设置客户端地址。

# windows - 如何使用 CMD 命令将文件路径拆分为其组件并使用双反斜杠再次连接

> ID：12528151
> 
> 赞同：2
> 
> 时间：2012-09-21T09:48:14.897
> 
> 标签：windows, batch-file, cmd, split, concat

我需要帮助解决以下问题：

**我想使用 CMD 命令将文件路径拆分为批处理文件中的组件。**

首先我确定批处理文件所在的路径：

```
set home=%~dp0  (e.g. C:\SomeFolder\OtherFolder\) 
```

我需要的是将此字符串提取到：

*   C：
*   某个文件夹
*   其他文件夹

并将这些组件重新连接到：

*   C:\\SomeFolder\\OtherFolder\\

这有助于我遍历文件路径的元素

```
set List=!home!
:ProcessListSource
FOR /f "tokens=1* delims=\" %%a IN ("!List!") DO ( 
  if "%%a" NEQ "" ( 
        echo %%a
  )
  if "%%b" NEQ "" (
      set List=%%b
      goto :ProcessListSource
  )
) 
```

循环工作正常，文件路径的组件正确回显。我认为通过简单的字符串连接来更改 echo 语句会很容易

```
if "%%a" NEQ "" ( 
set foo=%foo%%%a
set foo=%foo%\\
) 
```

结果简直发人深省。只有反斜杠会被添加到变量中。我的错误在哪里？回显 %%a 工作正常，但在连接语句中似乎是一个错误。我玩弄引号和“！” 但没有任何效果。

对此的任何帮助都将受到高度赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:09:26.543

如果您只需要将反斜杠加倍，则使用替换更简单。

```
set "home=%~dp0"
set "foo=%home:\=\\%"
echo %foo% 
```

您的代码也可以工作：

但关键词就在这里`EnableDelayedExpansion`（就像每天一样）。
这就是为什么`%foo%`没有按预期扩展的原因。

在你之后添加这一行`@echo off`

```
setlocal EnableDelayedExpansion 
```

并将您的连接块更改为

```
if "%%a" NEQ "" ( 
set foo=!foo!%%a
set foo=!foo!\\
) 
```

# c# - 识别以编程方式创建的特定控件

> ID：12528157
> 
> 赞同：0
> 
> 时间：2012-09-21T09:48:47.223
> 
> 标签：c#, asp.net

我正在以编程方式创建多行控件；每个都包含一个复选框和一个文本框。

我想以某种方式识别复选框的 id，以便它知道要删除哪个文本框。解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:56:13.777

您创建了控件，因此您可以控制其名称。给它一个 GUID 或你制作的序列号。

但是......也许问题是所有权问题之一。您的问题意味着您只能按名称访问控件。由于您以编程方式创建了它，这意味着您对它有一个引用。因此，请保留对您创建的控件的引用。

现在，深入研究应用程序，如果您想删除它，这意味着您已经知道要删除什么，这就引出了一个问题，为什么您需要一个名字？

抱歉，如果这些不是您之后的答案，但我希望它们能提出有关设计的有用问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:00:11.667

您可以组成某种命名模式，例如复选框的“cbx-[row num]”和文本框的“txt-[row num]”。

这样，您将拥有一组名为“cbx-1、cbx-2、cbx-3”的控件和名为“txt-1、txt-2、txt-3”的匹配文本框。为“cbx-X”找到匹配的“txt-X”应该很简单。

编辑：您可以使用 System.Web.UI.FindControl(string) 通过它的 id 属性来查找控件。

# javascript - 我怎样才能在触摸时做某事，但不能在触摸和拖动时做

> ID：12528158
> 
> 赞同：1
> 
> 时间：2012-09-21T09:48:47.737
> 
> 标签：javascript, jquery, touch

我正在构建一个响应式站点，主导航显示`hover`. `click`在触摸屏上（`touchstart`更具体地说）它会这样做。

在桌面上，当用户不再将鼠标悬停在导航或子导航上时，它就会消失。为了在触摸屏上实现同样的功能，我将一个函数绑定`touchstart`到`body`. 此函数检查触摸是否发生在`nav`. 如果没有，它会关闭一个打开的子导航。

问题是我只希望在用户点击外部时发生这种情况`nav`，*而不是*在他们滚动时发生。如何检查用户是否滚动而不是仅仅点击？

到目前为止的功能是这样的：

```
$('body').bind('touchstart', function(e) {
    if($(e.target).closest('nav').length == 0) {
        closeAll();
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:52:00.347

我会检测他们在touchstart上触摸的位置（坐标），并设置一个时间在几毫秒后检查......如果触摸点移动了几个像素以上，他们正在滚动。

编辑：我在为触摸屏界面编码时遇到的另一件事是，[某些设备在使用 click() 时具有约 300 毫秒的内置延迟](http://cubiq.org/remove-onclick-delay-on-webkit-for-iphone)。如果您还没有，您可以覆盖它。

# html - 组织 HTML 文档中的内容

> ID：12528162
> 
> 赞同：1
> 
> 时间：2012-09-21T09:49:11.647
> 
> 标签：html, indexing, cloud, search-engine

谷歌和公司。爬网、下载 HTML 文档并组织内容。

我想整理来自不同网店的产品/优惠。网上商店使用不同的系统并具有不同的 HTML 结构。

我想避免为每个网店编写转换器，并希望组织内容以使过程更简单。

我不介意使用云应用程序和开源项目。

有什么建议么？

# hadoop - hbase namenode单节点故障如何解决

> ID：12528163
> 
> 赞同：1
> 
> 时间：2012-09-21T09:49:12.270
> 
> 标签：hadoop, hbase

我使用的是hbase 0.94.0，我设置了三台机器，一台用于master，另外两台机器作为区域服务器，master也是namenode服务器。你知道hadoop namenode是一个单节点，所以我很害怕单机故障，你有解决这个问题的好主意吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:56:51.850

这里有两个问题需要处理：HDFS 的 NameNode 故障和 HBase 的 master 故障。

**对于 HBase：** [您可以使用多个 HBase 主服务器](http://wiki.apache.org/hadoop/Hbase/MultipleMasters)。这些主服务器中只有一个处于活动状态，其余的是备份。一旦前一个主节点出现故障，其中一个备份将扮演主节点的角色。

**对于 HDFS：** Namenode 是单点故障，因此请尝试为其使用非常可靠的硬件，使用 RAID 存储或其他一些冗余存储解决方案。但是，备份 Namenode 有一些有趣的替代方案，例如[Backup Node](http://hadoop.apache.org/docs/hdfs/current/hdfs_user_guide.html#Backup+Node)和[AvatarNode](http://hadoopblog.blogspot.fi/2010/02/hadoop-namenode-high-availability.html)

另外，通常建议将 HBase 主节点安装在与 Hadoop Namenode 不同的节点上。我不太了解您的应用程序，但是您的安装很小（3 台机器）并且似乎没有投入生产，因此您实际上可以手动重新启动 master/namenode。只有在生产环境中使用许多机器时，故障才是一个严重的问题。

# c# - 在存储到磁盘之前对流进行病毒扫描

> ID：12528168
> 
> 赞同：0
> 
> 时间：2012-09-21T09:49:39.060
> 
> 标签：c#, file, upload, stream, virus

我找到了很多关于如何扫描上传文件的解决方案。我的问题是：互联网上的每个解决方案都在将流保存为文件后开始扫描。

我的问题：文件存储在磁盘上时会损害服务器吗？如果是这样，是否可以在将上传的流存储到硬盘之前对其进行病毒检查？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T09:53:33.040

文件只是一系列字节。将文件保存到磁盘时，操作系统不会运行该文件。将其保存到磁盘不会对您造成伤害，但请确保在检测到病毒时删除该文件。

我认为您无法轻松验证流，因为病毒扫描程序通常是处理文件的进程。

# asp.net - 如何对我自己的数据库表进行表单身份验证？

> ID：12528171
> 
> 赞同：0
> 
> 时间：2012-09-21T09:49:50.093
> 
> 标签：asp.net, asp.net-mvc-3, forms-authentication

在我的 MSSQL 数据库中，我创建了两个表：

*   用户
*   用户角色

用户有一个名为 userrole 的列，用于对表进行 FK。

现在，我刚刚打开 VS 2010 并创建了一个带有表单身份验证的 MVC 3，因为我将创建一个允许用户注册和登录的社区站点。

但我认为有一种方法可以修改 FormsAuthentication 以使用我的表来检查/获取必要的数据，还是我弄错了？我在任何地方都看不到数据库连接，所以表单身份验证在我的应用程序中过着自己的生活，只是处理身份验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:53:31.393

如果您想以 MS 的方式进行身份验证，但使用自己的表，则必须实现自己的 Membership Provider

[http://msdn.microsoft.com/en-us/library/f1kyba5e(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/f1kyba5e(v=vs.100).aspx)

```
public class CustomMembershipProvider : MembershipProvider
{ 
// go on overriding members
} 
```

# apache-flex - 带有 itemrenderer 的 Flex 列表获取选定值

> ID：12528172
> 
> 赞同：0
> 
> 时间：2012-09-21T09:49:53.950
> 
> 标签：apache-flex, flex-mobile

我有一个当前包含 2 个视图的 Flex 移动应用程序

视图 1 有一个使用 itemRenderer 显示 ID 的数据绑定列表，而标签视图 2 显示一个使用 itemRenderer 显示基于数据集内容的控件的数据绑定列表。

所有数据都保存在 SQLite 数据库中。

视图 1 是调查列表 视图 2 是与每个调查相关的问题列表。

我正在努力的是将调查 ID 值传递给视图 2 中的 SQL 查询，以便返回的数据是与每个调查相关的问题。

我一遍又一遍的 dispatchEvent 但无法弄清楚如何将相关值从 data.surveyID 传递到视图 2 上的参数变量以查询数据库。

查看 1 个代码

```
 <?xml version="1.0" encoding="utf-8"?>
            <s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
                    xmlns:s="library://ns.adobe.com/flex/spark" 
                    xmlns:mx="library://ns.adobe.com/flex/mx" 
                    title="Surveys"
                    creationComplete="listen()">
                <fx:Script>
                    <![CDATA[
                        import flash.data.SQLConnection;
                        import flash.data.SQLResult;
                        import flash.data.SQLStatement;
                        import flash.events.Event;
                        import flash.filesystem.File;
                        import mx.collections.ArrayCollection;
                        import spark.events.IndexChangeEvent;
                        import spark.events.ListEvent;
                        import spark.transitions.FlipViewTransition;
                        import spark.transitions.FlipViewTransitionMode;
                        import spark.transitions.ViewTransitionDirection;
                        private var conn:SQLConnection;
                        private function get myData():ArrayCollection 
                        {
                            var stmt:SQLStatement = new SQLStatement();
                            stmt.sqlConnection = new SQLConnection();
                            stmt.sqlConnection.open(File.applicationDirectory.resolvePath("assets/cp_db.sqlite"));
                            stmt.text = "SELECT * FROM surveys";
                            stmt.execute();
                            var result:Array = stmt.getResult().data;
                            if (result)
                            {
                                var list:ArrayCollection = new ArrayCollection();
                                for (var i:int=0; i<result.length; i++) 
                                {
                                    list.addItem(result[i]);
                                }
                                return list; 
                            }
                            else 
                            {
                                return null; 
                            } 
                        }
                        private function workingHandler ( event:Event ) : void
                        {
                            trace( "I'm the working handler here :) " );
                        }
                        private function listen():void{
                        list.addEventListener( "switchToDay", regularListener );

                        }

                        public var itemLabel:String;
                        private function regularListener (event:Event) : void
                        {
                            trace( "I'm the regular listener"  );
                            trace(itemLabel);
                        }
                        public function conIndex( ind:int):String{
                            return ind.toString();
                        }

                    ]]>

                </fx:Script>
                <fx:Declarations>
                    <!-- Place non-visual elements (e.g., services, value objects) here -->
                </fx:Declarations>

                <s:List id="list" left="10" right="10" top="10" bottom="10" labelField="{data.SurveyName}"
                        click="navigator.pushView(surveyDetailView, conIndex(list.selectedIndex+1));"
                        dataProvider="{myData}"  >
                    <s:itemRenderer>
                        <fx:Component>
                            <s:ItemRenderer>
                                <s:LabelItemRenderer id="surID" width="50" label="{data.surveyID}"/>
                                <s:LabelItemRenderer id="surName" x="0" width="100%" label="{data.SurveyName}"
                                                     click="surName.dispatchEvent(new Event('switchToDay', true,false));"/>
                            </s:ItemRenderer>
                        </fx:Component>
                    </s:itemRenderer>
                </s:List>
            </s:View> 
```

查看 2 代码

```
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:mx="library://ns.adobe.com/flex/mx"
    title="{data}">
<fx:Declarations>
    <s:SlideViewTransition id="slideTrans" direction="down" duration="300"/>
</fx:Declarations>
<fx:Script>
    <![CDATA[
        import flash.data.SQLConnection;
        import flash.data.SQLStatement;
        import flash.filesystem.File;
        import flash.filesystem.FileMode;
        import mx.collections.ArrayCollection;
        import spark.components.Button;
        import spark.components.Label;
        public var surveyIdParam:String = '1';
        public var myPar:String;
        public function get myData():ArrayCollection 
        {
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = new SQLConnection();
            stmt.sqlConnection.open(File.applicationDirectory.resolvePath("assets/cp_db.sqlite"));

            stmt.parameters[0] = surveyIdParam;
            stmt.text = "SELECT * FROM surveyquestions  where surveyID = ?";
            stmt.execute();
            var result:Array = stmt.getResult().data;

            if (result)
            {
                var list:ArrayCollection = new ArrayCollection();
                for (var i:int=0; i<result.length; i++) 
                {
                    list.addItem(result[i]);
                }
                return list; 
            }
            else 
            {
                return null; 
            } 
        }
    ]]>
</fx:Script>
<s:List id="list" left="0" right="0" top="50" bottom="0" dataProvider="{myData} ">
    <s:itemRenderer>
        <fx:Component>
            <s:ItemRenderer>
                <fx:Script>
                    <![CDATA[
                        import spark.components.Label;
                        private function addItem(qtype:String):void
                        {

                            if (qtype == "1") {
                                icrHeading.visible = true;
                                ti.visible=false;
                                cb.visible=false;
                            }
                            else if (qtype == "2") {

                            }
                            else if (qtype == "3") {
                                icrDetail.visible=true;
                            }
                        }
                    ]]>
                </fx:Script>
                <s:VGroup id="contentHolder">

                </s:VGroup>

                <s:IconItemRenderer id="icr1" visible="false" x="0" width="50"
                                    label="{data.QuestionTypeID}"/> 
                <s:IconItemRenderer id="icrHeading" visible="false" x="0" width="450"
                                    label="{data.QuestionTitle}" color="0xff0000"/>
                <s:IconItemRenderer id="icrDetail" visible="false" x="50" width="450"
                                    label="{data.QuestionTitle}"/>
                <s:Label id="ilbl1" x="50" width="120" added="addItem(icr1.label.toString())"/>
                <s:TextInput id="ti" x="600" width="200" text=""/>
                <s:CheckBox id="cb" x="550">
                </s:CheckBox>
            </s:ItemRenderer>
        </fx:Component>
    </s:itemRenderer>
</s:List> 
<s:Button id="btn" x="717" y="10" label="{data}" click="navigator.popView()"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T20:23:09.327

本文[可能](http://cookbooks.adobe.com/post_Passing_data_between_Views-18854.html)会帮助您在视图之间传递数据。基本上，`navigator.pushView`接受参数

# javascript - 替换 Javascript 中 HTML 元素中所有出现的“1000”

> ID：12528179
> 
> 赞同：0
> 
> 时间：2012-09-21T09:50:29.113
> 
> 标签：javascript, replace

我目前正在尝试替换 HTML 中出现的数字 999，如下所示。我添加了第三行，它破坏了脚本。

```
var new_id = uniqid(),
    new_field_html = repeater.find('> table > tbody > tr.row-clone').html()
                .replace(/(=["]*[\w-\[\]]*?)(\[999\])/g, '$1[' + new_id + ']');
    new_field_html = new_field_html.('div.checkbox_container').html()
                .replace('1000', new_id);
    new_field = $('<tr class="row"></tr>').append( new_field_html ); 
```

我试图替换的变量 1000 出现在许多地方，例如元素的 ID`<li>`和`onclick`Javascript 元素。

## 最终解决方案

上面的代码现在已更改如下：

```
var new_id = uniqid();
var new_field_html = repeater.find('> table > tbody > tr.row-clone')
                     .html().replace(/(=["]*[\w-\[\]]*?)(\[999\])/g, 
                     '$1[' + new_id + ']').replace(/1000/g, new_id)
                     .replace(/999/g, new_id);
new_field = $('<tr class="row"></tr>').append( new_field_html ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:55:27.393

new_html_field 变量不是 jQuery 对象，您不能在其上使用 jQuery 方法。你可以通过做它使它成为一个 jquery 对象`$(new_field_html)`。

第二个问题在于这一点：

```
new_field_html.('div.checkbox_container') 
```

您可能打算使用

```
new_field_html.find('div.checkbox_container') 
```

把它放在一起：

```
new_field_html = $(new_field_html)
                     .find('div.checkbox_container')
                     .html().replace('1000', new_id); 
```

# editor - Sublime Text 2 在 sshfs 上工作时速度很慢

> ID：12528182
> 
> 赞同：12
> 
> 时间：2012-09-21T09:50:31.573
> 
> 标签：editor, remote-access, sublimetext2, sshfs

我正在使用 Sublime Text 2.0.1，不幸的是，让它与分布在 sshfs 上的文件一起工作是一件痛苦的事情——切换到其他选项卡并返回使 Sublime 检查文件是否未被更改。

是否有任何 Sublime 偏好或 sshfs 挂载选项可以使我在远程资源上工作成为可能？

现在我正在使用以下 sshfs 选项（更快的加密）：

```
-o Ciphers=arcfour 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-03T16:00:37.093

对于基于 SSHFS 和 FUSE 的文件系统，这确实比 Sublime Text 更容易出现问题。

如果您想要一些更强大且易于使用的东西，您可以尝试我一直在研究的东西，称为“xeno”（[https://xeno.io](https://xeno.io)）。我在使用 SSHFS 时也遇到了类似的问题（更多的是与劣质的连接而不是缓慢的编辑器性能有关），所以我将这个 Git/SSH mashup 放在一起作为 SSHFS 的替代品。它将允许您通过 SSH 连接在 Sublime Text（或任何本地编辑器）中打开文件/文件夹，并自动将更改同步到远程计算机。您甚至可以从SSH 连接*内部*启动本地编辑器，并在您退出 SSH 会话后继续将更改同步到远程。它应该适用于几乎所有的 POSIX 系统（我自己在 OS X 上使用它来连接 Linux 机器并在 Sublime Text 中编辑文件）。

它的作用是为您要在远程机器上编辑的文件生成一个工作树外的 Git 存储库，然后将其克隆到本地并通过 SSH 使用 Git 作为传输/同步机制。这不会干扰任何现有的源代码管理，也不需要您使用任何现有的源代码管理。而且因为它是基于 Git 构建的，所以它的速度非常快，并且支持自动合并两端可能会发生变化的文件，这与 SSHFS/rmate/rsub 不同，后者只会破坏任何具有较旧时间戳的文件。

它也是免费和开源的:)，我真的很想得到一些反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-09T12:25:15.680

正如@havoc-io所说，这主要是ST2如何监听文件系统修改的问题。sshfs 处理请求太慢了。

我建议你使用像[Sublime SFTP](http://wbond.net/sublime_packages/sftp)这样的插件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-31T04:54:19.560

这个：

```
{
    "index_files": false
} 
```

在崇高的设置帮助我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-12T04:54:36.970

要停止 sublime text`listening for file modifications`并`indexing files for goto definitions`减慢文件夹的加载速度，请使用这些选项。我用过`sshfs mounts`，这个技巧效果很好。不要忘记重新启动 sublime text。

***设置***

```
{
    "index_files": false,
    "show_definitions": false
} 
```

# c++ - QTimer 在每次启动/停止时变得更快

> ID：12528184
> 
> 赞同：2
> 
> 时间：2012-09-21T09:50:37.023
> 
> 标签：c++, qt, qtimer

我正在使用 a`QTimer`来平滑地更改标签的大小：当我将鼠标悬停在按钮上时，它应该会慢慢增长，而当鼠标离开按钮时，它会慢慢折叠（减小它的大小直到消失）。

我的表单类中有两个计时器：

```
QTimer oTimer, cTimer;//oTimer for expanding, cTimer for collapsing 
```

在表单的构造函数中，我设置了计时器的值并将按钮`mouseOver`和`mouseOut`信号连接到表单的插槽：

```
oTimer.setInterval( 25 );
cTimer.setInterval( 25 );

connect( ui.Button, 
         SIGNAL(mouseEntered(QString)), 
         this, 
         SLOT(expandHorizontally(QString)) );
connect( ui.Button, 
         SIGNAL(mouseLeft(QString)), 
         this, 
         SLOT(compactHorizontally(QString)) ); 
```

现在，在这些插槽中，我将相应的计时器连接到将逐渐改变大小的插槽，然后启动计时器：

```
void cForm::expandHorizontally(const QString & str)
{
    ui.Text->setText( str ); 
    connect( &oTimer, SIGNAL(timeout()), this, SLOT(increaseHSize()) );
    cTimer.stop();//if the label is collapsing at the moment, stop it
    disconnect( &cTimer, SIGNAL(timeout()) );
    oTimer.start();//start expanding
}

void cForm::compactHorizontally(const QString &)
{
    connect( &cTimer, SIGNAL(timeout()), this, SLOT(decreaseHSize()) );
    oTimer.stop();
    disconnect( &oTimer, SIGNAL(timeout()) );
    cTimer.start();
} 
```

之后，标签开始改变它的大小：

```
void cForm::increaseHSize()
{
    if( ui.Text->width() < 120 )
    {
        //increase the size a bit if it hasn't reached the bound yet
        ui.Text->setFixedWidth( ui.Text->width() + 10 );
    }
    else
    {
        ui.Text->setFixedWidth( 120 );//Set the desired size
        oTimer.stop();//stop the timer
        disconnect( &oTimer, SIGNAL(timeout()) );//disconnect the timer's signal
    }
}

void cForm::decreaseHSize()
{
    if( ui.Text->width() > 0 )
    {
        ui.Text->setFixedWidth( ui.Text->width() - 10 );
    }
    else
    {
        ui.Text->setFixedWidth( 0 );
        cTimer.stop();
        disconnect( &cTimer, SIGNAL(timeout()) );
    }
} 
```

**问题**：起初一切正常，标签慢慢打开和关闭。但是，如果它这样做了几次，它每次都会开始越来越快地改变大小（就像计时器的间隔越来越小，但显然不是）。最终，在几次打开/关闭之后，当我将鼠标悬停在按钮上时，它开始*立即将其大小增加到边界，并在鼠标离开按钮时**立即*折叠到零大小。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:16:13.487

我建议事件正在等待处理，排队事件的数量随着时间的推移而增加。可能是因为一个事件在两个定时器事件之间没有完全处理，或者是由于程序的其他部分。

为什么不只使用一个计时器？您可以走得更远，只使用插槽来进行大小更改事件。其他插槽仅用于更改更改类型：

```
void cForm::connectStuff(){
    connect( &oTimer, SIGNAL(timeout()), this, SLOT(changeSize()) );
    connect( 
          ui.Button, 
          SIGNAL(mouseEntered(QString)), 
          this, 
          SLOT(expandHorizontally()) 
    );
    connect( 
          ui.Button, 
          SIGNAL(mouseLeft(QString)), 
          this, 
          SLOT(compactHorizontally()) 
    );
}

void cForm::expandHorizontally(){
      shouldExpand = true;
}

void cForm::compactHorizontally(){
      shouldExpand = false;
}

void cForm::changeSize(){
     if(shouldExpand)
        increaseHSize();//call the function which expand
     else
        decreaseHSize();//call the function which compact
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T12:42:51.953

根据您的代码，`QTimer`的`timeout()`信号多次连接到同一个插槽，多个连接意味着当信号发出时，插槽也会被多次调用，这看起来好像计时器正在加速。

为避免这种情况，您可以通过以下方式使连接独一无二：

```
connect( &oTimer, SIGNAL(timeout()), this, SLOT(increaseHSize()), Qt::UniqueConnection); 
```

# c# - 如何获取在 C# 中运行 Windows 8 的机器的唯一标识符？

> ID：12528186
> 
> 赞同：8
> 
> 时间：2012-09-21T09:50:37.940
> 
> 标签：c#, windows-8, windows-store-apps, unique-id

我正在开发一个用 C# 编写的 Metro 应用程序，需要一种唯一标识设备的方法。我在文档中找到了看起来很棒的 ASHWID。建议的代码如下：

```
HardwareToken token = HardwareIdentification.GetPackageSpecificToken(null);
IBuffer hardwareId = token.Id;
IBuffer signature = token.Signature;
IBuffer certificate = token.Certificate; 
```

问题是，如何将 IBuffer 转换为可以使用的字符串？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-21T09:50:37.940

经过大量搜索实际上是在 JS 或 C++ 中的建议后，我终于找到了答案！

```
private string GetHardwareId()  
{  
    var token = HardwareIdentification.GetPackageSpecificToken(null);  
    var hardwareId = token.Id;  
    var dataReader = Windows.Storage.Streams.DataReader.FromBuffer(hardwareId);  

    byte[] bytes = new byte[hardwareId.Length];  
    dataReader.ReadBytes(bytes);  

    return BitConverter.ToString(bytes);  
} 
```

感谢访问这个博客 - [http://bartwullems.blogspot.co.uk/2012/09/windows-8-uniquely-identifying-device.html](http://bartwullems.blogspot.co.uk/2012/09/windows-8-uniquely-identifying-device.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T10:02:03.560

这应该也可以，但是我没有要测试的 Windows 8...

```
private string GetHardwareId()   
{ 
  return BitConverter.ToString(Windows.System.Profile.HardwareIdentification.GetPackageSpecificToken(null).Id.ToArray());
} 
```

如果你不止一次调用它，你可能想把它放在一个`Lazy<T>`

```
private static Lazy<string> _hardwareId = new Lazy<string>(() => BitConverter.ToString(Windows.System.Profile.HardwareIdentification.GetPackageSpecificToken(null).Id.ToArray()), true);

public string HardwareId()   
{ 
     return _hardwareId.Value;
} 
```

或者如果你知道它总是会被调用，就让它成为静态的：

```
public static readonly string HardwareId = BitConverter.ToString(Windows.System.Profile.HardwareIdentification.GetPackageSpecificToken(null).Id.ToArray())); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-30T08:38:07.147

您可以使用`HardwareIdentification.GetPackageSpecificToken(null)`，请参阅[http://msdn.microsoft.com/en-us/library/windows/apps/jj553431.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj553431.aspx)

该功能为您提供了大量信息，您可以根据需要进行过滤。例如：

```
public static string GetMachineId()
{
    var hardwareToken = 
        HardwareIdentification.GetPackageSpecificToken(null).Id.ToArray();
    var count = hardwareToken.Length / 4;
    ulong id = 0ul;
    for (int i = 0; i < count; i++)
    {
        switch (BitConverter.ToUInt16(hardwareToken, i * 4))
        {
            case 1:
                // processor
            case 2:
                // memory
            case 9:
                // system BIOS
                id = (id << 12) ^ BitConverter.ToUInt16(hardwareToken, i * 4 + 2);
                break;
        }
    }
    return Convert.ToBase64String(BitConverter.GetBytes(id));
} 
```

但是，请记住，此函数和底层 API 不能保证所有连接到 Internet 的机器的绝对唯一性。您通常会将其与有关用户的信息结合起来。

另一种选择是生成 GUID 并将其存储在本地（非漫游）存储中，并将其用作您的计算机 ID。根据您的确切需求，这可能是一个更好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-06T08:12:17.500

对于 guid id，您可以执行以下操作作为上述答案的扩展

```
 private Guid GetHardwareId()
    {
        var token = HardwareIdentification.GetPackageSpecificToken(null);  
        var hardwareId = token.Id;  
        var dataReader = Windows.Storage.Streams.DataReader.FromBuffer(hardwareId);  

        byte[] bytes = new byte[hardwareId.Length];  
        dataReader.ReadBytes(bytes);  

        byte[] deviceId = new byte[16];
        Array.Copy((byte[])bytes, deviceId, deviceId.Length);

        return new Guid(deviceId);
    } 
```

# yii - 帖子中突出显示的代码正在影响我的网站

> ID：12528187
> 
> 赞同：0
> 
> 时间：2012-09-21T09:50:38.747
> 
> 标签：yii, wmd, google-code-prettify, wmd-markdown

我使用我的 WMD 编辑器作为标记编辑器和 google prettify 以突出显示由 WMD 编辑器标记的语法，我使用 yii 作为框架，每当我在我的代码中包含一些 html 时，而不是被突出显示，它们被解释为我的主要 html 页面并分解了 web 的结构，我认为这是因为我使用 yii 方法来解码将显示的内容而不是编码，但是如果我使用编码方法..发布的语法被视为一个字符串，因此无法突出显示，任何帮助将不胜感激

```
 <div class="question-user-time" style="float:center;"><span class="question-owner"><?php echo "posted by ".$qowner->username." on ".$model->create_date;?> </span></div>
    </div>
    <div><?php echo html_entity_decode($model->content);?></div> 
```

非常感谢你

这是网站是如何被破坏的![在此处输入图像描述](../Images/7260bdf8127c9bebae5ff95a840ebc1e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:03:54.097

在生成所有元素都正确编码、引用和转义的网页时，您必须非常小心。这可能是一个非常复杂的问题。举个简单的例子，假设您在数据库中有一个包含字符“>”的字符串。如果您只是将其吐出以填充一些样板文本中的空白，您会将整个网页变成哈希，因为“>”被视为 html 元素。

# visual-c++ - JNI 通过选择要加载的 jvm.dll 创建 JVM

> ID：12528188
> 
> 赞同：1
> 
> 时间：2012-09-21T09:50:40.410
> 
> 标签：visual-c++

我的 PC 上安装了几个 Java。是否有可能以某种方式传递应该从哪个路径加载 jvm.dll 的设置？以下代码使用 JNI 创建 JVM：

```
void createJVM()
{

JavaVMInitArgs vm_args; 
JavaVMOption options[4]; 

int n = 0;     
char * str;
str= new char[1000];
sprintf(str, "-Djava.class.path=%S\\tst.jar", myPath);
options[n++].optionString = str; 

str= new char[1000];
sprintf(str, "-Djava.library.path=%S\\lib;%S", myPath, myPath);
options[n++].optionString = str;

str= new char[1000];
sprintf(str, "-Duser.dir=%S", myPath);
options[n++].optionString = str;

vm_args.version = JNI_VERSION_1_4;
vm_args.nOptions = n;     
vm_args.options = options;     
vm_args.ignoreUnrecognized = false;

JNI_CreateJavaVM(&jvm, (void**)&env, &vm_args); 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T14:19:06.300

我知道有两个选项：第一个是在运行可执行文件之前将 PATH 环境变量设置为您想要使用的 jvm.dll 目录，第二个是在运行时动态链接到 jvm.dll，例如通过使用[LoadLibrary](http://msdn.microsoft.com/en-us/library/ms686944%28VS.85%29.aspx)：

```
HINSTANCE hinstLib = LoadLibrary(TEXT("D:\\desired_jvm\\jre6\\bin\\client\\jvm.dll"));
typedef jint (JNICALL *PtrCreateJavaVM)(JavaVM **, void **, void *);
PtrCreateJavaVM ptrCreateJavaVM = (PtrCreateJavaVM)GetProcAddress(hinstLib,"JNI_CreateJavaVM");
jint res = ptrCreateJavaVM(&jvm, (void**)&env, &vm_args);
//... 
```

# javascript - 如何动态显示表格中的文本？

> ID：12528190
> 
> 赞同：1
> 
> 时间：2012-09-21T09:50:40.087
> 
> 标签：javascript, asp.net

我使用 asp.net ..在登录表单中我使用必填字段验证器和正则表达式验证器作为用户名。所以我需要在相同的 td 中显示错误消息以进行两个验证。首先它需要验证必填字段并在 td 中显示错误消息.如果那是字段，它需要检查该表达式并覆盖同一 td 中的错误消息。

这是我的 html.on 按钮单击验证正在工作，但错误消息显示在连续位置..

```
 <tr>
        <td>
            <asp:Label ID="l_uname" runat="server" CssClass="label" Text="User Name" ></asp:Label>
        </td>
        <td>
            <asp:TextBox ID="t_uname" runat="server" CssClass="text" ToolTip="Enter Username"></asp:TextBox>
        </td>           
        <td>
        <label class="l" runat="server">*</label>
        </td>
        <td>
        <asp:RequiredFieldValidator ID="rf_uname" CssClass="t" runat="server"           ErrorMessage="Enter the username" 
          ControlToValidate="t_uname"    ValidationGroup="logingroup"></asp:RequiredFieldValidator>
         <asp:RegularExpressionValidator ID="Re_name" runat="server"
            CssClass="t"  ControlToValidate="t_name" ValidationGroup="logingroup" 
            ValidationExpression="^[A-Za-z ]{6,20}$" ErrorMessage="Name should be 6-20 character">
            </asp:RegularExpressionValidator>
        </td>
    </tr>
    <asp:Button ID="login" runat="server" Text="Login" ValidationGroup="logingroup"     onclick="login_Click"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:45:12.283

将显示动态 (Display="Dynamic") 添加到它们不会在连续位置显示的验证器控件中。

像这样

```
 <asp:RequiredFieldValidator ID="rf_uname" CssClass="t" runat="server"           ErrorMessage="Enter the username" 
              ControlToValidate="t_uname" Display="Dynamic" ValidationGroup="logingroup"></asp:RequiredFieldValidator>
             <asp:RegularExpressionValidator ID="Re_name" Display="Dynamic" runat="server"
                CssClass="t"  ControlToValidate="t_name" ValidationGroup="logingroup" 
                ValidationExpression="^[A-Za-z ]{6,20}$" ErrorMessage="Name should be 6-20 character">
                </asp:RegularExpressionValidator> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:14:00.823

如果你有一个带有 css 类“tdclass”的 td，那么使用 text() 方法

```
$('.tdclass').text("message"); 
```

如果你想写 Html 然后使用**html()**方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:43:41.357

两个验证器将一起运行。要一次运行它们，您将需要`Enable`服务器端的第二个验证器。不是一个很好的方法。

更好的方法是只有一个正则表达式验证器，其中包含正确的消息以指示它是必需的，并且在 6-20 个字符之间

```
 <asp:RegularExpressionValidator ID="Re_name" runat="server"
        CssClass="t"  ControlToValidate="t_name" ValidationGroup="logingroup" 
        ValidationExpression="^[A-Za-z ]{6,20}$" 
        ErrorMessage="Username is required to be between 6-20 characters">
        </asp:RegularExpressionValidator> 
```

对于客户端验证，请查看[jQuery Validation](http://docs.jquery.com/Plugins/Validation)插件。这很简单，您需要做的就是添加 css 类来告诉它要应用什么验证。它确实在需要时支持更复杂的规则。

# c# - GeckoFX 在处理时显示错误

> ID：12528192
> 
> 赞同：1
> 
> 时间：2012-09-21T09:50:53.627
> 
> 标签：c#, browser, dispose, geckofx

我将 GeckoFX 13 用于我的桌面应用程序。所以我有一个主表单，它在需要时使用 GeckoWebBrowser 打开另一个表单。我也在我的主窗体中使用另一个 Gecko 浏览器。一切正常，除非我关闭应用程序时显示此错误

> 无法使用已与其底层 RCW 分离的 COM 对象。

它是一个与处置相关的问题。我知道第二种形式是一个不同的线程，这就是显示此错误的原因。但我需要知道解决方案。GeckoFX-8 没有这个问题。任何解决方案或建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T09:00:16.553

尝试这个：

```
protected override void OnClosed(EventArgs e)
{
   GeckoWebBrowser.Dispose();
   Xpcom.Shutdown();
   base.OnClosed(e);
} 
```

# memory - 来自内存转储的客户端计算机配置

> ID：12528198
> 
> 赞同：1
> 
> 时间：2012-09-21T09:51:21.790
> 
> 标签：memory, windbg, sos

如何从进程的内存转储中找到使用 windbg 的客户端计算机的 RAM 大小。

我试过vertarget，！地址摘要。但我无法在任何这些命令中找到 RAM 详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T21:50:53.683

我不认为你可以用`process`转储来做到这一点。如果您有`kernel`转储，则可以使用该`!vm`命令。

```
lkd> !vm

*** Virtual Memory Usage ***
    Physical Memory:      262013 (   1048052 Kb)
    Page File: \??\C:\pagefile.sys
      Current:    458752 Kb  Free Space:    169368 Kb
      Minimum:    458752 Kb  Maximum:      4194304 Kb
    Page File: \??\C:\swapfile.sys
      Current:    262144 Kb  Free Space:    260460 Kb
      Minimum:    262144 Kb  Maximum:      1572076 Kb 
```

# c++ - libpqxx 连接池

> ID：12528199
> 
> 赞同：4
> 
> 时间：2012-09-21T09:51:31.280
> 
> 标签：c++, libpqxx

我正在尝试使用 libpqxx 库开发一个非常简单直接的连接池。我对 c++ 还是很陌生，仍然对指针和引用感到很困惑。该类的行为非常简单：拥有一个带有一些已初始化连接的向量，并在需要时将连接弹出并推送到该向量上。由于指针和引用的错误实现，代码有很多错误。你能给我一些提示吗？

编辑：我设法修复了所有编译错误。当我运行主要功能时，它给了我一个分段错误。

```
class DbPool { 
```

上市：

```
pqxx::result runQuery(const string& query) {

    connection *conn = getCon();
    work trans(*conn);
    result res = trans.exec(query);
    trans.commit();
    releaseCon(conn);

    return res;
}

DbPool(uint32_t max_cons) {

    for (uint32_t i = 0; i < max_cons; i++) {

        connection* con = createCon();
        m_freeCons.push_back(shared_ptr < connection > (con));
    }
} 
```

私人的：

```
connection * createCon() {

    connection * conn =
            new connection(
                    "user='ak' password='rootpassword' dbname='bips_office' hostaddr='127.0.0.1' port='5432'");
    return conn;
}

void releaseCon(connection *con) {

    m_freeCons.push_back(shared_ptr < connection > (con));
}

connection* getCon() {

    shared_ptr < connection > conn = *(m_freeCons.end() - 1);
    m_freeCons.pop_back();
    return conn.get();
}

vector<shared_ptr<connection> > m_freeCons; 
```

};

```
int main(int argc, char *argv[]) {
     DbPool *pool = new DbPool(5);
     result res = pool->runQuery("SELECT COUNT (*) from captures");
     return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:00:28.947

如果您担心设计问题，这是我的五分钱：

*   你的代码真的可以编译吗？我认为不是，因为您有一个*指向连接的指针*向量，但是您正在推回*连接*对象（`m_freeCons.push_back(*con);`-`*`取消引用*指向连接*的指针）...
*   向成员提供可修改的句柄通常是一个坏主意（就像您在`getCon`方法中所做的那样 - 至少，`connection const *`如果可能，请返回 a
*   如果您必须使用指针集合，请考虑使用`shared_ptr`而不是原始指针 - 这样您就不必担心释放内存；或使用[Boost.PointerContainer](http://www.boost.org/doc/libs/1_40_0/libs/ptr_container/doc/ptr_container.html)；也见[这里](https://stackoverflow.com/questions/1361139/c-vector-pointers-to-objects)。
*   只是一个奇怪的风格问题：你为什么使用`return &(*conn)`？这会取消引用指针`conn`，然后再次获取它的地址。相反，你可以简单地写`return conn`！

用 s 回答您重写的问题`shared_ptr`：您仍然需要使用 new 创建连接，并在其周围包裹一个 shared_ptr；例如对于 createCon：

```
connection * createCon(){

    connection * conn = new connection("user='ak' password='rootpassword' dbname='bips_office' hostaddr='127.0.0.1' port='5432'");
    return conn;
} 
```

和

```
 connection* con = createCon();
    m_freeCons.push_back(shared_ptr<connection>(con)); 
```

在其他地方也类似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-01T19:41:48.493

受您帖子的启发，我在自己的项目中使用了这个简单的连接池。我使用了std::stack。推和弹出。添加连接时除了 try-catch 之外没有错误检查。对于 postgresql-db。

数据库.hpp：

```
#include <stack>
#include <pqxx/pqxx>

class Database {
private:
    const std::string connectionString = "dbname=db user=usr hostaddr=127.0.0.1 port=5432";
    std::stack<pqxx::connection *> dbpool;

public:
    Database(const unsigned int); 
```

数据库.cpp：

```
#include "Database.hpp"

Database::Database(const unsigned int connections) {
    for (int i = 0; i < connections; ++i) {
        try {
            auto* dbconn = new pqxx::connection(connectionString);
            dbpool.emplace(dbconn);
        } catch (const std::exception& e) {
            std::cerr << e.what() << std::endl;
        }
    }
} 
```

主.cpp：

```
#include "Database.hpp"

int main(int argc, char* argv[]) {
    Database database {10};

    auto *D = dbpool.top();
    dbpool.pop();

    const std::string query = "select * from mytable";
    pqxx::nontransaction N(*D);
    pqxx::result R(N.exec(query));

    for (pqxx::result::const_iterator c = R.begin(); c != R.end(); ++c) {
        std::cout << c[1].as<std::string>() << std::endl;
    };

    dbpool.push(D);
} 
```

# php - Chrome 扩展不使用 Jquery Ajax 发布数据

> ID：12528205
> 
> 赞同：1
> 
> 时间：2012-09-21T09:51:56.423
> 
> 标签：php, jquery, ajax, google-chrome-extension

我正在创建一个 chrome 扩展，它获取当前的标签 URL 并将其发布到服务器（PHP）。这是我的清单文件：

```
{
"name": "testApp",
"version": "0.0.0.1",
"description": "test Description",
"browser_action": {
"default_icon": "test.ico",
"default_title": "Test"
},
"background_page": "background.html",
"content_scripts": [
    {
      "matches": ["http://*/*"],
      "js": ["jquery.js"]
    }
  ],
"permissions": [
"tabs","http://localhost/"
]
} 
```

这是我的 background.html 文件

```
<html>
<head>
<script src="jquery.js"></script>
<script>
chrome.browserAction.onClicked.addListener(function(tab) {
    var url = tab.url
    postUrl(url);
});
function postUrl(url){
    $.ajax({
        url:'http://localhost/savetodb.php',
        type:'POST',
        data:{ name: "xyz", time: "3pm",url: url },
        success:function(data){
            alert(data);
        }
    });
}
</script>
</head>
</html> 
```

它向我使用**$_POST**打印的**savetodb.php**发送请求。但它正在打印。我没有得到问题是什么，我该如何解决......谢谢......**`print_r()``Array ( )`**

# php - codeigneiter 中不允许的键字符错误

> ID：12528209
> 
> 赞同：0
> 
> 时间：2012-09-21T09:52:00.570
> 
> 标签：php, codeigniter

当我在文件中启用会话的自动加载`autoload.php`并将我`encryption_key`的配置文件传递并设置为时`sess_use_database`，`TRUE`我在运行应用程序时得到了不允许的键字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:55:41.193

您可以在 application/config.php 中更改列表允许的字符

```
$config['permitted_uri_chars'] = 'a-zA_Z 0-9~%.:_\-'; 
```

您还可以阅读本主题 - [Codeigniter 中允许的 URI 字符](http://codeigniter.com/forums/viewthread/186039/)

# iphone - 如何在 iphone 中跟踪基于位置的 iAd？

> ID：12528211
> 
> 赞同：0
> 
> 时间：2012-09-21T09:52:03.940
> 
> 标签：iphone, xcode, ipad, iad

我需要如何跟踪基于位置的 iAd。

例如，如果我在德里，那么我如何显示，以跟踪周围的 iAd 长达 5 公里以在我的应用程序中显示。这可以证明吗？请清除我

提前致谢..

# objective-c - 如何在 Xcode 中使用 UITabarViewController - OBjectiveC？

> ID：12528214
> 
> 赞同：-1
> 
> 时间：2012-09-21T09:52:28.207
> 
> 标签：objective-c, xcode, ios4

我的代码：

```
UIView *screen=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
screen.backgroundColor=[UIColor grayColor];
UIView *screen2=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
screen.backgroundColor=[UIColor redColor];
screen2.backgroundColor=[UIColor greenColor];

UITabBarController *tab=[[UITabBarController alloc]init];
[tab setViewControllers:[NSArray arrayWithObjects:screen,screen2, nil]];

self.view=tab.view; 
```

但是当我运行它时出现异常： [[tab setViewControllers:[NSArray arrayWithObjects:screen,screen2, nil]];

谁能告诉我为什么？，我是初学者谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:55:08.490

您正在将 UIView 添加到您的标签栏视图控制器。你应该添加像 UIViewControllers 这样的视图控制器。这显示了如何以编程方式添加 uitabbarcontroller[链接](http://ioscoderef.blogspot.com/2012/08/adding-uitabbarcontroller-in.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T09:55:20.663

UITabBarController viewControllers 属性是 UIViewController 的数组而不是 UIViews，您需要使用视图控制器而不是视图来初始化数组

[视图控制器编程指南](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457-CH1-SW1)是开始阅读此内容的好地方

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-19T13:50:05.567

UITabBarController 有一个选项卡列表，每个选项卡是 uiviewcontroller 或 navigationViewController。您还需要为第一次打开提供 selectedTab 。

# jquery - 1.4.2 和 1.7.2 文件之间的 jQuery 冲突

> ID：12528216
> 
> 赞同：0
> 
> 时间：2012-09-21T09:52:40.733
> 
> 标签：jquery

我已经在 php 文件中集成了 draggableQuiz，这个 jQuery 插件适用于 jQuery 1.4.2，我已经在同一个文件中集成了 jQuery UI 对话框，它适用于 jQuery 1.7.2 文件，

在集成 draggableQuiz 插件之前，UI 对话框可以正常工作，但现在无法正常工作，

任何人都有相同的解决方案，请告诉我，

在此先感谢，马尼什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:55:09.597

网页上应该只有一个 jquery 版本文件。

所以删除参考`jQuery 1.4.2`，并使用`jQuery 1.7.2`或最新。

如果您在使用 jQuery 1.7.2 时发现任何问题，请更新您的其他也支持此版本的 jquery 插件文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:13:36.340

You should use jquery.min.js from google library.

[Download jquery min](http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js)

# android - 如何从 PC 安装 apk 文件？

> ID：12528219
> 
> 赞同：2
> 
> 时间：2012-09-21T09:52:44.017
> 
> 标签：android, adb

我想将 apk 文件从 PC 安装到平板电脑。但问题是 adb 在平板电脑中被禁用。

那么有什么方法可以在不使用 adb 的情况下将 apk 文件从 PC 安装到平板电脑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:55:02.433

将 apk 复制到 sdcard 并安装到平板电脑上。（构建项目后，您的 Eclipse 项目的 bin 文件夹中提供了 apk）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:56:18.700

您可以将 apk 文件保存到设备的 SD 卡中。为此，请执行以下操作。在ddms中，选择sdcard。单击“将文件推送到设备”，然后在您的 PC 中提供 apk 文件路径。现在您的 apk 在您的 SD 卡中。从那里你可以安装。

# c++ - __cyg_profile_func_enter 和 g++ 2.95.4

> ID：12528223
> 
> 赞同：1
> 
> 时间：2012-09-21T09:52:55.050
> 
> 标签：c++, c, linux, gcc, profiler

我想使用 gcc 选项 -finstrument-functions 获取程序的函数调用堆栈。

典型代码

```
void __cyg_profile_func_enter (void *, void *) __attribute__((no_instrument_function));
void __cyg_profile_func_exit (void *, void *) __attribute__((no_instrument_function));
int depth = -1;

void __cyg_profile_func_enter (void *func,  void *caller)
{    }

void __cyg_profile_func_exit (void *func, void *caller)
{    }

int main()
{
printf("Hello world");
return 0
} 
```

用 gcc -finstrument-functions test.c 编译它

运行./a.out，一切正常。

但是当我使用 g++ 时，我得到了对 __cyg_profile_func_enter 函数的未定义引用。我读到它的发生是因为 _cyg 函数是 C 代码的一部分，如果我想在 C++ 中使用它们，我应该使用 extern "C"，所以有最终代码。

```
extern "C"{
void __cyg_profile_func_enter (void *, void *) __attribute__((no_instrument_function));
void __cyg_profile_func_exit (void *, void *) __attribute__((no_instrument_function));
int depth = -1;

void __cyg_profile_func_enter (void *func,  void *caller)
{    }

void __cyg_profile_func_exit (void *func, void *caller)
{    }
}
int main()
{
printf("Hello world");
return 0
} 
```

它使用 g++ -finstrument-functions test.c 编译，然后尝试执行它但得到 Core dumped 错误消息。我用 gdb 跟踪转储，__cyg_profile_func_enter() 中存在分段错误。

GCC 版本是 2.95.4。我还在 4.4.3 上对其进行了测试，一切正常。那么使用 2.95.4 gcc 是否可以解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T10:57:38.183

gcc 2.95.4 已经超过十年了。我已经设法挖出一个......并编译你的东西。它显然无法识别`__attribute__((no_instrument_function))`，因为生成的汇编代码有：

```
__cyg_profile_func_enter:
.LFB1:
        pushl %ebp
.LCFI0:
        movl %esp,%ebp
.LCFI1:
        subl $8,%esp
.LCFI2:
        movl 4(%ebp),%eax
        addl $-8,%esp
        pushl %eax
        pushl $__cyg_profile_func_enter
.LCFI3:
        call __cyg_profile_func_enter
        movl 4(%ebp),%eax
        addl $16,%esp
        addl $-8,%esp
        pushl %eax
        pushl $__cyg_profile_func_enter
        call __cyg_profile_func_exit
        movl %ebp,%esp
        popl %ebp
        ret
```

所以它递归地调用自己，当然以堆栈溢出结束。

如果你真的需要两个 gcc 2.95.x（面对天堂，翻白眼，脸上畏缩，“为什么哦为什么？？？”）*然后* `-finstrument-functions`你必须让它们“真正`extern`” - 即把它们放在一个单独的源文件中您在*没有*选项的情况下编译它，然后在稍后链接它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T15:33:21.310

即使使用 gcc 4.4.3，no_instrument_functions 也不能在所有情况下正常工作。如果一个函数是内联的，那么即使它设置了 no_instrument_functions 属性，也会将检测调用添加到它。甚至 -finstrument-functions-exclude-file-list 也不起作用。

让它可靠工作的唯一方法是将跟踪代码放入另一个文件并在没有 -finstrument-functions 的情况下编译该文件。

# batch-file - 如何创建批处理文件以创建网页的快捷方式

> ID：12528224
> 
> 赞同：4
> 
> 时间：2012-09-21T09:52:55.430
> 
> 标签：batch-file, desktop-shortcut

我想创建一个批处理文件，它在桌面或开始菜单中创建一个快捷方式。

该快捷方式需要打开一个网页，该网页是本地 Windows 服务器 IP 地址（如“http:\192.168 **..*** :81\”）。

我还想为快捷方式提供自定义图像图标。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-07-08T23:39:24.270

我知道这是一个旧线程，但它是第一个在 Google 中弹出的 StackOverFlow 页面，所以我想我会做出回复。

以下是我用来管理 URL 快捷方式的批处理脚本：（请注意，此脚本假定图标也存在 - MyIconName.ico - 在与此脚本相同的目录中。如果图标不可用或不需要，只需省略相关行）

另请注意，任何尾随空格都会影响变量的值...

```
@echo off 
@echo. 
@echo.
@echo.

::Set the application-specific string vars 
SET AppDescription=MyAppName
SET IconName=MyIconName.ico
SET Shortcut_Name=MyShortcutName.url
SET URL_PATH=http://www.Google.com

::Set the common string vars 
SET WORKING_PATH=%~dp0
SET ICONDEST=c:\ProgramData\%AppDescription%
SET LinkPath=%userprofile%\Desktop\%Shortcut_Name%

@echo. Copy Icon 
IF EXIST "%ICONDEST%" (GOTO _CopyIcon) 
mkdir "%ICONDEST%"
:_CopyIcon 
copy "%WORKING_PATH%%IconName%" "%ICONDEST%"

echo. 
echo. Create desktop shortcut... 
echo [InternetShortcut] > "%LinkPath%"
echo URL=%URL_PATH% >> "%LinkPath%"
echo IDList= >> "%LinkPath%"
echo IconFile=%ICONDEST%\%IconName% >> "%LinkPath%"
echo IconIndex=0 >> "%LinkPath%"
echo HotKey=0 >> "%LinkPath%"
echo. 
echo. 
echo. 
echo. 
echo.You should now have a shortcut to %AppDescription% on your desktop... 
echo. 
echo. 
pause 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T19:55:06.437

如果不是自定义图像图标要求，我建议使用以下方法在桌面上创建一个批处理文件，如下所示：

```
echo start http://192.168.1.1:81 > "%userprofile%\desktop\Launch website.cmd" 
```

自然地，用适当的地址替换地址。这不会创建快捷方式（实际上是创建文件），也不会为您提供自定义图标，但这是完成您似乎正在寻找的功能的简单方法。

您的描述没有提供有关您要解决的问题的足够信息，但如果它真的只是您所说的，您也可以手动创建一次快捷方式，然后使用批处理文件复制该快捷方式到任何你想要的地方。

如果我们在这里错过了船，请在您的问题中添加更多详细信息...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-16T08:32:12.323

如果您使用 Mozilla Firefox

> 开始 /MIN /d"C:\Program Files\Mozilla Firefox" firefox.exe [http://www.yourlink.com](http://www.yourlink.com)

如果您使用谷歌浏览器

> 开始 /MIN /d"C:\Program Files\Google Chrome" chrome.exe [http://www.yourlink.com](http://www.yourlink.com)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T10:29:32.507

仅使用批处理文件/Windows shell 命令是无法做到的。有两种选择：

1.  [使用此处](https://superuser.com/questions/392061/how-to-make-a-shortcut-from-cmd)描述的 VBScript
2.  使用第三方工具

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T15:35:16.627

我还没有测试过，但是下面的链接似乎有一个批处理脚本，是的批处理，它创建了快捷方式！

[http://www.robvanderwoude.com/amb_shortcuts.php](http://www.robvanderwoude.com/amb_shortcuts.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-13T11:25:52.937

假设你想为[www.google.com](http://www.google.com)添加一个快捷方式， 你可以试试这个

```
echo [InternetShortcut] >"%userprofile%\desktop\google.url"
echo URL=http://www.google.com/ >>"%userprofile%\desktop\google.url"
echo IconFile=e:\icons\google.ico  >>"%userprofile%\desktop\google.url"
echo IconIndex=0 >>"%userprofile%\desktop\google.url" 
```

# c++ - 如何在 Windows 8 中获取活动窗口的标题颜色

> ID：12528228
> 
> 赞同：3
> 
> 时间：2012-09-21T09:53:18.610
> 
> 标签：c++, windows, delphi, winapi, visual-c++

如何在 Windows 8 中获取活动窗口的标题颜色？

我试图打电话`GetSysColor(COLOR_ACTIVECAPTION)`，但它返回不同的颜色。这很奇怪，因为在 Windows 7 中它可以正常工作。有没有其他方法可以获取活动窗口的标题颜色或任务栏的颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:31:07.547

```
DWORD WINAPI GetSysColor(
 _In_  int nIndex
 ); 
```

对于`GetSysColor()`函数，如果`nIndex`参数超出范围，则返回值为零。因为零也是一个有效的 RGB 值，所以不能`GetSysColor()`用来确定当前平台是否支持系统颜色。相反，请使用该函数，如果不支持该颜色，该`GetSysColorBrush()`函数将返回。`NULL`

[单击以查看语法和用法。](http://msdn.microsoft.com/en-us/library/windows/desktop/dd144927%28v=vs.85%29.aspx)

另一种选择是使用`DwmGetColorizationColor()`可以检索用于`Desktop Window Manager (DWM)`玻璃成分的当前颜色的功能。该值基于当前的配色方案，可由用户修改。`WM_DWMCOLORIZATIONCOLORCHANGED`应用程序可以通过处理通知来监听颜色变化。

```
HRESULT WINAPI DwmGetColorizationColor(
  _Out_  DWORD *pcrColorization,
  _Out_  BOOL *pfOpaqueBlend
); 
```

# c - 如何在 C 中实现 Z 系数？

> ID：12528234
> 
> 赞同：0
> 
> 时间：2012-09-21T09:53:43.230
> 
> 标签：c, matlab, filter, signal-processing

我在 MatLAB 中获得了一些 Z 系数。现在我需要在 C 中实现过滤器。我该怎么做？Z域中的系数：

数量 = [0.2557 -0.5115 -0.2557 1.0230 -0.2557 -0.5115 0.2557]；

den = [1.0000 -4.0196 6.1894 -4.4532 1.4208 -0.1418 0.0044]；

任何帮助表示赞赏。

（我尝试使用谷歌搜索，但没有找到任何清晰易懂的内容。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:29:53.357

我猜主要问题是从 Z 域转换为时间。

Y(z) = H(z)*X(z)

H(z) = B(z)/A(z) = Y(z)/X(z)

B(z)*X(z) = A(z)*Y(z)

然后从[文档](http://www.mathworks.com/help/signal/ref/butter.html)中：

B(z) = b(1)*z^-n + ... + b(n+1) A(z) = z^-n + ... + a(n+1)

转换为时域：

b(1)*x(t) + b(2)*x(t-1) + ... + b(n+1)*x(tn) = a(1)y(t) + ... + a(n+1)*y(tn)

然后'求解' y(t)，假设 a(1) 为 1：

y(t) = b(1)*x(t) + b(2)*x(t-1) + ... + b(n+1)*x(tn) - a(2)*y( t-1) ... - a(n+1)*y(tn)

其中 n = 7。因此，假设您必须在其中存储输入 x 和过滤器输出 y 的最后 6 个值的数组：

```
/* Warning Warning Warning: 
   This has not been tested,
   for illustration purposes only */
double filter_data(double x)
{
  static double x_prev[6] = {0};
  static double y_prev[6] = {0};
  /* x is newest input value */
  double y;  /* output to be calculated */
  int ii;

  /* let's just keep it really simple for now, you can get more sophisticated later */
  y = 0.2557*x[0] + -0.5115*x_prev[0] + -0.2557*x_prev[1] + 1.0230*x_prev[2] + 
      -0.2557*x_prev[3] + -0.5115*x_prev[4] + 0.2557*x_prev[5] - -4.0196*y_prev[0] - 
      6.1894*y_prev[1] - -4.4532*y_prev[2] - 1.4208*y_prev[3] - -0.1418*y_prev[4] - 
      0.0044*y_prev[5];

  /* really really wasteful, but simple shift of previous values */
  for(ii=5;ii>0;ii--)
  {
    y_prev[ii] = y_prev[ii-1]
    x_prev[ii] = x_prev[ii-1]
  }
  y_prev[0] = y;
  x_prev[0] = x;
  return y;
} 
```

这不是很好，但我认为这应该让你继续前进。如果有不清楚的地方请告诉我！

# image - 关于图片下载功能

> ID：12528235
> 
> 赞同：0
> 
> 时间：2012-09-21T09:53:44.413
> 
> 标签：image

谁能帮我解决有关图像下载功能的问题？情况是这样的：实际上我想从一个生成一些字符串 url 作为图像的站点下载甘特图图像！甚至不是[http://www.example.com/img/image.png](http://www.example.com/img/image.png)而是类似[http://www.example.com/img/index.php?=task&d=&Work=0](http://www.example.com/img/index.php?=task&d=&Work=0) ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:56:13.360

不管您使用什么语言或环境，只需使用带有所有 GET 变量的完整 URL 即可为您提供图像。没关系。

从您下面的评论来看，您的代码无法正常工作，因为您使用的是 PHP 的`htmlspecialchars`函数。Htmlspecialchars 会将您无法在 HTML 输出中表示的符号转换为仅通过将它们添加到 html 文档的源（例如`&`和）的标识符`<`，`>`让浏览器知道要呈现哪种字符。

例如，与号 ( `&`) 可以由`&amp;`HtmlSpecialChars 函数为您呈现。

当您的后端代码输出用户不可见的部分 html 源代码时，例如本例中的图像源代码，您不想使用该函数。它将通过将`&`url 中的所有实例替换为使 URL 无效`&amp;`

只需这样做：

```
<?php print($url); ?> 
```

# asp.net-mvc-3 - 配置错误：System.Web.Helpers

> ID：12528238
> 
> 赞同：12
> 
> 时间：2012-09-21T09:54:04.477
> 
> 标签：asp.net-mvc-3, .net-4.0, web-config, iis-6

我将站点部署到服务器，但出现此错误。为什么我会得到这个？

```
Configuration Error 
Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

Parser Error Message: Could not load file or assembly 'System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.

Source Error: 

Line 16:       <assemblies>
Line 17:         <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
Line 18:         <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
Line 19:         <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
Line 20:         <add assembly="System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />

Source File: C:\<path>\web.config Line: 18 

Assembly Load Trace: The following information can be helpful to determine why the assembly 'System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' could not be loaded.

WRN: Assembly binding logging is turned OFF.
To enable assembly bind failure logging, set the registry value [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1.
Note: There is some performance penalty associated with assembly bind failure logging.
To turn this feature off, remove the registry value [HKLM\Software\Microsoft\Fusion!EnableLog]. 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-21T09:55:43.357

看起来您部署应用程序的服务器没有安装 ASP.NET MVC 3。如果您不想在服务器上安装 ASP.NET MVC 3，您也可以[bin 部署](http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx)您的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-20T23:12:15.723

我遇到了同样的问题，我从 Microsoft 站点安装了 ASP.NET MVC 3 Tools Update，它解决了这个问题。

还要在安装之前检查 C:\Program Files (x86)\Microsoft ASP.NET 是否存在。就我而言，这个文件夹丢失并且安装后我有这个文件夹并且程序集已注册。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-08T06:28:57.433

根据[Phil Haack 的 bin deploy post](https://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx/)中的评论，Visual Studio 的最新版本在项目上没有右键单击`Add Deployable Dependencies`选项，因此您可以这样做：

> 使用包管理器控制台并运行以下命令：
> 
> `Install-Package Microsoft.AspNet.Mvc -Version 3.0.20105.1`
> 
> 这应该以使其可部署的方式引用所有程序集。

然后我得到了这个错误：

> 无法加载文件或程序集“NuGet.Core，Version=1.0.11220.104，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。

我通过删除文件摆脱了它：`bin\System.Web.WebPages.Administration.dll`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-03T12:23:24.673

我有以下情况。一台装有 Visual Studio 2015 的全新笔记本电脑，用于处理较旧的 MVC3 项目。Visual Studio 2015 及更高版本显然不再安装 MVC 3。因此，在下载 AspNetMVC3ToolsUpdateSetup.exe 并安装后，找到正确的引用（来自 GAC）。并且构建完成没有错误，除了这个安装不需要额外的步骤。

# perl - Perl 5 的最佳 IDE

> ID：12528241
> 
> 赞同：31
> 
> 时间：2012-09-21T09:54:20.047
> 
> 标签：perl

我在 Bash shell 脚本方面有很好的经验，现在正在转向 Perl。

*   Perl 5 最好的 IDE 是什么？

*   Perl 6 会杀死 Perl 5 吗？或者 Perl 5 会一直存在吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-21T10:23:25.173

当然，“最好”是一个品味问题。与其说“最好”，不如说“如果我还没有对编辑器有强烈的偏好，我应该为 Perl 使用什么编辑器？” 我做了一个简短的任务来为我的学生回答这个问题。

我现在推荐的是[Atom](https://atom.io/)。它是免费的、开源的、可在大多数平台上使用、维护良好、文档齐全、易于使用，并且拥有丰富的插件生态系统。它几乎适用于任何语言，因此您不会陷入特定语言的 IDE 中。而且它足够强大而不会臃肿。

我还建议您[学习`vi`](https://www.tutorialspoint.com/unix/unix-vi-editor.htm). 这是任何 Unix 机器上可用的编辑器，当您不可避免地发现自己需要在 Unix 机器上编辑文件时，您将需要使用它。它非常强大，但也非常令人费解。

Atom 已经使这个答案的其余部分过时了。

* * *

~~[Padre](http://padre.perlide.org/)是一个专用于 Perl 的 IDE，但是它已经多年没有发布了。~~

[Emacs](http://www.gnu.org/software/emacs/)（及其所有变体）和[vim](http://www.vim.org/)（及其所有变体）仍然非常出色、功能强大，但对于不习惯它们的人来说却是莫名其妙。`vim`尽管如此，当您不可避免地发现自己需要在 Unix 机器上编辑文件时，您至少应该了解一些基础知识。

对于 Mac，有[TextMate](http://macromates.com/)、[Aquamacs](http://aquamacs.org/)（像 OS X 应用程序一样具有预期的 OS X 热键和菜单的 emacs）和[TextWrangler](http://www.barebones.com/products/TextWrangler/)。

在 Windows [Notepad++](http://notepad-plus-plus.org/)上，[Sublime Text](http://www.sublimetext.com/)和[E Text Editor](https://github.com/etexteditor/e)（不再维护）是不错的选择。

~~至于 Perl 6，Perl 5 和 Perl 6 是不同的语言，有自己的生命和开发周期。任何一方都不会杀死另一方。~~

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-21T09:57:24.557

对于您的第一个问题，最适合您的问题就是最适合您的问题。我意识到这*不是*一个答案，但对于功能比较，请参阅[此图表](http://www.perlmonks.org/?node=Perl%20Development%20Tools)。

关于你的第二个问题，我对 Perl6 的发布有多近感到困惑（例如，请参阅[此博客条目](http://www.perlfoundation.org/perl6/index.cgi?when_will_perl_6_be_released)）。我不知道我的任何客户使用 Perl6，并且鉴于此和 Perl5 的现有文档，我将接触 Perl5，而不必担心在不久的将来会被超越。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-21T09:59:40.810

您可以检查 Eclipse 的 EPIC 插件。远非拥有所有功能，但您可以非常轻松地进行一些调试和使用 Eclipse 功能。

你可以安全地使用 Perl 5。Perl 6 是一种仍在开发中的新语言，它的发布日期未知，所以你现在不应该关心它。

# vb.net - Vb.net 中的多线程和错误处理

> ID：12528242
> 
> 赞同：0
> 
> 时间：2012-09-21T09:54:25.213
> 
> 标签：vb.net

这个问题有 2 个部分。我是多线程的新手，所以我想首先检查我的逻辑是否正确，然后我想了解如何处理多线程中的错误。Q1：我有一个应用程序调用 SQL 数据库从 2 个数据表中获取信息，然后将这些信息组合在最终显示中。在没有多线程的情况下，我调用每个 SQL 选择一个接一个地填充数据集。对于多线程，我首先将更复杂的 SQL 作为单独的线程调用，然后在主线程中调用不太复杂的 SQL。我试图通过同时执行它们来减少两者的加载时间。（我意识到严格来说我应该作为后台任务来释放 UI，对我来说首先是小步骤）无论如何代码看起来有点像这样

```
 Dim ThreadLoad_Longer_Data As Thread
    ThreadLoad_Longer_Data = New Thread(AddressOf Me.Fill_LongerSQL)

        ThreadLoad_Longer_Data.IsBackground = True
        TThreadLoad_Longer_Data.Start()

   'Execute some code here for the second SQL call in main thread

   'Then stop the main prosess to wait for the finish of the of the background
        ThreadLoad_Longer_Data.join 
```

我假设 .Join 语句实际上会停止主线程并等待另一个完成？这个对吗 ？如果是这样，它把我带到了第二部分。Q2。如果第一个线程完成会发生什么？喜欢通过错误？我该如何处理这种情况？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:14:26.663

是的，调用`ThreadLoad_Longer_Data.Join`将停止调用线程（执行调用 Join 的代码的线程）的执行，直到 ThreadLoad_Longer_Data 结束其执行。

如果在 ThreadLoad_Longer_Data 内部有一个未处理的异常，则结果是线程的结束，因此调用线程的执行恢复。

```
Sub Main
    Try
        Console.WriteLine("Start of the main thread")
        Dim ThreadLoad_Longer_Data As Thread 
        ThreadLoad_Longer_Data = New Thread(AddressOf Me.Fill_LongerSQL) 
        ThreadLoad_Longer_Data.IsBackground = True 
        ThreadLoad_Longer_Data.Start() 
        ThreadLoad_Longer_Data.Join
        Console.WriteLine("End of the main thread")
    Catch x as Exception
      Console.WriteLine(x.Message)
    End Try
End Sub

Sub Fill_LongerSQL()
    Console.WriteLine("Before the exception")
    dim y as integer
    for x = 0 to 1000000000
        y = y + 1
    next
    Throw new Exception("This is an unhandled exception")
    ' this will never executed
    Console.WriteLine("After the exception")
End Sub 
```

# javascript - 客户端 oauth2 工作流程：参数与标头

> ID：12528243
> 
> 赞同：0
> 
> 时间：2012-09-21T09:54:40.783
> 
> 标签：javascript, authentication, xmlhttprequest, google-api, oauth-2.0

我只是想弄清楚这一点。

我正在使用 oauth2 再次向谷歌日历 v3 API 验证我的客户端应用程序（即浏览器应用程序）。到目前为止，我使用带有 的字符串参数`access_token`来调用端点。

切换到标头身份验证后，我注意到浏览器需要两个 xhr 请求来调用端点，其中第一个是 OPTIONS，第二个是实际的 GET 请求。**这是预期的行为，对吗？**

当然，在某些情况下，这会降低用户体验。**是否可以只有一个带有标头身份验证的 xhr (GET) 请求？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:39:15.463

否。当设置自定义标头（在本例中为身份验证标头）时，会触发预检请求。（[规格](http://www.w3.org/TR/cors/#cross-origin-request-with-preflight-0)，[Remy Sharp 的博文](http://remysharp.com/2011/04/21/getting-cors-working/)）

如果要保存额外的往返行程，请使用`access_token`参数调用端点。

如果您仍然看到`OPTION`请求，请检查您的 js lib/framework 是否设置了自定义标头。例如，jQuery 中有[一个（早已不复存在的）错误。](http://bugs.jquery.com/ticket/8423)

# c# - 将小部件（可视组件）动态添加到 WPF 应用程序

> ID：12528247
> 
> 赞同：0
> 
> 时间：2012-09-21T09:55:01.083
> 
> 标签：c#, wpf, xaml, mef

在 WPF 应用程序中动态添加小部件的最佳方法是什么。假设我定义了一个契约，供任何想要使用 MEF 将自己添加到我的应用程序的可视组件使用。现在在启动时，我的程序将加载插件并添加它在某个目录中找到的小部件，例如 (..\VisualExtensions)。我如何使用 WPF 和 XAML 来做到这一点，因为它使用声明式样式，以及如何控制组件出现的顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:45:49.873

我想你会在这里找到问题的答案：http: [//msdn.microsoft.com/en-us/library/gg406140.aspx](http://msdn.microsoft.com/en-us/library/gg406140.aspx)。乍一看可能会让人不知所措，但这是一个非常有价值的系列文章。请特别注意第 4 节，您会发现一个名为“注册和发现模块”的小节。

# android - 使用片段的问题

> ID：12528254
> 
> 赞同：0
> 
> 时间：2012-09-21T09:55:15.117
> 
> 标签：android, android-fragments, android-fragmentactivity

嗨，我有一个 xml 布局，我已将其作为片段包含在每个布局中。

这是我在 maincategories.xml 中的 xml

```
 <?xml version="1.0" encoding="utf-8"?>
       <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical">

 <LinearLayout
        android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:orientation="horizontal">
    <ImageButton
        android:id="@+id/mainbutton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/logo"
        android:src="@drawable/logo" />
        </LinearLayout>
 <View
    android:id="@+id/viewLine"
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:layout_below="@id/txtUserName"
    android:background="#cccccc" />
<ListView
    android:id="@+id/list1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="1dp"
    android:divider="#b5b5b5"
    android:dividerHeight="1dp"
    android:fastScrollEnabled="true"
    android:listSelector="@drawable/list_selector"
    android:smoothScrollbar="true" />
    <fragment 
     android:name="com.rag.xmlparsing.fragmentactivity"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
      />

 </LinearLayout> 
```

上述 xml 的 java 代码是

```
public class Listofcategories extends Activity {

            public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.maincategories);
            // some code for list activity
         } 
```

而fragmentactivity类是

```
public class fragmentactivity extends FragmentActivity {
RadioButton radioButton;
public View onCreateView(LayoutInflater inflater, ViewGroup container,
          Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.actnavbar,
            container, false);

        radioButton = (RadioButton) view.findViewById(R.id.home);
        radioButton.setOnCheckedChangeListener(btnNavBarOnCheckedChangeListener);
        radioButton = (RadioButton) view.findViewById(R.id.aboutus);
        radioButton.setOnCheckedChangeListener(btnNavBarOnCheckedChangeListener);
        radioButton = (RadioButton) view.findViewById(R.id.contactus);
        radioButton.setOnCheckedChangeListener(btnNavBarOnCheckedChangeListener);
        radioButton = (RadioButton) view.findViewById(R.id.orderhistory);
        radioButton.setOnCheckedChangeListener(btnNavBarOnCheckedChangeListener);
        return view;
}
 private CompoundButton.OnCheckedChangeListener btnNavBarOnCheckedChangeListener = new CompoundButton.OnCheckedChangeListener() {
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
           int sid=buttonView.getId();
           int hme=R.id.home;
           int abtus=R.id.aboutus;
           int cnt=R.id.contactus;
           int ordr=R.id.orderhistory;
            if (isChecked) {
                if(sid==hme)
                {
                    //some function
                                 }

                else if(sid==abtus)
                {
                    //some function
                }
                else if(sid==cnt)
                {
                              //
                }
                else if(sid==ordr)
                {

                }

            }
        }
    };

} 
```

和我的 actnavbar.xml

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="60dp"

android:background="@android:color/white"
>
  <RadioGroup
    android:id="@+id/radiogroup"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:orientation="horizontal"
     android:padding="5dp"
    android:background="#cccccc"       
    >

    <RadioButton
        android:id="@+id/home"
        style="@style/navbar_button"
        android:drawableTop="@drawable/home_icon"
        android:text="Home"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
       android:gravity="center_horizontal"

       android:textSize="12sp"
       android:textColor="#333333"
        />

    <RadioButton
        android:id="@+id/aboutus"
        style="@style/navbar_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="About us"
        android:textSize="12sp"
       android:textColor="#333333"
        android:drawableTop="@drawable/aboutus_icon"
        android:gravity="center_horizontal" />

         <RadioButton
           android:id="@+id/contactus"
        style="@style/navbar_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="12sp"
        android:text="Contact us"
       android:textColor="#333333"
        android:drawableTop="@drawable/contact_icon"
        android:gravity="center_horizontal" />

    <RadioButton
        android:id="@+id/orderhistory"
        style="@style/navbar_button"
        android:drawableTop="@drawable/order_history_icon"
        android:text="Order history"
        android:textSize="12sp"
       android:textColor="#333333"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
       android:gravity="center_horizontal"

            />

       </RadioGroup>

</RelativeLayout> 
```

如果我这样使用，我会收到以下 logcat 错误

```
 09-21 14:52:12.466: E/AndroidRuntime(336): FATAL EXCEPTION: main
  09-21 14:52:12.466: E/AndroidRuntime(336): java.lang.RuntimeException: Unable to        
 start activity    

 ComponentInfo{com.androidhive.xmlparsing/com.androidhive.xmlparsing.Listofcategories}:  android.view.InflateException: Binary XML file line #44: Error inflating class fragment
  09-21 14:52:12.466: E/AndroidRuntime(336):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
       09-21 14:52:12.466: E/AndroidRuntime(336):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
      09-21 14:52:12.466: E/AndroidRuntime(336):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
       09-21 14:52:12.466: E/AndroidRuntime(336):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
        09-21 14:52:12.466: E/AndroidRuntime(336):  at android.os.Handler.dispatchMessage(Handler.java:99)
 09-21 14:52:12.466: E/AndroidRuntime(336):     at android.os.Looper.loop(Looper.java:123)
 09-21 14:52:12.466: E/AndroidRuntime(336):     at android.app.ActivityThread.main(ActivityThread.java:3683)
 09-21 14:52:12.466: E/AndroidRuntime(336):     at java.lang.reflect.Method.invokeNative(Native Method)
 09-21 14:52:12.466: E/AndroidRuntime(336):     at java.lang.reflect.Method.invoke(Method.java:507)
   09-21 14:52:12.466: E/AndroidRuntime(336):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
 09-21 14:52:12.466: E/AndroidRuntime(336):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
 09-21 14:52:12.466: E/AndroidRuntime(336):     at dalvik.system.NativeStart.main(Native Method)
 09-21 14:52:12.466: E/AndroidRuntime(336): Caused by: android.view.InflateException: Binary XML file line #44: Error inflating class fragment
 09-21 14:52:12.466: E/AndroidRuntime(336):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
 09-21 14:52:12.466: E/AndroidRuntime(336):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
 09-21 14:52:12.466: E/AndroidRuntime(336):     at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
 09-21 14:52:12.466: E/AndroidRuntime(336):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
09-21 14:52:12.466: E/AndroidRuntime(336):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
 09-21 14:52:12.466: E/AndroidRuntime(336):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
 09-21 14:52:12.466: E/AndroidRuntime(336):     at android.app.Activity.setContentView(Activity.java:1657)
  09-21 14:52:12.466: E/AndroidRuntime(336):    at com.androidhive.xmlparsing.Listofcategories.onCreate(Listofcategories.java:97)
    09-21 14:52:12.466: E/AndroidRuntime(336):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
  09-21 14:52:12.466: E/AndroidRuntime(336):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
   09-21 14:52:12.466: E/AndroidRuntime(336):   ... 11 more
 09-21 14:52:12.466: E/AndroidRuntime(336): Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader dalvik.system.PathClassLoader[/data/app/com.androidhive.xmlparsing-1.apk]
  09-21 14:52:12.466: E/AndroidRuntime(336):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
       09-21 14:52:12.466: E/AndroidRuntime(336):   at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
       09-21 14:52:12.466: E/AndroidRuntime(336):   at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
           09-21 14:52:12.466: E/AndroidRuntime(336):   at android.view.LayoutInflater.createView(LayoutInflater.java:471)
  09-21 14:52:12.466: E/AndroidRuntime(336):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:549)
     09-21 14:52:12.466: E/AndroidRuntime(336):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
     09-21 14:52:12.466: E/AndroidRuntime(336):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
    09-21 14:52:12.466: E/AndroidRuntime(336):  ... 20 more 
```

我在哪里做错了？？？请任何建议..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:12:31.280

首先，你的类`**fragmentactivity**`是 FragmentActivity 你不能在 xml 文件中使用它。

你的代码..

```
public class fragmentactivity extends FragmentActivity 
```

查看课程代码

```
public class fragmentactivity extends Fragment 
```

只有`view class`文件可以在`xml`文件中使用

这就是你面临`java.lang.ClassNotFoundException: android.view.fragment`错误的原因

这里有很多关于片段的例子

[示例 1](http://android-developers.blogspot.in/2011/02/android-30-fragments-api.html)

[示例 2](http://developer.android.com/guide/components/fragments.html)

[也看看这个问题](https://stackoverflow.com/questions/5710573/need-a-fragments-example)

# c# - gridview.row[e.rowindex] 的 foreach 循环

> ID：12528264
> 
> 赞同：0
> 
> 时间：2012-09-21T09:55:53.307
> 
> 标签：c#, asp.net, loops, gridview

每次单击更新链接按钮时，我都会连接一个 gridSearchResults_RowUpdating 事件。我想要做的是遍历事件 rowindex 处的行，并将行单元格中的文本框值添加到字符串集合中。我在访问单元格中的文本框时遇到了麻烦。如果这没有意义，我的代码应该有助于使事情更清晰。

**HTML**

```
 <asp:TemplateField HeaderText="Title" SortExpression="Title">
                <ItemTemplate>
                    <asp:Label ID="lblTitle" runat="server" Text='<%# Eval("jobTitle") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtTitle" runat="server" Text='<%# Bind("jobTitle") %>' ReadOnly="true"
                        BorderStyle="none" BorderWidth="0px" Width="80">
                    </asp:TextBox>
                </EditItemTemplate>
            </asp:TemplateField>

            <asp:TemplateField HeaderText="First Name" SortExpression="FirstName">
                <ItemTemplate>
                    <asp:Label ID="lblFirstName" runat="server" Text='<%# Eval("FirstName") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtFirstName" runat="server" Text='<%# Bind("FirstName") %>' ReadOnly="true"
                        BorderStyle="none" BorderWidth="0px" Width="80">
                    </asp:TextBox>
                </EditItemTemplate>
            </asp:TemplateField>

            <asp:TemplateField HeaderText="Last Name" SortExpression="LastName">
                <ItemTemplate>
                    <asp:Label ID="lblLastName" runat="server" Text='<%# Eval("LastName") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtLastName" runat="server" Text='<%# Bind("LastName") %>' ReadOnly="true"
                        BorderStyle="none" BorderWidth="0px" Width="80">
                    </asp:TextBox>
                </EditItemTemplate>
            </asp:TemplateField>

             <asp:TemplateField HeaderText="Email Address" SortExpression="EmailAddress">
                <ItemTemplate>
                    <asp:Label ID="lblEmailAddress" runat="server" Text='<%# Eval("EmailAddress") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtEmailAddress" runat="server" Text='<%# Bind("EmailAddress") %>' ReadOnly="true"
                        BorderStyle="none" BorderWidth="0px" Width="80">
                    </asp:TextBox>
                </EditItemTemplate>
            </asp:TemplateField>

            <asp:TemplateField HeaderText="Telephone Number" SortExpression="TelephoneNumber">
                <ItemTemplate>
                    <asp:Label ID="lblTelephoneNumber" runat="server" Text='<%# Eval("TelephoneNumber") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtTelephoneNumber" runat="server" Text='<%# Bind("TelephoneNumber") %>' ReadOnly="true"
                        BorderStyle="none" BorderWidth="0px" Width="80">
                    </asp:TextBox>
                </EditItemTemplate>
            </asp:TemplateField>

            <asp:TemplateField HeaderText="Company" SortExpression="Company">
                <ItemTemplate>
                    <asp:Label ID="lblCompany" runat="server" Text='<%# Eval("Company") %>'></asp:Label>
                </ItemTemplate>
                <EditItemTemplate>
                    <asp:TextBox ID="txtCompany" runat="server" Text='<%# Bind("Company") %>' ReadOnly="true"
                        BorderStyle="none" BorderWidth="0px" Width="80">
                    </asp:TextBox>
                </EditItemTemplate>
            </asp:TemplateField>
            <asp:TemplateField>
                <ItemTemplate>
                    <asp:LinkButton ID="lbEditLink" runat="server" CausesValidation="False" CommandName="Edit" Text="Edit"></asp:LinkButton>
                </ItemTemplate>
                <EditItemTemplate>
                <asp:LinkButton ID="lbCancelLink" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel"></asp:LinkButton>
                <asp:LinkButton ID="lbUpdateLink" runat="server" CausesValidation="False" CommandName="Update" Text="Update"></asp:LinkButton>
                </EditItemTemplate>

            </asp:TemplateField>

        </Columns>
    </asp:GridView> 
```

**C＃**

```
protected void gridSearchResults_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
        GridViewRow row = gridSearchResults.Rows[e.RowIndex];

        foreach (gridviewrow c in gridSearchResults.Rows[e.RowIndex])
        {

        }
} 
```

那么有没有人知道循环遍历gridview行的单元格并获取gridview行单元格中的文本框值的好方法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:00:21.653

尝试这个：

```
foreach (TableCell cell in gv.Rows(e.RowIndex).Cells) 
{
    TextBox txt1 = (TextBox)cell.FindControl("txtControlName");
    // or if you don't want to hard code the control name and assuming that there is only 1 control in the cell then use this:
    TextBox txt2 = (TextBox)cell.Controls(0);
} 
```

# ios - iOS 6.0 -(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 不调用

> ID：12528265
> 
> 赞同：2
> 
> 时间：2012-09-21T09:55:54.020
> 
> 标签：ios

我在 iOS 中有一个通用项目，并且在所有方向上都可以正常工作，但在 iOS 6.0 中

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation

方法不再调用。

甚至其他方法都不起作用。

建议我一些快速的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:00:08.723

您必须覆盖`- (NSUInteger)supportedInterfaceOrientations`and `- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation`。阅读 Apple 文档，或观看 2012 WWDC 的 Sessions。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T09:13:47.867

将此方法添加到您的视图控制器：

```
- (BOOL) shouldAutorotate {
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
        return YES;
    } else {
        return NO;
    }
} 
```

这为我解决了。但是，就 iOS 6 发行说明而言，我不应该这样做：

> “为了兼容性，仍然实现 shouldAutorotateToInterfaceOrientation: 方法的视图控制器不会获得新的自动旋转行为。（换句话说，它们不会回退到使用应用程序、应用程序委托或 Info.plist 文件来确定支持的方向。 )”。

[iOS 6 发行说明](https://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)

# javascript - 我可以改进这个 jQuery 代码重复吗？

> ID：12528266
> 
> 赞同：1
> 
> 时间：2012-09-21T09:55:53.907
> 
> 标签：javascript, jquery

我想学习 jQuery 的最佳实践以及如何避免代码重复和使用优雅的代码。

我写过：

```
<script type="text/javascript">
  // Change the category name with the filter
  $(function() {

    // Featured
    $('.featured').click(function() {
      $('.categoryTitle h1').hide().html('Featured').fadeIn('slow');
    });
    // Web
    $('.web').click(function() {
      $('.categoryTitle h1').hide().html('Web').fadeIn('slow');
    });
    // Brand
    $('.brand').click(function() {
      $('.categoryTitle h1').hide().html('Brand').fadeIn('slow');
    });
    // Print
    $('.print').click(function() {
      $('.categoryTitle h1').hide().html('Print').fadeIn('slow');
    });
    // All
    $('.all').click(function() {
      $('.categoryTitle h1').hide().html('All').fadeIn('slow');
    });
  });
</script> 
```

HTML

```
<ul id="filters">
    <li><a class="featured" href="#" data-filter=".feature-this">Featured</a></li>
    <li><a class="web" href="#" data-filter=".category-web">Web</a></li>
    <li><a class="brand" href="#" data-filter=".category-brand">Brand</a></li>
    <li><a class="print" href="#" data-filter=".category-print">Print</a></li>
    <li><a class="all" href="#" data-filter="*">Show All</a></li>
</ul>

<div class="categoryTitle"> <h1>Featured</h1> </div> 
```

这是尽可能优雅，还是我想念如何停止深入 DOM？

**注意**我使用的是 Isotope，一个 jQuery 插件。

**编辑**当前没有任何答案正在更改 categoryTitle，但我确实忽略了它的默认值为 Featured。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T10:00:54.217

这应该这样做：

```
<script type="text/javascript">
$(function() {
    $('#filters').on('click', 'a', function() {
        $('.categoryTitle h1').hide().html($(this).text()).fadeIn('slow');
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:58:59.080

```
function change(id){
$('.categoryTitle h1').hide().html(id).fadeIn('slow');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T10:02:06.240

试试这个[演示](http://jsbin.com/welcome/25063/edit)

```
<script type="text/javascript">
$(function() {
    $('#filters').on('click', 'a', function() {
        $(".categoryTitle").find("h1").hide().html($(this).text()).fadeIn('slow');
    });
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T10:01:55.280

就这么简单：

```
 $('#filters a').click(function() {
        $('.categoryTitle h1').hide().html($(this).text()).fadeIn('slow');
  }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T10:03:05.093

```
$(document).ready(function(){
   $('ul#filters li a').click(function(){
           $('.categoryTitle h1').hide().html($(this).text()).fadeIn('slow')

   });
}); 
```

# c - 如果我使用这种方法弹出元素，我怎么知道堆栈是空的？

> ID：12528267
> 
> 赞同：0
> 
> 时间：2012-09-21T09:55:54.800
> 
> 标签：c, stack

我正在尝试使用单链表在 C 中实现一个堆栈，只要堆栈不为空，它就可以正常工作。一旦清空，我的 pop 方法永远不会检测到它是空的，但会给出一些随机值。有什么办法可以让我知道堆栈是空的吗？这是我正在使用的 pop 方法以及示例主程序输出。

```
int main(int argc, char const *argv[])
{
    Node* top;
    push(&top,5);
    printf("Popped Element: %d\n",pop(&top));
    printf("Popped Element: %d\n",pop(&top));

    return 0;
}

int pop(Node** top)
{
    if(*top == NULL)
    {
        printf("Error: Stack is empty!\n");
        return;
    }
    int temp = (*top)->iData;
    *top = (*top)->next;
    return temp;
} 
```

输出：

```
Popped Element: 5
Popped Element: 1707388 
```

编辑：这是推送的代码

```
void push(Node** top ,int num)
{
    Node* temp = (Node* )malloc(sizeof(Node));
    temp->iData = num;
    temp->next = *top;
    *top = temp;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:59:32.480

您`pop`的函数需要返回一个整数。所以这段代码

```
if(*top == NULL)
    {
        printf("Error: Stack is empty!\n");
        return;
    } 
```

需要修改。

要么获取`pop`一个指向将具有该值的整数的指针，`pop`如果是这种情况，该函数将返回 true - 或者有一个不应该在堆栈上的有，例如 -1。

所以请`return`阅读`return(-1);`

或者

```
int pop(Node** top, int *value)
{
    if(*top == NULL)
    {
        printf("Error: Stack is empty!\n");
        return 0;
    }
    *value = (*top)->iData;
    *top = (*top)->next;
    return 1;
} 
```

**编辑**

更改`Node *top = NULL`以下代码后`push`

```
void push(Node **top, int value)
{
    Node *newTop = malloc(sizeof(Node));
    newTop->next = *top;
    *top = newTop;
    newTop->iData = value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:00:21.503

在 Node 的 Ctor 中在 NULL 旁边初始化。如果堆栈为空，则返回一个值（例如 -1）

**编辑：**

如果你没有一个Ctor。（你使用malloc）然后你必须将栈上第一个节点的next字段初始化为NULL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:02:30.943

我认为问题来自你的节点声明，如果你声明一个 Node*，你必须在使用它之前分配它。也许可以测试一下（我在这台计算机上没有任何编译器，所以我无法自己测试）

```
 int main(int argc, char const *argv[])
{
    Node* top;
    top = malloc(sizeof(*top));
    push(&top,5);
    printf("Popped Element: %d\n",pop(&top));
    printf("Popped Element: %d\n",pop(&top));

    return 0;
}

int pop(Node** top)
{
    if(*top == NULL)
    {
        printf("Error: Stack is empty!\n");
        return;
    }
    int temp = (*top)->iData;
    *top = (*top)->next;
    return temp;
} 
```

我希望这可以解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T10:02:46.707

定义一个全局或静态变量来记住您对堆栈的使用。每次你在堆栈中压入一些东西时，用 SizeOf(...) 调整你的计数器的值，反之则为 pop。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T10:04:14.990

在创建节点时，即在 push() 中，如果 first(Head) 元素的下一个应该为 NULL。

在你的情况下，`(*top)->next`不是 NULL。

所以

```
printf("Error: Stack is empty!\n");
return; 
```

未执行。

**对于编辑：**

```
void push(Node** top ,int num)
{

    Node* temp = (Node* )malloc(sizeof(Node));

     if(*top == NULL)
     {
         temp->next = NULL;
     }
     else
     {
         temp->next = *top;
     }
    temp->iData = num;    
    *top = temp;
} 
```

**更新代码**

```
#include <stdlib.h>

typedef struct
{
int iData;
struct Node *next;
}Node;

int pop(Node** top)
{
    if(*top == NULL)
    {
        printf("Error: Stack is empty!\n");
        return 0;
    }

    Node *tmp = *top;
    int temp = tmp->iData;
    *top = tmp->next;
    free(tmp);
    return temp;
}

void push(Node** top ,int num)
{

    Node* temp = (Node* )malloc(sizeof(Node));

     if(*top == NULL)
     {
         temp->next = NULL;
     }
     else
     {
         temp->next = *top;
     }
    temp->iData = num;
    *top = temp;
}

int main(int argc, char const *argv[])
{
    Node* top;
    push(&top,5);
    printf("Popped Element: %d\n",pop(&top));
    printf("Popped Element: %d\n",pop(&top));

    return 0;
} 
```

这将打印

```
Popped Element: 5
Error: Stack is empty!
Popped Element: 0 
```

其次`Popped Element: 0`是因为调用 pop() 两次。反正 Stack Empty 被检测到。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T10:04:28.900

您可能只返回节点而不是整数，如果节点是`NULL`，则列表为空，否则您可能会获得节点数据：

```
Node *pop (Node **top)
{
    Node *ret = NULL;

    if (*top != NULL)
    {
        ret = *top;
        *top = (*top)->next;
    }

    return ret;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-21T10:10:41.190

在创建新节点并将新节点添加到列表时，在 NULL 旁边进行初始化。并使用

```
return -1; 
```

代替

```
return; 
```

编辑：

在 main 中初始化 *top =NULL

```
 int main(int argc, char const *argv[])
{
    Node* top=NULL;
    push(&top,5);
    printf("Popped Element: %d\n",pop(&top));
    printf("Popped Element: %d\n",pop(&top));

    return 0;
} 
```

# java - Java JMenu 打开。打开向上而不是向下打开

> ID：12528269
> 
> 赞同：1
> 
> 时间：2012-09-21T09:55:58.887
> 
> 标签：java, swing, jmenu, jmenuitem, jmenupopup

嗨有以下疑问：我希望我的 java JMenu 可以向上打开而不是向下打开。目前我找不到任何解决方案。我需要你的帮助。

我不想要这种常见的行为，我想要相反的...

[![JMenu 打开](../Images/cabf6957921c3c0d6aea116b4092de0c.png)](https://i.stack.imgur.com/YQWiH.png)
[（来源：[esimplesoft.es](http://www.esimplesoft.es/Tutorial/jmenu.png)）]

像那样

[![JMenu 向上打开](../Images/a2243d1ad13e6d95b51c6aa040bb82e0.png)](https://i.stack.imgur.com/csARe.png)
[（来源：[bytescout.com](http://bytescout.com/files/images/examples/watermarking/paint_in_start_menu.png)）]

# facebook - 喜欢按钮不适用于任何 Facebook 页面

> ID：12528271
> 
> 赞同：0
> 
> 时间：2012-09-21T09:56:11.183
> 
> 标签：facebook, facebook-like, facebook-page

显然，Facebook 发生了一些事情，我不能喜欢任何 Facebook 页面（例如[http://www.facebook.com/TheSimpsons](http://www.facebook.com/TheSimpsons)）。您可以在页面本身上喜欢这样的页面，但不能通过您网站上的“喜欢”按钮。即使在 facebook 文档页面 ( [http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/) ) 上，如果您输入此 url 并尝试单击生成的按钮，它也会喜欢并立即不同于它。

这种行为或解决方法是否有任何已知原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T03:51:22.370

这是 Facebook 的错误，现已关闭

# liferay - 使用 liferay 如何为不同的用户授予不同的权限作为他们的角色？

> ID：12528278
> 
> 赞同：0
> 
> 时间：2012-09-21T09:56:26.703
> 
> 标签：liferay, portlet, liferay-6

使用 liferay 如何为不同的用户授予不同的权限作为他们的角色？

我刚刚在我的电脑上安装了liferay Portal，我想要的是制作一个页面，其中有三个具有不同角色的用户。（例如，仅查看博客、仅编辑博客条目、查看、编辑博客条目..等）

创建角色和他们的权限很容易，但有些我无法按照我想要的方式进行。我只是希望具有不同权限的用户可以访问同一个页面作为他们的角色。

我曾尝试用谷歌搜索任何可以指导我但没有找到任何好的链接的教程，所以有没有任何教程可以满足我的要求，即如何在同一页面上给予不同的权限。任何人都可以为我提供用户liferay权限教程的良好参考链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:02:24.203

我想以下链接将为您完成工作！

[http://www.liferay.com/community/forums/-/message_boards/message/8131940](http://www.liferay.com/community/forums/-/message_boards/message/8131940)

# java - 如何在 Java 中识别传递值或传递引用？

> ID：12528279
> 
> 赞同：1
> 
> 时间：2012-09-21T09:56:31.290
> 
> 标签：java

请原谅初学者的问题。我在互联网上遇到了这个代码片段：

```
public class Person {

public static void main(String [] args)
{
    StringBuffer a = new StringBuffer("A");
    StringBuffer b = new StringBuffer("B");
    operate(a,b);
    System.out.println(a+","+b);
}

static void operate(StringBuffer x, StringBuffer y)
{
    y.append(x);
    y=x;

 }
} 
```

我想出运行输出应该是A，A，但是正确的输出应该是A，BA，专家可以帮我理解为什么b的值仍然是AB吗？为什么“y.append(x)”会影响b的值，而不是“y=x”？这就是我感到困惑的地方。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T09:58:22.037

简短的回答是 Java 参数是按值传递的，所以最后的赋值`operate`没有任何效果。

详细的事件顺序如下：

1.  `a`并`b`初始化为两个 StringBuffer 对象。让我们把它写成

    ```
     a -> S1{"A"}
     b -> S2("B") 
    ```

2.  调用参数的（平凡）参数表达式`operator`被评估为 S1{"A"} 和 S2{"B"}。

3.  调用开始，两个引用被分配给局部变量`x` 和`y`。所以现在的状态是：

    ```
     a -> S1{"A"}
     x -> |

     b -> S2("B")
     y -> | 
    ```

4.  该`y.append(x)`调用修改了 S2 对象：

    ```
     a -> S1{"A"}
     x -> |

     b -> S2("BA")
     y -> | 
    ```

5.  执行`y = x;`任务：

    ```
     a -> S1{"A"}
     x -> |
     y -> |

     b -> S2("BA") 
    ```

6.  该`operate`方法返回，导致`x`并`y`超出范围。

    ```
     a -> S1{"A"}
     b -> S2("BA") 
    ```

需要注意的关键是，在第 5 步中，我们没有更改 S2 对象的内容。相反，我们只是更改`y`为引用另一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:58:03.000

在该方法中，该`y=x`行仅更改局部变量`y`，不影响`b`调用者范围内的变量。

在操作方法中更改`b`变量，因为您不能在 java 中传递指向变量的指针有点困难。您可以：

*   把它返还 ：`b = operate...`
*   更改其内容（但那将是一个副本）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:00:48.473

Java 不使用**按名称**调用或**按引用调用**。

```
void replace(Anything x) {
  x = y;
} 
```

**根据定义**，什么都不做，因为`x`它是一个*新*变量，而不是调用变量的别名。对变量的任何更改`x`都仅限于方法范围。注意`x.setSomething`可能还是修改了引用的*内容。*`x`

这实际上适用于大多数编程语言。它避免了错误，并且有一些方法可以显式地达到预期的结果。

Java 总是**按值调用**。即使在使用引用时，它们在技术上也是作为值（对象引用类型）传递的。

即变量“ `Integer example;`”在技术上不是一个，但它是一个实例`Integer`的引用（可能是`null`） 。*引用*`Integer`被复制（按值调用），但当然它仍然引用同一个对象。因此，您可以修改对象，但不能更改实际引用，因为您只有它的副本。

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T10:06:51.450

让我们试运行操作方法：

1.  参考状态是 `a -> A, x -> A, b -> B, y -> B.`

2.  `append`执行 `a -> A, x -> A, b -> BA, y -> BA.`

3.  `y=x`执行 `a -> A, x -> A, b -> BA, y -> A.`

现在，打印输出应该是什么？:-)

要点是，

## Java 是按值传递

.*

# java - Cobertura 仪器可以自定义 java 注释吗？

> ID：12528283
> 
> 赞同：1
> 
> 时间：2012-09-21T09:57:00.250
> 
> 标签：java, code-coverage, cobertura

我有一个像这样的简单注释：

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
public @interface FragmentConfiguration {
    public static enum ViewMode {
        WithActionBar, WithMenuFragment, FullScreen
    };

    ViewMode viewMode() default ViewMode.WithActionBar;
} 
```

如果我运行我的 classes 文件夹，然后通过 Cobertua 1.9.4.1 它会在目标目录中创建预期的`FragmentConfiguration$ViewMode.class`，但不是预期`FragmentConfiguration.class`的，显然它们都存在于源文件夹中并且也不被排除在外。Cobertura 的输出也不会发出警告或其他任何东西，只是高兴地报告说它检测了这么多文件。

即使我将枚举移出接口定义，Cobertura 仍然不会检测文件。那么我能否以某种方式启用更详细的模式来查看 Cobertura 做什么或不做什么，或者我能做些什么来解决问题？

现在我从我的类目录中复制原始（未检测的）类文件，让我的测试仍然运行......

# java - ProgressMonitor 或 ProgressBar 用于监控多个 xml 文件上传

> ID：12528285
> 
> 赞同：0
> 
> 时间：2012-09-21T09:57:09.983
> 
> 标签：java

如果可能的话，我试图找到一种方法，在读取大量 xml 文件以制作要修改的文件电子表格时显示 progressBar 或 progressMonitor，而无需用户打开每个 xml 文件并修改可能看起来很复杂的内容用户，我已经完成并且它现在工作正常我坚持向用户显示progressBar，这与让用户等待而没有任何迹象表明正在进行中，当上传许多文件时，它需要接近十秒或更长时间。非常感谢您提供的一些亮点，在此先感谢您。

```
 public Vector<Vector<SpreadSheetCell>> returnDynamicTrees(int h,int w) 
      {
          //Display thread shows the JProgress Bar for this time consuming method  
          new Thread(new display()).start();

          long ready = System.currentTimeMillis();
          System.out.println("Taking time ?");
           Vector<Vector<SpreadSheetCell>> dynamicTrees = new Vector<Vector<SpreadSheetCell>>();

          Vector<String> columns= columnHeaders(0,validDocs.size(),rootName);

         //Data reading here. 
         //This where too much delay is happening

         //I thought of putting this for loop in a thread 
         for(int j=0;j<fileNames.length;j++)
         {               
            dynamicTrees.add(new Vector<SpreadSheetCell>());
            for(int i=0;i<columns.size();i++)
            {
                dynamicTrees.elementAt(j).add(new SpreadSheetCell(directoryPath+"/"+fileNames[j],columns.get(i),i,j,h,w));

            }  
         }

             long done= System.currentTimeMillis();
          System.out.println(set);          
         System.out.println("Execution time for ReturnDynamicTree "+(done-ready)+" ms.");
         return dynamicTrees;

      }

       //////Method for display JProgressBar
       public static void displayProgressBar()
       {
        frame.setSize(300, 100); //Window size 300x100 pixels
        pane = frame.getContentPane();//Pane is a Container
        pane.add(bar);
        bar.setBounds(20, 20, 20, 20);  //Bar is JProgressBar     
        frame.setResizable(false);
        frame.setVisible(true);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);

        new Thread(new Repaint()).start();

       }

       static class Repaint implements Runnable{
         public void run(){
            for (int i=0; i<=100; i++){ //Progressively increment variable i
               bar.setValue(i); //Set value
               bar.repaint(); //Refresh graphics

               try{Thread.sleep(10);} //Sleep 50 milliseconds

                  catch (InterruptedException err){}
               System.out.println();             
            }

         }
      }
       //Thread for running displayProgressBar in a thread to avoid more delay
      static class display implements Runnable{
          public void run(){
            displayProgressBar();
            frame.repaint();
            }
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:17:08.080

使用 javax.swing.ProgressMonitorInputStream。用 FilterInputStream 封装 JProgressBar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:05:35.557

用一个`JProgressBar`

`progressBar = new JProgressBar(0, numberOfFiles);`

`progressBar.setValue`当每个文件上传完成时做一个。

假设您正在逐一上传。

# wpf - 在 xaml 中绑定到用户控件的集合属性项

> ID：12528286
> 
> 赞同：2
> 
> 时间：2012-09-21T09:57:15.627
> 
> 标签：wpf, xaml, binding

我创建了一个具有集合属性的用户控件：

```
 public static readonly DependencyProperty
    MyListProperty = DependencyProperty.Register(
        "MyList",
        typeof(ObservableCollection<Test>),
        typeof(UserControl1),
        new FrameworkPropertyMetadata(new ObservableCollection<Test>())
        );

    public ObservableCollection<Test> MyList
    {
        get { return (ObservableCollection<Test>)base.GetValue(MyListProperty); }
        set { base.SetValue(MyListProperty, value); }
    }

    public static readonly DependencyProperty
    BProperty = DependencyProperty.Register(
        "B",
        typeof(string),
        typeof(UserControl1),
        new FrameworkPropertyMetadata(null)
    );

    public string B
    {
        get { return (string)base.GetValue(BProperty); }
        set { base.SetValue(BProperty, value); }
    } 
```

测试类是：

```
public class Test : DependencyObject
{
    public static readonly DependencyProperty
    AProperty = DependencyProperty.Register(
        "A",
        typeof(string),
        typeof(Test),
        new FrameworkPropertyMetadata(null)
    );

    public string A 
    {
        get { return (string)base.GetValue(AProperty); }
        set { base.SetValue(AProperty, value); }
    }
} 
```

然后，我尝试使用我的控件进行绑定：

```
 <TextBox x:Name="tb1" Text="def"/>
    <my:UserControl1 x:Name="uc1" B="{Binding ElementName=tb1, Path=Text}">
        <my:UserControl1.MyList>
            <my:Test A="{Binding ElementName=tb1, Path=Text}"></my:Test>
            <my:Test A="100"></my:Test>
        </my:UserControl1.MyList>
    </my:UserControl1> 
```

第一个绑定（具有用户控件的 B 属性）正常工作。问题在于第二个绑定（具有 Test 的 A 属性，即 MyList 元素）。调试时，我在 MyList 中有两个项目，但第一个的 A 属性为空。请告诉我我在这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:37:28.683

这里的问题是，绑定到 ElementName=tb1 无法解决，即使它永远不会被评估。为 WPF 应用程序的可视化或逻辑树中的 DependencyObject 解析到 ElementName 的绑定。将项目添加到您的 ObservableCollection (MyList) 仅意味着将项目添加到集合中，而不是添加到可视化树中。

**编辑**：这是评论中讨论的方法：

在您的窗口/页面中：

```
<Window.Resources>
    <!-- Declare the ViewModel as Resource -->
    <my:ViewModel x:Key="viewModel">
        <my:ViewModel.MyList>
            <my:Test A="Hello sweet" />
            <my:Test A="ViewModel" />
        </my:ViewModel.MyList>
    </my:ViewModel>
</Window.Resources>

<!-- Assign Ressource as DataContext -->
<StackPanel DataContext="{StaticResource viewModel}">

    <TextBox x:Name="tb1" Text="def"/>

    <!-- Reference your list within the ViewModel -->
    <ListBox ItemsSource="{Binding Path=MyList}">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <!-- Bind your property  -->
                <TextBlock Text="{Binding Path=A}" />
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</StackPanel> 
```

以及 ViewModel 的实现：

```
public class ViewModel
{
    public ViewModel()
    {
        this.MyList = new ObservableCollection<Test>();
    }

    public ObservableCollection<Test> MyList { get; set; }
} 
```

当然，Test 类不再需要实现 DependencyObject。简单的获取/设置属性就可以了。

# c# - 使用 EF 更新数据库中的实体而不检索现有实体

> ID：12528290
> 
> 赞同：2
> 
> 时间：2012-09-21T09:57:32.450
> 
> 标签：c#, ef-code-first, entity-framework-5

> **可能重复：**
> [如何更新记录而不在 ADO.NET 实体框架中再次选择该记录？](https://stackoverflow.com/questions/2860911/how-to-update-a-record-without-selecting-that-record-again-in-ado-net-entity-fra)

我正在开发一个 Windows 应用程序，我需要在网格中显示对象列表及其子对象。因此用户可以修改从实体框架中检索到的实体。

在更新数据库中的对象时，看起来需要从数据库中检索对象并分配新值。这可能会导致性能问题。有解决办法吗？

```
 public class Vehicle
    {
        public Vehicle()
        {
            this.Fillups = new List<FillupEntry>();
            this.Reminders = new List<Reminder>();
        }
        public int VehicleId { get; set; }
        public int UserId { get; set; }
        public string Name { get; set; }
        public string ModelName { get; set; }
        public ICollection<FillupEntry> Fillups { get; set; }
        public ICollection<Reminder> Reminders { get; set; }
    }

        public void Update(Vehicle updatedVehicle)
        {
            Vehicle vehicleToUpdate =
                this.GetDbSet<Vehicle>()
                        .Where(v => v.VehicleId == updatedVehicle.VehicleId)
                        .First();

            vehicleToUpdate.Name = updatedVehicle.Name;
            vehicleToUpdate.Year = updatedVehicle.Year;
            vehicleToUpdate.MakeName = updatedVehicle.MakeName;
            vehicleToUpdate.ModelName = updatedVehicle.ModelName;
            vehicleToUpdate.SortOrder = updatedVehicle.SortOrder;
            vehicleToUpdate.PhotoId = updatedVehicle.PhotoId;

            this.SetEntityState(vehicleToUpdate, vehicleToUpdate.VehicleId == 0
                                                     ? EntityState.Added
                                                     : EntityState.Modified);
            this.UnitOfWork.SaveChanges();
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T10:21:50.307

一个很好的方法是使用我称之为虚拟实体的东西。这是当您将一个假实体附加到图形中时，其中只有一个键。EF 只会在更新调用后更新您设置的道具。

所以在你的例子中：

```
Vehicle vehicleToUpdate = new Vehicle { VehicleId = updatedVehicle.VehicleId};
context.Vehicles.Attach(vehicleToUpdate);

vehicleToUpdate.Name = updatedVehicle.Name;
vehicleToUpdate.Year = updatedVehicle.Year;
vehicleToUpdate.MakeName = updatedVehicle.MakeName;
vehicleToUpdate.ModelName = updatedVehicle.ModelName;
vehicleToUpdate.SortOrder = updatedVehicle.SortOrder;
vehicleToUpdate.PhotoId = updatedVehicle.PhotoId;

context.SaveChanges(); 
```

您要确保在新的上下文中执行此操作，因为如果该实体已被上下文跟踪，则附加将出错。

# javascript - 过滤 ExtJs 中的组合框

> ID：12528292
> 
> 赞同：3
> 
> 时间：2012-09-21T09:57:54.303
> 
> 标签：javascript, extjs4

我有一个 ExtJs 组合框。它的商店使用 JSON 加载（使用我的商店）。我想将所有值加载到存储中，然后使用组合文本字段中输入的文本过滤它们。

我不希望我的组合每次输入内容时都重新加载它的商店。我怎样才能做到这一点？还有其他事情，然后我第一次尝试从组合框中选择元素，它从服务器重新加载数据。PS：我商店中的侦听器，用于从服务器中选择数据的第一个元素。谢谢。

这是我的商店课程：

```
Ext.define('KP.store.account.street', {
    extend: 'Ext.data.Store',
    model: 'KP.model.account.combo',
    autoLoad: true,

    proxy: {
        type: 'ajax',

        api: {

            read: '/account/combostreetdata'
        },
        reader: {
            type: 'json',
            root: 'combolist',
            successProperty: 'success',
            totalProperty: 'total'
        }
    },

    listeners: {
        'load': function (street_list) {
            var street_combo = Ext.getCmp('street');
            street_combo.select(street_list.getAt(0));
        }
    }
}); 
```

我的观点：

```
{
    id: 'street',
    xtype: 'combobox',
    width: 700,
    name: 'street',
    editable: true, 
    mode: 'local', 
    typeAhead: true, 
    emptyText: '?????',
    fieldLabel: '???',
    labelWidth: 120,
    size: 72,
    x: 20,
    y: 180,

    displayField: 'string_value',
    valueField: 'long_key',
    store: street_list
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:19:44.927

您有一个 ComboBox 配置错误。

不是`mode: 'local',`但是`queryMode: 'local',`。

我在组合中使用了这样的字段：

```
queryMode: 'local',
forceSelection: true, 
```

Typeahead 工作正常，在 typeahead 期间没有数据加载。

# php - 如何使用 JRAC 保存图像

> ID：12528294
> 
> 赞同：1
> 
> 时间：2012-09-21T09:57:53.997
> 
> 标签：php, javascript, jquery

我试过这个[https://github.com/trepmag/jrac](https://github.com/trepmag/jrac)但我不知道如何保存图像。我尝试将表格包装到其中，但发布后，什么都没有发送。任何指针？

谢谢！

# vb.net - Dispose 上带有 IPreviewHandler 和 Excel 文件的 RPC_E_SERVERFAULT

> ID：12528300
> 
> 赞同：3
> 
> 时间：2012-09-21T09:58:21.417
> 
> 标签：vb.net, pinvoke, com-interop

我使用 Brad Smith 的实现在 Winforms/VB.Net 中实现了 PreviewHandler 控件。

但是，每当我的控件释放并且最后一个预览文件是 Excel 文件时，在调用 IPreviewHandler.Unload() 时，我会收到一个带有 RPC_E_SERVERFAULT 的无法捕获的 ComException，并且我最终会得到一个空闲的 Excel32.exe 进程（最重要的是，它会挂起我的应用程序，当我尝试预览另一个 Excel 文件，直到我手动停止该过程）。

我在 Brad 的文章的评论中找到了一种解决方法，即挂钩到所有者表单的 FormClosing 事件，并从那里卸载预览处理程序。但是，在注释中，作者在包含表单的代码中挂钩到事件，而不是在控件中。

我发现挂钩到控件中的 FormClosing 事件的唯一方法是挂钩到 ParentChanged 事件，并向上导航到顶部父级，直到找到一个表单，然后从那里添加 FormClosing 处理程序。

但是，这并不适用于所有情况（例如，我的 PreviewHandler 控件嵌套在另一个在窗体之前创建的控件中）。

**那么有什么方法可以正确处理我的预览处理程序控件而不会得到那个讨厌的 COMException，或者有什么方法可以从控件中找到父窗体？**

处置代码如下：

```
Protected Overrides Sub Dispose(ByVal disposing As Boolean)
    Try
        UnloadPreviewHandler()
    Catch

    End Try

    GC.Collect()

    MyBase.Dispose(disposing)
End Sub

Private Sub UnloadPreviewHandler()
    If previewHandler IsNot Nothing Then
        Try
            ' This line throws the exception when UnloadPreviewHandler is called from Dispose method.
            previewHandler.Unload()
        Finally
            Marshal.FinalReleaseComObject(previewHandler)
            previewHandler = Nothing
        End Try
    End If

    If previewStream IsNot Nothing Then
        previewStream.Close()
        previewStream = Nothing
    End If

    If Not String.IsNullOrWhiteSpace(currentTempFile) Then
        Try
            IO.File.Delete(currentTempFile)
        Catch

        End Try
    End If
End Sub 
```

**编辑**：作为评论建议，我尝试了 C4F 实现（下载了套件并运行了 PreviewHandlerHost 示例）。这个问题也发生在他们的实施中（在预览 Excel 或 Word 文件时关闭应用程序）。

# c# - 如何将项目添加到 PagedCollectionView 中的特定索引？

> ID：12528304
> 
> 赞同：1
> 
> 时间：2012-09-21T09:58:27.950
> 
> 标签：c#, silverlight

如何将项目添加到 PagedCollectionView 中的特定索引？我们可以将任何项目添加到分页集合视图，但问题是它将它添加到最后一个..我想将它添加到任何给定的索引..！

任何人都可以帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:06:55.880

**无法在 PagedCollectionView 中的给定位置或索引处**添加项目...要在给定索引处添加项目，您需要将项目添加到基础源。检查以下示例：

```
List<String> itemList = new List<String>();

// Generate some items to add to the list.
for (int i = 1; i <= 33; i++)
{
    System.Text.StringBuilder sb = new System.Text.StringBuilder("Item ");
    sb.Append(i.ToString());
    itemList.Add(sb.ToString());
}

// Add at given index
itemList.Insert(10, "Extra item");

// Wrap the itemList in a PagedCollectionView for paging functionality
var itemListView = new PagedCollectionView(itemList); 
```

# php - 决定 ON DUPLICATE KEY UPDATE 查询？

> ID：12528311
> 
> 赞同：0
> 
> 时间：2012-09-21T09:59:06.250
> 
> 标签：php, mysql, database

看下面的代码，它确实有效。`affiliate`如果记录不存在，它会插入到表中。如果它已被插入到`affiliate`表中，那么它将在表中添加一条新记录`phone`。但是，它需要在第三次查询时更新表`phone_id`中的字段`affiliate`（新的最近记录） - 有没有办法减少这种情况？

```
$SQLInsert = "INSERT INTO affiliate (affiliate_id, affiliate_phone_id, stock) ";
$SQLInsert .= "VALUES ('1', '$affiliatePhoneID', '$stock') ";
$SQLInsert .= "ON DUPLICATE KEY UPDATE stock = '$stock'";
mysql_query($SQLInsert);
if (mysql_insert_id()) {
    $SQLInsert = "INSERT INTO phone (name) VALUE('$phoneName')";
    $q = mysql_query($SQLInsert);

    // If a record has been inserted into affiliate table and then phone table
    // then it need to update phone_id field in affiliate table. 
    $phone_id = mysql_insert_id();
    $SQLUpdate = "UPDATE affiliate set phone_id = $phone_id WHERE affiliate_id = 1 AND affiliate_phone_id = '$affiliatePhoneID'";
    mysql_query($SQLUpdate) or die(mysql_error());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:11:27.837

也许您可以更改数据库 sheme，以便电话表保存 affilaite 表的 forainkey。所以你不需要更新附属表两次。

如果这不是您想要的，您可以尝试先更新电话表，然后再更新附属表。

# android - Android 如何在不调用 onCreate 的情况下更改膨胀到 ViewPager 的布局方向？

> ID：12528313
> 
> 赞同：3
> 
> 时间：2012-09-21T09:59:13.420
> 
> 标签：android, android-layout, android-viewpager, viewpagerindicator, fragmentpageradapter

我正在使用一个viewpager，它加载一些布局并在滑动时做一些事情。我希望能够在活动更改方向时，寻呼机将布局更改为特定方向，而无需再次加载数据。这可能吗 ？？

我知道，为了避免一遍又一遍地调用 onCreate 方法，您必须在清单中指定以下行，然后使用 onConfigurationChanged：

android:configChanges="方向"

但是这样做布局不会根据方向加载正确的布局（所以如果是横向加载横向布局），而是保持加载的布局并调整其大小。

```
class ViewPagerAdapter extends PagerAdapter {

    public int getCount() {
        return 4;
    }

    public Object instantiateItem(View collection, int position) {
        LayoutInflater inflater = (LayoutInflater) collection.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        int resId = 0;
        switch (position) {
        case Constants.LAYOUT_FEEDBACK:
            resId = R.layout.activity_feedback; 
            view = inflater.inflate(resId, null);
            ((ViewPager)collection).addView(view, 0);

            btnSend = (Button)view.findViewById(R.id.btnSend);
            etFeedback = (EditText)view.findViewById(R.id.etFeedback);
            etEmail = (EditText)view.findViewById(R.id.etMail);

            sendFeedback(btnSend);

            break;
        case Constants.LAYOUT_HOME:
            resId = R.layout.activity_home;

            view = inflater.inflate(resId, null);

            ((ViewPager)collection).addView(view, 0);

            btnCamera = (ImageButton)view.findViewById(R.id.btnCamera);
            btnPoo = (ImageButton)view.findViewById(R.id.btnPoo);
            imgPopular = (Button)view.findViewById(R.id.btnPopular);
            imgRecent = (Button)view.findViewById(R.id.btnRecent);
            imgNearby = (Button)view.findViewById(R.id.btnNearby);

            btnEdit = (ImageButton)view.findViewById(R.id.btnEdit);
            btnFeedback = (ImageButton)view.findViewById(R.id.btnFeedback);

            incSearch = getLayoutInflater().inflate(R.layout.include_search, null);
            incNoInternet = view.findViewById(R.id.include_no_internet);
            incNoInternet.setVisibility(View.INVISIBLE);
            btnCancel = (Button)incSearch.findViewById(R.id.btnCancel);
            imgX = (ImageView)incSearch.findViewById(R.id.imgX);
            etKeywords = (EditText)incSearch.findViewById(R.id.etText);

            btnRetry = (Button)incNoInternet.findViewById(R.id.btnTryAgain);

            pooAdapter = new PooAdapter(poos);
            lvPoo = (ListView)view.findViewById(R.id.lvPoo);
            lvPoo.addHeaderView(incSearch);
            lvPoo.setCacheColorHint(Color.TRANSPARENT);
            lvPoo.setAdapter(pooAdapter); 
```

# html - 使用 href 属性删除下划线

> ID：12528316
> 
> 赞同：66
> 
> 时间：2012-09-21T09:59:38.467
> 
> 标签：html, href, underline

> **可能重复：**
> [如何删除锚点（链接）的下划线？](https://stackoverflow.com/questions/2041388/how-to-remove-the-underline-for-anchorslinks)

在下面的代码中，当我使用 href 属性时，链接会带有下划线。

```
<html>
<body>
<a href="xxx.html">goto this link</a>
</body>
</html> 
```

我希望链接与该标签相关联，但不带下划线。我怎样才能做到这一点？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-09-21T10:00:40.840

添加具有属性的样式`text-decoration:none;`：

有许多不同的方法可以做到这一点。

**内联样式：**

```
<a href="xxx.html" style="text-decoration:none;">goto this link</a> 
```

**内联样式表：**

```
<html>
<head>
<style type="text/css">
   a {
      text-decoration:none;
   }
</style>
</head>
<body>
<a href="xxx.html">goto this link</a>
</body>
</html> 
```

**外部样式表**：

```
<html>
<head>
<link rel="Stylesheet" href="stylesheet.css" />
</head>
<body>
<a href="xxx.html">goto this link</a>
</body>
</html> 
```

*样式表.css：*

```
a {
      text-decoration:none;
   } 
```

# jquery - Jquery - 如果 .find 什么都不返回

> ID：12528321
> 
> 赞同：7
> 
> 时间：2012-09-21T09:59:52.883
> 
> 标签：jquery, xml

例如，我有以下 XML：

```
<?xml version="1.0"?>
    <extraslist>
        <extra 
            id="0"
            enabled="1"
            quantityavailable="2"
            displayindex="1">
            <extraname>Example 1</extraname>
            <extradesc>Example 1 Description</extradesc>
        </extra>
        <extra 
            id="1"
            enabled="1"
            displayindex="2">
            <extraname>Example 2</extraname>
            <extradesc>Description 2</extradesc>
        </extra>
    </extraslist> 
```

还有一个 .find 函数，可以找到每个额外的内容并在网页上显示结果。

```
$(xmlExtras).find('extra').each(function(){

}); 
```

我将如何编写一个函数，以便如果所有 'extras' = enabled="0" 做某事......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-21T10:03:16.140

**正确阅读问题后更新**

`find`您可以使用额外的选择器检查结果的长度：

```
var $enabledExtras = $(xmlExtras).find('extra[enabled="1"]');

if ($enabledExtras.length == 0) {
    //do something
} 
```

[工作的jsFiddle](http://jsfiddle.net/stevegreatrex/mM42a/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:09:09.877

你应该试试..

```
$(xmlExtras).find('extra').each(function(i){
    if($(this).find('enabled) == 0)
    {
       do something...
    }
    else
    {

    }

}); 
```

附加信息：这种情况您应该尝试使用 JSON。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:16:22.690

嘿，我被拉出来接电话，但我在这里得到了这个例子：http: [//jsfiddle.net/H3eFM/1/](http://jsfiddle.net/H3eFM/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T10:19:04.247

我希望下面的代码可以帮助你

```
var xmlText='<?xml version="1.0"?><extraslist><extra id="0" enabled="1" quantityavailable="2" displayindex="1"><extraname>Example 1</extraname></extra></extraslist>';

xmlDoc = $.parseXML(xmlText);

$(xmlDoc).find('extra').each(function(){
//All your code goes here
}); 
```

# sql - ORA-01733 - 使用更新语句中的函数进行更新时，此处不允许使用虚拟列

> ID：12528323
> 
> 赞同：1
> 
> 时间：2012-09-21T10:00:04.740
> 
> 标签：sql, oracle

这个 sql 给出了一个错误，比如

> ORA-01733: 此处不允许使用虚拟列。

没有`GET_PROPERTY`函数，SQL 就可以工作。如何解决？

```
UPDATE (SELECT VALUE, GET_PROPERTY (ORG.ID, 'BenefOperationCode') AS OPERATION_CODE
      FROM ORGANIZATION ORG, PROPERTY P
     WHERE ORG.EXTERNALKEY = '111' AND P.ID = ORG.ID AND P.IDX = 4)
SET VALUE = 123, OPERATION_CODE = 234; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:16:38.340

Edit: Below update won't work due to ORA-01776 error (thanks Vincent). See end of post for new method.

You are trying to update a function result. This is not possible. I presume you are trying to update the underlying value that is retrieved by the function. To do this you will need to combine the function code with the join between Organization and Property.

Let's say GET_PROPERTY is:

```
CREATE OR REPLACE FUNCTION GET_PROPERTY
(
    objectID_in NUMBER,
    propertyName_in VARCHAR
)
AS
    v_returnValue VARCHAR(32);
BEGIN
    SELECT
        PropertyValue INTO v_returnValue 
    FROM
        PropertyTable
    WHERE
        ObjectID = objectID_in
    AND PropertyName = propertyName_in;

    RETURN v_returnValue;
END 
```

Your update would become:

```
--This wouldn't have worked. 
```

Edit: Best to write a procedure to do it.

```
CREATE PROCEDURE UpdateMyTwoTables
(
    orgExternalKey_in in VARCHAR,
    propertyIdx_in in NUMBER,
    propertyName_in in VARCHAR,
    newValue_in in VARCHAR,
    newPropertyValue_in in VARCHAR
)
AS
BEGIN
    UPDATE
    (SELECT
        ORG.Value
    FROM
        ORGANIZATION ORG, 
        PROPERTY P
    WHERE 
        ORG.EXTERNALKEY = orgExternalKey_in 
        AND P.ID = ORG.ID AND 
        P.IDX = propertyIdx_in)
    SET
        Value = newValue_in;

    UPDATE
    (SELECT
        PropertyValue
    FROM
        PropertyTable,
        ORGANIZATION ORG,
        PROPERTY P
    WHERE
        PropertyTable.objectID = ORG.ID
    AND ORG.ID = P.ID
    AND ORG.EXTERNALKEY = orgExternalKey_in
    AND P.Idx = propertyIdx_in
    AND PropertyTable.PropertyName = propertyName_in)
    SET
        PropertyValue = newPropertyValue_in;

END; 
```

# scala - Grizzly 2.2 添加静态资源

> ID：12528324
> 
> 赞同：2
> 
> 时间：2012-09-21T10:00:07.197
> 
> 标签：scala, web-applications, grizzly

如何将静态 html 资源添加到 Grizzly 2.2 服务器？我试过

```
val server = GrizzlyHttpServerFactory.createHttpServer(uri, new ResourceConfig())
val statichandler = new StaticHttpHandler()
statichandler.addDocRoot("/webapp")
statichandler.start
server.getServerConfiguration.addHttpHandler(statichandler)
server.start 
```

webapp 文件夹位于 maven 项目的 src/main/resource 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:49:40.530

尝试：

```
val statichandler = new StaticHttpHandler(<path>, "/webapp");
server.getServerConfiguration.addHttpHandler(statichandler); 
```

`<path>`您希望服务的资源的绝对路径在哪里。

# php - 将客户分配给多个客户组到magento

> ID：12528327
> 
> 赞同：4
> 
> 时间：2012-09-21T10:00:14.630
> 
> 标签：php, magento

您好，我想将多个组分配给特定客户，例如“Rajat the customer”属于“批发、零售商、电气”。[实际上，我在每个客户的多个客户组](https://stackoverflow.com/questions/6153011/multiple-customer-groups-per-customer-magento)上看到了相同的线程，但是是否有任何更新来使这种更改发生是没有帮助的。

我被卡住了，我该怎么办，因为没有任何具有相同功能的扩展可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T10:44:00.887

我找到了解决方案，

首先进入数据库并点击`eav_attribute`然后`group_id`在属性代码字段中搜索并编辑此记录。

现在第1步： -

`frontend_input`从变为。`select`_`multiselect`

第2步：-

`backend_type`从变为。`static`_`varchar`

虽然这不是标准方式，但它对我有用。:)

PS。我正在使用 magento 1.7.0.2 社区版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T03:16:26.900

Rajat Modi 的解决方案对我来说效果很好，谢谢，但是如果选择了多个，这样做确实会破坏客户网格上组列的显示，并且破坏了按组过滤客户的能力。

要解决此问题，请创建此文件以用作客户组的渲染器：`/app/code/local/Mage/Adminhtml/Block/Customer/Renderer/Group.php`

```
<?php
class Mage_Adminhtml_Block_Customer_Renderer_Group
extends Mage_Adminhtml_Block_Widget_Grid_Column_Renderer_Abstract {
public function render(Varien_Object $row)
{
$value = $row->getData($this->getColumn()->getIndex());
$groups = Mage::getModel('customer/group')->getCollection()
->addFieldToFilter('customer_group_id', array('in' => explode(',', $value)));
$groupNames = array();
foreach ($groups as $group)
{
$groupNames[] = $group->getCustomerGroupCode();
}
return implode(', ', $groupNames);
}
} 
```

然后覆盖/app/code/core/Mage/Adminhtml/Block/Customer/Grid.php `enter code here`（复制到`/app/code/local/Mage/Adminhtml/Block/Customer/Grid.php`）

在`_prepareColumns()`函数中，改变它（大约第 95 行）：

```
$this->addColumn('group', array(
'header'    =>  Mage::helper('customer')->__('Group'),
'width'     =>  '100',
'index'     =>  'group_id',
'type'      =>  'options',
'options'   =>  $groups,
)); 
```

对此：

```
$this->addColumn('group_id', array(
'header'    =>  Mage::helper('customer')->__('Group'),
'width'     =>  '100',
'index'     =>  'group_id',
'type'      =>  'options',
'options'   =>  $groups,
'renderer' => 'Mage_Adminhtml_Block_Customer_Renderer_Group',
'filter_condition_callback' => array($this, '_filterGroupCondition')
)); 
```

然后它将使用该类在网格上呈现组。

同样在`_prepareCollection()`函数中，在第 52 行附近找到`->addAttributeToSelect('group_id')`并添加：`->addAttributeToSelect('customer_group_id')`

每个客户拥有多个组似乎也干扰了分层定价（产品根据客户组具有不同的价格）。要在前端显示上解决这个问题......在前端计算时修复基于客户组的产品定价层：

在*/app/code/core/Mage/Catalog/Model/Product/Type/Price.php* 第 138 行附近，查找： `$customerGroup = $this->_getCustomerGroupId($product);` 添加后： `$customerGroups = explode(',',$customerGroup);`

查找： `if ($groupPrice['cust_group'] == $customerGroup && $groupPrice['website_price'] < $matchedPrice) {` 替换为： `if (in_array($groupPrice['cust_group'],$customerGroups) && $groupPrice['website_price'] < $matchedPrice) {`

如果您使用捆绑包，请在*/app/code/core/Mage/Bundle/Model/Product/Price.php*中执行相同的操作。

在从后端仪表板创建订单或重新订购时，我还没有修复显示客户组等级价格的问题——它们只显示标准产品价格。

最后，在弄清楚这一切时，我们确实遇到了一些`mgnt_catalog_product_entity_group_price`被清空的情况，但我仍然不确定它为什么会发生，所以一定要备份。对于该表，我从 SQL 备份中恢复了它，但是在进入这些内容时，通常还需要重新索引内容并可能刷新 Magento 缓存。

在您自己的脚本或模块中以编程方式按组搜索客户等操作时，您可能必须考虑到它现在是一个多选，例如通过执行以下操作：

```
$allowedGroups = array(
array(
"finset" => array(10)
),
array(
"finset" => array(42)
)
);
$collection = Mage::getModel('customer/customer')
->getCollection()
->addAttributeToSelect('*')
->addFieldToFilter('group_id', $allowedGroups); 
```

Although I'm not sure that that piece of code will work right until all the customers have rows in the `mgnt_customer_entity_varchar`table which is where the new value for a customer's groups is stored when there are more than one group selected. `mgnt_customer_entity`由于该字段不是 varchar，因此只保留了一个组 ID 。

**出于这个原因，请注意，是的，它可能会影响扩展或使用客户组功能的模块。**

# java - 当只有 https URL 时，获取证书并将其添加到 Java 信任库？

> ID：12528328
> 
> 赞同：8
> 
> 时间：2012-09-21T10:00:20.147
> 
> 标签：java, certificate, google-cloud-messaging, truststore

我正在尝试通过 Google Cloud Message 服务器向 Android 设备发送推送通知。

我们用来执行此操作的 URL 是：

```
https://android.googleapis.com/gcm/send 
```

在我们的企业应用程序中，我们不使用默认的 CA 权限，并且出于安全原因，我们在 SSLContext 属性加载的信任库文件中手动添加我们信任的每个实体。我想将 GCM 证书添加到我们的信任库。

我不知道如何从该 URL 获取证书。由于页面重定向到另一个非 SSL 页面，因此 Chrome/Firefox 导出方式似乎不起作用。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-21T10:48:45.013

我已经能够通过以下 Java 代码保存证书：

```
public void testConnectionTo(String aURL) throws Exception {
        URL destinationURL = new URL(aURL);
        HttpsURLConnection conn = (HttpsURLConnection) destinationURL.openConnection();
        conn.connect();
        Certificate[] certs = conn.getServerCertificates();
        System.out.println("nb = " + certs.length);
        int i = 1;
        for (Certificate cert : certs) {
            System.out.println("");
            System.out.println("");
            System.out.println("");
            System.out.println("################################################################");
            System.out.println("");
            System.out.println("");
            System.out.println("");
            System.out.println("Certificate is: " + cert);
            if(cert instanceof X509Certificate) {
                try {
                    ( (X509Certificate) cert).checkValidity();
                    System.out.println("Certificate is active for current date");
                    FileOutputStream os = new FileOutputStream("/home/sebastien/Bureau/myCert"+i);
                    i++;
                    os.write(cert.getEncoded());
                } catch(CertificateExpiredException cee) {
                    System.out.println("Certificate is expired");
                }
            } else {
                System.err.println("Unknown certificate type: " + cert);
            }
        }
    } 
```

并将它们导入到信任库：

```
keytool -import -alias GoogleInternetAuthority -file myCert1 -keystore truststore 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-21T10:12:02.150

如果你有 openssl 你可以使用

```
openssl s_client -connect android.googleapis.com:443 
```

`s_client`是“使用 SSL/TLS 连接到远程主机的通用 SSL/TLS 客户端”，除其他外，它打印出从远程服务器接收到的服务器证书。它不是 HTTP 客户端，因此它不知道遵循 301 重定向，它只会为您提供您连接的初始服务器的证书。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T10:42:52.133

使用[Portecle](http://portecle.sourceforge.net/)。您可以打开目标密钥库，然后使用`Examine`> `Examine SSL/TLS Connection`，输入`android.googleapis.com`，`443`然后您就完成了！

# python - 一个 wsgi 应用会吃掉所有的 apache 客户端

> ID：12528330
> 
> 赞同：1
> 
> 时间：2012-09-21T10:00:25.510
> 
> 标签：python, apache, mod-wsgi

我们有一个 SOAP mod_wsgi (apache) 应用程序，有时负载很重。相同的 Apache 服务于一些其他 wsgi-apps。不幸的是，您只能在服务器级别设置 MaxClients，而不是每个 wsgi-app。

我们得到：

```
server reached MaxClients setting, consider raising the MaxClients setting 
```

有没有办法阻止这个 wsgi 应用程序吃掉所有的 apache 工作人员？

我只想将 503“服务不可用”返回给连接到 SOAP wsgi 应用程序的 SOAP 客户端。

Apache 配置片段：

```
 WSGIDaemonProcess soap_app threads=1 processes=3
   WSGIScriptAlias /soap_app /home/soap_app/django_wsgi.py
   <Location "/soap_app/">
       WSGIProcessGroup soap_app
       WSGIApplicationGroup %{GLOBAL}
   </Location> 
```

肥皂应用程序只有 3 个 wsgi 守护进程。但它占用了更多的 apache 工人。

**更新：** 我们使用 apache prefork mpm。有 N 个 apache 工作者。对于 mod_wsgi，我们也使用 prefork。有 M 个 mod_wsgi 工作进程。apache 工作人员计数可以由 MaxClients 控制。mod_wsgi 工作人员计数由上述配置控制。

我认为您无法在 python wsgi 应用程序（django）中处理此问题。我想它需要通过 mod_wsgi 或 apache 配置来完成。

这是 mod_status 的第一行：

```
 Server Version: Apache/2.2.17 (Linux/SUSE) mod_ssl/2.2.17 OpenSSL/1.0.0c
  mod_wsgi/3.3 Python/2.7
  Server Built: 2011-07-26 13:43:36.000000000 +0000
===============================================================================
  Current Time: Thursday, 20-Sep-2012 13:15:11 CEST
  Restart Time: Thursday, 06-Sep-2012 16:30:45 CEST
  Parent Server Generation: 0
  Server uptime: 13 days 20 hours 44 minutes 25 seconds
  Total accesses: 307471 - Total Traffic: 7.7 GB
  CPU Usage: u11.85 s1.56 cu0 cs0 - .00112% CPU load
  .257 requests/sec - 6.8 kB/second - 26.4 kB/request
  127 requests currently being processed, 13 idle workers
WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW
WWWWWWWWWWWWWWWWWWWWKWWWWW_WWWWWKWWWWWWWWW_WWWWWW_WW_WWWWWWK._WW
W__WW__._W_W__........
Scoreboard Key:
"_" Waiting for Connection, "S" Starting up, "R" Reading Request,
"W" Sending Reply, "K" Keepalive (read), "D" DNS Lookup,
"C" Closing connection, "L" Logging, "G" Gracefully finishing,
"I" Idle cleanup of worker, "." Open slot with no current process
Srv  PID   Acc   M CPU  SS   Req  Conn  Child Slot   Client         VHost     Request
0-0  15135 0/27/ W 0.04 8417 0    0.0   0.37  290.12 10.1.1.1       foohost   POST /soap_app/foo HTTP/1.1
           11553
           0/
1-0  15142 125/  W 0.18 7354 0    0.0   2.48  324.82 10.1.1.1       foohost   POST /soap_app/foo HTTP/1.1
           12475
           0/
2-0  18350 157/  W 0.27 4780 0    0.0   4.84  300.09 10.1.1.1       foohost   POST /soap_app/foo HTTP/1.1
           11249
3-0  20112 0/10/ W 0.02 7106 0    0.0   0.29  315.77 10.1.1.1       foohost   POST /soap_app/foo HTTP/1.1
           12714
4-0  16562 0/35/ W 0.07 7853 0    0.0   0.96  328.98 10.1.1.1       foohost   POST /soap_app/foo HTTP/1.1
           12098
5-0  20152 0/25/ W 0.06 6732 0    0.0   0.71  288.17 10.1.1.1       foohost   POST /soap_app/foo HTTP/1.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:19:19.407

所有请求都由 Apache 子进程（由 MaxClients 控制）提供服务，但每次请求命中`soap_app`url 时，Apache 子进程都会等待 3 个 WSGIDaemonProcess 之一。如果您收到的请求`soap_app`比您使用 3 个进程为它们提供服务的速度更快，您最终将用完 Apache 子进程。

我看到控制专用于soap_app 的Apache 子节点数量的唯一方法是使用mod_proxy 并将`soap_app`请求代理到另一个“服务”。[代理传递指令](http://httpd.apache.org/docs/current/mod/mod_proxy.html#proxypass)允许您定义要服务的并发请求的数量，这将等于您要用于的 Apache 子节点的数量`soap_app`。

为请求提供服务的“服务”`soap_app`可以是同一个 Apache 的另一个 VirtualHost（从未测试过）或带有[soap_app](http://gunicorn.org/)应用程序的 gunicorn 实例

# android - 如何在android中向用户电子邮件帐户发送电子邮件

> ID：12528331
> 
> 赞同：1
> 
> 时间：2012-09-21T10:00:25.027
> 
> 标签：android

我的应用程序屏幕中有 4 个文本视图和一个按钮。我如何将文本视图中存在的数据作为电子邮件发送给用户帐户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:02:15.887

```
 Intent email = new Intent(Intent.ACTION_SEND);
    email.putExtra(Intent.EXTRA_EMAIL, new String[]{"myemail@xyz.com"});          
    email.putExtra(Intent.EXTRA_SUBJECT, "subject");
    email.putExtra(Intent.EXTRA_TEXT, "message");
    email.setType("message/rfc822");

try {
    startActivity(Intent.createChooser(email, "Choose an Email client :"));
    } 
catch (android.content.ActivityNotFoundException ex) {
    Toast.makeText(MyActivity.this, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
} 
```

有关详细说明，请查看[本教程](http://www.mkyong.com/android/how-to-send-email-in-android/)。

# java - Jaxb REST JSON 知道哪个参数是空的，哪个参数没有发送

> ID：12528333
> 
> 赞同：0
> 
> 时间：2012-09-21T10:00:32.093
> 
> 标签：java, json, rest, jaxb

我有一个带有 REST 服务的网络应用程序。我有一个带有 JAXB 注释的 bean 类：

```
@XmlRootElement(name = "foo")
class Foo {
    @XmlElement
    private String bar1;

    @XmlElement
    private Double bar2;

    @XmlElement
    private Double bar3;
} 
```

然后，我使用 JSON 发送请求：

```
{
    "foo" : {
        "bar1" : "1",            
        "bar3" : ""
    }
} 
```

在我想要的请求中：更新值**bar1**，并将 null 设置为值**bar3**

**但是**，在服务器上，我的 class' 字段都带有**null**，我的意思是，**bar2**是 null，因为我没有发送它，而**bar3**也是 null，因为我发送它是空的。问题是：我如何才能在服务器上了解发送了哪些参数以在其中设置 null，哪些参数没有发送，我应该忽略它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:02:13.377

使用属性访问字段。
**例子**

```
public class Foo
{
   private Double bar;  

   public Double getBar()
   {
      return bar;
   }

   public void setBar(Double bar)
   {
      System.out.println("I am in setter! " + bar); 
      this.bar = bar;
   }
} 
```

现在，如果您尝试反序列化

```
{
   "bar" : ""
} 
```

输出到控制台是

```
I am in setter! null 
```

如果您尝试反序列化

```
{
} 
```

然后没有输出到控制台 - 没有访问设置器。
所以你可以在setter中检查值

```
 @XmlElement
   private Double bar3;  

   public void setBar3(Double bar3)
   {
      if (bar3 == null)
      {
         this.bar3 = new Double(-1);   
      }
      this.bar3 = bar3;
   } 
```

# visual-studio-2012 - Visual Studio 2012 显示测试项目的错误图标

> ID：12528335
> 
> 赞同：26
> 
> 时间：2012-09-21T10:00:35.907
> 
> 标签：visual-studio-2012

我有一个示例解决方案，在其中一个测试项目上具有不同的“测试”图标，但在其他两个上没有。

![测试图标](../Images/b5d211e27201646e2f105391735baf14.png)

我认为这个项目的项目类型 guid 可能不同，但在解决方案文件中它们都具有相同的项目类型（C#）

```
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "DomainModel.Tests", "DomainModel.Tests\DomainModel.Tests.csproj", "{61A4733D-4C5B-4705-98CB-8048751BBEFA}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "Extensions.Tests", "Extensions.Tests\Extensions.Tests.csproj", "{1D6AA1C5-1FEC-44E4-9258-ACF84A20353C}"
EndProject
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "Repository.Tests", "Repository.Tests\Repository.Tests.csproj", "{248434B7-3690-4705-85F0-66B765AEB431}"
EndProject 
```

在每个项目文件中，它们都有相同的项目类型（测试和 C#）

```
<ProjectTypeGuids>{3AC096D0-A1C2-E12C-1390-A8335801FDAB};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids> 
```

为什么 DomainModel.Tests 有正确的测试图标，而 Extensions.Tests 和 Repository.Tests 有一个普通的 C# 库图标？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-08-20T21:56:20.600

这也可能发生在 VS2013 中，从类库项目开始，然后从那里添加测试类。

将以下子节点添加到项目文件中的主 PropertyGroup 节点可修复这种情况下的图标：

```
<ProjectTypeGuids>{3AC096D0-A1C2-E12C-1390-A8335801FDAB};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-27T10:50:09.197

这已在 Visual Studio 2013 预览版中修复。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-30T04:02:16.663

这个问题在 VS2012 Update 2 (VS2012.2) 中没有解决。

如果在此之前的季度更新中没有修复它，我希望它会在下一版本的 Visual Studio 中修复。随着所有微软都转向更短的发布周期（大约每月 12 个月），我们不应该有那么长的等待时间；至少与过去我们必须等待的时间相比没有！:-)

# android - [android]gridview 动态添加图像和文本

> ID：12528337
> 
> 赞同：-1
> 
> 时间：2012-09-21T10:00:36.510
> 
> 标签：android

我想制作一个没有任何 XML 文件的应用程序。网格视图的图像和文本是动态添加的，我希望它看起来像文本在图像上方。我想要它。你可以说它看起来像在图像上方有图像名称的画廊。

所以请帮帮我..

提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:03:08.843

不知道为什么需要这个，即使没有（单个 xml 文件）main.xml。以下是您需要遵循的步骤。

1.  通过 LayoutParams 动态创建布局，如下所示。

    公共类 MainActivity 扩展 Activity {

    ```
     public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            LayoutParams params=new GridView.LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT);
            GridView layout=new GridView(this);
            layout.setNumColumns(9);
            layout.setAdapter(new CustomAdapter(this));

        } 
    ```

2.  现在根据您的要求定义 CustomAdapter 类。正如您所说，您需要图像上方的文本，因此您的每个网格项目现在应该包含一个带有图像的文本视图。这个网格项可以通过**setOrientation(LinearLayout.VERTICAL)**的线性布局来实现 ，并将所有此类类型的项添加到您的网格视图中。

此[链接](http://www.mkyong.com/android/android-gridview-example/)可以让您基本了解如何创建自定义适配器类。但是在您的情况下，您过于动态地定义网格项而不是在 xml 中。我只是给了你实现你的要求的建议，因为其他人很难完整地编写你需要的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:56:18.583

```
Finally I made it on my own. And sharing to all if some one want to use it.

package com.example.customlayout;

import java.util.ArrayList;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.content.SharedPreferences;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.view.WindowManager;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.ScrollView;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity  {

    int i,j;
    int counter=0;
    boolean flag=false;
    int tid=55523,cid=25;
    int imid=55423,l_id=0;
    SharedPreferences settings;
    String [] values= new String[]{"Sample1","Sample2","Sample3","Sample4","Sample5","Sample6","Sample7","Sample8","Sample9","Sample10","Sample11","Sample12","Sample13","Sample14","Sample15","Sample16","Sample17","Sample18","Sample19","Sample20"};
    private Integer[] mThumbIds = {
            R.drawable.sample_1, R.drawable.sample_2,
            R.drawable.sample_3, R.drawable.sample_4,
            R.drawable.sample_5, R.drawable.sample_1,
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_1, R.drawable.sample_2,
            R.drawable.sample_3, R.drawable.sample_4,
            R.drawable.sample_5, R.drawable.sample_1,
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,

    };
    int pos=0;
    public static ArrayList<Integer> check = new ArrayList<Integer>(); 
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ScrollView sc = new ScrollView(getApplicationContext());
        sc.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        LinearLayout ll = new LinearLayout(getApplicationContext());
        ll.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        ll.setOrientation(LinearLayout.VERTICAL);

        for( i = 0;i<10;i++)
        {
            final LinearLayout ll1 = new LinearLayout(getApplicationContext());
            ll1.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            ll1.setOrientation(LinearLayout.HORIZONTAL);
            for(j = 0;j<2;j++)
            {

                ll1.addView(rowView(getApplicationContext()));
            }
            ll.addView(ll1);
        }
        sc.addView(ll);
        this.setContentView(sc);
    }

    private View rowView(Context context) {
        // TODO Auto-generated method stub

        WindowManager mWinMgr = (WindowManager)context.getSystemService(Context.WINDOW_SERVICE);
        int displayWidth = mWinMgr.getDefaultDisplay().getWidth();

        final LinearLayout ll1 = new LinearLayout(getApplicationContext());
        ll1.setLayoutParams(new LayoutParams((displayWidth/2), LayoutParams.WRAP_CONTENT));
        ll1.setOrientation(LinearLayout.VERTICAL);
        ll1.setId(l_id);

        final LinearLayout ll2 = new LinearLayout(getApplicationContext());
        ll2.setLayoutParams(new LayoutParams((displayWidth/2), LayoutParams.WRAP_CONTENT));
        ll2.setOrientation(LinearLayout.HORIZONTAL);
        ll2.setId(l_id);

        final TextView tv = new TextView(context);
        tv.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        tv.setId(tid--);
        tv.setPadding(20, 0, 0, 0);
        tv.setText(values[pos]);

        final CheckBox cb = new CheckBox(getApplicationContext());

        cb.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        cb.setId(cid--);
        cb.setTag(counter);

        for(int x = 0 ; x < check.size(); x++)
        {

            if(check.contains(counter))
            {
                cb.setChecked(true);
            }
        }
        counter++;

        cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                // TODO Auto-generated method stub
                if(isChecked){
                    Integer pos1= (Integer) buttonView.getTag();
                    check.add(pos1);
                    Log.i("TAG_3", ""+pos1);

                }else{
                    Integer pos2= (Integer) buttonView.getTag();
                    if(check.contains(pos2))
                    {
                    check.remove(pos2);
                    Log.i("TAG", ""+pos2+"removed");
                    }

                }
            }
        });

        final ImageView img = new ImageView(context);
        img.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        img.setId(imid--);
        img.setScaleType(ImageView.ScaleType.CENTER_CROP);
        img.setPadding(8, 8, 8, 8);

        img.setImageResource(mThumbIds[pos]);

        pos++;
        /*Log.i("Demo", ""+pos);
        Log.i("TAG", ""+i);
        Log.i("TAG1", ""+j);
        Log.i("TAG2", ""+tid);
        Log.i("TAG3", ""+imid);*/

        ll2.addView(cb);
        ll2.addView(tv);
        ll1.addView(ll2);
        ll1.addView(img);
        ll1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                Toast.makeText(getApplicationContext(), "ID of TextView is:"+ String.valueOf(tv.getId())+" \t ID of Imageview is:"+ String.valueOf(img.getId()), Toast.LENGTH_SHORT).show();    
            }

        });
        l_id++; 

        return ll1;
    }

} 
```

# php - Linkedin 如何获取连接的电子邮件地址

> ID：12528342
> 
> 赞同：5
> 
> 时间：2012-09-21T10:00:53.263
> 
> 标签：php, linkedin, invite

我在我的网站上添加了“邀请朋友”，因为我计划包含电子邮件抓取器。我试过[http://openinviter.com/demo/](http://openinviter.com/demo/)但你可以看到它不适用于 Linkedin，它也在那个演示页面上提到。

如何获取 LinkedIn Connections 的电子邮件地址？最好在 PHP 中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T15:48:55.187

对于连接，您只能获取[最基本的个人资料字段](https://developer.linkedin.com/documents/profile-fields#profile)，其中不包括电子邮件地址：

> 对于 1 级和 2 级连接，您只能检索具有 r_basicprofile 成员权限的配置文件字段

[https://developer.linkedin.com/documents/connections-api](https://developer.linkedin.com/documents/connections-api)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T16:22:08.923

目前，连接没有任何变化。只有基本配置文件字段可用于连接。我认为如果当前成员必须**单独**确认访问他的电子邮件和他的个人资料字段是合乎逻辑的 - 他的联系人的电子邮件没有得到这些成员的确认，因此无法查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:02:50.543

LInkedin 不提供电子邮件地址

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T02:06:40.607

LinkedIn 已启动新应用的电子邮件地址，但仍无法将其用于您现有的 LinkedIn 应用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-28T19:54:31.847

看起来应用程序现在可以访问电子邮件字段，如下所述：

[https://developer.linkedin.com/documents/profile-fields#email](https://developer.linkedin.com/documents/profile-fields#email)

请注意，我自己没有使用过这个。我只是在调查它，因为我被我的一个联系人使用的应用程序发送了垃圾邮件。如果您想禁用此“功能”，只需单击隐私设置的“组、公司和应用程序”部分中的“打开/关闭与 3rd 方应用程序的数据共享”，然后取消选中该框。

# asp.net-mvc - 带有 MVC 的 nopcommerce 2.65 的 jquery 滑块

> ID：12528345
> 
> 赞同：0
> 
> 时间：2012-09-21T10:00:59.413
> 
> 标签：asp.net-mvc, asp.net-mvc-3, nopcommerce

我正在开发最新的 nopCommerce V 2.65。我想提供一个 jquery 滑块，它可以在箭头键上移动，也可以在鼠标单击侧箭头时移动。

请向我提供任何链接或演示代码。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T18:46:20.920

与这些人核实：[http](http://www.nop-templates.com/p/4/nop-anywhere-sliders) ://www.nop-templates.com/p/4/nop-anywhere-sliders - 我认为该功能存在，但如果没有，请将其作为功能请求发布在他们的板上，然后他们'如果它是一个受欢迎的请求，通常会在短时间内添加它。

# jquery - jsp没有找到BlockUI的jquery库

> ID：12528348
> 
> 赞同：0
> 
> 时间：2012-09-21T10:01:10.853
> 
> 标签：jquery, jsp, struts2

嗨，我正在按照本教程[http://www.malsup.com/jquery/block/](http://www.malsup.com/jquery/block/) 将 jquery 嵌入（Struts2）代码中，但它没有找到库，但是我已将它放在 WebContent/Lib 文件夹中。如果您有任何示例代码，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:59:33.050

假设您有这样的项目结构：

```
-src  
|  
-webapp  
|  
    -WEB-INF  
    |  
    -pages  
    |  
    -css
    |    
    -js
    |    
        -blockUI.js
    | 
    ... 
```

你可以这样做：

```
<html>
    <head>
        <script src="${pageContext.request.contextPath}/js/blockUI.js"/>
    </head>
    <body></body>
</html> 
```

`${pageContext.request.contextPath}`表示内容路径。

# ios - iOS SSL 用户证书相互认证

> ID：12528351
> 
> 赞同：2
> 
> 时间：2012-09-21T10:01:26.330
> 
> 标签：ios, authentication, ssl, certificate

我需要在 iOS 应用程序中执行基于证书的 SSL Mutual auth。我遇到的问题是，当我得到一个包含带有私钥的证书时，`didReceiveAuthenticationChallenge`我不得不这样做。`useCredential``NSURLCredential`

在我的场景中，我无法发送私钥，因为它存储在外部安全令牌中。我可以发送证书，但不能发送私钥。因此，我需要在安全令牌中执行加密操作，但我无法弄清楚这些操作是在哪里执行的，以及我需要重写哪些类来实现它。

`NSURLCredential`因此，当无法使用私钥创建时，我需要在哪里以及做什么才能执行基于客户端证书的 SSL Mutual Auth ？

# asp.net-mvc - 重载控制器内部的动作：asp.net MVC 3

> ID：12528354
> 
> 赞同：0
> 
> 时间：2012-09-21T10:01:55.197
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

> Html.BeginForm("LogOn", "Home", FormMethod.Post)
> 
> 登录 - 操作。
> 
> 主页 - 控制器。

所以它会创建像 = Home/LogOn 这样的 Url。

但是如果我有动作`LogOn(String s )` ，`LogOn(int i)`在控制器内部`Home`并且两者都是`HttpPost`，那么那时会引发哪一个动作。意味着现在它正在给出例外：

> “之间的暧昧
> 
> 以下行动方法"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:06:09.177

在同一个控制器中不能有 2 个同名的动作。这样做的唯一方法是使两个操作之一只能通过以下方式访问`[HttpPost]`：

```
public ActionResult LogOn(int i)
{
    ...
}

[HttpPost]
public ActionResult LogOn(string s)
{
    ...
} 
```

现在，当您提交表单时，它将调用第二个操作。当您`/home/logon`在浏览器地址栏中键入（使用 GET 动词）时，它将执行第一个操作以可能呈现 LogOn 表单。

# java - 如何将新应用程序与旧的现有应用程序集成

> ID：12528363
> 
> 赞同：0
> 
> 时间：2012-09-21T10:02:23.453
> 
> 标签：java, web-applications, struts2

我在 NetBeans 中创建了一个应用程序。我认为该应用程序就足够了（包含基本功能）。现在我想创建另一个应用程序，它是问答论坛，并希望将这些论坛与我的旧应用程序集成。那么我的旧应用程序会话值将如何在我的新应用程序中访问。以及如何访问我的旧应用程序其他参数（如登录、对象等）将从我的新应用程序访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:06:48.303

您可以尝试构建旧应用程序的 jar（假设它是独立的 java 应用程序）文件，并将其包含在新应用程序的构建路径中。您将能够访问旧应用程序中存在的类

# ios - 为什么在 iOS 6.0 中的这段代码中 glReadPixels() 会失败？

> ID：12528365
> 
> 赞同：18
> 
> 时间：2012-09-21T10:02:33.510
> 
> 标签：ios, opengl-es, ios6

以下是我用于从 OpenGL ES 场景中读取图像的代码：

```
-(UIImage *)getImage{

    GLint width;

    GLint height;

    glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_WIDTH, &width);

    glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_HEIGHT, &height);

    NSLog(@"%d %d",width,height);

    NSInteger myDataLength = width * height * 4;

    // allocate array and read pixels into it.
    GLubyte *buffer = (GLubyte *) malloc(myDataLength);
    glReadPixels(0, 0, width, height, GL_RGBA, GL_UNSIGNED_BYTE, buffer);

    // gl renders "upside down" so swap top to bottom into new array.
    // there's gotta be a better way, but this works.
    GLubyte *buffer2 = (GLubyte *) malloc(myDataLength);
    for(int y = 0; y < height; y++)
        {
        for(int x = 0; x < width * 4; x++)
            {
            buffer2[((height - 1) - y) * width * 4 + x] = buffer[y * 4 * width + x];
            }
        }

    // make data provider with data.
    CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, buffer2, myDataLength, NULL);

    // prep the ingredients
    int bitsPerComponent = 8;
    int bitsPerPixel = 32;
    int bytesPerRow = 4 * width;
    CGColorSpaceRef colorSpaceRef = CGColorSpaceCreateDeviceRGB();
    CGBitmapInfo bitmapInfo = kCGBitmapByteOrderDefault;
    CGColorRenderingIntent renderingIntent = kCGRenderingIntentDefault;

    // make the cgimage
    CGImageRef imageRef = CGImageCreate(width, height, bitsPerComponent, bitsPerPixel, bytesPerRow, colorSpaceRef, bitmapInfo, provider, NULL, NO, renderingIntent);

    // then make the uiimage from that
    UIImage *myImage = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);
    CGDataProviderRelease(provider);
    CGColorSpaceRelease(colorSpaceRef);
    free(buffer);
    free(buffer2);
    return myImage;

} 
```

这在 iOS 5.x 和更低版本中有效，但在 iOS 6.0 上现在返回黑色图像。为什么`glReadPixels()`在 iOS 6.0 上失败？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-24T17:29:18.013

```
CAEAGLLayer *eaglLayer = (CAEAGLLayer *) self.layer;
eaglLayer.drawableProperties = @{
    kEAGLDrawablePropertyRetainedBacking: [NSNumber numberWithBool:YES],
    kEAGLDrawablePropertyColorFormat: kEAGLColorFormatRGBA8
}; 
```

放

```
kEAGLDrawablePropertyRetainedBacking = YES 
```

（我不知道为什么这个提示进展顺利..///）

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-09-21T11:54:38.147

兄弟试试这个方法来获取你的截图图像。输出图像是**`MailImage`**

```
- (UIImage*)screenshot
{
    // Create a graphics context with the target size
    // On iOS 4 and later, use UIGraphicsBeginImageContextWithOptions to take the scale into consideration
    // On iOS prior to 4, fall back to use UIGraphicsBeginImageContext
    CGSize imageSize = [[UIScreen mainScreen] bounds].size;
    if (NULL != UIGraphicsBeginImageContextWithOptions)
        UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0);
    else
        UIGraphicsBeginImageContext(imageSize);

    CGContextRef context = UIGraphicsGetCurrentContext();

    // Iterate over every window from back to front
    for (UIWindow *window in [[UIApplication sharedApplication] windows])
    {
        if (![window respondsToSelector:@selector(screen)] || [window screen] == [UIScreen mainScreen])
        {
            // -renderInContext: renders in the coordinate space of the layer,
            // so we must first apply the layer's geometry to the graphics context
            CGContextSaveGState(context);
            // Center the context around the window's anchor point
            CGContextTranslateCTM(context, [window center].x, [window center].y);
            // Apply the window's transform about the anchor point
            CGContextConcatCTM(context, [window transform]);
            // Offset by the portion of the bounds left of and above the anchor point
            CGContextTranslateCTM(context,
                                  -[window bounds].size.width * [[window layer] anchorPoint].x,
                                  -[window bounds].size.height * [[window layer] anchorPoint].y);

            // Render the layer hierarchy to the current context
            [[window layer] renderInContext:context];

            // Restore the context
            CGContextRestoreGState(context);
        }
    }

    // Retrieve the screenshot image
    Mailimage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return Mailimage;

} 
```

# android - 如何将 KSOAP2 与 Google API 一起使用？

> ID：12528367
> 
> 赞同：0
> 
> 时间：2012-09-21T10:02:38.180
> 
> 标签：android, google-api, android-ksoap2

我想**使用 KSOAP2 解析 Google Places API**。是否可以在**Google API**即 Google Places API中使用**KSOAP2 ？**如果是，请发布一些示例。如果不是，那么是否有任何其他 KSOAP2 替代品用于.**`Google APIs`**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:31:10.360

Google Places API 的推荐格式是 JSON。**顺便说一句， KSOAP2**不是一个好的库。
要解析 json，您可以使用 Android 中包含的 json.org 库或更复杂的东西，例如 Jackson。

有一个很长的教程如何使用 Places 以及使用哪个库：
[http ://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/](http://www.androidhive.info/2012/08/android-working-with-google-places-and-maps-tutorial/)**

# javascript - node.js 返回客户端等待事件

> ID：12528369
> 
> 赞同：1
> 
> 时间：2012-09-21T10:02:45.127
> 
> 标签：javascript, node.js, comet, event-driven-design

我在 node.js 上玩了一下 Comet 的概念，但我仍然有点困惑，我想知道这里是否有人能指出我正确的方向。

考虑一个游戏应用程序，其中客户端代码应该要求轮到它采取行动（例如在国际象棋应用程序上）。我在这里的想法是使用这样的东西：

当比赛开始时，节点服务器上的一个方法被调用以在 match 数组上创建一个元素，其中包含比赛的 id 和初始玩家。

当玩家移动时，会调用一个方法来更新引用此匹配的数组元素上的当前玩家。此方法应在更改发生时触发事件。

在能够进行任何移动之前，客户端代码应该调用服务器上的一个方法来检查是否轮到用户，如果不是轮到则等待更改的玩家事件。

我不确定这是否是事件循环中的一个好方法，如果是，我不知道如何使该方法等到事件返回。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:37:00.260

Node.js 和[Socket.io](http://socket.io)是您所需要的！我写了几个和你描述类似的游戏。一个实时示例：[example](http://buildnewgames.com/real-time-multiplayer/) 另一个线程：[Tutorial on Socket.io](https://stackoverflow.com/questions/4094350/good-beginners-tutorial-to-socket-io)

# android - 如何在 android 应用程序中包含用于 android 自定义构建的外部 jar

> ID：12528376
> 
> 赞同：2
> 
> 时间：2012-09-21T10:03:03.593
> 
> 标签：android, build, jar, external, rom

我正在尝试使用 android 自定义构建项目构建自定义 rom。我想向其中添加一个 android 应用程序，其中有一个外部 jar。但是，每当我在 /package/apps/myApp 中运行“mm”（即 make）时，它都会给出错误 41，在该错误中它无法识别来自该外部 jar 的类和函数。尽管 eclipse 认识到 jar 和 app 在 eclipse 中运行完美，但“mm”无法编译它。我应该怎么办？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T10:38:08.533

**请参阅计算器**应用程序中的 Android.mk 文件。它使用外部罐子。我还粘贴了一个用于我自己的应用程序的示例 mk 文件。你可以使用它：

LOCAL_PATH := $(调用我的目录)

包括 $(CLEAR_VARS)

LOCAL_MODULE_TAGS := 可选

LOCAL_MODULE_TAGS := 测试

LOCAL_STATIC_JAVA_LIBRARIES := libguava libgcm android-support-v4

LOCAL_SRC_FILES := $(调用 all-java-files-under, src)

LOCAL_SDK_VERSION := 当前

LOCAL_PACKAGE_NAME := SampleApp

包括 $(BUILD_PACKAGE)

包括 $(CLEAR_VARS)

LOCAL_PREBUILT_STATIC_JAVA_LIBRARIES := libguava:guava-11.0.jar libgcm:gcm.jar

包括 $(BUILD_MULTI_PREBUILT)

包括 $(call all-makefiles-under,$(LOCAL_PATH)

libguava 和 libgcm 只是两个 jar 的两个命名空间（您可以使用自己的名称）：guava-11.0.jar 和 gcm.jar（我在我的项目中使用过这些 jar）。我将罐子保存在项目文件夹中。如果您将 jar 保存在 libs 文件夹中，请使用 libguava:libs/guava-11.0.jar。另外，不要使用*mm*。使用*make*，但不要在它之前执行*make clean*，否则它将删除整个构建目录并从头开始（需要很多时间）如果可行，请接受作为解决方案....谢谢

# installshield - 运行卸载程序并等待直到终止

> ID：12528378
> 
> 赞同：0
> 
> 时间：2012-09-21T10:03:10.197
> 
> 标签：installshield

all/ 有应用程序，应用程序的安装程序由 InstallShield 创建（*不是*msi 项目）我需要卸载应用程序并等待卸载程序终止。

我阅读了注册表项 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall{MyAppGuid}, UninstallString 并尝试启动卸载程序

在我的情况下 UninstallString = "C:\Program Files\InstallShield 安装信息{9F2A3D76-7785-492F-89E5-3F0FE2D205DC}\setup.exe" -runfromtemp -l0x0419 -removeonly

但在 cmd.exe "start /wait {UninstallerString}" 中不要等到卸载程序终止。我认为卸载程序运行相同的临时 exe 并立即终止。但是我该如何解决任何问题呢？任何想法？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-27T20:30:36.160

Installshield`/clone_wait`在某些时候添加了一个开关来解决您的问题，如下[所示](http://helpnet.installshield.com/installshield18helplib/IHelpSetup_EXECmdLine.htm#wp1039966)：

`This parameter indicates that the original setup should wait for the cloned setup process to complete before exiting.`

您的卸载字符串将如下所示：

```
UninstallString = "C:\Program Files\...\setup.exe" -runfromtemp -l0x0419 -removeonly /clone_wait 
```

`-clone_wait`可能也可以，但我已经测试并使用了`/clone_wait`.

# html - 提取所有html图像标签，Rails

> ID：12528382
> 
> 赞同：2
> 
> 时间：2012-09-21T10:03:16.537
> 
> 标签：html, ruby-on-rails, ruby, regex, image

整个下午，

我正在尝试编写一个脚本，该脚本将通过其`<img src=""/>`标签从文章中提取第一张图片。所以如果一篇文章有​​：

```
<p>Lorem ipsum dolor sit amet, labore et dolore magna aliqua.<img src="example.jpg"/> Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p> 
```

我想提取整个图像标签，`<img src="example.jpg"/>.`

我发现这个正则表达式只提取图像的位置：

```
content_to_extract_from[/img.*?src="(.*?)"/i,1] 
```

产生，“example.jpg”。

有谁知道也可以捕获标签的正则表达式？

在此先感谢，安迪

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T10:18:30.680

使用正则表达式解析标记是自找麻烦。您可能可以编写一些最有效但在您没有预见到的情况下中断的东西。例如，您可以用单引号而不是双引号括起属性，您的正则表达式不会处理

更可靠的是使用真正的解析器，例如 nokogiri

```
html = Nokogiri::HTML.fragment('<p>Lorem ipsum dolor sit amet, labore et dolore magna aliqua.<img src="example.jpg"/> Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>')
html.css('img').collect(&:to_s) #=> ["<img src=\"example.jpg\">"] 
```

# javascript - ExtJS：为动态内容添加一个按钮奇怪的行为

> ID：12528384
> 
> 赞同：0
> 
> 时间：2012-09-21T10:03:22.203
> 
> 标签：javascript, extjs, openlayers

我同时使用 OpenLayers 和 ExtJS。在地图中，我会在您与地图交互时出现弹出窗口。这些弹出窗口的 HTML 包含一个容器，我用它来创建一个带有菜单的 extjs 按钮。

当您关闭弹出窗口或单击菜单/按钮时，菜单不会消失。单击按钮以显示菜单后，它仍然可见！为了解决这个问题，我可以编写一些代码来手动销毁它 - 但我只是在弹出窗口关闭时触发此代码。有谁知道为什么带有菜单的按钮会这样？

在地图上创建弹出窗口时，我初始化按钮和菜单：

```
Map.popupMenu = new Ext.menu.Menu({
    id: "ChangesGridContextMenu",
    items: [{ .... }]
});

Map.popupButton = new Ext.Button({
    id: "popupActions",
    text: "Actions..",
    menu: Map.popupMenu
}); 
```

当弹出窗口关闭时，我会销毁 extjs 组件：

```
if (Map.popupMenu !== null) {
    Map.popupMenu.destroy();
    Map.popupMenu = null;
}
if (Map.popupButton !== null) {
    Map.popupButton.destroy();
    Map.popupButton = null;
} 
```

# javascript - 奇怪的视图属性导致主干

> ID：12528385
> 
> 赞同：3
> 
> 时间：2012-09-21T10:03:23.320
> 
> 标签：javascript, backbone.js

我有一个主干视图，我想创建一些属性。

我这样做了：

```
var ProgrammeDetailsView = Backbone.View.extend({

    $infoResult: $('#info-result'),
    $castingResult: $('#casting-result'),
    $broadcastResult: $('#broadcast-result'),
    $testResult: $('#test'),

[...] 
```

我惊讶地得到了这个结果：

```
 console.log(this.$infoResult); -> Array { selector="#test", forEach=forEach(), reduce=reduce(), more...} 
```

如您所见，我使用了“this.$infoResult”，它应该返回一个 id 为“#info-result”的对象，但它实际上是返回的最新变量。

如果我这样做：

```
var ProgrammeDetailsView = Backbone.View.extend({

    $infoResult: '#info-result',
    $castingResult: '#casting-result',
    $broadcastResult: '#broadcast-result',
    $testResult: '#test', 
```

我没有问题，cf：

```
console.log(this.$infoResult); -> "#info-result" 
```

你知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:11:19.373

您确定在初始化对象时您所指的元素可用吗？很多时候，可能正在创建此对象的视图或包含它的 HTML 可能尚未修改 DOM，因此您不会获得对它的引用。

# java - 64 位编译器中的 JNI 未解析的外部符号 __imp_JNI_CreateJavaVM

> ID：12528387
> 
> 赞同：4
> 
> 时间：2012-09-21T10:03:28.887
> 
> 标签：java, visual-c++, java-native-interface

我正在尝试使用 JNI 创建 JVM。我正在使用 win 7 64 位操作系统。在线 JNI_CreateJavaVM 我的程序崩溃了。我决定使用 64 位编译器编译我的程序并得到以下错误：

`Error 1 error LNK2001: unresolved external symbol __imp_JNI_CreateJavaVM`

我应该从哪里开始寻找链接问题以及为什么我的程序在 32 位模式下崩溃？

```
void createJVM()
{

JavaVMInitArgs vm_args; 
JavaVMOption options[4]; 

int n = 0;     
char * str;
str= new char[1000];
sprintf(str, "-Djava.class.path=%S\\tst.jar", myPath);
options[n++].optionString = str; 

str= new char[1000];
sprintf(str, "-Djava.library.path=%S\\lib;%S", myPath, myPath);
options[n++].optionString = str;

str= new char[1000];
sprintf(str, "-Duser.dir=%S", myPath);
options[n++].optionString = str;

vm_args.version = JNI_VERSION_1_4;
vm_args.nOptions = n;     
vm_args.options = options;     
vm_args.ignoreUnrecognized = false;

JNI_CreateJavaVM(&jvm, (void**)&env, &vm_args); 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T04:10:09.230

您是否在项目中添加了“jvm.lib”作为附加依赖项？此外，您需要在附加库目录中指定 jvm.lib 的位置...

另请注意，对于 64 位应用程序，您需要指向 64 位库，否则链接器将无法链接

您可以在配置属性->链接器区域中找到这些设置。

希望这些信息对您有所帮助。

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T11:11:42.640

由于我无法写出（仍低于 15 名声望），我只想确认 Naytzyrhc 解决方案对我有用。

只是为了更清楚一点，在**Visual Studio Express 2013 (v12)**中，您应该转到：

```
Project -> [YourProjectName] Properties... -> Linker -> General -> Additional Library Directories 
```

用于将 lib 文件夹添加到其他库目录，以及：

```
Project -> [YourProjectName] Properties... -> Linker -> Input -> Additional Dependencies 
```

用于将 jvm.lib 添加到其他依赖项。

# java - 创建一个拦截soap数据的axis2模块

> ID：12528389
> 
> 赞同：1
> 
> 时间：2012-09-21T10:03:42.750
> 
> 标签：java, axis2

我已经创建了一个作为axis2扩展的模块，我希望这个模块做一个简单的操作，比如加法。我该怎么做才能拦截Web服务的处理（获取ws数据）并在处理程序内部进行加法操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T04:48:06.853

请阅读以下文章，该文章提供了创建axis2 模块以拦截SOAP 数据的分步指南。 [http://www.packtpub.com/article/apache-axis2-web-services-writing-module](http://www.packtpub.com/article/apache-axis2-web-services-writing-module)

您需要编写扩展 AbstractHandler 并实现 Handler 的类。那么您需要覆盖您可以获取 SOAP 上下文的调用方法。您可以使用此 SOAP 上下文做任何您想做的事情。

哦，你还必须在 module.xml 配置中定义你的模块。

# java - 保护jar中的内部类变量

> ID：12528390
> 
> 赞同：0
> 
> 时间：2012-09-21T10:03:48.760
> 
> 标签：java, jar, namespaces

我们在一个类中有一个 getter 方法。在同一个 JAR 中，我们希望变量可以从同一个包和子包中以无标识符访问级别访问。

以下访问级别来自：[http ://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

我们的问题是，我们如何阻止某人获取已编译的 .JAR、创建具有相同包命名空间定义的类以及能够通过 getter 访问我们的变量？

我们考虑过去掉特定变量的所有 getter，并在其他类通过 setter 和构造函数时将变量值传递给它们自己。显然，它们将是最后的课程。这样，所有需要变量值的对象都有自己的私有副本。

我想知道是否有更好的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T10:07:53.070

访问控制修饰符 ( `public`, `private`, `protected`) 并不是一种安全工具，而是一种 OO 设计工具。它们用于实现 OO 模式，如封装、继承。

即使没有任何 getter 和私有变量，任何 Java 开发人员都可以使用反射来访问该变量。

如果你想保密，永远不要把它放在任何人执行的程序的变量中。将其保存在您自己的机器上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:24:29.747

**-** `Reflection`似乎是`evil`这里，使用它可以访问任何`variable`带有`private`访问修饰符的内容。

**-like** `Four access controls` , `private`, `default`, `protected`and`public`在 Java 中被引入更多是作为支持`Core Object Oriented Concept`like`Inheritance`等的工具`Encapsulation`...

# css - 基于供应商的 CSS3 与标准 CSS3 语法的排序

> ID：12528398
> 
> 赞同：7
> 
> 时间：2012-09-21T10:04:34.057
> 
> 标签：css, vendor-prefix

为了实现跨浏览器的兼容性，我们倾向于同时使用供应商特定的扩展和标准的 CSS3 语法。*我知道 CSS3 仍处于草稿阶段，但我们已经开始使用它。*但问题是，它们出现的顺序真的很重要吗？

例如，让我们看看这里

```
-moz-border-radius: 10px;
border-radius: 10px; 
```

这适用于特定于浏览器`border-radius`的方法，然后回退到标准方法，后者可能会被忽略，但仍然如此。

同样，切换它们的顺序

```
border-radius: 10px;
-moz-border-radius: 10px; 
```

现在，这首先尝试标准语法，然后回退到基于浏览器的扩展。

排序有什么不同吗？可能是在性能方面或其他方面。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T13:30:06.963

> 现在，这首先尝试标准语法，然后回退到基于浏览器的扩展。

这可能是一种误导性陈述。兼容的浏览器会首先尝试标准的无前缀属性，*但*如果除了标准之外*它还支持带前缀的属性，那么它也会应用该前缀。*这通常会导致标准声明被前缀声明和浏览器对该属性的潜在非标准实现所覆盖，从而破坏了将标准属性放在首位的目的。

您应该最后声明无前缀属性的原因是因为这就是属性在规则中的级联方式：浏览器将始终使用最后一个适用的属性。属性的前缀和无前缀版本在级联方面被视为相同的属性，因此您希望浏览器在应用该属性时尽其所能遵守标准。¹

如果浏览器实现了前缀而不是标准，那很好，但如果它同时实现了两者，你要确保它使用标准。您可以通过最后声明标准属性来做到这一点。

* * *

¹ [据我所知，这不是由规范规定的，因为就规范而言，供应商扩展是非标准的，因此无法描述它们的实现。尽管规范中描述[了供应商前缀的语法](http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords)，但实现完全由供应商自行决定。]

[然而，在实现要标准化的属性或规则的前缀版本时，大多数浏览器开发人员都同意约定，始终将带前缀和不带前缀的版本视为彼此的别名。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T10:15:46.003

When writing CSS3 properties, the modern wisdom is to list the "real" property last and the vendor prefixes first.

> Another thing to think about when you do include the non-prefixed property is to put it after the vendor-prefixed versions. When a browser implements the standard version of a property, as specified in the relevant CSS3 specification, you most likely want it to use that implementation instead of the experimental, browser-specific version (which it will likely still support to be backwards-compatible). Putting it last should ensure that it will override the vendor-prefixed implementation.

See [**Ordering CSS3 Properties**](http://css-tricks.com/ordering-css3-properties/)

See also : [**Remember non-vendor-prefixed CSS 3 properties (and put them last)**](http://www.456bereastreet.com/archive/201009/remember_non-vendor-prefixed_css_3_properties_and_put_them_last/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T13:28:03.900

前缀的顺序无关紧要，只要您将未来的标准版本保持在最后即可。

如果浏览器放弃对前缀的支持，它将简单地忽略该规则并执行标准版本。

ps：和AK一样，但更简单，所以你不必阅读所有页面。

# java - 将 TitleAreaDialog 的图像向左移动

> ID：12528399
> 
> 赞同：4
> 
> 时间：2012-09-21T10:04:34.813
> 
> 标签：java, swt, eclipse-rcp, jface

我正在开发基于 Java SE 的 SWT/Jface 项目，我想将 TitleAreaDialog 的图像移到左侧。是否可以 ？如果没有的话，还有吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:44:23.913

无法使用 API 对其进行配置，布局是硬编码的。一种方法是侵入对话框控件并更改其布局数据，但实现您自己的类可能更容易（`TitleAreaDialog`用作示例）。

如果你子类化`TitleAreaDialog`你必须重写`createContents(Composite)`方法，否则`TitleAreaDialog`将通过调用创建自己的标题区域`createTitleArea()`。我建议您首先复制代码`TitleAreaDialog.createContents()`并开始替换您需要以不同方式完成的内容。如果没有实际做所有事情，我不知道到底需要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:57:17.870

您可以修改图像标签的布局数据，如下所示：

```
 TitleAreaDialog tad = new TitleAreaDialog(getShell()) {

        @Override
        protected Control createContents(Composite parent) {
            Control control = super.createContents(parent);
            Label label = getTitleImageLabel();
            FormData data = (FormData) label.getLayoutData();
            data.left = new FormAttachment(0, 0);
            data.right = null;
            return control;
        }

    };
    tad.setTitle("title");
    tad.setTitleImage(Activator.imageDescriptorFromPlugin(
            Activator.PLUGIN_ID, "image.gif").createImage());
    tad.open(); 
```

# javascript - 如何将 Angular.js 与 Pusher 或 PubNub 等实时消息服务集成？

> ID：12528403
> 
> 赞同：5
> 
> 时间：2012-09-21T10:04:40.903
> 
> 标签：javascript, angularjs, pusher, pubnub

是否可以将 Pusher 或 PubNub 定义为 Angular 服务？有人有这种集成的代码示例吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T16:08:54.293

有人已经做到了:-)：http: [//jsfiddle.net/bv5Kq/13/](http://jsfiddle.net/bv5Kq/13/)

请务必查看 wiki 以获取示例：[https ://github.com/angular/angular.js/wiki/JsFiddle-Examples](https://github.com/angular/angular.js/wiki/JsFiddle-Examples)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T17:58:47.320

有 AngularFire，用于使用 Firebase - [http://angularfire.com/](http://angularfire.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-23T17:17:30.377

试试这个。它具有变色、表情、可点击的超链接和多个频道。不需要数据库或套接字，只需一个 PubNub 帐户：http: [//jadendreamer.wordpress.com/2013/10/22/advanced-angular-chatroom-tutorial-no-database-or-sockets-required/](http://jadendreamer.wordpress.com/2013/10/22/advanced-angular-chatroom-tutorial-no-database-or-sockets-required/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-02T18:47:47.537

PubNub 有一个有点“非官方”的 AngularJS 库。它是全局 PUBNUB 库对象的简单服务包装器。主要代码在 app/scripts/pubnub-angular.coffee 中，如下所示：

```
angular.module('pubnub.angular.service', [])
  .factory 'PubNub', () -> PUBNUB 
```

您可以在此处找到 GitHub 存储库：

[https://github.com/pubnub/angular-js](https://github.com/pubnub/angular-js)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-10T13:28:46.227

试试这个：[https://disparity.github.io/angular-pusher/](https://disparity.github.io/angular-pusher/)，用于将推送事件集成到角度事件系统中的模块

# xml - 集成动态 XML 内容以在 Google/Bing 中编制索引的最佳方式

> ID：12528410
> 
> 赞同：0
> 
> 时间：2012-09-21T10:05:09.267
> 
> 标签：xml, iframe, seo

我正在寻找一种将动态内容（工作机会）从 XML 提要集成到网站的好方法。目的是让这些内容在典型的搜索引擎（谷歌、必应）上编入索引，以便寻找特定工作机会的人能够通过搜索重定向到我的网站。我正在使用succesfactors 提供的API 自己创建XML 提要，在succesfactors 后端显示职位描述和到应用程序的相应深层链接。

回到问题 - 你认为有可能使用 iFrames 来展示工作机会并仍然被索引或推荐其他方式吗？

（当然 - 每天手动放置静态内容会起作用 - 但我正在寻找一个自动化的解决方案）

感谢您的帮助和想法！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:51:25.950

出于 SEO 目的，我不会在 IFRAME 中托管内容 - 例如，我可以包含一个加载 google.com 的 IFRAME，但不希望从 Google 的网站获得任何 SEO 好处。

当然仍然可以自动化此过程以将内容包含在您的网站上，但是，您只需要实现一种服务器端编程语言（PHP、Java 等）来解析 XML 提要并将其包含在您网站的 HTML 中。

这是一个使用 PHP 读取 XML 的教程 - [http://fuelyourcoding.com/reading-xml-with-php/](http://fuelyourcoding.com/reading-xml-with-php/)

# asp.net - asp.net reportviewer displaymode as printpreview

> ID：12528411
> 
> 赞同：0
> 
> 时间：2012-09-21T10:05:10.753
> 
> 标签：asp.net, report

我使用 webforms.reportviewer。我已经阅读了很多关于报告分页和交互式页面大小的博客和文章。我的目的是类似于 winforms.reportviewer 的 printlayout 显示模式。但我没有找到任何解决方案。我检查了telerik的reportviewer控件，他们可以解决这个问题。但是我想不通怎么...

有人知道吗？不幸的是，我无法弄清楚它是如何工作的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:32:04.857

将您的报告以 PDF 格式呈现到屏幕上应该可以满足您的需求。

它将向您的用户展示将要打印的内容。与此报告没有交互性。

您可以使用[Url 访问参数和 rs 命令执行此操作](http://msdn.microsoft.com/en-us/library/ms152835.aspx)

格式如下：

```
http://ReportServer/<Report_Name>&rs:Format=PDF 
```

# c - 从C语言的十个字符串列表中找到最长的字符串？

> ID：12528412
> 
> 赞同：1
> 
> 时间：2012-09-21T10:05:15.123
> 
> 标签：c, string

我将不得不从用户那里获取输入并从这 10 个字符串中找到最长的输入..

```
#include<stdio.h>
#include<conio.h>

void main() {
char str[10][10]
printf("Enter strings:")
scanf("%s", str)

} 
```

如果我像这样接受用户输入，它会将字符串存储在 str 二维数组中吗？要首先找出最长的字符串，我会找到每个字符串的长度并使用 max_length 函数来确定最长的字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T10:08:08.970

您不需要存储所有字符串，只需存储迄今为止输入的最长的字符串。请注意，您确实需要定义字符串的最大长度以避免缓冲区溢出。

例如：

```
#define MAX_STRING_SIZE 1024

char last_entered_string[MAX_STRING_SIZE];
char longest_entered_string[MAX_STRING_SIZE] = ""; /* Must be initialized. */

scanf("%1023s", last_entered_string); /* Read one less to allow for
                                         null terminator. */ 
```

使用循环接受十个输入并与最长的字符串进行比较。如果最后输入的字符串较长，则将其复制到最长的字符串中。由于这是家庭作业，我不会提供任何进一步的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:09:07.083

不，不会的。您必须循环并读取所有字符串。

```
for(i=0;i<10;i++)
scanf("%s", str[i]); 
```

另外，您缺少一些分号！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:20:46.137

您可以找到放置的最长字符串并将其保存为收到的所有字符串。

```
int main()
{
 char *str = NULL;
 char *compare;
 printf("Enter strings:");
 scanf("%s", compare);
 if (strlen(str) < strlen(compare))
    str = strdup(compare);
 return(0);
} 
```

如果您想存储所有用户输入（考虑到您只能从用户那里获得 10 个字符串），您可以这样做：

```
int main()
{
 char **array;
 char *str;
 int x = 0;
 int shortest;
 array = malloc(sizeof(char*) * 10);
 while (x < 10)
  {
   scanf("%s", str)
   array[x] = strdup(str);
   x++;
  }
 x = 0;
 shortest = x;
 while (x < 10)
  {
   if (strlen(array[x]) > strlen(shortest))
     shortest = x;
   x++;
  }
 return (0);
} 
```

shortest 将是数组中最长字符串的索引。

我希望这能帮到您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T10:24:48.187

将所有输入存储在一个数组中，然后`qsort()`对数组条目长度执行此操作，然后获取第一个（或最后一个，取决于您的排序方式）条目。

好的，好的...... - 这可能是过度设计的...... ;-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T12:21:19.453

我认为您可以做的是采用嵌套循环并在行中搜索一个`'\0'`字符并同时运行一个计数器。一旦找到`'\0'`停止计数器并将计数器的值存储在单独的数组中。所以现在你将拥有一个由 10 个整数组成的数组。现在在数组中搜索最小的整数，然后......宾果游戏！相应的行将具有最短的字符串。我知道这种方法非常原始，但我认为它对只有 C 基础知识的人会有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T12:24:56.553

所呈现的程序将从用户那里获取 10 个输入字符串，然后最终打印出最长的字符串及其长度。它不会存储除最大字符串之外的任何其他输入字符串。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX_STR_LEN 1024

int main(int argc, char **argv){

    char str_final[MAX_STR_LEN];
    char str_temp[MAX_STR_LEN];
    unsigned int i, j, len_str;
    unsigned int num_string = 10;
    unsigned int len_max = 0;

    for (i=0; i<num_string; i++){
        printf("Enter string number: %d\n", i);
        gets(str_temp);

        for (j=0; str_temp[j]; j++);
        len_str = j;

        if(len_str > len_max){
            len_max = len_str;
            memset(str_final, 0, MAX_STR_LEN);
            memcpy(str_final, str_temp, len_str);
        }else{
            memset(str_temp, 0, MAX_STR_LEN);
        }

    }

    printf("The biggest string is: %s\n", str_final);
    printf("It's size is: %d\n", len_max);
    exit(EXIT_SUCCESS); 
} 
```

# perl - 为什么 Apache PerlModule 指令不设置自定义环境变量？

> ID：12528414
> 
> 赞同：1
> 
> 时间：2012-09-21T10:05:21.817
> 
> 标签：perl, apache2, mod-perl2

我正在构建一个 mod_perl 网站，我需要设置一个将在 Perl 代码中使用的环境变量。

到目前为止，我一直在使用`PerlSetEnv`指令来设置这个变量：

```
 PerlSetEnv MYVAR myvalue

    <LocationMatch /perlpath/>
        SetHandler modperl
        PerlResponseHandler myhandler
        Header set Cache-control "no-cache"
    </LocationMatch> 
```

这工作正常，但我想预加载我的 mod_perl 处理程序，因为第一次调用非常慢。所以我将我的 Apache 虚拟主机文件更改为：

```
 PerlSetEnv MYVAR myvalue
    PerlModule myhandler         <- add this line

    <LocationMatch /perlpath/>
        SetHandler modperl
        PerlResponseHandler myhandler
        Header set Cache-control "no-cache"
    </LocationMatch> 
```

但是如果我这样做，我的自定义环境变量`MYVAR`在预加载时没有设置`myhandler`，我的代码会失败。

那么是否可以设置将由`PerlModule`指令导出的环境变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T10:50:03.120

您可以使用 PerlPassEnv 将环境变量转发到服务器中运行的程序。但是，它们在 apache 请求周期的第一阶段生效，这与 setEnv 和 PassEnv 不同，后者直到修复阶段才生效。

过去，我使用 BEGIN 子句来设置像 ORACLE_HOME 这样的 env 变量，我希望在请求阶段之前就可以看到它。

尝试在 httpd.conf 中的 perl BEGIN 块中设置变量，这可能会比传统指令更早地暴露它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:31:21.940

也许你必须在你的虚拟主机配置中移动 setenv？

```
<LocationMatch /perlpath/>
    SetHandler modperl
    PerlSetEnv MYVAR myvalue
    PerlResponseHandler myhandler
    Header set Cache-control "no-cache"
</LocationMatch> 
```

# jquery - 使用 jquery SLIDETOGGLE // 可见/隐藏？

> ID：12528415
> 
> 赞同：0
> 
> 时间：2012-09-21T10:05:27.103
> 
> 标签：jquery, hide, show, slidetoggle, visible

我在同时打开/关闭 div 时遇到问题。我已经阅读了很多关于它的内容并尝试了一切，但似乎没有任何效果......这就是它应该看起来的样子：

[**演示**](http://jsfiddle.net/nGabd/)

这是我得到的代码。它与一个 DIV 完美配合：

```
$(document).ready(function(){

    $(".slidingDiv").hide();
    $(".show_hide").show();

$('.show_hide').click(function(){
$(".slidingDiv").slideToggle();
}); }); 
```

我希望这适用于 3 个或更多 div：一旦单击新链接并且 div 出现幻灯片，当前打开的 div 就会以幻灯片关闭。

很高兴收到你的来信:-) 非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:13:38.913

`$(".slidingDiv2").slideToggle();` try adding this line. hope it may help.

ok i didnt got you at the first time so i just posted that part: add this `$('.menu').click(function(){ $(".slidingDiv").slideToggle(); $(".slidingDiv2").slideToggle(); });` this will help. actually what your code is doing at first is only clicking with class show_hide. if you want your hyperlink to work you have use the class on hyperlinks.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:50:30.873

如果我理解正确，我认为您追求的是这样的：

```
$('a.link').on('click', function(e) {

  e.preventDefault();
  var slideSelector = '#' + $(this).attr('id').replace('link', 'slide');

  // slide down the div which corresponds to the clicked anchor,
  $(slideSelector).slideDown(500, function() {
    // slide the rest up
    $('div.slide').not($(slideSelector)).slideUp(500);
  });

  // or do it in the reverse order
  $('div.slide').not($(slideSelector)).slideUp(500, function() {
    $(slideSelector).slideDown(500);
  });      

}); 
```

这是我用于上述示例的标记：-

```
<a id="link1" class="link" href="#">Link 1</a>
<a id="link2" class="link" href="#">Link 2</a>
<a id="link3" class="link" href="#">Link 3</a>

<div class="slide" id="slide1">Slide Example #1</div>
<div class="slide" id="slide2">Slide Example #2</div>
<div class="slide" id="slide3">Slide Example #3</div> 
```

请注意，`<a>`'s 和`<div>`'s 都被赋予了`id`'s，它们用于将两者联系在一起（看看`slideSelector`）。

[这是一个小提琴，每次单击链接时都会在上述每个示例之间切换](http://jsfiddle.net/deifwud/W6se7/2/)

这只是一种方法，例如另一种方法是将链接和 div 包装在单独的容器中，然后使用`index()`来选择与单击的链接相对应的 div，但是链接和 div 必须以相同的顺序出现以使其正常工作。

# python - python中的文件系统抽象

> ID：12528416
> 
> 赞同：1
> 
> 时间：2012-09-21T10:05:28.847
> 
> 标签：python, filesystems

我正在寻找一个文件系统抽象来读取和存储文件，就像 php [gaufrette](https://github.com/KnpLabs/Gaufrette#gaufrette)库一样。

目标是以与 FTP、本地文件系统、GridFS 相同的方式访问文件，具体取决于环境。已经有了吗？最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:09:24.110

你可能想看看 pyfs。它不支持 GridFS，但它确实支持很多后端，而且很容易添加更多。

[http://code.google.com/p/pyfilesystem/](http://code.google.com/p/pyfilesystem/)

[http://packages.python.org/fs/](http://packages.python.org/fs/)

# java - 我应该用 junit 测试 toString() 吗？

> ID：12528420
> 
> 赞同：12
> 
> 时间：2012-09-21T10:05:40.397
> 
> 标签：java, junit, tostring

这样的测试有充分的理由存在吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-21T10:07:57.193

有些类`toString`不仅仅用于用户可读的信息字符串。例子是`StringBuilder`和`StringWriter`。在这种情况下，当然建议像任何其他业务价值方法一样测试该方法。

即使在一般情况下，最好`toString`对可靠性进行冒烟测试（不抛出异常）。您需要的最后一件事是由于执行不当而导致代码崩溃的日志语句`toString`。它发生在我身上好几次了，产生的错误是最糟糕的，因为你甚至没有`toString`在源代码中看到调用——它被隐式地隐藏在日志语句中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T10:06:49.677

问题不是我应该测试 toString()，而是你关心 toString() 的结果吗？它是用来做什么的吗？如果是这样，那么是的，测试它。

如果一种方法被用于真实的事情，那么就对其进行测试。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T10:05:57.730

显而易见的答案是“不，这只是浪费时间”。但是对于许多类，首先是值包装器，toString 应该被重载并提供更多信息，而不仅仅是 org.package.ClassName@2be2befa

所以我对 toString 的建议测试是：

```
@Test
public final void testToString() {
    assertFalse(new MyClass().toString().contains("@"));
} 
```

它还增加了测试收敛，至少还不错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T10:08:16.083

如果方法的结果对你很重要，你应该测试它，否则你可以忽略它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-28T10:49:07.943

我将反对一般建议，并说测试 toString 方法肯定有它的位置。我在日志上工作的应用程序很多，尤其是当您打开调试或跟踪级别日志时。如果我依靠日志来帮助识别错误，并且我的 POJO 中的某些字段不存在，因为某些开发人员忘记重新生成 toString 方法，这是一个巨大的挫折！

问题是 toString 方法测试起来非常痛苦，因为它们没有固定的格式或测试它的清晰方法。我建议不要自己编写测试，而是使用[ToStringVerifier之类的库](https://github.com/jparams/to-string-verifier)

```
@Test
public void testToString()
{
    ToStringVerifier.forClass(User.class).verify();
} 
```

# soap - Java WS文件上传服务

> ID：12528425
> 
> 赞同：2
> 
> 时间：2012-09-21T10:05:58.347
> 
> 标签：soap, wsdl, wsdl2java, java-ws

我目前正在开发一个 Java Web 服务项目。它部署在 Apache Tomcat 7 服务器上，我需要提供将文件上传到服务器的服务。此外，Web 服务应该可用于可能不使用 java 的系统。因此，我需要使我的 Web 服务对所有客户端（即 C#、php 等）普遍可用。浏览网页后，我找到了许多解决方案，但没有一个没有说明我如何才能满足上述条件。更具体地说，我遇到了 MTOM 和 Java WS 注释，它们被引用为指定普遍接受的数据结构（例如 Java 的 DataHandler）所必需的。让我发布我的 Web 服务的示例代码：

```
public class DataFileServer extends AbstractFileServer {

    private int _buffer_size;

    public DataFileServer() {
        _buffer_size = 100000;
    }

    public DataFileServer(int bufferSize) {
        _buffer_size = bufferSize;
    }

    @Override
    public void uploadFile(String AbsoluteFilePath, FileObject FileInfo) {
        DataHandler _handler = FileInfo.getHandler();
        try {
            InputStream is = _handler.getInputStream();
            OutputStream os = new FileOutputStream(new File(AbsoluteFilePath + 
                "/" + FileInfo.getName() + "." + 
                FileInfo.getType()));
            byte[] b = new byte[_buffer_size];
            int bytesRead = 0;
            while((bytesRead = is.read()) != -1) {
                os.write(b, 0, bytesRead);
            }
        }catch(IOException e) {
            e.printStackTrace();
        }
    }
} 
```

DataFileServer 是要进行上传操作的类，Web Service 接口如下：

```
@WebService()
public class ETL_WS {

    private DataHandler _handler;
    private String server_dir = "/home/user/Desktop/FileServer";

    public int fileUpload(String FileName, DataHandler CsvFile) {
        FileObject _file = new FileObject(FileName, CsvFile);
        _handler.uploadFile(this.server_dir, _file);

        return 0;
    }
} 
```

我的问题是，我将如何确保提供给我的 Web 服务的 DataHandler 对象是正确的类型。另外，我可以通过任何方式提高文件上传操作的安全性和性能吗？

谢谢

# unity3d - 在统一 3d 中围绕其中心点旋转对象

> ID：12528428
> 
> 赞同：0
> 
> 时间：2012-09-21T10:06:22.810
> 
> 标签：unity3d

如何在统一 3d 中围绕其中心点旋转 3d 游戏对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-11-16T20:00:48.727

只需使用渲染器中的 bounds.center

```
Vector3 position = myGameObject.GetComponent<Renderer>().bounds.center;

myGameObject.transform.RotateAround(position, rotationVector, degreesPerSecond * Time.deltaTime); 
```

其中rotationVector 是您的旋转轴（Vector3）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-27T20:02:05.660

旋转对象的两种常用方法是

1.  变换中的旋转属性。使用这个，您可以设置目标对象旋转的精确坐标。但是，如果要制作动画，则必须自己管理平滑度，并且通过四元数类型给出值。我建议使用静态方法[Quaternion.Euler](http://docs.unity3d.com/ScriptReference/Quaternion.Euler.html "四元数一欧拉")，这样您就可以在 X、Y、Z 中传递值。下面的示例将对象设置为在 Y 轴上顺时针旋转 90 度：

    ```
    transform.rotation = Quaternion.Euler (0, 90, 0); 
    ```

2.  第二种方法在相同的变换属性中使用旋转方法。此方法允许您传递对象旋转的度数，并且已经接受 X、Y 和 Z 坐标而不是四元数。下面的示例将对象在 Y 轴上顺时针旋转 1 度：

    ```
    transform.Rotate (0, 1, 0); 
    ```

为了更好地理解这两种方法之间的区别，如果您在 Update 方法中使用第一种方法，您将看到对象在 Y 轴上静态旋转了 90 度。更新中使用的第二个示例将使对象在 Y 轴上顺时针旋转（太快）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-26T07:02:36.740

采用

> 变换旋转

在此处查找示例/文档： [Unity 脚本参考](http://docs.unity3d.com/Documentation/ScriptReference/Transform-rotation.html)

# java - HTTPComponents 和下载 HTML 图像

> ID：12528429
> 
> 赞同：1
> 
> 时间：2012-09-21T10:06:28.320
> 
> 标签：java, apache-httpcomponents

我使用 HTTPComponents 在我的 Java 库中下载 HTML 内容，但现在我需要下载 IMG 标记中包含的图像。我是否必须解析 HTML 并下载每次出现的 IMG 标签，或者在 HTTPComponents 中有更短的方法？

否则，您能否建议可以完成这项工作的 HTTP 组件替代方案！

# php - 为什么 iconv 会产生非法字符错误？

> ID：12528430
> 
> 赞同：4
> 
> 时间：2012-09-21T10:06:37.300
> 
> 标签：php, php-5.2

我正在尝试消除脚本中的警告和通知。该脚本包括以下内容：

```
$clean_string = iconv('UTF-8', 'UTF-8//IGNORE', $supplier.' => '.$product_name); 
```

据我了解，这一行的目的，正如脚本的原作者所期望的那样，是从字符串中删除非 UTF-8 字符，但显然输入中的任何非 UTF-8 字符都会导致 iconv抛出非法字符警告。

为了解决这个问题，我的想法是执行以下操作：

```
$clean_string = iconv(mb_detect_encoding($supplier.' => '.$product_name), 'UTF-8//IGNORE', $supplier.' => '.$product_name); 
```

然而奇怪的是，mb_detect_encoding()`UTF-8`作为检测到的编码返回！

带有重音符号 ( `é`) 的字母 e 是导致此行为的字符示例。

我意识到我在检测和转换之间混合了多字节库，但是我在 iconv 库中找不到编码检测功能。

我考虑过使用 mb_convert_encoding() 函数将字符串清理为 UTF-8，但 PHP 文档不清楚无法表示的字符会发生什么。

我正在使用 PHP 5.2.17，并使用 glibc iconv 实现，库版本 2.5。

谁能提供有关如何将字符串清理为 UTF-8 的任何建议，或者深入了解为什么会发生这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:46:39.393

你的例子：

```
$string     = $supplier . ' => ' . $product_name;
$stringUtf8 = iconv('UTF-8', 'UTF-8//IGNORE', $string); 
```

并且使用 PHP 5.2 可能对您有用。在以后的 PHP 版本中，如果输入不是精确的 UTF-8，incov 将删除该字符串（您将得到一个空字符串）。就您而言，您可能没有意识到这一点。

然后您尝试使用[`mb_detect_encoding`^(*Docs*)](http://php.net/mb_detect_encoding)来了解原始编码：

```
$string     = $supplier . ' => ' . $product_name;
$encoding   = mb_detect_encoding($string);
$stringUtf8 = iconv($encoding, 'UTF-8//IGNORE', $string); 
```

正如我已经在评论中链接的那样，`mb_detect_encoding` 正在做一些魔术并且无法正常工作。它试图帮助你，但是，它*不能很好地*检测到编码。这是由主题的问题。您可以尝试将严格模式设置为 true：

```
$order      = mb_detect_order();
$encoding   = mb_detect_encoding($string, $order, true);
if (FALSE === $encoding) {
    throw new UnexpectedValueException(
        sprintf(
            'Unable to detect input encoding with mb_detect_encoding, order was: %s'
            , print_r($order, true)
        )
     );
} 
```

除此之外，您可能还需要在两个库（iconv 和多字节字符串）之间翻译[编码^(*文档的名称（和/或验证支持的编码）。*)](http://php.net/manual/en/mbstring.supported-encodings.php)

希望这有助于您至少更好地理解为什么有些事情可能不起作用，以及如何更好地找到错误案例并使用标准 PHP 扩展过滤输入。

# c# - 如何在单选按钮的设置时间设置多种语言。查看更多：C#

> ID：12528432
> 
> 赞同：0
> 
> 时间：2012-09-21T10:06:38.833
> 
> 标签：c#

我在我的项目中使用本地化，但我的问题是，当用户安装项目时，他们在设置时从单选按钮选项中选择英语或马拉地语，而我的整个项目仅在该特定语言上运行？如何在设置时间进行设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:52:25.507

您需要创建两个文件（或静态数组/字符串列表，但不建议这样做，因为应用程序会将两者都保存在 RAM 中，如果应用程序包含大量文本，这可能会占用相当多的内存）和然后是字符串类型的静态列表。

每当用户选择一个选项时，您都必须让您的应用程序加载适当的文件（通过为文件的每一行调用 List.Add，具体取决于您构建它的方式）。

显然有一个缺点：您必须将其添加到 lang 文件中，而不是仅仅将字符串分配给控件，并且在创建所述控件时，您需要将列表中的相应元素传递给它。

我认为这是最好的选择，否则您可以在应用程序启动时创建两个包含两种语言的列表，并在用户应用新配置后处理未使用的列表。

# mysql - mysql：将一个表中的字段分别分组

> ID：12528436
> 
> 赞同：0
> 
> 时间：2012-09-21T10:06:47.940
> 
> 标签：mysql, group-by

我需要从 MySQL 中获取以下类型数据的平均值：

有一张表：

表格1

```
字段_a、字段_b、字段_c

数据_a，数据_a，数据_c
数据_a，数据_b，数据_c
数据_a，数据_a，数据_c

```

我需要输出的是（这部分不需要在mysql中，只是说明我需要的数据）：

field_a 的 100% 是 data_a

field_b 的 33% 是 data_b，66% 是 data_a

field_c 的 100% 是 data_c

我尝试按每个字段进行分组，但没有给出预期的结果。解决这个问题的最佳方法是什么？（目前我刚刚将其设置为对每个字段运行单独的查询，但是有很多，所以我希望它们在一个大查询中/效率更高一些）。

另外，为标题道歉。我真的想不出更好的方法来解释它。随意编辑一些更简洁的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:50:32.983

我只能想到`UNION`使用：

```
(SELECT field_a AS val, COUNT(field_a) AS cnt, 'A' AS fld_name 
    FROM table1 GROUP BY field_a)
UNION
(SELECT field_b AS val, COUNT(field_b) AS cnt, 'B' AS fld_name 
    FROM table1 GROUP BY field_b)
UNION
(SELECT field_c AS val, COUNT(field_c) AS cnt, 'C' AS fld_name 
    FROM table1 GROUP BY field_c) 
```

它将为我们提供每行包含的记录集：

*   字段值，
*   表中此类值的数量，
*   字段名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:53:59.630

```
select 'field a', fa, cfa * 100.0 / total
from (
        select
            fa, count(fa) as cfa
        from t
        group by fa
    ) t
    inner join (
        select count(*) as total
        from t
    ) s on 1 = 1

union

select 'field b', fb, cfb * 100.0 / total
from (
        select
            fb, count(fb) as cfb
        from t
        group by fb
    ) t
    inner join (
        select count(*) as total
        from t
    ) s on 1 = 1

union
... 
```

如果您正在寻找动态构建的查询，它可以完成，但事实并非如此。

# sql - 从表 A 中选择值并从表 B 中计算相应的值

> ID：12528441
> 
> 赞同：-1
> 
> 时间：2012-09-21T10:06:57.133
> 
> 标签：sql, tsql

我有一个我无法真正了解如何工作的问题，我根据谷歌的发现尝试了一些事情，但无济于事。我希望这里有人可以提供帮助。

我有两个表（A 和 B），表 AI 中有一些我想选择的概览数据，表 BI 中有与表 A 对应的详细信息（连接两个参数），但是表 B 中的数据只需要总结在行数上。

我有这个查询：

```
SELECT s.CartID,
   s.Sender,
   s.Destination,
   s.CartType,
   s.SendDate,
   p.PackageID,
   p.CartID,
   COUNT(b.*) AS nRows
         FROM tblA s LEFT OUTER JOIN tblB p
         ON s.CartID = p.CartID AND s.SendDate = p.CartDate
         WHERE s.Client='3' AND s.SendDate BETWEEN '2012-09-01' AND '2012-09-07' 
```

但是，这只给出了以下错误：

*' '.**附近的语法不正确**

 *我也尝试过使用这个 COUNT(b.PackageID) 但后来我得到：

列 'tblA.CartID' 在选择列表中无效，因为它既不包含在聚合函数中，也不包含在 GROUP BY 子句中。

我真的不知道如何在一个查询中获取这些数据。

任何帮助，将不胜感激。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:12:23.417

该错误告诉您需要将所有字段添加`SELECT`到 a`GROUP BY`或聚合中，如下所示：

```
SELECT s.CartID,
   s.Sender,
   s.Destination,
   s.CartType,
   s.SendDate,
   p.PackageID,
   p.CartID,
   COUNT(p.*) AS nRows  -- I am guessing this should be p not b
FROM tblA s 
LEFT OUTER JOIN tblB p
  ON s.CartID = p.CartID 
  AND s.SendDate = p.CartDate
WHERE s.Client='3' 
  AND s.SendDate BETWEEN '2012-09-01' AND '2012-09-07'
GROUP BY s.CartID,
   s.Sender,
   s.Destination,
   s.CartType,
   s.SendDate,
   p.PackageID,
   p.CartID 
```

如果您不想要`GROUP BY`所有这些字段，那么您还可以使用类似于以下的子查询：

```
SELECT s.CartID,
   s.Sender,
   s.Destination,
   s.CartType,
   s.SendDate,
   p.PackageID,
   p.CartID,
   p.Cnt as nRows
FROM tblA s 
LEFT OUTER JOIN
(
  SELECT COUNT(*) cnt, CartID, PackageID, CartDate
  FROM tblB
  GROUP BY CartID, PackageID, CartDate
) p
  ON s.CartID = p.CartID 
  AND s.SendDate = p.CartDate
WHERE s.Client='3' 
  AND s.SendDate BETWEEN '2012-09-01' AND '2012-09-07' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:13:21.510

您可能将 b 拼错为 p。
对于 COUNT，您可以使用 GROUP BY：

```
SELECT 
   s.CartID,
   s.Sender,
   s.Destination,
   s.CartType,
   s.SendDate,
   p.PackageID,
   p.CartID,
   COUNT(p.*) AS nRows
FROM 
    tblA s LEFT OUTER JOIN tblB p
    ON s.CartID = p.CartID AND s.SendDate = p.CartDate
 WHERE 
    s.Client='3' AND 
    s.SendDate BETWEEN '2012-09-01' AND '2012-09-07'
GROUP BY
   s.CartID,
   s.Sender,
   s.Destination,
   s.CartType,
   s.SendDate,
   p.PackageID,
   p.CartID, 
```*

# node.js - NodeJS 护照

> ID：12528442
> 
> 赞同：24
> 
> 时间：2012-09-21T10:07:00.987
> 
> 标签：node.js, mongoose, passport.js

我在 nodejs 上设置了护照，并让它与 mongoose 一起使用，以允许用户登录和创建新帐户。

应用程序.js：

```
var express = require('express')
  , app = module.exports = express.createServer()
  , passport = require('passport')
  , LocalStrategy = require('passport-local').Strategy
  , routes = require('./routes/index')(app) //index loads in multiple routes
  , MongoDBConnection = require('./database/DatabaseConnector').MongoDBConnection;

// Configuration
app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.cookieParser());
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.session({ secret: 'justdoit' }));
  app.use(passport.initialize());
  app.use(passport.session());
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
});

var mongoDbConnection = new MongoDBConnection();

passport.serializeUser(function(user, done) {
    done(null, user.id);
});

passport.deserializeUser(function(id, done) {
    mongoDbConnection.findUserById(id, function(err, user){
       done(err, user);
    });
});

passport.use(new LocalStrategy(
    function(username, password, done) {
        process.nextTick(function () {
            mongoDbConnection.findUser(username, function(err, user) {
                //conditions....
            });
        });
    }
));

app.get('/', function(req, res){
    res.render('index', { title: "Index", user: req.user });
});

app.get('/account', ensureAuthenticated, function(req, res){
    res.render('account', { title: "Account", user: req.user });
});

app.get('/login', function(req, res){
    res.render('login', { title: "Login", user: req.user, message: req.flash('error') });
});

app.post('/login',
    passport.authenticate('local', {
        successRedirect: '/account',
        failureRedirect: '/login',
        failureFlash: true })
);

function ensureAuthenticated(req, res, next) {
    if (req.isAuthenticated()) { return next(); }
    res.redirect('/login')
} 
```

我的问题是 app.js（这是护照代码所在的位置）文件有点大，我试图将护照部分移动到它自己的脚本中，并将路由放在 app.js 之外和它自己的 auth.js 中route 文件，然后通过 app.js 引用路由。它适用于其他路线，但对于与护照相关的路线，例如登录，它似乎不会触发 passport.authencate() 函数。

无论如何我可以将护照路线和功能放入自己的文件中并从app.js调用/加载它吗？

auth.js：

```
module.exports = function(app){

passport.serializeUser(function(user, done) {
    done(null, user.id);
});

passport.deserializeUser(function(id, done) {
    mongoDbConnection.findUserById(id, function(err, user){
        done(err, user);
    });

});

passport.use(new LocalStrategy(
    function(username, password, done) {
        process.nextTick(function () {

            mongoDbConnection.findUser(username, function(err, user) {

                if (err) {
                    return done(err);
                }
                if (!user) {
                    return done(null, false, { message: 'Unknown user ' + username });
                }

                if (user.password != password) {
                    return done(null, false, { message: 'Invalid password' });
                }

                return done(null, user);
            });
        });
    }
));

app.get('/', function(req, res){
    res.render('index', { title: "Index", user: req.user });
});

app.get('/account', ensureAuthenticated, function(req, res){
    console.log("directing to the account page....");
    res.render('account', { title: "Account", user: req.user });
});

app.get('/login', function(req, res){
    res.render('login', { title: "Login", user: req.user, message: req.flash('error') });
});

app.post('/login',
    passport.authenticate('local', {
        successRedirect: '/account',
        failureRedirect: '/login',
        failureFlash: true })
);

function ensureAuthenticated(req, res, next) {
    if (req.isAuthenticated()) { return next(); }
    res.redirect('/login')
}
} 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-22T20:23:06.127

这就是我所做的。如果您需要更多帮助来根据您的代码定制它，请发表评论。

**第一步**

将您的护照代码放在单独的文件中。例如 pass.js。（我看到您已经这样做了）然后，在该文件中，将所有代码放入其中：

```
module.exports = function(passport, LocalStrategy){

}; 
```

请记住将您正在使用的任何其他内容添加到函数输入中。在您的情况下，除了护照和 LocalStrategy 之外，您可能还需要添加 mongoDbConnection 作为输入。

**第二步**

在您的 app.js 中，包含此行。如果可能，就在“app.listen”之前，以确保所有内容都已正确定义/声明/包含。

```
require('./pass.js')(passport, LocalStrategy); 
```

**解释**

第一步中的“包装器”定义了您将包含在应用程序中的代码块。第二步中的“要求”是实际包含它的代码。您基本上是将整个“pass.js”文件定义为一个函数，并将执行代码所需的工具（护照、LocalStrategy 等）传递给它

在您的情况下，您可能需要将我的代码修改为：

```
module.exports = function(passport, LocalStrategy, mongoDbConnection){

};

require('./pass.js')(passport, LocalStrategy, mongoDbConnection); 
```

这应该有效。不久前我在谷歌上搜索过，这似乎是分解你的 app.js 的“正确”方式（尽管我非常恐惧地说：））。如果您需要更多帮助，请随时发表评论。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-13T21:08:36.603

这个 github repo 也有一个很好的例子。

[https://github.com/madhums/nodejs-express-mongoose-demo](https://github.com/madhums/nodejs-express-mongoose-demo)

server.js 文件将是您的 app.js。/config/passport.js 是包含的护照设置。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-12T11:11:28.637

为此，我建议在 app.js 中执行此操作

```
 require('./mypassport')(app); 
```

和 mypassport.js

```
var passport = require('passport')
, LocalStrategy = require('passport-local').Strategy

, MongoDBConnection = require('./database/DatabaseConnector').MongoDBConnection;

  module.exports = function(app){

    passport.serializeUser(function(user, done) {
     done(null, user.id);
   });

  passport.deserializeUser(function(id, done) {
   mongoDbConnection.findUserById(id, function(err, user){
    done(err, user);
  });

});

passport.use(new LocalStrategy(
function(username, password, done) {
    process.nextTick(function () {

        mongoDbConnection.findUser(username, function(err, user) {

            if (err) {
                return done(err);
            }
            if (!user) {
                return done(null, false, { message: 'Unknown user ' + username });
            }

            if (user.password != password) {
                return done(null, false, { message: 'Invalid password' });
            }

              return done(null, user);
        });
      });
} 
));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-24T07:16:31.600

添加到勒让德的答案。`module.exports = function()`是 nodejs 中使文件、变量或某些功能对整个应用程序全局可用的一种方式。

```
// anyfile.js
  module.exports = function(){ 
    //global code.
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-04T10:36:18.010

```
module.exports = function(app){

passport.serializeUser(function(user, done) {
    done(null, user.id);
}); 
```

也许它不起作用，因为你没有对护照对象的引用？

# php - 将“排序依据”添加到自定义产品视图

> ID：12528443
> 
> 赞同：1
> 
> 时间：2012-09-21T10:07:03.873
> 
> 标签：php, magento, sorting, toolbar

我正在尝试将“排序依据”下拉列表添加到我的自定义产品视图中。它可以与寻呼机一起使用，但使用分拣机时我总是会出错。

这是我尝试的：

```
protected function _prepareLayout()
{
    parent::_prepareLayout();

    $pager = $this->getLayout()->createBlock('page/html_pager', 'custom.pager');

    $toolbar = $this->getLayout()->createBlock('catalog/product_list_toolbar', 'custom.toolbar');
    $toolbar->setCollection($this->getCollection());
    $toolbar->setAvailableOrders($orders);

    $pager->setCollection($this->getCollection());
    //  $pager->setAvailableLimit(array(10=>10));

    //$pager->setLimit(2);
    $pager->setDefaultOrder(array('popularity_by_sells'=>'popularity_by_sells'));

    $pager->setCollection($this->getCollection());
    $pager->setShowPerPage(false);
    $pager->setShowAmounts(false);
    $pager->setDefaultOrder('popularity_by_sells');
    $this->setChild('pager', $pager);
    $this->getCollection()->load();
    return $this;
}

public function getPagerHtml()
{
    return $this->getChildHtml('pager');
}

public function getToolbarHtml(){
    return $this->getChildHtml('toolbar');
} 
```

在这里我得到了致命错误：

> 在第 738 行调用 [...]\src\app\code\local\Mage\Catalog\Block\Product\List\Toolbar.php 中非对象的成员函数 getId()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:24:30.030

我发现 getLimit() 函数是一个自定义函数，只需在 if 子句中添加 is_object() 即可。

```
public function getLimit(){
    $currentCategory = Mage::registry('current_category');
    if ($currentCategory !== false && is_object($currentCategory))
    {[...]}
} 
```

# java - 将多个 csv 文件中的表数据合并到 ruby 中的一个 csv 文件中

> ID：12528445
> 
> 赞同：0
> 
> 时间：2012-09-21T10:07:11.357
> 
> 标签：java, ruby, ssis, etl

我有来自文件的数据，这些文件分布在不同的文件中，例如一个文件中的 id、姓名、出生日期和另一个文件中的 id、地址，即 csv 文件。这只是一个示例，用户必须在使用 SSIS 时将列指定为已完成，我要做的是创建组合文件，该文件的全部内容为 id、name、birthdate、address

java/ruby 中有没有可用的工具呢？我已经看到了 sed 解决方案，但不能使用它，因为列不固定......总之我想要来自 ETL 的 ET 函数............

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:12:43.507

你需要 Java 还是 Ruby？相反，您看过 Unix [join](http://linux.die.net/man/1/join)实用程序吗？它类似于 SQL`join`语句，不同之处在于它适用于文本文件。

# android - 如何在我的第二个列表视图中添加播放的视频？

> ID：12528448
> 
> 赞同：0
> 
> 时间：2012-09-21T10:07:21.747
> 
> 标签：android

我在两个选项卡中有两个列表视图。我只想将我的第一个默认列表视图中的播放视频显示到我的第二个列表视图中。我怎样才能做到这一点 ？我是android开发的新手。任何帮助都是宝贵的。提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:28:04.270

使用以下步骤来实现这一点。

1.  使用您喜欢的表名在单独的类中创建一个数据库。
2.  现在在表中插入带有视频名称的播放视频的索引。
3.  现在，当您将进行下一个活动时，从表中获取这些记录并在列表视图中显示它们。

另请查看[SQLite Database turoial](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)。

# java - eclipse中Xtext的问题

> ID：12528450
> 
> 赞同：10
> 
> 时间：2012-09-21T10:07:27.987
> 
> 标签：java, xtext, eclipse-juno

我正在 Eclipse 中开发一个 Java 项目。尝试通过打开文件时`Ctrl+Mouse click`，我收到一个弹出窗口，询问我是否要添加*“Xtext nature to my project”*。我说了可以。现在，我尝试在`CSS`文件中添加以下行：

> @import "myfile.css";

作为第一行。但我收到此错误，因为`Xtext Check (fast)`：

> ';' 处缺少 EOF。

任何人都可以帮助我如何处理这种错误吗？

谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-21T22:21:35.807

您有两种方法可以解决此问题：

1.  `CssDsl`首先，您可以卸载贡献编辑器的插件。一个快速的谷歌搜索告诉我它是由`e(fx)Eclipse`插件贡献的。要卸载插件，请转到`About`对话框，单击“*安装详细信息*”功能，然后在接下来的对话框中您可以查找要卸载的功能。

2.  如果以前的解决方案不适合您（例如您需要`e(fx)Eclipse`环境），您必须更改默认文件关联以避免使用`Xtext-based`编辑器打开 css 文件，并从您添加的项目中删除`Xtext`性质。

    1.  **设置文件关联**：打开 Eclipse Preferences，导航到`General`-> `Editors`-> `File`Associations 页面，您可以在其中查找 CSS 扩展名，并为其选择不同的默认编辑器。
    2.  **删除 Xtext 属性**：您可以右键单击您的项目，然后选择`Configure`-> `Remove Xtext nature`。如果由于某种原因这不起作用，您必须打开 hidden`.project file`并手动删除`<nature>org.eclipse.xtext.ui.shared.xtextNature</nature>`条目和相应的`org.eclipse.xtext.ui.shared.xtextBuilder`buildCommand。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T08:25:54.023

当我通过 New -> Other... -> Web -> CSS File 创建 CSS 时，我遇到了同样的错误。
Zoltan 的解决方案不起作用，但是当我使用 New -> File 创建文件并将其命名为 *.css 时，没有发生错误。

# android-intent - 如果用户停止主进程，如何重新启动服务？

> ID：12528453
> 
> 赞同：1
> 
> 时间：2012-09-21T10:07:42.727
> 
> 标签：android-intent

我正在为 Android 设备开发应用程序，企业拥有的这些设备是其员工的工作工具。该应用程序有两个需要 24/7 运行的服务，现在服务运行良好，在设备启动时自动启动等。但是有一些“高级用户”已经学会从应用程序中停止主进程manager（设置）然后这两个服务被杀死。

该应用程序有一个需要密码来管理一些参数和停止运行服务的活动。

我的问题是这样的：

[如果用户从设置中停止（杀死）它，我如何重新启动我的应用服务？](https://stackoverflow.com/questions/7162704/how-can-i-restart-my-app-service-if-user-stops-kills-it-from-settings)

有没有办法重新启动服务？也许：

*   使用 BrodcastReceiver (Screen_On, Screen_off)：但是如果主进程被杀死，则 BrodcastReceiver 也会被杀死，不是吗？

*   另一个服务检查其他服务：但它也可以被杀死，不是吗？

谢谢你的帮助！！！

# sql - 如何在 Sybase 中转义单引号

> ID：12528455
> 
> 赞同：15
> 
> 时间：2012-09-21T10:07:44.380
> 
> 标签：sql, sybase

我来自 MySQL，以下查询在 Sybase 中不起作用。我应该如何转义单引号？

```
UPDATE Animals SET NAME = 'Dog\'s friends' WHERE uid = 12 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-21T10:07:44.380

如果使用 Sybase，已经习惯了更多数据库用户体验过的 MySQL，您可能很快就会发现您无法使用反斜杠转义单引号。

那么如何在 Sybase 中转义引号？事实上，在 Sybase SQL 中，单引号充当转义字符。

有关两种“语言”的示例 UPDATE 语句，请参见下文：

**MySQL**

```
UPDATE Animals SET NAME = 'Dog\'s friends' WHERE uid = 12 
```

**赛贝斯**

```
UPDATE Animals SET NAME = 'Dog''s friends' WHERE uid = 12 
```

我不完全确定这对我来说有意义（尤其是因为它看起来像双引号）但是你去吧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-29T15:31:00.410

您可以创建一个自定义函数来转义引号：

```
CREATE FUNCTION "ESCAPE_QUOTES"(in a_string long varchar) 
returns long varchar
begin
  return replace(a_string, '''', '''''');
end 
```

# iphone - 调整 UITableView iphone sdk 的大小

> ID：12528456
> 
> 赞同：0
> 
> 时间：2012-09-21T10:07:46.120
> 
> 标签：iphone, sdk, resize, tableview, detailview

我有一个主菜单。我们可以在哪里找到一些不同功能的按钮。我使用 ModalTransition 在视图之间切换，所以我没有使用 NavController。一个功能是 TableView，然后是 detailview。

在 .xib 上，我无法移动 TableView，当我在我的模拟器上的 tableview 上时，我无法返回，因为 tableview 占据了所有屏幕。我想调整表格视图的大小以添加导航栏并自定义我自己的按钮。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:11:31.870

您可以自己设置`UITableView`框架 -

```
[tableView setFrame:CGRectMake(0.0, 44.0, 416.0, 320.0)]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:11:45.473

使用 UiTableView**框架**属性来实现你的目标

将 tableview 声明为 IBOutlet

**。H**

```
interface MyViewController : UIViewController {
    IBOutlet UITableView *myTableView;
}

@property (nonatomic, retain) IBOutlet UITableView *myTableView; 
```

**.m**

```
@synthesize myTableView; 
```

然后打开 .Xib 并将 myTableView与您的 .Xib 表**连接起来**

然后**调整表格视图的大小**

```
self.myTableView.frame = CGRectMake(0, 0, 320, 200); // assign you frame here 
```

或尝试**通过编程**方式添加 UITable ..看看下面的代码

```
 UITableView *tableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 100, 100); style:UITableViewStylePlain]; 
    [self.view addSubview:tableView]; 
    tableView.delegate = self;
    tableView.dataSource = self;
    [tableView reloadData]; 
```

# java - htaccess 及其用法以允许使用我的应用程序访问 android 用户的 url

> ID：12528459
> 
> 赞同：0
> 
> 时间：2012-09-21T10:07:48.660
> 
> 标签：java, php, android, .htaccess, arrays

**我是出于安全目的和 php 文件的新手**

当我看到我的文件和数据库不安全时，我开始了解**htaccess 。**

我正在从解析中填写Android`listview`应用程序。当在 android 应用程序上单击特定**URL**时，这来自**服务器服务器上有一个****php**文件，我已经回显了结果。现在问题出在数据访问上。当我从浏览器在 PC 上使用该 url 时，它会在浏览器上打印所有数据。现在我怎样才能只访问那些使用我的 android 应用程序的用户。我听说过 htaccess 文件，但不知道如何使用和编写它或者有没有其他方法可以保护或摆脱从**浏览器直接访问**`JsonArray``JsonArray`

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:16:26.590

You can use htaccess file but I think there better way. .htaccess file is fine-tuning ruleset for Apache server. It can reprogram request completely. I use it normally with Static files. But in your case dynamic php page. Which means you can pass a security session key. When people login to your app they create session key. **SSID** This will be alive for some limited amount of time. like 1 hour. And every request required it. No correct SSID means no data.******

# ios - cordova ios：cordova.exec() undefined 不是函数

> ID：12528464
> 
> 赞同：5
> 
> 时间：2012-09-21T10:08:07.180
> 
> 标签：ios, cordova, plugins, undefined

我正在使用cordova(1.9) 开发一个iOS 应用程序。我有一些自定义的 iOS 插件可以让我的应用做一些事情。现在我遇到了一个问题，有时当我打电话时：

```
cordova.exec(function(){},function(){},'MyPlugin','myMethod',['parameter']); 
```

该应用程序抛出此异常：

```
TypeError: 'undefined' is not a function (evaluating 'cordova.exec(function(){},function(){},'WDMessageDispatcher','sendMessage',['showCategoriesList'])') 
```

该插件是根据文档开发的，它可以工作，但并非每次都有效。我真的不明白为什么。其他人遇到了同样的错误？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-22T00:37:20.967

> 科尔多瓦执行程序

之后可以调用

> 设备就绪（）

已经开除了。

# facebook - iOS6 - Facebook V3 SDK VS Apple Facebook iOS6 SDK

> ID：12528466
> 
> 赞同：1
> 
> 时间：2012-09-21T10:08:14.917
> 
> 标签：facebook, sdk, ios6

如果我的应用程序仅针对 iOS6，我可以使用 iOS6 中包含的新 Facebook SDK 处理我的所有 Facebook“业务”，还是我还需要使用 Facebook V3 SDK？

# xml - 解析器从 RDF/XML 网页中为我的 Java 中的 Web-Crawler 提取 URI

> ID：12528468
> 
> 赞同：2
> 
> 时间：2012-09-21T10:08:15.077
> 
> 标签：xml, parsing, web-crawler, rdf, linked-data

我正在为链接数据构建一个网络爬虫。我通过以下代码区分了 HTML 和 RDF/XML 页面：

```
public static int checktype(URL url) throws IOException
{
String contentType = ((HttpURLConnection) url.openConnection()).getContentType();
System.out.println("Website is read"); 
int t=0;
if("text/html".equals(contentType)) {t=0;}
else if("application/rdf+xml".equals(contentType)) {t=1;}
System.out.println(contentType);
return t; 
```

}

现在我想用 RDF/XML 数据解析一个网页，以从该页面中提取所有 URI。我能够找到 HTML 解析器，但不能找到链接数据。请进一步帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:54:18.260

您可能最好使用现有的库，例如[Apache Any23](http://any23.apache.org/)，它已经带有用于自动区分不同格式的代码*和*所有格式的解析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:45:36.533

见[耶拿图书馆](http://jena.apache.org/)。它包含一个[RDF/XML 解析器](http://jena.apache.org/tutorials/rdf_api.html#ch-Reading%20RDF)。

# javascript - 日期选择器国定假日计数

> ID：12528471
> 
> 赞同：0
> 
> 时间：2012-09-21T10:08:27.270
> 
> 标签：javascript, jquery, datepicker

我有 2 个输入，其中选择了日期 #startdate 和 #enddate。我正在使用 datepicker，目前禁用了周末和节假日，这很好用！

然后我有一个#days 输入，它计算两个日期之间的差异，然后这个日期差异有一个周末计数。

我想创建一个假期计数，这样我也可以从天数差中减去这个。

所以我最终会得到

```
$('#days').val((Math.abs(($d2new-$d1new)/86400000) - weekend_count - holidaycount) + 1); 
```

**我当前的代码如下（这是从其他 stackoverflow 问题中提取的，并且运行良好:)**底部是我正在努力解决的 var holidaycount。任何帮助将不胜感激。

```
 //holidays
    var natDays = [
      [1, 1, 'uk'],
      [1, 2, 'uk'],
      [1, 3, 'uk'],
      [1, 4, 'uk'],
      [12, 24, 'uk'],
      [12, 25, 'uk'],
      [12, 26, 'uk'],
      [12, 27, 'uk'],
      [12, 28, 'uk'],
      [12, 29, 'uk'],
      [12, 30, 'uk'],
      [12, 31, 'uk']
    ];

    function noWeekendsOrHolidays(date) {
        var noWeekend = $.datepicker.noWeekends(date);
        if (noWeekend[0]) {
            return nationalDays(date);
        } else {
            return noWeekend;
        }
    }
    function nationalDays(date) {
        for (i = 0; i < natDays.length; i++) {
            if (date.getMonth() == natDays[i][0] - 1 && date.getDate() == natDays[i][1]) {
                return [false, natDays[i][2] + '_day'];
            }
        }
        return [true, ''];
    }

// do initialization here
$("#startdate").datepicker({
            dateFormat: 'dd-mm-yy',
            changeMonth: true,
            changeYear: true,
            firstDay: 1,
            yearRange: '0:+100',
            beforeShowDay: noWeekendsOrHolidays,
            onSelect: function( selectedDate ) {
                $("#enddate").datepicker("option","minDate",selectedDate );
                $("#enddate2").datepicker("option","minDate",selectedDate );
            },              
            minDate: '+1d',         
            maxDate: '+' + DAY_DIFFERENCE + 'd'
});

// do initialization here
$("#enddate").datepicker({
            dateFormat: 'dd-mm-yy',
            changeMonth: true,
            changeYear: true,
            firstDay: 1,
            yearRange: '0:+100',
            beforeShowDay: noWeekendsOrHolidays,
            maxDate: '+' + DAY_DIFFERENCE + 'd'
});

// do initialization here
$("#enddate2").datepicker({
            dateFormat: 'dd-mm-yy',
            changeMonth: true,
            changeYear: true,
            firstDay: 1,
            yearRange: '0:+100',
            beforeShowDay: noWeekendsOrHolidays,
            onSelect: function( selectedDate ) {
                $d1 = $('#startdate').val();
                $d2 = $('#enddate2').val();

                $myDateParts1 = $d1.split("-");
                $myDateParts2 = $d2.split("-");

                $d1flip = new Date($myDateParts1[2], ($myDateParts1[1]-1), $myDateParts1[0]);
                $d2flip = new Date($myDateParts2[2], ($myDateParts2[1]-1), $myDateParts2[0]);

                $newdate1 = $d1flip.format("ddd mmm dd hh:MM:ss yyyy");
                $newdate2 = $d2flip.format("ddd mmm dd hh:MM:ss yyyy");

                // For Opera and older winXP IE n such              
                $d1new  = Date.parse($newdate1);
                $d2new  = Date.parse($newdate2);

                var weekend_count = 0;
                    for (i = $d1new.valueOf(); i <= $d2new.valueOf(); i+= 86400000){
                    var temp = new Date(i);
                        if (temp.getDay() == 0 || temp.getDay() == 6) {
                            weekend_count++;
                        }
                }

                var holidaycount = 0;
                    for (i = $d1new.valueOf(); i <= $d2new.valueOf(); i+= 86400000){
                    var temp = new Date(i);
                        if (**date in var natDays & is in selected difference range**) {
                            holidaycount++;
                        }
                }

            console.log(weekend_count);
            console.log(holidaycount);

                $('#days').val((Math.abs(($d2new-$d1new)/86400000) - weekend_count - holidaycount) + 1);
            }           
});

}, 'html');
return false;
});
} 
```

**编辑**

从答案中，我插入了函数并尝试了这个.... console.log(holidaycount); 返回 0 但我选择的日期应该是 10

```
 var holidaycount = 0;
                for (i = $d1new.valueOf(); i <= $d2new.valueOf(); i+= 86400000){
                var temp = new Date(i);
                    if (isHoliday(temp)) {
                        holidaycount++;
                }                       
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:59:31.257

**更新**：根据评论`getMonth()`进行相应修改。`getMonth() + 1`

```
**date in var natDays & is in selected difference range** 
```

*日期在选定的差异范围内*始终为真，就像`new Date(i)`在所述范围内一样（就像在循环中一样`weekend_count`：您不必费心检查您是否在该范围内）。

现在，检查里面的日期`temp`是否是假期，您可能想要使用一个函数（尽管您仍然可以直接在代码中执行此操作）：

```
/* dateObject is a JS Date object (e.g. dateObject = new Date();) */
/* country is the country we test holidays for */
function isHoliday(dateObject, country) {
  /* let's assume natDays is global, otherwise pass it as a third argument to this function */
  for(var i = 0; i < natDays.length; i++) {
    /* natDays[i][0] is a day, natDays[i][1] is a month, natDays[i][2] is a country indicator */
    if(parseInt(dateObject.getDate()) == parseInt(natDays[i][0]) && parseInt(dateObject.getMonth()) + 1 == parseInt(natDays[i][1]) && country.toLowerCase() == natDays[i][2].toLowerCase()) {
      /* found a day and a month matching our current Date's day and month: interrupt and tell caller dateObject is a holiday */
      return true;
    }
  }
  /* end of loop, we parsed all possible holidays without finding any match for our Date: tell caller the given Date is not a holiday */
  return false;
} 
```

现在把它放在你的代码中：

```
if (isHoliday(temp, 'uk')) {
  holidaycount++;
} 
```

这应该可以解决问题，尽管它可能需要一些重构（没有测试此代码），并且可能有更优雅的方法来做到这一点（例如修改 Date 对象的原型以将此函数用作对象的方法）。

# javascript - 将 jQuery 与 Magento 一起使用而不用 jQuery 替换 $？

> ID：12528474
> 
> 赞同：0
> 
> 时间：2012-09-21T10:08:52.513
> 
> 标签：javascript, jquery, magento

对于这个问题，我还没有真正找到明确的答案。我不得不编辑 jQuery 插件来替换 $ 的实例。至少对我来说，这是一个严重的问题。任何追随我的人，如果要保持升级我的工作的噩梦。我用了很多插件。

这真的是唯一的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:11:34.047

如果插件写得不好，那么我想你可以尝试使用该[`jQuery.noConflict`](http://api.jquery.com/jQuery.noConflict/)方法。

如果它写得正确，你就不需要它，因为它已经将所有`$`用法包装在一个匿名方法中：

```
(function( $ ) {
  $.fn.myPlugin = function() {

    // Do your awesome plugin stuff here

  };
})( jQuery ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T11:05:41.967

正如 Darin 所提到的，编写良好的插件被包装在匿名方法中。您也可以在自己的代码中使用相同的技巧，而不是使用`noConflict`- 例如，如果您有一个 JavaScript 文件，其中包含您不想更新的 jQuery 负载：

```
(function ($) {

    $(document).ready( function () {
        $('#myid').hide();
    });

    // and so on...

}(jQuery)); 
```

# html - Firefox，显示：-moz-box 在顶部添加奇怪的边距

> ID：12528475
> 
> 赞同：0
> 
> 时间：2012-09-21T10:08:54.357
> 
> 标签：html, firefox, css, flexbox

我有一个应该定期堆叠的 3 个块元素的列表。堆栈中的第二个元素是一个盒子元素，我使用了

```
display: -moz-box;
-moz-box-orient: horizontal; 
```

问题出在这个 box 元素上，因为它在自身顶部添加了一个奇怪的不需要的边距。您可以通过以下链接查看它[http://jsfiddle.net/frapontillo/ghA5X/](http://jsfiddle.net/frapontillo/ghA5X/)。

Chrome 中的正确行为：

![Chrome 中的正确行为](../Images/0cd609ac1f4f91abd013cb1d3c4bb786.png)

Firefox/Aurora 中的错误行为：

![Firefox 中的错误行为](../Images/208c2365561b69d1f663601600698d5d.png)

什么会导致这种情况？Chrome 运行良好，而 Firefox（发布渠道）和 Aurora 有这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:15:01.647

是什么导致了这个，至少部分地，那个`-moz-box`，`-webkit-box`意味着完全不同的事情，有完全不同的行为。前者是 XUL 盒子，其行为可以追溯到 10 多年前。后者是几年前早期 CSS flexbox 草案的实现。

如果可以避免的话，我建议不要使用它们，因为它们都不符合当前的 flexbox 草案。

# ios - Phonegap/Cordova 地理定位 iPhone

> ID：12528477
> 
> 赞同：1
> 
> 时间：2012-09-21T10:08:59.467
> 
> 标签：ios, cordova, geolocation, alert

我对使用用户地理位置的 phonegap 应用程序有一些问题。每次在应用程序中打开页面时，我们都会收到以下消息![iOS 上的错误消息](../Images/3af2d5895ed966848d579f77bcc8100f.png)

防止应用程序显示此提示会很好。

我们使用 Cordova 1.9，PhoneGap Build 并在 config.xml 中设置了访问位置的权限：

```
<feature name="http://api.phonegap.com/1.0/geolocation"/> 
```

我们无法像[这里](https://stackoverflow.com/questions/1673579/location-permission-alert-on-iphone-with-phonegap)描述的那样对 objectiv-c 代码进行深度更改，因为我们使用的是 PhoneGap Build！

我的代码如下所示...

```
function onDeviceReady() {

    // get position
    if (watchId == null) {
        killWatcher();
        window.setTimeout(function() {
            navigator.geolocation.getCurrentPosition(updateUserPosition, log, {
                enableHighAccuracy: false
            });
            watchId = navigator.geolocation.watchPosition(updateUserPosition, onGPSError, {
                frequency : 5000,
                maximumAge : 30000,
                enableHighAccuracy : true
            });
            localStorage.setItem("watchID", watchId);
        }, 1000);
    }
} 
```

该函数监听 ondeviceready 事件。

有谁知道如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T08:13:38.660

好的，这里的问题是 Cordova.js 并未包含在所有页面中。

# typo3 - TYPO3 - 从 RealURL 迁移到 CoolURI

> ID：12528478
> 
> 赞同：0
> 
> 时间：2012-09-21T10:09:04.337
> 
> 标签：typo3, realurl

我有一个存在多年的大型 TYPO3 实例。网页一直使用 RealURL，但现在我们想迁移到 CoolURI，因为我们在这方面有更好的体验。现在的问题是，即使在切换 URL 扩展后，所有旧链接也应该可用。CoolURI 文档指出

> **从 RealURL 迁移**
> 说话 URL 路径段 (tx_realurl_pathsegment) 字段与其值一起保留，但请确保它在元素中列出。

除了重定向等其他一些表之外，我还获得了表 tx_realurl_pathcache 和 tx_realurl_uniqalias。但我并不真正了解这两个表的功能和区别，也找不到任何深入的文档。所以我现在有点害怕我必须对整个扩展进行逆向工程，然后编写一个脚本来导出所有旧的 URL 并导入到新的 CoolURI 表中。因为我们也使用 tt_news 并且这些 URL 也必须工作。

那么有人有这方面的经验吗？CoolURI 是否会自动处理所有内容并且旧链接仍然有效，或者如果不是，也许有人可以给我一个关于数据库中所有 RealURL 表的详细解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:41:55.927

如果没有真正重要的原因（例如缺少功能），我不会迁移。为确保您能够正确生成所有链接，然后将它们映射到 CoolURI，您无论如何都需要学习 RU 逻辑。

原因：RU 动态生成链接 - 如果需要，然后将其缓存在表中，其他表存储指向公共页面的链接和其他用于扩展的链接。您只需要编写将访问每个页面的自定义扩展，以确保 RU 缓存每个可能的链接，然后将所有结果重写为重定向示例列表。恕我直言，不值得浪费时间。

**注意**，我不想说 CU 不好 :) 实际上我不知道。我只想记住伏尔泰最著名的一句话：“*好人是好人的敌人*”

# sql-server-2008-r2 - 为什么要构建 SSAS Cube？

> ID：12528485
> 
> 赞同：7
> 
> 时间：2012-09-21T10:09:27.880
> 
> 标签：sql-server-2008-r2, ssas, cube, olap-cube

我只是在寻找从关系数据构建 OLAP 多维数据集的最佳解释和理由。这就是关于性能和查询优化的全部内容吗？

如果您可以提供链接或指出构建多维数据集的最佳解释和原因，那就太好了，因为我们可以从关系数据库中做所有我们可以从多维数据集做的事情，并且多维数据集更快地显示结果。还有其他解释吗还是原因？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-01T10:13:03.813

应该使用多维数据集进行分析处理的原因有很多。

1.  速度。Olap wharehouses 是只读基础设施，提供的查询速度比 oltp 对应物快 10 倍。见[维基](http://en.wikipedia.org/wiki/Online_analytical_processing)
2.  多数据集成。在一个多维数据集上，您可以轻松地使用多个数据源，并通过许多自动化任务（尤其是当您使用 SSIS 时）将它们集成到单个分析系统中。见[elt进程](http://en.wikipedia.org/wiki/Extract,_transform,_load)
3.  最小代码。也就是说，您不需要编写查询。即使您可以编写 MDX（SSAS 中的多维数据集语言），BI Studio 也会为您完成大部分艰苦的工作。在我正在进行的一个项目中，起初我们使用 SSRS 为客户提供报告。这些查询很长而且很难进行，并且需要几天时间才能实施。他们的 SSAS 等效报告花了我们半个小时来制作，只写了几个简单的查询来转换一些数据。
4.  多维数据集提供报告和向上向下钻取，无需编写额外的查询。最终用户可以自动遍历维度，因为聚合已经存储在仓库中。这很有帮助，因为多维数据集的用户只需遍历其维度即可生成自己的报告，而无需编写查询。
5.  是商业智能的一部分。当您制作一个立方体时，它可以用于许多新技术并有助于实施 BI 解决方案。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T14:11:05.100

如果您想要**顶级**视图，请使用 OLAP。假设您有数百万行详细说明产品销售，并且您想知道每月的销售总额。

如果您想要**底层**细节，请使用 OLTP（例如 SQL）。假设您有数百万行详细说明产品销售情况，并希望检查一家商店在某一天的销售情况以发现潜在的欺诈行为。

OLAP 适用于大数字。你不会用它来检查字符串值，真的......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T01:54:58.493

这有点像问为什么在我们可以用汇编语言做所有事情时使用 JAVA/C++ ;-) 构建一个立方体（除了性能之外）就是给你[MDX 语言](http://www.iccube.com/support/documentation/mdx_tutorial/gentle_introduction.html)；这种语言比 SQL 具有更高级别的概念，并且更适合分析任务。也许[这个问题](https://stackoverflow.com/questions/10551541/what-makes-access-to-olap-cubes-datamarts-and-similar-datastructures-faster-t)提供了更多信息。

我的 2 美分。

# ios - iOS 应用提交依赖

> ID：12528487
> 
> 赞同：2
> 
> 时间：2012-09-21T10:10:00.920
> 
> 标签：ios, deployment, store, distribution, submission

我即将成立一个 iOS 应用提交部署团队。这里有几个问题：

1.  工程团队可以向部署团队发送存档而不是源代码吗？存档将由工程团队中指定的团队管理员使用分发证书进行代码签名

2.  我假设可以使用多个 mac 进行部署，这意味着导出分发证书的私钥并导入到另一个 mac 不会使原始 mac 无效。至于问题 1，从私钥“激活”mac 导出并使用分发证书签名的存档将在另一个私钥“激活”mac 上工作。通过按存档管理器中的“分发”按钮并选择“导出为 Xcode 存档”来导出存档，也可以由团队管理员完成。这些假设是否正确？

3.  从 Apple 文档中注意到，现在团队管理员还可以创建分发证书和分发配置文件。这是否意味着团队代理唯一要做的事情就是按存档管理器中的“分发”按钮并选择“提交到iOS应用商店”以及以下过程？

如果有人能回答这些问题，非常感谢。主要目标是确定角色和机器依赖性是否存在限制

# asp.net - DevExpress ASPxGridView 中的限制结果

> ID：12528488
> 
> 赞同：2
> 
> 时间：2012-09-21T10:10:01.520
> 
> 标签：asp.net, devexpress, aspxgridview

我想根据 ASPxGridView 中的最高结果显示数据结果，是否有任何属性可以处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:26:42.517

有多种方法可以解决这个问题，服务器端、UI 端、混合......

服务器端意味着您在 SQL Server 上有一个存储过程，其中包含选择中的 TOP x。

UI 端意味着您在 Grid 中指定分页和 X 的 pageSize ，即使这样做也不是很好，因为无论如何 SQL Server 都会通过网络将所有记录返回到 Web 服务器。

实现混合解决方案的许多不同方法，例如使用 bindToLinq 方法或其他 ORM 方法，这些方法会根据网格的设置和使用情况为您生成 TOP X。

作为介绍，请向我们展示您如何获取数据并将网格绑定到结果集。

# c++ - qdbusxml2cpp 的最大参数数

> ID：12528490
> 
> 赞同：0
> 
> 时间：2012-09-21T10:10:07.160
> 
> 标签：c++, linux, qt

我正在使用 Qt 在 linux 构建机器上扩展 DBus 接口。现有界面工作正常，我需要添加另一个参数

XML生成方法生成为：

```
<method name="get_card_info">
  <arg type="b" name="success" direction="out" />      
  <arg type="s" name="version" direction="out" />
  <arg type="s" name="serial" direction="out" />
  <arg type="s" name="BeginDate" direction="out" />
  <arg type="s" name="ExpirationDate" direction="out" />
  <arg type="s" name="RenewalDate" direction="out" />
  <arg type="s" name="ZipCode" direction="out" />
  <arg type="s" name="ZipCodeExtension" direction="out" />
  <!--  <arg type="u" name="cardStatus" direction="out" />  -->
</method> 
```

代码工作正常，直到我取消注释掉注释行，此时 qdbusxml2cpp 报告：

```
interface_dbus_p.h:39:103: error: wrong number of template arguments (9, should be 8) 
```

即使我注释掉对此函数的所有调用也是如此；确实这是在链接代码甚至被编译之前；这全部来自**qdbusxml2cpp**调用。

如果我将其更改为六个、七个或八个项目，XML 将编译，但如果我将其增加到九个它会崩溃。

除了 XML 代码，我没有更改任何其他配置文件。

怎么了？是否有八个参数的限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:21:56.707

找到了; 是的，有一个限制，感谢[QDBusPendingReply](http://doc.qt.digia.com/4.7-snapshot/qdbuspendingreply.html#details)

*“QDBusPendingReply 是一个模板类，最多有 8 个模板参数。这些参数是用于提取回复数据内容的类型。”*

所以对我来说不超过 8 个参数:(

# android - 在图像视图中设置的位图没有得到填充父级

> ID：12528495
> 
> 赞同：2
> 
> 时间：2012-09-21T10:10:35.707
> 
> 标签：android

我已经使用这个压缩了图像：

```
 private Bitmap decodeFile(InputStream is){
        //decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(is,null,o);

        //Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE=100;
        int width_tmp=o.outWidth, height_tmp=o.outHeight;
        int scale=1;
        while(true){
            if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                break;
            width_tmp/=2;
            height_tmp/=2;
            scale*=2;
        }

        //decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(is, null, o2);
    } 
```

我在图像视图中设置这个位图，但它在顶部和底部留下了一些空间。

我试过这个：

```
 img.setLayoutParams(new FrameLayout.LayoutParams(FrameLayout.LayoutParams.MATCH_PARENT,FrameLayout.LayoutParams.MATCH_PARENT));
    img.setImageBitmap(bm); 
```

但没有用。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T10:14:28.063

这可能会解决问题。

```
iv.setScaleType(ScaleType.FIT_XY); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T10:18:02.430

在你的活动中使用这个，

```
mImageView.setScaleType(ScaleType.FIT_XY); 
```

或在您的布局中，

```
android:scaleType="fitXY" 
```

# javascript - 同一页面上有两个日期选择器？

> ID：12528498
> 
> 赞同：1
> 
> 时间：2012-09-21T10:10:47.710
> 
> 标签：javascript

我想这应该可行，但事实并非如此。我哪里做错了？

```
<link rel="stylesheet" type="text/css" media="all" href="jsDatePick_ltr.min.css" />

<script type="text/javascript" src="jsDatePick.min.1.3.js"></script>

<script type="text/javascript">
window.onload = function(){
    new JsDatePick({
        useMode:2,
        target:"inputField",
        dateFormat:"%j-%n-%Y"
    });
};
</script> 
```

这是日期选择器脚本，可以在单个页面上使用一个日期选择器，但我的要求是有两个。

我做了：

```
 From Date :<input type="text" size="12"  name="date1" id="inputField"    
readonly="readonly"/>  

To Date :<input type="text" size="12"  name="date2" id="inputField"  
readonly="readonly"/> 
```

但它不起作用。日期选择器仅显示在第二个输入字段中。如果我正在创建两个 id，那么我是否必须两次创建相同的函数？我也这样做了，但它没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:22:37.420

**同一页面中的两个元素不能相同** `id`。您可以尝试以下代码：

```
<script type="text/javascript">
window.onload = function(){
 new JsDatePick({
    useMode:2,
    target:"inputField",
    dateFormat:"%j-%n-%Y"
});

 new JsDatePick({
    useMode:2,
    target:"inputField2",
    dateFormat:"%j-%n-%Y"
});
};
</script> 
```

HTML 可以如下所示：

```
 From Date :<input type="text" size="12"  name="date1" id="inputField"    
readonly="readonly"/>

To Date :<input type="text" size="12"  name="date2" id="inputField2"  
readonly="readonly"/> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T10:13:51.787

尝试为不同的时间选择器使用不同的目标。

```
<script type="text/javascript">
window.onload = function(){
 new JsDatePick({
    useMode:2,
    target:"inputField",
    dateFormat:"%j-%n-%Y"
});
 new JsDatePick({
    useMode:2,
    target:"inputField2",
    dateFormat:"%j-%n-%Y"
});

};
</script> 
```

# vba - 如何根据 VBA 中的内容更改单元格

> ID：12528501
> 
> 赞同：2
> 
> 时间：2012-09-21T10:11:05.840
> 
> 标签：vba, excel

我有很多包含一些数字和其他不相关字符的单元格。例如，单元格可能看起来像：`65f`或 as `11,345asd`。

我的目标是删除这些单元格中除数字之外的所有内容，以便我可以使用这些数字进行进一步计算。我在不同的网站上发现了很多类似的问题，但它们非常具体，我仍然不明白如何正确地做到这一点。

所以问题是如何根据内容使用更改单元格甚至一系列单元格？我有一些想法如何使用字符串函数替换来做到这一点。但是没有什么好看的。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T10:33:55.923

使用正则表达式的另一种方法

**添加参考**

添加对*Microsoft VBScript 正则表达式 5.5*的引用。见下图

![在此处输入图像描述](../Images/28ef58048fee9a8332b005181232f60f.png)

**代码：**将其粘贴到模块中

```
Option Explicit

Function GetNumbers(rng As Range) As Variant
    Dim StrSample As String
    Dim myRegExp As RegExp
    Dim myMatches As MatchCollection
    Dim myMatch As Match

    StrSample = rng.Value

    Set myRegExp = New RegExp

    With myRegExp
        .Pattern = "[^0-9]"
        .IgnoreCase = True
        .Global = True
    End With

    Set myMatches = myRegExp.Execute(StrSample)

    For Each myMatch In myMatches
      Debug.Print myMatch.Value
      StrSample = Replace(StrSample, myMatch.Value, "")
    Next
    GetNumbers = StrSample
End Function 
```

**屏幕截图**：

![在此处输入图像描述](../Images/b663be3cf42c1d0f40d82c2d3cc34dc6.png)

**编辑**

这是一个更短的版本，它根本不使用循环。

```
Function GetNumbers(rng As Range) As Variant
    Dim myRegExp As RegExp
    Set myRegExp = New RegExp
    myRegExp.Pattern = "[^0-9]"
    myRegExp.Global = True
    GetNumbers = myRegExp.Replace(rng.Value, "")
End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T10:39:56.867

一个小功能

```
public function TONUM(str As string) As string
dim i As long
for i = 1 To len(str)
    if not mid$(str, i, 1) Like "[0-9]" then mid$(str, i, 1) = "?"
next
TONUM = replace$(str, "?", "")
end function 
```

# java - Java-EE：如何在三层应用环境中设计数据流？

> ID：12528502
> 
> 赞同：2
> 
> 时间：2012-09-21T10:11:06.383
> 
> 标签：java, jpa, glassfish, lazy-loading, 3-tier

我目前正在使用以下组件开发分布式应用程序：

1.tier：数据库-服务器-> MySQL 5.5

2.tier：应用服务器-> Glassfish 3.1.2.2

3.tier：独立 Fat-Client -> Java-SE (JRE 6)

我使用 JPA 2.0 (eclipse-link) 作为持久性提供程序，目前使用序列化在第二层和第三层之间传递 @Entity bean。我使用静态编织是为了从 JPA 支持的延迟获取中受益。

我的问题是，由于 2nd/3rd 层之间的序列化延迟获取将不起作用！这会导致大量的网络流量，因为我的一个实体 bean 的每次序列化都要求在通过网络发送之前获取与其他实体/表的所有关系。

在这样的设置中，我如何从 JPA 延迟获取中受益？是否有不需要引入轻量级 DTO/DAO 的解决方法（这会给我的项目增加巨大的复杂性）？

非常感谢您提前提供的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T11:53:54.820

根据我对类似架构的经验，对于一个相当大的项目，DTO 是不可避免的，应该在必要时使用。

使用分离的实体，特别是当它们与其他实体有多个关联时，不仅会由于数据库加载和序列化而导致性能问题，而且还会带来巨大的复杂性。事实上，除非代码有非常好的文档，否则在表示层中很难知道给定的关联是否已加载，这会导致大量延迟初始化异常。

如果您将序列化的分离实体从表示层发送回服务层，情况会更糟，因为这样您最终会得到混合使用分离实体和附加实体的代码，这会使事情变得更加复杂。

因此，我的建议是：

*   如果实体很简单并且 UI 层不需要太多加载的关联，则将实体从服务层转移到 UI 层。始终记录哪些关联已初始化，哪些未初始化。如果关联过多，请使用 DTO 和即席查询从数据库中加载必要的数据。
*   当需要大量实体时（例如，返回 O(100) 或更多结果的搜索表单的结果），将 DTO 从服务层转移到 UI 层。使用即席查询加载请求的数据。
*   避免将实体从表示层转移到服务层。如果这样做，请确保您在服务层中做的第一件事是从数据库重新加载实体的附加版本，或合并接收到的实体，以便始终使用附加实体。调试服务层中抛出的延迟初始化异常并由使用已在几分钟前由前一个屏幕加载的分离实体引起，这不是一件令人愉快的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T09:52:02.060

我们通过使用负载组和查询提示解决了这个问题，以便定义应该在特定查询中获取的关系的深度。这需要延迟获取，因此在使用 eclipse-link 作为 JPA 提供程序时需要进行编织。

这是一个简短的示例：

特定外观上的服务器端查询：

```
@Override
public List<Contact> query(LoadGroup group) {
    TypedQuery<Contact> query = em.createQuery("SELECT c FROM Contact c", Contact.class);
    if(group!=null) { query.setHint(QueryHints.LOAD_GROUP, group); }
    return query.getResultList();
} 
```

对该特定外观的客户端查询：

```
LoadGroup group = new LoadGroup();
group.addAttribute("telephone");
group.addAttribute("address.street");
List<Contact> contacts = remoteContactFacade.query(group); 
```

在此示例中，Contact 表与 Address 和 Telephone 表具有进一步的多对一关系。通过使用点符号，您可以定义应该获取的深度。

希望这可以帮助。

# delphi - Delphi XE 断开或终止数据快照客户端会话

> ID：12528504
> 
> 赞同：2
> 
> 时间：2012-09-21T10:11:11.340
> 
> 标签：delphi, delphi-xe, datasnap

我们正在使用 Delphi XE 开发一个新的 Datasnap 服务器 (tcp/ip) 并遇到了问题。我们不知道客户端何时以异常方式断开连接，即。连接断开或客户端电脑重新启动。

当客户端建立连接时，我们将其详细信息保存在列表中，如下所示：

```
TClientInfo = record
  Id: integer;
  Session: TDSSession;
  LastSeen: TDateTime;
end;
...
ClientInfoList: TDictionary<Integer, TClientInfo>;
...
//OnConnect    
ClientInfo.ClientId := ClientId;
ClientInfo.Session := TDSSessionManager.GetThreadSession;
ClientInfo.LastSeen := Now();
ClientInfoList.Add(ClientId, ClientInfo); 
```

理想情况下，我们希望遍历 ClientInforList 并断开任何 30 分钟未见的客户端，但这是我遇到问题的地方。

我试图断开或终止客户端会话，但没有任何运气。

```
for i in ServerContainer.ClientInfoList.Keys do
  begin      
    ClientInfo := TClientInfo(ServerContainer.ClientInfoList[i]);
    ClientInfo.Session.Terminate;
  end; 
```

在 Delphi XE 中有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:53:11.873

您不能在 XE 中从服务器端终止 TCP/IP 会话。Mat DeLong 写了一篇文章，解释了在 XE 中使用 HTTP 时如何从服务器端断开会话，并以“**在 XE 中此功能目前仅适用于 HTTP 连接。在 XE2 中，它也适用于 TCP/IP。** ”

*   [服务器端会话管理](http://mathewdelong.wordpress.com/2010/11/30/server-side-session-management/)

我们在 XE 中遇到了同样的问题。我们尝试在会话线程中使用和计时器，如果用户在*x*小时内`LifeCycle := Session`没有看到，则可以自行终止它。但是我们不能从内部终止线程。而且我们无法从主线程枚举线程连接。

 *所以我们将其设置`LifeCycle`为 [Server]，这样我们就可以自己管理连接列表。我们必须处理使用 [Session] 自动发生的所有事情`LifeCycle`，但至少我们可以循环浏览连接列表并删除`LastSeen`超过*x*小时的连接。

如果升级到 XE2（现在是 XE3）是一种选择，它可能是最好的选择（因此您可以使用会话管理方法进行 [Session] 连接）。

如果您无法升级，那么从服务器端终止会话的唯一方法是设置`LifeCycle`为 [Server] 并自己进行会话管理。*

# objective-c - iOS 在处理触摸事件之前执行操作

> ID：12528507
> 
> 赞同：1
> 
> 时间：2012-09-21T10:11:21.397
> 
> 标签：objective-c, ios, uigesturerecognizer, uipangesturerecognizer

我正在尝试重新创建 Facebook 滑出菜单技巧（是的，我知道已经有很多库了）。

当用户触摸屏幕上的一个按钮时，一个新的视图控制器被切换，并且前一个屏幕的渲染位图显示在这个新视图的前景中。uiimageview 附有一个平移手势识别器，以允许它在屏幕上移动。

目前它需要两次触摸来激活手势识别器，一次是为了引入新的视图控制器，一次是为了平移手势来移动 uiimageview。

我的问题是，在触摸时我可以引入新的视图控制器，然后将触摸事件传递给 uiimageview 吗？或者有什么其他的技巧可以帮上忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T10:30:02.703

我还没有完全做到这一点，但是我将 UIViewController 子类化了，所以根视图控制器永远不会改变，只是显示的内容。

# android - Spinner - 关注第一个项目

> ID：12528510
> 
> 赞同：19
> 
> 时间：2012-09-21T10:11:29.773
> 
> 标签：android, android-layout, android-widget, android-spinner

我使用带有光标适配器的下拉微调器。它包含例如 1 - 100 个项目。我选择例如项目 50。项目被选中。下次当我打开微调器时，第一个可见行是第 50 项。当我打开微调器时，如何实现它会聚焦到第一个项目/第一个可见项目将是第 1 项？

我的意思是像在列表中自动向上滚动一样，所以下拉列表中的第一个可见项目是第一个而不是选中的。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-27T07:30:33.960

您可以`Spinner`通过扩展它并覆盖负责设置/显示值列表的两种方法来做您想做的事情：

```
public class CustomSpinnerSelection extends Spinner {

    private boolean mToggleFlag = true;

    public CustomSpinnerSelection(Context context, AttributeSet attrs,
            int defStyle, int mode) {
        super(context, attrs, defStyle, mode);
    }

    public CustomSpinnerSelection(Context context, AttributeSet attrs,
            int defStyle) {
        super(context, attrs, defStyle);
    }

    public CustomSpinnerSelection(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public CustomSpinnerSelection(Context context, int mode) {
        super(context, mode);
    }

    public CustomSpinnerSelection(Context context) {
        super(context);
    }

    @Override
    public int getSelectedItemPosition() {
        // this toggle is required because this method will get called in other
        // places too, the most important being called for the
        // OnItemSelectedListener
        if (!mToggleFlag) {
            return 0; // get us to the first element
        }
        return super.getSelectedItemPosition();
    }

    @Override
    public boolean performClick() {
        // this method shows the list of elements from which to select one.
        // we have to make the getSelectedItemPosition to return 0 so you can
        // fool the Spinner and let it think that the selected item is the first
        // element
        mToggleFlag = false;
        boolean result = super.performClick();
        mToggleFlag = true;
        return result;
    }

} 
```

它应该适用于您想要做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T10:18:06.297

您可以将 Spinner 的选择设置为第一项，如下所示：

```
yourspinner.setSelection(0); 
```

您可能希望在 onStart() 方法中执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T10:37:57.520

这段简短的代码将为您完成工作。

```
 int prevSelection=0;
    spSunFrom = (Spinner) findViewById(R.id.spTimeFromSun);
    spSunFrom.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            prevSelection = spSunFrom.getSelectedItemPosition();
            spSunFrom.setSelection(0);
            return false;
        }
    });
    spSunFrom.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            if(arg2==0)
                spSunFrom.setSelection(prevSelection);
            prevSelection = arg2;

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            spSunFrom.setSelection(prevSelection);
        }
    }); 
```

# jquery - 用图像的 src 替换值？

> ID：12528514
> 
> 赞同：0
> 
> 时间：2012-09-21T10:11:34.383
> 
> 标签：jquery, replace, preview

我正在尝试获取图像的 src 并将其附加到文本输入的值：

```
$(".detail-template").on("click", ".btn-primary", function(e) {
    var image = $(".detail_template").find("img").attr("src");
    $('input[value="stock-ref"]').val(image);
}); 
```

但它只是导致一个空白的输入字段？

网页在这里： http: [//fuzzionwallart.co.uk/store2/vinyl-wall-art/vinyl-wall-art-contemporary/vinyl-wall-art-buddah](http://fuzzionwallart.co.uk/store2/vinyl-wall-art/vinyl-wall-art-contemporary/vinyl-wall-art-buddah)

基本上，我们希望获取预览的 src 并将其放入文本输入中，以便我们知道客户选择了哪个图像。但我无法让它发挥作用来挽救我的生命！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:32:24.270

你需要检查你的 html 源代码，你的 div.detail-template 没有任何 IMG。所以这就是你的代码不能正常工作的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:38:21.773

也许除了 Anton 的回答之外，您的输入 jQuery 选择器看起来是错误的（至少如果您期望它不止一次地工作）。

你的意思是通过它的名字或ID来选择它吗？

```
$('input[name="stock-ref"]').val(image); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:36:32.620

首先，您正在搜索的 div 被归类为“detail-template”，而不是“detail_template”。然后我能找到的 div.detail-template 中唯一的 img 标签有一个空的“src”属性......

# asp.net - Asp.Net MVC 3 验证 2 个依赖字段

> ID：12528515
> 
> 赞同：0
> 
> 时间：2012-09-21T10:11:40.037
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, validation

假设我有一个表单，其中包含收集未来会议数据的字段（不是真正的领域，但足以解决这个问题）。验证的一部分是新事件在那一年只能发生一次，例如，如果您在 2012 年举行了“stackoverflow getmessyandrunk 会议” - 不应允许用户输入具有相同名称的新事件并且年...

现在 - 我到目前为止尝试的是为每个字段添加一个远程验证器：

一个用于使用 AdditionalFields 属性包含年份字段的事件名称字段，另一个用于使用 AdditionalFields 包含事件名称字段的年份字段。

它不起作用 - 如果我尝试添加一个具有相同名称和年份的事件，它会在年份字段中添加一个错误，更正它会修复它，然后再次尝试它会在名称字段和年份字段中添加一个错误，更正使组合唯一的名称字段只会从名称字段中删除错误 - 它像这样继续......

其他人如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T20:00:16.273

如果您更喜欢使用数据注释进行验证，我建议您只使用 Codeplex 上提供的 Foolproof 验证库：[https ://foolproof.codeplex.com/](https://foolproof.codeplex.com/)

除其他外，它支持以下“必需的”验证属性/装饰：

```
[RequiredIf]
[RequiredIfNot]
[RequiredIfTrue]
[RequiredIfFalse]
[RequiredIfEmpty]
[RequiredIfNotEmpty]
[RequiredIfRegExMatch]
[RequiredIfNotRegExMatch] 
```

开始很容易：

*   从提供的链接下载包
*   添加对包含的 .dll 文件的引用
*   导入包含的 javascript 文件
*   确保您的视图从其 HTML 中引用包含的 javascript 文件，以进行不显眼的 javascript 和 jquery 验证。

如果你不喜欢通过用验证属性装饰你的域类来混合你的域和验证逻辑，你总是可以选择强大的流式验证。您可以在此处找到它的库： [https](https://fluentvalidation.codeplex.com/) ://fluentvalidation.codeplex.com/ 不幸的是，它只是服务器端的，但如果分离关注点对您很重要，这是一个合适的选择......并且上下文不会因验证绑定到特定字段。（见这里： http: [//www.codeproject.com/Articles/326647/FluentValidation-and-Unity](http://www.codeproject.com/Articles/326647/FluentValidation-and-Unity)）

# mysql - 如何按 x where (x=col3 if col3!=null, else x=col2) 对 MySQL 进行排序？

> ID：12528516
> 
> 赞同：2
> 
> 时间：2012-09-21T10:11:42.217
> 
> 标签：mysql

假设，一个选择操作给出了 3 列：col1、col2 和 col3。col2 和 col3 是时间类型。我希望结果按时间戳排序。对于每条记录，如果 col3 不为空，则时间戳等于 col3，否则为 col2。这该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:30:38.703

使用内置函数[`ifnull()`](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_ifnull)：

```
select
...
order by ifnull(col3, col2) 
```

`ifnull()`如果不为null，则返回第一个参数，否则返回第二个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:49:33.873

您可以使用子查询来做到这一点。在内部查询中，您检查 col3 是否为 NULL，然后“选择”col3 或 col2 作为“my_time”。然后，在外部查询中，您按“my_time”排序。

子查询示例：

```
SELECT <whatever>, IF (col3 IS NOT NULL, col3, col2) AS my_time FROM <table> 
```

然后，外部查询：

```
SELECT * FROM (
    SELECT <whatever>, IF (col3 IS NOT NULL, col3, col2) AS my_time FROM <table>
) AS <temp_table> ORDER BY <temp_table>.my_time 
```

# jquery - Jquery ID 返回对象而不是字符串

> ID：12528522
> 
> 赞同：2
> 
> 时间：2012-09-21T10:11:57.993
> 
> 标签：jquery, attributes

我有一段 jQuery 代码，它检测元素何时更改然后返回该元素的 ID：

HTML：

```
<select name="blah" class="adropdown" id="12345">
<option value="0">Select an option:</option>
<option value="1">test</option>
</select> 
```

jQuery：

```
$('.adropdown').change(function(){
    var num = $(this).attr('id');
    alert(num);
}); 
```

但是，当我更改下拉列表时，它不会提醒 ID，而是提醒“[object Object]”。这应该很简单——任何想法为什么它不起作用？

谢谢，G

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:38:28.590

这将始终警告 12345，因为“id”是选择标签的属性。

如果要提醒每个下拉列表的值，请使用 value 属性。

例如：

```
$('.adropdown').change(function(){
var num = $(this).attr('value');
alert(num);
});

<select name="blah" class="adropdown" id="12345">
<option value="0">Select an option:</option>
<option value="1">test</option>
<option value="2">test_1</option>
</select> 
```

希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:24:01.897

你的代码对我来说很好。但我认为您有另一个具有相同 ID 的标签。所以确保页面上只有一个 id = 12345 的元素

# php - 分解数组结果和回显。

> ID：12528523
> 
> 赞同：0
> 
> 时间：2012-09-21T10:11:59.950
> 
> 标签：php, arrays, split, return, explode

一直在做一个小项目，并且在我试图开始工作的部分卡住了。不确定我是否采取了错误的方法，还有更好的方法，但我们开始了。

我在一个文本文件中有数据，可以写入和读取。示例：（值由 \t 分隔）

```
S1684    This is a status    share   20/9/2012           share; 
```

我正在做的是搜索文件，并将匹配的任何内容作为数组的一部分返回。我的搜索工作正常，并且可以返回包含搜索查询的每一行，唯一的问题是爆炸结果，以便我可以正确格式化返回的内容。这是处理它的主要部分。

```
if(preg_match_all($pattern, $data, $matches)){
       echo "<h3>Results:</h3>";

       echo implode("<p>\r\n", $matches[0])."</p>";

       foreach ($matches as &$value) {
        $date =0;
         list($statusCode, $status, $share, $date, $like, $comment, $share) = explode("\t", $date);

         echo "<h4>Status:".$status."</h4>";
         echo "<h4>Status Code:".$statusCode."</h4>";
       }

    } 
```

我收到的错误是未定义的偏移错误，那么我究竟如何才能爆炸（或以任何其他方式拆分数组结果）以正确回显它？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:28:05.337

难道不应该`explode("\t", $value);`代替`explode("\t", $date);`

您`$value`用于在迭代期间保存数组的当前值。`$date`在迭代中总是被赋值为 0，并且试图爆炸它会导致错误。

# php - 如果 (!empty($_POST)) 不工作

> ID：12528524
> 
> 赞同：5
> 
> 时间：2012-09-21T10:12:00.530
> 
> 标签：php, json, forms, post

`JSON-events.php`我有一个带有作为`action`( )运行的提交按钮的 php 表单（要遵循的代码`method = POST`）。在 JSON 事件代码中，我正在测试表单是否已使用`if (!empty($_POST))`. 我的问题是 JSON 事件代码似乎无法识别`$_POST`。

这是表单侧代码部分。

```
<div class="simple_overlay" id="searchform">
<form id="myform" class = "cols" action="json-events.php" method="post" >

    <h3>Search</h3>

    <p>
      <label>address/postcode *</label>
      <input type="address" id="searchaddress" />
    </p>
    <p>
    <label for="amount">maximum distance:</label>
    <input type="text" id="amount" value="5 miles" style=" border:0; color:#43a8c4; font-weight:bold;" />
    </p>

    <div id="slider-range-min" style="width:130px; margin-left:4px; margin-bottom:20px"></div>

    <p id="terms">
      <label>Category 1</label>
      <input name="cat1" type="checkbox" value="1" checked="checked"/>
    </p>
    <p id="terms">
      <label>Category 2</label>
      <input name="cat2" type="checkbox" value="1" checked="checked"/>
    </p>
      <p id="terms">
      <label>Category 3</label>
      <input name="cat3" type="checkbox" value="1" checked="checked"/>
    </p>
      <p id="terms">
      <label>Category 4</label>
      <input name="cat4" type="checkbox" value="1" checked="checked"/>
    </p>
      <p id="terms">
      <label>Category 5</label>
      <input  name="cat5" type="checkbox" value="1" checked="checked"/>
    </p>
      <p id="terms">
      <label>Category 6</label>
      <input name="cat6" type="checkbox" value="1" checked="checked"/>
    </p>
      <p id="terms">
      <label>Category 7</label>
      <input name="cat7" type="checkbox" value="1" checked="checked"/>
    </p>
      <p id="terms">
      <label>Category 8</label>
      <input  name="cat8" type="checkbox" value="1" checked="checked"/>
    </p>
      <p id="terms">
      <label>Category 9</label>
      <input name="cat9" type="checkbox" value="1" checked="checked"/>
    </p>
      <p id="terms">
      <label>Category 10</label>
      <input name="cat10" type="checkbox" value="1" checked="checked"/>
    </p>
    <p>
      <input type="hidden" name="searchlat" id="searchlat"/>
    </p>
    <p>
      <input type="hidden" name="searchlong" id="searchlong" />
    </p>

    <input type="submit" name="search" id="search"/>
    <input type="button" value="Check Address" onclick="codeAddressSearch()"/>
    <button type="reset">Reset</button>

</form>
</div> 
```

这是JSON的顶部......

```
if (!empty($_POST)) { 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T11:21:49.393

`empty()`如果`$_POST`没有任何值（*空数组*）将起作用，但是在您提交没有任何值的情况下，您仍然会得到一个如下所示的数组并且它不是空的：

```
    大批
    (
        [搜索] =>
        [搜索长] =>
        [搜索] => 提交查询
    )
```

`empty()``$_POST`仅当返回时才会返回 true

```
Array (

) 
```

但这不会发生，因为每个表单都会有一个*Sumbit*按钮。

只需使用

```
if($_POST) {
//php code
} 
```

它会解决你的问题。

[通过访问http://php.net/manual/en/function.empty.php](http://php.net/manual/en/function.empty.php)了解更多关于 empty()

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-21T10:14:45.890

不使用

```
if (!empty($_POST)) { 
```

检查是否有一个帖子完成使用这个：

```
if( $_SERVER['REQUEST_METHOD'] == 'POST') { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T11:39:24.200

可以与 $_POST 一起使用的条件

```
if(count($_POST)>0){
    //...
}
if(isset($_POST['field_name'])){
    //...
}
if( $_SERVER['REQUEST_METHOD'] == 'POST') {
    //..
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T10:14:21.807

试试这个

```
 if(!empty($_POST['search']) && isset($_POST['search'])) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T10:15:11.480

检查 $_POST 数组中的实际值要好得多。例如。

```
if (!empty($_POST['search'])) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T10:57:15.497

如果发布值 0，则使用 empty() 将失败所以最好使用
`isset($_POST['FIELD_NAME'])`

# java - Netbeans 7.2 挂在“正在加载模块...”

> ID：12528527
> 
> 赞同：8
> 
> 时间：2012-09-21T10:12:08.780
> 
> 标签：java, startup, netbeans-7, netbeans-plugins

我最近在 Ubuntu 10.04 LTS 上安装了 Netbeans 7.2，并想添加一些插件。我得到提示安装一些更新并同意。下载这些更新需要很长时间，我不得不手动下载一些软件包，但这可能是我的公司网络和代理的一些问题。当它最终成功完成时，系统提示我重新启动 IDE，所以我这样做了。启动出现了，我收到消息说某些模块的版本错误，必须禁用它们。我单击“禁用模块”，然后启动挂起，仅通知“正在加载模块...”。尝试了几次，但结果总是一样的。甚至尝试重新安装 IDE，但整个过程看起来都一样。

任何想法如何使它工作？

# java - 使用 Java 访问方法和参数历史记录

> ID：12528530
> 
> 赞同：3
> 
> 时间：2012-09-21T10:12:19.413
> 
> 标签：java

我目前在 Liferay 的一个项目中工作，我希望能够访问我的方法和参数，这些方法在历史记录中给出。这是在某些代码块中抛出异常的情况下完成的。

我已经搜索过并且很容易获得方法名称历史记录（Thread.currentThread().getStackTrace();），但我也想知道这些方法的参数是什么。

例如：

```
public class A {
    public static void main(String[] Args) {
        try {
            System.out.println(new B().someMethod(5));
        } catch (Exception e) {
            //GET HISTORY
        }
    }
}

public class B {
    public int someMethod(int i) throws Exception {
        i += 2;
        throw new Exception("Expected Exception to Generate History Search");
        return i;
    }
} 
```

是否有可能在 A 类中学习如何在捕获异常时获取所有数据？所以，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:28:08.747

您可以使用[面向方面的编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)。以[AspectJ](http://www.eclipse.org/aspectj/doc/released/progguide/starting.html)为例。

以下方面将在您的程序执行期间跟踪所有公共方法调用。这可以根据您自己的要求进行微调。例如，可以调整切入点以仅使用您自己的包。打印语句可以更改为使用一些日志框架。

```
public aspect Trace {
    pointcut publicMethodExecuted(): execution(public * *(..));

    after(): publicMethodExecuted() {
        System.out.printf("Enters on method: %s. \n", thisJoinPoint.getSignature());

        Object[] arguments = thisJoinPoint.getArgs();
        for (int i =0; i < arguments.length; i++){
            Object argument = arguments[i];
            if (argument != null){
                System.out.printf("With argument of type %s and value %s. \n", argument.getClass().toString(), argument);
            }
        }
        System.out.printf("Exits method: %s. \n", thisJoinPoint.getSignature());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:23:36.067

您应该考虑在您的应用程序中使用日志记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:27:14.100

您绝对应该考虑登录您的应用程序。如果您想避免代码过于混乱（我个人讨厌`log.debug(...)`每个方法开始和结束时的常量语句），请考虑使用面向方面的编程（谷歌它以获得大量好的指南，或者有一个不错的 aop 指南[在此处](http://www.javacodegeeks.com/2011/01/aspect-oriented-programming-spring-aop.html)使用 Spring ，只需向下滚动到`LoggingAspect`)，这将允许您简单地注释要记录的方法或整个类。

# twitter - Twitter“Tweet”按钮 IE7 Bug（截断文本）

> ID：12528535
> 
> 赞同：1
> 
> 时间：2012-09-21T10:12:52.667
> 
> 标签：twitter, twitter-button

我正在尝试使用网站上的 Twitter“推文”按钮。它适用于所有浏览器，但在 IE 7 中，它不显示完整宽度。`padding-left`除了LinkedIn 按钮上的一些用于间距的CSS 之外，没有其他 CSS 到位。

Twitter 说他们几个月前[在这里](https://dev.twitter.com/issues/200)解决了这个问题，但我使用的是他们开发者网站上的最新代码，但没有运气。

我也尝试过[StackOverflow](https://stackoverflow.com/questions/10084106/tweet-button-not-displayed-properly-in-ie7-but-working-fine-in-mozilla-chrome-a)建议使用的解决方案`.twitter-follow-button {width: 150px !important;}`，但这也没有解决问题。下图显示了它在 IE7 中的外观，文本被错误地缩短了。

![IE7 中的截断 Twitter 按钮](../Images/c3f6e27a86a803ee231e92006f78fa6e.png)

任何关于下一步去哪里的建议或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:15:02.853

看起来您正在使用 Twitter 分享按钮而不是 Twitter 关注按钮。因此，引用的 stackoverflow 线程建议的使用的类将不起作用。你应该使用：

```
.twitter-share-button {width: 150px !important;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:41:51.800

问题在于嵌入的 Twitter 按钮的周围环境，因此 CSS 中没有它的迹象。感谢您的回复。

# java - 如何找到一个月的星期几

> ID：12528537
> 
> 赞同：6
> 
> 时间：2012-09-21T10:12:53.247
> 
> 标签：java

我想知道某天是一个月中的哪一周。例如 20-Sep-2012 落在 9 月的第 4 周，但下面的代码将其显示为 3，这是不正确的。系统将天数除以 7 并返回输出，这不是我需要的。我在 Joda API 中搜索过，但找不到解决方案。请让我知道有什么办法可以算出一个月的星期几，一天的到来

```
 Calendar ca1 = Calendar.getInstance();

    ca1.set(2012,9,20);

    int wk=ca1.get(Calendar.WEEK_OF_MONTH);
    System.out.println("Week of Month :"+wk); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T10:15:44.240

This is due to two reasons:

The first one is this (from the [API](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)):

> *The first week of a month or year is defined as the earliest seven day period beginning on getFirstDayOfWeek() and containing at least getMinimalDaysInFirstWeek() days*

The default value for this varies (mine was 4), but you can set this to your preferred value with

[Calendar.setMinimalDaysInFirstWeek()](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#setMinimalDaysInFirstWeek%28int%29)

The second reason is the one @Timmy brought up in his answer. You need to perform both changes for your code to work. Complete working example:

```
public static void main(String[] args) {
    Calendar ca1 = Calendar.getInstance();
    ca1.set(2012, Calendar.SEPTEMBER, 20);
    ca1.setMinimalDaysInFirstWeek(1);
    int wk = ca1.get(Calendar.WEEK_OF_MONTH);
    System.out.println("Week of Month :" + wk);
} 
```

This prints

```
Week of Month :4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T10:17:01.807

月份是从零开始的。所以 ca1.set(2012,9,20) 实际上是将日历设置为 10 月。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T10:19:49.573

要确保设置正确的月份，请尝试使用 Calendar-Class 提供的月份常量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-23T02:57:06.867

对于那些使用 Joda time 的人来说，这就是我正在使用的：

```
/**
 * For a week starting from Sunday, get the week of the month assuming a
 * valid week is any week containing at least one day.
 * 
 * 0=Last,1=First,2=Second...5=Fifth
 */
private int getWeekOfMonth( MutableDateTime calendar )
{
    long time = calendar.getMillis();
    int dayOfMonth = calendar.getDayOfMonth();
    int firstWeekday;
    int lastDateOfMonth;
    int week;
    int weeksInMonth;

    calendar.setDayOfMonth( 1 );
    firstWeekday = calendar.getDayOfWeek();
    if (firstWeekday == 7)
    {
        firstWeekday = 0;
    }
    calendar.setHourOfDay( 0 );
    calendar.addMonths( 1 );
    calendar.addDays( -1 );
    lastDateOfMonth = calendar.getDayOfMonth();
    weeksInMonth = (int)Math.ceil( 1.0*(lastDateOfMonth + firstWeekday)/7 );
    week = (byte)(1 + (dayOfMonth + firstWeekday - 1)/7);
    week = (week == weeksInMonth)?0:week;
    calendar.setMillis( time );

    return week;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-06T08:15:50.053

我对这个问题很晚了，但我觉得缺少完整的答案，也就是说，如何解释周数可能会有很大差异，具体取决于`Locale`.

这个问题似乎需要美国（或类似的`Locale`）的设置，它使用 1 作为第一周的最少天数，并将星期日作为一周的第一天。

问题和所有答案均采用默认`Calendar`实例，第一周最少有 4 天，每周第一天为星期一。

一个简单的演示程序显示了这一点：

```
public static void main(String[] args) {
    {
        System.out.println("--- ISO ---");
        Calendar calendar = Calendar.getInstance();
        System.out.println("First day of week        : " + calendar.getFirstDayOfWeek());
        System.out.println("Minimal days in 1st week : " + calendar.getMinimalDaysInFirstWeek());
        calendar.set(2012, Calendar.SEPTEMBER, 20);
        int wk = calendar.get(Calendar.WEEK_OF_MONTH);
        System.out.println("Week of Month : " + wk);
    }
    {
        System.out.println("--- USA ---");
        Calendar calendar = Calendar.getInstance(Locale.US);
        System.out.println("First day of week        : " + calendar.getFirstDayOfWeek());
        System.out.println("Minimal days in 1st week : " + calendar.getMinimalDaysInFirstWeek());
        calendar.set(2012, Calendar.SEPTEMBER, 20);
        int wk = calendar.get(Calendar.WEEK_OF_MONTH);
        System.out.println("Week of Month : " + wk);
    }
} 
```

这产生了这个输出：

```
--- ISO ---
First day of week        : 2
Minimal days in 1st week : 4
Week of Month : 3
--- USA ---
First day of week        : 1
Minimal days in 1st week : 1
Week of Month : 4 
```

**结论**：

无需手动设置第一周或一周的第一天的最少天数。只要确保您使用的是正确的`Locale`.

**额外的**

Joda time 仅支持 ISO 周。从 Java 8 和新的 time API 开始，您可以这样处理：

```
LocalDate localDate = LocalDate.of(2012, 9, 20);
TemporalField usWeekOfMonth = WeekFields.of(Locale.US).weekOfMonth();
TemporalField isoWeekOfMonth = WeekFields.ISO.weekOfMonth();
System.out.println("USA week of month " + usWeekOfMonth.getFrom(localDate));
System.out.println("ISO week of month " + usWeekOfMonth.getFrom(localDate)); 
```

输出 ：

```
USA week of month 4
ISO week of month 4 
```

甚至在格式化程序中也有支持：

```
DateTimeFormatter usDateTimeFormatter = DateTimeFormatter.ofPattern("W/MM")
        .withLocale(Locale.US);
System.out.println("USA formatter : " + usDateTimeFormatter.format(localDate));
DateTimeFormatter isoDateTimeFormatter = DateTimeFormatter.ofPattern("W/MM");
System.out.println("ISO formatter : " + isoDateTimeFormatter.format(localDate)); 
```

输出 ：

```
USA formatter : 4/09
ISO formatter : 3/09 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-07-21T13:10:28.947

```
class test {
    public static void main(String[] args){
        Calendar cal = Calendar.getInstance();      
        cal.set(2016, Calendar.AUGUST, 01);
        printDayOFWeek(cal, Calendar.MONDAY, 5);//prints monday on 5th week
    }
}

private static void printDayOFWeek(Calendar cal, int day, int whatweek) {
    cal.set(Calendar.DAY_OF_WEEK, day);//day = Mon, tue, wed,..etc
    cal.set(Calendar.DAY_OF_WEEK_IN_MONTH, -1); //-1 return last week 

    Date last = cal.getTime();
    cal.set(Calendar.DAY_OF_WEEK_IN_MONTH, whatweek);

    Date one = cal.getTime();
    if(one.before(last) || one.compareTo(last) ==0)
    {
      System.out.println(whatweek +"WEEK" + cal.getTime());
    }
} 
```

# c# - 模块化应用架构和温莎城堡

> ID：12528539
> 
> 赞同：0
> 
> 时间：2012-09-21T10:13:12.277
> 
> 标签：c#, dependency-injection, castle-windsor

我正在开发一个与科学仪器交互的 .Net 桌面应用程序。这个工具有许多变体，每个都有不同的特性、组件等，所以我提出了一个插件/模块化架构，其中“模块组件”包含所有必要的业务逻辑、UI 等与该硬件组件/功能交互。

目前我有一个包含所有内容的解决方案——“核心”应用程序项目、公共库以及“模块”项目。我们的想法是我们将全部安装到客户站点（而不是挑选他们需要的 DLL），并使用包含所需模块列表的配置文件“激活”相关模块。

主应用程序项目使用 Castle Windsor、AssemblyFilter 和自定义 InstallerFactory 加载模块。它搜索每个模块程序集，寻找一个实现`IWindsorInstaller` *并*装饰有特定自定义属性（具有包含模块名称的属性）的类。仅当属性的模块名称是请求的名称之一时，才会运行模块的安装程序。这些安装程序类负责向 Windsor 注册该模块所需的一切（业务逻辑、视图、视图模型等）。

这个解决方案在我的概念证明中运行良好，但是我可以看到两个或多个模块在功能上非常相似的场景，因此需要共享公共代码。假设我有项目“ModuleA”和“ModuleB”，他们的 Windsor 安装程序`IFooService`在项目“ClassLibraryX”中注册了相同的类。该应用程序将失败，因为 IFooService 已被重新注册两次，并且当构造函数请求时，Windsor 将不知道要解决哪个问题。

处理这个问题的最佳方法是什么？思念至今：-

*   查看特定组件是否已在 Windsor 中注册。这感觉很hacky（如果可能的话）
*   使用名称注册组件，但是如何通过构造函数注入请求命名实例？
*   在每个模块项目中创建一个新接口，例如`public interface IModuleAFooService : IFooService`，并在整个项目中注册/使用它（而不是`IFooService`）。

有什么想法吗？

**编辑**：事实上，温莎在尝试解决时不会摔倒`IFooService`。当第二个模块尝试注册相同的接口/具体实现时，它将崩溃！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:41:49.517

在我看来，你有几个选择。我认为你有两个主要问题。首先是您要安装共享接口两次（或更多次）。第二个是您可以拥有两个不同版本的共享接口。

对于第一个问题，我会将共享接口分离到它们自己的程序集中。在该程序集中，我将有一个适用于该程序集的安装程序。然后，您可以告诉 Windsor 安装该共享组件，它知道如何连接自己。

对于第二个问题，您有两个选择（如我所见）。第一种选择是保持共享组件向后兼容。第二种选择是隔离您的运行时（通过应用程序域或进程）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:20:27.590

命名实例没问题。`DependsOn(Dependency.OnComponent("paramName", "serviceName"))`您可以通过fluent 配置中的方法定义对具体命名服务的依赖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:51:40.190

你不能为插件提供一些元数据，即给每个插件实现一个名称属性，windsor 可以使用它来识别你想要的实现吗？

我最近没有过多使用 Castle，但我确信它确实有命名绑定/注册的概念，所以你可以用它作为区分事物的一种方式，如果这不可能并且没有其他元数据您可以考虑使用 which 会使 Windsor 变得不那么模棱两可，然后我会选择您的第三个选项。

刚刚再次阅读了您的第二个选项（在编写上述内容之后），这似乎是最好的选择，我不记得确切的语法，但在大多数 DI 框架中，您会执行以下操作：

```
var instance = Get<IMyInterface>("Named This"); 
```

他们的文档中的某处将有大量语法示例，但您需要知道 Windsor 端的名称才能注册它，并在客户端请求它。

# javascript - 这是限制全局变量的更好方法吗？

> ID：12528541
> 
> 赞同：0
> 
> 时间：2012-09-21T10:13:16.067
> 
> 标签：javascript, global-variables

我听说**限制你的全局变量**我 javascript。

如果我**必须**在全局范围内声明变量，那么我将执行以下操作：

```
var global1 = 0, global2 = 1, global3 = 2, global4 = 3; 
```

这里我有四个全局变量。现在我想限制全局变量的数量并做了这样的事情

```
var globals = {
    global1 : 0,
    global2 : 1,
    global3 : 2,
    global4 : 3
} 
```

我想知道第二种方法是更好还是一样，因为通过公开变量**全局变量**，我也公开了其他其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:15:31.700

您的方法基本上称为命名空间，并且由大多数大型库完成，例如 jQuery 使用`jQuery`和/或`$`保存其所有变量和函数。

减少全局变量数量的主要原因是限制可能的冲突，如果不同的脚本使用相同的变量名。

因此，例如，脚本 A`cache`为其内部目的定义了一个全局变量。当第二个不相关的脚本 B 需要另一个具有该名称的全局变量时，您将遇到麻烦，因为脚本 B 可能会覆盖脚本 A 的变量。

通过将您的变量（以及函数）放入您自己的全局命名空间中，并使用可能未被任何其他脚本使用的名称，您可以降低上述情况发生的可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:16:39.780

第二种方法名为命名空间，它更好。

```
var mynamespace = mynamespace || {}; 
```

然后你得到对象（如果它存在）或创建一个新对象。

# php - PHP For循环遍历日期范围不起作用

> ID：12528546
> 
> 赞同：0
> 
> 时间：2012-09-21T10:13:37.313
> 
> 标签：php, mysql, for-loop

我试图遍历一个月中的每一天，并获取一个月内每一天的结果数。

我做了以下事情；

```
<?php
include 'inclues/db.inc.php';

for($i = 2; $i < 30; $i++){
    $date2 = $i-1;
    $date1 = $i;

    $q = mysql_query("SELECT * FROM `table` WHERE `date` < '2012-09-".$date1." 00:00:00' AND `date` > '2012-09-".$date2." 00:00:00'";
    //$r = mysql_fetch_assoc($q);
    echo mysql_num_rows($q)."<br />";
}

?> 
```

如果我只是尝试回显日期 1 和 2，但如果我使用查询则不行。使用查询时，我最终会出现 500 内部服务器错误。

关于如何解决这个问题的任何想法？在循环中使用查询通常是不好的做法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:17:58.197

只需执行

`SELECT `date`, COUNT(*) from `table` group by `date``

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:21:29.167

```
SELECT * FROM `table` WHERE `date` BETWEEN $date1 AND $date2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:18:09.640

在循环中使用查询并不是一个坏习惯。

检查您的查询字符串正在变成什么，尝试在您的数据库上手动运行该查询。它可能会产生一些错误。

```
 $sql = "SELECT * FROM `table` WHERE `date` < '2012-09-".$date1." 00:00:00' AND `date` >      '2012-09-".$date2." 00:00:00'";
 echo $sql;
 $q = mysql_query($sql); 
```

# asp.net - 在应用程序配置中找不到连接名称“SQL”或连接字符串为空

> ID：12528549
> 
> 赞同：0
> 
> 时间：2012-09-21T10:13:51.880
> 
> 标签：asp.net

请我一直看到这个错误：

> 在应用程序配置中找不到连接名称“SQL”或连接字符串为空。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

我知道连接名称“SQL”存在并且它在我的本地机器上正常工作。

在我的部署服务器上修复此其他错误后，我开始看到此错误：

> 编译器错误消息：BC31007：无法打开模块文件 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files

[按照此处](http://falhan.net/?p=152)的建议设置访问权限

请在这方面提供任何帮助。

谢谢！

部署环境：Windows Server 2003、.net 4.0
开发环境：Widows 7、.net 4.0

请注意：截至上周五晚上，已部署的应用程序在现场运行良好，超过 3 个月。

客户端声称服务器上或他们的环境中没有任何变化。

我的网络配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <appSettings>
        <add key="LoginMode" value="2" />
        <add key="CustomeModules" value="True" />
        <add key="TopCallersRefeshInterval" value="600" />
        <add key="OperatorAccountName" value="" />
        <add key="ChartImageHandler" value="storage=file;timeout=20;dir=C:\TempImageFiles\;"/>
    </appSettings>
    <connectionStrings>
        <add name="SQL" connectionString="server=.\SQL2008;database=xxxxxx;uid=xxxxxx;pwd=xxxxxxxxxx;" providerName="System.Data.SqlClient" />
        <add name="SQLCustom" connectionString="server=.\SQL2008;database=xxxxxx;uid=xxxxxx;pwd=xxxxxxxxxx;" providerName="System.Data.SqlClient" />
    </connectionStrings>
    <system.web>
        <httpHandlers>
     <add path="ChartImg.axd" verb="GET,HEAD,POST" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false" />
    </httpHandlers>
    <pages>
     <controls>
        <add tagPrefix="asp" namespace="System.Web.UI.DataVisualization.Charting" assembly="System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
     </controls>
    </pages>
    <compilation debug="true" targetFramework="4.0" explicit="true">
            <assemblies>
                <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
                <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
                <add assembly="System.Web.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
                <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
                <add assembly="System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" /></assemblies>
        </compilation>
    </system.web>
    <system.webServer>
        <defaultDocument>
            <files>
                                <remove value="login.aspx" />
                <remove value="iisstart.htm" />
                <remove value="default.aspx" />
                <remove value="index.html" />
                <remove value="index.htm" />
                <remove value="Default.asp" />
                <remove value="Default.htm" />
                <add value="home.aspx" />
            </files>
        </defaultDocument>
        <handlers>
            <add name="ChartImageHandler" preCondition="integratedMode" verb="GET,HEAD,POST" path="ChartImg.axd" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        </handlers>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:04:32.803

但是，您是在尝试连接到远程数据库（即部署服务器上的数据库）还是本地数据库。

也许有人已经触及了对数据库的访问权限......

顺便问一下，您是如何修复原始错误的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T08:47:59.610

删除每个具有 .config 格式的文件，即“web.user.config”但“web.config”。

我希望它有帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T22:09:35.493

清除服务器上的临时文件夹。重新编译，重新部署并查看是否可以为您解决问题。还：

```
<connectionStrings>
     <clear />
     <remove name="SQL"/>
     <add name="SQL" 
         connectionString="server=.\SQL2008;database=xxxxxx;uid=xxxxxx;pwd=xxxxxxxxxx;"
             providerName="System.Data.SqlClient" />
      .....
</connectionStrings> 
```

如果这不起作用，请尝试远程调试会话：

[如何：设置远程调试](http://msdn.microsoft.com/en-us/library/bt727f1t.aspx)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-29T09:09:04.117

尝试`</clear>`在 web.config 中的连接字符串下添加

```
connectionStrings>
   <clear />
     <add name="SQL" connectionString="server=.\SQL2008;database=xxxxxx;uid=xxxxxx;pwd=xxxxxxxxxx;" providerName="System.Data.SqlClient" />
      .....
</connectionStrings> 
```

# sql - Playframework SQL query

> ID：12528551
> 
> 赞同：0
> 
> 时间：2012-09-21T10:14:06.627
> 
> 标签：sql, postgresql, scala, playframework-2.0

Im trying to make a query that help me get a user by its username. What i want to do is to check if the given username is unique. so what i thought about is to uppercase the username when i do my select request and compare it with an uppercase of the given username. This is what i tried:

```
SQL("select * from utilisateur where upper(pseudo) = {pseudo}").on(
        'pseudo -> pseudo.toUpperCase
        ).as(Utilisateur.utilisateur.singleOpt) 
```

but it get this error:

```
[RuntimeException: SqlMappingError(too many rows when expecting a single one)] 
```

I tried this too:

```
SQL("select * from utilisateur where ucase(pseudo) = {pseudo}").on(
        'pseudo -> pseudo.toUpperCase
        ).as(Utilisateur.utilisateur.singleOpt) 
```

and i got this error:

```
[PSQLException: ERROR: function ucase(character varying) does not exist Indice : No function matches the given name and argument types. You might need to add explicit type casts. Position : 33] 
```

What should i do ?

PS:Im using PostgreSQL 9.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:31:30.440

首先，在 Play! 中，仅`singleOpt`在您期望正好返回一排时使用。否则会抛出异常。由于您*确实*只需要一行，`LIMIT 1`因此请在查询末尾添加 a。

你想要的 PostgreSQL 函数是`upper()`. 这是一个例子：

```
SQL("select * from utilisateur where upper(pseudo) = {pseudo} limit 1").on(
        'pseudo -> pseudo.toUpperCase
        ).as(Utilisateur.utilisateur.singleOpt) 
```

（你可以在这里玩：[http](http://sqlfiddle.com/#!1/6226c/5) ://sqlfiddle.com/#!1/6226c/5 ）

# php - PHP "namespaced" docblock tags?

> ID：12528552
> 
> 赞同：0
> 
> 时间：2012-09-21T10:14:07.737
> 
> 标签：php, annotations, comments, docblocks

I've seen this used (example from Doctrine2) in a lot of libraries that have code which works with comments:

```
<?php
namespace MyProject\Entities;

use Doctrine\ORM\Mapping AS ORM;
use Symfony\Component\Validation\Constraints AS Assert;

/**
 * @ORM\Entity
 * @MyProject\Annotations\Foobarable
 */
class User
{
    /**
     * @ORM\Id @ORM\Column @ORM\GeneratedValue
     * @dummy
     * @var int
     */
    private $id;
} 
```

I seems as though some of the comment tags are "namespaced". Is this some PHP feature that I'm not aware of (since it seems to work with the "use" statements), or is it just some smart text parsing within the library that uses these?

I am asking because I am currently developing a small class that has to read some of this "metadata", and it would be really neat if this is something that is included in the language, so I don't have to write ugly text parsers.

Many thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:26:58.233

不，它的一个功能可以帮助像 netbeans 这样的 IDE 在输入代码时自动完成和提示。

如果您想做一些文档块解析，作为替代方案，您可以使用反射类来获取有关该类的信息而不解析文档块（这可能不准确）

请参阅本[教程](http://www.phpriot.com/articles/reflection-api)。

# websphere - Unable to run Profile management Tool for Websphere 7.0 from within RAD 7.5

> ID：12528554
> 
> 赞同：3
> 
> 时间：2012-09-21T10:14:15.047
> 
> 标签：websphere, websphere-7, rad

I am using Rational Application Developer version 7.5.4 on 64-bit Windows OS (i5). I would like to create custom profiles for development. We hav been using RAD 7.5.4 on Windows XP before. On Windows 7 (64 bit) machines the "**Run Profile Management Tool**" button is **disabled**.Any help on how to get the PMT to run on 64 bit machine is much appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T23:00:15.647

也许为时已晚，但您需要右键单击并选择“以管理员身份运行”。即使您已经以管理员身份登录，您也必须这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T02:41:25.707

经过两天的努力，我找到了让 PMT 在 Windows 7（64 位）上运行的解决方案。下载[manageProfilesInteractive](http://www-01.ibm.com/support/docview.wss?uid=swg21442487)批处理文件并运行以创建和管理配置文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T14:25:17.940

尝试以管理员身份运行 RAD。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T22:49:16.963

我猜由于您在 64 位平台上，WebSphere AS（RAD 附带）也是 64 位的，并且没有 PMT 可用。这就是为什么我认为 Run PMT 按钮被禁用的原因。

引用[创建应用程序服务器配置文件](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.base.doc/info/aes/ae/tpro_instancessaappserv.html)：

> 支持的配置：您不能使用 Profile Management Tool 为 64 位体系结构上的 WebSphere Application Server 安装创建配置文件，Linux for zSeries 平台除外。但是，如果您使用 WebSphere Application Server 32 位安装，则可以在其他 64 位体系结构上使用 Profile Management Tool。

我无法从[Rational Application Developer's Information Center](http://publib.boulder.ibm.com/infocenter/radhelp/v7r5/index.jsp)找到相关信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-28T16:42:00.630

就我而言，我在新安装的 RAD 9.1 上安装了 Liberty 服务器，显然它们没有附带禁用“运行配置文件管理”按钮的“manageprofiles.sh”。为了解决这个问题，我安装了非 Liberty 服务器，然后我就可以使用配置文件管理工具了。

# jquery - Different Links For Iframe jQuery Modal

> ID：12528555
> 
> 赞同：0
> 
> 时间：2012-09-21T10:14:19.780
> 
> 标签：jquery, ajax, iframe, modal-dialog

i have some jquery code to show iframe in modal window.

this code:

```
<script type="text/javascript">
      $(document).ready(function() {
            $("#modalDiv").dialog({
                modal: true,
                autoOpen: false,
                height: '800',
                width: '800',
                draggable: false,
                resizeable: false,   
                title: 'IFrame Modal Dialog'
            });
            $('#goToMyPage').click(
                function() {
                    url = '/addnews.html';
                    $("#modalDiv").dialog("open");
                    $("#modalIFrame").attr('src',url);
                    return false;
            });                 
      });
</script> 
```

HTML:

```
<a id="goToMyPage" href="#">Go to My Page</a>
<div id="modalDiv">
<iframe id="modalIFrame" width="100%" height="100%" marginWidth="0" marginHeight="0" frameBorder="0" scrolling="auto" title="Dialog Title"></iframe>
</div> 
```

i just can use for 1 link. this link:

```
url = '/addnews.html'; 
```

HTML:

```
<a id="goToMyPage" href="#">Go to My Page</a> 
```

how i can use this code for 4-5 links?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:46:58.113

您可以在标签中的附加参数中发送 url

```
<a id="goToMyPage" href="#" data-url="some-url" >Go to My Page</a> 
```

并在您的活动中使用它

```
$('.goToMyPage').click(
            function(e) {
                e.preventDefault();
                url = $(this).attr('data-url');
                $("#modalDiv").dialog("open");
                $("#modalIFrame").attr('src',url);
                return false;
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:19:54.283

修改您的 js 以触发类而不是 ID，并修改链接以使用 href e.preventDefault() 告诉禁用链接正常打开

```
 $('.goToMyPage').click(
            function(e) {
                e.preventDefault();
                url = $(this).prop('href');
                $("#modalDiv").dialog("open");
                $("#modalIFrame").attr('src',url);
                return false;
        }); 
```

然后让你的链接看起来像这样

```
<a class="goToMyPage" href="addnews.html">Go to My Page</a> 
```

# c# - 在 C# 中使用 LINQ、与 StreamReader 和 File 类一起使用的效率

> ID：12528559
> 
> 赞同：1
> 
> 时间：2012-09-21T10:14:34.273
> 
> 标签：c#, .net, visual-studio-2010

我只有一个文件和一个要在其中搜索的字符串

```
Key
 Value1
 Value2
 Value3

Key1
 Value1 
```

这是文件的结构。现在，我搜索一个键，然后读取它下面的所有值，直到找到一个换行符（或者只是一个空行）

我使用这个算法。

```
var valuelist = new List<string>();
using(var reader = new StreamReader(@"c:\test.txt"))
{
  String a;
  while( (a=reader.ReadLine())!=null)
 {
  if(!a.Equals("Key")) continue;
  while( a == reader.ReadLine() != null) //check whether end of file is not reached.
  {
    if(a.Length == 0) break; //a empty line is reached.hence comeout.
    valuelist.add(a);
  }
  } 
} 
```

1.  我正在使用“使用”，因为它会自动处理“阅读器”对象？在这种情况下我的方法正确吗？

2.  在这种情况下，如何在此处使用 LINQ 表达式？

我尝试了以下代码

```
var all_lines = File.ReadAllLines(@"C:\test.txt");
 //How to retrieve "Values" for a given key using LINQ ? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:24:18.767

1.  在这种情况下使用`using`是非常合适的
2.  要检索给定键的值，您可以使用[`SkipWhile`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.skipwhile.aspx)按名称查找键，然后[`TakeWhile`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.takewhile.aspx)查找空行。

* * *

```
var list = new List<string>{
    "junk", " a", " b", "", "key", " c", " d", " e", "", "more", "f"
};
var vals = list.SkipWhile(s => s != "key").Skip(1).TakeWhile(s => s != "");
foreach (var s in vals) {
    Console.WriteLine(s);
} 
```

# c++ - friend function returning reference to private data member

> ID：12528564
> 
> 赞同：0
> 
> 时间：2012-09-21T10:14:51.183
> 
> 标签：c++, oop, reference, constants

I have two questions about the following code.

```
class cls{
    int vi;
    public:
        cls(int v=37) { vi=v; }
        friend int& f(cls);
};

int& f(cls c) { return c.vi; }

int main(){
    const cls d(15);
    f(d)=8;
    cout<<f(d);
    return 0;
} 
```

1.  Why does it compile, since f(d) = 8 attemps to modify a const object?
2.  Why does it still print 15, even after removing the const attribute?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T10:16:49.670

由于通过值而不是引用传递的参数，它不会修改`const`对象作为*副本*。这也是它没有被修改的原因。`d``f()``d`

# triggers - HSQLDB DECLARE ROW IN A TRIGGER

> ID：12528571
> 
> 赞同：0
> 
> 时间：2012-09-21T10:15:20.933
> 
> 标签：triggers, hsqldb

Hi all I try to get a row form my select statemnt in a trigger but I got this error unexpected token: R

```
 CREATE TRIGGER PUBLIC.TRIGGERNAME AFTER UPDATE ON     PUBLIC.CLIENTE_OFFERENTE 
             REFERENCING NEW ROW AS NUOVO 
                FOR EACH ROW 
                  BEGIN ATOMIC 
                   DECLARE r RECORD;
                   SET r=(SELECT offerta.IDIMMOBILE as ID, immobile.prezzomax as costo FROM PUBLIC.OFFERTA join immobile on immobile.idImmobile=offerta.idImmobile WHERE IDOFFERTA=NUOVO.IDOFFERTA);
                  IF NUOVO.STATO='Venduto'THEN 
                     INSERT INTO PUBLIC.VENDITE(IDCLIENTE,IDIMMOBILE,COSTO)VALUES(NUOVO.IDCLIENTE,r.ID,r.costo);
                   END IF;
                  END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:40:17.137

您不能 DECLARE RECORD 类型的变量。

您想从您的 select 语句中获取两个值。因此，您需要声明两个变量。

```
BEGIN ATOMIC 
    DECLARE VAR_ID INT;
    DECLARE VAR_COSTO INT;
    SET (VAR_ID, VAR_COSTO) =(SELECT offerta.IDIMMOBILE as ID, immobile.prezzomax as costo FROM PUBLIC.OFFERTA join immobile on immobile.idImmobile=offerta.idImmobile WHERE IDOFFERTA=NUOVO.IDOFFERTA);
    IF NUOVO.STATO='Venduto'THEN 
        INSERT INTO PUBLIC.VENDITE(IDCLIENTE,IDIMMOBILE,COSTO)VALUES(NUOVO.IDCLIENTE,VAR_ID,VAR_COSTO);
    END IF;
END 
```

# jquery-validation-engine - Request parameter getting null in ajax jquery validation engine in java

> ID：12528576
> 
> 赞同：1
> 
> 时间：2012-09-21T10:15:41.980
> 
> 标签：jquery-validation-engine

**jqueryvalidationengine-en.js** :

```
"ajaxUserCall": {
    "url": "ajaxValidateFieldUser",
    // you may want to pass extra data on the ajax call
    "extraData": "name=eric",
    "alertTextOk":"* This user name can be used and is available",
    "alertText": "* This user is already taken",
    "alertTextLoad": "* Validating..., please wait"
} 
```

**xyz.html**:

```
<input class="validate[ajax[ajaxUserCall]] text-input" type="text" name="requir" id="requir" title="Text value is required"/>

function beforeCall(form, options){
    if (console)
        console.log("Right before the AJAX form validation call");
    return true;
}
// Called once the server replies to the ajax form validation request
function ajaxValidationCallback(status, form, json, options){
    if (console)
        console.log(status);

    if (status === true) {
        alert("the form is valid!");
        // uncomment these lines to submit the form to form.action
        // form.validationEngine('detach');
        // form.submit();
        // or you may use AJAX again to submit the data
    }
}

jQuery(document).ready(function(){
    jQuery("#formID").validationEngine({
    ajaxFormValidation: true,
    onAjaxFormComplete: ajaxValidationCallback,
    onBeforeAjaxFormValidation: beforeCall
    });
}); 
```

Above is my html and jqueryengine-en.js code
And in servlet i am getting `request.getParameter("requir")` is null.
Please post me your answers regarding the above problem as i was unable to find much about Jquery validation engine on net and please share some link from where i can study more of it.
Please help me in getting `requestParameter("requir")` with form text box value.
Thanx in advance.

# c# - IEnumerable 相等的 ICollection 类型检查

> ID：12528577
> 
> 赞同：2
> 
> 时间：2012-09-21T10:15:43.377
> 
> 标签：c#, generics, contravariance

我为我们的应用程序编写了一个小型 pub/sub 系统，

你通过实现 IHandle 来订阅消息

假设订户实现`IHandle<IEnumerable<MyType>>`

然后有人发布类型的消息，`ICollection<MyType>>`这当然应该触发订阅者，因为 IColletion<> 是类型 IEnumerable<>

但是我的代码不支持这一点，解决方法是发布者将 ICollection 转换为 IEnumerable 但它在更大的团队中容易出现错误。

这是不起作用的代码

```
public void Publish<T>(T message) where T : class
{
    if (config.EnableEventAggregator)
        subscribers.OfType<IHandle<T>>()
        .ForEach(s => s.Handle(message));
} 
```

我希望它找到继承 任何想法`IHandle<IEnumerable>`的所有类型？`IEnumerable<T>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:26:50.463

您需要定义`IHandle`为*逆变，*这样您就不需要解决：

```
interface IHandle<in T> 
```

通过这种方式，它将接受从 IEnumerable 继承的所有类型

这个[链接](http://msdn.microsoft.com/en-us/library/dd799517.aspx)为你详细解释了协方差和逆变如何与 genric 一起工作

# android - don't want to show softkeyboard when clicked a textbox

> ID：12528579
> 
> 赞同：0
> 
> 时间：2012-09-21T10:15:45.093
> 
> 标签：android, android-webview

> **Possible Duplicate:**
> [Close/hide the Android Soft Keyboard](https://stackoverflow.com/questions/1109022/close-hide-the-android-soft-keyboard)

I'm using the android webview. When I clicked on a textbox, the soft keyboard is showing is there any way to remove that behavior? Thanks a lot!

# random - System.Random 每次给出相同的值 3 次

> ID：12528581
> 
> 赞同：0
> 
> 时间：2012-09-21T10:15:49.523
> 
> 标签：random, f#

> **可能重复：**
> [F# 获取随机数列表](https://stackoverflow.com/questions/6062191/f-getting-a-list-of-random-numbers)

我每次都在滴答声（计时器）上从列表中获取随机值，但我得到相同的 3 次，然后它才改变......

编码：

```
let timer = new DispatcherTimer()
timer.Tick.Add  <| fun _ -> X.Change()
timer.Interval  <- new TimeSpan(0,0,3)    

    member X.Change() = 
        (Seq.nth
            (System.Random().Next(Seq.length actions))
                <| actions)() 
```

为什么？我想每次都得到不同的价值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:23:25.207

我不完全确定您的示例，但一般准则是您应该创建一个实例`System.Random`（或每个线程一个实例，如果您有一个多线程应用程序），然后多次使用它。

尝试这样的事情：

```
let timer = new DispatcherTimer() 
let rnd = new System.Random()
timer.Tick.Add  <| fun _ -> X.Change() 
timer.Interval  <- new TimeSpan(0,0,3)     

    member X.Change() =  
        (Seq.nth 
            (rnd.Next(Seq.length actions)) 
                <| actions)() 
```

该`Random`对象是可变的并保持一些用于生成随机值序列的状态。当您创建一个新实例时，它会使用当前时间初始化状态，因此如果您同时创建多个实例，您将获得相同的数字。

顺便说一句，如果您需要访问 的随机元素`actions`，那么最好将它们存储为数组，因为这样您就可以编写：

```
member X.Change() =  
  actions.[rnd.Next(actions.Length)]() 
```

# python - find value in several dictionaries

> ID：12528584
> 
> 赞同：1
> 
> 时间：2012-09-21T10:15:58.763
> 
> 标签：python

first you have only one dictionary,everything's fine with

```
def getNPCName(self,ID):
    return self.npcs[ID].name 
```

then,got another dictionary,the code become this

```
def getNPCName(self,ID):
    for x in (self.npcs,self.deadnpcs):
        if ID in x:
            return x[ID].name 
    return '' 
```

i don't think this would be a good practice.

there should be some dictionary already exists, they union several dictionaries,not really merge them, but act just like one dictionary for some apis.

```
self.allnpclist = some_kind_of_dictionary(self.alive,self.dead) 
```

my code should be this

```
def getNPCName(self,ID):
    return self.allnpclist[ID].name 
```

i think i shouldn't write it by myself

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:31:35.243

我可以考虑的一般解决方案：

```
npcs={...}
deadnpcs={...}
undeadnpcs={...}
npc_dicts={'npcs':npcs,'deadnpcs':deadnpcs,...}

def getNPCName(ID):
    for one in npc_dicts:
        choosen_one=getattr(npc_dicts[one],ID,None)
        if choosen_one:
            return choosen_one.name 
```

# sql - SQL优化：内连接

> ID：12528589
> 
> 赞同：0
> 
> 时间：2012-09-21T10:16:18.447
> 
> 标签：sql, oracle, query-optimization

假设我有下面的 SQL

如何优化查询的性能？

```
select product, address, quantity, 
    price, create_date, sum(no_of_photo) as no_of_photo
from
(
    SELECT customer.PROJECT_ID as project_id ,
        customer.ORDER_TYPE as order_type,  
        customer.product_name as product, 
        customer.address_name as address ,    
        customer.quantity_name as quantity,
        user.first_name || ' ' || user.last_name AS price,
        customer.create_date, customer.no_of_photo 
    FROM customer 
    INNER JOIN user 
        ON customer.creation_userid = user.userid
) master_list 
group by project_id, order_type , 
    product, address, quantity, price, 
    create_date 
having project_id = 123456 
order by product, address, quantity, price, create_date 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T10:26:12.057

我会尝试几件事：

1.  将您的 HAVING 子句放入内部查询中的 WHERE
2.  在内部查询中自行选择 first_name 和 last_name
3.  在外部查询中按名字、姓氏分组（为什么叫价格？）
4.  做名的串联 || ' ' || 外部查询中的姓氏

还要确保有以下索引：

*   customer.project_id
*   customer.creation_userid
*   用户.userid

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:32:26.830

最好的增长通常来自创建索引。您询问内部连接。没有内部连接会很快吗？那么你可能需要一个关于 user.userid 的索引。

# php - Wordpress add_options_page 能力问题

> ID：12528600
> 
> 赞同：0
> 
> 时间：2012-09-21T10:17:01.430
> 
> 标签：php, wordpress

我是 wordpress 插件的新手。我得到了 WP 版本 3.4.1，我正在制作一个自定义管理选项插件这是我的代码：

```
function caquacp_admin(){
include('caquacp_import_admin.php');
}
function caquacp_admin_actions() {
    add_options_page("Am User Panel", "User Panel", "admin", "User_Panel", "caquacp_admin");
}  
add_action('admin_menu', 'caquacp_admin_actions'); 
```

在我尝试使用的功能字符串中：'manage_options'、“administrator”、“admin”、0、1、8

每次我得到同样的错误（不能授予访问权限）

请帮忙 ％）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T13:51:00.533

> 尝试使用 delete_users ， create_user ， activate_plugins ...也正如@Libin 所说，您是否以管理员身份登录？– noc2spam

Tnx 解决了我的问题

# php - 使用PHP将带有扩展插入的大型sql文件导入mysql？

> ID：12528602
> 
> 赞同：0
> 
> 时间：2012-09-21T10:17:05.467
> 
> 标签：php, mysqlimport, large-data

当我尝试导入大约 500MB 的大型 sql 文件时遇到问题。它有 100,000 个扩展插入查询。我已经到处搜索了，但还没有找到。Bigdump 不支持扩展插入，因此没有用处。我看到的每一个建议都失败了，因为他们都使用了 fopen() 或 file()，这会导致 PHP 中的 MEMORY EXHAUST，即使我已将 memorty_limit 增加到 512M。我正在寻找一个可以读取 500MB 的 sql 文件并通过它并获取扩展插入的插入查询的代码。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:22:03.853

您不应该在 PHP 中执行此操作，从 Web 服务器运行。

*   如果是一次性操作，请使用 phpmyadmin
*   试试看你能不能用mysql提供的工具解决这个问题
*   如果您必须编程（因为文件需要每天运行），请在命令行模式下运行 PHP
*   如果您无权访问命令行，请尝试读取插入的部分内容并处理这些部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:28:10.387

问题`file()`在于它将整个文件读入一个大数组。根据文件的大小，这很容易达到刚刚发生的内存限制。

这不是您通常想要的。相反，您想一一获取这些行。这是`iterators`完美的。

我认为您应该查看[http://php.net/manual/en/class.iterator.php](http://php.net/manual/en/class.iterator.php)使用它来读取文件并通过命令行运行它...。

# linux - 导致用户注销的 Bash 脚本

> ID：12528605
> 
> 赞同：0
> 
> 时间：2012-09-21T10:17:13.943
> 
> 标签：linux, bash

在下面的脚本中，当`if`执行语句中的代码时，用户将从 bash 中注销。为什么是这样？

```
#!/bin/sh  
if [ -z $1 ]; then  
   echo "1"  
   read w  
   exit 1  
fi  
if [ "$#" -gt "1" ]; then
   echo "1"
  read w
  exit 2
fi
export PTSUSER=$1.
<some more code> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:22:52.927

如果脚本是来源的，并且任何一个`if`块被命中，那么是的，当前用户的 bash shell 将被退出，并且用户将被注销。这是因为获取脚本将使用当前用户的 bash shell 来执行脚本。

```
$ . ./script.sh 
```

另一方面，如果它在新的 bash shell 实例中运行，则不会发生这种情况，并且一旦在 shell 中执行任一退出命令（在任一 if 块中），bash 实例就会退出。

```
$ bash ./script.sh 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:20:30.170

这取决于您如何调用脚本。`exit`导致当前 shell 退出。如果您`source`在登录后从 shell 启动脚本，即它在当前 shell 的上下文中运行，`exit`则会将用户注销。

# ruby-on-rails - rspec(v. 1.2) 中的 Object.any_instance

> ID：12528606
> 
> 赞同：0
> 
> 时间：2012-09-21T10:17:15.937
> 
> 标签：ruby-on-rails, ruby, rspec

rspec v1.2中**[any_instance](https://www.relishapp.com/rspec/rspec-mocks/v/2-6/docs/method-stubs/stub-on-any-instance-of-a-class)**的别名是什么？

```
Object.any_instance.stub(:foo).and_return("return_value") 
```

PS
对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:31:05.697

没有一个。`any_instance`rspec-2.6 首次支持：[http](http://rubydoc.info/gems/rspec-mocks/file/Changelog.md) ://rubydoc.info/gems/rspec-mocks/file/Changelog.md 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:58:52.243

“hack”是在测试范围内重新定义一个类的方法：
例如，如果你想制作一个像这样的存根：

```
SomeClass.any_instance.stub(:foo).and_return(return_value) 
```

--

```
describe SomeClass
  class SomeClass
    def foo
      return "return value"
    end
  end
  # your test goes here
end 
```

# jmeter - jMeter 计时器 - 循环延迟

> ID：12528608
> 
> 赞同：1
> 
> 时间：2012-09-21T10:17:23.313
> 
> 标签：jmeter

我在 jMeter 中模拟了以下场景：
100 个用户登录一次，每 30 秒进行一次搜索，思考时间为 5 秒。
我该如何实施？

现在我有这样的事情：

```
ThreadGroup(100usrs)
+-- OnceOnlyController(LogIn)
+-- LoopControler(Search)
+-- Timer(5s) 
```

但我不知道如何在 Search 实例之间延迟 30 秒。
甚至有可能还是我必须使用一些解决方法？
任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T14:24:44.617

我认为您必须添加另一个计时器作为 LoopController 的子项：Timer(30)。您的搜索请求在该控制器的范围内，您的 30 秒计时器也应该在那里。

[http://jmeter.apache.org/usermanual/component_reference.html#timers](http://jmeter.apache.org/usermanual/component_reference.html#timers)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T13:01:21.610

如果您想在搜索样本之间有一个固定的延迟，无论样本的响应时间是多少，那么 Orkito 解决方案都不是正确的。

他的解决方案将在搜索样本之前添加 30 秒的延迟，因此如果搜索花费的时间比预期的多，您的请求将每 30 秒 + 搜索样本所用的时间运行一次。

如果您想在搜索样本之间有一个固定的延迟，无论样本的响应时间如何，这里都描述了解决方案：

*   [http://blog.milamberspace.net/index.php/2008/08/15/jmeter-fixer-la-duree-de-repetition-dune-requete-87.html](http://blog.milamberspace.net/index.php/2008/08/15/jmeter-fixer-la-duree-de-repetition-dune-requete-87.html)

它是法语的，但有截图和翻译服务应该可以完成这项工作。

另一个需要注意的重要点：

> 请注意，计时器在找到它们的范围内的每个采样器之前处理；如果同一范围内有多个定时器，则所有定时器都将在每个采样器之前处理。定时器仅与采样器一起处理。与采样器不在同一范围内的计时器根本不会被处理。要将计时器应用于单个采样器，请将计时器添加为采样器的子元素。计时器将在采样器执行之前应用。要在采样器之后应用计时器，请将其添加到下一个采样器，或者将其添加为测试操作采样器的子代。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-15T08:11:54.960

而不是使用 Constant Timer 您应该使用**Constant Throughput Timer**，因为该计时器还考虑了采样时间（即每个采样的执行时间）。如果您使用常量计时器，您将在每次执行示例时产生延迟

# javascript - 仅当我在 Firebug 或 Chrome 开发人员工具中添加断点时，JavaScript 才会执行

> ID：12528609
> 
> 赞同：2
> 
> 时间：2012-09-21T10:17:23.100
> 
> 标签：javascript, asp.net

我正在使用 asp.net、JavaScript 和 HTML 处理程序。

在 asp 按钮 onclick 事件中，我像这样调用 JavaScript。

```
<asp:Button ID="btn_Tagging" CssClass="button" UseSubmitBehavior="false"
     Text="Done" OnClientClick="DoneClick()" /> 
```

在脚本标记的同一页面中，我编写了这样的 JavaScript：

```
<script type="text/javascript">
function DoneClick()
{
   var checkLocation = "";
   var txtMM = document.getElementById("hdn_Tagging").value;///Id s of textbox assigned in code behind MB--
   txtMM = txtMM.slice(0, -1);
   var arrTxtMM = txtMM.split(",");
   for(var j=0;j<arrTxtMM.length;j++)
   {
      var Loc = document.getElementById(arrTxtMM[j]).value;
      if(Loc == "")
      {
         checkLocation = "";
         break;
      }
      else
      {
         checkLocation += Loc + ":";
      }
   }
   if(checkLocation != "")
   {
      var url ='Handler/newExifDetails.ashx?Id='+txtMM+'&Location='+checkLocation+'';
      var completetbl, html;
      $.getJSON(url,function(json)
      {
         $.each(json,function(i,weed)
         {
            var res = weed.res;
            alert(res);
            if(res == null)
            {
            }
            else
            {   
               window.top.location.href = "Dashboard.aspx";
            }
          });        
       });

    }
    else
    {
       alert("Please pick the locations for all objects");
    }
 }
</script> 
```

然后，当我单击按钮时，JavaScript 中的警报仅在我在 Firebug 或 Chrome 开发人员工具脚本中放置断点时才会显示，如果我放置断点它可以工作。如果不放置该断点，则警报既不会显示也不会重定向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:10:17.560

这是一个经典的[heisenbug](http://en.wikipedia.org/wiki/Heisenbug)。如果您可以向我们展示按钮在生成的 HTML 代码中的外观，将会有所帮助。您是否尝试使用简单的警报作为点击处理程序？您是否尝试在 JavaScript 中动态添加处理程序？

尝试添加：

```
$('#btn_Tagging').click(DoneClick); 
```

或者：

```
$(function() { $('#btn_Tagging').click(DoneClick); }); 
```

在您的 JavaScript 代码末尾并删除：

```
OnClientClick="DoneClick()" 
```

来自 ASP。

我假设生成的 HTML 按钮获得`id`“btn_Tagging” - 我正确吗？如果它不起作用，那么不要向我们展示您的 ASP 代码，而是向我们展示生成的 HTML，它会进入浏览器，最重要的是：它的`value`属性是什么。

（另外，由于您已经将 jQuery 用于 AJAX，我建议您也将 jQuery 用于 DOM 操作。这样做更容易出错，而且您没有使用已经加载的库。请参阅此[**回复**](https://stackoverflow.com/questions/5099949/what-are-some-empirical-technical-reasons-not-to-use-jquery/5100169#5100169)`getElementById`如果您不小心，甚至很容易引入错误的示例。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:44:50.557

只需尝试使用普通`input type="button"`控件而不是`asp:Button`. 或重写您的按钮，如下所示：

```
<asp:Button ID="btn_Tagging" CssClass="button" UseSubmitBehavior="false"
     Text="Done" OnClientClick="DoneClick(); return false;" /> 
```

问题在于`$.getJSON`函数的异步成熟，所以在它调用之后，执行上下文离开了`DoneClick`函数，并且被调用的函数被 asp.net 基础设施`__doPostBack`添加到 btn_Tagging html 控件的属性中。`onclick`

# java - 设置使用热敏打印机打印 JFrame 内容

> ID：12528615
> 
> 赞同：1
> 
> 时间：2012-09-21T10:17:46.987
> 
> 标签：java, swing, printing

我已经编写了将`JFrame`'s 的内容发送到激光打印机的代码。它适用于我，但相同的代码不适用于热敏打印机。可能需要向打印机发送一些设置。它在热敏打印机中为页面留下了更多的左边距。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:59:10.133

您观察到的差异的可能原因包括：

*   打印机设计的物理限制
*   有缺陷或过时的打印机驱动程序
*   `Printable`接口实现不正确

根据经验，您可以尝试`translate()`在您的实现中使用图形上下文`Printable`，如本[示例](https://stackoverflow.com/a/8192592/230513)所示。还要寻找更新的驱动程序。

# c# - 如何让 Console.ReadKey() 密钥在 AppHarbor 中工作？

> ID：12528616
> 
> 赞同：0
> 
> 时间：2012-09-21T10:17:53.567
> 
> 标签：c#, appharbor

我正在托管一个需要 Console.ReadKey() 语句才能正常工作的 C# 应用程序。AppHarbor 似乎不支持这一点，它终止了我的应用程序并出现以下错误：

```
InvalidOperationException: Cannot read keys when either application does not have a console or when console input has been redirected from a file. Try Console.Read.]
mscorlib_ni!System.Console.ReadKey(Boolean)+0x1ec
ZiFM!ZiFM.Program.Main(System.String[])+0xc0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T17:31:05.333

It doesn't make sense to read from the console on AppHarbor; your console apps run non-interactively and are intended for background processes.

Can you explain a little more about what you're trying to do? If you're wanting to read keys via a users browser, you'd need to build a website and deploy that, which is *very* different to writing a console application.

# android - 使用 asmack 共享位置

> ID：12528617
> 
> 赞同：1
> 
> 时间：2012-09-21T10:17:54.850
> 
> 标签：android, publish-subscribe, smack

我正在开发 android 平台上的聊天应用程序。我想通过 xmpp 库中的 PubSub 分享我当前的位置。谁能给我如何使用 pubsub API 的代码。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T13:48:52.963

这个 API 的 Smack 文档就足够了[。](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/extensions/index.html)

[Smack中 pubsub](http://fisheye.igniterealtime.org/browse/smack/trunk/test/org/jivesoftware/smackx/pubsub)的测试用例将是代码示例的另一个来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:39:52.777

[pubsub-android](https://github.com/pubsubio/pubsub-android)是一个包含一些示例的库。请参阅库中包含的示例。

# css-float - 对齐所有浮动：垂直左对齐

> ID：12528622
> 
> 赞同：0
> 
> 时间：2012-09-21T10:18:07.703
> 
> 标签：css-float

![CSS](../Images/19e20c46c4d1a0aa2f506e9d46b67e2e.png)

![CSS 2](../Images/d6174e14a8ed331cfe752a1fecbea0d6.png)

图 1 显示了我的网站模板

`image 2 is my problem`

右侧的所有元素都是浮点数。

`sign in`图片有这个：

```
#h2 {
margin:0;
padding:0;
float:right;
padding-top:8px;
padding-right:122px;
} 
```

侧边栏 - 绿色框有这个：

```
sidebar {
background:green;
float:right;
width:238px;
height:240px;
clear:both;
margin-right:12px; 
```

我无法删除绿色和图像登录之间的空格。

# python - Python：将套接字绑定到 /dev/rfcommX

> ID：12528625
> 
> 赞同：2
> 
> 时间：2012-09-21T10:18:12.507
> 
> 标签：python, sockets, rfcomm

我有一个脚本，它通过串行端口在嵌入式设备上加载固件。该脚本将串口的 /dev/xxx 地址作为参数。我有一个特殊的设置，我通过蓝牙执行此操作。我设法通过蓝牙连接到 python 中的模块。但是，我找不到任何有关如何在 /dev/rfcomm0 等串行设备中注册本地套接字的示例/信息。

```
####### ORCA Bluetooth uploader Script #######
#As an input argument the script needs the BT Adress of the racer.
#if none is given, the script looks for nearby devices.

import bluetooth
import subprocess
import sys
import os

 #Check if we received a BT ADDR
if sys.argv[-1] != 'bt_comm.py':
  #Define the Pin for binding and the connection Port
  #Our Pin is 0000
  pin = "0000"
  #The Bootoader is listening on Port 1 for a connection
  port = 1
  rfcomm_port = 0
  #The BT Addr we get from the command line input
  #TAG:TODO:Check the input for sanity
  addr = sys.argv[-1]

  #Build the Firmware image
  subprocess.call("python ./px_mkfw.py --image ../../Firmware_orca/Images/px4fmu.bin  >    orca_fw",shell=True)

  #Create an RFCOMM Socket
  server_sock=bluetooth.BluetoothSocket( bluetooth.RFCOMM )

  #Connect to the device
  server_sock.connect((addr, port))
  print "Connected to ",addr 
```

这里我需要一些方法在 /dev/rfcomm0 注册 server_sock

```
 #Call the px_uploader script
  subprocess.call("python ./px_uploader.py --port /dev/rfcomm%d orca_fw" % rfcomm_port,shell=True)

  #Close the connection
  server_sock.close()

else:
  #Look for BT Devices and print them
  discovered_devices = bluetooth.discover_devices(lookup_names = True, flush_cache = True, duration = 20)
  if discovered_devices is not None:
    for addr in discovered_devices:
      print "Found bluetooth device: ", addr
  else:
    print "Could not find any bluetooth device nearby" 
```

# c# - C# 将不同的字符串格式转换为日期

> ID：12528627
> 
> 赞同：2
> 
> 时间：2012-09-21T10:18:25.887
> 
> 标签：c#, datetime, string-to-datetime

我有一个 WPF 窗口，其中包含一个文本框，用户可以在其中输入他想要的任何格式的日期，我必须在 datetime 变量中解析它，够简单吗？我尝试了各种格式，其中一些与 datatime.parse 一起使用，有些则不使用，那么我应该如何处理这些字符串？

一些例如格式（年份不是强制性的）：

*   9月21日
*   9 月 21 日
*   9 月 21 日
*   9 月 21 日
*   9月21日
*   21/09
*   21-09

只要它是一个适当的可读日期，任何吸引用户的东西，任何人都可以帮助我吗？

**更新**：根据评论，我正在修改输入字符串格式....如果用户可以以任何方式输入，但总是日后是月，然后是年（可选）......这可以管理吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:24:46.003

它不是一个答案，而是一个想法：

为什么不使用 Datepicker 会省去很多工作来尝试将每个可能的日期转换为有效的日期，而且它看起来也不错。看看[WPF Toolkit](http://wpf.codeplex.com/)的[Calender Datepicker Control](http://windowsclient.net/wpf/wpf35/wpf-35sp1-toolkit-calendar-datepicker-walkthrough.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T10:46:00.037

`DateTime.Parse``CultureInfo`除非您指定其他信息，否则适用于当前。意义：

```
21 Sept           // invalid
21st Sept         // invalid
21 September      // acceptable by `en` CultureInfo
21st September    // invalid
21 Sep            // acceptable by `en` CultureInfo
21/09             // invalid by `en` CultureInfo (09/21 is valid)
21-09             // invalid by `en` CultureInfo (09-21 is valid) 
```

但是，如果您想要一种让用户输入数据的好方法，请考虑使用始终捕获有效值的控件，而不是依赖用户手动输入您需要的确切信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T10:27:57.073

做你正在做的事是徒劳的。

用户可以插入`n`多种添加日期的方式。你将如何判断他插入了什么格式。

寻找日历控件，因为日历在任何地方都是相同的，任何用户，无论他在哪里，都会在其中插入正确的日期。在这种情况下，您可以要求日历`selecteddate`或某种财产。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T10:28:31.193

据我所知，这个问题没有好的答案。

`DateTime.Parse`仍然依赖于特定格式的日期。如果您愿意 - 您可以尝试多个 CultureInfos 并希望其中一个有效 - 但这仅适用于真实人们认为可以接受的一小部分书面日期。

即使您编写了大量代码来尝试找出普通人编写日期的所有可能方式 - 您仍然会遇到全球化问题 - 某些日期对于以不止一种方式进行解释是有效的。

> 04/05 <-- 那是什么日子？

除非这只是为了这样做；我认为最好的办法是简单地提供一个日期选择器控件或类似的东西，使用户更容易并为您提供 date 。除此之外 - 指出您期望的日期格式。

# .net - 为 POCO 、 EF5 添加持久性意识

> ID：12528631
> 
> 赞同：0
> 
> 时间：2012-09-21T10:18:45.717
> 
> 标签：.net, visual-studio, entity-framework, poco

[为清楚起见编辑]

这是我的场景我设法创建了我的数据库的 POCO 模型，仅包含两个表，博客和帖子。[模型]

我想创建另一个引用这些类的项目并向其中添加一些数据库持久性代码，我不知道如何。[达尔]

稍后，我将在 [BLL] 中使用此 [DAL] 来验证数据并将其呈现给 [Presentation]。

在其他项目中，我使用了 EF 但没有创建 POCOS，所以我最终在 BLL 中有数据访问代码，这一次我试图让事情严格划分。

过去，EF 为我做了一切，我只是添加了一个模型，然后我可以调用 SaveChanges()。现在，我是否必须在我试图创建的这个新 [DAL] 中写下我自己的“插入..进入...”？必须有一种自动化的方式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:58:20.467

[我使用 N 层模型](https://github.com/brunolm/NLayer)创建了一个实体框架的草稿项目。

`NLayerEF.Data`包含数据库模型（.edmx 文件和 .sql 文件）

`NLayerEF.Domain`包含无知的持久类

`NLayerEF.Infrastructure`包含一个继承自 的类`DbContext`，这是您与数据库通信所需的。添加属性

```
public DbSet<TYPE> EntitySetName { get; set; } 
```

您将 .edmx 文件中描述的表映射到此属性

```
public partial class StackOverflowEntities : DbContext
{
    public DbSet<Post> Post { get; set; } // Table Post
    public DbSet<User> User { get; set; } // Table User
    public DbSet<Tag> Tag { get; set; }   // Table Tag
} 
```

# binding - Caliburn Micro Update RowDetails of a Datagrid

> ID：12528632
> 
> 赞同：0
> 
> 时间：2012-09-21T10:18:50.860
> 
> 标签：binding, datagrid, refresh, caliburn.micro, rowdetails

让我解释一下我的问题。我正在使用 Caliburn Micro 并有一个数据网格，其中 ObservableCollection 被绑定为 Itemsource：

```
private static ObservableCollection<Models.GamesProperties> _dgGames;

public ObservableCollection<Models.GamesProperties> DgGames
{
    get { return _dgGames; }
    set
    {
        _dgGames = value;
        NotifyOfPropertyChange(() => DgGames);
    }
} 
```

因此，当我从数据库加载数据时，集合将被填充并绑定到我的数据网格（称为 DgGames）

到目前为止一切都很好。我已经为每个 DataRow 定义了“DataRowDetails”。包含一个 ImageSource、一些 TextBlocks 等。上面提到的集合还包含那些 DataRowDetails。

我现在为对话窗口创建了另一个 View 和 ViewModel 以更改 DataRowDetails。它确实有效，但数据网格 (DgGames) 不会应用这些更改。它没有显示我对集合所做的任何更新。我错过了什么？

提前感谢那些可以帮助我的人。

如果您需要更多信息，请随时询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:53:08.857

为了在网格中也看到动态修改，`Models.GamesProperties`必须正确实施`INotifyPropertyChanged`。由于您使用的是 Caliburn，因此您可能希望从`PropertyChangedBase`.

# symfony - Symfony2在createForm时不加载类型

> ID：12528633
> 
> 赞同：2
> 
> 时间：2012-09-21T10:18:53.053
> 
> 标签：symfony, symfony-2.1

我想要 createForm 但 symfony 不加载我的顶级表单：

这是我的代码：

在我的 frontend.html.twig 中：

```
{% render "NewsletterBundle:Default:form" %} 
```

在 NewsletterBundle/Form/NewsletterUserType.php 中：

```
<?php

namespace LoPati\NewsletterBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;
use JMS\DiExtraBundle\Annotation\Service;
use JMS\DiExtraBundle\Annotation\Tag;

/**
 * @Service("lopati.form.newsletter_user")
 * @Tag("form.type", attributes = { "alias" = "mp_newsletter_user" })
 */
class NewsletterUserType extends AbstractType
{

    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
                ->add('email')
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'LoPati\NewsletterBundle\Entity\NewsletterUser'
        ));
    }

    public function getName()
    {
        return 'mp_newsletter_user';
    }

} 
```

在 NewsletterBundle/Controller/DefaultController.php 中：

```
<?php

namespace LoPati\NewsletterBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Request;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Method;

use LoPati\NewsletterBundle\Entity\NewsletterUser;

class DefaultController extends Controller 
{

    /**
     * @Template()
     */
    public function formAction(Request $request)
    {
        $newsletterUser = new NewsletterUser();

       $form = $this->createForm('mp_newsletter_user', $newsletterUser);

        return array('form' => $form->createView());
    }

} 
```

在 NewsletterBundle/Resources/views/Default/form.html.twig

```
<form action="" method="post" class="newsletter">
    {{ form_widget(form.email) }}
    {{ form_widget(form._token) }}    
    <button type="submit">newsletter</button>
</form> 
```

这是错误：

> 渲染模板期间引发异常（“无法加载类型“mp_newsletter_user””）

什么时候出问题？

谢谢

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T10:21:50.633

您已将表单定义为服务，因此，将您的创建表单更改为：

```
 // $form = $this->createForm('mp_newsletter_user', $newsletterUser);
 $form = $this->createForm($this->get('mp_newsletter_user'), $newsletterUser); // you need use $this->get to get a service 
```

这也应该有效：

```
 $this->createForm(new \LoPati\NewsletterBundle\Form\NewsletterUserType(), $newsletterUser); 
```

# makefile - 如何执行列表中的每个命令？

> ID：12528637
> 
> 赞同：10
> 
> 时间：2012-09-21T10:19:08.297
> 
> 标签：makefile

如果我有*n 个*命令的列表*c* = *c1* ... *cn*，我如何才能为给定的目标执行它们？我尝试了*foreach*构造

```
$(foreach x,$(c),./$(x)) 
```

但这会将所有命令放在一行上。有什么线索吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-21T10:24:26.000

如果不需要检查是否成功，那么添加分号应该可以工作：

```
$(foreach x,$c,./$(x);) 
```

如果列表中的命令之一返回失败，则需要失败，则需要逐步中断它。我们不是直接执行命令，而是将执行包装在一个 make 函数中：

```
define execute-command
$(1)

endef

execute-list:
        $(foreach x,$(c),$(call execute-command,./$(x))) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-21T10:46:20.117

您发现了问题（“但这将所有命令放在了一行”）。`$x`每当您在循环中展开时，您只需要添加一个换行符。

```
define \n

endef 
```

现在只需`$(foreach x,$c,./$(x)${\n})`在你的食谱中使用。

# asp.net-mvc - 实体框架创建我无法放在 Azure 上的设置表

> ID：12528643
> 
> 赞同：0
> 
> 时间：2012-09-21T10:19:36.080
> 
> 标签：asp.net-mvc, entity-framework, azure, cloud

我一直在尝试创建一个 ASP.net - MVC 应用程序，它使用实体框架连接到 Azure 数据库。

我使用数据库优先方法尝试创建模型，我能够连接到我的 azure 数据库并成功创建模型。

一切都运行良好，我能够从我的 azure 数据库中检索我的值，然后我尝试将网站发布到 Azure 网站。该网站运行良好，我已将该网站注册为能够使用 azure 数据库。当我单击点击控制器以访问数据库的按钮时，我会收到“抱歉，处理您的请求时发生错误”。

当我进一步研究这一点时，我发现当我使用向导创建我的实体数据模型时，它为我的实体连接设置创建了一个到本地数据库的连接字符串。我猜这是在保存一些实体框架设置，但我的问题显然是当我将网站发布到 Azure 时，它​​无法访问这个本地数据库。

关于如何将这个数据库放到 Azure 上或避免使用这个额外的数据库的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:29:13.350

[这](http://sqlazuremw.codeplex.com/)是将本地数据库迁移到 Azure 的最佳工具。在发布站点之前，将 web.config 更改为指向 Azure 数据库。它会解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:03:30.107

就像您已经解释的那样，您的 web.config 似乎仍然指向您的本地数据库。尝试查看您的 web.config 并查看是否有指向**.\SQLExpress**、**localhost\SQLExpress**、**"."的连接字符串。**, ...

然后，就像 Geenthanga 解释的那样，您需要在部署之前修改此值（它应该指向您的 SQL Azure 数据库）。但是您不应该手动执行此操作！相反，请考虑使用 web.config 转换，如下所述：[Web 部署：Web.Config 转换](http://blogs.msdn.com/b/webdev/archive/2009/05/04/web-deployment-web-config-transformation.aspx)。

这样您就可以拥有 2 个 web.config 转换文件：

*   Web.Debug.config：此文件将包含转换以添加指向**本地数据库**的连接字符串。
*   Web.Release.config：此文件将包含转换以添加指向**SQL Azure**的连接字符串。

# mysql - 计算Mysql表中的重复记录？

> ID：12528644
> 
> 赞同：26
> 
> 时间：2012-09-21T10:19:36.807
> 
> 标签：mysql, duplicates

我有桌子，结构如下。

表

```
id   name  
1    AAA
2    BBB
3    BBB
4    BBB
5    AAA
6    CCC

select count(name) c from tbl
group by name having c >1 
```

返回此结果的查询：

```
AAA(2)  duplicate
BBB(3)  duplicate
CCC(1)  not duplicate 
```

与 AAA 和 BBB 重复的名称。我想要的最终结果是对这些重复记录的计数。

结果应该是这样的： 重复产品总数（**2**）

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-21T10:24:16.067

方法是有一个嵌套查询，每个重复一行，外部查询只返回内部查询结果的计数。

```
SELECT count(*) AS duplicate_count
FROM (
 SELECT name FROM tbl
 GROUP BY name HAVING COUNT(name) > 1
) AS t 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-21T10:29:55.473

使用 IF 语句获得所需的输出：

```
SELECT name, COUNT(*) AS times, IF (COUNT(*)>1,"duplicated", "not duplicated") AS duplicated FROM <MY_TABLE> GROUP BY name 
```

输出：

```
AAA 2 duplicated
BBB 3 duplicated
CCC 1 not duplicated 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-02-22T10:25:21.300

**对于列表：**

```
SELECT COUNT(`name`) AS adet, name
FROM  `tbl` WHERE `status`=1 GROUP BY `name`
ORDER BY `adet`  DESC 
```

## [![表视图](../Images/67d9bce16b983f5892b92d46220f9f04.png)](https://i.stack.imgur.com/Vag69.png)

**对于总计数：**

```
 SELECT COUNT(*) AS Total
    FROM (SELECT COUNT(name) AS cou FROM tbl GROUP BY name HAVING cou>1 ) AS virtual_tbl 
```

// 总计：5

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-09-21T10:23:48.027

为什么不把它包装在一个子查询中：

```
SELECT Count(*) TotalDups
FROM
(
    select Name, Count(*)
    from yourTable
    group by name
    having Count(*) > 1
) x 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/ba202/1)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-12-14T00:45:56.957

接受的答案**计算有重复的行数**，而不是重复的**数量**。如果要计算**重复的实际数量**，请使用：

```
SELECT COALESCE(SUM(rows) - count(1), 0) as dupes FROM(

    SELECT COUNT(1) as rows
    FROM `yourtable`
    GROUP BY `name`
    HAVING rows > 1

) x 
```

这样做是将分组中的重复项加起来，然后减去具有重复项的记录数量。原因是按总计分组并非所有重复项，每个分组的一条记录是唯一行。

小提琴：[http ://sqlfiddle.com/#!2/29639a/3](http://sqlfiddle.com/#!2/29639a/3)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-28T12:01:37.027

SQL代码是：

```
SELECT VERSION_ID, PROJECT_ID, VERSION_NO, COUNT(VERSION_NO) AS dup_cnt
FROM MOVEMENTS
GROUP BY VERSION_NO
HAVING (dup_cnt > 1 && PROJECT_ID = 11660) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-16T11:21:29.993

我在 PHP 中对我自己的表使用此查询，但它只给我一个结果，而我想要每个用户名的重复数量，这可能吗？

```
SELECT count(*) AS duplicate_count
FROM (
 SELECT username FROM login_history
 GROUP BY username HAVING COUNT(time) > 1
) AS t; 
```

# php - 如何将 google api v2 升级到 v3？

> ID：12528651
> 
> 赞同：-2
> 
> 时间：2012-09-21T10:19:53.490
> 
> 标签：php, mysql, google-maps

如何将 google api v2 升级到 v3？我想将我的源代码升级到 v3。
我尝试搜索谷歌，但我没有得到任何合适的结果。

```
var maprecent;
function init_maprecent() {
    function createMarker(point, myHtml) { 
        var marker = new GMarker(point);
        GEvent.addListener(marker, "click", function() 
        { maprecent.openInfoWindowHtml(point, myHtml, {maxWidth:200}); }); return marker; }
        var markerindex = 0; var markers = new Array();
        function animate_marker() {
            if(markerindex==markers.length) {markerindex=0;} 
            GEvent.trigger(markers[markerindex], "click"); markerindex++; 
            setTimeout(animate_marker, 5000);
        }

        var bottomLeft = new GControlPosition(G_ANCHOR_BOTTOM_LEFT);

        maprecent = new GMap2(document.getElementById("smallmaprecent"));     
        maprecent.addControl(new GSmallZoomControl());     
        maprecent.addControl(new GMapTypeControl(), bottomLeft);

        maprecent.setCenter(new GLatLng(11.25,-60.66667), 10);

        var m0 = createMarker(new GLatLng(-32.3153071,115.8290544),
        'Project on abcd.com<br>Oct 04 2010 03:41PM<br><a target="_parent" href="http://www.gurusocialscript.com/project_9_project-on-freelancerclonescriptcom.html">View project</a><br>2  ');
        maprecent.addOverlay(m0);
        markers.push(m0);
        maprecent.addOverlay(new GPolygon([new GLatLng(-32.3153071,115.8290544), 
    new GLatLng(-32.3153071,115.8290544), 
    new GLatLng(-32.3153071,115.8290544),
    new GLatLng(-32.3153071,115.8290544), 
    new GLatLng(-32.3153071,115.8290544)],
     "#000000", 1, 0.5, "#444488", 0.1));</br></br></br>
    animate_marker();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:23:04.437

您需要浏览版本 3 的文档，并重写任何版本 2 代码以使用其版本 3 对应项。

例如，`new GMap2()`将成为`new google.maps.Map()`，`new GLatLng()`将成为`new google.maps.LatLng()`等等。

# php - 如何从一个php页面获取文本字段值到另一个页面？

> ID：12528652
> 
> 赞同：-4
> 
> 时间：2012-09-21T10:19:55.173
> 
> 标签：php, javascript, mysql, html

hiii 我只想通过单击彼此链接的第一页的文本字段的值来从一个 php 页面获取文本字段的值到另一个页面，在单击第一页的文本字段的值后，该值应该是在下一页的文本字段中自动设置，我为此使用了以下代码

```
 $haspid= $row["haspid"];
         if (strlen(trim($haspid)) == 0)
       {
        echo "<td>&nbsp;</td>";
        }
        else 
        {

              echo "<td valign='bottom'><a href='window.history.back();' Name=" .  $uName  . " && haspid=" .  $haspid . ">" . $haspid . "</p></td>";
          }
        echo "</tr>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:58:36.303

**第 1 页代码：（**用户输入数据的地方）

```
<form method="post" action="submit.php">
    <input type="text" name="customerName" />
    <input type="submit" />
</form> 
```

**第 2 页代码：（**您要获取数据的位置）

```
<?php
    echo $_POST['customerName'];
?> 
```

**解释：**

`$_POST`是php的`global`变量。在提交时，`<form>`我们可以得到类似的值。因此，在获得价值后，您可以以您想要的方式使用它。`HTML``method=post``$_POST[input_field_name]``$_POST[input_field_name]`

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:22:08.250

将您要传递的值添加到访问者单击的 url ...

```
<a href="theotherpage.php?value=XYZ">XYZ</a> 
```

# jquery - 幻灯片固定到浏览器窗口宽度和固定纵横比隐藏下面的内容

> ID：12528662
> 
> 赞同：1
> 
> 时间：2012-09-21T10:20:35.610
> 
> 标签：jquery, jquery-plugins, slideshow, jquery-cycle, aspect-ratio

我准备了一个带有非常大的图像和 prev/next 命令的幻灯片。幻灯片始终适合浏览器窗口（可调整大小），并且当图像调整大小时，它们会保持纵横比。

对于幻灯片，我使用了 jQuery Cycle 插件。幻灯片运行良好，但我对必须始终位于幻灯片下方但隐藏在幻灯片容器**下方**的内容存在问题（在使用循环插件之前，我有一个工作幻灯片，我只是使用简单的 JS在 scontainer 中加载下一张图像。但是没有淡入淡出效果，而且交换真的很难看）。

我认为问题在于幻灯片没有声明高度。但如果我想调整幻灯片大小，我不能声明高度。

带有工作幻灯片但内容容器位置错误的现场示例：[**HERE**](http://piana.si/test/index.php)。

具有正确容器位置且没有幻灯片的实时示例：[**这里**](http://piana.si/test/index01.php)

我很迷茫，任何帮助都会很棒。

我使用的代码：

```
$(function() {
// retrieve list of slides from server
$.getJSON('slidelist.php', startSlideshow);

function startSlideshow(slides) {
    /* server returns an array of slides which looks like this:
    [
        'foto/02.jpg',
        'foto/03.jpg',
        'foto/04.jpg',
        'foto/05.jpg',
        'foto/06.jpg',
        'foto/07.jpg',
    ]
    */

    var totalSlideCount = 1 + slides.length;

    var $slideshow = $('#slideshow');

    // markup contains only a single slide; before starting the slideshow we 
    // append one slide and prepend one slide (to account for prev/next behavior)
    $slideshow.prepend('<img class="imgFotoPasica" src="'+slides.pop()+'" />');
    $slideshow.append('<img class="imgFotoPasica" src="'+slides.shift()+'" />');

    // start slideshow
    $('#slideshow').cycle({
        fx: 'fade',
        startingSlide: 1,  // start on the slide that was in the markup
        timeout:  0,
        speed:    800,
        prev:    '#prev',
        next:    '#next',
        before:   onBefore,
        containerResize: 0,  // resize container to fit largest slide - dodal zato, da se slika veča/manjša proporcionalno
        slideResize: 0,  // force slide width/height to fixed size before every transition - dodal zato, da se slika veča/manjša proporcionalno
        fit: 0,  // force slides to fit container - 0 izklopljeno 1 vklopljeno
    });

    function onBefore(curr, next, opts, fwd) {
        // on Before arguments:
        //  curr == DOM element for the slide that is currently being displayed
        //  next == DOM element for the slide that is about to be displayed
        //  opts == slideshow options
        //  fwd  == true if cycling forward, false if cycling backward

        // on the first pass, addSlide is undefined (plugin hasn't yet created the fn yet)
        if (!opts.addSlide)
            return;

        // have we added all our slides?
        if (opts.slideCount == totalSlideCount)
            return;

        // shift or pop from our slide array 
        var nextSlideSrc = fwd ? slides.shift() : slides.pop();

        // add our next slide
        opts.addSlide('<img class="imgFotoPasica" src="'+nextSlideSrc+'" />', fwd == false);
    };
}; 
}); 
```

* * *

```
<!doctype html>
<html lang="hr">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/reset.css"/>
    <link rel="stylesheet" href="css/css.css"/>
</head>

<body>
    <div id="ovoj">
        <div id="glava"><h1>HEAD</h1></div>
        <div id="ovojSlideshow">
            <div>
                <a href="#"><span id="prev">Prev</span></a>
                <a href="#"><span id="next">Next</span></a>
            </div>
            <div id="slideshow">
                <img class="imgFotoPasica" src="foto/01.jpg" />
            </div>
        </div>
        <div id="vsebina"><h1>ALL CONTENT, HAVE TO BE ALWAYS UNDER THE SLIDESHOW</h1></div>
    </div>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://malsup.github.com/chili-1.7.pack.js"></script>
    <script type="text/javascript" src="http://malsup.github.com/jquery.cycle.all.js"></script>
    <script type="text/javascript" src="js/SlideShow_01.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:14:45.090

在 ops.addslide 之后试试这个：
`$('#ovojSlideshow').height($(curr).height());`

要捕获窗口事件的调整大小：

```
$(window).resize(function() {
 $('#ovojSlideshow').height($(curr).height());
 // or you can change the width/etc
}); 
```

JS 小提琴示例：http: [//jsfiddle.net/lucuma/CqJDy/](http://jsfiddle.net/lucuma/CqJDy/)

您会注意到我正在使用窗口调整大小事件来设置幻灯片的高度。我以您的项目为例并删除了不必要的组件来演示它。

# regex - 在 PHP 中使用 preg_replace 转换字符串

> ID：12528666
> 
> 赞同：1
> 
> 时间：2012-09-21T10:20:42.007
> 
> 标签：regex, preg-replace, preg-match

我有这个字符串

```
$string = "some words and then #1.7 1.7 1_7 and 1-7"; 
```

我希望将**#1.7/1.7/1_7 和 1-7**替换为**S1E07**。
当然，不是“1.7”只是一个例子，它可以是“3.15”。

我设法创建了匹配上述 4 个变体的正则表达式

```
/\#\d{1,2}\.\d{1,2}|\d{1,2}_\d{1,2}|\d{1,2}-\d{1,2}|\d{1,2}\.\d{1,2}/ 
```

但我无法弄清楚如何使用 preg_replace （或类似的东西？）来实际替换匹配项，因此它们最终会像**S1E07**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:36:15.893

如果数字小于，则需要`preg_replace_callback`填充。`0``10`

```
$string = "some words and then #1.7 1.7 1_7 and 1-7";
$string = preg_replace_callback('/#?(\d+)[._-](\d+)/', function($matches) {
  return 'S'.$matches[1].'E'.($matches[2] < 10 ? '0'.$matches[2] : $matches[2]);
}, $string); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T10:40:41.763

您可以使用这个简单的字符串替换：

```
preg_replace('/#?\b(\d{1,2})[-._](\d{1,2})\b/', 'S${1}E${2}', $string); 
```

但它不会为剧集编号产生零填充数字：

```
// some words and then S1E7 S1E7 S1E7 and S1E7 
```

您将不得不使用评估修饰符：

```
preg_replace('/#?\b(\d{1,2})[-._](\d{1,2})\b/e', '"S".str_pad($1, 2, "0", STR_PAD_LEFT)."E".str_pad($2, 2, "0", STR_PAD_LEFT)', $string); 
```

...并使用 str_pad 添加零。

```
// some words and then S01E07 S01E07 S01E07 and S01E07 
```

如果您不希望填充季节编号，您可以拨打第一个 str_pad 电话。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T10:36:40.153

我相信这会做你想要的......

```
/\#?([0-9]+)[._-]([0-9]+)/ 
```

换句话说...

*   `\#?`- 可以从`#`
*   `([0-9]+)`- 至少捕获一位数字
*   `[._-]`- 找一个`.`，`_`或者`-`
*   `([0-9]+)`- 至少捕获一位数字

然后你可以用它来代替...

```
S$1E$2 
```

它将先放出`S`第一个捕获的组，然后放出`E`第二个捕获的组

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T10:37:03.787

您需要在要重用的部分周围加上括号 ==> 捕获它们。`$1`然后，您可以使用（或 ${1} 如果组超过 9）访问第一组的替换字符串中的这些值，`$2`对于第二组......

这里的问题是你最终会得到 $1 - $8，所以我会将表达式重写为如下所示：

```
/#?(\d{1,2})[._-](\d{1,2})/ 
```

并替换为

```
S${1}E${2} 
```

我在[writecodeonline.com](http://writecodeonline.com/php/)上对其进行了测试：

```
$string = "some words and then #1.7 1.7 1_7 and 1-7";
$result = preg_replace('/#?(\d{1,2})[._-](\d{1,2})/', 'S${1}E${2}', $string); 
```

# java - XML 数字签名 Java

> ID：12528667
> 
> 赞同：9
> 
> 时间：2012-09-21T10:20:42.257
> 
> 标签：java, xml, digital-signature, sha256

我需要在 JAVA 中对我的 XML 消息进行数字签名：生成的 XML 签名应具有以下格式：

```
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
<SignedInfo>
<CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
<SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" />
<Reference URI="">
<Transforms>
<Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
</Transforms>
<DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256" />
<DigestValue>DsP5NLca+plhp9tZvGwykfb2whQYt3CQ5sbsVd9Q9aE=</DigestValue>
</Reference>
</SignedInfo>
<SignatureValue>
LrfE0po3YPvVxB/m77iBWWiR07Ghiuhuj7tO2C2LKqZK2cLrAiidt+3tjbJ3m16quCFxfh7bmjRtJsGi7a3HKtK
qY4auqrjNB62AtYrxvm+7Qd/cRacom4e3M9uF9JD1zTfoGun9w4WDfDrDaoZ+ZwUgNtf6sTYO5Ctcj5sYcD0=
</SignatureValue>
<KeyInfo>
<KeyName>7D665C81ABBE1A7D0E525BFC171F04D276F07BF2</KeyName>
</KeyInfo>
</Signature> 
```

任何人都可以提供一些代码帮助吗？

编辑：

我想出了这个代码：

```
private static Document sign(Document doc) throws InstantiationException, IllegalAccessException, ClassNotFoundException,
            NoSuchAlgorithmException, InvalidAlgorithmParameterException, KeyException, MarshalException, XMLSignatureException,
            FileNotFoundException, TransformerException {

        String providerName = System.getProperty("jsr105Provider", "org.jcp.xml.dsig.internal.dom.XMLDSigRI");

        XMLSignatureFactory fac = XMLSignatureFactory.getInstance("DOM", (Provider) Class.forName(providerName).newInstance());

        Reference ref = fac.newReference("", fac.newDigestMethod(DigestMethod.SHA256, null));

        // Create the SignedInfo
        SignedInfo si = fac.newSignedInfo(
                fac.newCanonicalizationMethod(CanonicalizationMethod.EXCLUSIVE, (C14NMethodParameterSpec) null),
                fac.newSignatureMethod(SignatureMethod.RSA_SHA1, null), Collections.singletonList(ref));

        KeyPairGenerator kpg = KeyPairGenerator.getInstance("RSA");
        kpg.initialize(512);
        KeyPair kp = kpg.generateKeyPair();

        KeyInfoFactory kif = fac.getKeyInfoFactory();
        KeyValue kv = kif.newKeyValue(kp.getPublic());

        KeyInfo ki = kif.newKeyInfo(Collections.singletonList(kv));

        DOMSignContext dsc = new DOMSignContext(kp.getPrivate(), doc.getDocumentElement());

        XMLSignature signature = fac.newXMLSignature(si, ki);
        signature.sign(dsc);

        TransformerFactory tf = TransformerFactory.newInstance();
        Transformer trans = tf.newTransformer();
        trans.transform(new DOMSource(doc), new StreamResult(new FileOutputStream("mySignedFile")));

        return doc;
    } 
```

但问题是我得到：

```
<SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/> 
```

并不是 ：

```
<SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T11:36:15.370

这是解决方案：

我在此链接上找到它 [http://mail-archives.apache.org/mod_mbox/santuario-dev/200907.mbox/%3C4A704241.9060806@sun.com%3E](http://mail-archives.apache.org/mod_mbox/santuario-dev/200907.mbox/%3C4A704241.9060806@sun.com%3E) 问题是 RSA-SHA256 算法：

这是生成的代码：

```
private static Document sign(Document doc) throws InstantiationException, IllegalAccessException, ClassNotFoundException,
            NoSuchAlgorithmException, InvalidAlgorithmParameterException, KeyException, MarshalException, XMLSignatureException,
            FileNotFoundException, TransformerException {

        String providerName = System.getProperty("jsr105Provider", "org.jcp.xml.dsig.internal.dom.XMLDSigRI");

        XMLSignatureFactory fac = XMLSignatureFactory.getInstance("DOM", (Provider) Class.forName(providerName).newInstance());

        DigestMethod digestMethod = fac.newDigestMethod(DigestMethod.SHA256, null);
        Transform transform = fac.newTransform(ENVELOPED, (TransformParameterSpec) null);
        Reference reference = fac.newReference("", digestMethod, singletonList(transform), null, null);
        SignatureMethod signatureMethod = fac.newSignatureMethod("http://www.w3.org/2001/04/xmldsig-more#rsa-sha256", null);
        CanonicalizationMethod canonicalizationMethod = fac.newCanonicalizationMethod(EXCLUSIVE, (C14NMethodParameterSpec) null);

        // Create the SignedInfo
        SignedInfo si = fac.newSignedInfo(canonicalizationMethod, signatureMethod, singletonList(reference));

        KeyPairGenerator kpg = KeyPairGenerator.getInstance("RSA");
        kpg.initialize(2048);

        KeyPair kp = kpg.generateKeyPair();

        KeyInfoFactory kif = fac.getKeyInfoFactory();
        KeyValue kv = kif.newKeyValue(kp.getPublic());

        // Create a KeyInfo and add the KeyValue to it
        KeyInfo ki = kif.newKeyInfo(Collections.singletonList(kv));
        DOMSignContext dsc = new DOMSignContext(kp.getPrivate(), doc.getDocumentElement());

        XMLSignature signature = fac.newXMLSignature(si, ki);
        signature.sign(dsc);

        TransformerFactory tf = TransformerFactory.newInstance();
        Transformer trans = tf.newTransformer();

        // output the resulting document
        OutputStream os;

        os = new FileOutputStream("xmlOut.xml");

        trans.transform(new DOMSource(doc), new StreamResult(os));
        return doc;

    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-24T23:19:06.003

你得到了`<SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>`，因为那是你要求的：`fac.newSignatureMethod(SignatureMethod.RSA_SHA1, null)`。正如你所知道的那样，[https://blogs.oracle.com/mullan/entry/using_stronger_xml_signature_algorithms](https://blogs.oracle.com/mullan/entry/using_stronger_xml_signature_algorithms)状态，`fac.newSignatureMethod("http://www.w3.org/2001/04/xmldsig-more#rsa-sha256", (SignatureMethodParameterSpec) null)`会得到你`<SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" />`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:24:36.783

这些是标准的 XML 签名。有关如何完成此操作的规范，请参阅[W3 文档中的“XML 签名语法和处理” 。](http://www.w3.org/TR/2001/PR-xmldsig-core-20010820/)在 google 上快速搜索导致 Oracle 编写的关于在 Java 中集成 XML 签名的方法：[XML 数字签名 API](http://docs.oracle.com/javase/6/docs/technotes/guides/security/xmldsig/XMLDigitalSignature.html)。如果您还有其他问题，请向我们展示您的尝试。

# asp.net - 域外托管的 .net 站点的 Windows 身份验证

> ID：12528668
> 
> 赞同：1
> 
> 时间：2012-09-21T10:20:42.880
> 
> 标签：asp.net, windows, authentication

我能否访问托管在域外 IIS 服务器上但在启用了集成 Windows 身份验证 (AD) 的网络中的 ASP.net 网站？如果是这样，需要进行哪些配置更改？

# objective-c - 将操作分配给 Web 链接 UIDataDetectorTypeLink

> ID：12528671
> 
> 赞同：1
> 
> 时间：2012-09-21T10:20:50.877
> 
> 标签：objective-c, ios, xcode

我曾经`UIDataDetectorTypeLink`表示一个字符串是一个链接。在我的视图中点击它可以正常工作 - 它会在 Safari 中打开 URL

**我的问题是；是否可以阻止 iOS 打开 URL，以便我可以弹出一个对话框来警告用户他们即将离开我的应用程序？**

当前行为：点击`-->`链接在 Safari 中打开链接

期望的行为：点击链接`-->`提示用户并询问他们是否要离开应用程序 是`-->`打开 safari 不`-->`留在应用程序中

我尝试这样做的原因是我认为它在 UI 行为方面更好，但您可能会争辩说，由于链接显然是一个链接，用户应该知道他们即将离开应用程序

# jquery - 何时以及为什么使用 jQuery 检查元素是否存在

> ID：12528674
> 
> 赞同：2
> 
> 时间：2012-09-21T10:21:02.317
> 
> 标签：jquery, dom

我最近编写了一个小脚本，对无序列表进行了简单的显示/隐藏操作。

据我了解，jQuery 只会在有问题的元素存在时执行一个函数（因此如果它是“真”）。所以没有实际的理由去检查元素的长度是否大于 0，它是否有一个父节点是 body 等等。正确的？

如果以上是准确的，那么这种检查实际上何时会有所帮助？

[http://jsbin.com/ehicik/1/edit](http://jsbin.com/ehicik/1/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:30:26.020

没错，jQuery 只会尝试调用的方法（如果它存在）。

但是使用：

```
if($("#someElement").length) { ... Do Stuff }; 
```

如果您正在混合使用 jQuery 和 JavaScript，这将非常有用 - 我发现您通常无法使用 jQuery 实现所有功能，并且如果您尝试对不存在的对象进行 JavaScript 操作，则会出现脚本错误。

例如，我希望从“帐单地址”复制“送货地址” - 但如果产品可发货（下载的产品不需要送货），我的页面只会呈现“送货地址” - 所以我检查“送货地址”是否存在在我在 jQuery 中做任何进一步的工作之前。

这只是一个粗略的例子，我很感激你也不能渲染 jQuery 按钮 - 也就是说，如果你有一个中央`.js`文件，它更相关，因为你可能有一些更通用的 JS 将尝试在每个页面上运行.

所以那是我检查存在的对象的时候。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T10:23:08.930

如果您想要执行的操作在元素不存在的情况下可能会级联成错误，那么首先进行检查会很有帮助。一些相当琐碎的事情（如显示/隐藏）可能不需要检查。

（尽管确保一切按预期工作并优雅地失败是一种很好的编程习惯。检查会对此有所帮助，或者至少是 try...catch 语句。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:24:43.907

这取决于元素实际存在对您/您的脚本有多重要。假设您的脚本的其余部分取决于您需要从元素中检索的一些数据，而该元素不存在，您会想了解它并对其采取行动。在这种情况下，检查显然非常有用。

在简单的显示/隐藏的情况下，对此的需求可能很小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T10:26:06.113

这里的长度属性将返回已被选择的元素的数量`$('#id')`。如果它返回零，则表示没有匹配或选择的项目。

```
<script>
        $(document).ready(function () {
            alert($('#id').length);
        });
 </script> 
```

# windows-phone-7 - Webclient 中的 Post 方法

> ID：12528675
> 
> 赞同：1
> 
> 时间：2012-09-21T10:21:03.957
> 
> 标签：windows-phone-7, c#-4.0, silverlight-4.0, webclient, webclient.uploaddata

网络服务发布方法对我来说是新的。你能帮我弄清楚我做错了什么吗？

```
WebClient webClient = new WebClient();

webClient.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";

                webClient.Encoding = Encoding.UTF8;
                webClient.UploadStringCompleted += new UploadStringCompletedEventHandler((sender, e) =>
                {
                    if (e.Error != null)
                    {
                        return;
                    }
                    string result = e.Result;
                });
                string uri = "http://localhost:60696/service/getlogin/";
                StringBuilder postData = new StringBuilder();
                postData.AppendFormat("/{0}/{1}", "username", HttpUtility.UrlEncode(textBox1.Text));
                postData.AppendFormat("/{0}/{1}", "password", HttpUtility.UrlEncode(textBox2.Text));
                webClient.Headers[HttpRequestHeader.ContentLength] = postData.Length.ToString();
                webClient.UploadStringAsync(new Uri(uri, UriKind.RelativeOrAbsolute),"POST", postData.ToString()); 
```

顺便说一句，如果我访问带有参数和值的 url，它的工作正常

像这样`("http://localhost:60696/service/getlogin/username,123,password,456").`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:58:43.280

postdata 似乎编码错误，应该是这样的：

```
postData.AppendFormat("{0}={1}", "username", HttpUtility.UrlEncode(textBox1.Text));
postData.AppendFormat("&{0}={1}", "password", HttpUtility.UrlEncode(textBox2.Text)); 
```

# ruby-on-rails - 将 collection_action 方法添加到 ruby on rails 中活动管理员的顶部菜单项

> ID：12528680
> 
> 赞同：2
> 
> 时间：2012-09-21T10:21:16.280
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在管理部分的项目中使用了活动的管理 gem。

我写了一个自定义方法使用

collection_action :method_name 做

//代码在这里

结尾

现在我想将此方法名称添加到菜单项中。我怎样才能做到这一点？

请让我知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-09T16:07:24.397

collection_action 会创建对应的路由和动作。如果您需要在菜单项中提供此操作，则必须具有以下几行

```
action_item only: :index do
  link_to 'Name the button', action: 'method_name'
end 
```

# richfaces - rich:progressBar 和 a4j:status

> ID：12528688
> 
> 赞同：-1
> 
> 时间：2012-09-21T10:21:56.997
> 
> 标签：richfaces, progress-bar, status, ajax4jsf

我有一个“a4j:status”，它表示我的应用程序中的 ajax 活动。在一个页面上，我有一个“rich:progressBar”，每秒更新一次。如何避免在进度条更新时显示我的 a4j:status？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:42:24.993

尝试将您的“rich:progressBar”放在“a4j:region”中。

“a4j:status”只会显示其父“a4j:region”的进度。

# html - 表格数据不接受“溢出”样式属性

> ID：12528689
> 
> 赞同：2
> 
> 时间：2012-09-21T10:21:59.463
> 
> 标签：html, css, html-table, overflow

请参阅[示例](http://jsbin.com/ulubop/1/edit)。我提供`height:150px; overflow:auto;`给所有`<td>`标签。在较少的内容上，高度工作正常。更多内容需要垂直滚动条来。但它不适用于表格单元格。

如果我在带有 style 属性`<div>`的标签内使用意味着滚动正在工作。`<td>``height:inherit; overflow:auto;`

`<td>`溢出标签有什么解决方案或原因吗？

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:25:23.707

嗨，现在如果你改变你的`td display properties`比**它的工作**

像这样

```
td{
display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:25:12.863

可以通过指定`display: block;`和`float: left;`你的TD的风格来解决

```
td { height:150px; overflow:auto; display: block; float: left; } 
```

演示：http: [//jsbin.com/ofufuf/1/edit](http://jsbin.com/ofufuf/1/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:29:05.487

表格标签不直接支持溢出属性。

您必须按照您尝试的方式执行此操作，即您必须在 td 中插入一个 div，然后在该 div 中添加溢出。

`<table> <tr> <td> <div style="height:100px;overflow:auto;">abc</div> </td> </tr> </table>`

# objective-c - nsdictionary 数组目标 c 中项目的关键示例

> ID：12528691
> 
> 赞同：1
> 
> 时间：2012-09-21T10:22:03.833
> 
> 标签：objective-c, nspredicate, predicate, key-value-coding

我有一个字典数组，其中包含一些值和键。假设键 k1、k2、k3、k4 等...从这个数组中我需要找到键 k1 的对象，我知道同一字典的键 k3 的对象。是否有任何不使用迭代的方法，即使用谓词或键值编码（KVC）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:33:10.463

如果不搜索数组，这是不可能的，因为`k3`无法知道它被用作字典之一中的键。事实上，它可以用作多个字典中的键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:28:36.290

不，您需要遍历数组，检查键`k3`并`k1`在找到匹配项时返回。

# java - 从长远来看，Java 随机总是呈现负面趋势？

> ID：12528694
> 
> 赞同：11
> 
> 时间：2012-09-21T10:22:24.207
> 
> 标签：java, random, trend

我正在构建一个应用程序，为此我有一个用测试数据填充它的功能。简短的大纲：

```
 HashMap<String, Long> iIDs = new HashMap<String, Long>();
        HashMap<String, Integer> vals = new HashMap<String, Integer>();

        long iID1 = addIndicator("I1", "i1", Color.RED);
        long iID2 = addIndicator("I2", "i2", Color.BLUE);
        long iID3 = addIndicator("I3", "i3", Color.GREEN);
        long iID4 = addIndicator("I4", "i4", Color.MAGENTA);

        iIDs.put("iID1", iID1);
        iIDs.put("iID2", iID2);
        iIDs.put("iID3", iID3);
        iIDs.put("iID4", iID4);

        int v1 = 80;
        int v2 = 30;
        int v3 = 25;
        int v4 = 40;

        vals.put("v1", v1);
        vals.put("v2", v2);
        vals.put("v3", v3);
        vals.put("v4", v4);

        int numDays = 500;
        int dateDistance = 14;

        Calendar c = Calendar.getInstance();

        for(int i=0;i<numDays;i++)
        {
            c.add(Calendar.DATE, dateDistance);
            for(int j=1;j<5;j++)
            {
                int currVal = vals.get("v"+j);
                int rand = new Random().nextInt(6);
                int newVal; 

                if(rand <= 2) // 0, 1, 2
                    newVal = currVal + rand;
                else          // 3, 4, 5
                    newVal = currVal - rand;

                pseudo: addPointForIndicator();
                vals.put("v"+j, newVal);
            }
        } 
```

无论我多久创建一次测试数据，图片看起来总是这样： ![图形](../Images/3f3e8e1e34ce53c6fe74098ea7cc180d.png)

所以随机数的趋势总是负的。这是为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T10:28:57.310

从您的逻辑中可以清楚地看出，它必须产生负面趋势，即使忽略您的使用`Random`不符合合同的事实。您在一半的时间内添加一个范围为 [0,2] 的数字，并在另一半的时间减去一个范围为 [3,5] 的数字。不过，代码很容易修复：

```
if(rand <= 2) // 0, 1, 2
  newVal = currVal + rand;
else          // 3, 4, 5
  newVal = currVal - rand + 3; 
```

更清洁的解决方法是

```
newVal = currVal + random.nextInt(7)-3; 
```

这有一个额外的好处，它允许值有时保持不变，我认为这应该是模拟数据的更合适的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T10:29:48.460

我不确定您要做什么，但是以下块似乎会产生负面趋势

```
if(rand <= 2) // 0, 1, 2
    newVal = currVal + rand;
else          // 3, 4, 5
    newVal = currVal - rand; 
```

您正在添加小数字并减去较大的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:27:10.543

我不知道你的目的是什么，但试着做一个下限。喜欢

```
2+random.nextInt() 
```

random 是您的 Random 类实例。正如其他人所说，使用相同的实例，您无法生成这样的“正确”序列。

# yii - 如何正确处理不同的小 Yii 布局变化？

> ID：12528695
> 
> 赞同：0
> 
> 时间：2012-09-21T10:22:31.493
> 
> 标签：yii

我有这个标题，它在除徽标之外的所有页面上都是固定的。关于用户所在的页面，徽标的颜色略有不同。

我们应该在对应的控制器上设置它并在 layout.php 页面上调用它吗？

```
On controller
public $param = 'logoimagename';

On layout
echo $this->param 
```

我听说 Yii 在设计上不喜欢这个，有没有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:46:03.077

我将使用具有如下签名的辅助函数来实现它：

```
function getLogoName($controller, $action, ...){

   $logo = Yii::app()->params['default_logo'];
   $logo_rules = Yii::app()->params['logo_rules'];

   // check if controller and action match any of the logo rules and get the logo name if found; use the default one otherwise

   return $logo;
} 
```

default_logo 和 logo_rules 是您必须在配置文件中设置的参数。

在视图文件中，您可以简单地编写：

```
echo .... getLogoName($this->id, $this->action->id, ...); 
```

# objective-c - 将视图添加到 viewControllers 。导航控制器

> ID：12528698
> 
> 赞同：0
> 
> 时间：2012-09-21T10:22:51.333
> 
> 标签：objective-c, uinavigationcontroller

我有一个导航控制器：

![在此处输入图像描述](../Images/42b2d1ef9bab464fd49d8fd84635a0dc.png)

单击单元格按钮时，它会打开一个带有自己的 xib 文件的新视图：

```
 ParkingData *aController = [[ParkingData alloc]initWithNibName:@"ParkingData" bundle:nil];
    [[self navigationController] pushViewController:aController animated:YES]; 
```

它在代码中完美链接，但不在 viewControllers 数组中：

```
NSArray *viewArrays = [self.navigationController viewControllers];

NSLog(@"Views %@",viewArrays);

Views (
"<Favorite: 0x7c5f250>"
 ) 
```

停车数据怎么样？我怎样才能添加它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:25:47.720

您的 ParkingData *aController 是您当前的视图控制器（即您现在看到的视图）....只有您从中推送视图的先前视图控制器被添加到 self.navigationController.viewControllers 数组中...假设如果您从 aController 推送到另一个视图控制器，**那么** 您的**aController** 将被添加到 self.navigationController.viewControllers 数组中

# javascript - 如何提醒json数组中的值？

> ID：12528708
> 
> 赞同：1
> 
> 时间：2012-09-21T10:23:24.800
> 
> 标签：javascript, json, alert

我有一个 json 数组，我需要提醒其中的一个值。该对象如下所示：

```
Test = [
         {
          "adj" : [
                    {
                      "nodeTo" : "x",
                      "nodeFrom" : y,
                      "data": 
                              {
                                "$type" : "line",
                                "$color" : "#A989BC",
                                "$value" : "number"
                              }
                     }
                   ],

          "id" : "id1",
          "name" : "name1"
         },
         {
          "adj" : [ ..... ]   // I have many element in the Test array 
```

我想要的是提醒存在于“adj”数组中的“data”数组中存在的值。我试过这个：

```
alert(Test[0]["adj"]["data"]["value"]); 
```

但它不起作用。

提前致谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:24:23.307

adj 是一个数组：

```
alert(Test[0]["adj"][0]["data"]["value"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:25:44.753

试试这段代码

```
alert(Test[0]["adj"][0]["data"]["value"]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:26:06.323

```
alert(Test[0]["adj"][0]["data"]["value"]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T10:26:16.687

之后有一个对象`adj`，所以你需要添加一个`[0]`

```
alert(Test[0]["adj"][0]["data"]["value"]); 
```

# clearcase - 如何通过 Config Spec 中的标签检索文件？

> ID：12528716
> 
> 赞同：6
> 
> 时间：2012-09-21T10:24:15.333
> 
> 标签：clearcase

我`Test.java`用名为“”的标签标记了一个文件“ `My_Label`”。
当我尝试使用以下配置规范创建视图时，我无法在 Clearcase Explorer 中获取该文件。

```
element * CHECKEDOUT
element * My_Label 
```

谁能告诉我在上面的配置规范中哪里出错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T11:04:46.757

仅此选择规则是不够的。

您需要 在该规则*之前添加将选择正确版本的**父*目录的其他规则。

换句话说，如果您的 Test.java 的父目录（或祖先之一）没有用 My_Label 标记，则根本不会选择*它*。
因此，即使您有正确的文件选择规则，您的视图也无法访问您的文件。

检查 Vob 本身是否已使用 MyLabel 进行标记。

如果没有，我建议至少添加一个最终的“停止”规则（有关该规则的说明，`/main/LATEST`请参阅“[使用 configspec 进行 ClearCase 分支”）：](https://stackoverflow.com/questions/4245768/clearcase-branching-using-configspec/4246525#4246525)

```
element * CHECKEDOUT 
element * My_Label
element * /main/LATEST 
```

# c# - 声明接口的地方

> ID：12528720
> 
> 赞同：2
> 
> 时间：2012-09-21T10:24:25.380
> 
> 标签：c#, design-patterns

假设一个程序`C#`（或任何其他具有*接口*抽象的语言）的第一部分（A）和第二部分（B）依赖于第三部分（C）。例如，假设具有三个项目的 Visual Studio 解决方案，其中`ClassA`项目 A 和`ClassB`项目 B 中的类依赖`ClassC`于项目 C 中的实例。我想将接口与实现分开，以便我创建接口并在and`IClassC`中使用它。我应该在哪个项目中声明接口？`ClassA``ClassB``IClassC`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:27:10.057

听起来 ProjectC 不依赖于 ProjectA 或 ProjectB，但显然需要了解接口（以便类可以实现它）。因此它*必须*在 ProjectC 或每个项目所依赖的其他项目中。（您*可以*为接口创建一个单独的项目，但我很少发现它很有用。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:26:16.050

在项目 C 中，或单独的接口项目项目 I

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T11:10:45.603

大多数情况下它会在项目 C 中，但是如果您希望程序集是可插件的，这意味着您可以更改接口 C 的实现。并且您不想每次都重新构建项目 A 和 B更改项目 C 中的代码。

在这种情况下，您需要将[DIP 原理](http://en.wikipedia.org/wiki/Dependency_inversion_principle)应用于反向依赖，因此接口 C 应该在新项目调用 IC 中。依赖关系将从：

```
A -> C
B -> C 
```

到：

```
C -> IC
A -> IC
B -> IC 
```

所以通过这种方式，当你更改 C 中的代码或将 C 替换为 C' 时，它也不会影响到 A 和 B。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T10:28:09.233

您可以在 ClassC 项目中声明它，从引用的角度来看这很好。

您也可以将它放在它自己的接口项目中，这样您就可以在例如测试项目中单独引用该接口。

# magento - 如何在 Magento 的面包屑路径中显示产品 SKU 而不是其名称？

> ID：12528732
> 
> 赞同：0
> 
> 时间：2012-09-21T10:24:54.473
> 
> 标签：magento, product, breadcrumbs, skus

我正在尝试在面包屑路径中显示产品 SKU 而不是产品名称。有没有人有任何想法如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-11-24T10:31:03.760

你可以使用插件来改变这个

Magento 在此处设置面包屑的产品名称 Magento\Catalog\ViewModel\Product\Breadcrumbs

```
public function getJsonConfigurationHtmlEscaped() : string
    {
        return json_encode(
            [
                'breadcrumbs' => [
                    'categoryUrlSuffix' => $this->escaper->escapeHtml($this->getCategoryUrlSuffix()),
                    'useCategoryPathInUrl' => (int)$this->isCategoryUsedInProductUrl(),
                    'product' => $this->escaper->escapeHtml($this->getProductName())
                ]
            ],
            JSON_HEX_TAG
        );
    } 
```

您可以将插件添加到自定义模块。在您的插件中添加一个函数以获取产品 sku，然后添加函数 afterGetJsonConfigurationHtmlEscaped 以更新 getJsonConfigurationHtmlEscaped 以使用 sku 而不是名称。

afterGetJsonConfigurationHtmlEscaped($subject)

```
 /**
 * Returns product sku.
 *
 * @return string
 * Add this function to get your Sku
 */
public function getProductSku(): string
{
    return $this->catalogData->getProduct() !== null
        ? $this->catalogData->getProduct()->getSku()
        : '';
}

/**
 * Returns breadcrumb json with html escaped Sku
 *
 * @return string
 */
public function afterGetJsonConfigurationHtmlEscaped($subject) : string
{
    return json_encode(
        [
            'breadcrumbs' => [
                'categoryUrlSuffix' => $this->escaper->escapeHtml($subject->getCategoryUrlSuffix()),
                'useCategoryPathInUrl' => (int)$subject->isCategoryUsedInProductUrl(),
                'product' => $this->escaper->escapeHtml($this->getProductSku())
            ]
        ],
        JSON_HEX_TAG
    );
} 
```

# sql-server - SQL 维护计划在未配置邮件时发送邮件

> ID：12528737
> 
> 赞同：10
> 
> 时间：2012-09-21T10:25:13.813
> 
> 标签：sql-server, sql-server-2008, sql-agent-job, maintenance-plan, database-mail

我在 SQL Server 2008 R2 下有一个维护计划，该计划在午夜运行。在此维护任务中，没有通知操作员任务。在执行维护计划的 SQL 代理作业中，没有电子邮件警报。但是，每次运行此作业时，我都会收到来自 SQL Server 的电子邮件，主题为“SQL Server Message”。我不明白为什么这封邮件一直在发送。以下是邮件正文的开头：

> Microsoft(R) 服务器维护实用程序 (Unicode) 版本 10.50.1617 报告在“SERVERNAME”上生成。维护计划：我的维护计划持续时间：00:01:02 状态：成功。细节：

有什么想法为什么要发送此邮件，以及我应该在哪里更新配置以使其仅在失败时发送或根本不发送？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-24T15:11:47.043

我终于找到了它的配置位置。当您在 SQL Server Management Studio 中右键单击并修改维护计划时，在维护计划设计器的最顶部，有一个带有“报告和日志记录”按钮的菜单栏。“向电子邮件收件人发送报告”选项是配置它的地方。

![在此处输入图像描述](../Images/e56eb4f984af305b51319e0366085e24.png) ![在此处输入图像描述](../Images/2c1da09dd47e8a2c5004e094d7dfd9d9.png)

# hadoop - 如何在 HADOOP 中并行运行多个迭代作业

> ID：12528738
> 
> 赞同：1
> 
> 时间：2012-09-21T10:25:16.683
> 
> 标签：hadoop

我有一个针对单个文件迭代运行的 hadoop 作业。现在，如果我必须为目录中的每个文件并行运行多个作业，那么在 HADOOP 中休耕的最佳做法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:36:46.117

您可以参考解决迭代 map reduce的项目[haloop 。](http://code.google.com/p/haloop/)然后，如果文件很大，请继续使用 haloop，否则您可能会合并小文件以获得更好的性能。

# .htaccess - .htaccess 重写 Wordpress 的基本 url

> ID：12528739
> 
> 赞同：0
> 
> 时间：2012-09-21T10:25:22.290
> 
> 标签：.htaccess

好的，抱歉，如果之前有人问过这个问题，但我找不到可行的解决方案。我正在使用 wordpress 多站点。这就是我想要达到的目标。

目前，域[http://mynew.com/](http://mynew.com/)重定向（通过我的托管公司）到我的 wordpress 多站点安装中的一个站点，如下所示[http://myold.com/subsite/](http://myold.com/subsite/)

但我想隐藏/交换网址如下，[http](http://myold.com/subsite) ://myold.com/subsite变为[http://mynew.com](http://mynew.com)以及随后的所有链接（例如[http://myold.com/subsite/another-link](http://myold.com/subsite/another-link)变为[http://mynew.com/another-link](http://mynew.com/another-link)）而不会中断。

我在我的 .htaccess 文件中尝试了这个，它成功地重写了 url，但是链接不起作用并返回 404 错误。

```
RewriteRule    ^subsite/(.+)  http://mynew.com/$1  [R,L] 
```

希望这是有道理的，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:54:26.070

当然它会给你一个404错误，你将请求从旧站点重定向到新站点，但是新站点不包含请求的页面，所以它通过你一个404，你需要做的是从重定向新站点回到旧站点**内部**（这意味着无需更改浏览器地址栏），但这需要您的新站点充当代理服务器，请参阅[http://httpd.apache.org/docs/2.2/mod/ mod_proxy.html](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)

# javascript - Android webview如何使用webkit？

> ID：12528742
> 
> 赞同：2
> 
> 时间：2012-09-21T10:25:26.923
> 
> 标签：javascript, android, multithreading, webview, webkit

我知道 webkit 是一个布局引擎，用于在网络浏览器中显示 HTML 内容。我查看了[Webkit 端口](http://trac.webkit.org/wiki)，并没有发现与 Android 相关的东西。我还查看了 WebView 类的 Android 源文件夹，但我看不到 Webview 与 Webkit 的关系。

我想知道webkit在Android webview中是如何使用的，如何自定义webkit？

我也想知道webkit中使用的线程机制，它如何使用线程池来处理布局和javascript（尤其是Android）

我真的需要帮助。提前致谢。

**更新**

我查看`WebView.java`，`WebViewCore.java`并`JniUtil.java`在[webkit 包](https://github.com/android/platform_frameworks_base/tree/master/core/java/android/webkit)中。特别是在`JniUtil.java`有

```
static {
        System.loadLibrary("webcore");
        System.loadLibrary("chromium_net");
} 
```

webcore 和 chromium_net 在哪里？它们与这个[webkit 源](https://github.com/android/platform_external_webkit/tree/master/Source)有关吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T15:53:47.490

下图：android架构——![http://developer.android.com/images/system-architecture.jpg](../Images/5f097281e9d13fc62504e28913dee3a3.png)

webkit 位于库层。webkit源码是由c/c++开发的。

我认为 android webview 通过使用 jni（java 本机接口）连接到 webkit。您可以查看 android 源代码（c++ 部分）。我认为那里的解决方案。

编辑：您可以看到类 [android.webkit.WebViewCore](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/android/browser/BrowserWebView.java?av=f)：在静态构造函数上：

```
static {
    // Load libwebcore and libchromium_net during static initialization.
    // This happens in the zygote process so they will be shared read-only
    // across all app processes.
    try {
        System.loadLibrary("webcore");
        System.loadLibrary("chromium_net");
    } catch (UnsatisfiedLinkError e) {
        Log.e(LOGTAG, "Unable to load native support libraries.");
    }
} 
```

我想你可以在 webcore & chromium_net (android source c++) 中找到

更新：我找到了[android webkit 的链接 jni](https://android.googlesource.com/platform/external/webkit/+/f10585d69aaccf4c1b021df143ee0f08e338cf31/WebKit/android/jni)

# c++ - fstream 在两行之后没有从文本文件中读取

> ID：12528744
> 
> 赞同：0
> 
> 时间：2012-09-21T10:25:30.777
> 
> 标签：c++, console, fstream

我正在努力处理这部分代码，无论我尝试什么，我都无法在两行之后将其读入记录

文本文件包含

```
米老鼠
12121
高飞
24680
安迪·卡普
01928
准莫多
00041
结尾

```

代码是

```
#include<iostream>
#include<string.h>
#include <stdio.h>
#include <windows.h>
#include<iomanip>
#include<conio.h>
#include<fstream>
#include<string>
using namespace std;

struct record          
{               
char name[20];
int number;
 };

void main()
{

record credentials[30];
    int row=0; 
fstream textfile;//fstream variable
textfile.open("credentials.txt",ios::in);
textfile.getline (credentials[row].name,30);
//begin reading from test file, untill it reads end
while(0!=strcmp(credentials[row].name,"end"))
{ 

    textfile>>credentials[row].number;

    row++;
    //read next name ....if its "end" loop will stop
    textfile.getline (credentials[row].name,30);
}
textfile.close();

} 
```

记录只取前两行，其余的都是空的有什么想法吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T10:32:15.113

问题是：

```
textfile>>credentials[row].number; 
```

同时不消耗换行符。随后的调用`textfile.getline()`读取一个空行和下一个：

```
textfile>>credentials[row].number; 
```

尝试读取失败并设置流`"Goofy"`的失败位意味着所有进一步的读取尝试失败。检查返回值以检测失败：`int``textfile`

```
if (textfile >> credentials[row].number)
{
    // Success.
} 
```

我不完全确定程序是如何结束的，因为`"end"`永远不会被读取，但我怀疑它异常结束，因为没有机制来防止超出`credentials`数组的末尾（即没有`row < 30`作为循环终止条件的一部分）。

* * *

其他：

*   而不是使用固定大小`char[]`将名称读入您可以使用[`std::getline()`](http://en.cppreference.com/w/cpp/string/basic_string/getline)：

    ```
    #include <string>

    struct record
    {
        std::string name;
        int number;
    };

    if (std::getline(textfile, credentials[row].name))
    {
    } 
    ```

*   `record[]`您可以使用[`std::vector<record>`](http://en.cppreference.com/w/cpp/container/vector)将根据需要增长的而不是使用固定大小。

# javascript - jqgrid添加对话框离开字段填充

> ID：12528747
> 
> 赞同：0
> 
> 时间：2012-09-21T10:25:35.170
> 
> 标签：javascript, jquery, jqgrid

我有一个 jqgrid 及其添加对话框。当我点击提交时，数据发送正确，但插入字段被自动清理。我希望这些字段保持其插入的内容，并仅通过重新创建添加对话框来清理它们。我该如何管理？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:40:49.703

据我了解，您使用 jq 对话框，您可以使用事件

```
//Supply a callback function to handle the open event as an init option.
$( ".selector" ).dialog({
   open: function(event, ui) { 
   //
   //  HERE WRITE CODE OF FILLING DATA  INTO INPUT FIELD
   //
 }
});
//Bind to the open event by type: dialogopen.
$( ".selector" ).bind( "dialogopen", function(event, ui) {
   //
   //  HERE WRITE CODE OF FILLING DATA  INTO INPUT FIELD
   //

}); 
```

# mysql - 在 XCode 中通过 JSON 从 MySQL/PHP 获取数据时的安全性

> ID：12528748
> 
> 赞同：0
> 
> 时间：2012-09-21T10:25:37.797
> 
> 标签：mysql, xcode, json, security

我正在为 iPhone 制作公司价目表应用程序。

我的大部分应用程序都已完成，除了“安全”部分。

我使用 PHP 从 SQL 数据库中提取，并将其编码为 JSON。这一切都很好，除了……

我想保护我的价目表数据免受其他人不从浏览器访问 URL 请求的影响。我不是一个伟大的 web / php 程序员，我不确定如何在服务器端实现它。

现在我刚刚在 URLRequest 中创建了一个用户/密码，例如

www.hopepage.com/searchDB?User=Jack&Pass=Jones&Comp=iPhone%

在PHP中，我做了类似的东西

IF 用户并传入用户数据库，然后 Select * from components where comp like &Comp

但是，此请求在 URL 字符串中显示了我的登录信息，有人在嗅探此字符串是什么？我想这很容易吗？

我已经阅读了一些关于 SSL 和 HTTPS 的内容，但我不确定如何在服务器端实现它。

任何人都知道好的文档，或者可以引导我走向正确的方向？也许是隐藏在网上某处的教程（我已经搜索过，但可能没有使用正确的单词）。任何人

# c# - 为什么 .Union() 会更改项目的顺序？

> ID：12528752
> 
> 赞同：1
> 
> 时间：2012-09-21T10:25:57.610
> 
> 标签：c#, .net, linq, list

> **可能重复：**
> [.Union() 更改项目的顺序？](https://stackoverflow.com/questions/12515926/union-changes-the-order-of-the-items)

根据[这个](https://stackoverflow.com/questions/12515926/union-changes-the-order-of-the-items)问题（没有场景/示例；你应该删除它，我不能）这是我的问题：

我注意到，如果我执行 a `Union`，而不是`Intersect`between collections `Attachment[]`，则 Items 的顺序“可以”改变。

这是我的代码：

```
 GalleryDataClassesDataContext db = new GalleryDataClassesDataContext();
    List<Attachment> Allegati = db.ExecuteQuery<Attachment>("EXEC SelectAttachmentsByKey @Key={0}, @IDCliente={1}", new object[] { "", "47" }).ToList();
    List<Attachment> AllegatiPerCategorie = new List<Attachment>();

    AllegatiPerCategorie = AllegatiPerCategorie.Union(db.AttachmentAttachmentCategories.Where(aac => aac.IDAttachmentCategory == 72).OrderBy(p => p.Ordine == null ? 1 : 0).ThenBy(p => p.Ordine).Select(aac => aac.Attachment)).ToList();
    Allegati = Allegati.Intersect(AllegatiPerCategorie).ToList();

    count = 0;
    foreach (Attachment a in AllegatiPerCategorie)
    {
        Response.Write(count.ToString() + " - " + a.IDAttachment + "<br />");
        count++;
    }

    Response.Write("<br />### FILTERED ###<br /><br />");

    count = 0;
    foreach (Attachment a in Allegati)
    {
        Response.Write(count.ToString() + " - " + a.IDAttachment + "<br />");
        count++;
    } 
```

输出是：

```
0 - 6769
1 - 6792
2 - 6771
3 - 6699
4 - 6632
5 - 6774
6 - 6595
7 - 6602
8 - 6641
9 - 6643
10 - 6764
11 - 6634
12 - 6642
13 - 6660
14 - 6640
15 - 6665
16 - 6673
17 - 6767
18 - 6772
19 - 6766
20 - 6763
21 - 6768
22 - 6644
23 - 6635
24 - 6633
25 - 6793
26 - 6677
27 - 6608
28 - 6610
29 - 6558
30 - 6563
31 - 6631
32 - 6604
33 - 6606
34 - 6607
35 - 6596
36 - 6597
37 - 6598
38 - 6599
39 - 6600
40 - 6471
41 - 6470
42 - 6469
43 - 6601
44 - 6603
45 - 6663
46 - 6664
47 - 6645
48 - 6637
49 - 6638
50 - 6609
51 - 6611
52 - 6612
53 - 6613
54 - 6614
55 - 6615
56 - 6616
57 - 6617
58 - 6618
59 - 6619
60 - 6620
61 - 6622
62 - 6567
63 - 6568
64 - 6569
65 - 6570
66 - 6571
67 - 6572
68 - 6573
69 - 6575
70 - 6576
71 - 6577
72 - 6579
73 - 6580
74 - 6581
75 - 6582
76 - 6583
77 - 6584
78 - 6585
79 - 6586
80 - 6587
81 - 6588
82 - 6589
83 - 6590
84 - 6591
85 - 6592
86 - 6593
87 - 6594
88 - 6765

### FILTERED ###

0 - 6769
1 - 6792
2 - 6771
3 - 6699
4 - 6774
5 - 6595
6 - 6602
7 - 6634
8 - 6642
9 - 6640
10 - 6660
11 - 6665
12 - 6673
13 - 6772
14 - 6766
15 - 6768
16 - 6644
17 - 6635
18 - 6633
19 - 6793
20 - 6677 
```

好吧，例如，请注意列表中值**6660**和**6640**的顺序`AllegatiPerCategorie`：**6660**在**6640**之前（在位置*13*和*14*）。

现在，查看相同的值 order on `Allegati`：**6640**在**6660**之前（在位置*9*和*10*）。

为什么会有这种行为？我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T10:34:49.527

[MSDN](http://msdn.microsoft.com/en-us/library/bb341731.aspx)状态：

> 当枚举此方法返回的对象时，Union 按顺序枚举 first 和 second 并产生每个尚未产生的元素。

这是一个演示该行为的简短示例：

```
new int[] {1}.Union(new int[] {1, 2, 3}) // returns: 1,2,3
new int[] {2}.Union(new int[] {1, 2, 3}) // returns: 2,1,3
new int[] {3}.Union(new int[] {1, 2, 3}) // returns: 3,1,2

new int[] {1,3,5}.Union(new int[] {2, 4}) // returns: 1,3,5,2,4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:28:12.587

[工会](http://msdn.microsoft.com/en-us/library/bb341731.aspx)：

> 使用默认相等比较器生成两个序列的**集合**并集。

根据定义，集合不包含重复项，也没有固有的排序。

还：

> 此方法从返回集中排除重复项。这与该方法的行为不同，该`Concat<TSource>`方法返回输入序列中的所有元素，包括重复项。

和：

> 当枚举此方法返回的对象时，Union 按顺序枚举 first 和 second 并产生每个尚未产生的元素。

# asp.net-mvc - MVC 4 中的主从样式视图

> ID：12528756
> 
> 赞同：4
> 
> 时间：2012-09-21T10:26:13.783
> 
> 标签：asp.net-mvc, entity-framework

我有一个带有 EF 的 ASP.NET MVC 4 互联网应用程序。

我的模型：订单和订单详情： ![订单和订单详情](../Images/bd35e01f882bed1f137b2242108c879f.png)

我的观点： ![订单视图](../Images/ffc88f5b149babcbfd34e67eef8b5655.png)

**问：如何在我的订单视图中显示我的订单详情记录？** （有或没有 JS？；在 webgrid 或表格中？）

*创建.cshtml*

```
 <div class="editor-label">
        @Html.LabelFor(model => model.OrderDate)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.OrderDate)
        @Html.ValidationMessageFor(model => model.OrderDate)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.OrderNo)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.OrderNo)
        @Html.ValidationMessageFor(model => model.OrderNo)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Total)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Total)
        @Html.ValidationMessageFor(model => model.Total)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Shipping)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Shipping)
        @Html.ValidationMessageFor(model => model.Shipping)
    </div>
    @*OrderDetails Part - Works only on the Edit part*@
    <table>
        <tr>
            <th>Product</th>
            <th>Unit Price</th>
            <th>Quantity</th>
            <th>Discount</th>
        </tr>
    @foreach (OrderDetails item in Model.OrderDetails.OrderBy(d=>d.Products.ProductName))
    {
        <tr>
            <td>@item.Products.ProductName</td>
            <td>@item.UnitPrice</td>
            <td>@item.Quantity</td>
            <td>@item.Discount</td>
            <td>
                @Html.ActionLink("Edit", "Edit", "OrderDetails", new { id = item.OrderDetailId }, new { }) |
                @Html.ActionLink("Details", "Details", "OrderDetails", new { id = item.OrderDetailId }, new { }) |
                @Html.ActionLink("Delete", "Delete", "OrderDetails", new { id = item.OrderDetailId }, new { })
            </td>
        </tr>  
    }
    </table>

    <p>
        <input type="submit" value="Create" />
    </p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T12:57:27.657

您应该使用视图模型来实现这一点。您不应该将您的业务模型直接暴露给视图。而是使用视图模型来提供另一个抽象级别。

所以，根本不要改变你的模型。为您的视图定义视图模型。我不会在视图模型中包含所有字段。

```
/* Viewmodel for your Order/Create page */
public class OrderCreate
{
    /* Attributes for your order */
    public string OrderDate          { get; set; }
    public string OrderNo            { get; set; }
    public string Shipping           { get; set; }
    ....
    ....

    /* List that will contain all details */
    public IList<ProductDetail> ProductDetails      { get; set; }

}

/* Viewmodel for each of the products */ 
public class ProductDetail
{
    public string Product            { get; set; }
    public string UnitPrice          { get; set; }
    public string Quantity           { get; set; }
    ....
    ....
} 
```

现在在您的 GET 操作中，将此视图模型返回到您的视图而不是您的业务模型。

```
//
// GET: /Order/Create

public ActionResult Index()
{
    /* New viewmodel for your view */
    var viewModel = new OrderCreate();
    viewModel.ProductDetails = new List<ProductDetail>();

    /* Assuming the number of products is static */
    for(int i = 0; i < NUMBER_OF_PRODUCTS; i++)
    {
        viewModel.ProductDetails.Add( new ProductDetail() );
    }

    return View(viewModel);
} 
```

使用此视图模型，您现在可以访问视图中填充的值。当您回发视图以发布操作时，请使用来自视图模型的数据在那里创建您的业务模型。

```
//
// POST: /Order/Create

[HttpPost]
public ActionResult Index(OrderCreate viewModel)
{
    if(ModelState.IsValid))
    {
        var model = new Order();

        //TODO: Populate model through viewmodel, loop viewModel.ProductDetails

        return RedirectToAction("Index");
    }

    // Model is not valid
    return View(viewMode);
} 
```

一些建议，如果您厌倦了将视图模型映射到实际模型，请尝试[AutoMapper](http://automapper.codeplex.com/)

希望能帮助到你。

# php - 更新 Symfony 2.1 (Subversion)

> ID：12528762
> 
> 赞同：3
> 
> 时间：2012-09-21T10:26:36.123
> 
> 标签：php, svn, symfony, composer-php

我想将我的 Symfony 2.1.1（主干）更新到 2.1.2，但运行`composer update`会删除包含 .svn 文件的文件夹。如何正确更新它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T13:39:18.137

Cyprian 是对的，供应商文件夹的内容应该从 SVN 中排除。

您可以通过将供应商文件夹上的 svn:ignore 属性设置为值“*”或忽略供应商文件夹来完成此操作。

由于您已经在存储库中拥有这些文件夹，因此要使用 svn (svn rm) 删除供应商文件夹的内容，并提交该更改。之后，添加 ingore 属性并提交。

当您将来运行 composer install 或 update 时，这不会影响您的存储库。

# eclipse - Eclipse 和 FFTW

> ID：12528768
> 
> 赞同：0
> 
> 时间：2012-09-21T10:26:59.123
> 
> 标签：eclipse, gcc, include, g++, fftw

我在 MacOS Lion 中的 Eclipse 中制作 FFTW（和 FFTW++）静态项目时遇到了一些麻烦。有人已经做到了吗？

我为包含文件创建了一个单独的文件夹，但是尽管我已经正确设置了路径，但它似乎找不到它们。我还用`<subdirectory/include_file>`我的项目设置的目录部分中的路径设置 替换了所有 c 文件中的包含`${workspace_loc:/FFTW3/include}`。

我不知道它是否相关，但是当我编写代码时，使用另一个 IDE 并从 bash 输入命令，我意识到需要一些 mp 选项，所以我从 4.2.1 更新了我的 gcc 版本（即MacOS 的基本 Xcode 版本）到 4.7。我已经编译了 FFTW++ 示例并且它工作正常，使用`g++ -fopenmp`. 我已经使用 macports 安装了新版本的 gcc，并且我使用了它的一个选项 ( `sudo port select --set gcc mp-gcc47`) 将其设置为 gcc 默认命令，而不是 4.2 版本，因此我可以从 bash 中键入和编译。

现在我已经看到 Eclipse 使用的是 4.2.1 版本。有人知道如何将其更改为 4.7 版本吗？您认为这可以解决问题还是导致我的问题？

# javascript - 为什么在 Raphaeljs 中，设置旋转后，鼠标悬停会将对象重置为其初始位置

> ID：12528769
> 
> 赞同：1
> 
> 时间：2012-09-21T10:26:59.670
> 
> 标签：javascript, raphael

注意：请在此处查看演示代码：http: [//jsfiddle.net/ginja/5yp7D/](http://jsfiddle.net/ginja/5yp7D/)

我有一组对象，我可以在单击蓝色方块时旋转，效果很好。集合中的每个对象都附加了一个悬停事件，该事件会导致对象以动画方式更改颜色和缩放，以在鼠标进入和离开时给人以增长和缩小的印象。但是，正如您从演示中看到的那样，缩放会导致对象重置为其原始位置，并且如果对象先前悬停在其上，也会对旋转产生有趣的影响。

我的问题是我是否可以旋转对象集并且在旋转后仍然具有对象的缩放效果而不将其重置为原始位置，我假设我在鼠标悬停时的变换不正确，如果有人可以指出我在右边方向，我将不胜感激。

**编辑**新小提琴链接...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:05:22.333

在对此进行进一步研究后，我想我理解了这个问题。

当您在 Raphael 中绘制路径时，它是画布上的一个设定位置，当我们执行旋转时，它是该设定位置之上的应用变换。悬停事件被触发，我们应用了缩放变换，它清除了之前的任何变换，这就是对象返回到其原始位置的原因。

我想出的解决方案是当我们执行悬停动画时，我们还需要执行任何当前应用的旋转，并且在旋转时我们需要确保缩放被重置。我还注意到，当旋转发生时，如果你将鼠标悬停在一个块上，会出现一些奇怪的动画，并且可能需要在旋转时禁用悬停。

请参阅 jsFiddle 链接[http://jsfiddle.net/ginja/5yp7D/](http://jsfiddle.net/ginja/5yp7D/)以获取更新的代码，下面我概述了我的更改...

旋转：

```
blocks.animate({ transform: "r" + stadRotate + " " + stadCX + " " + stadCY + "s1" }, 1000); 
```

鼠标移到：

```
this.animate({ fill: "#5CBFEB", transform: "r" + stadRotate + " " + stadCX + " " + stadCY + "s1.2" }, 200); 
```

鼠标移出：

```
this.animate({ fill: "#cc0000", transform: "r" + stadRotate + " " + stadCX + " " + stadCY + "s1" }, 200); 
```

我不确定这是否是正确的方法，但如果有人要添加任何内容或更好的解决方案，请发表评论或回答

# c++ - 控制台应用程序立即退出 Visual Studio

> ID：12528770
> 
> 赞同：3
> 
> 时间：2012-09-21T10:27:02.943
> 
> 标签：c++, visual-studio

> **可能重复：**
> [如何阻止 C++ 控制台应用程序立即退出？](https://stackoverflow.com/questions/2529617/how-to-stop-c-console-application-from-exiting-immediately)

我正在使用 c++，当我运行我的控制台程序时，它会立即退出。我无法从我的主方法/设置断点中读取输入，因为主方法是在另一个库中定义的。

所以，我在问如何通过使用 Visual Studio 中的设置来防止控制台应用程序退出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T11:56:24.060

尝试运行`Ctrl+F5`. 这将在执行结束时停止控制台。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T10:34:27.007

如果我理解正确，您将无法读取程序的*输出*，因为控制台会立即关闭。为了防止这种情况，您可以`system("pause");`在从 main 返回之前调用。

```
int main()
{
    // processing...
    system("pause");
    return 0;
} 
```

# php - 如何将php结果传递给谷歌地图

> ID：12528771
> 
> 赞同：0
> 
> 时间：2012-09-21T10:27:03.443
> 
> 标签：php, mysql, google-maps, google-maps-api-3

我正在使用这个 php 代码从 MySQL 数据库中检索 lat 和 lon，结果值应该作为输入给 google map.so 当我运行查询时，输出应该去 google maps。作为参数我该怎么做？

这是php代码。

```
 mysql_select_db("theatdb", $con);

    $result = mysql_query("SELECT Lat,Lon FROM theaters
    WHERE theater_name='theater_name'");

    while($row = mysql_fetch_array($result))
      {
      echo $row['theater_name'];
      echo "<br />";
      }
    ?> 
```

这是谷歌地图代码

```
 function initialize() {
        var latlng = new google.maps.LatLng(12.91869,77.594051);
        var myOptions = {
          zoom: 12,
          center: latlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        }; 
```

php 代码正在检索经纬度值，我想将结果传递给谷歌地图。我该怎么做？任何人帮助米..提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:29:50.833

用于`mysql_fetch_assoc()`从数据库中获取关联数组，因为您只得到一个结果：

```
<?php
    mysql_select_db("theatdb", $con);
    $result = mysql_query("SELECT Lat,Lon FROM theaters WHERE theater_name='theater_name'");
    $row = mysql_fetch_assoc($result);
    echo $row['theater_name'];
?>

<script type="text/javascript">
function initialize() {
    var latlng = new google.maps.LatLng(<?php echo $row['Lat'];?>,<?php echo $row['Lon'];?>);
    var myOptions = {
      zoom: 12,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:30:59.427

让我知道这是你想要得到的还是你指的是别的东西

```
var lat  = <?php echo $result['lat'] ?>; 
var lang  = <?php echo $result['lang'] ?>;
var latlng = new google.maps.LatLng(lat,lang); 
```

# objective-c - CATransition 从顶部开始卷曲页面

> ID：12528781
> 
> 赞同：0
> 
> 时间：2012-09-21T10:27:43.077
> 
> 标签：objective-c, ios, catransition, page-curl

我意识到这个标题有一个问题，但没有正确回答。似乎不可能（至少在 iOS 6 上）让页面卷曲动画从屏幕**顶部**播放（即向主页按钮剥离）。

```
CATransition *transition = [CATransition animation];
[transition setDelegate:self];
[transition setDuration:parameters.duration];
[transition setType:@"pageCurl"];
[transition setSubtype:kCAAnimationFromTop]; //kCAAnimationFromBottom plays the same thing
[layer addAnimation:transition forKey:@"curlAnim"]; 
```

注意：答案*不是*“将 pageCurl 更改为 PageUnCurl”（Uncurl 是不同的动画）。

有人做过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:35:40.883

根据我的测试，它只是不起作用。我有使用每种过渡类型的所有四个方向的代码，但是从这个特定方向卷曲/展开不起作用。在我看来，这是一个错误，但“pageCurl”转换甚至没有记录，因此很难报告。

# sql - 插入后事件查看器中的错误

> ID：12528783
> 
> 赞同：0
> 
> 时间：2012-09-21T10:28:02.837
> 
> 标签：sql, vb.net

每次插入后，我都会在事件查看器中获取日志。数据被插入，但由于它在一段时间后淹没了事件查看器，直到我清理了日志，服务才会启动。

这是我在日志中得到的：

```
XY.Archive.SQLClassLibrary.DalException: Problem accessing database. ---> System.Data.SqlClient.SqlException: Incorrect syntax near '_3'.
Unclosed quotation mark after the character string ',308387,null)'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj)
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.ConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteScalar()
   at XY.Archive.SQLClassLibrary.SQLDataAccessLogic.ExecuteCommand(String sqlString)
   --- End of inner exception stack trace ---
   at XY.Archive.SQLClassLibrary.SQLDataAccessLogic.ExecuteCommand(String sqlString)
   at XY.Archive.ServerEngine.Server.InsertDocumentIntoDatabase(Document documentOriginal, Int32 archiveID, String tableName)
Sql string: INSERT INTO table (columns) values (bunch of values) select @@Identity 
```

这是插入语句的创建方式：

```
Public Shared Function CreateStringForInsertDocument(ByVal tableName As String, ByVal document As Document, ByVal strArchiveTime As String, ByVal indexFieldNames As String, ByVal indexFieldValues As String) As String
    Dim strInsert As String = "INSERT INTO " & tableName & " (GUID, ContainerID, DocumentStatusID, ArchiveTime, " & indexFieldNames & ") values ('" & document.GUID & "' ," & document.Container.ContainerID & "," & document.DocumentStatusID & ",'" & strArchiveTime & "'," & indexFieldValues & ") select @@Identity"
    Return strInsert
End Function 
```

有人知道可能导致问题的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:30:54.350

是的。原因是您没有使用参数化查询。仔细阅读它们，注意“SQL注入”这个短语

# java - 如何将 JTable 背景颜色默认更改为白色？

> ID：12528792
> 
> 赞同：8
> 
> 时间：2012-09-21T10:28:14.193
> 
> 标签：java, swing, jtable, jscrollpane

我有一个在 JScrollpane 中显示的 JTable。JTable 仅在其网格中显示几行信息。网格下方到 JPanel 底部的空间，包含 JScrollpane，（它又包含 JTable）是纯灰色的。我想把那个颜色改成白色。我尝试将 JTable 的背景颜色设置为白色，[使用方法 setBackground(Color,WHITE) ] 但这不起作用。

谁能告诉我用什么方法把灰色变成白色？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-21T10:33:33.383

取决于你的代码

*   `JTable#setFillsViewportHeight(true);`

或者

*   `JScrollPane#getViewport().setBackground(JTable#getBackground());`

或者你`JScrollPanes JViewport`可以适应`JTables view`

*   `JTable#setPreferredScrollableViewportSize(JTable#getPreferredSize());`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:57:08.013

您所要做的就是在您的 JTable 中获取 JScrollPane 的 JViewport 并设置其背景颜色。

```
JTable table=new JTable(model);  
JScrollPane scroll=new JScrollPane(table);  
scroll.getViewport().setBackground(Color.WHITE); 
```

希望能提供一个解决方案，使您的剩余表空间变为白色。

# asp.net-mvc - 如何在 NOPCommerce2.65 中设置不同的默认页面

> ID：12528794
> 
> 赞同：0
> 
> 时间：2012-09-21T10:28:22.710
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, nopcommerce

我想在 nop2.65 中设置不同的默认页面，我已经注册了新的 Route

```
//In RouteProvider
//Custome page
            routes.MapLocalizedRoute("CustomHome",
                            "",
                            new { controller = "Customer", action = "Login" },
                            new[] { "Nop.Web.Controllers" });

            //home page
            routes.MapLocalizedRoute("HomePage",
                            "",
                            new { controller = "Home", action = "Index" },
                            new[] { "Nop.Web.Controllers" }); 
```

将登录页面设置为默认设置很好，但是当我单击“主页”菜单时，它会重定向登录页面而不是主页。
我也尝试在 Global.asax 文件中设置默认页面，该页面也不起作用

```
//In Global.asax file
    routes.MapRoute(
                    "Default", // Route name
                    "{controller}/{action}/{id}", // URL with parameters
                    new { controller = "Customer", action = "Login", id = UrlParameter.Optional },
                    new[] { "Nop.Web.Controllers" }
                ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T07:33:03.027

最后我在NOP.Web->Infrastructure->RouteProvider.cs下的NOP2.65 all route register中得到了解决方案。如果你想设置不同的路线，那么你的 RouteProvider.cs 就像

```
/In RouteProvider
//Custome page
            routes.MapLocalizedRoute("CustomHome",
                            "", // Route name
                            new { controller = "Customer", action = "Login" },
                            new[] { "Nop.Web.Controllers" });

            //home page
            routes.MapLocalizedRoute("HomePage",
                            "home/", // Route name
                            new { controller = "Home", action = "Index" },
                            new[] { "Nop.Web.Controllers" }); 
```

注意：对于新注册的路由和修改的 HomePage RouteName，请将 RouteName 设置为空白**。**

# wordpress - 重写类别 wordpress

> ID：12528800
> 
> 赞同：5
> 
> 时间：2012-09-21T10:28:38.617
> 
> 标签：wordpress, url, rewrite, categories

是否可以只重写一个类别？

我有一个类别“**照片**”，仅适用于该类别。

我只想把它改写`/category/photos`为`/photos`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-14T20:31:39.400

您可以使用 WP Rewrite API 来完成。将此添加到functions.php

```
add_action('init', 'register_rewrites');
function register_rewrites() {
   add_rewrite_rule('^photos$', 'index.php?category_name=photos','top');
} 
```

请记住重新加载您的重写设置：转到设置 -> 永久链接，然后单击保存按钮 - 无需更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:48:36.820

Yoast [SEO 插件](http://wordpress.org/extend/plugins/wordpress-seo/)内置了这个功能，我一般推荐这个插件。
[no-category-base-wpml](http://wordpress.org/extend/plugins/no-category-base-wpml/)仅在您不想为此安装插件时才执行此操作。在网上有很多教程可以做到这一点：

*   [http://thisismyurl.com/6704/remove-category-url-wordpress/](http://thisismyurl.com/6704/remove-category-url-wordpress/)
*   [http://www.webdevtuts.net/php/how-to-remove-category-from-wordpress-url-structure/](http://www.webdevtuts.net/php/how-to-remove-category-from-wordpress-url-structure/)
*   [http://www.wprecipes.com/how-to-remove-category-from-your-wordpress-url](http://www.wprecipes.com/how-to-remove-category-from-your-wordpress-url)

也只为一个类别启用此功能，我建议如下：

1.  创建一个名为`photos`.
2.  为此照片页面创建主题[模板页面](http://codex.wordpress.org/Theme_Development#Custom_Page_Templates)
3.  在设置了一个新的[`query_posts`](http://codex.wordpress.org/Function_Reference/query_posts)* 获取类别“照片”
4.  包括`category.php`文件。
5.  将该模板分配给照片页面。

未经测试，但应该可以工作。因为该页面具有正确的 URL 并且应该包含类别。问题，问。

*query_posts 如果您想完全正确地使用[`pre_get_posts`](https://wordpress.stackexchange.com/questions/50761/when-to-use-wp-query-query-posts-and-pre-get-posts#answer-50762)过滤器，则对性能不利。这需要更多的知识。

# django - 如果我想让数据只对一个用户可用，我应该从 URL 中删除用户 ID 吗？

> ID：12528802
> 
> 赞同：0
> 
> 时间：2012-09-21T10:29:00.147
> 
> 标签：django, django-templates

让我们假设我们有以下网址：

```
example.com/users/1 
```

如果 ID=1 的用户打开它，用户会收到关于他的帐户的信息，但是如果用户将 1 切换为 2，那么他也可以查看其他用户的详细信息，我们当然不希望这样，所以我有以下解决方案：

1) 只需在模板中传递当前登录的用户 id 扔 request.user.id

2）添加权限，但我没有找到允许我这样做的权限类型。当然，我可以为每个用户分别创建几十个权限，但这当然是非常讨厌的方式。

还有其他想法如何在 Django 中解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:43:47.743

您可以使用请求填充上下文，以确保用户永远不会看到另一个用户的数据，例如（使用 CBV）：

```
class AccountView(TemplateView):
    """
    Generic account view
    """
    template_name = "users/account.html"

    def get_context_data(self, **kwargs):
        context = super(AccountView, self).get_context_data(**kwargs)
        context['user'] = User.objects.get(id=self.request.user.id) 
        return context

    @method_decorator(login_required(login_url=reverse('login')))
    def dispatch(self, *args, **kwargs):
        return super(AccountView, self).dispatch(*args, **kwargs) 
```

另一种确保“假”网址呈现 404 的方法是编写 owner_required 装饰器，例如：

```
def owner_required(function):
    @wraps(function)
    def decorator(*args, **kwargs):
        request = args[1]
        user = get_object_or_404(User, username=request.user.username)
        if user.is_authenticated() and user.username == kwargs.get('slug'):
            return function(*args, **kwargs)
        raise Http404
    return decorator 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:03:23.570

您无需获得许可即可执行此操作。在你的意见.py

```
from django.http import Http404

def myview(request, user_id):

  user = request.user
  if user_id != request.user.id:
      raise Http404

  #all your logic here 
```

但是，如果您希望用户个人资料是私有的，则不需要在您的 url 模式中使用 user_id。只需使用存储在请求变量中的用户对象。

# null - Mysql在哪里忽略null？为什么？我该如何解决？

> ID：12528803
> 
> 赞同：0
> 
> 时间：2012-09-21T10:29:02.800
> 
> 标签：null

我有一张桌子

```
ID | product | cuid | file     | created    | start_date | cancelled  | brid   | price
123| prod3   | 1234 | filename | 2012-09-19 | 2012-09-19 | 2012-09-19 | broker | 20
124| prod1   | 1234 | filename | 2012-09-19 | 2012-09-19 | 0000-00-00 | broker | 10
125| prod1   | 1234 | filename | 2012-09-19 | 2012-09-19 | 0000-00-00 | broker | 10
126| prod3   | 1234 | filename | 2012-09-19 | 2012-09-19 | 0000-00-00 | broker | 20 
```

created、start_date 和 cancelled 都是 DateTime 列。

我正在运行查询以计算出每种产品的数量、每种产品的总成本和所有产品的总价格，使用：

```
SELECT 
      count(product) as amount,
      product, 
      sum(price) AS price 
FROM `products` 
WHERE 
      brid = 'broker' 
AND 
      cancelled is null 
GROUP BY product 
WITH ROLLUP 
```

这给了我

```
amount     | product            | price

2          | PROD1              | 20
2          | PROD3              | 40
4          | NULL               | 60 
```

PROD3 产品之一的取消列中有日期，因此结果应为

```
1          | PROD3              | 20 
```

添加和删​​除“取消为空”似乎对结果没有任何影响。还尝试了'cancelled =“0000-00-00 00:00:00”'这并没有影响结果......

任何想法我如何将其限制为仅尚未取消的产品？

请提供任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:32:24.637

你应该把`AND cancelled IS NOT NULL`

# stderr - 程序中的 std:bad_alloc 错误

> ID：12528810
> 
> 赞同：1
> 
> 时间：2012-09-21T10:29:38.013
> 
> 标签：stderr

我的程序中有这个错误：

```
terminate called after throwing an instance of 'std::bad_alloc'
what(): std::bad_alloc
Aborted (core dumped) 
```

谁能解释一下这是什么意思？

当我在我的 ubuntu 机器上运行该程序时，它运行良好，但在 interviewstreet 平台上它给出了这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:36:58.840

一般来说，这意味着您的机器没有足够的内存......但是您的问题描述太短而无法识别问题来源（提供一些代码？）。关于出现在一个操作系统上而不是另一个操作系统上的问题，我认为这是编译器内部设置。

# mysql - MySql重复SUM，一对多关系

> ID：12528811
> 
> 赞同：0
> 
> 时间：2012-09-21T10:29:39.060
> 
> 标签：mysql, sum

我有以下 3 个表，其中 B、C 与 A 具有多对一关系，我需要使用 MySql 生成以下结果表

```
 Table A           Table B              Table C
    id  name       id   A.id    qty        id   A.id
    1   a          1    1       5          1    1
    2   b          2    1       10         2    1
    3   c          3    2       4          3    2
                   4    3       6          4    2
                   5    2       7

 Expected Result Table

C.id    A.id    sum(B.qty Group by A.id)
1       1       15
2       1       15
3       2       11
4       2       11 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:31:41.963

```
select c.id, a.id, sum(b.qty)
from c
inner join a on c.a_id = a.id
inner join b on b.a_id = a.id
group by c.id, a.id 
```

或者在你的情况下，你只是不需要表 a

```
select c.id as cid, c.a_id as aid , sum(b.qty) as totalqty
from c
inner join b on b.a_id =c.a_id
group by c.id, c.a_id; 
```

# java - 使用 JMS 队列的同步消费者

> ID：12528818
> 
> 赞同：0
> 
> 时间：2012-09-21T10:30:10.743
> 
> 标签：java, glassfish, jms

我想以同步方式处理来自 Glassfish 3 中 JMS 队列的所有消息，因此我尝试在 Glassfish 窗口中的 JMS Physical Destination 中将属性 Maximum Active Consumers 从 -1 更改为 1。我认为设置这个我将只有一个消费者同时执行 OnMessage()。我遇到的问题是，当我更改该属性时，出现此错误：

```
[I500]: Caught JVM Exception: org.xml.sax.SAXParseException: Content is not allowed in prolog.

[I500]: Caught JVM Exception: com.sun.messaging.jms.JMSException: Content is not allowed in prolog.

sendMessage Error [C4038]: com.sun.messaging.jms.JMSException: Content is not allowed in prolog. 
```

如果有人知道使方法 onmessage() 同步的另一种方法，将不胜感激。这是我的消费类：

```
@MessageDriven(mappedName = "QueueListener", activationConfig = {
@ActivationConfigProperty(propertyName = "acknowledgeMode", propertyValue = "Auto-acknowledge"),
@ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue")
})
public class MessageBean implements MessageListener {

@Override
public void onMessage(Message message) {
    long t1 = System.currentTimeMillis();
    write("MessageBean has received " + message);
    try{

        TextMessage result=(TextMessage)message;
        String text=result.getText();
        write("OTAMessageBean message ID has resolved to " + text);
        int messageID=Integer.valueOf(text);

        AirProcessing aP=new AirProcessing();
        aP.pickup(messageID);

    }
    catch(Exception e){
        raiseError("OTAMessageBean error " + e.getMessage());
    }
   long t2 = System.currentTimeMillis();
   write("MessageBean has finished in " + (t2-t1)); 

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T12:57:20.717

我遇到了同样的问题，我找到的唯一解决方案是设置一个`Schedule`每十秒轮询一次队列中的消息：

```
@Stateless
public class MyReceiver {
   @Resource(mappedName = "jms/MyQueueFactory")
   private QueueConnectionFactory connectionFactory;
   @Resource(mappedName = "jms/MyQueue")
   private Queue myQueue;
   private QueueConnection qc;
   private QueueSession session;
   private MessageConsumer consumer;

   @PostConstruct
   void init() {
       try {
         qc = connectionFactory.createQueueConnection();
         session = qc.createQueueSession(false, Session.CLIENT_ACKNOWLEDGE);
         consumer = session.createConsumer(myQueue);
         qc.start();
       } catch (JMSException e) {
         throw new RuntimeException(e);
       }
   }

   @PreDestroy
   void cleanup() throws JMSException {
     qc.close();
   }

   @Schedule(hour = "*", minute = "*", second = "*/10", persistent = false)
   public void onMessage() throws JMSException {
     Message message;
     while ((message = consumer.receiveNoWait()) != null) {
       ObjectMessage objMsg = (ObjectMessage) message;
       Serializable content;
       try {
         content = objMsg.getObject();

         //Do sth. with "content" here

         message.acknowledge();
       } catch (JMSException ex) {
         ex.printStackTrace();
       }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:43:17.300

JMS 本质上是异步的，您没有特定的配置来告诉 io 同步运行。您可以通过在各处添加消息传递和消费确认来模拟它，但这并不是 JMS 真正的工作方式。尝试 RMI[在此处输入链接描述](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136424.html)或 HTTP（或其他诸如 SOAP 或 REST Web 服务之类的东西）

# c++ - luaL_dostring 什么都没有放在堆栈上？

> ID：12528820
> 
> 赞同：4
> 
> 时间：2012-09-21T10:30:23.327
> 
> 标签：c++, lua, lua-c++-connection

我正在尝试学习将 Lua 与 C++ 接口的基础知识，但我遇到了一个问题。我想调用一个返回字符串的函数，然后在 C++ 端使用该字符串，但 luaL_dostring 似乎什么都没有放在 Lua 堆栈上。

即使是一个简单的测试似乎也无法正常工作：

```
lua_State* lua = lua_open();
luaL_openlibs(lua);

//Test dostring.
luaL_dostring(lua, "return 'derp'");

int top = lua_gettop(lua);
cout << "stack top is " <<top << endl;

//Next, test pushstring.
lua_pushstring(lua, "derp");

top = lua_gettop(lua);
cout << "stack top is " << top << endl; 
```

输出：

```
stack top is 0
stack top is 1 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-21T11:36:33.313

啊哈，发现问题了。根据[this page](http://lua-users.org/lists/lua-l/2006-04/msg00218.html)，在Lua 5.1 luaL_dostring 忽略返回。我的代码可能会在 Lua 5.2 中工作。

要更改功能，您应该使用：

```
#undef luaL_dostring
#define luaL_dostring(L,s)  \
    (luaL_loadstring(L, s) || lua_pcall(L, 0, LUA_MULTRET, 0)) 
```

# groovy - 重载方法的意外行为

> ID：12528823
> 
> 赞同：9
> 
> 时间：2012-09-21T10:30:29.763
> 
> 标签：groovy

我对 groovys 方法重载行为有点困惑：鉴于下面的类和测试，我可以接受`testAStringNull`并`testBStringNull` 抛出模棱两可的方法调用异常，但为什么不是这样 `testANull`呢`testBNull`？

而且，更重要的是：为什么`testBNull(null)` call `String foo(A arg)`？我猜这个对象不知道它绑定到的变量的类型，但是为什么这个调用对 groovy 没有歧义，而其他调用呢？

（我希望我解释得足够好，生成这个最小的例子让我头疼。）

```
class Foo {
    static class A {}
    static class B {}

    String foo(A arg) { return 'a' }

    String foo(String s, A a) { return 'a' }

    String foo(B arg) { return 'b' }

    String foo(String s, B b) { return 'b' }
} 
```

测试：

```
import org.junit.Test
import Foo.A
import Foo.B

class FooTest {
    Foo foo = new Foo()

    @Test
    void testA() {
        A a = new A()
        assert foo.foo(a) == 'a'
    }

    @Test
    void testAString() {
        A a = new A()
        assert foo.foo('foo', a) == 'a'
    }

    @Test()
    void testANull() {
        A a = null
        assert foo.foo(a) == 'a'
    }

    @Test
    void testAStringNull() {
        A a = null
        assert foo.foo('foo', a) == 'a'
    }

    @Test
    void testB() {
        B b = new B()
        assert foo.foo(b) == 'b'
    }

    @Test
    void testBString() {
        B b = new B()
        assert foo.foo('foo', b) == 'b'
    }

    @Test
    void testBNull() {
        B b = null
        assert foo.foo(b) == 'b'
    }

    @Test
    void testBStringNull() {
        B b = null
        assert foo.foo('foo', b) == 'b'
    }

} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-21T18:04:04.040

这是 Groovy 的多调度机制的一个（有点鲜为人知的）奇怪之处，它试图调用“最合适的”方法，并结合提供的静态类型（在您的情况下为 A 或 B）不用作调度机制的一部分。当你声明 A a = null 时，你得到的不是 A 类型的空引用，而是对 NullObject 的引用。

最终，为了安全地处理重载方法的可能为空的参数，调用者必须强制转换参数，如

```
A a = null
assert foo.foo('foo', a as A) == 'a' 
```

关于[“Groovy 不是 Java 的超集”的](https://schneide.wordpress.com/2010/12/27/groovy-isnt-a-superset-of-java)讨论可能会对这个问题有所启发。

# javascript - 如何从视图运行时删除数据？

> ID：12528824
> 
> 赞同：0
> 
> 时间：2012-09-21T10:30:42.080
> 
> 标签：javascript, asp.net-mvc

我正在开发 MVC 应用程序并使用剃刀语法。

在这个应用程序中，我提供评论功能。

我添加了一个局部视图，它从数据库加载评论/记录。

在下图中，我们可以看到称为员工索引视图运行时的注释框。

问题是，当用户删除评论时，它会从数据库中删除，但是如何在不重定向到任何页面的情况下将其从屏幕上删除？

我想顺利删除已删除的评论 div 标签...

请看图...

![在此处输入图像描述](../Images/e89c123177ceee5d8ddc36957b73e8ac.png)

我的代码是...

```
@model  IEnumerable<CRMEntities.Comment>

@{

     <div class="ParentBlock">

    @foreach (var item in Model)
    {
        <div class="OwnerClass" id="OwnerName" data-comment-id="@item.Id">

         <span class="EmpName"> @Html.ActionLink(item.Owner.FullName, "Details", "EMployee", new { id = item.OwnerId }, new { @style = "color:#1A6690;" })</span>

           @Html.DisplayFor(ModelItem => item.CommentDateTime)

          <span class="EmpName"><button type="button" class="deleteComment">Delete</button></span>

        <p class="CommentP">
           @Html.DisplayFor(ModelItem => item.CommentText)
        </p>

        <br />
            <a class="Delete222" style="cursor:move;display:none;">DeleteNew</a>
        <br />

     </div>

    }

     <p class="p12">

      </p>

</div>

      <p id="ClassPara" class="ShowComments" onclick="chkToggle()">Show All Comments</p>

}

   @Html.TextArea("Comment", "", 5, 80, "asdsd")

    <input type="button" value="Add Comment" id="AddCommentButton"/>                         
    <input type="button" value="Clear" onclick="clearText()"/>                    

    <br />

</body>
</html>

<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $(".deleteComment").click(function () {
            alert("asd");
            var commentBlock = $(this).parent('.OwnerClass');
            commentBlock.hide('slow')

     });
    });

    $(document).ready(function () {

        $('.OwnerClass').hover(function () {
            $('.Delete222', this).show();
        }, function () {
            $('.Delete222').hide();

        });

    });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:36:02.150

与其生成操作链接，不如在此处放置按钮 或 。将 JavaScript 函数绑定到此按钮上的单击事件，在此函数中进行 ajax 调用以从数据库中删除评论并使用 Jquery 隐藏正确的 div。

```
<span class="EmpName"><button type="button" class="deleteComment">Delete</button></span> 
```

JavaScript：

```
$('.deleteComment').click(function () 

        {
            var commentBlock = $(this).parent('.ParentBlock');
            $.ajax({

                type: 'post',
                url: '/Comment/DeleteComment',
                dataType: 'json',
                data:
                { 

                 commentId: getCommentId(commentBlock )

                },
                success: function (data) {

                    commentBlock.hide('slow')

                }

            });
        }); 
```

**更新：**

由于问题更新和此答案下方的评论而更新：

```
$(document).ready(function () {
    $(".deleteComment").click(function () {

        var commentBlock = $(this).parent('.OwnerClass');

        $.ajax({
            type: 'post',
            url: '/Comment/DeleteComment',
            dataType: 'json',
            data:
            { 

             commentId: commentBlock.attr('data-comment-id')

            },
            success: function (data) {

                commentBlock.hide('slow')

            }

        });

 });
}); 
```

# jquery - jQuery附加字符串超时

> ID：12528830
> 
> 赞同：1
> 
> 时间：2012-09-21T10:31:10.027
> 
> 标签：jquery, append, settimeout

我有以下脚本，其中先前的 ajax 调用提供数据并键入 html。它工作正常，只是我不能在新行上输入每个新呼叫，而不是替换以前的数据。我尝试了追加，但随后它重复输入了每个单词并添加了一个字符。

```
var isInTag = false;

function typetext() {
var thisChar = data.substr(c, 1);
if( thisChar == '<' ){ isInTag = true; }
if( thisChar == '>' ){ isInTag = false; }
$('#field').html(" "+data.substr(0, c++));
if(c < data.length+1)
    if( isInTag ){
        typetext();
    }else{
        setTimeout("typetext()", 100);
    }
else {
    c = 1;
    data = "";
}
} 
```

在ajax调用中：

```
data = '<span class="input">' + data + '</span><br />\n';
c = 0;
typetext(); 
```

我会很感激一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:37:26.157

当然是这条线：

```
$('#field').html(" "+data.substr(0, c++)); 
```

应该：

```
$('#field').append(" "+data.substr(c, c++)); 
```

因为你不是一次写出 1 个字符，而是写出字符串 from`0`到`c++`

或者你可以期待使用 var`thisChar`而不是`data`同样的效果？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:57:58.963

好的，您的代码存在一些问题，我已经设法让一个版本（我认为）与您想要的非常接近。

看看这里，我评论了我改变的部分，希望能清楚地说明我改变它们的原因：

[http://jsfiddle.net/MjS4t/2/](http://jsfiddle.net/MjS4t/2/)

基本上，有两个问题 - 首先，这一行：

`$('#field').html(" "+data.substr(0, c++));`

应该使用该`thisChar`变量，因为您已经从 var 中获得了要附加的字符`data`，但我认为`substr()`调用是导致它回显错误字符（或一遍又一遍）的原因。

我将其更改为： `$('#field').append(thisChar);`然后将其移至`c++`下一行 - 这使我更容易阅读。

接下来，您的超时调用是错误的。仅当您将函数分配给如下变量时，在函数名称周围加上引号才有效：

`var functionName = function(){ alert('hello world'); };`

但是您使用了不同的语法并将其声明为：

`function functionName(){ ... }`

所以，我从这里更改了 setTimeout 调用：

`setTimeout("typetext()", 100);`

对此：

`setTimeout(function() {typetext()},100);`

这样，它会稍微延迟显示文本，然后将其输入。

有关使用 javascript 设置超时的延迟的更多信息，请参见此处：[http ://www.sean.co.uk/a/webdesign/javascriptdelay.shtm](http://www.sean.co.uk/a/webdesign/javascriptdelay.shtm)

[jQuery 中的$.delay()](http://api.jquery.com/delay/)非常值得一读。

# android - 我可以在我的 Android 应用程序中使用 Skype 或 facebook 表情符号吗？

> ID：12528831
> 
> 赞同：2
> 
> 时间：2012-09-21T10:31:14.233
> 
> 标签：android, emoticons

我下载了他们的表情符号，这可能是一个愚蠢的问题，但我可以在我的应用程序中使用它们来发送 SMS 消息吗？或者我需要一些许可证？我可以在没有许可的情况下使用哪些表情符号？我这么问是因为我不希望有人举报我的侵权申请。甚至可以使用表情符号进行报道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T14:59:07.727

根据我们的法律，只要您更改图标，您就可以在应用程序中使用它们。您可以将它们用作蓝图，但不能将它们直接复制到您的应用程序中。虽然当它成为免费应用程序时可能不是问题，但这取决于您当地的法律。

# android - 共享首选项仅在第一次保存

> ID：12528836
> 
> 赞同：6
> 
> 时间：2012-09-21T10:31:36.907
> 
> 标签：android, sharedpreferences, store

该程序第一次创建偏好，但之后它永远不会改变它们。我将不胜感激帮助理解原因。

这是调用 xml 的 PreferencesScreen。

```
public class PreferencesScreen extends PreferenceFragment{

private final String TAG = "PreferencesScreen";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.d(TAG, "OnCreate");
    addPreferencesFromResource(R.xml.prefs);
} 
```

在首选项中，我有一个 ListPreference 和一个 Preference，它调用一个活动来存储电子邮件。

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

<PreferenceCategory android:title="Information Collected">
    <ListPreference 
        android:key="loggins"
        android:title="Logs Stored"
        android:summary="Choose the top kind of logs do you want to store."
        android:dialogTitle="Choose Logs"
        android:entries="@array/logs"
        android:entryValues="@array/logsValues"/>
</PreferenceCategory>

 <PreferenceCategory android:title="Email Configurations">
        <Preference
              android:key="pushing"
              android:title="The Email Activity"
              android:summary="Just push">
             <intent android:action = "ADDING_EMAIL"/>
        </Preference>
 </PreferenceCategory>
</PreferenceScreen> 
```

直到这里的一切。问题出在名为...的活动中

```
public class AddingEmail extends ListActivity implements OnClickListener{       

private Set<String> emails; 
private EditText emailAdd;
SharedPreferences.Editor editor;

public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.addingemail);
    Button add = (Button) findViewById(R.id.add);
    emailAdd = (EditText) findViewById(R.id.email);
    prefs = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
    editor = prefs.edit();

    prefList = toArrayList(prefs.getStringSet("emailWrongs", null));
    add.setOnClickListener(this);
}

public void onClick(View v) {
    Set<String> list = prefs.getStringSet("emailWrongs", null);
    String newEmail = emailAdd.getText().toString();        
    if (list==null){  //first time the preferences are called. 
        emails = new TreeSet<String>();
        editor.putStringSet("emailWrongs", emails);
        editor.apply();
    }
    if (newEmail != ""){
        emails=prefs.getStringSet("emailWrongs", null);
        emails.add(newEmail);
        editor.putStringSet("emailWrongs", emails);
        editor.apply();
    }
}

} 
```

关键是它总是很好地存储第一次，但如果我添加另一封电子邮件时，首选项不会改变。它们看起来好像发生了变化，因为如果我打印它们，它们会显示我添加的所有电子邮件，但首选项文件没有变化（在文件资源管理器中检查）。如果我重新启动或关闭并再次打开，首选项仅适用于我添加的第一封电子邮件。问题是如果我返回并更改 ListPreference 的首选项，那么它会存储所有更改，甚至是我添加的电子邮件。

希望我很清楚，它有很多代码，因为我想非常明确。感谢您的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-27T08:10:12.550

经过一个多星期的寻找错误，我发现了它。我认为这对很多有同样问题的人有帮助。

问题是当我调用首选项来获取字符串集时，它只引用列表而不复制它。所以我必须创建一个新列表并添加之前存储的所有元素并添加新元素，然后使用编辑器使用新列表更改首选项。代码是这样的：

```
Set<String> list = prefs.getStringSet("emailWrongs", null); 
Set<String> newList = new TreeSet<String>();
String newEmail = emailAdd.getText().toString();         
if (newEmail != ""){ 
    if (list != null){
        for(String each: list){
            newList.add(each);
        }
    }
    newList.add(newEmail);
    editor.putStringSet("emailWrongs", newList);     
    editor.apply();      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-02T16:16:17.933

对于存储 Stringset，更好的方法是首先删除最后一个 SharedPreferences 值，然后使用相同的键保存新的值。像这样：

```
defaultSharedPreferences.edit().remove("keysValue").commit();

defaultSharedPreferences.edit().putStringSet("keysValue",likesset).commit(); 
```

# jquery - 进行静默身份验证时出现 ADFS 错误

> ID：12528838
> 
> 赞同：1
> 
> 时间：2012-09-21T10:31:43.290
> 
> 标签：jquery, sharepoint-2010, wif, adfs2.0

我有一个通过 ADFS 身份验证进行 Passport 身份验证的 SharePoint 应用程序 (App1)。我在另一个子域 (App2) 中有另一个 asp.net 应用程序，它也具有 ADFS 身份验证。从第一个应用程序我有一个 $.ajax (jquery) 调用来控制托管在另一个应用程序中。

问题是 FedAuth cookie 没有从 App1 发布到 App2。在 HTTP 跟踪中，我发现 FedAuth cookie 域名是特定于机器的。在 web.config “federatedAuthentication” 部分 -> cookieHandler 我提到域为“microsoft.com”。这解决了 FedAuth 在域属性中没有机器名称的问题。

进行此更改后，我遇到了以下错误：ID4230：SecurityToken 格式不正确。期望元素名称“SecurityContextToken”，找到“SP”。

在网上找不到帮助。尝试更改 cookieHandler 的路径和名称属性，但没有解决问题。更改名称会创建两个 FedAuth cookie。一种使用 FedAuth 名称，另一种使用新名称。

特别提示：如果认证后打开App1，将App2的URL粘贴到浏览器中，则静默认证正常，可以看到App2的控制。只有当我通过 Ajax 调用 App2 控件时才会出现问题。我尝试使用“凭据 = true -> XMLHTTPRequest 对象”调用 $.ajax，但无济于事。

任何帮助指针通过 Ajax 调用使静默身份验证工作正常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T05:18:16.123

以下是我的场景。我有一个安全令牌服务提供商（STS 提供商）WIF Web 应用程序和 3 个 Web 客户端或依赖方 STSClient1、STSClient2 和一个 Sharepoint Web 客户端

如果所有客户端和 stsprovider 都在同一个域中，我会遇到与您提到的相同的错误，但当所有客户端和 stsprovider 都在不同域中时则不会。

在这篇文章中[http://msdn.microsoft.com/en-us/magazine/ff872350.aspx](http://msdn.microsoft.com/en-us/magazine/ff872350.aspx)

有人提到

*至于cookie的名称和路径，名称默认为FedAuth，即应用程序目录的路径。为 cookie 指定一个唯一名称会很有用，特别是当解决方案中的许多 RP 应用程序共享同一个域时。相反，当您希望在同一域上的多个应用程序之间共享 cookie 时，您可以选择指定通用路径。*

所以我去了每个客户并为cookie提供了一个唯一的名称，如下所示

```
<federatedAuthentication>
    <wsFederation passiveRedirectEnabled="true" issuer="[STSProviderURL]" realm="[ClientUrl]" requireHttps="false" />
    <cookieHandler requireSsl="false" name="[UniqueName]" />
</federatedAuthentication> 
```

# enyo - 如何设计搜索栏？

> ID：12528840
> 
> 赞同：1
> 
> 时间：2012-09-21T10:31:53.927
> 
> 标签：enyo

我在页面顶部有一个搜索栏，用户可以在其中输入任何单词。我想显示包含用户输入的单词的歌曲的名称。如何使用 enyo.js 进行设计？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T14:00:00.127

特别为你做了一点评论:) [http://jsfiddle.net/joopmicroop/NEYQC/](http://jsfiddle.net/joopmicroop/NEYQC/)

```
enyo.kind({
    name: 'App',
    kind: enyo.Control,
    components: [
        {kind: 'FittableRows', components:[
           {name: 'footer', kind: 'onyx.Toolbar', components: [
               {kind: "onyx.InputDecorator", components: [
                       {kind: "onyx.Input", name:"inputfield", placeholder: "Search number"},
                ]},
                {kind: "onyx.Button", content: "Search", ontap: "search"}, 
           ]},
            {kind: "List", fit: true, name:'list', classes:'list', count: 20, fixedHeight: true, onSetupItem: "setupItem", components: [
               {name: "item", classes:'listitem', ontap: "itemTap", components: [
                   {tag:'span', name: "name", content:"song name"},
                   {tag:'span', name: "index", content:"", style:'float:right;'}
                ]},
            ]},

        ]}
    ],
    searchstring:'',
    search: function(inSender, inEvent) {
        console.log('search tapped');
        console.log('inputfield value: ', this.$.inputfield.getValue());
        console.log('list: ', this.$.item);
        console.log('searchstring: ',this.searchstring);
        this.searchstring = this.$.inputfield.getValue();
        this.$.list.refresh();

    },
    setupItem: function(inSender, inEvent) {
        // just to have something to fill in
        var data = ['alibaba', 'alibobo', 'alibibi'];
        this.$.index.setContent(inEvent.index);
        this.$.name.setContent(data[inEvent.index %3]);
        // if searchstring isn't emty get to work
        if(this.searchstring != ''){
            var regex = new RegExp(this.searchstring); // = /searchstrin/g

            if(this.$.name.getContent().search(regex) != -1){ // -1 = not found
                this.$.list.select(inEvent.index, true); // set state selected true      
            }
            // if selected = true change add css class
            this.$.item.addRemoveClass("listitemselected", inSender.isSelected(inEvent.index)); 
        }

    },
    itemTap: function(inSender, inEvent) {
        alert("You tapped on row: " + inEvent.index);
    },

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T14:29:28.763

[我在这里发布了一个示例，作为我的 enyojs 教程的一部分，但它在这里](http://www.isgoodstuff.com/2013/08/07/enyojs-tutorial-11-3rd-party-combo/)使用了一个名为 taffyDB 的第三方库

# segmentation-fault - QLibray 分段错误

> ID：12528843
> 
> 赞同：0
> 
> 时间：2012-09-21T10:32:08.087
> 
> 标签：segmentation-fault, fault, qlibrary

我尝试使用外部库。当我从这个库调用函数时，它工作正常。但是后来我尝试在循环中调用这个函数我有分段错误。代码例如：

```
char *snam = (char*) new char;

QLibrary swedll("swedll32.dll");

typedef  char * (*Fct)(int, char *);
Fct fct=(Fct)(swedll.resolve("_swe_get_planet_name@8"));

for(int i=0;i<100;++i)
{
    if (fct) fct(0,snam);
} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:15:12.850

```
typedef char * (*Fct)(int, char *); Fct fct=(Fct)(swedll.resolve("_swe_get_planet_name@8")); 
```

必须改为

```
typedef __stdcall char * (*Fct)(int, char *); Fct fct=(Fct)(swedll.resolve("_swe_get_planet_name@8")); 
```

# android - 实现一个页面计数器，如主屏幕 android 中的页面计数器

> ID：12528844
> 
> 赞同：1
> 
> 时间：2012-09-21T10:32:09.293
> 
> 标签：android

我正在尝试实现 homescreen 。我知道我们可以通过这个 [线程](https://stackoverflow.com/questions/10008309/android-implement-a-page-counter-like-the-one-on-the-home-screen)使用 viewpager 来做到这一点。我已经使用 viewflipper 实现了水平滑动的主屏幕。我想在我的主屏幕上获得同样的效果。反正有没有这样做

谢谢你。

# php - Symfony2 和 Doctrine：代理类不延迟加载实体字段

> ID：12528851
> 
> 赞同：2
> 
> 时间：2012-09-21T10:32:48.203
> 
> 标签：php, symfony, doctrine-orm, lazy-loading, twig

我的应用程序中有三个具有 oneToMany 关系的相关实体：一个“Aufwand”属于一个“Aufgabe”，一个“Aufgabe”属于一个“版本”。在控制器的某个时刻，我写道：

```
$Aufwand['version'] = $Aufwand->getAufgabe()->getVersion(); 
```

并将其传递给 Twig 模板：

```
return $this->render('XXX:Aufwand:index.html.twig', array('Aufwand' => $Aufwand)); 
```

“版本”有一个字符串属性“数字”，我尝试在我的模板中使用

```
{{ Aufwand.version.nummer }} 
```

但它什么也不打印，对于“版本”的所有其他属性都是一样的——但我检查了一下，`Aufwand.version`它确实是一个`XXXXVersionProxy`——对象，它应该是。因此，显然 Doctrine 中的“延迟加载”并没有真正发生。

这是“Version.orm.yml”中的映射信息：

```
XXX\Entity\Version:
    type: entity
    repositoryClass: XXX\Repository\VersionRepository
    table: version

    id: 
        Projekt:
            associationKey: true
        nummer:
            type: string
            length: 20

    fields:
        beschreibung:
            type: text
            nullable: true
        faktor: 
            type: decimal
            precision: 2
            scale: 1

    uniqueConstraints:
        version_nr_unique:
           columns: nummer

    oneToMany:
        Aufgaben:
            targetEntity: Aufgabe
            mappedBy: Version

    manyToOne:
        Projekt:
            targetEntity: Projekt
            inversedBy: Versionen
            joinColumn:
                name: projekt_nummer
                referencedColumnName: nummer 
```

在“Aufgabe.orm.yml”中：

```
XXX\Entity\Aufgabe:
    type: entity
    repositoryClass: XXX\Repository\AufgabeRepository
    table: aufgabe

    id: 
        id:
            type: integer
            generator:
                strategy: AUTO

    fields:
        name:
            type: string
            length: 40
        beschreibung:
            type: text
            nullable: true
        faktor: 
            type: decimal
            precision: 2
            scale: 1
        soll_aufwand:
            type: integer

    oneToMany:
        Aufwaende:
            targetEntity: Aufwand
            mappedBy: Aufgabe

    manyToOne:

        Kategorie:
            targetEntity: Kategorie
            inversedBy: Aufgaben
            joinColumn:
                name: kategorie_id
                nullable: false
                referencedColumnName: id

        Projekt:
            targetEntity: Projekt
            inversedBy: Aufgaben
            joinColumn:
                name: projekt_nummer
                referencedColumnName: nummer
                nullable: true

        Version:
            targetEntity: Version
            inversedBy: Aufgaben
            joinColumn:
                name: version_nummer
                nullable: true
                referencedColumnName: nummer 
```

“Version”和“Aufgabe”中的getter 和setter 是标准的“get{Attribute}()”，属性本身是私有的。我已经尝试清除元数据缓存并转储`$Aufwand->getAufgabe()->getVersion() // also plus ->getNummer()`到控制器中，一切似乎都在那里。在数据库表中，“Aufwand”有一个“Aufgabe”，它有一个“版本”，应该给我它的“数字”......

我在 PostgreSQL 数据库上使用 PHP Symfony 2.0.16 和 Doctrine 2，任何寻找错误的提示将不胜感激。我想它可能在 Twig 模板中，但我不知道出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:14:11.637

为什么不将 $Aufwand 传递给模板并执行以下操作：

```
{{Aufwand.aufgabe.version.number}} 
```

这应该从视图中工作。

# git - 如何使用 tortoisegit 执行变基（壁球）

> ID：12528854
> 
> 赞同：51
> 
> 时间：2012-09-21T10:33:08.937
> 
> 标签：git, tortoisegit

无法获取如何为当前分支执行 squash rebase。控制台命令将是

```
git rebase -i HEAD~2 
```

然后像往常一样压扁。但是如何在 TGit 中做同样的事情呢？

初始化案例的脚本

```
git init .
touch 1
git add 1
git commit -m "1"
touch 2
git add 2
git commit -m "2"
touch 3
git add 3
git commit -m "3" 
```

因此，压缩后我们将有 1 次提交和 3 个文件。

有什么建议吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-09-26T19:29:38.227

这适用于我使用 TortoiseGit 1.7.12：

1.  右键单击要进行交互式变基的工作目录，然后从上下文菜单中选择`TortoiseGit`-> 。`Show log`
2.  **在出现的“日志消息”对话框中，右键单击您不想**再变基的最新提交，然后`Rebase master onto this...`从上下文菜单中选择。
3.  在出现的“Rebase”对话框中，勾选`Force Rebase`复选框，然后右键单击提交以在 、 等之间进行选择`Pick`，`Squash`或者`Squash ALL`在您的情况下勾选复选框。
4.  按下`Start Rebase`按钮，成功后变成`Commit`按钮，然后变成`Done`按钮。按所有。

请注意，在您的示例脚本中，您将压缩/修复到根提交，[这是一种特殊情况](https://stackoverflow.com/questions/2246208/change-first-commit-of-project-with-git)，不能如上所述工作，因为根提交没有您可以在步骤 2 中选择的父级。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2014-01-23T11:04:09.090

您可以使用 GUI 组合两个相邻的提交，如下所示。记住不要在共享存储库上合并提交。看： ![右键单击 2 个提交](../Images/6c1bc150c8f337d6c590a88ff823a565.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-07T14:33:37.457

这是我使用 Tortoise Git 所做的并将 repo 存储在 Assembla 上（显然通过类似于 GitHub）。

我决定我想有效地删除我的整个提交历史，并从头开始重新开始回购。我本可以在 Assembla 中删除本地 git 文件夹和相应的 repo，然后重新创建它，但我认为最好弄清楚如何以“正确的方式”执行此操作。

所以，这就是我实现它的方法：

1) 使用 Tortoise Git，显示 repo 的日志。突出显示所有提交，右键单击它们，然后选择“合并为一个提交”。

2）在弹出的对话框中，删除提交评论（它成为所有先前评论的组合），并将其替换为单个评论，例如REBASE。然后启动提交。然后，本地 repo 将从头开始有效（当然，所有文件仍然添加到其中），而无需删除并重新创建它。

3) 不幸的是，您不能只将其推送到 Assembla。它会拒绝这个，坚持你的“头”在远程分支后面。因此，要解决这个问题，首先转到 Assembla 中的 repo 的“设置”页面。启用“允许-强制推送”。

4) 现在执行“强制推送”。我不知道 Tortoise Git 是否有一个 gui 选项，但通过命令提示符很容易做到：

```
cd [your repo folder]
git push -f origin 
```

完毕！

更新：

要使用 TortoiseGit “强制推送”，在推送对话框中有强制“已知更改”和“未知更改”的复选框。我不确定有什么区别，但它们都导致使用 git --force 开关。首先尝试“已知更改”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-07-18T14:58:24.530

*   转到`Show Log`，然后在您当前的提交处创建一个标签（例如“tmp”）。
*   硬重置为您不想更改的历史记录中的第一次提交。
*   `All Branches`如果您没有看到所有提交，请在日志底部切换。
*   然后选择所有较新的提交并右键单击它们： `Cherry Pick selected commits...`
*   现在您处于交互式变基模式。在那里，您可以执行交互式 rebase 常见的操作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-21T22:39:07.613

您可以从 Rebase 窗口执行此操作。该视频很好地涵盖了它：[https ://youtu.be/qrMubRPkkrE?t=490](https://youtu.be/qrMubRPkkrE?t=490)

如视频所示：

1.  右键单击`TortoiseGit`/`Rebase...`
2.  更改`Upstream:`为`FETCH_HEAD`
3.  更改`Pick ALL`为`Squash ALL`
4.  点击`Start Rebase`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T15:54:59.050

一种方法是：转到日志对话框并选择“rebase to *”，然后选中“Force”复选框并将提交标记为“squash”（例如，通过输入“q”）。

# php - PHP & Mysql：按日期过滤

> ID：12528858
> 
> 赞同：-2
> 
> 时间：2012-09-21T10:33:28.123
> 
> 标签：php, mysql

我正在尝试过滤所有即将举行的会议的列表到目前为止，我正在使用此查询

```
$sql = "SELECT *  from demo_meeting WHERE created_by_id IN(SELECT id FROM demo_user WHERE user_name = '$get_user_name') AND venue_id IS NULL AND meeting_datetime  >= curdate()  ORDER BY meeting_datetime ";
                    mysql_real_escape_string($sql);
                    $result = mysql_query($sql) or die (mysql_error());
                    while($row = mysql_fetch_array( $result )) {
                        // Print out the contents of each row into a table
                        //date_default_timezone_set('Australia/Melbourne');
                        date_default_timezone_set('Asia/Calcutta');   // Change it as per user requirement
                        $date = date('Y-m-d H:i:s ', time());
                        if ($date > $row['meeting_datetime']){
                        ?>
                        <tr><td>
                        <div class= "main" style ="margin-top: 5px; padding: 15px 14px;background:#fff">
                              <div class = "bold"  > Name :<?php echo $row['name']; ?><br> </div>
                              <div class = "bold"  > Date :<?php echo $row['meeting_datetime']; ?></div>
                            </div>
                            <div class = "clear"></div>
                        </td></tr>
                <?php
                        }} 
```

为什么上述声明没有打印即将举行的会议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:38:00.993

也许是因为你做`meeting_datetime >= curdate()`的和事后相反`if ($date > $row['meeting_datetime'])`？

因此，只需将 > 替换为 < 或 <=

# java - Java方法返回一个实现接口的枚举

> ID：12528861
> 
> 赞同：4
> 
> 时间：2012-09-21T10:33:33.133
> 
> 标签：java, generics

如何指定 Java 方法返回实现接口的枚举？给出了这个方法：

```
public <T extends Enum<T> & SomeInterface> void someMethod(Class<T> type) {
} 
```

我想做：

```
someMethod(anotherMethod()); 
```

签名应该是什么`anotherMethod`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T11:11:25.680

正确的实施应该是

```
<T extends Enum<? extends T> & SomeInterface> void someMethod(Class<T> type);

<T extends Enum<? extends T> & SomeInterface>  Class<T>  anotherMethod(); 
```

请查看[通配符的更多乐趣](http://docs.oracle.com/javase/tutorial/extra/generics/morefun.html)

或更简单的版本

```
public class Example<T extends Enum<T> & SomeInterface> {
  public void someMethod(Class<T> type) {}
  public Class<T> anotherMethod() {}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T10:37:09.467

如果`someMethod`需要一个`Class<T>`参数 where `T extends Enum<T> & SomeInterface`，那么这就是您需要从`anotherMethod`. 而且由于您在所需调用的括号中没有任何内容，我会简单地说：

`public Class<T extends Enum<T> & SomeInterface> anotherMethod()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T10:45:32.693

`anotherMethod`只需要返回 a `Class`，它可能是您想到的扩展枚举和接口的确切类，或者只是一个通配符`Class<?>`（尽管您会有编译时警告）。如果您想避免警告，则返回类型需要使用您调用的方法中`Class<T>`的泛型定义。`T`

# c# - 在 C# 中向 Windows 8 Metro 风格应用程序发送推送通知

> ID：12528866
> 
> 赞同：2
> 
> 时间：2012-09-21T10:34:04.803
> 
> 标签：c#, windows-8, microsoft-metro

我已经下载了 Microsoft 示例代码，用于注册您的应用以将通知推送到。[样本](http://code.msdn.microsoft.com/windowsapps/push-and-periodic-de225603)

我已通过电子邮件将频道 URI 发送给自己，并且我相信我拥有所有相关信息来实际发送推送。但我从未处理过推送通知的服务器端发送。

示例应用程序应该只输出我发送的任何内容。

我找不到任何预先存在的应用程序来帮助我。我只是希望能够在示例应用程序窗口中看到一些信息。从那里我应该能够弄清楚将来要发送什么，标题等。

是否有一个示例应用程序，我只需在其中输入 Channel Uri、令牌、SID 和秘密，它会向我的应用程序发送类似“Hello world”的内容？最好有源代码，这样我就可以把它拆开看看它是如何完成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:40:53.777

查看 Windows Azure 移动服务推送通知的教程：http: [//www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-push-dotnet/](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-push-dotnet/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T01:07:07.703

我将支持 Windows Azure 推送通知的建议，并[在此处提供另一个博客概述（使用 JavaScript）](http://blogs.msdn.com/b/jimoneil/archive/2012/09/19/adding-notifications-to-your-windows-8-game.aspx)

如果您确实想深入了解上面提到的参考 - [http://watwindows8.codeplex.com/](http://watwindows8.codeplex.com/) - 确实适用于 RTM；但是，该设置被编码为仅适用于 Release Preview。

如果您想设置它，您可以执行以下操作：

1.  将文本中的内部版本号从`Setup\CheckW8.ps1`8400 更改为 9200

    $os = Get-WmiObject Win32_OperatingSystem; if ($os.BuildNumber.Equals("9200")) { 退出 1; } ...

2.  然后在 中`Setup\DependencyChecker\WATWindows8.depi`，完全删除这三个`<dependency>`部分。此处假设您已经拥有 Visual Studio 2012 RTM、Azure 2012 RTM 工具，并且 NuGet 是最新的。

当您按照 Toolkit 的指示运行设置时，它现在应该可以工作了。您将获得一个空的依赖项列表，但这很好，因为您已经手动安装了它们。

C# Push Notification 示例代码在重新编译时应该没问题（您会收到有关包名称的错误，但这是意料之中的，因为它是您需要执行的配置的一部分）。

对于 JavaScript 版本，您必须将脚本引用修补到 RC 版本中`default.html`，从引用中删除旧的“JavaScript 窗口库”并添加新的。

# mysql - MySQL #1054 - '字段列表' 中的未知列 'lat'

> ID：12528867
> 
> 赞同：1
> 
> 时间：2012-09-21T10:34:08.130
> 
> 标签：mysql

我正在尝试合并两个 MySQL 语句，我想我已经接近解决这个问题但我得到**“#1054 - '字段列表'中的未知列 'lat'”**指的是下面的粗体文本。

我试过用“”、“”甚至“”来包含**lat**和**lng文本，但没有效果。**

```
SELECT post_attributes_3.value AS name, clean, post_attributes.value AS lat, post_attributes_1.value AS lng, post_attributes_2.value AS category, ( 3959 * acos( cos( radians('%s') ) * cos( radians( **lat** ) ) * cos( radians( **lng** ) - radians('%s') ) + sin( radians('%s') ) * sin( radians( **lat** ) ) ) ) AS distance
FROM post_attributes AS post_attributes_3 INNER JOIN ((post_attributes AS post_attributes_1 INNER JOIN (posts INNER JOIN post_attributes ON posts.id = post_attributes.post_id) ON post_attributes_1.post_id = posts.id) INNER JOIN post_attributes AS post_attributes_2 ON posts.id = post_attributes_2.post_id) ON post_attributes_3.post_id = posts.id
WHERE (((post_attributes_3.name)="name") AND ((post_attributes_2.name)="category_id") AND ((post_attributes.name)="lat") AND ((post_attributes_1.name)="lng"))
HAVING distance < '%s' ORDER BY distance LIMIT 0 , 20; 
```

我在下面组合的两个 SQL 语句：

```
SELECT name, clean, lat, lng, category, ( 3959 * acos( cos( radians('%s') ) * cos( radians( lat ) ) * cos( radians( lng ) - radians('%s') ) + sin( radians('%s') ) * sin( radians( lat ) ) ) ) AS distance FROM categorize HAVING distance < '%s' ORDER BY distance LIMIT 0 , 20; 
```

和

```
SELECT post_attributes_3.value AS name, clean, post_attributes.value AS lat, post_attributes_1.value AS lng, post_attributes_2.value AS category
FROM post_attributes AS post_attributes_3 INNER JOIN ((post_attributes AS post_attributes_1 INNER JOIN (posts INNER JOIN post_attributes ON posts.id = post_attributes.post_id) ON post_attributes_1.post_id = posts.id) INNER JOIN post_attributes AS post_attributes_2 ON posts.id = post_attributes_2.post_id) ON post_attributes_3.post_id = posts.id
WHERE (((post_attributes_3.name)="name") AND ((post_attributes_2.name)="category_id") AND ((post_attributes.name)="lat") AND ((post_attributes_1.name)="lng")); 
```

这两个 MySQL 语句分别很好，但它可能与使用 AS 语句有关。

**更新：感谢您的帮助，但由于使用此选择查询的方式，我选择创建一个 MySQL 视图并使用它来运行与我的第一个类似的 SQL 命令。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:43:08.213

尝试用真实的列名替换别名：

```
SELECT post_attributes_3.value AS name, clean, post_attributes.value AS lat, post_attributes_1.value AS lng, post_attributes_2.value AS category, ( 3959 * acos( cos( radians('%s') ) * cos( radians( post_attributes.value ) ) * cos( radians( post_attributes_1.value ) - radians('%s') ) + sin( radians('%s') ) * sin( radians( post_attributes.value ) ) ) ) AS distance
FROM post_attributes AS post_attributes_3 INNER JOIN ((post_attributes AS post_attributes_1 INNER JOIN (posts INNER JOIN post_attributes ON posts.id = post_attributes.post_id) ON post_attributes_1.post_id = posts.id) INNER JOIN post_attributes AS post_attributes_2 ON posts.id = post_attributes_2.post_id) ON post_attributes_3.post_id = posts.id
WHERE (((post_attributes_3.name)="name") AND ((post_attributes_2.name)="category_id") AND ((post_attributes.name)="lat") AND ((post_attributes_1.name)="lng"))
HAVING distance < '%s' ORDER BY distance LIMIT 0 , 20; 
```

# [SQL fiddle 展示如何使用`WHERE`列`HAVING`别名](http://sqlfiddle.com/#!2/d7c96/5)

最后一个查询导致错误，这也是您遇到的问题。

# arrays - 使用corona sdk（lua），在网格中移动一个对象后等于网格中存在的最后一个对象，为什么？

> ID：12528871
> 
> 赞同：0
> 
> 时间：2012-09-21T10:34:17.517
> 
> 标签：arrays, lua, 2d, coronasdk

我是电晕的新手，开始使用示例应用程序学习，在这里我遇到了一个问题，需要一些建议，我将一个对象拖到一个空位置，它位于当前对象之后或之前或上或下 2 个位置，但是当我拖动一个对象时，网格中的最后一个元素（不是空的）变得与拖动的对象相同，这是一个奇怪的错误，我不知道如何解决它。我在这里粘贴代码，请告诉我解决方案。提前致谢

模块（...，package.seeall）函数新（）

```
local localGroup = display.newGroup()

local gamebg=display.newImageRect("gameBG.png",_W,_H)
gamebg:setReferencePoint(display.centerReferencePoint)
gamebg.x=_W/2
gamebg.y=_H/2

swapButton = {} --A 2D Array
local instance = {}

require "sprite"

level={ 1,0,1,1,0,1,0,
            1,1,0,1,1,0,1,
    0,1,1,0,0,1,1,
    1,0,1,1,0,1,0,
    1,1,0,1,1,0,1,
    0,1,1,0,0,1,1,
    1,1,0,1,0,0,0}

print(level[2])
local tempX=130
local tempY=60

local temp=1;

for i = 0, 6, 1 do
    swapButton[i]={}
    instance[i]={}

    for j=0,6,1 do
        print(level[temp+1])

        if level[temp]== 1 then
            print("true")
                instance[i][j]=sprite.newSprite(sprite.newSpriteSet(sprite.newSpriteSheet("fireBall.png",36,36),1,40))
                instance[i][j].x=tempX
                instance[i][j].y=tempY

            instance[i][j].id=math.random ( 49 )

            instance[i][j].blendMode="add"
            instance[i][j]:prepare()
            instance[i][j]:play()

            --print (math.random (1,49))

            function myTouchListener(event)
                local t = event.target

                if event.phase == "began" then
                            display.getCurrentStage():setFocus( t )
                    --print(display.getCurrentStage( ))
                            print("************* Began*********")
                            print(i,j)

                    t.isFocus = true

                    -- Store initial position
                --  t.x0 = event.x - t.x
                --  t.y0 = event.y - t.y

                    t.x0 =  instance[i][j].x
                    t.y0 =  instance[i][j].y

                    t.x1 = t.x
                    t.y1 = t.y
                    print(t.x0)
                    print(t.y0)
                    print("t.x1=",t.x1)
                    print("t.y1=",t.y1)

                elseif event.phase=="moved" then

                            print(instance[i][j].x)
                            print(instance[i][j].y)
                            instance[i][j].x=event.x
                            instance[i][j].y=event.y
                            t.x=instance[i][j].x
                            t.y=instance[i][j].y

            elseif event.phase == "ended" then
                print(instance[i][j].x)
                    print(instance[i][j].y)
                    print(i,j)
                    --nearMe(t)
                    getFireBall(t,i,j)

                            print("Here the 2d array after swap")
                            for l=0,6,1 do
                                for m=0,6,1 do
                                    print(instance[l][m])
                                    end

                                end

                    display.getCurrentStage( ):setFocus( nil );
                    t.isFocus = false

                end
            end
            function getFireBall(t2,setX,setY)
                 print(i,j)
                                     print(setX,setY)
                                    print(math.abs(t2.x-t2.x0))
                                    print(math.abs(t2.y-t2.y0))
                                    if (math.abs(t2.x-t2.x0) > 70 and math.abs(t2.x-t2.x0)<90)  or (math.abs(t2.y-t2.y0)>70 and math.abs(t2.y-t2.y0)<90)then

                                            if t2.x>t2.x0 and math.abs(t2.y-t2.y0) <= math.abs(t2.x-t2.x0) then

                        print("Forward")

                                                    print("it fixes here")

                                                    for p=0, 6 , 1 do
                                                        for q=0, 6, 1 do
                                                            if instance[setX][setY]~=nil then
                                                            if (swapButton[p][q].x==instance[setX][setY].x or (swapButton[p][q].x>=instance[setX][setY].x-10 and swapButton[p][q].x<=instance[setX][setY].x+10))
                                                                and (swapButton[p][q].y==instance[setX][setY].y or (swapButton[p][q].y>=instance[setX][setY].y-10 and swapButton[p][q].y<=instance[setX][setY].y+10))then

                                                                if instance[p][q]==nil then

                                                                     print ("placeHere")
                                                                     print(i,j)
                                                                    -- instance[p][q+2]=instance[setX][setY]
                                                                    print(p,q)
                                                                    print(swapButton[p][q].x,swapButton[p][q].y)
                                                                    print(setX,setY)
                                                                    instance[p][q]=sprite.newSprite(sprite.newSpriteSet(sprite.newSpriteSheet("fireBall.png",36,36),1,40))
                                                                     instance[p][q].x=swapButton[p][q].x
                                                                     instance[p][q].y=swapButton[p][q].y
                                                                     instance[p][q].blendMode="add"
                                                                     instance[p][q]:prepare()
                                                                     instance[p][q]:play()
                                                                     instance[p][q]:addEventListener("touch",myTouchListener)
                                                                     instance[setX][setY].x=t2.x0
                                                                     instance[setX][setY].y=t2.y0
                                                                     print(setX,setY)
                                                                    display.remove(instance[setX][setY])
                                                                     instance[setX][setY]=nil
                                                                    display.remove( instance[p][q-1] )

                                                                    instance[p][q-1]=nil
                                                                    print(i,j)
                                                                    print(p,q)
                                                                    i=p;
                                                                    j=q;

                                                                    print(i,j)
                                                                    print(instance[i][j])
                                                                  --  instance[i][j]=nil
                                                              else 
                                                                  print("fireBall is Exists")
                                                                  instance[i][j].x=t2.x0
                                                                  instance[i][j].y=t2.y0
                                                                end
                                                            end
                                                        end
                                                        end
                                                    end

                                            elseif t2.x<t2.x0 and math.abs(t2.y-t2.y0) <= math.abs(t2.x-t2.x0) then
                        print("Backward")

                                                    local backward=false

                                                    for p=0, 6 , 1 do
                                                        for q=0, 6, 1 do
                                                            print(swapButton[p][q].x)
                                                            print(swapButton[p][q].y)
                                                           print(p,q)
                                                            print(setX,setY)
                                                            print(setX,setY-2)
                                                            if instance[setX][setY]~=nil then
                                                                if (swapButton[p][q].x==instance[setX][setY].x or (swapButton[p][q].x>=instance[setX][setY].x-10 and swapButton[p][q].x<=instance[setX][setY].x+10))
                                                                and (swapButton[p][q].y==instance[setX][setY].y or (swapButton[p][q].y>=instance[setX][setY].y-10 and swapButton[p][q].y<=instance[setX][setY].y+10))
                                                                and backward==false then
                                                                    print(p,q)

                                                                if instance[p][q]==nil then

                                                                    print ("placeHere")

                                                                    -- instance[p][q+2]=instance[setX][setY]
                                                                    print(p,q)
                                                                    print(swapButton[p][q].x,swapButton[p][q].y)
                                                                    print(setX,setY)
                                                                    instance[p][q]=sprite.newSprite(sprite.newSpriteSet(sprite.newSpriteSheet("fireBall.png",36,36),1,40))
                                                                     instance[p][q].x=swapButton[p][q].x
                                                                     instance[p][q].y=swapButton[p][q].y
                                                                     instance[p][q].blendMode="add"
                                                                     instance[p][q]:prepare()
                                                                     instance[p][q]:play()
                                                                     instance[p][q]:addEventListener("touch",myTouchListener)
                                                                     instance[setX][setY].x=t2.x0
                                                                     instance[setX][setY].y=t2.y0
                                                                     backward=true
                                                                     print(setX,setY)
                                                                     print(p,q)
                                                                      instance[setX][setY]=nil
                                                                     display.remove(instance[setX][setY])

                                                                    instance[p][q+1]=nil

                                                                    display.remove( instance[p][q+1] )

                                                                   -- print(i,j)

                                                                    i=p;
                                                                    j=q;
                                                                    print(i,j)

                                                              else
                                                                    print("Already Exists")
                                                                    instance[setX][setY].x=t2.x0
                                                                    instance[setX][setY].y=t2.y0

                                                        end
                                                            end

                                                end
                                                end

                                                    end

                    elseif t2.y>t2.y0 and math.abs(t2.x-t2.x0)<= math.abs(t2.y-t2.y0)then
                        print("Downward")
                                                    local downward=false

                                                    for p=0, 6 , 1 do
                                                        for q=0, 6, 1 do
                                                            print(swapButton[p][q].x)
                                                            print(swapButton[p][q].y)

                                                            if instance[setX][setY]~=nil then
                                                            if (swapButton[p][q].x==instance[setX][setY].x or (swapButton[p][q].x>=instance[setX][setY].x-10 and swapButton[p][q].x<=instance[setX][setY].x+10))
                                                                and (swapButton[p][q].y==instance[setX][setY].y or (swapButton[p][q].y>=instance[setX][setY].y-10 and swapButton[p][q].y<=instance[setX][setY].y+10))
                                                                and downward==false then
                                                               print(p,q)
                                                                if instance[p][q]==nil then

                                                                     print ("placeHere")

                                                                    -- instance[p][q+2]=instance[setX][setY]
                                                                    print(p,q)
                                                                    print(swapButton[p][q].x,swapButton[p][q].y)
                                                                    print(setX,setY)
                                                                    instance[p][q]=sprite.newSprite(sprite.newSpriteSet(sprite.newSpriteSheet("fireBall.png",36,36),1,40))
                                                                     instance[p][q].x=swapButton[p][q].x
                                                                     instance[p][q].y=swapButton[p][q].y
                                                                     instance[p][q].blendMode="add"
                                                                     instance[p][q]:prepare()
                                                                     instance[p][q]:play()
                                                                     instance[p][q]:addEventListener("touch",myTouchListener)
                                                                     instance[setX][setY].x=t2.x0
                                                                     instance[setX][setY].y=t2.y0
                                                                     downward=true
                                                                     print(setX,setY)
                                                                     instance[setX][setY]=nil
                                                                     display.remove(instance[setX][setY])
                                                                    instance[p-1][q]=nil
                                                                    display.remove( instance[p-1][q])

                                                                    print(i,j)
                                                                    i=p;
                                                                    j=q;

                                                                    print( i,j )
                                                                  --  instance[i][j]=nil
                                                              else 
                                                                  print("fireBall is Exists")
                                                                  print(p,q)
                                                                  instance[i][j].x=t2.x0
                                                                  instance[i][j].y=t2.y0
                                                                end
                                                            end
                                                        end
                                                        end
                                                    end

                    elseif t2.y<t2.y0 and math.abs(t2.x-t2.x0)<= math.abs(t2.y-t2.y0)then
                        print("Upward")
                                               local backward=false

                                                    for p=0, 6 , 1 do
                                                        for q=0, 6, 1 do
                                                            print(swapButton[p][q].x)
                                                            print(swapButton[p][q].y)

                                                            if instance[setX][setY]~=nil then
                                                            if (swapButton[p][q].x==instance[setX][setY].x or (swapButton[p][q].x>=instance[setX][setY].x-10 and swapButton[p][q].x<=instance[setX][setY].x+10))
                                                                and (swapButton[p][q].y==instance[setX][setY].y or (swapButton[p][q].y>=instance[setX][setY].y-10 and swapButton[p][q].y<=instance[setX][setY].y+10))
                                                                and backward==false then
                                                               print(p,q)
                                                                if instance[p][q]==nil then

                                                                     print ("placeHere")

                                                                    -- instance[p][q+2]=instance[setX][setY]
                                                                    print(p,q)
                                                                    print(swapButton[p][q].x,swapButton[p][q].y)
                                                                    print(setX,setY)
                                                                    instance[p][q]=sprite.newSprite(sprite.newSpriteSet(sprite.newSpriteSheet("fireBall.png",36,36),1,40))
                                                                     instance[p][q].x=swapButton[p][q].x
                                                                     instance[p][q].y=swapButton[p][q].y
                                                                     instance[p][q].blendMode="add"
                                                                     instance[p][q]:prepare()
                                                                     instance[p][q]:play()
                                                                     instance[p][q]:addEventListener("touch",myTouchListener)
                                                                     instance[setX][setY].x=t2.x0
                                                                     instance[setX][setY].y=t2.y0
                                                                     backward=true
                                                                     print(setX,setY)
                                                                     instance[setX][setY]=nil
                                                                     display.remove(instance[setX][setY])
                                                                     instance[p+1][q]=nil
                                                                    display.remove( instance[p+1][q] )

                                                                    print(i,j)
                                                                    i=p;
                                                                    j=q;

                                                                    print(i,j)
                                                                  --  instance[i][j]=nil
                                                              else 
                                                                  print("fireBall is Exists")
                                                                  print(p,q)
                                                                  instance[i][j].x=t2.x0
                                                                  instance[i][j].y=t2.y0
                                                                end
                                                            end
                                                            end
                                                        end
                                                    end

                    end
                                        else

                                                instance[setX][setY].x=t2.x0
                                                  instance[setX][setY].y=t2.y0

                                        end

                                    end

        instance[i][j]:addEventListener("touch",myTouchListener)

        else 
            print(instance[i][j])
            print(tempX)
            print(tempY)
    --instance[i][j].x=tempX
            --instance[i][j].y=tempY

        end

        swapButton[i][j]= display.newImage("circle.png",40,40)

        swapButton[i][j].x=tempX
        swapButton[i][j].y=tempY
        tempX=tempX+40 
       temp=temp+1;
       print(temp)
       print ("swapButtn at"..swapButton[i][j].x)

    end
    tempX=130
    tempY=tempY+40
end

localGroup:insert(gamebg)

return localGroup 
```

结尾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T05:33:56.763

嗨，这是修剪后的代码

模块（...，package.seeall）函数新（）

```
local localGroup = display.newGroup()

local gamebg=display.newImageRect("gameBG.png",_W,_H)
gamebg:setReferencePoint(display.centerReferencePoint)
gamebg.x=_W/2
gamebg.y=_H/2

swapButton = {} --A 2D Array
local instance = {}

require "sprite"

level={ 1,0,1,1,0,1,0,
            1,1,0,1,1,0,1,
    0,1,1,0,0,1,1,
    1,0,1,1,0,1,0,
    1,1,0,1,1,0,1,
    0,1,1,0,0,1,1,
    1,1,0,1,0,0,0}

local tempX=130
local tempY=60

local temp=1;

for i = 0, 6, 1 do
    swapButton[i]={}
    instance[i]={}

    for j=0,6,1 do

        if level[temp]== 1 then

                instance[i][j]=sprite.newSprite(sprite.newSpriteSet(sprite.newSpriteSheet("fireBall.png",36,36),1,40))
                instance[i][j].x=tempX
                instance[i][j].y=tempY

            instance[i][j].id=math.random ( 49 )

            instance[i][j].blendMode="add"
            instance[i][j]:prepare()
            instance[i][j]:play()

            --print (math.random (1,49))

            function myTouchListener(event)
                local t = event.target

                if event.phase == "began" then
                            display.getCurrentStage():setFocus( t )
                    --print(display.getCurrentStage( ))
                            print("************* Began*********")
                            print(i,j)

                    t.isFocus = true

                    -- Store initial position

                    t.x0 =  instance[i][j].x
                    t.y0 =  instance[i][j].y

                    t.x1 = t.x
                    t.y1 = t.y

                elseif event.phase=="moved" then

                            instance[i][j].x=event.x
                            instance[i][j].y=event.y
                            t.x=instance[i][j].x
                            t.y=instance[i][j].y

            elseif event.phase == "ended" then

                    print(i,j)
                    --nearMe(t)
                    getFireBall(t,i,j)

                            print("Here the 2d array after swap")
                            for l=0,6,1 do
                                for m=0,6,1 do
                                    print(instance[l][m])
                                    end

                                end

                    display.getCurrentStage( ):setFocus( nil );
                    t.isFocus = false

                end
            end
            function getFireBall(t2,setX,setY)
                 print(i,j)

                                    if (math.abs(t2.x-t2.x0) > 70 and math.abs(t2.x-t2.x0)<90)  or (math.abs(t2.y-t2.y0)>70 and math.abs(t2.y-t2.y0)<90)then

                                   if t2.x>t2.x0 and math.abs(t2.y-t2.y0) <= math.abs(t2.x-t2.x0) then

                        print("Forward")

                                                    print("it fixes here")

                                                    for p=0, 6 , 1 do
                                                        for q=0, 6, 1 do
                                                            if instance[setX][setY]~=nil then
                                                            if (swapButton[p][q].x == instance[setX][setY].x or (swapButton[p][q].x>=instance[setX][setY].x-10 and swapButton[p][q].x<=instance[setX][setY].x+10)) and (swapButton[p][q].y==instance[setX][setY].y or (swapButton[p][q].y>=instance[setX][setY].y-10 and swapButton[p][q].y<=instance[setX][setY].y+10))then

                                                                if instance[p][q]==nil then

                                                                    [q+2]=instance[setX][setY]

                                                                    instance[p][q]=sprite.newSprite(sprite.newSpriteSet(sprite.newSpriteSheet("fireBall.png",36,36),1,40))
                                                                     instance[p][q].x=swapButton[p][q].x
                                                                     instance[p][q].y=swapButton[p][q].y
                                                                     instance[p][q].blendMode="add"
                                                                     instance[p][q]:prepare()
                                                                     instance[p][q]:play()
                                                                     instance[p][q]:addEventListener("touch",myTouchListener)
                                                                     instance[setX][setY].x=t2.x0
                                                                     instance[setX][setY].y=t2.y0

                                                                    display.remove(instance[setX][setY])
                                                                    instance[setX][setY]=nil

                                                                    display.remove( instance[p][q-1] )
                                                                    instance[p][q-1]=nil

                                                                    print(i,j)
                                                                    print(p,q)
                                                                    i=p;
                                                                    j=q;

                                                                    print(i,j)
                                                                    print(instance[i][j])

                                                              else 
                                                                    print("fireBall is Exists")
                                                                  instance[i][j].x=t2.x0
                                                                  instance[i][j].y=t2.y0
                                                                end
                                                            end
                                                        end
                                                        end
                                                    end
                    end
                                        else

                                                instance[setX][setY].x=t2.x0
                                                  instance[setX][setY].y=t2.y0

                                        end
                                    end

        instance[i][j]:addEventListener("touch",myTouchListener)

        end

        swapButton[i][j]= display.newImage("circle.png",40,40)

        swapButton[i][j].x=tempX
        swapButton[i][j].y=tempY
        tempX=tempX+40 
       temp=temp+1;

    end
    tempX=130
    tempY=tempY+40
end

localGroup:insert(gamebg)

return localGroup 
```

结尾

# node.js - Node.JS：重用套接字？

> ID：12528876
> 
> 赞同：3
> 
> 时间：2012-09-21T10:34:36.647
> 
> 标签：node.js

我尝试执行此脚本：

```
require('net').createServer().listen('/tmp/test'); 
```

第一次脚本运行成功，但在第二次启动 node.js 时抛出错误：**错误：监听 EADDRINUSE**

有没有办法重用套接字（unix和tcp）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T11:21:20.320

显然，您第一次调用的脚本/侦听器/服务器仍在运行。您必须终止正在侦听的脚本/进程才能再次使用相同的端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-28T07:35:30.330

“正确”的方式（根据 Node.js 文档）是用 关闭服务器`server.close()`，这会从文件系统中删除创建域套接字。

因此，如果您再次运行服务器，则不会出现“EADDRINUSE”错误，因为它每次都会重新创建|删除一个新的域套接字。

在 Windows（使用命名管道）上，我们没有这个问题，一旦服务器进程关闭，操作系统会自动删除创建的命名管道

# magento - 从 sitemap.xml 生成中排除特定页面

> ID：12528883
> 
> 赞同：4
> 
> 时间：2012-09-21T10:35:26.150
> 
> 标签：magento

我想知道是否有一种方法可以排除一个特定的 CMS 页面被添加/包含在 Magento 的站点地图生成中。

一些专家的建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T11:50:41.900

例如通过`Mage_Sitemap_Model_Resource_Cms_Page::getCollection`这样的覆盖：

```
public function getCollection($storeId)
{
    $pages = array();

    $select = $this->_getWriteAdapter()->select()
        ->from(array('main_table' => $this->getMainTable()), array($this->getIdFieldName(), 'identifier AS url'))
        ->join(
            array('store_table' => $this->getTable('cms/page_store')),
            'main_table.page_id=store_table.page_id',
            array()
        )
        // --- exclude single CMS page "enable-cookies"
        ->where('main_table.identifier<>"enable-cookies"')
        // --- exclude multiple CMS pages "home", "enable-cookies"
        // ->where('main_table.identifier NOT IN (?)', array('home', 'enable-cookies')) 
        // ---
        ->where('main_table.is_active=1')
        ->where('store_table.store_id IN(?)', array(0, $storeId));
    $query = $this->_getWriteAdapter()->query($select);
    while ($row = $query->fetch()) {
        if ($row['url'] == Mage_Cms_Model_Page::NOROUTE_PAGE_ID) {
            continue;
        }
        $page = $this->_prepareObject($row);
        $pages[$page->getId()] = $page;
    }

    return $pages;
} 
```

如果您还不知道如何覆盖 Magento 模型类，请查看 Alan Storm 的文章[Magento for Developers: Part 1 - Introduction to Magento](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-1-introduction-to-magento)，尤其是“模型”和“类覆盖”部分。

# javascript - 随机但仅在 Chrome 中

> ID：12528886
> 
> 赞同：2
> 
> 时间：2012-09-21T10:35:41.603
> 
> 标签：javascript, random

我有这个函数来创建一个随机的数字范围。

```
function randomRange(min, max) {
  return (new Array(++max-min))
  .join('.').split('.')
  .map(function(v,i){ return min+i; })
  .sort(function(){ return 0|Math.random()*max; });
} 
```

它可以完美运行，但只能在 Chrome 中使用。由于某种原因，所有其他浏览器几乎没有变化......

我在这里有一个简单的演示，所以你可以看到[http://jsfiddle.net/elclanrs/zZRda/](http://jsfiddle.net/elclanrs/zZRda/)的区别。

正如您所见，Chrome 中的数字顺序大多是随机的，但在其他浏览器中变化不大，只有少数数字改变了位置，但看起来几乎相同。

现在在 Chrome 和其他浏览器中检查[http://jsbin.com/iyalax/3/edit ，您会非常清楚地看到差异。](http://jsbin.com/iyalax/3/edit)

任何想法为什么会发生这种情况？

**编辑：**我有另一个`randomRange`在所有浏览器中都可以正常工作的功能，只是更长更丑，检查[http://jsbin.com/iyalax/4/edit](http://jsbin.com/iyalax/4/edit)看看有什么不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:50:35.837

根据[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)，

> array.sort([比较函数])
> 
> 如果 compareFunction(a, b) 返回 0，则 a 和 b 保持不变，但对所有不同元素进行排序。注意：ECMAscript 标准不保证这种行为，因此并非所有浏览器（例如，至少可以追溯到 2003 年的 Mozilla 版本）都尊重这一点。

你可以试试

```
.sort(function(){ return Math.random()*2-1; }) 
```

您在这里要做的只是返回一个大于、小于或等于 0 的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:01:29.960

这可能是由于在资源管理器之间实现了 sort() 方法。从我目前看到的事实来看，我猜Chrome在进行排序时可能总是使用不稳定的排序（例如快速排序），而其他人在输入大小较小时使用过时的排序（例如冒泡排序）。

起初，输入（最初创建自`new Array(..)`）已经排序；并且`function(){ return 0|Math.random()*max; }`总是会返回一个非负数，这表明a>=b（或a<=b，我不确定）？因此，当我尝试挖掘这一点时，我发现 Chrome 和 IE（版本 9）之间的排序行为不同。

在 IE 中：`[1,2,3].sort( function(){return 1} )`发出`[1,2,3]`；但在 Chrome 中，结果是`[3,2,1]`，所以我相信这可能是真正的因素。

所以，作为结论，我想`.sort(function(){ return (0|Math.random()*max)-max/2; })`改用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T11:10:04.220

问题解决了！我在 Hacker News 找到了一个[非常好的解决方案](http://news.ycombinator.com/item?id=2728914)，它现在可以在所有浏览器中完美运行：

```
function randomRange(min, max) {
  return (new Array(++max-min))
  .join('.').split('.')
  .map(function(v,i){ return min+i; })
  .map(function(v) { return [Math.random(), v]; })
  .sort().map(function(v) { return v[1]; });
} 
```

**演示： http:** [//jsbin.com/iyalax/9/edit](http://jsbin.com/iyalax/9/edit)（如果看不到图像，请单击“使用 JS 运行”）

# android - Webview 适用于 ICS 但不适用于 Gingerbread

> ID：12528895
> 
> 赞同：0
> 
> 时间：2012-09-21T10:36:28.217
> 
> 标签：android, authentication, webview

我有一个应用程序，主要是一个网络视图，它将尝试连接到我的公司网页。该页面是 https 并且需要身份验证。当我在具有 ICS 的设备或模拟器上运行时，我正在使用的当前代码有效，但它不适用于 2.3.3。我已经尝试为 2.3.3 构建它，该版本已经在 2.3.3 和 4.x 上进行了测试，并且仅适用于 ICS。因此，我是否为 ICS 或 Gingerbread 构建它并不重要。

我已经尝试过针对类似问题的不同解决方案，但我无法让它发挥作用。

浏览器活动：

```
public void onCreate(Bundle savedInstanceState) {
   ...
   mWebView.setWebChromeClient(new WebChromeClient());
   mWebView.setWebViewClient(new myWebClient());
   mWebView.getSettings().setJavaScriptEnabled(true);
   ...
   mWebView.loadUrl(urlString); //urlString is an https site
} 
```

我的网络客户端类：

```
public class myWebClient extends WebViewClient{
   public void onReceivedHttpAuthRequest(WebView view, HttpAuthHandler handler, String host, String realm){
      handler.proceed(username, password);
   }
   public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error){           
      handler.proceed();
   }
   public void onReceivedError(WebView view, int errorCode, String description, String failingUrl){
      super.onReceivedError(view, errorCode, description, failingUrl);
   }
} 
```

这是我申请的基本内容。我尝试登录不同的回调，但没有收到任何 SSL 错误或“常规”错误。我在 logcat 中看到的唯一一件事是，当我在 Gingerbread 上运行时，`onReceivedHttpAuthRequest`会一遍又一遍地调用它。我已经检查过凭据是否正确，它们是正确的。我还可以提到`<uses-permission android:name="android.permission.INTERNET"></uses-permission>`我的清单中有。

我已经与 IT 部门核实过服务器是否在使用[SNI](http://en.wikipedia.org/wiki/Server_Name_Indication)，但他们告诉我它没有使用它。

有没有人知道为什么这不起作用的原因？如前所述，由于某种原因，身份验证似乎不起作用，因为我看到`onReceivedHttpAuthRequest`在 Gingerbread 中一遍又一遍地调用。

问题是页面没有加载，webview 保持空白。

# c# - SqlException：列名无效 - 列不存在

> ID：12528903
> 
> 赞同：0
> 
> 时间：2012-09-21T10:36:59.497
> 
> 标签：c#, sql-server, winforms

我正在将数据库从一台服务器移动到另一台服务器。但现在我收到错误“无效的列名 msrepl_tran_version”。这是我从新数据库中删除的列，因为它与我不再需要的复制有关。

我重新创建了数据集，在整个解决方案中使用 msrepl_tran_version 搜索了任何内容，但什么也没有。我看不到它从哪里引用此列，它不存在！

任何想法将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:45:35.307

它是一个事务复制列，不能直接删除，看来你还没有完全删除它......

[如何删除 msrepltranversion 列](http://kevine323.blogspot.co.uk/2011/03/how-to-remove-msrepltranversion-column.html)

# ios - Superview没有收到触摸动作

> ID：12528909
> 
> 赞同：0
> 
> 时间：2012-09-21T10:37:12.120
> 
> 标签：ios, uiview, uiimageview, touch, superview

我有一个大小为（0,0,320,280）的基本视图A，它包含另一个大小为（100,100,50,50）的视图B，视图B有一个按钮和一个图像视图（C）作为子视图。图像视图框架与视图 B 相同，在 B 的左上角添加了按钮。

我的要求是当我们拖动 B 的右下角时，它的大小必须增加或减小。

如果我们从除右下角以外的任何其他位置拖动 B，它必须移动。不应修改视图大小。

我的问题是视图 B 没有收到触摸动作。

我添加了下面的代码。请指导我。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];

    //baseVw-------> view B//

    if ([touch view]==baseVw)
    {
        touchStart = [[touches anyObject] locationInView:baseVw];
        isResizingLR = (baseVw.bounds.size.width - touchStart.x < kResizeThumbSize && baseVw.bounds.size.height - touchStart.y < kResizeThumbSize);
        isResizingUL = (touchStart.x <kResizeThumbSize && touchStart.y <kResizeThumbSize);
        isResizingUR = (baseVw.bounds.size.width-touchStart.x < kResizeThumbSize && touchStart.y<kResizeThumbSize);
        isResizingLL = (touchStart.x <kResizeThumbSize && baseVw.bounds.size.height -touchStart.y <kResizeThumbSize);
    }
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint touchPoint = [[touches anyObject] locationInView:baseVw];
    CGPoint previous=[[touches anyObject]previousLocationInView:baseVw];
    float  deltaWidth = touchPoint.x-previous.x;
    float  deltaHeight = touchPoint.y-previous.y;

    if ([touch view]==baseVw)
    {
        if (isResizingLR)
        {
            baseVw.frame = CGRectMake(baseVw.frame.origin.x, baseVw.frame.origin.y,touchPoint.x + deltaWidth, touchPoint.y + deltaWidth);
        }
        else
        {
            CGPoint activePoint = [[touches anyObject] locationInView:baseVw];

            // Determine new point based on where the touch is now located
            CGPoint newPoint = CGPointMake(baseVw.center.x + (activePoint.x - touchStart.x),
                                       baseVw.center.y + (activePoint.y - touchStart.y));

            //--------------------------------------------------------
            // Make sure we stay within the bounds of the parent view
            //--------------------------------------------------------
            float midPointX = CGRectGetMidX(baseVw.bounds);

            // If too far right...
            if (newPoint.x > baseVw.superview.bounds.size.width  - midPointX)
                newPoint.x = baseVw.superview.bounds.size.width - midPointX;
            else if (newPoint.x < midPointX)    // If too far left...
                newPoint.x = midPointX;

            float midPointY = CGRectGetMidY(baseVw.bounds);

            // If too far down...
            if (newPoint.y > baseVw.superview.bounds.size.height  - midPointY)
                newPoint.y = baseVw.superview.bounds.size.height - midPointY;
            else if (newPoint.y < midPointY)    // If too far up...
                newPoint.y = midPointY;

            // Set new center location
            baseVw.center = newPoint;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:16:31.420

视图 B 可能不会收到任何触摸事件，因为这些被子视图 C 吸收了。假设您在 B 中实现了触摸方法，您还应该确保将 B 设置为 firstResponder。实现这个：

```
-(BOOL)canBecomeFirstResponder
{
return YES;
} 
```

And then call `[self becomeFirstResponder];` after you add C as the subview. The code inside the touchesBegan/Moved doesn't matter if they are not being called (touch events not received).

# php - 为什么我的 AJAX 代码只能部分工作？

> ID：12528910
> 
> 赞同：0
> 
> 时间：2012-09-21T10:37:15.160
> 
> 标签：php, javascript, ajax, jquery

大家好，这里是我的代码

```
echo('Name: <input type="text" id="Name" onchange="im()" value="your name"  name="Name" />');
echo('pointsize: <input type="text" id="pointsize" onchange="im()" value="50" name="pointsize" />');
echo('format: <input type="text" id="format" value=".gif" onchange="im()" name="format" />');
echo('BackGround Color: <input type="text" id="bckclr" value="red" onchange="im()" name="bckclr" />');
echo('FontColor: <input type="text" id="color" value="white" onchange="im()" name="color" />');
echo('Border Color: <input type="text" id="bcolor" value="blue" onchange="im()" name="bcolor" />');
echo('<a href="./lang/ims.php"><img src="'.$image.'" height="82" width="82" /></a>');
echo('Font: <input type="text" id="font" value="'.$image1.'" onchange="im()" name="font" />');

echo ('<div id="Div_Im">');
echo('replace me');
echo ('</div>'); 
```

这是我的 AJAX 代码。

```
<Script type="text/javascript">
    function im()
    {
        var Name=document.getElementById("Name").value;
        var pointsize=document.getElementById("pointsize").value;
        var format=document.getElementById("format").value;
        var bckclr=document.getElementById("bckclr").value;
        var color=document.getElementById("color").value;
        var bcolor=document.getElementById("bcolor").value;
        var font=document.getElementById("font").value;
        $(document).ready(function(){
            var url='Name='+Name+'&pointsize='+pointsize+'&format='+format+'&bckclr='+bckclr+'&color='+color+'&bcolor='+bcolor+'&font='+font;
            alert(url);
            //-----Sending request to server for getting job name list by ajax-----
            $.ajax({
                type    : "POST",
                url : "i.php?",
                data    : url,              
                cache   : false,
                success : function(html)
                {
                    //document.getElementById('Div_PJobId').style.display="block";
                    //alert('hi');
                    alert(html);
                    var pic='<img src="'+html+'">';
                    $("#Div_Im").html(pic).show();
                }
            });
        });
     }
</script> 
```

这是我的 i.php 服务器页面代码

```
$Name=$_POST["Name"];
$pointsize=$_POST["pointsize"];
$bckclr=$_POST["bckclr"];
$color=$_POST["color"];
$bcolor=$_POST["bcolor"];
$format=$_POST["format"];
//$filename = "./lang/sri".$format;
$filename = "./lang/".$Name.$format;
$font=$_POST["font"]; 

$cmd = " -background $bckclr -pointsize $pointsize -font $font -fill $color ".
            " -strokewidth 1 -stroke $bcolor label:\"$Name\" ";

exec("convert $cmd $filename");
//if($filename)
//{}
//echo('<img src="'.$filename.'">');
echo $filename; 
```

请查看[演示链接](http://ultimateweblogos.com/im.php)。仅当我更改名称时，内容（显示在中的图像）才会替换，但它不适用于颜色、bcolor、字体，...每次更改时我都需要刷新页面...。解决这个问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:54:44.067

我正在调试您的代码，发现客户端的每件事都运行良好，就像您使用最新数据调用服务器并根据您从服务器获得的 html 替换图像的每次更改（输入中）一样。

我相信您的服务器端代码有问题。正如我所看到的，您正在使用名称字段值为创建的图像文件分配名称。这意味着已经为颜色更改创建了名称图像文件，因为名称已经提供。你应该看看你的服务器端代码。一些时间响应需要无限时间才能从服务器返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:55:18.590

1.  你已经在函数中包装`$(document).ready`了`im()`函数..为什么会这样？
2.  为什么不使用 jQuery 来获取输入值？

    ```
    function im() { 

    $.ajax({ 
       type: "POST", 
       url: "i.php?", 
       data: {
             Name:$('#Name').val(), 
             pointsize:$('#pointsize').val(),
             format:$('#format').val(),
             bckclr:$('#bckclr').val(),
             color:$('#color').val(),
             bcolor:$('#bcolor').val(),
             font:$('#font').val()   
       },               
       cache: false
    }).done(function(html) { 

            //document.getElementById('Div_PJobId').style.display="block"; 
            //alert('hi'); 
            alert(html); 
            var pic='<img src="'+html+'">'; 
            $("#Div_Im").html(pic).show(); 

    }); 
    } 
    ```

# ruby-on-rails - 如何在 Rails 中翻译路由范围？

> ID：12528911
> 
> 赞同：1
> 
> 时间：2012-09-21T10:37:15.490
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization, routing

我正在尝试在 Rails 应用程序中翻译路线。我尝试使用`i18n_routes`，但在翻译不依赖资源的操作时遇到了一些问题。最后，我在不使用 i18n_routes 的情况下解决了这个问题，如此[**处**](https://github.com/kwi/i18n_routing/issues/30)所述。

现在的问题是我找不到翻译范围的方法。这是我的`routes.rb`：

```
scope "sport" do
  translated_named_route 'it_is_healthy', 'sport#it_is_healthy'
  translated_named_route 'it_is_social', 'sport#it_is_social'
end 
```

如何翻译运动？我`i18n_routes`再次尝试，但我不知道如何翻译范围。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:52:36.040

如果您愿意为此使用 gem，我建议您使用

[https://github.com/francesc/rails-translate-routes](https://github.com/francesc/rails-translate-routes)

自述文件相当全面，它肯定也涵盖了路由中的命名空间和范围。

# javascript - 使用 presistence.js 创建跨平台数据库（浏览器支持的 websql 或 indexeddb）

> ID：12528912
> 
> 赞同：0
> 
> 时间：2012-09-21T10:37:16.157
> 
> 标签：javascript, android, iphone, persistence, windows-phone

我是[persistence.js](http://persistencejs.org/)的新手，想知道如何将它用于为iOS、Android 和Windows Phone 开发的应用程序。

任何代码示例都会非常有帮助。

感谢和问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:25:22.457

您是否要考虑我创建的替代[javascript 数据库库 YDN-DB 。](http://git.yathit.com/ydn-db/wiki/Home)它具有合理的良好文档和示例代码。

使用它非常简单。有任何问题，只需发表评论或问题。

# mysql - 如何将来自三个 Perl 数组的数据插入到一个 MySQL 表中？

> ID：12528913
> 
> 赞同：2
> 
> 时间：2012-09-21T10:37:20.370
> 
> 标签：mysql, arrays, perl, insert

我在 Perl 中有 3 个不同的数组（即 A、B 和 C）。现在，我在 mysql 中有一个表，它也有 3 个字段。

我想要做的是在mysql表的第一个字段中获取数组A的所有内容，在第二个字段中获取数组B的内容，依此类推。我尝试使用 foreach 循环执行此操作，但它适用于第一个数组，但不会为第二个和第三个数组插入任何内容。

使用的代码如下：

```
foreach my $a (@a) {

    my $sql = "insert into es(a) VALUES(\"$a\")";
    my $sth = $dbh->prepare($sql);
    $sth->execute or die "SQL Error: $DBI::errstr\n";
}

foreach my $b (@b) {

    my $sql = "insert into es(b) VALUES(\"$b\")";
    my $sth = $dbh->prepare($sql);
    $sth->execute or die "SQL Error: $DBI::errstr\n";

} 
```

第三个也是如此。表的 a 列已正确填充，但表中的 b 列和 c 列没有数据。我究竟做错了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T10:47:53.267

我猜你对关系数据库不是很熟悉。你所做的是：

1.  迭代`@a`
2.  为每个项目准备一个新的声明`@a`
3.  每个插入添加一行，仅包含其中的`a`值；这意味着：
    *   您为每个项目创建一个数据集`@a`
    *   列`b`和`c`是`NULL`。

现在你也这样做`@b`了`@c`。那不是很有效。

[DBI](https://metacpan.org/module/DBI)旨在为您提供帮助。您应该考虑以下规则（指南）：

*   始终使用 DBI 的[`quote`](http://search.cpan.org/~timb/DBI/DBI.pm#quote)方法或更好的[占位符](https://metacpan.org/module/DBI#Placeholders-and-Bind-Values)。这样可以省去您自己添加引号的麻烦。
*   如果有一个循环和几个`INSERT`s 或`UPDATE`s，请始终`prepare`将您的查询放在循环之外，而将`execute`其放在循环中。

* * *

那我们来看看你的问题。我假设`@a`,`@b`并且`@c`都具有相同数量的项目，并且您希望 , 和**的****每个****索引一行`@a``@b``@c`**。因此，如果您有以下数据：

```
my @a = (1, 2, 3);
my @b = qw(foo bar baz)
my @c = (999, 998, 997); 
```

我敢打赌，您希望它在数据库中看起来像这样：

```
a b   c
1 foo 999
2 bar 998
3 baz 997 
```

因此，我们需要将您的三个`INSERT`s 合并为一个语句。这可以通过一次迭代所有这些来完成。我们可以使用[List::MoreUtils](https://metacpan.org/module/List%3a%3aMoreUtils)`each_array`中的函数来为我们处理迭代。我们还将上面的指南添加到代码中。

```
use List::MoreUtils qw(each_array);
my $dbh = DBI->connect(); # connect to db here

# prepare the INSERT statement once
my $sth_insert = $dbh->prepare('INSERT INTO es SET a=?, b=?, c=?')
  or die $dbh->errstr;

# create the array iterator
my $ea = each_array(@a, @b, @c);
# iterate over all three arrays step by step
while ( my ($val_a, $val_b, $val_c) = $ea->() ) {
  $sth_insert->execute($val_a, $val_b, $val_c) or die $dbh->errstr;
} 
```

# http - 仅通过 https 进行 uname/pwd 验证 - http 中的其他所有内容

> ID：12528917
> 
> 赞同：1
> 
> 时间：2012-09-21T10:37:36.923
> 
> 标签：http, web-applications, https, security

对于用户名/密码验证 - 好的网站使用 https - 以避免通过网络发送明文密码。如果我有一个我想这样做的网站 - 即通过 https 登录。但是 - 登录后其余的东西应该是通过 http。这可能吗 - 如果是的话，为什么我们看不到太多的网站这样做。如果不是，为什么不呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:42:37.107

您可能想阅读[Firesheep](http://codebutler.com/firesheep)。简而言之，这种技术允许恶意人员劫持会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T04:37:52.627

> 如果是，为什么我们看不到太多的网站这样做

不使用端到端 TLS/SSL 的常见借口是它会导致 Web 应用程序性能受到影响、响应时间变慢等。这是 https-sometimes 安全策略的一个非常有缺陷的论点。并非完全没有根据，但仍然没有道理。

> 如果不是，为什么不呢？

其想法是，用户访问控制的唯一固有易受攻击的方面是身份验证阶段，即您提供用户名和密码以证明您就是您所说的人。组织意识到以明文形式传输凭证的风险。但是，在此过程之后，将在服务器端执行授权，并且 Web 应用程序从那里开始*信任您，并且不再有凭据可以保护。*

或者有吗？正如 jszakmeister 非常简洁地指出的那样，会话 cookie 的安全性与用户名/密码对一样重要。如果有人掌握了它，他们可能已经在便利贴上看到了密码和用户名。

# c# - 为 GridView boundfield header 设置 TabIndex

> ID：12528920
> 
> 赞同：2
> 
> 时间：2012-09-21T10:37:49.390
> 
> 标签：c#, asp.net, gridview

我正在尝试为站点设置 tabindexes 并且在 gridview 列标题方面遇到问题。我可以为表单控件（使用标记）和 gridview 行单元格（使用 C#）设置 tabindex，但不能设置 gridview 列标题。这是gridview标记：

```
<asp:GridView ID="grdBCReferrals" runat="server" AutoGenerateColumns="False" OnPageIndexChanging="grdBCReferrals_PageIndexChanging"
            OnSorting="grdBCReferrals_Sorting" HeaderStyle-CssClass="gridHeader" AllowPaging="True"
            AllowSorting="True" DataKeyNames="ID" Width="100%">                
    <Columns>            
        <asp:BoundField DataField="ID" HeaderText="Id" SortExpression="Id">
        </asp:BoundField>
        <asp:BoundField DataField="CreatedOn" HeaderText="Created On" SortExpression="CreatedOn">
        </asp:BoundField>
        <asp:BoundField DataField="Type" HeaderText="Type" SortExpression="Type">
        </asp:BoundField>
        <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name">
        </asp:BoundField>
        <asp:BoundField DataField="Status" HeaderText="Status" SortExpression="Status">
        </asp:BoundField>            
    </Columns>
</asp:GridView> 
```

我知道这是可能的，因为在所有 gridview 单元格中切换后，列标题会获得焦点并且是可切换的，但这不是我想要的顺序。我认为这是因为在行单元格之后没有更多有意设置的 tabindexes 和默认页面 tabbing 启动并将焦点设置到没有设置 tabindex 的项目。

为了澄清，当前的tabindex如下：

表单控件 > GridView 单元格 > Gridview 标题

我希望它是：

表单控件 > GridView 标题 > GridView 单元格

我整个早上都在尝试使用标记或代码来解决此问题，但似乎没有针对此问题的任何解决方案或论坛帖子。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:16:41.360

我最终在同事的帮助下解决了这个问题，当帖子没有更新时我讨厌它，所以这里是：

使用以下代码为 gridview 添加了 OnRowDataBound 触发器：

```
protected void grdBCReferrals_RowDataBound(object sender, GridViewRowEventArgs e)
    {            
        int LoopCounter;

        // Variable for starting index. Use this to make sure the tabindexes start at a higher
        // value than any other controls above the gridview. 
        // Header row indexes will be 110, 111, 112...
        // First data row will be 210, 211, 212... 
        // Second data row 310, 311, 312 .... and so on
        int tabIndexStart = 10; 

        for (LoopCounter = 0; LoopCounter < e.Row.Cells.Count; LoopCounter++)
        {                
            if (e.Row.RowType == DataControlRowType.Header)
            {
                // Check to see if the cell contains any controls
                if (e.Row.Cells[LoopCounter].Controls.Count > 0)
                {
                    // Set the TabIndex. Increment RowIndex by 2 because it starts at -1
                    ((LinkButton)e.Row.Cells[LoopCounter].Controls[0]).TabIndex = short.Parse((e.Row.RowIndex + 2).ToString() + tabIndexStart++.ToString());
                }
            }
            else if (e.Row.RowType == DataControlRowType.DataRow)
            {
                // Set the TabIndex. Increment RowIndex by 2 because it starts at -1
                e.Row.Cells[LoopCounter].TabIndex = short.Parse((e.Row.RowIndex + 2).ToString() + tabIndexStart++.ToString());
            }                
        }
    } 
```

希望这对其他人有帮助

# c# - 在网格视图中单击“更新”后如何刷新网页

> ID：12528922
> 
> 赞同：1
> 
> 时间：2012-09-21T10:37:51.263
> 
> 标签：c#, asp.net

我正在开发一个 Asp.net，C# 应用程序。单击“更新”链接按钮后，我想刷新网页；在网格视图中。我尝试了以下代码；但是它只是刷新页面而不在网格视图中保存更新的数据。

```
protected void LinkButton1_Click1(object sender, EventArgs e)
{
    Response.Redirect(Request.RawUrl.ToString());
} 
```

数据源名称`SqlDataSourcePlan`

```
SELECT [PlanID], [Deposit], [DepositReturn], [Discount] FROM [PaymentPlan] WHERE ([Ref] = @Ref)

UPDATE [PaymentPlan] SET [Deposit] = @Deposit, [DepositReturn] = @DepositReturn, [Discount] = @Discount WHERE [PlanID] = @original_PlanID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:42:16.733

改用[`RawUrl`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.rawurl.aspx)：

```
Response.Redirect(Request.RawUrl) 
```

> 原始 URL 定义为 URL 中域信息之后的部分。在 URL 字符串 [http://www.contoso.com/articles/recent.aspx](http://www.contoso.com/articles/recent.aspx)中，原始 URL 是 /articles/recent.aspx。原始 URL 包括查询字符串（如果存在）。

**编辑**：*“不在网格视图中保存更新的数据”*

为什么你认为将页面重定向到自身应该在某处保存一些东西？

查看本教程：[使用 SqlDataSource (C#) 插入、更新和删除数据](http://www.asp.net/web-forms/tutorials/data-access/accessing-the-database-directly-from-an-aspnet-page/inserting-updating-and-deleting-data-with-the-sqldatasource-cs)

我假设您实际上想要 **更新 GridView**而不是整个页面。那么你应该打电话给`GridView.DataBind()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:58:07.883

我的猜测（在代码中没有其他一些信息很难说）是虽然信息保存在数据库中，但`datasource`不会`gridview`用新值刷新。关于这部分，我经常看到这个问题。

`Page.DataBind`在重定向之前，您必须使用or `GridViewName.DataBind()`（`GridViewName`您的名称在哪里）重新绑定 gridview `gridview`。

您可能不会在`PageLoad`或没有重新加载 GridView `PageLoad`（没有服务器代码就无法知道）。如果这样可以正常工作，那么在重定向之前您将不需要数据绑定。

# javascript - 上一次尝试失败后，一旦连接，Socket.io 事件就不会触发

> ID：12528927
> 
> 赞同：1
> 
> 时间：2012-09-21T10:38:05.820
> 
> 标签：javascript, node.js, websocket, socket.io

这是场景，我有一个客户端应用程序，由 PHP 在与 node.js + socket.io 应用程序不同的服务器上提供服务。它可以连接和接收服务器发送的广播。如果连接断开，应用程序将退回到轮询数据库（使用`setInterval()`）。它尝试每 5 次轮询重新连接，并且可以成功重新连接并继续接收消息。

当用户加载页面并且无法访问节点服务器时出现我的问题（我将其关闭以进行测试），然后我打开服务器并在第 5 次轮询时，它成功连接到服务器，使用`socket.socket.reconnect();`. 但是，无论何时服务器广播消息，它都不会触发该事件。请注意，在手机上进行测试时不会发生这种情况（回退到不同的套接字方法）

我已经[在 `socket.on('message',function(){})` 中看到了这里发现的问题 Reconnection in socket.io 问题](https://stackoverflow.com/questions/5960184/reconnection-in-socket-io-problem-in-socket-onmessage-function)，但是，套接字以前没有连接过，所以我认为它不可能会议？

编辑：我将其更改`socket.socket.reconnect()`为`socket.socket.connect()`并解决了问题。如果有人可以解释为什么这样做我想知道的原因。我知道它是因为服务器实际上并没有重新连接，但想要更多信息。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:29:56.507

好吧，您可能知道原因。服务器没有重新连接。它实际上是连接的。当您告诉 socket.io 重新连接时，它会搜索以前的连接句柄，这就是问题出现的地方。

# java - 将 C++ 连接到 ActiveMQ 代理

> ID：12528930
> 
> 赞同：2
> 
> 时间：2012-09-21T10:38:25.300
> 
> 标签：java, c++, activemq, activemq-cpp

我正在尝试开发与 C++ 和 Java 之间的 JMS 通信的应用程序。

我有一个带有 Java 代理的“服务器”，我想连接一个 c++ 发布者/列表者

***我该怎么做？***

我的 Java 类是：

**“服务器”：**

```
public class Queue {

private static ActiveMQConnectionFactory connectionFactory;
private static Destination destination;
private static boolean transacted = false;
private static Session session;
private static  Connection connection;

public static void main(String[] args) throws Exception {
    BrokerService broker = new BrokerService();
    broker.setUseJmx(true);
    broker.addConnector("tcp://localhost:61616");
    broker.start();
    Producer p=new Producer();
    Consumer c= new Consumer();
    connectionFactory = new ActiveMQConnectionFactory(
            ActiveMQConnection.DEFAULT_USER,
            ActiveMQConnection.DEFAULT_PASSWORD,
            ActiveMQConnection.DEFAULT_BROKER_URL);
    connection = connectionFactory.createConnection();
    connection.start();
    session = connection
            .createSession(transacted, Session.AUTO_ACKNOWLEDGE);
    destination = session.createQueue("queue"); 
    c.createConsumerAndReceiveAMessage(connection, connectionFactory,session,destination );
    p.createProducerAndSendAMessage(destination,session);
    broker.stop();  
} 
```

**制片人**

```
public class Producer {
void createProducerAndSendAMessage(Destination destination,
        Session session) throws JMSException {

    MessageProducer producer = session.createProducer(destination);
    producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
    Scanner sc=new Scanner(System.in);
    String msg;
    while(!(msg=sc.nextLine()).equals("exit") ){
        TextMessage message = session.createTextMessage(msg);
        System.out.println("Sending message " + message.getText());
        producer.send(message);
    }
} 
```

**消费者：**

```
public class Consumer {
public void createConsumerAndReceiveAMessage(Connection connection,
        ActiveMQConnectionFactory connectionFactory, Session session,
        Destination destination) throws JMSException, InterruptedException {

    connection = connectionFactory.createConnection();
    connection.start();
    MessageConsumer consumer = session.createConsumer(destination);
    MyConsumer myConsumer = new MyConsumer();
    connection.setExceptionListener(myConsumer);
    consumer.setMessageListener(myConsumer);
}
private static class MyConsumer implements MessageListener,
        ExceptionListener {
    synchronized public void onException(JMSException ex) {
        System.out.println("JMS Exception occured.  Shutting down client.");
        System.exit(1);
    }
    public void onMessage(Message message) {
        if (message instanceof TextMessage) {
            TextMessage textMessage = (TextMessage) message;
            try {
                System.out.println("Received message "
                        + textMessage.getText());
            } catch (JMSException ex) {
                System.out.println("Error reading message " + ex);
            }
        } else {
            System.out.println("Received " + message);
        }
    }
} 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:29:13.907

你看过[ActiveMQ-CPP](http://activemq.apache.org/cms/)吗？这是 ActiveMQ C++ 客户端，在项目的主页上有文档、示例和教程。

# java - 如何在hibernate中使用hql查询进行级联

> ID：12528934
> 
> 赞同：0
> 
> 时间：2012-09-21T10:38:30.040
> 
> 标签：java, oracle, hibernate

如何在hibernate中使用hql查询进行级联保存或更新？另外我如何对某些特定字段使用级联更新而不是更新所有子表字段？

例如表用户
**有用户名**varchar(10)
**密码**varchar(10)

表 UserAccessRights 有用
**户名**varchar(10)**用户表**
**密码**varchar(10)**用户表的 FK**
Authpassword varchar(10)

级联更新应该只发生在用户名而不是密码上。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:48:31.553

你没有。

由于级联是 Hibernate 配置事项（即 HBM 或注释），因此必须将数据返回给 Java 以处理级联。在 HQL 中进行 UPDATE/DELETE 行修改完全发生在 SQL 服务器上（并且 SQL 服务器不理解 JPA 级联，因为 JPA 是 Java API 而不是 SQL API 或 SQL 标准）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T10:49:17.860

我想你需要在你的 hbm 文件中指定你的级联设置。

```
<set name="columnrecord" cascade="save-update" table="..."...>
      <key>
            <column name="COLUMN_NAME" not-null="true" />
      </key>
      <one-to-many class="..." />
</set> 
```

# css - 带有图像背景和文本的按钮

> ID：12528937
> 
> 赞同：1
> 
> 时间：2012-09-21T10:39:09.587
> 
> 标签：css, button

我有一个应用了图像背景的按钮。在按钮标签内有一些文本。为了使文本居中，我使用填充来定位它。但是，每次我更改位置内的文本都会受到影响，我需要再次修复填充。有没有一种方法可以使文本居中而不管其长度如何？

我的代码：

```
 <button type="button" class="scroll_button" id="scroll">SIGN UP NOW</button>

.scroll_button{
background: url('../images/button_arrow.png') no-repeat 0 0;
padding: 24px 65px 45px 35px;
border: 0;
float: left;
margin-top: -100px;
color: white;
text-transform: uppercase;
font-size: 16px;
cursor: pointer;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:44:29.197

您可以使用`text-align: center;`在按钮内水平居中文本。设置高度和宽度以使其成为您需要的大小，然后使用`line-height: /*unit*/;`它垂直居中（其中单位等于元素的高度。

```
.scroll_button{
background: url('../images/button_arrow.png') no-repeat 0 0;
border: 0;
float: left;
margin-top: -100px;
color: white;
text-transform: uppercase;
font-size: 16px;
cursor: pointer;

    /*centering. adjust to taste*/
    width: 150px;
    height: 50px;
    text-align: center;
}​ 
```

[http://jsfiddle.net/Kyle_Sevenoaks/PN8U3/](http://jsfiddle.net/Kyle_Sevenoaks/PN8U3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:41:56.640

删除`padding`并替换为：

```
text-align:center; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T10:44:10.837

您可以使用`text-align:center;`水平居中，并将`line-height`父容器的高度设置为垂直居中文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T10:45:00.583

做这个 -

```
padding: 24px 0px; width: 250px; text-align: center;

.scroll_button{
background: red;
padding: 24px 0px; width: 250px; text-align: center;
border: 0;
float: left;
color: white;
text-transform: uppercase;
font-size: 16px;
cursor: pointer;
} 
```

[**JSFiddle**](http://jsfiddle.net/2BU3N/)

# json - grails.converters.deep.JSON 的替代品是什么

> ID：12528947
> 
> 赞同：9
> 
> 时间：2012-09-21T10:40:14.083
> 
> 标签：json, grails, serialization, deprecated

`grails.converters.deep.JSON`现在似乎已被弃用。什么是替代品：

```
import grails.converters.deep.JSON

print complexObject as JSON 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T17:55:11.400

好像

```
JSON.use('deep') 
```

使 JSON 转换器使用渴望获取而不是惰性获取，从而对整个对象图进行编码

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-13T21:32:56.073

使用 grails.converters.JSON

但添加

grails.converters.json.default.deep = true

在 conf/Config.goovy

有关其他选项，请参阅[Grails 获取子域对象](https://stackoverflow.com/questions/19144246/grails-get-child-domain-objects)

# javascript - 我的一些谷歌分析事件在 24 小时后没有反映

> ID：12528957
> 
> 赞同：0
> 
> 时间：2012-09-21T10:40:51.880
> 
> 标签：javascript, jquery, google-analytics

这是我的代码：

HTML部分：

```
<div class="subscribe">
  <a href="#' title="library_membership">Subscribe for a Month</a>
  <a href="#' title="library_membership">Subscribe for a Year</a>
</div> 
```

Javascript：

```
$js('div.subscribe a').live('click', function(e) {
    var This =  $(this);
    e.preventDefault();
    if(This.html().indexOf("Month") != -1)
        _gaq.push(["_trackEvent", "Subscriptions", "Clicked Month", This.attr( "title" )]);
    else 
        _gaq.push(["_trackEvent", "Subscriptions", "Clicked Year", This.attr( "title" )]);

}); 
```

我尝试 ga_debug.js 来确认我的事件是否被推送到谷歌分析并且它们确实出现在 chrome 控制台上。

但是，即使 24 小时后，我对“订阅一年”的点击也没有显示在谷歌分析上。我对“订阅一个月”的点击已显示。谁能帮助我为什么我没有得到谷歌分析的准确数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:40:49.703

清理你的 javascript/jquery，它应该可以工作：

```
$('div.subscribe a').live('click', function(e) {
    e.preventDefault();
    if ($(this).html().indexOf("Month") != -1) {
        alert("month");
    } else {
        alert("year");
    }

});​ 
```

当然，将 替换为`alerts`您的 GA 代码。

[http://jsfiddle.net/8EJMK/](http://jsfiddle.net/8EJMK/)

而且，由于[`live`已弃用](http://api.jquery.com/live/)，您可以使用`on`.

> > 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

取决于您使用的 jquery 版本：

```
$('div.subscribe a').on('click', function(e) {
    e.preventDefault();
    if ($(this).html().indexOf("Month") != -1) {
        alert("month");
    } else {
        alert("year");
    }

});​ 
```

[http://jsfiddle.net/8EJMK/1/](http://jsfiddle.net/8EJMK/1/)

您可能还想更改此设置：

```
_gaq.push(["_trackEvent", "Subscriptions", "Clicked Month", This.attr( "title" )]); 
```

对此：

```
_gaq.push(["_trackEvent", "Subscriptions", "Clicked Month", $(this).attr( "title" )]); 
```

`This`不工作。应该是`$(this)`。

# python - 使用 python 在文件中输出 speex 编码

> ID：12528962
> 
> 赞同：1
> 
> 时间：2012-09-21T10:41:04.770
> 
> 标签：python, python-2.7, audio-recording, speex

我正在使用在此博客上找到的脚本[Google 语音识别与 python](http://campus.albion.edu/squirrel/2012/03/01/google-speech-recognition-with-python/)（我感谢作者）。

```
 import sys
    import pyaudio, speex
    import numpy as np  # just for doing a standard deviation for audio level checks
    import urllib2
    import wave

    e = speex.Encoder()
    e.initialize(speex.SPEEX_MODEID_WB)
    d = speex.Decoder()
    d.initialize(speex.SPEEX_MODEID_WB)

    chunk = 320 # tried other numbers... some don't work
    FORMAT = pyaudio.paInt16
    bytespersample=2
    CHANNELS = 1
    RATE = 16000 # "wideband" mode for speex. May work with 8000\. Haven't tried it.

    p = pyaudio.PyAudio()

    # Start the stream to record the audio
    stream = p.open(format = FORMAT,
                    channels = CHANNELS,
                    rate = RATE,
                    input = True,
                    output = True,
                    frames_per_buffer = chunk)

    print "Listening. Recording will start when some sound is heard."

    threshold = 200  # Adjust this to be slightly above the noise level of your recordings.
    nquit = 40 # number of silent frames before terminating the program
    nover = 0
    keepgoing = True
    spxlist=[]  # list of the encoded speex packets/frames
    while keepgoing:
      data = stream.read(chunk) # grab 320 samples from the microphone
      spxdata = e.encode(data) # encode using the speex dll
      print "Length encoded: %d"%len(spxdata) # print the length, after encoding. Can't exceed 255!
      spxlist.append(spxdata)
      a=np.frombuffer(data,np.int16) # convert to numpy array to check for silence or audio
      audiolevel=np.std(a)
      if audiolevel < threshold:  # too quiet
        nover+=1
      else:
        nover=0

      if nover >= nquit:
        keepgoing=False

      print '%2.1f (%d%% quiet)'%(audiolevel, nover*100/nquit)

    print "Too quiet. I'm stopping now."
    stream.stop_stream()
    stream.close()
    p.terminate()
    fullspx=''.join(spxlist)  # make a string of all the header-ized speex packets
    out_file = open("test.spx","wb")
    out_file.write(fullspx)
    out_file.close() 
```

如您所见，我稍微修改了脚本以使其以 .spx 格式写入和输出文件，但它不起作用。

有什么建议吗？

谢谢你的帮助。

编辑：我在 Ubuntu-linux 机器下运行这个脚本。

# windows - Taskkill /f 不会杀死进程

> ID：12528963
> 
> 赞同：164
> 
> 时间：2012-09-21T10:41:11.053
> 
> 标签：windows, windows-7, process, windows-7-x64, devenv

当我从 VS 启动 VS 的 Experimental 实例进行调试并停止调试（有时直接从父 VS）时，一个僵尸 devenv.exe 进程仍在运行，我无法杀死它。它保留了我的许多 dll。

当我以管理员身份登录到这台 64 位 Win7 机器时，我希望能够杀死任何我想杀死的进程。

```
I tried (from Administrator command prompt):

End Task from Task Manager.
TASKKILL /F /IM devenv.exe
PSKILL devenv.exe 
```

None 返回任何错误并`TASKKILL`返回`PSKILL`终止/终止进程的成功消息。但是 devenv.exe 仍然运行，它不会重新生成，因为它`PID`保持不变。它仅在重新启动系统时消失，这不是一个很好的解决方案。

笔记。LockHunter 显示 devenv 已锁定自身。而且它无法解锁。

![进程监视器显示 devenv 处于某种“进程分析”循环中](../Images/6be4c8bcd80d33e09ea0e07c5cd3fe85.png)

上面的屏幕截图是 Process Monitor 的输出，显示 devenv 处于某种“Process Profiling”循环中（右键单击它并单击在新选项卡中打开图像以正确查看它）。

任何想法如何在 Windows 上终止这样的进程？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-10-15T12:51:59.110

如果任何产生的子进程成功杀死您的进程，您也必须杀死子进程

```
taskkill /IM "process_name" /T /F

/T = kills child process

/F = forceful termination of your process 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2016-08-04T03:04:58.560

taskkill 和 powershell (kill) 方法对我不起作用；它仍然说“拒绝访问”。

我有更好的运气：

```
wmic process where "name='myprocessname.exe'" delete 
```

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2015-03-22T18:34:19.520

Reboot is the only solution that worked for me (so far).

The ever excellent Mark Russonovich has a good explanation for unkillable processes.

To summarise, it's quite possible it is due to unprocessed I/O requests that hasn't been handled properly (by a device driver your program has possibly accessed)

[https://techcommunity.microsoft.com/t5/windows-blog-archive/unkillable-processes/ba-p/723389](https://techcommunity.microsoft.com/t5/windows-blog-archive/unkillable-processes/ba-p/723389)

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2014-10-02T13:31:54.720

刚刚在 Windows Server 2008 R2 上遇到了同样的问题，没有任何帮助，不是 taskmanager 或 taskkill。但是，windows powershell 以管理员身份运行，使用“kill -id pid”

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-10-13T01:51:25.607

I know it's late but `taskkill /im devenv.exe /t /f` should work. the `/t` kills child processes too.

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-07-31T17:35:39.610

就我而言，经过几天的努力解决这个问题（它发生在 VirtualBox 和 µTorrent 进程上），我发现它是由网络驱动程序问题引起的，由 Windows 更新补丁[KB4338818](https://support.microsoft.com/en-us/help/4338818/windows-7-update-kb4338818) (Windows 7 x64) 引起。卸载该补丁后，一切恢复正常。我只是认为它可能对其他人有用。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-09-20T16:49:56.393

我可以通过杀死 explorer.exe 来解决我的问题，而 explorer.exe 又沉迷于我想要杀死的进程。我想如果进程通过可能被锁定的钩子打开接口，这也可能发生。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-07-17T19:09:44.700

本机`tskill <pid>`（或`tskill.exe <pid>`）在 Windows 10 上为我工作，没有其他本机答案。

就我而言，我有一些 chrome.exe 进程，任务管理器的“结束任务”正在为其工作，但`taskkill /F /T /PID <pid>`powershell 都没有`kill -id <pid>`工作（即使两个 shell 都以管理员身份运行）。

这很奇怪，因为`taskkill`据称它是一个更好的 api-and-does-more 版本`tskill`。

就我而言，要杀死我使用的某个任务的所有实例`FOR /F "usebackq tokens=2 skip=2" %i IN (`TASKLIST /FI "IMAGENAME eq name_of_task.exe"`) DO tskill %i`

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2012-09-21T11:24:50.953

我已经看过几次了，我唯一的解决方案是重新启动。

您可以尝试使用 PowerShell：Get-Process devenv | 杀

但如果其他方法失败了，这可能也会失败。:-(

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-12-27T21:23:58.840

我将在这里提出一些建议，因为我最近遇到了同样的问题，并且我在答案中尝试了所有可能的事情，但没有任何效果。我收到了类似的错误

> 错误：无法终止 PID 为 23908 的进程。原因：没有正在运行的任务实例。

使用命令提示符。电源外壳也没有帮助。它只会执行命令而没有响应，进程仍在运行。

直到我决定删除相关的“.exe”文件。由于该文件处于活动状态，Windows 不允许删除，但在那个警告窗口中，它给了我阻止我想要杀死的任务的进程的名称。我能够杀死原始任务，从而杀死错误的过程。

如果没有一个解决方案有效，那绝对值得一试。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-03-14T22:50:34.630

我得到了以下结果`taskkill`

```
>taskkill /im "MyApp.exe" /t /f
ERROR: The process with PID 32040 (child process of PID 54176) could not be terminated.
Reason: There is no running instance of the task.

>taskkill /pid 54176  /t /f
ERROR: The process "54176" not found. 
```

对我有用的是[sysinternal 的](https://live.sysinternals.com) `pskill`

```
>pskill.exe -t 32040

PsKill v1.15 - Terminates processes on local or remote systems
Copyright (C) 1999-2012  Mark Russinovich
Sysinternals - www.sysinternals.com

Process 32040 killed. 
```

您可以`pskill`从[sysinternal 的实时站点获取](https://live.sysinternals.com/pskill.exe)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2012-09-21T11:51:09.587

某些 Exe 文件依赖于某些服务，

因此，您需要先找到相应的服务并停止。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-05-04T14:25:56.800

对我来说，它的工作方式是我必须杀死父进程。找出父进程并杀死它

```
taskkill /IM "parent_process_name.exe" /T /F 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-08-28T22:30:12.500

关于 Java 进程，我在 VirtualBox 中也遇到了同样的问题。

就我而言，这是由于 Windows Update 补丁 KB4338818 (Windows 7 x64) 中的一个错误。

我通过执行以下操作解决了它：

*   卸载 Windows 更新补丁 KB4338818
*   安装 Windows 更新补丁 KB4338821

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2018-02-19T04:02:27.907

如果`taskkill /F /T /PID <pid>`不起作用。尝试使用`Run as Administrator`.

在 Windows 菜单中搜索`cmd`，然后右键单击`Run as Administrator`，然后再次运行该命令。这对我有用。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2018-08-26T21:09:06.583

以管理员身份运行对我有用：

1.`cmd`在windows中搜索

2.右键`cmd`选择“以管理员身份运行”

3.`netstat -ano | findstr :8080`

4.`taskkill/pid (your number) /F`

[![我的结果](../Images/6f9e61334b035e829a8239b298cf2e5e.png)](https://i.stack.imgur.com/fmYsn.jpg)

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2020-02-11T19:03:26.383

就我而言，这里的解决方案都不起作用。我最终发现有问题的程序在尝试轮询 USB 音频接口时被冻结。所以我拔掉了我连接的 USB DAC，令我惊讶的是应用程序立即退出。弗朗西斯的回答提到这可能是“未正确处理的未处理 I/O 请求（由您的程序可能访问的设备驱动程序）”的结果，这可能解释了为什么会修复它。

我想这真的取决于程序在冻结时正在做什么，但如果其他解决方案都不起作用，请尝试断开所有 USB 设备，看看其中一个是否可能是原因。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-03-01T02:25:49.253

我遇到了同样的问题，这里的许多其他人都说正常的 Kill 命令都不起作用。我的问题文件是远程桌面服务器上的用户从网络共享运行的可执行文件。在工作日重新启动多个共享用户并不是一件容易的事。即使用户注销，exe 仍然列在任务管理器中。我发送到共享文件夹的服务器，并从计算机管理 - > 会话发现会话的用户仍然从该 RDP 服务器打开，即使他已注销。右键单击-> 关闭会话并释放文件锁定。

打败我为什么我不能结束任务。当我尝试删除文件时，我最初收到的错误消息是“操作无法完成，因为文件已在系统中打开”

希望这对其他人有帮助。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2018-02-17T22:04:17.543

我遇到了完全相同的问题，在另一个站点上找到了此修复程序：powershell.exe "Get-Process processname| Stop-Process" 它对我有用，我在同一条船上我必须重新启动，/T 不起作用.

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2018-05-18T12:22:43.960

我在提升的 powershell 上执行了以下操作：

```
PS C:\Windows\system32> wmic.exe /interactive:off process where "name like `'java%'`" call terminate 
```

命令输出：

```
Executing (\\SRV\ROOT\CIMV2:Win32_Process.Handle="3064")->terminate()
Method execution successful. 
```

输出参数：

```
instance of __PARAMETERS
{ReturnValue = 0; }; 
```

我得到了一些语法信息：[https ://community.spiceworks.com/topic/871561-wmic-error-like-invalid-alias-verb](https://community.spiceworks.com/topic/871561-wmic-error-like-invalid-alias-verb)

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2018-11-21T18:50:13.220

正如[弗朗西斯](https://stackoverflow.com/a/29198231/2049649)所提到的，一些进程不能被终止，因为

> “未处理的 I/O 请求”

根据我的经验，我正在处理错误的*图形驱动程序*，这会导致我的游戏崩溃并且无法关闭它，作为最后的手段，我**禁用**了图形驱动程序并且该过程最终消失了。

如果您的应用程序正在等待来自wifi 或图形等**驱动程序的***资源，请尝试在***设备管理器中***禁用*它们，您需要深入挖掘以查看它们挂在哪里。

 *****当然不建议这样做，但有时您再也没有什么可失去的了。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2017-02-23T11:54:47.227

NirSoft 的[NirCmd](http://www.nirsoft.net/utils/nircmd.html)为我完成了这项工作：

```
nircmd killprocess "process name.exe" 
```

killprocess 手册页在[这里](http://nircmd.nirsoft.net/killprocess.html)。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2018-04-05T18:57:24.823

如果您下载免费的 sysinternals 套件，它有一个适用于这些类型任务的 pskill.exe 应用程序： pskill.exe "process_name" 即使不使用 -t 选项，它也适用于这些进程。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2016-09-07T23:34:07.297

我在 Code::Blocks 中使用 gdb 调试进程时遇到问题。一旦它在意外进入源代码范围之外的指令时挂起（作为没有源代码或系统功能的库），您既不能从 Code::Blocks 也不能从任务管理器退出调试。

我认为这是在 Code::Blocks 中实现 gdb 的错误，但也可能在 gdb 中；）

我的解决方案：

`taskkill /F /IM process.exe /T`

这显示了父进程的PID。现在杀死父母：

`taskkill /PID yyyy`

两个都没了。

完毕。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-09-02T01:45:57.840

taskkill /f /im "process.exe"

以管理员身份运行 cmd 或 .bat 文件为我工作

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2022-01-26T08:06:09.567

要杀死在 Windows 中运行的 PID 任务：

```
TASKKILL  /PID "Taskname"  /F 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2017-09-08T16:16:53.467

我遇到了同样的问题，我在端口 3000 中启动了一个节点应用程序，但它没有正确关闭，并且即使在重新启动后进程仍然运行。

在管理员模式下运行的 taskkill 或 powershell 命令都不适合我。

我使用了 MS Process Expoler > Properties > Image > Current directory（应该是我的项目目录）。

最后，我不得不在安全模式下重新启动并重命名项目文件夹并重新启动。消耗 3000 端口的 Node 进程自行杀死。

* * *

## 回答 #28

> 赞同：-6
> 
> 时间：2019-05-20T11:02:10.953

以管理员身份运行 CMD 将解决问题

* * *

## 回答 #29

> 赞同：-9
> 
> 时间：2013-11-17T13:21:01.527

1.  打开任务管理器
2.  选择服务选项卡
3.  选择要杀死的进程（devenv.exe）并单击服务按钮
4.  就在进程中，选择属性并禁用它...*****

# c - 解析来自文件的 http 响应

> ID：12528968
> 
> 赞同：0
> 
> 时间：2012-09-21T10:41:28.637
> 
> 标签：c, curl, libcurl

我有一个 http 响应，我使用以下调用将其写入文件

```
curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, responseCallback);
curl_easy_setopt(curl, CURLOPT_WRITEDATA, responseFile); 

static size_t responseCallback(void *ptr, size_t size, size_t nmemb, void *userdata)
{
   int written = fwrite(ptr, size, nmemb, (FILE *)userdata);
   return written;
} 
```

现在我正在尝试使用从文件中读回该数据

```
void getAccessToken()
{
  long len;
  char *buf;
  fseek(responseFile,0,SEEK_SET); //go to beg.
  fseek(responseFile,0,SEEK_END); //go to end
  len=ftell(responseFile); //get position at end (length)
  fseek(responseFile,0,SEEK_SET); //go to beg.
  buf=new char[len];
  fread(buf,len,1,responseFile); //read into buffer

      //some operation to be performed on buf

  delete [] buf;

} 
```

我要执行的操作是检索我在 http 响应中收到的特定令牌（可以使用 strtok 完成）。我已经能够获取数据，但最后也出现了一些垃圾字符。此外，文件大小为 1743 字节（curl 回调函数写入相同大小的数据）但 buf 被填充到 3510 字节数据。这怎么可能？有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:44:54.133

> 我在这里做错了什么吗？

是的，您根本没有跟踪返回值。I/O 调用可能会失败，您必须在根据结果检查返回值之前。

# ruby-on-rails-3 - Ransack gem 选择谓词和自定义谓词名称

> ID：12528969
> 
> 赞同：10
> 
> 时间：2012-09-21T10:41:36.403
> 
> 标签：ruby-on-rails-3, ransack

我对使用高级洗劫搜索有点困惑。我正在尝试进行自定义搜索，其中并非所有表名都可以选择作为搜索词，并且并非所有谓词都被使用。我使用[railscast](http://railscasts.com/episodes/370-ransack?view=asciicast)作为教程，但我找不到任何限制谓词数量的方法。是否也可以使用不同语言的谓词和表字段的名称（只是标签）？

我的搜索表格

```
= search_form_for @q, :url => search_offers_path, :html => { :method => :post } do |f|
  = f.condition_fields do |c|
    .field
      = f.attribute_fields do |a|
        = a.attribute_select
      = f.predicate_select 
      = f.value_fields do |v|
        = v.text_field :value
      = link_to "#{t :destroy}", '#', class: "remove_fields"

    = link_to_add_fields "#{t :add}", f, :condition

  .field
    = t :sort
    = f.sort_fields do |s|
      = s.sort_select

  = f.submit "#{t :search}" 
```

我的控制器

```
def index
  select_offers = Offer.where { (user_id != id) & (ended == false) & ((created_at + life_time ) > DateTime.now) }
  @q = select_offers.search(params[:q])
  @offers = @q.result(:distinct => true).page(params[:page])
  @q.build_condition
  @q.build_sort if @q.sorts.empty?
end 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-28T13:04:20.767

我找到了解决方案。为了更改谓词标签，我使用了 i18n。

```
en.yml

ransack:
  asc: "ascending"
  desc: "descending"
  predicates:
    cont: "contains"
    not_cont: "not contains"
    start: "starts with"
    end: "ends with"
    gt: "greater than"
    lt: "less than"
    ... 
```

还可以更改属性字段的名称

```
attributes:
  model_name:
    model_field1: "field name1"
    model_field2: "field name2"
    ... 
```

限制搜索谓词而不是

```
= f.predicate_select 
```

我用了

```
= f.attribute_fields do |a|
  = a.attribute_select
= f.select :p, { 'custom predicate name1' => :predicate1, 'custom predicate name2' => :predicate2 } 
```

为了限制我添加到模型中的表搜索字段

```
UNRANSACKABLE_ATTRIBUTES = ["id", "published", "created_at"]

def self.ransackable_attributes auth_object = nil
  (column_names - UNRANSACKABLE_ATTRIBUTES) + _ransackers.keys
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-10T01:02:31.667

要**限制 predicate_select**表单助手中的谓词，您可以将数组作为 :only-option 传递：

```
<%= f.predicate_select only: [:cont, :not_cont, :eq, :not_eq, :blank, :null, :not_null] %> 
```

不幸的是，传递数组中的元素顺序根本不重要，因此**对谓词进行排序不能**以这种方式工作。

* * *

如果你不喜欢这些**化合物 (_any & _all)**或者甚至不知道它们有什么用处（就像我一样），你也可以通过 :compounds-option:

```
<%= f.predicate_select compounds: false %> 
```

* * *

希望有帮助。到目前为止，Ernie 做了很多有趣和令人惊叹的事情，但他们的文档有点像胶带：非常非常薄，如果你试图拿到它，你会被卡住。

# javascript - 使用 JavaScript 在网络浏览器中捕获 Apple Remote 事件

> ID：12528972
> 
> 赞同：3
> 
> 时间：2012-09-21T10:41:41.637
> 
> 标签：javascript, browser, safari

是否有机会通过我的网络浏览器（Safari、Chrome 或 Firefox）使用 Apple Remote？例如，如果我单击右箭头或左箭头，我的 HTML 页面会进行转换。我想不仅通过按键而且通过单击我的 Apple Remote（通常与 Frontrow 一起使用）来实现这种转换。

浓缩的问题是：我有机会用 JavaScript 捕捉 Apple Remote 事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T00:30:45.157

有几种方法可以做到这一点，一种是使用 max msp 或纯数据作为[http://socket.io](http://socket.io)的套接字客户端，然后在 max 或 pd 上捕获苹果远程并将事件发送到套接字服务器。另一种方法是为浏览器找到一个插件，该插件能够在控制器和当前选项卡中运行的 javascript 之间进行交互。

# android - ADB：一个系统检测到我的设备，另一个没有

> ID：12528977
> 
> 赞同：0
> 
> 时间：2012-09-21T10:42:05.040
> 
> 标签：android, eclipse, windows-7, device, adb

我有两个系统，都是 Windows 7 Ultimate x64。我尝试连接的 Android 设备是 Packard Bell Liberty Tab G100。我的设备已root，使用库存ROM，启用了应用程序调试。

第一个系统完美地检测到我的设备，windows、adb 和 Eclipse：

```
C:\Program Files (x86)\Android\android-sdk\platform-tools>adb devices
List of devices attached
37c620043a0d557 device 
```

第二个没有。

我已经三个尝试了三套驱动程序。

```
-Packard Bell Liberty Tab G100 Drivers
-Acer Iconia Tab Universal Drivers  (Liberty Tab is of the Acer Iconia family)
-Google USB Drivers from android SDK 
```

第一组驱动程序不适用于两个系统。据我所知，我的第一个系统使用 Acer Iconia Tab Universal Drivers。它在设备下列出如下：

```
Liberty Tab G100
Driver Provider:   Microsoft
Driver Date:       21-6-2006
Driver Version:    6.1.7600.16385
Digital Signer:    Microsoft Windows
Driver files:
system32\DRIVERS\UMDF\WpdMtpDr.dll
system32\DRIVERS\winusb.sys
system32\DRIVERS\WUDFRd.sys
system32\WpdMtp.dll
system32\WpdMtpUS.dll 
```

在我的第二个系统上，我可以成功安装的唯一驱动程序是使用此解决方法的 Google USB 驱动程序[http://www.davinciunltd.com/2011/10/hacking-the-adb-usb-driver-for-acer-a500 /](http://www.davinciunltd.com/2011/10/hacking-the-adb-usb-driver-for-acer-a500/)

编辑：我已经安装了 Acer Iconia Tab Universal Drivers，但它们并没有让我的设备被检测到，它仍然是一个未知设备。

目前，我的设备在我的第二个系统上被检测为 ADB 接口、Android ADB 接口、Windows 设备管理器，显示它使用 Google 的驱动程序。ADB 和 Eclipse 未检测到此设备。

如何让我的第二个系统 ADB 和 Eclipse 看到设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T12:15:13.490

我自己解决了这个问题。如果您遇到相同或类似的问题，这就是我解决它的方法：

安装 Acer Iconia Tab 通用驱动程序。现在打开设备管理器，然后单击更新您设备的驱动程序软件。浏览我的计算机以获取驱动程序软件。让我从计算机上的设备驱动程序列表中进行选择。显示所有驱动程序（加载可能需要一点时间）。导航到 Acer，将会有一些 Acer 变体，例如 Acer, Inc、ACER INCORPERATED 和 ACER 或更多。

我原来是 Acer, Inc --> ACER Composite ADB Interface。这使得 ADB 和 Eclipse 可以检测到我的设备。

# r - 绘图密度函数

> ID：12528978
> 
> 赞同：0
> 
> 时间：2012-09-21T10:42:09.680
> 
> 标签：r

随机变量 Y 具有密度 f 的分布，由下式给出

```
f(y)= y-1/6 if 1<=y<=4

  -(y-5/6) if 4<=y<=5

   0  else 
```

使用 R 生成 Y 的密度函数图。这是我的问题，我如何使用 R 程序绘制它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T11:16:01.570

利用`ifelse`

```
 (y <- c(1:6)) 
[1] 1 2 3 4 5 6
(fy <-  ifelse(1<=y & y<4,  y-1/6, ifelse(4<=y & y<=5, -(y-5/6), 0)))
[1]  0.8333333  1.8333333  2.8333333 -3.1666667 -4.1666667  0.0000000
plot(fy~y, type='l') 
```

![在此处输入图像描述](../Images/c7643d3707c65bc3a9dcfe53c6ceb846.png)

我假设如下： if 1 <= y < 4 then y-1/6 4 <= y <=5 then -(y-5/6) y>5 then 0

这避免了您在 1<=y<=4 和 4<=y<=5 中的重叠

# postgresql - 更新 PL/pgSQL 中的一整行

> ID：12528981
> 
> 赞同：5
> 
> 时间：2012-09-21T10:42:21.217
> 
> 标签：postgresql, sql-update, plpgsql

我有 plpgsql 功能：

```
CREATE OR REPLACE FUNCTION test() RETURNS VOID AS
$$
DECLARE
    my_row my_table%ROWTYPE;
BEGIN
    SELECT * INTO my_row FROM my_table WHERE id='1';
    my_row.date := now();
END;
$$ LANGUAGE plpgsql; 
```

我想知道是否可以直接更新`my_row`记录。

我现在发现的唯一方法是：

```
UPDATE my_table SET date=now() WHERE id='1'; 
```

请注意，这只是一个示例函数，真实的函数远比这复杂。

我正在使用 PostgreSQL 9.2。

更新：

很抱歉造成混乱，我想说的是：

```
SELECT * INTO my_row FROM my_table INTO my_row WHERE id='1';
make_lots_of_complicated_modifications_to(my_row, other_complex_parameters);
UPDATE my_row; 
```

即使用 my_`row`将信息持久保存在基础表中。我有很多参数要更新。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T11:18:02.117

> 我想知道是否可以直接更新“my_row”记录。

这是。
您可以在 plpgsql 中更新行或记录类型的列 - 就像您拥有它一样。它应该工作，显然？

当然，这将更新基础表，而不是变量！

```
UPDATE my_table SET date=now() WHERE id='1'; 
```

你在这里混淆了两件事......

* * *

### 在评论中回答澄清

我认为 PostgreSQL 中没有可以`UPDATE`整行的语法。不过，您可以[**`UPDATE`列 list**](http://www.postgresql.org/docs/current/interactive/sql-update.html)。考虑这个演示：

请注意我如何使用`thedate`而不是`date`列名，`date`它是每个 SQL 标准中的[保留字](http://www.postgresql.org/docs/current/interactive/sql-keywords-appendix.html)和 PostgreSQL 中的类型名称。

```
CREATE TEMP TABLE my_table (id serial, thedate date);
INSERT INTO my_table(thedate) VALUES (now());

CREATE OR REPLACE FUNCTION test_up()
  RETURNS void LANGUAGE plpgsql AS
$func$
DECLARE
    _r my_table;
BEGIN
   SELECT * INTO _r FROM my_table WHERE id = 1;
   _r.thedate := now()::date + 5 ;

   UPDATE my_table t
    -- explicit list of columns to be to updated
   **SET   (id, thedate) = (_r.id, _r.thedate)**
   WHERE  t.id = 1;
END
$func$;

SELECT test_up();
SELECT * FROM my_table; 
```

但是，您可以轻松地**[`INSERT`整行](http://www.postgresql.org/docs/current/interactive/sql-insert.html)**。只是不要为表格提供列列表（您通常应该这样做，但在这种情况下完全可以，不要这样做）。

因为 an`UPDATE`在内部是 a`DELETE`后面跟着 an `INSERT`，并且函数会自动将所有内容封装在事务中，我不明白为什么你不能使用它：

```
CREATE OR REPLACE FUNCTION x.test_ delins()
  RETURNS void LANGUAGE plpgsql AS
$func$
DECLARE
    _r my_table;
BEGIN
   SELECT * INTO _r
   FROM my_table WHERE id = 1;
   _r.thedate := now()::date + 10;

   DELETE FROM my_table t WHERE t.id = 1;
   **INSERT INTO my_table SELECT _r.*;**
END
$func$; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-04-10T14:40:06.413

我设法在几行代码中让这个在 PLPGSQL 中工作。

给定一个在名为`table`的模式中调用的表`example`，以及声明为 的同一类型的记录`_record`，您可以使用以下 hack 更新表中的所有列以匹配记录：

```
declare _record example.table;

...

-- get the columns in the correct order, as a string
select string_agg(format('%I', column_name), ',' order by ordinal_position)
  into _columns
  from information_schema.columns
  where table_schema='example' and table_name='table';

execute 'update example.table set (' || _columns || ') = row($1.*) where pkey=$2'
  using _record, _record.pkey; 
```

在上面的例子中，当然`_record.pkey`是表的主键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-05T16:23:08.377

Postgresql 没有在更新中设置行。如果您不更新整行，则应分别为每列分配值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T11:20:20.650

是的，它可以更新/附加行类型变量，

```
CREATE OR REPLACE FUNCTION test() RETURNS VOID AS $$
DECLARE    
         my_row my_table%ROWTYPE;
BEGIN
         SELECT * INTO my_row FROM my_table WHERE id='1';
         my_row.date := now(); 
         raise notice  'date  : %; ',my_row.date;
END;
$$ LANGUAGE plpgsql; 
```

此处的加薪通知将仅显示今天的日期。

但这不会更新 my_table 中的列日期。

# node.js - 无法在代理后面使用 socket.io

> ID：12528982
> 
> 赞同：3
> 
> 时间：2012-09-21T10:42:26.043
> 
> 标签：node.js, proxy, socket.io

我无法连接到从我的公司代理后面在线托管的节点 js 服务器。

```
var sock = io.connect("http://example.com/"); 
```

我的代理设置是

> 代理服务器 = 代理
> 
> 代理端口 = 8080

当我绕过代理时它可以工作。

我如何通过代理发出请求？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T17:33:38.410

这可能是因为您的代理不处理 websocket。尝试在您的 socket.io 配置中禁用 websockets（文档可在[此处](https://github.com/LearnBoost/socket.io/wiki/Configuring-Socket.IO)找到）

放

```
io.set('transports', ['xhr-polling']); 
```

然后再试一次。祝你好运！

# pentaho - 如何在水壶 pentaho 中使用缓存？

> ID：12528985
> 
> 赞同：5
> 
> 时间：2012-09-21T10:42:36.497
> 
> 标签：pentaho, kettle

我正在处理数据，我根据字段的值从 rest api 获取一些信息。

现在，该字段的值可能会重复，如果我已经从 REST 获取了该值的数据，我想重用该值并保存 API 调用（转换中最慢的操作）。

有可能吗？如果是，如何？

问候阿杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:34:16.537

@RFVoltini 你是对的，也许我们可以尝试为此目的设置一个 H2 db 服务器：http: [//type-exit.org/adventures-with-open-source-bi/2011/01/using-an-on-内存中的需求-sql-database-in-pdi/](http://type-exit.org/adventures-with-open-source-bi/2011/01/using-an-on-demand-in-memory-sql-database-in-pdi/)

另一个选项是在 java 中使用 memcached：http: [//sacharya.com/using-memcached-with-java/](http://sacharya.com/using-memcached-with-java/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T12:36:41.873

我做了一个示例转换，它通过国家代码从网络服务国家名称中获取。我使用的想法是，您只需要从 Web 服务中获取不同的国家/地区代码/名称，然后在您的主管道上查找它们。

看看这个例子：[https](https://docs.google.com/open?id=0B-AwXLgq0XmaV0V0cHlfTFZlVUU) ://docs.google.com/open?id=0B-AwXLgq0XmaV0V0cHlfTFZlVUU看看这个方法是否适用于你。

# ios - 在 iOS 设备上使用网络链接调节器

> ID：12528986
> 
> 赞同：25
> 
> 时间：2012-09-21T10:42:37.503
> 
> 标签：ios

如何直接在我的 iOS 设备上模拟各种网络条件？我知道这在 Mac 上是可能的，这要归功于[Network Link Conditioner](http://mattgemmell.com/2011/07/25/network-link-conditioner-in-lion/)。iOS设备上有类似的东西吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-21T10:42:37.503

是的，在 iOS 6 中，如果您的设备设置为启用开发，现在可以直接在您的 iOS 设备上使用网络链接调节器。

只需转到`Settings > Developer > Network Link Conditioner`启用它。

如果您没有看到`Settings > Developer`，启用它：

1.  将你的 iPhone 连接到你的 Mac。
2.  `Xcode > Organizer`
3.  选择你的 iPhone。
4.  单击用于开发。

我注意到有时开发人员菜单项会消失。使用 Xcode 安装应用程序时，它会再次出现。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-06-01T21:11:57.480

可能还会提到，有时在您绑定设备并启动 Xcode 之前，该`developer`选项不会出现。`settings`

关闭设置>系绳设备>启动Xcode>打开设置

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-13T02:56:57.740

作为 iOS8 的更新，以及对下一步感到困惑的人，如果您已经进入部署到设备的步骤，您只需转到设备 > 设置 > 开发人员 > 网络链接调节器.

# twitter-bootstrap - 编译 Twitter Bootstrap Less 文件 - 克隆后的编译器错误

> ID：12528988
> 
> 赞同：0
> 
> 时间：2012-09-21T10:42:38.783
> 
> 标签：twitter-bootstrap, less

我刚刚从官方 github 存储库中克隆了引导程序。然而，当尝试使用官方的 less 应用程序编译 less 文件时，我收到以下错误：

![较少文件中的错误](../Images/c4f6b36f8e21af06164d42940d9dab11.png)

...在许多文件中。我的 index.html 文件中有：

```
<link href="../less/bootstrap.less" rel="stylesheet/less">
<script src="../js/less-1.3.0.min.js"></script> 
```

两个脚本都在正确的位置。目录树如下

```
-- bootstrap
  -- js
  -- html
  -- less
  -- img
  -- docs 
```

我是否缺少正确部署它的东西？我只想为快速原型项目做静态 html 和 javascript 文件。

更新：这是我在命令行上尝试通过 make 方法构建的问题。使用官网最新的less.js脚本。

![在此处输入图像描述](../Images/821d716c7d65ddf60bd7ca53722e46a4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T19:06:25.293

**我的 3 cent**：为什么要编译单个文件？您应该只编译“bootstrap.less”文件。不是其他人一个人。“bootstrap.less”包括所有`@import`依赖语句。例如，“mixins.less”和“variables.less”包括最重要的信息。

您不能只编译“responsive-navbar.less”，因为那里不知道变量 @navbarCollapseWidth。

顺便说一句：Less.app 并不是真正的“官方”。我使用 CodeKit（同样由 Bryan DK Jones 编写），这个工具足够聪明，可以执行以下操作：我保存我的“responsive-navbar.less”，它会检查可能包含该文件的其他文件，然后编译母文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:48:02.243

打开您的变量 less 文件并检查这些变量是否为空。

@navbarCollapseWidth @warningBorder

它找不到 .clearfix() 函数，因此您必须自己创建它。

你确定你复制的所有文件都正确吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T13:35:54.427

看来这个应用程序只是不支持 Less 语言的所有功能。

查看官方的[Node.js 方式](http://lesscss.org/#-server-side-usage)进行服务器端编译。

不同系统上的相关问题（检查解决方法）：[SimpLESS won't compile initializr generated Bootstrap](https://stackoverflow.com/q/11683600/1478467)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T18:20:45.570

Twitter Bootstrap 有自己的 Makefile。您需要`make`从您机器上 Twitter Bootstrap 所在目录中的命令行运行。

# android - 外部 JAR Android - 列出不兼容性

> ID：12528992
> 
> 赞同：0
> 
> 时间：2012-09-21T10:42:56.887
> 
> 标签：android, jar, compatibility, verifyerror

因为我在许多情况下阅读了 java.lang.VerifyError 提示引用不依赖于 Android SDK 的不兼容 jar 文件。

我的问题是，是否有办法检查，特别是在导入的 jar 文件中调用的方法不兼容。是否可以列出冲突？

像这样我想检查是否要花很多精力使我现成的java程序与android兼容？

到目前为止，我只得到一个 VerifyError 和哪个文件导致它。但由于它是一个引用其他内容并包含一些代码的文件，我想知道究竟在哪些位置存在错误。

**编辑**：

在这里您可以看到 LogCat 的日志。

```
09-21 11:10:03.080: W/dalvikvm(1988): VFY: unable to resolve exception class 427 (L/codec/ContentAccessException;)
09-21 11:10:03.080: W/dalvikvm(1988): VFY: unable to find exception handler at addr 0x16
09-21 11:10:03.080: W/dalvikvm(1988): VFY:  rejected Lsmb/LPP_SM;.start ()[Ljava/lang/String;
09-21 11:10:03.080: W/dalvikvm(1988): VFY:  rejecting opcode 0x0d at 0x0016
09-21 11:10:03.080: W/dalvikvm(1988): VFY:  rejected Lsmb/LPP_SM;.start ()[Ljava/lang/String;
09-21 11:10:03.080: W/dalvikvm(1988): Verifier rejected class Lsmb/LPP_SM;
09-21 11:10:03.080: D/AndroidRuntime(1988): Shutting down VM
09-21 11:10:03.080: W/dalvikvm(1988): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
09-21 11:10:03.110: E/AndroidRuntime(1988): FATAL EXCEPTION: main
09-21 11:10:03.110: E/AndroidRuntime(1988): java.lang.VerifyError: smb/LPP_SM
09-21 11:10:03.110: E/AndroidRuntime(1988):     at com.example.androidtest.DisplayMessageActivity.onCreate(DisplayMessageActivity.java:109)
09-21 11:10:03.110: E/AndroidRuntime(1988):     at android.app.Activity.performCreate(Activity.java:5008)
09-21 11:10:03.110: E/AndroidRuntime(1988):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
09-21 11:10:03.110: E/AndroidRuntime(1988):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
09-21 11:10:03.110: E/AndroidRuntime(1988):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
09-21 11:10:03.110: E/AndroidRuntime(1988):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
09-21 11:10:03.110: E/AndroidRuntime(1988):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
09-21 11:10:03.110: E/AndroidRuntime(1988):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-21 11:10:03.110: E/AndroidRuntime(1988):     at android.os.Looper.loop(Looper.java:137)
09-21 11:10:03.110: E/AndroidRuntime(1988):     at android.app.ActivityThread.main(ActivityThread.java:4745)
09-21 11:10:03.110: E/AndroidRuntime(1988):     at java.lang.reflect.Method.invokeNative(Native Method)
09-21 11:10:03.110: E/AndroidRuntime(1988):     at java.lang.reflect.Method.invoke(Method.java:511)
09-21 11:10:03.110: E/AndroidRuntime(1988):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-21 11:10:03.110: E/AndroidRuntime(1988):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-21 11:10:03.110: E/AndroidRuntime(1988):     at dalvik.system.NativeStart.main(Native Method) 
```

我已经要求列出有问题的类或函数调用。在这里，我相信我只能看到，ContentAccessException 是唯一与 Android 不兼容的问题。

至少，如果我在例如 LPP_SM 中评论该部分，错误就会消失。但是这个异常来自我用过的库之一，我无法更改。

会不会有更多的冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T11:09:03.103

您是处于调试模式还是使用 proguard 进行发布？java.lang.VerifyError 是由于不同的编译器版本，如果您有任何使用 android 类（如 View）的外部 jar 并且您的目标 sdk 与用于生成 jar 的不同。您将在日志中找到错误的类。你能提供完整的错误吗？如果您正在使用 proguard，您可以使用 -dontpreverify -dontoptimizeoption 来阻止预验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:21:24.170

您应该能够通过仔细阅读“adb logcat”的输出来跟踪问题。您应该能够看到找不到的类以及引用错误的类。在异常之前搜索 WARN/dalvikvm。

关于这个线程还有更多信息：[Android java.lang.VerifyError?](https://stackoverflow.com/questions/668788/android-java-lang-verifyerror)

# android - 我如何获取用户的 ID，他们使用 facebook 帐户详细信息登录到我的应用程序

> ID：12528997
> 
> 赞同：0
> 
> 时间：2012-09-21T10:43:10.000
> 
> 标签：android, facebook-graph-api

```
private void loginToFacebook() {
    // TODO Auto-generated method stub
    mPrefs = getPreferences(MODE_PRIVATE);
    String access_token = mPrefs.getString("access_token", null);
    long expires = mPrefs.getLong("access_expires", 0);

    if (access_token != null) {
        facebook.setAccessToken(access_token);
    }

    if (expires != 0) {
        facebook.setAccessExpires(expires);
    }

    if (!facebook.isSessionValid()) {
        facebook.authorize(this,
                new String[] { "email", "publish_stream" },
                new DialogListener() {

                    @Override
                    public void onCancel() {
                        // Function to handle cancel event
                    }

                    @Override
                    public void onComplete(Bundle values) {
                        // Function to handle complete event
                        // Edit Preferences and update facebook acess_token
                        SharedPreferences.Editor editor = mPrefs.edit();
                        editor.putString("access_token",
                                facebook.getAccessToken());
                        editor.putLong("access_expires",
                                facebook.getAccessExpires());

                        try {
                            // PROFILE DETAILS AND FRIENDS COUNTER
                            String queryUserInfo = "SELECT uid FROM user WHERE uid = me()";

                            Bundle paramUserInfo = new Bundle();
                            paramUserInfo.putString("method", "fql.query");
                            paramUserInfo.putString("query", queryUserInfo);

                            String responseUserInfo = Util.facebook
                                    .request(paramUserInfo);

                            JSONArray JAUserData = new JSONArray(
                                    responseUserInfo);

                            for (int i = 0; i < JAUserData.length(); i++) {
                                JSONObject JOUserData = JAUserData
                                        .getJSONObject(i);

                                if (JOUserData.has("uid")) {
                                    String getUserID = JOUserData
                                            .getString("uid");
                                }

                            }

                        } catch (Exception e) {
                            e.printStackTrace();
                        }

                        /*
                         * try { editor.putString("access_expires",
                         * facebook.request("me"));
                         * 
                         * try { JSONObject json =
                         * Util.parseJson(facebook.request("me", values));
                         * String userId = json.getString("id");
                         * 
                         * } catch (FacebookError e) { // TODO
                         * Auto-generated catch block e.printStackTrace(); }
                         * catch (JSONException e) { // TODO Auto-generated
                         * catch block e.printStackTrace(); }
                         * 
                         * Log.i(TAG, facebook.request("me")); } catch
                         * (MalformedURLException e) { // TODO
                         * Auto-generated catch block e.printStackTrace(); }
                         * catch (IOException e) { // TODO Auto-generated
                         * catch block e.printStackTrace(); }
                         */
                        editor.commit();

                    }

                    @Override
                    public void onError(DialogError error) {
                        // Function to handle error

                        Log.wtf(TAG, error);
                    }

                    @Override
                    public void onFacebookError(FacebookError fberror) {
                        // Function to handle Facebook errors
                        Log.wtf(TAG, fberror);
                    }

                });
    }
} 
```

在我的应用程序登录屏幕中，如果用户单击它，则存在“使用 Facebook 登录”按钮，应用程序在输入用户详细信息后显示 facebook 登录屏幕，这里如何获取 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T11:41:07.930

用户登录后，使用以下代码：

```
try {
    // PROFILE DETAILS AND FRIENDS COUNTER
    String queryUserInfo = "SELECT uid FROM user WHERE uid = me()";

    Bundle paramUserInfo = new Bundle();
    paramUserInfo.putString("method", "fql.query");
    paramUserInfo.putString("query", queryUserInfo);

    String responseUserInfo = Utility.mFacebook.request(paramUserInfo);

    JSONArray JAUserData = new JSONArray(responseUserInfo);

    for (int i = 0; i < JAUserData.length(); i++) {
        JSONObject JOUserData = JAUserData.getJSONObject(i);

        if (JOUserData.has("uid")) {
            String getUserID = JOUserData.getString("uid");
        }

    }

} catch (Exception e) {
    e.printStackTrace();
} 
```

这将为您提供登录用户的 ID，并将被转换为`String getUserID`. 我在用户成功登录后的第一个活动中运行这段代码（无论是否使用了*Facebook Single Sign On*或*移动登录*）

只要用户登录，该代码仍然有效，并且可以在任何活动中运行。另外，我通常在`Asynctask`.