# StackOverflow 问答 14262000-14262999

# .net - 其中 lambda 与第一个 lambda

> ID：14262003
> 
> 赞同：8
> 
> 时间：2013-01-10T16:00:56.800
> 
> 标签：.net, linq, c#-3.0

假设我有一些字符串：

```
string[] strings = { "zero", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine" }; 
```

有什么区别：

```
string startsWithO = strings.First(s => s[0] == 'o'); 
```

和：

```
string startsWithO = strings.Where(s => s[0] == 'o').First(); 
```

由于 Where() 被推迟，它不应该减慢执行速度，对吧？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T16:09:39.360

`.Where(filter).First()`使用而不是使用的性能损失`.First(filter)`通常*非常*小。

然而，它们并不相同——`Where`生成一个新的迭代器，它`First`可以简单地获取一个元素，而`First(filter)`可以通过只使用一个循环和`filter`匹配时直接返回来进行微优化。

因此，虽然这两种方法具有相同的语义并且都`filter`同样频繁地执行（仅在必要时执行），但使用`First`with`filter`参数不需要创建中间迭代器对象，并且*可能也*避免了对该迭代器的一些非常简单的方法调用。

换句话说，如果你正在执行这样的代码数百万次，**你会看到轻微的性能差异**——但没什么大不了的；我*永远不会*担心它。每当这种微小的性能差异实际上很重要时，您最好只编写等效的（非常简单的）foreach-with-if 语句并避免 LINQ 中固有的额外调用和对象分配 - 但请记住，这是一个微优化，您将很少需要。

**编辑：**基准演示效果：

这需要 0.78 秒：

```
for(int i=0;i<10*1000*1000;i++)
  Enumerable.Range(0,1000).First(n=> n > 2);
GC.Collect(); 
```

但这需要 1.41 秒：

```
for(int i=0;i<10*1000*1000;i++)
  Enumerable.Range(0,1000).Where(n=> n > 2).First();
GC.Collect(); 
```

而普通循环要快得多（0.13 秒）：

```
long bla = 0;
for(int i=0;i<10*1000*1000;i++)
    for(int n=0;n<1000;n++)
        if(n > 2) { bla+=n; break; }
GC.Collect();
Console.WriteLine(bla);//avoid optimizer cheating. 
```

**请注意，此基准仅显示如此极端的差异，因为我有一个微不足道的过滤器和一个非常短的不匹配前缀。**

基于一些快速的实验，差异似乎很大程度上归因于采用哪个代码路径的细节。因此，对于数组和`List<>`s，第一个变体实际上更快，可能`.Where`对那些没有的类型进行特殊处理`First`；对于自定义迭代器，第二个版本比预期的要快一点。

# 概括：

`.Where(...).First()`大致与 `.First(...)`- 不要费心选择一个或另一个作为优化一样快。一般来说*，* `.First(...)`速度会稍微快一些，但在某些常见情况下会更慢。如果你真的需要微优化，那么使用比任何一个都快的普通循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:09:11.587

这里没有区别。

调用 Where first 返回一个迭代器，直到 First 开始循环它。

如果谓词不匹配任何元素，则会引发相同的异常 InvalidOperationException。

唯一的区别是代码的冗长，所以 .First 没有 .Where 应该是首选

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T16:49:44.340

在特定情况下，调用`First`and `Where`on a `string[]`，调用的方法是 the`Enumerable.Where`和`Enumerable.First`扩展方法。

`Enumerable.Where`做这个：

```
public static IEnumerable<TSource> Where<TSource>(this IEnumerable<TSource> source, Func<TSource, bool> predicate) 
{
  // null checks omitted
  if (source is TSource[]) 
     return new WhereArrayIterator<TSource>((TSource[])source, predicate); 
  //the rest of the method will not execute
} 
```

并且构造函数`WhereArrayIterator`只是：

```
public WhereArrayIterator(TSource[] source, Func<TSource, bool> predicate) {
  this.source = source; 
  this.predicate = predicate;
} 
```

所以这里实际上什么也没做，除了创建一个迭代器。

第`First`一种方法，没有谓词这样做：

```
public static TSource First<TSource>(this IEnumerable<TSource> source) { 
  //null check
  IList<TSource> list = source as IList<TSource>;
  if (list != null) {
     //this branch is not taken as string[] does not implement IList<string>
     if (list.Count > 0) return list[0]; 
  }
  else { 
    //this is actually the WhereArrayIterator from before
    using (IEnumerator<TSource> e = source.GetEnumerator()) { 
      if (e.MoveNext()) 
        return e.Current;
    } 
  }
  throw Error.NoElements();
} 
```

但是，第二个`First`这样做

```
public static TSource First<TSource>(this IEnumerable<TSource> source, Func<TSource, bool> predicate) {
   //null checks
   foreach (TSource element in source) {
     if (predicate(element)) return element; 
   }
   throw Error.NoMatch();
} 
```

在数组的情况下，它与直接线性访问一样快。
简而言之，这意味着调用`First(predicate)`数组会更快一些，速度不会很大，但仍然可以检测到。这可能不适用于列表，当然也不适用于`IQueryable`对象，这是一个完全不同的故事。

然而，这是最糟糕的微优化。除非这样做数百万次，否则不会节省太多秒。即使我现在知道这一点，我仍然会使用更清晰的内容来阅读和理解。

# haskell - 为什么从 Int 到 Int 只有一个非严格函数？

> ID：14262014
> 
> 赞同：15
> 
> 时间：2013-01-10T16:01:17.703
> 
> 标签：haskell, functional-programming, computer-science

根据[这篇](http://en.wikibooks.org/wiki/Haskell/Denotational_semantics#Non-Strict_and_Strict_Languages)关于 Haskell 指称语义的文章，从 Int 到 Int 只有一个非严格（非底部保留）函数。

去引用：

> 碰巧只有一个 Integer -> Integer 类型的非严格函数的原型：
> 
> 一个 x = 1
> 
> 对于每个具体的数字 k，它的变体是 constk x = k。为什么只有这些可能？请记住，一个 n的定义*不能小于*一个 ⊥。由于 Integer 是一个平面域，因此两者必须相等。

本质上，它表示该类型签名的唯一非严格函数只能是常量函数。我不遵循这个论点。我也不确定*flat domain*是什么意思，文章的其余部分导致人们相信它只是意味着值的 poset 只有一个节点：底部。

从 A->A 或 A->B 的函数是否会发生类似的情况？那就是它们必须是常量函数？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-10T16:17:16.457

任何`Integer`不是`const k`针对某个常量的函数都`k`必须检查它的参数。您不能部分检查`Integer`，~~可能~~是什么意思它是一个“平面域”。这是`Integer`Haskell 规范中定义的语义的结果，而不是遵循核心语言的语义。

相比之下，`[a] -> [a]`每种类型都存在无限多个非严格类型函数`a`，例如`take1`：

```
take1 (x:_) = [x] 
```

为了显示非严格性，定义

```
ones = 1 : ones 
```

在指称语义方面，[[ `ones`]] = ⊥。但`take1 ones`计算结果为`[1]`，因此`take1`是非严格的。`take2 (x:y:_) = [x,y]`,`take10`等也是如此。

如果您想要整数上的非严格、非常量函数，则需要与 不同的整数表示`Integer`，例如：

```
data Bit = Zero | One
newtype BinaryInt = I [Bit] 
```

如果我们将 an 中的列表解释`I`为“小端”二进制整数，那么函数

```
mod2 (I [])       =  I []
mod2 (I (lsb:_))  =  I [lsb] 
```

是不严格的。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-10T16:20:12.517

# spring - 独立应用程序中的 Spring + JPA 不会将数据保存在数据库中

> ID：14262015
> 
> 赞同：1
> 
> 时间：2013-01-10T16:01:18.753
> 
> 标签：spring, hibernate, jpa-2.0

我在用

*   春天 3.1.1
*   JPA 2
*   H2
*   休眠

在独立的 Java 应用程序中。当我运行应用程序时，事务被执行，当我查询数据时，数据被检索。但是关闭应用程序时不会保存数据。

请帮我。

这是弹簧配置，

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jdbc="http://www.springframework.org/schema/jdbc"
    xmlns:context="http://www.springframework.org/schema/context" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
     http://www.springframework.org/schema/tx
       http://www.springframework.org/schema/tx/spring-tx.xsd">

    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />
        </property>
        <property name="persistenceXmlLocation" value="classpath*:META-INF/persistence.xml" />
    </bean>

    <bean id="sharedEntityManager"
        class="org.springframework.orm.jpa.support.SharedEntityManagerBean">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <tx:annotation-driven />

</beans> 
```

持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    version="1.0">
    <persistence-unit name="sling">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <class>com.sling.data.Trend</class>
        <class>com.sling.data.Gc</class>
        <properties>
            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.connection.driver_class" value="org.h2.Driver" />
            <property name="hibernate.connection.url" value="jdbc:h2:sling;DB_CLOSE_DELAY=-1" />
            <property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect" />
        </properties>
    </persistence-unit>
</persistence> 
```

DAO 类，

```
@Repository
public class GcDao {

  @PersistenceContext
  private EntityManager em;

  public GcDao() {
  }

  @Transactional
  public void add(Gc gc){
    em.persist(gc);
  }

  @SuppressWarnings("unchecked")
  @Transactional(readOnly = true)
  public List<Gc> getGc(){
    String queryText = " from Gc";
    Query query = em.createQuery(queryText);
    return query.getResultList();
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:17:52.903

我相信你仍然需要在你的 tx:anotation-driven 元素之前在你的 dao 包上添加 context:component-scan 。

```
<context:component-scan base-package="com.sling.dao" />
<tx:annotation-driven /> 
```

# javascript - 传递给构造函数的函数可以访问构造函数的其他属性吗？

> ID：14262016
> 
> 赞同：2
> 
> 时间：2013-01-10T16:01:22.740
> 
> 标签：javascript, oop, constructor

通常，调用`this`会起作用；但我在另一个上下文中调用该方法，因此`this`指的是该上下文而不是“父”对象。

这是代码：

```
var someConfig = {
  things: [
    {
      attr1: 'foo',
      attr2: 'bar',
      action: function() {
        console.log(this);
      }
    }
  ]
}

function Constructor(config) {
  var self = this;
  self.name = 'test';
  self.things = config.things;

  $.each(self.things, function(i, thing) {
    thing.action();
  });
    }

var obj = new Constructor(someConfig);
console.log(obj); 
```

[这是一个 jsfiddle](http://jsfiddle.net/QvMZK/3/)。目标是使控制台中的两个对象相同，但`this`在`action`方法的上下文中返回`action`所属的原始对象，而不是构造函数。

我唯一能想到的就是传递`self`到`action`，但我认为有更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:08:38.390

首先，关于您的代码的几点。您的配置属性`uniqueAction`稍后您将其称为`config.action`. 当您调用时，`obj.action`您需要将其作为函数调用，例如：`obj.action();`

考虑到这一点，以下似乎可以满足您的要求...

```
var config = {
  action: function() {
    console.log(this.name);//<- IMPORTANT PART
  }
}

function Constructor(config) {
  var self = this;
  self.name = 'test';
  self.action = config.action;
}

var obj = new Constructor(config)
obj.action(); 
```

请注意，该`console.log`调用现在使用`this.name`而不是`self.name`.

[这是一个工作示例](http://jsfiddle.net/musefan/hRk6N/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:40:33.290

> 传递给构造函数的函数可以访问构造函数的其他属性吗？

是的，但前提是您将该对象传递给函数（或隐式使用[`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)）。

您所做的尝试是`self`从在构造函数之外声明的函数访问局部变量，这是不可能的。

所以只需使用

```
{
  action: function() {
    console.log(this.name);
//              ^^^^
  }
} 
```

并且在调用时`obj.action()`会`this`指向实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T17:16:29.043

我看到的唯一方法是`thing`在调用`action`.

看看[这个 Fiddle](http://jsfiddle.net/vor0nwe/QvMZK/4/)，它是你的。我改变了两件事：

首先，`action`函数不再引用`this`，而是 的属性`parent`。`this`

```
 action: function() {
    console.log(this.parent);
//                  ^^^^^^^
  } 
```

其次，每个`thing`对象接收一个`parent`属性，该属性引用`self`.

```
 $.each(self.things, function(i, thing) {
    thing.parent = self;
    thing.action();
  }); 
```

# shell - 如何更正 shell 脚本以识别另一台运行 Linux 的服务器上的换行符？

> ID：14262017
> 
> 赞同：2
> 
> 时间：2013-01-10T16:01:26.720
> 
> 标签：shell, scripting, newline, sftp, ksh

换行符在 server2 (Solaris) 上被正确识别，而`backslash``n`在 server1 (Linux) 上被视为字符。我该如何纠正？

在处理一个接受参数并发送邮件的简单脚本时，我首先注意到这种相当奇怪的行为..

句法：`$ ksh SEND_MAIL.sh <to> <Subject> <body>`

1.  现在，当我在 server-1 上运行该脚本时

    [kent@server1] $ ksh SEND_MAIL.sh name@site.com "Subject" "123\n456" [Thu Jan 10 10:51:18 EST 2013] - 开始发送邮件到：name@site.com，带有主题\'>>>123\n456\'

    请注意，换行符被视为 backlash-n。

2.  在 server-2 上，`\n`特殊字符正确扩展为换行符。

    [kent@server2] $ ksh SEND_MAIL.sh name@site.com "Subject" "123\n456" [Thu Jan 10 10:51:18 EST 2013] - 开始发送邮件到：name@site.com，带有主题\'>>>123 456\'

我想我可能需要更改一些 KornShell 环境变量，但我无法弄清楚。

**更新：**

在下面 Henk 的指导之后......我发现知道差异并不足以帮助我解决主要问题 - 即让 server1 上的脚本将`\n`字符识别为换行符。所以我改进了我的问题。

* * *

## **笔记：**

> Server1 是 Linux 服务器，而 Server2 是 Solaris。

* * *

**环境详细信息 > KornShell：** - 正如*Henk Langeveld所建议的那样*

在服务器 1 上：

```
[kent@server1]$ ksh --version
  version         sh (AT&T Research) 93t+ 2010-02-02
[kent@server1]$ echo ${.sh.version}
bash: ${.sh.version}: bad substitution
[kent@server1]$ [ "${ERRNO}" ] && echo ksh88 || echo ksh93
ksh93
[kent@server1]$ [ "`echo "\c" | grep c`" ] && echo ksh93 || echo ksh88 
ksh93 
```

在服务器 2 上：

```
# I'm am in bash
[kent@server2]$ ksh --version 
$
$ ksh --version
$ 
[kent@server2]$ echo ${.sh.version}
bash: ${.sh.version}: bad substitution
[kent@server2]$ [ "${ERRNO}" ] && echo ksh88 || echo ksh93
ksh93
[kent@server2]$ [ "`echo "\c" | grep c`" ] && echo ksh93 || echo ksh88 
ksh93 
```

* * *

在服务器 1 和 2 上，我得到相同的*行为*：

```
$ echo -e "1\n2"
1
2
$ echo "1\n2"
1\n2
$ echo $'1\n2'
1
2 
```

* * *

**代码：**

SEND_MAIL.sh

```
#Syntax: $ ksh SEND_MAIL.sh <to> <Subject> <body>
TO_REC=$1
SUBJECT=$2
MESSAGE=$3
echo "$MESSAGE"| mailx -s "$SUBJECT" $TO_REC 
```

* * *

*按照Oliver*的建议，将该行`set | grep SH`放入两台服务器上的脚本中，以检查它正在运行的 shell 。

 *在服务器 1 上：

```
[kent@server1]$ ksh SEND_MAIL.sh kent@123.com "Subject" ">>>123\n\n456$a"
KSH_VERSION=.sh.version
SHELL=/bin/bash
SHLVL=3
SSH_ASKPASS=/usr/libexec/openssh/gnome-ssh-askpass
SSH_CLIENT='3.209.100.144 59645 22'
SSH_CONNECTION='3.209.100.144 59645 3.56.9.127 22'
SSH_TTY=/dev/pts/1
... 
```

在服务器 2 上：

```
[kent@server2]$ ksh SEND_MAIL.sh kent@123.com "Subject" ">123\n\n456$a"
SHELL=/bin/ksh
SHLVL=1
SSH_CLIENT='3.209.100.144 49351 22'
SSH_CONNECTION='3.209.100.144 49351 3.56.29.159 22'
SSH_TTY=/dev/pts/2
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:45:59.050

看，在每台服务器上：

*   ksh的版本
*   您在尝试时登录的 shell：`grep kent /etc/passwd`将在最后一个字段中显示登录 shell）。
*   并做一个`head -n 1 /path/to/SEND_MAIL.sh`看看一个或另一个运动不同的“shebang”。
*   最后，将该行`set | grep SH`放入另一个脚本中，比如说`./test.sh`，然后`chmod +x ./test.sh`，然后运行它 : `./test.sh`: 以查看它是否在每个服务器中使用不同的 shell 运行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T00:30:24.787

这是 AST ksh93、pdksh 还是较旧的 ksh88？

以下是如何`ksh`通过检查的输出`ksh --version`和值来检查你的版本`${.sh.version}`

```
$ ksh --version
version         sh (AT&T Research) 93u+ 2012-06-26
$ ksh -c 'echo ${.sh.version}'
Version AJM 93u+ 2012-06-26 
```

然后告诉我们两台服务器上的结果是否相同。旧版本的 ksh 实际上可能会报告错误。

* * *

ksh93的解决方案：

在 server1 上，将您的 \n 嵌入到 ksh93`Ansi string`中，方法是将其括在`$'`and中`'`：

```
two_lines=$'one\ntwo'  && print "$two_lines"
one
two 
```

这将推断出任何 C 风格的转义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T08:47:35.037

两台服务器有不同的`ksh`二进制文件。服务器 1 是来自 AT&T 的最新 ksh93，与大多数 linux 系统（debian 和 EL 衍生产品）捆绑在一起。服务器 2 是特立独行的。也许是这样`pdksh`？这解释了您所看到的差异。

在服务器 1 上：

```
[kent@server1]$ ksh --version
  version         sh (AT&T Research) 93t+ 2010-02-02 
```

在服务器 2 上：

```
# I'm am in bash
[kent@server2]$ ksh --version 
$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-24T16:32:07.320

对于 Linux 上的 korn shell，请尝试使用 print 或 printf 而不是 echo。这对我行得通。我目前正在使用它将我的脚本从 AIX 移植到 Linux。我还没有测试所有可能的 contxt，但到目前为止它运行良好。我在此之前尝试过的另一种选择也是有效的：

在 .profile 之类的环境设置文件中，添加以下语句： export NL="" 在第一行输入 " 后，您应该按 ENTER 键，然后在新行的第一个列上再次按 "。

然后将所有 \n 替换为 ${NL}，大括号是必需的，因为您不希望将 $NL 后面的内容视为 env var 名称的一部分。

祝你好运*

# javascript - 在 NetSuite 的 SuiteScript 中创建 Excel 文件

> ID：14262020
> 
> 赞同：0
> 
> 时间：2013-01-10T16:01:29.953
> 
> 标签：javascript, excel, netsuite

我目前正在尝试使用 NetSuite 基于 JavaScript 的 SuiteScript API 为电子邮件附件生成 Excel 文件。现在，我生成 CSV 文件没有问题。这很容易。但是需要一个 Excel 文件，但我遇到了麻烦。总是给我带来麻烦的代码行如下：

```
var dataFile = nlapiCreateFile(dataFilename, "EXCEL", fileData); 
```

它总是导致脚本崩溃。到目前为止，我已经尝试过简单的 CSV 样式数据格式，并且我还尝试过对数据使用 XML 格式，但是这两种方法都不起作用。同时，我们将只踢出一个 CSV 文件并让他们将其转换为 XLS，但如果有人对 NetSuite 的了解足以提供帮助，我们将不胜感激。如果有人想查看 XML 生成的代码，我可以添加。

编辑：这是为测试文件生成的 XML 示例...

```
<?xml version="1.0"?>
<ss:Workbook xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet">
    <ss:Worksheet ss:Name="Sheet1">
        <ss:Table>
            <ss:Row>
                <ss:Cell>
                    <ss:Data ss:Type="String">Booth Number</ss:Data>
                </ss:Cell>
                <ss:Cell>
                    <ss:Data ss:Type="String">Company</ss:Data>
                </ss:Cell>
                <ss:Cell>
                    <ss:Data ss:Type="String">Address</ss:Data>
                </ss:Cell>
                <ss:Cell>
                    <ss:Data ss:Type="String">City</ss:Data>
                </ss:Cell>
                <ss:Cell>
                    <ss:Data ss:Type="String">State</ss:Data>
                </ss:Cell>
                <ss:Cell>
                    <ss:Data ss:Type="String">Zip</ss:Data>
                </ss:Cell>
                <ss:Cell>
                    <ss:Data ss:Type="String">Country</ss:Data>
                </ss:Cell>
                <ss:Cell>
                    <ss:Data ss:Type="String">Telephone</ss:Data>
                </ss:Cell>
                <ss:Cell>
                    <ss:Data ss:Type="String">Fax</ss:Data>
                </ss:Cell>
                <ss:Cell>
                    <ss:Data ss:Type="String">Contact Name</ss:Data>
                </ss:Cell>
                <ss:Cell>
                    <ss:Data ss:Type="String">Email</ss:Data>
                </ss:Cell>
                <ss:Cell>
                    <ss:Data ss:Type="String">Booth Length</ss:Data>
                </ss:Cell>
                <ss:Cell>
                    <ss:Data ss:Type="String">Booth Width</ss:Data>
                </ss:Cell>
            </ss:Row>
        </ss:Table>
    </ss:Worksheet>
</ss:Workbook> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-06T19:56:43.557

尝试这个：

```
var xlsFile = nlapiCreateFile('filename.xls', 'EXCEL', nlapiEncrypt(xmlString, 'base64'));
xlsFile.setFolder(folderID);

var fileID = nlapiSubmitFile(xlsFile); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:25:13.987

If the file type is set to EXCEL than **base64 encode your data** before passing it to nlapiCreateFile.

Other option is that provide plain text CSV data and pass the type as **CSV**. CSV files can be opened by MS Excel

# c# - 按国家名称获取 RegionInfo？

> ID：14262021
> 
> 赞同：13
> 
> 时间：2013-01-10T16:01:37.203
> 
> 标签：c#, regions, regioninfo

我希望能够`RegionInfo`通过执行以下操作来获得：

```
new RegionInfo("United Kingdom"); 
```

但这会引发异常并表示无法识别。

RegionInfo 上的此[页面](http://msdn.microsoft.com/en-gb/library/aa328577%28v=vs.71%29.aspx)说，如果“名称不是有效的国家/地区名称”，则会引发异常。

然而，这个[页面](http://msdn.microsoft.com/en-us/library/system.globalization.regioninfo%28VS.80%29.aspx)指定了一个预定义区域列表，这些区域由包含 和 的类使用`United Kingdom`，那么为什么创建一个`RegionInfo`带有国家名称的新区域不起作用呢？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-10T16:14:16.047

```
 var regions = CultureInfo.GetCultures(CultureTypes.SpecificCultures).Select(x => new RegionInfo(x.LCID));
  var englishRegion = regions.FirstOrDefault(region => region.EnglishName.Contains(name)); 
```

如果你想`RegionInfo`通过国家名称来获取，你可以得到一个`IEnumerable<RegionInfo>`然后根据`EnglishName`上面的过滤器。这也使您能够填充诸如组合框之类的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T16:06:05.667

您链接的同一页面还说：

> RegionInfo 名称是 ISO 3166 中为国家/地区定义的两个字母代码之一。案例不重要；但是，Name、TwoLetterISORegionName 和 ThreeLetterISORegionName 属性以大写形式返回相应的代码。

代码在页面上，`GB`似乎是英国的 2 个字母代码（按代码顺序很难搜索！）。所以试试这个：

```
new RegionInfo("GB"); 
```

或者，如果您使用的是 .NET 2.0+，建议您使用完整的文化名称：

```
new RegionInfo("en-GB"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T16:06:34.233

来自*MSDN*；

> 包含在 ISO 3166 中为国家/地区定义的两个字母代码的字符串。

`UNITED KINGDOM`ISO 网站上的[国家名称和代码元素](http://www.iso.org/iso/country_codes/iso_3166_code_lists/country_names_and_code_elements.htm)看起来不错。

> GB 英国

试试看；

```
new RegionInfo("GB"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T16:09:44.817

如果我导航到构造函数，我在 Visual Studio 中看到的摘要会显示：

> **name**：包含在 ISO 3166 中为国家/地区定义的两个字母代码的字符串。-或-包含特定文化、自定义文化或仅 Windows 文化的文化名称的字符串。**如果文化名称不是 RFC 4646 格式**，您的应用程序应指定**整个文化名称，而不仅仅是国家**/地区。

整个文化名称将是“en-GB”。

或者你可以使用“GB”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T16:05:54.420

查看 MSDN 页面：

`A string containing one of the two-letter codes defined in ISO 3166 for country/region.`

您需要英国的 ISO 3166 代码，而不是国家/地区的名称。

这是[您需要的代码](http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#GB)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T16:09:05.893

请注意参数元数据中的此注释，该注释`name`解释了从 .NET Framework 2.0 开始的更改：

```
 //     A string containing one of the two-letter codes defined in ISO 3166 for country/region.-or-Beginning
    //     in .NET Framework version 2.0, a string containing the culture name for a
    //     specific culture, custom culture, or Windows-only culture. If the culture
    //     name is not in RFC 4646 format, your application should specify the entire
    //     culture name, not just the country/region. 
```

# facebook - 打开的图表不会在墙上的 feed 上发布

> ID：14262028
> 
> 赞同：1
> 
> 时间：2013-01-10T16:01:51.930
> 
> 标签：facebook, api, facebook-opengraph

我制作了一个带有开放图形的应用程序。一旦我发布了一个动作，它就不会在我的墙上发布。它改为在**活动源上发布。**

这是我的发布代码

```
function postCook()
{
  FB.api(
    '/me/[my app namespace]:cook?'
    ,
    'post',
    { recipe: 'http://www.xxx.com/Sample.html'
        ,access_token : 'MY TOKEN'},
    function(response) {
       if (!response || response.error) {
          alert( response.error.message );
       } else {
          alert('Cook was successful! Action ID: ' + response.id);
       }
    });
} 
```

我也尝试按照[教程](https://developers.facebook.com/docs/technical-guides/opengraph/publish-action/#create)这里的说明 根据本教程，我已经看到 Open Graph 可以发布到新闻提要。但我无法让我的应用发布到新闻提要。

我是否必须设置任何参数才能强制它在新闻提要上发布（在我的墙上）？

我必须请求哪些权限？

发布操作或发布流？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:15:11.540

您不能强制将 Open Graph 操作发布到新闻源。Facebook 对提要保持严格控制，默认情况下，您的 OG 操作始终会发布到活动提要。有时他们只会到达新闻提要（你的朋友的 - 在我自己的提要中从未见过我的）。

就是这样，你不能强迫它。不过，不要太担心这一点，OG 操作实际上经常被发布，足以让您的应用程序“病毒式传播”，并很好地覆盖新用户。它绝对比一个`share`动作好，即使这个动作会立即发布到新闻提要。

# windows - 删除 CR LF 后将文件 A 复制到文件 B 的批处理文件

> ID：14262030
> 
> 赞同：2
> 
> 时间：2013-01-10T16:02:00.760
> 
> 标签：windows, batch-file

删除 CR LF 后，我需要一个批处理文件内容将文件 A 复制到文件 B

我发现了以下内容，但它只是将 %1 的实际值放入没有 cr lf 的文件中。

```
 REM Copy and Remove Line Feeds
 @echo off
 echo %1>  %2

 rem <nul set /p ".=%1 > c:/temp/%2.txt 
```

我需要从文件 A 中删除所有 CR LF 并将结果放入文件 B

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T02:01:29.437

下面的批处理文件以最快的方式执行您想要的操作：

```
@echo off
setlocal DisableDelayedExpansion
(for /F "usebackq delims=" %%a in (%1) do (
   set /P "=%%a" < NUL
)) > %2 
```

您必须将文件 A 和 B 放入参数中：test.bat A.txt B.txt

安东尼奥

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:58:19.570

可以下载许多免费的第 3 方实用程序以简化此任务。

我编写了一个 REPL.BAT 混合批处理/JScript 实用程序，可以方便地对文件执行正则表达式搜索和替换。它非常灵活且速度非常快。

使用此实用程序很容易做你想做的事。

```
type A.txt|repl "\r|\n" "" m >B.txt 
```

这是 REPL.BAT 脚本。完整的文档嵌入在脚本中：

```
@if (@X)==(@Y) @end /* Harmless hybrid line that begins a JScript comment

::************ Documentation ***********
:::
:::REPL  Search  Replace  [Options  [SourceVar]]
:::REPL  /?
:::
:::  Performs a global search and replace operation on each line of input from
:::  stdin and prints the result to stdout.
:::
:::  Each parameter may be optionally enclosed by double quotes. The double
:::  quotes are not considered part of the argument. The quotes are required
:::  if the parameter contains a batch token delimiter like space, tab, comma,
:::  semicolon. The quotes should also be used if the argument contains a
:::  batch special character like &, |, etc. so that the special character
:::  does not need to be escaped with ^.
:::
:::  If called with a single argument of /? then prints help documentation
:::  to stdout.
:::
:::  Search  - By default this is a case sensitive JScript (ECMA) regular
:::            expression expressed as a string.
:::
:::            JScript syntax documentation is available at
:::            http://msdn.microsoft.com/en-us/library/ae5bf541(v=vs.80).aspx
:::
:::  Replace - By default this is the string to be used as a replacement for
:::            each found search expression. Full support is provided for
:::            substituion patterns available to the JScript replace method.
:::            A $ literal can be escaped as $$. An empty replacement string
:::            must be represented as "".
:::
:::            Replace substitution pattern syntax is documented at
:::            http://msdn.microsoft.com/en-US/library/efy6s3e6(v=vs.80).aspx
:::
:::  Options - An optional string of characters used to alter the behavior
:::            of REPL. The option characters are case insensitive, and may
:::            appear in any order.
:::
:::            I - Makes the search case-insensitive.
:::
:::            L - The Search is treated as a string literal instead of a
:::                regular expression. Also, all $ found in Replace are
:::                treated as $ literals.
:::
:::            E - Search and Replace represent the name of environment
:::                variables that contain the respective values. An undefined
:::                variable is treated as an empty string.
:::
:::            M - Multi-line mode. The entire contents of stdin is read and
:::                processed in one pass instead of line by line. ^ anchors
:::                the beginning of a line and $ anchors the end of a line.
:::
:::            X - Enables extended substitution pattern syntax with support
:::                for the following escape sequences:
:::
:::                \\     -  Backslash
:::                \b     -  Backspace
:::                \f     -  Formfeed
:::                \n     -  Newline
:::                \r     -  Carriage Return
:::                \t     -  Horizontal Tab
:::                \v     -  Vertical Tab
:::                \xnn   -  Ascii (Latin 1) character expressed as 2 hex digits
:::                \unnnn -  Unicode character expressed as 4 hex digits
:::
:::                Escape sequences are supported even when the L option is used.
:::
:::            S - The source is read from an environment variable instead of
:::                from stdin. The name of the source environment variable is
:::                specified in the next argument after the option string.
:::

::************ Batch portion ***********
@echo off
if .%2 equ . (
  if "%~1" equ "/?" (
    findstr "^:::" "%~f0" | cscript //E:JScript //nologo "%~f0" "^:::" ""
    exit /b 0
  ) else (
    call :err "Insufficient arguments"
    exit /b 1
  )
)
echo(%~3|findstr /i "[^SMILEX]" >nul && (
  call :err "Invalid option(s)"
  exit /b 1
)
cscript //E:JScript //nologo "%~f0" %*
exit /b 0

:err
>&2 echo ERROR: %~1\. Use REPL /? to get help.
exit /b

************* JScript portion **********/
var env=WScript.CreateObject("WScript.Shell").Environment("Process");
var args=WScript.Arguments;
var search=args.Item(0);
var replace=args.Item(1);
var options="g";
if (args.length>2) {
  options+=args.Item(2).toLowerCase();
}
var multi=(options.indexOf("m")>=0);
var srcVar=(options.indexOf("s")>=0);
if (srcVar) {
  options=options.replace(/s/g,"");
}
if (options.indexOf("e")>=0) {
  options=options.replace(/e/g,"");
  search=env(search);
  replace=env(replace);
}
if (options.indexOf("l")>=0) {
  options=options.replace(/l/g,"");
  search=search.replace(/([.^$*+?()[{\\|])/g,"\\$1");
  replace=replace.replace(/\$/g,"$$$$");
}
if (options.indexOf("x")>=0) {
  options=options.replace(/x/g,"");
  replace=replace.replace(/\\\\/g,"\\B");
  replace=replace.replace(/\\b/g,"\b");
  replace=replace.replace(/\\f/g,"\f");
  replace=replace.replace(/\\n/g,"\n");
  replace=replace.replace(/\\r/g,"\r");
  replace=replace.replace(/\\t/g,"\t");
  replace=replace.replace(/\\v/g,"\v");
  replace=replace.replace(/\\x[0-9a-fA-F]{2}|\\u[0-9a-fA-F]{4}/g,
    function($0,$1,$2){
      return String.fromCharCode(parseInt("0x"+$0.substring(2)));
    }
  );
  replace=replace.replace(/\\B/g,"\\");
}
var search=new RegExp(search,options);

if (srcVar) {
  WScript.Stdout.Write(env(args.Item(3)).replace(search,replace));
} else {
  while (!WScript.StdIn.AtEndOfStream) {
    if (multi) {
      WScript.Stdout.Write(WScript.StdIn.ReadAll().replace(search,replace));
    } else {
      WScript.Stdout.WriteLine(WScript.StdIn.ReadLine().replace(search,replace));
    }
  }
} 
```

# eclipse - 为什么 Eclipse 在从现有代码导入时分配项目名称，如主要活动名称？

> ID：14262031
> 
> 赞同：2
> 
> 时间：2013-01-10T16:02:01.340
> 
> 标签：eclipse

我可以创建具有某个名称的项目，但如果我应该将此项目导入 Eclipse 包资源管理器，则该项目会收到类似活动的名称，例如 SplashActivity。如何使原始名称在导入时不丢失？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:04:32.977

要重命名 Eclipse 项目，请右键单击项目 -> 重构 -> 重命名...

我从[http://iappmania.blogspot.com/2013/01/rename-project-after-existing-android.html#.UQwftOgU9Ew得到这个](http://iappmania.blogspot.com/2013/01/rename-project-after-existing-android.html#.UQwftOgU9Ew)

# java - 用于网络流的 Java 库

> ID：14262032
> 
> 赞同：3
> 
> 时间：2013-01-10T16:02:04.910
> 
> 标签：java, swing, netflow

是否有用于 Netflow 的 Java 库？我需要能够客观化流进行分析。（我也确实需要支持 sflow，但一次一个障碍。）我发现了一个名为“jflow”的项目，其中包含 Netflow v5 和 v6 的类，但我也需要支持 7 和 9。

我所有的谷歌搜索都没有给我带来任何东西。有人知道图书馆吗？有没有人自己写的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:04:04.243

是的，还有[Java NetFlow Collect-Analyzer](http://sourceforge.net/projects/jnca/)。它支持 v7 和 v9 以及以前的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:24:09.507

[另一个名为Styx](http://styx.javaforge.com/)的java 库 是另一个 Netflow 收集器和分析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-28T18:36:59.000

有一个[Scala 库](https://github.com/wasted/netflow)，这大概意味着它可以从 Java 中调用。但这没有具体记录，我也没有尝试过。

# python-2.7 - 使用 | 的多个命令 在 Python 中

> ID：14262033
> 
> 赞同：0
> 
> 时间：2013-01-10T16:02:05.087
> 
> 标签：python-2.7

我正在尝试通过`Python`.

```
Cat File |grepcidr -f file.name >>output.file 
```

如果我使用 subprocess.call

```
subprocess.call(["cat", "File", "|", "grepcidr -f", "file.name", ">>output.file"]) 
```

它只是尝试`Cat`一切。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:07:36.607

琐碎但不可移植的方式：

```
subprocess.call(["/bin/sh","-c","cat File | grepcidr -f file.name >>output.file"]) 
```

它需要`/bin/sh`，如果您仍然依赖它，这应该不是问题`cat`。我认为可以自己构建一系列协作的子流程：您必须对`/bin/sh`管道和重定向做些什么，但在 python 中。

# php - 找到也发此推文的朋友

> ID：14262041
> 
> 赞同：0
> 
> 时间：2013-01-10T16:02:32.430
> 
> 标签：php, smarty

我正在开发一个像推特这样的社交工具，但我被困在“谁也在推特这个推特”上。

我的页面上有一个推特列表，我想显示谁也为每条推文发了这个推文。

我正在使用 MySQL + php + Smarty。

这是代码： /* ---- php ---- */

```
// Get twitters that tweeted over 200 times.
$sql = mysql_query("SELECT id, content, user, tweets FROM twitter_list WHERE tweets > '200'");
$twitter_array = array();
while($tweet_row = mysql_fetch_array($sql)){
    array_push($twitter_array, $tweet_row);
    // Get the users who tweeted these twitters.
    $twitter_id = $tweet_row['id'];
    // Find out 5 friends who also tweeted this twitter. twitter_relation stores who tweets what.
    $friends_who_also_tweet = mysql_query("SELECT tid, twitter_id, user_id FROM tweet_relation WHERE twitter_id = '$twitter_id' ORDER BY tid DESC LIMIT 5");
    $friends_who_also_tweet_array = array();
    while($friends_who_also_tweet_row = mysql_fetch_array($friends_also_tweet_array)){
        array_push($friends_who_also_tweet_array, $friends_who_also_tweet_row);
    }
    if($friends_who_also_tweet_array){
        $sm->assign("fwat", $friends_who_also_tweet_array);
    }
}
if($twitter_array){
    $sm->assign("twitter", $twitter_array);
}
$smarty->display('twt.html'); 
```

/* ---- HTML: twt.html ---- */

```
...
{section name=twitter loop=$twitter}
<div class="content">{$twitter[twitter].content}</div>
<div class="who_also_tweet">
  {section name=who loop=$fwat}
  <div class="i_also_tweet">{$fwat[who].user_id}</div>
  {/section}
</div>
{/section} 
```

我希望得到 twitter 数组，并为每个 twitter 检索 5 个发推文的用户。但它只显示第一个 twitter 的用户，我怀疑 while() 可能是错误的但找不到它。任何人都可以帮我一把吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:50:00.087

```
$twitter_array = array(); 
```

然后：

```
if($twitter_array){
    $sm->assign("twitter", $twitter_array);
} 
```

您从未向该数组添加任何内容。我假设你的意思是在这里做（因为`$tweet_array`从未声明过）：

```
array_push($tweet_array, $tweet_row); 
```

事实上，这个变量也被赋值，然后也从未被引用过：

```
$friends_who_also_tweet 
```

您的变量命名确实令人困惑，我认为这可能会导致您的问题。

编辑：另外，你为什么在第一个 While 循环的每次迭代中分配这个？它只会覆盖以前的值：

```
if($friends_who_also_tweet_array){
        $sm->assign("fwat", $friends_who_also_tweet_array);
    } 
```

# realplayer - 从服务器引用 css 文件时 Realplayer 在 Firefox 中中断

> ID：14262043
> 
> 赞同：1
> 
> 时间：2013-01-10T16:02:33.243
> 
> 标签：realplayer

在本地运行“测试”简化 html 网页以复制场景时，当从服务器位置引用 CSS 文件时，Real player embed 会出现问题。

这是**不起作用**的代码：

```
<!DOCTYPE html>    
<html>
<head>
    <meta charset="utf-8" />
    <title>Realplayer Test</title>

    <link href="http://domain.com/Content/Styles/styles.css" rel="stylesheet" type="text/css" /> 
</head>
<body>    
    <object id="media"
    classid="clsid:CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA"
    height=360 width=640>
    <param name="controls" value="ImageWindow">
    <param name="console" value="Clip1">
    <param name="autostart" value="true">
    <param name="src" value="rtsp://domain.com/mediatemp/93088761_hi.rm">
    <embed src="rtsp://domain.com/mediatemp/93088761_hi.rm" console="Clip1" controls="ImageWindow"
    height="360" width="640" type="audio/x-pn-realaudio-plugin" autostart="true">
    </object>
    <br>
    <object id="media"
    classid="CLSID:CFCDAA03-8BE4-11CF-B84B-0020AFBBCCFA" width="320"
    height="100">
    <param name="src" value="rtsp://domain.com/mediatemp/93088761_hi.rm">
    <param name="console" value="Clip1">
    <param name="controls" value="All">
    <param name="AutoStart" value="true">
    <embed controls="All" console="Clip1"
    type="audio/x-pn-realaudio-plugin" src="rtsp://domain.com/mediatemp/93088761_hi.rm"
    width="640" height="100" autostart="true">
    </object>
</body>
</html> 
```

这是在浏览器中显示的内容： ![真实错误](../Images/c5937a1200cdf0aa0b991fe484df2b19.png)

这是有效的**代码**：

```
<!DOCTYPE html>    
<html>
<head>
    <meta charset="utf-8" />
    <title>Realplayer Test</title>

    <link href="styles.css" rel="stylesheet" type="text/css" />
</head>
<body>    
    <object id="media"
    classid="clsid:CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA"
    height=360 width=640>
    <param name="controls" value="ImageWindow">
    <param name="console" value="Clip1">
    <param name="autostart" value="true">
    <param name="src" value="rtsp://domain.com/mediatemp/93088761_hi.rm">
    <embed src="rtsp://domain.com/mediatemp/93088761_hi.rm" console="Clip1" controls="ImageWindow"
    height="360" width="640" type="audio/x-pn-realaudio-plugin" autostart="true">
    </object>
    <br>
    <object id="media"
    classid="CLSID:CFCDAA03-8BE4-11CF-B84B-0020AFBBCCFA" width="320"
    height="100">
    <param name="src" value="rtsp://domain.com/mediatemp/93088761_hi.rm">
    <param name="console" value="Clip1">
    <param name="controls" value="All">
    <param name="AutoStart" value="true">
    <embed controls="All" console="Clip1"
    type="audio/x-pn-realaudio-plugin" src="rtsp://domain.com/mediatemp/93088761_hi.rm"
    width="640" height="100" autostart="true">
    </object>
</body>
</html> 
```

![在职的](../Images/e20269f4e452fc4d9b0f4f53660c83e3.png)

Style.css 在两个实例中都是相同的 CSS 标记。当从 url 位置引用 CSS 文件时播放器会停止工作的任何想法。我已将styles.css 文件上传到多个服务器，但同样的问题仍然存在。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T00:54:26.713

浏览器安全性将是值得关注的事情，因为从 URL 以编程方式加载 CSS 现在存在安全风险：

> 从 Firefox 23 开始，Firefox 默认会阻止活动的混合内容。这遵循 Internet Explorer（自版本 9 起）和 Chrome 采用的做法。
> 
> 如果您的网站提供 HTTPS 页面，则默认情况下会阻止通过 HTTP 提供的所有内容（图像、脚本、视频、样式表、iframe、字体...）。因此，您的网站可能会在用户看来已损坏（如果图像未加载等）。
> 
> 请注意，由于混合内容阻止已经在 Chrome 和 Internet Explorer 中发生，如果您的网站在这些浏览器中运行，它很可能在具有混合内容阻止的 Firefox 中同样有效。

**参考**

*   [Firefox 23 中启用了混合内容阻止](https://blog.mozilla.org/tanvi/2013/04/10/mixed-content-blocking-enabled-in-firefox-23/)

# asp.net - Ext.Net :土耳其特殊字符显示错误

> ID：14262046
> 
> 赞同：1
> 
> 时间：2013-01-10T16:02:37.437
> 
> 标签：asp.net, extjs, ext.net

我正在使用 Ext.Net 社区版本 2.0.0

特殊土耳其语字符** 显示错误。

特殊土耳其字符显示错误。（对于所有浏览器，显示错误格式） dateField 控件（日历）和一些通知工具提示也显示错误格式。

例如：它必须显示为“Mayıs”和“Ağustos”，但是，它看起来像这样“MayÃ½s”“AÃ°ustos”

*我添加了一个显示错误的图像。在图像上，它必须写为“Şubat 2014”但这似乎很奇怪

*我也在使用 UTF-8 编码。

**特殊土耳其语字符= ş,ğ,ı,ü,ö,ç,Ş,Ğ,Ü,Ö

我能做些什么来解决这个问题。

谢谢你

![在此处输入图像描述](../Images/46e600cf4fe07f3abe18cdeafd75a1e6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:59:16.957

这是Ext.NET 论坛上的相关[主题。](http://forums.ext.net/showthread.php?23017)

# c# - Linq to SQL DataContext：如何加载数据？

> ID：14262048
> 
> 赞同：5
> 
> 时间：2013-01-10T16:02:43.223
> 
> 标签：c#, asp.net, linq-to-sql, datacontext

（我对 Linq to SQL 完全陌生）我正在创建一个与数据库密切合作的 Web 应用程序，我正在寻找最快且连接时间效率最高的模型，并相信 Linq to SQL 就是这样。我正在使用 C#/.Net4/Visual Studio 2010

为简单起见，我有一个包含许多 asp 文本框的 web .aspx 页面。我想通过 Linq 将 SQL 数据中的文本值提供给 SQL 对象。我还有一个名为 DataClasses.dbml 的文件，其中在设计视图中添加了一个表。到目前为止，我的网页代码隐藏中的代码是：

```
DataClassesDataContext db = new DataClassesDataContext(getConnectionString);

var table = from t in db.MyTable
            where t.PK == 2
            select new { t.col1, t.col2, t.col3};

db.Connection.Open();
db.  // What's the best way of loading the object?
db.Connection.Close(); 
```

然后如何访问列值？还是我将它数据绑定到数据表？如果是这样，怎么做？

```
myTextBox1.Text = table.???col1.value; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-10T16:10:59.070

您无需打开或关闭连接。LinqToSql 为您抽象了这一点。

创建查询后，您可以执行它并使用`SingleOrDefault()`.

```
using (var db = new DataClassesDataContext(getConnectionString))
{
    var query = from t in db.MyTable
                where t.PK == 2
                select new { t.col1, t.col2, t.col3};
    var myObject = query.SingleOrDefault();
} 
```

您还可以使用 lambda 表示法简化此操作：

```
using (var db = new DataClassesDataContext(getConnectionString))
{
    var myObject = db.MyTable.SingleOrDefault(t => t.PK == 2 )
} 
```

要访问对象，您可以直接访问列，因为它们已映射到相应的属性：

```
myTextBox1.Text = myObject.col1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:11:20.780

常见的方法是调用将执行查询的方法（ToArray、ToList、First、Single 等）或在 foreach 中枚举它。

例如：

```
var query = from t in db.MyTable
            where t.PK == 2
            select new { t.col1, t.col2, t.col3};

var result = query.ToArray(); // now it contains array of resulting objects

// or enumerate
foreach (var obj in query)
{
    // do stuff with obj
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:06:50.910

利用

```
myTextBox1.Text = table.FirstOrDefault().col1.ToString(); 
```

# java - 如何组织信号量以将多个 Java 进程写入一个文本文件

> ID：14262051
> 
> 赞同：0
> 
> 时间：2013-01-10T16:02:46.547
> 
> 标签：java, file-io, concurrency, semaphore

我们有几个 Java 进程不时写入一个文本文件。这些不是同一虚拟机的线程，而是`java.exe`从命令行运行的独立进程。这些进程写入同一个日志文件。我们用`canWrite`...

```
while (!Log.canWrite()) {
    System.out.println("File: " + LogPath + " is locked, waiting...");
    Thread.sleep(2000);
} 
```

...但它似乎不起作用。我们收到以下错误：

```
The process cannot access the file because it is being used by another process) at java.io.FileOutputStream.openAppend(Native Method). 
```

**`The Question:`**

**在这样的情况下组织信号量**的最佳实践是什么？如果解决方案不太消耗资源，那就太好了，从而极大地影响整体性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:07:10.203

您可以使用 同步对文件的访问[`FileChannel.lock()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/channels/FileChannel.html#lock%28%29)。您可以`FileChannel`从[`FileOutputStream`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileOutputStream.html#getChannel%28%29).

**编辑**但在你的情况下，它将解决一个令人担忧的问题。你需要的是一个集中的日志服务器。有关更多详细信息，请参阅此问题：[集中式 Java 日志记录](https://stackoverflow.com/questions/11100760/centralised-java-logging)

# android - 根据 ListView 中选择的项目执行代码的最简单方法是什么？

> ID：14262052
> 
> 赞同：0
> 
> 时间：2013-01-10T16:03:01.667
> 
> 标签：android, android-layout

我有一个包含两个元素的 ListView。我想根据已选择的项目执行不同的代码。到目前为止，我的代码看起来像这样（但它不起作用）：

```
protected void onListItemClick(ListView l, View v, int position, long id) {
     // TODO Auto-generated method stub
        ListView listview = (ListView) findViewById(android.R.id.list);
        View root = (View) listview.getParent();
        if (position == 1) {
            root.setBackgroundColor(Color.parseColor("#133b96"));
        } else if (position == 2) {
            root.setBackgroundColor(Color.parseColor("#bdbdbd"));
        }
    } 
```

我想改变背景颜色，颜色要以选中的项目为准。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:05:50.490

```
protected void onListItemClick(ListView l, View v, int position, long id) {

    if (position == 1) {
        v.setBackgroundColor(Color.parseColor("#133b96"));
    } else if (position == 2) {
        v.setBackgroundColor(Color.parseColor("#bdbdbd"));
    }
} 
```

看看你`protected void onListItemClick()`的参数方法`View v`。这是选定列表项的视图。如果您想更改 ListView 的背景颜色，请使用

`ListView l`.

就像是，

```
if (position == 1) {
        l.setBackgroundColor(Color.parseColor("#133b96"));
    } else if (position == 2) {
        l.setBackgroundColor(Color.parseColor("#bdbdbd"));
} 
```

因此，您必须从中删除其他代码才能使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:07:22.790

你可以打开位置。一种更 OOP 的方法是使用 view 的 tag 属性，并使用它来存储一些可运行的。

例如

```
item.setTag(new Runnable() {
    public void run() {
        // run whatever code you want
    }
} 
```

...

```
((Runnable)view.getTag()).run(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:07:54.057

```
 ArrayAdapter<MyClass> adapter= new ArrayAdapter<MyClass>(this, R.layout.lay_item, theObjects);
   myList.setAdapter(adapter);
   myList.setOnItemClickListener(new OnItemClickListener() {
   public void onItemClick(AdapterView<?> adapter, View v, int position, long id) {
    MyClass item = (MyClass) adapter.getItem(position);
   }
  } 
```

# asp.net-mvc - 实体框架将内存实体与保存的实体进行比较

> ID：14262053
> 
> 赞同：0
> 
> 时间：2013-01-10T16:03:02.370
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first

我已经简化了我的代码以更好地说明我的观点。我需要有一些业务逻辑来测试属性是否从 a 更改为 b。我面临的问题是我正在操作的实体附加到我的 DBContext。如果我更新我的参考之一上的属性，另一个也会更新：

```
 ....
  var oldEntity = context.Find(x);
  var updatedEntity = context.Find(x);

  //here updatedEntity.IntProperty is 6

  updatedEntity.IntProperty = 7;

  //here both oldEntity.IntProperty and updatedEntity.IntProperty 
  //are now 7 so my test isn't hit
  if(oldEntity.IntProperty != updatedEntity.IntProperty && 
      updatedEntity.IntProperty == 7)
  {
      .... 
```

是否有一些方便的方法可以在将此实体附加到 DBContext 的同时进行我想要的比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:34:04.273

我正在为 nHydrate 使用实体框架。主体将是相同的（这是 VB.NET 抱歉！）：

```
Dim initialEntity = _context.ObjectStateManager.GetObjectStateEntry((TryCast(oldEntity, Objects.DataClasses.IEntityWithKey)).EntityKey)

Dim oldValue As Integer = initialEntity.OriginalValues.GetValue("IntProperty")
Dim newValue As Integer = initialEntity.CurrentValues.GetValue("IntProperty") 
```

希望这可以帮助。

安德斯

# r - 以连续时间轴为 x 轴的堆积条形图

> ID：14262056
> 
> 赞同：1
> 
> 时间：2013-01-10T16:03:11.340
> 
> 标签：r, ggplot2, time, bar-chart, data-visualization

我们正在监视 3 个进程 A、B 和 C，它们始终处于 X、Y 或 Z 级别。协议记录进程何时更改级别。

```
df = read.csv(tc <- textConnection('Time1,Process1,Level1
2013-01-09 18:00:34,A,X
2013-01-09 18:00:34,B,Y
2013-01-09 18:00:34,C,X
2013-01-09 18:00:59,A,Z
2013-01-09 18:01:06,A,X
2013-01-09 18:01:10,C,Y
2013-01-09 18:01:10,B,Z
2013-01-09 18:01:13,A,Z
2013-01-09 18:01:18,A,Off
2013-01-09 18:01:18,B,Off
2013-01-09 18:01:18,C,Off
'),header=TRUE)
close.connection(tc) 
df$Time1 = as.POSIXct(df$Time1) 
```

监控于 18:00:34 开始，并于 18:01:18 关闭。在 18:00:34 和 18:00:59 之间，进程 A 处于 X 级，在 18:00:59 和 18:01:06 之间，进程 A 处于 Z 级。

我们希望在 x 轴上显示 18:00:34 和 18:01:18 之间的连续间隔，以及三个等宽的水平条（A、B、C），它们表示所示时间的当前进程级别在 x 轴上。

低于我们上次尝试的内容。图表的整体结构似乎是正确的，但时间轴没有多大意义，数据也丢失了。（我们不需要 Off 类别，但一旦时间轴有意义，可能很容易将其删除。）任何指导将不胜感激。

```
ggplot() + 
  geom_bar(data=df, aes(x=Process1, y=Time1, fill=Level1)) + 
  coord_flip() 
```

![在此处输入图像描述](../Images/4801640adb3793dc71ad19c97c16b158.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:18:21.140

我不确定用`geom_bar`它来做这件事，但`geom_line`如果我增加线条的大小，我可以做类似的事情。

```
library(ggplot2)
library(scales)
ggplot(df, aes(x=Time1, y=Process1, group=Process1, colour=Level1)) + 
  geom_line(size=5) + scale_x_datetime("",  labels = date_format("%H:%M:%S")) 
```

![在此处输入图像描述](../Images/fc1cec3281fd5e9b5fb0ef3788899315.png)

# c# - 外部网络路由到 iis full not iis express

> ID：14262063
> 
> 赞同：0
> 
> 时间：2013-01-10T16:03:39.887
> 
> 标签：c#, asp.net-mvc, iis

我已将 IIS express 配置为在端口 80 和 443 上工作，并设置证书并将绑定添加到配置文件。

在我的开发机器上一切正常，并且符合预期。

我可以访问`http://pete-laptop/`并且`https://pete-laptop`一切都很好。

我也想从我的 iPhone 和 iPad 上访问它，以检查它的显示方式等。

我试过登录，`http://pete-laptop/`但`https://pete-laptop`没有任何乐趣。

我试过`http://pete-laptop.local`了，还有我的IP地址。这两个选项都显示 IIS（完整）保存页面（蓝绿色 IIS7 徽标），因为它似乎将其路由到完整版本的 IIS，而不是 express。

如何让它将 pete-laptop 上的传入流量路由到 IIS express 而不是 IIS full？

我做了以下，还不够吗？

```
netsh http add urlacl url=http://pete-laptop:80/ user=everyone
netsh http add urlacl url=https://pete-laptop:443/ user=everyone 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:33:00.787

可能有多种事情对您不利：

[编辑 IIS 绑定](http://www.iis.net/configreference/system.applicationhost/sites/site/bindings/binding)

接下来，尝试将 IIS-express 设置为 :。[这里](http://msmvps.com/blogs/rfennell/archive/2011/03/22/how-to-expose-iis-express-to-external-network-connections-and-use-a-non-self-signed-certificate.aspx)有一些指示

# ruby-on-rails - 是否可以在与 Kaminari 的链接中添加锚点/参数？

> ID：14262066
> 
> 赞同：6
> 
> 时间：2013-01-10T16:03:45.020
> 
> 标签：ruby-on-rails, ruby-on-rails-3, kaminari

我正在使用 Kaminari 进行分页。它的工作真棒。

我现在想要的一件事是，`#comment_section`在 Kaminari 生成的 url 后面添加。

比如我的观点就是这样。通过单击 Kaminari 生成的链接加载页面时，我希望它转到本节的顶部。

是否可以？

```
<a name="comment_section">
<span id="comment">
 <%= render 'users/comment' %>
</span>
<%= paginate @comments, :window => 4 %> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-10T16:38:22.233

从[Kaminari 文档](https://github.com/amatsuda/kaminari#helpers)：

```
<%= paginate @users, params: { controller: 'foo', action: 'bar'} %> 
```

所以我想你可以修改它以获得一个锚参数，在你的情况下：

```
<%= paginate @users, params: { anchor: 'comment_section' } %> 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:25:32.197

我不记得了，但它应该工作。

在视野中

```
<%= paginate @posts, :remote => true, :param_name => "post_page" %>
<%= paginate @comments, :remote => true, :param_name => "comment_page" %> 
```

在控制器中

```
@posts = Post.search(query).page(params[:user_page])
@comments = Post.search(query).page(params[:post_page]) 
```

# c++ - 从 CUDA 中的主机访问设备上的类成员数组指针

> ID：14262067
> 
> 赞同：3
> 
> 时间：2013-01-10T16:03:48.983
> 
> 标签：c++, cuda

一段时间以来，我一直很困惑这个问题。这涉及到 CUDA 设备指针。我的设备上有一个自定义类的实例，它有一个成员变量，它是指向数组（在设备上）的指针。

```
class MyClass {
public:
    int* array;
    // Other variables and functions, etc.
}; 
```

它需要是一个动态分配的数组，因为数组的大小取决于程序开始时的一些输入。在程序执行期间，我正在使用内核函数修改类，但最终我想在主机上获取此类的副本以输出到文件。但是我似乎无法让 cudaMemCpy 为我工作。

我可以使用以下代码获取该类的副本（其中 dc 是指向设备上的类的指针）：

```
MyClass hc;
cudaMemcpy(&hc, dc, sizeof(dc), cudaMemcpyDeviceToHost); 
```

但这只会获取类中不是指针的信息，这是有道理的，因为在 hc 中检索到的指针仍将指向设备上的数据。所以我想我可以使用这段代码来实际获取数组。

```
int* h_array;
cudaMemcpy(h_array, dc->array, sizeof(dc->array), cudaMemcpyDeviceToHost); 
```

这只返回一个空数组，加上我得到一个 cudaFree 错误（“Cuda 错误：cuda 空闲操作：无效参数”）。我已经尝试了很多这样的变体，包括使用 hc->array，但没有成功。有什么方法可以让我得到这个数组，而不必编写一个内核函数来复制每个单独的条目？我正在使用 CUDA 5.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:08:37.753

我认为您`sizeof`以错误的方式使用和指针。

`sizeof(dc)`并且`sizeof(dc->array)`在您的代码中可以替换为`sizeof(MyClass)`& `ArraySize * sizeof(int)`。

对于指针，你必须做`cudaMemcpy`两次才能得到你的数组。

1.  首先获取对象 hc，它存储了数组的地址。

    ```
    cudaMemcpy(&hc, dc, sizeof(MyClass), cudaMemcpyDeviceToHost); 
    ```

2.  然后获取数组本身。

    ```
    cudaMemcpy(h_array, hc.array, ArraySize*sizeof(int),D2H); 
    ```

另外，`dc`是指向设备内存的指针。你不能像这样在主机上取消引用它`dc->array`

# c# - HttpWebRequest-远程服务器返回错误：(400) Bad Request

> ID：14262072
> 
> 赞同：13
> 
> 时间：2013-01-10T16:04:07.823
> 
> 标签：c#, .net, upload, httpwebrequest

我收到远程服务器返回错误：（400）运行以下代码时出现错误请求。我正在尝试在 http 服务器上上传 xml 文件。我的 xml 文件包含用户名、密码和域的标记，当我尝试手动连接时，我能够连接它，但是当我尝试通过此代码连接它时使用相同的凭据，我收到 400 Bad Request 错误. 请建议我如何克服这个问题。谢谢`

```
 public static void UploadHttp(string xml)     
    {

        string txtResults = string.Empty;
        try
        {
            string url = "http://my.server.com/upload.aspx ";
            HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);
            request.KeepAlive = false;
            request.SendChunked = true;
            request.AllowAutoRedirect = true;
            request.Method = "Post";
            request.ContentType = "text/xml";
            var encoder = new UTF8Encoding();
            var data = encoder.GetBytes(xml);
            request.ContentLength = data.Length;
            var reqStream = request.GetRequestStream();
            reqStream.Write(data, 0, data.Length);
            reqStream.Close();
            WebResponse response = null;
            response = request.GetResponse();
            var reader = new StreamReader(response.GetResponseStream());
            var str = reader.ReadToEnd();
        }
        catch (WebException ex)
        {
            if (ex.Status == WebExceptionStatus.ProtocolError)
            {
                HttpWebResponse err = ex.Response as HttpWebResponse;
                if (err != null)
                {
                    string htmlResponse = new StreamReader(err.GetResponseStream()).ReadToEnd();
                    txtResults = string.Format("{0} {1}", err.StatusDescription, htmlResponse);
                }
            }
            else
            {

            }
        }
        catch (Exception ex)
        {
            txtResults = ex.ToString();
        }
    }` 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-10T16:46:56.457

你确定你应该使用 POST 而不是 PUT 吗？

POST 通常与`application/x-www-urlencoded`格式一起使用。如果您使用的是 REST API，您可能应该使用 PUT？如果您要上传文件，您可能需要使用`multipart/form-data`. 并非总是如此，但通常，这是正确的做法。

此外，您似乎没有使用凭据登录 - 您需要使用 HttpWebRequest 对象的 Credentials 属性来发送用户名和密码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-14T09:33:46.973

400 Bad request 由于不正确的身份验证条目将引发错误。

1.  检查您的 API URL 是否正确。不要附加或前置空格。
2.  验证您的用户名和密码是否有效。请在输入时检查任何拼写错误。

注意：大部分是由于不正确的身份验证条目由于拼写更改会发生 400 Bad request。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:57:09.353

您使用什么类型的身份验证？使用 Ben 之前所说的属性发送凭据并设置 cookie 处理程序。您已经允许重定向，如果发生任何重定向，请检查您的网络服务器（NTLM 身份验证确实如此）。如果有重定向，您需要存储会话，该会话主要存储在会话 cookie 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-20T11:59:44.393

//使用“ASCII”或尝试使用其他编码方案而不是“UTF8”。

```
using (StreamWriter postStream = new StreamWriter(request.GetRequestStream(), System.Text.Encoding.UTF8))
{
    postStream.Write(postData);
    postStream.Close();
} 
```

# html - 如何使文本变粗并使用 css 填充颜色，并在悬停时更改颜色

> ID：14262076
> 
> 赞同：0
> 
> 时间：2013-01-10T16:04:20.850
> 
> 标签：html, css

我正在尝试增加文本的宽度。我不想让它变粗。我试图保持文本内部为空。我的想法是用颜色填充文本，然后在悬停时更改颜色。

这是我要完成的工作的图片：

[http://img.ctrlv.in/50eee77779a5b.jpg](http://img.ctrlv.in/50eee77779a5b.jpg)

问题是我找不到如何使用 css 增加文本宽度的方法。（我通过 javascript 找到了它，但随后文本假定了图像的属性）（因此不可能产生悬停效果）（我找到了增加在此处的 w3schools 教程中使用 javascript 的字体宽度

[http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_canvas_tut_text2](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_canvas_tut_text2) )

我正在寻找一个 html 解决方案（不是画布）

我知道 CSS3/HTML 5 中有一个快捷方式来实现这种效果，但无法回忆/搜索我看到效果的网站。

任何帮助将不胜感激在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:09:50.323

可能并不完美，但不确定可以增加字母宽度的 CSS 选择器，您可以尝试以下操作：

```
a:hover {
    letter-spacing: 0.2em;
    color: #07C;
} 
```

这增加了字母之间的距离，也使用 css 而不是 jquery 进行悬停事件，更容易！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:18:45.610

据我所见，您实际上想要描边文本。只要笔划发生在文本边界之外，字体的宽度就可以保持不变，对吗？好吧，[CSS Tricks 有一篇文章](http://css-tricks.com/adding-stroke-to-web-text/)讨论了使用 webkit-text-stroke 和/或 text-shadow 来描边文本。[这里](http://css-tricks.com/examples/TextStroke/)给出一个例子。

所以，你最终会得到类似的东西：

```
/* CSS from tutorial */
.stroke {
  /* WebKit (Safari/Chrome) Only */
  -webkit-text-stroke: 1px black;

  /* If we weren't using text-shadow, we'd set a fallback color
     and use this to set color instead
    -webkit-text-fill-color: white; */

  color: white;

  text-shadow:
    3px 3px 0 #000,
    /* Simulated effect for Firefox and Opera
       and nice enhancement for WebKit */
   -1px -1px 0 #000,  
    1px -1px 0 #000,
   -1px  1px 0 #000,
    1px  1px 0 #000;
}

/* The colour changing bit - added by me */
.stroke:hover {
   color:blue;
} 
```

# extjs - sencha touch 如何更改标签栏中的标题

> ID：14262078
> 
> 赞同：0
> 
> 时间：2013-01-10T16:04:33.550
> 
> 标签：extjs, sencha-touch, touch, tabbar

我无法更改选项卡面板中的选项卡标题。

编辑：我正在开发一个测试应用程序，它包含一个带有其他三个视图的主选项卡面板，类似于 sencha-touch 文档的“入门视频”。

现在，出于本地化目的，我需要动态更改选项卡栏图标下的标签，代表面板的三个链接。

在下面的代码中，我尝试通过更改相关视图的标题来更改第一个按钮的标签，因为标签显示“主页”，即视图的标题。我想在视图的“激活”事件上执行此操作。此代码的结果是，如果我记录主视图的标题，它会更改，但标签栏按钮标签保持不变。

我认为我错过了“刷新”按钮之类的东西，但是我在文档中找不到有关此主题的任何内容。我希望这个编辑能更好地解释我的问题。

这是代码：

```
Ext.define('lvzMobile.view.Main', {
extend: 'Ext.tab.Panel',
requires: ['Ext.TitleBar'],
xtype: 'main',

config: {
    tabBarPosition: "bottom",

    items: [
        {
            xtype: 'homePanel',
            id: 'home',
        },
        {
            xtype: 'catalogue',
            id: 'catalogue'
        },
        {
            xtype: 'infoPanel',
            id: 'info'
        }
    ],

    listeners: {
        activate: function() {
            console.log("activate");
            this.getAt(0).setTitle("emoh");
            //the title changes but nothing happens in the tabbar... 
        }
    }
}
}); 
```

拜托，你能帮帮我吗？我不明白出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T10:25:51.763

那行说：

```
this.getAt(0).setTitle('emoh') 
```

…会改变你的标题`panel`，但不会改变按钮本身。要更改按钮文本，请使用：

```
this.getTabBar().getAt(0).setTitle('emoh') 
```

[](http://jsfiddle.net/aatiis/JWWbH/)**这是您要演示[的代码](http://jsfiddle.net/aatiis/JWWbH/)[**的小提琴。**](http://jsfiddle.net/aatiis/JWWbH/)**

 **在那里，这里有一个提示：使用`alias: 'widget.main'`而不是`xtype: 'main'`. `xtype`用于配置，`alias`用于定义别名，该别名随后可用于`xtype`（使用前缀`widget.`用作小部件，`store.`用作商店等）。**

# javascript - Broswers 对 JS 错误的处理

> ID：14262082
> 
> 赞同：1
> 
> 时间：2013-01-10T16:04:44.117
> 
> 标签：javascript, browser

对于 Javascript 中的以下代码：

```
// add HTML to container
// show the container on the DOM
// call a non-existent function on an object 
```

我成功地看到 Firefox 和 IE 显示我的 HTML。在 Firebug 和 IE 中显示 JS 错误的第三行代码似乎被抑制/忽略了。

浏览器通常会忽略糟糕的 JS 吗？或者，假设我`alert("line 4");`在第三行代码之后添加。由于 JS 解释会在非法的 JS 代码行结束，第 4 行会被忽略吗？

我在 jsFiddle 中测试了我的场景，但我不确定 jsFiddle 的行为方式是否与浏览器相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:09:33.587

JavaScript 引擎将执行代码，直到遇到*Exception*。然后行为会根据以下情况发生变化：

*   如果在 a 中[`try..catch`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/try...catch)，则从 继续执行`catch`，否则
*   如果它被异步调用，则该序列将在该点结束，但其他正在进行的序列将继续。（一个简单的例子是`window.setTimeout`）
*   如果它直接在 a`<script>`中，则从该点开始的其余代码`<script>`将不会执行，但`<script>`s 后面的代码会。

如果*异常*发生在被提升的东西中，那么将执行点视为在第 0 行。

[`throw`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/throw)您可以使用关键字轻松测试发生的情况。例如

```
console.log(1); // logs
console.log(2); // logs
throw 'eep';
console.log(4); // does not log 
```

# android - Android SQLite通配符选择字符模式

> ID：14262087
> 
> 赞同：2
> 
> 时间：2013-01-10T16:05:10.240
> 
> 标签：android, sqlite, wildcard

我在 Android 中使用 SQLite 数据库。我想使用类似的查询来查询数据库

`SELECT * FROM Persons WHERE City LIKE '%nes%'`

这将`Sandnes`根据字符模式“nes”匹配返回城市，如：[http](http://www.w3schools.com/sql/sql_wildcards.asp) ://www.w3schools.com/sql/sql_wildcards.asp 。

但是，当我尝试将其放入 android 的

`query (SQLiteDatabase db, String[] projectionIn, String selection, String[] selectionArgs, String groupBy, String having, String sortOrder)`

方法，使用

`selection = KEY_CODE + " LIKE ?";`和`selectionArgs = new String[] {"'%" + query + "%'"};`,

我没有返回任何结果。

我可以在 android 查询中执行此操作吗？如果是这样，我应该怎么写？如果没有，是否有替代方法？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T16:12:10.583

您正在构建一个看起来像这样的“likeable”参数：

```
'%do you like me%' 
```

撇号不应该在那里：它们属于文字语法，而不是模式本身：

```
%now you like me% 
```

采用

```
selectionArgs = new String[] {"%" + query + "%"}; 
```

# java - 有什么方法可以在java中释放子进程流？

> ID：14262089
> 
> 赞同：0
> 
> 时间：2013-01-10T16:05:14.570
> 
> 标签：java, process, inputstream, outputstream

的 javadoc[`Process`](http://docs.oracle.com/javase/6/docs/api/java/lang/Process.html)说：

> 创建的子进程没有自己的终端或控制台。它所有的标准io（即stdin、stdout、stderr）操作都会通过三个流（getOutputStream()、getInputStream()、getErrorStream()）重定向到父进程。

我想避免什么，让孩子用它的标准流做自己的事情。有什么办法可以避免超车吗？

# android - Android：有没有办法在应用程序上流式传输视频？

> ID：14262094
> 
> 赞同：2
> 
> 时间：2013-01-10T16:05:28.430
> 
> 标签：android

我见过像 netflix 这样流式传输视频的应用程序。有没有办法使用 sdk 做到这一点？我找不到任何关于如何在 android 上流式传输的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:07:07.483

这是一个`VideoView`流式传输文件的简单示例

```
public class VideoPlayer extends Activity {

String url = "http://yourvideo/url/video.mp4";

   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);
       VideoView myVideoView = (VideoView)findViewById(R.id.myvideoview);
       myVideoView.setVideoURI(Uri.parse(url));
       myVideoView.setMediaController(new MediaController(this));
       myVideoView.requestFocus();
       myVideoView.start();
   }
} 
```

在您的 XML 中某处：

```
<VideoView
   android:id="@+id/myvideoview"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content" /> 
```

# javascript - 带有 Backbone.js 的 setTimeout() 中的函数

> ID：14262110
> 
> 赞同：2
> 
> 时间：2013-01-10T16:06:07.087
> 
> 标签：javascript, jquery, backbone.js

我正在尝试`setTimeout()`在骨干模型中使用。下一个代码有效： `setTimeout(this.ajaxRequest,4000)` 但不是下一个： `setTimeout(function(){ this.ajaxRequest; },4000);`

既不使用`_.bind(this.ajaxRequest, this);`(Underscore.js)也不使用

`timeoutFunction: function(){ this.ajaxRequest; },`和 `setTimeout(this.timeoutFunction,4000);`

setTimeout 函数在 AJAX 响应完成时调用 ( `success:`) 并`_.bindAll(this);`在`initialize:`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:11:03.407

您没有调用 setTimeout(function) 调用中的函数。第一个，您传递对 setTimeout 正在调用的函数的引用，第二个实例您传递一个函数并且该函数什么都不做（没有实质内容）。该函数需要调用该函数`this.ajaxRequest()`

```
var _this = this;
setTimeout(function(){ _this.ajaxRequest(); },4000); 
```

# python - 如何获得元素总和较高的列表

> ID：14262112
> 
> 赞同：2
> 
> 时间：2013-01-10T16:06:20.113
> 
> 标签：python

我想知道是否有人可以帮助我解决我遇到的 Python 问题。我有四个列表，每个列表都包含浮点数（小数）。我正在添加每个列表包含的所有浮点数。我坚持的部分是我想知道四个列表中哪一个的总和更高。我知道我可以使用 if 语句，但有谁知道更有效的方法。例如：

```
foodmart = [12.33,5.55]
nike = [42.20,69.99]
gas_station = [0.89,45.22]
toy_store = [10.99,15.32] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T16:09:21.467

使用`max()`：

```
>>> max(foodmart,nike,gas_station,toy_store, key=sum)
>>> [42.2, 69.99] 
```

`help()`上`max`：

> 最大值（可迭代 [，键 = 函数]）-> 值
> 
> max(a, b, c, ...[, key=func]) -> 值
> 
> 使用单个可迭代参数，返回其最大的项目。使用两个或更多参数，返回最大的参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T16:13:26.583

将列表表示为 a`dict`并`max`与可选`key`函数一起使用来计算`sum`

不要以您的方式表示列表，而是使用字典。确定正确的商店并处理任意数量的列表/商店会更容易，而无需在 max 例程中枚举它们。这将更加 Pythonic 和可维护

```
>>> shops = dict()
>>> shops['foodmart'] = [12.33,5.55]
>>> shops['nike'] = [42.20,69.99]
>>> shops['gas_station'] = [0.89,45.22]
>>> shops['toy_store'] = [10.99,15.32]
>>> max(shops, key = lambda k:sum(shops[k]))
'nike' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T16:08:51.840

```
>>> max([1,2],[3,4],[2,3], key=lambda x: sum(x))
[3, 4] 
```

# php - 这是验证会话的安全方法吗？

> ID：14262113
> 
> 赞同：3
> 
> 时间：2013-01-10T16:06:20.067
> 
> 标签：php, content-management-system

我正在为网站构建一个管理面板，我已经编写了身份验证代码，但我不确定它有多安全。

这不是登录脚本，但它会利用登录脚本设置的一些会话变量。

无论如何，就在这里，希望你能帮我检查一下（：

```
if (isset($_SESSION['logged_in'])) {    
//Prevent hijacking of the session
    $recreatesignature = $_SESSION['signature']; //signature (old)
    $recreatessalt = $_SESSION['salt']; //session salt (old)
    $useragent = $_SERVER['HTTP_USER_AGENT']; //useragent (new)
    $ip = $_SERVER['REMOTE_ADDR']; //ip (new)

    $signature = $salt.sha1($ip.$recreatessalt.$useragent); //signature (hash)

    //Compare signatures
    if (!($recreatesignature==$signature)) {
        header(sprintf("Location: %s", $domain));   
        exit();
    }

//Session timeout
    if ((isset($_SESSION['LAST_ACTIVITY']) && (time() - $_SESSION['LAST_ACTIVITY'] >     $sessiontimeout)))  {
        //destroy session
        session_destroy();   
        session_unset();  
        //redirect to home page
        header(sprintf("Location: %s", $domain));
    }
    $_SESSION['LAST_ACTIVITY'] = time(); 

//Generate new session id to make hijacking harder
    session_regenerate_id(TRUE);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:45:03.740

看起来还不错。但是用户代理和 IP 很容易被欺骗，所以就签名而言，一切都只剩下盐了。我会推荐一个相当大的盐。正如其他人所指出的那样，必须使用 HTTPS - 然后您还需要确保所使用的证书没有被泄露（这显然[太容易了](http://www.youtube.com/watch?v=Z7Wl2FW2TcA)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:30:39.077

看起来很完美，但它需要 https 来防止数据包嗅探以实现完全“安全”

至于 Adder 对其 IP 的前两个子网的想法，如果数据高度敏感，您可以考虑做一个基本的 geo2ip 以进一步验证。

# javascript - document.body.style.margin 移除元素

> ID：14262114
> 
> 赞同：0
> 
> 时间：2013-01-10T16:06:22.000
> 
> 标签：javascript, html, css

我在玩一些 JS，想知道为什么在我的身体边缘添加样式时，我的其他元素会消失？

```
window.onload = function() {

with(document.body.style) {
  margin = "0px 0px 0px 0px";
}

var header = document.createElement('header');

with(header.style) {
  height = '2px';
  marginBottom = '30px';
  backgroundColor = '#333';
  width = '100%';
  margin = '0';
  padding = '0';
}

document.body.appendChild(header);

var h1 = document.createElement('h1');
var name = document.createTextNode("Header1");
h1.appendChild(name);

document.body.appendChild(h1);

} 
```

我正在尝试做的是从应用于任何元素的边距和填充中删除。在 CSS 中我会这样做：

```
* { margin: 0; padding: 0; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:19:25.797

我已经删除了 with() 并直接引用了样式属性，这解决了问题并且样式现在可以正确应用。

# php - 传递具有多个值的会话

> ID：14262117
> 
> 赞同：0
> 
> 时间：2013-01-10T16:06:42.043
> 
> 标签：php, mysql

我有 3 个文件，maintransaction.php、computation.php 和 computepayment.php

在maintransaction中，它列出了复选框中的所有程序和价格。提交后，重定向到计算检查的程序。

计算.php

```
foreach($ercharge as $charge) {
        $p = explode(",", $charge);
        $price[] = $p[0];            //stores the price of the $charge in $price array
        $procedure[] = $p[1];     // stores the procedure of the $charge in $procedure array 
```

我将其添加到我的第二个文件中以获取程序和价格。它在 foreach 中，这样当用户选择多个值时，它将把它存储在一个数组中。当用户在复选框中选择多个时，这就是棘手的部分。

我还添加了这个来测试多个选择的程序是否通过

```
foreach ($procedure as $pro) {
$_SESSION['receipt'] = $pro;
echo $_SESSION['receipt'];
} 
```

它工作正常。所有程序都在打印出来的地方检查。

单击另一个按钮后，重定向到 computepayment.php，您可以在其中输入要支付的金额。我将此添加到文件中：

```
print_r($_SESSION['receipt']); 
```

它只显示一个值。不是所有的值都被检查。我从computation.php 复制了foreach 格式，正如我猜到的那样，它不起作用，因为它无法识别变量$procedure。

如何将第二个文件中的相同值输出到第三个文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:09:18.827

您需要在 $_SESSION['receipt'] 中设置会话值。你这样做的方式，你只是在每次迭代中覆盖，下面的代码将它添加到数组中。

```
$_SESSION['receipt'] = array();
foreach ($procedure as $pro) {
    $_SESSION['receipt'][] = $pro;
} 
```

# glassfish - FileNotFoundException 安装 Glassfish

> ID：14262127
> 
> 赞同：1
> 
> 时间：2013-01-10T16:06:57.713
> 
> 标签：glassfish

我正在安装 glassfish v2，但是当安装程序解压缩 jar 文件时，命令提示符上会出现以下错误消息：

```
C:\Program Files>java -Xmx256m -jar glassfish-installer-v2ur2-b04-windows.jar<br>
glassfish<br>
glassfish\bin <br>
glassfish\docs <br>
glassfish\docs\css <br>
glassfish\docs\figures <br>
glassfish\docs\graphics <br>
glassfish\imq <br>
glassfish\imq\bin <br>
glassfish\imq\demo <br>
glassfish\imq\demo\applications <br>
glassfish\imq\demo\applications\mqapplet <br>
.<br>
.<br>
.<br>
.<br>
Exception in thread "main" java.io.FileNotFoundException: glassfish\bin\cliutil. <br>
dll (Access is denied) <br>
        at java.io.FileOutputStream.open(Native Method) <br>
        at java.io.FileOutputStream.<init>(Unknown Source) <br>
        at java.io.FileOutputStream.<init>(Unknown Source) <br>
        at org.jvnet.poormans_installer.Main.install(Main.java:120) <br>
        at org.jvnet.poormans_installer.Main.main(Main.java:69) <br> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:11:29.943

检查您的用户帐户是否具有管理员权限

# linux - 如果行以另一个字符串开头，则替换文件中的字符串

> ID：14262138
> 
> 赞同：20
> 
> 时间：2013-01-10T16:07:19.257
> 
> 标签：linux, bash, scripting, sed

如果行以使用 sed 的另一个字符串开头，如何替换文件中的字符串？

例如，替换这一行：

```
connection = sqlite://keystone:[YOURPASSWORD]@[YOURIP]/keystone 
```

有了这条线：

```
connection = mysql://keystone:password@10.1.1.10/keystone 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-10T16:15:36.037

回答：

```
sed '/^start_string/s/search_string/replace_string/' 
```

[http://www.gnu.org/software/sed/manual/sed.html#Addresses](http://www.gnu.org/software/sed/manual/sed.html#Addresses)上的信息

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T16:19:18.603

你可以这样做：

```
sed -ri 's/sqlite/mysql/g' YOURFILE 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-12-31T07:06:24.957

如果要更改以模式开头并以其他内容结尾的整行，可以使用命令`c` [描述](https://www.gnu.org/software/sed/manual/sed.html#sed-commands-list)示例

```
sed -i '/^connection = sqlite/c\connection = mysql://keystone:password@10.1.1.10/keystone' your_file 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-10T16:15:56.833

```
sed '/^string1/ { s,string2,string3, }' file 
```

这将在所有以 string1 开头的行上用 string3 替换 string2。

# wpf - WPF，显示 Emgu 图像，使用绑定

> ID：14262143
> 
> 赞同：0
> 
> 时间：2013-01-10T16:07:30.093
> 
> 标签：wpf, design-patterns, binding, emgucv

当所有源代码都在 MainWindow.xaml.cs 代码隐藏中时，我熟悉在 WPF 图像框中显示 Emgu 图像的基本代码。

但是，我正在尝试将与 Emgu 相关的代码（包括“ProcessFrame”事件/Queryframe 片段）放入单独的静态方法类中，以便以后可以重用它们。我这样做是因为虽然我希望能够在稍后阶段从同一个相机抓取图像，但我也希望能够灵活地在不同的图像框中显示这些图像。我在这一步遇到问题。

如果我可以将图像框动态绑定到静态方法中的属性（并以编程方式启用/禁用该绑定），我认为这将解决我的问题。但是，我尝试采用的方法可能存在其他问题。非常感谢任何代码/xaml 修改。

以下代码有效，但不能令人满意，因为它迫使我将 ProcessFrame 方法捆绑到 MainWindow 代码中：

XAML（工作）：

```
<Window x:Class="EmguWPF_Test.MainWindow"
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     Title="MainWindow" Height="350" Width="525">
     <Grid>
       <Image Height="215" HorizontalAlignment="Left" Margin="62,66,0,0" Name="image1" Stretch="Fill" VerticalAlignment="Top" Width="224"  />
     </Grid>
</Window> 
```

MainWindow 代码片段（工作）：

```
//using statements etc
public partial class MainWindow : Window
{
private Image<Bgr, Byte> image; 
private Capture capture = null;

private void button1_Click(object sender, RoutedEventArgs e)
{
    InitializeCameras();
    timer = new DispatcherTimer();
    timer.Tick+=new EventHandler(ProcessFrame);
    timer.Interval = new TimeSpan(0, 0, 0, 0, 10);
    timer.Start();            
}

private void InitializeCameras()
    {
        if (capture == null)
        {
            try
            {
                capture = new Capture(0);
            }
            catch // etc 
        }
    }

private void ProcessFrame(object sender, EventArgs arg)
    {
        image = capture.QueryFrame();
        image1.Source = BitmapSourceConvert.ToBitmapSource(image);
    }
}

public static class BitmapSourceConvert
{
   [DllImport("gdi32")]
    private static extern int DeleteObject(IntPtr o);

    public static BitmapSource ToBitmapSource(IImage image)
    {
        using (System.Drawing.Bitmap source = image.Bitmap)
        {
            IntPtr ptr = source.GetHbitmap(); //obtain the Hbitmap

            BitmapSource bs = System.Windows.Interop.Imaging.CreateBitmapSourceFromHBitmap(
                ptr,
                IntPtr.Zero,
                Int32Rect.Empty,
                System.Windows.Media.Imaging.BitmapSizeOptions.FromEmptyOptions());

            DeleteObject(ptr); //release the HBitmap
            return bs;
        }
    }
} 
```

以下代码是我要做但需要帮助的地方：

XAML（与以前相同）

```
<Window x:Class="EmguWPF_Test.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">

<Grid>
    <Image Height="215" HorizontalAlignment="Left" Margin="62,66,0,0" Name="image1" Stretch="Fill" VerticalAlignment="Top" Width="224"  />
</Grid>
</Window> 
```

ViewModel Snippet（是的 - 可能过于雄心勃勃而无法尝试设计模式）：

```
public ViewModel()
    {    
        CaptureMethods.InitializeCameras();
        timer = new DispatcherTimer();
        timer.Tick += new EventHandler(CaptureMethods.ProcessFrame);
        timer.Interval = new TimeSpan(0, 0, 0, 0, 10);
        timer.Start(); 
    } 
```

CaptureMethods 类，没有按照我想要的方式作为一个单独的类工作。您会注意到我现在在此类中定义捕获字段，而不是在 ViewModel 类中：

```
class CaptureMethods
{
    private static Capture capture = null;

    public static void InitializeCameras()
    {
        if (capture == null)
        {
            try
            {
                capture = new Capture(0);
            }
            catch // etc 
        }
    }

public static void ProcessFrame(object sender, EventArgs arg)
    {
        image = capture.QueryFrame();
        image1.Source = BitmapSourceConvert.ToBitmapSource(image); // this is my problem line
    }
}

// BitmapSourceConvert class not repeated here to avoid duplication. 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-12T15:33:59.197

在这里扩展一下[celsoap7 的答案](https://stackoverflow.com/a/16297523/575530)是生成的 XAML 可能的样子：

```
<Window x:Class="WPFEmguCV.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:emui="clr-namespace:Emgu.CV.UI;assembly=Emgu.CV.UI"
        Title="MainWindow" Height="521" Width="1274">
    <Grid>
        <WindowsFormsHost>
            <emui:ImageBox x:Name="CapturedImageBox" Width="409" Height="353" />
        </WindowsFormsHost>
    </Grid>
</Window> 
```

我（[和其他人](http://www.emgu.com/forum/viewtopic.php?f=7&t=1836)）发现将图像编组到 UI 线程上会占用过多的 CPU，因此最好按照[celsoap7 的建议](https://stackoverflow.com/a/16297523/575530)将 EmguCV`ImageBox`放入 WPF`WindowsFormsHost`中。

可悲的是，这可能会使您询问的那种 MVVM 绑定与您设想的结构完全不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-30T10:20:43.770

我的建议是不要使用 WPF Image Box，而是使用 Emgu 的 ImageBox (Emgu.CV.UI.ImageBox)。它是一个更完整的控件，旨在与框架一起使用。

唯一的问题是该类型的控件仅适用于 Windows 窗体，但您始终可以使用 Emgu 的图像框创建一个 WinForms 用户控件，并在 WindowsFormsHost 内的 WPF 中使用它。

# php - 我可以在 JavaScript 中使用 PHP 值吗？

> ID：14262145
> 
> 赞同：0
> 
> 时间：2013-01-10T16:07:39.270
> 
> 标签：php, javascript, jquery, ajax

我在下面使用一个简单的 Jquery 代码来调用 PHP 页面并将按钮信息返回到 div 中：

```
<head>
<script>
  $(document).ready(function(){
    $('#myButtons input:radio').change(function() {
      var buttonValue = $("#myButtons input:radio:checked").val();
        $("#myDiv").load('myPHPfile.php', {selectedButtonValue : buttonValue});
    });
  });
</script>
</head>

<body>
  <div id="myButtons">
    <input type="radio" name="category" value="10" />ButtonA 
    <input type="radio" name="category" value="20" />ButtonB
  </div>
  <div id="myDiv">Click the button to load results</div>
</body> 
```

我的PHP文件.php

```
<?php 
  if( $_REQUEST["selectedButtonValue"] )
  {
     $buttonPHP = $_REQUEST['selectedButtonValue'];
     echo "Value button is ". $buttonPHP;
  }
?> 
```

如何在 JavaScript 中获取 PHP 信息，如下：

```
alert(<?php echo('buttonPHP'); ?>); 
```

注意：以下代码显示了警告框消息，但我无法使用它，因为我需要 $buttonPHP 值：

```
$("#myDiv").load('myPHPfile.php', {selectedButtonValue : buttonValue}, function(data){ alert(data); }); 
```

我已经`$_SESSION`在 myPHPfile.php 以及所有 jQuery AJAX 函数中尝试过： `load()`,和方法`get()`，它们都没有在 JavaScript 中给出 PHP 值。`post()``ajax()`

我翻遍了所有地方，但找不到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:12:22.407

你会更好的`$.ajax`请求。不要回显“按钮的值是”部分，只回显实际值。例如：

```
$.ajax({
  url: "myPHPfile.php",
  context: document.body
 }).done(function(data) {
   var buttonValue = data;
   // Whatever you want to do with the data goes here.
 }); 
```

请参阅 jQuery 文档[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

或者，如果您使用 PHP 生成页面，只需将 PHP 变量回显到 JavaScript

```
<script>
 ...
    var buttonValue = "<?php echo $buttonPHP; ?>";
 ...
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:18:10.577

用 JSON 编码而不是尝试回显数据：

```
<?php 
  if( $_GET["selectedButtonValue"] )
  {
     $buttonPHP = $_GET['selectedButtonValue'];
     header('Content-Type: application/json');
      echo json_encode($buttonPHP);

  }
?> 
```

然后使用 jquery get json 抓取数据

```
$.get('myPHPfile.php?selectedButtonValue='+buttonvalue, function(data){
                    console.log(data);

                }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:11:34.260

尝试：

```
alert('<?php echo $buttonPHP; ?>'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T16:25:30.590

作为临时解决方案，您可以快速将两者合并到如下脏代码中：

索引.php：

```
<?php 

  $buttonPHP = "10"; //Set up your default button variable

  if( $_REQUEST["selectedButtonValue"] == 10 )
  {
     echo "Selected button value: 10";  //You can also print $_REQUEST["selectedButtonValue"] here directly, but what's the point if you can select it from DOM through jQuery?
     exit;
  } else if ($_REQUEST["selectedButtonValue"] == 20) {
     echo "Selected button value: 20";
     exit;
  }
?>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
  var buttonValue = <?php echo $buttonPHP ?>;  //Duplicate default value from PHP to JS
  $(document).ready(function(){
    $('#myButtons input:radio').change(function() {
      var buttonValue = $("#myButtons input:radio:checked").val();
        $("#myDiv").load('index.php', {selectedButtonValue : buttonValue});
    });
  });
</script>
</head>

<body>
  <div id="myButtons">
    <input type="radio" name="category" value="10" />ButtonA 
    <input type="radio" name="category" value="20" />ButtonB
  </div>
  <div id="myDiv">Click the button to load results</div>
</body>
</html> 
```

index.php 在浏览器中呈现：

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
  var buttonValue = 10;  //Duplicate default value from PHP to JS
  $(document).ready(function(){
    $('#myButtons input:radio').change(function() {
      var buttonValue = $("#myButtons input:radio:checked").val();
        $("#myDiv").load('index.php', {selectedButtonValue : buttonValue});
    });
  });
</script>
</head>

<body>
  <div id="myButtons">
    <input type="radio" name="category" value="10" />ButtonA 
    <input type="radio" name="category" value="20" />ButtonB
  </div>
  <div id="myDiv">Click the button to load results</div>
</body>
</html> 
```

**编辑：存储会话**

```
<?php 

  session_start();

  if (isset($_REQUEST['selectedButtonValue'])) {
      $_SESSION['selectedButtonValue'] = $_REQUEST['selectedButtonValue'];
      echo $_REQUEST['selectedButtonValue'];
      exit;
  } else if (!isset($_SESSION['selectedButtonValue'])) {
      $_SESSION['selectedButtonValue'] = 10;
  }

?>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
  var buttonValue = <?php echo $_SESSION['selectedButtonValue']; //Get input value from session ?>;
  $(document).ready(function(){
    $('#myButtons input:radio').change(function() {
      var buttonValue = $("#myButtons input:radio:checked").val();
        $("#myDiv").load('index.php', {selectedButtonValue : buttonValue});
    });
  });
</script>
</head>

<body>
  <div id="myButtons">
    <input type="radio" name="category" value="10" />ButtonA 
    <input type="radio" name="category" value="20" />ButtonB
  </div>
  <div id="myDiv"><?php echo $_SESSION['selectedButtonValue']; //Get input value from session ?></div>
</body>
</html> 
```

还要确保过滤 $_REQUEST 变量，因为到目前为止，它会打印任何内容。有关详细信息，请参阅[http://en.wikipedia.org/wiki/Cross-site_scripting](http://en.wikipedia.org/wiki/Cross-site_scripting)。

# schema - 如何在 Mongoose 中扩展 Schema？

> ID：14262154
> 
> 赞同：1
> 
> 时间：2013-01-10T16:08:15.227
> 
> 标签：schema, mongoose

我想给 Schema 类添加一个静态方法，不改变主 Schema 类怎么办？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T06:57:03.543

这是[网站](http://mongoosejs.com/docs/guide.html)记录它的方式：

```
// assign a function to the "statics" object of our animalSchema
 animalSchema.statics.findByName = function (name, cb) {
 this.find({ name: new RegExp(name, 'i') }, cb);
} 
```

# asp.net-mvc - 为什么模型绑定器在 POST 后无法恢复抽象类？

> ID：14262157
> 
> 赞同：1
> 
> 时间：2013-01-10T16:08:27.130
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我开始使用 MVC 在 ASP.NET 上工作。我写了行动结果，其中一个是 HTTP GET，另一个是 HTTP POST

```
 [HttpGet]
    public ActionResult DoTest()
    {
        Worksheet worksheets = new worksheets(..);
        return View(w);
    }

    [HttpPost]
    public ActionResult DoTest(Worksheet worksheet)
    {
        return PartialView("_Problems", worksheet);
    } 
```

![在此处输入图像描述](../Images/4ed3010a0da468d20d71c9abf6f43d5b.png)

现在，Worksheet 类有一个名为的属性`Problems`，这是一个集合，但用作抽象类项。

```
public class Worksheet
{
    public List<Problem> Problems { get; set; }
} 
```

这是我的抽象类和一个实现

```
public abstract class Problem
{
    public Problem() { }

    public int Id { get; set; }
    public abstract bool IsComplete { get; }

    protected abstract bool CheckResponse();
}

public class Problem1 : Problem
{
    ...
    public decimal CorrectResult { get; set; }

    // this is the only property of my implementation class which I need
    public decimal? Result { get; set;}

    public override bool IsComplete
    {
        get { return Result.HasValue; }
    }

    protected override bool CheckResponse()
    {
        return this.CorrectResult.Equals(this.Result.Value);
    }
} 
```

我现在有很多问题类的实现，但我真的只需要获得我的实现类的一个值。但它抛出了上述图像错误。

我该怎么做才能让模型绑定器恢复我的抽象类的那一部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:10:14.820

以下代码无法编译：

```
var problem = new Problem(); 
```

...因为`Problem`类是抽象的。MVC 引擎不能直接创建一个`Problem`。除非你给它一些方法来知道`Problem`要实例化哪种类型，否则它无能为力。

可以创建自己的 ModelBinder 实现，并告诉 MVC 使用它。例如，您的实现可以绑定到依赖注入框架，以便它知道在请求类`Problem1`时创建一个。`Problem`

或者您可以简单地更改您的操作方法以采用具体类型：

```
public ActionResult DoTest(IEnumerable<Problem1> problems)
{
    return PartialView("_Problems", 
                       new Worksheet {
                          Problems = problems.Cast<Problem>().ToList()
                       });
} 
```

# java - 当我按下回车按钮时，如何使用在 java swing 文本框中输入的文本从 mysql 中检索数据？

> ID：14262164
> 
> 赞同：-1
> 
> 时间：2013-01-10T16:08:44.113
> 
> 标签：java, swing, jdbc, applet

![在此处输入图像描述](../Images/aeb943f456165f9d92c0592b6c29cbf2.png)以下是我的 Java Swing 小程序代码，其中我的第一个字段为`employee code`and `text box for entering employee code`，我想在敲击键盘后输入时从 MySql 数据库中检索员工的`employee code`数据`text box`，`Enter key`并在相应的`text boxes`and中设置检索数据`combo boxes`。同样将它作为小程序嵌入到 JSP 中。

请帮忙。

这是我的代码：

```
import javax.swing.*;
import java.applet.*;
import java.awt.*;

public class App extends JApplet{

public void start()
{
JFrame frame = new JFrame("Form");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setResizable(false);
JPanel panel = new JPanel();

JLabel label1 = new JLabel("");
JTextField field = new JTextField(20);
JButton but_per = new JButton("Personalize");
//JButton button2 = new JButton("Cancel");
Container c;
c=frame.getContentPane();
c.setLayout(null);
JLabel name=new JLabel("Name :");
JLabel compcode=new JLabel("Company Code :");
JLabel cardno=new JLabel("Card Number: ");
JLabel cardtype=new JLabel("Card Type :");
JLabel pin=new JLabel("Pin :");
JLabel bldgrp=new JLabel("Blood Group :");
JLabel empcode=new JLabel("Employee Code :");
JLabel dob=new JLabel("DOB :");
JLabel valupto=new JLabel("Valid Upto :");
JLabel jdate=new JLabel("Joining Date :");
JLabel dept=new JLabel("Department :");
JLabel uid=new JLabel("UID :");
String data []={"A","AB","B","B +","A +","O +","O -"};
JTextField nametxt=new JTextField(10);
JComboBox compcodetxt=new JComboBox();
JTextField cardnumtxt=new JTextField(10);
JTextField cardtypetxt=new JTextField(10);
JTextField pintxt=new JTextField(10);
JComboBox bldgrptxt=new JComboBox(data);
bldgrptxt.setSelectedIndex(5);
JTextField empcodetxt=new JTextField(10);
JTextField dobtxt=new JTextField(10);
JTextField valuptotxt=new JTextField(10);
JTextField jdatetxt=new JTextField(10);
JTextField depttxt=new JTextField(10);
JTextField uidtxt=new JTextField(10);

empcode.setBounds(10, 10, 100, 25);
empcodetxt.setBounds(110, 10, 100, 25);
name.setBounds(10, 40, 100, 25);
nametxt.setBounds(110, 40, 100, 25);
compcode.setBounds(10, 70, 100, 25);
compcodetxt.setBounds(110, 70, 100, 25);
cardno.setBounds(10, 100, 100, 25);
cardnumtxt.setBounds(110, 100, 100, 25);
//pin.setBounds(10, 110, 100, 25);
//pintxt.setBounds(110, 110, 100, 25);
bldgrp.setBounds(10, 130, 100, 25);
bldgrptxt.setBounds(110, 130, 100, 25);
dob.setBounds(10, 160, 100, 25);
dobtxt.setBounds(110, 160, 100, 25);
valupto.setBounds(10, 190, 100, 25);
valuptotxt.setBounds(110, 190, 100, 25);
jdate.setBounds(10, 220, 100, 25);
jdatetxt.setBounds(110, 220, 100, 25);
dept.setBounds(10, 250, 100, 25);
depttxt.setBounds(110, 250, 100, 25);
uid.setBounds(10, 280, 100, 25);
uidtxt.setBounds(110, 280, 100, 25);

but_per.setBounds(10, 340, 120, 25);
//button2.setBounds(10, 70, 75, 25);

c.add(name); c.add(nametxt);
c.add(compcode); c.add(compcodetxt);
c.add(cardno); c.add(cardnumtxt);
c.add(pin); c.add(pintxt);
c.add(bldgrp); c.add(bldgrptxt);
c.add(empcode); c.add(empcodetxt);
c.add(dob); c.add(dobtxt);
c.add(valupto); c.add(valuptotxt);
c.add(jdate); c.add(jdatetxt);
c.add(dept); c.add(depttxt);
c.add(uid); c.add(uidtxt);
c.add(but_per);

//panel.add(button1);
//panel.add(button2);
//frame.add(panel);
frame.setSize(350,400);
//frame.pack();
frame.setVisible(true);
}

public void stop(){}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:08:11.577

等待！你还没有实现`ActionListener`！

请执行下列操作：

```
 but_per.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent ae) {
            /// write your code here!
          String a= field.getText();
           System.out.print(a);
         ///or DB code
        }
        }); 
```

如果您不熟悉，这里有一个[链接](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)`Action Listener`

**更新：**

如果要在按键后进行所有处理，则必须实现键盘事件，您可以[在此处找到教程链接](http://math.hws.edu/eck/cs124/javanotes4/c6/s5.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T03:45:46.810

这个源代码是我可以生成的最接近您的代码的可行版本，但它仍然存在许多严重的问题。

*   使用`start()`方法不正确。每次浏览器从最小化状态恢复时都会调用该方法。
*   使用`null`布局和`setBounds()`.
*   自由浮动的非模态 GUI 元素会导致焦点问题。

话虽如此，在员工代码字段中输入一个数字，然后按 Enter 键以查看类似（屏幕截图垂直缩短）..

![<code>JFrame</code> 和 <code>JOptionPane</code>](../Images/07e552f1d0a23b94efde8a951bcbc867.png)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

/* <applet code=App width=400 height=600></applet> */
public class App extends JApplet {

    public void start() {
        final JFrame frame = new JFrame("Form");

        ActionListener doDB = new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                JOptionPane.showMessageDialog(frame, "Query the DB off the EDT!");
            }
        };

        // This cannot be done in a sand-boxed applet
        //frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        // hides the bottom field..
        //frame.setResizable(false);
        JPanel panel = new JPanel();

        JLabel label1 = new JLabel("");
        JTextField field = new JTextField(20);
        JButton but_per = new JButton("Personalize");

        Container c;
        c = frame.getContentPane();
        c.setLayout(null);
        JLabel name = new JLabel("Name :");
        JLabel compcode = new JLabel("Company Code :");
        JLabel cardno = new JLabel("Card Number: ");
        JLabel cardtype = new JLabel("Card Type :");
        JLabel pin = new JLabel("Pin :");
        JLabel bldgrp = new JLabel("Blood Group :");
        JLabel empcode = new JLabel("Employee Code :");
        JLabel dob = new JLabel("DOB :");
        JLabel valupto = new JLabel("Valid Upto :");
        JLabel jdate = new JLabel("Joining Date :");
        JLabel dept = new JLabel("Department :");
        JLabel uid = new JLabel("UID :");
        String data[] = {"A", "AB", "B", "B +", "A +", "O +", "O -"};
        JTextField nametxt = new JTextField(10);
        JComboBox compcodetxt = new JComboBox();
        JTextField cardnumtxt = new JTextField(10);
        JTextField cardtypetxt = new JTextField(10);
        JTextField pintxt = new JTextField(10);
        JComboBox bldgrptxt = new JComboBox(data);
        bldgrptxt.setSelectedIndex(5);
        JTextField empcodetxt = new JTextField(10);
        empcodetxt.addActionListener(doDB);
        JTextField dobtxt = new JTextField(10);
        JTextField valuptotxt = new JTextField(10);
        JTextField jdatetxt = new JTextField(10);
        JTextField depttxt = new JTextField(10);
        JTextField uidtxt = new JTextField(10);

        empcode.setBounds(10, 10, 100, 25);
        empcodetxt.setBounds(110, 10, 100, 25);
        name.setBounds(10, 40, 100, 25);
        nametxt.setBounds(110, 40, 100, 25);
        compcode.setBounds(10, 70, 100, 25);
        compcodetxt.setBounds(110, 70, 100, 25);
        cardno.setBounds(10, 100, 100, 25);
        cardnumtxt.setBounds(110, 100, 100, 25);
        bldgrp.setBounds(10, 130, 100, 25);
        bldgrptxt.setBounds(110, 130, 100, 25);
        dob.setBounds(10, 160, 100, 25);
        dobtxt.setBounds(110, 160, 100, 25);
        valupto.setBounds(10, 190, 100, 25);
        valuptotxt.setBounds(110, 190, 100, 25);
        jdate.setBounds(10, 220, 100, 25);
        jdatetxt.setBounds(110, 220, 100, 25);
        dept.setBounds(10, 250, 100, 25);
        depttxt.setBounds(110, 250, 100, 25);
        uid.setBounds(10, 280, 100, 25);
        uidtxt.setBounds(110, 280, 100, 25);

        but_per.setBounds(10, 340, 120, 25);

        c.add(name);
        c.add(nametxt);
        c.add(compcode);
        c.add(compcodetxt);
        c.add(cardno);
        c.add(cardnumtxt);
        c.add(pin);
        c.add(pintxt);
        c.add(bldgrp);
        c.add(bldgrptxt);
        c.add(empcode);
        c.add(empcodetxt);
        c.add(dob);
        c.add(dobtxt);
        c.add(valupto);
        c.add(valuptotxt);
        c.add(jdate);
        c.add(jdatetxt);
        c.add(dept);
        c.add(depttxt);
        c.add(uid);
        c.add(uidtxt);
        c.add(but_per);

        frame.setSize(350, 400);
        frame.setVisible(true);
    }

    public void stop() {
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:18:56.790

在你`ActionListener`的那个按钮中使用检索文本字段的文本，`textfield.getText()`然后使用这个值来查询数据库。我假设您非常了解如何查询数据库。

# jquery - blueimp 的引导图像库：如何禁用轮子处理程序和键盘处理程序

> ID：14262165
> 
> 赞同：2
> 
> 时间：2013-01-10T16:08:48.423
> 
> 标签：jquery, ruby-on-rails, twitter-bootstrap

如何禁用当前将模态库导航到下一个图像的鼠标滚轮处理程序和键盘箭头键？

这是演示站点：[http](http://blueimp.github.com/Bootstrap-Image-Gallery/) ://blueimp.github.com/Bootstrap-Image-Gallery/ 。

如果您单击其中一个图像，则会弹出一个模式，并且如果您使用鼠标向下滚动或按箭头键，它将转到下一个图像。我希望用户只能单击实际的导航按钮，并防止向下滚动模式以查看更多内容的任何意外，而是在意外时转到下一个图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:25:07.667

我能想到的最简单的方法是，如果您自己托管代码 - 处理程序是 bootstrap-image-gallery.js：

*   第 235 行的 keyHandler

*   第 249 行的 wheelHandler

那些只做 prev() 和 next() 所以如果你不想要那个功能你可以把它注释掉我猜......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T03:34:41.637

取消绑定由 Bootstrap Image Gallery 创建的 mousewheel 和 keydown 事件处理程序

```
$(function() { 
  $('#modal-gallery').on('beforeLoad', function() {
    $(document)
      .off('mousewheel.modal-gallery')
      .off('DOMMouseScroll.modal-gallery')
      .off('keydown.modal-gallery');
    });
}); 
```

# fortran - 从多个公共块fortran 77制作多个模块

> ID：14262169
> 
> 赞同：4
> 
> 时间：2013-01-10T16:08:56.830
> 
> 标签：fortran, gfortran, fortran77, fortran-common-block

目前在我的程序中，我有几个公共块分布在几个子程序和函数中。当我向其中添加变量时，我有时会忘记更改公共块的所有实例。我想将这些公共块制作成模块，这样我就可以在一个地方向模块添加和删除变量，而不必担心在我的子程序中更新模块的所有实例。

我是否需要在初始化模块中的变量的程序中包含“使用”语句，或者我是否需要在模块中包含程序？我通常会为此使用通用块，但我正在尝试实现模块，因为我认为随着复杂性的增加，它们将帮助我的代码保持可读性。

注意：模块中变量的某些值需要能够在它们从一个程序传递到另一个程序时进行更改。

我试图编写一个简化的测试程序来熟悉模块，但无法让它工作。我熟悉 fortran 77，但以前从未使用过模块。我感谢任何帮助或建议。

我正在使用 gfortran 4.6.1

主文件

```
program main
use Words
use Vals
double precision x,y,z
character*5 Greet
integer i

Greet = 'Hello'
x = 4.1
y = 5.2
z = 10.0
i = 3

call foo ()

end program main

subroutine foo ()
use Words
use Vals

print *, Greet

z = x + y
print *, z

print *, i

end subroutine

module Words
character*5 Greet
save
end module

module Vals
double precision x,y
integer int
save
end module 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T16:54:53.603

您只需要一个模块实例。`use`你让任何使用它和语句的主程序或过程（子程序或函数）都知道它。如果您有一个设置值的子例程，那么与其他任何例程一样，它必须有一个`use`语句。如果要设置初始值，您可以在声明中这样做。如果模块被主程序使用，那么它将始终在范围内，并且变量的值将在整个程序运行期间保持不变。如果模块仅由过程使用，原则上，当调用链中没有这些过程时，模块将超出范围，并且允许编译器忘记模块变量的值。（任何 Fortran 编译器实际上都这样做是值得怀疑的。）这可以通过用 . 声明每个变量来防止`SAVE`。 `SAVE`如果您使用初始值声明变量，则为隐式。

通常，您必须在使用模块之前先编译模块，以便编译器在遇到 use 语句时“知道”它们。这可以通过将它们放在文件中的第一位或先编译它们的文件来完成。这是您重新排序的示例：

```
module Words
character*5 Greet
save
end module

module Vals
double precision x,y
integer i
save
end module

module my_subs

contains

subroutine foo ()
use Words
use Vals
double precision :: z

print *, Greet

z = x + y
print *, z

print *, i

end subroutine

end module my_subs

program main
use Words
use Vals
use my_subs

Greet = 'Hello'
x = 4.1
y = 5.2

i = 3

call foo ()

end program main 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:24:51.620

您的代码无法编译的原因有几个：

1.  你的模块位于你的主程序之后，这意味着当你在那里时`use`它们还没有被编译。要么将它们放在单独的文件中并在主程序之前编译它们，要么将它们放在主程序之前。

2.  您在主程序中从模块中重新声明变量，编译器会将其解释为名称冲突。所有具有该属性的模块变量`public`（这是默认值）都将在`use`模块所在的范围内可用；这称为“使用关联”。换句话说，`use vals`足以使`x`，`y`并且`int`可用。

此外，模块更像是单例对象，而不仅仅是数据容器。它们还可以包含在`contains`语句之后列出的过程，这有助于将变量和相关过程组合在一起。一个示例是将您的两个模块与 subroutine 一起分组为一个`foo`：

```
module vals
  implicit none

  double precision :: x = 4.1, y = 5.2
  integer :: i = 3
  character(5) :: greet = 'Hello'

contains
  subroutine foo()
    double precision :: z  ! New local variable

    print *, Greet

    z = x + y
    print *, z

    print *, i
  end subroutine
end module 
```

上面，我使用了“新”`::`双冒号运算符，它允许一次声明和初始化多个变量。由于模块变量已经被`save`隐式 'd 了，这很好。

或者，如果这些模块是分开的，您也可以`contains`在主程序（或任何子程序）中设置部分并将子程序放在那里。优点是以这种方式声明的过程总是具有显式接口，这极大地有利于编译器的错误诊断，甚至在某些较新的情况下也需要。这是 F90 的主要改进之一，因为 F77 只处理外部子程序和隐式接口。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-17T09:15:34.780

执行公共块的最简单方法是每个公共块有一个包含文件，并在包含文件中进行所有声明。这样，公共块只在一个地方声明。必须将代码转换为使用模块的问题然后神奇地消失了。

此外，如果您正在开始新代码，则在公共块变量的名称前加上与命名公共块相同的名称将使编码更容易。最初这是一种痛苦，多年来一直在编码的主要女主角将拒绝遵守。维护代码的人会发现它很容易：没有 greps 或 groks。只看名字，你就知道它来自哪个公共块。

与模块保持相同的约定也有帮助。如果所有的例程名和变量名都以模块名开头，那么只要看名字就知道它来自哪个模块。

# ios - NSCache - 标记对象不可移除

> ID：14262172
> 
> 赞同：1
> 
> 时间：2013-01-10T16:09:05.083
> 
> 标签：ios, objective-c, cocoa, memory-management, nscache

当用户通过菜单在视图控制器之间切换时，如果他有足够的内存，我想缓存它们。为了做到这一点，我想使用`NSCache`存储许多`UIViewControllers`.

但是，我不确定如何判断`NSCache`当前对象当前已被使用且不应被删除。例如，当我运行应用程序时，加载几个视图控制器并退出应用程序，`NSCache`自动删除所有应用程序`viewControllers`（这是有道理的 - 应用程序将能够在前台停留更长时间）。但是，它也会删除当前显示的视图控制器，这不是我想要的。

如何将特定对象标记为不可移除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:14:10.793

你可以这样做：

当应用程序进入后台时，缓存将被删除。因此，当应用程序进入后台时，将缓存中的数据存储到 {NSUserDefaults} 并且当应用程序 didBecomeActive 将值重新分配给缓存时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:27:45.503

缓存是一种关联内存：您无法强烈决定何时删除缓存项。相反，您可以更改缓存策略。

从文档中：

> 默认情况下，如果缓存中的 NSDiscardableContent 对象的内容被丢弃，则会自动从缓存中删除，尽管可以更改此自动删除策略。如果一个 NSDiscardableContent 对象被放入缓存，缓存会在它被移除时调用discardContentIfPossible。

# asp.net-mvc-3 - 将模型传递给视图时未加载视图

> ID：14262174
> 
> 赞同：0
> 
> 时间：2013-01-10T16:09:08.640
> 
> 标签：asp.net-mvc-3

我有一个 JQuery Mobile 应用程序，我正在尝试创建一个填充下拉列表的视图。我在控制器中创建模型的 IEnumerable 列表，然后将其传递给视图。该视图永远不会呈现，只是说“错误加载页面”（我假设来自 J-Query）。我什至在 Layout= 行的视图顶部放置了一个断点，但它没有到达那里。

这是我的控制器：

```
 public virtual ActionResult List()
    {
        string customerCode = RouteData.Values["id"].ToString();

        var csdDB = new DBContext(customerCode);

        // Return all locations
        IEnumerable<SelectListItem> sites = csdDB.Sites
                              .OrderBy(o => o.SiteName)
                              .AsEnumerable()
                              .Select(s => new SelectListItem
                              {
                                  Text = s.SiteName,
                                  Value = s.SiteID.ToString()
                              });

        return View(sites);
    } 
```

这是视图：

```
@{
ViewBag.Title = "Site";
Layout = "~/Views/Shared/_Layout.cshtml";
}

@model IEnumerable<Models.Site>

<div data-role="content">
    <ul data-role="listview" data-divider-theme="b" data-inset="true">
        <li data-role="list-divider" role="heading">
            Locations
        </li>
        @foreach(var site in Model)
        { 
        <li data-theme="c">
            <a href="~/Site/SiteMenu/@site.SiteID" data-transition="slide">
                @site.SiteName - (@site.ICAO)
            </a>
        </li>
       }
    </ul>
</div> 
```

此页面从前一页面调用，如下所示：

```
 <li data-theme="c">
            @Html.ActionLink("Sites by HTML.ActionLink", "List", "Site", new { id = @ViewBag.CustomerCode }, new
            {

                data_native_menu = "false",
                name = "",
                data_theme = "c"
            })
        </li> 
```

DBContext 是使用实体框架创建的，顺便说一句。我还检查以确保“站点”列表正在被填充，并且确实如此。

关于为什么视图没有加载的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:19:06.173

在您看来，您将模型定义为：

```
@model IEnumerable<Models.Site> 
```

但是在你的控制器中你返回

```
IEnumerable<SelectListItem> sites = ...
return View(sites); 
```

但`IEnumerable<SelectListItem>`并非`IEnumerable<Models.Site>`如此，它会引发异常，并且您会从 Jquery Mobile 获得错误。

要解决它，您需要`IEnumerable<Models.Site>`从您的操作中返回。只需删除整个`Select`部分，它应该可以工作：

```
IEnumerable<Site> sites = csdDB.Sites
                          .OrderBy(o => o.SiteName)
                          .AsEnumerable();
return View(sites); 
```

无论如何，将站点转换为没有任何意义，`SelectListItem`因为在您的视图中，您使用了类似`SiteName`并`ICAO`形成模型的属性。也许这是一个复制粘贴错误......

# ios - 从字符串格式化日期？

> ID：14262175
> 
> 赞同：0
> 
> 时间：2013-01-10T16:09:08.440
> 
> 标签：ios, objective-c, nsdate, nsdateformatter

我有值“01-10-2013 09:43:45”的 NSString * DateString

我想从中形成日期，我的代码是

```
 NSDateFormatter * DateFormatter = [[NSDateFormatter alloc]init];
            DateFormatter.dateFormat=@"MM-dd-yyyy HH:mm:ss";
            NSDate * Date =[DateFormatter dateFromString:DateString]; 
```

但是当我记录日期时，它的值是 2013-01-10 07:43:45 +0000 请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:17:16.503

您需要将 设置`NSDateFormatter`为正确的时区。

如果输入字符串是“本地时间”，那么使用这个：

```
NSDateFormatter *DateFormatter = [[NSDateFormatter alloc]init];
[DateFormatter setTimeZone:[NSTimeZone systemTimeZone]];   // <--- Set to local time
DateFormatter.dateFormat=@"MM-dd-yyyy HH:mm:ss";
NSDate * Date =[DateFormatter dateFromString:DateString]; 
```

如果输入字符串采用 UTC/GMT 格式，则改为使用此字符串：

```
NSDateFormatter *DateFormatter = [[NSDateFormatter alloc]init];
[DateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];   // <--- Set to UTC
DateFormatter.dateFormat=@"MM-dd-yyyy HH:mm:ss";
NSDate * Date =[DateFormatter dateFromString:DateString]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:04:34.440

尝试设置语言环境

```
...
[DateFormatter setLocale:[NSLocale currentLocale]];
... 
```

但是如果你想剪切“+0000”字符串，你可以使用

```
[s substringToIndex:s.length - 5]; 
```

# android - 如何向附近的人发送通知以下载我的应用程序？

> ID：14262188
> 
> 赞同：-5
> 
> 时间：2013-01-10T16:09:26.567
> 
> 标签：android

我正在为我的商店开发一个应用程序。

当他们进入我的商店下载我的应用程序时，我需要发送每个客户通知。

它可以通过 Wi-Fi、SMS 或蓝牙进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:14:10.267

你不能以任何方式以编程方式进行，因为它会干扰个人空间:) 你能做的最好的事情就是在墙上贴一张带有二维码的海报。

技术问题是，在每种情况下（Wi-Fi、蓝牙、SMS），客户都必须批准他想与您通信。（连接到网络、配对设备等）。您不能只向特定区域的所有设备发送信息。想想如果可以的话会发生什么：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:14:47.117

您将无法做到这一点。这有点像鸡和蛋的事情。

如果他们已经拥有您的应用程序，您可以轻松地向他们发送通知。但是由于他们没有安装您的应用程序，因此您无法与他们进行通信。

如果您可以向任何手机发送通知，这可能会被非常恶意地使用（就像每次我经过某个业务时，他们可能会向我的通知栏发送垃圾邮件，邀请下载应用程序）。

最重要的是，在他们安装您的应用程序之前，您将无法向任何人发送通知。我对此非常肯定。

这可能有第 3 方选项（可能与 UrbanAirship 相关？）。

# php - 使用 PHP 创建图形类

> ID：14262192
> 
> 赞同：0
> 
> 时间：2013-01-10T16:09:32.730
> 
> 标签：php, css, class, graph

我选择承担的部分学校编程项目需要根据用户数据使用 PHP 生成条形图。我的老师已经明确表示我不能使用开源课程或任何其他人的代码。他还禁止我使用 CSS 来显示图表，部分声称这是不可能的（我在网上看到过方法）。

我简要了解了一些流行的 PHP 图形类，例如 Jpchart 和 Pchart，它们看起来都相当复杂，有数万行代码。

当然，必须编写一个类来生成 jpeg 也必须相当复杂。

有没有人有任何建议，或者我应该放下脚告诉他这些期望是不现实的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:23:14.493

如果我们只是在谈论一个简单的条形图，他对 CSS 的看法是错误的，并且自 CSS 发明之日起就一直是错误的。`<div>`使用几个标签和少量 CSS创建条形图是微不足道的。

他可能正在寻找他理解的特定解决方案——也许是一个 HTML 表格？（我真的希望不要）或者使用 PHP 中的 GD 库生成图像。

如果我是你，我会选择一个不寻常的解决方案，比如 SVG。在 SVG 中生成图表，并将其输出到浏览器。符合他的标准，但没有使用他的任何“禁止”选项。（但请注意 - 在选择此选项之前，请确保您的老师使用支持 SVG [即比 IE8 更新] 的浏览器！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:18:16.057

禁止你使用 CSS 对他来说是个彻头彻尾的举动。如果不使用 GDlib 函数 [我假设这不是练习的重点]，您可以创建一个 1x2 单元格表并根据条形值设置单元格宽度，但如果*没有*CSS ，它会有点痛苦. 为避免引起 Dickbag 教授的愤怒，您将被困在为所有内容设置 HTML 属性。

您的讲师完全*错误**地***认为 CSS 无法实现这一点。

如果他只是一个愤怒的老胡须，他可能想要这样的东西：

```
Tom:   |****      | 43%
Dick:  |***       | 27%
Harry: |********  | 82% 
```

所以这就像回到 1981 年的一些 DEC PDP 一样。

## 编辑

由于您的讲师规定他需要图像形式的*图形*，因此您将需要使用[GD 库函数](http://php.net/manual/en/book.image.php)。文档页面中的示例代码[`imagefilledrectangle()`](http://php.net/manual/en/function.imagefilledrectangle.php)应该足以让您入门：

```
<?php
// Create a 55x30 image
$im = imagecreatetruecolor(55, 30);
$white = imagecolorallocate($im, 255, 255, 255);

// Draw a white rectangle
imagefilledrectangle($im, 4, 4, 50, 25, $white);

// Save the image
imagepng($im, './imagefilledrectangle.png');
imagedestroy($im); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:13:32.470

这并不难。查看php中的图像函数。[gd](http://php.net/manual/en/book.image.php)或[图像魔法](http://php.net/manual/en/book.imagick.php)。

尤其是[矩形](http://php.net/manual/en/function.imagefilledrectangle.php)功能对您来说会很有趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T16:23:57.087

一旦您将其分解为基本任务，这很简单。回想一下你最初在学校是如何教你做图表的：

*   你从图表的大小开始（即纸张大小）
*   你知道你需要画多少条，这样你就可以计算出每个条需要的空间
*   您知道数据中的最大值和最小值，因此很容易计算出比例

剩下的只是键和标题！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T16:19:53.003

通过 html/css 绘制图表是完全可能的。

假设您制作了条形图。首先计算 min + max 并定义两者的高度。之后，取所有其他值并确定它们的高度（最小值/最大值的某个百分比）。在那之后，你在我心中有两个选择。1，将您的html呈现为带有单元格的表格，并在给定高度/宽度的情况下明确表示。或使用 id 和类渲染一堆 div，然后动态创建您的 css（与样式属性内联或仅将 css 动态写入脚本标签）并在您的 css 中根据您之前决定的设置高度。

这是使用 D3js 库的[一些代码。](http://alignedleft.com/tutorials/d3/drawing-divs/)这种方法非常合理，只需使用 php 而不是 js 以类似的方式编写代码。

如果您想查看其他示例：[这里有一些](http://www.hongkiat.com/blog/data-visualization-with-css-graphs-charts-and-more/)html/css 图表示例。[pcharts](http://pchart.sourceforge.net/)是一个很棒的库，它使用 GD php 扩展来生成 jpg/png 格式的图表图像。如果您计划即时生成图像，这个库应该会提供一些很好的灵感。

**更新** 我忍不住做了一个 php/css 示例：

```
<html>
<head>
    <style type="text/css">
        .bar {
            background: #660000;
            color: #fff;
            height: 20px;
            width: auto;
            min-width: 2px;
            clear: both;
            margin-bottom: 5px;
            padding: 5px;
            font-weight: bold;
        }
    </style>
</head>
<body>
<?php

    //array of values
    $vals = array(
        'git' => 9001, 
        'svn' => 4213, 
        'bitkeeper' => 7391,
        'mercurial' => 2114,
        'cvs' => 806, 
    );
    //minimim and maximum
    $min = 1;
    $max = 200;

    //calculate scale, draw, and loop
    foreach ($vals as $key => $val) {
        $scale = (2 * ($val-$min)/($max-$min))*8;
        echo('<div class="bar" style="width: '.$scale.'px" title="'.$key.' = '.$val.'">'.$key."</div>");
    }

?>
</body>
</html> 
```

# php - 如何在 wamp 上启用 curl 扩展？

> ID：14262200
> 
> 赞同：0
> 
> 时间：2013-01-10T16:09:42.147
> 
> 标签：php

我正在使用 appache2.2.22 和 php5.3.13。我尝试删除 php.ini 文件上 curl_extension 的注释。但没有更改 curl 未启用。我坚持了几天。我该如何启用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:12:10.583

如果是 Wamp Server，左键单击系统托盘中的 Wamp Server 图标 -> 单击 PHP -> PHP Extensions -> 单击 php_curl。

Wamp 然后将重新启动它自己。重新启动后检查它是否已打勾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:14:45.227

这是 64 位版本的 php 5.3.13 中 cURL 的一个已知问题。

幸运的是，您可以在此处下载一个修复程序：[http](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/) ://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/ （下载固定卷曲版本）

很高兴您可以停止为这个烦人的问题浪费时间:)

# batch-file - 如何列出除一个以外的所有目录？

> ID：14262203
> 
> 赞同：3
> 
> 时间：2013-01-10T16:09:44.237
> 
> 标签：batch-file, for-loop, directory

我正在编写一个批处理文件，我需要在其中列出除“pdf”之外的所有目录。

这是我目前拥有的一个简单示例，返回所有目录：

```
for /r /d %%D in ("*") do (
        echo %%D
    ) 
```

是否有相当于：

```
for /r /d %%D not in ("pdf") do (
        echo %%D
    ) 
```

当我尝试得到以下输出时：

```
"not was unexpected at this time."  
C:\txt-in\for /r /d %D not in ("pdf") do ( 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:16:19.563

最简单的方法可能是

```
for /r /d %%D in ("*") do (
    if not "%%~nxD"=="pdf" (
    echo %%D
    )
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T16:23:29.907

你已经接近你的第一个片段了。只需在循环中添加一条`if`语句或更改循环以使用`dir`带有`find`.

显示文件夹名称不是“pdf”

```
for /r /d %%D in (*) do (
    if /i not "%%~nxD"=="pdf" (
        echo %%D
    )
) 
```

或显示不包含“pdf”的文件夹名称

```
for /f "delims=" %%D in ('dir /a:d /b ^| find /v /i "pdf"') do (
    echo %%D
) 
```

`/i`匹配不考虑字母大小写。删除`/i`以使搜索不区分大小写。

# excel - Excel if 和公式

> ID：14262204
> 
> 赞同：1
> 
> 时间：2013-01-10T16:09:49.170
> 
> 标签：excel

```
 B  C          D        H                    I
Age Years   Salary      Years               Bonus % 
50  12  $120,000.00 <5 years             0.00%
42  20  $40,000.00      5 to 10 years        20.00%
51  3   $97,000.00      11 to 15 years       30.00%
58  28  $105,000.00 16 to 20 years       40.00%
67  6   $78,000.00      20 to 25 years       50.00%
                       26 or more years     100.00% 
```

我正在尝试编写一个 if 语句，根据以下条件计算奖金： 员工必须至少 50 岁 员工必须至少服务 5 年。但是我的声明一直返回一个 VALUE 这就是我所拥有的

```
$K$1 = 50
=IF(B2<$K$1,0),IF(C2<5,0),IF(AND(C2>5,C2<10),D2*I3),IF(AND(C2>10,C2<15),D2*I4),IF(AND(C2>15,C2<20),D2*I5),IF(AND(C2>20,C2<25),D2*I6),IF(C2>25,D2*I7) 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:25:20.217

您必须嵌套 IF 语句，而不是用逗号分隔它们。你的公式应该是：

```
=IF(B2<$K$1,0, IF(C2<5,0, IF(AND(C2>5,C2<10),D2*I3, IF(AND(C2>10,C2<15),D2*I4, IF(AND(C2>15,C2<20),D2*I5, IF(AND(C2>20,C2<25),D2*I6, IF(C2>25,D2*I7))))))) 
```

IF 函数的参数是`logical_test`, `value_if_true`, `value_if_false`，所以第二个 IF 语句的结果变成`value_if_false`第一个的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:29:05.480

我更喜欢 LOOKUP 方法 - 试试这个

`=IF(B2<K$1,0,LOOKUP(C2,{0,5,10,15,20,25},I$2:I$7)*D2)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:26:31.253

当您在 Excel 中收到错误时，当您选择有错误的单元格时会弹出一个感叹号图像。当您通过单击该图像调出菜单时，您可以选择显示计算步骤的选项。

通过这样做，您可以很容易地看到哪里出了问题：您的 IF 语句都没有定义 value_if_false，导致 excel 在评估前 2 个 IF 语句后计算“FALSE，FALSE”。重新定位右括号以解决此问题。

`=IF(B2<$K$1,0,IF(C2<5,0,IF(AND(C2>5,C2<10),D2*$I$3,IF(AND(C2>10,C2<15),D2*$I$4,IF(AND(C2>15,C2<20),D2*$I$5,IF(AND(C2>20,C2<25),D2*$I$6,IF(C2>25,D2*$I$7)))))))`

# html - 溢出-y，如何从最低部分开始

> ID：14262211
> 
> 赞同：3
> 
> 时间：2013-01-10T16:09:56.907
> 
> 标签：html, css

我有一个带有溢出-y 的 div。当文本变大时，可以滚动到文本的下半部分。

我的问题是：如何让它从 div 的下半部分而不是上半部分开始？这样您将首先查看文本的下半部分。

这是用于 div 的 CSS。

```
#Middle{
margin: 0px;
padding: 0px;
width: 234px;
height: 287px;
margin-left: auto;
margin-right: auto;
margin-top: 7px;
padding: 5px;
background-color: #F0F0F0;
overflow-y: scroll;
resize: none;
box-shadow:inset 0 0 5px #000000;
-moz-box-shadow:inset 0 0 5px #000000;
-webkit-box-shadow:0 0 5px #000000;
} 
```

我只是添加这个对吗？因为它不会起作用。（对不起，我还没有使用 JavaScript 的经验）

```
<head><script>
var div = document.getElementById("Middle");
div.scrollTop = div.scrollHeight;
</script></head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:17:39.350

显然有一个[问题](https://stackoverflow.com/questions/270612/scroll-to-bottom-of-div)与您的问题相同，并且答案已被接受。

```
var objDiv = document.getElementById("your_div");
objDiv.scrollTop = objDiv.scrollHeight; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:17:43.200

这通常有效：

```
var div = document.getElementById("ID");
div.scrollTop = div.scrollHeight; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-07T08:32:51.560

您的解决方案应该可以工作，您只需将其放在页面末尾，这样当您调用`document.getElementById`该元素时，DOM 上就已经存在。

这是一个工作示例：

```
<body>
  <div id="Middle">
    <!-- some long content -->
  </div>

  <script>
    var div = document.getElementById("Middle");
    div.scrollTop = div.scrollHeight;
  </script>
</body> 
```

# algorithm - 用于在多个条件下做出决策的数据结构

> ID：14262214
> 
> 赞同：2
> 
> 时间：2013-01-10T16:10:10.560
> 
> 标签：algorithm, data-structures, decision-tree

我有一个具有这种结构的 XML 映射文件：

```
<mappings>
    <mapping path="first">
        <parameter name="client_identifier">value1</parameter>
        <parameter name="device_identifier">value2</parameter>
        <parameter name="network_identifier">value3</parameter>
    </mapping>
    <mapping path="second">
        <parameter name="client_identifier">value1</parameter>
        <parameter name="device_identifier">value2</parameter>
        <parameter name="network_identifier">value4</parameter>
    </mapping>
    <mapping path="third">
        <parameter name="client_identifier">value1</parameter>
        <parameter name="device_identifier">value2</parameter>
    </mapping>
    <!-- hundreds/thousands more -->
</mappings> 
```

客户向我的应用程序发出请求，并根据他们请求中包含的一些参数返回一些文件。我上面的映射文件将参数映射到正确的文件。元素中的`path`属性`mapping`是包含这些文件的目录的文件路径。

我从上到下解析文件，一次操作一个映射，最坏的情况是 O(n)。如果其中的所有参数都`<mapping>`与客户端请求中的参数匹配，我将返回目录值`path`。

示例客户端请求

```
client_identifier = value1
device_identifier = value2
network_identifier = value10213

The third mapping with path=third will be returned because the other mappings don't match network_identifier. 
```

因为由于所有可能的组合，这个文件可以增长到大量的映射，所以我想知道是否有一些数据结构（决策树）可以更快地解析/比较。

文件本身必须保持相同的结构，但我可以解析它并在内存中创建不同的结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:13:23.453

实际上，您所描述的不是决策树的示例。仍然有一些方法可以优化您的流程。我建议您为每个映射中的属性集计算某种哈希值。对于未设置的属性，添加另一个表示“未设置”的“假”值。之后迭代文件并将为查询的属性集计算的散列与行中每个映射的属性集的散列进行比较。仅在哈希相同时比较属性（以避免冲突问题）。这种方法应该可以显着加快比较速度。

您可以进一步改进上述方法 - 在哈希码和具有此哈希码的映射之间创建一个哈希映射。不要将哈希码的映射与文件中的顺序保持一致！之后，您将只迭代具有相同哈希码的映射，并且在没有发生冲突的完美情况下，这将尽可能好。

# c# - 具有值数据绑定的 WPF ProgressBar

> ID：14262220
> 
> 赞同：7
> 
> 时间：2013-01-10T16:10:43.967
> 
> 标签：c#, wpf, data-binding, progress-bar

我正在尝试在 WPF 中对 ProgressBar 的 value 属性进行数据绑定。我设置了一个按钮来增加 ProgressBar 的值的数据绑定 int 属性。当我按下按钮时，它应该使 ProgressBar 的值从 1 增加到 100。但是......它似乎没有工作，我不确定我做错了什么。这是我的 XAML ......

```
<Window x:Class="ProgressBarExample2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="250" Width="400" Background="WhiteSmoke">
<StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
    <Button Name="goButton" Height="30" Width="50" Margin="0,10,0,50" Click="goButton_Click">GO!</Button>
    <ProgressBar Name="progressBar" Width="300" Height="30" Value="{Binding Percent, UpdateSourceTrigger=PropertyChanged}" />
</StackPanel> 
```

这是我背后的代码...

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    #region INotifyPropertyChanged

    public event PropertyChangedEventHandler PropertyChanged;
    protected void NotifyPropertyChange(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    #endregion

    private int percent = 0;
    public int Percent
    {
        get { return this.percent; }
        set 
        {
            this.percent = value;
            NotifyPropertyChange("Percent");
        }
    }

    public MainWindow()
    {
        InitializeComponent();
    }

    private void goButton_Click(object sender, RoutedEventArgs e)
    {
        for (Percent = 0; Percent <= 100; Percent++)
        {
            Thread.Sleep(50);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T16:24:43.960

Thread.Sleep 正在阻塞 UI 线程并停止进度条的动画。

您可以使用以下命令暂停执行而不阻塞 UI 线程。将您的`Thread.Sleep(50)`电话替换为`Wait(50)`

```
/// <summary>
/// Stop execution for a specific amount of time without blocking the UI
/// </summary>
/// <param name="interval">The time to wait in milliseconds</param>
public static void Wait(int interval)
{
    ExecuteWait(() => Thread.Sleep(interval));
}

public static void ExecuteWait(Action action)
{
    var waitFrame = new DispatcherFrame();

    // Use callback to "pop" dispatcher frame
    IAsyncResult op = action.BeginInvoke(dummy => waitFrame.Continue = false, null);

    // this method will block here but window messages are pumped
    Dispatcher.PushFrame(waitFrame);

    // this method may throw if the action threw. caller's responsibility to handle.
    action.EndInvoke(op);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:15:40.670

没有设置窗口（或 StackPanel）的 DataContext 的代码（已发布）。

要确定原因，请查看输出窗口中的绑定错误。

* * *

此外，

```
private void goButton_Click(object sender, RoutedEventArgs e)
{
    for (Percent = 0; Percent <= 100; Percent++)
    {
        Thread.Sleep(50);
    }
 } 
```

这会阻止消息处理，因此您的应用将在 5 秒内“无响应”。不会进行任何输入处理和屏幕更新。繁忙的循环在事件驱动的 GUI 中根本就不好。

将此代码移至 Backgroundworker 或使用 Timer。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T16:34:35.313

还有其他没有数据绑定的解决方案。你可以声明一个委托

`private delegate void UpdateProgressBarDelegate(System.Windows.DependencyProperty dp, Object value);`

并在按钮的点击事件中使用

```
private void goButton_Click(object sender, RoutedEventArgs e)
        {
             //Configure the ProgressBar
            progressBar.Minimum = 0;
            progressBar.Maximum = 100;
            progressBar.Value = 0;

            //Stores the value of the ProgressBar
            double value = 0;

            //Create a new instance of our ProgressBar Delegate that points
            //  to the ProgressBar's SetValue method.
            UpdateProgressBarDelegate updatePbDelegate = new UpdateProgressBarDelegate(progressBar.SetValue);

            //Tight Loop:  Loop until the ProgressBar.Value reaches the max
            do
            {
                value += 1;

                /*Update the Value of the ProgressBar:
                  1)  Pass the "updatePbDelegate" delegate that points to the ProgressBar1.SetValue method
                  2)  Set the DispatcherPriority to "Background"
                  3)  Pass an Object() Array containing the property to update (ProgressBar.ValueProperty) and the new value */
                Dispatcher.Invoke(updatePbDelegate,
                    System.Windows.Threading.DispatcherPriority.Background,
                    new object[] { ProgressBar.ValueProperty, value });

            }
            while (progressBar.Value != progressBar.Maximum);
        } 
```

# android - 查询已购商品时获取订单ID

> ID：14262230
> 
> 赞同：1
> 
> 时间：2013-01-10T16:11:16.463
> 
> 标签：android, in-app-purchase, android-billing

我正在查看[查询拥有的项目](http://developer.android.com/google/play/billing/billing_integrate.html#QueryPurchases)，它不包括获取用户实际购买时可用的结帐订单 ID。有没有办法查询已经购买的订单ID？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T20:42:15.303

谷歌给出的[例子](http://developer.android.com/google/play/billing/billing_integrate.html#QueryPurchases)（并在另一个答案中列出）有点错误。检索`ownedItems`捆绑包时，它不包含`INAPP_DATA_SIGNATURE`，而是包含`INAPP_DATA_SIGNATURE_LIST`.

这是您可以从`ownedItems`捆绑包中获得的密钥列表（尽管您可能不会一直获得所有这些密钥）：

*   `RESPONSE_CODE`
*   `INAPP_PURCHASE_ITEM_LIST`
*   `INAPP_PURCHASE_DATA_LIST`
*   `INAPP_DATA_SIGNATURE_LIST`
*   `INAPP_CONTINUATION_TOKEN`

有关它们的描述，请参见[此处](http://developer.android.com/google/play/billing/billing_reference.html#getPurchases)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T16:23:12.403

试试这个：

```
Bundle ownedItems = mService.getPurchases(3, getPackageName(), "inapp", null);

int response = ownedItems.getInt("RESPONSE_CODE");
if (response == 0) {
   ArrayList ownedSkus = 
      ownedItems.getStringArrayList("INAPP_PURCHASE_ITEM_LIST");
   ArrayList purchaseDataList = 
      ownedItems.getStringArrayList("INAPP_PURCHASE_DATA_LIST");
   ArrayList signatureList = 
      ownedItems.getStringArrayList("INAPP_DATA_SIGNATURE");
   String continuationToken = 
      ownedItems.getString("INAPP_CONTINUATION_TOKEN");

   for (int i = 0; i < purchaseDataList.size(); ++i) {
       String purchaseData = purchaseDataList.get(i);
       JSONObject jpurchase = new JSONObject(purchaseData);
       String orderid = jpurchase.getString("orderId");
       Log.v(TAG,"ORDER ID :"+orderid ); 
   }
} 
```

谢谢。

# javascript - 两个字符之间的子字符串

> ID：14262237
> 
> 赞同：0
> 
> 时间：2013-01-10T16:11:30.117
> 
> 标签：javascript, regex

我有一个像这样的简单字符串：

```
image[2] 
```

我想得到 之间的数字`[]`，在这种情况下必须返回`2`。

在 JavaScript 中执行此操作的好的正则表达式是什么？我已经尝试过，`substring`但我想应用正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:13:29.200

```
var a = "image[2]",
    r = /\[([^\]]*?)\]/;

console.log(a.match(r)); // ["[2]", "2"] 
```

* * *

```
var num = +(a.match(r)[1]); // 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:14:01.840

您可以使用

```
var num = parseInt(yourString.match(/\[(\d*)\]/)[1], 10); 
```

这`2`以数字形式返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T16:13:16.670

你可以尝试使用这个：`\[(.*?)\]`

# javascript - VBA 捕获标签之间的文本

> ID：14262250
> 
> 赞同：0
> 
> 时间：2013-01-10T16:12:19.570
> 
> 标签：javascript, dom, excel, web-scraping, vba

我正在尝试在 Excel 中使用 VBA 从网站中提取数据。页面源有以下内容（如下），我可以提取“A”标签之间的文本“这是我的文本”，我可以提取“DIV”标签之间的所有内容，显示为“这是我的文本（XXXXX）”......但我无法提取出现在“/A”之后的文本块......例如“（XXXXX）”

```
 <div style="padding: 1px;"><a href="#" onclick="if(typeof jsfcljs == 'function'){jsfcljs(document.getElementById('MainPage'),{'j_id32'},'');}return false">This is my text</a> (XXXXX)</div>

<div style="padding: 1px; padding-left:20px;"><a href="#" onclick="if(typeof jsfcljs == 'function'){jsfcljs(document.getElementById('MainPage'),{'j_id32'},'');}return false">This is my text</a> (XXXXXXXX)</DIV> 
```

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:24:24.777

如果您知道您想要的字符串是在您的 DIV 元素内关闭的最后一个标签之后的字符串，请使用

```
TXT = Right(OBJ.innerHTML, Len(OBJ.innerHTML) - InStrRev(OBJ.innerHTML, ">")) 
```

其中 OBJ 是您的 DIV 元素

# php - 如何在单个 php 代码中一一使用公告列表？

> ID：14262254
> 
> 赞同：0
> 
> 时间：2013-01-10T16:12:24.533
> 
> 标签：php

我通过像（示例）这样的 php 请求来获取 torrent 公告

……/宣布
……/宣布
…………/宣布

（因为播音员可能是任何数字）

下面是代码：

```
$counter = count($torrent_data['announce-list']);
if ($counter > 0) {
    $announcelist = ($torrent_data['announce-list']);
    echo 'Announce list:<br />';
    $c = count($announcelist);
    for ($i = 0; $i < $c; $i++) {
        echo $announcelist[$i]['0'] . '<br/>';
    }
} else {
    $announce = $torrent_data['announce'];
    echo 'Announce:' . $announce;
} 
```

现在我有一个 php 代码，我实际上想在其中请求所有这些公告以获取种子、水蛭等...

现在我的问题是，如何在单个 php 代码中一一使用公告列表？例子：

```
$ret = $scraper->scrape('http://tracker.tld:port/announce',array('0000000000000000000000000000000000000000')); 
```

请任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:38:45.000

不太确定请求逐一宣布是什么意思，但是您应该可以在 for 循环中进行操作，因为您已经在逐一显示它们

```
$result = array();
for ($i = 0; $i < $c; $i++) {
  echo $announcelist[$i]['0'] . '<br/>';
  $result[] = $scraper->scrape($announcelist[$i]['0'];
} 
```

（也不要忘记将其添加到`else`分支中

编辑：

```
$result = array();
foreach ($announcelist as $announce){
  $result[] = $scraper->scrape($announce['0']);
} 
```

这将产生一个数组 $result 包含每个公告的所有信息

# java - 为什么在 SurfaceView 中等待渲染线程完成通常要防范中断？

> ID：14262256
> 
> 赞同：3
> 
> 时间：2013-01-10T16:12:44.017
> 
> 标签：java, android, concurrency, surfaceview, interrupted-exception

我见过几次人们在使用以下模式时使用的模式`SurfaceView`：

```
while(true) {
    try {
        renderThread.join();
        break;
    } catch (InterruptedException e) {
        // retry
    }
} 
```

例如，[这里](http://code.google.com/p/beginning-android-games/source/browse/trunk/ch04-android-basics/src/com/badlogic/androidgames/SurfaceViewTest.java)或[这里](https://stackoverflow.com/questions/11220572)。为什么要这样做？特别是考虑到实际上没有任何东西中断线程。

# c# - 带有自定义验证器的 Page.Validate()。err.IsValid 设置为 false 后返回 true

> ID：14262257
> 
> 赞同：1
> 
> 时间：2013-01-10T16:12:44.500
> 
> 标签：c#, asp.net, validation

我有一个控件，应该提示用户选择会话的 customerId 或页面的旧视图状态 customerId。为此，该控件在代码后面的验证中基于

> [在回发时，如何向验证摘要添加错误消息？](https://stackoverflow.com/questions/777889/on-postback-how-can-i-add-a-error-message-to-validation-summary)

当单步执行代码时，我看到 err.IsValid 设置为 false。但是当我到达 Page.IsValid 并查看验证器时，它被设置为 true。可以提供任何信息来帮助我理解为什么这没有按照我的预期进行，我们将不胜感激。

后面的代码

```
public partial class CustomerChanged : System.Web.UI.UserControl
{
    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        this.Page.PreLoad += Page_PreLoad;
    }

    void Page_PreLoad(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            ViewState.Add("CustID", Globals.CurrentCust.CustId);
        }
        if (IsPostBack)
        {
            if (Convert.ToInt32(ViewState["CustID"]) != Globals.CurrentCust.CustId)
            {
                btnOldCustId.Text = "Old CustID \n" + ViewState["CustID"].ToString();
                btnNewCustId.Text = "New CustID \n" + Globals.CurrentCust.CustId.ToString();
                btnOldCustId.OnClientClick = string.Format("return changeCustomer({0},'{1}');", ViewState["CustID"].ToString(), Globals.GeneralSiteUrl);

                System.Web.UI.WebControls.CustomValidator err = new System.Web.UI.WebControls.CustomValidator();
                err.IsValid = false;
                err.ErrorMessage = "The customer has changed.";
                Page.Validators.Add(err);
            }
        }
    }

    protected void Page_Load(object sender, EventArgs e)
    {            
        if (IsPostBack)
        {
            Page.Validate();
            if (!Page.IsValid)
            {                    
                ScriptManager.RegisterStartupScript(this, this.GetType(), "CustomerChangedModalDialog", "ShowCustomerChangedModalDialog();", true);
            }
        }
    }
    protected void btnNewCustId_Click(object sender, EventArgs e)
    {
        Response.Redirect(Request.RawUrl);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:46:17.660

您可以使用以下命令将错误消息添加到验证摘要：

```
if (IsPostBack)
{
    Page.Validate();
    var valid = CustomValidate();

    if(valid && Page.IsValid)
    {
    }               
}

protected bool CustomValidate()
{
     var valid = true;
     ///do your validation here

     var validator = new CustomValidator();
     validator.IsValid = false;
     valid = validator.IsValid;
     Validator.ErrorMessage = "Error....";        
     this.Page.Validators.Add(validator);
     return valid;
} 
```

# php - 创建所选表单输入的摘要页面

> ID：14262258
> 
> 赞同：0
> 
> 时间：2013-01-10T16:12:48.187
> 
> 标签：php, jquery, forms

我有一个使用 jQuery 逐步完成自定义过程的 3 步表单。我在第 1 步和第 2 步有一些复选框，并希望创建在第 3 步中选择的那些的摘要页面。

一旦用户对他们的选择感到满意，我就想将这些选择通过电子邮件发送到特定地址。

它使用 jQuery，因此不需要转到另一个页面显示/隐藏正确的步骤。

**如何显示在步骤 3 中选择的内容？电子邮件部分还不是很重要，但请记住它需要完成。**

* * *

这是表格：

```
<div class="entire_product">
    Content here.
    <a id="customise" class="configure-demo" style="margin-top:20px;" href="#">Configure new system &amp; get quote</a>
</div>

<div class="customise" style="display:none;">
    <form id="customisesystem" method="post" action="">
        <div id="first-step">
            <div class="steps">
                <p><b>Step 1 of 3</b></p>
            </div>
            <div class="progress-buttons"></div>
            <div class="clear"></div>

            <div id="customise-area">
                <p>Options 1</p>

                <div id="customise-area">
                    <input type="checkbox" name="hardware[]" value="<?php the_title(); ?>">
                </div>
            </div>
        </div>

        <div id="second-step">
            <div class="steps">
                <p><b>Step 2 of 3</b></p>
            </div>
            <div class="progress-buttons"></div>
            <div class="clear"></div>

            <div id="customise-area">
                <p>Options 2</p>

                <div id="customise-area">
                    <input type="checkbox" name="hardware[]" value="<?php the_title(); ?>">
                </div>
            </div>
        </div>      

        <div id="third-step">
            <div class="steps">
                <p><b>Step 3 of 3</b></p>
            </div>
            <div class="progress-buttons"></div>
            <div class="clear"></div>

            <div id="customise-area">
                <p>Summary</p>

                <div id="customise-area">
                    <input type="submit" name="submit" id="submit" value="submit" />
                </div>
            </div>
        </div>      
    </form>
</div> 
```

这是我最初用来显示表单的 jQuery，然后逐步完成它：

```
<script type="text/javascript">
var prevLink = '<a class="back" href="#">Back</a>';
var nextLink = '</a><a class="next" href="#">Next</a>';
var navHTML = '<div class="prev-next">' +
                         prevLink +
                         nextLink +
                      '</div>';
var prevLink = '<a class="back" href="#">Back</a>';
var nextLink = '</a><a class="next" href="#">Next</a>';
var navHTML = '<div class="prev-next">' +
                         prevLink +
                         nextLink +
                      '</div>';
jQuery(document).ready(function( $ ) {
            // init
            $('#customisesystem > div')
                .hide()
                .prepend(navHTML);
            $('#first-step .prev').remove();
            $('#last-step .next').remove();

            // show first step
            $('#first-step').show();

            $('a.next').click(function(){
                var whichStep = $(this).parent().parent().attr('id');

                if( whichStep == 'first-step' )
                {
                    // validate first-step
                }
                else if( whichStep == 'second-step' )
                {
                    // validate second-step
                }
                else if( whichStep == 'last-step' )
                {
                    // validate last-step
                }

                $(this).parent().parent().hide().next().show();
            });

            $('a.back').click(function(){
                $(this).parent().parent().hide().prev().show();
            });
        });

jQuery(document).ready(function( $ ) {
$("#customise").click(function(){
    $(".entire_product").hide();
    $(".customise").show();
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:54:54.423

那么，您的第一个问题是您有多个具有相同 id 的 HTML 元素。这是无效的标记。您不能将相同的 id 分配给多个元素。id 属性必须是唯一的。

所以，我假设你改变了它，#third-step 开始看起来像：

```
<div id="third-step">
    <div class="steps">
        <p><b>Step 3 of 3</b></p>
    </div>
    <div class="progress-buttons"></div>
    <div class="clear"></div>

    <div id="customise-area-3">
        <p>Summary</p>

        <div id="customise-area-3-child">
            <input type="submit" name="submit" id="submit" value="submit" />
        </div>
    </div>
</div> 
```

那么你可以像这样使用jQuery：

```
//Retrieve the customization summary area:
var summary = $('#customise-area-3 p');

//Use jQuery to select all the checkboxes with the name hardware that are checked.
$('input[type=checkbox][name=hardware\[\]]:checked').each(function(k,v) {
    //Retrieve the value of the checkbox.
    var checkboxValue = v.val();

    //Add the checkbox value to the summary area:
    summary.innerHTML += checkboxValue + '<br />';
}); 
```

# image - 是否有使用 Tridion 在图像上创建热点的首选方法？

> ID：14262259
> 
> 赞同：1
> 
> 时间：2013-01-10T16:12:49.480
> 
> 标签：image, methods, tridion

当我们将鼠标悬停在热点上时，每个热点都会与一个组件列表相关联。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:39:57.917

不知道你所说的热点是什么意思，但我曾经为 SDL Tridion ( [http://www.tridiondeveloper.com/image-map-extension-for-sdl-tridion](http://www.tridiondeveloper.com/image-map-extension-for-sdl-tridion) ) 编写了一个图像映射工具 - 这可能与你的内容有关正在寻找？它可以很容易地扩展以允许组件链接。

# php - php中的Ajax数据，清理数字

> ID：14262261
> 
> 赞同：0
> 
> 时间：2013-01-10T16:12:57.513
> 
> 标签：php, json, jquery

我在清理 ajax.php 中的数据时遇到了困难。这是我的 js.js 的代码：

```
$('.vote_pagelink').click(function() {
var aid = this.id;

$.ajax({
       type: "POST",
       url: 'http://localhost/lr/ajax.php',
       data: "voteid=" + aid + "&tid=" + config.topic_id,  
             success: function(data){
             var test= data;
             alert( "Data Saved: " + test);
          },
                      error: function(data){
              alert( "error: ");
       }               
     });
return false;
}); 
```

和我的 ajax.php：

```
$post = $_POST;
if ( ctype_digit(json_encode($post['tid']))) {                              
echo json_encode($post['tid']);
} 
```

为什么这行不通？是否有任何“隐藏”数据？如果我删除 if 条件，它只会提示一个数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:17:08.243

删除“json_encode”后尝试-

因为编码后它不是数字所以它会返回false；

```
$post = $_POST;
if ( ctype_digit($post['tid'])) {
echo json_encode($post['tid']);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:39:47.107

[ctype_digit](http://php.net/manual/en/function.ctype-digit.php)函数检查字符串中的 所有字符是否都是数字。当您对一个值进行[json_encode](http://php.net/manual/en/function.json-encode.php)时，它​​会返回该值的 json 表示。例如：

```
$arr = array('a' => 1, 'b' => 2, 'c' => 3, 'd' => 4, 'e' => 5);
echo json_encode($arr);
//produces the output
 {"a":1,"b":2,"c":3,"d":4,"e":5} 
```

所以你不能真正在 json_encoded 表示上使用 ctype_digit 。相反，您的代码应采用以下形式：

```
ctype_digit($post['tid']) 
```

# mysql - MonoTouch MySQL 数据库访问

> ID：14262262
> 
> 赞同：4
> 
> 时间：2013-01-10T16:13:00.357
> 
> 标签：mysql, mono, xamarin.ios, provider

是否有与 iOS 的 MonoTouch 兼容的 MySQL 提供程序？

[MySQL 数据库的 Mono 提供程序](http://www.mono-project.com/MySQL)可以与 MonoTouch 一起使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-02T16:52:43.537

不，没有兼容的 MonoTouch MySQL 提供程序导致 System.Data ( [http://bit.ly/HlKN71](http://bit.ly/HlKN71) ) 缺少功能。

恕我直言，只有一个本地 Sqlite 提供程序很好。只需在您的数据库和移动应用程序之间放置类似 REST 的东西即可完成此操作。

# java - WEB-INF [Java Spring] 中配置的相对路径

> ID：14262263
> 
> 赞同：0
> 
> 时间：2013-01-10T16:13:02.897
> 
> 标签：java, spring, config, relative-path, batch-processing

有没有使用相对路径`ApplicationContext`从目录加载配置文件的好方法？`WEB-INF`

我尝试使用`ClassPathXmlApplicationContext`and `FileSystemXmlApplicationContext`，但第一个仅适用于类路径资源，第二个仅适用于绝对路径。

我已经找到了 2 个解决方案，但我不知道它们是否好。

1.  A 将我的 WEB-INF 文件夹添加到项目类路径中
2.  将配置移动到资源文件夹（在类路径中）并将其导入 WEB-INF 通过`<import resource="classpath:/batch/batch-config.xml" />`

请说出这些解决方案中的一种是否良好或什么是最好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:23:46.863

如果您使用 FileSystemXmlApplicationContext，则应使用完整路径指定 XML 配置文件，或者它应该位于相对于应用程序运行的目录的路径中。

如果您使用 ClasspathXmlApplicationContext，则应相对于类路径条目的根指定 Spring XML 配置文件。

以我的经验，我认为您的第二种方法是定义 Spring 资源的最佳方式。[更多细节](http://blog.sarathonline.com/2008/10/classpath-making-your-modular-spring.html)

# java - 在 SQLite 3 数据库中查询 URL 字符串

> ID：14262269
> 
> 赞同：1
> 
> 时间：2013-01-10T16:13:16.123
> 
> 标签：java, database, sqlite, url, special-characters

我正在编写我的第一个 Android 应用程序并使用 SQLite 数据库将数据存储在多个表上。我的一个表包含与某个搜索相对应的一堆页面的 URL。

使用数据库中的字符串字段，我可以轻松地存储 html（格式为 html://mysite.org/blah/blah.htm 或 *.jpg，具体取决于我在做什么）。这些 URL 也很容易从数据库中检索到。

但是，为了更高效，我只想解析并添加一次这些 URL。我希望能够在表中搜索 URL，并且仅在 URL 不存在时才解析和添加它。问题是特殊字符（肯定是冒号和句点）会导致问题，因为它们是查询字符。我尝试使用方括号（{}），用单引号（'）将查询中的 URL 括起来，甚至尝试使用反斜杠。

我在这里缺少什么可以查询： SELECT * from TABLE WHERE url="http://*.htm" 吗？

此外，这是将 URL 存储到数据库的最佳方式吗？我正在处理的 URL 有时是从搜索表单填充值的搜索 URL，因此它们中可能包含特殊字符（想想 Craigslist 搜索）？

任何方向都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:26:54.727

阅读[运营商的](http://www.sqlite.org/lang_expr.html#like)[文件`LIKE`](http://www.sqlite.org/lang_expr.html#like)；您的查询应如下所示：

```
SELECT * FROM MyTable WHERE url LIKE 'http://%.htm' 
```

此外，您的搜索字符串可能包含`%`或`_`字符，因此您应该使用该`ESCAPE`子句。

为确保`'`在构造 SQL 命令时不会让特殊字符（如特殊字符）绊倒您，请使用参数：

```
String searchPattern = "http://%.htm%";
Cursor c = db.rawQuery("SELECT * FROM MyTable WHERE url LIKE ?",
                       new String[] { searchPattern }); 
```

# c# - 在 C# 中模拟类中的实例

> ID：14262270
> 
> 赞同：0
> 
> 时间：2013-01-10T16:13:17.447
> 
> 标签：c#, rhino-mocks

我正在尝试在类中模拟一个实例。这是类（简化）：

```
public void CreatePhotos(string elementType) 
{ 
    var foo = new PicturesCreation(); 

    //some code here...

    if (elementType == "IO") 
    { 
        foo.CreateIcons(client, new PicturesOfFrogsCreation(), periodFrom, periodTo)
    } 
} 
```

所以我试图模拟这个'new PicturesOfFrogsCreation（）'进行单元测试，看看是否使用这个参数调用了CreateIcons。我试图在我的测试中使用 Rhino Mocks/AssertWasCalled 方法来实现这一点，但它看起来不起作用，因为我只知道如何模拟接口。你知道是否可以模拟这个吗？

更新： PicturesCreation 类的代码：

```
internal sealed class PicturesCreation 
    { 
      public void CreateIcons(IPictures foo, int periodFrom, int periodTo) 

         { 
            foo.CreateIcons(periodFrom, periodTo); 
         } 
    } 
```

和 PicturesOfFrogsCreation 的代码：

```
internal sealed class PicturesOfFrogsCreation : IPictures
{ 

    public void CreateIcons(int periodFrom, int periodTo) 
      { 
         //Code that implements the method
      } 
} 
```

我写了这个测试，但我不确定它是否写得好：

```
public void Create_commitment_transaction_should_be_called_for_internal_order() 
    { 

       IPicture fooStub = RhinoStubWrapper<IPicture>.CreateStubObject(); 

       rebuildCommitmentsStub.StubMethod(x => x.CreateIcons(Arg<int>.Is.Anything, Arg<int>.Is.Anything));

       PicturesProcess.CreatePhotos("IO"); 

       rebuildCommitmentsStub.AssertWasCalled(x => x.CreateIcons(Arg<int>.Is.Anything,Arg<int>.Is.Anything));

    } 
```

提前致谢！

一种。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:15:41.077

老实说，您的代码似乎并不是为此而设计的。因为您在方法中实例化实例，然后调用该方法，所以很难模拟出来。

如果您将实例传递给此方法，或者传递给要在字段中捕获的类的构造函数，则可以将其替换为模拟 - 大多数模拟框架（包括 Rhino）都可以这样做，前提是您正在检查的方法是虚拟的。

* * *

编辑：我从你的编辑中看到有问题的类是密封的。这使得它们本质上是不可模仿的。模拟一个类通过创建一个从被模拟的类继承的代理类来工作 - 如果它是密封的，则无法完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:20:09.647

您需要注入您希望模拟的依赖项。局部变量是方法私有的，不能被断言。一个例子 -

```
public class Photo{
  private IPicturesCreation foo;
  public test(IPicturesCreation picturesCreation)
  {
    foo = picturesCreation;
  }

  public void CreatePhotos(string elementType) 
    { 
    //some code here...

    if (elementType == "IO") 
       { 
           foo.CreateIcons(client, new PicturesOfFrogsCreation(), periodFrom, periodTo)
       } 
    }
} 
```

并像这样测试它

```
public class PhotoTest{
    public testFunctionCall(){
    var mockPicturesCreation = new Mock<IPicturesCreation>();
    new Photo(mockPicturesCreation.Object).CreatePhotos("blah");
    mockPicturesCreation.Verify(x => x.CreateIcons(.....), Times.Once);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T12:49:02.343

正如其他人已经提到的，这段代码不太适合模拟。但是，如果您无法修改代码，仍然有一些选择。

我听说[TypeMock](http://www.typemock.com/)可以模拟密封类，但我从未使用过它。顺便说一句，它是商业软件……还有[Microsoft Fakes Framework](http://msdn.microsoft.com/en-us/library/hh549175.aspx)（与 VS Premium 一起提供）。我玩了一下，似乎你几乎可以测试任何东西。绝对值得一试！

# php - JavaScript 客户端对 REST API 的授权和身份验证

> ID：14262271
> 
> 赞同：22
> 
> 时间：2013-01-10T16:13:18.063
> 
> 标签：php, javascript, api, rest, authentication

我正在构建一个将从 JavaScript 客户端使用的 PHP REST API，并且在弄清楚如何实现事物的身份验证和访问方面时遇到了一些问题。将有多个应用程序将使用我将开发的 JavaScript 库与我的应用程序进行对话和交互。我将为他们每个人提供 API 密钥，所以这不是问题。

我开始感到困惑的是如何让这些网站上的用户对我的应用程序进行身份验证。让这个外部站点存储我的用户帐户和密码信息似乎是个坏主意；所以，我想我应该让我的 JavaScript 库包含一个登录小部件，该小部件为我的应用程序询问用户的帐户信息。

如果身份验证在那里成功，因为我正在使用 REST API，我需要将检索到的令牌存储在客户端 cookie 或其他东西中，这样用户就不需要在每个页面上再次登录到我的应用程序外部站点。但是，如果用户从外部站点注销，然后另一个用户从同一个浏览器登录，会发生什么情况？就我的 JavaScript 库而言，旧用户仍会登录到我的应用程序，因为 cookie/令牌尚未过期 - 当前一个用户的会话结束时，如何清除我的 cookie？或者，我在这里完全偏离了正确的道路吗？

所以，我认为这个过程会是这样的：

```
var token; // Some hashed string containing an expiration date and user id
var apiKey = '123abc';

// Read the cookie and check if it already contains the token
token = readCookie('token');
if (token == '') {
    // get username and password from user through some prompt

    var request_data = {apiKey: apiKey, user: username, pass: password};
    $.post('https://service.com/api/user/login', request_data, function(data) {
        token = data;
        document.cookie = "token=" + token;
    });
}

...

var get_data = {apiKey: apiKey, token: token};
$.get('http://service.com/api/<object>', get_data, function(data) {
    // Do something with data
}); 
```

抱歉，这里隐藏了几个问题。我想主要是如果我将令牌存储到 cookie 中，我如何确保在用户注销外部应用程序时清除它？或者，如果我不应该将其存储到 cookie 中，如何让客户端了解用户的状态？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-16T12:47:50.733

我建议您阅读这篇关于保护 RESTful API 的[非常好的博文。](http://web.archive.org/web/20150906064244/http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)

（如果该链接不起作用 - 它已经失效一次并且必须从 archive.org 检索 - 我发现它似乎是此页面的 PDF 渲染，可在此处访问：[https://www.ida。 liu.se/~TDDD97/labs/hmacarticle.pdf](https://www.ida.liu.se/~TDDD97/labs/hmacarticle.pdf) .)

> **注意：**我的回答是题外话，因为上面博客文章中提供的解决方案对于 Javascript 客户端来说并不安全。事实上，它主要解释了如何在服务器端保护 REST API。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-20T03:20:03.260

*“我开始感到困惑的地方是如何让这些网站上的用户对我的应用程序进行身份验证。让这个外部网站存储我用户的帐户和密码信息似乎是个坏主意；”* -

使用 REST API，处理此问题的最佳方法是使用您的客户端（网页、移动应用程序），无论是由您的域控制还是通过用户输入的用户凭据（在登录页面中）进行外部传递。您将拥有一个负责身份验证的登录/注销 API。

当登录 API 进行身份验证时，它会返回一个令牌（可能是用户偏好的一种方式哈希），该令牌可以存储在客户端的加密 cookie 中。这样，您的客户端永远不会直接处理用户凭据。令牌设置为随时到期。

对于所有后续的 REST API 调用，您的客户端将将此令牌连同对 API 的请求一起提交（这与登录/注销 API 不同）。API 可能会检查本地缓存（在 REST 服务器上）以查看这是否是有效令牌。如果找到，兑现请求。否则，抛出错误。

如果用户在令牌到期之前注销，则登录/注销 API 将从本地缓存中删除此令牌，您的客户端将需要删除会话/cookie。

这样，您的凭据就不会在客户端传递。

当然，动态数据的安全性也应该通过 SSL 和 HTTP Digest 来实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T12:30:19.367

如果它是一个私有 API（你有一个 users 表）从另一个主机名跨域到你自己的主机名，我同意上述观点，并建议一个简单的（SSL）登录/注销，此时你可以给用户（或带走）来自您的域的 cookie。

如果它是公共 API（例如，任何人都可以获得 API 密钥），我建议使用上述答案中博客文章中的方法。

对于 JavaScript 客户端，如果缺少任何内容，请尝试[https://github.com/jpillora/jquery.rest ，提交功能请求或根据需要贡献:)](https://github.com/jpillora/jquery.rest)

# android - 谷歌地图显示在 Opera Mobile 上，但不在谷歌默认移动浏览器上

> ID：14262274
> 
> 赞同：-3
> 
> 时间：2013-01-10T16:13:31.690
> 
> 标签：android, mobile, google-maps-api-3

有谁知道为什么用 HTML5 编码的谷歌地图会出现在 Opera Mobile 中而不是谷歌移动默认浏览器中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:32:18.733

可能是因为 Web mobile 的原因，Google 默认浏览器会发送一个移动端的 userAgent，所以网页会显示特定的移动端 ui。

Opera Mobile，可以配置为发送桌面用户代理，这让您可以像在桌面上看到网页一样查看网页

# spring - Spring MVC + Hibernate 使用 STS

> ID：14262276
> 
> 赞同：1
> 
> 时间：2013-01-10T16:13:33.860
> 
> 标签：spring, hibernate, maven, spring-mvc

我正在尝试使用 STS 配置 Spring MVC 模板项目，然后向其中添加使用 Hibernate 获取持久性数据所需的所有依赖项。

我创建了一个 MVC 模板项目，但我不知道应该添加哪些依赖项。为了查看需要的库，我创建了一个 Hibernate Template 项目，并尝试将它声明的依赖项添加到 MVC 项目的 pom.xml 中。它无法找到大部分文物。如何将这些工件添加到 Maven 的依赖项中？

我在互联网上查找了一些有用的东西，但我无法解决我的问题。有人能帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:37:33.827

奇怪的是，您在 Internet 上没有发现任何关于带有 hibernate 的 spring 项目，因为它是 Java Web 应用程序最常用的构建之一。

这是一个`pom.xml`适用于`spring-mvc / hibernate`项目的示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.springproject</groupId>
    <artifactId>app</artifactId>
    <name>springapp</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>
    <properties>
        <java-version>1.7</java-version>
        <org.springframework-version>3.1.2.RELEASE</org.springframework-version>
        <org.aspectj-version>1.6.9</org.aspectj-version>
        <org.slf4j-version>1.5.10</org.slf4j-version>
        <org.hibernate-version>4.1.1.Final</org.hibernate-version>
    </properties>
    <dependencies>
        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework-version}</version>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                 </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>

        <!--  Spring security -->
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${org.springframework-version}</version>
        </dependency> 

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${org.springframework-version}</version>
        </dependency> 

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>

        <!-- Spring Data -->
        <dependency>
            <groupId>org.springframework.data</groupId>
            <artifactId>spring-data-jpa</artifactId>
            <version>1.1.0.RELEASE</version>
        </dependency>

        <!-- Hibernate dependencies -->
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>${org.hibernate-version}</version>
        </dependency>

        <dependency>
           <groupId>org.hibernate</groupId>
           <artifactId>hibernate-entitymanager</artifactId>
           <version>${org.hibernate-version}</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-ehcache</artifactId>
            <version>${org.hibernate-version}</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.3.0.Final</version>
        </dependency>

        <dependency>
            <groupId>javassist</groupId>
            <artifactId>javassist</artifactId>
            <version>3.12.1.GA</version>
        </dependency>

        <dependency>
            <groupId>commons-dbcp</groupId>
            <artifactId>commons-dbcp</artifactId>
            <version>1.4</version>
        </dependency>

        <dependency>
             <groupId>cglib</groupId>
             <artifactId>cglib</artifactId>
             <version>2.2.2</version>
             <scope>runtime</scope>
        </dependency>

        <!-- H2 database for testing -->
        <dependency>
            <groupId>com.h2database</groupId>
            <artifactId>h2</artifactId>
            <version>1.3.168</version>
        </dependency>

        <!-- Postgres Connector -->
        <dependency>
            <groupId>postgresql</groupId>
            <artifactId>postgresql</artifactId>
            <version>9.1-901.jdbc4</version>
        </dependency>

        <!-- AspectJ -->
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>${org.aspectj-version}</version>
        </dependency>   

        <!-- Logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.15</version>
            <exclusions>
                <exclusion>
                    <groupId>javax.mail</groupId>
                    <artifactId>mail</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.jms</groupId>
                    <artifactId>jms</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jdmk</groupId>
                    <artifactId>jmxtools</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jmx</groupId>
                    <artifactId>jmxri</artifactId>
                </exclusion>
            </exclusions>
            <scope>runtime</scope>
        </dependency>

        <!-- @Inject -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>

        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>

        <!-- Common utilities -->
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-lang3</artifactId>
            <version>3.1</version>
        </dependency>

    </dependencies>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <additionalProjectnatures>
                        <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                    </additionalProjectnatures>
                    <additionalBuildcommands>
                        <buildcommand>org.springframework.ide.eclipse.core.springbuilder</buildcommand>
                    </additionalBuildcommands>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>${java-version}</source>
                    <target>${java-version}</target>
                    <compilerArgument>-Xlint:all</compilerArgument>
                    <showWarnings>true</showWarnings>
                    <showDeprecation>true</showDeprecation>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <configuration>
                    <mainClass>org.test.int1.Main</mainClass>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

在此示例中，我使用 postgres 连接器，如果您使用其他数据库，则需要更改该依赖项：

```
<!-- Postgres Connector -->
<dependency>
    <groupId>postgresql</groupId>
    <artifactId>postgresql</artifactId>
    <version>9.1-901.jdbc4</version>
</dependency> 
```

# xml - 如何使用 xquery 从 xml 比较 GMT 和 EST 时间

> ID：14262277
> 
> 赞同：0
> 
> 时间：2013-01-10T16:13:33.893
> 
> 标签：xml, xpath, xml-parsing, xquery, exist-db

我遇到了这个问题：我从各种网页获取 rss 提要，然后我需要按日期对它们进行排序。我使用 xquery 进行 xml 操作，使用 eXist 数据库存储 rss/xml。这是我的代码：

```
for $item in subsequence(collection('/db/bla/user/feed')//item[contains(title, $search)], $start, $num)
                 let $title:= $item/title/text()
                 let $desc:= $item/description/text()
                 let $link := $item/link/text()
                 let $date:= $item/pubDate/text()
                 order by $date 
```

这不起作用。而且我认为问题出现在格林威治标准时间和美国东部标准时间的不同时间，因此按 $date 的顺序无法正常工作。请帮忙，我被困在这里。

提前致谢！

**编辑：**

这是我从 pubDate 标签中获取的日期和时间格式：

```
Mon, 10 Dec 2012 13:32:24 EST 
```

或者

```
Mon, 10 Dec 2012 13:32:24 GMT 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:59:11.813

尝试转换`$date`为实际日期/时间：

```
let $date:= xs:dateTime($item/pubDate/text()) 
```

* * *

如果日期/时间的格式一致，您可以实现自己的转换器。在您评论的示例中，会给您带来最多问题的两个部分是月份和时区。月份必须是数字，您需要将时区转换为等效的 UTC 偏移量。

这是一个例子：

```
declare variable $months := ('jan','feb','mar','apr','may','jun','jul','aug','sep','oct','nov','dec');
declare variable $timezoneMap := 
    <map>
        <tz>
            <numeric>-05:00</numeric>
            <alpha>est</alpha>
        </tz>
    </map>;

declare function local:formatDate($origdate as xs:string) as xs:dateTime {
    let $dateTokens := tokenize($origdate,' ')  
    let $timezone := $timezoneMap/tz[lower-case($dateTokens[6])=alpha]/numeric/text()
    let $month := string(index-of($months,lower-case($dateTokens[3])))
    let $newDate := concat($dateTokens[4],'-',if (string-length($month)=1) then concat('0',$month) else $month,'-',$dateTokens[2],
                           'T',$dateTokens[5],$timezone)
    return
        xs:dateTime($newDate)
}; 
```

然后，您可以像这样使用该函数：

```
let $date:= local:formatDate($item/pubDate) 
```

此外，如果您使用的是 XQuery 3.0，您可以使用[地图](http://dev.saxonica.com/blog/mike/2012/01/#000188)作为时区和月份：

```
declare namespace map = "http://www.w3.org/2005/xpath-functions/map";
declare variable $months := map{"jan":="01","feb":="02","mar":="03","apr":="04","may":="05","jun":="06",
                                "jul":="07","aug":="08","sep":="09","oct":="10","nov":="11","dec":="12"};
declare variable $timezoneMap := map{"est":="-05:00"};

declare function local:formatDate($origdate as xs:string) as xs:dateTime {
    let $dateTokens := tokenize($origdate,' ')
    let $newDate := concat($dateTokens[4],'-',$months(lower-case($dateTokens[3])),'-',$dateTokens[2],
                           'T',$dateTokens[5],$timezoneMap(lower-case($dateTokens[6])))
    return
        xs:dateTime($newDate)
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T00:17:26.913

在 XQuery 中构建一些日期格式解析器可能不是最好的主意。您将不得不自己处理所有时区转换的东西（更糟糕的是：夏令时......）。

# 官方方式：DateTime-Module

eXist DB 有自己的基于[`java.text.SimpleDateFormat`](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html). 该模块必须在使用前编译和激活，并且不包含在 eXists 当前的稳定版本中（但包含在 1.4.3 开发者版本和版本 2 预发布中）。

警告，它使用您系统的默认语言环境，在我的情况下不是英语（因此识别日期失败了）。

如果您设法启用它（如果您不这样做，这可能是[Database Administrator](https://dba.stackexchange.com/)的另一个问题，一个 SO 姊妹网站），您应该能够运行此代码来解析给定格式的日期：

```
import module namespace datetime = "http://exist-db.org/xquery/datetime";
datetime:parse-dateTime('Mon, 10 Dec 2012 13:32:24 GMT', 'EEE, d MMM yyyy HH:mm:ss Z') 
```

# 肮脏的黑客：接口Java

如果您正在运行一些旧版本的 eXist 或由于其他原因无法使用该模块，您可以激活 Java 绑定`conf.xml`并直接调用此函数：

```
declare namespace sdtf="java:java.text.SimpleDateFormat";
declare namespace date="java:java.util.Date";

(: Parse given date format to java date :)    
let $parse := sdtf:new('EEE, d MMM yyyy HH:mm:ss Z')
(: Output as close to XQuery's xs:dateTime as possible :)
let $format := sdtf:new("yyyy-MM-dd'T'HH:mm:ss.SSSZ")
let $javadate := sdtf:parse($parse, 'Mon, 10 Dec 2012 13:32:24 GMT')
(: Use regex to insert missing ':' and finally cast to xs:dateTime :)
return xs:dateTime(fn:replace(sdtf:format($format, $javadate), '(.*)(\d{2})', '$1:$2')) 
```

同样，如果默认情况下，请记住将 java 语言环境设置为英语。

*我想这应该至少在 Saxon（定义了这个 java 绑定）和 BaseX（我实际上在这里测试过）中运行良好。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T20:17:06.427

您可以使用 Ryan Grimm 的基于 XQuery 的日期解析器模块。它是为 MarkLogic 构建的，但稍作修改也可以在其他系统上运行。请参阅[https://github.com/marklogic/commons/blob/master/dates/date-parser.xqy](https://github.com/marklogic/commons/blob/master/dates/date-parser.xqy)。

正如模块状态中的注释，它支持的日期格式是：

1.  2006 年 6 月 30 日 09:39:08 -0500
2.  2003 年 4 月 16 日 13:49:06 +0200
3.  2003 年 8 月 4 日 11:44:58 EDT
4.  美国东部时间 98 年 1 月 4 日 0:41
5.  2004 年 10 月 25 日 17:06:46 -0500
6.  0102 年 9 月 23 日星期一 23:14:26 +0900

# vb.net - 有没有办法杀死 vb.net windows 应用程序参考

> ID：14262279
> 
> 赞同：0
> 
> 时间：2013-01-10T16:13:38.333
> 
> 标签：vb.net, window

我们有一个部署在共享服务器上的 vb.net windows 应用程序，并且多个用户在他们的本地计算机上使用它的引用。

问题：每当我们想要部署一个新版本时，我们必须关闭应用程序使用的所有实例，这是不可行的，因此我们需要在每次部署时强制查找并杀死应用程序的所有引用。

我们正在使用活动目录凭据登录到应用程序。所以我们需要找到所有正在使用应用程序实例的活动目录用户。

请让我知道是否有任何方法可以杀死多个用户强行使用的 vb.net windows 应用程序引用。

谢谢，尼基尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:18:38.187

我从您的问题中了解到，您在共享服务器上有一个可执行文件，并且多个用户正在从该位置执行该可执行文件。

如果是这种情况，那么答案是正确打包和部署可执行文件（即到本地用户机器上）！[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)是一个很好的解决方案，它是一项 Microsoft 技术，可以非常简单地部署和升级客户端应用程序。我会推荐它。

# postgresql - Flyway - 管理多个模式不起作用

> ID：14262280
> 
> 赞同：2
> 
> 时间：2013-01-10T16:13:40.333
> 
> 标签：postgresql, flyway

我正在尝试对许多具有相同生命周期的不同 Postgresql 模式进行迁移。根据flyway文档，这种情况应该可行。我的 ANT 脚本中有以下内容：运行迁移时，更改仅应用于第一个（默认）架构。

我做错了什么，还是 flyway.schemas 属性只适用于清洁？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:24:41.580

在处理多个模式时，您仍然必须相应地为对象名称添加前缀。只有列表中的第一个被设置为连接的默认值。

是的，你是对的，clean 将处理所有模式。

# drools - 流口水决策表 - 如何参加第一场比赛？

> ID：14262281
> 
> 赞同：2
> 
> 时间：2013-01-10T16:13:40.833
> 
> 标签：drools

drools 决策表文档（[链接](http://docs.jboss.org/drools/release/5.2.0.Final/drools-expert-docs/html/ch06.html)）指出，可以选择决策表中的第一个匹配行：

> 由于每一行都是规则，因此适用相同的原则。当规则引擎处理事实时，任何匹配的规则都可能触发。（有些人对此感到困惑。可以在触发规则时清除议程并模拟一个非常简单的决策表，其中只有第一个匹配会影响动作。）

这是怎么做到的？我已经设置`Sequential=true`了，但我不确定还需要做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:03:26.560

Drools 提供了一种通过在决策表规则集中定义激活组来解决此问题（仅选择第一个匹配行）的方法。

您的解决方法 maxrules=1 可能仅在您想使用 drools 决策表作为查找表时才有效。在这种情况下，由于只能触发一个规则，因此使用 drools 与使用经典数据库查找表相比没有优势，它只会增加复杂性。

如果您决定使用 drools 或一般的规则引擎，您应该将您的“规则”或“决定”移动到规则定义中，以从其优势（RETE 引擎、灵活性、规则与应用程序代码分离等）中获益最多.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:51:59.177

FireAllRulesCommand 需要作为批处理执行的一部分添加，最大规则设置为 1：

```
 StatelessKnowledgeSession ksession = kbase.newStatelessKnowledgeSession();

    Transaction tx = new Transaction();
    tx.setSenderBin("12345");

    List<Command<?>> commands = new ArrayList<Command<?>>();     
    commands.add(CommandFactory.newInsert( tx ));
    commands.add(new FireAllRulesCommand(1));

    ExecutionResults results = ksession.execute(
        CommandFactory.newBatchExecution(commands)); 
```

- 编辑：请参阅接受的答案以了解首选方式。

# ruby - 在 ruby 中从 iso-2022-jp 转换为 UTF

> ID：14262283
> 
> 赞同：2
> 
> 时间：2013-01-10T16:13:44.373
> 
> 标签：ruby, encoding, imap

我从我们的邮件服务器以 iso-2022-jp 获取一个字符串，但我无法将其转换为 UTF。

```
sub #=> "=?iso-2022-jp?Q?Auto-Asia-JP-1=1B$B$N$4M=3DLsFbMF$N3NG'=1B(B?="
sub.encoding  #=> #<Encoding:US-ASCII> 
```

我尝试过使用 Encoding::Converter。

```
ec = Encoding::Converter.new("ISO-2022-JP", "UTF-8")
ec.convert(sub)    #=> "=?iso-2022-jp?Q?Auto-Asia-JP-1=1B$B$N$4M=3DLsFbMF$N3NG'=1B(B?=" 
```

我也尝试过去掉字符串的第一部分、字符串的最后部分以及它们之间的所有组合。Ruby 认为 sub 是 ASCII，但如果我尝试通过使用 force_encoding 告诉它它是 ISO-2022-JP，那么它会吐出垃圾。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T17:43:27.640

该字符串是 ascii：非 ascii 标头在发送之前以 ascii 编码，以便它们可以安全地通过仅理解 ascii 的邮件服务器。Q 表示 iso-2022 字节是使用带引号的 printable 编码的。

要解码的字节是

```
Auto-Asia-JP-1=1B$B$N$4M=3DLsFbMF$N3NG'=1B(B 
```

Ruby 可以解码引用的 printable，通过`.unpack("M").first.gsub('_',' ')`它产生

```
Auto-Asia-JP-1\e$B$N$4M=LsFbMF$N3NG'\e(B 
```

如果你`force_encoding('ISO-2022-JP').encode('UTF-8')`在那个字符串上做，我就会得到

```
Auto-Asia-JP-1のご予約内容の確認 
```

虽然我不会说日语，所以这很可能是胡说八道。

您可能想使用诸如邮件 gem 之类的东西进行调查，它了解邮件标头的所有复杂性。

# jfreechart - 如何使用 JFreeChart 绘制狄拉克

> ID：14262284
> 
> 赞同：2
> 
> 时间：2013-01-10T16:13:45.153
> 
> 标签：jfreechart, bar-chart

我想画一个狄拉克（或克罗内克符号，如果你愿意的话），我的意思是在我的图表上用这样的垂直条（没有标签）绘制离散值：

![好例子](../Images/14abd2d2523b7df7189680446341b8d6.png) 我可以用 BarChart 制作它，但它不是很好看......有没有好的方法呢？

编辑：我用了你的方法，我做到了：

![在此处输入图像描述](../Images/722e05f82cb5f07ad6360116ccbb8064.png)

但是你可以看到一些条有不同的颜色，也许是颜色渐变？你知道如何让条都变红吗？

这是代码：

```
public class XYDiscreteBarChart {

    private final Color CHART_BACKGROUND_COLOR = new JPanel().getBackground();
    private final Color CHART_FOREGROUND_COLOR = new JLabel().getForeground();
    private final Color CROSSHAIR_COLOR = Color.BLUE;
    private final String title; // Titre du graphique
    private final String xTitle; // Titre de l'axe des abscisses
    private final String yTitle; // Titre de l'axe des ordonnées
    private final XYDataset dataset; // Les données affichées dans le graphique
    private final boolean isLegendVisible; // Affichage de la légende
    private final boolean isTooltipsVisible; // Affichge des tooltips
    private final boolean isUrlVisible; // Affichage des urls
    private final boolean isGridXVisible; // Affichage de la grille verticale
    private final boolean isGridYVisible; // Affichage de la grille horizontale
    private JFreeChart chart; // Le graphique
    private XYPlot plot; // La zone de dessin des courbes

    public XYDiscreteBarChart(String title, String xAxisLabel, String yAxisLabel, XYDataset dataset, boolean legend,
        boolean tooltip, boolean url) {
        this.title = title;
        this.xTitle = xAxisLabel;
        this.yTitle = yAxisLabel;
        this.isLegendVisible = legend;
        this.isTooltipsVisible = tooltip;
        this.isUrlVisible = url;
        this.dataset = dataset;
        this.isGridXVisible = true;
        this.isGridYVisible = true;

        createChart();
        setChartStyle();
    }

    private void createChart() {
        this.chart = ChartFactory.createXYBarChart(
            this.title,
            this.xTitle,
            false,
            this.yTitle,
            formatDataset(),
            PlotOrientation.VERTICAL,
            this.isLegendVisible,
            this.isTooltipsVisible,
            this.isUrlVisible);
        this.plot = (XYPlot) this.chart.getPlot();
    }

    private void setChartStyle() {
        this.plot.setBackgroundAlpha((float) 0.0);
        this.plot.setDomainCrosshairVisible(this.isGridXVisible);
        this.plot.setDomainCrosshairLockedOnData(true);
        this.plot.setRangeCrosshairVisible(this.isGridYVisible);
        this.plot.setRangeAxisLocation(AxisLocation.TOP_OR_LEFT);
        this.plot.setAxisOffset(new RectangleInsets(5.0, 5.0, 5.0, 5.0));

        this.chart.setBackgroundPaint(this.CHART_BACKGROUND_COLOR);
        this.plot.getDomainAxis(0).setAxisLinePaint(this.CHART_FOREGROUND_COLOR);
        this.plot.getDomainAxis(0).setLabelPaint(this.CHART_FOREGROUND_COLOR);
        this.plot.getDomainAxis(0).setTickLabelPaint(this.CHART_FOREGROUND_COLOR);
        this.plot.getDomainAxis(0).setTickMarkPaint(this.CHART_FOREGROUND_COLOR);
        this.plot.getRangeAxis(0).setAxisLinePaint(this.CHART_FOREGROUND_COLOR);
        this.plot.getRangeAxis(0).setLabelPaint(this.CHART_FOREGROUND_COLOR);
        this.plot.getRangeAxis(0).setTickLabelPaint(this.CHART_FOREGROUND_COLOR);
        this.plot.getRangeAxis(0).setTickMarkPaint(this.CHART_FOREGROUND_COLOR);
        this.plot.setBackgroundPaint(this.CHART_FOREGROUND_COLOR);
        this.plot.setDomainGridlinePaint(this.CHART_FOREGROUND_COLOR);
        this.plot.setRangeGridlinePaint(this.CHART_FOREGROUND_COLOR);
        this.plot.setDomainCrosshairPaint(this.CROSSHAIR_COLOR);
        this.plot.setRangeCrosshairPaint(this.CROSSHAIR_COLOR);

        XYBarRenderer renderer = (XYBarRenderer) this.plot.getRenderer();
        renderer.setBarPainter(createBarPainter());
        renderer.setSeriesPaint(0, Color.RED);
    }

    private IntervalXYDataset formatDataset() {
        final XYSeries series = new XYSeries("Filter Coefficients");

        for (int i = 0; i < this.dataset.getItemCount(0); i++) {
            series.add(this.dataset.getX(0, i), this.dataset.getY(0, i));
        }

        final XYSeriesCollection dataset = new XYSeriesCollection(series);
        return dataset;
    }

    private GradientXYBarPainter createBarPainter() {
        return new GradientXYBarPainter() {

            private static final long serialVersionUID = -1997018568242678921L;

            @Override
            public void paintBar(Graphics2D g2, XYBarRenderer renderer, int row, int column,
                RectangularShape bar, RectangleEdge base) {
                double wCoeff = 0.25;
                double hCoeff = 1.0;
                double newWidth, deltaW, deltaX;

                Rectangle2D rect = bar.getFrame();
                newWidth = rect.getWidth() * wCoeff;
                deltaW = rect.getWidth() - newWidth;
                deltaX = deltaW / 2;
                rect.setRect(rect.getX() + deltaX, rect.getY(), newWidth, rect.getHeight() * hCoeff);
                bar.setFrame(rect);
                super.paintBar(g2, renderer, row, column, bar, base);
            }
        };
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:38:05.267

假设您的意思是箭头，这`XYBarRenderer`似乎是一个可能的起点。您可以将其替换`XYBarPainter`为自定义实现，[例如](https://stackoverflow.com/a/4135087/230513).

# css - CSS psuedo 类在 IE9 中不起作用

> ID：14262286
> 
> 赞同：0
> 
> 时间：2013-01-10T16:13:49.240
> 
> 标签：css, internet-explorer-9

我有一个带有引导程序的 Wordpress 主题，它有一个导航菜单。对于最后一个菜单项，我想使用 :last-child 应用不同的样式。

这是 CSS，在众多样式表之一中的其他样式中：

```
#main-nav ul.menu li:last-child a:hover {
   /* Pink Exam Timetable for Phil */
   border-bottom-color: #F501FF;
   background-color: #4B67A1;
} 
```

在 Chrome 和 Firefox 中一切正常（一如既往），“悬停”在 IE9 和 10 预览版（在 Win 7 上）中运行良好，但由于某种奇怪的原因，“最后一个孩子”在 IE9 和10（在 3 台计算机上测试）。

我已经清除了缓存并尝试了各种方法，但我无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:19:06.533

我在 IE9 上没有任何问题。

```
<ul>
  <li>Text</li>
  <li><a>Text</a></li>
</ul>

li:last-child a:hover {
   /* Pink Exam Timetable for Phil */
   border-bottom-color: #F501FF;
   background-color: #4B67A1;
} 
```

试试这个[**演示**](http://jsfiddle.net/dYxmn/)

问题可能出在您的标记中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-10T16:20:19.560

***注意：我说的是跨浏览器（不仅仅是 IE9...）***

last-child 还不是 100% 跨浏览器友好：

*Internet Explorer 版本 < 9 和 Safari < 3.2 肯定不支持它，尽管 Internet Explorer 7 和 Safari 3.2 确实支持 :first-child，奇怪的是。*

....如果你想有一个 100% 工作的伪第一个：child 会工作：

你可以把它倒过来，这样最后一个就可以满足你的愿望（第一个：子方法）

或手动：

对于您的示例，您可能必须像这样定义类：

CSS：

```
#main-nav ul.menu li .last a:hover {
   /* Pink Exam Timetable for Phil */
   border-bottom-color: #F501FF;
   background-color: #4B67A1;
} 
```

你的html

```
 <ul>
    <li><a href="#">sdfds</a></li>
    <li><a href="#">sdfds</a></li>
    <li class="last"><a href="#">dfgdrg</a></li>
    </ul> 
```

# php - 带有 POST 方法的 FORM 请求刷新单击返回按钮

> ID：14262298
> 
> 赞同：0
> 
> 时间：2013-01-10T16:14:35.477
> 
> 标签：php, forms, browser

> **可能重复：**
> [在提交表单后点击“返回”按钮时防止浏览器警告](https://stackoverflow.com/questions/5687083/prevent-browser-waring-when-you-hit-the-go-back-button-after-form-submit)

当用户使用 POST 方法提交表单后单击返回按钮时，如何避免浏览器刷新错误消息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T16:19:20.013

使用[发布/重定向/获取 (PRG) 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)

1.  向表单处理程序提交表单
2.  使用表单处理程序处理数据
3.  让表单处理程序返回重定向响应而不是 OK 响应
4.  重定向后的显示页面

如果用户单击返回，他们将跳过表单处理程序页面（因为它已重定向），因此他们不会重新提交表单并且不会收到警告。

# parsing - 如何使用 Expect 将一行内联解析为多个变量？

> ID：14262300
> 
> 赞同：1
> 
> 时间：2013-01-10T16:14:37.570
> 
> 标签：parsing, tcl, expect

我正在尝试解析如下所示的单行文本：

```
废话 A=1234 B=5678 C=9999 废话
```

我想用该行的值填充三个变量 AB 和 C。

理想情况下，我想使用一个类似于以下伪代码的期望脚本：

文件.exp：

```
expect {
    "*A=" $A " B=" $B " C=" $C " *\r\n"
} 
```

显然这不会运行，但你可以看到我正在尝试做的事情。我知道我可以做一些类似下面的代码的事情，但它需要大量的打字并且不那么可读：

```
expect {
    * {
        set line split $expect_out(buffer) " "
        set A lindex (split (lindex $line 3) "=") 1
        set B lindex (split (lindex $line 4) "=") 1
        set C lindex (split (lindex $line 5) "=") 1
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T21:16:14.717

如果您不知道变量名称的名称，那么这是非常通用的：

```
expect {
    -re {(\w+)=(\S+)} {
        lappend variables $expect_out(1,string)
        set $expect_out(1,string) $expect_out(2,string)
        exp_continue
    }
    eof
}
foreach varname $variables {puts "$varname=[set $varname]"} 
```

您应该根据需要更改`eof`条件——在没有适当退出条件的情况下，expect 块将陷入无限循环（取决于您的超时值）。

此外，我的正则表达式不适用于带有空格的值，例如`X="a string"`. 显然，这取决于您期望遇到的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T19:48:55.753

这是一种方法：

```
expect -re {^.*A=(\d+)\s+B=(\d+)\s+C=(\d+).*$} {
    set A $expect_out(1,string)
    set B $expect_out(2,string)
    set C $expect_out(3,string)
    # Do something with $a, $b, and $c
} 
```

该`-re`标志告诉 expect 使用正则表达式，并将结果解析为`$expect_out(1,string)`, ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T17:43:01.110

Tcl 的“scan”命令和 sscanf 一样工作：

```
expect * {
    scan $expect_out(buffer) "A=%i B=%i C=%i" A B C
} 
```

# java - 与 WSDL 关联的类文件

> ID：14262301
> 
> 赞同：0
> 
> 时间：2013-01-10T16:14:41.403
> 
> 标签：java, web-services, wsdl

有没有办法使用 Eclipse 或其他实用程序获取用于构建 Web 服务的关联类文件列表？

服务类型是自顶向下的 java bean web 服务

我想知道 WSDL 如何知道要创建哪些类。而且我不确定要查看哪些文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:59:17.707

我最终做的是

1.  打开 WebContent/WEB-INF/wsdl/ 中的 .WSDL 文件
    这允许您查看 WSDL 的源代码或设计视图。
2.  然后单击设计视图中图表旁边的所需输入或输出箭头。这将打开关联的 XSD 文件。
3.  在 XSD 文件中，如果我找到`<xs:complexType name="classNameWillBeHere">`标签，这些就是生成的类的名称。
4.  从那里我做一个导航/查找类型 - 使用复杂类型的类名。
5.  该类在项目 src 文件夹中返回。（假设您已经从 WSDL 构建了 Web 服务）

# javascript - 连接到 Google Analytics APi NodeJS 的问题

> ID：14262302
> 
> 赞同：1
> 
> 时间：2013-01-10T16:14:42.130
> 
> 标签：javascript, node.js, express, google-api, google-analytics-api

我在 NodeJS 中编写了一个应该连接到 GA 的模块。我编写了一个授权模块，并将 [https://www.googleapis.com/auth/analytics](https://www.googleapis.com/auth/analytics)添加到范围。这很有效，我从 Google API 收到了一个令牌。

使用此令牌，我尝试连接到 Google Analytics API，但收到 ECONNRESET 错误，套接字挂断。

[我在http://code.google.com/apis/console](http://code.google.com/apis/console)仔细检查了应用程序是否有权与 GA APi 交谈。

这是我用来连接 API 的选项。

```
host: 'www.googleapis.com',
port: 443,
path: '/analytics/v3/management/accounts',
method: 'GET',
headers: { Authorization: '********' } 
```

有人知道出了什么问题吗？

谢谢！

# javascript - iPad 全屏模式：打开 URL **就像是链接一样**

> ID：14262304
> 
> 赞同：0
> 
> 时间：2013-01-10T16:14:44.533
> 
> 标签：javascript, ios, html, ipad, mobile-safari

我想做与此**相反**的[事情](https://stackoverflow.com/a/7390672/340947)。

基本上我有一个 JS 字符串中的 URL，我想导航到它，但我希望它在 Safari 应用程序中打开它，所以我可以切换回全屏应用程序以继续原始页面。

由于全屏模式下没有后退按钮，因此通过使用`window.open`或设置或类似的方式将无法返回。`location.href`

我试图`<a>`用设置为 url 来制作一个虚拟标签`href`，但我发现没有办法用 jQuery 触发点击它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T19:44:52.153

使用“initMouseEvent”触发点击`Document.createEvent('MouseEvents')`然后使用“initMouseEvent”对其进行初始化可以模拟点击。

# iphone - 来自 UITextField 输入的动态大小的 UITableView

> ID：14262310
> 
> 赞同：0
> 
> 时间：2013-01-10T16:15:03.263
> 
> 标签：iphone, ios, objective-c, uitableview

我正在寻找的内容类似于 iOS 联系人应用程序中的内容：例如，在添加电子邮件时，最初只有一个 UITextField。但是，当您开始输入时，下面会添加另一个 UITextField 等，因此您可以添加任意数量的行，并根据需要删除行。

如何使用普通的 UITableView 实现类似的功能？我添加了一个 UITableViewCell 原型，其中有一个 UITextField，但我不确定如何处理动态调整大小行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:25:55.537

我相信使用 UITableView 是一个很好的方法。考虑动态地将单元格添加到您的表格中。按此顺序使用 UITableView 的以下方法：

*   (void)beginUpdates
*   (void)insertRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation
*   (void)endUpdates

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:28:42.623

遵循 UITableView 类参考。在那里，您可以通过 [table reloadData] 方法更改表格单元格的高度。你可以通过它的方法从 UITextField 获取行数。检查 UITextfield 类参考。

最好在开始之前参考 ClassReference。

谢谢。

# android - java.lang.IllegalStateException：在使用 DialogFragment 的 onSaveInstanceState 之后无法执行此操作

> ID：14262312
> 
> 赞同：34
> 
> 时间：2013-01-10T16:15:09.190
> 
> 标签：android, illegalstateexception, android-dialogfragment, android-support-library

我面临 DialogFragment / getSupportFragmentManager / Android 版本 4.x 的问题

```
01-10 19:46:48.228: E/AndroidRuntime(9879): java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState
01-10 19:46:48.228: E/AndroidRuntime(9879):     at android.support.v4.app.FragmentManagerImpl.checkStateLoss(FragmentManager.java:1314)
01-10 19:46:48.228: E/AndroidRuntime(9879):     at android.support.v4.app.FragmentManagerImpl.enqueueAction(FragmentManager.java:1325)
01-10 19:46:48.228: E/AndroidRuntime(9879):     at android.support.v4.app.BackStackRecord.commitInternal(BackStackRecord.java:548)
01-10 19:46:48.228: E/AndroidRuntime(9879):     at android.support.v4.app.BackStackRecord.commit(BackStackRecord.java:532)
01-10 19:46:48.228: E/AndroidRuntime(9879):     at android.support.v4.app.DialogFragment.show(DialogFragment.java:127)
01-10 19:46:48.228: E/AndroidRuntime(9879):     at com.v1.mypck.TermsAndConditions.showDialog(TermsAndConditions.java:256)
01-10 19:46:48.228: E/AndroidRuntime(9879):     at com.v1.mypck.TermsAndConditions.handleMessage(TermsAndConditions.java:62)
01-10 19:46:48.228: E/AndroidRuntime(9879):     at com.v1.mypck.TermsAndConditions$IncomingHandler.handleMessage(TermsAndConditions.java:53)
01-10 19:46:48.228: E/AndroidRuntime(9879):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-10 19:46:48.228: E/AndroidRuntime(9879):     at android.os.Looper.loop(Looper.java:137)
01-10 19:46:48.228: E/AndroidRuntime(9879):     at android.app.ActivityThread.main(ActivityThread.java:4441)
01-10 19:46:48.228: E/AndroidRuntime(9879):     at java.lang.reflect.Method.invokeNative(Native Method)
01-10 19:46:48.228: E/AndroidRuntime(9879):     at java.lang.reflect.Method.invoke(Method.java:511)
01-10 19:46:48.228: E/AndroidRuntime(9879):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-10 19:46:48.228: E/AndroidRuntime(9879):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-10 19:46:48.228: E/AndroidRuntime(9879):     at dalvik.system.NativeStart.main(Native Method) 
```

在下面的代码中，当我按下它时，它会尝试完成当前活动并返回到以前的活动，它会抛出上述错误。

代码在旧版本（4.x 之前）上运行良好。

有人可以指导我正确的方向。

```
public class TermsAndConditions extends SherlockFragmentActivity implements LoaderManager.LoaderCallbacks<JSONObject>{
    static final String TAG = "TermsAndConditions";
    private static int titleResource;
    private static int messageResource;

    private IncomingHandler handler = null;
    private static final int SHOW_NETWORK_DIALOG = 3;

    static class IncomingHandler extends Handler {
        private final WeakReference<TermsAndConditions> mTarget; 

        IncomingHandler(TermsAndConditions target) {
            mTarget = new WeakReference<TermsAndConditions>(target);
        }

        @Override
        public void handleMessage(Message msg) {
            TermsAndConditions target = mTarget.get();
            if (target != null) {
                target.handleMessage(msg);
            }
        }
    }
    public void handleMessage(Message msg) {
        switch (msg.what)  {
            case SHOW_NETWORK_DIALOG:
                titleResource = R.string.msg_alert_no_network_title;
                messageResource = R.string.msg_alert_no_network_message;
                showDialog();
                break;
        }
    }
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.web_view);

        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        getSupportLoaderManager().initLoader(0, null, this);
    }
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                finish();
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }
    private void loadViewData() {
        //Logic to load content.
    }

    @Override
    public Loader<JSONObject> onCreateLoader(int arg0, Bundle arg1) {
        if (handler == null){
            handler = new IncomingHandler(TermsAndConditions.this);
        }
        return new JsonLoader(this);
    }

    @Override
    public void onLoadFinished(Loader<JSONObject> arg0, JSONObject jsonData) {
        if(jsonDataObject==null || jsonDataObject.length()==0) {
            handler.sendEmptyMessage(SHOW_NETWORK_DIALOG);
        } else {
            loadViewData();
        }
    }

    @Override
    public void onLoaderReset(Loader<JSONObject> arg0) {
        if(jsonDataObject==null || jsonDataObject.length()==0) {
            handler.sendEmptyMessage(SHOW_NETWORK_DIALOG);
        } else {
            loadViewData();
        }
    }

    public static class JsonLoader extends AsyncTaskLoader<JSONObject> {
        public JsonLoader(Context context) {
            super(context);
        }

        @Override 
        protected void onStartLoading() {
            if (jsonDataObject != null) {
                deliverResult(jsonDataObject);
            }
            if (takeContentChanged() || jsonDataObject == null) {
                forceLoad();
            }
        }

        @Override
        public JSONObject loadInBackground() {
            try {
                return response.getJSONObject("result");
            } catch (JSONException e) {
                return null;
            } catch (Throwable e) {
                return null;
            }
        }

        @Override 
        public void deliverResult(JSONObject newJsonData) {
            if (isReset()) {
                if (jsonDataObject != null) {
                    onReleaseResources(jsonDataObject);
                }
            }
            JSONObject oldData = jsonDataObject;
            jsonDataObject = newJsonData;
            if (isStarted()) {
                super.deliverResult(jsonDataObject);
            }
            if (oldData != null) {
                onReleaseResources(oldData);
            }
        }

        @Override 
        protected void onStopLoading() {
            cancelLoad();
        }

        @Override public void onCanceled(JSONObject jsonData) {
            super.onCanceled(jsonData);
            onReleaseResources(jsonData);
        }

        @Override protected void onReset() {
            super.onReset();
            onStopLoading();
            if (jsonDataObject != null) {
                onReleaseResources(jsonDataObject);
                jsonDataObject = null;
            }
        }

        protected void onReleaseResources(JSONObject jsonData) {
            jsonData = null;
        }
    }
    public static class MyAlertDialogFragment extends DialogFragment {
        public static MyAlertDialogFragment newInstance(int title) {
            MyAlertDialogFragment frag = new MyAlertDialogFragment();
            Bundle args = new Bundle();
            args.putInt("title", title);
            frag.setArguments(args);
            return frag;
        }

        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {
            int title = getArguments().getInt("title");
            return new AlertDialog.Builder(getActivity())
                    .setTitle(title)
                    .setMessage(messageResource)
                    .setPositiveButton(R.string.alert_dialog_ok,
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int whichButton) {

                            }
                        }
                    )
                    .create();
        }
    }
    public void showDialog() {
        DialogFragment newFragment = MyAlertDialogFragment.newInstance(titleResource);
        newFragment.show(getSupportFragmentManager(), "my_dialog");
    }
} 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-05T16:48:52.960

这是另一个线程中的答案：

[onActivityResult 中的操作和“错误在 onSaveInstanceState 后无法执行此操作”](https://stackoverflow.com/questions/12105064/actions-in-onactivityresult-and-error-can-not-perform-this-action-after-onsavei)

也在这里：

[刷新我的片段没有像我认为的那样工作](https://stackoverflow.com/questions/6628215/refreshing-my-fragment-not-working-like-i-thought-it-should)

这是解决此问题的示例：

```
DialogFragment loadingDialog = createDialog();

FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
                    transaction.add(loadingDialog, "loading");
                    transaction.commitAllowingStateLoss(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-26T03:13:29.653

我遇到了同样的问题，我将代码更改如下

```
newFragment.show(transactionFragment, "dialog"); 
```

至：

```
transactionFragment.add(android.R.id.content, newFragment).addToBackStack(null).commitAllowingStateLoss(); 
```

完成的代码对我来说效果很好，希望对我有所帮助

```
FragmentTransaction transactionFragment = getActivity().getSupportFragmentManager().beginTransaction();
    DialogPageListFragment newFragment = new DialogPageListFragment();
    transactionFragment.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);
    newFragment.setArguments(extras);
    transactionFragment.add(android.R.id.content, newFragment).addToBackStack(null).commitAllowingStateLoss(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-10T16:22:24.557

响应 HandleMessage 的处理程序可能与已销毁的活动相关联。

即：如果你旋转屏幕，旧的被销毁的activity会处理消息，然后你会调用showDialog，会抛出异常：

在旧的销毁活动调用他的 onSaveInstanceState 之后，您正在创建一个对话框。

尝试用新创建的活动替换回调，以确保您始终在活动活动中创建对话框。

* * *

如果您不旋转，请在 onSaveInstance 上放置一个标志，如“保存”，并在 onRestoreInstance 上禁用它。在您的 handleMessage 方法中，如果“正在保存”标志打开，则不显示对话框，只需打开另一个标志，指示必须在 onResume 上创建对话框。然后在 onResume 方法上，检查是否在该过程的中间，您应该创建对话框，如果是，则在 onResume 方法上显示它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-13T09:15:19.100

```
fragmentView.post(() -> {
    FragmentTransaction ft = getActivity().getSupportFragmentManager().beginTransaction();
    YourDialog yourDialog = YourDialog.newInstance();
    yourDialog.show(ft, "text_data");
}); 
```

在这种情况下，post() 方法的目标是等待 Activity 或 Fragment 的 onResume() 完成。如果您想从 Fragment 显示 DialogFragment，它可以工作。当您想在系统对话框关闭后显示您的对话框时。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-17T19:22:20.313

在延迟 Runnables handler.postDelayed(Runnable runnable, long delay) 后，我遇到了同样的问题。

我已经通过这种方式解决了这个问题：

1.  在 onSaveInstanceState 我取消了延迟的任务
2.  在 onRestoreInstanceState 中，如果在销毁活动时有延迟的任务，我会重新创建任务

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-19T07:48:49.043

答案为时已晚，但可能是正确的答案。我创建了一个父类，并且对话框片段从它扩展

```
 public class BaseDialogFragment extends DialogFragment {

@Override
public void show(FragmentManager manager, String tag) {
    try {
        FragmentTransaction ft = manager.beginTransaction();
        ft.add(this, tag).addToBackStack(null);
        ft.commitAllowingStateLoss();
    } catch (IllegalStateException e) {
        Log.d("ABSDIALOGFRAG", "Exception", e);
    }
}

boolean mIsStateAlreadySaved = false;
boolean mPendingShowDialog = false;

@Override
public void onResume() {
    onResumeFragments();
    super.onResume();
}

public void onResumeFragments(){
    mIsStateAlreadySaved = false;
    if(mPendingShowDialog){
        mPendingShowDialog = false;
        showSnoozeDialog();
    }
}

@Override
public void onPause() {
    super.onPause();
    mIsStateAlreadySaved = true;
}

private void showSnoozeDialog() {
    if(mIsStateAlreadySaved){
        mPendingShowDialog = true;
    }else{
        FragmentManager fm = getFragmentManager();
        BaseDialogFragment snoozeDialog = new BaseDialogFragment();
        snoozeDialog.show(fm, "BaseDialogFragment");
    }
} 
```

}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-25T06:37:28.133

**onPostResume()** 使用 post resume 方法来完成您的工作。我认为您在 onRestart 或 onResume 中调用了显示对话框方法，因此请避免使用它并使用**onPostResume()**来显示您的对话框。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-13T16:23:43.100

有用：

```
CheckinSuccessDialog dialog = new CheckinSuccessDialog();
//dialog.show(getSupportFragmentManager(), null);
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.add(dialog, null);
ft.commitAllowingStateLoss(); 
```

但仍然很糟糕，因为出现错误“活动已被破坏”</p>

```
 ava.lang.IllegalStateException: Activity has been destroyed fragmentTransaction.commitAllowingStateLoss(); 
```

所以我的解决方案是添加检查`if (!isFinishing()&&!isDestroyed())`

```
CheckinSuccessDialog fragment = CheckinSuccessDialog.newInstance();

  if (fragment instanceof DialogFragment) {
                DialogFragment dialog = (DialogFragment) fragment;
                if (!dialog.isAdded()) {
                    fragmentTransaction.add(dialog, 
                          CheckinSuccessDialog.class.getName());
                    if (!isFinishing()&&!isDestroyed()) {
                        fragmentTransaction.commitAllowingStateLoss();
                    }
                } 
```

解雇时：

```
 FragmentTransaction fragmentTransaction = getSupportFragmentManager().beginTransaction();
            Fragment fragment = getSupportFragmentManager().findFragmentByTag(CheckinSuccessDialog.class.getName());
            if (fragment != null && fragment instanceof DialogFragment) {
                DialogFragment dialog = (DialogFragment) fragment;
                dialog.dismiss();
                if (!isFinishing()&&!isDestroyed()) {
                    fragmentTransaction.commitAllowingStateLoss();
                }
            } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-02-01T09:51:53.247

您可以检查当前活动是否为 Active()，并且仅在这种情况下启动 DialogFragment 的片段事务。我有一个类似的问题，这个检查解决了我的问题。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-11-09T09:24:18.880

在**Activity**中，在显示**对话框**之前，您可以执行以下操作

```
getSupportFragmentManager().executePendingTransactions(); 
```

这对我有用。

# python - 列出附近/可发现的蓝牙设备，包括已配对的，在 Python 中，在 Linux 上

> ID：14262315
> 
> 赞同：15
> 
> 时间：2013-01-10T16:15:19.610
> 
> 标签：python, linux, bluetooth

我正在尝试在 Linux 上使用 Python列出所有附近/可发现的蓝牙设备，*包括那些已经配对的设备。*

我知道如何使用其地址列出设备的服务，并且可以成功连接：

```
services = bluetooth.find_service(address='...') 
```

阅读 PyBluez 文档，如果我不指定任何标准，我希望附近的任何设备都会出现：

> “如果没有指定标准，则返回检测到的所有附近服务的列表。”

我现在需要的“唯一”事情是能够列出已经配对的设备，无论它们是否打开、关闭、附近。就像我在 Ubuntu/Unity 中的所有设置 --> 蓝牙中得到的列表一样。

顺便说一句，以下*没有*列出我机器上已经配对的设备，即使它们在/附近也是如此。可能是因为一旦配对就无法发现它们：

```
import bluetooth
for d in bluetooth.discover_devices(flush_cache=True):
    print d 
```

有任何想法吗 ...？

**编辑：**我找到并安装了“bluez-tools”。

```
bt-device --list 
```

...给我我需要的信息，即添加设备的地址。

我检查了 C 源代码，发现这可能不像我想象的那么容易。

仍然不知道如何在 Python 中执行此操作...

**编辑：**我认为 DBUS 可能是我应该阅读的内容。似乎够复杂。如果有人有一些代码可以分享，我会非常高兴。:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T11:27:32.903

我设法自己解决了这个问题。以下片段列出了我的默认蓝牙适配器上所有配对设备的地址：

```
import dbus

bus = dbus.SystemBus()

manager = dbus.Interface(bus.get_object('org.bluez', '/'), 'org.bluez.Manager')

adapterPath = manager.DefaultAdapter()

adapter = dbus.Interface(bus.get_object('org.bluez', adapterPath), 'org.bluez.Adapter')

for devicePath in adapter.ListDevices():
    device = dbus.Interface(bus.get_object('org.bluez', devicePath),'org.bluez.Device')
    deviceProperties = device.GetProperties()
    print deviceProperties["Address"] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-08-26T17:44:04.833

由于采用蓝牙 API 的第 5 版，@Micke 解决方案中使用的大部分功能都被删除了，与总线的交互通过 ObjectManager.GetManagedObjects [1] 进行

```
import dbus

def proxyobj(bus, path, interface):
    """ commodity to apply an interface to a proxy object """
    obj = bus.get_object('org.bluez', path)
    return dbus.Interface(obj, interface)

def filter_by_interface(objects, interface_name):
    """ filters the objects based on their support
        for the specified interface """
    result = []
    for path in objects.keys():
        interfaces = objects[path]
        for interface in interfaces.keys():
            if interface == interface_name:
                result.append(path)
    return result

bus = dbus.SystemBus()

# we need a dbus object manager
manager = proxyobj(bus, "/", "org.freedesktop.DBus.ObjectManager")
objects = manager.GetManagedObjects()

# once we get the objects we have to pick the bluetooth devices.
# They support the org.bluez.Device1 interface
devices = filter_by_interface(objects, "org.bluez.Device1")

# now we are ready to get the informations we need
bt_devices = []
for device in devices:
    obj = proxyobj(bus, device, 'org.freedesktop.DBus.Properties')
    bt_devices.append({
        "name": str(obj.Get("org.bluez.Device1", "Name")),
        "addr": str(obj.Get("org.bluez.Device1", "Address"))
    }) 
```

在`bt_device`列表中有包含所需数据的字典：即

例如

```
[{
    'name': 'BBC micro:bit [zigiz]', 
    'addr': 'E0:7C:62:5A:B1:8C'
 }, {
    'name': 'BBC micro:bit [putup]',
    'addr': 'FC:CC:69:48:5B:32'
}] 
```

参考：[1] [http://www.bluez.org/bluez-5-api-introduction-and-porting-guide/](http://www.bluez.org/bluez-5-api-introduction-and-porting-guide/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-10T21:09:44.180

您总是可以将其作为 shell 命令执行并读取它返回的内容：

```
import subprocess as sp
p = sp.Popen(["bt-device", "--list"], stdin=sp.PIPE, stdout=sp.PIPE, close_fds=True)
(stdout, stdin) = (p.stdout, p.stdin)
data = stdout.readlines() 
```

现在`data`将包括所有输出行的列表，您可以根据需要对其进行格式化和播放。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-20T11:47:54.490

有点长，但在一行中就可以了

```
bt-device -l | egrep '\(.*\)' | grep -oP '(?<=\()[^\)]+' | xargs -n1 bt-device -i 
```

# linux - bash脚本错误

> ID：14262316
> 
> 赞同：-1
> 
> 时间：2013-01-10T16:15:22.557
> 
> 标签：linux, bash

```
#!/bin/bash
while read -r line; do
mkdir "UNIX/$line"
done < usernames.lnk 
```

运行下面显示的脚本时出现此错误。我检查了任何拼写错误，但脚本和用户名文件都在同一个文件夹中，但它无法检测到该文件。

```
/home/user/Documents/New/taskscript.sh: line 4: usernames.lnk: No such file or directory 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:22:10.463

该脚本将在当前文件夹（即您*启动*它的文件夹，而不是存储它的文件夹）中查找文件。

试试这个代码：

```
#!/bin/bash

# Determine folder in which this script is stored
BASE=$( cd $( dirname "$0" ) > /dev/null ; pwd )

while read -r line; do
mkdir "UNIX/$line"
done < "$BASE/usernames.lnk" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:20:55.060

运行脚本时，用户名文件需要位于当前目录中 - 将其与脚本放在同一目录中只会在您从该目录调用脚本时起作用。

如果您希望能够从任何地方调用该脚本，您应该在最后一行使用完整路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:19:40.823

尝试使用

```
./usernames.lnk 
```

代替

```
usernames.lnk 
```

# cakephp - 将用 cakephp 开发的网站内容发布到 tubmlr 和 blogger

> ID：14262320
> 
> 赞同：0
> 
> 时间：2013-01-10T16:15:32.240
> 
> 标签：cakephp, tumblr

我有一个用 CakePHP 开发的网站，用户在登录后会将他们的收藏添加到不同的类别中。

目前我有 word-press 插件，它将使用 cURL 获取各个用户的这些集合，并将在用户博客中发布。

cURL 请求将被发送到 CakePHP 控制器中的函数，该控制器返回编码的 JSON 数据。

现在我需要如何以与 wordpress 插件相同的方式将这些用户的集合发布到 Tumblr。有人可以更详细地建议我吗？

# ios - 谷歌地图（api v3）在使用 PhoneGap 框架的移动 ios 上每 20 或 30 次不显示 1 次

> ID：14262328
> 
> 赞同：0
> 
> 时间：2013-01-10T16:15:51.677
> 
> 标签：ios, cordova, mobile, google-maps-api-3

它每隔一段时间就会显示一个空白屏幕。

我想使用 MapKit，但 PhoneGap 的插件非常过时并且无法正常工作。所以我被迫使用 Google Maps Api (v3)。它工作得很好，除了偶尔地图不加载。这可能是什么原因造成的？有没有办法检测到地图没有加载然后重试？

谢谢

# iis-7 - Nuget 服务器在推送或删除包时响应 (405) Method Not Allowed

> ID：14262335
> 
> 赞同：5
> 
> 时间：2013-01-10T16:16:04.007
> 
> 标签：iis-7, iis-7.5, nuget, nuget-server

尝试将包推送到 Windows 2008 R2 Enterprise 上的 IIS 7.5 上托管的本地托管 Nuget 服务器（Nuget.Server 包）时，我收到 (405) Method Not Found 错误。

为 nuget 服务器（称为 Nuget）配置了一个专用 IIS 站点，并绑定到特定端口（81 为乐趣）。

应用程序池设置为 .NET Framework 4.0 并处于集成管道模式。

我知道我可能需要启用 PUT 和 DELETE 动词，但不知道哪个处理程序负责处理 Nuget 请求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:16:04.007

在集成管道模式下，正确的处理程序是 svc-Integrated-4.0 处理程序。

我通过反复试验和阅读[Codeplex 上 Nuget Server 的源代码](http://nuget.codeplex.com/SourceControl/changeset/view/dd796f3c1f24#src/Server/DataServices/Packages.svc)发现了这一点。

[这篇关于 ASP.NET 如何处理您的请求](http://msdn.microsoft.com/en-us/magazine/cc188942.aspx)的文章对于理解幕后发生的事情也很有帮助。

此外，要使此答案正确，您需要确保应用程序池处于**集成管道**模式而不是**经典**模式。

下面列出了需要更改的 Web.config 的相关部分，特别是现在支持的动词列表。

```
<system.webServer>
    <handlers>
        <remove name="svc-Integrated-4.0" />
        <add name="Elmah" path="elmah.axd" verb="POST,GET,HEAD" type="Elmah.ErrorLogPageFactory, Elmah" preCondition="integratedMode" />
        <add name="svc-Integrated-4.0" path="*.svc" verb="GET,PUT,POST,DELETE,DEBUG" type="System.ServiceModel.Activation.ServiceHttpHandlerFactory, System.ServiceModel.Activation, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-03T11:43:04.793

添加`<remove name="WebDAVModule" />`到`system.webServer/modules`对我来说很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-08T07:23:56.150

我刚遇到这个问题。虽然大多数错误与某些配置更改有关，但值得一提的是，如果您只指定主机名而不是 url，则会发生此错误。

错误的：
`nuget push MyPackage.1.0.nupkg -Source nuget.company.org -ApiKey ...`

对：
`nuget push MyPackage.1.0.nupkg -Source http://nuget.company.org -ApiKey ...`

愚蠢的错误

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-02T06:00:04.153

WebDAV 也是一个关于推送包的问题，​​如这里所述[禁用 WebDAV](https://github.com/NuGet/NuGetGallery/issues/514)，您可以通过 web.config 禁用 webdev。

还要确保您的应用程序池的 IIS 用户对 nuget 服务器文件夹结构中的 Packages 文件夹具有 WRITE 权限

最后，确保您已指定 api 密钥，或添加 appsettings 密钥

```
<add key="requireApiKey" value="false" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-18T17:25:43.343

对于从搜索引擎登陆但没有运行自己的 Nuget 服务器的其他任何人：405 错误的另一个原因只是一个过时的 Nuget.exe。检查 nuget.exe 上的版本并进行更新。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-02-01T22:51:11.287

经过几次尝试

```
Handler Mappings > ExtensionlessUrl-Handler-ISAPI-4.0_64bit > Verbs > Check "All verbs"
Handler Mappings > ExtensionlessUrl-Handler-ISAPI-4.0_32bit > Verbs > Check "All verbs" 
```

# css - 如何让 div 扩展到其可变高度的父 div 的完整高度？

> ID：14262337
> 
> 赞同：0
> 
> 时间：2013-01-10T16:16:03.837
> 
> 标签：css, height

我有一个容器 div，其中有一个左 div 和一个主 div。左 div 需要与主 div 具有相同的高度，即使主 div 比左 div 的内容高得多。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:25:12.380

大多数现代 (IE8+) 浏览器都支持`display:table`，因此您可能希望使用此解决方案：

**[演示](http://jsfiddle.net/TPBSW/1)**

```
.div1 {
  /* ... */
  display:table;        /* display table on parent*/
}
.div2, {
    /* ... */
    width:50%; 
    display:table-cell; /* display table-cell on children*/
}
.div3 {
    /* ... */
    width:50%; 
    display:table-cell;
 } 
```

# c# - Linq 通过比较 2 个属性值从列表 1 中选择存在于列表 2 中的元素

> ID：14262341
> 
> 赞同：2
> 
> 时间：2013-01-10T16:16:18.680
> 
> 标签：c#, linq, filter

如何从 2 个不同的列表中提取找到以下表达式的所有元素

```
List1.id = List2.id && List1.CategoryId = list2.CategoryId 
```

以及如何通过提取主列表中缺少的元素来做相反的事情

```
!(List1.id = List2.id && List1.CategoryId = list2.CategoryId) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:19:37.010

您可以为您的数据类型实现一个简单`IComparer`的并使用

```
 var intersection = List1.Intersect(List2, myCategoryIdComparer);

 var notRepeating = List1.Union(List2).Except(intersection);

 var notInList1 = List2.Except(List1, myCategoryIdComparer); 
```

您可以`IComparer`轻松实现：

```
 public class CategoryComparer : IComparer  { 
          int IComparerList1.CompareIntersect( Object x, Object y )  {
          // do some type checks to make sure both are CategoryObject
          return ((CategoryObject)x).CategoryID
              .Compare(((CategoryObject)y).CategoryIdmyCategoryIdComparer);
      } 
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:27:27.097

您也可以使用`join`子句，尽管它需要您初始化许多匿名类型。

```
var result = (from l1 in list1
              join l2 in list2 on new {l1.Id, l1.Category} 
              equals new {l2.Id, l2.Category}
              select l1).ToArray(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T16:31:41.963

所以第一种情况是你的基本`Join`操作，Linq 支持：

```
var matchingItems = from item1 in list1
            join item2 in list2
            on new{ item1.id, item1.CategoryId} 
            equals new{ item2.id, item2.CategoryId}
            select new { item1, item2 }; 
```

对于第二种情况：

```
var idValues = list2.Select(item => new { item.id, item.CategoryId })
    .ToHashSet();
var missingItems = list1.Where(item => !idValues.Contains(new { item.id, item.CategoryId })); 
```

这是 的定义`ToHashSet`：

```
public static class Extensions
{
    public static HashSet<T> ToHashSet<T>(this IEnumerable<T> source)
    {
        return new HashSet<T>(source);
    }
} 
```

# asp.net - 我可以在 ASMX JSON 服务上设置 HTTP 响应代码并引发异常吗？

> ID：14262344
> 
> 赞同：11
> 
> 时间：2013-01-10T16:16:28.047
> 
> 标签：asp.net, error-handling, asmx, http-status-codes, webmethod

在响应 JSON 的 ASP.NET ASMX WebMethod 中，我可以同时抛出异常并设置 HTTP 响应代码吗？我想如果我抛出一个 HttpException，状态码会被适当地设置，但它不能让服务响应任何东西，除了 500 错误。

我尝试了以下方法：

```
[WebMethod]
[ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
public void TestWebMethod() {
    throw new HttpException((int)HttpStatusCode.BadRequest, "Error Message");
} 
```

还：

```
[WebMethod]
[ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
public void TestWebMethod() {
    try {
        throw new HttpException((int)HttpStatusCode.BadRequest, "Error Message");
    }
    catch ( HttpException ex ) {
        Context.Response.StatusCode = ex.GetHttpCode();
        throw ex;
    }
} 
```

这些都以 500 响应。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-07T08:56:43.420

将您的代码更改为：

```
[WebMethod]
[ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
public void TestWebMethod() {
    try {
        throw new HttpException((int)HttpStatusCode.BadRequest, "Error Message");
    }
    catch ( HttpException ex ) {
        Context.Response.StatusCode = ex.GetHttpCode();

        // See Markus comment
        // Context.Response.StatusDescription("Error Message");
        // Context.Response.StatusDescription(ex.Message); // exception message
        // Context.Response.StatusDescription(ex.ToString()); // full exception
    }
} 
```

基本上你不能，也就是说，当抛出异常时，结果总是相同的 500。

# sql - LINQ to SQL 类和暂存与生产

> ID：14262347
> 
> 赞同：0
> 
> 时间：2013-01-10T16:16:41.820
> 
> 标签：sql, linq, asp.net-mvc-4

这是一个与 LINQ to SQL 类相关的最佳实践问题，并且有两个 SQL 服务器 - 生产和开发。

我们有一个 MVC 4 项目，我们在 Azure Cloud 上发布。我们有两个自动切换的连接字符串。一种用于生产实例，另一种用于在 localhost 上运行，我们在其中更改数据库的结构并对其进行测试。这部分通过使用效果很好`System.Web.HttpContext.Current.Request.IsLocal`

我们有使用 LINQ to SQL 类的 DB 上下文，但目前，我们还无法弄清楚如何自动切换 DBML 连接字符串。或者可能有两个 DBML——一个用于生产数据库，一个用于测试。

例如，我们在表中添加一个字段，刷新我们连接到测试数据库的 DBML 文件，并对其进行试验。当我们需要发布项目时，我们需要先在生产服务器上更改 SQL 结构，手动更改 DBML 的连接字符串，然后发布。

这是最简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:20:13.143

不，您应该考虑在 web.config 上使用[webdeploy](http://www.iis.net/downloads/microsoft/web-deploy)和[xdt 转换](http://msdn.microsoft.com/en-us/library/dd465326.aspx)。

为了更方便，可以考虑使用[带有迁移的 linq2entities/entity 框架](http://thedatafarm.com/blog/data-access/using-ef-migrations-with-an-existing-database/)而不是 linq2sql ，它允许您在代码中自动升级数据库，因此您不必手动更新部署服务器上的模式。

使用这 3 种技术，您应该能够将部署的痛苦减少到 2 或 3 次点击，一旦您完成所有设置（这本身可能非常痛苦）。

# jquery - 关于属性更改的 jQuery 事件

> ID：14262348
> 
> 赞同：12
> 
> 时间：2013-01-10T16:16:43.150
> 
> 标签：jquery, html

我需要一个函数在 div 数据页索引属性更改时运行

```
 var active = $('.swipeview-active'),
      dpi =  parseInt(active.attr('data-page-index')),
      left = $('[data-page-index="' +prev+ '"]').children("img").eq(0),
      right = $('[data-page-index="' +next+ '"]').children("img").eq(0);

    $(active.attr('data-page-index')).change(function(){

    right.clone( true ). css({'z-index': 5}). fadeIn(2000).appendTo('#right');
    left.clone( true ). css({'z-index': 5}). fadeIn(2000).appendTo('#left');
    }); 
```

我尝试了 change() 函数，但这似乎只适用于输入字段，

```
 $(active.attr('data-page-index')).change(function(){ 
```

还有其他方法可以实现吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-18T06:41:27.910

看来还是要操作 DOM 才能触发事件？如果是这样，您可以操纵隐藏输入的值，而不是操纵其他元素的数据属性。然后就可以使用`change`触发器了。

```
 var active = $('.swipeview-active'),
      dpi =  parseInt(active.attr('data-page-index')),
      left = $('[data-page-index="' +prev+ '"]').children("img").eq(0),
      right = $('[data-page-index="' +next+ '"]').children("img").eq(0),
      dpiInput = $('.swipeview-active input:hide');

  dpiInput.change(function(){
    right.clone( true ). css({'z-index': 5}). fadeIn(2000).appendTo('#right');
    left.clone( true ). css({'z-index': 5}). fadeIn(2000).appendTo('#left');
  }); 
```

扳机：

```
$('.swipeview-active input:hide').val(1).trigger('change'); 
```

# java - 在 Web 容器中重定向 URL 编码，response.sendRedirect()

> ID：14262349
> 
> 赞同：1
> 
> 时间：2013-01-10T16:16:54.163
> 
> 标签：java, servlets, redirect, web, internationalization

我的问题是，在 Java 中，我有机会将用户重定向到其他地方，其他地方是用户可定义的。代码如下所示：

`response.sendRedirect(redirectURL)`. 我的重点是变量redirectURL 中表示的字符串。我的理解是这样的，指定 response.setCharacterEncoding 会影响写入响应编写器的内容，而不影响 sendRedirect 的内容。通过在连接器上添加 URIEncoding=，在基于 tomcat 的容器中，应该处理 URL 的路径是简体中文、日文或非 ascii 字符但它没有的情况，这似乎是合理的。我的部分问题是为什么。

这里有很多回复说明使用 URLEncode。但是在 issue 4571346 [如何编码 URL 以避免 java 中的特殊字符](https://stackoverflow.com/questions/4571346/how-to-encode-url-to-avoid-special-characters-in-java)

Wyzard 声明不应该使用，而是

1.  创建一个 URI 对象
2.  通过 toASCIIString 创建正确的 URL 字符串。

在我的示例用例中，这可以正常工作，尽管此代码需要在 every 之前执行`response.sendRedirect()`，这很多。

随着越来越多的应用程序在全球范围内使用，我看到这个问题有效地渲染了直接 HTTPResponse 方法 sendRedirect 的不足，因为它本身可能无法正常工作。

我参考了处理应用程序中的国际化域名的 RFC3490，它讨论了 toASCII 作为两个操作之一，另一个是 toUnicode。

那么，为什么连接器上的 URIEncoding= 不处理这个问题，应该这样吗？是否有更首选的方法来处理路径国际化的 URL？我只是相信，通过关注点分离，这个问题是并且应该是容器问题，而不是应用程序问题。我希望这将为讨论这个问题提供一个论坛，而不是 HTML，不是表单，不是 URL 本身以外的任何东西。

# c# - 将 VS2008/.NET FX 2.0 项目升级到 VS2010 后出现奇怪的错误

> ID：14262352
> 
> 赞同：1
> 
> 时间：2013-01-10T16:17:02.327
> 
> 标签：c#, visual-studio-2010, visual-studio-2008, .net-2.0

升级后，在构建时，会弹出一个警告说：

> 无法解析主要参考“Elegant.Ui.Ribbon，Version=3.5.0.0，Culture=neutral，PublicKeyToken=3a2b400713aae6e0，processorArchitecture=MSIL”，因为它间接依赖于 .NET Framework 程序集“mscorlib，Version=4.0 .0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”，在当前目标框架中，“4.0.0.0”版本比“2.0.0.0”版本高。PDFFlowline.VS2010

怎么会这样？以及如何解决它。该项目在 VS2008 上编译良好。我正在运行 Windows 7 和 VS2010，它们都安装了最新的更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T01:09:44.983

我无法让它在 VS2010 上运行，而是尝试了 SharpDevelop，它可以打开和构建旧版本的项目，在这种情况下是 VS2008。所以我的问题解决了，有点。顺便说一句，要让它工作，如果您打算使用 lambda、LINQ 和 LINQBridge 和扩展方法，您需要将目标框架设置为 2.0 和 C# 编译器设置为 3.0，这是我的 C# 编码的重要组成部分。

# javascript - 如何恢复事件的浏览器默认行为？(javascript)

> ID：14262353
> 
> 赞同：0
> 
> 时间：2013-01-10T16:17:03.210
> 
> 标签：javascript, javascript-events

我有一个使用 div 定义布局的网页（使用 HTML5/javascript）。

由于我希望能够拖动一些元素并且不希望在此过程中选择文本，因此我禁用了最外层容器 div 的 selectstart 和 onmousedown 事件，使用：

```
document.getElementById("mapContainer").onselectstart = function(){return false;};
document.getElementById("mapContainer").onmousedown = function(){return false;}; 
```

但是，我在布局中还有一个文本框，我需要能够选择和写入以进行搜索。我发现了许多关于如何禁用事件的浏览器默认行为的主题，但没有关于如何恢复默认行为的具体内容。如果需要，我可以，但我想避免对脚本进行大量重写。因此，我想知道是否有可以仅应用于文本框的“restoreDefault”类型函数/设置。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:20:36.273

使用`addEventLsitener`和`removeEventListener`更好地访问您的事件侦听器：

```
function fooBar(){
    return false;
}

document.getElementById('mapContainer').addEventListener('selectstart', fooBar);    // Start listening
document.getElementById('mapContainer').removeEventListener('selectstart', fooBar); // Stop lsitening 
```

您还可以像这样删除当前拥有的事件侦听器：

```
document.getElementById('mapContainer').onmousemove = null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:24:34.630

您可以在禁用它之前检查它是否在 textarea 中启动：

**HTML**

```
<div id="mapContainer">
  <h2>What what?</h2>
  <textarea id="ta">FOO BAR WORLD</textarea>
</div> 
```

**JavaScript**

```
function testForElement(e) {
      e = e || window.event;
      var elem = e.srcElement || e.target;
      return elem && elem.id==="ta";
}

var myDiv = document.getElementById("mapContainer");
myDiv.onselectstart = testForElement;
myDiv.onmousedown = testForElement; 
```

**例子**

[JSFiddle](http://jsfiddle.net/bVzA9/1/)

# matlab - Matlab绘图中的文本框

> ID：14262354
> 
> 赞同：6
> 
> 时间：2013-01-10T16:17:06.187
> 
> 标签：matlab

请在这里帮助我。我正在尝试在 matlab 图中包含一个带有边界的小文本框，它说明了该图的某些重要内容。我确实遇到了这个链接，

[http://www.mathworks.in/matlabcentral/newsreader/view_thread/154660](http://www.mathworks.in/matlabcentral/newsreader/view_thread/154660)

但我想知道是否有任何其他内置绘图功能可以直接执行此操作。我真的很抱歉，如果这个问题是初步的，但我会感谢你的帮助。

此外，我实际上并不清楚这个链接到底在说什么。mtext 如何将文本框放置在绘图中？我如何实际编码？这些是我的困惑。请在这里帮助我。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-10T16:47:23.883

您正在寻找的功能被称为[`annotation`](http://www.mathworks.com/help/matlab/ref/annotation.html)。

例如，`annotation('textbox',[x y w h])`创建一个可编辑的文本框注释，其左下角为 point `x,y`、宽度`w`和高度`h`，以标准化图形单位指定。在单个向量中指定`x`、`y`、`w`和。`h`

这是一个带有一些花里胡哨的演示......

```
x=0:0.1:10;
var=1.85;
y=x.^(var);
plot(x,y);

annotation('textbox',...
    [0.15 0.65 0.3 0.15],...
    'String',{'plotting y=x^{var} ,',['with var =' num2str(var)]},...
    'FontSize',14,...
    'FontName','Arial',...
    'LineStyle','--',...
    'EdgeColor',[1 1 0],...
    'LineWidth',2,...
    'BackgroundColor',[0.9  0.9 0.9],...
    'Color',[0.84 0.16 0]); 
```

![在此处输入图像描述](../Images/9c9642efe0af7c97ae5843e1d0f51b33.png)

有关注释文本框属性的完整列表，请参见[此处](http://www.mathworks.com/help/matlab/ref/annotationtextboxproperties.html)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-10-31T14:04:25.727

```
alldatacursors = findall(gcf,'type','hggroup')
set(alldatacursors,'FontSize',11)
set(alldatacursors,'FontName','Times')
set(alldatacursors,'BackgroundColor','w'); 
```

# licensing - 特殊许可变更后应在软件中添加哪些版权信息？

> ID：14262358
> 
> 赞同：1
> 
> 时间：2013-01-10T16:17:23.537
> 
> 标签：licensing

长话短说。我找到了对我的应用程序有用的带有 API 的不错的开源项目。但是，最初它是在 GPL-v3 许可下分发的。我已经与唯一贡献者的创建者进行了交谈，他说他可以为我做一个例外并根据 Apache 许可证 2.0 为我提供它。

我的问题是：

1.  是他写的电子邮件，他可以根据此许可证向我提供足够的内容，或者他应该给我写其他内容，例如：我同意根据 Apache 许可证版本 2.0 而不是 GPL-v3 向 [PERSON] 提供 X 项目
2.  我应该在页面中写什么：特殊 Apache 许可证下的项目 X，版本 2.0，还是什么？因为写项目 X 在 GPL-v3 下将表明整个应用程序应该在这个许可证下。
3.  如果这个项目使用另一个开源项目 [library]（在许可证 Apache 2.0 下），我是否需要将它也写为另一个关于列表元素，或者不需要？

非常感谢您的所有回答。

**编辑**

一般来说，因为可能不清楚，所以我问的不是关于代码中的关于框，因为毕竟只有注释会消失，但或多或​​少是这样的：

开源项目包括：

...

Project X 版权所有 Creator Y 2010-2013，根据 Apache 许可证特别分发，版本 2.0

或者

Project X 版权所有 Creator Y 2010-2013，在 Apache 许可证下分发，版本 2.0

或者

Project X 版权所有 Creator Y 2010-2013

...

除了创作者之外，我更关心可能阅读它并意识到这个项目目前在另一个许可证下分发的人，所以他们应该获得整个应用程序的源代码。

第三个问题是，我是否还需要以类似的形式写关于 Project X 从中获取一些元素的项目，比如仅在那里使用的额外库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:47:27.373

如果原作者同意将 Apache 2.0 下的软件许可给您，您应该收到一个所谓的许可或复制文件，其中包含您需要保留的确切版权声明旁边的使用条款和条件。

此外，由于这是 Apache 2.0 许可证，而您写的是一些例外情况，您可能也收到了一个通知文件，该文件通知了这种情况。

然后，您通常需要的只是将此信息 [这些文件] 传递给最终用户。

也不要在这里询问 Project X，因为这是现实生活，请为项目命名，这样可以提供更好的示例并使这个问题对未来的用户更有用，以便与他们的情况进行比较。

# ios - 在 -[FBSession open 上获取 ACErrorAccessInfoInvalid

> ID：14262361
> 
> 赞同：0
> 
> 时间：2013-01-10T16:17:29.627
> 
> 标签：ios, facebook

调用这个：

```
[[self session] openWithBehavior:FBSessionLoginBehaviorUseSystemAccountIfPresent
               completionHandler:^(FBSession *session, FBSessionState status, NSError *error) { 
```

我收到一个错误：

```
(lldb) po [error userInfo]
(id) $0 = 0x1fde09c0 {
    "com.facebook.sdk:ErrorInnerErrorKey" = "Error Domain=com.apple.accounts Code=8 \"The operation couldn\U2019t be completed. (com.apple.accounts error 8.)\"";
    "com.facebook.sdk:ErrorLoginFailedReason" = "com.facebook.sdk:ErrorLoginFailedReason";
} 
```

我知道“com.apple.accounts 错误 8”表示 ACErrorAccessInfoInvalid，但我不知道如何解决这个问题，因为调用它的代码隐藏在框架中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:57:27.673

我的默认权限是问题所在。一旦我从创建初始 FBSession 中删除了所有权限，它就起作用了。但是，我现在必须弄清楚以后如何请求这些权限。

# java - 将现有程序中的源代码文件夹导入 Eclipse

> ID：14262364
> 
> 赞同：1
> 
> 时间：2013-01-10T16:17:44.457
> 
> 标签：java, eclipse, import, project

我只是想编辑一个现有的程序（或项目），其中我有源代码文件夹（它已经有 java 文件，而不是类文件......所以我不必反编译它）。但是如何在 Eclipse 中导入它呢？

截屏：

![截屏](../Images/f6503a3bcb5d21f716c0424e2dbcbc99.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:26:12.977

你有一个 maven 构建文件 ( `pom.xml`)，那么这很容易：`mvn eclipse:eclipse`对 pom 文件执行 a 。这将在该位置创建一个项目（iaw，它将创建一个`.project`和一个`.classpath`文件）。

然后，只需将项目导入工作区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-22T09:56:01.827

与霓虹灯：`File > Open projects from filesystem...`。对于较旧的版本，或者如果您更喜欢在 Neon 中使用它，`File > Import > Maven > Existing Maven Projects`.

# cocos2d-iphone - LevelHelper / SpriteHelper / 编码图像

> ID：14262366
> 
> 赞同：1
> 
> 时间：2013-01-10T16:17:49.687
> 
> 标签：cocos2d-iphone, box2d-iphone

我目前在 SpriteHelper 中构建了我的精灵，在 LevelHelper 中构建了关卡。我已经在关卡中包含了我的大部分精灵，但我还想在代码中单独添加一些精灵。这样我就可以根据用户进度和其他对象的集合以不同的速率和时间生成。

有人可以帮助我或指出如何将 SpriteHelper 中的精灵（带有物理）包含到我的代码中的正确方向。我是否需要生成 SpriteHelper 代码并将其包含在内，即使我已经包含了 LevelHelper 生成的代码？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T06:54:11.710

您可以在运行时手动使用 levelehelperloader 对象创建 lhsprite。请参阅下面的链接[http://www.gamedevhelper.com/documentation/documentation.html#top](http://www.gamedevhelper.com/documentation/documentation.html#top)

在 levelhelper 文档中搜索 createsprite，您将获得足够的信息来创建新的 sprite。

# sql - 查询 3 个表一个表有 3 行我需要以某种联合方式合并为 1

> ID：14262367
> 
> 赞同：2
> 
> 时间：2013-01-10T16:17:48.880
> 
> 标签：sql

我无法找出查询。我有 3 张桌子。我想出了如何从表格中获取数据以显示在一行中，但是其中一张表格的数据设置很奇怪。所有表共享一个报告 ID。

表格1

```
RID AllOtherData
1    Stuff
2    Stuff
3    Stuff 
```

表 2

```
RID Description
1   Descript
2   Descript
3   Descript 
```

表3是我遇到麻烦的地方

```
RID Item Code
1     1   RWA
1     2   ABA
1     3   BBC
2     1   BBC
2     2   NULL
2     3   NUll
ETC* 
```

我要问的是如何查询以获取`RID, ALLotherstuf.T1, descript.t2, code.t3 as item1 code, code.t3 as item2 code, code.t3 as item3`代码。

如果有人能指出我或给我一个例子说明这是什么类型的查询，甚至可能我会非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:41:47.503

这是你要找的吗？这是从@Gordon 之前的回复中修改的。

```
select t1.RID, t1.AllOtherData, t2.Description,
       max(case when t3.item = 1 then t3.code end) as item1code,
       max(case when t3.item = 2 then t3.code end) as item2code,
       max(case when t3.item = 3 then t3.code end) as item3code
from table1 t1 join
     table2 t2 on 
     t1.RID = t2.RID join
     table3 t3 on
     t1.RID = t3.RID
group by t1.RID, t1.AllOtherData, t2.Description 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!2/88499/10)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:32:24.380

您想要旋转列。首先，将所有表连接在一起。这会在单独的行上生成代码。要将它们放在一排，请使用`group by`. 以下适用于任何数据库：

```
select t1.RID, t1.ALLotherstuf, t2.descript,
       max(case when t3.item = 1 then t3.code end) as item1code,
       max(case when t3.item = 2 then t3.code end) as item2code,
       max(case when t3.item = 3 then t3.code end) as item3code
      code.t3 as item1 code, code.t3 as item2 code, code.t3 as item3
from t1 join
     t2 o
     on t1.RID = t2.RID join
     t3
     on t1.RID = t3.RID
group by t1.RID, t1.ALLotherstuf, t2.descript 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:17:53.507

如果您使用的是 SQL Server，您还可以使用以下`PIVOT`功能：

```
select *
from
(
  select t1.RID, 
    t1.AllOtherData, 
    t2.Description,
    t3.item,
    t3.code
  from table1 t1 
  inner join table2 t2 
    on t1.RID = t2.RID 
  inner join table3 t3 
    on t1.RID = t3.RID
) src
pivot
(
  max(code)
  for item in ([1], [2], [3])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/512c8/1)

# jquery - jquery显示和隐藏div问题

> ID：14262368
> 
> 赞同：0
> 
> 时间：2013-01-10T16:17:52.780
> 
> 标签：jquery

我创建了一个可编辑的表单，允许用户编辑他们的个人资料信息。此表单可以保存和修改，因此我需要能够在用户进行操作时保存更新。这工作正常。

该表单很长，因此在某些部分中，我有使用 jquery 显示/隐藏的字段，具体取决于先前输入的是或否选择。这也有效，除非如果在重新访问表单时选择并保存了单选输入，则 jquery 再次隐藏了详细信息字段。

所以我需要一些帮助来修改下面的 jquery 代码，这样如果两个单选按钮都没有被选中，详细信息 div 将被隐藏，但如果选择并保存了 Yes 选项，它将在重新访问表单时自动打开！谢谢

```
$("#diet-details").hide();
$("input[name=diet]").click(function() {
    if ( $("#diet1").attr('checked'))
        $("#diet-details").hide();

    if ( $("#diet2").attr('checked'))
        $("#diet-details").show();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:24:02.050

您可以将显示/隐藏条件传递给切换功能，而不是总是在开始时隐藏饮食详细信息 div，而是检查是否选中了diet1 选项并基于此显示（或隐藏它），

```
$(function() {
  $('#diet-details').toggle($("#diet1").is(':checked'));

  $("input[name=diet]").click(function() {
    $('#diet-details').toggle($("#diet1").is(':checked'));
  }); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:25:30.163

一种方法是：

```
(function(){
    var $d1 = $("#diet1"),
        $d2 = $("#diet2"),
        $details = $("#diet-details");

    !$d2.prop('checked') && $details.hide();

    $("input[name=diet]").click(function() {
        $d1.prop('checked') && $details.hide();
        $d2.prop('checked') && $details.show();
    });
})(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:29:08.587

另一种设置初始状态的方法：

```
function checkem() {
  if ($("#diet1").prop('checked')) $("#diet-details").hide();
  if ($("#diet2").prop('checked')) $("#diet-details").show();
}
$("input[name=diet]").click(function () {
  checkem();
});
checkem(); //sets initial state based one current 
```

测试小提琴：http: [//jsfiddle.net/YqUhZ/](http://jsfiddle.net/YqUhZ/)

如果您希望它显示是否未选中，则：

```
function checkem() {
  if ($("input[name=diet]:checked").length) {
    $("#diet-details").hide();
  } else {
    $("#diet-details").show();
  }
}
$("input[name=diet]").change(function () {
  checkem();
});
checkem(); //sets initial state based one current 
```

# scala - 序列上的 n-way `span`

> ID：14262369
> 
> 赞同：3
> 
> 时间：2013-01-10T16:17:54.910
> 
> 标签：scala

给定一个元素序列和一个谓词`p`，我想生成一个序列序列，使得在每个子序列中，所有元素都满足`p`或序列具有长度`1`。此外，调用`.flatten`结果应该会返回我的原始序列（因此不会重新排序元素）。

例如，给定：

```
val l = List(2, 4, -6, 3, 1, 8, 7, 10, 0)
val p = (i : Int) => i % 2 == 0 
```

我想`magic(l,p)`制作：

```
List(List(2, 4, -6), List(3), List(1), List(8), List(7), List(10, 0)) 
```

我知道`.span`，但是该方法在第一次遇到不满足的值时停止`p`并仅返回一对。

下面是一个候选实现。它做了我想要的，但是，好吧，让我们想哭。我希望有人能想出一些更惯用的东西。

```
def magic[T](elems : Seq[T], p : T=>Boolean) : Seq[Seq[T]] = {
  val loop = elems.foldLeft[(Boolean,Seq[Seq[T]])]((false,Seq.empty)) { (pr,e) =>
    val (lastOK,s) = pr
    if(lastOK && p(e)) {
      (true, s.init :+ (s.last :+ e))
    } else {
      (p(e), s :+ Seq(e))
    }
  }
  loop._2
} 
```

（请注意，我并不特别关心保留 . 的实际类型`Seq`。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:36:29.983

对于这个任务，您可以使用`takeWhile`并`drop`结合一个匹配递归的小模式：

```
def magic[T](elems : Seq[T], p : T=>Boolean) : Seq[Seq[T]] = {
  def magic(elems: Seq[T], result: Seq[Seq[T]]): Seq[Seq[T]] = elems.takeWhile(p) match {
    // if elems is Nil, we have a result
    case Nil if elems.isEmpty => result

    // if it's not, but we don't get any values from takeWhile, we take a single elem
    case Nil => magic(elems.tail, result :+ Seq(elems.head))

    // takeWhile gave us something, so we add it to the result
    // and drop as many elements from elems, as takeWhile gave us
    case xs => magic(elems.drop(xs.size), result :+ xs)
  }

  magic(elems, Seq())
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T19:32:06.380

我不会使用`foldLeft`. `span`如果头部与谓词不匹配，这只是一个带有特殊规则的简单递归：

```
def magic[T](elems: Seq[T], p: T => Boolean): Seq[Seq[T]] = 
  elems match {
    case Seq() => Seq()
    case Seq(head, tail @ _*) if !p(head) => Seq(head) +: magic(tail, p)
    case xs => 
      val (prefix, rest) = xs span p
      prefix +: magic(rest, p)
  } 
```

您也可以进行尾递归，但是如果您要预先添加，则需要记住反转输出（这是明智的）：

```
def magic[T](elems: Seq[T], p: T => Boolean): Seq[Seq[T]] = {
  def iter(elems: Seq[T], out: Seq[Seq[T]]) : Seq[Seq[T]] = 
    elems match {
      case Seq() => out.reverse
      case Seq(head, tail @ _*) if !p(head) => iter(tail, Seq(head) +: out)
      case xs => 
        val (prefix, rest) = xs span p
        iter(rest, prefix +: out)
    }
  iter(elems, Seq())
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:14:28.657

使用折叠的另一种解决方案：

```
def magicFilter[T](seq: Seq[T], p: T => Boolean): Seq[Seq[T]] = {
  val (filtered, current) = (seq foldLeft (Seq[Seq[T]](), Seq[T]())) {
    case ((filtered, current), element) if p(element)       => (filtered, current :+ element)
    case ((filtered, current), element) if !current.isEmpty => (filtered :+ current :+ Seq(element), Seq())
    case ((filtered, current), element)                     => (filtered :+ Seq(element), Seq())
  }
  if (!current.isEmpty) filtered :+ current else filtered
} 
```

# ubuntu - Asterisk 和 DAHDI 设置

> ID：14262371
> 
> 赞同：0
> 
> 时间：2013-01-10T16:18:07.597
> 
> 标签：ubuntu, asterisk, pbx

我尝试安装的星号服务器有问题。我有一个亚马逊服务器，`Ubuntu 12.04, 64 bit`. 我已逐步按照[install-asterisk-1-8-from-source-on-ubuntu-12-04](http://www.kartook.com/2012/08/install-asterisk-1-8-from-source-on-ubuntu-12-04/)的说明进行操作。我到了下载 DAHDI 文件夹的部分并尝试了该`"make"`命令，但得到了我在底部发布的以下错误。我不是 Linux 天才，但我理解并试图解决的是。我的盒子里没有内核的源代码，但我不知道如何获取它们或如何更改它们以便 DAHDI 可以工作。有人可以帮忙吗？

> /usr/src/dahdi-linux-complete-2.6.1+2.6.1# make make -C linux all make[1]：进入目录 `/usr/src/dahdi-linux-complete-2.6.1+2.6.1/linux' make -C drivers/dahdi/firmware firmware-loaders make[2]: Entering directory` /usr/src/dahdi-linux-complete-2.6.1+2.6.1 /linux/drivers/dahdi/firmware' make[2]: 离开目录`/usr/src/dahdi-linux-complete-2.6.1+2.6.1/linux/drivers/dahdi/firmware' 你好像没有安装 3.2.0-31-virtual 内核的源代码。制作[1]：*** [模块]
> 
> 错误 1 ​​make[1]: 离开目录 `/usr/src/dahdi-linux-complete-2.6.1+2.6.1/linux' make: *** [all]
> 
> 错误 2 root@domU-12-31-39-03-20-24:/usr/src/dahdi-linux-complete-2.6.1+2.6.1#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:49:52.037

您还需要安装内核源来解决依赖关系。

尝试运行它，然后重新运行 make。

```
apt-get install linux-headers-`uname -r` 
```

# grails - grails：编写脚本的指南，尤其是调用现有数据库迁移脚本的指南

> ID：14262375
> 
> 赞同：0
> 
> 时间：2013-01-10T16:18:12.880
> 
> 标签：grails, scripting, database-migration

我的要求是从 Jenkins 构建服务器调用一些处理，以确定自上次构建以来域模型是否已更改。我得出的结论是，前进的方向是编写一个脚本，该脚本将从 db-migration 插件中调用一系列现有脚本。然后我可以在调用 test-app 和 war 的步骤中调用它。

我查看了 Grails 文档和一些 db-migration 脚本，我发现我被困住了——不知道从哪里开始尝试。如果有人能指出任何合适的来源，我将不胜感激。顺便说一句，我对 Grails 有点生疏。两年前开始通过概念验证项目自学，持续了 6 个月。然后又回到了 Eclipse 富客户端工作。这可能是我的问题的一部分，尽管我从不参与脚本。

我在 Jenkins evt 中需要做的一件事是掌握当前用于构建的 SVN 修订号。欢迎提出建议。

问候，约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T20:43:45.010

通过运行创建一个新脚本`grails create-script scriptname`。数据库迁移插件脚本配置为易于重用。里面有很多共享代码`_DatabaseMigrationCommon.groovy`，每个脚本都定义了一个具有唯一名称的目标。因此，您可以导入共享脚本或任何独立脚本（或多个脚本）并像调用方法一样调用目标。

默认情况下，通过`create-script`“导入”脚本生成的`_GrailsInit`脚本`includeTargets << grailsScript("_GrailsInit")`，您也可以这样做，利用指向已安装插件目录的魔法变量：

```
includeTargets << new File("$databaseMigrationPluginDir/scripts/DbmGenerateChangelog.groovy") 
```

如果您这样做，您可以删除 _GrailsInit 的包含，因为它已经包含在内，但如果您不这样做，那很好，因为 Grails 只包含一次文件。

然后你可以定义你的目标并调用任何插件的目标。目标不能接受参数，但您可以将数据添加到`argsMap`（这是 Grails 从解析的命令行参数创建的映射）以模拟用户指定的参数。请注意，传递给脚本的任何参数都将被数据库迁移插件的脚本看到，因为它们使用相同的`argsMap`.

`dbm-generate-changelog`这是一个示例脚本，它的作用与之前和之后的消息相同，但添加了一条消息：

```
includeTargets << new File("$databaseMigrationPluginDir/scripts/DbmGenerateChangelog.groovy")

target(foo: "Just calls dbmGenerateChangelog") {
   println 'before'
   dbmGenerateChangelog()
   println 'after'
}

setDefaultTarget foo 
```

请注意，我将目标从重命名为`main`to，`foo`因此它是唯一的，以防您想从另一个脚本中调用它。

作为使用 args 的示例，下面是一个修改后的版本，如果没有提供，则指定默认的更改日志名称：

```
println 'before'
if (!argsMap.params) {
   argsMap.params = ['foo2.groovy']
}
dbmGenerateChangelog()
println 'after' 
```

**编辑**：这是一个更完整的示例，它将 dbm-gorm-diff 的输出捕获到字符串：

```
includeTargets << new File("$databaseMigrationPluginDir/scripts/_DatabaseMigrationCommon.groovy")

target(foo: "foo") {
   depends dbmInit

   def configuredSchema = config.grails.plugin.databasemigration.schema
   String argSchema = argsMap.schema
   String effectiveSchema = argSchema ?: configuredSchema ?: defaultSchema

   def realDatabase
   boolean add = false // booleanArg('add')
   String filename = null // argsList[0]

   try {
      printMessage "Starting $hyphenatedScriptName"

      ByteArrayOutputStream baos = new ByteArrayOutputStream()
      def baosOut = new PrintStream(baos)

      ScriptUtils.executeAndWrite filename, add, dsName, { PrintStream out ->
         MigrationUtils.executeInSession(dsName) {
            realDatabase = MigrationUtils.getDatabase(effectiveSchema, dsName)
            def gormDatabase = ScriptUtils.createGormDatabase(dataSourceSuffix, config, appCtx, realDatabase, effectiveSchema)
            ScriptUtils.createAndPrintFixedDiff(gormDatabase, realDatabase, realDatabase, appCtx, diffTypes, baosOut)
         }
      }

      String xml = new String(baos.toString('UTF-8'))
      def ChangelogXml2Groovy = classLoader.loadClass('grails.plugin.databasemigration.ChangelogXml2Groovy')
      String groovy = ChangelogXml2Groovy.convert(xml)

      // do something with the groovy or xml here

      printMessage "Finished $hyphenatedScriptName"
   }
   catch (e) {
      ScriptUtils.printStackTrace e
      exit 1
   }
   finally {
      ScriptUtils.closeConnection realDatabase
   }
}

setDefaultTarget foo 
```

# mysql - 无法在 Python 中导入 MySQLdb 模块

> ID：14262379
> 
> 赞同：6
> 
> 时间：2013-01-10T16:18:17.677
> 
> 标签：mysql, python-2.7, mysql-python

我正在尝试在 Python 中使用 MySQL。我已经为 Python 安装了 MySQL 适配器（MySQL-python-1.2.4b4.win32-py2.7），但是当我尝试使用命令提示符导入 MySQLdb 模块（import MySQLdb）时，我收到以下输出：

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "C:\Python27\lib\site-packages\MySQLdb\__init__.py", line 19, in <module>
import _mysql
ImportError: DLL load failed: %1 is not a valid Win32 application. 
```

有谁知道，有什么问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T16:34:14.777

您需要有 32 位版本的 Python 才能使用此适配器。您实际使用的是哪个版本？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-17T21:49:20.457

我在通过 Pip 在 Windows 上安装 64 位版本的 MySQLdb 时遇到问题，但是如果您想继续使用 64 位版本的 Python，而不是恢复到 32 位版本，那么您可以从.whl 文件可从[http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)

然后，您需要将 .whl 文件安装为[https://pip.pypa.io/en/latest/user_guide/#installing-from-wheels中的文档](https://pip.pypa.io/en/latest/user_guide/#installing-from-wheels)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-01T03:38:41.573

设置模块时，请注意版本，MySQL-python-1.2.3.win32-py2.7.exe 和 MySQL-python-1.2.4.win32-py2.7.exe 2 个版本中只有一个是你需要，尝试2次

# ms-access - Microsoft Acess 中的扫描功能？

> ID：14262380
> 
> 赞同：0
> 
> 时间：2013-01-10T16:18:18.343
> 
> 标签：ms-access

我正在尝试根据文本字段中的空格字符进行子字符串化，但我无法成功。

我的领域有两个但有时三个单词都分隔了你的空间。我希望能够通过匹配空格来提取第二个或第三个单词。这个词的长度是可变的。

我已经尝试过这样的事情，但没有成功。

```
select mid([genus],InStr([genus]," ")+1) AS species from <tablename>; 
```

有什么建议么？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:26:08.023

对于最后一句话，您可以：

```
SELECT Mid(genus,1 + InStrRev(genus," ")) AS species 
```

如果有 2 个或更多，则为第 2 个单词；

```
SELECT mid(genus,InStr(genus," ")+1, instr(InStr(genus," "),genus, " ")-1)  AS species 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:42:29.923

你可以使用这个功能

```
Public Function Item(ByVal s As String, ByVal index As Long, _
                     Optional ByVal delimiter As String = " ") As String
    Dim i As Long, pos1 As Long, pos2 As Long

    If index < 1 Or index > Len(s) Then
        Item = ""
        Exit Function
    End If
    s = s & delimiter
    pos2 = 1 - Len(delimiter)
    For i = 1 To index
        pos1 = pos2 + Len(delimiter)
        pos2 = InStr(pos1, s, delimiter, vbBinaryCompare)
        If pos2 = 0 Then
            Item = ""
            Exit Function
        End If
    Next i
    Item = Mid$(s, pos1, pos2 - pos1)
End Function 
```

测试

```
Item("asdas df 4354 sdf", 3) 
```

产量

```
"4354" 
```

在您的选择语句中

```
SELECT
    Item(genus, 1) AS word1,
    Item(genus, 2) AS word2,
    Item(genus, 3) AS word3
FROM
    <tablename>; 
```

# vim - 在 Vim 中诊断字符编码问题的最佳方法是什么？

> ID：14262381
> 
> 赞同：0
> 
> 时间：2013-01-10T16:18:22.810
> 
> 标签：vim, encoding

如果我在 Vim 中打开纯文本文件，这种情况经常发生。我看到普通的字符文本，但是这里和那里的字符，通常应该只有一个空格。如果我输入`:set encoding`I see `encoding=utf-8`，这是正确的，因为我在文本中看到了它们应该出现的智能引号。这些 � 字符是什么？如何修复它们的显示方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:44:59.957

# c# - 树视图项目背景覆盖高亮画笔

> ID：14262383
> 
> 赞同：0
> 
> 时间：2013-01-10T16:18:31.570
> 
> 标签：c#, wpf, xaml

我正在尝试为每个树视图项目设置一个带有圆形边框和背景的树视图控件。然而，虽然我也用线性渐变覆盖了 x:Static SystemColors.HighlightBrushKey。

但是，在执行此操作时，我注意到如果我为 treeview 项目设置背景，我的 highlightbrushkey 将不再被应用。你能告诉我如何实现这一目标吗？

下面是我的代码：

```
 <Page xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"    
          xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">      

    <Page.Resources>  

        <LinearGradientBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#FFFFEF" Offset="0"/>
                <GradientStop Color="#FFF7D3" Offset="0.2580"/>
                <GradientStop Color="#FFEFB2" Offset="0.3870"/>
                <GradientStop Color="#FFEFB2" Offset="1"/>
            </LinearGradientBrush>

 <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0" x:Key="TreeViewItemBackground">
            <GradientStop Color="#FFFAFFFF" Offset="0"/>
            <GradientStop Color="#FFFAFAFA" Offset="0.2580"/>
            <GradientStop Color="#FFF7F7F7" Offset="0.3870"/>
            <GradientStop Color="#FFF4F4F4" Offset="1"/>
        </LinearGradientBrush>

            <LinearGradientBrush x:Key="{x:Static SystemColors.ControlBrushKey}" EndPoint="0,1" StartPoint="0,0">
                <GradientStop Color="#FFF8F8F8" Offset="0"/>
                <GradientStop Color="#FFE5E5E5" Offset="1"/>
            </LinearGradientBrush>
            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="Black" />
            <SolidColorBrush x:Key="{x:Static SystemColors.ControlTextBrushKey}" Color="Black" />        
            <TreeView x:Name="GroupView" ItemsSource="{Binding}" ScrollViewer.HorizontalScrollBarVisibility="Disabled" MinWidth="150"  Margin="3">
                        <TreeView.Resources>
                            <HierarchicalDataTemplate DataType="{x:Type GridSplitterTextTrim:Group}" ItemsSource="{Binding Items}">                                       
                                        <Border BorderBrush="#FFEAEEE8"   BorderThickness="1" CornerRadius="3" Margin="-1" Background="{StaticResource TreeViewItemBackground}" >
                                            <StackPanel Orientation="Horizontal"  Background="Transparent" Margin="1">
                                                <TextBlock Text="{Binding Path=Name}" TextTrimming="WordEllipsis" Margin="3" MaxWidth="150"  Width="{Binding ActualWidth, ElementName=GroupView, Converter={StaticResource TreeViewWidthConverter}}" ToolTip="{Binding Name}" />
                                            </StackPanel>
                                        </Border>                                           
                                </HierarchicalDataTemplate>
                            <DataTemplate DataType="{x:Type GridSplitterTextTrim:Entry}" >
                                <Border BorderBrush="#C0C0C0" BorderThickness="1" CornerRadius="3" Margin="-1">
                                    <StackPanel Orientation="Horizontal" Background="Transparent" Margin="1">
                                        <TextBlock Text="{Binding Path=Name}" TextTrimming="WordEllipsis" Margin="3" MaxWidth="132"  Width="{Binding ActualWidth, ElementName=GroupView, Converter={StaticResource TreeViewWidthConverter}}" ToolTip="{Binding Name}" />
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </TreeView.Resources>
                        <TreeView.ItemContainerStyle>
                            <Style TargetType="{x:Type TreeViewItem}">
                                <Setter Property="BorderThickness" Value="1"/>
                                <Setter Property="Margin" Value="2"/>
                                <Style.Triggers>
                                    <Trigger Property="IsSelected" Value="True">
                                       <!-- <Setter Property="BorderBrush" Value="#adc6e5"/>-->                                       
                                        </Trigger>
                                    <MultiTrigger>
                                        <MultiTrigger.Conditions>
                                            <Condition Property="IsSelected" Value="True"/>
                                            <Condition Property="IsSelectionActive" Value="False"/>
                                        </MultiTrigger.Conditions>
                                        <Setter Property="BorderBrush" Value="LightGray"/>
                                    </MultiTrigger>
                                </Style.Triggers>
                                <Style.Resources>
                                    <Style TargetType="Border">
                                        <Setter Property="CornerRadius" Value="3"/>                                      
                                    </Style>
                                </Style.Resources>
                            </Style>
                        </TreeView.ItemContainerStyle>
                    </TreeView>
     </Page.Resources>  
    </Page> 
```

需要注意的几点：

*   我使用转换器来设置文本块的宽度。这是为了实现文本修剪。

*   为了这篇文章，我设置了一个没有背景颜色的数据模板，它在突出显示时效果很好，当我在第一个模板中设置背景时，它不会用突出显示画笔突出显示。

在此先感谢，-迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:00:25.770

你的`DataTemplate's`背景是在容器的选择之上绘制的。这就是它隐藏选择颜色的原因。您可以在选择项目时添加一个`DataTrigger`以`DataTemplate`清除背景：

```
<DataTemplate>
    <Border x:Name="bg" Background="Red">
     ...
    </Border>
    <DataTemplate.Triggers>
        <DataTrigger Binding="{Binding IsSelected, RelativeSource={RelativeSource AncestorType={x:Type TreeViewItem}}}" 
                     Value="True">
            <Setter TargetName="bg" Property="Background" Value="{x:Null}" />
        </DataTrigger>
    </DataTemplate.Triggers>
</DataTemplate> 
```

# c# - .NET 创建角色

> ID：14262388
> 
> 赞同：1
> 
> 时间：2013-01-10T16:18:49.037
> 
> 标签：c#, asp.net

当我做：

```
Roles.CreateRole("Role1"); 
```

我创建了一个角色“ `Role1`”，然后我可以将其分配给用户。

我找不到这个`Role1`存储在哪里？这意味着如果我再次运行我的程序，它会显示“ `Role1`”已经存在。我搜索了“ `Role1`”，但找不到它的存储位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:20:15.723

如果您将成员资格存储在 sql server 中，请检查您的 sql 数据库。应该有表 aspnet_Roles。你所有的角色都会在那里。您还可以在安全性下从 asp.net 配置工具访问角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:24:52.597

[`Roles.RoleExists`](http://msdn.microsoft.com/en-us/library/system.web.security.roles.roleexists.aspx)如果此角色已在您的数据源中定义，请使用。

> 获取一个值，该值指示指定的角色名称是否已存在于角色数据源中。

```
if (Roles.RoleExists(Role1))
    {

    } 
```

还要检查[`Roles.GetAllRoles()`](http://msdn.microsoft.com/en-us/library/system.web.security.roles.getallroles.aspx)以获取应用程序中的所有角色。

```
rolesArray = Roles.GetAllRoles();
foreach(var role in rolesArray)
{
   if (role == Role1)
   {
      //do something
   }
} 
```

# android - 使用调试模式在 Android 设备中模拟本地化

> ID：14262390
> 
> 赞同：0
> 
> 时间：2013-01-10T16:18:53.020
> 
> 标签：android, eclipse, debugging, mocking, android-debug

我将我的平板电脑 android Galaxy 2 连接到我的电脑以使用 Eclipse 调试我的应用程序，它运行良好，但我正在尝试在我包含在我的应用程序中的谷歌地图中模拟位置。

我尝试使用[gps android 模拟器](http://code.google.com/p/android-gps-emulator/)，似乎它连接到它发送位置的端口（在我的情况下为 8600），但没有任何反应。例如，端口 5554 表示无法连接。

之后，我尝试使用 telnet：`telnet localhost 8600`但它什么也没做，它就像控制台中的“清除”。

我在互联网上搜索，但我没有找到答案。

我检查了：

1.  显现：`<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />`
2.  Android 设备设置以启用模拟位置。

我对此感到非常沮丧，因为我需要它。感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:02:26.630

Play Store 上有一个名为[Fake GPS的应用程序可能会有所帮助。](https://play.google.com/store/apps/details?id=com.lexa.fakegps&hl=en)看到[这个问题](https://stackoverflow.com/questions/2531317/android-mock-location-on-device)。

# java - GAE Java本地数据存储总体大小限制？

> ID：14262393
> 
> 赞同：2
> 
> 时间：2013-01-10T16:19:01.180
> 
> 标签：java, google-app-engine, google-cloud-datastore

在本地测试 J/GAE 应用程序时，数据存储的大小是否有设置限制？在本地玩时，我的数据库在达到大约 200MB 大小后似乎很清晰，我很好奇是否存在任何设定的限制。我知道本地数据存储会自行清除的情况，例如在本地开发服务器启动之间（如果配置为这样做），但我在使用过程中看到它很清楚。我并不是专门针对我的问题寻求帮助，而是关于限制的问题让我很好奇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-16T12:40:05.743

就我而言，本地数据存储文件没有限制。但是，我从来没有让这个文件增长太多，无法确定。

由于是本地环境，因此该数据存储相对较小。我显然没有本地硬盘上的所有生产数据，因此该文件主要包含易于管理的测试数据。我可以看到可能需要大量数据的情况，但我仍然认为拥有太多数据并不是一个好主意。

# c# - 使用来自访问数据库的忠诚度点填充文本框；

> ID：14262394
> 
> 赞同：0
> 
> 时间：2013-01-10T16:19:04.113
> 
> 标签：c#, sql, textbox

我正在尝试使用通过文本框输入的 customerID 搜索的信息填充文本框，这是我在下面使用的代码

```
private void txtCustomerID_TextChanged(object sender, EventArgs e)
{
    string strCon = Properties.Settings.Default.PID2dbConnectionString;
    OleDbConnection conn = new OleDbConnection(strCon);

    String sqlPoints = "SELECT points FROM customer WHERE [customerID]=" +   txtCustomerID.Text;
     txtPoints.Text = sqlPoints;
} 
```

但是文本框“txtPoints”只输出sqlpoints的文本而不是数据库中的信息？我不确定我在这里做错了什么。

任何帮助表示赞赏，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:24:12.547

您没有在数据库上执行 SQL 语句。相反，您将其分配给`txtPoints.Text`. 您需要使用例如[OleDbCommand](http://msdn.microsoft.com/en-us/library/5yeecx59%28v=vs.100%29.aspx)对象在 DB 服务器上执行它。

您需要做的是类似于以下内容（注意这是伪代码 - 我尚未测试它是否运行）

```
using (OleDbConnection conn = new OleDbConnection(strCon))
{
    String sqlPoints = "SELECT points FROM customer WHERE [customerID]=" +   txtCustomerID.Text;

    // Create a command to use to call the database.
    OleDbCommand command = new OleDbCommand(sqlPoints, conn)

    // Create a reader containing your results
    using(OleDbReader reader = command.ExecuteReader()) 
    {
        reader.Read(); // Advance to the first row.
        txtPoints.Text = reader[0].ToString(); // Read the contents of the first column
    }
} 
```

还要注意我对 using 的[使用](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)。这将确保您的数据库连接在完成后正确关闭。

# null - 使用通用图像加载器显示本地可绘制对象

> ID：14262397
> 
> 赞同：0
> 
> 时间：2013-01-10T16:19:08.293
> 
> 标签：null, drawable, universal-image-loader

我对通用图像加载器有问题（这很好），我只想从本地显示一个本地可绘制对象。所以我把这个 URL 放到我的 String 数组中：

```
public static final String[] IMAGES = new String[]{ "drawable://" + R.drawable.app_icon } 
```

但它不起作用，我有一个空指针异常..

那么如何显示本地drawable呢？

# python - 循环浏览文件夹中的所有 CSV 文件

> ID：14262405
> 
> 赞同：31
> 
> 时间：2013-01-10T16:19:26.097
> 
> 标签：python

我试图只遍历包含多种文件和许多文件夹的文件夹中的 csv 文件，我只希望它列出该文件夹中的所有 .csv 文件。

这就是我的意思：

```
import os, sys

path = "path/to/dir"
dirs = os.listdir(path)

for file in dirs:
    if file == '*.csv':
        print file 
```

我知道python中没有通配符变量，但是有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-01-10T16:23:28.667

使用 glob 模块：[http ://docs.python.org/2/library/glob.html](http://docs.python.org/2/library/glob.html)

```
import glob
path = "path/to/dir/*.csv"
for fname in glob.glob(path):
    print(fname) 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-01-10T16:21:31.807

Python 提供了[`glob`](http://docs.python.org/2/library/glob.html)应该执行此操作的

```
>>> import glob
>>> glob.glob('/path/to/dir/*.csv') 
```

> 返回与路径名匹配的可能为空的路径名列表，该路径名必须是包含路径规范的字符串。路径名可以是绝对的（如 /usr/src/Python-1.5/Makefile）或相对的（如 ../../Tools/ */* .gif），并且可以包含 shell 样式的通配符。结果中包含损坏的符号链接（如在 shell 中）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-01-09T06:02:17.187

我试图遍历包含 cvs 文件的文件夹并打印列的编号和名称。以下代码对我有用

```
import pandas as pd
import glob
path = r"C:\Users\gumnwe\OneDrive - BP\Desktop\Personal\eiLink\Skin Project\Skin_Project_Data_2020\*.csv"
for fname in glob.glob(path):
   df=pd.read_csv(fname)
   my_list=list(df.columns)
   print(len(my_list),my_list) 
```

# android - $.mobile.loading('show') 在 phonegap 应用程序中不起作用

> ID：14262406
> 
> 赞同：0
> 
> 时间：2013-01-10T16:19:27.543
> 
> 标签：android, cordova, jquery-mobile

我的安卓项目使用phonegap+jquerymobile。我想用 JQM api 为登录页面添加一个加载对话框，代码：

```
function loginFunc() {
            //show loading dialog
            $.mobile.loading('show');

            //here is an ajax method to get login result.

            //hide loading dialog
            $.mobile.loading('hide');
        } 
```

可悲的是，在安卓虚拟设备中，加载对话框根本不起作用。但是，我在 pc 浏览器中测试代码，加载对话框按预期显示。

怎么会这样，有什么好的建议吗？.

最好的问候，杰克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-02T11:03:34.300

我没有真正研究过你的问题，我知道这对你们来说可能不是一个选择。但是请看一下这篇非常好的博客文章：

[http://apachecordova.blogspot.de/2012/11/who-is-murdering-phonegap-its-jquery.html](http://apachecordova.blogspot.de/2012/11/who-is-murdering-phonegap-its-jquery.html)

JQuery Mobile 确实会使用自动生成的东西（例如加载 Spinner，它应该一直存在......）向您的完整 DOM 发送垃圾邮件，因此会减慢您的应用程序的速度！

您还可以查看以下步骤来加速您的 phonegap 应用程序：http: [//floatlearning.com/2011/03/developing-better-phonegap-apps/](http://floatlearning.com/2011/03/developing-better-phonegap-apps/)

请不要误会，但如果您想开发运行良好的 phonegap 应用程序，请不要使用 JQuery mobile。我知道他们提供了很多有用的东西，但是你控制那个巨大的框架来真正优化你的应用程序性能的能力太少了。

祝你好运！

# iphone - 如何删除 iPhone 键盘工具栏边框？

> ID：14262412
> 
> 赞同：0
> 
> 时间：2013-01-10T16:19:38.540
> 
> 标签：iphone, objective-c

我正在使用以下代码在显示时从 iPhone 键盘中删除工具栏。

```
- (void) keyboardDidShowNotification:(NSNotification *)aNotification {

NSArray *array = [[UIApplication sharedApplication] windows];

for (UIWindow* wind in array) {
    for (UIView* currView in wind.subviews) {
        if ([[currView description] hasPrefix:@"<UIPeripheralHostView"]) {
            for (UIView* perView in currView.subviews) {
                if ([[perView description] hasPrefix:@"<UIWebFormAccessory"]) {
                    [perView removeFromSuperview];
                }
            }

        }
    }
} 
```

}

这就像我想要的那样删除了工具栏，但它仍然在工具栏原来所在的位置上方留下了 1px 的边框。我该如何删除它？

此外，这似乎只是 iPhone Retina 显示屏上的问题。iPhone 3GS 和 iPad Retina 没有它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T13:01:26.890

似乎是 removeFromSuperView 中的错误。在将工具栏作为输入附件视图添加到某些选择器以进行内联编辑时，我遇到了同样的问题。调用 2x removeFromSuperView 离开了边界。关闭选择器时使用 [self.view endEditing:YES] 有助于清理选择器和附加到它的附件视图，没有边框。也许这可以为您指明正确的方向？

# php - 使用 passthru 时如何显示警告框？

> ID：14262420
> 
> 赞同：0
> 
> 时间：2013-01-10T16:20:04.110
> 
> 标签：php, javascript, ajax

我正在使用 passthru 文件更新由 ajax 函数触发的数据库。阿贾克斯是：

```
 $("#updateInventory").live('click', function() {
    $('#updateInventory').attr('disabled', 'disabled');

    $.ajax({
            type: "POST",
            url: "updateInventoryExecmws.php",//
            dataType: "json",
            success: function(data){
                                update = data.update;
                                console.log(data);
                                if (update == true){
                alert(data.message);
                                } else {
                                $('#message').html(data.saying);
                                   }
                            }

    });
}); 
```

并且通过文件是：

```
 <?php
passthru('php /home/bookcell/public_html/testbcos/mbas/updateInventorymws.php >> /home/bookcell/public_html/testbcos/exports/mbas.txt &');

$saying = array('saying' => 'Updating Inventory for today. An email will be sent as soon as the update is finished.');

echo json_encode($saying);
?> 
```

这一切正常，并启动 updateInventorymws.php 文件。在这里，我需要检查更新今天是否已经完成，是否已经提醒用户并停止执行脚本。除了警报，这一切都正常工作。这是此的代码：

```
 //inventory already been updated today?
$updatedTodayResult = $conn->query("SELECT * from order_sold where date_sold between NOW() - interval 5 minute and NOW()");

$updatedTodayRows = $updatedTodayResult->num_rows;
if($updatedTodayRows < 1){
    $updatedToday = false;
    $note = "Updating Inventory for today. An email will be sent as soon as the update is finished.";
}else{
    $updatedToday = true;
    $note = "Inventory is already updating for today.";

}
    if($updatedToday == false){
    // run the update here
    }
    $records = $x;

$to = "myemail@me.com";
$subject = "Update Inventory Report";
$body = $records . " records were successfully updated in today's inventory update!";
mail($to, $subject, $body);
$message = array('message' => $note,
      'update' => $updatedToday,
      );

}else{
$records1 = 'Someone has attempted to run Update Inventory more than once today. If this problem shouldn\'t occur, please see administrator.';

$to = "myemail@me.com";
$subject = "Update Inventory Report";
$body = $records1;
mail($to, $subject, $body);
$message = array('message' => $note,
      'update' => $updatedToday,
      );    
}

echo json_encode($message); 
```

有没有办法让它从中创建警报，以便用户知道更新已经完成？

# string - 如果变量批处理可以找到字符串（现有代码需要编辑）

> ID：14262421
> 
> 赞同：0
> 
> 时间：2013-01-10T16:20:05.163
> 
> 标签：string, batch-file, find

我设计了一种从路径和扩展名中删除文件名的方法（用星号替换文件名）。

但是，输出文件在右引号之前添加了一个额外的空格，我不知道为什么或如何解决这个问题？

```
@echo off

SET EXTENT=%~x1
SET PATH=%~dp1

SET /P FILETYPE=

rem SET FILETYPE="%PATH%*%EXTENT%"

echo %FILETYPE%

pause

Type C:\HELLO.txt | findstr /I /V /C:%FILETYPE% >>C:\TEMP.txt

DEL /S/Q "C:\HELLO.txt"

ren "C:\TEMP.txt" "HELLO.txt"

DEL /s/q "C:\TEMP.txt" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:11:16.827

## 更新

在更好地理解了这个问题后，我改变了这个答案。

我认为这段代码接近你想要的。您可能需要使用该`FINDSTR`命令的正则表达式。

```
@ECHO OFF

SET EXT=%~x1

FINDSTR /I /V /C:%EXT% HELLO.TXT >>TEMP.TXT
DEL /Q HELLO.TXT
REN TEMP.TXT HELLO.TXT 
```

# sql - 如何使用java检索sql表及其所有数据

> ID：14262423
> 
> 赞同：2
> 
> 时间：2013-01-10T16:20:09.093
> 
> 标签：sql, jakarta-ee, glassfish, stateless-session-bean

我正在尝试使用 SQL 作为我的数据库和 glassfish 作为我的服务器来制作一个**Java EE项目。**我想将表中的所有数据检索到 html 页面中，但我必须使用**servlet**和**session beans**。我的输出将显示在一个 html 页面中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:46:18.533

一个例子

```
<%@ page language="java"%>
<%@ page import = "java.sql.Connection"%>
<%@ page import = "java.sql.DriverManager"%> 
<%@ page import = "java.sql.ResultSet"%> 
<%@ page import = "java.sql.Statement"%> 
<html>
<body>
<h1>Retrieve data</h1>
<%
try
{
   Class.forName("org.gjt.mm.mysql.Driver");
   Connection conexion = DriverManager.getConnection("jdbc:mysql://localhost/db", "user", "pass");
   if (!conexion.isClosed())
   {
      Statement st = conexion.createStatement();
      ResultSet rs = st.executeQuery("select * from contact");

      out.println("<table border=\"1\"><tr><td>Id</td>< td>Name</td><td>LastName</td><td>Phone</td></tr>");
      while (rs.next())
      {
         out.println("<tr>");
         out.println("<td>"+rs.getObject("id")+"</td>");
         out.println("<td>"+rs.getObject("Name")+"</td>");
         out.println("<td>"+rs.getObject("LastName")+"</td>");
         out.println("<td>"+rs.getObject("Phone")+"</td>");
         out.println("</tr>");
      }
      out.println("</table>");

      conexion.close();
   }
   else
      out.println("fail");
}
catch (Exception e)
{
   out.println("Exception " + e);
   e.printStackTrace();
}
%>
</body>
</html> 
```

# java - 如何在没有用户干预的情况下重新启动正在运行的 webstart 应用程序？

> ID：14262425
> 
> 赞同：1
> 
> 时间：2013-01-10T16:20:12.087
> 
> 标签：java, java-web-start

当 Java Web Start Swing 应用程序正在运行时，我们希望使应用程序自行终止，但通过从服务器下载更新版本来重新启动。理想情况下，终止的实例应该能够将消息传递给新实例（例如，传递登录数据、恢复 UI 状态……）。

我们将 Java Web Start 用于客户端-服务器上下文中的 GUI 应用程序。我们每个月有一两次计划维护，否则，我们只做修补程序。主要区别在于集群不会关闭（作为一个整体），并且客户端仍然可以访问升级后的服务器，使用非热修复版本。

虽然大多数用户每天早上都会重新启动他们的应用程序，从而获得更新的版本，但有些客户端从不关闭他们的 PC，也从不真正关闭客户端。这导致他们在修复后的几天内遇到更正的错误。

我们的解决方案是在保存数据和从服务器重新加载保存和更新的数据之间强制重新启动客户端应用程序。目标是不导致数据丢失，但仍强制下载更新版本。

能够使应用程序自动重新启动将使该解决方案更容易为用户所接受。

# asp.net-mvc - 在 MVC 4 中更改密码

> ID：14262428
> 
> 赞同：13
> 
> 时间：2013-01-10T16:20:15.737
> 
> 标签：asp.net-mvc, authentication, simplemembership

我正在构建 ASP.NET MVC 4 应用程序。我使用 Simple Membership 提供程序来管理系统内的身份验证和授权。在这种方法中更改密码的方法是什么。我找到了一个 ChangePassword 方法，它需要三个参数，包括原始密码，来操作。

有没有其他方法可以在不知道原始密码的情况下覆盖/更改用户的密码？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-10T16:29:05.010

当用户想要更改密码时使用 ChangePassword - 当前密码是他们允许发生这种情况的证据（想想更改密码屏幕）。

我认为最直接的方法是调用 WebSecurity.GeneratePasswordResetToken() 并将结果与​​新密码一起传递给 WebSecurity.ResetPassword。

```
 var token = WebSecurity.GeneratePasswordResetToken("UserName");
  var result = WebSecurity.ResetPassword(token, "NewPassword"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-12T15:32:20.767

这里有一篇关于[如何在 MVC 4 中使用 SimpleMembership 实现密码重置/更改](http://kevin-junghans.blogspot.com/2013/04/password-reset-with-simplemembership.html)的详细文章。它还包括您可以下载的源代码。

此示例使用电子邮件向用户发送 URL 以单击以重置密码。这比让用户直接在网站上输入旧密码和新密码更安全，因为这是对用户的另一种验证。这减轻了某人获得用户密码并通过更改密码将其锁定的情况。这也允许用户在忘记密码的情况下重置密码。

发送带有链接的电子邮件的代码如下所示。

```
[AllowAnonymous]
[HttpPost]
public ActionResult ResetPassword(ResetPasswordModel model)
{
    string emailAddress = WebSecurity.GetEmail(model.UserName);
    if (!string.IsNullOrEmpty(emailAddress))
    {
        string confirmationToken =
            WebSecurity.GeneratePasswordResetToken(model.UserName);
        dynamic email = new Email("ChngPasswordEmail");
        email.To = emailAddress;
        email.UserName = model.UserName;
        email.ConfirmationToken = confirmationToken;
        email.Send();

       return RedirectToAction("ResetPwStepTwo");
    }

    return RedirectToAction("InvalidUserName");
} 
```

这将创建一封电子邮件，其中包含指向 Web API 的链接，该 Web API 接受令牌作为传入的 id。当他们单击链接时，它会点击此方法。

```
[AllowAnonymous]
public ActionResult ResetPasswordConfirmation(string Id)
{
    ResetPasswordConfirmModel model = new ResetPasswordConfirmModel() { Token = Id };
    return View(model);
} 
```

此操作从查询字符串中获取令牌并将其放入传递给允许用户输入新密码的视图的 ResetPasswordConfirmationModel 中。新密码输入两次以确保他们输入正确，这在页面上是有效的。当他们提交此信息时，他们将被带到实际重置密码的此操作的 POST 版本。

```
[AllowAnonymous]
[HttpPost]
public ActionResult ResetPasswordConfirmation(ResetPasswordConfirmModel model)
{
    if (WebSecurity.ResetPassword(model.Token, model.NewPassword))
    {
        return RedirectToAction("PasswordResetSuccess");
    }
    return RedirectToAction("PasswordResetFailure");
} 
```

# java - 为什么String中的equals方法不使用hash？

> ID：14262431
> 
> 赞同：45
> 
> 时间：2013-01-10T16:20:18.743
> 
> 标签：java, string, hashcode

`equals`String 类中方法的代码是

```
public boolean equals(Object anObject) {
    if (this == anObject) {
        return true;
    }
    if (anObject instanceof String) {
        String anotherString = (String)anObject;
        int n = count;
        if (n == anotherString.count) {
            char v1[] = value;
            char v2[] = anotherString.value;
            int i = offset;
            int j = anotherString.offset;
            while (n-- != 0) {
                if (v1[i++] != v2[j++])
                    return false;
            }
            return true;
        }
    }
    return false;
} 
```

我有一个问题 - 为什么这种方法不使用 hashCode() ？

据我所知， hashCode() 可以快速比较两个字符串。

更新：我知道，两个不相等的字符串可以有相同的哈希值。但是两个相等的字符串具有相等的哈希值。因此，通过使用 hashCode()，我们可以立即看到两个字符串不相等。

我只是认为使用 hashCode() 可以成为一个很好的**过滤**器`equals`。

更新2：这里有一些代码，关于我们在这里讨论。

这是 String 方法 equals 的示例

```
public boolean equals(Object anObject) {
    if (this == anObject) {
        return true;
    }
    if (anObject instanceof String) {
        String anotherString = (String)anObject;
        if (hashCode() == anotherString.hashCode()){
            int n = count;
            if (n == anotherString.count) {
                char v1[] = value;
                char v2[] = anotherString.value;
                int i = offset;
                int j = anotherString.offset;
                while (n-- != 0) {
                    if (v1[i++] != v2[j++])
                        return false;
                }
                return true;
            }
        }else{
            return false;
        }
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-10T16:34:01.983

哈希码可能是对不平等的第一轮检查。但是，它提出了一些权衡。

1.  `String`哈希码是惰性计算的，尽管它们确实使用了“保护”值。如果您正在比较具有长生命周期的字符串（即，它们可能已经计算了哈希码），这不是问题。否则，您要么计算哈希码（可能很昂贵），要么在尚未计算哈希码时忽略检查。如果你有很多短命的字符串，你会更频繁地忽略检查而不是使用它。
2.  在现实世界中，大多数字符串的前几个字符不同，因此首先检查哈希码不会节省太多。当然，也有例外（例如 URL），但同样，在*现实世界*的编程中它们很少发生。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-10T16:43:43.080

这个问题其实已经被JDK的开发者考虑过了。我无法在[各种消息](http://mail.openjdk.java.net/pipermail/core-libs-dev/2010-March/003698.html)中找到为什么它没有被包括在内。增强功能也列在[错误数据库](https://bugs.openjdk.java.net/browse/JDK-6932808)中。

即，提议的更改之一是：

```
public boolean equals(Object anObject) {
    if (this == anObject) // 1st check identitiy
        return true;
    if (anObject instanceof String) { // 2nd check type
        String anotherString = (String)anObject;
        int n = count;
        if (n == anotherString.count) { // 3rd check lengths
            if (n != 0) { // 4th avoid loading registers from members if length == 0
                int h1 = hash, h2 = anotherString.hash;
                if (h1 != 0 && h2 != 0 && h1 != h2) // 5th check the hashes
                    return false; 
```

还讨论了`==`用于留存字符串（即，如果两个字符串都被留存：）`if (this != anotherString) return false;`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-10T16:21:52.313

1) 计算 hashCode 可能不会比直接比较字符串快。

2) 如果 hashCode 相等，则字符串可能仍然不相等

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-10T17:17:23.793

This can be a good idea for many use cases.

However, as a foundation class that is widely used in all kinds of applications, the author really has no idea whether this extra checking can save or hurt performance on average.

I'm gonna guess that the majority of `String.equals()` are invoked in a Hashmap, *after* the hash codes has been known to be equal, so testing hash codes again is pointless.

If we consider comparing 2 random strings, even with a small char set like US ASCII, it is very likely that the hashes are different, and char-by-char comparison fails on 1st char. So it'll be a waste to check hashes.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-10T16:54:12.017

AFAIK，以下检查可以添加到字符串。这将检查是否设置了哈希码并且它们不同，那么字符串不能相等。

```
if (hash != 0 && anotherString.hash != 0 && hash != anotherString.hash)
    return false;
if (hash32 != 0 && anotherString.hash32 != 0 && hash32 != anotherString.hash32)
    return false; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T16:30:18.920

字符串哈希码不是免费和自动可用的。为了依赖哈希码，必须对两个字符串都计算它，然后才能进行比较。由于可能发生冲突，如果哈希码相等，则需要进行第二次逐字符比较。

虽然对于普通程序员来说 String 看起来是不可变的，但它确实有一个私有字段来存储它的哈希码，一旦它被计算出来。但是，仅当首次需要哈希码时才计算此字段。从[这里](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String.0hash)的字符串源代码可以看出：

```
 private int hash;

 public int hashCode() {
      int h = hash;
      if (h == 0) {
         ...
         hash = h;  
      }
      return h;
 } 
```

因此，首先计算哈希码是否有意义并不明显。对于您的特定情况（可能非常长的字符串的相同实例相互比较了很多次），它仍然可能是：profile.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-27T12:30:28.010

如果哈希码考虑了字符串的全部内容，那么计算具有 n 个字符的字符串的哈希码需要 n 次操作。对于长字符串来说，这很多。如果两个字符串相同，比较两个字符串需要 n 次操作，不会比计算哈希长。但如果字符串不同，那么很可能会更早发现差异。

字符串散列函数通常不会考虑非常长的字符串的所有字符。在这种情况下，如果我比较两个字符串，我可以首先比较散列函数使用的字符，而且我至少和检查散列一样快。但是如果这些字符没有区别，那么哈希值将是相同的，所以无论如何我必须比较完整的字符串。

总结：一个好的字符串比较永远不会慢，但通常比比较散列（以及在散列匹配时比较字符串）快得多。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-10T18:01:58.943

> 我认为， hashCode() 可以更快地比较两个字符串。

论据？

反对该提议的论点：

*   更多操作

`hashcode()`from`String`必须访问字符串中的每个字符，并且必须`2`对每个字符进行计算。
所以我们需要一个带有`n`字符`5*n`操作（加载、乘法、查找/加载、乘法、存储）的字符串。两次，因为我们比较了两个字符串。（好吧，一个存储和一个加载并没有真正计入合理的实现。）
对于最好的情况，这使得对`10*x`长度为`m`and`n`的两个字符串的操作总数`x=min(m,n)`。最坏的情况`10*x`是`x=m=n`. 平均介于两者之间，也许`(m*n)/2`。

当前等于在最佳情况下`3`操作的实现需求。`2`加载，`1`比较。最糟糕的是`3*x`对长度为`m`和`n`的两个字符串的操作`x=m=n`。平均值介于两者之间，也许`3*(m*n)/2`。

*   即使我们缓存了哈希，也不清楚我们是否保存了一些东西

我们必须分析使用模式。可能大多数时候，我们只会要求一次相等，而不是多次。即使我们多次询问，从缓存中节省时间也是不够的。

不直接反对速度，但仍然很好的反驳：

*   反直观

我们不希望在 equals 中使用哈希码，因为我们肯定知道`hash(a)==hash(b)`对于某些`a!=b`. 每个阅读本文（以及有关散列的知识）的人都会想知道那里发生了什么。

*   导致不良示例/意外行为

我已经可以看到关于 SO 的下一个问题：“我有一个包含数十亿次 'a' 的字符串。为什么将它与 equal() 与 'b' 进行比较需要很长时间？” :)

# python - 使用 pandas 的“大数据”工作流程

> ID：14262433
> 
> 赞同：1149
> 
> 时间：2013-01-10T16:20:32.017
> 
> 标签：python, mongodb, pandas, hdf5, large-data

在学习熊猫的过程中，我已经尝试了好几个月来想出这个问题的答案。我在日常工作中使用 SAS，它的核心支持非常棒。然而，由于许多其他原因，SAS 作为一个软件是可怕的。

有一天，我希望用 python 和 pandas 代替我对 SAS 的使用，但我目前缺乏大型数据集的核心工作流程。我不是在谈论需要分布式网络的“大数据”，而是说文件太大而无法放入内存但小到足以放入硬盘驱动器。

我的第一个想法是使用`HDFStore`将大型数据集保存在磁盘上，并仅将我需要的部分拉入数据帧进行分析。其他人提到 MongoDB 是一种更易于使用的替代方案。我的问题是这样的：

完成以下任务的最佳实践工作流程是什么：

1.  将平面文件加载到永久的磁盘数据库结构中
2.  查询该数据库以检索数据以输入 pandas 数据结构
3.  在 Pandas 中操作片段后更新数据库

现实世界的例子将不胜感激，尤其是任何在“大数据”上使用 pandas 的人。

编辑——我希望它如何工作的一个例子：

1.  迭代地导入一个大的平面文件并将其存储在一个永久的磁盘数据库结构中。这些文件通常太大而无法放入内存。
2.  为了使用 Pandas，我想读取可以放入内存的这些数据的子集（通常一次只有几列）。
3.  我将通过对选定列执行各种操作来创建新列。
4.  然后我必须将这些新列附加到数据库结构中。

我正在尝试找到执行这些步骤的最佳实践方式。阅读有关 pandas 和 pytables 的链接似乎附加一个新列可能是一个问题。

编辑——具体回答杰夫的问题：

1.  我正在建立消费者信用风险模型。数据种类包括电话、SSN、地址特征；财产价值；犯罪记录、破产等贬损信息……我每天使用的数据集平均有近 1,000 到 2,000 个混合数据类型的字段：数字和字符数据的连续变量、名义变量和有序变量。我很少追加行，但我确实执行了许多创建新列的操作。
2.  典型的操作包括使用条件逻辑将多个列组合成一个新的复合列。例如，`if var1 > 2 then newvar = 'A' elif var2 = 4 then newvar = 'B'`。这些操作的结果是我的数据集中每条记录的新列。
3.  最后，我想将这些新列附加到磁盘数据结构中。我将重复第 2 步，使用交叉表和描述性统计数据探索数据，试图找到有趣、直观的建模关系。
4.  一个典型的项目文件通常约为 1GB。文件被组织成这样一种方式，其中一行包含消费者数据的记录。对于每条记录，每一行都有相同数量的列。情况将永远如此。
5.  在创建新列时，我很少会按行进行子集化。但是，在创建报告或生成描述性统计数据时，对我来说，对行进行子集化是很常见的。例如，我可能想为特定业务线创建一个简单的频率，例如零售信用卡。为此，除了我想要报告的任何列之外，我只会选择那些业务范围 = 零售的记录。但是，在创建新列时，我会提取所有数据行，并且只提取操作所需的列。
6.  建模过程要求我分析每一列，寻找与某些结果变量的有趣关系，并创建描述这些关系的新复合列。我探索的专栏通常是在小范围内完成的。例如，我将专注于一组 20 列仅处理财产价值的列，并观察它们与贷款违约的关系。一旦探索了这些并创建了新的专栏，我就会转到另一组专栏，比如大学教育，然后重复这个过程。我正在做的是创建候选变量来解释我的数据与某些结果之间的关系。在这个过程的最后，我应用了一些学习技术，从这些复合列中创建一个方程。

我很少会向数据集添加行。我几乎总是会创建新列（统计/机器学习用语中的变量或特征）。

* * *

## 回答 #1

> 赞同：700
> 
> 时间：2013-01-10T22:57:22.433

我经常以这种方式使用数十 GB 的数据，例如，我在磁盘上有表，我通过查询读取、创建数据并附加回来。

值得阅读[文档](http://pandas-docs.github.io/pandas-docs-travis/io.html#hdf5-pytables)，并[在此线程的后期](https://groups.google.com/forum/m/?fromgroups#!topic/pydata/cmw1F3OFJSc)获取有关如何存储数据的一些建议。

会影响您如何存储数据的详细信息，例如：
*提供尽可能多的详细信息；我可以帮助你开发一个结构。*

1.  数据大小、行数、列数、列类型；你是追加行，还是只是列？
2.  典型的操作会是什么样子。例如，对列进行查询以选择一堆行和特定列，然后执行操作（在内存中），创建新列，保存这些。
    （举一个玩具例子可以让我们提供更具体的建议。）
3.  处理完之后，你会做什么？第 2 步是临时的还是可重复的？
4.  输入平面文件：多少，以 Gb 为单位的粗略总大小。这些是如何组织的，例如按记录？每个文件是否包含不同的字段，还是每个文件都有一些记录以及每个文件中的所有字段？
5.  您是否曾经根据标准选择行（记录）的子集（例如选择字段 A > 5 的行）？然后做一些事情，或者你只是选择所有记录的字段A，B，C（然后做一些事情）？
6.  您是否“处理”所有列（分组），或者是否有一个很好的比例只能用于报告（例如，您想保留数据，但不需要明确地拉入该列，直到最终结果时间）？

## 解决方案

*确保您[至少`0.10.1`](http://pandas.pydata.org/getpandas.html)安装了 pandas。*

[逐块](http://pandas-docs.github.io/pandas-docs-travis/io.html#iterating-through-files-chunk-by-chunk)读取迭代文件和[多个表查询](http://pandas-docs.github.io/pandas-docs-travis/io.html#multiple-table-queries)。

由于 pytables 被优化为按行操作（这是您查询的内容），我们将为每组字段创建一个表。这种方式很容易选择一小组字段（这将适用于一个大表，但这样做更有效......我想我将来可能能够解决这个限制......这是无论如何更直观）：（
以下是伪代码。）

```
import numpy as np
import pandas as pd

# create a store
store = pd.HDFStore('mystore.h5')

# this is the key to your storage:
#    this maps your fields to a specific group, and defines 
#    what you want to have as data_columns.
#    you might want to create a nice class wrapping this
#    (as you will want to have this map and its inversion)  
group_map = dict(
    A = dict(fields = ['field_1','field_2',.....], dc = ['field_1',....,'field_5']),
    B = dict(fields = ['field_10',......        ], dc = ['field_10']),
    .....
    REPORTING_ONLY = dict(fields = ['field_1000','field_1001',...], dc = []),

)

group_map_inverted = dict()
for g, v in group_map.items():
    group_map_inverted.update(dict([ (f,g) for f in v['fields'] ])) 
```

读入文件并创建存储（主要是做什么`append_to_multiple`）：

```
for f in files:
   # read in the file, additional options may be necessary here
   # the chunksize is not strictly necessary, you may be able to slurp each 
   # file into memory in which case just eliminate this part of the loop 
   # (you can also change chunksize if necessary)
   for chunk in pd.read_table(f, chunksize=50000):
       # we are going to append to each table by group
       # we are not going to create indexes at this time
       # but we *ARE* going to create (some) data_columns

       # figure out the field groupings
       for g, v in group_map.items():
             # create the frame for this group
             frame = chunk.reindex(columns = v['fields'], copy = False)    

             # append it
             store.append(g, frame, index=False, data_columns = v['dc']) 
```

现在您在文件中拥有了所有表（实际上，如果您愿意，您可以将它们存储在单独的文件中，您可能必须将文件名添加到 group_map，但这可能不是必需的）。

这是获取列和创建新列的方式：

```
frame = store.select(group_that_I_want)
# you can optionally specify:
# columns = a list of the columns IN THAT GROUP (if you wanted to
#     select only say 3 out of the 20 columns in this sub-table)
# and a where clause if you want a subset of the rows

# do calculations on this frame
new_frame = cool_function_on_frame(frame)

# to 'add columns', create a new group (you probably want to
# limit the columns in this new_group to be only NEW ones
# (e.g. so you don't overlap from the other tables)
# add this info to the group_map
store.append(new_group, new_frame.reindex(columns = new_columns_created, copy = False), data_columns = new_columns_created) 
```

当您准备好进行后期处理时：

```
# This may be a bit tricky; and depends what you are actually doing.
# I may need to modify this function to be a bit more general:
report_data = store.select_as_multiple([groups_1,groups_2,.....], where =['field_1>0', 'field_1000=foo'], selector = group_1) 
```

关于 data_columns，您实际上不需要定义**任何**data_columns；它们允许您根据列子选择行。例如：

```
store.select(group, where = ['field_1000=foo', 'field_1001>0']) 
```

在最终报告生成阶段，它们可能对您最感兴趣（本质上，一个数据列与其他列分离，如果您定义很多，这可能会在一定程度上影响效率）。

您可能还想：

*   创建一个函数，该函数采用字段列表，在 groups_map 中查找组，然后选择这些并连接结果，以便获得结果帧（这本质上是 select_as_multiple 所做的）。*这样，结构对您来说将是非常透明的。*
*   某些数据列的索引（使行子集更快）。
*   启用压缩。

有问题时告诉我！

* * *

## 回答 #2

> 赞同：166
> 
> 时间：2013-12-19T19:46:48.987

我认为上面的答案缺少一种我发现非常有用的简单方法。

当我有一个文件太大而无法加载到内存中时，我会将文件分成多个较小的文件（按行或按列）

示例：如果有 30 天的价值约 30GB 的交易数据，我每天将其分解为约 1GB 大小的文件。我随后分别处理每个文件并在最后汇总结果

最大的优点之一是它允许并行处理文件（多个线程或进程）

另一个优点是文件操作（如示例中的添加/删除日期）可以通过常规 shell 命令完成，这在更高级/复杂的文件格式中是不可能的

这种方法并不涵盖所有场景，但在很多场景中都非常有用

* * *

## 回答 #3

> 赞同：115
> 
> 时间：2016-03-23T20:30:53.543

现在，在问题发生两年后，一个“核心外”的 pandas 等价物：[dask](http://dask.pydata.org/en/latest/)。太棒了！虽然它不支持所有 pandas 功能，但你可以用它走得很远。更新：在过去的两年中，它一直得到维护，并且有大量用户社区与 Dask 合作。

[而现在，在提出问题四年后，在Vaex](https://github.com/vaexio/vaex)中出现了另一个高性能的“核心外”熊猫。它“使用内存映射、零内存复制策略和惰性计算来获得最佳性能（不浪费内存）。” 它可以处理数十亿行的数据集，并且不会将它们存储到内存中（甚至可以对次优硬件进行分析）。

* * *

## 回答 #4

> 赞同：73
> 
> 时间：2013-11-02T07:14:07.340

如果您的数据集在 1 到 20GB 之间，您应该获得一个具有 48GB RAM 的工作站。然后 Pandas 可以将整个数据集保存在 RAM 中。我知道这不是您在这里寻找的答案，但是在具有 4GB RAM 的笔记本电脑上进行科学计算是不合理的。

* * *

## 回答 #5

> 赞同：66
> 
> 时间：2014-12-03T22:09:40.410

我知道这是一个旧线程，但我认为[Blaze](https://github.com/ContinuumIO/blaze)库值得一试。它专为这些类型的情况而设计。

**从文档：**

Blaze 将 NumPy 和 Pandas 的可用性扩展到分布式和核外计算。Blaze 提供了一个类似于 NumPy ND-Array 或 Pandas DataFrame 的接口，但将这些熟悉的接口映射到各种其他计算引擎，如 Postgres 或 Spark。

**编辑：**顺便说一句，它得到了 ContinuumIO 和 NumPy 的作者 Travis Oliphant 的支持。

* * *

## 回答 #6

> 赞同：59
> 
> 时间：2013-01-11T22:11:52.907

pymongo 就是这种情况。我还在 python 中使用 sql server、sqlite、HDF、ORM (SQLAlchemy) 进行了原型设计。首先，pymongo 是一个基于文档的数据库，因此每个人都是一个文档（`dict`属性）。许多人组成一个集合，您可以拥有多个集合（人、股票市场、收入）。

pd.dateframe -> pymongo 注意：我使用`chunksize`in`read_csv`将其保持在 5 到 10k 条记录（如果更大，pymongo 会丢弃套接字）

```
aCollection.insert((a[1].to_dict() for a in df.iterrows())) 
```

查询：gt = 大于...

```
pd.DataFrame(list(mongoCollection.find({'anAttribute':{'$gt':2887000, '$lt':2889000}}))) 
```

`.find()`返回一个迭代器，所以我通常`ichunked`用来分割成更小的迭代器。

加入一个怎么样，因为我通常会将 10 个数据源粘贴在一起：

```
aJoinDF = pandas.DataFrame(list(mongoCollection.find({'anAttribute':{'$in':Att_Keys}}))) 
```

然后（在我的情况下，有时我必须`aJoinDF`在其“可合并”之前先进行聚合。）

```
df = pandas.merge(df, aJoinDF, on=aKey, how='left') 
```

然后您可以通过下面的更新方法将新信息写入您的主集合。（逻辑集合与物理数据源）。

```
collection.update({primarykey:foo},{key:change}) 
```

在较小的查找中，只需非规范化即可。例如，您在文档中有代码，您只需添加域代码文本并在`dict`创建文档时进行查找。

现在你有一个很好的基于一个人的数据集，你可以在每个案例上释放你的逻辑并制作更多属性。最后，您可以将您的 3 to memory max 关键指标读入 pandas 并进行枢轴/聚合/数据探索。这对我来说适用于 300 万条带有数字/大文本/类别/代码/浮点数/...的记录

您还可以使用 MongoDB 中内置的两种方法（MapReduce 和聚合框架）。[有关聚合框架的更多信息，请参见此处](http://docs.mongodb.org/manual/tutorial/aggregation-examples/)，因为它似乎比 MapReduce 更容易，并且看起来很方便快速聚合工作。请注意，我不需要定义我的字段或关系，我可以将项目添加到文档中。在快速变化的 numpy、pandas、python 工具集的当前状态下，MongoDB 帮助我开始工作:)

* * *

## 回答 #7

> 赞同：54
> 
> 时间：2017-03-26T05:59:45.757

**我发现对大数据**用例有用的一个技巧是通过将浮点精度降低到 32 位来减少数据量。它并不适用于所有情况，但在许多应用程序中，64 位精度是多余的，2 倍的内存节省是值得的。为了使一个明显的观点更加明显：

```
>>> df = pd.DataFrame(np.random.randn(int(1e8), 5))
>>> df.info()
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 100000000 entries, 0 to 99999999
Data columns (total 5 columns):
...
dtypes: float64(5)
memory usage: 3.7 GB

>>> df.astype(np.float32).info()
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 100000000 entries, 0 to 99999999
Data columns (total 5 columns):
...
dtypes: float32(5)
memory usage: 1.9 GB 
```

* * *

## 回答 #8

> 赞同：49
> 
> 时间：2013-03-21T21:19:30.510

我发现这有点晚了，但我遇到了类似的问题（抵押预付款模型）。我的解决方案是跳过 pandas HDFStore 层并使用直接的 pytables。我在最终文件中将每一列保存为单独的 HDF5 数组。

我的基本工作流程是首先从数据库中获取 CSV 文件。我gzip它，所以它没有那么大。然后我将其转换为面向行的 HDF5 文件，通过在 python 中对其进行迭代，将每一行转换为实际数据类型，并将其写入 HDF5 文件。这需要几十分钟，但它不使用任何内存，因为它只是逐行操作。然后我将面向行的 HDF5 文件“转置”为面向列的 HDF5 文件。

表转置如下所示：

```
def transpose_table(h_in, table_path, h_out, group_name="data", group_path="/"):
    # Get a reference to the input data.
    tb = h_in.getNode(table_path)
    # Create the output group to hold the columns.
    grp = h_out.createGroup(group_path, group_name, filters=tables.Filters(complevel=1))
    for col_name in tb.colnames:
        logger.debug("Processing %s", col_name)
        # Get the data.
        col_data = tb.col(col_name)
        # Create the output array.
        arr = h_out.createCArray(grp,
                                 col_name,
                                 tables.Atom.from_dtype(col_data.dtype),
                                 col_data.shape)
        # Store the data.
        arr[:] = col_data
    h_out.flush() 
```

读回来看起来像：

```
def read_hdf5(hdf5_path, group_path="/data", columns=None):
    """Read a transposed data set from a HDF5 file."""
    if isinstance(hdf5_path, tables.file.File):
        hf = hdf5_path
    else:
        hf = tables.openFile(hdf5_path)

    grp = hf.getNode(group_path)
    if columns is None:
        data = [(child.name, child[:]) for child in grp]
    else:
        data = [(child.name, child[:]) for child in grp if child.name in columns]

    # Convert any float32 columns to float64 for processing.
    for i in range(len(data)):
        name, vec = data[i]
        if vec.dtype == np.float32:
            data[i] = (name, vec.astype(np.float64))

    if not isinstance(hdf5_path, tables.file.File):
        hf.close()
    return pd.DataFrame.from_items(data) 
```

现在，我通常在具有大量内存的机器上运行它，所以我可能对内存使用不够小心。例如，默认情况下，加载操作会读取整个数据集。

这通常对我有用，但有点笨拙，而且我不能使用花哨的 pytables 魔法。

编辑：与记录数组 pytables 默认值相比，这种方法的真正优势在于，我可以使用无法处理表的 h5r 将数据加载到 R 中。或者，至少，我无法让它加载异构表。

* * *

## 回答 #9

> 赞同：37
> 
> 时间：2017-11-22T03:55:40.313

正如其他人所指出的，几年后出现了一个“核心外”的 pandas 等价物：[dask](http://dask.pydata.org/en/latest/)。尽管 dask 不是 pandas 的替代品，但它的所有功能都因其以下几个原因而脱颖而出：

Dask 是一个用于分析计算的灵活并行计算库，针对“大数据”集合（如并行数组、数据帧和列表）的动态任务调度进行了优化，这些集合将常见接口（如 NumPy、Pandas 或 Python 迭代器）扩展到更大-内存或分布式环境，并从笔记本电脑扩展到集群。

> Dask 强调以下优点：
> 
> *   熟悉：提供并行化的 NumPy 数组和 Pandas DataFrame 对象
> *   灵活：为更多自定义工作负载和与其他项目的集成提供任务调度界面。
> *   Native：在纯 Python 中启用分布式计算，并访问 PyData 堆栈。
> *   快速：以低开销、低延迟和快速数值算法所需的最小序列化运行
> *   向上扩展：在具有 1000 个内核的集群上弹性运行 向下扩展：在单个进程中在笔记本电脑上轻松设置和运行
> *   响应：设计时考虑到交互式计算，它提供快速反馈和诊断以帮助人类

并添加一个简单的代码示例：

```
import dask.dataframe as dd
df = dd.read_csv('2015-*-*.csv')
df.groupby(df.user_id).value.mean().compute() 
```

像这样替换一些熊猫代码：

```
import pandas as pd
df = pd.read_csv('2015-01-01.csv')
df.groupby(df.user_id).value.mean() 
```

并且，特别值得注意的是，通过`concurrent.futures`接口提供了一个通用的基础设施来提交自定义任务：

```
from dask.distributed import Client
client = Client('scheduler:port')

futures = []
for fn in filenames:
    future = client.submit(load, fn)
    futures.append(future)

summary = client.submit(summarize, futures)
summary.result() 
```

* * *

## 回答 #10

> 赞同：24
> 
> 时间：2018-03-18T09:30:39.990

值得一提的是[Ray](https://github.com/ray-project/ray)，
它是一个分布式计算框架，有自己的分布式pandas实现。

只需替换 pandas 导入，代码就可以正常工作：

```
# import pandas as pd
import ray.dataframe as pd

# use pd as usual 
```

可以在这里阅读更多详细信息：

[https://rise.cs.berkeley.edu/blog/pandas-on-ray/](https://rise.cs.berkeley.edu/blog/pandas-on-ray/)

* * *

更新：处理 pandas 分发的部分，已被提取到[modin](https://github.com/modin-project/modin)项目。

现在使用它的正确方法是：

```
# import pandas as pd
import modin.pandas as pd 
```

* * *

## 回答 #11

> 赞同：21
> 
> 时间：2015-04-28T05:22:21.403

另一种变化

在 pandas 中完成的许多操作也可以作为 db 查询（sql、mongo）来完成

使用 RDBMS 或 mongodb 允许您在 DB Query 中执行一些聚合（针对大数据进行了优化，并有效地使用缓存和索引）

稍后，您可以使用 pandas 进行后期处理。

这种方法的优点是您获得了处理大数据的数据库优化，同时仍然以高级声明性语法定义逻辑 - 而不必处理决定在内存中做什么和做什么的细节的核心。

尽管查询语言和 pandas 不同，但将部分逻辑从一种翻译到另一种通常并不复杂。

* * *

## 回答 #12

> 赞同：14
> 
> 时间：2014-10-09T19:07:16.193

如果您采用创建数据管道的简单路径将其分解为多个较小的文件，请考虑使用[Ruffus 。](http://www.ruffus.org.uk/)

* * *

## 回答 #13

> 赞同：13
> 
> 时间：2019-06-03T09:40:50.147

我想指出 Vaex 包。

> Vaex 是一个用于惰性核心数据帧（类似于 Pandas）的 Python 库，用于可视化和探索大型表格数据集。它可以在高达每秒十亿 (10 ⁹ ) 个对象/行的 N 维网格上计算统计数据，例如平均值、总和、计数、标准差等。可视化是使用直方图、密度图和 3D 体绘制完成的，允许对大数据进行交互式探索。Vaex 使用内存映射、零内存复制策略和惰性计算来获得最佳性能（不浪费内存）。

看看文档：[https](https://vaex.readthedocs.io/en/latest/) ://vaex.readthedocs.io/en/latest/ API 非常接近 pandas 的 API。

* * *

## 回答 #14

> 赞同：11
> 
> 时间：2016-10-04T15:32:56.040

我最近遇到了一个类似的问题。我发现只需以块的形式读取数据并在将其以块的形式写入相同的 csv 时将其附加效果很好。我的问题是根据另一个表中的信息添加日期列，使用某些列的值如下。这可能会帮助那些对 dask 和 hdf5 感到困惑但更熟悉像我这样的 pandas 的人。

```
def addDateColumn():
"""Adds time to the daily rainfall data. Reads the csv as chunks of 100k 
   rows at a time and outputs them, appending as needed, to a single csv. 
   Uses the column of the raster names to get the date.
"""
    df = pd.read_csv(pathlist[1]+"CHIRPS_tanz.csv", iterator=True, 
                     chunksize=100000) #read csv file as 100k chunks

    '''Do some stuff'''

    count = 1 #for indexing item in time list 
    for chunk in df: #for each 100k rows
        newtime = [] #empty list to append repeating times for different rows
        toiterate = chunk[chunk.columns[2]] #ID of raster nums to base time
        while count <= toiterate.max():
            for i in toiterate: 
                if i ==count:
                    newtime.append(newyears[count])
            count+=1
        print "Finished", str(chunknum), "chunks"
        chunk["time"] = newtime #create new column in dataframe based on time
        outname = "CHIRPS_tanz_time2.csv"
        #append each output to same csv, using no header
        chunk.to_csv(pathlist[2]+outname, mode='a', header=None, index=None) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-08-01T19:06:39.840

parquet 文件格式非常适合您描述的用例。您可以有效地读取特定的列子集`pd.read_parquet(path_to_file, columns=["foo", "bar"])`

[https://pandas.pydata.org/docs/reference/api/pandas.read_parquet.html](https://pandas.pydata.org/docs/reference/api/pandas.read_parquet.html)

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2020-01-08T14:05:14.410

目前我正在“像”你一样工作，只是规模较小，这就是为什么我没有 PoC 来提供我的建议。

但是，我似乎在使用pickle作为缓存系统并将各种功能的执行外包到文件中取得了成功——从我的突击队/主文件中执行这些文件；例如，我使用 prepare_use.py 来转换对象类型，将数据集拆分为测试、验证和预测数据集。

你的泡菜缓存是如何工作的？我使用字符串来访问动态创建的pickle文件，具体取决于传递的参数和数据集（我尝试捕获并确定程序是否已经运行，使用.shape作为数据集，使用dict传递参数）。尊重这些措施，我得到一个字符串来尝试查找和读取 .pickle 文件，如果找到，可以跳过处理时间以跳转到我现在正在处理的执行。

使用数据库时我遇到了类似的问题，这就是为什么我在使用这个解决方案时感到很高兴，但是 - 肯定有很多限制 - 例如由于冗余而存储大量的泡菜集。可以通过适当的索引将表格从转换之前更新到转换之后 - 验证信息会打开另一本书（我尝试合并抓取的租金数据并在 2 小时后基本停止使用数据库 - 因为我想在之后跳回去每个转换过程）

我希望我的 2 美分能在某种程度上帮助你。

问候。

# python - Python：从列表中删除空格和'\ n'

> ID：14262439
> 
> 赞同：3
> 
> 时间：2013-01-10T16:20:53.460
> 
> 标签：python, list

我正在尝试删除空格并从列表中输入，我需要将其作为坐标导入。但是，这似乎不起作用。给出以下错误：

```
AttributeError: 'list' object has no attribute 'strip' 
```

目前我仍在考虑删除空格（首先必须删除这些空格，然后再输入）。

有没有人有任何建议为什么这不起作用？

代码如下：

```
# Open a file
Bronbestand = open("D:\\Documents\\SkyDrive\\afstuderen\\99 EEM - Abaqus 6.11.2\\scripting\\testuitlezen4.txt", "r")
headerLine = Bronbestand.readline()
valueList = headerLine.split(",")
#valueList = valueList.replace(" ","")

xValueIndex = valueList.index("x")
yValueIndex = valueList.index("y")
#xValueIndex = xValueIndex.replace(" ","")
#yValueIndex = yValueIndex.replace(" ","")

coordList = []

for line in Bronbestand.readlines():
    segmentedLine = line.split(",")
    coordList.append([segmentedLine[xValueIndex], segmentedLine[yValueIndex]])

coordList2 = [x.strip(' ') for x in coordList]

print coordList2 
```

其中“Bronbestand”如下：

```
id,x,y,
      1,  -1.24344945,   4.84291601
      2,  -2.40876842,   4.38153362
      3,  -3.42273545,    3.6448431
      4,  -4.22163963,   2.67913389
      5,   -4.7552824,   1.54508495
      6,  -4.99013376, -0.313952595
      7,   -4.7552824,  -1.54508495
      8,  -4.22163963,  -2.67913389
      9,  -3.42273545,   -3.6448431 
```

提前感谢大家的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:24:28.887

看起来你的问题就在这里。该`append()`方法将*单个项目*添加到列表中。如果将列表附加到列表，则会得到列表列表。

```
coordList.append([segmentedLine[xValueIndex], segmentedLine[yValueIndex]]) 
```

有两种方法可以解决此问题。

```
# Append separately
coordList.append(segmentedLine[xValueIndex])
coordList.append(segmentedLine[yValueIndex])

# Use extend()
coordList.extend([segmentedLine[xValueIndex], segmentedLine[yValueIndex]]) 
```

或者，如果您打算拥有一个列表列表，则需要深度迭代两个级别。

```
coordList2 = [[x.strip(' ') for x in y] for y in coordList] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:29:55.513

```
import csv
buff = csv.DictReader(Bronbestand)

result = []

for item in buff:
    result.append(dict([(key, item[key].strip()]) for key in item if key])) # {'y': '-3.6448431', 'x': '-3.42273545', 'id': '9'} 
```

您的数据是有效的逗号分隔值 (CSV) 尝试使用本机 python csv 解析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:23:43.243

`coordList`是一个二元素列表的列表。

如果你希望它是这样的，你的`strip`行应该是：

```
coordList2 = [[x[0].strip(' '), x[1].strip(' ')] for x in coordList] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T16:24:22.013

`coordList`这里有 2 层深，所以你应该这样做：

```
coordList2 = [[a.strip(' '), b.strip(' ')] for a, b in coordList] 
```

但更具描述性的名称比`a`而且`b`可能更好！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T16:24:30.017

```
for line in Bronbestand.readlines():
    segmentedLine = line.split(",")
    coordList.append(segmentedLine[xValueIndex])
    coordList.append(segmentedLine[yValueIndex]) 
```

以前，您将列表附加到`coordList`，而不是字符串，因为有一个额外的`[]`对。

这意味着`x`您的列表理解中的 ( `coordList2 = [x.strip(' ') for x in coordList]`) 是一个列表，它没有`strip()`方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T16:25:59.273

您正在将列表附加到您的`coordLis`.

`coordList.append([segmentedLine[xValueIndex], segmentedLine[yValueIndex]])`

更好用`extend()`。例如：

```
In [84]: lis=[1,2,3]

In [85]: lis.append([4,5])

In [86]: lis
Out[86]: [1, 2, 3, [4, 5]]  # list object is appended

In [87]: lis.extend([6,7])     #use extend()

In [88]: lis
Out[88]: [1, 2, 3, [4, 5], 6, 7]     #6 and 7 are appended as normal elements 
```

# php - 检查表中是否已经存在值 PHP/MYSQL

> ID：14262446
> 
> 赞同：0
> 
> 时间：2013-01-10T16:21:14.573
> 
> 标签：php, mysql, sql

我想检查一个值是否已经在表中。我的表结构是这样的：
ApplicantId = INT
EventId = INT
StudentId = INT

不需要使用唯一的，因为这些表具有依赖关系。

以下是我迄今为止尝试过的：

```
include('../connectdb.php');

$ScholarPointId = $_GET["ScholarPointId"];
$Point = $_GET["Point"];
$ScholarId = $_GET["ScholarId"];
$EventId = $_GET["EventId"];

$verifysql = mysql_query("SELECT EventId FROM scholar_attended_events WHERE ScholarId ='$ScholarId' ");

#$resultVerify = mysql_fetch_assoc($verifysql);
$num_rows = mysql_num_rows($verifysql);

if( $num_rows > 0 )
{
 $script = "<script>
     alert('The user has already attended this event!');
            </script>";
 header('updatescholarpoints.php');
 exit();
}
else{
$result = mysql_query("UPDATE scholar_points 
SET scholar_points.Points = 
scholar_points.Points + $Point  
WHERE scholar_points.ScholarPointId = '$ScholarPointId' ") or die(mysql_error());

mysql_query("INSERT INTO scholar_attended_events (EventId , ScholarId) VALUES( '$EventId' , '$ScholarId' ) ") 
or die(mysql_error());  

}

?> 
```

我想要的是检查 EventId 是否已经被 Student = StudentId 占用。如果是这样，那么系统将提示一个警告框。否则，更新并插入到相应的表中。我怎样才能做到这一点？看来我在这里错过了什么。如果你能帮忙，我真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:23:55.273

只是缺少一个`=`？

```
$verifysql = mysql_query("SELECT EventId FROM scholar_attended_events WHERE ScholarId =$ScholarId "); 
```

（并使用 PDO 或 mysqli，您的代码确实处于弃用模式）

# vb.net - 在 KeyPress 期间提取字符串上的大写字母

> ID：14262448
> 
> 赞同：0
> 
> 时间：2013-01-10T16:21:22.120
> 
> 标签：vb.net, keypress

我有两个文本框..

我想在 KeyPress 事件期间提取/复制要由用户输入到另一个 TextBox 的所有大写字母。

逻辑：

```
Private Sub TextBox1_KeyPress()

'If the Character is a Capital Letter Then
'   Copy and Concatenate it to the second TextBox
'End If

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:44:00.247

你可以试试这个：

```
For i = 0 To TextBox1.Text.Length - 1
    Dim c As Char = TextBox1.Text.Chars(i)
    If Char.IsUpper(c) Then
        TextBox2.AppendText(c)
    End If
Next 
```

如果你需要它作为一个函数：

```
Private Function ExtractUppers(ByVal txt As TextBox) As String
    Dim sExtract As String = ""
    For i = 0 To txt.Text.Length - 1
        Dim c As Char = txt.Text.Chars(i)

        If Char.IsUpper(c) Then
            sExtract = sExtract & c
        End If
    Next

    Return sExtract
End Function 
```

在您的按钮中：

```
 TextBox2.Text = ExtractUppers(TextBox1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T17:09:10.617

已经被朋友解决了！:) 感谢您的回复！

```
Private Sub TextBox1_TextChange()

      CapitalLetter = Regex.Replace(TextBox1.Text, "[^A-Z]", String.Empty)
      TextBox2.Text = CapitalLetter

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:53:52.810

也许你可以使用这个技巧：

```
If letterVar = letterVar.ToUpper() then
    TextBox2.Text &= letterVar
End if 
```

# jquery - 无法实现加载栏

> ID：14262452
> 
> 赞同：0
> 
> 时间：2013-01-10T16:21:31.717
> 
> 标签：jquery, html, css

有人能告诉我为什么这不起作用吗？我很困惑。有问题的网站：http: [//goodmoodhostel.com](http://goodmoodhostel.com)

JS：

```
$(window).load(function(){  
    $("#loading").hide();  
}) 
```

HTML：

```
<div id="loading">  
    Loading content, please wait..  
    <img src="ajax-loader.gif" alt="loading.." />  
</div> 
```

CSS：

```
#loading {  
    position:absolute;  
    width:100%;
    height:2000px;  
    top:0px;   
    text-align:center;  
    padding:7px 0 0 0;  
    font:bold 11px Arial, Helvetica, sans-serif;  
z-index:100;
} 
```

问题是页面开始加载，尽管它应该被`#loading`覆盖整个身体并且`z-index`比任何其他元素都高的 div 隐藏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:23:54.770

那是因为`jquery.js`没有找到。

你可能会改变

```
<script type="text/javascript" src="jquery.js"></script> 
```

至

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

# magento - 如何在 Magento 上显示发票创建日期

> ID：14262455
> 
> 赞同：1
> 
> 时间：2013-01-10T16:21:32.923
> 
> 标签：magento, pdf, invoice

现在在 magento 上，当我将发票打印为 PDF 时，它显示“订单日期”。我们需要将其替换为“发票创建日期”。

你能告诉我该怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T20:00:00.973

加载发票

```
$invoice = Mage::getModel('sales/order_invoice')->loadByIncrementId($invoiceIncrementId); 
```

然后使用获取发票日期

```
$createdDate = $invoice->getCreatedAt(); 
```

并放入 $createdDate 并修改以下代码

```
$page->drawText(
            Mage::helper('sales')->__('Order Date: ') . Mage::helper('core')->formatDate(
                $order->getCreatedAtStoreDate(), 'medium', false
            ),
            35,
            ($top -= 15),
            'UTF-8'
        ); 
```

到

```
$page->drawText(
            Mage::helper('sales')->__('Invoice Creation Date: ') . Mage::helper('core')->formatDate(
                $createdDate, 'medium', false
            ),
            35,
            ($top -= 15),
            'UTF-8'
        ); 
```

**笔记 ：-**

如果您有同一个订单的多张发票，那么您可以通过以下方式获取所有发票增量 ID

```
$_invoices = $_order->getInvoiceCollection();
foreach($_invoices as $_invoice){

     $_invoice->getIncrementId() = $_invoice->getIncrementId();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:58:06.943

由于 Magento 严格通过 PHP 代码创建订单 PDF（意味着它不使用任何 html->pdf 解析器或任何类似的想法），因此您必须扩展执行此操作的类并相应地对其进行修改。因此，您正在寻找的课程是：

```
Mage_Sales_Model_Order_Pdf_Invoice 
```

用方法

```
protected function insertOrder(&$page, $obj, $putOrderId = true) 
```

然后搜索

```
$page->drawText( Mage::helper('sales')->__('Order Date: ') . Mage::helper('core')->formatDate($order->getCreatedAtStoreDate(), 'medium', false), 35, ($top -= 15), 'UTF-8'); 
```

我猜你知道如何用你自己的模块来扩展它。如果没有，该过程在[如何在 Magento 中创建简单的“Hello World”模块中进行了描述？](https://stackoverflow.com/questions/576908/how-to-create-a-simple-hello-world-module-in-magento).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T09:06:05.240

我有同样的问题，并在第 132 行将发票日期添加到 app/code/core/Mage/Sales/Model/Order/invoice.php

```
 /* Add document text and number */
        $this->insertDocumentNumber(
            $page,
            Mage::helper('sales')->__('Invoice # ') . $invoice->getIncrementId()
 .' '.
        Mage::helper('sales')->__('Invoice date: ') . Mage::helper('core')->formatDate(
            $invoice->getCreatedAt(), 'medium', false
        ),
        35,
        ($top -= 15),
        'UTF-8'
        ); 
```

# equation - 用 10 次多项式求解方程组，LSM

> ID：14262456
> 
> 赞同：0
> 
> 时间：2013-01-10T16:21:35.450
> 
> 标签：equation, numerical-methods, resolve

我有使用普通 LSM（最小二乘法）求解方程组（多项式 10 次）的数值问题。我获得了具有巨大和非常小的值的参数 - 因此我不能用这种方法构造逆矩阵 - 即使在扩展变量中精度也很低。我尝试在 C++、Matlab、Delphi 中执行此操作。有人可以知道应用仪器，我可以用足够的精度或数字提示来做到这一点，并得到很好的结果。不幸的是，矩阵的标准计算是难以捉摸的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:29:25.253

我认为您的问题来自您使用 10 阶多项式这一事实，这通常会导致数值问题：

*   首先，它们可能不适合，因为振荡很大。即使在对简单函数进行插值时，也会出现这些振荡，请参见著名[的龙格示例](http://en.wikipedia.org/wiki/Runge%27s_phenomenon)。
*   其次，高阶多项式的拟合会导致山条件线性系统，这就是为什么您不能反转矩阵的原因（无论如何您都不应该这样做）。我做了一个简单的实验：我取了11个等距点（在区间[0,1]上），组装线性系统的矩阵来求解。Matlab给了我一个大约1e8的[条件数](http://en.wikipedia.org/wiki/Condition_number)，所以最小二乘矩阵的条件数是1e16。所以你的矩阵“接近奇异”，这意味着所有的数值精度都丢失了。

因此，摆脱问题的最佳方法是摆脱 10 阶多项式。您可能应该考虑低阶多项式、样条曲线或分段多项式逼近。

如果你真的需要 10 阶多项式（例如，如果你知道你的数据是由这样的多项式生成的），那么不要反转矩阵。使用良好的预条件子和迭代方法来求解系统，而不需要反转矩阵。

# jquery - 滚动页面时滚动一个 Div

> ID：14262458
> 
> 赞同：2
> 
> 时间：2013-01-10T16:21:50.140
> 
> 标签：jquery, css, html

这个函数jquery，当用户滚动页面时滚动一个div（使用名为“搜索”的css）。

```
$(window).scroll(function(){
     $.each($('.Search'),function(){
         var windowpos = $(window).scrollTop();
         var finaldestination = windowpos+90; 
         $(this).stop().animate({'top':finaldestination},300);
     });
}); 
```

此函数 jquery 在 Internet Explorer 9 中不起作用。我尝试做一个包含属性 position:fixed 的 css，但这在 Internet Explorer 9 中不起作用。有一个解决方案允许我在用户滚动 div在 Internet Explorer 中滚动页面？我为基本的英语道歉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:45:42.530

你只能使用css...

```
.search {
  width: 200px;
  height: 50px;
  background-color: red;
  position: fixed;
  top: 90px;
} 
```

请参阅[示例](http://jsfiddle.net/zah8g/5/)

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:32:04.633

在 IE 中运行良好。我用于搜索的 CSS 是

```
.search {
  position: absolute;
  top: 90px;
} 
```

[工作演示](http://jsfiddle.net/zah8g/3/)

**编辑**

要获得更快的动画过渡，请清除队列。

```
.stop(true) 
```

# yeoman - 防止 yeoman.io 缩小图像

> ID：14262460
> 
> 赞同：5
> 
> 时间：2013-01-10T16:21:53.587
> 
> 标签：yeoman

所以我一直在为我的项目使用 yeoman.io，并且我为我的图像设置了一个文件夹结构。但是当我构建它时，它会更改我的文件的文件名。

我什至使用：

```
$ yeoman build:text 
```

因为我只想缩小我的 css、js 和 html 模板，但它仍然会缩小图像。不确定我是否做错了什么。

编辑：

我在 gruntfile 中注释掉了所有 img 实例，这似乎有效，但我认为这不是正确的方法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-14T21:17:07.853

你的意思是图像优化或修订？根据自己的需要配置 GruntFile.js 是没有问题的。它使 Yeoman/Grunt 非常强大，因为它具有很强的适应性。

如果您不想优化图像，请删除`img`任务中的配置。

```
// Optimizes JPGs and PNGs (with jpegtran & optipng)
   img: {
   }, 
```

如果您不想重命名图像文件，请从任务中删除该`img`行：`rev`

```
// renames JS/CSS to prepend a hash of their contents for easier
// versioning
rev: {
  js: 'scripts/**/*.js',
  css: 'styles/**/*.css'
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-29T00:33:54.413

如果您删除图像 revving 它会破坏您的缓存，您应该尝试保持 revving 并更新您的 JS 文件。

尝试将您的`usemin`块更新为如下内容：

```
usemin: {
    html: ['<%= yeoman.dist %>/{,*/}*.html'],
    css: ['<%= yeoman.dist %>/styles/{,*/}*.css'],
    js: '<%= yeoman.dist %>/scripts/{,*/}*.js',
    options: {
        assetsDirs: [
            '<%= yeoman.dist %>',
            '<%= yeoman.dist %>/images',
            '<%= yeoman.dist %>/styles'
        ],
        patterns: {
            js: [
                [/(images\/.*?\.(?:gif|jpeg|jpg|png|webp|svg))/gm, 'Update the JS to reference our revved images']
            ]
        }
    }
} 
```

您应该已经有了该`usemin`方法，只需`js`使用 js 路径正则表达式添加属性并添加`pattern`属性。这会将 JS 文件中所有出现的图像替换为新的 revved 版本，这样客户端的浏览器就不会使用缓存的图像而不是新的图像。

# apache-flex - 带有标签截断的组布局

> ID：14262461
> 
> 赞同：0
> 
> 时间：2013-01-10T16:21:57.880
> 
> 标签：apache-flex

我有一个包含两个标签的组。标签中的文本动态变化，有时文本很长。如果我对标签使用 width=50%，这可能会导致未使用的丢失空间，如下例所示，如果一个标签需要少于 50%。如何布局标签以便使用最大可用空间（即标签宽度之和 = 100%，如果需要，一个或两个标签会截断其文本）？

```
<?xml version="1.0"?>
<s:Application
  xmlns:fx="http://ns.adobe.com/mxml/2009"
  xmlns:s="library://ns.adobe.com/flex/spark" 
  xmlns:mx="library://ns.adobe.com/flex/mx">
  <s:HGroup width="200">
    <s:Label width="50%" text="Label1" maxDisplayedLines="1"/>
    <s:Label width="50%" text="Label2: some very very long text" maxDisplayedLines="1"/>
  </s:HGroup>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:34:43.920

像这样：

```
<s:HGroup width="200" gap="5" id="container">
    <s:Label text="Label1: so" maxDisplayedLines="1" showTruncationTip="true" maxWidth="{container.width/2}"/>
    <s:Label text="Label2: some very very long text that i want to display" maxDisplayedLines="1" maxWidth="{container.width/2}" showTruncationTip="true"/>
</s:HGroup> 
```

# android - Android 获取从 Python 生成的结果

> ID：14262463
> 
> 赞同：1
> 
> 时间：2013-01-10T16:21:59.280
> 
> 标签：android, python

由于我是 Python 的初学者，我刚刚编写了一些代码来获取长字符串中的一些文本。
通常，对于客户端-服务器通信，我使用 PHP 作为服务器端语言。
在 Google Python 之后，我知道在某些方面，Python 会比 PHP 运行得更快，例如获取 HTML 中的所有链接。
使用 PHP，我知道我可以使用正则表达式来提取 HTML 中的所有链接，并将结果生成为 JSON，然后使用 HTTP 返回 Android 端。
问题是，我怎样才能以 Python 方式/？
我真的没有在服务器中使用 python 的经验。有可能这样做吗？
如果是，请给出一些提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:59:11.487

如旧答案中所述，从页面中清除链接并不难：

[https://stackoverflow.com/a/13465097/514485](https://stackoverflow.com/a/13465097/514485)

Python 有一个 JSON 模块，可以轻松地将结果格式化为 JSON。

# r - 使用粘贴功能将 R 文件写入 Stata

> ID：14262467
> 
> 赞同：2
> 
> 时间：2013-01-10T16:22:05.677
> 
> 标签：r, stata

我正在尝试将`R`文件写入`Stata`使用该函数`Stata`生成的文件名：`paste`

```
# x is any data frame 
library(foreign)
year<-2010
z<-paste("data", year, sep=".")
write.dta(x, “z.dta")

R gives me the error: 
Error: unexpected input in "write.dta(x, “" 
```

如果您能提供一些提示来修复此错误，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:27:42.753

尝试这个：

```
write.dta(x, paste(z, '.dta', sep='')) 
```

这将产生一个文件名`data.2010.dta`

更短的使用`paste0`函数

```
write.dta(x, paste0(z, '.dta')) 
```

# servicestack - ServiceStack/SyncReply.svc 上没有端点监听

> ID：14262476
> 
> 赞同：2
> 
> 时间：2013-01-10T16:22:27.503
> 
> 标签：servicestack

我下载了 ServiceStack Hello 演示并尝试在 VS2010 中使用它，但是当我调用该服务时，我得到的只是：

在 http://localhost/ServiceStack/SyncReply.svc 上没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。

# java - 使用 OpenCSV 从 Java 中的 CSV 数据中提取统计信息

> ID：14262478
> 
> 赞同：0
> 
> 时间：2013-01-10T16:22:30.593
> 
> 标签：java, string, parsing, csv, statistics

我正在使用 OpenCSV 解析 Java 中的 CSV 文件，并希望获得（例如）文件中每行的第三个元素状态为“UDP”或“TCP”的实例数。如何从我现在所在的位置选择我提到的特定数据并将其存储在单独的变量中？（即 - 如果在每行的第三个元素中包含的整个文件中有 20 个“UDP”实例，则显示计数为 20 的整数）到目前为止，我只能打印出文件的全部内容，我我解析如下：

```
try {
    CSVReader reader = new CSVReader(new FileReader(filePath), ',');

    // Reads the complete file into list of tokens.
    List<String[]> rowsAsTokens = null;
    try {
        rowsAsTokens = reader.readAll();
    } 
    catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    Iterator<String[]> rowsAsTokensIt = rowsAsTokens.iterator();
    while (rowsAsTokensIt.hasNext()) {
        for (String token : rowsAsTokensIt.next()) {
            System.out.print(token + " ");
        }
        System.out.println();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:57:50.897

您要问的是非常非常基本的 Java 或 C 或 C++，我建议您阅读有关 Java 的内容。

```
double sum = 0;
for(String[] row: rowsAsTokens) {
    // check the first row is HELLO
    if(row[0].equals("HELLO")) {
        // get the second row as a double
        sum += Double.parseDouble(row[1]);
    }
}
// print the grand total once at the end
System.out.println(sum); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:53:52.463

我会在[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)中维护计数。我也会避免使用`readAll()`，这样您就不必重复数据两次。

只需声明地图

```
Map<Object, Integer> countMap = new HashMap<String, Integer>(); 
```

然后为您在第 3 列中遇到的每个值保留一个计数

```
String [] row;
while ((row = reader.readNext()) != null) {
  String value = row[2]; // value in 3rd column

  // default count to 0 if not in map
  Integer count = countMap.get(value) != null ? countMap.get(value) : 0;

  // increment count in map
  countMap.put(value, count + 1);

}

System.out.println("UDP count: " + countMap.get("UDP"));
System.out.println("TCP count: " + countMap.get("TCP")); 
```

作为替代方案，您可以使用高度灵活/可配置的[Super CSV 。](http://supercsv.sourceforge.net/)上述解决方案适用于微不足道的场景（例如保留 1 列的计数），但如果您继续添加越来越多的功能，它很容易变得不可读。Super CSV 具有强大的[单元处理器](http://supercsv.sourceforge.net/cell_processors.html)API，它可以自动进行转换和约束，从而大大简化这一过程。

例如，您可以编写一个[自定义单元处理器](http://supercsv.sourceforge.net/examples_new_cell_processor.html)，为它遇到的每个唯一列值维护一个计数。

```
package example;

import java.util.Map;

import org.supercsv.cellprocessor.CellProcessorAdaptor;
import org.supercsv.cellprocessor.ift.CellProcessor;
import org.supercsv.util.CsvContext;

public class Counter extends CellProcessorAdaptor {

  private final Map<Object, Integer> countMap;

  public Counter(final Map<Object, Integer> countMap) {
    super();
    if (countMap == null){
      throw new IllegalArgumentException("countMap should not be null");
    }
    this.countMap = countMap;
  }

  public Counter(final Map<Object, Integer> countMap, final CellProcessor next) {
    super(next);
    if (countMap == null){
      throw new IllegalArgumentException("countMap should not be null");
    }
    this.countMap = countMap;
  }

  @Override
  public Object execute(Object value, CsvContext context) {

    validateInputNotNull(value, context);

    // get count from map (default to 0 if doesn't exist)
    Integer count = countMap.get(value) != null ? countMap.get(value) : 0;

    countMap.put(value, count + 1);

    return next.execute(value, context);
  }

} 
```

然后使用第三列的处理器

```
package example;

import java.io.IOException;
import java.io.StringReader;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.supercsv.cellprocessor.ParseDate;
import org.supercsv.cellprocessor.constraint.NotNull;
import org.supercsv.cellprocessor.ift.CellProcessor;
import org.supercsv.io.CsvListReader;
import org.supercsv.io.ICsvListReader;
import org.supercsv.prefs.CsvPreference;

public class Counting {

  private static final String CSV = "id,time,protocol\n" + "1,01:23,UDP\n"
      + "2,02:34,TCP\n" + "3,03:45,TCP\n" + "4,04:56,UDP\n"
      + "5,05:01,TCP";

  public static void main(String[] args) throws IOException {

    final Map<Object, Integer> countMap = new HashMap<Object, Integer>();

    final CellProcessor[] processors = new CellProcessor[] { 
        new NotNull(), // id
        new ParseDate("hh:mm"), // time
        new NotNull(new Counter(countMap)) // protocol
    };

    ICsvListReader listReader = null;
    try {
      listReader = new CsvListReader(new StringReader(CSV),
          CsvPreference.STANDARD_PREFERENCE);

      listReader.getHeader(true);

      List<Object> row;
      while ((row = listReader.read(processors)) != null) {
        System.out.println(row);
      }

    } finally {
      listReader.close();
    }

    System.out.println("Protocol count = " + countMap);

  }

} 
```

输出：

```
[1, Thu Jan 01 01:23:00 EST 1970, UDP]
[2, Thu Jan 01 02:34:00 EST 1970, TCP]
[3, Thu Jan 01 03:45:00 EST 1970, TCP]
[4, Thu Jan 01 04:56:00 EST 1970, UDP]
[5, Thu Jan 01 05:01:00 EST 1970, TCP]
Protocol count = {UDP=2, TCP=3} 
```

# salesforce - 限制用户将关闭日期放在过去，特定用户除外

> ID：14262481
> 
> 赞同：1
> 
> 时间：2013-01-10T16:22:44.620
> 
> 标签：salesforce

尝试编辑此验证规则，如果关闭日期是过去，则限制用户更新机会（所有打开的 opps），但是，提到的用户角色似乎不起作用。如果需要，我希望只允许两个用户能够设置过去的结束日期。

AND ( NOT ( CONTAINS( $UserRole.Name, "Manager")), ISCHANGED( CloseDate ) , CloseDate < Today() )

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:09:41.417

我也遇到了同样的问题，使用 CONTAINS 和 $UserRole.Name （或 $UserRole.Anything 真的）。也许 CONTAINS 只喜欢处理数据库中的列，我不确定。我会注意到，如果您使用 =，它可以正常工作，例如 $UserRole.Name="Line Manager"。这并不理想，但这对您来说是一个有效的解决方法吗？

# iphone - pushViewController 没有标题动画

> ID：14262482
> 
> 赞同：1
> 
> 时间：2013-01-10T16:22:47.060
> 
> 标签：iphone, xcode, cocoa, uinavigationcontroller, pushviewcontroller

我使用以下代码推送 Viewcontroller：

```
 if (! self.infoViewController) {
     self.infoViewController = [[InfoViewController alloc] initWithNibName:@"InfoViewController" bundle:nil];
 }
    [UIView animateWithDuration:0.7f
                     animations:^{
                         [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
                         [self.navigationController pushViewController:self.infoViewController animated:NO];
                         [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.navigationController.view cache:NO];
                     }]; 
```

是否可以禁用导航栏标题动画？它在动画期间从左侧滑动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:28:34.837

像这样推送没有动画的 ViewController：

```
if (! self.infoViewController) {
     self.infoViewController = [[InfoViewController alloc] initWithNibName:@"InfoViewController" bundle:nil];
 }
[self.navigationController pushViewController:self.infoViewController animated:NO]; 
```

这不会为您的推送标题设置动画。我希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:13:57.987

对不起。这是答案：

```
[UIView animateWithDuration:0.7f
                 animations:^{
                     [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
                     [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.navigationController.view cache:NO];
                 }];
[self.navigationController pushViewController:self.infoViewController animated:NO]; 
```

# html - 为什么孩子的div高度超过身体

> ID：14262485
> 
> 赞同：2
> 
> 时间：2013-01-10T16:22:57.757
> 
> 标签：html, css, height

在我的 html 中，我有类似的东西

```
<html>
    <head>
    </head>

    <body>
        <div id = "main">
            <div> I'm 500px tall</div>
            <div> I'm xxxpx tall</div>
        </div>            
    </body>

</html> 
```

我的CSS就像

```
head, body, #main{
    height:100%;
    width: 100%;
}

otherDivs{
    height: some number of px
} 
```

所有内容的显示都是块或内联，没有浮动

定位是绝对的或相对的

发生的事情是#main（包装它的&body&html）高度不是整个页面高度（只有页面高度的2/3左右），并且#main中包含的一些div实际上超过了main的高度

我通过将 height:100% 更改为 min-height:100% 解决了这个问题，但不明白为什么元素会超过其父 div 的高度，我 100% 确定所有子 div 的高度都以 px 声明，会' t #main 自动包装它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:30:25.960

而不是使用`height:100%`for `#main`，使用`overflow:hidden;`属性

# java - 从 Fragment 活动访问 Fragment 的子项

> ID：14262487
> 
> 赞同：0
> 
> 时间：2013-01-10T16:22:57.847
> 
> 标签：java, android, eclipse

我有一个片段定义为

```
public class AddValue extends Fragment 
{
    private int position;
    public EditText addEdit;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
       super.onCreate(savedInstanceState);
       Log.e("Test", "hello");
       position = getArguments().getInt("position");

    }

 /**
  * Handle the results from the voice recognition activity.
  */     
    @Override
    public void onActivityCreated(Bundle savedInstanceState) 
    {
        super.onActivityCreated(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
    {
       View view = inflater.inflate(R.layout.add_value, container, false);

       addEdit = (EditText) view.findViewById(R.id.editBox);

       if (position == 0)
           addEdit.setHint("Patient Id");
       if (position == 1)
           addEdit.setHint("Age");
       if (position == 2)
           addEdit.setHint("Height In Inches");
       if (position == 3)
           addEdit.setHint("Weight in lbs");
       if (position == 4)
           addEdit.setHint("LA Volume Index");

       return view;
     }

} 
```

我有一个`MainActivity extends FragmentActivity`

现在我正在使用这个

```
FragAdapter myAdapter = (FragAdapter)   mPager.getAdapter();
             AddValue screen  = (AddValue) myAdapter.getItem(myPosition);
             EditText box = (EditText) screen.getView().findViewById(R.id.editBox);

    public class FragAdapter extends FragmentPagerAdapter 
    {
        public FragAdapter(FragmentManager fm) 
        {
            super(fm);
        }

        @Override
        public int getCount() 
        {
            return 5;
        }

        @Override
        public Fragment getItem(int position) 
        {
            AddValue val = new AddValue();
            Fragment frag = val;
            Bundle arg = new Bundle();
            arg.putInt("position", position);  
            frag.setArguments(arg);
            return frag;
        }

    } 
```

如何从我的 mainactivity 访问 EditText。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:12:29.373

得到了解决方案

```
 EditText text = (EditText) mPager.getChildAt(myPosition).findViewById(R.id.editBox);
         text.setText(matches.get(0)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:01:28.797

如果您的`AddValue`片段是从 xml 实例化的，那么您可以这样：
在 onActivityResult 添加这些：
`AddValue fragment = getSupportFragmentManager().findFragmentById(R.id.host_fragment)`
`host_fragment`是来自 xml 的片段的 id。
`if(fragment != null){`
`fragment.setText(textFromSpeech);`
`}`

并在`AddValue`片段添加方法中`public void setText(String text) { this.addEdit = text;}`

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:34:44.547

你的问题缺乏一些结构。您究竟想在哪里到达 EditText？你为什么要这个？也许不同的设置会更好。

无论如何，您可以使 EditText 成为一个公共静态变量，以便从任何地方轻松访问它。在大多数情况下，这不是处理事情的好方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-28T17:03:20.090

您可以使用 Fragment 类的 getView 方法访问。

例如，您的 MyFragment 中有一个 TextView，ID 为“text_view”
在您的 Activity 中制作您的片段：

```
MyFragment myFragment = new MyFragment(); 
```

当您需要一个孩子时，只需调用 getView，然后找到您的 childView。

```
View view = myFragment.getView();
if (view !=null) {
view.findViewById(R.id.text_view).setText("Child Accessed :D");
} 
```

# jquery - Jquery/Javascript - jquery ajax 请求中的变量范围和行为

> ID：14262489
> 
> 赞同：2
> 
> 时间：2013-01-10T16:23:03.793
> 
> 标签：jquery, ajax-request

我有一种我无法理解的奇怪行为。这是代码：

```
$.ajax({
    url: ...,
    dataType: ...,
       data: ...,
    success: function( data ) {
            ...

            for (var i=0; i<data.length; i++) {

                label_to_change = "some-" + i + "-item"

                        $.ajax({
                            url: ...,
                            dataType: ...,
                               data: ...,
                            success: function( data ) {

                                // Why I can't access the value in each loop, this will give me allways the last loop value
                                console.log(label_to_change)
                            }
                        }); 
            } 
    }
}); 
```

我需要在第二个 ajax 请求中访问 var label_to_change 而不是得到这个：

```
some-0-item
some-1-item
some-2-item 
```

我懂了：

```
some-2-item
some-2-item
some-2-item 
```

关于我做错了什么的任何线索？

最好的祝福，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T16:29:12.343

问题是因为该`label_to_change`变量是单个实例，并且 for 循环在您的任何 ajax 调用完成之前对其进行了 3 次更改。您可以使用匿名函数（或此处的任何正确术语）并执行以下操作：

```
label_to_change = "some-" + i + "-item";

(function(newLabel){
    $.ajax({
       url: ...,
       dataType: ...,
       data: ...,
       success: function( data ) {
          console.log(newLabel)
       }
    }); 
})(label_to_change); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:30:47.647

**更新** 你应该这样做：（在代码的顶部）

```
var change_index=0; 
```

在第二个 ajax 调用中：

```
complete : function(){
   change_index++;
} 
```

这是 ：

```
 var change_index=0;
  var i=0;
    $.ajax({
        url: ...,
        dataType: ...,
           data: ...,
        success: function( data ) {
                ...

               while( i<data.length) {

                    label_to_change = "some-" + change_index + "-item"

                            $.ajax({
                                url: ...,
                                dataType: ...,
                                   data: ...,
                                success: function( data ) {

                                    console.log(label_to_change)
                                }
                complete:function(){
                                    change_index ++;
                 i++;
                }
                            }); 
                } 
        }
    }); 
```

因为 ajax 完成时间与服务器页面执行有关，**for 语句的**执行速度会比服务器语句快得多。所以它会将 **label_to_change**设置为 2，也许 ajax 调用还没有完成。所以你应该在 ajax 的完整事件函数中增加**label_to_change** 而不是在 forloop 主体中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:36:14.810

这是因为在 for 循环完成后，ajax 调用将成功。因此，它使用的值只是最新的。

在成功函数中声明 label_to_change 变量应该可以工作。试试这个：

```
for (var i=0; i<data.length; i++) {
    //EDIT: added
    var iCurrent = i;

    $.ajax({
        url: ...,
        dataType: ...,
        data: ...,
        success: function( data ) {
            //placing the declaration inside this function will make the i value
            // be specific to this ajax call

            label_to_change = "some-" + iCurrent + "-item";

            console.log(label_to_change)
        }
    }); 
 } 
```

# php - 拆分已经在数组中的数组中的值

> ID：14262495
> 
> 赞同：1
> 
> 时间：2013-01-10T16:23:13.323
> 
> 标签：php

每次出现“/”时，我都试图拆分已经存储在数组中的值......这行得通吗？

php

```
$start = array('hi', 'hello', 'yes/no');
$finish = explode('/', $start); 
```

$finish 现在应该如下所示：

```
$finish = array('hi', 'hello', 'yes', 'no'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T16:25:44.637

它不起作用，因为您将数组传递给`explode`，而它只接受一个字符串。

但是，您可以通过多种方式做您需要的事情。最短的是

```
$finish = explode('/', implode('/', $start)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T16:25:21.650

```
$finish = array();
foreach ($start as $x) {
    $finish = array_merge($finish, explode('/', $x));
} 
```

# r - 修复ggplot中构面的顺序

> ID：14262497
> 
> 赞同：128
> 
> 时间：2013-01-10T16:23:14.693
> 
> 标签：r, ggplot2, sequence, facet

数据：

```
df <- data.frame(
    type   = c("T", "F", "P", "T", "F", "P", "T", "F", "P", "T", "F", "P"), 
    size   = c("50%", "50%", "50%", "100%", "100%", "100%", "150%", "150%", "150%", "200%", "200%", "200%"),
    amount = c(48.4, 48.1, 46.8, 25.9, 26, 24.9, 21.1, 21.4, 20.1, 20.8, 21.5, 16.5)
) 
```

我需要使用 ggplot (x-axis -> `type`, y-axis -> `amount`, group by `size`) 绘制上述数据的条形图。当我使用以下代码时，我没有得到变量`type`以及`size`数据中显示的顺序。请看图。我为此使用了以下代码。

```
 ggplot(df, aes(type, amount , fill=type, group=type, shape=type, facets=size)) + 
  geom_col(width=0.5, position = position_dodge(width=0.6)) + 
  facet_grid(.~size) + 
  theme_bw() + 
  scale_fill_manual(values = c("darkblue","steelblue1","steelblue4"), 
                    labels = c("T", "F", "P")) 
```

![在此处输入图像描述](../Images/43eeafc68d074b65fa0424659ecd7dba.png).

为了解决订单问题，我使用以下方法对变量“type”使用了因子方法。也请看图。

```
temp$new = factor(temp$type, levels=c("T","F","P"), labels=c("T","F","P")) 
```

![在此处输入图像描述](../Images/89b92491073c01edca26601b6ebad8d4.png)

但是，现在我不知道如何修复变量的顺序`size`。它应该是 50%、100%。150% 和 200%。

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2013-01-10T17:48:50.230

通过以下方式使您的大小成为数据框中的一个因素：

```
temp$size_f = factor(temp$size, levels=c('50%','100%','150%','200%')) 
```

然后更改`facet_grid(.~size)`为`facet_grid(.~size_f)`

然后绘制： ![在此处输入图像描述](../Images/7c2c7d301f8dedd43432c7e60173ad7d.png)

图表现在按正确的顺序排列。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2020-12-22T14:59:07.220

这里有几个很好的解决方案。

类似于 Harpal 的答案，但在方面，因此*不需要对基础数据或预绘图操作进行任何更改*：

```
# Change this code:
facet_grid(.~size) + 
# To this code:
facet_grid(~factor(size, levels=c('50%','100%','150%','200%'))) 
```

这是灵活的，并且可以在您更改分面的元素时对任何变量实施，而无需对数据进行基本更改。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2021-03-11T07:33:19.317

更少的操纵： `facet_grid(~fct_relevel(size,'50%','100%','150%','200%'))`

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-05-03T16:48:50.360

这是一个将事物保存在 dplyr 管道链中的解决方案。您提前对数据进行排序，然后使用 mutate_at 转换为因子。我稍微修改了数据，以展示如何普遍应用此解决方案，给定可以合理排序的数据：

```
# the data
temp <- data.frame(type=rep(c("T", "F", "P"), 4),
                    size=rep(c("50%", "100%", "200%", "150%"), each=3), # cannot sort this
                    size_num = rep(c(.5, 1, 2, 1.5), each=3), # can sort this
                    amount=c(48.4, 48.1, 46.8, 
                             25.9, 26.0, 24.9,
                             20.8, 21.5, 16.5,
                             21.1, 21.4, 20.1))

temp %>% 
  arrange(size_num) %>% # sort
  mutate_at(vars(size), funs(factor(., levels=unique(.)))) %>% # convert to factor

  ggplot() + 
  geom_bar(aes(x = type, y=amount, fill=type), 
           position="dodge", stat="identity") + 
  facet_grid(~ size) 
```

您也可以应用此解决方案在构面内排列条形图，但您只能选择一个首选顺序：

```
 temp %>% 
  arrange(size_num) %>%
  mutate_at(vars(size), funs(factor(., levels=unique(.)))) %>%
  arrange(desc(amount)) %>%
  mutate_at(vars(type), funs(factor(., levels=unique(.)))) %>%
  ggplot() + 
  geom_bar(aes(x = type, y=amount, fill=type), 
           position="dodge", stat="identity") + 
  facet_grid(~ size)

  ggplot() + 
  geom_bar(aes(x = type, y=amount, fill=type), 
           position="dodge", stat="identity") + 
  facet_grid(~ size) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-08-25T18:53:46.867

类似于 glenn_in_boston 的回答，但在关卡中没有硬编码。

```
# Change this code:
facet_grid(.~size) + 
# To this code:
facet_grid(~factor(size, levels=unique(df$size))) 
```

之所以有效，是因为数据框中的大小是从最小到最大排列的。

如果尺寸已经是一个因素并且您只想在绘图时翻转顺序，这是一个选项：

```
# Updating dataframe so size is a factor ordered smallest to largest
df <- data.frame(
  type   = c("T", "F", "P", "T", "F", "P", "T", "F", "P", "T", "F", "P"), 
  size   = factor(c("50%", "50%", "50%", "100%", "100%", "100%", "150%", "150%", "150%", "200%", "200%", "200%"), levels=c("50%", "100%","150%","200%"), ordered = TRUE),
  amount = c(48.4, 48.1, 46.8, 25.9, 26, 24.9, 21.1, 21.4, 20.1, 20.8, 21.5, 16.5)
)

# Now plotting with facets in the reverse order
ggplot(df, aes(type, amount , fill=type, group=type, shape=type, facets=size)) + 
  geom_col(width=0.5, position = position_dodge(width=0.6)) + 
  facet_grid(~factor(size, levels=rev(unique(df$size)))) +  #this part updated
  theme_bw() + 
  scale_fill_manual(values = c("darkblue","steelblue1","steelblue4"), 
                    labels = c("T", "F", "P")) 
```

# javascript - 如何手动制作 MTOM 肥皂消息？

> ID：14262505
> 
> 赞同：1
> 
> 时间：2013-01-10T16:23:31.017
> 
> 标签：javascript, soap, mtom

目前我正在客户端使用 javascript 处理肥皂消息。现在我提出了 MTOM 请求和响应。在服务器端，我可以使用轴将文件转换为二进制 64 格式。我不知道（也找不到方法）如何在 javascript 中做到这一点。

# google-email-settings-api - 有没有办法通过 api 修改用户电子邮件路由？

> ID：14262506
> 
> 赞同：1
> 
> 时间：2013-01-10T16:23:35.843
> 
> 标签：google-email-settings-api

我希望能够通过 API 修改用户级电子邮件路由，但我似乎找不到允许这样做的库。

我错过了什么，或者这是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:32:22.040

目前没有任何方法可以使用 API 设置用户级路由。最接近的方法是[使用电子邮件设置 API 来设置转发](https://developers.google.com/google-apps/email-settings/#manage_forwarding_settings)。这并不完全相同，因为邮件仍会进入用户的 Gmail 帐户，但它可能会满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-12T18:45:51.497

如果这是 OP 的目标，则管理 API 支持[管理路由](https://developers.google.com/admin-sdk/admin-settings#managing_email_routing_settings)

```
<atom:entry xmlns:atom='http://www.w3.org/2005/Atom' xmlns:apps="http://schemas.google.com/apps/2006">
<apps:property name='routeDestination' value='route-smtp.domain.com'/>
<apps:property name='routeRewriteTo' value='true'/>
<apps:property name='routeEnabled' value='true'/>
<apps:property name='bounceNotifications' value='true'/>
<apps:property name='accountHandling' value='can be either allAccounts | provisionedAccounts | unknownAccounts'/>
</atom:entry> 
```

# jquery - Jquery 网络摄像头插件不拍照

> ID：14262507
> 
> 赞同：1
> 
> 时间：2013-01-10T16:23:37.653
> 
> 标签：jquery, html, webcam

我无法拍摄照片，但我可以在网络摄像头上看到自己。我不确定缺少什么。到目前为止，我的进展如下：

**Jsp页面：**

```
 $(document).ready(function(){

        $("#camera").webcam({
                width: 315,
                height: 240,
                mode: "callback",
                swffile: "swf/jscam_canvas_only.swf", 

                onLoad: function () {

                    var cams = webcam.getCameraList();
                    for(var i in cams) {
                        jQuery("#canvas").append("<li>" + cams[i] + "</li>");
                    }
                            jQuery("#canvas").hide();
                },

                onCapture: function () {

                    jQuery("#flash").css("display", "block");
                    jQuery("#flash").fadeOut(100, function () {
                        jQuery("#flash").css("opacity", 1);
                    });
                            jQuery("#canvas").show();
                            webcam.save();
                },

                onSave: function(data) {

                    var col = data.split(";");
                    var img = image;

                    for(var i = 0; i < 320; i++) {
                        var tmp = parseInt(col[i]);
                        img.data[pos + 0] = (tmp >> 16) & 0xff;
                        img.data[pos + 1] = (tmp >> 8) & 0xff;
                        img.data[pos + 2] = tmp & 0xff;
                        img.data[pos + 3] = 0xff;
                        pos+= 4;
                    }

                    if (pos >= 4 * 320 * 240) {
                        ctx.putImageData(img, 0, 0);
                        pos = 0;
                    }
                }

        }); 

});

    <div id="camera"></div><label>Canvas</label>
                        <div><p><canvas id="canvas" height="240" width="320"></canvas></p></div>
                         <a href="javascript:webcam.capture();changeFilter();void(0);">Take a picture instantly</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:04:58.973

尝试这个

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script src="http://www.xarg.org/download/jquery.webcam.min.js" type="text/javascript">      </script>
</head>
<body>

<div id="webcam">
<span><a href="javascript:webcam.capture();void(0);">Take a picture instantly</a>       </span>
</div>

<script type="text/javascript">
jQuery("#webcam").webcam({
width: 320,
height: 240,
mode: "save",
swffile: "/swf/jscam.swf",

onCapture: function () {
webcam.save('/upload.php');
     $('#webcam').hide();
     $('#image').show();
    setInterval(function () {
var d = new Date();
jQuery("#image").attr("src", "/upload/image.jpg?"+d.getTime());
 }, 2000);
}
 });

</script>

<img style="display:none;" id="image" src="/upload/image.jpg?<? echo rand(0,1000); ?>" width="320" border="0" alt="" />

 </body>
 </html> 
```

和php

```
 $str = file_get_contents("php://input");
 file_put_contents("/upload/image.jpg", pack("H*", $str)); 
```

不要忘记在上传文件夹和正确的文件路径上设置正确的权限。

# api - Web CMS vs API vs 框架 - 帮助？！:(

> ID：14262512
> 
> 赞同：1
> 
> 时间：2013-01-10T16:23:50.717
> 
> 标签：api, frameworks, content-management-system

我向我的讲师提出了这个问题，但我也想要各种答案，以便更好地理解我的这个难题。这是省略了名称的原始消息。

* * *

嗨******，

感谢您今天的介绍性讲座，我期待着接下来几周的工作。

然而，我对 CMS、API 和框架这些术语感到相当困惑。互联网也没有提供太多帮助，因为这些术语经常被抛出，而且经常是为了同一件事！

A 在 LAMP Web 开发方面有一点背景，我将提供一个假设场景，希望您能告诉我这些术语的适用范围。

*   我正在使用 LAMP（带有 Apache、MySQL 和 PHP 的 Linux Web 服务器）。

*   我正在开发一个公众可以观看电影的网站（嗯...忽略法律问题，纯粹是假设性的，当然是出于教育目的！）

*   我使用 phpMyAdmin 创建我的 MySQL 数据库，表将涉及“用户”、“类别”、“内容”等。

*   我现在创建一个“管理控制面板 (CP)”，我将其称为后端。授权用户根据他们的访问级别（由他们在“用户”表中的帐户确定）可以添加/编辑/删除各种内容。这些变化反映在我所说的前端。

*   前端是面向公众的网站，公众可以访问该网站观看他们选择的电影。

*   后端（即 Admin CP）控制/调节用户的内容以及几乎所有内容。随着时间的推移，开发人员可以为此添加更多功能以获得更多功能。例如评论。或者，开发人员可以使用 Facebook 评论 API 将其包含到前端的每个“电影”页面中，这样会更容易。

* * *

现在回到手头的主要问题，这是一个网络 CMS 吗？API 在哪里适合？这是一个框架吗？

注意：我没有使用 WordPress 或 Joomla 等任何东西，它都是我自己自定义编码的。使用 PHP 和 HTML5、CSS3，也许还有一点 jQuery，当然还有通过 PHP 与 MySQL 数据库交互的 SQL 语句。

感谢您在我的困惑中提供的帮助。

谢谢，

* * *

编辑：我根据贾斯汀的意见评论了我的想法。如果我在正确的轨道上，请告诉我，干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:42:16.593

谢谢你的帖子。

您所说的三个术语在网络上经常使用，而且它们总是在变化。首先你有一个 CMS，CMS 代表内容管理系统，就像上面你所说的 Wordpress 和 Joomla。那里有人已经创建了软件来创建站点/博客，而不必使用 PHP、MySQL 和 Apache。您只是在前端做任何事情，只是简单地发布您的内容并使其生效。该软件为您完成所有后端工作。

API，简单地说。开源“插件”，允许用户将服务或应用程序集成到他们的站点或应用程序中以供使用。

框架，如 Bootstrap，由 Twitter 创建。Web 框架是在前端开发站点的一种简单方法。它让学习爱好者有机会开发前端，同时学习伟大的概念。

# xml - XML 自描述性

> ID：14262513
> 
> 赞同：-1
> 
> 时间：2013-01-10T16:23:54.117
> 
> 标签：xml, xml-validation

当我们说 XML 是自描述的以及何时将 XML 文档视为描述性时，我们的意思是什么。

我在这里阅读了很多关于 XML 自描述的内容，http://docordie.blogspot.co.uk/2006/08/xml-isnt-self-describing.html[但](http://docordie.blogspot.co.uk/2006/08/xml-isnt-self-describing.html)它仍然令人困惑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:23:45.217

它通常仅用于表示人类读者可以分辨文件中的每个值与什么相关，因为它包含在元素名称中；由于 XML 文件中的其余元素，该值在层次结构中的位置同样明显。

这与例如 CSV 文件相比，对于人类读者来说，每个值与什么相关并不明显（尽管标题行可以帮助解决这个问题），并且如果没有文件的规范和什么是难以阅读的数据代表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T21:59:33.637

参考：[http ://www.cs.washington.edu/education/courses/cse544/04sp/papers/xml-essence.pdf](http://www.cs.washington.edu/education/courses/cse544/04sp/papers/xml-essence.pdf)

• 自我描述 从外部表征中应该能够推导出相应的内部表征。

XML 并不总是自描述的，因为对应于外部 XML 描述的内部格式在很大程度上取决于用于验证的 XML 模式（例如，判断数据是整数还是字符串）。

# java - 将代理与适用于 Java 的 Google HTTP 客户端库一起使用

> ID：14262519
> 
> 赞同：7
> 
> 时间：2013-01-10T16:24:06.313
> 
> 标签：java, http-proxy, google-http-client

我使用适用于 Java 的 Google HTTP 客户端库来发出简单的 JSON 请求并解析响应。当我不通过代理时，它运行良好。但现在我想允许我的用户在我的应用程序中使用代理（带身份验证）功能。我查看了 HttpTransport、HttpRequestFactory 和 HttpRequestInitializer 类，但没有成功。

到目前为止，我只是稍微修改了这些示例（主要是删除了不必要的代码）。那么在代码中的什么位置添加代理设置呢？

```
static final HttpTransport HTTP_TRANSPORT = new NetHttpTransport();
static final JsonFactory JSON_FACTORY = new JacksonFactory();

<T> T get(String url, Class<T> type) throws IOException {
    HttpRequestFactory requestFactory =
            HTTP_TRANSPORT.createRequestFactory(new HttpRequestInitializer() {
                @Override
                public void initialize(HttpRequest request) {

                    request.setParser(new JsonObjectParser(JSON_FACTORY));
                }
            });
    HttpRequest request = requestFactory.buildGetRequest(new GenericUrl(url));
    return request.execute().parseAs(type);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T04:42:45.660

这似乎适用于使用 google-http-client:1.13.1-beta 的经过身份验证的代理

```
Proxy proxy = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(PROXY_HOST, PROXY_PORT));
HttpTransport httpTransport = new NetHttpTransport.Builder().setProxy(proxy).build(); 
```

这还不足以满足您的需求吗？

# sql-server - 使用数据透视生成动态列

> ID：14262520
> 
> 赞同：0
> 
> 时间：2013-01-10T16:24:10.243
> 
> 标签：sql-server

我有以下查询，它总是给出错误。有人可以帮我解决这个问题吗？

> *“关键字'@stqsql'附近的语法不正确”。*

我的代码是：

```
 declare @strsql nvarchar(max)
  set @strsql=select merchantid from employee

  select * 
  from 
  (
     Select s.employeeid,
           COUNT(*) as TotCount 
     from Employee s  
     GROUP BY s.employeeid 
  )as a
  pivot (avg(TotCount) for employeeid IN ('+@stqsql+')) AS NoOfRec 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:30:37.800

不幸的是，您尝试获取动态列的方式不起作用。您将不得不使用类似于以下内容的内容：

```
DECLARE @colsPivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

-- this gets the list of values that you want to pivot
select @colsPivot = STUFF((SELECT distinct ', ' + QUOTENAME(merchantid ) 
                    from employee 
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

-- since you are use a dynamic list you have to use dynamic sql
set @query = 'SELECT ' + @colsPivot + ' from 
             (
                SELECT s.employeeid,
                    COUNT(*) as TotCount
                FROM Employee s
                GROUP BY s.employeeid
            ) src
            pivot 
            (
                avg(TotCount)
                for employeeid  in (' + @colsPivot + ')
            ) p '

execute(@query) 
```

# php - 在 php 扩展中分配内存

> ID：14262531
> 
> 赞同：2
> 
> 时间：2013-01-10T16:24:29.167
> 
> 标签：php, c, pointers, php-extension

我不擅长 C 中的指针）

我的 PHP 扩展中的内存分配有问题。我正在尝试调用一个返回浮点数组的函数。

我用 C 写了一个小测试脚本，它可以工作。

基本上就是，

```
float *fld;
...
ier = c_fstluk(fld, key, &ni, &nj, &nk);
...
// Read the array as a 2d field
for (i=0; i<ni; i++) {
   for (j=0; j<nj; j++) {
      // Values come transposed..
      printf("%15.6E", *(fld+(ni*j)+i));
      if (j<nj-1) printf(", ");
   }
   printf("\n");
 } 
```

（[完整代码](https://github.com/kheaactua/php_fstd/blob/master/ext/fstd/testFstd.c)）

在这里我不需要`malloc`或`free`任何东西。（至少我不这么认为。在这个代码和函数的fortran版本中，我需要先`allocate()`fld。）

然而，在我的 PHP 扩展中，相同的代码返回了一个段错误。

当我在调用之前`emalloc`和`efree`（或只是`malloc`和`free`） fld`c_fstluk`时，它可以工作，但是我得到了大量的内存错误。

```
[Wed Jan  9 15:34:33 2013]  Script:  '/Users/matt/aurams/trunk/web/php/php-src/ext/fstd/fstd.php'
/Users/matt/aurams/trunk/web/php/php-src/Zend/zend_API.c(1295) :  Freeing 0x10D953060 (72 bytes), script=/Users/matt/aurams/trunk/web/php/php-src/ext/fstd/fstd.php
/Users/matt/aurams/trunk/web/php/php-src/Zend/zend_hash.c(412) : Actual location (location was relayed)
Last leak repeated 779 times
[Wed Jan  9 15:34:33 2013]  Script:  '/Users/matt/aurams/trunk/web/php/php-src/ext/fstd/fstd.php'
/Users/matt/aurams/trunk/web/php/php-src/Zend/zend_API.c(1292) :  Freeing 0x10D9531A0 (32 bytes), script=/Users/matt/aurams/trunk/web/php/php-src/ext/fstd/fstd.php
Last leak repeated 779 times
[Wed Jan  9 15:34:33 2013]  Script:  '/Users/matt/aurams/trunk/web/php/php-src/ext/fstd/fstd.php'
ext/fstd/fstd.c(414) :  Freeing 0x10D9538D0 (72 bytes), script=/Users/matt/aurams/trunk/web/php/php-src/ext/fstd/fstd.php
/Users/matt/aurams/trunk/web/php/php-src/Zend/zend_API.c(982) : Actual location (location was relayed)
Last leak repeated 29 times
[Wed Jan  9 15:34:33 2013]  Script:  '/Users/matt/aurams/trunk/web/php/php-src/ext/fstd/fstd.php'
/Users/matt/aurams/trunk/web/php/php-src/Zend/zend_hash.c(450) :  Freeing 0x10D954C08 (256 bytes), script=/Users/matt/aurams/trunk/web/php/php-src/ext/fstd/fstd.php
Last leak repeated 29 times
=== Total 1620 memory leaks detected === 
```

（带[注释的](https://github.com/kheaactua/php_fstd/blob/master/ext/fstd/fstd.c)[完整代码`emalloc`](https://github.com/kheaactua/php_fstd/blob/master/ext/fstd/fstd.c)，第 ~398 行）

我敢打赌我在这里遗漏了一些简单的东西..

总而言之，在独立的 C 程序中，东西可以在没有任何分配的情况下工作。在 PHP 扩展中，当我分配空间时它可以工作，但会引发内存错误，当我不分配空间时，它会出现故障。

帮助？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:12:37.263

根据this [document](http://people.sca.uqam.ca/~caron/divers/RPN_Standard_Files.pdf)，`c_fstluk(buffer, key, &ni, &nj, &nk)`将数据读入*缓冲区*，因此必须分配缓冲区（*fld ）。*

在 C 版本中，如果*fld*未分配，如果通常不应该工作。但是根据您的系统等...或运气，`fld *`指针可能指向一个未写保护的随机空间（有效，但当然，这是非常危险的）。

因此，扩展还必须分配内存（永久或 PHP 请求寿命，仅取决于您的 ext）然后释放它 - 在您的情况下，它是临时分配，必须在离开 *php_function* 之前释放。

我可以在您提供的代码中看到，同时注释掉

*   是否`emalloc`分配
*   然后你强制模块返回`0`，因为你想测试这部分（而不是 PHP vars 创建等......）
*   *然后*你`efree` *fld*
*   因此*fld*没有被释放并造成内存泄漏

所以这可能是一个简单的错误，`efree`应该在函数返回之前移动。

```
fld = emalloc(ni*nj*sizeof(float*)); /* sizeof(float)  INSTEAD? */

// Read the field pointed by the given key
ier = c_fstluk(fld, key, &ni, &nj, &nk);

/* ... */

php_printf("\nDone.\n");

efree(fld);

RETURN_LONG(0); 
```

**根据评论编辑**

*   `(float *)`分配改为`(float)`
*   `ALLOC_INIT_ZVAL(arow)`为所有迭代完成（源底部）

# jsf - PrimeFaces - 自定义日期图表

> ID：14262536
> 
> 赞同：7
> 
> 时间：2013-01-10T16:24:52.510
> 
> 标签：jsf, jakarta-ee, graph, primefaces, jqplot

我正在使用 PrimeFaces 3.4.1 绘制时间表（x 轴上的日期，y 轴上的 int 值）。

目前我有这样的事情：

**html** :

```
<p:lineChart id="timeChart" value="#{myGraphBean.model}" legendPosition="e" title="Time Chart" minY="0" maxY="25" style="height:300px"/> 
```

**爪哇豆**：

```
private final static int MAX_VALUE = 20;
private final static int NUMBER_OF_POINTS = 20;
private final static DateFormat dateFormat = new SimpleDateFormat("dd-MM-yy");

private void createLinearModel() {
    model = new CartesianChartModel();
    Calendar day = Calendar.getInstance();
    day.set(Calendar.HOUR_OF_DAY, 0);
    day.set(Calendar.MINUTE, 0);
    day.set(Calendar.SECOND, 0);
    day.set(Calendar.MILLISECOND, 0);
    LineChartSeries series = new LineChartSeries();
    series.setLabel("My series");
    for (int i = 0; i < NUMBER_OF_POINTS; i++) {
        series.set(dateFormat.format(day.getTime()), getRandomValue());
        day.add(Calendar.DAY_OF_MONTH, 1);
    }
    model.addSeries(series);
}

private int getRandomValue() {
    return rand.nextInt(MAX_VALUE);
} 
```

所以我的 bean 只是为每一天创建一些随机的 int 值。（我的应用程序生成实际数据点，这只是一个虚拟示例）

在我的应用程序中，我在很长一段时间内生成数据，例如 6 个月。以我现在做事的方式，我得到了这样可怕的图表：

![坏图](../Images/b08416a5f60558330b650515c4075da7.png)

**我想做的事：**

我希望能够保留我的数据点，但只显示一个刻度，比如说每个月。

[在其他一些帖子（ ex1](https://stackoverflow.com/questions/12642507/primefaces-jqplot-displaying-dates-on-an-axis,)，[ex2](https://stackoverflow.com/questions/8467233/jqplot-dateaxis-tickinterval-not-working) ）之后，我试图更改 x 轴上的刻度，但我无法让它工作。

使用 primefaces 扩展器，我尝试使用诸如`tickInterval: '1 month'`设置`min`属性之类的东西，但没有任何效果。在大多数情况下，它只会破坏图表

**问题：**

1.  在 jqPlot 文档中，它说“*注意，虽然 jqPlot 将解析大多数人类可读的日期，但尽可能使用 javascript 时间戳是最安全的。此外，最好指定日期和时间，而不仅仅是单独的日期。这是由于浏览器对本地时间与带有裸日期的 UTC 的处理不一致。* ” 在我的图形 bean 中，我是否应该使用 javascript 时间戳之后的格式化日期（字符串）填充系列（“yyyy-MM-dd h:mma” ) 还是直接使用 java.util.Date？

2.  如何更改 x 轴刻度（比如说 1 个月），每个月只有一个标记，但仍然有图表通过所有的天点（即我不想在一个月内平均我的点)?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T22:53:11.760

在 Java 中，`LineChartSeries`使用以毫秒为单位的时间填充对象`Date#getTime()`。

在 facelets 方面，从[jqPlot 站点](http://www.jqplot.com)下载并导入以下 jqPlot 插件：

```
<h:outputScript name="Javascript/jqplot.canvasAxisTickRenderer.js" />
<h:outputScript name="Javascript/jqplot.canvasAxisTickRenderer.min.js" />
<h:outputScript name="Javascript/jqplot.dateAxisRenderer.js" />
<h:outputScript name="Javascript/jqplot.dateAxisRenderer.min.js" /> 
```

并将这个 js 扩展器用于`p:lineChart`组件：

```
function chartExtender() {
    this.cfg.axes = {
        xaxis : {
            renderer : $.jqplot.DateAxisRenderer, 
            rendererOptions : {
                tickRenderer:$.jqplot.CanvasAxisTickRenderer
            },
            tickOptions : { 
                fontSize:'10pt',
                fontFamily:'Tahoma', 
                angle:-40
            }
        },
        yaxis : {
            rendererOptions : {
                tickRenderer:$.jqplot.CanvasAxisTickRenderer
            },
            tickOptions: {
                fontSize:'10pt', 
                fontFamily:'Tahoma', 
                angle:30
            }
        }               
    };
    this.cfg.axes.xaxis.ticks = this.cfg.categories;
} 
```

有用的链接：

[http://forum.primefaces.org/viewtopic.php?f=3&t=25289#p79916](http://forum.primefaces.org/viewtopic.php?f=3&t=25289#p79916)

[http://forum.primefaces.org/viewtopic.php?f=3&t=23891&p=78637#p78637](http://forum.primefaces.org/viewtopic.php?f=3&t=23891&p=78637#p78637)

# c# - foreach vs for：请解释一下汇编代码的区别

> ID：14262537
> 
> 赞同：8
> 
> 时间：2013-01-10T16:24:52.987
> 
> 标签：c#, performance, assembly, x86

我最近一直在测试 for 循环与 C# 中的 foreach 循环的性能，我注意到为了将一个整数数组求和为 long，foreach 循环实际上可能会更快。[这是完整的测试程序](http://pastebin.com/yGJkYpFn)，我使用了 Visual Studio 2012，x86，发布模式，优化。

这是两个循环的汇编代码。前锋：

```
 long sum = 0;
00000000  push        ebp 
00000001  mov         ebp,esp 
00000003  push        edi 
00000004  push        esi 
00000005  push        ebx 
00000006  xor         ebx,ebx 
00000008  xor         edi,edi 
            foreach (var i in collection) {
0000000a  xor         esi,esi 
0000000c  cmp         dword ptr [ecx+4],0 
00000010  jle         00000025 
00000012  mov         eax,dword ptr [ecx+esi*4+8] 
                sum += i;
00000016  mov         edx,eax 
00000018  sar         edx,1Fh 
0000001b  add         ebx,eax 
0000001d  adc         edi,edx 
0000001f  inc         esi 
            foreach (var i in collection) {
00000020  cmp         dword ptr [ecx+4],esi 
00000023  jg          00000012 
            }
            return sum;
00000025  mov         eax,ebx 
00000027  mov         edx,edi 
00000029  pop         ebx 
0000002a  pop         esi 
0000002b  pop         edi 
0000002c  pop         ebp 
0000002d  ret 
```

而对于：

```
 long sum = 0;
00000000  push        ebp 
00000001  mov         ebp,esp 
00000003  push        edi 
00000004  push        esi 
00000005  push        ebx 
00000006  push        eax 
00000007  xor         ebx,ebx 
00000009  xor         edi,edi 
            for (int i = 0; i < collection.Length; ++i) {
0000000b  xor         esi,esi 
0000000d  mov         eax,dword ptr [ecx+4] 
00000010  mov         dword ptr [ebp-10h],eax 
00000013  test        eax,eax 
00000015  jle         0000002A 
                sum += collection[i];
00000017  mov         eax,dword ptr [ecx+esi*4+8] 
0000001b  cdq 
0000001c  add         eax,ebx 
0000001e  adc         edx,edi 
00000020  mov         ebx,eax 
00000022  mov         edi,edx 
            for (int i = 0; i < collection.Length; ++i) {
00000024  inc         esi 
00000025  cmp         dword ptr [ebp-10h],esi 
00000028  jg          00000017 
            }
            return sum;
0000002a  mov         eax,ebx 
0000002c  mov         edx,edi 
0000002e  pop         ecx 
0000002f  pop         ebx 
00000030  pop         esi 
00000031  pop         edi 
00000032  pop         ebp 
00000033  ret 
```

如您所见，主循环是“foreach”的 7 条指令和“for”的 9 条指令。这在我的基准测试中转化为大约 10% 的性能差异。

但是，我不太擅长阅读汇编代码，而且我不明白为什么 for 循环至少不如 foreach 高效。这里发生了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T17:26:31.700

由于数组是如此之大，唯一相关的部分显然是循环内的那个，这个：

```
// for loop
00000017  mov         eax,dword ptr [ecx+esi*4+8] 
0000001b  cdq 
0000001c  add         eax,ebx 
0000001e  adc         edx,edi 
00000020  mov         ebx,eax 
00000022  mov         edi,edx 

// foreach loop
00000012  mov         eax,dword ptr [ecx+esi*4+8] 
00000016  mov         edx,eax 
00000018  sar         edx,1Fh 
0000001b  add         ebx,eax 
0000001d  adc         edi,edx 
```

由于和是一个 long int，它存储在两个不同的寄存器中，即 ebx 包含其最低有效四个字节，而 edi 包含最高有效四个字节。它们的区别在于 collection[i] 如何（隐式）从 int 转换为 long：

```
// for loop
0000001b  cdq 

// foreach loop
00000016  mov         edx,eax 
00000018  sar         edx,1Fh 
```

另一个需要注意的重要事情是 for 循环版本以“相反”的顺序进行求和：

```
long temp = (long) collection[i];   // implicit cast, stored in edx:eax
temp += sum;                        // instead of "simply" sum += temp
sum = temp;                         // sum is stored back into ebx:edi 
```

我无法告诉你为什么编译器更喜欢这种方式而不是 sum += temp （@EricLippert 可能会告诉我们:)）但我怀疑它与可能出现的一些指令依赖性问题有关。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-10T16:50:25.603

好的，这是一个带注释的汇编代码版本，因为您会看到循环中的指令非常接近。

```
 foreach (var i in collection) {
0000000a  xor         esi,esi                       clear index
0000000c  cmp         dword ptr [ecx+4],0           get size of collection
00000010  jle         00000025                      exit if empty
00000012  mov         eax,dword ptr [ecx+esi*4+8]   get item from collection
                sum += i;
00000016  mov         edx,eax                       move to edx:eax
00000018  sar         edx,1Fh                       shift 31 bits to keep sign only
0000001b  add         ebx,eax                       add to sum
0000001d  adc         edi,edx                       add with carry from previous add
0000001f  inc         esi                           increment index
            foreach (var i in collection) {
00000020  cmp         dword ptr [ecx+4],esi         compare size to index
00000023  jg          00000012                      loop if more
            }
            return sum;
00000025  mov         eax,ebx                       result was in ebx
=================================================
            for (int i = 0; i < collection.Length; ++i) {
0000000b  xor         esi,esi                       clear index
0000000d  mov         eax,dword ptr [ecx+4]         get limit on for
00000010  mov         dword ptr [ebp-10h],eax       save limit
00000013  test        eax,eax                       test if limit is empty
00000015  jle         0000002A                      exit loop if empty
                sum += collection[i];
00000017  mov         eax,dword ptr [ecx+esi*4+8]   get item form collection  
0000001b  cdq                                       convert eax to edx:eax
0000001c  add         eax,ebx                       add to sum
0000001e  adc         edx,edi                       add with carry from previous add
00000020  mov         ebx,eax                       put result in edi:ebx
00000022  mov         edi,edx 
            for (int i = 0; i < collection.Length; ++i) {
00000024  inc         esi                           increment index
00000025  cmp         dword ptr [ebp-10h],esi       compare to limit
00000028  jg          00000017                      loop if more
            }
            return sum;
0000002a  mov         eax,ebx                       result was in ebx 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-10T16:32:01.333

根据[C# Language Specification 4.0](http://www.microsoft.com/en-us/download/details.aspx?id=7029)，`foreach`编译器将循环分解为以下内容：

> *foreach 语句*：
> 
> foreach（ *表达式* 中 *的局部变量类型* *标识符* ） *嵌入语句*

 **```
{
    E e = ((C)(x)).GetEnumerator();
    try {
        V v;
        while (e.MoveNext()) {
            v = (V)(T)e.Current;
            embedded-statement
        }
    }
    finally {
        … // Dispose e
    }
} 
```

这是在以下处理之后（再次来自规范）：

> •<strong>如果*表达式*的X 类型是数组类型，则存在从X 到`System.Collections.IEnumerable`接口的隐式引用转换（因为`System.Array`实现了该接口）。集合类型是`System.Collections.IEnumerable`接口，枚举类型是`System.Collections.IEnumerator`接口，元素类型是数组类型X的元素类型。

您没有从编译器中看到相同的汇编代码可能是一个很好的理由。**

# google-app-engine - Appengine LocalResourceFileServlet 未找到以下文件：

> ID：14262542
> 
> 赞同：0
> 
> 时间：2013-01-10T16:25:13.927
> 
> 标签：google-app-engine, servlets, web.xml

我正在使用一些内部工具来上传配置文件。但我收到以下错误：

```
Jan 10, 2013 11:18:58 AM com.google.appengine.tools.development.LocalResourceFileServlet doGet
WARNING: No file found for: /content/xxx.xml 
```

其中 xxx.xml 是我上传的文件。关于这个错误意味着什么的任何提示？`LocalResourceFileServlet`我的 appengine 版本似乎甚至不存在该课程。我的直觉告诉我编辑 web.xml 但我不确定......

任何帮助/提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:58:59.703

GAE 有一个只读文件系统。因此，您不能将文件上传到 appengine，然后通过直接 url 访问它。您只能访问作为项目上传的一部分上传的文件。

但是，您可以将文件上传到 GAE Blobstore，然后通过您自己的处理程序访问 ti - 有关示例，请参阅[Blobstore 文档](https://developers.google.com/appengine/docs/java/blobstore/overview)。

# c# - 根据文本值检查文本框

> ID：14262545
> 
> 赞同：2
> 
> 时间：2013-01-10T16:25:23.143
> 
> 标签：c#, javascript, asp.net

我在asp页面中有以下复选框-

```
<asp:CheckBox ID="CheckBox1" runat="server" 
     Text='<%# Container.DataItem.ToString() %>'/> 
```

我想将`Checked`值设置为`true`或者`false`确定

`Text='<%# Container.DataItem.ToString() %>'`价值。

所以如果 -`'<%# Container.DataItem.ToString() %>'`等于`1`then `Checked="True"`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T16:29:07.680

您可以将此添加到您的复选框

```
Checked='<%# Container.DataItem.ToString().Equals("1") %>' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:30:30.157

`Equals("1")`在`Checked`物业中使用。

```
Checked='<%# Container.DataItem.ToString().Equals("1") %>' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:28:28.597

尝试这样的事情：

```
<asp:CheckBox ID="CheckBox1" 
              runat="server" 
              Text='<%# Container.DataItem.ToString().Equals("1") %>'/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T16:28:51.613

尝试这个：

```
<asp:CheckBox ID="CheckBox1" runat="server" Checked='<%# Container.DataItem.ToString() == "1" %>'/> 
```

# cakephp - 使用 CakePHP 重写一个复杂的查询

> ID：14262552
> 
> 赞同：1
> 
> 时间：2013-01-10T16:25:32.453
> 
> 标签：cakephp, find, models

最初，我很快在 CakePHP 中手动编写了一个相当复杂（就结构而言）的 SQL 查询，但现在我试图重写它以使用 CakePHP 的 find 方法运行。

```
$sql = "SELECT 
    `users`.`username`,
        (SELECT ROUND(SUM(`divisions`.`amount`), 2)
        FROM `purchases` 
        INNER JOIN `divisions` 
        ON `purchases`.`id` = `divisions`.`purchase_id` 
        WHERE `purchases`.`user_id` = `users`.`id` 
        AND `divisions`.`user_id` = `users`.`id`
        AND `purchases`.`group_id` = " . $group_id . " 
    ) AS `owed_to`

    FROM `users` 
    INNER JOIN `memberships` ON `users`.`id` = `memberships`.`user_id` 
    INNER JOIN `groups` ON `memberships`.`group_id` = `groups`.`id`
    WHERE `memberships`.`group_id` =  " . $group_id . "  AND
    `users`.`id` !=  " . $user_id . ";"; 
```

因为 SQL 允许您在整个查询中应用 WHERE 过滤器，所以它变得非常简单。在 Cake 你不能只是去：

```
$results = $this->User->find('all', array(
    'conditions' => array(
        'Membership.group_id =' => $id
    ),... 
```

我试过设置连接：

```
$joins = array(
    array('table'=>'memberships', 
        'alias' => 'Membership',
        'type'=>'inner',
        'conditions'=> array(
        'Membership.user_id = User.id', 'Membership.group_id' => $id)
    ), 
```

这对于单层递归来说可以，但是与成员资格（例如组）相关的模型不受过滤器的影响。

我只能想象我在做完全错误的事情。

基本上我很困惑，任何帮助将不胜感激。

**更多信息**

```
User => HasMany => Purchase, Membership, Division
Membership => BelongsTo => Group, User
Group => HasMany => Membership
Purchase => HasMany => Division
Purchase => BelongsTo => User, Group
Division => BelongsTo => Purchase, User 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:40:25.043

你可以这样写：

```
$results = $this->User->find('all', array(
  'conditions' => array(
    'Membership.group_id' => $id
),... 
```

如果 User 有很多 Membership 并且 Membership 属于 User，并且 $this->User->recursive = 1，那么它应该可以工作

# c++ - COM/ActiveX 和下载地址

> ID：14262553
> 
> 赞同：0
> 
> 时间：2013-01-10T16:25:34.347
> 
> 标签：c++, internet-explorer, plugins, com, activex

我有一个 ActiveX，它向服务器询问 URL 并下载/读取数据并要求新的数据缓冲区直到完成。数据被正确读取，但如果我观察任务管理器，IE 的内存和句柄会上升，而且永远不会下降。进程资源管理器显示句柄是缓存文件。

```
int AXGetUrl(char*     url,
             void*     buffer,   
             int       buffer_size,
             void*     pUnk)
{
char                    buffer2[256];
int                     rc;
HRESULT                 rc2;
ULONG                   buffer_len;
ULONG                   buffer_len2;
IStream*                pStream;
char                    newurl[1024];
ULONG64                 RequestBytes;
CURLCallBack            UCB;

    //Initialize
    rc = 0;
    rc2 = 0;
    memset(newurl,
           0x00,
           sizeof(newurl));
    buffer_len = 0;
    pStream = NULL;
    RequestBytes = 0;
    strcpy(newurl,
           url);

    rc = URLOpenBlockingStream((IUnknown *)pUnk,
                               url,
                               &pStream,
                               0,
                               &UCB);    
    while (rc == 0)
        {
        if  (pStream != NULL)
            {
            rc2 = pStream->Read(buffer,
                                buffer_size,
                                &buffer_len);
            RequestBytes = RequestBytes + buffer_len;

            pStream->Release();        
            pStream = NULL;

            buildnewurl(newurl,
                        RequestBytes);
            rc = URLOpenBlockingStream((IUnknown *)pUnk,
                                       newurl,
                                       &pStream,
                                       0,
                                       &UCB);
            }
        else
            {
            rc = 1;
            }
        }

    return (rc);
} 
```

更新：

```
#include "stdafx.h"
#include "Test.h"

Test::Test()
{
}
Test::~Test()
{
}

HRESULT Test::FinalConstruct()
{
void*       pUnk = NULL;
void*       buffer = NULL;
int         buffer_size = 131072;
ULONG       buffer_len = 0;
HRESULT     rc = 0;
HRESULT     rc2 = 0;
IStream*    pStream = NULL;
int         counter = 0;
char        url[1024];

    rc = QueryInterface(IID_IUnknown, &pUnk);
    buffer = malloc(buffer_size);
    if  (buffer != NULL)
        {
        //Get URL
        sprintf(url,
                "http://search.yahoo.com/search?p=%d",
                counter);
        rc = URLOpenBlockingStream((IUnknown *)pUnk,
                                    url,
                                    &pStream,
                                    0,
                                    NULL);    
        while (rc == 0)
            {
            if  (pStream != NULL)
                {
                rc2 = pStream->Read(buffer,
                                    buffer_size,
                                    &buffer_len);
                pStream->Release();        
                pStream = NULL;

                counter++;
                if (counter == 15)
                    {
                    break;
                    }
                sprintf(url,
                        "http://search.yahoo.com/search?p=%d",
                        counter);
                rc = URLOpenBlockingStream((IUnknown *)pUnk,
                                           url,
                                           &pStream,
                                           0,
                                           NULL);
                }
            else
                {
                rc = 1;
                }
            }
        free(buffer);
        }

    return (S_OK);
}

void Test::FinalRelease()
{
    return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T20:22:48.130

您正在调用“URLOpenBlockingStream”以检索流对象，但它返回的流永远不会被删除。假设这`IStream`是一个 COM 对象，您需要在`Release()`完成后调用`pStream`...

```
rc = URLOpenBlockingStream((IUnknown *)pUnk,
                           url,
                           &pStream,
                           0,
                           &UCB);
while (rc == 0)
{
    // ... your code here...
}

if(pStream != NULL)
{
    pStream->Release();
} 
```

# php - 从列表中选择/查看一行

> ID：14262555
> 
> 赞同：1
> 
> 时间：2013-01-10T16:25:36.077
> 
> 标签：php, jquery, mysql

我是 php 和 sql 的安静基本用户，想做一个购物车系统，我需要你对这个脚本的帮助。

结果是表格中的所有列表都从页面显示，我希望有一个弹出页面，如果您单击其中一个产品，它将从弹出窗口中显示

如果您注意到我添加了一个锚标记，因为这是指向弹出页面的链接，弹出信息仍在一个页面下：

`

```
    <table width="800px" border="0" cellpadding="0" cellspacing="7"> 

    <? $result=mysql_query("选择 * 来自阿根廷"); 

    while($row=mysql_fetch_array($result)){ ?> 

    <tr> 

    <td align="center" valign="top"><img src="../user/<?=$row["picture"] ?>" height="130" /></td> 

    <td align="right" valign="top" bgcolor="#E0E0E0"> 

    <table width="100%" border="0" cellspacing="0 " cellpadding="15"> 

    <tr> 

    <td width="78%" valign="top"><a class="inline" href="#inline_content">

    <a href="../../contactus.php"> <input type="button" class="button-order" value="Order Now" href="contactus.php" /></a> 

    / /windpoppup 

    <div style="display:none"> 

    <div id="inline_content" style="padding:10px;background:#fff;"> 

    <p>//请在此处提供代码

    </div> 

    </p> 

    </div></div>

<p>&lt;/td&gt; &lt;/tr&gt;<br>
&lt;/table&gt;<br>
&lt;/td&gt;&lt;/tr&gt;<br>
&lt;tr&gt;&lt;td colspan=&quot;0&quot;&gt;&lt;/td&gt;&lt;? } ?&gt;<br>
&lt;/table&gt;</p>
</pre> 
```

`

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T14:33:05.930

我建议你看看 Codeigniter 的 Cart Class 已经写得很好了。没有太多需要不断重新发明轮子，但如果你愿意，你可以通过阅读它们的核心来做到这一点:)

[购物车类（显然，你可以用它来做购物车，如果你做一些研究，有很多教程可用](http://ellislab.com/codeigniter/user-guide/libraries/cart.html)

# javascript - 比较选择框的值

> ID：14262556
> 
> 赞同：-2
> 
> 时间：2013-01-10T16:25:37.480
> 
> 标签：javascript

我在表单上有 5 个选择框。第一个的值从 0 到 8。其他四个的值从 0 到 2。我希望能够使用 javascript 函数将最后四个的总值与第一个的值进行比较。因此，例如，如果我在第一个选择框中选择 6，那么在任何可能的组合中，最后四个选择框的总数也应该是 6（例如 2 + 2 + 2 + 0 或 2 + 1 + 1 + 2 ， ETC）。任何人都可以帮忙吗？非常感谢！马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:24:30.537

```
var box_1 = document.getElementById("box_1").value; 
```

将为您提供输入的值（作为字符串）

```
<form>
    <input type="select" id="box_1"/>
</form> 
```

就像`$("#box_1").val();`你使用 jquery一样

然后`var box_1_number = new Number(box_1);`将其从字符串转换为实际数字，您可以将其与其他数字进行比较。

例如。`if(box_1_number == box_2_number + box_3_number + ...) { //do some stuff }`

但我敢肯定，还有很多其他方法。

# python - 空格去除并在python中重新保存.txt

> ID：14262557
> 
> 赞同：0
> 
> 时间：2013-01-10T16:25:38.930
> 
> 标签：python, text-parsing, removing-whitespace

我正在构建一个包含大约 30,000 个文本文件的数据集，用于构建内容分析数据集。我正在尝试使用正则表达式循环批量文件，以提取并删除我需要的数据。

问题：第一个文件看起来不错，但是当我尝试覆盖文件时，每个后续文件都会打印每个前一个文件的字符串。如：

文件 1：文件 1 中的文本 文件 2：文件 2 中的文本 + 文件 1 中的文本 文件 n：文件 n 中的文本 + 文件 1-(n-1) 中的文本 代码如下所示：

```
import sys
import re
import glob

string = ''

for n in glob.glob("*.txt"):
    input = open(n, "r")
    s = input.read()
    for line in s:
        string += line.replace("\n"," ")
    input.close()

    for n in glob.glob("*.txt"):
        input2 = open(n, "w")
        input2.write(string)
        input2.close 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:29:52.510

问题在于您对变量的初始化`string`

由于它在 for 循环之外，它会附加上一个文件的内容

每次处理新文件时都需要初始化这个变量的内容

所以只需将初始化移动到循环内

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:48:11.230

[*input*是一个关键字](http://docs.python.org/2/library/functions.html#input)，将其更改为 input1 并删除第二个内部循环。每次在循环开始时也重置字符串。

```
import sys
import re
import glob

for n in glob.glob("*.txt"):
    string = ''
    input1 = open(n, "r")
    s = input1.read()
    for line in s:
        string += line.replace("\n"," ")        
    input1.close()

    input2 = open(n, "w")
    input2.write(string)
    input2.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:34:16.383

您的`string`变量未设置回`string=''`. 所以当你做你的时候，`string += ....`你是在附加内容，因此有你的问题。

在你的 for 循环末尾追加： `string = ''`

您`input2.close()`需要有括号来执行此功能以关闭文档。

# magento - Magento 1.7“无效的运输方式”

> ID：14262561
> 
> 赞同：1
> 
> 时间：2013-01-10T16:25:45.300
> 
> 标签：magento, web, e-commerce, magento-1.7

我希望这里有人以前遇到过这个错误。我不能再具体了，因为我不知道究竟是哪一段代码导致了这个错误。

在[http://www.gomediadev.co.uk/mycheapsupermarket/](http://www.gomediadev.co.uk/mycheapsupermarket/) - 尝试使用任何送货方式（当前设置为免费送货）结账时，您会收到错误“送货方式无效”。我什至对“无效的运输方法”一词进行了全局“查找”，并注释掉了所有实例，但错误仍然存​​在。我现在有点像一堵砖墙，希望有人能对此有所了解。

提前谢谢了。

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:23:07.363

这里的问题是，有 2 个模板，都包含一个具有相同 id 的表单。因此，在提交运输方式表单时，magento 采用了具有相同 id 的另一个表单的值。

# javascript - jQuery 从我的 web 文件夹中的文本文件中读取并附加到 div

> ID：14262579
> 
> 赞同：2
> 
> 时间：2013-01-10T16:27:09.633
> 
> 标签：javascript, jquery, html, ajax

我正在尝试从服务器上的文本文件中读取值（“img1.jpg”等）并附加到 div 以创建幻灯片放映。

唯一的问题是我需要第一个“幻灯片”来应用**.active**类。

这是我的文本文件的读取方式：

![在此处输入图像描述](../Images/63c313566b3f3e8cc89c27e02343bb53.png)

这是我要附加到的 div，如下所示：

```
 <div class="carousel-inner">
   <!-- slide -->
     <div class="active item slide3 animated fadeInUpBig">
        <img src="img1.jpg" />
     </div>
   <!-- slide -->
     <div class="item slide3 animated fadeInUpBig">
        <img src="img2.jpg" />
     </div>                           
 </div> 
```

这是我尝试过的：

```
$(function () {
var file = "gallery.txt"; // gallery.txt PATH

$('<div />'.load(file, function(data){ // dummy DIV to hold data 
    var line      = data.split('\n');
    var NofImages = line.length -1;        
    for( i=0; i < NofImages; i++ ){
        image = './cms/data/img/gallery/homepage/'+ line[i].split('|')[2];
        $(".carousel-inner").append("<div class='active item slide3 animated fadeInUpBig'><img src='+ image +' /></div>");
    }   
}

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:43:28.297

```
$(function () {
    var file = "gallery.txt"; // gallery.txt PATH

    $('<div />').load(file, function(data){ // dummy DIV to hold data 
        var line      = data.split('\n'),
            NofImages = line.length -1,
            imageURL  = '';
        for( i=0; i < NofImages; i++ ){
            imageURL = './cms/data/img/gallery/homepage/'+ line[i].split('|')[2];
            $(".carousel-inner").append("<div class='item slide3 animated fadeInUpBig'><img src='"+ imageURL +"' /></div>");
        } 
        // NOW ADD THE .active TO FIRST ONE
        $('.carousel-inner').find('.item').eq(0).addClass('active');
    });
}); 
```

[$.ajax() 与 $.get() 和 $.load() 之间的区别](https://stackoverflow.com/questions/3870086/difference-between-ajax-and-get-and-load)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:34:42.080

因此，如果您为零，请添加一个课程

```
var activeClass = i==0 ? "active " : "";
$(".carousel-inner").append("<div class='" + activeClass + "item... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T16:41:37.920

试试这个：

```
$.get("gallery.txt").done(function(response) {
    var lines = response.split("\n");
    for (var i = 0; i < lines.length; i++) {
        var fragments = lines[i].split("|");
        var html = "<div class='item animated fadeInUpBig slide3'><img src='" + fragments[2] + "' /></div>";
        $(".carousel-inner").append(html);
    }

    $(".carousel-inner .item").eq(0).addClass("active");
}); 
```

# php - strtolower 和 wordpress php 的类似功能

> ID：14262581
> 
> 赞同：0
> 
> 时间：2013-01-10T16:27:13.220
> 
> 标签：php, wordpress, function, echo, str-replace

嗨，我想弄清楚如何使用 strlower 函数和 strtolower + str_replace 函数，代码如下 -`<?php echo get_the_author_meta('custom_field_35', $user->ID); ?>`

这是我到目前为止所拥有的，但它不起作用 -

```
 <?php
$str = "echo get_the_author_meta('custom_field_35', $user->ID);";
$str = strtolower($str);
echo $str; // Prints mary had a little lamb and she loved it so
?>

<?php $get_the_author_meta('custom_field_36', $user->ID) = strtolower(str_replace(",", "",$get_the_author_meta('custom_field_35', $user->ID))); ?> 
```

如何将 strtolower 和 str_replace 与 get_the_author_meta 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:40:26.030

你在底部的 strtolower 和 str_replace 看起来不错，但你不能分配给这个： `$get_the_author_meta('custom_field_36', $user->ID)`

你最好只拥有：

`<?php echo strtolower(str_replace(",", "",$get_the_author_meta('custom_field_35', $user->ID))); ?>`

或将其放入变量中并回显：

`<?php $var = strtolower(str_replace(",", "",$get_the_author_meta('custom_field_35', $user->ID)));`

`echo $var; ?>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:49:30.990

好的，看起来我不需要回去学习基本的 PHP 语法规则，我自己就能弄清楚。

万一其他人想知道我是怎么做到的——

```
<?php
      $f_states = get_the_author_meta( 'custom_field_35', $user->ID, true );
$f_pr = get_the_author_meta( 'custom_field_36', $user->ID, true );
?>
<?php Print(strtolower(str_replace(",", "",$f_pr))); ?> <?php Print(strtolower($f_states)); ?> 
```

# ruby-on-rails - 如何在 Rails 中跟踪用户活动？

> ID：14262585
> 
> 赞同：4
> 
> 时间：2013-01-10T16:27:29.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在 Rails 中是否有一个 gem 可以帮助跟踪用户活动？

跟踪/记录用户活动的最明显方法是将所有 HTTP 请求和参数连同用户名一起保存到数据库中。有宝石吗？

编辑：我想跟踪以下内容：1）约翰史密斯点击书籍页面上的“搜索”按钮 2）亚当史密斯查看了“国富论”等书。

跟踪哪些用户执行了哪些操作是必不可少的，因此像谷歌分析这样的东西并不真正符合要求。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:56:35.167

您可能会从使用[Analytical gem中获得所需的东西](http://rubygems.org/gems/analytical)

Analytical 支持多种服务，包括 Kissmetrics 和 clicky，其中之一应该非常适合您尝试收集的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:47:34.463

如果没有限制，您应该使用[http://www.google.com/analytics/](http://www.google.com/analytics/)之类的东西，它非常有价值，您可以与它进行交互以根据您的需要对其进行自定义。

# google-chrome-extension - Flash 页面上的键绑定

> ID：14262588
> 
> 赞同：0
> 
> 时间：2013-01-10T16:27:40.663
> 
> 标签：google-chrome-extension, keyboard-shortcuts

我想知道以下是否可行 - 我无法在网上找到有关我的问题的信息。我正在考虑创建一个谷歌浏览器扩展来处理网页，直到我意识到这个页面实际上是用 Flash 构建的。最初我想为网页上的输入绑定一个 onClick 事件以显示表单（这将通过我正在构建的扩展程序）。

但是，由于该页面是在 Flash 中构建的，我不再相信这将是一种可能性。所以，我的下一个想法是将表单的加载绑定到特定的键组合（ctrl + d），例如，用户会点击。

例如：

用户正在使用我的扩展程序在后台运行的 Flash 表单。用户专注于输入（假设是文本框）并继续单击键（Ctrl + D）。单击这些键后，我的扩展程序会弹出一个 Web 表单。用户在表单中输入他想要的内容，然后单击“保存” - 我的网络表单上的提交按钮。当用户单击“保存”时，来自网络表单的数据将存储在剪贴板中并且表单关闭。最后，用剪贴板中的数据填充焦点输入。

两个问题：

1.  谷歌浏览器扩展支持这样的键绑定吗？
2.  我是否能够从生成的表单中复制输入（通过扩展）并将其粘贴回 Flash 页面的输入字段中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:01:10.223

### 1\. 谷歌浏览器扩展支持这样的键绑定吗？

是的，您可以使用[chrome.commands API](https://developer.chrome.com/extensions/commands.html)指定适合平台的自定义键盘快捷键。

您可以通过定义一个键直接触发`browser action\page action`弹出页面或执行任何自定义功能。

## 清单示例代码

```
{
    "sample": {
        "suggested_key": {
            "default": "Ctrl+Shift+S",
            "windows": "Ctrl+Shift+P"
        },
        "description": "Thisismycustomkeyforchromeextension"
    },
    "_execute_browser_action": {
        "suggested_key": {
            "windows": "Ctrl+Shift+Y",
            "mac": "Command+Shift+Y",
            "chromeos": "Ctrl+Shift+U",
            "linux": "Ctrl+Shift+J"
        }
    }
} 
```

但是，`maximum of 4 keys`到目前为止都支持！有关更多信息，请参阅[此答案](https://stackoverflow.com/questions/14000217/google-chrome-maximum-of-4-chrome-commands-allowed/14000881#14000881)

### 2\. 我能否从我生成的表单中复制输入（通过扩展程序）并将其粘贴回 Flash 页面的输入字段中？

是的，结合[内容脚本](https://developer.chrome.com/extensions/content_scripts.html)和[消息传递](https://developer.chrome.com/extensions/messaging.html)是可能的。

# 参考

*   [内容脚本](https://developer.chrome.com/extensions/content_scripts.html)
*   [背景页面](https://developer.chrome.com/extensions/background_pages.html)
*   [消息传递](https://developer.chrome.com/extensions/messaging.html)
*   [命令 API](https://developer.chrome.com/extensions/commands.html)

# visual-studio-2012 - 无法在 SQL Server Express 2012 和 Visual Studio 2012 Professional 之间建立连接

> ID：14262590
> 
> 赞同：0
> 
> 时间：2013-01-10T16:27:42.283
> 
> 标签：visual-studio-2012, sql-server-2012-express

这是我到目前为止所做的......

我已经将 SQL Server 2012 Express 下载到我的机器上——

成功恢复了我想通过 VisualStudio 2012 Pro 访问的数据库

在 VS2012Pro 中，我在服务器资源管理器中单击了添加连接，在这里我选择了 Microsoft SQL Server (SqlClient)。

为了登录服务器，我检查了“使用 Windows 身份验证”（在 SQL Server 属性中，我启用了使用 Windows 身份验证和使用 SQL Server 身份验证）。

然后我选择我要连接的数据库，当我测试连接或单击确定按钮时，我得到这个提示---

“建立与 SQL Server 的连接时发生网络相关或特定于实例的错误。找不到服务器或无法访问该服务器。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接（提供程序：命名管道提供程序，错误：40，- 无法打开与 SQL Server 的连接）。

在 SQL Server 中，我的机器被列为注册服务器，例如 theMachine\sqlexpress。

你能想到什么解决方案来规避这个问题，因为我在查看 Stack 和谷歌搜索解决方案后处于停顿状态？我通过执行 Start --> Run --> Services.msc 检查 SQLServer 是否正在运行，并且它正在运行。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-12-03T11:13:27.273

您需要启动 SQL Server 和浏览器才能连接。

转到 SQL Server 配置管理器 -> 选择 SQL Server 服务 -> 右键单击​​ SQL Server -> 选择属性 -> 选择服务选项卡 -> 选择自动作为启动模式，然后启动服务器。之后，右键单击 Sql Server 浏览器并选择开始。

# asp.net-mvc - MVC AsyncController 阻塞

> ID：14262591
> 
> 赞同：1
> 
> 时间：2013-01-10T16:27:44.713
> 
> 标签：asp.net-mvc, async-await

所以我一直在关注 Steven Sanderson关于 SignalR 和 ASP.NET Async的[TechDays Talk 。](http://channel9.msdn.com/Events/TechDays/Techdays-2012-the-Netherlands/2287)我遇到了以下操作的问题

```
public class SomeController : AsyncController
{
    static TaskCompletionSource<String> _nextMessage
        = new TaskCompletionSource<string>();

    [HttpPost]
    public ActionResult PostMessage(string message)
    {            
        _nextMessage = new TaskCompletionSource<string>();
        oldNextMessage.SetResult(message);
        return Content("success");
    }

    public async void GetMessages()
    {
        Response.ContentType = "text/event-stream";
        while (true)
        {
            var message = await _nextMessage.Task;
            Response.Write("data: " + message + "\n\n");
            Response.Flush();
        }

    }
} 
```

GetMessages 在第一次调用时似乎被阻塞了，但是一旦超时，它就会按预期开始工作。

所以我加载了我的 javascript，它发布并运行 GetMessages。在第一次调用 GetMessages 时，它挂起（如预期的那样）

```
await _nextMessage.Task; 
```

但它不会让我从任何地方（包括浏览器的其他实例）调用 PostMessage 这是在我的开发机器上，所以它可能是一个线程问题，但我认为这样做的全部目的是允许线程从事多项工作。除了第一次超时后，它开始按预期工作，我可以在其中发布并立即获得响应。但是如果我刷新页面，我会遇到同样的问题。有想法该怎么解决这个吗？顺便说一句，我正在使用 Eventsource，但是当我进行长轮询时会出现同样的问题，例如

```
 public async Task<string> GetNextMessage()
    {

        return await _nextMessage.Task;
    } 
```

使用调用 GetNextMessage() 的 javascript 循环函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T16:11:55.173

这是我最终使用的

```
[SessionState(SessionStateBehavior.Disabled)]
public class SomeController : AsyncController
{
    static TaskCompletionSource<String> _nextMessage = 
        new TaskCompletionSource<string>();

    public void PostMessage(string message)
    {
        var CreationJObj = FormUtils.AsciiToJObject(Request.Form[0]);
        var CreationObj = FormUtils.FromJObject<MessageDisplayVO>(CreationJObj);
        Parallel.Invoke(() => { _nextMessage.SetResult(CreationObj.Message); });
        _nextMessage = new TaskCompletionSource<string>();

    }

    public async void GetMessages()
    {
        Response.ContentType = "text/event-stream";
        var oldMessage = _nextMessage;
        var message = await oldMessage.Task;
        Response.Write("data: " + message + "\n\n");
        Response.Flush();
    }
} 
```

# jquery - 当助手设置为“克隆”时，我无法通过将列表项放在适当的选项卡上来移动元素

> ID：14262595
> 
> 赞同：1
> 
> 时间：2013-01-10T16:27:53.673
> 
> 标签：jquery, jquery-ui-tabs, jquery-ui-draggable

我想通过将列表项放在适当的选项卡上来移动元素。我使用 Simon Battersby 的解决方案，在列表中添加一个风格化的滚动条： [Vertical Scrollbar Plugin using jQueryUI Slider](http://www.simonbattersby.com/blog/vertical-scrollbar-plugin-using-jquery-ui-slider/)。我使用以下解决方案来解决当您在屏幕上拖动时列表项是否可见： [jQuery Draggable and overflow issue](https://stackoverflow.com/questions/811037/jquery-draggable-and-overflow-issue)。

我的示例是[http://jsfiddle.net/XmahV/](http://jsfiddle.net/XmahV/)

当可排序选项中的 helper="original" 时，以下代码有效：

```
drop: function( event, ui ) {
   var $tabItem = $( this );
   var $list = $( $tabItem.find( "a" ).attr( "href" ) ).find( ".sortable" );

   **ui.draggable.hide( "slow", function() {
   $(this).appendTo($list).show();//it does not work in my case
   });**              

} 
```

但在我的情况下 helper="clone":

```
$( ".sortable" ).sortable({
                    connectWith: ".sortable",
                    //Need to drag across the entire window. Overflow issue.
                    appendTo: "body",  
                    containment: "window",
                    scroll: false,
                    helper: "clone"
                    //End Overflow issue.
        }); 
```

降低标签标题时，有人可以帮我移动列表项吗？或者有人可以告诉我，当您将项目转移到选项卡的标题时，如何从列表中删除项目？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:46:21.617

事实上，在使用“克隆”选项的情况下，原始元素会被隐藏。因此，您不能重新隐藏已经隐藏的元素......这就是它不起作用的原因。我刚刚在您的代码之前显示了原始元素：http: [//jsfiddle.net/XmahV/4/](http://jsfiddle.net/XmahV/4/)

```
var $tab_items = $("ul:first li", $tabs).droppable({
  accept: ".sortable .dragItem",
  hoverClass: "ui-state-hover",
  start: function (event, ui) {},
  stop: function (event, ui) {},
  receive: function (event, ui) {},

  drop: function (event, ui) {
    var $tabItem = $(this);
    var $list = $($tabItem.find("a").attr("href")).find(".sortable");

    //In case of clone helper, you must force to display the original element before hide it
    ui.draggable.show();
    ui.draggable.hide("slow", function () {
      $(this).appendTo($list).show();
    });

  } 
```

# web-services - 如何将基本身份验证（抢先）添加到使用 Web 平台工具（Eclipse 中的 WTP0）生成的 Web 服务客户端

> ID：14262598
> 
> 赞同：0
> 
> 时间：2013-01-10T16:28:05.710
> 
> 标签：web-services

我有一个想要使用的 Web 服务，它需要用户名和密码。它不会提示您输入 u/p。在 SOAPUI 4.5 中，很容易转到 Web 服务的 Auth 选项卡，选择 auth type: premeptive，添加用户名和密码并运行服务。我已经使用 Eclipse WTP 为该服务生成了一个 Web 服务客户端，但我无法弄清楚要添加哪些代码以及在何处提供在 Soapui 中工作的相同 u/p。我是相当新的所以请具体说明（代码是否进入 servicebindingstub、serviceporttype、serviceporttypeproxy 以及什么方法？_init 等，包括导入 pls。wtp 客户端工作但返回一个错误代码，说明用户名和密码是如果有办法在描述符中将其外部化，那也很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:25:15.087

通过将用户名和密码行（下面的最后两行）添加到存根文件中每个方法的调用中解决了这个问题。

```
call.setUseSOAPAction(true);
        _call.setSOAPActionURI("urn:webservicesapi#getAllVirtualServerConnStats");
        _call.setEncodingStyle(null);
        _call.setProperty(org.apache.axis.client.Call.SEND_TYPE_ATTR, Boolean.FALSE);
        _call.setProperty(org.apache.axis.AxisEngine.PROP_DOMULTIREFS, Boolean.FALSE);
        _call.setSOAPVersion(or`enter code here`g.apache.axis.soap.SOAPConstants.SOAP11_CONSTANTS);
        _call.setOperationName(new javax.xml.namespace.QName("", "getAllVirtualServerConnStats"));
        _call.setProperty (Call.USERNAME_PROPERTY, "wstest");  //added this
        _call.setProperty (Call.PASSWORD_PROPERTY, "WsTest");  // added this

        setRequestHeaders(_call); 
```

# php - 根据二进制数据查找记录

> ID：14262600
> 
> 赞同：1
> 
> 时间：2013-01-10T16:28:13.023
> 
> 标签：php, mongodb, mongodb-php

我的收藏中有很多记录。它们使用二进制 uuid 进行索引：

```
db.users.find().limit(1);
[{ "_id": ..., "guid": BinData(2,"EAAAANR56IodpE3xhYLtfugc7SY="), otherdata }] 
```

如果我从 CLI 查询，我可以检索记录：

```
db.users.find({ "guid": BinData(2,"EAAAANR56IodpE3xhYLtfugc7SY=") });
[{ "_id": ..., "guid": BinData(2,"EAAAANR56IodpE3xhYLtfugc7SY="), otherdata }] 
```

如果我想从 PHP 做同样的事情，查询不会返回任何内容：

```
$client->db->setProfilingLevel(2);
$res = $client->db->users->find(array('guid' => new MongoBinData($bin_data, 2)));
$res->next();  // perform the query

echo $res->count(); // display 0 
```

当然，我已经测试过`$bin_data`变量保持正确的值。

如果我查看 mongo 的日志，

```
Thu Jan 10 18:05:06 [conn1] query db.users query: { guid: BinData } ntoreturn:0 ntoskip:0 nscanned:0 keyUpdates:0 locks(micros) r:14807 nreturned:0 reslen:20 14ms 
```

值为`scanned`0 ！这意味着它甚至不扫描集合以获取结果？

有什么线索吗？

**编辑**我已将分析级别设置为 2，它确实改变了任何东西。我可以在日志中看到身份验证，但仍然没有查询。

**Edit2**添加了日志行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:45:54.840

我必须承认我自己也很困惑。我跑了：

```
$mongo = new Mongo();
$db = $mongo->mydb;

$col = $db->gjgjgj->insert(
    array( "guid" => new MongoBinData("EAAAANR56IodpE3xhYLtfugc7SY=", 2) )
);
var_dump($col);

$cur = $db->gjgjgj->find(
    array( "guid" => new MongoBinData("EAAAANR56IodpE3xhYLtfugc7SY=", 2) )
);
var_dump(iterator_to_array($cur)); 
```

我的输出是：

```
boolean true

array
  '50ef0bc96803fa0b04000000' => 
    array
      '_id' => 
        object(MongoId)[7]
          public '$id' => string '50ef0bc96803fa0b04000000' (length=24)
      'guid' => 
        object(MongoBinData)[9]
          public 'bin' => string 'EAAAANR56IodpE3xhYLtfugc7SY=' (length=28)
          public 'type' => int 2 
```

你能告诉我们这是什么 PHP 驱动程序版本吗？

您还可以发布可以重现此的整个脚本吗？

### 编辑

当然，在光标上`count()`运行 a 后运行也适用于我。`next()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:32:58.207

Mongo 默认不记录所有查询。只记录慢查询（通常需要超过 100 毫秒）。另请查看有关分析的[文档。](http://docs.mongodb.org/manual/tutorial/manage-the-database-profiler/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T16:37:59.330

您可以使用 php 中的 mongoDB 分析来查看那里发生了什么

[http://php.net/manual/en/mongodb.setprofilinglevel.php](http://php.net/manual/en/mongodb.setprofilinglevel.php)

```
$this->command(array('profile' => 2)) 
```

# php - 如果表中没有结果显示 X，PHP MySQL

> ID：14262601
> 
> 赞同：1
> 
> 时间：2013-01-10T16:28:14.387
> 
> 标签：php, mysql, pdo

我在我的网站上有一个查询，如果没有结果，我想说点别的，而不是有一个空白页......

```
 $sth = $conn->prepare("SELECT * FROM directory WHERE user_active != '' AND County = :county");
    $sth->execute(array(':county' => $county));

    $c = 1;
    while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
        RETURNED DATA GOES HERE
    $c++;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:31:29.033

```
$sth->execute(array(':county' => $county));
if ($sth->rowCount() == 0) {
   echo 'no rows';
} else {
   while(yada yada yada) { ... }
} 
```

相关文档： http: [//php.net/manual/en/pdostatement.rowcount.php](http://php.net/manual/en/pdostatement.rowcount.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:32:15.503

您正在计算 中的结果`$c`，因此您可以通过在代码中附加以下内容来检查具有哪个值：

```
if($c == 1) { // Counter is stuck at 1
    echo "No results were found.";
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-10T16:39:02.407

2 可能的解决方案，执行 SELECT COUNT 执行 fetchall 检查并稍后显示结果

# javascript - 如何在 Web 浏览器之间建立点对点连接

> ID：14262610
> 
> 赞同：0
> 
> 时间：2013-01-10T16:28:45.830
> 
> 标签：javascript, p2p

我可以通过 API 访问我的相机`getusermedia()`。是否可以使用`RTCpeerconnection()`API 建立浏览器到浏览器的连接？哪个浏览器（PC 版）将支持这种 p2p（点对点）连接？我听说 Chrome 会支持这个 p2p，但我不知道如何，如果有人有想法请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:19:14.357

你可以在这里阅读 WebRTC 的草稿：

[http://dev.w3.org/2011/webrtc/editor/webrtc.html](http://dev.w3.org/2011/webrtc/editor/webrtc.html)

您可以在以下网址阅读更多信息：[http ://www.webrtc.org/](http://www.webrtc.org/)

用于基于浏览器的实时通信的 WebRTC 项目由 Google 开源。所以只有 Chorme 实现了它。

要启用 WebRTC，您应该使用以下开关启动 Chrome：“--enable-media-stream”。

-Mozilla 已经实现了 getUserMedia() API，并且 Aurora 每夜构建包含对等连接和数据通道 API 的实现；Firefox 18 中的初步支持。

-Opera 在其稳定分支中实现了 getUserMedia() API。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-11T13:18:22.450

作为替代方案，您可能对[browserver](http://browserver.org/)感兴趣，它允许您在浏览器中运行 http 服务器。

# caching - AppFabric 缓存 - 在本地工作，但不能在另一台机器上工作

> ID：14262613
> 
> 赞同：0
> 
> 时间：2013-01-10T16:29:03.693
> 
> 标签：caching, appfabric, azure-caching

我已使用“grant”Powershell 命令将我的域帐户权限添加到 Windows AppFabric 1.1 缓存。示例应用程序可以在机器本身上本地运行。另外，我可以成功地从另一个机器远程登录到端口 22233（我很确定这不是防火墙问题）。

这可能是IIS权限吗？我没有看到在 IIS 下创建的站点。是否有一个日志我可以检查具体为什么远程调用被拒绝并显示“错误代码：子状态：暂时失败。请稍后重试。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:35:40.590

您授予您的帐户对 AppFaric Cache 的权限，但您确定您的应用程序在此帐户下运行吗？如果这是一个网站，那么这是另一个用户 (ApplicationPoolIdentity)。

尝试授予您的机器（通过在末尾添加 $）或在您授予的用户下运行您的应用程序。

为了确定这是安全问题，您可以尝试在服务器端禁用它，仅用于测试目的。

```
Set-CacheClusterSecurity -SecurityMode None -ProtectionLevel None 
```

[请在此处](http://msdn.microsoft.com/en-us/library/ff921012%28v=azure.10%29.aspx)找到 msdn 。

# jquery - 数据类型：'json' 与数据：$.ajax 中的 JSON.stringify(obj)

> ID：14262620
> 
> 赞同：4
> 
> 时间：2013-01-10T16:29:11.220
> 
> 标签：jquery, ajax, json

我有这个数据结构：

```
var formValues = {
        TemporaryToken: a.userStatus.get("TemporaryToken"),
        MemorableWordPositionAndValues:[
            {
                Position: a.userStatus.get("MemorableWordPositions")[0],
                Value: this.$('[name="login-memorable-character-1"]').val()
            },
            {
                Position: a.userStatus.get("MemorableWordPositions")[1],
                Value: this.$('[name="login-memorable-character-2"]').val()
            },
            {
                Position: a.userStatus.get("MemorableWordPositions")[2],
                Value: this.$('[name="login-memorable-character-3"]').val()
            }
        ]
    } 
```

当我像这样用 $.ajax 发送它时：

```
$.ajax({
        url:url,
        type:'PUT',
        //dataType:"json",
        data: JSON.stringify(formValues),
        success:function (data) {

        }
    }); 
```

它发送请求。但是，如果我这样发送：

```
$.ajax({
        url:url,
        type:'PUT',
        dataType:"json",
        data: formValues,
        success:function (data) {

        }
    }); 
```

我收到 400 错误请求。这是服务器上的问题还是 JSON.stringify 做的事情与仅将 dataType 设置为“json”不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:31:31.263

服务器需要一个 JSON 字符串，而不是表单参数。`JSON.stringify`将您的表单参数对象/数组转换为 JSON 字符串，这正是您的服务器所期望的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T16:44:32.330

它仍然在第二次尝试发送请求；只是您的服务器不理解该请求。这是因为 jQuery`formValues`在发送数据之前会自动将数据处理成查询字符串。请参阅[文档](http://api.jquery.com/jQuery.ajax/)：

> 数据
> 
> 类型：对象、字符串
> 
> 要发送到服务器的数据。如果还不是字符串，则将其转换为查询字符串。它附加到 GET 请求的 url。请参阅 processData 选项以防止此自动处理。对象必须是键/值对。如果 value 是一个数组，jQuery 会根据传统设置的值（如下所述）序列化具有相同键的多个值。

因此，您必须使用`JSON.stringify()`或不使用 JSON。请注意，设置`processData`为 false 将无济于事，因为它只会将字符串发送`[object Object]`到您的服务器。另请参阅[此问题](https://stackoverflow.com/questions/12438741/ajax-jquery-json-post-data-not-reaching-controller?rq=1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-04T15:43:49.067

怎么样`$.param()`？

```
var my_data = {};
my_data.post_name = 'post_value';
$.ajax({
    url:'/post_url.php'
    data:$.param(my_data);
    ...
}); 
```

# reverse-engineering - 如何重写二进制文件或修改其控制流图

> ID：14262623
> 
> 赞同：2
> 
> 时间：2013-01-10T16:29:14.297
> 
> 标签：reverse-engineering, binaryfiles, control-flow

本质上，我想重写一个二进制文件以执行有关其实际任务的其他任务。关于二进制重写，过程似乎如下：

1.  从现有二进制文件创建控制流图
2.  以适当的格式创建具有所需更改的代码片段
3.  从修改后的 CFG 创建一个二进制文件

我遇到了一些工具，它们要么无法在我的 ubuntu 12.04 上编译，要么无法下载，要么我找不到关于如何热补丁/重写二进制文件的像样的教程/howto。这些工具是：

ParseAPI, Code-Surfer/x86, EEL, LEEL, Jakstab, DynInst, Diablo + Lancet

更准确地说，我想分析给定二进制文件的最常用功能，并以在执行这些功能之前执行给定指令集的方式对其进行更改。这些指令包括加载存储的字节数组、读取某个位置的字节并将其与预定义的值进行比较。我想确保二进制文件在每次试验期间都绝对执行这些指令。

我遇到了 2 种替代方法，它们基本上改变了标准 c 函数（如`memcpy()`、`strcpy()`、`printf()`等），因为我假设这些函数很有可能成为二进制文件的一部分：

1.  `LD_PRELOAD`: 定义我自己的库，让它们在普通库之前加载
2.  使用自己的标准函数版本编译二进制文件（给出源代码）`gcc -fno-builtin -o strcpy strcpy.c`

这种方法的缺点是即使我替换了标准的 c 函数，它们也不一定要被调用，因此我的指令也不会被执行。

你们有二进制重写的经验吗，或者你们有完成这个相当奇特任务的线索吗？

此致！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T14:09:28.193

BAP 和 Dyninst 会帮助你。您可以使用 BAP ( [http://bap.ece.cmu.edu/](http://bap.ece.cmu.edu/) ) 来获取二进制文件的控制流图。它有一个非常易于使用的实用程序来从二进制文件创建控制流图。您可以使用 dyninst 来检测二进制文件并执行所需的操作。BAP 绝对可以在 ubuntu12.04 上运行。Dyninst 可能无法在 12.04 上编译（可能存在一些链接问题）。一个简单的操作是您在 10.04 上进行检测并在 12.04 上运行重写的二进制文件。这两种工具都是免费的。

# c# - c# 使用 text.box 上的文本作为搜索键在 C:\Users\John\Desktop 上搜索？

> ID：14262624
> 
> 赞同：-4
> 
> 时间：2013-01-10T16:29:15.090
> 
> 标签：c#, search, textbox

我需要在 C# 中制作一个简单的 Windows 窗体应用程序，当我在文本框中键入内容时，程序将在路径中搜索单词。例如，`C:\Users\John\Desktop`使用文本框中的“文本”作为搜索键。

例子

```
text in textbox = "room" 
```

该程序将在桌面上搜索“房间”。

> 可能的输出：(room202.swf) 任何文件扩展名，只要搜索键在名称上。

我希望我说清楚了..如果您对此有任何疑问，请随时提出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:32:28.620

此代码包含一些可用于搜索目录的基本功能

```
static void Main(string[] args)
{
    string [] fileNames = Directory.GetFiles(@"c:\path");

    foreach(string fn in fileNames)
    {
        if(Path.GetFileName(fn).Contains(textBox1.Text))
        {
            //do something with fn
        }
    }
} 
```

有关更多信息，请阅读[System.IO 命名空间](http://msdn.microsoft.com/en-us/library/system.io%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:36:34.550

```
string[] files = Directory.GetFiles(@"C:\Users\John\Desktop", "*" + textBox1.Text + "*");
foreach(string file in files)
{
    // Output file to user somewhere
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:35:24.643

尝试以下

```
string strToSearch "room";
string path = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
string[] files = Directory.GetFiles(path , "*.*", SearchOption.AllDirectories);

 foreach(string fl in files)
    {
        if(Path.GetFileName(fl).Contains(strToSearch))
        {
            // Do the magic here
        }
    } 
```

1.  这里`Environment.GetFolderPath(Environment.SpecialFolder.Desktop);`将为您提供桌面的路径。
2.  使用它来获取桌面中的所有文件路径`Directory.GetFiles(path ,"*.*", SearchOption.AllDirectories);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T16:43:31.027

下面应该工作。它列举了那条路径。确保有一个名为 txtOutput 的多行文本框和一个名为 txtSearch 的控件。你可以把它放在一个按钮点击或任何地方。

```
 txtOutput.Text = "";

 foreach(string file in Directory.GetFiles("c:\\path"))
    if(Path.GetFileName(file).Contains(txtSearch.Text))
        txtOutput.Text += txtOutput.Text + file + ", "; 
```

# javascript - 避免 HTML5 画布中的颜色混合

> ID：14262625
> 
> 赞同：1
> 
> 时间：2013-01-10T16:29:22.843
> 
> 标签：javascript, html, html5-canvas

我在 html5 画布元素中绘制两个矩形。矩形**a**的边之一在矩形**b**的边上。

矩形**a**为绿色，矩形**b**为蓝色。

结果是公共边缘既不是蓝色也不是绿色：它的颜色是两者的某种混合。

我尝试将 globalCompositeOperation 设置为 source over，但没有帮助。

![在此处输入图像描述](../Images/305e4dc9f502fba8485d09872b6324fd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:30:47.283

这是因为线条是在多个屏幕像素上绘制的。

绘图模型基于浮点坐标，屏幕像素**之间的舍入值。**

为避免这种混合，请始终在坐标处绘制线宽为一个像素的线条`Math.round(x)+0.5`。

这是带有图片[的相关答案。](https://stackoverflow.com/questions/10373695/drawing-lines-in-canvas-but-the-last-ones-are-faded)

这是我为帮助绘制细线和矩形而编写的一些代码：

```
function drawThinHorizontalLine(c, x1, x2, y) {
    c.lineWidth = 1;
    var adaptedY = Math.floor(y)+0.5;
    c.beginPath();
    c.moveTo(x1, adaptedY);
    c.lineTo(x2, adaptedY);
    c.stroke();
}

function drawThinVerticalLine(c, x, y1, y2) {
    c.lineWidth = 1;
    var adaptedX = Math.floor(x)+0.5;
    c.beginPath();
    c.moveTo(adaptedX, y1);
    c.lineTo(adaptedX, y2);
    c.stroke();
}

function Rect(x,y,w,h){
    this.x = x;
    this.y = y;
    this.w = w;
    this.h = h;
}

Rect.prototype.drawThin = function(context) {
    drawThinHorizontalLine(context, this.x, this.x+this.w, this.y);
    drawThinHorizontalLine(context, this.x, this.x+this.w, this.y+this.h);
    drawThinVerticalLine(context, this.x, this.y, this.y+this.h);
    drawThinVerticalLine(context, this.x+this.w, this.y, this.y+this.h);
} 
```

例子 ：

```
context.strokeColor = 'red';
var r = new Rect(20, 23, 433, 14);
r.drawThin(context); 
```

# php - 使用 Git 和 PHP（Cpanel/WHM 服务器）部署站点的问题

> ID：14262627
> 
> 赞同：1
> 
> 时间：2013-01-10T16:29:29.020
> 
> 标签：php, git, deployment, github, cpanel

我们正在尝试使用 Git、GitHub 和 PHP 在 Cpanel/WHM 服务器上自动部署我们的 Web 应用程序。

我已经尝试使用下面文章中的信息在我们的服务器上设置一个部署脚本，当我们推送到存储库时，GitHub 会发布到该脚本。

[https://gist.github.com/1809044](https://gist.github.com/1809044)

不幸的是，似乎 apache 以“nobody”身份运行脚本这一事实正在阻止脚本运行。我们以帐户用户的身份创建了 SSH 密钥，但 git pull 命令未运行。

有什么方法可以在部署钩子上成功地从 GitHub 拉出一个 git repo 并在不安装像 Jenkins 这样复杂的东西的情况下对其进行更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:23:11.827

您可以控制 apache 的运行方式吗？我正在处理一些电子邮件/垃圾邮件问题。我也一直在阅读，如果您运行 suPHP，您的 apache 将以该帐户的用户身份运行。听起来这可能是你需要的。

# solr - 如何在 nutch 2.1 中抓取页面但不获取视频/图像内容？

> ID：14262630
> 
> 赞同：2
> 
> 时间：2013-01-10T16:29:40.980
> 
> 标签：solr, lucene, web-crawler, nutch

我想抓取一个页面，我只需要获取 HTML 本身，避免所有图像/视频等......可以这样做吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T03:57:01.250

检查 regex-urlfilter.txt 文件。

您可以包含您不想索引的文件扩展名的扩展名。例如

```
# skip image and other suffixes we can't yet parse
# for a more extensive coverage use the urlfilter-suffix plugin
-\.(gif|GIF|jpg|JPG|png|PNG|ico|ICO|css|CSS|sit|SIT|eps|EPS|wmf|WMF|zip|ZIP|ppt|PPT|mpg|MPG|xls|XLS|gz|GZ|rpm|RPM|tgz|TGZ|mov|MOV|exe|EXE|jpeg|JPEG|bmp|BMP|js|JS)$ 
```

# r - 重塑凌乱的数据框

> ID：14262637
> 
> 赞同：2
> 
> 时间：2013-01-10T16:30:09.393
> 
> 标签：r, reshape

*根据评论进行编辑

我有一个数据集，我正在尝试为分析做准备：

```
raw<-data.frame(
  name=c("Place 1", "Place 2", "Place 3", "Place 4"),
  x.1.Jan.12=c(1, NA, 0.5, NA),
  Jan.time=c("0900", NA, "0930", NA),
  x.15.Jan.12=c(NA, 0.7, NA, NA),
  Jan.time=c(NA, "1030", NA, NA),
  x.3.Feb.12=c(0.8, 0.6, 0.4, NA),
  Feb.time=c("0715", "0800", "0830", NA),
  x.8.Feb.12=c(NA, NA, 0.65, 0.33),
  Feb.time=c(NA, NA, "?", "1123")
  ) 
```

数据应该非常简单：带有结果的位置、结果的日期和收集时间。如您所见，日期已用于命名包含结果的变量。每个“时间”变量都与它之前的列相关 - 第一个“Jan.time”变量是“x.1.Jan.12”中结果的时间

我想将数据重组为四个变量- `name`、`date`和。我很确定 reshape2 可以做到，并且已经将数据融化：`time``value`

```
mDat<-melt(raw, id=c("name")) 
```

无法完成接下来的步骤 - 可能与奇怪的变量名有关。

我想要的结果是这样的：

```
outData<-data.frame(
  name=c("Place 1", "Place 2", "Place 3", "Place 4", "Place 1", "Place 2", "Place 3", "Place 4", "Place 1", "Place 2", "Place 3", "Place 4", "Place 1", "Place 2", "Place 3", "Place 4"),
  date=c("1-Jan-12", "1-Jan-12", "1-Jan-12", "1-Jan-12", "15-Jan-12", "15-Jan-12", "15-Jan-12", "15-Jan-12", "3-Feb-12", "3-Feb-12", "3-Feb-12", "3-Feb-12", "8-Feb-12", "8-Feb-12", "8-Feb-12", "8-Feb-12"),
  value=c(1, NA, 0.5, NA, NA, 0.7, NA, NA, 0.8, 0.6, 0.4, NA, NA, NA, 0.65, 0.33),
  time=c("0900", NA, "0930", NA, NA, "1030", NA, NA, "0715", "0800", "0830", NA, NA, NA, "?", "1123")
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T11:17:45.567

一种选择是`melt()`在你的不同子集上使用“reshape2” `data.frame`。可以使用 提取子集`grep()`。

```
library(reshape2)
temp <- cbind(
    setNames(melt(raw[c(1, grep("time", names(raw)))], id.vars="name"), 
             c("name", "mon.time", "time")),
    setNames(melt(raw[grep("time", names(raw), invert = TRUE)], id.vars="name"),
             c("name", "date", "result")))
temp[, c("name", "result", "time", "date")]
#       name result time        date
# 1  Place 1   1.00 0900  x.1.Jan.12
# 2  Place 2     NA <NA>  x.1.Jan.12
# 3  Place 3   0.50 0930  x.1.Jan.12
# 4  Place 4     NA <NA>  x.1.Jan.12
# 5  Place 1     NA <NA> x.15.Jan.12
# 6  Place 2   0.70 1030 x.15.Jan.12
# 7  Place 3     NA <NA> x.15.Jan.12
# 8  Place 4     NA <NA> x.15.Jan.12
# 9  Place 1   0.80 0715  x.3.Feb.12
# 10 Place 2   0.60 0800  x.3.Feb.12
# 11 Place 3   0.40 0830  x.3.Feb.12
# 12 Place 4     NA <NA>  x.3.Feb.12
# 13 Place 1     NA <NA>  x.8.Feb.12
# 14 Place 2     NA <NA>  x.8.Feb.12
# 15 Place 3   0.65    ?  x.8.Feb.12
# 16 Place 4   0.33 1123  x.8.Feb.12 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T09:25:54.720

新的一天通常会有所帮助。我设法制定了一个非重塑解决方案，但它使用了一个可怕的 for 循环：

```
subList<-list()
for(i in seq(2,8,2)){
  temp<-raw[c(1, i, i+1)]
  temp$date<-rep(names(temp)[2], nrow(temp))
  names(temp)<-c("name", "result", "time", "date")
  subList[[i/2]]<-temp
}

solution1<-do.call("rbind", subList) 
```

# dart - 为什么 dart pub 突然尝试在我的 css 文件夹中安装软件包？

> ID：14262638
> 
> 赞同：1
> 
> 时间：2013-01-10T16:30:16.143
> 
> 标签：dart, dart-pub

```
Running pub update ...
Pub update failed, [1] Resolving dependencies...
DirectoryIOException: Directory listing failed, path = <longpath>/web/css/packages (OS Error: No such file or directory, errno = 2) 
```

为什么 pub 会突然尝试在我的 css 文件夹中查找包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T21:40:30.433

简而言之，pub 将符号链接放入子目录中，以确保您可以`package:`在“可部署”目录的任何子目录中的任何 Dart 文件中使用。

因为`web`从某种意义上说是可部署的，您可能会将 Web 中的所有内容都放在 Web 服务器上，所以 pub 希望让 Dart 文件更容易工作。

目前没有约定，因此 pub 采用乐观的方法，因为它无法预测您可能将 Dart 文件放在哪里。

无论如何，你不应该得到一个错误，所以这可能是一个错误。我刚刚在一个全新的示例应用程序上尝试了它`web/css`并`pub install`为`pub update`我工作。

您能否在[http://dartbug.com/new](http://dartbug.com/new)上提交一个错误，其中包含您的操作系统和输出的详细信息`dart --version`？非常感谢！

# sql-server-2008-r2 - 在合并语句中将 Null 与 Null 进行比较

> ID：14262640
> 
> 赞同：4
> 
> 时间：2013-01-10T16:30:20.423
> 
> 标签：sql-server-2008-r2, isnull, merge-statement

在处理数十亿条记录以比较合并语句中的 NULL 时，哪种语句是完美的或更好的。我尝试过使用 SET ANSI_NULLS OFF 但这在合并语句中不起作用。这是我的两种方式

```
ISNULL(SRCColumn,-11111) = ISNULL(DSTColumn, -11111) 
```

或者

```
SRCColumn = DSTColumn OR (SRCColumn  IS NULL AND DSTColumn  IS NULL) 
```

请让我知道是否有更好的方法来处理它。因为我有大约 15 列要比较。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T02:01:02.110

> `SRCColumn = DSTColumn OR (SRCColumn IS NULL AND DSTColumn IS NULL)`

我建议您使用此版本，因为它最准确地表达了您希望 SQL Server 执行的操作。

两个语句在逻辑上是等价的（除非 -11111 是该列的合法值），但是该语句更容易识别，并且两个语句的运行时性能可能只有微不足道的差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-14T14:17:48.583

如果您更关心简洁而不是性能，CHECKSUM() 也是一种选择。它将匹配 NULL -> NULL：

```
MERGE A
USING B
ON A.Key = B.Key
WHEN MATCHED AND CHECKSUM(A.Col1, A.Col2, ... ) <> CHECKSUM(B.Col1, B.Col2, ... )
THEN UPDATE SET Col1 = B.Col1, Col1 = B.Col2, ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-10T01:37:00.733

如何在匹配中使用 NOT 比较：

```
MERGE [TGT]
USING [SRC]
ON [SRC].Key = [TGT]. Key
…

WHEN MATCHED AND
(
NOT ([TGT].[dw_patient_key] = [SRC].[dw_patient_key] OR ([TGT].[dw_patient_key] IS NULL AND [SRC].[dw_patient_key] IS NULL))
OR NOT ([TGT].[dw_patient_key] = [SRC].[dw_patient_key] OR ([TGT].[dw_patient_key] IS NULL AND [SRC].[dw_patient_key] IS NULL))
...
)
THEN UPDATE
... 
```

# sql-server - LinQ查询日期和分组依据

> ID：14262642
> 
> 赞同：0
> 
> 时间：2013-01-10T16:30:26.997
> 
> 标签：sql-server, linq

嘿，我正在尽力获得以下查询：

```
SELECT     Client, Code, COUNT(SessionID) AS Count
FROM       dbo.vw_TrackingAppsCompleteDistinctDate
WHERE      (Date > CONVERT(DATETIME, '2012-12-01 00:00:00', 102) AND Date < CONVERT(DATETIME, '2013-01-01 00:00:00', 102))
GROUP BY   URL, Code, Client
ORDER BY   Client, Code 
```

在 ASP.net 中转换为 LinQ。

到目前为止，我有：

```
Public Shared Function SelectByID(ByVal start_date As String, ByVal end_date As String) As vw_TrackingAppsCompleteDistinctDate
    Dim db As New MasterDataContext()
    Dim query = From r In db.vw_TrackingAppsCompleteDistinctDates Where r.Date > "1/1/2013"
    Group r By r.URL, r.Code, r.Client Into g
    Select g.All
End Function 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:15:01.873

我试图通过分组来创建相应的查询以供练习。我不能 100% 确定这个 linq 会得到你希望的结果，因为我无法测试它。

我`orderby`猜可能会有所不同，因为我不知道 SQL 是在分组之前还是之后对结果进行排序。

```
var result = from record in dbo.vw_TrackingAppsCompleteDistinctDate
             where record.Date.CompareTo( new DateTime( 2012, 12, 1, 0, 0, 0 ) ) > 0
             where record.Date.CompareTo( new DateTime( 2013, 1, 1, 0, 0, 0 ) ) < 0
             group record by new { record.URL, record.Code, record.Client } into grp
             orderby grp.Key.Client, grp.Key.Code
             select new 
             {
                 Client = grp.Key.Client,
                 Code = grp.Key.Code,
                 Count = grp.Select( item => item.SessionID ).Count( )
             }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:37:39.493

使用 SQL 到 LinQ 转换器得到它：

```
Dim query = From
              Vw_TrackingAppsCompleteDistinctDates In db.vw_TrackingAppsCompleteDistinctDates
            Where
              Vw_TrackingAppsCompleteDistinctDates.Date > CDate("2012-12-01 00:00:00") 
            And Vw_TrackingAppsCompleteDistinctDates.Date < CDate("2013-01-01 00:00:00")
            Group Vw_TrackingAppsCompleteDistinctDates By
              Vw_TrackingAppsCompleteDistinctDates.URL,
              Vw_TrackingAppsCompleteDistinctDates.Code,
              Vw_TrackingAppsCompleteDistinctDates.Client
            Into g = Group
            Order By Client, Code
            Select
              Client, Code, Count = CType(g.Count(Function(p) p.SessionID <> Nothing), Int64?) 
```

# c++ - 如何在 GLSL 中使用 RGBA16？

> ID：14262643
> 
> 赞同：0
> 
> 时间：2013-01-10T16:30:26.583
> 
> 标签：c++, opengl, glsl, shader

我正在尝试在 GLSL 中绘制一些深度图之王，为此我至少需要一个 10 位通道。我决定使用 GL_R16 或 GL_RGBA12 - 它们是最接近的，并且 GL_R16 将花费更少的 gpu 内存（因为它会......对吗？）。

```
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA12, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, 0); 
```

问题来了：如何让 GLSL 正确使用它？Sampler2D 将其转换为经典的 8 位 RGBA ......那么钳位呢？在 GLSL 中，每个组件颜色都被标准化为 [0,1] - 16 位是否相同？我只想知道如何使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T19:57:10.773

> Sampler2D 将其转换为经典的 8 位 RGBA...

不，它没有。A`sampler2d`不知道或不关心格式（除非它是整数格式，在这种情况下您会得到未定义的行为）。它将其转换为*float*；而已。

> 夹紧呢？

钳位无关紧要，因为 GL_RGBA16 是无符号*标准化*格式。[0, 65535] 范围内的整数值被转换为 [0, 1]，就像 GL_RGBA8 将 [0, 255] 转换为 [0, 1] 一样。这不是“钳制”；这就是您的格式要求 OpenGL 执行的操作。精度更高的格式只会提供更好的*精度*；他们不提供更大的数字。

如果您想实际获得 16 位整数作为*integers*，那么您需要使用实际存储*integers*的格式。GL_RGBA16UI 存储 16 位无符号整数。当然，这需要 OpneGL 3.x+ 硬件。而且您必须使用`usampler2d`.

# c++ - 内存泄漏了吗？

> ID：14262651
> 
> 赞同：0
> 
> 时间：2013-01-10T16:30:43.953
> 
> 标签：c++

我有将普通指针指向字符串的方法

```
void parseResponseData(char* response); 
```

我称之为如下

```
parseResponseData((char *) response.c_str()); 
```

响应是 std::string 类型。我的假设是它可能不是将 const char* 转换为 char* 的最佳方法，其次在这种情况下我可能会泄漏内存？需要专家意见吗？特别是我正在寻找是否泄漏内存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:32:44.600

你真的不应该那样投。总体而言，避免在 c++ 中进行 c 样式转换，并且删除 const-ness 几乎从来都不是一个好的选择。如果您必须从指针使用中删除 const`const_cast`并且**真的**尽量避免这种情况。

内存不会泄漏，因为字符串仍然拥有它的所有权。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:54:01.223

您的问题没有提供足够的信息来明确回答。

为什么`parseResponseData`需要一个指向其输入字符串的非常量指针？它会修改字符串吗？如果是这样，那么您将无法`std::string`直接使用它。`std::string`不提供任何允许您将其修改为 C 样式字符串的接口。即使您不关心保留这些修改，修改由`std::string::c_str()`.

如果`parseResponseData`不修改字符串，那么您现在拥有的应该可以工作（假设`parseResponseData`不尝试存储指针以供长期使用）。这里没有内存泄漏，因为`std::string`对象保留了返回的缓冲区的所有权`c_str()`以及释放它的责任。然而，它仍然看起来很丑`parseResponseData`：如果它是一个非修改操作，它应该需要一个`const char *`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:32:58.950

一旦`response`超出范围，底层 C 字符串将被释放。调用`parseResponseData()`不会复制 C 字符串，只会复制指针**。**所以没有内存泄漏。

# python - Numpy：从二维数组中获取随机行集

> ID：14262654
> 
> 赞同：202
> 
> 时间：2013-01-10T16:30:47.063
> 
> 标签：python, numpy

我有一个非常大的二维数组，看起来像这样：

```
a=
[[a1, b1, c1],
 [a2, b2, c2],
 ...,
 [an, bn, cn]] 
```

使用 numpy，是否有一种简单的方法可以从初始数组中获取一个新的二维数组，例如 2 个随机行`a`（无需替换）？

例如

```
b=
[[a4,  b4,  c4],
 [a99, b99, c99]] 
```

* * *

## 回答 #1

> 赞同：256
> 
> 时间：2013-01-10T16:35:09.710

```
>>> A = np.random.randint(5, size=(10,3))
>>> A
array([[1, 3, 0],
       [3, 2, 0],
       [0, 2, 1],
       [1, 1, 4],
       [3, 2, 2],
       [0, 1, 0],
       [1, 3, 1],
       [0, 4, 1],
       [2, 4, 2],
       [3, 3, 1]])
>>> idx = np.random.randint(10, size=2)
>>> idx
array([7, 6])
>>> A[idx,:]
array([[0, 4, 1],
       [1, 3, 1]]) 
```

将其放在一起用于一般情况：

```
A[np.random.randint(A.shape[0], size=2), :] 
```

对于非替换（numpy 1.7.0+）：

```
A[np.random.choice(A.shape[0], 2, replace=False), :] 
```

我不相信在 1.7 之前有一种无需替换即可生成随机列表的好方法。也许您可以设置一个小的定义，以确保两个值不相同。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2015-01-07T08:37:04.587

这是一个旧帖子，但这是最适合我的：

```
A[np.random.choice(A.shape[0], num_rows_2_sample, replace=False)] 
```

将 replace=False 更改为 True 以获得相同的结果，但需要替换。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2015-08-03T18:58:14.287

如果您只想按某个因素对数据进行下采样，另一种选择是创建一个随机掩码。假设我想将原始数据集下采样到 25%，该数据集当前保存在数组中`data_arr`：

```
# generate random boolean mask the length of data
# use p 0.75 for False and 0.25 for True
mask = numpy.random.choice([False, True], len(data_arr), p=[0.75, 0.25]) 
```

现在您可以调用`data_arr[mask]`并返回约 25% 的行，随机抽样。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2018-12-20T10:35:34.440

这与 Hezi Rasheff 提供的答案相似，但经过简化，以便新的 python 用户了解发生了什么（我注意到许多新的数据科学学生以最奇怪的方式获取随机样本，因为他们不知道自己在 python 中做什么）。

您可以使用以下方法从数组中获取许多随机索引：

```
indices = np.random.choice(A.shape[0], number_of_samples, replace=False) 
```

然后，您可以对 numpy 数组使用精美的索引来获取这些索引处的样本：

```
A[indices] 
```

这将从您的数据中获得指定数量的随机样本。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-10-19T21:35:49.887

我看到有人建议排列。其实可以做成一行：

```
>>> A = np.random.randint(5, size=(10,3))
>>> np.random.permutation(A)[:2]

array([[0, 3, 0],
       [3, 1, 2]]) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-10-23T11:24:15.353

如果您想生成多个随机的行子集，例如，如果您正在执行 RANSAC。

```
num_pop = 10
num_samples = 2
pop_in_sample = 3
rows_to_sample = np.random.random([num_pop, 5])
random_numbers = np.random.random([num_samples, num_pop])
samples = np.argsort(random_numbers, axis=1)[:, :pop_in_sample]
# will be shape [num_samples, pop_in_sample, 5]
row_subsets = rows_to_sample[samples, :] 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-10-21T20:50:55.860

另一种方法是使用类的`choice`方法`Generator`，[https://github.com/numpy/numpy/issues/10835](https://github.com/numpy/numpy/issues/10835)

```
import numpy as np

# generate the random array
A = np.random.randint(5, size=(10,3))

# use the choice method of the Generator class
rng = np.random.default_rng()
A_sampled = rng.choice(A, 2) 
```

导致采样数据，

```
array([[1, 3, 2],
       [1, 2, 1]]) 
```

运行时间也被分析比较如下，

```
%timeit rng.choice(A, 2)
15.1 µs ± 115 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)

%timeit np.random.permutation(A)[:2]
4.22 µs ± 83.9 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)

%timeit A[np.random.randint(A.shape[0], size=2), :]
10.6 µs ± 418 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each) 
```

但是当数组变大时，`A = np.random.randint(10, size=(1000,300))`. 处理索引是最好的方法。

```
%timeit A[np.random.randint(A.shape[0], size=50), :]
17.6 µs ± 657 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)

%timeit rng.choice(A, 50)
22.3 µs ± 134 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)

%timeit np.random.permutation(A)[:50]
143 µs ± 1.33 µs per loop (mean ± std. dev. of 7 runs, 10000 loops each) 
```

***因此，当您的数组较小时，该`permutation`方法似乎是最有效的方法，而当您的数组变大时，处理索引是最佳解决方案。***

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-05-16T22:55:10.400

如果您需要相同的行但只是一个随机样本，那么，

```
import random
new_array = random.sample(old_array,x) 
```

这里 x, 必须是一个 'int' 定义你想要随机选择的行数。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-08-17T08:35:49.317

可以使用随机数生成器从给定数组生成随机样本：

```
rng = np.random.default_rng()
b = rng.choice(a, 2, replace=False)
b
>>> [[a4,  b4,  c4],
    [a99, b99, c99]] 
```

# java - 在java代码中运行R脚本并将r结果输出到文本文件中

> ID：14262655
> 
> 赞同：2
> 
> 时间：2013-01-10T16:30:52.950
> 
> 标签：java, r

我正在尝试在 java 程序中运行 R 脚本并将结果输出到文本文件中。

这是我的java代码：

```
import java.io.*;

public class rclass {

    public static void main(String[] args) {
        try {

            String line;

            Process p = Runtime.getRuntime().exec("RScript /Users/test.R iphone5 2012-12-16 2013-01-03");
            p.waitFor();

            BufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));

            while((line = input.readLine()) != null) {

                System.out.println(line);

            }

            input.close();

        } catch(Exception e) {
          e.printStackTrace();
        }
    }
} 
```

这是我将 r 结果输出到文本文件的方式：

```
out<-capture.output(scores)
cat(out, file="/Users/mmmmmm/Desktop/result.txt", sep="\n",append=TRUE) 
```

当我运行 java 代码时，我的 r 脚本没有输出到文本文件中。但是当我从终端运行命令时，它运行良好。我找不到问题。谁能给我一些建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:09:36.253

这不是解决方案，因为我无法重现该问题。但是为什么不在`Rscript`文件中输出结果呢？

例如，您可以这样做将输出和错误放在同一个文件中

```
 RScript /Users/test.R iphone5 2012-12-16 2013-01-03 > result.txt 2>&1 
```

# elasticsearch - 如何使 ElasticSearch 拒绝不存在的父母的子索引尝试？

> ID：14262656
> 
> 赞同：0
> 
> 时间：2013-01-10T16:30:55.070
> 
> 标签：elasticsearch

当在父 ID 下索引子文档时，ElasticSearch 的默认行为是索引子文档，而不管父文档是否实际存在。

尽管索引中不存在父文档，但子文档将进入索引并将 parent_id 设置为指定的父文档。

我已经搜索了 ES 文档（以及某种程度上的源代码），但似乎找不到改变这种行为的明显方法。

如果父 ID 不存在，我想让 ES 拒绝子索引尝试。

我试图避免像清理工作、额外查​​询等黑客解决方案......如果真的没有适当的方法来实现这一点，这些是最后的手段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T18:30:50.493

在使用 Elasticsearch 一段时间后，我发现有许多我不喜欢的默认行为，我已经建立了一个框架来强制执行我希望拥有的行为。我理解您希望能够设置一个标志或选项来防止孤儿插入，但我认为您必须使用查询和测试来包装您的插入以实现您想要做的事情。

# php - 带有 curl 的 Google Apps 日历忙/闲查询 POST

> ID：14262658
> 
> 赞同：0
> 
> 时间：2013-01-10T16:31:01.200
> 
> 标签：php, post, curl, google-calendar-api, google-apps-for-education

我正在尝试在 Google 资源日历（Google Apps）上进行空闲/忙碌查询。Freebusy 查询的 API 文档提供了有关请求的以下说明：

HTTP 请求：

```
POST https://www.googleapis.com/calendar/v3/freeBusy 
```

请求正文结构：

```
{  "timeMin": {datetime},
   "timeMax": {datetime},
   "items": [
      {"id": {string}
      }
    ]
} 
```

这是我的尝试，使用 curl：

```
$url = "https://www.googleapis.com/calendar/v3/freeBusy";
global $headers;  // holds ClientLogin authentification

$freebusy_post = array(

        "timeMin" => '2012-12-31T00:00:00',
        "timeMax" => '2013-01-08T23:00:00',
        "timeZone" => 'America/New York',

/*** "items" below commented out because posting a multidimensional array returns an 
"Array to string conversion" error. However, I think the API requires 
"items" to be an array. ***/

        //"items" => array(
        //        "id" => "https://www.googleapis.com/calendar/v3/calendars/gdev.wellesley.edu_313736333535343332@resource.calendar.google.com" 
        //        )

/*** My attempt at using a plain string instead of an array ***/

        "items" => "gdev.wellesley.edu_313736333535343332@resource.calendar.google.com",        

); 

$ch = curl_init();
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $freebusy_post);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 60);
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_URL, $url);

$data = curl_exec($ch);
print_r($data); 
```

我的问题： $data 不打印任何内容。

我是 PHP、curl 和 Google Apps Calendar API 的新手。我很想你能提供任何帮助/课程/建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:09:14.037

Not sure, but you have probably to convert the php array to a json first.

```
$freebusyjson = json_encode($freebusy_post); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-09T15:12:32.980

我从您的代码开始并对其进行了修改，以下内容对我有用...

请注意我如何在 item 变量中格式化日历 ID。我还只需要将 API 密钥附加到 URL，因为它是公共日历。我认为我最初不需要它，但后来我达到了不使用 API 密钥可以发出的请求数量。

最后，注意时间/日期的格式。我说这是唯一的方法，但它对我有用。

```
$url = "https://www.googleapis.com/calendar/v3/freeBusy/?key=MY_API_KEY";

$freebusy_post = array(
        "timeMin" => '2016-11-01T00:00:00.000Z',
        "timeMax" => '2016-12-21T00:00:00.000Z',
        "timeZone" => ' America/New York',
        "items" => array(array('id'=>"mywebsite.com_randomlettershere@group.calendar.google.com")),        

);

$freebusy_post = json_encode($freebusy_post);
$ch = curl_init();curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $freebusy_post);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 60);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));
curl_setopt($ch, CURLOPT_URL, $url);

$data = curl_exec($ch);
print_r($data); 
```

# java - ajax更新后未呈现Wicket Table css？

> ID：14262659
> 
> 赞同：1
> 
> 时间：2013-01-10T16:31:10.797
> 
> 标签：java, wicket

我有一个包含一些项目的数据表。数据表在 table 标签上有一些 css。当我更新 dataproviders 模型列表并使用 ajax 将组件发送回时，css 不会被渲染。

但是，如果我使用 ajax 发送整个页面，则表格呈现正确。

例子：

```
<wicket:panel>
  <table class="striped">
  </table>
 </wicket:panel> 
```

这个 css 类给出了奇数甚至不同的 css。

这就是我在更改数据提供者后更新组件的方式。

```
ajaxRequestTarget.add(MyPage.this.get("myPanel")); //this panel contains the table 
```

数据被添加，但 css 标记消失了。刷新页面带回 css。

```
ajaxRequestTarget.add(MyPage.this); //send the entire page 
```

这可行，但整个页面都会刷新（这会使页面向上滚动。

如果您发送整个页面而不是仅发送 1 个组件/面板，组件渲染有什么区别？

我正在使用铬。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T06:25:04.757

如果您通过 jQuery 渲染样式，则必须再次调用它才能正确重新绘制。

```
ajaxRequestTarget.appendJavascript("renderMethod('.striped');"); 
```

# java - REST API - Swagger + Java + Jersey 错误的列表路径和额外的 api

> ID：14262660
> 
> 赞同：4
> 
> 时间：2013-01-10T16:31:14.177
> 
> 标签：java, rest, jersey, jetty, swagger

在我的项目中，我使用 Maven、Jetty、Swagger、Java 和 Jersey 来创建 REST API。我还使用 Swagger 为我的 API 创建漂亮的文档。

几乎一切都很好，而不是三个问题。一开始 - 这是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    version="2.5">
    <display-name>Restful Web Application</display-name>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:applicationContext.xml</param-value>
    </context-param>

    <listener>
        <listener-class>
            org.springframework.web.context.ContextLoaderListener
        </listener-class>
    </listener>

    <listener>
        <listener-class>
            org.springframework.web.context.request.RequestContextListener
        </listener-class>
    </listener>

    <servlet>
        <servlet-name>jersey-serlvet</servlet-name>
        <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>

        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.pjdb.rest;com.wordnik.swagger.jaxrs;</param-value>
        </init-param>

        <init-param>
            <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
            <param-value>true</param-value>
        </init-param>

        <init-param>
            <param-name>api.version</param-name>
            <param-value>1.0</param-value>
        </init-param>

        <init-param>
            <param-name>swagger.api.basepath</param-name>
            <param-value>http://localhost:8080/rest</param-value>
        </init-param>

        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet>
        <servlet-name>Bootstrap</servlet-name>
        <servlet-class>com.pjdb.rest.Bootstrap</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>jersey-serlvet</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>

    <filter>
        <filter-name>ApiOriginFilter</filter-name>
        <filter-class>com.pjdb.rest.utils.ApiOriginFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>ApiOriginFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

</web-app> 
```

1）如何从listingPath的开头删除api-docs？

```
{
  "apiVersion": "1.0",
  "swaggerVersion": "1.1",
  "basePath": "http://localhost:8080/rest",
  "apis": [
    {
      "path": "/api-docs/resources",
      "description": ""
    },
    {
      "path": "/api-docs/employee",
      "description": ""
    }
  ]
} 
```

我想在路径的开头删除 /api-docs ..

2) 如何从 api 中删除“/api-docs/resources”？我只使用“员工”类，而不是“资源”。

3）如果我输入`http://localhost:8080/rest/api-docs/employee`我的方法和'/'主 URL 是空的。我可以删除它吗？

我尝试了很多配置。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T19:10:47.363

我以这种方式解决了这个问题：

1.  将 Swagger 生成的 api-docs.json 保存到硬盘
2.  根据需要编辑生成的 JSON
3.  将此文件复制到`~/src/main/webapp/swagger-ui/api-docs.json`
4.  放入您目录`http://localhost:8080/swagger-ui/api-docs.json`中的 discoveryUrl 路径`index.html``/swagger-ui`

此方法需要您，如果有任何变化，您必须自己修改主列表，但它是安全且有效的解决方案。

我的 api-docs.json 看起来像这样：

```
{
    "apiVersion": "1.0",
    "swaggerVersion": "1.1",
    "basePath": "http://localhost:8080/rest",
    "apis": [
        {
            "path": "/api-docs.json/employee",
            "description": ""
        }
    ]
} 
```

和`swagger-ui/index.html`设置

```
<script type="text/javascript">
    $(function () {
        window.swaggerUi = new SwaggerUi({
            discoveryUrl:"http://localhost:8080/swagger-ui/api-docs.json",
            apiKey:"special-key",
            dom_id:"swagger-ui-container",
            supportHeaderParams: false,
            supportedSubmitMethods: ['get', 'post', 'put'],
            onComplete: function(swaggerApi, swaggerUi){
                if(console) {
                    console.log("Loaded SwaggerUI")
                    console.log(swaggerApi);
                    console.log(swaggerUi);
                }
              $('pre code').each(function(i, e) {hljs.highlightBlock(e)});
            },
            onFailure: function(data) {
                if(console) {
                    console.log("Unable to Load SwaggerUI");
                    console.log(data);
                }
            },
            docExpansion: "none"
        });

        window.swaggerUi.load();
    });

</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T17:44:50.523

尽管我不是 Swagger 专家，但我将尝试回答您的所有三个问题。我还建议与 IRC 上的 Swagger 开发人员交谈——他们的响应速度非常快。我认为让 Swagger “自动”工作是值得的，这样您就不必手动更新它——这对我来说似乎不是最佳选择。

1) 您不想在列表路径中删除*api-docs* - 您想要列表的某种唯一名称。它不一定是*api-docs* - 例如，我使用*资源*- 但在 Swagger 上，您需要某种前缀来区分您的实际 REST 资源及其描述。所以我认为这根本不是问题。

2）您是否有一个扩展*com.wordnik.swagger.jaxrs.JavaApiListing*的类，可能称为*ApiResourceListing*。这就是您确定 Swagger 文档的入口点的地方。也许您有一个像这样指向*/resources*的额外类？（它也可能是*import com.wordnik.swagger.jaxrs.listing.ApiListing*的扩展，如果您没有在 REST 地址中使用格式后缀，则可以使用它。

3）我不知道这个。就像我一开始说的那样，也许可以在他们的 IRC 或他们的[谷歌小组](https://groups.google.com/forum/?hl=en#!forum/swagger-swaggersocket)上询问 Swagger 的人。

4）这个答案与 Swagger 1.2 相关。如果您最近刚刚遇到这个问题，您可能想查看[Swagger Jax-RS 教程](https://github.com/wordnik/swagger-core/wiki/Java-JAXRS-Quickstart)，该教程已针对 1.3 版进行了更新。

# vim - 如何为我的部分/命令自定义 vim-latex 中的折叠？

> ID：14262670
> 
> 赞同：1
> 
> 时间：2013-01-10T16:31:49.810
> 
> 标签：vim, folding

我已经安装了`vim-latex-suite`并且我想定制折叠以与`labbook`包一起使用。该`labbook`包使用`\labday`、`\experiment`和`\subexperiment`代替`\chapter`、`\section`和`\subsection`。

我想`vim-latex-suite`在 Vim 中自定义折叠选项，以便像传统的切片命令一样折叠`\labday`、`\experiment`和。`\subexperiment`

我已经尝试添加到我`~/.vim/after/ftplugin/tex.vim`的以下内容（但它没有用）

```
 " Folding sections
 let g:Tex_FoldedSections = ',labday,experiment,subexperiment'
 " Folding commands
 let g:Tex_FoldedCommands = ',labday,experiment,subexperiment' 
```

有人可以告诉我如何自定义`labbook`包装的折叠方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T23:09:25.483

我认为你应该把

```
let g:Tex_FoldedSections = 'labday,experiment,subexperiment'` 
```

在你`.vimrc`自己。如果你看看`ftplugin/latex-suite/folding.vim`你会发现：

```
if g:Tex_FoldedSections != '' 
    call Tex_FoldSections(g:Tex_FoldedSections,
        \ '^\s*\\frontmatter\|^\s*\\mainmatter\|^\s*\\backmatter\|'
        \. '^\s*\\begin{thebibliography\|>>>\|^\s*\\endinput\|'
        \. '^\s*\\begin{slide\|^\s*\\end{document')
endif 
```

这意味着`Tex_FoldedSections`在已加载插件之后的设置将不起作用。还要确保您的乳胶文件本身中的部分正确嵌套。

# eclipse - JaxB @XmlRootElement 导致“无法解析 xml 元素声明”

> ID：14262682
> 
> 赞同：3
> 
> 时间：2013-01-10T16:32:24.610
> 
> 标签：eclipse, jaxb

我使用 JAXB 作为 DTO 在服务器和客户端之间设置稳定的接口。无论如何，这无所谓。重要的是我创建了一组导致以下编译错误的类。

> 无法在此上下文中解析具有命名空间“命名空间”和名称“名称”的 XML 元素声明

Eclipse 将引号内的“名称”下划线作为错误。这个类是手动创建的，而不是 xjc 生成的。

```
@XmlRootElement(name="name", namespace="namespace")
@XmlType(name="")
public class UserDTO {

    private UserType userType;

    @XmlElement
    public UserType getDTO(){
        return userType;
    }

    public void setDTO(UserType userType){
        this.userType=userType;
    }
} 
```

其中 UserType 是 xjc 生成的类

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "userType", propOrder = {
    "userId",
    "userName"
})
public class UserType {getter;setter} 
```

所以基本上 UserDTO 只是一个包装子 jaxb 类型的包装器。

无论如何，我不确定它是否依赖于平台（它不应该是），只是提到这段代码在 Netbeans 上运行良好，但是当涉及到 Eclipse 时，错误阻止了编译。

运行该项目的环境是：1\. MacOsX Lion 2\. JDK：1.6.0_37 3\. Eclipse 版本：Juno with Package 1 4\. JAXB 平台：通用 JAXB 2.1

请任何人都可以分享一些想法？

* * *

ps：我按照 Manuel 的建议添加了 JDK 信息和库设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T06:35:51.163

我遇到了这个问题，您有多个模式，至少有两个，它们都没有命名空间，只需将命名空间分配给其中一个。

# javascript - JavaScript 中这种情况的首选模式是什么？

> ID：14262685
> 
> 赞同：0
> 
> 时间：2013-01-10T16:32:28.530
> 
> 标签：javascript, backbone.js

从风格上讲，我不确定在 JavaScript 中处理这种情况的最佳方式。

我们从这个开始获取之前模型的副本（如果可用）。然后，如果可用，我将根据这些值创建一个 DamageDiagnosisModel。

`this._previousModel = this.impairmentsCollection.get(this.model.get('id')) || '';`

选项1：

```
this._impairmentDiagnosisModel = new ImpairmentDiagnosisModel({
    id: this.model.get('id'),
    cdx: (this._previousModel && this._previousModel.get('diagnosis').cdx) || _.first(this._diagnosisClass).id,
    nonKeyFactor: this._previousModel && this._previousModel.get('diagnosis').nonKeyFactor,
    impairmentValue: this._previousModel && this._previousModel.get('diagnosis').impairmentValue,
    side: this._previousModel && this._previousModel.get('diagnosis').side,
    digit: this._previousModel && this._previousModel.get('diagnosis').digit
}); 
```

选项 2：

```
if(this._previousModel) {
    this._impairmentDiagnosisModel = new ImpairmentDiagnosisModel({
        id: this.model.get('id'),
        cdx: this._previousModel.get('diagnosis').cdx,
        nonKeyFactor: this._previousModel.get('diagnosis').nonKeyFactor,
        impairmentValue: this._previousModel.get('diagnosis').impairmentValue,
        side: this._previousModel.get('diagnosis').side,
        digit: this._previousModel.get('diagnosis').digit
    });
}
else {
    this._impairmentDiagnosisModel = new ImpairmentDiagnosisModel({
        id: this.model.get('id'),
        cdx: _.first(this._diagnosisClass).id
    });
} 
```

使用选项#1，它会在模型​​中添加不必要的空属性，但这在这里无关紧要。如果服务器接收到空属性，它们将被忽略。

使用选项#2，它的代码更多，更易于阅读，但似乎效率低下。

在这种情况下，首选方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:14:32.160

选项 3：您可以克隆您的`_previousModel.get('diagnosis')`对象，然后对其进行修改以添加自定义属性。

例如，

```
var data = (this._previousModel) ? _.clone(this._previousModel.get('diagnosis')) : {};
data.id = this.model.get('id');
data.cdx = data.cdx || _.first(this._diagnosisClass).id;

this._impairmentDiagnosisModel = new ImpairmentDiagnosisModel(data); 
```

# vba - VBA：过滤，从外部工作簿复制值，并过去到活动工作簿

> ID：14262687
> 
> 赞同：0
> 
> 时间：2013-01-10T16:32:36.937
> 
> 标签：vba, excel

我正在寻找一个简单的解决方案来解决这个问题。

下面的代码是我的尝试，源工作簿的过滤部分是否正确？

另外，我想确保留下源工作簿是在过滤和复制时

非常感谢您的任何想法！

```
Sub CopyFilteredValuesToActiveWorkbook()

    Dim sourceValues As Range, targetValues As Range

    Set sourceValues = Workbooks("\\Linkstation\rrm\X_DO_NOT_TOUCH_CC\MasterLogFile\Masterlogfile.xlsx").Worksheets("LogData").Columns("A:Z") 

    ActiveSheet.Range("$A$1:$H$3").AutoFilter Field:=3, Criteria1:="Opera" 

    Set targetValues = Workbooks("\\Linkstation\rrm\Campaign Creator\RAW DATA GENERATOR OPERA.xlsm").Worksheets("MLF").Columns("A:Z")             

    sourceValues.Copy Destination:=targetValues

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:40:51.760

尝试这样的事情 - 将工作簿/工作表定义为变量可以更轻松地管理所有内容。我假设您希望宏为您打开另一个工作簿 - 如果没有，代码可以轻松更改。

```
Sub CopyFilteredValuesToActiveWorkbook()

Dim wbSource As Workbook, wbDest As Workbook
Dim wsSource As Worksheet, wsDest As Worksheet
Dim rngSource As Range, rngDest As Range

Set wbSource = Workbooks.Open("\\Linkstation\rrm\X_DO_NOT_TOUCH_CC\MasterLogFile\Masterlogfile.xlsx", , True) 'Readonly = True
Set wsSource = wbSource.Worksheets("LogData")
wsSource.Range("$A$1:$H$3").AutoFilter Field:=3, Criteria1:="Opera"
Set rngSource = wsSource.Range("A:Z")

Set wbDest = ThisWorkbook
Set wsDest = wbDest.Worksheets("MLF")
Set rngDest = wsDest.Range("A:Z")

rngDest.Value = rngSource.Value 'Copies values over only, if you need formatting etc we'll need to use something else

wbSource.Close (False) 'Close without saving changes

End Sub 
```

# joomla - joomla：为什么注册表单菜单项会转到用户的个人资料页面？

> ID：14262691
> 
> 赞同：0
> 
> 时间：2013-01-10T16:32:43.953
> 
> 标签：joomla, registration, menuitem

我创建了一个新菜单项：**my_RegistrationForm_menu_item**（类型 =*注册表单*）。

但是当我单击 my_RegistrationForm_menu_item 时，它会转到“用户资料”页面而不是“注册表单”页面。

另外，如果我附加：`index.php/component/users/?view=registration`

或者`index.php?option=com_users&view=registration`

到我的浏览器 URL，它会将我重定向到`index.php/.../profile`

注意：如果我单击默认登录模块中的创建帐户按钮，它会正确地将我带到“注册表单”页面。

为什么*注册表单*菜单项会转到用户的“用户资料”页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:12:56.927

如果您选择了**type = Registration**，则没有理由将其重定向到用户配置文件页面，除非您接触过任何相关的核心 Joomla 文件。

作为替代方案，您可以选择**type = External**并使用以下链接：

```
index.php?option=com_users&view=registration 
```

**更新：**

您还可以执行以下操作：

1.  创建一个名为“**隐藏**”的新菜单（不是菜单项）
2.  为“隐藏”菜单创建一个名为“**注册**”的新菜单项，将类型设置为“**外部**”并添加我在上面提供的链接。
3.  为您的主菜单创建一个新菜单项，将类型设置为“**菜单项别名**”并将其命名为“**注册**”。然后在“必需设置”部分中，选择您之前创建的隐藏菜单项。

如果这仍然不起作用，那么您的 Joomla 站点有问题并且`com_users`代码很可能已被篡改

# google-app-engine - 从逻辑视图的角度来看，它是应用程序的“一个”（且一致的）memcached 服务器吗？

> ID：14262695
> 
> 赞同：0
> 
> 时间：2013-01-10T16:32:50.600
> 
> 标签：google-app-engine, memcached

这是一个关于 GAE 幕后的问题。

好的，这可能是一个愚蠢的问题，但我想弄清楚谷歌如何支持地理分布式数据中心以及在这种情况下在 memcached 中使用了哪些策略。

**从逻辑视图的角度来看，它是应用程序的“一个”（且一致的）memcached 服务器吗？**让我解释一下：使用 memcached 的最知名案例之一是“页面查看次数”示例。好吧，如果 memcached 是分布式/复制的（也就是说，key:value 将在 n+1 台机器上分布和复制）我不能保证一个一致的值（或类似的东西），因为计数值将被除以n+1。

另一种分布式/复制的 memcached 可能会导致麻烦的情况：我会使用一些未更新的实体值。例如：步骤 1.req webserver1+memcached1（在 memcached1 中做一些查询和缓存 entity1）步骤 2.req webserver2+memcached2（更新 entity1 并在 memcached2 中使其无效）步骤 3.req webserver1+memcached1（从 memcached1 中获取 entity1，但它是旧数据，因为它在数据存储中更新，在 memcached2 中无效，但在 memcached1 中无效！！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:36:15.687

**单个**内存缓存在应用程序的所有实例之间共享。

无论哪个实例将值放入或取出，它们都共享相同的存储。

所以是的，它是通过应用程序。

# c# - OOP 基础：在派生类的基类中创建被覆盖的对象

> ID：14262698
> 
> 赞同：0
> 
> 时间：2013-01-10T16:32:57.920
> 
> 标签：c#, oop

抱歉标题不好，但我的英语不是那么好。
假设以下代码（在程序模式下使用 LINQPad 进行测试）：

```
public class BaseClass
{
    protected Settings settings;

    public BaseClass()
    {
        this.settings = new Settings();
    }

    public virtual void PrintSettings()
    {
        var t = settings.GetType();
        Console.WriteLine(string.Join(", ", t.GetProperties().Select(pi => pi.Name)));
    }

    public class Settings
    {
        public string BaseClassSetting { get { return "BaseClassSetting."; } }
    }
} 
```

调用“new BaseClass().PrintSettings();” 显然会在控制台中输出“BaseClassSetting”。
让我们从 BaseClass 派生一个类：

```
public class InheritedClass : BaseClass
{
    public new class Settings : BaseClass.Settings
    {
        public string InheritedClassSetting { get { return "InheritedClassSetting!"; } }
    }
} 
```

调用“new InheritedClass().PrintSettings();” 仍将在控制台中打印“BaseClassSetting”。
使代码使用“new”ed InheritedClass.Settings 的唯一方法是添加一个像

```
public InheritedClass()
{
    this.settings = new Settings();
} 
```

使用这个额外的ctor，它将所需的“InheritedClassSetting，BaseClassSetting”打印到控制台。
现在的问题是：是否可以让 BaseClass-ctor 始终使用实例对象的 Settings-Class？（不添加派生类中的ctor）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:39:14.840

使用不好的做法，期望有不好的解决方法来解决问题。我`new`一般不会使用关键字，更不用说嵌套类了。您可以通过使您的基类接受从无参数构造函数继承`BaseClass.Settings`并具有无参数构造函数的泛型类型来删除继承类中的构造函数。显然，它是不可读的。

```
public class BaseClass<T> where T : BaseClass<T>.Settings, new()
{
    protected Settings settings;

    public BaseClass()
    {
        settings = new T();
    }

    public virtual void PrintSettings()
    {
        var t = settings.GetType();
        Console.WriteLine(string.Join(", ", t.GetProperties().Select(pi => pi.Name)));
    }

    public class Settings
    {
        public string BaseClassSetting
        {
            get { return "BaseClassSetting."; }
        }
    }
}

public class InheritedClass : BaseClass<InheritedClass.Settings>
{
    public new class Settings : BaseClass<InheritedClass.Settings>.Settings
    {
        public string InheritedClassSetting
        {
            get { return "InheritedClassSetting!"; }
        }
    }
} 
```

注意就行了：

```
public new class Settings : BaseClass<InheritedClass.Settings>.Settings 
```

泛型的参数不需要您指定`InheritedClass`. 我已经添加了它，因为它已经很混乱了，我不想让它变得更糟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:41:00.463

不，因为您不能拥有“虚拟类型”。

您可以通过多种方式尝试实现您在此处所做的事情，但所有这些方式都需要在某个时候`InheritedClass`明确引用其自己的版本。`Settings`

# android - Android获取进程使用多少电池？

> ID：14262700
> 
> 赞同：1
> 
> 时间：2013-01-10T16:32:58.077
> 
> 标签：android, broadcastreceiver, batterylevel

我想知道一个进程使用了​​多少电池。我知道如何获得电池电量，但百分比对我的流程不够敏感。有没有办法增加像 100000 或大于 100 的规模？这样我相信我可以得到准确的差异。

这是我的伪代码；

```
levelStart = getLevel();
someTestProcess();
levelEnd = getLevel();
result = levelEnd - levelStart; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:13:46.857

> 我想知道一个进程使用了​​多少电池

您必须从头开始构建自己的手机，或者购买一台[Qualcomm MDP 设备](https://developer.qualcomm.com/mobile-development/development-devices)并使用[Trepn](https://developer.qualcomm.com/mobile-development/development-devices/trepn-profiler)（而不是您自己的代码）进行功率测量。标准 Android 硬件无法精确测量功耗。

# c++ - 为什么 std::cout 对 [] = "12345" 工作正常，但对 [] = {'1','2','3','4','5'} 却不行？

> ID：14262702
> 
> 赞同：2
> 
> 时间：2013-01-10T16:33:03.477
> 
> 标签：c++

我注意到 C++ 中有一个奇怪的差异。

说我有这个代码：

```
const char myChars[] = "12345";
std::cout << myChars; 
```

输出为：12345

但是，如果我将其更改为：

```
const char myChars[] = {'1','2','3','4','5'};
std::cout << myChars; 
```

那么输出是：12345__SOME_RANDOM_DATA_IN_MEMORY__

为什么 cout 似乎知道第一个版本的长度而不知道第二个版本的长度？另外， cout 甚至知道长度吗？

谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-10T16:33:51.163

第二个示例中没有空终止符。

```
const char myChars[] = {'1','2','3','4','5', 0}; 
```

可以正常工作。

字符串文字需要一个空终止符来指示字符串的结尾。

有关更多详细信息，请参阅此 stackoverflow 答案：[https ://stackoverflow.com/a/2037245/507793](https://stackoverflow.com/a/2037245/507793)

至于您的第一个示例，当您使用引号创建字符串文字时`"Hello"`，大致相当于`{'H', 'e', 'l', 'l', 'o', 0}`，因为使用引号时空终止符是隐式的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T16:34:12.710

向编译器询问 sizeof(myChars) 并注意区别。字符串的结尾由一个空字符标记，当您使用“”时是隐含的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T16:34:17.393

当设置`mychars[]`为“12345”时，你隐式地`'\0'`在它的末尾添加一个，告诉程序这是字符串的结尾，而你没有`{'1','2','3','4','5'};`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-10T16:34:35.083

C 字符串实现为以特殊字符结尾的 char 数组`\0`。

字符串文字隐含地具有它。虽然花括号数组初始化不添加它。

您需要手动添加

```
const char myChars[] = {'1','2','3','4','5', '\0'}; 
```

或者干脆

```
const char myChars[] = {'1','2','3','4','5', 0}; 
```

因为 '\0' == 0 数值。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-10T16:34:44.953

```
const char myChars[] = {'1','2','3','4','5','\0'}; 
```

不要忘记添加空终止字符串

# database - 在远程数据库上查找 PL/SQL 函数的返回值

> ID：14262713
> 
> 赞同：0
> 
> 时间：2013-01-10T16:33:41.063
> 
> 标签：database, oracle, logging, plsql

我有一个在远程客户端上运行的 Oracle XXg 数据库，并且无法重现测试环境。现在，有一个存储过程返回一个意外的值（它只是一个应该为零但返回其他数字的整数），我想知道是哪个值。

我可以编辑函数和过程，但如果不使用无法调试的大型 Java 应用程序，我将无法调用该函数。有没有办法将返回值记录到文本文件或数据库上的一些日志中，以便我可以在执行后检查它？

如果没有这样的功能，那么麻烦的解决方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:37:11.770

如何创建一个表来记录值？

```
CREATE TABLE mylog (t TIMESTAMP DEFAULT SYSTIMESTAMP, retval NUMBER);

CREATE OR REPLACE PROCEDURE yourprocedure 
AS
  myval NUMBER;

  PROCEDURE logval (myval NUMBER) AS PRAGMA autonomous_transaction;
  BEGIN
    INSERT INTO mylog(retval) VALUES (myval);
    COMMIT;
  END logval;
BEGIN
  -- your normal code
  myval := 1; 
  -- log the result
  logval(myval);
END yourprocedure;
/ 
```

然后您可以简单地从表中选择值`mylog`...

# shell - 外壳“如果”语句

> ID：14262715
> 
> 赞同：2
> 
> 时间：2013-01-10T16:33:46.777
> 
> 标签：shell, unix, if-statement, mv

我是 unix 新手，正在练习一个简单的脚本来解压缩指定目录中的大量文件。我需要程序在完成解压缩后将压缩文件移动到另一个文件夹中（我称之为 oldzipped 文件夹）。为简单起见，我删除了解压缩文件的部分代码，并且当前让程序为特定文件而不是 *tar.7z 文件扩展名工作。由于某种原因， mv 语句不起作用。当我尝试运行脚本时，Unix 会说以下内容。有人可以帮我解决这个问题吗？同样，我知道这是做事的漫长道路，但我想练习编写脚本。请客气，因为我对 Unix 很陌生 :(

unzip5：第 14 行：[ASDE0002.tar.7z]：找不到命令

```
#!~/bin/bash
# My program to try to unzip several files with ending of tar.7z
# I have inserted the ability to enter the directory where you want this to be done

echo "What file location is required for unzipping?"

read dirloc

cd $dirloc
mkdir oldzippedfiles
for directory in $dirloc
        do
                if
                [ASDE0002.tar.7z]
                then
                mv -f ASDE0002.tar.7z $dirloc/oldzippedfiles
        fi
        done

echo "unzipping of file is complete"

exit 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:38:31.687

`[`是接受参数的（有时是内置的）命令的名称。因此，您需要在它之后放置一个空格，就像调用任何其他程序时一样。另外，你需要一个测试。例如，要确定文件是否存在并且是文件，您需要使用`-f`：

```
if [ -f ASDE0002.tar.7z ]
then
    mv -f ASDE0002.tar.7z $dirloc/oldzippedfiles
fi 
```

这里有一些[其他可能的测试](http://unixhelp.ed.ac.uk/CGI/man-cgi?test)。

# c# - NullReferenceException 未处理，我不知道为什么？

> ID：14262716
> 
> 赞同：0
> 
> 时间：2013-01-10T16:33:47.973
> 
> 标签：c#, wpf, datagrid, nullreferenceexception

我正在创建一个 WPF C# 应用程序，它有一个连接到 SQL Server 数据库的数据网格。用户可以选择通过突出显示一行并单击编辑按钮来编辑数据网格中的数据，然后使用突出显示行中的数据填充几个文本框。此时，用户可以编辑数据，单击保存，数据网格会反映所做的更改。直到最近，该功能还运行良好。但是，我被要求添加一个功能，在屏幕上的其他位置显示突出显示的数据行（因为长时间查看数据网格会变得令人厌烦）。因此，当用户单击一行时，数据网格右侧的一系列文本块会更改，以更易于查看的格式显示突出显示的行的数据。该功能也可以正常工作。我现在遇到的问题，就是当一行被突出显示并自动显示文本块中的数据时，如果用户还试图编辑该行，应用程序就会崩溃。用户单击编辑后，数据在文本框中显示得很好（同时在文本块中显示相同的突出显示行）；只是在单击保存时，我遇到了问题。

调试程序表明一切运行顺利。但是，单击保存后，调试器跳回到我的 myGridSelectionChanged 事件并说“未处理 NullReferenceException - 对象引用未设置为对象的实例”但是当我重新加载程序时，数据网格反映了我之前尝试进行的更改应用程序崩溃了。我假设这意味着问题与实际编辑数据库无关，而是问题在于文本块无法反映这些编辑。下面是我的一些代码：

这是保存按钮的代码：

```
 private void saveBtn_Click(object sender, RoutedEventArgs e)
    {
        var stqmDC = new SqtmLinqDataContext();

        var selectedRow = EditGrid.GetSelectedRow(myGrid);
        var ID = EditGrid.GetCell(myGrid, selectedRow, 0);
        string selectedID = ((TextBlock)ID.Content).Text;
        int convertedID = Convert.ToInt32(selectedID);

        int newQuantity = int.Parse(quantityTxt.Text);

        var query = from info in stqmDC.General_Infos
                    where info.Quote_ID == convertedID
                    select info;

        foreach (General_Info info in query)
        {
            info.Customer_Name = customerNameTxt.Text;
            info.OEM_Name = oemNameTxt.Text;
            info.Qty = newQuantity;
            info.Quote_Num = quoteNumberTxt.Text;
            info.Fab_Drawing_Num = fabDrawingNumTxt.Text;
            info.Rfq_Num = rfqNumberTxt.Text;
            info.Rev_Num = revNumberTxt.Text;
        }

        try
        {
            stqmDC.SubmitChanges();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

        var mainTable = from generalInfo in stqmDC.GetTable<General_Info>()
                        select new
                        {
                            generalInfo.Quote_ID,
                            generalInfo.Open_Quote,
                            generalInfo.Customer_Name,
                            generalInfo.OEM_Name,
                            generalInfo.Qty,
                            generalInfo.Quote_Num,
                            generalInfo.Fab_Drawing_Num,
                            generalInfo.Rfq_Num,
                            generalInfo.Rev_Num
                        };

        myGrid.ItemsSource = mainTable;

        leftSP.Visibility = Visibility.Hidden;
        rightSP.Visibility = Visibility.Hidden;
        cancelBtn.Visibility = Visibility.Hidden;
        submitBtn.Visibility = Visibility.Hidden;
        saveBtn.Visibility = Visibility.Hidden;
        sendBtn.Visibility = Visibility.Hidden;

    } 
```

以及在文本块中显示突出显示的行的代码：

```
 private void myGridSelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        var rowSelection = EditGrid.GetSelectedRow(myGrid);

        var quoteID = EditGrid.GetCell(myGrid, rowSelection, 0);
        string quoteIDEdit = ((TextBlock)quoteID.Content).Text;
        QuoteIDtxtblk.Text = quoteIDEdit;

        var date = EditGrid.GetCell(myGrid, rowSelection, 1);
        string dateEdit = ((TextBlock)date.Content).Text;
        Datetxtblk.Text = dateEdit;

        var custName = EditGrid.GetCell(myGrid, rowSelection, 2);
        string custNameEdit = ((TextBlock)custName.Content).Text;
        CustomerNametxtblk.Text = custNameEdit;

        var OemName = EditGrid.GetCell(myGrid, rowSelection, 3);
        string OemNameEdit = ((TextBlock)OemName.Content).Text;
        OemNametxtblk.Text = OemNameEdit;

        var Quantity = EditGrid.GetCell(myGrid, rowSelection, 4);
        string QuantityEdit = ((TextBlock)Quantity.Content).Text;
        Quantitytxtblk.Text = QuantityEdit;

        var quoteNum = EditGrid.GetCell(myGrid, rowSelection, 5);
        string quoteNumEdit = ((TextBlock)quoteNum.Content).Text;
        QuoteNumbertxtblk.Text = quoteNumEdit;

        var fabDrawing = EditGrid.GetCell(myGrid, rowSelection, 6);
        string fabDrawingEdit = ((TextBlock)fabDrawing.Content).Text;
        FabDrawingNumbertxtblk.Text = fabDrawingEdit;

        var rfqNum = EditGrid.GetCell(myGrid, rowSelection, 7);
        string rfqNumEdit = ((TextBlock)rfqNum.Content).Text;
        RfqNumbertxtblk.Text = rfqNumEdit;

        var revNum = EditGrid.GetCell(myGrid, rowSelection, 8);
        string revNumEdit = ((TextBlock)revNum.Content).Text;
        RevNumbertxtblk.Text = revNumEdit;

    } 
```

提前感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:49:21.530

您更改`ItemsSource`a意味着您的选择将消失并被`DataGrid`解雇。`saveBtn_Click``SelectionChanged`

因此，您需要在`myGrid.SelectedItem == null`某处处理这种情况（），如果是，则什么也不做（返回）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:37:30.360

你认为它到底是在哪里处理的？

要处理导致应用程序崩溃的异常，您需要对每个“入口点”进行异常防护，定义为应用程序中可以调用非托管代码或代码开始在不同线程上运行的每个点。

这包括按钮单击处理程序。在您的按钮处理程序中添加一个 try/catch 并显示一些发生错误的 UI 消息并写入一条日志消息或至少一个“Debug.WriteLine(exceptionObjectHere);” 所以你可以看到异常来自哪里

# java - Spring mvc 3.2：NoClassDefFoundError：java/util/Deque

> ID：14262719
> 
> 赞同：0
> 
> 时间：2013-01-10T16:33:59.467
> 
> 标签：java, spring, model-view-controller, jboss

在处理对我的@Controller 方法的获取请求时，我得到

```
 2013-01-10 18:16:44,871 INFO  [STDOUT] 2013-01-10 18:16:44 [http-0.0.0.0-8080-53] DEBUG org.springframework.web.servlet.DispatcherServlet.processRequest - Could not complete request
org.springframework.web.util.NestedServletException: Handler processing failed; nested exception is java.lang.NoClassDefFoundError: java/util/Deque
        at org.springframework.web.servlet.DispatcherServlet.triggerAfterCompletionWithError(DispatcherServlet.java:1259) ~[spring-webmvc-3.2.0.RELEASE.jar:3.2.0.RELEASE]
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:945) ~[spring-webmvc-3.2.0.RELEASE.jar:3.2.0.RELEASE]
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856) ~[spring-webmvc-3.2.0.RELEASE.jar:3.2.0.RELEASE]
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:915) [spring-webmvc-3.2.0.RELEASE.jar:3.2.0.RELEASE]
        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:811) [spring-webmvc-3.2.0.RELEASE.jar:3.2.0.RELEASE]
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:734) [javaee.jar:9.1]
        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:796) [spring-webmvc-3.2.0.RELEASE.jar:3.2.0.RELEASE]
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:847) [javaee.jar:9.1]
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.5.0_25]
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) ~[na:1.5.0_25] 
```

我使用 spring 3.2、java 5、jboss 4.2

**编辑** 问题在百里香而不是在春天

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:37:37.257

双端队列

自：1.6

检查这个[http://docs.oracle.com/javase/6/docs/api/java/util/Deque.html](http://docs.oracle.com/javase/6/docs/api/java/util/Deque.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:38:36.123

您使用的是比 1.6 更旧的 java 版本？显然，从那时起，Deque 才出现。

我猜您的开发环境使用了新的 jvm，而您的部署较旧，这就是为什么在编译时不会出现错误。

更新部署 Spring 应用程序的 Java 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:04:51.237

回答我自己的问题

问题出在 thymeleaf 2.0.13 上。它是用 java 5 编译的（我用 javap - 49 检查过），但使用 java.util.Deque。我升级到 2.0.15 并且问题消失了。我向 Spring 伙计们道歉，他们做得非常出色。

我现在感到胸痛

# macros - Clojure：try，catch 宏，它也关闭任何文件流（不是打开）

> ID：14262720
> 
> 赞同：2
> 
> 时间：2013-01-10T16:33:59.753
> 
> 标签：macros, clojure, try-catch

## 更新：

感谢到目前为止的所有帮助。这是我的新代码，它有效。但不完全是我想要的。
我需要它来返回 java 异常（不要问我为什么）。例子：

`(safe (/ 1 0))
#<ArithmeticException java.lang.ArithmeticException: Divide by zero>`
这就是我想要的样子。但是当我使用处理绑定等的其他代码子句时，我得到了 Clojure 异常：

```
(seefe [f(FileReader.(File. "C:/txtf.txt"))](. f read))
FileNotFoundException C:\txtf.txt (The system cannot find the file specified)  java.io.FileInputStream.open (:-2) 
```

我能做些什么来防止这种情况，并改为显示 Java 异常？

* * *

```
(defmacro safe [bindings & code]
  (if (list? bindings)
    `(try 
      (println "line 8: try")
      ~bindings
      (catch Throwable e# e#))

  (if (= (count bindings) 0)
     `(try ~code
           (catch Throwable e# e#))
     `(let ~(subvec bindings 0 2)
                              (try
                                (safe ~(subvec bindings 2) ~@code)
                                (catch Throwable e# e#)
                                (finally
                                 (. ~(bindings 0) close))))))) 
```

* * *

## 老的

我正在努力完成一项任务，但没有任何辅导是不可能的。我的老师希望我们在 1 周内自学 Clojure 并完成这项作业。我班上的每个人都被困住了，我们已经讨厌老师了，lmao。

好的，所以宏应该能够尝试代码，并返回结果或异常。它应该能够处理如下表达式：

```
(def v (safe [s (FileReader. (File. "file.txt"))] (. s read))) 
```

如果代码打开了任何文件流或诸如此类的东西，它应该在 finally 子句中关闭它们。这就是我到目前为止所得到的——我意识到它不起作用。

```
(defmacro safe [& body]
`(try ~@body 
 (catch Throwable e# e#)
 (finally 
   (if (. ~@body isInstance Closable) (. ~@body close))))) 
```

我得到的错误是：

> 无法解析符号：s 在此上下文中，正在编译：(NO_SOURCE_PATH:1)

我绝望了，所以我尝试了很多不同的东西，我尝试了：

```
to edit the macro:

(defmacro safe [& body]
`(try ~@body 
      (catch Throwable e# e#)
      (finally (if (. ~@body isInstance Closable) (. ~@body close))))) 
```

然后运行：

```
(safe (. (java.io.FileReader. (java.io.File. "C:/Users/Dyallo.L/Dropbox/DVK11/PROP/Clojure/txt.txt")) read)) 
```

结果是：

> 没有这样的变量：clooj.cemerick.pomegranate/Closable，编译：（NO_SOURCE_PATH：1）

有人提到了 WITH-OPEN 宏，但我想这不适用于我的通用宏。该宏不适用于打开文件，但如果是，它肯定应该关闭它们。

太糟糕了，你不会帮我一下 Stackoverflow-geniuses 吗？预先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:06:19.510

从示例中可以看出，传递给安全宏的第一种形式是名称表达式对的向量，`[a (open-something "/foo/bar") b (oopen-something-else)]`然后是一些使用这些符号的表达式。如果我正确解释了分配，结果将与 with-open 和各种 with-connection 宏非常相似。当然，在提交您的结果之前，值得仔细检查这个假设。如果宏应该在其主体中找到可关闭的值而至少对其结构有一些了解，那将更加困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:53:25.260

[`with-open`宏](https://github.com/clojure/clojure/blob/master/src/clj/clojure/core.clj#L3432)做同样的事情。

如果有变量（可以是多个）绑定到创建的对象，它会用关闭包装`body`to`try-catch`块。`finally`

```
(macroexpand-1 '(with-open [f (FileReader. (File. "1.txt"))]
                  (do this with f)
                  (do that with f)))

=>
(clojure.core/let
 [f (FileReader. (File. "1.txt"))]
 (try (clojure.core/with-open []
        (do this with f)
        (do that with f))
      (finally (. f clojure.core/close)))) 
```

如果没有绑定，那么它只返回正文

```
(macroexpand-1 '(with-open []
                  (do this with f)
                  (do that with f)))

=>
(do (do this with f)
    (do that with f)) 
```

**更新。**亚瑟已经解释了你问题的“例外”部分。

# c# - 如何将多个部分放在一个页面中？MVC4

> ID：14262722
> 
> 赞同：0
> 
> 时间：2013-01-10T16:34:03.843
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4, partial-views

我只是从 MVC4 开始，我试图将多个部分视图放在一个页面中，每个部分都假设有不同的数据，但它总是显示一个部分，每个部分只显示一个数据在按钮单击时显示。

这是视图代码：

```
 <section id="comments">
            <h3>Comments</h3>
             @{

                 foreach (MvcApplication4.Models.comment item in postComments)
                 {
                            <article>

                                 <p>@item.body</p>

              using (Html.BeginForm("Delete", null, new { id = item.ID ,pid = item.idPost}, FormMethod.Post))
                 {
                     @Html.HttpMethodOverride(HttpVerbs.Delete)
                      <button type="submit" class="button delete" >Delete</button>
                                          }

                  <section>
                        <button type="submit" class="button Edit"  id="edit" onclick="return showHide();"  >Edit</button>

                        <div  id="partial" hidden="hidden">
                              @Html.Partial("editCom",item)
                            </div>
                  </section>
               }
           }
             </article>

         }
       }
       </section> 
```

这是显示隐藏部分：

```
 <script type="text/javascript" language="javascript">// <![CDATA[
       function showHide() { 
           var ele = document.getElementById("partial");
           if(ele.style.display == "block") {
               ele.style.display = "none";
           }
           else {
               ele.style.display = "block";
           }
       }
       // ]]></script> 
```

这是部分：

```
@using MvcApplication4.Models
@model MvcApplication4.Models.comment       

    @{comment com = Model;
        }
            @using (Html.BeginForm("Edit", null,new{ pid=com.idPost,cid=com.ID}, FormMethod.Post))
                                              {
                <fieldset>
                           <div class="editor-label">
            @Html.LabelFor(x => com.user)
        </div>
        <div class="editor-field">
             @Html.LabelFor(x => com.user,Session["username"].ToString())
            @Html.ValidationMessageFor(x => com.user)
        </div>

        <div class="editor-label">
            @Html.LabelFor(x => com.email)
        </div>
        <div class="editor-field">
            @Html.EditorFor(x => com.email,com.email)
            @Html.ValidationMessageFor(x => com.email)
        </div>

        <div class="editor-label">
            @Html.LabelFor(x => com.url)
        </div>
        <div class="editor-field">
            @Html.EditorFor(x => com.url,com.url)
            @Html.ValidationMessageFor(x => com.url)
        </div>
         <div class="editor-label">
         @Html.LabelFor(x => com.body)
        </div>

         <div class="editor-field">
          @Html.EditorFor(x => com.body,com.body)
           @Html.ValidationMessageFor(x => com.body)
        </div>
                    <p>
            <input type="submit" value="save"  /> 

        </p>   
                </fieldset>
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:17:33.850

你的代码

```
<div  id="partial" hidden="hidden">
    @Html.Partial("editCom",item)
</div> 
```

确定哪些部分由按钮控制：

```
var ele = document.getElementById("partial");
if(ele.style.display == "block") {
    ele.style.display = "none";
}
.... 
```

您正在生成几个部分，所有部分都具有相同的“部分”ID，然后期望按钮确定要管理的 div 没有某种唯一 ID 通过`getElementById("partial")`

相反，您需要为每个生成一个唯一的 id `<div>`，然后在您的 javascript 方法中使用相同的 id`getElementById()`

# asp.net - 不使用 QueryString 将变量发送到网页

> ID：14262723
> 
> 赞同：0
> 
> 时间：2013-01-10T16:34:11.123
> 
> 标签：asp.net

我有一个可以将 Internet Explorer 启动到特定网站的应用程序。问题是，如果您在 URL 中包含问号，它会将其转换为 %20; 例如，如果我告诉它在 Internet Explorer 打开时转到： [http](http://www.domain.com/default.aspx?id=572) ://www.domain.com/default.aspx?id= 572，则网页将更改为[http://www.domain.com/default。 aspx%20;id=572](http://www.domain.com/default.aspx%20;id=572)并且 ASP.NET 无法呈现该页面。

我无法更改应用程序，据我所知，没有转义字符。

除了使用来自第三方应用程序的 QueryString 之外，还有其他方法可以将变量传递给 ASP.NET 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:39:11.780

尝试：

*   将参数放入路径中：
    *   `http://www.domain.com/default.aspx/id=572`， 或者
    *   `http://www.domain.com/default.aspx/572`， 或者
*   （Ab）使用[矩阵参数](https://stackoverflow.com/questions/401981/when-to-use-query-parameters-versus-matrix-parameters)：`http://www.domain.com/default.aspx;id=572`

无论哪种方式，您都需要更改 ASP.NET 服务来提取这些参数类型。

# php - 通过在 PHP 中调用带有参数的 URL 来获取 JSON 对象

> ID：14262732
> 
> 赞同：9
> 
> 时间：2013-01-10T16:34:32.583
> 
> 标签：php, json, moodle

我试图通过调用moodle url来获取json数据：

```
https://<moodledomain>/login/token.php?username=test1&password=Test1&service=moodle_mobile_app 
```

Moodle系统的响应**格式**是这样的：

```
{"token":"a2063623aa3244a19101e28644ad3004"} 
```

我尝试用 PHP 处理的结果：

```
if ( isset($_POST['username']) && isset($_POST['password']) ){

                 // test1                        Test1

    // request for a 'token' via moodle url
    $json_url = "https://<moodledomain>/login/token.php?username=".$_POST['username']."&password=".$_POST['password']."&service=moodle_mobile_app";

    $obj = json_decode($json_url);
    print $obj->{'token'};         // should print the value of 'token'

} else {
    echo "Username or Password was wrong, please try again!";
} 
```

结果是：**未定义**

**现在的问题是：** 如何处理moodle系统的json响应**格式？**任何想法都会很棒。

**[更新]：** 我通过**curl使用了另一种方法，并在****php.ini**中更改了以下行：*extension=php_openssl.dll*，*allow_url_include = On*，但现在出现错误：**注意：**尝试获取非属性目的。这是更新的代码：

```
function curl($url){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
}

$moodle = "https://<moodledomain>/moodle/login/token.php?username=".$_POST['username']."&password=".$_POST['password']."&service=moodle_mobile_app";
$result = curl($moodle);

echo $result->{"token"}; // print the value of 'token' 
```

谁能给我建议？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-10T16:37:03.763

json_decode() 需要一个字符串，而不是 URL。您正在尝试解码该 url（并且 json_decode()**不会**执行 http 请求来为您获取 url 的内容）。

您必须自己获取 json 数据：

```
$json = file_get_contents('http://...'); // this WILL do an http request for you
$data = json_decode($json);
echo $data->{'token'}; 
```

# r - 合并 R 中的重复行并添加包含重复 ID 的新列

> ID：14262741
> 
> 赞同：9
> 
> 时间：2013-01-10T16:35:00.033
> 
> 标签：r, duplicates, aggregate

我有一个看起来像这样的数据框：

```
Chr start   stop    ref alt Hom/het ID  
chr1    5179574 5183384 ref Del Het 719  
chr1    5179574 5184738 ref Del Het 915  
chr1    5179574 5184738 ref Del Het 951  
chr1    5336806 5358384 ref Del Het 376  
chr1    5347979 5358384 ref Del Het 228 
```

我想合并任何重复的行，合并最后一个 ID 列，以便所有 ID 都在一行/列中，如下所示：

```
Chr start   stop    ref alt Hom/het ID  
chr1    5179574 5183384 ref Del Het 719  
chr1    5179574 5184738 ref Del Het 915, 951 
chr1    5336806 5358384 ref Del Het 376  
chr1    5347979 5358384 ref Del Het 228 
```

我发现了人们删除重复项并对列求和的示例，但我只想将所有 ID 与重复区域组合在一个列表中的单个列中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T16:43:16.817

一些电话`aggregate()`应该可以解决问题。

这是一个在列表对象中收集 ID 的选项：

```
(df1 <- aggregate(df[7], df[-7], unique))
#   Chr   start    stop ref alt Hom.het       ID
# 1 chr1 5179574 5183384 ref Del     Het      719
# 2 chr1 5179574 5184738 ref Del     Het 915, 951
# 3 chr1 5336806 5358384 ref Del     Het      376
# 4 chr1 5347979 5358384 ref Del     Het      228 
```

这是一个将它们收集在字符向量中的方法：

```
df2 <- aggregate(df[7], df[-7], 
                 FUN = function(X) paste(unique(X), collapse=", ")) 
```

比较两个选项的结果：

```
str(df1$ID)
# List of 4
#  $ 0: int 719
#  $ 3: int [1:2] 915 951
#  $ 7: int 376
#  $ 8: int 228

str(df2$ID)
# chr [1:4] "719" "915, 951" "376" "228" 
```

# sql - SQL查询问题，连接表达式错误

> ID：14262742
> 
> 赞同：0
> 
> 时间：2013-01-10T16:35:02.783
> 
> 标签：sql, ms-access

我有下面的查询导致以下错误：

> 错误 3296（访问）
> 
> Join 操作中的 ON 语句不完整或包含太多表。您可能希望将 ON 表达式放在 WHERE 子句中

```
SELECT
    TBLCATB.Markis AS [Account #], TBLCATB.[Group Number],
    Max(TBLCATB.Name) AS [Account Name], Sum(TBLCATB.Current) AS [Current],
    Sum(TBLCATB.Thirty) AS Thirty, Sum(TBLCATB.Sixty) AS Sixty,
    Sum(TBLCATB.Ninety) AS Ninety, Max(TBLCATB.[Company Code]) AS [Company Code]
FROM
    TBLCATB
    LEFT JOIN asc_OracleMarkis
        ON CLng(TBLCATB.Markis)=asc_OracleMarkis.Markis
WHERE
    (((TBLCATB.LOB) Like "g*" Or (TBLCATB.LOB) Like "l*" Or
      (TBLCATB.LOB) Like "pb*")) AND
    CLng(tblcatb.markis) not in (select acctnumber from sb_acctinfo)
GROUP BY
    TBLCATB.Markis, TBLCATB.[Group Number]
HAVING
    (((Sum(TBLCATB.Ninety))<>0))
ORDER BY
    Sum(TBLCATB.Ninety) DESC; 
```

我怎样才能避免这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:40:31.703

这看起来像 MS Access 语法，您缺少一个结束括号：

```
SELECT TBLCATB.Markis AS [Account #], 
    TBLCATB.[Group Number], 
    Max(TBLCATB.Name) AS [Account Name], 
    Sum(TBLCATB.Current) AS [Current], 
    Sum(TBLCATB.Thirty) AS Thirty, 
    Sum(TBLCATB.Sixty) AS Sixty, 
    Sum(TBLCATB.Ninety) AS Ninety, 
    Max(TBLCATB.[Company Code]) AS [Company Code]
FROM TBLCATB 
LEFT JOIN asc_OracleMarkis 
    ON CLng(TBLCATB.Markis)=asc_OracleMarkis.Markis
WHERE 
(
    (TBLCATB.LOB Like "g*" Or TBLCATB.LOB Like "l*" Or TBLCATB.LOB Like "pb*") 
    AND CLng(tblcatb.markis) not in (select acctnumber from sb_acctinfo)
) <-- this is missing
GROUP BY TBLCATB.Markis, TBLCATB.[Group Number]
HAVING Sum(TBLCATB.Ninety)<>0
ORDER BY Sum(TBLCATB.Ninety) DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:51:22.767

而不是使用 Clng 尝试使用 CAST 或 CONVERT

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:04:12.543

如果您的表是 SQL-Server 表。使您的查询成为 Pass-Through 查询并用 TSQL 语法编写。

参见：[通过查询访问sql server](http://www.google.com/search?q=pass+through+query+access+sql+server)

# c# - 为什么finally没有被执行？

> ID：14262744
> 
> 赞同：6
> 
> 时间：2013-01-10T16:35:14.050
> 
> 标签：c#, .net, exception, try-catch, try-finally

我的假设是只要程序正在运行，finally 块总是会被执行。但是，在这个控制台应用程序中，finally 块似乎没有被执行。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            try
            {
                throw new Exception();
            }
            finally
            {
                Console.WriteLine("finally");
            }
        }
    }
} 
```

输出

![结果](../Images/1f811eb3b43a30d31d8dae4c62a5bfed.png)

注意：当抛出异常时，windows 询问我是否要结束应用程序，我说“是”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T16:38:09.837

它实际上执行了。只是你没有注意到。只是当你看到`Windows is checking for a solution to the problem`点击`Cancel`并看到它。

![在此处输入图像描述](../Images/e31a7b0739f94cfbe6d2dfc2fc68d00b.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:38:32.277

您可能正在调试，当您单击“否”时，调试器正在暂停执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T17:24:01.673

当您得到“ConsoleApplication1”已停止响应时，您有两个选择。

![Windows 错误报告对话框](../Images/973535aa731df240d4a922d6b1695237.png)

如果按取消，则允许未处理的异常继续，直到最终终止应用程序。这允许`finally`块执行。如果您不按取消，则[Windows 错误报告](http://en.wikipedia.org/wiki/Windows_Error_Reporting)会暂停进程，收集小型转储，然后终止应用程序。这意味着该`finally`块没有被执行。

或者，如果您以更高的方法处理异常，您肯定会看到该`finally`块。例如：

```
static void unhandled()
{
    try
    {
        throw new Exception();
    }
    finally
    {
        Console.WriteLine("finally");
    }
}

static void Main(string[] args)
{
    AppDomain.CurrentDomain.UnhandledException += UnhandledExceptionTrapper;
    try
    {
        unhandled();
    }
    catch ( Exception )
    {
        // squash it
    }
} 
```

总是给出“最后”的输出

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T16:39:30.513

从命令行运行时。就在 Windows 尝试优雅地单击结束应用程序`no`或`cancel`应用程序没有响应时。 ![在此处输入图像描述](../Images/8b9552e9955115971f0015240e56f0d9.png)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-01-10T16:40:07.383

异常会在堆栈中冒泡，直到找到处理程序。如果没有，则程序退出。在您的场景中就是这种情况......没有处理程序，因此程序在到达 finally 块之前退出。

# file-upload - S3 假脱机桶/匿名 PUT

> ID：14262745
> 
> 赞同：3
> 
> 时间：2013-01-10T16:35:14.953
> 
> 标签：file-upload, amazon-s3, cors, spool

我想使用 S3 CORS 和密钥过期来创建一个“假脱机桶”。此线轴桶应支持以下内容：

*   前端代码（比如 jQuery）应该能够`HTTP PUT`任意命名存储桶的键
*   给定键名，后端代码（例如 Python/boto）应该能够读取和删除这些键
*   密钥应在 X 天后自行过期

这究竟应该如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:35:14.953

经过一番折腾，这就是我发现的：

*   创建存储桶
*   *为每个人*提供*上传/删除*和*编辑权限*（使用 API 应该很容易，我的情况使用控制台更容易）。
*   设置以下（或类似的）[CORS](http://docs.amazonwebservices.com/AmazonS3/latest/dev/cors.html)策略：

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>*.example.com</AllowedOrigin>
        <AllowedMethod>PUT</AllowedMethod>
        <MaxAgeSeconds>3000</MaxAgeSeconds>
        <AllowedHeader>*</AllowedHeader>
    </CORSRule>
</CORSConfiguration> 
```

*   设置对象[生命周期](http://docs.amazonwebservices.com/AmazonS3/latest/dev/object-lifecycle-mgmt.html)策略以符合您的意愿（再次，使用 API 很容易，在我的情况下使用控制台更容易）
*   执行 PUT 时，添加 header `x-amz-acl: bucket-owner-full-control`。例如，在 CoffeeScript 和 jQuery 中，您的 PUT 将如下所示：

```
$.ajax http://my_spool_bucket.s3.amazonaws.com,
    type: "PUT"
    data: "contents of new object"
    headers:
        "x-amz-acl": "bucket-owner-full-control" 
```

而已。沉浸在高可用、自删除、兼容 CORS、便宜且简单的 HTTP 假脱机空间的荣耀中。要记住的一件重要事情：任何客户端都可以覆盖任何密钥；您应该进行相应的设计（我使用加密安全生成的密钥）。

# python - 不同版本python的问题

> ID：14262751
> 
> 赞同：1
> 
> 时间：2013-01-10T16:35:24.873
> 
> 标签：python, windows, version

已提出与此类似的问题，但我还没有看到对我有帮助的解决方案。

我正在运行 Windows 7，并且安装了两个版本的 python，3.3 和 2.7。Python 3.3 是我安装的第一个版本，我能够从桌面（而不是命令行）运行脚本。我安装了 python 2.7，以便以后可以使用 numpy、scipy 和 matplotlib，但我发现我桌面上的所有脚本都默认为 python 2.7。由于我在 3.3 中编码，这导致了一些问题。

我可以通过右键单击脚本图标、浏览程序、导航到我的 C: 驱动器中的 python 3.3 文件并选择该目录中的空闲来解决此问题。但后来我发现我无法使用完全相同的过程在 python 2.7 中运行这些脚本。

不幸的是，我根本不太了解命令行编程，而且似乎大多数答案都是针对该解决方案的。理想情况下，我想指定要从桌面运行脚本的python，或者可能在我编辑脚本时。

如果相关，我正在运行 eric python IDE，版本 5。

我很乐意阅读一些相当技术性和冗长的东西（如博客文章或 PDF），但如果它不针对初学者，它对我没有多大帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:37:58.077

[Windows Python 启动器](http://www.python.org/dev/peps/pep-0397/)可以自动从文件中的[shebang](http://www.python.org/dev/peps/pep-0397/)中检测 Python。

启动您的 Python 3.3 脚本

```
#!/usr/bin/env python3 
```

和你的 Python 2.7 脚本

```
#!/usr/bin/env python2.7 
```

如果你想使用[系统默认的 Python 版本](http://docs.python.org/3/using/windows.html#customizing-default-python-versions)，你可以用

```
#!/usr/bin/env python 
```

这也适用于几乎所有的 Unix 系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:16:42.770

The method I use is to have several cmd.exe shortcuts on my desktop, each pointing at a different runpython.bat file, one for each version of python. Here is one command example from a shortcut:

```
%comspec% /k "C:\QA\Python\QAPYTH3\runpython.bat" 
```

Here is a typical runpython.bat:

```
@SET PATH=%PATH%;"C:\Python32"
@SET PYTHONPATH=C:\Python32\Lib

@ASSOC .py=Python.File
@ASSOC .pyc=Python.CompiledFile
@ASSOC .pyo=Python.CompiledFile
@ASSOC .pyw=Python.NoConFile

@FTYPE Python.CompiledFile="C:\Python32\python.exe" "%%1" %%*
@FTYPE Python.File="C:\Python32\python.exe" "%%1" %%*
@FTYPE Python.NoConFile="C:\Python32\pythonw.exe" "%%1" %%*
@SET PATHEXT=.py;%PATHEXT% 
```

Of course you don't have to call your .bat files the same as I have. Just adjust to suite your setup.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T16:40:36.167

也许你应该选择另一个 IDE，比如[PyCharm](http://www.jetbrains.com/pycharm/)，它可以轻松管理不同版本的 python（并提供大量其他有用的功能）。也许免费的 PyDev 也可以做到。

此外，使用[virtualenv](http://www.virtualenv.org/en/latest/) — 是这里最好的解决方案，但这是一个“艰难的方式”。

# linux - 在 ubuntu 中安装 octave 包

> ID：14262754
> 
> 赞同：11
> 
> 时间：2013-01-10T16:35:36.613
> 
> 标签：linux, ubuntu, package, octave, sudo

任何人都可以帮助我解决这个错误吗？

```
octave:4> pkg install signal-1.2.0.tar.gz
error: the following dependencies where unsatisfied:
   signal needs optim >= 1.0.0
 signal needs specfun >= 0.0.0
 signal needs control >= 2.2.3
 signal needs general >= 1.3.2
octave:4> pkg install optim-1.2.2.tar.gz
error: the following dependencies where unsatisfied:
   optim needs miscellaneous >= 1.0.10
 optim needs struct >= 1.0.10
octave:4> pkg install struct-1.0.10.tar.gz
make: /usr/bin/mkoctfile: Command not found
make: *** [fields2cell.oct] Error 127
'make' returned the following error: make: Entering directory `/tmp/oct-fDBs5k/struct-1.0.10/src'
/usr/bin/mkoctfile -s fields2cell.cc
make: Leaving directory `/tmp/oct-fDBs5k/struct-1.0.10/src'
error: called from `pkg>configure_make' in file /usr/share/octave/3.6.2/m/pkg/pkg.m near line 1391, column 9
error: called from:
error:   /usr/share/octave/3.6.2/m/pkg/pkg.m at line 834, column 5
error:   /usr/share/octave/3.6.2/m/pkg/pkg.m at line 383, column 9 
```

我需要安装信号包，但我必须下载其他的才能工作，但我注意到它在安装结构包时卡住了。

@edit 尝试安装 misc~ 包时出现相同的错误。

```
octave:5> pkg install miscellaneous-1.2.0.tar.gz
error: the following dependencies where unsatisfied:
   miscellaneous needs general >= 1.3.1
octave:5> pkg install general-1.3.2.tar.gz
make: /usr/bin/mkoctfile: Command not found
make: *** [__exit__.oct] Error 127
'make' returned the following error: make: Entering directory `/tmp/oct-CA6o4U/general/src'
/usr/bin/mkoctfile __exit__.cc
make: Leaving directory `/tmp/oct-CA6o4U/general/src'
error: called from `pkg>configure_make' in file /usr/share/octave/3.6.2/m/pkg/pkg.m near line 1391, column 9
error: called from:
error:   /usr/share/octave/3.6.2/m/pkg/pkg.m at line 834, column 5
error:   /usr/share/octave/3.6.2/m/pkg/pkg.m at line 383, column 9 
```

@edit 附加信息：

```
octave:6> which mkoctfile
`mkoctfile' is a function from the file /usr/share/octave/3.6.2/m/miscellaneous/mkoctfile.m 
```

我不知道该怎么做..

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-10T17:07:22.627

您需要安装`mkoctfile`. 根据您的 ubuntu 版本，这将位于不同的包中。它曾经是 in`octave-pkg-dev`但现在是 on `liboctave-dev`。

Ubuntu 和 Debian 将其作为单独的包放置，因为仅当您想自己构建包时才需要它。他们希望您使用他们打包的 Octave 包 ( `sudo apt-get install octave-signal`)。他们的版本将落后于实际版本，但他们分发的 Octave 版本也是如此。这就是为稳定付出的代价。

# python - Python中的多重逻辑回归

> ID：14262755
> 
> 赞同：2
> 
> 时间：2013-01-10T16:35:44.060
> 
> 标签：python, regression

我有一个这样的数据集：

```
0,1,0,1,1,0,0,1,5
1,1,0,1,1,0,0,1,3
1,1,0,0,1,0,0,1,1
0,1,1,0,1,1,0,0,4 
```

我正在寻找一种在python中运行逻辑回归的方法，它使用几个离散值（0或1）来预测一个数值（1-5之间）。这似乎很有用，但它假设预测变量也是离散的：[http ://www.mblondel.org/tlml/logreg.py.html#](http://www.mblondel.org/tlml/logreg.py.html#)

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:24:21.193

如果在 R 中完成工作（通过 rpy2、pyRserve 或 pyper 之一）是一种选择，您可以这样做来完成工作。如果对要使用的统计方法有疑问，这个“交叉验证”是一个更好的提问地方。

# sql-server-2008 - 如何使用 powerdesigner 15 创建用户定义的表类型

> ID：14262757
> 
> 赞同：0
> 
> 时间：2013-01-10T16:35:48.473
> 
> 标签：sql-server-2008, user-defined-types, powerdesigner

我们在 PD 15 PDM 上维护整个数据库模式，包括过程、触发器、用户定义的数据类型、函数等。我们使用的 RDBMS 是 SQL Server 2008 R2，它支持用户定义的表类型，例如。（创建类型 [dbo].[TableIDS] AS TABLE（ID int not null ））。这对于可重用性非常有用。但是我找不到在 PDM 中创建这种类型的方法。它必须在“域”部分的某个地方，但我无法弄清楚。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:59:47.593

在 15.3 中，您似乎可以创建 Table 类型的抽象数据类型。

# javascript - runat="server" 破坏了我的 jQuery - datapicker

> ID：14262758
> 
> 赞同：1
> 
> 时间：2013-01-10T16:35:50.597
> 
> 标签：javascript, asp.net, runatserver

runat="server" 正在破坏我的 jquery。我有两个输入，但出于测试目的，只在其中一个中添加了 runat="server" 。实际上，我需要添加两者。

您可以在下面找到触发 datetimepicker 的 JS 脚本：注意：dateTo 已设置 runat="server" 并尝试更改 JS 尝试获取其 ID 的方式，但仍然无法正常工作。

```
<script>
        $(function(){
            $("#dateFrom").datetimepicker();
            $("#<%=dateTo%>").datetimepicker();
        });
</script> 
```

在这里，您可以使用 runat="server" 或不使用 asp.net 代码找到 HTML 输入。

```
 <tr>
        <td>
             <input type="text" id="dateFrom" name="dateFrom" value="" class="dateFrom" />
        </td>
        <td >
             <input type="text" id="dateTo" name="dateTo" runat="server" value="" class="dateTo" /> 
        </td>
    </tr> 
```

有没有人有任何想法，提示......？谢谢你

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T16:37:15.447

用于`ClientID`获取`Id`服务器端控件的生成：

```
$("#<%=dateTo.ClientID%>").datetimepicker(); 
```

*ASP.NET 将生成一个不同于*服务器端控件属性的特定`id`属性，因此您需要使用生成的值才能从 jQuery 访问它。*`id`*

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T16:55:03.183

由于您提供了类名，我建议简单地使用这些。

```
$(function(){
    $(".dateTo, .dateFrom").datetimepicker();
}); 
```

或者，您可以为表单上的任何“日期”字段提供一个“日期”类并使用它：

```
$(function(){
    $(".date").datetimepicker();
}); 
```

这是客户端验证的常见模式，还允许您通过 CSS 样式提供上下文线索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T16:59:49.270

如果您使用的是 .NET 4，则可以将`ClientIDMode`属性设置为`Static`. 这将防止框架更改元素的 ID：

```
<input type="text" id="dateTo" name="dateTo" runat="server" 
       ClientIDMode="Static" class="dateTo" value=""  /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T16:37:04.953

添加时，ASP.NET 会将输入视为服务器端控件`runat=server`，这将导致这些输入的标识符经过转换，以便它们以容器前缀（类似`ctl00_`）开头，从而“破坏”您的 jQuery 选择器。

如果您使用的是 .NET 4，则可以通过更改[ClientIDMode](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)来禁用这些转换。否则，您将需要在选择器中包含前缀，或者将选择器重构为独立于 ID 并且通过其他方式进行选择时有所不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T16:39:20.873

使用它来获取服务器控件的正确客户端 ID

```
$('[id$=dateTo]').datetimepicker(); 
```*

# gnuplot - 从两个不同的数据集划定两种不同的方式

> ID：14262760
> 
> 赞同：8
> 
> 时间：2013-01-10T16:35:53.953
> 
> 标签：gnuplot

我需要从 .csv 文件和空格分隔的文件中绘制数据。两组数据都需要出现在同一个图上。

数据1.dat

```
 #t   y
  1   1
  2   1
  3   1 
```

和

数据2.csv

```
 #t,y
  1,2
  2,2
  3,2 
```

通常，如果两者都是 .csv 集，我会执行以下操作：

```
 set datafile separator ','
 plot 'data1.csv' using 1:2,'data2.csv' using 1:2 
```

有没有办法在情节语句中包含分隔字符的设置？

```
plot 'data1.dat' using 1:2,'data2.csv' using datafile separator ',' using 1:2 
```

以上不起作用，我尝试了上述代码的许多不同变体......我没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T19:58:56.433

AFAIK，没有办法指定分隔符。然而，如果你在一个 POSIX 兼容的环境中（并且你的 gnuplot 支持管道——大多数都支持），你可以`awk`很容易地完成这项工作：

```
plot 'data1.dat' using 1:2,\
     "<awk -F, '{print $1,$2}' data2.csv" using 1:2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-24T16:28:42.093

`set datafile separator`在你的情况下，你可以给多个字符`", "`。然后将所有这些*单独*视为分隔符。

如果您的数据文件的格式非常困难：gnuplots`using`说明符接受 libC`scanf()`格式字符串

```
plot "-" us 1:2 "%lf,%lf"
1,2
2,3
3,4
e 
```

您可以为`plot`命令中的每个文件提供不同的格式字符串。请注意，gnuplot 仅接受“双”fp 数字作为输入，因此您必须使用`%le`or`%lf`说明符。

检查`help using examples`，[这里](http://www.cplusplus.com/reference/cstdio/scanf/)是格式的完整描述。

# java - OutputStream 作为接口

> ID：14262761
> 
> 赞同：10
> 
> 时间：2013-01-10T16:35:55.590
> 
> 标签：java, interface, io

为什么`java.io.OutputStream`不建模为接口而不是抽象类？

我想，一个接口可以证明对单元测试很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:51:32.937

实际上，java.io.OutputStream（与 java.io.InputStream 相同）使用了[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)。与问题相关，以下是来自（[Head First Design Patterns](https://rads.stackoverflow.com/amzn/click/com/0596007124) page 93）的回复：

> 关键是**装饰器必须与它们要装饰的对象具有相同的类型**。所以这里我们使用继承来实现类型匹配，但我们没有使用继承来获取行为。
> 
> 所以这就是为什么在这种情况下我们更喜欢继承（AbstracClass）而不是接口（多态）。但请注意，在大多数其他情况下，原则是相反的：“**优先组合（接口）而不是继承（抽象类）** ”。

![在此处输入图像描述](../Images/010139c15c03fc000aae71cbc25c5d8d.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:41:24.003

一些方法已经实现。这对于接口是不可能的。

```
close() 
void flush() 
void write(byte[] b) 
void write(byte[] b, int off, int len) 
```

已经使用默认实现实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T16:41:38.193

javadoc给出了一个提示：

> 需要定义 OutputStream 子类的应用程序必须始终提供至少一个写入一个字节输出的方法。

（即`void write(int b) throws IOException`）

如果你看它的实际代码，`write()`这个基础抽象类的默认其他方法使用你需要实现的唯一方法。

此外，输出流可能未链接到实际资源（`ByteArrayOutputStream`例如）：因此，此类也具有默认实现，`.close()`并且`.flush()`什么都不做，并且只需要被具有实际资源的流覆盖。

至于测试目的，单元测试的唯一区别实际上是您需要`extends`而不是`implements`，并且不要忘记覆盖您需要的方法。或使用模拟库（例如 mockito、jmock 或...）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T16:42:25.807

它可能是一个抽象类，因为除了它的一个方法之外，所有方法都是具体的（实现的）......并且您可以在需要其他东西（用于测试）时对其进行子类化，或者在某些测试情况下也可以模拟它...... .

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T16:38:53.230

它被制作为抽象类，因此可以将其视为接口。

关于`OutputStream`不同`interface`的类提供方法的默认实现`write`。

# jquery - 检查文本字段是否为空

> ID：14262762
> 
> 赞同：0
> 
> 时间：2013-01-10T16:35:59.690
> 
> 标签：jquery

我有这个切换密码可见性的“显示密码”复选框，它工作正常，但我只想在密码字段为空时禁用该复选框并仅在输入某个时间时启用。

[http://jsfiddle.net/aaK9E/2/](http://jsfiddle.net/aaK9E/2/)

```
var showPass=false;
$('#c').change(function(){
    showPass = ($('#c:checked').length>0);
    if (showPass){
        $('#p').hide();
        $('#t').show();
    }else{
        $('#t').hide();
        $('#p').show();
    }
});

$('#p').change(function(){
    if (!showPass) $('#t').val($('#p').val());
});
$('#t').change(function(){
    if (showPass) $('#p').val($('#t').val());
}); 
```

我尝试了 keyup 和 change 但如果用户有时写然后删除它也无济于事，复选框将保持启用状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:50:01.950

试试这个：http: [//jsfiddle.net/aaK9E/51/](http://jsfiddle.net/aaK9E/51/)

```
var showPass = false;
$('#c').attr('disabled', 'disabled'); // disabled on doc ready
$('#c').change(function () {
   showPass = ($('#c:checked').length > 0);
   if (showPass) {
       $('#p').hide();
       $('#t').show();
   } else {
       $('#t').hide();
       $('#p').show();
   }
});

$('#p').keypress(function () { // use keypress instead of change
   $('#c').removeAttr('disabled'); // remove the attr 'disabled'
   if (!showPass) $('#t').val($('#p').val());
});
$('#t').change(function () {
  if (showPass) $('#p').val($('#t').val());
}); 
```

`backspace is done`如果密码字段没有任何值，您可以更改为此：

```
$('#p').keyup(function () { 
  $('#c').removeAttr('disabled');
  if (!showPass) {
    $('#t').val($('#p').val());
  }
  if ($(this).val() == '') { // this will check the val if there is not
    $('#c').attr('disabled', 'disabled'); it will disable it again.
  }
}); 
```

如果使用lates jquery：

```
$('#p').on('keyup', function () { // this '.on()' requires latest jquery
  $('#c').removeAttr('disabled');
  if (!showPass) {
    $('#t').val($('#p').val());
  }
  if ($(this).val() == '') { // this will check the val if there is not
    $('#c').attr('disabled', 'disabled'); it will disable it again.
  }
}); 
```

如果需要`try to use latest jquery`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:51:10.623

使用以下代码。[JSFiddle 演示](http://jsfiddle.net/aaK9E/49/)

无论状态如何，它将禁用（即在文本框或密码框中输入）

```
$('#p, #t').keyup(function(){
  if ($(this).val() != "") {
    Enable();
  }
  else
  {
    Disable();
  }
});

function Enable() {
 $("#c").removeAttr("disabled");
}

function Disable() {
  $("#c").attr("disabled", true);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:43:22.847

您可以使用 keydown 来检查该框是否为空：

```
$('#p').keydown(function(){
  if( $(this).val() == "" ){
      $('#c').attr("disabled", true);
  }else{
      $('#c').removeAttr("disabled");
  }
}); 
```

在按下键时，它会检查文本框是否为空，如果是，则禁用复选框。然后你只需要执行 if(){ 检查页面加载的初始状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T17:13:02.800

试试这个：- [http://jsfiddle.net/aaK9E/52/](http://jsfiddle.net/aaK9E/52/) 当密码字段为空时，这也将首次工作。

```
<input type="text" size="50" id="t" />
<input type="password" size="50" id="p" /><br />
<input type="checkbox" id="c" disabled="true">Show Password

var showPass=false;
$('#c').change(function(){
    showPass = ($('#c:checked').length>=0);
    if (showPass){
        $('#p').hide();
        $('#t').show();
    }else{
        $('#t').hide();
        $('#p').show();
    }
});

$('#p').bind("change keyup keypress keydown",function(){
    if (!showPass) $('#t').val($('#p').val());
  if($(this).val()=='')
    $('#c').attr("disabled","true");
  else
    $('#c').removeAttr("disabled");
});
$('#t').bind("change keyup keypress keydown",function(){
    if (showPass) $('#p').val($('#t').val());
    if($(this).val()=='')
    $('#c').attr("disabled","true");
  else
    $('#c').removeAttr("disabled");
}); 
```

# c# - 合并word文档时，每个文档后都有一个空白页

> ID：14262765
> 
> 赞同：0
> 
> 时间：2013-01-10T16:36:08.430
> 
> 标签：c#, ms-word

应用程序是 WPF 和 C# 的组合，我在下面遇到问题的所有代码都在 C# 部分......

我有一个应用程序可以生成一些 HTML 并使用 MS Word Interop 将其保存为 PDF。如果用户选择这样做，我想让用户选择包含他们从我的应用程序中单独创建的页眉或页脚。我已经设法做到了这一点，但我面临的问题是这个。如果在插入下一个文档时任何文档在页面底部结束，则中间有一个空白页。

粗略的例子：

*   封面（不打到页尾）
*   从我的应用程序生成的东西（点击页面底部）
*   空白页
*   页脚（位于页面底部）
*   空白页

因此，如果有人可以看看我是如何做到这一点的，并让我知道我的逻辑有什么问题，或者给我一个提示，让我知道在哪里看会很棒。谢谢大家，如果我需要提供更多说明，请告诉我。

这段代码的灵感来自[这个 SO question](https://stackoverflow.com/questions/2512656/merge-word-documents-office-interop-net-keeping-formatting)

```
//Itterate through all wordFiles that have been passed in, in a string array
for ( int i = 0; i < wordFiles.Length; i++)
{
   //Get the current word file
   string file = wordFiles[i];
   //Insert the file
   wDoc.Application.Selection.Range.InsertFile(file,
                                               ref oMissing, 
                                               ref oMissing, 
                                               ref oMissing, 
                                               ref oFalse);
   if(i != 0)
      //if not add a page break
      wDoc.Application.Selection.Range.InsertBreak(ref wdPageBreak);

   // Moves to the end of the current page 
   // (Same funcionality of pressing the "End" Key)
   wDoc.Application.Selection.EndKey(ref wdStory, ref oMissing);
} 
```

# d - 搜索字符串中多个字符串或字符的第一次出现的函数

> ID：14262766
> 
> 赞同：1
> 
> 时间：2013-01-10T16:36:12.500
> 
> 标签：d

stdlib 中是否有任何内置用于多字符串搜索的内容。我不想重新发明轮子。std.string.indexOf 处理单个字符串和字符搜索，但这就是我所看到的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T18:00:48.887

> 您可能会作弊，只是在大海捞针上使用 .ptr 并使用指针算法找到结果切片以快速获取索引，但这仅适用于超酷的坏蛋

真正的问题是：您想要*索引*还是*计数*？由于我们谈论的是（unicode）字符串，因此存在根本区别。

`countUntil`，与 相反`indexOf`，返回“popFronts 的数量”，而不是数组索引。如果你的字符串包含 unicode 字符（你应该总是假设），那么它会吹到你的脸上：

来自[http://dlang.org/phobos/std_algorithm.html#countUntil](http://dlang.org/phobos/std_algorithm.html#countUntil)

```
assert(std.algorithm.countUntil("日本語", "本語") == 1);
assert(std.string.indexOf("日本語", "本語") == 3); 
```

也就是说，这应该是更有效的。它只进行一次搜索：

```
void main()
{
    auto needles = [ "abc", "def", "ghi", "jkl" ];
    auto haystack = "日本語abcakllgfjekwralv";

    auto intermediary1 = find(haystack, "abc", "def", "ghi", "jkl")[0]; //"abcakllgfjekwralv""
    auto intermediary2 = haystack[0 .. haystack.length - intermediary1.length]; //"日本語"
    auto index = intermediary2.length;     // "日本語".length => 9
    auto count = intermediary2.walkLength; // "日本語" => 3
    assert(index == 9);
    assert(count == 3);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T17:23:09.187

`std.algorithm.countUntil`是查找索引的常用方法，但它莫名其妙地不接受多针。不过，其他几个 std.algorithm 函数也可以。这应该有效：

导入 std.algorithm，std.stdio；

```
void main()
{
    auto needles = [ "abc", "def", "ghi", "jkl" ];
    auto haystack = "fdjwabcakllgfjekwralv";

    auto pos = haystack.countUntil(find(haystack, "abc", "def", "ghi", "jkl")[0]);
    writeln(pos); // outputs: 4
} 
```

find 将找到匹配的针并返回一个元组，其中包含找到到字符串末尾的位置切片和匹配的针的索引。获得切片后，您可以使用 countUntil 查找其索引。

不幸的是，它确实需要两次搜索。您可能会作弊，只是在大海捞针上使用 .ptr 并使用指针算法找到结果切片以快速获取索引，但这仅适用于超酷的坏蛋。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T16:50:42.300

由于您没有给出您确切需要的示例（带有输入示例和预期输出示例），我只想指出您可能想了解有关[std.algorithm](http://dlang.org/phobos/std_algorithm.html#find)模块的更多信息。您可以使用它执行各种搜索，而不仅仅是字符串......

# javascript - javascript - 用空格替换破折号（连字符）

> ID：14262770
> 
> 赞同：66
> 
> 时间：2013-01-10T16:36:17.513
> 
> 标签：javascript, regex

我一直在寻找这个，虽然我发现了许多将空格更改为破折号（连字符）的响应，但我还没有找到任何相反的方向。

最初我有：

```
var str = "This-is-a-news-item-"; 
```

我尝试将其替换为：

```
str.replace("-", ' '); 
```

并简单地显示结果：

```
alert(str); 
```

现在，它什么也没做，所以我不知道该转向哪里。我尝试颠倒一些现有的用破折号替换空格的方法，但这也不起作用。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2013-01-10T16:41:43.383

这修复了它：

```
let str = "This-is-a-news-item-";
str = str.replace(/-/g, ' ');
alert(str); 
```

您的代码有两个问题：

1.  首先，[String.replace()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)不改变字符串本身，它*返回*一个改变的字符串。
2.  其次，如果你将一个字符串传递给 replace 函数，它只会替换它遇到的第一个实例。这就是为什么我传递了一个带有标志的[正则表达式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions)`g`，用于“全局”，以便所有实例都将被替换。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-10T16:38:26.353

`replace()`返回一个新字符串，并且不修改原始字符串。你需要做

```
str = str.replace(/-/g, ' '); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-10T16:37:38.677

我认为您面临的问题几乎是这样的：-

```
str = str.replace("-", ' '); 
```

您需要将替换结果重新分配给`str`，以查看反映的更改。

来自[MSDN Javascript 参考](http://msdn.microsoft.com/en-us/library/ie/t0kbytzc%28v=vs.94%29.aspx)：-

> replace 方法的结果是指定替换完成后的 stringObj 副本。

要替换所有`-`，您需要使用`/g`带有正则表达式参数的修饰符：-

```
str = str.replace(/-/g, ' '); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-10T16:40:30.980

```
var str = "This-is-a-news-item-";
while (str.contains("-")) {
  str = str.replace("-", ' ');
}
alert(str); 
```

我发现 str.replace() 的一次使用只会替换第一个连字符，所以我在输入字符串仍然包含任何连字符时循环，并将它们全部替换。

[http://jsfiddle.net/LGCYF/](http://jsfiddle.net/LGCYF/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-10T16:42:06.863

除了已经给出的答案之外，您可能还想替换所有出现的地方。为此，您需要一个正则表达式，如下所示：

```
str = str.replace(/-/g, ' ');  // Replace all '-'  with ' ' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-19T07:53:03.653

[`replaceAll()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replaceAll)结合使用[`trim()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/trim)可能会满足您的需求。

```
const str = '-This-is-a-news-item-';
console.log(str.replaceAll('-', ' ').trim());
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-07-09T19:43:04.497

想象一下，您以双破折号结束，并希望用单个字符而不是替换字符的双倍替换它们。您可以只使用数组拆分和数组过滤器和数组连接。

```
var str = "This-is---a--news-----item----"; 
```

然后用单个空格替换所有破折号，您可以这样做：

```
var newStr = str.split('-').filter(function(item) {
  item = item ? item.replace(/-/g, ''): item
  return item;
}).join(' '); 
```

现在，如果字符串包含双破折号，例如“----”，那么数组拆分将生成一个包含 3 个破折号的元素（因为它在第一个破折号上拆分）。所以通过使用这一行：

`item = item ? item.replace(/-/g, ''): item`

filter 方法删除了那些额外的破折号，因此该元素将在过滤器迭代中被忽略。上面的行还说明了 item 是否已经是一个空元素，因此它不会在 item.replace 上崩溃。

然后，当您的字符串连接在过滤后的元素上运行时，您最终会得到以下输出：

```
"This is a news item" 
```

现在，如果您使用类似 knockout.js 的东西，您可以在其中拥有计算机可观察对象。您可以创建一个计算的 observable，以便在“str”更改时始终计算“newStr”，这样即使您更改了原始输入字符串的值，您也始终拥有一个没有破折号的字符串版本。基本上它们是绑定在一起的。我确信其他 JS 框架可以做类似的事情。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-26T07:19:15.227

如果它的数组像

```
 arr = ["This-is-one","This-is-two","This-is-three"];
    arr.forEach((sing,index) => {
      arr[index] = sing.split("-").join(" ")
      }); 
```

输出将是

```
['This is one', 'This is two', 'This is three'] 
```

# python - 为什么我突然收到“OperationalError: no such table”？

> ID：14262771
> 
> 赞同：6
> 
> 时间：2013-01-10T16:36:19.223
> 
> 标签：python, sqlite

我正在尝试用我的数据库做各种事情。我已经成功地连接并拉出数据并取出数据，没有问题。我一直在调试其他问题，然后突然我无法从我的数据库表中获取任何内容 - 我收到“OperationalError：没有这样的表：文章”。

我真的很难过 - 这工作得很好，我查询数据库没有问题并插入数据等。然后突然我收到这个错误。我在错误开始出现之前所做的更改似乎完全不相关——我解开了它们，仍然得到这个错误。这是我收到错误的脚本的开头：

```
import sqlite3

database='mydatabase'
db=sqlite3.connect(database)
c=db.cursor()

sql_command='SELECT id FROM article'
idlist=c.execute(sql_command) 
```

我可以在 SQLite Administrator 中打开该数据库并验证该表是否存在。加上它以前工作过。我还尝试通过以下方式验证该表是否在其中：

```
>>c.execute('select name from sqlite_master where type="table"').fetchall()
[] 
```

所以有些东西真的很古怪。

我还尝试关闭并重新打开数据库连接和游标。并关闭 Python 会话。没有骰子。帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T16:45:03.680

你把你的代码移到另一个地方了吗？

因为sqlite将数据库存储在一个文件中，当你调用connect时，如果存在同名文件`'mydatabase'`，则加载，否则。将自动创建一个新的新数据库文件。

搜索带有名称的旧文件`'mydatabase'`并将其放入您的代码中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-06T10:52:00.563

sqlite3 和烧瓶访问数据库时遇到了完全相同的问题。我将代码中的数据库路径更改为完整路径，这解决了重新启动烧瓶应用程序后数据消失和找不到表的问题。我可以推荐 SQLite Manager firefox 插件，它有助于查看数据库表中的记录。按照此链接查看使用数据库完整路径引用解决的类似问题[Django 初学者问题：manage.py dbsync](https://stackoverflow.com/questions/1084766/django-beginner-problem-manage-py-dbsync)

Python 不进行路径扩展。因此您可能希望使用环境变量来存储数据库的路径。 [链接到 WingWare 的环境变量扩展](http://wingware.com/doc/proj/variable-expansion)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-02T19:48:48.260

我遇到了问题。就我而言，在尝试访问数据库之前，我有这一行：

```
 os.chdir("other/dir")
 conn = sqlite3.connect("database.db") 
```

因此 sqlite3 在该目录中创建一个空数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-02T01:12:48.623

我遇到了同样的问题，在我的情况下，我在创建表之前尝试在表之前创建表，这是一个示例

```
Base.metadata.create_all(bind=engine)  # Wrong placement

class Currency(Base):
    __tablename__ = "currency"
    date = Column(Date, primary_key = True)
    rates = Column(String) 
```

我通过替换 Base Creator 的位置来修复它

```
class Currency(Base):
    __tablename__ = "currency"
    date = Column(Date, primary_key = True)
    rates = Column(String)

Base.metadata.create_all(bind=engine)  # Right placement 
```

# wkhtmltopdf - wkhtmltopdf - 根据页面内容改变页脚内容？

> ID：14262773
> 
> 赞同：1
> 
> 时间：2013-01-10T16:36:23.800
> 
> 标签：wkhtmltopdf

使用 wkhtmltopdf，有没有办法根据页面上存在的内容来改变页脚的内容？每个页面的页脚都需要有它所在部分的标题，而不是通用页脚。任何指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T06:59:44.377

在页眉中工作的相同脚本也可以在页脚中使用来替换节名称。尝试像下面这样的页脚，它会抓取当前页面所在的当前 H1 部分作为页脚。

```
 <html>
    <head>
        <script>

            function subst() {
                var vars = {};

                var valuePairs = document.location.search.substring(1).split('&');
                for (var i in valuePairs) {
                    var valuePair = valuePairs[i].split('=', 2);
                    vars[valuePair[0]] = decodeURIComponent(valuePair[1]);
                }
                var replaceClasses = ['frompage','topage','page','webpage','section','subsection','subsubsection'];

                for (var i in replaceClasses) {
                    var hits = document.getElementsByClassName(replaceClasses[i]);

                    for (var j = 0; j < hits.length; j++) {
                        hits[j].textContent = vars[replaceClasses[i]];
                    }
                }
            }
        </script>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    </head>
    <body style="border:0; margin: 0px;" onload="subst()">
        <div style="width: 100%; text-align:center;">- <span class="section"></span> -</div>
    </body>
</html> 
```

此外，如果您想要 H2，请使用 subsection，对于 H3，请使用 subsubsection。如果每页有多个部分或子部分，它将选择页面上最高的部分。

# python - 如何在python中进行导入？

> ID：14262774
> 
> 赞同：-3
> 
> 时间：2013-01-10T16:36:24.367
> 
> 标签：python, import

我做了一些网络搜索，但我发现的只是**沮丧**。

我在目录（让我们称之为）“projectdir”中有一个项目，其中有“main.py”。在 projectdir 中，我有一个名为“otherstuff”的子目录，其中有“foo.py”。

如何导入 foo.py，这样我就可以在 main.py 中使用它的内容，而不需要做 python 设计者/实现者应该做的很多工作，也不依赖样板文件？

或者这在python中是不可能的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:37:44.627

您需要包含`__init__.py`在您的`otherstuff`目录中。这是告诉 python 在那里搜索导入。

python[文档](http://docs.python.org/2/tutorial/modules.html#packages)解释了模块/包导入的工作原理。并且值得花时间阅读它，尽管它的篇幅很长

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T16:39:53.513

您需要将`__init__.py`文件放在 otherstuff 子目录中，以将其标记为包。之后，您可以使用以下命令导入模块：

```
import subdirectory.foo 
```

或者

```
from subdirectory import foo 
```

__init__.py 文件可以为空。在 python 中没有其他“干净”的方法可以实现这一点。

# api - 为什么从 localhost 向 localhost 发出请求时会启动同源策略？

> ID：14262775
> 
> 赞同：6
> 
> 时间：2013-01-10T16:36:24.530
> 
> 标签：api, google-chrome, angularjs, same-origin-policy, yeoman

我将后端 API 作为一个单独的项目，与使用它的前端 HTML5 应用程序分开。我正在使用 Yeoman 进行前端开发。Yeoman 在 localhost:3501 上运行，后端在 localhost:3000 上运行。当我从浏览器发出 API 请求（使用 AngularJS 的 $http）时，我遇到了相同的来源策略：

```
XMLHttpRequest cannot load http://localhost:3000/venues. Origin http://localhost:3501 is not allowed by Access-Control-Allow-Origin. 
```

AFAIK，只有在跨不同域发出请求时才应该启动同源策略。当我们从 localhost 向 localhost（尽管是不同的端口）发出请求时，为什么会发牢骚？

我怎样才能完成这项工作，这会导致生产问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-10T16:52:23.497

这些端口也计入跨域请求，因此`http://localhost:3000`是`http://localhost:3501`2**个不同的域**（从浏览​​器的角度来看）。

如果您需要两个应用程序（客户端和后端）在不同的端口上运行，请考虑使用[http://enable-cors.org/](http://enable-cors.org/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T16:56:45.797

根据[W3C](http://www.w3.org/Security/wiki/Same_Origin_Policy)的说法，“来源由 URL 的方案、主机和端口定义”，因此不同的端口会导致您的问题。

两种可能的解决方案：

*   [CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)（跨源资源共享）
*   使用 JSONP 请求

两者都需要对您的后端进行更改（我不太熟悉。CORS 可能意味着对您的前端的更改最少（我认为 AngularJS 开箱即用地支持它）。

# javascript - 使用jQuery选择单选按钮组的所有标签

> ID：14262779
> 
> 赞同：2
> 
> 时间：2013-01-10T16:36:30.613
> 
> 标签：javascript, jquery, selector

我正在尝试编写一个函数，如果单击一组单选按钮的任何标签，将调用该函数。所以我想要一种方法来引用单选按钮组的所有标签。

从另一个线程（[这个](https://stackoverflow.com/questions/3896156/how-do-i-style-radio-buttons-with-images-laughing-smiley-for-good-sad-smiley)）我读到我可以做到

```
$('#[radio_name] label').click(function(){
    ...
}); 
```

其中`[radio_name]`是单选按钮组的名称。事实上，我只是想在引用的线程中实现代码。不幸的是，它对我不起作用，不知道为什么。

其他一些线程建议您可以使用 选择特定标签，标签适用的单选按钮的 id 在`$('label[for=[radio_option_id]]')`哪里。`[radio_option_id]`但是，这只适用于选择单个标签。我需要选择组中具有不同 ID 的所有标签。

编辑：这是下面要求的更完整的上下文。

```
var content = "<form id='question_form' name='question_form' action=''>" + page.text;
content += "<div id='radio_options'>";
for ( var i=0; i<page.answers.length; i++ ) {
    content += "<input type='radio' name='radio_option' id='radio_option_" + i.toString() + "' value='" + i.toString() + "'><label for='radio_option_" + i.toString() + "'>" + page.answers[i] + "</label><br>";
}
content += "</div>";
content += "<p><input type='submit' id='submit_button' name='submit_button' value='Submit'></p></form>";
display_loc.html( content ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:39:17.367

使用[ATTR 包含选择器](http://api.jquery.com/attribute-contains-selector/)

```
$('label[for*="radio"]').click(function(){
    ...
}); 
```

这适用于包含`radio`在`for`属性中的标签

方程。

```
<input type="radio" name="emotion" id="radio_sad" />
<label for="radio_sad">Sad</label>
<input type="radio" name="emotion" id="radio_happy" />
<label for="radio_happy">Happy</label> 
```

* * *

**更新**

对于您的 html 代码，您可以执行以下操作。

```
$('#radio_options label').click(function(){

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T16:43:40.457

在我看来，您只需将一个类应用于您的不同标签并以这种方式访问​​它们。这样您就可以按类别对标签进行分组。

```
$('label.className').click(function(){
     ...
}); 
```

# css - 带有文本阴影过滤器的 IE 中的链接单击区域问题

> ID：14262783
> 
> 赞同：0
> 
> 时间：2013-01-10T16:36:49.773
> 
> 标签：css, menu, filter

在菜单之后，我希望整个区域都可以点击，但 IE 不能点击，原因是我正在使用文本阴影过滤器，如果我删除`filter: dropshadow()`并应用`float:left;`我的期望，将设置任何解决方法来完成此操作。

HTML

```
<div><a href='#'>Home</a></div>    
<div><a href='#'>Contact us</a></div>    
<div><a href='#'>Feedback</a></div>    
<div><a href='#'>Products</a></div> 
```

CSS

```
a{
  color:#f00; 
  font-size:15px;
  text-shadow: -1px -2px 2px #212121; 
  filter: dropshadow(color=#212121, offx=-1, offy=-2); 
  padding: 13px 0 0 16px; 
  display:block; 
  height:25px; 
  width:100%; 
  zoom:1; 
  line-height: 30px;  
}
div {
  height:40px; 
  padding-top:5px; 
  border:#999 solid 1px; 
  margin-bottom:5px;
} 
```

小提琴也供参考[http://jsfiddle.net/eHgKs/](http://jsfiddle.net/eHgKs/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:47:36.850

许多css在IE上不起作用

我喜欢的一个简单的解决方法是放置每个链接的图像

我知道这不值得，但仍然。

# php - PHP：Twitter 按钮不显示文本+链接

> ID：14262786
> 
> 赞同：0
> 
> 时间：2013-01-10T16:36:58.033
> 
> 标签：php, twitter, hyperlink, share

这是生成的 Twitter 按钮，我在里面添加了文本。

```
> <iframe allowtransparency="true" frameborder="0" scrolling="no"
> src="http://platform.twitter.com/widgets/tweet_button.1357735024.html#_=1357817606773&amp;count=horizontal&amp;id=twitter-widget-0&amp;lang=en&amp;original_referer=&amp;size=m&amp;text=<?php
> echo $art["title"].'
> http://web.com/article.php?art_id='.$art["id"];?>&amp;url=<?php
> echo
> 'http://web.com/article.php?art_id='.$art[id];?>&amp;via=MyWeb"
> class="twitter-share-button twitter-count-horizontal" style="width:
> 107px; height: 20px;" title="Twitter Tweet Button"
> data-twttr-rendered="true"></iframe> 
```

问题是，我无法在推文中添加链接。当我在那里添加它时，即使是简单的文本也不会显示。

有没有人有类似的问题或任何帮助，如何解决？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:01:00.280

我会稍微重新组织你的代码，只是为了让 iframe src 的构建更容易理解（那里可能有错误）。您还应该确保 $art['title'] 是 urlencoded。

```
 <?php
    $iframe_src  = 'http://platform.twitter.com/widgets/tweet_button.1357735024.html#_=1357817606773&amp;count=horizontal&amp;id=twitter-widget-0&amp;lang=en&amp;original_referer=&amp;size=m&amp;text=';
    $iframe_src .= urlencode($art['title']);
    $iframe_src .= 'http://web.com/article.php?art_id='.$art['id'];
    $iframe_src .= '&amp;url=http://web.com/article.php?art_id='.$art['id'].'&amp;via=MyWeb';
?>
 <iframe allowtransparency="true" frameborder="0" scrolling="no" src="<?php echo $iframe_src; ?>"  
    class="twitter-share-button twitter-count-horizontal" 
    style="width:107px; height: 20px;" title="Twitter Tweet Button"
    data-twttr-rendered="true"></iframe> 
```

# ruby-on-rails - Rails：link_to 在控制器中调用自定义方法

> ID：14262793
> 
> 赞同：11
> 
> 时间：2013-01-10T16:37:05.273
> 
> 标签：ruby-on-rails, ruby

我正在寻找用来`link_to`调用我的控制器中的方法。但是，由于某些奇怪的原因，该路线会寻找该`show`方法。

在我看来：

```
<% @beverages.each do |beverage| %>
    ..
    <%= link_to 'Archive', beverages_archive_path(:id => beverage.id) %>
    ..
<% end %> 
```

在我的 config/routes.rb

```
match 'beverages/archive' => 'beverages#archive' 
```

在我的饮料控制器.rb

```
 def archive
    beverage = Beverage.find(params[:id])

    respond_to do |format|
    #  format.html # show.html.erb
      format.json { render json: beverage }
    end
    # beverage.update_attribute('archive', true)
  end 
```

当我单击视图中的存档链接时，URL 确实更改为：`http://localhost:3000/beverages/archive?id=11`，但是我收到以下错误。

**我得到的错误：** ![错误](../Images/6bf6c691f96b390b9084a18899d13909.png) ActiveRecord::RecordNotFound（找不到 id=archive 的饮料）：app/controllers/beverages_controller.rb:46:in `show'

知道我做错了什么吗？非常感谢您的帮助！

PS。我还看了[Rails 3 link_to delete destory方法调用show方法？](https://stackoverflow.com/questions/9203827/rails-3-link-to-delete-destory-method-calls-show-method) 但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T16:48:06.507

你在你的路线中试过这个吗？

```
match 'beverages/:id/archive' => 'beverages#archive', as: :beverages_archive 
```

这将为您创建饮料存档路径方法。此外，当您正在寻找特定的饮料时，请在路线内使用 :id ，以便它知道从哪里获取 id 参数。

除此之外，您始终可以通过执行以下操作来明确指定要链接到哪个控制器和操作的链接：

```
link_to "Label", :controller => :my_controller, :action => :index 
```

取自这里：[Ruby on rails 3 link_to 控制器和操作](https://stackoverflow.com/questions/5607155/ruby-on-rails-3-link-to-controller-and-action)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T16:42:42.670

请改用其他符号（不是`match`）。

```
resources :beverages do
  collection do
    get :archive
  end
 end 
```

试试这个，如果出了什么问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:44:08.570

这里没有足够的信息来了解为什么`beverages_archive_path`在您的应用程序中有效 - 一个问题是您的路线文件没有为您的`beverages#archive`路线定义名称。你想要的是这样的：

```
match 'beverages/archive' => 'beverages#archive', :as => :beverages_archive 
```

或者更好的是使用资源丰富的路由约定，如下所示：

```
resources :beverages do
  collection do
    get :archive
  end
end 
```

发生的事情是您有一条匹配的`beverages#show`路线，`/beverages/:id`这就是`/beverages/archive`匹配的（与`:id => 'archive'`）。

# iphone - 编辑时 iPhone UITableViewCell selectionStyle 中的 selectionStyle？

> ID：14262796
> 
> 赞同：3
> 
> 时间：2013-01-10T16:37:19.917
> 
> 标签：iphone, ios, objective-c, xcode

> **可能重复：**
> [如何禁用 UITableView 选择突出显示？](https://stackoverflow.com/questions/190908/how-can-i-disable-the-uitableview-selection-highlighting)

当您点击 中的一行时`UITableView`，该行将突出显示并被选中。是否可以禁用此功能，因此点击一行什么也不做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:41:12.070

是的，下面的代码将禁用用户交互，如果您只想禁用某些单元格，您需要编写一些 if-else 方法

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    cell.userInteractionEnabled = NO;

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:44:38.690

如果您的单元格上有按钮或任何仍然需要“可触摸”的东西，那么只需将选择样式设置为无：

```
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

如果它只是一个带有文本的单元格，那么您可以像 Space Dust 建议的那样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T16:45:19.127

这个之前已经回答[过](https://stackoverflow.com/questions/190908/how-can-i-disable-the-uitableview-selection-highlighting)了。

抓取`UITableViewCell`实例并设置以下属性：

```
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T16:57:35.897

你也可以试试这个：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    //do ur stuff

} 
```

# scala - 如何更改 SBT 命令中的设置？

> ID：14262798
> 
> 赞同：35
> 
> 时间：2013-01-10T16:37:30.533
> 
> 标签：scala, sbt

我想要一个命令`publish-snapshot`来运行`publish`具有修改`version`设置的任务（该设置将在执行命令时计算）。

我想出了如何获取`version`内部命令的当前值，并且`Project.runTask("task", "scope", ...)`似乎是调用`publish`任务的正确调用。

我唯一感到困惑的是如何`State`使用新版本值修改实例。我所有的尝试似乎都对原始版本设置没有任何作用。

我的最后一次尝试：

```
val printVers = TaskKey[Unit]("printvers")
val printVersTask = TaskKey[Unit]("printvers") <<= {version map println}

def publishSnapshot = Command.command("publish-snapshot") { state =>
  val newState = SessionSettings.reapply(state.get(sessionSettings).get.appendRaw(version := "???"), state)
  Project.runTask(printVers in Compile, newState, true)

  state
}

lazy val root = Project("main", file("."),
                        settings =
                          Defaults.defaultSettings ++
                          Seq(printVersTask)).settings(commands += publishSnapshot) 
```

有什么方法可以解决这种行为吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-11T09:02:49.293

在`sbt`邮件列表的帮助下，我能够创建如下解决方案：

```
def publishSnapshot = Command.command("publish-snapshot") { state =>
  val extracted = Project extract state
  import extracted._
  val eVersion = getOpt(version).get // getting current version
  runTask(publish in Compile,
    append(Seq(version := "newVersion"), state),
    true
  )
  state
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-04-13T03:32:14.257

这实际上对我不起作用。我正在使用 SBT 0.13.7

将我必须做的事情适应上面的例子，我必须做类似的事情：

```
def publishSnapshot = Command.command("publish-snapshot") { state =>
  val extracted = Project extract state
  val newState = extracted.append(Seq(version := "newVersion"), state)
  val (s, _) = Project.extract(newState).runTask(publish in Compile, newState)
  s
} 
```

或者做：

```
def publishSnapshot = Command.command("publish-snapshot") { state =>
  val newState =
    Command.process("""set version := "newVersion" """, state)
  val (s, _) = Project.extract(newState).runTask(publish in Compile, newState)
  s
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-06T19:49:43.040

要从命令更新任意设置，请执行以下操作：

```
def updateFoo = Command.command("updateFoo") { state =>
 val extracted = Project extract state
 import extracted._
 println("'foo' set to true")
 //append returns state with updated Foo
 append(Seq(foo := true), state)
} 
```

# asp.net - ASP.NET 捆绑和缩小 - CSS3 属性失败

> ID：14262807
> 
> 赞同：6
> 
> 时间：2013-01-10T16:37:43.893
> 
> 标签：asp.net, css, minify

我有几个使用如下属性的 css 类：

```
.rfs_left_btn
{
width: 176px;
height: 20px;
background: #fefefe;
background: -moz-linear-gradient(top,  #fefefe 0%, #fafafa 48%, #f1f1f1 50%, #e9e9e9 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#fefefe), color-stop(48%,#fafafa), color-stop(50%,#f1f1f1), color-stop(100%,#e9e9e9));
background: -webkit-linear-gradient(top,  #fefefe 0%,#fafafa 48%,#f1f1f1 50%,#e9e9e9 100%);
background: -o-linear-gradient(top,  #fefefe 0%,#fafafa 48%,#f1f1f1 50%,#e9e9e9 100%);
background: -ms-linear-gradient(top,  #fefefe 0%,#fafafa 48%,#f1f1f1 50%,#e9e9e9 100%);
background: linear-gradient(top,  #fefefe 0%,#fafafa 48%,#f1f1f1 50%,#e9e9e9 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fefefe', endColorstr='#e9e9e9',GradientType=0 );
-moz-border-radius: 5px;
-webkit-border-radius: 5px;
border-radius: 5px; /* Drop shadow*/
-webkit-box-shadow: 0px 1px 1px #cecece;
-moz-box-shadow: 0px 1px 1px #cecece;
box-shadow: 0px 1px 1px #cecece;
margin-bottom: 5px;
} 
```

当创建如下 StyleBundle 时：

```
StyleBundle bundle_cssSession = new StyleBundle("~/Css/bundle_session");
bundle_cssSession.Include("~/Styles/_catalog.css"); 
```

System.Web.Optimization.Styles.Render( " **~/Css/bundle_session")**失败并出现以下错误：

/***缩小失败。返回未缩小的内容。(2196,14): 运行时错误 CSS1036: Expected expression, found '0'** */

如果我删除多个“背景”属性（只留下其中一个），则缩小工作。

有没有像上面那样使用带有 CSS3 属性的 StyleBundle 的解决方案？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:09:34.733

优化命名空间中有已知的错误会导致它在 CSS3 上失败。错误报告在[这里](https://web.archive.org/web/20130813101407/http://connect.microsoft.com/VisualStudio/feedback/details/696436/microsoft-web-optimization-cannot-compress-css3-animations)和[这里](https://web.archive.org/web/20131128030311/http://connect.microsoft.com/VisualStudio/feedback/details/689523/bugs-in-microsoft-web-optimization)。我能提供的唯一建议是要么自己压缩它们，然后给样式包提供 .min 文件，以便在提供优化内容时使用，或者使用不同的缩小方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-28T13:13:56.723

也许，这可能是一种错误的模式（或“gambiarra”，就像我们在巴西所说的那样），但我修复了它，将渐变标签移动到内联。

# tsql - 查找重复项

> ID：14262815
> 
> 赞同：1
> 
> 时间：2013-01-10T16:38:04.737
> 
> 标签：tsql, duplicates, sql-update

> 免责声明：我仍在学习 SQL，所以如果我的问题是业余的，或者是一个非常简单的答案，我深表歉意。我没有受过正规培训。我在自学。谢谢。

我正在寻找一个合适的查询来定位表中的重复项。这是我目前拥有的：

> 选择 [名称]
> 
> FROM [02Kids] As Tmp
> GROUP BY [Name]
> HAVING Count(*)>1
> 
> 按名称 asc 排序

这工作......有点。它确实会返回特定“名称”多次出现的结果。它发生的次数并不相关，尽管我也有一个查询。

我遇到的问题是，这实际上是更大更新查询的一部分，虽然这也有效，但我发现我的重复项并非都是“真正的”重复项。

更具体地说，这里是使用指定名称的简单选择查询提取的一些数据的示例：

[![](../Images/03ad75e75de6838e7d14a67f6459a87a.png)](https://i.stack.imgur.com/atbww.png)

请注意每组结果的 CustNo 列。虽然“名称”在每组结果中都匹配，但第一组的 CustNo 不同。这些不是真正的重复，因为它们不属于同一客户。

有什么方法可以执行某种比较以仅返回 CustNo 相同的名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:44:20.717

您还需要将另一列包含在您的`GROUP BY`中：

```
SELECT [Name],[CustNo], Count(*) AS [Count]
FROM [02Kids] As Tmp
GROUP BY [Name], [CustNo]
HAVING Count(*)>1
ORDER BY [Name] ASC, [CustNo] ASC, Count(*) DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:42:13.103

```
SELECT [Name], [LocNo]

FROM [02Kids] As Tmp
GROUP BY [LocNo]
HAVING Count(*)>1

order by Name asc 
```

或者，如果您甚至可以在 GROUP BY 子句中放置多个字段

```
SELECT [Name], [LocNo]

FROM [02Kids] As Tmp
GROUP BY [LocNo], [Name]
HAVING Count(*)>1

order by Name asc 
```

你只想看名字吗？

```
SELECT [Name] from
( SELECT [Name], [LockNo]
  FROM [02Kids] As Tmp
  Group BY [LocNo]
  HAVING Count(*) > 1
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:02:54.920

尝试以下操作以显示所有重复项：

```
SELECT LocNo, CustNo, 02Kids.name FROM 02Kids
INNER JOIN (SELECT name FROM 02Kids
GROUP BY name HAVING count(*) > 1) dup 
ON 02Kids.name = dup.name; 
```

# php - 将 CSS 类属性添加到 osCommerce tep_image

> ID：14262816
> 
> 赞同：0
> 
> 时间：2013-01-10T16:38:07.843
> 
> 标签：php, css, oscommerce

> **可能重复：**
> [向 osCommerce tep_image 函数添加类属性](https://stackoverflow.com/questions/11494326/adding-class-attribute-to-oscommerce-tep-image-function)

我需要在 osCommerce 中为图像添加一个 ID 或一个类，以便我可以使用媒体查询调整它的大小。

我已经尝试`class="classname"`在此语句中添加所有内容，但它总是无法正常工作。

[由于我的案例中的“bts_select”，关于 tep_image 的类似问题](https://stackoverflow.com/questions/11494326/adding-class-attribute-to-oscommerce-tep-image-function)似乎不合适。

```
tep_image(bts_select(images, 'logo' . (ITS_CHRISTMAS == 'true' ? '-xmas' : '') . '.gif'), STORE_NAME) . '</a>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:54:50.360

tep_image [()](https://github.com/osCommerce/oscommerce2/blob/master/catalog/includes/functions/html_output.php#L75)函数没有记录，但源代码相当简单：

```
function tep_image($src, $alt = '', $width = '', $height = '', $parameters = '') {
    //[...]
    if (tep_not_null($parameters)) $image .= ' ' . $parameters;

    $image .= ' />';

    return $image;
} 
```

第五个参数在结束标记之前按原样注入。这就是你所需要的。

# django - Django Rest Framework - 反向关系

> ID：14262819
> 
> 赞同：9
> 
> 时间：2013-01-10T16:38:14.450
> 
> 标签：django, django-rest-framework, tastypie

你如何在api中包含相关字段？

```
class Foo(models.Model):
    name = models.CharField(...)

class Bar(models.Model):
    foo = models.ForeignKey(Foo)
    description = models.CharField() 
```

每个 Foo 都有几个与他相关的 Bar，比如图像或其他任何东西。

如何让这些 Bar 显示在 Foo 的资源中？

用tastepie 很简单，我不确定Django Rest Framework ..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T17:10:03.950

我让它工作了！嘘！

好的，这就是我所做的：

为 Bar 对象创建序列化程序、视图和 URL，如 Django REST 框架的快速入门文档中所述。

然后在 Foo 序列化器中我这样做了：

```
class FooSerializer(serializers.HyperlinkedModelSerializer):
    # note the name bar should be the same than the model Bar
    bar = serializers.ManyHyperlinkedRelatedField(
        source='bar_set', # this is the model class name (and add set, this is how you call the reverse relation of bar)
        view_name='bar-detail' # the name of the URL, required
    )

    class Meta:
        model = Listing 
```

实际上它真的很简单，文档只是没有很好地展示它我会说..

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-02-09T06:32:28.473

如今，您只需将反向关系添加到`fields`元组即可实现此目的。

在你的情况下：

```
class FooSerializer(serializers.ModelSerializer):
    class Meta:
        model = Foo
        fields = (
            'name', 
            'bar_set', 
        ) 
```

现在“bar”-set 将包含在您的 Foo 响应中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-26T10:40:35.957

我无法使上述工作，因为我有一个名为`FooSomething`.

我发现以下内容对我有用。

```
# models.py

class FooSomething(models.Model):
    name = models.CharField(...)

class Bar(models.Model):
    foo = models.ForeignKey(FooSomething, related_name='foosomethings')
    description = models.CharField()

# serializer.py

class FooSomethingSerializer(serializers.ModelSerializer):
    foosomethings = serializers.StringRelatedField(many=True)

    class Meta:
        model = FooSomething
        fields = (
            'name', 
            'foosomethings', 
        ) 
```

# android - 我如何拍摄适合在android中的正方形内的东西？

> ID：14262823
> 
> 赞同：3
> 
> 时间：2013-01-10T16:38:27.967
> 
> 标签：android, image, crop, android-screen-support

*我必须让我的应用程序能够只*拍摄任何适合叠加在预览上的方形框架的照片。

这个想法是：客户希望应用程序发送 600x600px 顶部的图片。为了避免裁剪图片的重要部分，他决定放置这个叠加的方形框架（类似于 QR 阅读应用程序中的那个），并从该框架中裁剪掉所有内容。

为此，我需要两件事。1）如何设置多个屏幕的框架尺寸，同时获得所需尺寸内的输出？2）一旦框架启动并运行......我如何裁剪图片的其余部分？

提前致谢。

更新

我想做的是类似于这里解释的内容[http://www.londatiga.net/featured-articles/how-to-select-and-crop-image-on-android/](http://www.londatiga.net/featured-articles/how-to-select-and-crop-image-on-android/) 事情是：

*   这个操作方法*检查是否安装了图像裁剪应用程序*，它不会自行进行裁剪（或者我理解，也许我错了？）。
*   框架似乎是 200x200... 像素？DP？该帧是否会在 xhdpi 屏幕上占用与 ldpi 屏幕上相同的屏幕部分？
*   生成的图像的大小是多少？我能以某种方式决定吗？

# iphone - 带有部分的 UICollectionViewFlowLayout（但没有分节符）

> ID：14262835
> 
> 赞同：14
> 
> 时间：2013-01-10T16:38:57.153
> 
> 标签：iphone, ios, objective-c, uikit, uicollectionview

我目前非常简单地使用 UICollectionViewFlowLayout：

```
UICollectionViewFlowLayout *flowLayout = [UICollectionViewFlowLayout alloc] init];
flowLayout.itemSize = CGSizeMake(75, 75);
flowLayout.minimumInteritemSpacing = 2;
flowLayout.minimumLineSpacing = 2;
_collectionView.collectionViewLayout = flowLayout; 
```

我有多个部分（来自不同来源的单元格），但是，我想以连续的方式呈现网格。这样各部分之间就不会出现明显的中断。

请参阅屏幕截图，出于开发目的，我在两个部分中呈现相同的单元格。

任何想法，我如何获得流布局以允许多个部分但不绘制中断？

![截屏](../Images/fdb5e00beca70f5fe2112e9e1b4e1080.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-23T12:16:39.510

`UICollectionViewFlowLayout`不提供在新部分开始时跳过换行符的方法。您需要编写一个自定义`UICollectionViewLayout`子类来以不同的方式计算布局属性——或者查看[RDHCollectionViewGridLayout](https://github.com/rhodgkins/RDHCollectionViewGridLayout)，它提供了这一点。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-15T14:06:46.007

使用这种方法：

```
- (UIEdgeInsets)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section; 
```

你应该能够做你想做的事。

# c# - 如何在 WPF 4.5 Datagrid 中删除一些不需要的列？

> ID：14262841
> 
> 赞同：1
> 
> 时间：2013-01-10T16:39:10.890
> 
> 标签：c#, .net, wpf, xaml, datagrid

我正在使用下面写的 XAML

```
<Window x:Class="ERP.WinApp.Views.Admin.Patients"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Patients" Height="auto" MinWidth="1024" Width="1024" ShowInTaskbar="False" Icon="/ERP.WinApp;component/Images/patient.png" WindowStartupLocation="CenterScreen">
    <Grid>
<DataGrid ItemsSource="{Binding}" Grid.Row="1" Name="gridPatients" ></DataGrid>
</Grid>
</Window> 
```

后面写的代码

```
namespace ERP.WinApp.Views.Admin
{
    /// <summary>
    /// Interaction logic for Patients.xaml
    /// </summary>
    public partial class Patients : Window
    {
        public Patients()
        {
            InitializeComponent();

            List<Patient> list = new List<Patient>();
            list = // Populate it through some method
            gridPatients.DataContext = list;
        }

    }
} 
```

患者类几乎没有简单的属性

```
public class Patient
    {

        public int Id { get; set; }

        public string FirstName { get; set; }

        public string MiddleName { get; set; }

        public string LastName { get; set; }

        public string FullName { get{ return this.FirstName+ " " +this.MiddleName+ " " +this.LastName; } }

        public DateTime DOB { get; set; }

        public int Age { get { return DateTime.Today.Year - this.DOB.Year; } }

        public char Gender { get; set; }
    } 
```

当我运行该应用程序时，我的数据网格中的所有列都包含数据，而如果我只想有几列，例如跳过 ID 和年龄以及第一、中间、姓氏，那么最好的方法是什么。

我认为这样做对于我想隐藏的每一列都是不好的方式

```
gridPatients.Columns[0].Visibility = Visibility.Collapsed; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:50:01.570

您可以设置`AutoGenerateColumns`为 `false`，并添加所需的列。

```
<DataGrid ItemsSource="{Binding}" AutoGenerateColumns="False" Grid.Row="1" Name="gridPatients" >
 <ItemTemplate>
   <DataTemplate>
      <DataGridTextColumn Binding={ Path=FirstName}/>
    ... 
    <DataTemplate>
 </ItemTemplate>
</DataGrid> 
```

# ios - 如何从本机照片查看器中的发送按钮链接到我的应用程序？

> ID：14262845
> 
> 赞同：1
> 
> 时间：2013-01-10T16:39:22.353
> 
> 标签：ios, photos

在我的 iPhone 上，当我查看照片时，我会在底部工具栏上看到一个“发送”按钮；当我单击它时，我会看到一个菜单屏幕，其中包含邮件、消息、Twitter、Facebook、分配给联系人、打印、复制和用作壁纸图标。

有什么方法可以将我的应用添加到此列表中，如果可以，我如何设置我的应用以接收此事件的通知并访问正在查看的照片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:35:37.537

我有这个完全相同的问题，无论出于何种原因，我花了很长时间才在 stackoverflow 上找到对我有帮助的答案。我希望它对你有帮助。

[将自定义活动添加到 UIActivityController 时出现问题](https://stackoverflow.com/questions/12751891/problems-adding-custom-activity-to-uiactivitycontroller)

# ruby-on-rails - 如何在使用 Omniauth 时播种我的 Rails 应用程序？

> ID：14262846
> 
> 赞同：0
> 
> 时间：2013-01-10T16:39:22.590
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, omniauth

我正在寻找一种方法将我的 Rails 应用程序与用户一起播种。

问题是我只使用omniauth 登录。

我想这样做的原因是我想创建第一个用户作为管理员，我看到的最好的方法是通过 rake db:seed 来做到这一点。

我知道如何使用[FactoryGirl](https://stackoverflow.com/questions/11388100/create-users-in-factory-girl-with-omniauth)进行测试，我想知道是否可以通过设置

```
OmniAuth.config.test_mode = false 
```

然后以某种方式运行'auth/provider'路线，但我想知道这是否可以自动化？也许使用 Nokogiri 和 Mechanize 来跟踪 URL 并像这里[Mecanize Railscast](http://railscasts.com/episodes/191-mechanize?view=asciicast)一样自动化过程。

对于 1 个用户种子来说，这一切似乎有很多代码 :) 我不是要求有人为我做这件事，而是是否有一个我没有想到的更简单的方法。

我感谢任何花时间阅读本文的人，更重要的是花时间做出回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:41:16.823

我将处理此问题的方式是将代码推送到生产服务器，将omniauth 应用程序设置设置为我的生产URL，验证管理员用户，将omniauth 返回到Yaml，如[Rails App Project](http://railsapps.github.com/tutorial-rails-mongoid-omniauth.html)教程中所示。应用程序完成后，我将使用这些信息为我的数据库播种。

有点解决方法，但比我之前的想法快得多:)

# php - 控制器没有以正确的方式显示

> ID：14262848
> 
> 赞同：0
> 
> 时间：2013-01-10T16:39:30.427
> 
> 标签：php, string, codeigniter, view, controller

我的项目中有两个控制器。第二个控制器没有以正确的方式显示。如果我在浏览器行中打开它 - 没关系，但如果我通过链接传递它，查看它就不行了。第二个控制器类似于第一个。

控制器

```
<?php
if ( ! defined('BASEPATH')) exit ('No direct script access allowed');

class Article extends CI_Controller
{
   public function __construct()
   {
    parent::__construct();
   }

   public function index()
   {
    ini_set('display_errors',1);
error_reporting(E_ALL);

    $this->load->view('header_view');
    $this->load->view('menu_view');
    $this->load->view('categories_view');
           $this->load->model('mat_model');
           $data = array();
           $data['news'] = $this->mat_model->get_latest();
           $data['latest'] = $this->mat_model->get_latest();
        $this->load->view('useful_sites_view',$data);
        $this->load->view('article_view',$data);
        $this->load->view('footer_view');

   }
} 
```

?>

我有链接的视图：

```
 <?php foreach ($news as $one):?>
 <div id="right">
 <div id="breadcrumb"><a href="">Home</a> &raquo; <a href="">Somewhere</a></div>

      <h1><?=$one['title']?></h1>

      <p>
      <div id="small_img"><?=$one['small_img']?></div>
      <?=$one['description']?>
      </p>
      <div id="">  <a href="<?=base_url()."article/index/".$one['material_id'];?>" class="postinfo2">Читать далее...</a></div>
      <span class="postinfo"> Posted by <a href=""><?=$one['author']?></a> on  
      <?=$one['date']?></span>
      <HR ALIGN="center" WIDTH="70%" SIZE="1px" COLOR="black">

  </div>
  <?php endforeach; ?> 
```

我在浏览网站上的图片方面没有太多声誉，但我非常需要它，为在浏览器中使用其他资源而道歉：

通过链接：

[http://s020.radikal.ru/i710/1301/fd/76f313259454.jpg](http://s020.radikal.ru/i710/1301/fd/76f313259454.jpg)

使用浏览器行：

[http://s020.radikal.ru/i713/1301/4e/a863cd18184d.jpg](http://s020.radikal.ru/i713/1301/4e/a863cd18184d.jpg)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:16:21.093

在回复上面的评论...

```
<link rel="stylesheet" href="<?= base_url() ?>css/style.css"> 
```

是**绝对路径**。

假设您`base_url()`是`'http://www.example.com/'`这样，上面的行将链接到您的 css，如下所示：

```
<link rel="stylesheet" href="http://www.example.com/css/style.css"> 
```

因此，无论您在哪个页面上，CSS 都将始终链接到该 css 文件。

另一方面，如果您使用这样的**相对路径**：

```
<link rel="stylesheet" href="/css/style.css"> 
```

在您的站点根目录上，css 路径将是正确的。但是在其他页面上，例如

```
http://www.example.com/somepage/testurl 
```

您的 CSS 将像这样链接：

```
<link rel="stylesheet" href="http://www.example.com/somepage/testurl/css/style.css"> 
```

这显然是错误的。

尝试在 html 中搜索相对和绝对路径，这应该会让事情变得更清晰。

# sap-ase - 返回 2 个浮点数相乘的浮点数表示（不是精确值）

> ID：14262851
> 
> 赞同：0
> 
> 时间：2013-01-10T16:39:41.520
> 
> 标签：sap-ase

使用 Sybase ASE 12.5 我有以下情况。

存储在 float cols 中的 2 个值相乘时给出一个值。

将该值转换为 varchar（或使用 Java 检索它）给出浮点数近似的基础精确值。

我的问题是浮点数表示的值是正确的，但精确值会导致问题（由于严格的舍入规则）。

例如

```
declare @a float,@b float
select @a = 4.047000, @b = 1033000.000000
select @a*@b as correct , str(@a*@b,40,20) as wrong 
```

给出：

```
correct: 4180551.000000,
wrong: 4180550.9999999995343387 
```

同样，当@a = 4.047000, @b = 1 ...你得到

```
correct: 4.047000,
wrong: 4.0469999999999997 
```

（使用 convert(varchar(30), @a*@b) 和 cast(@a*@b, varchar(30) 也会发生同样的事情）

我很欣赏在 java 中仅围绕第一个示例很容易，但由于各种业务原因无法完成，并且无论如何它不适用于第二个示例。

我也无法更改浮点表列数据类型。

无论如何，是否可以将乘积的浮点表示形式作为字符串或上面的实际“正确”值？

谢谢克里斯

# visual-studio-2005 - 视觉工作室导航取消

> ID：14262855
> 
> 赞同：2
> 
> 时间：2013-01-10T16:39:50.887
> 
> 标签：visual-studio-2005

尝试在 Visual Studio 2005 中查看 DataAdapter 或某些表单时，有时我会收到一条错误消息，提示“导航到网页已取消”。有时这个错误会在重新启动 VS 时出现，有时我根本无法让它消失！

有任何想法吗？

# windows - 如何分发 Windows 应用程序？

> ID：14262861
> 
> 赞同：2
> 
> 时间：2013-01-10T16:40:10.047
> 
> 标签：windows, software-distribution

分发 Windows 应用程序的最佳方式是什么：

*   我应该使用哪种格式来分发应用程序，exe 文件还是 zip 文件？
*   我应该签署申请吗？

还有其他我应该考虑的点吗？

我将使用 innosetup 为应用程序创建一个安装程序。该应用程序是使用 node-webkit 制作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:46:24.747

（我不是 Windows 用户，但是）MSI 包比exe 文件和 zip 文件*都好。*选择交互式或无人值守 [un] 安装的自由，以及处理依赖项和升级的能力足以使其成为最佳选择。WiX 使创建 MSI 变得更容易——试一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:47:06.187

只要应用程序部署 - 它对您选择分发的数据格式没有任何功能差异。

我将从用户的角度而不是技术的角度来说话；请包括一个清晰标签的安装程序（MSI 是最好的；但如果它是 .exe 或 .bat 或其他，将其标记为“安装程序”或“单击安装”或类似的东西）和一个有用的自述文件，如果你请选择以 .zip 分发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:55:58.983

这一切都取决于exe需要什么。如果它只是一个简单的 .NET 可执行文件并且它是自包含的，那么您所需要的只是 zip 中的 exe（等待它包含的 < .NET 2.0）。每个更新的 Windows 后续版本都在操作系统中内置了 .NET 运行时，一直递增到 4.5 或 5.0？

因此，如果您拥有最新的 Windows，并且上面有 .NET 4.5 库，那么您所需要的基本上就是可执行文件。但是，如果它是较旧的操作系统，您可能需要捆绑或链接所需的运行时。某些应用程序需要安装第三方组件和其他 DLL。在这种情况下，您最好的选择是使用第三方工具，如 Install Shield、Wise 或 Orca，您可以在其中自定义安装和安装第三方组件，如 SQL Server Personal、Oracle Personal 或 mySQL Database 或 Crystal 报表组件。

此外，如果需要 NTFS 权限和网络权限或需要注册表值，则需要使用 Wise、InstallShield 等编写脚本，并需要提升权限。Microsoft 还具有一些内置的 Deploy Once(?) 工具，允许通过 Web、网络路径或可执行文件完成此操作。

这完全取决于您的 exe 的复杂性、它对系统的影响程度等。我见过甚至需要防火墙例外等的应用程序。如果您在公司环境中并且有一个域，您可以使用 SCCM/SMS 或统一中心。就像我说的，这一切都取决于复杂性和范围。

如果它是一个简单的 .NET 2.0 应用程序，那么您只需要 zip 中的 exe。最好的方法是将 exe 复制到几个不同的系统并进行测试。

MSI 天生就能够从 shell 或 run/explorer 执行。您还可以将您的安装编译成一个独立的可执行文件。

最重要的是，这完全取决于您的应用程序:)

# linux - 无法连接到 USB 串行端口（GSM 调制解调器）

> ID：14262868
> 
> 赞同：1
> 
> 时间：2013-01-10T16:40:25.417
> 
> 标签：linux, serial-port, gsm, modem, usbserial

我决定为我的 Linux 机器（Vmware 上的 OpenSuse 12.1 64 位）配备一个 GSM 调制解调器，以便我可以将它用作 SMS 网关。我有一个 Wavecom M1306B GSM 调制解调器，它提供一个 USB 接口，显然还有一根 USB 电缆（端到端，GSM 调制解调器到我的桌面）。

通过在我的 Windows 7 64 位 PC 上运行一些基本命令，我成功地测试了这个调制解调器。（如：AT，ATZ，..）

以下是我的一些日志：

```
machine2:~ # lsusb
Bus 001 Device 001: ID 1d6b:0001 Linux Foundation 1.1 root hub
Bus 001 Device 002: ID 0e0f:0003 VMware, Inc. Virtual Mouse
Bus 001 Device 003: ID 0e0f:0002 VMware, Inc. Virtual USB Hub
Bus 001 Device 006: ID 067b:2303 Prolific Technology, Inc. PL2303 Serial Port 
```

该接口的 lsusb -v 输出：

```
Bus 001 Device 006: ID 067b:2303 Prolific Technology, Inc. PL2303 Serial Port
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               1.10
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  idVendor           0x067b Prolific Technology, Inc.
  idProduct          0x2303 PL2303 Serial Port
  bcdDevice            3.00
  iManufacturer           1 Prolific Technology Inc.
  iProduct                2 USB-Serial Controller
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor:
    bLength                 9
    bDescriptorType         2
    wTotalLength           39
    bNumInterfaces          1
    bConfigurationValue     1
    iConfiguration          0 
    bmAttributes         0xa0
      (Bus Powered)
      Remote Wakeup
    MaxPower              100mA
    Interface Descriptor:
      bLength                 9
      bDescriptorType         4
      bInterfaceNumber        0
      bAlternateSetting       0
      bNumEndpoints           3
      bInterfaceClass       255 Vendor Specific Class
      bInterfaceSubClass      0 
      bInterfaceProtocol      0 
      iInterface              0 
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x81  EP 1 IN
        bmAttributes            3
          Transfer Type            Interrupt
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x000a  1x 10 bytes
        bInterval               1
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x02  EP 2 OUT
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
      Endpoint Descriptor:
        bLength                 7
        bDescriptorType         5
        bEndpointAddress     0x83  EP 3 IN
        bmAttributes            2
          Transfer Type            Bulk
          Synch Type               None
          Usage Type               Data
        wMaxPacketSize     0x0040  1x 64 bytes
        bInterval               0
Device Status:     0x0000
  (Bus Powered)

machine2:/proc # setserial -a /dev/ttyUSB0
/dev/ttyUSB0, Line 0, UART: 16654, Port: 0x0000, IRQ: 0
        Baud_base: 460800, close_delay: 0, divisor: 0
        closing_wait: infinte
        Flags: spd_normal

machine2:/home/smsto/bin # setserial -a /dev/ttyS0
/dev/ttyS0, Line 0, UART: 16550A, Port: 0x03f8, IRQ: 4
        Baud_base: 115200, close_delay: 50, divisor: 0
        closing_wait: 3000
        Flags: spd_normal skip_test

machine2:/home/smsto/bin # setserial -a /dev/ttyS1
/dev/ttyS1, Line 1, UART: 16550A, Port: 0x02f8, IRQ: 3
        Baud_base: 115200, close_delay: 50, divisor: 0
        closing_wait: 3000
        Flags: spd_normal skip_test

machine2:/proc # setserial -G /dev/ttyUSB0
/dev/ttyUSB0 uart 16654 port 0x0000 irq 0 baud_base 460800 spd_normal

machine2:/proc # setserial /dev/ttyUSB0
/dev/ttyUSB0, UART: 16654, Port: 0x0000, IRQ: 0

machine2:/proc/tty/driver # ls -ltr
total 0
-r--r--r-- 1 root root 0 Jan 10 14:03 usbserial
-r--r--r-- 1 root root 0 Jan 10 14:03 serial

machine2:/proc/tty/driver # cat serial 
serinfo:1.0 driver revision:
0: uart:16550A port:000003F8 irq:4 tx:0 rx:0 CTS|DSR|CD
1: uart:16550A port:000002F8 irq:3 tx:0 rx:0 CTS|DSR|CD
2: uart:unknown port:000003E8 irq:4
3: uart:unknown port:000002E8 irq:3
4: uart:unknown port:00000000 irq:0
5: uart:unknown port:00000000 irq:0
6: uart:unknown port:00000000 irq:0
7: uart:unknown port:00000000 irq:0

machine2:/proc/tty/driver # cat usbserial 
usbserinfo:1.0 driver:2.0
0: module:pl2303 name:"pl2303" vendor:067b product:2303 num_ports:1 port:1 path:usb-0000:02:00.0-2.1

machine2:/proc/tty # cat drivers 
/dev/tty             /dev/tty        5       0 system:/dev/tty
/dev/console         /dev/console    5       1 system:console
/dev/ptmx            /dev/ptmx       5       2 system
/dev/vc/0            /dev/vc/0       4       0 system:vtmaster
usbserial            /dev/ttyUSB   188 0-253 serial
serial               /dev/ttyS       4 64-79 serial
pty_slave            /dev/pts      136 0-1048575 pty:slave
pty_master           /dev/ptm      128 0-1048575 pty:master
unknown              /dev/tty        4 1-63 console

machine2:/proc/tty # dmesg | grep -i tty

[    1.383652] serial8250: ttyS0 at I/O 0x3f8 (irq = 4) is a 16550A
[    1.424541] serial8250: ttyS1 at I/O 0x2f8 (irq = 3) is a 16550A
[    1.581063] 00:0a: ttyS0 at I/O 0x3f8 (irq = 4) is a 16550A
[    1.654207] 00:0b: ttyS1 at I/O 0x2f8 (irq = 3) is a 16550A
[    1.938507] tty tty17: hash matches
[ 2498.137304] usb 1-2.1: pl2303 converter now attached to ttyUSB0 
```

我注意到USB0接口的波特率太大，所以我尝试分配115200：

```
machine2:/proc # setserial /dev/ttyUSB0 baud_base 115200
Cannot set serial info: Invalid argument 
```

所以，这就是问题所在......我收到了这个错误。每当我尝试通过 minicom 连接 S0、S1、USB0 接口时，它都无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:51:41.987

Baud_base 不是端口速度，它是除数为 1 时的最大速度。设置 baud_base 的能力可能根本不适用于 USB 串行设备，而且肯定不是您想要的。

用于`stty`设置端口速度，或`cu`用于`minicom`测试（可自行设置端口速度）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:50:20.593

我不确定波特率但是如果你打开另一个终端`cat /dev/ttyUSB0` 然后在第一个终端`echo AT > /dev/ttyUSB0`你可能会得到一个 OK 回复..不确定它是否有帮助但它至少应该让你得到回应..

# javascript - MongoDB $within 查询

> ID：14262881
> 
> 赞同：1
> 
> 时间：2013-01-10T16:41:03.333
> 
> 标签：javascript, mongodb, meteor

我正在尝试`mongodb`使用`$within`运算符进行地理空间查询。我有一个包含位置字段的集合条目：

```
location: {
  bounds: {
    south_west: { lat: XX.XXXXXX, lng: XX.XXXXX },
    north_east: { lat: XX.XXXXXX, lng: XX.XXXXX }
  },
  center: {
    lat: XX.XXXXXX,
    lng: XX.XXXXXX
  }
} 
```

对于我的查询，我想获取所有位于对象`location.center`范围内的位置`google.maps`。我有这样的事情：

```
query = {}

var southWest = map.getBounds().getSouthWest();
southWest = [southWest.lat(), southWest.lng()];

var northEast = map.getBounds().getNorthEast();
northEast = [northEast.lat(), northEast.lng()];

query["location.center"] = { $within: { $box: [southWest, northEast] } } 
```

但我一直得到

```
Exception from Meteor.flush: Error: Unrecognized key in selector: $within
at Error (<anonymous>)
at Function.LocalCollection._exprForConstraint (http://localhost:3000/packages/minimongo/selector.js?2373a18a9a4640513e41d7850f17f62f76b7c589:559:11)
at Function.LocalCollection._exprForOperatorTest (http://localhost:3000/packages/minimongo/selector.js?2373a18a9a4640513e41d7850f17f62f76b7c589:468:36)
at Function.LocalCollection._exprForKeypathPredicate (http://localhost:3000/packages/minimongo/selector.js?2373a18a9a4640513e41d7850f17f62f76b7c589:387:34)
at Function.LocalCollection._exprForSelector (http://localhost:3000/packages/minimongo/selector.js?2373a18a9a4640513e41d7850f17f62f76b7c589:307:36)
at Function.LocalCollection._compileSelector (http://localhost:3000/packages/minimongo/selector.js?2373a18a9a4640513e41d7850f17f62f76b7c589:284:24)
at new LocalCollection.Cursor (http://localhost:3000/packages/minimongo/minimongo.js?7f5131f0f3d86c8269a6e6db0e2467e28eff6422:71:39)
at LocalCollection.find (http://localhost:3000/packages/minimongo/minimongo.js?7f5131f0f3d86c8269a6e6db0e2467e28eff6422:57:10)
at _.extend.find (http://localhost:3000/packages/mongo-livedata/collection.js?3ef9efcb8726ddf54f58384b2d8f226aaec8fd53:155:34)
at Template.feed.feed_items (http://localhost:3000/client/modules/js/feed.js?5ed30ddbd861944b636dbe03c13cc80421258a5b:129:17) 
```

而且我不确定如何进行。通过一个简单的 JSON.stringify(query) 我注意到查询的结果就像

```
{"location.center":{"$within":{"$box":[[39.93623526127148,-75.63687337060549],[39.984129247435064,-75.57438862939455]]}}} 
```

无论如何我可以防止引号被环绕`$within`和`$box`选择器？我相信这就是我的异常被抛出的地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:47:42.697

引号不是问题，这只是有效的 JSON。问题是 minimongo 还没有实现 $within 。Matt Debergalis[评论了 Minimongo 的不完整状态](https://groups.google.com/forum/?fromgroups=#!topic/meteor-core/o2w4b33m-Co)（2012 年 10 月 23 日）：

> 最近流星谈话的流量提醒我 minimongo 带有一个健康的改进和扩展愿望清单。
> 
> [...]
> 
> *   $near、$within 和 $maxDistance。

在您具有“真正” mongodb 访问权限的服务器上执行此操作可能会更好，但如果客户端商店没有相同的功能，我不确定它是如何工作的。

[Minimongo 的源代码是可用的](https://github.com/meteor/meteor/tree/master/packages/minimongo)。也许您应该尝试自己实现这个选择器并发送拉取请求？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:19:36.373

这可能是一个老问题，但万一有人重新访问这个问题，您可以使用它对 minimongo 进行查询：

```
locations.find(
    { "location.lng" : {
        "$gt" : bottomLeftLng,
        "$lt":  topRightLng  
      },
      "location.lat": {
        "$gt" : bottomLeftLat,
        "$lt": topRightLat
      }
   }
) 
```

# google-drive-api - 谷歌驱动器 javascript api gapi.client.drive.files 未定义

> ID：14262884
> 
> 赞同：9
> 
> 时间：2013-01-10T16:41:18.200
> 
> 标签：google-drive-api, google-api-js-client

列出 Google Drive 文件的 JavaScript 示例使用`gapi.client.drive.files.list()`. 尝试使用此方法时，我收到错误“无法读取未定义的属性'文件'”。

[Google Drive API javascript](https://stackoverflow.com/questions/11315962)下已经描述了该问题和解决方法

[https://developers.google.com/drive/v2/reference/files/list#try-it](https://developers.google.com/drive/v2/reference/files/list#try-it)下的文档是否不正确？或者有没有办法按照描述使用 API。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-10T19:14:29.437

JavaScript 示例是正确的，但您必须确保仅`gapi.client.drive.files`在加载 Drive 库时使用（以及其他 Drive 特定资源），即在以下情况之后：

```
gapi.client.load('drive', 'v2', callback); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-09-26T12:25:22.063

如果它在编写后运行良好`gapi.client.load('drive', 'v2', callback)`，那么一切都很好。就我而言，它不起作用，所以我写了下面的代码。

```
gapi.load('client', function () {
                gapi.client.load('drive', 'v2', function () {
                    var file = gapi.client.drive.files.get({ 'fileId': fileId });
                    file.execute(function (resp) {
                        //Write you code with resp variable
                    });

                });
            }); 
```

# visual-studio-2008 - boost::containers 和错误：“C2679：二进制 '='：找不到运算符”

> ID：14262885
> 
> 赞同：4
> 
> 时间：2013-01-10T16:41:23.497
> 
> 标签：visual-studio-2008, visual-c++, boost

我正在尝试在 Visual Studio 2008 下编译以下代码：

```
struct test
{
    boost::container::vector<int> v1;
};
test v1, v3;
const test & v2 = v3;
v1 = v2; 
```

我得到的错误是：
*错误C2679：二进制'='：找不到采用'const test'类型的右手操作数（或没有可接受的转换）
的运算符可能是'test &test::operator =(尝试匹配参数列表'(test, const test)'时测试&)'*

当使用普通的 std::vector 而不是 boost::container 等效项时，代码会编译。我正在寻找为什么此代码无法编译以及如何使其编译的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T12:31:26.463

我发现了一个已经被问过的类似问题： [boost::container::vector failed to compile with C++03 compiler](https://stackoverflow.com/questions/13083360/boostcontainervector-fails-to-compile-with-c03-compiler)

我们观察到的行为似乎是 boost 社区设计并知道的： [Boost::move 仿真限制](http://www.boost.org/doc/libs/1_51_0/doc/html/move/emulation_limitations.html#move.emulation_limitations.assignment_operator)章节“*派生自或持有可复制和可移动类型的类中的赋值运算符*”。

为了使主要问题中显示的代码能够工作，必须使用 BOOST_COPYABLE_AND_MOVABLE 宏将类声明为可复制和可移动的。复制分配的 const 版本也需要明确定义。C++03 编译器的代码更正版本：

```
class test
{
private:
    BOOST_COPYABLE_AND_MOVABLE( test );
public:
    test& operator=(BOOST_COPY_ASSIGN_REF(test) p) // Copy assignment
    {
        v1 = p.v1;
        return *this;
    }
    boost::container::vector<int> v1;
}; 
```

那些额外的类装饰可能确实会变得烦人，尤其是当代码库很大时。我不想花时间浏览代码并添加分配运算符。

# android - Android MediaPlayer 重播问题

> ID：14262890
> 
> 赞同：0
> 
> 时间：2013-01-10T16:41:38.863
> 
> 标签：android, video, android-mediaplayer, rtsp

当我使用 Android 的 MediaPlayer 类重播完成的视频时，我遇到了一些问题。

1.  我查看了[MediaClass Android SDK](http://developer.android.com/reference/android/media/MediaPlayer.html#Valid_and_Invalid_States)和状态图。据我所知，一旦视频完成播放，您应该能够调用 start() 并让它从头开始。
2.  但是，当我重播 RSTP 文件时，这些是我得到的错误：

> 01-10 11:36:49.138: E/MediaPlayer(4821): 错误 (-2147483648, 0)
> 01-10 11:36:49.146: E/MediaPlayer(4821): 错误 (1, -1)
> 01-10 11 ：36：49.154：E / MediaPlayer（4821）：错误（-2147483648,0）
> 01-10 11：36：49.162：E / MediaPlayer（4821）：尝试在没有有效媒体播放器的情况下调用getDuration
> 01-10 11:36： 49.162: E/MediaPlayer(4821): 错误 (-38, 0)
> 01-10 11:36:49.169: E/MediaPlayer(4821): 错误 (1,-1)
> 01-10 11:36:49.185: E/媒体播放器（4821）：错误（-38,0）

3.最后一个问题发生在我重播网站上的 MPG4 时。再次点击播放后，视频不显示，并且搜索栏移动不同步。

下面是我的活动代码。

```
public class CustomMediaPlayer extends Activity implements MediaPlayerControl,
        OnCompletionListener, OnErrorListener, OnInfoListener,
        OnPreparedListener, OnSeekCompleteListener, OnVideoSizeChangedListener,
        SurfaceHolder.Callback, OnBufferingUpdateListener {

    // TODO Remove
    String TAG = "VAC";
    public static final String FILE_PATH = "rtsp://v4.cache2.c.youtube.com/CjYLENy73wIaLQkQ7cBxuSy88hMYDSANFEIJbXYtZ29vZ2xlSARSBXdhdGNoYJitofTlp8vjUAw=/0/0/0/video.3gp";

    //

    PowerManager pm;
    PowerManager.WakeLock wl;

    SpeechRecognizer sr;
    ImageView talkImageview;

    Toast toast;

    SurfaceView surfaceView;
    SurfaceHolder surfaceHolder;

    MediaPlayer mediaPlayer;
    MediaController controller;

    ProgressBar progressBar;

    Display currentDisplay;

    int videoWidth = 0;
    int videoHeight = 0;
    boolean readyToPlay = false;

    Handler handler;

    int bufferedPercentage;

    boolean finishedPlaying = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.video_player);

        pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
        wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK
                | PowerManager.ACQUIRE_CAUSES_WAKEUP
                | PowerManager.ON_AFTER_RELEASE, new String());
        wl.acquire();

        preInitWidgets();
    }

    private void preInitWidgets() {
        toast = Toast.makeText(this, "", Toast.LENGTH_LONG);
        progressBar = (ProgressBar) findViewById(R.id.VideoPlayerProgressBar);
        talkImageview = (ImageView) findViewById(R.id.VideoPlayerTalkImageView);

        sr = SpeechRecognizer.createSpeechRecognizer(this);
        sr.setRecognitionListener(new listener());

        handler = new Handler();

        surfaceView = (SurfaceView) findViewById(R.id.VideoPlayerSurfaceView);
        surfaceHolder = surfaceView.getHolder();
        surfaceHolder.addCallback(this);
        surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

        mediaPlayer = new MediaPlayer();
        mediaPlayerInit();
        currentDisplay = getWindowManager().getDefaultDisplay();
        controller = new MediaController(this);

    }

    void mediaPlayerInit() {

        mediaPlayer.setOnCompletionListener(this);
        mediaPlayer.setOnErrorListener(this);
        mediaPlayer.setOnInfoListener(this);
        mediaPlayer.setOnPreparedListener(this);
        mediaPlayer.setOnSeekCompleteListener(this);
        mediaPlayer.setOnVideoSizeChangedListener(this);
        mediaPlayer.setOnBufferingUpdateListener(this);

        try {
            mediaPlayer.setDataSource(FILE_PATH);

            // mediaPlayer.setDataSource("http://www.blk-burn.com/sandbox/sj.mp4");
        } catch (Exception e) {
            toast.setText("Failed To Load Video");
            toast.show();
        }

    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        // TODO Auto-generated method stub

    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        mediaPlayer.setDisplay(holder);

        try {
            mediaPlayer.prepareAsync();
        } catch (Exception e) {
            toast.setText("Failed to Prepare");
            toast.show();
        }

        progressBar.setVisibility(View.VISIBLE);

    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onVideoSizeChanged(android.media.MediaPlayer mp, int width,
            int height) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onSeekComplete(android.media.MediaPlayer mp) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onBufferingUpdate(MediaPlayer mp, int bufferedPercent) {
        this.bufferedPercentage = bufferedPercent;

    }

    @Override
    public void onPrepared(android.media.MediaPlayer mp) {
        videoWidth = mp.getVideoWidth();
        videoHeight = mp.getVideoHeight();

        if (videoWidth > currentDisplay.getWidth()
                || videoHeight > currentDisplay.getHeight()) {
            float heightRatio = (float) videoHeight
                    / (float) currentDisplay.getHeight();
            float widthRatio = (float) videoWidth
                    / (float) currentDisplay.getWidth();

            if (heightRatio > 1 || widthRatio > 1) {
                if (heightRatio > widthRatio) {
                    videoHeight = (int) Math.ceil((float) videoHeight
                            / (float) heightRatio);
                    videoWidth = (int) Math.ceil((float) videoWidth
                            / (float) heightRatio);
                } else {
                    videoHeight = (int) Math.ceil((float) videoHeight
                            / (float) widthRatio);
                    videoWidth = (int) Math.ceil((float) videoWidth
                            / (float) widthRatio);
                }
            }
        }

        surfaceView.setLayoutParams(new LinearLayout.LayoutParams(videoWidth,
                videoHeight));

        surfaceView.setLayoutParams(new LinearLayout.LayoutParams(videoWidth,
                videoHeight));
        controller.setMediaPlayer(this);
        controller
                .setAnchorView(findViewById(R.id.VideoPlayerSurfaceViewLinearLayout));
        controller.setEnabled(true);
        controller.show();

        mp.start();

        // TODO - Get Catch Phrase

        talkImageview.setVisibility(View.VISIBLE);
        progressBar.setVisibility(View.GONE);

        // startListeningForVoice();

    }

    @Override
    public boolean onInfo(android.media.MediaPlayer mp, int what, int extra) {
        // TODO
        return false;
    }

    @Override
    public boolean onError(android.media.MediaPlayer mp, int what, int extra) {
        if (what == MediaPlayer.MEDIA_ERROR_SERVER_DIED) {
            toast.setText("Media Server Died");
            toast.show();
        } else if (what == MediaPlayer.MEDIA_ERROR_UNKNOWN) {
            toast.setText("Unknown Error");
            toast.show();
        }
        return false;
    }

    @Override
    public void onCompletion(android.media.MediaPlayer mp) {

    }

    public boolean canPause() {
        return true;
    }

    public boolean canSeekBackward() {
        return true;
    }

    public boolean canSeekForward() {
        return true;
    }

    public int getBufferPercentage() {
        return bufferedPercentage;

    }

    public int getCurrentPosition() {
        return mediaPlayer.getCurrentPosition();
    }

    public int getDuration() {
        return mediaPlayer.getDuration();
    }

    public boolean isPlaying() {
        return mediaPlayer.isPlaying();
    }

    public void pause() {
        if (mediaPlayer.isPlaying()) {
            mediaPlayer.pause();
        }
    }

    public void seekTo(int pos) {
        mediaPlayer.seekTo(pos);
    }

    public void start() {
        mediaPlayer.start();

    }

    @Override
    public boolean onTouchEvent(MotionEvent ev) {
        if (ev.getAction() == MotionEvent.ACTION_DOWN) {
            if (controller.isShowing()) {
                controller.hide();
            } else {
                controller.show();
            }
        }
        return false;
    }

    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        mediaPlayer.stop();
        mediaPlayer.release();
        wl.release();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:22:05.810

您的 setDataSource 是这里的问题。Android 不支持 rtsp 流。我尝试了 rtsp 几次都没有运气。如果您尝试从 http 流式传输，如果支持视频格式，它肯定可以工作。看看这里的 Vitamio 库[http://vitamio.org/](http://vitamio.org/)。它支持rtsp流以及android不支持的许多其他音频和视频格式。

# perl - 使用 Imperia 模板进行编程

> ID：14262897
> 
> 赞同：1
> 
> 时间：2013-01-10T16:42:08.777
> 
> 标签：perl, templates, content-management-system

我是 CMS imperia 的新手，正在寻找一个很好的教程，如何使用 imperia 模板进行编程。任何的想法？

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:13:38.517

查看 imperia CMS 安装的 HTDOCS 中提供的程序员文档 \imperia\documentation\de\imperia\program\program.pdf。

要快速开始，请执行以下操作：

*   创建一个简单的元文件（添加有关您的文档的常见详细信息）
*   创建一个简单的模板（先尝试一个空的）
*   创建一个类别并选择您的元文件、模板和默认工作流程

然后在该类别中创建一个新文档

您使用哪个版本？（因佩里亚 8、因佩里亚 9 或因佩里亚 10）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T18:11:51.200

你是说 WordPress Imperia 主题吗？如果是这样，那么它的使用方式与任何其他 WordPress 主题相同，您应该查看有关[使用主题](http://codex.wordpress.org/Using_Themes)的 WordPress Codex 文档。

# git - GIT：恢复状态 - 即使在子存储库中

> ID：14262898
> 
> 赞同：0
> 
> 时间：2013-01-10T16:42:08.620
> 
> 标签：git

这就是我理解子模块的方式：具有状态（提交 ID）的独立存储库记录在主存储库中，以便能够在特定时间点恢复整个状态。

但是，如果我在主存储库中，不应该检出过去的提交（“分离的 HEAD”）或分支导致检出相应的子存储库状态吗？

如果我恢复项目，子存储库状态不会改变。

感谢您提供任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:55:35.913

`git checkout`从逻辑上讲，在很多情况下，在您在主存储库中执行操作的同时切换子模块中签出的修订版是有意义的。但是，有时，您不想这样做，出于这个原因（可能还有其他原因），`git`开发人员选择不将其作为`git checkout`. 相反，您有一个两步过程，运行`git checkout <something>`后将`git submodule update`所有子模块调整为当前签出的主版本。在您养成习惯之前有点痛苦，但它允许您检查不同的修订以供审查，而不会增加每次更新子模块的性能负担，这在具有许多子模块的大型项目中可能很重要。

# asp.net-mvc - 如何为创建和编辑视图模型使用相同的强类型编辑器视图？

> ID：14262901
> 
> 赞同：1
> 
> 时间：2013-01-10T16:42:22.090
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在尝试重构编辑器屏幕。编辑器的模型是域模型，我将转到此屏幕的视图模型，因为如果用户具有特定角色，我只需要允许编辑几个字段。我想使用相同的编辑器视图来创建和编辑模型，尽管这可能是我的问题的一部分。

我在 SO 上的其他地方读到过，视图模型应该是简单的，因此视图模型中不需要像接口层次结构之类的东西。但是，我如何为两种不同的视图模型使用相同的强类型视图，一种用于创建，一种用于编辑，因为视图模型将具有几乎相同但略有不同的属性，具体取决于用户角色？

这是一个使用我创建的两个视图模型的简化示例：

```
public class RequirementCreateView
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Justification { get; set; }
    public string ImpactIfNotFunded { get; set; }
    ... etc for about 40 properties ...
}

public class RequirementEditView
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Justification { get; set; }
    public string ImpactIfNotFunded { get; set; }
    public string Decision { get; set; }
    public string Status { get; set; }
    ... etc for about 40 properties ...
} 
```

这两个视图模型是相同的，除了 Edit 模型有两个额外的属性*Decision*和*Status*只能由具有适当角色的人设置。我使用 AutoMapper 从域 Requirement 对象映射到视图模型，反之亦然，用于创建/更新操作。

但是，既然我有两个视图模型，显然我不能使用单个强类型编辑器屏幕，因为 ValidationMessageFor(m => Model.Name) 之类的东西不起作用。这使我考虑了这组视图模型的接口层次结构，如下所示：

```
IRequirementEditorView             -->  common properties
    |--> IRequirementCreateView    -->  create-specific properties (none right now)
    |--> IRequirementEditView      -->  edit-specific properties 
```

然后让编辑器视图屏幕引用 IRequirementEditorView。但是，这又违背了当前对简单视图模型的看法。但是另一种方法是复制我的编辑器屏幕，这违反了 DRY。

这显然是一个常见问题，但我现在很难过。有什么建议吗？

谢谢。

**编辑**在查看其他一些类似的帖子后，我应该澄清一下：当我说我使用“相同”的编辑器视图屏幕时，我使用的是两个单独的视图，Create.cshtml 和 Edit.cshtml。然后，它们中的每一个都简单地引用一个包含实际编辑器表单的局部视图，如下所示：

```
@Html.Partial("Controls/RequirementEditor", Model, ViewData) 
```

当我使用域对象作为视图模型时，这就是我所拥有的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:58:43.867

原来还有另一种思考方式。在我发布这个问题后不久，我做了一些更改，我对结果更满意。这是我所做的：

1.  视图模型现在具有额外的布尔属性 AllowDecisionEdit 和 AllowStatusEdit。

2.  视图模型有两个新的 IEnumerable 属性 DecisionsList 和 StatusList。

3.  1 和 2 填充在控制器中并传递给适当的视图（创建或编辑）。

4.  创建视图调用 Html.BeginForm() 然后调用部分 Html.Partial("Controls/RequirementEditor/Editor")。编辑视图的作用相同，但还在部分调用之前添加了 Html.HiddenFor(m => Model.Id) 以确保编辑表单正常工作。

所以现在我有一个编辑模型，一个编辑器部分表单，两个单独的视图（创建和编辑），每个视图都使用相同的部分和相同的编辑器，并且功能在控制器中打开或关闭。我上面的方法闻起来非常非常糟糕，我对任何一种都不满意。一旦我这样做了，世界上的一切都感觉很好。:)

# c++ - 所有权以及如何避免 shared_ptr

> ID：14262906
> 
> 赞同：1
> 
> 时间：2013-01-10T16:42:29.523
> 
> 标签：c++, event-handling, shared-ptr, ownership

我正在尝试为游戏引擎编写一个简单的事件管理器类和侦听器。在通常的实现（即[McShaffry](https://rads.stackoverflow.com/amzn/click/com/1133776574)）中，事件管理器注册侦听器，原则上将 shared_ptr 作为私有成员保存到侦听器。

我在很多情况下看到人们说应该避免 shared_ptr 之类的东西（例如[这里](https://softwareengineering.stackexchange.com/questions/133302/stdshared-ptr-as-a-last-resort)）。因此，我试图找到在不共享侦听器所有权的情况下实现事件管理器的方法。

我想到的一种方法是为侦听器分配唯一的 ID，并将其 ID 注册到事件管理器。然后侦听器负责在事件管理器更新后“询问”事件管理器是否在其 ID 下可用。

我想问一下在这种情况下是否有更清洁和/或标准的方法来避免共享所有权，但通常也是如此。例如，我对听众有同样的问题。侦听器需要存储指向其父对象（或它们正在侦听的对象）的指针，以便在处理事件时可以调用其方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:06:22.137

*正如 Mat 的评论所说，一般*没有理由不使用智能指针。也就是说，警告似乎*确实*适用于您的情况：据我了解，您没有共享所有权；事件管理器拥有监听器的唯一所有权。因此， A`shared_ptr`在这里不合适。

另一种方法是使用在许多方面都是硬币`unique_ptr`的另一面的a。`shared_ptr`但是根据您对侦听器的建模方式，甚至可以通过简单地将具体*实例*保存到事件管理器来避免这种情况。如果没有更详细的描述，就不可能说你是否需要指针，但*如果*你不需要它们，是的，建议适用：当具体对象可以使用时，不要使用（智能）指针。

最后，如果您的侦听器是其所有权在其他地方管理的对象，请考虑简单地使用指向这些对象的*原始*指针：在这种情况下，事件管理器根本不是对象的所有者——既不是唯一的所有者，也不是共享的所有者。虽然这对我来说是首选方式，但它需要仔细分析监听器的生命周期，以确保事件管理器不会指向不再存在的监听器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T17:07:01.997

`shared_ptr`容易被过度使用；例如，通常建议在 SO 上作为含糊不清的指针问题的解决方案。它不能替代好的设计，除非有基于理解正在编写的代码中的对象生命周期问题的设计，否则不应使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T17:08:21.690

从个人经验来看，`shared_ptr`这很棒，但有时可能不是这项工作的正确工具。如果代码完全在您的控制之下，99.9% 的时间`shared_ptr`可能会让您的生活更轻松。你确实需要确保你不会这样想：

```
Foo *f = new Foo();
shared_ptr<Foo> fptr(f);
shared_ptr<Foo> fptr2(f); 
```

这将导致 f 的内存被释放 要么`fptr1`要么`fptr2`。相反，您想要执行以下操作：

```
Foo *f = new Foo();
shared_ptr<Foo> fptr(f);
shared_ptr<Foo> fptr2 = fptr; 
```

在第二种情况下，将一个共享指针分配给另一个共享指针将增加引用计数。

另一个可能遇到麻烦的地方`shared_ptr`是，如果您需要将裸指针传递给函数（如果您需要将**其**作为第一个参数传递给方法，或者您依赖第 3 方库，则可能会发生这种情况）。您可以从 中获取裸指针`shared_ptr`，但不能保证它指向的内存地址仍然存在，因为引用计数器不会增加。

你可以通过保留一个额外的来解决这个问题`shared_ptr`，尽管这可能很麻烦。

还有其他形式的智能指针。例如，OpenSceneGraph 有一个`ref_ptr`比`shared_ptr`. 需要注意的是，它指向的所有对象都必须从`Referenced`. 但是，如果您对此感到满意，我认为发生真正糟糕的事情要困难得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T16:59:34.763

在某些情况下`shared_ptr`是矫枉过正或没有正确地表现出所需的语义（例如传递所有权）。

您需要做的是查看您的设计并查看您需要的所有权模型。如果您需要/想要共享所有权，那么只需使用它`shared_ptr`来建模。如果共享/引用计数所有权不合适，请使用另一个智能指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T13:26:33.873

您的案例不适合在`auto_ptr`这里描述的很好的用途：[http](http://www.gotw.ca/publications/using_auto_ptr_effectively.htm) ://www.gotw.ca/publications/using_auto_ptr_effectively.htm （本周大师«有效使用auto_ptr）

据我了解，您构建了一个侦听器，然后将其交给事件管理器。所以事件管理器可以被看作是一个“接收器”。

使用 auto_ptr 技术，您的事件管理器可以干净、安全地完全拥有您提供给他的侦听器。

# jsf - 我应该如何使用 jsf 跟踪数据表记录的变化？

> ID：14262907
> 
> 赞同：0
> 
> 时间：2013-01-10T16:42:32.833
> 
> 标签：jsf

假设我有一个可编辑的表，这意味着我可以将值添加/更新到单个记录。这张表从数据库中带来了大约 20 条记录。

正如我之前所说，我可以添加或更新一条记录，所以我需要将这个仅更改的记录发送到数据库以进行处理/保存，而不是所有 20 条记录。

所以我的问题是如何将更改/修改的记录跟踪回数据库以提醒数据库仅处理这些更改的记录？

这可以使用 jsf Datatable 功能来完成吗？使用（richfaces -myfaces - icefaces - primfaces - etc--）

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:44:31.557

JSF 也没有那个功能和 icefaces。我不确定其他人。您可以通过以下步骤实现

1.  在表格行中有一个编辑按钮
2.  按下编辑按钮后，允许用户更新内容
3.  提交时，您可以轻松捕获已编辑的行数，仅保留已编辑的行

**看到这个：** [Primefaces DataTable - InCell 编辑](http://www.primefaces.org/showcase/ui/datatableEditing.jsf)

# javascript - 行点击数据表

> ID：14262910
> 
> 赞同：0
> 
> 时间：2013-01-10T16:42:49.410
> 
> 标签：javascript, datatables, jquery

我正在使用 jquery 数据表插件。行单击功能在第一页上运行良好，当我转到任何下一页时，行单击不起作用`.on("click", function() { ....});`

我试图替换`.on()`为`.live()`，似乎工作正常。我担心的是`.live()`自 jquery 1.7 以来已被弃用。这是一个错误`.on()`还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:46:45.273

如果你想使用`on`方法委托事件，你应该编码：

```
$(document).on("click", "selector", function() { ....}); 
```

或者：

```
$('staticParent').on("click", "dynamicDescendant", function() { ....}); 
```

# javascript - 将文本转换为图像

> ID：14262914
> 
> 赞同：0
> 
> 时间：2013-01-10T16:43:01.970
> 
> 标签：javascript, html

我想要做的是让 Y[0] 成为图像而不是文本。现在它只是纯文本的链接，而不是图像。

```
<html>
<head>
<script type="text/javascript">
function changeContent(){
    var x=document.getElementById('myTable').rows
    var y=x[0].cells
    y[0].innerHTML = "http://www.handicappedpets.com/wizards/img/wwmeasure2B.jpg"
}
</script>
</head>

<body>
<table id="myTable" border="1">
<tr>
<td>d</td>
<td>d</td>
</tr>
<tr>
<td>d</td>
<td>d</td>
</tr>
</table>
<form>
<input type="button" onclick="changeContent()" value="Change content">
</form>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:46:29.977

您只是将单元格的 html 设置为一些恰好是 url 的文本。您需要在单元格内创建一个 img 标签：

```
y[0].innerHTML = '<img src="http://www.handicappedpets.com/wizards/img/wwmeasure2B.jpg" />' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:47:51.733

试试这个：

```
y[0].innerHTML = '<img src="http://www.handicappedpets.com/wizards/img/wwmeasure2B.jpg" alt="Remove Criteria" />' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:48:26.020

关于什么

```
y[0].innerHTML = '<img src="http://www.handicappedpets.com/wizards/img/wwmeasure2B.jpg">'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T16:48:40.813

您需要将图像源保存在**标签，像这样**

 **```
y[0].innerHTML = "<img src='http://www.handicappedpets.com/wizards/img/wwmeasure2B.jpg'/>" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T16:53:06.193

您可以使用 javascript 动态创建图像并将其附加到单元格中。

```
window.changeContent = function () {
    var x = document.getElementById('myTable').rows,
        cell = x[0].cells[0],
        img = document.createElement('img');

    img.setAttribute('src', 'http://www.handicappedpets.com/wizards/img/wwmeasure2B.jpg');

    cell.innerHTML = '';
    cell.appendChild(img);

} 
```

[http://jsfiddle.net/C7KZu/](http://jsfiddle.net/C7KZu/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-10T16:46:40.263

你不能那样做。您可以做的是将该 URL 放入标签中并将其插入，或者创建一个新的 Image() 对象，设置它的 src 属性并将其插入到 DOM 中。**

# php - 避免警报 拒绝执行 JavaScript 脚本。在请求中找到的脚本源代码

> ID：14262915
> 
> 赞同：0
> 
> 时间：2013-01-10T16:43:02.733
> 
> 标签：php, javascript, html, google-chrome, xss

如何防止 chrome 抛出错误：**拒绝执行 JavaScript 脚本。在请求中找到脚本的源代码。** 发生这种情况是因为我的 html 代码包含在 mousedown 发生时启动一个函数的对象，例如：

```
<div>
<?php
    echo "<span onmousedown=\"myfunction();\"> example </span>";
    echo "<span onmousedown='myfunction();'> example 2 </span>";

?>
</div> 
```

重定向到同一页面时会发生错误，但是当我第一次进入页面或重新加载页面时不会发生这种情况。我不想禁用 **X-XSS-Protection**，我需要一个更优雅的解决方案。带有代码的解决方案：php、html 或 javascript

***我尝试合法使用该功能，而不是尝试注入脚本***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:55:55.780

尝试

```
<div>
<?php
echo "<span onmousedown='myfunction();'> example </span>"

?>
</div> 
```

注意单引号 arriund myfunction()

# javascript - 扩展菜单/子菜单

> ID：14262916
> 
> 赞同：0
> 
> 时间：2013-01-10T16:43:13.420
> 
> 标签：javascript, html

我正在用这个 HTML 制作一个菜单。

```
<div class="sidemenu-maincat">
    <img src="folder/maincat1.jpg" alt="Main cat1" id="toggle" />
</div>

<div class="sidemenu-subcat">
    <a href="submenu11.html"> - Submenu 11 </a>
</div>
<div class="sidemenu-subcat">
    <a href="submenu12.html"> - Submenu 12 </a>
</div>
<div class="sidemenu-subcat">
    <a href="submenu13.html"> - Submenu 13 </a>
</div>     

<div class="sidemenu-maincat">
    <img src="folder/main-cat2.jpg" alt="Main cat2 /> 
</div>

<div class="sidemenu-subcat">
    <a href="submenu21.html"> > Submenu 21 </a>
</div>
<div class="sidemenu-subcat">
    <a href="submenu22.html"> > Submenu 22 </a>
</div>
<div class="sidemenu-subcat">
    <a href="submenu23.html"> > Submenu 23 </a>
</div> 
```

我隐藏了“sidemenu-subcat”div，当我在“sidemenu-maincat”div 中按下图片时，我希望它显示/隐藏。我试图用 Javascript 来做到这一点，但我根本不知道怎么做。我不希望任何图书馆都能做到这一点。

我将我所有的 Javascript 保存在另一个文档中，这是我最接近解决我的问题的方法：

```
function toggling()
{
    if(document.getElementByClassName("hidden").style.display == "none")
    {
        document.getElementByClassName("hidden") = "block";    
    }
    else
    {
        document.getElementByClassName("hidden") = "none"; 
    }
}

function init()
{
    var toggle = document.getElementsByClassName("toggle");
    toggle.onclick = toggling;
} 
```

我知道这远非需要做的，但它是我所拥有的最接近的..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:27:21.993

好吧，我确实更喜欢为这类事情使用库，但我为你整理了一个纯 JavaScript 示例。虽然可能有更好的方法来做到这一点。

首先，每个子菜单都应该包含在它的 maincat div 中，并给定一个隐藏类，以便在页面加载时隐藏。

[工作示例](http://jsbin.com/ojedaf/2/edit)

```
.sidemenu-subcat.hidden {
    display: none;  
}

var sideMenuOptions = document.getElementsByClassName('sidemenu-maincat');
for (var i = 0; i < sideMenuOptions.length; i++) {
  sideMenuOptions[i].addEventListener('click', function() {
    var subMenuItems = this.getElementsByClassName('sidemenu-subcat');
    for (var s = 0; s < subMenuItems.length; s++) {
      var subItem = subMenuItems[s];
      // if the element is not visible it's offsets will be 0
      if (subItem.offsetWidth === 0 && subItem.offsetHeight === 0) {
        subItem.className = 'sidemenu-subcat';
      } else {
        subItem.className = subItem.className + ' hidden';
      }
    }
  });
} 
```

# jquery-ui - 淘汰赛可排序列表无法通过添加的新项目抵消

> ID：14262931
> 
> 赞同：0
> 
> 时间：2013-01-10T16:43:59.533
> 
> 标签：jquery-ui, knockout.js, jquery-ui-sortable, knockout-sortable

当我将项目添加到我的列表（通过单击“添加系列”按钮）时，它会导致我的列表无法正确排序。EG 如果我单击“添加系列”按钮，然后尝试将“seriesname232”移动到项目“trrde”和“1”之间，那么它将比它应该向下移动一个（在“1”下方）。我相信这是因为可排序列表没有考虑到添加了一些东西。下面是一个例子：

[http://jsfiddle.net/thebassix/yTAXh/](http://jsfiddle.net/thebassix/yTAXh/)

```
<div id="results">
            ---Hidden---
            <ul id="hidden" data-bind="sortable: { data: hiddenSeries, afterMove: hide}">
                <li data-bind="visible: Hidden, text: Name"></li>
            </ul>

    ---Unhidden---         
            <ul id="unhidden" data-bind="sortable: { data: unhiddenSeries, afterMove: unhide}">
                <li data-bind="visible: !Hidden(), text: Name"></li>
            </ul>
</div>
<hr/>
<div>All</div>
<ul data-bind="foreach: series">
    <li>
        <span data-bind="text: Name"></span> - 
        (<span data-bind="text: Hidden"></span>)
    </li>
</ul>
<input id="btnAddSeries" data-bind="click: addSeries" title="Add Series" class="ews_button" type="button" value="Add Series" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:34:09.733

问题是`Series`您要添加的对象具有`_destroy`可观察性。一般来说，`_destroy`只是一个普通属性，作为`destroy`KO集合的功能，它是一个普通属性。

因此，如果您不在构造函数中创建`_destroy`observable ，您的问题将得到解决，`Series`例如：

```
self._destroy = data._destroy; 
```

更新示例：http: [//jsfiddle.net/rniemeyer/63rup/](http://jsfiddle.net/rniemeyer/63rup/)

此外，我刚刚为插件添加了一个[修复程序](https://github.com/rniemeyer/knockout-sortable/commit/5e0408c28c3b1bb80335db74c4b0d2161d4d121b)，无论如何都会解包，所以这不会是一个问题。`sortable``_destroy`

# c# - 截屏一段时间后出现随机 System.ArgumentException

> ID：14262932
> 
> 赞同：1
> 
> 时间：2013-01-10T16:43:59.850
> 
> 标签：c#, exception, argumentexception

我的应用程序可以正常运行大约 5 分钟，然后它会抛出一些随机事件`System.ArgumentException`，如下面的屏幕截图所示： ![](../Images/4ac8377fd7f33fded68098bc3cf5c1e1.png) 这里的大问题是两个参数实际上似乎都是正确的，并且在大约 5 分钟内运行良好。我的应用程序只是在单独的线程中不断拍摄屏幕快照。

以下代码截取屏幕快照，并`System.ArgumentException`在此片段中引起 a （与屏幕截图相同）。

```
Bitmap SNew = new Bitmap(NewRes.Width, NewRes.Height);
using (Graphics g = Graphics.FromImage(SNew))
    g.CopyFromScreen(0, 0, 0, 0, new Size(NewRes.Width, NewRes.Height)); 
```

* * *

同样的异常也可能发生在该`CopyFromScreen`方法中，具有相同的看似正确的`NewRes`值（虽然没有出现在我的代码片段的第一行）：

```
An unhandled exception of type 'System.ArgumentException' occurred in System.Drawing.dll 
```

![](../Images/435f57f41899b3aaea1a435e2b7bd4ec.png)

![](../Images/edb37551d0700208e96662033aacbb6f.png)

* * *

如果我将此代码放在一个`try { } catch { }`子句中，它也可以*正常*工作（异常在日志中弹出大约 10 次后不再发生异常）。这当然不是一个很好的解决方案，有时它只是永远挂在那个异常中，在我重新启动应用程序之前根本不截屏。

我不知道为什么这些论点无效以及可能导致这种情况的原因。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:59:44.933

我可以肯定地为您提供的是一个具体的替代方案，它将产生相同的输出，但不是使用`CopyFromScreen`using`platform invoke`直接与 Windows API 进行互操作。你可以在这里找到一个完整的例子，[Hans Passant](https://stackoverflow.com/users/17034/hans-passant)作为对[这里](https://stackoverflow.com/questions/10233055/how-to-get-screenshot-to-include-the-invoking-window-on-xp/10234693#10234693)问题的回应。

但是，我不能肯定地告诉您为什么会遇到异常，但我可以从其他来源（例如[此线程](http://social.msdn.microsoft.com/forums/en-US/netfxbcl/thread/cedaa0f2-383c-4e61-92c0-c09123cb67cd/)（顺便将 Hans 再次作为 nobugz）和我自己的经验中推断出来，这`CopyFromScreen`是错误的，在这种情况下，可以遭受内存泄漏。考虑到我链接的线程，您的目标框架是哪个版本的 .NET Framework？

# xml - XSL 不工作，XML 文件似乎没有与之关联的任何样式信息

> ID：14262933
> 
> 赞同：1
> 
> 时间：2013-01-10T16:44:00.007
> 
> 标签：xml, xslt

我的 XML 文件似乎有问题。这是代码：

```
<?xml version='1.0' encoding="ISO-8859-2"?>
<?xml-stylesheet type="text/xsl" href="../xsl.xsl"?>

<centru>
    <bicicleta>
        <numar>3</numar>
        <model>Copii</model>
        <accesorii>Casca</accesorii>
    </bicicleta>

    <bicicleta>
        <numar>8</numar>
        <model>Adulti</model>
        <accesorii>Cosulet</accesorii>
    </bicicleta>

    <bicicleta>
        <numar>2</numar>
        <model>Adulti</model>
        <accesorii>Cosulet</accesorii>
    </bicicleta>

    <bicicleta>
        <numar>6</numar>
        <model>Doua Persoane</model>
        <accesorii>Fara Acc.</accesorii>
    </bicicleta>

    <bicicleta>        
        <numar>5</numar>
        <model>Adulti</model>
        <accesorii>Cosulet</accesorii>
    </bicicleta>

    <orar>
        <luni_vineri>08:00 - 18:00</luni_vineri>
        <sambata>10:00 - 16:00</sambata>
        <duminica> Inchis </duminica>
    </orar>

    <contact>
        <adresa>Splaiul Independentei nr. 290</adresa>
        <telefon tip="mobil">0765432100</telefon>
        <email>inchirieri@bicicleta.ro</email>
    </contact>
</centru> 
```

这是我的 XSL 文件的代码：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" method="html"/>
<xsl:template match="/">

<html>
    <body>
        <div class="main">
            <table width="300px\" align="center\" cellpadding="0\" cellspacing="0\" border="1\" style="background-color:66FFFF;font-family:verdana;font-size:10pt;border:1\">
                <tr>
                    <td  width="100px\"  align="center\" >Luni-Vineri</td>
                    <td width="100px\" align="center\">Sambata</td>
                    <td  width="100px\"  align="center\" >Duminica</td>
                </tr>
                <xsl:for-each select="centru/bicicleta">
                    <tr>
                        <td  width="100px"  align="center"   >
                            <xsl:value-of select="numar"/>
                        </td>
                        <td width="300px" align="center" >
                            <xsl:value-of select="model"/>
                        </td>
                        <td width="300px" align="center" >
                            <xsl:value-of select="accesorii"/>
                        </td>
                    </tr>
                </xsl:for-each>
            </table>
        </div>
    </body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

我收到以下错误：

```
This XML file does not appear to have any style information associated with it. 
```

文档树如下所示。我有一个指向我的 .xsl 文件的参考，但这似乎不是问题。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:49:49.747

我已经在我的计算机上尝试了 xml 和 xsl，当我将 xsl 与 xml 放在同一级别时，它就可以工作了。当我把它提高一级时，它不想工作。如果可能的话，你也可以这样做。你将拥有的这个

```
<?xml-stylesheet type="text/xsl" href="xsl.xsl"?> 
```

代替：

```
<?xml-stylesheet type="text/xsl" href="../xsl.xsl"?> 
```

# css - 最大高度的孩子：100% 溢出父母

> ID：14262938
> 
> 赞同：193
> 
> 时间：2013-01-10T16:44:08.850
> 
> 标签：css

我试图了解对我来说似乎出乎意料的行为：

我在一个也使用最大高度的容器中有一个最大高度为 100% 的元素，但出乎意料的是，子元素溢出了父元素：

测试用例：http: [//jsfiddle.net/bq4Wu/16/](http://jsfiddle.net/bq4Wu/16/)

```
.container {  
    background: blue; 
    padding: 10px; 
    max-height: 200px; 
    max-width: 200px; 
}

img { 
    display: block;
    max-height: 100%; 
    max-width: 100%; 
} 
```

但是，如果给父级指定了明确的高度，则这是固定的：

测试用例：http: [//jsfiddle.net/bq4Wu/17/](http://jsfiddle.net/bq4Wu/17/)

```
.container {  
    height: 200px;
} 
```

有谁知道为什么孩子在第一个例子中不尊重其父母的最大高度？为什么需要明确的高度？

* * *

## 回答 #1

> 赞同：292
> 
> 时间：2013-01-10T17:11:21.453

当您为孩子指定百分比时`max-height`，它是父母实际身高的百分比，而不是父母的`max-height`，[奇怪的是](http://www.w3.org/TR/CSS21/visudet.html#min-max-heights)。这同样适用于[`max-width`](http://www.w3.org/TR/CSS21/visudet.html#min-max-widths)。

因此，当您未在父项上指定显式高度时，则没有`max-height`要计算子项的基本高度，因此`max-height`计算为`none`，允许子项尽可能高。现在作用于子级的唯一其他约束是`max-width`其父级的，并且由于图像本身的高度大于宽度，它会向下溢出容器的高度，以便在保持其纵横比的同时仍然尽可能大。

当您*为父*级指定显式高度时，子级知道它最多必须是该显式高度的 100%。这允许它被限制在父级的高度（同时仍保持其纵横比）。

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2013-01-10T17:47:31.263

```
.container {
  background: blue;
  padding: 10px;
  max-height: 200px;
  max-width: 200px;
  float: left;
  margin-right: 20px;
}

.img1 {
  display: block;
  max-height: 100%;
  max-width: 100%;
}

.img2 {
  display: block;
  max-height: inherit;
  max-width: inherit;
}
```

```
<!-- example 1  -->
<div class="container">
  <img class='img1' src="http://via.placeholder.com/350x450" />
</div>

<!-- example 2  -->

<div class="container">
  <img class='img2' src="http://via.placeholder.com/350x450" />
</div>
```

我玩了一下。在 Firefox 中的较大图像上，使用继承属性值得到了很好的结果。这会对你有帮助吗？

```
.container {
    background: blue;
    padding: 10px;
    max-height: 100px;
    max-width: 100px;
    text-align:center;
}

img {
    max-height: inherit;
    max-width: inherit;
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-10-09T19:44:02.660

除了使用 max-height: 100%/100%，另一种填充所有空间的方法是使用`position: absolute`top/bottom/left/right 设置为 0。

换句话说，HTML 将如下所示：

```
<div class="flex-content">
  <div class="scrollable-content-wrapper">
    <div class="scrollable-content">
      1, 2, 3
    </div>
   </div>
</div> 
```

```
.flex-content {
  flex-grow: 1;
  position: relative;
  width: 100%;
  height: 100%;
}

.scrollable-content-wrapper {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  overflow: auto;
}

.scrollable-content {
} 
```

[您可以在Codesandbox - CSS Flex/Grid 中的溢出中](https://codesandbox.io/s/overflow-within-css-flexgrid-skcih)看到一个实时示例

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-11-21T15:51:43.127

我在这里找到了解决方案： [http ://www.sitepoint.com/maintain-image-aspect-ratios-responsive-web-design/](http://www.sitepoint.com/maintain-image-aspect-ratios-responsive-web-design/)

这个技巧是可能的，因为它在元素的 WIDTH 和 PADDING-BOTTOM 之间存在关系。所以：

家长：

```
container {
  height: 0;
  padding-bottom: 66%; /* for a 4:3 container size */
  } 
```

child（**删除所有与width相关的css**，即width:100%）：

```
img {
  max-height: 100%;
  max-width: 100%;
  position: absolute;     
  display:block;
  margin:0 auto; /* center */
  left:0;        /* center */
  right:0;       /* center */
  } 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-07-06T09:30:59.587

您可以使用属性[object-fit](http://codepen.io/afonsoduarte/pen/EaOROW)

```
.cover {
    object-fit: cover;
    width: 150px;
    height: 100px;
} 
```

就像[这里建议的一样](https://stackoverflow.com/a/29103071/1430607)

Chris Mills 在 Dev.Opera[中对此属性的完整解释](https://dev.opera.com/articles/css3-object-fit-object-position/)

还有[一个更好](https://css-tricks.com/almanac/properties/o/object-fit/)的 CSS-Tricks

它支持在

*   铬 31+
*   Safari 7.1+
*   火狐 36+
*   歌剧 26+
*   安卓 4.4.4+
*   iOS 8+

我刚刚检查了维瓦尔第和铬也支持它（这里不足为奇）

IE 目前不支持它，但是……[谁在乎](http://www.sitepoint.com/how-to-stop-wasting-time-developing-for-internet-explorer/)呢？此外，iOS 支持 object-fit，但不支持 object-position，但很快就会支持。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-05-10T20:43:07.787

这是最近打开的问题的解决方案，标记**为该**问题的副本。标签超过了 parent的`<img>`最大高度`<div>`。

破碎：[小提琴](https://jsfiddle.net/ahmas21k/)

工作：[小提琴](https://jsfiddle.net/6v3s7d21/)

在这种情况下，添加`display:flex`到 2 个父`<div>`标签就是答案

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-10T16:52:33.057

也许其他人可以解释您问题背后的原因，但您可以通过指定容器的高度然后将图像的高度设置为 100% 来解决它。重要的`width`是图像的 出现在 之前`height`。

```
<html>
    <head>
        <style>
            .container {  
                background: blue; 
                padding: 10px;
                height: 100%;
                max-height: 200px; 
                max-width: 300px; 
            }

            .container img {
                width: 100%;
                height: 100%
            }
        </style>
    </head>
    <body>
        <div class="container">
            <img src="http://placekitten.com/400/500" />
        </div>
    </body>
</html> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-01-10T17:17:47.710

我能得到的最接近的是这个例子：

[http://jsfiddle.net/YRFJQ/1/](http://jsfiddle.net/YRFJQ/1/)

或者

```
.container {  
  background: blue; 
  border: 10px solid blue; 
  max-height: 200px; 
  max-width: 200px; 
  overflow:hidden;
  box-sizing:border-box;
}

img { 
  display: block;
  max-height: 100%; 
  max-width: 100%; 
} 
```

主要问题是高度占容器高度的百分比，因此它在父容器中寻找明确设置的高度，而不是最大高度。

在某种程度上，我可以看到的唯一方法是上面的小提琴，您可以在其中隐藏溢出，但是填充仍然充当图像流入的可见空间，因此用实心边框代替（然后如果这是您需要的宽度，请添加边框框以使其为 200 像素）

不确定这是否符合您的需要，但我似乎能做到的最好。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-02-13T10:24:47.037

一个好的解决方案是不在父级上使用高度，而只在具有[View Port](https://www.w3schools.com/cSS/css_rwd_viewport.asp)的子级上使用它：

小提琴示例：[https ://jsfiddle.net/voan3v13/1/](https://jsfiddle.net/voan3v13/1/)

```
body, html {
  width: 100%;
  height: 100%;
}
.parent {
  width: 400px;
  background: green;
}

.child {
  max-height: 40vh;
  background: blue;
  overflow-y: scroll;
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-04-02T14:30:40.440

只需添加`display: flex;`到容器中即可。[看看这个](https://jsfiddle.net/eLya83w6/)。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-03-09T21:50:35.050

容器通常已经很好地包装了它们的内容。反过来，它通常也不能很好地工作：孩子们不能很好地满足他们的祖先。因此，在最里面的元素而不是最外面的元素上设置宽度/高度值，并让外部元素包裹它们的内容。

```
.container {
    background: blue;
    padding: 10px;
}

img {
    display: block;
    max-height: 200px;
    max-width: 200px;
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-09-24T11:16:15.420

[http://jsfiddle.net/mpalpha/71Lhcb5q/](http://jsfiddle.net/mpalpha/71Lhcb5q/)

```
.container {  
display: flex;
  background: blue; 
  padding: 10px; 
  max-height: 200px; 
  max-width: 200px; 
}

img { 
 object-fit: contain;
  max-height: 100%; 
  max-width: 100%; 
}
```

```
<div class="container">
  <img src="http://placekitten.com/400/500" />
</div>
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-01-10T17:22:20.537

您的容器没有高度。

添加高度：200px；

到容器 css 和小猫将留在里面。

# regex - jquery：正则表达式仅检测 + 和 -

> ID：14262941
> 
> 赞同：0
> 
> 时间：2013-01-10T16:44:23.653
> 
> 标签：regex

我有一个代码只允许输入数字和字母：

```
 if (this.value.match(/[^a-zA-Z0-9 ]/g)) {
            this.value = this.value.replace(/[^a-zA-Z0-9 ]/g, '');
        } 
```

如何更改过滤器以允许符号：+ 和 - 并删除数字、字母和其他？它一定与正则表达式有关，我不知道该怎么做。有什么快速的解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T16:46:24.323

您可以将这些字符添加到字符集中，并删除您现在要清除的字符。但是，在这里，`-`符号具有特殊含义，必须像这样转义：

```
 if (this.value.match(/[^+\-]/g)) {
        this.value = this.value.replace(/[^+\-]/g, '');
    } 
```

正如 inhan 在他的评论中指出的那样，由于连字符是该组中的最后一个字符，因此是明确的，因此很可能省略转义以仅使用此正则表达式：

```
/[^+-]/g 
```

但是我们都不确定这是否总是有效，而转义形式肯定会。

# ruby - Jekyll 扩展调用外部脚本

> ID：14262944
> 
> 赞同：2
> 
> 时间：2013-01-10T16:44:32.370
> 
> 标签：ruby, api, twitter, jekyll

我已经编写了一个简单的 Jekyll 插件来使用 twitter gem 来拉入我的推文（见下文）。我想将插件的 ruby​​ 脚本保留在我打开的 Github 站点上，但是随着最近对 twitter API 的更改，gem 现在需要身份验证凭据。

```
require 'twitter'   # Twitter API
require 'redcarpet' # Formatting links

module Jekyll
  class TwitterFeed < Liquid::Tag
    def initialize(tag_name, text, tokens)
      super
      input = text.split(/, */ )
      @user = input[0]
      @count = input[1]
      if input[1] == nil
        @count = 3
      end
    end
    def render(context)
      # Initialize a redcarpet markdown renderer to autolink urls
      # Could use octokit instead to get GFM
      markdown = Redcarpet::Markdown.new(Redcarpet::Render::HTML,
                                                 :autolink => true, 
                                                 :space_after_headers => true)

      ## Attempt to load credentials externally here:
      require '~/.twitter_auth.rb'

      out = "<ul>"
      tweets = @client.user_timeline(@user)
      for i in 0 ... @count.to_i
      out = out + "<li>" + markdown.render(tweets[i].text) +
        " <a href=\"http://twitter.com/" + @user + "/statuses/" + 
        tweets[i].id.to_s + "\">"  + tweets[i].created_at.strftime("%I:%M %Y/%m/%d") + 
        "</a> " + "</li>"
      end
      out + "</ul>"
    end
  end
end
Liquid::Template.register_tag('twitter_feed', Jekyll::TwitterFeed) 
```

如果我更换线路

```
 require '~/.twitter_auth.rb' 
```

其中`twitter_auth.rb`包含类似的内容：

```
require 'twitter'
@client = Twitter::Client.new(
:consumer_key => "CEoYXXXXXXXXXXX",
:consumer_secret => "apnHXXXXXXXXXXXXXXXXXXXXXXXX",
:oauth_token => "105XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
:oauth_token_secret => "BJ7AlXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
) 
```

如果我将这些内容直接放入上面的脚本中，那么我的插件脚本就可以正常工作。但是当我将它们移动到外部文件并尝试读取它们时，Jekyll 无法进行身份验证。当我从 调用该函数时，它似乎工作得很好`irb`，所以我不确定为什么它在 Jekyll 构建期间不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T23:33:34.210

我认为您可能对如何`require`工作感到困惑。当您调用 时`require`，Ruby 首先会检查该文件是否已被需要，如果是，则直接返回。如果没有，则运行文件的内容，但不在与`require`语句相同的范围内。换句话说，使用`require` *与*`require`用文件的内容替换*语句*不同（例如，C 的`#include`工作方式）。

在您的情况下，当您需要`~/.twitter_auth.rb`文件时，`@client`正在创建实例变量，但作为顶级`main`对象的实例变量，*而不是*作为被称为表单的`TwitterFeed`实例的实例变量。`require`

您*可以*执行一些操作，例如将`Twitter::Client`对象分配给一个常量，然后您可以从`render`方法中引用该常量：

```
MyClient = Twitter::Client.new{... 
```

接着

```
require '~/twitter_auth.rb'
@client = MyClient
... 
```

我仅建议将此作为对 发生的事情的解释`require`，这并不是一个真正的好技术。

我认为，一个更好的选择是将您的凭据以简单的数据格式保存在您的主目录中，然后从您的脚本中读取它们并使用它们创建 Twitter 客户端。在这种情况下，Yaml 可能会完成这项工作。

首先`~/twitter_auth.rb`用一个`~/twitter_auth.yaml`看起来像这样的替换你：

```
:consumer_key: "CEoYXXXXXXXXXXX"
:consumer_secret: "apnHXXXXXXXXXXXXXXXXXXXXXXXX"
:oauth_token: "105XXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
:oauth_token_secret: "BJ7AlXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX" 
```

然后你`requre "~/twitter_auth.rb"`在课堂上的位置，用这个替换（你还需要`require 'yaml'`在文件的顶部）：

```
@client = Twitter::Client.new(YAML.load_file("~/twitter_auth.yaml")) 
```

# css - 简单的 CSS 下拉菜单在不同浏览器中的显示方式不同

> ID：14262945
> 
> 赞同：0
> 
> 时间：2013-01-10T16:44:33.080
> 
> 标签：css, cross-browser, submenu

嗨，感谢您在 SO 阅读我的第一个问题。

我是[http://www.theacoutlet.com](http://www.theacoutlet.com)的管理员，我正在添加一些内容页面。我从中间导航中提取了一个元素。栏（“查找产品”）并在悬停时通过 CSS 使其成为下拉列表。

CSS（下）已经过验证。

问题是这个子菜单现在*在 Firefox、IE 和 Chrome 中以三种不同的方式*显示。在我看来，这不是很复杂，我很困惑。它根本不显示*在*IE 中，当然我们的大多数客户都使用 IE。

IE：悬停时根本不显示子菜单。

Firefox：显示子菜单，顶部有一个奇怪的列表项项目符号（不在 HTML 中！），菜单出现在原始的“查找产品”文本上方。

Chrome：子菜单显示完美，唯一的问题是当您尝试将鼠标悬停在新项目上时它很容易消失......需要非常快速/精确的鼠标移动以防止菜单消失。

代码如下。感谢您的阅读并感谢您的帮助！

HTML：

```
<div class="menisell2">

<a href="search.php" class="menisell2">FIND PRODUCTS</a> <img src="images/de_26.jpg" width="1" height="22" border="0" align="middle"> 

<span class="menisell2content">

<a href="search.php"><br>SEARCH</a><br><br>

<a href="products1.php">COOLING</a><br><br>

<a href="products2.php">HEAT PUMP</a><br><br>

<a href="products3.php">DUAL FUEL</a><br><br>

<a href="products4.php">GAS HEAT</a><br><br>

<a href="products5.php">MINI SPLITS</a><br><br>

<a href="products6.php">PACKAGE UNITS</a><br><br>
</span>

</div> 
```

CSS：

```
.menisell2, .menisell2 a:visited {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 12px;
    color: #FFFFFF;
    text-decoration: none;
    font-weight: bold;
    display: inline;
    position:relative;
}

.menisell2 a:visited {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 12px;
    color: #FFFFFF;
    text-decoration: none;
    font-weight: bold;
}

.menisell2content a:visited {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 12px;
    color: #FFFFFF;
    text-decoration: none;
    font-weight: bold;
}

.menisell2:hover  {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 12px;
    font-weight: bold;
    color: #CE252C;
    text-decoration: none;
} 

.menisell2 a  {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 12px;
    font-weight: bold;
    color: #FFFFFF;
    text-decoration: none;
}

.menisell2content a  {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 12px;
    font-weight: bold;
    color: #FFFFFF;
    text-decoration: none;
    background-color: #4682B4;
}

.menisell2content a:hover  {

color: #CE252C;

}

.menisell2:hover .menisell2content{

visibility:visible;

}

.menisell2content{
visibility:hidden;
position:absolute;
width:100%;
display:list-item;
font-size: 12px;
color: #FFFFFF;
background-color: #4682B4;
} 
```

# macos - Cocoa MVC：“模型控制器”和“视图控制器”之间的交互

> ID：14262950
> 
> 赞同：3
> 
> 时间：2013-01-10T16:44:54.597
> 
> 标签：macos, cocoa, model-view-controller

*刚开始在 BNR 的Cocoa Programming for Mac OS X (4th Ed.)*的帮助下学习 Objective-C 和 Cocoa，我正在开发一个基于文档的应用程序。我已经阅读了 Apple 关于文档架构的开发人员文档，并选择了子类`NSWindowController`并覆盖`makeWindowControllers`我的`NSDocument`子类。我这样做有几个原因：

*   将模型逻辑（在`NSDocument`子类中）与视图逻辑（在`NSWindowController`子类中）分开。
*   自定义我的文档窗口的标题（Apple 的开发人员文档说，在没有不需要的副作用的情况下执行此操作的正确方法是子类化`NSWindowController`和覆盖`windowTitleForDocumentDisplayName:`
*   Apple 的文档似乎强烈建议`NSWindowController`对除了最简单的应用程序之外的所有应用程序进行子类化，而我的绝对不是“简单的”

所以，我的`NSDocument`子类是**模型控制器**，我的`NSWindowController`子类是**视图控制器**。此外，我了解应用程序的大部分“工作”都是在控制器对象中完成的，因为视图和模型应该尽可能与应用程序无关且可重用。现在我的问题来了：这两种类型的控制器如何交互以实际完成这项“工作”？

例如，假设我正在编写一个电子表格应用程序，并且我希望有一个菜单项（或工具栏按钮），它会调出一个工作表，用于根据我的一些数据创建图表或图形。在该表中，用户将输入有关如何创建图表或图形的各种参数和选项，然后单击“确定”（或调用任何按钮）。

谁应该响应菜单项的操作，文档（模型控制器）或窗口控制器（视图控制器）？实际加载和显示工作表的任务似乎显然是“与视图相关的”，所以它应该放在窗口控制器中，对吗？但是工作表的控制器需要一个模型来显示给用户（一个`Chart`对象，或者可能`ChartInputs`）；该模型在哪里创建并提供给工作表控制器？文档是否应该通过创建`ChartInputs`模型对象，然后将其传递给窗口控制器，它创建工作表控制器，将模型对象传递给它，并显示工作表？或者窗口控制器是否应该响应菜单项，请求一个新的模型对象（可能通过依赖注入到窗口控制器的构造函数中提供的某种工厂），然后继续创建工作表控制器，传递模型并显示单子？

用户填写表格并单击“确定”后会怎样？应该将控制返回到哪里来处理用户的选择并实际创建图表——窗口控制器、文档或两者兼而有之？在用户单击“确定”之后但在关闭工作表之前（以防某些内容无效）验证用户输入的逻辑呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T18:41:20.157

首先，考虑 NSDocument 的无窗口操作。例如，您可以创建一个实用程序应用程序，它共享您的 NSDocument 类，打开文档以进行脚本、打印或其他操作，但不显示您的主文档窗口。想象一下您的 NSDocument 类为该应用程序重用 - 并将您不想要的逻辑放入您的窗口控制器。这样，NSDocument 子类主要负责影响文档状态的活动。

这些是模型控制器（NSDocument 子类）的职责：

*   序列化和反序列化
*   加载和保存
*   操作文档的状态
*   管理和调度打印视图
*   监控其他人对文档的更改
*   刷新支持数据源——影响文档模型的源——并根据需要对模型和文档应用更改
*   管理与文档相关的活动日志
*   拥有撤消管理器
*   将基本模型对象暴露给视图控制器
*   创建窗口控制器
*   促进一些编辑行为，例如对一个属性的更改触发创建或删除对象

*如果您使用 Core Data，您的托管对象上下文、持久存储协调器和持久存储是模型控制器的一部分，而不是模型。*当然，托管对象本身也是模型的一部分。

这将这些责任留给了模型：

*   用于插入、重新排列和删除模型对象的辅助方法
*   用于访问模型特定部分的辅助方法
*   数据验证
*   以各种格式将模型渲染为字符串
*   序列化和反序列化自己
*   促进一些编辑行为，例如对一个属性的更改触发对其他属性的更改

另一方面，这些是视图控制器的职责：

*   操作视图以使其与模型保持同步
*   操作视图以使其与文档状态保持同步
*   响应本地化操作，例如添加或删除模型对象的按钮
*   呈现辅助视图并响应这些视图中的输入
*   调度受 UI 中的选择影响的操作，例如表格视图中的选定行
*   管理编辑过程中使用的与文档本身无关的辅助控制器（例如 Web 服务数据）
*   作为视图对象的数据源

*如果您使用的是 Cocoa 绑定，那么您的绑定也是视图控制器的一部分。*

这种设计在视图控制器和模型控制器之间产生了合理的职责分离。但是，它们**都**位于视图和模型之间。虽然这会产生模块化，但不会产生解耦。

尽管我确实考虑过无窗口操作，但我在很大程度上是凭经验得出了这种设计模式——通过将相似的代码放在一起并将感觉不合适的代码分开。我很好奇其他人是否发布了同意或不同意如何做到这一点的权威资料或参考资料。

* * *

以您为例，我建议采用以下设计：

1.  EditorWindowController 创建 ChartParameters 对象并为其提供对文档模型的引用：

    ```
    [[ChartParameters alloc] initWithWorkbook:self.document.workbook] 
    ```

2.  EditorWindowController 设置新图表视图，它可能有自己的 NewChartViewController。它将 ChartParameters 和文档对象传递给 NewChartViewController 并显示窗口。

3.  ChartParameters 对象负责验证用户的选择。NewChartViewController 需要操作视图以使其与验证结果保持同步。（避免让用户犯错误：不要等到最后才验证输入。）

4.  当视图完成时，NewChartViewController 要求模型使用给定的参数创建一个新图表：

    ```
    [self.document.workbook addChartWithParameters:self.chartParameters] 
    ```

如果您希望 not-yet-a-chart 对象成为文档的一部分，您可以这样做：

1.  EditorWindowController 要求文档模型创建一个新的图表对象：

    ```
    Chart *newChart = [self.document.workbook addChart] 
    ```

2.  新图表应该设置一个标志，表明它还没有准备好显示。

3.  EditorWindowController 设置 NewChartViewController，将图表传递给它，显示窗口。

4.  Chart 对象验证用户的选择，NewChartViewController 使视图保持同步。

5.  完成后，告诉图表它已准备好显示。或者，如果用户取消，请将其删除。

在这两种设计中，NewChartViewController 是一个模型控制器和视图控制器，针对其特定任务进行了本地化。

# c# - Windows 身份基础

> ID：14262954
> 
> 赞同：3
> 
> 时间：2013-01-10T16:45:01.970
> 
> 标签：c#, wif

我正在使用 Windows 身份基础框架 3.5。我已经将它安装在我的开发盒上，并且一切正常。我的问题是生产服务器。

有没有办法不在生产服务器上安装框架并且仍然让 MVC 应用程序工作？现在我收到错误：

未解析成员的类型`Microsoft.IdentityModel.Claims.ClaimsPrincipal,Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35`。

这是意料之中的，因为框架不存在，显然简单的答案是安装框架，但这不在我的控制范围内。

我尝试过的事情，将引用、、、和`Microsoft.IdentityModel.dll`直接添加到项目中，并将它们设置为复制到输出目录。这不起作用。`Microsoft.IdentityModel.WindowsTokenService.dll``Microsoft.IdentityModel.resources.dll``Microsoft.IdentityModel.WIndowsTokenService.resources.dll`

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-08T14:03:28.570

希望这能帮助其他有同样问题的人，Windows Identity Foundation 现在可以作为 nuget 包使用，您可以使用以下方式安装：

```
Install-Package Microsoft.IdentityModel 
```

[http://www.nuget.org/packages/Microsoft.IdentityModel/](http://www.nuget.org/packages/Microsoft.IdentityModel/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T18:34:24.653

您可以将 DLL 添加到 MVC 应用程序的 bin 目录中。

# intellij-idea - IntelliJ 12 缺少部署

> ID：14262964
> 
> 赞同：2
> 
> 时间：2013-01-10T16:45:49.423
> 
> 标签：intellij-idea

刚刚从 11 更新到 IntelliJ 12。我再也找不到 **部署**功能了。

以前它在菜单中，`Tools > Deployment`现在它消失了。我也无法在插件列表中找到它。但是根据[Web 帮助](http://www.jetbrains.com/idea/webhelp/options.html)，它应该在那里。

知道如何启用它吗？

编辑：我有终极版。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-11T14:11:22.043

确保**远程主机访问**插件（这是部署功能的实际名称）已安装并启用（尽管它应该默认安装和启用，因为它是标准功能..除非您在某些时候进行了一些重新配置（例如在升级期间））。

您还可以检查`idea.log`（Help | Reveal log in ...）——它将列出所有已加载的插件，以便您验证它是否已加载。

# java - 如何更新，删除sqliteb android中的sql值

> ID：14262965
> 
> 赞同：-2
> 
> 时间：2013-01-10T16:45:49.713
> 
> 标签：java, android, android-sqlite

我可以创建数据库并访问这些值，但我遇到的问题是更新与标识符关联的值。基本上我有

```
 id    |  value
 |1|        1
 |2|        2
 |3|        3 
```

我正在寻找更新 (id) 2 等值的方法。还有如何删除该行。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-10T16:54:09.703

下面的教程有你所需要的一切，请通过

[http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

好一个，

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

# asp.net - DATA 和 IMAGE 填充在两行中。我想将它们绑定在一行中

> ID：14262967
> 
> 赞同：2
> 
> 时间：2013-01-10T16:46:12.577
> 
> 标签：asp.net, database, image, photo, records

我要第二次问这个了。我要把它说清楚，这样你就可以帮助我:) 好的，让我们开始吧。

我有一个注册过程。我把这个过程分成两页。第一页仅用于“个人信息”。然后当我单击下一步按钮时，将出现下一页（postbackURL）此页面用于“上传照片”页面。他们工作正常！数据和图像显示在我的 gridview 控件上。但我的问题就在这里：如下图所示。数据分为两行！我希望它们只出现在单行中！我认为问题是第 1 页的数据库没有继续。这就是为什么当我在第 2 页上传图像时，数据库将创建另一条记录。嗯...有什么问题:) 我不知道该怎么做。请帮忙！

下表中显示的数据仅为虚拟数据。请不要认真对待。 ![在此处输入图像描述](../Images/39ceadc6bf941891661c75690a6462d4.png)

这是 PersonalINFO.aspx 页面的 INSERT/UPDATE 代码：

```
<asp:AccessDataSource runat="server" ID="AccessDataSource1" DeleteCommand="DELETE FROM [PendingRecords] WHERE [ID] = ?" InsertCommand="INSERT INTO [PendingRecords] ([Username], [Password], [FirstName], [LastName], [MiddleName], [Address], [Gender], [ContactNumber], [PlateNumber], [Color], [Brand], [LiscensedNumber]) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)" UpdateCommand="UPDATE [PendingRecords] SET [Username] = ?, [Password] = ?, [FirstName] = ?, [LastName] = ?, [MiddleName] = ?, [Address] = ?, [Gender] = ?, [ContactNumber] = ?, [PlateNumber] = ?, [Color] = ?, [Brand] = ?, [LiscensedNumber] = ? WHERE [ID] = ?" DataFile="_private/records.mdb" SelectCommand="SELECT * FROM [PendingRecords]">
        <DeleteParameters>
            <asp:parameter Name="ID" Type="Int32" />
        </DeleteParameters>
        <UpdateParameters>
            <asp:parameter Name="Username" Type="String" />
            <asp:parameter Name="Password" Type="String" />
            <asp:parameter Name="FirstName" Type="String" />
            <asp:parameter Name="LastName" Type="String" />
            <asp:parameter Name="MiddleName" Type="String" />
            <asp:parameter Name="Address" Type="String" />
            <asp:parameter Name="Gender" Type="String" />
            <asp:parameter Name="ContactNumber" Type="String" />
            <asp:parameter Name="PlateNumber" Type="String" />
            <asp:parameter Name="Color" Type="String" />
            <asp:parameter Name="Brand" Type="String" />
            <asp:parameter Name="LiscensedNumber" Type="String" />
            <asp:parameter Name="ID" Type="Int32" />
        </UpdateParameters>
        <InsertParameters>
            <asp:parameter Name="Username" Type="String" />
            <asp:parameter Name="Password" Type="String" />
            <asp:parameter Name="FirstName" Type="String" />
            <asp:parameter Name="LastName" Type="String" />
            <asp:parameter Name="MiddleName" Type="String" />
            <asp:parameter Name="Address" Type="String" />
            <asp:parameter Name="Gender" Type="String" />
            <asp:parameter Name="ContactNumber" Type="String" />
            <asp:parameter Name="PlateNumber" Type="String" />
            <asp:parameter Name="Color" Type="String" />
            <asp:parameter Name="Brand" Type="String" />
            <asp:parameter Name="LiscensedNumber" Type="String" />
        </InsertParameters>
    </asp:AccessDataSource> 
```

这是 UploadPhoto.aspx 页面中 btnUpload_Click 的代码：

```
<script runat="server" type="text/c#">
protected void btnUpload_Click(object sender, EventArgs e)

{
    {
   byte[] imageSize = new byte
                 [FileUpload1.PostedFile.ContentLength];
  HttpPostedFile uploadedImage = FileUpload1.PostedFile;
  uploadedImage.InputStream.Read
     (imageSize, 0, (int)FileUpload1.PostedFile.ContentLength);
 // Create SQL Connection 
  OleDbConnection con = new OleDbConnection();
  con.ConnectionString = ConfigurationManager.ConnectionStrings["recordsConnectionString12"].ConnectionString;
 // Create SQL Command 
 OleDbCommand cmd = new OleDbCommand();
 cmd.CommandText = "INSERT INTO PendingRecords([Image])" + " VALUES (@Image)";
 cmd.CommandType = CommandType.Text;
 cmd.Connection = con;

 OleDbParameter UploadedImage = new OleDbParameter
              ("@Image", OleDbType.VarBinary, imageSize.Length);

 UploadedImage.Value = imageSize;
 cmd.Parameters.Add(UploadedImage);
 con.Open();
 cmd.ExecuteNonQuery();  
 GridView1.DataSourceID = "";
 GridView1.DataSource = SqlDataSource1;
 GridView1.DataBind();
 con.Close();
 }
}
</script> 
```

UploadPhoto.aspx 页面数据源代码：

```
<asp:SqlDataSource runat="server" id="SqlDataSource1" ProviderName="<%$ ConnectionStrings:recordsConnectionString12.ProviderName %>" ConnectionString="<%$ ConnectionStrings:recordsConnectionString12 %>" SelectCommand="SELECT * FROM [PendingRecords]" DeleteCommand="DELETE FROM [PendingRecords] WHERE [ID] = ?" InsertCommand="INSERT INTO [PendingRecords] ([Username], [Password], [FirstName], [LastName], [MiddleName], [Address], [Gender], [ContactNumber], [PlateNumber], [Color], [Brand], [LiscensedNumber]) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)" UpdateCommand="UPDATE [PendingRecords] SET [Username] = ?, [Password] = ?, [FirstName] = ?, [LastName] = ?, [MiddleName] = ?, [Address] = ?, [Gender] = ?, [ContactNumber] = ?, [PlateNumber] = ?, [Color] = ?, [Brand] = ?, [LiscensedNumber] = ? WHERE [ID] = ?">
    <DeleteParameters>
        <asp:parameter Name="ID" Type="Int32" />
    </DeleteParameters>
    <UpdateParameters>
        <asp:parameter Name="Username" Type="String" />
        <asp:parameter Name="Password" Type="String" />
        <asp:parameter Name="FirstName" Type="String" />
        <asp:parameter Name="LastName" Type="String" />
        <asp:parameter Name="MiddleName" Type="String" />
        <asp:parameter Name="Address" Type="String" />
        <asp:parameter Name="Gender" Type="String" />
        <asp:parameter Name="ContactNumber" Type="String" />
        <asp:parameter Name="PlateNumber" Type="String" />
        <asp:parameter Name="Color" Type="String" />
        <asp:parameter Name="Brand" Type="String" />
        <asp:parameter Name="LiscensedNumber" Type="String" />
        <asp:parameter Name="ID" Type="Int32" />
    </UpdateParameters>
    <InsertParameters>
        <asp:parameter Name="Username" Type="String" />
        <asp:parameter Name="Password" Type="String" />
        <asp:parameter Name="FirstName" Type="String" />
        <asp:parameter Name="LastName" Type="String" />
        <asp:parameter Name="MiddleName" Type="String" />
        <asp:parameter Name="Address" Type="String" />
        <asp:parameter Name="Gender" Type="String" />
        <asp:parameter Name="ContactNumber" Type="String" />
        <asp:parameter Name="PlateNumber" Type="String" />
        <asp:parameter Name="Color" Type="String" />
        <asp:parameter Name="Brand" Type="String" />
        <asp:parameter Name="LiscensedNumber" Type="String" />
    </InsertParameters>
</asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T17:28:47.140

您需要将 ID 从个人信息页面传递到上传页面（可能通过查询字符串）。

然后您的图像更新查询应该是和 UPDATE 查询，见下文。

```
cmd.CommandText = "UPDATE PendingRecords SET [Image] = @Image WHERE ID = @ID"; 
```

您现在将根据需要传入 ID 参数。

如果参数在查询字符串中 ( /UploadPhoto.aspx?id=60 )

```
OleDbParameter UploadedImage = new OleDbParameter
              ("@Image", OleDbType.VarBinary, imageSize.Length);

 UploadedImage.Value = imageSize;
 cmd.Parameters.Add(UploadedImage);

OleDbParameter IdParameter = new OleDbParameter("@ID", Request.QueryString["id"]);
    cmd.Parameters.Add(IdParameter); 
```

# c# - Windows 8 找到 NFC 但 ProximityDevice.GetDefault() 返回“null”

> ID：14262974
> 
> 赞同：1
> 
> 时间：2013-01-10T16:46:39.957
> 
> 标签：c#, windows-8, microsoft-metro

Windows 8 找到 NFC，我在设置页面上看到切换按钮。

我尝试使用 Proximity [http://code.msdn.microsoft.com/windowsapps/Proximity-Sample-88129731](http://code.msdn.microsoft.com/windowsapps/Proximity-Sample-88129731) C# 的 Metro 应用程序示例，但方法 ProximityDevice.GetDefault() 返回“null”。

# java - 猜词器中的逻辑错误

> ID：14262978
> 
> 赞同：0
> 
> 时间：2013-01-10T16:46:52.687
> 
> 标签：java

假设这是一个单词猜测器，它有 5 次输入辅音的机会。我在循环中有问题，检查输入的字母是否在单词中并且它是辅音。

```
public class julia1 {

public static void main(String[] args) {

    System.out.print("enter text to guess: ");
    String w = Keyboard.readString();
    char c1; String temp= "";
    String asterix = "";
    boolean character  = false, vowel = false, consonant =false, number= false;

    for(int c = 0; c < w.length(); c++){
        if(w.charAt(c)==(' ')) asterix = asterix + " ";
        else asterix = asterix + "*";
    }

    System.out.println(asterix);
    for (int trys = 0; trys <=5; trys++){ 
        temp=""; 
        System.out.print("enter a consonant: ");
        c1 = Keyboard.readChar();

        for (int i = 0; i < w.length(); i++)
        {

            if (w.charAt(i) >= 'a' &&w.charAt(i)<='z')
                character = true;

            if (w.charAt(i) >= 'A' && w.charAt(i)<='Z')
                character = true;

            if (character == true){
                switch (w.charAt(i)){
                    case 'a': case 'A': case 'o': case 'O':
                    case 'e': case 'E':
                    case 'i': case 'I':
                    case 'u': case 'U': vowel = true; break;
                    default : consonant = true;
                }       
                if (c1 >= '0' && c1 <='9')
                number=true;        

            }
        }

        for(int c = 0; c < w.length(); c++){ 
            if((w.charAt(c)==c1) && (consonant == true ))
                temp = temp + c1;
            else if (vowel==true) {
                temp = temp + asterix.charAt(c);
                System.out.println("this is a vowel not consonant");
            }
            else {
                System.out.println("this is not a valid letter");
            }     
        }
        asterix = temp; 
        System.out.println(asterix) ;
    } 
}
} 
```

这是输入第一个字母后的输出。

```
 Player 1 enter text to guess: hello everyone
         ***** ********
         Player 2 enter a consonant: h
         this is a vowel not consonant
         this is a vowel not consonant
         this is a vowel not consonant
         this is a vowel not consonant
         this is a vowel not consonant
         this is a vowel not consonant
         this is a vowel not consonant
         this is a vowel not consonant
         this is a vowel not consonant
         this is a vowel not consonant
         this is a vowel not consonant
         this is a vowel not consonant
         h**** ********
         Player 2 enter a consonant: 
```

我知道它这样做是因为它对短语中的每个字母都重复。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:33:43.680

我看起来您正在尝试检查字符输入（辅音猜测）是否有有效的辅音输入，但这不是您正在检查的内容，并且还有一些问题是您正在检查输入字符串中的字符的猜测.

我认为，如果您更刻意地命名变量，它将对您有很大帮助。我很难弄清楚哪些变量名为`asterix`, `w`, `c`, 和`c1`意思，个人，这也可能导致你的一些困惑。

我已将这些名称替换为对我更有意义的名称，并在我看到问题时提供了一些评论。我不相信我已经修改了逻辑。希望这能让你到达某个地方。

```
public class julia1 {

public static void main(String[] args) {

    System.out.print("enter text to guess: ");
    String phraseToSearch = Keyboard.readString();
    char guessedConsonant; String temp= "";
    String displayWithAsterix = "";
    boolean character  = false, vowel = false, consonant =false, number= false;

    for(int charIndex = 0; charIndex < phraseToSearch.length(); c++){
        if(phraseToSearch.charAt(charIndex)==(' ')) displayWithAsterix = displayWithAsterix + " ";
        else displayWithAsterix = displayWithAsterix + "*";
    }

    System.out.println(displayWithAsterix);
    for (int trys = 0; trys <=5; trys++){ 
        temp=""; 
        //Warning!  When trys = 2, you haven't reset the boolean flags 
        //from the previous iteration!
        //If you entered '2', after a letter last time, then after the checks below, you would have:
        //character = true
        //vowel = false
        //consonant = true
        //number = true
        System.out.print("enter a consonant: ");
        guessedConsonant = Keyboard.readChar();

        //It looks like you want to validate that the guess is a consonant.
        //You don't need a loop to view a single char,
        //and w, or what I have renamed: phraseToSearch
        //is not the guessd char.
        for (int i = 0; i < phraseToSearch.length(); i++)
        {

            if (phraseToSearch.charAt(i) >= 'a' && phraseToSearch.charAt(i)<='z')
                character = true;

            if (phraseToSearch.charAt(i) >= 'A' && phraseToSearch.charAt(i)<='Z')
                character = true;

            if (character == true){
                switch (phraseToSearch.charAt(i)){
                    case 'a': case 'A': case 'o': case 'O':
                    case 'e': case 'E':
                    case 'i': case 'I':
                    case 'u': case 'U': vowel = true; break;
                    default : consonant = true;
                }        
                if (guessedConsonant >= '0' && guessedConsonant <='9')
                number=true;        

            }
        }

        for(int charIndex = 0; charIndex < phraseToSearch.length(); c++){ 
            if((phraseToSearch.charAt(charIndex)==guessedConsonant) && (consonant == true ))
                //Great, we're adding a hit guess to the output
                temp = temp + guessedConsonant;
            else if (vowel==true) {
                //And an whatever is in the developing display string if it's a vowel, good.
                temp = temp + displayWithAsterix.charAt(charIndex);
                //This, and the next print, look like they should be above, validing that the input
                //is a valid consonant.
                System.out.println("this is a vowel not consonant");
            }
            else {
                System.out.println("this is not a valid letter");
                //But what about the output string, don't we still need to add to it  here?                    
            }     
                //And what if it's a consonant, but doesn't match?
                //Shouldn't you still add:
                //temp = temp + displayWithAsterix.charAt(charIndex);
        }
        displayWithAsterix = temp; 
        System.out.println(displayWithAsterix) ;
    } 
}
} 
```

# git - 使用 git-format patch master 时如何显示整个上下文

> ID：14262981
> 
> 赞同：0
> 
> 时间：2013-01-10T16:46:57.913
> 
> 标签：git, format-patch

我正在尝试使用“git format-patch master”生成差异。

这很好，但我希望补丁显示完整的上下文（即具有差异的整个文件）。

有没有我可以通过的论点来使它起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:18:18.540

I found --unified=n , so I can just use a large number, and the whole context will appear :-)

# node.js - Node.js 主机名/IP 与证书的替代名称不匹配

> ID：14262986
> 
> 赞同：87
> 
> 时间：2013-01-10T16:47:13.227
> 
> 标签：node.js

我有代码：

```
var r = require('request');
r({
  method: 'POST',
  url: 'https://api.dropbox.com'},
  function() { console.log(arguments)  } ) 
```

当我使用 Node 0.9.4 在桌面上运行它时，我在控制台中得到了这个：

```
{ '0': [Error: Hostname/IP doesn't match certificate's altnames] } 
```

当我在使用 Node 0.6.12 的上网本上运行它时，一切正常，没有错误（302 响应 - 我认为它是正确的）。

在[Node.js 主机名/IP 与证书替代名称不匹配](https://stackoverflow.com/questions/13225584/node-js-hostname-ip-doesnt-match-certificates-altnames/14262636)的问题中，Rojuinex 写道：“是的，浏览器问题......对不起”。“浏览器问题”是什么意思？

UPD。在 Node v0.8 上回滚后，此问题已解决

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-05-01T00:41:44.523

从 0.9.2（包括 0.10.x）开始，node.js 现在默认验证证书。这就是为什么当你升级到 node.js 0.8 之后你会看到它变得更加严格。（HT：[https](https://github.com/mscdex/node-imap/issues/181#issuecomment-14781480) ://github.com/mscdex/node-imap/issues/181#issuecomment-14781480 ）

`{rejectUnauthorized:false}`您可以使用该选项避免这种情况，但是这会**带来严重的安全隐患**。您发送给对等方的任何内容仍将被加密，但发起中间人攻击变得*更加*容易，即您的数据将被加密给对等方，但对等方本身并不是您认为的服务器！

最好先诊断证书未授权的原因，然后看看是否可以修复。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2015-01-21T15:56:09.487

一个稍微更新的答案（因为我在不同的情况下遇到了这个问题。）

当您使用 SSL 连接到服务器时，服务器所做的第一件事就是提供一个证书，上面写着“我是 api.dropbox.com”。证书有一个“主题”，该主题有一个“CN”（“通用名称”的缩写）。证书也可以有一个或多个“subjectAltNames”。当 node.js 连接到服务器时，node.js 会获取此证书，然后验证它认为它正在连接的域名 (api.dropbox.com) 是否与主题的 CN 或其中一个替代名称匹配。请注意，在节点 0.10.x 中，如果您使用 IP 连接，则 IP 地址必须在 altnames 中 - node.js 不会尝试根据 CN 验证 IP。

将`rejectUnauthorized`标志设置为 false 将绕过此检查，但首先，如果服务器为您提供的凭据与您预期的不同，则会发生一些可疑的事情，其次这也会绕过其他检查 - 如果您这样做不是一个好主意'正在通过 Internet 连接。

如果你使用 node >= 0.11.x，你还可以为[`checkServerIdentity: function(host, cert)`](https://nodejs.org/api/tls.html#tls_tls_connect_options_callback)tls 模块指定一个函数，如果你想允许连接，它应该返回，`undefined`否则抛出异常（虽然我不知道是否`request`会通过代理这个标志tls 为你。）声明这样的函数并`console.log(host, cert);`弄清楚到底发生了什么可能很方便。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2017-08-08T22:50:02.103

修复包[http-proxy的问题](https://github.com/nodejitsu/node-http-proxy)

**1) HTTP (localhost) 访问 HTTPS** 要解决此问题，请将 changeOrigin 设置为 true。

```
const proxy = httpProxy.createProxyServer();

proxy.web(req, res, {
  changeOrigin: true,
  target: https://example.com:3000,
}); 
```

**2) HTTPS 访问 HTTPS**你应该包括 SSL 证书

```
httpProxy.createServer({
  ssl: {
    key: fs.readFileSync('valid-ssl-key.pem', 'utf8'),
    cert: fs.readFileSync('valid-ssl-cert.pem', 'utf8')
  },
  target: 'https://example.com:3000',
  secure: true
}).listen(443); 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-11-18T03:58:02.077

我在使用请求模块从其他地方代理 POST 请求时遇到了同样的问题，这是因为我将主机属性留在了标头中（我正在从原始请求中复制标头）。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2018-04-05T07:30:18.273

在其他情况下解决此问题的另一种方法是`NODE_TLS_REJECT_UNAUTHORIZED=0`用作环境变量

`NODE_TLS_REJECT_UNAUTHORIZED=0 node server.js`

警告：这在安全方面是个坏主意

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2015-02-10T13:14:01.517

我知道这是旧的，但对于其他人来说：

从主机名中删除 https:// 并添加端口 443。

```
{
  method: 'POST',
  hostname: 'api.dropbox.com',
  port: 443
} 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2018-07-06T01:10:01.953

在验证证书是由已知的证书颁发机构 (CA) 颁发后，将检查主题备用名称或通用名称，以验证主机名是否匹配。这是在[checkServerIdentity 函数](https://github.com/nodejs/node/blob/38c938aa90a4346f0fc4e2ec77ebf180386f9ee5/lib/tls.js#L164-L242)中。如果证书具有主题备用名称并且未列出主机名，您将看到描述的错误消息：

> 主机名/IP 与证书的替代名称不匹配

如果您拥有用于生成您正在使用的证书的 CA 证书（通常是使用自签名证书时的情况），则可以提供

```
var r = require('request');

var opts = {
    method: "POST",
    ca: fs.readFileSync("ca.cer")
};

r('https://api.dropbox.com', opts, function (error, response, body) {
    // do something
}); 
```

这将验证证书是否由提供的 CA 颁发，但仍将执行主机名验证。如果证书包含主题备用名称中的主机名，只需提供 CA 就足够了。如果没有，并且您还想跳过主机名验证，您可以传递一个 noop 函数`checkServerIdentity`

```
var r = require('request');

var opts = {
    method: "POST",
    ca: fs.readFileSync("ca.cer"),
    agentOptions: { checkServerIdentity: function() {} }
};

r('https://api.dropbox.com', opts, function (error, response, body) {
    // do something
}); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-03-01T20:44:57.990

`localhost`如果我们使用目标地址（`host`或`hostname`在 node.js 上）测试我们的客户端请求并且我们的服务器公用名`CN = localhost`在服务器证书中，我们就没有这个问题。但即使我们更改IP 或任何其他 IP `localhost`，`127.0.0.1`我们也会`Hostname/IP doesn't match certificate's altnames`在 node.js 或`SSL handshake failed`QT 上得到错误。

在我的客户端请求中，我的服务器证书也有同样的问题。为了在我的客户端 node.js 应用程序上解决它，我需要在我`subjectAltName`的应用程序上`server_extension`添加以下值：

```
[ server_extension ]
       .
       .
       .

subjectAltName          = @alt_names_server

[alt_names_server]
IP.1 = x.x.x.x 
```

然后我`-extension`在创建和签署证书时使用。

例子：

就**我而言**，我首先导出发行者的配置文件，因为该文件包含`server_extension`：

```
export OPENSSL_CONF=intermed-ca.cnf 
```

所以我创建并签署了我的服务器证书：

```
openssl ca \
    -in server.req.pem \
    -out server.cert.pem \
    -extensions server_extension \
    -startdate `date +%y%m%d000000Z -u -d -2day` \
    -enddate `date +%y%m%d000000Z -u -d +2years+1day` 
```

> 它在基于 node.js 的带有 https 请求的客户端上运行良好，但在我们定义时它不适用于基于 QT QSsl 的客户端`sslConfiguration.setPeerVerifyMode(QSslSocket::VerifyPeer)`，除非我们使用`QSslSocket::VerifyNone`它不起作用。如果我们使用`VerifyNone`它将使我们的应用程序不检查对等证书，因此它将接受任何证书。因此，要解决它，我需要更改其证书上的服务器公用名，并将其值替换为我的服务器运行的 IP 地址。

例如：

`CN = 127.0.0.1`

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-08-17T13:33:43.400

从 AWS 中的 Lambda 函数流式传输到 ElasticSearch 时，我得到了这个。把我的头撞在墙上试图弄清楚。最后，在设置`request.headers['Host']`我`https://`为 ES 添加到域中时 - 将其更改为`[es-domain-name].eu-west-1.es.amazonaws.com`（不带 https://）立即工作。下面是我用来让它工作的代码，希望能避免其他人把头撞到墙上......

```
import path from 'path';
import AWS from 'aws-sdk';

const { region, esEndpoint } = process.env;
const endpoint = new AWS.Endpoint(esEndpoint);
const httpClient = new AWS.HttpClient();
const credentials = new AWS.EnvironmentCredentials('AWS');

/**
 * Sends a request to Elasticsearch
 *
 * @param {string} httpMethod - The HTTP method, e.g. 'GET', 'PUT', 'DELETE', etc
 * @param {string} requestPath - The HTTP path (relative to the Elasticsearch domain), e.g. '.kibana'
 * @param {string} [payload] - An optional JavaScript object that will be serialized to the HTTP request body
 * @returns {Promise} Promise - object with the result of the HTTP response
 */
export function sendRequest ({ httpMethod, requestPath, payload }) {
    const request = new AWS.HttpRequest(endpoint, region);

    request.method = httpMethod;
    request.path = path.join(request.path, requestPath);
    request.body = payload;
    request.headers['Content-Type'] = 'application/json';
    request.headers['Host'] = '[es-domain-name].eu-west-1.es.amazonaws.com';
    request.headers['Content-Length'] = Buffer.byteLength(request.body);
    const signer = new AWS.Signers.V4(request, 'es');
    signer.addAuthorization(credentials, new Date());

    return new Promise((resolve, reject) => {
        httpClient.handleRequest(
            request,
            null,
            response => {
                const { statusCode, statusMessage, headers } = response;
                let body = '';
                response.on('data', chunk => {
                    body += chunk;
                });
                response.on('end', () => {
                    const data = {
                        statusCode,
                        statusMessage,
                        headers
                    };
                    if (body) {
                        data.body = JSON.parse(body);
                    }
                    resolve(data);
                });
            },
            err => {
                reject(err);
            }
        );
    });
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-08T05:02:46.673

如果您要信任子域，例如 aaa.localhost，请不要这样做`mkcert localhost *.localhost 127.0.0.1`，因为某些浏览器不接受通配符子域，这将不起作用。

也许试试`mkcert localhost aaa.localhost 127.0.0.1`。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-12-01T17:24:26.490

对于在 Node.js 应用程序中使用[Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)的开发人员，这就是我使用[rejectUnauthorized](https://levelup.gitconnected.com/how-to-resolve-certificate-errors-in-nodejs-app-involving-ssl-calls-781ce48daded)使其工作的方式。

请记住，使用`rejectUnauthorized`是危险的，因为它会为您带来潜在的安全风险，因为它会绕过有问题的证书。

```
const fetch = require("node-fetch");
const https = require('https');

const httpsAgent = new https.Agent({
  rejectUnauthorized: false,
});

async function getData() {
  const resp = await fetch(
    "https://myexampleapi.com/endpoint",
    {
      agent: httpsAgent,
    },
  )
  const data = await resp.json()
  return data
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-09-23T15:33:30.443

这在使用 nodemailer 时对我有用：

```
var transporter = nodemailer.createTransport({
            host: 'mail.site.com',
            port: 25,
            secure: false,
            auth: {
                user: 'info@site.com',
                pass: 'YOUR_PASSWORD'
            },
            tls: {
                rejectUnauthorized: false
            }
        }); 
```

# php - 如何执行循环以插入每个学生的详细信息

> ID：14262988
> 
> 赞同：0
> 
> 时间：2013-01-10T16:47:18.063
> 
> 标签：php, mysqli

下面我想将值插入数据库。我想在选定的会话（考试）中插入每个学生。

现在让我们说选择的会话是 `34`，我的问题是，让我们说一个选择框包含多个将要参加此评估的学生，如下所示：

```
<select name='addtextarea' id='studentadd'  multiple='multiple' size='10'>
<option value='1'>Joe Blogs</option>
<option value='4'>Bill Kite</option>
<option value='6'>Mary Scott</option>
</select> 
```

我的问题是如何遍历每个学生，以便在数据库中插入每个学生的详细信息，以便插入时 db 表如下所示：

```
SessionId  StudentId
34         1
34         4
34         6 
```

下面是使用 mysqli/php 进行插入的代码：

```
$studentid = (isset($_POST['addtextarea'])) ? $_POST['addtextarea'] : ''; 
        $sessionid = (isset($_POST['Idcurrent'])) ? $_POST['Idcurrent'] : '';   

        $insertsql = "
        INSERT INTO Student_Session
        (SessionId, StudentId)
        VALUES
        (?, ?)
        ";
        if (!$insert = $mysqli->prepare($insertsql)) {
        // Handle errors with prepare operation here
        }                                           

        $insert->bind_param("ii", $sessionid, $studentid);

        $insert->execute();

        if ($insert->errno) {
        // Handle query error here
        }

        $insert->close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:00:30.467

只需循环`bind_param()`and `execute()`，您只需要进行一次准备：

为了防止插入零，我还将整个准备好的语句包装在如下内容中：

```
if(isset($_POST['addtextarea']) && is_array($_POST['addtextarea']) && count($_POST['addtextarea']) > 0 && isset($_POST['Idcurrent']))
{
    // we have some data to insert, do the prepared stmt

    $insertsql = "
    INSERT INTO Student_Session
    (SessionId, StudentId)
    VALUES
    (?, ?)
    ";

    if ($insert = $mysqli->prepare($insertsql)) {

        foreach($_POST['addtextarea'] as $studentid)
        {
            $insert->bind_param("ii", $_POST['Idcurrent'], $studentid);

            $insert->execute();

            if ($insert->errno) {
                // Handle query error here
            }
        }

        $insert->close();
    }
    else
    {
        // prepare() call failed - syntax error in query or error with the db
        // Handle errors with prepare operation here
    }
}
else
{
    // post data is missing, show message
} 
```

# magento - Magento - 在帐户区域显示自定义属性（前端）

> ID：14262989
> 
> 赞同：0
> 
> 时间：2013-01-10T16:47:21.433
> 
> 标签：magento, custom-attributes, account

我已经使用这个模块创建器来获取一个自定义属性（它采用“文件”类型）。 [http://www.silksoftware.com/magento-module-creator/](http://www.silksoftware.com/magento-module-creator/)

这有效，可以在管理区域中看到。我还为使用本教程创建的客户提供了其他自定义属性： [http ://www.fontis.com.au/blog/magento/know-more-about-your-customers-adding-custom-signup-attributes](http://www.fontis.com.au/blog/magento/know-more-about-your-customers-adding-custom-signup-attributes)

这也有效。我使用模块创建器的原因是因为我不确定如何将输入类型设置为“文件”。

通过 fontis 教程创建的属性可以根据需要显示在前端（仅在注册表中需要）。

我遇到的问题是在前端登录帐户区域的自定义区域。我需要的是检索在模块创建器中创建的“文件”属性的值。谁能指出我如何显示这些的正确方向？我试过 getAttributeName 但这不起作用。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T19:25:23.837

如果您发布自定义模块中的代码，我们可以为您提供更多帮助。

同时，这里有一些可以帮助你的信息：

*   每当您使用模块将某些内容存储在数据库中时，都会有一个 Model 类（允许您访问必要的数据）
*   您可以通过查看模块`etc/config.xml`文件来找到类名
*   在文件中查找名为的部分`<models>`
*   的子节点`<models>`是命名空间的名称（见下文）
*   调用的“命名空间”的子节点`<class>`包含您需要的其余信息
*   接下来，您需要调用模型`Mage::getModel('namespace/class_name')->load($id);`以获取系统中所有自定义属性记录的集合

将其分解为可管理的部分：

假设这是您`config.xml`包含的内容：

```
<models>
    <customattribute> // this is your namespace
         <class>Mycompany_Customattribute_Model</class> //this tells you wher to find your model files
          <resourceModel>customattribute_resource</resourceModel>
    </customattribute>

...
</models> 
```

这意味着您的“命名空间”是“自定义属性”。

接下来，您需要找到包含您的模型的文件。

在这种情况下，我们查看`<class>`节点以向我们提供文件位置（在这种情况下`app/code/local/Mycompany/Customattrbute/Model`），现在我们需要去那里查看那里的文件（假设它被称为“File.php”）

要获取所有数据，我们调用以下函数：

```
Mage::getModel('customattribute/file')->load(); 
```

这将为我们提供所有数据。

如果我们想缩小范围，我们可以使用以下函数：

```
Mage::getResourceModel('customattribute/file')->addFieldToFilter('name_of_filed_in_db', 'value_we_want'); 
```

# tfs - TFS 2012 变更流程模板

> ID：14262990
> 
> 赞同：3
> 
> 时间：2013-01-10T16:47:22.777
> 
> 标签：tfs, scrum, tfs-process-template, agile-processes

有没有办法从 MSF Agile 6.0 迁移到 TFS 2012 中的 Scrum 流程模板？我们最近从 TFS 2010 迁移到 2012，并希望在不丢失历史记录的情况下更改流程模板。

我听说过[http://witsynchronizer.codeplex.com/](http://witsynchronizer.codeplex.com/)但有人尝试过 TFS 2012 吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T12:26:27.263

我们这样做的方式是；

1.  在 Visual Studio 中（我有 Visual Studio Ultimate 2012）转到团队资源管理器 - 主页（确保您在正确的集合/项目中）
2.  在下拉菜单中导航到项目和我的团队并选择新团队项目
3.  输入您想要的团队项目名称和描述
4.  选择 Microsoft Visual Studio Scrum 2.0 - Preview 4 流程模板
5.  如果您愿意，可以配置 SharePoint 网站，但我们选择“此时不配置 SharePoint 网站”
6.  指定源代码控制设置 - 我们选择“创建一个新的源代码控制分支”并选择我们想要分支的代码区域。这应该保留您的所有历史记录。
7.  确认您的团队项目设置，然后单击完成。

希望这会有所帮助，它可能不是正确的方法，但对我们有用。