# StackOverflow 问答 14713000-14713999

# wpf - 应用程序视图中的 WPF 模块

> ID：14713000
> 
> 赞同：0
> 
> 时间：2013-02-05T17:09:37.050
> 
> 标签：wpf, mvvm, user-controls, wpf-controls

我正处于设计 WPF MVVM 应用程序的早期阶段。我的应用程序中将包含几个模块，并且将来会添加更多模块。我希望主屏幕感觉几乎像平板电脑，模块显示为类似于平板电脑上的应用程序的图标。我正在寻找一些关于什么 WPF 控件最能帮助我获得这种理想的外观和感觉的建议。我对此有一些建议，如果有人有一个例子的链接，其他人已经实现了类似的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T07:55:48.690

我建议你先去看看[Prism 框架](http://compositewpf.codeplex.com/)如何用于模块化 wpf 应用程序（最好的架构之一）

其次，您的 UI 应该是一个硬编码的主屏幕，其中包含每个模块的磁贴图标或项目控件中的包装面板，其中 datatemplate 定义为磁贴。您还可以在 WinRT 类似 GUI 中查看[此示例。](http://www.askvg.com/mosaic-get-windows-8-style-live-tiles-with-metro-ui-on-windows-7-desktop/)

# ios - iOS中的稀疏图像匹配

> ID：14713002
> 
> 赞同：7
> 
> 时间：2013-02-05T17:09:45.007
> 
> 标签：ios, objective-c, image-processing, static-libraries, image-recognition

我正在构建一个 iOS 应用程序，作为一项关键功能，它包含图像匹配。问题是我需要识别的图像是小型定向运动 10x10 牌匾，上面有简单的大文字。它们的反射性很强，并且会在室外（因此光线条件会变化）。示例图像

![在此处输入图像描述](../Images/85bac99d40a12040cab8b9eb00ebba20.png)

池中将有多达 15 种此类图像，而我真正需要检测的只是文本，以便记录用户所在的位置。

我面临的问题是，使用我尝试过的图像匹配软件 aurasma 和稍微成功的 arlabs，它们无法区分它们，因为它们主要是为处理详细图像而构建的。

我需要准确检测正在扫描的斑块，并考虑使用 gps 来优化选择，但我发现唯一可靠的方法是让用户手动输入文本。我们以产品为基础的主要吸引力之一是能够检测这些已经存在的图像，而无需设置任何额外的材料。

任何人都可以建议一款可以工作的软件（iOS 友好）或一种对用户有效且互动/取悦的检测方法。

示例环境： [http ://www.orienteeringcoach.com/wp-content/uploads/2012/08/startfinishscp.jpeg](http://www.orienteeringcoach.com/wp-content/uploads/2012/08/startfinishscp.jpeg)

环境可能会发生很大变化，基本上可以放置在斑块所在的任何地方；在树木繁茂或开阔的区域，但绝大多数是在户外的围栏、墙壁和柱子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T17:54:49.637

我不是 iOs 程序员，但我会尝试从算法的角度来回答。本质上，您有一个检测问题（“斑块在哪里？”）和一个分类问题（“它是哪一个？”）。要求用户将斑块保持在预定义的区域中当然是个好主意。这解决了检测问题，这通常比分类问题更难在资源有限的情况下解决。

对于分类，我看到了两种选择：

1.  经典的“计算机视觉”路线是特征提取和分类。[Local Binary Patterns](http://en.wikipedia.org/wiki/Local_binary_patterns)和[HOG](http://en.wikipedia.org/wiki/Histogram_of_oriented_gradients)是已知对于移动设备来说足够快的特征提取器（前者比后者快），而且它们实现起来并不复杂。然而，分类器并不重要，您可能必须搜索合适的 iOs 库。

2.  或者，您可以尝试对图像进行二值化，即将像素分类为“板”/白色或“文本”/黑色。然后，您可以使用容错相似性度量将您的二值化图像与斑块的二值化参考图像进行比较。[倒角距离测量](http://www.gavrila.net/Research/Chamfer_System/chamfer_system.html)是一个很好的候选。它基本上归结为比较两个二值化图像的[距离变换。](http://en.wikipedia.org/wiki/Distance_transform)这比直接比较二值图像更能容忍错位。参考图像的距离变换可以预先计算并存储在设备上。

就个人而言，我会尝试第二种方法。第二种方法的（非移动）原型使用良好的图像处理库（OpenCV、Matlab + 图像处理工具箱、Python 等）相对容易编码和评估。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-16T15:14:02.093

我设法找到了一个运行良好的解决方案。我还没有完全优化，但我认为它只是调整过滤器，稍后会解释。

最初我尝试设置 opencv，但它非常耗时且学习曲线陡峭，但它确实给了我一个想法。我的问题的关键是真正检测图像中的字符并忽略背景，这基本上只是噪音。OCR 正是为此目的而设计的。

我发现免费库 tesseract ( [https://github.com/ldiqual/tesseract-ios-lib](https://github.com/ldiqual/tesseract-ios-lib) ) 易于使用且具有大量可定制性。起初结果非常随机，但应用锐化和单色滤镜和颜色反转效果很好，可以清理文本。接下来在 ui 上标出一个目标区域，并用它来切出要处理的图像矩形。大图像的处理速度很慢，这大大减少了它。OCR 过滤器允许我限制允许的字符，并且由于斑块遵循标准配置，这缩小了准确性。

到目前为止，它在灰色背景斑块上取得了成功，但我还没有找到适用于红色和白色版本的正确过滤器。我的目标是添加颜色检测并消除输入数据类型的需要。

# c# - 使用 XamDataGrid 和 Sorting 事件进行单元测试

> ID：14713003
> 
> 赞同：1
> 
> 时间：2013-02-05T17:09:57.090
> 
> 标签：c#, wpf, unit-testing, infragistics, xamdatagrid

我正在尝试对一个类进行单元测试，并且该类使用**XamDataGrid**。

我的问题是我的代码应该从 XamDataGrid 触发**排序**或**排序**事件，但它没有：我错过了什么？

这里我如何创建网格：

```
public static class XamDataGridObjectMother
{
    public static XamDataGrid CreateGrid(params string[] columns)
    {
        var grid = new XamDataGrid();

        var layout = new FieldLayout();
        grid.FieldLayouts.Add(layout);

        int i = 0;
        foreach (var column in columns)
        {
            var field = new Field(column, typeof(string), column+" Label");
            field.Column = i;
            field.Width = new FieldLength(100);
            field.Name = column;
            layout.Fields.Add(field);
            i++;
        }

        var data = new List<XamDataGridFakeItem>();
        data.Add(new XamDataGridFakeItem("P1", "A1"));
        data.Add(new XamDataGridFakeItem("P2", "A1"));
        data.Add(new XamDataGridFakeItem("P3", "A1"));
        data.Add(new XamDataGridFakeItem("P4", "A2"));
        data.Add(new XamDataGridFakeItem("P5", "A2"));
        data.Add(new XamDataGridFakeItem("P6", "A2"));

        foreach (var xamDataGridFakeItem in data)
        {
            grid.DataItems.Add(xamDataGridFakeItem);
        }

        return grid;
    }

    public class XamDataGridFakeItem
    {
        public XamDataGridFakeItem(string portfolio, string area)
        {
            Portfolio = portfolio;
            Area = area;
        }

        public string Portfolio { get; set; }

        public string Area { get; set; }
    }
} 
```

这是我的单元测试的一部分，我以编程方式向网格添加排序，并且它应该引发排序/排序事件（可能两者）：

```
 var sortDescription = new FieldSortDescription("Portfolio", ListSortDirection.Descending, false);

 _dataGrid.FieldLayouts[0].SortedFields.Add(sortDescription); // That should trigger the event(s)! 
```

当然 _dataGrid 是在其他地方初始化的，上面显示了我的对象母类。

所以我的问题，如果它还不是很明显，是我添加一个排序字段*应该*触发一个排序/排序事件（它应该对网格进行排序），但它没有，我找不到任何方法来（编程）强制它对网格进行排序并触发这些事件。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:30:32.823

[Sorting](http://help.infragistics.com/NetAdvantage/WPF/Current/CLR4.0/?page=InfragisticsWPF4.DataPresenter.v12.2~Infragistics.Windows.DataPresenter.DataPresenterBase~Sorting_EV.html)和[Sorted](http://help.infragistics.com/NetAdvantage/WPF/Current/CLR4.0/?page=InfragisticsWPF4.DataPresenter.v12.2~Infragistics.Windows.DataPresenter.DataPresenterBase~Sorted_EV.html)事件仅在响应用户交互时触发，因此预计它们在代码中对网格进行排序时不会触发。

如果您需要查看通过网格对哪些字段进行排序，您将检查相关的[FieldLayout.SortedFields](http://help.infragistics.com/NetAdvantage/WPF/Current/CLR4.0/?page=InfragisticsWPF4.DataPresenter.v12.2~Infragistics.Windows.DataPresenter.FieldLayout~SortedFields.html)集合以查看哪些字段已排序。

请注意，如果您的测试是为了验证排序是否成功，最好检查网格中记录的顺序，而不是检查要触发的事件。

# javascript - Jvector Map如何从标记添加和获取链接

> ID：14713009
> 
> 赞同：10
> 
> 时间：2013-02-05T17:10:20.287
> 
> 标签：javascript, jquery, jvectormap

我正在尝试从标记数组中获取数据并在 onmarkerclick 函数上调用它，这样我就可以在单击标记后转到 URL，但我尝试的一切似乎都失败了。我希望在标记数组中添加一个 URL 并将其返回到 onmarkerclick。感谢您在高级方面的帮助：

```
 $(function(){
    $('#map1').vectorMap({
                  map: 'world_mill_en',
                  scale: ['#C8EEFF', '#0071A4'],
                  normalizeFunction: 'polynomial',
                  hoverOpacity: 0.7,
                  hoverColor: false,
                  markerStyle: {
                    initial: {
                          fill: '#F8E23B',
                          stroke: '#383f47'
                    }
                  },
                  backgroundColor: '#383f47',
                  markers: [{latLng: [48.921537, -66.829834], name: "something", weburl : "/blah/foo"

            },{latLng: [45.995944, -64.171143], name: "something else", weburl : "/blah/foo"

            },],
                  onMarkerClick: function(events, label, index, weburl) {
                    alert (1+weburl);                
                   }
            });
}); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-05T17:21:27.710

太巧了，我昨天才遇到同样的问题..:)

我找到的解决方案是在外面创建一个数组，并通过点击函数中的索引访问它。

```
var markers = [
    {latLng: [48.921537, -66.829834], name: "something", weburl : "/blah/foo"},
    {latLng: [45.995944, -64.171143], name: "something else", weburl : "/blah/foo-else"}
];

$(function(){
    $('#map1').vectorMap({
                  ...
                  markers: markers,
                  onMarkerClick: function(event, index) {
                      // alter the weburl
                      alert(markers[index].weburl);
                  }
            });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T21:50:51.047

仅仅因为我只是以不同的方式解决了这类问题，而且这样做我感到非常聪明，所以我会发布我的答案。

您可以使用 jQuery.data 或 javascript dom dataSets 存储任意数据。除非您的页面上有其他带有`<circle>`元素的 SVG，否则您可以遍历所有`<circle>`元素并从数组中为它们提供数据。索引将匹配，但您可以使用 data-index 作为保护措施。

很酷。尽管这已经很老了，但也许这种替代方案会对某人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-20T12:41:18.557

Using the solutions from Rajat and Oldenborg I managed to get the marker name using the default jVectorMap setup

```
onMarkerClick: function(event, index) {

        console.log(map.markers[index].config.name);
    } 
```

# php - file_put_contents 和 file_get_contents 耗尽内存大小

> ID：14713014
> 
> 赞同：4
> 
> 时间：2013-02-05T17:10:39.540
> 
> 标签：php, file-get-contents, memory-limit

我有一些简单的尝试从一个文件写入另一个文件。

```
$content=file_get_contents("C:\Users\Borut\Desktop\sql_PW1\mm_ads (1).sql");
file_put_contents("C:\Users\Borut\Desktop\sql_PW1\New", $content); 
```

我读取的文件大约 80M 大，php 中的内存限制为 128M，但出现错误：

```
Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 80739522 bytes) 
```

所以即使我试图分配的内存实际上更小，内存也会耗尽？我可以通过增加内存限制来完成这项工作，但我想知道为什么它不适用于这个限制。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T17:12:53.350

它向您显示`tried to allocate xxxx bytes`的数量是超出 PHP 内存限制的数量。这意味着您在尝试分配**额外的**~80MB 时已经用尽了 128MB。

即使您可以将文件放入内存中，当您知道文件会那么大时，使用`fopen`/ `fread`/ `fwrite`/的组合会好得多`fclose`。

不过，我假设您不仅仅是读取内容并将其写入另一个文件，对吗？因为如果这就是您所需要的，您可以使用该`copy`功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-24T15:30:39.510

要下载大文件而不用完内存，请尝试以下功能：

```
function custom_put_contents($source_url='',$local_path=''){

    $time_limit = ini_get('max_execution_time');
    $memory_limit = ini_get('memory_limit');

    set_time_limit(0);
    ini_set('memory_limit', '-1');      

    $remote_contents=file_get_contents($source_url);
    $response=file_put_contents($local_path, $remote_contents);

    set_time_limit($time_limit);
    ini_set('memory_limit', $memory_limit); 

    return $response;
} 
```

**资源**

[允许的内存大小 134217728 字节已用尽](https://stackoverflow.com/questions/12264253/allowed-memory-size-of-134217728-bytes-exhausted/29236639#29236639)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T17:21:58.270

将整个文件加载到 PHP 中会非常消耗您的内存。如果你需要处理一个对你的内存来说太大的文件，你必须一次加载它一点，这意味着你不能使用`file_get_contents()`.

但是，如果您所做的只是复制文件，则根本不需要加载它——PHP 确实提供了一个[`copy()`函数](http://php.net/manual/en/function.copy.php)。工作完成，根本不需要加载它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T17:15:28.373

第一个猜测是 file_get_contents() 正在分配 80M 内存，而 file_put_contents() 正在尝试分配另外 80M。你可以尝试把

```
var_dump(memory_get_usage()) 
```

字里行间。

请注意，此错误消息并未说明实际使用了多少内存：

```
Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 80739522 bytes) 
```

所以这可能意味着 PHP 实际上正在使用 100M 并试图分配另一个 80M

当然，对于这么大的文件，您可以使用 fopen() fwrite() 而不是一次将整个文件放入内存中。

此外，如果您只想复制这些文件，您可以简单地使用 copy()

# javascript - 使用js创建带有值的表

> ID：14713022
> 
> 赞同：0
> 
> 时间：2013-02-05T17:10:56.970
> 
> 标签：javascript

我想使用 javascript 创建表并用数据填充它。所以我决定使用`prompt`方法和循环`while`。

但是当我尝试加载页面时，我总是在谷歌浏览器开发者工具中收到两条错误消息 ![在此处输入图像描述](../Images/207a83c53d1a2d78cb4a764b95640bc3.png)

这是代码

```
<html>
<head>
    <meta charset="utf-8">
    <script type="text/javascript">
    function onStart() {
        var list = new Array();
        var headers = new Array("Имя","Отчество","Фамилия","Дата рождения");
        var i = -1;
        while(true) {
            var a = prompt("Имя","noname");
            var b = prompt("Отчество","nomiddlename");
            var c = prompt("Фамилия","nosurname");
            var d = prompt("Дата рождения!",0);
            if (confirm("Уверены что хотите добавить студента?")) {
                i++;
                list[i] = a + "-" + b + "-" + c + "-" + d;
            }else{ break; };
        }
        tab = "<table>";
        for(j = 0; j<headers.length;j++) {
            tab += "<th>" + headers[j] + "</th>";
        for(var j = 0; j < list.length; j++) {
            var params = list[i].split('-');
            tab += "<tr>";
            for(k = 0; k < params.length;k++) {
                tab +="<td>" + params[k] + "</td>";
            }
            tab +="</tr>";
        }
        tab +="</table>";
        document.write(tab);
    };
    </script>
</head>
<body onLoad = "onStart()">
</body> 
```

有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:13:36.350

您的 for 循环似乎缩进错误且未正确关闭

```
for(j = 0; j<headers.length;j++) {
        tab += "<th>" + headers[j] + "</th>";
    for(var j = 0; j < list.length; j++) {
        var params = list[i].split('-');
        tab += "<tr>";
        for(k = 0; k < params.length;k++) {
            tab +="<td>" + params[k] + "</td>";
        }
        tab +="</tr>";
    } 
```

应该

```
for(j = 0; j<headers.length;j++) {
    tab += "<th>" + headers[j] + "</th>";
}
for(var j = 0; j < list.length; j++) {
    var params = list[i].split('-');
    tab += "<tr>";
    for(k = 0; k < params.length;k++) {
        tab +="<td>" + params[k] + "</td>";
    }
    tab +="</tr>";
} 
```

与您的问题没有直接关系，但您还有一些其他常见的 javascript 错误。
通过不使用 var 声明变量，您无意中创建了全局变量。虽然这在您的页面上可能不是一个大问题，但这是一种不好的做法。

此外，您应该将`<th>`要附加的标签包装在 a`<tr>`中，因为 a 中唯一的“有效”元素`<table>`是 a `<tr>`（从技术上讲，它的 tbody、thead 和 tfoot，其中唯一有效的子元素是`<tr>`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:17:48.640

您在第一个循环中缺少结束 }：

```
for(j = 0; j<headers.length;j++) {

  tab += "<th>" + headers[j] + "</th>"; 
```

**}**

我猜他正试图循环通过标题，然后是列，然后关闭表格。不循环通过标题，并为每个标题添加所有行。而且，当然不会循环通过标题，并且对于每个标题循环遍历所有行并关闭并写入表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T17:18:16.690

在您的代码中 onStart(){} 方法未正确关闭。在下面的代码前多加一个“ **} ”**

```
</script>
</head> 
```

# android - 使用 fb android sdk 3.0 在朋友墙上发布图像

> ID：14713024
> 
> 赞同：0
> 
> 时间：2013-02-05T17:11:04.967
> 
> 标签：android, facebook, facebook-graph-api

我试图在朋友 fb 墙上发布图像，我得到选择的朋友 ID，以及转换为 base64 字符串的图像只是得到以下错误的响应

```
{Response:  responseCode: 200, graphObject: null, error: {HttpStatus: 200, errorCode: 3, errorType: null, errorMessage: Unknown method}, isFromCache:false} 
```

我的代码如下

```
if (hasPublishPermission()) {

        Request postToWall = new Request();

        for (GraphUser friend : selectedFriends) {
            Constants.showLog("Selected Frnd", friend.getId());
            Constants.showLog("Selected Pic", picture);

            Bundle parameters = new Bundle();
            parameters.putByteArray("message", "Greetings from Wish Well!".getBytes());
            parameters.putByteArray("link", "http://pictwist.cloudganga.com".getBytes());
            parameters.putByteArray("picture", picture.getBytes());
            parameters.putByteArray("target_id", friend.getId().getBytes());

            postToWall = Request.newRestRequest(Session.getActiveSession(), friend.getId() + "/feed", parameters, HttpMethod.POST);

            Constants.showToast(getApplicationContext(), "Posted image on friend wall");

        }

        postToWall.setCallback( new Request.Callback() 
        {

            @Override
            public void onCompleted(Response response) 
            {
                Constants.showLog("Responce Posting image", response.toString());

            }
        });
        Request.executeBatchAsync(postToWall);
    } 
```

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-15T12:05:00.810

自 2013 年 2 月 6 日起，SDK 不再支持在朋友的墙上发布图像或任何内容。您需要使用提要对话框来执行此操作。

检查这个链接..

[https://developers.facebook.com/roadmap/completed-changes/](https://developers.facebook.com/roadmap/completed-changes/)

# loops - Html5 音频、循环和延迟

> ID：14713033
> 
> 赞同：1
> 
> 时间：2013-02-05T17:11:34.593
> 
> 标签：loops, audio, delay

我在 Html5 游戏中遇到了一些循环问题。

我有一个想要循环播放的声音（4-5 秒）。
但在每个循环之间，我可以听到声音停止（0.5 秒）并重播。

我读到“MP3 在音频文件的开头有 0.25 秒的静音。”，并尝试了这个：

> 在 T = 0,25 时为每个样本启动循环和声音，因此预加载了所有音频文件，但在 0.25 秒后播放和循环。”

但是，mp3 ogg 或 wave（Firefox 和 chrome）仍然存在延迟

有人可以帮我找到解决方案吗？

# python - Python海龟设置起始位置

> ID：14713037
> 
> 赞同：8
> 
> 时间：2013-02-05T17:11:45.390
> 
> 标签：python, turtle-graphics

启动代码时如何设置 startpos（我的海龟广场的左上角）？

我并不是说它从中间开始，然后到那个位置。

我想让乌龟从那里开始。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-02-09T06:27:57.440

托马斯安东尼的`setworldcoordinates()`解决方案是可行的（+1），但这是一个棘手的功能（很容易弄乱你的纵横比。）其他人提出了类似的建议：

```
penup()
goto(...)
pendown() 
```

完全错误和/或没有阅读您的问题，因为您的用户会看到海龟移动到位。不幸的是，当您说“我的海龟广场”时，您的问题并不清楚，因为不清楚您是指窗户、您已绘制的正方形还是您将要绘制的正方形。

我将为您提供从窗口左上角开始的解决方案，您可以根据需要进行调整：

```
from turtle import Turtle, Screen

TURTLE_SIZE = 20

screen = Screen()

yertle = Turtle(shape="turtle", visible=False)
yertle.penup()
yertle.goto(TURTLE_SIZE/2 - screen.window_width()/2, screen.window_height()/2 - TURTLE_SIZE/2)
yertle.pendown()
yertle.showturtle()

screen.mainloop() 
```

海龟的第一次出现应该在窗口的左上角。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-02-09T03:16:04.920

您可以将世界坐标设置为其他值。例如，要从左下角附近开始，请执行以下操作：

```
turtle.setworldcoordinates(-1, -1, 20, 20) 
```

这将使整个窗口为 21x21“单位”，并将原点放置在距底部和左侧边缘一个单位的位置。您命令的任何位置也将根据这些单位（而不是像素）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-07-03T13:58:38.820

**Python 乌龟，改变起始位置：**

```
import turtle
a = turtle.Turtle()      #instantiate a new turtle object called 'a'
a.hideturtle()           #make the turtle invisible
a.penup()                #don't draw when turtle moves
a.goto(-200, -200)       #move the turtle to a location
a.showturtle()           #make the turtle visible
a.pendown()              #draw when the turtle moves
a.goto(50, 50)           #move the turtle to a new location 
```

乌龟变得可见并开始在位置 -200、-200 处绘制并移动到 50、50。

以下是有关如何更改海龟状态的文档： [https ://docs.python.org/2/library/turtle.html#turtle-state](https://docs.python.org/2/library/turtle.html#turtle-state)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T17:25:39.703

只需将您的坐标系转换为海龟的坐标系即可。假设您想从正方形的左上角开始 - 为了参数，我们将其称为 (0, 10)。

现在，当您需要为海龟指定坐标时，只需平移它！

```
my_start = (0, 10) 
```

如果您想移动到`(10, 10)`- 右上角，只需提供新坐标：

```
>>> new_position = (10 - my_start[0], 10 - my_start[1])
>>> new_position
(10, 0) 
```

`(10, 0)`在乌龟的东边 - 在乌龟的坐标系中，但对你来说它是`(10, 10)`右上角！每个人都赢了！

### 编辑

你可以做

```
turtle.penup()
turtle.setx(my_start[0])
turtle.sety(my_start[1])
turtle.pendown() 
```

但这几乎没有那么有趣:(

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-04T14:51:40.207

需要考虑的几个可能的**陷阱：**

*   用 just 创建一个新的 Turtle`Turtle()`可以让它出现一瞬间。
*   仅仅`up`用笔并不一定会隐藏乌龟本身。
*   同样，仅仅隐藏海龟就可以让它的笔触可见。
*   即使一切都是不可见的，乌龟通常仍然需要时间才能到达它的位置。

**防止这些陷阱的解决方案**：

```
t = turtle.Turtle(visible=False)  # make invisible turtle
initial_speed = t.speed()         # store its initial speed
t.speed(0)          # set its movement speed to instant 
t.up()              # stop drawing

t.setpos(x_of_your_starting_position, 
         y_of_your_starting_position)  # figure those out first... 

t.speed(initial_speed)  # set turtle's speed to initial value
t.showturtle()          # make turtle appear in desired position
t.down()                # resume drawing 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-02-23T08:30:37.937

在代码的开头，定义了海龟之后，你可以这样做：

```
tom.penup()
tom.goto(x coordinate that you want, y coordinate that you want)
tom.pendown() 
```

这将使乌龟不可见。
然后转到 x 和 y 给定的位置，它使海龟的轨迹再次可见。

# eclipse - 无法从 Eclipse 启动 JProfiler - 源代码查找中的 NPE

> ID：14713043
> 
> 赞同：2
> 
> 时间：2013-02-05T17:11:58.457
> 
> 标签：eclipse, jprofiler

一年多来，我一直在 Eclipse 中使用 JProfiler 7，但我的 Eclipse 似乎定期进入无法再运行 Profile 的状态，并且我从 Eclipse 内部获得 NullPointerException。运行以前有效的配置文件时，我收到以下错误：

```
An internal error occurred during: "Launching TestMain".

java.lang.NullPointerException
    at org.eclipse.jdt.internal.launching.JavaSourceLookupUtil.getPackageFragmentRoot(JavaSourceLookupUtil.java:156)
    at org.eclipse.jdt.internal.launching.JavaSourceLookupUtil.translate(JavaSourceLookupUtil.java:57)
    at org.eclipse.jdt.launching.JavaRuntime.getSourceContainers(JavaRuntime.java:2435)
    at org.eclipse.jdt.launching.sourcelookup.containers.JavaSourcePathComputer.computeSourceContainers(JavaSourcePathComputer.java:58)
    at org.eclipse.debug.internal.core.sourcelookup.SourcePathComputer.computeSourceContainers(SourcePathComputer.java:69)
    at org.eclipse.debug.core.sourcelookup.containers.DefaultSourceContainer.createSourceContainers(DefaultSourceContainer.java:112)
    at org.eclipse.debug.core.sourcelookup.containers.CompositeSourceContainer.getSourceContainers(CompositeSourceContainer.java:130)
    at com.jprofiler.integrations.eclipse.a.f.a(ejt:243)
    at com.jprofiler.integrations.eclipse.a.f.j(ejt:230)
    at com.jprofiler.integrations.eclipse.a.f.<init>(ejt:70)
    at com.jprofiler.integrations.eclipse.a.b.a(ejt:39)
    at com.jprofiler.integrations.eclipse.a.b.a(ejt:27)
    at com.jprofiler.integrations.eclipse.delegates.LocalJavaDelegate.launch(ejt:18)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:855)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:704)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:1047)
    at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1251)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
```

它在源代码查找中失败的事实很有趣，因为我最近在 Eclipse 中也遇到了问题，通常是 IDE 无法解析源文件位置（即使对于我的项目中的常规旧 Java 文件或导入的项目），我必须手动重新设置源查找（使用“附加源”按钮）。所以不确定这是否真的是 JProfiler 问题或基本的 Eclipse 问题。

当我第一次遇到这个问题时，我最初是在 Eclipse Indigo 中工作的，所以我升级到 Juno 并解决了问题，但它现在又回来了，我不知道为什么:) 我也尝试过重新做JProfiler IDE 集成向导，但这没有帮助。

*   瑞克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:10:52.023

每当我遇到类似的奇怪的 Eclipse 错误时，我通常只是下载/重新安装最新版本。如果它是 eclipse 内部的东西，我建议你提交一个错误报告，重新安装，然后继续工作。这样做很烦人，但从长远来看，你会浪费更少的时间。

如果您想向使 eclipse 成为可能的人提交有用的错误报告： [https ://bugs.eclipse.org/bugs/](https://bugs.eclipse.org/bugs/)

# fullscreen - 如何禁用 JW Player 6 上的全屏按钮？

> ID：14713049
> 
> 赞同：1
> 
> 时间：2013-02-05T17:12:19.807
> 
> 标签：fullscreen, jwplayer

我尝试了以下代码：

```
<script type='text/javascript'>
    jwplayer('video').setup({
        height: 267,
        width: 475,
        autostart: true,
        enableFullscreen: 'false',
        playlist: [{
            sources: [
                { file: "1.mp4" },
                { file: "1.flv" },
                { file: "2.webm" }
            ]
        }]
    });
</script> 
```

但不工作`enableFullscreen: 'false'`。这样做的方法是什么？对不起我的英语不好。

* * *

## 更新

我创建了自定义皮肤，但无法隐藏 JW Player 上的全屏按钮。

```
<skin version="2.0" name="user92" author="user92" target="6.0">
    <components>
        <component name="controlbar">
            <elements>
                <element name="fullscreenButton" value="false" />
            </elements>
        </component>        
    </components>
</skin> 
```

我在加载皮肤时出错。我必须为仅隐藏全屏按钮设置的参数是什么？没有所有的控制栏。

* * *

## 最后更新

好的。用皮肤隐藏全屏按钮。您应该组装所有控制栏，省略按钮全屏选项

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T18:01:31.263

在 JW Player 6 中，可以通过我们的蒙皮模型移除全屏按钮：

[http://www.longtailvideo.com/support/jw-player/28847/building-jw-player-skins](http://www.longtailvideo.com/support/jw-player/28847/building-jw-player-skins) [http://www.longtailvideo.com/support/jw-player/28849/skin-xml-reference](http://www.longtailvideo.com/support/jw-player/28849/skin-xml-reference)

SDK 可在此处获得 - [http://developer.longtailvideo.com/trac/](http://developer.longtailvideo.com/trac/)

基本上，在皮肤 XML 文件中，控制栏上有一个全屏/普通屏按钮部分，您可以将其删除/注释掉。

此部分可以删除/注释掉：

```
<element name="fullscreenButton" src="fullscreenButton.png" />
                <element name="fullscreenButtonOver" src="fullscreenButtonOver.png" />
                <element name="normalscreenButton" src="normalscreenButton.png" />
                <element name="normalscreenButtonOver" src="normalscreenButtonOver.png" /> 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-17T01:43:32.927

在 JWPlayer 7 中隐藏全屏按钮： $('.jw-icon-fullscreen').hide();

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-26T07:40:22.877

您可以通过更改全屏按钮的 z-index 来隐藏它。

```
jwplayer('video').setup({
        height: 267,
        width: 475,
        autostart: true,
        enableFullscreen: 'false',
        playlist: [{
            sources: [
                { file: "1.mp4" },
                { file: "1.flv" },
                { file: "2.webm" }
            ]
        }]
    }).onReady(function () {
            $(".jwfullscreen").css("z-index", "-1");
        }); 
```

# mysql - 为什么我不能使用 Fluent NHibernate 将其插入 MySQL InnoDB 表中？

> ID：14713051
> 
> 赞同：0
> 
> 时间：2013-02-05T17:12:21.597
> 
> 标签：mysql, asp.net-mvc, fluent-nhibernate

这是我流利的类图：

```
class ImportedAccountsMap : ClassMap<ImportedAccounts>
{
    public ImportedAccountsMap()
    {
        Id(x => x.Id);
        Map(x => x.Acct_FName);
        Map(x => x.Acct_LName);
        Map(x => x.Acct_Phone1);
        Map(x => x.Acct_Email);
        Map(x => x.Date);
        Map(x => x.Exists);
        Map(x => x.Deleted);
    }
} 
```

还有我的控制器代码

```
 public void ImportInsertTest()
    {
        using (ISession session = MvcApplication.SessionFactory.OpenSession())
        {
            using (ITransaction tx = session.BeginTransaction())
            {
                ImportedAccounts ia = new ImportedAccounts();
                ia.Date = "test";
                ia.Deleted = false;
                ia.Exists = false;
                ia.Acct_FName = "test";
                ia.Acct_LName = "test";
                ia.Acct_Email = "test@test.com";
                session.Save(ia);
                tx.Commit();
            }
        }
    } 
```

我收到此错误：

```
{"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'Exists, Deleted) VALUES ('test', 'test', 'test', 'test@test.com', 'test', 0, 0)' at line 1"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:07:45.907

当我的实体属性名称等于使用的数据库方言的关键字时，我遇到了类似的错误。我不知道 MySQL 的方言，但是属性 Exists 或/和 Deleted 可能会导致问题。

重命名您的属性或重命名列，例如：

```
Map(x => x.Deleted).Column("IsDeleted"); 
```

如果这不适合您，还有一种方法可以打开关键字引用。请参阅此[链接](https://stackoverflow.com/questions/3332312/quoting-column-names-with-nhibernate-and-postgresql)。

# sql-server - 根据 SQL SERVER 中另一个表的条件获取结果

> ID：14713052
> 
> 赞同：1
> 
> 时间：2013-02-05T17:12:33.387
> 
> 标签：sql-server, database

我有两张用于 Microhydel 应用程序的表，一张包含消费者的月度账单记录，从中生成月度客户账单。

```
CREATE TABLE billing_history(
    [id] [numeric](18, 0) IDENTITY(1,1) NOT NULL,
    [reading_date] [date] NOT NULL,
    [reading_year] [smallint] NULL,
    [reading] [numeric](18, 0) NOT NULL,
    [consumer_id] [int] NOT NULL,
    [paid_amount] [numeric](18, 0) NULL) 
```

我有另一个表格，它为商业和家庭用户存储单位成本的不同板。

```
CREATE TABLE [rate_list](
    [flag] [varchar](50) NULL,
    [limit] [numeric](18, 0) NOT NULL,
    [price] [numeric](18, 0) NOT NULL,
    [service_charges] [numeric](18, 0) NOT NULL,
    [surcharge] [numeric](18, 0) NOT NULL
) 
```

例如，对于每月消耗 50 单位或更少电力的国内客户，与消耗相同电量的商业客户的收费不同。同样，在此平板上消耗的单位将对其应用另一个费率。

感谢@bluefeet，我已经有了使用该查询生成从第一个表中消耗的单位数的查询

```
select c.consumer_id, 
  sum(c.reading - isnull(pre.reading, 0)) TotalReading
from
(
  select consumer_id,
    reading,
    month(getdate()) curMonth,
    year(getdate()) curYear,
    case when month(getdate()) = 1 then 12 else month(getdate()) -1 end preMonth,
    case when month(getdate()) = 1 then year(getdate())-1 else year(getdate()) end preYear
  from billing_history
  where month(reading_date) = month(getdate())
    and year(reading_date) = year(getdate())
) c
left join billing_history pre
  on c.consumer_id = pre.consumer_id
  and month(pre.reading_date) = c.preMonth
  and year(pre.reading_date) = c.preYear
group by c.consumer_id; 
```

但是，我需要为每个客户生成每月账单，以便例如根据 rate_list 表中的费率。这里的关键是 DOMESTIC/COMMERCIAL，它具有不同的板用于消耗的单位数量。

有任何想法吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:25:57.777

对我的回答发表一些评论。

首先，我不确定`type_of_connection`标志在您发布的[SQL Fiddle](http://www.sqlfiddle.com/#!3/093bb)中的位置，因此我将其添加到`Consumers`.

其次，我认为您需要更改`price_list2`表格以包含`limit`价格的开始值和结束值。否则很难确定每个消费者的价格。

我使用了下`price_list2`表，其中将包含每个限制的开始/结束值：

```
CREATE TABLE [price_list2](
    [flag] [varchar](50) NULL,
    [limitStart] [numeric](18, 0) NOT NULL,
    [limitEnd] [numeric](18, 0) NOT NULL,
    [price] [numeric](18, 0) NOT NULL,
    [service_charges] [numeric](18, 0) NOT NULL,
    [surcharge] [numeric](18, 0) NOT NULL); 
```

在查询中，使用您发布的表格和原始查询，您应该能够使用如下内容：

```
select c.consumer_id,
  r.totalreading * p.price TotalBill
from Consumers c
inner join
(
  select c.consumer_id, 
    sum(c.reading - isnull(pre.reading, 0)) TotalReading
  from
  (
    select consumer_id,
      reading,
      month(getdate()) curMonth,
      year(getdate()) curYear,
      case when month(getdate()) = 1 then 12 else month(getdate()) -1 end preMonth,
      case when month(getdate()) = 1 then year(getdate())-1 else year(getdate()) end preYear
    from billing_history
    where month(reading_date) = month(getdate())
      and year(reading_date) = year(getdate())
  ) c
  left join billing_history pre
    on c.consumer_id = pre.consumer_id
    and month(pre.reading_date) = c.preMonth
    and year(pre.reading_date) = c.preYear
  group by c.consumer_id
) r
  on c.consumer_id = r.consumer_id
inner join price_list2 p
  on c.type_of_connection = p.flag
  and r.totalreading between p.limitStart and p.limitEnd 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/00b31/3)

正如您在加入`price_list2`表格时所看到的那样，我正在加入限制的开始/结束范围。这使您可以确定账单应该使用什么价格。

# plot - 尝试在 Netlogo 中绘图时除以零

> ID：14713055
> 
> 赞同：1
> 
> 时间：2013-02-05T17:12:35.293
> 
> 标签：plot, netlogo, divide-by-zero

我对 Netlogo 很陌生，我正在尝试为我的模型做一个情节。我想绘制关于海龟（计数链接）/（计数海龟）的链接的平均值。

当我单击模型的设置时，尽管出现此消息

被零除。观察者运行时出错/被绘图“Promedio conexiones para cada agente”笔“舞会”调用。' 由过程调用的 __CLEAR-ALL-AND-RESET-TICKS 调用的更新代码 由按钮“设置”调用的 SETUP

即使安装程序最初创建了 5 个海龟，它似乎在设置过程中计数 0 个海龟。但它显然试图在设置完成之前绘制一些东西。任何想法为什么会发生这种情况。我把我的代码放在更新字段上，而没有放在设置字段上。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:17:31.627

没关系得到它。在新的 Netlogo 版本中，您似乎必须在设置开始时使用 CLEAR-ALL，在设置结束时使用 RESET-TICKS，而不是在设置开始时使用 __CLEAR-ALL-AND-RESET-TICKS。否则绘图将无法按预期工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T04:26:11.200

Atirag 对他自己的问题给出的答案是正确的，但这里有一些来自[NetLogo 过渡指南](http://ccl.northwestern.edu/netlogo/docs/transition.html)的上下文：

> 为了使以前的 NetLogo 版本的模型在 5.0 中无需更改即可工作，当在 5.0 中打开旧模型时，任何出现的`clear-all`(or `ca`) 都会自动更改为 `__clear-all-and-reset-ticks`，它结合了`clear-all`和的效果`reset-ticks`。名称上的两个下划线表示这不是一个普通的原语，而只是为了向后兼容而存在。
> 
> 您应该`__clear-all-and-reset-ticks`从您的代码中删除，将其替换为`clear-all`，然后放在`reset-ticks`您的设置过程的末尾。

底线是“ `reset-ticks`”部分`__clear-all-and-reset-ticks`实际上试图更新图（就像正确的[`reset-ticks`](http://ccl.northwestern.edu/netlogo/docs/dictionary.html#reset-ticks)原语一样）。如果你在开头调用它，`setup`当图更新时不会创建你的海龟，并且类似的东西`(count links) / (count turtles)`确实会触发除以零。

旁注：`__clear-all-and-reset-ticks`在设置过程结束时调用也无济于事，因为它会清除你的海龟，这不是你想要的。这个原语基本上不应该在 NetLogo >= 5.0 中使用。

# php - 在 joomla 2.5 上使用 jumi 时 include 或 require_once 出错

> ID：14713057
> 
> 赞同：2
> 
> 时间：2013-02-05T17:12:39.410
> 
> 标签：php, joomla2.5, require-once, jumi

您好我已经创建了多个 php 页面，并且这些页面正在使用 require_once 或 include 函数调用其他页面。当我运行主脚本时，它显示以下错误：

警告：include() [function.include]: http:// 包装器在服务器配置中被 /home/content/13/10377813/html/components/com_jumi/views/application/view.html 中的 allow_url_include=0 禁用。 php(38) : eval()'d 代码在第 13 行

警告：包含（[http://bphf2012.org/index.php?option=com_jumi&fileid=10）[function.include](http://bphf2012.org/index.php?option=com_jumi&fileid=10) ]：无法打开流：在 /home/content/13/10377813/html 中找不到合适的包装器/components/com_jumi/views/application/view.html.php(38) : 第 13 行的 eval() 代码

警告：include() [function.include]：无法打开“ [http://bphf2012.org/index.php?option=com_jumi&fileid=10](http://bphf2012.org/index.php?option=com_jumi&fileid=10) ”以包含（include_path='.:/usr/local/php5_3/lib/php ') 在 /home/content/13/10377813/html/components/com_jumi/views/application/view.html.php(38) 中：第 13 行的 eval() 代码

谁能帮我解决这个问题...

谢谢。

* * *

好的，更改服务器配置后错误已修复，但我现在面临另一个问题。当我运行脚本时，它显示一个空白页。我想我在我的剧本上犯了一些错误。您能否检查我的 php 脚本，您可以从以下链接中找到：

[https://www.dropbox.com/sh/vof0p4heo4csdn9/dj2NfgcWuE](https://www.dropbox.com/sh/vof0p4heo4csdn9/dj2NfgcWuE)

我所做的是，我复制了脚本并粘贴在同名的 jumi 组件上。之后，我在菜单管理器上分配了链接以运行。

如果您想查看它的显示方式，请访问我的网站：

[http://bphf2012.org/index.php?option=com_jumi&view=application&fileid=3&Itemid=103](http://bphf2012.org/index.php?option=com_jumi&view=application&fileid=3&Itemid=103)

请帮我...

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T23:29:29.287

由于您回答 url 是您的站点，我猜想 include 和 requires 是针对您自己的站点的，看起来您以非标准方式指向文件。

通过 url 路由，您需要 Joomla 为每个文件进行设置。通常，您只需指向确切的文件：

```
include(JPATH_COMPONENT . '/views/view_name/tpl/default.php'); 
```

您可以[在此处](http://docs.joomla.org/Constants)查找Joomla 提供的不同路径常量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:03:34.400

看起来您正在尝试包含位于[http://bphf2012.org](http://bphf2012.org)上的远程文件。这本质上是一种安全风险，因此是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-23T13:15:17.007

使用相对路径为我排序。

# asp.net-mvc-4 - 在 ASP.NET MVC 4 中创建具有友好 URL 的向导

> ID：14713060
> 
> 赞同：3
> 
> 时间：2013-02-05T17:12:48.417
> 
> 标签：asp.net-mvc-4, wizard

我正在开发一个 ASP.NET MVC 4 应用程序。这个应用程序需要一个向导。该向导包含三个屏幕。我需要他们的 URL 映射到：

```
/wizard/step-1
/wizard/step-2
/wizard/step-3 
```

在我的 WizardController 中，我有以下操作：

```
public ActionResult Step1()
{
  var model = new Step1Model();
  return View("~/Views/Wizard/Step1.cshtml", model);
}

[HttpPost]
public ActionResult AddStep1(Step1Model previousModel)
{
  var model = new Step2Model();
  model.SomeValue = previousModel.SomeValue;

  return View("~/Views/Wizard/Step2.cshtml", model);
}

[HttpPost]
public ActionResult AddStep2(Step2Model previousModel)
{
  var model = new Step3Model();
  return View("~/Views/Wizard/Step3.cshtml", model);
} 
```

虽然这种方法有效，但我的问题是浏览器 URL 没有更新。如何发布步骤中的值并将用户重定向到具有不同数据模型的新 URL？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T18:10:49.767

在您调用的每个向导视图中`Html.BeginForm()`，确保调用它的重载，以接受所需的路由或所需的控制器、操作和其他路由参数。例如，在 Step1.cshtml 中：

```
@using (Html.BeginForm("Step-2", "MyWizard")) {
    // put view stuff in here for step #1, which will post to step #2
} 
```

这将使目标 URL “漂亮”，但不会修复动作名称本身“丑陋”。为了解决这个问题，MVC 中有一个功能可以将操作方法​​“重命名”为您想要的几乎任何东西：

```
[HttpPost]
[ActionName("step-2")] // this will make the effective name of this action be "step-2" instead of "AddStep1"
public ActionResult AddStep1(Step1Model previousModel)
{
    // code here
} 
```

假设应用程序使用默认的 MVC 路由（控制器/操作/id），每个步骤都有自己的 URL。

# c++ - 不使用 odr 的数组计数？

> ID：14713068
> 
> 赞同：6
> 
> 时间：2013-02-05T17:13:05.773
> 
> 标签：c++

有几个很好的理由喜欢

```
#include <cstdlib>

template<typename T, std::size_t N>
constexpr std::size_t ARRAY_COUNT_FUNC(T (&arr)[N]) { return N; } 
```

而不是

```
#define ARRAY_COUNT_MACRO(arr) (sizeof(arr)/sizeof(*arr)) 
```

一个重要的区别是，当将指针（不是数组）传递给 时`ARRAY_COUNT_MACRO`，它会默默地返回一个无用的答案，但将相同的参数传递给`ARRAY_COUNT_FUNC`会导致编译器错误指出错误。

但是宏确实有一个优点：它的参数是未经评估的。

```
#include <utility>
struct S {
    int member_array[5];
};

// OK:
std::size_t count1 = ARRAY_COUNT_MACRO(std::declval<S&>().member_array);

// ERROR: std::declval is odr-used!
std::size_t count2 = ARRAY_COUNT_FUNC(std::declval<S&>().member_array); 
```

是否有另一种方法可以同时兼顾两者的好处？即，如果参数不是数组并且不使用其参数，则会导致编译错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T17:23:28.497

如此处所述，无耻地从 Chromium 项目中[剽窃](http://www.viva64.com/en/a/0074/)。

```
#include <utility>
#include <cstdlib>

template<typename T, std::size_t N>
constexpr std::size_t ARRAY_COUNT_FUNC(T (&arr)[N]) { return N; }

#define ARRAY_COUNT_MACRO(arr) (sizeof(arr)/sizeof(*arr))

// Template for typesafey goodness.
template <typename T, size_t N>
char (&ArraySizeHelper(T (&array)[N]))[N];
// sizeof to avoid actually calling the function.
#define arraysize(array) (sizeof(ArraySizeHelper(array)))

struct S {
    int member_array[5];
};

int main()
{

    // OK:
    std::size_t count1 = ARRAY_COUNT_MACRO(std::declval<S&>().member_array);

    // ERROR: std::declval is odr-used!
    //std::size_t count2 = ARRAY_COUNT_FUNC(std::declval<S&>().member_array);

    // OK:
    std::size_t count2 = arraysize(std::declval<S&>().member_array);

    // ERROR:
    // int * p;
    // std::size_t count3 = arraysize(p);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T17:46:10.607

...然后我记得`<type_traits>`有一个`std::is_array`模板。另一种解决方案：

```
#include <type_traits>

template<typename T>
constexpr auto ArrayCountImpl(std::nullptr_t)
    -> typename std::enable_if<std::is_array<typename
                                   std::remove_reference<T>::type>::value,
                               std::size_t>::type
{ return std::extent<typename std::remove_reference<T>::type>::value; }

template<typename T>
std::size_t ArrayCountImpl(...)
{ static_assert(!std::is_same<T,T>::value,
                "Argument type is not an array"); }

#define ARRAY_COUNT_MACRO_2(arr) (ArrayCountImpl<decltype(arr)>(nullptr)) 
```

# iphone - 如何在不使用高清图像的情况下制作兼容iPad3的cocos2d游戏

> ID：14713069
> 
> 赞同：0
> 
> 时间：2013-02-05T17:13:16.387
> 
> 标签：iphone, ios, cocos2d-iphone, ipad-3

我有一个 iPad 应用程序。在这个应用程序中，我只使用了普通图像。这个应用程序是一个用 cocos2d 制作的游戏。Apple 拒绝了这个应用程序，理由是它与 iPad 3 不兼容。并且图像没有在此上调整大小。谁能告诉我如何在不使用高清图像的情况下为 iPad 3 制作应用程序？

# php - Yii 中的 phpass 身份验证失败

> ID：14713071
> 
> 赞同：3
> 
> 时间：2013-02-05T17:13:30.253
> 
> 标签：php, yii, phpass

我正在尝试在 Yii 中实现 phpass 身份验证，但是每次都失败。我一直在阅读许多 SO 文章，但还没有找到解决方案，所以我认为这一定是 Yii 特定的问题。

在 User.php 我保存散列密码：

```
public function beforeSave() {
    $phpass = new PasswordHash(8, false);
    $hash = $phpass->HashPassword($this->user_pass);
    $this->user_pass = $hash;
    return true;
} 
```

在 UserIdentity 我正在检查密码：

```
public static function isPasswordValid($plainPass, $hashedPass) {
    $phpass = new PasswordHash(8, false);
    $isValid = $phpass->CheckPassword($plainPass, $hashedPass);

    if($isValid){
        return true;
    }

    return false;
} 
```

`$hashedPass`从数据库中出来，`plainPass`是用户刚刚输入表单但`$isValid`一直返回 false 的内容。事实上，我从数据库中取出散列密码并手动应用它，但它仍然失败：

```
$isValid = $phpass->CheckPassword('password', '$2a$08$P9X8duz7S8LOysz1XIn3fe/YYW3dwAs2busSBIX/QnZhKH/R9/H1S') 
```

我已经检查以确保在插入时数据库中的散列密码没有被截断，并且它不是......我已经根据`varchar 60`另一篇 SO 文章调整了我的密码字段，但这没有帮助......

编辑：似乎如果我手动将哈希粘贴到数据库字段中，则身份验证在通过以下方式生成后起作用：

```
echo $phpass->HashPassword('password'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:44:09.650

问题可能出在 beforeSave 中。`user_pass` **每次**保存用户时都会散列。如果您保存用户两次，您的密码将被哈希两次，因此无用。

我将 phpass 与 yii 一起使用没有问题，但是如果它是由用户手动设置的，我只会散列密码。

仅当用户修改/设置密码时才尝试哈希密码。

# regex - “不可翻译”的语法到正则表达式

> ID：14713075
> 
> 赞同：3
> 
> 时间：2013-02-05T17:13:38.663
> 
> 标签：regex, grammar, context-free-grammar, automata

有这样的事吗？

例如，S -> aSb | ^ (可能的词: ^, ab, aabb, aaabbb, aaaabbbb, ...)

据我所知，唯一与上述语法密切匹配的正则表达式是：a*b*

但是正则表达式可以产生诸如 aab、abb、... 之类的单词，其中 a 和 b 不相等。

有针对这个的解决方法吗？类似于：a*b* if #a = #b

编辑：我认为没有解决方案。

对此的正确解释是什么？这实际上是我家庭作业的一个片段，我真的不知道该回答什么，因为没有将语法翻译成正则表达式的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T17:42:10.773

如果您在谈论形式语言理论，那么当然所有非常规语法（如您的示例中）都不能用正则表达式（根据定义）来表达。

但是，如果您想知道不同的正则表达式风格（在编程语言/正则表达式库中）可以做什么，那么您可以匹配各种非常规语法/语言。

例如，在 Perl/PCRE 中，您可以将示例语言与以下任何一种匹配：

*   使用递归/子模式调用：

    `^(a(?1)b)$`

*   使用反向引用（带有条件）：

    `^(?:a(?=a*(b(?(1)\1))))+\1$|^$`

您可能对此问题和答案感兴趣：[Match a^nb^nc^n (eg "aaabbbccc") using regular expressions (PCRE)](https://stackoverflow.com/questions/7434272)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T18:20:32.897

在形式语言理论中，可以使用称为“抽水引理”的东西来证明某些句子（语言）集不能用正则表达式来描述。参见维基百科[http://en.wikipedia.org/wiki/Pumping_lemma_for_regular_languages](http://en.wikipedia.org/wiki/Pumping_lemma_for_regular_languages)。您从要描述的语言开始，并使用抽水引理来找到矛盾。您的示例的证明实际上在该维基百科页面上。

上下文无关语言也存在类似的理论。有些语言不能用上下文无关的语法来描述。

# php - foreach 循环在我的查询中添加了一个额外的行

> ID：14713078
> 
> 赞同：0
> 
> 时间：2013-02-05T17:13:55.133
> 
> 标签：php, mysql, foreach

我想知道为什么我的 foreach 循环会在我的 mysql 表中创建一个额外的行，并且只插入一个包含数据的列。我是 php 和 mysql 的新手，所以非常感谢任何帮助。下面是我表格中的代码

```
<form name="insert_test" action="inserttest.php" method="post">
<table>

    <tr>
        <td>Brand</td><td>terms</td><td>HW Stamp</td><td>Origin</td><td>Cases</td>
    </tr>

    <tr>
        <td><input type="text" name="brand[]" /></td>
        <td><input type="text" name="terms[]" /></td>
        <td><input type="text" name="hwstamp[]" /></td>
        <td><input type="text" name="origin[]" /></td>
        <td><input type="text" name="cases[]" /></td>
        </tr>

</table>

    <table>

    <tr>
        <td>Brand</td><td>terms</td><td>HW Stamp</td><td>Origin</td><td>Cases</td>
    </tr>

    <tr>
        <td><input type="text" name="brand[]" /></td>
        <td><input type="text" name="terms[]" /></td>
        <td><input type="text" name="hwstamp[]" /></td>
        <td><input type="text" name="origin[]" /></td>
        <td><input type="text" name="cases[]" /></td>
        </tr>

</table>

<input type="hidden" name="report_id" value="<?php echo $report_id;?>" />

<input type="submit" value="Submit" /> 
```

这是我的php代码：

```
foreach ($_POST['brand'] as $key => $brand) {

 $terms = addslashes($_POST['terms'][$key]);
    $hwstamp = addslashes($_POST['hwstamp'][$key]);
    $origin = addslashes($_POST['origin'][$key]);
    $cases = addslashes($_POST['cases'][$key]);
    $report_id = addslashes($_POST['report_id'][$key]);

$queryreg= "INSERT INTO lots VALUES('',' $brand', '$terms',' $hwstamp', '$origin', '$cases','$report_id')" or die(mysql_error());

    mysql_query($queryreg); 
```

}

```
echo mysql_error(); 
```

我表中的列是 (id,brand,terms,hwstamp,origin,cases,report_id) id 是主键，report_id 是外键。当我在两个表中输入数据时，它会正确插入并创建两行并在列中包含所有数据，当我只将数据输入到一个表中时，它会在表中创建包含所有数据的一行，然后创建第二行除 report_id 列外，所有列都为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:40:37.877

改变这个

```
$terms = addslashes($_POST['terms'][$key]);
$hwstamp = addslashes($_POST['hwstamp'][$key]);
$origin = addslashes($_POST['origin'][$key]);
$cases = addslashes($_POST['cases'][$key]);
$report_id = addslashes($_POST['report_id'][$key]);

$queryreg= "INSERT INTO lots VALUES('',' $brand', '$terms',' $hwstamp', '$origin', '$cases','$report_id')" or die(mysql_error());

mysql_query($queryreg); 
```

进入这个：

```
if (trim($_POST['terms'][$key])!='' {
$terms = addslashes($_POST['terms'][$key]);
$hwstamp = addslashes($_POST['hwstamp'][$key]);
$origin = addslashes($_POST['origin'][$key]);
$cases = addslashes($_POST['cases'][$key]);
$report_id = addslashes($_POST['report_id'][$key]);

$queryreg= "INSERT INTO lots VALUES('',' $brand', '$terms',' $hwstamp', '$origin', '$cases','$report_id')" or die(mysql_error());
mysql_query($queryreg);
 } 
```

它应该防止空行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T21:17:29.207

谢谢大家的意见。我能够解决空白行的问题，我像 ring0 建议的那样检查了我的 html，并执行了 print_r($_post) 以查看发布的内容并且数组有空键。

Array ( [brand] => Array ( [0] => test [1] => ) [terms] => Array ( [0] => test [1] => ) [hwstamp] => Array ( [0] => 是 [1] => ) [origin] => 数组 ( [0] => mex [1] => ) [cases] => 数组 ( [0] => 1234 [1] => ) )

因此，在我的 foreach 循环中，我执行了以下操作，以确保用户是否没有使用所有表单字段来创建包含空数据的第二行。

```
foreach ($_POST['brand'] as $key => $brand) 

{

if($brand !=''){

$terms = addslashes($_POST['terms'][$key]);

$hwstamp = addslashes($_POST['hwstamp'][$key]);
$origin = addslashes($_POST['origin'][$key]);
$cases = addslashes($_POST['cases'][$key]);

$queryreg= "INSERT INTO lots VALUES('',' $brand', '$terms',' $hwstamp', '$origin', '$cases','$report_id')" or die(mysql_error());

mysql_query($queryreg);
}

echo mysql_error();
} 
```

现在它正在工作，我可以进去清理代码以防止 sql 注入。感谢大家的意见

# python - 将 write.target 行压缩为一条？

> ID：14713079
> 
> 赞同：2
> 
> 时间：2013-02-05T17:13:56.403
> 
> 标签：python

我正在通过“以艰难的方式学习 python”来学习 python，但我在[练习 16 中遇到了问题：](http://learnpythonthehardway.org/book/ex16.html)学习练习。如何将以下六行代码转换为一行？：

```
target.write(line1)
target.write("\n")
target.write(line2)
target.write("\n")
target.write(line3)
target.write("\n") 
```

我继续尝试这个：

```
lines = line1,"\n",line2,"\n",line3,"\n"
target.write(lines) 
```

但这似乎也不起作用，在终端中它说：期望一个字符缓冲区对象

在参考练习 6 之后，我尝试了：

```
lines = "%s\n%s\n%s\n" % line1,line2,line3
target.write(lines) 
```

然后在终端中显示“TypeError：格式字符串的参数不足”

也试过：

```
target.write("%s,\n,%s,\n,%s,\n" % line1,line2,line3) 
```

并遇到了同样的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:17:59.593

看看[练习 6](http://learnpythonthehardway.org/book/ex6.html)，然后看看你正在写的信息——看起来像这样，不是吗？

`'<line>\n<line>\n<line>\n'`

练习 6 应该能让你加快速度来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:41:58.687

```
target.write('\n'.join(lines)) #assuming all the line #s are put in a list called "lines" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-03T22:24:29.733

这对我使用 python 2.7 有用

```
Lines = "%s\n%s\n%s" % (Line1, Line2, Line3)

target.write(Lines) 
```

或者

```
target.write("%s\n%s\n%s" % (Line1, Line2, Line3)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-08T00:12:13.540

在阅读了关于练习 6 的答案后（我会评论我的帖子，但我不能：o）我写了这段代码：

```
line1 = raw_input("line 1: ")
line2 = raw_input("line 2: ")
line3 = raw_input("line 3: ")
newline = "\n"

print "Now I 'm going to write these to the file."

target.write(line1 + newline + line2 + newline + line3 + newline) 
```

它就像一个魅力！

# java - 使用 WritableList 铸造问题

> ID：14713083
> 
> 赞同：0
> 
> 时间：2013-02-05T17:14:05.843
> 
> 标签：java, list, swt, observable

我正在使用可写列表来存储用户添加到应用程序的数据集数据。

```
public class AplotDataModel  {

 IObservableList observableList = new WritableList();
 private static AplotDataModel instance = null;

 //////////////////////////////////////////////////////////////////////////
 //                         Constructor                                  //
 //////////////////////////////////////////////////////////////////////////
 private AplotDataModel() {

 }// end Constructor

 //////////////////////////////////////////////////////////////////////////
 //             SingletonSelectTable getInstance()                       //
 //////////////////////////////////////////////////////////////////////////
 public static AplotDataModel getInstance() {
    if (instance == null) {
       instance = new AplotDataModel();
  }
 return instance;
 }

 //////////////////////////////////////////////////////////////////////////
 //                              add()                                   //
 //////////////////////////////////////////////////////////////////////////
 public void add(TCComponentItemRevision tcRevision, TCComponentDataset selectedDataset) {
    AplotDatasetData pp = new AplotDatasetData(tcRevision, selectedDataset);
       if (!observableList.contains(pp)) {
          observableList.add(pp);
       }
 }

 //////////////////////////////////////////////////////////////////////////
 //                       clearTableArray()                              //
 //////////////////////////////////////////////////////////////////////////
 public void clearTableArray() {
    observableList.clear();
 }
}// End Class 
```

在 ADD 方法中，我使用一个类来格式化数据以添加到可写列表中

```
AplotDatasetData pp = etc..... 
```

班级

```
public class AplotDatasetData {

  TCComponentItemRevision rev;
  TCComponentDataset   componentdataset;
  String markUp = "no";

  //////////////////////////////////////////////////////////////////////////
  //                           Constructor                                //
  //////////////////////////////////////////////////////////////////////////
  public AplotDatasetData(TCComponentItemRevision tcRevision, TCComponentDataset selectedDataset) {
     rev = tcRevision;
     componentdataset = selectedDataset;

  }// end Constructor

  //////////////////////
  //   getDataset()   //
  //////////////////////
  public TCComponent getDataset() {
     return componentdataset;
  }

  //////////////////
  //   getRev()   //
  //////////////////
  public TCComponent getRev() {
     return rev;
  }

  //////////////////
  //   equals()   //
  //////////////////
  @Override
  public boolean equals(Object o) {
     AplotDatasetData p = (AplotDatasetData) o;
     if (rev.equals(p.getRev()) && componentdataset.equals(p.getDataset())) {
       return true;
      }
     else {
        return false;
      }
  }// end equals() 
```

我的代码编译 - 但我运行了一个涉及可写列表的操作。我收到以下错误。

> 错误：11:31:00,591 - TcLogger$IC_LogListener.logging:? org.eclipse.core.runtime - org.eclipse.ui - 0 - 未处理的事件循环异常 org.eclipse.swt.SWTException：无法执行可运行（java.lang.ClassCastExc eption：org.eclipse.core.databinding.observable。 list.WritableList 不能转换为 com.lexmark.aplot.datamodels.AplotDataModel$AplotDatasetData) 等.....
> 
> 原因：java.lang.ClassCastException：org.eclipse.core.databinding.observable .list.WritableList 无法在 com.lexmark.aplot.datamodels.AplotDataModel$AplotDatasetData 中转换为 com.lexmark.aplot.datamodels.AplotDataModel $AplotDatasetData。等于（一个 plotDataModel.java:167）

我知道问题出在 Equals 方法中，但我不确定如何更改它，因此它将与可写列表一起使用。

***编辑***

我将问题追溯到这个

```
ArrayList<AplotDataModel.AplotDatasetData> tableData = new ArrayList<AplotDataModel.AplotDatasetData>(AplotDataModel.getInstance().getObservableList()); 
```

我正在尝试使用可写列表中的数据创建一个新的数组列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:11:02.603

问题出在 Equals 方法中。我必须使方法更健壮。

```
 ////////////////////
  //   hashCode()   //
  ///////////////////
  @Override
  public int hashCode() {
     final int prime = 31;
     int result = 1;
     result = prime * result + getOuterType().hashCode();
     result = prime * result
           + ((componentdataset == null) ? 0 : componentdataset.hashCode());
     result = prime * result + ((rev == null) ? 0 : rev.hashCode());
     return result;
  }

  ////////////////////
  //    equals()    //
  ////////////////////
  @Override
  public boolean equals(Object obj) {
     if (this == obj)
        return true;
     if (obj == null)
        return false;
     if (getClass() != obj.getClass())
        return false;
     AplotDatasetData other = (AplotDatasetData) obj;
     if (!getOuterType().equals(other.getOuterType()))
        return false;
     if (componentdataset == null) {
        if (other.componentdataset != null)
           return false;
     }
     else if (!componentdataset.equals(other.componentdataset))
        return false;
     if (rev == null) {
        if (other.rev != null)
           return false;
     }
     else if (!rev.equals(other.rev))
        return false;
     return true;
  }

  private AplotDataModel getOuterType() {
     return AplotDataModel.this;
  } 
```

# debugging - 如何在 redis 日志中查看 set/get/

> ID：14713084
> 
> 赞同：20
> 
> 时间：2013-02-05T17:14:06.247
> 
> 标签：debugging, logging, configuration, redis

我需要在 redis 日志中查看 redis 获取/设置的内容。
我尝试将 redis 日志级别设置为调试和详细。当我设置一个值时，这不会向我显示任何内容。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-06T11:40:52.077

除非你进入日志很重要，在这种情况下我认为我不能帮助你，你应该能够使用[MONITOR](http://redis.io/commands/monitor)命令：

> MONITOR 是一个调试命令，它流回 Redis 服务器处理的每个命令。它可以帮助理解数据库发生了什么。该命令既可以通过 redis-cli 也可以通过 telnet 使用。

您可以执行以下操作：

```
redis-cli monitor | grep -E ' "(g|s)et" ' 
```

请注意，虽然有性能成本（[在链接的文档中提到大约为 50%](https://redis.io/commands/monitor#cost-of-running-monitor)）。

将其通过管道传输到文件：

```
redis-cli monitor | grep -E ' "(g|s)et" ' > redis_get_set.log 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-11-03T14:06:14.087

我用过`redis-cli monitor > redis.log` ，对我来说效果很好，比控制台好。

# netbeans - 如何自定义生成的 javadoc 存根？

> ID：14713088
> 
> 赞同：7
> 
> 时间：2013-02-05T17:14:27.930
> 
> 标签：netbeans, javadoc

在 Netbeans 中，当您`/**`在方法上方键入时，它会生成一个 javadoc 存根：

```
/**
 * 
 * @param 
 * @return 
 */ 
```

如何自定义生成的文本？我想要一个自定义的 javadoc 存根，例如：

```
/**  Author = {author}
 *  
 * My custom text  
 * 
 * @param 
 * @return 
 */ 
```

注意：这是一个方法，而不是使用类模板的类。

搜索词：netbeans javadoc 模板存根自定义自动完成

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T17:18:14.020

这不会取代的功能，`/**`但它会让你有一个替代方案。

*   进入`Tools, Options`，
*   点击`Edit, Code Templates`标签，
*   从语言下拉菜单中，确保选择*Java*，
*   点击`New`,
*   输入您选择的缩写（我用于`jdt`javadoc 模板），
*   点击`OK`,
*   在扩展文本下，键入所需的 javadoc 注释。注意：一件烦人的事情是，你必须在带有单词的行的末尾有一个额外的输入，否则它不会将下一个单词移动到下一行。

例如，如果您输入以下内容：

```
/**
 * @author
 * 
 * @param
 * @return
 */ 
```

它会输出这个：

```
/**
 * @author
 * 
 * @param @return
 */ 
```

但是如果你输入这个：

```
/**
 * @author
 * 
 * @param
 *
 * @return
 */ 
```

它会输出：

```
/**
 * @author
 * 
 * @param
 *
 * @return
 */ 
```

有点奇怪。无论如何，一旦你输入了它，看看 Expand Template on: 按钮，看看它是否设置在 tab 或 enter 上。那部分是你的选择。但是，您要激活模板。单击`OK`。

在您的文档中，转到您要插入预格式化注释的位置，而不是键入`/**`类型，`jdt`然后执行扩展模板操作（制表符、回车等），您的注释就会出现。

# database - ASP.net MVC 3 Forms Authentication 项目如何连接到数据库？

> ID：14713090
> 
> 赞同：1
> 
> 时间：2013-02-05T17:14:30.340
> 
> 标签：database, asp.net-mvc-3, forms-authentication

我目前有一个填充数据库、一个 .NET 1.1 网站以及在 MVC 3 中重写它的任务。我已经创建了带有表单身份验证的 MVC 项目，将我的数据库连接到项目，但不知道最好的方法以访问其中的信息。

我遇到了这个链接： http: [//msdn.microsoft.com/en-us/library/f1kyba5e](http://msdn.microsoft.com/en-us/library/f1kyba5e(v=vs.100).aspx?ppud=4) (v=vs.100).aspx?ppud=4 ，但我不确定这是否是我的在这种情况下寻找。

我今天的目标是让登录页面正常工作，这样我就可以使用管理员帐户登录并查看网站的主页。我仍然是 MVC 的新手，并且倾向于过于广泛地寻找答案。希望有一些明显的东西我错过了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:21:35.087

您无需立即编写自定义会员提供程序。您可以在稍后阶段执行此操作。如果您只想让您的应用程序使用 LogOn 屏幕，您所要做的就是修改默认 AccountController 中的 LogOn 方法：

```
[HttpPost]
public ActionResult LogOn(LogOnModel model, string returnUrl)
{
    if (ModelState.IsValid)
    {
        if (ValidateUser(model.UserName, model.Password))
        {
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
            if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
            {
                return Redirect(returnUrl);
            }
            else
            {
                return RedirectToAction("Index", "Home");
            }
        }
        else
        {
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
        }
    }

    // If we got this far, something failed, redisplay form
    return View(model);
} 
```

然后您只需要编写一个 ValidateUser 方法来查询您的数据库并验证用户是否存在：

```
private bool ValidateUser(string username, string password)
{
    // TODO: query your db here and verify if the account exists
} 
```

稍后您可以编写自定义成员资格提供程序，以避免将数据库访问逻辑混入您的控制器并分离关注点。这是一个关于编写自定义会员提供程序的好视频：[http ://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-membership-provider](http://www.asp.net/web-forms/videos/how-do-i/how-do-i-create-a-custom-membership-provider)

您不需要覆盖 MembershipProvider 类的所有方法，只需覆盖您使用的那些方法。一开始，您可以首先仅覆盖 ValidateUser 方法，以允许使用您的自定义数据表在您的网站中进行用户身份验证：

```
public class MyMembershipProvider : MembershipProvider
{
    public override bool ValidateUser(string username, string password)
    {
        // put your data access logic here
    }

    ...
} 
```

# android - 通用phonegap视频播放器？

> ID：14713091
> 
> 赞同：0
> 
> 时间：2013-02-05T17:14:30.147
> 
> 标签：android, html, cordova

我正在构建一个针对不同设备（主要是 Android 和 IOS）的 phonegap 应用程序。我想播放本地 mp4 视频。我尝试使用[这个插件](https://github.com/macdonst/VideoPlayer)和其他插件，但据我了解，它们是为 android 构建的。这个问题是否有通用的解决方案，即有什么方法可以构建而不用担心我的目标设备是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:35:22.597

你可以试试视频标签

```
<video width="320" height="240" controls>
  <source src="movie.mp4" type="video/mp4">
</video> 
```

# c# - 使用名称访问工作表上的 CustomProperties

> ID：14713093
> 
> 赞同：3
> 
> 时间：2013-02-05T17:14:31.210
> 
> 标签：c#, excel, ms-office, office-interop

我正在尝试使用属性名称访问工作表上的自定义属性，但似乎不支持此功能（至少在 C# 中不支持，我看到其他人报告说它在 VB 中有效，文档也这么说）。有人可以确认这在 C# 中不起作用吗？这是示例代码：

```
activeWorkSheet.CustomProperties.Add("Test", 123);
// Accessing by index works, but by name it doesn't. 
// The documentation says access by name should be possible
var works = activeWorkSheet.CustomProperties.Item[1].Value;
var doenstWork = activeWorkSheet.CustomProperties.Item["Test"].Value; 
```

我知道解决方法只是一种遍历所有属性并找到正确属性的方法，但我真的很想避免任何额外的开销。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T21:20:20.967

> 有人可以确认这在 C# 中不起作用吗？

刚刚尝试使用 Office 2013 预览版和 Interop API 版本 15，我可以确认这在 C# 中不起作用（抛出`COMException`“类型不匹配”消息）。

我检查了[文档](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.customproperties.item%28v=office.14%29.aspx)，其中指出使用键名作为索引器的`Item`索引应该是完全合法的 - 从`CustomProperties.Item`属性的文档中，它指出以下索引器可用：

```
CustomProperty this[
    Object Index
] { get; } 
```

...在以下文本中，文档指出：

> **参数**
> 
> *指数*
> 
> 类型：`System.Object`
> 
> 必需的对象。对象的**名称**或索引号。

...因此，由于文档声明该名称是有效的密钥，因此我们遇到的行为可能是一个错误。

# sitecore - Sitecore 无法在桌面内打开窗口

> ID：14713096
> 
> 赞同：0
> 
> 时间：2013-02-05T17:14:49.107
> 
> 标签：sitecore, sitecore6

6.0 rev.130111 (Update-3) 但我在桌面模式下看到非常奇怪的行为例如我可以打开内容编辑器或媒体库，但很多子窗口，如发布站点、编辑布局等打开时出现错误“请求的文档是未找到”。我看到 reqvested URL 和它存在的内部站点核​​心结构。很奇怪吗？我该如何解决？它可以与某些设置相关吗？我在 SDN [http://sdn.sitecore.net/Products/Sitecore%20V5/Sitecore%20CMS%206/ReleaseNotes/KnownIssues%20Recommended/DisableBrowserCaching%20setting%20issue.aspx](http://sdn.sitecore.net/Products/Sitecore%20V5/Sitecore%20CMS%206/ReleaseNotes/KnownIssues%20Recommended/DisableBrowserCaching%20setting%20issue.aspx)中发现了一些问题，但我有最新版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:12:28.377

我已经找到答案了。我在位于 web config 部分的核心数据库中的 sitecore 内容项的链接不正确。

# web-services - 使用 Spring Webservices 处理多个证书

> ID：14713099
> 
> 赞同：1
> 
> 时间：2013-02-05T17:14:54.083
> 
> 标签：web-services, spring, soap, spring-ws, ws-security

我有一个客户端将 SOAP 消息发送到我创建的 Spring Web 服务端点。消息经过签名和加密，我成功解密了消息，并使用我们各自的公钥/私钥对我的回复进行了签名/加密。我通过使用在应用程序上下文 xml 中配置的安全拦截器 (wss4j) 来做到这一点。问题是，似乎使用这种配置，我只能使用来自客户端的一个证书。现在，客户端想要发送相同的请求，但同时来自两个不同的系统，因此他们将使用两个证书。我的问题是，有没有一种方法/策略可以在我的端点中构建一些智能，以根据收到的消息确定哪个证书？我可以查看肥皂标题中的签名吗？我可以在应用程序上下文中使用拦截器配置它还是需要另一种方法？

# r - R FactoMineR：返回集群成员

> ID：14713100
> 
> 赞同：2
> 
> 时间：2013-02-05T17:14:53.763
> 
> 标签：r, cluster-analysis, hierarchical-clustering

我已经制作了一个`HCPC`对象，并希望返回一个观察列表以及它们属于哪些集群。我找不到执行此操作的命令；有人知道吗？

仅供参考，这是我的工作：

```
file <- read.csv("file", header=TRUE) 
library(FactoMineR) 
res.mca = MCA(file, graph=FALSE) 
# manually cut tree according to inertia gain 
res.hcpc = HCPC(res.mca, nb.clust=0) 
```

* * *

**编辑：**一个可重现的例子：

```
library(FactoMineR)
data(tea)
res.mca  <- MCA(tea, quanti.sup = 19, quali.sup = 20:36)
res.hcpc <- HCPC(res.mca, nb.clust = 5) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-09T15:29:48.507

输出`$data.clust`给出了一个包含输入数据的数据框和一个包含个人所属集群的列（最后一个）。

```
library(FactoMineR)
data(tea)
res.mca  <- MCA(tea, quanti.sup = 19, quali.sup = 20:36)
res.hcpc <- HCPC(res.mca, nb.clust = 5)
res.hcpc$data.clust 
```

请注意，如果您希望个体与输入数据集中的顺序相同，则应使用`order=FALSE`HCPC 中的参数：

```
res.hcpc <- HCPC(res.mca, nb.clust = 5, order=FALSE)
res.hcpc$data.clust 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-05T23:23:34.250

虽然这篇文章是 3 年前写的，但我的回答可能对读者有所帮助。我只是在寻找与使用 HCPC 进行异常值检测相同的问题的解决方案，这就是我得到的想法：我根据字段“cluster”从 hcpc() 发出的数据帧 $data.clust 中提取了一个子集. **异常值<-子集（DHCPC$data.clust，clust==4）**

我在这里找到了答案：[如何根据涉及字段的条件提取数据帧的子集？](https://stackoverflow.com/questions/3445590/how-to-extract-a-subset-of-a-data-frame-based-on-a-condition-involving-a-field)

# c - AND 0xFF 有什么作用？

> ID：14713102
> 
> 赞同：52
> 
> 时间：2013-02-05T17:14:59.723
> 
> 标签：c, bit-manipulation, bitwise-operators, bit-shift

在以下代码中：

```
short = ((byte2 << 8) | (byte1 & 0xFF)) 
```

目的是`&0xFF`什么？因为有时我看到它写成：

```
short = ((byte2 << 8) | byte1) 
```

这似乎也很好用？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-05T17:16:44.120

将一个整数与`0xFF`仅留下最低有效字节。例如，要获取 a 中的第一个字节`short s`，您可以编写`s & 0xFF`. 这通常称为“掩蔽”。如果`byte1`是单字节类型（如`uint8_t`）或已经小于 256（因此除最低有效字节外全为零），则无需屏蔽较高位，因为它们已经为零。

当您可能正在使用签名类型时，请参阅下面的~~tristopia Patrick Schlüter 的回答。~~在进行按位运算时，我建议只使用无符号类型。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-02-05T17:18:59.560

如果`byte1`是 8 位整数类型，那么它是没有意义的 - 如果它超过 8 位，它基本上会给你值的最后 8 位：

```
 0 1 0 1 0 1 0 1 0 1 0 1 0 1 0 1
 &  0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1
    -------------------------------
    0 0 0 0 0 0 0 0 0 1 0 1 0 1 0 1 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-02-05T17:51:54.160

`byte1`如果类型为is ，则第二个表达式的危险就来了`char`。在这种情况下，某些实现可以拥有它`signed char`，这将导致在评估时进行符号扩展。

```
signed char byte1 = 0x80;
signed char byte2 = 0x10;

unsigned short value1 = ((byte2 << 8) | (byte1 & 0xFF));
unsigned short value2 = ((byte2 << 8) | byte1);

printf("value1=%hu %hx\n", value1, value1);
printf("value2=%hu %hx\n", value2, value2); 
```

将打印

```
value1=4224 1080     right
value2=65408 ff80    wrong!! 
```

我在 Solaris SPARC 64 位的 gcc v3.4.6 上尝试过，结果`byte1`与.`byte2``char`

TL;博士

屏蔽是为了避免隐式符号扩展。

*编辑*：我检查过，它在 C++ 中的行为相同。

*EDIT2*：根据要求解释符号扩展。符号扩展是 C 计算表达式方式的结果。C中有一条规则叫做[promotion rule](https://stackoverflow.com/questions/46073295/implicit-type-promotion-rules)。`int`在进行评估之前，C 会隐式地将所有小类型转换为。让我们看看我们的表达式会发生什么：

```
unsigned short value2 = ((byte2 << 8) | byte1); 
```

`byte1`是一个包含位模式 0xFF 的变量。如果`char`是，则`unsigned`该值被解释为 255，如果是`signed`，则为 -128。在进行计算时，C 会将值扩展为一个`int`大小（通常为 16 或 32 位）。这意味着如果变量是`unsigned`并且我们将保留值 255，则该值的位模式`int`将是 0x000000FF。如果是，`signed`我们想要值 -128，其位模式为 0xFFFFFFFF。该符号被扩展到用于进行计算的临时大小。因此 oring 临时将产生错误的结果。

在 x86 汇编上，它是通过`movsx`指令完成的（`movzx`对于零扩展）。其他 CPU 有其他指令（6809 有`SEX`）。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-02-05T17:17:30.987

假设你`byte1`是一个字节（8位），当你对一个字节与 0xFF 进行按位与时，你得到的是相同的字节。

所以`byte1`是一样的`byte1 & 0xFF`

说`byte1`是`01001101`，那么`byte1 & 0xFF = 01001101 & 11111111 = 01001101 = byte1`

如果 byte1 是其他类型，比如 4 个字节的整数，则与 0xFF 的按位与会留下 byte1 的最低有效字节（8 位）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-02-05T17:18:46.083

这`byte1 & 0xff`确保只有 8 个最低有效位`byte1`可以是非零。

如果`byte1`已经是只有 8 位的无符号类型（例如，`char`在某些情况下，或`unsigned char`在大多数情况下），它不会有任何区别/完全没有必要。

如果`byte1`是带符号的类型或具有超过 8 位的类型（例如 , , `short`），并且设置了除 8 个最低有效位之外的任何位，则将存在差异（即，它将在ing之前将那些高位归零与另一个变量，所以这个操作数只影响结果的 8 个最低有效位）。`int``long``or``or`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-05T17:17:20.507

它清除所有不在第一个字节中的位

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-05T17:29:54.587

`& 0xFF`本身仅确保如果字节长于 8 位（语言标准允许），则忽略其余字节。

> 这似乎也很好用？

如果结果最终大于`SHRT_MAX`，您将获得未定义的行为。在这方面，两者都将同样糟糕。

# javascript - 从父级自定义弹出样式

> ID：14713105
> 
> 赞同：0
> 
> 时间：2013-02-05T17:15:07.933
> 
> 标签：javascript, jquery

我正在尝试打开一个新的 URL 作为弹出窗口。这样可行。现在我正在尝试从弹出窗口中自定义样式等。那是行不通的。怎么了？

异常：“未捕获的类型错误：无法读取 null 的属性‘样式’”

```
 <script>
                function startGaLandingpage(url) {
                    params = 'width=' + screen.width;
                    params += ', height=' + screen.height;
                    params += ', top=0, left=0'
                    params += ', fullscreen=yes';
                    var url = 'https://www.google.com/analytics/web/?hl=en&pli=1#realtime/rt-overview/a29259688w55318706p63647373/'
                    landingpage = window.open(url, 'landingpage', params);
                    var landingpagescript = document.createElement('script');
                    landingpagescript.src = 'https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js';
                    landingpagescript.type = 'text/javascript';
                    landingpage.document.getElementsByTagName('head')[0].appendChild(landingpagescript);

                    var div = landingpage.document.getElementById('ID-navPanelContainer').style;
                    if (div)
                        void (div.display = (div.display == 'none') ? 'block' : 'none');
                    var div = landingpage.document.getElementById('ID-headerPanel').style;
                    if (div)
                        void (div.display = (div.display == 'none') ? 'block' : 'none');
                    var div = landingpage.document.getElementById('ID-overviewPanelTrafficSourceValueOrganicTable').style;
                    if (div)
                        void (div.display = (div.display == 'none') ? 'block' : 'none');
                    var div = landingpage.document.getElementById('ID-overviewPanelGeoComponent').style;
                    if (div)
                        void (div.display = (div.display == 'none') ? 'block' : 'none');
                    var div = landingpage.document.getElementById('ID-footerPanel').style;
                    if (div)
                        void (div.display = (div.display == 'none') ? 'block' : 'none');
                    var div = landingpage.document.getElementById('ID-navToggle').style;
                    if (div)
                        void (div.display = (div.display == 'none') ? 'block' : 'none');
                    var div = landingpage.document.getElementById('ID-overtimePanel').style;
                    if (div)
                        void (div.display = (div.display == 'none') ? 'block' : 'none');
                    var div = landingpage.document.getElementById('ID-contextDetailsPanel').style;
                    if (div)
                        void (div.display = (div.display == 'none') ? 'block' : 'none');
                    var div = landingpage.document.getElementById('ID-reportHeader').style;
                    if (div)
                        void (div.display = (div.display == 'none') ? 'block' : 'none');
                    var div = landingpage.document.getElementById('ID-realtimeReportFootnote').style;
                    if (div)
                        void (div.display = (div.display == 'none') ? 'block' : 'none');

                }

            </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:39:52.403

您正在重新声明登录页面：

```
landingpage = window.open(url, 'landingpage', params);
...
var landingpage = document.createElement('script'); 
```

在这种情况下，您不能再在同一函数中使用前一个。这可能只是增加了问题。

我建议将包含脚本标签的新变量重命名为`landingpagescript`

```
var landingpagescript = document.createElement('script'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:44:31.407

`document`指的`document`是当前页面，即主页面。您需要参考`document`新打开的窗口的：

```
var div = landingpage.document.getElementById(...).style; 
```

我想旧的 jQuery 也意味着加载到弹出窗口，所以在附加时你也需要相同的引用`element1`。

也有可能，打开弹出窗口需要一些时间。因此，最好将弹出窗口的所有内容放到一个单独的函数中，并在 内调用该函数，或者更确切地说，在关闭标记`setTimeout`之前从弹出窗口本身调用该函数。`body`

* * *

**编辑**

`div`将是`undefined`如果`#ID-navPanelContainer`不存在。检查 a`style`会`undefined`引发错误。你的检查应该是这样的：

```
var div = landingpage.document.getElementById('ID-navPanelContainer');
if (div) {
    void (div.style.display = (div.style.display == 'none') ? 'block' : 'none');
} 
```

# arrays - 将未嵌套的空值数组插入双精度列 postgresql

> ID：14713106
> 
> 赞同：1
> 
> 时间：2013-02-05T17:15:08.857
> 
> 标签：arrays, postgresql, casting, insert, null

假设我在 postgresql 表中有一个双精度列并尝试以下 INSERTS

情况1：

```
INSERT INTO schema.table (column_name) VALUES (null); 
```

案例二：

```
INSERT INTO schema.table (column_name) VALUES (unnest(array[1,null,null,4,5])); 
```

案例3：

```
INSERT INTO schema.table (column_name) VALUES (unnest(array[null,null,null,null,null])); 
```

案例 1 和 2 执行成功，但案例 3 返回以下错误：

> 错误：列“column_name”是双精度类型，但表达式是文本类型第 1 行：INSERT INTO schema.table (column_name) VALUES (unnest(array[nu... ^ 提示：您需要重写或转换表达式.

**我应该如何重写案例 3 以将未嵌套的空值数组重新转换为可以插入双精度（或任何数字）列中的东西？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:32:05.150

您需要将空值数组转换为 double precision[] 或 float8[]

```
INSERT INTO schema.table (column_name)
VALUES (unnest(
    array[null,null,null,null,null]::float8[]
)); 
```

或者演员表可以表示为

```
cast(array[null,null,null,null,null] as double precision[]) 
```

# google-chrome-extension - chrome 扩展的 Mimetype 处理（打包的应用程序）

> ID：14713109
> 
> 赞同：0
> 
> 时间：2013-02-05T17:15:17.327
> 
> 标签：google-chrome-extension

我想知道具有给定 mimetype 的文件是否可以由打包的应用程序处理。

我在清单文件中看到，nacl_modules 可用于将本机客户端模块与 mimetype 相关联。

我需要我的打包应用程序来处理具有特定 mimetype 的桌面文件。

由于打包的应用程序可以在不显示 Chrome 的情况下启动并运行，这似乎是可能的，但问题是如何！

感谢您的建议和意见。

盖伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:38:56.877

您可以使用此清单部分处理文件：http: [//developer.chrome.com/trunk/apps/manifest.html#file_handlers](http://developer.chrome.com/trunk/apps/manifest.html#file_handlers)

```
 "file_handlers": {
     "testhandler": {
       "title": "TestHandler",
       "types": ["*/*"]
      }
    },
   "permissions": ["fileSystem"], 
```

然后，所选文件将在 onLaunched 事件处理程序的 launchData 参数中传递。

请注意，在 ChromeOS 以外的平台上从文件管理器启动时，此功能尚不可用。在这些平台上，只有当您从命令行使用文件名作为参数（[http://developer.chrome.com/trunk/apps/first_app.html#open](http://developer.chrome.com/trunk/apps/first_app.html#open)）执行应用程序时，它才会现在起作用

# ruby-on-rails - Facebook 身份验证不适用于自定义回调路径

> ID：14713112
> 
> 赞同：3
> 
> 时间：2013-02-05T17:15:35.100
> 
> 标签：ruby-on-rails, devise, omniauth

我正在使用 devise / omniauth 针对 Facebook 验证我的 Rails 应用程序。我正在尝试将其更改为`callback_path`自定义的，但无论我将其设置为什么，`omniauth.auth`请求变量都会返回为零。例如，在这里我将 设置`callback_path`为如果我不设置它的确切值：

```
Devise.setup do |config |    
  require "omniauth-facebook"
  config.omniauth :facebook, 
    ENV['FACEBOOK_APP_ID'], 
    ENV['FACEBOOK_APP_SECRET'], 
    scope: "email",
    :setup => lambda { |env| 
       env['omniauth.strategy'].options[:callback_path] = "user/auth/facebook/callback"
    }
end 
```

如果我不设置，则身份验证有效，并且我在请求变量`:callback_path`中取回数据。`omniauth.auth`但是，我必须重写它，因为我需要支持将属性传回回调。

我查看了[Omniauth::Strategy 代码](https://github.com/intridea/omniauth/blob/master/lib/omniauth/strategy.rb)，看看可能出了什么问题，但我不太清楚出了什么问题。

我的问题：

*   为什么这不起作用？
*   有没有更好的方法来解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T20:00:18.047

该`state`参数不应该用于传递数据（实际上，请考虑一下，您正在信任第三方的数据！）。该参数仅用于缓解 CSRF 攻击。

因此，您应该做的是将您喜欢的任何参数传递给链接，如下所示：

```
link_to user_omniauth_authorize_path(:facebook, :some_key => 'some_data') 
```

Omniauth 会[自动将该数据添加到会话中](https://github.com/intridea/omniauth/blob/deea8f23642734217fc8a91cfe9a09a69595d638/lib/omniauth/strategy.rb#L200)，并在回调[中从会话中删除该数据](https://github.com/intridea/omniauth/blob/deea8f23642734217fc8a91cfe9a09a69595d638/lib/omniauth/strategy.rb#L225)，让您可以像这样访问它：

```
request.env['omniauth.params']['some_key'] 
```

# javascript - 用于开发 Azure Web 界面样式网站的库

> ID：14713118
> 
> 赞同：13
> 
> 时间：2013-02-05T17:15:46.347
> 
> 标签：javascript, html, css, azure

我公司的管理层非常喜欢用于管理 Windows Azure 站点的 Web 界面——我不怪他们。这是一款独特且易于使用的产品。我想知道是否有人知道允许您模仿 Azure Web 界面的外观和感觉的 API。我知道微软最近一直在关注开源，也许他们甚至发布了 Azure Web 界面的源代码？我已经谷歌了它，找不到任何东西。

为了清楚起见，我指的是模仿其页面布局的 CSS/HTML/Javascript 库 - 特别是左侧导航折叠成图标的方式，可选择显示所选项目的子菜单，以及它们具有上下文的方式页面底部的敏感栏。

**编辑**：ModernDesigner 指出了[Metro UI CSS](http://www.metroui.org.ua/)工具包，这是一个不错的开始，但是 Azure 拥有的漂亮的可折叠侧边栏呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-05T17:20:31.910

我认为您想要[Metro UI Pack](http://metroui.org.ua/)。用户界面概念（曾经）称为 Metro。每个人都知道它是 Metro，但当时它被称为 Modern UI，现在它被称为 Windows UI。但是如果你搜索 Metro UI，你会得到很多东西。希望这可以帮助。

**编辑**：为了响应您的编辑，可以通过创建魅力（metro ui）使用可折叠侧边栏，然后使用 jQuery 切换/动画方法。我不知道有一个预制的 API 可以让你这样做，因为它很广泛，每个用户都会有不同的想法并想要不同的自定义选项，所以没有办法真正满足特定的需求。但是，我确实找到[了这个](http://www.jqmetro.com/Pages/)，并且在底部的灰色条上，如果您单击右上角的省略号，它的内容与您可能想要的类似。

# jboss-arquillian - 如何将测试类添加到导入的 ear 文件并使用 arquillian 运行服务器端？

> ID：14713129
> 
> 赞同：5
> 
> 时间：2013-02-05T17:16:33.233
> 
> 标签：jboss-arquillian

我想使用 arquillian 创建集成测试。作为部署，我想使用也用于在生产中部署的耳朵。

所以这是我的部署：

```
@Deployment(testable = true)
public static Archive<?> createDeployment() {
    return ShrinkWrap
            .create(ZipImporter.class, "test.ear")
            .importFrom(new File("simple-webservice-ear-1.0.0-SNAPSHOT.ear"))
            .as(EnterpriseArchive.class);
} 
```

当我运行我的测试类时，我得到一个 java.lang.ClassNotFoundException 因为找不到测试类。我知道我可以在部署中设置 testable=false 但是持久性扩展不起作用：请参阅[arquillian persistence extension doesn't work](https://stackoverflow.com/questions/14694738/arquillian-persistence-extention-doesnt-work)。

我怎么解决这个问题？有没有办法将我的测试类添加到部署中？或者我应该以其他方式创建我的部署？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T20:23:14.843

您可以手动将测试类添加到耳朵内的战争中，例如

```
WebArchive war = ear.getAsType(WebArchive.class, "/mywarname.war");
war.addClass(MyTestClass.class); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-11T04:11:43.083

您可以使用 Cheesus 提供的方式。当我处理现有的 EAR 时，我更喜欢将运行测试的 WAR 与我放入特殊 JAR 以及其他测试 EJB 的实际测试分开。我的部署如下所示：

```
@Deployment
public static EnterpriseArchive createDeployment() {

    String path = System.getProperty(EAR_PATH);
    File f = new File(path);
    EnterpriseArchive ear = ShrinkWrap.createFromZipFile(EnterpriseArchive.class, f);

    final JavaArchive foobarEjb = ShrinkWrap.create(JavaArchive.class, "foobarEjb.jar");

    foobarEjb.addClasses(
                    MyTest1.class, 
                    MyTest2.class);
    ear.addAsModule(foobarEjb);

    final WebArchive war = ShrinkWrap.create(WebArchive.class, "test.war")
            .addAsWebInfResource("WEB-INF/web.xml")
            .addAsWebResource("index.xhtml");

    ear.addAsModule(Testable.archiveToTest(war));

    modifyApplicationXML(ear);
    modifyJBossDeploymentStructure(ear);

    return ear;
} 
```

注意修改`application.xml`和的方法`jboss-deployment-structure.xml`。我需要这些来正确地将 JAR 初始化为 EAR 中的 EjbModule。

示例如何更改`application.xml`：

```
private static void modifyApplicationXML(EnterpriseArchive ear) {
    Node node = ear.get("META-INF/application.xml");

    DescriptorImporter<ApplicationDescriptor> importer =  Descriptors.importAs(ApplicationDescriptor.class, "test");
    ApplicationDescriptor desc = importer.fromStream(node.getAsset().openStream());

    String xml = desc.exportAsString();

    // remove lib definition
    xml = xml.replaceAll("<library-directory>.*<\\/library-directory>", "");

    desc = (ApplicationDescriptor) importer.fromString(xml);
    // append foobar test ejbs
    desc.ejbModule("foobarEjb.jar");
    // append test war
    desc.webModule("test.war", "/test");
    // append lib definition
    desc.libraryDirectory("lib/");

    Asset asset = new StringAsset(desc.exportAsString());

    ear.delete(node.getPath());
    ear.setApplicationXML(asset);

} 
```

# android - 在 webView Android 中播放 DailyMotion 视频

> ID：14713137
> 
> 赞同：1
> 
> 时间：2013-02-05T17:16:55.093
> 
> 标签：android, webview

我尝试在 webview 中嵌入 dailyMotion 视频，我得到了预览，但是当我尝试播放它时，它不起作用。

我一直在网上寻找解决方案，但没有找到任何可行的示例。

这是代码

```
String data_html = "<!DOCTYPE HTML> <html>"
            + "<head>"
            + "<style>"
            + "body"
            + "{"
            + "margin:0;"
            + "padding:0;"
            + "height: 100%;"
            + "width: 100%;"
            + "background-color: #000;"
            + "color: #fff;"
            + "font-family: sans-serif;"
            + "overflow: hidden;"
            + "-webkit-tap-highlight-color: rgba(0, 0, 0, 0);" /* Disable ugly Android highlight */
            + "}"
            + "</style>"
            + "</head>"
            + "<body>"
            + "<iframe src=\"http://www.dailymotion.com/embed/video/xu4vre\" width=\"300\" height=\"160\" frameborder=\"0\"></iframe>"
            + "</body>" + "</html>";

    webView.loadData(data_html, "text/html", null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T08:34:25.833

在 Dailymotion 中获取视频的嵌入代码，并像这样为其分配 videoHtml；

```
 webView = (WebView) findViewById(R.id.webView1);
    videoHtml = "<iframe frameborder=\"0\" width=\"480\" height=\"270\" src=\"http://www.dailymotion.com/embed/video/xznb64\"></iframe><br /><a href=\"http://www.dailymotion.com/video/xznb64_leyla-ile-mecnun-dan-evlilik-programlarina-gonderme_news\" target=\"_blank\">Leyla İle Mecnun&#039;dan Evlilik Programlarına...</a> <i>ile  <a href=\"http://www.dailymotion.com/trthaber\" target=\"_blank\">trthaber</a></i>";
    webView.loadData(videoHtml, "text/html", "UTF-8");
    webView.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setPluginsEnabled(true); 
```

# filtering - 我可以在 Excel 数据透视表的两列中以不同的方式过滤相同的数据吗？

> ID：14713138
> 
> 赞同：1
> 
> 时间：2013-02-05T17:17:01.943
> 
> 标签：filtering, excel-2010, pivot-table

我创建了一个数据透视表，其中列出了一系列地点提交的案例数量。

考虑：

```
Location A        100
Location B         10
Location C       1000
TOTAL            1110 
```

我们的表格数据包括`location`和`status`。现在，客户希望将 CLOSED 案例的百分比作为第三列。

考虑：

```
Location A        100   50%   (based on 50 cases marked as "closed")
Location B         10   10%   (based on  1 case marked as "closed")
Location C       1000   20%   (based on 200 cases marked as "closed")
TOTAL            1110   23%   (based on 251 total cases marked as "closed") 
```

我可以在表格中添加第三列，但第二列我过滤了 CLOSED 案例，第二列仅列出了已关闭案例的总数，我的百分比对于所有第三列都是 100%。有没有办法让第 2 列选择一切，但将第 1 列设置为仅视为已结案？

在一个完美的世界里，我可以展示`location`,`count of ALL cases by location`和`count of CLOSED cases by location, expressed as a percentage of column #2`

这是可行的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:47:20.753

我认为最好的方法是在源数据中添加一列，为打开的商店分配 0，为关闭的商店分配 1。然后使用我的格言：

> 列表中 True 项的百分比是 0 和 1 的平均值，其中 True 由 1 表示，False 由 0 表示。

从[这篇文章](http://yoursumbuddy.com/percent-of-true-items-in-a-pivot-table-field/)中，您可以这样做：

![在此处输入图像描述](../Images/77a68d6435d0de5c95b18b4403122835.png)

# php - 如何将行插入数据库中的第一位

> ID：14713139
> 
> 赞同：-1
> 
> 时间：2013-02-05T17:17:04.097
> 
> 标签：php, mysql

我有疑问，我想使用 php 向 db (mysql) 插入新行，我需要将它添加到表中的第一位，但它是最后一个位置。

我需要像这样缩短它：

3

2

1

但它像短裤

1

2

3

你能帮我吗？

非常感谢，斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:19:18.273

SQL 数据库不保证顺序，除非您指定`ORDER BY`子句。

如果你有一个标识符列，那么你可以这样做：

```
SELECT ...
FROM your_table
ORDER BY id DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:20:13.767

假设您使用增量 ID 作为唯一键，您可以执行以下操作：

```
order by id desc 
```

如果没有，您可以在数据库中添加一个名为“created”的列，这将是您在创建行时设置为 NOW() 的日期时间。然后你会这样做：

```
order by created desc 
```

# javascript - 提交按钮上的 JQuery parent() 选择器选择容器而不是表单

> ID：14713146
> 
> 赞同：0
> 
> 时间：2013-02-05T17:17:29.083
> 
> 标签：javascript, jquery, html, forms

在我的页面上，有两种形式。我只想选择单击提交按钮的那个。

我认为以下应该可以解决问题：

```
$("#signup,#login").submit(function(){
    $(this).parent("form:first").css('background-color', 'red');
    return false;   
}); 
```

但是使用“form:first”选择器，什么都不会发生（可能是因为它正在选择容器 div）。如果没有“form:first”选择器，则会选择容器 div。

[http://jsfiddle.net/tenfold/gupGD/](http://jsfiddle.net/tenfold/gupGD/)

任何人都可以帮忙解决这里发生的事情吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:20:36.053

你可以使用`.closest()`方法

```
$("#signup,#login").submit(function(){
    $(this).closest("form").css('background-color', 'red');
    return false;   
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T17:20:56.930

你可以做

```
$(this).css('background-color', 'red'); 
```

提交事件绑定到表单本身。

此外，您不应该使用`return false`，而是将事件用作参数并调用`event.preventDefault()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T17:19:25.277

您必须使用`parents()`而不是`parent()`.

[从此处](http://api.jquery.com/parent/)的文档中提取：

> .parents() 和 .parent() 方法是相似的，只是后者只在 DOM 树上向上移动一层。

# git - OpenShift action_hooks 不可执行

> ID：14713157
> 
> 赞同：4
> 
> 时间：2013-02-05T17:17:48.857
> 
> 标签：git, openshift

当我在 OpenShift 中创建一个测试 DIY 应用程序时，`action_hooks`工作正常，但现在我创建了一个实际应用程序，当我推送更改时它们不会触发。

我做了一些调查，发现了问题——由于某种原因，动作挂钩是不可执行的。我检查了一下，它们在测试应用程序（它们工作的地方）中是可执行的——但现在它们不是。

`chmod`设置它们并没有帮助，因为每次我推送一些更改时，OpenShift 都会将新的 repo 文件夹复制到旧的文件夹上（而不是使用 git 来更新它），所以权限被重置。我研究了使用 git 的`post-receive`钩子使它们可执行，但是 OpenShift 上的 git 钩子受到保护，我无法编辑它们。

有没有办法解决这个问题？

PS。我不知道它是否有任何影响，但我的实际开发存储库是在 Google Code 上的，我使用[本教程](https://openshift.redhat.com/community/kb/kb-e1006-sync-new-git-repo-with-your-own-existing-git-repo)将 OpenShift 存储库设置为我本地存储库的上游。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T11:52:29.120

在 JBoss Tools 的 OpenShift 工具中，我们遇到了同样的问题。我们的实现是重置钩子文件的执行权限，导致钩子被忽略：[https](https://issues.jboss.org/browse/JBIDE-13217) ://issues.jboss.org/browse/JBIDE-13217 在我们的例子中，在这些文件上加上 +x 再次解决了这个问题。你似乎报告了一些回购被复制到你的，我真的不明白。这在你身上是怎么发生的？如果你能展示你的一些设置会有所帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T20:07:44.890

好的，我想通了。

当我创建应用程序时，我没有编辑动作挂钩，而是从第一个应用程序的存储库中复制了动作挂钩（我创建的应用程序是为了尝试 OpenShift DIY）。我认为发生的事情是 Git 检测到文件被替换而不是编辑并将它们视为新文件。OpenShift 以某种方式读取了这个，并没有给他们原始文件的执行权限。

为了解决这个问题，我按照[这个答案](https://stackoverflow.com/a/1113140/794380)从 OpenShift Template Builder 的提交中恢复了旧文件，现在它可以工作了！

# .net - 开销最小的 WCF

> ID：14713159
> 
> 赞同：1
> 
> 时间：2013-02-05T17:17:54.637
> 
> 标签：.net, performance, wcf, rest

我需要在工业 Intranet 上创建 WCF 服务（在 Windows 服务中自托管）。问题是，这个网络已经相当饱和，因此需要尽可能低的（网络）开销。

我想知道哪种类型的 WCF 服务最适合我的需求。鉴于“标准”WCF 调用在我的对象的 xml 序列化周围有一个肥皂信封，这绝对不是要走的路。

我自己的研究使我相信带有 json 序列化的 WCF REST 服务可能是最佳选择。任何人都可以确认这一点，或者就如何改进这一点给我指点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:35:54.853

这篇文章建议 net.tcp

[性能调优 WCF 服务，第 2 部分](http://msdn.microsoft.com/en-us/library/hh323713.aspx)

我同意 Scott 关于保持消息倒计时的观点。

这是很多要求。
数据真的变化那么快吗？
如果不考虑在 WCF 上缓存一些答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T17:24:28.747

XML SOAP 和 JSON，或者 HTTP 和 net.tcp 之间的差异不会对网络流量产生很大的影响。

SOAP 和 JASON 用于互操作性，使用 net.tcp 将减少处理能力的开销，但它不会真正改变网络开销。

您应该关注的更重要的事情是向 WCF 服务发出请求的**频率。**如果您可以批处理查询，这是一种非常简单的减少开销的方法。

（我真的很怀疑您声称网络无法处理额外负载，您怎么知道它无法处理？您是在猜测还是您对网络交换机上的负载进行了测量？）

# java - 此正则表达式需要嵌套括号

> ID：14713160
> 
> 赞同：0
> 
> 时间：2013-02-05T17:17:55.153
> 
> 标签：java, regex, shell

我有这样的数据集，有三列

> Col1、Col2、Col2
> 
> aaa，亚利桑那州 DL 美国，12
> 
> bbb，爱达荷州 DL 美国，35
> 
> ccc，爱达荷州 DL 美国，28
> 
> ddd，威斯康星州 DL 美国，11
> 
> eeee，威斯康星州 DL 美国，35

我想要做的是我想提取第二列的第一个单词（什么是州名）并将其放在第一列中。

> 预期输出：
> 
> 亚利桑那州，亚利桑那州兰丹美国，12
> 
> 爱达荷州，爱达荷州兰丹美国，35
> 
> 爱达荷州，爱达荷州兰丹美国，28
> 
> 威斯康星州，威斯康星州随机美国，11

我拥有的正则表达式是

> ^[^,]+,([^ ]+) [^\n]+$

使用我的 () 我可以提取州名，但如何获得输出？我想要的是嵌套括号，像这样

> ^[^,]+,(([^ ]+) [^\n]+)$

然后输出将是 \1,\2

我应该指出，我只想使用正则表达式替换。

编辑：

我已经通过使用正则表达式来获取列中的所有状态名称然后合并它来解决它，但是我想知道是否有任何高级正则表达式可以在这里使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:26:30.170

```
String s = "aaa,Arizona DL USTATES,12";

String st = s.split(",")[1].split(" ")[0];
s = s.replaceFirst("\\w+\\,", st + ","); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:33:50.083

带有嵌套括号的正则表达式可以正常工作；您只需要使用`String`'`replaceFirst`方法并注意 Java`$`用于组引用。另请注意，这些组是按照它们在正则表达式中出现的顺序枚举的，所以外部组是`$1`因为它首先开始：

```
String line = "aaa,Arizona DL USTATES,12";
String result = line.replaceFirst("^[^,]+,(([^ ]+) [^\n]+)$", "$2, $1");
// result is "Arizona, Arizona DL USTATES,12" 
```

# php - MongoDB PHP - 组查询

> ID：14713161
> 
> 赞同：0
> 
> 时间：2013-02-05T17:17:56.930
> 
> 标签：php, mongodb

我正在尝试按字段 publish_target 对计数进行分组

使用 MYSQL 我刚刚做了：

```
$postsByPlatform = $db->query("SELECT COUNT(*) as `value`, `publish_target` as `key` FROM `Post` GROUP BY `publish_target` ");
$postsByPlatform = $postsByPlatform->fetchAll(PDO::FETCH_OBJ);
$return['Post']['publish_target'] = $postsByPlatform; 
```

并得到这样的结果：

```
publish_target: [
{
value: "22",
key: "facebook"
},
{
value: "33",
key: "googleplus"
},
{
value: "44",
key: "instagram"
},
{
value: "55",
key: "other"
},
{
value: "66",
key: "twitter"
}
], 
```

我们现在正在转换为 Mongo。

我已经在 PHP.net 上尝试了这个例子，适应了这个：

```
 // use all fields
        $keys = array('publish_target');

// set intial values
        $initial = array("count" => 0);

// JavaScript function to perform
        $reduce = "function (obj, prev) { prev.count++; }";

// only use documents where the "a" field is greater than 1

        $g = $collection->group($keys, $initial, $reduce);

        var_dump($g); 
```

但这只是返回

```
array(4) {
  'retval' =>
  array(1) {
    [0] =>
    array(1) {
      'count' =>
      double(100)
    }
  }
  'count' =>
  double(100)
  'keys' =>
  int(1)
  'ok' =>
  double(1)
} 
```

这对我来说毫无意义。

我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:31:06.830

我不确定这是否是问题，但与我自己的代码比较这一行

```
$keys = array('publish_target'); 
```

应该是这样的

```
$keys = array('publish_target' => true); 
```

# javascript - 如何使用淡入淡出循环暂停和恢复？

> ID：14713164
> 
> 赞同：0
> 
> 时间：2013-02-05T17:18:04.283
> 
> 标签：javascript, jquery, loops, fade

我有一个显示和隐藏 div 淡入淡出循环，我正在使用它，就像一个带有提示的简短交互式教程。我可以让div按顺序循环；但是，我想在每个暂停循环的提示内添加一个暂停按钮，并能够恢复。如何将该功能添加到我的脚本中？

这是我的js：

```
$(document).ready(function(){
fadeLoop()
function fadeLoop() {

    var counter = 0,
        divs = $('.fader').css('visibility','visible').hide(),
        dur = 100;

    function showDiv() {
        $("div.fader").fadeOut(dur) // hide all divs
            .filter(function(index) {
                return index == counter % divs.length;
            }) // figure out correct div to show
            .delay(dur) // delay until fadeout is finished
            .fadeIn(dur); // and show it
        counter++;
    }; // function to loop through divs and show correct div
    showDiv(); // show first div    
    return setInterval(function() {
        showDiv(); // show next div
    }, 4 * 1000); // do this every 4 seconds    
};

$(function() {
    var interval;

    $("#start").click(function() {
        if (interval == undefined){
            interval = fadeLoop();
            $(this).val("Stop");
        }
        else{
            clearInterval(interval);
            $(this).val("Start");
            interval = undefined;
        }
    });
});
}); 
```

这是我的小提琴：[更新的小提琴](http://jsfiddle.net/NpNXr/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:44:53.180

我已经通过使用全局变量`window.i`作为计数器来解决

```
function fadeLoop() {

    var divs = $('.fader').hide(),
        dur = 200;

    function showDiv() {
        divs.fadeOut(dur) // hide all divs
            .filter(function(index) {
                return index == window.i % divs.length;
            }) // figure out correct div to show
            .delay(dur) // delay until fadeout is finished
            .fadeIn(dur); // and show it
        window.i++;
    }; // function to loop through divs and show correct div
    showDiv(); // show first div    
    return setInterval(function() {
        showDiv(); // show next div
    }, 1 * 1000); // do this every 5 seconds    
};

$(function() {
    var interval;
    window.i = 0;

    $("#start").click(function() {
        if (interval == undefined){
            interval = fadeLoop();
            $(this).val("Stop");
        }
        else{
            clearInterval(interval);
            $(this).val("Start");
            interval = undefined;
        }
    });
}); 
```

# php - 在变量中包含文件

> ID：14713165
> 
> 赞同：1
> 
> 时间：2013-02-05T17:18:05.270
> 
> 标签：php, variables, include

谢谢大家的帮助 ; 我在这个论坛上找到了很多对我的问题的回答，但仍然坚持这个。让我解释一下：我有名为“participant_pledge.php”、“parents_pledge.php”的文件……。仅包含文本。原因是我网站中的许多文件都需要此文本；所以我只是在需要的地方使用“include”。我的问题是我还需要将这些文件包含在某些“电子邮件功能”的内容中。那是我找不到包含这些文件的解决方案的地方，因为不可能在变量中使用函数。这个想法是能够做到以下几点：

```
function update ($user_id, $update_camper_data) {
...
$message='
 ...
<tr>
<td>
Participant\'s Name*:
</td>
<td>
'.$update_camper_data['participant_first_name'].'  '.$update_camper_data['participant_middle_initial'].'  '.$update_camper_data['participant_last_name'].'
</td>

include ‘participant_pledge.php;  //which does not work inside a variable

...';
mail($to, $subject, $message, $headers);
} 
```

我考虑过常量变量，但无法使其工作（但也许我用错了方式）......无论如何，提前感谢您在这个问题上的时间和帮助。

麦克风。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:21:23.313

实际上，可以通过某种方式使用“变量中的函数”。请参阅：[http](http://www.php.net/manual/en/functions.anonymous.php) ://www.php.net/manual/en/functions.anonymous.php 。您所描述的模式基本上是“查看助手”的模式。也许看看一些框架以及它们如何实现这一点。例如： http: [//framework.zend.com/manual/1.12/en/zend.view.helpers.html](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:54:01.923

也许您应该考虑将文本存储在数据库中。这样，您需要做的就是查询数据库，而不是包含“纯文本”PHP 文件。

# asp.net - UpdatePanel 中的按钮网格视图

> ID：14713170
> 
> 赞同：0
> 
> 时间：2013-02-05T17:18:19.913
> 
> 标签：asp.net, gridview, updatepanel

我在 asp.net 中使用 gridview 和 UpdatePanel。

```
<asp:UpdatePanel ID="upSubject" runat="server">
<ContentTemplate>
<div class="c_box" style="height: auto; text-align: center; margin-top: 10px; width:565px; padding-right:140px;">
<asp:GridView ID="gvSubject" runat="server" AutoGenerateColumns="False" 
    SkinID="gvSubject" ShowHeader="true" ShowHeaderWhenEmpty="true" 
    onrowcommand="gvSubject_RowCommand">
<Columns>
<asp:BoundField DataField="lblCounter" HeaderText="Number" ReadOnly="True" HeaderStyle-Font-Bold="false" ItemStyle-Width="60px"></asp:BoundField>
<asp:BoundField DataField="lblSubject" HeaderText="Tiltle" ReadOnly="True" HeaderStyle-Font-Bold="false" ItemStyle-Width="300px" ItemStyle-HorizontalAlign="Right"></asp:BoundField>
<asp:TemplateField HeaderText="Delete" ItemStyle-HorizontalAlign="Center" HeaderStyle-Font-Bold="false" ItemStyle-Width="60px">
<ItemTemplate>
<asp:ImageButton ID="dltSubject" runat="server" CommandName="remove" CommandArgument="lblCounter" ValidationGroup="Subject" OnClientClick="return confirm('Delete?')" ImageUrl="~/Style/Pic/pic_delete_small.png" />
</ItemTemplate>
</asp:TemplateField>
</Columns>
<HeaderStyle BackColor="#000000" />
<EmptyDataRowStyle BackColor="#00ff00" />
<EmptyDataTemplate>
Not item...
</EmptyDataTemplate>
</asp:GridView>
</div>
</ContentTemplate>
<Triggers>
<asp:asyncpostbacktrigger controlid="gvSubject" eventname="RowCommand" /> 
</Triggers>
</asp:UpdatePanel> 
```

或者

```
<asp:asyncpostbacktrigger controlid="dltSubject" eventname="Click" /> 
```

.

```
protected void gvSubject_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "remove")
        {
            DataTable _dt = (DataTable)Session["Subject"];
            _dt.Rows[int.Parse(e.CommandArgument.ToString())].Delete();

            gvSubject.DataSource = _dt;
            gvSubject.DataBind();

            Session["Subject"] = _dt;
        }
    } 
```

但不能工作更新面板。请帮助我在 UpdatePanel 中工作按钮 gridview。

我想在 gridview 和 UpdatePanel 中工作 ImageButton。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:23:25.433

您不必为 RowCommand 使用触发器。如果您不想使用除此按钮单击之外的其他命令，也请删除 rowcommand。

请指定 OnCommand=dtlSubject_Click

我在这里使用“数字”作为命令参数，认为这是删除记录所需的唯一 ID。

您需要在命令参数中指定要删除的唯一列。

```
 <asp:ImageButton ID="dltSubject" runat="server"                                                                  
CommandArgument='<%#DataBinder.Eval(Container.DataItem, "Number")%>'
           ValidationGroup="Subject" OnCommand="dtlSubject_Click"
         OnClientClick="return confirm('Delete?')" ImageUrl="~/Style/Pic/pic_delete_small.png" /> 
```

在服务器端写下以下代码：

```
 protected void dtlSubject_Click(object sender, CommandEventArgs e)
{
              string uniqueid= e.CommandArgument.ToString();

            //call your procedure here to delete your item.
} 
```

# php - Timthumb 仅在远程图像上返回 404

> ID：14713174
> 
> 赞同：2
> 
> 时间：2013-02-05T17:18:24.850
> 
> 标签：php, timthumb

我正在使用 timthumb 在 Wordpress 主题中呈现图像。它在显示来自同一服务器的图像时工作正常，但是一旦我尝试加载外部图像（在本例中为 youtube 缩略图），它就会返回 404，就好像找不到脚本本身一样。该脚本在那里，如果我加载本地图像，它的行为符合预期。我没有设置允许外部图片，特别是来自 img.youtube.com 的图片

奇怪的是，我的本地主机上的主题与预期的完全相同，并且外部图像显示良好，所以我猜测主机上出现了问题。关于这可能是什么的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T10:59:44.873

HostGator 不允许绝对路径与 TimThumb 一起使用（即使它托管在您自己的帐户中），如本文所述：http: [//support.hostgator.com/articles/specialized-help/technical/timthumb-basics](http://support.hostgator.com/articles/specialized-help/technical/timthumb-basics)。

要解决绝对路径问题，您需要破解您的主题功能以从图像路径中剥离您的域：

```
$url = "/path/to/timthumb.php?src=" . str_replace(site_url(), '', $path_to_image); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:30:02.243

您的主机是否允许从外部源加载图像。意味着在服务器之外？这可能是个问题。

# jsp - 如何使单个 UrlBasedViewResolver 引用“tiles.xml”和视图的另一个 xml？

> ID：14713175
> 
> 赞同：1
> 
> 时间：2013-02-05T17:18:31.880
> 
> 标签：jsp, jakarta-ee, spring-mvc, tiles2

这听起来像是一个奇怪的问题。这是我的情况：我正在使用 Spring MVC 3.x 编写一个 Web 应用程序我正在使用 UrlBasedViewResolver 和 Tiles 组合来解析视图。

我的 webContext.xml

```
 <bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView" />
</bean>

<bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <property name="definitions">
        <list>
            <value>/WEB-INF/tiles.xml</value>
        </list>
    </property>
</bean> 
```

我的tiles.xml

```
 <definition name="main" template="/WEB-INF/views/tiles/template.jsp">
    <put-attribute name="resources" value="/WEB-INF/views/tiles/resources.jsp" />
    <put-attribute name="header" value="/WEB-INF/views/tiles/header.jsp"/>
    <put-attribute name="title" value="" />
    <put-attribute name="content" value="" />
</definition> 

<definition name="index" extends="main">
    <put-attribute name="windowTitle" value="Some Name"/>       
    <put-attribute name="content" value="/WEB-INF/views/index.jsp"/>        
</definition>

<definition name="dartWorkQueue" extends="main">
    <put-attribute name="windowTitle" value="Some Name"/>       
    <put-attribute name="content" value="/WEB-INF/views/XXXWorkQueue.jsp"/>     
</definition>
<definition>
     ......     
</definition>

  <definition>      
     ......
</definition> 
```

现在，我想要的是基于来自 JSP 的 URL 调用控制器的场景之一，处理程序方法应该指向一些将呈现输出而不是 JSP 的 java bean。

所以基本上，我的问题是，是否可以要求 UrlBasedViewResolver 查看两个不同的 xml 以获取视图分辨率。

**例如：如果处理程序返回一个视图名称，它应该首先查看tiles.xml，如果在那里没有找到任何映射，那么它应该查看一些XXX.xml**

或者我应该完全采取不同的方法。

# web-services - 带有集合的类的 RESTful url？

> ID：14713178
> 
> 赞同：1
> 
> 时间：2013-02-05T17:18:46.037
> 
> 标签：web-services, rest, web-applications

我正在实现一个 web 应用程序并希望遵守 RESTfull 设计标准，我的问题是。

给定一个带有集合的类。

Person { id :: 整数名称 :: 字符串朋友 :: Persons 集合 }

实现 Person 类接口的“最”正确方法是什么：

1.

```
example.com/REST/persons -> [... {id: '2', name: 'Pete', friends: [1,4,6]} ... ]
example.com/REST/persons/2 -> {id: '2', name: 'Pete', friends: [1,4,6]} 
```

在persons 类中使用一些搜索功能可以在哪里查找朋友？

**或者**

2.

```
example.com/REST/persons -> [... {id: '2', name: 'Pete'} ... ]
example.com/REST/persons/2 -> {id: '2', name: 'Pete'}
example.com/REST/persons/2/friends -> [{id: '1', name: 'Joann'}, 
                                       {id: '4', name: 'Jim'},
                                       {id: '6', name: 'Charlie'}] 
```

集合中的元素在 person 实例中作为字段查找。

我已经看到这两件事都实现了，但我想遵守标准。

第三种方式刚刚涌向我。

```
example.com/REST/persons/2 -> {id     : '2', 
                               name   : 'Pete', 
                               friends: [example.com/REST/person/1,
                                         example.com/REST/person/4,
                                         example.com/REST/person/6]} 
```

因此使接口事件更加 RESTfull——客户端现在可以遍历整个接口，而无需了解任何关于实现的信息。

我希望那里有一些输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:40:21.393

拥有`example.com/REST/persons/{person-id}/friends/{friends-id}`是正确的方法。REST 本身不强制执行任何 URL 组合规则，但这是大多数人所做的。

基本上你有一个资源`Person`和一个`Friend`具有多对多关系的子资源。

# mongodb - 如何发现 mongo 数据库的结构

> ID：14713179
> 
> 赞同：70
> 
> 时间：2013-02-05T17:18:45.940
> 
> 标签：mongodb

我有一个我没有创建或架构的 Mongo 数据库，有没有一种很好的方法来自省数据库或打印出结构是什么来开始处理正在存储的数据类型，数据类型如何嵌套， ETC？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-05T17:27:55.043

只需通过在 mongo shell 中运行以下命令来查询数据库：

```
use mydb //this switches to the database you want to query
show collections //this command will list all collections in the database
db.collectionName.find().pretty() //this will show all documents in the database in a readable format; do the same for each collection in the database 
```

然后，您应该能够检查文档结构。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-05T17:52:36.133

实际上有一个工具可以帮助你，叫做 Variety：

[http://blog.mongodb.org/post/21923016898/meet-variety-a-schema-analyzer-for-mongodb](http://blog.mongodb.org/post/21923016898/meet-variety-a-schema-analyzer-for-mongodb)

你可以在这里查看它的 Github 存储库：[https ://github.com/variety/variety](https://github.com/variety/variety)

我可能应该警告你：

*   它使用 MR 来完成其任务
*   它使用某些其他查询，这些查询可能会使生产设置在性能方面几乎停止。

因此，我建议您在开发服务器或副本的隐藏节点或其他东西上运行它。

根据文档的大小和深度，可能需要很长时间才能通过此了解数据库的粗略结构，但最终会给出一个。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-01-23T10:55:39.700

这将打印名称及其类型

```
var schematodo = db.collection_name.findOne()
for (var key in schematodo) { print (key, typeof key) ; } 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-06-20T12:14:58.000

我建议限制结果集，而不是发出不受限制的 find 命令。

```
use mydb
db.collectionName.find().limit(10)
var z = db.collectionName.find().limit(10)
Object.keys(z[0])
Object.keys(z[1]) 
```

这将帮助您了解您的数据库结构或缺乏它。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-09-24T19:25:32.890

这是我和我的朋友一起创建的开源工具 - [https://pypi.python.org/pypi/mongoschema/](https://pypi.python.org/pypi/mongoschema/)

它是一个使用非常简单的 Python 库。你可以试试（甚至贡献）。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-07-19T11:02:16.513

一种选择是使用[Mongoeye](https://github.com/mongoeye/mongoeye)。它是类似于 Variety 的开源工具。

不同之处在于 Mongoeye 是一个独立程序（不需要 Mongo Shell）并且具有更多功能（直方图、最常见值等）。

[https://github.com/mongoeye/mongoeye](https://github.com/mongoeye/mongoeye)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-08-04T10:33:13.890

几天前，我发现 GUI 客户端[MongoDB Compass](https://docs.mongodb.com/compass/master/)具有一些不错的可视化效果。请参阅[产品概述](https://www.mongodb.com/products/compass)。它直接来自 mongodb 人员并根据他们的文档：

> MongoDB Compass 旨在让用户轻松分析和了解 MongoDB 中数据集合的内容...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-08T14:52:11.107

您可以使用 MongoDB 的工具`mongodump`。运行它时，`dump`会在执行 mongodump 的目录中创建一个文件夹。在该文件夹中，有多个文件夹对应于MongDB中的数据库，有对应于集合的子文件夹，对应于文档的文件。

这种方法是我所知道的最好的方法，因为您还可以找出**空集合**的模式。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-15T07:10:43.207

您可能已经询问过验证模式。以下是如何获得它的答案： [如何检索 MongoDb 集合验证器规则？](https://stackoverflow.com/questions/45285852/how-to-retrieve-mongodb-collection-validator-rules)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-04T11:58:08.033

## 使用[Mongo 指南针](https://www.mongodb.com/try/download/compass)

它会按照此处的说明执行样本，它会随机抽取 1000 个文档样本来获取架构 - 它可能会遗漏一些东西，但如果你的数据库有几个 GB，它是唯一合理的选择。

## 可视化

[![Mongo Compass 模式选项卡](../Images/7119e6141e214aefa82fc5d1f9912c17.png)](https://i.stack.imgur.com/efRc7.png)

## 然后可以将架构导出为 JSON

[![在此处输入图像描述](../Images/657b8fb2a746bb78f08586dd7d0017eb.png)](https://i.stack.imgur.com/P0FN7.png)

[文档](https://docs.mongodb.com/compass/master/schema/)

# jquery - 如何为 jQuery UI 小部件建模

> ID：14713180
> 
> 赞同：0
> 
> 时间：2013-02-05T17:18:48.853
> 
> 标签：jquery, jquery-ui, uml

我正在尝试使用 UML 对 jQuery UI 小部件进行建模，它还包括序列图和类图，知道如何做到这一点吗？或至少任何现有的参考资料。

> **Edit1**：（*感谢@Ben Barden 的提示*）
> 
> 我正在尝试修改 jQuery UI Widgets 以添加 OOP 功能，实现工作几乎完成，但我有一个额外的要求：使用 UML 和 OpenUp 记录项目，所以我需要与序列图和类相关的所有内容“原始” jQuery UI 小部件的图表，或者至少知道如何在此类项目中制作这些图表。

# python - Python不会定义函数

> ID：14713183
> 
> 赞同：0
> 
> 时间：2013-02-05T17:19:02.100
> 
> 标签：python

我正在重新使用 python，但我遇到了一个非常基本的问题....

我的来源有以下...

```
def calrounds(rounds):
    print rounds 
```

当我通过外壳运行它并尝试调用 calrounds(3) 我得到..

```
Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    calrounds(3)
NameError: name 'calrounds' is not defined 
```

自从我使用python以来已经有一段时间了，请幽默。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:24:03.350

你是你`import`的来源吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:32:48.877

The first thing to do is to look at how you're calling the function. Assuming it's in `myModule.py`, did you `import myModule` or did you `from myModule import calrounds`? If you used the first one, you need to call it as `myModule.calrounds()`.

Next thing I would do is to make sure that you're restarting your interpreter. If you have `import`ed a module, `importing` it again **will not** reload the source, but use what is already in memory.

The next posibility is that you're importing a file other than the one you think you are. You might be in a different directory or loading something from the standard library. After you `import myModule` you should `print myModule.__file__` and see if it is the file you think you're working on. After 20 years of programming, I still find myself doing this about once a year and it's incredibly frustrating.

Finally, there's the chance that Python is just acting up. Next to your `myModule.py` there will be a `myModule.pyc` - this is where Python puts the compiled code so it can load modules faster. Normally it's smart enough to tell if your source has been modified but, occassionally, it fails. Delete your `.pyc` file and restart the interpreter.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T17:20:18.183

它说你的程序的第一行是`calrounds`用一个参数调用的`3`。将其移至函数定义下方。定义需要在调用函数之前。如果您使用的是 python 3.0+，则 print 语句需要括号。

```
>>> def calrounds(rounds):
    print(rounds)

>>> calrounds(3)
3 
```

# java - 无法从意图设置 Gmail“主题”和“文本”字段

> ID：14713189
> 
> 赞同：0
> 
> 时间：2013-02-05T17:19:14.077
> 
> 标签：java, android, android-intent

我正在调用一个意图，即从字符串数组中设置“收件人”字段的 GMail 模板没有问题，但我无法让它设置“主题”和“文本”字段。

希望有人能看到我哪里出错了

这是我的代码：

```
package com.example.flybase2;

import android.app.Activity;
import android.app.Dialog;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class ContactsEmail extends Activity implements OnClickListener{

    String emailPassed;
    String emailAdd;
    String emailSub;
    String emailMess;
    EditText setEmailAddress;
    EditText setEmailSubject;
    EditText setEmailMessage;
    Button btnSendEmail;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    setContentView(R.layout.emaillayout);

    Bundle extras = getIntent().getExtras(); 
    if (extras != null) {
        emailPassed = extras.getString("passedEmailAdd"); 
    }

    setEmailAddress = (EditText) findViewById (R.id.inputEmailAddress);
    setEmailAddress.setText(emailPassed);
    setEmailSubject = (EditText) findViewById (R.id.inputEmailSubject);
    setEmailMessage = (EditText) findViewById (R.id.inputEmailMessage);

    emailAdd = setEmailAddress.getText().toString();
    emailSub = setEmailSubject.getText().toString();
    emailMess = setEmailMessage.getText().toString();

    btnSendEmail = (Button)findViewById(R.id.btnSendEmail);

    btnSendEmail.setOnClickListener(this);
    }

    @Override
    public void onClick(View sendEmailClick) {
        Intent sendEmailIntent = new Intent(Intent.ACTION_SEND); 
        sendEmailIntent.setType("plain/text");
        sendEmailIntent.putExtra(Intent.EXTRA_EMAIL,new String[] {emailAdd});  
        sendEmailIntent.putExtra(Intent.EXTRA_SUBJECT, emailSub); 
        sendEmailIntent.putExtra(Intent.EXTRA_TEXT, emailMess); 
        startActivity(Intent.createChooser(sendEmailIntent, "Send mail..."));   
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:50:56.993

试试这个。

实际上，当活动创建时，您会获得这些编辑文本的值。那时这些值都是空的。所以你需要在`onclick`方法中编写这些。

当您单击按钮时，您将获得当前的编辑文本值。

我希望这能解决你的问题。

```
@Override
public void onClick(View sendEmailClick) {
    emailAdd = setEmailAddress.getText().toString();
    emailSub = setEmailSubject.getText().toString();
    emailMess = setEmailMessage.getText().toString();
    Intent sendEmailIntent = new Intent(Intent.ACTION_SEND); 
    sendEmailIntent.setType("plain/text");
    sendEmailIntent.putExtra(Intent.EXTRA_EMAIL,new String[] {emailAdd});  
    sendEmailIntent.putExtra(Intent.EXTRA_SUBJECT, emailSub); 
    sendEmailIntent.putExtra(Intent.EXTRA_TEXT, emailMess); 
    startActivity(Intent.createChooser(sendEmailIntent, "Send mail..."));
} 
```

`onCreate()`并从方法中删除这三行。

```
emailAdd = setEmailAddress.getText().toString();
emailSub = setEmailSubject.getText().toString();
emailMess = setEmailMessage.getText().toString(); 
```

# html - css @-moz-keyframes 动画在 Firefox 18.0.1 上不起作用

> ID：14713191
> 
> 赞同：4
> 
> 时间：2013-02-05T17:19:16.543
> 
> 标签：html, firefox, css, webkit-transform, css-animations

Firefox 18.0.1 上的 css @-moz-keyframes 动画不起作用，

我已经在以前的版本上检查过这个动画（忘记了以前的版本号），它正在工作，

这是动画

```
<html>
    <head>
        <style type="text/css">

            @-webkit-keyframes animation {
                0% { -webkit-transform:translate(100px,100px) scale(1); }
                50% { -webkit-transform:translate(00px,00px)  scale(2); }
                100% { -webkit-transform:translate(100px,100px)  scale(1); }
            }

            @-moz-keyframes animation_m {
                0% { -moz-transform:translate(100px,100px)  scale(1); }
                50% { -moz-transform: translate(00px,00px) scale(2); }
                100% { -moz-transform:translate(100px,100px)  scale(1); }
            }

            .cc1{
                -webkit-animation-name: "animation";
                -webkit-animation-duration: 2s;
                -webkit-animation-timing-function: linear;

                -moz-animation-name: "animation_m";
                -moz-animation-duration: 2s;
                -moz-animation-timing-function: linear;
            }

            #id1,#ci1{
                position:absolute;
                top:0px;
                left:0px;
            }

        </style>
        <script type="text/javascript">
            window.onload=function(){
                var e=document.getElementById("ci1");
                var ctx=e.getContext("2d");
                ctx.fillStyle="#f00";
                ctx.fillRect(0,0,90,90);
            }
        </script>
    <body>
        <div id="id1" class="cc1">
            <canvas width="100" height="100" id="ci1" ></canvas>
        </div>
    </body>
</html> 
```

是 Firefox 的错误吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T17:24:28.413

Firefox 18（以及 Opera、IE10 以及不久的将来的许多其他版本）需要[没有供应商前缀](http://paulrouget.com/e/unprefixing-in-firefox-16/)的 W3C 属性。确保添加以下块：

```
@keyframes animation_m {
    0% { transform:translate(100px,100px)  scale(1); }
    50% { transform: translate(00px,00px) scale(2); }
    100% { transform:translate(100px,100px)  scale(1); }
}

.cc1 {
    animation-name: animation_m;
    animation-duration: 2s;
    timing-function: linear;
} 
```

请注意，`-moz-transform`属性也更改为`transform`。

您应该**始终**为所有带前缀的 CSS 属性包含无供应商前缀版本。我还建议为您的 CSS 样式和动画名称提供更具描述性的名称。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-17T09:14:05.597

问题出在这一行

```
-moz-animation-name: "animation_m"; 
```

在**谷歌浏览**器中，如果你用双引号（“”）写你的动画名称，它会作为标识符，但在**Firefox**中它被认为是一个字符串，而不是标识符，所以提到不带双引号的动画名称......

```
 -moz-animation-name: animation_m; 
```

# php - PHP Exception 无论如何都会在 try & catch 块中显示

> ID：14713192
> 
> 赞同：2
> 
> 时间：2013-02-05T17:19:17.210
> 
> 标签：php, exception-handling, error-handling

我有一个非常奇怪的情况：下面显示的代码在 PHP 中应该没有错误。

```
try {
    throw new Exception('foo');
} catch(Exception $e) {
    // here could be some custom functions to handle errors
    die();
} 
```

在我的电脑上打印

```
( ! ) SCREAM: Error suppression ignored for
( ! ) Exception: foo. in D:\wamp\www\index.php on line 4 
```

为什么？哪个 php ini 选项可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T17:33:11.990

Scream 扩展是针对开发人员的扩展，因此即使通常会被抑制，他们也可以从代码中看到错误消息。

xDebug 是另一个开发者扩展，也包含相同的功能。

如果您有这些扩展中的任何一个，则可以在您的 PHP 配置中禁用 Scream 功能。

但是这些扩展都不应该在生产系统上使用——它们只打算在开发人员的系统上使用。如果它在您的实时站点上，则应完全禁用该扩展程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:25:21.883

[http://www.php.net/manual/en/scream.examples-simple.php](http://www.php.net/manual/en/scream.examples-simple.php)

通常，scream 用于覆盖静默运算符 (@)，但如果它也是为了 try catch 执行此操作...您可以尝试使用内联 ini_set 将其关闭，看看是否可以修复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T17:41:25.520

谢谢大家的回答。是的，问题出在 xdebug 上，更准确地说是：`xdebug.show_exception_trace`option.，它变成了`on`.

正如我们从[xdebug 文档](http://xdebug.org/docs/all_settings)中读到的：

> xdebug.show_exception_trace
> 类型：整数，默认值：0
> 当此设置设置为 1 时，无论何时引发异常，Xdebug 都会显示堆栈跟踪——即使该异常实际上已被捕获。

# sql - SQL - 如何仅返回具有多次出现的值的行？

> ID：14713195
> 
> 赞同：2
> 
> 时间：2013-02-05T17:19:27.107
> 
> 标签：sql

我对 SQL Server 还很陌生……但我有一个问题。我编写了以下查询，它可以很好地显示 2012 年患者的所有访问（遭遇）和实验室结果。

```
SELECT pat.patient_id, pat.last_name, Pat.first_name, pat.ethnic_group,
pat.race, pl.icdcode, enc.encounter_date, lab.test_performed, lab.result_value,
lab.result_units
FROM dbo.dem_patient pat
RIGHT JOIN dbo.med_problemlist as pl
ON pat.patient_id = pl.patient_id
JOIN dbo.enc_encounter as enc
ON pat.patient_id = enc.patient_id
JOIN dbo.med_labresult as lab
ON pat.patient_id = lab.patient_id
WHERE pl.icdcode like '401.9%' AND
enc.encounter_date >= '01/01/2012' AND enc.encounter_date <= '12/31/2012' AND
pat.last_name != 'test' AND (lab.test_performed = 'HgbA1c' OR 
lab.test_performed = 'Hemoglobin A1c')
GROUP BY pat.patient_id, pat.last_name, Pat.first_name, pat.ethnic_group,
pat.race, pl.icdcode, enc.encounter_date, lab.test_performed, lab.result_value,
lab.result_units
ORDER BY race, ethnic_group 
```

上述查询的结果如下所示：

```
patient_id  last_name  first_name  ethnic_group  race  icdcode  encounter_date lab_result
0           smith      john        HIS           WHI   401.90   01/01/2012     9.1
0           smith      john        HIS           WHI   401.90   10/12/2012     9.2
0           smith      john        HIS           WHI   401.90   11/15/2012     9.7
5           doe        jane        NSP           BLK   401.90   01/20/2012     11
6           davids     david       NSP           BLK   401.90   04/25/2012     5.9
6           davids     david       NSP           BLK   401.90   05/04/2012     6.4 
```

但是，我现在只需要返回那些在 2012 年 1 月 1 日至 2012 年 12 月 31 日期间访问（遭遇）超过一次的患者。它看起来像这样（从上面的结果）

```
patient_id  last_name  first_name  ethnic_group  race  icdcode  encounter_date lab_result
0           smith      john        HIS           WHI   401.90   01/01/2012     9.1
6           davids     david       NSP           BLK   401.90   04/25/2012     5.9 
```

谁能帮我这个？

更新：因此，使用下面的建议，我已将 HAVING COUNT(*) > 1 添加到查询中。但是，这给了我一些我不太明白的结果。

没有 HAVING COUNT(*) > 1 语句的查询结果：

```
1001131     BLA 401.9   48:48.3 Hemoglobin A1c  9.9
1001131     BLA 401.9   00:00.0 Hemoglobin A1c  9.9
1001131     BLA 401.9   44:44.3 Hemoglobin A1c  9.9
1001648     BLA 401.9   50:15.6 Hemoglobin A1c  6.5
1001648     BLA 401.9   16:15.1 Hemoglobin A1c  6.5
1001648     BLA 401.9   28:04.5 Hemoglobin A1c  6.5
1001648     BLA 401.9   17:00.2 Hemoglobin A1c  6.5
1002648     BLA 401.9   17:47.8 Hemoglobin A1c  6.1
1002648     BLA 401.9   52:38.0 Hemoglobin A1c  6.1
1002648     BLA 401.9   43:47.3 Hemoglobin A1c  6.1
1002648     BLA 401.9   02:55.9 Hemoglobin A1c  6.1
1002715     BLA 401.9   37:52.4 Hemoglobin A1c  13.1
1002715     BLA 401.9   44:41.0 Hemoglobin A1c  12.6
1002715     BLA 401.9   44:41.0 Hemoglobin A1c  13.1
1002715     BLA 401.9   37:52.4 Hemoglobin A1c  10.7
1002715     BLA 401.9   37:52.4 Hemoglobin A1c  12.6
1002715     BLA 401.9   00:57.9 Hemoglobin A1c  10.7
1002715     BLA 401.9   00:57.9 Hemoglobin A1c  12.6
1002715     BLA 401.9   00:57.9 Hemoglobin A1c  13.1
1002715     BLA 401.9   38:17.6 Hemoglobin A1c  10.7
1002715     BLA 401.9   38:17.6 Hemoglobin A1c  12.6
1002715     BLA 401.9   38:17.6 Hemoglobin A1c  13.1
1002715     BLA 401.9   44:41.0 Hemoglobin A1c  10.7
1002893     BLA 401.9   33:45.4 Hemoglobin A1c  5.9
1002893     BLA 401.9   22:58.5 Hemoglobin A1c  5.9
1002893     BLA 401.9   00:00.0 Hemoglobin A1c  5.9
1002893     BLA 401.9   55:11.3 Hemoglobin A1c  5.9
1003195     BLA 401.9   34:08.7 Hemoglobin A1c  6.4
1003195     BLA 401.9   50:03.6 Hemoglobin A1c  6.4
1003195     BLA 401.9   08:36.8 Hemoglobin A1c  6.4
1003195     BLA 401.9   33:56.6 Hemoglobin A1c  6.4
1003195     BLA 401.9   34:04.3 Hemoglobin A1c  6.4 
```

使用 HAVING 语句查询的结果：

```
1001937     BLA 401.9   11/14/12Hemoglobin A1c  6.3
1001937     BLA 401.9   8/14/12 Hemoglobin A1c  6.3
1001937     BLA 401.9   5/14/12 Hemoglobin A1c  6.3
1001937     BLA 401.9   2/14/12 Hemoglobin A1c  6.3
1001937     BLA 401.9   11/14/12Hemoglobin A1c  6.3
1002034     BLA 401.9   1/10/12 HEMOGLOBIN A1c  7.7
1002034     BLA 401.9   6/8/12  HEMOGLOBIN A1c  7.7
1002034     BLA 401.9   9/7/12  HEMOGLOBIN A1c  7.7
1002034     BLA 401.9   10/15/12HEMOGLOBIN A1c  7.7
1002648     BLA 401.9   2/22/12 Hemoglobin A1c  6.1
1002648     BLA 401.9   7/2/12  Hemoglobin A1c  6.1
1002648     BLA 401.9   10/2/12 Hemoglobin A1c  6.1
1002648     BLA 401.9   2/22/12 Hemoglobin A1c  6.1
1020923     BLA 401.9   1/30/12 HEMOGLOBIN A1c  10
1020923     BLA 401.9   1/30/12 Hemoglobin A1c  11.8
1020923     BLA 401.9   4/17/12 Hemoglobin A1c  11.8
1020923     BLA 401.9   5/16/12 HEMOGLOBIN A1c  10
1020923     BLA 401.9   5/16/12 Hemoglobin A1c  11.8
1020923     BLA 401.9   9/13/12 HEMOGLOBIN A1c  10
1020923     BLA 401.9   9/13/12 Hemoglobin A1c  9.3
1020923     BLA 401.9   10/1/12 HEMOGLOBIN A1c  10
1020923     BLA 401.9   10/1/12 Hemoglobin A1c  11.8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:21:09.830

从选择字段中删除日期，然后使用

```
Select FIELDS where condition group by FIELDS  having count(*) > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:25:45.283

您的查询可能如下所示：

```
SELECT pat.patient_id, pat.last_name, Pat.first_name, pat.ethnic_group,
       pat.race, pl.icdcode, enc.encounter_date, lab.test_performed, lab.result_value,
       lab.result_units
FROM dbo.dem_patient pat
     RIGHT JOIN dbo.med_problemlist as pl
      ON pat.patient_id = pl.patient_id
     JOIN dbo.enc_encounter as enc
      ON pat.patient_id = enc.patient_id
     JOIN dbo.med_labresult as lab
      ON pat.patient_id = lab.patient_id
WHERE pl.icdcode like '401.9%' AND
       enc.encounter_date >= '01/01/2012' AND enc.encounter_date <= '12/31/2012' AND
       pat.last_name != 'test' AND (lab.test_performed = 'HgbA1c' OR 
       lab.test_performed = 'Hemoglobin A1c')
GROUP BY pat.patient_id, pat.last_name, Pat.first_name, pat.ethnic_group,
         pat.race, pl.icdcode, enc.encounter_date, lab.test_performed,lab.result_value,
          lab.result_units
HAVING COUNT(*)>1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T17:27:31.877

在我的脑海中，将另一个连接条件添加到内联视图中，您可以从遇到次数大于 1 的集合中获取最小遭遇日期。连接条件将是 enc.encounterdate = inlineview.encounterdate。

您发布的示例结果看起来像是在寻找第一次遇到，所以使用 min，如果您想要最后一次遇到，则使用 max。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T21:45:37.057

在您的结果中 lab_result 和 meet_date 有不同的值。请求返回用于分组数据的最小值

```
SELECT pat.patient_id, pat.last_name, Pat.first_name, pat.ethnic_group,
       pat.race, pl.icdcode, MIN(enc.encounter_date), MIN(lab.result_value)
FROM dbo.dem_patient pat RIGHT JOIN dbo.med_problemlist as pl ON pat.patient_id = pl.patient_id
                               JOIN dbo.enc_encounter as enc ON pat.patient_id = enc.patient_id
                               JOIN dbo.med_labresult as lab ON pat.patient_id = lab.patient_id
WHERE pl.icdcode like '401.9%' AND enc.encounter_date >= '01/01/2012' AND enc.encounter_date <= '12/31/2012' AND
      pat.last_name != 'test' AND (lab.test_performed = 'HgbA1c' OR lab.test_performed = 'Hemoglobin A1c')
GROUP BY pat.patient_id, pat.last_name, Pat.first_name, pat.ethnic_group,
         pat.race, pl.icdcode
HAVING COUNT(*) > 1
ORDER BY race, ethnic_group 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T21:47:16.670

```
;WITH PatientData (patient_id,last_name, first_name, ethnic_group,
race, icdcode, encounter_date, test_performed, result_value,
result_units )
AS
(
SELECT pat.patient_id, pat.last_name, Pat.first_name, pat.ethnic_group,
pat.race, pl.icdcode, enc.encounter_date, lab.test_performed, lab.result_value,
lab.result_units
FROM dbo.dem_patient pat
RIGHT JOIN dbo.med_problemlist as pl
ON pat.patient_id = pl.patient_id
JOIN dbo.enc_encounter as enc
ON pat.patient_id = enc.patient_id
JOIN dbo.med_labresult as lab
ON pat.patient_id = lab.patient_id
WHERE pl.icdcode like '401.9%' AND
enc.encounter_date >= '01/01/2012' AND enc.encounter_date <= '12/31/2012' AND
pat.last_name != 'test' AND (lab.test_performed = 'HgbA1c' OR 
lab.test_performed = 'Hemoglobin A1c')
GROUP BY pat.patient_id, pat.last_name, Pat.first_name, pat.ethnic_group,
pat.race, pl.icdcode, enc.encounter_date, lab.test_performed, lab.result_value,
lab.result_units
)

SELECT patient_id,last_name, first_name, ethnic_group,
race, icdcode, encounter_date, test_performed, result_value,
result_units
FROM PatientData pd1 
WHERE EXISTS (SELECT patient_id 
                FROM PatientData pd2 
                WHERE p2.patient_id  = pd1.patient_id  
                GROUP BY patient_id 
                HAVING COUNT(*)>1 )
ORDER BY pd1.race, pd1.ethnic_group 
```

这样做是创建一个名为公共表表达式 (CTE) 的临时命名结果集。这里面有所有的数据。然后选择只挑选出 CTE 中多次出现患者 ID 的那些记录。

# javascript - 从数字生成公钥

> ID：14713200
> 
> 赞同：1
> 
> 时间：2013-02-05T17:19:30.583
> 
> 标签：javascript, encryption, rsa, jsbn

我在 javascript 中使用 RSA，来自：[http ://www-cs-students.stanford.edu/~tjw/jsbn/](http://www-cs-students.stanford.edu/~tjw/jsbn/)

在他们的演示页面上，它能够生成所需的密钥：[http ://www-cs-students.stanford.edu/~tjw/jsbn/rsa2.html](http://www-cs-students.stanford.edu/~tjw/jsbn/rsa2.html)

但我不明白的是，如何将它们的密钥（即一些变量）从十六进制字符串转换为看起来像私钥/公钥字符串的字符串。

他们的输出看起来像这样......

```
Modulus (hex):
a32464be9bef16a6186a7f29d5ebc3223346faab91ea10cc00e68ba26322a1b0
3dc3e1ec61832fca37ed84018db73ae6b79bd8f3fa2945c8606766402658d0c1

Public exponent (hex, F4=0x10001):
10001

Private exponent (hex):
c3f5730d81402e7453df97df2895884e0c49b5cf5ff54737c3dd28dc6537b3fd
8b0eb2fd82148ebbf81fe16128ec1ebf39fd9a6e62d42aad245b172f4ed8661

P (hex):
f542cdc91f73747ecc20076962a2ed91749b8e0af66693ba6f67dd92f99b1533

Q (hex):
aa491917d8b05a75db7a5c1f6b592b0f0a9bb30a530cbef44ae233b9bf3d5a3b

D mod (P-1) (hex):
e5bfbea639201e70e926d7ca90ebaf4022cbd533cfbe2784edf78e48b029e6a1

D mod (Q-1) (hex):
3e3e17d8fa9083903ed83be21427f4b03bcd6ba523742e3c373ef56f38b2e14f

1/Q mod P (hex):
d93a8828e23458c2115fc1dd003274485af1483e8ec35866d5cffd214c5f853e 
```

我希望私钥看起来像这样......

```
-----BEGIN RSA PRIVATE KEY-----
MIIBOQIBAAJBALH5w2R5Zl3hHoH7zDF6i5IbO7W1Ry9bT2bxTy2sJa7mZC+p3rQG
YNrX+M/KuOUuVqFaohrWLwU28+VlFjFHG5MCAwEAAQJAFZCi+Viwa62saamd+1zS
7pg4KvNVNcrFmz6gDnOueTujcBdaNfxOzWy39SxSOtPe62qYHPculci/QiJfLvOf
MQIhAOqxj69QPRqervf6ARMI1zV0+UAGA1tWgOeU7NH0U9vLAiEAwiIJu+986PKT
qmjAKDFx3OJxUuEay8kJ5apDjC6s1lkCIBVRdazGDBbb7SbHRcu11N6dNnrTUQC9
9c2TYIOdvvRLAiB7bbDKsKW2ZiTEv/0MkQNX8REkJMMothV41BxGUJbLYQIgF/yA
54gqfRtj3aPB6lDETMOZbZIWgNpn8hU2kFGdlIs=
-----END RSA PRIVATE KEY----- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:57:18.167

您熟悉的私钥和公钥采用称为 PEM 的格式。PEM 是指包装 base64 编码数据的页眉和页脚。

编码的二进制数据采用 ASN.1（抽象语法符号一）的 DER（可分辨编码规则）格式。

这是一个 javascript ASN.1 解码器。 [http://lapo.it/asn1js/](http://lapo.it/asn1js/)

公钥和私钥分别包含模数和公钥或私钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-04T17:50:49.877

以下代码来自几位作者（在评论中列出），在 Ohloh 代码（[http://code.ohloh.net/file?fid=gxO4OHIDEgc0cAHG4K2iptOVOUY&cid=b0rvFixqcq4&s=&fp=285256&mp=&projSelected=true#L0](http://code.ohloh.net/file?fid=gxO4OHIDEgc0cAHG4K2iptOVOUY&cid=b0rvFixqcq4&s=&fp=285256&mp=&projSelected=true#L0)）上编译。所有功劳归功于他们的辛勤工作。但是编译对我有用。将此添加为 .js 库，然后您可以从主程序中调用它，如下所示：

```
publicPem = publicPEM();
privatePemUnencrypted = privatePEM(); //you will probably want to encrypt this 
```

输出为 PEM 格式。

代码：

```
//From git://github.com/titanous/pem-js.gitmaster

var ASNIntValue, ASNLength, int2hex;
function privatePEM() {
  var encoded;
  encoded = '020100';
  encoded += ASNIntValue(this.n, true);
  encoded += ASNIntValue(this.e, false);
  encoded += ASNIntValue(this.d, false);
  encoded += ASNIntValue(this.p, true);
  encoded += ASNIntValue(this.q, true);
  encoded += ASNIntValue(this.dmp1, true);
  encoded += ASNIntValue(this.dmq1, false);
  encoded += ASNIntValue(this.coeff, false);
  encoded = '30' + ASNLength(encoded) + encoded;
  return "-----BEGIN RSA PRIVATE KEY-----\n" + encode64(chars_from_hex(encoded)) + "\n-----END RSA PRIVATE KEY-----";
};

function publicPEM() {
  var encoded;
  encoded = ASNIntValue(this.n, true);
  encoded += ASNIntValue(this.e, false);
  encoded = '30' + ASNLength(encoded) + encoded;
  encoded = '03' + ASNLength(encoded, 1) + '00' + encoded;
  encoded = '300d06092a864886f70d0101010500' + encoded;
  encoded = '30' + ASNLength(encoded) + encoded;
  return "-----BEGIN PUBLIC KEY-----\n" + encode64(chars_from_hex(encoded)) + "\n-----END PUBLIC KEY-----";
};

RSAKey.prototype.parsePEM = function(pem) {
  pem = ASN1.decode(Base64.unarmor(pem)).sub;
  return this.setPrivateEx(pem[1].content(), pem[2].content(), pem[3].content(), pem[4].content(), pem[5].content(), pem[6].content(), pem[7].content(), pem[8].content());
};

ASNIntValue = function(integer, nullPrefixed) {
  integer = int2hex(integer);
  if (nullPrefixed) {
    integer = '00' + integer;
  }
  return '02' + ASNLength(integer) + integer;
};

ASNLength = function(content, extra) {
  var length;
  if (!(typeof extra !== "undefined" && extra !== null)) {
    extra = 0;
  }
  length = (content.length / 2) + extra;
  if (length > 127) {
    length = int2hex(length);
    return int2hex(0x80 + length.length / 2) + length;
  } else {
    return int2hex(length);
  }
};

int2hex = function(integer) {
  integer = integer.toString(16);
  if (integer.length % 2 !== 0) {
    integer = '0' + integer;
  }
  return integer;
};

/* CryptoMX Tools - Base64 encoder/decoder
 * http://www.java2s.com/Code/JavaScriptDemo/Base64EncodingDecoding.htm
 *
 * Copyright (C) 2004 - 2006 Derek Buitenhuis
 * Modified February 2009 by TimStamp.co.uk
 * GPL v2 Licensed
 */
function encode64(a){a=a.replace(/\0*$/g,"");var b="",d,e,g="",h,i,f="",c=0;do{d=a.charCodeAt(c++);e=a.charCodeAt(c++);g=a.charCodeAt(c++);h=d>>2;d=(d&3)<<4|e>>4;i=(e&15)<<2|g>>6;f=g&63;if(isNaN(e))i=f=64;else if(isNaN(g))f=64;b=b+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f)}while(c<
a.length);a="";b=b.split("");for(c=0;c<b.length;c++){if(c%64==0&&c>0)a+="\n";a+=b[c]}b.join();b=a%4;for(c=0;c<b;c++)a+="=";return a}
function decode64(a){var b="",d,e,g="",h,i="",f=0;a=a.replace(/[^A-Za-z0-9\+\/\=\/n]/g,"");do{d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(f++));e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(f++));h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(f++));i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(f++));d=d<<2|e>>4;e=(e&15)<<4|h>>2;g=(h&3)<<
6|i;b+=String.fromCharCode(d);if(h!=64)b+=String.fromCharCode(e);if(i!=64)b+=String.fromCharCode(g)}while(f<a.length);return b=b.replace(/\0*$/g,"")};

/* JavaScript ASCII Converter
 * http://www.vortex.prodigynet.co.uk/misc/ascii_conv.html
 *
 * TPO 2001/2004
 * Modified Feb 2009 by Tim Stamp (timstamp.co.uk)
 * License Unknown
 */
function chars_from_hex(a){var c="";a=a.replace(/^(0x)?/g,"");a=a.replace(/[^A-Fa-f0-9]/g,"");a=a.split("");for(var b=0;b<a.length;b+=2)c+=String.fromCharCode(parseInt(a[b]+""+a[b+1],16));return c}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T21:20:03.870

使用@borkencode（[http://lapo.it/asn1js/](http://lapo.it/asn1js/)）建议的链接，我已经能够成功提取公钥的所有组件，以及私钥的相关组件。

## 测试提取键的数字部分的代码

```
// copy and paste into console whilst on `http://lapo.it/asn1js/`
// so that dependancies are met
var getParts, pri, pub;

getParts = function(key) {
  var end, current, output, crypt, slice, sa, so, start, tree, _i, _len;

  // strip out the BEGIN/END tags from the input keys
  crypt = key.replace(/^-.+/mg, '');

  // decode the input text into ASN1 object
  tree = ASN1.decode(Base64.decode(crypt));

  // set root object based on type of key
  if (key.match(/PUBLIC KEY-/)) {
    root = tree.sub[1].sub[0].sub;
  } else if (key.match(/PRIVATE KEY-/)) {
    root = tree.sub;
  } else {
    console.error("Not happening");
    return;
  }

  // initialize empty array to populate with results
  output = [];

  // loop through the root ASN1 object
  for (_i = 0, _len = root.length; _i < _len; _i++) {

    // get the current object
    current = root[_i];

    // set the start and end positions in the stream
    start = current.stream.pos + current.header;
    end = start + current.length;

    // cut the required compnent out of the stream
    slice = current.stream.enc.slice(start, end);

    // format the slice in HEX, joining as string
    // and replacing leading `00`s
    str = slice.map(function(i) {
      return ("0" + i.toString(16)).replace(/.(..)/, "$1");
    }).join('').replace(/^(00)+/, '');

    // add to output array
    output.push(str);

  }

  // send the results!
  return output;

};

pri = "-----BEGIN RSA PRIVATE KEY-----\n"+
"MIIBOgIBAAJBAMpZrx0gTluJEu6+fop1e60lwbnlBD6kHvoRx85GBhUgD8SQknjc\n"+
"LcU2qqM/pV9ZX8MV8x49h2mzrmRyH7kDmpcCAwEAAQJAYf2GYMt5Rrids4IKk5CL\n"+
"IPFs3FH8eT1PRvh/UvP0FBwDMZu/Q4m+3PNTM3ARQhFuCvWgCalMmZkyVx0HYRLe\n"+
"4QIhAOaaQm+b/bSoHqolvVTcyfBL09rrLFZhgGkETX3R6cVRAiEA4KLdUm97YBxP\n"+
"T6/jkn/P7K8SUWEO9o9u8Bif1UKQB2cCIETqoSQ92EqfW9q5wKWV/nvkDYKFehCu\n"+
"vvOjp40MqPKhAiA2sPBZpbLQD5Rvvk8V1/Bzm5xGG+9csEc+RYCEl5QheQIhAKgi\n"+
"Xb3zY9lqtpX/mgTIrW6RPB3GocviJOibqtpfNxRU\n"+
"-----END RSA PRIVATE KEY-----";

pub = "-----BEGIN PUBLIC KEY-----\n"+
"MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAMpZrx0gTluJEu6+fop1e60lwbnlBD6k\n"+
"HvoRx85GBhUgD8SQknjcLcU2qqM/pV9ZX8MV8x49h2mzrmRyH7kDmpcCAwEAAQ==\n"+
"-----END PUBLIC KEY-----";

console.dir(getParts(pri));
console.dir(getParts(pub)); 
```

## 输出到控制台：

```
0: ""
1: "ca59af1d204e5b8912eebe7...d8769b3ae64721fb9039a97"
2: "010001"
3: "61fd8660cb7946b89db3820...94c999932571d076112dee1"
4: "e69a426f9bfdb4a81eaa25b...c56618069044d7dd1e9c551"
5: "e0a2dd526f7b601c4f4fafe...ef68f6ef0189fd542900767"
6: "44eaa1243dd84a9f5bdab9c...a10aebef3a3a78d0ca8f2a1"
7: "36b0f059a5b2d00f946fbe4...f5cb0473e45808497942179"
8: "a8225dbdf363d96ab695ff9...1cbe224e89baada5f371454"
------------------------------------------------------
0: "ca59af1d204e5b8912eebe7...d8769b3ae64721fb9039a97"
1: "010001" 
```

我已经测试了这些值，将它们用作输入来使用我的 javascript 库加密和解密消息。我现在真正想做的是通过另一种方式创建`.pem`和`.pub`文件，从数字到格式化文本。

到目前为止，我发现的最接近的是一个 PHP 函数，我可能会将其转换为 javascript。详细信息：http: [//pumka.net/2009/12/19/reading-writing-and-converting-rsa-keys-in-pem-der-publickeyblob-and-privatekeyblob-formats/](http://pumka.net/2009/12/19/reading-writing-and-converting-rsa-keys-in-pem-der-publickeyblob-and-privatekeyblob-formats/)

```
//Encode key sequence
$modulus = new ASNValue(ASNValue::TAG_INTEGER);
$modulus->SetIntBuffer($Modulus);
$publicExponent = new ASNValue(ASNValue::TAG_INTEGER);
$publicExponent->SetInt($PublicExponent);
$keySequenceItems = array($modulus, $publicExponent);
$keySequence = new ASNValue(ASNValue::TAG_SEQUENCE);
$keySequence->SetSequence($keySequenceItems);
//Encode bit string
$bitStringValue = $keySequence->Encode();
$bitStringValue = chr(0x00) . $bitStringValue; //Add unused bits byte
$bitString = new ASNValue(ASNValue::TAG_BITSTRING);
$bitString->Value = $bitStringValue;
//Encode body
$bodyValue = "\x30\x0d\x06\x09\x2a\x86\x48\x86\xf7\x0d\x01\x01\x01\x05\x00" . $bitString->Encode();
$body = new ASNValue(ASNValue::TAG_SEQUENCE);
$body->Value = $bodyValue;
//Get DER encoded public key:
$PublicDER = $body->Encode(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-05T17:47:00.607

要回答您的问题，请查看实际公式的[RSA 算法](http://en.wikipedia.org/wiki/RSA_%28algorithm%29)。对于复杂的部分，最好把转换留给 JS

万一它有帮助，我在我的应用程序中使用[了这段代码](http://ashwinrayaprolu.wordpress.com/2011/05/17/javascript-rsa-encryption-and-java-decryption/)，它创造了奇迹:)

# c# - 更改引导程序的控制标签宽度？

> ID：14713205
> 
> 赞同：5
> 
> 时间：2013-02-05T17:19:58.953
> 
> 标签：c#, asp.net, css, twitter-bootstrap

Bootstrap 具有以下 CSS：

```
.form-horizontal .control-label {
  float: left;
  width: 160px;
  padding-top: 5px;
  text-align: right;
}

.form-horizontal .controls {
  *display: inline-block;
  *padding-left: 20px;
  margin-left: 180px;
  *margin-left: 0;
} 
```

它使我的表单看起来像这样：

![在此处输入图像描述](../Images/f04bb0dd0dbd6336304e4f7af07ce8c6.png)

标签在右边。

这是我构建表单的方式：

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
    <div id="kez_header">

        <table class="style1">
           <tr>
               <td>
                   <h4> Add Group
                   </h4>
              </td>
               <td align="right" valign="middle">

               </td>
           </tr>
           </table>

             <div id="new_group_view" class="form-horizontal">
             <form class="form-horizontal" method="POST" action="/yourownpoet/web/app_dev.php/register/">
    <div class="control-group">
        <label class="control-label control-label-me required" for="fos_user_registration_form_email" placeholder="Email">Email:</label>
        <div class="controls">
            <input id="fos_user_registration_form_email" class="text-style" type="email" placeholder="Email" required="required" name="fos_user_registration_form[email]">
            <div placeholder="Password" id="fos_user_registration_form_plainPassword"></div>
        </div>
    </div>

    <div class="control-group">
        <label class="control-label required" for="fos_user_registration_form_plainPassword_Enter Password: ">Enter password: </label>
        <div class="controls">
            <input type="password" required="required" name="fos_user_registration_form[plainPassword][Enter Password: ]" id="fos_user_registration_form_plainPassword_Enter Password: " class="text-style">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label required" for="fos_user_registration_form_plainPassword_Verify Password: ">Verify password: </label>
        <div class="controls">
            <input type="password" required="required" name="fos_user_registration_form[plainPassword][Verify Password: ]" id="fos_user_registration_form_plainPassword_Verify Password: " class="text-style">
        </div>
    </div>
</form>
             </div>
    </div>
</asp:Content> 
```

我怎样才能让这个正常，以便标签开始更像这里： [http ://bootstrap.stage42.net/doc/forms](http://bootstrap.stage42.net/doc/forms)

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-06T09:56:27.927

`.form-horizontal .control-label` `width`指定“标签文本的最后一个字符距离父容器左侧的距离”。

`.form-horizontal .controls` `margin-left`指定“字段的左边界距父容器左侧的距离”。

这是简化的解释，但应该让您有足够的理解来控制您的样式。

因此，您应该按比例调整`.form-horizontal .control-label` `width`和`.form-horizontal .controls` `margin-left`值，以在容器内移动字段和标签。成比例地因为标签和字段之间的“空间”应该被保留。这是示例：

```
.form-horizontal .control-label {
  float: left;
  width: 120px; /* changed from 160px to 120px */
  padding-top: 5px;
  text-align: right;
}

.form-horizontal .controls {
  *display: inline-block;
  *padding-left: 20px;
  margin-left: 140px;  /* changed from 180px to 140px */
  *margin-left: 0;
} 
```

# php - PHP字符串到以单词开头为键的数组中

> ID：14713206
> 
> 赞同：5
> 
> 时间：2013-02-05T17:20:06.690
> 
> 标签：php

说我有以下字符串

```
$str = "once in a great while a good-idea turns great"; 
```

使用数组键作为单词开始位置的字符串计数来创建数组的最佳解决方案是什么？

```
$str_array['0'] = "once";
$str_array['5'] = "in";
$str_array['8'] = "a";
$str_array['10'] = "great";
$str_array['16'] = "while";
$str_array['22'] = "a";
$str_array['24'] = "good-idea";
$str_array['34'] = "turns";
$str_array['40'] = "great"; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T17:24:28.600

如下所示：

```
str_word_count($str, 2); 
```

什么`str_word_count()`是

> [**`str_word_count()`**](http://php.net/manual/en/function.str-word-count.php)— 返回有关字符串中使用的单词的信息

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-05T17:24:05.883

[str_word_count()](http://php.net/manual/en/function.str-word-count.php)以 2 作为第二个参数来获取偏移量；并且您可能需要使用第三个参数来包含连字符以及单词中的字母

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T17:25:26.793

```
$str = "once in a great while a good-idea turns great";
print_r(str_word_count($str, 2)); 
```

演示： [http ://sandbox.onlinephpfunctions.com/code/9e1afc68725c1472fc595b54c5f8a8abf4620dfc](http://sandbox.onlinephpfunctions.com/code/9e1afc68725c1472fc595b54c5f8a8abf4620dfc)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T17:24:07.960

尝试这个：

```
$array = preg_split("/ /",$str,-1,PREG_SPLIT_OFFSET_CAPTURE);
$str_array = Array();
foreach($array as $word) $str_array[$word[1]] = $word[0]; 
```

编辑：刚刚看到马克贝克的回答。可能是比我更好的选择！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T17:24:18.980

您可以使用[`preg_split`](http://www.php.net/manual/en/function.preg-split.php)（带有`PREG_SPLIT_OFFSET_CAPTURE`选项）在空间上拆分字符串，然后使用它为您提供的偏移量来创建一个新数组。

```
$str = "once in a great while a good-idea turns great";
$split_array = preg_split('/ /', $str, -1, PREG_SPLIT_OFFSET_CAPTURE);

$str_array = array();

foreach($split_array as $split){
    $str_array[$split[1]] = $split[0];
} 
```

# jquery - 需要帮助使用 jQuery 解析 XML

> ID：14713208
> 
> 赞同：0
> 
> 时间：2013-02-05T17:20:10.143
> 
> 标签：jquery, xml, parsing, dynamic

```
<?xml version="1.0"?>
<watchlist timestamp="2013-02-04 17:38:24">
  <team name="Parent">
      <child name="ChildTeam1" team="3">
          <client mnem="c1">5</client>
          <client mnem="c2">0</client>
          <client mnem="c3">1</client>
          <client mnem="c4">1</client>
          <client mnem="c5">2</client>
          <client mnem="c6">6</client>
          <client mnem="c7">0</client>
          <client mnem="c8">0</client>
          <client mnem="c9">1</client>
          <client mnem="c10">0</client>
      </child>
      <child name="ChildTeam2" team="3">
          <client mnem="c1">6</client>
          <client mnem="c2">0</client>
          <client mnem="c3">0</client>
          <client mnem="c4">0</client>
          <client mnem="c5">0</client>
          <client mnem="c6">0</client>
          <client mnem="c7">0</client>
          <client mnem="c8">0</client>
          <client mnem="c9">0</client>
          <client mnem="c10">0</client>
      </child>
  </team>
</watchlist> 
```

我需要帮助使用 jQuery 解析上述 XML。有父队，下有子队。我的目标是将团队 ID 为 3 的父团队的总 c1 相加...所以在上面的示例中，要获得 c1 的总数，我将添加在 ChildTeam1 中找到的 5 和在 ChildTeam2 中找到的 6 去c1 总共得到 11 个。

添加一个扭曲......客户端上的 mnem 属性会定期更改，所以我不能硬编码来过滤“c1”，我必须动态拉出那部分。我确实知道，一个孩子下总会有 10 个客户。

有任何想法吗？

到目前为止，我的代码确实正确计算了团队 3 的 c1 总数，它使用了 mnem 属性的过滤器（自从 mnem 更改后，我试图摆脱它）：

```
function parseXml(data) {
var count1 = 0;
    $(data).find("child[team='3']").each(function(child) {
        count1 += parseInt($(this).find("client[mnem='c1']").text(), 10);
    });
    alert(count1); //output total c1 for team 3
} 
```

* * *

## 更新 - 下面的最终解决方案

```
function parseXml(data) {
    var i = 0; 
    var mnemonic = new Array();

    //build array of the 10 mnemonics, with mnemonic as key value
    $(data).find("client").each(function(){ 
        if ( i < 10 ) {
            mnemonic[$(this).attr('mnem')] = 0; //set default count to 0
            i++;
        } else { return false; } //break .each loop
    });

    //find all children where team = 3, and add the numbers up for each client mnemonic
    $(data).find("child[team='3']").each(function() {
        for(var index in mnemonic) {
            //add to the count
            mnemonic[index] +=     parseInt($(this).find("client[mnem="+index+"]").text(), 10);
        }
    });

    //output the results
    for(var index in mnemonic) {
        $("#output").append( index + " : " + mnemonic[index] + "<br />");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:27:18.913

你只是在改变`c1`其他东西时遇到麻烦吗？这只是在选择器中编辑字符串的问题：

```
function parseXml(data) {
    var count = 0,
        teamnum = 3,
        counter = 'c1';
    $(data).find("child[team="+count+"]").each(function(i,el) {
        count1 += parseInt($(this).find("client[mnem="+counter+"]").text(),10);
    });
    alert(count1); //output total c1 for team 3
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:26:56.713

您可以通过替换`"client[mnem='c1']"`为`"client[" + attrname +"='c1']"`. 你还需要什么吗？

# string - Fortran77 将整数转换为字符串

> ID：14713210
> 
> 赞同：0
> 
> 时间：2013-02-05T17:20:13.733
> 
> 标签：string, casting, integer, fortran77

出于兴趣，我试图找到一种将整数转换为 Fortran77 中的字符串的方法。我遇到了`CHAR(I)`，但这会将 ASCII 索引 I 转换为该位置的字符。有没有办法在 Fortran77 中简单地将整数转换为字符串？反之又如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:33:46.767

Fortran的方式是将整数的值写入字符串变量；此操作称为*内部写入*。我现在要出门了，所以不会检查这个，而且我在道德上反对编写 FORTRAN77 或帮助其他人编写它，所以不能保证以下内容不包含更现代的 Fortran。

首先声明一个字符变量来接收整数

```
character(len=12) :: int_as_string 
```

然后将整数写入其中，就像您通常将整数写入任何其他通道一样，例如`stdout`

```
write(int_as_string,'(i12.12)') my_int 
```

我希望您希望将整数写入格式设置为更适合您的格式

# mysql - mysql 如果不为 null、0 或 ""

> ID：14713216
> 
> 赞同：9
> 
> 时间：2013-02-05T17:20:23.260
> 
> 标签：mysql, isnull

```
SELECT * 
  FROM table WHERE id IN ('21') 
   AND (content_id IS NULL OR content_id = 0 OR content_id = '') 
```

有没有更短的方法来写这个条件。

我有一个 int() 列，它可以是：NULL、0 或 EMPTY。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T17:21:59.000

您可以`IFNULL`在 MySQL 中使用函数。

```
select ____
  from tbl
 where IFNULL(content_id, 0) = 0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T18:14:07.170

我认为更短的方法是这样的：

```
SELECT * 
FROM table
WHERE id IN ('21')
      AND COALESCE(content_id IN ('0', ''), 1) 
```

`content_id IN ('0', '')`可以假设这些值：

*   **如果conent_id**是`'0'`或者`''`
*   **空**如果`conent_id IS Null`
*   **否则**为假。****

 **如果它为 Null，则使用 COALESCE 我将返回 1，这相当于 True。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T17:23:44.433

你可以试试[`COALESCE`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)：

```
SELECT * FROM table WHERE id IN ('21') 
AND COALESCE(content_id,0) =0; 
```**

# api - 新 Twitter API 1.1 的身份验证

> ID：14713230
> 
> 赞同：5
> 
> 时间：2013-02-05T17:21:10.007
> 
> 标签：api, twitter, oauth

我有一个应用程序需要`users/show.json`在公共页面上显示随机用户的关注者数量和关注者（）（不需要身份验证）。使用 Twitter API 1.0 这很容易，因为请求不需要身份验证。使用新的 Twitter API 1.1 是不可能的，所以我需要对请求进行身份验证（通过[OAuth](http://en.wikipedia.org/wiki/OAuth)）。

是否只能“验证”应用程序而不是用户？我的意思是：我可以避免要求用户登录并且只使用应用程序密钥/秘密进行身份验证吗？或者每次我也需要使用用户凭据创建令牌、创建回调等？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T22:22:05.800

对的，这是可能的！如果您的应用程序不需要代表用户执行诸如发布状态或发送直接消息之类的操作，您应该能够使用一组硬编码的 Twitter [OAuth](http://en.wikipedia.org/wiki/OAuth)凭据检索用户的所有公共信息，并且不需要用户进行身份验证。

*   登录 Twitter 并转到[https://dev.twitter.com/apps上的开发人员仪表板](https://dev.twitter.com/apps)
*   注册一个新的应用程序；申请注册后，查看申请详情。您将看到一个“OAuth 工具”选项卡，您可以在其中找到该应用程序的所有相关 OAuth 值：Consumer Key、Consumer Secret、Access Token 和 Access Token Secret。
*   使用这些凭据，您将能够向新的 Twitter API 发出请求。

如果您不习惯直接使用 Twitter API，那么有许多针对各种语言的优秀 API 包装器——其中包括 Temboo SDK，它会为您提供调用各种方法的代码片段（并且还为您提供安全存储您的 Twitter 凭据的地方，因此您无需将它们烘焙到您的应用程序中）。

看一眼：

*   *[用户时间线](https://live.temboo.com/library/Library/Twitter/Timelines/UserTimeline/)*
*   *[GetFollowersByID](https://live.temboo.com/library/Library/Twitter/FriendsAndFollowers/GetFollowersByID/)*

（全面披露：我在 Temboo 工作。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T04:46:21.123

完成您所要求的最简单的方法是使用 Twitter API 1.1 的“仅应用程序身份验证”功能，该功能适用​​于大部分 API。请参阅*[仅应用程序身份验证](https://dev.twitter.com/docs/auth/application-only-auth)*。您可以在*[get_bearer_token.py](https://github.com/taherh/twitter_application_auth/blob/master/get_bearer_token.py)*中看到它的 Python 示例。

一旦您有了不记名令牌，您只需将其包含在您的请求授权标头中 - 不需要签名。

# python - QGroupBox的布局

> ID：14713231
> 
> 赞同：2
> 
> 时间：2013-02-05T17:21:17.947
> 
> 标签：python, layout, pyqt, qt-designer, groupbox

我在另一个组框中制作了一个带有组框的 gui（在 Qt 设计器中），其中有几个按钮、一个进度条和一个标签。

标签在进度条上方，在图A中被选中。当我将“那个组框”的布局设置为“在网格中布局”时，我得到了我想要的：当我调整进度条的大小时主窗口（图 B）。如您所见，问题在于进度条上的标签。如何设置布局，以便使用进度条调整标签大小，如图 C 所示？

![在此处输入图像描述](../Images/00b3a15c3631d19581e022f03fad55be.png)

# python - tkinter python 创建子窗口

> ID：14713232
> 
> 赞同：1
> 
> 时间：2013-02-05T17:21:20.163
> 
> 标签：python, function, tkinter

嗨，我正在尝试创建一个在 python 中使用 Tkinter 浏览时间机器图像的工具。我计划使用此处的代码：[http](http://code.google.com/p/python-ttk/source/browse/trunk/pyttk-samples/dirbrowser.py?r=21) ://code.google.com/p/python-ttk/source/browse/trunk/pyttk-samples/dirbrowser.py?r=21用于目录浏览器。我已经编写了一个开始菜单，单击“浏览”按钮后，我希望打开目录浏览器，用户可以在其中选择一个文件，然后将路径传递回标签（我需要添加它，因为它不在目录浏览器代码呢）。下面是我的开始菜单的代码：

```
#!/usr/bin/python

from Tkinter import *
import ttk

class App:

    def __init__(self,master):

        frame = Frame(master)
        frame.pack()

        self.label = Label(frame, text="Please enter file path or browse to a file")
        self.label.pack(side=TOP)

        self.button = Button(frame, text="OK", command=messageWindow)
        self.button.pack(side=BOTTOM)

        self.hi_there = Button(frame, text="Browse")
        self.hi_there.pack(side=BOTTOM)

        self.entry = Entry(frame, width = 30)
        self.entry.pack(side=LEFT)

root = Tk()

app = App(root)

root.mainloop() 
```

我已经读到 Tkinter 不能同时拥有两个根框架，但我正在努力寻找替代方案，因为目录浏览器也有一个根框架。我不确定我所做的是否正确，但在浏览按钮上我添加了：

```
 self.hi_there = Button(frame, text="Browse", command=dir) 
```

我已将目录浏览器代码放在一个类中，并将其命名为 dir。所以我的想法是我应该给全班打电话？但后来我收到一个错误，指出名称 dir 未定义。我可以采取哪些方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:38:14.927

我不太明白您所说的“时间机器图像”是什么意思，但我有一些东西可能会对您有所帮助：不要使用变量 name `dir`，因为这是一个内置关键字，您一定会运行成问题。如果您在查找`dir`类内部调用的方法时遇到问题，请确保您告诉它查看类内部。

```
 def sayHello():
        print "Hello!"

    class Person:

        def sayHello():
            print "Hello from Person"

    a_person = Person()

    sayHello() 
    ##"Hello"

    a_person.sayHello()
    ## "Hello from Person" 
```

调用`printHello`and`class_instance.printHello`是两个不同的函数，您需要传递`class_instance.dir`给按钮。

I'm sure you know about them, but there are premade [file dialogs](http://tkinter.unpythonic.net/wiki/tkFileDialog) to help with getting filepaths, filenames etc.

Another thing is you don't want a new `root` instance, you're looking for a new [`TopLevel` instance](http://effbot.org/tkinterbook/toplevel.htm), which is essentially the same thing as a new `root`, but not quite.

# eclipse - 使用 SCM/Audit 组时的 Eclipse Maven 多项目构建/部署过程

> ID：14713238
> 
> 赞同：2
> 
> 时间：2013-02-05T17:21:33.333
> 
> 标签：eclipse, maven, version-control

最终，我们试图找出我公司的构建/部署过程。作为开发人员，我需要将我的源代码提供给审核组。他们审查软件是否存在安全偏差。如果源通过审核，则代码将转到软件配置组。他们的工作是将我的应用程序归档并编译为 WAR。然后将 WAR 文件提供给将 WAR 放在服务器上的 IT 部门。我认为如果我有一个独立的项目，这个过程会很容易。

但是在 Eclipse 中，我有两个 Maven 项目，其中一个依赖于另一个。一个项目`core`提供核心功能。我将其分开是因为这些核心功能将被我所有其他（内部）Web 应用程序项目使用。

```
 Logging
 filters
 common models (phonebook, employee, etc)
 common utilities (Emailing employess, String utils, etc..) 
```

在其他项目中，比如说，我在 POM 中`project1`添加了一个依赖项。`core`不确定我是否需要这样做，但我还编辑了 Eclipse 项目属性并添加了对该`core`项目的引用。通过一些技巧（Maven 新手），我能够`Project1`部署到我本地安装的 JBoss。我打开了 WAR，在 WEB-INF/lib 文件夹中我可以看到它`core-0.0.1-SNAPSHOT.jar`被自动包含在内。

但是，我如何为 SCM 提供我的源`project1`代码，`core`而无需手动将源代码复制`cores`到`porject1s`源代码中。

我可以复制`core-0.0.1-SNAPSHOT.jar`到，但每次我部署新应用程序时`Project1`他们也应该审查源代码，因为我可能已经添加或调整了一些核心功能。`cores`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:10:08.963

您应该了解有关 maven SNAPSHOT 和发布存储库的更多信息。然后安装[Nexus 服务器](http://www.sonatype.org/nexus/)作为生成的 jars、wars、javadocs 和源（称为工件）的目的地。

之后，您可能会对具有分阶段部署选项的商业 Nexus 版本感兴趣。 [http://www.sonatype.com/people/2009/06/using-staging-repositories-for-deployment-in-nexus/](http://www.sonatype.com/people/2009/06/using-staging-repositories-for-deployment-in-nexus/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T08:58:28.953

要解决打包问题，您可以使用[Maven Assembly Plugin](http://maven.apache.org/plugins/maven-assembly-plugin/)。您可以在一个文件中包含所有源和依赖项。

也许还有更适合你需要的maven插件。

# c++ - 在没有 WM_CTLCOLORSTATIC 的选择文件夹对话框中为静态控件着色，该对话框窗口没有收到

> ID：14713248
> 
> 赞同：0
> 
> 时间：2013-02-05T17:22:11.810
> 
> 标签：c++, winapi, controls

我设法在此控件中绘制了一个矩形，但有两个问题。首先是在用鼠标移动选择文件夹对话框后显示白色矩形。我知道这里的问题是连接到正确的信息。我选择了在创建对话框窗口时触发的 WM_ERASEBKGND，但它没有任何效果，必须在之前未显示的控件部分返回屏幕时调用它，所以我必须将窗口拖到边缘，所以部分控件不可见并将其拖回，然后显示白色矩形。但是出现了第二个问题。它还涵盖了控件的文本。

所以这是我的尝试，有什么想法吗？

```
#include <windows.h>
#include <shlobj.h>

WNDPROC origStaticProc;
LRESULT CALLBACK myStaticProc( HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam )
{
  switch (uMsg) {
    case WM_ERASEBKGND: {
      HDC dc = GetDC(hWnd);
      RECT clientRect;
      GetClientRect(hWnd,&clientRect);
      FillRect(dc, &clientRect, (HBRUSH)GetStockObject(WHITE_BRUSH));
      ReleaseDC(hWnd, dc);
      break;
    }
  }
  return CallWindowProc(origStaticProc, hWnd, uMsg, wParam, lParam );
}

int CALLBACK BrowseCallBackProc( HWND hwnd, UINT uMsg, LPARAM lParam, LPARAM lpData) {
  switch(uMsg) {
    case BFFM_INITIALIZED: {
      HWND static_control = NULL;
      char szClassName[_MAX_PATH];
      for (HWND hChild = GetWindow(hwnd, GW_CHILD); hChild != NULL; hChild =  GetNextWindow(hChild, GW_HWNDNEXT))
      {
        if ((GetWindowLong(hChild, GWL_STYLE) & WS_VISIBLE) == 0) continue;
        GetClassName(hChild, szClassName, _countof(szClassName));
        if (!strcmp("Static",szClassName)) {
          static_control = hChild;
          break;
        }
      }
      HFONT hFont = CreateFont (13, 0, 0, 0, FW_DONTCARE, FALSE, FALSE, FALSE, ANSI_CHARSET, OUT_TT_PRECIS, CLIP_DEFAULT_PRECIS, DEFAULT_QUALITY, DEFAULT_PITCH | FF_DONTCARE, TEXT("Fixedsys"));
      SendMessage(static_control, WM_SETFONT, (WPARAM)hFont, TRUE);
      origStaticProc = ( WNDPROC ) SetWindowLongW( static_control, GWL_WNDPROC,( LONG ) myStaticProc );
      break;
    }
  }
}

int main() {
  using namespace std;
  BROWSEINFOW bi;
  LPITEMIDLIST pidl;
  LPMALLOC pMalloc;
  if (SUCCEEDED (::SHGetMalloc (&pMalloc))) {
    ::ZeroMemory (&bi,sizeof(bi));  
    bi.hwndOwner = NULL;
    bi.lpszTitle = L"I should be visible on a white background. Now you must drag me to edge of the screen and back.";
    bi.pszDisplayName = 0;
    bi.pidlRoot = 0;
    bi.ulFlags = BIF_NEWDIALOGSTYLE | BIF_VALIDATE | BIF_USENEWUI | BIF_UAHINT;
    bi.lpfn = BrowseCallBackProc;
    bi.lParam = (LPARAM)L"d:\\";
    pidl = ::SHBrowseForFolderW(&bi);
  }
} 
```

它的样子：

![它看起来如何](../Images/cfb7d96ca3cf27548dc8fb367d0240ce.png)

它当然应该是这样的：

![当然应该如何](../Images/c4ec57a4313e4ae4e387bdd8243c10b4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:28:18.477

知道了。问题是我不知道用于 SHBrowseForFolder 的回调函数与窗口本身的回调不同。结果我必须做另一个函数来子类化对话框。

这是丑陋和不安全的代码，但它编译并说明了原理。

```
#include <windows.h>
#include <shlobj.h>

WNDPROC origBffProc;
LRESULT CALLBACK bffProc( HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam ) {
  static HBRUSH hBrush = (HBRUSH)GetStockObject(HOLLOW_BRUSH);
  switch (uMsg) {
    case WM_CTLCOLORSTATIC: {
      HDC hdcStatic = (HDC) wParam;
      SetTextColor(hdcStatic, RGB(255,0,0));
      SetBkColor(hdcStatic, RGB(255,255,0));
      return (INT_PTR)hBrush;
    }
  }
  return CallWindowProc(origBffProc, hWnd, uMsg, wParam, lParam );
}

int CALLBACK BrowseCallBackProc( HWND hwnd, UINT uMsg, LPARAM lParam, LPARAM lpData) {
  switch(uMsg) {
    case BFFM_INITIALIZED: {
      HWND static_control = NULL;
      char szClassName[_MAX_PATH];
      for (HWND hChild = GetWindow(hwnd, GW_CHILD); hChild != NULL; hChild =  GetNextWindow(hChild, GW_HWNDNEXT))
      {
        if ((GetWindowLong(hChild, GWL_STYLE) & WS_VISIBLE) == 0) continue;
        GetClassName(hChild, szClassName, _countof(szClassName));
        if (!strcmp("Static",szClassName)) {
          static_control = hChild;
          break;
        }
      }
      HFONT hFont = CreateFont (13, 0, 0, 0, FW_DONTCARE, FALSE, FALSE, FALSE, ANSI_CHARSET, OUT_TT_PRECIS, CLIP_DEFAULT_PRECIS, DEFAULT_QUALITY, DEFAULT_PITCH | FF_DONTCARE, TEXT("Fixedsys"));
      PostMessage(static_control, WM_SETFONT, (WPARAM)hFont, TRUE);
      origBffProc = ( WNDPROC ) SetWindowLongW( hwnd, GWL_WNDPROC,( LONG ) bffProc );
      break;
    }
  }
}
int main() {
  using namespace std;
  BROWSEINFOW bi;
  LPITEMIDLIST pidl;
  LPMALLOC pMalloc;
  if (SUCCEEDED (::SHGetMalloc (&pMalloc))) {
    ::ZeroMemory (&bi,sizeof(bi));  
    bi.hwndOwner = NULL;
    bi.lpszTitle = L"You are about to erase a directory, be careful! (and don't blame me)";
    bi.pszDisplayName = 0;
    bi.pidlRoot = 0;
    bi.ulFlags = BIF_NEWDIALOGSTYLE | BIF_VALIDATE | BIF_USENEWUI | BIF_UAHINT;
    bi.lpfn = BrowseCallBackProc;
    bi.lParam = (LPARAM)L"d:\\";
    pidl = ::SHBrowseForFolderW(&bi);
  }
} 
```

# python - 读取多个文件和数组

> ID：14713249
> 
> 赞同：0
> 
> 时间：2013-02-05T17:22:17.193
> 
> 标签：python

我需要将文本文件中的值读取到数组 Z 中。仅使用单个文件 ChiTableSingle 就可以正常工作，但是当我尝试使用多个文件时它会失败。它似乎正确地读取行，并产生 Z，但将 z[0] 作为 []，然后我得到错误，设置一个带有序列的数组元素。

这是我当前的代码：

```
rootdir='C:\users\documents\ChiGrid'
fileNameTemplate = r'C:\users\documents\ContourPlots\Plot{0:02d}.png'

for subdir,dirs,files in os.walk(rootdir):
    for count, file in enumerate(files):

        fh=open(os.path.join(subdir,file),'r')
        #fh = open( "ChiTableSingle.txt" );

        print 'file is '+ str(file)

        Z = []
        for line in fh.readlines():
            y = [value for value in line.split()]
            Z.append( y )

        print Z[0][0]
        fh.close()

        plt.figure() # Create a new figure window

        Temp=open('TempValues.txt','r')
        lineTemp=Temp.readlines()
        for i in range(0, len(lineTemp)):
            lineTemp[i]=[float(lineTemp[i])]

        Grav=open('GravValues2.txt','r')
        lineGrav=Grav.readlines()
        for i in range(0, len(lineGrav)):
            lineGrav[i]=[float(lineGrav[i])]

        X,Y = np.meshgrid(lineTemp, lineGrav) # Create 2-D grid xlist,ylist values

        plt.contour(X, Y, Z,[1,2,3], colors = 'k', linestyles = 'solid')
        plt.savefig(fileNameTemplate.format(count), format='png')
        plt.clf() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:16:03.980

我注意到的第一件事是您的列表理解`y = [value for ...]`只会返回一个字符串列表（来自`split()`函数），因此您需要在尝试绘制之前将它们转换为数字格式。

此外，如果您正在读取的文件只是以空格分隔的数字表，您应该考虑使用，`numpy.loadtxt(fh)`因为它负责拆分和类型转换并返回 2-d `numpy.array`。您还可以添加注释文本，如果该行以常规 python 注释字符（例如 ）开头，它将忽略`# this line is a comment and will be ignored`。

只是另一个想法，我会小心使用与python方法相同的变量名（例如`file`本例中的单词）。一旦你把它重新定义为别的东西，之前的定义就消失了。

# r - 并行化并加速 R 代码以读取多个文件

> ID：14713250
> 
> 赞同：2
> 
> 时间：2013-02-05T17:22:17.777
> 
> 标签：r, performance, file-io, parallel-processing

我有一个非常适合我的目的的代码（它读取一些具有特定模式的文件，读取每个文件中的矩阵并使用每个文件对计算一些东西......最终输出是一个与文件大小相同的矩阵号），看起来像这样：

```
m<- 100
output<- matrix(0, m, m)

lista<- list.files(pattern = "q")
listan<- as.matrix(lista)
n <- nrow(listan)

for (i in 1:n) {    
AA    <- read.table((listan[i,]), header = FALSE)
A<- as.matrix(AA)
dVarX <- sqrt(mean(A * A))

 for (j in i:n) {
    BB <- read.table ((listan[j,]), header = FALSE)
    B<- as.matrix(BB)
    V <- sqrt (dVarX * (sqrt(mean(B * B))))
    output[i,j] <- (sqrt(mean(A * B))) / V        
 }
} 
```

我的问题是这需要很多时间（我有大约 5000 个矩阵，这意味着 5000x5000 个循环）。我想并行化，但我需要一些帮助！等待您的好意建议！

先感谢您！

瞎扯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T16:59:04.167

瓶颈可能是从磁盘读取。不能保证并行运行代码会使事情变得更快。在这种情况下，多个进程同时尝试从同一个磁盘读取可能比单个进程还要慢。

由于您的矩阵是由另一个 R 进程编写的，因此您确实应该将它们保存为 R 的二进制格式。您读取每个矩阵一次且仅一次，因此使程序更快的唯一方法是更快地从磁盘读取。

这是一个示例，向您展示了它的速度可能有多快：

```
# make some random data and write it to disk
set.seed(21)
for(i in 0:9) {
  m <- matrix(runif(700*700), 700, 700)
  f <- paste0("f",i)
  write(m, f, 700)              # text format
  saveRDS(m, paste0(f,".rds"))  # binary format
}

# initialize two output objects
m <- 10
o1 <- o2 <- matrix(NA, m, m)

# get list of file names
files <- list.files(pattern="^f[[:digit:]]+$")
n <- length(files) 
```

首先，让我们使用 运行您的代码`scan`，这已经比您当前使用`read.table`.

```
system.time({
  for (i in 1:n) {    
    A <- scan(files[i],quiet=TRUE)

    for (j in i:n) {
      B <- scan(files[j],quiet=TRUE)
      o1[i,j] <- sqrt(mean(A*B)) / sqrt(sqrt(mean(A*A)) * sqrt(mean(B*B)))
    }
  }
})
#    user  system elapsed 
#   31.37    0.78   32.58 
```

现在，让我们使用以 R 的二进制格式保存的文件重新运行该代码：

```
system.time({
  for (i in 1:n) {    
    fA <- paste0(files[i],".rds")
    A <- readRDS(fA)

    for (j in i:n) {
      fB <- paste0(files[j],".rds")
      B <- readRDS(fB)
      o2[i,j] <- sqrt(mean(A*B)) / sqrt(sqrt(mean(A*A)) * sqrt(mean(B*B)))
    }
  }
})
#    user  system elapsed 
#    2.42    0.39    2.92 
```

所以二进制格式要快 10 倍！输出是一样的：

```
all.equal(o1,o2)
# [1] TRUE 
```

# maven - 在 maven-jetty-plugin 中添加测试 jar 或使用 maven-war-plugin 创建测试战

> ID：14713251
> 
> 赞同：1
> 
> 时间：2013-02-05T17:22:22.917
> 
> 标签：maven, integration-testing, maven-jetty-plugin

我正在使用 maven 构建一个多模块 webapp。我想在他们自己的模块中运行我的集成测试并使用码头插件。为了让一切正常工作，我需要在战争的类路径中添加几个罐子，但我在文档[http://www.eclipse.org/jetty/documentation/current/中看不到这样的选项jetty-maven-plugin.html#deploy-war-running-pre-assembled-war](http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html#deploy-war-running-pre-assembled-war)

我能够部署战争，但它失败了，因为它缺少我需要添加的两个罐子。

有没有办法让我在插件配置中添加几个额外的 jar？

如果没有，我有没有办法像在 Maven 中使用 test-jar 一样打包“测试战”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:00:09.617

有多种方法可以使用 jetty-maven-plugin 扩展 Web 应用程序类路径。最适合您的是在插件配置块中设置该`extraClasspath`字段：`webAppConfig`

```
<configuration>
 ...
 <webAppConfig>
  ...
  <extraClasspath>path/to/your/custom-dependency.jar</extraClasspath>
 </webAppConfig>
</configuration> 
```

文档对此不是很一致。但是[javadoc](http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/webapp/WebAppContext.html#setExtraClasspath%28java.lang.String%29)很清楚。

[您可以在我的jetty 插件 wiki 页面](http://www.benoitschweblin.com/2013/03/run-jetty-in-maven-life-cycle.html)上找到相关的配置示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:53:25.683

将依赖项直接添加到插件的`<dependencies/>`. 不需要范围或任何东西——它们不会进入你的最终工件，而是——仅在执行期间由 Jetty 插件使用。

# javascript - 如何播放远程flv文件

> ID：14713252
> 
> 赞同：2
> 
> 时间：2013-02-05T17:22:23.337
> 
> 标签：javascript, jwplayer

我真的找不到通过[JWPlayer播放远程](http://www.longtailvideo.com/jw-player/)[FLV](http://en.wikipedia.org/wiki/Flash_Video)文件的方法。

有可能吗？

我得到的是这里，我已经尝试了 JWPlayer 的最后一个版本：

```
<script type='text/javascript' src='jwplayer.js'></script>
<div id='mediaspace'><p>This div should have been replaced (by jwplayer.js)</p></div>
<script type='text/javascript'>
  jwplayer('mediaspace').setup({
    'flashplayer': 'player.swf',
    'file': 'http://www.influxis.com/btest/bsitz/apps/jwplayer/sample.flv',
    'controlbar': 'bottom',
    'width': '425',
    'height': '344'
  });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T18:02:00.483

尝试使用任意数量的免费在线转换器将您的 flv 转换为 swf。对 JWPlayer 不太熟悉，但是还有很多其他方法可以嵌入 flvs。您可以在 youtube 上托管它并链接到它，您可以将[http://www.flvplayer.com/](http://www.flvplayer.com/)添加到您的网站，或类似的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T12:46:08.590

我找到了一个非常酷的解决方案。

如果您访问此站点：[http ://www.osmf.org/configurator/fmp/](http://www.osmf.org/configurator/fmp/)

只需复制/粘贴代码即可对其进行测试

```
<object width="600" height="409"> 
  <param name="movie"
    value="http://fpdownload.adobe.com/strobe/FlashMediaPlayback.swf"></param>
  <param name="flashvars"
    value="src=http%3A%2F%2Fosmf.org%2Fvideos%2Fcathy2.flv&poster=http%3A%2F%2Fosmf.org%2Fimages%2Fposter_cathy_fmp.jpg"></param>
  <param name="allowFullScreen" value="true"></param>
  <param name="allowscriptaccess" value="always"></param>
  <embed src="http://fpdownload.adobe.com/strobe/FlashMediaPlayback.swf" 
     type="application/x-shockwave-flash" allowscriptaccess="always" 
     allowfullscreen="true" width="600" height="409"
     flashvars="src=http%3A%2F%2Fosmf.org%2Fvideos%2Fcathy2.flv&poster=http%3A%2F%2Fosmf.org%2Fimages%2Fposter_cathy_fmp.jpg"></embed>
</object> 
```

# cakephp - cakephp $this->request-is("post") 只为一种形式返回 false，这么奇怪吗？

> ID：14713258
> 
> 赞同：4
> 
> 时间：2013-02-05T17:22:55.380
> 
> 标签：cakephp

我在网站上有很多表格。它们都是以类似的方式创建的

```
<?php echo $this->Form->create('SysUser');?>
<fieldset>
<legend><?php echo __('Edit Basic Information'); ?></legend>
<?php
echo $this->Form->input('SysUser.first_name');
echo $this->Form->input('SysUser.family_name',array('label'=>__("Last Name")));
echo $this->Form->input('SysUser.mobile_phone_number');
echo $this->Form->input('SysUser.user_name',array('label'=>__("Screen Name")));
echo $this->Form->input('action', array('type'=>'hidden','value'=>'edit_basic_info'));
echo $this->Form->input('SysUser.id', array('type'=>'hidden','value'=>$user["id"]));
?>
</fieldset>
<?php echo $this->Form->end(__('Submit'));?> 
```

但是一种形式的类型变成了“put”，而不是“post”。创建这些表单时，我从未将类型明确设置为“发布”。我收集 CakePHP 设置要发布的默认值。现在，我创建这个新的特殊表格的方式似乎有些不对劲。奇怪的是，这是工作日前的事！

我不知道怎么了。就这个：

```
<?php echo $this->Form->create('Member'); ?>
<fieldset>
    <legend><?php echo __('Basic Profile Setup'); ?></legend>
    <?php
    echo $this->Form->input('Member.gender_id');
    $w = array();
    for ($i = 40; $i < 120; $i++) {
        $w[$i] = $i . " kg";
    }
    $h = array();
    for ($i = 120; $i < 230; $i++) {
        $h[$i] = $i . " cm";
    }
    echo $this->Form->input('Member.height', array(
        'options' => $h,
        'empty' => __("choose one")
    ));
    echo $this->Form->input('Member.weight', array(
        'options' => $w,
        'empty' => __("choose one")
    ));
    $options['minYear'] = date('Y') - 78;
    $options['maxYear'] = date('Y') - 18;
    echo $this->Form->input('Member.birthdate', $options);
    echo $this->Form->input('Member.residential_location_id', array('label' => __("City/Location")));
    echo $this->Form->input('Member.occupation_id',array('id'=>'MemberOccupationId'));
    echo $this->Form->input('action', array('type' => 'hidden', 'value' => 'create_member'));
    ?>
</fieldset>
<?php
echo $this->Form->end(array("label" => __('Save'))); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-10-21T19:21:09.693

当`Request data`包含一个 Model.id`CakeRequest::method()`设置为`put`. 在 cakephp 中处理此问题的首选方法如下。

```
if ($this->request->is(array('post', 'put'))) {
    // Code
} 
```

[您可以在烘焙](http://book.cakephp.org/2.0/en/console-and-shells/code-generation-with-bake.html)控制器中看到这一点，编辑操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T18:15:15.780

不知道为什么会这样，但您可以这样设置表单类型：

```
<?php echo $this->Form->create('Member', array('type' => 'post')); ?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T20:03:24.620

我也有这个问题。在我的情况下，当我遇到验证错误时就会发生这种情况。所以对于第二次运行，脚本认为这是一个 PUT 请求而不是 POST 请求。现在，因为它是一个 PUT，它甚至没有进入我检查它是否是一个 POST 的 if 子句，所以它会返回输入并尝试创建一个 POST 请求。这是永远循环的。

解决方案？检查 NOT GET。

所以你会得到这样的东西：

```
if (!$this->request->is('get')){
    //Save logic here
} 
```

我在食谱中看到过这样的例子，但我找不到。所以我感觉它已经更新了，但就我而言，你必须使用这种方法。因此，您将涵盖一个 PUT 以及一个 POST 请求。

**更新**

不建议使用这种方法。它是基于是否`id`在表单中设置的 PUT/POST。由于我是根据请求的类型设置 id，而不是如果它确实存在，它会一遍又一遍地切换。我正在使用 1 表单来执行`add`和`edit`操作。它们都使用了`edit.ctp`刚刚设置的更灵活的那个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-06T21:11:49.647

我遇到了同样的问题，经过 4 小时的搜索，我刚刚解决了它，将模型名称附加到视图中的字段，如下所示：

```
<?php echo $this->Form->create('User');?>

<?php
    echo $this->Form->input('User.id');
    echo $this->Form->input('User.username', array('readonly' => true));
    echo $this->Form->input('User.email', array('readonly' => true));
    echo $this->Form->input('User.name');
    echo $this->Form->input('User.phone');
    echo $this->Form->input('User.gender');
    echo $this->Form->input('User.locale', array('id' => 'locale_select', 'options' => array('es' => __('Spanish'), 'en' => __('English'))));
    echo $this->Form->input('User.birthday', array('type' => 'date', 'dateFormat' => 'DMY', 'minYear' => date('Y') - 100, 'maxYear' => date('Y')));
?>
<?php echo $this->Form->end(__('Save', true));?> 
```

好吧，我不得不说这段代码是在一个插件中，所以我不知道是否还有其他问题。但是该插件中的其他形式可以完美运行，并且该形式需要具有模型名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-20T00:03:19.670

我处理这种情况的一种方法是创建自己的检测器来定义 post OR put 的上下文。这`beforeFilter()`在 AppController 中的方法中：

```
// add a simple form post detector
    $this->request->addDetector('formPosted', array(
    'env' => 'REQUEST_METHOD',
    'options' => array('post', 'put')
)); 
```

然后，当您需要检查表单是否已发布（或“放置”）时，则：

```
if ($this->request->is('formPosted')) { ... } 
```

由于在 AppController 中添加了检测器，因此可以从任何控制器方法中检查条件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T17:31:48.003

来自[食谱](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#FormHelper%3a%3acreate)：

> 如果`$this->request->data`包含以表单模型命名的数组元素，并且该数组包含模型主键的非空值，则 FormHelper 将为该记录创建一个编辑表单。

可能是这样吗？什么`Member`是主键？

# linq - Where 返回未设置为对象实例的对象引用

> ID：14713261
> 
> 赞同：0
> 
> 时间：2013-02-05T17:23:04.277
> 
> 标签：linq, linq-to-sql

我是Linq的新手。我有 2 个表表 1 和表 2。它们通过`Id1`.

```
Table 1                   Table2
-------                   ------
  Id1                      Id2 RId1 (reference key from TAble 1)
   1                       1    1
                           2    1
   2                       3    2
                           4    2
                           5    Null
   3                       6    .
   .                       7    .
   . 
```

当我使用该`Where`子句从表 2 中查询数据时，出现错误`Object reference not set to an instance of object`

`var result = db.Table2.Where(i => i.Rid1 == 1);`

即使这段代码也无济于事 `if (result != null)`

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:24:57.480

在这种情况下，Rid1 似乎是一个可为空的。将 null 与整数进行比较可能会导致该错误。尝试将其更改为以下内容：

```
db.Table2.Where(i => i.Rid1.GetValueOrDefault(0) == 1); 
```

# jquery - jQuery 用类切换 NextUntil td 的父 tr

> ID：14713262
> 
> 赞同：3
> 
> 时间：2013-02-05T17:23:05.507
> 
> 标签：jquery, parent

我有一个表，它是由 td 上的切换类和后续行 td 上的切换更多类生成的。

我试图定位父 TR 并使用 next until 然后在 td togglelink 类之后切换以下 TR 的可见性，并指定 td toggle-more 的 nextuntil 父 tr。

这是我的桌子

```
<table  width=100% >
      <tr>
        <th>Description</th>
        <th>Actions</th>
      </tr>

      <tr>
        <td class="toggle">Agriculture</td>
        <td>&nbsp;</td>
      </tr>
      <tr>
        <td class="toggle-more" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Aquaculture</td>
        <td><input type="checkbox" name="LookUpItem_1" value="110|Aquaculture">
          &nbsp;Click&nbsp;to&nbsp;Select</td>
      </tr>
      <tr>
        <td class="toggle-more" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dairy Production</td>
        <td ><input type="checkbox" name="LookUpItem_2" value="120|Dairy Production">
          &nbsp;Click&nbsp;to&nbsp;Select</td>
      </tr>
      <tr>
        <td class="toggle-more" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Horitculture</td>
        <td><input type="checkbox" name="LookUpItem_3" value="130|Horitculture">
          &nbsp;Click&nbsp;to&nbsp;Select</td>
      </tr>
      <tr>
        <td class="toggle">Blah Blah</td>
        <td >&nbsp;</td>
      </tr>
      <tr  class="toggle-more" >
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Aquaculture</td>
        <td><input type="checkbox" name="LookUpItem_1" value="110|Aquaculture">
          &nbsp;Click&nbsp;to&nbsp;Select</td>
      </tr>
      <tr  class="toggle-more">
        <td >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dairy Production</td>
        <td ><input type="checkbox" name="LookUpItem_2" value="120|Dairy Production">
          &nbsp;Click&nbsp;to&nbsp;Select</td>
      </tr>
      <tr  class="toggle-more">
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Horitculture</td>
        <td><input type="checkbox" name="LookUpItem_3" value="130|Horitculture">
          &nbsp;Click&nbsp;to&nbsp;Select</td>
      </tr>
      <tr>
        <td class="toggle">Blah Blah</td>
        <td >&nbsp;</td>
      </tr>
      <tr  class="toggle-more" >
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Aquaculture</td>
        <td><input type="checkbox" name="LookUpItem_1" value="110|Aquaculture">
          &nbsp;Click&nbsp;to&nbsp;Select</td>
      </tr>
      <tr  class="toggle-more">
        <td >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dairy Production</td>
        <td ><input type="checkbox" name="LookUpItem_2" value="120|Dairy Production">
          &nbsp;Click&nbsp;to&nbsp;Select</td>
      </tr>
      <tr  class="toggle-more">
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Horitculture</td>
        <td><input type="checkbox" name="LookUpItem_3" value="130|Horitculture">
          &nbsp;Click&nbsp;to&nbsp;Select</td>
      </tr>
      <tr>
        <td>Health</td>
        <td><input type="checkbox" name="LookUpItem_16" value="1910|Dental">
          &nbsp;Click&nbsp;to&nbsp;Select</td>
      </tr>
      <tr >
        <td >Dental</td>
        <td ><input type="checkbox" name="LookUpItem_16" value="1910|Dental">
          &nbsp;Click&nbsp;to&nbsp;Select</td>
      </tr>
    </table> 
```

这是我的 jQuery。

```
 $(document).ready(function(){
var showText='+ Show Options';
var hideText='- Hide Options';
var is_visible = false;  

$('.toggle').wrapInner('<a href="#" class="toggleLink" />');
$('.toggleLink').append( ' <span class="showtext">'+showText+'</span>' );
$('.toggle').css({ 
        //width: '100%'
}); 
$('.toggle-more').closest( 'tr' ).hide();
$('a.toggleLink').click(function() {
    is_visible = !is_visible;
    $('.showtext').html( ($('.showtext').html() == hideText) ? showText : hideText);
    $(this).parents('tr').nextUntil('td:not(.toggle-more)').animate({ opacity: "toggle" });
    return false; 
});
}); 
```

它几乎可以工作。我做错了什么，有更好的方法吗？

过去 2 行没有切换或有切换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:19:45.543

每当需要多个表行来表示一个逻辑项时，我建议将这些行分组到`<tbody>`标签中（是的，它是完全有效的 HTML）。

这样做，您可以放弃`.nextUntil()`该`.siblings()`方法，并且在我看来，它可以更容易地在 jQuery 中使用。

JsFiddle：**[在此处查看演示](http://jsfiddle.net/GoranMottram/PXVNk/1/)**

HTML：

```
<table width="100%">
    <thead>
        <tr>
            <th>Description</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="toggle">Agriculture</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Aquaculture</td>
            <td>
                <input type="checkbox" name="LookUpItem_1" value="110|Aquaculture" />
                &nbsp;Click&nbsp;to&nbsp;Select
            </td>
        </tr>
        <tr>
            <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dairy Production</td>
            <td>
                <input type="checkbox" name="LookUpItem_2" value="120|Dairy Production" />
                &nbsp;Click&nbsp;to&nbsp;Select
            </td>
        </tr>
        <tr>
            <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Horitculture</td>
            <td>
                <input type="checkbox" name="LookUpItem_3" value="130|Horitculture" />
                &nbsp;Click&nbsp;to&nbsp;Select
            </td>
        </tr>
    </tbody>
    <tbody>
        <tr>
            <td class="toggle">Blah Blah</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Aquaculture</td>
            <td>
                <input type="checkbox" name="LookUpItem_1" value="110|Aquaculture" />
                &nbsp;Click&nbsp;to&nbsp;Select
            </td>
        </tr>
        <tr>
            <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dairy Production</td>
            <td>
                <input type="checkbox" name="LookUpItem_2" value="120|Dairy Production" />
                &nbsp;Click&nbsp;to&nbsp;Select
            </td>
        </tr>
        <tr>
            <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Horitculture</td>
            <td>
                <input type="checkbox" name="LookUpItem_3" value="130|Horitculture" />
                &nbsp;Click&nbsp;to&nbsp;Select
            </td>
        </tr>
    </tbody>
    <tbody>
        <tr>
            <td>Health</td>
            <td>
                <input type="checkbox" name="LookUpItem_16" value="1910|Dental" />
                &nbsp;Click&nbsp;to&nbsp;Select
            </td>
        </tr>
    </tbody>
    <tbody>
        <tr>
            <td>Dental</td>
            <td>
                <input type="checkbox" name="LookUpItem_16" value="1910|Dental" />
                &nbsp;Click&nbsp;to&nbsp;Select
            </td>
        </tr>
    </tbody>
</table> 
```

jQuery：

```
$(function(){
    var showText='+ Show Options';
    var hideText='- Hide Options';

    $('.toggle').wrapInner('<a href="#" class="toggleLink" />');
    $('.toggleLink').append( ' <span class="showtext">'+showText+'</span>' );
    $('table tbody').each(function(){
        $(this).find('tr').not(':first').hide(); 
    });

    $('a.toggleLink').click(function() {
        var $a = $(this);
        $a.find('.showtext').html( ($a.find('.showtext').html() == hideText) ? showText : hideText);
        $a.closest('tr').siblings('tr').animate({ opacity: "toggle" });

        return false; 
    });
}); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:20:44.480

我相信这就是你要找的东西：http: [//jsbin.com/equqaw/1/](http://jsbin.com/equqaw/1/)

[正如您在此处](http://jsbin.com/equqaw/1/edit)看到的，我对标记和 jQuery 进行了一些更改。所有的`toggle`和`toggle-more`类现在都在`tr`s 上，而且点击功能现在也略有不同。

**标记：**

```
<table>
    <tr>
        <th>Description</th>
        <th>Actions</th>
    </tr>

    <tr class="toggle">
        <td>Agriculture</td>
        <td>&nbsp;</td>
    </tr>
    <tr class="toggle-more">
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Aquaculture</td>
        <td>
            <input type="checkbox" name="LookUpItem_1" value="110|Aquaculture">
            &nbsp;Click&nbsp;to&nbsp;Select</td>
    </tr>
    <tr class="toggle-more">
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dairy Production</td>
        <td>
            <input type="checkbox" name="LookUpItem_2" value="120|Dairy Production">
            &nbsp;Click&nbsp;to&nbsp;Select</td>
    </tr>
    <tr class="toggle-more">
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Horitculture</td>
        <td>
            <input type="checkbox" name="LookUpItem_3" value="130|Horitculture">
            &nbsp;Click&nbsp;to&nbsp;Select</td>
    </tr>
    <tr class="toggle">
        <td>Blah Blah</td>
        <td>&nbsp;</td>
    </tr>
    <tr class="toggle-more">
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Aquaculture</td>
        <td>
            <input type="checkbox" name="LookUpItem_1" value="110|Aquaculture">
            &nbsp;Click&nbsp;to&nbsp;Select</td>
    </tr>
    <tr class="toggle-more">
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dairy Production</td>
        <td>
            <input type="checkbox" name="LookUpItem_2" value="120|Dairy Production">
            &nbsp;Click&nbsp;to&nbsp;Select</td>
    </tr>
    <tr class="toggle-more">
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Horitculture</td>
        <td>
            <input type="checkbox" name="LookUpItem_3" value="130|Horitculture">
            &nbsp;Click&nbsp;to&nbsp;Select</td>
    </tr>
    <tr class="toggle">
        <td>Blah Blah</td>
        <td>&nbsp;</td>
    </tr>
    <tr class="toggle-more">
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Aquaculture</td>
        <td>
            <input type="checkbox" name="LookUpItem_1" value="110|Aquaculture">
            &nbsp;Click&nbsp;to&nbsp;Select</td>
    </tr>
    <tr class="toggle-more">
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Dairy Production</td>
        <td>
            <input type="checkbox" name="LookUpItem_2" value="120|Dairy Production">
            &nbsp;Click&nbsp;to&nbsp;Select</td>
    </tr>
    <tr class="toggle-more">
        <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Horitculture</td>
        <td>
            <input type="checkbox" name="LookUpItem_3" value="130|Horitculture">
            &nbsp;Click&nbsp;to&nbsp;Select</td>
    </tr>
    <tr>
        <td>Health</td>
        <td>
            <input type="checkbox" name="LookUpItem_16" value="1910|Dental">
            &nbsp;Click&nbsp;to&nbsp;Select</td>
    </tr>
    <tr>
        <td>Dental</td>
        <td>
            <input type="checkbox" name="LookUpItem_16" value="1910|Dental">
            &nbsp;Click&nbsp;to&nbsp;Select</td>
    </tr>
</table> 
```

**jQuery：**

```
$(document).ready(function () {
    var showText = '+ Show Options';
    var hideText = '- Hide Options';

    $('.toggle td:nth-child(2)').wrapInner('<a href="#" class="toggleLink" />');
    $('.toggleLink').append(' <span class="showtext">' + showText + '</span>');
    $('.toggle').css({
        //width: '100%'
    });
    $('.toggle-more').closest('tr').hide();
    $('a.toggleLink').click(function () {
        var showTextSpan = $(this).find('.showtext');
        showTextSpan.html((showTextSpan.html() == hideText) ? showText : hideText);
        $(this).closest('tr').nextUntil('tr:not(.toggle-more)').animate({
            opacity : "toggle"
        });
        return false;
    });
}); 
```

希望有帮助。随时提出您的任何问题作为评论...

# ruby-on-rails - Heroku 资产预编译错误，尽管在本地编译资产

> ID：14713266
> 
> 赞同：1
> 
> 时间：2013-02-05T17:23:10.183
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment, heroku

我目前是第一次将我的应用程序部署到 Heroku，并且遇到了预编译错误。当我执行命令`git push heroku master`时，我得到：

```
Running: rake assets:precompile
       rake aborted!
       could not connect to server: Connection refused
       Is the server running on host "127.0.0.1" and accepting
       TCP/IP connections on port 5432? 
```

经过一番搜索，我遇到了 Heroku 自己的关于预编译错误的[故障排除指南](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar#troubleshooting)，以及这篇关于预编译错误和 Rails 3.2[的帖子](http://www.simonecarletti.com/blog/2012/02/heroku-and-rails-3-2-assetprecompile-error/)，并按照他们的指示，做了以下事情：

1.  添加`config.assets.initialize_on_precompile = false`到我的`application.rb`文件中
2.  `heroku create`为了安全起见，制作了一个新的heroku应用程序
3.  根据[Rails 指南](http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets)，运行`bundle exec rake assets:precompile`

我认为由于我在*本地*进行编译，因此在推送到 Heroku 时，它只会根据检测到 manifest.yml 文件跳过编译部分。但是，即使我这样做了，在运行时`git push heroku master`，它仍然会运行`rake assets:precompile`并产生与上面相同的错误。

提前感谢您的帮助！

**附录**

在我的 .gitignore 中，我有以下内容：

```
# Ignore bundler config
/.bundle

# Ignore the default SQLite database.
/db/*.sqlite3

# Ignore all logfiles and tempfiles.
/log/*.log
/tmp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:45:17.350

乍一看，我认为它应该可以工作。

您能否确认您已将所有更改提交并合并到 master 中？IE`git status`

# php - 使用同一页面的标题时，如何在链接中使用 .php?name=$_REQUEST['name'] 保持价值？

> ID：14713268
> 
> 赞同：0
> 
> 时间：2013-02-05T17:23:19.453
> 
> 标签：php, sql

我在使用 SQL 和 PHP 做图库时遇到了问题。我有 3 个 .php 文件，根据我在上一页中选择的内容，我需要从同一个 SQL 数据库中获取不同类型的信息。

我已经通过使用

```
<a href='page3.php?name=$row[name]'> 
```

链接中的东西，当您将其链接到另一个页面时效果很好。但是现在我需要在同一页面上使用标题，之后它似乎丢失了信息。

有谁知道如何在将标题用于同一页面时保留此信息？或者最好的不同方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:28:16.370

采用

```
<a href='page3.php?name=<?php echo $row['name']; ?>'> 
```

使用以下命令从 page3.php 获取数据：

```
$name = $_GET['name']; 
```

# facebook-graph-api - 使用用户消息发布成就时出错

> ID：14713269
> 
> 赞同：2
> 
> 时间：2013-02-05T17:23:19.263
> 
> 标签：facebook-graph-api, achievements

使用用户消息发布成就时，会出现以下错误：

```
{"error":{"message":"(#100) You haven't enabled User Messages for this action type (127701393971353) yet. Please update your Open Graph settings in the App Dashboard","type":"OAuthException","code":100}} 
```

不知道在哪里启用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T08:23:35.320

设法通过使用 id 手动修改 url 来访问设置。 [https://developers.facebook.com/apps/your_app_id_here/opengraph/action_type/127701393971353/](https://developers.facebook.com/apps/your_app_id_here/opengraph/action_type/127701393971353/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T22:55:20.923

万一这对其他人有帮助，我遇到了这个问题。我的情况是：我有一个经过批准的 Open Graph 操作的实时应用程序。我需要发布一个新版本的应用程序，但我需要一个新的 Open Graph 操作，因此在用户升级到新版本之前，早期版本仍然有效。当我使用新的 Open Graph 操作时，我收到了这个错误。我的问题是我在新应用程序版本的捆绑包 ID 中犯了一个简单的拼写错误，因此它与我在 Facebook 开发者应用程序的基本设置页面中为 iOS 设置指定的捆绑包 ID 不匹配。线索是在 Xcode 调试控制台中给出的错误中，应用程序 ID 不匹配。

# vb.net - VB.NET / 获取窗口的 WndProc？

> ID：14713270
> 
> 赞同：0
> 
> 时间：2013-02-05T17:23:19.740
> 
> 标签：vb.net, wndproc, hwnd

我正在尝试从打开的 Windows 资源管理器窗口中获取 WNDPROC。我可以成功获取窗口的句柄，但“GetWindowLongPtr”总是返回“0”。

我正在声明条目：

```
 <DllImport("user32.dll", EntryPoint:="GetWindowLongPtrW")> _
  Public Shared Function GetWindowLongPtrW(ByVal hWnd As HandleRef, <MarshalAs(UnmanagedType.I8)> ByVal nIndex As Long) As IntPtr

End Function 
```

我正在尝试获取 WNDPROC：

```
Dim ist As IntPtr
    Dim mtm As IntPtr
    Try

        ist = FindWindow("CabinetWClass", vbNullString)
        Dim ist2 As New HandleRef(0, ist)
        MsgBox(ist)
        mtm = GetWindowLongPtrW(ist2, 1)
        MsgBox(mtm)

    Catch ex As Exception
        MsgBox("Erro :(" & vbCrLf & vbCrLf & ex.ToString)
    End Try 
```

但是，WNDPROC MSGBOX 总是返回 0 ......我做错了什么？

# ruby-on-rails - 从关联方法中访问 Rails proxy_association.owner

> ID：14713281
> 
> 赞同：2
> 
> 时间：2013-02-05T17:23:46.270
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations, rails-activerecord

有没有办法从关联的方法中访问 proxy_association 对象？

例子：

```
class User < ActiveRecord:Base
  has_many :accounts
end

class Account < ActiveRecord:Base
  belongs_to :user

  def some_function
    # Here I want to access the same user object the association was called on
    # (that holds all already defined global variables), not a newly created object
    # through self.user (where all global variables are reset).

    proxy_association.owner
  end
end 
```

**如何访问从该关联中调用关联的对象？**不幸的是，`self.user`返回一个新对象，其中所有先前设置的变量都恢复为默认值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T17:59:45.017

使用关联`:inverse_of`上的选项。`has_many`这将在使用关联时连接内存中的两个模型。

```
class User < ActiveRecord:Base
  has_many :accounts, inverse_of: :user
end 
```

来源： [http ://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)

# cakephp - CakePHP HABTM 关系表连接

> ID：14713283
> 
> 赞同：0
> 
> 时间：2013-02-05T17:23:49.817
> 
> 标签：cakephp

我有一个 'patient_cases' 表，它具有与 'procedures' 表的 HABTM 关系。此“程序”表与“顾问”表具有多对一关系，然后与“专业”表具有多对一关系。

关系工作正常，使用 cakephp 调试工具栏，当我查看“patient_cases”索引页面时，我可以看到一切正常，但是我只得到了consultant_id 和speciality_id，而不是所有具有该关联模型的字段。

我相信这是应该发生的-

> 在 CakePHP 中，一些关联（belongsTo 和 hasOne）执行自动连接以检索数据，因此您可以发出查询以根据相关关联中的数据检索模型。
> 
> 但是 hasMany 和 hasAndBelongsToMany 关联并非如此。

我希望能够使用procedures.consultant_id从'consultants'表中获取顾问名称，并使用consultant.specialty_id从'specialties'中获取专业名称。

我试过玩一些表连接但没有成功，

```
class PatientCase extends AppModel {    
public $hasAndBelongsToMany = array(
                'Procedure'             => array(
                'className'              => 'Procedure',
                'joinTable'              => 'patient_cases_procedures',
                'foreignKey'             => 'patient_case_id',
                'associationForeignKey'  => 'procedure_id',
                'unique'                 => true
            )
    );
}

class Procedure extends AppModel {
    public $belongsTo = array(
            'Consultant'        => array(
                'className'     => 'Consultant'
            )
        );

}

class Consultant extends AppModel {
    public $belongsTo = array(
            'Specialty' => array(
                'className'     => 'Specialty',
                'conditions'    => array('Specialty.active' => 1)
            )
        );
    public $hasMany = array(
            'Procedure'
        );
}
class Specialty extends AppModel {
    public $hasOne = array(
            'Consultant'
        );
    );
}

$this->set('patientCases', $this->PatientCase->find('all')); 
```

返回我需要的所有内容，返回每个模型数组（此处未提及其他关系），但是不返回模型数组“顾问”，这也意味着我无法获取链接到“顾问”模型的“专业”数据

**编辑** 我已经设法通过在我的 PatientCasesController 中使用它来获取我需要的数据

```
$this->set('patientCases', $this->PatientCase->find('all'));
$this->set('patientCaseProcedures', $this->PatientCase->Procedure->find('all')); 
```

但是，理想情况下，我想在一个“患者案例”中返回所有内容，这可能吗？

**编辑** 我已经使用递归函数解决了这个问题

```
$this->PatientCase->recursive = 3; 
$this->set('patientCases', $this->PatientCase->find('all')); 
```

# objective-c - Accessing ivar of an instance of the same class in a class method

> ID：14713284
> 
> 赞同：0
> 
> 时间：2013-02-05T17:23:54.293
> 
> 标签：objective-c, cocoa-touch, cocoa

Edit 2: In addition to Kurt's solution, there is one more way to do it. Take a look at the end of this page, just before comments: [http://www.friday.com/bbum/2009/09/11/class-extensions-explained/](http://www.friday.com/bbum/2009/09/11/class-extensions-explained/)

* * *

Edit: It seems class methods in a class category cannot access private members such as ivars and private methods that are implemented through class extensions.

* * *

I hope this question is not asked and answered before, but I could not find one as both stackoverflow and Google search spams my browser window with kinds of questions that ask to access an ivar directly from a class method, which is clearly not my intention.

Straight to the problem, I'll provide a piece of code, which summarizes what I'm trying to accomplish:

* * *

XYZPerson.h:

```
@interface XYZPerson : NSObject
@property (weak, readonly) XYZPerson *spouse;
@end 
```

XYZPersonMariage.h:

```
@interface XYZPerson (XYZPersonMariage)
+(BOOL)divorce:(XYZPerson *) oneOfSpouses;
@end 
```

XYZPersonMariage.m

```
+(BOOL)divorce:(XYZPerson *)oneOfSpouses
{
  XYZPerson *otherSpouse = [oneOfSpouses spouse];
  if(otherSpouse != nil)
  {
    oneOfSpouses->_spouse = nil;
    otherSpouse->_spouse = nil;
    return true;
  }
  return false;
} 
```

I first thought that maybe an ivar is not automatically synthesized for a property flagged readonly, but it is indeed synthesized.

So, what paths can I take to get the job done?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:46:55.113

Your method `+[XYZPerson divorce:]` is defined in `XYZPersonMarriage.m`, which is a different compilation unit than `XYZPerson.m` where the rest of `XYZPerson` is implemented.

Because of this, when compiling `+divorce:`, the compiler doesn't know there's an implicitly synthesized `_spouse` variable. For all it knows, the property could be backed by a method `-spouse` that you implemented.

Ways to get around this:

*   Move the implementation of `+divorce` into `XYZPerson.m`.

*   Don't access ivars directly, but do the work via real methods. They don't have to be part of the usual public interface of the class; they can be exposed via a separate header file that only `XYZPersonMarriage.m` imports. Search for "Objective-C private method" for more discussion on the pros and cons of that pattern.

# mono - Scripts installed by the deb package have wrong prefix

> ID：14713288
> 
> 赞同：1
> 
> 时间：2013-02-05T17:24:01.813
> 
> 标签：mono, debian, packaging, deb

Building our own deb packages we've run into the issue of having to patch manually some scripts so they get the proper prefix.

In particular,

*   We're building [mono](https://github.com/mono/mono)
*   We're using official tarballs.
*   The scripts that end up with wrong prefix are: [mcs](https://github.com/mono/mono/blob/master/scripts/mcs.in), xbuild, nunit-console4, etc

An example of a wrong script:

```
#!/bin/sh
exec /root/7digital-mono/mono/bin/mono \
      --debug $MONO_OPTIONS \
      /root/7digital-mono/mono/lib/mono/2.0/nunit-console.exe "$@" 
```

What should be the correct end result:

```
#!/bin/sh
exec /usr/bin/mono \
      --debug $MONO_OPTIONS \
      /usr/lib/mono/2.0/nunit-console.exe "$@" 
```

The workaround we're using in our [build-package](https://github.com/7digital/7digital-mono/blob/master/build-package) script before calling dpkg-buildpackage:

```
sed -i s,`pwd`/mono,/usr,g $TARGET_DIR/bin/mcs
sed -i s,`pwd`/mono,/usr,g $TARGET_DIR/bin/xbuild
sed -i s,`pwd`/mono,/usr,g $TARGET_DIR/bin/nunit-console
sed -i s,`pwd`/mono,/usr,g $TARGET_DIR/bin/nunit-console2
sed -i s,`pwd`/mono,/usr,g $TARGET_DIR/bin/nunit-console4 
```

Now, what is the CORRECT way to fix this? Full debian package creation scripts [here](https://github.com/7digital/7digital-mono/).

Disclaimer: I know there are preview packages of Mono 3 [here](https://www.meebey.net/posts/mono_3.0_preview_debian_ubuntu_packages/)! But those don't work for Squeeze.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T08:29:42.420

the proper way is to *not* call `./configure --prefix=$TARGET_DIR`

this tells all the binaries/scripts/... that the installated files will end up in `${TARGET_DIR}`, whereas they really should endup in `/usr`.

you can use the `DESTDIR` variable (as in `make install DESTDIR=${TARGET_DIR}`) to change (prefix) the installation target at install time (files will end-up in `${TARGET_DIR}/${prefix}` but will only have `${prefix}` "built-in")

# c# - 在运行时使用反射（+hack）读取方法值？

> ID：14713290
> 
> 赞同：3
> 
> 时间：2013-02-05T17:24:03.070
> 
> 标签：c#, .net, reflection

*简短的：*

我们有一个接受参数的 C# 方法。

在那个方法里面我们需要添加Sql参数（根据*方法*参数）。

它实际上看起来像这样：http: [//i.stack.imgur.com/QP1y2.jpg](https://i.stack.imgur.com/QP1y2.jpg)（放大） ![在此处输入图像描述](../Images/f17249252f344f86d08be34c21670c8b.png)

**请注意**

我可以编写一个包含所有方法参数的类。但是，我将不得不为每个 SP 创建一个类容器（我们有很多）。

好的，让我们继续。

我在想自己：“**为什么**我要[手动插入每个参数](http://msdn.microsoft.com/en-us/library/bb748677%28v=pandp.31%29.aspx)- 如果我已经在方法参数中拥有它的 : `name`, `type`, `value`？我不想这样做，也许反射会为我做这件事”（*让我们暂时离开的转换`int <->DbType.Int32`*）

但是我遇到了一个问题。使用反射**无法**读取值。

但是，我**确实**设法通过反射通过 hack 读取值。

1）我做了这个例子：（模拟真实场景）

```
public static void MyMethod(int AddressId, string countryId, DateTime dt) //these are the arguments which need to be attached later
{

 MethodBase mi = MethodInfo.GetCurrentMethod();
 var hack = new {AddressId, countryId, dt}; //this is the HACK

var lstArguments = mi.GetParameters()  //get the parameter  name and types
                    .Select(p => new {
                                 name = p.Name  , type=p.GetType().Name
                                 }).ToList();

List < dynamic > lstParamValues= new List < dynamic > ();

foreach(PropertyInfo pi in hack.GetType().GetProperties())  //get the value(!!!) of each param 
{

       lstParamValues.Add(pi.GetValue(hack, null));
}

  dynamic dyn= myDBInstance; // get dynamic reference to the DB class instance ( 

for(int i = 0; i < lstArguments .Count; i++) //dynamically Invoke the method with param name+value.
{
    dyn.AddInParameter(lstArguments [i].name, ((lstParamValues[i] is int) ? DbType.Int32 : DbType.String), lstParamValues[i]);
}

} 
```

还有**DB类**（**模拟**`AddInParameter`看我是否得到值）

```
class myDB
{
    public void AddInParameter(string name, DbType dbt, object val)
    {
        Console.WriteLine("name=" + name + "    " + "DbType=" + dbt + "    " + "object val=" + val);
    }
} 
```

**它正在工作：**

我使用以下方法执行了该方法：

```
MyMethod(1, "2", DateTime.Now); 
```

输出是：

```
name=AddressId    DbType=Int32    object val=1
name=countryId    DbType=String    object val=2
name=dt    DbType=String    object val=05/02/2013 19:09:32 
```

一切都好。

**C# 问题**

我怎样才能克服这个黑客：

```
 var hack = new {AddressId, countryId, dt};  //  the method arguments names 
```

在我的示例中，我将其编写为硬编码。

反射方法`GetValue`仅因为这条线而起作用。

我可以做些什么来在运行时将方法参数名称添加为属性，这样我就可以做到：

```
 foreach(PropertyInfo pi in SOMETHING.GetType().GetProperties()) 
   {
   } 
```

请将此问题视为 ac# 问题而不是 ORM 问题。

另外，如果你想玩运行示例代码（只需粘贴到控制台项目中）：http: [//jsbin.com/azicut/1/edit](http://jsbin.com/azicut/1/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:49:08.913

这是否提供了一些缓解？

执行一次（在 DAL ctor 中）：

```
SqlParameter sqlCmdFTSindexWordOnceParam = sqlCmdFTSindexWordOnce.Parameters.Add("@sID", SqlDbType.Int);
sqlCmdFTSindexWordOnceParam.Direction = ParameterDirection.Input;
SqlParameter sqlCmdFTSindexWordOnceParam2 = sqlCmdFTSindexWordOnce.Parameters.Add("@sIDpar", SqlDbType.Int);
sqlCmdFTSindexWordOnceParam2.Direction = ParameterDirection.Input; 
```

然后在通话中：

```
sqlCmdFTSindexWordOnceParam.Value = wdc.sID;
sqlCmdFTSindexWordOnceParam2.Value = wdc.sIDpar;                                    
sqlCmdFTSindexWordOnce.BeginExecuteNonQuery(callbackFTSindexWordOnce, sqlCmdFTSindexWordOnce); 
```

比为每个调用添加参数更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:55:25.987

`AddWithValue`至少可以让您免于编写类型名称。

```
 command.Parameters.AddWithValue("@demographics", demoXml); 
```

但是你真的不应该将那么多参数传递给函数。一个简单的[DTO](http://en.wikipedia.org/wiki/Data_transfer_object)类可以使您的代码更具可读性。如果我没记错的话，您正在寻找类似于 pyhton 的东西`locals`（[需要类似于 python 中的 locals](https://stackoverflow.com/questions/3504118/need-something-like-locals-in-python)的东西），它为您提供函数的局部变量作为键值对，据我所知，您不能在 c# 中执行此操作。

或者您简单地不传递所有变量，您只需传递 a`Dictionary<string,object>`并将键值添加到 SqlParameter

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-02-05T17:38:31.190

我不熟悉 c# 和 .net 的工作原理，但如果这是 java，我会说：

将当前参数存储到数组列表或映射中

你可以有 3 个数组列表，一个用于进入 addInParameters 方法调用的每个参数，或者一个包含所有值的映射（类型参数需要像现在一样有一些重复）

在插入/更新方法中使用数组列表作为唯一参数 使用 for 循环，以便 AddInParameter 调用只写入一次，参数类似于 (array1[0], array2[0], array3[0]) 而不是比实际值。

在 php 中你可以使用关联数组，.net 有关联数组吗？

# google-apps-script - 如何获取arguments.callee.caller？

> ID：14713292
> 
> 赞同：4
> 
> 时间：2013-02-05T17:24:05.100
> 
> 标签：google-apps-script

我试图找出调用我的 Google Apps 脚本函数的函数的名称，方法是使用`arguments.callee.caller`如何[在 JavaScript 中找出调用者函数？](https://stackoverflow.com/questions/280389/how-do-you-find-out-the-caller-function-in-javascript)，但似乎没有导出此类属性。（但是，`arguments.callee`存在。）

如何在 Google Apps 脚本中获取该调用函数的名称？

作为次要问题，为什么不`arguments.callee.caller`存在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-03-08T18:15:59.073

我做了这个功能：

```
function getCaller()
{
  var stack;
  var ret = "";
    try 
    {
      throw new Error("Whoops!");
    } 
    catch (e) 
    {
      stack = e.stack;
    }
    finally
    {
      var matchArr = stack.match(/\(.*\)/g);
      if (matchArr.length > 2)
      {
        tmp = matchArr[2];
        ret = tmp.slice(1, tmp.length - 1) + "()";
      }
      return ret;
    }
} 
```

它作为 Error() 抛出，然后从堆栈跟踪中获取函数名称。使用包装器时，尝试改变 matchArr[2] 中的“2”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:32:02.083

caller 是 JavaScript 的非标准扩展（也就是说，许多浏览器都有它，但它不是 EcmaScript 标准的一部分）并且没有在 Apps 脚本中实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-14T16:10:01.997

这是我对其他两个建议解决方案的更新版本：

```
const getStacktrace = () => {
  try {
    throw new Error('')
  } catch (exception) {
    // example: at getStacktrace (helper:6:11)
    const regex = /\sat (.+?) \((.+?):(\d+):(\d+)\)/

    return exception
      .stack
      .split('\n')
      .slice(1, -1)
      .filter((frame, index) => {
        return frame && index > 0
      })
      .map((frame) => {
        const parts = frame.match(regex)

        return {
          function: parts[1],
          file: parts[2],
          line: parseInt(parts[3]),
          column: parseInt(parts[4])
        }
    })
  }
} 
```

PS：请不要因为正则表达式发生了变化，而且我们忽略了堆栈跟踪的第一个元素，因为它是 getStacktrace 函数本身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-08T17:50:44.840

我根据 jgrotius 的回答做了一个函数来获取调用堆栈：

```
 function getCallStack()
  {
    var returnValue = "";
    var framePattern = /\sat (.+?):(\d+) \((.+?)\)/;
    try 
    {
      throw new Error('');
    } 
    catch (e) 
    {
      returnValue = e.stack
      .split('\n')
      .filter(function(frame, index) {
        return !frame.isBlank() && index > 0;
      })
      // at app/lib/debug:21 (getCaller)
      .map(function(frame) {
        var parts = frame.match(framePattern);
        return {
          file: parts[1],
          line: parseInt(parts[2]),
          func: parts[3]
        };
      });
    }
    return returnValue;
  } 
```

# javascript - 根据不规则边界点确定区域

> ID：14713296
> 
> 赞同：1
> 
> 时间：2013-02-05T17:24:11.700
> 
> 标签：javascript, algorithm, math

所以说我得到了一组点：

```
0, 0
0, 5
5, 5
5, 3
4, 3
4, 2
5, 2
5, 0
0, 0 
```

这些点构成了形状/对象的边界

该对象如下所示：

```
 __________
|          |
|        __|
|       |__
|          |
|__________| 
```

如何在数学上确定面积？（在示例中为 24 ..）

另外更重要的是，如何在数学上确定每个 1 单位乘以 1 单位的盒子内部的 x、y 坐标？（在示例中，某些框的坐标位于 (0,0)、(0, 1)、(0, 2) 等...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:28:38.053

如果形状是**凸**的，您可以将其分解为三角形，然后将所述三角形的面积相加。

如果形状都是矩形（如您的示例中所示），那么您只需要将每行的起点和终点之间的范围相加。

如果形状是凹形的，那么难度会大大增加。更多信息在这里：

[http://math.tutorvista.com/geometry/concave-polygon.html](http://math.tutorvista.com/geometry/concave-polygon.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:28:59.540

从数学上讲，如果您只有顶点，则不能。顶点的集合并不是每个定义都描述了一个唯一的多边形。要获得对象的这种独特描述，您还需要顶点之间的边。只有这样，您才能确定可以计算所定义多边形的表面积。

因此，在您的示例中，您可以通过仅在顶点数组中的两个连续顶点之间定义边来解决此问题。不知道你的情况是不是这样。

# c# - “标准表达式中的数据类型不匹配。” 错误

> ID：14713299
> 
> 赞同：0
> 
> 时间：2013-02-05T17:24:23.037
> 
> 标签：c#, types, expression, oledb, mismatch

我收到“标准表达式中的数据类型不匹配”。在一个数据库上运行此代码时出错，但在另一个数据库上运行良好。当试图将相关表复制到其他数据库并从他那里运行时，程序再次失败！

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Project
{
public partial class Login : Form
{
    public Login()
    {
        InitializeComponent();
    }

    private void Login_Load(object sender, EventArgs e)
    {

    }

    private void label1_Click(object sender, EventArgs e)
    {

    }

    private void LoginButton_Click(object sender, EventArgs e)
    {
        DAL conn = new DAL(@"|DataDirectory|\ProjectDB.accdb");
        DataSet ds = conn.GetDataSet("Select * from Secretarys where SecretaryUsername = "+UserNameBox.Text.ToString());
        if (ds.Tables[0].Rows[0][0].ToString().Equals(PassowrdBox.Text))
            MessageBox.Show("asd","sdfa");
    }
}
} 
```

我正在使用的“DAL”类。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data;
using System.Data.OleDb;

/// <summary>
/// Summary description for DAL
/// </summary>
public class DAL
{
private string dbPath;
private OleDbConnection conn;
private OleDbCommand command;
private OleDbDataAdapter adapter;
private string stQuery;

public DAL(string dbPath)
{
    this.dbPath = dbPath;
    string ConnectionString = string.Format(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0}", this.dbPath);
    conn = new OleDbConnection(ConnectionString);
    command = new OleDbCommand(stQuery, conn);
    adapter = new OleDbDataAdapter(command);
}

public DataSet GetDataSet(string strSql)
{
    DataSet ds = new DataSet();
    command.CommandText = strSql;
    adapter.SelectCommand = command;
    adapter.Fill(ds);
    return ds;
}
public bool InsertRow(string sqlInsert)
{
    int rowsEffected;
    command.CommandText = sqlInsert;
    conn.Open();
    rowsEffected = command.ExecuteNonQuery();
    conn.Close();
    return (rowsEffected > 0);

}

public string GetData(string strSql)//שולפת נתונים מהטבלת המשתמשים שנמצאת באקסס
{
    string st = "";
    DataSet ds = new DataSet();
    command.CommandText = strSql;
    conn.Open();
    st = command.ExecuteScalar().ToString();
    conn.Close();
    return (st);
}

public void UpdateRow(string sqlInsert)//הוספת נתונים לטבלת החברים באקסס
{

    command.CommandText = sqlInsert;
    conn.Open();
    command.ExecuteNonQuery();
    conn.Close();

}
public void DeleteDataSet(DataSet ds)
{

    OleDbCommandBuilder builder = new OleDbCommandBuilder(adapter);
    adapter.DeleteCommand = builder.GetDeleteCommand();
    conn.Open();
    adapter.Update(ds);
    conn.Close();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T10:16:59.080

使用 OleDb（如您所用） Criteria Mismatch 通常意味着您尝试放入数据库的数据无法被接受，因为数据库需要不同类型的数据。（即，数据库需要一个整数，而您将其传递给它。）这可能有点烦人，但您需要仔细检查数据库中列的所有数据类型，以确保您发送的内容它可以处理。

在这种情况下......也许SecretaryUsername的数据库列实际上不是一个字符串？这看起来很奇怪，但众所周知。一些数据库设计人员会命名一个这样的字段，即使它包含一个整数（与自动编号匹配）您必须查看数据库的预期数据类型才能确定

# c# - 这些是什么类型的测试，应该编写它们吗？

> ID：14713303
> 
> 赞同：1
> 
> 时间：2013-02-05T17:24:30.027
> 
> 标签：c#, testing

我们最近开始讨论测试。我们想要的测试类型之一是某种功能或验收测试。希望是减少浪费的开发并拥有一些可自我验证的软活文档。我们作为概念证明提出的示例是构建一个 http 客户端，我们选择这个是因为它很快就会变得非常复杂，如果你不小心，你可能会在几天内开发，添加一些小的边缘案例处理程序等.

考虑到这一点，我们坐下来创建一个功能列表，该列表将完全涵盖我们需要的功能，仅此而已。当您查看此“规范”时，它不包括接口抽象或配置之类的东西，事实上，一个漂亮的流畅接口会将大多数项目从列表中剔除。

所以现在提示对我闪烁，我不知道该写什么。我之前做过单元测试，但我们发现这些对于更大的对象或以更有凝聚力的方式进行测试是缺乏的，如果你创建了某种场景并验证它通过了。不要把这误认为是对单元测试的打击，我想它更多地与我们有关，而不是与单元测试有关。随便

在我的脑海中，我正在考虑以下内容。

*   写一个场景，一个例子会是这样的：

    ```
    Create a new http request. 
    This request should should be a GET request.
    It should have no body.
    It should have reasonable defaults already defined. 
    ```

*   实现场景：

    ```
    var request = 
    new httpRequest().UsingMethod(HttpMethods.Get)
                     .WithDefaultHeaders(); 
    ```

不过，我对此感到担忧。一方面，它完美无缺。我已经满足了这个场景，我可以添加更多的场景来感受其他的需求。另一方面，我通常会先开发出整个东西然后进行测试，所以感觉就像我正在失去对功能架构的控制。

**我想知道的是：**

*   这种测试正常吗，有没有人用，有名字吗？

*   我是否走在正确的道路上，或者这是否会以我做出大量的架构假设而告终？

*   在进行此类测试或规范时，架构适合哪里。很高兴有一个完成的定义，就像上面一样（满足规范）但是沿着这条线的某个地方必须完成某种架构，对吗？

最后。我想保持这个工具不可知论。我们正在使用 C# 和 xUnit，并且在我们确定基线时真的不想增加任何复杂性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:47:46.933

对我来说，这听起来像是一个组件测试。对于 HTTP 请求要考虑的一件事，不要只是寻找 OK 响应，还要进行快速的内容检查。如果您期望格式良好的 HTML 返回可能会寻找出现在静态错误页面上的唯一单词或短语，或者如果您期望 JSON 或 XML 认为正确的响应看起来像是错误的诗句。

# java - AWT：立即计算组件尺寸

> ID：14713304
> 
> 赞同：1
> 
> 时间：2013-02-05T17:24:32.867
> 
> 标签：java, awt, thinlet

我目前正在修复（相当旧的）应用程序中的错误：

它涉及具有延迟加载功能和快速搜索文本字段的树。假设以下场景：

1.  有人在快速搜索文本字段中键入字符串
2.  这会导致查询被发送到后台服务器，使用输入的名称搜索可用的树节点，并以下拉样式提供它们。
3.  用户从下拉列表中选择一个项目。
4.  树中所选元素路径中的所有节点都被展开，导致延迟加载树加载……嗯……一堆节点。
5.  树（有一个滚动条）滚动，以便选定的元素将在视图中。

第 1 步到第 4 步工作得很好，但第 5 步只有在树不需要延迟加载元素但之前已经加载过树的情况下才有效。

经过一段时间的调试，我发现这是因为计算滚动量的代码使用了代表树节点的 AWT 元素的尺寸。但是，如果元素是延迟加载的，则尚未计算尺寸，因此代码无效。我猜尺寸计算将在重绘方法期间发生。或者无论如何：为时已晚。

如何让 AWT 立即计算组件尺寸？

该代码在 AWT 之上使用[Thinlet 。](http://thinlet.sourceforge.net "细小")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:11:03.727

看起来您的问题更多的是在 Thinlet 方面，而不是在 AWT 方面。看起来这是 Thinlet 中的一个错误。Thinlet 确实尝试在进行实际滚动之前对要滚动到的节点进行布局，但这对于节点没有正确实现。

使用以下补丁使 Thinlet 在您的情况下正常工作：

```
--- Thinlet.java        2005-03-28 18:15:28.000000000 +0200
+++ Thinlet_new.java    2013-02-06 16:06:23.707530066 +0100
@@ -166,6 +166,10 @@

        private void doLayout(Object component) {
                String classname = getClass(component);
+               while ("node" == classname) {
+                 component = getParent(component);
+                 classname = getClass(component);
+               }
                if ("combobox" == classname) {
                        if (getBoolean(component, "editable", true)) {
                                Image icon = getIcon(component, "icon", null); 
```

# php - 如何进行此 mysql 查询

> ID：14713307
> 
> 赞同：1
> 
> 时间：2013-02-05T17:24:45.060
> 
> 标签：php, mysql, sql

我正在尝试建立一个登录系统。但是当我为它创建查询时遇到问题。我将简要解释我需要的是什么。我已经得到`username`并`password`形成登录表格。现在我需要用我的登录表天气检查这些值是否存在于表中。以及我需要检查用户的注册是否已过期或不在使用`tutors , institutes and students`表的同一查询中。学生注册不会过期。此外，我需要检查他们的个人资料是否已激活或未使用`active`导师和机构表格中的列。同样，学生表没有列“ `active`”。他们不需要激活他们的个人资料。

这些是我需要从查询中获取的列。

```
login_id // From login table
username // From login table
login_type // From login table
date-expire true or false // From tutors or institute or student. 
```

我尝试过类似这样的方法，但对如何在同一个查询中将所有表附加在一起感到困惑。

```
$q = "SELECT login_id, username, login_type, IF(date_expires >= NOW(), true, false) 
        FROM login
        INNER JOIN tutors ON login.login_id = tutors.login_id
        INNER JOIN institutes ON login.login_id = institutes.login_id
        WHERE (username='$username' AND password='"  .  get_password_hash($password) .  "' 
                AND (tutors.active IS NULL || institutes.active IS NULL))"; 
```

但是这个查询不起作用。谁能告诉我我犯了什么错误？

这是我的表结构

```
CREATE TABLE login (
login_id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
username VARCHAR(30) NOT NULL, 
password VARBINARY(32) NOT NULL,
login_type ENUM('tutor', 'institute', 'student') NOT NULL,
PRIMARY KEY (login_id)
)

CREATE TABLE institutes (
institute_id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
login_id SMALLINT UNSIGNED NOT NULL,
active CHAR(32),
date_expires DATE NOT NULL,
date_registered TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY (institute_id)
)   

CREATE TABLE tutors (
tutor_id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
login_id SMALLINT UNSIGNED NOT NULL,
active CHAR(32),
date_expires DATE NOT NULL,
date_registered TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY (tutor_id)
)

CREATE TABLE students (
student_id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT,
login_id SMALLINT UNSIGNED NOT NULL,
date_registered TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY (student_id)
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:48:13.950

编辑：

```
$q = "SELECT l.login_id, l.username, l.login_type, t.date_expires
FROM login AS l
INNER JOIN tutors AS t ON l.login_id = t.login_id
WHERE l.username='$username' AND l.password='" . get_password_hash($password) . "'
AND t.date_expires >= NOW()
AND t.active IS NULL"; 
```

我已经拆分了您的查询。这只是您问题答案的开始。我仍然不清楚您需要的所有要求。

如果您可以发布一些具有所需输出的示例数据，我将能够为您提供进一步的帮助。

# jquery - 使用 jQuery 从父文档单击动态 iframe 内的链接

> ID：14713309
> 
> 赞同：0
> 
> 时间：2013-02-05T17:25:13.600
> 
> 标签：jquery, iframe, hyperlink

我有一个动态添加 iframe 的页面，iframe 正文中有一个链接。

如何通过 click() 函数在父页面上使用 jquery 单击 iframe 中仅在页面加载后出现的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:36:05.757

如果您不在同一个域中，那么由于[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)可能无法实现。

如果您在同一个域中，

```
$('#iFrameID').contents().find('#linkID').click(); 
```

应该管用。希望该代码所做的是自我解释。

如果您不在同一个域中，您可以将 HTML“欺骗”到您自己的域中。看到[这里](https://stackoverflow.com/questions/364952/jquery-javascript-accessing-contents-of-an-iframe)..实际上基本上这个问题。

**编辑：**

问题实际上是“加载 iFrame 后如何访问它？”

当 iFrame 中的页面加载时，您需要某种调用函数。有关一些示例，请参见[此处](https://stackoverflow.com/questions/5315065/jquery-wait-for-two-iframes-to-load)。

# tridion - 动态页面上的 Tridion UI

> ID：14713314
> 
> 赞同：5
> 
> 时间：2013-02-05T17:25:26.983
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我创建了一个动态查询代理数据库的页面，并基于过滤器在运行时显示组件表示。我在页面上使用了 Tridion UI 来编辑组件。

现在由于页面上的内容是动态的，我不想使用“创建和插入内容”功能，因为它会创建组件，并且它会尝试在页面上插入我不想要的组件。

有什么方法可以让我使用动态 CP 禁用页面的“插入内容”和“新页面”功能？

我想要的只是能够使用所需内容类型的“创建内容”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T13:24:59.983

功能区工具栏中的按钮具有与之关联的命令。通过单击按钮，将调用命令。存在扩展现有命令的受支持方式。因此，您可以为 Insert Conter 和 New Page Buttons 创建命令扩展，这将覆盖“isEnabled”方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T17:15:14.040

米纳克希。您可以使用配置设置禁用和/或隐藏这些按钮/功能。正如 Vikas 指出的那样，就在特定上下文中禁用它们而言，您必须查看某种 GUI 扩展，在呈现界面时检查页面/cps 的上下文并相应地采取行动。

此链接包含一些关于 GUI 扩展的一般参考点。：[如何在 Tridion 的功能区中创建自定义按钮](https://stackoverflow.com/questions/11560300/how-to-create-a-custom-button-in-the-ribbon-of-tridion/11560652#11560652)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T07:57:53.433

我相信没有开箱即用的功能可以在任何特定模板类型上禁用这些选项。您可能需要添加 GUI Extn 来禁用这些选项。

# database - 收集网站上的用户活动数据

> ID：14713316
> 
> 赞同：2
> 
> 时间：2013-02-05T17:25:30.057
> 
> 标签：database, design-patterns, analytics

我目前正在开发一个 Web 应用程序，并且客户希望存储有关网站上用户活动的数据。这超出了 Google Analytics 所能提供的范围。

我目前有一个非常简单的数据库结构，其中包含最少数量的表，这些表都与网站的核心功能相关。

我有点不情愿在数据库模式中添加大量表来记录用户活动。并且还通过添加服务来记录网站上的用户活动来混淆代码库。

他们想要记录的示例如下：

*   现有用户的登录
*   用户显式注销
*   管理员重置密码
*   用户重置/更改密码
*   更改用户帐户（例如，如果我们有个人资料，则授予/删除管理员权限或个人资料更改）

他们可能还想记录

*   在搜索表单中输入的搜索参数
*   访问任何（内容）页面
*   选择任何（内容）链接
*   语言选择

所以我的问题是：

*   我应该将此功能添加到数据库和项目中吗？
*   我是否应该尽可能将其分开，可能将此分析数据存储在单独的数据库中，或者可能在不同的模式中，为分析服务创建一个单独的项目。
*   还有选择吗？

我只是觉得记录这些数据会使代码库和数据库变大，而且收益很小……。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T03:21:50.700

将此功能添加到您的项目中。但不能进入你的数据库。相反，将其存储为日志。

我从不喜欢将其放入您的数据库（尤其是您的生产数据库）中的想法，因为对该数据库的任何查询都会影响您的系统性能。

但是，您还需要创建一个批处理作业来读取此日志，并从中生成任何必要的数据。

如果日志变得这么大，你应该去[Map Reduce](http://en.wikipedia.org/wiki/MapReduce)方法。使用 Hadoop、Hive 或任何类似产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:35:33.230

我至少会考虑制作一个通用表来记录任何活动。就像是：

```
 event_id int,
event_name nvarchar(100),
event_date smalldatetime,
user_id int,
source_page nvarchar(100),
additional_info nvarchar(5000) 

```

你可以让它涵盖我想象的大多数用例。只是在最后抛出一个大文本字段的想法，您可以在其中编写一些序列化的 JSON。它只是一个可以存储一些结构化文本的 blob。

按照同样的思路，您可以创建一个单独的数据库来存储无模式数据，这将更容易写入，并且如果您以后想取消注销，则不必修改现有数据库。

还可以查看面向方面的编程以进行日志调用。这可以使您的方法非常干净，同时允许记录和事件。对于 Java，可能是 Aspect J ( [http://eclipse.org/aspectj/](http://eclipse.org/aspectj/) )，对于 .NET，可能是 PostSharp ( [http://www.sharpcrafters.com/aop.net](http://www.sharpcrafters.com/aop.net) )。

无论如何，就像你说的那样，我会实现一些占用空间小的东西，可以很容易地移除。

# javascript - Chrome控制台输出中的“小于点”符号是什么意思？

> ID：14713320
> 
> 赞同：8
> 
> 时间：2013-02-05T17:25:50.420
> 
> 标签：javascript, google-chrome, console

有时，但并非总是如此，当 Chrome JavaScript 控制台中的评估结果导致“未定义”时，左边距中有一个符号，看起来像一个带点的小于号。

示例可以在[Chrome 开发者工具文档的这一部分中](https://developers.google.com/chrome-developer-tools/docs/console#controlling_the_cpu_profiler)看到。

但该符号的含义似乎从未得到解释。有人知道它想表达什么吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T17:40:13.083

每当在命令行上运行一组函数时，控制台输出的最后一行始终是输入中最后一个操作的返回值。当命令执行开始后有控制台输出时，该符号调用函数的返回值。这是为了避免在这种情况下产生混淆：

```
function logVar(someVar) {
    console.log(someVar);
} 
```

当您`logVar`在控制台上运行时，它会输出`someVar`. `logVar`但是，也记录了 的返回值（此处为`undefined`）。将返回值与记录的变量在视觉上区分开来是很有帮助的，因此您不必查看输出的最后一行并想知道“为什么是我的变量`undefined`？”。

# tridion - 从自定义 URL 页面中删除多值字段中的所有项目

> ID：14713321
> 
> 赞同：1
> 
> 时间：2013-02-05T17:25:52.190
> 
> 标签：tridion, tridion2009, custom-url

我有一个自定义 URL，它从多值文本字段中加载所有字段以进行修改。

单击保存按钮时，它应该更新所有字段，但目前它所做的只是添加其他参数而不是更新现有参数，我将如何删除所有准备重新填充的现有值。

我的保存功能看起来像这样

```
function SaveAndClose()
{
    var returnValues = new Array();

    var selectobject=document.getElementById("FeedItem")
    for (var i=0; i<selectobject.length; i++)
    {
        if (selectobject.options[i].value != '')
        {
            returnValues.push(selectobject.options[i].text);
        }
    }
    window.returnValue = returnValues;
    self.close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T18:01:27.533

IIRC :) 多值字段的自定义 URL 弹出窗口的返回值是一个字符串数组。

因此，只需返回一个空数组，这实际上应该删除该字段的所有值。

**编辑：**

我不久前采取的方法是弄乱 Tridion 组件窗口的 DOM 结构。因此，在我的弹出代码中，我将处理“父”窗口并使用 JavaScript（jQuery 会做得很好）识别您想要的字段并删除其所有“多值”子节点。然后只需在你的 JS window.returnValue 中返回数组，它应该用你想要的值填充它。

不幸的是我找不到我几年前写的代码......所以你自己......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:58:11.783

这可以通过 SDL Tridion 2011 中引入的新 API 实现，但我认为您在 2009 年无法做到。

### 来自 SDL Tridion 2009 SP1 内容管理实施手册

（第 9.15.3 节，使用自定义 URL 填写字段值）

多值字段 - 应使用数组作为 returnValue。数组中的每个条目代表一个要**插入**到字段中的值。

# c# - 如何保持矩形工具的比例

> ID：14713322
> 
> 赞同：1
> 
> 时间：2013-02-05T17:25:57.227
> 
> 标签：c#, wpf, geometry

我正在尝试实现一个选择工具，例如 gimp 或 photoshop 等流行图形编辑器中的选择工具，如果您在选择时按 Shift，它会保持一个比例。下面的代码是它的主要部分，为了简单起见，我把它保持为一个正方形。代码是计算鼠标位置，移动 Block 类的 X,Y 位置，然后调整它的宽度和高度。如果按下 Shift，它会形成一个正方形。如果我从右下或左下方向移动，它几乎可以正常工作，但在其他情况下，它会改变整个块的位置。任何解决方案？

```
 private void ItemsControl_MouseMove(object sender, System.Windows.Input.MouseEventArgs     e)
{
    if (((ItemsControl)sender).IsMouseCaptured)
    {
    Block = new Block();

    Point mpi = GuidesSnap(e.GetPosition((ItemsControl)sender));

    double dx = mpi.X - mp.X;
    double dy = mpi.Y - mp.Y;

    switch (draggingState)
    {
        case 0:
        if (Math.Sqrt(dx * dx + dy * dy) > 2)
        draggingState = 1;
        break;
        case 1:
        block.X = (int)Math.Round(mp.X);
        block.Y = (int)Math.Round(mp.Y);
        block.Width = 3;
        block.Height = 3;
        draggingState = 2;
        break;
        case 2:
        if (dx < 0)
        {
            block.X = (int)Math.Round(mp.X + dx);
        }
        if (dy < 0)
        {
            block.Y = (int)Math.Round(mp.Y + dy);
        }
        block.Width = (int)Math.Abs(Math.Round(dx));
        block.Height = Keyboard.Modifiers == ModifierKeys.Shift ? block.Width : (int)Math.Abs(Math.Round(dy));
        break;
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:54:55.200

如果您想保持某物的比例，那么您只需根据另一个坐标计算一个坐标。因此，随着 X 的变化，您将 Y 设置为等于 (AspectRatio * X)。或者，您可以使用勾股定理来计算距起点的距离，然后使用它来计算 X 和 Y - 但中心点是相同的：要保持纵横比，您需要至少一个基于值的变量另一个。

# c# - ( C# / VB FFMPEG Wrapper ) 如何解析视频到音频的转换进度？

> ID：14713323
> 
> 赞同：1
> 
> 时间：2013-02-05T17:25:59.903
> 
> 标签：c#, vb.net, ffmpeg, wrapper

我会尽量具体化。

我搜索了很多以找到一个好的 .net FFMPEG 包装器，最好的是[VB FFmpeg Wrapper](http://vbffmpegwrapper.codeplex.com/ "我用过的最好的 FFMPEG 包装器！")

我很不擅长使用 VB.net，问题是我想在 C# 项目中使用这个库，但我无法将我找到的示例程序从 VB.net 正确转换为 C#。

所以，我编辑了我的 C# 应用程序，所以它将输入视频文件路径写入临时 .txt 文件..然后运行“转换器”（用 VB 编写）！

我的“转换器”的代码：

```
Imports System
Imports System.IO

Public Class Form1
    Public WithEvents MediaConverter As New FFLib.Encoder

    Private Sub ConOut(ByVal prog As String, ByVal tl As String) Handles MediaConverter.Progress
        OperationPrgrss.Value = prog
        Application.DoEvents()
    End Sub

    Private Sub stat(ByVal status) Handles MediaConverter.Status
        StatusLbl.Text = status
        Application.DoEvents()
    End Sub

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        Try
            Using PathFinder As New StreamReader("_temp.txt")
                Dim SrcPath As String
                SrcPath = PathFinder.ReadLine()
                PathTxtBox.Text = SrcPath
            End Using
        Catch ex As Exception
            MessageBox.Show("The file couldn't be read : " & Environment.NewLine & ex.Message)
        End Try
    End Sub

    Private Sub Form1_Shown(sender As Object, e As EventArgs) Handles MyBase.Shown
        MediaGenerator.RunWorkerAsync()
    End Sub

    Private Sub MediaGenerator_DoWork(sender As Object, e As ComponentModel.DoWorkEventArgs) Handles MediaGenerator.DoWork
        MediaConverter.OverWrite = False
        MediaConverter.SourceFile = PathTxtBox.Text
        MediaConverter.Format = MediaConverter.Format_MP3
        MediaConverter.AudioCodec = MediaConverter.AudioCodec_mp3
        MediaConverter.Video_Codec = MediaConverter.Vcodec_NONE

        MediaConverter.Threads = 0
        MediaConverter.OverWrite = True

        Dim OutputFldr As String = AppDomain.CurrentDomain.BaseDirectory & "MP3Files\\"
        MediaConverter.OutputPath = OutputFldr
        MediaConverter.AnalyzeFile()

        MediaConverter.Encode()
    End Sub
End Class 
```

我想要做的是转换视频文件[有时是 WEBM、FLV、MP4 或 3GP]，上面的代码成功地完成了，但问题是使用时：

```
MediaConverter.Video_Codec = MediaConverter.Vcodec_NONE 
```

进度条不起作用，它的值仍然是 0 ！＆当我使用任何视频编解码器时，它可以完美运行 [进度条]，但创建的 MP3 文件将无法与任何媒体播放器或智能手机和电视 .. 等一起使用；

...

所以有什么问题 ？！我该如何解决？我尝试了很多改变包装库源代码中的一些功能，但正如我之前提到的......我只是一个新手@VB.net：\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-20T10:03:42.970

获取 FFMpeg 进度的最简单方法是解析其控制台输出。我已经编写了免费且易于使用的 FFMpeg 包装器[Video Converter .NET](http://www.nrecosite.com/video_converter_net.aspx)，它具有进度事件：

```
var conv = new NReco.VideoConverter.FFMpegConverter();
conv.ConvertProgress += (o, args) => {
    Console.WriteLine( String.Format("Progress: {0} / {1}\r\n", args.Processed, args.TotalDuration );
};
conv.ConvertMedia(inputFile1, outFile, "flv"); 
```

# javascript - 无法转换 JavaScript 参数 arg 0

> ID：14713325
> 
> 赞同：-1
> 
> 时间：2013-02-05T17:26:13.613
> 
> 标签：javascript, jquery, appendchild

我在 Firefox、Chrome 和 IE 中遇到了这个问题“ **NS_ERROR_XPC_BAD_CONVERT_JS：无法转换 JavaScript 参数 arg 0 [nsIDOMDocumentFragment.appendChild] ”。**在进一步调查中，我们发现如果我们将 appendChild 与数组一起使用，那么我们会遇到问题。但是问题在具有相同内容的同一页面上**间歇性地发生。**

根据堆栈跟踪，当我们在元素上调用 show 函数时会出现问题。该功能在下面提到

```
(function ($) {
$.fn.loading = function () {
        var loading = $(this).find("img.Buttons-Loading");
        if (loading.length > 0) {
            $(loading).show();
        }
    }; 
})(jQuery); 
```

元素“img.Buttons-Loading”在页面中只出现一次。请让我知道错误的可能原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:27:58.617

代替

```
 if (loading.length > 0) {
    $(loading).show();
 } 
```

和

```
loading.show(); 
```

`loading`仍然是一个 jQuery 集合，您不必包装它，也不必测试长度（`show`如果集合为空，则不执行任何操作）。

# ruby-on-rails - Rails 3：使用 jQuery-File-Upload 后表单验证不起作用

> ID：14713326
> 
> 赞同：1
> 
> 时间：2013-02-05T17:26:23.103
> 
> 标签：ruby-on-rails

在我使用[blueimp](https://github.com/blueimp/jQuery-File-Upload)的 jQuery-File-Upload 后，表单验证错误消息在我的页面中消失了。它给了我一个上传错误消息。

我认为它可能会被 Query-File-Upload 覆盖。

这是我的代码`_form.html.erb`：

```
<%= form_for @upload, :html => { :multipart => true, :id => "fileupload"  } do |f| %>
      <% if @upload.errors.any? %>
          <div id="error_explanation">
            <h2><%= pluralize(@upload.errors.count, "error") %> prohibited this from being saved:</h2>
            <ul>
              <% @upload.errors.full_messages.each do |msg| %>
                  <li><%= msg %></li>
              <% end %>
            </ul>
          </div>
      <% end %>
..... 
```

任何想法如何带回验证消息？

**更新：**

我发现实际上生成了验证错误消息，但文件上传插件以某种方式阻止它显示。

最可疑的部分是这段代码`uploads_controller`：

```
def create
    @upload = Upload.new(params[:upload])

    respond_to do |format|
      if @upload.save
        format.html { render :json => [@upload.to_jq_upload].to_json, :content_type => 'text/html',:layout => false }
        format.json { render json: [@upload.to_jq_upload].to_json, status: :created, location: @upload }
      else
        format.html { render action: "new" }
        format.json { render json: @upload.errors, status: :unprocessable_entity}
      end
    end
  end 
```

当验证失败时，它会进入`else`语句并在 json 中呈现一些东西，但是它不会显示在表单上。

我应该改变它的呈现方式吗？

# highcharts - 仅悬停时标记的系列填充颜色

> ID：14713328
> 
> 赞同：3
> 
> 时间：2013-02-05T17:26:36.160
> 
> 标签：highcharts

通过将 fillColor 设置为与背景相同，我“伪造”了一个清晰的圆圈作为标记。它工作得很好。现在，在悬停时，我试图让圆圈填充系列颜色。我不能将它设置为空，因为它仍然采用背景颜色。

有任何想法吗？

这是我的图表代码（现场版本：http: [//jsbin.com/ukabob/2/edit](http://jsbin.com/ukabob/2/edit)）：

```
$(function () {
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            type: 'line',
            backgroundColor: '#E9E7DC'
        },
        colors: ['#A74B59', '#46C4B7', '#EDBA70'],
        credits: {
          enabled: false
        },
        title: {
            text: null
        },            
        xAxis: {
            categories: ['2013', '2014', '2015', '2016', '2017', '2018',
                '2019', '2020', '2021', '2022'],
            gridLineWidth:1,
            gridLineColor: '#FFFFFF',
            labels: {
              style: {
                color: '#000000'
              },
              formatter: function() {
                return '<div style="font-size:22px; font-family: \'Advent Pro\', sans-serif;">'+
                    this.value +'</div>';
              },
              y:25
            },
            lineColor: '#FFFFFF',
            tickColor: '#FFFFFF',
            tickLength: 30
        },
        yAxis: {
            gridLineWidth:0,
            title: {
                text: null
            },
            labels: {
              enabled: false
            }
        },
        plotOptions: {
          series: {
            marker: {
                radius: 6,
                fillColor: '#E9E7DC',
                lineWidth: 2,
                lineColor: null, // inherit from series
                symbol: 'circle',
                states: {
                    hover: {
                        fillColor: null,
                        lineWidth: 2,
                      radius:6
                    }
                }
            },
            states: {
              hover: {
                lineWidth:4
              }
            }
          }
        },
        tooltip: {
            borderWidth:0,
            borderRadius: 0
            },
        legend: {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'top',
            x: -10,
            y: 100,
            borderWidth: 0
        },
        series: [{
            name: 'Honeywell',
            data: [700,725,750,850,950,1000,1025,1050,1050,1050]
        }, {
            name: 'Bombardier',
            data: [661,758,880,990,1065,1136,1193,1241,1289,1335]
        }, {
            name: 'Embraer',
            data: [747,789,839,861,890,908,984,1030,1097,1156]
        }]
    });
});

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-17T22:18:57.223

如果您在标记上定义 fillColor: "white"，则在悬停或选择状态下，您无法从系列中获取默认/原始颜色。

我找到了解决您问题的方法。如果您在 lineWidth (>= radius) 上定义一个高值，这将填满整个点。

```
series: [{    
  data: [],
  marker: {
    states: {
      hover: {
        fillColor: null,
        radius: 6,
        lineWidth: 6
      }
    }
  }
}] 
```

这里是一个例子：http: [//jsbin.com/majigera/1](http://jsbin.com/majigera/1)

迟到的回应。希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T13:50:41.963

我不确定这应该是什么样子，但我看到了两种方法：

*   您想要行之间的空白空间，并在悬停时填充该空间，在这种情况下，您可以使用此解决方案：http: [//jsbin.com/ukabob/3/edit](http://jsbin.com/ukabob/3/edit)如您所见，对于每个系列，您必须设置标记选项：

    ```
     series: [{    
            data: [],
            marker: {
                states: {
                    hover: {
                      fillColor: yourColor
                    }
                }
            }
        }] 
    ```

*   您不希望行之间有空白，在这种情况下，您可以将标记的半径设置为 0，请参阅：http: [//jsbin.com/ukabob/5/edit](http://jsbin.com/ukabob/5/edit)

    ```
     plotOptions: {
          series: {
            marker: {
                radius: 0,
                lineColor: null, // inherit from series
                symbol: 'circle',
                states: {
                    hover: {
                      fillColor: null,
                      fillColor: null,
                      lineWidth: 2,
                      radius: 6
                    }
                }
            }
         }
      } 
    ```

# youtube-api - Youtube 搜索 API 准确性

> ID：14713329
> 
> 赞同：0
> 
> 时间：2013-02-05T17:26:36.423
> 
> 标签：youtube-api

我正在尝试制作一个使用它的 v3 API 搜索 youtube 的简单脚本，但是对于特定的关键字，我没有得到与 youtube.com 相同的视频。

这是我正在使用的网址：`https://www.googleapis.com/youtube/v3/search?order=relevance&regionCode=US&type=video&part=snippet&maxResults=10&q=test&key=*****`

与 youtube.com 相比，API 的准确性如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:16:17.040

我正在用我的代码测试其他地区的搜索过滤器，因为我在阿根廷，并且试图只获取 3 个视频。

我对 API 和 YouTube 页面的结果相同。

```
GET https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=3&order=relevance&q=test&regionCode=AR&type=video&key={YOUR_API_KEY} 
```

我得到这个回应：

```
200 OK

- Show headers -

{
 "kind": "youtube#searchListResponse",
 "etag": "\"GGhQgtOz7wdV-KaTX3akpjqktXI/ZQcMULMzhl7jNZmXCsem5ycElvI\"",
 "pageInfo": {
  "totalResults": 1000000,
  "resultsPerPage": 3
 },
 "nextPageToken": "CAMQAA",
 "items": [
  {
   "id": {
    "kind": "youtube#video",
    "videoId": "nCgQDjiotG0"
   },
   "kind": "youtube#searchResult",
   "etag": "\"GGhQgtOz7wdV-KaTX3akpjqktXI/4xgmXYRPkRjv8kxP_M5CKZQM2GM\"",
   "snippet": {
    "publishedAt": "2010-05-04T00:49:30.000Z",
    "channelId": "UCL8ZULXASCc1I_oaOT0NaOQ",
    "title": "Google Chrome Speed Tests",
    "description": "These speed tests were filmed at actual web page rendering times. If you're interested in the technical details, read on! Equipment used ...",
    "thumbnails": {
     "default": {
      "url": "https://i.ytimg.com/vi/nCgQDjiotG0/default.jpg"
     },
     "medium": {
      "url": "https://i.ytimg.com/vi/nCgQDjiotG0/mqdefault.jpg"
     },
     "high": {
      "url": "https://i.ytimg.com/vi/nCgQDjiotG0/hqdefault.jpg"
     }
    }
   }
  },
  {
   "id": {
    "kind": "youtube#video",
    "videoId": "N7-T53_pOSM"
   },
   "kind": "youtube#searchResult",
   "etag": "\"GGhQgtOz7wdV-KaTX3akpjqktXI/T1_ucgK_momRYuuh8o4LvRpJHWM\"",
   "snippet": {
    "publishedAt": "2012-10-03T21:40:01.000Z",
    "channelId": "UCOmcA3f_RrH6b9NmcNa4tdg",
    "title": "Always On - Torture testing the iPhone 5 Ep 16",
    "description": "cnet.com The iPhone 5 enters the torture chamber, the Tesla S gets unboxed, the Galaxy S3 is thrown in the washing machine, and Molly Wood sets ...",
    "thumbnails": {
     "default": {
      "url": "https://i.ytimg.com/vi/N7-T53_pOSM/default.jpg"
     },
     "medium": {
      "url": "https://i.ytimg.com/vi/N7-T53_pOSM/mqdefault.jpg"
     },
     "high": {
      "url": "https://i.ytimg.com/vi/N7-T53_pOSM/hqdefault.jpg"
     }
    }
   }
  },
  {
   "id": {
    "kind": "youtube#video",
    "videoId": "ubNF9QNEQLA"
   },
   "kind": "youtube#searchResult",
   "etag": "\"GGhQgtOz7wdV-KaTX3akpjqktXI/NM08y0TtHGe2IYmzq8XNDhy6WhY\"",
   "snippet": {
    "publishedAt": "2008-11-03T17:49:54.000Z",
    "channelId": "UCFsK_jxE6BghGx4d2QJLJzQ",
    "title": "Test Your Awareness : Whodunnit?",
    "description": "Test your Awareness with Do The Test's Whodunnit. Who Killed Lord Smithe? TFL cycling safety advert! How observant are you? How did you do? www ...",
    "thumbnails": {
     "default": {
      "url": "https://i.ytimg.com/vi/ubNF9QNEQLA/default.jpg"
     },
     "medium": {
      "url": "https://i.ytimg.com/vi/ubNF9QNEQLA/mqdefault.jpg"
     },
     "high": {
      "url": "https://i.ytimg.com/vi/ubNF9QNEQLA/hqdefault.jpg"
     }
    }
   }
  }
 ]
} 
```

在 YouTube 页面中，我得到了相同的结果：

```
Google Chrome Speed Tests
by Google Chrome•2 years ago•6,721,020 views
These speed tests were filmed at actual web page rendering times. If you're interested in the technical details, read on ...
HDCC
31:01  
Always On - Torture testing the iPhone 5 Ep 16
by CNETTV•4 months ago•267,084 views
Season 2•Episode 16•Always On
cnet.com The iPhone 5 enters the torture chamber, the Tesla S gets unboxed, the Galaxy S3 is thrown in the washing machine ...
HD
1:55  
Test Your Awareness : Whodunnit?
by dothetest•4 years ago•3,477,032 views
Test your Awareness with Do The Test's Whodunnit. Who Killed Lord Smithe? TFL cycling safety advert! How observant are you ...
HD 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T19:40:54.147

API 应与网站具有相同的准确性。您是否使用相同的用户帐户进行测试？你能举一些具体的例子来跟进吗？

# r - 链接多个逻辑运算符

> ID：14713330
> 
> 赞同：-5
> 
> 时间：2013-02-05T17:26:39.630
> 
> 标签：r

我对使用 R 非常陌生，并且在以下方面真的很挣扎 - 任何帮助都将不胜感激。

我需要从考试和课程作业（ x&y ）中计算总分，并且需要使用 R 中的逻辑运算符根据以下标准进行计算。

```
If exam mark is >=50 then the final mark is 0.2x * 0.7y
If exam mark is <50 > 70 then the final mark is y+10
If exam mark is <50 <70 then the final mark is R. 
```

我的问题是我需要将上面的所有 3 个标准放在 R 中的一个字符串中，这样无论 x 和 y 具有我创建的“程序”的任何值都会给出相应的最终标记。

我已经尝试了很多方法来做到这一点，但 R 每次都会出错。我很肯定这是一个编码错误（用户错误），但尽管谷歌搜索；翻阅参考书，我就是无法让它发挥作用。

我认为问题是我了解逻辑运算符是如何工作的 - 但不是如果逻辑运算符给出 TRUE 以及如何将其放入一个程序中，如何获得正确的公式以执行最终标记

我最近的尝试如下：

```
finalmark <- ((y>=50) <- (0.2*x+0.8*y)) |((y<=50 & x>70) <- (y+10)) |((y<=50 & x<70) <-    (y)) 
```

在过去的 4 天里，我一直在努力做到这一点 - 所以如果有人可以帮助我或指出我正确的方向，我将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:33:16.850

```
finalmark <- 
    # test if a condition is true..
    ifelse( 
        # here's the condition..
        y >= 50 , 
        # ..and if it is, set `finalmark` equal to this.
        0.2 * x * 0.7 * y , 
        # ..otherwise, if the condition is false..
        ifelse( 
            # test out this nested condition..
            y < 50 & x > 70 ,
            # and if THAT is true, set `finalmark` equal to this
            y + 10 ,
            # ..otherwise, if the second condition is also false..
            ifelse( 
                # test if this second nested condition is true
                y <= 50 & x < 70 ,
                # and if THAT is true, set `finalmark` equal to this
                y ,
                # otherwise, set `finalmark` equal to MISSING
                NA

    # close all of your parentheses
    # out to the same level as before.
            )
        )
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:44:00.957

它只使用一个`ifelse`命令：

```
finalmark <- ifelse(y >= 50, 0.2 * x + 0.8 * y, y + 10 * (x > 70)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T17:35:49.927

一行（假设您希望`y`像在代码尝试中那样输出第三个条件）：

```
finalmark <- ifelse(y>=50, 0.2*x+0.8*y, ifelse(x>70, y+10, y)) 
```

# apache - 正则表达式重定向 / 301

> ID：14713337
> 
> 赞同：0
> 
> 时间：2013-02-05T16:36:46.097
> 
> 标签：apache, redirect

我正在处理一个有趣的情况。这是发生了什么：

当前 URL 示例 1：

```
www.domain.com/red-widgets-cid-1234.html

www.domain.com/red-widgets-cid-1234-1.html

www.domain.com/red-widgets-cid-1234-1-1.html 
```

以上所有网址的规范：

```
www.domain.com/red-widgets-cid-1234.html

New URL:
www.domain.com/red-widgets-cid-4567.html 
```

* * *

当前 URL 示例 2：

```
www.domain.com/red-widgets-cid-1234+10.html

www.domain.com/red-widgets-cid-1234+10-1.html

www.domain.com/red-widgets-cid-1234+10-1-1.html 
```

以上所有网址的规范：

```
www.domain.com/red-widgets-cid-1234+10.html

New URL:
www.domain.com/red-widgets-cid-6789.html 
```

我想确保上述 URL 的所有变体都重定向到新的 url。我可以使用什么通配符 301 重定向/正则表达式来解决这些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:09:50.110

试试这个（没有测试过）：

```
 # (perhaps you need to escape "+" as "\+",
  # - can you really have a "+" in the URL?)

  RewriteCond %{REQUEST_URI} ^/red-widgets-cid-1234+10+5(.*).html [NC]
  RewriteRule (.*) %{HTTP_HOST}/american-red-widgets-cid-6789+5%1.html [QSA,L]

  RewriteCond %{REQUEST_URI} ^/red-widgets-cid-1234+10(.*).html [NC]
  RewriteRule (.*) %{HTTP_HOST}/red-widgets-cid-6789%1.html [QSA,L]

  RewriteCond %{REQUEST_URI} ^/red-widgets-cid-1234(.*).html [NC]
  RewriteRule (.*) %{HTTP_HOST}/red-widgets-cid-4567%1.html [QSA,L] 
```

最主要的是首先测试最长的“常用” URL。
`%1`表示 last 的第一个正则表达式`RewriteCond`。
`$1`表示来自 current 的第一个正则表达式`RewriteRule`。

**注意！**如果 RewriteCond 捕获的所有 URL 的新 URL 都应该相同，则应该跳过`%1`，这仅在您需要时才需要，`american-red-widgets-cid-6789+5-1.html`例如`red-widgets-cid-1234+10+5-1.html`

# ruby - Ruby，如何将一个数组洗牌到另一个数组

> ID：14713338
> 
> 赞同：2
> 
> 时间：2013-02-05T17:27:05.240
> 
> 标签：ruby, arrays, sorting

两个数组：

```
a1 = ["a", "b", "c", "d", "e", "f"]
a2 = [1, 2, 3] 
```

如何插入`a2`，`a1`保持*a2 顺序*但在*a1的***随机索引**中？

 ** * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T17:33:52.257

```
(0..a1.length).to_a.sample(a2.length).sort
.zip(a2)
.reverse
.each{|i, e| a1.insert(i, e)} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-05T17:36:11.453

这是我的更新答案：

```
a1 = ["a", "b", "c", "d", "e", "f"]
a2 = [1,2,3]

# scales to N arrays by just adding to this hash
h = { :a1 => a1.dup, :a2 => a2.dup }
# => {:a1=>["a", "b", "c", "d", "e", "f"], :a2=>[1, 2, 3]}

# Create an array of size a1+a2 with elements representing which array to pull from
sources = h.inject([]) { |s,(k,v)| s += [k] * v.size }
# => [:a1, :a1, :a1, :a1, :a1, :a1, :a2, :a2, :a2]

# Pull from the array indicated by the hash after shuffling the source list
sources.shuffle.map { |a| h[a].shift }
# => ["a", "b", 1, "c", 2, "d", "e", 3, "f"] 
```

该算法的功劳归功于我的同事 Ryan。

旧答案不保留两者的顺序

```
a1.inject(a2) { |s,i| s.insert(rand(s.size), i) } 
```

使用 a2 作为目标，在 a2 的随机偏移量处将 a1 中的每个值插入到 a2 中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T19:26:44.680

通过模拟真实的 shuffle 来保持两个数组的顺序，一旦将数组的元素插入到另一个数组中，下一个元素就不能放在它之前。

```
class Array
  def shuffle_into(array)
    n = 0
    self.each.with_object(array.dup) do |e, obj|
      i = rand(n..obj.size)
      obj.insert(i, e)
      n = i + 1
    end
  end
end 
```

`n = 0`说不定能把周围的漂浮物清理干净。

例子：`a2.shuffle_into(a1) => [1, "a", "b", "c", "d", 2, "e", "f", 3]`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T18:30:50.790

这个丑陋的废话完成了这项工作（没有弄乱任何数组顺序）：

```
class Array
  def shuffle_into(ary)
    a1 = ary.dup
    a2 = dup
    Array.new(a1.size + a2.size) do
      [true, false].sample ? (a1.shift || a2.shift) : (a2.shift || a1.shift)
    end
  end
end 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-05T17:43:01.377

`a1.zip((a2 + [nil] * (a1.size - a2.size)).shuffle).flatten.compact`

顺便说一句，可能的重复：[在随机位置用 ruby​​ 压缩 2 个数组](https://stackoverflow.com/questions/14376902/zipping-2-arrays-in-ruby-in-random-locations#comment19995708_14376902)*

# javascript - 为什么 postMessage 脚本在 IE8 中不起作用？

> ID：14713339
> 
> 赞同：10
> 
> 时间：2013-02-05T17:27:07.117
> 
> 标签：javascript, iframe, postmessage

经过广泛的研究，这似乎应该可行，但在 IE8 中，letsgo 函数永远不会被调用......有什么帮助吗？

```
<script type="text/javascript">
    function resizeCrossDomainIframe() {        

        if (window.addEventListener) {
            window.addEventListener('message', letsgo, false);
        } else if (window.attachEvent) {
            window.attachEvent('onmessage', letsgo);
        }
    }
    function letsgo(event) {
        var iframe = document.getElementById('my_iframe');
        if (event.origin !== 'http://mysite.com') return; // only accept messages from the specified domain
        if (isNaN(event.data)) return; // only accept something which can be parsed as a number
        var height = parseInt(event.data) + 32; // add some extra height to avoid scrollbar
        iframe.height = height + "px";
    }
</script>
    <iframe src='http://mysite.com/products/default.aspx?iframe=true&partnerid=222&site=localhost:62014' frameborder="0" width="100%" scrolling="auto" style="min-height: 750px; min-width: 600px; background-color: #fff;"  id="my_iframe" onload="resizeCrossDomainIframe();">
    </iframe> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T19:36:58.633

我明白了，一定是比赛条件。我拿出了onload。

```
<script type="text/javascript">

        if (window.addEventListener) {
            window.addEventListener('message', letsgo, false);
        } else if (window.attachEvent) {
            window.attachEvent('onmessage', letsgo);
        }

    function letsgo(event) {
        var iframe = document.getElementById('my_iframe');
        if (event.origin !== 'http://mysite.com') return; // only accept messages from the specified domain
        if (isNaN(event.data)) return; // only accept something which can be parsed as a number
        var height = parseInt(event.data) + 32; // add some extra height to avoid scrollbar
        iframe.height = height + "px";
    }
</script>
    <iframe src='http://mysite.com/products/default.aspx?iframe=true&partnerid=222&site=localhost:62014' frameborder="0" width="100%" scrolling="auto" style="min-height: 750px; min-width: 600px; background-color: #fff;"  id="my_iframe" >
    </iframe> 
```

# math - 投影理论？（在 GLSL 中实现）

> ID：14713343
> 
> 赞同：0
> 
> 时间：2013-02-05T17:27:10.150
> 
> 标签：math, opengl, glsl, projection

OpenGL 3.x，因为我不想在技术上落后太多。

首先，是的，我知道这很多。我几乎可以肯定该`vec3 transform(vec3)`功能很好，如果没有别的我知道它不包含我来这里的问题。

我遇到问题的代码是（或应该是）在`vec3 project(vec3)`函数中。如果我直接看，比如说，一个盒子，它看起来很好。如果我稍微转动相机使盒子更靠近屏幕的一侧（周边视觉），我的快乐盒子开始变成一个矩形。虽然这对于我正在投入的游戏来说是我可以忍受的，但这很烦人。

投影背后的基本理论是：你有一个点（x，y，z），你找到它和原点（相机所在的位置）之间的角度，并将它投影到一个`nearz`远处的平面上。找到角度是`angleX = atan(x/z)`和的问题`angleY = atan(y/z)`。并使用这两个角度，通过执行将它们投影到近平面上`point = tan(angle) * nearz`。`edgeY = tan(fovy) * nearz`然后通过和找到屏幕的外脊`edgeX = tan(fovy * aspect) * nearz`。使用查找屏幕点`screen = point/edge`

作为一个基本的优化，我有，但为了解决这个问题而删除只是采取`screen = angle/fov`

我的投影函数理论有什么问题吗？这里是暗示：

```
#version 330

uniform vec3 model_location = vec3(0.0, 0.0, 0.0);
uniform vec3 model_rotation = vec3(0.0, 0.0, 0.0);
uniform vec3 model_scale    = vec3(1.0, 1.0, 1.0);

uniform vec3 camera_location = vec3(0.0, 0.0, 0.0);
uniform vec3 camera_rotation = vec3(0.0, 0.0, 0.0);
uniform vec3 camera_scale    = vec3(1.0, 1.0, 1.0);

uniform float fovy   =   60.0;
uniform float nearz  =    0.01;
uniform float farz   = 1000.0;
uniform float aspect =    1.0;

vec3 transform(vec3 point)
{
    vec3 translate = model_location - camera_location;
    vec3 rotate    = radians(model_rotation);
    vec3 scale     = model_scale    / camera_scale;

    vec3 s = vec3(sin(rotate.x), sin(rotate.y), sin(rotate.z));
    vec3 c = vec3(cos(rotate.x), cos(rotate.y), cos(rotate.z));

    float sy_cz = s.y * c.z;
    float sy_sz = s.y * s.z;
    float cx_sz = c.x * s.z;

    vec3 result;
    result.x = ( point.x * ( ( c.y * c.z ) * scale.x ) ) + ( point.y * ( ( ( -cx_sz )    + ( s.x * sy_cz ) )    * scale.y ) ) + ( point.z * ( ( ( -s.x * s.z ) + ( c.x * sy_cz ) ) * scale.z ) ) + translate.x;
    result.y = ( point.x * ( ( c.y * s.z ) * scale.y ) ) + ( point.y * ( ( ( c.x * c.z ) + ( s.x * sy_sz ) )    * scale.y ) ) + ( point.z * ( ( ( -s.x * c.z ) + ( c.x * sy_sz ) ) * scale.z ) ) + translate.y;
    result.z = ( point.x * ( ( -s.y )      * scale.x ) ) + ( point.y * ( (   s.x * c.y )                        * scale.y ) ) + ( point.z * ( (    c.x * c.y )                     * scale.z ) ) + translate.z;

    return result;
}

vec4 project(vec3 point)
{
    vec4 result = vec4(0.0);

    vec3 rotation = radians(camera_rotation);

    result.x = ( atan(point.x/point.z) - rotation.y );
    result.y = ( atan(point.y/point.z) - rotation.x );
    result.z = point.z/(farz - nearz);
    result.w = 1.0;

    result.x = tan(result.x) * nearz;
    result.y = tan(result.y) * nearz;

    vec2 bounds = vec2( tan(fovy * aspect) * nearz,
                        tan(fovy) * nearz );

    result.x = result.x / bounds.x;
    result.y = result.y / bounds.y;

    if (camera_rotation.z == 0)
        return result;

    float dist = sqrt( (result.x*result.x) + (result.y*result.y) );
    float theta = atan(result.y/result.x) + rotation.z;
    result.x = sin(theta) * dist;
    result.y = cos(theta) * dist;

    return result;
}

layout(location = 0) in vec3 vertex_position;
layout(location = 1) in vec2 texCoord;

out vec2 uvCoord;

void main()
{
    uvCoord = texCoord;
    vec4 pos = project( transform(vertex_position) );

    if (pos.z < 0.0)
        return;
    gl_Position = pos;
} 
```

回答几个预期的问题：

问：为什么不使用 GLM/some-other-mathimatics-lib？

A：

-我前一阵子试过。我的“世界你好！” 三角形卡在屏幕中央。使用转换矩阵并没有将其向后移动、缩放或任何其他操作。

- 因为学习如何为自己解决问题很重要。这样做意味着我学会了如何解决这样的事情，同时如果一切都失控了，我仍然有一些可以依靠的东西。（有这个傻瓜的理由。）

问：为什么不使用矩阵？

A：

-那些也讨厌我。

-我正在以一种新的方式来做，如果我使用矩阵，那么我将完全按照每个教程所说的去做，而不是自己弄清楚。

尝试来源：

[http://ogldev.atspace.co.uk/index.html](http://ogldev.atspace.co.uk/index.html)

[http://www.swiftless.com/opengltuts/opengl4tuts.html](http://www.swiftless.com/opengltuts/opengl4tuts.html)

从“OpenGL Shading Language Third Edition”、“Emulating the OpenGL Fixed Functionality”中复制 GLSL 着色器（vert & frag）的字母。288-293

每个都试了很多次，每次都把它弄得精神错乱。尝试编写战争游戏时，我得到了一个线框框，可以将其投影到和平符号中。

**编辑：**

正如 datenwolf 指出的那样，问题原来是极坐标的使用。为了使用不太高级的数学进行投影，一个更好的等式是：`c = zNear * (p.x/p.y)` 取自两个三角形的概念，投影点三角形和给定点三角形是正比例的；因此使用相同的角度。

假设为要投影的点给出 X 和 Y，并且它们的比例三角形边分别标记为 A 和 C。您可以从等式中取`atan(Y/X) = angle`和，然后`atan(C/A) = angle`从中得到 并完成， 其中 A 是到近平面的距离。C是Y方向的屏幕坐标。`atan(Y/X) = atan(C/A)``Y/X = C/A``C = A * (Y/X)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:19:00.310

> -那些也讨厌我。

矩阵是你的朋友。学习使用它们。

> -我正在以一种新的方式来做，如果我使用矩阵，那么我将完全按照每个教程所说的去做，而不是自己弄清楚。

你的方法很糟糕。转换不会通勤，您将自己锁定在一个非常严格的框架中。还有这个：

> ```
>  result.x = ( point.x * ( ( c.y * c.z ) * scale.x ) ) + ( point.y * ( ( ( -cx_sz )    + ( s.x * sy_cz ) )    * scale.y ) ) + ( point.z * ( ( ( -s.x * s.z ) + ( c.x * sy_cz ) ) * scale.z ) ) + translate.x;
>    result.y = ( point.x * ( ( c.y * s.z ) * scale.y ) ) + ( point.y * ( ( ( c.x * c.z ) + ( s.x * sy_sz ) )    * scale.y ) ) + ( point.z * ( ( ( -s.x * c.z ) + ( c.x * sy_sz ) ) * scale.z ) ) + translate.y;
>    result.z = ( point.x * ( ( -s.y )      * scale.x ) ) + ( point.y * ( (   s.x * c.y )                        * scale.y ) ) + ( point.z * ( (    c.x * c.y )                     * scale.z ) ) + translate.z; 
> ```

实际上是旋转矩阵乘法，然后是平移矩阵，以过于复杂且容易出错的方式编写。你也在浪费宝贵的 GPU 资源。

您的投影功能似乎实现了某种球面投影模型。这是有问题的，因为球坐标是曲线的。只要你的基元很小，与曲率相比，事情就会解决。但是一旦一个基元变大，所有的地狱都会崩溃，因为基元边缘将在屏幕上绘制为直线，而如果您通过曲线坐标系进行变换，它们必须是曲线。您至少需要一些细分着色器和迭代顶点调整才能完成这项工作。

# c - 编写密码程序

> ID：14713346
> 
> 赞同：0
> 
> 时间：2013-02-05T17:27:18.063
> 
> 标签：c, encryption

编写一个程序（过滤器），从标准输入读取 ASCII 流并将字符发送到标准输出。该程序会丢弃除字母以外的所有字符。任何小写字母都输出为大写字母。以空格字符分隔的五个一组的输出字符。每 10 组后输出一个换行符。（一行的最后一组后面只有换行符；一行的最后一组后面没有空格。）最后一组可能少于五个字符，最后一行可能少于 10 个团体。假设输入文件是任意长度的文本文件。为此使用 getchar() 和 putchar()。您将永远不需要一次在内存中拥有超过一个字符的输入数据

我遇到的问题是如何做间距。我创建了一个包含 5 个对象的数组，但我不知道如何处理它。这是我到目前为止所拥有的：

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>

int main()
{
    char c=0, block[4]; 

    while (c != EOF)
    {
       c=getchar();

       if (isupper(c))
       {
           putchar(c);
       }
       if (islower(c))
       {
          putchar(c-32);
       }
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:34:37.083

您无需存储字符即可执行问题中描述的算法。

您应该一次读取一个字符，并跟踪我不会透露的 2 个计数器。每个计数器都可以让您知道将格式化输出所需的特殊字符放在哪里。

基本上：

```
read a character
if the character is valid for output then
   convert it to uppercase if needed
   output the character
   update the counters
   output space and or newlines according to the counters
end if 
```

希望这可以帮助。

*另外：我不知道你试图用这个`block`变量做什么，但它被声明为一个由 4 个元素组成的数组，并且在文本中没有任何地方是使用的数字 4...*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:41:50.193

```
int main()
{
    char c=0; 
    int charCounter = 0;
    int groupCounter = 0;

    while (c != EOF)
    {
       c=getchar();

       if (isupper(c))
       {
           putchar(c);
           charCounter++;
       }
       if (islower(c))
       {
          putchar(c-32);
          charCounter++;
       }

       // Output spaces and newlines as specified.
       // Untested, I'm sure it will need some fine-tuning.
       if (charCounter == 5)
       {
           putchar(' ');
           charCounter = 0;
           groupCounter++;
       }

       if (groupCounter == 10)
       {
           putchar('\n');
           groupCounter = 0;
       }
    }
 } 
```

# python - YouTube API 收件箱请求并不总是有效

> ID：14713357
> 
> 赞同：0
> 
> 时间：2013-02-05T17:27:33.977
> 
> 标签：python, youtube, youtube-api, gdata, inbox

我正在尝试获取经过身份验证的 Youtube 用户个人资料的收件箱消息。这是我的代码

```
def GetInboxMessage(self):
  uri = 'https://gdata.youtube.com/feeds/api/users/default/inbox?v=2&key=%s' %DEVELOPER_KEY
  print 'GET INBOX\n'
  feed = yt_service.GetYouTubeVideoFeed(uri)

  for entry in feed.entry:  
    try:    
        PrintVideoDetails(self,entry,'videomessage')
    except:
        pass 
```

这适用于我的帐户。当我尝试朋友的帐户时，我收到以下错误：

> 文件“/usr/local/lib/python2.7/dist-packages/gdata/youtube/service.py”，第 183 行，在 GetYouTubeVideoFeed
> 返回 self.Get(uri, converter=gdata.youtube.YouTubeVideoFeedFromString) 文件“/usr /local/lib/python2.7/dist-packages/gdata/service.py”，第 1108 行，在 Get 'reason': server_response.reason, 'body': result_body}
> 
> gdata.service.RequestError: {'status': 500, 'body': "http://schemas.google.com/g/2005'>GData `ServiceException`Internal Error", 'reason': 'Internal Server Error'}

我不知道如何处理它。有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:35:22.030

这种错误可以更好地分析网络数据包或向 youtube 团队发送私人消息。

参考： 1\. [https://groups.google.com/forum/#!msg/youtube-api-gdata/HzPsLiNKJuo/TgZ3NfokbdwJ](https://groups.google.com/forum/#!msg/youtube-api-gdata/HzPsLiNKJuo/TgZ3NfokbdwJ) 2\. [http://code.google.com/p/gdata-python-client/issues /detail?id=537](http://code.google.com/p/gdata-python-client/issues/detail?id=537)

# android - 服务器显示数据但不显示图像

> ID：14713359
> 
> 赞同：0
> 
> 时间：2013-02-05T17:27:38.330
> 
> 标签：android

我正在捕获我的屏幕并将该图像转换为字节数组并发送到套接字连接。服务器显示数据但不显示图像。

` 公共类 ImageToByteActivity 扩展 Activity {

```
boolean connected = false;
 public ByteArrayOutputStream bos;

 public char[] tempChar1 = new char[15];
 //public char[] finalValue;
 public byte[] buffer;

  byte[] b9;
  String tempStr,s;
  public static final String mCommand1 = "xxxxxxxxxxx";
  public static final String mCommand2 = "yyyyyyyyyyyyyyyyyyyyy";
  /** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

            Button btn = (Button) findViewById(R.id.btn);
            btn.setOnClickListener(new OnClickListener(){

                //@Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    View view = v.getRootView();;

                   view.setDrawingCacheEnabled(true);
                   Bitmap largeIcon = view.getDrawingCache();

          bos = new ByteArrayOutputStream(); 
          largeIcon.compress(Bitmap.CompressFormat.JPEG, 100 , bos);

          buffer = bos.toByteArray();

                       try {
                        s = new String( buffer,"UTF8");
                    } catch (UnsupportedEncodingException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                       //Log.w("Image Conversion",bos.toString());

                       // Log.w("Image Conversion",Arrays.toString(bos.toByteArray()));
                        Log.w("Image Conversion", String.valueOf(buffer.length));  
                        Log.w("Image Conversion1", s);
                      stringToBytesASCII();
                     connection();

                }
            });

        }
public  byte[] stringToBytesASCII() {
    String pq = String.valueOf(buffer.length);
     tempChar1[0] = 'K';
     tempChar1[1] = 'U';
     tempChar1[2] = 'M';
     tempChar1[3] = 'R';
     tempChar1[4] = 'H';
     tempChar1[5] = 'I';
     tempChar1[6] = 'M';
     tempChar1[7] = 'A';
     tempChar1[8] = 'N';
     tempChar1[9] = 'S';
     tempChar1[10] = 'H';
     tempChar1[11] = 'U';

    b9 = new byte[tempChar1.length]; 
    Log.w("abcdefgh",String.valueOf(tempChar1.length));
    for (int i = 0; i < b9.length; i++) {
      b9[i] = (byte) tempChar1[i];
      try {
            tempStr = new String( b9,"UTF8");
            Log.w("abcd",tempStr);
            Log.w("abcd",String.valueOf(tempStr.length()));

        } catch (UnsupportedEncodingException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }    
     }

     return b9;
    }

//-------------------------------------------------------------

public void connection(){
try {       
        InetAddress serverAddr = InetAddress.getByName("ip");
    Log.d("ClientActivity", "C: Connecting...");
    Socket socket = new Socket(serverAddr, port);
    connected = true;

        try {
            Log.d("ClientActivity", "C: Sending command.");
            PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket
                        .getOutputStream())), true);
                // where you issue the commands
            Log.w("gdfgdf",tempStr);
                out.println(mCommand1);
                out.flush();
                Log.d("ClientActivity", "C: Sent.");

              BufferedInputStream inX1 = new BufferedInputStream(socket.getInputStream());
              System.out.println("Server says " + inX1.available());
              Log.d("ClientActivity", "C: Received.");

              while (connected) {

                BufferedOutputStream out3 = (BufferedOutputStream) socket.getOutputStream();
                //out.write("Hello World\n".getBytes(charSet));
                out.write(tempStr);
                out.write(s);
                out.flush();
                Log.d("ClientActivity", "C: Sent Second.");
                //Log.d("value",s);
              }
        } catch (Exception e) {
            Log.e("ClientActivity", "S: Error", e);
        }
    //}
    socket.close();
    Log.d("ClientActivity", "C: Closed.");
} catch (Exception e) {
    Log.e("ClientActivity", "C: Error", e);
    connected = false;
} 
```

}

```
String toBinary( byte[] bytes )
{
    StringBuilder sb = new StringBuilder(bytes.length * Byte.SIZE);
    for( int i = 0; i < Byte.SIZE * bytes.length; i++ )
        sb.append((bytes[i / Byte.SIZE] << i % Byte.SIZE & 0x80) == 0 ? '0' : '1');
    return sb.toString();
}

} 
```

`

注意：- 如果我显示 byte[] 它只包含单个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:01:01.737

您应该直接将字节缓冲区写入输出流。现在您首先转换为字符串，甚至转换为 utf-8。这没有任何意义，因为图像不能用字符串表示。所以去掉所有的字符串，在 buffer=bos.toByteArray() 输出后写入缓冲区。您不能使用 tempStr。

# android - 无法从网络浏览器启动应用程序

> ID：14713360
> 
> 赞同：0
> 
> 时间：2013-02-05T17:27:40.377
> 
> 标签：android, android-intent, intentfilter

我正在尝试按此处所述启动我的应用程序：从我在清单中创建的[android 浏览器启动自定义 android 应用程序：](https://stackoverflow.com/questions/2958701/launch-custom-android-application-from-android-browser)
`intent-filter`

```
<activity
            android:name=".ui.BaseActivity"
            android:label="@string/app_name"
            android:launchMode="singleTop" 
            android:configChanges="orientation|keyboard|keyboardHidden|screenSize">
            <intent-filter>
                 <data android:scheme="http" android:host="somesite.com"/>
                 <action android:name="android.intent.action.VIEW"/>
                 <category android:name="android.intent.category.BROWSABLE" />
                 <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity> 
```

但是当我输入股票浏览器“somesite.com”时 - 它会加载“somesite.com”而不是启动我的应用程序。怎么了？
PS：这个[https://stackoverflow.com/a/13019256/1548085](https://stackoverflow.com/a/13019256/1548085)没有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-08T16:33:32.610

在浏览器中键入链​​接不会启动意图：浏览器只是浏览到该 URL。仅当您在浏览器中关注（即单击）链接时才使用意图机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T06:55:10.377

此示例从 android 浏览器启动我的活动并显示前 2 个 GET 婴儿车表单 URL

```
package com.example.openapp;

import java.util.List;

import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TextView txt1 = (TextView) findViewById(R.id.textView1);
        TextView txt2 = (TextView) findViewById(R.id.textView2);
        try{
            Uri data = getIntent().getData();
            if(data != null){
                String scheme = data.getScheme(); 
                String host = data.getHost();
                List<String> params = data.getPathSegments();
                String first = params.get(0); 
                String second = params.get(1);
                txt1.setText(first);
                txt2.setText(second);
            }
        } catch (Exception e){
        }       
    }
} 
```

您需要在清单中添加它并用您的主机替换 android 主机：

```
 <activity
        android:name="com.example.openapp.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <intent-filter>
            <data android:scheme="http" android:host="example.com"/>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT"/>
            <category android:name="android.intent.category.BROWSABLE"/>
        </intent-filter>

    </activity> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-06T00:32:07.280

如果您只输入“somesite.com”，则必须输入“ [http://somesite.com/](http://somesite.com/) ”，我也意识到了这个问题。

# asp.net-mvc - 使用 MVC，如何根据复选框显示或隐藏元素？

> ID：14713366
> 
> 赞同：2
> 
> 时间：2013-02-05T17:27:59.723
> 
> 标签：asp.net-mvc, checkbox, asp.net-mvc-partialview

我正在尝试学习如何使用 MVC，而我想做的事情是让用户选中一个框以显示或取消选中以隐藏任意数量的元素。
我已经看到整个页面不刷新并且用户不需要单击任何“提交”按钮的情况下完成此操作，但它确实存在。
我在搜索中找到的所有 MVC 教程似乎都没有回答这个问题，甚至没有让我对部分视图有一个正确的想法（我认为这可能是解决方案）。我知道这个问题很愚蠢，但我一直在寻找几个小时，无法弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T17:31:16.273

要在不刷新页面的情况下执行此类操作，您需要使用 javascript 或 jQuery

假设您的视图如下所示：

```
<input type="checkbox" id="myCheckbox">
<div id="ShowHideMe">
   <p>some content</p>
</div> 
```

你需要类似的东西，

```
<script>
  $(function() {
    $('#myCheckbox').change(function() {
       $('#ShowHideMe').toggle($(this).is(':checked'));
     });
  });
</script> 
```

每当您想做客户端编程时，您都会使用 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:30:55.637

> 我已经看到整个页面不刷新并且用户不需要单击任何“提交”按钮的情况下完成此操作，但它确实存在

您正在描述 javascript，而不是（可能是 asp.net）mvc 的任何内置功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T17:32:55.070

使用 jQuery。

$("#myCheckbox").click(function () { $("#someOtherElementId").hide(); });

# asp.net - 在 Microsoft Acess 中使用 SQL 语句忽略周末

> ID：14713369
> 
> 赞同：1
> 
> 时间：2013-02-05T17:28:06.843
> 
> 标签：asp.net, sql, ms-access

我发现了几个关于如何使用 SQL 语句忽略周末的主题。我不需要忽略假期，只是周末。但是，这些似乎都不适合我。我在 asp.net 中使用 Access 数据库并尝试使用此功能：

```
SELECT *
FROM your_table
WHERE ((DATEPART(dw, DateCalled) + @@DATEFIRST) % 7) NOT IN (0, 1) 
```

但 AccessDataSource 似乎不喜欢这种语法。我的实际查询需要搜索 3 个工作日前的记录，这意味着如果星期五有记录，则要到下一个星期三才会显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:31:42.217

您可以使用[`weekday`](http://www.techonthenet.com/access/functions/date/weekday.php)：

```
SELECT *
FROM your_table
WHERE weekday(date) NOT IN (1, 7) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T20:34:39.807

您有一个日期/时间参数*DATEFIRST*，并且您想要选择其 *DateCalled*值不晚于*DATEFIRST*之前 3 个工作日的行。我解释这意味着这些是您想要的每个参数值的最新日期......

```
DATEFIRST         3 workdays previous
---------------   -------------------
Mon, 01/28/2013   Wed, 01/23/2013
Tue, 01/29/2013   Thu, 01/24/2013
Wed, 01/30/2013   Fri, 01/25/2013
Thu, 01/31/2013   Mon, 01/28/2013
Fri, 02/01/2013   Tue, 01/29/2013
Sat, 02/02/2013   Tue, 01/29/2013
Sun, 02/03/2013   Tue, 01/29/2013 
```

我使用 Access 2007 测试了以下查询。它返回与上述 DATEFIRST 模式匹配的结果。

```
PARAMETERS DATEFIRST DateTime;
SELECT *
FROM your_table AS y
WHERE y.DateCalled < DateAdd(
        'd',
        Switch(
            Weekday([DATEFIRST])=1,-4,
            Weekday([DATEFIRST])=2,-4,
            Weekday([DATEFIRST])=3,-4,
            Weekday([DATEFIRST])=4,-4,
            Weekday([DATEFIRST])=5,-2,
            Weekday([DATEFIRST])=6,-2,
            Weekday([DATEFIRST])=7,-3
            ),
        [DATEFIRST]
        ); 
```

根据您的评论，我怀疑我误解了您的意图。看来您不想要参数查询。相反，您希望`DateCalled`过滤器在查询运行日期前 3 天。如果是这样，则丢弃该`PARAMETERS`子句并用 Access'`Date()`函数替换`[DATEFIRST]`.

```
SELECT *
FROM your_table AS y
WHERE y.DateCalled < DateAdd(
        'd',
        Switch(
            Weekday(Date())=1,-4,
            Weekday(Date())=2,-4,
            Weekday(Date())=3,-4,
            Weekday(Date())=4,-4,
            Weekday(Date())=5,-2,
            Weekday(Date())=6,-2,
            Weekday(Date())=7,-3
            ),
        Date()
        ); 
```

# javascript - Javascript/Coffeescript 鼠标悬停在函数 RoR

> ID：14713371
> 
> 赞同：3
> 
> 时间：2013-02-05T17:28:15.087
> 
> 标签：javascript, css, ruby-on-rails, coffeescript

我有一个显示工作列表的表格。我想要发生的是整行（不是td）的文本在悬停时将颜色变为红色，然后在移除鼠标时变为黑色。

我目前有下表：

```
<section id="table-wrapper">
    <table id="jobs">

        <thead>
            <tr>
                <td>position</td>
                <td>company</td>
                <td>location</td>
            </tr>
        </thead>

        <% @jobs.each do |job| %>
            <tr href='<%= job.job_url %>'>
                <td><%= job.title %></td>
                <td><%= job.company %></td> 
                <td><%= job.city %>, <%= job.country %></td>
            </tr>
        <% end %>
    </table>
</section> 
```

尽管我尽了最大的努力，但到目前为止我的咖啡脚本文件中只有这个：

```
$ ->
  $('tr[href]').mouseover -> $('tr td').css('color', 'red'); 
```

目前这会将所有 TD 元素在悬停时变为红色，无论它们在哪一行，并且在移除鼠标时它们不会返回黑色。

人们可以用 Javascript 或咖啡脚本提供的任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:47:50.503

你可以简单地用 CSS 做到这一点：

```
tr[href]:hover {
    color: red
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T17:55:40.923

不使用`mouseover()`，使用`hover()`。选择`tr[href]:hover`器在 css 中表现不佳。添加 .js-red-row`tr`作为非样式化 css 选择器。

```
$ ->
  $('tr.js-red-row td').hover -> $(this).toggleClass('red')

# css    
tr > td {color: black;}
.red {color: red;} 
```

# maven - 我可以从一个测试文件夹中测量许多模块的代码覆盖率（Sonar + JaCoCo + Maven）吗？

> ID：14713374
> 
> 赞同：1
> 
> 时间：2013-02-05T17:28:21.137
> 
> 标签：maven, selenium-webdriver, sonarqube, jacoco

我的代码覆盖率有问题（Sonar + JaCoCo + Maven + Selenium（集成测试））。这是我的项目结构。

```
+-[CLIENT] 
|  +-[src]
|      +-[main]
|      +-[test]    <= Unit tests
+-[SERVICE] 
|  +-[src]
|      +-[main]
|      +-[test]    <= Unit tests
+-[TESTS] 
|  +-[src]
|      +-[main]
|      +-[test]    <= Integration tests 
```

我可以通过“TESTS”文件夹中的集成测试来测量“CLIENT”和“SERVICE”模块的代码覆盖率吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:56:04.710

也许这篇文章可以帮助你： [http ://www.lordofthejars.com/2012/07/jacoco-in-maven-multi-module-projects.html](http://www.lordofthejars.com/2012/07/jacoco-in-maven-multi-module-projects.html)

我的建议：您可以运行所有测试并将它们记录在同一个 jacoco 执行数据文件中。但是当您为每个项目创建报告时，只会使用该项目的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T21:31:43.347

The problem is that Jacoco needs the class files of the tested classes to create the report, which in your case are not available (because they are in different module). Here is a post which presents a solution to this by making the sources available with the maven-source-plugin. It uses ant, which is not an option in my case, but maybe it helps you:

[http://olafsblog.sysbsb.de/measuring-test-coverage-of-integration-tests-for-separated-modules-with-jacoco/](http://olafsblog.sysbsb.de/measuring-test-coverage-of-integration-tests-for-separated-modules-with-jacoco/)

# session - JSF2 + CDI @Produces 保持旧会话状态

> ID：14713377
> 
> 赞同：3
> 
> 时间：2013-02-05T17:28:24.930
> 
> 标签：session, jsf-2, cdi, logout

我有一个 AuthenticatorBean 声明如下：

```
@Named
@SessionScoped
public class AutenticadorBean implements Serializable {

    @Inject
    private AutenticadorService autenticadorService; 
```

此 bean 调用 AutenticadorService 内部的一个方法，该方法验证用户凭据并在 Session 中 @Produces 该用户，如下所示：

```
@SessionScoped
public class AutenticadorServiceImpl implements AutenticadorService, Serializable {

    @EJB
    private AnalistaRepository analistaRepository;

    private Analista analistaSessao;

    @Override
    public void inserirSessaoDadosLogin(String login) {
          analistaSessao = analistaRepository.buscaPorUserName(login);
    }

    @Produces
    @Named("analistaSessao")
    public Analista getAnalistaSessao() {
          return analistaSessao;
    }
} 
```

我第一次登录应用程序时，它会在会话中生成用户，但问题是在我注销后，用不同的用户再次登录，然后尝试

```
@Inject 
Analista analistaSessao 
```

在其他服务中，该属性在我注销之前由第一个用户加载。但是如果我直接在 AutenticadorService.getAnalistaSessao(); 中访问 analistaSessao 它返回正确的用户，这是我登录的第二个用户。

这是我的注销代码：

```
public String logout() throws IOException {
    FacesContext facesContext = FacesContext.getCurrentInstance();  
    ExternalContext ex = facesContext.getExternalContext();  
    ex.invalidateSession();
    return "/home?faces-redirect=true&logout=true";
} 
```

有谁知道这种行为的原因？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T00:33:14.093

我认为您所做的应该有效，因为您使会话无效。

尝试从您的 AutenticadorServiceImpl 中删除 getAnalistaSessao() 上的 @Produces 和 @Named 并将此 @Model 类添加到您的代码中。

```
@Model
public class AnalistaProducer {

    @Inject
    private AutenticadorService autenticadorService;

    @Produces
    @Named
    public Analista getAnalistaSessao() {
          return autenticadorService.getAnalistaSessao();
    }
} 
```

# python - 如何让用户从模板在文件系统上创建 html 文件？

> ID：14713381
> 
> 赞同：0
> 
> 时间：2013-02-05T17:28:48.860
> 
> 标签：python, database, filesystems, pyramid

现在我的金字塔应用程序的主页有这个可调用的视图，它允许用户向数据库添加新的“页面”。然后可以在单独的 url 上查看这些页面。

```
@view_config(route_name='home_page', renderer='templates/edit.pt')
def home_page(request):
    if 'form.submitted' in request.params:
        name= request.params['name']
        body = request.params['body']

        page=Page(name,data)
        new= DBSession.add(page)
        return HTTPFound(location=request.route_url('view_page',pagename=name))

    return {} 
```

而不是这个，我希望表单提交在服务器文件系统上创建一个全新的 html 页面。此 html 页面应采用我提供的模板格式，其中包含在提交时从主页表单传递的值。有没有办法做到这一点？我一直在浏览[http://docs.pylonsproject.org](http://docs.pylonsproject.org)并找不到方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:48:10.743

我相信您可以使用[`render`](http://docs.pylonsproject.org/projects/pyramid/en/1.0-branch/api/renderers.html#pyramid.renderers.render)将模板/上下文呈现为字符串

[这篇](https://stackoverflow.com/a/6332533/594589)文章的例子

```
renderer_dict = {} # dictionary of values to pass to the renderer
new_comment = render('new_comment.pt', renderer_dict, request) 
```

由于您有一个 html 模板，并且您想为您的用户自定义它，您应该能够`render`使用正确的上下文运行它并将其保存到您的文件系统。

# javascript - Android Cordova 中的文件错误

> ID：14713382
> 
> 赞同：0
> 
> 时间：2013-02-05T17:28:50.547
> 
> 标签：javascript, android, cordova

我想我会发布这个，因为它可能对其他人有用，在 Android/Cordova 混合应用程序中提交文件时，我一直在努力处理错误反馈。以下代码块应该使它更容易 - 但是非常欢迎任何改进的指针。

```
 fail: function(error) { 
        var logger = cordova.require("salesforce/util/logger");

        switch(error.code)
        {
            case FileError.NOT_FOUND_ERR:
                logger.logToConsole("File Not Found");
                break;
            case FileError.SECURITY_ERR:
                logger.logToConsole("Security Error");
                break;
            case FileError.ABORT_ERR:
                logger.logToConsole("Abort error");
                break;
            case FileError.NOT_READABLE_ERR:
                logger.logToConsole("Not Readable");
                break;
            case FileError.ENCODING_ERR:
                logger.logToConsole("Encoding Error");
                break;
            case FileError.NO_MODIFICATION_ALLOWED_ERR:
                logger.logToConsole("No Modification Allowed");
                break;
            case FileError.INVALID_STATE_ERR:
                logger.logToConsole("Invalid State");
                break;
            case FileError.SYNTAX_ERR:
                logger.logToConsole("Syntax Error");
                break;
            case FileError.INVALID_MODIFICATION_ERR:
                logger.logToConsole("Invalid Modification Error");
                break;
            case FileError.QUOTA_EXCEEDED_ERR:
                logger.logToConsole("Quota Exceeded");
                break;
            case FileError.TYPE_MISMATCH_ERR:
                logger.logToConsole("Type Mismatch Error");
                break;
            case FileError.PATH_EXISTS_ERR:
                logger.logToConsole("Path Already Exists Error");
                break;
        }
        logger.logToConsole("Error code:: " + error.code);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:28:50.547

这是导致问题的文件保存例程（原来它需要 CREATE: true 标志）。希望它有帮助。

```
saveLocal: function (file, data, sync) {

        //Accept the JSON of an Inspection object
        cordova.require("salesforce/util/logger").logToConsole("Writing to " + file);

        //Write data to the requested file
        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0,                     
                function(fileSystem) {
                    cordova.require("salesforce/util/logger").logToConsole("Writing to " + file);

                    fileSystem.root.getFile(file, {create: true}, 
                            function(fileEntry) {
                                cordova.require("salesforce/util/logger").logToConsole("Create writer");

                                fileEntry.createWriter(function (writer) {
                                        writer.write(JSON.stringify(data));

                                         //Trigger to send data to salesforce
                                         if (sync) {sync();}

                                         //send to event if registered
                                         if (onsaveend) {onsaveend(data);}

                                }, anytime.fail);

                    }, anytime.fail);
                }, anytime.fail);
    } 
```

# svn - 将一些但不是全部的更改从一个 SVN 分支合并到另一个

> ID：14713385
> 
> 赞同：0
> 
> 时间：2013-02-05T17:29:08.600
> 
> 标签：svn, svn-merge

由于我的[具体](https://stackoverflow.com/questions/14653002/svn-diff-getting-real-diffs-for-removed-readded-files-after-merge) [问题](https://stackoverflow.com/questions/14698292/svn-revert-after-merge)似乎只是让你做错了，让我列出问题，看看是否有人可以提出解决方案。

我们有一个无主干 SVN 存储库，其中包含几个有序分支——v1、v2 等。“较低”分支的更改会自动传播到“较高”分支；可能不是与`svn merge`谁知道，而是由不再在这里工作的人拼凑而成的一些 perl 脚本。当这会产生冲突时，更改不会传播；相反，开发人员会收到一封电子邮件，并且应该手动将其修复到“更高”的分支上。他们通常会这样做，但并非总是如此。

（**注意：**请不要跟我说这个“分支”结构有多疯狂。我很清楚这一点。这当然不是我的主意。）

我们已经决定（我说“我们”，但这当然不是我的主意）放弃“最高”分支并将更改从该分支移到下一个分支。但是，我们知道我们不希望代码的某些区域出现任何“更高”的差异。其他会产生需要手动解决的冲突；其他仅在版本号中更改（我们希望保留在“较低”版本）。一些更改是删除或移动，因此我们不能只是将较高版本的文件复制到较低版本的树上并称之为完成。我一直坚持这份工作。

那么：如何将部分但不是全部的更改从分支*n*移动到分支*n-1*？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:20:37.950

您可以限制要合并的修订：

```
svn merge -r fromrevision:torevision 
```

因此，只需逐步合并此修订版，不要合并您不想使用的修订版。

# java - 边框布局控件..如何移动东西

> ID：14713388
> 
> 赞同：2
> 
> 时间：2013-02-05T17:29:19.767
> 
> 标签：java, swing, layout, jtextfield, border-layout

我对 java 很好，也有很好的理解，但我坚持一个项目，我正在处理.. 我试图将 JTextField 移动到屏幕的左侧，但无论我尝试什么，它都保持在顶部居中..这是我的代码：

```
public class Display extends JFrame{
  public static final int CANVAS_WIDTH = 1000;
  public static final int CANVAS_HEIGHT = 450;
  public static final Color LINE_COLOR = Color.BLACK;
  public static final Color GROUND_COLOR = Color.GREEN;
  public static final Color CANVAS_BACKGROUND = Color.CYAN;
  public static final Color TRANS = Color.CYAN;

  private int x1 = CANVAS_WIDTH / 2;
  private int y1 = CANVAS_HEIGHT / 2;
  private int x2 = CANVAS_WIDTH /2;
  private int y2 = CANVAS_HEIGHT / 2;

  private int Sx1 = CANVAS_WIDTH ;
  private int Sy1 = CANVAS_HEIGHT ;
  private int Sy2 = CANVAS_HEIGHT ; 

  private int Rx1 = CANVAS_WIDTH - CANVAS_WIDTH;
  private int Ry1 = CANVAS_HEIGHT;
  private int Rx2 = CANVAS_WIDTH;
  private int Ry2 = CANVAS_HEIGHT ;

  private int Lx1 = CANVAS_WIDTH / 2;
  private int Ly1 = CANVAS_HEIGHT / 2;
  private int Lx2 = CANVAS_WIDTH / 2;
  private int Ly2 = CANVAS_HEIGHT / 2;

  private int Mx1 = CANVAS_WIDTH / 2;
  private int My1 = CANVAS_HEIGHT / 2;
  private int Mx2 = CANVAS_WIDTH / 2;
  private int My2 = CANVAS_HEIGHT / 2;

  int[] xs = {380, 460, 460, 540, 540, 620, 500, 380};
  int[] ys = {260, 260, 250, 250, 260, 260, 205, 260};

  private DrawCanvas canvas;
  private JTextField tfCount;
  private int count = 0;

  public class CountUpAction extends AbstractAction {
    /** Constructor */
    public CountUpAction(String name, String shortDesc, Integer mnemonic) {
       super(name);
       putValue(SHORT_DESCRIPTION, shortDesc);
       putValue(MNEMONIC_KEY, KeyEvent.VK_NUMPAD4);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
      addKeyListener(new KeyAdapter() {
        public void keyPressed(KeyEvent evt) {
          switch(evt.getKeyCode()) {
          case KeyEvent.VK_NUMPAD1:

            //original count
            count += 1;
            tfCount.setText(count + "");

          }
        }
        });
      }
    }

public class CountDownAction extends AbstractAction {
    /** Constructor */
    public CountDownAction(String name, String shortDesc, Integer mnemonic) {
       super(name);
       putValue(SHORT_DESCRIPTION, shortDesc);
       putValue(MNEMONIC_KEY, KeyEvent.VK_NUMPAD5);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
      addKeyListener(new KeyAdapter() {
      public void keyPressed(KeyEvent evt) {
        switch(evt.getKeyCode()) {
        case KeyEvent.VK_NUMPAD2:

      //original count
      count -= 1;
      tfCount.setText(count + "");

        }
      }
      });
    }
  }

  public Display() {
    canvas = new DrawCanvas();
    canvas.setPreferredSize(new Dimension(CANVAS_WIDTH, CANVAS_HEIGHT));

    Container cp = getContentPane();
    cp.setLayout(new BorderLayout());
    cp.add(canvas, BorderLayout.LINE_START);

     // Create the Actions shared by the button and menu-item
    Action countUpAction = new CountUpAction("Count Up",
          "", new Integer(KeyEvent.VK_ENTER));
    Action countDownAction = new CountDownAction("Count Down",
          "", new Integer(KeyEvent.VK_D));

    canvas.add(new JLabel("alt+4: activeate up"));
    canvas.add(new JLabel("alt+5: activate down"));
    tfCount = new JTextField("0", 8);
    tfCount.setHorizontalAlignment(JTextField.CENTER);
    tfCount.setEditable(false);
    canvas.add(tfCount, BorderLayout.LINE_START);
    //Invisible
    JButton btnCountUp = new JButton();
    btnCountUp.setFocusable(false);
    btnCountUp.setHideActionText(true);
    btnCountUp.setContentAreaFilled(false);
    btnCountUp.setBorderPainted(false);
    canvas.add(btnCountUp, DrawCanvas.LEFT_ALIGNMENT);
    //Invisible
    JButton btnCountDown = new JButton();
    btnCountDown.setFocusable(false);
    btnCountDown.setHideActionText(true);
    btnCountDown.setContentAreaFilled(false);
    btnCountDown.setBorderPainted(false);

    canvas.add(btnCountDown);
    // Set actions for buttons
    btnCountUp.setAction(countUpAction);
    btnCountDown.setAction(countDownAction);

addKeyListener(new KeyAdapter() {
  public void keyPressed(KeyEvent evt) {
    switch(evt.getKeyCode()) {
    case KeyEvent.VK_LEFT:
      Rx1 -= 10;    Ry1 += 10;
      Rx2 += 10;    Ry2 -= 10;
      x1 -=10;    x2 +=10;
      Lx1 -= 10;    Lx2 -= 10;
      Mx1 += 10;    Mx2 -= 10;
      repaint();
      break;
    case KeyEvent.VK_RIGHT:
      Rx1 -= 10;    Ry1 -= 10;
      Rx2 += 10;    Ry2 += 10;
      x1 += 10;    x2 += 10;
      Lx1 += 10;    Lx2 += 10;
      Mx1 -= 10;    Mx2 += 10;
      repaint();
      break;
    case KeyEvent.VK_DOWN:
          y1 -= 10;    y2 -= 10;
          Ly1 -= 10;    Ly2 -= 10;
          Sy1 += 10;    Sy2 -= 10;
          Ry1 +=10;    Ry2 += 10;
          repaint();
          break;
        case KeyEvent.VK_UP:
          y1 += 10;    y2 += 10;
          Ly1 += 10;    Ly2 += 10;
          Sy1 -= 10;    Sy2 += 10;
          Ry1 -= 10;    Ry2 -= 10;
          repaint();
          break;
        case KeyEvent.VK_M:
          System.exit(0);
        }
      }
    });

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setTitle("FLIGHT DISPLAY");
    pack();
    setVisible(true);
    requestFocus();
  }

  class DrawCanvas extends JPanel {
    public void paintComponent(Graphics g) {
      super.paintComponent(g);
      setBackground(CANVAS_BACKGROUND);

      g.setColor(GROUND_COLOR);
      //Draw ground Color
      g.drawRect(Sx1 - Sx1,Sy1 /2, CANVAS_WIDTH, Sy2 /2);
      g.fillRect(Sx1 - Sx1, Sy1 /2, CANVAS_WIDTH, Sy2 /2);
      g.setColor(LINE_COLOR);
      //Draw line centre horizontal
      g.drawLine(Rx1, Ry1 /2, Rx2, Ry2 /2);
      g.drawOval(x1 -15, y1 -15, 30, 30);
      g.fillOval(x1 - 5, y1 -5, 10, 10);
      //Draw line centre vertical
      g.drawLine(Mx1, My1 + My1, Mx2, My2 - My2);
      //Draw line dim
      g.setColor(Color.YELLOW);
      g.fillArc(300, 0, 400, 140, 0, 180);
      g.setColor(LINE_COLOR);
      g.drawLine(Lx1 -25, Ly1 +20, Lx2 +25, Ly2 +20);
      g.drawLine(Lx1 -50, Ly1 +40, Lx2 +50, Ly2 +40);
      g.drawLine(Lx1 -25, Ly1 +60, Lx2 +25, Ly2 +60);
      g.drawLine(Lx1 -75, Ly1 +80, Lx2 +75, Ly2 +80);
      g.drawLine(Lx1 -25, Ly1 +100, Lx2 +25, Ly2 +100);
      //Draw line dim
      g.drawLine(Lx1 -25, Ly1 -20, Lx2 +25, Ly2 -20);
      g.drawLine(Lx1 -50, Ly1 -40, Lx2 +50, Ly2 -40);
      g.drawLine(Lx1 -25, Ly1 -60, Lx2 +25, Ly2 -60);
      g.drawLine(Lx1 -75, Ly1 -80, Lx2 +75, Ly2 -80);
      g.drawLine(Lx1 -25, Ly1 -100, Lx2 +25, Ly2 -100);
      //Draw polyline centre plane
      g.drawPolyline(xs, ys, 8);

      g.drawArc(300, 0, 400, 140,  0, 180);
      g.drawLine(Mx1+30, My1 + My1, Mx2, My2 - My2);
      g.drawLine(Mx1-30, My1 + My1, Mx2, My2 - My2);

      g.drawString(Ccount, 100,100);

    }
  }

  public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
      public void run() {
        new Display();
      }
    });
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:36:31.140

还：

```
canvas.setLayout(new BorderLayout()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T19:09:06.530

1.  非常好的问题，这里发布了很好的代码+1`Swing Action`

2.  不要在里面做那个`canvas.setPreferredSize(new Dimension(CANVAS_WIDTH, CANVAS_HEIGHT));`覆盖`getPreferredSize``class DrawCanvas extends JPanel {`

3.  那么所有坐标将仅`getHeight/Weight`用于`paintComponent()`而不是硬编码所有`Objects`内部的值`paintComponent()`

4.  那么所有的都`Objects`将/可以（取决于你的......）与其父级一起调整大小

5.  将坐标硬编码为数组的局部变量，并且`paintComponent()`仅在数组中循环

6.  使用[`KeyBindings instead of KeyListener`](https://stackoverflow.com/a/8716412/714968), 那么你可以忘记 for 抓捕 for `Focus`by `setFocusable()`for`JPanel`

# c++ - 使用特定于 2012 年 11 月 CTP 的 C++11 功能时，有没有办法抑制 Intellisense 错误？

> ID：14713391
> 
> 赞同：25
> 
> 时间：2013-02-05T17:29:32.340
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, intellisense

但是，我的代码编译和运行都很好（到目前为止......），因为[Visual Studio 的 Intellisense 还不支持 2012 CTP 编译器的新 C++11 功能](https://stackoverflow.com/questions/14432802/is-there-a-way-to-use-delegating-constructors-in-visual-studio-2012#comment20093868_14433194)：

有大量非常好的（尽管是实验性的）代码带有红色下划线往往会让我有点失望。有没有办法告诉 Intellisense 忽略特定位置的错误？

有人可以推荐一个已经提供适当的语法突出显示和检查这些新功能的 IDE（特别是委托构造函数、初始化列表和可变参数模板，这些让我着迷）？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-09-20T17:45:08.650

去：

工具->选项->文本编辑器->C/C++->高级->智能感知

并将“禁用错误报告”设置为 true。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-05T17:49:44.013

我很有信心你*不能那样*做。

CTP 仅独立更新编译器，而不是 Intellisense。Intellisense 基于 EDG 的前端，CTP 不会更新（即使不考虑 CTP，Intellisense 和编译器有时也可能因此而产生分歧）。另请参阅[有关 SO 的 Q&A](https://stackoverflow.com/questions/7257011/is-visual-c-intellisense-smarter-than-the-compiler)以获得澄清。

当然，您可以完全禁用 Intellisense，但我认为这不是您所要求的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-26T12:32:24.390

在 VSCode 中，您可以使用

```
#ifndef __INTELLISENSE__
    // ... code to ignore - for example ...
    __builtin_avr_delay_cycles(16 * 6 + 8); // converts to asm code
#endif 
```

它确实使编辑器中的代码部分变暗，这有点烦人，但至少它不会报告错误并且该部分将编译得很好。

# javascript - jQuery 1.9.1 按标签名称选择仅返回第一个元素

> ID：14713392
> 
> 赞同：0
> 
> 时间：2013-02-05T17:29:32.780
> 
> 标签：javascript, jquery, selector, tagname

我正在为 Greasemonkey/Tampermonkey 开发一个用户脚本，*它*从*谷歌搜索结果页面中的标签。*

 *插件表示脚本正在运行，脚本执行了，但是什么也没发生。

我已经打开控制台并尝试手动操作，但选择器只选择了第一个*在页面中。*

 *我试过：

```
$("a")
$("a.l")
$(".l") 
```

我还尝试在文档开始、文档正文和文档结束处更改用户脚本的位置，但结果是相同的：只返回匹配的第一个元素。

脚本代码：

```
// ==UserScript==
// @name       Google onmousedown remove
// @version    0.1
// @include      /^https?://[a-z]*\.?google\.[a-z\.]+/search.*/
// @require http://code.jquery.com/jquery-1.9.1.min.js
// @run-at     document-end
// ==/UserScript==

$(document).ready(function (){
    $("a.l").each(function (){ $(this).removeAttr("onmousedown"); });
}); 
```

问题出在哪里？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:38:21.793

如果您尝试`$`在搜索页面上输入控制台，您将看到与通常`function (e,t){return new i.fn.init(e,t,u)}`由 jQuery 定义的不同的内容。所以...

似乎谷歌定义了自己的`$`功能，并且表现不同。最简单的解决方案是`jQuery`显式使用而不是`$`: `jQuery('a.l')`。

但它太长了，所以这里是 jQuery 的诀窍：而不是 document.ready，调用[jQuery](http://api.jquery.com/jQuery/#jQuery3)函数并将带有参数的函数传递给它`$`。然后在这个函数里面`$`等于`jQuery`。

```
jQuery(function ($){
    $("a.l").each(function (){ $(this).removeAttr("onmousedown"); });
}); 
```

未经测试，但应该可以工作。**

# asp.net - 在 ASP.Net TreeView 中设置图像的大小

> ID：14713394
> 
> 赞同：3
> 
> 时间：2013-02-05T17:29:36.603
> 
> 标签：asp.net, treeview, size, image-resizing

如何在 ASP.Net TreeView 中设置图像的大小？

我们尝试像这样设置大小，但图像以全尺寸显示：

```
<asp:TreeView 
    runat="server"
    DataSourceID="KnowledgeAcademySiteMap">

    <RootNodeStyle ImageUrl="/Images/book.png" Height="32px" Width="32px" />
    <ParentNodeStyle ImageUrl="/Images/book.png" Height="32px" Width="32px" />
    <LeafNodeStyle ImageUrl="/Images/book.png" Height="32px" Width="32px" />
</asp:TreeView> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T05:59:05.477

该高度和宽度应用于树视图节点，**而不是图像**，这解释了为什么图像大小不会改变。

您可以：

1.  使用 Photoshop、.NET Paint 等更改图像的大小或
2.  将 CSS 样式规则应用于树视图中包含的图像，例如：

**CSS：**

.treeView img { 宽度：32px; 高度：32px；}

**ASPX：**

```
<asp:TreeView CssClass="treeView" ... 
```

# maven-2 - maven 中依赖工件的版本

> ID：14713396
> 
> 赞同：0
> 
> 时间：2013-02-05T17:29:55.513
> 
> 标签：maven-2

我正在开发一个涉及 3 个工件 X、Y、Z 的开源项目，其中 X 依赖于 Y，Y 依赖于 Z。

我对 X 进行了一些更改，并想给它一个本地版本，所以我修改了 pom.xml 以将版本命名为 1.0-foo，但我也确保在构建期间，我们使用 1.0 版本Y，所以我有一些这样的行

```
<groupId>com.myCom</groupId>
<artifactId>X</artifactId>
<packaging>jar</packaging>
<name>X Jar</name>
<version>1.0-foo</version> 
```

和

```
<dependency>
  <groupId>com.myCom</groupId>
  <artifactId>Y</artifactId>
    <version>1.0</version>
</dependency> 
```

我知道 Y 也依赖于 Z，因为如果我执行“mvn dependency:list”，我会得到这样的结果：

```
[INFO]    com.myCom:Y:jar:1.0:compile
[INFO]    com.myCom:Z:jar:1.0:compile 
```

这一直为我们工作，直到开源项目升级到 2.0。我设置了类似于上面的 pom.xml（只需将“1.0”更改为“2.0”），但现在我的构建失败，抱怨它找不到版本“2.0-foo”的 Z。

错误消息类似于：

```
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Failed to resolve artifact.

Missing:
----------
1) com.myCom:Z:jar:>2.0-foo

  Try downloading the file manually from the project website.

  Then, install it using the command: ...

  Path to dependency:
        1) com.myCom:X:jar:>2.0-foo
        2) com.myCom:Y:jar:2.0
        3) com.myCom:Z:jar:>2.0-foo 
```

我不明白为什么现在 maven 认为 Y（版本 2.0）取决于 Z 版本 2.0-foo 而不仅仅是 2.0。我做错了什么？

我还在 1.0 检查了 Y 的 pom.xml。它说

```
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd" xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.myCom</groupId>
    <artifactId>Y</artifactId>
    <packaging>jar</packaging>
    <name>Y</name>
    <url>http://www.myCom.com</url>
    <parent>
      <groupId>com.myCom</groupId>
      <artifactId>A</artifactId>
      <version>1.0</version>
    </parent>
    <dependencies>
      <dependency>
        <groupId>com.myCom</groupId>
        <artifactId>Z</artifactId>
      </dependency>
    ... 
```

而 Y 在 2.0 时的值几乎相同：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"
         xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.myCom</groupId>
    <artifactId>Y</artifactId>
    <packaging>jar</packaging>
    <name>Y</name>
    <url>http://www.myCom.com</url>
    <parent>
        <groupId>com.myCom</groupId>
        <artifactId>A</artifactId>
        <version>2.0</version>
    </parent>
    <dependencies>
        <dependency>
            <groupId>com.myCom</groupId>
            <artifactId>Z</artifactId>
        </dependency> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T22:39:05.240

我发现了问题。我的项目 X 有一个父项目，其中`pom.xml`有一个`dependencyManagement`部分指定 Y 依赖于 Z 和 version `${project.version}`，这就是获取版本`2.0-foo`的方式。

我更改了`dependencyManagement`from `${project.version}`to中的行`${upStreamVersion}`，设置为`2.0`，问题解决了。

感谢你的帮助！

# objective-c - NSMutable 数组计数给出 EXC_BAD_ACCESS

> ID：14713399
> 
> 赞同：0
> 
> 时间：2013-02-05T17:30:06.387
> 
> 标签：objective-c, nsmutablearray

我对Objective C很陌生。

我有一个类 PassageViewController。这是.h文件：

```
#import <UIKit/UIKit.h>

@interface PassagesViewController : UIViewController {
    UIButton *showPassagesButton;
    UIButton *addButton;

    UIView *passagesPanel;
}

@property (nonatomic, retain) NSMutableArray *titlesArray;
@property (nonatomic, retain) NSMutableArray *thePassages;

@end 
```

在 .m 文件中，我有：

```
@implementation PassagesViewController

@synthesize thePassages;

- (id) init {
    if (self = [super init]) {

        self.title = @"Passages";

    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
 // Do any additional setup after loading the view.

    thePassages = [NSMutableArray arrayWithCapacity:0];

    [self initTestPassages];
    NSLog("%@", [thePassages description]);

    ...
    (Code to lay out the buttons etc on screen, as I'm not using a xib file)
    ...
} 
```

initTestPassages 方法只是用一堆不同的对象（使用方法`addObject`）填充 thePassages。这个方法不打算在完成的应用程序中使用，我只是在玩 thePassages 以确保我完全理解它是如何工作的。（我不知道。） viewDidLoad 方法中的 NSLog 行告诉我，thePassages 包含我希望它包含的对象，至少在那时。

问题是，当我尝试从上述方法之外的任何地方访问 _thePassages 时，应用程序崩溃并显示 EXC_BAD_ACCESS 消息。例如，我创建了一个包含单行的方法`int i = [thePassages count]`并调用该方法（例如，通过将其分配给屏幕上的一个 UIButtons 崩溃并给出错误。

我看过类似的问题，据我所知，问题与内存管理有关，但这确实不是我非常了解的主题，我不知道从哪里开始。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T17:32:56.670

改变

```
thePassages = [NSMutableArray arrayWithCapacity:0]; 
```

到

```
self.thePassages = [NSMutableArray arrayWithCapacity:0]; 
```

**为什么？**

原行是直接设置值，没有经过生成的setter方法。setter 方法将为您保留对象，而直接设置它时，您需要自己做。因此，您已将一个自动释放的对象分配给一个变量，因此虽然它当前在 的范围内有效`viewDidLoad:`，但随后当实例被释放和解除分配时，对象引用将变得无效。

**引导说明：**您是否考虑过切换到 ARC？它将消除此类问题。

# objective-c - ScrollView 中的动态结构化内容

> ID：14713401
> 
> 赞同：0
> 
> 时间：2013-02-05T17:30:21.747
> 
> 标签：objective-c

我有一个带有 ScrollView 和不同元素的 DetailContentView。

例如，我必须以编程方式将 3 个标题和 3 个文本添加到名为“thisShadowBox”的 UIView 中。

我怎样才能以更简单的方式添加元素？这是我的第一次尝试，但在此之后我需要文本的高度来放置第二个元素，对吧？

```
UITextView *addThisText = [[UITextView alloc] initWithFrame:CGRectMake(0, 0, 305, 200)];
[thisShadowBox addSubview:addThisDescription]; 
```

我希望有另一种方式。类似于 HTML/CSS 中的内容：

```
<div style="background:#CCCCCC">
 <p>Textblock1</p>
 <p>Textblock2</p>
</div> 
```

在 UIWebView 中使用 HTML 代码并不是真正的替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:45:50.480

```
- (CGSize)sizeWithFont:(UIFont *)font constrainedToSize:(CGSize)size lineBreakMode:(NSLineBreakMode)lineBreakMode; // NSTextAlignment is not needed to determine size 
```

使用该方法获取字符串内容的高度，通过简单的数学加法逻辑实现

使用此方法获取高度

```
-(CGFloat)getStringHeightOfString:(NSString *)inputString withFont:(UIFont *)font with:(CGSize)maxSize
{
  CGSize size = [inputString sizeWithFont:font
                               constrainedToSize:maxSize
                                   lineBreakMode:NSLineBreakByWordWrapping];
    return size.height;

} 
```

# javascript - 处理多个 ID

> ID：14713407
> 
> 赞同：0
> 
> 时间：2013-02-05T17:30:46.133
> 
> 标签：javascript, jquery

我正在为表单中的所有输入字段制作字符计数器。这是我的脚本，当我专注于输入字段时，当我离开它时，以及当我完成按键时：

```
$(document).ready(function () {
    $("#in1").keyup(function () {
        $("#count1").text(50 - this.value.length);
    });
    $("#in1").focus(function () {
        $("#countainer1").show();
        $("#count1").text(50 - this.value.length);
    });
    $("#in1").blur(function () {
        $("#countainer1").hide();
    });
}); 
```

你可以在这里看到它工作：http: [//jsfiddle.net/UQFD6/12/](http://jsfiddle.net/UQFD6/12/)

问题是：

**我必须为每个 ID 生成脚本吗？**

我的意思是，代码将是相同的，但适用于不同的 ID：`#input1`显示`#countainer1`和修改`#count1`，然后`#input2`是`#countainer2`和`#count2`，等等。

我想过使用类而不是 id，但是当它显示容器时，它将显示该类的每个容器，而不仅仅是我正在写入的字段的容器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:36:38.930

不，您可以使用 class 而不是`#in1`，例如将*in*类添加到您当前提供 id *in1*、*in2*等的元素中。

```
$(".in").keyup(function () { 
```

`data-id=1`您可以在需要选择的与当前关联的元素上使用属性`#in1`，例如

```
var id = $(this).data('id');
$(".count[id='" + id + "']").text(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:44:06.870

您可以尝试使用类：

```
$(document).ready(function () {
    $(".in").keyup(function () {
        $(this).siblings(".count").text(50 - this.value.length);
    }).focus(function () {
        $(".countainer").show();
        $(this).siblings(".count").text(50 - this.value.length);
    }).blur(function () {
        $(this).siblings(".countainer").hide();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T17:35:20.287

I'd suggest this :

```
$(document).ready(function () {
    $('input[id^=in]').each(function(){ // all inputs whose id starts with "in"
       var i = this.id.slice(2); // finds "32" from "in32"
        $(this).keyup(function () {
            $("#count"+i).text(50 - this.value.length);
        }).focus(function () { // let's chain
            $("#countainer"+i).show();
            $("#count"+i).text(50 - this.value.length);
        }).blur(function () {
            $("#countainer"+i).hide();
        });
    });
}); 
```

# dll - 如何使用 Microsoft Linker /Export 参数

> ID：14713419
> 
> 赞同：1
> 
> 时间：2013-02-05T17:31:23.117
> 
> 标签：dll, linker, export

我想使用 Microsoft Linker 从我的目标文件中手动导出函数。当我为每个函数使用参数时，它工作正常，如下所示：

```
/Export:ExportedFunction1$qqsv /Export:ExportedFunction2$qqsv and so on... 
```

然后链接器会自动正确地分配排序。但是在导出表中，实际的导出名称是“ `ExportedFunction1$qqsv/ExportedFunction2$qqsv/etc..`”我尝试了这样的参数：

```
/Export:ExportedFunction1$qqsv,1,ExportedFunction1 /Export:ExportedFunction2$qqsv,2,ExportedFunction2 
```

但我认为我使用的参数错误？！如何正确使用 /Export 参数为导出分配我自己的名称？

PS.：我正在使用 Microsoft (R) 增量链接器版本 7.00.9210

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T13:26:01.950

```
#pragma comment(linker, "/EXPORT:ExportedFunction1$qqsv=_YouMangledFunction1@@")
#pragma comment(linker, "/EXPORT:ExportedFunction2$qqsv=_YouMangledFunction2@@") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T21:21:21.260

我不相信您可以使用 /Export 命令行开关获得这种控制，但您可以使用 .DEF 文件来实现：

[https://docs.microsoft.com/en-us/cpp/build/reference/exports](https://docs.microsoft.com/en-us/cpp/build/reference/exports)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T20:02:20.140

这是一个带有 DEF 文件的示例解决方案。

**DLL 项目：**

**CppLib.h：**

```
#ifdef CPPLIB_EXPORTS
#define CPPLIB_API __declspec(dllexport)
#else
#define CPPLIB_API __declspec(dllimport)
#endif

CPPLIB_API double MyFunction1(double); 
```

**CppLib.cpp：**

```
CPPLIB_API double MyFunction1(double dd)
{
    return dd;
} 
```

**CppLib.def：**

```
LIBRARY

EXPORTS
MySuperFunction=MyFunction1 @1 
```

构建 DLL。

**如果我们在 CppLib.DLL 上运行 dumpbin，我们会得到：**

```
...
    ordinal hint RVA      name

          2    0 0001101E ?MyFunction1@@YANN@Z = @ILT+25(?MyFunction1@@YANN@Z)
          1    1 0001101E MySuperFunction = @ILT+25(?MyFunction1@@YANN@Z)
... 
```

* * *

**使用 CppLib.dll 的控制台应用程序：**

```
#include "CppLib.h"

#include <Windows.h>
#include <iostream>

int main()
{
    typedef double(*MY_SUPER_FUNC)(double);

    HMODULE hm = LoadLibraryW(L"CppLib.dll");
    MY_SUPER_FUNC fn1 = (MY_SUPER_FUNC)GetProcAddress(hm, "MySuperFunction"); // find by name
    MY_SUPER_FUNC fn2 = (MY_SUPER_FUNC)GetProcAddress(hm, MAKEINTRESOURCEA(1)); // find by ordinal

    std::cout << fn1(34.5) << std::endl; // prints 34.5
    std::cout << fn2(12.3) << std::endl; // prints 12.3

    return 0;
} 
```

# iphone - 仪器优化 UIImageView

> ID：14713422
> 
> 赞同：2
> 
> 时间：2013-02-05T17:31:36.093
> 
> 标签：iphone, uiimageview, instruments, uicollectionview

我正在使用以下代码加载一堆 UIImages（它们是本地的并与应用程序一起预加载）：

```
NSString*plistPath = [[NSBundle mainBundle] pathForResource:@"images" ofType:@"plist"];
NSArray *array = [NSArray arrayWithContentsOfFile:plistPath];
NSMutableArray *finalArray = [[NSMutableArray alloc] initWithCapacity:array.count];
for(int i=0;i<array.count; i++) {
    [finalArray addObject:[UIImage imageNamed:[NSString stringWithFormat:@"%@",[array objectAtIndex:i]]]];
} 
```

然后在collectionView中：

```
cell.cellImage.image = [finalArray objectAtIndex:indexPath.row]; 
```

该collectionView的呈现存在巨大滞后。我用以下仪器屏幕截图捕捉到了这种滞后：

![在此处输入图像描述](../Images/eec003c3f47c2767c3070bcff5c92a77.png)

该延迟（由用户体验并显示在图表中）与下面的实际调用树之间存在重大脱节，显示没有延迟。我在 collectionView 的每个单元格中加载 500k jpg。这个仪器分析基本上是说我在代码中无能为力，这是系统库延迟吗？

编辑：我的问题不再是关于我的 collectionView 的这个特定用例。一般是关于仪器的。如果我在屏幕截图中选择了选项并且应用程序显示明显滞后，但时间分析器没有，我可以在我的代码中做些什么来提高速度吗？我想我更一般地询问时间分析器、设置及其结果。如果所有的延迟都归因于较低级别的代码或系统框架，我能做些什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:23:00.607

您`Hide System Libraries`在右侧设置面板中启用了复选框，因此它将隐藏对您未定义的方法的任何调用。因此，例如，如果您进行大量调用`imageNamed:`并选中此复选框，您将看不到系统解压缩和加载这些图像所花费的时间。

因此，从技术上讲，所有“滞后”/缓慢都在系统框架中，但您可以控制更改使用它们的方式。您还可以监控系统框架中的哪些操作在时间上是最昂贵的。

取消选中此框是解决方案：

![取消选中此框](../Images/ca823c345cd9be52a4254083a47498b1.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T17:41:05.770

[`imageNamed:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/clm/UIImage/imageNamed%3a)将缓存您的图像。用于[`imageWithContentsOfFile:`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/clm/UIImage/imageWithContentsOfFile%3a)避免缓存。
希望这会加快您的加载速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T06:33:10.727

您是否将它们加载到后台/单独的线程上，如果没有，那么请这样做将解决您的问题并将它们加载到队列中。因此，一旦加载图像，通知将使用它的对象并将图像对象传递给它。

创建一个简单的 NSOperation 加载图像并通知分配给它的委托。为要加载的每个图像创建此类的对象并将其添加到 NSOperationQueue 并将 NSOperationQueue 的最大并发操作计数设置为 1。

# asp.net - Webservice 仅返回 System.Xml.XmlDocument 字符串

> ID：14713426
> 
> 赞同：1
> 
> 时间：2013-02-05T17:31:48.217
> 
> 标签：asp.net, asp.net-mvc-3, web-services, c#-4.0

当我调用我的 web 服务时，它只返回字符串“System.Xml.XmlDocument”而不是实际的 XML。我需要改变什么才能让它返回一个实际的 XML 文档？

```
 public XmlDocument GetCommoditiesXmlDocument() {
            XmlDocument xdoc = new XmlDocument();
            StringWriter sw = new StringWriter();
            XmlTextWriter xtw = new XmlTextWriter(sw);

            //gets XML as XmlElement

            quotes.WriteTo(xtw);
            xdoc.LoadXml(sw.ToString());
            return xdoc;
        } 
```

我正在使用 .NET 4.0（如果重要，还有 MVC3）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:34:13.013

ASP.Net MVC 不知道如何将 an 序列`XmlDocument`化为 HTTP 响应。

相反，您应该直接返回 XML 源：

```
return Content(sw.ToString(), "text/xml"); 
```

# angularjs - 尝试通过 angular js http get 访问 facebook graph api 返回错误

> ID：14713430
> 
> 赞同：0
> 
> 时间：2013-02-05T17:31:55.477
> 
> 标签：angularjs

我正在尝试使用下面的代码通过 facebook graph api 获取用户链接。但它不起作用。

```
$http.get('https://graph.facebook.com/me?access_token='+response.authResponse.accessToken).success(function(data) {

                alert(data);

            }).error(function(data, status, headers, config) {
                    alert(data+status+headers+config);
                }); 
```

# php - 一个表单中的两个表单操作 PHP

> ID：14713432
> 
> 赞同：1
> 
> 时间：2013-02-05T17:31:58.677
> 
> 标签：php, javascript, html

我的 php 代码有两个问题。

第一个是多变

```
$linkorig 
```

之后可以看到

```
$_POST['formsubmitted'] 
```

，当我从重定向页面得到它时？

第二个问题是如何用不同的动作提交表单，毕竟错误检查？

也许可以使用一些 javascript 或 php 代码。

```
<?php
    $linkorig=$_POST['link-orig']; // get destination link from redirected page , for excample http://mikrotik.lv -- works fine 
    if (isset($_POST['formsubmitted'])) 
    {
        // script try login with credentials  with  <form action="login.php"   --- works fine
        //Error checking !
        if (empty($error)) //if not found any errors {
            // login with credentials and same form but  with  <form action="other_login.php"   --- i dont know how to do :(
        }
    }
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Login Form</title>
    </head>
    <body>
        <form name="login"  action="login.php"  method="post" class="registration_form" onSubmit="return doLogin()" >
            <input type="hidden" name="dst" value="<?php echo $linkorig; ?>" />
            <input type="hidden" name="popup" value="true" />
            <fieldset>
                <legend>Login Form  </legend>
                <p>Enter Your username and Password Below  </p>
                <div class="elements">
                    <label for="name">Email :</label>
                    <input type="text" id="e-mail" name="username" size="25" value="" />
                </div>
                <div class="elements">
                    <label for="Password">Password:</label>
                    <input type="password" id="Password" name="password" size="25" />
                </div>
                <div class="submit">
                    <input type="hidden" name="formsubmitted" value="TRUE" value="OK" />
                    <input type="submit" value="Login" />
                </div>
            </fieldset>
        </form>
        <!-- $(if error) -->
            <br /><div style="color: #FF8080; font-size: 9px"> </div>
        <!-- $(endif) -->
        <script type="text/javascript">
            <!--
            document.login.username.focus();
            //-->
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:48:01.763

您可以轻松地使用一种形式进行 2 项操作：

```
<form method='post' action='post.php'>
<input type='text' name='field1' />
<input type='text' name='field1' />

<button name='action1'>action1</button>
<button name='action2'>action2</button>
</form> 
```

在页面上`post.php`：

你所有的变量都将在`$_POST`，即`$_POST['field1'], $_POST['field2'], $_POST['action1'] and $_POST['action2']` 使用一个简单的条件：

```
if(isset($_POST['action1'])) {
  //some code here but still check action2

  // edit : you can call the action2 with jquery and [ajax][1]
  // you can use header('location: http://example.com?field1='.$_POST['field1'].'&field2='.$_POST['field1']) to redirect, but no output before using header => see ob_get_clean() if you have any problem.
}
else { exit; } //stop it all if action1 failed 
```

* * *

但是，如果您重定向您的页面，您将不再有 $_POST 变量。您可以`/page.php?var1=...`像使用 $_POST 一样使用和 $_GET 它们。

# join - Access 2010 中 1:M Join 的左表仅显示唯一记录

> ID：14713433
> 
> 赞同：1
> 
> 时间：2013-02-05T16:55:52.450
> 
> 标签：join, ms-access

我有一个属性表、一个土地所有者表和一个将它们关联起来的链接表。财产和土地所有者之间的关系是一对多的。我想使用查询来构建一个数据表视图，该视图显示加入每个属性的土地所有者。我已经成功地让 LEFT JOIN 工作，但我更愿意在结果中只显示左表中的唯一记录（空白单元格中的空值可以接受）。

当前结果：

* * *

```
PID       OWNERID
 1           32
 1           23
 2           45
 2           18
 2           12
 3           98
 3           12
 3           23 
```

期望的结果：

* * *

```
PID       OWNERID
 1           32
             23
 2           45
             18
             12
 3           98
             12
             23 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:46:33.570

我对此不太满意，因为我认为报告会更适合这种类型的展示，但这是一个想法。你只会减少排序的能力。PID 必须始终是第一个排序字段，否则它没有意义。

您将需要一个文本框：

```
=getposition([pid]) 
```

一些代码

```
Function getposition(pos)
    ''Set rs = Screen.ActiveForm.RecordsetClone
    Set rs = Forms!NameOfFormHere.RecordsetClone
    rs.FindFirst "pid=" & Nz(pos, 0)
    getposition = rs!ownerid
End Function 
```

和条件格式：

![有条件的](../Images/c57cb5b6c445a662ba2c23849a3ef58f.png)

# ajax - Handlebar.js 没有 Ajax？

> ID：14713434
> 
> 赞同：0
> 
> 时间：2013-02-05T17:32:03.170
> 
> 标签：ajax, handlebars.js

我想为我自己的网站使用 handlebar.js 模板来显示文章列表。但是，如果我想使用 handlebar.js，我没有选择通过我认为的 API 通过 ajax 请求调用我的数据。然后在控制台或 JS 文件中，用户可以看到我的数据存储在哪里并捕获 json 输出。有什么办法可以保护这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:35:24.323

There is no way to show data to the user without letting the user see the data.

You should change your API service to not return anything you don't want the user to see.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:35:39.113

好吧，使用会话和正常保护来防止直接 Web 请求。不要忘记 ajax 只是对公共 URL 的调用。

此外，您还可以查看有关如何保护 JSON 的相关问题：[为什么 Google 会添加 while(1)；到他们的 JSON 响应？](https://stackoverflow.com/questions/2669690/why-does-google-prepend-while1-to-their-json-responses)

# asp.net - 内联 DIV 在 IE9+ 中显示不正确

> ID：14713437
> 
> 赞同：1
> 
> 时间：2013-02-05T17:32:15.243
> 
> 标签：asp.net, css, html, internet-explorer-9, internet-explorer-10

我试图在页面上显示三个大小均匀的 DIV，左右 DIV 分别左右对齐，中间的 DIV 居中，它们之间的空间均匀。我找到[了这个答案](https://stackoverflow.com/questions/6865194/fluid-width-with-equally-spaced-divs)，这正是我想要的并且完美地工作。

完美地在 Chrome 和 Firefox 中，就是这样。在 IE9（在 Windows 7 上）和 IE10（在 Windows 8 上）它看起来完全不同，盒子堆叠而不是并排，CSS 中指定的盒子的宽度和高度完全被忽略了，奇怪的是，控件在第一个DIV 貌似每个DIV 都在自己的DIV 中带有边框，而不是在同一个DIV 中在一起。谁能告诉我我（或 IE）哪里出错了？

**HTML**

```
<div id="caselookup">
    <div class="box">
        <div class="boxcontent">
            <asp:TextBox ID="txtCaseNo" runat="server" /><br />
            <asp:Button ID="btnLookupCaseNo" runat="server" Text="Lookup Case" />
        </div>
    </div>
    <div class="box">
        <div class="boxcontent">
            <asp:ListBox ID="lstUnmatchedAppointments" runat="server"  />
        </div>
    </div> 
    <div class="box"> 
        <div class="boxcontent">
            <asp:Button ID="btnContinue" runat="server" Text="New Colic Record" />
        </div>     
    </div> 
    <span class="stretch"></span>
</div> 
```

**CSS**

```
#caselookup
{
    text-align: justify;
}
.box
{
    vertical-align: top;
    display: inline-block;
    *display: inline;
    text-align: center;
    min-width: 30%;
    border: 1px solid black;        
    height: 200px;
}
.boxcontent
{
    padding:10px;
}
.stretch
{
    width: 100%;
    display: inline-block;
    font-size: 0;
    line-height: 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:49:54.120

在 Internet Explorer 中，我打开了兼容性视图设置（我必须启用命令菜单才能从工具中选择它），然后取消选中“在兼容性视图中显示 Intranet 站点”选项。之后我的页面正确显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:21:03.847

您是否在页面中运行特定的 DocType？我发现使用 XHTML Transitional 1.0 文档类型有助于在所有浏览器中以相同或更接近的方式呈现大多数内容。

# html - 能不能 tag resize when a inside is rendered? As you know, an HTML element can have a lot of geometry variation for width and height of cells and the whole table overall. The browser does a lot of work re- 问问题 问问题 2013-02-05T17:32:33.760 358 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. As you know, an HTML

element can have a lot of geometry variation for width and height of cells and the whole table overall. The browser does a lot of work re-sizing cell height and width to fit "nicely." in the available window size. A huge range of variation exists in table geometry, of course. When an contains an HTML

, that former tag can specify width="100%" (or some fixed pixel width), which render pretty well for nominal cases. However if the table height as-rendered is rather large, setting height="100%" doesn't yield a very tall table, and it's not dynamic as the browser window changes. And using fixed pixel height= is unhelpful if you don't know the as-rendered height in advance. If you're relying on the browser to arrange the cells in its default behavior. Does anyone know any tricks to get to better respect the dimensions of an HTML

inside it? I can picture the inquiring its contents for height or width attributes on a root element, e.g. SVG markup has these and resizes the containing smartly. Would it help to fake out by including these attributes in the

markup? (I've tried, but no joy in limited attempts). I wish were smarter about this, but apparently it's not. How do I fix CATransform3D redefinition error on Xcode with iOSOpenDev? Yesterday, as iOS 6 Jailbreak was released, I decided to learn how to program tweaks. I've been searching some info about it and I've seen that iOSOpenDev is the right tool to create them. The problem is that I don't know how to start. For example, I create a simple "Hello World" as a Notification Center Widget but an error happens in a Springboard header file: I've searched some info about this error but I don't understand how should I fix it. Pages I've found are this pair: https://github.com/kokoabim/iOSOpenDev/issues/29 https://github.com/kokoabim/iOSOpenDev/issues/23 Could you help me, please? htmlobjecthtml-tableresizeautoresize 4 1 回答 1 This answer is useful 0 No. You can use a seemless iframe instead (although this is a bleeding edge feature with limited browser support at present). 于 2013-02-05T17:34:57.207 回答 Related 0 database - LinkedIn或google如何查询有关圈子中的连接信息 3 javascript - mouseenter和鼠标效果无法正常工作 2 python - 我正在尝试进行情绪分析，需要有关如何开始的建议 5 c# - 将字符串添加到列表 0 angularjs - 如何在指令中使用绑定？ 1 android - Android 应用程序在启动时崩溃 2 ios - 我们可以将后台线程操作更改为主线程吗？ 1 php - 这个 PHP CURL/SOAP 脚本发生了什么？ 6 html - 如果不需要，CSS隐藏滚动条 3 jquery-ui - phonegap 中颜色选择器的示例代码 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14713442
> 
> 赞同：0
> 
> 时间：
> 
> 标签：html, object, html-table, resize, autoresize

As you know, an HTML `<table>` element can have a lot of geometry variation for width and height of cells and the whole table overall. The browser does a lot of work re-sizing cell height and width to fit "nicely." in the available window size. A huge range of variation exists in table geometry, of course.

When an `<object>` contains an HTML `<table>`, that former tag can specify width="100%" (or some fixed pixel width), which render pretty well for nominal cases. However if the table height as-rendered is rather large, setting height="100%" doesn't yield a very tall table, and it's not dynamic as the browser window changes. And using fixed pixel height= is unhelpful if you don't know the as-rendered height in advance. If you're relying on the browser to arrange the cells in its default behavior.

Does anyone know any tricks to get `<object>` to better respect the dimensions of an HTML `<table>` inside it? I can picture the `<object>` inquiring its contents for height or width attributes on a root element, e.g. SVG markup has these and resizes the containing `<object>` smartly. Would it help to fake out `<object>` by including these attributes in the `<table>` markup? (I've tried, but no joy in limited attempts).

I wish `<object>` were smarter about this, but apparently it's not.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:34:57.207

No.

You can use a [seemless](http://www.w3.org/TR/html5/embedded-content-0.html#attr-iframe-seamless) iframe instead (although this is a bleeding edge feature with limited browser support at present).

# ios - 如何使用 iOSOpenDev 修复 Xcode 上的 CATransform3D 重新定义错误？

> ID：14713443
> 
> 赞同：1
> 
> 时间：2013-02-05T17:32:43.917
> 
> 标签：ios, xcode, catransform3d

昨天，随着 iOS 6 Jailbreak 的发布，我决定学习如何编程调整。我一直在搜索有关它的一些信息，并且发现 iOSOpenDev 是创建它们的正确工具。

问题是我不知道如何开始。例如，我创建了一个简单的“Hello World”作为通知中心小部件，但在 Springboard 头文件中发生错误：

![在此处输入图像描述](../Images/3c82bc4650d3bc921bc6630e70841e0b.png)

我已经搜索了有关此错误的一些信息，但我不明白我应该如何解决它。我发现的页面是这对：

*   [https://github.com/kokoabim/iOSOpenDev/issues/29](https://github.com/kokoabim/iOSOpenDev/issues/29)
*   [https://github.com/kokoabim/iOSOpenDev/issues/23](https://github.com/kokoabim/iOSOpenDev/issues/23)

请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:20:16.223

解决方案是将“#define CATransform3D 1”放在其上方的行上方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:16:33.473

**说明：**如果定义了某些内容，则无法重新定义它，这在 CATransform3D 中发生。

**解决：**简单地排除产生错误的定义。或者，使用预处理器逻辑包装它以“知道”它是否已经定义（这需要它的原始定义来表明它已经定义）。

**仅供参考：**最新的 iOSOpenDev 安装已将此注释掉。

# c# - “重新捕获”转义字符

> ID：14713445
> 
> 赞同：0
> 
> 时间：2013-02-05T17:32:52.397
> 
> 标签：c#

在 c# 中，假设我不知道最后一个字符、转义字符之后的字符或前面是否有任何字符，或者多个转义字符，我怎么能从字面上`"\\b"`变成字面意思？`"\b"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:52:32.383

我不能 100% 确定您的确切要求，但要了解`"\\b"`您`"\b"`可以尝试使用 Regex Unescape。

```
var foo = @"\\b"; //The @ is important if you wish to keep things literal 
var bar = System.Text.RegularExpressions.Regex.Unescape(foo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:44:45.507

在不知道“\b”之前出现的字符的情况下，您无法做到这一点。

在这种特殊情况下，该字符串将被解析为，`"\b"`因为转义序列`'\\'`被读取为`'\'`.

但是，如果有另一个`"\"`前面`"\\b"`的，你会得到不同的结果。

例如，`"\\\b"`将被解析为两个字符：`"\"`和`"\b"`.

这不会直接回答您的问题，但如果您不熟悉 C# 中的逐字字符串文字，您可能需要查找它们。您可以通过在字符串前面加上 @ 符号来将字符串文字标记为逐字字符串文字。这告诉编译器忽略转义序列（双引号除外）并完全按原样解析字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T17:52:15.410

只需简单的 String.Replace 就足够了：

```
var source = @"foo\\bbar";
var result = source.Replace(@"\\b", @"\b") 
```

如果您不知道“b”部分 - 使用正则表达式版本的[替换](http://msdn.microsoft.com/en-us/library/ht1sxswy%28v=vs.100%29.aspx)，它允许您检查匹配本身：

```
var result = Regex.Replace(source, @"\\\\.", 
       match => match.Value .Substring(1)) 
```

# mod-rewrite - Simple Rewrite not working

> ID：14713451
> 
> 赞同：0
> 
> 时间：2013-02-05T17:33:02.490
> 
> 标签：mod-rewrite

I've been staring at this for far too long. To cope with a Wordpress URL structure change, I need a URL rewrite to cope with old links that are floating around the net. The rule I've created is

```
RewriteRule [0-9]+/[0-9]+/[0-9]+/(.+)$ /$1 [R=301,L] 
```

To match posts with URLs like

```
/2013/02/05/Some-wonderful-article 
```

supposedly redirecting to

```
/Some-wonderful-article 
```

Apache seems to be ignoring this, though, and happily sticks with the original URL. Can anyone see why? Am I forgetting some quirk of Apache's implementation of regex? I've already wasted some time playing with \d instead of [0-9] ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:36:42.900

试试这个规则：

```
RewriteEngine on
RewriteBase /
RewriteRule ^/?[0-9]+/[0-9]+/[0-9]+/(.+)$ /$1 [R=301,L] 
```

我添加了激活重写引擎的命令以及定义 RewriteRules 基础的行。

# ios - 为全屏视图自定义旋转轴？

> ID：14713460
> 
> 赞同：1
> 
> 时间：2013-02-05T17:33:41.267
> 
> 标签：ios, objective-c

简而言之，我打算在它的 y 轴（左边缘）旁边旋转一个全屏大小的视图（绑定大小：320,460）。

我使用下面的代码通过 CAAnimation 实现了旋转：

```
CATransform3D transform = CATransform3DMakeRotation(M_PI_2, 0, 1, 0);
CGPoint origPoint = self.view.center;

//Set anchor Point
self.view.layer.anchorPoint = CGPointMake(0, 0.5);
//Set center point
[self.view setCenter: origPoint];

transform.m34 = 1.0/8000.0;
transform.m14 = -0.0015; 
CABasicAnimation *animRotate = [CABasicAnimation animationWithKeyPath:@"transform.rotation.y"];
[animRotate setFromValue:[NSValue valueWithCATransform3D:transform]];
[animRotate setDuration:4.0];
[self.view.layer addAnimation:animRotate forKey:nil]; 
```

所以我的问题是：如何将旋转轴设置为该视图的左边缘？

非常感谢。

[我通过这个有用的博客](http://blog.ideveloper.tv/understanding-the-anchor-point/)参考了锚点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:07:46.657

调整锚点时，您似乎需要调整位置。请参阅此之前的帖子：

[更改我的 CALayer 的锚点会移动视图](https://stackoverflow.com/questions/1968017/changing-my-calayers-anchorpoint-moves-the-view)

该帖子中的链接是旧的，新链接在这里： [https ://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/CoreAnimationBasics/CoreAnimationBasics.html#//apple_ref/doc/uid /TP40004514-CH2-SW3](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreAnimation_guide/CoreAnimationBasics/CoreAnimationBasics.html#//apple_ref/doc/uid/TP40004514-CH2-SW3)

看起来关键句在“Anchor Points Affect Geometric Manipulations”下，即“位置属性始终相对于图层的锚点指定”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T10:31:58.407

我终于弄清楚了为什么我在这个动画中“无法设置旋转轴”：

在仔细检查了图层的边界和大小的返回值后，我发现这是因为`viewWillAppear`应用程序无法检索实际框架或边界大小的方法（高度或宽度都会返回0）。

当我将问题中所述的相同动画代码放入 or 之类的方法中`viewDidAppear`时`viewDidLoad`，我可以自由设置`anchorPoint`将 x 或 y 作为动画的旋转轴。

# java - how 2D array pass in MPJ (other than object form)

> ID：14713464
> 
> 赞同：3
> 
> 时间：2013-02-05T17:33:50.247
> 
> 标签：java, mpi, daemon, mpj-express

I want to send adjacency matrix through MPJ, and one solution of that is to send the 2-d array in the form of an object, and a second solution is to send the 2-d array as one-dimensional array, i.e. a[N*N].

However, I wish to send the 2-d array in its original form -- is it supported by MPJ? If so, how should I approach it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-28T21:08:24.537

我最喜欢的方法是将二维数组作为一维对象数组发送，其中每个对象都是一维数组。

例如，如果你想发送`int A[M][N]`，你可以简单地做

```
MPI.COMM_WORLD.Send(A, 0, M, MPI.OBJECT, TARGET_ID, MESSAGE_ID); 
```

要接收，可以先创建一个缓冲区，然后使用 MPI Receive：

```
int buffer[][] = new int[M][N];
MPI.COMM_WORLD.Send(buffer, 0, M, MPI.OBJECT, SENDER_ID, MESSAGE_ID); 
```

请注意，MPI 命令中的偏移量和长度对应于最外层数组的索引。

希望能帮助到你！

# iphone - How to stop the status bar covering the navigation bar in iOS6

> ID：14713467
> 
> 赞同：0
> 
> 时间：2013-02-05T17:33:55.217
> 
> 标签：iphone, ios, cocoa-touch

This is my issue....

![enter image description here](../Images/5dda21257aa9633ff2d486d298204bd9.png)

This happens when:

1.  Status bar is faded out using the button.
2.  Rotate 180 deg from landscape to upside-down landscape.
3.  Status bar is faded back in using the button. - it now covers the navigation bar.

The button code to toggle the status bar visibility:

```
- (IBAction)toggleBar:(id)sender
{
    NSLog(@"View Frame : %@", NSStringFromCGRect(self.view.frame));

    // Toggle status bar visiblity
    BOOL isStatusBarHidden = [[UIApplication sharedApplication] isStatusBarHidden];
    [[UIApplication sharedApplication] setStatusBarHidden:!isStatusBarHidden
                                            withAnimation:UIStatusBarAnimationFade];
} 
```

The view always reports its frame to be 480 x 288.

The issue was fixable on iOS 5 using a hacky workaround, by stopping the rotation filling the space.

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIApplication sharedApplication] isStatusBarHidden])
    {
        float oldAlpha = self.navigationController.navigationBar.alpha;
        self.navigationController.navigationBar.alpha = 0.01;
        [[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationNone];

        double delayInSeconds = 0.0;
        dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
        dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
            self.navigationController.navigationBar.alpha = oldAlpha;
            [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationNone];
        });
    }

    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

This dons't work on iOS 6 because `shouldAutorotateToInterfaceOrientation` is not called. However, using its replacement: `willRotateToInterfaceOrientation` also dosn't work. Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:41:20.250

切换状态栏后，再次设置 self.view.frame。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-09T06:22:51.220

我打电话后

解除视图控制器动画

这个方法，然后调用

[[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationSlide];

出现这个问题。

当我调用 [[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationSlide]; 首先，没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T17:53:08.333

在IOS6，你应该使用这些方法。检查这些。

```
- (BOOL)shouldAutorotate
{
    //returns true if want to allow orientation change
    return TRUE;
}
- (NSUInteger)supportedInterfaceOrientations
{   
     //decide number of origination tob supported by Viewcontroller.
     return UIInterfaceOrientationMaskAll;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    //from here you Should try to Preferred orientation for ViewController 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T18:37:52.793

好的，答案是使用相同的技巧，`willRotateToInterfaceOrientation`我曾说过这在我的问题中不起作用，但我只是再次尝试并成功了。

```
- (void) willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    if ([[UIApplication sharedApplication] isStatusBarHidden])
    {
        [[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationNone];

        double delayInSeconds = 0.0;
        dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
        dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
            [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationNone];
        });
    }
} 
```

# algorithm - 为什么要使用 n 路合并？与2路合并相比，它有什么优势？

> ID：14713468
> 
> 赞同：8
> 
> 时间：2013-02-05T17:33:57.667
> 
> 标签：algorithm, sorting

我试图阅读几篇关于 n-way merge 的文章，但不理解这个概念。我对为什么要使用 n 路合并而不是 2 路合并感到困惑？就像你为什么要将数组分成 3 部分一样，对它们进行排序，然后对 2 部分进行 2 路合并，然后将第 3 部分与合并的 2 部分进行 2 路合并:)

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T17:55:46.627

当您进行外部排序时，您通常最终会合并多个流。例如，假设您需要对 1 TB 的数据进行排序，并且只有（比如说）64 GB 的 RAM。

您通常会通过读取 64 GB 的数据，对其进行排序，然后将其写出来做到这一点。对完整的 TB 数据重复此操作，为您可以一次保存在内存中的每个“块”生成一个中间文件。有一些方法可以改进这一点，但您通常希望的最好结果是生成每个大约 128 GB 的已排序中间文件。

这使您有许多中间文件要合并在一起——而且这个数字几乎肯定会大于 2。

如果您定期执行此操作，您可能需要使用一些非常高端的硬件来执行此操作。如果您已将每个中间文件放在单独的磁盘驱动器上（并且至少还有一个用于输出），您几乎可以肯定地通过一次合并所有数据来提高速度，而不是一次只合并两个。该过程通常会受到 I/O 限制，因此一次从（例如）8 个磁盘读取的速度通常是一次仅从 2 个磁盘读取的速度的 4 倍左右（尽管这取决于您的输出磁盘具有那么多带宽，这可能不是真的）。通过避免创建更多中间文件（这将需要进一步合并），您的整体速度可能会提高一个更大的因素。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-05T17:54:09.210

在“正常”合并排序中，您将数组除以 2，直到达到深度，然后开始合并。两个大小数组的每次合并也需要操作。`log[2]n``m``2m`

这使您得到以下公式（在时序分析中）：

```
n/2 * 2 + n/4 * 4 + ... 1 * n = n * log 2 n
```

现在，如果您进行三路合并，您会将数组除以 3。与前一种方法的区别是双重的：

*   划分的深度是现在。`log[3]n`
*   在合并期间，您需要找到最少的 3 个元素，而不是比较 2 个元素。

这意味着，在最基本的实现中，你会得到这样一个公式：

```
n/3 * 2*3 + n/9 * 2*9 + ... 1 * 2*n = 2 * n * log 3 n
```

请注意，要乘以 2，因为找到三个元素中的最小值包含 2 个操作。

渐近，这两个都是`Θ(nlogn)`。但是，也许（我没有尝试过）在实践中，三路归并排序会因为它的. 然而，由于n = 1000000 仅为 20，而对于相同的数字为 12.5，我怀疑这种优化是否真的有效，除非它非常大。`log[3]n``log[2]n``log[3]n``n`

* * *

通过巧妙的实现，k-way 合并可能确实对合并排序有很好的影响。这个想法是，一旦你找到了元素的最小值，你就已经知道了其余不是最小值`k`的元素之间的关系。`k-1`因此，一旦从其各自的列表中消耗了该最小元素，您只需比较该列表的新值并找到其相对于其余`k-1`元素的排序。使用堆，这将是微不足道的。

* * *

一定要看看[杰瑞的回答](https://stackoverflow.com/a/14713825/912144)。我同意他的观点，多路合并的真正力量来自处理多个磁盘和并行处理。

# django - Django: How to make Boto work with CachedStaticFilesStorage

> ID：14713470
> 
> 赞同：4
> 
> 时间：2013-02-05T17:34:33.300
> 
> 标签：django, boto

Using Django 1.5rc (tried 1.4 too) I am trying to make the CachedStaticFilesStorage work with Boto.

When I use CachedStaticFilesStorage without Boto it works just fine:

```
DEFAULT_FILE_STORAGE = 'django.contrib.staticfiles.storage.CachedStaticFilesStorage'
STATICFILES_STORAGE = 'django.contrib.staticfiles.storage.CachedStaticFilesStorage'

STATICFILES_S3_OPTIONS = {
    "bucket": "bucket-name"
}

python manage.py collectstatic

Copying '/user/project/static/css/min/styles.min.css'
Copying '/user/project/static/js/min/scripts.min.js'
Post-processed 'styles.min.css' as 'styles.min.694c8cd7e18b.css
Post-processed 'scripts.min.js' as 'scripts.min.1111e876b4f7.js 
```

However, when I change the storage backend this is what happens:

```
DEFAULT_FILE_STORAGE = "storages.backends.s3boto.S3BotoStorage"
STATICFILES_STORAGE = "project.storage.CachedStaticS3BotoStorage"

python manage.py collectstatic

Copying '/user/project/static/css/min/styles.min.css'
Copying '/user/project/static/js/min/scripts.min.js'

File "/user/.virtualenvs/project/lib/python2.7/site-packages/boto/s3/bucket.py", line 461, in new_key
    raise ValueError('Empty key names are not allowed')
ValueError: Empty key names are not allowed
ValueError: Empty key names are not allowed 
```

Here is my storage.py

```
from django.conf import settings
from django.contrib.staticfiles.storage import CachedFilesMixin
from storages.backends.s3boto import S3BotoStorage

class CachedStaticS3BotoStorage(CachedFilesMixin, S3BotoStorage):
    def __init__(self, *args, **kwargs):
        kwargs.update(getattr(settings, "STATICFILES_S3_OPTIONS", {}))
        super(CachedStaticS3BotoStorage, self).__init__(*args, **kwargs) 
```

# c# - 如何有条件地将数据点添加到使用 MSChart 呈现的图表中

> ID：14713471
> 
> 赞同：2
> 
> 时间：2013-02-05T17:34:33.963
> 
> 标签：c#, mschart

我有下面的示例代码，它在 Windows 窗体应用程序中呈现 MSChart，图表如下所示：

![在此处输入图像描述](../Images/7f7d2eb63a14beb48b3712a4de1a4954.png)

我想添加代码以有条件地将数据点添加到条形图中，这样如果条形太短则不添加数据点，但如果条形足够长，则添加数据点。在我的图表图像中，第一个数据点 (10) 不会显示在图表中，但会显示其余数据点。有人能帮忙吗？

```
 chart1.ChartAreas.Add(new ChartArea());
        chart1.Series[0].IsValueShownAsLabel = true;

        int[] dataset = { 10, 40, 100, 600, 300 };

        foreach (var i in dataset)
        {
            var series1 = chart1.Series[0];
            series1.ChartType = SeriesChartType.StackedBar;

            var index1 = series1.Points.AddY(i);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T20:33:44.310

我发现我能够使用这样的代码有条件地使标签透明：

```
chart1.ChartAreas.Add(new ChartArea());
chart1.Series[0].IsValueShownAsLabel = true;

int[] dataset = { 10, 40, 100, 600, 300 };
var series1 = chart1.Series[0];

foreach (var i in dataset)
{               
    series1.ChartType = SeriesChartType.StackedBar;
    var index1 = series1.Points.AddY(i);
}

int j = 0;
foreach (var point in series1.Points)
{
    if (dataset[j] > 20)
    {
        point.LabelForeColor = Color.Black;
    }
    else
    {
        point.LabelForeColor = Color.Transparent;
    }
    j++;
} 
```

# php - Twitter & PHP：永久访问令牌

> ID：14713476
> 
> 赞同：3
> 
> 时间：2013-02-05T17:34:51.067
> 
> 标签：php, oauth, twitter, twitter-oauth

对于使用 PHP 的 twitter 应用程序，我需要使用以下详细信息为用户获取访问令牌：

*   不应该过期（我想在用户离线时使用访问令牌）
*   读/写访问权限（不需要 DM）
*   如果我有访问令牌，我不必再次进行身份验证

如何使用这些规范从 twitter 获取访问令牌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T18:26:47.297

对于 Twitter，根据此[文档](https://dev.twitter.com/docs/auth/obtaining-access-tokens)，您需要[3-legged OAuth](https://dev.twitter.com/docs/auth/3-legged-authorization)

这些文档已经提供了请求正确 OAuth 令牌必须遵循的步骤列表。由于我在当前自己的项目中使用 Janrain，我无法详细说明所写的内容。

# javascript - 错误回调 {"readyState":4,"status":200,"statusText":"success"}

> ID：14713489
> 
> 赞同：17
> 
> 时间：2013-02-05T17:35:22.970
> 
> 标签：javascript, ajax, jquery

我有这个`url`电话。url 按预期返回一个 json 对象（直接浏览器调用），但是当我通过 ajax 执行此操作时，使用以下行

```
$.ajax({
       url: url, 
       type: "GET",
       dataType:"jsonp",   
       success: function(data) {
          alert(data);
       },
       error : function(error) {
          alert("no good "+JSON.stringify(error));
       }
}); 
```

它返回我

```
no good {"readyState":4,"status":200,"statusText":"success"} 
```

我知道在 stackoverflow 上还有其他类似的问题，但似乎没有人解决它。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-05T17:39:59.077

这表明 HTTP 请求成功，但解析数据的尝试没有成功。

即数据未格式化为 JSONP。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T17:51:30.673

这些变化解决了我的问题。

//服务器端

```
echo $_GET['callback'] . '('.json_encode($data_to_encode).')'; 
```

//js

```
$.ajax({
       url: url+"?callback=?", 
       type: "GET",
       dataType:"jsonp",   
       success: function(data) {
          alert(data);
       },
       error : function(error) {
          alert("no good "+JSON.stringify(error));
       }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-28T13:08:37.093

我刚刚遇到了完全相同的问题，{"readyState":4,"status":200,"statusText":"success"}

这是因为我忘记在我的 php 脚本中删除 echo "hello"；我之前出于测试原因做出的声明，所以我的 php 脚本正在发送一个字符串和 JSON，这是我的愚蠢错误，也许你也有同样的错误

# php - 如果我的 HTML 表单中有 20 个按钮，如何在下一页显示用户按下的按钮的值。

> ID：14713500
> 
> 赞同：1
> 
> 时间：2013-02-05T17:35:49.917
> 
> 标签：php, html

这是我的问题。我有一个 HTML 表单，它有大约 20 个按钮，每个按钮都有一个唯一的值。现在，如果用户按下按钮说“2D-ECHO”，那么用户将被重定向到应该显示值“2D-ECHO”的调度页面。同样，如果用户按下 20 个按钮中的任何其他按钮，则该按钮的值应显示在下一页中。仅供参考，所有按钮都重定向到同一个调度页面。

**HTML：**

```
<form name="Left" method="post" action="Schedule_Devp.php">
 <div id="men" class="grid_4 alpha" style="margin:1.5 em; text-align:center">
    <label class="label">Men</label><br>
    <span class="grid_2 alpha"><input type="submit" class="buttons-men" value="BELOW 30 YRS WELLNESS CHECK" name="m_below30"></span>
    <span class="grid_2 omega"><input type="submit" class="buttons-men" value="35-40 YRS WELLNESS CHECK" name="m_below40"></span><br>
    <span class="grid_2 alpha"><input type="submit" class="buttons-men" value="CANCER CHECK" name="m_cancer"></span>
    <span class="grid_2 omega"><input type="submit" class="buttons-men" value="45 AND ABOVE WELLNESS CHECK" name= "m_above45"></span><br> 
    <span class="grid_2 alpha" style="visibility:hidden"><input type="button" class="buttons-men" ></span>
    <span class="grid_2 omega"><input type="submit" class="buttons-men" value="2D ECHO" name="m_2d"></span><br>      
    </div>
    <div class="clear"></div>
</form> 
```

**PHP：**

```
<?php
$m_below40 = $_POST['m_below40'];
?>
<input type="button" class="buttons-specific-screenings" value="<?php echo     $m_below40;?>"> 
```

我知道上面的 PHP 代码适用于一个按钮。我如何使它适用于其他按钮。请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:42:29.637

您可以将所有数组存储`$_POST[''];`到另一个数组中并使用`foreach()`循环遍历所有数组。

```
<form action="" method="POST"> 
    <?php
    $m_below40 = "one";
    $m_below30 = "two";
    $m_below20 = "four";
    $m_below10 = "three";

    $all = array($m_below40,$m_below30,$m_below20,$m_below10);
    ?>

    <?php 
    foreach ($all as $single ) { ?>
    <input type="submit" class="buttons-specific-screenings" name="foo" value="<?php echo $single;?>"> 

    <?php } ?>

    </form> 
```

下面的代码将让您知道点击了哪一个

```
<?php

if(isset($_POST['foo'])) {
print_r($_POST);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:41:38.857

您的表单仅在单击按钮时才会提交该按钮。你可以用数组做一些事情：

```
$buttons = array("button1id", "button2id");
foreach($buttons as $button){
   if(isset($_POST[$button])) echo $_POST[$button];
} 
```

或者您可以做一些随着时间的推移需要较少维护的事情：

```
foreach($_POST as $key => $value){
        //check if the key (button name) has the word button in it. If so, echo the value
        if(strstr($key, 'button') !== false) echo $value;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T17:42:01.913

作为第一步，我将考虑在按钮上使用“数组”类型 ID：

```
<input type="submit" class="buttons-men" value="BELOW 30 YRS WELLNESS CHECK" id="m[0]">
<input type="submit" class="buttons-men" value="35-40 YRS WELLNESS CHECK" id="m[1]">
<input type="submit" class="buttons-men" value="CANCER CHECK" id="m[2]"> 
```

然后在代码中你可以查看`$_POST['m']`

您当然需要能够在收到帖子时将这些 ID 关联回答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T17:45:25.123

我可能很难理解你在做什么。但是，如果您只是单击按钮并将它们的 vbalues 发送到同一页面，并回显它们的值，那么您将执行以下操作：

```
<form name="Left" method="post" action="Schedule_Devp.php">
<div id="men" class="grid_4 alpha" style="margin:1.5 em; text-align:center">
<label class="label">Men</label><br>
<span class="grid_2 alpha"><input type="submit" class="buttons-men" value="BELOW 30 YRS WELLNESS CHECK" name="m_below30"></span>
<span class="grid_2 omega"><input type="submit" class="buttons-men" value="35-40 YRS WELLNESS CHECK" name="m_below40"></span><br>
<span class="grid_2 alpha"><input type="submit" class="buttons-men" value="CANCER CHECK" name="m_cancer"></span>
<span class="grid_2 omega"><input type="submit" class="buttons-men" value="45 AND ABOVE WELLNESS CHECK" name= "m_above45"></span><br> 
<span class="grid_2 alpha" style="visibility:hidden"><input type="button" class="buttons-men" ></span>
<span class="grid_2 omega"><input type="submit" class="buttons-men" value="2D ECHO" name="m_2d"></span><br>      
</div>
<div class="clear"></div>
</form> 
```

php

```
<?php
foreach ($_REQUEST as $this) { ?>
<input type="button" class="buttons-specific-screenings" value="<?php echo     $this;?>"> 
```

# actionscript - 是否可以在 LAN 上或通过 VPN 测试 RTMFP？

> ID：14713501
> 
> 赞同：1
> 
> 时间：2013-02-05T17:35:52.593
> 
> 标签：actionscript, udp, vpn, lan, rtmfp

我们正在构建一个 Flash RTMFP 应用程序，我们的 ISP 阻止了 UDP 通信。

测试应用程序的唯一方法是让每个开发人员回家，然后一起执行测试。

到目前为止，这还可以，因为我们只实现了文本消息，没有太多要测试的东西......但是现在，当我们要测试视频和音频传输时，（主要是质量），这不是一个选项。

是否有可能在 LAN 上执行测试，或者可能不在 LAN 上，而是通过 VPN 服务（我的偏好）？ISP 阻止是否仍会影响 VPN 选项？

提前感谢您的每一个回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T09:58:24.933

试试这个 - 它检查您是否可以从 Internet 上的任何位置（在公司防火墙后面、在家等）访问 RTMFP 服务：

[RTMFP 连接状态](http://cc.rtmfp.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:26:20.133

您当然可以在本地网络中测试 RTMFP 连接。只需设置一个 RTMFP 服务器（如[Cumulus](https://github.com/OpenRTMFP/Cumulus)）并连接到它。

# d3.js - 如何处理 d3.layout.stack() 中缺少数据点的图层

> ID：14713503
> 
> 赞同：24
> 
> 时间：2013-02-05T17:36:00.217
> 
> 标签：d3.js

我正在使用 d3.stack 创建堆叠面积图，但如果我在每一层中没有相同数量的项目，则会出现错误。我从这样的一组数据开始：

```
[  
   {key:'Group1',value,date},  
   {key:'Group1',value,date},  
   {key:'Group1',value,date},  
   {key:'Group2',value,date},  
   {key:'Group2',value,date}  
] 
```

在我通过 nest() 和 stack() 运行它之后，我最终得到了这种格式，正如预期的那样：

```
[  
   {key: 'Group1',  
    values: [ {key,value,date}, {key,value,date}, {key,value,date} ] },  
   {key: 'Group2',  
    values: [ {key,value,date}, {key,value,date} ]  }  
] 
```

我稍微修改了一个堆叠区域示例来演示这个 jsFiddle 中的问题：http: [//jsfiddle.net/brentkeller/rTC3c/2/](http://jsfiddle.net/brentkeller/rTC3c/2/)

如果您删除 sourceData 数组中的任何一个数据点，您将在控制台中看到错误消息“无法读取未定义的属性 '1'”。

有没有办法让 d3.stack 只为丢失的数据点假设零值？如果没有，是否有一个优雅的解决方案来填补缺失值？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-24T04:01:04.587

这不是 d3 特定的，而是用于填充键控数据数组中的空白的通用解决方案。[我在这里](http://jsfiddle.net/N4E5c/3/)使用以下功能修改了您的 jsfiddle ：

```
function assignDefaultValues( dataset )
{
    var defaultValue = 0;
    var keys = [ 'Group1' , 'Group2', 'Group3' ];
    var hadData = [ true, true, true];
    var newData = [];
    var previousdate = new Date();
    var sortByDate = function(a,b){ return a.date > b.date ? 1 : -1; };

    dataset.sort(sortByDate);
    dataset.forEach(function(row){
        if(row.date.valueOf() !== previousdate.valueOf()){
            for(var i = 0 ; i < keys.length ; ++i){
                if(hadData[i] === false){
                    newData.push( { key: keys[i], 
                                   value: defaultValue, 
                                   date: previousdate });
                }
                hadData[i] = false;
            }
            previousdate = row.date;
        }
        hadData[keys.indexOf(row.key)] = true; 
    });
    for( i = 0 ; i < keys.length ; ++i){
        if(hadData[i] === false){
            newData.push( { key: keys[i], value: defaultValue, 
                            date: previousdate });
        }
    }
    return dataset.concat(newData).sort(sortByDate);
} 
```

它遍历给定的数据集，并在遇到新值时为尚未看到`date`的任何值分配默认值。`keys`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-21T17:23:06.900

Stack 确实如其所说，堆叠图表，因此您作为用户有责任以正确的格式提供数据。如果您考虑一下，这是有道理的，因为堆栈基本上与数据格式无关。它提供了很大的灵活性，唯一的限制是对于每一层它可以访问相同数量的点。它如何确定缺少哪些点？假设第一层有五个点，第二层有十个点，那么第一层是不是少了五个点？或者两者都缺少点，因为第三层包含更多点。然后如果缺少点，哪些点？开始，结束，中间的某个地方？同样，堆栈实现没有明智的方法来解决这个问题（除非它会强制使用非常严格的数据结构）。

所以，但是你无能为力吗？我想你可以。我不能给你一个完整的实现，但可以给你一些正确方向的指示。我们从这里开始：

```
var stack = d3.layout.stack()
  .offset("zero")
  .values(function(d) { return d.values; }) 
```

在这里，您只需返回值，在您的示例中，这将是嵌套运算符的结果。因此，此时您有能力“修复”这些值。

您需要做的第一件事是确定最大观察次数。

```
var nested = nest.entries(data);
var max = nested.reduce(function(prev, cur) {
  return Math.max(prev, cur.values.length);
}, 0); 
```

现在是棘手的部分。知道最大元素数后，您需要调整传递给值的函数。在这里，您必须对数据做出假设。从您的问题中，我了解到某些组的值丢失了。所以有两种可能。您可以假设具有最大元素数的组包含该范围内的所有项目，或者您假设某个范围并检查所有组是否包含您范围中每个“刻度”的值。因此，如果您的范围是日期范围（如您的示例中）并且您希望每天（或任何时间间隔）进行测量，则您必须遍历组中的项目并自己填补空白。我将尝试给出一个数值范围的（未经测试的）示例：

```
// define some calculated values that can be reused in correctedValues
var range = [0, 1];
var step = 0.1;

function correctedValues(d) {
  var values = d.values;
  var result = [];
  var expected = 0;
  for (var i = 0; i < values.length; ++i) {
     var value = values[i];
     // Add null-entries
     while (value.x > expected) {
       result.push({x: expected, otherproperties_you_need... });
       expected += step;
     }
     result.push(value); // Now add the real data point.
     expected = value.x;
  }

  // Fill up the end of of the array if needed
  while(expected < range[1]) {
    result.push({x: expected, otherproperties_you_need... });
    expected += step;
  }
  return result;
}

// Now use our costom function for the stack
var stack = d3.layout.stack()
 .offset("zero")
 .values(correctedValues)
... 
```

如前所述，这部分未经测试，不能直接解决您的问题（因为我使用的是数字范围），但我认为它应该让您了解如何解决问题（以及问题的实际根源是什么）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T20:51:57.350

正如其他人所解释的那样，堆积图猜测每个数据点的缺失值是不合理的，因为插值的方法太多，没有明显的选择。

但是，`d3.svg.line()`似乎为您选择自己的插值方法和填充缺失值提供了一种合理的方法。虽然它是为生成 SVG 路径而设计的，但您可以调整它来定义一般的线条。这里建议使用插值方法：

[https://github.com/mbostock/d3/wiki/SVG-Shapes#wiki-line_interpolate](https://github.com/mbostock/d3/wiki/SVG-Shapes#wiki-line_interpolate)

不幸的是，该类目前拥有所有这些美妙的插值方法（在 d3 的其他任何地方都没有出现），但仅限于生成 SVG 路径数据而不是任意中间值。也许如果@mbostock 看到这一点，他会考虑推广该功能。

但是，现在您可能只想创建一个 d3 的分支，并在将`line(data)`其写入 SVG`path`字符串之前获取中间结果，在进行插值的[源部分中，如下所示：](https://github.com/mbostock/d3/blob/master/src/svg/line.js)

```
 function line(data) {
    var segments = [],
        points = [],
        i = -1,
        n = data.length,
        d,
        fx = d3_functor(x),
        fy = d3_functor(y);

    function segment() {
      segments.push("M", interpolate(projection(points), tension));
    }

    while (++i < n) {
      if (defined.call(this, d = data[i], i)) {
        points.push([+fx.call(this, d, i), +fy.call(this, d, i)]);
      } else if (points.length) {
        segment();
        points = [];
      }
    }

    if (points.length) segment();

    return segments.length ? segments.join("") : null;
  } 
```

# javascript - ASP.net MVC 4 是否有一些标准化的方式来引用 JavaScript 中的相对路径？

> ID：14713506
> 
> 赞同：4
> 
> 时间：2013-02-05T17:36:12.517
> 
> 标签：javascript, asp.net, asp.net-mvc, asp.net-mvc-areas

我正在开发一个 ASP.net MVC 应用程序。我真正喜欢 ASP.net MVC 的一件事是它允许您在服务器端代码中引用相对路径的方式。我想知道在客户端代码中是否有一些标准化的方法可以做到这一点。

我有办法做到这一点。我在我的布局页面中写了以下内容。

```
<script type="text/javascript">
    var ApplicationPath = '@Url.Content("~/")';                
</script> 
```

将此作为布局页面中的第一个脚本，我可以使用该`ApplicationPath`变量引用来自任何 .js 文件的相对路径。这似乎运作良好，但我想知道是否有一些内置的方式来处理 JavaScript 中的相对路径。这对我来说效果很好，但其他人可能会使用不同的约定。

ASP.net MVC 4 是否有一些标准化的方式来引用 JavaScript 中的相对路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:47:01.723

我通常在我的母版页标题中执行此操作：

```
<script type="text/javscript">
    var conf = { baseUrl: '<%=VirtualPathUtility.ToAbsolute("~/")%>' };
</script> 
```

然后，您可以在 js 中的其他任何地方使用：

```
var fullUrl = conf.baseUrl + '/somePath'; 
```

此外，您始终可以使用以下方法在 JS 中获取基域：

```
var baseUrl = window.location.hostname; 
```

# search - Solr 搜索 - 如何防止位置哈希重复

> ID：14713508
> 
> 赞同：0
> 
> 时间：2013-02-05T17:36:19.390
> 
> 标签：search, solr, lucene, nutch

我从一个已爬网的内部站点返回结果。问题是由于在代码中使用了位置哈希，我得到了多个结果：

```
http://site.com/en/personal/refunds.html
http://site.com/en/personal/refunds.html#
http://site.com/en/personal/refunds.html#content
http://site.com/en/personal/refunds.html#section1 
```

虽然它们可能都是相关的，但当它们是我的前四名结果时看起来并不好！有什么方法可以将它们视为一个结果？

看起来 # 和 #content 出现在大多数页面上，所以我可以应用一些规则来过滤掉它们。它们用于跳转到内容，另一个用于切换可访问性样式表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T23:00:48.143

第一个选项，也是最好的选项，是不要抓取任何此类页面。正如@Jayendra 提到的，使用正则表达式 urlfilter

您拥有的另一个选项是使用更新链功能修改索引文档值。实现接口[UpdateRequestProcessor](http://wiki.apache.org/solr/UpdateRequest)并使用 Java 代码自行解析，修改 URL 以删除 #anchor 元素。

我想到的最后一个选项是在 URL 字段中使用[PatternReplaceCharFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters#solr.PatternReplaceCharFilterFactory)，如下所示：

```
<charFilter class="solr.PatternReplaceCharFilterFactory" pattern="(#.*)" replacement=""/> 
```

使用第一个解决方案，您只能为每个“位置”索引一个页面。使用其他页面，您将索引所有页面，但只有最后一个真正被索引，因为 Solr 将删除此文档的任何先前版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T04:15:40.517

您可以过滤以带有 # 的模式结尾的 url。[您可以在regex-urlfilter.txt](http://svn.apache.org/viewvc/nutch/trunk/conf/regex-urlfilter.txt.template?view=markup)中指定要包含或排除的模式

这将只允许对根页面进行索引，而将带有# 的页面排除在索引之外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T11:42:34.430

好的，我得到了这个工作，我所做的是编辑**regex-normalize.xml**文件并告诉它忽略其中带有 # 的 URL：

```
<regex>
  <pattern>#.*</pattern>
  <substitution>$1</substitution>
</regex> 
```

我需要将“urlfilter-regex”添加到**nutch-site.xml**中的 plugin.includes 属性以使其使用该文件。

# c# - System.Xml.XmlSchemaSet compile() 填充包含的架构 TargetNamespace

> ID：14713513
> 
> 赞同：3
> 
> 时间：2013-02-05T17:36:54.103
> 
> 标签：c#, xml-serialization, xsd, xmlschemaset

我有两个 xml 架构：
1）infrastructureRoot.xsd：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" 
  xmlns:mif="urn:hl7-org:v3/mif" 
  xmlns:v3="urn:hl7-org:v3" 
  xmlns:ex="urn:hl7-org/v3-example" 
  xmlns="urn:hl7-org:v3" 
  targetNamespace="urn:hl7-org:v3" 
  elementFormDefault="unqualified">
  <xs:include schemaLocation="datatypes-base.xsd"/>
  <xs:group name="InfrastructureRootElements">
    <xs:sequence>
      <xs:element name="realmCode" 
                  type="Norwegian_customer" 
                  minOccurs="0" 
                  maxOccurs="unbounded"/>
    </xs:sequence>
  </xs:group>
  <xs:attributeGroup name="InfrastructureRootAttributes"/>
</xs:schema> 
```

2) 数据类型-base.xsd

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:sch="http://www.ascc.net/xml/schematron"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"  
  elementFormDefault="unqualified">
  <xs:complexType name="customer">
    <xs:sequence>
      <xs:element name="firstname" type="xs:string"/>
      <xs:element name="lastname" type="xs:string"/>
      <xs:element name="country" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="Norwegian_customer">
    <xs:complexContent>
     <xs:restriction base="customer">
       <xs:sequence>
         <xs:element name="firstname" type="xs:string"/>
         <xs:element name="lastname" type="xs:string"/>
         <xs:element name="country" 
           type="xs:string" 
           fixed="Norway"/>
     </xs:sequence>
   </xs:restriction>
  </xs:complexContent>
 </xs:complexType>
</xs:schema> 
```

我使用以下 C# 代码加载包含所有内容的根架构：

```
Func<XmlReader> xmlReaderFactory = () =>
                                        {
                                            XmlReaderSettings schemaReaderSettings = new XmlReaderSettings{ DtdProcessing = DtdProcessing.Parse};
                                                XmlTextReader reader = new XmlTextReader(@"InfrastructureRoot.xsd");
                                            return XmlReader.Create(reader, schemaReaderSettings);
                                        };

XmlSchema xsd = XmlSchema.Read(xmlReaderFactory(), (sender, eventArgs) => {});
XmlSchemaSet schemaSet = new XmlSchemaSet();
schemaSet.ValidationEventHandler += (sender, eventArgs) => Console.WriteLine(eventArgs.Message + " " + eventArgs.Severity);

try
{
    try
    {
        XmlReaderSettings schemaReaderSettings = new XmlReaderSettings {DtdProcessing = DtdProcessing.Parse};
        XmlReader schemaReader = XmlReader.Create(new DummyReader(), schemaReaderSettings);
        schemaSet.Add(null, schemaReader);
    }
    catch
    {
        // the only thing this code is needed is to set ProhibitDTD to false
        // there is no acceptable public way to do that
    }

    schemaSet.Add(xsd);
    schemaSet.Compile();
    XmlSchemaInclude external = ((XmlSchemaInclude)xsd.Includes[0]);
    String targetNamespace = external.Schema.TargetNamespace;
    Debug.Assert(targetNamespace == null);
}
catch{} 
```

执行后 "targetNamespace" 的值等于 "urn:hl7-org:v3" ，这与原始模式 "datatypes-base.xsd" 不同并破坏了验证。有人可以帮我解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T23:58:21.723

当具有显式目标命名空间的架构文档（如您的基础设施Root.xsd）使用 xs:include 包含未指定目标命名空间的架构文档（如您的 datatypes-base.xsd）时，第二个架构文档中的声明被解释为尽管它们的包含模式文档与包含模式文档具有相同的命名空间。这种机制有时被称为*变色龙包含*——包含的模式文档中的声明根据上下文采用这个或那个目标命名空间。

如果不希望命名空间urn:hl7-org:v3*不*捕获复杂类型Customer 和NorwegianCustomer，则infrastructureRoot.xsd 需要使用xs:import，而不是xs:include，并且需要更改默认命名空间以使reference`type="Norwegian_customer"`是对`{}Norwegian_customer`（即，`Norwegian_customer`作为本地名称且没有命名空间的限定名称）的引用，而不是（现在是）对`{urn:hl7-org:v3}Norwegian_customer`.

xs:import 构造从不同的命名空间导入组件，而 xs:include 包含来自*同一*命名空间的组件。Chameleon include 可以看作是使包含的 schema 文档中的组件在*同*一个命名空间中的一种方式；如果它不存在，基础架构模式中的 xs:include 只会引发错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T00:19:53.993

我们一直在 BizTalk 和 .Net 中使用 HL7v3 和 CDA。为了让 CDA 模式正确工作以进行验证并仅发送消息，我必须将 targetnamespace 添加`urn:hl7-org:v3`到所有“coreschemas”xsd 文件中。之后验证工作和 BizTalk 消息流动。

我对将目标命名空间添加到我并不真正拥有的模式中感到不舒服，但这是一个不错的折衷方案，因为我从未真正改变过模式本身，并且事后工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T18:09:23.020

最初的问题是在将 HL7v3 源导入到我们的自定义数据存储格式和向后导出到 xml 模式期间发现的。第二个模式获取目标命名空间但不是默认命名空间，这会导致验证错误。这是第二个模式导出结果：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema
 xmlns:sch="http://www.ascc.net/xml/schematron"
 xmlns="urn:hl7-org123:v3" 
 xmlns:v3="urn:hl7-org:v3"
 elementFormDefault="unqualified"
 targetNamespace="urn:hl7-org:v3"
 xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:complexType name="customer">
 <xs:sequence>
   <xs:element name="firstname" type="xs:string" />
   <xs:element name="lastname" type="xs:string" />
   <xs:element name="country" type="xs:string" />
 </xs:sequence>
</xs:complexType>
 <xs:complexType name="Norwegian_customer">
<xs:complexContent mixed="false">
  <xs:restriction base="customer">
    <xs:sequence>
      <xs:element name="firstname" type="xs:string" />
      <xs:element name="lastname" type="xs:string" />
      <xs:element fixed="Norway" name="country" type="xs:string" />
    </xs:sequence>
   </xs:restriction>
</xs:complexContent>
 </xs:complexType>
</xs:schema> 
```

限制基础属性值的验证失败。根据目标模式设计说明，我们有两种可能的解决方案：

1.  使用带有“v3”前缀的限定值。
2.  添加默认命名空间 "xmlns="urn:hl7-org:v3"。

# mysql - mysqldump 触发器分隔符语法

> ID：14713514
> 
> 赞同：3
> 
> 时间：2013-02-05T17:37:09.130
> 
> 标签：mysql, triggers, mysqldump, delimiter

我正在使用 mysqldump 进行包含触发器的备份，并且在执行导入时会导致以下定界符语法错误：

> 第 1059 行的错误：DELIMITER 后面必须跟一个`delimiter`字符或字符串
> 
> 第 1060 行的错误 1064 (42000)：您的 SQL 语法有错误；从正确的语法中检查与您的 MySQL 服务器版本相对应的手册，以便在第 5 行的 `` 附近使用

第 1059 行在触发语句之前设置分隔符：DELIMITER ;;

第 1060 行是： / *!50003 CREATE* / / *!50017 DEFINER= `user`@`%`* / /*!50003 TRIGGER `database`。`t_auditclients`

触发器是用 DELIMITER $$ 放入的。但是，备份时生成的 sql 文件有 DELIMITER ;; 而不是 $$。我已经手动更改了 DELIMITER ;; 到 mysqldump 文件中的 DELIMITER $$ 并使用 mysqlworkbench 成功导入。有没有办法让 mysqldump 输出用于创建触发器的原始分隔符？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-07T16:40:07.220

Linux 上的解决方案是运行以​​下命令：

```
sed -i -- 's/^..!50003\sCREATE.....!50017\sDEFINER=.root...[^`]*`.....!50003\s\([^;]*\)/CREATE DEFINER=CURRENT_USER \1/g;s/^\s*\([^\*]*;\{0,1\}\)\s\{0,1\}\*\/;;$/\1;;/g' fileName.sql 
```

这将创建一个新文件，其中 root@localhost 或任何内容已被取出并替换为 CREATE DEFINER=CURRENT_USER 并且所有 50003/50017 废话都消失了，它可以正常工作。哈利路亚！

注意：要让它在 OS X 上工作，你不能使用 sed 的内置版本。您可以`brew install gnu-sed`，然后打开一个新的终端窗口，并执行上述命令，除了使用`gsed`而不是`sed`.

然后运行 ​​SQL 当然最简单的事情就是进入 mysql 终端，`USE`如果需要的话，一个 db，然后`SOURCE fileName.sql`......以获得巨大的利润。

注意：许多博萨人为给我们带来了这些信息而死。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-07T10:17:36.000

就我而言，导致问题的触发器没有`BEGIN`and`END`语句。所以我应用了相应的`DROP TRIGGER`and `CREATE TRIGGER`，然后我再次做了一个备份，后者恢复没有问题。IE：

```
DROP TRIGGER `incorrect_trg1`;
DELIMITER ;;

CREATE DEFINER = `root`@`localhost` TRIGGER `incorrect_trg1` BEFORE INSERT ON `table1` FOR EACH ROW 
BEGIN
SET NEW.col = DATE_FORMAT(NEW.col,'%Y%m');
END;; 
```

# java - 将对象分配给java中的变量

> ID：14713516
> 
> 赞同：0
> 
> 时间：2013-02-05T17:37:16.120
> 
> 标签：java, object, breakout

嗨，我正在做一个突破游戏，我在让球从桨或砖上反弹时遇到问题。

这是我的代码，用于使球从砖块和桨上反弹。

```
private void checkForHit(){
    GObject collider = getElementAt( ballX, ballspeed);

    if(collider == paddle){
        ballspeed = -ballspeed;
    }
} 
```

我不知道为什么它不起作用，它可能是一些小东西。

更新

当我设置 if(collider.equals(paddle))

运行游戏时出现 java.lang.NullPointerException 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:48:51.297

这是因为您尝试在对象上使用 == 标志。比较对象时的正常语法就像 CodeChimp 解释的那样：

```
<objectname>.equals( <otherobject> ) 
```

您必须确保您正在使用的对象（如果您自己制作）具有相同的使用方法，并将正确的字段值等与其他对象进行比较。学习如何让对象协同工作是 OOP 的一个非常重要的部分。

您可能想看看关键字：instanceof while your at it。

此外，如果您只是想比较两个不同的字段值，这两个类中的每一个都是 fx 整数值。您可以为这些字段值创建一个 getter 方法并简单地比较这些特定值。

```
if ( collider.getSpecificValue() == paddle.getSpecificValue() ) { } 
```

# akka - 普通的 Akka 演员和骆驼消费者演员有什么区别？

> ID：14713519
> 
> 赞同：0
> 
> 时间：2013-02-05T17:37:25.120
> 
> 标签：akka, actor, consumer

一个普通的 Akka actor 与一个邮箱和 dispather（线程池）相关联，可以通过配置或以编程方式设置。您可以通过路径查找常规演员。常规演员先从邮箱中出列消息，然后处理消息等

我可以对骆驼消费者演员做同样的事情吗？普通演员和骆驼消费者演员有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T18:52:22.810

是的，您可以对 Camel Consumer Actor 执行相同的操作。不同之处在于[Consumer Actor](http://doc.akka.io/docs/akka/2.1.0/scala/camel.html#Consumer_Actors)将自己注册到 Camel Endpoint。

# image-processing - 如何将适合笔记本电脑显示器的图像实时转换为要在天象穹顶上显示的图像？

> ID：14713522
> 
> 赞同：1
> 
> 时间：2013-02-05T17:37:41.093
> 
> 标签：image-processing

示例图像及其所需的变换如下：-

[示例变换 1](http://i.imgur.com/FVdwG8q)
[示例变换 2](http://i.imgur.com/313m86q)

如何最大限度地减少对输入图像矩阵的操作次数，以便在天文馆圆顶上实时显示笔记本电脑的视频？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:37:33.420

我有时会做类似的事情。涉及的步骤是：

1.  在原始图像中选择一个原点
2.  切换到极坐标
3.  对原始图像中的每个像素进行插值（我使用了双线性）

    完成所有插值后，您将获得最终图像。您可能需要在 0 到 255 之间对图像进行归一化以进行正确的可视化

您还可以参考我有时在 SO 中发布的类似问题的答案：[使用极坐标创建图像（图像转换）](https://stackoverflow.com/questions/14404013/creating-image-using-polar-coordinates-image-transformations)

# android - Android 安装失败 - 空间不足 - 错误代码 -4

> ID：14713527
> 
> 赞同：2
> 
> 时间：2013-02-05T17:38:04.400
> 
> 标签：android, installation, apk

我的一位用户报告说他不能再安装我的应用程序了。他卸载了该应用程序，当他试图重新安装它时，他收到了“存储空间不足”之类的错误。

根据他的描述，他可以很好地安装其他应用程序，无论大小（我的 .apk 约为 1MB）。

用户正在运行 Android 2.3.6。如果他使用我发送给他的 .apk 而不是使用 Google Play，则会出现同样的错误。

这是他发给我的 LogCat 的摘录，应用名称替换为 com.myApp.Foo

金钱报价：“1.packageInstalled：“com.myApp.Foo”的包安装状态为-4”

```
D/Finsky (29919): [23] 7.run: Enqueued com.myApp.Foo as content://downloads/my_downloads/610
D/Finsky (29919): [1] DownloadImpl.setState: com.myApp.Foo from QUEUED to DOWNLOADING.
D/Finsky (29919): [1] DownloadQueueImpl.onStart: com.myApp.Foo: onStart
D/Finsky (29919): [1] DownloadQueueImpl.notifyProgress: com.myApp.Foo: onProgress 0/-1 Status: 190.
D/DownloadManager(29988): mime type is null
D/Finsky (29919): [1] DownloadQueueImpl.notifyProgress: com.myApp.Foo: onProgress 0/-1 Status: 192.
I/DownloadManager(29988): Initiating request for download 610
D/ConnectivityService( 226): in getAllNetworkInfo: mNetworksDefined=9, result count=6
I/DownloadManager(29988): Initiating request for download 610
D/ConnectivityService( 226): in getAllNetworkInfo: mNetworksDefined=9, result count=6
W/ActivityManager( 226): Unable to start service Intent { act=com.android.providers.downloads.action.Dispatch typ=application/vnd.android.package-archive (has extras) }: not found
D/Finsky (29919): [1] DetailsDataBasedFragment.rebindViews: Page [class=DetailsFragment] loaded in [9465 ms] (partial? false)
D/LatinKeyboard( 307): updateF1Key-mIsAlphaKeyboard: true ,mHasVoiceButton: true
D/Finsky (29919): [1] DetailsDataBasedFragment.rebindViews: Page [class=DetailsFragment] loaded in [9755 ms] (partial? true)
W/Finsky (29919): [1] CarrierParamsAction.run: Saving carrier billing params failed.
D/Finsky (29919): [1] GetBillingCountriesAction.run: Skip getting fresh list of billing countries.
E/Finsky (29919): [32] FileBasedKeyValueStore.delete: Attempt to delete 'params57V5ZrspGc4ULD9_G0atJg' failed!
D/Finsky (29919): [1] DownloadBroadcastReceiver.onReceive: Intent received at DownloadBroadcastReceiver
D/Finsky (29919): [1] DownloadImpl.setState: com.myApp.Foo from DOWNLOADING to SUCCESS.
D/Finsky (29919): [1] DownloadQueueImpl.onComplete: com.myApp.Foo: onComplete
D/Finsky (29919): [1] DownloadQueueImpl.remove: Download com.myApp.Foo removed from DownloadQueue
I/ActivityManager( 226): Start proc com.android.defcontainer for service com.android.defcontainer/.DefaultContainerService: pid=30008 uid=10019 gids={1015, 2001}
I/ActivityManager( 226): Process de.gdp (pid 29754) has died.
W/ActivityManager( 226): Scheduling restart of crashed service de.gdp/com.urbanairship.push.PushService in 5000ms
I/ActivityManager( 226): Low Memory: No more background processes.
W/ActivityManager( 226): No content provider found for:
W/ActivityManager( 226): No content provider found for:
D/PackageParser( 226): Scanning package: /data/app/vmdl2041276702.tmp
D/Finsky (29919): [8] 1.packageInstalled: Package install status for "com.myApp.Foo" is -4
D/Finsky (29919): [1] InstallerTask.cancelCleanup: Cancel running installation of com.myApp.Foo
I/TiApplication(30017): (main) [0,0] checkpoint, app created.
I/ActivityManager( 226): Process com.android.defcontainer (pid 30008) has died.
I/ActivityManager( 226): Low Memory: No more background processes. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:10:56.110

我不认为问题出在你身上——听起来客户端 Android 很糟糕。

我怀疑您的一个或多个客户端安装的应用程序占用了缓存或数据存储。让他/她转到设置 -> 应用程序 -> 全部（或 2.3.6 上的等效项）并清除列表中一个或多个顶级应用程序的数据，方法是选择一个应用程序，然后选择“清除数据”和“清除缓存”。

在他/她完成此操作后，安装应该可以正常工作。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-05T18:56:31.400

选择您的项目 --> 右键单击​​ --> 刷新 --> 然后选择项目选项卡 --> 选择清理 --> 运行您的应用程序

（在发布问题第一次冲浪相关问题之前只有一个建议）

# c - 如何生成 0 和 2pi 之间的随机数？

> ID：14713528
> 
> 赞同：2
> 
> 时间：2013-02-05T17:38:04.700
> 
> 标签：c

> **可能的重复：**
> [如何从 C++ 生成均匀分布在 0 和 1 之间的随机双精度数？](https://stackoverflow.com/questions/1340729/how-do-you-generate-a-random-double-uniformly-distributed-between-0-and-1-from-c)

我试图弄清楚如何在 0 和 pi 之间生成一个随机数，但通常的方法不起作用，因为 mod 进行整数除法：

```
double num = rand() % 2*M_PI; 
```

我该怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T17:43:06.813

生成一个介于 0 和 1 之间的随机数，然后将结果乘以`2*M_PI`。

如果您在 0 和 1 之间有一个均匀分布，那么您也将在 0 和 之间有一个均匀分布`2*M_PI`，直到您使用的数值类型中可用的精度限制。

要在 0 和 1 之间生成随机统一双精度，请参阅@dasblinkenlight 在他的评论中[建议的答案。](https://stackoverflow.com/questions/1340729/how-do-you-generate-a-random-double-uniformly-distributed-between-0-and-1-from-c)

# java - 如何在参数对象类中使用 @CookieValue？

> ID：14713531
> 
> 赞同：1
> 
> 时间：2013-02-05T17:38:21.067
> 
> 标签：java, spring-mvc, cookies, parameter-object

是否可以将@CookieValue 放在参数对象中？我似乎无法让这个工作缺少什么？

```
@RequestMapping(value = "/Users", method = RequestMethod.GET)
@ResponseBody
public Response getAllActiveUsers(CookieParameters parameterObject) {

  return getUserImpl.getAllActiveUsers(parameterObject.userToken,
                 parameterObject.loggedInUserId);
} 
```

这是参数对象类。

```
public class CookieParameters {
public String userToken;
public String loggedInUserId;

public CookieParameter(
    @CookieValue(value = "Token", defaultValue = "") final String userToken,
    @CookieValue(value = "LoggedInUserId", defaultValue = "") final String  loggedInUserId) {
    this.userToken = userToken;
    this.loggedInUserId = loggedInUserId;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:08:01.987

我不认为这是可能的。据我了解，`@CookieValue`只能放在处理程序方法的参数上。我认为您必须`@CookieValue`手动抓取并将它们放入您的参数对象中。

# c++ - 这个 Cosine 16 位函数实际上在做什么？

> ID：14713538
> 
> 赞同：3
> 
> 时间：2013-02-05T17:39:18.537
> 
> 标签：c++, trigonometry

我想我在审查其他人的代码方面相当不错……但我不知所措。这来自 Doom3 数学库。我相信自 Quake 1 以来这可能已经存在于 GPL 中。请注意，这确实引用了 math.h。我猜有某种方法可以实际计算余弦......但我无法弄清楚。有人解释一下吗？

```
 ID_INLINE float idMath::Cos16( float a ) {
    float s, d;

    if ( ( a < 0.0f ) || ( a >= TWO_PI ) ) {
        a -= floorf( a / TWO_PI ) * TWO_PI;
    }
#if 1
    if ( a < PI ) {
        if ( a > HALF_PI ) {
            a = PI - a;
            d = -1.0f;
        } else {
            d = 1.0f;
        }
    } else {
        if ( a > PI + HALF_PI ) {
            a = a - TWO_PI;
            d = 1.0f;
        } else {
            a = PI - a;
            d = -1.0f;
        }
    }
#else
    a = PI - a;
    if ( fabs( a ) >= HALF_PI ) {
        a = ( ( a < 0.0f ) ? -PI : PI ) - a;
        d = 1.0f;
    } else {
        d = -1.0f;
    }
#endif
    s = a * a;
    return d * ( ( ( ( ( -2.605e-07f * s + 2.47609e-05f ) * s - 1.3888397e-03f ) * s + 4.16666418e-02f ) * s - 4.999999963e-01f ) * s + 1.0f );
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T17:41:27.487

所有有条件的东西看起来都像是将角度折叠到一个象限（或者可能是八分圆，我懒得弄清楚......;）），并记录一个校正因子（`d`）。

最后一行是执行某种 10 阶多项式逼近（可能是[Taylor](http://en.wikipedia.org/wiki/Taylor_series)或[Chebyshev](http://en.wikipedia.org/wiki/Chebyshev_approximation#Chebyshev_approximation)？）。^* 但它只适用于偶数幂，`cos`偶数函数也是如此。它还使用[霍纳的方法](http://en.wikipedia.org/wiki/Horner%27s_method)来避免多次直接计算大幂。

然后使用 . 重新应用正确的符号`d`。

* * *

[* 要查看这是否“相当”准确，请尝试在 Octave 中运行以下代码（您可以在线执行，例如[此处](http://weboctave.mimuw.edu.pl/weboctave/web/index.php)）：

```
% One quadrant
a = (-pi/2):0.1:(+pi/2);

% Exact result
y_exact = cos(a);

% Our approximation
s = a .* a;
y_approx = (((((-2.605e-07 .* s + 2.47609e-05) .* s - 1.3888397e-03) .* s + 4.16666418e-02) .* s - 4.999999963e-01) .* s + 1);

% Plot
hold on
plot(a, y_exact,  'b')
plot(a, y_approx, 'r') 
```]

# android - Android ListActivity 行点击

> ID：14713539
> 
> 赞同：4
> 
> 时间：2013-02-05T17:39:23.700
> 
> 标签：android

我有一个显示玩家信息的活动。这部分工作正常。（我使用了适配器）。但是我应该把检测一行被点击的代码放在哪里呢？

PlayersActivity.java

```
package com.democratandchronicle.billstrainingcamp;

import android.os.Bundle;

public class PlayersActivity extends ListActivity 
{

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_players);
        PlayersAdapter adapter = new PlayersAdapter(this);
        getListView().setAdapter(adapter);
        PlayersFetchTask loadPlayersTask = new PlayersFetchTask(adapter);
        loadPlayersTask.execute(); 
    }
} 
```

PlayersAdapter.java

```
package com.democratandchronicle.billstrainingcamp;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.RelativeLayout;
import android.widget.TextView;

public class PlayersAdapter extends BaseAdapter {

    private Context context;
    private LayoutInflater layoutInflater;
    private JSONArray entries = new JSONArray();
    private DrawableManager dm;
    public PlayersAdapter(Context context) {
        super();
        this.context = context;
        this.layoutInflater = (LayoutInflater) this.context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        this.dm = new DrawableManager();
    }

    @Override
    public int getCount() {
        return this.entries.length();
    }

    @Override
    public Object getItem(int position) {
        try {
            return this.entries.getJSONObject(position);
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        RelativeLayout playerRowView;

        if (convertView == null)
        {
            playerRowView = (RelativeLayout) this.layoutInflater.inflate(R.layout.player_row, parent, false);
        }
        else
        {
            playerRowView = (RelativeLayout) convertView;
        }

        TextView playerNameText = (TextView) playerRowView.findViewById(R.id.playerName);
        TextView playerPositionText = (TextView) playerRowView.findViewById(R.id.playerPosition);
        ImageView playerImageView = (ImageView) playerRowView.findViewById(R.id.playerImage);

        try 
        {
            JSONObject dataRow = this.entries.getJSONObject(position);
            playerNameText.setText(dataRow.getString("firstName") + " "+ dataRow.getString("lastName"));
            playerPositionText.setText(dataRow.getString("position"));
            if (!dataRow.getString("photo").equals(""))
            {
                this.dm.fetchDrawableOnThread(dataRow.getString("photo"), playerImageView);
            }

        } 
        catch (JSONException e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return playerRowView;
    }

    public void upDateEntries(JSONArray entries)
    {
        this.entries = entries;
        this.notifyDataSetChanged();
    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T17:43:21.267

> 我应该把检测点击行的代码放在哪里？

要检测行中任意位置的点击，请[`OnItemClickListener`](https://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)在 Activity 中使用。

要检测每行不同区域的点击，[`OnClickListeners`](https://developer.android.com/reference/android/view/View.OnClickListener.html)请在适配器内部使用`getView()`.

如果您使用 ViewHolder 方法，您也可以创建一个稍快的适配器。Google Talk [TurboCharge Your UI](https://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)详细讨论了这一点和其他良好做法。

* * *

**添加**

> 我将如何在我的活动中做到这一点？

ListActivities 有一个 OnListItemClick 内置，回调的名称略有不同：[`onListItemClick()`](https://developer.android.com/reference/android/app/ListActivity.html#onListItemClick%28android.widget.ListView,%20android.view.View,%20int,%20long%29)。像这样使用它：

```
@Override
protected void onListItemClick (ListView l, View v, int position, long id) {
    Toast.makeText(this, "Clicked row " + position, Toast.LENGTH_SHORT).show();
} 
```

# ruby-on-rails - 使用sidekiq 仅执行许多重复作业中的一项？

> ID：14713540
> 
> 赞同：10
> 
> 时间：2013-02-05T17:39:32.887
> 
> 标签：ruby-on-rails, mongodb, sidekiq

我有一个后台作业，在 MongoDB 上执行 map/reduce 作业。当用户向文档发送更多数据时，它会启动在文档上运行的后台作业。如果用户发送多个请求，它将为同一个文档启动多个后台作业，但只有一个真正需要运行。有没有办法可以防止多个重复实例？我正在考虑为每个文档创建一个队列，并在提交新作业之前确保它是空的。或者也许我可以以某种方式设置一个与我的文档 ID 相同的作业 ID，并在提交之前检查是否不存在？

另外，我刚刚发现了一个 sidekiq-unique-jobs gem。但是文档不存在。这是我想要的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T18:27:45.300

我最初的建议是这个特定工作的互斥锁。但是由于您可能有多个应用程序服务器在处理 sidekiq 作业，因此我建议在 redis 级别进行一些操作。

例如，在你的 sidekiq worker 定义中 使用[redis-semaphore 。](https://github.com/dv/redis-semaphore "redis信号量")*一个未经测试的例子*：

```
def perform
  s = Redis::Semaphore.new(:map_reduce_semaphore, connection: "localhost")

  # verify that this sidekiq worker is the first to reach this semaphore.
  unless s.locked?

    # auto-unlocks in 90 seconds. set to what is reasonable for your worker.
    s.lock(90)
    your_map_reduce()
    s.unlock
  end
end

def your_map_reduce
  # ...
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-31T18:04:07.157

[https://github.com/krasnoukhov/sidekiq-middleware](https://github.com/krasnoukhov/sidekiq-middleware)

UniqueJobs 为作业提供唯一性。

用法

示例工人：

```
class UniqueWorker
  include Sidekiq::Worker

  sidekiq_options({
    # Should be set to true (enables uniqueness for async jobs)
    # or :all (enables uniqueness for both async and scheduled jobs)
    unique: :all,

    # Unique expiration (optional, default is 30 minutes)
    # For scheduled jobs calculates automatically based on schedule time and expiration period
    expiration: 24 * 60 * 60
  })

  def perform
    # Your code goes here
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-24T16:20:33.413

还有[https://github.com/mhenrixon/sidekiq-unique-jobs](https://github.com/mhenrixon/sidekiq-unique-jobs) (SidekiqUniqueJobs)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-12T04:58:21.523

您可以这样做，假设您已将所有作业添加到 Enqueued 存储桶。

```
class SidekiqUniqChecker
  def self.perform_unique_async(action, model_name, id)
    key = "#{action}:#{model_name}:#{id}"
    queue = Sidekiq::Queue.new('elasticsearch')
    queue.each { |q| return if q.args.join(':') == key }
    Indexer.perform_async(action, model_name, id)
  end
end 
```

上面的代码只是一个示例，但您可以根据需要对其进行调整。

[资源](https://blog.francium.tech/avoiding-duplicate-jobs-in-sidekiq-dcbb1aca1e20)

# c++ - 成员通过函数指针调用内联成员函数，那会被内联吗？

> ID：14713541
> 
> 赞同：0
> 
> 时间：2013-02-05T17:39:34.050
> 
> 标签：c++, inline, member-function-pointers

我有一组仅算术函数，它们的调用不是在编译时确定的，而是在运行时确定的。我打算创建一个指向所有指针的数组，并通过数组索引处理对它们的调用（例如，如果 (a>3) 调用第三个）。

这些函数将在循环中被大量重复调用，因此必须内联它们以提高性能。

我的问题是，这种通过内联成员函数指针的调用最终会被内联吗？

谢谢！

```
class foo{
    private:
    int f(int x){return x;}
    int (foo::*pf)(int);
    public:
    foo(){
        pf=&foo::f;
        (*this.*pf)(3); //will this call be inlined?
        f(3);           //this call is surely inlined
    }
};
int main(){
    foo f;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:46:50.183

首先，*永远不能*保证特定调用会被内联（没有使用特定于编译器的扩展），因此代码中的“肯定”并不是一个确定的赌注。

您的示例中的函数指针调用*可以*内联（因为编译器可以使用静态分析来判断正在调用的函数）但是该示例是人为的，我怀疑您的代码是否那么简单。

说了这么多，更重要的问题是你为什么现在担心性能？您是否有使用探查器确定的实际热点并试图改进，或者您是否只是“感觉”这将是一个问题？

专注于编写干净、可理解和可维护的代码，*然后* **在**编写**和**调试之后，您可以专注于通过微优化对其进行性能调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T18:33:41.517

如果代码在运行时决定调用哪个函数，很明显，该函数不能被内联——别无选择，只能通过指针调用它。这实际上是“编译器能否弄清楚正在发生的事情”的情况。如果您根据某些条件通过指针调用函数，那么编译器将需要了解条件如何影响使用哪个指针。如果编译器在编译代码时无法决定这一点，它必须使用函数指针。

因此，在您的示例代码中，编译器可以（如果它选择这样做）内联`foo`和 figure `f`。

但是，如果，比如说，

在构造函数中，例如：

```
if (x > y) pf = foo::f(); else pf = foo::g(); 
```

在其他一些代码中，编译器不直接知道 x 和 y 值在构造中是什么：

```
*blah.*pf(); 
```

调用不能被内联，因为编译器不知道是否`f`或者`g`是要调用的函数。

我希望这是有道理的。

【我也想知道为什么不能用虚函数……】

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T17:49:34.373

“这些函数将在循环中被大量重复调用，因此必须内联它们以提高性能。”

现在没有这样的事情。

对于您的内联 ans ：该调用将被内联或不依赖于编译器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T17:45:48.440

在一般情况下，不，不会。在编译器看到如何获取指向成员的指针并且编译器可以看到所有内容的特定情况下，它可以。

# scala - 将 Scala 隐式转换方法转换为 2.10 隐式类

> ID：14713543
> 
> 赞同：1
> 
> 时间：2013-02-05T17:39:38.323
> 
> 标签：scala, implicit-conversion

我正在尝试将以下 Scala 2.9 隐式转换方法转换为 2.10 隐式类：

```
import java.sql.ResultSet

/**
 * Implicitly convert a ResultSet to a Stream[ResultSet]. The Stream can then be
 * traversed using the usual map, filter, etc.
 *
 * @param row the Result to convert
 * @return a Stream wrapped around the ResultSet
 */
implicit def stream(row: ResultSet): Stream[ResultSet] = {
  if (row.next) Stream.cons(row, stream(row))
  else {
    row.close()
    Stream.empty
  }
} 
```

我的第一次尝试没有编译：

```
implicit class ResultSetStream(row: ResultSet) {
  def stream: Stream[ResultSet] = {
    if (row.next) Stream.cons(row, stream(row))
    else {
      row.close()
      Stream.empty
    }
  }
} 
```

我收到语法错误，`stream(row)`因为`stream`不带参数。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T17:55:40.907

尝试这个 ：

```
scala> import java.sql.ResultSet
import java.sql.ResultSet

scala> implicit class ResultSetStream(row: ResultSet) {
     |     def stream: Stream[ResultSet] = {
     |       if (row.next) Stream.cons(row, row.stream)
     |       else {
     |         row.close()
     |         Stream.empty
     |       }
     |     }
     |   }
defined class ResultSetStream 
```

你定义`stream`为函数，所以`stream(row)`不能工作。

您可以继承自`AnyVal`创建一个[值类](http://docs.scala-lang.org/sips/pending/value-classes.html)并优化您的代码：

```
implicit class ResultSetStream(val row: ResultSet) extends AnyVal {
    def stream: Stream[ResultSet] = {
      if (row.next) Stream.cons(row, row.stream)
      else {
        row.close()
        Stream.empty
      }
    }
  } 
```

# java - 显示表：titlekey 不起作用

> ID：14713546
> 
> 赞同：1
> 
> 时间：2013-02-05T17:39:49.143
> 
> 标签：java, jsp, struts2, displaytag

我正在 Struts 2 应用程序上开发 1.2 版的显示表。我在我的显示表列中获取“titleKey”的值时遇到问题。

`<display:column titleKey="title.key" >`

我有点确定我没有配置问题。我尝试在表外获取相同的值：

```
<s:text name="title.key"/> 
```

我成功地做到了这一点。

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:08:36.553

我不知道为什么 DisplayTag 会知道 S2 I18N 机制。

要么使用 DisplayTag 的[I18N 支持](http://www.displaytag.org/1.2/i18n.html)，要么不使用键（例如，`"title"`属性）并使用正常 S2 机制公开的值。

# gcc - 使用调试符号构建 FFTW - 端口到 64 位目标的问题

> ID：14713548
> 
> 赞同：0
> 
> 时间：2013-02-05T17:39:52.023
> 
> 标签：gcc, gdb, 32bit-64bit, fftw

我需要找出为什么 fftw 在使用 gcc4.0 在 32 位目标上构建 OK 而现在在使用 gcc4.6 的 64 位目标上失败的应用程序中出现段错误。

fftw 配置选项：

*   --启用调试
*   --enable-debug-malloc
*   --启用调试对齐

似乎只添加了内部调试，我希望通过打开 gdb 调试符号来到达某个地方，这样我就可以尝试追踪段错误的原因。是否有我以某种方式错过的 gdb 调试选项？

或者，还有其他方法我应该尝试追踪 fftw 中的段错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:38:51.203

正如我在上面的评论中所指出的，答案是编辑由 fftw3 的配置生成的 Makefile 以将 -ggdb 添加到 CFLAGS。

# php - 具有修改的 url 结构的 Wordpress 多站点

> ID：14713550
> 
> 赞同：0
> 
> 时间：2013-02-05T17:40:11.060
> 
> 标签：php, wordpress, apache, dns, subdomain

我开始使用子域结构在 Wordpress 多站点上工作，但要求它具有这样的 URL 结构：

*   parentsite.domain.com
*   childsite.domain.com

与默认值相反：

*   parentsite.domain.com
*   childsite.parentsite.domain.com

设置它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:49:18.203

好像您正在尝试设置标准的多站点/子域配置...

在 Wordpress 中创建 2 个站点（使用 MySites->Network Admin->Sites）：

a.domain.com 和 b.domain.com

然后将两个子域的 DNS A 记录指向您的 wordpress 服务器的 IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:18:02.587

您可以根据需要使用重写规则：

```
add_filter( 'rewrite_rules_array','my_insert_rewrite_rules', 99 );
add_action( 'wp_loaded','my_flush_rules' );

function my_flush_rules() {
    global $wp_rewrite;
    $wp_rewrite->flush_rules();
}

function my_insert_rewrite_rules( $rules ) {
    //do whatever you want !
    print_r( $rules );
    return $rules;
} 
```

您只需要确保在 db 中更新站点 url。

# android - ListFragment 错误

> ID：14713551
> 
> 赞同：0
> 
> 时间：2013-02-05T17:40:11.783
> 
> 标签：android, listview, grouping, fragment

我在“列表视图”中有一个列表，可以使用这种混乱、分组滚动列表，并且列表有一个带有图标的标题。

公共类 MyCustomAdapter 扩展 BaseAdapter {

```
private static final String ASSETS_DIR = "images/";
private static final int TYPE_HEAD = -1;
private static final int TYPE_ITEM = 0;
private static final int TYPE_SEPARATOR = 1;
private static final int TYPE_MAX_COUNT = TYPE_SEPARATOR + 1;

private Context ctx;

private ArrayList<String> mData = new ArrayList<String>();
private LayoutInflater mInflater;

private TreeSet<Integer> mSeparatorsSet = new TreeSet<Integer>();

public MyCustomAdapter(Context context) {
    this.ctx = context;
    mInflater = (LayoutInflater) ctx
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public void addItem(final String item) {
    mData.add(item);
    notifyDataSetChanged();
}

public void addSeparatorItem(final String item) {
    mData.add(item);
    mSeparatorsSet.add(mData.size() - 1);
    notifyDataSetChanged();
}

public void addHeadItem(){
    mData.add("");
    mSeparatorsSet.add(0);
    notifyDataSetChanged();
}

@Override
public int getCount() {

    return mData.size();
    //return equipos.size();
}

@Override
public String getItem(int position) {

    return mData.get(position) ;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public int getItemViewType(int position) {
    if (position==0)
        return TYPE_HEAD;

    return mSeparatorsSet.contains(position) ? TYPE_SEPARATOR : TYPE_ITEM;
}

@Override
public int getViewTypeCount() {
    return TYPE_MAX_COUNT;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder holder = null;
    int type = getItemViewType(position);
    System.out.println("getView " + position + " " + convertView
            + " type = " + type);
    if (convertView == null) {
        holder = new ViewHolder();
        switch (type) {
        case TYPE_ITEM:
            convertView = mInflater.inflate(R.layout.list_item, null);

            holder.textView1 = (TextView) convertView.findViewById(R.id.textView1);
            holder.textView2 = (TextView) convertView.findViewById(R.id.textView2);
            holder.textView3 = (TextView) convertView.findViewById(R.id.textView3);
            holder.imageView1 = (ImageView) convertView.findViewById(R.id.imageView1);

            String[] datos = mData.get(position).split("-");

            holder.textView1.setText(String.format(" %s - %s", datos[0],datos[1]));
            holder.textView2.setText(datos[2]);
            holder.textView3.setText(datos[3]);

            String sel_bandera =  datos[4].trim() ;

            String imgFilePath = "";

            if (sel_bandera.equals("verde")){
                 imgFilePath = ASSETS_DIR + "circle_green.png" ;
            }else if (sel_bandera.equals("amarilla")){
                 imgFilePath = ASSETS_DIR + "circle_yellow.png";
            }else {
                 imgFilePath = ASSETS_DIR + "circle_red.png";
            }
            try {
                Bitmap bitmap = BitmapFactory.decodeStream(this.ctx.getResources().getAssets().open(imgFilePath));
                holder.imageView1.setImageBitmap(bitmap);
                //bandera.setImageBitmap(bitmap);
            } catch (IOException e) {
                e.printStackTrace();
            }

            break;
        case TYPE_SEPARATOR:
            convertView = mInflater.inflate(R.layout.list_group, null);
            holder.textView1 = (TextView) convertView.findViewById(R.id.textSeparator);
            holder.textView1.setText(mData.get(position));
            break;

        case TYPE_HEAD:
            convertView = mInflater.inflate(R.layout.list_head, null);

            break;
        }
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    return convertView;

}

public static class ViewHolder {

    public TextView textView1;
    public TextView textView2;
    public TextView textView3;
    public ImageView imageView1;

    public TextView getTextView1() {
        return textView1;
    }
    public void setTextView1(TextView textView1) {
        this.textView1 = textView1;
    }
    public TextView getTextView2() {
        return textView2;
    }
    public void setTextView2(TextView textView2) {
        this.textView2 = textView2;
    }
    public TextView getTextView3() {
        return textView3;
    }
    public void setTextView3(TextView textView3) {
        this.textView3 = textView3;
    }
    public ImageView getImageView1() {
        return imageView1;
    }
    public void setImageView1(ImageView imageView1) {
        this.imageView1 = imageView1;
    }

} 
```

}

公共类 EquiposActivity 扩展 ListFragment 实现 OnTouchListener {

public View onCreateView(LayoutInflater inflater, ViewGroup 容器, Bundle savedInstanceState) { mAdapter = new MyCustomAdapter(getActivity());

```
 if (lista.length > 0) {
                String[] datos = lista[0].split("-");
                cabecera_grupo = datos[4];
            }

            mAdapter.addHeadItem();

            for (int i = 0; i < lista.length; i++) {

                String[] datos = lista[i].split("-");
                String grupo = datos[4];

                if (i == 0) {
                    mAdapter.addSeparatorItem(grupo.replace("_", " "));

                }

                if (!grupo.equals(cabecera_grupo)) {

                    mAdapter.addSeparatorItem(grupo.replace("_", " "));
                    cabecera_grupo = grupo;
                }

                mAdapter.addItem(String.format("%s - %s - %s - %s - %s",
                        datos[0], datos[1], datos[2], datos[3], datos[5]));

            }

            setListAdapter(mAdapter); 
```

return super.onCreateView(inflater, container, savedInstanceState); }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:23:38.220

我建议你重写你的 getView() 方法，因为我认为你错误地使用了 ViewHolder 模式。阅读：[http](http://www.jmanzano.es/blog/?p=166) : //www.jmanzano.es/blog/?p=166 或者只是摆脱 ViewHolder 和代码 getView() 没有它。

# jquery - 使用 Metro UI CSS 的超级按钮栏

> ID：14713556
> 
> 赞同：4
> 
> 时间：2013-02-05T17:40:26.720
> 
> 标签：jquery, html, css, microsoft-metro

我是网络开发的新手…………

我使用[Metro UI CSS](http://metroui.org.ua/)来创建[这个](http://apps.engineerinme.com/dufferzafar/metroMe/)

我现在正在尝试模拟 Charms Bar。

我希望当用户单击主题按钮时，应在右侧显示一个包含一些控件等的栏。该栏应在失去焦点时隐藏（用户在栏外单击）。

Charms 栏是使用`<div class="charms">`我也添加`style="display:none;"`的，因此该栏在开始时不可见。

然后我使用以下代码在用户选择主题按钮或文本时显示它

```
$(document).click(function(event) 
{
var $target = $(event.target);
var target = event.target;

if (!target.id.indexOf("theme")) //if the target id contains "theme" then show charms bar
{
    $("div .charms").fadeIn(600)
}

else
{
    if (target.id != "charms")  //if the charms bar itseff is NOT clicked
        $("div .charms").fadeOut(600)
}   
}); 
```

我不喜欢这段代码，因为当我单击魅力栏中的控件时，它会隐藏栏本身。

我需要做的就是创建一个浮动栏，当用户单击按钮时可见，当用户单击其他内容时隐藏.......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-14T10:06:11.687

你正在考虑，像这样的东西：

```
Use Event Like mousemove : to populate Charms bar see below : 
```

[见演示](http://jsfiddle.net/ashish41191/4pCsS/2/)

将鼠标移到窗口右侧。

# ios - iOS 静态库 Xcode（链接错误）

> ID：14713557
> 
> 赞同：1
> 
> 时间：2013-02-05T17:40:36.220
> 
> 标签：ios, xcode, linker, static-libraries

我使用已编译的 Xcode 创建了一个静态库，并选择了一个设备。

我在 Xcode 4.6 中将此添加到我的库测试项目中

但我在链接过程中总是有2个错误......

我遵循了本教程：[静态库 iOS 教程](http://www.icodeblog.com/2011/04/07/creating-static-libraries-for-ios/)

如果我下载示例代码，我会遇到同样的错误：

> ld：警告：忽略文件 /Users/Downloads/ICodeBlogStaticLibrarySample/MathTest/Classes/iCodeBlogsMathLibrary/libICodeMathUtils.a，文件 /Users/Downloads/ICodeBlogStaticLibrarySample/MathTest/Classes/iCodeBlogsMathLibrary/libICodeMathUtils.a 中缺少所需的体系结构 i386（2 片）架构 i386 的符号：“_OBJC_CLASS_$_MathFunctions”，引用自：MathTestAppDelegate.o ld 中的 objc-class-ref：找不到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 到见调用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:30:22.843

我曾经做过一个静态图书馆，我有同样的问题。解决方案是“在设备上运行应用程序”而不是在模拟器上，它工作正常！！！希望这可以帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:20:22.713

我按照这个分步教程进行操作：

[教程](http://www.blog.montgomerie.net/easy-xcode-static-library-subprojects-and-submodules)

特别是我必须添加这些标志：`-ObjC`和`-all_load`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-23T10:27:01.750

您必须在构建项目时选择了 iOS 模拟器。选择iOS设备，应该没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T18:14:22.280

请阅读并尝试理解错误信息，这是一个有意义的英文短语。

> 未找到体系结构 i386 的符号

所以库中没有 i386 架构的编译代码。这意味着它要么仅针对 ARM（针对实际 iOS 设备，例如 iPhone 或 iPad）进行编译，要么针对 64 位模拟器 (x86_64) 进行编译。用于`otool`找出库中存在的体系结构。

# android - Android - 后退按钮重新启动 Activity

> ID：14713560
> 
> 赞同：0
> 
> 时间：2013-02-05T17:41:00.850
> 
> 标签：android, android-intent, android-activity

我有 4 个活动，我的导航是这样的：

**第一项活动 --> 第二项活动 --> 第三项活动 --> 第四项活动 --> 第三项活动**

当我现在从'**第三个活动'****往回推**时，它转到第四个活动。但是我希望它去**第二个活动**。所以，我在第三个活动中重写**了 onBackPressed()**方法：**startActivity(this , SeconActivity.class)**

 ********问题：当我第一次从第一个活动-> 第二个活动**导航时，我根据**onCreate** () 方法中第一个活动的一些输入**启用**和**禁用按钮。**因此，当我从第三个活动-> 第二个活动导航时，我想保留这些更改。有任何想法吗 ？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:44:14.820

通过 startActivityForResult 启动第 4 个活动。当您想再次调用第三个活动时，只需返回配置第三个活动所需的结果，通过[`onActivityResults()`](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29).

第三次活动伪代码：

```
final int FOURTH_RESULTS=101;

startActivityForResults(Intent fourthActivityIntent, FORTH_RESULTS

protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    switch (requestCode)
    {
        case FORTH_RESULTS:
            //Do stuff here
            break;
    }
} 
```

第 4 次活动伪代码（将其放置在您曾经调用第 3 级的位置）

```
Intent result = new Intent();              
setResult(Activity.RESULT_OK, result); 
```

另请参阅[API](http://developer.android.com/training/basics/intents/result.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:44:02.513

阅读有关此主题的信息的活动启动模式，singleTop 过去曾为我工作过。

[http://developer.android.com/guide/topics/manifest/activity-element.html](http://developer.android.com/guide/topics/manifest/activity-element.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T17:44:13.353

如果你需要做复杂的流程，我推荐使用这个库

[http://www.androidviews.net/2012/11/wizardpager/](http://www.androidviews.net/2012/11/wizardpager/)

这是在您的 android 应用程序中强制执行某种流程的好方法。********

# haskell - 如何使用 Haskell 进行子域路由

> ID：14713564
> 
> 赞同：4
> 
> 时间：2013-02-05T17:41:18.587
> 
> 标签：haskell, haskell-snap-framework, hakyll

使用使用 snap 的 Hakyll 我开始在路由服务器上工作。鉴于他们教程中的以下代码，我可以看到路由，但我希望在他们自己的子域上拥有一些不同的应用程序，例如 oneapp.mysite.com。这可以使用 snap 或任何其他 Haskell 服务器吗？

```
site :: Snap ()
site =
    ifTop (writeBS "hello world") <|>
    route [ ("foo", writeBS "bar")
          , ("echo/:echoparam", echoHandler)
          ] <|>
    dir "static" (serveDirectory ".") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T01:16:55.223

我以前没有这样做过，但这是我会尝试的：

使用该`wrapSite`功能有条件地使用您的子域的路由，您可以测试请求哪个子域`fmap rqServerName getRequest`

[http://hackage.haskell.org/packages/archive/snap/0.11.0/doc/html/Snap-Snaplet.html#g:7](http://hackage.haskell.org/packages/archive/snap/0.11.0/doc/html/Snap-Snaplet.html#g:7) [http://hackage.haskell.org/packages/archive/snap-core /0.9.2.2/doc/html/Snap-Core.html#g:5](http://hackage.haskell.org/packages/archive/snap-core/0.9.2.2/doc/html/Snap-Core.html#g:5) [http://hackage.haskell.org/packages/archive/snap-core/0.9.2.2/doc/html/Snap-Core.html#克：10](http://hackage.haskell.org/packages/archive/snap-core/0.9.2.2/doc/html/Snap-Core.html#g:10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T08:11:33.277

谢谢两位的建议，我做到了。我没有使用 snaplets，但我确实使用`fmap rqServerName getRequest`了和`if-then-else`语句。这是一段代码。

```
skite :: Snap ()
skite = do
    req <- fmap rqServerName getRequest
    routes req
  where
    routes req =
        if (req == "www.site1.ro") then (site1) else pass <|>
        if (req == "site1.ro") then (site1) else pass <|>
        if (req == "www.site2.ro") then (writeBS req) else pass <|>
        if (req == "site2.ro") then (writeBS "Nowhere to be found") else pass <|>
        ifTop (writeBS req) 
```

[我还在这里](https://gist.github.com/deckool/5011659)创建了一个包含完整代码的要点， 欢迎您提供进一步的建议。

# jquery - 使用 css 动画延迟无缝地惊人动画

> ID：14713568
> 
> 赞同：0
> 
> 时间：2013-02-05T17:41:34.627
> 
> 标签：jquery, css-animations

我正在处理 CSS 动画，但在尝试添加事件以向页面添加一些动态动画时遇到了问题。

为简单起见，这里是“天空” div 的循环动画：

```
.sky {
width:100%;
height: 100%;
position: absolute;
z-index: 1;
-webkit-animation: animation-sky 30s linear infinite;
}

@-webkit-keyframes animation-sky{
0%, 100% {background-color: rgb(53, 110, 231);}
16% {background-color: skyblue;}
21% {background-color: orange;}
31% {background-color: rgb(19, 2, 61);}
77% {background-color: rgb(19, 2, 61);}
82% {background-color: orange;}
92% {background-color: skyblue;}
} 
```

如您所见，它在颜色之间循环，对应于一天中的时间。

然后，使用绑定到按钮的 jQuery 事件侦听器，我将“动画”类添加到主体以循环到新动画：

```
 .animating .sky {
    -webkit-animation: scene2-sky 38s linear 1;
    -webkit-animation-delay: 22s;
}

@-webkit-keyframes scene2-sky{
        0% {background-color: rgb(19, 2, 61);}
        100% {background-color: rgb(19, 2, 61);}

} 
```

我为动画添加了延迟，因为在关键帧中显示背景颜色之前，我还有其他部分需要完成。

我的问题是，它没有延迟动画（就像我给它的 22 秒一样），它只是将背景颜色变为白色，直到 22 秒结束。

有没有办法让它继续上一个动画，直到动画延迟排队“动画”一个开始？

这是 jsfiddle 的澄清链接：http: [//jsfiddle.net/benjtinsley/UDzh7/](http://jsfiddle.net/benjtinsley/UDzh7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T15:22:56.850

一个给定的元素只能有一个属性值。

当您设置属性“动画”的值时，您会覆盖该属性的任何值。新动画值有延迟这一事实并不会改变这一事实。

要完成您想要的，只需在将新类设置为元素的 jQuery 函数中设置延迟

# javascript - 你如何在Javascript中四舍五入两位小数？

> ID：14713571
> 
> 赞同：-5
> 
> 时间：2013-02-05T17:41:41.790
> 
> 标签：javascript, math, decimal

我正在尝试将一个数字四舍五入为 2 个小数，它给了我整数！

```
var 4 = 10.99 + 89.78899999
total = number(a) + number(b); 
```

这是我目前拥有的：

```
Math.round(total, 2);  // this gives me 101 I need it to show 100.78 
```

这样做的诀窍是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T17:44:26.213

你应该[`toFixed(2)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)像这样使用：

```
alert(12.432432.toFixed(2)); // 12.43 
```

[`Math.round`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/round) 用于：*“返回四舍五入到最接近整数的数字值。”*

顺便说一句，`4`它不是 javascript 中的有效变量名，它不能以数字开头。

[哪些字符对 JavaScript 变量名有效？](https://stackoverflow.com/q/1661197/601179)

# sql-server - TSQL将字符串加在一起并注入

> ID：14713572
> 
> 赞同：1
> 
> 时间：2013-02-05T17:41:42.720
> 
> 标签：sql-server, tsql, stored-procedures, sql-server-2008-r2, sql-injection

如何安全地将双引号添加到存储过程中的 SQL 参数变量 (SQL Server 2008 R2)？

我有这个：

```
CREATE PROCEDURE procedure1 (@var1 NVARCHAR(100))
AS

DECLARE @var2 NVARCHAR(100);
SET @var2 = '"' + @var1 + '"';

SELECT * FROM TABLE1 WHERE CONTAINS(col1, @var2);

END 
```

那么我的`SET @var2`语句是否容易受到 SQL 注入的影响？有没有推荐的将字符串添加在一起的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:20:20.017

没关系。

连接引号和 SQL 注入的问题仅在您创建 SQL 语句时才会出现，然后您`EXEC`以某种方式使用该语句。

将它们连接到本身未连接到 SQL 语句中的变量不是 SQL 注入问题。该变量`@var2`自始至终被视为数据而不是可执行代码。

# asana - 从 API 访问收件箱项目？

> ID：14713580
> 
> 赞同：1
> 
> 时间：2013-02-05T17:42:00.787
> 
> 标签：asana

有没有办法通过 API 访问工作区收件箱中的项目？我主要对未读计数感兴趣，但也可以很好地利用任何未隐藏的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T23:25:31.137

目前，您无法通过简单的 API 调用来做到这一点。

您*可以*通过拉下所有项目，然后拉下每个项目的所有任务，将其存储在本地数据库中，然后搜索将 assignee_status 设置为“收件箱”的任务（[https://asana. com/developers/api-reference/tasks](https://asana.com/developers/api-reference/tasks)）。但这可能不是您想要的答案！

# c++ - 查找幂集的第 n 个集合

> ID：14713584
> 
> 赞同：5
> 
> 时间：2013-02-05T17:42:13.953
> 
> 标签：c++, algorithm, powerset

我正在尝试`n-th`在 powerset 中找到该集合。我的意思是，powerset 是按`n-th`以下顺序生成的——首先是大小，然后是字典顺序——因此，powerset 中的集合的索引`[a, b, c]`是：

```
0 - []
1 - [a]
2 - [b]
3 - [c]
4 - [a, b]
5 - [a, c]
6 - [b, c]
7 - [a, b, c] 
```

在寻找解决方案时，我能找到的只是一个返回元素列表的第 n 个排列的算法——例如，[这里](https://stackoverflow.com/questions/3561137/calculating-nth-permutation-step).

**上下文**：

我正在尝试检索`V`元素向量的整个幂集，但我需要一次只使用一组。

**要求**：

*   我只能同时维护两个向量，第一个包含列表中的原始项目，第二个包含`n-th`来自 powerset 的集合`V`——这就是我愿意在`n-th set`这里有一个函数的原因；
*   我需要**不要**在解决方案空间上以线性时间完成此操作——这意味着它不能列出所有集合并且他们选择`n-th`一个；
*   我最初的想法是使用位来表示位置，并获得我需要的有效映射 - 作为我发布的“不完整”解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T21:39:02.613

我没有该函数的封闭形式，但我确实有一个有点破解的非循环`next_combination`函数，如果有帮助，欢迎您使用。它假设您可以将位掩码适合某种整数类型，鉴于 64 元素集有 2 ^(64)种可能性，这可能不是一个不合理的假设。

正如评论所说，我发现“字典顺序”的这个定义有点奇怪，因为我会说字典顺序是： `[], [a], [ab], [abc], [ac], [b], [bc], [c]`。但我之前必须进行“首先按大小，然后按字典顺序”枚举。

```
// Generate bitmaps representing all subsets of a set of k elements,
// in order first by (ascending) subset size, and then lexicographically.
// The elements correspond to the bits in increasing magnitude (so the
// first element in lexicographic order corresponds to the 2^0 bit.)
//
// This function generates and returns the next bit-pattern, in circular order
// (so that if the iteration is finished, it returns 0).
//
template<typename UnsignedInteger>
UnsignedInteger next_combination(UnsignedInteger comb, UnsignedInteger mask) {
  UnsignedInteger last_one = comb & -comb;
  UnsignedInteger last_zero = (comb + last_one) &~ comb & mask;
  if (last_zero) return comb + last_one + (last_zero / (last_one * 2)) - 1;
  else if (last_one > 1) return mask / (last_one / 2);
  else return ~comb & 1;
} 
```

第 5 行正在执行（扩展的）正则表达式替换的位黑客等效项，它找到`01`字符串中的最后一个，将其翻转到`10`并将后面`1`的所有 s 一直向右移动。

```
s/01(1*)(0*)$/10\2\1/ 
```

第 6 行执行此操作（仅当前一个失败时）再添加一个`1`并将`1`s 一直向右移动：

```
s/(1*)0(0*)/\21\1/ 
```

我不知道这种解释是帮助还是阻碍:)

* * *

这是一个快速而肮脏的驱动程序（命令行参数是集合的大小，默认为 5，最大无符号长的位数）：

```
#include <iostream>

template<typename UnsignedInteger>
std::ostream& show(std::ostream& out, UnsignedInteger comb) {
  out << '[';
  char a = 'a';
  for (UnsignedInteger i = 1; comb; i *= 2, ++a) {
    if (i & comb) {
      out << a;
      comb -= i;
    }
  }
  return out << ']';
}

int main(int argc, char** argv) {
  unsigned int n = 5;
  if (argc > 1) n = atoi(argv[1]);
  unsigned long mask = (1UL << n) - 1;
  unsigned long comb = 0;
  do {
    show(std::cout, comb) << std::endl;
    comb = next_combination(comb, mask);
  } while (comb);
  return 0;
} 
```

* * *

考虑到枚举的大小，很难相信这个函数可能对超过 64 个元素的集合有用，但枚举一些有限的部分可能很有用，例如三个元素的所有子集。在这种情况下，只有当修改适合单个单词时，bit-hackery 才真正有用。幸运的是，这很容易测试。您只需要对位集中的最后一个字进行上述计算，直到测试`last_zero`为零。（在这种情况下，您不需要 bitand `mask`，实际上您可能想要选择一种不同的方式来指定集合大小。）如果`last_zero`结果为零（这实际上非常罕见），那么您需要做以其他方式进行转换，但原理是相同的：找到`0`a之前的第一个`1`（注意在`0`一个单词的结尾和`1`在下一个单词开头的情况）；更改`01`为，计算出需要移动`10`多少个s，然后将它们移动到最后。`1`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T17:42:13.953

考虑元素列表`L = [a, b, c]`，的幂集由`L`下式给出：

```
P(L) = {
    [],
    [a], [b], [c],
    [a, b], [a, c], [b, c],
    [a, b, c]
} 
```

考虑到每个位置，您将拥有以下映射：

```
id  | positions - integer | desired set
 0  |  [0 0 0]  -    0    |  []
 1  |  [1 0 0]  -    4    |  [a]
 2  |  [0 1 0]  -    2    |  [b]
 3  |  [0 0 1]  -    1    |  [c]
 4  |  [1 1 0]  -    6    |  [a, b]
 5  |  [1 0 1]  -    5    |  [a, c]
 6  |  [0 1 1]  -    3    |  [b, c]
 7  |  [1 1 1]  -    7    |  [a, b, c] 
```

如您所见，`id`没有直接映射到整数。需要应用适当的映射，以便您拥有：

```
id  | positions - integer |  mapped  - integer
 0  |  [0 0 0]  -    0    |  [0 0 0] -    0
 1  |  [1 0 0]  -    4    |  [0 0 1] -    1
 2  |  [0 1 0]  -    2    |  [0 1 0] -    2
 3  |  [0 0 1]  -    1    |  [0 1 1] -    3
 4  |  [1 1 0]  -    6    |  [1 0 0] -    4
 5  |  [1 0 1]  -    5    |  [1 0 1] -    5
 6  |  [0 1 1]  -    3    |  [1 1 0] -    6
 7  |  [1 1 1]  -    7    |  [1 1 1] -    7 
```

作为解决这个问题的尝试，我想出了使用二叉树来进行映射——我发布它，以便有人可以从中看到解决方案：

```
 #
                          ______________|_____________
        a               /                             \
                  _____|_____                   _______|______
        b        /           \                 /              \
              __|__         __|__           __|__            __|__
        c    /     \       /     \         /     \          /     \
           [ ]     [c]    [b]   [b, c]    [a]   [a, c]    [a, b]  [a, b, c]
index:      0       3      2       6       1      5         4         7 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T21:16:07.810

假设你的集合大小为 N。

因此，有 (N 选择 k) 个大小为 k 的集合。只需从 n 中减去（N 选择 k），直到 n 即将变为负数，您就可以非常快速地找到正确的 k（即第 n 个集合的大小）。这将您的问题减少到找到 N 集的第 n 个 k 子集。

您的 N 集的第一个（N-1 选择 k-1）k 个子集将包含其最少元素。因此，如果 n 小于（N-1 选择 k-1），则选择第一个元素并递归集合的其余部分。否则，您有（N-1 选择 k）个其他集合之一；丢弃第一个元素，从 n 中减去（N-1 选择 k-1），然后递归。

代码：

```
#include <stdio.h>

int ch[88][88];
int choose(int n, int k) {
 if (n<0||k<0||k>n) return 0;
 if (!k||n==k) return 1;
 if (ch[n][k]) return ch[n][k];
 return ch[n][k] = choose(n-1,k-1) + choose(n-1,k);
}

int nthkset(int N, int n, int k) {
 if (!n) return (1<<k)-1;
 if (choose(N-1,k-1) > n) return 1 | (nthkset(N-1,n,k-1) << 1);
 return nthkset(N-1,n-choose(N-1,k-1),k)<<1;
}

int nthset(int N, int n) {
 for (int k = 0; k <= N; k++)
  if (choose(N,k) > n) return nthkset(N,n,k);
  else n -= choose(N,k);
 return -1; // not enough subsets of [N].
}

int main() {
 int N,n;
 scanf("%i %i", &N, &n);
 int a = nthset(N,n);
 for (int i=0;i<N;i++) printf("%i", !!(a&1<<i));
 printf("\n");
} 
```

# javascript - 创建一个弹出窗口并将其写为 Javascript 中的 txt

> ID：14713586
> 
> 赞同：0
> 
> 时间：2013-02-05T17:42:21.617
> 
> 标签：javascript, client-side

所以，我有一个相当奇怪的问题。我正在编写客户端代码（它必须是客户端作为基本要求）并且需要创建一个弹出窗口来显示一些代码生成的输出。理想情况下，人们应该能够将此输出复制粘贴到 txt 文件中。

现在，当我创建窗口时，我只能用`my_window.document.write("Blah blah blah")`. 这意味着我必须使用 html 标签来进行下一行之类的事情，而且我基本上没有简单的方法来制表。由于这是一个数据文件，这有点烦人。看到浏览器如何完美地打开 .txt 文件，难道没有办法写入该文档，告诉浏览器不要将其作为 .html 文件读取，而是作为 .txt 文件读取？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:47:33.437

我不认为这是可能的。告诉浏览器文档类型的是内容类型 HTTP 标头，它是从服务器发送的。

但是你总是可以将你的全部内容转储到一个`<pre>`元素中，或者一个`<textarea>`.

# php - mysql_fetch_array() 期望参数 1 是资源，布尔值在第 15 行的 C:\wamp\www\kcms\a.php 中给出

> ID：14713589
> 
> 赞同：-4
> 
> 时间：2013-02-05T17:42:31.083
> 
> 标签：php, mysql

我试图从数据库中获取值，但它显示“mysql_fetch_array() 期望参数 1 是资源，在第 15 行的 C:\wamp\www\kcms\a.php 中给出的布尔值”错误。有人能帮我吗？

```
 <?php
    //include 'functions.php';
    $con = mysql_connect("localhost","Akash","kaka123");
    if (!$con)
    {
    die('Could not connect: ' . mysql_error());
    }
    $student = false;
    $teacher = false;
    $office = false;
    $username = 56;
    $password = 38;
    $query= "SELECT Register_no , Password FROM student profile WHERE Register_no=$username AND Password=$password" ;
    $result = mysql_query($query, $con);
    $prnt=mysql_fetch_array($result);
    if ($prnt[0]==NULL) 
    {
        $auth=0;
    }
    else
    {
        $auth=1;
        $student= true;
    }
    if ($auth==0) 
    {
        $query= "SELECT Staff_id , Password FROM staff profile WHERE Staff_id=$username AND Password=$password" ;
        $result = mysql_query($query, $con);
        $prnt=mysql_fetch_array($result);
        if ($prnt[0]=NULL) 
        {
            $auth=0;
        }
        else
        {
            $auth=1;
            $teacher = true;
        }
    }    
    if ($auth==0) 
    {
        $query= "SELECT Staff_id , Password FROM office staff WHERE Staff_id=$username AND Password=$password" ;
        $result = mysql_query($query, $con);
        $prnt=mysql_fetch_array($result);
        if ($prnt[0]==NULL) 
        {
            $auth=0;
        }
        else
        {
            $auth=1;
            $office = true;
        }
    }
    echo $username; 
    ?> 
```

有人可以尽快回复吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-05T17:47:42.437

错误消息实际上非常准确且很有帮助。`mysql_fetch_array()`在需要资源的地方使用布尔值调用。如果您查看 的文档`mysql_query()`，您会看到它`FALSE`在失败时返回，这是一个布尔值。该值存储在 中`$result`，然后传递给`mysql_fetch_array()`。因此，您的 SQL 查询会发生错误。您可以像这样检查错误：

```
$result = mysql_query("SELECT Register_no , Password FROM student profile WHERE Register_no=$username AND Password=$password") or die(mysql_error()); 
```

话虽如此，您在“学生”和“个人资料”之间有一个不应该存在的空间。您可能打算在此处添加下划线？

另外，请考虑使用 MySQLi 或 PDO，因为不推荐使用 mysql_* 扩展。我只是在这里放下名字，所以请花时间阅读这些内容。

# c# - 如何将 Firefox 和 Chrome 添加到 C# 浏览器控件？

> ID：14713596
> 
> 赞同：1
> 
> 时间：2013-02-05T17:43:05.017
> 
> 标签：c#, webbrowser-control

您能否告诉我如何将其他浏览器控件（如 Chrome、Firefox 等）添加到 C# Web 浏览器控件？我正在尝试在 C# 中创建一个 HTML 和 CSS 规则测试器，我需要将它们全部包含在应用

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T17:54:30.487

假设您只想使用其他浏览器，而不是将 Chrome 或 Firefox 添加到 C# Web 浏览器控件...这里有一些有用的链接：

用于 .NET 的 CefSharp 嵌入式 Chromium：[https ://github.com/chillitom/CefSharp](https://github.com/chillitom/CefSharp)

嵌入 Gecko（firefox 引擎）：[https ://developer.mozilla.org/en-US/docs/Gecko/Embedding_Mozilla/FAQ/Embedding_Gecko](https://developer.mozilla.org/en-US/docs/Gecko/Embedding_Mozilla/FAQ/Embedding_Gecko)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:47:49.023

你不能。Web 浏览器控件仅承载 MSHTML COM 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-13T10:59:35.123

**2016 年更新：**

如果您需要在应用程序中安装所有浏览器，我建议您查看以下组件。

[BrowseEmAll 核心 API](http://www.browseemall.com/CoreAPI)

在您的 .Net 应用程序中需要所有不同的浏览器？其中 BrowseEmAll Core API 可以**将 Chrome、Firefox、Webkit 和 Internet Explorer**集成到您的应用程序中。这是一个**商业产品**，但请注意。

*（全面披露：我为这家公司工作，所以我所说的一切都持保留态度）*

# sql - 试图将表的最近行连接到另一个表

> ID：14713600
> 
> 赞同：3
> 
> 时间：2013-02-05T17:43:10.650
> 
> 标签：sql, join, firebird

我有 2 个表，我想将表 b 的最高但不超过修订行加入表 a

表一：

```
REVISION_NO     INFO1
1               a
2               b
3               c
4               d
5               e
6               f 
```

表 b：

```
REVISION_NO     INFO2
1               x
4               y
6               z 
```

我想 ：

```
a               x
b               x
c               x
d               y
e               y
f               z 
```

一些加盟专家知道如何做到这一点？如果重要的话，数据库是 Firebird

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:08:00.933

这是适用于 SQL Server 2008 的有效解决方案。

```
BEGIN
DECLARE @a TABLE(REVISION_NO INT, INFO1 CHAR(1))
DECLARE @b TABLE(REVISION_NO INT, INFO2 CHAR(1))
INSERT INTO @a VALUES
(1, 'a'),(2,'b'),(3,'c'),(4,'d'),(5,'e'),(6,'e')
INSERT INTO @b VALUES
(1,'x'),(4,'y'),(6,'z')
--
SELECT a.INFO1
, ISNULL(b.INFO2, (
    SELECT INFO2 FROM @b WHERE REVISION_NO = (
        SELECT MAX(REVISION_NO) 
        FROM @b 
        WHERE REVISION_NO < a.REVISION_NO
))) [INFO2]
FROM @a a
LEFT JOIN @b b 
    ON b.REVISION_NO = a.REVISION_NO
END 
```

不知道firebird是否会允许这样的下一个查询

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T19:03:29.123

只是 sql：

```
select a.info01, b.info02
  from a
       inner join b on b.revision_no = (select max(revision_no) 
                                          from b 
                                         where revision_no <= a.revision_no) 
```

返回：

```
INFO01 INFO02
====== ======
a      x
b      x
c      x
d      y
e      y
f      z 
```

# android - 片段内的Android Resources$NotFoundException

> ID：14713601
> 
> 赞同：2
> 
> 时间：2013-02-05T17:43:14.110
> 
> 标签：android, android-resources, android-music-player, android-handler

我已经建立了一个带有 swipeview 的音乐播放器项目（2 个片段）。一个片段有开始按钮，当我点击开始按钮时，另一个片段显示歌曲的元数据信息，还有一个搜索栏。我的问题是在播放歌曲时通过歌曲获取当前时间。

片段的代码如下所示：

```
public static class SongParameterFragment extends Fragment {

    public SeekBar seekBar;
    static int fragmentNR;
    public ImageView cover;
    public TextView songParameter, songDuration;
    runnableTimeline timelineMonitor;

    public SongParameterFragment(int position) {
        this.fragmentNR = position;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View v = inflater.inflate(com.example.swipeview3.R.layout.song_parameters, container, false);
        cover = (ImageView)v.findViewById(com.example.swipeview3.R.id.imageView1);
        songParameter = (TextView)v.findViewById(com.example.swipeview3.R.id.textView_SongParameter);
        songDuration  = (TextView)v.findViewById(com.example.swipeview3.R.id.textView_SongDuration);
        seekBar = (SeekBar)v.findViewById(com.example.swipeview3.R.id.seekBar);

        seekBar.setOnSeekBarChangeListener(seekBarChangeListener);

        timelineMonitor = new runnableTimeline();
        Thread thread = new Thread(timelineMonitor);
        thread.start();

        return v;
    }

    SeekBar.OnSeekBarChangeListener seekBarChangeListener = new OnSeekBarChangeListener() {

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
            if(fromUser){
                if(MainActivity.mp != null){
                    int totalDuration = MainActivity.mp.getDuration();
                    int currentDuration = totalDuration * progress/100;
                    MainActivity.mp.seekTo(currentDuration);
                }
            }

        }
    };

    private class runnableTimeline implements Runnable{

        int totalDuration, currentDuration, currentTime;

        @Override
        public void run() {
                while(true){
                if(MainActivity.mp != null){
                    totalDuration = MainActivity.mp.getDuration();
                    currentDuration = MainActivity.mp.getCurrentPosition();
                    currentTime = (int)(100 * currentDuration/totalDuration);
                    seekBar.setProgress(currentTime);

                }               
                else {
                    seekBar.setProgress(0);
                }

                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    } 
```

此代码工作正常。但是当我想显示歌曲的当前时间（或歌曲进度的时间）时，我将代码`songDuration.setText(currentTime);`放在 run() 方法中，`seekBar.setProgress(currentTime);`然后得到以下错误消息：

```
E/AndroidRuntime(10902): FATAL EXCEPTION: Thread-33702
E/AndroidRuntime(10902): android.content.res.Resources$NotFoundException: String resource ID #0x0
E/AndroidRuntime(10902):    at android.content.res.Resources.getText(Resources.java:260)
E/AndroidRuntime(10902):    at android.widget.TextView.setText(TextView.java:3680)
E/AndroidRuntime(10902):    at com.example.swipeview3.MainActivity$SongParameterFragment$runnableTimeline.run(MainActivity.java:311)
E/AndroidRuntime(10902):    at java.lang.Thread.run(Thread.java:856) 
```

任何人的想法或解决方案的建议？提前谢谢

**编辑1：** 大家好，这是错误消息，当我更改代码`currentDuration.setText(currentTime);`时`currentDuration.setText("" + currentTime);`，`currentDuration.setText(Integer.toString(currentTime));`错误消息是：

```
02-05 19:26:32.973: E/AndroidRuntime(14221): FATAL EXCEPTION: Thread-33924
02-05 19:26:32.973: E/AndroidRuntime(14221): android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
02-05 19:26:32.973: E/AndroidRuntime(14221):    at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4286)
02-05 19:26:32.973: E/AndroidRuntime(14221):    at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:885)
02-05 19:26:32.973: E/AndroidRuntime(14221):    at android.view.View.requestLayout(View.java:12881)
02-05 19:26:32.973: E/AndroidRuntime(14221):    at android.view.View.requestLayout(View.java:12881)
02-05 19:26:32.973: E/AndroidRuntime(14221):    at android.view.View.requestLayout(View.java:12881)
02-05 19:26:32.973: E/AndroidRuntime(14221):    at android.view.View.requestLayout(View.java:12881)
02-05 19:26:32.973: E/AndroidRuntime(14221):    at android.view.View.requestLayout(View.java:12881)
02-05 19:26:32.973: E/AndroidRuntime(14221):    at android.view.View.requestLayout(View.java:12881)
02-05 19:26:32.973: E/AndroidRuntime(14221):    at android.view.View.requestLayout(View.java:12881)
02-05 19:26:32.973: E/AndroidRuntime(14221):    at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:268)
02-05 19:26:32.973: E/AndroidRuntime(14221):    at android.view.View.requestLayout(View.java:12881)
02-05 19:26:32.973: E/AndroidRuntime(14221):    at android.widget.TextView.checkForRelayout(TextView.java:7184)
02-05 19:26:32.973: E/AndroidRuntime(14221):    at android.widget.TextView.setText(TextView.java:3513)
02-05 19:26:32.973: E/AndroidRuntime(14221):    at android.widget.TextView.setText(TextView.java:3369)
02-05 19:26:32.973: E/AndroidRuntime(14221):    at android.widget.TextView.setText(TextView.java:3344)
02-05 19:26:32.973: E/AndroidRuntime(14221):    at com.example.swipeview3.MainActivity$SongParameterFragment$runnableTimeline.run(MainActivity.java:311)
02-05 19:26:32.973: E/AndroidRuntime(14221):    at java.lang.Thread.run(Thread.java:856) 
```

我不认为，线路`currentDuration.setText(currentTime);`是问题。我应该实现一个处理程序或类似的东西吗？

编辑2：

```
public class MainActivity extends FragmentActivity implements ActivityCommunicator {

public static MediaPlayer mp;
SongParameterFragment f2;
PlayerFragment f1;
SectionsPagerAdapter mySectionsPagerAdapter;
ViewPager mViewPager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(com.example.swipeview3.R.layout.main);

    mySectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());
    mViewPager = (ViewPager) findViewById(com.example.swipeview3.R.id.pager);
    mViewPager.setAdapter(mySectionsPagerAdapter);

}

public void PlayKlick(View v) {
    mp = MediaPlayer.create(getApplicationContext(), com.example.swipeview3.R.raw.music);
    mp.start();
    f2 = (SongParameterFragment)mySectionsPagerAdapter.getItem(1);      
    f2.passDataToFragment(loadMp3DataFile());
}

private String loadMp3DataFile() {
    ......
    return mp3_parameter;
}

public void StopKlick(View v) {
    mp.stop();      
}

public void ExitKlick(View v) {
    mp.stop();
    this.finish();
}

@Override
public void passDataToActivity(String someValue) {
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(com.example.swipeview3.R.menu.main, menu);
    return true;
}

//  ------------------------------#########################------------------------------
//  ------------------------------#########################------------------------------

public class SectionsPagerAdapter extends FragmentPagerAdapter {

    private PlayerFragment f1;  
    private SongParameterFragment f2;

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {

        if(position == 0) {
            if (f1 == null) {               
                f1 = new PlayerFragment(position);          
            }           
            return f1;      
        }       
        else {
            if (f2 == null) {               
                f2 = new SongParameterFragment(position);           
                }           
            return f2;  
        }
    }

    @Override
    public int getCount() {
        // Show 2 total pages.
        return 2;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
        case 0:
            return getString(com.example.swipeview3.R.string.title_section1).toUpperCase();
        case 1:
            return getString(com.example.swipeview3.R.string.title_section2).toUpperCase();
        }
        return null;
    }
}

//  ------------------------------#########################------------------------------
//  ------------------------------#########################------------------------------

public class PlayerFragment extends Fragment {

    int fragmentNR;
    public Button btnPlay, btnStop, btnExit;
    public MediaPlayer mp;

    public PlayerFragment(int position) {
        this.fragmentNR = position;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
       super.onCreate(savedInstanceState);
       Log.e("Test", "hello");
       //position = getArguments().getInt("position");
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) 
    {
        super.onActivityCreated(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View v = inflater.inflate(com.example.swipeview3.R.layout.player, container, false);

        btnPlay = (Button)v.findViewById(com.example.swipeview3.R.id.button_play);
        btnStop = (Button)v.findViewById(com.example.swipeview3.R.id.button_stop);
        btnExit = (Button)v.findViewById(com.example.swipeview3.R.id.button_exit);

        return v;
    }       
}

//  ------------------------------#########################------------------------------   
//  ------------------------------#########################------------------------------

 public static class SongParameterFragment extends Fragment {

    public SeekBar seekBar;
    static int fragmentNR;
    public ImageView cover;
    public TextView songParameter, songDuration;
    runnableTimeline timelineMonitor;

    public SongParameterFragment(int position) {
        this.fragmentNR = position;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View v = inflater.inflate(com.example.swipeview3.R.layout.song_parameters, container, false);
        cover = (ImageView)v.findViewById(com.example.swipeview3.R.id.imageView1);
        songParameter = (TextView)v.findViewById(com.example.swipeview3.R.id.textView_SongParameter);
        songDuration  = (TextView)v.findViewById(com.example.swipeview3.R.id.textView_SongDuration);
        seekBar = (SeekBar)v.findViewById(com.example.swipeview3.R.id.seekBar);

        seekBar.setOnSeekBarChangeListener(seekBarChangeListener);

        timelineMonitor = new runnableTimeline();
        Thread thread = new Thread(timelineMonitor);
        thread.start();

        return v;
    }

    SeekBar.OnSeekBarChangeListener seekBarChangeListener = new OnSeekBarChangeListener() {

        @Override
        public void onStopTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStartTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
            if(fromUser){
                if(MainActivity.mp != null){
                    int totalDuration = MainActivity.mp.getDuration();
                    int currentDuration = totalDuration * progress/100;
                    MainActivity.mp.seekTo(currentDuration);
                }
            }

        }
    };

    private class runnableTimeline implements Runnable{

        int totalDuration, currentDuration, currentTime;

        @Override
        public void run() {
                while(true){
                if(MainActivity.mp != null){
                    totalDuration = MainActivity.mp.getDuration();
                    currentDuration = MainActivity.mp.getCurrentPosition();
                    currentTime = (int)(100 * currentDuration/totalDuration);
                    seekBar.setProgress(currentTime);
Line 311:               songDuration.setText("" + currentTime); 
                }               
                else {
                    seekBar.setProgress(0);
                }

                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    } 
```

没人知道吗？：/

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T17:51:24.127

您当前的时间是一个 int 值。Android 正在将该 int 检测为资源。所以，你可以把 setText("" + currentTime). 这样，它将作为字符串处理，可能会解决您的问题。

# python - Python 多处理事件与主题事件

> ID：14713603
> 
> 赞同：7
> 
> 时间：2013-02-05T17:43:28.973
> 
> 标签：python, multiprocessing

根据 python 2.7.3 文档`multiprocessing.Event`是`threading.Event`. 但是，当我使用以下代码时：

```
from multiprocessing import Event
test = Event()
test.set()
test.isSet() 
```

但是我收到此错误：

```
AttributeError: 'Event' Object has no attribute 'isSet' 
```

是什么赋予了？为什么 multiprocessing Event 没有方法来检查它是否已设置？

编辑：原来 is_set 在多处理事件类中......仍然是文档撒谎

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-05T17:46:13.663

Event 类的一个实例有*is_set*方法，试试这个人：

```
test.is_set() 
```

[is_set 的文档](http://docs.python.org/2/library/threading.html#threading.Event.is_set)

# javascript - 在同位素重新布局之前执行代码

> ID：14713604
> 
> 赞同：2
> 
> 时间：2013-02-05T17:43:30.587
> 
> 标签：javascript, jquery, jquery-isotope

我希望一个项目跨越孔容器区域，以便在窗口调整我的项目大小时做到这一点。有一个“onLayout”回调，它有我需要的一切，除了它执行到晚。这就是我想要做的。

```
$container.isotope({
    itemSelector: '.puff',
    layoutMode: 'masonry',
    itemPositionDataEnabled: true,
    masonry: {
        columnWidth: columnWidth
    },
    onLayout: function ($elems, instance) {
        $spanningItem.width(this.width()-20);
    }
}); 
```

[和一把小提琴](http://jsfiddle.net/JBenjaminsson/pk29D/4/)

# android - 使用 Json 对象执行 bufferreader 时出错

> ID：14713608
> 
> 赞同：0
> 
> 时间：2013-02-05T17:43:43.920
> 
> 标签：android, json, nullpointerexception, bufferedreader

我的项目有错误，它似乎来自我的代码的这一部分

```
try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
        Log.e("JSON", json);
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString()); 
```

在此之后，我将字符串解析为 jsonobject

有人可以帮忙吗？

这是我的 logcat “错误”文件

02-05 17:46:27.286：E/Buffer 错误（527）：错误转换结果 java.lang.NullPointerException 02-05 17:46:27.286：E/JSON 解析器（527）：解析数据时出错 org.json.JSONException : 02-05 17:46:27.286 字符 0 处的输入结束：E/AndroidRuntime(527): FATAL EXCEPTION: main 02-05 17:46:27.286: E/AndroidRuntime(527): java.lang.NullPointerException 02 -05 17:46:27.286: E/AndroidRuntime(527): 在 com.example.androidhive.LoginActivity$1.onClick(LoginActivity.java:65) 02-05 17:46:27.286: E/AndroidRuntime(527): 在android.view.View.performClick(View.java:2408) 02-05 17:46:27.286: E/AndroidRuntime(527): 在 android.view.View$PerformClick.run(View.java:8816) 02-05 17:46:27.286: E/AndroidRuntime(527): 在 android.os.Handler.handleCallback(Handler.java:587) 02-05 17:46:27.286: E/AndroidRuntime(527): 在 android.os.Handler .dispatchMessage（处理程序.java：92) 02-05 17:46:27.286: E/AndroidRuntime(527): 在 android.os.Looper.loop(Looper.java:123) 02-05 17:46:27.286: E/AndroidRuntime(527): 在android.app.ActivityThread.main(ActivityThread.java:4627) 02-05 17:46:27.286: E/AndroidRuntime(527): at java.lang.reflect.Method.invokeNative(Native Method) 02-05 17:46 :27.286: E/AndroidRuntime(527): at java.lang.reflect.Method.invoke(Method.java:521) 02-05 17:46:27.286: E/AndroidRuntime(527): at com.android.internal。 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 02-05 17:46:27.286: E/AndroidRuntime(527): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 02 -05 17:46:27.286：E/AndroidRuntime（527）：在 dalvik.system.NativeStart.main（本机方法）app.ActivityThread.main(ActivityThread.java:4627) 02-05 17:46:27.286: E/AndroidRuntime(527): 在 java.lang.reflect.Method.invokeNative(Native Method) 02-05 17:46:27.286 : E/AndroidRuntime(527): at java.lang.reflect.Method.invoke(Method.java:521) 02-05 17:46:27.286: E/AndroidRuntime(527): at com.android.internal.os。 ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 02-05 17:46:27.286: E/AndroidRuntime(527): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 02-05 17:46:27.286：E/AndroidRuntime（527）：在 dalvik.system.NativeStart.main（本机方法）app.ActivityThread.main(ActivityThread.java:4627) 02-05 17:46:27.286: E/AndroidRuntime(527): 在 java.lang.reflect.Method.invokeNative(Native Method) 02-05 17:46:27.286 : E/AndroidRuntime(527): at java.lang.reflect.Method.invoke(Method.java:521) 02-05 17:46:27.286: E/AndroidRuntime(527): at com.android.internal.os。 ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 02-05 17:46:27.286: E/AndroidRuntime(527): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 02-05 17:46:27.286：E/AndroidRuntime（527）：在 dalvik.system.NativeStart.main（本机方法）在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 02-05 17:46:27.286: E/AndroidRuntime(527): 在 com.android.internal.os.ZygoteInit.main( ZygoteInit.java:626) 02-05 17:46:27.286: E/AndroidRuntime(527): at dalvik.system.NativeStart.main(Native Method)在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 02-05 17:46:27.286: E/AndroidRuntime(527): 在 com.android.internal.os.ZygoteInit.main( ZygoteInit.java:626) 02-05 17:46:27.286: E/AndroidRuntime(527): at dalvik.system.NativeStart.main(Native Method)

这是我的 loginactivity.java

```
public class LoginActivity extends Activity {
Button btnLogin;
Button btnLinkToRegister;
EditText inputEmail;
EditText inputPassword;
TextView loginErrorMsg;

// JSON Response node names
private static String KEY_SUCCESS = "success";
private static String KEY_ERROR = "error";
private static String KEY_ERROR_MSG = "error_msg";
private static String KEY_UID = "uid";
private static String KEY_NAME = "name";
private static String KEY_EMAIL = "email";
private static String KEY_CREATED_AT = "created_at";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    // Importing all assets like buttons, text fields
    inputEmail = (EditText) findViewById(R.id.loginEmail);
    inputPassword = (EditText) findViewById(R.id.loginPassword);
    btnLogin = (Button) findViewById(R.id.btnLogin);
    btnLinkToRegister = (Button) findViewById(R.id.btnLinkToRegisterScreen);
    loginErrorMsg = (TextView) findViewById(R.id.login_error);

    // Login button Click Event
    btnLogin.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            String email = inputEmail.getText().toString();
            String password = inputPassword.getText().toString();
            UserFunctions userFunction = new UserFunctions();
            Log.d("Button", "Login");
            JSONObject json = userFunction.loginUser(email, password);

            // check for login response
            try {
                if (json.getString(KEY_SUCCESS) != null) {
                    loginErrorMsg.setText("");
                    String res = json.getString(KEY_SUCCESS); 
                    if(Integer.parseInt(res) == 1){
                        // user successfully logged in
                        // Store user details in SQLite Database
                        DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                        JSONObject json_user = json.getJSONObject("user");

                        // Clear all previous data in database
                        userFunction.logoutUser(getApplicationContext());
                        db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                        

                        // Launch Dashboard Screen
                        Intent dashboard = new Intent(getApplicationContext(), DashboardActivity.class);

                        // Close all views before launching Dashboard
                        dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(dashboard);

                        // Close Login Screen
                        finish();
                    }else{
                        // Error in login
                        loginErrorMsg.setText("Incorrect username/password");
                    }
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }
        }
    });

    // Link to Register Screen
    btnLinkToRegister.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            Intent i = new Intent(getApplicationContext(),
                    RegisterActivity.class);
            startActivity(i);
            finish();
        }
    });
} 
```

}

这是 loginuser 方法

```
 public JSONObject loginUser(String email, String password){
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", login_tag));
    params.add(new BasicNameValuePair("email", email));
    params.add(new BasicNameValuePair("password", password));
    JSONObject json = jsonParser.getJSONFromUrl(loginURL, params);
    // return json
    Log.d("JSON", "issa");
    return json;
} 
```

这是 gestjsonfromurl

```
 public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T14:57:06.353

添加：如果（json！= null）之前：如果（json.getString（KEY_SUCCESS）！= null）

# apache - .htaccess 重写引擎设置豁免规则共享 SSL

> ID：14713610
> 
> 赞同：0
> 
> 时间：2013-02-05T17:43:51.193
> 
> 标签：apache, .htaccess

我目前有多个域指向同一个网络空间，即 domain.com domain.co.uk 等...

我使用 .htaccess 强制对 domain.com 的所有请求，这很好用，但是我需要使用我的主机提供的共享 SSL，它指向我在服务器上的 web 空间，并且我使用共享的 ssl 域访问它。（[http://shared_ssl.com/domain.co.uk](http://shared_ssl.com/domain.co.uk) ）。

我遇到的问题是 .htaccess 不断将域重新写入[http://www.domain.com](http://www.domain.com)，当我尝试访问共享 ssl 时。

有没有办法对重写规则有一个例外？

这是我的 .htaccess 文件

```
RewriteEngine on

# Rewrite domain.org-> domain.com
RewriteCond %{HTTP_HOST} .
RewriteCond %{HTTP_HOST} !^www\.domain\.com [NC]
RewriteRule (.*) http://www.domain.com/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:42:44.390

不知道我是否完全理解您的问题，但这是如何做到的：

```
 RewriteEngine on

  # Rewrite domain.org-> domain.com
  #RewriteCond %{HTTP_HOST} .                       # <- Not necessary

  # (you can have the whole shared_ssl.com if you want, but not necessary)
  RewriteCond %{HTTP_HOST} !^shared_ssl [NC]
  RewriteCond %{HTTP_HOST} !^www\.domain\.com [NC]
  # (and this is the preferable way to write it - I think)
  RewriteRule (.*) http://www.domain.com%{REQUEST_URI} [QSA,R=301,L] 
```

# html - Twitter Bootstrap 行过滤器/搜索框

> ID：14713622
> 
> 赞同：14
> 
> 时间：2013-02-05T17:44:17.257
> 
> 标签：html, twitter-bootstrap, search, filter

我找不到有关如何为 Twitter Bootstrap 创建简单搜索查询或行过滤器的教程。我尝试了很多，我不确定是我做错了什么还是插件与 Bootstrap 不兼容。如果可以的话请帮忙。

我试过了：

```
$(document).ready(function() {
 //Declare the custom selector 'containsIgnoreCase'.
      $.expr[':'].containsIgnoreCase = function(n,i,m){
          return jQuery(n).text().toUpperCase().indexOf(m[3].toUpperCase())>=0;
      };

      $("#search").keyup(function(){

          $("#tabela").find("tr").hide();
          var data = this.value.split(" ");
          var jo = $("#tabela").find("tr");
          $.each(data, function(i, v){

               //Use the new containsIgnoreCase function instead
               jo = jo.filter("*:containsIgnoreCase('"+v+"')");
          });

          jo.show();

      }).focus(function(){
          this.value="";
          $(this).css({"color":"black"});
          $(this).unbind('focus');
      }).css({"color":"#C0C0C0"});
}); 
```

没有这个......也许我在我的桌子或搜索框中缺少任何“id”，我是新来的。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-19T08:06:00.677

这是我使用的：

```
$('input.filter').live('keyup', function() {
    var rex = new RegExp($(this).val(), 'i');
    $('.searchable tr').hide();
        $('.searchable tr').filter(function() {
            return rex.test($(this).text());
        }).show();
    }); 
```

要使用它，您只需创建一个表，其中包含一个带有“可搜索”类的 tbody，然后在页面某处输入一个带有“过滤器”类的输入（我更喜欢将它们放在搜索图标后面的引导弹出窗口中）。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-02-03T19:30:11.947

这是 Filipp Lepalaan 提供的解决方案的实时示例。非常感谢这个小而完美的代码。

[例子](http://jsfiddle.net/giorgitbs/52aK9/1/)

```
$(document).ready(function () {

(function ($) {

    $('#filter').keyup(function () {

        var rex = new RegExp($(this).val(), 'i');
        $('.searchable tr').hide();
        $('.searchable tr').filter(function () {
            return rex.test($(this).text());
        }).show();

    })

}(jQuery)); 
```

});

# ruby-on-rails-3 - 如何渲染 action.js.coffee.erb？

> ID：14713627
> 
> 赞同：0
> 
> 时间：2013-02-05T17:44:43.313
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2

使用 js.coffee.erb 扩展名呈现操作时，我收到“缺少模板”错误消息。如果我将它重命名为 js.coffee 或 js.erb，我可以让控制器识别文件，但我失去了预处理器。

看起来以前的版本不需要 .erb 来处理 ERB，但现在需要它并且控制器无法识别模板。

还有人看到这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:22:08.250

看起来 Rails 不支持从动作渲染咖啡脚本：

[https://github.com/rails/rails/issues/2391](https://github.com/rails/rails/issues/2391)

# sql - 在设定的天数内进行 SQL 日期检查

> ID：14713633
> 
> 赞同：1
> 
> 时间：2013-02-05T17:44:53.417
> 
> 标签：sql, oracle

我试图找出在 2004 年 5 月 20 日之前或之后的 14 天内有多少客户查看了房产。完全不知道该怎么做。

我假设我需要对它进行分组并使用拥有？

编辑：我现在正在使用 oracle

```
select count(*)
from VIEWING
WHERE CLAUSE? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:49:28.600

对于具有该特定日期的一次性查询，

```
select count(*) clients
from yourtable
where yourdatefield >= {d'2004-05-06'}
and yourdatefield < {d'2004-06-08'} 
```

您可能需要查阅日历以查看这些日期是否正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:52:43.483

编辑#1，因为您使用的是 Oracle，您可以使用：

```
select count(*) TotalClients
from yourtable
where dt >= (to_date('2004-05-20', 'yyyy-mm-dd') - INTERVAL '14' DAY)
  and dt <= (to_date('2004-05-20', 'yyyy-mm-dd') + INTERVAL '14' DAY) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/48f46/13)

~~根据您之前的一些问题，您使用的是 MySQL。~~

如果您使用的是 MySQL，那么您可以使用该[`DATE_ADD()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)函数获取日期范围，然后用于`count(*)`返回这些日期的所有记录：

```
select count(*) TotalClients
from yourtable
where dt >= date_add(str_to_date('2004-05-20', '%Y-%m-%d'), INTERVAL -14 day)
  and dt <= date_add(str_to_date('2004-05-20', '%Y-%m-%d'), INTERVAL 14 day) 
```

# android - 在我的项目中添加删除功能

> ID：14713636
> 
> 赞同：0
> 
> 时间：2013-02-05T17:45:08.057
> 
> 标签：android, file-management

我将此代码用于我的上下文菜单，并制作了一个简单的命令。但是如何在其中集成真正的命令呢？

我想做真正的功能。

```
@Override  
       public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {  
    super.onCreateContextMenu(menu, v, menuInfo);  
        menu.setHeaderTitle("Optiuni");  
        menu.add(0, v.getId(), 0, "Copiaza");  
        menu.add(0, v.getId(), 0, "Sterge");

    }  

     @Override  
     public boolean onContextItemSelected(MenuItem item) {  
             if(item.getTitle()=="Copiaza"){copyFunction(item.getItemId());}  
         else if(item.getTitle()=="Sterge"){deleteFunction(item.getItemId());}
         else {return false;}  
     return true;  
     }  

     public void deleteFunction(int id){  
            Toast.makeText(this, "Sters", Toast.LENGTH_SHORT).show();  
        }  
     public void copyFunction(int id){  
            Toast.makeText(this, "Copiat", Toast.LENGTH_SHORT).show();  
        } 
```

# .htaccess - 如何更改域名？

> ID：14713642
> 
> 赞同：0
> 
> 时间：2013-02-05T17:45:40.877
> 
> 标签：.htaccess, zend-framework

我有域名 alfared.in.ua/public (zf2)，但我想将我的域名更改为 alfared.in.ua？我该怎么做？
这是我的 .htaccess

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

httpd-vhosts.conf

```
<VirtualHost alfared.in.ua:80>
    DocumentRoot "c:\xampp/htdocs/alfared.in.ua/www/module/Application/view/layout/"
    ServerName alfared.in.ua
    SetEnv APPLICATION_ENV "development"

<Directory "C:/xampp/htdocs/zf2/public">
    DirectoryIndex index.php
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory>

</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:04:16.130

您可以尝试将您的 httpd.vhosts.conf 修改为

```
<VirtualHost alfared.in.ua:80>
    DocumentRoot "C:/xampp/htdocs/zf2/public"
    ServerName alfared.in.ua
    SetEnv APPLICATION_ENV "development"

    <Directory "C:/xampp/htdocs/zf2/public">
        DirectoryIndex index.php
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>

</VirtualHost> 
```

这应该够了吧。但是我有点困惑，因为您在一个配置中使用了两个不同的位置

# android - TwoPassFilter GPUImage 实际上是做什么的？

> ID：14713645
> 
> 赞同：8
> 
> 时间：2013-02-05T17:45:43.570
> 
> 标签：android, ios, opengl-es, gpuimage

我正在尝试从[GPUImage(ios)](https://github.com/BradLarson/GPUImage)为 Android 重新创建 GPUImageTwoPassFilter。我正在为 GPUImage 的 Android 端口[完成这里的工作。](https://github.com/cyberagent-jp/android-gpuimage)该端口实际上适用于许多过滤器。我已经移植了许多着色器，基本上都取得了巨大的成功。

问题是要移植一些过滤器，你必须从GPUImage扩展GPUImageTwoPassFilter，android版本的作者还没有实现。我想尝试编写它，但不幸的是，iOS 版本没有记录，所以我不确定 TwoPass 过滤器应该做什么。

有没有人对此有任何提示？我对openGL的了解有限，但对Android和iOS非常了解。我肯定在这里寻找一个非常伪代码的描述

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T18:52:21.843

我想我需要在这里解释一下我的想法。

顾名思义，这不仅仅是对输入图像应用单个操作，而是针对该图像运行两次着色器，一个接一个。这对于像高斯模糊这样的操作是必需的，我使用一个可分离的内核来执行一个垂直模糊通道，然后执行一个水平模糊通道（在 9-hit 模糊中将纹理读取从 81 减少到 18）。我还使用它来将图像减少到它们的亮度分量以进行边缘检测，尽管我最近让过滤器检测它们是否正在接收单色内容以使其成为可选内容。

因此，这扩展了基础 GPUImageFilter 以使用两个帧缓冲区和两个着色器程序，而不仅仅是一个。在第一遍中，渲染就像使用标准 GPUImageFilter 一样。但是，最后，不是将生成的纹理发送到链中的下一个过滤器，而是将该纹理作为第二次渲染通道的输入。过滤器切换到第二个着色器程序并针对第一个输出纹理运行该程序以生成第二个输出纹理，最终作为此过滤器的输出传递。

过滤器仅覆盖执行此操作所需的 GPUImageFilter 方法。需要注意的一个棘手的事情是，我在过滤器的第一阶段校正了输入图像的旋转，但第二阶段不需要再次旋转图像。这就是为什么第一阶段和第二阶段使用的纹理坐标存在差异的原因。此外，像在单个方向上采样的模糊这样的过滤器可能需要根据第一阶段是否旋转图像来翻转其采样输入。

那里还有一些内存优化和着色器缓存，但在将其移植到 Android 时，您可以放心地忽略它们。

# c++ - 错误 C2664：无法将参数 1 从“X”转换为“X”

> ID：14713648
> 
> 赞同：2
> 
> 时间：2013-02-05T17:45:51.893
> 
> 标签：c++, visual-studio-2008

我在 Visual Studio 2008 中有一个 C++/Win32/MFC 项目，编译时收到一条奇怪的错误消息。

我创建了一个小项目来演示这个问题，主要代码是

```
#ifndef _MyObject_h
#define _MyObject_h

class MyObject
{
public:
        MyObject()
        {
        }
};

#endif // _MyObject_h
// --- END MyObject.h

// --- BEGIN ObjectData.h
#ifndef _ObjectData_h
#define _ObjectData_h

template <typename DataPolicy>
class ObjectData
{
public:
        DataPolicy *data;

        ObjectData() :
                data(NULL)
        {
        }

        ObjectData(const ObjectData<DataPolicy> &copy) :
                data(copy.data)
        {
        }

        ObjectData<DataPolicy> & operator=(const ObjectData<DataPolicy> &copy)
        {
                this->data = copy.data;
                return *this;
        }
};

#endif // _ObjectData_h
// --- END ObjectData.h

// --- BEGIN Tool.h
#ifndef _Tool_h
#define _Tool_h

#include "ObjectData.h"

template <typename ObjectPolicy>
class Tool
{
private:
        ObjectData<typename ObjectPolicy> _object;

public:
        Tool(ObjectData<typename ObjectPolicy> obj);
};

#endif // _Tool_h
// --- END Tool.h

// --- BEGIN Tool.cpp
#include "stdafx.h"
#include "Tool.h"

template <typename ObjectPolicy>
Tool<ObjectPolicy>::Tool(ObjectData<typename ObjectPolicy> obj) :
        _object(obj)
{
}
// --- END Tool.cpp

// --- BEGIN Engine.h
#ifndef _Engine_h
#define _Engine_h

#include "Tool.h"
#include "MyObject.h"

class Engine
{
private:
        MyObject *_obj;

public:
        Engine();
        ~Engine();
        void DoSomething();
};

#endif // _Engine_h
// --- END Engine.h

// --- BEGIN Engine.cpp
#include "stdafx.h"
#include "Engine.h"

Engine::Engine()
{
        this->_obj = new MyObject();
}

Engine::~Engine()
{
        delete this->_obj;
}

void Engine::DoSomething()
{
        ObjectData<MyObject> objData;
        objData.data = this->_obj;
        // NEXT LINE IS WHERE THE ERROR OCCURS
        Tool< ObjectData<MyObject> > *tool = new Tool< ObjectData<MyObject> >(objData);
}
// --- END Engine.cpp 
```

错误：

> Engine.cpp
> c:\projects\myproject\myproject\engine.cpp(18) : 错误 C2664:
> 'Tool::Tool(ObjectData)' : 无法
> 使用
> [
> ObjectPolicy=ObjectData,将参数 1 从 'ObjectData' 转换为 'ObjectData'
> DataPolicy=ObjectData
> ]
> and
> [
> DataPolicy=MyObject
> ]
> and
> [
> DataPolicy=ObjectData
> ]
> 没有可以执行此转换的用户定义转换运算符，或者无法调用该运算符
> 1>构建日志保存在“file://c: \Projects\MyProject\MyProject\Debug\BuildLog.htm"
> MyProject - 1 个错误，0 个警告

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T18:00:31.153

您的代码存在一些问题。首先，您`typename`以错误的方式使用关键字。`typename`只能在使用*限定*类型名称时使用（并且在类型名称*依赖*时是必需的），这不是您的情况：

```
template <typename ObjectPolicy>
class Tool
{
private:
    ObjectData<typename ObjectPolicy> _object; // "typename" is not needed!
public:
    Tool(ObjectData<typename ObjectPolicy> obj); // "typename" is not needed!
}; 
```

但是，您抱怨的问题在于您对`Tool`类模板的实例化：

```
Tool< ObjectData<MyObject> > *tool = new Tool< ObjectData<MyObject> >(objData); 
```

您的`Tool<>`模板包含一个类型的成员变量`ObjectData<ObjectPolicy>`，其中`ObjectPolicy`是类模板参数。`Tool`但是，在上面的行中，您将with`ObjectData<MyObject>`作为参数进行实例化。这意味着您的成员变量将具有 type `ObjectData<ObjectData<MyObject>>`，这也将是构造函数参数的类型。

因此，您试图调用一个构造函数，该构造函数接受`ObjectData<ObjectData<MyObject>>`一个不匹配类型的参数`ObjectData<MyObject>`。因此，您得到的错误。

您应该将您的实例化更改为：

```
Tool< MyObject > *tool = new Tool< MyObject >(objData); 
```

另一个问题是您`Tool`在单独的`.cpp`文件中定义了 的成员函数。您不应该这样做：链接器在处理单独的翻译单元时将无法看到它。

要解决此问题，请将类模板的成员函数的定义放入定义类模板的同一标头中（`Tool.h`在您的情况下）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T18:00:20.943

```
Tool< ObjectData<MyObject> > *tool = new Tool< ObjectData<MyObject> >(objData);

template <typename ObjectPolicy>
Tool<ObjectPolicy>::Tool(ObjectData<typename ObjectPolicy> obj) :
        _object(obj)
{
} 
```

在我看来，您可能并不真正了解模板的工作原理。查看以下[C++ 模板](http://www.cplusplus.com/doc/tutorial/templates/) 您目前拥有的是无效的 C++ 语法。看一看，再试一次。

# c++ - c++ 指向用户定义对象的指针是线程安全的吗？

> ID：14713649
> 
> 赞同：4
> 
> 时间：2013-02-05T17:46:03.897
> 
> 标签：c++, multithreading, pointers, thread-safety

我找不到答案，但这是一个简单的问题：

两个线程在没有锁或任何其他恶作剧的情况下同时读取指向 C++ 中用户定义对象的指针的值是否安全？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T17:56:24.117

是的。实际上，同时*读取*任何值（内置类型）是安全的。

只有当某个值与使用它的其他线程同时修改时，才会发生数据竞争。标准中对此的关键声明是：

*数据竞争*在§1.10/21 中定义：

> 如果程序的执行在不同的线程中包含两个相互冲突的操作，则该程序的执行包含数据竞争，其中至少一个不是原子的，并且两者都不会在另一个之前发生。

§1.10 /4 中定义了*冲突：*

> 如果其中一个修改了内存位置 (1.7) 而另一个访问或修改了相同的内存位置，则两个表达式求值会发生冲突。

因此，您必须在这些读取和任何写入之间使用适当的同步。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T17:52:13.173

从多个线程**读取**值总是安全的。只有当您还写入需要管理并发访问的数据时。

只读数据的唯一可能问题是确保在读取完成时该值实际上已被初始化。如果您在启动线程之前初始化该值，您会没事的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T17:48:02.593

如果变量在其中一个线程中被修改，则通常不是线程安全的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T17:48:19.723

通过线程安全，我想你的意思是问他们是否有原子写入。在 C++03 中这是不正确的，因为 C++03 并不真正了解线程。在 C++11 中，您有[std::atomic](http://en.cppreference.com/w/cpp/atomic/atomic)，它专门用于指针。

# java - 解读Java中的面向对象编程概念

> ID：14713651
> 
> 赞同：0
> 
> 时间：2013-02-05T17:46:09.893
> 
> 标签：java

我一直在阅读有关面向对象的概念，但我真的迷路了。从概念上讲，我所理解的只是一个方法“做”某事，而一个类是一个“蓝图”。我已经阅读了所有的类比，但到目前为止对我来说真正有意义的是：循环、if then、变量赋值、原始数据类型和基本语法。

对我来说，程序就是程序，程序就是程序。你输入指令，计算机就会执行。我想我并没有真正看到大局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:53:02.137

从空中看，OOP 的最大部分是组织和代码重用。您希望组织执行特定操作的“对象”，并且希望能够将其重用于其他应用程序。这个想法只是让你更容易维护你正在做的事情、信息在哪里以及它们是如何协同工作的。这是非常广泛的，所以让我知道您真正不了解的内容。

将代码捆绑到单个软件对象中提供了许多好处，包括：

```
Modularity: The source code for an object can be written and maintained independently of the source code for other objects. Once created, an object can be easily passed around inside the system.
Information-hiding: By interacting only with an object's methods, the details of its internal implementation remain hidden from the outside world.
Code re-use: If an object already exists (perhaps written by another software developer), you can use that object in your program. This allows specialists to implement/test/debug complex, task-specific objects, which you can then trust to run in your own code.
Pluggability and debugging ease: If a particular object turns out to be problematic, you can simply remove it from your application and plug in a different object as its replacement. This is analogous to fixing mechanical problems in the real world. If a bolt breaks, you replace it, not the entire machine. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:26:10.797

除非您想了解OO 语言的*编程*，否则我会说您不需要了解“OO 概念”。对于运行程序、提供输入并查看输出等的人来说，完全没有必要理解它们。几年前，美国汽车从主要是化油器变成了燃油喷射。一般来说，汽车的司机不需要了解其中任何一个，也不需要了解他们的新车有一个而不是另一个。这是相似的。现在，如果您想了解如何用这种语言进行编程，那就不同了，但在这种情况下，您应该问我们一个更具体的问题。

--

根据您确实想了解编程的评论，我将对此进行扩展。

我所看到的不同之处在于，诸如 Java 之类的 OO 语言通过使用编程结构来表示问题中的事物（或“项目”或“对象”），从而促进了程序的组织。尽管您可以用旧语言表示事物，但您必须自己创建结构（这就是 C++ 的开始方式）。

因此，如果我正在创建交通控制系统，我可以为“车辆”创建一个类，并为具有不同特征和/或行为的不同类型车辆创建子类。内置的类定义和继承使这变得容易。

我可以定义一个 Vehicle 类并将其扩展用于PassengerCar、PanelTruck、SemiRig 和其他在我的问题域中有意义的东西。所有车辆的特征和代码都符合超类的逻辑；每种特定类型的特征和代码与其子类一起使用。

我可以在 C、FORTRAN 或汇编程序中做类似的事情，方法是创建数据结构并将代码与它们相关联，将它们组织成组以表示不同类型的车辆，但是这些语言没有内置的结构来制作这很容易做到。

另一个相关的基本区别是语言在一个单元中对数据和代码的定义。同样，我可以用其他语言来做，但是 OO 语言将关联作为语言的一部分，这样我就不必创建命名约定或自己做任何事情。

# ruby-on-rails - 具有多个参数的 rake 任务 - 我卡住了

> ID：14713654
> 
> 赞同：0
> 
> 时间：2013-02-05T17:46:15.993
> 
> 标签：ruby-on-rails, argument-passing, rake-task

rake 任务本身：

```
desc "This task creates a new user"
task :create_user, [:email, :password] => :environment do |t, args|
  trole = Role.find_by_name('translator')
  User.create(
      :email => args.email,
      :password => args.password,
      :password_confirmation => args.password,
      :role_id => trole.id)
end 
```

来电：

```
rake create_user[user@host.com,password] 
```

输出：

```
rake aborted!
Don't know how to build task 'create_user' 
```

我真的卡住了。我发现的所有建议，即使在这里，在 StackOverflow 上，要么不使用两个参数来涵盖这种情况，要么已经过时/不起作用。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:45:58.810

您编写的语法在 bash 中应该可以正常工作，所以我猜您正在使用 zsh？

如果是这样，它无法正确解析 [] 并且这些需要被转义。

尝试使用：

```
rake create_user\[user@host.com,password\] 
```

反而。

# c# - Environment.GetFolderPath(Environment.SpecialFolder.SOMETHING)

> ID：14713658
> 
> 赞同：3
> 
> 时间：2013-02-05T17:46:27.010
> 
> 标签：c#, .net

我一直在尝试大多数`Enviroment.SpecialFolder`枚举，但我认为没有任何方法可以实现*仅*使用枚举来完成。使用这种`string.Substring()`方法给我带来了最大的收益。

我尝试仅获取实际安装 Windows 的系统分区路径。在机器 A 上它可能是`C:\`，在机器 B 上它可能是`D:\`。

到目前为止，我发现的最充分的解决方案是

```
var path = Environment.GetFolderPath(Environment.SpecialFolder.Windows)
                      .Substring(0, 3); 
```

有一个更好的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T17:58:21.430

要获取驱动器，请使用`Path.GetPathRoot`. 请参阅[http://msdn.microsoft.com/en-us/library/system.io.path.getpathroot.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.getpathroot.aspx)

```
var root = Path.GetPathRoot(Environment.GetFolderPath(Environment.SpecialFolder.Windows)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T17:59:09.600

如果您需要“环境.SpecialFolder.Windows 所在的磁盘”，您的示例就可以了。

您可能想使用[Path.GetPathRoot](http://msdn.microsoft.com/en-us/library/system.io.path.getpathroot%28v=vs.100%29.aspx)而不是 Susbstring ...

请注意，您可能不应该自己向根驱动器写入任何内容（如果您的程序旨在表现良好）。

# ms-access - 使用虚拟数据访问 2010 年新记录

> ID：14713661
> 
> 赞同：0
> 
> 时间：2013-02-05T17:46:44.673
> 
> 标签：ms-access, vba, record, subform

在此处访问 2010。

我对我的三个子表单中的两个有一个唠叨的问题。每个子表单都绑定到具有唯一信息的自己的表；主窗体也绑定到它自己的表。所有三个子表单表都与主表单表是一对一的关系。我的第一个子表单的行为正常，因为当有新记录时，它的所有绑定条目字段都显示为空白。Form_Current() 中的代码：

```
 Private Sub Form_Current()

  'Determine what should be displayed'
  'Do stuff to prepare the current record for display'

  If Me.NewRecord = True Then
  Me.Stuff = Null
  End If

  End Sub 
```

存在于所有三个子表单和主表单中，以显示较旧的记录并通过重置复选框等为数据输入做好准备；没有代码可以“重置”输入字段本身。不幸的是，其他两个子表单保留了最后输入的记录中的数据并显示它，就好像用户想要重新输入相同的数据一样。问题是，除非用户明确输入数据输入字段然后以任何方式离开，否则这些数据没有任何意义。简单地移动到下一条记录而不输入数据输入字段不会保存幻像预先输入的数据（这是预期的，因为用户从未在子表单中输入数据，因此从未创建过子表单中的记录）。

我正在寻找的是默认情况下打开干净记录的特定于表单的选项，或者可以确保新记录上的空数据字段的 VBA 代码。当在主窗体中打开新记录但未成功时，我尝试主动重新查询子窗体。我还尝试在输入新记录时将值预先设置为“”，这在一定程度上确实有效，但看到一个子表单正常工作，我正在寻求解决方案，而不是解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T21:20:39.283

进入子窗体的设计视图，在子窗体的属性中找到名为“数据输入”的设置。

将其更改为“是”将更改子表单的行为。

从那时起，所有子表单要做的就是清楚并准备好接受新记录的数据。输入记录后，子表单将被清除并准备好输入另一个全新的记录。

此选项适用于任何形式。

我将使用此设置更新其他两个子表单。简单，无需 VBA！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T13:36:06.233

**继续思考：**

我发现在子表单上将“数据输入”设置静态设置为“是”是旧记录浏览功能不再起作用。新记录清除了旧数据，但现在旧记录也没有显示输入的内容；因为“数据输入”设置为他们准备新数据。必须做的是根据记录是否为“新”主动设置每个子表单上的“数据输入”设置：

```
Private Sub Form_Current()

'Determine what should be displayed'
'Do stuff to prepare the current record for display'

If Me.NewRecord = True Then
 Me.Stuff = Null
 Me!SubFormName0.Form.DataEntry = True
 Me!SubFormName1.Form.DataEntry = True
 Me!SubFormName2.Form.DataEntry = True
Else
 Me.Stuff = DatabaseNumbers
 Me!SubFormName0.Form.DataEntry = False
 Me!SubFormName1.Form.DataEntry = False
 Me!SubFormName2.Form.DataEntry = False
End If

End Sub 
```

再次感谢您的帮助！

# pipeline - 在 shell 变量中通过管道连接多个命令

> ID：14713667
> 
> 赞同：0
> 
> 时间：2013-02-05T17:46:57.863
> 
> 标签：pipeline, bash

我想做的是：

```
>STRIPPER='sed s/admin_editable=\"[01]\"// | sed s/runtime_editable=\"[01]\"//'
>cat file.txt | $STRIPPER > stripped.txt 
```

即定义一个shell变量，它是多个命令的管道（我的恰好是`sed`'s），然后我可以稍后调用。我现在从命令行执行此操作，但最终可能会将其放入脚本中。

我已经尝试了 ' 和 " 来包含命令都不起作用。

```
sed: can't read |: No such file or directory
sed: can't read sed: No such file or directory
sed: can't read s/admin_editable=\"[01]\"//: No such file or directory
sed: can't read |sed: No such file or directory
sed: can't read s/runtime_editable=\"[01]\"//: No such file or directory
sed: can't read |: No such file or directory 
```

我知道可能有一个正则表达式可以处理这种情况，但我想知道如何做一般的管道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:49:59.490

这是使用函数而不是变量的好地方。

```
stripper() {
    sed s/admin_editable="[01]"// | sed s/runtime_editable="[01]"//
}

cat file.txt | stripper > stripped.txt 
```

您还可以消除 cat 的无用用法：

```
stripper < file.txt > stripped.txt 
```

# multiplication - 使用交叉乘法方法的 32 位小数乘法（无 64 位中间结果）

> ID：14713674
> 
> 赞同：3
> 
> 时间：2013-02-05T17:47:31.727
> 
> 标签：multiplication, fixed-point

我正在 16 位处理器上编写定点语音增强算法。在某些时候，我需要进行 32 位小数乘法。我已经阅读了其他有关逐字节进行 32 位乘法的帖子，我明白了为什么这适用于 Q0.31 格式。但我使用不同数量的小数位的不同 Q 格式。

所以我发现对于小于 16 的小数位，这是有效的：

```
(low*low >> N) + low*high + high*low + (high*high << N) 
```

其中 N 是小数位数。我已经读过`low*low`结果应该是无符号的以及低字节本身。一般来说，这完全给出了我想要的任何 Q 格式的结果，并且小数位小于 16。

现在，当小数位超过 16 位时，它会变得很棘手。我尝试了几种移位，不同的移位，`low*low`我`high*high`试图把它写在纸上，但我无法弄清楚。

我知道这可能非常简单，但整个想法让我难以理解，我将不胜感激一些评论或指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:17:11.597

这是同一个公式。对于 N > 16，移位仅意味着您丢弃了一个完整的 16 位字，该字会溢出或下溢。low*low >> N 表示只在乘法的 32 位结果的高字中移动 N-16 位并添加到结果的低字中。high * high << N 表示只使用左移 N-16 的乘法结果的低字并添加到结果的高字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:54:54.940

有一些想法在起作用。

首先，将 2 个较短的整数相乘以产生较长的乘积。考虑 2 个 32 位整数的无符号乘法，通过它们的 16 位“一半”相乘，每个都产生一个 32 位乘积，总乘积为 64 位：

  a * b = (a_hi * 2 ^(16) + a_lo) * (b_hi * 2 ^(16) + b_lo) =

  a_hi * b_hi * 2 ^(32) + (a_hi * b_lo + a_lo * b_hi) * 2 ^(16) + a_lo * b_lo。

现在，如果你需要一个有符号乘法，你可以从无符号乘法中构造它（例如从上面）。

假设 a < 0 且 b >= 0，a * 有[符号]b 必须相等

  2 ^(64) - ((-a) *[无符号]b)，其中

  -a = 2 ^(32) - a（因为这是 2 的补码）

爱荷华州，

  a *[签名]b =

  2 ^(64) - ((2 ^(32) - a) *[无符号]b) =

  2 ^(64) + (a * [unsigned] b) - (b * 2 ^(32) )，其中 2 ^(64)可以被丢弃，因为我们只使用 64 位。

以完全相同的方式，您可以计算 a >= 0 和 b < 0 的带[符号]b 并且必须得到对称结果：

  (a *[无符号]b) - (a * 2 ^(32) )

您可以类似地表明，对于 a < 0 和 b < 0，可以通过以下方式在无符号乘法之上构建有符号乘法：

  (a *[无符号]b) - ((a + b) * 2 ^(32) )

因此，首先将 a 和 b 相乘为无符号，然后如果 a < 0，则从乘积的前 32 位中减去 b，如果 b < 0，则从乘积的前 32 位中减去 a，完成。

* * *

现在我们可以将 32 位有符号整数相乘并得到 64 位有符号乘积，我们终于可以转向小数部分了。

现在假设在 a 和 b 的这 32 位中，N 位用于小数部分。这意味着如果您将 a 和 b 视为普通整数，它们将比它们实际表示的值大 2 ^N倍，例如 1.0 看起来像 2 ^N（或 1 << N）。

因此，如果您将两个这样的整数相乘，则乘积将是 2 ^N *2 ^N = 2 ^(2*N)倍于它应该表示的值，例如 1.0 * 1.0 看起来像 2 ^(2*N)（或 1 << (2*N))。IOW，普通整数乘法将使小数位数增加一倍。如果您希望产品具有与被乘数相同的小数位数，您会怎么做？您将乘积除以 2 ^N（或将其以算术方式向右移动 N 个位置）。简单的。

* * *

谨记几句，以防万一……

在 C（和 C++）中，您不能合法地将变量向左或向右移动变量中包含的相同或更多位数。代码会编译，但不会像您期望的那样工作。因此，如果要移动 32 位变量，可以将其向左或向右移动 0 到 31 个位置（31 是最大值，而不是 32）。

如果将有符号整数左移，则不能合法地溢出结果。所有带符号的溢出都会导致未定义的行为。所以，你可能想坚持未签名。

负符号整数的右移是特定于实现的。它们可以进行算术移位或逻辑移位。哪一个，这取决于编译器。因此，如果您需要两者之一，您需要确保您的编译器直接支持它或以其他方式实现它。

# java - 将 Eclipse 项目连接到新的 GitHub 存储库

> ID：14713676
> 
> 赞同：4
> 
> 时间：2013-02-05T17:47:34.010
> 
> 标签：java, eclipse, git, github

几个星期以来，我一直在编写一个新项目，最后决定将它放在 GitHub 上。所以我安装了 Git ( `sudo apt-get install git`)，在 GitHub 上创建了一个帐户，然后创建了一个与我的 Eclipse 项目同名的新存储库。我现在正在尝试将我现有的 Eclipse 项目添加到 Git 版本控制，并将其连接到我的 GitHub 存储库。

我跑了`git init /home/myuser/sandbox/workspace/MyApp`。

我现在如何将它连接到我的 HitHub 存储库，以便当我`git push`进行一些更改时，我将能够登录到 GitHub 并查看它们？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T19:01:38.113

[安装EGit](http://www.eclipse.org/egit/)插件的最简单（也可能是最好的）方法，然后从本地存储库或从 github 导入

![在此处输入图像描述](../Images/8b4583d78a3bcb8d8198fa83f3981c06.png)

如果您已经有 Eclipse 项目，您可以“右键单击”它并“共享”。选择提供者 (git) 后，只需添加您的 github repo url 并玩得开心。

# c# - 面板中的面板，自动滚动

> ID：14713678
> 
> 赞同：0
> 
> 时间：2013-02-05T17:47:35.353
> 
> 标签：c#, winforms, panel, autoscroll

在我的真实程序遇到问题后，我正在使用 WinForms 做一个极简主义的测试应用程序。我把一个小面板（孩子）放在一个更大的面板（父母）里面。较大的面板将 AutoScroll 设置为 true。子面板的默认锚点设置为顶部和左侧。子面板未停靠。

我想要的行为是滚动条出现在较小面板的位置太偏移时，无论是顶部、底部、左侧还是右侧。问题是它仅在它太靠右或底部太远时才有效。当顶部太多或左侧太多时，不会出现滚动条。

我使用两个简单的按钮将子面板的位置强制向左移动 200 像素，或向右移动 200 像素，以便快速轻松地修改其位置。

这是我的 Form1() 代码：

```
 private void button1_Click(object sender, EventArgs e)
    {
        childPanel.Location = new Point(childPanel.Location.X - 200, childPanel.Location.Y);
        hostPanel.Invalidate();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        childPanel.Location = new Point(childPanel.Location.X + 200, childPanel.Location.Y);
        hostPanel.Invalidate();
    } 
```

这是设计器代码：

```
 private void InitializeComponent()
    {
        this.hostPanel = new System.Windows.Forms.Panel();
        this.childPanel = new System.Windows.Forms.Panel();
        this.moveChildLeft = new System.Windows.Forms.Button();
        this.moveChildRight = new System.Windows.Forms.Button();
        this.hostPanel.SuspendLayout();
        this.SuspendLayout();
        // 
        // hostPanel
        // 
        this.hostPanel.AutoScroll = true;
        this.hostPanel.BackColor = System.Drawing.SystemColors.AppWorkspace;
        this.hostPanel.Controls.Add(this.childPanel);
        this.hostPanel.Location = new System.Drawing.Point(239, 48);
        this.hostPanel.Name = "hostPanel";
        this.hostPanel.Size = new System.Drawing.Size(400, 400);
        this.hostPanel.TabIndex = 0;
        // 
        // childPanel
        // 
        this.childPanel.BackColor = System.Drawing.SystemColors.ButtonHighlight;
        this.childPanel.Location = new System.Drawing.Point(29, 62);
        this.childPanel.Name = "childPanel";
        this.childPanel.Size = new System.Drawing.Size(342, 259);
        this.childPanel.TabIndex = 0;
        // 
        // moveChildLeft
        // 
        this.moveChildLeft.Location = new System.Drawing.Point(61, 81);
        this.moveChildLeft.Name = "moveChildLeft";
        this.moveChildLeft.Size = new System.Drawing.Size(75, 23);
        this.moveChildLeft.TabIndex = 1;
        this.moveChildLeft.Text = "Left 200";
        this.moveChildLeft.UseVisualStyleBackColor = true;
        this.moveChildLeft.Click += new System.EventHandler(this.button1_Click);
        // 
        // moveChildRight
        // 
        this.moveChildRight.Location = new System.Drawing.Point(61, 111);
        this.moveChildRight.Name = "moveChildRight";
        this.moveChildRight.Size = new System.Drawing.Size(75, 23);
        this.moveChildRight.TabIndex = 2;
        this.moveChildRight.Text = "Right 200";
        this.moveChildRight.UseVisualStyleBackColor = true;
        this.moveChildRight.Click += new System.EventHandler(this.button2_Click);
        // 
        // Form1
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.ClientSize = new System.Drawing.Size(1018, 549);
        this.Controls.Add(this.moveChildRight);
        this.Controls.Add(this.moveChildLeft);
        this.Controls.Add(this.hostPanel);
        this.Name = "Form1";
        this.Text = "Form1";
        this.hostPanel.ResumeLayout(false);
        this.ResumeLayout(false);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:02:38.703

最终，您可能希望将您的应用程序转换为 WPF。此后，Winform 被判小死。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:13:19.860

[然而](https://stackoverflow.com/questions/14565773/improving-winforms-performance-with-large-number-of-controls/14566539#14566539)- WPF 迅速解决了[另一个](https://stackoverflow.com/questions/14710117/updating-ui-in-c-sharp-using-timer/14711744#14711744)Winforms 无法解决的问题：

XAML：

```
<Window x:Class="WpfApplication4.Window3"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window3" WindowState="Maximized">
    <DockPanel>
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal">
            <Button Content="Left" Click="MoveLeft"/>
            <Button Content="Right" Click="MoveRight"/>
        </StackPanel>
        <Border BorderBrush="Blue" BorderThickness="1" Width="300" Height="300">
            <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" x:Name="Scr">
                <Grid Background="Green" Width="100" Height="100" x:Name="Grid"/>
            </ScrollViewer>
        </Border>
    </DockPanel>
</Window> 
```

后面的代码：

```
using System.Windows;

namespace WpfApplication4
{
    public partial class Window3 : Window
    {
        public Window3()
        {
            InitializeComponent();
        }

        private void MoveRight(object sender, RoutedEventArgs e)
        {
            if (Grid.Margin.Right <= 0)
            {
                Grid.Margin = new Thickness(Grid.Margin.Left + 100,0,0,0);
            }
            else
            {
                Grid.Margin = new Thickness(0, 0, Grid.Margin.Right - 100, 0);
                Scr.ScrollToHorizontalOffset(Scr.HorizontalOffset - 100);
            }
        }

        private void MoveLeft(object sender, RoutedEventArgs e)
        {
            if (Grid.Margin.Left > 0)
            {
                Grid.Margin = new Thickness(Grid.Margin.Left - 100, 0, 0, 0);
            }
            else
            {
                Grid.Margin = new Thickness(0, 0, Grid.Margin.Right + 100, 0);
                Scr.ScrollToHorizontalOffset(Scr.HorizontalOffset + 100);
            }
        }
    }
} 
```

将我的代码复制并粘贴到文件 -> 新建 -> WPF 应用程序中，然后自己查看结果。

# jquery - 设置对象jquery元素的值

> ID：14713679
> 
> 赞同：1
> 
> 时间：2013-02-05T17:47:36.460
> 
> 标签：jquery, object

我在 Jquery 中有一个对象，我想将元素页面设置为 100，例如，我如何使用 jquery 来做到这一点？

```
 var options = {
      valueNames: [ 'name', 'category' ],
      page: 3,
      plugins: [
          [ 'paging' ]
      ]
    }; 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:48:29.597

不需要 jQuery，因为它是一个 POJS 对象。假设您的意思是要在`page`创建对象后更改属性，这将起作用：

```
var options = {
    valueNames: [ 'name', 'category' ],
    page: 3,
    plugins: [
        [ 'paging' ]
    ]
};

options.page = 100; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:48:54.610

您不需要 jQuery 来更改选项属性值。

```
options.page = 100; 
```

[http://jsfiddle.net/p6PNb/](http://jsfiddle.net/p6PNb/)

# java - 使用 appendchild 时 Zkoss zhtml 额外的 div？

> ID：14713680
> 
> 赞同：0
> 
> 时间：2013-02-05T17:47:39.773
> 
> 标签：java, css, zk

我的问题与 zkoss 和 Java 端动态添加的组件有关。

每当我在任何元素上使用 appendchild（比如在 Div 上）时，它总是添加一个额外的 Div 作为某种容器。这是为什么？

例如，这里是 Composer 类的一部分：

```
...
@Wire("div#myDiv")
private Div testDiv;
...
...
Label myLabel = new Label();
myLabel.setValue("Test");
myLabel.setClass("test-label");
testDiv.appendChild(myLabel) 
```

所以代替这个：

```
<div id="myDiv">
 <span class="test-label">
...
</span>
</div> 
```

我得到这样的东西：

```
<div id="myDiv">
 <div id="hj973"> <!--this is the extra div -->
 <span class="test-label">
...
</span>
 </div>
</div> 
```

在大多数情况下，这不是问题，除非我尝试将跨度用作带有浮动的网格，因为那样当然那个 div 不应该在那里。

为什么是这样？我该如何预防？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:54:00.033

我不知道为什么有一个额外的 div，但你可以写

```
test-label:parent {
 ...
} 
```

在您的 css 文件中，因此外部 div 的行为方式与您的跨度
现在应该执行的方式相同，而只是忽略跨度。

如果这没有帮助，我稍后再检查，我现在没有时间。

# java - tomcat - solaris getRequestURI() 返回部分解码的 uri

> ID：14713682
> 
> 赞同：0
> 
> 时间：2013-02-05T17:47:43.590
> 
> 标签：java, tomcat, servlets, request, solaris

我有一些代码在我的开发机器上运行一个常规的 mac 运行 tomcat 并 `HttpServletRequest.getRequestURI()` 返回一个完全编码的 uri。

然而，在运行 apache-tomcat-7.0.32（与我的开发机器相同的版本）的 Solaris 中，我看到解码的逗号“，”和括号“（”，“）”，而不是编码返回的其余字符串。换句话说，这`HttpServletRequest.getRequestURI()`给了我一个部分编码的值。

任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:43:14.113

根据规范，Web 容器不会解码 URI。换句话说，如果 URL 已编码/未编码，它将按原样显示

```
 String getRequestURI()

        Returns the part of this request's URL from the protocol name up to the query string in the first line of the HTTP request. The web container does not decode this String. For example:
        First line of HTTP request  Returned Value
        POST /some/path.html HTTP/1.1       /some/path.html
        GET http://foo.bar/a.html HTTP/1.0      /a.html
        HEAD /xyz?a=b HTTP/1.1      /xyz 
```

**参考：** [http ://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletRequest.html#getRequestURI%28%29](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpServletRequest.html#getRequestURI%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:51:35.460

原来这是我们在 Solaris 中使用的 Tomcat/Java 版本中的一个错误。更新似乎解决了。

# xpages - CollapseAll 与一个文档导致不显示任何文本

> ID：14713696
> 
> 赞同：1
> 
> 时间：2013-02-05T17:48:37.747
> 
> 标签：xpages

我对各个 xpage 有一些分类视图。我在页面上有一个可以折叠视图的按钮。

```
var viewPanel:com.ibm.xsp.component.xp.XspViewPanel = getComponent("viewPanel1");
try {
        viewPanel.gotoFirstPage();
     } 
     catch (e) {
     }
var model = viewPanel.getDataModel();
model.getDominoViewDataContainer().collapseAll(); 
```

如果视图中只有一个文档并且视图已折叠，则视图中不会显示任何文本。有其他人看到这种行为吗？

我无法告诉你这件事给我带来的悲伤。我从未怀疑过会导致文档不显示的崩溃。

说明：显示列标题。就是使用collapse all时不显示文档。此外，即使有多个文档，在全部折叠后似乎也没有显示任何文档。在笔记客户端中查看显示正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:17:11.483

想出了这个。这似乎是多个问题。

1.  我在实际视图的第一列中有一个计算字段来显示计数。视图面板似乎不喜欢这样。我将“计数”列移到分类字段之外的右侧。

2.  有些观点似乎与程序化专栏有问题。我删除了所有的 $XX 值并给了它们我自己的名字。

3.  客户端中的 Ctrl-Shift-F9 似乎修复了其他视图的剩余问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T13:59:25.320

我在使用 8.5.3 服务器时看到了同样的情况，但是 Domino 9 上的副本似乎没有表现出这种行为。我还不能确定其他原因，但很欣赏你描述的一些项目。

# css - 表格行的背景颜色 IE7 不起作用

> ID：14713697
> 
> 赞同：0
> 
> 时间：2013-02-05T17:48:43.703
> 
> 标签：css, internet-explorer-7

很奇怪，在所有其他浏览器中都很好，但在 IE7 中，背景颜色没有显示表格的 css，如下所示。

```
#warrentyFormTable tr.error            { background: #ffe2e2; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:54:48.560

它只是不会管理 TR 样式

试试这个 ：

```
#warrentyFormTable tr.error td {background: #ffe2e2} 
```

继续

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:59:14.857

如果您使用某种 CSS 重置并且 td 元素的背景属性设置为透明，这会导致 IE6/7 出现问题。

尝试仅重置您真正需要的这些东西并从该列表中删除**td 。**

本网站的更多信息： [http ://www.sitepoint.com/forums/showthread.php?683598-Table-Cell-Background-Color-Issue-with-IE7-and-IE6%3E](http://www.sitepoint.com/forums/showthread.php?683598-Table-Cell-Background-Color-Issue-with-IE7-and-IE6%3E)

# html - CSS 样式与无表单复选框的可访问性

> ID：14713704
> 
> 赞同：3
> 
> 时间：2013-02-05T17:49:04.420
> 
> 标签：html, css, accessibility

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:39:09.300

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T23:29:15.530

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T23:32:32.777

这里的正确答案是使用 ARIA，尤其是[`aria-checked`](http://www.w3.org/TR/wai-aria/states_and_properties#aria-checked)属性。它专为可访问性而设计。

也就是说，我认为您摆脱复选框的愿望是错误的。任何像复选框一样的东西——即，它有一个选中状态和一个未选中状态，控制页面上的某些东西——应该是一个真正的复选框。这不仅在屏幕阅读器方面，而且在键盘和鼠标用户的期望方面，都为您提供了非常好的行为。

您始终可以`<a>`将`<label>`.

# filemaker - 如果用户没有在 FORM VIEW 中查看记录，我该如何阻止脚本运行？

> ID：14713705
> 
> 赞同：0
> 
> 时间：2013-02-05T17:49:05.577
> 
> 标签：filemaker

在 Filemaker Pro 11 中，我编写了一个脚本，该脚本由脚本触发以在 OnRecordLoad 的每个实例上运行，但是我不希望它在用户在列表或表视图中工作时运行。

是否有一些代码可以放在脚本的开头，这些代码可以按照以下逻辑进行操作：

“如果当前视图不 = 表单视图，则结束脚本”

这将在脚本运行之前有效地结束脚本。

我是使用 FM 的新手，我想不出一种方法来检查脚本中的当前视图状态。如果这不可能，有没有办法根据用户当前所在的视图（表单、列表或表格）来限制启用某些脚本触发器？

感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T18:36:04.950

使用 Get(LayoutViewState) 函数 ( [http://www.filemaker.com/12help/html/func_ref2.32.50.html](http://www.filemaker.com/12help/html/func_ref2.32.50.html) )

```
If[ Get ( LayoutViewState ) = 0 ]
    //They're in form view, do stuff
Else
    //They're in list view or table view, skip
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T18:38:44.043

您的脚本应在开头包含以下几行：

```
If[Get(LayoutViewState)<>0]{
    Exit Script[]
} 
```

这基本上确保了脚本只会在用户的布局在表单视图中时运行。

**Get(LayoutViewState)**返回：

*   **0**用于表单视图，
*   **1**用于列表模式
*   **2**用于表格视图。

类似的函数是 Get(WindowMode)，它返回：

*   **0**表示浏览模式
*   **1**用于查找模式
*   **2**用于预览模式

希望这可以帮助。

# c# - 禁用动态按钮

> ID：14713708
> 
> 赞同：0
> 
> 时间：2013-02-05T17:49:12.253
> 
> 标签：c#, arrays, winforms

嗨，我有一个小的 winforms 程序，很快就会发展成更多的东西。该程序有 2 个面板`panel1`，`panel2`这些面板由一些表单控件动态填充。第一个面板填充了组合框，第二个面板填充了按钮网格。我想要实现的是能够根据用户从`combobox`. 网格的每一列代表一周中的`combobox`一天，如果您愿意，可以通过从列表中选择它来禁用想要的一天。

静态地执行此操作很简单，但是我的程序很快就会扩展，以便它可以处理大型数据库，这就是我动态执行此操作的原因。基本上这就是我现在想简单地禁用右键的地方。

以下是我到目前为止的界面： ![在此处输入图像描述](../Images/ee74bae090b9e5d952297d8a0488e895.png)

如果有任何帮助，这是我的代码：

```
 public Form1()
        {
            InitializeComponent();
        }
        Button[] btn = new Button[2];
        ComboBox[] cmb = new ComboBox[1];

        private void Form1_Load(object sender, EventArgs e)
        {
            placeRows();
        }

        public void createColumns(int s)
        {
            for (int i = 0; i < btn.Length; ++i)
            {
                btn[i] = new Button();
                btn[i].SetBounds(40 * i, s, 35, 35);
                btn[i].Text = Convert.ToString(i);

                panel1.Controls.Add(btn[i]);

            }

            for (int i = 0; i < cmb.Length; ++i)
            {
                cmb[i] = new ComboBox();
                cmb[i].SelectedIndexChanged += new EventHandler(cmb_SelectedIndexChanged);
                cmb[i].Text = "Disable";
                cmb[i].Items.Add("Monday");
                cmb[i].Items.Add("Tuesday");
                cmb[i].SetBounds(40 * i, s, 70, 70);
                panel2.Controls.Add(cmb[i]);
            }

        }

        void cmb_SelectedIndexChanged(object sender, EventArgs e)
        {
            ComboBox senderCmb = (ComboBox)sender;

            if (senderCmb.SelectedIndex == 1)
            {
                //MessageBox.Show("Tuesday");
                btn[1].Enabled = false;
            }
        }

        public void placeRows()
        {
            for (int i = 0; i < 80; i = i + 40)
            {
                createColumns(i);               
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:51:37.433

**备选方案 1**

每个控件都有一个`Tag`属性。

您可以设置`Tag`按钮的属性来表示它们所在的列。

在组合框中进行选择时，只需搜索*所有*按钮，然后根据每个按钮的`Tag`属性是否与组合框中的选定文本匹配来启用或禁用按钮。

**备选方案 2**

创建一个

```
Dictionary<string, List<Button>> buttonMap; 
```

其中键是表示列的值（“星期二”），值是带有该标签的按钮列表。最初创建按钮时，还要填充该字典。

如果您使用备选方案 2，则必须记住先前选择的复选框值，以便重新启用不再禁用的按钮。

如果您有很多按钮，您可能会发现备选方案 2 明显更快。

**更新**

这是备选方案 1 的完整工作示例。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    const int ROWS = 2;
    const int COLS = 2;

    Button[,] btn = new Button[ROWS,COLS];
    ComboBox[] cmb = new ComboBox[ROWS];

    private void Form1_Load(object sender, EventArgs e)
    {
        placeRows();
    }

    private readonly string[] cbTexts = new string[] { "Monday", "Tuesday" };

    public void createColumns(int rowIndex)
    {
        int s = rowIndex * 40;

        // Your original code kept overwriting btn[i] for each column.  You need a 2-D array
        // indexed by the row and column
        for (int colIndex = 0; colIndex < COLS; colIndex++)
        {
            btn[rowIndex, colIndex] = new Button();
            btn[rowIndex, colIndex].SetBounds(40 * colIndex, s, 35, 35);
            btn[rowIndex, colIndex].Text = Convert.ToString(colIndex);
            btn[rowIndex, colIndex].Tag = cbTexts[colIndex];

            panel1.Controls.Add(btn[rowIndex, colIndex]);

        }

        cmb[rowIndex] = new ComboBox();
        cmb[rowIndex].SelectedIndexChanged += new EventHandler(cmb_SelectedIndexChanged);
        cmb[rowIndex].Text = "Disable";
        foreach (string cbText in cbTexts)
        {
            cmb[rowIndex].Items.Add(cbText);
        }
        cmb[rowIndex].SetBounds(40, s, 70, 70);
        cmb[rowIndex].Tag = rowIndex; // Store the row index so we know which buttons to affect
        panel2.Controls.Add(cmb[rowIndex]);

    }

    void cmb_SelectedIndexChanged(object sender, EventArgs e)
    {
        ComboBox senderCmb = (ComboBox)sender;

        int row = (int)senderCmb.Tag;
        for (int col = 0; col < COLS; col++)
        {
            Button b = btn[row, col];
            // These three lines can be combined to one.  I broke it out
            // just to highlight what is happening.
            string text = ((string)b.Tag);
            bool match =  text == senderCmb.SelectedItem.ToString();
            b.Enabled = match;
        }
    }

    public void placeRows()
    {
        for (int rowIndex = 0; rowIndex < 2; rowIndex++)
        {
            createColumns(rowIndex);
        }
    }
} 
```

# iphone - newViewController 总是有两个笔尖（iPhone 和 iPad）

> ID：14713710
> 
> 赞同：3
> 
> 时间：2013-02-05T17:49:15.247
> 
> 标签：iphone, ios, objective-c, xcode, ipad

为通用应用程序 xibs 自定义 xcode，这样当我创建一个新的 ViewController （如 VideoVC）时，它必须为此创建两个 nib 文件，

*   视频VC_iPhone

*   VideoVC_iPad

有人可以帮我吗。没有指导方针。只是步骤。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T16:59:44.203

您将在“/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode”中看到模板文件夹，在这里您将看到可以编辑或制作新的文件和项目模板，如果您想要。

针对您的问题，导航到此文件夹“/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/Xcode/Templates/File Templates”

在这里，您可以通过在带有 nib 的视图控制器的模板中为 iPad 添加一个空白笔尖来实现您想要做的事情。我已经上传了一个我做的样本，它仍在进行中，但它会根据您的需要创建 2 个笔尖。

```
[my custom template]
http://www.saplogix.net/Xcode_Custom_Template/TwoNibTemplate.zip
extract and copy that inside this folder "~/Library/Developer/Xcode/Templates/File Templates"

Note: create the directory if it's not already there. 
```

待办事项：添加代码以根据设备加载特定的笔尖，这也只需添加即可。此外，它仅适用于 UIViewController 作为超类。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
    {
        self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    }
    else
        if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad)
        {
            NSString *_nibBundleOrNil = (NSString *)(nibBundleOrNil != nil ? [nibNameOrNil stringByAppendingString:@"_iPad"] : [NSStringFromClass([self class]) stringByAppendingString:@"_iPad"]);
            self = [super initWithNibName:_nibBundleOrNil bundle:nibBundleOrNil];
        }

    if (self)
    {
        // Custom initialization
    }
    return self;
} 
```

我的模板将生成以下条目，您可以使用它来创建带有 2 个笔尖的控制器。 ![我的模板将生成以下条目，您可以使用它来创建带有 2 个笔尖的控制器。](../Images/89180b753613a77d7765d592c2bc8c00.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T11:38:51.377

您可以创建自定义视图控制器模板来执行此操作。创建新文件模板比创建新项目模板更容易，因此完全可以做到。

不久前我做了一个演示 -[幻灯片](http://lanyrd.com/2011/lidg28/sffpf/)可能很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T09:30:53.920

使用以下命名约定创建视图控制器，创建 iphone/ipad xib 作为`"viewcontrollername~iPhone.xib"`或`@"viewcontrollername~iPad.xib"`

和下面的链接状态相同，提供了在 viewcontroller.h 和 viewcontroller.m 中区分 ipad 和 iphone 的方法

[http://iphonedevelopment.blogspot.de/2010/04/converting-iphone-apps-to-universal.html](http://iphonedevelopment.blogspot.de/2010/04/converting-iphone-apps-to-universal.html)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-02-05T18:15:47.333

在创建新的 Xcode 项目时，选择 Single View Application，在选项页面的 Devices 下拉列表中，选择 Universal。这将创建 iPhone 和 iPad 笔尖。

从开始到结束：

文件 -> 新项目

选择单视图应用程序 -> 下一步

设备 -> 通用

# zeromq - ZeroMQ - 多个发布者和侦听器

> ID：14713711
> 
> 赞同：7
> 
> 时间：2013-02-05T17:49:17.633
> 
> 标签：zeromq

我刚刚开始了解并尝试 ZeroMQ。

我不清楚如何在两个以上的参与者（发布者和订阅者）之间进行双向通信，以便每个组件都能够在 MQ 上读写。

这将允许创建事件驱动的架构，因为每个组件都可以监听一个事件并回复另一个事件。

有没有办法直接用 ZeroMQ 做到这一点，或者我应该在此基础上实现自己的解决方案？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T18:55:57.500

如果您想要简单的双向通信，那么您只需在每个节点上设置一个发布套接字，然后让每个节点连接到另一个节点。

在多对多设置中，这很快变得难以处理。基本上，听起来您想要某种所有节点都可以“连接”到的中央节点，从中接收消息，如果满足订阅者的某些条件，则向其发送消息。

由于 ZeroMq 是一个简单的“电源插座”，而不是消息队列（因此​​得名 ZeroMQ - 零消息队列），因此开箱即用是不可行的**。**

一个简单的替代方法是让每个节点设置一个 UDP 广播套接字（不使用 ZeroMq，只使用常规套接字）。所有节点都可以监听发生的任何事情并将其自己的消息“发布”回套接字上，从而有效地将其发送到任何监听的节点。此设置适用于 LAN 和允许消息丢失的设置（如定期状态更新）。如果消息需要可靠（并且可能是持久的），您需要更高级的完整消息队列。

如果您可以不用持久消息队列，您可以创建一个基于中央节点的解决方案，一个中央消息处理程序，所有节点都可以订阅和发送数据到该中央节点。基本上，使用一个 REP（响应）套接字（用于传入数据）和一个 PUB（发布者）套接字（用于传出数据）创建一个“服务器”。然后，每个客户端通过 REQ（请求）套接字将数据发布到服务器 REP 套接字，并为服务器 PUB 套接字建立一个 SUB（订阅者）套接字。

查看有关可用的各种[消息模式](http://zguide.zeromq.org/page%3aall#Messaging-Patterns)的 ZeroMq 指南。

为了增加一点趣味，您可以添加事件“主题”，包括服务器端过滤，方法是将传出消息（在服务器 PUB 套接字上）拆分为两个消息部分（请参阅[多部分消息](http://zguide.zeromq.org/page%3aall#Multi-part-Messages)），其中第一部分指定“主题”，第二部分包含有效负载（例如*temp|46.2*，*speed|134*）。这样，每个客户端都可以注册它对任何主题（或全部）的兴趣，并让服务器只过滤掉匹配的消息。有关详细信息，请参阅[此示例](http://zguide.zeromq.org/page%3aall#Pub-Sub-Message-Envelopes)。

基本上，ZeroMq “只是”对常规套接字的抽象，提供了几种消息传递模式来构建您的解决方案。但是，它使您摆脱了许多繁琐的工作，并提供了与众不同的可伸缩性和性能。不过需要一些时间来适应。查看[ZeroMq 指南](http://zguide.zeromq.org/)以获取更多详细信息。

# jquery - 如何在记住隐藏的停靠状态时添加 cookie 会话？

> ID：14713715
> 
> 赞同：0
> 
> 时间：2013-02-05T17:49:33.953
> 
> 标签：jquery, cookies

您如何将 cookie 代码添加到我目前拥有的代码中？我一直在阅读，但我不是 jQuery 最好的。

[http://jsfiddle.net/k9vAJ/](http://jsfiddle.net/k9vAJ/)

代码：

```
$(document).ready(function () {
    var visible = true;
    $("#docktoggle").on('click', function() { 
        $('.dock')
            .animate({ width: visible ? 0 : 980 }, "slow")
            .css({ display: visible ? "none" : "" })
            .css({ width: visible ? "none" : "100% !important" });
        visible = !visible;  
    });
});

$(function(){
    $(".img-swap").live('click', function() {
        if ($(this).attr("class") == "img-swap") {
            this.src = this.src.replace("_on","_off");
        } 
        else {
            this.src = this.src.replace("_off","_on");
        }
        $(this).toggleClass("on");
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:02:01.887

@用户2041167：

您可能想为此使用 jQuery 插件，我认为该文件也有一些参考。我知道这一点是因为我已经将它用于 jstree jQuery 插件，因为它完全打包在一起。该插件处理与为最终保存的 cookie 定义的原型进行交互，如果没有误入浏览器。

```
 /**
             * Cookie plugin
             *
             * Copyright (c) 2006 Klaus Hartl (stilbuero.de)
             * Dual licensed under the MIT and GPL licenses:
             * http://www.opensource.org/licenses/mit-license.php
             * http://www.gnu.org/licenses/gpl.html
             *
             */

            /**
             * Create a cookie with the given name and value and other optional parameters.
             *
             * @example $.cookie('the_cookie', 'the_value');
             * @desc Set the value of a cookie.
             * @example $.cookie('the_cookie', 'the_value', { expires: 7, path: '/', domain: 'jquery.com', secure: true });
             * @desc Create a cookie with all available options.
             * @example $.cookie('the_cookie', 'the_value');
             * @desc Create a session cookie.
             * @example $.cookie('the_cookie', null);
             * @desc Delete a cookie by passing null as value. Keep in mind that you have to use the same path and domain
             *       used when the cookie was set.
             *
             * @param String name The name of the cookie.
             * @param String value The value of the cookie.
             * @param Object options An object literal containing key/value pairs to provide optional cookie attributes.
             * @option Number|Date expires Either an integer specifying the expiration date from now on in days or a Date object.
             *                             If a negative value is specified (e.g. a date in the past), the cookie will be deleted.
             *                             If set to null or omitted, the cookie will be a session cookie and will not be retained
             *                             when the the browser exits.
             * @option String path The value of the path atribute of the cookie (default: path of page that created the cookie).
             * @option String domain The value of the domain attribute of the cookie (default: domain of page that created the cookie).
             * @option Boolean secure If true, the secure attribute of the cookie will be set and the cookie transmission will
             *                        require a secure protocol (like HTTPS).
             * @type undefined
             *
             * @name $.cookie
             * @cat Plugins/Cookie
             * @author Klaus Hartl/klaus.hartl@stilbuero.de
             */

            /**
             * Get the value of a cookie with the given name.
             *
             * @example $.cookie('the_cookie');
             * @desc Get the value of a cookie.
             *
             * @param String name The name of the cookie.
             * @return The value of the cookie.
             * @type String
             *
             * @name $.cookie
             * @cat Plugins/Cookie
             * @author Klaus Hartl/klaus.hartl@stilbuero.de
             */
            jQuery.cookie = function(name, value, options) {
                if (typeof value != 'undefined') { // name and value given, set cookie
                    options = options || {};
                    if (value === null) {
                        value = '';
                        options.expires = -1;
                    }
                    var expires = '';
                    if (options.expires && (typeof options.expires == 'number' || options.expires.toUTCString)) {
                        var date;
                        if (typeof options.expires == 'number') {
                            date = new Date();
                            date.setTime(date.getTime() + (options.expires * 24 * 60 * 60 * 1000));
                        } else {
                            date = options.expires;
                        }
                        expires = '; expires=' + date.toUTCString(); // use expires attribute, max-age is not supported by IE
                    }
                    // CAUTION: Needed to parenthesize options.path and options.domain
                    // in the following expressions, otherwise they evaluate to undefined
                    // in the packed version for some reason...
                    var path = options.path ? '; path=' + (options.path) : '';
                    var domain = options.domain ? '; domain=' + (options.domain) : '';
                    var secure = options.secure ? '; secure' : '';
                    document.cookie = [name, '=', encodeURIComponent(value), expires, path, domain, secure].join('');
                } else { // only name given, get cookie
                    var cookieValue = null;
                    if (document.cookie && document.cookie != '') {
                        var cookies = document.cookie.split(';');
                        for (var i = 0; i < cookies.length; i++) {
                            var cookie = jQuery.trim(cookies[i]);
                            // Does this cookie string begin with the name we want?
                            if (cookie.substring(0, name.length + 1) == (name + '=')) {
                                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                                break;
                            }
                        }
                    }
                    return cookieValue;
                }
            }; 
```

# bash - MD5 脚本和 grep cmd

> ID：14713721
> 
> 赞同：2
> 
> 时间：2013-02-05T17:49:58.180
> 
> 标签：bash, grep, md5, md5sum

我在 Ubuntu 网站上找到了这个简洁的小脚本。该脚本通过将 CD 内容与 iso(9660) 文件的 MD5 和进行比较来验证 CD 的内容。我不明白为什么脚本在计算 md5 总和后解析字符串。

```
CSUM1=$(CHECKSUM "$1" | grep -om1 '^[0-9a-f]*') 
```

如何验证传递给脚本的 cmdline 参数是真正的 md5 哈希（不区分大小写和十六进制（0-9/af））。网上有几个片段展示了如何验证 md5 哈希值。如果将 .md5 文件作为参数传递，我想验证并 grep MD5 哈希，如果不是，则验证哈希。我得到了计算和比较的脚本......

```
# Compares the checksums of an iso9660 image and a burned disk.
# This script is released into the public domain by it's author.
if [ -n "$BASH" ]
then
  shopt -s expand_aliases
fi

if [ -n "$CHECKSUM" ]
then
  alias CHECKSUM="$CHECKSUM"
elif which md5deep &> /dev/null
then
  alias CHECKSUM='md5deep -e'
else
  alias CHECKSUM='md5sum'
fi

if [ -n "$2" ]
then
  DISKDEVICE="$2"
else
  DISKDEVICE='/dev/cdrom'
fi

CSUM1=$(CHECKSUM "$1" | grep -om1 '^[0-9a-f]*')
# extract cmdline arg
echo 'checksum for input image:' $CSUM1
SIZE=$(stat -c '%s' "$1")
BLOCKS=$(expr $SIZE / 2048)
CSUM2=$(dd if="$DISKDEVICE" bs=2048 count=$BLOCKS 2>/dev/null | CHECKSUM | grep -om1 '^[0-9a-f]*')
echo 'checksum for output disk:' $CSUM2

if [ "$CSUM1" = "$CSUM2" ]
then
  echo 'verification successful!'
else
  echo 'verification failed!'
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:24:47.240

> 我不明白为什么脚本在计算 md5 总和后解析字符串。 `CSUM1=$(CHECKSUM "$1" | grep -om1 '^[0-9a-f]*')`

它必须解析它，因为`md5sum`, et al 不只是输出散列

```
$ md5sum lupu-528.005.iso
8ad170c46b523436776398fa5ce39fa4 *lupu-528.005.iso 
```

> 如何验证传递给脚本的 cmdline 参数是真正的 md5 哈希

使用该脚本的目的是传递*文件*，而不是哈希。

# ckeditor - ckeditor v4中的自定义下拉菜单

> ID：14713723
> 
> 赞同：1
> 
> 时间：2013-02-05T17:50:02.647
> 
> 标签：ckeditor

有没有人有一个示例/插件来显示一个自定义下拉列表并简单地将一些文本插入到所见即所得编辑器中？我已经搜索了互联网和插件，但无法找到如何为 ckeditor v4 执行此操作。v3 有很多示例。

基本上，我想在编辑器工具栏上添加以下内容作为下拉列表

```
<option value="{{firstname}}">Firstname</option>
<option value="{{lastname}}">Lastname</option>
<option value="{{company}}">Company</option> 
```

**编辑**作为事后的想法我回到插件并找到了这个[占位符](http://ckeditor.com/addon/placeholder)插件。这实际上可能更适合我，我将尝试用选择列表替换文本框。

但是，将自定义下拉列表添加到工具栏仍然会很好......

# wget - wget 返回一个 3 字节的主页

> ID：14713724
> 
> 赞同：2
> 
> 时间：2013-02-05T17:50:03.850
> 
> 标签：wget

我正在尝试在 www.oabt.org 下载网页。使用浏览器，可以正常获取所有 html 代码，但使用 wget 我只能得到一个 3 字节的页面。

```
➜  spider git:(master) wget http://www.oabt.org/
--2013-02-06 01:45:11--  http://www.oabt.org/
Resolving www.oabt.org... 125.64.93.243
Connecting to www.oabt.org|125.64.93.243|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 3 [text/html]
Saving to: ‘index.html’

100%[===============================================================================>] 3           --.-K/s   in 0s      

2013-02-06 01:45:12 (117 KB/s) - ‘index.html’ saved [3/3]

➜  spider git:(master) ✗ xxd -l 100 ./index.html 
0000000: efbb bf 
```

如何正确获取该站点的主页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:32:17.680

我转储了 http 连接，`wireshark`并在发送的标头`wget`和`browser`. 我尝试使用 wget 的`--header`参数复制相同的 http 请求，直到我发现网站需要`Accept-Encoding: gzip`标头才能正确回复。

简而言之，工作命令变为：

```
 wget --header='Accept-Encoding: gzip' http://www.oabt.org/index.php 
```

但这将保存`gzipped`内容...

如果要动态解压缩页面，请使用以下命令：

```
wget -O- --header='Accept-Encoding: gzip' \
http://www.oabt.org/index.php | gunzip - > index.html 
```

...并且gzip压缩的内容将被解压缩并重定向到`index.html`文件

# internet-explorer - Arial 字体渲染在 Chrome 和 IE 中有所不同

> ID：14713729
> 
> 赞同：0
> 
> 时间：2013-02-05T17:50:17.957
> 
> 标签：internet-explorer, google-chrome, fonts

与 IE 相比，Arial 字体在 Chrome 中渲染得更轻更薄。

有没有办法让 Arial 在流行的浏览器（IE8+ FF Chrome Safari）中呈现相同的效果？

如果我购买或下载了自定义字体，是否可以让这种自定义字体替换浏览器的默认 Arial 字体？对于所有用户来说，它在浏览器中是否保持一致？

我有许多引用 Arial 的样式表，因此我无法更改每个样式标记以引用新名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:56:20.893

不幸的是，不同的浏览器有不同的字体渲染引擎。从字面上看，没有办法保证文本会以相同的方式呈现。即使您使用`@font-face`，它仍然会以不同的方式呈现。

# java - Git：存在大量更改时添加、提交或推送的特殊操作？

> ID：14713730
> 
> 赞同：1
> 
> 时间：2013-02-05T17:50:19.027
> 
> 标签：java, git, github

我的*理解*是`git add`，您基本上是在对本地 git 存储库说“是的，我确定我想进行这些更改。”

我的*理解*是`git commit`实际将更改保存到本地 HEAD 分支。此时它们实际上处于版本控制中，但仅对您的 git 实例是本地的。

我的*理解*是`git push`将您保存的（提交的）更改传播到主存储库，以便其他开发人员（或者可能是 CI 构建）可以自己将它们拉下来。

如果到目前为止我所说的任何内容是错误的或具有误导性，请先纠正我。假设我的理解是正确的，我的 Java 项目中最初有一个包，如下所示：

```
com.myapp.server.servlets
    FizzServlet
    BuzzServlet 
```

但后来我决定重构名称和一些东西，以及添加和删除一些新文件/包：

```
com.myapp.server.servlet
    FizzesServlet
    WidgetServlet
    com.myapp.server.servlet.impl
        FizzesServletImpl
        WidgetServletImpl 
```

总的来说，我对这个目录进行了 5 处更改：

1.  将名称从“ `com.myapp.server.servlets`”更改为“ `com.myapp.server.servlet`”
2.  将名称从“ `FizzServlet`”更改为“ `FizzesServlet`”
3.  `BuzzServlet`彻底删了
4.  添加了一个新的`WidgetServlet`
5.  添加了一个`com.myapp.server.servlet.impl`包含两个子文件的新包

我是否必须在这里做任何特殊的命令魔术，因为我做了很多重构，或者我可以运行类似`git push *`将所有内容推送到 GitHub 的东西吗？在 SVN Eclipse 插件中，如果我重命名了一个包或源文件，然后尝试提交该更改，我通常会（本地）完全丢失该文件，并且必须从本地历史记录中恢复。即便如此，我还是被烧了太多次，数不清，失去了很多工作。我希望不会在 Git 上获得相同的体验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T18:02:25.570

从你很小心推的方式来看，你的理解`git push`还不是很完整。`push`实际上只会将您的提交推送到您的遥控器——这意味着，它将复制您在上次推送后所做的提交中保存的确切状态。在 Git 中，每次提交都是存储库中所有文件的快照（它实际上记录了所有文件，而不仅仅是更改）。因此，您在提交后在本地看到的将正是推送时复制到远程的内容。

当您推动时，可能会发生以下两种情况之一：

1.  推送成功，在这种情况下一切都很好，远程的状态反映了本地仓库的状态（为了强调这一点，请记住 git 提交由它们的 SHA 哈希标识——如果提交不同，哈希也会不同是）
2.  推送被拒绝，因为它*不是快进*。当其他人在您上次拉/取后将提交推送到您的远程时，就会发生这种情况，这相当于尝试在 SVN 中提交时令人讨厌且经常担心的冲突。但是，您所在的州不受此影响。您将必须解决冲突（a）放弃您的提交并接受远程的状态（`git reset`用于此）或通过从远程获取和（b）合并您的本地更改，从而创建一个合并提交，这将表明您的历史的发散和重新收敛，或者（c）重新定位到远程，以产生线性历史。

解决冲突的案例需要更多的研究，但所需的操作在 Pro Git 书（章节分支、合并、变基）中有很好的描述。

只有当其他人可以推送到您的遥控器，或者您从另一台计算机推送到您的遥控器时，才会发生冲突。如果你在单用户单机场景下工作（至少目前是这样），推送的时候不会有冲突。

# android - 使用手机壁纸作为应用背景 - Theme.Wallpaper 喜欢的行为

> ID：14713731
> 
> 赞同：1
> 
> 时间：2013-02-05T17:50:26.017
> 
> 标签：android, background, wallpaper, android-theme

我想在我的应用程序中使用 Theme.Wallpaper。这个主题使用手机当前壁纸作为背景。问题是它不适用于 4.1 设备。我还尝试在我的样式资源中重新创建 Theme.Wallpaper，但它再次不适用于 4.1 设备。- 请注意，它可能也不适用于较低的 API，我只确认它适用于 2.2.1 而不适用于 4.1。我想知道为什么它不起作用以及是否有任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T20:39:26.950

终于找到答案了，有点复杂：

在为 14 以上的目标（我的是 17）构建的项目中，eclipse 会自动创建一个“values-v11”和一个“values-v14”文件夹（适用于 api 版本 14 及以上或 11 及以上的手机或 AVD）。在这些文件夹中是包含“AppBaseTheme”样式的 style.xml 文件，此“AppBaseTheme”样式替换了默认“values”文件夹中的那个，它是“AppTheme”样式的父（或：被扩展）默认情况下应用于应用程序..

现在，我选择将“Theme.Wallpaper”样式应用于我的应用程序的方式是让我的“AppBaseTheme”继承自它。了解这一点后，我的应用程序在具有 API 11 及更高版本的系统上没有类似“Theme.Wallpaper”的行为就变得很明显了：我从未让替代的 v11 和 v14“AppBaseTheme”扩展“Theme.Wallpaper”或更合适v11 为“Theme.Holo.Wallpaper”，v14 为“Theme.DeviceDefault.Wallpaper”。

所以，如果你在应用样式方面遇到麻烦，我希望你能看到这个......

编辑：如果您阅读本文，并且在 Eclipse 中编辑 style.xml 文件时遇到问题，请尝试在任何文本编辑器中打开此文件（我最喜欢的是 notepad++），然后删除所有注释，然后在 Eclipse 中重新打开它。如果您需要评论，只需在文本编辑器中添加评论。

# expression - 如何在z3中将表达式转换为字符串

> ID：14713732
> 
> 赞同：1
> 
> 时间：2013-02-05T17:50:26.230
> 
> 标签：expression, tostring, z3

有两个 expr_vector A，B，我正在尝试使用比较它们中的元素

```
if(strcmp(A[i].ToString(),B[i].ToString()) == 1) 
```

并且错误 'class z3::expr' 没有名为 'ToString' 的成员，该成员可在[覆盖字符串 ToS​​tring ( )](http://research.microsoft.com/en-us/um/redmond/projects/z3/class_microsoft_1_1_z3_1_1_expr.html#aa73e7c4dd1df5fd5fbf81c7764ee1533) 上找到。

或者您能告诉我如何比较两个 expr_vector 中的变量吗？比如变量q1分别在向量`<expr>`A和B中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:59:55.153

您在问题中提供的链接适用于 Z3 C# (.Net) API，您的问题表明您正在使用 C++ API（`expr_vector`是 Z3 C++ API 的一个类）。

要测试`a`和`b`是否相等、where`a`和`b`are `z3::expr`，我们应该使用`eq(a, b)`. 该`eq`函数只是 的包装器`Z3_is_eq_ast`，并定义在`z3++.h`

```
friend bool eq(ast const & a, ast const & b) { return Z3_is_eq_ast(a.ctx(), a, b) != 0; } 
```

# android - Gson 使用具有不同对象类型的数组解析 Json

> ID：14713736
> 
> 赞同：17
> 
> 时间：2013-02-05T17:50:54.487
> 
> 标签：android, json, gson

如何使用 Gson 解析这个 JSON？我有一个包含多种对象类型的数组，但我不知道我需要创建什么样的对象来保存这个结构。我无法更改 json 消息（我不控制服务器）。

唯一起作用的类（有点）是这个

```
public class Response {
    private List<Object> tr;
    private int results;

    (...)

} 
```

**JSON 消息**（注意具有多种对象类型的数组。）

```
{
   "tr":
   [
       {
           "a":
           {
               "userId": "112"
           }
       },
       {
           "b":
           {
               "userId": "123",
               "address":"street dummy" 
           }
       },
       {
           "a":
           {
               "userId": "154"
           }
       }
   ],
"results":3
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-05T19:37:50.840

Gson 用户指南明确涵盖了这一点：

[https://sites.google.com/site/gson/gson-user-guide#TOC-Serializing-and-Deserializing-Collection-with-Objects-of-Arbitrary-Types](https://sites.google.com/site/gson/gson-user-guide#TOC-Serializing-and-Deserializing-Collection-with-Objects-of-Arbitrary-Types)

您有一个对象，其字段`tr`是包含任意类型的数组。

用户指南解释说您不能直接反序列化这样的结构，并建议：

> 使用 Gson 的解析器 API（低级流解析器或 DOM 解析器 JsonParser）解析数组元素，然后对每个数组元素使用 Gson.fromJson()。这是首选方法。

在您的情况下......这实际上取决于该数组中可能有哪些对象。如果他们都将拥有相同的内在对象，你会想要做类似的事情......

```
List<MyUserPojo> list = new ArrayList<MyUserPojo>();
JsonArray array = parser.parse(json).getAsJsonObject().getAsJsonArray("tr");
for (JsonElement je : array)
{
    Set<Map.Entry<String,JsonElement>> set = je.getAsObject().entrySet();
    JsonElement je2 = set.iterator().next().getValue();

    MyUserPojo mup = new Gson().fromJson(je2, MyUserPojo.class);
    list.add(mup);
} 
```

当然，这需要在您的实际对象的自定义反序列化器中，该对象将具有`tr`and`results`字段。

```
class MyPojo
{
    List<MyUserPojo> userList;
    int results; 
}

class MyUserPojo
{
    String userId;
    String address;
}

class MyDeserializer implements JsonDeserializer<MyPojo>
{
    @Override
    public MyPojo deserialize(JsonElement je, Type type, JsonDeserializationContext jdc)
                              throws JsonParseException
    {
        List<MyUserPojo> list = new ArrayList<MyUserPojo>();
        JsonArray array = je.getAsJsonObject().getAsJsonArray("tr");
        for (JsonElement je2 : array)
        {
            Set<Map.Entry<String,JsonElement>> set = je2.getAsObject().entrySet();
            JsonElement je3 = set.iterator().next().getValue();                 

            MyUserPojo mup = new Gson().fromJson(je3, MyUserPojo.class);
            list.add(mup);
        }

        MyPojo mp = new MyPojo();
        mp.tr = list;
        mp.results = je.getAsObject().getAsJsonPrimitive("results").getAsInt();

        return mp;
    }
} 
```

现在一切就绪 - 您可以使用该反序列化器并创建您的对象：

```
Gson gson = new GsonBuilder()
                .registerTypeAdapter(MyPojo.class, new MyDeserializer())
                .build();

MyPojo mp = gson.fromJson(json, MyPojo.class); 
```

如果`a`,`b`等很重要……那么，您必须弄清楚这一点。但是上面的内容应该能让你很好地理解处理 JSON 结构需要什么。

为了完整起见，解决此问题的唯一“hacky”方法是，如果这些类型的数量相当有限，并且内部对象的字段也相当有限。您可以创建一个包含所有可能性的 POJO：

```
class MyPojo 
{
    MySecondPojo a;
    MySecondPojo b;
    ...
    MySecondPojo f;
}

class MySecondPojo
{
    String userId;
    String address;
    ...
    String someOtherField;
} 
```

当 Gson 反序列化 JSON 时，它会将 POJO(s) 中所有缺失的字段设置为`null`. 你现在`tr`可以在你的 POJO 中有一个`List`或一个数组。再次强调一下，**这真的很hacky并且是错误的方法**，但我想我会解释直接解析该数组需要什么。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-06T10:52:29.037

我从每个答案中挑选一些东西并这样做：

**响应**对象

```
public class Response {
    private List<Users> tr;
    private int results;

    (...)
} 
```

普通**用户**

```
public class User {
    public static final int TYPE_USER_A =0;
    public static final int TYPE_USER_B =1;
    private String userId;
    private int type;
    (...)
} 
```

**一个**

```
public class a extends User {
    private String location;
    (...) 
} 
```

**乙**

```
public class b extends User { 
    private String adress;   
    (...)
} 
```

**解析方法**

```
private Response buildResponseObject(String response) {
        Response tls = new Response();
        List<Users> users = new ArrayList<users>();
        User u;

        try {
            JSONObject object = new JSONObject(response);
            tls.setResults(object.getInt("results"));
            JSONArray array = object.getJSONArray("tr");

            for (int i = 0; i < array.length(); i++) {
                JSONObject trs = array.getJSONObject(i);

                if (trs.has("a")) {
                    String json = trns.getString("a");
                    A a = new Gson().fromJson(json,A.class);
                    a.setType(User.TYPE_USER_A);
                    users.add(a);

                } else if (trs.has("b")) {
                    String json = trs.getString("b");
                    B b= new Gson().fromJson(json,B.class);
                    B.setType(User.TYPE_USER_B);
                    users.add(b);
                }
            }

            tls.setUsers(users);

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return tls;
    } 
```

这并不像我想要的那样优雅，并将本机 JsonObjects 与 Gson 方法混合，但对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T18:00:19.767

在这里试试这个代码：

```
public class Address {
    public String userId;
    public String address;
    // ...
}

public class Response {
    private HashMap<String, Address> tr;
    private int results;
    // ...
} 
```

用法：

```
String json = "{\n  \"tr\":\n  {\n    \"a\": {\n       \"userId\": \"112\"\n    },\n    \"b\": {\n       \"userId\": \"123\",\n       \"address\":\"street dummy\"\n    },\n    \"c\": {\n       \"userId\": \"154\"\n    }\n  },\n  \"results\":3\n}";

Response users = new Gson().fromJson(json, Response.class); 
```

如您所见，我需要修改结构：

```
{
  "tr":
  {
    "a": {
       "userId": "112"
    },
    "b": {
       "userId": "123",
       "address":"street dummy"
    },
    "c": {
       "userId": "154"
    }
  },
  "results":3
} 
```

但不幸的是，我没有设法允许多个密钥。现在我不知道如何解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T17:54:45.393

我认为此链接可能会对您有所帮助： [https ://sites.google.com/site/gson/gson-user-guide#TOC-Collections-Examples](https://sites.google.com/site/gson/gson-user-guide#TOC-Collections-Examples)

基本上，为您的“对象”（我猜是用户类型）创建一个类，然后使用 Gson 的反序列化代码，如下所示：

```
Type collectionType = new TypeToken<Collection<User>>(){}.getType();
Collection<User> users= gson.fromJson(json, collectionType); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-11T19:02:17.730

您可以为 json 对象创建相应的 java 类。整数、字符串值可以按原样映射。Json 可以这样解析——

```
Gson gson = new GsonBuilder().create();
Response r = gson.fromJson(jsonString, Response.class); 
```

这是一个示例-http [://rowsandcolumns.blogspot.com/2013/02/url-encode-http-get-solr-request-and.html](http://rowsandcolumns.blogspot.com/2013/02/url-encode-http-get-solr-request-and.html)

# c - 在 C 中使用 ALSA 以不同的音量播放多个 wav 文件

> ID：14713741
> 
> 赞同：1
> 
> 时间：2013-02-05T17:51:12.503
> 
> 标签：c, audio, embedded-linux, alsa

我需要使用 ALSA 库 C 接口播放 2 个以上的 wav 文件。每个文件应该以不同的音量播放，但应该可以同时播放。我在带有 sgtl5000 设备的板上使用嵌入式 linux。我只有一个播放设备条目作为 pcm0p。请让我知道如何以不同的音量一起播放多种声音。如果您需要更多详细信息，请告诉我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:49:33.293

如果 ALSA 库已经使用`dmix`插件编译，只需打开`plug:dmix`为每个文件命名的设备。

# actionscript-3 - 无法从 servlet 在 actionscript3 中获得响应

> ID：14713745
> 
> 赞同：0
> 
> 时间：2013-02-05T17:51:26.897
> 
> 标签：actionscript-3, servlets

我能够从 as3 获取数据到 servlet 成功读取它，但无法从 servlet 发送回 as3。

下面是 AS3 代码。应用程序加载到 Tomcat 服务器上。

```
var request:URLRequest = new URLRequest("http://localhost:8080/Demo/UserDataControllerServlet");

var loader:URLLoader = new URLLoader();

 loader.dataFormat = URLLoaderDataFormat.VARIABLES;

  add_txt.text ="http://localhost:8080/Demo/UserDataControllerServlet";

  var _vars:URLVariables = new URLVariables();

  _vars.emailId = "abc@gmail.com";
  _vars.phoneNumber = "9898989898";
  _vars.userAddress = "abc";
  _vars.userName = "abc";
  _vars.vendorAddress = "abc";
  _vars.vendorName = "abc";

  request.data = _vars;

  request.method = URLRequestMethod.POST;

  loader.addEventListener(Event.COMPLETE, handleComplete);

  loader.addEventListener(IOErrorEvent.IO_ERROR, onIOError);
  loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR, onSecurityError);
  loader.load(request);
  add_txt.text ="already sent........................";
  private function onSecurityError(event:SecurityErrorEvent):void {
  add_txt.text ="security error ........................";
  } 
```

这应该在响应返回到 as3 后执行。

```
private function handleComplete(event:Event):void {

add_txt.text ="in the response function";                
var loader:URLLoader = URLLoader(event.target);             
trace("Message: " + loader.data);
add_txt.text = "========="+loader.data;             
}
private function onIOError(event:IOErrorEvent):void {
add_txt.text = "Error loading URL.";
trace("Error loading URL.");
this.parent.removeChild(this);
} 
```

下面是 servlet 代码： 我能够从请求中读取数据，但是在 out.write 和 out.close 之后响应不会返回到 as3。我尝试删除 out.close() 但即使这样也无济于事。

```
 protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String emailId  = request.getParameter("emailId");       
        String phoneNumber = request.getParameter("phoneNumber");
        String userAddress = request.getParameter("userAddress");
        String userName = request.getParameter("userName");
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.write("Hello");
        out.close();
        } 
```

你能帮我解决这个在 as3 中没有接收到数据的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:58:22.780

你已经成功了一半。您需要将对 servlet 的调用视为 Web 服务调用。将您视为向 servlet 发出 Ajax 请求。在“REST Servlets”上查找内容。 [http://www.mkyong.com/webservices/jax-rs/resteasy-hello-world-example/](http://www.mkyong.com/webservices/jax-rs/resteasy-hello-world-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T19:45:02.190

我认为您应该以查询字符串格式向 AS3 返回响应，如下所示：

```
private function handleComplete(event:Event):void {

         add_txt.text ="in the response function";                 
         var loader:URLLoader = URLLoader(event.target);             
         trace("Message: " + loader.data.success); // loading [success] value from response
         add_txt.text = "========="+loader.data.success;             
}

protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String emailId  = request.getParameter("emailId");       
        String phoneNumber = request.getParameter("phoneNumber");
        String userAddress = request.getParameter("userAddress");
        String userName = request.getParameter("userName");
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.write("success=1");  // sending [success]
        out.close();
} 
```

# javascript - 如何在我的 JavaScript 中添加图像以显示暂停和播放图标？

> ID：14713748
> 
> 赞同：0
> 
> 时间：2013-02-05T17:51:48.100
> 
> 标签：javascript, image

我正在尝试使用两个图像作为我的教程脚本的播放和暂停按钮。如何用两个图像代替 JavaScript 中的“开始”和“停止”？

这是我的 JavaScript：

```
$(document).ready(function(){
fadeLoop()
function fadeLoop() {

    var counter = 0,
        divs = $('.fader').css('visibility','visible').hide(),
        dur = 100;

    function showDiv() {
        $("div.fader").fadeOut(dur) // hide all divs
            .filter(function(index) {
                return index == counter % divs.length;
            }) // figure out correct div to show
            .delay(dur) // delay until fadeout is finished
            .fadeIn(dur); // and show it
        counter++;
    }; // function to loop through divs and show correct div
    showDiv(); // show first div    
    return setInterval(function() {
        showDiv(); // show next div
    }, 4 * 1000); // do this every 7 seconds    
};

$(function() {
    var interval;

    $("#start").click(function() {
        if (interval == undefined){
            interval = fadeLoop();
            $(this).val("Stop");
        }
        else{
            clearInterval(interval);
            $(this).val("Start");
            interval = undefined;
        }
    });
});
}); 
```

这是我的小提琴：[小提琴！](http://jsfiddle.net/NpNXr/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:00:09.100

只需在标记中为图像设置 onclick 事件，而不是按钮。然后您可以使用 attr JQuery 函数修改图像：

```
$(this).attr('src', '[path to my image]'); 
```

我无法加载您的 JSFiddle，但查看一些标记可能会有所帮助。

编辑：

我再次检查，JSFiddle 现在似乎已经启动了。标记底部的输入应该是 div 或 img 标签。如果您使用 img 标签，请使用上面的代码在点击事件上修改源图像。

div 可能会更好，因为您可以预加载背景图像。在 div 的情况下，您可以使用两个 CSS 类设置背景图像：

```
.start {
    background-image: url('start.png');
}

.stop{
    background-image: url('stop.png');
} 
```

然后您需要删除开始类并添加停止类，反之亦然：

```
$(this).removeClass('start');
$(this).addClass('stop'); 
```

如果您修改 CSS 停止选择器并将其设置为“.start.stop”，您甚至可以删除和添加停止类，而不必担心删除和添加开始类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:57:32.867

不要更改元素的文本值，而是更改 CSS 类名称。有两个不同的类，每个类都使用背景图像。

# symfony - FOSUser Bundle，Symfony 登陆页面

> ID：14713751
> 
> 赞同：1
> 
> 时间：2013-02-05T17:51:54.910
> 
> 标签：symfony, fosuserbundle

我正在为 Symfony 使用 FOSUser Bundle...我的问题是；我有两组不同的用户....例如；教师和学生，在系统注册时设置。（使用 FOSUser Bundle 的用户表）

成功登录后，我希望用户转到正确的登录页面。因此，如果用户是老师，我希望用户转到 /teacher，让学生转到 /student。

解决这个问题的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T18:46:50.843

您需要一个事件侦听器来侦听登录事件。然后，您可以根据他们的角色将客户端路由到不同的页面。

**服务.yml：**

```
services:
    login_listener:
        class: Acme\UserBundle\Listener\LoginListener
        arguments: [@security.context, @doctrine]
        tags:
            - { name: kernel.event_listener, event: security.interactive_login } 
```

**登录监听器：**

```
<?php

namespace Acme\UserBundle\Listener;

use Symfony\Component\EventDispatcher\Event;
use Symfony\Component\Security\Core\SecurityContext;
use Doctrine\Bundle\DoctrineBundle\Registry as Doctrine; // for Symfony 2.1.x
// use Symfony\Bundle\DoctrineBundle\Registry as Doctrine; // for Symfony 2.0.x

/**
 * Custom login listener.
 */
class LoginListener
{
    /** @var \Symfony\Component\Security\Core\SecurityContext */
    private $securityContext;

    /** @var \Doctrine\ORM\EntityManager */
    private $em;

    /**
     * Constructor
     * 
     * @param SecurityContext $securityContext
     * @param Doctrine        $doctrine
     */
    public function __construct(SecurityContext $securityContext, Doctrine $doctrine)
    {
        $this->securityContext = $securityContext;
        $this->em              = $doctrine->getEntityManager();
    }

    /**
     * Do the magic.
     * 
     * @param  Event $event
     */
    public function onSecurityInteractiveLogin(Event $event)
    {
        if ($this->securityContext->isGranted('ROLE_1')) {
            // redirect 1
        }

        if ($this->securityContext->isGranted('ROLE_2')) {
            // redirect 2
        }

        // do some other magic here
        $user = $this->securityContext->getToken()->getUser();

        // ...
    }
} 
```

来自：[http ://www.metod.si/login-event-listener-in-symfony2/](http://www.metod.si/login-event-listener-in-symfony2/)

# jquery - jQuery .animate() 问题

> ID：14713752
> 
> 赞同：2
> 
> 时间：2013-02-05T17:51:57.387
> 
> 标签：jquery, jquery-animate

我下载了一个脚本，它在我的网站上显示了最新的 Twitter 提要。到目前为止一切正常。我现在想做的是将动画从`sliding`to top 更改为`fadeIn fadeOut`.

见这里：http: [//jsfiddle.net/BXJbA/3/](http://jsfiddle.net/BXJbA/3/)

我想这是需要修改以实现淡入淡出效果的代码部分，但我真的被困在这里，想知道是否有人可以帮助我解决这个问题。

```
jQuery(function($){
    $("#ticker")
        .tweet({
            username: "twitter",
            page: 1,
            avatar_size: 32,
            count: 20,
            loading_text: "loading ..."
        })
        .bind("loaded", function() {
            var ul = $(this).find(".tweet_list");
            var ticker = function() {
                setTimeout(function() {
                    var top = ul.position().top;
                    var h = ul.height();
                    var incr = (h / ul.children().length);
                    var newTop = top - incr;
                    if (h + newTop <= 0)     
                        newTop = 0;
                    ul.animate( {top: newTop}, 400 );
                    ticker();
                }, 4000);
            };
            ticker();
        });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:00:24.913

试试这个：http: [//jsfiddle.net/BXJbA/4/](http://jsfiddle.net/BXJbA/4/)

```
ul.animate( {opacity: 0}, 400 ).animate( {top: newTop}, 400 ).animate( {opacity: 1}, 400 ); 
```

玩弄做同样事情的不透明度`fadeIn()`和`fadeOut()`.

# python - 在 python 中生成重置令牌的最佳方法是什么？

> ID：14713757
> 
> 赞同：15
> 
> 时间：2013-02-05T17:52:22.733
> 
> 标签：python, registration, password-recovery

我正在尝试为密码重置进行验证过程，我使用的是两个值：纪元时间，我想使用用户的旧密码（pbkdf2）作为密钥，

因为我不想获取非 ASCII 字符，所以我使用[了 SimpleEncode 库](http://code.google.com/p/python-simpleencode/)，因为它速度很快，因为它只是一个带有密钥的 BASE64，但问题是密码太长（196 个字符）所以我得到一个长密钥！

我所做的是拆分结果`code = simpleencode.encode(key,asci)[::30]`，但这不会是唯一的！

为了了解它是如何工作的，我尝试了 Facebook 重置过程，但给出的是一个数字！那么这个过程是如何工作的，他们不是使用密钥来使某人难以伪造链接来重置某人的密码吗？

更新：算法将如何工作：

1- 使用 epoch 获取时间`time.time()`

2-生成纪元时间的Base64（用于URL）和纪元时间值+一个密钥，这个密钥是PBKDF2（密码）。

3-生成网址 www.example.com/reset/user/Base64(time.time()) 并发送此网址 +`simpleencode.encode(key,asci)[::30]`

4-当用户点击网址时，他把生成的代码，这个生成的代码，如果与网址匹配，则让他修改密码，否则，这是一个忘记网址！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-05T18:07:01.153

不确定这是最好的方法，但我可能只是生成一个 UUID4，它可以在 URL 中用于重置密码并在“n”时间后过期。

```
>>> import uuid
>>> uuid.uuid4().hex
'8c05904f0051419283d1024fc5ce1a59' 
```

[您可以使用http://redis.io](http://redis.io)之类的东西来保存该密钥，并使用适当的用户 ID 值并设置其生存时间。因此，当某些内容来自[http://example.com/password-reset/8c05904f0051419283d1024fc5ce1a59](http://example.com/password-reset/8c05904f0051419283d1024fc5ce1a59)时，它会查看它是否有效，如果有效，则允许更改以设置新密码。

如果您确实想要一个“验证销”，那么将一个小的随机密钥与令牌一起存储，例如：

```
>>> from string import digits
>>> from random import choice
>>> ''.join(choice(digits) for i in xrange(4))
'2545' 
```

并要求在重置链接上输入。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-05T22:10:59.740

到目前为止最简单的方法是使用[ItsDangerous](http://packages.python.org/itsdangerous/)库：

> 您可以对用户 ID 进行序列化和签名，以将新闻通讯退订到 URL。这样您就不需要生成一次性令牌并将它们存储在数据库中。任何类型的帐户激活链接和类似的东西都是一样的。

您还可以嵌入时间戳，因此可以非常轻松地设置时间段，而无需涉及数据库或队列。它全部经过加密签名，因此您可以轻松查看它是否被篡改。

```
>>> from itsdangerous import TimestampSigner
>>> s = TimestampSigner('secret-key')
>>> string = s.sign('foo')
>>> s.unsign(string, max_age=5)
Traceback (most recent call last):
  ...
itsdangerous.SignatureExpired: Signature age 15 > 5 seconds 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-05T12:50:38.703

为什么不直接使用 jwt 作为令牌，它也可以为它设置一个过期时间，所以它也可以为令牌设置一个过期日期。

1.  生成使用密钥加密的令牌（JWT）
2.  发送包含带有令牌的链接作为查询参数的邮件（当用户打开链接时，页面可以读取令牌）
3.  在保存新密码之前验证令牌

为了生成 jwt 令牌，我使用`pyjwt`. 下面的代码片段显示了如何在 24 小时（1 天）的到期时间下完成并使用密钥签名：

```
import jwt
from datetime import datetime, timedelta, timezone

secret = "jwt_secret"
payload = {"exp": datetime.now(timezone.utc) + timedelta(days=1), "id": user_id}
token = jwt.encode(payload, secret, algorithm="HS256")
reset_token = token.decode("utf-8") 
```

下面的代码片段显示了如何在 django 中设置令牌验证和新密码。如果令牌已过期或被篡改，则会引发异常。

```
secret = "jwt_secret"
claims = jwt.decode(token, secret, options={"require_exp": True})
# Check if the user exists
user = User.objects.get(id=claims.get("id"))
user.set_password(password)
user.save() 
```

# c# - VS 2012 与 2010 的兼容性

> ID：14713761
> 
> 赞同：1
> 
> 时间：2013-02-05T17:52:30.520
> 
> 标签：c#, visual-studio

我加入的开发团队都使用 VS 2010 Pro，可能使用 TFS 或其他一些 SVN 系统。我下了订单安装它，但我们的采购过程搞砸了，似乎他们已经订购了 2012 年......

有没有兼容性问题？似乎它可以与 TFS 2010 一起使用，但我记得从 2008 年到 2010 年，很多程序刚刚崩溃，而且他们必须升级项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T18:44:30.140

VS2008 -> VS2010 场景有很多改进，还有一些没有（或变得更糟）。

## 项目兼容性

在大多数情况下，VS2012 将能够打开一个 VS2010 项目而无需进行不兼容的更改。对此的主要警告是 VS2010 用户需要安装 SP1。

VS2012 不再支持 VS2010 中的某些项目类型。我能想到的最重要的是安装项目或数据库项目。在 VS2012 中，这些项目根本不会打开（但如果您不需要构建它们，可能不会造成任何伤害）。

有关更多信息，请参阅[http://blogs.msdn.com/b/visualstudio/archive/2012/03/28/round-tripping-with-visual-studio-11.aspx](http://blogs.msdn.com/b/visualstudio/archive/2012/03/28/round-tripping-with-visual-studio-11.aspx)。

## TFS 兼容性

VS2012 应该与 TFS 2010 兼容，但是 VS2012 中的任何新功能都将不可用（这是合乎逻辑的，因为服务器不支持它）。有关更多信息，请参阅[http://msdn.microsoft.com/en-us/library/dd997788.aspx#compat](http://msdn.microsoft.com/en-us/library/dd997788.aspx#compat)。

## 运行时兼容性

VS2012 安装 .NET 4.5（也随 Windows 8 一起提供），这是 .NET 4.0 的就地升级 - 它取代了所有二进制文件，而不是像 3.0 和 3.5 这样的并行版本到 2.0。

在 .NET 4.5 中可能会遇到一些运行时差异。其中一些可能是 4.5 中的错误，可能会在未来的修补程序中修复，还有一些可能是有意更改（即 4.5 中修复的 4.0 中的错误）。这里的重点是，*如果*您确实遇到了这些问题之一，您的开发人员可能不会遇到同样的问题。再说一次，如果您打算支持 Windows 8，那可能是一件好事。

（我没有 4.0 和 4.5 之间已知不兼容的列表......如果有人有，请随时编辑）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:31:00.997

这取决于您在 Visual Studio 中使用的功能。在我们公司，由于 2012 年不支持安装程序项目 (*.vdp)，我们尚未考虑升级 - 您现在必须使用 WiX、InstallShield 或其他一些安装程序。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T18:45:04.033

在 VS2010SP1 之上有一些兼容补丁，专门解决了这个场景的一些小痛点。你可以在msdn上找到这些。链接[http://www.microsoft.com/en-us/download/details.aspx?id=29082](http://www.microsoft.com/en-us/download/details.aspx?id=29082)

除此之外，只要您确保您的项目具有正确的目标框架版本和平台工具集等，事情就应该正常工作，例如。不要将您的项目定位到 v4.5，因为它不适用于使用 VS2010 的开发人员

# javascript - 使用 Rspec 进行 Ajax 注释测试

> ID：14713763
> 
> 赞同：0
> 
> 时间：2013-02-05T17:52:36.890
> 
> 标签：javascript, ruby-on-rails, rspec, capybara

您好，我对 Rspec + Capybara 有疑问。我想测试我的 ajax 评论是否可以发布。我的错误是因为没有创建帖子。

```
Failure/Error: page.should have_content('Could') 
```

当我输出@post 我看到

```
#<Post id: 1, title: "Deploying through ssh", body: "This is post about ssh", slug: deploying-through-ssh, published: nil, published_at: nil, created_at: "2013-02-05 17:37:39", updated_at: "2013-02-05 17:37:39", user_id: nil, meta_desc: nil> 

describe "Sending Comments" do
      before(:each) do
        @post = FactoryGirl.create(:post)
      end
      it "should allow user to post new comment", :js => true do
        visit post_path(@post)
        page.should have_content('Could')
        fill_in 'comment[name]', :with => "name"
        fill_in 'comment_email', :with => "email@mail.com"
        fill_in 'comment_content', :with => "content"
      end
    end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:11:45.000

如果您没有进行正确的设置，您的测试和用于使用 selenium ( `:js => true`) 进行测试的服务器将使用两个不同的数据库连接并将测试包装到事务中。这导致了这种情况，即您在测试中看到的`@post`内容在浏览器中不存在，因为事务中的更改未提交。

[您可以使用此处](https://stackoverflow.com/questions/8774227/why-not-use-shared-activerecord-connections-for-rspec-selenium)描述的共享连接，也可以不使用事务清理策略。看看[database-cleaner](https://github.com/bmabey/database_cleaner)。

# java - unmodifiableList 线程安全吗？

> ID：14713765
> 
> 赞同：8
> 
> 时间：2013-02-05T17:52:40.767
> 
> 标签：java, unmodifiable

我有一个字符串（tagList）列表，需要在多个线程之间共享以进行读取，所以我创建了一个不可修改的版本并将其传递给线程，我不确定它是否是线程安全的，因为线程只读取该列表所以我猜应该没问题吧？

另外，当我将该不可修改的列表传递给线程时，它是传递一个副本并由线程共享还是创建多个副本并将一个副本传递给每个线程？

这是我的代码：

```
final List<String> tList = Collections.unmodifiableList(tagList);
List<Future<Void>> calls = new ArrayList<Future<Void>>();

FileStatus[] fsta = _fileSystem.listStatus(p);      
for (FileStatus sta : fsta) {
    final Path path = new Path(sta.getPath(), "data.txt");
    if (!_fileSystem.exists(path)) {        
        continue;
    }
    else {
        calls.add(_exec.submit(new Callable<Void>() {
            @Override
            public Void call() throws Exception {
                filterData(path, tList);
                return null;
            }
        }));
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T18:01:17.657

这完全取决于底层列表在读取操作上是否是线程安全的。Unmodifiable list 只是将所有读取调用（例如`size ()`，`get (int)`等）传递给底层列表，而无需额外同步。

例如，想象一下 List 的实现，它缓存哈希码，而不是每次需要时都计算它。对于这样的实现，`hashCode ()`方法实际上不是只读的，因为它可能会修改内部缓存的哈希码值。

另一个例子是 LinkedList 的一种风格，它缓存对最后访问条目的引用及其索引，因此进一步尝试访问附近元素将执行得更快。对于这样的实现，方法`get (int)`将不是只读的，因为它更新缓存的引用和索引，因此可能不是线程安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T18:00:19.890

它是线程安全的（因为它不能被修改）。它传递相同的副本。

但是，包装的 List ( `tagList`) 仍然不是线程安全的。您不能在共享列表时修改包装的列表。返回的列表是安全的唯一原因`unmodifiableList()`是因为不允许通过它对包装的列表进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T18:03:32.863

正如您所说，该列表是不可修改的；因此它将是线程安全的。

当你传递一个对象时，你实际上传递了对该对象的引用（而不是实际的对象）。由于只有一个副本并且它没有被修改，因此它将保持线程安全。

**只有一个警告**；永远不要直接访问**tagList**。始终通过名为**tList**的已包装不可修改集合访问它。如果您正确封装它，就可以实现这一点。

# postgresql - how can I detect gin and gist

> ID：14713774
> 
> 赞同：4
> 
> 时间：2013-02-05T17:53:17.207
> 
> 标签：postgresql, indexing, gwt-gin, gist-index

how can I detect GIN and GiST indexes in postgresql? I am looking for if an database of postgres use fulltext. I think that a table use GIN o GiST then is using fulltext.

I accept that GIN or GiST indexes does not necessarily mean that they are used for full text search, but how can I differentiate them of other indexes type? I want to list Gin an Gist indexes

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T12:44:32.547

Index definitions can be recreated with `pg_get_indexdef()` from the [System Catalog Information Functions](http://www.postgresql.org/docs/current/static/functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE), fed by the `pg_index` system view. The output is theorically non-trivial to parse but in practice, a simple regexp is good enough to filter these definitions on certain index types.

For example, to find `gist` or `gin` indexes, you may use a query like this:

```
SELECT pg_get_indexdef(indexrelid) from pg_index
 WHERE pg_get_indexdef(indexrelid) ~ 'USING (gin |gist )'; 
```

To find if a certain database uses fulltext, I'd probably search for `tsvector` columns instead, with a query like this:

```
SELECT table_schema,table_name, column_name
 FROM information_schema.columns
 WHERE data_type='tsvector'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-24T12:01:27.973

I dug around in the [Postgres source code](http://doxygen.postgresql.org/ruleutils_8c_source.html#l00997) and found that this information is stored in the `pg_am` table:

```
select i.relname, a.amname
from pg_index ix
left join pg_class i on ix.indexrelid = i.oid
left join pg_class t on ix.indrelid = t.oid
left join pg_am a on i.relam = a.oid 
```

# java - Java将值传递给新对象

> ID：14713781
> 
> 赞同：0
> 
> 时间：2013-02-05T17:53:37.577
> 
> 标签：java

是否可以将 i 的值传递给新的线程对象？

当前代码：

```
int cores = 4;
final int n = 10000;
static double sum = 0.0;

Thread[] threads = new Thread[cores];

for (int i = 0; i < cores; i++)
{
    threads[i] = new Thread(new Runnable() {
        public void run() {
            for (int j = i * (n / cores); j < (i + 1) * N / P; j++) {
                double x = (j + 0.5) * step;
                sum += 4.0 / (1.0 + x * x);
            }
        }
    });
} 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:55:54.917

创建您自己的扩展内部类`Thread`，然后将您的值传递给该类的实例，无论您想要什么 - 构造函数、setter 方法等。

这是使用构造函数的起始代码。

```
public class MyThread extends Thread
{
   private int myI;

   public MyThread(int i) { myI = i; }

   @Override
   public void run()
   {
      // Your code goes here, referencing the "myI" variable.
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:59:40.850

可以解决您的问题的代码的最小更改是添加一个如下`index`所示的变量，带有`final`修饰符：

```
for (int i = 0; i < cores; i++)
{
    final int index = i; // put value of "i" into a final variable
    threads[i] = new Thread(new Runnable() {
        public void run() {
            // use "index" instead of "i"
            for (int j = index * (n / cores); j < (index + 1) * N / P; j++) {
                double x = (j + 0.5) * step;
                sum += 4.0 / (1.0 + x * x);
            }
        }
    });
} 
```

带有修饰符的变量`final`保证不会改变，因此可以在匿名类的实例中使用。

# asp.net - 如何在我的浏览器控制台或输出窗口中显示 Console.WriteLine 输出？

> ID：14713782
> 
> 赞同：20
> 
> 时间：2013-02-05T17:53:41.627
> 
> 标签：asp.net, asp.net-mvc

我`System.Console.WriteLine("How can I see this debugging information in a browser");`在我的 ASP.NET MVC4 项目的模型中编写。如何在浏览器控制台或至少在 Visual Studio 中看到此调试字符串？我在 Visual Studio 的输出窗口中找不到它。也许我需要从 NuGet 安装一些插件？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-05T18:00:43.277

`Console.WriteLine(...)`不会显示。如果您绝对需要在调试器中查看输出，则必须使用

```
System.Diagnostics.Debug.WriteLine("This will be displayed in output window"); 
```

并在**输出**窗口中查看。您可以通过以下方式打开输出窗口`Debug -> Window -> Output`：

![在此处输入图像描述](../Images/7e93e89b3fa4c1d67aa3c8b3506fc1eb.png)

下面是一个例子：

![在此处输入图像描述](../Images/3e3af17a15f87ace484331a94b7d83c2.png)

如需进一步阅读，[请查看此 SO 帖子](https://stackoverflow.com/questions/137660/where-does-console-writeline-go-in-asp-net)。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-06-09T20:01:28.990

您可以使用以下类从 C# 代码写入 Javascript 控制台

```
using System.Web;

public static class Javascript
{
    static string scriptTag = "<script type=\"\" language=\"\">{0}</script>";
    public static void ConsoleLog(string message)
    {       
        string function = "console.log('{0}');";
        string log = string.Format(GenerateCodeFromFunction(function), message);
        HttpContext.Current.Response.Write(log);
    }

    public static void Alert(string message)
    {
        string function = "alert('{0}');";
        string log = string.Format(GenerateCodeFromFunction(function), message);
        HttpContext.Current.Response.Write(log);
    }

    static string GenerateCodeFromFunction(string function)
    {
        return string.Format(scriptTag, function);
    }
} 
```

就像它的 JS 版本一样工作，它实际上将您的消息转换为 JS 并将其注入到页面中。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-05T17:57:40.613

您可以使用`Debug.Writeline("debug information")`. 它将显示在“输出”窗口中。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-05T18:50:56.907

除了 Sam 的回答，您可能会发现它[`Response.Write`](http://msdn.microsoft.com/en-us/library/1463ysyw.aspx)很有用。在某些情况下 - 例如，当您支持旧的内联 .aspx 页面时 - 通过将可疑值写入浏览器来进行调试会更方便：

```
String myString = GetAStringFromSomewhere();

/* What did that method actually return, anyway?
   NB: Remove this once I know! */
Response.Write(myString); 
```

然而，这在 ASP.Net MVC 中不太实用，因为您的控制器将被编译。[在这种情况下，您不妨使用log4net](http://logging.apache.org/log4net/)之类的东西将调试信息写入日志文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-19T07:54:27.213

感谢 +MichaelTaylor3D 的解决方案，我进一步增强了一点，以支持 ajax 部分回发期间的功能。请记住添加对 System.Web.Extension 的引用以支持 ScriptManager。

```
 public static class Javascript
    {
        static string scriptTag = "<script type=\"\" language=\"\">{0}</script>";
        public static void ConsoleLog(string message)
        {
            string function = "console.log('{0}');";
            string log = string.Format(GenerateCodeFromFunction(function), message);

            Page page = HttpContext.Current.Handler as Page;

            if (ScriptManager.GetCurrent(page).IsInAsyncPostBack)
            {
                ScriptManager.RegisterClientScriptBlock(page, page.GetType(), "log", "console.log('" + message + "')", true);
            }
            else
            {
                HttpContext.Current.Response.Write(log);
            }
        }

        public static void ConsoleError(string message)
        {
            string function = "console.error('{0}');";
            string log = string.Format(GenerateCodeFromFunction(function), message);

            Page page = HttpContext.Current.Handler as Page;

            if (ScriptManager.GetCurrent(page).IsInAsyncPostBack)
            {
                ScriptManager.RegisterClientScriptBlock(page, page.GetType(), "error", "console.error('" + message + "')", true);
            }
            else
            {
                HttpContext.Current.Response.Write(log);
            }
        }

        public static void Alert(string message)
        {
            string function = "alert('{0}');";
            string log = string.Format(GenerateCodeFromFunction(function), message);

            Page page = HttpContext.Current.Handler as Page;

            if (ScriptManager.GetCurrent(page).IsInAsyncPostBack)
            {
                ScriptManager.RegisterClientScriptBlock(page, page.GetType(), "alert", "alert('" + message + "')", true);
            }
            else
            {
                HttpContext.Current.Response.Write(log);
            }
        }

        static string GenerateCodeFromFunction(string function)
        {
            return string.Format(scriptTag, function);
        }
    } 
```

# python - Youtube API：使用新的 32 字符播放列表 ID 将视频添加到播放列表

> ID：14713784
> 
> 赞同：1
> 
> 时间：2013-02-05T17:53:53.717
> 
> 标签：python, youtube-api, playlist

我一直在努力完成我认为很简单的任务：将视频添加到 youtube 播放列表。我有 uri 和视频 id，所以这应该可以，对吧？

```
uri = "http://gdata.youtube.com/feeds/api/users/dolkarr/playlists/AAnCXJ-nfQZwZYqo69euVZVyJ_XofIJs"
vid = "dmoDLyiQYKw"

video = yt_service.AddPlaylistVideoEntryToPlaylist(uri, vid) 
```

但它返回此错误响应：

> gdata.service.RequestError: {'status': 400, 'body': 'Invalid request URI', 'reason': 'Bad Request'}

经过一番研究，我发现它只适用于我的一些旧播放列表所具有的 16 个字符的播放列表 ID。前缀“PL”没有区别。有人通过使用不包含“-”的播放列表 ID“解决”了问题，但我无法创建这样的播放列表！所有这些都以`AAnCXJ-nfQ`...开头

所以，我要问的只是......有没有可能使这项工作？通过以某种方式创建具有旧式 ID 的播放列表或使其接受这些...我需要创建多个播放列表，每个播放列表包含 200 个视频，我真的不想手动填充它们...感谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T04:20:11.050

uri = " [http://gdata.youtube.com/feeds/api/users/dolkarr/playlists/AAnCXJ-nfQZwZYqo69euVZVyJ_XofIJs](http://gdata.youtube.com/feeds/api/users/dolkarr/playlists/AAnCXJ-nfQZwZYqo69euVZVyJ_XofIJs) "

你应该删除**user/userid**，成为

uri = " [http://gdata.youtube.com/feeds/api/playlists/AAnCXJ-nfQZwZYqo69euVZVyJ_XofIJs](http://gdata.youtube.com/feeds/api/playlists/AAnCXJ-nfQZwZYqo69euVZVyJ_XofIJs) "

看看：[https ://developers.google.com/youtube/1.0/developers_guide_python#AddVideoToPlaylist](https://developers.google.com/youtube/1.0/developers_guide_python#AddVideoToPlaylist)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T19:51:22.433

为了获得最佳结果，我建议您使用 Data API v3

有一个很棒的 Python 示例可以完成您正在尝试做的事情。' [https://developers.google.com/youtube/v3/docs/playlistItems/insert#examples](https://developers.google.com/youtube/v3/docs/playlistItems/insert#examples) '

这应该让你很快开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T00:53:59.640

我认为最好的做法是始终使用前缀 PL：

从这篇文章：

[http://apiblog.youtube.com/2012/08/playlists-now-with-more-pl.html](http://apiblog.youtube.com/2012/08/playlists-now-with-more-pl.html)

*虽然我们暂时将继续支持将不带前缀的播放列表 ID 作为元数据或在 API 请求 URL 中使用，但在未来的某个时候，我们可能会要求在提供播放列表 ID 时使用“PL”前缀。如果我们决定停止支持带有无前缀播放列表 ID 的请求，我们将提供额外的指导。*

但已报告问题

[https://groups.google.com/forum/#!topic/youtube-api-gdata/0c6dorRZ7bg](https://groups.google.com/forum/#!topic/youtube-api-gdata/0c6dorRZ7bg)

我相信如果你使用 PL 前缀并且你得到一个错误，那么你必须报告一个可能的错误

# java - GPS Android - 无法在实际手机上检索位置，但适用于模拟器

> ID：14713785
> 
> 赞同：1
> 
> 时间：2013-02-05T17:53:56.477
> 
> 标签：java, android

在实际手机或设备上测试时，我无法获取手机的纬度和经度，它总是返回**空**值，但是当我在模拟器上测试它并使用 DDMS 发送坐标时，它成功返回了经纬度。

这是我的课：

```
package locateodroid.james;

import java.io.IOException;
import java.util.List;
import java.util.Locale;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.location.Address;
import android.location.Criteria;
import android.location.Geocoder;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.telephony.SmsManager;
import android.telephony.SmsMessage;
import android.widget.EditText;
import android.widget.Toast;

public class SMSReceiver extends BroadcastReceiver{

    public SharedPreferences prefs;
    private String Keywords = "prefmode";
    private Double lat;
    private Double lon;
    private static final String FAR_MODE_KEY = "farmode";
    private Context con;

    @Override
    public void onReceive(Context context, Intent intent) {

        con = context;
        String FarModeKeyword= "";
        String message = "";
        String number = "";
        prefs = context.getSharedPreferences(Keywords, Context.MODE_PRIVATE);
        FarModeKeyword = prefs.getString(FAR_MODE_KEY, "");

        //---get the SMS message passed in---
        Bundle bundle = intent.getExtras();
        SmsMessage[] msgs = null;

        if (bundle != null)
        {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];
            for (int i=0; i<msgs.length; i++)
            {
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                message += msgs[i].getMessageBody().toString();
            }

            for (int i=0; i<msgs.length; i++)
            {
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                number += msgs[i].getOriginatingAddress();
            }

        }

            getLocation();
            Toast.makeText(context,
                    lat + "_" + lon,
                    Toast.LENGTH_SHORT).show();
            sendSMS(number, lat + "_" + lon);

    }

    private void sendSMS(String phoneNumber, String message)
    {
        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, null, null);
    }

    private getLocation ()
    {
        // Get the location manager
        LocationManager locationManager = (LocationManager)con.getSystemService(Context.LOCATION_SERVICE);
        Criteria criteria = new Criteria ();
        Geocoder geoCoder = new Geocoder(con);
        LocationListener MyLocListener = new LocListener();
        List<String> providers = locationManager.getProviders(true);
        for (String provider : providers) {
            locationManager.requestLocationUpdates(provider, 0, 0, MyLocListener);
        }

        Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        lat = location.getLatitude();
        lon = location.getLongitude();

    }

    public class LocListener implements LocationListener
    {     
        @Override
          public void onLocationChanged(Location loc) {
              lat = loc.getLatitude();
              lon = loc.getLongitude();       
          }

        @Override
        public void onProviderDisabled(String arg0) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }   
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:27:40.723

您是否已在清单中授予所有权限以获取 GPS 坐标？你有没有检查过你手机中的“使用GPS Settelite”选项是否已经被选中？您是否尝试在建筑物外获取数据，因为 GPS 无法在建筑物内进行修复。

如果所有这些问题的答案是否定的。比请先这样做。

# cuda - cudaMalloc3DArray 以错误的值失败——限制大小？

> ID：14713793
> 
> 赞同：3
> 
> 时间：2013-02-05T17:54:12.373
> 
> 标签：cuda, gpu

来电：

```
cudaExtent extent = make_cudaExtent( 1920 * sizeof(float), 1080, 10);
chanDesc = cudaCreateChannelDesc ( 32, 0, 0, 0, cudaChannelFormatKindFloat);
err = cudaMalloc3DArray  ( &(devYAll[0]), &chanDesc, extent, 0); 
```

失败了`err=cudaErrorInvalidValue`。当我使用第一个参数扩展到 1024 或更小的范围时，对 3D 数组的调用成功。可以分配的内存大小是否有某种限制`cudaMalloc3DArray`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T19:10:09.867

是的，范围大小有限制 - 2048x2048x2048 或 4096x4096x4096，具体取决于您拥有的硬件（根据您问题中的详细信息，我假设您有 Fermi 卡）。但你问题的真正根源是你的`make_cudaExtent`电话。对于`cudaMalloc3DArray`，范围的第一个参数应该在*元素*中给出，而不是字节。这就是为什么您在第一个维度 > 1024 时收到错误，因为 1024 * sizeof(float) = 4096 这是 Fermi GPU 的限制。

因此，要分配一个 1920x1080x10 的 3D 数组，请执行以下操作：

```
cudaExtent extent = make_cudaExtent( 1920, 1080, 10);
chanDesc = cudaCreateChannelDesc ( 32, 0, 0, 0, cudaChannelFormatKindFloat);
err = cudaMalloc3DArray  ( &(devYAll[0]), &chanDesc, extent, 0); 
```

在这个调用中，类型的大小是从通道描述中推断出来的，并且根据需要修改范围尺寸以满足硬件的间距/对齐要求。

# visual-studio - “__declspec(dllexport)”有什么作用？

> ID：14713794
> 
> 赞同：-2
> 
> 时间：2013-02-05T17:54:15.423
> 
> 标签：visual-studio

这是 Visual Studio 定义的函数还是 Windows 定义的函数？调用时它会做什么？有人可以向我提供有关此功能的详细信息的链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T18:24:59.923

创建 DLL 时，默认情况下，在 DLL 中定义的任何函数都只能从同一个**DLL**中调用。您不能从可执行文件或不同的 DLL 调用该函数。

如果您希望从 DLL 外部调用您的函数，则需要通过添加来**导出**`__declspec(dllexport)`它。考虑它的一种方法是`__declspec(dllexport)`将函数标记为 DLL 的公共接口的一部分。

[您可以在msdn.microsoft.com](http://msdn.microsoft.com/en-us/library/a90k134d%28v=vs.80%29.aspx)中了解它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:14:15.187

基本上，它只是一个特定于 MSVC 的宏，它告诉编译器将该函数导出到 DLL 中。有关详细信息，请参阅 MSDN 页面[http://msdn.microsoft.com/en-US/library/3y1sfaz2%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-US/library/3y1sfaz2%28v=vs.80%29.aspx)

# sql - 如何在此 sql 语句的 where 子句中使用 if 语句？

> ID：14713796
> 
> 赞同：0
> 
> 时间：2013-02-05T17:54:17.897
> 
> 标签：sql, sql-server, stored-procedures

```
 select * 
 from mytable
 where (if @key=0 
           pkey>=0
        else
           pkey = @key) 
```

`@key`是传递给存储过程的值，`pkey`是`mytable`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:56:21.247

这个怎么样：

```
 select * 
 from mytable
 where ((@key=0 AND pkey>=0) OR (@key<>0 AND pkey = @key)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T18:13:01.563

您使用`CASE`（*有点像您尝试的方式`if`*）如下。（[演示](http://sqlfiddle.com/#!3/8deea/21)）

```
select * 
from mytable
where pkey = case when @key <> 0 then @key 
                  else Abs(pkey) end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T19:12:59.727

这对你有用。通过使用 case 语句，您可以应用动态过滤器..

```
select *   
from mytable  
where  1 = case 
             when @key=0 then case when pkey>=0 then 1 else 0 end
             else case when pkey = @key then 1 else 0 end
           end 
```

# ide - 是否有任何 XACML 评估引擎实现？

> ID：14713797
> 
> 赞同：2
> 
> 时间：2013-02-05T17:54:18.827
> 
> 标签：ide, implementation, sourceforge, xacml, xacml3

作为我研究的一部分，我必须评估 XACML 政策。我正在寻找用于 xacml 评估的 IDE。谁能推荐一个？

我已经安装了 wso2 身份服务器，但是当我上传策略时，它给出了无法上传策略的错误。

我还下载了 UMU-Xacml-Editor。谁能告诉我如何使用该编辑器进行评估？

我什至下载了几个源伪造引擎，但我无法安装它们。谁能告诉我安装细节

您能否让我知道是否有任何用于评估 xacml 策略的开放工具。

谢谢和问候，帕瓦尼。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:42:23.823

您使用的身份服务器版本是什么？在 Identity Server (V 4.0.0) 中，当您上传策略时，它会进行模式验证。如果您的策略不符合架构，则策略上传将失败。

但是，您可以通过在 entitlement.properties 文件中将以下属性设置为“false”来禁用策略模式验证，该文件位于 /repository/conf/security

PDP.SchemaValidation.Enable=false

您也可以使用 WSO2 Identity Server 策略编辑器 UI 简单地创建策略。我想这篇博文 [1] 可能有用。但它是为版本 3.2.3 编写的。可能对 4.0.0 无效。版本

对不起。我没有使用 UMU-Xacml-Editor。

[1] [http://xacmlinfo.com/2012/05/02/xacml-policy-editor-in-wso2-identity-server/](http://xacmlinfo.com/2012/05/02/xacml-policy-editor-in-wso2-identity-server/)

# sql - Postgresql：排序列以匹配自定义条件

> ID：14713798
> 
> 赞同：3
> 
> 时间：2013-02-05T17:54:21.377
> 
> 标签：sql, sorting, postgresql-9.1

我无法对查询结果进行排序。

执行此查询后：

```
SELECT id_doc_header, id_clasificacion_doc 
FROM cabecera_documento INNER JOIN tipo_doc USING (id_tipo_doc) 
 INNER JOIN clasificacion_documento USING (id_clasificacion_doc) 
WHERE finalizado = 'f' AND cod_exp = '10-APC-2013' AND id_clasificacion_doc in(2,3,4,5)
ORDER BY case when Id_clasificacion_doc = 5 THEN 5 when Id_clasificacion_doc = 3 THEN 3 
  when Id_clasificacion_doc = 2 THEN 2 when Id_clasificacion_doc = 4 THEN 4 END; 
```

或这个：

```
SELECT id_doc_header, id_clasificacion_doc 
FROM cabecera_documento INNER JOIN tipo_doc USING (id_tipo_doc) 
INNER JOIN clasificacion_documento USING (id_clasificacion_doc) 
WHERE finalizado = 'f' AND cod_exp = '10-APC-2013' 
AND id_clasificacion_doc in(2,3,4,5) 
ORDER BY id_clasificacion_doc = 5, id_clasificacion_doc = 3, id_clasificacion_doc = 2, id_clasificacion_doc = 4; 
```

我得到的结果是：

```
 id_doc_header | id_clasificacion_doc 
---------------+----------------------
          1657 |                    2
          1658 |                    3
          1658 |                    2
          1661 |                    4
          1663 |                    4
          1665 |                    5 
```

我的问题是：**我该怎么做才能获得下一个订单的结果？**

```
 id_doc_header | id_clasificacion_doc 
---------------+----------------------
          1665 |                    5
          1658 |                    3
          1657 |                    2
          1661 |                    4
          1663 |                    4 
```

我正在使用 posgresql 9.1。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-05T18:21:53.737

尝试通过以下方式明确订单：

```
order by (case when id_clasificacion_doc = 5 then 1
               when id_clasificacion_doc = 3 then 2
               when id_clasificacion_doc = 2 then 3
               when id_clasificacion_doc = 4 then 4
          end) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T18:21:30.527

正如@ruakh 暗示的那样：

```
AnimalsPriority (animal varchar, priority numeric)
cat, 2.0
dog, 1.0
moose, 1.1

Animals (animal varchar)
cat
dog
moose

select * from Animals A
inner join AnimalsPriority AP
on A.animal = AP.animal
order by AP.priority 
```

如果您将排序顺序“硬编码”到查询中，则如果优先级更改，则必须更改查询。将排序优先级保留为一种元数据更加灵活，如果您使用带小数点的数字，您始终可以将新值注入排序顺序，而无需重新编号所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-08T03:02:41.417

我相信你的后一个例子应该这样工作：

```
ORDER BY id_clasificacion_doc = 5 DESC,
         id_clasificacion_doc = 3 DESC,
         id_clasificacion_doc = 2 DESC,
         id_clasificacion_doc = 4 DESC; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-06T14:15:02.180

自 Postgres 9.5 以来，可能有更好的解决方案

```
order by array_position(ARRAY[5, 3, 2, 4]::integer[], id_clasificacion_doc) 
```

# c - 如何阻止读取系统调用

> ID：14713800
> 
> 赞同：4
> 
> 时间：2013-02-05T17:54:23.967
> 
> 标签：c, linux, io

我不明白 read() 系统是如何阻塞的。我创建了一个空文件并尝试使用 read() 系统调用进行读取。它返回 0。

```
fd = open("Demo.txt",O_RDONLY);
n = read(fd,&ch,10); // returns 0 
```

我期待 read() 无限期地阻塞，因为文件中没有数据。read() 是否将 EOF 视为有效数据并立即返回？我的理解正确吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T18:00:30.063

是的，EOF 将导致 read() 立即返回，而不是阻塞。当您到达 EOF read() 时，不会等待将更多数据写入文件；它立即返回 0 个字节。从磁盘上的文件读取时，阻塞不会发挥作用，除了磁盘上的数据读入内存时通常难以察觉的延迟。

在使用 TTY、套接字和管道时，它更相关。例如，当 stdin 连接到终端时从 stdin 读取将阻塞，直到用户键入某些内容。如果我们没有从另一端接收到数据，从套接字读取将阻塞。从管道读取将阻塞，直到管道另一侧的程序写入某些内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T18:00:11.677

你的理解是正确的。 `read()`仅在从已连接的管道或网络套接字读取时才会阻塞。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T18:01:12.667

从[这里](http://linux.die.net/man/2/read)：

> read() 尝试将文件描述符 fd 中的 count 个字节读入缓冲区，从 buf 开始。

任何时候都不会`read`阻塞常规文件，如果常规文件为空，则预期会返回 0（如您所见），这意味着从文件中读取了 0 个字节。文件类型（例如 FIFO/管道）支持阻塞行为。

# node.js - 在流星中，如何为不同的房间创建一个具有唯一 URL 的多聊天室应用程序？

> ID：14713801
> 
> 赞同：1
> 
> 时间：2013-02-05T17:54:24.817
> 
> 标签：node.js, meteor

我有基本的聊天室工作（单页），但是当我浏览到我的 URL 时，我想生成一个独特的聊天室。例如，用户浏览到 chatroom.com 并被重定向到 chatrooom.com/room1，然后她/他可以与朋友分享该 URL 以与之聊天。我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T18:29:52.877

你需要一个路由器，你可以使用骨干网或我个人最喜欢的流星路由器（通过[陨石](https://github.com/oortcloud/meteorite)安装）：

```
mrt install router 
```

在你的客户端 js

```
//In your chat query add something to localise your chat messages for your room e.g (if you're using handlebars):

Template.messages.message = function() {
    //assuming messages contains your collection of chats
    return messages.find({room:Session.get("room")}) //get the room name set in the router
}; 
```

对于您的路由器（也在客户端 js 中）：

```
Meteor.Router.add({
  '/': 'home',
  '/rooms/:id': function(id) {
     Session.set("room",id); //set the room for the template
     return "messages"; //If you're template is called messages
  },
  '*': 'not_found' 
```

});

因此，如果您要加载`/rooms/lobby`，它将仅加载`room`值为`lobby`.

更多关于流星路由器的文档：[https ://github.com/tmeasday/meteor-router](https://github.com/tmeasday/meteor-router)

# d3.js - D3中力图节点内的圆形包装？

> ID：14713804
> 
> 赞同：5
> 
> 时间：2013-02-05T17:54:32.623
> 
> 标签：d3.js, force-layout, circle-pack

我有一个用 D3 生成的[力有向图](http://bl.ocks.org/1377729)，在每个节点（表示为大圆圈）内，我想使用 D3 的[Circle Packing](http://bl.ocks.org/4063530)将它们打包成一堆较小的圆圈。是否可以在一个可视化中同时使用这两种布局？如何将布局插入节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T18:15:21.263

一旦我意识到 svg 元素只是常规的 dom 节点并且我可以使用 jquery 操作它们，我就明白了。我最终创建了两个 svg 位置，一个用于显示，一个用于创建 svg 对象。我在构建器位置一次构建一个对象，然后将它移到其他地方以便为下一个人工作。当我准备好时，我在主显示屏上构建了力图，并用我在其他地方保存的圆形填充节点填充了那里的节点。

# c - 与 __builtin_bswap32 相关的编译错误

> ID：14713807
> 
> 赞同：1
> 
> 时间：2013-02-05T17:54:39.167
> 
> 标签：c, build, endianness, htonl

我正在玩包含以下代码的开源

```
uint32_t addr = htonl(* (uint32_t *)RTA_DATA(rth));
if (htonl(13) == 13) {
    // running on big endian system
} else {
    // running on little endian system
    addr = __builtin_bswap32(addr);
} 
```

看起来它检查系统是大端还是小端`if (htonl(13) == 13)`。这是正确的吗？你能解释一下为什么要这样检查吗？为什么他使用 13？

也`addr = __builtin_bswap32(addr);`导致编译问题**“未定义的引用”**。有解决方案吗？看起来该功能在新版本的 gcc 库中不再存在。这是正确的吗？

编辑：

我使用的工具链是 `toolchain-i386_gcc-4.1.2_uClibc-0.9.30.1`

对于我在编译中使用的选项：

*   对于 c to object 编译选项：

    `-DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -I. -I/opt/lampp/htdocs/backfire/staging_dir/target-i386_uClibc-0.9.30.1/usr/include -O2 -pipe -march=i486 -funit-at-a-time -fhonour-copts -D_GNU_SOURCE -MT`

*   对于二进制对象（链接器）

    `-O2 -pipe -march=i486 -funit-at-a-time -fhonour-copts -D_GNU_SOURCE -L/opt/lampp/htdocs/backfire/staging_dir/target-i386_uClibc-0.9.30.1/usr/lib -L/opt/lampp/htdocs/backfire/staging_dir/target-i386_uClibc-0.9.30.1/lib -L/opt/lampp/htdocs/backfire/staging_dir/toolchain-i386_gcc-4.1.2_uClibc-0.9.30.1/lib -Wl,-rpath-link=/opt/lampp/htdocs/backfire/staging_dir/target-i386_uClibc-0.9.30.1/usr/lib`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T22:29:25.703

`htonl`将“主机顺序”数字转换为网络字节顺序。主机顺序是您在运行代码的系统上拥有的任何字节顺序。网络字节顺序是大端。如果主机到网络是大到大，这意味着没有变化——这就是`13`->`13`将验证的。另一方面，如果主机到网络是从小到大，这意味着您将进行交换，因此最不重要的字节`13`（最不重要的是因为将其更改为 1 只会将总数更改为 1）将成为大多数-significant-byte `13`（主要是因为将该字节更改为一个最大的数量）和`13`-> `(13 << 24)`。

`13`具体不重要。你可以使用任何数字，只要它的小端表示与大端表示不同。(`0`会很糟糕，因为`0`字节交换仍然是`0`. 也一样`(65536 + 256)`，因为 32 位表示`00 01 01 00`同时采用大端和小端。

请注意，还有混合端系统，对于 32 位数字`0x12345678`，您的字节顺序不是`12 34 56 78`(big-endian) 或`78 56 34 12`(little-endian)：`34 12 78 56`我相信其中之一。这些系统并不常见，但它们仍然存在，并且这里的代码无法正确处理它们。

[http://gcc.gnu.org/onlinedocs/gcc-4.2.0/gcc/Other-Builtins.html](http://gcc.gnu.org/onlinedocs/gcc-4.2.0/gcc/Other-Builtins.html) and [http://gcc.gnu.org/onlinedocs/gcc-4.3.0/gcc/Other-Builtins.html](http://gcc.gnu.org/onlinedocs/gcc-4.3.0/gcc/Other-Builtins.html) suggest `__builtin_bswap32` was added in gcc 4.3, so your gcc 4.1.2 toolchain wouldn't have it.

# objective-c - 使用 AFNetworking 在下载期间即时计算 md5 哈希

> ID：14713816
> 
> 赞同：1
> 
> 时间：2013-02-05T17:55:09.440
> 
> 标签：objective-c, nsurlconnection, md5, afnetworking

我希望能够使用 AFNetworking 拦截来自网络的字节，以便能够在下载期间计算大文件的 md5 哈希，而不是等待下载完成然后从文件系统扫描文件。

这可能吗？我使用 NSOutputStream 将文件写入磁盘，但没有办法从 OutputStream 读取（故意），更新进度的回调仅包含读取的字节数和总字节数。

任何意见，将不胜感激。

# .net - String.Replace 不会替换所有匹配项

> ID：14713820
> 
> 赞同：5
> 
> 时间：2013-02-05T17:55:26.737
> 
> 标签：.net, vb.net, string, replace

为什么`line2`只替换交替出现的一半？

```
 Dim line1 As String = "AAA|BBB|CCC|CCC|CCC|CCC|EEE|FFF"
    Dim line2 As String = "AAA|BBB|CCC|CCC|CCC|CCC|EEE|FFF"
    Dim line3 As String = "AAA|BBB|CCC|CCC|CCC|CCC|EEE|FFF"

    line1 = line1.Replace("CCC", "")
    line2 = line2.Replace("|CCC|", "||")
    line3 = line3.Replace("CCC|", "|") 
```

结果：

```
line1 = "AAA|BBB|||||EEE|FFF" -- OK, but fails when element is "..|ZZZCCCZZZ|.."
line2 = "AAA|BBB||CCC||CCC|EEE|FFF" -- Not OK
line3 = "AAA|BBB|||||EEE|FFF" -- OK, but fails similar to Line1 edge-case for "..|ZZZCCC|.." 
```

我曾尝试使用 RegEx，但得到了类似的结果。

下面真的没有比这更好的方法了吗？

```
Do While line1.Contains("|CCC|")
    line1 = line1.Replace("|CCC|", "||")
Loop 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T17:58:41.587

一旦找到第一个令牌，它就会开始寻找该令牌*之后的**下*一个令牌。所以它找到，替换它，然后继续，它看到的第一件事就是不匹配。它不会预先扫描字符串以查找要替换的标记。*`|CCC|``CCC|`*

 *像这样考虑它：

给定`AAA|BBB|CCC|CCC|CCC|CCC|EEE|FFF`

它运行到`AAA|BBB|CCC|` ***HOLD IT*** `|CCC|`被发现，让我们开始构建我们的字符串：

`AAA|BBB`+ `||`（我们的替代品）

现在让我们继续前进，我们现在已经`CCC|CCC|CCC|EEE|FFF`离开了。

它运行到`CCC|CCC|` ***HOLD IT*** `|CCC|`被发现，让我们继续添加到我们的字符串：

`AAA|BBB||CCC`+ `||`（我们的替代品）

现在让我们继续前进，我们现在有`CCC|CCC|EEE|FFF`等等等等。

编辑：考虑[MSDN](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)上描述返回值的条目：

> 与当前字符串等效的字符串，除了 oldValue 的所有实例都替换为 newValue。

人们*可以将*其解读为您期望它预扫描字符串并找到*所有*匹配项。我在 MSDN 文档中没有看到任何描述这种极端情况的内容。也许这是应该添加到 MSDN 文档中的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T18:24:48.180

不要使用正则表达式或者`string.Replace`您可以解析值，而是过滤您不想要的值并将它们重新连接在一起。

```
line1 = string.Join("|", line1.Split("|").Select(s => s == "CCC" ? "" : s).ToArray()); 
```

对不起，我不知道 VB 等价物。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T18:44:05.160

对于未来的任何人，我添加了一个扩展方法来克服框架中的这个限制：

```
<System.Runtime.CompilerServices.Extension()>
Public Function ReplaceAll(ByVal original As String, ByVal oldValue As String, ByVal newValue As String) As String

    If newValue.Contains(oldValue) Then
        Throw New ArgumentException("New value can't be a subset of OldValue as infinite replacements can occur.", newValue)
    End If

    Dim maxIterations As Integer = original.Length \ oldValue.Length

    While maxIterations > 0 AndAlso original.Contains(oldValue)
        original = original.Replace(oldValue, newValue)
        maxIterations -= 1
    End While

    Return original

End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T20:08:34.117

对于这种情况，我可能会使用[正则表达式替换](http://msdn.microsoft.com/en-us/library/e7f5w83z.aspx)和[*环视。*](http://msdn.microsoft.com/en-us/library/az24scfc.aspx#grouping_constructs)

考虑这个例子：

```
Regex.Replace("FCCCF|CCC|CCC|", "((?<=[|])CCC(?=[|]))", "")
// ->
"FCCCF|||" 
```

这将始终匹配正确的次数，并且不容易出现任何无限递归问题。它需要修改适当的正则表达式并更改替换数据。

但是，请注意克里斯的评论：

```
Regex.Replace("FCCCF|CCC|CCC||CCC|", "((?<=[|])CCC(?=[|]))", "")
// -> only 5 pipes: verify this is correct per the intended semantics
"FCCCF|||||" 
```*

# mod-rewrite - 使用第一个斜杠后声明的变量重定向到备用 url

> ID：14713821
> 
> 赞同：0
> 
> 时间：2013-02-05T17:55:39.473
> 
> 标签：mod-rewrite, redirect, virtualhost, httpd.conf, slash

好的，我已经检查了这个网站，但我仍然对如何做到这一点感到困惑......

我需要这样的网址

subdomain.domain.com/1234

并重定向到这样的网址

[http://assets.subdomain.domain/php/store.php?store_num=1234](http://assets.subdomain.domain/php/store.php?store_num=1234)

利用斜杠后的数字作为获取变量

到目前为止，这是我的 .conf 文件中的内容。

```
<VirtualHost *:80>
  ServerName assets.subdomain.domain.com
  ServerAlias subdomain.domain.com/*
  VirtualDocumentRoot /var/www/html/prod/subdomain.domain.com/assets/

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ http://assets.subdomain.domain/php/store.php?store_num=$1 [L,QSA]         
</VirtualHost> 
```

附带说明一下，我的 .conf 文件非常大，并且其中包含许多其他虚拟主机，因此我不确定这是否不起作用，因为 .conf 文件中还有其他内容正在覆盖它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:02:49.830

您需要通过添加[RewriteEngine](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriteengine)指令来启用 mod_rewrite。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ http://assets.subdomain.domain/php/store.php?store_num=$1 [L,QSA] 
```

# c# - 刷新自定义控件的更好方法

> ID：14713824
> 
> 赞同：0
> 
> 时间：2013-02-05T17:55:43.340
> 
> 标签：c#, visual-studio, events, controls

我正在学习如何编写自定义控件以及管理和引发事件。我创建了一个毫无意义的自定义控件，您可以在 main 上添加一条线并决定大小和颜色。我还做了一个事件来替换 OnClick（我只是在学习），我称之为 MyClick。这是代码

```
public class EditedLine : UserControl
{
    public delegate void LineClickEventHandler(object sender, EditedLineClickEventArgs e);

    [Description("Occurs when control is clicked")]
    public event LineClickEventHandler MyClick;

    private Color _color;
    private float _size;

    public EditedLine()
    {
        _color = Color.Black;
        _size = 3;
    }
    public EditedLine(Color color, float size)
    {
        _color = color;
        _size = size;
    }

    public Color LineColor
    {
        get { return _color; }
        set { _color = value; }
    }
    public float LineSize
    {
        get { return _size; }
        set { _size = value; }
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);
        e.Graphics.DrawLine(new Pen(_color, _size), new Point(0, 0), new Point(this.Size.Width, 0));
    }
    protected override void OnClick(EventArgs e)
    {
        base.OnClick(e);
        OnLineClick(new EditedLineClickEventArgs());
    }

    protected virtual void OnLineClick(EditedLineClickEventArgs e)
    {
        if (MyClick != null)
        {
            MyClick(this, e);
        }
    }
} 
```

}

幸运的是一切都在工作。我可以在控件工具箱中看到我的控件，我可以添加到我的项目中，即使事件正在运行。但是，如果在 MyClick 中我尝试更改线条的颜色，则不会发生任何事情。我必须使用这个属性而不是之前的属性：

```
 public Color LineColor
    {
        get { return _color; }
        set { _color = value; this.Refresh();  }
    }
    public float LineSize
    {
        get { return _size; }
        set { _size = value; this.Refresh();  }
    } 
```

所以我问自己是否有更好的方法来刷新控件。如果我重画一条线很容易做到，但如果它是一个更复杂的控件呢？我想做一个“重绘”私有方法，但我不知道如何访问 EditedLine istance 的“图形”对象。“INotifyPropertyChanged”有用吗？但是“图形”仍然是我最大的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:32:32.680

如果您正在谈论更复杂的控件，请考虑更改`Refresh`为`Invalidate`使 UserControl 的特定区域无效。要获取`Graphics`对象，只需调用`CreateGraphics`方法。

# javascript - 如何创建使窗口居中的功能

> ID：14713828
> 
> 赞同：-2
> 
> 时间：2013-02-05T17:55:53.437
> 
> 标签：javascript, jqgrid

我正在使用jqgrid，并且要使弹出窗口集中添加，删除和编辑，我需要使用`beforeShowForm`在此显示窗口之前显示屏幕中心的参数。问题是我必须始终为这三个函数执行相同的代码。

功能如下：

```
{ // edit option
  beforeShowForm: function(form) {
    var dlgDiv = $("#editmod" + $(this)[0].id);
    var parentDiv = dlgDiv.parent();
    var dlgWidth = dlgDiv.width();
    var parentWidth = parentDiv.width();
    var dlgHeight = dlgDiv.height();
    var parentHeight = parentDiv.height();
    var parentTop = parentDiv.offset().top;
    var parentLeft = parentDiv.offset().left;
    dlgDiv[0].style.top =  Math.round(parentTop / 2) + "px";
    dlgDiv[0].style.left = Math.round(parentLeft + (parentWidth-dlgWidth  )/2 )  + "px";
  }
}, 
```

为了重用相同的代码，我将创建一个单独的函数来始终编写相同数量的代码。我试图创建以下函数：

功能：

```
function test(dlgDiv)
{
  var parentDiv = dlgDiv.parent();
  var dlgWidth = dlgDiv.width();
  var parentWidth = parentDiv.width();
  var dlgHeight = dlgDiv.height();
  var parentHeight = parentDiv.height();
  var parentTop = parentDiv.offset().top;
  var parentLeft = parentDiv.offset().left;
  dlgDiv[0].style.top =  Math.round(parentTop / 2) + "px";
  dlgDiv[0].style.left = Math.round(parentLeft + (parentWidth-dlgWidth  )/2 )  + "px";
} 
```

在网格中：

```
{ // edit option
  beforeShowForm: function(form) {
    var dlgDiv = $("#editmod" + $(this)[0].id);
    test(dlgDiv);
  }
}, 
```

但继续没有放弃。表示未定义值 dlgDiv。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:48:04.100

问题在于您在此处使用的选择器：

```
var dlgDiv = $("#editmod" + $(this)[0].id); 
```

无论您试图获取什么元素都不会被返回，因为选择器找不到它。您应该修改您的选择器以反映您尝试查找的元素的 ID。

如果你已经这样做了，但你仍然有问题，那么问题在于你的上下文，`this`并不意味着你认为它在上面的代码行中意味着什么。不过，在我详细说明之前，您必须向我们展示更多代码。

# python - plt.show() 在我尝试绘制度数分布时不起作用，但在我绘制随机图时它起作用

> ID：14713831
> 
> 赞同：0
> 
> 时间：2013-02-05T17:55:57.160
> 
> 标签：python, networkx

我是 python 新手，如果这是一个简单的问题，请原谅我。

我正在尝试用 matplot 绘制图表，但没有成功。我正在使用网络 x，当我使用 plt.show() 显示随机生成的图表时，它工作正常。但是当我尝试用它来绘制度数分布时，什么也没有发生。

我怀疑我没有正确添加子图，但在那之后我真的一无所知。

到目前为止，这是我的代码：

```
import networkx as nx

import matplotlib.pyplot as plt

p=1.0/6.0

g=nx.erdos_renyi_graph(10,p)
nx.draw(g)

plt.show()

def deg_dist()

    deg = {}

    for n in g.nodes():

       d = g.degree(n)

       if d not in deg:

           deg[d] = 0

       deg[d] += 1

    items = sorted(deg.items())

    fig = plt.figure()

    ax = fig.add_subplot(111)

    ax.plot([k for (k,v) in items], [v for (k,v) in items ])

    plt.title('Degree Distribution')

    fig.show() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:05:10.240

如果我错了，请原谅我……你至少调用了这个`deg_dist`函数吗？如果没有，那么这里什么都不会发生。

# ios - 使用本地图像文件时清除 UIWebView 缓存

> ID：14713833
> 
> 赞同：21
> 
> 时间：2013-02-05T17:56:05.340
> 
> 标签：ios, objective-c, caching, uiwebview, nsdocument

我使用 UIWebView 加载本地 html，并且在 Objc 创建的 html 内有一个 PNG 文件。

修改PNG文件后，我在UIWebView中重新加载了html，但图像没有改变。但是，**如果我退出应用程序并重新打开它，图像文件将更改为新文件。**

我已经用Finder检查了Documents中的PNG文件，所以我确定它已经被修改了，但旧的还在UIWebView中。

所以，我认为这是一个 UIWebView 缓存问题，我试过：

*   `[[NSURLCache sharedURLCache] removeAllCachedResponses];`

*   `[_webView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:url isDirectory:NO ] cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:1]];`或者`NSURLRequestReloadIgnoringCacheData`

它们都不起作用，我也无法更改文件名，因为 PNG 文件在很多地方（其他 html 和 objc 代码）都使用过。

我也试过这个： `some.png?r=randomNumber` 但它无法显示。

**在本地 html 中使用本地图像文件时如何清除 UIWebView 缓存？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-17T04:04:53.510

除了在每次访问时重命名每个文件之外，我只看到一件事可以解决这个问题，那就是使用 javascript 修改 HTML 以在图像 url 上添加时间戳，这样它就会欺骗 webview 认为它是一个不同的文件。图像（通常）加载相同，无论您在 ? 在他们的网址中。我认为这比每次加载 Web 视图时重命名每个文件更容易。像这样的东西（使用jQuery）：

```
<img src="myimg.jpg" />

<script>
$(function() {
    $('img').each(function(i, el) {
        $(el).attr('src', $(el).attr('src')+'?pizza='+(new Date()).getTime());
    });
});
</script> 
```

我想这是假设这个 javascript 在加载图像之前加载并运行，但理论上这应该可以工作。

对于一些背景知识，我在 webview 中创建了一个页面，该页面使用 RequireJS 来异步加载相当多的文件。除了我加载的是javascript文件而不是图像之外，我遇到了与这个问题完全相同的问题。解决此问题的关键是为 javascript 文件的每个路径添加时间戳，从而欺骗 webview（例如 me.js?ts=236136236 和whatever.js?ts=3153524623）。我发现这很好用。

我需要做的另一件事是在将 HTML 文件加载到 webview 时为其路径添加时间戳，如下所示：

```
[NSURL URLWithString:[[NSString stringWithFormat:@"%@/index.html?pizza=%f", webDirectoryPath, [[NSDate date] timeIntervalSince1970]] 
```

我现在可以修改所有本地文件，并且每次 webview 出现时，更改都会通过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T00:33:39.767

你可以试试这个，在你的 AppDelegate.m

```
+(void)initialize {
  [[NSURLCache sharedURLCache] setDiskCapacity:0];
  [[NSURLCache sharedURLCache] setMemoryCapacity:0];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-31T03:38:50.447

如果您的 html 没有更改并且唯一的更改是在图像中，您应该使用`UIWebView`'`reload`消息而不是再次加载请求。

像这样的东西：

```
- (void)reloadWebView:(id)sender
{
    if (self.loaded) {
        [self.webView reload];
    } else {
        NSString *html = [[NSBundle mainBundle] pathForResource:@"web" ofType:@"html"];
        NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL fileURLWithPath:html]];
        [self.webView loadRequest:request];
        self.loaded = YES;
    }
} 
```

您甚至不需要对缓存进行任何操作。

# fullcalendar - fullCalendar - 将非 allDay 事件拖到多天 - 全部来自“周”视图？

> ID：14713837
> 
> 赞同：8
> 
> 时间：2013-02-05T17:56:21.877
> 
> 标签：fullcalendar

我有一个完整的日历工作得很好。但是，我希望能够拖动一个*不是* `allDay`的事件并将其拖动到多天。

例如：我有一个活动安排在 2 月 5 日，从上午 10 点到下午 12 点。我希望能够将事件向右拖动，以便跨越多天。最终结果是一个跨越 2 月 5 日上午 10 点至 2 月 9 日下午 12 点（或基本上比原版之后的任何一天）的事件。

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-20T07:00:04.467

要在多天内调整大小并在每天 10 到 12 点之间创建一个事件，请使用下面的代码段。

要在多天内调整一个事件的大小并保持相同的开始时间和结束时间，插件调整大小已经做到了吗？

请参阅 eventResize 回调。[http://arshaw.com/fullcalendar/docs/event_ui/eventResize/](http://arshaw.com/fullcalendar/docs/event_ui/eventResize/)

```
$('#calendar').fullCalendar({
events: [
        // events here
        ],
editable: true,

eventResize: function(event,dayDelta,minuteDelta,revertFunc) {

   if(dayDelta >= 1 && !event.allDay) {
        revertFunc();

        for (var i = 0 ; i < dayDelta ; i ++) {
           var newEvent = {
            id: event.id,
            title : event.title,
            start : new Date(event.start),
            end : new Date(event.end),
            allDay : event.allDay
           };

           newEvent.start.setDate(newEvent.start.getDate()+(i+1));
           newEvent.end.setDate(newEvent.end.getDate()+(i+1));
           $('#calendar').fullCalendar( 'renderEvent', newEvent , 'stick');
        }
    }
}
}); 
```

# heroku - git push heroku master 权限被拒绝（公钥）

> ID：14713845
> 
> 赞同：13
> 
> 时间：2013-02-05T17:56:58.437
> 
> 标签：heroku

# 编辑#3

*在顶部更新它，因为它解决了我的问题并为我提供了一个我不知道的很好的故障排除步骤（也可以为您节省一些时间）*

尝试获取`ssh -vvv git@heroku.com`. 对我来说，当我的公钥在 /c/Users/NumberOverZero/.ssh 中时，ssh 正在尝试 /c/Program Files (x86)/Emacs/.ssh 中的密钥

删除 Emacs ssh 文件夹（它是空的）解决了我的问题，因为 ssh 会检查我的 Users .ssh 文件夹。

* * *

我正在`Permission denied (publickey)`尝试`git push heroku master`。

与以下帖子不同的一些原因：

*   我有 ssh 为 github 工作
*   我昨晚能够成功推送到heroku
*   自那次推送以来，我对一个 js 文件进行了单行更改，并提交并推送。没有其他变化。

我能找到的最接近的是这篇文章：

[git clone heroku ssh 权限被拒绝](https://stackoverflow.com/questions/3591084/git-clone-heroku-ssh-permission-denied)

我已经查看了相关问题（有很多）：

[git push heroku master 权限被拒绝（公钥）。致命：远程端意外挂断](https://stackoverflow.com/questions/12206779/git-push-heroku-master-permission-denied-publickey-fatal-the-remote-end-hung)
[git push heroku master 权限被拒绝](https://stackoverflow.com/questions/14342553/git-push-heroku-master-permission-denied)
[git clone heroku ssh 权限被拒绝](https://stackoverflow.com/questions/3591084/git-clone-heroku-ssh-permission-denied)
[https://stackoverflow.com/questions/13059076/git-push-permission-denied-publickey-windows-xp](https://stackoverflow.com/questions/13059076/git-push-permission-denied-publickey-windows-xp)
[heroku - rails - Permission拒绝（公钥）](https://stackoverflow.com/questions/10670562/heroku-rails-permission-denied-publickey)

我试过了：

1.  ```
    heroku keys:clear
    heroku keys:add 
    ```

2.  ```
    heroku keys:clear
    *delete every key in .ssh*
    heroku keys:add 
    ```

3.  ```
    *delete my application on heroku*
    heroku keys:clear        
    heroku login (adds key for me)
    heroku create
    git push heroku master
    fails 
    ```

4.  ```
    *delete the app on heroku*
    delete keys in .ssh
    heroku keys:clear
    copy all files into a new repository
    push new repository to github successfully
    heroku login (adds github key for me)
    heroku create
    git push heroku master
    fails 
    ```

5.  ```
    *delete the app on heroku*
    heroku keys:clear
    heroku login (adds key for me)
    heroku create
    heroku git:clone app app
    fails 
    ```

有任何想法吗？我已经完成了链接 SO 中的所有步骤——其中大多数只是不运行 heroku:add 或设置 ssh 密钥的人（我在每个步骤中都完成了）。

大多数时候，我让 heroku 负责（而不是直接创建 ssh 密钥），假设内置命令会在没有 ssh 密钥时执行他们需要的操作。似乎没有。

**编辑**：现在我删除了该应用程序，新的遗物插件令人震惊，该网站已关闭。尝试通过他们的网站登录要求我通过 heroku 登录。由于该应用程序已消失，因此我找不到方法。现在我无法访问该应用程序，有没有办法删除该插件？ `heroku addons`给出一个错误，所以我认为我不会通过那里得到它。

**编辑＃2**：添加了我尝试的另一个步骤 - 将文件移动到新存储库并推送到新应用程序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-07T10:49:47.100

我在 Windows 7 机器上遇到了同样的问题，并在这里找到了解决方案：**[http ://www.gmarwaha.com/blog/2011/05/18/heroku-trouble-with-windows-and-ssh-keys/](http://www.gmarwaha.com/blog/2011/05/18/heroku-trouble-with-windows-and-ssh-keys/)**

> **解决方案：**通常，一旦您创建了上述密钥，两个文件——“id_rsa”和“id_rsa.pub”——将存储在用户主文件夹中的“.ssh”文件夹中。如果您正在使用 linux，那似乎已经足够好了。但是对于 Windows 版本的 git 似乎并没有削减它。***它还希望将密钥存储在“msysgit”安装文件夹内的“.ssh”文件夹中***。如果您在“msysgit”安装文件夹中没有找到“.ssh”文件夹，请随意创建一个。一旦您将这两个关键文件放在那里并重复整个过程，一切都会顺利进行，我的应用程序已部署在 heroku 云中，世界再次成为一个更好的居住地。

就我而言，我必须找到`git.exe`安装位置，即`C:\Program Files\Git\`. 所以这里是步骤：

1.  在里面创建`.ssh`文件夹`C:\Program Files\Git\`
2.  将`id_rsa`和`id_rsa.pub`从您的主文件夹 ( `C:\Users\username\.ssh\`) 复制到`C:\Program Files\Git\.ssh\`.
3.  再试一次`C:\dev\heroku\sample-app> git push heroku master`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T19:05:35.230

很好地链接到您查看并尝试过的所有其他内容！（这将改善您得到的响应，但您仍然应该为很多“您尝试过......”和“也许是......”做好准备，因为这是一个系统/环境问题，不在正常流量）

您可能在本地终端会话中工作的某些东西已经丢失。（我遇到过很多次了）

可能是这样的：

1.  你在heroku上的ssh密钥
2.  你从那台计算机/网络上推到 heroku 的能力
3.  关于你的 git repo 的一些事情

我遇到过一次，它让我发疯。我跳上了我的（免费）cloud9 帐户，从 github 克隆了一些简单的 rails 应用程序并将其推送到 heroku，这帮助我证明了我的 heroku 帐户很好，heroku 本身很好，但是我的本地笔记本电脑在我的配置中存在一些问题. 我认为问题是我的用户名，但我不记得了。（移动到不同的环境并从头开始帮助我意识到了这个问题）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T08:05:44.060

您收到此消息的主要原因是您没有`ssh-keygen`添加到环境变量中。

该命令位于 Git 程序文件的 bin 目录中。

您应该将该 bin 目录添加到您的环境变量中。

# java - 应用程序在设备上运行但在模拟器上崩溃？

> ID：14713846
> 
> 赞同：1
> 
> 时间：2013-02-05T17:56:59.010
> 
> 标签：java, android, eclipse, android-emulator

我正在尝试测试我在 Eclipse 中构建的应用程序。当我在运行 Android 2.3.4 的 HTC Droid Incredible 设备上运行它时，它运行良好。但是，当我在 Nexus 7 或 10.1 WXGA 平板电脑等模拟器上运行它时，它会崩溃。我的目标 SDK 版本设置为 17，最低版本为 8。为什么应用程序可以在设备上运行，但不能在模拟器上运行？

代码和logcat在这里。

代码：

```
package com.carouseldemo.main;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.Menu;

import android.view.MenuInflater;
import android.view.View;
import android.widget.TextView;
import android.widget.Toast;

import com.carouseldemo.controls.Carousel;
import com.carouseldemo.controls.CarouselAdapter;
import com.carouseldemo.controls.CarouselAdapter.AdapterContextMenuInfo;
import com.carouseldemo.controls.CarouselAdapter.OnItemClickListener;
import com.carouseldemo.controls.CarouselAdapter.OnItemSelectedListener;
import com.carouseldemo.controls.CarouselItem;

public class MainActivity extends Activity {

@Override
public boolean onCreateOptionsMenu(Menu menu) {
super.onCreateOptionsMenu(menu);
MenuInflater inflater = getMenuInflater();
inflater.inflate(R.menu.testmenu1, menu);
// your code...
return true;} // true if you want the menu to be displayed; false otherwise

@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    // Just prepare ourself for unexpected arguments...

    if (menuInfo == null) {
        return;
    }
    if (!(menuInfo instanceof AdapterContextMenuInfo)) {
        return;
    }

    AdapterContextMenuInfo mi = (AdapterContextMenuInfo) menuInfo;

    switch (mi.position) {
    case 0:

        menu.add("Product 1");

        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    case 1:
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    case 2:
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    case 3:
        menu.add("mouse menu");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    case 4:
        menu.add("panda menu");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    case 5:
        menu.add("rabbit menu");
        menu.add("Product 1");
        menu.add("Product 1");
        menu.add("Product 1");
        break;
    default:
        break;
    }
    super.onCreateContextMenu(menu, v, menuInfo);
}

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final Carousel carousel = (Carousel) findViewById(R.id.carousel);
    carousel.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(CarouselAdapter<?> parent, View view,
                int position, long id) {
            CarouselItem item = (CarouselItem) parent.getChildAt(position);

            // HERE: Force context menu
            carousel.showContextMenuForChild(item);
            Toast.makeText(
                    MainActivity.this,
                    String.format("%s has been clicked",
                            ((CarouselItem) parent.getChildAt(position))
                                    .getName()), Toast.LENGTH_SHORT).show();

        }

        @Override
        public void onCreateContextMenu(ContextMenu menu, View v,
                ContextMenuInfo menuInfo) {

            // TODO Auto-generated method stub

        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // TODO Auto-generated method stub
            return false;
        }});

    carousel.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(CarouselAdapter<?> parent, View view,
                int position, long id) {

            final TextView txt = (TextView) (findViewById(R.id.selected_item));

            switch (position) {
            case 0:
                txt.setText("The cat (Felis catus), also known as the domestic cat or housecat to distinguish it from other felids and felines, is a small, usually furry, domesticated, carnivorous mammal that is valued by humans for its companionship and for its ability to hunt vermin and household pests. Cats have been associated with humans for at least 9,500 years, and are currently the most popular pet in the world. Owing to their close association with humans, cats are now found almost everywhere in the world.");
                break;
            case 1:
                txt.setText("The hippopotamus (Hippopotamus amphibius), or hippo, from the ancient Greek for \"river horse\" (), is a large, mostly herbivorous mammal in sub-Saharan Africa, and one of only two extant species in the family Hippopotamidae (the other is the Pygmy Hippopotamus.) After the elephant, the hippopotamus is the third largest land mammal and the heaviest extant artiodactyl.");
                break;
            case 2:
                txt.setText("A monkey is a primate, either an Old World monkey or a New World monkey. There are about 260 known living species of monkey. Many are arboreal, although there are species that live primarily on the ground, such as baboons. Monkeys are generally considered to be intelligent. Unlike apes, monkeys usually have tails. Tailless monkeys may be called \"apes\", incorrectly according to modern usage; thus the tailless Barbary macaque is called the \"Barbary ape\".");
                break;
            case 3:
                txt.setText("A mouse (plural: mice) is a small mammal belonging to the order of rodents. The best known mouse species is the common house mouse (Mus musculus). It is also a popular pet. In some places, certain kinds of field mice are also common. This rodent is eaten by large birds such as hawks and eagles. They are known to invade homes for food and occasionally shelter.");
                break;
            case 4:
                txt.setText("The giant panda, or panda (Ailuropoda melanoleuca, literally meaning \"black and white cat-foot\") is a bear native to central-western and south western China.[4] It is easily recognized by its large, distinctive black patches around the eyes, over the ears, and across its round body. Though it belongs to the order Carnivora, the panda's diet is 99% bamboo.");
                break;
            case 5:
                txt.setText("Rabbits (or, colloquially, bunnies) are small mammals in the family Leporidae of the order Lagomorpha, found in several parts of the world. There are eight different genera in the family classified as rabbits, including the European rabbit (Oryctolagus cuniculus), cottontail rabbits (genus Sylvilagus; 13 species), and the Amami rabbit (Pentalagus furnessi, an endangered species on Amami, Japan)");

                break;
            }

        }

        public void onNothingSelected(CarouselAdapter<?> parent) {
        }

    });

    registerForContextMenu(carousel);
}

} 
```

日志猫：

```
2-05 17:52:31.218: E/AndroidRuntime(1622): FATAL EXCEPTION: main
02-05 17:52:31.218: E/AndroidRuntime(1622): java.lang.RuntimeException: Unable to start activity            ComponentInfo{com.carouseldemo.main/com.carouseldemo.main.MainActivity}:     android.view.InflateException: Binary XML file line #31: Error inflating class com.carouseldemo.controls.Carousel
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.os.Looper.loop(Looper.java:137)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at java.lang.reflect.Method.invokeNative(Native Method)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at java.lang.reflect.Method.invoke(Method.java:511)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at dalvik.system.NativeStart.main(Native Method)
02-05 17:52:31.218: E/AndroidRuntime(1622): Caused by: android.view.InflateException: Binary XML file line #31: Error inflating class com.carouseldemo.controls.Carousel
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.view.LayoutInflater.createView(LayoutInflater.java:613)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
 02-05 17:52:31.218: E/AndroidRuntime(1622):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.app.Activity.setContentView(Activity.java:1881)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at com.carouseldemo.main.MainActivity.onCreate(MainActivity.java:110)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.app.Activity.performCreate(Activity.java:5104)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-05 17:52:31.218: E/AndroidRuntime(1622):     ... 11 more
02-05 17:52:31.218: E/AndroidRuntime(1622): Caused by: java.lang.reflect.InvocationTargetException
02-05 17:52:31.218: E/AndroidRuntime(1622):     at java.lang.reflect.Constructor.constructNative(Native Method)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.view.LayoutInflater.createView(LayoutInflater.java:587)
02-05 17:52:31.218: E/AndroidRuntime(1622):     ... 22 more
02-05 17:52:31.218: E/AndroidRuntime(1622): Caused by: java.lang.OutOfMemoryError
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:502)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:355)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:785)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.content.res.Resources.loadDrawable(Resources.java:1965)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at com.carouseldemo.controls.Carousel$ImageAdapter.SetImages(Carousel.java:778)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at com.carouseldemo.controls.Carousel.<init>(Carousel.java:253)
02-05 17:52:31.218: E/AndroidRuntime(1622):     at com.carouseldemo.controls.Carousel.<init>(Carousel.java:204)
02-05 17:52:31.218: E/AndroidRuntime(1622):     ... 25 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:03:44.937

大多数情况下，这个问题是由于错误的 xml 文件而发生的。

*   请确保您只有一个 main.xml 布局文件。
*   如果您想拥有多个布局文件（以支持不同的屏幕尺寸），请确保它们匹配，根据 Views *id / types / count*

# javascript - 如何在显示/隐藏中使用过渡

> ID：14713847
> 
> 赞同：1
> 
> 时间：2013-02-05T17:57:02.317
> 
> 标签：javascript, html, css, transition

我在 javascript 中编写了代码（显示/隐藏 div）。现在我想在 CSS 中使用属性“transition”，但它不起作用。

HEAD 中的 JavaScript：

```
function show()
{
  document.getElementById('add-contact').style.display=\"block\";
  document.getElementById('add-contact-button').style.display=\"none\";
}
</script> 
```

div add-contact 和 add-contact-button：

```
<span id=\"add-contact-button\" href=\"/kontakty#\" onclick=\"javascript:show()\">Dodaj kontakt</span>
  <form action=\"kontakty/dodaj\" method=\"post\" id=\"add-contact\" >
    ...
  </form> 
```

部分 CSS：

```
form#add-contact {
  float: right;
  width: 223px;
  height: auto;
  line-height: 27px;
  display: none;
  transition: height 500ms linear;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:12:29.463

我看到两个主要问题：

1.  您无法转换该`display`属性。您必须从一开始就将其作为一个块，然后将其隐藏`opacity: 0`

2.  您需要使用`-webkit`供应商前缀才能使其在 Chrome 和 Safari 中运行。

在此处查看工作演示：http: [//codepen.io/anon/pen/hwayD](http://codepen.io/anon/pen/hwayD)

# asp.net-mvc - 不使用剃须刀的asp.net mv3中的下拉列表

> ID：14713848
> 
> 赞同：-1
> 
> 时间：2013-02-05T17:57:02.603
> 
> 标签：asp.net-mvc

我的模型中有一个集合 iEnumerable，其中包含多个产品对象。产品对象具有 id、名称成本等字段。

我想在不使用剃须刀的情况下根据产品 ID 创建一个下拉列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T18:04:16.280

您可以通过迭代您的产品集合来手动生成 html。这对你有用吗？

```
<select name="ProductId" id="ProductId">
@foreach(var p in Model.Products) {
    <option value="@p.Sku">@p.Description</option>
}
</select> 
```

编辑：使用 aspx / webforms 视图引擎

```
<%if(Model.ProductCollection!=null) {%> 
    <select name="ProductId" id="ProductId">
         <% foreach (var p in Model.ProductCollection) {%> 
            <option value="<%:p.Id%>"> <%:p.Id%> </option> 
        <% }%> 
    </select> <% 
}%> 
```

# domain-driven-design - Drools 与 DDD：Drools 是否需要平面对象模型？

> ID：14713851
> 
> 赞同：4
> 
> 时间：2013-02-05T17:57:26.833
> 
> 标签：domain-driven-design, drools, object-model

在我们的电子商务领域，我们有一个使用嵌套数组建模的实体层次结构。我们使用领域驱动设计的原则（如 Eric Evans 所解释的）来做到这一点。我们电子商务领域的核心概念是：

*   **具有交易所的**合同*，其中每个都有*服务*和*付款*。反过来，服务具有描述每个服务的*特征*。*

 *这种分层模型使我们能够表达任何合同，无论多么复杂，包括具有多个协议（即交易所）作为整体协议（或合同）的一部分的那些。

Drools 不支持这种分层对象模型吗？我是否应该将我的对象模型反转为没有数组的平面对象模型（如[Drools Expert 文档中的“Fires HAVE Rooms”和“Sprinklers HAVE Rooms”示例](http://docs.jboss.org/drools/release/5.5.0.Final/drools-expert-docs/html_single/index.html#d0e737)），如下所示？

*   *合同*。
*   *交易所*，每个交易所都有一个合约。
*   *服务*和*支付*，每个都有一个交易所。
*   *Features*，每个都有一个服务。

以这种方式将分层对象模型反转为具有原子断言的平面对象模型，这在 Drools 中受支持并且效果最好，我对吗？Drools 似乎不支持对事实和子集合中的事实具有 LHS 条件的规则。

如果是这样，为什么 Drools 不支持更多层次的对象模型？是不是因为 Drools 来自 AI 世界（不是面向对象的世界），在这个世界中，一阶逻辑将所有事实表达为原子的主-谓-值语句，而不是实体对象具有身份、价值的面向对象世界对象没有身份，实体对象由其他实体和值对象组成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:08:59.887

您可以针对任何 Java 对象模型定义规则。

该文档提供了基于玩具问题的示例，以避免分散注意力。不是因为 Drools 无法处理更复杂的模型。如果您进一步阅读手册，您将看到使用诸如“包含”或累加器之类的语法处理列表的示例。

这取决于你如何建模。您可以将合同、交易所、服务、付款和功能作为单独的事实插入，它们相互引用。或者，您可以只插入一个复杂的合同事实，其中包含交易所列表，其中包含服务列表等。

哪个对您更有效取决于您的规则是否与具有很少链接的合同相匹配，或者您是否希望规则对功能的更改或付款事实的插入等做出反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T21:09:01.430

支持对象上的嵌套访问器，因为 Drools 可以与任何 Pojo 一起使用。但是，嵌套访问器没有反应性。

作为功​​能请求，可以通过插入侦听器开始添加嵌套访问器反应性。这是一项不平凡的工作，但它会非常有趣。*

# r - 错误消息：协方差矩阵的 LDL' Bunch-Kaufman 分解

> ID：14713856
> 
> 赞同：0
> 
> 时间：2013-02-05T17:57:38.227
> 
> 标签：r, matrix

我是 R-Matrix 的新手。我正在尝试使用 R-function BunchKaufman(x, ...) [http://stat.ethz.ch/R-manual/R-devel/library/Matrix/html/BunchKaufman-将奇异协方差矩阵分解为 LDL' 形式方法.html](http://stat.ethz.ch/R-manual/R-devel/library/Matrix/html/BunchKaufman-methods.html)

请帮助我通过尾随“功能错误......”的一垒

```
A <- matrix( c( 0.184, 0.228, 0.252, 0.022, -0.022, 0.228, 1.053, 0.142, 0.106, -0.106,
+ 0.252, 0.142, 0.382, 0.015, -0.015, 0.022, 0.106, 0.015, 0.055, -0.055, 
+ -0.022, -0.106, -0.015, -0.055, 0.055), ncol=5, nrow=5)
BunchKaufman(A)
Error in function (classes, fdef, mtable)  : 
  unable to find an inherited method for function ‘BunchKaufman’ for signature ‘"matrix"’ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:58:14.907

以下作品：

A <- forceSymmetric(A)

syA <- new("dsyMatrix", A , Dim = as.integer(c(nrow(A),nrow(A))) , uplo = "L" )

邦奇考夫曼(syA)

# jquery - google如何索引通过jquery动态加载的页面

> ID：14713860
> 
> 赞同：0
> 
> 时间：2013-02-05T17:57:45.753
> 
> 标签：jquery, seo, web-crawler, google-crawlers

> **可能重复：**
> [Google 是否抓取 AJAX 内容？](https://stackoverflow.com/questions/2434445/does-google-crawl-ajax-content)

所以我有一个论坛 - 链接是以下 URL 格式的课程页面 - [http://www.example.com/course/course-feed/course_id/1](http://www.example.com/course/course-feed/course_id/1)

现在这个页面有一堆问题，每个问题都是一个链接，点击后会带您进入问题详细页面，其中显示了该问题的所有答案 -

详细问题页面 url QUESTION PAGE 的示例格式 - [http://www.example.com/course/question-feed/course_question_id/636](http://www.example.com/course/question-feed/course_question_id/636)

因此，如果我有 5000 个问题，我就有 5000 个带有答案的问题页。

现在我的问题是 COURSE PAGE，显然没有显示所有 5000 个问题。相反，它显示 50 个问题链接，并在底部有一个“更多”按钮。

当用户点击“更多”时——接下来的 50 个问题通过 JQUERY 调用获取并显示在下方。现在当这个操作发生时——URL 显然没有改变。

当我最近查看有多少页面在 Google 中被索引时 - 它只有前 50 个问题页面，因为索引的 COURSE PAGE 仅显示 50 个问题链接。

我的问题是如何让爬虫浏览所有“更多”链接并索引所有 5000 个页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T18:03:19.610

简短的回答：它没有。

长答案：如果您的内容只能通过 javascript 调用访问，并且没有后备，则 Google 不会将其编入索引。在没有看到页面的情况下，我会假设该链接通常链接到`http://example.com/questions.php?page=2`由后端处理的内容。然后，您可以使用一些 JQuery 覆盖链接：

```
<a href="/questions.php?page=2" class='nextPage'>

<script>
    $('a.nextPage').click(function(){
        e.preventDefault();
        $.ajax(/*etc*/)
    })
</script> 
```

这只是一长串总是优雅降级的原因中的又一个。

# c# - First / FirstOrDefault 没有按我的预期工作

> ID：14713861
> 
> 赞同：3
> 
> 时间：2013-02-05T17:57:46.360
> 
> 标签：c#, linq, nhibernate

我正在使用 nhibernate，我写了一个 linq 查询，但它没有返回我所期望的。

```
public ParentA()
{
    public virtual Id {get; set;}
    public virtual Name {get; set;}
    public virtual IList<ChildA> ChidrenA {get; set;}

   public ParentA()
   {
       ChidrenA = new List<ChildA>();      
   }
}

public ChildA()
{
    public virtual Id {get; set;}
    public virtual Name {get; set;}
    public virtual IList<ChildB> ChidrenB {get; set;}
    public virtual ParentA ParenteA {get; set;}
   public ChildA()
   {
       ChidrenB = new List<ChildB>();      
   }
}

public ChildB()
{
    public virtual Id {get; set;}
    public virtual Name {get; set;}
    public virtual ChildA {get; set;}
} 
```

上面的代码是我的域。流利的 nhibernate 将是非常基本的，没有什么特别的，所以我没有包括它。

我的查询是

```
base.unitOfWork.Session.Query<ParentA>()
  .Where(x => x.Id == parentAId)
  .FetchMany(x => x.ChildrenA)
  .ThenFetchMany(x => x.ChildrenB)
  .FirstOrDefault(); 
```

**我期望发生的事情**

它将找到 1 个或 0 个父记录。如果它确实找到了一条记录，它将急切地加载所有 ChildrenA，然后加载所有 ChildrenB。

**怎么了**

它找到 1 个或 0 个父记录。然后，ChildrenA 和 ChildrenB 只需要 1 或 0 条记录。

为什么只为 ChildrenA 和 ChildrenB 获取第一个找到的记录？

如果我`FirstToDefault()`改为`.toList()`我得到我期望的一切，但我发现它没有意义，因为应该只有一个记录与该父记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T18:06:57.467

实际上你不需要 Where ...First 或 default 需要 lambda 表达式

```
 .FirstOrDefault(x => x.Id == parentAId). 
```

所以代替 Where ，使用上面的语句

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T18:01:14.587

尝试`.FirstOrDefault`直接移到`.Where`子句之后：

```
.Where(x => x.Id == parentAId).FirstOrDefault()... 
```

# file-upload - 使用 MVC4 Web-API 的文件上传表单：出现错误 101 (net::ERR_CONNECTION_RESET)：连接已重置。错误

> ID：14713862
> 
> 赞同：4
> 
> 时间：2013-02-05T17:57:48.757
> 
> 标签：file-upload, asp.net-mvc-4, asp.net-web-api, interrupted-exception, asp.net-web-api-routing

尝试使用 VS2010 访问 MVC4 Web-API 应用程序中的控制器操作时，出现网页不可用错误。我正在尝试上传一个小型（小于 1MB）的 pdf 文档，创建一个 byte[] 以传递给另一个服务。但是，我无法进入我的普通控制器或我的 api 控制器。我的应用程序有效，所有视图/部分/等。除了这个（带有文件上传表单的页面）之外，都显示得很好。这个视图是一个强类型的局部视图。

我尝试使用此处显示的方法：[上传文件 MVC 4 Web API .NET 4](https://stackoverflow.com/questions/13074791/upload-a-file-mvc-4-web-api-net-4)以及此处：http: [//blogs.msdn.com/b/henrikn/archive/2012/03/01/file-upload -and-asp-net-web-api.aspx](http://blogs.msdn.com/b/henrikn/archive/2012/03/01/file-upload-and-asp-net-web-api.aspx)并且它们都不起作用，因为我的操作属性找不到我的操作。无论我放 api/Documents 还是 Home/api/Documents 都行不通。所以我放弃了，回到我的 html 助手 beginform，希望它会以这种方式找到它……但它没有。因此，在放弃了花哨的 web-api 东西（无法异步工作）之后，我想我只是去老学校并通过表格传递文件，但我得到了同样的错误。我还尝试重新创建页面，调整我的 httphandlers，运行时调整，路由和 apiroutes，但完全不知所措。请帮忙！

我的用户界面：

![带有网址的表格](../Images/9f4dfbd816d7c6538ae284fc07e55d45.png) 我的错误： ![错误](../Images/33f2fd4f77b847b4d637bf8f59904952.png)

我的表格：

```
 <div class="tab-pane" id="addDoc">
        @using (Html.BeginForm("AddDocument", "Documents", FormMethod.Post, new { @class = "form-horizontal", @enctype = "multipart/form-data" }))
        {
            <label class="control-label" for="newFile">Upload : </label>
            <input name="newFile" type="file" />
            <input type="submit" value="Submit" class="btn btn-success"/>
        }
    </div> 
```

我的 API 控制器：我知道这没有意义，但我有一个断点来查看它是否到达这里，但它没有......

```
 [HttpPost]
    public AddDocumentResponse AddDocument(HttpPostedFileBase newFile)
    {
        AddDocumentResponse response = new AddDocumentResponse();
        return response;
    } 
```

我的普通控制器动作：

```
 [HttpPost]
    public ActionResult AddDocument(HttpPostedFileBase newFile)
    {
        return View("DevNotes");
    } 
```

我的 WebApiConfig：

```
 public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "Home/api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );
    } 
```

我的路线配置：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );

        routes.MapRoute(
            name: "Default2",
            url: "Home/{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    } 
```

我的 WebConfig 的一部分：

```
 <httpHandlers>
       <add path="*.less" verb="GET" type="dotless.Core.LessCssHttpHandler, dotless.Core" />
    </httpHandlers>
    <httpRuntime executionTimeout="99009" maxRequestLength="2097151"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T12:58:59.993

我想……在

@使用（Html.BeginForm（

```
 "AddDocument", //Action

                    "Documents",  // Controller (only controller name not 
                                   accept in web api route you written constant 
                                  string as ( Home/api/ then controller name) 
                                  so write like that...) 
```

//在这里你写你的URL想要去哪里而不是“文档”

// 如果你想要 web api 配置 ===> 写“Home/api/Documents”

// 如果你想在 Route Config ===> 为*第一个*“文档”为*第二个*“家庭/文档”

```
 FormMethod.Post, 
                    new { @class = "form-horizontal",
                          @enctype = "multipart/form-data" }))
    {   } 
```

在您的错误页面中，将 URL 视为 /Index/AddDocument....这是错误的方式....所以检查 URL 是否正确，并给出正确的控制器名称和在路由文件中定义的操作....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T15:14:36.197

由于安装了 Fiddler，我有时会遇到同样的错误。当它被配置为作为代理启动时，它会更改您的 LAN 配置，因此它可以作为代理工作，有时系统在没有 Fiddler 的情况下将无法工作。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-12T17:38:45.220

对我来说，问题出在 nginx 上：

```
http {
    client_max_body_size 0;
} 
```

我将 client_max_body_size 设置为 0。默认值为 1M。

来源：[https ://serverfault.com/a/401732](https://serverfault.com/a/401732)

# php - AJAX、PHP、JQUERY 下拉菜单

> ID：14713863
> 
> 赞同：0
> 
> 时间：2013-02-05T17:57:54.183
> 
> 标签：php, jquery, mysql, ajax, drop-down-menu

我有这个名为 ajax.php 的文件

```
<?php

    class AJAX {

        private $database = NULL;
        private $_query = NULL;
        private $_fields = array();
        public  $_index = NULL;
        const DB_HOST = "localhost";
        const DB_USER = "root";
        const DB_PASSWORD = "";
        const DB_NAME = "dd";

        public function __construct(){
            $this->db_connect();                    // Initiate Database connection
            $this->process_data();
        }

        /*
         *  Connect to database
        */
        private function db_connect(){
            $this->database = mysql_connect(self::DB_HOST,self::DB_USER,self::DB_PASSWORD);
            if($this->database){
                $db =  mysql_select_db(self::DB_NAME,$this->database);
            } else {
                echo mysql_error();die;
            }
        }

        private function process_data(){
            $this->_index = ($_REQUEST['index'])?$_REQUEST['index']:NULL;
            $id = ($_REQUEST['id'])?$_REQUEST['id']:NULL;
            switch($this->_index){
                case 'country':
                    $this->_query = "SELECT * FROM country GROUP BY Name";
                    $this->_fields = array('Code','Name');
                    break;
                case 'state':
                    $this->_query = "SELECT * FROM city WHERE CountryCode=$id";
                    $this->_fields = array('CountryCode','District');
                    break;
                case 'city':
                    $this->_query = "SELECT * FROM city WHERE CountryCode=$id";
                    $this->_fields = array('CountryCode','Name');
                    break;
                default:
                    break;
            }
            $this->show_result();
        }

        public function show_result(){
            echo '<option value="">Select '.$this->_index.'</option>';
            $query = @mysql_query($this->_query);
            while($result = @mysql_fetch_array($query)){
                $entity_id = $result[$this->_fields[0]];
                $enity_name = $result[$this->_fields[1]];
                echo "<option value='$entity_id'>$enity_name</option>";
            }
        }
    }

    $obj = new AJAX;

    ?> 
```

和 index.html 与这个 js 脚本

和形式

```
<form>
    <label>Select Country</label>
    <select id="country" onchange="load_options(this.value,'state');">
        <option value="">Select country</option>
    </select>
    &nbsp;&nbsp;&nbsp;
    <label>Select State</label>
    <select id="state" onchange="load_options(this.value,'city');">
        <option value="">Select state</option>
    </select>
    &nbsp;&nbsp;&nbsp;
    <label>Select city</label>
    <select id="city">
        <option value="">Select City</option>
    </select>
    <img src="loader.gif" id="loading" align="absmiddle" style="display:none;"/>
</form> 
```

国家选项是可见的，但是当我想选择国家时，它不是

我还有两张表国家和城市，在表城市中包括地区名称

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:31:01.243

您应该使用 jQuery 来更轻松地实现 ajax 回调。如果不经常更改，您可以将数据缓存在客户端计算机上。

加载框后，您可以参考此主题 [jQuery set selected value in option box](https://stackoverflow.com/questions/2468605/jquery-set-selected-value-in-option-box-once-the-box-has-been-loaded)

# android - Intent result, how to know who sent it?

> ID：14713874
> 
> 赞同：5
> 
> 时间：2013-02-05T17:58:34.153
> 
> 标签：android, android-intent

Is it possible to know which package or process sent the Intent result?

```
Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT); 
```

I found a way to know which apps are capable of handling this intent, but I also want to know which one was selected, or rather, which one returned the result. Is this possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:14:10.790

这取决于应用程序的开发方式。一些应用程序返回一个充满东西的 Intent 对象，其他的为空或 null。

```
 @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent i) {
         if (i!=null){        
            i.getPackage();
            i.getExtras();
            i.getData();
            i.getScheme();
            i.getType();
           }
        } 
```

尝试记录/读取[Intent](http://developer.android.com/reference/android/content/Intent.html)中的所有可能值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:20:42.977

您也可以尝试查看。`Logcat`它包含有关意图何时开始以及如何开始的信息。我尝试使用它来了解意图是否开始。

# ios - What is a team distributor according to Apple's Provisioning documentation?

> ID：14713876
> 
> 赞同：0
> 
> 时间：2013-02-05T17:58:38.833
> 
> 标签：ios, app-store-connect, provisioning

I am a team admin and I am trying to get Xcode to request and download a distribution (not development) certificate. However it appears to need to be a 'team distributor' in order to do this according to Apple documentation.

```
If you are the team distributor, Xcode requests and downloads your team’s distribution certificate, in addition to downloading your development certificate. 
```

[http://developer.apple.com/library/ios/#recipes/xcode_help-devices_organizer/articles/obtain_certificates_and_provisioning_profiles.html](http://developer.apple.com/library/ios/#recipes/xcode_help-devices_organizer/articles/obtain_certificates_and_provisioning_profiles.html)

I can't find team distributor anywhere else in the documentation. Can a team admin download a development certificate through Xcode?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:01:40.170

[正如文档](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/ManagingYourTeam/ManagingYourTeam.html)所定义的，在供应门户中只有三个角色。

团队成员、团队管理员和团队代理。代理高于管理员，但唯一的额外特权是能够接受法律文件。因此，任何团队管理员都可以下载 + 创建开发或分发证书，或接受任何团队成员的请求。

> 团队成员可以申请开发证书并下载开发配置文件。

# xpages - xpages 尝试获取文档 parentdoc 返回空错误

> ID：14713877
> 
> 赞同：0
> 
> 时间：2013-02-05T17:58:39.970
> 
> 标签：xpages

我正在尝试获取新响应文档的父文档，以便可以在 xpages 中复制表单继承的功能。以下是我的代码和返回的错误：

```
Error while executing JavaScript action expression
Script interpreter error, line=3, col=60: 'parentDoc' is null
JavaScript code

   1: if (document2.isNewNote()) {
   2: var parentDoc:NotesDocument = database.getDocumentByID(document2.getParentId());
   3: getComponent("immediateParentSubject1").setValue(parentDoc.getItemValueString("Subject"));
   4: } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T18:58:00.733

当我需要对变量“document”的父文档进行句柄时，我通常使用 dataContext 和 getParentDocumentUNID()。您可以将其用于新文档（尚未保存）：

```
<xp:this.dataContexts>
    <xp:dataContext var="parentDoc">
        <xp:this.value><![CDATA[#{javascript:
            try {
                if (document.isResponse()) {
                    return database.getDocumentByUNID(document.getDocument().getParentDocumentUNID());
                } else {
                    return "";
                }
            } catch(e) {
                return "";
        }}]]></xp:this.value>
    </xp:dataContext>
</xp:this.dataContexts> 
```

You can then use parentDoc in other controls and do `parentDoc.getItemValueString("Subject")` etc.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T18:50:52.930

`datasource.getParentId()`不会像您预期的那样返回 NoteID。它返回 UnID，这就是为什么你需要`database.getDocumentByUNID`像 Per 一样使用它。

另一种方法是从 URL 中获取父 UnID：

```
param.get("parentId") 
```

还可以考虑在打开子项时查找父主题。这样，它只存储在一个地方，这总是一件好事。

# mailmerge - Word 2007 ~ Aspose Skip Empty Cell

> ID：14713880
> 
> 赞同：0
> 
> 时间：2013-02-05T17:58:50.593
> 
> 标签：mailmerge, aspose

I am using Aspose with Word for a Mail Merge.

I have a 3x2 table as follows

```
<a>    <b>
<c>    <d>
<e>    <f> 
```

However under certain conditions one field might be blank, if this is the case I'd like to ommit the entire cell - i.e. not just have an empty cell. i.e.

```
<a>    <b>
<e>    <d>
       <f> 
```

so in the above example c is empty and thus not displayed?

Can this be done?

I have tried IF and blank MERGEFIELDS also NextIf.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T12:34:30.167

@乔恩，

您可能需要实现 IFieldMergingCallback 接口。事件处理程序“FieldMerging”可用于实现对邮件合并过程的自定义控制。例如，您可以检查传入 MergeField 的值是否为“null”或“空字符串”，然后基于此决定删除父 Cell。这是示例代码：

```
Document doc = new Document(@"C:\Temp\template.docx");
doc.MailMerge.FieldMergingCallback = new HandleMergeFields();
doc.MailMerge.Execute(new string[] { "a", "b", "c", "d", "e", "f" },
                        new object[] { "<a>", "<b>", "", "<d>", "<e>", "<f>" });
doc.Save(@"C:\Temp\out.doc");

private class HandleMergeFields : IFieldMergingCallback
{
    void IFieldMergingCallback.FieldMerging(FieldMergingArgs args)
    {
        DocumentBuilder builder = new DocumentBuilder(args.Document);
        if (string.IsNullOrEmpty(args.FieldValue.ToString()))
        {
            Field field = args.Field;
            Cell cell = field.Start.GetAncestor(NodeType.Cell) as Cell;
            // Remove the MergeField
            builder.MoveToMergeField(args.FieldName);
            //Remove the Cell
            cell.Remove();
        }
    } 
    void IFieldMergingCallback.ImageFieldMerging(ImageFieldMergingArgs e)
    {
        // Do nothing
    }
} 
```

# jquery - 将社交分享按钮添加到使用按钮助手的 Fancybox

> ID：14713881
> 
> 赞同：1
> 
> 时间：2013-02-05T17:58:52.643
> 
> 标签：jquery, fancybox, fancybox-2

我目前正在尝试将社交分享按钮集成到我的精美图片弹出窗口中。Fancybox 创建了一个[JsFiddle](http://jsfiddle.net/G5TC3/)来演示如何做到这一点……但我正在使用“帮助器”> `jquery.fancybox-buttons.js`（[请参见此处](http://fancyapps.com/fancybox/demo/)）。我如何结合这两种自定义解决方案，以便当fancybox图像弹出时它在下面有社交分享按钮（就像在JSFiddle中一样&有按钮助手？

这是我的 Fancybox Gallery 页面的 HTML 示例：

```
<div id="painting" class="content-pages">

<p>
    <a class="fancybox-buttons" href="painting/2011_b.jpg" data-fancybox-group="paintings" title="Sed vel sapien vel sem uno"><img src="painting/2011_s.jpg" alt="" /></a>

    <a class="fancybox-buttons" href="painting/beginnings-3_b.jpg" data-fancybox-group="paintings" title="Tegan Whitesel - Beginnings III"><img src="painting/beginnings-3_s.jpg" alt="" /></a>

    <a class="fancybox-buttons" href="painting/t-beginnings-i_b.jpg" data-fancybox-group="paintings" title="Tegan Whitesel - Beginnings I "><img src="painting/t-beginnings-i_s.jpg" alt="" /></a>

    <a class="fancybox-buttons" href="painting/t-beginnings-ii_b.jpg" data-fancybox-group="paintings" title="Tegan Whitesel - Beginnings II"><img src="painting/t-beginnings-ii_s.jpg" alt="" /></a>
</p>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:39:36.037

**首先**，您需要加载 js 和 css 按钮的帮助文件（位于下载的 helpers 子目录中。）

**其次**，将按钮助手选项添加到自定义脚本中。您可能希望禁用默认按钮`close`和`arrows`按钮，以便仅使用按钮助手。

所以你必须添加的代码应该是：

```
// other options
helpers: {
    title: {
        type: 'inside'
    }, //<-- add a comma to separate the following option
    buttons: {} //<-- add this for buttons
},
closeBtn: false, // disable default close
arrows: false    // disable default arrows 
```

查看相同的修改**[JSFIDDLE](http://jsfiddle.net/kmLWf/)**。

# akka - what is the difference between producer and regular actor?

> ID：14713882
> 
> 赞同：0
> 
> 时间：2013-02-05T17:58:52.883
> 
> 标签：akka, actor, producer

akka doc ([http://doc.akka.io/docs/akka/2.1.0/scala/camel.html](http://doc.akka.io/docs/akka/2.1.0/scala/camel.html)) shows that camel procedure is an actor:

```
class Orders extends Actor with Producer with Oneway {
    def endpointUri = "jms:queue:Orders"
}

val sys = ActorSystem("some-system")
val orders = sys.actorOf(Props[Orders]) 
```

what are the differences between a camel producer and a regular actor, for example, does producer has mailbox and dispatcher, which i can set in my code?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:34:30.800

生产者只是具有邮箱和调度程序的常规 Actor，但具有将接收到的消息发送到配置的端点的预定义行为。

# html - 为什么 tr:hover 不改变背景颜色

> ID：14713883
> 
> 赞同：4
> 
> 时间：2013-02-05T17:58:53.770
> 
> 标签：html, css, html-table

我对 CSS 有点陌生，并且遇到了这个小问题。当我将鼠标悬停在该行上时，我希望改变表格行的背景颜色。我已经编写了下面的代码，但不知何故只有悬停部分似乎不起作用。我曾尝试在 Google Chrome v24 和 Firefox v18 中查看。谁能说我哪里错了。

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Untitled Document</title>
<style>
    table.contacts
    { 
        width: 580px;
        background-color: #fafafa;
        border: 1px #000000 solid;
        border-collapse: collapse;
        border-spacing: 0px; 
    }

    .contacts th
    { 
        background-color: #99CCCC;
        font-family: Verdana;
        text-align: left;
        border-bottom:1px #000000 solid;
        font-weight: bold;
        font-size: 12px;
        padding:4px;
        margin:4px;
        color: #404040; 
    }

    .contacts td
    {
        border-bottom: 1px #6699CC dotted;
        text-align: left;
        font-family: Verdana, sans-serif, Arial;
        font-weight: normal;
        font-size: .7em;
        color: #404040;
        background-color: #fafafa;
        padding:4px;
        margin:4px;
    }

    table tr:hover
    {
        background-color:blue;
    }
</style>
</head>

<body>
    <table class="contacts" cellspacing="2">
        <tr>    
            <th>Subscription Scheme</th>
            <th>Amount</th>
        </tr>
        <tr>
            <td>Monthly Subscription(Family)</td>
            <td>Rs 200</td>
        </tr>
        <tr>
            <td>Monthly Subscription(Individuals)</td>
            <td>Rs 100</td>
        </tr>
        <tr>
            <td>Monthly Subscription(Company)</td>
            <td>Rs 500</td>
        </tr>
        <tr>
            <td>Yearly Subscription(Family)</td>
            <td>Rs 2000</td>
        </tr>
        <tr>
            <td>Yearly Subscription(Company)</td>
            <td>Rs 5000</td>
        </tr>
        <tr>
            <td>Festival Subscription</td>
            <td>Rs 1000</td>
        </tr>

    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T18:01:07.333

它正在工作，你只是没有看到它工作，因为`td`元素`background-color`隐藏`background-color`了`tr`元素。而是使用：

```
tr:hover td {
    background-color: blue;
} 
```

# jquery - How can you remove a dynamically created div with unique id?

> ID：14713884
> 
> 赞同：0
> 
> 时间：2013-02-05T17:58:56.990
> 
> 标签：jquery

I'm only going to post the code that's relevant. If you need my whole code, let me know.

Anyway, I have the following code:

```
 var deck = [];
 var c = 0;
$('#add').click(function(){
     var addToDeck = $('input[name=searchItem]').val();
     addToDeck = addToDeck.toLowerCase();
     deck.push(addToDeck);
   $('#save').append('<div id="cardList' + (c++) + '">' + database[deck[deck.length-1]].name + '</div>');
 }); 
```

Which dynamically adds divs with unique id's each time a certain button is pressed (ex: cardList1, cardList2, etc). Now, if the user clicks on some div with a particular id (say cardList2), I want to remove it from the list.

I tried something like this:

```
 $(document).on('click','#save', function(){
   $('#cardList' + 'c').remove();
  }); 
```

But it doesn't work. I think I'm in the right direction though.

Just to re-iterate, this is a card game deck building application... so I want to make it easier on a user by letting them remove a card that's already in their deck just by clicking on the div with the card id.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T18:03:16.580

In your second code example, `c` is not defined or does not have the value you expect. This should work though:

```
$('#save').on('click','[id^=cardList]', function(){
   $(this).remove();
}); 
```

It will listen to click events on all elements having an ID which starts with `cardList` and which are descendants of the element `#save` (instead of listening to clicks on `#save`). It makes simpler because `this` will just refer to the element that was clicked and you want to remove.

You could also give the elements an additional class and use it instead of the attribute-starts-with selector:

```
// for example
$('<div />', {
    id: 'cardList' + (c++), 
    'class': 'myclass', 
    text: database[deck[deck.length-1]].name
}).appendTo('#save');

// somewhere else

$('#save').on('click','.myclass', function(){
   $(this).remove();
}); 
```

You should also think about whether you need unique IDs at all.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T18:03:18.517

Create the new div as a jQuery object:

```
$('#save').append('<div>', {'id':'cardList' + (c++)}); 
```

Then it will be accesible.

# delphi - 保存 VirtualStringTree 节点数据

> ID：14713885
> 
> 赞同：2
> 
> 时间：2013-02-05T17:58:56.770
> 
> 标签：delphi, unicode, delphi-xe3, virtualtreeview, tvirtualstringtree

我正在尝试将项目从 D6 移动到 D-XE3。使用 VirtualStringTree 5.10 版本在 OnSaveNode 和 OnLoadEvents 中保存和加载树数据时出现垃圾。我可能没有正确处理 Unicode，但我可能还有其他一些无知：

```
procedure TfMain.vstGridSaveNode(Sender: TBaseVirtualTree; Node: PVirtualNode;
  Stream: TStream);
var
  Data: PStkData;
begin
  Data := Sender.GetNodeData(Node);

  //  Owned: boolean;
  Stream.Write(Data.Owned, SizeOf(boolean) );

  //  Symbol: string;
  Stream.Write(PChar(Data.Symbol)^, Length(Data.Symbol) * SizeOf(Char));

  //  AvgTarget: currency;
  //Stream.Write(Data.AvgTarget, SizeOf(currency));

  //  PE: double;
  Stream.Write(Data.PE, SizeOf(double));
end;

procedure TfMain.vstGridLoadNode(Sender: TBaseVirtualTree; Node: PVirtualNode;
  Stream: TStream);
var
  Data: PStkData;
begin
  Data := Sender.GetNodeData(Node);

  //Owned: boolean;
  Stream.Read(Data.Owned, SizeOf(boolean));

  //Symbol: string;
  Stream.Read(PChar(Data.Symbol)^, Length(Data.Symbol) * SizeOf(Char));

  //AvgTarget: currency;
  Stream.Read(Data.AvgTarget, SizeOf(currency));

  //PE: double;
  Stream.Read(Data.PE, SizeOf(double));
end; 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T18:26:18.550

当您写入字符数据时，您需要确保以您知道在加载时再次*读取多少的方式写入它。*你目前*只*写字符数据，所以你不知道以后需要再读多少。相反，您假设这`Symbol`已经是正确的长度，现在我已经指出，您可能意识到这是一个无效的假设。

写入字符串时，首先写入其长度，以便在加载时可以读取：

```
var
  SymbolLen: Integer;

SymbolLen := Length(Data.Symbol);
Stream.Write(SymbolLen, SizeOf(SymbolLen));
Stream.Write(PChar(Data.Symbol)^, Length(Data.Symbol) * SizeOf(Data.Symbol[1])); 
```

然后你可以阅读它：

```
Stream.Read(SymbolLen, SizeOf(SymbolLen));
SetLength(Data.Symbol, SymbolLen);
Stream.Read(PChar(Data.Symbol)^, SymbolLen * SizeOf(Data.Symbol[1])); 
```

# python - How to access Django method in a view

> ID：14713886
> 
> 赞同：1
> 
> 时间：2013-02-05T17:58:58.350
> 
> 标签：python, django

I have a model in Django with a method that I can't seem to access in the view. Here is the model:

```
class Realtor(models.Model):
    user = models.OneToOneField(User)
    team = models.ForeignKey(RealtorTeam, blank=True, null=True, default=None)
    is_showing_realtor = models.BooleanField(default=False)
    is_listing_realtor = models.BooleanField(default=False)

    def type(self):
        if self.is_showing_realtor and self.is_listing_realtor:
            return 'Showing and Listing'
        elif self.is_showing_realtor:
            return 'Showing'
        elif self.is_listing_realtor:
            return 'Listing'
        else:
            return '' 
```

Now, in the view, I try to query the model, including the method, like this:

```
q = Realtor.objects.all()
q = q.filter(user__first_name__icontains=first)
q = q.filter(user__last_name__icontains=last)
q = q.filter(team__name__icontains=team)
q = q.filter(user__email__icontains=email)
q = q.filter(type__icontains=type) 
```

The error I get is `Cannot resolve keyword 'type' into field. Choices are...`. I looked up a number of stackoverflow questions, and read through more of the Django docs, and I saw to add a field like this in the model:

```
type_display = (type,) 
```

But that didn't work. Do I have to query the is_showing_realtor and is_listing_realtor? Is there no way to query the method?

## More info

We are using Django_tables2 to display tables of models. We are able to access the `type` method with that, like this:

```
class RealtorTable(tables.Table):
    id = tables.Column()
    first_name = tables.Column(accessor='user.first_name', order_by='user.first_name')
    last_name = tables.Column(accessor='user.last_name', order_by='user.last_name')
    team = tables.Column()
    email = tables.Column(accessor='user.email', order_by='user.email')
    type = tables.Column(order_by='is_showing_realtor') 
```

But still, can't pass it to the view.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T18:01:16.840

`type`是一个[内置函数](http://docs.python.org/2/library/functions.html#type)python 的名称，在 django 中也是如此。我建议将您的函数重命名`listing_type`为避免任何冲突。

特别是，这条线

```
type_display = (type,) 
```

可能没有做你认为的那样。

[reptilicus](https://stackoverflow.com/users/1443118/reptilicus)是正确的，我没有在非字段属性上发现过滤器，这没有意义。您可以`listing_type`变成一个`CharField`with `choices=`set，然后`save()`在模型更改时使用一些自定义逻辑来设置它 - 或者您可以使用`property`

```
@def listing_type():
    doc = "The listing_type property."
    def fget(self):
        if self.is_showing_realtor and self.is_listing_realtor:
            return 'Showing and Listing'
        elif self.is_showing_realtor:
            return 'Showing'
        elif self.is_listing_realtor:
            return 'Listing'
        else:
            return ''
    def fset(self, value):
        self._listing_type = value
    def fdel(self):
        del self._listing_type
    return locals()
listing_type = property(**listing_type()) 
```

PS我还是不喜欢`type`:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T18:18:38.517

我不是 Django 专家，但我很确定您无法查询不是数据库中列的模型属性，而这正是您想要做的。也许尝试用它来装饰方法，`@property`使其像一个属性。

如果喜欢，你可以做一个列表理解

```
results = [m for m in query_set if m.type = "Showing and listing"] 
```

# vb.net - Application Working Directory (VB.NET)

> ID：14713887
> 
> 赞同：0
> 
> 时间：2013-02-05T17:59:01.310
> 
> 标签：vb.net, directory, windows-installer

I am linking few excel and word files with my application. There is a predefined folder structure that holds all these files. i.e.

`Base\Engineering\A.xlsx`

`Base\Sales\B.xlsx`

and so on.

Now I want to link the "Base" folder with my application.

My current stupid solution is, to ask user to browse to the "Base" folder every time the application loads.

*   What is the most efficient way to do this?

*   In the end I want to create an installer for my application. I wish to use Windows "Program Files" folder to host my folder structure. This way users do not have to search for the "Base" folder. How do I do this?

I am new to VB.NET.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:03:10.530

You want the All Users Application Data folder:

```
Environment.GetFolderPath(Environment.SpecialFolder.CommonApplicationData) 
```

There is also a per-User Application Data folder that you can reference. Which you need depends on what you're doing.

# javascript - 在breathjs的投影查询中导航树

> ID：14713892
> 
> 赞同：0
> 
> 时间：2013-02-05T17:59:18.300
> 
> 标签：javascript, breeze

在 EntityFramework 中，我可以进行这种投影查询：

```
return currentQuery.Select(
     x => new PickSearchableItem()
              {
                  Text = x.FullName,
                  ID = x.ID,
                  PersonAddress = x.PersonAddresses
                                   .FirstOrDefault( y => y.IsPrimary == true)
                                   .Address1,
               }); 
```

有没有办法用微风复制这种行为客户端？我们遇到的麻烦是在投影的选择中导航树。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:15:32.663

Breeze 客户端投影目前仅限于相当简单的属性投影，可以选择应用任何标准 odata 函数。您的查询有点复杂。

但是，您可以在服务器上定义大部分这种投影，并将投影的 IQueryable 公开为 Object 的 IQueryable，并让客户端对此进行过滤。

这有意义吗？

# java - 用于独立应用程序的谷歌身份验证 API

> ID：14713893
> 
> 赞同：0
> 
> 时间：2013-02-05T17:59:23.020
> 
> 标签：java, authentication, google-api-java-client

我对谷歌的身份验证 API 感到困惑。我希望我的应用程序有自己的帐户和谷歌驱动器（例如，将其用作数据库）。它的谷歌驱动器也应该可以从网络界面访问——出于维护和调试的原因（因此服务帐户不是一个选项）。我应该如何登录？我应该选择哪种身份验证类型？

我不希望用户登录他们的谷歌账户——他们甚至不应该知道下面有一个谷歌。

# python - 使用 python 的 Google App Engine 自定义插件

> ID：14713897
> 
> 赞同：1
> 
> 时间：2013-02-05T17:59:44.353
> 
> 标签：python, google-app-engine, sass

我将如何为 python（谷歌应用引擎）安装插件？可以说我想用这个： http: [//pypi.python.org/pypi/pyScss](http://pypi.python.org/pypi/pyScss)？我可以使用 easy_install 吗？如何使用？我有点新，似乎找不到任何关于它的真实信息。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T22:06:28.563

就个人而言，我更喜欢使用[buildout](https://stackoverflow.com/questions/10759814/buildout-google-app-engine)包含它，否则您必须将其解压缩到将上传到 App Engine 的文件夹中。

请注意，只有 python 可以在 App Engine 上运行，pyScss 中的可选 C 扩展将不起作用。

# mysql - MySQL对行组进行排序

> ID：14713910
> 
> 赞同：1
> 
> 时间：2013-02-05T18:00:31.950
> 
> 标签：mysql, group-by, foreign-keys, sql-order-by, hierarchical-data

我有一个表格*菜单*，其中包含通过外键引用同一表格中其他行的行。
这里的表：

```
+----+---------------+--------+
| id | title         | parent |
+----+---------------+--------+
| 1  | Enseignements | NULL   |
| 2  | Juments       | 4      |
| 3  | Étalons       | 4      |
| 4  | Animaux       | NULL   |
| 5  | Tarifs        | 1      |
+----+---------------+--------+ 
```

我想根据层次结构和字母顺序对行进行分组，如下所示：

```
+----+---------------+--------+
| id | title         | parent |
+----+---------------+--------+
| 4  | Animaux       | NULL   |
| 3  | Étalons       | 4      |
| 2  | Juments       | 4      |
| 1  | Enseignements | NULL   |
| 5  | Tarifs        | 1      |
+----+---------------+--------+ 
```

我只是设法将来自同一分支的项目分组。子级项目按*title*排序。事实上，我希望所有的第一级项目也按*title*排序，像这样：

```
+----+---------------+--------+
| id | title         | parent |
+----+---------------+--------+
| 1  | Enseignements | NULL   |
| 5  | Tarifs        | 1      |
| 4  | Animaux       | NULL   |
| 3  | Étalons       | 4      |
| 2  | Juments       | 4      |
+----+---------------+--------+ 
```

使用代码：

```
SELECT title, COALESCE(parent, id), parent
FROM menu
GROUP BY COALESCE(parent, id), title 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T06:06:46.670

[SQL小提琴](http://sqlfiddle.com/#!2/e4368/12)

**MySQL 5.5.30 架构设置**：

```
CREATE TABLE Table1
    (`id` int, `title` varchar(13), `parent` varchar(4))
;

INSERT INTO Table1
    (`id`, `title`, `parent`)
VALUES
    (1, 'Enseignements', NULL),
    (2, 'Juments', '4'),
    (3, 'Étalons', '4'),
    (4, 'Animaux', NULL),
    (5, 'Tarifs', '1')
; 
```

**查询 1**：

```
SELECT title, COALESCE(parent, id), parent
FROM Table1
GROUP BY 2,1
order by COALESCE(parent, id) desc,title asc 
```

**[结果](http://sqlfiddle.com/#!2/e4368/12/0)**：

```
|         TITLE | COALESCE(PARENT, ID) | PARENT |
-------------------------------------------------
|       Animaux |                    4 | (null) |
|       Étalons |                    4 |      4 |
|       Juments |                    4 |      4 |
| Enseignements |                    1 | (null) |
|        Tarifs |                    1 |      1 | 
```

# php - Symfony2 在 YAML 配置中使用 PHP 类常量？

> ID：14713913
> 
> 赞同：20
> 
> 时间：2013-02-05T18:00:44.210
> 
> 标签：php, symfony, yaml

我知道这可能是不可能的，但是有没有一种干净的方法可以在 YAML 配置/服务/等中使用 PHP 类常量。Symfony2 的文件？

例如，如果我有这个：

```
namespace My\Bundle\DependencyInjection;

class MyClass
{
    const MY_CONST = 'cookies';
} 
```

这样的事情可能吗（在 .yml 文件中）：

```
services:
    my_service:
        class: Some\Class
        arguments:
            - %My\Bundle\DependencyInjection\MyClass::MY_CONST% 
```

这对于帮助保持两者之间的一致性大有帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-09-15T18:58:00.553

对于 Symfony >=2.4，您可以使用[表达式语言](http://symfony.com/doc/2.4/book/service_container.html#using-the-expression-language)

例子：

```
'@=constant("Symfony\\Bridge\\Monolog\\Logger::INFO")' 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-07-08T18:24:41.783

从 Symfony 3.2 开始，还可以使用特殊`!php/const:`语法在 YAML 文件中使用 PHP 常量：

```
parameters:
    bar: !php/const:PHP_INT_MAX 
```

有关更多详细信息，请参阅[Symfony 博客文章](http://symfony.com/blog/new-in-symfony-3-2-php-constants-in-yaml-files)。

* * *

**请注意**：在 Symfony 4 中，语法[略有改变](https://github.com/symfony/symfony/issues/25534#issuecomment-352333648)。您必须使用空格而不是双冒号，例如：

```
parameters:
    bar: !php/const PHP_INT_MAX 
```

否则，您将收到带有消息“注意：未初始化的字符串偏移”的 FileLoaderLoadException。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-02-06T09:40:24.353

在 Symfony 3.2 之前的版本中，注入 PHP-constants 仅适用于 XML：

```
<parameter key="my_service.my_const" type="constant">My\Bundle\DependencyInjection\MyClass::MY_CONST</parameter> 
```

如果你想保留你的 yml 文件，你可以将 xml 文件导入到你的 services.yml 中。混合配置样式可能有点难看，但据我所知，这是唯一的方法。

如果这对您不起作用，我对您的问题的评论适用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-25T15:12:53.600

应该可以在配置和类中将参数作为纯“文本”插入，`__construct($constant1)`然后通过`constant($constant1)`函数通过变量请求常量。

但是我不确定这里的全局常量，因为它们可能在使用时没有定义，但是对于具有整个命名空间的类常量来说应该不是问题，因为命名空间定位器在调用类的时候已经定义了。

示例配置：

```
services:
    my_service:
        class: Some\Class
    arguments:
        - 'My\Bundle\DependencyInjection\MyClass::MY_CONST' 
```

和示例类方法：

```
public function __construct($arg1)
{
    $myRequiredConstantValue = constant($arg1);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-04T09:22:38.597

这是可能的，但只有在使用 eval'd 代码时，这通常是不受欢迎的。

给定一个类常量 Permission::ACCESS_NONE 例如，您可以在 yaml 文件中执行以下操作：

```
permission: ACCESS_NONE 
```

以及解析 yaml 的代码中的以下内容：

`eval("return \The\Complete\Namespace\To\Permission::".$context['permission'].";");`

这当然是丑陋的代码，但它确实有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-09T10:28:29.170

```
arguments:
      - key_1: "value_1"
        !php/const App\Example::CONSTANT_1: 'value_0' 
```

[github 问题：使用 PHP 类常量作为 YAML 哈希中的键](https://github.com/symfony/symfony/issues/36624)

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2013-02-05T18:06:13.553

这应该工作

```
arguments:
 - <?php echo My\Bundle\DependencyInjection\MyClass::MY_CONST."\n" ?> 
```

# android - Android TCP 发送文件。Android 客户端将图像发送到 Java 服务器。发不了图。该怎么办？

> ID：14713917
> 
> 赞同：2
> 
> 时间：2013-02-05T18:01:01.047
> 
> 标签：android, sockets, tcp

我正在 Android SDK 上创建一个简单的应用程序。我创建了一个 Android 客户端和 Java 服务器。现在我创建的是 Android 应用程序从图库中浏览图像并在屏幕上显示路径。此外，它还显示已显示的图像。要首先启动发送连接，我运行 Java 服务器。然后我在手机上运行该应用程序。我选择照片，然后按发送。应用程序在推送后出现问题并强制关闭。下面你可以看到我的代码。有任何想法吗？

安卓客户端

```
package com.example.workingclient;

import java.io.BufferedInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.io.OutputStream;
import java.net.Socket;
import java.net.UnknownHostException;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;

public class SendfileActivity extends Activity {
    /** Called when the activity is first created. */

    private static final int SELECT_PICTURE = 1;

    private String selectedImagePath;
    private ImageView img;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        System.out.println("34");
        img = (ImageView) findViewById(R.id.ivPic);
        System.out.println("36");
        ((Button) findViewById(R.id.bBrowse))
                .setOnClickListener(new OnClickListener() {
                    public void onClick(View arg0) {
                        System.out.println("40");
                        Intent intent = new Intent();
                        intent.setType("image/*");
                        intent.setAction(Intent.ACTION_GET_CONTENT);
                        startActivityForResult(
                                Intent.createChooser(intent, "Select Picture"),
                                SELECT_PICTURE);
                        System.out.println("47");
                    }
                });
        ;
        System.out.println("51");
        Button send = (Button) findViewById(R.id.bSend);
        final TextView status = (TextView) findViewById(R.id.tvStatus);

        send.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Socket sock;
                try {
                    sock = new Socket("192.168.0.3", 27015); 
                    System.out.println("Connecting...");

                     // sendfile
                          File myFile = new File (selectedImagePath); 
                          byte [] mybytearray  = new byte [(int)myFile.length()];
                          FileInputStream fis = new FileInputStream(myFile);
                          BufferedInputStream bis = new BufferedInputStream(fis);
                          bis.read(mybytearray,0,mybytearray.length);
                          OutputStream os = sock.getOutputStream();
                          System.out.println("Sending...");
                          os.write(mybytearray,0,mybytearray.length);
                          os.flush();

                        sock.close();
                } catch (UnknownHostException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        });
    }
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == RESULT_OK) {
            if (requestCode == SELECT_PICTURE) {
                Uri selectedImageUri = data.getData();
                selectedImagePath = getPath(selectedImageUri);
                TextView path = (TextView) findViewById(R.id.tvPath);
                path.setText("Image Path : " + selectedImagePath);
                img.setImageURI(selectedImageUri);
            }
        }
    }

    public String getPath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }
} 
```

安卓主.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tvStatus"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="hello" />

    <TextView
        android:id="@+id/tvPath"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Path: " />

    <Button
        android:id="@+id/bBrowse"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Browse" >
    </Button>

    <Button
        android:id="@+id/bSend"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Send" />

    <ImageView
        android:id="@+id/ivPic"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </ImageView>

</LinearLayout> 
```

安卓AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.workingclient"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.workingclient.SendfileActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

Java 服务器

```
import java.io.*;
import java.net.*;

public class FileServer {

    public static void main(String[] args) throws IOException {
        int filesize = 6022386; // filesize temporary hardcoded

        long start = System.currentTimeMillis();
        int bytesRead;
        int current = 0;

        // create socket
        ServerSocket servsock = new ServerSocket(27015);
        while (true) {
            System.out.println("Waiting...");

            Socket sock = servsock.accept();
            System.out.println("Accepted connection : " + sock);

            // receive file
            byte[] mybytearray = new byte[filesize];
            InputStream is = sock.getInputStream();
            FileOutputStream fos = new FileOutputStream(
                    "C:\\Users\\5750G\\Desktop\\Test.jpg"); // destination
                                                                    // path and
                                                                    // name of
                                                                    // file
            BufferedOutputStream bos = new BufferedOutputStream(fos);
            bytesRead = is.read(mybytearray, 0, mybytearray.length);
            current = bytesRead;

            // thanks to A. Cádiz for the bug fix
            do {
                bytesRead = is.read(mybytearray, current,
                        (mybytearray.length - current));
                if (bytesRead >= 0)
                    current += bytesRead;
            } while (bytesRead > -1);

            bos.write(mybytearray, 0, current);
            bos.flush();
            long end = System.currentTimeMillis();
            System.out.println(end - start);
            bos.close();

            sock.close();
        }
    }

} 
```

错误

```
02-05 17:26:21.871: I/Start Server Button Clicked(22924): yipee
02-05 17:26:21.871: D/AndroidRuntime(22924): Shutting down VM
02-05 17:26:21.871: W/dalvikvm(22924): threadid=1: thread exiting with uncaught exception (group=0x40c5e1f8)
02-05 17:26:21.876: E/AndroidRuntime(22924): FATAL EXCEPTION: main
02-05 17:26:21.876: E/AndroidRuntime(22924): android.os.NetworkOnMainThreadException
02-05 17:26:21.876: E/AndroidRuntime(22924):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
02-05 17:26:21.876: E/AndroidRuntime(22924):    at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
02-05 17:26:21.876: E/AndroidRuntime(22924):    at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
02-05 17:26:21.876: E/AndroidRuntime(22924):    at libcore.io.IoBridge.connect(IoBridge.java:112)
02-05 17:26:21.876: E/AndroidRuntime(22924):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
02-05 17:26:21.876: E/AndroidRuntime(22924):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)
02-05 17:26:21.876: E/AndroidRuntime(22924):    at java.net.Socket.startupSocket(Socket.java:566)
02-05 17:26:21.876: E/AndroidRuntime(22924):    at java.net.Socket.tryAllAddresses(Socket.java:127)
02-05 17:26:21.876: E/AndroidRuntime(22924):    at java.net.Socket.<init>(Socket.java:177)
02-05 17:26:21.876: E/AndroidRuntime(22924):    at java.net.Socket.<init>(Socket.java:149)
02-05 17:26:21.876: E/AndroidRuntime(22924):    at com.example.workingclient.SendfileActivity$2.onClick(SendfileActivity.java:93)
02-05 17:26:21.876: E/AndroidRuntime(22924):    at android.view.View.performClick(View.java:3627)
02-05 17:26:21.876: E/AndroidRuntime(22924):    at android.view.View$PerformClick.run(View.java:14329)
02-05 17:26:21.876: E/AndroidRuntime(22924):    at android.os.Handler.handleCallback(Handler.java:605)
02-05 17:26:21.876: E/AndroidRuntime(22924):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-05 17:26:21.876: E/AndroidRuntime(22924):    at android.os.Looper.loop(Looper.java:137)
02-05 17:26:21.876: E/AndroidRuntime(22924):    at android.app.ActivityThread.main(ActivityThread.java:4511)
02-05 17:26:21.876: E/AndroidRuntime(22924):    at java.lang.reflect.Method.invokeNative(Native Method)
02-05 17:26:21.876: E/AndroidRuntime(22924):    at java.lang.reflect.Method.invoke(Method.java:511)
02-05 17:26:21.876: E/AndroidRuntime(22924):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
02-05 17:26:21.876: E/AndroidRuntime(22924):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
02-05 17:26:21.876: E/AndroidRuntime(22924):    at dalvik.system.NativeStart.main(Native Method)
02-05 17:26:47.916: I/Process(22924): Sending signal. PID: 22924 SIG: 9
02-05 17:36:15.351: I/System.out(23357): 34
02-05 17:36:15.351: I/System.out(23357): 36
02-05 17:36:15.351: I/System.out(23357): 51
02-05 17:36:15.416: D/CLIPBOARD(23357): Hide Clipboard dialog at Starting input: finished by someone else... ! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:46:29.563

你有一个 NetworkOnMainThreadException。解决方案是将上传代码放在自己的线程或 AsyncTask 中。

# lua - Corona 对象中的更改场景保留在屏幕上

> ID：14713926
> 
> 赞同：1
> 
> 时间：2013-02-05T18:01:23.697
> 
> 标签：lua, coronasdk, corona-storyboard

我一直在修改记忆匹配游戏中的代码以使用场景、声音和 2d 表格。添加场景是困难的部分。我将其设置为从我的 2d 表中随机选择项目。将它们加载到临时表中，将它们随机播放 shuffle()，然后 boardSet(); 加载他们的声音并将它们放在屏幕上。基本上游戏结束后，我希望场景重新加载或返回菜单重新开始。一遍又一遍地选择随机数据元素。{}

我已尝试返回菜单或转到重复的场景，但是我似乎无法正确卸载我的二维数组创建的对象，因为我无法正确地将每个项目添加到显示组中。我已经尝试了我能想到的一切。现在我的游戏循环设置为再次添加游戏，我想在找到一场比赛后重新开始游戏。

这个链接是我相信有关处理表格和组的信息的正确方向的开始。我仍然不知道如何循环遍历我的 2d 表以将所有内容包含在一个组中，然后正确卸载它。

[http://developer.coronalabs.com/content/application-programming-guide-graphics-and-drawing#Variable_References](http://developer.coronalabs.com/content/application-programming-guide-graphics-and-drawing#Variable_References)

```
---------------------------------------------------------------------------------
--
-- level1.lua
--
---------------------------------------------------------------------------------

local storyboard = require( "storyboard" )
local scene = storyboard.newScene()
local widget = require "widget"

---------------------------------------------------------------------------------
-- BEGINNING OF YOUR IMPLEMENTATION
---------------------------------------------------------------------------------

local image, text1, text2, text3, memTimer
-- forward declarations and other locals
local againBtn

-- 'onRelease' event listener for playBtn
local function onPlayBtnRelease()

    -- go to level1.lua scene

    storyboard.gotoScene( "menu", "fade", 500 )

    return true -- indicates successful touch
end

-- Preload the sound file (needed for Android)
--
local playBeep = function( testSound )
            media.playEventSound( testSound )
end
---Preload sounds

ki = audio.loadSound("ki-nawaneyoo.mp3")
u = audio.loadSound("u.mp3")
mayuhoo = audio.loadSound("mayuhoo.mp3")

--End Sound  Test

--Set Global width and height variables
_W = display.contentWidth;
_H = display.contentHeight;

---Count number of correct matches
local matchCount = 0;

--Hide status bar
display.setStatusBar(display.HiddenStatusBar);

--Declare a totalButtons variable to track number of buttons on screen
local totalButtons = 0

--Declare variable to track button select
local secondSelect = 0
local checkForMatch = false

--Declare Data Table
local data = {}
--Load objects into data
data[1] = {}
data[1].title = "Naka"
data[1].subtitle = "a"
data[1].image = "a.png"
data[1].image1 = "ear.png"
data[1].sound = "naka-ear.caf"
data[1].sound1 = "naka-ear.mp3"

data[2] = {}
data[2].title = "Aapuhu"
data[2].subtitle = "aa"
data[2].image = "aa.png"
data[2].image1 = "eyebrow.png"
data[2].sound = "aapuhu-eyebrow.caf"
data[2].sound1 = "aapuhu-eyebrow.mp3"

data[3] = {}
data[3].title = "Ego"
data[3].subtitle = "Ego"
data[3].image = "e.png"
data[3].image1 = "tongue.png"
data[3].sound = "ego-tongue.caf"
data[3].sound1 = "ego-tongue.mp3"

data[4] = {}
data[4].title = "Kamoo"
data[4].subtitle = "kamoo"
data[4].image = "ee.png"
data[4].image1 = "chin.png"
data[4].sound = "kamoo-chin.caf"
data[4].sound1 = "kamoo-chin.mp3"

data[5] = {}
data[5].title = "Kowpa"
data[5].subtitle = "ego"
data[5].image = "leg.png"
data[5].image1 = "leg.png"
data[5].sound = "kowpa-leg.caf"
data[5].sound1 = "kowpa-leg.mp3"

data[6] = {}
data[6].title = "Mae"
data[6].subtitle = "kwa"
data[6].image = "hand.png"
data[6].image1 = "hand.png"
data[6].sound = "mae-hand.caf"
data[6].sound1 = "mae-hand.mp3"

data[7] = {}
data[7].title = "Nodo"
data[7].subtitle = "kwe"
data[7].image = "kwe.png"
data[7].image1 = "throat.png"
data[7].sound = "nodo-throat.caf"
data[7].sound1 = "nodo-throat.mp3"

data[8] = {}
data[8].title = "Matogo"
data[8].subtitle = "kwe"
data[8].image = "kwe.png"
data[8].image1 = "thumb.png"
data[8].sound = "matogo-thumb.caf"
data[8].sound1 = "matogo-thumb.mp3"

data[9] = {}
data[9].title = "Matzehe"
data[9].subtitle = "kwe"
data[9].image = "kwe.png"
data[9].image1 = "elbow.png"
data[9].sound = "matzehe-eblow.caf"
data[9].sound1 = "matzehe-elbow.mp3"

data[10] = {}
data[10].title = "Kuku"
data[10].subtitle = "kwe"
data[10].image = "kwe.png"
data[10].image1 = "foot.png"
data[10].sound = "kuku-foot.caf"
data[10].sound1 = "kuku-foot.mp3"

--Declare button, buttonCover, and buttonImages table
local tableCopy = {}
local buttonImages = {}

--Shuffle data table
--local shuffleSet = function()
--Shuffle data table
math.randomseed (os.time())
local function shuffle(a)
        local n = #a
        local t
        local k
        while(n > 0) do
                t = a[n]
                k = math.random(n)
                a[n] = a[k]
                a[k] = t
                n = n - 1
        end
        return a
end

local tableCopy = shuffle(data);

local button = {}
local buttonCover = {}

--Choose six random objects from data to be used in game.
local firstSix = {}
for i = 1,6 do
    firstSix[i] = tableCopy[i];
end
local buttonImages = {firstSix[1],firstSix[1],firstSix[2],firstSix[2],firstSix[3],firstSix[3],firstSix[4],firstSix[4],firstSix[5],firstSix[5],firstSix[6],firstSix[6]}
--end

--Declare and prime a last button selected variable
local lastButton;-- = display.newImage("1.png");    
--lastButton.myName = 1;
--

--Set up simple off-white background

--Notify player if match is found or not
local matchText = display.newText(" ", 0, 0, native.systemFont, 65)
matchText:setReferencePoint(display.CenterReferencePoint)
matchText:setTextColor(255, 255, 255)
matchText.x = _W/2

--
--Set starting point for button grid
local x = -20

local matchesFound = 0;

--Set up game function
local function game(object, event)
    if(event.phase == "began") then             
        if(checkForMatch == false and secondSelect == 0) then
            --Flip over first button
            buttonCover[object.number].isVisible = false;
            audio.play(object.sound);
            lastButton = object
            checkForMatch = true            
        elseif(checkForMatch == true and object.number ~= lastButton.number) then
            if(secondSelect == 0) then
                --Flip over second button
                buttonCover[object.number].isVisible = false;
                secondSelect = 1;
                --If buttons do not match, flip buttons over
                if(lastButton.myName ~= object.myName) then
                    audio.play(object.sound);
                    timer.performWithDelay(1000,function()
                    matchText.text = "Ki Nawa'neyoo";
                    audio.play(ki); end,1)

                    timer.performWithDelay(2500, function()                     
                        matchText.text = " ";
                        checkForMatch = false;
                        secondSelect = 0;
                        buttonCover[lastButton.number].isVisible = true;
                        buttonCover[object.number].isVisible = true;
                            end, 1)         

                --If buttons DO match, remove buttons
                elseif(lastButton.myName == object.myName) then
                    matchText.text = "U " .. object.myName .. " Mayuhoo";

                            audio.play(u)   

                            timer.performWithDelay(750,function()
                            audio.play(object.sound); end, 1)

                            timer.performWithDelay(1500,function()
                            audio.play(mayuhoo); end, 1)

                            timer.performWithDelay(2400, function() 

                            matchText.text = " ";
                            checkForMatch = false;
                            secondSelect = 0;
                            lastButton:removeSelf();
                            object:removeSelf();
                            buttonCover[lastButton.number]:removeSelf();
                            buttonCover[object.number]:removeSelf();
                            matchesFound = matchesFound + 1;
                            timer.performWithDelay(250, function()
                                if (matchesFound == 1) then
                            matchText.text = " Play Again? ";
                            againBtn.isVisible = true;

                            -- all display objects must be inserted into group
                            --group:insert( playBtn )
                            end
                            end, 1)
                            end, 1)

                end             
            end         
        end
    end

end
--]]
-- Touch event listener for background image
--[[
local function onSceneTouch( self, event )
    if event.phase == "began" then

        storyboard.gotoScene( "scene2", "slideLeft", 800  )

        return true
    end
end
--]]

-- Called when the scene's view does not exist:
function scene:createScene( event )
    local screenGroup = self.view

    local image = display.newImageRect( "bg.png", display.contentWidth, display.contentHeight )
    image:setReferencePoint( display.TopLeftReferencePoint )
    image.x, image.y = 0, 0

    screenGroup:insert( image )
    local function boardSet()
for count = 1,3 do
    x = x + 100 * 2
    y = 20 *2

    for insideCount = 1,4 do
        y = y + 90 * 2

        --Assign each image a random location on grid
        local temp = math.random(1,#buttonImages)
        button[count] = display.newImageRect(buttonImages[temp].image1, 150, 150);              

        --Position the button
        button[count].x = x;
        button[count].y = y;        

        --Give each a button a name
        button[count].myName = buttonImages[temp].title
        -- Preload the sound file (needed for Android)

        --Give each button a sounds

        soundID = audio.loadSound(buttonImages[temp].sound1)

        button[count].sound = soundID
        button[count].sound1 = soundID
        button[count].number = totalButtons

        --Remove button from buttonImages table
        table.remove(buttonImages, temp)

        --Set a cover to hide the button image
        buttonCover[totalButtons] = display.newImageRect("button.png", 150, 150);
        buttonCover[totalButtons].x = x; buttonCover[totalButtons].y = y;
        --screenGroup:insert(button[count].)
        totalButtons = totalButtons + 1

        --Attach listener event to each button
        button[count].touch = game      
        button[count]:addEventListener( "touch", button[count] )

    end
end

end
boardSet();
end

-- Called immediately after scene has moved onscreen:
function scene:enterScene( event )
againBtn = widget.newButton{
                            label="Play Again?",
                            fontSize = 25,
                            labelColor = { default={255}, over={128} },
                            default="button1.png",
                            over="button-over.png",
                            width=250, height=100,
                            onRelease = onPlayBtnRelease    -- event listener function
                            }
                            againBtn:setReferencePoint( display.CenterReferencePoint )
                            againBtn.x = display.contentWidth * 0.5
                            againBtn.y = display.contentHeight - 125
                            againBtn.isVisible = false

    print( "1: enterScene event" )

    -- remove previous scene's view
end
-- Called when scene is about to move offscreen:
function scene:exitScene( event )

    print( "1: exitScene event" )
    if againBtn then
        matchText.text = " "
        againBtn:removeSelf()   -- widgets must be manually removed
        button = nil
        buttonCover = nil
        firstSix = nil
        data = nil
        tableCopy = nil
        buttonImages = nil
        againBtn = nil

    end

end

-- Called prior to the removal of scene's "view" (display group)
function scene:destroyScene( event )
    local screenGroup = self.view
    storyboard.removeScene();
    --storyboard.purgeScene( "level1" )

    print( "((destroying scene 1's view))" )
end

---------------------------------------------------------------------------------
-- END OF YOUR IMPLEMENTATION
---------------------------------------------------------------------------------

-- "createScene" event is dispatched if scene's view does not exist
scene:addEventListener( "createScene", scene )

-- "enterScene" event is dispatched whenever scene transition has finished
scene:addEventListener( "enterScene", scene )

-- "exitScene" event is dispatched before next scene's transition begins
scene:addEventListener( "exitScene", scene )

-- "destroyScene" event is dispatched before view is unloaded, which can be
-- automatically unloaded in low memory situations, or explicitly via a call to
-- storyboard.purgeScene() or storyboard.removeScene().
scene:addEventListener( "destroyScene", scene )

---------------------------------------------------------------------------------

return scene 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-01T10:24:26.030

是的，这很简单。

这是一个例子（假设你已经实现了故事板）

```
function scene:createScene(event)
    screenGroup = self.view
    local image = display.newImage("image.png")
    screenGroup:insert(image)
end 
```

现在一切都会好起来的:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T12:20:22.043

Add all the display objects to a group.`local myGroup = display.newGroup(); local img = display.newImage("yourimage.png"); myGroup:insert(img);` For example

If you follow this method, all display objects will not be flushed out of memory when you change the screen.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T21:14:11.403

使用电晕情节提要时，您需要将显示对象添加到组中。例如，您需要将所有显示对象添加到 screenGroup 中，以便在更改场景时将其删除。

# windows-8 - 向 WinJS.Binding.converter() 函数发送多个参数

> ID：14713927
> 
> 赞同：3
> 
> 时间：2013-02-05T18:01:26.733
> 
> 标签：windows-8, winjs

有没有办法向一个函数发送多个参数`WinJS.Binding.converter()`？考虑以下数据和输出：

```
 { contactName: "Tara Miller",  mainNumber: "555-405-6190", alternateNumber: "555-209-1927" },
        { contactName: "Bryan Bond",                               alternateNumber: "555-574-4270" },
        { contactName: "Jenna Siever", mainNumber: "555-843-8823", alternateNumber: "555-799-5424" }, 
```

![在此处输入图像描述](../Images/faf4ca181c6eb2f883e2f83952a02ae8.png)

这是HTML。`MyData.chooseBestNumber`转换器函数用于显示一个人的主要电话号码，或者如果他们没有主要号码，则显示“无主要号码” ：

```
<div id="listViewTemplate" data-win-control="WinJS.Binding.Template">
    <div class="contactCard">
        <div data-win-bind="innerText: contactName"></div>
        <div data-win-bind="innerText: mainNumber MyData.chooseBestNumber"></div>
    </div>
</div> 
```

这是定义转换器功能的JS：

```
WinJS.Namespace.define("MyData", {
    chooseBestNumber: WinJS.Binding.converter(function (mainNumber) {
        if (mainNumber) return mainNumber;
        else return "no main number";
    }),
}); 
```

以下是我最终希望能够做的...将多个参数传递给转换器函数，以便我可以返回主编号（如果已定义）、备用编号（作为后备），或一条消息（如果一切都失败了）：

```
WinJS.Namespace.define("MyData", {
    chooseBestNumber: WinJS.Binding.converter(function (mainNumber, alternateNumber) {
        if (mainNumber) return mainNumber;
        else if (alternateNumber) return alternateNumber; 
        else return "no phone numbers";
    }),
}); 
```

是否可以向一个函数发送多个参数`WinJS.Binding.converter()`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T19:53:54.667

您实际上可以将您的电话号码 div 绑定到`this`关键字，这将有效地`innerText`将该 div 的属性绑定到整个模型对象。这样，在您的转换器中，您就可以访问整个模型。

因此，您更新后的代码将如下所示：

**HTML**

```
<div id="listViewTemplate" data-win-control="WinJS.Binding.Template">
    <div class="contactCard">
        <div data-win-bind="innerText: contactName"></div>
        <div data-win-bind="innerText: this MyData.chooseBestNumber"></div>
    </div>
</div> 
```

**JavaScript 转换器**

```
WinJS.Namespace.define("MyData", {
    chooseBestNumber: WinJS.Binding.converter(function (model) {
        if (model && model.mainNumber) return mainNumber;
        else if (model && model.alternateNumber) return alternateNumber;
        else return "no main number";
    }),
}); 
```

# ruby-on-rails - rails rspec 预计自定义验证失败

> ID：14713936
> 
> 赞同：7
> 
> 时间：2013-02-05T18:01:52.687
> 
> 标签：ruby-on-rails, rspec, rspec-rails

使用自定义验证器运行我的 rspec 时出现此错误。

```
expect {@ua.save!}.to  raise_error(ActiveRecord::RecordInvalid,'Validation failed: This question is no longer active') 
```

失败了

```
expected ActiveRecord::RecordInvalid with "Validation failed: This question is no longer active", got #<ActiveRecord::RecordInvalid: Validation failed: This question is no longer active.> with backtrace: 
```

这似乎只是我的自定义验证的问题。看这个模型：

```
class UserAnswer < ActiveRecord::Base
  belongs_to :user
  belongs_to :question
  validate :questionIsActive?

  private

  def questionIsActive?
    errors.add(:base, "This question is no longer active.") if !self.question.is_active?
  end
end 
```

使用：Rails 3.2.11 Rspec-rails 2.12.2

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T18:29:56.213

你有一个错字。在字符串中添加句点：

```
expect {@ua.save!}.to  raise_error(ActiveRecord::RecordInvalid,'Validation failed: This question is no longer active.') 
```

注意：您目前的期望是：

“验证失败：此问题不再有效”

但需要：

“验证失败：此问题不再有效。”

使其与您的验证字符串匹配：

“这个问题不再活跃。”

# ruby - rails 部分但被多个视图使用

> ID：14713939
> 
> 赞同：4
> 
> 时间：2013-02-05T18:02:04.360
> 
> 标签：ruby, ruby-on-rails-3.2, partial-views

我有一段代码，我想从两个不同的角度显示在几个领域。也就是说，由两个不同的控制器处理（所有数据都来自一个助手）什么是最好的打破它的方法，这些部分是否应该被渲染为布局？虽然他们使用 twitter 引导模式，但我在从布局调用时让它们正确显示时遇到了很大的问题（这也是我必须将这段代码分成部分的原因，一个来自一个`index.erb.html`，另一个来自一个部分自己的`_document_header.erb.html`好时机问，你能不能把一个部分塞进另一个......

所以只是想得到一些指示。这段代码对于两个视图来说确实是通用的。（并且并不总是需要渲染或显示）......所以想以最好的方式做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T01:27:03.753

您可以引用视图文件夹中任何位置的部分。

在您的视图中创建一个“共享”文件夹并引用部分内容是很常见的：`<%= render 'shared/my_partial' %>`

# jquery - jquery mobile ajax 表单提交加载到替换页面中

> ID：14713943
> 
> 赞同：2
> 
> 时间：2013-02-05T18:02:20.497
> 
> 标签：jquery, ajax, forms, jquery-mobile

我设置了一个运行 ajax 请求的 jQuery 移动表单。问题不是请求，而是 jQuery mobile 在发送提交时加载页面内容的事实。这反过来意味着我添加到当前页面的错误然后在页面交换时被删除（如果您使用过 jquery mobile，您将知道页面散列等是如何工作的）。

ps 在非 ajax 类中包装表单将不起作用，因为它会停止我的 ajax 运行。

我就是这样设置的...

```
 <!--Log in/Go to register page -->
    <div data-role="page" id="one">
        <div data-role="header">
            <h1>Register of Log In</h1>
        </div>
        <div data-role="content">
            <h2>Log In form</h2>

            <form id='logInForm' action="#" method="POST">
                <div data-role="fieldcontain">
                    <label for="email">Email address:</label>
                    <input type="text" name="emailLogIn" id="emailLogIn" value=""   />
                    <br>
                    <label for="password">Password:</label>
                    <input type="password" name="passwordLogIn" id="passwordLogIn" value=""   />
                    <br>
                    <button type="button" aria-disabled="false">Submit</button>
                </div>
            </form>

            <p><a href='#two'>Not a member? Register here</a></p>

        </div>
    </div>
    <!-- /page one --> 
```

jQuery

```
$(function() {
var logInFormData = $('#logInForm');

$('#logInFor').submit(function(){
    $.ajax({
        url: 'http://www.mysite.co.uk/project/logIn/logIn.php',
        type: 'post',
        data: logInFormData.serialize(),
        dataType: 'json',
        crossDomain : true,
        timeout: 5000,

        success: function(logInReturn){
            if(logInReturn.message[1]){
                localStorage.clear();
                $('form#logInForm').append("<div class='inputError'><p>" + logInReturn.message[1] + "</p></div>");
            }
            else if(logInReturn.message[2]){
                localStorage.setItem('userHandle', logInReturn.message[2].userHandle);
                localStorage.setItem('userId', logInReturn.message[2].userId);              
                window.location ='selectProject.html';
            }
        },

        error: function(){
            alert('There was an error loading the data. Contact the admin.');
        }
    });
   });
}); 
```

所以你可以看到我的PHP出错的结果，我在页面上添加了一个div，但是这个页面然后被换掉并替换为一个相同的页面减去div。很烦人。我猜有一种方法可以在页面交换后附加它？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T19:11:32.810

当您提交表单时，您想禁止它的操作。像这样：

```
$('#logInForm').submit(function(e){
    e.preventDefault();
    $.ajax({ 
```

或者你可以返回 false：

```
$('#logInForm').submit(function(){
    $.ajax({
        // Your Ajax code
    });
    return false;
}); 
```

否则，不要使用该`submit`事件，而是`click`在您的按钮上选择一个事件。这是一个使用示例：http `click()`: [//jsfiddle.net/Twisty/zaJud/](http://jsfiddle.net/Twisty/zaJud/)

# sql - Postgresql inbox query

> ID：14713944
> 
> 赞同：7
> 
> 时间：2013-02-05T18:02:21.980
> 
> 标签：sql, postgresql

I have a Messages table that looks like this:

```
 Messages
+-----+------------+-------------+--------------+
|  id |  sender_id | receiver_id |  created_at  |
+-----------------------------------------------+
|  1  |      1     |      2      |   1/1/2013   |
|  2  |      1     |      2      |   1/1/2013   |
|  3  |      2     |      1      |   1/2/2013   |
|  4  |      3     |      2      |   1/2/2013   |
|  5  |      3     |      2      |   1/3/2013   |
|  6  |      5     |      4      |   1/4/2013   |
+-----------------------------------------------+ 
```

Where a 'thread' is a group of messages between a given sender_id and receiver_id I want a query to return *the most recent 10 messages for the most recent 10 threads* where either the sender_id or receiver_id is a given id.

Expected output where given user_id is 5:

```
+-----+------------+-------------+--------------+
|  id |  sender_id | receiver_id |  created_at  |
+-----------------------------------------------+
|  1  |      5     |      2      |   1/4/2013   |
|  2  |      5     |      2      |   1/4/2013   |
|  3  |      2     |      5      |   1/4/2013   |
|  4  |      3     |      5      |   1/4/2013   |
|  5  |      5     |      2      |   1/3/2013   |
|  6  |      5     |      4      |   1/3/2013   |
+-----------------------------------------------+ 
```

up to a limit of 10 messages between, for example, user 5 and 2 (above there are 4) and a limit of 10 threads (above there are 3).

I've been trying with this sort of query using a subquery but haven't managed to get the second limit on the number of distinct threads.

```
SELECT * FROM (SELECT DISTINCT ON (sender_id, receiver_id) messages.* 
FROM messages 
WHERE (receiver_id = 5 OR sender_id = 5) ORDER BY sender_id, receiver_id, 
created_at DESC)   
q ORDER BY created_at DESC 
LIMIT 10 OFFSET 0; 
```

I'm considering creating a new Thread table containing a thread_id field which would be the concatenation of sender_id + receiver_id and then just joining on Messages but I have a sneaky suspicion that it should be doable with just one table.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:20:08.850

我可以想象在一个查询中解决您的问题的最整洁的查询是以下查询：

```
select * from (
  select row_number() 
    over (partition by sender_id, receiver_id order by created_at desc) as rn, m.*
  from Messages m
  where (m.sender_id, m.receiver_id) in (
    select sender_id, receiver_id
    from Messages
    where sender_id = <id> or receiver_id = <id>
    group by sender_id, receiver_id
    order by max(created_at) desc
    limit 10 offset 0
  )
) res where res.rn <= 10 
```

该`row_number() over (partition by sender_id, receiver_id order by created_at desc)`列将包含每个线程中每条消息的行号（如果您运行单独的查询以仅查询一个线程，它将类似于记录号）。除了此行号之外，您还可以查询消息本身是否包含在 10 个最顶层的线程中（由 that 创建`(m.sender_id, m.receiver_id) in ...query...`。最后，由于您只需要 10 个最顶层的消息，因此您将行号限制为小于或等于 10。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T09:37:39.650

我建议采用 couling 的答案并稍微修改它，以便它使用公共表表达式有效地提供两个查询：

```
WITH threads (sender_id, receiver_id, latest) as (
        select sender, 
               receiver,
               max(sent) 
          from sof_messages
         where receiver = <user>
            or sender = <user>
         group by sender,
               receiver
         order by 3
         limit 10
 ), 
 messages ([messages fields listed here], rank) as (
         select m.*, 
                rank() over (partition by (sender, receiver), order by sent desc)
           from sof_messages
          WHERE (sender, receiver) in (select (sender, receiver) from threads))
 SELECT * from messages where rank <= 10; 
```

这样做的好处是允许规划者很好地了解何时在此处使用索引。本质上，查询的三个部分中的每一个都是独立计划的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T11:58:12.937

`Thread`由于数据重复，创建表看起来不正确，但视图可能会有所帮助：

```
CREATE VIEW threads AS 
  SELECT sender_id, receiver_id, min(created_at) AS t_date
  FROM messages
  GROUP BY sender_id,receiver_id; 
```

如果线程`min(created_at)`的`max(created_at)`日期是其最新消息的日期，而不是最旧的消息，则更改为。

然后它可以简单地加入到消息中：

```
SELECT ... FROM messages JOIN threads USING (sender_id,receiver_id) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T19:12:08.660

我发布这个来展示可以做什么。

我真的不推荐使用它。

执行两个单独的查询会更好：1 检索 10 个最近的线程，1 重复以拉回每个线程的 10 个最近的消息。

但是，您可以使用如下所示的`rank()` [窗口函数](http://www.postgresql.org/docs/current/static/tutorial-window.html)来实现您的目标。

```
select * from (
      select message.*,
             rank() over (partition by message.sender, message.receiver 
                              order by sent desc )  
      from sof_messages message,
           (
            select sender, 
                   receiver,
                   max(sent) 
              from sof_messages
             where receiver = <user>
                or sender = <user>
             group by sender,
                   receiver
             order by 3
             limit 10
           ) thread
      where message.sender = thread.sender
        and message.receiver = thread.receiver
      ) message_list

where rank <= 10 
```

有几个不同的查询可以使用窗口函数实现您的目标，它们都不是特别干净。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T12:00:50.447

我没有对此进行测试，但看起来您忘记了`LIMIT 10`子查询上的 10 个最新线程：

```
SELECT
  *
FROM
  (SELECT DISTINCT ON
     (sender_id, receiver_id) messages.* 
   FROM
     messages 
   WHERE
     (receiver_id = 5 OR sender_id = 5)
   ORDER BY
     sender_id, receiver_id, created_at DESC
   LIMIT
     10)   
  q
ORDER BY
  created_at DESC 
LIMIT
  10
OFFSET
  0; 
```

（我已经漂亮地打印了 SQL，因此更容易判断发生了什么。）

# git - 适合 10 人的学生团体的最佳 VCS 和托管服务？

> ID：14713950
> 
> 赞同：2
> 
> 时间：2013-02-05T18:02:43.160
> 
> 标签：git, version-control, project-management, assembla

我们是一个由十人组成的学生团体。在接下来的几个月里，我们需要一起完成一个大项目。因此，我们认为如果我们使用 VCS 会更好。

小组中的许多人都使用 git，但我们需要一个提供私有存储库和协作的虚拟主机。据我所知，bitbucket 提供免费的私有存储库，但我想问一下我们是否有更好的选择。

它不必是 git。我们乐于学习新事物。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-14T12:43:39.177

**免责声明：我是 Assembla 的 CTO**

你绝对应该使用 VCS，你的生活和代码会变得更好，更容易工作。话虽如此，[Assembla](http://www.assembla.com)是一个用于项目管理的托管 VCS 系统。

Assembla 为小团体提供免费产品，但是如果这是一个学生项目，我们愿意为学生免费提供非常大的产品供私人或公共使用。只需联系我，我将为您安排（适用于拥有 .edu 电子邮件地址的任何人，稍后此过程将正式化并在网站上提供）

Assembla 为项目管理和存储库提供了很多东西，而且它可以快速启动和使用。我们提供与各种工具（包括票务和问题跟踪工具）集成的 subversion、git、perforce 和 hg 存储库。

看看我们的[博客](http://blog.assembla.com)，特别是这些帖子：

[寻找一个 Git 错误跟踪器](http://blog.assembla.com/assemblablog/tabid/12618/bid/98335/Looking-for-a-Git-Bug-Tracker-Look-No-More.aspx)

[更快地开发：设置您的 Git 分叉和合并网络](http://blog.assembla.com/assemblablog/tabid/12618/bid/96552/Develop-Faster-Set-Up-Your-Git-Fork-and-Merge-Network.aspx)

# php - 从 Mysql 列中修剪多余的空间

> ID：14713951
> 
> 赞同：0
> 
> 时间：2013-02-05T18:02:46.647
> 
> 标签：php, mysql, trim

我有一个旧数据库，其中列类别存储在错误的形状中......其中有额外的空间，例如

```
Hotels     in     London
Hotels        in     Manchester 
```

有没有办法我可以改变表格内的这个空间......如果我可以从类别（中间空间）中删除额外的空间以获得这样的输出

```
Hotels in London 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T18:04:22.590

您可以使用`REPLACE`类似的功能

```
update table set columnName= REPLACE(columnName,'      ',' ') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T18:06:43.557

将数据下拉为您可以处理的值，然后使用以下方法删除额外的空白：

```
$foo = trim(preg_replace( '/\s+/', ' ', $foo )); 
```

然后将其写回数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-26T08:41:25.317

我有类似的情况，在搜索特定字段的值时，我必须删除多余的空格。

我用过mysql的replace功能，像这样

```
SELECT * FROM `tableName` WHERE post_id = 'xxx' AND replace(`fieldName`,' ','') Like '%JobOppurtunity%' ; 
```

在这里，replace 会递归删除 fieldName 中的所有空格并连接字段值，然后在 LIKE 关键字之后搜索我的连接字符串。

因此，如果我有字段值“Job Oppurtunity”，它会将其转换为“JobOppurtunity”，显然我已经通过任何字符串函数或正则表达式连接了我的搜索字符串。就像它这样做了

```
$txt_search_qry = trim(preg_replace( '/\s+/', '', $txt_search_qry)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-12T13:53:02.213

我发现的另一种快速简单的方法是：

```
REPLACE(REPLACE(REPLACE(columnName,' ',' !'),'! ',''),' !',' ') 
```

# highcharts - Hiding a highchart series is very slow

> ID：14713952
> 
> 赞同：4
> 
> 时间：2013-02-05T18:02:50.727
> 
> 标签：highcharts

I have a highchart displaying multiple series, each contains 100+ data points I have a UI containing a checkbox for each series that when clicked calls the series.hide() or series.show() to toggle the hide/show of each line My problem is that the hide and show are extremely slow such that I cant check one checkbox whilst processing from a previous is taking place Does anyone know how to handle this? Thanks

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-08-19T01:31:52.623

而不是调用`hide()`每个系列，调用`setVisible(false, false);`. 这第二个参数是`redraw`参数，可以避免对每个系列造成重绘（很慢）。

然后，在您完成更改可见性后，调用`chart.redraw()` *一次*。

[http://api.highcharts.com/highcharts#Series.setVisible](http://api.highcharts.com/highcharts#Series.setVisible)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-09T09:14:29.533

如回答：

[在 Highcharts 和 jQuery 中隐藏系列的_groups_：如何获得可接受的性能？](https://stackoverflow.com/questions/8875626/hiding-groups-of-series-in-highcharts-and-jquery-how-to-get-acceptable-perfor)

*   每次调用 show 或 hide 时都会绘制 highcharts；
*   禁用和启用重绘功能对我有用；

    ```
    var _redraw = this.chart.redraw;
    this.chart.redraw = function(){};

    //do work

    this.chart.redraw = _redraw;
    this.chart.redraw(); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-30T03:01:00.463

`visible: false`在调用之前添加隐藏的系列怎么样`Highcharts.chart()`？请参阅参考资料：1\. [Highcharts API](https://api.highcharts.com/highcharts/plotOptions.series.visible)和 2\. [Demo](https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/highcharts/plotoptions/series-visible/)

就我而言，与以下方法相比，上述方法显示出最佳性能：

1.  `series.hide()`
2.  `setVisible(false, false)`
3.  `setVisible(false, true)`或者`setVisible(false, false); redraw();`

# visual-studio-2010 - TFS 云和共享项目

> ID：14713953
> 
> 赞同：0
> 
> 时间：2013-02-05T18:02:59.893
> 
> 标签：visual-studio-2010, tfs, shared-libraries, projects-and-solutions, azure-devops

我刚刚使用 TFS 云服务设置了一个帐户，并正在尝试向其中添加我的解决方案。

我遇到的问题是我在多个解决方案中有相同的共享项目，我只想在源代码管理中存在一次。似乎如果我只是添加解决方案，它每次都会在每个单独的文件夹下添加共享项目。

我只需要每个共享项目的一个实例，因此结帐会反映在所有解决方案中。

任何想法如何在 TFS 云服务和 VS2010 上做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:53:43.763

转到您的团队资源管理器 -> 源代码管理资源管理器并使用“将项目添加到文件夹”来放入整个源代码目录，而不是为每个解决方案执行“将解决方案添加到源代码管理”。

[从下面的评论中添加] 完成此操作后，您可以为每个解决方案使用“将解决方案添加到源代码管理”以绑定到 .sln 文件。这会做正确的事情并维护您通过源资源管理器创建的文件夹映射并避免任何重复。

# web-config - Sitecore 6.5 urls across multiple sites/domains (not resolving sites?)

> ID：14713954
> 
> 赞同：2
> 
> 时间：2013-02-05T18:02:59.890
> 
> 标签：web-config, hyperlink, sitecore

I'm using a Sitecore install with multiple sites. When linking from example1.com (/sitecore/content/example1) to an item under example2.com (/sitecore/content/example2/about)

Sitecore is not generating the link correctly for any cross-domain links. It is generating: [http://www.example1.com/example2/about.aspx](http://www.example1.com/example2/about.aspx) This is what is expected: [http://www.example2.com/about.aspx](http://www.example2.com/about.aspx)

The same thing happens from example2.com when linking to example1.com or any item under that site.

*   Both sites are defined in the web.config.

*   The rootNodes are both "/sitecore/content"

*   The start items are "/example1" and "/example2" respectively.

*   Rendering.SiteResolving is set to true

*   Rendering.SiteResolvingMatchCurrentSite is set to false

*   I'm using sc:link to generate the links.

*   Sitecore.Links.LinkProvider's alwaysIncludeServerUrl is set to true

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T10:29:03.593

如果您使用带有通配符的主机名（例如“www.example1.com|example1.com”），则需要在您的条目上设置 targetHostName="www.example1.com"。

即使您只有一个域，也要设置 targetHostName，因为有一个东西/功能只查看 targetHostName。例如。在没有 targetHostName 和 6.5.0 版本的情况下，GetItemUrl() 无法按计划工作。120706 它不考虑 web.config 中设置的内容。这是一个错误，他们希望在未来的版本中修复。如果您遇到问题，请在此处寻找解决方案： [http ://sitecorepm.wordpress.com/2010/08/04/using-cross-site-links-dynamic-links/](http://sitecorepm.wordpress.com/2010/08/04/using-cross-site-links-dynamic-links/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T18:41:01.217

您是否在 web.config 中设置了 <site> 条目的主机名值？

```
<site name="example1" hostName="www.example1.com" ... />
<site name="example2" hostName="www.example2.com" ... /> 
```

这里有一篇非常好的博客文章：http: [//blog.paulgeorge.co.uk/2011/05/01/sitecore-linkmanager-inside-out-muti-site-and-sub-site-setups/](http://blog.paulgeorge.co.uk/2011/05/01/sitecore-linkmanager-inside-out-muti-site-and-sub-site-setups/) 它看起来就像您已经涵盖了完成这项工作所需的所有其他内容。

# asp.net-mvc-3 - Null entity when using .find method in entity framework

> ID：14713955
> 
> 赞同：0
> 
> 时间：2013-02-05T18:02:59.267
> 
> 标签：asp.net-mvc-3, entity-framework

I have been trying to create a simple portal to track logs from a mobile application. As such, I have used entity framework and MVC3 to help me with this. However recently I have been stuck when trying to retrieve the entity from the database.

Here is the Run class:

```
namespace LifestyleGuide.Models
{
    [DataContract(IsReference = true)]
    [KnownType(typeof(User))]
    public partial class Run
    {
        [DataMember]
        public string User_ID { get; set; }
        [DataMember]
        public System.DateTime Date { get; set; }
        [DataMember]
        public Nullable<int> Distance { get; set; }
        [DataMember]
        public Nullable<int> Duration { get; set; }
        [DataMember]
        public Nullable<int> Calories { get; set; }

        [DataMember]
        public virtual User User { get; set; }

    }

} 
```

User_ID and date are form a composite key where User_ID is a foreign key from the User table.

And the following is the "details" method from the controller:

```
public ActionResult Details(String id, DateTime date)
    {
        using (var db = new inspireEntities())
        {
            Run run = db.Runs.Find(id, date);
            return View(run);
        }
    } 
```

However, when i try to run it, the run object always appears as a *null*.

Any suggestions are greatly appreciated!

**EDIT:** Here are is the view for the homepage.

```
@model IEnumerable<LifestyleGuide.Models.Run>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            <center>User ID</center>
        </th>
        <th>
            <center>Date</center>
        </th>
        <th>
            <center>Distance</center>
        </th>
        <th>
            <center>Duration</center>
        </th>
        <th>
            <center>Calories</center>
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.User_ID)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Date)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Distance)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Duration)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Calories)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new { id = item.User_ID, date = item.Date }) |
            @Html.ActionLink("Details", "Details", new { id = item.User_ID, date = item.Date }) |
            @Html.ActionLink("Delete", "Delete", new { id = item.User_ID, date = item.Date })
        </td>
    </tr>
}

</table> 
```

The fields in the table are populated from the database directly and therefore should already exist.

**Note: I have no problems with creating and accessing the run objects by using the view. The *null* run object only occurs when I directly do an insert statement into the database and when i try to retrieve it afterwards using the .find method as shown above.**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T03:36:45.920

我意识到了问题！数据库的每个条目都有一个以毫秒为单位的 DateTime 对象，而查询则没有。我做了一个解决方法来从所有条目中删除毫秒并且它有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:18:12.970

`Find()`函数从集合中返回匹配项的第一次出现，这将是与条件匹配的单个项。由于您的视图是强类型的`IEnumerable<LifestyleGuide.Models.Run>`，因此它期望运行对象的集合而不是单个对象。您应该修改控制器，以便将 Run 对象的集合（列表）传递给视图。你可以使用`WHERE`这样的子句：

```
public ActionResult Details(String id, DateTime date)
    {
        using (var db = new inspireEntities())
        {
            List<Run> run = db.Runs.Where(r=>r.Id==id && r=>r.Date==date);
            return View(run);
        }
    } 
```

祝你好运 ：）。

# java - SCJP subSet() 必须强制转换为 (TreeSet )

> ID：14713963
> 
> 赞同：0
> 
> 时间：2013-02-05T18:03:20.167
> 
> 标签：java, collections, scjp, treeset

我发现了一个奇怪的 SCJP 问题，乍一看似乎回答正确：

```
TreeSet<Integer> s = new TreeSet<Integer>();
TreeSet<Integer> subs = new TreeSet<Integer>();
for(int i = 606; i < 613; i++)
    if(i%2 == 0) s.add(i);
subs = (TreeSet)s.subSet(606,true, 630,true); 
s.add(629); 
s.add(630); 
System.out.println(s + " " + subs); 
```

我与其他人分享了这样的观点，即这将打印 [606, 608, 610, 612, 629, 630] [606, 630]。我尝试编译它，令我惊讶的是发现代码给出了一个带有警告的编译错误：

```
__[unchecked] unckecked conversion__
found: java.util.TreeSet
required: java.util.TreeSet(java.lang.Integer) 
```

如果我像这样转换 s.subset，它会编译：

```
subs = (TreeSet<Integer>)s.subSet(606,true, 630,true); 
```

我在网上找到了各种类似的例子，没有人说这段代码不能编译。我对这里的正确答案感到困惑

我正在用编译器 1.6 > 编译它，所以它不应该是编译器版本问题

**编辑：**简短的回答是肯定的，它编译，长的回答是：阅读接受的答案:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:12:42.193

这不是编译时错误。确实是因为您以这种方式编译代码而出现的警告消息，
`javac -Xlint:unchecked MyTreeSet.java`

其中 ,`MyTreeSet.java`是您的 java 文件的名称。

> **您仍然会在您的工作目录中成功生成类文件**

# cdn - Rackspace CDN container organization

> ID：14713964
> 
> 赞同：2
> 
> 时间：2013-02-05T18:03:23.890
> 
> 标签：cdn, rackspace-cloud, file-management

I'm developing a web platform that may reach some million of users where I need to store users' images and docs. I'm using Rackspace and now I need to define the files logic into cloud files service. Rackspace allows to create up to 500,000 containers with an account ([reference page 17, paragraph 4.2.2](http://docs.rackspacecloud.com/files/api/v1/cf-devguide/cf-devguide-20130201.pdf)) and in addition they suggest to limit each container size up to 500,000 objects ([reference Best practice - Limit the Number of Objects in Your Container](http://www.rackspace.com/knowledge_center/article/best-practices-for-using-cloud-files)), which is the best practice for users files management?

One container for user don't seems to be a good solution because there is the 500,000 containers limit. Rackspace suggests to use virtual container. I'm a bit undecided how to use them.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T00:28:55.460

如果您只通过具有 200,000 个对象的 API 调用与文件进行交互是可以的（根据我的经验，不需要更大的对象）。

如果您想尝试使用 Web 界面来完成任何任务，那么您需要的远不止这些。Web 界面不会按文件夹分解内容，因此如果您有 30,000 个对象，Web 界面只会对它们进行分页并按字母顺序显示给您。这对于包含数百个对象的容器来说是可以的，但除此之外，Web 界面就无法使用。

如果您有数百万用户，您可以使用用户 ID 的某些部分作为分片键来决定使用哪个存储桶。有关选择分片键的信息，请参阅[http://docs.mongodb.org/manual/core/sharding-internals/#sharding-internals-shard-keys](http://docs.mongodb.org/manual/core/sharding-internals/#sharding-internals-shard-keys)。它是为 Mongo 用户编写的，但适用于此处。要点是选择一些属性，可以稍微均匀地分配您的用户，这样您就没有一个存储桶超过您希望每个存储桶拥有的最大文件数。

一种方法是使用用户 ID，我们可以根据第一位数字随机分配和分片。在本例中，我们将使用 UID 的 1234、2234、1123 和 2134。假设您想按 UID 的第一个数字分解文件，您可以将 1234 和 1123 的文件保存在容器“files_group_1”中以及“files_group_2”容器中的 2234 和 2134 文件。

在选择分片键之前，请确保您考虑用户可能存储多少文件。例如，如果用户可能存储数百（或数千）个文件，那么您将希望使用比 UID 的第一个数字更唯一的键进行分片。

希望有帮助。

# asp.net - 如何使用 ASP.NET MVC 项目启动 Azure 模拟器

> ID：14713970
> 
> 赞同：5
> 
> 时间：2013-02-05T18:03:44.457
> 
> 标签：asp.net, .net, asp.net-mvc, azure, azure-storage

我有一个使用 Azure 存储并已成功部署到 Azure 的 ASP.NET MVC 项目。但是，在本地运行项目时，它不会启动 Azure 模拟器。

我发现启动 Azure 模拟器的唯一方法是创建一个“Windows Azure 云服务”快捷方式并手动运行它。

有没有办法确保 Azure 模拟器在我启动我的应用程序时运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T19:00:54.827

我在与我的 MVC 站点相同的项目中有一个云服务。由于您已经创建了 MVC 项目，请尝试一下...

1.  将新的 Cloud 项目添加到您的解决方案中。添加时不要选择任何角色。
2.  添加云项目后，右键单击角色并选择...
    *   添加“解决方案中的Web角色项目...”您将能够选择您的MVC项目。
3.  最后但同样重要的是，将 Cloud 项目设置为启动项目，它将在本地运行时启动相应的计算和存储模拟器。

我刚刚在 VS2012 中验证了这一点，我已经做了几个月了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T04:55:49.657

如果您的解决方案中没有云服务项目，这可能会很棘手。你可以做几件事：

1.  计算机启动时启动存储模拟器。
2.  看看当你用云服务启动一个项目时 VS 是怎么做的。
3.  开始调试应用程序时，在代码中启动存储模拟器。您可以做的是使用类似这样的代码在 Application_Start() 方法中启动存储模拟器进程[这显然是一个 hack，并且不确定是一个优雅的 :)]：

    ```
     protected void Application_Start()
            {
                AreaRegistration.RegisterAllAreas();
                WebApiConfig.Register(GlobalConfiguration.Configuration);
                FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
                RouteConfig.RegisterRoutes(RouteTable.Routes);
                BundleConfig.RegisterBundles(BundleTable.Bundles);
    #if (DEBUG)
                {
                    Process.Start(@"C:\Program Files\Microsoft SDKs\Windows Azure\Emulator\devstore\DSServiceLDB.exe");

                }
    #endif
            } 
    ```

我的猜测是，你需要以管理员身份运行 VS。我尝试了上面的代码，它运行良好。上面的代码假设您的存储模拟器使用 LocalDB 进行存储。

# mysql - 导出 MySQL 数据库

> ID：14713973
> 
> 赞同：1
> 
> 时间：2013-02-05T18:03:55.580
> 
> 标签：mysql, phpmyadmin, spreadsheet, mysqldump

从 MySQL 数据库（通过 phpMyAdmin）导出时，如何创建一个能够识别 SQL 描述以正确维护数据库列的电子表格？

例如，当导出为 CSV 格式的 excel 时，数据库中的所有列都被压缩到 excel 表中的单个列中

> A1 = id；“fname”；“sname”；“email”；“电话”；“dob”；...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:07:43.247

将您的数据导出为 CSV。确保“字段终止于”设置为“，”（逗号）。你的看起来可能被设置为“;” （分号）。因此，Excel 无法识别您的字段分隔符，并认为整行都是一个字段。

此外，您可能希望“将字段名称放在第一行”以保留列标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T18:09:35.883

你可以使用`SELECT INTO OUTFILE syntax`你想要的轮廓。要添加列名，您也可以尝试以下操作..

```
SELECT col1, col2.... UNION
SELECT col1, col2... FROM mytable INTO OUTFILE "c:/mycsv.csv"
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' ESCAPED BY '"'
LINES TERMINATED BY "\n"; 
```

完成此操作后，在 Excel 中，您必须执行 tab/comma/; `Text-To-Columns`通过菜单分隔。

![在此处输入图像描述](../Images/e09433bc24a994d23142e83d6ff88e2c.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T18:10:18.800

问题是您的字段由分号而不是逗号分隔（当将分隔符导出为 a 时，您可以在 PHPMyAdmin 设置中更改此设置`,`）。

如果无法重新导出，解决方法是将文件类型更改为 .txt，在 excel 中打开它并在导入向导出现时手动指定分隔符。

# ruby - 面向所有程序员的 Vim 插件门户网站

> ID：14713974
> 
> 赞同：1
> 
> 时间：2013-02-05T18:03:55.703
> 
> 标签：ruby, vim, plugins

有人知道一些好的网站，我们可以在其中找到 vim 插件的当前趋势吗？

最好拥有那些

1.  有类别。
2.  显示它们的下载量和排名。
3.  指出它们最近在 github 等中开发的频率。

我知道在 Ruby gems 中有一个很好的网站作为“The Ruby Toolbox”，我正在寻找类似的东西，并且觉得这是在这个问题页面中获得一些链接的好机会。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T21:17:04.207

只有一个规范的插件存储库：[http://www.vim.org](http://www.vim.org)。但是您应该意识到，由于一系列系统和道德原因，这些统计数据完全没有意义：

*   Vim.org 不是唯一的存储库，因此下载可能发生在任何地方（github、bitbucket、个人站点、sourceforge ……），因此不会被计算在内。

*   高下载计数只能解释为高下载计数。这并不意味着下载插件的人继续使用它或……任何东西。

*   必须注册并登录才能对插件进行投票。投票者池明显小于 Vim 用户的总和或下载者的总和或实际用户的总和。

*   选民通常对他们投票的主题要么超级热情，要么超级消极。由于大多数意见不那么明显的人被排除在投票之外，评级/投票的结果*永远不能*代表任何有价值的东西。

*   某事物表面上的成功或流行**绝不**表示该事物是您的正确*选择*。下载一个插件，因为它具有高下载次数或高评级，绝对不能保证它适合*您的*工作流程或以比其他插件更令人满意的方式解决*您的问题。*

*   随机的互联网陌生人（比如我）的意见通常没有什么价值。

*   当然还有其他人，但我假设你明白我的意思。

选择插件（或电话/汽车/任何东西）的*唯一明智的方法是：*

1.  浏览每一个备选方案的自述文件，
2.  比较他们的优缺点
3.  安装最有前途的插件
4.  阅读他们的文档
5.  测试他们的地狱
6.  做出*你的*选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T18:16:46.373

[http://vimcasts.org/](http://vimcasts.org/)

它不像 ruby​​ 工具箱，它更像是 railscasts，但无论如何他都涵盖了一些好的插件。

# java - 如何避免 SpringJUnit4ClassRunner 在使用 JMockit 模拟之前初始化 bean？

> ID：14713976
> 
> 赞同：3
> 
> 时间：2013-02-05T18:04:06.050
> 
> 标签：java, spring, junit4, jmockit

我有一个这样的 JUnit 测试类：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration( locations = { "beanDefinitions.xml"})
public class MyTest {

    @Mocked private SomeDependency usedInSpringContext;

    @Test public void letsTest() {
        ...
    }
} 
```

问题是，Spring runner 在 JMockit 有机会模拟它们之前加载它的 bean。如何避免？这是 JMockit 1.0 和 Spring 3.07。我宁愿让我的 beanDefinitions.xml 保持不变。

被测代码是遗留代码。它包含许多我无法轻易摆脱的硬编码弹簧依赖项。因此第一步 - 嘲笑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T18:39:15.083

您可以使用自定义 FactoryBean。

[此博客](http://www.jayway.com/2011/11/30/spring-integration-tests-part-i-creating-mock-objects/)对此进行了解释。这是示例代码[。](https://gist.github.com/matsev/1397610#file_easy_mock_factory_bean.java)

它使用 easymock 或 Mockito。但我相信您可以轻松地将其移植到 JMockit。

编辑：我忽略了你不希望你的 beanDefinitions.xml 被修改。但我的建议包括修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T23:20:28.540

Spring 和一般的依赖注入的一大优点是，您的类不会因为满足它们的依赖而被代码弄得乱七八糟。他们只是坐下来等待其他人填写协作对象。所以插入模拟对象应该是微不足道的。

```
// no Spring runner or context configuration
public class FooTest {
    Foo foo;

    @Before
    public void setup() {
        foo = new Foo();
        foo.setDependency(mock(dependency)); // details depend on mocking framework
    }
} 
```

使用这种方法，您不会自动装配或以其他方式注入您正在测试的对象，至少如果您打算通过将其指向模拟合作者来重新配置它。如果被测代码有很多依赖项，你可能会得到大量的设置代码，但这很正常。

诚然，有些东西（如数据库）很难模拟，因此您需要一种不同的测试方法来验证您的 SQL 查询（例如）是否符合您的意思。这从一个单独的 bean 定义文件开始，其中包含以下内容：

```
<jdbc:embeded-database id="datasource"/> 
```

有关更多信息，请参阅[http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/testing.html](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/testing.html)。

棘手的部分是，如果您一直没有编写 Junit 测试，您可能会遇到每个 bean 似乎都依赖于其他每个 bean 的情况。因此，您要测试的“单元”不是一个类，而是一堆相互关联的类。在这种情况下，我建议将 bean 定义文件分成更小的部分，然后为每个部分编写单元测试。

使用这种方法，您可以让 Spring 连接被测代码，因为 Spring 配置是单元的一部分。单元测试代码仍然模拟并插入该单元外部的依赖项。

如果您坚持使用整个真实的 beanDefinitions.xml 文件，那么您正在编写集成测试，而不是单元测试。

# c++ - 使用 openssl 库的编译问题

> ID：14713985
> 
> 赞同：1
> 
> 时间：2013-02-05T18:04:49.623
> 
> 标签：c++, openssl

尝试在 Fedora14 机器上编译“gloox”库时收到此错误消息。

```
tlsopensslserver.cpp:248:8: warning: unused parameter âis_exportâ
tlsopensslserver.cpp: In member function âvirtual bool gloox::OpenSSLServer::privateInit()â:
tlsopensslserver.cpp:257:5: error: âEC_KEY_new_by_curve_nameâ was not declared in this scope
make[3]: *** [tlsopensslserver.lo] Error 1
make[3]: Leaving directory `/root/Documents/RMSAgent/gloox-1.0/src' 
```

相同的代码在 Ubuntu 机器上成功编译。

openssl-devel 包在 Fedora 机器上可用。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:25:33.537

gloox 中的此代码需要支持椭圆曲线加密 (ECC) 的 OpenSSL 版本。由于知识产权问题，Fedora/Redhat 发布了一个没有 ECC 支持的 OpenSSL 版本。Gloox 应该将 ECC 相关代码包装在

```
#ifndef OPENSSL_NO_EC
// ECC related OpenSSL calls
#endif 
```

使用 OpenSSL 的预处理器定义，或使用 autoconf 来检测 OpenSSL 中的 ECC 支持，并使用自动配置的条件来支持禁用 ECC 的 OpenSSL。

或者，您可以构建自己的启用 ECC 的 OpenSSL，并针对它构建 gloox。

# java - 在 Web 应用程序中出现奇怪的错误

> ID：14713989
> 
> 赞同：0
> 
> 时间：2013-02-05T18:05:06.037
> 
> 标签：java, jakarta-ee, tomcat

在网络应用程序中出现奇怪的错误。

```
org.apache.jasper.JasperException: Unable to compile class for JSPNote: sun.tools.javac.Main has been deprecated.
error: An error has occurred in the compiler; please file a bug report (http://java.sun.com/cgi-bin/bugreport.cgi).
1 error, 1 warning
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:262)
    at org.apache.jasper.runtime.JspServlet.loadJSP(JspServlet.java:465)
    at org.apache.jasper.runtime.JspServlet$JspServletWrapper.loadIfNecessary(JspServlet.java:149)
    at org.apache.jasper.runtime.JspServlet$JspServletWrapper.service(JspServlet.java:161)
    at org.apache.jasper.runtime.JspServlet.serviceJspFile(JspServlet.java:274)
    at org.apache.jasper.runtime.JspServlet.service(JspServlet.java:387)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
    at com.xvsi.servlet.ServletContainer.service(ServletContainer.java:404)
    at com.xvsi.servlet.BVRequestDispatcher.forward(BVRequestDispatcher.java:133)
    at org.apache.struts.action.ActionServlet.processActionForward(ActionServlet.java:692)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:584)
    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:147)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:760)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
    at com.xvsi.servlet.ServletContainer.service(ServletContainer.java:404)
    at com.xvsi.servlet.ServletContainer.processRequest(ServletContainer.java:348)
    at com.xvsi.servlet.ServletContextContainer.processRequest(ServletContextContainer.java:819)
    at com.xvsi.servlet.BVServletEngine.service(BVServletEngine.java:246)
    at com.xvsi.servlet.BVServletConnector.service(BVServletConnector.java:141) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:06:48.020

这通常意味着您的 JSP 页面中存在语法错误等。没有看到更多，很难提出建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:10:56.257

很难调试，除非您能够回忆并恢复最近的一些更改或部分部署以调试哪个 jsp 文件有问题。

我建议使用 ANT 来预编译这里提到的 JSP。

[http://tomcat.apache.org/tomcat-6.0-doc/jasper-howto.html](http://tomcat.apache.org/tomcat-6.0-doc/jasper-howto.html)

这是假设 JSP 有问题。

# javascript - 可以在highchart中使用带有堆叠选项和叠加功能的条形图

> ID：14713990
> 
> 赞同：0
> 
> 时间：2013-02-05T18:05:06.237
> 
> 标签：javascript, highcharts

我已将图表条绘制为堆叠，但彼此重叠。但只有最后两个系列需要重叠，而不是第一个。第一个系列（额外收入）需要和`'stacked : "normal"'`做一样的情节。

[这是](http://jsfiddle.net/jJpCk/4/)解释我的highchart实验的jsfiddle。

Series 对象是否有任何选项可以实现这一目标？

![这就是我想要做的](../Images/118dcb31d9963b8873d5597909e0c32e.png)

谢谢

彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:00:36.307

您应该禁用 gruping 或设置 pointWidth [http://api.highcharts.com/highcharts#plotOptions.column.pointWidth](http://api.highcharts.com/highcharts#plotOptions.column.pointWidth)

# servicestack - ServiceStack SwaggerUI 路由位置

> ID：14713993
> 
> 赞同：2
> 
> 时间：2013-02-05T18:05:10.230
> 
> 标签：servicestack, swagger

[ServiceStack 的 SwaggerUI 实现](https://github.com/ServiceStack/ServiceStack/wiki/Swagger-API)的文档说明

> 默认配置要求 ServiceStack 服务在“/api”路径下可用。

但我的 api 在根目录。有没有办法改变 SwaggerUI 的外观？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T19:15:43.470

I found /swagger-ui/index.html includes the JavaScript code containing the api location.

```
 window.swaggerUi = new SwaggerUi({
            discoveryUrl:'../api/resources',
            apiKey:"",
            dom_id:"swagger-ui-container",
            supportHeaderParams: false,
            supportedSubmitMethods: ['get', 'post', 'put']
        }); 
```

Change the discoveryUrl to be:

```
discoveryUrl:'../resources' 
```

The Swagger-UI should then correctly auto-discover the available resources.

# php - 清理 $data 和 $item 函数

> ID：14713994
> 
> 赞同：1
> 
> 时间：2013-02-05T18:05:18.983
> 
> 标签：php, mysql, mysqli

我正在尝试进行清理`function`以使其余代码保持简单。由于我正在使用`MYSQLi`我想知道以下代码是否正确？

```
function sanitize ($data){
    global $db_connect;
    return htmlentities(strip_tags($db_connect->real_escape_string($data)));
}

function array_sanitize ($item) {
    global $db_connect;
    $item = htmlentities(strip_tags($db_connect->real_escape_string($item)));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:07:24.883

我看到你清理字符串的两个原因：

**防止 SQL 注入**

您应该使用[准备好的语句](http://php.net/manual/de/mysqli.quickstart.prepared-statements.php)而不是使用`real_escape_string()`来防止 SQL 注入。Mysqli 扩展支持预处理语句。它们最安全且易于使用。使用它们。

**防止 XSS 攻击**

防止 XSS 攻击`htmlentities()`，`strip_tags()`可能会有所帮助。您还应该确保正确处理输入字符集的函数。

您还应该从[OWASP阅读此文档](https://www.owasp.org/index.php/PHP_Security_Cheat_Sheet)

# ios - 如何在两个视图控制器之间发送和获取数据？

> ID：14713996
> 
> 赞同：0
> 
> 时间：2013-02-05T18:05:24.793
> 
> 标签：ios, xcode

我在情节提要中有两个视图控制器。VC1 有三个按钮，VC2 有一个图像视图。

当点击VC1中的按钮A时，VC2显示A的图像。当单击VC1中的按钮B时，VC2显示B的图像。

VC2 如何知道在 VC1 中点击了哪个按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:08:37.737

在 VC2 中设置委托以将信息发送回原始 VC。谷歌“objective-c delegate”并阅读模型-视图-控制器范式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:42:51.760

这很简单！！！

1）在 VC2 中在 .h 文件中创建 NSString 属性，然后在 .m 文件“NSStringObjofVC2”中合成该属性 2）在 VC1 .h 文件中导入 VC2 #import“VC2”并像这样创建对象

VC2 *vc2Obj;

3) 在 vi​​ewdidload 方法中

vc2Obj = [[VC2 alloc] 初始化];

4）在每个按钮上单击添加这个

vc2Obj.NSStringObjofVC2 = @"differentImageNameforAll3Buttons.png";

最后在VC2中使用图像

只需在 UIImage 中使用 NSStringObjofVC2 作为文件名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T18:47:34.217

你可以做到这一点：

1.  添加导航控制器：选择 VC1，然后选择 Editor> Embedded In> Navigation Controller
2.  提供从按钮 A 到 VC2、从按钮 B 到 VC2、从按钮 A 到 VC2l 的 segue 连接

3.  分别输入segue标识符SegueA、SegueB、SegueC。

4.  在VC1中编写如下方法：

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

```
ImageViewController *vc2=(ImageViewController*)[ segue destinationViewController];

if([[segue identifier] isEqualToString:@"SegueA"]){

vc2.imageView.image =[UIImage imageNamed:@"a.png"];

}else
if([[segue identifier] isEqualToString:@"SegueB"]){

        vc2.imageView.image =[UIImage imageNamed:@"b.png"];

}else
if([[segue identifier] isEqualToString:@"SegueC"]){

vc2.imageView.image =[UIImage imageNamed:@"c.png"];

} 
```

}

# javascript - 在three.js中为形状的单个面着色

> ID：14713997
> 
> 赞同：4
> 
> 时间：2013-02-05T18:05:35.473
> 
> 标签：javascript, three.js

我正在扩展一个显示旋转立方体的简单示例，我想更改各个面孔的颜色，但没有任何运气。这段代码有什么问题？谢谢

```
$(function(){
    var camera, scene, renderer,
    geometry, material, mesh;

    init();
    animate();

    function init() {
        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera( 35, window.innerWidth / window.innerHeight, 1, 10000 );
        camera.position.z = 800;

        geometry = new THREE.CubeGeometry( 500, 70, 70 );

        material_1 = new THREE.MeshBasicMaterial( { 
            color: 0xff0000,
            shading: THREE.FlatShading, 
            overdraw: true 
        } );
        material_2 = new THREE.MeshBasicMaterial( { 
            color: 0x00ff00, 
            shading: THREE.FlatShading, 
            overdraw: true 
        } );
        geometry.materials = [material_1, material_2];
        geometry.faces[0].materialIndex = 0;
        geometry.faces[1].materialIndex = 1;
        geometry.faces[2].materialIndex = 0;
        geometry.faces[3].materialIndex = 1;
        geometry.faces[4].materialIndex = 0;
        geometry.faces[5].materialIndex = 1;
        mesh = new THREE.Mesh( geometry, new THREE.MeshFaceMaterial() );

        scene.add( mesh );
        renderer = new THREE.CanvasRenderer();
        renderer.setClearColorHex(0x000000, 1);
        renderer.setSize( window.innerWidth, window.innerHeight );
        document.body.appendChild( renderer.domElement );
    }

    function animate() {
        requestAnimationFrame( animate );
        render();
    }
    function render() {
        mesh.rotation.x += 0.01;
        mesh.rotation.y += 0.05;
        renderer.render( scene, camera );
    }
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T18:28:33.327

您需要将一组材质作为参数传递给 MeshFaceMaterial 构造函数。

代替：

```
 mesh = new THREE.Mesh( geometry, new THREE.MeshFaceMaterial() ); 
```

你应该有：

```
 mesh = new THREE.Mesh( geometry, new THREE.MeshFaceMaterial( geometry.materials ) ); 
```

# c# - C# 在 Messagebox 中使用相同的字符串创建列表？

> ID：14713998
> 
> 赞同：-6
> 
> 时间：2013-02-05T18:05:36.347
> 
> 标签：c#, string, winforms

我正在开发一个文件管理器，它将根据扩展名和文件名移动文件。我目前正在添加消息框来告诉我哪些文件无法移动，我想让它在消息框中显示文件名，如果有多个文件我希望它显示为列表而不是单独弹出每个文件名。

我已经尝试过字符串生成器，它在我的 foreach 中给了我一个错误，说它不能将 char 转换为字符串。我也尝试了 string.join 但给了我相同的结果... messageBox.Show("fdsafjdsla");

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:11:56.080

我倾向于使用这个

```
Stringbuilder sBuilder = new Stringbuilder();

Foreach(your loop)
{
     sBuilder.Append("the value you want to append" +  Environment.NewLine);
} 

MessageBox.Show(sBuilder.ToString()); 
```

**注意**
Environment.NewLine --> 给你一个新行

如果您**只**需要文件路径中的文件名，请像这样使用

```
 string fileName = @"C:\mydir\myfile.ext";
  string result;
  result = Path.GetFileName(fileName); 
```

**它将输出**
myfile.ext