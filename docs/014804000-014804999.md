# StackOverflow 问答 14804000-14804999

# html - 切出 css 图像容器

> ID：14804001
> 
> 赞同：0
> 
> 时间：2013-02-10T23:45:44.523
> 
> 标签：html, css, position

嗨，我正在尝试将两张图片并排放置，并让其中一张与另一张重叠在一个角落里。

我尝试使用该`z-index`属性，但这不起作用，除非我将位置属性设置为固定或绝对属性，这会弄乱我网站的布局。

我想知道虽然我有一个设置了宽度和高度的图像容器，但我是否可以像矩形一样切出容器的一部分，让图像像我下面的图像一样位于切口内。

这可能吗？

谢谢！

![在此处输入图像描述](../Images/bf9df0008ede8d7ac006344254349201.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:57:58.287

position:relative positions the element relative to its normal position, and pretends, for document flow, that the element is still there. See this example:

[http://jsfiddle.net/GtJMF/](http://jsfiddle.net/GtJMF/)

```
position: relative; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T23:48:25.833

我看不出有`position:absolute`这种情况会如何搞砸您的网站。

穿上`position:relative`你的“图像容器”。穿上`position:absolute; right:0, bottom:0;`你的“剪切部分”（假设它也在图像容器中）。这将为您提供您正在寻找的确切效果。

定位是相对于包含定位的父级的。只需 a`position:relative`就足以使元素成为所有内部定位将用于其坐标系的“定位大师”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T23:49:19.340

`position:relative`也 "启用" `z-index`，但不同的是`absolute`，`fixed`它不会弄乱布局的其余部分。

# c# - 如何将控制台输出提取到两点之间的变量中？

> ID：14804012
> 
> 赞同：1
> 
> 时间：2013-02-10T23:47:19.627
> 
> 标签：c#, .net, console

我想提取程序中两个特定点之间出现的控制台输出部分，并将其存储到变量中。这将在循环中执行多次。无需将输出回显到常规控制台中（如果这样可以提高效率）。

IE

```
foreach (Procedure p in procedures) {
    BeginCapturingConsoleOutput();

    p.Execute();

    string procedureOutput = EndCapturingConsoleOutput();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:58:37.430

MSDN 中此页面上的代码可以满足我的需求：http: [//msdn.microsoft.com/en-us/library/16f09842.aspx](http://msdn.microsoft.com/en-us/library/16f09842.aspx)

基本上，它将输出流设置为您定义的内容（在示例中为文件），执行一些操作，最后将其设置回标准输出流。

# javascript - iOS 矩阵和向量运算

> ID：14804015
> 
> 赞同：0
> 
> 时间：2013-02-10T23:47:49.883
> 
> 标签：javascript, ios, objective-c, opengl-es, webgl

我正在将 Web GL 应用程序转换为 iOS。

该应用程序的 web gl 版本使用 gl-matrix 包 ( [https://github.com/toji/gl-matrix](https://github.com/toji/gl-matrix) ) 来执行矩阵和向量运算。

我想知道iOS中的等效包是什么？

例如，javascript 应用程序中的一行代码使用以下行：

```
return new glMatrixArrayType([x * sin2, y * sin2, z * sin2, Math.cos(a2)]); 
```

在 iOS 中，我应该使用什么来代替 glMatrixArrayType。

干杯，山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:52:38.103

假设你的意思是 iOS 5+，相当于[GLKit](http://developer.apple.com/library/mac/#documentation/GLkit/Reference/GLKit_Collection/_index.html)。在此之前，就操作系统而言，您只能靠自己。

它没有 2x2 矩阵，因此相当于该行代码将是（嗯，可能，除非我已经转置了行和列 - 我不知道 gl-matrix）：

```
return GLKMatrix3Make(
          x * sin2, y * sin2, 0.0f,
          z*sin2,   cos(a2),  0.0f, 
          0.0f,     0.0f,     1.0f); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T23:50:31.933

iOS 的矩阵和向量库称为**vecLib**。文档可以在[这里](https://developer.apple.com/library/ios/#documentation/Performance/Conceptual/vecLib/Reference/reference.html)找到。但是，我不熟悉它，所以我不知道`glMatrixArrayType`vecLib 中的确切等价物，但希望这能为您指明正确的方向。

# java - 链表 Java 替换节点

> ID：14804016
> 
> 赞同：0
> 
> 时间：2013-02-10T23:47:51.870
> 
> 标签：java, linked-list

我在使用链表程序时遇到了困难。我想编写一个方法，用列表尾部的值之和破坏性地替换每个节点 n 中的值。所以如果列表是2,3,5,7；我想将其更改为 17、15、12、7。我得到了一个程序，我必须在其中添加一个执行此操作的方法。我可以改变第一个数字，但我不能改变其他三个，我被卡住了。如果有人可以帮助我，那就太好了。

原创节目

```
public class IntList {
private int value;     
private IntList next;

public IntList(int v, IntList n) {          // Constructor
    value = v;
    next = n;
  }

public int getValue() { return value; }       // Getters
public IntList getNext() { return next; }
public void setValue(int v) { value = v; }    // Setters
public void setNext(IntList n) { next = n; }

// Find the last node of a linked list.
public IntList findLast() {
   if (getNext() == null) return this;
   else return getNext().findLast();
 }

// Add a new node with value v at the end of l;

public void addEnd(int v) {
    findLast().setNext(new IntList(v,null));
  }

// Add up the values in a list, recurring down the owner
public int sumList() {
   if (getNext() == null) return getValue();
   else return getValue() + getNext().sumList();
  }

// Convert list of int to string

// Recursive method for constructing the end of the string, after the
// initial open bracket.

 public String toString1() {
   if (getNext() == null)
      return getValue() + "]";
   else return getValue() + ", " + getNext().toString1();
 }

// Top level rountine that starts with the "[" and then calls toString1 to
// do the rest.

  public String toString() {
    return "[" + toString1();
  }

// Recursive method for finding the sum of a list, using recursion down
// an argument. Note that this is a static method, associated with the class
// not with an object owner.

 static public int sumListArg(IntList l) {
    if (l==null) return 0;
    else return l.getValue() + sumListArg(l.getNext());
   }

 static public void main(String[] args) {
   IntList l = new IntList(2,null);
   l.addEnd(3);
   l.addEnd(5);
   l.addEnd(7);
   System.out.println("h");
   System.out.println(l.toString());
   System.out.println("Sum = " + l.sumList());
} // end main
} // end RecursiveIntList 
```

这是我到目前为止的方法（我认为这在逻辑上是可以的，但它是不正确的）：

```
 public static void runningSum(IntList l)
{ 
     l.setValue(l.sumList());

    while(l.getNext() != null) 
     {
        l.setNext(l.getNext()); //Set Next to be the next reference
        l.getValue();  //Get the Next's value
        l.setValue(l.sumList()); //Add the rest of the numbers together
     }

     if(l.getNext() == null)
     {
         l.setValue(l.getValue());
     }

     System.out.println(l.toString());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T00:02:56.820

有一个漂亮而优雅的解决方案：

```
public int sumList() {
    if (getNext() == null) {
        return getValue();
    }
    value = getValue() + getNext().sumList();
    return value;
 } 
```

在此方法中，您递归地遍历 List，并汇总当前元素后面的所有元素，并同时**设置值**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T00:01:49.567

这是代码：

```
public static void runningSum(IntList l)
{ 
    IntList head = l;
    int rSum = l.sumList();

    while(l != null) 
    {
        int curRS = rSum;
        curRS -= l.getValue();
        l.setValue(rSum);
        rSum = curRS;
        l = l.getNext();
    }

    System.out.println(head.toString());
} 
```

我将把它分成几个部分来解释发生了什么。我们想要编写一个程序，该程序以列表的开头并以您描述的方式更改列表；基本上第一个元素必须成为所有原始元素的总和；第二个元素必须是除第一个元素之外的所有元素的总和，依此类推。最后一个元素，尾部，必须保持不变。

```
public static void runningSum(IntList l)
{ 
```

我们需要记住的函数是传递给函数的头部；我们将**l**保存在一个名为**head**的变量中。

```
 IntList head = l; 
```

第一个元素的运行总和是所有元素的总和；所以我们调用**sumList**并将结果存储在一个名为**rSum**的变量中。

```
 int rSum = l.sumList(); 
```

这是数据结构编程中非常典型的习语；当元素不为空时，您循环。

```
 while(l != null) 
    { 
```

下一个元素的运行总和是**rSum**减去当前元素的值。

```
 int nextRS = rSum - l.getValue(); 
```

现在我们可以将当前元素的运行总和设置为**rSum**。

```
 l.setValue(rSum); 
```

对于下一次迭代，当前运行总和是**nextRS**。最后我们更新**l**以指向下一个元素。

```
 rSum = nextRS;
        l = l.getNext();
    } 
```

如果我们不跟踪**head**，现在我们将不知道要打印什么。

```
 System.out.println(head.toString());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T00:13:38.293

链表适合递归。递归解决方案可能如下所示：

```
public static void runningSum(IntList l) {
    if (l.getNext() != null) {
        runningSum(l.getNext());
        l.setValue(l.getValue() + l.getNext().getValue());
    }
} 
```

# mysql - 选择行时增加一个值 SQL

> ID：14804017
> 
> 赞同：2
> 
> 时间：2013-02-10T23:47:55.510
> 
> 标签：mysql, sql

有什么方法可以从本质上跟踪从 SQL 表中提取一行的次数？

例如，在我的表中，我有一个列数。每次 SQL 语句拉取特定行（我们称之为 rowA）时，rowA 的“计数”值就会增加 1。

无论是在表格的设置中还是在语句中都可以，但我找不到这样的东西。

我知道我可以将它分成两个语句来实现相同的目的，但我宁愿只发送一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T00:05:32.017

**执行此操作的最佳方法是将表的读取访问限制为存储过程。**

此存储过程将采用各种输入（过滤器选项）来确定返回哪些行。

在返回行之前，它们的计数器字段会递增。

请注意，update 和 select 命令共享相同的 where 子句。

```
create procedure Select_From_Table1
  @pMyParameter varchar(20), -- sample filter parameter
as

-- First, update the counter, only on the fields that match our filter
update MyTable set Counter = Counter + 1 
where
  MyFilterField like CONCAT('%', @pMyParameter, '%')  -- sample filter enforcement

-- Now, return those rows
select
  *
from
  MyTable
where
  MyFilterField like CONCAT('%', @pMyParameter, '%')  -- sample filter enforcement 
```

**一个不错的选择是在数据访问层的应用程序端处理它。**

# javascript - 为什么 _.delay 将我的 e.type 从 mouseenter 变为 mouseover

> ID：14804020
> 
> 赞同：2
> 
> 时间：2013-02-10T23:48:22.913
> 
> 标签：javascript, backbone.js, mouseevent, mouseover, underscore.js

当我使用backbone.js 触发此事件并尝试延迟函数调用时，event.type 从mouseenter 更改为mouseover 控制台日志射出“mouseenter”而第二个日志是“mouseover”为什么转换？？？

```
app.newsroomPageElementView = Backbone.View.extend({
 events: {
    'mouseenter .featured-image': 'imageHover',
    'mouseleave .featured-image': 'imageHover'
 },
imageHover: function (e)  {
         Y.log(e.type); // this outputs out mouseenter
        _.delay(function(){ 
         Y.log(e.type); // this outputs mouseover
        }, 500);
    },    
}); 
```

是因为 500 毫秒后我的鼠标已经“进入”所以它实际上是鼠标悬停，因为我的鼠标在触发时位于事件上方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:00:02.693

This is happening because Backbone is handing you a reference to an object that it then reuses.

As you probably know, the `mouseenter` event is followed by a `mouseover` event. You don't have a handler for `mouseover`, so normally, you wouldn't care.

When a `mouseenter` event occurs, your handler is called with this object `e`. This is a reference to some object within Backbone; you log its `type`, but then you retain a reference to that object in your `delay` handler.

Then, your event handler returns, and control is given back to the Javascript thread. The `mouseover` event fires. Your code may ignore it, but Backbone goes ahead and reuses the object it handed you and puts the information about the `mouseover` event in to it.

Then, your delay expires, and you use `e` to find out the type of the event... now its got all the `mouseover` event data in it, so that's what you see.

This should be a salutary lesson to us all. First, be aware that JS deals in object references and, if you store an object that something other than your code has created, and then break the thread, that object can change underneath you. Equally, if you have methods that return arrays or objects, know that your are returning a reference to that array or object... thus, if calling code changes the contents of said array or object, this can mess you up; this is particularly dangerous when you have a private field with a public getter. If you're not careful, you can hand over a reference that allows code to change your objects internals, without you meaning to!

# c++ - SDL 设置视觉工作室

> ID：14804023
> 
> 赞同：0
> 
> 时间：2013-02-10T23:48:29.720
> 
> 标签：c++, sdl

我正在尝试为 Visual Studio C++ 2010 Express 设置 SDL，但在运行简单程序时我不断收到以下错误

```
 #include "SDL.h"

int main(int argc, char* args[] ) {
    //Start SDL
    SDL_Init(SDL_INIT_EVERYTHING);

    SDL_Quit();
    return 0;
} 
```

然后我收到以下错误

```
'SDLtest.exe': Loaded 'C:\Users\Sean Kwon\Desktop\c++_programs\SDLtest\Debug\SDLtest.exe', Symbols loaded.
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\ntdll.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\kernel32.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\KernelBase.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\SDL.dll', Binary was not built with debug information.
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\advapi32.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\msvcrt.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\sechost.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\rpcrt4.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\sspicli.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\cryptbase.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\gdi32.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\user32.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\lpk.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\usp10.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\winmm.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\msvcr100.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\imm32.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\msctf.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\ddraw.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\dciman32.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\setupapi.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\cfgmgr32.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\oleaut32.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\ole32.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\devobj.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\dwmapi.dll', Cannot find or open the PDB file
'SDLtest.exe': Unloaded 'C:\Windows\SysWOW64\ddraw.dll'
'SDLtest.exe': Unloaded 'C:\Windows\SysWOW64\dwmapi.dll'
'SDLtest.exe': Unloaded 'C:\Windows\SysWOW64\setupapi.dll'
'SDLtest.exe': Unloaded 'C:\Windows\SysWOW64\devobj.dll'
'SDLtest.exe': Unloaded 'C:\Windows\SysWOW64\oleaut32.dll'
'SDLtest.exe': Unloaded 'C:\Windows\SysWOW64\ole32.dll'
'SDLtest.exe': Unloaded 'C:\Windows\SysWOW64\cfgmgr32.dll'
'SDLtest.exe': Unloaded 'C:\Windows\SysWOW64\dciman32.dll'
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\uxtheme.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\dwmapi.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\KBDUS.DLL', Cannot find or open the PDB file
'SDLtest.exe': Unloaded 'C:\Windows\SysWOW64\KBDUS.DLL'
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\KBDUS.DLL', Cannot find or open the PDB file
'SDLtest.exe': Unloaded 'C:\Windows\SysWOW64\KBDUS.DLL'
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\dsound.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\ole32.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\powrprof.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\setupapi.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\cfgmgr32.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\oleaut32.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\devobj.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\dinput.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\hid.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\wintrust.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\crypt32.dll', Cannot find or open the PDB file
'SDLtest.exe': Loaded 'C:\Windows\SysWOW64\msasn1.dll', Cannot find or open the PDB file
The thread 'Win32 Thread' (0x15e4) has exited with code 0 (0x0).
The thread 'Win32 Thread' (0x150c) has exited with code 0 (0x0).
The program '[5584] SDLtest.exe: Native' has exited with code 0 (0x0). 
```

我在我的 Syswow64 文件夹中添加了 .dll 文件夹，但我仍然遇到相同的错误...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T01:18:35.300

您的代码已成功执行并返回 0。

“无法找到或打开 PDB 文件”您可以放心地忽略大部分警告。这些警告意味着编译器找不到列出的 dll 的调试信息。这用于加载外部依赖项的符号，例如 IDE 内部链接或 OS API 使用的符号，通常不需要在程序中进行基本调试。

尝试[这些教程](http://lazyfoo.net/SDL_tutorials/index.php)或参阅 SDL 文档以获取有关设置和使用 SDL 的更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-30T08:14:05.033

未找到 PDB 文件，这意味着您需要获取它们。

工具 -> 选项 -> 调试 -> 符号

检查“Microsoft 符号服务器”以加载您缺少的符号。

# python - Python & 半透明画布

> ID：14804024
> 
> 赞同：0
> 
> 时间：2013-02-10T23:48:42.777
> 
> 标签：python, wxpython, tkinter, pygtk, toolkit

我正在寻找一种使用 pygtk 或 wxPython 绘制真正半透明线条的方法，我现在使用 TKinter 是不可能的（我喜欢这个，因为它已经存在了）。另外，我现在已经可以使用 PIL 做到这一点，但我想直接绘制到画布上，这将是一个动态的内容，所以我认为使用 PIL 将是一个缓慢的解决方案（而且不优雅）。有人知道这样做的方法吗？或者也许是另一个允许我这样做的工具包。

为了弄清楚我想要的是：如果我绘制了重叠的不同颜色的线条，我需要能够在交叉点看到两条具有合并颜色的线条。就像我为笔选择的颜色是透明的而不是纯色的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T00:41:22.510

几乎所有“画布”库都有带 alpha 的画笔。

*   PyGTK 有[gtk.DrawingArea](http://pygtk.org/docs/pygtk/class-gtkdrawingarea.html)，通常与[cairo](http://zetcode.com/gui/pygtk/drawing/)一起使用。
*   [Cairo 也可以与 wxPython 一起使用](http://wiki.wxpython.org/UsingCairoWithWxPython)。
*   QT 有[图形视图框架](http://qt-project.org/doc/qt-4.8/graphicsview.html)。

# python - XBMC 12.0 (Frodo) 使用什么版本的 Python？

> ID：14804029
> 
> 赞同：1
> 
> 时间：2013-02-10T23:49:40.047
> 
> 标签：python, xbmc

[在XBMC 论坛](http://forum.xbmc.org/)上问这个问题会更合适，但是它正在维护并且周末不会永远持续下去！

XBMC 12.0 使用和/或需要编写插件的 Python 版本是什么？[这里](http://wiki.xbmc.org/index.php?title=How-to%3aDebug_Python_Scripts_with_Eclipse)的`prerequisites`部分指出：

> Python 解释器 2.4（使用与 XBMC 相同的版本或版本 <= 2.7 ）安装在运行 Eclipse 的机器上

...这表明某些未知版本的 XBMC 曾经需要一个 Python 版本`2.4 <= N <= 2.7`

另一方面，`scripts and plugins section` [这里](http://wiki.xbmc.org/index.php?title=XBMC_v12_%28Frodo%29_API_changes)建议可能是版本`2.1.0`或`2.0.0`可能需要/使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:57:30.890

这取决于构建 XBMC 的平台和选项。由于[至少需要 2.4](https://github.com/xbmc/xbmc/blob/Frodo/configure.in#L857)和 3.x 的配置脚本通常不兼容，因此确实留下了 2.4 - 2.7。默认情况下，你会在编译机上安装一个*-dev*包，这很可能是你的发行版的默认包。

2.1.0 只是 Python 插件的版本号，与 Python 安装本身无关。

# c++ - STL Set inside Map , 奇怪的段错误和 Valgrind 分析

> ID：14804030
> 
> 赞同：0
> 
> 时间：2013-02-10T23:49:40.053
> 
> 标签：c++, map, stl, set, valgrind

我的代码中有一个奇怪的分段错误，它使用以下数据结构：

```
map< uint64_t, set<uint64_t> > _key_to_block; 
```

Valgrind 抱怨`_key_to_block.erase(it)`这条消息：

```
Address 0x6106118 is 56 bytes inside a block of size 88 free'd 
```

像这样从地图中删除元素：

```
map< uint64_t, set<uint64_t> >::iterator it     = _key_to_block.find(key);
(it->second).clear();
_key_to_block.erase(it); 
```

此外，Valgrind 还抱怨`(it->second).insert(k);`这种按摩：

```
Invalid read of size 8 
```

用于在 STL 集中插入元素，如下所示：

```
map< uint64_t, set<uint64_t> >::iterator it = _key_to_block.find(key);
(it->second).insert(value); 
```

但是，它并没有抱怨这一行：

```
setit = it->second.find(value); 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:09:46.753

我没有看到任何检查，`end()`所以我猜测您的`find`调用实际上没有找到密钥并返回了`end`迭代器。一旦你开始取消引用，所有关于行为的赌注都被取消了。您应该使用`operator[]`始终创建元素或检查您的`find`反对结果`end`。

# php - PHP，MYSQL检查用户是否是页面的所有者

> ID：14804035
> 
> 赞同：0
> 
> 时间：2013-02-10T23:50:04.093
> 
> 标签：php, mysql, session, sessionid

我正在尝试检查用户是否是个人资料页面的所有者，以便我可以显示一个用于输入 twitter 类似帖子的文本框。

编码

```
$id=mysql_query("SELECT id FROM users WHERE`username`='".$_GET['username']."'");

$ultimatum_form ='';
if(isset($_SESSION['id'])){
    if($_SESSION['id']==$id){
        $ultimatum_form = 'Write an ultimatum!(220 char max)<br/>
        <form action="profile.php" method="post" enctype="multipart/form-data" name="ultimatum_form">
        <textarea name="ultimatum_field" rows="3" style="width:97%;"></textarea>
        </form>';
    }
}
print "$ultimatum_form"; 
```

在我的数据库中，我有一个名为“users”的表，表 users 有“firs”、“last”、“username”、“password”、“email”和“id”列。

如果我在会话之外设置 $ultimatum_form 检查它会输出文本字段并且它可以工作。问题是，如果我然后去另一个人的个人资料，我可以看到文本字段并为他们写帖子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:54:26.600

您需要从查询中获取数据：

```
$id=mysql_query("SELECT id FROM users WHERE`username`='".$_GET['username']."'");
$r = mysql_fetch_assoc($id);
$id = $r['id']; 
```

然后 $id 包含行“id”值。
查看 pdo/mysqli，mysql 不会在下一个 php 版本中工作。

在这里，更好：

```
 $id=mysql_query("SELECT id FROM users WHERE`username`='".$_GET['username']."'");
    $r = mysql_fetch_assoc($id);
    $id = $r['id'];

    if(isset($_SESSION['id']))
    {
        if($_SESSION['id']==$id)
        {
            echo '
             Write an ultimatum!(220 char max)<br/>
            <form action="profile.php" method="post" enctype="multipart/form-data" name="ultimatum_form">
            <textarea name="ultimatum_field" rows="3" style="width:97%;"></textarea>
            </form>';
        }
        else
        {
            // Not users profile page
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T23:55:53.510

你不能完全做你正在做的事情。您需要获取记录。

```
$results = mysql_fetch_array(mysql_query("SELECT id FROM users WHERE`username`='".$_GET['username']."'")); 
```

然后你可以这样做：

```
if($_SESSION['id']==$results['id']){ 
```

# ruby-on-rails - 产品、订单和客户 Rails Associations

> ID：14804036
> 
> 赞同：0
> 
> 时间：2013-02-10T23:50:07.097
> 
> 标签：ruby-on-rails, activerecord, associations

我试图找出适合我的模型的 ActiveRecord 关联。我想创建一个非常准系统的电子商务网站。我想要一个升级和维修产品的系统，因此访问用户的订单历史记录很重要。

我目前的设置如下：

**用户**

```
has_many :products, :through => :orders

has_many :orders, :dependent => :destroy 
```

**订单**

```
belongs_to :user

has_many :products 
```

**产品**

```
belongs_to :orders 
```

我的第一个问题是这有意义吗？我关心 Products 的 belongs_to :orders 部分，因为我想确保一个产品可以成为许多不同订单的一部分（出于显而易见的原因）。如果这是错误/正确的，那么正确关系所需的必要迁移是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-08-24T14:40:37.937

我意识到这篇文章已经很老了，但由于我面临同样的问题，为追随者增加一些清晰度可能会很有趣。正如@ManojMonga 在评论中所说，在这里您需要使用`has_and_belongs_to_many`关联。所以模型看起来像：
**用户**

```
has_many :orders, :dependent => :destroy
has_many :products, through: :orders 
```

**命令**

```
belongs_to :user
has_and_belongs_to_many :products 
```

**产品**

```
has_and_belongs_to_many :orders 
```

然后，如[Active Record Association Rails Guide](http://guides.rubyonrails.org/association_basics.html#the-has-and-belongs-to-many-association)中所述，您将需要创建一个连接表来保存订单和产品外键。迁移看起来像这样：

```
class OrdersProducts < ActiveRecord::Migration
  def change
    create_table :orders_products, id: false do |t|
      t.belongs_to  :order, index: true
      t.belongs_to  :product, index: true
      t.timestamps
    end
  end
end 
```

然后，在您运行迁移之后，您将能够使用[has_and_belongs_to_many 方法](http://guides.rubyonrails.org/association_basics.html#has-and-belongs-to-many-association-reference)。请记住，当您创建连接表时，在 has_an_belongs_to_many 关联中，Active Record 将查找以字母顺序连接的 2 个表名命名的表。如果您想以其他方式命名它，则必须在模型中指定它，如下所示
**：**

```
has_and_belongs_to_many :products, :join_table => "new_tables_name" 
```

**产品**

```
has_and_belongs_to_many :orders, :join_table => "new_tables_name" 
```

最后，`the has_many :products, through: :orders`在用户的模型中不是强制性的。它只允许通过用户访问产品。就是这样，如果能帮上忙，我会很高兴的。顺便说一句，我正在使用 Rails 4.1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T23:53:41.980

产品`has_one :order`。这将允许您使用类似的东西`@product.order`，但它实际上不会为产品数据库表中的订单创建外键。

# c++ - 使用数组作为元组成员：有效的 C++11 元组声明？

> ID：14804039
> 
> 赞同：4
> 
> 时间：2013-02-10T23:50:17.783
> 
> 标签：c++, c++11, tuples, clang

下面的代码在 G++ 4.7.2 中编译得很好：

```
#include <tuple>
std::tuple<float,int[2]> x; 
```

但是，使用 clang++ 3.2 会产生以下错误：

**错误：数组初始值设定项必须是初始值设定项列表。**

如果我`float`从元组声明中删除类型，错误就会消失。上面的元组声明有效吗？

( *$CXX -std=c++11 -c file.cpp* )

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T00:16:29.947

我认为标准中没有任何内容禁止您的声明。但是，一旦尝试初始化、复制、移动或分配元组，您就会遇到问题，因为对于这些操作，元组的所有成员类型都必须能够用作初始化器、可复制构造、可复制分配和可移动分配，分别（§20.4.2.1）。数组都不是这种情况。

最好不要使用`std::array`C 样式的数组：

```
#include <tuple>
#include <array>
std::tuple<float,std::array<int,2> > x; 
```

# python - 在谷歌应用引擎和 python 中的列表中分页

> ID：14804040
> 
> 赞同：0
> 
> 时间：2013-02-10T23:50:18.190
> 
> 标签：python, google-app-engine, pagination, jinja2

我有一个清单。（该列表来自存储在 memcache 中的数据库查询，理想情况下我不会再次查询数据库。）

```
x = [thing1, thing2, thing3, ... thing100] 
```

我正在使用此函数一次生成列表中的前 10 个项目。

```
def grouper(page_size, iterable):
        page = []
    for item in iterable:
        page.append(item)
        if len(page) == page_size:
            yield page
            page = []
    yield page 
```

我正在调用函数

```
group = grouper(10, x) 
```

我像这样将我的结果提交到我的html

```
self.render("index.html", x-items = group.next()) 
```

在 jinja2 中，我正在遍历 group.next() 并正确显示列表中的前 10 个项目。

我的问题是，我在我的 html('next' 链接) 中放入什么代码来让它再次运行该函数并显示接下来的 10 个项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T00:12:45.223

当您查询数据库并且需要分页时，您使用游标。数据存储和 NDB 都支持游标。所以不需要先将查询保存在memcache中。

但是如果你需要先将它存储在memcache中，你可以使用你自己的游标。另请参阅 Nick Johnson 的这篇博文：http: [//blog.notdot.net/2010/02/New-features-in-1-3-1-prerelease-Cursors](http://blog.notdot.net/2010/02/New-features-in-1-3-1-prerelease-Cursors)

# c++ - 在 if 语句中使用 stringstream >> 运算符

> ID：14804046
> 
> 赞同：4
> 
> 时间：2013-02-10T23:50:54.553
> 
> 标签：c++, stringstream

以下代码片段旨在尝试使用 stringstream 对象从字符串中提取整数，并检测整数提取是否成功。stringstream 类继承 >> 运算符以返回对 istream 实例的引用。整数提取失败如何导致 myStream 等于 0 而它的 str 成员仍然是 strInput？

```
stringstream myStream(strInput);
if (myStream >> num){//successfull integer extraction}
else{//unsuccessfull integer extraction
cout<<myStream<<endl;
cout<<myStream.str().c_str()<<endl;} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T23:56:13.357

有一个`operator bool()`or `operator void*()`for `stream`，它返回（类似的东西）`!fail()`- 或者在`void *`失败时返回 NULL 的情况。所以，如果流没有失败，那很好。`operator >>`返回对对象的引用，`stream`因此编译器说“嗯，无法将流对象与真值进行比较，让我们看看我们是否可以制作 a `bool`，或者`void *`从它，是的，我们可以，所以让我们使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T23:56:27.433

答案在于[转换`std::ios`为的运算符（`void*`](http://www.cplusplus.com/reference/ios/ios/operator_voidpt/)[在 C++11](http://en.cppreference.com/w/cpp/io/basic_ios/operator_bool)中用一个运算符替换[为转换`basic_ios`为 a`bool`](http://en.cppreference.com/w/cpp/io/basic_ios/operator_bool)）：

> 从 ios 派生的流对象可以转换为指针。如果设置了任何一个错误标志（failbit 或 badbit），则该指针为空指针，否则为非零指针。

当您的流用于 、 或 条件时，将调用此`if`运算`while`符`for`。`!`对于需要编写的情况，还有一个一元运算符

```
if (!(myStream >> num)) {
    ...
} 
```

# java - 当时区规则发生变化时，如何在 Java 中映射到历史准确的本地时间？

> ID：14804050
> 
> 赞同：8
> 
> 时间：2013-02-10T23:51:48.767
> 
> 标签：java, time, calendar, timezone, gregorian-calendar

我有一个包含 UTC (GMT+0) 时间戳的数据库。这是问题所在：它们指的是发生在印第安纳州的计费活动。

有些人可能知道，印第安纳...

*   在 2006 年之前根本没有遵守夏令时（该州的大部分地区全年都是美国东部标准时间）。
*   2006 年投票决定保留美国东部标准时间，但开始与美国其他地区一起遵守夏令时
*   2007年修改了规则；美国联邦政府修改了夏令时，因此开始和结束规则发生了变化

由于此数据库中的时间戳指的是政府计费活动，因此实际上有必要将 UTC 时间戳报告为历史上准确的本地时间，以保持审计准确性。因此，印第安纳州特有三种情况：2006 年之前的时间戳使用与 2006-2007 之间完全不同的时区规则集，而 2007 年之后的时间戳使用另一组完全不同的时区规则。您可以想象，该数据库包含印第安纳州以外地区的活动，因此事情变得更加复杂。

Java 日历和时区 API 不包含任何允许程序员创建具有一组以上时区规则的对象的类，因此如果特定的适用时区，它们不能用于将 UTC 时间戳正确映射到历史准确的本地时间规则永远改变。

我已经考虑过如何解决在时区规则不断变化的语言环境中映射到历史准确当地时间的问题......

*   可以更新数据库，以便可以将 UTC 时间戳与本地时间偏移量和夏令时偏移量一起存储。这里的问题是数据库的大小增加了一点，如果现有数据库很大，那么更新所有表可能需要延长离线维护周期。

*   可以更新数据库，以便与每个时间戳一起存储适合该特定时间戳的特定 TimeZone 对象。尽管我认为 TimeZone 对象非常轻量级，但我认为这比上述更灵活，但仍然不太理想，因为它需要为每个时间戳保留一个对象。

*   可以开发自定义 API，从感兴趣区域设置的历史准确规则数据库中构建适当的 TimeZone 对象。该解决方案以需要额外处理的方式取代了前两种解决方案增加的存储需求。需要显示的每个时间戳都意味着创建一个新对象……或者至少与对象池中的适当对象配对。另外，这意味着创建和管理时区数据库。

Java 时间和日历 API 的局限性使得为这个问题找到一个优雅的解决方案比它应该做的要困难得多（例如，你不能查询现有的 SimpleTimeZone 对象并询问它遵循什么夏令时规则而不编写一些真的很乱的代码）。

我只是想问问有没有其他人以前处理过这样的情况以及他们是如何处理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T00:00:55.310

The time zone database you are describing *already exists*. It's called the Olson zoneinfo database, it's correct for all dates after 1970, and [it's available online](http://www.iana.org/time-zones).

Better yet, Java's native date-and-time APIs use this database. You can load an arbitrary time zone using `java.util.TimeZone.getTimeZone()`, and get offsets or perform conversions using this object (e.g, using `TimeZone.getOffset(long)`. For instance, you'd load the `"America/Indiana/Indianapolis"` zone to convert dates and times in Indiana.

The one thing you can't do easily with the `TimeZone` database is actually query the rules it's using. For that, I believe you'd have to dig into the tz files directly. In most cases, though, just getting offsets for specified dates should be sufficient.

# php - php mysql group_concat

> ID：14804051
> 
> 赞同：0
> 
> 时间：2013-02-10T23:51:50.037
> 
> 标签：php, mysql

样品表：

```
name           subject   grade    status    
-----------------------------------------  
john peter      engl     NULL       X  
john peter      math     85         A  
john peter      philo    NULL       X  
mark lewis      engl     90         A  
mark lewis      math     NULL       X 
```

示例查询：

```
<?php  
$query="SELECT name, grade, status, group_concat(subject SEPARATOR '-') as subj   
FROM grades GROUP BY name ORDER BY name";  
$result = $mysqli->query($query);  
<?php } ?>
<table>
<tr>
    <td>name</td>
    <td>Math</td>
    <td>English</td>
    <td>Philosopy</td>  
</tr>  

<?php while($row = $result->fetch_array()){ ?>
<tr>
<td><?php echo $row['name'];?></td>
<td><?php if (strpos($row['subj'],'math')!== false) {echo 'I';}?></td>
<td><?php if (strpos($row['subj'],'engl')!== false) {echo 'I';}?></td>
<td><?php if (strpos($row['subj'],'philo')!== false) {echo 'I';}?></td>
</tr>
<?php } ?>
</table> 
```

样本输出：

```
name          Math  English  Philosopy
john peter     I      I         I
mark lewis     I      I 
```

现在是我想要实现的目标：
如果它的值为 X，我想显示状态，如下所示：或者是否有更好的方法来做到这一点？
谢谢你们。。

```
name          Math  English  Philosopy
john peter     I      X         I
mark lewis     X      I 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:56:10.587

尝试这个，

```
SELECT  name,
        MAX(CASE WHEN subject = 'Math' THEN IF(status = 'X', 'X', 'I') END) MATH,
        MAX(CASE WHEN subject = 'Engl' THEN IF(status = 'X', 'X', 'I') END) ENGLISH,
        MAX(CASE WHEN subject = 'Philo' THEN IF(status = 'X', 'X', 'I') END) Philiosophy
FROM    tableName
GROUP   BY name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/0ebfd/2)

# java - 在斜边线的末端图像从靠近终点的 2 个点来回反弹

> ID：14804052
> 
> 赞同：0
> 
> 时间：2013-02-10T23:51:49.470
> 
> 标签：java, android

我正在努力学习为 Android 制作游戏。我正在尝试使图像沿斜边线移动。

我把数学和代码记下来了（我想，是从谷歌的某个地方得到的），但是当图像到达行尾时，会发生这种情况在目标点旁边的 2 个点之间“反弹”。就像它无法到达行尾，所以它只会到达它可以到达的最近的 2 个点，并在它们之间来回跳跃。

问题：我如何让它不从 2 点跳到斜边线末端的点？

这是我的代码：

```
// to find the distance between the 2 points 
distX = endX - imaX;
distY = endY - imaY;
// find the hypotenuse
hyp = Math.sqrt(distX*distX + distY*distY);
// don't know what this is for 
len = 160/hyp;
distX *= len;
distY *= len;

// and to move the image. The points have to be an int.
imaX += (int) (distX * 0.05); 
imaY += (int) (distY * 0.05); 
```

谢谢:) 编辑：添加了问题并修复了我在这里犯的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T00:14:34.877

如果你用谷歌搜索过这段代码，你应该继续用谷歌搜索。如果您只想走一条线，那将是一种令人困惑的矫枉过正。

考虑一下你在两个维度上都只有一个像素的情况：

```
distX = 1
distY = 1
hyp = sqrt(2) ~1.414
len = 160/hyp ~ 113.15

imaX += (113.15 * 0.05) ~ 5
imaY += (113.15 * 0.05) ~ 5 
```

因此，如果您在两个 X/Y 维度上都相距 1 个像素，它会尝试在每个方向上每次移动 5 个像素。不好

您还应该尝试实现帧速率独立，这是此代码无法处理的。网络上有大量关于此[的文章。](https://www.google.com/search?q=framerate%20independent%20movement&aq=f&oq=framerate%20independent%20movement&aqs=chrome.0.57j0l2j62l2.5872&sourceid=chrome&ie=UTF-8)

**编辑：**哦，应该是：

```
hyp = Math.sqrt(distX*distX + distY*distY); 
```

您将乘法与加法混淆了。

# nxt - NXT编程？

> ID：14804054
> 
> 赞同：1
> 
> 时间：2013-02-10T23:52:07.743
> 
> 标签：nxt

我想为 LEGO NXT 机器人编写一些东西。机器人附带的“API”非常有限，所以我继续寻找一些替代品。这个任务似乎有一堆语言/附加组件/编译器。问题是我不知道该选择哪一个，甚至不知道该使用哪一个。我在装有 OS 10.8 的 Mac 上。

我擅长 C#、Objective-C，并且可以围绕 C/C++ 和 Python 工作。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T02:13:41.180

如果你喜欢 C，我建议你试试[Not eXactly C](http://bricxcc.sourceforge.net/nbc)，它是用于 NXT 积木编程的 C 的修改版本。如果您更喜欢 C 的版本，请尝试[使用 RobotC](http://robotc.net)。然而，RobotC 是商业软件。

启动和运行 NXC 就像安装[Bricx Command Center](http://bricxcc.sourceforge.net) IDE 一样简单。NXC 可与标准 LEGO 固件一起使用，但它也带有带有错误修复和增强功能的增强版本。RobotC 提供了自己的 IDE 和固件，您可以试用 30 天，然后从 RobotC 网站购买许可证密钥。

如果您真的喜欢 Python，请查看[nxt-python](https://code.google.com/p/nxt-python/)。这就像为 nxt-python 安装兼容的驱动程序/接口以与 NXT 模块通信一样简单，然后安装[最新版本](https://code.google.com/p/nxt-python/downloads/list)的 nxt-python 库。如何做到这一点在[安装](https://code.google.com/p/nxt-python/wiki/Installation)页面上有明确的概述。

我建议您设置 BricxCC 和 nxt-python，并先尝试一下。如果 NXC 不适合您，您可以获取 RobotC 的试用版，您可以在购买完整版之前试用 30 天。

# objective-c - 绘制没有基础图像的地图

> ID：14804055
> 
> 赞同：1
> 
> 时间：2013-02-10T23:52:14.040
> 
> 标签：objective-c, map, mapkit, draw

我想在 iOS 应用程序中绘制一系列地图。最好不使用任何图像文件作为基础。

例如，我想绘制一张美国地图，其中列出了州和县。有谁知道这样做的方法？

通过*draw*，我的意思是在代码中绘制地图。也许使用 Apple 的 Map kit API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T00:05:44.167

您可能想在这里查看 [http://planet.openstreetmap.org](http://planet.openstreetmap.org) 以获取数据。然后你可以使用 2d 图形库来绘制它。

# objective-c - 检查日期是否在两个日期之间

> ID：14804058
> 
> 赞同：1
> 
> 时间：2013-02-10T23:52:35.373
> 
> 标签：objective-c

下午好，

你如何检查一个日期是否在两个日期之间？我知道我必须先将数据字符串转换为 NSDate 值：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"MM/dd/yyyy"];

NSDate *date1 = [dateFormatter dateFromString:@"01/01/2001"];
NSDate *date2 = [dateFormatter dateFromString:@"01/01/2010"];

NSDate *userDate = [dateFormatter dateFromString:@"12/12/2001"]; 
```

然后我必须使用 if 语句，但我不太确定如何去做。这是我需要的：

> if (userDate 在 date1 和 date2 之间) {
> 
> }

任何有关 if 语句的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T23:57:46.280

Use [NSDate](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html) `-compare:`:

```
if (([date1 compare:userDate] == NSOrderedAscending) && ([date2 compare:userDate] == NSOrderedDescending)) {
        // Do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T00:00:54.953

of the top of my head so check the syntax ;-)

```
if (([userDate laterDate: date1] == userDate) && ([userDate laterDate: date2] == date2)){
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T23:58:07.217

```
if(([userDate compare: date1] ==  NSOrderedDescending) && ([userDate compare: date2] == NSOrderedAscending)){
//do something
} 
```

# jquery - jquery fadeOut()/fadeIn() 打嗝

> ID：14804068
> 
> 赞同：1
> 
> 时间：2013-02-10T23:54:18.070
> 
> 标签：jquery

我有一些从 htmled 获得的 jquery 代码，可以将照片从一张转换到下一张。但是出现的第二张图片只出现一瞬间，然后转到下一张图片。之后循环很顺畅，没有问题。

这是jQuery：

```
$('.fadein img:gt(0)').hide();
setInterval(function () {
    $('.fadein :first-child').fadeOut(1500)
                             .next('img')
                             .fadeIn(1500)
                             .end()
                             .appendTo('.fadein');
}, 4000); // 4 seconds 
```

你可以在这里看到它的作用：[http ://www.zerogravpro.com/yurt/](http://www.zerogravpro.com/yurt/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T23:57:02.750

`body`尝试在结束标记之前移动所有 JavaScript 。

另外，一定要包装额外的 jQuery，`$(function() {});`这样代码在 DOM 准备好之前不会触发。见下文：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(function() {
  $('.fadein img:gt(0)').hide();

  setInterval(function () {
    $('.fadein :first-child').fadeOut()
                             .next('img')
                             .fadeIn()
                             .end()
                             .appendTo('.fadein');
  }, 4000); // 4 seconds
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T00:13:45.940

```
$('.fadein img:gt(0)').hide(); 
```

该行不起作用，因为它在 dom 初始化之前被调用。因此，最初显示的是第二张图像而不是第一张图像，这会导致打嗝。

# apache - 网址重写 Silex

> ID：14804077
> 
> 赞同：0
> 
> 时间：2013-02-10T23:55:39.110
> 
> 标签：apache, url-rewriting, silex

我正在使用微框架**Silex**构建一个项目，在我的本地主机上我使用的是 Apache 2.2.22 这是结构：

```
/var/www/ProjectName/
    vendor/
    web/
        .htaccess
        index.php 
```

在我的 .htacces 中有：

```
 FallbackResource /index.php 
```

主页运行良好，但是当我尝试访问需要重写 URL 的页面时，我得到了 404。这是第二个控制器的代码：

```
$app->get('/view/{token}', function (Request $request, $token) use ($app, $db) {
    echo 'ok';exit;

    return $app['twig']->render('home.twig.html');
})
->bind('view'); 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:45:04.983

> webroot 位于**/var/www**，项目位于 /var/www/ProjectName/ **web**

和

> 我试过 localhost/ProjectName/view/randomtoken

您应该使用以下方式访问您的项目

> 本地主机/项目名称/**网络**/视图/随机令牌

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:51:22.183

我解决了我的问题，它与 Silex 无关。我只是忘记在 /etc/apache2/sites-available/default 中将指令 AllowOverride None 更改为 AllowOverride All

```
<Directory /var/www/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride All
    Order allow,deny
    allow from all
</Directory> 
```

# django - 在 Django 1.4.3 中找不到带有参数“()”和关键字参数“{}”的“django.contrib.auth.views.login”的反转

> ID：14804078
> 
> 赞同：1
> 
> 时间：2013-02-10T23:55:45.110
> 
> 标签：django

我知道这个问题已被问过几次，但我无法弄清楚......

我正在使用带有构建身份验证视图的 Django 1.4.3。当我编写以下代码时，出现此错误：

```
<div id="divAuthbox">
  <p id="instructionTooltip">Sign in</p>
  <form action="{% url django.contrib.auth.views.login %}" method="post">
    {% csrf_token %}
    <p class="label">{{form.username.label_tag}}</p>
    <p class="input">{{form.username}}</p>
    <p class="label">{{form.password.label_tag}}</p>
    <p class="input">{{form.password}}</p>
    <input class="loginButton" type="submit" value="login" />
    <input type="hidden" name="next" value="{{ next }}" />    
    <a href="/core/login_retrieval" class="padding" id="accessLink">Can't access your account?</a>
  </form>
</div> 
```

请注意，我没有在 django.contrib.auth.views.login 中添加额外的引号，因为我知道 1.4.3 不需要。但是，我仍然收到以下错误：

```
Reverse for 'django.contrib.auth.views.login' with arguments '()' and keyword arguments '{}' not found. 
```

抱歉，我问了一个重复的问题，但我无法弄清楚 1.4.3 有什么问题。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-11T12:12:51.260

将此添加到您的 urls.py：

```
url('', include('django.contrib.auth.urls')), 
```

我正在使用 Django 1.5

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T00:36:43.500

url 模板标签接受 url 名称，而不是查看函数路径。您应该将此视图添加到分配 name='login' 左右的 urlpatterns 中，稍后使用`{% url login %}`

# jsf - SelectOneMenu 中选定项目的值未在转换器中设置

> ID：14804081
> 
> 赞同：2
> 
> 时间：2013-02-10T23:56:09.400
> 
> 标签：jsf, converter, selectonemenu

在一个 JSF 项目中，我有一个由字符串值列表填充的 SelectOneMenu，并连接到一个整数值“yearStart”。当我从列表中选择一个值时，转换器总是输出到控制台“stringVal = null”。为什么所选项目的值没有到达转换器？

我的网页包括以下内容：

```
<h:selectOneMenu value="#{applicantController.yearStart}">
    <f:selectItems value="#{yearList.years}" />
    <f:converter converterId="studyYearConverter"/>
</h:selectOneMenu> 
```

它使用以下年份列表：

```
@ManagedBean
@ApplicationScoped
public class YearList implements Serializable {

    private static final long serialVersionUID = 1L;

    private final List<String> years = Arrays.asList("prior to 1990", "1990",
        "1991", "1992", "1993", "1994", "1995", "1996", "1997", "1998",
        "1999", "2000", "2001", "2002", "2003", "2004", "2005", "2006",
        "2007", "2008", "2009", "2010", "2011", "2012", "2013");

    public List<String> getYears() {
        return years;
    }

} 
```

我的转换器类：

```
@FacesConverter(value = "studyYearConverter")
public class StudyYearConverter implements Converter {

    private static final String PRIOR_TO_1990 = "prior to 1990";

    @Override
    public Object getAsObject(FacesContext context, UIComponent component,
            String stringVal) {
        if (PRIOR_TO_1990.equals(stringVal)) {
            return -1;
        } else {
            System.out.println("stringVal = " + stringVal);  
            // Why is this alway null??
            try {
                return Integer.parseInt(stringVal);
            } catch (NumberFormatException pe) {
                FacesMessage message = new FacesMessage(
                       "Invalid date format. Valid format e.g. 2010-04");
                throw new ConverterException(message);
            }
        }
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component,
        Object value) {
        if (value == null || !(value instanceof Integer)) {
                return null;
        } else {
            Integer year = (Integer) value;
            if (year == -1) {
                return PRIOR_TO_1990;
            } else {
                return year.toString();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:50:39.737

您没有提供转换器期望的项目。

该`getAsString()`方法在呈现 HTML 响应期间使用。此时，（可能）复杂的 Java 对象需要转换为其唯一的`String`表示，以便它们可以在 HTML 中表示。该`getAsObject()`方法在应用 HTTP 请求参数值期间使用。HTTP 请求参数值可以像 HTML 输入值一样仅表示为`String`，为了返回复杂的 Java 对象，`String`必须转换唯一表示。

你有一个`List<String>`可用的项目值。因此，当每个项目都将要呈现为 HTML 时，它会通过`getAsString()`. 但是，您正在执行`instanceof Integer`检查，该检查总是会失败并因此返回`null`每个项目。因此，您最终`<option>`会在生成的 HTML 中以`null`. 这就是你`getAsObject()`最终得到`null`s 的原因。

根据迄今为止的尝试，我的印象`#{applicantController.yearStart}`实际上是`Integer`您想要设置的年份，或者`-1`如果选择了“1990 年之前”。如果您想保留转换器，那么您应该将可用项目更改为

```
private final List<Integer> years = Arrays.asList(-1, 1990,
        1991, 1992, 1993, 1994, 1995, 1996, 1997, 1998,
        1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006,
        2007, 2008, 2009, 2010, 2011, 2012, 2013); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-29T14:20:28.043

I know which could be the solution. You should store the list and selected element in properties and maintain them in the scope as long as the component is used.

# c - 从 C 中的 GIF 标头读取数据

> ID：14804083
> 
> 赞同：0
> 
> 时间：2013-02-10T23:56:09.970
> 
> 标签：c, header, gif

任何 GIF 图片文件的前 13 个字节如下：

> ```
> 3 bytes - the ascii characters "GIF"
> 3 bytes - the version - either "87a" or "89a"
> 2 bytes - width in pixels
> 2 bytes - height in pixels
> 1 byte - packed fields
> 1 byte - background color index
> 1 byte - pixel aspect ratio 
> ```

我可以通过使用某种代码自己获取前六个字节，例如：

```
int G = getchar();
int I = getchar();
int F = getchar(); 
```

等等 .. 对 87a/89a 部分做同样的事情，所有这些都获得前 6 个字节，为 GIF87a 等提供 ascii 字符。

好吧，我无法弄清楚如何获取其余信息。我尝试使用相同的 getchar(); 方法，但这不是我所期望的。假设我有一个 350x350 的 GIF 文件，因为宽度和高度各为 2 个字节，我使用 getchar 2 次，最终宽度为“94”和“1”，两个数字，因为有两个字节。但是我将如何使用这些信息来获得以 10 为底的实际宽度和高度？我尝试了按位与 94 和 1，但后来意识到它返回 0。

我想也许如果我能找到如何获得宽度和高度，我将能够自己访问其余信息。

像素宽度和高度以小印度格式存储。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T00:03:43.560

It's just like any other number broken into parts with a limited range. For example, look at `43`. Each digit has a limited range, from 0 to 9\. So the next digit is the number of 10's, then hundreds (10*10) and so on. In this case, the values can range from 0 to 255, so the next number is the number of 256's.

```
256 * 1 + 94 = 350 
```

The standard should specify the byte order, that is, whether the most significant (called *big endian*) comes first of the least significant (called *little endian*) comes first.

[Byte Order: Little-endian](http://www.onicos.com/staff/iz/formats/gif.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T00:10:21.523

通常，为了读取压缩的比特流或图像数据，我们可以以读取二进制模式打开文件，读取数据并通过`getBits`功能对其进行解释。例如，请考虑以下示例

```
fptr = fopen("myfile.gif", "rb");

// Read a word
fread(&cache, sizeof(unsigned char), 4, fptr);

//Read your width through getBits
width = getBits(cache, position, number_of_bits); 
```

请参阅此处[K & R 问题：需要帮助理解第 2 章中的“getbits()”方法以](https://stackoverflow.com/questions/197614/k-r-question-need-help-understanding-getbits-method-in-chapter-2)获取有关 getBits 的更多详细信息

# python - Python NameError：名称未定义

> ID：14804084
> 
> 赞同：63
> 
> 时间：2013-02-10T23:56:13.013
> 
> 标签：python, python-3.x, nameerror

我有一个 python 脚本，我收到以下错误：

```
Traceback (most recent call last):
  File "C:\Users\Tim\Desktop\pop-erp\test.py", line 1, in <module>  
  s = Something()
  NameError: name 'Something' is not defined 
```

这是导致问题的代码：

```
s = Something()
s.out()

class Something:
    def out():
        print("it works") 
```

这是在 Windows 7 x86-64 下使用 Python 3.3.0 运行的。

为什么找不到`Something`类？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2013-02-10T23:59:22.627

在使用之前定义类：

```
class Something:
    def out(self):
        print("it works")

s = Something()
s.out() 
```

您需要`self`作为第一个参数传递给所有实例方法。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2019-12-04T17:17:20.953

Note that sometimes you will want to use the class type name inside its own definition, for example when using Python [Typing](https://docs.python.org/3/library/typing.html) module, e.g.

```
class Tree:
    def __init__(self, left: Tree, right: Tree):
        self.left = left
        self.right = right 
```

This will also result in

```
NameError: name 'Tree' is not defined 
```

That's because the class has not been defined yet at this point. The workaround is using so called [Forward Reference](https://www.python.org/dev/peps/pep-0484/#forward-references), i.e. wrapping a class name in a string, i.e.

```
class Tree:
    def __init__(self, left: 'Tree', right: 'Tree'):
        self.left = left
        self.right = right 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-10T23:58:47.820

您必须在创建类的实例之前定义类。将调用移动`Something`到脚本的末尾。

您可以尝试本末倒置，并在定义之前调用程序，但这将是一个丑陋的黑客攻击，您必须按照此处定义的方式滚动：

[使python文件中的函数定义独立于顺序](https://stackoverflow.com/questions/758188/make-function-definition-in-a-python-file-order-independant)

# html - IE 和 Firefox 中的 texarea 行为不同

> ID：14804094
> 
> 赞同：1
> 
> 时间：2013-02-10T23:57:47.630
> 
> 标签：html, css, textarea

我有以下代码：

测试.html：

```
 <textarea class ="errortext" rows="1" cols="30" value=""> </textarea> 
```

测试.css：

```
textarea.errortext {
    white-space: nowrap;
    overflow-y:  hidden;
    overflow-x:  hidden;
    overflow:    -moz-scrollbars-horizontal;
    width:auto; height:auto;
    position:absolute;
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
   } 
```

在 IE 中，它按预期工作，我看到一个 1 行和 30 个列的框，并且该框不可调整大小。在 Firefox 中，这是不正确的，并且该框是可抵抗的。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T00:01:03.807

如果我理解正确，为了防止文本区域在 FF 中调整大小，请将以下内容添加到您的选择器中：

```
textarea.errortext {
    resize:none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T00:00:55.573

您需要添加`resize: none`.

# python - pymongo find() vs find()[:]？

> ID：14804104
> 
> 赞同：1
> 
> 时间：2013-02-10T23:58:58.527
> 
> 标签：python, pyramid, pymongo

我正在使用 PyMongo，看到有人推荐使用 of`find()[:]`而不是`find()`. 很好奇有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T00:02:10.533

`[:]`制作列表的浅表副本，因此对对象的引用是相同的。我查看了 Pymongo 文档，我看不出有任何理由复制`find()`. 我认为情况更糟，因为您必须再次遍历结果集：

```
>>> from timeit import timeit
>>> timeit('range(100000)[:]', number=1000)
2.056607127195644
>>> timeit('range(100000)', number=1000)
1.1496167131002366 
```

# java - How do I read this particular *.DAT file? (From Age of Empires 2)

> ID：14804112
> 
> 赞同：2
> 
> 时间：2013-02-11T00:00:13.187
> 
> 标签：java

Basic info: I have a DAT file from Age of Empires 2 Conquerer, the expansion pack (Forgotten Empires).

Question: I want to be able to read the contents of it. I tried using FileReader method and FileInputStream - ObjectInputStream. The first one gives me a weird output "ì½|÷óÿ—..." and the other one gives me this error: java.io.StreamCorruptedException: invalid stream header: ECBD057C Afaik, every DAT file is different and one needs to know how it was made. I am noob at programming, so please excuse me if I haven't provided enough info.

More Details: Link to the file - [http://www.4shared.com/file/6SkPpm6r/empires2_x1_p1.html](http://www.4shared.com/file/6SkPpm6r/empires2_x1_p1.html) There are tools to read this file and edit it, however, I want to read it in a simple java program and extract what's inside of it. Tool to read it: [http://aok.heavengames.com/blacksmith/showfile.php?fileid=11002](http://aok.heavengames.com/blacksmith/showfile.php?fileid=11002)

Thanks a lot!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-11-21T10:26:50.370

如果您想在线阅读，请转到[NBT 编辑器](https://irath96.github.io/webNBT/)。将文件放在那里（从文件资源管理器中）。文件可能是可读格式。

# c++ - pcmpestri instruction to write similar strpos function?

> ID：14804119
> 
> 赞同：2
> 
> 时间：2013-02-11T00:00:56.023
> 
> 标签：c++, assembly, sse, strpos, sse4

How can the `pcmpestri` instruction be used to write a function similar to `strpos` function in C++? I can use g++ compiler.

`pcmpestri` is a new instruction that is found in SSE4

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-02-11T01:42:57.587

在使用 SSE 指令之前，您必须存储浮点堆栈，然后再恢复。这是昂贵的，除非你的字符串*很大*，否则不值得。对于巨大的字符串，更好的算法是要走的路（Boyer-Moore 等）。

# objective-c - GameKit GKLocalPlayer 别名为 NSDictionary 键

> ID：14804122
> 
> 赞同：0
> 
> 时间：2013-02-11T00:01:04.207
> 
> 标签：objective-c, nsdictionary, game-center, nsmutabledictionary, gamekit

我正在开发一个 iDevice 游戏，我想将本地玩家的分数存储在设备上。但是，本地播放器可能会发生变化。例如，如果一家人共用一台 iPad，那么他们可能会在玩游戏之前单独登录 GameCenter。为了解决这个问题，我决定将本地分数存储为字典，其中键由本地玩家确定，值是 GKScore 对象的数组。

我的第一个想法是使用 GKLocalPlayer 共享实例作为密钥，但由于它不符合 NSCopying，因此 GKLocalPlayer 不是理想的密钥候选者。我的第二个想法是使用本地播放器的标识符，但 Apple 声明“不要对播放器标识符字符串的内容做出假设。它的格式和长度可能会发生变化。” 当然，我担心如果某天玩家标识符发生神奇变化，玩家可能会失去本地分数。

我的最终想法是使用本地玩家的别名。我已确认未经身份验证的本地播放器的别名字符串等于`nil`. `[NSNull null]`在这种情况下用作字典键是否安全？假设本地玩家的别名将保持一致是否安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:18:29.027

唯一能保证永久的播放器是 playerID 字符串。当它说格式和长度可能会发生变化时，那是在尝试解释字符串的上下文的上下文中。AFAIK 并不是某个特定玩家的 ID 可能会改变，而是 Apple 将来可能会使用不同的方案生成 ID，因此您不应依赖具有任何特定格式的字符串或可从该字符串派生的某些信息。

但是，文档非常明确地表明这是正确的方法：

> Game Center 上的每个玩家帐户都被永久分配了一个唯一的玩家标识符字符串。您的游戏应使用此字符串来存储每个玩家的信息或消除玩家之间的歧义

# django - 使用 django 的 ModelFormMixin 的正确方法是什么？

> ID：14804123
> 
> 赞同：1
> 
> 时间：2013-02-11T00:01:04.520
> 
> 标签：django, django-forms, django-views

我已经阅读了这方面的文档，但我似乎无法让 django 的 ModelFormMixin 正常工作。这就是我在 urls.py 中的内容：

```
...
url(r'^vendors/edit/(?P<pk>\d+)/$', 'vendor_edit', name='vendor_edit'),
... 
```

在views.py中：

```
class VendorEditView(DetailView, ModelFormMixin):
    form_class = VendorForm
    model = Vendor
    success_url = reverse_lazy('vendor_list')
    template_name = 'vendor_edit.html' 
```

和模板：

```
<form action='.' method='post'>{% csrf_token %}
    {{ form }}
    <button>Save</button>
</form> 
```

`DetailView`除了( `View`, `TemplateView`, ) 之外，我尝试将它混合到不同类型的视图中，`FormView`但没有成功。

我期望发生的是，当我转到 时`/vendors/edit/1`，页面上会出现一个表单，其中已经填写了对象的详细信息以供编辑。我得到的要么是空白表格，要么是没有表格，要么是 405 HTTP 响应。我在这里有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:17:53.517

想通了：需要将 django`UpdateView`与 mixin 一起使用才能使其正常工作。

编辑：根据评论，无需将其混入`UpdateView`，因为它已经包含在继承链中。

# java - Java 集合方法

> ID：14804124
> 
> 赞同：3
> 
> 时间：2013-02-11T00:01:06.577
> 
> 标签：java

我开始学习 Java，我有一个关于泛型的问题。

`Collection<E>`在来自接口 的这个方法中：

`boolean containsAll( Collection <?> c);
boolean removeAll(Collection<?> c);
boolean retainAll ( Collection <?> c);`

为什么是参数 `Collection <?> c`而不是`Collection <E> c`？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T00:03:59.673

因为`E`需要指定类型参数，而通配符`?`适用于每种类型。细微的差别在于

*   `E`指任何指定的类型
*   `?`表示任何未知类型

由于这些方法应该适用于任何未知类型的集合，因此它们根本不指定类型参数。`E`是一个类型变量。`?`不是变量，是无法指定的占位符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T00:24:21.373

JDK 设计者希望以下代码成为可能：

```
Collection<String> strings = Arrays.asList("foo", "bar", "baz");
Collection<Object> objects = Arrays.asList("foo", 123);
strings.removeAll(objects);
// strigns now contains only "bar" and "baz" 
```

（上面的代码可能无法完全编译，因为我不记得如何`Arrays.asList()`捕获类型参数，但它应该明白这一点。）

也就是说，因为您可以调用`.equals()`任何一对对象并获得有意义的结果，所以您实际上不需要将这些方法限制为特定的项目类型。

# php - auto share links using php curl

> ID：14804125
> 
> 赞同：2
> 
> 时间：2013-02-11T00:01:25.567
> 
> 标签：php, facebook-graph-api

I want to auto share links in my facebook wall using this script :

```
 $attachment =  array(
    'email' => 'mail',
    'password' => 'password',
    'access_token' => 'my token',
    'message' => "my message",
    'name' => 'name',
    'link' => 'my_url',
    'description' => "my description"
    );

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, 'https://graph.facebook.com/me/links');
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_VERBOSE, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT,5);
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.001 (windows; U; NT4.0;    en-US; rv:1.0) Gecko/25250101');
    curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $result = curl_exec($ch);
    $json = json_decode($result);
    $post_id = $json->{'id'};
    curl_close($ch); 
```

at the began it worked for me but after trying it for 7 times or more i got this error :

```
{ "error": { "message": "(#100) The parameter url is required", "type": "OAuthException", "code": 100 } } 
```

how can I fix it

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:49:42.600

**链接**

*创造*

您可以通过向具有权限的**PROFILE_ID/feed**发出 HTTP POST 请求，代表用户**发布链接。****`publish_stream`**

 **其他字段取自“链接”参数中给出的页面 URL 的元数据。

如果创建成功，会得到如下返回。

参考：[https ://developers.facebook.com/docs/reference/api/user/#links](https://developers.facebook.com/docs/reference/api/user/#links)

```
curl_setopt($ch, CURLOPT_URL, 'https://graph.facebook.com/me/feed'); 
```**

# wcf - silverlight wcf 服务提示输入凭据

> ID：14804131
> 
> 赞同：0
> 
> 时间：2013-02-11T00:02:32.567
> 
> 标签：wcf, silverlight

我有一个调用 wcf 服务的 silverlight 应用程序，但在部署它时遇到了问题。

我可以发布文件，但是当应用程序尝试访问该服务时，它似乎没有得到任何回报。

该应用程序设置为使用 Windows 身份验证的客户端凭据

奇怪的是它没有抛出错误。silverlight 应用程序似乎只是以空白屏幕停止。

为了测试部署的服务，我尝试从浏览器访问它，并提示我输入凭据。我尝试输入我的姓名和密码，但它只是再次要求我提供凭据。

它提示我提供什么凭据？

我怎样才能克服这个？

这是客户端配置：

```
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IService" maxBufferSize="2147483647"
                    maxReceivedMessageSize="2147483647">
                    <security mode="TransportCredentialOnly" />
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>

            <endpoint address="../Service.svc" binding="basicHttpBinding"
                bindingConfiguration="BasicHttpBinding_IService" contract="ServiceReference1.IService"
                name="BasicHttpBinding_IService" />
        </client>
    </system.serviceModel>
</configuration> 
```

这是网络配置：

```
<configuration>
  <system.web>
    <httpRuntime executionTimeout="180" />
    <compilation debug="true" targetFramework="4.0" />
    <customErrors mode="Off"/>
  </system.web>

  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpStreamingBinding" maxBufferSize="2147483647"
          maxReceivedMessageSize="2147483647" transferMode="Streamed" receiveTimeout="01:00:00" sendTimeout="01:00:00">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
            maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Windows" />
            <!--<transport clientCredentialType="Ntlm" />-->
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>

    <client />

    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <serviceHostingEnvironment
        multipleSiteBindingsEnabled="true" />

    <services>
      <service name="CitationAir.MissionPlanning.WebService.Service">
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="BasicHttpStreamingBinding"
            contract="CitationAir.MissionPlanning.WebService.IService" />
      </service>
    </services>
  </system.serviceModel>

  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T06:55:10.157

使用`Windows Authentication`，如果关闭，您将收到密码提示`Integrated Windows Authentication`，这可能是因为您使用的是 Internet Explorer 以外的浏览器。

如果您的`account is locked out`，如果您正在连接到 中的服务`untrusted domain`，或者您的帐户没有足够`permissions`的权限访问该资源，则密码将不起作用。

在这种情况下可能是其中任何一个吗？

# linux - Bash script error with exponent expression

> ID：14804134
> 
> 赞同：0
> 
> 时间：2013-02-11T00:03:08.870
> 
> 标签：linux, bash

i'm writting a script with an outer loop and two inner loop, i must not be correctly typing out the syntax but i want to write an expression for my first inner loop where i raise $2 to the power of j + 1: $2^(j+1)

This is not a complete script:

```
 for((d=0;d<=($2**($j+1));d++)) <----
do

done 
```

What is the proper way to write such an expression in a for loop?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T00:13:23.880

你可以试试

```
for((d=0;d<=$(($2**($j+1)));d++)) <---- 
```

`$``((`在表达式周围签名并加倍。

取决于`bash`您使用的版本。有时你不需要`$`...

# java - 将 csv 文件的内容复制/写入到数组中

> ID：14804135
> 
> 赞同：0
> 
> 时间：2013-02-11T00:03:14.517
> 
> 标签：java

我目前正在学习 java，需要知道将 csv 文件的内容复制到数组中并再次将数组的内容复制到 csv 文件中的最简单方法。所以目前我有一个 CSV 文件 employee.csv 包含以下内容：

```
Name,Company,Experience. 
```

现在我需要检索经验大于 2 的员工，并将它们放入另一个包含姓名、经验的数组中。

我想将此数组写入另一个名为 results.csv 的 .csv 文件

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T00:50:02.210

我认为您应该尝试自己编写代码，而不是使用某些库来为您完成此任务。对于“正在学习 Java”的人来说，解析 CSV 文件是一个很好的练习。

下面是一个保存员工的类和解析文件的方法。可能应该有更多的错误检查代码。如果文件中有一行没有两个逗号，程序将崩溃。我没有为你处理经验值检查。您可以在创建员工时进行检查，并且仅在他们满足经验要求时才将新对象添加到数组中，或者您可以在写入文件之前检查该值。为了简化文件的输出，我在 Employee 中编写了一个 CSVString 方法。

```
public class Employee {
    private String name;
    private String company;
    private int experience;

    public Employee(String name, String company, int experience) {
        this.name = name;
        this.company = company;
        this.experience = experience;
    }

    public Employee(String name, String company, String exp) {
        this.name = name;
        this.company = company;
        try {
            experience = Integer.parseInt(exp.trim());
        }
        catch(NumberFormatException utoh) {
            System.out.println("Failed to read experience for " + name + 
                    "\nCannot conver to integer: " + exp);
        }
    }

    public String toCSVString() {
       return name + "," + company + "," + experience;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getCompany() {
        return company;
    }

    public void setCompany(String company) {
        this.company = company;
    }

    public int getExperience() {
        return experience;
    }

    public void setExperience(int experience) {
        this.experience = experience;
    }
} 
```

现在从文件中读取列表：

```
public static ArrayList<Employee> readEmployeeFile(File csvFile) {
   ArrayList<Employee> list = new ArrayList<>();
   Employee joe;
   try {
       Scanner in = new Scanner(csvFile);
       String line;
       while(in.hasNextLine()) {
            line = in.nextLine().trim();
            String[] col = line.split(",");
            joe = new Employee(col[0],col[1],col[2]);
            list.add(joe);
       }
       in.close();
    }
    catch(IOException ug) {
        System.out.println("Error reading line: " + line);
        System.out.println(ug);
    }
    return list;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T00:11:58.640

您可以在[这里查看](http://opencsv.sourceforge.net/)以找到读取和写入 csv 文件的方法。

您只需要`Experience`在读取文件后`employee.csv`和写入`result.csv`文件之前检查。

# android - 旋转时回收Android Maps V2 SupportMapFragment

> ID：14804137
> 
> 赞同：7
> 
> 时间：2013-02-11T00:03:24.870
> 
> 标签：android, google-maps-android-api-2

我希望在设备旋转时提高 SupportMapFragment 的性能。似乎必须重新创建片段。我不确定这一点，但是当设备旋转时，必须重新加载地图图块。从性能的角度来看，保留和重用整个 mapfragment 而不必重新实例化该片段是有意义的。对此的任何见解将不胜感激。

我在 xml 中声明 SupportMapFragment 并使用 API 文档中描述的 SetupMapIfNeeded()。

```
private void setUpMapIfNeeded() {
    // Do a null check to confirm that we have not already instantiated the
    // map.
    if (mMap == null) {
        // Try to obtain the map from the SupportMapFragment.
        mMap = ((SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map)).getMap();
        // Check if we were successful in obtaining the map.
        if (mMap != null) {
            setUpMap();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-16T06:58:29.723

查看示例中的 RetainMapActivity 类。奇迹般有效。这是：

```
public class RetainMapActivity extends FragmentActivity {

private GoogleMap mMap;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.basic_demo);

    SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()
            .findFragmentById(R.id.map);

    if (savedInstanceState == null) {
        // First incarnation of this activity.
        mapFragment.setRetainInstance(true);
    } else {
        // Reincarnated activity. The obtained map is the same map instance in the previous
        // activity life cycle. There is no need to reinitialize it.
        mMap = mapFragment.getMap();
    }
    setUpMapIfNeeded();
}

@Override
protected void onResume() {
    super.onResume();
    setUpMapIfNeeded();
}

private void setUpMapIfNeeded() {
    if (mMap == null) {
        mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                .getMap();
        if (mMap != null) {
            setUpMap();
        }
    }
}

private void setUpMap() {
    mMap.addMarker(new MarkerOptions().position(new LatLng(0, 0)).title("Marker"));
} 
```

}

# windows-7 - Building capybara-webkit on Windows 7

> ID：14804141
> 
> 赞同：2
> 
> 时间：2013-02-11T00:03:50.423
> 
> 标签：windows-7, capybara-webkit

I'm trying to use capybara-webkit on Windows 7 and am having problems. I'm trying to follow the instructions [here](https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit) but am having problems. Specifically I'm having issues building from source. The following is a small extract of the very large output from building.

This first output is from where the error is happening.

```
g++ -c -pipe -g -frtti -fexceptions -mthreads -Wall -Wextra -DUNICODE -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_WEBKIT_LIB -DQT_GUI_LIB -DQT_NETWORK_LIB -D QT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -I'c:/Qt/4.8.4/include/QtCore' -I'c:/Qt/4.8.4/include/QtNetwork' -I'c:/Qt/4.8.4/include/QtGui' -I'c:/Qt/4.8.4/include/QtWebKit' -I'c:/Qt/4.8.4/include' -I'c:/Qt/4.8.4/include/ActiveQt' -I'debug' -I'c:/Qt/4.8.4/mkspecs/win32-g++' -o debug/qrc_webkit_server.o debug/qrc_webkit_server.cpp
g++ -Wl,-subsystem,console -mthreads -o debug/webkit_server.exe object_script.webkit_server.Debug  -L'c:/Qt/4.8.4/lib' -lQtWebKitd4 -lQtGuid4 -lQtNetworkd4 -lQtCored4
./debug/Version.o: In function `ZN7Version5startEv':
c:\MyRailsProject\capybara-webkit\src/Version.cpp:11: undefined reference to `_imp___Z14qWebKitVersionv'
./debug/Version.o: In function `ZN7QStringpLERKS_':
c:/Qt/4.8.4/include/QtCore/../../src/corelib/tools/qstring.h:274: undefined reference to `_imp___ZN7QString6appendERKS_'
./debug/Version.o: In function `QString':
c:/Qt/4.8.4/include/QtCore/../../src/corelib/tools/qstring.h:419: undefined reference to `_imp___ZN7QString16fromAscii_helperEPKci' 
```

This is from the very end of the very long output chain

```
collect2: ld returned 1 exit status
make[2]: *** [debug/webkit_server.exe] Error 1
make[2]: Leaving directory `/c/MyRailsProject/capybara-webkit/src'
make[1]: *** [debug] Error 2
make[1]: Leaving directory `/c/MyRailsProject/capybara-webkit/src'
make: *** [sub-src-webkit_server-pro-make_default-ordered] Error 2
Command 'make' failed 
```

Does anyone know what I'm doing wrong and how to correctly compile capybara-webkit?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:07:15.207

我实际上通过获取正确版本的 QT 解决了这个问题。我最初下载了 Visual Studios 2008 版本，但在更改为 MingGW 版本后，一切正常。

# ruby-on-rails - 如何为您的应用添加专门的登录按钮

> ID：14804144
> 
> 赞同：0
> 
> 时间：2013-02-11T00:04:02.130
> 
> 标签：ruby-on-rails, ruby, login

现代 Web 应用程序正在使用一种新趋势，您可能已经看到了：使用您的 facebook 帐户登录，使用您的 google 帐户登录等等......它实际上正在这个网站上使用。

有没有办法将此功能实现到 Rails 应用程序中？即允许用户使用他们的google 或facebook 凭据登录到您的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T00:11:59.793

你可能想看看[omniauth](https://github.com/intridea/omniauth)和它的[railscasts](http://railscasts.com/episodes/241-simple-omniauth)

# javascript - 使用 jQuery 将 javascript 数组转换为单个变量

> ID：14804145
> 
> 赞同：0
> 
> 时间：2013-02-11T00:04:36.740
> 
> 标签：javascript, jquery

我正在尝试将数组分解为单个变量，然后我可以使用`$.ajax`.

我的数组如下：

```
var arr = [“11th”，“2 月”，“2013”​​]

// 我怎样才能遍历这个数组并获取每个元素并将其放入其单独的变量中？
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:35:29.570

您可以直接使用您的数组来发布数据

当您在 ajax 中发布您的帖子时，您可以发送不同的 var 等，分别发送 arr[0]、arr[1] 和 arr[2]。您可以通过在您的 ajax 帖子的配置中写入以下内容来做到这一点：

```
$.ajax({
    ..your config..,
    data: { 
        day: arr[0], 
        month: arr[1], 
        year: arr[2] 
    },
    ...your config...
}); 
```

# java - Run code from input like if it was written in the source code

> ID：14804149
> 
> 赞同：-3
> 
> 时间：2013-02-11T00:05:22.640
> 
> 标签：java

I'm currently writting a TCP/IP client in Java. The only thing that the client should be able to do is to run code that the server sends to it. I have seen [this question](https://stackoverflow.com/questions/10455752/how-to-execute-console-or-gui-input-as-if-it-was-actual-java-code) , but my problem is that the code would be ran like if it was another application, but if the client code contains a string and the server sends a message saying, read the string and send back the content, then the client would not be able to do so because that code would be executed in another program where that string dosen't exist :-(

So is there a way that i can run code from a input like if it was written in the source code of the program?

All help is much appreciated :-)

Example:

The client contains a string that says "string0001". The client should run the code that the server sends. The server sends a block of java-code that the client shouls be able to execute. The code says: check content of string and send it back to this ip. The client should now be able to read the string and send back "string0001" to the servers ip.

With the solution that the link provided, the code that the server sent would be executed like if it was another program, and in that program the string that the server requested the client to read does not exist.

The client whould now be able to run the code like if it was written in the clients source, where the string exist.

Hope that helps :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T00:12:30.010

那么第一个问题是发送的源代码必须是完整的。Java 是一种面向对象的语言，因此要执行的代码可能会引用尚未发送的类。

这导致了第二个问题......它如何知道它何时收到了所有代码，以及代码需要保存在哪些包和文件中？

如果代码是一个非常简单的例程，没有方法或类，您可以创建一个具有方法的类并将传递的代码插入其中，然后将其保存在内存中。

[然后，您可以使用与此处](https://stackoverflow.com/questions/7989135/is-it-possible-to-programmatically-compile-java-source-code-in-memory-only)回答的问题类似的例程来编译此代码。

# luabind - Luabind pure_out_value 拒绝编译

> ID：14804154
> 
> 赞同：1
> 
> 时间：2013-02-11T00:06:10.123
> 
> 标签：luabind

我在让 Luabind 使用函数的“pure_out_value”属性时遇到了一些问题。就我而言，Luabind 在编译期间出错，说模板不包含使用该属性所需的特定功能。

使用的代码与 Luabind 附带的 test_policies.cpp 中的代码非常相似：

```
class IConfiguration
{
    int GetString( const char* className, const char* entryName, char** ppszOut );
};

module( L )
[
    class_< IConfiguration >( "IConfiguration" )
        .def( "GetString", &IConfiguration::GetString, pure_out_value(_3) )
]; 
```

我尝试编译时遇到的错误：

```
'apply' : is not a member of 'luabind::detail::pure_out_value_policy<N,Policies>::only_accepts_nonconst_references_or_pointers'
'consumed_args' : is not a member of 'luabind::detail::pure_out_value_policy<N,Policies>::only_accepts_nonconst_references_or_pointers'
'consumed_args' : is not a member of 'luabind::detail::pure_out_value_policy<N,Policies>::only_accepts_nonconst_references_or_pointers'
'converter_postcall' : is not a member of 'luabind::detail::pure_out_value_policy<N,Policies>::only_accepts_nonconst_references_or_pointers'
'match' : is not a member of 'luabind::detail::pure_out_value_policy<N,Policies>::only_accepts_nonconst_references_or_pointers' 
```

环境的相关资料：

*   Lua 5.1.4（按位补丁）
*   Luabind 0.9.1
*   提升 1.53
*   Visual Studio 2012 w/Update 1（使用 v110_xp 设置编译。）

我还尝试过使用 Luabind 的 5.2 补丁版本（仍然支持 5.1），可以在这里找到： [https ://bitbucket.org/cinderblocks/luabind](https://bitbucket.org/cinderblocks/luabind)

Luabind 的其余部分似乎工作正常，但不是 pure_out_value 策略。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:32:23.470

当然，在发布寻求帮助后，我发现了问题所在。爱当那发生..

对于遇到类似问题的任何人，问题出在我与 pure_out_value 一起使用的 arg 数字上。在我上面的例子中，由于参数是类成员函数的一部分，我忘记考虑自动发生的“this”参数。所以应该是_4而不是_3。

现在效果很好。:)

# c# - 更新图像时，二进制数据接缝被截断

> ID：14804156
> 
> 赞同：0
> 
> 时间：2013-02-11T00:06:47.947
> 
> 标签：c#, sql-server-2008-r2

我在这里束手无策，试图找出我做错了什么。我的目标是简单地将图像旋转 90 度并将更改后的完整图像保存回文件系统，然后更新数据库中的缩略图版本。文件系统图像被适当地更改，但是当图像被保存回数据库时，它只保存前 28 个字符。SQL 报告没有错误。

非常感谢我在这里做错了什么的任何想法。提前致谢。

```
 Image image = Image.FromFile(image_path);
    image.RotateFlip(RotateFlipType.Rotate90FlipNone);
    image.Save(image_path, System.Drawing.Imaging.ImageFormat.Jpeg);

    Byte[] thumbnail = null;
    System.Drawing.Image thumb = image.GetThumbnailImage(72, 47, () => false, IntPtr.Zero);
    thumbnail = imageToByteArray(thumb);
    image.Dispose();

        string conn = ConfigurationManager.ConnectionStrings["MY_DATABASE"].ConnectionString;
        SqlConnection sqlConn = new SqlConnection(conn);
        SqlCommand sqlComm = new SqlCommand();
        sqlComm = sqlConn.CreateCommand();
        sqlComm.CommandText = @"UPDATE MY_TABLE SET pic='@thumbnail' WHERE pic_id= cast(@pic_id As Int) ";
        sqlComm.Parameters.Add("@thumbnail", SqlDbType.Image, thumbnail.Length).Value = thumbnail;
        sqlComm.Parameters.Add("@pic_id", SqlDbType.Int);
        sqlComm.Parameters["@pic_id"].Value = Convert.ToInt32(pic_id);
        try
        {
            sqlConn.Open();
            Int32 rowsAffected = sqlComm.ExecuteNonQuery();
            context.Response.Write("rowsAffected:" + rowsAffected + "<br/>");
        }
        catch (Exception ex)
        {
            context.Response.Write(ex.Message);
        }
        //sqlConn.Open();
        //sqlComm.ExecuteNonQuery();
        sqlConn.Close();

        context.Response.BinaryWrite(thumbnail); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:11:57.027

MY_TABLE SET pic='@thumbnail'

看起来很可疑，为什么引用？

猜测一下，我会说您正在覆盖位图中的标题，无论字符串“@thumbnail”等同于什么位模式，都对应于您在标题中设置的“28”长度。

[http://en.wikipedia.org/wiki/BMP_file_format](http://en.wikipedia.org/wiki/BMP_file_format)

# sed - Sed：在最后一次出现后追加

> ID：14804158
> 
> 赞同：6
> 
> 时间：2013-02-11T00:06:56.430
> 
> 标签：sed

假设我有以下类型的文件：

```
<?xml version="1.0" encoding="utf-8"?>
<preferences>
  <section id="widgets">
    <value id="version" xml:space="preserve">1</value>
  </section>
  <section id="wuid-b2a8e6b8-6619-714e-9cfe-466c27c90902">
    <value id="path to widget data" xml:space="preserve">{Preferences}widgets/opera-adblock-1.3.4-1.oex</value>
  </section>
  <section id="wuid-0c5cfdb2-8e51-f149-a1e7-51d66240ed7a">
    <value id="path to widget data" xml:space="preserve">{Preferences}widgets/flag-button-1.5.4-1.oex</value>
  </section>
</preferences> 
```

我的任务是在最后一次出现`</section>`.

看看这两个，似乎利用`tac`会更简单，但我也不明白如何做到这一点：[使用 sed 将字符串附加到模式的第四次出现](https://stackoverflow.com/questions/9315959/using-sed-to-append-a-string-to-the-fourth-occurrence-of-a-pattern/9317095#9317095)，[http://www.unix.com/unix- dummies-questions-answers/46294-add-line-after-last-occurnace-pattern.html#post302149709](http://www.unix.com/unix-dummies-questions-answers/46294-add-line-after-last-occurnace-pattern.html#post302149709)

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T06:55:01.453

这可能对您有用（GNU sed）：

```
sed '/\/section/{x;/./p;x;h;d};x;/./!{x;b};x;H;$!d;x;s/\/section[^\n]*\n/&  HELLO\n/' file 
```

本质上：遇到包含`/section`开始将所有剩余行存储到文件末尾的保留空间（HS）中的行。如果行已经在保持空间中并且遇到另一个这样的行，则打印 HS 中的行并再次开始存储行。在文件末尾插入所需的字符串并打印出存储的行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T00:14:00.677

在最后一个section标签之后插入文本，即在结束“preferences”标签之前：

```
sed 's#</preferences>#  HELLO\n&#' file.xml 
```

输出如下所示：

```
...
  </section>
  HELLO
</preferences> 
```

要做到这一点，请使用`-i`标志：

```
sed -i 's#</preferences>#  HELLO\n&#' file.xml 
```

做一个管道：

```
cat file.xml | ...whatever... | sed 's#</preferences>#  HELLO\n&#' 
```

注意，在 XML上使用`sed`和正则表达式往往会导致问题，因为 XML 既不是基于正则表达式也不是基于行。为了做得更好，请在 perl、python、ruby、java 等中使用真正的 XML 解析器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T00:16:45.543

单程 ：

```
sed -i 's@</preferences>@  <section id="x">\n   <value id="path to widget data" xml:space="preserve">{Preferences}widgets/xxxx</value>\n  </section>\n&@' file.xml 
```

这个片段`<section>`在`XML`文件中添加了一个新的。

## 结果

```
<?xml version="1.0" encoding="utf-8"?>
<preferences>
  <section id="widgets">
    <value id="version" xml:space="preserve">1</value>
  </section>
  <section id="wuid-b2a8e6b8-6619-714e-9cfe-466c27c90902">
    <value id="path to widget data" xml:space="preserve">{Preferences}widgets/opera-adblock-1.3.4-1.oex</value>
  </section>
  <section id="wuid-0c5cfdb2-8e51-f149-a1e7-51d66240ed7a">
    <value id="path to widget data" xml:space="preserve">{Preferences}widgets/flag-button-1.5.4-1.oex</value>
  </section>
  <section id="x">
   <value id="path to widget data" xml:space="preserve">{Preferences}widgets/xxxx</value>
  </section>
</preferences> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-11T00:22:59.953

在第一次出现字符串之前添加内容更容易：

```
sed '/<\/preferences>/i\ADD SOME TEXT\nADD SOME MORE TEXT' file 
```

结果：

```
<?xml version="1.0" encoding="utf-8"?>
<preferences>
  <section id="widgets">
    <value id="version" xml:space="preserve">1</value>
  </section>
  <section id="wuid-b2a8e6b8-6619-714e-9cfe-466c27c90902">
    <value id="path to widget data" xml:space="preserve">{Preferences}widgets/opera-adblock-1.3.4-1.oex</value>
  </section>
  <section id="wuid-0c5cfdb2-8e51-f149-a1e7-51d66240ed7a">
    <value id="path to widget data" xml:space="preserve">{Preferences}widgets/flag-button-1.5.4-1.oex</value>
  </section>
    ADD SOME TEXT
    ADD SOME MORE TEXT
</preferences> 
```

[您可以在此处](http://www.grymoire.com/Unix/Sed.html#uh-41)阅读有关如何在字符串前插入一行的更多信息。HTH。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T02:20:44.083

使用 awk 你可以这样做

```
awk '$0 ~ /<\/pref/{print "Hello\n"$0}' temp.txt 
```

输出

```
Hello
</preferences> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-07T16:48:21.260

[@Steve](https://stackoverflow.com/users/751863/steve)上面的答案是解决这个问题的正确方法，但它包含一个导致它在 OS X 上失败的怪癖。编码多行插入`sed`脚本的正确、可移植的方法是：

1.  在实际内容之前加上换行符，
2.  使用反斜杠转义每个换行符（包括命令后的第一个换行符）。

鉴于您最初帖子中的文字，这是一个更新的示例：

```
sed -i '' '/<\/preferences>/i\
ADD SOME TEXT\
ADD SOME MORE TEXT\
' test.xml 
```

* * *

作为参考，摘自[OS X`sed(1)`手册页](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/sed.1.html "人 sed(1)")，

```
 [2addr]H
             Append a newline character followed by the contents of the pattern space to the hold space.

     [1addr]i\
     text    Write text to the standard output.

     [2addr]l
             (The letter ell.)  Write the pattern space to the standard output in a visually unambiguous 
```

……并来自[GNU`sed(1)`手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?sed)：

```
 text   Append text, which has each embedded newline preceded by a back-
          slash.

       i \

       text   Insert text, which has each embedded newline preceded by a back-
          slash.

       q      Immediately  quit  the  sed  script  without processing any more
          input, except that if auto-print is  not  disabled  the  current 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-05T08:15:14.530

这是我要在 last 之后添加一行时的方法`#include`。

```
grep -n '#include' $file | tail -1 | cut -f1 -d: | xargs -I % echo %+1 | bc | 
xargs -I '{}' sed -i '{}i// clang-format off' $file 
```

*   获取最后一次出现的行号并将其加 1。
*   使用 sed 在该行插入一行。

# list - 从 scala 列表中获取头项和尾项

> ID：14804159
> 
> 赞同：24
> 
> 时间：2013-02-11T00:07:18.567
> 
> 标签：list, scala, split

scala 中是否有获取 List 或 Seq 的（单个）头部元素和列表的（集合）尾部的方法？我知道有

```
def splitAt(n: Int): (List[A], List[A]) 
```

我可以轻松地从元组的第一个列表中获取单个项目。但是有没有基本上是这样的内置方法？

```
def splitAtHead: (Option[A], List[A]) 
```

就像我说的，您可以轻松地链接`splitAt`以返回正确的签名，但我认为内置方法可能能够保存中间元组。

编辑：

@om-nom-nom 的回答是正确的，但这就是为什么我不能使用他的第二个版本。

```
List[S](s1, s2, s3, s4).sortBy { _.f (h) } match {
    case hd :: tail => recurse(tail)
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-11T00:09:39.380

您可以使用模式匹配：

```
val hd::tail = List(1,2,3,4,5)
//hd: Int = 1
//tail: List[Int] = List(2, 3, 4, 5) 
```

或者只是 .head/.tail 方法：

```
val hd = foo.head
// hd: Int = 1
val hdOpt = foo.headOption
// hd: Option[Int] = Some(1)
val tl = foo.tail
// tl: List[Int] = List(2, 3, 4) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-12-18T09:54:04.553

该`tail`方法返回一个由除第一个元素（基本上是 ）之外的所有元素组成的*集合*`head`。

```
+------------------+------------------------+-------------------------------+
|      Input       |          head          |             tail              |
+------------------+------------------------+-------------------------------+
| List()           | NoSuchElementException | UnsupportedOperationException |
| List(1)          | 1                      | List()                        |
| List(1, 2, 3, 4) | 1                      | List(2, 3, 4)                 |
| ""               | NoSuchElementException | UnsupportedOperationException |
| "A"              | 'A' (char)             | ""                            |
| "Hello"          | 'H'                    | "ello"                        |
+------------------+------------------------+-------------------------------+ 
```

请注意，这两种方法也适用于`String`类型。

回答@Leandro 问题：是的，我们可以这样做，如下所示：

```
scala> var a::b::c = List("123", "foo", 2020, "bar")
a: Any = 123
b: Any = foo
c: List[Any] = List(2020, bar)

scala> var a::b::c = List("123", "foo", "bar")
a: String = 123
b: String = foo
c: List[String] = List(bar)

scala> var a::b::c = List("123", "foo")
a: String = 123
b: String = foo
c: List[String] = List() 
```

# facebook - facebook 应用程序抛出 405 错误

> ID：14804161
> 
> 赞同：0
> 
> 时间：2013-02-11T00:07:33.613
> 
> 标签：facebook

我将一个 html 游戏页面作为应用程序添加到 facebook 开发者页面，它抛出 405 method not allowed 错误。有人可以帮助我吗？应用详情：[http ://apps.facebook.com/kannayya/](http://apps.facebook.com/kannayya/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:36:34.243

Facebook 通过 POST 加载应用程序。该错误与 Facebook 无关，它是您的服务器抛出的错误。确保允许 POST，并允许您在开发者控制台中为您的应用设置的特定画布 URL。

# testing - Playframework 2.1 测试 POST 请求中的 JSON 无效

> ID：14804162
> 
> 赞同：3
> 
> 时间：2013-02-11T00:07:33.860
> 
> 标签：testing, playframework, playframework-2.1

我正在尝试测试 POST 路由（在 Playframework 2.1/Java 上）并不断收到错误请求 - 无效的 JSON 响应。

请让我知道我做错了什么。我的测试代码如下。

```
 running(fakeApplication(), new Runnable() {
                        public void run() {

            Map map = new HashMap();
            map.put("key1", "val1");
            map.put("key2", 2);
            map.put("key3", true);
            JsonNode df= Json.toJson(map);

            Result result = route
                    (fakeRequest(POST, "/item").withHeader("Content-Type", "application/json").withSession(AccountTest.USER_KEY, "some key")
                            .withSession(AccountTest.PROVIDER_KEY, "facebook").withJsonBody(df));

            Logger.debug("result is "  + contentAsString(result));
            System.out.println("result is "  + contentAsString(result));

                assertThat(result).isNotNull();

//                assertThat(result).isNotNull();
//                assertThat(result).isEqualTo("hello");
            }

        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:40:39.903

这是 Play 2.1 (Java) 中记录的错误。请参考此处的错误和 git-pull 请求[https://play.lighthouseapp.com/projects/82401/tickets/984-adding-json-body-to-play-21-java-returns-invalid-json-消息#ticket-984-8](https://play.lighthouseapp.com/projects/82401/tickets/984-adding-json-body-to-play-21-java-returns-invalid-json-message#ticket-984-8)

# node.js - Mongoose find query doesn't work even equivalent query works fine on mongodb

> ID：14804168
> 
> 赞同：0
> 
> 时间：2013-02-11T00:08:17.180
> 
> 标签：node.js, mongodb, mongoose

I'm implementing a tag system in my page. When user entry any string it will trigger my express route and try to find the content typed to fill a list and return it as JSON to process the callback. The problem is about moongose, because the query is pretty right and works fine if I execute it on mongo shell.

The query:

```
var token = '/.*' + req.query.search + '.*/i';
Tag.find({ description: token , inactivatedAt: null }, function(err, tags) {
    var tempArray = [];

    if (tags) {
        var counter = 0;

        tags.forEach(function(tag) {
            var dArray = [];

            dArray.push(counter++);
            dArray.push(tag.description);
            dArray.push(null);
            dArray.push(null);
            tempArray.push(dArray);
        });
    }

    res.writeHead(200, {'content-type': 'text/json'});
    res.end(JSON.stringify(tempArray));
}); 
```

Even if I query as `description: { $regex: token }` or `description: token` the result is not found. The same query parameters are fine and brings result from the mongo on the shell. E.g.: `db.tags.find({ description: /.*MET.*/i , inactivatedAt: null }).pretty()` but my mongoose query doesn't work.

Any clue will be very helpful. Thanks in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T00:17:47.337

You need to convert `token` into a regular express instead of just a string:

```
var token = new RegExp(req.query.search, 'i'); 
```

# google-apps-script - GAS...GUI 编辑器...移动表单

> ID：14804171
> 
> 赞同：1
> 
> 时间：2013-02-11T00:08:42.263
> 
> 标签：google-apps-script

我有一个简单的 GAS 表格，我希望它对移动设备友好。这是它的样子：

[https://script.google.com/macros/s/AKfycbxn6ZasFshHZ6AR0TQzPCv0CUtVNBVbWLSwt1fbOtnc/dev](https://script.google.com/macros/s/AKfycbxn6ZasFshHZ6AR0TQzPCv0CUtVNBVbWLSwt1fbOtnc/dev)

Q1- 我希望表单自动缩放以适应（移动）屏幕。它是使用 GUI 编辑器构建的。文本框设置为宽度和高度的百分比。

我不知道 HTML5，但这似乎是移动格式化的方式。您可以将 HTML5 集成到 GUI 编辑器使用的代码中吗？您在 GUI 编辑器中还有其他格式建议吗？

Q2 - 我不希望将文本放在文本框中，而是希望它是在选中框时消失的*占位符文本。*这可能吗？

谢谢，内森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-20T21:32:32.147

For the textholder thing, it is possible to do it without serverhandler, by using validator.

```
 var textbox = app.createTextBox().setValue('placeholder').setStyleAttribute('color', 'gray');
  textbox.addFocusHandler(app.createClientHandler().validateMatches(textbox, '^placeholder$').forEventSource().setText('').setStyleAttribute('color','black'));
  textbox.addBlurHandler(app.createClientHandler().validateLength(textbox, 0, 0).forEventSource().setText('placeholder').setStyleAttribute('color','gray')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T01:29:45.110

Q1：我不能完全回答，但看起来您可以使用 、 或 将大多数元素设置为百分比宽度`setWidth`和`setHeight`高度`setSize`。

Q2：您要做的是设置一个 onFocus 处理程序，以便在用户单击该字段时文本消失（此操作称为“聚焦”元素）。这可以通过 ClientHandler 完成，这意味着它会很快。

```
var text = app.createTextBox().setId("textbox").setName("textbox")
    .setStyleAttribute("color","gray").setValue("Input text here");
var focusHandler = app.createClientHandler().forEventSource().setText("")
    .setStyleAttribute("color","black");
text.addFocusHandler(focusHandler); 
```

如果用户将该字段留空，您可以将其更改回原始文本并再次将其着色为灰色，但这次您必须使用 ServerHandler，因为我们需要检查该字段是否为空白。此外，离开现场被称为“模糊”。

```
var blurHandler = app.createServerHandler("textboxBlurred").addCallbackElement(text);
text.addBlurHandler(blurHandler);
...
function textboxBlurred(e) {
  var app = UiApp.getActiveApplication();
  if (e.parameter.textbox=="") {
    var box = app.getElementById("textbox");
    box.setValue("Input text here");
    box.setStyleAttribute("color", "gray");
  }
  return app;
} 
```

# python - 如何调用交互式程序并立即显示输出

> ID：14804173
> 
> 赞同：0
> 
> 时间：2013-02-11T00:09:11.730
> 
> 标签：python, python-3.x, subprocess

我需要在进程中调用交互式程序并在进程运行时打印其输出。到目前为止，我正在使用此功能：

```
def call(command):
    process = subprocess.Popen(command, shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)

    while True:
        line = process.stdout.readline().rstrip().encode("utf-8")
        if line == '':
            break

        print(line)

    process.wait()
    return process.returncode 
```

问题是，交互式程序可能会等待用户输入并且不会在问题后添加新行，例如：

> 认证领域：...> ...
> 
> 用户名：

在“用户名：”之后，没有新行并且程序需要用户输入，所以我的代码没有显示“用户名：”。

除了 readline()，我需要一些函数，比如 bytesavailable 和 read(size)，但是没有 bytesavaiable() 这样的函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T00:16:24.317

您需要自己捕获程序的输出，还是只需要将其显示给用户？如果只是需要显示，可以考虑让进程直接将其写入标准输出：

```
process = subprocess.Popen(command, shell=True) 
```

这巧妙地避免了将您自己的直通解决方案组合在一起的需要。

* * *

如果您*确实*需要捕获程序输出，您可以直接调用`.read()`而不指定大小。它会阻塞直到它有一些数据要读取（或者直到流完成，在这种情况下它会返回一个空字符串），但它不一定要等到行尾才返回，不像`.readline()`.

# javascript - 我如何将backbone.js中的事件延迟绑定到某个时间之后？

> ID：14804175
> 
> 赞同：1
> 
> 时间：2013-02-11T00:09:16.477
> 
> 标签：javascript, events, backbone.js, backbone-events

```
app.myView = Backbone.View.extend({
   events: {
   'mouseenter .myitem': 'myfunction'
   }    
}); 
```

我如何将此事件的创建延迟到某个时间或直到我决定要创建它。现在它是在我的视图加载后立即创建的，并且一旦我输入 .myitem 就会触发 mouseevent

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T00:16:33.993

你总是可以手动创建它（使用`events`对象只是一个快捷方式）：

```
// call this somewhere once you're ready to attach the callback method    
this.$el.on(eventName, _.bind(method, this)); 
```

或者用你的例子：

```
this.$el.on('mouseenter .myitem', _.bind(this.myfunction, this)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T01:01:24.007

Backbone 使用以下方式绑定视图事件`delegateEvents`：

> **委托事件** `delegateEvents([events])`
> 
> 使用 jQuery 的`on`函数为视图中的 DOM 事件提供声明性回调。如果未直接传递**事件**`this.events`哈希，则用作源。
> [...]
> 再次运行**delegateEvents**时，可能使用不同的`events`哈希，所有回调都将被删除并重新委托 - 对于需要在不同模式下表现不同的视图很有用。

您可以随时调用`delegateEvents`更改事件绑定。因此，一种方法是调整`this.events`并调用`this.delegateEvents()`：

```
add_event: function() {
    this.events = _({}).extend(this.events, {
        'mouseenter .myitem': 'myfunction'
    });
    this.delegateEvents();
} 
```

[`extend`](http://underscorejs.org/#extend)调用是一个好主意，因为会`Backbone.View.extend`留下`events`附加的视图原型，所以简单地改变`this.events`：

```
this.events['mouseenter .myitem'] = 'myfunction'; 
```

将改变`events`视图的所有实例。这样做的好处是调用[`undelegateEvents`](http://backbonejs.org/#View-undelegateEvents)将做正确的事情，并且您的所有视图事件都将以相同的方式处理。

演示：http: [//jsfiddle.net/ambiguous/Bd4SB/](http://jsfiddle.net/ambiguous/Bd4SB/)

# c++ - 为什么我会收到此错误：在 '&' 标记之前应为 ')'？

> ID：14804176
> 
> 赞同：4
> 
> 时间：2013-02-11T00:09:37.267
> 
> 标签：c++, compiler-errors

我认为它与#includes 有关，但这是我第一次尝试使用它们，所以我有点迷茫。我只是想知道是否有人可以立即判断是否有明显的错误。

```
 /** @file Translator.cpp */

#include <fstream>
#include "Translator.h"
#include <vector>

Translator(std::ifstream& fin)  //error appears on this line
{
    T1(fin);
    T1.createTable(fin);
    T2(fin);
    T2.createTable(fin));
    string temp;
    while(!fin.eof())
    {
    fin >> temp;
    message.push_back(temp);
    }
} 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T00:12:50.883

不看标题很难准确回答这个问题，但如果这是一个函数，则需要在`void`函数的定义中添加一个返回类型：

```
void Translator(std::ifstream& fin) {
    ...
} 
```

如果这是一个构造函数，则需要提供其限定名称：

```
Translator::Translator(std::ifstream& fin) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T00:16:19.833

没有`Translator`它的声明有点难说，但如果它是一个构造函数，那么它应该是`Translator::Translator(std::ifstream& fin)`. 如果它是一个方法，那么它应该有一个指定的返回类型，比如`void Translator(std::ifstream& fin)`.

# c - msync 是原子的吗？

> ID：14804181
> 
> 赞同：1
> 
> 时间：2013-02-11T00:10:06.507
> 
> 标签：c, unix, memory-mapping

使用`mmap`//时，读/写是原子的吗`msync`？`munmap`（假设磁盘将在断电时完成所有挂起的写入）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T00:25:23.770

涉及多个页面或多个磁盘扇区的操作从来都不是精确的原子操作。

研究两个特定事物之间的*一致性*可能更有用。

例如，在两个同时使用*mmap(2)*文件的程序或线程之间，它们已经是连贯的并且`msync(2)`与此无关。所做`msync`的只是导致内核将修改后的页面写入*底层存储系统*......对于同一系统上的其他读取器和写入器也使用*mmap()*没有必要或没有帮助。

如果您想使用不同的工具（共享存储或非 mmap I/O）并同步访问，您将需要一个真正的信号量或互锁。我认为 msync() 没有用。为了给您更多帮助，我们需要更多地了解您尝试同步的内容。

# php - PHP删除特定网站的链接但保留文本

> ID：14804182
> 
> 赞同：1
> 
> 时间：2013-02-11T00:10:19.657
> 
> 标签：php, hyperlink, preg-replace

例如，`<a href="http://msdn.microsoft.com/art029nr/">remove links to here but keep text</a> but <a href="http://herpyderp.com">leave all other links alone</a>`

我一直在尝试使用 preg_replace 解决这个问题。我在这里搜索并找到了解决问题的答案。

PHP的答案[：从文本](https://stackoverflow.com/questions/9856933/php-remove-all-hyperlinks-of-specific-domain-from-text)中删除特定域的所有超链接会删除指向特定 url 的链接，但也会删除文本。

[http://php-opensource-help.blogspot.ie/2010/10/how-to-remove-hyperlink-from-string.html](http://php-opensource-help.blogspot.ie/2010/10/how-to-remove-hyperlink-from-string.html)上的站点从字符串中删除了超链接，但我似乎无法修改模式使其仅适用于特定网站。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T00:31:42.100

```
$html = '...I can haz HTML?...';
$whitelist = array('herpyderp.com', 'google.com');

$dom = new DomDocument();
$dom->loadHtml($html);    
$links = $dom->getELementsByTagName('a');

foreach($links as $link){
  $host = parse_url($link->getAttribute('href'), PHP_URL_HOST);

  if($host && !in_array($host, $whitelist)){    

    // create a text node with the contents of the blacklisted link
    $text = new DomText($link->nodeValue);

    // insert it before the link
    $link->parentNode->insertBefore($text, $link);

    // and remove the link
    $link->parentNode->removeChild($link);
  }  

}

// remove wrapping tags added by the parser
$dom->removeChild($dom->firstChild);            
$dom->replaceChild($dom->firstChild->firstChild->firstChild, $dom->firstChild);

$html = $dom->saveHtml(); 
```

* * *

对于那些害怕使用 DomDocument 而不是`preg_replace`出于性能原因的人，我在此代码和 Q 中链接的代码（完全删除链接的代码）之间进行了快速测试 => DomDocument 仅慢了约 4 倍。

# java - 如何设置 jdbc 驱动程序类路径

> ID：14804184
> 
> 赞同：0
> 
> 时间：2013-02-11T00:10:47.253
> 
> 标签：java, mysql, jdbc, classpath

当我将 mysql jdbc 驱动程序复制到 JDK 的\jre\lib\ext 时，它执行得非常好。现在，我想通过将其类路径指定为环境变量来使用 jdbc。但是，这样做之后，我的程序抛出异常：

> “java.sql.SQLException：找不到适合 jdbc 的驱动程序：mysql://localhost/books”

如何设置类路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T00:13:34.530

您不应该将任何 JAR 放在 jre/lib/ext 文件夹中。

编译时使用 javac.exe 上的 -classpath 选项设置 CLASSPATH，运行时使用 java.exe 上的选项。确保您的代码和所有 3rd 方 JAR 在编译和运行时都在 CLASSPATH 中。Windows 使用分号作为分隔符；Linux 使用冒号。

也许你需要从这里开始：

[http://docs.oracle.com/javase/tutorial/getStarted/cupojava/win32.html](http://docs.oracle.com/javase/tutorial/getStarted/cupojava/win32.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T00:51:31.107

您可以通过在 java 命令中使用`-cp`开关（与`-classpath`.

`java -cp myjdbc.jar your.package.YourClass`

如果你有更多的 jar 文件，你可以在 Windows 上用分号隔开，在 Linux/Unix 上用冒号隔开。通常还直接包含 current，我们将所有需要的 jar 文件放在一个`/lib`文件夹中，所以它看起来像这样（在 Windows 上）：

`java -cp .;lib/myjdbc.jar your.package.YourClass`

另外，如果您有很多 jar 文件，将它们全部放在`/lib`文件夹中并具有以下内容会更方便：

`java -cp .;lib/* your.package.YourClass`

# c++ - AppInit_DLLs 可以用来从 Ws2_32.dll 挂钩 API 吗？

> ID：14804195
> 
> 赞同：1
> 
> 时间：2013-02-11T00:12:55.657
> 
> 标签：c++, winapi, hook, winsock, winsock2

我正在寻找将出站 TCP/IP 连接从 Windows 客户端上的特定端口重定向到不同端口号的方法。（这是提供从用于文件和打印机共享的端口 445 重定向 SMB 连接的能力所必需的。）

除了挂钩 WinSock API 并在那里更改端口之外，我找不到其他方法。我找到了[AppInit_DLLs](http://msdn.microsoft.com/en-us/library/windows/desktop/dd744762%28v=vs.85%29.aspx)技术，我想知道它是否可以用来挂钩 Ws2_32.dll（这似乎包含 WinSock API）？

我的想法是[连接](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737625%28v=vs.85%29.aspx)并[接受](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737526%28v=vs.85%29.aspx)通常设置端口号的 API。这一切都只是一个想法，所以在我真正开始编码之前，我会很感激有人对此采取了行动......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-13T12:42:38.603

为什么不？是的，这是可能的，但不要忘记在挂钩之前加载 DLL。因为 AppInit 在 user32.dll 加载时被加载（而且肯定是在加载 ws2_32 之前）。

看看弯路，或者尝试制作一个自己的内联钩子。请注意多线程应用程序，您必须使用多线程安全挂钩。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-01-12T19:03:57.423

不幸的是，这是不可能的。您最好的办法是制作一个代理 DLL，用您自己的方法替换您希望挂钩的自定义方法。

# ruby-on-rails - 选择用户尚未响应的请求

> ID：14804201
> 
> 赞同：0
> 
> 时间：2013-02-11T00:13:47.647
> 
> 标签：ruby-on-rails, postgresql, activerecord, having-clause

我正在使用 heroku/rails/pgsql 9.1.6 并将我的头撞在墙上，感觉应该是一个非常简单的查询。

我想显示用户尚未回复的最近“请求”

## 尝试 1（在我推送到 heroku/pgsql 之前工作）：

```
Request.includes(:responses).where("(select count(responses.id)=0 WHERE responses.user=?) AND requests.created_at > ?", user_id, days_ago ) 
```

一旦我推送到heroku，该查询就会产生一个错误：

> ActiveRecord::StatementInvalid: PGError: ERROR: 在 WHERE 子句中不允许聚合

## 尝试2：“拥有”

我在 StackOverflow 上发现一个帖子说我应该尝试“Having”，所以我修改为

```
Request.includes(:responses).having("responses.user_id=? AND count(responses.id)=0", user_id).where("requests.created_at > ?", days_ago ) 
```

这产生了一个新的错误。ActiveRecord::StatementInvalid: PGError: 错误:

> 列“requests.id”必须出现在 GROUP BY 子句中或在聚合函数中使用

## 尝试 3：“组”

然后我将该查询修改为

```
Request.includes(:responses).group("requests.id").group("responses.id").having("responses.user_id=? AND count(responses.id)=0", user_id).where("requests.created_at > ?", days_ago ) 
```

这会运行，但即使我知道它应该返回一个值，它也会返回一个空集。

## 最佳的揣测：

我怀疑此时的问题在于 2 部分有子句，并且在当前格式中，它无意中排除了没有响应的用户（因此将始终是一个空集）：

例如 `having("responses.user_id=? AND count(responses.id)=0", user_id)`，

与原来的嵌入式选择相反：

> 选择计数（responses.id）=0 WHERE response.user=?

但我不确定对于没有回应的表面用户来说，have 子句的正确形式应该是什么。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:28:15.967

尝试

```
Request.where('(SELECT Count(*) FROM responses WHERE responses.request_id = requests.id) > 0') 
```

# android - 如何在不同的文本视图中获取在edittext中输入的每个字母的显示

> ID：14804205
> 
> 赞同：0
> 
> 时间：2013-02-11T00:14:06.640
> 
> 标签：android, textview, android-edittext

就我而言，我在当前活动中设置了编辑文本和一个按钮，然后例如我在编辑文本中输入了“嘿” *这是我当前活动的当前代码

```
 text = (EditText)findViewById(R.id.editText1);
     compose = (Button)findViewById(R.id.button1);

     compose.setOnClickListener(new View.OnClickListener() {    

           //doneactivity button start
        @Override
        public void onClick(View arg0) 
        {       
        String string = text.getEditableText().toString();
        Intent intent= new Intent(Compose.this, DoneActivity.class);
        intent.putExtra("editText_value",string);
        startActivity(intent);  
            Compose.this.finish();
        }
    }); 
```

然后在下一个活动中，我放了 3 个 textview，我已经完成了这部分，但它只显示我在一个 textview 中输入的所有内容，而不是单独显示 *这是我下一个活动的当前代码

```
TextView text = (TextView)findViewById(R.id.textView1);

    Intent i = getIntent();
    str = i.getStringExtra("editText_value");
    text.setText(str); 
```

现在我想要发生的是每个字母将显示在不同的文本视图中

...任何建议都可以改善我的申请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T00:59:21.593

在下一个活动中拥有字符串变量后。是获取该字符并在 3 个文本字段之间进行划分的问题，例如[在这里](https://stackoverflow.com/questions/3760152/split-string-to-equal-length-substrings-in-java)您可以看到如何将字符串拆分为相等的部分。然后，您只需将该子字符串放入每个编辑文本中。

```
TextView textView1 = (TextView)findViewById(R.id.textView1);
TextView textView2 = (TextView)findViewById(R.id.textView2);
TextView textView3 = (TextView)findViewById(R.id.textView2);

textView1.setText(splitArray("hey", 1)[0]);
textView2.setText(splitArray("hey", 1)[1]);
textView3.setText(splitArray("hey", 1)[2]);

private static String[] splitArray(String str2split, int letters) {
    return str2split.split("(?<=\\G.{"+ letters+"})");
} 
```

# node.js - Angular.js 可以在脚本标签中的 Jade 模板中进行插值吗？

> ID：14804206
> 
> 赞同：2
> 
> 时间：2013-02-11T00:14:08.853
> 
> 标签：node.js, express, angularjs, pug

我正在使用 angular 和玉模板，我在模板中有一些 javascript：

```
script(type='text/javascript')
    console.log('{{name}}'); 
```

在我的角度控制器中，我执行以下操作：

```
$scope.name = "Bhoutrous"; 
```

只要它不在脚本标签下，我就可以让 {{name}} 正确插入模板中的其他任何位置。对我来说，角度会引发“SyntaxError：无效的属性 id”错误。我想知道这是翡翠问题还是有解决方法。我需要在页面加载时将“name”变量的内容传递给 js 函数。

**更新**

我知道它可以与常规模板一起使用。下面的例子的小提琴：http: [//jsfiddle.net/atetenaten/mnscA/](http://jsfiddle.net/atentaten/mnscA/)

有没有人有使用玉做这样的事情的经验？

HTML：

```
<div ng-controller="UserCtrl">
    <p>{{data}}</p>
    <div id="dat"></div>

    <script type="text/javascript">
       function doit(text){
          var el = document.getElementById("dat");
           el.innerHTML = text;
       }

      doit( '{{data}}' );  
    </script>
</div> 
```

JS：

```
var app=angular.module('myApp', []);

function UserCtrl($scope) {
        $scope.data = "Green Applese";

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-10T23:29:43.333

一种适合我的**玉石形式**

```
div(ng-controller="UserCtrl",anotherAttr="yourValue")
    p#dataBind {{data}}
    div#dat
    script.
       function doit(text){
          $("#dat").html(text)
       }      
       doit($("#dataBind").text()); 
```

注意点“。” 在脚本标签之后，这允许将js代码放入**jade**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T04:24:58.837

Angular 在 DOM 元素中进行插值。不会插入脚本标签和其他随机字符串的内容。您可以在 Angular 应用程序生命周期之外访问 Angular 服务，包括`$interpolate`服务；[我昨天回答了一个很像这样的问题](https://stackoverflow.com/questions/14796047/is-it-possible-in-angularjs-to-use-data-bindings-inside-a-classic-javascript-fun/14796477#14796477)。但是，就像在那个答案中一样，我认为这并不是使用 Angular 编写应用程序的好方法。

# google-app-engine - 使用 JPA 的 Google App Engine 中的百万用户扇出

> ID：14804212
> 
> 赞同：4
> 
> 时间：2013-02-11T00:15:15.077
> 
> 标签：google-app-engine, jpa, google-cloud-datastore

我正在尝试使用 JPA 解决 GAE 的百万扇出问题。如果我理解正确，我应该有以下实体，比如 Twitter（只是一个例子）：

```
public User {
    @Id Key id;
    String name;
    String displayName;
    List<Key> subscribers;  // users
}

public Tweet {
    @Id Key id;
    User tweetMaker;
    String message;
}

public TweetIndex {
    @Id Key id;
    Key tweetMaker;        // user
    List<Key> subscribers; // users
} 
```

发布推文时，将保存 Tweet 对象，并在 tweetMaker 是发布推文的用户的位置保存 TweetIndex，并将订阅者从 User 对象复制到 TweetIndex 中。然后我会在 TweetIndex 中查询订阅者以获取特定订阅者的消息。

1.  那你有这个权利吗？对我来说，事情变得模糊的地方是我希望订阅者被存储到一个多值属性中。由于多值属性只能有 5000 个条目，我认为应该为每 5000 个订阅者 ID 重复 TweetIndex。
2.  什么控制将多值属性分成 5000 个组？我需要管理代码中的重复保存吗？
3.  我将如何存储原始订阅者列表？在我看来，用户对象中的订阅者列表也将被限制为相同的 5000 限制。

感谢您的任何答案/见解/建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T18:16:02.973

1) 那你有这个权利吗？-> 索引时，多值属性列表大小的种类限制在 20K 左右（这是您的情况，因为您将针对订阅者 ID 运行查询）[Google App Engine 数据存储的 ListProperty 的最大大小/限制是多少？](https://stackoverflow.com/questions/20200307/what-is-maximum-size-limitation-of-listproperty-for-google-app-engine-datastore) 总而言之，在这种用例中您将面临的限制是： - 索引多值属性大小 (20K) - 实体大小 (1MB) - 除非您在其中存储 blob，否则应该没问题

2）故障需要手动处理，因为我不知道有任何持久性框架可以做到这一点。Objectify 是唯一一个足够专门化 GAE 数据存储以具有这种功能的持久性框架，尽管如此 IDK，我并没有使用它。

3) 您需要清楚地了解促使您在 GAE 数据存储上对用例进行建模的约束。在我看来，您仍然深受关系数据库建模的影响：

由于您正在为数百万用户进行规划，因此您正在为规模和性能构建您的应用程序。这些“连接”正是您必须避免的，这就是为什么您一开始就没有使用 RDBMS。关键是：重复！非规范化，以便您的数据与您的用例匹配。

```
public class UserEntity {

    @Id Key id;
    String name;

    /** INDEXED : to retrieve a user by display name */
    String displayName;

    /** For the sake of the example below */
    int tweetCount;

    /** 
     * USE CASE : See a user's followers from his "profile" page.
     *
     * Easily get subscribers data from your user entity.
     * Duplicate UserEntity (this object) 's data in the UserSubscriberEntity.
     * You just need to run an ancestor query on UserSubscriberEntity using the User id.
     */
    List<UserSubscriberChildEntity> subscribers;

}

/** Duplicate user data in this entity, retrieved easily with an ancestor query */
public class UserSubscriberChildEntity {
    /** The id of this entity */
    @Id Key subscriberId;
    /** Duplicate your User Entity data */
    String name;
    String displayName;
    /** The id from the UserEntity referenced */
    String userId;
}

public class TweetEntity {
    @Id Key id;

    /**
     * The actual text message
     */
    String tweetContent;

    /**
     * USE CASE : display the tweet maker name alongside the tweet content.
     *
     * Duplicate user data to prevent an expensive join when not needed.
     * You will always need to display this along with the tweet content !
     * Model your entity based on what you want to see when you display them
     */
    String tweetMakerName;
    String tweetMakerDisplayName;
    /**
     * USE CASE 
     * 1) to retrieve tweets MADE by a given user
     * 2) In case you actually need to access the User entity
     *    (for example, if you remove this tweet and want to decrease the user tweet counter)
     *
     * INDEXED 
     */
    Key tweetMakerId;

    /**
     * USE CASE : display tweet subscribers from the "tweet page"
     * 
     * Same as "UserSubscriberChildEntity", retrieve data fast by duplicating
     */
    List<TweetSubscriberChildEntity> subscribers;
} 
```

现在的核心问题是：如何检索“一位用户订阅的所有推文”？

**跨实体分片您的订阅：**

```
/**
 * USE CASE : Retrieve tweets one user subscribed to
 *
 * Same goes for User subscription
 */
public class TweetSubscriptionShardedEntity {
    /** unused */
    @Id Key shardKey;
    /** INDEXED : Tweet reference */
    Key tweetId;
    /** INDEXED : Users reference */
    List<Key> userKeys;
    /** INDEXED : subscriber count, to retrieve shards that are actually under the limitation of 20K */
    int subscribersCount = 0;

    /**
     * Add a subscriber and increment the subscriberCount
     */ 
    public void addSubscriber(Key userId) {
        userKeys.add(userId);
        subscribersCount++;
    }
} 
```

**将所有内容连接在一起的示例推文服务：**

```
/**
 * Pseudo code
 */
public class TweetService {

    public List<TweetEntity> getTweetsSubscribed(Key userId) {
        List<TweetEntity> tweetsFollowed = new ArrayList<TweetEntity>;
        // Get all the subscriptions from a user
        List<TweetSubscriberShardedEntity> shards = datastoreService.find("from TweetSubscriberShardedEntity  where userKeys contains (userId)");
        // Iterate over each subscription to retrieve the complete Tweet
        for (TweetSubscriberShardedEntity shard : shards) {
            TweetEntity tweet = datastoreService.get(TweetEntity.class, shard.getTweetId);
            tweetsFollowed.add(tweet);
        }
        return tweetsFollowed;
    }

    public void subscribeToTweet(Key subscriberId, Key tweetId) {
        TweetSubscriberShardedEntity shardToUse = null;
        // Only get the first shard with under 20000 subscribers 
        TweetSubscriberShardedEntity shardNotFull = datastoreService.find("
        FROM TweetSubscriberShardedEntity  
        WHERE tweetId == tweetId 
        AND userKeys contains (subscriberId)
        AND subscribersCount < 20000 
        LIMIT 1");
        if (shardNotFull == null) {
            // If no shard exist create one
            shardToUse = new TweetSubscriberShardedEntity();
        }
        else {
            shardToUse = shardNotFull;
        }
        // Link user and tweet
        shardToUse.setTweet(tweetId);
        shardToUse.getUserKeys().add(subscriberId);
        // Save shard
        datastoreService.put(shardToUse);
    }

    /**
     * Hard to put in a transaction with so many entities updated !
     * See cross entity group docs for more info.
     */
    public void createTweet(UserEntity creator, TweetEntity newTweet) {

        creator.tweetCount++;
        newTweet.tweetMakerName = creator.name;
        newTweet.tweetMakerDisplayName = creator.displayName;
        newTweet.tweetMakerId = creator.id;

        // Duplicate User subscribers to Tweet
        for(UserSubscriberChildEntity userSubscriber : creator.subcribers) {
            // Create a Tweet child entity 
            TweetSubscriberChildEntity tweetSubscriber = new TweetSubscriberChildEntity();
            tweetSubscriber.name = userSubscriber.name;
            // ... (duplicate all data)
            newTweet.add(tweetSubscriber);

            // Create a shard with the previous method !!
            subscribeToTweet(newTweet.id, subscriber.id);
        }           
        // Update the user (tweet count)
        datastoreService.put(creator);
        // Create the new tweet and child entities (duplicated subscribers data)
        datastoreService.put(newTweet);         
    }

} 
```

# html - 火狐绝对定位失败

> ID：14804213
> 
> 赞同：2
> 
> 时间：2013-02-11T00:15:25.707
> 
> 标签：html, css, firefox, absolute

我的网站 [http://cynthiawoodyardlandscapedesign.com/](http://cynthiawoodyardlandscapedesign.com/) 有几个问题只存在于 Firefox 中。

当单击主页上的图像时，出现在两侧以允许用户更改图片的箭头位于页面顶部。包含箭头的 div 应该有 100% 的高度，我什至添加`!important`到 CSS 中。只有 Firefox 不能正确显示。

我的 CSS（[http://cynthiawoodyardlandscapedesign.com/css/main.css](http://cynthiawoodyardlandscapedesign.com/css/main.css)）：

```
#sheet {
    width: 100%;
    height: 100%;
    position: fixed;
    overflow: hidden;
    top: 0;
    left: 0;
    background-color: rgba(0,0,0,0.8);
    display: table;
    z-index: 150;
}
#popover {
    margin: auto;
    background: rgba(0,0,0,0);
    text-align: center;
    padding: 10px;
    border: 1px solid black;
    position: relative;
    display: table-cell;
    vertical-align: middle;
}
#popover-image {
    height: 70%;
    border: 10px solid white;
}
#exit {
    position: absolute;
    top: 50px;
    color: white;
    font-size: 20px;
    font-weight: bold;
    width: 100%;
    text-align: center;
    z-index: 300;
    font-family: sans-serif;
}
#next-image, #previous-image { cursor: pointer; background:  transparent; }
#next-image::-moz-selection, #previous-image::-moz-selection,
#next-image::selection, #previous-image::selection { background: rgba(0,0,0,0); }
#leftArrow, #rightArrow {
    width: 20%;
    height: 100% !important;
    position: absolute;
    z-index: 200;
    display: table;
    background: transparent;
    top: 0;
}
#leftArrow { left: 0; } #rightArrow { right: 0; }
#next-image {
    display: table-cell !important;
    vertical-align: middle;
    margin: 0 auto;
    text-align: center;
    line-height: 50px;
    font-size: 50px;
    -webkit-text-stroke: 1px black;
    -moz-text-stroke: 1px black;
    height: 50px;
    width: 50px;
    color: white;
}
#previous-image {
    display: table-cell !important;
    vertical-align: middle;
    margin: 0 auto;
    text-align: center;
    line-height: 50px;
    font-size: 50px;
    -webkit-text-stroke: 1px black;
    -moz-text-stroke: 1px black;
    height: 50px;
    width: 50px;
    color: white;
} 
```

我的 HTML（[http://cynthiawoodyardlandscapedesign.com/default.php](http://cynthiawoodyardlandscapedesign.com/default.php)）：

```
<div id="sheet">
    <div id="exit">Exit</div>

    <div id="popover">
        <div id="leftArrow"><div id="previous-image" onclick="previous()">&laquo;</div></div>

        <img src="watermark.php?src=images/main1.jpg&x=0&y=420&opactity=50" id="popover-image" onclick="close()" />

        <div id="rightArrow"><div id="next-image" onclick="next()">&raquo;</div></div>

    </div>

</div> 
```

我尝试过的所有其他浏览器（IE 除外；我在 Mac 上）都能正确显示页面。

**编辑：我有更多的 Firefox 问题。**

[http://cynthiawoodyardlandscapedesign.com/photography.php](http://cynthiawoodyardlandscapedesign.com/photography.php)上的页面显示了许多标签中的图片，并且在`<td>`标签之后`img`但之前`</td>`有一个具有绝对位置的跨度，`top: 10px;`在每个浏览器（甚至 IE8 ！！）上都没有正常工作。

我的 HTML 页面：

```
<table id="photos">
                <tr>
                    <td><img src="images/photo-thumbs/garden.jpg" /><span>Gardens</span></td><td><img src="images/photo-thumbs/trees.jpg" /><span>Trees</span></td><td><img src="images/photo-thumbs/shrubs.jpg" /><span>Shrubs</span></td><td><img src="images/photo-thumbs/perennials.jpg" /><span>Perennials</span></td>
                </tr>
                <tr>
                    <td><img src="images/photo-thumbs/annuals.jpg" /><span>Annuals</span></td><td><img src="images/photo-thumbs/tropicals.jpg" /><span>Tropicals</span></td><td><img src="images/photo-thumbs/bulb.jpg" /><span>Bulbs</span></td><td><img src="images/photo-thumbs/containers.jpg" /><span>Containers</span></td>
                </tr>
                <tr>
                    <td><img src="images/photo-thumbs/fruit.jpg" /><span>Fruit</span></td><td><img src="images/photo-thumbs/animals.jpg" /><span>Creatures</span></td><td><img src="images/photo-thumbs/people.jpg" /><span>People</span></td><td><img src="images/photo-thumbs/travel.jpg" /><span>Travel</span></td>
                </tr>
</table> 
```

```
#photos td {
        width: 192px;
        height: auto;
        position: relative;
        border-right: 5px solid transparent;
    }
    #photos td img { width: 100%; border: 1px solid gold; }
    #photos td span {
        position: absolute;
        top: 10px;
        left: 0;
        width: 100%;
        text-align: center;
        background: rgba(0,0,0,0.4);
        padding-top: 2px;
        padding-bottom: 2px;
        color: #f0f0f0;
        font-weight: bold;
        font-family: "Source Sans Pro", sans-serif;
        display: none;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T18:30:52.370

这是您第二部分的答案：跨度位置悬停问题。它工作正常，请参阅我在 html、css 和 jquery 代码中所做的以下更改。如果我遗漏了什么，请告诉我。

**代码：http:** [//jsfiddle.net/brNdq/1/](http://jsfiddle.net/brNdq/1/)

**工作演示：http:** [//jsfiddle.net/brNdq/1/embedded/result/](http://jsfiddle.net/brNdq/1/embedded/result/)

**HTML：**

```
<table id="photos">
      <tr>
        <td><div class="img_container"><img src="http://cynthiawoodyardlandscapedesign.com/images/photo-thumbs/garden.jpg" /><span>Gardens</span></div></td>
        <td><div class="img_container"><img src="http://cynthiawoodyardlandscapedesign.com/images/photo-thumbs/trees.jpg" /><span>Trees</span></div></td>
        <td><div class="img_container"><img src="http://cynthiawoodyardlandscapedesign.com/images/photo-thumbs/shrubs.jpg" /><span>Shrubs</span></div></td>
        <td><div class="img_container"><img src="http://cynthiawoodyardlandscapedesign.com/images/photo-thumbs/perennials.jpg" /><span>Perennials</span></div></td>
      </tr>
      <tr>
        <td><div class="img_container"><img src="http://cynthiawoodyardlandscapedesign.com/images/photo-thumbs/annuals.jpg" /><span>Annuals</span></div></td>
        <td><div class="img_container"><img src="http://cynthiawoodyardlandscapedesign.com/images/photo-thumbs/tropicals.jpg" /><span>Tropicals</span></div></td>
        <td><div class="img_container"><img src="http://cynthiawoodyardlandscapedesign.com/images/photo-thumbs/bulb.jpg" /><span>Bulbs</span></div></td>
        <td><div class="img_container"><img src="http://cynthiawoodyardlandscapedesign.com/images/photo-thumbs/containers.jpg" /><span>Containers</span></div></td>
      </tr>
</table> 
```

**CSS：**

```
.img_container {
    position:relative;
} 
```

**Jquery：**从 TD 中删除悬停并将其放在类 .img_container

```
<script type="text/javascript">
$(document).ready(function () {
    $(".img_container").hover(function() {
        $(this).children('span').fadeIn('medium');
    }, function () {
        $(this).children('span').fadeOut('fast');
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T05:04:58.663

高度的 Usign 百分比将下地狱。由于某些历史原因，将 100% 高度作为窗口的高度，而不是显示区域。避免使用百分比 - 仅用于宽度：20% 的异常。

如果要设置 height:100%，请使用 JavaScript。获取显示区域的高度并为这两个 div 设置它。我发布了一个示例，我将它用于覆盖窗口（在调整大小时也可以使用）：

```
var updateInterval;

function showOverlay() {
  updateInterval = setInterval(function() {
    var h = 0;
    var s = 0;

    if (window.innerHeight) {
        h = window.innerHeight;
    }
    else if (document.documentElement.clientHeight) {
        h = document.documentElement.clientHeight;
    }

    if (document.body.scrollTop) {
        s = document.body.scrollTop;
    }
    else if (window.pageYOffset) {
        s = window.pageYOffset;
    }

    document.getElementById('overlay').style.height   = '' + h + 'px';
    document.getElementById('overlay').style.top = '' + s + 'px';
  }, 10);

  toogleHidden('overlay');
} 
```

为您的 ID 替换覆盖 ID，togleHidden 是我显示/隐藏元素的功能。

您可以使用类似的函数来正确放置元素 - 例如，您知道 elemtn 的高度为 32px，因此您将得到高度，除以 2 并减去 16：

```
var top = (h / 2) - 16; 
```

比您不需要设置 100% 的高度（除了整列应该是可点击的）。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-08T20:03:33.233

在 FF`style="display:block"`中结合使用`"position:absolute"`

# asp.net - web.config 阻止文件下载或查看

> ID：14804219
> 
> 赞同：0
> 
> 时间：2013-02-11T00:16:19.893
> 
> 标签：asp.net, authentication, iis-7, web-config

我对 ASP.net 很陌生。我很久以前访问过一个网站，现在我不记得网址了。我想打开他们的 CSS 文件来查看源代码，但是一旦我点击了错误消息，就会显示“你没有采取行动的权限……”

现在我想做同样的事情来锁定我的文件。甚至访问者也可以看到文件名，但他们无法打开或下载它。

我想知道是否可以在 ASP.net 或 IIS7 上实现？

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T00:22:40.683

在 ASP.net 中，如果您不希望用户打开文件，只需在文件名前添加一个“_”。所以而不是：`Mycss.css`写`_Mycss.css`。这适用于所有文件，并且在使用布局时非常方便，因此用户无法查看您的内容文件。此外，通常您需要获得打开文件`"~/Content/"`夹中文件的权限，如果请求来自外部源，它应该写入您编写的此错误。尝试通过右键单击并编辑权限来设置文件夹的权限。

# sharepoint - 如何将自定义按钮添加到 DispForm

> ID：14804224
> 
> 赞同：0
> 
> 时间：2013-02-11T00:16:36.737
> 
> 标签：sharepoint, sharepoint-2010

我正在尝试添加一个标签、文本框和一个按钮来改变页面。目的是让用户查看列表条目以添加评论。单击按钮后，他们输入的文本将更新另一个列表。

是否有可能做到这一点以及如何做到这一点？

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:20:14.310

是的，但是您必须制作 aspx 控件来显示表单并在其后面添加一些 C#/VB 代码。或者您可以在竞争者 webpart 中添加按钮，在后台打开编辑表单，向隐藏字段添加一些值 fg 一些带有列表名等的字符串，然后使用 JS 保存“编辑表单”，您的所有代码都将由 eventreciever“ItemEdited”执行： ) 这很难但可以做到。最后一个选项是制作您自己的解决方案，或 DisplayWebPartForm。

所有这些解决方案都很难编码，但我没有看到其他选项，因为你必须在服务器或客户端执行 C#/VB

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:28:26.973

我要感谢你的建议。我最终做的事情与 SharePoint Dive 中给出的自定义列表表单的步骤非常相似。您可以在此处找到步骤：

[http://thesharepointdive.wordpress.com/2012/03/20/list-forms-deployment-for-sharepoint-2010-part-1-of-4/](http://thesharepointdive.wordpress.com/2012/03/20/list-forms-deployment-for-sharepoint-2010-part-1-of-4/)

这比您的建议要多一些工作，但非常符合我的要求，而且我可以轻松地在其他解决方案中重复使用。

再次感谢。

# winapi - 将 getmessagetime 与 peekmessage 一起使用，而不是 getmessage

> ID：14804227
> 
> 赞同：1
> 
> 时间：2013-02-11T00:16:45.783
> 
> 标签：winapi

我需要修改应用程序，并且更改涉及使用事件时间，因为它们被发布到窗口消息循环。无论如何，长话短说，我`getmessagetime`在窗口消息处理程序中使用来获取消息的时间。它似乎工作正常，但文档明确指出，如果消息循环运行，`getmessagetime`它将返回参数，但如果它运行与此应用程序的情况一样，则什么也不说。`msg.time``getmessage``peekmessage(...,pm_remove)`

所以问题是，`getmessagetime`如果应用程序的消息循环运行是否可靠，`peekmessage(...,pm_remove)`或者我是否应该请求客户端允许修改`peekmessage(...,pm_no_remove)+getmessage`组合的消息循环？或者换句话说，读取的内部值是`getmessagetime`set by`getmessage`还是 by `dispatchmessage`？

我不能简单地要求更改消息循环以保留 msg.time 参数的原因是，如果用户正在调整窗口大小，Windows 使用内部消息循环而不是应用程序的消息循环，因此`msg.time`不会设置参数，因此必须使用`getmessagetime`来保证可靠的时间。

# javascript - 即使在用户通过 javascript 导航离开后，ASP.NET 是否继续可靠地处理请求？

> ID：14804228
> 
> 赞同：8
> 
> 时间：2013-02-11T00:16:53.597
> 
> 标签：javascript, asp.net, multithreading, asynchronous, httphandler

**环境：**

*   Windows Server 2003 - IIS 6.x
*   ASP.NET 3.5 (C#)
*   即 7,8,9
*   FF（无论最新的 10 个版本是什么）

**用户场景：**

用户针对大型数据集输入搜索条件。发起请求后，他们被导航到结果页面，在那里他们等待数据加载，然后可以细化数据。

**技术场景：**

用户发送搜索条件（通过 ajax 调用）后，UI 调用后端服务。后端服务查询事务系统并将结果数据放入数据库“缓存” - 一个非规范化表，设置用于进一步细化数据（即排序、过滤）。UI 一直等到数据被缓存，然后在收到进程完成的通知后，导航到结果页面。然后，生成的页面会进行调用以从非规范化表中获取数据。

**问题：**

对于最终不得不根据输入的条件查询许多系统的大型查询，搜索相对较慢（15-25 秒）。其他查询相对较快（<4 秒）。

**技术限制：**

1.  我们不能完全重新设计这个搜索/结果系统。UI 和后端之间的联系方式有很多复杂性。在执行搜索条件后，需要页面（因为在 StackOverflow 上无法解决的限制）才能打开。

2.  我们也不能要求组织在搜索之前对数据进行非规范化，因为数据必须是实时的，即如果用户在其他系统中进行了更改，如果他们之后进行搜索，数据必须正确显示。

**我要遵循的过程：**

1.  我想骗一点。我想通过火忘记模型中的异步 HttpHandler 发出“缓存”请求。

2.  发出查询后，我想将页面转换到结果页面。

3.  在转换页面上，我想轮询“缓存”表以查看数据是否已插入其中。

4.  我想立即进行此转换的原因是生成的页面本身很昂贵（即使没有获取数据） - 在调用从缓存中获取数据的服务之前仍然需要 2 秒的加载时间。

**问题：**

即使我使用 javascript 重定向离开页面，通过异步处理程序调用的 ASP.NET 线程是否会可靠地继续处理？

**技术边界2：**

是的，我知道... 这个搜索过程听起来效率不高。我现在对此无能为力。在我们继续研究如何重新架构它的同时，我正在尽我所能让它表现得更好。

如果您的回答是：“扔掉它并重新开始”，请不要回答。这是不可接受的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T03:47:20.300

是的。

有一个属性 Response.IsClientConnected 用于了解长时间运行的进程是否仍然连接。此属性的原因是，即使客户端断开连接，进程仍将继续运行，并且必须通过该属性手动检测并在过早断开连接时手动关闭。默认情况下，客户端断开连接时不会停止正在运行的进程。

引用此属性：http: [//msdn.microsoft.com/en-us/library/system.web.httpresponse.isclientconnected.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.isclientconnected.aspx)

**更新**

仅供参考，这是一个非常糟糕的属性，这些天依赖于套接字。我强烈建议您采用一种方法，该方法允许您快速完成一个请求，该请求记录在某个数据库或某个长时间运行任务的队列中以完成，可能使用 RabbitMQ 或类似的东西，然后使用 socket.io 或类似的东西来更新网页或应用程序一旦完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T02:10:35.130

根本不在 ASP.NET 线程上执行异步操作怎么样？让 ASP.NET 代码调用一个服务来对数据搜索进行排队，然后使用来自该服务的令牌返回浏览器，然后它将重定向到等待完成结果的结果页面？结果页面将使用服务中的令牌进行轮询。

这样，您就不必担心 ASP.NET 是否会以某种方式得知浏览器已移动到不同的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T02:30:11.680

另一种选择是使用线程 ( `System.Threading`)。
当用户发送搜索条件时，服务器开始处理页面请求，创建一个新的线程负责执行搜索，并完成响应返回浏览器并重定向到结果页面，同时线程继续在服务器上执行背景。
结果页面将继续在服务器上验证查询执行是否已完成，因为启动的线程将共享进度信息。当它完成时，当结果页面完成下一个 ajax 调用时，将返回结果。

也可以考虑使用 WebSockets。从某种意义上说，Web 服务器本身可以告诉浏览器何时处理完查询执行，因为它提供了全双工通信通道。

# jquery - 通过 Ajax 为 Servlet 发送值

> ID：14804229
> 
> 赞同：0
> 
> 时间：2013-02-11T00:17:21.593
> 
> 标签：jquery, ajax, servlets, map

晚安。

就个人而言，我有一个模拟“地图”的功能，我在哪里添加为“键”菜单项和“值”菜单子项。

这个功能可以在下面查看

```
var key;
var value;
var mapaDeListas = new Array();
$(".conteudoMenu a").click(function(){
   key = $(this).parent(".conteudoMenu").parent("li").find(".itemMenu").attr("id");
   value = $(this).attr("id"); 
   Processar();
   console.log(mapaDeListas);
});

var Processar = function() {
    if (mapaDeListas[key] && $.inArray(value, mapaDeListas[key]) == -1 || mapaDeListas[key] && $.inArray(value, mapaDeListas[key]) != -1) {
        // Checks if the key already exists from the "key" and if the value of "value" is present in the array
       if (mapaDeListas[key].indexOf(value) == -1){
            mapaDeListas[key].push(value);
        }
    }
    else {
        // Creates the array according to the value of the "key" and adds the value of "value"
        mapaDeListas[key] = new Array();
        mapaDeListas[key].push(value);
    }
} 
```

我想知道的是如何在 Ajax 中将这个函数的值传递给一个 Servlet，并通过它们在 java 中组装一个 Map。

我尝试如下通过 Ajax 发送此函数的值，但无济于事

```
function loadQuery(){
    if(inputMenu.length > 0){
    $.ajax({
        url: "assembles-query",
        type: "POST",
        data: {
            "mapaDeListas[]" : mapaDeListas
        },
        //dataType: "json",
        error:function(){
            alert("ERRO MENU")
        },
        success:function(responseText){
            $("textarea[id=assembleQuery]").text(responseText);
        }
    });
    }
} 
```

在Servlet中，尝试得到如下结果**String[] mapaDeListas = request.getParameterValues("mapaDeListas[]");**

但是，当我发送 print 时，结果总是返回**null**。

有人可以告诉我我错在哪里，我应该怎么做才能正确传递这些值？既然已经感谢大家的帮助。

**下面打印了如何存储结果。** [http://bit.ly/V9oHsg](http://bit.ly/V9oHsg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T07:50:31.370

我假设这是使用 jQuery 1.4 - 然后使用`traditional: true`参数[`$.ajax()`](http://api.jquery.com/jQuery.ajax)

或全局设置：（[来自`$.param()`文档](http://api.jquery.com/jQuery.param/)）

> 从 jQuery 1.4 开始，该`$.param()`方法递归地序列化深层对象以适应现代脚本语言和框架，例如 PHP 和 Ruby on Rails。您可以通过设置全局禁用此功能`jQuery.ajaxSettings.traditional = true;`。

# macos - osx 上的屏幕截图

> ID：14804235
> 
> 赞同：3
> 
> 时间：2013-02-11T00:17:55.720
> 
> 标签：macos, video-streaming, screen-capture

我需要流式传输我的 Mac 桌面，让其他人可以观看我在做什么。我尝试过使用 VLC（在当前稳定版本中不再适用）。我已经尝试过 ffmpeg，它不再适用于 osx 上的 x11grab 选项。您知道任何具有屏幕录制和流媒体功能的商业或免费软件吗？或者可以通过管道传输到 ffmpeg 或 vlc 的东西？或者也许你能指出我某个地方来研究如何为 osx 构建一个非常基本的应用程序来捕获屏幕？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:19:32.980

这是用于捕获屏幕并将其保存为对我有用的文件的示例代码。

/** 将当前屏幕记录到提到的目标路径。**/

-(void)screenRecording:(NSURL *)destPath {

```
//Create capture session
mSession = [[AVCaptureSession alloc] init];

//Set session preset
//mSession.sessionPreset = AVCaptureSessionPresetMedium;
mSession.sessionPreset = AVCaptureSessionPreset1280x720;

//Specify display to be captured
CGDirectDisplayID displayId = kCGDirectMainDisplay;

//Create AVCaptureScreenInput with the display id
AVCaptureScreenInput *input = [[AVCaptureScreenInput alloc] initWithDisplayID:displayId];
if(!input) {
    //if input is null
    return;
}

//if input is not null and can be added to the session
if([mSession canAddInput:input]) {
    //Add capture screen input to the session
    [mSession addInput:input];
}

//Create AVCaptureMovieFileOutput
mMovieFileOutput = [[AVCaptureMovieFileOutput alloc] init];
mMovieFileOutput.delegate = self;

if([mSession canAddOutput:mMovieFileOutput]) {
    //If movie file output can be added to session, then add it the session
    [mSession addOutput:mMovieFileOutput];
}

//Start running the session
[mSession startRunning];

//Check whether the movie file exists already
if([[NSFileManager defaultManager] fileExistsAtPath:[destPath path]]) {
    NSError *err;
    //If the movie file exists already, then delete it
    if(![[NSFileManager defaultManager] removeItemAtPath:[destPath path] error:&err]) {
        NSLog(@"Error deleting existing movie file %@", [err localizedDescription]);
    }
}

//Start recording to destination path using the AVCaptureMovieFileOutput
[mMovieFileOutput startRecordingToOutputFileURL:destPath recordingDelegate:self]; 
```

}

[您可以在http://developer.apple.com/library/mac/#qa/qa1740/_index.html](http://developer.apple.com/library/mac/#qa/qa1740/_index.html)找到示例代码

请通过网址。这可以帮助您至少创建捕获屏幕的基本应用程序。

# php - 如何选择单个或多个复选框按钮？

> ID：14804236
> 
> 赞同：2
> 
> 时间：2013-02-11T00:18:10.037
> 
> 标签：php, javascript, jquery, html

对于每个问题，我想编译一个`if`语句，其中通过检查每个问题，如果`.ReplyType`文本输入等于`Single`，那么用户只能选择一个复选框按钮选项，否则如果`.ReplyType`文本输入等于`Multiple`，那么用户可以选择多个复选框按钮选项.

我的问题是如果根据`.ReplyType`文本输入选择单个按钮或多个按钮，如何实现这一点？PHP 或 JavaScript 哪个更好？

下面是相关代码：

```
<form action='results.php' method='post' id='exam'>

    <?php

//COMPILE OPTION BUTTONS

    function ExpandOptionType($option) { 
        $options = explode('-', $option);
        if(count($options) > 1) {
            $start = array_shift($options);
            $end = array_shift($options);
            do {
                $options[] = $start;
            }while(++$start <= $end);
         }
         else{
            $options = explode(' or ', $option);
         }

         foreach($options as $indivOption) {
             echo '<div class="ck-button"><label class="fixedLabelCheckbox"><input type="checkbox" name="options[]" id="option-' . $indivOption . '" value="' . $indivOption . '" /><span>' . $indivOption . '</span></label></div>';
         }

    }

    foreach ($arrQuestionId as $key=>$question) {

    ?>

    <div class="queWrap">

//DISPLAY QUESTION NUMBER FOR EACH QUESTION
    <p><?php echo htmlspecialchars($arrQuestionNo[$key]);?></p>

//DISPLAY OPTION CHECKBOX BUTTONS FOR EACH QUESTION
    <?php echo ExpandOptionType(htmlspecialchars($arrOptionType[$key])); ?>

//DISPLAY REPLY TYPE TEXT INPUT FOR EACH QUESTION
    <p>Reply Type: <input type='text' class='replyType' name='replytype' value='<?php echo htmlspecialchars($arrReplyType[$key]); ?>' /></p>

    </div>

    <?php

    }

    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:58:02.127

您应该同时执行 JavaScript 和 PHP 实现。

JavaScript 更适合用户在提交表单之前获得响应。

PHP 很重要，因为在这种情况下可以绕过 JavaScript 验证（只需停用 JavaScript），您的 PHP 仍应验证您是否获得了一致的数据。

无论如何：使用单选按钮进行单选，使用复选框进行多选。并不是说它已经在每个浏览器中实现并且打算以这种方式使用，大多数用户已经学会了这种行为并且不会对您的 JavaScript（或 PHP）验证感到惊讶。

# .htaccess - htaccess 中的 ¦ 符号是什么以及它有什么作用

> ID：14804238
> 
> 赞同：0
> 
> 时间：2013-02-11T00:18:26.810
> 
> 标签：.htaccess

¦ 符号在 htaccess 中的作用是什么？我从 htaccess 的在线论坛中获取了一个代码，他们使用 ¦。*如果可能与管道符号有任何*区别，我想了解这个符号在 htaccess 中的含义|

```
RewriteEngine on
#
### Disallow Image Hotlinking
RewriteCond %{HTTP_REFERER} .
RewriteCond %{HTTP_REFERER} !^http://www\.example\.net
RewriteRule \.(jpe?g¦gif¦bmp¦png)$ - [F]
#
### Externally redirect to remove ".php" if the user adds it
RewriteCond %{THE_REQUEST} ^GET\ /([^/]+/)*[^.]+\.php(\?[^\ ]*)?\ HTTP/
RewriteRule ^(([^/]+/)*[^.]+)\.php$ http://www.example.net/$1 [R=301,L]
#
### Externally redirect to remove double slashes
RewriteCond %{REQUEST_URI} ^(.*)//(.*)$
RewriteRule . http://www.example.net/%1/%2 [R=301,L]
#
### Externally redirect to remove trailing slash
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)/$ http://www.example.net/$1 [R=301,L]
#
### Externally redirect non-canonical hostname requests to canonical
### domain (if not already done by one of the preceding rules)
RewriteCond %{HTTP_HOST} !=www.example.net
RewriteRule ^(.*)$ http://www.example.net/$1 [R=301,L]
#
### Internally rewrite requests for URLs which do not resolve
### to physically-existing files or directories to a PHP file
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ $1.php [L,QSA] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:53:40.647

它当然不应该在那里，并且可能是由于从包含错误符号的来源复制和粘贴而到达那里的。

对于 RegExp 库，它只是另一个没有任何特殊含义的文字字符。它不会被视为管道符号，即类似于书写

```
RewriteRule \.(jpe?gxgifxbmpxpng)$ - [F] 
```

它会使规则变得无用。

来源：测试它以确保。

# sql-server - VBA INSERT 和@@Identity（无法在第二次插入新表时获得@@Identity）

> ID：14804241
> 
> 赞同：0
> 
> 时间：2013-02-11T00:18:46.827
> 
> 标签：sql-server, vba

下面我在表“test”中插入一个值并成功检索新行的@@identity。然后我在表 test2 中插入一个值（成功），但检索到的 @@identity 始终为“0”。获取第二个@@identity 出了什么问题？我怎样才能解决这个问题？

```
Sub GoDo()

Dim testIdentity As Integer
Dim test2Indentity As Integer

Dim name As String
Dim concept As String

name = Cells(1, 1)
concept = Cells(1, 2)

Dim cn As New ADODB.Connection
Dim rs As New ADODB.Recordset
Dim rs2 As New ADODB.Recordset

cn.ConnectionString = "Provider=SQLOLEDB;Data Source=MARS;Initial Catalog=automation;Trusted_connection=yes;"
cn.Open

cn.Execute ("INSERT INTO test(data) VALUES ('" & name & "')")
rs.Open "SELECT @@identity AS NewID", cn
testIdentity = rs.Fields("NewID")
rs.Close

cn.Execute ("INSERT INTO test2(data) VALUES ('" & concept & "')")
rs2.Open "SELECT @@identity AS NewID", cn
testIdentity = rs2.Fields("NewID")
rs2.Close

cn.Execute ("INSERT INTO test3(test_id, test2_id) VALUES ('" & testIdentity & "','" & test2Indentity & "')")

cn.Close

End Sub 
```

结果例如：INSERT INTO Test3 (test_id, test2_id) VALUES ('18','0')

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:41:18.327

怎么样：

```
sql = "INSERT INTO test(data) VALUES ('" & name & "');" & _
      "SELECT NewID = SCOPE_IDENTITY();"
SET rs = cn.Execute (sql)
testIdentity = rs.Fields("NewID") 
```

话虽如此，您至少应该使用参数化语句，或者更好的是存储过程。另外，我不确定为什么在插入数值时要在数值周围加上单引号。您是否将数字存储为字符串？为什么？如果不是，你为什么把它们当作字符串对待？

# lua - 云前的电晕图像？

> ID：14804245
> 
> 赞同：1
> 
> 时间：2013-02-11T00:19:50.523
> 
> 标签：lua, coronasdk

嗨，由于某种原因，我无法让**本地直升机 = display.newImage("helicopter.png")** 在云层前显示（移动背景），有没有解决这个问题的好方法？

```
<code>
function initcloud()
    local cloud1 = {}
    cloud1.imgpath = "cloud1.png"; --Set Image Path for cloud
    cloud1.movementSpeed = 10000; --Determines the movement speed of cloud
    table.insert(cloudTable, cloud1); --Insert cloud into cloudTable

    local cloud2 = {}
    cloud2.imgpath = "cloud2.png";
    cloud2.movementSpeed = 12000;
    table.insert(cloudTable, cloud2);               

    local cloud3 = {}
    cloud3.imgpath = "cloud3.png";
    cloud3.movementSpeed = 14000;
    table.insert(cloudTable, cloud3);
end --END initcloud()   

function getRandomcloud()
local temp = cloudTable[math.random(1, #cloudTable)] -- Get a random cloud from cloudTable
local randomcloud = display.newImage(temp.imgpath); --physics.addBody(randomcloud, {isSensor = true});
randomcloud.myName = "cloud";
randomcloud.movementSpeed = temp.movementSpeed; -- set the cloud cloudting point
randomcloud.x = math.random(10, _W);
randomcloud.y = -35;
randomcloud.rotation = math.random(0, 20); -- move the cloud
cloudMove = transition.to(randomcloud, {
time = randomcloud.movementSpeed, 
y = 500,
onComplete = function(self)
self.parent:remove(self);
self = nil;
end 
});
end

function cloudtGame()
    cloudTimer1 = timer.performWithDelay(1400,getRandomcloud, 0)
    cloudTimer2 = timer.performWithDelay(2000,getRandomcloud, 0)
    cloudTimer3 = timer.performWithDelay(2400,getRandomcloud, 0)        
end--END cloudtGame()

initcloud()
cloudtGame()

local helicopter = display.newImage("helicopter.png")
</code> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T03:57:21.500

当我使用我的解决方案运行您的代码时，它起作用了。我添加的只是：

```
randomcloud:toBack() 
```

因为`randomcloud`是一个显示对象，我可以将它发送到页面的后面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:18:33.803

最简单的解决方案是使用两个 DisplayGroup（一个用于云，一个用于直升机）按所需顺序安装在一个“根”组内。这样，您将只有一个没有组的对象 - “根”。

[http://www.coronalabs.com/blog/2012/02/28/corona-display-groups-101/](http://www.coronalabs.com/blog/2012/02/28/corona-display-groups-101/)

# python - 将模型拆分为多个文件 Python 导入包/子包

> ID：14804246
> 
> 赞同：0
> 
> 时间：2013-02-11T00:19:57.223
> 
> 标签：python, pyramid, mako

我收到以下错误：

```
Error: ImportError: No module named models.account 
```

我正在尝试拆分我的模型。

这是我的项目结构：

```
site
  | site
  |  | models
  |  |  | __init__.py
  |  |  | account.py
  |  | views
  |     | __init__.py
  |     | site.py
  | __init__.py
  | resources.py
  | routes.py
  | security.py 
```

站点/站点/视图/site.py

```
from pyramid.view import view_config
from pyramid.httpexceptions import HTTPFound
from site.models.account import User

@view_config(context='pyramid.httpexceptions.HTTPForbidden',
         renderer='generic/login.mako')
@view_config(route_name='generic_login', renderer='generic/login.mako')
def login(request):
  if request.scheme == 'http':
    request.scheme = 'https'
    #return HTTPFound(location=request.url)

  if 'form.submitted' in request.params:
    uemail = request.params['email']
    pw = request.params['pass']

    user = User.objects(email=uemail).first()

  return {} 
```

小路

```
/Volumes/workspace/py/website/site/bin
/Volumes/workspace/py/website/site/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg
/Volumes/workspace/py/website/site/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg
/Volumes/workspace/py/website/site/lib/python2.7/site-packages/WebError-0.10.3-py2.7.egg
/Volumes/workspace/py/website/site/lib/python2.7/site-packages/Pygments-1.6-py2.7.egg
/Volumes/workspace/py/website/site/lib/python2.7/site-packages/Tempita-0.5.1-py2.7.egg
/Volumes/workspace/py/website/site/site
/Volumes/workspace/py/website/site/lib/python2.7/site-packages/WebHelpers-1.3-py2.7.egg
/Volumes/workspace/py/website/site/lib/python27.zip
/Volumes/workspace/py/website/site/lib/python2.7
/Volumes/workspace/py/website/site/lib/python2.7/plat-darwin
/Volumes/workspace/py/website/site/lib/python2.7/plat-mac
/Volumes/workspace/py/website/site/lib/python2.7/plat-mac/lib-scriptpackages
/Volumes/workspace/py/website/site/lib/python2.7/lib-tk
/Volumes/workspace/py/website/site/lib/python2.7/lib-old
/Volumes/workspace/py/website/site/lib/python2.7/lib-dynload
/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7
/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin
/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk
/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac
/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages
/Volumes/workspace/py/website/site/lib/python2.7/site-packages 
```

我是 python 新手，所以想弄清楚这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T01:28:12.180

`site`[是标准 Python 模块之一](http://docs.python.org/2/library/site.html)的名称，更糟糕的是，它是一种特殊情况，会在解释器初始化期间自动导入。`site`如果系统模块覆盖您的模块，这可能是问题的原因。

您可以尝试通过使用类似的东西来解决这个问题

```
from ..models.account import User 
```

但最终值得重命名您的项目。

在 Python 中混淆导入错误的另一个常见问题是循环模块依赖关系——比如说，如果你有

```
from site.views import blah 
```

在你的`site.models`模块中的某个地方，同时尝试这样做`from site.models.account import User`会`site.views`导致循环依赖，它基本上表现在有问题的 import 语句下面的任何内容中都没有定义。如果您在查找循环导入时遇到问题，请更新您的问题，列出所有导入的位置`site.models`和`site.views`位置。

# sql - SQL Server 存储过程语法

> ID：14804247
> 
> 赞同：0
> 
> 时间：2013-02-11T00:20:00.533
> 
> 标签：sql, sql-server-2008, stored-procedures

我不是一个真正的 SQL 人，所以我很挣扎。下面有什么问题`"program"`阻止我创建这个存储过程？任何帮助或清理建议都会很棒。

```
ALTER PROCEDURE [dbo].[CreateHaystackExportJob_Program]
    -- Add the parameters for the stored procedure here
    @ID AS VARCHAR
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    DECLARE @JobCount AS INT

    SELECT 
        @JobCount = COUNT (*) 
    FROM 
        dbo.HaystackExportJobs
    WHERE 
        ID = @ID AND ExportType = "program" 

    IF @JobCount = 0
        INSERT INTO dbo.HaystackExportJobs (ID,ExportType) VALUES (@ID,"program")

END 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T00:23:43.743

有几件事，首先你应该在`@id`参数中包含一个长度。

其次，SQL Server 中的字符串值应该用单引号括起来，所以删除双引号并用 . 周围的单引号替换它们`"program"`。所以你的代码将与此类似：

```
CREATE PROCEDURE [dbo].[CreateHaystackExportJob_Program]
    -- Add the parameters for the stored procedure here
    @ID AS VARCHAR(50) -- place a length on this parameter or an int if this is numeric
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    DECLARE @JobCount AS INT

    SELECT 
        @JobCount = COUNT (*) 
    FROM 
        dbo.HaystackExportJobs
    WHERE 
        ID = @ID 
        AND ExportType = 'program' 

    IF @JobCount = 0
        INSERT INTO dbo.HaystackExportJobs (ID,ExportType) 
        VALUES (@ID,'program')

END 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/58987)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T00:23:17.927

**奇怪的事情：**

1.  该参数声明为没有大小的 varchar。
2.  不能使用引号来封装字符串。您需要使用撇号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T00:23:44.727

使用单引号，而不是双引号。这是使用双引号的示例。ExportType = "程序"

# ruby - Ruby 版本/旧版本 1.8.7 与新的 RVM 版本 1.9.3 混在一起

> ID：14804248
> 
> 赞同：0
> 
> 时间：2013-02-11T00:20:13.363
> 
> 标签：ruby, ruby-on-rails-3, ubuntu, installation, rvm

我使用一些旧服务器，上面安装了旧的 ruby​​ 1.8.7。由于某些原因（不是你会说的最好的），我安装了 rvm。

我现在有应用程序在这个旧的 1.8.7 上运行，其他的在 1.9.3 上运行。

我能理解这很混乱。我正在寻找一种安全的方法来清理它。我的主要问题是一些宝石对使用哪个 ruby​​ 版本感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T00:38:04.867

您可以确保该命令在新的 ruby​​ 中运行：

1.  `rvm 1.9.3 do ...`
2.  `rvm use 1.9.3; ...`
3.  `source $(rvm 1.9.3 do rvm env --path); ...`

第一个适用于单个命令，最后一个适用于脚本。

# c# - 将 float[][] 编组为 float**

> ID：14804251
> 
> 赞同：1
> 
> 时间：2013-02-11T00:21:08.600
> 
> 标签：c#, c++, pinvoke, marshalling

假设我有一个带有原型的 C++ 函数

```
int someFunction(const float ** raws) 
```

如何使用`float[][]`C# 中的参数调用此函数？可能不使用不安全的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T10:21:00.727

据我所知，您必须自己完成大部分工作。Interop 将帮助您编组顶级数组，但您的工作将是固定所有嵌套数组，然后在完成后取消固定它们。此代码显示了一种方法：

```
using System;
using System.Runtime.InteropServices;

namespace ManagedClient
{
    class Program
    {
        [DllImport("UnmanagedDll.dll", CallingConvention = CallingConvention.StdCall)]
        private static extern int UseFloats([MarshalAs(UnmanagedType.LPArray)] IntPtr[] raws);

        static void Main(string[] args)
        {
            float[][] data =
            {
                new[] { 0.0f, 0.1f, 0.2f, 0.3f, 0.4f },
                new[] { 1.0f, 1.1f, 1.2f, 1.3f },
                new[] { 2.0f },
                new[] { 3.0f, 3.1f }
            };

            var handles = new GCHandle[data.Length];
            var pointers = new IntPtr[data.Length];

            try
            {
                for (int i = 0; i < data.Length; ++i)
                {
                    var h = GCHandle.Alloc(data[i], GCHandleType.Pinned);
                    handles[i] = h;
                    pointers[i] = h.AddrOfPinnedObject();
                }

                UseFloats(pointers);
            }
            finally
            {
                for (int i = 0; i < handles.Length; ++i)
                {
                    if (handles[i].IsAllocated)
                    {
                        handles[i].Free();
                    }
                }
            }
        }
    }
} 
```

这将构建一个指针数组，每个指针都指向`float`输入数组中的数据。（这是您的 C 函数期望数据到达的格式。）您的 C 代码如何知道每个子数组的长度取决于您。在我的测试代码中，我只是对其进行了硬编码以匹配传入的 C# 代码：

```
__declspec(dllexport) int __stdcall UseFloats(const float ** raws) 
{
    printf("%f %f %f %f %f\n", raws[0][0], raws[0][1], raws[0][2], raws[0][3], raws[0][4]);
    printf("%f %f %f %f\n", raws[1][0], raws[1][1], raws[1][2], raws[1][3], raws[0][4]);
    printf("%f\n", raws[2][0]);
    printf("%f %f\n", raws[3][0], raws[3][1]);
    return 0;
} 
```

实际上，您可能想要做一些事情来告诉非托管代码每个子数组的长度 - 您选择的非托管函数签名不会让被调用的代码以任何方式知道每个子数组的长度。（大概您使用 float** 的原因是因为您想要锯齿状数组。如果不是，并且每个子数组的长度完全相同，那么在这里使用矩形数组而不是指针，它也会使编组更容易。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T11:08:45.350

Ian 已经回答了您的问题，我只想建议在 C++ 端使用 SAFEARRAY。

SAFEARRAY 是 C/C++ 中数组定义模糊问题的 COM 答案，它们是包含底层元素数量和大小的结构，更适合 .Net 数组。使用它们将允许从 C# 自动编组数组。

SAFEARRAY 在 C++ 中使用起来很痛苦，但 ATL 有一些很好的包装器可以让事情变得更容易。如果可能的话，更改 C++ 函数以使用它，或者考虑编写一个 C++ 包装器以与使用它们的 .Net 互操作，并使用 C++ 编写编组代码。

# jquery - 如何使用 bootstrap 中的 selectpicker 插件在选择时设置选定值

> ID：14804253
> 
> 赞同：109
> 
> 时间：2013-02-11T00:21:20.007
> 
> 标签：jquery, twitter-bootstrap, bootstrap-select

我正在使用这样的[Bootstrap-Select](https://github.com/silviomoreto/bootstrap-select)插件：

**HTML**：

```
<select name="selValue" class="selectpicker">
   <option value="1">Val 1</option>
   <option value="2">Val 2</option>
   <option value="3">Val 3</option>
   <option value="4">Val 4</option>
</select> 
```

**Javascript**：

```
$('select[name=selValue]').selectpicker(); 
```

现在我想在单击按钮时将选择的值设置为此选择......像这样：

```
$('#mybutton').click(function(){
   $('select[name=selValue]').val(1);
}); 
```

但什么也没有发生。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2013-02-11T00:53:26.777

该值已正确选择，但您没有看到它，因为插件隐藏了真正的选择并显示一个带有无序列表的按钮，因此，如果您希望用户在选择上看到所选值，您可以执行类似这样的操作：

```
//Get the text using the value of select
var text = $("select[name=selValue] option[value='1']").text();
//We need to show the text inside the span that the plugin show
$('.bootstrap-select .filter-option').text(text);
//Check the selected attribute for the real select
$('select[name=selValue]').val(1); 
```

### 编辑：

就像@blushrt 指出的那样，更好的解决方案是：

```
$('select[name=selValue]').val(1);
$('.selectpicker').selectpicker('refresh') 
```

### 编辑2：

要选择多个值，请将值作为数组传递。

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2013-12-04T15:45:31.657

```
$('select[name=selValue]').val(1);
$('.selectpicker').selectpicker('refresh'); 
```

这就是你需要做的。无需直接更改selectpicker生成的html，只需更改隐藏的select字段，然后调用selectpicker('refresh')即可。

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2015-10-12T22:35:17.800

```
$('.selectpicker').selectpicker('val', YOUR_VALUE); 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2016-01-18T09:48:20.803

如果“val”参数用于设置值，则不需要刷新，[请参见 fiddle](http://jsfiddle.net/t0xicCode/96ntuxnz/)。为值使用方括号以启用多个选定值。

```
$('.selectpicker').selectpicker('val', [1]); 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-05-21T07:06:22.827

```
$('#mybutton').click(function(){
   $('select[name=selValue]').val(1);
   $('select[name=selValue]').change();
}); 
```

这对我有用。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-12-01T15:37:51.687

实际上您的值已设置，但您的选择器未刷新

正如您可以从文档中阅读的那样
[https://silviomoreto.github.io/bootstrap-select/methods/#selectpickerval](https://silviomoreto.github.io/bootstrap-select/methods/#selectpickerval)

正确的方法是

```
$('.selectpicker').selectpicker('val', 1); 
```

对于多个值，您可以添加值数组

```
$('.selectpicker').selectpicker('val', [1 , 2]); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-07-28T06:10:33.437

您可以通过在元素上调用 val 方法来设置选定的值。

```
$('.selectpicker').selectpicker('val', 'Mustard');
$('.selectpicker').selectpicker('val', ['Mustard','Relish']); 
```

这将选择多选中的所有项目。

```
$('.selectpicker').selectpicker('selectAll'); 
```

详细信息可在网站上找到：[https ://silviomoreto.github.io/bootstrap-select/methods/](https://silviomoreto.github.io/bootstrap-select/methods/)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2020-06-23T09:27:14.597

`$('selector').selectpicker('val',value);`

代替选择器，您可以为您提供选择器类或 id，例如：`$('#mySelect').selectpicker('val',your_value)`

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-09-07T00:15:05.100

```
$('.selectpicker').selectpicker("val", "value"); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-04-29T18:25:05.380

当您没有选项的“硬编码”值（即 1、2、3、4 等）时， **blushrt 的**答案略有不同

假设您渲染一个`<select>`选项值是某些用户的 GUID。然后，您需要以某种方式提取选项的值，以便将其设置在`<select>`.

下面我们选择select的第一个选项。

**HTML**：

```
<select name="selValue" class="selectpicker">
   <option value="CD23E546-9BD8-40FD-BD9A-3E2CBAD81A39">Dennis</option>
   <option value="4DDCC643-0DE2-4B78-8393-33A716E3AFF4">Robert</option>
   <option value="D3017807-86E2-4E56-9F28-961202FFF095">George</option>
   <option value="991C2782-971E-41F8-B532-32E005F6A349">Ivanhoe</option>
</select> 
```

**Javascript**：

```
// Initialize the select picker.
$('select[name=selValue]').selectpicker();

// Extract the value of the first option.
var sVal = $('select[name=selValue] option:first').val();

// Set the "selected" value of the <select>.
$('select[name=selValue]').val(sVal);

// Force a refresh.
$('select[name=selValue]').selectpicker('refresh'); 
```

我们在带有 multiple 关键字的选择中使用了它`<select multiple>`。在这种情况下，默认情况下没有选择任何内容，但我们希望始终选择第一项。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-04-29T04:41:40.633

```
var bar= $(#foo).find("option:selected").val(); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-05-04T12:08:06.230

基于@blushrt 的出色回答，我将更新此回复。只是使用 -

```
$("#Select_ID").val(id); 
```

如果您已将所需的所有内容预加载到选择器中，则可以使用。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-02-10T15:21:44.987

此外，您可以将其称为多值

`$(<your select picker>).selectpicker("val", ["value1", "value2"])`

你可以在这里找到更多[https://developer.snapappointments.com/bootstrap-select/methods/](https://developer.snapappointments.com/bootstrap-select/methods/)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-06-21T06:38:38.693

```
$('.selectpicker option:selected').val(); 
```

只需输入 option:selected 即可获得价值，因为引导选择选择器更改为并以不同的方式出现。但是选择仍然有选择

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2022-03-04T06:54:18.987

当您使用**Bootstrap Selectpicker**时，您应该使用它来获取所选选项的值。

```
$('#membershipadmin').selectpicker("option:selected").val(); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-05-08T06:29:20.200

另一种方法是，使用***this***关键字，您可以简单地获取***this***中的对象并操作它的值。例如：

```
$("select[name=selValue]").click(
    function() {
        $(this).val(1);
    }); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-12-18T04:15:34.537

```
$('.selectpicker').selectpicker('val', '0'); 
```

'0' 是您要选择的项目的值

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2016-05-07T10:17:37.320

用户 ID 对于元素，然后

```
document.getElementById('selValue').value=Your Value;
$('#selValue').selectpicker('refresh'); 
```

* * *

## 回答 #19

> 赞同：-3
> 
> 时间：2013-10-18T16:02:46.367

使用它，它会工作：

```
 $('select[name=selValue]').selectpicker('val', 1); 
```

# jquery - Fancybox 图像计数器

> ID：14804255
> 
> 赞同：1
> 
> 时间：2013-02-11T00:21:24.043
> 
> 标签：jquery, image, fancybox, counter

我正在使用 Fancybox 1.3.4 版。我正在尝试使用 Fancybox 在我的图片库底部包含一个图像计数器（Y 的图像 X）和一个“关闭 X”按钮。我已经阅读了几篇试图解决这个问题的帖子，并且我已经根据提供的答案更改了我的代码，但我似乎仍然无法正确编码这个问题。

这是我已更正的代码：

```
<script type="text/javascript">
$(document).ready(function() {
$("a[rel=gallery]").fancybox({
        'transitionIn'      : 'fade',
    'transitionOut'     : 'fade',
    'titlePosition'     : 'inside',
    'titleFormat'       : function(title, currentArray, currentIndex,      currentOpts) {
return '<div id="gallery-title">Image ' + (currentIndex + 1) + ' of ' +   currentArray.length + (title.length ? ' &nbsp; ' + title : '') + '</span>';
            }
        }); 
```

和

```
<div id="gallery">
<a rel="gallery" href="images/MapDesignImageGallery/full/1.png" title="First Bulgarian            Tsardom (Advanced Cartography/GIS Map of the Year)***PUBLISHED***" id="image1">
<img src="images/MapDesignImageGallery/thumbnails/1.jpg" width="150" height="185" />   </a> 
```

任何意见是极大的赞赏。谢谢。

# macos - 使用 Rust FFI 冻结通过 GLUT 打开的窗口

> ID：14804256
> 
> 赞同：0
> 
> 时间：2013-02-11T00:21:41.517
> 
> 标签：macos, opengl, glut, rust

问题的标题几乎描述了这个场景。我正在尝试使用 Rust 的 FFI 和 GLUT 库在 OS X 10.8 上打开一个 OpenGL 窗口。窗口打开，控制权移交给 glutMainLoop，但窗口没有绘制任何内容（包括带有关闭、最小化、最大化按钮的标准标题栏！它只是一个白色方块），我每次都必须强制退出程序. 目前我使用的 FFI 只是我通过查看其他 FFI 拼凑起来的实际功能的一小部分。这是我到目前为止的代码：

main.rs：

```
use gl::*;
use glut::*;

fn main() {
    glut::init();
    glut::initWindowSize(640, 480);
    glut::initWindowPosition(100, 100);
    glut::initDisplayMode(glut::DOUBLE | glut::RGBA);
    glut::createWindow("Test GLUT");

    glut::displayFunc(|| {
        io::println("Display func start");
        gl::clear(gl::COLOR_BUFFER_BIT);

        gl::begin(gl::TRIANGLES);
            gl::vertex2f(-0.5, 0.0);
            gl::vertex2f(0.0, 1.0);
            gl::vertex2f(0.5, 0.0);
        gl::end();

        glut::swapBuffers();
        io::println("Swapped buffers");
    });
    gl::clearColor(0.3, 0.3, 0.3, 0.3);

    glut::keyboardFunc(|key: char, x: int, y: int| {
        if(key == 'q') {
            io::println("Pressed q");
        }
    });

    io::println("Starting main loop");
    glut::mainLoop();
} 
```

过剩.rs：

```
use libc::{c_int, c_uint, c_char, c_uchar};
use task::local_data::{local_data_get, local_data_set};

#[cfg(target_os="macos")]
#[nolink]
#[link_args="-framework GLUT"]
extern mod dummy {
}

fn displayFuncTlsKey(callback: @@fn()) {
    // Empty
}
extern fn displayFuncCallback() {
    unsafe {
        let callback = local_data_get(displayFuncTlsKey).get();
        (*callback)();
    }
}

fn keyboardFuncTlsKey(callback: @@fn(key: char, x: int, y: int)) {
    // Empty
}
extern fn keyboardFuncCallback(key: c_uchar, x: c_int, y: c_int) {
    unsafe {
        let callback = local_data_get(keyboardFuncTlsKey).get();
        (*callback)(key as char, x as int, y as int);
    }
}

#[nolink]
extern mod glut_unsafe {
    pub fn glutInit(argc: *c_int, argv: **c_char);
    pub fn glutInitDisplayMode(mode: c_uint);
    pub fn glutInitWindowPosition(x: c_int, y: c_int);
    pub fn glutInitWindowSize(width: c_int, height: c_int);
    pub fn glutCreateWindow(title: *c_char) -> c_int;

    pub fn glutDisplayFunc(func: *u8);
    pub fn glutKeyboardFunc(func: *u8);

    pub fn glutMainLoop();
    pub fn glutSwapBuffers();
}

mod glut {
    pub const RGB: u32 = 0;
    pub const RGBA: u32 = 0;

    pub const SINGLE: u32 = 0;
    pub const DOUBLE: u32 = 2;

    pub fn init() {
        unsafe {
            let argc = 1 as c_int;
            // I wonder how correct this is...
            let command = str::as_c_str("draw", |s| s);
            let argv: &[*c_char] = &[command, ptr::null()];
            let argv_p: **c_char = vec::raw::to_ptr(argv);
            // let argv_p: **c_char = cast::reinterpret_cast(&ptr::to_unsafe_ptr(&argv));
            // let argv: (*u8, *u8) = (vec::raw::to_ptr(command), ptr::null());
            // let argv_p: **c_char = cast::reinterpret_cast(&ptr::to_unsafe_ptr(&(command, ptr::null)));

            glut_unsafe::glutInit(ptr::to_unsafe_ptr(&argc), argv_p);
        }
    }

    pub fn initWindowSize(width: int, height: int) {
        unsafe {
            glut_unsafe::glutInitWindowSize(width as c_int, height as c_int)
        }
    }
    pub fn initWindowPosition(x: int, y: int) {
        unsafe {
            glut_unsafe::glutInitWindowPosition(x as c_int, y as c_int)
        }
    }
    pub fn initDisplayMode(mode: u32) {
        unsafe {
            glut_unsafe::glutInitDisplayMode(mode as c_uint)
        }
    }

    pub fn createWindow(title: &str) -> int {
        let mut bytes = str::as_c_str(title, {|s| s});
        unsafe {
            glut_unsafe::glutCreateWindow(bytes) as int
        }
    }

    pub fn displayFunc(func: @fn()) {
        unsafe {
            local_data_set(displayFuncTlsKey, @func);
            glut_unsafe::glutDisplayFunc(displayFuncCallback)
        }
    }
    pub fn keyboardFunc(func: @fn(key: char, x: int, y: int)) {
        unsafe {
            local_data_set(keyboardFuncTlsKey, @func);
            glut_unsafe::glutKeyboardFunc(keyboardFuncCallback)
        }
    }

    pub fn mainLoop() {
        unsafe {
            glut_unsafe::glutMainLoop()
        }
    }
    pub fn swapBuffers() {
        unsafe {
            glut_unsafe::glutSwapBuffers()
        }
    }
} 
```

任何帮助弄清楚为什么会发生这种情况都会很棒。当我尝试使用绑定到 glfw 时也发生了类似的事情，所以我认为我可能做错了一些基本错误，但我不知道是什么。

编辑：这是捆绑的 0.5 tarball，不是来自 GitHub 的最新版本。由于某种原因，最新的不会编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:41:40.783

此问题可能与您正在运行代码的线程有关。一些库与进程开始执行的实际主线程有密切关系，这通常是图形库和窗口系统调用的情况。Rust 主任务不在主线程上执行，但 Rust 库确实有办法在主线程上执行任务。请参阅[伺服的示例](https://github.com/mozilla/servo/blob/master/src/servo/platform/osmain.rs#L340)。

如果这不能让您摆脱困境，那么您可能需要创建一个 .app 文件夹来运行您的 OS X 应用程序。我对细节并不完全熟悉，但我相信 coca API 没有一个就不能完全工作。

# c++ - 类对象指针不会分配给字符串

> ID：14804261
> 
> 赞同：0
> 
> 时间：2013-02-11T00:23:13.183
> 
> 标签：c++, string, class, object, pointers

我正在尝试将指针分配给这样的值

```
 string name;
    XMLSerial * ptr;

    if(name == "Armor")
    {
         ptr = &name;
    } 
```

名称较早初始化。XMLSerial 是我编写的一个类。我正在尝试将一些 XML 反序列化为对象。如果名称是我定义的类或对象之一，我希望 XMLSerial 对象指针为对象创建空间。

我得到的错误是`cannot convert std::string* {aka std::basic_string<char>*} to XMLSerial* in assignment`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:27:12.120

您发布的代码应该完全按照您描述的方式失败。很难确切地知道您在哪里偏离了轨道，但是您的 XMLSerial 可能有一个`operator=(std::string)`您正在尝试使用的。

如果是这种情况，请将您的代码替换为：

```
string name;
XMLSerial xml;

if(name == "Armor")
{
     xml = name;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T00:26:17.123

假设您的`XMLSerial`对象可以从 a 构造`string`，这将起作用。

```
string name;
XMLSerial * ptr;

if(name == "Armor")
{
     ptr = new XMLSerial( name );
} 
```

**编辑：**

而且，正如评论的那样，处理指针和`new`/`delete`带有自己的责任。

# ruby-on-rails - 设计可确认令牌未正确路由

> ID：14804269
> 
> 赞同：0
> 
> 时间：2013-02-11T00:24:06.140
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我已经设法将设计安装到我的 rails 应用程序中。电子邮件生成并将电子邮件发送给用户。我的麻烦是，当我单击链接以确认我的注册时，我的 google chrome 浏览器中出现以下错误

```
> `Oops! Google Chrome could not find http`
> http://http//localhost:3000/users/confirmation?confirmation_token=HCJ5yqnWkiESnVxcbeqe 
```

似乎以下`link_to`内容无法正常工作：

`<p><%= link_to 'Confirm my account', confirmation_url(@resource, :confirmation_token => @resource.confirmation_token) %></p>`.

我的设计可确认设置遵循以下 SO 问题[How do I enable :confirmable in Devise?](https://stackoverflow.com/questions/4783392/how-do-i-enable-confirmable-in-devise)

我也在使用最新版本的设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:39:11.333

查看您的`config/environments/development.rb`文件并确保其设置如下：

```
config.action_mailer.default_url_options = { :host => 'localhost:3000' } 
```

从您发布的 URL 看来，您已将主机配置为`http//localhost:3000`

# c# - 隐藏程序集类

> ID：14804270
> 
> 赞同：1
> 
> 时间：2013-02-11T00:24:05.930
> 
> 标签：c#, .net

我有一个程序集库，其中包含一个名为“Architecture”的类。在另一个程序集中，我有一个名为“ArchitectureManager”的类，它可以帮助我实现该当前程序集的某些特定类类型。

最后我有第三个装配项目需要“ArchitectureManager”，问题是如何从第三个装配项目中隐藏“架构”，因为第二个装配需要它，我也不能将项目二合并到项目一中。

这是进一步澄清的片段：

```
//Assembly one
public class Architecture
{
}

//Assembly two
public class ArchitectureManager
{
  //Implement some Architecture class methods
}

//Asembly three needs ArchitectureManager but doesnt need to know about Architecture. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T00:26:31.813

您可以将`InternalsVisibleTo`属性用于包含`Architecture`. 您将其标记为`internal`并允许它仅对您的其他程序集可见。

请参阅此 MSDN 链接：http: [//msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.internalsvisibletoattribute.aspx)

您还可以在 SO 上查看此处标记的其他问题：[https ://stackoverflow.com/questions/tagged/internalsvisibleto](https://stackoverflow.com/questions/tagged/internalsvisibleto)

是否有特定原因导致您的`Architecture`对象对其他类不可见？我自己很少这样做。。

# iphone - 更改 ABRecordRef 属性

> ID：14804279
> 
> 赞同：0
> 
> 时间：2013-02-11T00:25:55.263
> 
> 标签：iphone, ios, objective-c, ipad

我有以下cpde：

```
ABRecordRef person = ABAddressBookGetPersonWithRecordID(addressBook, ABRecordGetRecordID(self.recordRef_));

 CFErrorRef  error = NULL;

    if ([self.nameTextField_.text isNotNull]){
        NSArray *nameStringArray = [self.nameTextField_.text componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
        ABRecordSetValue(person, kABPersonFirstNameProperty, (__bridge CFTypeRef)([nameStringArray objectAtIndex:0]), NULL);
        if ([nameStringArray count] > 1){
            ABRecordSetValue(person, kABPersonLastNameProperty, (__bridge CFTypeRef)([nameStringArray lastObject]), &error);
        }
    } 
```

但是，在这段代码之后，它给了我这个错误：

```
Error Domain=ABAddressBookErrorDomain Code=0 "The operation couldn’t be completed. (ABAddressBookErrorDomain error 0.)" 
```

知道这是为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T00:38:33.687

错误消息似乎毫无用处，但由于您的其余代码看起来是有效的，我猜您的应用程序尚未被用户授权访问通讯簿数据库。在尝试访问地址簿之前，使用如下代码检查您的授权状态：

```
if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusAuthorized) {
    // We're good to go
} else {
    // Hasn't been authorized by the user
    // You can check the exact authorization status for more information on the
    // exact reason why you can't access the Address Book (e.g. denied, restricted, etc.)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-07T09:35:22.680

当您使用的联系人后端不处理您尝试添加到联系人的字段时，就会发生这种情况。在你的情况下，我怀疑你的后端根本不处理写操作..这真是令人惊讶。

请参阅有关该主题的 Apple 文档：

```
enum {
   kABOperationNotPermittedByStoreError = 0,
   kABOperationNotPermittedByUserError 
}; 
```

**kABOperationNotPermittedByStoreError**

地址簿数据库不允许该操作，因为联系人的来源不支持它。

在 iOS 2.0 及更高版本中可用。

**kABOperationNotPermittedByUserError**

不允许该操作，因为用户拒绝访问通讯簿数据库。

在 iOS 6.0 及更高版本中可用。

# ruby-on-rails - Ruby on Rails NoMethodError 调用 object.each

> ID：14804281
> 
> 赞同：0
> 
> 时间：2013-02-11T00:26:04.887
> 
> 标签：ruby-on-rails, nomethoderror

我在模型中有`show`动作。`Exhibitor`我想显示一个列表，`Meetings`其中.`Exhibitor``Sponsor`

`Exhibitor`模型：

```
class Exhibitor < ActiveRecord::Base
 attr_accessible :description, :name, :exhibitor_category, :sponsor,    :exhibitor_category_id

 validates :name, :presence => true
 validates :description, :presence => true
 validates :exhibitor_category, :presence => true

 belongs_to :exhibitor_category
 belongs_to :sponsor
 end 
```

`show`行动：

```
def show
    @exhibitor = Exhibitor.find(params[:id])
    @sponsoredmeetings = @exhibitor.sponsor

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @exhibitor }
    end
  end 
```

`show`看法：

```
 <p>
    <b>Meetings:</b>
    <% @sponsoredmeetings.each do |c| %>
    <%= c.meetings %>
    <% end %>
    </p> 
```

当我运行页面时，我得到了这个：

> 参展商中的 NoMethodError#show
> 
> # Rails.root 的未定义方法“each”：C:/RailsInstaller/Ruby1.9.3/eventmanager
> 
> 应用程序跟踪 | 框架跟踪 | 完整跟踪 app/controllers/exhibitors_controller.rb:17:in `show' 请求
> 
> 参数：
> 
> {"id"=>"1"} 显示会话转储

我在控制器页面上做错了什么以不断收到此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T01:47:02.627

`@sponsoredmeetings.each`在您看来，该错误与该错误有关。

`@sponsoredmeetings`正如我在您的模型中看到的那样，具有 和 的值`@exhibitor.sponsor`，并且`sponsor`属性不是返回集合而是单个对象，因此`each`该属性返回的对象没有方法。你有`belongs_to`from `exhibitor`to的连接`sponsor`，所以**一个** `exhibitor`只属于**一个** `sponsor`。

如果您想创建一对多关系，其中一个参展商有多个赞助商，您应该替换

```
belongs_to :sponsor 
```

和

```
has_many :sponsors 
```

如果您想要多对多关系（许多参展商有很多赞助商，赞助商有很多参展商），请检查[此问题](https://stackoverflow.com/questions/5120703/creating-a-many-to-many-relationship-in-rails-3)`has_and_belongs_to_many`中描述的连接。

当然，如果您的数据库模式具有一对多关系，其中一个赞助商有许多参展商（如您的`exhibitor`模型所建议的那样）并且您想以一种建议的方式更改模型，请记住更新数据库中的关系。

请务必阅读有关[rails 中关联的](http://guides.rubyonrails.org/association_basics.html)更多信息。

# ios6 - 从笔尖加载的 UITableView 单元格不显示背景颜色

> ID：14804282
> 
> 赞同：2
> 
> 时间：2013-02-11T00:26:04.550
> 
> 标签：ios6, uitableview

我正在从 UITableViewController 中的 nib 文件加载 UITableView 单元格，并且未显示我在 Interface Builder 中设置的背景颜色。为什么不？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T00:44:51.493

您应该使用Apple 在[Table View Programming Guide for iOS](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html)`tableView:willDisplayCell:forRowAtIndexPath:`中推荐的设置背景颜色：

> `tableView:willDisplayCell:forRowAtIndexPath:`表格视图在绘制行之前向其委托发送消息。如果委托选择实现此方法，它可以在单元格对象显示之前对其进行最后一分钟的更改。使用此方法，委托应该只更改之前由表视图设置的基于状态的属性，例如选择和背景颜色，而不是内容。

此代码执行交替的“斑马条纹”效果：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.row % 2 == 0) {
        UIColor *altCellColor = [UIColor colorWithWhite:0.7 alpha:0.1];
        cell.backgroundColor = altCellColor;
    }
} 
```

# python-3.x - 使用 Windows 7 运行 py3to2

> ID：14804287
> 
> 赞同：2
> 
> 时间：2013-02-11T00:27:03.407
> 
> 标签：python-3.x, command, file-conversion

我已经尽力了一个小时，但我对代码术语的理解还不够好，无法让 py3to2 正常工作。我有一个用 Python 3 编写的脚本，我想转换为 2。从这里下载并解压缩 py3to2： [https ://bitbucket.org/amentajo/lib3to2/overview](https://bitbucket.org/amentajo/lib3to2/overview)

这就是我所说的关于运行它的所有内容：

# 用法

运行“./3to2”来转换标准输入（“-”），作为参数给出的文件或目录。默认情况下，该工具在标准输出上输出统一的差异格式补丁，在标准错误上输出“更改内容”摘要，但可以给出“-w”选项来写回转换后的文件，创建“.bak”-命名备份文件。

如果您是 root，您还可以使用“./setup.py build”和“./setup.py install”进行安装（“make install”会为您执行此操作）。

我需要运行 Python 吗？命令行？我迷路了。有人做过吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-06T01:34:57.927

你知道如何使用 pip 吗？

只需输入`C:/[Enter your python folder]/Scripts/pip install 3to2`

转到 Python 文件夹中的 Scripts 文件夹并重命名`3to2`为`3to2.py`

然后，输入`C:/[Enter python folder again]/python.exe C:/[Enter python folder]/Scripts/3to2.py -w Path/To/The/Python/File`

# c# - 如何使用哈希码匹配任意数据？

> ID：14804291
> 
> 赞同：0
> 
> 时间：2013-02-11T00:27:19.747
> 
> 标签：c#, python, .net, sorting, hash

我在空间中有一些点，每个点都有一个`id`. 我在另一组中也有这些点的一个子集，它们具有不同的`id`值。

如何`id`为两组点创建一种新类型，以便具有相同坐标的点最终使用相同的`id`值？

我假设我需要使用它们的坐标生成哈希码，这应该`id`为具有相同坐标的点提供相同的值，对吧？

我很困惑如何使用它，因为哈希码集比 float[3] 小得多。所以不确定我是否走在正确的轨道上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:31:46.987

我不完全确定你在这里的意思，但你*可以*使用[`__hash__`](http://docs.python.org/2/reference/datamodel.html#object.__hash__)a `tuple`：

```
class Point(object):
    def __init__(self,x,y,z):
        self.x = x
        self.y = y
        self.z = z

    def __hash__(self):
        return hash((self.x,self.y,self.z))

    def __eq__(self,other):
        return (self.x,self.y,self.z) == (other.x,other.y,other.z) 
```

现在，包含相同点的对象都散列到相同的值。作为附带的好处，它们现在可以更合理地用作字典键或设置对象。

* * *

当然，如果你要写一个这么简单的类，你可能要考虑一个[`collections.namedtuple`](http://docs.python.org/2/library/collections.html#collections.namedtuple)。您甚至可以将其子类化（链接中已全部说明）。这样做的好处是对象是不可变的——改变一个可散列的对象并不是一件好事；-)。这些对象也与它们没有`__dict__`关联，因此如果您创建 100M 个对象，它们可能会更容易记忆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T00:39:32.127

哈希码并不意味着对于不相等的对象是唯一的——通常会有一些冲突。它们绝对不能用于测试是否相等。

哈希码用于将对象（希望）均匀地放置在数据结构中。如果要测试是否相等，请测试坐标是否相等。

# c# - 使用等离子样式分形生成高度图期间的伪影

> ID：14804292
> 
> 赞同：0
> 
> 时间：2013-02-11T00:27:27.627
> 
> 标签：c#, terrain, fractals, procedural-generation, heightmap

今天我花了几个小时研究随机地形生成是如何完成的，在阅读了等离子分形（中点位移和菱形正方形算法）之后，我决定尝试实现一个。我的结果实际上并不可怕，但我有这些可怕的方形/线条/网格类型的人工制品，我似乎无法摆脱！

当呈现为灰度图像时，我的高度图看起来像： [高度图 http://sphotos-d.ak.fbcdn.net/hphotos-ak-ash3/535816_10151739010123327_225111175_n.jpg](http://sphotos-d.ak.fbcdn.net/hphotos-ak-ash3/535816_10151739010123327_225111175_n.jpg)

显然这涉及到相当多的代码，但我会尝试发布仅相关的代码。例如，我没有发布将其转换为纹理的代码，但别担心，我已经尝试用平滑渐变填充我的高度数组，并且纹理很好:)

我首先将地图的四个角设置为 0 到 1 之间的随机值，然后启动递归位移算法：

```
 public void GenerateTerrainLayer()
    {  
        //set the four corners of the map to have random values
        TerrainData[0, 0] = (float)RandomGenerator.NextDouble();
        TerrainData[GenSize, 0] = (float)RandomGenerator.NextDouble();
        TerrainData[0, GenSize] = (float)RandomGenerator.NextDouble();
        TerrainData[GenSize, GenSize] = (float)RandomGenerator.NextDouble();

        //begin midpoint displacement algorithm...
        MidPointDisplace(new Vector2_I(0, 0), new Vector2_I(GenSize, 0), new Vector2_I(0, GenSize), new Vector2_I(GenSize, GenSize));
    } 
```

TerrainData 只是一个 2D 浮点数组*。Vector2_I 只是我自己的整数向量类。最后四个函数是 MidPointDisplace，它是递归函数，CalculateTerrainPointData 平均 2 个数据值并添加一些噪声，CalculateTerrainPointData2 平均 4 个数据值并添加一些噪声并具有稍高的比例值（仅用于中心点），最后我的噪声函数 atm 只是一些随机噪声，而不是像 perlin 等真正的噪声。它们看起来像这样：

```
 private void MidPointDisplace(Vector2_I topleft, Vector2_I topright, Vector2_I bottomleft, Vector2_I bottomright)
    {
        //check size of square working on.. if its shorter than a certain amount stop the algo, we've done enough
        if (topright.X - topleft.X < DisplacementMaxLOD)
        {
            return;
        }

        //calculate the positions of all the middle points for the square that has been passed to the function
        Vector2_I MidLeft, MidRight, MidTop, MidBottom, Center;

        MidLeft.X = topleft.X;
        MidLeft.Y = topleft.Y + ((bottomleft.Y - topleft.Y) / 2);

        MidRight.X = topright.X;
        MidRight.Y = topright.Y + ((bottomright.Y - topright.Y) / 2);

        MidTop.X = topleft.X + ((topright.X - topleft.X) / 2);
        MidTop.Y = topleft.Y;

        MidBottom.X = bottomleft.X + ((bottomright.X - bottomleft.X) / 2);
        MidBottom.Y = bottomleft.Y;

        Center.X = MidTop.X;
        Center.Y = MidLeft.Y;

        //collect the existing data from the corners of the area passed to algo
        float TopLeftDat, TopRightDat, BottomLeftDat, BottomRightDat;

        TopLeftDat = GetTerrainData(topleft.X, topleft.Y);          
        TopRightDat = GetTerrainData(topright.X, topright.Y);          
        BottomLeftDat = GetTerrainData(bottomleft.X, bottomleft.Y);          
        BottomRightDat = GetTerrainData(bottomright.X, bottomright.Y);

        //and the center

        //adverage data and insert for midpoints..
        SetTerrainData(MidLeft.X, MidLeft.Y, CalculateTerrainPointData(TopLeftDat, BottomLeftDat, MidLeft.X, MidLeft.Y));
        SetTerrainData(MidRight.X, MidRight.Y, CalculateTerrainPointData(TopRightDat, BottomRightDat, MidRight.X, MidRight.Y));
        SetTerrainData(MidTop.X, MidTop.Y, CalculateTerrainPointData(TopLeftDat, TopRightDat, MidTop.X, MidTop.Y));
        SetTerrainData(MidBottom.X, MidBottom.Y, CalculateTerrainPointData(BottomLeftDat, BottomRightDat, MidBottom.X, MidBottom.Y));
        SetTerrainData(Center.X, Center.Y, CalculateTerrainPointData2(TopLeftDat, TopRightDat, BottomLeftDat, BottomRightDat, Center.X, Center.Y));

        debug_displacement_iterations++;

        //and recursively fire off new calls to the function to do the smaller squares
        Rectangle NewTopLeft = new Rectangle(topleft.X, topleft.Y, Center.X - topleft.X, Center.Y - topleft.Y);
        Rectangle NewTopRight = new Rectangle(Center.X, topright.Y, topright.X - Center.X, Center.Y - topright.Y);
        Rectangle NewBottomLeft = new Rectangle(bottomleft.X, Center.Y, Center.X - bottomleft.X, bottomleft.Y - Center.Y);
        Rectangle NewBottomRight = new Rectangle(Center.X , Center.Y, bottomright.X - Center.X, bottomright.Y - Center.Y);

        MidPointDisplace(new Vector2_I(NewTopLeft.Left, NewTopLeft.Top), new Vector2_I(NewTopLeft.Right, NewTopLeft.Top), new Vector2_I(NewTopLeft.Left, NewTopLeft.Bottom), new Vector2_I(NewTopLeft.Right, NewTopLeft.Bottom));
        MidPointDisplace(new Vector2_I(NewTopRight.Left, NewTopRight.Top), new Vector2_I(NewTopRight.Right, NewTopRight.Top), new Vector2_I(NewTopRight.Left, NewTopRight.Bottom), new Vector2_I(NewTopRight.Right, NewTopRight.Bottom));
        MidPointDisplace(new Vector2_I(NewBottomLeft.Left, NewBottomLeft.Top), new Vector2_I(NewBottomLeft.Right, NewBottomLeft.Top), new Vector2_I(NewBottomLeft.Left, NewBottomLeft.Bottom), new Vector2_I(NewBottomLeft.Right, NewBottomLeft.Bottom));
        MidPointDisplace(new Vector2_I(NewBottomRight.Left, NewBottomRight.Top), new Vector2_I(NewBottomRight.Right, NewBottomRight.Top), new Vector2_I(NewBottomRight.Left, NewBottomRight.Bottom), new Vector2_I(NewBottomRight.Right, NewBottomRight.Bottom));

    }

    //helper function to return a data value adveraged from two inputs, noise value added for randomness and result clamped to ensure a good value
    private float CalculateTerrainPointData(float DataA, float DataB, int NoiseX, int NoiseY)
    {
         return MathHelper.Clamp(((DataA + DataB) / 2.0f) + NoiseFunction(NoiseX, NoiseY), 0.0f, 1.0f) * 1.0f;
    }

    //helper function to return a data value adveraged from four inputs, noise value added for randomness and result clamped to ensure a good value
    private float CalculateTerrainPointData2(float DataA, float DataB, float DataC, float DataD, int NoiseX, int NoiseY)
    {
        return MathHelper.Clamp(((DataA + DataB + DataC + DataD) / 4.0f) + NoiseFunction(NoiseX, NoiseY), 0.0f, 1.0f) * 1.5f;
    }

    private float NoiseFunction(int x, int y)
    {
        return (float)(RandomGenerator.NextDouble() - 0.5) * 0.5f;
    } 
```

好的，感谢您花时间查看-希望有人知道这种网格状图案是从哪里出现的:)

*edit - 意外写入整数，更正为浮点数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-23T09:05:23.013

我在您的代码中发现了 3 个问题。（其中2个是相关的）

您不会在每一步中缩小随机性。每一步都必须减少随机性。否则你会得到白（-ish）噪音。您选择一个因子（0.5-0.7 对我的目的来说效果很好）并在每次递归中将减少乘以 alpha 并将生成的随机数乘以该因子。

你交换了菱形和方步。首先是菱形，然后是正方形。反过来是不可能的（见下）。

Your square step uses only points in one direction. This one probably causes the rectangular structures you are talking about. The squares must average the values to all four sides. This means that the square step depends on the point generated by the diamond step. And not only the diamond step of the rectangle you are currently looking at, also of the rectangles next to it. For values outside of the map, you can either wrap, use a fixed value or only average 3 values.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T15:09:50.193

我在您的`CalculateTerrainPointData`实现中看到了一个问题：您没有缩小`NoiseFunction`每次迭代的结果。

请参阅中点位移算法的[描述](http://www.gameprogrammer.com/fractal.html#midpoint)：

> *   从单个水平线段开始。
>     *   重复足够多的次数：
>         *   在场景中的每个线段上重复：
>             *   找到线段的中点。
>             *   将 Y 中的中点替换为随机量。
>             *   **缩小随机数的范围。**

在代码中不做太多更改的快速方法是添加一些`scale`参数`MidPointDisplace`（默认设置为 1.0f）和`CalculateTerrainPointData`; 用它`CalculateTerrainPointData`来乘以`NoiseFunction`; 并通过每次递归调用来减少它`MidPointDisplace(..., 0.5f * scale)`。

*不确定这是否是您的图像看起来错误的唯一原因，或者还有其他问题。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-10T21:49:04.313

根据维基百科[对中点位移的总结](http://en.wikipedia.org/wiki/Diamond-square_algorithm#Midpoint_displacement_algorithm)，只有最中心点的平均值会添加噪声 - 尝试仅通过添加噪声`CalculateTerrainPointData2`和去除噪声`CalculateTerrainPointData`。

# java - 使用 Java 打印机编写 Scala 文件 - 为什么文件编写器会在此代码中停止？

> ID：14804295
> 
> 赞同：2
> 
> 时间：2013-02-11T00:27:53.910
> 
> 标签：java, scala, io

我正在研究一个 scala 测试用例并使用 printwriter 填充一些数据。这对我来说没有任何意义 - 看起来 appender 只是在 3/4 处停止。

您不需要用于字数统计的代码，因为您可以看到文件中的最后一行不完整：

```
hello world duck duck sauce sauce mazing ninjakeyboard skills ninja
hello world duck duck sauce 
```

日志：

```
[info] Give a file with 10 words repeated on 1000 lines and file handler 
[info] - should give us an array of 10000 words *** FAILED ***
[info]   8434 did not equal 10000 (WordCountFileHandler.scala:20) 
```

代码：

```
import java.io.PrintWriter
import org.scalatest.FlatSpec
import org.scalatest.matchers.ShouldMatchers
import WordCountFileHandler.WordCountFileHandler

class WordCountFileHandler extends FlatSpec with ShouldMatchers {

  "Give a file with 10 words repeated on 1000 lines and file handler" should "give us an array of 10000 words" in {
    val filename = java.util.UUID.randomUUID().toString
    val testFile = new PrintWriter( filename , "UTF-8")
    for (x <- 1 to 1000) yield {testFile.println("hello world duck duck sauce sauce mazing ninjakeyboard skills ninja")}
    testFile.close()

    val testOutput = WordCountFileHandler (filename)
    testOutput.size should equal(1)
    //testOutput.head.foreach(println(_))
    testOutput.head.size should equal (10000)
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:34:01.560

看起来缓冲区没有刷新 - 我遗漏了 file.close() 并且添加它之后它可以工作！很抱歉浪费您的时间。

谢谢，

# java - 我不小心序列化了一个包含不可序列化字段的对象；现在我需要把它拿回来

> ID：14804296
> 
> 赞同：0
> 
> 时间：2013-02-11T00:28:09.910
> 
> 标签：java, serialization, deserialization

我正在制作游戏。游戏设计师创建一个`Game`对象，然后将其保存到硬盘；为了玩游戏，用户`Game`从硬盘驱动器加载对象。`Game`对象`Serializable`是。该`Game`对象包含数千个其他对象（`Map`、`Person`、`Tile`s 等），所有这些对象也是`Serializable`.

不幸的是，我不小心在我的游戏中添加了一个新功能：一个名为`Large`. 我忘了`Serializable`在`Large`. 然后，我将一个对象添加到我花费大量时间处理`Large`的现有文件中。`Game`当我保存`Game`文件时，`NotSerializableException`发生了异常。

我正在尝试从这个错误中恢复并`Game`以可用的形式从硬盘驱动器中检索我的文件，这样我就可以继续设计我的游戏而无需重新创建它。不幸的是，当我尝试加载文件时，我得到一个`NotSerializableException`. 我尝试了以下策略，但没有成功：

*   `Serializable`在我的`Large`课堂上实施
*   使' `large`'变量`transient`

您还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-11T00:34:01.613

你确定游戏真的被保存了吗？如果在您保存文件时发生异常，我认为它无法序列化对象。

实际上，您面临的问题是将序列化对象用于此类事情的主要缺陷。当您对类进行更改时，例如以下之一，旧的序列化对象变得不兼容。

1.  删除字段
2.  更改对象的超类
3.  将非静态字段更改为静态（反之亦然）
4.  更改字段的类型。

你应该使用你自己的数据格式（当你还在的时候）。您可以选择自己喜欢的数据格式，甚至使用 XML 或 JSON（后者现在变得越来越流行，因为它更轻量级），并且有 API 可用于快速轻松地保存对象。

# c# - 使用 C# 登录 RoR (Devise) 应用程序

> ID：14804297
> 
> 赞同：0
> 
> 时间：2013-02-11T00:28:13.347
> 
> 标签：c#, ruby-on-rails, devise, passwords

我有一个 RoR Web 应用程序，目前利用 Devise 进行用户身份验证。据我了解，密码是使用 BCrypt 算法存储的，包括散列密码和 password_salt，它为我的用户表中的每个用户存储。

同时，我有一个用 C# 开发的 Microsoft Office 插件。我需要能够通过调用用户表并根据存储在用户表中的散列密码验证他们在加载项中输入的密码来从加载项登录用户。

不幸的是，当我尝试通过 C# 使用 BCrypt 时，我无法从加载项成功登录应用程序。我已经到处寻找有关如何实现这一目标的示例，但都做得很短。

谁能指出我正确的方向？和/或我是否还需要解析密码盐？提前感谢您的时间和帮助。

编辑：我看到 BCrypt 不再需要单独的密码盐。

EDIT2：我正在使用可设计加密，并且在我的初始化程序/devise.rb 中，我有：config.encryptor = :authlogic_sha512 和一个 config.pepper，它被设置为一个长散列。C# 现在应该使用 sha152 而不是 BCrypt 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:09:11.100

我建议您向应用程序添加一个 API，该 API 允许您通过 HTTP 发送用户名/密码对，并在成功时接收身份验证令牌。

这比尝试直接与数据库交互要容易得多，因为设计已经为您完成了所有艰苦的工作。

# excel - 将第 n 行复制并粘贴到其他工作表（mod）

> ID：14804301
> 
> 赞同：0
> 
> 时间：2013-02-11T00:28:39.167
> 
> 标签：excel, vba

我有这个代码（工作）。

```
Sub Copy_Ten()
 Dim X As Long, LastRow As Long
 Dim CopyRange As Range
 LastRow = Cells(Cells.Rows.Count, "A").End(xlUp).Row
 For X = 1 To LastRow Step 4
     If CopyRange Is Nothing Then
         Set CopyRange = Rows(X).EntireRow
     Else
         Set CopyRange = Union(CopyRange, Rows(X).EntireRow)
     End If
 Next
 If Not CopyRange Is Nothing Then
 CopyRange.Copy Destination:=Sheets("Sheet2").Range("A1")
 End If
 End Sub 
```

在第 2 页上，它始终从 A1 开始。我希望它寻找下一个空间并继续前进。

我拥有的代码是`Range("A1").End(xldown).Select`但是我不知道把它放在哪里。

因此，在第一次从 A1 开始之后，最终工作表 2 将永远不会......因为将会有一个不断增长的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:53:12.813

您可以使用该代码，但将其包装在 with 函数中，如下所示

```
With Sheets("Sheet2")
    lastRow2 = .Cells(.Rows.Count, "A").End(xlUp).Row
End With 
```

然后改变

```
CopyRange.Copy Destination:=Sheets("Sheet2").Range("A1") 
```

至

```
CopyRange.Copy Destination:=Sheets("Sheet2").Range("A" & lastRow2) 
```

为了使这一点更清楚，请尝试以下操作

```
Sub Copy_Ten()
    Dim X As Long, LastRow As Long, PasteRow As Long
    Dim CopyRange As Range
    LastRow = Cells(Cells.Rows.Count, "A").End(xlUp).Row
    With Sheets("Sheet2")
        PasteRow = .Cells(.Rows.Count, "A").End(xlUp).Row
    End With
    For X = 1 To LastRow Step 4
        If CopyRange Is Nothing Then
            Set CopyRange = Rows(X).EntireRow
        Else
            Set CopyRange = Union(CopyRange, Rows(X).EntireRow)
        End If
    Next
    If Not CopyRange Is Nothing Then
        CopyRange.Copy Destination:=Sheets("Sheet2").Range("A" & PasteRow)
    End If
End Sub 
```

# c - C中指针的问题。不同事物的相同指针

> ID：14804302
> 
> 赞同：0
> 
> 时间：2013-02-11T00:29:28.747
> 
> 标签：c, pointers

我有以下 C 代码：

```
int main(int argc, char *argv[])
{

    int n = argc - 1;
    int array[n];
    int m[n][n];

    int i = 0;
    for(i = 1; i<=n;i++)
    {    
             array[i] = atoi(argv[i]);
            printf("%d\n",array[i]);
    }   
    printf("array[4] = %d\n",array[4]);
    for(i = 1; i<=n;i++)
    {   
             m[i][i] = 0;
            printf("address of m[i][i] = %p\n",&m[i][i]);
    }   

    printf("value of array[4] =%d pointer = %p\n",array[4],&array[4]);

    for(i=1;i<=n;i++) printf("After %d\n",array[i]);

    return 0;
} 
```

如果我使用以下命令运行：“./program 30 35 15 5 10 20 15”，输出为：

```
30
35
15
5
10
20
25
array[4] = 5
address of m[i][i] = 0xbf93070c
address of m[i][i] = 0xbf93072c
address of m[i][i] = 0xbf93074c
address of m[i][i] = 0xbf93076c
address of m[i][i] = 0xbf93078c
address of m[i][i] = 0xbf9307ac
address of m[i][i] = 0xbf9307cc
value of array[4] =0 pointer = 0xbf9307cc
After 30
After 35
After 15
After 0
After 10
After 20
After 25 
```

请注意 array[4] 如何具有与 m[n][n] 相同的指针。我真的不明白这怎么可能。代码有什么问题。为什么数组[4] = m[n][n]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:33:43.683

```
for(i = 1; i<=n;i++)
{   
         m[i][i] = 0;
        printf("address of m[i][i] = %p\n",&m[i][i]);
} 
```

您已覆盖未为 m 保留的空间；

我应该从 0 到 n-1

```
for(i = 0 ; i < n ; i++)
{   
         m[i][i] = 0;
        printf("address of m[i][i] = %p\n",&m[i][i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T00:34:04.673

你的循环是错误的，数组`C`是从零开始的。意思是第一个元素是，`a[0]`最后一个元素是数组的大小。`a[N-1]``N`

这：

```
for(i = 1; i <= n; i++) 
```

应该是这样的：

```
for(i = 0; i < n; i++) 
```

否则，您会超出数组边界。

作为旁注，您正在使用 VLA 但未指定`C99`标签。确保你知道你在做什么。

# php - php 5.3 是否有任何已知问题阻止 php SDK 工作？

> ID：14804303
> 
> 赞同：1
> 
> 时间：2013-02-11T00:30:00.087
> 
> 标签：php, sdk, paypal

我不得不将 Paypal Payment pro 集成到客户的网站上。我首先在我的服务器上安装 paypal php SDK。它在 php 5.2.17 上运行，似乎运行良好。

当我完成测试时，我将 SDK 从我的服务器移动到运行 php 5.3.2 的客户端服务器，但由于某种原因它不起作用。

一开始我们确定这是权限问题，因为脚本无法写入 paypal.log 文件

大约一个星期以来，我们正在与托管公司合作解决问题。一个想法是将服务器回滚到 5.2.17（以匹配我服务器的 php 版本）。此更改解决了问题，但是服务器上的其他网站被搞砸了，这迫使我们回到 5.3.2

我一直在寻找解决方案。我在这里找到的一个解决方案： [PHP 5.3.1 上的 PayPal 错误消息](https://stackoverflow.com/questions/3345458/paypal-error-messages-on-php-5-3-1) 与梨包有关。

任何人都知道是否需要任何特殊的梨包才能使 SDK 工作？

以下是一些技术信息：

当错误报告设置为 -1 时尝试 doDirectPayment 示例时出现以下错误

**其中5或6个：**

`Warning: error_log(../PayPal.log) [function.error-log]: failed to open stream: Permission denied in /home/brando/public_html/wp-content/plugins/ownapainting-shopping-cart/paypal/lib/PPLoggingManager.php on line 60`

**1 个：**

`Strict Standards: Only variables should be passed by reference in /home/brando/public_html/wp-content/plugins/ownapainting-shopping-cart/paypal/lib/PPUtils.php on line 99`

**其中大约 12 个：**

`Strict Standards: Non-static method PPUtils::convertXmlObjToArr() should not be called statically in /home/brando/public_html/wp-content/plugins/ownapainting-shopping-cart/paypal/lib/PPUtils.php on line 99`

**和 5 个软管中的 2 个：**

`Notice: Class string not found. in /home/brando/public_html/wp-content/plugins/ownapainting-shopping-cart/paypal/lib/PPXmlMessage.php on line 172`

**请求：**

`<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns="urn:ebay:api:PayPalAPI" xmlns:ebl="urn:ebay:apis:eBLBaseComponents" xmlns:cc="urn:ebay:apis:CoreComponentTypes" xmlns:ed="urn:ebay:apis:EnhancedDataTypes" ><soapenv:Header><ns:RequesterCredentials><ebl:Credentials><ebl:Username>yanivk_1359660748_biz_api1.gmail.com</ebl:Username><ebl:Password>1359660807</ebl:Password><ebl:Signature>AYWZfz56bBT.eby8WGW6PcSYJuLGAJAkQp0g-4el58kjzrOUFVSWTpE5</ebl:Signature></ebl:Credentials></ns:RequesterCredentials></soapenv:Header><soapenv:Body><ns:DoDirectPaymentReq><ns:DoDirectPaymentRequest><ebl:DoDirectPaymentRequestDetails><ebl:PaymentDetails><ebl:OrderTotal><ebl:currencyID>USD</ebl:currencyID><ebl:value>1.00</ebl:value></ebl:OrderTotal><ebl:ShipToAddress><ebl:Name>John Doe</ebl:Name><ebl:Street1>1 Main St</ebl:Street1><ebl:CityName>San Jose</ebl:CityName><ebl:StateOrProvince>CA</ebl:StateOrProvince><ebl:Country>US</ebl:Country><ebl:PostalCode>95131</ebl:PostalCode></ebl:ShipToAddress></ebl:PaymentDetails><ebl:CreditCard><ebl:CreditCardType>Visa</ebl:CreditCardType><ebl:CreditCardNumber>4079305435163119</ebl:CreditCardNumber><ebl:ExpMonth>01</ebl:ExpMonth><ebl:ExpYear>2014</ebl:ExpYear><ebl:CardOwner><ebl:PayerName><ebl:FirstName>John</ebl:FirstName><ebl:LastName>Doe</ebl:LastName></ebl:PayerName><ebl:PayerCountry>US</ebl:PayerCountry><ebl:Address><ebl:Name>John Doe</ebl:Name><ebl:Street1>1 Main St</ebl:Street1><ebl:CityName>San Jose</ebl:CityName><ebl:StateOrProvince>CA</ebl:StateOrProvince><ebl:Country>US</ebl:Country><ebl:PostalCode>95131</ebl:PostalCode></ebl:Address></ebl:CardOwner><ebl:CVV2>962</ebl:CVV2></ebl:CreditCard></ebl:DoDirectPaymentRequestDetails><ebl:Version>94.0</ebl:Version></ns:DoDirectPaymentRequest></ns:DoDirectPaymentReq></soapenv:Body></soapenv:Envelope>`

**响应：**

`<?xml version="1.0" encoding="UTF-8"?><SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:cc="urn:ebay:apis:CoreComponentTypes" xmlns:wsu="http://schemas.xmlsoap.org/ws/2002/07/utility" xmlns:saml="urn:oasis:names:tc:SAML:1.0:assertion" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:wsse="http://schemas.xmlsoap.org/ws/2002/12/secext" xmlns:ed="urn:ebay:apis:EnhancedDataTypes" xmlns:ebl="urn:ebay:apis:eBLBaseComponents" xmlns:ns="urn:ebay:api:PayPalAPI"><SOAP-ENV:Header><Security xmlns="http://schemas.xmlsoap.org/ws/2002/12/secext" xsi:type="wsse:SecurityType"></Security><RequesterCredentials xmlns="urn:ebay:api:PayPalAPI" xsi:type="ebl:CustomSecurityHeaderType"><Credentials xmlns="urn:ebay:apis:eBLBaseComponents" xsi:type="ebl:UserIdPasswordType"><Username xsi:type="xs:string"></Username><Password xsi:type="xs:string"></Password><Signature xsi:type="xs:string"></Signature><Subject xsi:type="xs:string"></Subject></Credentials></RequesterCredentials></SOAP-ENV:Header><SOAP-ENV:Body id="_0"><DoDirectPaymentResponse xmlns="urn:ebay:api:PayPalAPI"><Timestamp xmlns="urn:ebay:apis:eBLBaseComponents">2013-02-10T23:51:36Z</Timestamp><Ack xmlns="urn:ebay:apis:eBLBaseComponents">Failure</Ack><CorrelationID xmlns="urn:ebay:apis:eBLBaseComponents">ccaa89a0e921f</CorrelationID><Errors xmlns="urn:ebay:apis:eBLBaseComponents" xsi:type="ebl:ErrorType"><ShortMessage xsi:type="xs:string">Transaction refused because of an invalid argument. See additional error messages for details.</ShortMessage><LongMessage xsi:type="xs:string">Order total is invalid.</LongMessage><ErrorCode xsi:type="xs:token">10401</ErrorCode><SeverityCode xmlns="urn:ebay:apis:eBLBaseComponents">Error</SeverityCode></Errors><Version xmlns="urn:ebay:apis:eBLBaseComponents">94.0</Version><Build xmlns="urn:ebay:apis:eBLBaseComponents">5060305</Build><Amount xsi:type="cc:BasicAmountType" currencyID="USD">0.00</Amount></DoDirectPaymentResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>`

我知道这是一个非常具体的问题，熟悉这个问题的人的可能性很低，但我不得不问。

感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:14:47.537

要解决这些错误中的每一个：

```
Warning: error_log(../PayPal.log) [function.error-log]: failed to open stream: Permission
denied in /home/brando/public_html/wp-content/plugins/ownapainting-shopping-
cart/paypal/lib/PPLoggingManager.php on line 60 
```

这将表明在所述路径存在权限问题。确保该文件存在并且对您的 www-root（或任何运行您的 Apache 服务的用户）具有适当的权限。

```
Strict Standards: Only variables should be passed by reference in 
/home/brando/public_html/wp-content/plugins/ownapainting-shopping-
cart/paypal/lib/PPUtils.php on line 99 
```

这表明变量的非最佳实践用法。我可以对此进行更深入的研究，但基本上，某些东西是通过引用而不是通过值传递的（谷歌它的区别）。

```
Strict Standards: Non-static method PPUtils::convertXmlObjToArr() should not be called 
statically in /home/brando/public_html/wp-content/plugins/ownapainting-shopping-
cart/paypal/lib/PPUtils.php on line 99 
```

静态方法是类中的一种方法，无需实例化整个类即可调用。这个方法似乎没有被定义为静态的，而是被用作静态的。

```
Notice: Class string not found. in /home/brando/public_html/wp-
content/plugins/ownapainting-shopping-cart/paypal/lib/PPXmlMessage.php on line 172 
```

严格标准的另一个问题。

基本上对于最后 3 个，从 E_STRICT | 更改错误报告 | E_ALL 到 E_ALL。它不会解决问题，但会阻止它们出现在客户面前。

最终的解决方案是根本不使用 PayPal SDK。不建议真正使用它。SDK 导致的问题比任何事情都多。这是我在人们开始使用 PayPal 集成时提供的一些入门信息。它应该有助于：

```
Getting Started: https://www.x.com/developers/paypal/documentation-tools/paypal-payments-pro/paypal-payments-pro-getting-started-guide 
API Reference Guide: https://www.x.com/developers/paypal/documentation-tools/api?qt-api_references=1#qt-api_references 
Sample Code: https://www.x.com/developers/paypal/documentation-tools/paypal-code-samples 
```

请使用 NVP，而不是 SOAP。SOAP 臃肿且完全没有必要。

# android - 使用不安全的 RFCOMM 蓝牙套接字时，android 何时显示配对对话框？

> ID：14804304
> 
> 赞同：12
> 
> 时间：2013-02-11T00:30:30.680
> 
> 标签：android, bluetooth, rfcomm

我正在尝试通过蓝牙连接两个未配对的 android 设备以实现 P2P 网络目的。不需要中间人保护。Android 有`createInsecureRfcommSocketToServiceRecord`and`listenUsingInsecureRfcommWithServiceRecord`为此（从 API 级别 10 开始），它可以在现代设备上完美运行。但是，在 Galaxy Ace（Android 2.3.3 = API 级别 10，与 Galaxy Nexus 连接）上，它会创建一个配对对话框。这发生在传入和传出连接上。（**更新**：将 Galaxy Ace 更新到 Android 2.3.6 显然可以解决问题。是否有特定的 Android 版本总是/从不这样做？）

接受配对后，连接工作。出于这个原因，我认为这与[问题 40101 无关：createInsecureRfcommSocketToServiceRecord 导致 Android 4.2 上的配对对话框](http://code.google.com/p/android/issues/detail?id=40101)只有在服务记录不存在时才会发生。

我认为在出现此对话框的设备上无法避免此对话框（如果可以，解释如何执行此操作是一个有效的答案）。出于这个原因，**我想知道什么时候会出现这样的对话框。**我在 Android Java 源代码中没有找到任何东西（它很快就变成了原生的）。我怀疑它与蓝牙版本有什么关系，因为 Ace 有蓝牙 2.1，它应该支持所需的“正常工作”连接。

如果有什么可以让我在不弹出对话框的情况下检测设备是否支持连接，或者它是否明确固定到某个 android 版本，那将极大地帮助我。

另外，我正在寻找一种轻松[排除此类设备](https://stackoverflow.com/questions/16381416/is-there-a-way-to-set-app-compatibility-per-android-version-not-api-level-in-t)的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-13T09:37:53.963

目前我和你有同样的问题。我开发了一个应用程序来在 BT 终端之间交换消息，我正在不同的手机（我有 S3、S2、S plus、Nexus One 和 Galaxy Y）上对其进行测试以分析行为。手机具有以下规格：

*   三星 S2 : 自定义 ROM (Android v4.2.1) - 已植根
*   三星 S3 : Stock ROM (Android v4.1.2)
*   三星 S+ : 自定义 ROM (Android v4.1.2) - 植根
*   三星 GY : 自定义 ROM (Android v2.3.6) - Rooted
*   Nexus One : Stock ROM (Android v2.3.6) - 扎根

根据我的经验，我可以告诉你，S2 和 S3 在一段时间后开始显示配对对话框，即使它们已经配对并交换数据。这种情况一直发生在我将这两款手机中的一款包含在我的测试平台中，其他手机工作正常并且从不要求配对（特别是具有完美行为的 Nexus One）。

我已经进行了长时间的测试（从 4 到 6 小时），但我仍然无法弄清楚为什么这款手机有时会在 3 小时后要求配对……有时会在 10 分钟后。

我想指出的唯一一件事是，即使您使用不安全的连接，您仍然可能会被要求进行人工交互以进行配对。看看那个（取自[http://en.wikipedia.org/wiki/Bluetooth](http://en.wikipedia.org/wiki/Bluetooth)）：

> 有效：顾名思义，此方法有效。无需用户交互；但是，**设备可能会提示**用户确认配对过程。这种方法通常用于 IO 功能非常有限的耳机，并且比固定 PIN 机制更安全，固定 PIN 机制通常用于这组有限设备的传统配对。此方法提供中间人 (MITM) 保护。

# ruby - Ruby Hash parsed_response 错误

> ID：14804307
> 
> 赞同：1
> 
> 时间：2013-02-11T00:31:03.510
> 
> 标签：ruby, xml, hash

背景

我正在使用 HTTParty 解析 XML 哈希响应。不幸的是，当哈希响应只有一个条目（？）时，生成的哈希是不可索引的。我已经确认生成的 XML 语法对于单个和多个条目（？）是相同的。当哈希中总是有多个条目（？）时，我还确认我的代码有效。

问题

我如何适应单个哈希条目的情况和/或是否有更简单的方法来完成我想要做的事情？

代码

```
require 'httparty'

  class Rest
    include HTTParty
    format :xml
  end

  def test_redeye
    # rooms and devices
    roomID = Hash.new
    deviceID = Hash.new { |h,k| h[k] = Hash.new }
    rooms = Rest.get(@reIp["theater"] + "/redeye/rooms/").parsed_response["rooms"]
    puts "rooms #{rooms}"   
    rooms["room"].each do |room|
        puts "room #{room}"
        roomID[room["name"].downcase.strip] = "/redeye/rooms/" + room["roomId"] 
        puts "roomid #{roomID}" 
        devices = Rest.get(@reIp["theater"] + roomID[room["name"].downcase.strip] + "/devices/").parsed_response["devices"]
        puts "devices #{devices}"
        devices["device"].each do |device|
            puts "device #{device}"
            deviceID[room["name"].downcase.strip][device["displayName"].downcase.strip] = "/devices/" + device["deviceId"] 
            puts "deviceid #{deviceID}"
        end
    end 
    say "Done"
  end 
```

XML - 单项

```
<?xml version="1.0" encoding="UTF-8" ?>
<devices>
  <device manufacturerName="Philips" description="" portType="infrared" deviceType="0" modelName="" displayName="TV" deviceId="82" />
</devices> 
```

XML - 多个条目

```
<?xml version="1.0" encoding="UTF-8" ?>
<devices>
  <device manufacturerName="Denon" description="" portType="infrared" deviceType="6" modelName="Avr-3311ci" displayName="AVR" deviceId="77" />
  <device manufacturerName="Philips" description="" portType="infrared" deviceType="0" modelName="" displayName="TV" deviceId="82" />
</devices> 
```

结果错误

```
[Info - Plugin Manager] Matches, executing block
rooms {"room"=>[{"name"=>"Home Theater", "currentActivityId"=>"78", "roomId"=>"-1", "description"=>""}, {"name"=>"Living", "currentActivityId"=>"-1", "roomId"=>"81", "description"=>"2nd Floor"}, {"name"=>"Theater", "currentActivityId"=>"-1", "roomId"=>"80", "description"=>"1st Floor"}]}
room {"name"=>"Home Theater", "currentActivityId"=>"78", "roomId"=>"-1", "description"=>""}
roomid {"home theater"=>"/redeye/rooms/-1"}
devices {"device"=>[{"manufacturerName"=>"Denon", "description"=>"", "portType"=>"infrared", "deviceType"=>"6", "modelName"=>"Avr-3311ci", "displayName"=>"AVR", "deviceId"=>"77"}, {"manufacturerName"=>"Philips", "description"=>"", "portType"=>"infrared", "deviceType"=>"0", "modelName"=>"", "displayName"=>"TV", "deviceId"=>"82"}]}
device {"manufacturerName"=>"Denon", "description"=>"", "portType"=>"infrared", "deviceType"=>"6", "modelName"=>"Avr-3311ci", "displayName"=>"AVR", "deviceId"=>"77"}
deviceid {"home theater"=>{"avr"=>"/devices/77"}}
device {"manufacturerName"=>"Philips", "description"=>"", "portType"=>"infrared", "deviceType"=>"0", "modelName"=>"", "displayName"=>"TV", "deviceId"=>"82"}
deviceid {"home theater"=>{"avr"=>"/devices/77", "tv"=>"/devices/82"}}
room {"name"=>"Living", "currentActivityId"=>"-1", "roomId"=>"81", "description"=>"2nd Floor"}
roomid {"home theater"=>"/redeye/rooms/-1", "living"=>"/redeye/rooms/81"}
devices {"device"=>{"manufacturerName"=>"Philips", "description"=>"", "portType"=>"infrared", "deviceType"=>"0", "modelName"=>"", "displayName"=>"TV", "deviceId"=>"82"}}
device ["manufacturerName", "Philips"]
/usr/local/rvm/gems/ruby-1.9.3-p374@SiriProxy/gems/siriproxy-0.3.2/plugins/siriproxy-redeye/lib/siriproxy-redeye.rb:145:in `[]': can't convert String into Integer (TypeError) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T00:54:34.683

我看到有几个选项。如果您控制端点，您可以修改正在发送的 XML 以[适应 HTTParty 的底层 XML 解析器，](https://github.com/jnunemaker/crack/blob/322e0035c4ef1a1410192942b4a62ac861cf3c3a/test/xml_test.rb#L359-L378)通过在XML 元素上放置一个`type="array"`属性来破解。`devices`

否则，您可以在索引设备之前检查设备的类别：

```
case devices["device"]
when Array
  # act on the collection
else
  # act on the single element
end 
```

每当您必须在动态语言中进行类型检查时，它就不太理想了，因此如果您发现自己不止一次地这样做，那么可能值得引入多态性或至少提取一种方法来执行此操作。

# mouseevent - 带有鼠标事件的 JqPlot EnhancedLegendRenderer

> ID：14804315
> 
> 赞同：0
> 
> 时间：2013-02-11T00:31:38.440
> 
> 标签：mouseevent, show-hide, jqplot, legend, legend-properties

我正在使用 JqPlot 在 jqplotMouseEnter 和 jqplotMouseLeave 事件上显示一些图例。

这是我的代码：

```
 $('#FinancialsLineGraph').bind('jqplotMouseEnter', function(ev, seriesIndex, pointIndex, data) {
            $('#FinancialsLineGraph .jqplot-table-legend').show();
    });
    $('#FinancialsLineGraph').bind('jqplotMouseLeave', function(ev, seriesIndex, pointIndex, data) {
            $('#FinancialsLineGraph .jqplot-table-legend').hide();
    }); 
```

使用上面的代码，当光标移动到图形内的实际图例上时，图例“闪烁”，用户无法使用 EnhancedLegendRenderer 显示/隐藏图中的相应系列。

我怎样才能使上述功能正常工作？

提前致谢。

**编辑**

这是我的 JS 情节代码。

```
var plotCogsLineGraph = $.jqplot('FinancialsLineGraph', [[30,31,34,40,45], [34,38,31,42,38]], 
{ 
            axes:
            {
                xaxis:
                {
                      ticks: ['5','4','3','2','1']
                },
                yaxis:
                {
                    label:'%',
                    pad: 1.05,
                    ticks: ['0','15','30','45','60']
                }
            },

            width: 480, height: 270,
            legend:{show:true, location: 's', placement: 'insideGrid', renderer: $.jqplot.EnhancedLegendRenderer},
    seriesDefaults: 
    {
                rendererOptions: {smooth: true}
    },
    series:[ 
                {
                    lineWidth:1, 
                    label:'COGS',
                    markerOptions: { size:1, style:'dimaond' }
                }, 
                {
                    lineWidth:1, 
                    label:'Wages',
                    markerOptions: { size: 1, style:"dimaond" }
                }
                ]
    }
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:43:09.560

这里实际发生的是，`jqplotMouseLeave`当您输入图例时正在引发事件，导致它不显示，然后引发`jqplotMouseEnter`（当图例被隐藏时，您突然进入情节），导致它显示. 由于这个循环，你会得到闪烁。

尝试将您的`'jqplotMouseLeave`处理程序更改为：

```
$('#FinancialsLineGraph).bind('jqplotMouseLeave', function(ev, seriesIndex, pointIndex, data) {
    var top, right, bottom, left;
    var legend = $('#FinancialsLineGraph .jqplot-table-legend');    
    top = legend.offset().top;
    left = legend.offset().left;
    bottom = top + legend.height();
    right = left + legend.width();

    if (!(ev.pageX >= left && ev.pageX <= right && ev.pageY >= top && ev.pageY <= bottom)) {
        $('#chart1 .jqplot-table-legend').hide();
    }
}); 
```

只有当鼠标光标位置不包含在图例的边界框中时，才会隐藏图例。

# jquery - 在 jQuery 中访问当前已滚动到的元素

> ID：14804319
> 
> 赞同：0
> 
> 时间：2013-02-11T00:32:06.663
> 
> 标签：jquery, scroll

我希望能够通过 jQuery 设置滚动点，这样当用户滚动到页面上某个部分的顶部时，就会触发一个函数。我通过以下方式做到了这一点： -

```
var target = $("section").offset().top;
var interval = setInterval(function() {
    if ($(window).scrollTop() >= target) {
        alert("test");
        clearInterval(interval);
    }
}, 250); 
```

但是，这在我有 alert("test") 的地方有效它在那一点上并从那里取得进展，因为不同的部分需要触发不同的功能。任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T00:39:57.207

you 元素本质上是`$("section")`. jQuery 中的`offset()`方法只返回第一个匹配元素的偏移量。[来自文档](http://api.jquery.com/offset/)：

> 获取**第一个元素**的当前坐标，或设置匹配元素集中每个元素相对于文档的坐标。

# windows-8 - 适用于 Windows 8 的自定义 URL 方案

> ID：14804323
> 
> 赞同：3
> 
> 时间：2013-02-11T00:32:29.800
> 
> 标签：windows-8, windows-runtime, windows-store-apps, windows-store

Windows 8 平台是否有与 iOS 平台上的自定义 url 方案类似的东西？

我在 MSDN 上找到了[有关](http://msdn.microsoft.com/en-us/library/aa767914%28v=VS.85%29.aspx)应用程序 URI 方案的信息。这不是答案。

在我的 iPad 应用程序中，用户会收到一封带有几个长键的电子邮件。用户单击 url，我的应用程序打开到正确的页面，其中填充了这些值。我错过了适用于 Windows 8 的类似功能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T06:09:36.613

您正在寻找协议激活。

`Package.appxmanifest`您可以通过在`Declarations`选项卡上添加支持的协议来添加`Protocol`. 这会将以下块添加到您的`Package.appxmanifest`文件中：

```
<Extensions>
  <Extension Category="windows.protocol">
    <Protocol Name="alrt" />
  </Extension>
</Extensions> 
```

您需要`App.xaml.cs`通过覆盖来处理协议激活`OnActivated`：

```
protected override void OnActivated(IActivatedEventArgs args)
{
    base.OnActivated(args);

    if (args.Kind == ActivationKind.Protocol)
    {
        var protocolArgs = args as ProtocolActivatedEventArgs;

        var rootFrame = new Frame();
        rootFrame.Navigate(typeof(MainPage), protocolArgs.Uri.AbsoluteUri);
        Window.Current.Content = rootFrame;
        Window.Current.Activate();
    }
} 
```

查看[此页面](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh779670%28v=win.10%29.aspx)以获取更详细的说明。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T06:22:16.383

看看[协议激活](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh779670.aspx)。[协会启动示例](http://code.msdn.microsoft.com/windowsapps/Association-Launching-535d2cec)应该提供一个您可以根据自己的需要进行调整的示例。

例如，Bing Maps 应用程序有一个[相当广泛的 URI 方案](http://msdn.microsoft.com/en-us/library/windows/apps/jj635237.aspx)（当然，你不能看到他们是如何实现它的 :)）

# sql - SELECT TOP 1 的 ANSI SQL 版本

> ID：14804325
> 
> 赞同：14
> 
> 时间：2013-02-11T00:32:55.063
> 
> 标签：sql, sql-server, ansi-sql

是否有符合 ANSI SQL 的 SQL SERVER 版本`SELECT TOP n`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-11T00:37:47.883

ANSI/ISO SQL:2003 引入了*窗口函数*：

```
SELECT * FROM (
  SELECT
    ROW_NUMBER() OVER (ORDER BY age ASC) AS rownum,
    person_id,
    person_name,
    age
  FROM person
) AS foo
WHERE rownum <= 3 
```

Microsoft SQL Server 自 SQL Server 2005 起就支持这种语法。 [http://msdn.microsoft.com/en-us/library/ms189798(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms189798(v=sql.90).aspx)

ANSI/ISO SQL:2008 为 引入了更简单的语法`FETCH FIRST`，可能更类似于 Microsoft/Sybase`TOP`语法：

```
SELECT person_id, person_name, age FROM person
FETCH FIRST 3 ROWS ONLY 
```

Microsoft 尚不支持此语法。另请参阅[http://en.wikipedia.org/wiki/Select_(SQL)#Limiting_result_rows](http://en.wikipedia.org/wiki/Select_(SQL)#Limiting_result_rows)

如果您仍在使用 Microsoft SQL Server 2000，您应该阅读我不久前发布的关于执行“分页”样式查询的问题： [Emulate MySQL LIMIT clause in Microsoft SQL Server 2000](https://stackoverflow.com/questions/216673/emulate-mysql-limit-clause-in-microsoft-sql-server-2000)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-08T16:21:25.167

'LIMIT' 适用于亚马逊的 Athena：

```
SELECT * FROM myTable LIMIT 3; 
```

# qt - Qt/PyQt：如何操作 QWebView/QWebPage 的“在新窗口中打开”操作？

> ID：14804326
> 
> 赞同：3
> 
> 时间：2013-02-11T00:33:08.083
> 
> 标签：qt, pyqt, pyqt4, qwebkit, qwebpage

如果我有一个打开的 QWebView，我喜欢它的默认上下文菜单，其中“在新窗口中打开”作为链接选项。但是，当用户请求在新窗口中打开链接时，我似乎找不到采取行动的方法。覆盖 QWebPage.createWindow 方法似乎不起作用，因为当用户选择在新窗口中打开链接时，不会调用该方法。

有什么建议吗？我正在使用 PyQt。

示例代码：

```
class LocalWebPage(QWebPage):
    def acceptNavigationRequest(self, webFrame, networkRequest, navigationType):
        print '*acceptNavigationRequest**',webFrame, networkRequest, navigationType
        return QWebPage.acceptNavigationRequest(self, webFrame, networkRequest, navigationType)

    def createWindow(self, windowType):
        print '--createWindow', windowType
        return QWebPage.createWindow(self, windowType)

class Browser(Ui_MainWindow, QMainWindow):
    def __init__(self, base, name):

        ...
        self.page = LocalWebPage()
        self.webViewMain = QWebView(self.centralwidget)
        self.webViewMain.setPage(self.page)
        ... 
```

我在那里有调试打印来验证 createWindow 没有被调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T21:38:18.593

您需要调用自己的`createWindow`方法`QWebView`，例如通过重新实现`triggerAction`of `QWebPage`，如下所示：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtGui, QtCore, QtWebKit

class MyPage(QtWebKit.QWebPage):
    def __init__(self, parent=None):
        super(MyPage, self).__init__(parent)

    def triggerAction(self, action, checked=False):
        if action == QtWebKit.QWebPage.OpenLinkInNewWindow:
            self.createWindow(QtWebKit.QWebPage.WebBrowserWindow)

        return super(MyPage, self).triggerAction(action, checked)

class MyWindow(QtWebKit.QWebView):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.myPage = MyPage(self)

        self.setPage(self.myPage)

    def createWindow(self, windowType):
        if windowType == QtWebKit.QWebPage.WebBrowserWindow:
            self.webView = MyWindow()
            self.webView.setAttribute(QtCore.Qt.WA_DeleteOnClose, True)

            return self.webView

        return super(MyWindow, self).createWindow(windowType)

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.show()
    main.load(QtCore.QUrl("http://www.example.com"))

    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T01:10:12.380

`hitTestContent`可以通过在 的`contextMenuEvent`方法中使用找到被右键单击的链接`QWebView`：

```
def contextMenuEvent(self, event):
  pos = event.pos()
  element = self.page().mainFrame().hitTestContent(pos)
  link_url = str(element.linkUrl().toString()) 
```

# java - Java：如何将 Double 2.3 更改为“2.0”？

> ID：14804334
> 
> 赞同：1
> 
> 时间：2013-02-11T00:34:09.010
> 
> 标签：java, floating-point, double

我怎样才能改变一个

```
Double d = 2.3 
```

到

```
Double with value of 2.0 
```

我用过`Math.round`，但它会产生`2.0`

我需要将其保存`String`为`2.0`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:36:49.673

您可以使用`printf(...)`：

```
System.out.printf("Double with value of %.1f", Math.round(d)); 
```

或者您可以使用以下方法将其保存到字符串`String.format(...)`：

```
String s = String.format("Double with value of %1f", Math.round(d)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T00:39:17.957

如果您需要将数值更改为您使用的字符串：

```
String.valueOf(myDouble); 
```

如果您使用**Double**包装器来存储您的双精度值，您也可以使用它：

```
myDouble.toString(); 
```

所以你可以将它与你的 Math.round() 调用结合使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T00:43:17.400

感谢@Hunter，我能够通过以下方式做到这一点

```
 String.valueOf(new Double(Math.round(new Double(Double.parseDouble(minorVersion) + 1.0)))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T00:45:33.863

最简单的代码：

```
String s = "" + myDouble; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T00:59:38.623

您问题的基本答案是使用

```
String.valueOf(doubleNo) //in your case doubleNo is 2.0 after rounding 
```

但是，考虑使用 BigDecimal 而不是使用 double，在这种情况下，您可以使用以下方法

```
public String roundAndPrintDouble(double no){
    String numberAsString = String.valueOf(no);
    BigDecimal decimalNo = new BigDecimal(numberAsString);
    BigDecimal roundedDecimal = decimalNo.round(MathContext.DECIMAL128);
    return roundedDecimal.toPlainString();
} 
```

如果您使用此解决方案的可能性不大，请查看 JavaDocs for [BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)和[MathContext](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/MathContext.html)之前。

# c# - Hmailserver C# SMTP

> ID：14804338
> 
> 赞同：6
> 
> 时间：2013-02-11T00:34:37.120
> 
> 标签：c#, smtp, hmail-server

我只是想让我的 hmailserver 从我的 C# 程序发送邮件。杀死我的部分是 SSL 部分。

我最初收到此错误：`The SMTP server requires a secure connection or the client was not authenticated. The server response was: SMTP authentication is required.`

所以我补充说： smtp.EnableSsl = true; 现在我得到了`Server does not support secure connections.`

这是我的代码，这让我发疯。我必须创建自己的 SSL 还是有办法在 hmailserver 端禁用 SSL？

```
MailMessage mail = new MailMessage("jlnt@ademo.net", "com", "NEW Item", emailBody);
SmtpClient smtp = new SmtpClient("1.1.1.250");
smtp.Port = 25;
NetworkCredential login = new NetworkCredential("ja@test.net", "dg");
smtp.Credentials = login;
smtp.EnableSsl = true;
smtp.UseDefaultCredentials = false;
smtp.Send(mail); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T00:59:31.263

啊，好吧，您要做的是在 HMailServer 中转到高级 IP 范围。创建一个新的 IP 范围，例如如果您是 192.168.1.2，则必须将范围设为 192.168.1.1-192.168.1.3，然后在底部取消选中所有必需的 smtp 身份验证框。

恼人的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T01:12:07.010

要启用安全连接以通过您的电子邮件提供商发送电子邮件，您必须更改端口号。

```
 MailMessage mail = new MailMessage("jlnt@ademo.net", "com", "NEW Item", emailBody);
        SmtpClient smtp = new SmtpClient("1.1.1.250");
        //smtp.Port =25;
        smtp.Port =587;
        NetworkCredential login = new NetworkCredential("ja@test.net", "dg");
        smtp.Credentials = login;
        smtp.EnableSsl = true;
        smtp.UseDefaultCredentials = false;
        smtp.Send(mail); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-01T10:40:28.103

我遇到了这个问题，我所做的是使用 localhost ip 和 EnableSsl 为 false

```
SmtpClient smtpClient = new SmtpClient();
            smtpClient.Host = "127.0.0.1";
            smtpClient.Credentials = new NetworkCredential("test@123test.com", "pass123");
            smtpClient.EnableSsl = false;

         // then your other statements like: from, to, body, to send mail 
```

[本](http://www.codingfusion.com/Post/hMailServer-Step-by-Step-Installation-Guide-Free-S)指南将帮助您在上面使用的 HMailServer 中设置自定义 NetworkCredentials，希望对某人有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-15T11:19:25.240

尽管自发布接受的答案以来已经过去了 7 年——我一开始也赞成它——我想强调的是，建议的解决方案会禁用整个身份验证过程，这是不必要的。问题在于：

```
smtp.UseDefaultCredentials = false; 
```

只需删除该行，它应该可以工作。

我在这里为我发布了可行的解决方案（请注意，我没有使用 SSL）：

```
 MailMessage mail = new MailMessage("a1@test.com", "foooo@gmail.com");
    SmtpClient client = new SmtpClient();
    client.Credentials = new NetworkCredential("a1@test.com", "test");
    client.Port = 25;
    client.EnableSsl = false;
    client.DeliveryMethod = SmtpDeliveryMethod.Network;
    client.UseDefaultCredentials = false;
    client.Host = "...IPv4 Address from ipconfig...";
    mail.Subject = "this is a test email.";
    mail.Body = "this is my test email body";
    client.Send(mail); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-24T07:54:20.690

在尝试将 hMailServer 配置为从 C# 发送电子邮件时，我偶然发现了这个问题。我尝试了以下方法：

*   C# SmtpClient - 不适用于隐式 SSL - 请参阅此[问题](https://stackoverflow.com/questions/1011245/how-can-i-send-emails-through-ssl-smtp-with-the-net-framework)和答案
*   AegisImplicitMail from [here](https://www.nuget.org/packages/AIM/) - 无法使用 UTF-8 字符串（我的字符串中有变音符号）
*   MailKit 从[这里开始](https://www.nuget.org/packages/MailKit/)- 非常强大和成熟，使用它没有问题

我的目标是：

*   体面的安全
*   能够向主流电子邮件提供商（例如 Google、Yahoo）发送电子邮件并到达收件箱
*   能够接收来自主流电子邮件提供商的电子邮件

**C# 代码**

```
 public void MailKitSend(string senderEmail, string senderName, string subject, string bodyText, string receivers, string receiversCc)
    {
        // no receivers, no e-mail is sent
        if (string.IsNullOrEmpty(receivers))
            return;

        var msg = new MimeMessage();
        msg.From.Add(new MailboxAddress(Encoding.UTF8, senderName, senderEmail));
        msg.Subject = subject;
        var bb = new BodyBuilder {HtmlBody = bodyText};
        msg.Body = bb.ToMessageBody();

        IList<string> receiversEmails = receivers.Split(new[] { ";" }, StringSplitOptions.RemoveEmptyEntries).ToList();
        foreach (string receiver in receiversEmails)
            msg.To.Add(new MailboxAddress(Encoding.UTF8, "", receiver));

        if (!string.IsNullOrEmpty(receiversCc))
        {
            IList<string> receiversEmailsCc = receiversCc.Split(new[] { ";" }, StringSplitOptions.RemoveEmptyEntries).ToList();
            foreach (string receiverCc in receiversEmailsCc)
                msg.Cc.Add(new MailboxAddress(Encoding.UTF8, "", receiverCc));
        }

        try
        {
            var sc = new MailKit.Net.Smtp.SmtpClient();
            if (!string.IsNullOrWhiteSpace(SmtpUser) && !string.IsNullOrWhiteSpace(SmtpPassword))
            {
                sc.Connect(SmtpServer, 465);
                sc.Authenticate(SmtpUser, SmtpPassword);
            }

            sc.Send(msg);
            sc.Disconnect(true);
        }
        catch (Exception exc)
        {
            string err = $"Error sending e-mail from {senderEmail} ({senderName}) to {receivers}: {exc}";
            throw new ApplicationException(err);
        }
    } 
```

**hMailServer 配置**

1）**开放端口**——开放25、143、465、995，保证可以收发邮件

2) **TCP/IP 端口配置**

```
SMTP / 0.0.0.0 / port 25 / no security (allow receiving start process)
SMTP / 0.0.0.0 / port 465 / SSL/TLS security (must define a SSL certificate)
POP3 / 0.0.0.0 / port 995 / SSL/TLS security (use the same SSL certificate) 
```

3)**预 C# 测试**

从 hMailServer 管理员运行诊断程序

使用允许手动配置各种设置的电子邮件客户端，例如每个协议的端口、安全性。我用过雷鸟。包括向外部提供商发送电子邮件和从他们那里接收电子邮件（我已经尝试过使用 Gmail）。

我没有更改 IP 范围，只保留了隐含的范围（我的电脑和 Internet）。

# facebook - Facebook Like Box 是空白的

> ID：14804339
> 
> 赞同：1
> 
> 时间：2013-02-11T00:34:41.000
> 
> 标签：facebook, iframe, facebook-like, facebook-iframe

我正在使用 iframe 方法在我的网站上获取 Facebook Like Box。该网站是： http: [//motorcyclealley.co.nz](http://motorcyclealley.co.nz)（Like Box 应该显示在 YouTube 视频右侧的底部）

但是，它始终是空白的。

在我的浏览器中浏览 iframe 网址：http://www.facebook.com/plugins/likebox.php?href=http: [//www.facebook.com/MotorcycleAlley&width=320&height=315&show_faces=false&colorscheme=light&stream=true&border_color&header=false&appId =397375460320824](http://www.facebook.com/plugins/likebox.php?href=http://www.facebook.com/MotorcycleAlley&width=320&height=315&show_faces=false&colorscheme=light&stream=true&border_color&header=false&appId=397375460320824)

还会产生一个空白屏幕。url 是使用[官方生成器生成](http://developers.facebook.com/docs/reference/plugins/like-box/)的。我无法弄清楚出了什么问题，因为它可以在我最初使用的浏览器（Linux 上的 Firefox 18.0.2）中运行。

我已经在 Chrome、Internet Explorer 和 Firefox/Windows 上进行了尝试，并确保所有广告拦截扩展都被禁用。我仍然得到空白屏幕。

谁能告诉我发生了什么事？

编辑：我还应该提到我已经尝试了 HTML5 和 FBML 方法，结果相同，它们都在那个 ONE 浏览器上工作，但在任何其他浏览器上都没有

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:25:36.293

好的，我刚刚发现了原因。除非您在该浏览器中登录 Facebook，否则“赞”框不会显示（因为它设置了年龄限制）。显然以下修复它：[https ://stackoverflow.com/a/9310091/335227](https://stackoverflow.com/a/9310091/335227)

# java - 爪哇。HtmlUnitDriver。下拉窗口问题

> ID：14804341
> 
> 赞同：1
> 
> 时间：2013-02-11T00:34:55.657
> 
> 标签：java, htmlunit

我在 Java 中使用 HtmlUnit 来处理 DropDown Window (Java)。

我按照用户 skaffman 的建议进行了尝试：

```
WebDriver driver = new HtmlUnitDriver();
driver.get("https://...");
...................... 
WebClient client = new Webclient();
Page page = client.getPage("https://...");
HtmlSelect select = (HtmlSelect) page.getElementById(mySelectId);
HtmlOption option = select.getOptionByValue(desiredOptionValue);
select.setSelectedAttribute(option, true); 
```

它无法识别：getElementById。Eclipse 建议切换到 findElement(By.id(" ")) 请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:59:24.073

在您的代码中，您将局部变量声明为`Page`将包含来自的返回值的类型`client.getPage("https://...");`

尽管向泛型接口（在本例中`Page`为`getElementById(...)`

尝试将您的第 4 行代码更改为以下内容：

```
HtmlPage page = client.getPage("https://..."); 
```

（我假设返回的`client.getPage("https://...");`内容是 MimeType `text/html`）。

您也可以使用`XmlPage`or `XhtmlPage`，具体取决于您的 MimeType。

如果您通过 检索的不是这些`client.getPage("https://...");`，那么您不应该尝试调用`getElementById`一个没有此作为其 API 一部分的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T03:24:11.127

我同意我的大学。上面的代码是正确的，确保你启用了javascript，否则你会遇到HtmlUnit的问题

```
driver = new HtmlUnitDriver(); 
((HtmlUnitDriver) driver).setJavascriptEnabled(true); 
```

# javascript - 更改悬停图像上的文本

> ID：14804346
> 
> 赞同：-1
> 
> 时间：2013-02-11T00:35:30.243
> 
> 标签：javascript, jquery, css, hover

我有以下 HTML 代码：

```
<div id="container">
<ul>
<li><img src="#" /></li>
<li><img src="#" /></li>
</ul>
<h2>Some Text</h2>
</div> 
```

我想要的只是将其中一个图像悬停在 ul 中，从而更改 h2 字段中的文本。使用 jQuery、javascript 或 css 来完成并不重要，但应该尽可能简单。

请用注释解释您的代码，以便我理解！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:38:56.243

好的，jquery 很容易做到这一点：

```
//mouseover any li tag and do the following
$("img").hover(function(){
     //get the html code in teh li
     var text = $(this).attr("src");
     //put that in any or all h2 tags
     $("h2").text(text);
});

$("img").mouseout(function(){
     $("h2").html("");        
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T00:41:12.773

您可以使用`hover()`jQuery 中的函数来检测用户何时将鼠标悬停在`img`：

```
$('ul li img').hover(function() {
   $('h2').text('Some more text'); // set whatever text you want here
}); 
```

jsFiddle：http: [//jsfiddle.net/ZLtqQ/](http://jsfiddle.net/ZLtqQ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T00:44:06.477

我认为这可以解决您的问题。

```
$("#container").find("img").each(function(){  //look for each img inside the #container div
  $(this).mouseover(function(){ // and when the mouse is over it
     $("h2").html($(this).attr("src")); // put the img source as h2 text
  })
}) 
```

提示：在 h2 上放一个 id，以便脚本将值放在您想要的 h2 中，享受 :)

# java - KeyListener 上的 Java SyntheticEvent

> ID：14804347
> 
> 赞同：0
> 
> 时间：2013-02-11T00:36:01.333
> 
> 标签：java

我正在实现一些扩展 JDialog 的对话框窗口，并且需要实现一些键盘快捷键，例如：

```
class MyDialog extends JDialog implements KeyListener
{
    /** Constructor
     * 
     */
    public MyDialog() {

        super();

        // add keyboard shortcuts:
        addKeyListener(this);
        setFocusable(true);
    }

    // ---------------------------------------------------------
    //                 Keyboard shortcuts
    // ---------------------------------------------------------
    public void keyReleased(KeyEvent e) {}
    public void keyTyped(KeyEvent e) {}
    public void keyPressed(KeyEvent e)
    {
        System.out.println(e);
        if ((e.getKeyCode() == KeyEvent.VK_W) && ((e.getModifiers() & Toolkit.getDefaultToolkit().getMenuShortcutKeyMask()) != 0)) {
            dispose();
        }
    }
} 
```

然后我有几个不同类型的对话框，它们扩展了 MyDialog。当键盘快捷键被触发时，我在控制台上得到以下输出：

```
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=157,keyText=?,keyChar=Undefined keyChar,modifiers=?,extModifiers=?,keyLocation=KEY_LOCATION_LEFT,rawCode=0,primaryLevelUnicode=0,scancode=0] on dialog0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=87,keyText=W,keyChar='w',modifiers=?,extModifiers=?,keyLocation=KEY_LOCATION_STANDARD,rawCode=0,primaryLevelUnicode=0,scancode=0] on dialog0
2013-02-10 19:24:28.716 java[10029:2707] Attempt to call non-applicable method "keyCode" on SyntheticEvent!
2013-02-10 19:24:28.718 java[10029:2707] (
    0   CoreFoundation                      0x00007fff90e5f0a6 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff9617b3f0 objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff90e5ee7c +[NSException raise:format:] + 204
    3   libawt.jnilib                       0x0000000110e3564b -[SyntheticEvent keyCode] + 58
    4   libawt.jnilib                       0x0000000110e397a4 -[NSViewAWT performKeyEquivalent:] + 507
    5   AppKit                              0x00007fff938793c9 -[NSView _performKeyEquivalent:conditionally:] + 41
    6   AppKit                              0x00007fff93879512 -[NSView performKeyEquivalent:] + 166
    7   AppKit                              0x00007fff938793c9 -[NSView _performKeyEquivalent:conditionally:] + 41
    8   AppKit                              0x00007fff93879329 -[NSWindow performKeyEquivalent:] + 64
    9   AppKit                              0x00007fff93879114 -[NSApplication _handleKeyEquivalent:] + 462
    10  AppKit                              0x00007fff93c29232 -[NSWindow keyDown:] + 89
    11  Foundation                          0x00007fff91965677 __NSThreadPerformPerform + 225
    12  CoreFoundation                      0x00007fff90dde101 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17
    13  CoreFoundation                      0x00007fff90dddaed __CFRunLoopDoSources0 + 445
    14  CoreFoundation                      0x00007fff90e00dc5 __CFRunLoopRun + 789
    15  CoreFoundation                      0x00007fff90e006b2 CFRunLoopRunSpecific + 290
    16  HIToolbox                           0x00007fff8b4430a4 RunCurrentEventLoopInMode + 209
    17  HIToolbox                           0x00007fff8b442e42 ReceiveNextEventCommon + 356
    18  HIToolbox                           0x00007fff8b442cd3 BlockUntilNextEventMatchingListInMode + 62
    19  AppKit                              0x00007fff93655613 _DPSNextEvent + 685
    20  AppKit                              0x00007fff93654ed2 -[NSApplication nextEventMatchingMask:untilDate:inMode:dequeue:] + 128
    21  libawt.jnilib                       0x0000000110de6fcf -[NSApplicationAWT nextEventMatchingMask:untilDate:inMode:dequeue:] + 124
    22  AppKit                              0x00007fff9364c283 -[NSApplication run] + 517
    23  libawt.jnilib                       0x0000000110de5680 +[AWTStarter startAWT:] + 1495
    24  libawt.jnilib                       0x0000000110de4ffa -[CPerformer perform] + 93
    25  Foundation                          0x00007fff91965677 __NSThreadPerformPerform + 225
    26  CoreFoundation                      0x00007fff90dde101 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 17
    27  CoreFoundation                      0x00007fff90ddda25 __CFRunLoopDoSources0 + 245
    28  CoreFoundation                      0x00007fff90e00dc5 __CFRunLoopRun + 789
    29  CoreFoundation                      0x00007fff90e006b2 CFRunLoopRunSpecific + 290
    30  java                                0x0000000107c97843 java + 18499
    31  java                                0x0000000107c9729a java + 17050
    32  java                                0x0000000107c94a98 java + 6808
) 
```

前两件事是 println 语句，这似乎是正常的。我不知道 SyntheticEvent 的含义是什么，并且在 Google 上没有成功。谁能指出我正确的方向 - 这有什么问题？此后窗口正常配置。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:25:36.607

不知道那个输出是从哪里来的。

不要将 KeyListener 用于此类功能。看：

1.  [如何使用菜单](http://docs.oracle.com/javase/tutorial/uiswing/components/menu.html)，或
2.  [如何使用键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

# c++ - 加载文件导致程序停止工作

> ID：14804348
> 
> 赞同：-1
> 
> 时间：2013-02-11T00:36:20.810
> 
> 标签：c++, windows

我想知道是否有人可以帮助我编写代码（C++）？这是不起作用的功能。当我运行它时，Windows 会弹出并说“该程序已停止工作”。这是不会运行的代码（它有点长，但该​​程序是专有的，我感谢任何帮助）：

```
void ClassName::loadGrades(){
    string temp;
    int count=0;

    ifstream labErnIn("labGradesErn.txt");
    if(labErnIn.is_open()){
        count=0;
        while(labErnIn.good()){
            getline(labErnIn, temp);
            float tempF = ::atof(temp.c_str());
            labGradesErn[count] = tempF;
            if(labGradesErn[count]==0 && count==0) labGradesErn[count]=-1;
            count++;
        }
        labGradesErn[count-1]=-1;
        labErnIn.close();
    }

    else{
        cout << "Unable to open file labGradesErn.txt" << endl;
    }
    // I repeat this for three other sections, same code, different var names.
    // From 'ifstream...' to 'Unable to open file'
} 
```

所有未在此函数中声明的变量都在别处声明。

谢谢，我真的很感激任何和所有的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:06:17.587

如果`labGradesErn`是固定数组，您迟早会冒着数组溢出的风险。如果是 a `std::vector`，则应该使用`push_back()`追加元素，因为增加索引不会增加向量。

另一点是您的 while 循环。你不测试是否`getline`成功，你应该循环`getline`而不是`good`

```
while (getline(labErnIn, temp)) {
...
} 
```

# django - 使用非模型值序列化 Django 模型

> ID：14804351
> 
> 赞同：0
> 
> 时间：2013-02-11T00:36:34.443
> 
> 标签：django, json, serialization

所以我有这种情况，我想用非模型值序列化模型。我得到了模型的序列化[查询集和单个模型本身]，但试图将它与非模型值结合起来似乎有问题。例如，我想对`User`一些`status`请求进行 JSONify。假设`model_to_JSON`model=>JSON，所以

```
# it messes the 'user' json by further escaping it, 
#which becomes unparseble on client since its a string now
dumps({ 'user': model_to_JSON(user_obj), 'status': 'ok'}) 
```

我可以做几个 hack，首先`loads`在转换后的 model-json 上做。但这是一种很老套的方式，浪费了很多时间在 dumps=>loads=>dumps 第二个选项是通过进行个人转储进行字符串连接，然后通过剥离最左边字符串的“}”和“{”来连接字符串最右边的字符串带有'，'。

Django 序列化程序是专门针对模型/查询集编写的，因此我无法真正覆盖它们。

那么以前有没有人遇到过这个问题以及您可以分享的任何解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:12:00.277

您可以查看[Django Full Serializers](http://code.google.com/p/wadofstuff/wiki/DjangoFullSerializers)，这是我很久很久以前使用的方法。

另一种选择是简单地编写您自己的序列化函数，它允许您传入属性名称（将在序列化时查找）。我也做过这个。如果您采用这种方法，请注意已经有一个 django 函数`model_to_dict`，它可以进行预序列化。

第三种方法可能是使用 django 的表单作为序列化的中间体：如果您也可能要反序列化从用户返回的数据，这可能很有用。

# ios - UICollectionView在调用reloadData时不会立即更新，而是在30-60秒后随机更新

> ID：14804359
> 
> 赞同：17
> 
> 时间：2013-02-11T00:37:14.947
> 
> 标签：ios, objective-c, uicollectionview

正如标题所暗示的那样， my`UICollectionView`不会在调用后立即更新和显示单元格`reloadData`。相反，它似乎最终会在 30-60 秒后更新我的收藏视图。我的设置如下：

`UICollectionView`添加到 Storyboard 中的视图控制器，`delegate`并`dataSource`设置视图控制器和标准插座设置 `numberOfSectionsInRow`&`cellForItemAtIndexPath`都实现并引用原型单元及其`imageView`内部

这是转到 Twitter 的代码，获取时间线，将其分配给变量，重新加载带有推文的表格视图，然后通过推文查找照片并重新加载带有这些项目的集合视图。

即使我注释掉显示图像的代码，它仍然不会改变任何东西。

```
SLRequest *timelineRequest = [SLRequest requestForServiceType:SLServiceTypeTwitter requestMethod:SLRequestMethodGET URL:timelineURL parameters:timelineParams];
[timelineRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
    if(responseData) {
        JSONDecoder *decoder = [[JSONDecoder alloc] init];

        NSArray *timeline = [decoder objectWithData:responseData];

        [self setTwitterTableData:timeline];

        for(NSDictionary *tweet in [self twitterTableData]) {
            if(![tweet valueForKeyPath:@"entities.media"]) { continue; }

            for(NSDictionary *photo in [[tweet objectForKey:@"entities"] objectForKey:@"media"]) {
                [[self photoStreamArray] addObject:[NSDictionary dictionaryWithObjectsAndKeys:
                                                    [photo objectForKey:@"media_url"], @"url",
                                                    [NSValue valueWithCGSize:CGSizeMake([[photo valueForKeyPath:@"sizes.large.w"] floatValue], [[photo valueForKeyPath:@"sizes.large.h"] floatValue])], @"size"
                                                    , nil]];
            }
        }

        [[self photoStreamCollectionView] reloadData];
    }
}]; 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-11T00:46:22.837

这是从后台线程调用 UIKit 方法的典型症状。如果您查看[`-[SLRequest performRequestWithHandler:]`文档](http://developer.apple.com/library/ios/#documentation/Social/Reference/SLRequest_Class/Reference/Reference.html)，它会说处理程序不保证它将在哪个线程上运行。

将您的呼叫包装`reloadData`在一个块中并将其传递给`dispatch_async()`; `dispatch_get_main_queue()`也作为队列参数传递。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-10-14T01:00:24.967

您需要将更新分派到主线程：

```
 dispatch_async(dispatch_get_main_queue(), ^{
    [self.photoStreamCollectionView reloadData];
  }); 
```

或在斯威夫特：

```
dispatch_async(dispatch_get_main_queue(), {
    self.photoStreamCollectionView.reloadData()
}) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-05T17:28:39.793

苹果说：你不应该在插入或删除项目的动画块中间调用这个方法。插入和删除会自动导致表的数据得到适当的更新。

面对：你不应该在任何动画中间调用这个方法（包括 UICollectionView 在滚动）。

这样你就可以：

```
[self.collectionView setContentOffset:CGPointZero animated:NO];
[self.collectionView performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO]; 
```

或者标记确定没有任何动画，然后调用reloadData；或者

```
[self.collectionView performBatchUpdates:^{
//insert, delete, reload, or move operations
} completion:nil]; 
```

# java - 使用 Lat /Lon 计算点 A 到线段的距离

> ID：14804360
> 
> 赞同：5
> 
> 时间：2013-02-11T00:37:17.737
> 
> 标签：java, android, gps, latitude-longitude

我正在开发一个使用 GPS 的 Android 应用程序。如果“新位置”（C点）离线段AB太远，我想知道是否有办法丢弃GPS位置数据。我正在使用[Wikipedia 上](http://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line)的 Point to Line Segment 公式。

到目前为止，当我尝试使用纬度和经度坐标时，我的代码返回 NaN。

```
private void verifyGPSLocation(Location start, Location end, Location current){
    final double errorValue = 0.0000216;
    double normalLength = Math.hypot(end.getLatitude() - start.getLatitude(), end.getLongitude() - start.getLongitude());
    double ret = Math.abs(((current.getLatitude() - start.getLatitude()) * (end.getLongitude() - start.getLongitude()) - (end.getLatitude() - start.getLatitude()))/normalLength );
    Log.e("Coooooord", normalLength+"--"+ret);
} 
```

这是我的第一篇文章，所以如果我没有正确或没有足够的信息，请告诉我。感谢您的帮助，我喜欢这个网站！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T00:41:43.567

我认为您用于查找 2 个地理点之间距离的公式过于简单。由于地球的曲率，公式有点复杂。看看[这里](http://www.movable-type.co.uk/scripts/latlong.html)，这提供了更准确的近似值。

还有一个 Javascript 示例，因此您可以通过一些语法调整轻松地将其更改为 Java。

澄清后，您似乎正在寻找一个点到地球上两个位置之间路径的距离。查看上面链接中的跨轨道距离变化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T00:40:47.503

你的距离算法是错误的。它没有考虑地球的曲率——经度线在高纬度处更近，在低纬度处更远。使用 Location.distanceTo 函数。

# javascript - 如果我使用 JQuery $.each() 遍历对象属性，是否有索引？

> ID：14804362
> 
> 赞同：2
> 
> 时间：2013-02-11T00:37:41.370
> 
> 标签：javascript, jquery, indexing, object-property

```
a = {b:'bb',c:'cc',d:'dd'};
$.each(a, function(index){
 // here 'index' is a string variable containing the property name, ie 'b', 'c' or 'd'.
} 
```

我想要属性的*整数*索引 - 这是否可能不使用独立的计数变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T00:58:11.487

你可以这样做：

```
Object.keys( a ).forEach(function ( name, index ) {
    var value = a[name];

    name // the property name
    value // the value of that property
    index // the counter
}); 
```

这是 ES5 API，所以 IE8 需要 es5-shim。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T00:57:00.907

不，它是一个对象。当您向 JS 对象添加新属性时，该属性应该在什么位置？如果你在中间删除了一个属性，然后再添加它怎么办？如果合并对象在其源代码中以完全不同的顺序具有相同名称的属性时，您将另一个对象合并到原始对象上怎么办？

你可以操纵一个计数，它可能在很多情况下都有效，但不能保证你会按照你期望的顺序得到东西。当顺序很重要时，您可以使用数组。当它没有并且您想通过名称方便地访问事物时，您使用对象文字。或者，您将数组包装在一个对象中，该对象在通过编写数组排序方法进行排序时维护数组索引的映射，该数组排序方法也对键/名称映射数组进行排序。

另外，学习 for/in 循环。没有理由使用 jQuery 来迭代非 jQuery 对象。充其量只会稍微慢一点。

编辑：

好吧，如果你想要一个计数而不是一个你可以依赖的索引以供将来参考，那么如果我不得不处理 IE8，我只会烘焙我自己的对象类型，因为我们通常尽量不接触 Object 构造函数原型（尽管对于对未来规范的规范化我想如果你能做到这一点而不破坏通常不会迭代原型方法的数组上使用的 for/in 循环之类的东西，那可能是可以的）。

```
function IterableCounterObj(objLiteral){ //or perhaps something less painfully named
    this.each = function(iteratorFunc){
        var cnt = 0;
        for(var x in objLiteral){
            cnt++;
            iteratorFunc(x,objLiteral[x],cnt);
        }
    }
}

var a = new IterableCounterObj({b:'bb',c:'cc',d:'dd'});
a.each(function(name,value,count){ console.log(count); });

//too much? Here's the jQuery approach to cruft

var $i = function(objLiteral){
    return new IterableCounterObj(objLiteral);
}

$i({b:'bb',c:'cc',d:'dd'}).each(function(name,value,count){ console.log(count); }); 
```

# regex - SED 命令匹配正则表达式但不替换

> ID：14804371
> 
> 赞同：1
> 
> 时间：2013-02-11T00:38:28.273
> 
> 标签：regex, sed, grep

我正在构建一个 .sed 文件以开始编写多个 apache 服务器的设置脚本。我试图让 sed 与 .conf 文件中的默认网站管理员电子邮件地址相匹配，这与这个 egrep 配合得很好。但是，当我使用 sed 尝试等替代搜索和替换时，我没有收到任何错误，但它也没有做任何替换。我通过再次运行相同的 egrep 命令来测试它。

```
egrep -o '\b[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+(\.[A-Za-z]{2,4})?\b' /home/test/httpd.conf 
```

返回

```
admin@your-domain.com
root@localhost
webmaster@dummy-host.example.com 
```

我尝试使用的 sed 命令是

```
sed -i '/ServerAdmin/ s/\b[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+(\.[A-Za-z]{2,4})?\b/MY_ADMIN_ADDRESS@gmail.com/g' /home/test/httpd.conf 
```

运行后，我尝试通过再次运行 egrep 来验证结果，它返回相同的 3 个电子邮件地址，表明没有任何内容被替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:32:47.363

不要假设任何两个工具都使用相同的正则表达式语法。如果您要使用 进行替换`sed`，请使用`sed`to test-not `egrep`。`sed`它就像一个`grep`命令 一样易于使用： `sed -ne '/pattern/p'`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T01:05:33.067

必须告诉 sed 它需要使用 -r 选项使用扩展的正则表达式，然后按如下方式执行 sed 命令。

```
sed -ir '/ServerAdmin/ s/\b[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+(\.[A-Za-z]{2,4})?\b/MY_ADMIN_ADDRESS@gmail.com/g' /home/test/httpd.conf 
```

非常感谢 [Kent](https://stackoverflow.com/users/164835/kent)指出它丢失的地址不是跟随`ServerName`

# java - android如何在适配器内调用startActivityForResult

> ID：14804374
> 
> 赞同：8
> 
> 时间：2013-02-11T00:38:39.833
> 
> 标签：java, android, android-activity, android-adapter, android-adapterview

我有一个适配器类：

```
public class AdapterAllAddress extends BaseExpandableListAdapter {
private Context context;
    public AdapterAllAddress(Context context,
            ArrayList<AllAddressesGroup> groups) {
        // TODO Auto-generated constructor stub
        this.context = context;
    }
} 
```

我想在`startActivityForResult`单击按钮时调用，我知道我可以`startActivity`这样调用：

```
context.startActivity() 
```

但我正在寻找有结果的活动，请问如何？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-11T00:39:31.487

```
yourButton.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
    // TODO Auto-generated method stub
        Intent intent = new Intent(context, YourNewActivity.class);
        ((Activity) context).startActivityForResult(intent, resultCode);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-20T11:00:27.333

我只是想指出我在我的案例中面临的一个细节 **E/ActivityThread(31584): Performing stop of activity that not resume: {com.example.test/activities.MainActivity}** 很可能你正在将 getApplicationContext() 传递给适配器的构造函数。为了避免这种情况，您必须将“ **CallingActivity.this ”作为****上下文**对象提供给适配器的构造函数，请记住这一点。

# c - 将参数从动态数组传递到链表会导致覆盖值

> ID：14804375
> 
> 赞同：0
> 
> 时间：2013-02-11T00:38:53.890
> 
> 标签：c, linked-list

我在将参数传递给链表时遇到问题。我等待用户输入然后我解析这个用户输入并将解析的令牌放入动态数组（char **cmd）

之后，我需要将某些用户输入写入链表（例如，我需要将 cmd[1] 传递给链表）并且此过程在 while 循环中重复，直到用户输入“退出”（因此将要求用户输入另一个输入然后我需要再次解析它等等）

但是在第一个循环之后（用户输入输入，我解析它然后发送 cmd[1] 和 cmd[2] 链接列表）我再次解析字符串，然后我再次发送 cmd[1] 和 cmd[2] 到链表。但是，我的链表将所有以前的值覆盖到新值，然后使用新值添加新节点，因此我的所有节点现在都具有相同的值。我一个月前刚开始学习c，所以我可能有指针问题或者它可能是链表，即使我用c ++编写了这个链表，现在我将它转换为那里可能会在我转换后出现一些错误。我还测试了我的链表，只传递了不是来自动态数组的常规参数，它似乎工作正常。

```
#include <stdio.h>
#include <string.h>
#include <stdbool.h> 
#include <stdlib.h>

//struct for environmental variables and thier values
struct ListNode
{
    //variable and value in the node
    char *var,*value;
    struct ListNode* next;//point to the next node
};
struct ListNode* head;//pointer to the head
// head = malloc(sizeof(struct ListNode));

void printList();
void appendNode(char *v, char *val);

int main(int argc, const char * argv[])
{
    char user_input[20]={0};

    int i=0;
    char c;

    int count=0;//keep count of words the user entered

    char ** cmd  = NULL;//create pointer and set it to NULL
    int size = 0;

    while (strcmp(user_input, "exit") != 0)//check if exit was typed into cmd line, if so then exit
    {

        //input three words separated with space
        scanf("%50[^\n]", user_input);//scan user input 

        size=0;
        count=0;
        const char delimiters[] = " !-";//create an array of delimiters to use to separate string

        char *ptr = strtok (user_input, delimiters);

        cmd = malloc(sizeof(char));//allocate memory for pointer cmd

        while (ptr)//split string into tokens to " !-"
        {
            cmd = realloc (cmd, sizeof(char*)*(++size));//reallocate more memory for an array

            if (cmd == NULL)
                exit (-1); // memory allocation failed

            cmd[size-1] = ptr;

            ptr = strtok (NULL, delimiters);

            count++;//count words in the input
        }

        cmd = realloc (cmd, sizeof(char*)*(size+1));// realloc one extra element for the last NULL
        cmd[size] = 0;

        for (i = 0; i < (size+1); ++i)
            printf ("cmd[%d] = %s\n", i, cmd[i]);

         //free(cmd);//free memory

        while((c = getchar()) != '\n' && c != EOF); //flush buffer

        if (count==3 )//set environmental variable

            {

                appendNode(cmd[1], cmd[2]);
            }
        printList();

    }
     free(cmd);
    return 0;
}

void appendNode(char *v, char *val)
{
    struct ListNode* newNode;//to point to new node
    struct ListNode* nodePtr = NULL;//to move through the list

    //allocate new node and store int there
    newNode = malloc (sizeof( struct ListNode));
    newNode->var=v;//put value of v into new variable
    newNode->value=val;//put value of val into new value
    newNode->next = NULL;
    //if there are no nodes in the list make new node th efirst node
    if(!head)
    {
        head = newNode;

    }
    else
    {
        //initialize nodePtr to head
        nodePtr = head;
        //find the last node in the list
        while (nodePtr->next)
        {
            nodePtr = nodePtr->next;
        }
        //insert new node as the last node
        nodePtr->next = newNode;
    }

}
void printList()
{
    struct ListNode* nodePtr = head; //position nodePtr at the head
    //while noePtr points to node, traverse the list
    while(nodePtr)
    {
        //display value
        printf("%s\n",nodePtr->var);
        //move to next node
        nodePtr = nodePtr->next;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:38:13.357

问题是由于发送本地指针 cmd 每次都会为主程序中的新字符串重新分配。

这可以通过修改 appendnode API 来解决

```
void appendNode(char *v, char *val)
{
    struct ListNode* newNode;//to point to new node
    struct ListNode* nodePtr = NULL;//to move through the list

    //allocate new node and store int there
    newNode = malloc (sizeof( struct ListNode));
    newNode->var = malloc(sizeof(v));
    newNode->value = malloc(sizeof(val));   
    strcpy(newNode->var, v);
    strcpy(newNode->value, val);    
    newNode->next = NULL;
    //if there are no nodes in the list make new node th efirst node
    if(!head)
    {
        head = newNode;

    }
    else
    {
        //initialize nodePtr to head
        nodePtr = head;
        //find the last node in the list
        while (nodePtr->next)
        {
            nodePtr = nodePtr->next;
        }
        //insert new node as the last node
        nodePtr->next = newNode;
    }

} 
```

# http - IPv6 HTTP 问题

> ID：14804377
> 
> 赞同：0
> 
> 时间：2013-02-11T00:39:03.810
> 
> 标签：http, routing, ipv6

我已经配置了一个家庭服务器，它处理我的 ADSL 连接，并被其他计算机用作路由器。它有一个运行良好的 IPv6 连接。

我希望其他计算机也可以通过 IPv6 访问互联网，但奇怪的是，某些 IPv6 网站无法使用（例如：mozilla.org、facebook.com ...）而其他一些工作得很好（例如：google .com，www.myipv6.org...）。问题似乎只出在 HTTP 上：我可以 ping 每个 IPv6 服务器。

PC 上的 IPv6 配置：

```
ip -6 address add 2001:41d0:xxxx:2240::20/64 dev eth2
ip -6 route add default via 2001:41d0:xxxx:2240:: dev eth2 
```

Ping 测试（一切正常）：

```
# ping6 -q -c 10 google.com
PING google.com(par03s02-in-x0e.1e100.net) 56 data bytes

--- google.com ping statistics ---
10 packets transmitted, 10 received, 0% packet loss, time 9011ms
rtt min/avg/max/mdev = 29.721/41.686/127.902/28.938 ms

# ping6 -q -c 10 mozilla.org
PING mozilla.org(2620:101:8008:5::2:1) 56 data bytes

--- mozilla.org ping statistics ---
10 packets transmitted, 10 received, 0% packet loss, time 9013ms
rtt min/avg/max/mdev = 194.732/198.983/230.808/10.616 ms 
```

IPv6 HTTP 访问 google.com -> 好的（也可以使用 firefox）：

```
# wget -6 google.com
--2013-02-02 14:25:51--  http://google.com/
Résolution de google.com (google.com)... 2a00:1450:4007:803::100e
Connexion vers google.com (google.com)|2a00:1450:4007:803::100e|:80... connecté.
< HTTP redirections >
2013-02-02 14:25:52 (1,40 MB/s) - «index.html.2» sauvegardé [10584] 
```

对 mozilla.org 的 IPv6 HTTP 访问 -> 不起作用（也适用于 firefox）：

```
# wget -6 mozilla.org
--2013-02-02 14:30:22--  http://mozilla.org/
Résolution de mozilla.org (mozilla.org)... 2620:101:8008:5::2:1
Connexion vers mozilla.org (mozilla.org)|2620:101:8008:5::2:1|:80... connecté.
requête HTTP transmise, en attente de la réponse... 301 Moved Permanently
Emplacement: http://www.mozilla.org/ [suivant]
--2013-02-02 14:30:22--  http://www.mozilla.org/
Résolution de www.mozilla.org (www.mozilla.org)... 2620:101:8008:5::2:1
Réutilisation de la connexion existante vers mozilla.org:80.
requête HTTP transmise, en attente de la réponse... 301 Moved Permanently
Emplacement: http://www.mozilla.org/en-US/ [suivant]
--2013-02-02 14:30:22--  http://www.mozilla.org/en-US/
Réutilisation de la connexion existante vers mozilla.org:80.
requête HTTP transmise, en attente de la réponse... 
< Won't go any further > 
```

.. 而 IPv4 可以工作：

```
wget -4 mozilla.org
< Ok > 
```

在我的路由器上，通过 IPv6 访问 mozilla.org 和 facebook.com 没有问题。

此外，我的计算机可以通过 IPv6 从外部完全访问：

```
< On an IPv6 server, out of my local network >
wget -6 http://[2001:41d0:xxxx:2240::20]
< Ok > 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T20:10:42.020

它真的闻起来像路径 MTU 发现 (PMTUd) 问题。ping 默认使用小数据包：它们总是小于 MTU，因此运行良好。HTTP 对请求使用小数据包（请注意 wget 可以连接并发送请求），但响应通常是 MTU 的大小。如果您通过隧道（IPv6 常见的东西）*并且*路径上的某些路由器愚蠢地阻止了 ICP Packet Too Big 消息，您就会得到所看到的。

要使用 ping 测试大数据包，请使用 -s 选项，例如`ping6 -q -c 10 -s 1490 mozilla.org`.

没有简单的解决方案，除了试图找出有问题的路由器（可能离您很远）并说服他们的管理员修复它们。

否则，会有一些本地黑客，例如减少 TCP 最大段大小 (MSS)，但它们在很大程度上取决于您的操作系统。

# php - 寻找下一任总统 - PHP 数组和验证

> ID：14804388
> 
> 赞同：0
> 
> 时间：2013-02-11T00:39:38.400
> 
> 标签：php, arrays

嗯所以我更新了我的代码。对于那些不知道的人，我正在尝试制作一个表格，让用户从下拉列表中回答下一任总统是谁。如果正确，就交给下一任总统；如果错了，他们必须继续猜测，但他们的尝试会增加。出于某种原因，我的表格无法识别下一任总统是谁。我不认为$questionpres（最初是“George Washington”）正在传递给handleform（$president）。

```
 <?php
    $president = array(
        "George Washington"=>"John Adams",
        "John Adams"=>"Thomas Jefferson",
        "Thomas Jefferson"=>"James Madison",
        "James Madison"=>"James Monroe",
        "James Monroe"=>"John Quincy Adams",
        "John Quincy Adams"=>"Andrew Jackson",
        "Andrew Jackson"=>"Martin Van Buren",
        "Martin Van Buren"=>"William Henry Harrison",
        "William Henry Harrison"=>"John Tyler",
        "John Tyler"=>"James K. Polk",
        "James K. Polk"=>"Zachary Taylor",
        "Zachary Taylor"=>"Millard Fillmore",
        "Millard Fillmore"=>"Franklin Pierce",
        "Franklin Pierce"=>"James Buchanan",
        "James Buchanan"=>"Abraham Lincoln",
        "Abraham Lincoln"=>"Andrew Johnson",
        "Andrew Johnson"=>"Ulysses S. Grant",
        "Ulysses S. Grant"=>"Rutherford B. Hayes",
        "Rutherford B. Hayes"=>"James Garfield",
        "James Garfield"=>"Chester A. Arthur",
        "Chester A. Arthur"=>"Grover Cleveland",
        "Grover Cleveland"=>"Benjamin Harrison",
        "Benjamin Harrison"=>"Grover Cleveland",
        "Grover Cleveland"=>"William McKinley",
        "William McKinley"=>"Theodore Roosevelt",
        "Theodore Roosevelt"=>"William Howard Taft",
        "William Howard Taft"=>"Woodrow Wilson",
        "Woodrow Wilson"=>"Warren G. Harding",
        "Warren G. Harding"=>"Calvin Coolidge",
        "Calvin Coolidge"=>"Herbert Hoover",
        "Herbert Hoover"=>"Franklin D. Roosevelt",
        "Franklin D. Roosevelt"=>"Harry S. Truman",
        "Harry S. Truman"=>"Dwight D. Eisenhower",
        "Dwight D. Eisenhower"=>"John F. Kennedy",
        "John F. Kennedy"=>"Lyndon B. Johnson",
        "Lyndon B. Johnson"=>"Richard M. Nixon",
        "Richard M. Nixon"=>"Gerald R. Ford",
        "Gerald R. Ford"=>"James Carter",
        "James Carter"=>"Ronald Reagan",
        "Ronald Reagan"=>"George H. W. Bush",
        "George H. W. Bush"=>"William J. Clinton",
        "William J. Clinton"=>"George W. Bush",
        "George W. Bush"=>"Barack Obama",
        "Barack Obama"=>"George Washington");
    ?>
    <!DOCTYPE html>
    <head>
      <title>President Flashcards</title>
      <style type="text/css">
        body{ font-family: Verdana, sans-serif; }
        fieldset {  
            height: 200px; 
            width: 290px;
            background-image: url(whitehouse.jpg); 
            background-repeat: no-repeat;
        }
        legend {
            background-color: gold; 
            width: 300px;
            font-size: 18px;
        }
        select {
            background-color: gold; 
            font-size: 18px;
            height: 40px;
        }
        input.mybutton {
            height:40px;
            float:right;
            font-size: 26px;
            background-color:gold;
            font-weight:bold;
            font-family:arial;
            position:relative;
            bottom:-50px;
          }
        .status {
            background-color: green;
            color: gold;
            position:relative;
            bottom:-100px;
        }   
    </style>
    </head>
    <body>
    <pre>
    <?php //print_r($_GET); ?>
    </pre>
    <?
        if (isset($_GET['answerpres'])) {
            handleForm($president);
        } else {
            $questionpres = "George Washington";
            $legend="Who comes after $questionpres?";
            displayForm($president, $legend, $questionpres, 0, 0);
        }
    ?>
    </body>
    </html>
    <?php
    /* handleForm - this function handles a submitted form.  It determines if the user
     * selected the correct president.
     * Argument - the array of president/next presidents
     * Called by - main
     * Calls - displayForm
     * If the correct president is selected, 
     *          increment total and correct, 
     *          create the legend with the "correct" message
     *          call displayForm
     * If the incorrect president is selected
     *          increment total only
     *          create the legend with the "incorrect" message
     *          call displayForm
     */
    function handleForm($president){
        echo "Next is $president[$questionpres]";
        if($_GET['answerpres'] == $president[$questionpres]) {
            $total++;
            $correct++;
            $questionpres = $president[$questionpres];
            $legend = "Correct! Who comes after $questionpres?";
            displayForm($president, $legend, $qpres, $correct, $total);
        } else {
            $total++;
            $legend = "Incorrect. Who comes after $questionpres?";
            echo "You selected".$_GET['answerpres'];

            displayForm($president, $legend, $questionpres, $correct, $total);
            }
    }?>
    <?php
    /*
     * displayForm - displays the input form
     * Called by - handleForm
     * Calls -  makepresidentmenu
     * Arguments - the array of president/next presidents
     *           - the legend for the form's fieldset
     *           - the president the user will be asked about
     *           - the number of correct answers the user has given
     *           - the total number of answers the user has given.
     */
    function displayForm($president, $legend, $questionpres, $correct, $total){
    ?>
    <fieldset style="background-img=url(whitehouse.jpg); width:640px; height:343px;">
    <legend><? echo $legend ?></legend>
    <form>
    <? makepresidentmenu($president, $menuname, $currentpres); ?>

    <input type = "submit" name = "formsubmitted" value = "Submit" /></form>

    <div style="color:yellow; background:green; margin-top:100px; text-align:center; border:3px solid white;"> 
        <? echo "You have $correct of $total correct."; ?> 
    </div> 

    </fieldset> 

    <? } ?>

    <?php
    /*
     * makepresidentmenu - make a selection menu with all the presidents.  
     * Called by - displayForm
     * Calls - ksort
     * Arguments - the array of president/next presidents
     *           - the menu name
     *           - the current selection, defaults to NONE
     * Note that the displayed name and the value are the keys of the array.
     */
     function makepresidentmenu($president, $menuname, $currentpres = "")
    {
        ksort($president);
        echo "<select name='answerpres'>";
        //$key is current president.  $value is next president
        foreach ($president as $key => $value){
            if ($currentpres == $key)
                echo "<option value=\"$key\" selected> $key </option>\n";
            else
                echo "<option value=\"$key\"> $key </option>\n";
        }
        echo "</select>\n";

    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T00:53:59.960

整个函数有点混乱..为什么是`total`,`current`和`qpres`本地定义的？如果您调用该函数两次，此值永远不会改变。您必须在会话中存储此类服务器端的信息。`president`函数的参数是否有特殊原因？对我来说没有多大意义。用字符串（不是索引）初始化 qpres 也有点奇怪。

```
$president = array(
    "George Washington",
    //...
);

function handleForm($president) {
    $qpres = $president[$_SESSION["qpres"]];
    echo "$qpres is the next president";
    if($_GET['answerpres'] == $_SESSION["qpres"]) {
        $_SESSION['total']++;
        $_SESSION["correct"]++;
        $qpres = $president[$qpres];
        $legend = "Correct! Who comes after $qpres?";
        displayForm($president, $legend, $_SESSION["qpres"], $_SESSION["correct"], $_SESSION['total']);
    } else {
        $_SESSION['total']++;
        $legend = "Incorrect. Who comes after $qpres?";
        displayForm($president, $legend, $_SESSION["qpres"], $_SESSION["correct"], $_SESSION['total']);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T00:54:49.070

我相信您遇到的问题是因为您对“George Washington”进行了硬编码。如果尚未设置，您可能只想设置 $qpres = "George Washington"。也许做到：

```
if (empty($qpres)){
    $qpres = "George Washington";
} 
```

# heroku - Actionview::Template:: 推送到 heroku 时出现条纹错误

> ID：14804389
> 
> 赞同：1
> 
> 时间：2013-02-11T00:39:50.813
> 
> 标签：heroku, actionview, stripe-payments

伙计们，

我正在尝试使用 Stripe 在 Heroku 上部署 rails webapp。这可能是预编译资产问题。我检查了heroku错误日志，有一个actionview模板错误“未定义的方法条纹”

在我的本地机器上一切正常，只是推送到heroku时出了点问题。

```
2013-02-11T00:22:53+00:00 app[web.1]: ActionView::Template::Error (undefined method `stripe' for #<Rails::Application::Configuration:0x00000003397440>):
    2013-02-11T00:22:53+00:00 app[web.1]:     7: 
    2013-02-11T00:22:53+00:00 app[web.1]:     6:   </article>
    2013-02-11T00:22:53+00:00 app[web.1]:     9:           data-key="<%= Rails.configuration.stripe[:publishable_key] %>"
    2013-02-11T00:22:53+00:00 app[web.1]:     8:   <script src="https://checkout.stripe.com/v2/checkout.js" class="stripe-button"
    2013-02-11T00:22:53+00:00 app[web.1]:     10:           data-description="You'll get your information in 2 days!" 
```

希望有人对这个问题有所了解。我尝试只下载完整的 stripe.js 文件并将其放在我的资产文件夹中，但这似乎没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T04:44:41.567

这似乎与资产编译或`stripe.js`. 这是您认为失败的行：

```
data-key="<%= Rails.configuration.stripe[:publishable_key] %>" 
```

Heroku 使用您的生产环境设置运行您的应用程序。您是否可能只`Rails.configuration.stripe`设置了`development.rb`或类似的地方？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-13T20:30:41.907

我有同样的问题，但这是因为当我第一次开始在开发中测试 Stripe 时，我的`stripe.rb`文件中有实际的密钥，所以我将它添加到我的文件中`.gitignore`以防止对这些密钥进行版本控制。当更新我的代码以在生产中运行时，我使用了 ENV vars，但忘记`stripe.rb`从`.gitignore`. 仔细检查以确保您重新配置变量，停止忽略该文件，并且您应该进行设置。

# javascript - 在Javascript中的有向无环图中遍历两个节点之间的路径

> ID：14804390
> 
> 赞同：0
> 
> 时间：2013-02-11T00:39:57.100
> 
> 标签：javascript, directed-acyclic-graphs

我无法在我的 DAG 中找到两个节点之间的所有路径。我确信这已经被覆盖过，但是我在代码和算法方面遇到了问题。

我有一个 DAG，其数据结构为：

```
{
    "graph": [
        {
            "source": "node-6",
            "target": "node-endpointsuccess",
            "type": "success"
        },
        {
            "source": "node-7",
            "target": "node-endpointsuccess",
            "type": "success"
        },
        {
            "source": "node-7",
            "target": "node-endpointfailure",
            "type": "failure"
        },
        {
            "source": "node-6",
            "target": "node-7",
            "type": "failure"
        },
        {
            "source": "node-2",
            "target": "node-6",
            "type": "success"            },
        {
            "source": "node-7",
            "target": "node-endpointsuccess",
            "type": "success"
        },
        {
            "source": "node-7",
            "target": "node-endpointfailure",
            "type": "failure"
        },
        {
            "source": "node-5",
            "target": "node-7",
            "type": "success"
        },
        {
            "source": "node-4",
            "target": "node-endpointsuccess",
            "type": "success"
        },
        {
            "source": "node-4",
            "target": "node-endpointfailure",
            "type": "failure"
        },
        {
            "source": "node-5",
            "target": "node-4",
            "type": "failure"
        },
        {
            "source": "node-2",
            "target": "node-5",
            "type": "failure"
        },
        {
            "source": "node-root",
            "target": "node-2",
            "type": "success"
        },
        {
            "source": "node-4",
            "target": "node-endpointsuccess",
            "type": "success"
        },
        {
            "source": "node-4",
            "target": "node-endpointfailure",
            "type": "failure"
        },
        {
            "source": "node-1",
            "target": "node-4",
            "type": "success"
        },
        {
            "source": "node-3",
            "target": "node-endpointfailure",
            "type": "failure"
        },
        {
            "source": "node-1",
            "target": "node-3",
            "type": "failure"
        },
        {
            "source": "node-root",
            "target": "node-1",
            "type": "failure"
        },
        {
            "source": "node-3",
            "target": "node-8",
            "type": "success"
        },
        {
            "source": "node-8",
            "target": "node-endpointfailure",
            "type": "failure"
        },
        {
            "source": "node-8",
            "target": "node-endpointsuccess",
            "type": "success"
        },
        {
            "source": "node-endpointsuccess"
        },
        {
            "source": "node-endpointfailure"
        }
    ]
} 
```

该`position`对象用于保存节点在页面上的位置（此问题不需要），并且`type`是边缘的类型（`success`或`failure`）。

我需要从这些信息中得出的是“开始”（在数据中表示为`'source': 'node-root'`）和失败（`node-endpointfailure`）之间的所有路径。我希望通过 和 之间的边缘类型返回多维`node-root`路径`node-endpointfailure`。像这样的输出将是：

```
[
    ['failure', 'failure', 'failure'],
    ['failure', 'failure', 'success', 'failure'],
    ['failure', 'success', 'failure'],
    ['success', 'success', 'failure', 'failure'],
    ...etc
] 
```

我已经尝试了一些 DFS 算法，但是一旦我找到了我的端点，我就会陷入将路径拉出函数的困境。这是我到目前为止所得到的：

```
function getPaths(from, to, nodes, visited) {
    results = [];

    // for all nodes 
    for (var n in nodes) {
        // get the nodes that are connected to this one
        if (nodes[n].source == from) {
            // check if we have found an endpoint
            if (nodes[n].target == to) {
                // found an endpoint, return the edge type
                console.info('paydirt');
                results.push(nodes[n].type);
                return results;
            }

            // follow that path
            results = getPaths(nodes[n].source, to, nodes, visited);

            // add to visited list
            for (var r in results)
                visited.push(results[r].type);
        }
    }

    return visited;
}
getPaths('node-root', 'node-endpointfailure', data, []); 
```

我试过在这里使用算法。看起来不错，但我不确定我错过了什么：[https ://stackoverflow.com/a/13852674/881011](https://stackoverflow.com/a/13852674/881011)

# algorithm - n 算法的基 b 扩展

> ID：14804392
> 
> 赞同：2
> 
> 时间：2013-02-11T00:40:01.963
> 
> 标签：algorithm, math, discrete-mathematics

我正在阅读关于n算法的base b扩展，这本书真的很难阅读和理解，我不确定底部是什么意思......

![在此处输入图像描述](../Images/861d255a20ea909401b5d019a1c298ee.png)

它返回 n 还是什么？你会怎么做...谢谢

```
some method (n,b)
if b == 0
    return 1
q = n
k = 0
while q does not == 0
    a[k] = q % b
    q = q / b
    k = k + 1
    return ??? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:24:49.450

我用 C 语言为这个函数编写了一个实现。它使用指针作为输入参数，输出（整数向量）将被放置在其中。该函数还返回一个整数——向量的逻辑大小。

```
#include <assert.h>

int toBase(int n, int b, int* answer) {
    assert(b > 1);
    q = n
    k = 0
    while (q != 0) {
        answer[k] = q % b;
        q /= b;
        ++k;
    }
    return k;
}

int main() {
    int answer[32];
    int n = 100000;
    int b = 2;
    int answerSize = toBase(n, b, answer);

    // use answer and answerSize

    return 0;
} 
```

另一种方法（没有指针参数）是在函数内部为向量分配内存并返回它，要求调用函数在完成处理后释放使用的内存。

在这种情况下，您无法判断向量的逻辑大小，因此您必须将 answer[k] 设置为一个特殊值（此处为 -1），以了解向量的结束位置。

```
#include <assert.h>

int* toBase(int n, int b) {
    assert(b > 1);
    int* answer = malloc(33 * sizeof(int));
    q = n
    k = 0
    while (q != 0) {
        answer[k] = q % b;
        q /= b;
        ++k;
    }
    answer[k] = -1;
    return answer;
}

int main() {
    int n = 100000;
    int b = 2;
    int *answer = toBase(n, b);

    // use answer

    free(answer);
    return 0;
} 
```

一个更优雅的解决方案（在 C++ 中）是使用 STL 向量类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T00:43:23.370

这个算法背后的想法是它创建一个值列表 a [k]， a [k-1]， a [k-2]，...， a [0]。最后，它希望返回该值列表，并以类似于数字的 base-b 表示的形式返回。

例如，如果你在这个算法中输入 33 并要求它的 base-16 表示，算法将设置[1] = 2 和[0] = 1。算法的返回值是表示 21，即[1] ( 2) 后跟一个[0] (1)。

他们使用的符号只是花哨的数学语言，用于“返回此算法产生的值列表”。您可以将其视为返回数字的以 b 为基数的数组。

希望这可以帮助！

# php - Codeigniter 中的“暂存”站点和相对 HTML 路径

> ID：14804393
> 
> 赞同：0
> 
> 时间：2013-02-11T00:40:07.807
> 
> 标签：php, html, codeigniter, relative-path

我正在与“生产”应用程序在同一域上开发一个 Web 应用程序——它只是顶级网站的一个子目录。就像是：`www.site.com/v3/...`

我见过几个人试图使用 CodeIgniter 获得相对路径——过去我只是停留`base_url()`在“v3”站点的每个 HTML 图像声明中，但我最近购买了一个 HTML 站点模板并嵌入`<?php base_url() ?>`了数百个 HTML 标签似乎效率很低。

希望有人能提供帮助——我希望能够将开发代码（又名“/v3/”）直接转换为使用，而无需搜索和替换所有这些 HTML 引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T00:55:56.713

这正是`$config['base_url']`in的目的`application/config/config.php`。如果您将其设置为`http://site.com/v3/`，它将在您使用的任何地方反映在您的网站上`base_url()`或`site_url()`

但是，我应该注意，在您的整个网站上使用`base_url()`或为每个,等是不好的做法。您正在疯狂地调用 PHP 解释器。`site_url()``src``href`

一个更好的解决方案是使用`<base>`标记告诉您的 HTML 文档关于您的基础：`<base href="<?= site_url();?>">`在`<head>`.

你有它。您使用`site_url()`一次，从现在开始您可以使用：

`<a href='controller/action'>My Link</a>`和`<img src='my_image.png'/>`

一般来说，作为一个总体原则，当你发现自己在重复自己时……找到一种方法来消除这种重复。保持干燥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T17:20:02.690

谢谢大家的帮助，伙计们。

在阅读了标签的潜在问题之后，我重新考虑了我的方法——我创建了我的主站点的子域（类似于 dev.mysite.com）。这样我就可以像在生产版本上一样处理代码，只需在 CI 的 config.php 中更改基本 URL。

目前这似乎是最简单的解决方案，因为为每个需要相对路径的 HTML 标签调用 php 预处理器既费力又低效，并且使用标签会导致结果不一致。

# ios - 通知启动自定义方法/类

> ID：14804403
> 
> 赞同：1
> 
> 时间：2013-02-11T00:41:44.243
> 
> 标签：ios, uilocalnotification, localnotification

只是想确保我走在正确的道路上。

我正在创建一个本地通知作为闹钟。当用户点击按钮时......我希望它做事。

我想我必须调用我的方法

*   (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions ..当应用程序关闭时

*   (void)applicationWillEnterForeground:(UIApplication *)application ...当应用程序在后台时...当用户点击ok

有没有更好的方法来做我想要完成的事情......当用户点击通知时做事？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:58:53.827

根据本地和推送通知的文档，您应该`application:didFinishLaunchingWithOptions:`在这两种情况下调用：

> 处理本地和远程通知
> 
> 让我们回顾一下操作为应用程序传递本地通知或远程通知时的可能场景。
> 
> 当应用程序未在前台运行时会发送通知。在这种情况下，系统会显示通知、显示警报、标记图标，可能还会播放声音。作为呈现通知的结果，用户点击警报的操作按钮或点击（或点击）应用程序图标。
> 
> 如果点击操作按钮（在运行 iOS 的设备上），系统会启动应用程序并且应用程序调用其委托的 application:didFinishLaunchingWithOptions: 方法（如果已实现）；它传入通知负载（用于远程通知）或本地通知对象（用于本地通知）。如果在运行 iOS 的设备上点击应用程序图标，应用程序会调用相同的方法，但不会提供有关通知的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T01:00:33.250

他们不能被迫打电话。只有监控。

> **UIApplicationDelegate 协议**
> 
> 这些方法为您提供有关应用程序执行中的关键事件的信息，例如应用程序何时完成启动、何时终止、内存不足以及发生重要更改的时间。实施这些方法使您有机会响应这些系统事件并做出适当的响应。

如果你想你是 ViewController 获取通知那里的方法。试试这个

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationDidFinishLaunching:) UIApplicationDidFinishLaunchingNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationEnterForeground:) name:UIApplicationWillEnterForegroundNotification object:nil];

- (void)applicationDidFinishLaunching:(NSNotification *)noti
{
    //do stuff
}

- (void)applicationEnterForeground:(NSNotification *)noti
{
    //do sutff
} 
```

# javascript - jQuery HTML点击事件触发两次

> ID：14804404
> 
> 赞同：3
> 
> 时间：2013-02-11T00:41:49.213
> 
> 标签：javascript, jquery, html, jquery-ui

我有一个自定义选择菜单按钮，并且我已经绑定到 html 点击事件来**关闭**它。但是该事件触发了两次。

[http://jsfiddle.net/GnzBj/1/](http://jsfiddle.net/GnzBj/1/)

```
$(function () {
    $('html').click(function () {
        console.log('html');
    });
}); 
```

任何人都知道为什么/如何防止它触发两次？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T01:19:33.617

事件触发两次的原因是因为您将整个 UI 放在一个`label`.

```
<div  ...>
    <label for="xmod-form-51183d51afa3d" ... >
        <select name="theme" id="xmod-form-51183d51afa3d" ...>
            ...
        </select>
        ...
    </label>
</div> 
```

点击标签也会触发与其相关的表单元素的点击事件。

如果您删除该`label`元素，它会按预期工作：http: [//jsfiddle.net/GnzBj/5/](http://jsfiddle.net/GnzBj/5/)。

如果你需要`label`，让它包含尽可能少的 UI，但是点击它仍然会触发两个事件。

# javascript - 首次使用的 Javascript 说明

> ID：14804405
> 
> 赞同：1
> 
> 时间：2013-02-11T00:42:19.900
> 
> 标签：javascript, image, popup, window, instructions

我制作了一个有 2 个输入字段、一个下一步按钮和一个提交按钮的游戏。该游戏面向年轻观众（6-8 岁），我认为直观地解释如何使用游戏中的所有不同功能会很有帮助。是否有一种简单的方法可以在窗口打开时立即弹出图像，但仅适用于初次使用的用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:57:41.613

我找到了一种有趣的方法来做与我想要的类似的事情。您必须单击一个链接，但它可能只是说“说明”。

[http://designm.ag/previews/jquery-dialog-box/](http://designm.ag/previews/jquery-dialog-box/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T02:10:06.547

这是 cookie 的一个很好的用例。您网站的逻辑是这样的：

*   当您的页面加载时，检查您的 cookie 是否存在
*   如果 cookie 存在，请不要显示说明
*   如果 cookie 不存在，请显示说明并创建 cookie

以下是可以适应您的页面的示例：http: [//www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

使用以下函数创建和读取 cookie：

```
function setCookie(c_name,value,exdays)
{
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
document.cookie=c_name + "=" + c_value;
}

function getCookie(c_name)
{
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
{
  x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
  y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
  x=x.replace(/^\s+|\s+$/g,"");
  if (x==c_name)
    {
    return unescape(y);
    }
  }
} 
```

在你的 body 标签中包含一个 onload 函数：

```
<body onload="checkCookie()"> 
```

使用此功能检查 cookie 是否存在并选择是否显示说明：

```
function checkCookie()
{
var return_visitor=getCookie("return_visitor");
if (return_visitor!=null && return_visitor!="")
  {
  // Don't show the instructions
  }
else 
  {
    alert("Instructions: This is how you play!");
    setCookie("return_visitor",1,365);
  }
} 
```

# c++ - 将变量类型转换为类型*的函数创建错误 C++

> ID：14804408
> 
> 赞同：-2
> 
> 时间：2013-02-11T00:43:33.310
> 
> 标签：c++, list, class, pointers

我不断收到以下错误：

```
In file included from user.h:3:0,
                from sn.cpp:5:
'mylist.h: In member function ‘void MyList<L>::push_back(L) [with L = int]’:
user.h:38:30:   instantiated from here
mylist.h:54:3: error: invalid conversion from ‘int’ to ‘int*’ [-fpermissive]
mylist.h: In member function ‘void MyList<L>::push_back(L) [with L = User*]’:
sn.cpp:61:25:   instantiated from here
mylist.h:54:3: error: cannot convert ‘User*’ to ‘User**’ in assignment
make: *** [sn.o] Error 1 
```

我正在创建一个基本的社交网络，其中 main 接受 3 个命令行参数 - argv[1] 是一个 GML 文件，其节点包含用户信息和作为​​用户连接的边。argv[2] 是另一个我尚未处理的文件。并且 argv[3] 是一个 GML 文件，在解析并放入我编写的 ADT 列表 MyList 后，它将基本上包含用户信息的副本，其中包含 User* 的实例，这些实例保存了用户 ID、姓名、邮政编码和年龄。出于某种原因，我将另一个项目添加到我的列表中的回推函数要么使指针成为双指针，要么使非指针指针成为上述错误。我只是不知道我需要在哪里删除 * 或我做错了什么。GML 阅读器函数使用节点[0] = id 0 name 等信息填充两个向量节点和边

尚未包含编写新 GML 文件的代码

sn 文件

```
#include <iostream>
#include <string>
#include <sstream>
#include <vector>
#include "user.h"
#include "mylist.h"
#include "gmlreader.h"

using namespace std;

int main(int argc, char* argv[]){
  if(argc < 4){
    cerr << "Please provide the input GML file, command file, and output file" << endl;
    return 1;
  }
vector<string>nodes;
vector<string>edges;
GMLReader::read(argv[1], nodes, edges); 
for(unsigned int i =0; i<nodes.size(); i++){
    cout << "node[" << i << "]: " << nodes[i] << endl;
};
for(unsigned int i=0; i<edges.size(); i++){
    cout << "edge[" << i << "]: " << edges[i] << endl;
    cout << "printing an edge!" << endl;
};
cout << "about to create a mylist of users" << endl;
MyList<User*>Users;
cout << "initialized user list" << endl;
for(unsigned int i =0; i<nodes.size(); i++){
    string TextBlob = nodes[i];
stringstream ss(TextBlob);
cout << "started string stream" << endl;
User* newuser = new User; 
    while(newuser->getName()=="" || newuser->getId()==0 || newuser->getZip()==0||        newuser->getAge()==0){  
    if (TextBlob.compare("name")==0){
        string n;
        ss>>n;
        newuser->setName(n);
    }
    else if(TextBlob.compare("age")==0){
        int a;
        ss>>a;
        newuser->setAge(a);
    }
    else if(TextBlob.compare("id")==0){
        int d;
        ss>>d;
        newuser->setId(d);
    }
    else if(TextBlob.compare("zip")==0){
        int z;
        ss>>z;
        newuser->setZip(z);
    }
}
Users.push_back(newuser);
}
return 0;
}; 
```

我的列表.h

```
#include <iostream>
 #include <string>
 #include <vector>
 #include <stdexcept>

 #ifndef MYLIST_H
 #define MYLIST_H

 using namespace std;

 template<typename L>
 class MyList{
private:
    L* data_;
    int len_;
    int MAX_LIST_SIZE;
public:
    MyList();
    ~MyList();
    void push_back(L newVal);
    int size();
    L& at(int loc); 
    bool remove(L val);
    L pop(int loc);
    L& operator[](int loc);
    void changeLen(int new_len){
        len_=new_len;
    }
 };

 int MAX_LIST_SIZE=100;

 template<typename L>
 MyList<L>::MyList(){
        data_ = new L[MAX_LIST_SIZE];
        len_=0;
    };

 template<typename L>
 MyList<L>::~MyList(){
        delete [] data_;
    };

 template<typename L>
 void MyList<L>::push_back(L newVal){
if(len_==MAX_LIST_SIZE-1){
    L* tempList = new L[MAX_LIST_SIZE*2];
    for(int i=0; i<len_; i++){
        tempList[i]=data_[i];
        MAX_LIST_SIZE*=2;
        }
    tempList[len_++]=newVal;
    data_=newVal;
}
data_[len_++]=newVal;
    };

 template<typename L>
 int MyList<L>::size(){
        return len_;
    };

 template<typename L>
 L& MyList<L>::at(int loc){
    if(loc > len_)
        throw invalid_argument("Out of bounds");
return  data_[loc];
};      

 template<typename L>
 bool MyList<L>::remove(L val){
for(int i=0; i<len_; i++){
    if(data_[i]==val){
        for(int j=i; j<len_-1; j++){
            data_[j]=data_[j+1];
        }
        changeLen(len_-1);
        return true;
    };
};
return false;
 };

 template<typename L>
 L MyList<L>::pop(int loc){
if(loc>len_)
    throw invalid_argument("Out of bounds");
L temp;
data_[loc] = temp;
    for(int i=len_; i>=loc; i--){
        data_[i-1]=data_[i];
};
changeLen(len_-1);
return temp;
 };

 template<typename L>
 L& MyList<L>::operator[](int loc){
return  data_[loc];
};

 #endif 
```

用户.h

```
#ifndef USER_H
#define USER_H
#include "mylist.h"

class User{
public: 
    User(){
        name_=""; age_ =0; zip_=0; id_=0;};
    ~User();
    void setName(string name){
        name_=name;
    };
    string getName(){
        return name_;
    };
    void setAge(int age){
        age_=age;
    };
    int getAge(){
        return age_;
    };
    void setId(int id){
        id_=id;
    };
    int getId(){
        return id_;
    };
    void setZip(int zip){
        zip_=zip;
    };
    int getZip(){
        return zip_;
    };
    MyList<int> getFriends(){
        return Friends;
    };
    void addFriend(int friendid){
        Friends.push_back(friendid);
    };
    void printUser(){
        cout<< "User Name: " << name_ << endl;
        cout<< "User Age: " << age_ << endl;
        cout<< "User's Friends: ";
            for(int j=0; j<Friends.size(); j++){
                cout <<Friends.at(j) << " ";
        };
        cout << endl;
    };
private:
    string name_;
    int age_;
    int id_;
    int zip_;
    MyList<int> Friends;
};

#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T00:57:55.667

问题出在`push_back`，特别是这一行：

```
data_=newVal; 
```

`newVal`是一个`L`，但是`data_`是一个`L*`。我想你的*意思*是`data_ = tempList`。

不过，不要忘记删除 的旧值`data_`。

# javascript - HTML 和 Javascript 按钮使文本区域中的文本变为粗体和非粗体，可能使用 JQuery？

> ID：14804409
> 
> 赞同：0
> 
> 时间：2013-02-11T00:43:44.287
> 
> 标签：javascript, jquery, html, formatting, textarea

我目前有一个按钮，可以将它使用的 textarea 中的文本设为粗体

```
<a href="#" class="stylingButtons" type="button" onclick="boldTextArea()" value="Bold Text"}>
 <img alt='Bold Button' src='BButton.gif' border='4' width="90px" >
</a> 
```

对于 HTML 部分和

```
function boldTextArea(){
document.getElementById("TextArea").style.fontWeight="bolder";;
} 
```

对于 javascript

无论如何我可以编辑此编码，以便一旦文本区域中的文本已经是粗体，我可以再次单击以使其变为非粗体？我真的不热衷于使用 jQuery 的想法，因为我从未有过任何使用它的经验，但我愿意接受这种格式的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:55:39.420

如果你不想使用 jquery，这里有一个 quick'n'dirty javascript

```
function boldText(){
    var target = document.getElementById("TextArea");
    if( target.style.fontWeight == "bolder" ) {
        target.style.fontWeight = "normal";
    } else {
        target.style.fontWeight = "bolder";
    }
} 
```

应该可以正常工作。我猜这是从粗体切换到正常并返回的基本方式。

还要注意双“；” 在你的 JS 中。

希望这可以帮助。

优雅

* * *

**更新**

这是每次单击时更改（切换）文本大小（或任何其他 css 属性）的 jQuery 版本。

```
$("#textboxid").click( function(e) {
    if( $(this).css("font-size") == "12px" ) {
        $(this).css("font-size", "14px")
    } else {
        $(this).css("font-size", "12px")
    }
}); 
```

如果要更改任何其他属性，请将 css 属性替换为您喜欢的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T00:47:35.707

我刚刚在我的网站上做了这个，并在这里找到了答案：

[按下按钮“加粗”并再次按下“取消加粗”](https://stackoverflow.com/questions/9528466/press-button-to-bold-press-again-to-unbold%5C)

希望这可以帮助。

# python - 如何实现一个马尔可夫链，当它消耗太多内存时清除旧数据？

> ID：14804414
> 
> 赞同：2
> 
> 时间：2013-02-11T00:44:50.373
> 
> 标签：python, memory-management

不久前，我用 Python 为 IRC编写了一个[马尔可夫链文本生成器。](http://en.wikipedia.org/wiki/Markov_chain)它会在运行一两个月后消耗我所有的 VPS 可用内存，我需要清除它的数据并重新开始。现在我正在重写它，我想尽可能优雅地解决内存问题。

我必须保持精简的数据通常是一个将字符串映射到字符串列表的字典。更具体地说，消息中的每个单词都映射到所有可能的后续单词。这仍然过于简单化，但足以将我的问题置于上下文中。

目前，我正在努力解决的解决方案涉及管理数据“桶”。它将跟踪每个存储桶的外观大小，一旦达到一定大小就“归档”一个存储桶并转移到一个新的存储桶，在大约 5 个存储桶之后，它会在每次新存储桶时删除最旧的“归档”存储桶创建的。这具有简单的优点：删除整个存储桶不会产生任何死胡同或无法到达的单词，因为来自每条消息的单词都进入同一个存储桶。

问题是“跟踪每个桶的表观大小”说起来容易做起来难。

我第一次尝试使用`sys.getsizeof`，但很快发现确定对象在内存中的*实际大小是不切实际的。*我还研究了 guppy / heapy / 各种其他内存使用模块，但它们似乎都没有做我正在寻找的东西（即对单个对象进行基准测试）。目前我正在尝试使用较低级别的[psutil](http://code.google.com/p/psutil/)模块。以下是应用程序当前状态的摘录：

```
class Markov(object):
    # (constants declared here)
    def __init__(self):
        self.proc = psutil.Process(os.getpid())
        self.buckets = []
        self._newbucket()

    def _newbucket(self):
        self.buckets.append(copy.deepcopy(self.EMPTY_BUCKET))

    def _checkmemory(f):
        def checkmemory(self):
            # Check memory usage of the process and the entire system
            if (self.proc.get_memory_percent() > self.MAX_MEMORY
                    or psutil.virtual_memory().percent > self.MAX_TOTAL_MEMORY):
                self.buckets.pop(0)
            # If we just removed the last bucket, add a new one
            if not self.buckets:
                self._newbucket()
            return f()
        return checkmemory

    @_checkmemory
    def process(self, msg):
        # generally, this adds the words in msg to self.buckets[-1]

    @_checkmemory
    def generate(self, keywords):
        # generally, this uses the words in all the buckets to create a sentence 
```

这里的问题是这只会使桶过期；我不知道何时“归档”当前存储桶，因为 Python 的开销内存使我无法准确确定距离`self.MAX_MEMORY`. 更不用说`Markov`该类实际上是由无头 IRC 客户端管理的许多“插件”之一（为简洁起见，我省略了另一个细节），因此开销不仅存在，而且不可预测。

简而言之：**有没有办法准确地对单个 Python 对象进行基准测试？**或者，如果您能想出比我的基于存储桶的解决方案更好的方法来“过期”旧数据，那么我会全力以赴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:42:22.407

这可能是一个 hacky 解决方案，但如果您的存储桶对象是可腌制的（听起来像是），您可以腌制它们并测量腌制对象字符串的字节长度。它可能不完全是内存中解压缩对象的大小，但它应该随着对象的增长而线性增长，并让您对对象之间的相对大小有一个相当好的了解。

为了避免不得不腌制非常大的对象，您可以通过单独腌制来测量添加到存储桶中的每个条目的大小，并将其字节长度添加到存储桶的总字节长度属性中。但是请记住，如果您这样做，条目和存储桶的内部绑定中将使用一些开销内存，这些内存不会反映在条目本身的独立大小上，但是您可以运行一些测试来分析这并找出超出其实际大小的每个新条目的 %memory 开销。

# ruby-on-rails - after_validation 和 before_save 之间会发生什么？

> ID：14804415
> 
> 赞同：14
> 
> 时间：2013-02-11T00:45:10.153
> 
> 标签：ruby-on-rails

`after_validation`回调之前`before_save`触发。如果有的话，这些回调之间会发生什么？为什么要选择一个而不是另一个？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-12T16:27:57.263

有一个`after_validation_on_update`或`after_validation_on_create`取决于该项目是否是一个新记录。

`before_save`并且正如 Max 所说，如果对象无效，则链在到达回调之前被中断，因此，如果您需要发生某些事情而不管对象的有效性`before_save`是不是它的地方。

供参考： [http ://apidock.com/rails/ActiveRecord/Callbacks/after_validation_on_create](http://apidock.com/rails/ActiveRecord/Callbacks/after_validation_on_create)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-07-01T01:00:22.633

`after_validation_on_create`并`after_validation_on_update`从 Rails 3.0 中删除。

新语法形式：

```
after_validation
after_validation, on: :update  # or :update
after_validation, on: [ :create, :update ] 
```

现在他们之间没有执行任何操作。

在答案中添加出色的评论：

“`after_validation`如果你打电话就会被调用，`#valid?`所以在某些情况下你可能只想检查记录的有效性，但在验证后仍然运行一些东西。根据我的经验，我从来没有机会使用`after_validation`.” @jvnill

“除了 jvnill 所说的，如果对象无效，则不会保存对象。因此，对无效对象调用 save 不会触发`before_save`回调，而会触发`after_validation`。” @最大限度

# c++ - 对齐、STL 向量和子弹物理对齐分配器

> ID：14804421
> 
> 赞同：0
> 
> 时间：2013-02-11T00:45:51.823
> 
> 标签：c++, performance, vector, stl, alignment

当我使用它时，我想可以肯定地说这些对象是对齐的：

```
std::vector<object_type> vect; 
```

我在子弹物理中发现了一个分配器，但我不知道它们是如何工作的。这也提出了关于 std::vector 的问题。

在这里的演示中，第 42 行，[http://code.google.com/p/bullet/source/browse/trunk/Demos/BasicDemo/BasicDemo.h#42](http://code.google.com/p/bullet/source/browse/trunk/Demos/BasicDemo/BasicDemo.h#42)

```
btAlignedObjectArray<btCollisionShape*> m_collisionShapes; 
```

类型是一个指针，然后这些指针被分配一个`new`. 它真的能保证对齐吗？如果分配器是用来处理指针的，我想是的，但我没有任何分配器知识，最重要的是我不知道什么是过时的。

怎么样`std::vector`？如果我声明

```
std::vector<object_type*> vect; 
```

稍后分配，编译器还会对齐我的对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:49:20.947

*指针*将在这个指针向量中连续*对齐*。对于这些指针指向的对象，无话可说。它们可以放置在任何地方。

一个显着的例子是

```
object_type on_stack;
vect[0] = new object_type;
vect[1] = & on_stack;
vect[2] = new object_type; 
```

其中向量的第一个和第三个元素被分配了指向`new`在堆上实例化的对象的指针，而第二个元素被分配了堆栈上另一个实例的地址。

如果你想“对齐”堆上的*N*个对象，还有`new object_type[N];`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-11T00:47:28.373

你的意思是，元素会被连续*打包吗？*

是的，他们保证是。

# ios - 如何保持顶部视图呈现应用程序的宽度？跨越不同的导航控制器？

> ID：14804425
> 
> 赞同：3
> 
> 时间：2013-02-11T00:46:06.833
> 
> 标签：ios, ios6

我正在开发一个应用程序，我正在使用 facebook 应用程序中的侧面移动菜单： ![应用程序骨架的屏幕截图](../Images/bc2912408d616df9a1502209d10c8267.png)

我想在整个应用程序中保持该栏处于顶部，并让 UINavigationControllers 为 Item1 ... ItemN 的应用程序的不同部分交换进出它。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:51:33.073

只需将其添加到 AppDelegate 中的窗口：

```
[[[UIApplication sharedApplication] delegate].window addSubview:yourView]; 
```

坦率地说，您应该投射来自 sharedApplication 的委托

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:27:50.753

我通过使用自定义容器视图控制器解决了这个问题。My`rootViewController`只是一个容器视图控制器，它包含我的菜单和普通视图控制器。这使我可以对菜单做任何我想做的事情，但只需将菜单滑出屏幕并让子视图控制器像它控制一切一样工作。

“实现容器视图控制器”是[`UIViewController`类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)中的一个部分，包含一些关于如何完成任务的好信息。WWDC 上也有不少来自 Apple 的优秀视频，它们是在……2011 年推出的？

**编辑：**添加了关于自定义视图控制器的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T19:13:26.867

我在“中央”视图上使用子视图控制器解决了这个问题。我只是将最持久的菜单设置为位于子视图控制器视图之上的子视图。

# html - 有没有像 W3C 那样严格的 CSS 验证器来验证 normalize.css 之类的东西？

> ID：14804430
> 
> 赞同：2
> 
> 时间：2013-02-11T00:46:33.103
> 
> 标签：html, css, validation, html5boilerplate

我正在使用 H5BP，我正在寻找一种调试 CSS 的方法，但是，W3C 的 CSS Validator 返回 H5BP 的 normalize.css 和 main.css 的错误。

有什么我可以用来检查语法错误来验证 normalize.css 和 main.css 的吗？

另外，没有在 normalize.css 和 main.css 上使用以下代码行的原因是什么：

```
@charset "UTF-8"; 
```

谢谢您的帮助！

更新：

最后，我的问题归结为咬紧牙关，要么将我的 CSS 代码与样板代码分开，要么删除我可能不需要的东西。这个问题帮助我到达那里：

[HTML5 样板，HTML5 重置 CSS 验证](https://stackoverflow.com/questions/6624808/html5-boilerplate-html5-reset-css-validation?rq=1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:05:12.837

我过去使用过的一个好工具是[CSS Lint](http://www.csslint.net "CSS 皮棉")。这是一个非常好的验证工具，因为您可以关闭和打开不同的错误和警告。还有一个用于 javascript，称为[JS Lint](http://www.jslint.com "JS皮棉")。

至于charset部分，如果你想知道它是做什么用的，那么这里已经回答了这个问题
[为什么指定@charset "UTF-8"; 在你的 CSS 文件中？](https://stackoverflow.com/questions/2526033/why-specify-charset-utf-8-in-your-css-file)
希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T04:55:27.170

更新：

最后，我的问题归结为咬紧牙关，要么将我的 CSS 代码与样板代码分开，要么删除我可能不需要的东西。这个问题帮助我到达那里：

[HTML5 样板，HTML5 重置 CSS 验证](https://stackoverflow.com/questions/6624808/html5-boilerplate-html5-reset-css-validation)

# python - 返回 Python 中索引数组未引用的元素

> ID：14804433
> 
> 赞同：1
> 
> 时间：2013-02-11T00:46:54.847
> 
> 标签：python, numpy

假设我在 Python 中有一个数组，例如：

```
my_array = np.array([10, -5, 4, ...])
my_indices = np.array([0, 3, 10, ...]) 
```

我怎样才能**有效地**得到：

1.  其**索引**列表不在`my_array``my_indices`
2.  未**引用**的**元素**列表（与 1 无关，但也许有直接的方法）`my_array`**`my_indices`**

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T01:09:00.423

我可能会这样做：

```
>>> import numpy as np
>>> a = np.random.random(10)  # set up a random array to play with
>>> a
array([ 0.20291643,  0.89973074,  0.14291639,  0.53535553,  0.21801353,
        0.05582776,  0.64301145,  0.56081956,  0.85771335,  0.6032354 ])
>>>
>>> b = np.array([0,5,6,9])  # indices we *don't want*
>>> mask = np.ones(a.shape,dtype=bool)
>>> mask[b] = False          # Converted to a mask array of indices we *do want*
>>> mask
array([False,  True,  True,  True,  True, False, False,  True,  True, False], dtype=bool)
>>>
>>> np.arange(a.shape[0])[mask]  #This gets you the indices that aren't in your original
array([1, 2, 3, 4, 7, 8])
>>> a[mask]  #This gets you the elements not in your original.
array([ 0.89973074,  0.14291639,  0.53535553,  0.21801353,  0.56081956,
        0.85771335]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T00:51:37.137

[对于第 1 部分，您可以使用 Python 的内置`set`](http://docs.python.org/2/library/stdtypes.html#set)类来使用这两组之间的差异。

```
my_array = [1,2,3,4]
my_indices = [3,4,5]

print list(set(my_array) - set(my_indices)) 
```

将输出：`[1, 2]`.

* * *

**编辑**

为了返回`my_array`不在的索引列表`my_indices`，您可以使用列表推导：

```
my_array = [1,2,3,4]
my_indices = [0,3]

print [x for x in range(len(my_array)) if x not in my_indices] 
```

也可以表示为：

```
temp = []
for x in range(len(my_array)):
  if x not in my_indices:
    temp.append(x) 
```

这将返回索引`[1,2]`。

在您想要获取元素列表时，您可以将语句修改为：

```
print [my_array[x] for x in range(len(my_array)) if x not in my_indices] 
```

哪个会输出`[2,3]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T00:51:54.813

对于第一个问题：

```
my_indices_set = set(my_indices)
[i for i, x in enumerate(my_array) if i not in my_indices] 
```

对于第二个问题：

```
[x for x in my_array if x not in my_indices_set] 
```

如果我们使用集合会更有效，但是首先创建集合是有成本的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T01:02:55.817

您可以使用列表推导

```
array_len = len(my_array)
missing_indices = [i for i in my_indices
                   if i < 0 or i >= array_len]
elems = [my_array[i] for i in missing_indices] 
```**

# c# - nuget 包管理器控制台有哪些不同的命令可用？

> ID：14804437
> 
> 赞同：5
> 
> 时间：2013-02-11T00:47:25.340
> 
> 标签：c#, asp.net-mvc, visual-studio-2010, visual-studio-2012

任何人都可以发布 Visual Studio 的包管理器控制台中可用的不同命令。

例子：

```
install-package packagename
remove-package packagename 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T00:51:05.553

查看[nuget 命令行参考](http://docs.nuget.org/docs/reference/command-line-reference)。

# sql-server - 如何将 IDENTITY 属性添加到现有 SQL Azure 表？

> ID：14804440
> 
> 赞同：3
> 
> 时间：2013-02-11T00:47:38.520
> 
> 标签：sql-server, azure-sql-database, identity-column

我在 SQL Azure 中创建了几个表，忘记将主键标记为`identity`列。表中尚无数据，但标记的复选框`Is Identity`已禁用。

如何使现有主键成为`identity`SQL Azure 中的列？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T01:30:43.420

您创建一个新表。您也不能更改常规 SQL Server 实例中的 IDENTITY 属性 - 好吧，根据您的设置，SSMS 可能会允许您，但它不会告诉您它在幕后实际做了什么 - 删除表并重新创建它。不相信我？编写脚本或分析它。

# css - 如何完美对齐我的所有 div？

> ID：14804444
> 
> 赞同：2
> 
> 时间：2013-02-11T00:48:19.277
> 
> 标签：css, html, containers

我的三列没有与其他所有内容正确对齐？我的页眉、页脚、特色都是对齐的，但那是因为它是一个 div 而不是多个。演示：http: [//jsfiddle.net/Zevoxa/3LDUd/](http://jsfiddle.net/Zevoxa/3LDUd/)

```
<body>
    <div id="header">
        <h1>LOGO</h1>
        <div id="nav">
            <ul>
                <li><a href="">Home</a></li>
                <li><a href="">Products</a></li>
                <li><a href="">Services</a></li>
                <li><a href="">About</a></li>
                <li><a href="">Contact</a></li>
            </ul>
        </div>
    </div>
    <div id="content">
        <div id="feature"><div style="text-align:center">
            <p>Feature<p>
        </div>
        <div class="article column1">
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        </div>
        <div class="article column2">
            <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
        </div>
        <div class="article column3">
            <p>At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio.</p>
        </div>
    </div></div>
    <div id="footer"><div style="text-align:center">
        <p>&copy; Copyright 2013</p>
    </div></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T00:52:12.980

[http://jsfiddle.net/persianturtle/3LDUd/1/](http://jsfiddle.net/persianturtle/3LDUd/1/)

您将宽度设置为 33.3px 而不是百分比。

```
.column1, .column2, .column3 {
        background-color: #efefef;
        width: 30%;
        float: left;
        margin: 10px;
        display: inline-block;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T01:27:16.037

我将文章的宽度设置为 33%，而是将 10px 的边距放在

里面的标签。还添加了一个更清晰的 div，在这里查看：

[http://jsfiddle.net/dzHgX/](http://jsfiddle.net/dzHgX/)

```
.column1, .column2, .column3 {
    background-color: #efefef;
    width: 33%;
    float: left;
    display: inline-block;
}
.column1 p, .column2 p, .column3 p {
    margin: 10px;
} 
```

# javascript - 如何在 JavaScript 显示模块模式中返回字符串值

> ID：14804446
> 
> 赞同：0
> 
> 时间：2013-02-11T00:48:33.193
> 
> 标签：javascript, string, design-patterns, module

我在我的一个应用程序中使用了 Revealing Module 模式，但在对象上调用 init 方法后，我无法让它返回字符串变量的值。目标是设置 stringVar 的值并从我的 UI 中检索它。arrayVar 有效。

谢谢，克里斯

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>

<script type="text/javascript">
    var viewModel = null;
    $(document).ready(function () {
        viewModel = new ViewModel();
        viewModel.init();
        // writes "object1" to ul
        $("#log").append("<li>" + viewModel.arrayVar[0] + "</li>");
        // writes "" to ul
        $("#log").append("<li>" + viewModel.stringVar + "</li>");
    });

    ViewModel = (function () {
        var
            arrayVar = new Array(),
            stringVar = '',
            init = function () {
                // load data from external source
                arrayVar.push("object1");
                arrayVar.push("object2");
                stringVar = "string value 1";
            };
        return {
            arrayVar: arrayVar,
            stringVar: stringVar,
            init: init
        };
    });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T01:44:47.590

“这个”有效。双关语意:)

```
init = function () {
    // load data from external source
    this.arrayVar.push("object1");
    this.arrayVar.push("object2");
    this.stringVar = "string value 1";
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T18:49:38.763

这里的问题是字符串是不可变的，因此当您重新分配`stringVar`in时`init`，它实际上是用新字符串替换变量，使构造函数返回的对象指向原始字符串。

解决此问题的最简单方法是使用 getter 函数代替直接访问。如果您想要类似属性的访问，有几个选项。不推荐使用的`__defineGetter__`是 ，然后是 ECMA5 getter，它们的兼容性有限：

```
// your constructor
function() {
  // ...

  var getStr = function() {
    return stringVar;
  };

  // saving the returned object to a variable, as a few of the options
  // involve operating on an object.
  var m = {
    // typical getter function
    getStr: getStr,

    // ecma5 pretty syntax getter property
    get str1() { return getStr() }
  };

  // __defineGetter__ variant
  m.__defineGetter__("str2", getStr);

  // ecma5 Object.defineProperty variant
  Object.defineProperty(m, "str3", {get: getStr, enumerable: true});

  return m;
}

// access them like:
viewModel.getStr();
viewModel.str1;
viewModel.str2;
viewModle.str3; 
```

# jquery - 添加到 jQuery 代码的 HTML 标记在网页上显示未定义

> ID：14804451
> 
> 赞同：0
> 
> 时间：2013-02-11T00:49:31.507
> 
> 标签：jquery, json

我正在使用 jQuery 从 JSON txt 文件中检索特定数据并将其显示在网页上。数据按预期显示在页面上，但需要使用 HTML/CSS 进行格式化。当我添加诸如 p 或 div 之类的 HTML 标记时，页面上会多次显示“未定义”。这可能是我忽略的非常简单的事情，但到目前为止，我从其他帖子中尝试过的所有建议都没有奏效。我正在使用 jquery-1.9.1.min，这是代码：

```
$(document).ready(function(){
$.getJSON('cache/bitly-click-rate.txt', function(data){
       $.each(data, function(index, item){
               $('#bitly-click-rate').append('<p>' + item.phrase + '</p><p>' + item.rate + '</p>');
      });
    })
 }) 
```

这是网页上显示的屏幕截图： ![在此处输入图像描述](../Images/0bec975d553aa5c8595272b1352b63e6.png)

我检查了 JSON 代码，它是有效的。如果有帮助，这里是 JSON 代码：

```
{"status_code": 200, "data": {"phrase": "obama", "rate": 0.062096999999999999, "lag": 5, "time": 1360459793}, "status_txt": "OK"} 
```

我希望有人能告诉我我在这里缺少什么......在此先感谢您的帮助。

**更新：** 感谢大家的快速响应。我更新了 jQuery 代码，因为问题似乎是因为返回的 JSON 数据是单个对象而不是数组。我使用的 jQuery 代码用于 JSON 数组。我已经根据 Vlad 的回答更新了 jQuery 代码：

```
$(document).ready(function() {
    $.getJSON('cache/bitly-click-rate.txt', function(data) {
              $('#bitly-click-rate').append('<p> Phrase: ' + data.phrase + '</p>' + '<p> Rate: ' + data.rate + '</p>');
    });
}); 
```

数据在网页上仍然显示为未定义，这是一个截图： ![在此处输入图像描述](../Images/e21b9ffde287465efac30823cb4668e7.png)

在我看来，上面的代码应该可以工作。我一直在研究，但到目前为止，大多数代码建议都是针对 JSON 数组的。如果您对更新的代码不起作用的原因有任何想法，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:59:27.933

您返回的 JSON 数据是单个对象而不是数组：

```
{"status_code": 200, "data": {"phrase": "obama", "rate": 0.062096999999999999, "lag": 5, "time": 1360459793}, "status_txt": "OK"} 
```

`each`所以在这种情况下没有必要使用。您可以直接访问属性：

```
$.getJSON('cache/bitly-click-rate.txt', function(result){
    $('#bitly-click-rate').append('<p>' + result.data.phrase + '</p><p>' + result.data.rate + '</p>');
}) 
```

如果您的 JSON 有一组项目，如下所示：

```
{
    "status_code": 200,
    "data": {
        "phrases": [
            {
                "phrase1": "obama",
                "rate": 0.062097,
                "lag": 5,
                "time": 1360459793
            },
            {
                "phrase2": "clinton",
                "rate": 0.062097,
                "lag": 5,
                "time": 1360459793
            }
        ]
    },
    "status_txt": "OK"
} 
```

只有这样你才有东西可以迭代：

```
$.getJSON('cache/bitly-click-rate.txt', function(result){
    $.each(result.data.phrases, function(index, item){
        $('#bitly-click-rate').append('<p>' + item.phrase + '</p><p>' + item.rate + '</p>');
    });
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T01:18:58.040

试试这个：

```
$(document).ready(function(){
$.getJSON('cache/bitly-click-rate.txt', function(data){
       $.each(data.data, function(index, item){
               $('#bitly-click-rate').append('<p>' + item.phrase + '</p><p>' + item.rate + '</p>');
      });
    })
 }) 
```

因为您有兴趣显示的对象（我猜）不是回调 ( `data`) 中的顶级对象，而是其中命名的属性`data`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T01:20:15.550

您当前正在逐个元素地迭代返回的 JSON 数据。第一个元素是：

```
data.status_code 
```

其值为 200。而 200.phrase 没有意义，所以它是未定义的。

# xml - 打开 JSF Facelets 页面显示“此 XML 文件似乎没有任何与之关联的样式信息。”

> ID：14804452
> 
> 赞同：34
> 
> 时间：2013-02-11T00:49:31.897
> 
> 标签：xml, eclipse, jsf, facelets

我正在尝试在其他计算机上的 Apache Tomcat 上运行我的 Eclipse JSF 项目。[我使用本教程](http://www.java-tips.org/other-api-tips/eclipse/how-to-make-war-file-in-eclipse.html)创建了一个 WAR 文件。但是，当我部署 WAR 并在 Firefox 中打开 Facelet 页面时，我只收到以下错误消息：

> 此 XML 文件似乎没有任何与之关联的样式信息。文档树如下所示。

这是我第一次尝试在没有 Eclipse 的情况下运行我的 JSF 应用程序。这是如何引起的，我该如何解决？

我实际上是在尝试打开以下 Facelet 页面：

```
<?xml version="1.0" encoding="UTF-8"?>
<ui:composition template="/WEB-INF/templates/template_a.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:define name="title">
        tytol
    </ui:define>
</ui:composition> 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-11T13:03:18.110

> *此 XML 文件似乎没有任何与之关联的样式信息。文档树如下所示。*

`text/xml`当客户端（Web 浏览器）出于某种原因将表示 HTML 文档的 HTTP 响应内容解释为`text/html`not 并且解析的 XML 树没有任何[XML-stylesheet](http://www.w3.org/TR/xml-stylesheet/)时，您将在客户端收到此消息。换句话说，由于 HTTP 响应内容类型丢失或不正确，Web 浏览器将检索到的 HTTP 响应内容解析为 XML 而不是 HTML。

对于具有默认扩展名的 JSF/Facelets 文件，如果`.xhtml`HTTP 请求没有调用`FacesServlet`源代码。然后，Firefox 只是根据`.xhtml`您的 Firefox 配置中的文件扩展名猜测 HTTP 响应内容类型，显然默认解释为`text/xml`.

您需要确保 HTTP 请求 URL（如您在浏览器地址栏中看到的）与webapp 中注册的`<url-pattern>`URL匹配，以便调用它并能够根据 XHTML 源代码生成所需的 HTML 输出。如果是 例如，那么您需要打开页面而不是。或者，您也可以将 更改为。这样，您就无需摆弄虚拟 URL。`FacesServlet``web.xml``*.jsf``/some.jsf``/some.xhtml``<url-pattern>``*.xhtml`

### 也可以看看：

*   [有时我看到 JSF URL 是 *.jsf，有时是 *.xhtml，有时是 /faces/*。为什么？](https://stackoverflow.com/questions/3008395/jsf-facelets-sometimes-i-see-the-url-is-jsf-and-sometimes-xhtml-why/3008504#3008504)
*   [JSF 使用普通/原始 XHTML/XML/EL 源而不是呈现的 HTML 输出返回空白/未解析页面](https://stackoverflow.com/questions/3112946/jsf-returns-blank-unparsed-page-with-plain-raw-xhtml-xml-el-source-instead-of-re)

* * *

因此请注意，您实际上并不需要 XML 样式表。在您的特定情况下，这只是网络浏览器的一种误解，同时试图尽最大努力从检索到的 HTTP 响应内容中制作出一些可呈现的内容。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2021-08-11T21:45:59.863

将 xmlns="http://www.w3.org/2000/svg" 属性添加到 svg 标记的开头，如下所示：`<svg xmlns="http://www.w3.org/2000/svg"`

# mysql - 由于插入查询导致 MySQL 过载

> ID：14804468
> 
> 赞同：1
> 
> 时间：2013-02-11T00:52:09.610
> 
> 标签：mysql, query-optimization

由于插入查询的过载，我最近开始遇到一些巨大的服务器问题。我们服务器上的所有查询都一直在优化，但是由于大量的 INSERT 查询，流量再次回升，CPU 正在最大化。

我们为访问我们网站的每个访问者运行 INSERT .. ON DUPLICATE UPDATE 查询，以跟踪在线访问者、在线用户以及他们所在的页面。

我不确定还有什么其他方法可以完成，也不知道该怎么做才能减少服务器负载。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T00:56:46.413

我最喜欢的处理方法是在服务器内存中缓冲访问者数据，然后每隔一段时间进行一次批量插入。

例如，仅当 X 数量的访问者日志已在内存中排队时才写入数据库，其中 X 可能在 10 到 1000 之间，具体取决于您的应用程序。

即使您发送到数据库服务器的命令仍然包含 1000 个插入命令，您的应用程序服务器和数据库服务器之间也只会有一次往返。因此，您将消除管理许多不同连接的开销。

此外，您可能会考虑使用 NoSQL 混合，例如对此类数据进行弹性搜索，以消除 MySQL 服务器的负载。它的扩展性非常好，可以针对索引（插入）、查询或两者进行优化。

# java - 如何在使用java退出jframe之前调用方法

> ID：14804472
> 
> 赞同：2
> 
> 时间：2013-02-11T00:52:42.000
> 
> 标签：java, swing, jframe, windowlistener

我试过像他们在这个问题中回答的那样 [如何在用户关闭应用程序 JFrame 之后，但在程序退出之前直接保存一些对象？](https://stackoverflow.com/questions/9760876/how-can-save-some-objects-directly-after-the-user-has-closed-the-applications-j) 但框架不会关闭

我写了以下内容，但它是同一件事，框架不会关闭。

```
@Override
public void windowClosed(WindowEvent e) {

    dispose();
    setVisible(false);
    System.exit(0);
}

@Override
public void windowClosing(WindowEvent e) {
    dispose();
    setVisible(false);
    System.exit(0);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T00:17:55.137

您通常可以在 jvm 退出之前添加关闭挂钩来完成工作，不需要这些侦听器。

[关机挂钩](http://www.iks.hs-merseburg.de/~uschroet/Literatur/Java_Lit/JAVA_Insel/javainsel_11_011.htm)

如果您想通过侦听器执行此操作，请使用 windowClosedEvent：

```
@Override
public void windowClosed(WindowEvent e) {
    save();
} 
```

默认情况下，最后一帧退出应用程序，除非您没有将默认关闭操作设置为 DISPOSE_ON_CLOSE 以外的任何内容。

# windows - 从命令行编译 cuda - win32

> ID：14804473
> 
> 赞同：2
> 
> 时间：2013-02-11T00:52:49.890
> 
> 标签：windows, command-line, cuda

我不想安装整个 VS，特别是因为它会占用我大部分的 C 空间，所以我抓住了 SDK。我还安装了 cuda SDK。我遇到了一个相当荒谬的问题：

```
d:\cuda\class>nvcc --cubin unit1-1.cu
unit1-1.cu
unit1-1.cu
tmpxft_00001224_00000000-5_unit1-1.cudafe1.gpu
tmpxft_00001224_00000000-11_unit1-1.cudafe2.gpu
'nvopencc' is not recognized as an internal or external command,
operable program or batch file.

d:\cuda\class>nvopencc
nvopencc: no input files
For general help: nvopencc --help
To search help: nvopencc -help:<string> 
```

它是说 nvopencc 不是一个有效的命令，但我可以运行它！任何人都知道如何解决这个问题？我`--cubin`在某个地方找到了一个命令，并希望它会起作用......我不知道它是否应该在那里。无论如何，无论有没有我都会遇到同样的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T01:31:26.447

这是对 nvcc.exe 的典型调用，由 Visual Studio 2010 生成。看起来您需要指定编译器二进制文件的位置。

> nvcc.exe -gencode=arch=compute_30,code=\"sm_30,compute_30\" --use-local-env --cl-version 2010 -ccbin "c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC \bin" -I"\C\common\inc" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\include" -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA \v5.0\include" --keep --keep-dir "Release" -maxrregcount=0 --machine 32 --compile -D_MBCS -Xcompiler "/EHsc /W3 /nologo /O2 /Zi /MD " -o "发布\kernel.cu.obj" "c:\test_cuda\test_cuda\kernel.cu"

# java - Android上C二进制和Java之间的输入/输出

> ID：14804474
> 
> 赞同：2
> 
> 时间：2013-02-11T00:53:07.573
> 
> 标签：java, android, c, stdout, stdin

我需要从 C 二进制文件中获取文本问题并将其显示在我的 TextView 中。另外，我需要从输入字段中获取答案并将其传递给 C 二进制文件等。我阅读[了这个主题](https://stackoverflow.com/questions/5287043/communicate-with-external-c-program-with-java-using-stdin-and-stdout?rq=1)并尝试在 Android 上运行它。C 二进制文件在 shell 中工作，但我的应用程序不工作（黑屏）。我是 Java 新手，需要帮助。

```
package com.example.helloapp;

import android.app.Activity;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.widget.EditText;
import android.widget.Toast;
import android.os.Handler;
import android.os.Message;
import android.os.Bundle;
import java.io.*;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.util.concurrent.ArrayBlockingQueue;
import java.util.concurrent.BlockingQueue;

public class HelloApp extends Activity
{
    private Button btn;
    private EditText editText;
    private TextView textView;

    private BlockingQueue<String> m_queue;
    private BufferedReader bufIn;
    private InputStream in;
    private InputThread inputThread;
    private PrintWriter printOut;
    private Process p;

    private Handler handler;

    private String input = null;

// show nice popup on error
    private void popup(String msg)
    {
        Toast.makeText(getApplicationContext(), msg, Toast.LENGTH_LONG).show();
    }

    Thread.UncaughtExceptionHandler uncaughtExceptionHandler = new Thread.UncaughtExceptionHandler()
    {
        @Override
        public void uncaughtException(Thread t, Throwable e) {
            e.printStackTrace();
            HelloApp.this.finish();
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        textView = (TextView)findViewById(R.id.textView1);
        btn = (Button)findViewById(R.id.button1);

        Thread.setDefaultUncaughtExceptionHandler(uncaughtExceptionHandler);

// new Thread cannot change our TextView, so we use Handler
        handler = new Handler()
        {
            @Override
            public void handleMessage(Message msg)
            {
                String text = (String) msg.obj;
                textView.setText(text);
            }
        };

        File f = new File(getCacheDir()+"/hello");

        if(!f.exists())
        try {
// unpack our binary...
            InputStream is = getAssets().open("hello");
            int size = is.available();
            byte[] buffer = new byte[size];
            is.read(buffer);
            is.close();

            FileOutputStream fos = new FileOutputStream(f);
            fos.write(buffer);
            fos.close();

// ... and make it executable
            try {
                Process chmod = Runtime.getRuntime().exec("/system/bin/chmod 777 " +f.getPath());
                chmod.waitFor();
            } catch(IOException e) { popup(e.getMessage()); } catch(InterruptedException e) { popup(e.getMessage()); }

        } catch(IOException e) { popup(e.getMessage()); }

        try {
            p = Runtime.getRuntime().exec(f.getPath());

            InputStream in = p.getInputStream() ;
            OutputStream out = p.getOutputStream ();
            InputStream err = p.getErrorStream();

            printOut = new PrintWriter(out);

            m_queue = new ArrayBlockingQueue<String>(10);
            inputThread = new InputThread(in, m_queue);
            inputThread.start();

        } catch(Exception e) { popup(e.getMessage()); }

        btn.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View view)
            {
                editText = (EditText)findViewById(R.id.editText1);
                input = editText.getText().toString();
// pass something to C binary
                printOut.println(input+"\n");
                printOut.flush();
            }
        });
    }

private void setTextHandler(final String text)
{
    Message msg = new Message();
    msg.obj = text;
    handler.sendMessage(msg);
}

private void mainLoop()
{
    String line;

    while(true)
    {
            try {
            line = bufIn.readLine();

// stdin is always empty... why?

            if(line != null) { setTextHandler(line); }
        }
        catch(IOException e) { popup(e.getMessage()); return; }
    }
}

private class InputThread extends Thread
{
    InputThread(InputStream in, BlockingQueue<String> queue)
    {
        bufIn = new BufferedReader(new InputStreamReader(in));
        m_queue = queue;
    }
    public void run() {

        try { mainLoop(); }

            catch(Throwable t) { popup(t.getMessage()); }
    }
}

} 
```

更新：如果我编译以下 C 代码：

```
#include <stdio.h>
#include <string.h>

int main(void)
{
char *s;

setvbuf(stdout, NULL, _IONBF, 0); // <<<= disable buffering globally

printf("Enter your name:\n");
fflush(stdout);
scanf("%s", &s);
printf("Hello, %s", s);
fflush(stdout);

return 0;
} 
```

我只有在二进制退出时才能得到结果，即。我运行 android 应用程序，看到一个空白屏幕（必须看到“输入你的名字：”），输入一些内容，按 OK 按钮 - 二进制退出，我立即得到“输入你的名字：你好，尤金”。

## 问题解决了！请参阅更新的 C 代码。

# ruby-on-rails-3 - Rails 3.0.20 应用程序不允许 IE 存储 cookie

> ID：14804480
> 
> 赞同：0
> 
> 时间：2013-02-11T00:53:26.613
> 
> 标签：ruby-on-rails-3, internet-explorer, session-cookies

我有一个使用会话存储用户 ID 的应用程序，这是大多数登录系统的标准做法。该应用程序之前已在 IE 中运行。我正在使用 Heroku 托管。

由于安全问题，我最近将 rails 版本更新为 3.0.20，而且 IE 似乎不允许设置任何 cookie。Cookie 在 Firefox/Chrome/Safari 中存储得很好，但 IE 不会存储它们。

子域中没有下划线，所以这不是问题。

据我所知，最近唯一的变化是将 rails 版本更新到 3.0.20，这让我怀疑那里有问题。由于创建 rails 3.0.20 是为了解决安全问题，我很好奇安全更改是否使 IE 认为该应用程序违反了安全性并且将不再接受其中的 cookie？但是，我什至测试了 IE，我告诉它接受来自每个站点的所有 cookie，所以我不确定这里发生了什么。

有人最近看到这个问题或知道可能发生了什么吗？

没有要显示的堆栈跟踪或错误；只是没有设置 cookie，这会导致标准的“找不到记录”错误。

# jquery - jquery自动完成不清除选择？

> ID：14804482
> 
> 赞同：0
> 
> 时间：2013-02-11T00:53:33.377
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我只是在玩 jquery 自动完成。我已将最小长度设置为 3。

如果我输入字母“sci”，它将获得所有标题中包含字母“sci”的记录。这部分**工作**正常，因为所有带有字母“sci”的记录都被返回并显示。

但是如果说我继续输入（当然是在暂停之后。此时我输入了“scisdfgdsfsd”），它仍然会显示以前的选择。肯定没有标题使用字母“scisdfgdsfsd”的记录。

有想法该怎么解决这个吗？谢谢！:)

* * *

**行动中的“错误”截图**

工作：[http ://awesomescreenshot.com/0a2wuo2aa](http://awesomescreenshot.com/0a2wuo2aa)

不工作：[http ://awesomescreenshot.com/023wuo507](http://awesomescreenshot.com/023wuo507)

**我的jQuery代码**

```
$(function() {
    $("#course").autocomplete({
        minLength: 3,
        source: function( request, response ) {
            $("#commentsSection").hide();
            $("#instanceIdSection").hide();
            $.getJSON("/issu/GetCourses.html", {term: request.term}, function(data, status) {
                if (data.length > 0) {
                    response(data);
                } else { 
                    getEventComments();
                    getEventSessions();
                }
            });
        },
        select: function (event, ui) {
            alert("select");
            getEventComments();
            getEventSessions();
        },
        change: function (event, ui) {
            alert("change");
            getEventComments();
            getEventSessions();
        }
    });

    function getEventSessions(){
        $.getJSON("/issu/GetEventSessions.html",{description: $("#course").val()}, function(data, status){
            if (data.length != 0) {

                $("#instanceId").empty();
                $.each(data, function () {
                    $("#instanceId").append($('<option></option>').attr("value", $(this)[0]).text($(this)[1]));
                });
                $("#instanceIdSection").show();
            }
        });
    }

    function getEventComments() {
        $.get("/issu/GetEventComments.html",{description: $("#course").val()}, function(data, status){
            if (data.length != 0) {
                $("#comments").text(data);
                $("#commentsSection").show();
            }
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:36:46.367

您提供给“源”选项的回调函数`response()`仅在返回选项时调用。`response()`当没有返回选项时，您也应该调用。这将导致自动完成程序清除结果。

尝试：

```
$.getJSON("/issu/GetCourses.html", {term: request.term}, function(data, status) {
    response(data);
    if (data.length == 0) {
        getEventComments();
        getEventSessions();
    }
}); 
```

# c++ - C++ 程序 - 不确定，我是否提供了正确的解决方案

> ID：14804484
> 
> 赞同：-1
> 
> 时间：2013-02-11T00:53:55.137
> 
> 标签：c++

我明天有一个测试，作为测试的“指南”，下面有一个问题，我已经写了我的解决方案，但不确定我是否在做问题所要求的？谢谢您的帮助！

> 编写一个交互式 C++ 程序，输入用户名，格式如下：

> ```
> last, first middle 
> ```
> 
> 然后程序应该以以下格式输出名称：

> ```
> first middle last 
> ```
> 
> 该程序将不得不使用字符串操作来删除姓氏末尾的逗号。

这是我的解决方案：

```
#include <iostream>
#include <string> 

using namespace std;

const string FIRST = "Firstname";
const string LAST = "Middlename";
const string  MIDDLE = "Lastname";

int main()
{
string firstLast;
string lastFirst;

firstLast = LAST + ", " + FIRST + " " + MIDDLE;
cout << "Name in first-last format is " << firstLast << endl;

lastFirst = FIRST + " " + MIDDLE + " " + LAST;
cout << " Name is last-First format is " << lastFirst << endl;

system("PAUSE");
return 0;

 } 
```

此解决方案是否完成了问题的要求？有些人在我的课堂上遇到了麻烦，似乎这个解决方案太简单了？感谢所有的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T01:11:52.753

> 此解决方案是否完成了问题的要求？

不。

分部分检查试题...

> 编写交互式 C++ 程序

您的程序不是交互式的。没有与用户的交互。它立即运行完成。

> 以以下格式输入用户的名称：`last, first middle`

你的程序没有这样做。它应该允许用户以`last, first middle`该格式键入或可能是任何名称。

> 然后程序应该以以下格式输出名称：
> 
> `first middle last`

你的程序没有这样做。

或者，更准确地说，它输出 18 个单词而不是 3 个，但其中 3 个**是**程序应该输出的 3 个单词。

> 该程序将不得不使用字符串操作来删除姓氏末尾的逗号。

你的程序没有这样做。没有任何代码可以从任何地方删除逗号。

我建议：

*   阅读有关`std::cin`
*   阅读`std::string`成员函数
*   咖啡，如果可能的话。你还没有准备好接受这个测试。

# angularjs - AngularJS shuffle 和 limitTo 列表

> ID：14804487
> 
> 赞同：3
> 
> 时间：2013-02-11T00:54:05.853
> 
> 标签：angularjs

我想使用 AngularJS 来显示一个随机列表 - 但只有前几个元素。目前，我在 HTML 模板中执行了改组和限制，如下[所示](http://jsfiddle.net/zc3YH/1/)：

```
<li ng-repeat="value in array | shuffle | limitTo:1">
    {{value}}
</li> 
```

`$digest`这可以正常工作，但是当列表中的项目多于显示的项目时，会导致 Angular 超过 10次迭代，如示例中所示。据我所知，正在发生的事情是某些东西正在监视列表的过滤和有限值，当所有元素不会总是显示时，这很可能会发生变化。

我应该如何在不破坏 Angular 的情况下实现这种效果？当然，它仍然可以正常工作，但是效率低下，并且可能表明我正在做的事情是不正确的，应该以其他方式实现。

显而易见的解决方案是在控制器中的列表显示之前对其进行洗牌 - 但我确实希望每次用户更新视图时显示的元素选择都会发生变化。

**编辑：**这是我正在尝试实现的一个[更好的示例](http://jsfiddle.net/zc3YH/7/)- 该应用程序现在允许您在两个列表之间切换，每次都会被打乱和限制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T08:30:06.757

如前所述 - 角度等待表情稳定。因此，最好的方法是在将数组传递给查看之前对其进行洗牌。无论如何，有一些技巧可以帮助您保持清洁。

[http://jsfiddle.net/zc3YH/3/](http://jsfiddle.net/zc3YH/3/)

在这个小提琴中，我们缓存了 shuffle 结果，而长度保持不变。因此，不是在数组更改时而是在数组长度更改时才对数组进行重新洗牌。您可以实现更复杂的缓存行为。所以，主要思想是只对同一个数组进行一次洗牌，并且只在数组更新时重新洗牌。

当前的过滤器实现非常糟糕，因为它只缓存单个数组，所以如果你使用这个过滤器两次 - 它会被破坏。因此，缓存应该使用类似 hashKey 的东西来完成，以便数组区分不同的数组。

```
shufflemodule.filter('shuffle', function() {
    var shuffledArr = [],
        shuffledLength = 0;
    return function(arr) {
        var o = arr.slice(0, arr.length);
        if (shuffledLength == arr.length) return shuffledArr;
        for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
        shuffledArr = o;
        shuffledLength = o.length;
        return o;
    };
}); 
```

无论如何，修改过滤器范围内的数据并不是一个好习惯。如果您需要共享这个打乱的数组 - 在您的控制器/服务/....中打乱它。因此，`var o = arr.slice(0, length)`复制该数组，因此我们保持原始数组不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T20:01:20.900

[这个小提琴](http://jsfiddle.net/zc3YH/8/)演示了“控制器中的过滤器”方法。改组不是实际创建过滤器，而是定义为常规函数并应用于`$scope.array`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T07:44:18.280

我认为 tgat 问题是您的过滤器修改了源数组。即使您返回新数组，这也将是一个简单的问题。它是如何进行脏检查的：它不断评估表达式，直到它“稳定”（或 10 次迭代）。这篇文章中有更多描述：[https ://groups.google.com/forum/m/#!msg/angular/IEIQok-YkpU/InEXv61MrkMJ](https://groups.google.com/forum/m/#!msg/angular/IEIQok-YkpU/InEXv61MrkMJ)

解决方案是控制器中的预洗牌值，因此表达式将在每个脏检查阶段返回相同的值......对不起，但这是目前最好的方法（除非你想用 $$hash 玩脏游戏让 ngRepeat 忘记那个yourexpression 计算为相同的值:))

# android - 设置渐变背景

> ID：14804488
> 
> 赞同：0
> 
> 时间：2013-02-11T00:54:11.790
> 
> 标签：android

在我的活动中，我需要使用渐变更改 ImageView 背景，因此我使用具有透明区域的图像，并在需要时更改其背景。这是一些代码：

```
private static View myImage;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.myActivityLayout);

    myImage = findViewById(R.id.myImageID);
} 
```

[...]

```
private void myImageUpdate() {
    GradientDrawable gradient;
    int[] colors = {0xFF00FF00, 0xFF0000FF};

    // I make some changes to these colors..

    gradient = new GradientDrawable(GradientDrawable.Orientation.BOTTOM_TOP, colors);
    myImage.setBackgroundDrawable(gradient);
} 
```

现在，问题是：如果我在 onCreate() 方法中调用 myImageUpdate()，一切正常。如果我从代码的另一部分（如 onClick 回调）调用 myImageUpdate()，我无法设置我的背景！

*** 更新 *** 伙计们，这段代码很好......我在错误的（不可直接访问的）行中调用了我的方法！我很抱歉...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T01:21:10.603

I don't think this will fix it since you said myImageUpdate gets called within onClick... but try this..

```
runOnUiThread(new Runnable() {
            public void run() {
            myImage.setBackgroundDrawable(gradient);
            }
          }); 
```

you might have to make gradient variable final..

```
 final GradientDrawable  gradient = new GradientDrawable(GradientDrawable.Orientation.BOTTOM_TOP, colors); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:02:31.677

试试 myImage.invalidate()。这将强制系统重绘视图。

# ruby-on-rails - 如何让两个 Ruby 应用程序使用相同的模型？

> ID：14804490
> 
> 赞同：2
> 
> 时间：2013-02-11T00:54:48.127
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我正在开发一个有两个不同 Rails 应用程序的项目。一个是 Web 应用程序，另一个是 API 应用程序。他们都使用相同的数据库。他们如何或什么是使用相同模型和模式的正确方法？目前，模型文件似乎从一个应用程序复制到另一个应用程序，并且在检查差异时它们似乎严重不同步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T02:25:07.310

我想到了几个选项：

*   Git 子模块。将模型存储在单独的存储库（或存储库）中，然后将其作为[Git 子模块](http://git-scm.com/book/en/Git-Tools-Submodules)包含在每个应用程序中。这允许您在没有冗余的情况下重复使用它们，但您可能必须确保保持每个应用程序正在使用的修订版本同步。

*   让它成为一个应用程序，具有两个不同的部分。也许您的 API 可以是一个简单的 Sinatra（或其他微框架）应用程序，并驻留在 Rails 应用程序中，然后安装到路径/子域。这可能是最少的工作量和最简单的，但它也可能是最混乱的。

*   使用您自己的 API。你已经有一个 API，为什么不使用它呢？您的前端应用程序可以与之对话，而不必在其中包含任何模型逻辑。这还有一个很好的副作用，即确保您的 API 正常工作并且功能齐全，因为您现在是它的消费者，而不仅仅是第三方。

你选择哪一个取决于你，虽然我碰巧更喜欢最后一个。虽然这可能需要更多的工作，但通过使您的业务逻辑外部化（并使 MVC 违规更难，如果不是不可能的话），您最终可能会得到一个整体更好的设计。

# exception - 斯坦福 NLP 移植到 ikvm，FileLoad 异常

> ID：14804493
> 
> 赞同：0
> 
> 时间：2013-02-11T00:54:58.020
> 
> 标签：exception, stanford-nlp, ikvm

我正在尝试使用移植到 IKVM 的斯坦福 NLP 工具，但它给了我未处理的异常。

这是我正在使用的代码

```
 `string StanfordModelsDirectory = "englishPCFG.ser.gz";
        try
        {
            LexicalizedParser LP = LexicalizedParser.loadModel(StanfordModelsDirectory);

            TreebankLanguagePack tlp = new PennTreebankLanguagePack();
            GrammaticalStructureFactory gsf = tlp.grammaticalStructureFactory();

            Tree parse = LP.apply("what's the largest city in canada?");
            parse.pennPrint();
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        }` 
```

我引用了 IKVM.OpenJDK.Core 和 stanford-parser，但消息“无法加载文件或程序集 'IKVM.OpenJDK.Core, Version=7.1.4532.2, Culture=neutral, PublicKeyToken=13235d27fcbfff58' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）出现。

我正在使用 Windows 8（Visual Studio 2012，.NET 4.5）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:28:50.600

IKVM 是为 .NET 2.0 编译的。您需要将配置文件添加到应用程序以映射到不同的 .NET 版本，例如 4.5。

IKVM 7.2.x 包含 ikvm.exe、ikvmc.exe、......的此类配置文件

# iphone - 使用 Thoes/徽标在 iOS 6 越狱 iPhone 中拦截 SMS 消息

> ID：14804494
> 
> 赞同：3
> 
> 时间：2013-02-11T00:55:11.267
> 
> 标签：iphone, security, ios6, sms, jailbreak

我正在尝试通过 theos 使用 hooking 方法从我的 iphone 拦截短信。我已经尝试使用 ChatKit 框架中的各种标头并使用网络上解释的方法，但许多方法适用于较旧的操作系统，并且在 iOS 6 的 ChatKit 框架中包含不同的标头。

我只是想知道是否有人在使用 iOS 6 固件上的 theos/logos 拦截短信方面取得了任何成功。如果是这样，我应该查看哪些标题或我应该尝试哪些方法？我已经经历了许多标题和方法，但仍然没有成功。

任何帮助，将不胜感激。谢谢！

PS 我这样做是因为我有多部手机，并且想将我所有的传入和传出文本转发到这些手机。可能已经有软件可以做到这一点，但我是那种 DIY 类型的人，这是我学习新东西的另一个机会 :)

再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:04:44.523

我使用 CTTelephonyAddObserver 来捕获收到的事件短信，但我不知道如何删除 SMS.DB 上的短信

# shell - 在 shell 命令（sed 或其他）中创建文件

> ID：14804495
> 
> 赞同：-4
> 
> 时间：2013-02-11T00:55:24.203
> 
> 标签：shell, sed

我要创建一个文件，如何在 sed 或其他中编写 shell 命令？

文件'/home/debian/01.flv'
文件'/home/debian/02.flv'
文件'/home/debian/03.flv'
文件'/home/debian/04.flv'
文件'/home/debian /05.flv'
文件'/home/debian/06.flv'
文件'/home/debian/07.flv'
文件'/home/debian/08.flv'
文件'/home/debian/09.flv'
文件'/home/debian/10.flv'
文件 '/home/debian/11.flv'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T01:08:26.823

如果它是具有上述内容的文件，请尝试：

```
for ((i=0; i<=11; ++i)) do printf "file \'/home/debian/%0.2d.flv\n" $i; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T01:05:35.653

如果您的问题是在您的示例中生成这些文本，那么您需要的只是**seq**（看起来与*sed*相似）

例如，我想生成 70 行这样的：

```
seq --format="file '/home/debian/%02G.flv'" 70 
```

如果要将输出放在文件中：

```
seq --format="file '/home/debian/%02G.flv'" 70 > myFile.txt 
```

# asp.net - OWASP 和 ADFS 2.0

> ID：14804496
> 
> 赞同：0
> 
> 时间：2013-02-11T00:55:25.700
> 
> 标签：asp.net, .net, single-sign-on, adfs2.0, owasp

是否有安全资源/博客文章展示了 ADFS 2.0（或通用 SSO）与[OWASP - 十大漏洞列表](https://www.owasp.org/index.php/Top_10_2010-Main)的优点？

ASP .NET 的好资源很少（[Troy Hunt](http://www.troyhunt.com/2011/12/free-ebook-owasp-top-10-for-net.html)中最好的资源）。但他们都没有谈到 ADFS 2.0。ADFS 2.0 wrt 对 OWASP 有什么附加价值吗（肯定有！！）？建设性的讨论也将受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:27:39.313

您最好的选择是与 Gunnar Peterson 交谈（搜索 1raindrop）。他是 SSO/SAML 的负责人。Troy 也很有价值，并且绝对与 Microsoft 堆栈保持一致。

Top 10 方法是关于研究人员在出版*前*一年发现的（因此 OWASP Top 10 2007 是对 2006 年弱点的总结）。无论好坏，研究人员通常不会遇到企业应用程序、堆栈或核心技术，例如 ADFS。那些这样做的人是付费看他们的，不幸的是，这通常需要保密协议。

一种更好的方法是我为应用程序安全验证标准和 OWASP 开发人员指南采用的方法 - 是为构建者提供构建帮助，因此您应该采取一组积极的、可验证的步骤来保护自己。

前 10 名是开始讨论的很好的教育文章，但正如我在 2007 年前 10 名的介绍中所写的那样，2007 年前 10 名（以及所有这些）都不是标准！不要这样使用它们。

Jim Manico 正在与无数作者合作编写备忘单系列。如果您有兴趣为 OWASP 做出贡献，可以考虑使用 ADFS 或 SSO 备忘单吗？

谢谢，安德鲁

# php - 重新加载页面并发送新的帖子数据，但也保留旧的帖子数据

> ID：14804498
> 
> 赞同：0
> 
> 时间：2013-02-11T00:55:44.577
> 
> 标签：php, sql, post

我在网站上有一个搜索功能，可以显示多组数据。我想用新的帖子数据对其进行排序，但在重新加载同一页面时保留旧的帖子数据。

也就是说，例如在 page.php 上 - 我运行搜索。它正在寻找来自不同供应商的苹果和橙子。

因此，我的清单中的发布数据显示发布苹果和橙子。

现在页面重新加载，得到了我正在寻找的苹果和橙子的信息——它进入数据库并将所有相关的供应商及其产品拖到页面上。

这就是我目前所处的位置。

现在我的困境。我想在 page.php 的顶部添加一个链接，上面写着“按价格订购”。还有一个说“按发布日期排序”。

默认情况下，sql 查询按日期排序，因此已经按日期显示。

现在我解决这个问题的想法是创建一个链接，让我发布到完全相同的页面。所以在php中我可以得到那个数据（称之为ORDER）

```
if (isset($_POST['Order'])){
    $theOrder = $_POST['Order'];
}
else {
    $theOrder = 'Date Desc';
} 
```

现在在我之前的脚本中，我可以有如下语句：

```
 $query = "SELECT * FROM Products WHERE name = '$products'
    ORDER BY '$theOrder'"; 
```

（为了简单起见，这里没有绑定）

问题是用新帖子重新加载了同一页面，订单 - 我现在丢失了我传递给 $products 的原始帖子 $_POST['Products']。

有没有办法保留原始帖子信息并在页面重新加载时简单地添加/更改 $theOrder？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:02:37.207

您可以将此数据存储到会话中，并在以后检索它。或者你可以把原来的post数据加到一个隐藏的输入框里，然后第二次提交表单的时候，你就会有原来的数据，还有新的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T01:05:41.033

只需在包含旧数据的提交表单中添加一个隐藏字段

```
<input type='hidden' name='Products' value='" . $_POST['Products'] . "' /> 
```

这样他们就可以`$_POST['Products']`像以前一样再次访问

# database - 我应该多久让我的服务器同步到数据库？

> ID：14804505
> 
> 赞同：2
> 
> 时间：2013-02-11T00:56:47.063
> 
> 标签：database

我现在正在开发一个网络应用程序，客户端会经常（每隔几秒钟）发送对某些数据的读/写请求。截至目前，我的服务器在用户更改某些内容时立即写入数据库，并在他们想要查看某些内容时立即从数据库中读取。这对我来说很好，但我猜如果有成千上万的用户在线，它会很慢。

将写入请求保存在服务器端的对象中，然后在某个时间间隔进行批量更新会更有效吗？这在多次编辑相同数据的情况下会有所帮助，因为它现在只需要一个数据库插入。这也意味着我将从对象中读取任何尚未同步的数据，这可能意味着通过避免读取数据库来提高效率。但与此同时，我觉得这将是一种责任，原因有两个： 1\. 服务器崩溃会清除所有尚未同步的数据。2\. 由于大量数据库调用，批量插入可能会造成突然的延迟峰值。

我应该如何处理这个？我目前的方法可以吗，还是应该稍后将插入排队？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T00:59:42.277

如果用户对数据进行了更改并采取了他希望保存数据的操作，那么您应该尽一切可能确保实际保存数据。示例：假设您将写入延迟了一段时间。用户很着急，进行更改然后关闭浏览器。如果您在他们采取他们期望保存数据的操作时没有正确保存，则会丢失数据。

Web 堆栈通常水平扩展。除非有证据表明您确实必须这样做，否则不要开始优化这种事情。

# c# - 是否可以在不访问项目文件的情况下重构 ASP.NET 应用程序？

> ID：14804506
> 
> 赞同：0
> 
> 时间：2013-02-11T00:56:53.050
> 
> 标签：c#, asp.net, refactoring, code-behind

场景：我可以访问在远程 Web 服务器上运行的已发布的 ASP.NET 应用程序。目录结构如下所示：

![在此处输入图像描述](../Images/0fa75b9f51ecc56b0dcb0b1c4b961be9.png)

据我所知，我无权访问项目/解决方案文件。具体来说，我找不到需要修改的特定 C# 代码隐藏文件。

是否可以仅使用已发布的代码以最小的努力重建这个项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T01:38:44.773

一些澄清：

重构某事物就是在不改变其外部行为的情况下改变其内部结构。您可以使用反编译器访问源代码，但通常不值得投入大量时间，因为反编译器已做出格式化决定，使大多数代码难以为人类阅读（因为它已经被剥离以实现机器可读性） .

重构通常只是为了提高代码的性能或可读性，所以如果你的目标是后者，你就会开始茫然。我的猜测是您需要进入并调整一些功能，在这种情况下，反编译器确实是唯一的方法，但找到源代码并保持对源代码的良好跟踪可能是更好的选择。当我们将代码部署到生产环境时，我们会包含一个 ReadMe.txt 文件，其中指示在何处查找源代码。

此外，一些 asp.net 文件没有编译成 .dll。通常 .dll 仅包含以 .vb 或 .cs 结尾的文件。您仍然需要访问和包含非编译页面，如 .aspx 和 .ascx 文件，但这些也将在您的服务器上。

.NET Reflector 的一个很好的免费替代方案是使用 Telerik 的[Just Decompile](http://www.telerik.com/products/decompiler.aspx)，它可以选择从编译后的代码重新创建 .proj 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T01:11:14.313

您可以使用像[.NET Reflector](http://www.red-gate.com/products/dotnet-development/reflector/)这样的反编译器来反编译 dll，但这只有在代码没有被混淆的情况下才有效。即使这样，您也可能无法从原始解决方案重新生成所有文件。

# c - 与 && 逻辑关联的 for 循环中的多个测试条件

> ID：14804510
> 
> 赞同：1
> 
> 时间：2013-02-11T00:57:20.630
> 
> 标签：c, for-loop, logical-operators

例如：

```
for(j=0;t1&&t2&&t3;j++); 
```

如果 t1 失败，for 循环是否会检查 t2 和 t3？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:05:28.487

C 将短路涉及逻辑 AND 和 OR 的表达式，因此一旦知道表达式的结果，评估就会停止。给定的表达式是：

```
t1 && t2 && t3 
```

由于它是一个逻辑 AND 运算符，一旦 t1 被评估为假，将跳过 t2 和 t3 的评估，因为整体结果是已知的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T00:59:29.880

不，如果您有 ( value && any ) 并且 value 变为 false ，则其他所有内容都将被忽略。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T01:00:17.050

在循环和使用or的`for`所有其他情况下，评估从左到右进行，直到知道答案。至此，评估停止。这称为*短路*。`&&``||`

 *这是一个非常重要的特性，因为它可以让您通过在前面插入检查来“保护”后续表达式。例如，

```
if (ptr != 0 && ptr->property == 42) {
} 
```

不会`ptr == NULL`因为短路而崩溃。如果不是因为它，程序员将被迫写得不那么愉快

```
if (ptr != 0) {
    if (ptr->property == 42) {
    }
} 
```

以避免崩溃。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T01:00:19.567

不，C 和 C++ 保证条件的“短路”——这意味着一旦可以确定条件，“测试”就会停止——如果某些东西对 是错误的`&&`，那么它就确定它永远不会是`true`，如果有东西`true`在一个`||`，它不能是假的。

这样可以安全地执行以下操作：

```
if (ptr != NULL && ptr->x > 10) ... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-11T01:05:33.833

来自[ISO 9899 C 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)（这是一个相当新的草案版本，但这个特定段落自 ANSI-C 草案以来就已经存在）

> 与按位二进制 & 运算符不同，&& 运算符保证从左到右的求值；在计算第一个操作数之后有一个序列点。**如果第一个操作数比较等于 0，则不计算第二个操作数**。

强调我的，所以是的，编译器必须在遇到会导致它返回 0 的操作数时立即短路逻辑和条件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-11T00:58:19.173

从逻辑上讲，它不需要，因为第一个条件为假会使整个语句为假。它在技术上称为“短路评估”。这就是为什么您不应该创建产生副作用的条件并假设它们在循环的每个循环中都发生`t2`。`t3`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-11T00:59:14.613

for(j=0; (t1 && t2) && (t2 && t3); j++); // 应该管用

误读了问题。不，它不会。C 使用短路评估，这意味着一旦它是错误的，它就是错误的。*

# objective-c - 泛在容器如何在 iOS 和 Mac OS X 应用程序之间工作？

> ID：14804515
> 
> 赞同：5
> 
> 时间：2013-02-11T00:58:03.017
> 
> 标签：objective-c, cocoa-touch, cocoa, icloud

我有这两个应用程序，一个 iOS 和一个 Mac OS X，每个都有不同的 Bundle ID。

为了让这两个应用程序同步和共享文件，我必须将 iOS 应用程序的 ubiquity 容器添加到 Mac OS X 应用程序中的 ubiquity 容器列表中。

在 Mac OS X 应用程序的 Xcode 摘要中，我无法将其自己的 Bundle ID 添加为普遍存在的容器。Mac OS X 应用程序会将新添加的文件存储在它自己无处不在的地方，因此 iOS 应用程序无法访问它们。

如何正确设置这两个应用程序，以便它们使用相同的通用容器共享和同步所有添加的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T21:04:35.643

要允许多个应用程序访问同一个数据存储/无处不在的容器，您需要做一些事情。首先，您需要打开您的 Xcode 项目并按照以下说明进行操作（[此处为 Apple 官方文档](https://developer.apple.com/library/mac/documentation/General/Conceptual/iCloudDesignGuide/Chapters/iCloudFundametals.html#//apple_ref/doc/uid/TP40012094-CH6-SW14)）：

1.  打开您的 Xcode 项目，然后导航到项目目标设置。单击*功能*选项卡以打开额外 Apple 服务的项目设置。 ![Xcode 5.0 项目功能](../Images/c8455f416414ab7ca21baac04d7bbcc5.png)
2.  然后打开 iCloud 选项**ON**。在您需要与之共享数据的每个应用程序中，Ubiquity Container ID 应该相同。您与之共享数据的应用程序的捆绑包 ID 不必相同，但它们都需要相同的 Ubiquity 容器 ID 和团队 ID。 ![Xcode iCloud 项目泛在容器](../Images/49ef188690d17fb032202844fb971942.png)
3.  要开始在具有相同 iCloud 容器的所有应用程序中使用 iCloud，您需要使用您的团队 ID 和容器 ID 创建 URL。苹果很好地总结了这一点：

    > 要检索 ubiquity 容器的 URL，您必须将完全限定的字符串传递给 NSFileManager 方法 URLForUbiquityContainerIdentifier:。也就是说，您必须传递您在 .entitlements 属性列表文件中看到的完整容器标识符字符串，其中包括您的团队 ID。您可以将 nil 传递给此方法以检索列表中第一个容器的 URL。

* * *

然后，在 iTunes Connect 中设置一个称为[iCloud 显示集的东西。](http://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/17_iCloud/iCloud.html)这允许您创建一个显示集 ID，然后可以在您的应用程序之间共享该 ID，以便它们可以访问相同的数据。这里有一些有用的链接可以帮助您入门：

*   [iCloud 显示器有什么用？](https://stackoverflow.com/questions/9476060/whats-the-use-of-icloud-display-sets)
*   [苹果文档](http://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/17_iCloud/iCloud.html)

以下是设置 iCloud 显示集的方法：

1.  转到 iTunesConnect 并打开“管理应用程序”部分
2.  在页面底部，点击指向 iCloud Display Sets 的链接
3.  单击`Create New`以添加显示集
4.  填写所需信息，包括 ID：
    ![在此处输入图像描述](../Images/51dbdc13e5788dbb69a3e48f637ac48e.png)

然后只需将其附加到您的应用程序！希望这有帮助，祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T20:47:25.800

对于我自己的 iOS/Mac 应用程序对，我的 iOS 应用程序带有 BundleID `com.alexanderwinn.Example`，Mac 应用程序带有`com.alexanderwinn.ExampleMac`，但它们都共享 ubiquity 容器`com.alexanderwinn.Example`。它们都没有，甚至 Mac 版本都没有基于 Mac BundleID 的通用容器。我是一个初学者，所以我不能完全详细说明一切工作和中断背后的原因，但它对我来说很好用！

# ruby-on-rails - 将 Twitter Bootstrap Carousel 添加到 Rails 应用程序

> ID：14804519
> 
> 赞同：3
> 
> 时间：2013-02-11T00:58:22.940
> 
> 标签：ruby-on-rails, carousel, twitter-bootstrap-rails

几周前我刚刚开始使用 ruby​​ on rails，我目前正在使用 rails composer（它使用 twitter-bootstrap-rails gem）构建一个博客。我想将引导轮播添加到我的应用程序视图（即我的 application.html.erb）

我已经尝试从 twitter bootstrap 文档中添加经典的 html 代码，但我只是得到了没有显示图片的左右控制器按钮。

有人有我的解决方案吗？

PS：我目前使用 Sass 进行引导设计。

编辑 02-11-2013 => 这是我的代码希望你能找到我的错误

```
<div class="container">
    <!--  Carousel -->
  <!--  consult Bootstrap docs at
        http://twitter.github.com/bootstrap/javascript.html#carousel -->
  <div id="this-carousel-id" class="carousel slide">
    <div class="carousel-inner">
      <div class="active item">
          <a><img src="assets/images/1.jpg" alt="Antennae Galaxies" /></a>

        <div class="carousel-caption">
          <p>The Antennae Galaxies</p>
          <p><a href="http://hubblesite.org/gallery/album/entire/pr2006046a/xlarge_web/npp/128/">Hubblesite.org &raquo;</a></p>
        </div>
      </div>
      <div class="item">
          <a><img src="assets/images/2.jpg" alt="Carina Caterpillar" /></a>

        <div class="carousel-caption">
          <p>Carina Nebula: The Caterpillar</p>
          <p><a href="http://hubblesite.org/gallery/album/entire/pr2007016e/xlarge_web/npp/128/">Hubblesite.org &raquo;</a></p>
        </div>
      </div>

    </div><!-- .carousel-inner -->
    <!--  next and previous controls here
          href values must reference the id for this carousel -->
      <a class="carousel-control left" href="#this-carousel-id" data-slide="prev">&lsaquo;</a>
      <a class="carousel-control right" href="#this-carousel-id" data-slide="next">&rsaquo;</a>
  </div><!-- .carousel -->
  <!-- end carousel -->
    <div class="content">
       <div class="row">
        <div class="span12">
          <%= render 'layouts/messages' %>
          <%= yield %>
        </div>
      </div>
      <footer>
      </footer>
    </div>
  </div> <!--! end of .container -->
</div> <!--! end of #main -->

<script>
$(function(){
$('#this-carousel-id').carousel();
});
</script>

</body>
</html> 
```

编辑 2：这就是它在 Chrome 上的样子：http: [//s7.postimage.org/kvp5cq4tn/Capture_d_cran_11_02_13_18_46_2.png](http://s7.postimage.org/kvp5cq4tn/Capture_d_cran_11_02_13_18_46_2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-19T18:48:09.677

代替

```
img src="assets/images/1.jpg" alt="Antennae Galaxies", 
```

为导轨使用以下图像标签：

```
link_to image_tag("1.jpg", :alt => "Slide1"), {:class => "img-responsive", :alt => "Responsive image"} 
```

并且不需要指定“assets/images”来显示图像文件夹。就够了`1.jpg`！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T11:15:03.777

您的 app/assets/javascripts/application.js 是否包含对引导程序的引用？

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
//= require_tree . 
```

我的轮播作为参考：

```
 <div class="span8 welcome-image">

                        <div id="myCarousel"
                        class="carousel slide">
                        <!-- Carousel items -->
                        <div class="carousel-inner">
                                <div class="active item">
                                        <a href="/users/sign_up"><img src="/pictures/1.png"> </a>
                                </div>
                                <div class="item">
                                        <a href="/users/sign_up"><img src="/pictures/2.png"> </a>
                                </div>
                                <div class="item">
                                        <a href="/users/sign_up"><img src="/pictures/3.png"> </a>
                                </div>
                                <div class="item">
                                        <a href="/users/sign_up"><img src="/pictures/4.png"> </a>
                                </div>
                                <div class="item">
                                        <a href="/users/sign_up"><img src="/pictures/WordcloudInsight.png"> </a>
                                </div>
                        </div>
                        <!-- Carousel nav -->
                        <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
                        <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
                </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T01:04:31.727

[Rails 中的 Bootstrap Carousel 突然停止工作](https://stackoverflow.com/questions/11812946/bootstrap-carousel-in-rails-suddenly-stopped-working)

检查上面的链接，你也添加了这个+是jquery加载

```
<script>
$(function(){
  $('#myCarousel').carousel();
});
</script> 
```

# ios - iOS 访问 parentViewController 中的属性

> ID：14804521
> 
> 赞同：2
> 
> 时间：2013-02-11T00:58:46.840
> 
> 标签：ios, properties, parentviewcontroller, childviewcontroller

尝试访问 parentViewController 中的方法时，我的应用程序崩溃。这是 StoryBoard 中的布局

![在此处输入图像描述](../Images/5304cb93e56598ffbaf835946b7b2c91.png)

MainViewController = STLMMainViewController (ParentViewController)

Scene1 = STLMTimeDateViewController (ChildViewController)

这是 STLMTimeDateViewController 的代码

```
#import "STLMTimeDateViewController.h"
#import "STLMMainViewController.h"

@interface STLMTimeDateViewController ()
@property (nonatomic, strong) STLMMainViewController *stlmMainViewController;
@end

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"The name of the controller %@",self.navigationController.parentViewController);

    stlmMainViewController= (STLMMainViewController *) self.parentViewController;
    [stlmMainViewController locationButtonSelected]; // This is where the App crashes
    NSLog(@"TimeDateController");
} 
```

应用程序运行，但调用 STLMMainViewController 时，应用程序崩溃并出现以下错误：

```
2013-02-10 16:33:57.422 MyApp[9120:c07] The name of the controller <STLMMainViewController: 0x83850d0>
2013-02-10 16:33:57.434 MyApp[9120:c07] -[UINavigationController locationButtonSelected]: unrecognized selector sent to instance 0x8371a70 
```

如果我删除以下行：

```
stlmMainViewController = (STLMMainViewController *) self.parentViewController; 
```

然后离开

```
[stlmMainViewController locationButtonSelected]; 
```

应用程序运行，没有错误，但 [STLMMainViewController locationButtonSelected] 中的以下方法没有被调用（我从未看到日志）：

```
-(void)locationButtonSelected
{
    [LocationButton setSelected:YES];
    [eatDrinkbutton setSelected:NO];
    [timeCalButton setSelected:NO];
    [carButton setSelected:NO];
    [contactButton setSelected:NO];
    NSLog(@"LocationButtonSelected Method");
} 
```

locationButtonSelected 方法中的所有属性和方法本身都在 STLMMainViewController 的 .h 中声明，以供公共访问。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T01:08:23.377

你可以试试这个：

```
self.stlmMainViewController= (STLMMainViewController *)self.navigationController.parentViewController; 
```

（编辑：实际上，正如其他人刚刚指出的那样，您可能想改用presentingViewController。）

看起来您在此之前的日志消息中就已经正确了。在这种情况下，您需要导航控制器的父级。

顺便说一句，删除此行时不会崩溃的原因是因为您最终将其发送`locationButtonSelected`到 nil。这不会崩溃，但它也不会做任何事情。

# java - 在java中创建一个三维锯齿状数组来存储不同大小的二维数组

> ID：14804525
> 
> 赞同：-1
> 
> 时间：2013-02-11T00:58:55.277
> 
> 标签：java

假设我在 java 中表示矩阵的二维数组少于十个。每个数组从 0 到 6 枚举。每个数组的 n*2^enumval 更大，其中 n 是第 0 个枚举数组中的元素数，因此我的多维几乎是金字塔形的，因此需要一个锯齿状的三维数组。是否可以创建一个锯齿状的三维数组？

```
int[][] array0 = new int[2][2];
int[][] array1 = new int[4][4];
int[][] array2 = new int[8][8];
int[][] array3 = new int[16][16];
int[][][] arrayStorage = new int[][][]; 
```

我想用以下方法存储数组：arrayStorage[columnOfArray#][rowOfArray#][#]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:54:43.743

Java*仅*支持锯齿状数组。您正在寻找的 3D 数组的示例（使用“矩阵”的“列表”作为更相关的具体示例）：

```
// an array of m*n (or jagged) 2D arrays.
int[][][] matrices = new int[2][][];

// A 2*2 matrix
int[][] matrix22 = new int[2][];
matrix22[0] = new int[] {1, 2};
matrix22[1] = new int[] {3, 4};

matrices[0] = matrix22;

// A 3*3 matrix
int[][] matrix33 = new int[3][];
matrix33[0] = new int[] {1, 2, 3};
matrix33[1] = new int[] {4, 5, 6};
matrix33[2] = new int[] {7, 8, 9};

matrices[1] = matrix33; 
```

或者，打了一个声明：

```
int[][][] matrices2 = new int[][][] {
    new int[][] {
        new int[] {1, 2},
        new int[] {3, 4}
    },
    new int[][] {
        new int[] {1, 2, 3},
        new int[] {4, 5, 6},
        new int[] {7, 8, 9}
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T01:02:05.147

是的，在 Java 中创建一个锯齿状数组是完全可能的。

这是它的一些示例语法：

```
 int[][] jagged = new int[3][];
   jagged[0] = new int[]{1, 2, 4};
   jagged[1] = new int[]{9, 17, 35, 80};
   jagged[2] = new int[]{100}; 
```

在此，我有一个三行的锯齿状数组，但列的数量不确定。它们的长度从 1 到 4 不等。

# android - getParentFragment 返回 null

> ID：14804526
> 
> 赞同：36
> 
> 时间：2013-02-11T00:58:57.223
> 
> 标签：android, android-fragments, android-nested-fragment

我有一个`Fragment`有一个`FrameLayout`。第一个片段 (A) 在其 Framelayout 中加载另一个片段 (B)。当我`getParentFragment`从内部片段（B）调用时，我得到`null`. 这种方法应该如何正确使用？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-11T01:08:06.817

getParentFragment() 是在 API 级别 17 (Android 4.2) 中引入的。Android 4.2 引入了嵌套片段（包含其他片段的片段）的思想。如果片段的父级是 Activity，则调用它会导致 null。

看看[这个](http://developer.android.com/reference/android/app/Fragment.html#getParentFragment%28%29)。

如果您正在使用支持库，那么您可以使用 getParent()，可能在进行片段事务时需要使用 getChildFragmentManager()。看到[这个](http://developer.android.com/reference/android/support/v4/app/Fragment.html#getParentFragment())

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-09-29T10:54:40.733

就我而言，虽然我的fragmentA嵌套在fragmentB中，但是在FragmentA中调用getParentFragment后我仍然得到null。最后我发现我应该在 FragmentB 中使用 getChildFragmentManager 而不是 getFragmentManager。

检查这个[getSupportFragmentManager() 和 getChildFragmentManager() 有什么区别？](https://stackoverflow.com/questions/14740445/what-is-difference-between-getsupportfragmentmanager-and-getchildfragmentmanag)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-21T04:07:28.503

有帮助的一件事是，在创建适配器时使用`getChildFragmentManager()`.

如果您不使用适配器，只需`getChildFragmentManager()`在进行事务时使用。

`setTargetFragment()`不推荐，因为它会给出`moveState()`片段错误（因为片段应该绑定到 FragmentManager）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-12-05T09:44:25.180

我遇到了同样的问题，并通过在您的父片段中托管第二个片段来解决问题，`getChildFragmentManager()`然后您将不会获得空值......

父片段

```
 SignUpFragment signUpFragment = new SignUpFragment();
    getActivity().getSupportFragmentManager().beginTransaction().replace(R.id.contentPanel, signUpFragment)
            .addToBackStack(null).commit(); 
```

子片段：我使用的是一个对话框

```
 HospitalCardDialog hospitalCardDialog = new HospitalCardDialog();
    hospitalCardDialog.show(getChildFragmentManager(), ""); 
```

# c++ - Win32 C++ 在运行时为 MenuItem 分配/更改加速键

> ID：14804532
> 
> 赞同：0
> 
> 时间：2013-02-11T00:59:33.647
> 
> 标签：c++, winapi, mfc, key, accelerator

我想为在 C++ 中运行时没有加速键的菜单项分配加速键并能够更改它。我浏览了文档和 MSDN，但我不清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T07:11:08.220

您需要管理自己的加速器表。

您可以从 ACCEL 结构数组创建资源表，填充它们并将其传递给 CreateAcceleratorTable。或者您可以通过 LoadAccelerators 从资源中加载它们。这为您提供了 HACCEL 句柄。在您的主消息循环中，在 TranslateAccelerator 调用中使用此 HACCEL 句柄。

当需要编辑加速器时，如果您不再拥有 ACCEL 数组，请使用 HACCEL 句柄调用 CopyAcceleratorTable 以取回 ACCEL 数组。根据需要编辑此数组，然后使用 CreateAcceleratorTable 重新创建一个新的 HACCEL 句柄并删除旧的句柄。在下一次更改之前，请将此新句柄用于加速器。

您的 WndProc 将获得这些加速器的消息。在消息处理程序中调用菜单操作处理程序的实现。

# android - 将 findFragmentById 与 ViewPager 一起使用

> ID：14804535
> 
> 赞同：3
> 
> 时间：2013-02-11T00:59:58.960
> 
> 标签：android, android-fragments, android-viewpager

我的应用程序有一个列表和详细视图，我允许用户在不同的详细视图之间滑动，使用`ViewPager`纵向。在横向中，我在屏幕上显示两个片段。

我遇到了一个问题，当设备旋转时，图标在`Actionbar`. 我了解到，每当设备旋转时，我可能会创建新的片段，我应该检查片段是否在其中`FragmentManager`，如果不是，则创建一个新实例。

我可以使用横向布局轻松做到这一点，但是，我不确定如何使用`ViewPager`. 我会这样做`getItem()`吗`FragmentStatePagerAdapter`？

这是我正在使用的代码：

```
public class Main extends SherlockFragmentActivity
{
    private static List<Integer> mIds;

    @Override
    public void onCreate(final Bundle icicle)
    {    
        super.onCreate(icicle);

        setContentView(R.layout.main);

        mViewPager = (ViewPager)findViewById(R.id.viewpager); //view pager exists, so we are using the portait layout

        if (mViewPager != null)
        {
            mIds = new ArrayList<Integer>();

            mIds.add(0);
            mIds.add(1);
            mIds.add(2);
        }
        else //in landscape
        {           
            ListFragment lf = (ListFragment)getSupportFragmentManager().findFragmentById(R.id.fragmentList);

            if (lf == null)
                lf = new ListFragment();

            DetailFragment df = (DetailFragment)getSupportFragmentManager().findFragmentById(R.id.fragmentDetail);

            if (df == null)
            {
                df = new DetailFragment();
                df.setArguments(getIntent().getExtras());   
            }

            getSupportFragmentManager().beginTransaction().add(R.id.fragmentList, lf).commit();
            getSupportFragmentManager().beginTransaction().add(R.id.fragmentDetail, df).commit();
        }
    }       

    private static class MyFragmentPagerAdapter extends FragmentStatePagerAdapter  {  

        public MyFragmentPagerAdapter(FragmentManager fm) {  
             super(fm);  
        }  

        @Override  
        public Fragment getItem(int index) {        
            //can't use getSupportFragmentManager().findFragmentById() here because I get a "Cannot make a static reference to the non-static method" error
            if (index == 0)
                return ListFragment.newInstance();
            else            
                return DetailFragment.newInstance(mIds.get(index-1));
        }  

        @Override
        public int getCount() {  
             return 4;
        }
   }  
} 
```

**主布局（纵向）**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent">

    <android.support.v4.view.ViewPager
        android:id="@+id/viewpager"
        android:layout_height="match_parent"
        android:layout_width="match_parent"
     />
 </RelativeLayout> 
```

**主布局（横向）**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:weightSum="3"
>
    <FrameLayout 
        android:id="@+id/fragmentList"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
     />

    <FrameLayout 
        android:id="@+id/fragmentDetail"
        android:layout_width="0dp"
        android:layout_weight="2"
        android:layout_height="fill_parent"
     />

</LinearLayout> 
```

**列出片段**

```
public class ListFragment extends SherlockListFragment implements DialogKeywordAddListener
{
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);

        setHasOptionsMenu(true);
    }

    public static ListFragment newInstance() {

        return new ListFragment();
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);

        return inflater.inflate(R.layout.listing, container, false);
    }
} 
```

**细节片段**

```
public class DetailFragment extends SherlockListFragment
{
    private int mId;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);

        setHasOptionsMenu(true);
    }

    public static DetailFragment newInstance() {

        DetailFragment df = new DetailFragment();
        Bundle bundle = new Bundle();
        bundle.putInt("id", id);
        df.setArguments(bundle);

        return df;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);

        if (getArguments() != null)
            mId = getArguments().getInt("id");

        return inflater.inflate(R.layout.detail, container, false);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T20:24:17.527

好吧，[这个问题的](https://stackoverflow.com/questions/5164126/retain-the-fragment-object-while-rotating)解决方案似乎对我有用。只是设置：

```
 super.onCreate(null); 
```

解决了我`onCreate`的`Activity`片段问题。

# r - “选择了未定义的列” - 当试图从列表中的 df 中删除 na 时

> ID：14804539
> 
> 赞同：2
> 
> 时间：2013-02-11T01:00:24.107
> 
> 标签：r, list, lapply, na

我正在尝试复制此解决方案的成功：

[从列表中的所有数据框中删除具有 NA 的列](https://stackoverflow.com/questions/11797621/remove-columns-with-nas-from-all-dataframes-in-list)

或者

[从数据框中删除某些值为 NA 的列](https://stackoverflow.com/questions/12454487/remove-columns-from-dataframe-where-some-of-values-are-na)

带有数据框列表：

```
m1<- structure(list(vPWMETRO = c(1520L, 1520L, 1520L, 1520L, 1520L), 
               vPWPUMA00 = c(500L, 900L, 1000L, 1100L, 1200L), 
               v100 = c(96.1666666666667, 71.4615384615385, 68.6363636363636, 22.5, 64.5), 
               v101 = c(5, 15, NA, NA, NA),
               v102 = c(NA_real_, NA_real_, NA_real_, NA_real_, NA_real_)),
          .Names = c("vPWMETRO", "vPWPUMA00", "v100", "v101", "v102"), 
          row.names = 26:30, class = "data.frame")

m2<- structure(list(vPWMETRO = c(6440L, 6440L, 6440L, NA, NA), 
               vPWPUMA00 = c(1300L,2100L, 2200L, NA, NA), 
               v100 = c(38.3921568627451, 35, 12.5, NA, NA), 
               v101 = c(NA, NA, NA, NA, NA), 
               v102 = c(38.3333333333333, 68, NA, NA, NA)), 
               .Names = c("vPWMETRO", "vPWPUMA00", "v100", "v101", "v102"), 
          row.names = c("39", "40", "41", "NA", "NA.1"), class = "data.frame")
#views structure
str(m1)
str(m2)

#creates list
snag<- list(v1520=m1, v6440=m2)
str(snag)
#attempts lapply solution
prob1<- lapply(snag, function(y) y[ ,!is.na(y)])

#2nd attempt, same result on just dataframe:
x5$v6440[ , apply(x5$v6440, 2, function(x) !(is.na(x)))] 
```

这样包含所有 NA 的列都会在数据框中删除。因此结果应该是 2 个 df 的列表：

v1520：vPWPUMA00、v100、v101

v6440：vPWPUMA00、v100、v102

我看到示例问题的不同之处在于尺寸是 1x11，而我的尺寸是 5x5。我猜这会导致“未定义的列”错误，但我不确定。

任何帮助或建议将不胜感激。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:10:15.687

我不认为你正在寻找完全正确的问题和答案。

请参阅[从所有值为 NA 的数据框中删除列](https://stackoverflow.com/questions/2643939/remove-columns-from-dataframe-where-all-values-are-na/12614723#12614723)，这似乎是您想要的。

然后你可以修改[我的答案](https://stackoverflow.com/a/12614723/1385941)给

```
lapply(snag, Filter, f = function(x){!all(is.na(x))})

$v1520
   vPWMETRO vPWPUMA00     v100 v101
26     1520       500 96.16667    5
27     1520       900 71.46154   15
28     1520      1000 68.63636   NA
29     1520      1100 22.50000   NA
30     1520      1200 64.50000   NA

$v6440
     vPWMETRO vPWPUMA00     v100     v102
39       6440      1300 38.39216 38.33333
40       6440      2100 35.00000 68.00000
41       6440      2200 12.50000       NA
NA         NA        NA       NA       NA
NA.1       NA        NA       NA       NA 
```

# android - 在 Android 的“最近”屏幕上更改任务图片？

> ID：14804546
> 
> 赞同：1
> 
> 时间：2013-02-11T01:02:25.293
> 
> 标签：android, screen, task

看起来 Android 手机中的“最近”屏幕拍摄了之前运行的应用程序的快照。有什么方法可以控制这里显示的图片吗？

![有效的 XHTML](../Images/47717ca46997880f1e2f6e7e2be82f7f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:32:43.080

在 ActivityStack（位于 ActivityManagerService 中）中，SystemService 在 Activity 进入暂停状态时保存位图图像。

请参阅[https://android.googlesource.com/platform/frameworks/base/+/master/services/java/com/android/server/am/ActivityStack.java](https://android.googlesource.com/platform/frameworks/base/+/master/services/java/com/android/server/am/ActivityStack.java)并查看 screenshotActivities() 方法。

并且无法使用公共 SDK api 修改最近应用列表中的活动截图。

如果你可以修改 android 平台源，hack ActivityStack 或 WindowManagerService。

# android - Android：手机移动时播放音频时耳机上会听到咔嗒声

> ID：14804549
> 
> 赞同：0
> 
> 时间：2013-02-11T01:02:51.013
> 
> 标签：android, audio, noise, headphones, clicking

我编写了一个从 WiFi 接收音频并播放的 Android 应用程序。当手机静止不动时，音频质量很好。但是当我在连接耳机时特别移动手机时，我会听到咔哒声。我想知道这是否是可以在应用程序中缓解的已知问题？例如，由于 Android 知道耳机是否已连接，如果插孔不是很稳定和摇晃，它可能会产生一些中断并导致这种咔嗒声？顺便说一句，我正在测试的手机是 HTC Inspire 4g。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:25:42.593

为了他人的利益：经过一番调查，似乎不是耳机插孔，而是wifi链接发生了变化。当我将手机握在手中并快速移动时，似乎 wifi 链接在短时间内变得非常弱，并且我失去了一段时间的链接，这会导致咔嗒声。

# c++ - 我可以在函数的结果上使用 std::move 来构造一个新对象吗？

> ID：14804554
> 
> 赞同：4
> 
> 时间：2013-02-11T01:03:23.447
> 
> 标签：c++, c++11, move-semantics

有人可以确认从该函数出来的字符串是否实际上会被移动到成员变量中？

```
class Foo {
private:
  const std::string m_complex_str;

  std::string create_complex_str() {
    return std::string("some huge string");
  }

public:
  Foo() : m_complex_str(std::move(create_complex_str())) { }
}; 
```

这是正确的方法吗？

也许大多数编译器会在没有移动功能的情况下为我做这件事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T01:29:03.110

是的，它会被正确移动，因为`std::string`构造函数支持`std::move`，返回值`create_complex_str()`是一个纯右值，可以安全地`move`'d。事实上，`std::move`即使你自己不做也会自动调用（放一个断点看看）——除非可以执行进一步的优化。但是如果你打电话给`std::move`自己，你可能会阻止编译器通过复制省略/RVO等进一步优化。

编译器将在适用的情况下为您[消除不必要的副本。](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)只需编写您的代码（不要成为早期优化的牺牲品！）以使编译器清楚您的代码应该具有什么*逻辑*结果的方式来执行您希望它执行的操作，并让它担心优化。所有编译器都对此类案例进行了大量研究、记录和优化。

如果将来您需要更高性能的代码，您应该首先分析并找到瓶颈的确切位置（通常*不是*您认为可能的位置），然后才开始使用hackery使其工作更快/更好。

# objective-c - 将对象添加到绑定的 NSTableView - 核心数据应用程序

> ID：14804555
> 
> 赞同：0
> 
> 时间：2013-02-11T01:03:37.937
> 
> 标签：objective-c, cocoa, core-data, binding, nsarraycontroller

我有一个使用核心数据的应用程序。其模型有 3 个实体，全部通过 1-many 关系连接，如下所示：

|E1|<-->>|E2|<-->>|E3|

我的 UI 本质上是一个 3 向垂直拆分窗格，每个窗格中都有一个 tableview。它的工作方式是我让每个窗口递增 1 层，基本上允许用户从 E1 对象“向下钻取”到 E3 对象，所有通过关系链接，类似于 OSX finder 中的选项。

每个表都由 NSArrayController 填充，从相关实体获取数据，以及在前一个“向下钻取”窗口中选择的数据。如果我只是将一个按钮连接到数组控制器的 addObject 方法，这一切都很好，但是它创建的新对象是一个空白行，我必须手动填写。

我已经连接了添加按钮来打开一个“打开对话”，它允许用户选择文件。然后我遍历返回的 NSURL 数组，并将文件信息添加到核心数据模型的 E3 实体中。我调用了保存，但 UI 中没有显示任何内容。我猜这与我添加的对象无法知道它属于哪个 E2 的事实有关，因此没有显示。

**有没有办法通过关系将对象添加到核心数据模型中？例如，我可以看到在 E2 中选择了哪个对象，然后添加与此有关系的对象。我希望我已经说得够清楚了。欢迎任何想法或建议！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:31:05.393

我通过创建一个对象、设置它的属性、然后在数组控制器上调用 addObject:id 来对此进行排序。

希望这可以帮助某人。

# intellij-idea - IntelliJ IDEA v12 中的警告

> ID：14804556
> 
> 赞同：5
> 
> 时间：2013-02-11T01:04:29.547
> 
> 标签：intellij-idea

[如何让 Intellij Idea 显示编译警告](https://stackoverflow.com/questions/4745415/how-to-get-intellij-idea-to-display-compilation-warnings)的答案？不再适用于版本 12。据我所知，不再有消息面板。

如何查看版本 12 中项目中所有警告的完整列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T01:18:30.887

This option and the `Messages` panel is on the same place as before in IDEA 12.0.3:

![panel](../Images/24b29e0ff5f500271493b898b205f1ad.png)

If you don't see it, it means that your project has no errors. Make any error and the panel will appear. Verify that `Hide warnings` is not enabled. Fix the error, Make the project again, you should see only warnings:

![warnings](../Images/66efe2097b1077d7504b456e55040d40.png)

Note that Make is incremental, if there were no changes, it will not compile and report any old warnings, so you may need to **Rebuild** to see all of them.

# c++ - 使用 Visual Studio 2012 的可变参数模板出错

> ID：14804557
> 
> 赞同：1
> 
> 时间：2013-02-11T01:04:31.353
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, variadic-templates

我有 Microsoft Visual C++ Compiler Nov 2012 CTP (v120_CTP_Nov20..)，但是当我尝试使用可变参数模板时，我收到此错误：

```
error C3546: '...' : there are no parameter packs available to expand 
```

他们甚至还支持吗？我已经正确设置为使用项目选项中的新工具链和所有内容......

```
 template<typename... T>
  void Event<T...>::operator()(T... args)
  {
   for(uint i = 0; i < _listHandlers.Size(); i++)
   {
    (_listHandlers)[i](args...);
   }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T05:28:41.613

您是从 Project Properties 中选择的吗？

检查[VS 2012 中的可变参数模板（Visual C++ 2012 年 11 月 CTP）](https://stackoverflow.com/questions/13238408/variadic-template-in-vs-2012-visual-c-november-2012-ctp)。

它在我的电脑上运行良好。

# android - FragmentTabHost & Fragments - 如何在选项卡之间传递数据？

> ID：14804560
> 
> 赞同：5
> 
> 时间：2013-02-11T01:04:43.400
> 
> 标签：android, android-fragments, android-tabhost, android-fragmentactivity

我有一个具有 FragmentTabHost 的 MainActivity (FragmentActivity)。

```
public class FragmentTabs extends FragmentActivity {
    private FragmentTabHost mTabHost;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.fragment_tabs);
        mTabHost = (FragmentTabHost)findViewById(android.R.id.tabhost);
        mTabHost.setup(this, getSupportFragmentManager(), R.id.realtabcontent);

        mTabHost.addTab(mTabHost.newTabSpec("classA").setIndicator("Class A"),
            ClassA.class, null);
        mTabHost.addTab(mTabHost.newTabSpec("classB").setIndicator("Class B"),
            ClassB.class, null);
        mTabHost.addTab(mTabHost.newTabSpec("classC").setIndicator("Class C"),
            ClassC.class, null);
    }
} 
```

ClassA、ClassB 和 ClassC 都是**Fragment** (android.support.v4.app.Fragment)。

我需要在片段上传递数据（和调用方法）。如何获得每个片段的参考，如下所示：

```
ClassA mClassAFragment = ???; 
```

我尝试过使用 getSupportFragmentManager().findFragmentByTag()，也尝试过探索 mTab​​Host 的功能。没有什么能得到它们。

你能建议一种方法来做到这一点或建议一种替代方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T02:36:42.913

在这里。为了解决这个问题，我在 FragmentActivity 中重载了 onAttachFragment 方法：

```
public class FragmentTabs extends FragmentActivity {
    private FragmentTabHost mTabHost;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        ...
    }

    @Override
    public void onAttachFragment(Fragment fragment) {
    super.onAttachFragment(fragment);

    if (fragment.getClass() == ClassA.class) {
        ClassA mClassAFragment = (ClassA)fragment
            ...
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T01:42:50.727

你可以像这样得到你的片段：

```
YourFragment frag = (YourFragment) getSupportFragmentManager()
                    .findFragmentById(R.id.fragmentid)); 
```

要将数据发送到片段，您可以遵循这种方法，创建一个新事务并通过捆绑发送数据。

```
Bundle arguments = new Bundle();
arguments.putString("some id string", "your data");
YourFragment fragment = new YourFragment();
fragment.setArguments(arguments);
getSupportFragmentManager().beginTransaction().add(R.id.fragmentid, fragment).commit(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-16T11:06:55.603

这可以通过**android.support.v4.app.FragmentTabHost.addTab(TabSpec, Class, Bundle *args* )**的第三个参数来完成，然后可以通过**android.support.v4.app.Fragment.getArguments()检索 args**

```
public class Tab1Fragment extends BaseFragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // do something with the arguments
    Log.i("DEBUG", "" + getArguments());
    // ...
} 
```

}

# javascript - 将具有特殊值的 JSON 对象作为字符串加载

> ID：14804570
> 
> 赞同：2
> 
> 时间：2013-02-11T01:06:09.213
> 
> 标签：javascript, python, json

我正在尝试创建一个字符串 JSON 对象以使用该`json`模块加载；但是，我遇到了一些麻烦，因为我的一些值是 python`True`而`False`不是 unicode 字符串。例如，我想做以下事情：

```
>>> newDict = json.loads(u'{"firstKey": True, "secondKey": False}')
>>> newDict.get('firstKey') == True
True 
```

但我得到：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib64/python2.6/json/__init__.py", line 307, in loads
    return _default_decoder.decode(s)
  File "/usr/lib64/python2.6/json/decoder.py", line 319, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib64/python2.6/json/decoder.py", line 336, in raw_decode
    obj, end = self._scanner.iterscan(s, **kw).next()
  File "/usr/lib64/python2.6/json/scanner.py", line 55, in iterscan
    rval, next_pos = action(m, context)
  File "/usr/lib64/python2.6/json/decoder.py", line 185, in JSONObject
    raise ValueError(errmsg("Expecting object", s, end))
ValueError: Expecting object: line 1 column 13 (char 13) 
```

当然，如果我将`True`and更改`False`为`"True"`and `"False"`，我的条件也不满足，因为它们现在是字符串并且`False`将被返回。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T01:12:58.090

可以使用小写`true`和`false`吗？

```
>>> import json
>>> d = {'firstKey': True, 'secondKey': False}
>>> json.dumps(d)
'{"secondKey": false, "firstKey": true}'
>>> s = json.dumps(d)
>>> json.loads(s) == d
True 
```

# c# - 设置 AssemblyFileVersion 不起作用

> ID：14804571
> 
> 赞同：0
> 
> 时间：2013-02-11T01:06:13.370
> 
> 标签：c#

我想将我的程序集文件版本设置如下：**6.0.ddMMyy.build number**但它似乎不起作用，我认为这是由于版本号只接受某些值造成的。

例子：

```
[assembly: AssemblyFileVersion("6.0.100213.1")] 
```

每当编译程序集时，都会产生以下版本号：

```
6.0.34677.1 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T01:25:17.513

100213 - 34677 = 65536。一个幻数，2^16 和 ushort.MaxValue。版本号的 4 部分必须具有介于 0 和 65535 之间的值。

存储构建日期的另一个约定是选择任意日期 0 并计算自该日期以来的小时数或天数。这就是微软所做的。.NET 2.0 是 2.0.50727 版本，日期为 0，日期为 2000 年 1 月 1 日。新的 DateTime(2000, 1, 1) + TimeSpan.FromHours(50727) = 2005 年 10 月 14 日，下午 3 点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T01:24:34.520

这是因为编译器在创建内部版本号时正在操作值 (100213)。限制为 16 位值。此[链接](http://blogs.msdn.com/b/msbuild/archive/2007/01/03/why-are-build-numbers-limited-to-65535.aspx)描述了错误/问题。

# c++ - 在另一个向量中搜索子向量

> ID：14804573
> 
> 赞同：1
> 
> 时间：2013-02-11T01:06:46.640
> 
> 标签：c++, vector, stl

我有一个 std::vector (haystack)，我想在其中查找另一个 std::vector。是否有一个 STL 算法已经做到了，或者我必须编写一个字符串匹配算法。

haystack 向量具有（有时）二进制文件的内容，我想查找一些感兴趣的字符串。转换为 std::string 可能是也可能不是一个选项，因为 haystack 向量可能有二进制数据。

# ember.js - Ember js在窗口卸载之前保存数据

> ID：14804576
> 
> 赞同：1
> 
> 时间：2013-02-11T01:07:06.313
> 
> 标签：ember.js, savechanges, window.onunload

我想在用户离开页面之前保存用户进度。在 Ember.js (v 1.0.0-pre.4) 中执行此操作的最佳方法是什么？

在纯 JQuery 中，它看起来像：

```
 $(window).unload(function() { 
    ajaxSaveUserProgress();
    return true;
  }); 
```

在 Ember 中，我试图做这样的事情：

```
 Exam.TestView = Ember.View.extend({

    unload: function(event){
      controller.ajaxSaveUserProgress(); // call controller method
      console.log('UNLOADED'+get(this, 'controller.test'));
    }
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T01:43:49.573

就我个人而言，我会将此代码放在 中`ApplicationRoute`，因为我相信`ApplicationRoute`'`setupController`仅在应用程序首次初始化时执行一次。您必须仔细检查这一点，但这是我的理解。

我已经注释掉了您想要的代码，因为我还演示了如何将 AJAX 请求设置为同步，否则窗口将关闭并且您的 AJAX 请求不会完成。我们自然需要在窗口关闭之前等待它完成。

```
App.ApplicationRoute = Ember.Route.extend({
    setupController: function() {
//        var controller = this.controllerFor('foo');
//        controller.ajaxSaveUserProgress();

        jQuery(window).on('unload', function() {
            jQuery.ajax({ type: 'post', async: false, url: 'foo/bar.json' });
        });
    }
}); 
```

*请忽略我的`jQuery`而不是`$`（个人喜好！）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T03:18:44.120

Ember 现在有一个标准的方法来处理这个问题。 [从文档：](http://guides.emberjs.com/v1.10.0/routing/preventing-and-retrying-transitions/)

```
App.FormRoute = Ember.Route.extend({
  actions: {
    willTransition: function(transition) {
      if (this.controller.get('userHasEnteredData') &&
          !confirm("Are you sure you want to abandon progress?")) {
        transition.abort();
      } else {
        // Bubble the `willTransition` action so that
        // parent routes can decide whether or not to abort.
        return true;
      }
    }
  }
}); 
```

# python - 将元素的文本内容复制到空的兄弟元素

> ID：14804580
> 
> 赞同：0
> 
> 时间：2013-02-11T01:07:30.040
> 
> 标签：python, xml, elementtree

我现在使用 ElementTree 已经有一段时间了，我正在尝试一些事情但没有取得多大成功。我得到了这个树之王的 XML 文件：

```
<root>
   <page>
       <revision>
            <username>Name</>
            <ID>124</>
            <Adress_ip></>
       <revision>
            <username></>
            <ID>125</>
            <Adress_ip>192.168.0.1</> 
```

我想要做的是将用户名和 Adress_ip 放在同一个元素中。更准确地说，我正在尝试，当用户名为空时，用 Adress_IP 中的文本填充它。总是有另一个价值，永远不会同时在同一个元素中。

到目前为止，我正在尝试一些看起来像这样的代码。问题？该脚本不想在 if 语句中执行此操作，因此将所有没有用户名的元素留空。当然，这不是我所希望的。

```
for contributor in tree.iter("revision"):
    for username in contributor.findall('username'):
        vide = username.text.find("")
        if username.text == vide:
            for userip in contributor.findall('ip'):
                revision.set('username', userip.text)
        else:        
            revision.set('username', username.text) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:58:19.307

> 该脚本不想在 if 语句中执行此操作，因此将所有没有用户名的元素留空。

这一点，

```
vide = username.text.find("")
if username.text == vide: 
    ... 
```

不工作；它不测试是否`username`为空。只需使用

```
if username.text == None:
    ... 
```

* * *

> 我想要做的是将用户名和 Adress_ip 放在同一个元素中。更准确地说，我正在尝试，当用户名为空时，用 Adress_IP 中的文本填充它。总是有另一个价值，永远不会同时在同一个元素中。

输入 XML (revisions.xml)：

```
<root>
  <page>
    <revision>
      <username>Name</username>
      <ID>124</ID>
      <Adress_ip></Adress_ip>
    </revision>     
    <revision>
      <username></username>
      <ID>125</ID>
      <Adress_ip>192.168.0.1</Adress_ip>
    </revision>     
  </page>
</root> 
```

蟒蛇程序：

```
from xml.etree import ElementTree as ET

tree = ET.parse("revisions.xml")

for revision in tree.iter("revision"):
    username = revision.find('username')
    Adress_ip = revision.find('Adress_ip')
    if username.text == None:           
        username.text = Adress_ip.text

print ET.tostring(tree.getroot()) 
```

输出：

```
<root>
  <page>
    <revision>
      <username>Name</username>
      <ID>124</ID>
      <Adress_ip />
    </revision>     
    <revision>
      <username>192.168.0.1</username>
      <ID>125</ID>
      <Adress_ip>192.168.0.1</Adress_ip>
    </revision>     
  </page>
</root> 
```

# php - 使用一个 http 请求从服务器获取多个资源文件

> ID：14804583
> 
> 赞同：-1
> 
> 时间：2013-02-11T01:08:04.737
> 
> 标签：php, javascript, html

我正在尝试使用一个 http 请求从服务器获取多个资源文件。每个 http 请求的资源文件集都不同。因此需要动态创建 zip 文件。

到目前为止，我最好的想法是：

step1：使用 php 创建一个包含所需资源文件的 zip 文件。类似于这个[http://davidwalsh.name/create-zip-php](http://davidwalsh.name/create-zip-php)

step2：在浏览器中将.zip文件发送到客户端并解析文件。

这是最好的方法吗？如何将 zip 文件传递​​给 javascript，以及如何存储 zip 文件的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T01:47:50.517

HTTP[已经支持](http://en.wikipedia.org/wiki/HTTP_compression)gzip 压缩：

GZIP 通常更有效地压缩文件中的冗余部分，当您拥有包含相似或重复信息的文件时，它会产生更好的压缩效果。

GZIP 支持：[http ://www.vervestudios.co/projects/compression-tests/results](http://www.vervestudios.co/projects/compression-tests/results)

由于您需要*多个*文件，因此您应该在对它们进行 gzip 压缩之前将它们一起 tar，这可以通过 PHP 和[PEAR 的 tar 归档支持](http://pear.php.net/package/Archive_Tar/redirected)来完成。然后您[可以使用 javascript 解压缩文件，](http://fhtr.blogspot.com/2010/05/parsing-tarballs-with-javascript.html)浏览器会自动处理 gzip 解压缩。

这是一篇关于 zip 和 gzip 之间区别的文章：

> 概括：
> 
> 1.  与 ZIP 相比，GZIP 可以实现更好的压缩。
>     
>     
> 2.  ZIP 能够归档和压缩多个文件，而 GZIP 仅能够压缩。
>     
>     
> 3.  您可以轻松地从大型 ZIP 文件中提取单个文件，但不能从 GZIP tarball 中提取。
>     
>     
> 4.  ZIP 在 Windows 上相当流行，而 GZIP 在类 UNIX 操作系统上更流行。

[http://www.differencebetween.net/technology/difference-between-zip-and-gzip/](http://www.differencebetween.net/technology/difference-between-zip-and-gzip/)

# ios - 第一个 CAAnimation 程序出错

> ID：14804585
> 
> 赞同：0
> 
> 时间：2013-02-11T01:08:10.790
> 
> 标签：ios, cocoa-touch, caanimation

这就是所谓的：

```
-(IBAction)preform:(id)sender{
 CALayer *layer = [CALayer layer];
 [layer setPosition:CGPointMake(100.0, 100.0)];
 [layer setBounds:CGRectMake(0.0, 0.0, 50.0, 60.0)];
 [layer setBackgroundColor:[[UIColor redColor] CGColor]];
 [self.view.layer addSublayer:layer];

 CABasicAnimation *animation = [CABasicAnimation animation];
 [animation setFromValue:[NSValue valueWithCGPoint:CGPointMake(100.0, 100.0)]];
 animation.toValue = [NSValue valueWithCGPoint:CGPointMake(100.0, 250.0)];
 [layer addAnimation:animation forKey:@"position"];
} 
```

这是错误：我对 IOS 动画知之甚少，不知道该怎么做

[http://i.stack.imgur.com/IMu0F.png](http://i.stack.imgur.com/IMu0F.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T01:15:00.620

您必须将框架 QuartzCore 添加到您的项目中。

这是如何.. [https://stackoverflow.com/a/6961788/1518182](https://stackoverflow.com/a/6961788/1518182)

# xaml - 如何在 Visual Studio 2012 设计视图中的页面编辑模式和模板编辑模式之间切换？

> ID：14804587
> 
> 赞同：4
> 
> 时间：2013-02-11T01:08:22.780
> 
> 标签：xaml, visual-studio-2012, expression-blend, blend

在 VS 2012 中使用设计视图时，如果您右键单击一个元素并从**Edit Template**或**Edit Additional Templates**中选择一个模板，它会将您带到设计器中的一个新视图。

这可能是一个愚蠢的问题，但我如何导航回主视图？

在 Blend 中，我只使用模板名称旁边的小向上箭头，但在 VS 中似乎不存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T07:29:50.880

返回的一种方法是双击模板区域外的画板。

另一个更符合您从 Blend 中习惯的内容，可以在 Document Outline 面板中找到。有那个小箭头。

![在此处输入图像描述](../Images/9e33e5a43a20c6b317510e0d89a36c43.png)

# coffeescript - 在咖啡脚本中转义“this”或@字符

> ID：14804589
> 
> 赞同：0
> 
> 时间：2013-02-11T01:08:31.723
> 
> 标签：coffeescript

访问 Web API 我收到类似于以下内容的 JSON 响应：

`example: { @param: 1 }`

在javascript中，我可以使用coffeescript访问它，`example.@param`但在coffeescript中，`@`它是一个保留字和一个快捷方式，`this`因此它会引发错误“Parse error on line #: Unexpected '@'”。

我怎样才能访问这个变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:11:32.563

使用这个符号：

```
example['@param'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T01:13:42.283

在咖啡脚本中

```
e={"@param":1} 
```

然后

```
e["@param"] # get @param value 
```

`e={@param:1}`如果@param 没有被引号包围，则它是无效的 javascript，它将是一个有效的 json，因为在 json 中必须引用键。

# java - 我怎样才能解析这种文本？

> ID：14804591
> 
> 赞同：1
> 
> 时间：2013-02-11T01:08:59.913
> 
> 标签：java, regex, parsing, pattern-matching, matcher

这是我的文本的格式：

```
15no16no17yes the parents who have older children always tell you the next stage is worse.18yes using only their hands and feet make some of the worst movies in the history of the world.19no 
```

所以基本格式是这样的：

`number` `yes|no` `text(may/may not be there)`重复

`yes`or之后的文本`no`可以为空，也可以以空格开头。（我试图在上面说明这一点）。

我的代码适用于这种格式： `number` `yes|no`重复

更多要解析的文本示例：

```
30no31yesapproximately 278 billion miles from anything.32no33no34no
30no31yesapproximately 278 billion miles from anything32no33yessince the invention of call waiting34yesGravity is a contributing factor in 73 percent of all accidents involving falling objects.
35yesanybody who owns hideous clothing36yes if you take it from another person's plate37yes172 miles per hour upside down38yesonly more intelligent39yes any product including floor wax that has fat in it
35no36yestake it from another person's plate37yes172 miles per hour upside down38no39no
35no36no37yes172 miles per hour38no39no
35no36no37yesupside down38no39no 
```

如何修改我的代码？

```
String regex = "^(\\d+)(yes|no)";
Pattern p = Pattern.compile(regex);

    while(input.hasNextLine()) {
     String line = input.nextLine();
        String myStr = line;
        Matcher m = p.matcher(myStr);

        while(m.find()) {
            String all = m.group();
        String digits = m.group(1);
            String bool = m.group(2);
            // do stuff
            myStr = myStr.substring(all.length());
            m.reset(myStr);
        } // end while
    } // end while 
```

我尝试使用`String regex = "^(\\d+)(yes|no)(.*)";`，但问题是它捕获了 a`yes`或`no`.

我该怎么办？

PS：如果有什么不清楚的地方请告诉我，我会提供更多解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T01:56:24.863

试试这个。我认为它会起作用。在解析结束时，您将获得一个答案列表。现在，您只需要进行一些修改以返回此列表并使用其答案。我的算法只是检测所有答案以及它们在主字符串中的开始位置，并根据这些信息对文本进行切片。因此，该算法有两个步骤（1：边界检测，2：字符串切片）。我在我的代码中做了一些评论。希望它有效。

```
import java.util.ArrayList;
import java.util.List;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

/**
 *
 * @author David Buzatto
 */
public class ASimpleParser {

    public static void main( String[] args ) {
        new ASimpleParser().exec();
    }

    public void exec() {

        String[] in = {
            "30no31yesapproximately 278 billion miles from anything.32no33no34no",
            "30no31yesapproximately 278 billion miles from anything32no33yessince the invention of call waiting34yesGravity is a contributing factor in 73 percent of all accidents involving falling objects.",
            "35yesanybody who owns hideous clothing36yes if you take it from another person's plate37yes172 miles per hour upside down38yesonly more intelligent39yes any product including floor wax that has fat in it",
            "35no36yestake it from another person's plate37yes172 miles per hour upside down38no39no",
            "35no36no37yes172 miles per hour38no39no",
            "35no36no37yesupside down38no39no"
        };

        Pattern p = Pattern.compile( "(\\d+)(yes|no)" );
        List<Answer> allAnswers = new ArrayList<Answer>();

        for ( String s : in ) {

            List<Answer> answers = new ArrayList<Answer>();
            Matcher m = p.matcher( s );

            // step 1: detecting answer bounds (start)
            while ( m.find() ) {

                Answer a = new Answer();
                a.answerStart = m.group();
                a.number = m.group( 1 );
                a.yesOrNo = m.group( 2 );
                a.startAt = s.indexOf( a.answerStart );

                answers.add( a );

            }

            // step 2: slicing
            for ( int i = 0; i < answers.size(); i++ ) {

                Answer a = answers.get( i );

                // needs to compare to the right one, the will have the right bounds
                if ( i != answers.size() - 1 ) {

                    Answer rightAnswer = answers.get( i + 1 );
                    a.text = s.substring( a.startAt + a.answerStart.length(), rightAnswer.startAt );

                } else { // int the last answer, the right bound is the end of the main String. s.length() may be ommited.

                    a.text = s.substring( a.startAt + a.answerStart.length(), s.length() );

                }

            }

            allAnswers.addAll( answers );

        }

        // just iterating over the answers to show them.
        for ( Answer a : allAnswers ) {
            System.out.println( a );
        }

    }

    // a private class to contain the answers data
    private class Answer {

        String answerStart;
        String number;
        String yesOrNo;
        String text;
        int startAt;

        @Override
        public String toString() {
            return "Answer{" + "number=" + number + ", answer=" + yesOrNo + ", text=" + text + ", startAt=" + startAt + '}';
        }

    }

} 
```

# batch-file - 从批处理文件连接多个目录中的文件

> ID：14804595
> 
> 赞同：1
> 
> 时间：2013-02-11T01:09:49.760
> 
> 标签：batch-file, cmd, xcopy

我正在尝试连接来自多个目录的文件。从一个目录，我知道你可以执行

```
copy /B *.blah all.blah 
```

将带有扩展名的文件连接`.blah`到一个名为`all.blah`. 我的结构是这样的：

```
level 1/
    level 2_1/
        file_1.blah
        file_2.blah
    level 2_2/
        ...
    level 2_3/
        ...
    do_not_include_this_directory/
        ... 
```

我要做的是`all.blah`在顶级目录中创建一个文件，该`.blah`文件是子目录中所有文件的串联`level*`，不包括目录中的任何文件`do_not_include_this_directory`。

我的目标是在批处理文件中执行此操作（此批处理文件中包含的不同目录将有其他文件连接逻辑），但我花了一个小时过去玩弄`cmd for`逻辑无济于事（我的一些目录有空格在名称中）。也许这是我应该使用 python 脚本做的事情？我认为这可以通过使用一些`for`循环相对容易地完成`copy`，但我在这些事情上的技能至少可以说是缺乏（大约 2 小时前刚刚遇到 cmd）。

有谁知道如何做到这一点，或者你会建议我振作起来并使用 Python 编写一些东西吗？任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:48:18.260

无需批处理脚本即可从命令行轻松完成 :)

```
copy nul all.blah >nul&for /d %F in (level*) do @copy /b all.blah + "%F\*.blah" >nul 
```

作为批处理脚本

```
@echo off
copy nul all.blah >nul
for /d %F in (level*) do copy /b all.blah + "%F\*.blah" >nul 
```

我不确定`/B`开关是否完全正确。它具有不同的含义，具体取决于它出现的位置：在任何文件之前、在源之后或在目标之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T02:08:43.727

这对于 Windows 批处理文件来说似乎是相当可怕的。在 Windows 7 下测试；YMMV 等

```
@rem get all pathnames, even in excluded directories
@rem EDIT THIS COMMAND to change wildcard to match
dir /b/s *.c >files.tmp
@rem get rid of things with prefix we want to exclude
@rem EDIT THIS COMMAND to change prefix
findstr /V "C:\temp\fee" files.tmp >files2.tmp
del copy.tmp
@rem append things one at a time the hard way!
For /f tokens^=*^ delims^=^ eol^=  %%a in (files2.tmp) do (
copy "%%a" + copy.tmp copy2.tmp
del copy.tmp
rename copy2.tmp copy.tmp
echo.%%a)
@rem clean up
del copy2.tmp
del files.tmp
del files2.tmp 
```

# apache - 用于重新排列目录结构的 Mod_Rewrite 规则的 RedirectMatch 等效项

> ID：14804597
> 
> 赞同：0
> 
> 时间：2013-02-11T01:10:10.197
> 
> 标签：apache, mod-rewrite, url-rewriting, rewrite

我想以 RedirectMatch 指令的形式重新创建 mod_rewrite 规则。

首先，请看一下这个 mod_rewrite 规则：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} (www.)?africananimals.com
RewriteCond %{REQUEST_URI} zebras
RewriteRule ^(stripes|hooves)/zebras/?$ zebras/$1 [R,L] 
```

该规则（由非常有用且知识渊博的 StackOverflow 贡献者编写）告诉服务器转换这四个 URL：

[http://africananimals.com/stripes/zebras](http://africananimals.com/stripes/zebras)

[http://africananimals.com/hooves/zebras](http://africananimals.com/hooves/zebras)

[http://www.africananimals.com/stripes/zebras](http://www.africananimals.com/stripes/zebras)

[http://www.africananimals.com/hooves/zebras](http://www.africananimals.com/hooves/zebras)

——进入这些更好、更有逻辑的结构：

[http://africananimals.com/zebras/stripes](http://africananimals.com/zebras/stripes)

[http://africananimals.com/zebras/hooves](http://africananimals.com/zebras/hooves)

[http://www.africananimals.com/zebras/stripes](http://www.africananimals.com/zebras/stripes)

[http://www.africananimals.com/zebras/hooves](http://www.africananimals.com/zebras/hooves)

（这些不是实际的 URL，只是示例。）

该托管服务器上还有其他网站，它们可能恰好具有相同的目录结构，因此第一个条件确保规则仅适用于africananimals.com 域，无论是否带有www。

第二个条件确保仅当 URL 中出现单词“zebras”时才应用该规则。

规则本身选择“stripes”或“hooves”，后跟“/zebras”或“/zebras/”并重写 URL，将先前选择的项目（“stripes”或“hooves”）放在“zebras/”之后 –完全按照它应该做的那样做。

**问题：**如何使用 RedirectMatch 指令完成相同的任务？

作为一名 Apache 业余爱好者，我非常感谢专业人士的见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:16:30.220

我想这样的事情会做到这一点：

```
RedirectMatch 301 ^/(stripes|hooves)/zebras/?$ http://africananimals.com/zebras/$1 
```

# javascript - 在正文中的其他头部使用 1 个 jquery 库没有冲突不起作用

> ID：14804599
> 
> 赞同：0
> 
> 时间：2013-02-11T01:10:25.063
> 
> 标签：javascript, jquery, html, plugins

我正在使用 2 个不同版本的 jquery 相同插件，问题是一个只在 body 中工作，另一个在 head 中工作。

我在本教程之后尝试使用没有冲突：[Using different versions of jQuery and jQueryUI together](https://stackoverflow.com/questions/4214551/using-different-versions-of-jquery-and-jqueryui-together)

但没什么，我想这可能与一个插件从正文调用，另一个从头部调用有关，无论如何，也许你有解决这个问题的建议：D

```
/*This is the head plugin*/
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript"></script>

/*And this is the body plugin*/
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js" type="text/javascript" ></script>

<script type="text/javascript" src="jquery.easing.1.3.js"></script>
<script type="text/javascript">
    $(function() {
        var current = 1;
        var iterate = function(){
            var i = parseInt(current+1);
            var lis = $('#rotmenu').children('li').size();
            if(i>lis) i = 1;
            display($('#rotmenu li:nth-child('+i+')'));
        }
        display($('#rotmenu li:first'));
        var slidetime = setInterval(iterate,3000);

        $('#rotmenu li').bind('click',function(e){
            clearTimeout(slidetime);
            display($(this));
            e.preventDefault();
        });

        function display(elem){
            var $this = elem;
            var repeat = false;
            if(current == parseInt($this.index() + 1))
                repeat = true;

            if(!repeat)
                $this.parent().find('li:nth-child('+current+') a').stop(true,true).animate({'marginRight':'-20px'},300,function(){
                    $(this).animate({'opacity':'0.7'},700);
                });

            current = parseInt($this.index() + 1);
            var elem = $('a',$this);

            elem.stop(true,true).animate({'marginRight':'0px','opacity':'1.0'},300);

            var info_elem = elem.next();
            $('#rot1 .heading').animate({'left':'-420px'}, 500,'easeOutCirc',function(){
                $('h1',$(this)).html(info_elem.find('.info_heading').html());
                $(this).animate({'left':'0px'},400,'easeInOutQuad');
             });

             $('#rot1 .description').animate({'bottom':'-270px'},500,'easeOutCirc',function(){
                $('p',$(this)).html(info_elem.find('.info_description').html());
                $(this).animate({'bottom':'0px'},400,'easeInOutQuad');
            })
            $('#rot1').prepend(
                $('<img/>',{
                    style: 'opacity:0',
                    className: 'bg'
                }).load(
                    function(){
                        $(this).animate({'opacity':'1'},600);
                        $('#rot1 img:first').next().animate({'opacity':'0'},700,function(){
                            $(this).remove();
                        });
                    }
                 ).attr('src','images/'+info_elem.find('.info_image').html()).attr('width','800').attr('height','300')
            );
        }
   });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T01:36:18.583

不需要在头部和正文中两次导入jQuery（？）...

只需导入所有插件并在头部声明您的脚本：

```
<html>

<head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script type="text/javascript" src="jquery.easing.1.3.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            console.log("Inside the 'head' tag you declare your plugins, scripts, css, etc...");
        });
    </script>
</head>
<body>
    <p>Inside the body you build your page with divs, img's, p's, span's, etc ...</p>
</body>

</html> 
```

顺便说一句，我注意到您正在使用不同版本的 jQuery，1.3 和 last (1.9.1)，您应该只使用最新版本`http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js`

并且不要忘记，jQuery 必须是第一个声明的脚本，然后是插件，然后是您自己的代码......

# c# - 数组在发送到非托管代码之前是否被固定？

> ID：14804601
> 
> 赞同：2
> 
> 时间：2013-02-11T01:10:42.470
> 
> 标签：c#, c++, pinvoke, unmanaged

假设我想从 C# 调用非托管 C++ 函数。C++ 函数具有以下原型：

```
int doSomething(int arraySize, int* array) 
```

我从 C# 调用函数如下：

```
[DllImport(MyLibrary, CallingConvention = CallingConvention.Cdecl)]
public static int doSomething(int arraySize, int[] array)

int[] myArray = new int[] { 1, 2, 3 };
doSomething(myArray.Length, myArray); 
```

1.  当我这样做时，是`myArray`固定的吗？当非托管库正在处理它时，垃圾收集器是否有可能将数组移动到其他地方？
2.  如果它没有自动固定，我应该怎么做才能固定它？
3.  如果它是自动固定的，它什么时候再次取消固定？

# ios6 - 用于触摸事件响应的 UIResponder 与 UIGestureRecognizer

> ID：14804602
> 
> 赞同：2
> 
> 时间：2013-02-11T01:10:47.713
> 
> 标签：ios6, xcode4.5, uigesturerecognizer, uiresponder

我一直在研究各种方法来对我正在构建的应用程序的触摸事件进行编程响应，我对我正在阅读的内容有点困惑。

据我所知，iOS 中有两种普遍接受的响应触摸的方法：手势识别和触摸识别。

什么时候适合使用其中一种？

专门针对我正在构建的内容*：

我正在为需要在用户触摸的屏幕上放置项目（UIImageViews）并在用户拖动时移动它们的视图编写控制器。控制器正在与一个单独的模型通信，因此我需要精细控制在触摸事件期间何时向模型发送消息。

模型需要知道用户第一次触摸屏幕的位置（未启用多点触控）以及用户离开屏幕的位置。我需要在用户第一次触摸时查询模型，以了解用户是否打算编辑图像视图的位置或创建新的图像视图，并且我需要向模型发送有关用户从屏幕上抬起的位置的消息，所以模型可以更新。在拖动事件期间，我还需要向模型发送持续查询，以确定用户在任何给定时刻悬停的位置是否有效。

起初我以为我可以使用平移手势识别器来完成这项工作，但当我进一步研究它时，我无法找到一种方法来设置在触摸、拖动和抬起时的自定义函数调用事件（如果有办法，很高兴知道）。我找到了 UIResponder 方法，但这些方法仍然可以使用，还是最好只使用 iOS6 中的手势识别器？

* 代码不包括在内，因为这个问题的范围相当大，我不想用不必要的细节分散人们的注意力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T18:34:19.100

我来到这里是因为我正在研究与基于 - 的触摸事件方法`UIGestureRecognizer`相比的效率，`UIResponder`因为我将它们用于低延迟应用程序。对于一般用途，我可以确认您可以覆盖子类或子类（添加到）甚至子类（它是响应者链的一部分，如）`touchesBegan/Moved/Ended/Cancelled`中的 etc 方法。 `UIView``UIGestureRecognizer``UIView``UIViewController``UIView`

您还可以对特定`UIGestureRecognizer`的 Pan GR 进行子类化，并覆盖这些方法以在利用它们已经检测到的内容的同时添加额外的功能。一定要打电话`super`（实际上在上述所有情况下），您可能想要检查或更新该`state`属性。

至于*我*关于哪个更有效的问题，我还不知道，但我想它几乎是等价的。

# java - Java 错误：线程“main”中的异常 java.lang.IllegalArgumentException：将窗口添加到容器

> ID：14804603
> 
> 赞同：0
> 
> 时间：2013-02-11T01:11:07.857
> 
> 标签：java, user-interface, illegalargumentexception

我目前正在用java创建一个计算器项目，现在我只是为它做设计或GUI。这是我的代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;

    public class Calculator extends JFrame {

          JButton jcomp1;
             JButton jcomp2;
          JButton jcomp3;
            JTextField jcomp4;
            JTextField jcomp5;
            JRadioButton rb1;
            JRadioButton jcomp7;
            JRadioButton jcomp8;
            JRadioButton jcomp9;
            JRadioButton jcomp10;
            JRadioButton jcomp11;
            JLabel jcomp12;
            JLabel jcomp13;
            JButton jcomp14;
            JButton jcomp15;
            JButton jcomp16;
            JButton jcomp17;
            JButton jcomp18;
            JButton jcomp19;
            JButton jcomp20;
            JButton jcomp21;
            JButton jcomp22;
            JButton jcomp23;
            JButton jcomp24;
            JButton jcomp25;
            JButton jcomp26;
            JButton jcomp27;
            JButton jcomp28;
            JButton jcomp29;
            JButton jcomp30;
            JButton jcomp31;
            JButton jcomp32;
            JButton jcomp33;
            JButton jcomp34;
            JButton jcomp35;

            public Calculator() {

                jcomp1 = new JButton ("A");
                jcomp2 = new JButton ("CE");
                jcomp3 = new JButton ("C");
                jcomp4 = new JTextField (5);
                jcomp5 = new JTextField (5);
                rb1 = new JRadioButton ("Hex");
                jcomp7 = new JRadioButton ("Dec");
                jcomp8 = new JRadioButton ("Oct");
                jcomp9 = new JRadioButton ("Bin");
                jcomp10 = new JRadioButton ("On");
                jcomp11 = new JRadioButton ("Off");
                jcomp12 = new JLabel ("Palindrome");
                jcomp13 = new JLabel ("Test");
                jcomp14 = new JButton ("?");
                jcomp15 = new JButton ("B");
                jcomp16 = new JButton ("C");
                jcomp17 = new JButton ("D");
                jcomp18 = new JButton ("E");
                jcomp19 = new JButton ("F");
                jcomp20 = new JButton ("7");
                jcomp21 = new JButton ("4");
                jcomp22 = new JButton ("1");
                jcomp23 = new JButton ("0");
                jcomp24 = new JButton ("8");
                jcomp25 = new JButton ("5");
                jcomp26 = new JButton ("2");
                jcomp27 = new JButton (".");
                jcomp28 = new JButton ("3");
                jcomp29 = new JButton ("6");
                jcomp30 = new JButton ("9");
                jcomp31 = new JButton ("+");
                jcomp32 = new JButton ("-");
                jcomp33 = new JButton ("/");
                jcomp34 = new JButton ("*");
                jcomp35 = new JButton ("=");

                setPreferredSize (new Dimension (363, 312));
                setLayout (null);

                add (jcomp1);
                add (jcomp2);
                add (jcomp3);
                add (jcomp4);
                add (jcomp5);
                add (rb1);
                add (jcomp7);
                add (jcomp8);
                add (jcomp9);
                add (jcomp10);
                add (jcomp11);
                add (jcomp12);
                add (jcomp13);
                add (jcomp14);
                add (jcomp15);
                add (jcomp16);
                add (jcomp17);
                add (jcomp18);
                add (jcomp19);
                add (jcomp20);
                add (jcomp21);
                add (jcomp22);
                add (jcomp23);
                add (jcomp24);
                add (jcomp25);
                add (jcomp26);
                add (jcomp27);
                add (jcomp28);
                add (jcomp29);
                add (jcomp30);
                add (jcomp31);
                add (jcomp32);
                add (jcomp33);
                add (jcomp34);
                add (jcomp35);

                jcomp1.setBounds (90, 100, 50, 30);
                jcomp2.setBounds (145, 100, 50, 30);
                jcomp3.setBounds (200, 100, 50, 30);
                jcomp4.setBounds (0, 0, 365, 40);
                jcomp5.setBounds (0, 45, 365, 40);
                rb1.setBounds (0, 100, 50, 25);
                jcomp7.setBounds (0, 120, 70, 25);
                jcomp8.setBounds (0, 145, 70, 25);
                jcomp9.setBounds (0, 170, 60, 25);
                jcomp10.setBounds (0, 245, 65, 25);
                jcomp11.setBounds (0, 270, 65, 25);
                jcomp12.setBounds (5, 205, 75, 25);
                jcomp13.setBounds (20, 220, 45, 25);
                jcomp14.setBounds (255, 100, 105, 30);
                jcomp15.setBounds (90, 135, 50, 30);
                jcomp16.setBounds (90, 170, 50, 30);
                jcomp17.setBounds (90, 205, 50, 30);
                jcomp18.setBounds (90, 240, 50, 30);
                jcomp19.setBounds (90, 275, 50, 30);
                jcomp20.setBounds (145, 135, 50, 30);
                jcomp21.setBounds (145, 170, 50, 30);
                jcomp22.setBounds (145, 205, 50, 30);
                jcomp23.setBounds (145, 240, 105, 30);
                jcomp24.setBounds (200, 135, 50, 30);
                jcomp25.setBounds (200, 170, 50, 30);
                jcomp26.setBounds (200, 205, 50, 30);
                jcomp27.setBounds (255, 240, 50, 30);
                jcomp28.setBounds (255, 205, 50, 30);
                jcomp29.setBounds (255, 170, 50, 30);
                jcomp30.setBounds (255, 135, 50, 30);
                jcomp31.setBounds (310, 135, 50, 30);
                jcomp32.setBounds (310, 170, 50, 30);
                jcomp33.setBounds (310, 205, 50, 30);
                jcomp34.setBounds (310, 240, 50, 30);
                jcomp35.setBounds (145, 275, 215, 30);

            }

            public static void main (String[] args) {
                Calculator calc = new Calculator();
                calc.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
                calc.getContentPane().add (new Calculator());
                calc.pack();
                calc.setVisible (true);
            }

    } 
```

我正在使用 eclipse 来制作这个布局，但我担心我不断收到错误：

```
 Exception in thread "main" java.lang.IllegalArgumentException: adding a window to a container
        at java.awt.Container.checkNotAWindow(Container.java:429)
        at java.awt.Container.addImpl(Container.java:1037)
        at java.awt.Container.add(Container.java:363)
        at Calculator.main(Calculator.java:162) 
```

你能指出我做错了什么吗？我尝试在 GuiGenie 中进行设计，但仍然出现此错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T01:17:49.277

问题：

```
calc.getContentPane().add (new Calculator()); 
```

您的所有按钮、文本字段等都应该添加到 JPanel 中，并且 JPanel 应该添加到 JFrame 的内容窗格中。

去做这个：

*   在计算器的构造函数中创建一个 JPanel。
*   将所有 JComponent 添加到 JPanel。
*   在 Calculator 构造函数中，添加以下代码：`this.getContentPane().add(jPanel);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T01:17:37.860

在这条线上：

```
calc.getContentPane().add (new Calculator()); 
```

您正在尝试为其自身添加一个计算器。很明显，这是行不通的。你真的只需要这两行：

```
calc.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
calc.setVisible (true); 
```

它们应该在 for 的构造函数中`Calculator`，而不是在您的 main 方法中。

# sql - SQL 缺少运算符错误

> ID：14804606
> 
> 赞同：0
> 
> 时间：2013-02-11T01:11:26.700
> 
> 标签：sql, excel, odbc

下面的 SQL 行有什么问题

相关线路：

```
SELECT * 
  FROM glossary.csv 
 WHERE source NOT IN ('AIS','AIP','ICAO','WATOG','ICAO/AIP') 
  AND NOT LIKE('CASR%')" 
```

错误：

```
Microsoft OLE DB Provider for ODBC Drivers error '80040e14'

[Microsoft][ODBC Text Driver] Syntax error (missing operator) in query expression 'source NOT IN ('AIS','AIP','ICAO','WATOG','ICAO/AIP') AND NOT LIKE('CASR%')'.

/junk/glossary.asp, line 20 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T01:13:06.217

You missed out the column name in the second part of the where clause:

```
"SELECT * FROM glossary.csv 
 WHERE source NOT IN ('AIS','AIP','ICAO','WATOG','ICAO/AIP') 
 AND source  NOT LIKE 'CASR%'" 
```

# jquery - Jquery Validation MVC3 asp.net 不显示验证消息

> ID：14804608
> 
> 赞同：0
> 
> 时间：2013-02-11T01:11:47.277
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, unobtrusive-validation

我的模型上有这个

```
 [Required]
    public string AppName { get; set; } 
```

在我的布局页面上

```
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.24.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"></script>

my view has this inside BeginForm

   @Html.EditorFor(model => model.App.AppName, new { size = 35 })
    @Html.ValidationMessageFor(model => model.App.AppName)
    <input type="submit" value="Start Business" class="demo-button ui-state-default ui-corner-all" />

this is how its rendered

            <input id="App_AppName" class="text-box single-line watermark" type="text" value="" name="App.AppName" data-val-required="The AppName field is required." data-val="true">

<span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-for="App.AppName"></span> 
```

当我点击提交时，我没有得到任何验证说 AppName 是必需的，但它只是用空字段回发到服务器。

我用validationMsgFor添加了一些隐藏的字段，这是有效的。

所以我所拥有的是

```
public class AppContent
{

    public App App { get; set; }                
    public bool CreateModal { get; set; }
    public AppContent()
    {

    }

} 
```

我的观点是 AppContent 类型。

我注意到的一件事是，当我直接添加带有 App 对象的视图时，根据需要检测到 AppName。但是当我使用具有 AppName 类型的 AppCONntent 执行此操作时，不会显示验证，但对于非字符串的其他隐藏字段，它可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:52:50.103

这是因为我有水印，我不得不使用占位符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T01:30:01.363

您必须在 web.config 中启用客户端验证。

```
<appSettings>
  <add key="ClientValidationEnabled" value="true" />
  <add key="UnobtrusiveJavaScriptEnabled" value="true" />
</appSettings> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T08:27:39.630

你必须把这个脚本

```
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script> 
```

# python - 如何将 Python + Glade3 项目转为 .exe 格式？

> ID：14804612
> 
> 赞同：1
> 
> 时间：2013-02-11T01:12:06.637
> 
> 标签：python, type-conversion, executable, glade

我不擅长编程，我需要一些帮助。我做了一个 Python/Glade 项目，我想我已经安装了 Glade 3.6.7 和 Python 2.6.5。我想把它变成一个 .exe 文件。与其把我的整个程序放在一起，我想如果我能弄清楚如何把这个程序（两个链接包含一个简单程序的两个部分）变成一个 .exe，我会设法自己做同样的事情。我在程序的很多部分都遵循了本教程，所以我认为它会翻译得很好。 [http://gnipsel.com/glade/glade04.html](http://gnipsel.com/glade/glade04.html)

[http://gnipsel.com/glade/python04.html](http://gnipsel.com/glade/python04.html)

我提出了一个新问题（实际上是一个帐户），因为我找到的答案与我正在做的事情并不真正相关。

非常感谢你，我很感激你的时间。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:41:48.313

您可以使用 [http://www.py2exe.org/](http://www.py2exe.org/)。

将 python 可执行文件视为为您的用户提供最小的 python 发行版，它将打开并“执行”您的 *.py 文件。

# php - 将 Postgre 中一列中的数字四舍五入到最接近的整数

> ID：14804616
> 
> 赞同：1
> 
> 时间：2013-02-11T01:12:42.043
> 
> 标签：php, sql, postgresql

再会。

我有多个表格，其中包含有关国家/地区的信息。其中一张表包含每个国家的人口数据；另一个包含每种语言的使用者百分比。

我们将取这两个数字并制作一个列，列出每种语言有多少说话者......基本上，我们将它们相乘。这很简单。然而，不简单的是以我们应该的方式显示它们。

这是我正在使用的查询：

```
SELECT country.name AS \"country\", 
       city.name AS \"capital\", 
       country_language.language, 
       (country.population * country_language.percentage) AS \"speakers\" 
FROM lab2.country, lab2.country_language, lab2.city 
WHERE country.country_code = country_language.country_code 
AND city.id = country.capital 
AND country_language.is_official = true
ORDER BY country.name, 
        (country_language.percentage * country.population) DESC; 
```

这是第一个结果表格单元格填充的内容：

```
 1190528034.66797 
```

这就是它应该是什么：

```
 11905280 
```

通常，我只需将这些整数设为一种或另一种，这样就可以解决问题。但如您所见，我要四舍五入的数字不一定出现在小数点后。

我应该怎么做才能完成这些？

这是我的网站（您要选择的是查询 5）：

[http://babbage.cs.missouri.edu/~asm3kf/cs3380/lab2/lab2.php](http://babbage.cs.missouri.edu/~asm3kf/cs3380/lab2/lab2.php)

这是我们应该匹配的页面：

[http://babbage.cs.missouri.edu/~klaricm/cs3380/lab2/lab2.php](http://babbage.cs.missouri.edu/~klaricm/cs3380/lab2/lab2.php)

您会看到不一致贯穿整个表格。

提前致谢！

编辑：

我更新了网站以包括人口和百分比数字。希望这在某种程度上有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:33:16.830

只是将方程结果四舍五入？

```
round(country.population * country_language.percentage) AS \"speakers\" 
```

添加所需的更改以适应百分比格式：

```
round(country.population * (country_language.percentage / 100)) AS \"speakers\" 
```

The division MIGHT truncate/round the result for you anyway, I don't have PostgreSQL at hand to test.

# twitter-bootstrap - Bootstrap Scrollspy not Adding Active to my LI

> ID：14804618
> 
> 赞同：4
> 
> 时间：2013-02-11T01:13:00.973
> 
> 标签：twitter-bootstrap, scrollspy

I am encountering an issue with Scrollspy. I am able to get the links to point to the correct section, but it is not applying an active class to the currently "selected" li element. You can see the issue on my beta website at: [http://beta.joshuabock.com/resume.html](http://beta.joshuabock.com/resume.html). I have looked around for a solution but so far no luck. Any suggestions on how to resolve this issue?

The basic code structure is as follows:

```
<aside>
   <nav id="nav-list>
     <ul class="nav nav-list">
        <li>Menu Items</li>
     </ul>
   </nav>
</aside>
<article data-spy="scroll" data-target="#nav-list" data-offset="0">
   <section>Main Content</section>

</article> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:18:13.297

您似乎没有按照文档将所需的属性添加到 body 标记中：

[http://twitter.github.com/bootstrap/javascript.html#scrollspy](http://twitter.github.com/bootstrap/javascript.html#scrollspy)

```
<body data-spy="scroll" data-target=".navbar"> 
```

我猜 .nav-bar 会是你的导航。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T23:33:01.990

在停止编码后，我能够解决这个问题。我确实必须像比利所说的那样移动数据间谍，但我也为我的导航创建了一个新 ID。另外，我更新了我的 Bootstrap 和 Jquery 版本。

# ruby-on-rails - Upload image to Wordpress.com Gallery with REST API

> ID：14804629
> 
> 赞同：2
> 
> 时间：2013-02-11T01:14:57.193
> 
> 标签：ruby-on-rails, wordpress, image, rest-client, wordpress.com

I'm trying to upload an image to a WordPress.com blog via their REST API. According to their [documentation](http://developer.wordpress.com/docs/api/1/post/sites/%24site/posts/new/), I should be able to use the `new post` endpoint to do so. I'm currently using Rails and [rest-client](https://github.com/archiloque/rest-client) to successfully create text posts using the following code (`post_hash` contains all the post information):

```
 url = "https://public-api.wordpress.com/rest/v1/sites/" + @blog.external_id + "/posts/new"
  params = {
      pretty = true,
      title: post_hash[:post_title],
      content: post_hash[:post_content],
      categories: post_hash[:terms_names][:category],
      tags: post_hash[:terms_names][:post_tag]
  }
  headers = { authorization: "Bearer " + @oauth_token, content_type: :json }
  RestClient.post(url, params, headers) 
```

As I mentioned, this works perfectly. Now, I'd like to be able to upload a new image to the blog's Gallery by creating a new "post" with the image attached. I'm trying to use this code to do so (`image` is a [CarrierWave](https://github.com/jnicklas/carrierwave) file stored on Amazon S3):

```
 url = "https://public-api.wordpress.com/rest/v1/sites/" + @blog.external_id + "/posts/new"
  image_data = open(image.to_s, "rb").read
  params = {
      format: "image", 
      media: [image_data], 
      multipart: true
  }
  headers = { authorization: "Bearer " + @oauth_token, content_type: image.content_type }
  RestClient.post(url, params, headers) 
```

This does not work and keeps giving me a `400 Bad Request` error. If anyone has any suggestions as to what I'm doing wrong or advice on a better way of doing this, I'd greatly appreciate it. Thanks!

# ios - 如何动态更改 iOS 应用中的标签数量？

> ID：14804632
> 
> 赞同：2
> 
> 时间：2013-02-11T01:15:12.443
> 
> 标签：ios, objective-c, xcode

使用本教程 ( [http://www.raywenderlich.com/5492/working-with-json-in-ios-5](http://www.raywenderlich.com/5492/working-with-json-in-ios-5) )，我了解如何解析 JSON 中的内容并将其显示为标签。但是，该示例具有一定数量的标签。

如何根据 JSON 中的内容数量动态更改显示的标签数量？用户将向下滚动查看每个标签。在该链接的示例中，20 种不同的贷款将有 20 种不同的标签。

[http://api.kivaws.org/v1/loans/search.json?status=fundraising](http://api.kivaws.org/v1/loans/search.json?status=fundraising)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:21:25.380

您可以动态创建`UILabel`对象，并将它们添加到您需要它们的视图中。它应该是一个`UIScrollView`. 这是一个[深入讨论这种方法的问答](https://stackoverflow.com/q/10434059/335858)。

但是，这不是您可以采用的最佳方法，因为随着标签数量的增加，您开始耗尽资源。这会减慢您的滚动速度，并增加内存不足的可能性。

当您需要动态增长的标签列表时，惯用的 iOS 解决方案是使用`UITableView`. 此类通过在单元格滚动离开屏幕时重用单元格来解决潜在的资源问题。尽管您可以使用自己的滚动视图实现类似的方法，但这需要您付出相当大的努力，但对于您的应用程序的用户来说，它看起来并不“原生”。

# ruby-on-rails - Following Learn Ruby On Rails Tutorial, Cant add users to database

> ID：14804633
> 
> 赞同：1
> 
> 时间：2013-02-11T01:15:18.863
> 
> 标签：ruby-on-rails, ruby, database, railstutorial.org

Im trying to follow the [Learn Ruby on Rails tutorial](http://ruby.railstutorial.org/) my Michael Hartl. I'm on chapter 7 which grabs user data from a database to display pages. However, I keep getting an error that there is no user with an ID of one. I can't verify the data in the database (since the sql database viewer says it cant open the file and I have no idea how to install the 1.1 version which allegedly fixes that problem).

I tried adding a user in the console and it seems to succeed, but the second I go to find the user I just created, it doesn't exist (see below). Any help? I'm very frustrated at the moment.

### User.find

```
1.9.3-p327 :001 > User.find(1)
  User Load (31.4ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
ActiveRecord::RecordNotFound: Couldn't find User with id=1
    from /home/gerard/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/relation/finder_methods.rb:341:in `find_one'
    from /home/gerard/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/relation/finder_methods.rb:312:in `find_with_ids'
    from /home/gerard/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/relation/finder_methods.rb:107:in `find'
    from /home/gerard/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/querying.rb:5:in `find'
    from (irb):1
    from /home/gerard/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/commands/console.rb:47:in `start'
    from /home/gerard/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/commands/console.rb:8:in `start'
    from /home/gerard/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

### User.create

```
1.9.3-p327 :002 > User.create(name: "MD", email: "md@example.com", password: "foobar", password_confirmation: "foobar")
   (22.6ms)  SAVEPOINT active_record_1
  User Exists (56.7ms)  SELECT 1 AS one FROM "users" WHERE LOWER("users"."email") = LOWER('md@example.com') LIMIT 1
  SQL (153.7ms)  INSERT INTO "users" ("created_at", "email", "name", "password_digest", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["created_at", Mon, 11 Feb 2013 00:59:52 UTC +00:00], ["email", "md@example.com"], ["name", "MD"], ["password_digest", "$2a$10$NFEb9PsPQuSEGbJ8.TOILefjZMgTAJXCFHExZpGZmlov72UffjoUe"], ["updated_at", Mon, 11 Feb 2013 00:59:52 UTC +00:00]]
   (0.4ms)  RELEASE SAVEPOINT active_record_1
 => #<User id: 4, name: "MD", email: "md@example.com", created_at: "2013-02-11 00:59:52", updated_at: "2013-02-11 00:59:52", password_digest: "$2a$10$NFEb9PsPQuSEGbJ8.TOILefjZMgTAJXCFHExZpGZmlov..."> 
```

### User.find

```
1.9.3-p327 :003 > User.find(1)
  User Load (2.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
ActiveRecord::RecordNotFound: Couldn't find User with id=1
    from /home/gerard/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/relation/finder_methods.rb:341:in `find_one'
    from /home/gerard/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/relation/finder_methods.rb:312:in `find_with_ids'
    from /home/gerard/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/relation/finder_methods.rb:107:in `find'
    from /home/gerard/.rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.2.9/lib/active_record/querying.rb:5:in `find'
    from (irb):3
    from /home/gerard/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/commands/console.rb:47:in `start'
    from /home/gerard/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/commands/console.rb:8:in `start'
    from /home/gerard/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:50:34.283

我假设您正在使用 rails 控制台，

如果是这样，一旦将用户添加到数据库，则需要重新加载控制台

在您的 Rails 控制台中

```
User.create(name: "MD", email: "md@example.com", password: "foobar", password_confirmation: "foobar")

reload!

User.find(1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T01:22:18.200

I guess, you've already run a 'rake db:migrate' in your command line and your sqlite3 database files already generated in your db folder.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-12T04:23:07.217

正如@aceofbassgreg 提到的，您运行的 User.create 方法创建了一个 ID 为 4 的用户。

在您的教程中，您可能已经创建和删除了一些用户实例。每次创建新用户时，都会自动生成 ID 字段的值并不断增加。它也是主键。

ID 列具有 auto_increment 属性。它由 RDBMS 自动确定，并且每次创建对象的新实例时都会增加 1。因此，如果您创建 3 个 User 对象然后删除它们，即使您的表是空的，下一个 User 对象的 ID 也会为 4。当然，您可以使用正确的 SQL 命令将 auto_increment 计数器重置为任何值。

最重要的是，出于安全原因，当您将主键（此键中的 ID）和继承字段作为参数（“批量分配”）传递时，create 方法会忽略它们。因为那个 User.create(:id => 1) 将不起作用。

# visual-c++ - DirectX 11.1 和 Win32 桌面

> ID：14804636
> 
> 赞同：2
> 
> 时间：2013-02-11T01:17:17.800
> 
> 标签：visual-c++, directx, directx-11

我在理解 DirectX 11.1 时遇到了一些麻烦。我有兴趣用它构建一个传统的 Win32 桌面程序，但所有文档都是针对 Metro 应用程序的。11.1 仅适用于 Metro 应用程序吗？我不认为 Windows 7 中添加了对 11.1 的支持。

过去我在初始化 D3D11 时没有问题。它就像声明指针然后以标准 C++ 方式调用函数一样简单：

```
ID3D11Device *pDevice; 
```

现在有了 11.1，有很多新的东西，比如 ComPtr：

```
ComPtr<ID3D11Device1> pDevice; 
```

并且不创建 D3D11.1 设备，他们使用 ComPtr 的 As() 函数将它们从 D3D11 转换，因此使 ComPtr 成为强制性要求。

假设桌面可以DX11.1开发，有没有办法不用这种转换废话，使用传统的初始化方式？

如果没有办法，如何为桌面初始化 D3D11.1？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T13:45:59.687

我认为您确实需要将其从 DirectX11 对象转换，是的，但是您可以在不使用`ComObj<>`使用普通 COM 的辅助包装器的情况下执行此操作，`QueryInterface`例如：

```
ID3D11Device* device = NULL;
D3D_FEATURE_LEVEL level;
ID3D11DeviceContext* context = NULL;

HRESULT hr = D3D11CreateDevice(NULL, 
    D3D_DRIVER_TYPE::D3D_DRIVER_TYPE_NULL, 
    NULL,
    0, 
    NULL, 
    0, 
    D3D11_SDK_VERSION, 
    &device, 
    &level, 
    &context);
if (SUCCEEDED(hr))
{
    ID3D11Device1* device1 = NULL;
    // This is equivalent to the ComPtr<>.As<>()
    hr = device->QueryInterface(IID_ID3D11Device1, (void**)&device1);
    if (SUCCEEDED(hr) && (device1 != NULL))
    {
        // device1 now ready

        // when finished with device1
        // (this would be handled automatically by the ComPtr<> destructor)
        device1->Release();
    }

    device->Release();
    context->Release();
} 
```

或者，您可以使用辅助包装器，然后从中获取指针

```
ID3D11Device1* pDevice1 = device.As<ID3D11Device1>().Detach();
if (pDevice1 != NULL)
{
    // use as before
    // you'll then need to release manually since we detached the reference
    pDevice1->Release();
} 
```

但在任何情况下使用辅助包装器可能更容易。

* * *

我的回答主要是关于 COM 引用计数处理，我认为我的代码片段是基于 MSDN 的一个示例。然而，一位[匿名用户指出](https://stackoverflow.com/review/suggested-edits/2806600)，创建这些对象之一并不是一个很好的实际示例：

> 创建 D3D11.1 设备需要指定功能级别数组。请参阅 D3D11CreateDevice 上的 MSDN 页面。此外，D3D_DRIVER_TYPE_NULL 是没有渲染能力的参考设备，不太可能是原始发布者想要的。

他建议您添加功能级别数据并将其传递到`D3D11CreateDevice`调用中

```
D3D_FEATURE_LEVEL pFeatureLevels[]={D3D_FEATURE_LEVEL_11_1};
UINT nFeatureLevels=ARRAY_SIZE(pFeatureLevels);

HRESULT hr = D3D11CreateDevice(NULL, 
    D3D_DRIVER_TYPE::D3D_DRIVER_TYPE_HARDWARE, /* was NONE in example I copied */
    NULL,
    0, 
    pFeatureLevels, /* was NULL */
    nFeatureLevels, /* was 0 */
    D3D11_SDK_VERSION, 
```

等希望这很有用 - 我对 API 的了解还不够好，无法真正发表评论。

# mysql - 在 SQL 文件中使用 IF 控制 INSERT 和 UPDATE 查询

> ID：14804639
> 
> 赞同：1
> 
> 时间：2013-02-11T01:17:47.560
> 
> 标签：mysql, sql, xml, bulkinsert

我想加快将一个非常大的 xml 文件导入我的 mysql 数据库的速度，我决定将所有查询转储到一个 SQL 文件中并在控制台上执行它，这样它会更快一点。

但我的问题是我不能简单地插入所有数据。

有些表是链接的，这就是我不能使用非常快`LOAD DATA INFILE`的功能的原因。所以我想把查询放在一个 SQL 文件中，但我需要一些控制操作。

我有一个数据集，我需要它的 ID（作为主键）才能使用该 ID 在另一个表中添加数据。

所以我通过 mysql 控制台尝试的是：

```
INSERT IGNORE INTO tableA VALUES ( A, B, C);
SET @id = LAST_INSERT_ID();
IF( @id, SELECT 1, SELECT id INTO @id FROM tableA WHERE a=A and b=B and c=C);
INSERT INTO tableB VALUES ( @id, B, C); 
```

显然 IF 语句不起作用，它只适用于“SELECT IF”。

我试图做的是使用 INSERT IGNORE 将数据集添加到 tableA 中，因此忽略重复的错误。如果它添加了一个新行，我会使用 LAST_INSERT_ID() 获取我的@id，如果有重复的@id 为空，但是通过我的 IF 检查，我选择那个重复项并将其放入 @a，所以无论如何我都有@id 设置。然后我使用@id 将我的数据放入tableB，这样我就有了正确的链接。

是否有可能使用 IF 执行此工作流程？由于我需要对其进行一些检查的链接表，我无法创建一个简单的 CSV 来使用 LOAD DATA INFILE，因此我认为生成 SQL 是最好的。

我的 XML 文件有 20-25GB 大。我的 perl 脚本需要 3 周的时间才能导入数据库进行所有检查，但是由于我执行的所有 mysql 查询非常慢，我想将所有查询放在一个文件中，然后一键将其放入数据库。如果我可以控制我的查询流程，我可以创建那个大的 sql 文件，而不是在我的 perl 脚本中运行数百万个查询。

请告诉我这是可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:18:33.317

我不确定你是否需要这样做。如果`tableA.a`, `tableA.b`, 并且`tableA.c`都确定`tableA.id`, 那么无论该行输入是否成功, 你应该能够做到:

```
INSERT IGNORE INTO tableA VALUES (A, B, C);
INSERT INTO tableB SELECT id, B, C FROM tableA WHERE a=A AND b=B AND c=C; 
```

我意识到这与您发布的查询不*完全相同。*最大的区别是，如果一行实际上被正确插入`tableA`（即没有重复的行错误），那么上面的语句将不会`1`在`tableB`. 如果那是您真正想要的，那么以下应该可以工作：

```
INSERT IGNORE INTO tableA VALUES (A, B, C);
SET @id = LAST_INSERT_ID();
INSERT INTO tableB SELECT IF(@id IS NOT NULL, 1, id)
                     FROM tableA
                    WHERE a=A AND b=B AND c=C; 
```

而且我假设那里`LAST_INSERT_ID()`会返回`NULL`，而不是最后一次成功插入的实际自动增量值。我尚未验证实际行为。

# css - 反射渐变可以转成 CSS 吗？

> ID：14804644
> 
> 赞同：-1
> 
> 时间：2013-02-11T01:18:31.900
> 
> 标签：css

我想知道[这个“反射”渐变](https://dl.dropbox.com/u/16248781/gradient.jpg)是否可以变成 CSS，我会怎么做？

![橙色反射渐变](../Images/8f99c6da18053fd3c2c8264f1bfc3a77.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:25:52.057

像[这样](http://www.colorzilla.com/gradient-editor/#753017+0,f48413+50,753017+100;Custom)？

```
background: #753017; /* Old browsers */
background: -moz-linear-gradient(left, #753017 0%, #f48413 50%, #753017 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, right top, color-stop(0%,#753017), color-stop(50%,#f48413), color-stop(100%,#753017)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(left, #753017 0%,#f48413 50%,#753017 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(left, #753017 0%,#f48413 50%,#753017 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(left, #753017 0%,#f48413 50%,#753017 100%); /* IE10+ */
background: linear-gradient(to right, #753017 0%,#f48413 50%,#753017 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#753017', endColorstr='#753017',GradientType=1 ); /* IE6-9 */ 
```

# c# - Google Apps OpenID endpoint gives errors, but standard Google endpoint with Apps account works - what gives?

> ID：14804646
> 
> 赞同：1
> 
> 时间：2013-02-11T01:18:37.490
> 
> 标签：c#, openid, dotnetopenauth, google-apps, google-openid

I'm building a site where people from an organization will login with their organization-provided Google Apps accounts. The site uses DotNetOpenAuth's standard OpenID sample code to authenticate with the Google OpenID provider.

OpenID is enabled on this Google Apps domain, but when I attempt to authenticate a user via the `https://google.com/accounts/o8/site-xrds?hd=domain.com` endpoint, I get the following error:

> Error occurred while sending a direct message or getting the response.

However, **if I use the standard `https://www.google.com/accounts/o8/id` endpoint and sign in with my Google Apps account, it works!**

Why does **the same Google Apps account produce two different results**: one endpoint works, the other fails to authenticate properly?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T05:20:04.670

Google Apps 并不完全遵循 OpenID 2.0 协议。它有一个专有的发现机制，默认情况下 DotNetOpenAuth 没有打开。

在 OpenIdRelyingPartyWebForms 项目的 loginGoogleApps.aspx 文件中查看[SourceForge 的示例。](http://sf.net/projects/dnoa)您会看到它的代码隐藏将 Google Apps 发现添加到 OpenIdRelyingParty 类。如果你这样做，我认为它也对你有用。

# php - 将 PHP while 循环的一部分附加到 div

> ID：14804650
> 
> 赞同：-1
> 
> 时间：2013-02-11T01:19:45.473
> 
> 标签：php, html, mysql, loops, while-loop

假设我有这个简单的 PHP MYSQL while 循环：

```
<?php
while($row = $STH->fetch())
{
echo '<div id="$row['id']">$row['content']</div>';

echo '<div id="comment-holder">;
echo '<div id="$row['id2']">$row['content2']</div>'; 
echo '</div>';   

echo '<div id="$row['id3']">$row['content3']</div>';  

?> 
```

如何让`comment-holder`DIV 像持有人一样行事？这意味着它应该只被回显一次，并且 a 的内容`$row[id2]`应该`$row[content2]`附加到它上面，如下所示：

```
 <div id="comment-holder">
 <div id="1">test</div> 
 <div id="2">different</div>
 <div id="3">text</div>  
 </div> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:23:18.093

起初：您的代码有错误 - 在单引号字符串中不是字符串插值。如果你想要这种结构，你可以简单地用给定的 div 包围你的代码

```
<div class="comment-holder">
<?php
while($row = $STH->fetch())
{
echo "<div id=\"{$row['id']}\">{$row['content']}</div>";
echo "<div id=\"{$row['id2']}\">{$row['content2']}</div>";
echo "<div id=\"{$row['id3']}\">{$row['content3']}</div>";  
}
?>
</div> 
```

或者：

```
<?php
echo '<div class="comment-holder">';
while($row = $STH->fetch())
{
    echo "<div id=\"{$row['id']}\">{$row['content']}</div>";
    echo "<div id=\"{$row['id2']}\">{$row['content2']}</div>";
    echo "<div id=\"{$row['id3']}\">{$row['content3']}</div>";  
}
echo '</div>';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T01:23:03.590

也许我在这里遗漏了一些非常明显的东西，但是......你为什么不改变回声的顺序？

```
<?php
while($row = $STH->fetch())
{

echo '<div id="comment-holder">';
echo '<div id="' . $row['id'] . '">' . $row['content'] . '</div>';
echo '<div id="' . $row['id2'] . '">' . $row['content2'] . '</div>'; 
echo '<div id="' . $row['id3'] . '">' . $row['content3'] . '</div>';  
echo '</div>';   

?> 
```

顺便说一句，`while`块在哪里结束？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T01:24:55.160

```
$ones = $twos = $threes = '';

while ($row = $STH->fetch()) {
    $ones .= "<div id='$row[id]'>$row[content]</div>";
    $twos .= "<div id='$row[id2]'>$row[content2]</div>";
    $threes .= "<div id='$row[id3]'>$row[content3]</div>";
}

$result = sprintf("%s<div id='comment-holder'>%s</div>%s", $ones, $twos, $threes) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-11T01:25:56.870

把它放在while循环之外。前任。

```
<?php
    echo 'hi';
    for($i = 0; $i < 5; $i++){
        echo 'yo';
    }
    echo 'the end';
?> 
```

会输出：hi yo yo yo yo yo end

# ruby-on-rails - Rails geocode two ways in model

> ID：14804651
> 
> 赞同：1
> 
> 时间：2013-02-11T01:19:53.290
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-geocoder

I am using geocoder and have a model called Location. This models contains longitude, latitude, and address. What I would like is to give the option to the user to fill in either longitude and latitude or the address. If one of them is fill up then fill up the remaining information. So here what I did

```
 before_validation :check
  def check
    if self.address.blank?
        reverse()
    else
        geo()
    end
  end

  def reverse
    reverse_geocoded_by :latitude, :longitude,
    :address => :address
    after_validation :reverse_geocode
  end

  def geo
    geocoded_by :address
    after_validation :geocode
  end 
```

But i am getting the following `undefined method reverse_geocoded_by` I am not sure what to do!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T01:29:15.197

您不能在实例方法中调用类方法。请记住，这`geocoded_by`可能是为您的模型类定义的。您不能在不影响模型的所有实例的情况下任意更改一个实例的验证，因此这通常被视为一个坏主意。

您最好拥有一个可以以两种不同方式之一进行地理编码的“位置”模型，并为每种编码类型创建一个子类。也就是说，可以为这些中的每一个独立地建立规则。使用单表继承 (STI) 可以轻松存储这些内容。

所以你可以有：

```
class Location < ActiveRecord::Base
end

class ForwardLocation < Location
  geocoded_by :address
  after_validation :geocode
end

class ReverseLocation < Location
  reverse_geocoded_by :latitude, :longitude,
    :address => :address
  after_validation :reverse_geocode
end 
```

然后你会相应地添加正确的位置：

```
self.location = self.address? ? ReverseLocation.create(...) : ForwardLocation.create(...) 
```

您还可以编写比使用这样的子类更直接地处理填充字段的方法，但这完全取决于您接收和处理的数据类型。

通常，一个类应该只有一组之前/之后的回调。`:if`如果回调定义支持样式声明，它可以有条件地触发其中一些回调。有时您需要编写自己的`before_validation`例程来处理更奇特的需求。

# c# - 以 C# 文件大小录制视频/图像信息是巨大的

> ID：14804659
> 
> 赞同：1
> 
> 时间：2013-02-11T01:21:19.410
> 
> 标签：c#, file, io, kinect

我正在使用 MS Kinect 来记录和回放颜色、深度和骨架输出。我正在使用`BinaryWriter`将此信息写入文件。该过程运行良好，但是文件大小在短时间内变得很大（5 分钟内约 15 GB）。自然地，当调用“重播此信息”时，加载此大小的文件需要一段时间才能开始播放。而需要是能够记录大约1小时的输出。按照这个速度，在录制结束时它将是 180 GB 的文件，我猜这对于加载和开始即时播放来说太大了。

一种可能的解决方案是检测文件大小何时达到 1 GB，然后创建另一个文件并继续重复此过程。这样我最终会得到几个 1 GB 的文件来录制 1 小时。对于重播，我将一一加载它们。

在开始执行此操作之前，我必须记住 Kinect 输出会不断流入。因此，创建新文件可能会花费大量时间开销。

问题：

1.  .NET 中现有的文件写入 API 是否提供了一种自动检测文件大小并创建另一个文件等的方法？

2.  每隔几秒钟创建一个新文件会是一个很大的开销吗？由于我希望记录的信息以每秒 30 帧的速率流入，这可能意味着在创建文件时会丢失一些信息等等。

* * *

我认为我需要高精度作为研究应用。我刚刚做了另一个 30 分钟深度的测试，颜色捕获最终得到了近 98 Gb 的文件。使用此代码（来自 Kinect.Toolbox）需要永远播放 - {

```
 while (reader.BaseStream.Position != reader.BaseStream.Length)
        {
            KinectRecordOptions header = (KinectRecordOptions)reader.ReadInt32();
            switch (header)
            {
                case KinectRecordOptions.Color:
                    colorReplay.AddFrame(reader);
                    break;
                case KinectRecordOptions.Depth:
                    depthReplay.AddFrame(reader);
                    break;
                case KinectRecordOptions.Skeletons:
                    skeletonReplay.AddFrame(reader);
                    break;
            }
        } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T02:52:12.317

如果您不需要很高的精度，您可以降低采样率，以便您仍然有足够的 fps 来支持您将使用更小的文件大小重播它们。
Kinect 会捕获大量信息，因此最好准确定位您想要播放的内容并仅保存该信息。

# bash - Modify a string in an XML file while not changing an identical string

> ID：14804665
> 
> 赞同：1
> 
> 时间：2013-02-11T01:22:03.753
> 
> 标签：bash, sed

I'm writing a bash script, and I need it to make changes to an XML file, replacing a bunch of different servlet-name items with "disabledController".

I know I can do this using sed, however there are 2 different lines that have the same string, but only one needs to be changed.

For example, I need to change this:

```
<servlet>
        <servlet-name>CreateCertificateAuthorityBackup</servlet-name>
        <servlet-class>com.company.ca.CABackup</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>CreateCertificateAuthorityBackup</servlet-name>
        <url-pattern>createCertificateAuthorityBackup</url-pattern>
    </servlet-mapping> 
```

Into this:

```
<servlet>
        <servlet-name>CreateCertificateAuthorityBackup</servlet-name>
        <servlet-class>com.company.ca.CABackup</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>disabledControler</servlet-name>
        <url-pattern>createCertificateAuthorityBackup</url-pattern>
    </servlet-mapping> 
```

If I use sed like so:

```
sed "s@<servlet-name>CreateCertificateAuthorityBackup.*@<servlet-name>disabledController</servlet-name>@" 
```

It replaces both servlet-name items instead of just the 2nd one. Is there a way to do what I want to do here?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:34:52.543

要仅替换第二次出现，请使用从文件开头开始的嵌套和模式范围：

```
sed -i '0,/CreateCertificateAuthorityBackup/! { 0,//s//disabledController/ }' file 
```

或全部：

```
sed -i '0,/CreateCertificateAuthorityBackup/! { 0,/CreateCertificateAuthorityBackup/s/CreateCertificateAuthorityBackup/disabledController/ }' file 
```

普通命令的解释：

```
0,/CreateCertificateAuthorityBackup/      # is a pattern range from the start of
                                          # the file to the first occurrence of:
                                          # 'CreateCertificateAuthorityBackup'

! { ... }                                 # if not in the above pattern range, do
                                          # every between the braces.

0,/CreateCertificateAuthorityBackup/      # match between the beginning of the
                                          # file again and the next occurrence
                                          # of 'CreateCertificateAuthorityBackup'

s/ ... / ... /                            # perform the necessary substitution 
```

* * *

如果您想替换第三次出现，只需添加另一层嵌套：

```
sed '0,/CreateCertificateAuthorityBackup/! { 0,//! { 0,// s//disabledController/ } }' file 
```

*编辑：*

要在“servlet-mapping”标签之间进行更改，您只需要一个模式范围：

```
sed '/<servlet-mapping>/,/<\/servlet-mapping>/s/CreateCertificateAuthorityBackup/disabledController/' file 
```

[您可能想在此处](http://www.grymoire.com/Unix/Sed.html#uh-29)阅读有关模式范围的更多信息。HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T02:19:13.230

使用 XML 工具修改 XML。与将其视为文本相比，这使得该解决方案更加健壮且符合标准。如果文件按照 XML 规则重新格式化，替换不会失败，如果其他 XML 标准工具对同一文件进行操作，替换也不会中断。

您可以使用`xmlstarlet`来替换`servlet-mapping`其`servlet-name`值是`CreateCertificateAuthorityBackup`这样的：

```
xmlstarlet edit -L \
  -u '/web-app/servlet-mapping/servlet-name[normalize-space(text())="CreateCertificateAuthorityBackup"]' \
  -v "disabledController"  web.xml 
```

给出`web.xml`这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/dtd/web-app_2_3.dtd">
<web-app>
  <servlet>
    <servlet-name>CreateCertificateAuthorityBackup</servlet-name>
    <servlet-class>com.company.ca.CABackup</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>CreateCertificateAuthorityBackup</servlet-name>
    <url-pattern>createCertificateAuthorityBackup</url-pattern>
  </servlet-mapping>
</web-app> 
```

# complexity-theory - 指标函数的重现

> ID：14804667
> 
> 赞同：0
> 
> 时间：2013-02-11T01:22:40.993
> 
> 标签：complexity-theory, big-o

假设您有一个递归函数，其中：

我知道第一个 if 语句的递归关系是 O(n)，而 else 条件的递归关系是 O(logn)。然而，我对计算整个函数的复杂性感到困惑。由于 n 支配 log(n)，所以整体复杂度是否只是 O(n)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:27:22.537

根据定义，大 O 是上限，所以它是 O(n)（因为 O(n) 大于 O(lg(n)）。阅读一些关于大 O 和大 theta [Big-oh vs big- θ](https://stackoverflow.com/questions/3230122/big-oh-vs-big-theta)

编辑：

假设代码看起来像：

```
foo(x,y)
{
 if(y<0):
  //call some other function, or throw an error, otherwise we're stuck in an infinite loop
 else if(y==0):
   return 1
 else if(y%2!=0):
   return x*foo(x,y-1)
 else:
   return foo(x,y/2)*foo(x,y/2)
} 
```

在这里，大 O 是 O(n)，但从技术上讲，它也是 O(n^2)、O(n^3) 等。这是因为大 O 是一个上限。

Big Theta（紧界）是 Theta(n)。

请注意，仅仅因为您可以通过除以 y/2 来减少 y，您不会减少对 foo 的调用，因为您执行的次数是原来的两倍：foo*foo。由于您将函数调用加倍，因此您不会获得 Theta(lg(n)) 的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T01:24:49.340

我相信您可以将其分解为 O(n) 是最坏的情况，而 O(logn) 是最好的情况。

只是给出一些想法，这绝不是一个完整的答案。

# command - Execute Command in Remote Server

> ID：14804672
> 
> 赞同：1
> 
> 时间：2013-02-11T01:23:44.630
> 
> 标签：command, execute

My Remote Server Name: MyServerName Operating System: Windows Server 2008 R2 with SP1 DomainName: MyDomainName UserName: MyUserName Password: MyPassWord

Iam using Remote Desktop Connection Utility from my local desktop and able to connect to the remote server using administrator login (assuming MyUserName & MyPassWord as administrator login).

In my remote desktop I have to open cmd prompt and execute the below command:

C:\Users\MyUserName\hpacu

Where "hpacu" is a utility which will execute there itself in the command prompt and gives me an output in the same command prompt itself.

I'm preparing an automation for this using Windows Forms C#.

My Application has:

1.  TextBox - To take server name from the user(myself). I will give the correct server name.

2.  Button - To connect to the server using my administrator credentials and execute the hardcoded command remotely.

3.  PsExec - This tool is placed in D-Drive in my local computer. Exact location of the file is D:\PSTools\PsExe.exe

Note: I'm not collecting username and password for accessing remote machine as I would right click on the windows forms exe and execute it as different user - > Give the Administrator credentials along with the domain name of the server, so It wont ask me for username and password to access the server machine.

My C# button click code:

string arg = "cd /d d:/PStools & psexec.exe \\" + txtServerName.Text + " C:\Users\" + MyUserName + "\hpacu & Pause";

System.Diagnostics.Process.Start("CMD.Exe", "/c " + arg);

When I'm clicking on the button, i'm able to connect to the remote machine. I'm also able to launch the command prompt and execute the command. But finally I'm getting the below error: "No process is on the other end of the pipe."

Where as when i try to execute the command manually in the traditional way(that is by connecting via Remote Desktop Utility), the command works perfectly and gives me the output. Please guide me on how to proceed.

# asp.net - 仅使用 Json、html、jquery、Knockout.js 的 .net 3.5 webforms 网站的架构

> ID：14804673
> 
> 赞同：1
> 
> 时间：2013-02-11T01:24:04.993
> 
> 标签：asp.net, json, knockout.js, webforms, breeze

我正在启动一个需要在 .net 3.5 webforms 网站中运行的有点新建的 web 应用程序，但在与当前站点的交互方面将分离。我正在尝试设计一种架构，以最大限度地减少或消除网络表单的使用。到目前为止，我已经想出了在 json 中使用 wcf Web 服务（不幸的是，由于 3.5 的限制，Web api 不是一个选项），并且只在客户端使用了 Knockout.js。理想情况下，我不会添加 aspx 页面，而是直接添加 html 页面来构建 UI 前端。

1）这可能/合理吗？

2) 我是否能够使用带有 knockout.js 的 html 页面而不是 aspx 页面来实现诸如 windows 身份验证和用户角色访问安全性之类的 asp.net 实用程序功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T18:09:08.953

如果您希望最大限度地减少实际工作量并希望使事情尽可能简单，我建议您至少看看使用 ServiceStack。它会做你希望 WebAPI 做的大部分事情，但它运行在 NET3.5 上，并且它有不同的格式可供使用，包括 SOAP（是的，人们仍然使用它）。最好的部分是您不必编写任何其他代码来获取所有格式。它还能够像输出 JSON、JSV、XML、SOAP 等一样轻松地将 HTML 输出为一种格式。

您最好使用 Knockout.js 和 BreezeJS ( [http://www.breezejs.com](http://www.breezejs.com) ) 来进行更改跟踪。 [http://www.servicestack.net/](http://www.servicestack.net/)

# sql - 批量插入字段映射不正确

> ID：14804679
> 
> 赞同：1
> 
> 时间：2013-02-11T01:25:01.087
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在尝试进行批量插入。

这是我的 sql 脚本

```
GO
Use test
DROP TABLE PDTEST
create table pdtest
(
 CustID INT IDENTITY(1,1),
 work_phone_extension varchar(5),
 residential_postal_or_zip_code varchar(30),
 residential_street_address_line_1 varchar(30),
 residence_phone varchar(17),
 work_phone varchar(17),
 name_part varchar(30),
 mailing_city varchar(20),
 mailing_postal_or_zip_code varchar(30),
 mailing_street_address_line_2 varchar(30),
 mailing_street_address_line_1 varchar(30),
 cell_phone varchar(17),
 residential_city varchar(20),
 residential_country_and_province_or_state varchar(10),
 mailing_country_and_province_or_state varchar(10)
)
BULK INSERT pdtest
FROM 'C:\Python27\Scripts\pd.csv'
WITH
(
 FIELDTERMINATOR = ',',
 ROWTERMINATOR = '\n',
 KEEPNULLS,
 FIRSTROW = 2
)
GO 
```

这是我的文本文件行

```
,91234,,,,WOLFIE HOWLETT,416-,Toronto,,,,,Toronto,CA_ON,CA_ON 
```

我所有的专栏都搞砸了。名字部分应该有 Wolfie Howlett。它有 416- 然后工作电话分机应该为空，但它的值是 91234 并且住宅邮政或邮政编码为空，这是错误的。

这里的字段映射是错误的。我应该怎么做才能纠正它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T01:44:18.610

所以你的问题是你有一个逗号作为你的第一个字符，所以 SQL 将它前面的空格作为列值并将其插入到 CustID 中，所以一切都右移一个。因此，要么在 CustID 之前的测试表中创建一个虚拟列，要么删除行中的第一个逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T04:18:51.873

很抱歉，但您必须编辑您的文本文件。它正在创建语法错误，因此必须进行修改。我可以建议您删除和添加具有相同名称和相同位置的新文本文件的方法。

看到您的语法，您似乎已经为您的第一列提供了“自动增量”。因此，您无需为 CustID 提供值，也无需将起始逗号保留在 csv 文件中。

Sql 将自行获取 CustId 值。为 csv 文件提供以下语法

```
91234,,,,WOLFIE HOWLETT,416-,Toronto,,,,,Toronto,CA_ON,CA_ON 
```

希望它会有所帮助！

# java - Java中列表的实现

> ID：14804680
> 
> 赞同：1
> 
> 时间：2013-02-11T01:25:06.160
> 
> 标签：java

我必须为社会安全号码编写一个链表并自己实现所有操作。我编写了 Node 类和列表，但在实现 sortedGet(int index) 方法时遇到了麻烦。我在这种方法中做错了什么？

```
package listpackage;

import listpackage.SocialNode;

public class SortedListRefBasedDuplicates{
private SocialNode head;
private int numItems = 0;

public SortedListRefBasedDuplicates(){
    head = null;
}

public SocialNode getHead(){
    return this.head;
}

public boolean sortedIsEmpty(){
    return numItems == 0;
}

public int sortedSize(){
    return numItems;
}

public SocialNode sortedGet(int index){
    if(index == 0)
        return head;
    //else if(index >= 0 && index < sortedSize()){
        //for (int i = 0; i < index; i++){
            //head = head.getNext();
        //}
        //return head;
    //}else{
        //return null;
    //}
    else
        return null;
}

public void sortedAdd(int social){
    if(this.sortedIsEmpty()){
        head = new SocialNode(social);
        head.setNext(null);
        numItems++;
    }else{
        int socialIndex = locateIndex(social);
        if(socialIndex == this.sortedSize()){
            SocialNode curr = sortedGet(socialIndex-1);
            SocialNode scn = new SocialNode(social);
            curr.setNext(scn);
            numItems++;
        }else{
            if(socialIndex == 0){
                SocialNode scn = new SocialNode(social);
                scn.setNext(head);
                head = scn;
                numItems++;
            }else{
                SocialNode curr = sortedGet(socialIndex-1);
                SocialNode prev = sortedGet(socialIndex-2);
                SocialNode scn = new SocialNode(social, curr);
                prev.setNext(scn);
                numItems++;
            }
        }
    }
}

public void sortedDelete(int social){

}

public int locateIndex(int social){
    if(numItems == 0)
        return 0;
    else{
        int index = 0;
        while(head != null){
            if(head.getData() < social){
                index ++;
                head = head.getNext();
            }
            else{
                break;
            }
        }
        return index;
    }
  }
}

package listpackage;

public class SocialNode{
private int social;
private SocialNode next;

public SocialNode(int social){
    this.social = social;
    next=null;
}

public SocialNode(int social, SocialNode nextNode){
    this.social = social;
    this.next = nextNode;
}

public int getData(){
    return social;
}

public SocialNode getNext(){
    return next;
}

public void setSocial(int s){
    social = s;
}

public void setNext(SocialNode s){
    next = s;
}
} 
```

添加了 sortedDelete 方法

```
public void sortedDelete(int social){
if(sortedIsEmpty()){
    System.out.println("List is Empty");
}
else if(sortedSize() == 1){
    if(head.getData() == social)
        head = null;
}else{
    SocialNode x = head;
    if(x.getData() == social)
        head = head.getNext();
    else{
        int count = 1;
        while(x!= null){
            if(x.getData() == social && x.getNext() != null){
                sortedGet(count-1).setNext(sortedGet(count+1));
                break;
            }else{
                sortedGet(count-1).setNext(null);
            }
            x = x.getNext();
            count ++;
        }
    }
  }
} 
```

给定节点的值，如何从列表中删除节点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T01:28:38.977

我看到的主要问题是您通过直接修改`head`实例变量来迭代列表，因此在您迭代列表时会修改列表，您应该改用局部变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T03:49:37.047

sortedList 的完整实现

```
package listpackage;

import listpackage.SocialNode;

public class SortedListRefBasedDuplicates{
private SocialNode head;
private int numItems = 0;

public SortedListRefBasedDuplicates(){
    head = null;
}

public SocialNode getHead(){
    return this.head;
}

public boolean sortedIsEmpty(){
    return numItems == 0;
}

public int sortedSize(){
    return numItems;
}

public SocialNode sortedGet(int index){
    SocialNode s = head;
    if(index == 0)
        return s;
    else if(index >= 0 && index < sortedSize()){
        for (int i = 0; i < index; i++){
            s = s.getNext();
        }
        return s;
    }else{
        return null;
    }
}

public void sortedAdd(int social){
    if(this.sortedIsEmpty()){
        head = new SocialNode(social);
        head.setNext(null);
        numItems++;
    }else{
        int socialIndex = locateIndex(social);
        if(socialIndex == this.sortedSize()){
            SocialNode curr = sortedGet(socialIndex-1);
            SocialNode scn = new SocialNode(social);
            curr.setNext(scn);
            numItems++;
        }else{
            if(socialIndex == 0){
                SocialNode scn = new SocialNode(social);
                scn.setNext(head);
                head = scn;
                numItems++;
            }else{
                SocialNode curr = sortedGet(socialIndex);
                SocialNode prev = sortedGet(socialIndex-1);
                SocialNode scn = new SocialNode(social, curr);
                prev.setNext(scn);
                numItems++;
            }
        }
    }
}

public void sortedDelete(int social){
    if(sortedIsEmpty()){
        System.out.println("List is Empty");
    }
    else if(sortedSize() == 1){
        if(head.getData() == social){
            head = null;
            numItems--;
        }
    }else{
        SocialNode x = head;
        if(x.getData() == social){
            head = head.getNext();
            numItems--;
        }
        else{
            int count = 1;
            x = x.getNext();
            while(x!= null){
                if(x.getData() == social && x.getNext() != null){
                    sortedGet(count-1).setNext(sortedGet(count+1));
                    numItems--;
                }else if(x.getData() == social && x.getNext() == null){
                    sortedGet(count-1).setNext(null);
                    numItems--;
                }
                x = x.getNext();
                count ++;
            }
        }
    }
}

public int locateIndex(int social){
    SocialNode x = head;
    if(numItems == 0)
        return 0;
    else{
        int index = 0;
        while(x != null){
            if(x.getData() < social){
                index ++;
                x = x.getNext();
            }
            else{
                break;
            }
        }
        return index;
    }
}
} 
```

# matlab - Matlab 近似等式 x*ln(x) = 3

> ID：14804683
> 
> 赞同：0
> 
> 时间：2013-02-11T01:25:31.977
> 
> 标签：matlab

函数“求解”适用于多项式，但当我输入时

```
syms x
solve ('x*ln(x)=3', x) 
```

我得到 3/lambertw (0,3)

我知道我可以向后工作，但变量 x 在一个方程中出现了 4 次，这使得它相当不方便。感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:53:04.177

如果您想要一个数字解决方案，则无需先走符号路线：

`x*ln(x)-3=0`您可以使用`fzero`（从零开始足够远以避免负数的对数）简单地求解方程：

```
x = fzero(@(x)x*log(x)-3, 10) 
```

# java - 正则表达式仅忽略字符串中的价格

> ID：14804686
> 
> 赞同：1
> 
> 时间：2013-02-11T01:25:49.257
> 
> 标签：java, regex

例如：
*输入*=> **"Some.Random ,,Test.Data Here with price 1,23.456...,$$$"**
*输出匹配*=> 除**1,23.456之外的所有内容**

*价格* 定义为以数字开头和结尾的任何字符串，具有一个或多个字符分隔符。例如：

*请注意*，关于输入的所有已知信息是它可以是任意长度的字符串，但其中嵌入了价格。

基本上要解决的问题是使用 String ReplaceAll 从输入字符串中提取价格，这是系统中的内置运行时函数。所以我会说 ReplaceAll(Regex,EMPTY_String) 只返回输入中的价格

我一直在尝试“ **[\D&&[^(?<=\d)\D(?=\d)]]** ”，其中我将匹配所有非数字和任何不会出现的非数字b/wa 数字，仅使用正则表达式。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:34:30.887

这个[正则表达式（演示）](http://fiddle.re/bxm9)应该可以解决问题：

```
^(.*?)(?:\d[0-9.,]*\d)(.*)$ 
```

作为Java字符串：

```
"^(.*?)(?:\\d[0-9.,]*\\d)(.*)$" 
```

替换为第 1 组和第 2 组捕获的组：

```
$1$2 
```

如：

```
String output = input.replaceAll("^(.*?)(?:\\d[0-9.,]*\\d)(.*)$", "$1$2"); 
```

# html - 在 CSS 中，我的自定义字体的底部被截断（g 和 y）

> ID：14804698
> 
> 赞同：10
> 
> 时间：2013-02-11T01:27:18.197
> 
> 标签：html, css

我不明白为什么在我的段落中掉线以下的字母（如 g 和 y）会被截断。我尝试将线高设置得更高，但它仍然将它们切断。我在 px、pt 和 em 中使用了字体大小，但仍然没有运气。现在，当我将字体大小设置得更大（如 3.0em）时，问题就消失了。但我需要字体大约是这个大小。

这是链接：[http ://sportegy.com/font-test/font-test.html](http://sportegy.com/font-test/font-test.html)

您需要使用该链接并查看我拥有的 .ttf 字体才能真正看到问题所在。不过，我也会在这里粘贴我的 HTML。

```
<html>
<head>
<style>
@font-face {
font-family: lib-font;
src: url('css/LiberationSansNarrow-Regular.ttf');
}
@font-face {
font-family: lib-bold;
src: url('css/LiberationSansNarrow-Bold.ttf');
}   
</style>
</head>
<body>

<span style='font-family: lib-font;color: #232322;font-size: 1.0em;'>   
The quick brown foxy was jumping over the green doggy.<br/>
The quick brown foxy was jumping over the green doggy.<br/>
The quick brown foxy was jumping over the green doggy.<br/>
The quick brown foxy was jumping over the green doggy.<br/>
The quick brown foxy was jumping over the green doggy. 
</span> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-11T03:34:23.113

尝试

```
line-height: normal; 
```

似乎解决了[一些人的问题](https://stackoverflow.com/a/699659/1156119)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T01:40:45.633

尝试将行高增加到类似`line-height: 1.2;`

如果您将字体大小增加到 1.1em，它不会被截断。

我建议使用像[Normalize](http://necolas.github.com/normalize.css/)这样的 CSS 重置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T03:59:55.930

我只能以精确的 16 像素（在我的浏览器上为 1em）复制它，所以我怀疑是[这里](https://stackoverflow.com/questions/2967004/why-are-my-descenders-being-cut-off-when-using-css-font-face)和[这里](http://www.dafont.com/forum/read/8058/tops-bottoms-of-fonts-being-cut-off-how-can-i-correct-this)描述的字体问题。

您可以按原样使用字体并避免 16 像素，自己修复字体指标（如链接中所述），向字体创建者发送电子邮件，或选择其他字体。那里有很多好的免费字体，一切顺利:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-25T13:12:36.137

老实说，我发现解决此错误的唯一方法似乎是更改字体大小。某些自定义字体似乎存在一些错误，主要是在 Chrome 中。

我有同样的问题并将字体大小从`30px`to更改为`32px`现在很好:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-12T18:35:03.923

这是因为字体文件的descender值太短了。降序是像 p,g,q 或 y 这样的字母。这些字母到达基线下方，因此字体文件应包含一个大于最低下降者的值。浏览器将上行和下行值视为字体“容器”，因此它将剪切任何超出这些值的元素。因此，CSS 无法解决此问题，因为问题存在于字体文件本身。

为了修复它，唯一的方法是编辑字体文件并更改这些值。尝试联系原始设计师。

不幸的是，免费字体必然会发生这种情况......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-12-12T08:11:53.360

就我而言：

```
letter-spacing: normal; 
```

# ios - 在预定的CGPoints之间随机选择？

> ID：14804700
> 
> 赞同：1
> 
> 时间：2013-02-11T01:27:31.650
> 
> 标签：ios, cocos2d-iphone, cgpoint, arc4random

我的游戏中有三个预先确定的生成点，已存储到 CGPoints ivars 中

```
CGPoint spawnPos1 = ccp(50, 50);
CGPoint spawnPos2 = ccp(150, 150);
CGPoint spawnPos3 = ccp(250, 250); 
```

我想做的是在这些点之间随机选择。之后，我会将精灵的位置设置为该点。我可以以某种方式使用 arc4random 吗？

我已经看到了大量关于生成随机点的示例，并且我已经在我的游戏中这样做了，但是我对如何使用预定点一无所知？任何建议将不胜感激？

所以从我调用的初始化方法 [self createSpawnPoint]; 我有这三个点，在那里我将把它设置为 spawnPoint，这只是一个 ivar，我将用它来以不同的方法设置我的 sprite。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:31:25.077

只需使用`arc4random() % 3`来选择哪个值：

```
int spawnChoice = arc4random() % 3;
CGPoint spawnPoint = CGPointZero;

if(spawnChoice == 0){
  spawnPoint = CGPointMake(50.0, 50.0);
}
else if(spawnChoice == 1){
  spawnPoint = CGPointMake(150.0, 150.0);
}
else{
  spawnPoint = CGPointMake(250.0, 250.0);
} 
```

希望有帮助！

# ruby-on-rails - 生产中的线程导致数据库连接过多错误

> ID：14804701
> 
> 赞同：1
> 
> 时间：2013-02-11T01:27:49.963
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试做一个线程化的活动记录查询。它在开发中正确测试，但`PG::Error (FATAL: sorry, too many clients already)`在生产中给我一个错误。对于开发和生产，我的池大小完全相同。这是我试图在线程中运行的代码片段：

```
threads = []
acs.each do |a|
  threads << Thread.new do
    activity = Hash.new
    ActiveRecord::Base.connection_pool.with_connection do
      whouser = User.find(a.whoid)
      target = User.find(a.targetid) if !(a.targetid.blank?)  
      activity["user_name"] = whouser.user_name
      activity["user_id"] = whouser.id
      activity["f_uid"] = whouser.f_uid
      ....
    end
  end
end
threads.each { |t| t.join } 
```

对此的任何见解都会令人惊叹！

PS我正在我的开发计算机上测试生产和开发，但将其作为生产运行。它在我的实际生产服务器上也有同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T02:41:27.400

在耗尽与服务器的连接数之前，您只能创建这么多线程。最好设置一个简单的工作队列并让每个线程在此列表中弹出直到完成。

例子：

```
tasks = acs
threads = [ ]

10.times do
  threads << Thread.new do
    while (task = tasks.pop)
      # ...
    end
  end
end 
```

该`Thread.join`组件将保持不变。

# database - 使用 JMeter 生成随机 JSON 字符串以插入数据库

> ID：14804709
> 
> 赞同：0
> 
> 时间：2013-02-11T01:29:19.943
> 
> 标签：database, json, jmeter

我正在处理需要连接到数据库并在该数据库中插入大量行的项目。我目前在该数据库中有两列-

```
ID         String PrimaryKey
ACCOUNT    String 
```

所以我需要在 JMeter 的帮助下在这两列中插入很多行。我可以`random Unique ID`使用这个为 ID 列生成 -

`${__BeanShell(UUID.randomUUID().toString())}`

但是如何`Random JSON String`为该`ACCOUNT`列生成一个？

或者，每当我尝试插入数据库时​​，有什么方法可以继续修改下面的 JSON 字符串？

`{"lv":[{"v":{"regId":null,"user":null,"Id":996},"cn":1}],"lmd":1360185}`

每当我插入数据库时​​，每个线程的含义，然后在上面的 JSON 字符串中，应该为每个线程修改一些内容，然后将其插入数据库。

任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:32:04.987

为什么不为 JSON 字符串创建一个 POJO，然后使用构造函数为属性分配一些随机值。然后只需将 POJO 序列化为 JSON 并写入即可。

这样你就可以编写一个循环来构造你的对象，并且每个构造都会生成一个与上一个略有不同的对象。

# jquery - jQuery Cycle - 一次停止循环多张幻灯片

> ID：14804716
> 
> 赞同：1
> 
> 时间：2013-02-11T01:30:04.157
> 
> 标签：jquery, jquery-cycle

所以我有一个自定义过渡，它一次为各种元素设置动画。当用户快速单击下一个幻灯片按钮时（在动画完成之前）会导致各种问题。我该如何解决这个问题？我尝试了一个在链接上添加/删除活动类的想法，但这没有用。

这是一个显示问题的 jfiddle：http: [//jsfiddle.net/SHRA6/12/](http://jsfiddle.net/SHRA6/12/)

这是我的js：

```
$.fn.cycle.transitions.slideCustom = function($cont, $slides, opts) {
    $caption = $('.serverbig')
    $feature = $('.featurehol')
    $heading = $('h2')
    opts.fxFn = function(curr,next,opts,cb,fwd) {
        $feature.animate({ top: '350px' }, 500, opts.easing);
        $heading.animate({ left: '-550px' }, 500, opts.easing);
        $caption.animate({ right: '-550px' }, 500, opts.easing,  function() {
            $(curr).animate({ opacity: 0 }, 500, opts.easing, function() {
            });         
            $(next).css({ display: 'block'}).animate({ opacity: 1 }, 500, opts.easing);
            $feature.animate({ top: '66px' }, 500, opts.easing);
            $heading.animate({ left: '0' }, 500, opts.easing);
            $caption.animate({ right: '0px' }, 500, opts.easing, function() {
            if(cb) cb();
            });
        });
    }
}
 $('#sliderb').cycle({ 
    fx:     'slideCustom', 
    speed:  'slow', 
    timeout: 0, 
    next:   '.nextslide', 
    prev:   '.prevslide',
    easing: 'easeInOutBack',
    slideExpr: '.slide',
}); 
```

另一个问题导致背景（主幻灯片）闪烁，而不是使用不透明动画淡入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:59:04.210

您可以尝试在动画之前使用[.stop()](http://api.jquery.com/stop/)`$feature.stop().animate(/* your code */)`等。

如果您真的想禁用控件，则必须连接到`onPrevNextEvent:`. [在另一个堆栈溢出问题](https://stackoverflow.com/questions/8001490/disable-a-next-previous-buttonlink-temporarily-when-clicked-in-jquery-cycle-pl)中有一个优雅的解决方案。

他们使用控件顶部的透明块元素来在事件进行时禁用它们。签出最后的编辑并摆弄问题。

编辑：由于这条线，您遇到了奇怪的行为

```
 $caption.animate({ right: '0px' }, 500, opts.easing, function() {
            if(cb) cb();
 }); 
```

进行回调检查并将其放在此动画调用之后。

# php - 触发在纪元时间安排的 MySql 事件

> ID：14804717
> 
> 赞同：0
> 
> 时间：2013-02-11T01:30:18.680
> 
> 标签：php, mysql, epoch

我将如何触发查询，例如更改列状态（布尔值），以使用 PHP 在特定时期发生？

我猜它会像mysql查询->创建事件->定义改变

最好的方法是什么？

对不起，我在这里说英语，西班牙语，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T01:41:56.407

您可以使用 cron 作业或使用 CREATE EVENT 语法（在 MySQL 5.1.6 及更高版本中可用）

IE

```
mysql> CREATE EVENT yourevent
    ->     ON SCHEDULE AT '2013-02-10 23:59:00'
    ->     DO ALTER TABLE SYNTAX HERE; 
```

如果要创建重复事件，可以在`EVERY interval`之后添加`AT`（[请参阅](http://dev.mysql.com/doc/refman/5.1/en/create-event.html)）

更多信息[在这里](http://dev.mysql.com/doc/refman/5.1/en/events.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T01:41:57.970

您可以设置一个 cron 作业来执行此操作。在服务器上，您可以执行以下操作：

```
sudo crontab -u root -e 
```

这将为 root 用户打开 cron 作业以进行编辑

然后输入您希望脚本运行的时间，以及您要运行的脚本

```
0 10 * * * php/foo.php 
```

这将在每天 10:00 运行 foo.php 脚本。

# javascript - JavaScript 嵌套函数原型范围

> ID：14804718
> 
> 赞同：2
> 
> 时间：2013-02-11T01:30:38.267
> 
> 标签：javascript, scope, prototype

我仍然无法弄清楚如何在 JavaScript 中管理范围。在这个特定的示例中，我有一个包含某些属性的绘图函数和一个需要基于数组绘制线条的函数。

```
function Draw (canvas)
{
    this.ctx = canvas.getContext('2d');
    this.street_size = 20;
}

Draw.prototype.street = function (MAP)
{

    MAP.forEach(function (name)
    {
        this.ctx.moveTo(name.start.x,name.start.y);
        this.ctx.lineTo(name.end.x,name.end.y)
        this.ctx.stroke();
    });
} 
```

当然，forEach 函数内的“this.ctx”返回“undefined”。如何确保将 Draw() 的变量传递给 forEach 函数（无需执行 ctx = this.ctx 之类的操作）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T01:32:21.783

您可以使用[`.bind` *^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)：

```
MAP.forEach(function (name) {
    this.ctx.moveTo(name.start.x,name.start.y);
    this.ctx.lineTo(name.end.x,name.end.y)
    this.ctx.stroke();
}.bind(this)); 
```

[了解更多关于`this`.](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T01:34:08.017

在方法范围内将对象实例变量声明为新变量是很常见的：

```
var self = this;
MAP.forEach(function (name) {
    self.ctx.moveTo(... 
```

这样做的好处是可以让您继续`this`照常使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-11T01:32:55.997

`this`作为第二个参数传递给`forEach()`.

```
MAP.forEach(function (name)
{
    this.ctx.moveTo(name.start.x,name.start.y);
    this.ctx.lineTo(name.end.x,name.end.y)
    this.ctx.stroke();
}, this); 
```

第二个参数设置`this`回调中的值。

* * *

[MDN`forEach()`文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)-`array.forEach(callback[, thisArg])`

# javascript - 滚动上的 Twitter 引导导航栏阴影

> ID：14804725
> 
> 赞同：6
> 
> 时间：2013-02-11T01:31:49.007
> 
> 标签：javascript, html, css, twitter-bootstrap

我希望为 Twitter 引导导航栏执行以下 [http://codepen.io/anon/pen/eIfdn](http://codepen.io/anon/pen/eIfdn) 。它只是在滚动时向导航栏添加阴影。任何建议都会有所帮助，谢谢。

```
.navbar {
*position: relative;
top: 0;
left: 0;
width: 100%;
height: 80px;
z-index: 999;
-webkit-box-shadow: 0 8px 8px rgba(0, 0, 0, 0.5);
-moz-box-shadow: 0 8px 8px rgba(0, 0, 0, 0.5);
box-shadow: 0 8px 8px rgba(0, 0, 0, 0.5);
display: none;
*z-index: 2;
margin-bottom: 20px;
overflow: visible;
} 
```

那就是我改变的css，我从上面添加了js。

这是我使用的 JS

```
$(document).ready(function(){
 $(window).scroll(function(){
  var y = $(window).scrollTop();
  if( y > 0 ){
  $("#navbar").css({'display':'block', 'opacity':y/20});
  } else {
  $("#navbar").css({'display':'block', 'opacity':y/20});
  }
 });
}) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-11T02:51:19.303

这是让你开始的东西：http:
[//jsfiddle.net/panchroma/pyYfG/](http://jsfiddle.net/panchroma/pyYfG/)

**HTML**

```
<div class="navbar" data-spy="affix">
<div class="navbar-inner">
.... standard navbar stuff ...
</div>
</div>
<div id="top-shadow"></div>
.... page content ... 
```

**CSS**

```
#top-shadow {
position: fixed;
top: 0;
left: 20px;
width: 100%;
height: 42px;
z-index: 999;
-webkit-box-shadow: 0 8px 8px rgba(0, 0, 0, 0.5);
-moz-box-shadow: 0 8px 8px rgba(0, 0, 0, 0.5);
box-shadow: 0 8px 8px rgba(0, 0, 0, 0.5);
display: none;
}

.navbar.affix{ /* position fixed navbar */
top:0; 
width:100%;
}

/* UPDATE BELOW */
.navbar{    
z-index:1000; /* lift .navbar above #top-shadow */
} 
```

重要的是我正在使用附加行为来锁定导航栏，并且我正在将阴影应用于导航栏下方的新 div。我认为尝试将阴影直接添加到导航栏本身会更容易管理。

祝你好运！

# python - Tkinter：如何动态创建一个可以被销毁或删除的小部件？

> ID：14804735
> 
> 赞同：2
> 
> 时间：2013-02-11T01:33:07.127
> 
> 标签：python, user-interface, tkinter

我正在寻找一种方法来创建令人作呕的小部件（很可能是标签），但需要注意的是它们可以在以后被删除或解包。

我可以很好地生成小部件，但没有为它们分配名称。如果可能的话，我不明白我将如何删除某个匿名小部件。

我的第一个直觉是动态地创建具有稳定约定的变量名，但这可能会不必要地打开一罐蠕虫。这个想法表达如下。我希望能够删除某个 Button 小部件，而在运行时不知道我将处理多少。谢谢你。

```
from Tkinter import *
import time
import ttk

def onDoubleClick(event):
    item = t.selection()
 #print "you clicked on", t.item(item,"text")

    if (t.item(item,"text")=="Start IO"):
        Button2 = Button(frame2,text="Button2",command=but).pack()

def but():
    pack_forget()

root=Tk()
root.geometry("800x300")
frame1 = Frame(root)
frame2 = Frame(root)

t=ttk.Treeview(frame1)
t.heading("#0",text="Test steps")
t.insert("",0,"IO",text="IO")
t.insert("IO","end",text="Start")
t.bind("<Double-1>", onDoubleClick)
t.pack()
frame1.pack(side=LEFT)
frame2.pack(side=LEFT) 
```

**编辑：**我的功能要求无疑是短视的。我的最终目标是同时拥有一个标签小部件和一个按钮，两者都包含测试启动器中的“步骤”。单击该按钮将从 GUI 中删除其自身及其各自的标签。我能够创建两个小部件并在 Button 的回调中删除其中任何一个，但要 pack_forget 两者，我相信我需要**定义**一个函数。我相信我的问题在于传递对**def removeStep**的正确引用一个用例如下图所示：....[如果这可以解决我的 RTFM 请随时告诉我，我只是找不到它]

测试：制作 PB&J

步骤 0：获取面包 [删除步骤]

步骤 1：涂抹 PB [删除步骤]

步骤 2：涂抹果冻 [删除步骤]

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T01:42:22.790

您需要将动态创建的小部件存储在列表中。有类似的东西

```
dynamic_buttons = []

def onDoubleClick(event):
    ...
    button = Button(...)
    dynamic_buttons.append(button)
    button.pack() 
```

然后，您可以访问要删除的按钮，例如，

```
dynamic_buttons[0].destroy() 
```

编辑：关于您的用例的更多信息，我可能会这样做

```
class RemovableTask(Frame):
    def __init__(self, master, name, **options):
        Frame.__init__(self, master, **options)
        lbl = Label(self, text=name)
        btn = Button(self, text='Remove step', command=self.destroy)
        lbl.grid(row=0, column=0)
        btn.grid(row=0, column=1) 
```

然后只需创建名称为“步骤 0：获取面包”的 RemovableTask 实例，然后将它们网格化或打包在一列中。其他一切都会自动处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T01:46:18.397

您在这里有几个选择。第一个选项是将动态创建的按钮存储在*列表中*。然后，您可以随时添加/删除按钮——并且您保留对所有按钮的引用。干净简单。

第二种选择是`config`在创建按钮（并引用它）之后使用该方法来销毁小部件 - 或者至少将其从显示中删除（`widget.pack_forget` **实际上并不会破坏小部件！** 它可以重新-稍后打包。要实际销毁小部件，您需要调用`widget.destroy`）...：

```
import Tkinter as tk

root = tk.Tk()

def add_new():
    b = tk.Button(root,text="Click to destroy")
    b.pack()
    b.config(command=b.pack_forget) 

b = tk.Button(root,text="Add_new",command=add_new)
b.pack()
root.mainloop() 
```

# plone - TinyMCE 工具栏不为匿名用户显示

> ID：14804738
> 
> 赞同：4
> 
> 时间：2013-02-11T01:33:18.233
> 
> 标签：plone, dexterity

我有自定义的敏捷类型：[文件夹](https://github.com/l34marr/tbfac.content/blob/master/tbfac/content/folder.py)是文件夹，[文章](https://github.com/l34marr/tbfac.content/blob/master/tbfac/content/article.py)可以添加到该文件夹​​中。此外，匿名用户可以添加文章。为了快速测试，我在 ZMI 中修改文件夹的安全设置，打开角色`Add portal content`权限。`Anonymous`

不知何故，现在匿名用户可以添加文章，但 TinyMCE 工具栏不显示，当登录用户添加文章时效果很好。似乎 TinyMCE 工具栏需要为匿名用户提供更多设置。有什么提示吗？

![匿名用户添加类型时 TinyMCE 工具栏不显示](../Images/6a9c409e95abc61895bd13d3883746e4.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T07:50:47.633

只是因为只有经过身份验证的用户才加载微型 MCE 的 javascript。要使其对所有人可用，请转到 ZMI -> portal_javascript，搜索 tiny_mce，然后取消选中“仅限经过身份验证的用户？” 复选框。

这会成功的。

# ruby-on-rails - 惯用的 Rails 方式来放置微博的文本框和提交按钮，避免“渲染'表单'”脚手架代码？

> ID：14804739
> 
> 赞同：0
> 
> 时间：2013-02-11T01:33:21.430
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我今天一直在尝试 Ruby + Rails。

在创建标准`User`和`Micropost`模型、视图和控制器之后，我想添加一个页面，作为用户，我可以添加一个新的微博。

到目前为止，由于实际上没有进行身份验证，我很高兴有一个页面可以通过 url 获取用户 ID，并且只有一个文本框形式的内容，可以在其中输入微博添加到网站。

我已经连接了所需的路由：

```
match 'users/new_micropost/:user_id' => 'Users#new_micropost' 
```

以及控制器的代码：

```
def new_micropost
  @user = User.find(params[:user_id])
  @micropost = Micropost.new #still not so sure about this
end 
```

我已将粘贴`microposts/new.html.erb`的文件复制到一个名为的新文件中`users/new_micropost.html.erb`：

```
<h1>New <%= @user.name %>'s micropost</h1> #added this thingy

<%= render 'form' %>

<%= link_to 'Back', users_path %> 
```

什么是最好的方法来替换惯用的方法来替换`<%= render 'form' %>`只打印一个文本框，询问我想在网站上发布的微博是什么以及一个提交按钮？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:54:27.140

对于表单，只需创建您自己的表单，传入`@micropost`变量，例如：

```
<%= form_for @micropost do |f| %>
  <%= f.text_area :body, :size => "60x12" %>
  <%= f.submit "Post" %>
<% end %> 
```

查看[这些指南以获取更多信息](http://guides.rubyonrails.org/form_helpers.html)。您可能需要`create`在控制器中为此操作创建单独的操作。

此外，如果您希望微博与用户相关联，您需要添加以下内容：

```
class User < ActiveRecord::Base
  has_many :microposts, :dependent => :destroy
end

class Micropost < ActiveRecord::Base
  belongs_to :user
end 
```

然后你会改变你的新的和创造的行动，比如：

```
def new_micropost
  @user = User.find(params[:user_id])
  @micropost = @user.microposts.build
end

def create_micropost
  @user = User.find(params[:user_id])
  @micropost = @user.microposts.build(params[:micropost])
  if @micropost.save
    redirect_to some_path
  else
    render 'new_micropost'
  end
end 
```

[单击此处阅读有关关联的更多信息](http://guides.rubyonrails.org/association_basics.html)。

请注意，您可能必须更新表单以提交到正确的控制器：`<%= form_for @micropost, url: create_micropost_path(@user.id) do |f| %>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T01:47:08.470

在 Rails 中，控制器有 7 个标准动作，与资源的创建、读取、更新和删除有关。如果你把你的动作命名`new`为 MicropostsController 就好了。您可以使用`form_for`标签创建一个文本区域和一对用于提交和取消的按钮。例子：

```
<%= form_for @micropost do |f| %>
   <%= f.label :content %>
   <%= f.text_area :content %>
   <%= f.submit %>

<% end %> 
```

但是在运动中学习最简单的方法是使用 Rails 生成器，如下所示：

```
rails generate scaffold Micropost content:text 
```

# python - Opencv 与 wxpython 的集成

> ID：14804741
> 
> 赞同：6
> 
> 时间：2013-02-11T01:33:44.097
> 
> 标签：python, opencv, numpy, wxpython, python-imaging-library

我只是想将来自我的网络摄像头的 opencv 视频流集成到一个比 highgui 所能提供的更复杂的 gui 中，没有什么特别的，只是几个按钮和其他东西，但事实证明它并不是那么微不足道。我找不到任何可以开始设计 gui 的基本示例。我尝试将此[代码](https://wxpython-users.googlegroups.com/attach/90dcdd863e015578/cv_webcam.py?view=1&part=2)转换为新的 opencv 接口，结果很差。我是 opencv、numpy 和 gui 设计的新手。有时确实会流式传输视频，但大多数时候它只是挂在那里。我想我的一个错误可能是在 wx.BitmapFromBuffer(col, row, img) 中，因为在旧版本中他们使用 pil 图像格式，现在它使用 numpy 数组，所以在原始代码中使用了 pil 函数“imageData”，而不是正如我正在做的那样直接传递numpy数组。任何帮助它' ![color_channels_pic](../Images/028cf3e930be4436bb15c262e0cde004.png)

这是我的代码转换。

```
import wx
import cv2

class MyFrame(wx.Frame):
   def __init__(self, parent):
       wx.Frame.__init__(self, parent)
       self.displayPanel = wx.Panel(self)
       self.displayPanel.SetSize(wx.Size(800,640))

       self.cam = cv2.VideoCapture(1)
       self.cam.set(3, 640)
       self.cam.set(4, 480)
       ret, img = self.cam.read()

       cv2.cvtColor(img, cv2.COLOR_BGR2RGB)
       row, col, x = img.shape
       self.SetSize((col,row))
       self.bmp = wx.BitmapFromBuffer(col, row, img)
       self.displayPanel.Bind(wx.EVT_PAINT, self.onPaint)

       self.playTimer = wx.Timer(self)
       self.Bind(wx.EVT_TIMER, self.onNextFrame)

       self.playTimer.Start(1000/15)

    def onPaint(self, evt):
        if self.bmp:
            dc = wx.BufferedPaintDC(self.displayPanel)
            self.PrepareDC(dc)
            dc.DrawBitmap(self.bmp, 0, 0, True)
        evt.Skip()

    def onNextFrame(self, evt):
        ret, img = self.cam.read()
        if ret == True:
            cv2.cvtColor(img, cv2.COLOR_BGR2RGB)
            self.bmp.CopyFromBuffer(img)
            self.displayPanel.Refresh()
        evt.Skip()

if __name__=="__main__":
    app = wx.App()
    MyFrame(None).Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-11T18:02:15.943

下面的示例代码在 OS X 下对我来说很好，但是我对跨平台的 wx 有一些小小的惊喜。它几乎是相同的代码，不同之处`cvtColor`在于重新分配了结果，并添加了一个子类`wx.Panel`（这是重要的部分）。

```
import wx
import cv, cv2

class ShowCapture(wx.Panel):
    def __init__(self, parent, capture, fps=15):
        wx.Panel.__init__(self, parent)

        self.capture = capture
        ret, frame = self.capture.read()

        height, width = frame.shape[:2]
        parent.SetSize((width, height))
        frame = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)

        self.bmp = wx.BitmapFromBuffer(width, height, frame)

        self.timer = wx.Timer(self)
        self.timer.Start(1000./fps)

        self.Bind(wx.EVT_PAINT, self.OnPaint)
        self.Bind(wx.EVT_TIMER, self.NextFrame)

    def OnPaint(self, evt):
        dc = wx.BufferedPaintDC(self)
        dc.DrawBitmap(self.bmp, 0, 0)

    def NextFrame(self, event):
        ret, frame = self.capture.read()
        if ret:
            frame = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)
            self.bmp.CopyFromBuffer(frame)
            self.Refresh()

capture = cv2.VideoCapture(0)
capture.set(cv.CV_CAP_PROP_FRAME_WIDTH, 320)
capture.set(cv.CV_CAP_PROP_FRAME_HEIGHT, 240)

app = wx.App()
frame = wx.Frame(None)
cap = ShowCapture(frame, capture)
frame.Show()
app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-19T09:25:23.913

您应该为以下行添加评论

```
#self.PrepareDC(dc) 
```

它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-06T02:33:52.810

您必须设置面板的大小以显示捕获的图像。我使用了您的代码并添加了“

```
self.SetSize(width,height) 
```

没关系

# jquery - Fancybox 突然停止工作

> ID：14804742
> 
> 赞同：-3
> 
> 时间：2013-02-11T01:33:46.133
> 
> 标签：jquery, fancybox

在我的网站中，我使用 jquery 和 Fancybox 插件。
一切正常，但突然 Fancybox 停止工作。

当我单击图像时，它们会加载到同一个窗口中，而不是加载到花式框弹出窗口中。

javascript控制台没有提供任何错误，我不知道如何修复它。我试图运行到 javascript 控制台：

```
$("a").fancybox(); 
```

结果是一样的，没有任何效果...
我也尝试将jquery设置为1.8.2版，但问题仍然存在。

你有什么解决办法吗？

编辑：我已经在 jsfiddle 中添加了 bootstrap.js，现在如果我从 jsfiddle 的 javascript 面板运行 fancybox，它就不起作用了。如果我删除它，它会再次起作用。

[http://jsfiddle.net/pQwCh/](http://jsfiddle.net/pQwCh/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:03:47.060

解决了！是引导冲突，我在这里找到了解决方案

[https://github.com/fancyapps/fancyBox/issues/519](https://github.com/fancyapps/fancyBox/issues/519)

# java - ini4j 读取注册表值导致 Java 崩溃

> ID：14804747
> 
> 赞同：0
> 
> 时间：2013-02-11T01:34:30.937
> 
> 标签：java, registry, ini4j

我在这里编写了几个方法，它们从注册表中读取一些值并在我的 Swing GUI 中填充一些文本字段。

这是第一种方法：

```
public void loadRegValues() throws IOException {

    Scripts sc = new Scripts();

    //SET CONFIGURATION TAB TO COME FORWARD             
    setTabFolderSelection(1);

    //SET PREBACKUP AS FIRST SELECTED TAB
    setConfigTabFolderSelection(0);

    // [GLOBAL]
    setClientnameText(sc.readValueFromReg("[GLOBAL]", "clientname"));

    // [PREBACKUP]
    Boolean prebackupboolean = Boolean.valueOf(sc.readValueFromReg("[PREBACKUP]", "prebackup-enabled"));
    setPrebackupenabledSelection(prebackupboolean);

    // [OPENVPN]
    setOvpnprofileText(sc.readValueFromReg("[OPENVPN]", "ovpnprofilename"));

    setOpenvpngatewayipText(sc.readValueFromReg("[OPENVPN]", "remotegatewayip"));

    // [NETWORK DRIVE]
    setNetworkdriveletterText(sc.readValueFromReg("[NETWORK DRIVE]", "drive-letter"));

    setIpofshareText(sc.readValueFromReg("[NETWORK DRIVE]", "ipofshare"));

    setSharenameText(sc.readValueFromReg("[NETWORK DRIVE]", "sharename"));

    setShareusernameText(sc.readValueFromReg("[NETWORK DRIVE]", "shareusername"));

    setSharepasswordText(sc.readValueFromReg("[NETWORK DRIVE]", "sharepassword"));

    // [REGISTRY BACKUP]
    Boolean registrybackupboolean = Boolean.valueOf(sc.readValueFromReg("[REGISTRY BACKUP]", "registrybackup-enabled"));
    setRegistrybackupenabledSelection(registrybackupboolean);

    Boolean reghklmsoftwareboolean = Boolean.valueOf(sc.readValueFromReg("[REGISTRY BACKUP]", "hklm-software-enabled"));
    setHklmsoftwareenabledSelection(reghklmsoftwareboolean);

    Boolean regbackupcustompathboolean = Boolean.valueOf(sc.readValueFromReg("[REGISTRY BACKUP]", "reg-custompath-enabled"));
    setRegistrycustompathenabledSelection(regbackupcustompathboolean);

    setRegistrycustompathText(sc.readValueFromReg("[REGISTRY BACKUP]", "reg-custom-path"));

    // [FREEFILESYNC]

    setFfsbatchfilenameText(sc.readValueFromReg("[FREEFILESYNC]", "ffsbatchfile"));

    // [EMAIL]
    Boolean emailboolean = Boolean.valueOf(sc.readValueFromReg("[EMAIL]", "emailenabled"));
    setEmailenabledSelection(emailboolean);

    setGmailusernameText(sc.readValueFromReg("[EMAIL]", "gmailusername"));

    setGmailpasswordText(sc.readValueFromReg("[EMAIL]", "gmailpassword"));

    setClientemailText(sc.readValueFromReg("[EMAIL]", "clientemail"));

} 
```

这是第二个（它在“脚本”类中）：

```
public String readValueFromReg(String valuecategory, String keyname) throws IOException
    {
        Reg reg = new Reg("HKEY_LOCAL_MACHINE\\SOFTWARE\\KCBS\\Offsite Backup\\");
        Reg.Key cp = reg.get("HKEY_LOCAL_MACHINE\\SOFTWARE\\KCBS\\Offsite Backup\\");
        Reg.Key valuecat = cp.getChild(valuecategory);
        String keyvalue = valuecat.get(keyname);
        return keyvalue;
   } 
```

每当我运行`loadRegValues()`它时，我的应用程序都会崩溃。我正在使用 ini4j API 从注册表中读取和写入；我无法弄清楚为什么它会导致它崩溃。

编辑：根据进一步的发现，使用开发人员在此页面[http://ini4j.sourceforge.net/tutorial/WindowsRegistryTutorial.java.html](http://ini4j.sourceforge.net/tutorial/WindowsRegistryTutorial.java.html)上提供的教程从注册表中检索数据的方法似乎不起作用。写入功能工作正常，但即使使用他们提供的示例，阅读部分也不起作用。我将联系开发人员并尝试在那里获得一些帮助。

# ios6 - UICollectionViewController 似乎只显示它的 CollectionView

> ID：14804749
> 
> 赞同：1
> 
> 时间：2013-02-11T01:34:37.707
> 
> 标签：ios6

为什么 UICollectionViewController 似乎只允许显示其 CollectionView？如果我向其中添加其他组件，它们似乎永远不会显示。它们在情节提要中显示良好，但在模拟器中运行时它们不可见。

这是我的故事板的样子：

![在此处输入图像描述](../Images/ce78630af04a65ce0e8ca5bd9b0bf8ec.png)

然后当我在模拟器中运行它时，我得到一个只有 CollectionView 可见的黑屏。

![在此处输入图像描述](../Images/c5989db6f389f56f8ea72b9deff2b386.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:06:27.587

A`UICollectionViewController`是一个视图控制器，其*全部*内容是一个集合视图。

要获得您需要的行为，请改为拖出一个泛型`UIViewController`并添加 a `UICollectionView`（不是 a `UICollectionViewController`）作为`UIViewController`'s的子视图`view`。

然后您可以根据`UICollectionView`需要调整 的大小并将标签添加为 的子`UIViewController`视图`view`。

Interface Builder 中的视图层次结构如下所示：

![在此处输入图像描述](../Images/445ba10f08e397ae5541147509d5d0dc.png)

# c++ - 成员值是否在构造函数初始化程序列表执行之前初始化？

> ID：14804751
> 
> 赞同：1
> 
> 时间：2013-02-11T01:35:07.093
> 
> 标签：c++

举个例子：

```
class Foo {
private:
  const std::string m_str1;
  const std::string m_str2;

  std::string foo() {
    std::cout << ("'" + m_str2 + "'") << std::endl;
    return "whatever1";
  }

public:
  Foo() : m_str1(foo()), m_str2("whatever2") { }
};

int main() {
  Foo foo;
  return 0;
} 
```

在我的计算机上，它打印出 '' （一个接一个的两个单引号），表明 m_str2 实际上是在执行构造函数列表之前将值初始化为空字符串。

但总的来说这是真的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T01:39:51.047

`Foo`正如克里斯评论的那样，遗嘱的构建**顺序**：

*   初始化`m_str1`
*   初始化`m_str2`
*   运行（空）构造函数体

您正在观察，在初始化期间`m_str1`，`m_str2`尚未初始化。

`m_str2`如您所说，尚未将值初始化为空字符串**。**

`m_str2`那时访问是**[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-11T01:39:46.257

这是未定义的行为。 调用`m_str2`时尚未构造。`foo()`它似乎起作用的事实可能是巧合。

# ruby-on-rails - 将名称拉出数组并在每个名称后添加换行符

> ID：14804752
> 
> 赞同：2
> 
> 时间：2013-02-11T01:35:31.803
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-on-rails-3

下面是我为一小段 Ruby 代码编写的单元测试。

```
subject { AutoShop.new 'Mr. Fix It', 'WA987654321', Employee.new('Sue', 'Owner', 0) }

it '#employee_list returns list of employee names' do
  # setup
  input = [Employee.new('Lou', 'Receptionist', 90_000)]
  subject.append_employees input
  subject.employee_list.should eq "Sue\nLou"
end 
```

这是该课程的代码。但是，我无法让名称在`employee_list`方法中正确显示。我是 Ruby 的新手，所以任何建议都将不胜感激。

```
class AutoShop < Business

    attr_accessor :employees

  def initialize(name, tax_id, employee)
    super(name, tax_id)
    @employees = []
    @employees << employee
  end   

  def append_employees(input)
    input.map { |x| @employees << x  }  
  end

  def employee_list
    @employees.map {|x| x.name}
  end   

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T01:43:06.860

`employee_list`根据您的单元测试，您的方法应输出由 linebreak 分隔的每个名称`\n`。因此，添加 a`.join("\n")`以从数组中生成一个字符串。

```
def employee_list
  @employees.map {|x| x.name }.join("\n")
end 
```

`.map`也可以使用“pretzel-colon”速记来完成：

```
@employees.map(&:name).join("\n") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T05:34:46.963

尽管@MichaelBerkowski 已经回答了您的主要问题，但我会注意您的`append_employees`方法看起来有点奇怪。您可能会使用`Array#each`，而不是`Array#map`那里。虽然`@employees`变量不受该更改的影响，但返回值不同（不必要地占用您的内存）。相比：

```
2.0.0-preview2 :001 > input = [1, 2, 3, 4]
 => [1, 2, 3, 4] 
2.0.0-preview2 :002 > e = [] ; input.each { |x| e << x  }
 => [1, 2, 3, 4] 
2.0.0-preview2 :003 > e = [] ; input.map { |x| e << x  }
 => [[1, 2, 3, 4], [1, 2, 3, 4], [1, 2, 3, 4], [1, 2, 3, 4]] 
```

# c# - ManagementException - 无效的类

> ID：14804761
> 
> 赞同：6
> 
> 时间：2013-02-11T01:37:39.297
> 
> 标签：c#, .net, wmi, vmware, wmi-query

我在查询 WMI 时遇到问题，这让我完全困惑。我正在构建的应用程序利用作为 VMware View Agent 的一部分安装到 VDI 桌面中的 WMI 计数器。计数器提供有关远程显示协议 PCoIP 的信息。

我有工作代码来查询计数器：

```
ManagementObjectSearcher searcher = new ManagementObjectSearcher();

ObjectQuery generalQuery = new ObjectQuery("SELECT * FROM Win32_PerfRawData_TeradiciPerf_PCoIPSessionGeneralStatistics");

// Many other queries...

searcher.Query = generalQuery;
foreach (ManagementObject obj in searcher.Get())
{
  // Total session duration
  ulong sessionDurationSec = Convert.ToUInt64(obj["SessionDurationSeconds"]);
  // Get other items...
} 
```

此代码来自现有的、正在运行的 .NET 3.5 应用程序。我现在创建了一个新的 .NET 4.0 应用程序，并且我使用了完全相同的代码 - 每次都会失败，并出现“无效类”ManagementException。

我已验证应用程序权限是正确的，我还尝试在新的 .NET 4.0 应用程序中查询其他项目，如“Win32_Process”，它可以正常工作。

令人费解的是，计数器在 perfmon 和 wmic 中出现并且工作正常：

[http://hirstius.com/media/stackoverflow/perfmon.png](http://hirstius.com/media/stackoverflow/perfmon.png)

但是在 WMI CIM Studio 或 WMI Code Creator 中 - 什么都没有：

[http://hirstius.com/media/stackoverflow/WMI_code_creator.png](http://hirstius.com/media/stackoverflow/WMI_code_creator.png)

在我能想到的每一个方面，应用程序都是相同的——在 app.manifest 中具有相同的权限，以相同的方式（通过计时器）调用完全相同的代码。唯一的区别是 .NET 3.5 与 4.0 - 但很明显，计数器**存在**，因为不止一个应用程序可以看到它们，但数量相等却不能。

有谁知道 .NET 3.5 和 4.0 之间可能导致这种情况的任何区别？或者，为什么计数器可能对某些应用程序可见，而对其他应用程序不可见？.NET 4.0 是否需要一些我缺少的环境设置？目前我不知道去哪里进一步解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-02T20:56:07.177

正如[Hans Passant](https://stackoverflow.com/users/17034/hans-passant)的评论所述，这个问题的答案是：

> 将 EXE 项目的平台目标设置从 x86 更改为 AnyCPU

OP确认了这一点：

> 我猜这意味着计数器只有 64 位？它还将解释为什么某些应用程序可以或看不到它们 - 基于它们针对的平台。

# php - 如何制作一个非常基本的 php 验证码

> ID：14804764
> 
> 赞同：-4
> 
> 时间：2013-02-11T01:38:43.910
> 
> 标签：php, random, numbers, captcha

所以，我基本上是在制作一个忘记密码页面的网站。我想添加一个验证码系统。现在，我不想要任何不能在 5 分钟内完成的东西，只要让它简短而简单。我想对我的表格进行验证。我想要的是一个在没有图像的情况下生成和显示的随机数。那么，我该怎么做呢？我之前尝试过制作验证码系统，但是每当我在表单中提交内容时，随机数都会发生变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:47:03.210

你可以让用户做一个简单的加法问题。它将阻止*大多数*自动提交。

它的基础是这样的：

```
$a = rand(1,10);
$b = rand(1,10);
$c = $a + $b; //throw this into a session var and check submission against it
echo "<p>$a + $b = <input type='text'/></p>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T01:47:15.083

超级简单的答案：

1.  加载表单页面时，创建一个会话 ( `session_start()`)
2.  生成一个随机数并将其保存到会话变量中：`$_SESSION['captcha']=[random_number]`
3.  根据会话字符串创建图像（您需要`GD`或类似的库）。只需让它创建一个图像并根据 的值在其上打印一个文本字符串`$_SESSION['captcha']`。如果您想变得花哨，请尝试切换字体、颜色和旋转字母。*请记住，会话变量存储在服务器上的临时文件（或 DB）中，因此它们可用于包含会话的每个文件）*
4.  有一个验证码字段供用户填写`<input type='text' name='captcha_field' />`
5.  提交时，比较`$_POST['captcha_field'] to $_SESSION['captcha']`. 如果它们相同，则继续，否则强制他们重新填写验证码字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T01:48:26.713

您可以将随机数存储在会话变量中 - 即`$_SESSION['captcha_code']`并检查该值。此值是用户特定的，不会因多个请求而改变。有关详细信息，请参阅[会话处理](http://www.php.net/manual/en/book.session.php)。

# php - PHP组合变量

> ID：14804766
> 
> 赞同：0
> 
> 时间：2013-02-11T01:38:48.397
> 
> 标签：php, string, variables, separator

我有一个'foreach' PHP 循环。每次运行循环时，我都会将当前循环迭代 ($CurrentTillID) 中的值组合到一个变量中。

这是我的代码：

```
$separator = ',';
$tillDetails = $tillDetails . $CurrentTillID; 
```

我想在每个 $CurrentTillID 值之间添加一个分隔符。

这是我尝试过的代码：

```
$tillDetails = $tillDetails . $CurrentTillID . $separator; 
```

上面的代码不起作用。我可以帮忙吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:39:35.667

尝试将分隔符放在要分隔的项目之间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T01:40:40.153

您可能打算这样做：

```
$tillDetails .= $separator . $CurrentTillID; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T01:42:14.893

与 .= 连接

```
<?php
$tillDetails = null;
foreach($data as $k=>$v){
    $tillDetails .= $v.',';
}
?> 
```

你只有一个单维数组，你不妨忘记 foreach 并用你的分隔符将它内爆成一个字符串：

```
$orig_data = array('till1','till2','till3','yada');
$tillDetails = implode(',',$orig_data); 
```

# c# - 时间：2019-04-01 标签：c#com object can't get ref object values

> ID：14804767
> 
> 赞同：0
> 
> 时间：2013-02-11T01:39:07.540
> 
> 标签：c#, object, com, marshalling

我们试图获取从 COM 对象返回的值，函数是：

```
bool AxSB100BPC.GetEnrollData(int dwMachineNumber,
int dwEnrollNumber,
int dwEMachineNumber,
int dwBackupNumber,
ref int dwMachinePrivilege,
ref object dwEnrollData,
ref int dwPassWord 
```

我们称这个函数为：

```
vRet = axSB100BPC1.GetEnrollData(mMachineNumber,
                                 vEnrollNumber,
                                 vEMachineNumber,
                                 vFingerNumber,
                                 ref vPrivilege,
                                 ref oglngEnrollData,
                                 ref glngEnrollPData); 
```

问题在于`oglngEnrollData`哪个是`ref object`. 它被声明为`object oglngEnrollData;`。

错误是：

> ```
> System.Runtime.InteropServices.COMException 未处理
> H结果=-2147352571
> 消息=Tür uyuşmazlığı。（来自 HRESULT 的异常：0x80020005 (DISP_E_TYPEMISMATCH)）
> 源=mscorlib
> 错误代码=-2147352571
> 堆栈跟踪：
>    在 System.RuntimeType.ForwardCallToInvokeMember（字符串成员名称、BindingFlags 标志、对象目标、Int32 [] aWrapperTypes、MessageData 和 msgData）
>    在 SB100BPCLib._DSB100BPC.GetEnrollData(Int32 dwMachineNumber, Int32 dwEnrollNumber, Int32 dwEMachineNumber, Int32 dwBackupNumber, Int32& dwMachinePrivilege, Object& dwEnrollData, Int32& dwPassWord)
>    在 AxSB100BPCLib.AxSB100BPC.GetEnrollData(Int32 dwMachineNumber, Int32 dwEnrollNumber, Int32 dwEMachineNumber, Int32 dwBackupNumber, Int32& dwMachinePrivilege, Object& dwEnrollData, Int32& dwPassWord)
>    在 f:\enrolldata\Form1.cs:line 196 中的enrolldata.Form1.button2_Click(Object sender, EventArgs e)
>    在 System.Windows.Forms.Control.OnClick(EventArgs e)
>    在 System.Windows.Forms.Button.OnClick(EventArgs e)
>    在 System.Windows.Forms.Button.OnMouseUp（MouseEventArgs 事件）
>    在 System.Windows.Forms.Control.WmMouseUp（消息和 m，MouseButtons 按钮，Int32 点击）
>    在 System.Windows.Forms.Control.WndProc（消息和 m）
>    在 System.Windows.Forms.ButtonBase.WndProc（消息和 m）
>    在 System.Windows.Forms.Button.WndProc（消息和 m）
>    在 System.Windows.Forms.Control.ControlNativeWindow.OnMessage（消息& m）
>    在 System.Windows.Forms.Control.ControlNativeWindow.WndProc（消息和 m）
>    在 System.Windows.Forms.NativeWindow.DebuggableCallback（IntPtr hWnd，Int32 msg，IntPtr wparam，IntPtr lparam）
>    在 System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW（味精和味精）
>    在 System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop（IntPtr dwComponentID，Int32 原因，Int32 pvLoopData）
>    在 System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner（Int32 原因，ApplicationContext 上下文）
>    在 System.Windows.Forms.Application.ThreadContext.RunMessageLoop（Int32 原因，ApplicationContext 上下文）
>    在 System.Windows.Forms.Application.Run（窗体 mainForm）
>    在 f:\enrolldata\Program.cs:line 19 中的enrolldata.Program.Main()
>    在 System.AppDomain._nExecuteAssembly（RuntimeAssembly 程序集，字符串 [] 参数）
>    在 System.AppDomain.ExecuteAssembly（字符串 assemblyFile，证据 assemblySecurity，String [] args）
>    在 Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
>    在 System.Threading.ThreadHelper.ThreadStart_Context（对象状态）
>    在 System.Threading.ExecutionContext.RunInternal（ExecutionContext executionContext，ContextCallback 回调，对象状态，布尔值 preserveSyncCtx）
>    在 System.Threading.ExecutionContext.Run（ExecutionContext executionContext，ContextCallback 回调，对象状态，布尔值 preserveSyncCtx）
>    在 System.Threading.ExecutionContext.Run（ExecutionContext executionContext，ContextCallback 回调，对象状态）
>    在 System.Threading.ThreadHelper.ThreadStart()
>   内部异常：
> ```

欢迎任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:02:05.563

另一个论坛上的这个[问题](http://social.msdn.microsoft.com/forums/en-US/csharpgeneral/thread/51aaa7c2-baeb-4cd5-991e-67e5c70422de)似乎正在处理相同界面的相同问题。

这只是基于该线程的猜测，但问题似乎是`dwEnrollData`参数实际上是一个变体类型（不是托管`System.Object`类型），在这种情况下，您应该尝试使用[`System.Runtime.InteropServices.VariantWrapper`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.variantwrapper.aspx)来包装您传递给方法的参数值。

# performance - 在二进制搜索之前完成排序时的时间复杂度...请参阅

> ID：14804772
> 
> 赞同：6
> 
> 时间：2013-02-11T01:39:48.020
> 
> 标签：performance, algorithm, search, big-o, time-complexity

假设有一个包含未排序数据的数组，我需要选择线性搜索或二进制搜索进行搜索。那我应该选择哪个选项？线性搜索的时间复杂度为 O(n)，二分搜索的时间复杂度为 O(log n)。但是，最快的排序算法给出了 O(n * log n) 的时间复杂度。现在，我不知道如何“添加”两种算法的复杂性（如果这是正确的话），因此，我在问这个问题。

所以我的问题是，如果排序然后二进制搜索比简单的线性搜索更好，还是相反？

另外，我如何证明可能使用大 O 表示法的任何情况（我的意思是“添加”和“比较”时间复杂度）？

非常感谢您的阅读！！！那意义重大。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-11T01:59:07.143

你并没有真正“增加”复杂性。正如您所说，排序是O（n * log n），搜索是O（log n）。如果您要对它们进行“正常数学运算”，那么它将是 (n+1)*log n，它仍然是 n*log n。

当您执行这样的多个步骤时，您通常会采用最高的复杂性并将其称为。毕竟，当 n 足够大时，n*log n 会使 log n 相形见绌。

可以这样想：当 n 为 1,000,000 时，n*log n 为 2000 万。log n 是 20。那么 20,000,000 和 20,000,020 有什么区别？(log n) 项无关紧要。所以 (n log n) + (log n) 就所有意图和目的而言，等于 (n log n)。即使 n 为 100，log n 也是 7。当 n 中等大时，(log n) 项也不会产生影响。

在您的特定情况下，如果您只需要搜索一次列表，那么顺序搜索就是要走的路。如果您需要多次搜索，则必须权衡 m 次搜索的成本 O(m * n) 与排序然后搜索的成本。如果您对最短时间感兴趣并且知道要搜索列表的次数，那么如果 (m*n) 小于 (n * log n)，您将使用顺序搜索。否则使用排序然后二进制搜索。

但这不是唯一的考虑因素。对已排序列表进行二分搜索可提供非常快的响应时间，而线性搜索对于单个项目可能需要很长时间。如果您有能力在程序启动期间对列表进行排序，那么这可能是最好的方法，因为一旦程序运行，就会更快地找到（或找不到）项目。对列表进行排序可为您提供更好的响应时间。最好在启动期间付出排序的代价，而不是在操作期间经历非常不可预测的响应时间。或者发现您需要进行比您想象的更多的搜索。. .

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T07:37:02.123

如果您必须进行一次搜索，请进行线性搜索。这显然比排序然后二进制搜索要好。
**但是**，如果您有多个搜索查询，在大多数情况下，您应该首先对数组进行排序，然后对每个查询应用二进制搜索。
为什么 ？假设您要执行**O(k)**搜索查询。如果您进行线性搜索，您将得到**O(n*k)**操作。如果你首先排序，那将需要**O(nlogn) + O(klogn) = O((n+k)logn)**操作。什么是更好的 ？当 k 非常小（小于 logn）时，最好进行线性搜索。但是在大多数情况下，您最好先进行排序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T01:46:21.460

> 所以我的问题是，如果排序然后二进制搜索比简单的线性搜索更好

是的你是对的。

当数组已经排序时，应该应用二进制搜索。否则你不能使用二分查找。如果您有大量查询，最好先对数组进行排序，然后再应用二分查找。但是，如果您只有几个查询，那么线性搜索可能就足够了。

至于大 O 表示法，它始终是“大”部分——即，如果你排序然后二进制搜索，它将是 O(n*lgn)。如果只使用线性搜索，则为 O(n)。但是当考虑到查询的数量（m）时，第一种方法将是 O(n*lgn + m*lgn)，而第二种方法是 O(m*n)。您可以看到，如果 m 很大（m=n 或 m>>n），则第二种方法将比二分查找更复杂。

# google-apps-script - 用于复制和粘贴单元格的简单 Google 电子表格脚本会出错

> ID：14804775
> 
> 赞同：0
> 
> 时间：2013-02-11T01:40:19.997
> 
> 标签：google-apps-script, google-sheets

我在下面有一些相对简单的代码会引发错误：：“无法将 NaN 转换为（类）”。

我想做的就是将一些单元格从一个地方复制到另一个地方！

谁能告诉我这段代码有什么问题？

提前谢谢了。

```
function myFunction() {

  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Sheet 1');   
  var values = sheet.getDataRange().getValues()  

  for( var row = values.length -1; row >= 0; --row )
    if (values[row][5] == 'Here')
     var maxRows = sheet.getMaxRows()
     var startRow = (row)+1
     var numRows = (maxRows)-(row)
     var Range = sheet.getRange(startRow, 3, numRows, 3).getValues()
     sheet.getRange(row, 3, numRows, 3).setValues(Range)     // (row, column, numRows, numColumns)      
  } 
```

因此，正如代码希望显示的那样，我想复制 C:E 范围内的单元格，但只有行 x 到 getMaxRows()，其中 x 是在 F 列中找到“Here”的行号加上 1。然后我想将其粘贴到相同的列 C:E 但比原来高一行（与 F 列中的“此处”相同的行）。

任何帮助将不胜感激。感谢您的关注。

编辑：错误在这一行：

```
var Range = sheet.getRange(startRow, 3, numRows, 3).getValues() 
```

在我的工作表中，要复制的单元格可以包括空白单元格甚至整个空白行。这会导致问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T09:35:05.043

从你的描述而不是你的代码开始（你为什么不在循环和条件中使用 {} ？）我建议你试试这个

```
function myFunction() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Sheet 1');   
  var values = sheet.getDataRange().getValues()  
  var maxRows = sheet.getLastRow()
  var datatoCopy = []   
  for( var row = values.length -1; row >= 0; --row ){
    if (values[row][5] == 'here'){
     var whereToCopy = row+1
     Logger.log(whereToCopy);
     break
     }
     }
   for(row=whereToCopy-1;row<maxRows;++row){
    datatoCopy.push([values[row][2]+'**']);// store column data in an array - remove the ** that I used to see what was copied ;-)
    }
    Logger.log(datatoCopy)
sheet.getRange(whereToCopy, 5, datatoCopy.length, 1).setValues(datatoCopy);// overwrite data to column E
} 
```

根据您的评论，试试这个版本？

```
function myFunction() {
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Sheet 1');   
  var values = sheet.getDataRange().getValues()  
  var maxRows = sheet.getLastRow()
  var datatoCopy = []   
  for( var row = values.length -1; row >= 0; --row ){
    if (values[row][5] == 'here'){
     var whereToCopy = row
     Logger.log(whereToCopy);
     break
     }
     }
   for(row=whereToCopy-1;row<maxRows-1;++row){
    var rowData=[]
    rowData.push(values[row+1][2]+'*C*');// I added these 'indicators' to show what happens... delete them when the result is ok ;-)
    rowData.push(values[row+1][3]+'*D*');//
    rowData.push(values[row+1][4]+'*E*');//
    datatoCopy.push(rowData);// store column data in an array - remove the ** that I used to see what was copied ;-)
    }
    Logger.log(datatoCopy)
sheet.getRange(whereToCopy, 3, datatoCopy.length, datatoCopy[0].length).setValues(datatoCopy);// overwrite data to column E
} 
```

# c# - 如何从目录中的图像添加每个文件名（查看代码）

> ID：14804776
> 
> 赞同：0
> 
> 时间：2013-02-11T01:40:33.713
> 
> 标签：c#, image, path, label

我想显示调试目录中的所有图像。也将文件名作为标签。

我唯一的问题是从每个图像的路径中显示文件名。它仅加载 1 个文件名

```
 int x = 0;
        int y = 0;
        string[] images = Directory.GetFiles(@"images");
        foreach (string image in images)
        {
            PictureBox PB = new PictureBox();
            PB.Image = new Bitmap(image);
            PB.SizeMode = PictureBoxSizeMode.CenterImage;
            PB.Size = new Size(250, 180);
            PB.Location = new Point(x, y);
            panel1.Controls.Add(PB);
            x += 260;
        }
        int a = 0;
        int b = 0;

        string names = System.IO.Path.GetFileName(@"images");
        foreach (string name in names)
        {
            Label label1 = new Label();
            label1.Text = name;
            label1.Location = new Point(a, b);
            this.Controls.Add(label1);
            a += 20;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T01:45:50.570

```
private void Form1_Load(object sender, EventArgs e)
{
    int x = 0;
    int y = 0;
    string[] images = Directory.GetFiles(@"images");
    foreach (string image in images)
    {
        PictureBox PB = new PictureBox();
        PB.Image = new Bitmap(image);
        PB.SizeMode = PictureBoxSizeMode.CenterImage;
        PB.Size = new Size(250, 180);
        PB.Location = new Point(x, y);
        panel1.Controls.Add(PB);
        x += 260;

        Label label1 = new Label();
        label1.Text = Path.GetFileName(name);
        label1.Location = new Point(a, b);
        this.Controls.Add(label1);
        a += 20;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T01:51:22.373

我认为您不需要 2 个循环，您可以只获取文件名并在第一个循环中创建标签，

就像是：

```
int x = 0;
string[] images = Directory.GetFiles(@"C:\StackOverflow\New Folder");
foreach (string image in images)
{
    Panel item = new Panel();
    item.AutoSize = true;
    item.Location = new Point(x, 0);

    PictureBox PB = new PictureBox();
    PB.Image = new Bitmap(image);
    PB.SizeMode = PictureBoxSizeMode.CenterImage;
    PB.Size = new Size(250, 180);

    Label label1 = new Label();
    label1.Text = System.IO.Path.GetFileName(image);
    label1.Location = new Point(0, 90);
    label1.Width = 250;
    label1.TextAlign = ContentAlignment.MiddleCenter;

    item.Controls.Add(label1);
    item.Controls.Add(PB);

    panel1.Controls.Add(item);
    x += 260;

} 
```

结果![在此处输入图像描述](../Images/d38ff2e0a56691a254fc9f9d64ac68a0.png)

# php - ZF2 在供应商库中使用依赖注入的问题

> ID：14804779
> 
> 赞同：0
> 
> 时间：2013-02-11T01:40:58.827
> 
> 标签：php, dependency-injection, zend-framework2

所以我有以下两难境地。我想要一个我的所有 ZF2 应用程序都将使用的公共库。这个库将包含我网站的所有业务逻辑。每个应用程序将使用库的不同部分以正确显示/执行任何必要的操作。现在到目前为止，我已经设法创建了一个库。让我们称之为Foo。Foo 有一个 Module.php，它执行加载整个库所需的基本自动加载。

现在这是我开始遇到问题的地方。我想利用 Foo 中 ZF2 的依赖注入、服务管理器等。问题是我只有一个加载 Foo 的 Module.php。这意味着随着我的库的增长，Module.php 也会增长，因为据我所知，我不能有子模块。有没有办法解决这个问题？

本质上，我希望每个应用程序只包含 Foo 和 Foo 有几个 Module.php 以便至少可以逐个模块地处理依赖项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:51:17.987

您可能正在逆流而上尝试做子模块——而且您可能不需要这样做。

如果你已经很好地编写了你的​​模块，加载它不会是一个非常昂贵的操作。请记住，服务管理器的全部意义在于所有这些服务都是延迟创建的。因此，如果调用代码从不要求特定请求中的特定服务，则该服务的类文件永远不会自动加载，对象永远不会实例化，等等。所以你可能会很好地留在一个大的、单片的模块中。

事情可能会变得有点棘手的一个地方是，如果您严重依赖 EventManager，并且您的模块正在附加一堆侦听器。但是您可以通过设置一些模块配置指令来解决这个问题，然后有条件地附加侦听器。

话虽如此，尝试拆分模块可能是有意义的。所以你可以有 FooBar 和 FooBaz 模块。

如果你真的，真的，想要子模块，你可以深入 ModuleManager 并尝试找出它。有一次我沿着那条路走了一小段路——然后就分心了。就我而言，我正在处理运送实物物品。我想要一个“Fulfillment”模块，可以配置为加载一堆类似的运输模块（Fulfillment\Courier\USPSModule、Fulfillment\Courier\FedExModule 等），这样我的主 Fulfillment 模块就可以遍历所有加载的子模块，而无需特定关于其中任何一个的知识。如果我没记错的话，最好的方法是从本质上反映 ZF2 所做的事情，但在我的 Fulfillment\Module 类中。但是，我想不出很多你想要这样做的情况，除非你想要一组类似的子模块，它们都实现了相同的接口，并希望它们被没有特定知识的超级模块使用。我也看了这个，因为正在考虑最终用户在运行时启用/禁用这些子模块（有点像插件系统）。

如果你不这样做，我会说坚持使用 FooBarModule、FooBazModule 等，只要它是有意义的。请记住，即使您的模块包含大量代码，ServiceManager 也只会自动加载、解析和实例化满足任何给定请求的依赖关系所需的类。

# android - 使用 Actionbarsherlock 在第二个栏中显示选项卡

> ID：14804781
> 
> 赞同：2
> 
> 时间：2013-02-11T01:41:12.230
> 
> 标签：android, tabs, split, actionbarsherlock

我在使用 ActionBarSherlock 显示选项卡时遇到问题。我已经在我自己的应用程序中复制了 actionbarsherlock 演示的示例代码，如果我在 Nexus 7 等 7 英寸显示器中运行应用程序，选项卡会出现在与标题相同的栏中。但是，如果我在相同的设备选项卡中运行 ABS 示例，则会出现在不同的栏中。

我的申请有什么问题？

这是我的代码：

```
import android.os.Bundle;
import android.support.v4.app.FragmentTransaction;
import android.widget.TextView;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;
import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.internal.ResourcesCompat;
import com.mbal.misseries.R;

public class ProvaDeFragments extends SherlockActivity implements ActionBar.TabListener {
    private TextView mSelected;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        setTheme(R.style.Theme_Sherlock_Light); //Used for theme switching in samples
        super.onCreate(savedInstanceState);

        setContentView(R.layout.tab_navigation);
        mSelected = (TextView)findViewById(R.id.text);

        getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        for (int i = 1; i <= 3; i++) {
            ActionBar.Tab tab = getSupportActionBar().newTab();
            tab.setText("Tab " + i);
            tab.setTabListener(this);
            getSupportActionBar().addTab(tab);
        }
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction transaction) {
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction transaction) {
        mSelected.setText("Selected: " + tab.getText());
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction transaction) {
    }
} 
```

它是这样显示的：

[从我的申请](https://docs.google.com/file/d/0Bz-dGTj4s8A7cG8zY01TS1dXVzg/edit?usp=sharing)

但是，如果我运行示例 ABS 代码，则如下所示：

[ABS 示例演示](https://docs.google.com/file/d/0Bz-dGTj4s8A7aThiSTZkYzd6ajA/edit?usp=sharing)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T22:08:24.450

除了在有足够空间的设备上进行测试之外，您没有做错任何事情。;-)

根据Google 开发者网站中的[ActionBar文档：](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)

> 当您想在 Activity 中提供导航选项卡时，使用操作栏的选项卡是一个不错的选择（而不是使用 TabWidget），因为系统会针对不同的屏幕尺寸调整操作栏选项卡——在屏幕显示时将它们放在主操作栏中足够宽，或者在屏幕太窄时位于单独的栏（称为“堆叠操作栏”）中，如图 9 和 10 所示。

如果您制作更长的标签，向栏添加更多操作，和/或在更薄的视图中测试它（例如，手机上的纵向），它应该会自动将其拆分为第二个栏。

请注意他们的示例中的视图（复制如下），堆叠它们的第二个视图比第一个窄得多。

图 9

![图 9](../Images/0480c8737daf36de03ef9b60e8681867.png)

图 10

![图 10](../Images/31076df432a92827f41ae7476ada17d1.png)

# lwuit - 对多按钮图标使用 ImageDownloadService

> ID：14804783
> 
> 赞同：0
> 
> 时间：2013-02-11T01:41:20.453
> 
> 标签：lwuit, codenameone

是否可以对 MultiButton ComponentGroup 中的图标使用 ImageDownloadService（尤其是 createImageToStorage 方法）？

如果是，你能发布一个工作示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T05:51:47.347

使用`getIconComponent()`并将其传递给`ImageDownloadService`而不是多按钮本身。

# java - java如何将双1.4000000000000001转换为1.4？

> ID：14804793
> 
> 赞同：-1
> 
> 时间：2013-02-11T01:42:16.693
> 
> 标签：java, floating-point, double

我有一个方法

```
 private static double getMinorVersion(final double minorVersion) {
        return minorVersion + 0.1;
  } 
```

当我测试这个

```
 final Version version = new Version(1.3, VersionType.MINOR, 0.0);
   final Version newVersion = versionManager.patch(version);
   assertEquals(1.4, newVersion.getVersionNumber(), delta); // delta = 0.0 
```

我明白了

```
java.lang.AssertionError: 
Expected :1.4
Actual   :1.4000000000000001 
```

我该如何修复它以返回`1.4`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T01:48:05.903

不要使用`double`s 来表示软件版本号。它们应该存储为字符串。

正如您所注意到的，除了遇到精度问题外，版本号也不是十进制数。例如，约定是版本号`1.1`和`1.10`不相等（相反，`1.10`是版本后面`1.9`），版本号通常包含多个句点（例如，`1.1.1`）或非数字字符（例如，`1.0b2`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T01:45:33.737

您可以通过明确选择精度然后舍入来修复它。一种方法是临时转换为`int`这样的：

```
private static double getMinorVersion(final double minorVersion) {
    return ((int) ((minorVersion  + 0.1) * 100)) / 100.0;
} 
```

当然，使用`100`会得到两位数的精度，例如 1.38，但例如，您将无法做到 1.293。

*旁白：应该很明显，但请记住，这`getMinorVersion(1.9)`会给你 2.0，而不是 1.10 ！*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T02:08:26.990

1-要安全地比较双精度，您需要执行以下操作：

```
boolean isEqual(double a, double b){
     return a == b ? true : Math.abs(a - b) < 0.000001; // some epsilon 
} 
```

2-正如建议的那样，程序版本号应该是字符串*而不是*双倍

3-您可以实现类似于*android 应用程序*的东西，其中有两种类型的版本。首先，是内部`integer version`编号，每次构建都会增加，它可以用来比较程序版本；但是，这对用户是不可见的。其次，是字符串版本，它是一个字符串（即major.minor）并且对用户可见

# javascript - 如何将数据传回父窗口？

> ID：14804794
> 
> 赞同：6
> 
> 时间：2013-02-11T01:42:18.123
> 
> 标签：javascript, html

我找到了一个链接，该链接显示了如何将参数发送回开启者浏览器窗口。但它仅适用于`window.showmodal()`. 如果我使用正确，应该有一个简单的方法来做同样的事情`window.open()`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-11T02:11:52.463

如果您使用的是 window.open，您可以在父窗口中调用一个函数并将参数传递给该函数。

在子页面 javascript 中执行此操作

```
var x="hello";//parameter I want to pass to the parent
window.opener.ParentPageFunctionName(x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T01:49:25.637

你想要父属性。有关详细信息，请参阅： [http ://www.w3schools.com/jsref/prop_win_parent.asp](http://www.w3schools.com/jsref/prop_win_parent.asp)

# c++ - 模板类中没有匹配的函数调用

> ID：14804800
> 
> 赞同：0
> 
> 时间：2013-02-11T01:43:02.383
> 
> 标签：c++

我正在编写一个程序，它读取一个文本文件并将数据存储到一个名为 User 的对象类中。然后，我将 User 对象存储到一个名为 MyList 的动态数组模板类中，并带有 push_back 函数。

目前我的 MyList 类看起来像这样

```
#ifndef MYLIST_H
#define MYLIST_H
#include <string>
#include <vector>

using namespace std;

template<class type>
class MyList
{
public:
  MyList(); 
  ~MyList(); 
  int size() const;
  int at(int) const;
  void remove(int);
  void push_back(type);

private:
  type* List;
  int _size;
  int _capacity;
  const static int CAPACITY = 80;
}; 
```

并且推回的功能看起来像这样

```
template<class type>
void MyList<type>::push_back(type newfriend)
{

    if( _size >= _capacity){
         _capacity++;

    List[_size] = newfriend;
        size++;
    }
} 
```

我的用户类如下

```
#ifndef USER_H
#define USER_H
#include "mylist.h"
#include <string>
#include <vector>   

using namespace std;

class User
{
public:
  User();
  User(int id, string name, int year, int zip);
  ~User();

private:
  int id;
  string name;
  int age;
  int zip;
  MyList <int> friends;
};

#endif 
```

最后，在我的主函数中，我像这样声明用户 MyList

```
MyList<User> object4; 
```

我对 push_back 的调用如下

```
User newuser(int id, string name, int age, int zip);
   object4.push_back(newuser); 
```

User 类中的所有数据都是有效的，

目前我收到一个错误“没有匹配函数调用'MyList :: push_back（用户）（＆）（int，std：string，int，int）”

“注意候选人是：void MyList::push_back(type) [with type = User]”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:58:02.807

你声明一个函数

```
User newuser(int id, string name, int age, int zip); 
```

并尝试`push_back`将此功能放到`object4`. 但`object4`被宣布为

```
MyList<User> object4; 
```

不是一个`MyList<User (&) (int, std:string, int, int)>`返回 a 的函数`User`。这就是错误消息的原因

> 没有匹配函数调用“MyList::push_back(User (&) (int, std:string, int, int))”

如果你想创建一个`User`并将其附加到 object4，你会这样做

```
User newuser(id, name, age, zip);
object4.push_back(newuser); 
```

前提是您有一个带有这些参数的构造函数。

# mobile - xPage 移动应用程序中未找到目标视图错误

> ID：14804803
> 
> 赞同：1
> 
> 时间：2013-02-11T01:43:15.663
> 
> 标签：mobile, xpages, xpages-extlib

我正在尝试创建一个简单的移动 xPage 应用程序，并在尝试打开文档时收到以下错误：

`dojox.mobile.view#preformTransition: destination view not found: null`

我在单个页面控件中使用多个应用程序页面控件，并且已验证页面名称引用中没有拼写错误。

```
<?xml version="1.0" encoding="UTF-8"?>
    <xp:view xmlns:xp="http://www.ibm.com/xsp/core" 
           xmlns:xe="http://www.ibm.com/xsp/coreex">

    <xe:singlePageApp id="singlePageApp1" selectedPageName="homePage">
    <!-- Start of Home Page -->
    <xe:appPage id="appPage0" pageName="homePage">
        <xe:djxmHeading id="djxmHeading2" label="MOM Directory"></xe:djxmHeading>

        <xe:djxmRoundRectList id="djxmRoundRectList1">
            <xe:djxmLineItem id="djxmLineItem1" label="Everyone"
                moveTo="#viewPageEveryone">
            </xe:djxmLineItem>
            <xe:djxmLineItem id="djxmLineItem2" label="Lakeville"
                moveTo="#viewPageLakeville">
            </xe:djxmLineItem>
            <xe:djxmLineItem id="djxmLineItem3" label="Minneapolis"></xe:djxmLineItem>
            <xe:djxmLineItem id="djxmLineItem4" label="Northfield"></xe:djxmLineItem>
        </xe:djxmRoundRectList>

        </xe:appPage>
    <!--  End of Home Page -->
    <!-- Start of view Page Everyone -->
    <xe:appPage id="appPage1" pageName="viewPageEveryone" resetContent="true">
        <xe:djxmHeading id="djxmHeading1" label="Everyone View"></xe:djxmHeading>
        <xe:dataView id="dataView1" openDocAsReadonly="true"
            rows="9" pageName="#documentPage">
            <xp:this.facets>
                <xp:link escape="true" id="link1" xp:key="pagerBottomLeft"
                    text="More">
                    <xp:eventHandler event="onclick" submit="false">
                        <xp:this.script>
                            <xe:addRows for="dataView1" disableId="link1">
                            </xe:addRows>
                        </xp:this.script>
                    </xp:eventHandler>
                </xp:link>
            </xp:this.facets>
            <xe:this.data>
                <xp:dominoView var="view1" viewName="ALL">
                </xp:dominoView>
            </xe:this.data>
            <xe:this.summaryColumn>
                <xe:viewSummaryColumn columnName="last_name"></xe:viewSummaryColumn>
            </xe:this.summaryColumn>
        </xe:dataView>
    </xe:appPage>
    <!-- End of view Page everyone -->

    <!-- Start of view Page Lakeville -->
    <xe:appPage id="appPage3" pageName="viewPageLakeville" resetContent="true">
        <xe:djxmHeading id="djxmHeading3" label="Lakeville View"></xe:djxmHeading>
        <xe:dataView id="dataView2" openDocAsReadonly="true"
            rows="9" pageName="#documentPage">
            <xp:this.facets>
                <xp:link escape="true" id="link2" xp:key="pagerBottomLeft"
                    text="More">
                    <xp:eventHandler event="onclick" submit="false">
                        <xp:this.script>
                            <xe:addRows for="dataView2" disableId="link2">
                            </xe:addRows>
                        </xp:this.script>
                    </xp:eventHandler>
                </xp:link>
            </xp:this.facets>
            <xe:this.data>
                <xp:dominoView var="view2" viewName="LKVL">
                </xp:dominoView>
            </xe:this.data>
            <xe:this.summaryColumn>
                <xe:viewSummaryColumn columnName="last_name"></xe:viewSummaryColumn>
            </xe:this.summaryColumn>
        </xe:dataView>
    </xe:appPage>
    <!-- End of view Page Lakeville -->

    <!-- Start of Document Page -->
    <xe:appPage id="appPage2" pageName="documentPage" resetContent="true" preload="true">
        <xe:djxmHeading id="documentPageHeading" back="Back" label="Document" moveTo="homePage"></xe:djxmHeading>
        <xp:panel>
            <xp:this.data>
                <xp:dominoDocument var="document1"
                    formName="frmBB">
                </xp:dominoDocument>
            </xp:this.data>
        </xp:panel>
    </xe:appPage>
    <!-- End of Document Page -->

</xe:singlePageApp> 
```

我进行了很多搜索，发现了几个对这个错误的引用，但到目前为止没有任何帮助。我正在运行带有 UP1 和 Notes 9 Beta Designer 客户端的 8.5.3 FP3 服务器。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T11:53:38.107

我已经在 9.0 上试过了，你的标记 Shean 工作正常。我不得不将它指向不同的数据源，但总的来说它有效。这是我用的...

```
<xe:singlePageApp id="singlePageApp1" selectedPageName="homePage">
<!-- Start of Home Page -->
<xe:appPage id="appPage0" pageName="homePage">
    <xe:djxmHeading id="djxmHeading2" label="MOM Directory"></xe:djxmHeading>

    <xe:djxmRoundRectList id="djxmRoundRectList1">
        <xe:djxmLineItem id="djxmLineItem1" label="Everyone"
            moveTo="#viewPageEveryone">
        </xe:djxmLineItem>
        <xe:djxmLineItem id="djxmLineItem2" label="Lakeville">
        </xe:djxmLineItem>
        <xe:djxmLineItem id="djxmLineItem3" label="Minneapolis"></xe:djxmLineItem>
        <xe:djxmLineItem id="djxmLineItem4" label="Northfield"></xe:djxmLineItem>
    </xe:djxmRoundRectList>

    </xe:appPage>
<!--  End of Home Page -->
<!-- Start of view Page Everyone -->
<xe:appPage id="appPage1" pageName="viewPageEveryone" resetContent="true">
    <xe:djxmHeading id="djxmHeading1" label="Everyone View"></xe:djxmHeading>
    <xe:dataView id="dataView1" openDocAsReadonly="true"
        rows="9" pageName="#documentPage">
        <xp:this.facets>
            <xp:link escape="true" id="link1" xp:key="pagerBottomLeft"
                text="More">
                <xp:eventHandler event="onclick" submit="false">
                    <xp:this.script>
                        <xe:addRows for="dataView1" disableId="link1">
                        </xe:addRows>
                    </xp:this.script>
                </xp:eventHandler>
            </xp:link>
        </xp:this.facets>
        <xe:this.data>
            <xp:dominoView var="view1" viewName="v01">
            </xp:dominoView>
        </xe:this.data>
        <xe:this.summaryColumn>
            <xe:viewSummaryColumn columnName="subject"></xe:viewSummaryColumn>
        </xe:this.summaryColumn>
    </xe:dataView>
</xe:appPage>
<!-- End of view Page everyone -->

<!-- Start of view Page Lakeville -->
<xe:appPage id="appPage3" pageName="viewPageLakeville" resetContent="true">
    <xe:djxmHeading id="djxmHeading3" label="Lakeville View"></xe:djxmHeading>
    <xe:dataView id="dataView2" openDocAsReadonly="true"
        rows="9" pageName="#documentPage">
        <xp:this.facets>
            <xp:link escape="true" id="link2" xp:key="pagerBottomLeft"
                text="More">
                <xp:eventHandler event="onclick" submit="false">
                    <xp:this.script>
                        <xe:addRows for="dataView2" disableId="link2">
                        </xe:addRows>
                    </xp:this.script>
                </xp:eventHandler>
            </xp:link>
        </xp:this.facets>
        <xe:this.data>
            <xp:dominoView var="view2" viewName="LKVL">
            </xp:dominoView>
        </xe:this.data>
        <xe:this.summaryColumn>
            <xe:viewSummaryColumn columnName="last_name"></xe:viewSummaryColumn>
        </xe:this.summaryColumn>
    </xe:dataView>
</xe:appPage>
<!-- End of view Page Lakeville -->

<!-- Start of Document Page -->
<xe:appPage id="appPage2" pageName="documentPage"
    resetContent="true" preload="true">
    <xe:djxmHeading id="documentPageHeading" back="Back"
        label="Document" moveTo="homePage">
    </xe:djxmHeading>
    <xp:panel>
        <xp:this.data>
            <xp:dominoDocument var="document1" formName="f01">
            </xp:dominoDocument>
        </xp:this.data>
        <xe:formTable id="formTable1">
            <xe:formRow id="formRow1" label="Subject: ">
                <xp:inputText id="inputText1"
                    value="#{document1.subject}">
                </xp:inputText>
            </xe:formRow>
        </xe:formTable>

    </xp:panel>
</xe:appPage>
<!-- End of Document Page --> 
```

也许应用程序本身还有其他事情正在破坏你的东西。您没有将您的应用程序设置为特定的 Dojo 版本？还是其他类似的限制？

# c++ - 使用模板从函数返回不同的数据类型

> ID：14804805
> 
> 赞同：0
> 
> 时间：2013-02-11T01:43:36.863
> 
> 标签：c++, function, templates, return-value

我正在尝试创建一个函数来解析 XML 并返回 a`std::string`或`int`使用模板。我想出了以下代码：

```
template <class T>
T queryXml(char *str)
{
     if (typeid(T) == typeid(int))
         return evalulate_number(doc);
     else
         return evaluate_string(doc);
} 
```

...并像这样调用函数：

```
queryXml<int>("/people/name"); //I would like an int returned
queryXml<std::string>("/people/name"); //I would like a string returned 
```

但我得到错误说`cannot convert pugi::string_t{aka std::basic_string<char>} to int in return`。有没有更好更干净的方法来使用模板来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T01:47:50.377

模板专业化。

```
// The general form in your algorithm is to use a string...
template <class T>
T queryXml(char *str)
{
   return evaluate_string(doc);
}

// ...and you want special behavior when using an int
template <>
int queryXml(char *str)
{
   return evalulate_number(doc);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T01:52:46.883

从根本上说，您不能拥有具有两种不同返回类型的函数。但是，您可以拥有多个具有相似名称和不同返回类型的函数。您可以通过函数重载或模板特化来完成此操作。在您的情况下，不能使用函数重载，因为您希望所有返回类型都具有相同的函数签名。

以下是您可以如何针对每种预期类型专门化您的模板：

```
#include <string>

int evaluate_number() { return 87; }
std::string evaluate_string() { return "hi\n"; }

template <class T>
T queryXml(const char *str);

template<>
int queryXml<int>(const char *str) {
  return evaluate_number();
}

template<>
std::string queryXml<std::string>(const char *str) {
  return evaluate_string();
}

int main () {
  int i = queryXml<int>("/people/name"); //I would like an int returned
  std::string s = queryXml<std::string>("/people/name"); //I would like a string returned
} 
```

# java - 在java中跨平台播种一个没有时间的随机生成器

> ID：14804808
> 
> 赞同：7
> 
> 时间：2013-02-11T01:44:16.503
> 
> 标签：java, random

我几乎同时在两个线程上初始化两个随机数生成器，我希望这两个生成器的行为完全不同。我会`Random.nextInt(7)`经常一个接一个地调用两个生成器。使用`System.currentTimeMillis()`不是一个好主意，因为看起来我的计算机速度非常快，以至于我从两个生成器获得的数字很有可能是相同的。那么有没有办法配置它们，`Random`以便尽管它们被一个接一个地调用，但它们的行为仍然不同？我希望解决方案是跨平台兼容的，因此任何特定于平台的想法（例如读取）`/dev/random`都是不可接受的。感谢帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T01:46:43.497

一种方法：使用 UUID (GUID) 为每个 Random 实例播种，该 UUID (GUID) 转换为 long。

*   [在 Java 中生成 UUID](https://stackoverflow.com/questions/325443/generate-uuid-in-java)

其他答案建议使用[nanoTime](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#nanoTime%28%29)，这可能取决于硬件的速度，但我更喜欢 UUID 路由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T01:48:34.567

您可以使用`System.nanoTime()`which 将减少两个线程具有相同种子的可能性。

或者创建一个线程安全的实用程序类来为您获取随机数对象，同时确保它为每个新实例使用不同的种子。

此外，您可以为每个线程分配一个*数字 id*作为线程名称并将其附加到种子

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T21:45:22.787

您可以使用[`SecureRandom`](http://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html)为您的两个随机数生成器生成种子。它使用可以使用特定于平台的熵源的服务提供商基础架构，因此在可用的系统上，您可能会从中获得熵，`/dev/random`而不必担心代码中的熵。[另一个答案](https://stackoverflow.com/a/14804828/1468366)中提到的[UUID](https://stackoverflow.com/a/14804828/1468366)是从这样的来源生成的，至少[在 OpenJDK 7.6 中](http://hg.openjdk.java.net/jdk7u/jdk7u6/jdk/file/8c2c5d63a17e/src/share/classes/java/util/UUID.java)是这样。

也就是说，请注意，从 Java 7 开始，在多线程中使用 PRNG 的首选方式是[`ThreadLocalRandom`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadLocalRandom.html). 我不确定，但在我看来，这里的主要目标是避免同步开销，而不是播种问题。至少在 OpenJDK 7.6 中，[构造函数](http://hg.openjdk.java.net/jdk7u/jdk7u6/jdk/file/8c2c5d63a17e/src/share/classes/java/util/concurrent/ThreadLocalRandom.java)使用[默认`Random`构造函数](http://hg.openjdk.java.net/jdk7u/jdk7u6/jdk/file/8c2c5d63a17e/src/share/classes/java/util/Random.java)，而默认构造函数又使用高分辨率系统时间（以纳秒为单位，但不一定具有实际分辨率），并结合静态变量的当前值。后者即使对于在系统时钟的同一滴答声中创建的实例也能确保不同的种子，因此即使`Random`使用默认构造函数简单地构造实例，您的原始问题也应该消失。

这个唯一性是在 2010 年[引入](http://hg.openjdk.java.net/jdk7u/jdk7u6/jdk/rev/df4d3e3e465a)的，以响应[错误报告 #6937857](https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6937857)。该报告是针对 Java 7 报告的，并且在 Java 7 中也已修复，但根据 mercurial 存储库，此更改应该首先包含在[`jdk7-b94`release](http://hg.openjdk.java.net/jdk7/jdk7/jdk/log/cf44386c8fe3)中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T01:46:50.333

您可以使用`System.nanoTime()`, 而不是`System.currentTimeMillis()`.

只需将第二个线程的创建延迟 30 毫秒，这将导致 nanoTime() 与 thread1 的 nanoTime() 随机不同

所以你的问题有一个实际的观点，对于这个观点 nanoTime() 我认为足够了。

另一种观点是军事安全加密的更理论化的观点。在那里，您想使用使用物理随机性（随机寄存器）的特殊硬件。但这不是你的意图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-03T11:54:01.997

### 不要做任何事。有用！

这是 java.util.Random 的代码：

```
public Random() {
    this(seedUniquifier() ^ System.nanoTime());
} 
```

顾名思义，这`seedUniquifier`使种子独一无二。它适用于单线程和多线程：

```
private static long seedUniquifier() {
    // L'Ecuyer, "Tables of Linear Congruential Generators of
    // Different Sizes and Good Lattice Structure", 1999
    for (;;) {
        long current = seedUniquifier.get();
        long next = current * 181783497276652981L;
        if (seedUniquifier.compareAndSet(current, next))
            return next;
    }
} 
```

# python - 追溯外键

> ID：14804822
> 
> 赞同：0
> 
> 时间：2013-02-11T01:46:01.137
> 
> 标签：python, django

我有以下表格：

```
class Person (models.Model):

    GENDER_CHOICES = (
                      ('M', 'Male'),
                      ('F', 'Female'),
                      )

    first_name = models.CharField(max_length=50)
    last_name  = models.CharField(max_length=50)
    gender = models.CharField(max_length = 1, choices=GENDER_CHOICES, default='M')
    age = models.IntegerField()
    photo = models.ImageField(upload_to='uploads/images/runners', blank=True)

    def __unicode__(self):
        return '%s, %s' % (self.last_name, self.first_name) 
```

和

```
class Runner (models.Model):
    ''' Represents a runner actually in a particular Race '''
    position = models.IntegerField()
    person = models.ForeignKey(Person, related_name="person")
    race = models.ForeignKey(Race) 
```

和

```
class Race (models.Model):
    '''An instance of an Event. i.e., the race that is happening this year'''
    year = models.IntegerField()
    description = models.TextField()
    event = models.ForeignKey(Event)

    def leaderboard(self):
        '''
        Orders the leaders and returns the entire set
        Args:
        Returns: 
            A list of Runners ordered by position
        '''
        #board = Runner.objects.prefetch_related("person").filter(race=self).order_by('position') 
        board = Runner.objects.prefetch_related("person")
        print "DEBUG: %s" % board.values()
        return board 
```

我想要完成的是检索并随后编码一个 JSON 响应，该响应包含一个 Runner 实例列表，其中包含每个相应 Person 实例的属性。

在排行榜方法中，我编写了一个查询示例。执行后，我得到以下信息：

```
DEBUG: [{'person_id': 1, 'position': 1, 'id': 1, 'race_id': 1}, {'person_id': 2, 'position': 2, 'id': 2, 'race_id': 1}] 
```

我希望它看起来像让 QuerySet 用一个 Person 实例和该实例的所有关联属性扩展（并替换）每个“person_id”字段。（即，first_name、last_name 等。

这可能吗？我尝试过使用 prefetch_related() 和 select_related ，但无济于事。

与往常一样，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T03:17:58.023

您可以通过执行以下操作在比赛中获得所有跑步者：

```
self.runner_set.select_related('person') 
```

这将包含所有的跑步者，并且会有一个`JOIN`人表。

当您使用`.values()`时，它会返回外键值，这不是您想要的。

如果你愿意，你可以`related_name="runners"`在你的外键中使用 Race。然后你就可以通过`self.runners...`

# c - C编程返回0不终止程序

> ID：14804830
> 
> 赞同：3
> 
> 时间：2013-02-11T01:46:55.157
> 
> 标签：c, exit, terminate

我为我的操作系统课程编写了这个 shell，由于某种原因，当我键入“exit”时，我的 main 函数没有终止，它应该从 while 循环中中断，然后返回 0 到 main，这应该结束程序，但是相反，它只是继续前进。

事实上，它会告诉我它“即将退出”，然后它会返回到 while 循环，并像往常一样继续运行。

有人看到问题了吗？谢谢你的帮助

```
#include <errno.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#define LENGTH 1000
#define MAXCMD 11
void init(char *temp);
void clean(char **orderedIds);

int main (int argc, char *argv[], char *envp[])
{ 
    char temp[LENGTH];
    char * tok;
    char c = '\0';
    int *ret_status; 
    pid_t pid; 
    printf("\n$");
    int i, j = 0;   
    while(c !=EOF) 
    { 
        //while not ^D // Source: LinuxGazzette Ramankutty
        c = getchar();    
        if(c=='\n')
        { //enter command
            char **orderedIds = malloc(MAXCMD * sizeof(char*)); 
            for (i=0; i<MAXCMD; i++)
            {
                orderedIds[i] = malloc(MAXCMD * sizeof(char*)); 
            }
            int k=0; 
            tok = strtok(temp, " "); 
            while (tok !=NULL)
            { 
                strcpy(orderedIds[k], tok);
                k++;
                tok = strtok (NULL, " ");
            } 
            orderedIds[k] = NULL; //END with NULL 
            init(temp); //initialize the array 
            pid = fork(); 
            if (pid != 0)
            {
                //printf("Waiting for child (%d)\n", pid);
                pid = wait(ret_status);
            } 
            else 
            {
                if (strcmp(orderedIds[0],"exit")==0)
                { //check for exit
                    printf("Thank you, now exiting\n");
                    break;
                } 
                if (execvp(orderedIds[0], orderedIds))
                {
                    printf("%s\n", orderedIds[0]);
                    puts(strerror(errno));
                    exit(127);
                }
            }
            clean(orderedIds);
            printf("%s", &c);
            printf("$ ");
        } 
        else 
        {
            strncat(temp, &c, 1);                                      
        }
    }                                                                          
    printf("\n I'm a bout to exit!");                                          
    return 0;                                                                  
    exit(0);                                                                   
}                                                                                  

void init(char *temp)
{
    //Function to initialize/rest=et the array                   
    int i;                                                                     
    for(i=0; i<LENGTH; i++)
    {                                                   
        temp[i] = 0;                                                       
    }                                                                          
}

void clean(char **orderedIds)
{
    //garbage collection                                 
    int i;                                                                     
    for(i=0; i<MAXCMD; i++)
    {                                                   
        free(orderedIds[i]);                                               
    }                                                                          
    free(orderedIds);                                                          
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:57:00.363

好吧，它确实退出了。问题是你正在分叉执行。你需要小心你所做的事情。我假设如果一个子进程退出，它应该退出链上的所有父进程。你来做这件事：

```
pid = wait(ret_status); 
```

但永远不要对结果做任何事情。顺便说一句，仅仅因为`wait`期望一个指针并不意味着您应该将一个未初始化的指针传递给它。你定义：

```
int *ret_status; 
```

你真正应该做的是：

```
int ret_status;
pid = wait(&ret_status); 
```

然后测试 的值`ret_status`。如果它表明您（父进程）应该退出，那么您必须`break`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T01:59:55.687

你做了一个 fork()，它在你正在检查命令“exit”的子进程中。子进程确实退出了，但父进程继续运行。你应该做的是在调用 fork()*之前检查内部命令（如“exit”）。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T01:54:19.593

尝试在完成工作后终止子进程

```
 kill(pid); 
```

# c - long int 大小的差异

> ID：14804831
> 
> 赞同：-2
> 
> 时间：2013-02-11T01:47:01.527
> 
> 标签：c

在 C中使用时出现大小差异`long int`。以下代码：

```
#include <stdio.h>

void main()
{
    printf("%d\n", sizeof(long int));
} 
```

给出 8 作为输出，所以 64 位用于表示`long int`，对吗？但：

```
#include <stdio.h>

void main()
{
    long int a;
    a = 1;
    a = a << 32;
    printf("%d\n", a);
} 
```

给出 0（移位 31 给出 -2147483648，即 -2**31）。因此，似乎只使用了 4 个字节。这是什么意思？我正在使用没有标志的 gcc 4.4.5

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-11T01:51:57.910

您将其打印为普通整数：`printf("%d")`. 尝试将其打印为长整数：`printf("%ld ...")`.

# matlab - MATLAB 中的视频过滤器

> ID：14804838
> 
> 赞同：2
> 
> 时间：2013-02-11T01:47:35.783
> 
> 标签：matlab, image-processing, filter, signal-processing

我正在尝试使用 MATLAB重现[本文的结果。](http://fedcsis.eucip.pl/proceedings/pliks/188.pdf)我需要对视频的 RGB 通道序列应用过滤器（每个通道每帧有 1 个颜色值，对应于该帧中该通道的所有像素值的总和，即如果有 200 帧我有200x3 矩阵，列是 RGB，行是帧）。

我应该过滤我得到的 3 个信号并应用 PCA 和 ICA。

我是信号处理的新手，我一直在尝试使用 FDATool 和过滤器功能，但我做不到。我应该制作一个 FIR 带通滤波器，0.5-3.7 Hz，32 点汉明窗。我用 FDATool 做了一个这样的过滤器，但我不确定 Fs 并且我不能得到一个连贯的结果。

我正在这样做（这可能是错误的）：

```
filt_channels = filter(my_coefficients,1,channels); 
```

其中 channels 是我的 200x3 矩阵。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:31:48.090

每个通道在图像对象 img 中定义如下：

```
R = img(:,:,1);
G = img(:,:,2);
B = img(:,:,3); 
```

您应该能够从 FDATool 导出到过滤器对象。然后，您可以使用以下语法应用过滤器：

```
Rfilt=filter2(Object_name, R);
Gfilt=filter2(Object_name, G);
Bfilt=filter2(Object_name, B); 
```

其中 Object_name 是生成的过滤器对象，R、G 和 B 是您要过滤的对象。

如果您想查看它们以查看是否得到了您想要的结果，请形成一个矩阵 A，然后使用`imshow(A)`. 对视频流中的每一帧执行此操作。

前任。

```
filtImg = [];

filtImg(:,:,1) = Rfilt;
filtImg(:,:,2) = Gfilt;
filtImg (:,:,3) = Bfilt;

imshow(filtImg) 
```

每个通道（R，G，然后 B）可以像这样在每帧上单独过滤，然后您可以将*processpca* Matlab 函数应用于生成的 RGB 矩阵 filtImg。

**参考资料** [http://www.mathworks.com/matlabcentral/newsreader/view_thread/301472](http://www.mathworks.com/matlabcentral/newsreader/view_thread/301472) [http://www.mathworks.com/help/nnet/ref/processpca.html](http://www.mathworks.com/help/nnet/ref/processpca.html)

# cuda - Cuda5 和 CMake

> ID：14804847
> 
> 赞同：1
> 
> 时间：2013-02-11T01:48:37.710
> 
> 标签：cuda, cmake

我一直在努力让一些简单的 Cuda 5.0 示例在带有 CMake 的 Windows 7 上运行。我正在运行 Windows 7 64 位和 Visual C++ Express 2010。

前几天我有这个工作，现在它无法编译，我不太清楚为什么。我通常在 *nix 环境中进行编码，因此 Windows 开发环境对我来说不是一个强大的领域。

如果有人能帮助我免于拔出更多的头发，将不胜感激。

该示例只是 Cuda 附带的简单 vectorAdd.cu 文件和 CMakeLists.txt 文件。为了保持这篇文章的简短，我将推迟发布源文件，因为它有点长。

这是我的 CMakeLists.txt 文件：

```
CMAKE_MINIMUM_REQUIRED( VERSION 2.8 )

PROJECT( vectorAdd )

FIND_PACKAGE( CUDA REQUIRED )

CUDA_INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR} )

CUDA_ADD_EXECUTABLE( ${CMAKE_PROJECT_NAME} vectorAdd.cu ) 
```

当我尝试编译时，我得到这个输出：

```
1>------ Build started: Project: ZERO_CHECK, Configuration: Debug Win32 ------
1>Build started 2/10/2013 6:24:59 PM.
1>PrepareForBuild:
1>  Creating directory "D:\Code\CPlusPlus\Cuda\example_1\Build\Debug\".
1>InitializeBuildStatus:
1>  Creating "Win32\Debug\ZERO_CHECK\ZERO_CHECK.unsuccessfulbuild" because     "AlwaysCreate" was specified.
1>CustomBuild:
1>  Checking Build System
1>  CMake does not need to re-run because D:/Code/CPlusPlus/Cuda/example_1/Build/CMakeFiles/generate.stamp is up-to-date.
1>FinalizeBuildStatus:
1>  Deleting file "Win32\Debug\ZERO_CHECK\ZERO_CHECK.unsuccessfulbuild".
1>  Touching "Win32\Debug\ZERO_CHECK\ZERO_CHECK.lastbuildstate".
1>
1>Build succeeded.
1>
1>Time Elapsed 00:00:00.07
2>------ Build started: Project: vectorAdd, Configuration: Debug Win32 ------
2>Build started 2/10/2013 6:24:59 PM.
2>InitializeBuildStatus:
2>  Creating "vectorAdd.dir\Debug\vectorAdd.unsuccessfulbuild" because "AlwaysCreate" was specified.
2>ComputeCustomBuildOutput:
2>  Creating directory "D:\Code\CPlusPlus\Cuda\example_1\Build\CMakeFiles\vectorAdd.dir\Debug\".
2>CustomBuild:
2>  Building NVCC (Device) object CMakeFiles/vectorAdd.dir//Debug/vectorAdd_generated_vectorAdd.cu.obj
2>nvcc : fatal error : Could not set up the environment for Microsoft Visual Studio using 'C:/Program Files (x86)/Microsoft Visual Studio 10.0/VC/bin/../../common7/Tools/vsvars32.bat'
2>  CMake Error at vectorAdd_generated_vectorAdd.cu.obj.cmake:206 (message):
2>    Error generating
2>    D:/Code/CPlusPlus/Cuda/example_1/Build/CMakeFiles/vectorAdd.dir//Debug/vectorAdd_generated_vectorAdd.cu.obj
2>  
2>  
2>
2>Build FAILED.
2>
2>Time Elapsed 00:00:00.29
3>------ Skipped Build: Project: ALL_BUILD, Configuration: Debug Win32 ------
3>Project not selected to build for this solution configuration 
========== Build: 1 succeeded, 1 failed, 0 up-to-date, 1 skipped ========== 
```

有人有建议吗？我不认为我从它工作到停止工作时更改了任何设置。我试过重启和所有这些东西。

# google-fusion-tables - 如何在 POST 正文中插入多行？谷歌融合表 API V1.0

> ID：14804854
> 
> 赞同：0
> 
> 时间：2013-02-11T01:50:45.743
> 
> 标签：google-fusion-tables

我可以通过 QueryString sql 参数插入行。[https://developers.google.com/fusiontables/docs/v1/reference/query/sql?hl=ja](https://developers.google.com/fusiontables/docs/v1/reference/query/sql?hl=ja)

但是参考文档描述了您可以使用 sql 参数作为 POST 的主体来插入行。我不能。我该怎么办？[https://developers.google.com/fusiontables/docs/v1/using?hl=ja#insertRow](https://developers.google.com/fusiontables/docs/v1/using?hl=ja#insertRow)

第一个参考描述了必需的 QueryString sql 参数。我通过在 QueryString 中省略 sql 得到错误 400。使用 QueryString 有限制（URL 长度）。我想在 POST 正文中插入许多行。

要求：

```
POST https://www.googleapis.com/fusiontables/v1/query?access_token={my access token} HTTP/1.1
Content-Type: application/json
sql=INSERT INTO 1JOgUG5QWE5hybrDAd2GX3yfjVCGoM6u7WkSVDok ('_id', '_count', 'start_time', 'end_time',  'counts', 'start_plaece', 'end_place', 'distance',  'average_speed', 'send_flag', 'time_span', 'train_type',  'calories', 'weight', 'status', 'map_url', 'rally_id' ) VALUES ('-1', '0', '2013/01/19 09:00:00.000', '2013/01/19 12:34:56.000', '9876', 'Tokorozawa3', 'iidabashi2', '45678',  '67', '0', '986532', '1', '389', '77.70', '0', 'http://www.google.com/',  '3'); 
```

回复：

```
body {
  "error": {
   "errors": [
    {
     "domain": "global",
     "reason": "required",
     "message": "Required parameter: sql",
     "locationType": "parameter",
     "location": "sql"
    }
   ],
   "code": 400,
   "message": "Required parameter: sql"
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:09:50.413

文档有问题，缺少一些细节。

**您可以在请求 url**中使用 sql=...参数。ContentType 标头通常是 application/json 但 API 也可能接受其他标头。在这种情况下，您的 URL 长度限制为 2048 个字符。

**您还可以在 POST body 中**使用 sql=... 。在这种情况下，您必须将**ContentType 设置为 application/x-www-form-urlencoded**。您在 1 个请求中限制为 500 个 INSERT 语句。

另一种选择是使用 importRows 方法。在这里，您将使用**CSV 作为 POST 正文**。在这种方法中，您会受到 100MB 上传数据的限制。**ContentType 必须是 "application/octet-stream"**。更多详细信息：[importRows 参考](https://developers.google.com/fusiontables/docs/v1/reference/table/importRows "导入行参考")

# php - 样式 PHP 联系表格邮件

> ID：14804855
> 
> 赞同：0
> 
> 时间：2013-02-11T01:50:54.683
> 
> 标签：php, forms, contact

我想知道如何设置 $body =" 部分的样式，以便我收到的电子邮件更易于阅读。

我已经尝试了一些东西，比如添加标签或正文标签，但似乎都不起作用，请帮我解决这个烦人的问题，

多多的问候，

昆西

```
<?php
                    $name = $_POST['name'];
                    $email = $_POST['email'];
                    $message = $_POST['message'];
                    $from = 'From: info@epicconcepts.nl'; 
                    $to = 'info@epicconcepts.nl'; 
                    $subject = 'Contact formulier bericht';
                    $human = $_POST['human'];

                    $headers = "From: " . strip_tags($_POST['req-email']) . "\r\n";
                    $headers .= "Reply-To: ". strip_tags($_POST['req-email']) . "\r\n";
                    $headers .= "CC: quincynorbert@live.nl\r\n";
                    $headers .= "MIME-Version: 1.0\r\n";
                    $headers .= "Content-Type: text/html; charset=ISO-8859-1\r\n";

                    $body = "
                    New Mail $name\n $email\n \n $message";

                    if ($_POST['submit']) {
                        if ($name != '' && $email != '') {
                            if ($human == '4') {                 
                                if (mail ($to, $subject, $body, $from)) { 
                                echo '<p class="correct-message">Your message has been sent!</p>';
                            } else { 
                                echo '<p class="correct-message">Something went wrong, go back and try again!</p>'; 
                            } 
                        } else if ($_POST['submit'] && $human != '4') {
                            echo '<p class="correct-message">You answered the anti-spam question incorrectly!</p>';
                        }
                        } else {
                            echo '<p class="correct-message">You need to fill in all required fields!</p>';
                        }
                    }
                ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:10:00.677

如果您只是使用 css 样式（如 style="correct-message"） - 这将不起作用，您也应该在 body 中添加样式定义，如下所示：

```
<style> .correct-message{font-weight:bold; color:red;}</style> 
```

# c# - WCF 中的工厂方法模式存在一些错误。谁能指出我的错误？

> ID：14804857
> 
> 赞同：-3
> 
> 时间：2013-02-11T01:51:21.207
> 
> 标签：c#, .net, wcf, factory-pattern

我在我的 WCF 中实现了工厂设计方法，但我猜这行有一些错误：

```
return svc.Calculation(int value1 + int value2); 
```

这是我的其他代码：

```
namespace CompositeWCF
{
public class Service1 : IService1
{
    public int Calculation(int value1, int value2, string calType)
    {
        try
        {
          IService1 svc;

          switch (calType)
            {
                case "addition":
                    svc = new addition();

                case "subtraction":

                    svc = new subtraction();

                case "multiplication":

                    svc = new multiplication();

                case "division":
                    svc = new division();

            }

          return svc.Calculation(int value1 + int value2);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }

        return 0;
        }
    }
} 
```

“加法”、“减法”、“乘法”、“除法”有四个类

有类似的代码

```
 namespace CompositeWCF
    {
    class addition:IService1
    {
        public int Calculation(int value1, int value2)
        {
            return value1 + value2;
        }
    }
} 
```

这应该获取用户输入，即两个值和计算类型，并使用它们从特定类执行计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:53:31.507

首先：说“我猜这条线有错误”而不是实际提供错误..会让你投反对票。如果我要复制并粘贴大量代码给您并说“有错误。请找到它”..您能做到吗？

但是，因为你的错误很明显..这是我的答案：

```
return svc.Calculation(int value1 + int value2);
                       ^^^          ^^^
                // Remove this     Remove this 
```

此外，正如 David 在评论中指出的那样，该函数采用两个单独的参数：

```
return svc.Calculation(value1, value2); 
```

返回变量时不需要包含类型名称。仅在声明变量时。您可能会在某个时候遇到强制转换，如下所示：

```
return svc.Calculation((int)value1, (int)value2);
// Notice the parenthesis 
```

..但是，您不需要在您的示例中。

# c - 使用 openmp 优化 MSE 算法

> ID：14804859
> 
> 赞同：1
> 
> 时间：2013-02-11T01:51:25.837
> 
> 标签：c, algorithm, optimization, openmp, mse

我想使用 openMP 优化下面的代码

```
double val;
double m_y = 0.0f;
double m_u = 0.0f;
double m_v = 0.0f;

#define _MSE(m, t) \
val = refData[t] - calData[t];  \
m += val*val; 

#pragma omp parallel 
 {
 #pragma omp for
for( i=0; i<(width*height)/2; i++ ) {  //yuv422: 2 pixels at a time
    _MSE(m_u, 0); 
    _MSE(m_y, 1); 
    _MSE(m_v, 2); 
    _MSE(m_y, 3); 

  #pragma omp reduction(+:refData) reduction(+:calData)
    refData += 4;
    calData += 4;
 // int id = omp_get_thread_num();
 //printf("Thread %d performed %d iterations of the loop\n",id ,i);
}

} 
```

欢迎任何关于优化上述代码的建议，目前我有错误的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T02:24:26.117

我认为您可以做的最简单的事情是让它分成 4 个线程，并计算每个线程中的 UYVY 错误。不要让它们成为单独的值，而是让它们成为一个数组：

```
double sqError[4] = {0};
const int numBytes = width * height * 2;

#pragma omp parallel for
for( int elem = 0; elem < 4; elem++ ) {
    for( int i = elem; i < numBytes; i += 4 ) {
        int val = refData[i] - calData[i];
        sqError[elem] += (double)(val*val);
    }
} 
```

这样，每个线程都只针对一件事进行操作，并且没有争用。

也许这不是 OMP 的最高级用法，但您应该会看到加速。

* * *

在您对性能下降发表评论后，我做了一些实验，发现性能确实更差。我怀疑这可能是由于缓存未命中。

你说：

> 这次使用 openMP 达到了性能：时间：0.040637，串行时间：0.018670

因此，我使用每个变量的归约并使用单个循环对其进行了重新设计：

```
 #pragma omp parallel for reduction(+:e0) reduction(+:e1) reduction(+:e2) reduction(+:e3)
    for( int i = 0; i < numBytes; i += 4 ) {
        int val = refData[i] - calData[i];
        e0 += (double)(val*val);
        val = refData[i+1] - calData[i+1];
        e1 += (double)(val*val);
        val = refData[i+2] - calData[i+2];
        e2 += (double)(val*val);
        val = refData[i+3] - calData[i+3];
        e3 += (double)(val*val);
    } 
```

在 4 核机器上使用我的测试用例，我观察到不到 4 倍的改进：

```
serial:             2025 ms
omp with 2 loops:   6850 ms
omp with reduction: 455  ms 
```

* * *

**[编辑]**关于为什么第一段代码的性能比非并行版本差，*Hristo Iliev*说：

> 您的第一段代码是错误共享在多线程代码中的一个可怕示例。由于 sqError 只有 4 个元素，每个元素 8 字节，因此它适合单个缓存行（即使在现代 x86 CPU 上的半个缓存行中）。由于 4 个线程不断写入相邻元素，这会由于错误共享而产生大量的内核间缓存失效。可以通过使用像这样的结构来解决这个问题 struct _error { double val; 双垫[7]；} sqError[4]; 现在每个 sqError[i].val 都将位于单独的缓存行中，因此不会出现错误共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T02:16:41.700

该代码看起来像是在计算 MSE，但添加到相同的总和中，`m`. 为了使并行性正常工作，您需要消除 的共享`m`，一种方法是预先分配一个数组（我想是宽度*高度/2）来存储不同的总和或`m`s。最后，把所有的总和加起来。

此外，测试这实际上更快！

# php - Facebook 在用户墙上发布的重大更改

> ID：14804861
> 
> 赞同：-1
> 
> 时间：2013-02-11T01:51:52.040
> 
> 标签：php, facebook, facebook-graph-api, facebook-javascript-sdk, facebook-php-sdk

我目前正在开发一个自动在 Facebook 墙上发布的应用程序。我浏览了所有讨论此类应用程序的博客和文章。最后我得出了这个结果。首先，我必须对用户进行身份验证并授予所需的权限，如下面的 JavaScript 代码所示：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<title>Title</title>
        <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
</head>
<body>

<div id="fb-root"></div>
<script type="text/javascript">

$(document).ready(function(){

var appId = "xxxxxxxxxxxxx";
var redirectUrl = "http://www.mydomain.com";

if (0 <= window.location.href.indexOf ("error_reason"))
{
$(document.body).append ("<p>Authorization denied!</p>");
return;
}

window.fbAsyncInit = function(){

FB.init({
appId : appId,
status : true,
cookie : true,
oauth : true,
channel: true,
channelURL: "http://www.mydomain.com/channel/"
});

FB.getLoginStatus (onCheckLoginStatus);
};

(function(d)
{
var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
js = d.createElement('script'); js.id = id; js.async = true;
js.src = "//connect.facebook.net/en_US/all.js";
d.getElementsByTagName('head')[0].appendChild(js);
}(document));

function onCheckLoginStatus (response)
{
if (response.status != "connected")
{
top.location.href = "https://www.facebook.com/dialog/oauth?client_id=" + appId + "&redirect_uri=" + encodeURIComponent (redirectUrl) + "&scope=publish_stream,email,user_birthday,publish_actions,offline_access";
}
else
{
// Start the application (this is just demo code)! ///////////////////////////////////
$(document.body).append ("<p>Authorized!</p>");
FB.api('/me', function (response) {
$(document.body).append ("<pre>" + JSON.stringify (response, null, "\t") + "</pre>");
});
//////////////////////////////////////////////////////////////////////////////////////
}
}
});

</script>
</body>
</html> 
```

在用户的会话成功通过身份验证并且他接受了我代表他发布的权限请求后，这是我工作了两个多星期从一个站点移动到另一个站点的最难的代码。但这没用。

我发现以下代码发布帖子但仅在当前登录用户的墙上：

```
<script type="text/javascript">

    function updateStatusViaJavascriptAPICalling(){
        var status  =   document.getElementById('status').value;
            FB.api('/me/feed', 'post', { message: status }, function(response) {
                if (!response || response.error) {
                     alert('Error occured');
                } else {
                     alert('Status updated Successfully');
                }
           });
    } 
```

它就像一个魅力，但是当我更改`/me/feed`为另一个 Facebook uid 时，它说作为这个应用程序发布给其他用户不起作用。但是我尝试将应用访问令牌和用户访问令牌更改`post`为`PHP feed dialog`但也是徒劳的。

我尝试了 PHP 或 JavaScript 的所有代码来完成这项工作，但不幸的是没有任何效果。尤其是在 Facebook 阻止应用程序开发人员在朋友的墙上发帖之后。

我所需要的只是代表我的用户在他们的墙上自动发布，即使他们处于离线状态。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T06:58:55.993

您不能通过图形 Api 向用户的朋友发布信息。实现此目的的唯一方法是调用 Javascript SDK 提要对话框。

关于访问令牌，您可以将短期访问令牌扩展为长期访问令牌 [有效期为 60 天]。阅读更多：http: [//developers.facebook.com/roadmap/offline-access-removal/](http://developers.facebook.com/roadmap/offline-access-removal/)

# php - 在div没有回显php之后

> ID：14804871
> 
> 赞同：0
> 
> 时间：2013-02-11T01:53:48.517
> 
> 标签：php, html, css

我在 div 弹出窗口后回显甚至检索值时遇到问题，任何人都可以帮助解决问题是 $r 在 div 弹出窗口之后没有显示。或者更确切地说，提取不会迭代并且它只显示第一条记录..提前谢谢

```
<?php
   $con = mysql_connect('****', 'root','****')    or die('Error connecting to MySQL server.');  
mysql_select_db("dreschema", $con) or die("cannot select DB"); 
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org    /TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<link href="styles2.css" rel="stylesheet" type="text/css" />
<link href="styles.css" rel="stylesheet" type="text/css" />
<link href="styleshref.css" rel="stylesheet" type="text/css" />
<script>

</script>
</head>
<body>
<div id="container1">

 <div align="center"></div>
  <div id="mainContent1">

<?php 
$text = $_GET["searchtext"];
echo "Results displayed for   ". $text;
echo '</br>';

   $query4 = "SELECT * from products WHERE ProductName LIKE '%$text%'";
$data = mysql_query($query4, $con);
if (!mysql_query($query4, $con)){
print mysql_error();
exit;
}
     while ($row = mysql_fetch_array($data)) {
echo $row['ProductName'];

if($row['Stock']== 0 OR $row['Stock']== "")
{
echo "(SOLDOUT)";
echo '<input type="hidden" name="prod" value="' . $row['Image'] . ' " " id = "prod">';
echo '<a href="preorder.php?image=' . $row['Image'] . '"><img id = "imageid" src="' . $row['Image'] . '" alt="' . $row['Image'] . '"  width="80" height="80" style="margin-left:1.5em;margin-top:1.5em;"/></a>';
echo $row['Price'] . "PhP";
?>

   <div id="blanket" style="display:none;"></div>
    <div id="popUpDiv" style="display:none;">
    <a href="#" onclick="popup('popUpDiv')"><font size =" 20">x</font></a><br>

        <a href="#" onclick="popup('popUpDiv')" ><?php echo '<iframe src="orders2.php?image=' . $row['Image'] . '"style= position:absolute;width:500px;height:500px;"></iframe>';?> </a>

    </div>  
  <a href="#" onclick="popup('popUpDiv')">Click to Open CSS Pop Up</a><br>  

<?php
}
 else 
{
echo '<input type="hidden" name="prod" value="' . $row['Image'] . ' " " id = "prod">';
echo '<a href="orders2.php?image=' . $row['Image'] . '">';
echo '<img id = "imageid" src="' . $row['Image'] . '" alt="' . $row['Image'] . '"  width="80" height="80" style="margin-left:1.5em;margin-top:1.5em;"/></a>';
echo $row['Price'] . "PhP";
$r = $row['Image'];
  echo '<br>';

?>

    <div id="blanket" style="display:none;"></div>
    <div id="popUpDiv" style="display:none;">
<?php
echo $r;
?>
    <a href="#" onclick="popup('popUpDiv')"><font size =" 20">x</font></a><br>

        <a href="#" onclick="popup('popUpDiv')" ><?php echo '<iframe src="orders2.php?image=' . $row['Image'] . '"style= position:absolute;width:500px;height:500px;"></iframe>';?> </a>

    </div>  
  <a href="#" onclick="popup('popUpDiv')">Click to Open CSS Pop Up</a><br>  

   <?php
}

}
?>

    <!-- end #mainContent --></div>
<!-- end #container --></div>
</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:10:22.347

This may or may not be an answer, but it wouldn't fit in the comments section so I wanted to expand it here. Looking over the code it's hard to tell if the problem is that (a) MySQL only returned one row; (b) The PHP loop is hitting a problem; or (c) everything is working fine but your HTML markup is so messed up that the browser is simply unable to render it as you think it should.

To eliminate the first issue, please add this right after your query:

```
$num_rows = mysql_num_rows($data);
if (!$num_rows){die('no rows');}
echo "<p>$num_rows rows returned</p>"; 
```

This way you can see how many rows are being returned. Also, don't do this: `if (!mysql_query($query4, $con)){`. Do this `if(!$data){`.

----- ASIDE ----

> **Better yet switch to `PDO` or `mysqli`, as your current setup WILL be hacked and your data will get messed up).** *On the MySQL front, at the very least, you should set `$text = mysql_real_escape_string($_GET["searchtext"]);` to avoid the simplest SQL injection attack, and for g*d's sake don't use the `root` user for your site. Set up MySQL users with limited permissions and use them... also, to avoid an XSS injection you should also `strip_tags($_GET["searchtext"])` when `echo`ing the text to the screen.*

----- /ASIDE ----

If the problem isn't that the query is returning a single response, look at the source code. Are you sure you're not seeing multiple loops-worth of code? You have A LOT of markup problems. I've highlighted a few:

1.  `echo '<input type="hidden" name="prod" value="' . $row['Image'] . ' " " id = "prod">';` - What are all those "s doing there? There's a floating " just sitting there, which can mess up how the browser interprets the tag. Also, you often have leading or trailing spaces in attribute values... get rid of those, especially in `value` attributes.
2.  Same line (as well as others): You've statically coded an element ID (`prod`). IDs are supposed to be unique, so if the code is successfully looping, you'll end up with lots of elements with the same ID (this shouldn't cause the issue you're facing, but there's javascript included that you're not showing us, so the JS could be removing duplicate IDs).
3.  `<iframe src="orders2.php?image=' . $row['Image'] . '"style= position:absolute;width:500px;height:500px;"></iframe>` - The `style` attribute is merged into the `src` attribute. You need a space there or the browser may not know what to do with either attribute.
4.  Same line, the `style` attribute has no opening " but it has a closing " - more of the same.
5.  `<a href="orders2.php?image=' . $row['Image'] . '">` - You have no opening " but you have a closing "... you can omit quotes altogether, but you can't do both.

There are more issues, as well as some general coding standards you should clean up, but you should have a look at the resulting code and make sure that it passes muster.

Lastly, make sure that the image is supposed to be displaying. In the first `if` statement the image is never told to display (presumably it's in the `iframe`) and in the `else` statement the image is `echo`ed into a `div` that has `style="display:none"`, so we wouldn't expect to see it. If the problem is just that the isn't displaying the image, make sure that the iframe src is correct (and you might want to `urlencode` the image URI when you're passing it as a `_GET` variable.)

If you post the resulting HTML code (and confirm that it's not just that MySQL is returning one row) we might be able to help further.

# c# - 调试期间结果不一致 - Web API

> ID：14804873
> 
> 赞同：0
> 
> 时间：2013-02-11T01:53:59.470
> 
> 标签：c#, asp.net-web-api

我有一些代码使用名为 Fusion Pro 的产品的库。基于一些配置和数据文件，它将生成一个 PDF 文件。由于完全没有输出而没有任何抛出的异常，我得到了一致的结果。但是，在调试时，我可以通过将调试器附加到在本地 IIS 中运行的代码并逐行执行来生成 PDF。没有什么是一致的。如果我使用 F11 而不是 F10 并通过每一行“缓慢但稳定”，它似乎有更高的成功率。不幸的是，即使单步执行代码，它也不总是生成 PDF。

我从来没有经历过代码每次都在相同的输入下表现得如此反复无常。

唯一的其他相关信息是此代码在另一个 asmx 服务中正常工作，它在特定域帐户下运行（需要特殊安全性），并且在 32 位模式下运行。

```
DLQueueClient client = new DLQueueClient();
DLQueueJob vdpQueueJob = new DLQueueJob();

string fileName = message.OutputFilePath;

var dataFilePath = CreateDataFile(fileName, message.DefFilePath, message.VariableDataContent, message.QTY);
var pdfFilePath = Path.Combine(new[] { message.OutputFilePath, dataFilePath.Replace(".txt", ".pdf") });

vdpQueueJob.Priority = priority;
vdpQueueJob.Queue = queueName;
string cmd = "\"" + Settings.FusionProExe + "\" \"" + dataFilePath + "\" \""
                          + message.DiffFilePath + "\" \"" +
                          (isProof ? message.ProofConfigFilePath : message.PrintConfigFilePath) + "\" \""
                          + pdfFilePath + "\"";

vdpQueueJob.CommandLine = cmd;

client.ConnectRemote(Settings.FusionProServer, Settings.FusionProUser, Settings.FusionProPassword, Settings.FusionProTimeout);
client.SubmitJob(vdpQueueJob, Settings.FusionProTimeout, true);

return pdfFilePath; 
```

# html - 科尔多瓦的 HTML5 本地存储

> ID：14804874
> 
> 赞同：17
> 
> 时间：2013-02-11T01:54:19.017
> 
> 标签：html, cordova, local-storage

HTML5 本地存储是否在 Cordova / PhoneGap 中工作？我正在尝试使用 HTML5 方式和文档中指定的方式。都不工作。

具体来说，我正在尝试使用 ajax 查询结果进行本地存储。我已经测试了查询，它可以工作。

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi">
    <title>Hello World</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" type="text/javascript">

    </script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("form").submit(function () {

                var uname = document.getElementById("username").value;
                var pword = document.getElementById("password").value;
                var postData = {
                    username: uname,
                    password: pword
                };

                $.ajax({
                    url: "http://www.yellowcabsavannah.com/test.php",
                    type: "POST",
                    data: postData,
                    async: false,
                    dataType: 'json',
                    cache: false,
                    success: function (data) {
                        localStorage.uname = data.username;
                        localStorage.pword = data.password;
                        alert(localStorage.uname);
                    }
                }
                });
            return false;
            });
        });
    </script>
</head>

<body>
    <form action="">
        <input type='text' id="username" name="username" placeholder="Username">
        <br>
        <input type='password' id="password" name="password" placeholder="password">
        <br>
        <input type="submit" id="submit" value="Login">
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-11T09:18:22.967

我使用过这样的本地存储：

```
// To store a value
window.localStorage.setItem('key', value);

// To retrieve a value
value = window.localStorage.getItem('key');

// To delete a storage
window.localStorage.removeItem('key'); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-20T13:17:55.327

我正在使用 cordova 构建一个 Android 应用程序，我可以使用 window.localStorage['username'] 保存本地存储变量，例如：

`window.localStorage['username'] = data.username`

它就像一个 PHP 关联数组。

希望有帮助

# java - 使用迭代器合并列表

> ID：14804877
> 
> 赞同：4
> 
> 时间：2013-02-11T01:54:37.707
> 
> 标签：java, list, iterator

我需要在java中合并两个字符串列表，我不太确定最好的方法。我必须使用迭代器和 compareTo() 方法。例如...

示例：L1：A、B、C、D L2：B、D、F、G 结果：A、B、B、C、D、D、F、G

我可以假设输入列表已经排序，我不能使用 contains() 方法。我有一些初步检查，但我坚持的是 while 循环。

```
public static ListADT<String> merge(ListADT<String> L1,ListADT<String> L2) throws BadListException {
ListADT<String> L3 = new ArrayList<String>;
if(L1 == null || L2 == null) {
    throw new BadListException();
}
Iterator<String> itr1 = new L1.iterator();
Iterator<String> itr2 = new L2.iterator();  
if(L1.size() == 0 && L2.size() == 0) {
    return L3;
}
if(L1.size() == 0 && L2.size() != 0) {
    for(int i = 0; i < L2.size(); i++) {
        return L3.add(L2.get(i));
    }
}
if(L2.size() == 0 && L1.size() != 0) {
    for(int i = 0; i < L1.size(); i++) {
        return L3.add(L1.get(i));
    }
}
while(itr1.hasNext() || irt2.hasNext()) {
    //merge the lists here?
} 
```

}

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T03:05:03.693

如果您只使用变量来保存每个迭代器的当前值，这相当简单。此解决方案假定您的列表不包含`null`，但由于列表已排序，因此添加 null 处理并不困难。

```
package com.example;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Iterator;
import java.util.List;

public class IteratorMerge {

    /**
     * @param args
     */
    public static void main(String[] args) {
        List<String> list1 = Arrays.asList(new String[]{"A", "B", "C", "D"});
        List<String> list2 = Arrays.asList(new String[]{"B", "D", "F", "G"});

        System.out.println(merge(list1, list2));
    }

    public static List<String> merge(List<String> L1,List<String> L2) {
        List<String> L3 = new ArrayList<String>();

        Iterator<String> it1 = L1.iterator();
        Iterator<String> it2 = L2.iterator();

        String s1 = it1.hasNext() ? it1.next() : null;
        String s2 = it2.hasNext() ? it2.next() : null;
        while (s1 != null && s2 != null) {
            if (s1.compareTo(s2) < 0) { // s1 comes before s2
                L3.add(s1);
                s1 = it1.hasNext() ? it1.next() : null;
            }
            else { // s1 and s2 are equal, or s2 comes before s1
                L3.add(s2);
                s2 = it2.hasNext() ? it2.next() : null;
            }
        }

        // There is still at least one element from one of the lists which has not been added
        if (s1 != null) {
            L3.add(s1);
            while (it1.hasNext()) {
                L3.add(it1.next());
            }
        }
        else if (s2 != null) {
            L3.add(s2);
            while (it2.hasNext()) {
                L3.add(it2.next());
            }
        }

        return L3;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T02:03:06.373

这是基本算法的一些伪代码：

```
while(itr1 && itr2)
{
     if(itr1 value < it2 value)
         add itr1 to list
         increment itr1

     else
         add itr2 to list
         increment itr2
}

check if itr1 or itr2 still have more elements
while itr1 or itr2 has more elements, add those elements to the list 
```

我们知道列表是排序的，所以在每个阶段，我们只需从每个列表中抓取最小的元素并将其添加到合并列表中。如果最后一个迭代器用完而另一个没有用完，那么我们可以简单地遍历仍然有元素的那个，依次将每个元素附加到合并列表中。

如您所见，在 Java 中使用迭代器执行此操作有点痛苦，因为`next()`会删除元素。解决此问题的一种方法是使用两个`Queue`s，每个迭代器一个，用于存储来自对 的调用的值`next()`。然后，您需要比较每个队列的头部，将最小值添加到合并列表中，然后将其从各自的`Queue`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-22T06:18:04.487

正如您所发现的，使用迭代器进行合并有点痛苦。让我们明确说明原因：

*   对于合并的每一步，您都想*检查***两个**序列的第一个元素，但您只想*前进***一个**。
*   `Iterator#next()`*将这些检查*和*推进*操作捆绑到一个操作中，因此不可能检查两个序列的头部而不同时推进两者。

你需要的是一种在不推进它的情况下*窥视*第一个元素的方法。`Iterator`如果你有这个能力，那么合并看起来像：

```
public <T extends Comparable<T>> List<T> merge(Iterator<T> it1, Iterator<T> it2) {
    PeekableIterator<T> seq1 = new PeekableIterator<T>(it1);
    PeekableIterator<T> seq2 = new PeekableIterator<T>(it2);
    List<T> merged = new ArrayList<T>();
    while (seq1.hasNext() && seq2.hasNext()) {
        if (seq1.peekNext().compareTo(seq2.peekNext()) < 0) {
            merged.add(seq1.next());
        } else {
            merged.add(seq2.next());
        }
    }
    while (seq1.hasNext()) {
        merged.add(seq1.next());
    }
    while (seq2.hasNext()) {
        merged.add(seq2.next());
    }
    return merged;
} 
```

事实证明，创建这个并不太难`PeekableIterator`！您只需要跟踪您当前是否有一个被窥视的元素，以及该元素是什么。

```
public class PeekableIterator<T> implements Iterator<T> {
    private final Iterator<T> backing;
    private boolean havePeek = false;
    private T peek;

    public PeekableIterator(Iterator<T> backing) {
        this.backing = backing;
    }

    @Override
    public boolean hasNext() {
        return havePeek || backing.hasNext();
    }

    @Override
    public T next() {
        if (havePeek) {
            havePeek = false;
            return peek;
        } else {
            return backing.next();
        }
    }

    public T peekNext() {
        if (!havePeek) {
            peek = backing.next();
            havePeek = true;
        }
        return peek;
    }

    @Override
    public void remove() {
        throw new UnsupportedOperationException();
    }
} 
```

**编辑**

我没有注意到上面提到的`PeekingIterator`谷歌番石榴库中的评论，它或多或少与`PeekableIterator`这里的相同。如果您可以访问第三方库，这肯定比滚动您自己的库更可取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T02:00:23.943

不要尝试将空列表与非空列表合并为一种特殊情况，只需循环直到至少有一个迭代器有效并直接在那里完成您的工作：

```
public static ListADT<String> merge(ListADT<String> L1,ListADT<String> L2) throws BadListException {
  ListADT<String> L3 = new ArrayList<String>;

  Iterator<String> itr1 = new L1.iterator(), itr2 = new L2.iterator();

  while (itr1.hasNext() || itr2.hasNext()) {
    if (!itr1.hasNext())
      L3.add(itr2.next());
    else if (!itr2.hasNext())
      L3.add(itr1.next());
    else {
      String s1 = peek from itr1
      String s2 = peek from itr2;

      if (s1.compareTo(s2) < 0) {
        L3.add(itr1.next());
        L3.add(itr2.next());
      }
      else {
        L3.add(itr2.next());
        L3.add(itr1.next())
      }
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-16T09:38:58.717

公共类 MergeIterator {

```
public static void main(String[] args) {
       List<String> s1 = new ArrayList<String>();
    s1.add("a");
    s1.add("z");
    s1.add("b");
    s1.add("k");
    s1.add("c");
    Collections.sort(s1);
    List<String> s2 = new ArrayList<String>();
    s2.add("p");
    s2.add("a");
    s2.add("d");
    s2.add("n");
    s2.add("m");
    Collections.sort(s2);
    Iterator<String> it1 = s1.iterator();
    // sortIterator(it1);
    Iterator<String> it2 = s2.iterator();
    System.out.println();
    combine(it1, it2);
}

private static Iterator<String> combine(Iterator<String> it1,
        Iterator<String> it2) {
    Iterator<String> it3 = null;
    List<String> l1 = new ArrayList<>();
    String s1 = null, s2 = null;
    while (it1.hasNext() || it2.hasNext()) { //line 1

    s1 = (s1 == null ? (it1.hasNext() ? it1.next() : null) : s1); //line 2 
    s2 = (s2 == null ? (it2.hasNext() ? it2.next() : null) : s2); // line 3
        if (s1 != null && s1.compareTo(s2) < 0) { // line 4
            l1.add(s1);
            s1 = null;
        } else {
            l1.add(s2);
            s2 = null;
        }

    }
    it3 = l1.iterator();
    return it3;
} 
```

}

# java - 用于开发益智游戏的 Java 框架（例如 Jigsaw）

> ID：14804878
> 
> 赞同：0
> 
> 时间：2013-02-11T01:54:40.970
> 
> 标签：java, user-interface, puzzle

我正在开发一些益智游戏，我想我会选择 Java，因为我需要处理的兼容性问题更少。但在我“跳”之前，我只想确定这是一个合理的选择。

那么有人知道用 Java 构建 GUI 益智游戏的好框架吗？我做了一些谷歌搜索并看到了一些游戏引擎框架，但我认为这种游戏不需要游戏引擎（尽管我可能错了，因为我不是游戏程序员）。根据我有限的理解，为了构建谜题，我只需要一些漂亮的 GUI（最好不要使用老式的 Swing 组件！）

详细地说，我不需要花哨的 3D GUI。像这样的东西就足够了。在我的脑海中，我不记得 Java 的纯 Swing API 是如何做到这样的事情的。（请注意，这些部件可以相互插入。）

![样本](../Images/eff0022f64479f007df849d07266e1cd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T02:08:04.293

几乎任何 GUI 框架都可以像您描述的那样创建拼图布局。尽管您可能不会在 GUI 工具包中找到现成的拼图组件，但您几乎总是可以使用某种画布和图像绘图原语来准确绘制您想要的东西。我过去曾使用 Swing 创建一个完全自定义的 GUI，并且看起来不像 Swing 应用程序（参见[http://free15c.com](http://free15c.com)，代码本身在 GitHub 上）。

您不太可能需要（或想要）一个完整的游戏引擎框架。标准 GUI 库中有足够的功能来执行此操作。

最后，正如我在上面的评论中提到的，为了最大限度地兼容各种形状和大小的设备，您可以考虑使用 HTML/Javascript 实现。这种点击和拖动移动图像将非常简单。

# ios - 在核心动画中，红框代替 UIImage 视图移动

> ID：14804882
> 
> 赞同：0
> 
> 时间：2013-02-11T01:56:16.663
> 
> 标签：ios, cocoa-touch, core-animation, caanimation

我的第一个核心动画只是一个从 a 点移动到 b 点的图像。出于某种原因，当动画被调用时，会出现一个红色框并在我的图像的位置移动，而它只是坐在那里。这是我的代码：

```
-(IBAction)preform:(id)sender{
CALayer *layer = [CALayer layer];
[layer setPosition:CGPointMake(100.0, 100.0)];
[layer setBounds:CGRectMake(0.0, 0.0, 50.0, 60.0)];
[layer setBackgroundColor:[[UIColor redColor] CGColor]];
[imView.layer addSublayer:layer];

CGPoint point = CGPointMake(imView.frame.origin.x, imView.frame.origin.y);
CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"position"];
anim.fromValue  = [NSValue valueWithCGPoint:point];
anim.toValue    = [NSValue valueWithCGPoint:CGPointMake(point.x + 50, point.y)];
anim.duration   = 1.5f;
anim.repeatCount =1;
anim.removedOnCompletion = YES;
anim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];
[layer  addAnimation:anim forKey:@"position"];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:33:41.520

如果您的应用程序 UI 不需要那个红色框，请不要创建它，而是将动画应用到视图层。如果您确实需要那个红框，请创建，但将动画应用于视图层，而不是红框层

另请注意，除非您更改图层的`anchorPoint`，否则该`position`属性实际上是图层的中心，而不是角落。您需要考虑到这一点才能制作流畅的动画。

最后，如果您不希望在动画完成后视图回弹，则需要设置它的新位置。不用担心，在播放动画时，视图的重定位是不可见的。

建议的（和未经测试的）代码：

```
-(IBAction)preform:(id)sender{

  CGPoint point = CGPointMake(imView.frame.size.width/2.0 , imView.frame.size.height/2.0 );
  CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"position"];
  anim.fromValue  = [NSValue valueWithCGPoint:point];
  anim.toValue    = [NSValue valueWithCGPoint:CGPointMake(point.x + 50, point.y)];
  anim.duration   = 1.5f;
  anim.repeatCount =1;
  anim.removedOnCompletion = YES;
  anim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn];
  [imView.layer  addAnimation:anim forKey:@"position"];

  imView.center = CGPointMake( imView.center.x + 50, imView.center.y
} 
```

如果您改用动画辅助函数，这一切都会更容易`UIView`，但我认为您正在尝试学习如何使用`CAAnimation`

# html - 让浮点数在 CSS 中正常工作

> ID：14804886
> 
> 赞同：0
> 
> 时间：2013-02-11T01:57:33.210
> 
> 标签：html, css

我以为我了解花车，但似乎我不了解。

我有一个向左浮动的 div (#service-list)，之后我添加了另一个 div (#social)，也向左浮动。

尽管有足够的空间容纳 div，但发生的事情是第二个 div 被推到新行。

```
#service-list{
width: 660px;
border-right: 1px solid #808080;
border-bottom: 1px solid #808080;
border-left: 1px solid #808080;
float: left;
padding: 15px 0 20px 15px;
margin: 0 0 0 25px;
clear: both;
}
#social{
width: 200px;
float: right;
clear: left;
border: #666 solid 1px;
} 
```

这是网址：[http ://s361608839.websitehome.co.uk/101d/tim/index.html](http://s361608839.websitehome.co.uk/101d/tim/index.html)

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:01:26.393

消除

```
<div class="clearfix"></div> 
```

而`clear: left;`在`#social`

```
#social{
    width: 200px;
    float: right; /* You should better use float: left */
    border: #666 solid 1px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T02:05:02.270

`clear`在您希望浮动元素发生之前，您会在很多地方使用，这会阻止它们正确浮动。通过执行以下操作，我能够使其工作：

1.  `#social`在`#services-list`DOM 中移动
2.  移除`clear: both`（`#services-list`否则它不会浮动）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T02:00:55.000

您在服务列表和社交之间有一个明确的修复`clear:both`- 所以自然不会浮动 - 清除：服务列表中的左侧也是错误的..

# android - 无法使用 RelativeLayout 完全填满屏幕，并且无法在键盘打开时调整大小

> ID：14804893
> 
> 赞同：0
> 
> 时间：2013-02-11T01:58:42.600
> 
> 标签：android, xml, android-relativelayout

所以这是我的 XML。我试图填满整个屏幕，当我在 Eclipse 中查看它时，它填满了整个屏幕。但是，当我在手机上打开它时，一切都变小了，并且有视图覆盖。我不知道发生了什么事。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TextView
    android:id="@+id/front"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:text="Front"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/frontInput"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:layout_below="@+id/front"
    android:ems="10" >

    <requestFocus />
</EditText>

<TextView
    android:id="@+id/back"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/frontInput"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:text="Back"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<EditText
    android:id="@+id/backInput"
    android:layout_width="fill_parent"
    android:layout_height="200dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/back"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:ems="10"
    android:inputType="textMultiLine" />

<TextView
    android:id="@+id/background"
    android:layout_width="wrap_content"
    android:layout_marginLeft="5dp"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/backInput"
    android:layout_marginTop="44dp"
    android:text="Background"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<Spinner
    android:id="@+id/colors_spinner"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/backInput"
    android:layout_marginLeft="30dp"
    android:layout_marginTop="22dp"
    android:layout_toRightOf="@+id/background" 
    />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/colors_spinner" >

    <Button
    android:id="@+id/save"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="Save" />

    <Button
    android:id="@+id/cancel"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="Cancel" />

</LinearLayout>

</RelativeLayout> 
```

这就是它在 Eclipse 中的样子。![Eclipse 中的 XML](../Images/8e7516f5975e005caed8af5c376ee8b1.png)

但我明白了：![在我的手机上查看的 XML](../Images/f5fdbad998bc6f188ffffdd35137ed15.png)

另一件事是，当我打开键盘时，我的视图不会重新调整，所以你可以看到所有内容，但更小，所以你可以看到你正在输入的内容等......我已经`android:windowSoftInputMode="adjustResize"`为特定活动添加了，但什么也没发生......任何想法? 多谢你们...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:10:49.777

如果您使用adjustResize，它将尽可能调整所有内容的大小。另一个选项是adjustPan，它将滚动窗口，以便焦点EditText 将在视图中并且插入符号可见。除此之外，没有真正的方法可以控制事物。

在您的情况下，您那里有一些确切的高度，因此调整大小时效果不佳，因为您无法缩小确切的高度。

此外，永远不要相信事物在 Eclipse 中的外观。它试图列出与 Android 实际操作方式没有任何代码的东西，它应该被视为一种估计。真实的布局最终可能看起来有很大的不同，尤其是对于复杂的布局。

# iphone - 表视图重新加载单元格

> ID：14804894
> 
> 赞同：1
> 
> 时间：2013-02-11T01:58:47.243
> 
> 标签：iphone, ios, objective-c

当高度发生变化时，我将文本视图子类化，该视图会触发委托方法。当高度发生变化时，我想重新加载表格视图单元格，并增加其大小

我有一个我无法解决的问题，当重新加载表格视图时键盘消失，我无法解决这个问题。下面是更改文本视图高度时调用的委托方法。有什么建议么？

```
- (void)textViewHeightChanged:(CGFloat)height
{
    if (height > _textViewCellHeight) {
        _textViewCellHeight = height;
        [[self tableView] reloadRowsAtIndexPaths:@[[NSIndexPath indexPathForRow:4 inSection:0]] withRowAnimation:UITableViewRowAnimationNone];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T12:01:07.817

tableview 可能导致 textview 在重新加载时退出第一响应者状态。`-becomeFirstResponder`在表重新加载发生后尝试发送到您的文本视图。

# calendar - 如何使 ISO8601 产生一年中的希伯来日，一年中的一周？

> ID：14804899
> 
> 赞同：1
> 
> 时间：2013-02-11T01:59:10.997
> 
> 标签：calendar, hebrew, iso8601, date-arithmetic

有人能想出一种方法来计算希伯来历法的一年中的一天和一周中的一周吗？我正在使用 ISO 8601，它可以返回希伯来语年、月、月中的某天和一周中的某日。我正在尝试编写可重用的代码来计算任何 Torah 部分（Parsha）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-27T05:50:13.890

看一下执行此操作的[hebcal](https://github.com/hebcal/hebcal)命令。还有用于[JavaScript](https://github.com/hebcal/hebcal-js)（无耻插件，它是我编写的）、[Java](https://github.com/hebcal/hebcal-java)和[Perl](https://github.com/hebcal/hebcal-perl)的端口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-16T14:31:47.877

如果您可以使用 Java，这很容易。我的库[Time4J](https://github.com/MenoData/Time4J)启用了您想要的功能（在[希伯来日历中](http://time4j.net/javadoc-en/net/time4j/calendar/HebrewCalendar.html)）：

```
PlainDate iso8601 = Iso8601Format.parseDate("2018-03-16");
HebrewCalendar hc = iso8601.transform(HebrewCalendar.axis());

int hyear = hc.getYear();
HebrewMonth hmonth = hc.getMonth(); // obtains an enum
int hdayOfMonth = hc.getDayOfMonth();
Weekday hdayOfWeek = hc.getDayOfWeek(); // obtains an enum
int hdayOfYear = hc.getDayOfYear();

int weekOfYear =
    hc.get(
        CommonElements.weekOfYear(
            HebrewCalendar.axis(),
            HebrewCalendar.getDefaultWeekmodel()
        )
    );

System.out.println("year=" + hyear); // 5778
System.out.println("month=" + hmonth); // ADAR_II (technical result, see next line)
System.out.println(
    "month=" + hmonth.getDisplayName(Locale.ENGLISH, hc.isLeapYear())); // Adar

System.out.println("day-of-month=" + hdayOfMonth); // 29
System.out.println("day-of-week=" + hdayOfWeek); // FRIDAY
System.out.println("day-of-year=" + hdayOfYear); // 207
System.out.println("week-of-year=" + weekOfYear); // 30 
```

还有更多功能，例如考虑前一天晚上的一天开始（包括日落的天文计算）或希伯来圣经时钟时间或月份的不同编号方案等。

# java - 股票 java/android 音效

> ID：14804904
> 
> 赞同：-1
> 
> 时间：2013-02-11T01:59:59.930
> 
> 标签：java, android

我不确定这是否适合这个论坛的问题，但是是否有一组可通过 Java/Android API 获得的股票音效？我了解如何以编程方式加载和播放音频文件，我只是想知道是否有任何类型的大型音效数据库预加载到 java/android 框架中。我专门寻找低音吉他的单个音符 - 我可以自己录制它们，但我需要几个八度音阶，如果已经有库存版本，那么进行所有录音和声音编辑会有点痛苦。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:10:20.393

它可能会被重新措辞以使其成为一个更“正确”的问题（可能会专门询问库存声音在 android 框架中的位置，这会给你一个列表），但简短的回答是否定的，你不会找到任何股票低音吉他的声音。他们所拥有的主要是 UI 声音（点击/滑动/等）以及铃声/通知声音。

不过，您也许可以在网上找到一些录制的声音，这样可以节省一些时间。即使它们没有融入操作系统，我敢肯定之前有人录制过这些声音。例如，您可以查看专门用于架子鼓的网站。请务必检查许可。

# python - 将字符串格式化为微秒

> ID：14804908
> 
> 赞同：0
> 
> 时间：2013-02-11T02:00:27.353
> 
> 标签：python, math, formatting

希望格式化输出以显示非常小的数字..

```
a= 6500
b= 3600
c=.000900
d= int((b/a)-c)
print d 
```

答案为零，但在 .###### 之后寻找 .###### 数字。

抱歉试试这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T02:22:22.003

看起来您在 python 2.x 中被整数除法所困扰。

```
>>> a= 6500
>>> b= 3600
>>> c=.000900
>>> from __future__ import division
>>> print b/a - c
0.552946153846 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T02:22:29.740

您的计算可能存在两个问题：

如果您使用的是 Python 2，则使用`/`两个整数之间的除法也将始终是整数。这将丢弃计算的小数部分，这可能是出乎意料的。对此的一种解决方法是强制其中一个值成为一个`float`值（例如`float(b)/a`）。另一种方法是放在文件的顶部`from __future__ import division`，它告诉 Python 使用 Python 3 语义进行除法（如果结果是精确整数，您只会从整数除法中得到一个整数）。

第二个问题似乎是关于格式化浮点值。首先，您似乎只想要值的小数部分（而不是整数部分）。通常最好的选择是简单地减去值的整数部分：

```
d = someFloatingPointValue()
d_frac = d - int(d) 
```

接下来，要输出一个字符串（您需要几个小数位，但不是很多），您可能想探索 Python 的字符串格式化操作：

```
d = someFloatingPointValue()
d_to4decimalPlaces = "{:.4f}".format(d) 
```

# javascript - 带有多个分隔符的下拉列表。可以让 JS 工作

> ID：14804910
> 
> 赞同：0
> 
> 时间：2013-02-11T02:00:33.753
> 
> 标签：javascript, html, coding-style

好的，所以我正在尝试获取一个文本区域，用户可以在其中输入文本。从下拉列表中选择分隔符。点击计数，它将计算分裂的次数。

我似乎根本无法拆分我的代码。这是我的代码。

JavaScript

```
window.onload = function()  { 
document.getElementById("change").onclick = function() {

var paragraph = document.getElementById('box').value;
var x = document.getElementById("changeCase");
var getInfo = document.getElementById('ParaWrite');
var LowerCase = " ";
var splitAT = " ";
alert("above the for loop"); 

if (x.checked === true)
{
LowerCase = paragraph.toLowerCase();
}
else
{
LowerCase = paragraph;
}

for (var i = 0; i <document.form1.split.options.length; i++)
{
if (document.form1.split.options[i].selected === true)
    {
    splitAT = paragraph.split(options[i]);
    }
}
document.write(splitAT); 
```

doc write 只是为了让我可以看到它是否在代码中做得那么远，但事实并非如此。

这是我的 HTML

```
<form name="form1" id="form1">

<textarea type="text" id="box" value=""/></textarea>
<input type='checkbox' name='write' id='changeCase' value='Check'/><br>

<input  type='button' value="Count" id="change"/>
<select name="split" id="split">
        <option value="like">like</option>
        <option value="monkey">monkey</option>
        <option value="I">I</option>
        <option value=".">.</option>
        <option value=",">,</option>
        <option value="?">?</option>
        <option value=" ">[Space]</option>
    </select>    
</form>
<div id="ParaWrite">
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T02:11:39.213

`options`没有定义。

```
splitAT = paragraph.split(document.form1.split.options[i]); 
```

[http://jsfiddle.net/ExplosionPIlls/KeZEd/](http://jsfiddle.net/ExplosionPIlls/KeZEd/)

# opengl - 给定模型/视图/投影转换矩阵，如何在不使用 GLSL 1.2 中已弃用的特性的情况下计算法线矩阵？

> ID：14804911
> 
> 赞同：1
> 
> 时间：2013-02-11T02:00:35.847
> 
> 标签：opengl, glsl, vertex-shader

我知道法线变换矩阵是模型/视图/投影矩阵的转置的逆矩阵，但看起来“ [`inverse`](https://www.opengl.org/sdk/docs/manglsl/xhtml/inverse.xml)”只是在 GLSL 1.4 中添加的，我找不到“ `transpose`”。我必须将一堆数学复制并粘贴到我的 GLSL 中吗？（如果是这样，我可以从中复制一个不错的权威开源地方吗？）

需要明确的是，我要问的是“如何在`gl_NormalMatrix`不使用已弃用的 API 的情况下进行计算”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T02:08:03.117

这通常通过计算模型视图矩阵的逆矩阵的转置来处理

```
N = (M^-1)^T 
```

在 CPU 上，然后像上传任何其他矩阵一样上传矩阵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T16:27:42.747

只是为了澄清还有[转置](https://www.opengl.org/sdk/docs/manglsl/xhtml/transpose.xml)，如果你不做任何缩放，正常矩阵是 3x3 子矩阵，在 glsl 你可以做

```
normal = mat3(model_matrix) * v_normal; 
```

# ios - ARC 转换器未删除所有对释放的调用

> ID：14804912
> 
> 赞同：0
> 
> 时间：2013-02-11T02:00:50.760
> 
> 标签：ios, objective-c

我已经运行了 ARC 转换器多个文件。但是，我不会在 ViewController 的 dealloc 中删除对 release 的调用。转换后将保留如下调用。

```
- (void)dealloc{
    [myObject release];
} 
```

这些没有被删除的原因是什么？

（autorelease 仍然保留在代码中，编译器不会抱怨它，而它会抱怨保留调用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T02:03:23.173

`blah release]`如果那不是拼写错误并且您逐字粘贴，则可能是因为搜索和替换模式没有考虑`[blah release]`

# actionscript-3 - 无法停止定时器 AS3

> ID：14804914
> 
> 赞同：1
> 
> 时间：2013-02-11T02:00:57.650
> 
> 标签：actionscript-3, flash

这是简单的代码，但我无法解决.. 我点击 a.button，所以计时器运行，但如果我点击 b.button，计时器仍在运行。如何停止这个计时器？谢谢（对不起我的英语不好）

```
 a.addEventListener(MouseEvent.CLICK, starts);
    function starts(e:MouseEvent)
    {
            time(0);
    }
    b.addEventListener(MouseEvent.CLICK, stops);
    function stops(e:MouseEvent)
    {
            time(1);
    }
    function time(cc)
    {
        var timer:Timer = new Timer(1000,100);
        timer.addEventListener(TimerEvent.TIMER, tmer);
        timer.start();
        function tmer(e:TimerEvent):void
        {
            trace("start");
        }
        if(cc == 1)
        {
            trace("stop");
            timer.stop();
            timer.removeEventListener(TimerEvent.TIMER, tmer);
        }
        cc=0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:07:20.900

试试这个：

```
a.addEventListener(MouseEvent.CLICK, starts);
function starts(e:MouseEvent)
{
    time(0);
}
b.addEventListener(MouseEvent.CLICK, stops);
function stops(e:MouseEvent)
{
    time(1);
}

var timer:Timer;
function time(cc:int)
{
    if(cc == 0)
    {
        if(!timer)
            timer = new Timer(1000,100);        
        timer.addEventListener(TimerEvent.TIMER, tmer);
        timer.start();
    }   
    else if (cc == 1)
    {
        trace("stop");
        timer.stop();
        timer.removeEventListener(TimerEvent.TIMER, tmer);
    }
}

function tmer(e:TimerEvent):void
{
    trace("start");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T02:15:43.757

试试这个：

```
var timer:Timer = new Timer(1000,100);

// To verify if timer is running or stopping
timer.addEventListener(TimerEvent.TIMER, tickTock);
function tickTock(e:TimerEvent):void
{
    trace("tick tock");
}

a.addEventListener(MouseEvent.CLICK, starts);
function starts(e:MouseEvent)
{
        time(0);
}

b.addEventListener(MouseEvent.CLICK, stops);
function stops(e:MouseEvent)
{
        time(1);
}

function time(cc)
{
    if(cc == 0)
    {
        trace("start");
        timer.start();
    }
    else if(cc == 1)
    {
        trace("stop");
        timer.stop();
    }
} 
```

或者简单地说：

```
var timer:Timer = new Timer(1000,100);

// To verify if timer is running or stopping
timer.addEventListener(TimerEvent.TIMER, tickTock);
function tickTock(e:TimerEvent):void
{
    trace("tick tock");
}

a.addEventListener(MouseEvent.CLICK, starts);
function starts(e:MouseEvent)
{
        trace("start");
        timer.start();
}

b.addEventListener(MouseEvent.CLICK, stops);
function stops(e:MouseEvent)
{
        trace("stop");
        timer.stop();
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-11T02:10:09.847

这是因为您第二次创建了一个新的 Timer 对象。

```
var timer:Timer = new Timer(1000,1000);
function tmer(event:TimerEvent):void{
     trace("The timer is working");
}
timer.addEventListener(TimerEvent.TIMER, tmer);
timer.stop();
 a.addEventListener(MouseEvent.CLICK, starts);
    function starts(e:MouseEvent)
    {
            timer.reset();
            timer.start();
    }
    b.addEventListener(MouseEvent.CLICK, stops);
    function stops(e:MouseEvent)
    {
            timer.stop();
    } 
```

# c# - 发送经纬度到表单（提交到数据库）

> ID：14804915
> 
> 赞同：1
> 
> 时间：2013-02-11T02:01:02.223
> 
> 标签：c#, javascript, asp.net, google-maps

我有一个显示我当前位置的谷歌地图，当我点击地图时，会添加一个新标记，在信息窗口中显示纬度和经度。我对此很满意。

我想要发生的是将该纬度和经度输入到我在同一页面上的表格中，其中包含有关该位置的详细信息。然后该信息将被发送到数据库。

这是javascript：

```
var map;
var marker2;
var infowindow2;
var infowindow;
function getLocation() 
{
if (navigator.geolocation) 
{
    navigator.geolocation.getCurrentPosition(showPosition, placeMarker, showError);
}
else
{
    x.innerHTML = "Geolocation is not supported by this browser.";
}  
}
function showPosition(position)
{
    lat2 = position.coords.latitude;
lon = position.coords.longitude;
latlon = new google.maps.LatLng(lat2, lon)
mapholder = document.getElementById('mapholder')   

var mapProp = 
{
    center: latlon, zoom: 17,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    mapTypeControl: false,
    navigationControlOptions:{style: google.maps.NavigationControlStyle.SMALL}
};

map = new google.maps.Map(document.getElementById("mapholder"),mapProp);
var marker = new google.maps.Marker({ position: latlon, map:map, title: "You are Here"});
marker.setMap(map);
infowindow2 = new google.maps.InfoWindow({ content:"You are Here!" + "<br>Click on desired location to generate latitute and longitude coordinates;" + "<br>Click 'Send' to enter Latitude and Longitude co-ordinates into form"});
infowindow2.open(map,marker);

google.maps.event.addDomListener(window, 'load', getLocation);
google.maps.event.addListener(map, 'click', function(event) 
{
    placeMarker(event.latLng);
});
}
function placeMarker(location) 
{
 if (!marker2) 
 {
     marker2 = new google.maps.Marker({ position: location, map: map, icon: 'Icon/aed4.jpg' });
 }
 else 
 {
     marker2.setPosition(location);
 }

 google.maps.event.addListener(marker2, 'click', function (event) 
 {
     document.getElementById("latbox").value = event.lat();
     document.getElementById("lngbox").value = event.lng();
 });

 infowindow = new google.maps.InfoWindow({ content: 'Latitude: ' + location.lat() + '<br>Longitude: ' + location.lng() });
 infowindow.open(map, marker2);
 infowindow2.close(map, marker2);

 google.maps.event.addDomListener(window, 'load', showPosition);
}
google.maps.event.addDomListener(window, 'load', placeMarker);
infowindow.close(map, marker2); 
```

这是我要放置的表格：

```
 <div id="formlocation">
        <table class="style1">
            <tr>
                <td class="style2">
                    <asp:Label ID="buildingLbl" runat="server" Text="Building Name:"></asp:Label>
                </td>
                <td>
                    <asp:TextBox ID="buildingTxt" runat="server"></asp:TextBox>
                </td>
            </tr>
            Latitude:<input size="20" id="latbox" type="text" name="lat" />
            <br />
            Longitude:<input size="20" id="lngbox" type="text" name="lng" />
            <br /> 
```

我尝试将它们放入文本框中，但也无法正常工作。

另外，我能否将输入区域中的信息与文本框一样发送到 SQL 中？

我以为我在[这里](https://stackoverflow.com/questions/5968559/retrieve-latitude-and-longitude-of-a-draggable-pin-via-google-maps-api-v3)找到了答案，但无法弄清楚我做错了什么-希望有一个不错的简单解决方案-我是新手...感谢所有帮助。

我在想这个网站的[例子](http://www.gorissen.info/Pierre/maps/googleMapLocationv3.php)。我将只有 1 个可以通过单击地图移动的标记，这会更改纬度和经度字段中的值。

我正在添加到目前为止我所拥有的屏幕截图，但我不能直到我有 10 个声誉......我希望坐标在通过单击地图移动标记时填充字段。我知道我在信息窗口中单击“发送”以将坐标输入到表单中，但理想情况下，它会随着您通过单击地图移动标记而改变。

我希望 infoWindow 中的纬度和经度值进入表单。在我的示例中，我有两个纬度和经度字段，但那是我试图将值放入 TextBox 和输入字段。

表单底部应该有一个“提交”按钮，用于将所有信息发送到数据库 (SQL)。

希望这有助于解释我所追求的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:45:31.963

您应该能够使用 Javascript 来填充文本框值

像这样的东西：

```
function showPosition(position)
{
    lat2 = position.coords.latitude;
    lon = position.coords.longitude;
    latlon = new google.maps.LatLng(lat2, lon)
    mapholder = document.getElementById('mapholder')

     fillLatLon(lat, lon);
    }

function fillLatLon(lat, lon)
{ 
     $('#latbox').val(lat);
     $('#lngbox').val(lon);
} 
```

# python - 追加到同一个列表

> ID：14804921
> 
> 赞同：2
> 
> 时间：2013-02-11T02:01:42.377
> 
> 标签：python

我来自扎实的 C/C++ 背景，所以如果我的问题很愚蠢，请多多包涵。

这里我有两个声明封装数据的类，

```
class Node:
    Term = ""
    TermInfo = []
    def __init__(self,S,Info):
        self.Term = S
        self.TermInfo.append(Info)

class TermInfo:
    DocID = 0
    Freq = 0
    def __init__(self,ID,F):
        self.DocID = ID
        self.Freq = F 
```

我试图以这种方式操纵它们

```
 Info = TermInfo(ID,0)
 node = Node(j,Info)
 Dict[j] = node 
```

基本上，我试图构建一个字典，其中包含由字符串“Term”和“Terminfo”列表组成的节点，我希望每个节点都有自己的副本。但是，在我连续两次调用这三行之后

```
Info = TermInfo(ID,0)
node = Node(j,Info)
Dict[j] = node

Info = TermInfo(ID,0)
node = Node(j,Info)
Dict[j] = node 
```

我惊讶地发现“TermInfo”的两个列表都指向同一个内存地址，而第二个 append() 也改变了第一个列表，那么我如何确保每个节点都有自己的副本而不是指向同一个地址？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T02:03:51.420

简短的回答：

在 中创建一个新列表`__init__`。

```
def __init__(self,S,Info):
    self.Term = S
    self.TermInfo = [Info] 
```

长答案：

这与 python 如何查找属性有关。当你这样做时： `instance.attribute`，python首先在实例上查找属性。如果在那里找不到，它会在**class**上查找属性。在这里，您在类上有一个列表属性，并且您继续通过实例附加到该属性。所以当你有这条线时：

```
self.TermInfo.append(whatever) 
```

Python首先看自我。但是，`self`没有`TermInfo`属性，因此 python 会查看`self.__class__`（`Node`在这种情况下）该`TermInfo`属性 - 并找到它，因此将其附加到`Node.TermInfo`列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T02:06:34.950

只有`__init__`在对象构造中和之后分配的属性才是实例属性。在类定义中分配的属性是类属性，类似于其他语言中的静态类成员。因此，如果您想拥有每个实例的属性，请将其初始值分配给`__init__`.

# windows-phone-7 - 在 windows phone 7 中调用另一个应用程序

> ID：14804922
> 
> 赞同：0
> 
> 时间：2013-02-11T02:01:52.703
> 
> 标签：windows-phone-7, windows-phone-8

从我所见，[Windows phone 7](https://stackoverflow.com/questions/5042353/launching-other-applications-in-windows-phone-7-programatically)无法在您的应用程序中调用其他应用程序表单。现在还是这样吗？

只是想从我的应用程序内部调用另一个应用程序？这可能吗？如果可以，有人能指出我正确的方向吗？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T05:51:19.243

从 Windows Phone 7.8 开始，应用程序间通信仍然不可用。它也不太可能在未来的 7.x 版本中引入。

在 Windows Phone 8 中，您可以`Extensions/Protocol`向 WMAppManifest 添加一个元素，以保留一个 URI 前缀，然后可以使用[`Launcher`](http://msdn.microsoft.com/en-us/library/windowsphone/develop/br241801.aspx)该类从另一个应用程序启动该前缀。

有关详细信息，请参阅 MSDN：

> [使用 Windows Phone 8 的文件和 URI 关联自动启动应用程序](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206987%28v=vs.105%29.aspx)

# jquery - 打开新窗口以打印元素

> ID：14804925
> 
> 赞同：3
> 
> 时间：2013-02-11T02:02:02.860
> 
> 标签：jquery, printing, replace, append

尝试打开一个新窗口以包含仅用于打印的元素。但它在 IE8 中不起作用。

```
function printElement(elementId) {
  var printWindow = window.open('', '_blank',
    'status=0,toolbar=0,location=0,menubar=1,resizable=1,scrollbars=1'); 

  printWindow.document.write("<html><head></head><body></body></html>"); 

  var head = jQuery('head').clone();
  var printElement = jQuery('#' + elementId).clone();

  jQuery(printWindow.document).find('head').replaceWith(head);  // does not work in IE8
  var body = jQuery(printWindow.document).find('body');
  body.empty();
  body.append(printElement);  // does not work in IE8
  return false;
} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T02:13:30.670

这个怎么样？如果我理解您想要正确执行的操作，那么这应该适合您。在 IE 8 中测试。

[JSBin 上的工作示例](http://jsbin.com/utoyev)。

HTML：

```
<a href="#" id="one" class="trigger">Print One</a>
<a href="#" id="two" class="trigger">Print Two</a> 
```

JavaScript：

```
var $trigger = $(".trigger"),
    printElement = function(id) {
        var printWindow = window.open('','_blank','status=0,toolbar=0,location=0,menubar=1,resizable=1,scrollbars=1'),
            html = $('html').clone(),
            printElement = $('#' + id).clone(),
            body;

      printWindow.document.write("<!DOCTYPE html><head></head><body></body></html>"); 

      $(printWindow.document).find('html')
                            .replaceWith(html);

      body = $(printWindow.document).find('body')
                                    .html(printElement);
    };

$trigger.on("click", function(e) {
  var id = $(this).attr("id");

  e.preventDefault();

  printElement(id);
}); 
```

# ruby-on-rails-3 - postgresql 时间和 rails 3 应用程序时间之间的差异

> ID：14804931
> 
> 赞同：0
> 
> 时间：2013-02-11T02:02:29.480
> 
> 标签：ruby-on-rails-3, postgresql

场景：我想获得与我的系统时间相关的最近时间。我在我的模型中编写了以下方法：

```
 def self.nearest_class(day, teacher_id, hour_min)
    day_of_week = '%' + day + '%'
    if hour_min == "06:00:00"
      where('frequency like ? AND teacher_id = ? AND (start_time >= ?)', day_of_week, teacher_id, hour_min).order('start_time ASC')
    else
      where('frequency like ? AND teacher_id = ? AND (start_time >= localtime(0))', day_of_week, teacher_id).order('start_time ASC')
    end
  end 
```

当我在 rails 控制台中使用 测试上述方法时`Lecture.nearest_class('Monday', 1, 'localtime(0)')`，返回了以下查询以及一些数据：

```
SELECT "lectures".* FROM "lectures" WHERE (frequency like '%Monday%' AND teacher_id = 1 AND (start_time >= localtime(0))) ORDER BY start_time ASC 
```

但我预计没有记录，因为我的系统时间大于数据库中记录的任何 start_time。我已经使用从控制台到 pgadmin3 的查询来测试结果是否相同。但是，正如预期的那样，pgadmin3 没有显示任何结果。

postgresql 时间和 rails 应用程序时间有区别吗？我怎样才能检查这些差异？我在控制台中尝试过`Time.now`，它与 pgadmin3 中的相同`SELECT LOCALTIME(0)`。获取最近系统时间记录的正确方法应该是什么？

为了进一步设置上下文，这是我的控制器方法：

```
def showlectures
    @teacher = Teacher.login(params[:id]).first
    @lecture_by_course = nil
    if @teacher
        WEEKDAY.each do |day|
            hour_min = "06:00:00"
            if day == Time.now.strftime("%A") # check if day of week is same e.g. 'Monday'
                hour_min = "localtime(0)" # system time with format: HH:MM:SS
            end
            @lecture_by_course = Lecture.nearest_class(day, @teacher.id, hour_min).first
            if @lecture_by_course
                break
            end
        end
    end

    render json: @lecture_by_course, include: { course: { only: [:name, :id] }}
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:32:30.663

我通过传递服务器 Time.now 而不是进行 SQL 检查来解决这个问题。{ :| 哦 }

# explorer - 更改 IE 主页 - 覆盖组策略脚本

> ID：14804934
> 
> 赞同：1
> 
> 时间：2013-02-11T02:03:22.890
> 
> 标签：explorer, group-policy

我在工作场所从事 IT 工作，但无法更改任何组策略设置。

我希望我的电脑每次启动时都运行这个脚本，有效地覆盖我们的组策略设置的 IE 主页。通常它被定向到我公司的主页，加载时间太长，而且它对我没有用。

```
REG ADD "HKCU\Software\Microsoft\Internet Explorer\Main" /V "Start Page" /D "http://www.google.com.au" /F 
```

这需要在每次启动时运行，因为 GP 将覆盖该注册表项。每次 PC 启动时执行此操作的最佳方法是什么？

如果有替代脚本/命令，我会使用它。

# cuda - 如何在没有cmake的情况下使用cudpp？

> ID：14804937
> 
> 赞同：0
> 
> 时间：2013-02-11T02:03:36.280
> 
> 标签：cuda, cmake, cudpp

我需要使用 cudpp 的扫描功能。但是，cudpp 需要 cmake 才能编译。有没有办法直接将cudpp的扫描功能用于CUDA的C代码？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T06:45:59.947

你有三种可能：

*   编写自己的扫描功能版本，
*   尝试从 cudpp 复制代码并尝试与您的项目集成，
*   用 Cmake 编译 cudpp 并使用这个库，
*   您也可以使用推力库（[主页](http://thrust.github.com/)）。

# javascript - 如何为 Bootstrap 的 scroll spy 功能添加平滑滚动

> ID：14804941
> 
> 赞同：66
> 
> 时间：2013-02-11T02:03:56.343
> 
> 标签：javascript, html, css, twitter-bootstrap, smooth-scrolling

一段时间以来，我一直在尝试向我的网站添加平滑滚动功能，但似乎无法使其正常工作。

这是与我的导航相关的 HTML 代码：

```
<div id="nav-wrapper">
<div id="nav" class="navbar navbar-inverse affix-top" data-spy="affix" data-offset-top="675">
  <div class="navbar-inner" data-spy="affix-top">
    <div class="container">

      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

      <!-- Everything you want hidden at 940px or less, place within here -->
      <div class="nav-collapse collapse">
        <ul class="nav">
            <li><a href="#home">Home</a></li>
            <li><a href="#service-top">Services</a></li>
            <li><a href="#contact-arrow">Contact</a></li>
        </ul><!--/.nav-->
      </div><!--/.nav-collapse collapse pull-right-->
    </div><!--/.container-->
  </div><!--/.navbar-inner-->
</div><!--/#nav /.navbar navbar-inverse-->
</div><!--/#nav-wrapper--> 
```

这是我添加的 JS 代码：

```
<script src="js/jquery.scrollTo-1.4.3.1-min.js"></script>

<script>
    $(document).ready(function(e) {

        $('#nav').scrollSpy()
        $('#nav ul li a').bind('click', function(e) {
            e.preventDefault();
            target = this.hash;
            console.log(target);
            $.scrollTo(target, 1000);
        });
    });
</script> 
```

对于它的价值，[这里](https://stackoverflow.com/questions/8711333/bootstrap-js-scrollspy-with-animated-scroll)是我收到关于我到目前为止所做的信息的地方，[这里](http://homegrowndevelopment.com/)是我当前形式的网站。如果你能帮助我，我会给你烤一个馅饼或饼干之类的。谢谢！

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2013-02-11T02:29:22.933

你真的需要那个插件吗？您可以为`scrollTop`属性设置动画：

```
$("#nav ul li a[href^='#']").on('click', function(e) {

   // prevent default anchor click behavior
   e.preventDefault();

   // store hash
   var hash = this.hash;

   // animate
   $('html, body').animate({
       scrollTop: $(hash).offset().top
     }, 300, function(){

       // when done, add hash to url
       // (default click behaviour)
       window.location.hash = hash;
     });

}); 
```

[小提琴](http://jsfiddle.net/FyAnb/86/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-02-03T06:28:20.900

如果你有一个固定的导航栏，你需要这样的东西。

从上述最佳答案和评论中汲取...

```
$(".bs-js-navbar-scrollspy li a[href^='#']").on('click', function(event) {
  var target = this.hash;

  event.preventDefault();

  var navOffset = $('#navbar').height();

  return $('html, body').animate({
    scrollTop: $(this.hash).offset().top - navOffset
  }, 300, function() {
    return window.history.pushState(null, null, target);
  });
}); 
```

首先，为了防止“未定义”错误，`target`在调用之前将散列存储到变量 ，然后`preventDefault()`引用该存储的值，如 pupadupa 所述。

下一个。您不能使用`window.location.hash = target`，因为它同时设置 url 和位置，而不是单独设置。您最终将在 id 与 href 匹配的元素的开头找到该位置...但被您的固定顶部导航栏覆盖。

为了解决这个问题，您将 scrollTop 值设置为目标的垂直滚动位置值减去固定导航栏的高度。直接针对该值保持平滑滚动，而不是事后添加调整，并获得不专业的抖动。

您会注意到 url 没有改变。要设置它，请改用`return window.history.pushState(null, null, target);`手动将 url 添加到历史堆栈。

完毕！

其他注意事项：

1）使用该`.on`方法是最新的（截至 2015 年 1 月）比`.bind`or更好的 jquery 方法`.live`，或者甚至`.click`出于我将留给您找出的原因。

2) navOffset 值可以在函数内部或外部，但您可能希望它在外部，因为您很可能会为其他函数/DOM 操作引用该垂直空间。但我把它留在里面，让它整齐地变成一个功能。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-02-24T15:02:00.137

```
$("#YOUR-BUTTON").on('click', function(e) {
   e.preventDefault();
   $('html, body').animate({
        scrollTop: $("#YOUR-TARGET").offset().top
     }, 300);
}); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-07-29T17:44:12.630

```
// styles.css
html {
    scroll-behavior: smooth
} 
```

来源：[https ://www.w3schools.com/howto/howto_css_smooth_scroll.asp#section2](https://www.w3schools.com/howto/howto_css_smooth_scroll.asp#section2)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-11-02T16:14:49.857

如果您下载了 jquery easing 插件[（检查一下）](http://gsgd.co.uk/sandbox/jquery/easing/)，那么您只需将其添加到您的 main.js 文件中：

```
$('a.smooth-scroll').on('click', function(event) {
    var $anchor = $(this);
    $('html, body').stop().animate({
        scrollTop: $($anchor.attr('href')).offset().top + 20
    }, 1500, 'easeInOutExpo');
    event.preventDefault();
}); 
```

并且不要忘记将平滑滚动类添加到您的 a 标签中，如下所示：

```
 <li><a href="#about" class="smooth-scroll">About Us</a></li> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-06-11T21:39:35.427

我把它结合起来，这就是结果——

```
$(document).ready(function() {
     $("#toTop").hide();

            // fade in & out
       $(window).scroll(function () {
                    if ($(this).scrollTop() > 400) {
                        $('#toTop').fadeIn();
                    } else {
                        $('#toTop').fadeOut();
                    }
                });     
  $('a[href*=#]').each(function() {
    if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
    && location.hostname == this.hostname
    && this.hash.replace(/#/,'') ) {
      var $targetId = $(this.hash), $targetAnchor = $('[name=' + this.hash.slice(1) +']');
      var $target = $targetId.length ? $targetId : $targetAnchor.length ? $targetAnchor : false;
       if ($target) {
         var targetOffset = $target.offset().top;
         $(this).click(function() {
           $('html, body').animate({scrollTop: targetOffset}, 400);
           return false;
         });
      }
    }
  });
}); 
```

我测试了它，它工作正常。希望这会对某人有所帮助:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-25T20:07:14.163

发布的内容还可以，但是如果`onetrickpony`您想要更通用的解决方案，则可以使用下面的代码。

`id`您可以使它更像标准并且只选择 -Tag 的属性`name`，而不是只选择锚点的属性`<a>`。这将使您免于编写额外的`id`标签。只需将 smoothscroll 类添加到导航栏元素即可。

**发生了什么变化**

1)`$('#nav ul li a[href^="#"]')`到`$('#nav.smoothscroll ul li a[href^="#"]')`

2)`$(this.hash)`到`$('a[name="' + this.hash.replace('#', '') + '"]')`

**最终代码**

```
/* Enable smooth scrolling on all links with anchors */
$('#nav.smoothscroll ul li a[href^="#"]').on('click', function(e) {

  // prevent default anchor click behavior
  e.preventDefault();

  // store hash
  var hash = this.hash;

  // animate
  $('html, body').animate({
    scrollTop: $('a[name="' + this.hash.replace('#', '') + '"]').offset().top
  }, 300, function(){

    // when done, add hash to url
    // (default click behaviour)
    window.location.hash = hash;

  });
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-09T07:21:42.213

使用此代码，该 ID 不会出现在链接上

```
 document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();

            document.querySelector(this.getAttribute('href')).scrollIntoView({
                behavior: 'smooth'
            });
        });
    }); 
```

# ios - UIScrollview 中的 UIView。frame.origin 在滚动时不改变，无法检测到碰撞

> ID：14804943
> 
> 赞同：0
> 
> 时间：2013-02-11T02:04:34.437
> 
> 标签：ios, objective-c, xcode, cocoa-touch, uiview

我有一个屏幕，其中包含：

*   UIView A
*   UIScrollView，其中包含 UIView B

UIScrollView 与 UIView A 重叠（直到大约一半），允许我“拖动” UIView B 并使其与 UIView A 重叠。这样当我放开它时，UIView B 很好地弹回它的原始位置（我不想将它拖到整个屏幕上，只是从它的起点到 UIView A）

现在，我正在尝试在 UIView 重叠时检测碰撞。然而，没有一个被检测到。我正在使用 convertRect:toView: 来获取同一系统上的坐标，但是通过在其 touchesMoved 中跟踪 UIView B 的坐标，我看到“拖动”（实际上是滚动 UIScrollView）不会影响其框架的原点坐标。它们在touchBegan 中和每次touchMoved 火时都是一样的。

我假设这是因为 UIView B 并没有真正移动到任何地方，UIScrollView 是，这意味着 UIView 的原点总是相同的，即使它的绝对坐标不是。关于如何处理这个问题的任何建议？

![](../Images/f502f72690330ddf383197cacb11cbc0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T02:22:13.850

当 scrollView.frame.origin.x + viewB.frame.size.width + scrollView.contentOffset.x >= viewA.frame.origin.x 会有重叠

**编辑后：**

我无法让滚动视图工作，所以我尝试了另一种效果很好的方法。我没有使用滚动视图，而是使用了一个带有背景颜色的矩形视图，并在其中添加了蓝色方块。我在 IB 中给蓝色方块设置了宽度和高度，将它置于细长视图的中心（在 y 方向），并且对该长视图的左侧有另一个约束。IBOutlet leftCon 连接到该约束。然后，我使用此代码拖动它，并在我放手时让它返回：

```
#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>

@interface ViewController ()
@property (strong,nonatomic) UIPanGestureRecognizer *panner;
@property (strong,nonatomic) IBOutlet NSLayoutConstraint *leftCon;
@property (strong,nonatomic) CADisplayLink *displayLink;
@end

@implementation ViewController {
    IBOutlet UIView *blueSquare;
}

-(void)viewDidLoad {
    self.panner = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanGesture:)];
    [blueSquare addGestureRecognizer:self.panner];
}

- (void)handlePanGesture:(UIPanGestureRecognizer *)sender {
    CGPoint translate = [sender translationInView:self.view];
    if (self.leftCon.constant <160)
        if (self.leftCon.constant > 100) NSLog(@"Bang! We have a collision");
        self.leftCon.constant = translate.x;
    if (sender.state == UIGestureRecognizerStateEnded){
        [self startDisplayLink];
    }
}

-(void)startDisplayLink {
    self.displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(bounceBack:)];
    [self.displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
}

- (void)stopDisplayLink {
    [self.displayLink invalidate];
    self.displayLink = nil;
}

-(void)bounceBack:(CADisplayLink *) link {
    self.leftCon.constant -= 12;
    if (self.leftCon.constant < 2) {
        [self stopDisplayLink];
        self.leftCon.constant = 2;
    }
} 
```

翻译代码中的数字（160 和 100）是通过记录凭经验确定的。数字 160 防止它离开长视图的右边缘，数字 100 是它开始与黑框重叠的地方。

# java - Maven“构建路径指定执行环境J2SE-1.5”，即使我将其更改为1.7

> ID：14804945
> 
> 赞同：66
> 
> 时间：2013-02-11T02:04:58.927
> 
> 标签：java, eclipse, maven, m2eclipse

在 Eclipse Juno 中，我安装了最新的 m2e 插件（1.2.20120903-1050）。在首选项中，我在 Java -> Installed JREs -> Add 中添加了 jdk1.7.0_11，然后指定了位置（`C:\Program Files\Java\jdk1.7.0_11`）。当我创建一个新的 Maven 项目并运行它时，我收到一个警告：

> 构建路径指定执行环境 J2SE-1.5。工作空间中没有安装与此环境严格兼容的 JRE。

我不知道如何解决这个问题。

我相信这是一个 Maven 问题，因为我在运行普通 Java 项目时没有这个错误。[我在这里](http://mikechencodingnotes.blogspot.com/2011/11/m2e-compiler-j2se-15-warning-message.html)读到我应该更改“maven-compiler-plugin.pom”并将源和目标从 1.5 更改为更合适的东西。就我而言，1.7。我已经这样做了，但我仍然收到警告。

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-11-15T07:55:54.273

上面所有的答案可能暂时都有效，但是每当您在命令行上运行 maven 或 Maven → 更新项目时……JDK 将被重置，这也是我理解的问题。

要永久修复此问题，请将以下代码添加到您的 pom 文件中。记得在之后或`mvn clean compile`在命令行中执行 Maven → 更新项目……。

```
<build>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.1</version>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                </configuration>
            </plugin>
        </plugins>

    </pluginManagement>
</build> 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-02-11T02:31:13.690

1.  右键单击您的项目
2.  单击属性
3.  单击左侧菜单中的“Java 编译器”选项
4.  在右侧的 JDK 合规性部分下，将其更改为“1.7”
5.  运行 Maven clean 然后 Maven 构建。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-06-19T09:28:52.630

我知道这是一个老话题。我有同样的问题。我测试了有关该主题的所有答案。这里没有任何效果......但我找到了另一个解决方案。

转到 pom->overview 并将这些添加到您的属性中：

*   名称：“maven.compiler.target” 值：“1.7”

和

*   名称：“maven.compiler.source” 值：“1.7”

现在做一个maven更新。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-04-23T19:35:34.153

对于导入的 maven 项目和 JDK 1.7，请执行以下操作：

1.  从 Eclipse 中删除项目（保留文件）
2.  删除项目目录中的 .settings 目录、.project 和 .classpath 文件。
3.  修改您的 pom.xml 文件，添加以下属性（确保以下设置不会被您的 POM 中的显式 maven-compiler-plugin 定义覆盖）

    ```
    <properties>
        <maven.compiler.source>1.7</maven.compiler.source>
        <maven.compiler.target>1.7</maven.compiler.target>
    </properties> 
    ```

4.  将更新的项目导入 Eclipse。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-07-29T03:37:19.777

我正在使用带有最新 spring、maven 插件和 JDK1.6.0_25 的 Juno 4.2。

我遇到了同样的问题，这是我在每次 Eclipse 重启后默认设置的修复：

1.  项目清单
2.  右键单击maven项目
3.  Java 构建路径
4.  库选项卡
5.  选择当前错误的 JRE 项
6.  单击编辑
7.  选择最后一个选项（Workspace 默认 JRE (jdk1.6.0_25)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-09-19T18:28:37.723

如果您收到以下类型的错误

[![maven构建错误](../Images/8ba653af0519d7ddfec24633e8f1bf5f.png)](https://i.stack.imgur.com/W6ljV.png)

然后执行以下步骤-->>

*   转到**Windows**。然后选择**Preferences**，其中选择**java**（在左上角）。
*   在 java 中选择**Installed JREs**并检查您的 JRE（如果您已正确安装 jdk 并正确定义了环境变量，那么您将在此处看到已安装 java 的当前版本），如图所示 - [![安装了jre](../Images/97c4c9269fa2d1f9fa80fbadcc69eaab.png)](https://i.stack.imgur.com/W5fuH.png)

（我安装了 Java 8） **如果未选中，请选中复选框**。单击应用并关闭。

现在按**Alt+Enter**进入项目属性，或者通过右键单击项目并选择属性。

在**Properties**中选择左上角的**Java Build Path**

选择**图书馆**

[![检查库](../Images/9de21830a7aea485409bd7e12f71a8dd.png)](https://i.stack.imgur.com/VckQQ.png)

并单击**编辑**（在选择*The JRE System Library...*之后） 在编辑中单击并选择**Workspace default JRE**。然后点击完成

按**顺序和导出**检查 JRE 系统库。

然后最后**应用并关闭** 清理项目，然后构建它。

问题解决了..干杯！！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-10-31T18:11:24.607

为了将您的项目更新到您的环境中可用的最新版本的 java，请按照下列步骤操作：

1.  打开你的`pom.xml`文件
2.  将视图切换到有效 POM 选项卡
3.  打开查找对话框 ( `ctrl + F`) 进行搜索`maven-compiler-plugin`
4.  复制以下行

```
<plugin>
	<artifactId>maven-compiler-plugin</artifactId>
	<version>3.1</version>
```

5.  单击`pom.xml`选项卡以打开您的项目 pom 配置
6.  在您的`<build> ... </build>`配置部分中，粘贴复制的配置并将其修改为...

```
 <plugins>
    	<plugin>
    		<artifactId>maven-compiler-plugin</artifactId>
    		<version>3.1</version>

    		<configuration>
    			<source>1.8</source>
    			<target>1.8</target>
    		</configuration>
    	</plugin>
    </plugins>
```

7.  保存您的配置
8.  在您的项目中单击鼠标右键单击[ `Maven -> Update Project`]，然后在显示的更新对话框中单击确定。

完毕！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-02-28T17:59:22.587

我面临着同样的问题。在 pom.xml 中，我指定了 maven 编译器插件来选择 1.7 作为源和目标。即使这样，当我在 Eclipse 中导入 git 项目时，它也会选择 1.5 作为项目的编译版本。需要注意的是eclipse已经安装运行时设置为JDK 1.8

我还检查了 git 存储库中没有检查 .classpath .impl 或 .project 文件。

对我有用的解决方案：我只是删除了 .classpath 文件并做了一个“maven-update 项目”。.classpath 文件被重新生成，它从 pom 文件中选择了 1.7 作为编译版本。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-07-07T06:25:09.753

我在 Eclipse Mars 版本中遇到错误，因为“构建路径指定执行环境 J2SE-1.5。工作区中没有安装与此环境严格兼容的 JRE。

要解决此问题，请执行以下步骤，“右键单击项目选择构建路径选择配置构建路径选择库选项卡选择 JRE 系统库并单击编辑按钮选择工作区默认 JRE 并完成

问题将得到解决。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-07-27T11:10:10.297

在eclipse中创建maven项目时，无论设置如何，构建路径都设置为JDK 1.5，这可能是新项目或m2e中的错误。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-11T08:29:17.137

我测试了有关该主题的所有答案。这里没有任何效果......但我找到了另一个解决方案。

转到 pom -> overview 并将这些添加到您的属性中：

名称：“maven.compiler.target” 值：“1.8”</p>

和

名称：“maven.compiler.source” 值：“1.8”</p>

现在做一个maven更新。

# php - 多对多的关系。如何连接表？

> ID：14804947
> 
> 赞同：1
> 
> 时间：2013-02-11T02:05:05.120
> 
> 标签：php, mysql, database, phpmyadmin, many-to-many

我有一个关于多对多关系的问题。我目前有三个表：

*   电影
*   类型
*   电影类型

在“电影”表中，我有列：

*   id_movie
*   标题（例如：X战警）
*   rel_year（发布日期）
*   img_src（显示保存在服务器上的图像。这也是使用 php 链接到页面的网站上显示的内容）
*   page_link（链接到页面...）

在“流派”表中，我有列：

*   id_genre
*   名称（动作，冒险等......有14种类型）

在“movie_genre”表中，我有列：

*   id_movie_genre
*   id_movie
*   id_genre

我希望能够连接这些数据库，以便我可以根据页面按类型对网站上的数据进行排序。例如，如果我想查看“动作”下的每部电影，我只想显示那些保存在我的数据库中的具有该 ID 的电影。

如何连接我的数据以匹配我的示例？欢迎任何帮助或建议，我对 mySQL 和 php 还是很陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T02:07:20.477

使用连接（一个 SQL 概念）。您应该很快就会非常熟悉连接。

```
SELECT
    *
FROM
    movie
    NATURAL JOIN movie_genres
    NATURAL JOIN genre
WHERE
    genre.name = 'Action' 
```

编辑：插入一部电影和三种类型之间的关系：

```
INSERT INTO movie_genre
    (movie_id, genre_id)
VALUES
    (1, 1),
    (1, 2),
    (1, 3), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T02:09:29.407

在紧要关头，这将加入您的桌子。然后你可以用`WHERE`子句限制结果。

```
SELECT g.name, m.*
FROM movie m
JOIN movie_genre mg ON mg.id_movie = m.id_movie
JOIN genre g ON g.id_genre = mg.id_genre; 
```

请注意，链接表 ( `movie_genre`) 不应有自己的唯一 ID。它的主键应该是它连接的两个表 ID，仅此而已。

# svg - 在另一个中包含一个 SVG

> ID：14804950
> 
> 赞同：13
> 
> 时间：2013-02-11T02:05:49.443
> 
> 标签：svg, include

*是否可以在没有*光栅化效果的情况下将一个 SVG 包含在另一个 SVG 中？我试过这个

```
<svg version="1.2" width="600.0pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
 <image height="655.813953488" width="600.0" x="0" xlink:href="A.svg" y="0"/>
 <image height="740.540540541" width="600.0" x="0" xlink:href="B.svg" y="655.813953488"/>
</svg> 
```

它渲染合成图像，`A.svg`但`B.svg`它们失去了矢量图形属性并变成位图（在`chrome, inkscape, inkview`和中测试`eog`）。生成的 svg 不会显示在网络浏览器中，因此不能选择外部 javascript 调用。如何在不复制、粘贴和保留矢量化的情况下将一个 svg “包含”到另一个中？

## 在 chrome 中放大合成图像的结果：

![在此处输入图像描述](../Images/5da46337d1b227981ab26a31ea45f2e8.png)

### `A.svg`（单独的效果不存在）

**编辑**：这是我用来测试的确切图像：

## .svg

```
<?xml version="1.0" encoding="UTF-8"?>
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="129pt" height="141pt" viewBox="0 0 129 141" version="1.2">
      <defs>
        <g>
          <symbol overflow="visible" id="glyph0-0">
    	<path style="stroke:none;" d="M 133.296875 0 L 133.296875 -5.1875 C 122.734375 -5.1875 119.15625 -5.1875 116.5625 -12.546875 L 72.328125 -137.6875 C 71.328125 -140.265625 70.9375 -140.875 68.9375 -140.875 C 66.953125 -140.875 66.546875 -140.265625 65.546875 -137.6875 L 23.3125 -18.125 C 19.53125 -7.375 11.5625 -5.1875 4.578125 -5.1875 L 4.578125 0 C 8.171875 -0.40625 16.140625 -0.40625 19.921875 -0.40625 C 24.90625 -0.40625 32.875 -0.40625 37.65625 0 L 37.65625 -5.1875 C 28.296875 -5.578125 26.90625 -11.953125 26.90625 -14.34375 C 26.90625 -16.140625 27.296875 -17.140625 27.703125 -18.328125 L 38.25 -48.015625 L 90.453125 -48.015625 L 102.421875 -14.140625 C 103.40625 -11.75 103.40625 -11.359375 103.40625 -10.5625 C 103.40625 -5.1875 94.84375 -5.1875 91.0625 -5.1875 L 91.0625 0 C 96.828125 -0.40625 107.203125 -0.40625 113.375 -0.40625 C 118.546875 -0.40625 128.515625 -0.40625 133.296875 0 Z M 88.671875 -53.203125 L 40.046875 -53.203125 L 64.359375 -121.734375 Z M 88.671875 -53.203125 "/>
          </symbol>
        </g>
      </defs>
      <g id="surface1">
        <g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
          <use xlink:href="#glyph0-0" x="-4.59" y="140.87"/>
        </g>
      </g>
    </svg>
```

## B.svg

```
 <?xml version="1.0" encoding="UTF-8"?>
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="111pt" height="137pt" viewBox="0 0 111 137" version="1.2">
      <defs>
        <g>
          <symbol overflow="visible" id="glyph0-0">
    	<path style="stroke:none;" d="M 120.9375 -36.265625 C 120.9375 -54.203125 104.609375 -69.53125 83.28125 -70.9375 C 102.421875 -74.71875 115.765625 -87.46875 115.765625 -102.609375 C 115.765625 -119.15625 99.421875 -136.09375 73.71875 -136.09375 L 10.359375 -136.09375 L 10.359375 -130.90625 C 24.109375 -130.90625 26.296875 -130.90625 26.296875 -121.9375 L 26.296875 -14.140625 C 26.296875 -5.1875 24.109375 -5.1875 10.359375 -5.1875 L 10.359375 0 L 78.90625 0 C 104.40625 0 120.9375 -18.125 120.9375 -36.265625 Z M 101.21875 -102.609375 C 101.21875 -87.46875 89.0625 -72.328125 67.546875 -72.328125 L 38.859375 -72.328125 L 38.859375 -123.140625 C 38.859375 -129.90625 39.25 -130.90625 47.21875 -130.90625 L 72.71875 -130.90625 C 92.453125 -130.90625 101.21875 -114.96875 101.21875 -102.609375 Z M 106.203125 -36.46875 C 106.203125 -21.921875 94.84375 -5.1875 73.125 -5.1875 L 47.21875 -5.1875 C 39.25 -5.1875 38.859375 -6.171875 38.859375 -12.953125 L 38.859375 -69.140625 L 75.71875 -69.140625 C 96.234375 -69.140625 106.203125 -51.015625 106.203125 -36.46875 Z M 106.203125 -36.46875 "/>
          </symbol>
        </g>
      </defs>
      <g id="surface1">
        <g style="fill:rgb(0%,0%,0%);fill-opacity:1;">
          <use xlink:href="#glyph0-0" x="-10.361" y="136.082"/>
        </g>
      </g>
    </svg>
```

# search - Grails 可搜索搜索 BigDecimal 范围

> ID：14804951
> 
> 赞同：1
> 
> 时间：2013-02-11T02:05:53.763
> 
> 标签：search, grails, range, searchable

我有具有多个字段的域的 Grails 项目，其中我有字段“价格”。我在项目中添加了可搜索的插件，它通过一般搜索工作正常：

```
def searchResults = searchableService.search(params.q, params) 
```

现在我需要通过范围添加价格搜索。示例：价格在 100 美元到 200 美元之间。我尝试了以下但它不起作用：

```
def searchResults = searchableService.search({
    queryString(params.q)
    lt("price", params.pmax?.trim().toBigDecimal())
},params) 
```

如何实现范围搜索？它是哪种数据类型是否重要：Integer、BigDecimal、Long？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T17:06:13.763

我做了这样的范围搜索：

```
def searchResults = searchableService.search(params){
    must(queryString(params.q) {
        ge('price', params.pmax as BigDecimal)
        le('price', params.pmin as BigDecimal)
    })
} 
```

[编辑]

我以前的解决方案不能完美运行。使用可搜索数字进行搜索的正确方法，您需要首先将其添加到您的域类中：

```
searchable {
     price index: "not_analyzed", format : "0000000000"
} 
```

然后进行搜索：

```
def searchResults = yourDomainClass.search("price:[" + (params.pmin ? params.pmin.trim().padLeft(10, "0") : "*"  )+ " TO " + (params.pmax ? params.pmax.trim().padLeft(10, "0") : "*"  )+ "]" 
```

所有这些都是需要的，因为当您的数据被索引时，也会被文本化。

[http://brettscott.wordpress.com/2011/11/19/lucene-number-range-search-integers-floats/](http://brettscott.wordpress.com/2011/11/19/lucene-number-range-search-integers-floats/)

[http://grails.org/Searchable+Plugin+-+FAQ](http://grails.org/Searchable+Plugin+-+FAQ)

# xml - 无法使用 ImportXML 获取数据

> ID：14804954
> 
> 赞同：0
> 
> 时间：2013-02-11T02:06:26.107
> 
> 标签：xml, xpath, import, google-docs

我正在尝试使用 google Docs 电子表格中的以下公式从 CraigsList 中的帖子正文中获取文本，但保留一条错误消息，指出“XPATH 查询未返回任何数据”。

我使用的公式是，

=ImportXML(D2,"//section[@id='postingbody']")

其中 D2 有发布网址： http: [//losangeles.craigslist.org/wst/apa/3608091461.html](http://losangeles.craigslist.org/wst/apa/3608091461.html)

我查看了几个参考来检查我的公式，但我不知道出了什么问题。任何帮助深表感谢。提前谢谢你！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T02:23:55.233

试试这个`Xpath`表达式：

```
//*[@id="postingbody"]/text() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-01T19:17:20.913

它可能只是 craigslist 阻止它，他们的抓取规则非常严格。

你可以尝试两件事，你可能需要玩弄你想提取的部分或你想如何格式化它：

你可以试试：=REGEXEXTRACT(concatenate(IMPORTXML(A1,"//html")),".*避免诈骗(.* \n?.*) 不要")

或尝试：=importxml(A1,"//html")

或者最后：=importxml(A1,"//body")

# android - 获取当前选中文件的语法

> ID：14804962
> 
> 赞同：0
> 
> 时间：2013-02-11T02:07:42.547
> 
> 标签：android, java-io

我希望有人可以帮助我解决这个问题。我使用 java.io.file 指定要上传到服务器的文件。我的问题是，如何更改我的路径以利用当前选择的文件，而不必硬编码路径和文件名？我的过程的基本原理是这样的——用户长按我布局中的文件，出现上传上下文菜单，用户点击上传，文件被发送到服务器。我只是不清楚如何获取用户长时间单击的文件，而不是将路径和文件名硬编码到方法中。我在 io.file 上阅读的所有内容都显示了一个硬编码示例。我真的很感激任何指导！你可以在这里看到我的意思：

```
 File file = new File("/path/to/file.txt"); //Need to not have to hard code path and filename

                inputStream = new FileInputStream(file); 

                Entry newEntry = mDBApi.putFile("/testing.txt", inputStream,
                        file.length(), null, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:28:36.007

我在我的代码中找出了要使用的正确变量。它应该是

```
 File file = new File(mFileMag.getCurrentDir() + "/" + item); 
```

# mysql - 是否有默认的 ORDER BY 值？

> ID：14804963
> 
> 赞同：3
> 
> 时间：2013-02-11T02:07:55.010
> 
> 标签：mysql

我有一个动态 mysql 查询，该`ORDER BY`部分被硬编码到查询中。

问题是，我不知道每个查询是否都会有一个`ORDER BY`，也不知道哪些列可供订购。

有没有我可以写的默认值，以便我可以使用

`if (empty($order)){$order = "default_value"}`

```
$query = "select ...... ORDER BY $order" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T02:09:36.757

查询结果没有默认顺序。如果您没有明确指定 ORDER BY 子句，则数据顺序未定义。您只能指定`ASC DESC`和一些列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T02:18:03.623

如果您不确定顺序，为什么不将其设为条件子句？

```
$order_by = empty($order) ? "" : "ORDER BY " . $order

$query = "select ...... $order_by" 
```

# backbone.js - 主干jQuery调试Chrome控制台不断清除输出

> ID：14804970
> 
> 赞同：0
> 
> 时间：2013-02-11T02:09:07.443
> 
> 标签：backbone.js

我正在尝试在线学习一个简单的骨干教程。问题是当我点击“发布”时，推文被发布在日志中，但立即被清除。我不确定为什么控制台会在打印出 tweets.toJSON() 后立即自行清理。我正在使用 node 和 livereload2 在保存后加载页面。我不认为它是 livereload，因为无论 livereload 是否运行，行为都是相同的。

1.  我认为一切都包含在自我调用匿名 jquery 函数中以进行范围界定。这样变量就不会暴露在 DOM 的窗口级别。
2.  它将 JQuery 变量作为 $ 符号，以便我可以在函数内部使用它。

我读对了吗？

感谢您的帮助 ！。

```
<html>
<head>
    <title>Backbone Twitter App</title>
</head>
<body>
    <h1> Backbone for twitter </h1>

    <form id="new-tweet">
        <label>Author:</label> <input id="author-name" name="author-name" type="text" />
        <label>Status:</label> <input id="status-update" name="status-update" type="text" />
        <button>Post</button>
    </form>

    <hr/>

    <script type="text/javascript" src="underscore.js"></script>
    <script type="text/javascript" src="jquery-1.9.0.js"></script>
    <script type="text/javascript" src="backbone.js"></script>

    <script type="text/javascript">

        (function($) {
            var Tweet = Backbone.Model.extend({
                defaults:function(){
                    return {
                        author: '',
                        status: ''
                    }
                }

            });

            var TweetsList = Backbone.Collection.extend({
                model: Tweet
            });

            var tweets = new TweetsList();

            $(document).ready(function(){
                $('#new-tweet').submit(function(ev){
                    console.log('button pressed');
                    var tweet = new Tweet({author: $('#author-name').val(), status: $('#status-update').val()});
                    tweets.add(tweet);
                    console.log(tweets.toJSON());
                });
            });
        })(jQuery);

    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T02:17:59.433

您的问题是当您单击按钮并重新加载页面时正在提交表单。

在 submit() 方法中，您可以调用 ev.preventDefault() 来阻止表单被提交。

# python - 为什么我的函数总是返回更长的列表？

> ID：14804973
> 
> 赞同：0
> 
> 时间：2013-02-11T02:09:40.123
> 
> 标签：python

我打开了我的 python 解释器，编码并运行了以下函数。

```
>>> def crazy_function(my_list=[]):
...     my_list.append(0)
...     return my_list
... 
>>> crazy_function()
[0]
>>> crazy_function()
[0, 0]
>>> crazy_function()
[0, 0, 0]
>>> crazy_function()
[0, 0, 0, 0]
>>> crazy_function()
[0, 0, 0, 0, 0]
>>> crazy_function()
[0, 0, 0, 0, 0, 0]
>>> crazy_function()
[0, 0, 0, 0, 0, 0, 0]
>>> 
```

到底是怎么回事？为什么函数返回的列表越调用函数越长？每次调用函数时不应该创建一个新的本地列表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T02:11:50.827

将可变对象分配给函数参数的默认值是一个常见错误。引用[文档](http://docs.python.org/2.7/reference/compound_stmts.html#function-definitions)：

> **执行函数定义时评估默认参数值。**这意味着表达式在定义函数时被计算一次，并且每次调用都使用相同的“预计算”值。当默认参数是可变对象（例如列表或字典）时，这一点尤其重要：如果函数修改了对象（例如，通过将项目附加到列表中），则默认值实际上已被修改。这通常不是预期的。

# javascript - 我可以只禁用双击缩放而不禁用捏缩放吗？

> ID：14804978
> 
> 赞同：3
> 
> 时间：2013-02-11T02:10:27.553
> 
> 标签：javascript, jquery, html, pinchzoom, mobile-browser

我正在用 Javascript 制作游戏，因此可以在计算机或移动网络浏览器上玩。它在计算机上是完美的，但它需要大量的点击。

当我使用移动网络浏览器时，这有时会被解释为双击并保持缩放，这是我不想要的。

我知道如何完全禁用缩放，但有没有办法只禁用双击缩放？如果没有，当我经常点击移动按钮时，是否有解决方法不继续缩放？

# matomo - Piwik 跟踪代码包含

> ID：14804982
> 
> 赞同：1
> 
> 时间：2013-02-11T02:11:11.063
> 
> 标签：matomo

我正在我的网站上实施 Piwik。我在每个页面之前都包含了跟踪代码，`</body>`并在我的服务器上适当地安装了 Piwk（我认为）。它不起作用，我正在开始寻找原因的过程。我有两个当前的问题：

首先，跟踪代码是：

```
<!-- Piwik --> <script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://terryliittschwager.com/analytics/" : "http://terryliittschwager.com/analytics/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script>
<!-- End Piwik Code --> 
```

我看到代码分为两`<script></script>`部分。为什么这是必要的？它不能作为单个脚本工作吗？

其次，与其在每个网页中放置跟踪代码，如果`<script src='trackingcode.js'></script>`在`</body>`?

我在尝试使其工作时尝试了这些替代方法，但到目前为止还没有成功。

感谢您的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:02:41.590

我会尝试使用新代码的 ASYNC 代码。它还应该提高性能

```
<!-- Piwik --> <script type="text/javascript"> 
var _paq = _paq || []; 
(function(){ var u=(("https:" == document.location.protocol) ? "https://{$PIWIK_URL}/" : "http://{$PIWIK_URL}/"); 
_paq.push(['setSiteId', {$IDSITE}]); 
_paq.push(['setTrackerUrl', u+'piwik.php']); 
_paq.push(['trackPageView']); 
_paq.push(['enableLinkTracking']); 
var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0]; g.type='text/javascript'; g.defer=true; g.async=true; g.src=u+'piwik.js'; 
s.parentNode.insertBefore(g,s); })();
 </script> 
<!-- End Piwik Code --> 
```

[http://piwik.org/docs/javascript-tracking/#toc-where-can-i-find-the-piwik-tracking-code](http://piwik.org/docs/javascript-tracking/#toc-where-can-i-find-the-piwik-tracking-code)

# php - PHP 数学百分比

> ID：14804984
> 
> 赞同：-4
> 
> 时间：2013-02-11T02:11:27.677
> 
> 标签：php, math

嗨，我一直在努力解决这个问题。

想象 100%

我们有 2 个号码

6788.08 & 11629.60

我如何获得每个数字的百分比。

例如我认为

100%

10 & 100

10% & 90%

这个例子正确吗？我不知道如何获得 % 中的 2 个比率

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T02:14:44.803

取两个数`$number1`和`$number2`，那么这两个数的和`$sum`， 是`$number1 + $number2`。

现在，获得每个的百分比是微不足道的：

```
$sum = $number1 + $number2;
$percentage1 = $number1 / $sum;
$percentage2 = $number2 / $sum; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T02:14:15.523

添加两个数字：

```
$sum = 6788.08 + 11629.60; 
```

然后将每个数字除以该总和以获得每个数字的比例：

```
$percentage_number1 = 6788.08 / $sum; 
```

所以你得到一个比率。将该比率乘以 100，您可以将其打印为`%`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T02:14:30.090

虽然我不确定你的例子，但这样的事情应该有效：

```
$number = 6788.08;
$number2 = 11629.60;
$summedamt = $number+$number2;

$avg1 = $number/$summedamt;
$avg2 = $number2/$summedamt; 
```

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T02:14:49.077

您将不得不标准化这些值。如果你有`x`，`y`然后用两个比例，你就会得到答案。如果您认为`1.0f == 100%`这变得微不足道：

```
xperc = x / (x + y)
yperc = y / (x + y) 
```

当然，如果您想获得可打印的结果，则必须乘以 100 并截断小数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-11T02:22:20.523

我们在高中数学中学到的是：**超过**等于100 的百分比**。**

6788.08 + 11629.60 = 18417.68

6788.08**是18417.68****的**百分之几？

6788.08 (is) / 18417.68 (of) = % / 100

6788.08 / 18417.68 = 0.369 = % / 100

0.369 * 100 = 36.9%

对其他号码执行相同操作。

# svn - 如何使用 SVN 跟踪文件和文件夹的修改时间？

> ID：14804992
> 
> 赞同：0
> 
> 时间：2013-02-11T02:12:19.190
> 
> 标签：svn, tortoisesvn

请注意，这与设置无关`use-commit-times`。我正在使用 SVN 跟踪学校作业（Word 文档、PDF、图像等）。这样做有什么必要？我的意思是 SVN 的任意属性可以用来存储这些信息。我该怎么做呢？

附加信息：我不是在谈论最后一次提交时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:21:47.520

Subversion 本身不存储此元数据。您可以通过创建自定义属性来记录这些时间戳来绕过它，但是您需要在执行任何提交之前运行脚本来更新它们。

存储库只关心存储库*中*的项目何时更改。

# java - 使用 Wea ther Underground API 检索天气信息

> ID：14804994
> 
> 赞同：1
> 
> 时间：2013-02-11T02:12:45.767
> 
> 标签：java, weather

首先，是否可以在 Java 应用程序中使用 API？代码示例*未*列出 Java。

无论如何，我想知道是否可以将 GeoIP 地理定位和 Weather Underground 结合在一个独立的 Java 应用程序中来检索天气数据。

要构造的 URL 如下所示：
`http://api.wunderground.com/api/[API key here]/conditions/q/CA/San_Francisco.json`

*   那么我可以使用`URLConnection`类来获取响应的信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T02:20:53.527

1-是的，您应该能够从`Java`应用程序中调用它并解析`json`响应

2-您可以在查询中指定国家/城市，如下所示：

```
http://api.wunderground.com/api/Your_Key/geolookup/conditions/forecast/q/Country/City.json 
```

# google-chrome - 我怎样才能只将内容脚本注入一个 chrome 扩展的弹出页面？

> ID：14804995
> 
> 赞同：1
> 
> 时间：2013-02-11T02:13:06.273
> 
> 标签：google-chrome

我只想在扩展的弹出页面中运行内容脚本页面，如何在 manifest.json 或其他地方创建它？

# ios - 何时使用 Starling 或是否需要？

> ID：14804996
> 
> 赞同：1
> 
> 时间：2013-02-11T02:13:21.773
> 
> 标签：ios, actionscript-3, starling-framework

在使用 AIR 发布到 iOS 时，我一直注意到我可以在 60fps 的情况下将帧速率最大化，而不必使用 Starling，即使用 GPU 渲染模式。

由于对 Starling 框架的编码要麻烦得多，我想知道什么时候需要使用它。

任何人都可以启发我或提供具体的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:13:38.937

很难找到具体的例子，但显然你对设备的负担还不够大，以至于适当的硬件加速并不重要。我假设您在获得 60 fps 时正在实际设备上进行测试，而不仅仅是在模拟器中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-18T12:41:07.047

如果您的应用程序需要在所有类型的分辨率或所有类型的设备（如所有 IOS 和 Android）上运行，我的建议是使用 starling 框架。我希望这一行能消除您的疑虑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T19:04:09.267

在比第四代 iPad 慢的设备上，您可能需要 GPU 加速。例如，我建议在 iPhone 4 上试用您的应用程序，看看它是否仍以 60 fps 运行。如果没有，您可能想利用 Starling 提供的 GPU 加速。