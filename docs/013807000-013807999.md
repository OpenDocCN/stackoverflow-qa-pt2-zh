# StackOverflow 问答 13807000-13807999

# ios6 - iOS 6、MPMoviePlayer 和自动旋转

> ID：13807001
> 
> 赞同：0
> 
> 时间：2012-12-10T18:31:48.560
> 
> 标签：ios6, mpmovieplayercontroller, autorotate

不是一个真正的问题，更多的是记录观察：

在 iOS6/Xcode 4.5 中，如果设置应用程序时设置了 window.rootViewController 属性，根视图控制器实现`shouldAutorotate`返回 NO 的方法，除此之外，*除了*MPMoviePlayerViewController（可能还有其他一些类似的课程）。（或者至少这是在模拟器中观察到的行为。）这是我们想要的行为，但令人惊讶，可能不是其他人想要的行为。

有谁知道这是为什么，或者如何控制它（如果需要）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T17:36:22.940

我相信这个问题的答案是 Apple 希望视频采用更宽的屏幕格式（至少比纵向提供的更宽），因此它们会覆盖您防止屏幕旋转的请求。我还猜测，一旦您将视频播放器关闭宽屏模式，您的应用程序就会返回所需的旋转。

# php - 内连接动态表数

> ID：13807003
> 
> 赞同：1
> 
> 时间：2012-12-10T18:31:51.177
> 
> 标签：php, mysql

我有一个函数，它接受一个表数组作为参数，并在内部加入它们后返回结果行。

```
function myfunc($tables, $join_on) {
 foreach($tables as $table) {
  // build query
 }
} 
```

如何构建查询？例如 if`$tables = array('table1', 'table2')`和`$join_on = 'field_x'`then 它应该创建以下查询：

`SELECT * FROM table1 INNER JOIN table2 ON table1.field_x = table2.field_x`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:35:23.747

你可以这样做：

```
function myfunc($tables, $join_on) {
    $mainTable = $tables[0];
    $sql = "SELECT * FROM $mainTable";
    for($i = 1; i<count($tables);$i++) {
        $curTable = $tables[$i];
        $joinField = $join_on[$i-1];
        $sql.= " INNER JOIN $curTable ON $curTable.$joinField = $mainTable.$joinField";
    }

    return sql;
} 
```

当然，您需要添加一些错误检查以确保您至少有一个表，`$tables`并且总是有 N-1 个元素，`$join_on`其中 N 是表的数量`$tables`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-30T07:06:05.343

由于上述功能适用于 2 个表，而我正在研究大约 3 个表来工作。任何人都可以向我提供它的流程。

我正在使用上述代码加入 3 个或更多表，但似乎无法正常工作。需要了解流程。

# django - Django 视图和表单

> ID：13807010
> 
> 赞同：1
> 
> 时间：2012-12-10T18:32:30.407
> 
> 标签：django, django-models, django-forms, django-views

我在使用模型提供总飞行小时数时遇到问题，因此可以将总飞行小时数添加到提交的小时数中。这是我正在使用的代码片段，但到目前为止，在过去一个小时左右的工作中，没有任何效果。

视图.py

```
 pirephours = int(user_profile.totalhours) + 1
        user_profile.update(totalhours=pirephours) 
```

模型.py

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    country = models.CharField("Country", max_length=50)
    totalflights = models.IntegerField("Total Flights", default=0)
    totalhours = models.IntegerField("Total Hours",default=0)
    hub = models.ForeignKey(Airports, default=0) 
```

视图中的 + 1 现在只是在总小时数中增加 1 小时，但我也想知道是否有办法使用以表单而不是数字提交的内容。该表单只是其自身模型的模型表单。

任何输入都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:39:52.413

我假设 user_profile 是来自 ORM 的对象，例如 UserProfile.objects.get(pk=1)。

Django 自动处理插入和更新。

**你想要做的是使用 user_profile.save()**

如果 user_profile 包含一个 id，它将尝试更新数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:49:25.653

我解决这个问题的方法是使用**FormSets**。我将两个表单添加到`formset`列表中，模型表单和带有额外字段的第二个表单。然后我发送`formSet`到模板。鉴于：

```
forM = UserProfileModelFormForm( ...
forE = ExtraUserProfileSingleForm( ...
formSet = [ forM, forE  ] 
```

在模板中：

```
<form method="post" action="">
    {% for form in formSet %}
        {{ form }}
    {% endfor %}
</form> 
```

在视图方面，您应该向两种表单发送 POST 请求以检查`is_valid()`方法（“和”运算符就足够了：`if forM.is_valid() and forE.is_valid(): ...`

请注意，存在一种未记录的向模型表单添加额外字段的方法：[为模型表单额外字段指定小部件（Django）](https://stackoverflow.com/questions/12097825/specifying-widget-for-model-form-extra-field-django)

# java - 创建/返回未知大小的 int 数组

> ID：13807011
> 
> 赞同：1
> 
> 时间：2012-12-10T18:32:29.717
> 
> 标签：java

我有很多代码，但这是我认为的相关部分。

我有一个大小为 10 的数组作为存根，我事先不知道我可能会得到什么大小的数组，只是它不能大于 10。

```
 int[] arrTracker = new int[10];
    arrTracker = MyLibrary.SearchForABookISBN( true, AShelf, userParsedArr, aUserTitle );

    for ( int j = 0; j < 10; j++)
    {
        pln(AShelf[arrTracker[j]]);

    } 
```

理论上，在上面的代码中，一旦我有了我的数组，我就会遍历它并显示内容（这基本上就是我在 MyLibrary 对象数组中找到我正在搜索的书的位置。

“userParsedArr”是用户输入的 ISBN。

```
public int[] SearchForABookISBN ( boolean aFlag, Book[] anArray, int[] AnISBN, String aTitle ) 
{
    //This one was difficult.

        int length = anArray.length;
        int[] AnotherArr = new int[0];
        int[] AnotherArrTemp = new int[0];
        int[] AnotherArrNew = new int[0];

        boolean UFoundMe = false;

        if ( aFlag == true )
        {
            for ( int i = 0; i < length; i++)
            {
                //Assume we find the ISBN

                if ( ( anArray[i].Title.equals(aTitle) ) )
                {
                    int counter = 0;
                    for ( int j = 0;  j < 9; j++)
                    {
                        if (anArray[i].ISBN[j] == AnISBN[j])
                        {
                            counter++;
                        }
                        else
                        {
                            UFoundMe = false;
                            break;
                        }
                        if ( counter == 9 )
                        {
                            UFoundMe = true;
                        }

                    }
                    if ( UFoundMe == true )
                    {

                        //Create our 'main' tracker at 1 + size of previous array.
                        AnotherArrNew = new int[1 + AnotherArr.length];
                        if ( AnotherArrTemp.length > 0 )
                        {
                            //Copy values into a temp array.
                            //Make a new temp array
                            for ( int m = 0; m < AnotherArr.length - 1; m++ )
                            {
                                AnotherArrNew[m] = AnotherArrTemp[m];
                            }       
                        }           
                        AnotherArrNew[(AnotherArrNew.length) - 1] = i;

                        AnotherArrTemp = new int[AnotherArrNew.length]; 
                        for ( int n = 0; n < AnotherArr.length; n++ )
                        {
                            AnotherArrTemp[n] = AnotherArrNew[n];
                        }                           

                        System.out.println(anArray[i]);
                    }

                }
            }
        }
        return AnotherArrNew;
  }
} 
```

这里的基本想法是我创建一些空白数组，然后一旦我找到一本书，我会创建一个更大的新数组并丢弃旧数组，将内容传输到临时数组，然后仔细备份我之前所做的删除旧的新数组以使其更大。

所以大概说我有 10 本书，其中 3 本书的标题和 ISBN 相同。我希望返回一个 3 的数组，但我事先不知道，因为如果给我 20 本书并且它们都相同怎么办？

MyLibrary.SearchForABookISBN(true, AShelf, userParsedArr, aUserTitle).length 是否可以让我提前知道数组的大小？所以只需声明：

```
int aLength = MyLibrary.SearchForABookISBN( true, AShelf, userParsedArr, aUserTitle ).length
int[] arrTracker = new int[aLength]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:23:50.873

使用 Java 集合的强大功能获得更快、更易于维护的代码。将 ISBN 添加到您的`Book`:

```
class Book {
  private String isbn;
  private String title;
  public Book(int isbn, String title) {
    this.isbn = isbn;
    this.title = title;
  }
  @Override
  public String toString() {
    return "Book [isbn=" + isbn + ", title=" + title + "]";
  }     
} 
```

如果您可以将书籍数组重组为`Map`，则可以在恒定时间内按标题查找。作为一个额外的好处，代码更具可读性和可维护性，无需任何数组复制：

```
private static List<Book> search(Map<String, List<Book>> library, String title) { 
  return library.get(title); 
} 
```

以下是您可以如何使用它：

```
import static java.util.Arrays.asList;

import java.util.HashMap;
import java.util.List;
import java.util.Map;

public static void main(String[] args) {
    Map<String, List<Book>> library = new HashMap<>();
    library.put("a", asList(new Book("1", "a"), new Book("2", "a"))); 
    library.put("c", asList(new Book("3", "c")));
    System.out.println(search(library, "a"));
} 
```

这`new HashMap<>()`一点是 Java 7 代码，我认为尝试一下可能会很有趣。用于`HashMap<String, List<Book>>`以前的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:38:19.000

正如 jlordo 建议的那样：只需使用`ArrayList<Integer>`而不是`int[]`. 它实现了`List<T>`接口，所以你有像`add(T element)`,`remove(T Element)`和`remove(int index)`可能的方法`contains(T element)`。

ArrayList 实际上将由一个数组支持，一旦其容量用完，该数组就会调整大小，但您不需要知道这一点就可以使用它；）

# ruby - Espresso 框架总是将正文转换为字符串？

> ID：13807013
> 
> 赞同：1
> 
> 时间：2012-12-10T18:32:32.660
> 
> 标签：ruby, web-frameworks

我需要一个动作来返回一个`Array`（稍后将由中间件处理）。

但是，这总是将返回值转换为字符串：

```
def logs
  # logic here
  [1, 2, 3]
end 
```

如何告诉 Espresso 按原样退回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:57:10.177

好问题。

并且有一个很好的答案:)

使用`response.body`二传手：

```
def logs
  # logic here
  response.body = [1, 2, 3]
end 
```

# assembly - 互斥量与布尔值

> ID：13807018
> 
> 赞同：0
> 
> 时间：2012-12-10T18:32:50.030
> 
> 标签：assembly, mutex

过去两周左右我一直在处理线程，我想问有关线程的问题。

尽管我知道它们，但我从未处理过单个互斥体。为什么？因为我在这里使用非常简单的布尔开关（C++，示例线程）：

```
bool fakeMutex = false;
...
while (fakeMutex);
fakeMutex = true;
// do smth
fakeMutex = false; 
```

我一直在考虑这个问题，我开始相信它会失败的可能性很小（但我相信可能的机会）。

鉴于在组装中这些理论上应该是这样的：

```
Compare:
    CMP 0,[offset fakeMutex]
    JG Compare
    MOV [offset fakeMutex],1
    ; do smth
    MOV [offset fakeMutex],0 
```

这个互斥锁可能失败的唯一方法是如果 CMP 0,[offset fakeMutex] 在 fakeMutex 为假时执行，然后在另一个线程接管之后立即执行 MOV [offset fakeMutex],1 然后 OLD 线程返回作业执行程序集它不应该。

很有可能吗？

boost::thread 中定义的普通互斥锁有什么优点？它如何确保组件不能被拆分？它是否像上面示例中的布尔“互斥锁”一样快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:47:16.117

> 很有可能吗？

是的。我有点油嘴滑舌，因为可能性取决于您的程序、它运行的环境等。但是如果您希望您的代码正确，您应该使用互斥锁。

> boost::thread 中定义的普通互斥锁有什么优点？

您已经确定了主要优势：它是原子的和线程安全的。从而使您的代码正确。如果您希望您的程序确定性地输出结果（IE 是可靠的），您必须使用某种类型的线程安全习语。

> 它如何确保组件不能被拆分？

实现通常是特定于平台和硬件的。实现互斥锁的一种方法是使用特殊的汇编指令[“比较和交换”](http://en.wikipedia.org/wiki/Compare-and-swap)

> 它是否像上面示例中的布尔“互斥锁”一样快？

同步很可能会产生成本。为了从多线程程序中获得出色的性能，仅在严格必要时才同步状态，作为最后的手段，查看无锁数据结构。[这](http://software.intel.com/en-us/articles/intel-guide-for-developing-multithreaded-applications)是一个有用的指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:06:25.413

不要那样做。当检查变量然后发生上下文切换时，您很可能会遇到这种情况。始终使用原子操作。它可以以不同的方式完成，这完全取决于平台和操作系统。它可以在操作系统禁用中断或使用某些原子操作时完成（在 Intel 的情况下，如前所述，CMPXCHG 或使用 LOCK 前缀）。

# html - 无法让我的列表项居中

> ID：13807021
> 
> 赞同：2
> 
> 时间：2012-12-10T18:32:59.643
> 
> 标签：html, css, twitter-bootstrap

我有以下代码，我希望列表居中（现在它拉到左边）。知道为什么吗？

```
<div class="row" style="width:100%;text-align:center;">
<div class ="banner span12" style="padding-top: 0px; padding-bottom:0px;text-align:center;">
<p style="font-size:18px;padding-top:6px;"> Or Start Browsing the Library ... </p></center>
</div>
<br>
<br>
<ul class="nav nav-pills" style="text-align:center;">
<li class="active" style="text-align:center;">
    <a href ="#"> Library1 </a>
</li>
<li>
    <a href ="#"> Library2 </a>
</li>
<li>
    <a href ="#"> Library3 </a>
</li>
</ul> 
```

导航药丸 CSS：

```
.nav-pills > li > a {
  padding-top: 8px;
  padding-bottom: 8px;
  margin-top: 2px;
  margin-bottom: 2px;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
  -webkit-border-radius: 5px;
  -moz-border-radius: 5px;
  border-radius: 5px;
}
.nav-pills > .active > a,
.nav-pills > .active > a:hover {
  color: #ffffff;
  background-color: #0088cc;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:40:00.600

给它一个宽度并应用边距：0 auto;

```
ul.nav-pills {
    width: 300px;
    margin: 0 auto;
}

<div class="row" style="width:100%;text-align:center;">
<div class ="banner span12" style="padding-top: 0px; padding-bottom:0px;text-align:center;">
<p style="font-size:18px;padding-top:6px;"> Or Start Browsing the Library ... </p></center>
</div>
<br>
<br>
<ul class="nav nav-pills" style="text-align:center;">
<li class="active" style="text-align:center;">
    <a href ="#"> Library1 </a>
</li>
<li>
    <a href ="#"> Library2 </a>
</li>
<li>
    <a href ="#"> Library3 </a>
</li>
</ul> 
```

# magento - Magento 目录在重新索引后消失

> ID：13807024
> 
> 赞同：-1
> 
> 时间：2012-12-10T18:33:30.030
> 
> 标签：magento, catalog, reindex

我的一位客户今天早些时候尝试向产品添加一个名为“发货日期”的产品属性。他创建了属性，然后分配到默认属性集中。在他重新索引所有内容后，他意识到类别导航菜单已经消失了。然后他删除了添加的属性并再次重新索引，但没有任何运气。我现在正在调查它，我找不到任何问题。如果我搜索产品，我可以找到所有产品。但是我无法获得类别导航菜单或转到单个产品（在您询问之前，所有产品都已设置为同时显示在目录和搜索中）。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:07:41.897

好的，这就是我所做的。在我接受了 Sylvain 关于启用默认主题的建议后，很明显这与损坏的 XML 文件有关。幸运的是，我从一周前开始备份，所以我用该备份替换了所有主题 xml 文件。刷新缓存，现在我们又开始营业了。非常感谢您提供的所有提示。你们都在让这个世界成为一个可以忍受的居住地:-)

# c++ - RAWKEYBOARD 标志，检查哪些标志打开，还有 SHIFT、CTRL 和 ALT

> ID：13807027
> 
> 赞同：0
> 
> 时间：2012-12-10T18:33:48.620
> 
> 标签：c++, windows, raw-input

所以我正在使用 RAWINPUT 并且我试图弄清楚如何检查这个：

```
data.keyboard.Flags 
```

要查看哪些标志处于打开状态，我希望能够检查诸如向上键和向下键以及向左键和向右键之类的内容。

你需要做这样的事情：

```
if(data.keyboard.Flags == (RI_KEY_MAKE|RI_KEY_E0)) 
```

和

```
if(data.keyboard.Flags == (RI_KEY_BREAK|RI_KEY_E0)) 
```

我知道对于 SHIFT 键，我应该检查左侧的生成代码：0x2a 右侧：0x36

CTRL 和 ALT 键呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:34:05.800

您需要知道密钥的原始扫描码。他们的核心参考是这个[Word 文档](http://download.microsoft.com/download/1/6/1/161ba512-40e2-4cc9-843a-923143f3456c/scancode.doc)。有点难以理解，第 16 页的扫描码表是最有用的资源。

请注意如何小心使用 E0 标志。它用于在后来的键盘设计中添加的键。最初的 IBM PC 键盘总是有两个 shift 键，因此它们是通过没有 E0 的专用扫描码发送的。但是Right-Ctrl和Right-Alt是后来添加的，它们的扫描码分别是E0 1D和E0 38，左边是没有E0标志的1D和38。

# maven - 在 Nexus 中存储战争，名称中没有版本号

> ID：13807028
> 
> 赞同：0
> 
> 时间：2012-12-10T18:33:51.250
> 
> 标签：maven, nexus

maven 正在构建一场战争，它正在将战争上传到 nexus。我想让上传的战争名称中没有版本号。是否有一个 Maven 配置会剥离或不包括名称中的版本号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:04:06.080

Nexus 是一个版本化的数据存储。每个 Maven 模块都由一个 GAV 坐标唯一标识：

*   **组**ID
*   **神器**_****
***   **版本**_**

 **因此，您不能从 Maven 工件的名称中省略版本。

回问将是。你为什么要这样做？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-03T08:06:52.250

如前所述，您不能省略版本。但是，如果您希望部署工件以使最终战争名称与目标上下文匹配，您可以将战争命名为war-name##0.1.war。

例如，当您在 tomcat 下部署这样的战争时，目标上下文是 /war-name 但版本仍显示在 tomcat 管理器下。一目了然地查看部署了什么版本并且在每个部署之间具有一致的目标上下文非常有用。**

# unix - 使用不同名称查看的目录运行程序

> ID：13807030
> 
> 赞同：-1
> 
> 时间：2012-12-10T18:34:00.477
> 
> 标签：unix

有没有办法运行一个程序，并且只有在运行时它才会看到一些名称与其原始名称不同的目录？例如：

有一个目录，名称为：/home/user/somedir

但我们运行类似： $diralias --original /home/user/somedir --alias /home/user/somedir2 myProgram

这样“myProgram”将“/home/user/somedir”视为“/home/user/somedir2”。

此外，已经有一个名为“somedir2”的目录，但别名应该优先。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:39:16.953

使用这样的[ln 命令](http://unixhelp.ed.ac.uk/CGI/man-cgi?ln)在 Unix 中创建符号链接：

```
ln -s somedir somedir-alias 
```

# jquery - Jquery对chrome扩展弹出窗口的影响？

> ID：13807033
> 
> 赞同：2
> 
> 时间：2012-12-10T18:34:07.303
> 
> 标签：jquery, google-chrome, google-chrome-extension, popupwindow

我是制作 chrome 扩展的新手。我只是想构建一些简单的扩展来开始。但是我发现扩展中的弹出窗口在 jquery 中没有任何作用。尽管其他一些功能有效，但效果不可见。任何人都可以给我一个线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:51:49.923

我不确定你从哪里发现的`However I found that the popup window in the extension don't have any effect in jquery. Though some other functions work, the effect is not visible.`

Jquery 可以在弹出窗口中使用。

参考

*一）* [jQuery](http://code.jquery.com/jquery-1.8.3.js)

*b)* [浏览器动作](https://developer.chrome.com/extensions/browserAction.html)

*c)* [CSP](https://developer.chrome.com/extensions/contentSecurityPolicy.html)

**示例演示**

***清单.json***

在清单文件中注册浏览器操作

```
{
    "name": "Jquery Demo",
    "version": "0.0.1",
    "manifest_version": 2,
    "description": "This demonstrates how Jquery works in popup",
    "browser_action":{
        "default_popup":"popup.html",
        "default_icon":"screen.png"
    }
} 
```

***popup.html***

使用 Js 文件 a) Jquery b) 以建议的方式自定义文件以避免内联脚本 (CSP)。

```
<html>

    <head>
        <script src="jquery.js"></script>
        <script src="myjs.js"></script>
    </head>

    <body></body>

</html> 
```

***myjs.js***

我使用实时功能进行演示，您可以在此处使用所有支持的功能。

```
// You can use all methods of jquery here

//$(selector).live(events, data, handler); 
```

如果您需要更多信息，请与我们联系。

# java - 我想编写一个程序，它将在另一个程序中运行和做事

> ID：13807035
> 
> 赞同：-4
> 
> 时间：2012-12-10T18:34:11.413
> 
> 标签：java, c

我正在使用这个名为 fin builder 的程序，我想写一些东西，我猜用 C 或 Java 可以在 fin builder 中执行基本任务。这就像编写一个可以在 Photoshop 中绘制人脸的程序。我的问题是我应该使用哪种语言，是否有人对此有任何提示，我应该从哪里开始？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:38:04.110

这似乎是一个代码注入案例。您可能希望在正在运行的进程中注入代码以使其执行某些操作。

我用 C# 和 C++ 做过一次。但我相信你可以用很多语言做到这一点。不过我必须说，这不是一个简单的过程，尤其是当你第一次尝试这样做时。

因此，选择您的语言并使用所选语言四处寻找代码注入过程。

# metadata - 在选择页面模板时填充页面元数据架构

> ID：13807043
> 
> 赞同：5
> 
> 时间：2012-12-10T18:34:54.573
> 
> 标签：metadata, tridion, tridion-2011

在 Tridion 2011 - 实现以下目标的最佳方法是什么： 在创建编辑现有页面的新页面时，当编辑器选择页面模板时，我们是否可以自动为其设置关联的页面元数据架构。因此，基本上定义一个 PT 和元数据模式的一对一关联以使用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T18:41:10.777

我可以看到这些选项：

1.  事件处理程序，请参阅[此处](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_C44626C5618242FEAF8B98D2770E7E77)的文档（需要登录）
2.  [数据扩展器，请参阅此处](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_3B40E7C7F2334D9B9DAD12FA202EFAA7)的文档（需要登录）
3.  客户端 GUI 扩展

StackOverflow 和外部博客文章中的先前问题也涵盖了这些扩展点中的每一个。这些可以作为很好的附加“文档”，说明它们每个人的可能性/可行性。

所有这些都有自己的优点和缺点。哪一个最适合您实际上取决于您的确切要求，您必须对用户进行一些教育的意愿以及最终实施和维护它的开发人员的技能组合。

事件处理程序和数据扩展程序在服务器上运行并用 C# 编写，这意味着它们通常更容易开发和调试。客户端 GUI 扩展为您提供对用户界面的最全面控制，但这种控制是有代价的：对于大多数开发人员来说，它们具有更高的学习曲线。

***更新*** 要响应 GUI 中页面模板的更改，您可以使用以下内容：

```
var c = $display.getView().properties.controls;
$evt.addEventHandler(c.PageTemplate, 'change', function() { 
  console.log(c.PageTemplate.getValue()); // the newly selected Page Template
  c.MetaSchemaDropdown.setValue('tcm:10-2103-8'); // the corresponding Metadata Schema
}); 
```

# azure - Windows Azure 上的即用即付帐户包含哪个支持计划？

> ID：13807046
> 
> 赞同：2
> 
> 时间：2012-12-10T18:35:02.797
> 
> 标签：azure

我已经在 Windows Azure 上注册了一个即用即付帐户，但还没有购买任何东西。

但是，我创建了一张支持票，因为我无法从过期的试用订阅中移动存储。

我的问题是：在创建这张票的过程中，我是否隐含购买了支持计划？

在工单表格的底部有一个“支持计划：标准”通知。[虽然我从未尝试过购买此计划，但此页面](http://www.windowsazure.com/en-us/support/plans/)上的费用似乎为 300 美元/月。 ![在此处输入图像描述](../Images/582f0e719133b2523625dd0783382a04.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T17:25:23.403

Microsoft 刚刚创建了您在该页面上看到的支持计划，以前所有支持都是免费的。为了让人们在购买之前先试用，他们将在 2012 年 12 月 31 日之前赠送标准计划，这就是您看到该计划的原因。在此日期之后，除非您付费，否则您将无法获得支持票，您只能拥有官方的 MS 论坛。当然是这样。

[http://blogs.msdn.com/b/windowsazure/archive/2012/11/12/announcing-comprehensive-updates-to-windows-azure-customer-support-offerings-and-free-standard-support-till- 2012 年 12 月 31 日.aspx](http://blogs.msdn.com/b/windowsazure/archive/2012/11/12/announcing-comprehensive-updates-to-windows-azure-customer-support-offerings-and-free-standard-support-till-dec-31-2012.aspx)

# jquery - 使用 Google Direction API 的 Access-Control-Allow-Origin 不允许使用 Origin url

> ID：13807052
> 
> 赞同：2
> 
> 时间：2012-12-10T18:35:36.360
> 
> 标签：jquery, google-maps-api-3, access-control

我知道这个问题已经被问到并得到了回答，但它对我没有帮助。

这是我的 jQuery 代码：

```
var gmapsurl = 'http://maps.googleapis.com/maps/api/distancematrix/json?'+
                            'origins='+addr_origin+
                            '&destinations='+addr_destination+
                            '&mode=driving&language=hu&units=metric'+
                            '&key='+mykey+
                            '&sensor=false';
$.getJSON(gmapsurl, function(data) {
    alert( 'OK' );
}); 
```

现在我`Origin (my site url) is not allowed by Access-Control-Allow-Origin.`在浏览器中收到错误消息。但是如果我直接将这个 url 写入浏览器，那么我会得到一个 JSON 结构。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T18:37:45.573

您应该使用 Google Maps API 进行地理编码：

```
var geocoder = new google.maps.Geocoder();
var geocoderRequest = { address: "MountainView, CA" };
geocoder.geocode(geocoderRequest, function(results, status){
//do your result related activities here, maybe push the coordinates to the backend for later use, etc.
}); 
```

而不是通过 JSON 调用服务。当然，您应该在脚本中包含此内容以使用 Google Maps API：

```
<script src="http://maps.google.com/maps/api/js?sensor=false"></script> 
```

# jquery - 在 jquery 块中关闭编译

> ID：13807057
> 
> 赞同：2
> 
> 时间：2012-12-10T18:35:57.803
> 
> 标签：jquery, asp.net-mvc

我是 asp.net mvc4 的新手。我无法理解为什么我在 jquery 块的剃刀视图中关闭了条件编译。

```
var enableSteps=0;
$(document).ready(function () {
   var enableSteps = @ViewData["enableAllSteps"].ToString().ToLower();
}); 
```

我在`var enableSteps = @ViewData["enableAllSteps"].ToString().ToLower();`上面的这条线上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:38:47.453

这是一个误报。
Visual Studio 编辑器无法处理嵌套在 Javascript 中的 Razor 代码。
您的代码将正常工作。（除了你可能打算创建一个 Javascript 字符串文字）

# php - 如何创建可排序的导航项

> ID：13807059
> 
> 赞同：0
> 
> 时间：2012-12-10T18:36:03.457
> 
> 标签：php, class, recursion, navigation

我正在创建一个用户应该能够更改导航项顺序的站点。但是，导航项是从不同来源动态加载的，我不知道有多少导航项，也不知道我可以期待哪些项。我所知道的是我有多个这样的文件：

```
return array(
    array('Google', 'http://www.google.com'),
    array('StackOverflow', 'http://www.stackoverflow.com',
        array(
            array('Contact', 'contact.html'),
            array('Test', 'test.html')
        )
    ),
    array('Home', 'index.html')
); 
```

如您所见，这是一个菜单项树，其子项可以是任何层深。所有这些数组都必须组合到一个导航菜单中，并且文件可以经常更改。显然，如果项目不必是用户可排序的，这并不难。但是有了这个功能，我就是想不出一个有效的解决方案。特别是因为我不想将业务逻辑和表示混合在一起。

目前，我有以下代码（稍微简化）：

控制器：

```
$view = new \View('navigation.html');
$navigation = new mappers\Navigation();
$view->items = $navigation->fetchAll(); 
```

映射器\导航：

```
class Navigation {
    private $type;

    // Create a tree from:
    // $items: array(title, url, children); title = string; url = array / null / string; children = array / null
    // $order: url => array(position, children); position = integer; children = array / null
    // Pass $order by reference so that found items can be added
    private function buildTree($items, &$order) {
        $tree = array();

        foreach ($items as $item) {
            $uri = $item[1];

            // Get order
            if (isset($order[$uri])) {
                $position = $order[$uri][0];
                $childrenOrder = $order[$uri][1];
            } else {
                $order[$uri] = array(count($order), array()); // Create the item for this uri

                $position = $order[$uri][0];
                $childrenOrder = $order[$uri][1];
            }

            // Get children tree if specified
            if (isset($item[2])) {
                $children = $this->buildTree($item[2], $childrenOrder);
            } else {
                $children = null;
            }

            $tree[$position] = array($item[0], $uri, $children);
        }
        ksort($tree);   

        return $tree;
    }

    public function fetchAll() {
        $items = array();

        foreach (new \FilesystemIterator('navigation', \FilesystemIterator::SKIP_DOTS) as $file) {
            if ($file->isDir()) { // Ignore everything which isn't a directory
                $array = new \PersistentArray($file->getPathname() . '/items.php');
                foreach ($array as $item) {
                    $items[] = $item;
                }
            }
        }

        // Load the order settings
        $order = new \PersistentArray('order.php');

        // Build a tree of all navigation items in the right order
        $tree = $this->buildTree($items, $order);

        Save the order settings (have been changed, since $order is passed by reference)
        $order->save();

        return $tree;
    }
} 
```

导航.html：

```
$echo = '';
$echo = function($item) use($echo) { // Use a closure, in order not to pollute the global namespace
    printf('<li><a href="%s">%s</a>', $item[1], $item[0]);
    if (!empty($item[2])) {
        printf('<ul>%s</ul>', $echo($item[2]));
    }
    echo '</li>';
}

?>

<ul>
    <?php foreach ($items as $item) {
        $echo($item);
    } ?>
</ul> 
```

在这段代码`PersistentArray`中是一个从文件加载数组的简单类。此类的对象可以像任何数组一样访问。它们还提供了一种`save()`将数组写入文件的方法。稍后可以使用此类再次打开此文件。

上面的代码可以工作，但它的工作方式对我来说似乎效率很低。我在这段代码中有四个循环！更不用说引用和关闭非常“hacky”。但是我一直无法想出更好的方法来解决这个问题。

所以我的问题是：你能想出一个更好的方法吗？有没有常用的方法？感谢正手！

* * *

已保存订单数组的示例是：

```
return array(
    'index.html' => array(
        0 => 0,
        1 => array(
            'page1.html' => array(
                0 => 0,
                1 => array()
            ),
            'page2.html' => array(
                0 => 1,
                1 => array()
            )
        )
    ),
    'test.html' => array(
        0 => 1,
        1 => array()
    )
); 
```

# c++ - 在 C++ Builder 中编写驱动程序

> ID：13807062
> 
> 赞同：0
> 
> 时间：2012-12-10T18:36:13.467
> 
> 标签：c++, windows, driver, c++builder, c++builder-xe3

如何使用几天前刚到货的新 XE3 64 位编译器为 Windows 编写驱动程序。这甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T18:42:39.370

很可能是不可能的。即使你以某种方式成功地编译了代码，它也很可能会违反一大堆内核规则并导致诸如崩溃和冻结等令人讨厌的事情。

不要这样做。仅使用MS提供的WDK编译器进行驱动开发（从VS2012开始集成到VS中）。

# javascript - 如何在此脚本中淡入查询结果

> ID：13807063
> 
> 赞同：0
> 
> 时间：2012-12-10T18:36:22.060
> 
> 标签：javascript, jquery, fadein

我正在创建一个国家的虚拟地图，当您单击如下图所示的一个点时。现在，一切正常，就像您单击一个红点，出现有关相关区域的图像和描述，当单击其他红点时，前一个红点消失并出现一个新红点。完美的！唯一的问题是，然后您从下拉表单中选择一个城镇/区域，它只会弹出红点，但我还需要为该选定的城镇/区域显示图像和描述。

这是[jsFiddle](http://jsfiddle.net/bTWBh/)

要知道问题所在，你应该先点击一个红点，然后当你看到图像/描述弹出时，然后从下拉菜单中选择任何区域，即使你会看到点只出现，但描述/当您自动选择区域时，图像永远不会改变。

谢谢您的帮助

![在此处输入图像描述](../Images/474262be0a827632cdfe18fabafc2d2f.png)

这是 JS 代码，在下面，因为该网站不允许我只发布 jsFiddle 链接。

JS

```
$(document).ready(function() {
// begin Ready

    //...................................................
    // When the form changes
    $('#mapForm').change(function() {

        var selectedContinent = $('#mapForm option:selected').val();
        if (selectedContinent == 'ALL'){
            $('a.dot').slideDown(1000);

        }else{
            $('a.dot[continent = "'+selectedContinent+'"]').slideDown(1000);
            $('a.dot[continent != "'+selectedContinent+'"]').slideUp(1000);
            $('a.dott[continent = "'+selectedContinent+'"]').slideDown(1000);
            $('a.dott[continent != "'+selectedContinent+'"]').slideUp(1000);
        }

    });

    $('#mapFormm').change(function() {

        var selectedContinentt = $('#mapFormm option:selected').val();
        if (selectedContinentt == 'ALL'){

            $('a.dott').slideDown(1000);
        }else{
            $('a.dot[continent = "'+selectedContinentt+'"]').slideDown(1000);
            $('a.dot[continent != "'+selectedContinentt+'"]').slideUp(1000);
            $('a.dott[continent = "'+selectedContinentt+'"]').slideDown(1000);
            $('a.dott[continent != "'+selectedContinentt+'"]').slideUp(1000);
        }

    });

    // When a dot is clicked
    //...................................................
    $('a.dot').click(function(){

        $('a.dot').removeClass('selected');
        $(this).addClass('selected');

        var city = '.city_detail#' + $(this).attr('city');
        var htmlCode = $(city).html();

        $('.detail_container').fadeOut(500, function(){
            $('.detail_container .city_detail').html(htmlCode);
            $('.detail_container').fadeIn(500);
        });

    });
    $('a.dott').click(function(){

        $('a.dott').removeClass('selected');
        $(this).addClass('selected');

        var city = '.city_detail#' + $(this).attr('city');
        var htmlCode = $(city).html();

        $('.detail_container').fadeOut(500, function(){
            $('.detail_container .city_detail').html(htmlCode);
            $('.detail_container').fadeIn(500);
        });

    });

// end Ready
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:51:03.097

当您在列表中选择元素时，只需触发元素的点击事件

```
// When the form changes
$('#mapForm').change(function() {

    var selectedContinent = $('#mapForm option:selected').val();
    if (selectedContinent == 'ALL'){
        $('a.dot').slideDown(1000);

    }else{
        $('a.dot[continent = "'+selectedContinent+'"]').slideDown(1000, function(){$(this).trigger('click');});
        $('a.dot[continent != "'+selectedContinent+'"]').slideUp(1000);
        $('a.dott[continent = "'+selectedContinent+'"]').slideDown(1000, function(){$(this).trigger('click');});
        $('a.dott[continent != "'+selectedContinent+'"]').slideUp(1000);
    }

});

$('#mapFormm').change(function() {

    var selectedContinentt = $('#mapFormm option:selected').val();
    if (selectedContinentt == 'ALL'){

        $('a.dott').slideDown(1000);
    }else{
        $('a.dot[continent = "'+selectedContinentt+'"]').slideDown(1000, function(){$(this).trigger('click');});
        $('a.dot[continent != "'+selectedContinentt+'"]').slideUp(1000);
        $('a.dott[continent = "'+selectedContinentt+'"]').slideDown(1000, function(){$(this).trigger('click');});
        $('a.dott[continent != "'+selectedContinentt+'"]').slideUp(1000);
    }

}); 
```

查看工作[**演示**](http://jsfiddle.net/bTWBh/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T18:49:32.580

您需要`click`在新出现的元素上触发 a （*第一个是明智的*）

```
$('#mapForm').change(function() {
    var selectedContinent = $('#mapForm option:selected').val();
    if (selectedContinent == 'ALL'){
        $('a.dot').slideDown(1000);

    }else{
        $('a.dot[continent = "'+selectedContinent+'"]').slideDown(1000).first().click();
        $('a.dot[continent != "'+selectedContinent+'"]').slideUp(1000);
        $('a.dott[continent = "'+selectedContinent+'"]').slideDown(1000);
        $('a.dott[continent != "'+selectedContinent+'"]').slideUp(1000);
    }

});

$('#mapFormm').change(function() {

    var selectedContinentt = $('#mapFormm option:selected').val();
    if (selectedContinentt == 'ALL'){

        $('a.dott').slideDown(1000);
    }else{
        $('a.dot[continent = "'+selectedContinentt+'"]').slideDown(1000).first().click();
        $('a.dot[continent != "'+selectedContinentt+'"]').slideUp(1000);
        $('a.dott[continent = "'+selectedContinentt+'"]').slideDown(1000);
        $('a.dott[continent != "'+selectedContinentt+'"]').slideUp(1000);
    }

}); 
```

# php - 清除 PhpExplorer 窗口

> ID：13807064
> 
> 赞同：1
> 
> 时间：2012-12-10T18:36:26.263
> 
> 标签：php, eclipse

我的 Eclipse 上的 PhpExplorer 窗口显示了曾经打开的每个项目。我能够完成关闭项目，但我无法让那个文件夹远离我的眼睛。有没有一种类似于 DOS 上的“cls”的方法，它会清除此窗口中的所有项目，然后我只能打开我想要的项目。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:30:57.987

这是我发现的

第 1 步：单击 Project Explorer 选项卡的右上角并打开上下文菜单。从菜单中选择过滤器选项。

第 2 步：从 Filter 中检查 Closed Projects 选项，然后按 Ok

来自：- [http://viralpatel.net/blogs/hide-closed-projects-eclipse-project-explorer-view/](http://viralpatel.net/blogs/hide-closed-projects-eclipse-project-explorer-view/)

# php - PHP 中的 JSON 和回调

> ID：13807072
> 
> 赞同：0
> 
> 时间：2012-12-10T18:37:13.333
> 
> 标签：php, mysql, json, mamp

这是我的 PHP 页面，index.php 在名为 testradio1 的 localhost 子文件夹中：

```
<link rel="stylesheet" href="http://www.tfmradio.co.uk/layout/widget/LargeScheduleWidget/css/styles.css" />

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>

<script type="text/javascript">

var doFades = true;

var BauerStations = {
    Schedule : {}
};

$(document).ready(function(){

    BauerStations.Schedule.days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']

    BauerStations.Schedule.Show = function () {
        _s = null;
        _startDate = null;
        _endDate = null;
        this.days = BauerStations.Schedule.days;
        _selector = '';

        this.setShow = function(s) {
            this._s = s;

            this._startDate = new Date( parseInt(s.startminutes, 10) * 1000);
            this._endDate = new Date(parseInt(s.endminutes, 10) * 1000 ); 

        };

        this.getEndDate = function(){
            return this._endDate;
        }

        this.getStartDate = function(){ 
            return this._startDate;
        }

        this._getShowDay = function (){
            return this.days[this.getStartDate().getDay()];
        };

        this._getShowUnitsTaken = function(){
            // if it's the same day
            return this._getEndUnits() - this._getStartUnits();
        };

        this._getEndUnits = function(){     
            if(this.getEndDate().getHours() == 0)
            {
                //console.log(this._s.longname  +' ends at midnight');
                return 48;
            }

            return this.getEndDate().getMinutes() !== 0 ? (this.getEndDate().getHours() * 2) : (this.getEndDate().getHours() * 2);
        };

        this._getStartUnits = function(){
            if(this.getStartDate().getHours() == 0)
            {
                return 0;
            }

            return this.getStartDate().getMinutes() !== 0 ? (this.getStartDate().getHours() * 2) : (this.getStartDate().getHours() * 2);
        };

        this.getCellPositions = function() {
            return {
                'start' : this.getStartDate(),
                'end'   : this.getEndDate(),
                'colIndex' : this.getStartDate().getDay() + 2,
                'startUnits' : this._getStartUnits(),
                'endUnits' : this._getEndUnits(),
                'unitsTaken' : this._getShowUnitsTaken()
            }
        };

        this.pad = function(number){
            return number < 10 ? '0'+number : number; 
        };

        // return the table cell html.
        this.toHtml = function () {

            var d = new Date();
            var units = this._getStartUnits();

            var rowspan = this._getShowUnitsTaken();        
            var desc = this._s.description;
            var name = this._s.longname;

            var starttime   = this.pad(this.getStartDate().getHours()) + ':' + this.pad(this.getStartDate().getMinutes());
            var endtime     = this.pad(this.getEndDate().getHours()) + ':' + this.pad(this.getEndDate().getMinutes());

            var site = this._s.websitelink;

            var cls = this.isActive() ? 'current-program' : '';

            var isToday = this.getStartDate().getDay() === d.getDay() ? 'active-program' : '';

            var html = '<td class="schedule-show ' + isToday + ' ' + cls + '" rowspan="' + rowspan + '" data-start="' + this.getStartDate() + '" data-end="' + this.getEndDate() + '">';
                html += '<div>';
                html += '<a href="' + site + '" title="' + desc + '">' + name + '</a>';
                html += '</div>';
                if(doFades)
                {
                    html += '<div class="schedule_details clearfix" style="display:none;">';
                    html += '<img width="105px" height="105px" alt="' + desc + '" src="' + this._s.showimage + '">';
                    html += '<strong>' + name + '</strong>';
                    html += '<p>' + desc + '</p>';
                    html += '<span>' + starttime + ' - ' + endtime +'</span>';
                    html += '</div>';
                }
                html += '</td>';            

            return html;
        };

        this.setTableSelector = function(sel){
            this._selector = sel;
        };

        // check if we should add the active class.
        this.isActive = function(){
            var t = new Date();

            return  t >= this.getStartDate() && t <= this.getEndDate();
        };
    };

    BauerStations.Schedule.ScheduleGen = function(){

        return {
            insertShow : function(show) {
                var p = show.getCellPositions();

                $('tr#units-' + p.startUnits).append(show.toHtml());
            },

            init : function (stationName){
                var self = this;

                // load the schedule.
                $.getJSON('http://127.0.0.1/radio1/schedule.php?callback=?', {
                    name: 'MyStation'
                }, function(json){
                    // loop each show and append to our giant table.
                    // this is well sick.

                    if(json.success === false)
                    {
                        $('.content-inner table').remove();

                        $('<div>errors</div>').appendTo('.content-inner');
                    }
                    else
                    {
                        var currentDay = '';
                        var day = 0;
                        // highlight the current time..
                        var d = new Date();
                        var weekStart = new Date();

                        weekStart.setDate(d.getDate()-6-(d.getDay()||7));

                        $.each(json.data.schedule, function(i, broadcast){

                            var dStart = new Date( parseInt(broadcast.startminutes, 10) * 1000);
                            var dEnd = new Date(parseInt(broadcast.endminutes, 10) * 1000 ); 

                            /*// transform to a show object defined above, if the show spans 2 days we create two show objects.
                            // IF THE SHOW STARTS/ENDS AT MIDNIGHT, DON'T SPLIT IT.
                            if(dStart.getHours() !== 0 && dEnd.getHours() !== 0 && dStart.getDate() != dEnd.getDate())
                            {
                                var showOne = new BauerStations.Schedule.Show();
                                showOne.setShow(broadcast);

                                // set to midnight 
                                showOne.getEndDate().setHours(0);
                                showOne.getEndDate().setMinutes(dStart.getMinutes());

                                // append first half of show.
                                self.insertShow(showOne);

                                // handle second half.
                                var showTwo = new BauerStations.Schedule.Show();
                                showTwo.setShow(broadcast);

                                showTwo.getStartDate().setDate(showTwo.getStartDate().getDate() + 1);
                                showTwo.getStartDate().setHours(0);
                                showTwo.getStartDate().setMinutes(dEnd.getMinutes());

                                //console.log('2nd Half Start: ' + showTwo.getStartDate());
                                //console.log('2nd Half End: ' + showTwo.getEndDate());

                                self.insertShow(showTwo);

                            }
                            else
                            {*/
                                var show = new BauerStations.Schedule.Show();

                                show.setShow(broadcast);
                                show.setTableSelector('table#schedule');

                                // add the show to the table. Thankfully the order these come out the API means they get added 
                                // in the right place. So don't change the schedule builder code!

                                self.insertShow(show);
                            //}

                        });

                        var days = BauerStations.Schedule.days;     

                        // apply the current day / time classes 
                        $('th:contains('+ days[d.getDay()]+')').addClass('active');

                        $('td.time').each(function(i, cell){
                            // get the value, convert to int. 
                            var hours = $(cell).html().split(':')[0];

                            // compare the hours with now, add class if matched. 
                            if(parseInt(hours, 10) === d.getHours())
                            {
                                $(cell).addClass('current_time');
                            }
                        });
                    }

                    if(doFades)
                    {
                        // apply events to show info fade in / out.
                        $('td.schedule-show').hover(function(){
                            $(this).find('.schedule_details').fadeIn('fast');
                        }, function(){
                            $(this).find('.schedule_details').fadeOut('fast');
                        });
                    }
                });

            }
        };
    }();

    BauerStations.Schedule.ScheduleGen.init();

});
</script>

<!-- ============================================= END Navigation =============================================-->          

          <div class="content-inner">
                                              <div class="row">
          <div class="column size-10">
          <div class="large-schedule-widget main-col main-col-large widgetbox">
                     <table class="schedule-table">
                <!-- column headers -->
                <thead>
                    <tr>
                        <th class="hide">Units</th>
                        <th>Hours</th>
                        <th>Monday</th>
                        <th>Tuesday</th>
                        <th>Wednesday</th>
                        <th>Thursday</th>
                        <th>Friday</th>
                        <th>Saturday</th>
                        <th>Sunday</th>
                    </tr>
                </thead>
                <tbody>

                    <tr id="units-0">
                        <td class="hide">0</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">00:00</td>
                        <!-- start polling days -->

                        <!-- finish echo a row for each of the 48 units -->
                    </tr>
                    <tr id="units-1">
                        <td class="hide">1</td>
                        <!-- Every other row echo an hour block -->
                    </tr>

                    <!-- echo a row for each of the 48 units -->
                    <tr id="units-2">
                        <td class="hide">2</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">01:00</td>
                        <!-- start polling days -->

                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-3">
                        <td class="hide">3</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->                 
                    </tr>

                    <tr id="units-4">
                        <td class="hide">4</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">02:00</td>
                    </tr>

                    <tr id="units-5">
                        <td class="hide">5</td>
                        <!-- start polling days -->

                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-6">
                        <td class="hide">6</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">03:00</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-7">
                        <td class="hide">7</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-8">
                        <td class="hide">8</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">04:00</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-9">
                        <td class="hide">9</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-10">
                        <td class="hide">10</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">05:00</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-11">
                        <td class="hide">11</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-12">
                        <td class="hide">12</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">06:00</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-13">
                        <td class="hide">13</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-14">
                        <td class="hide">14</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">07:00</td>
                        <!-- start polling days -->
                    <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-15">
                        <td class="hide">15</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-16">
                        <td class="hide">16</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">08:00</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-17">
                        <td class="hide">17</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-18">
                        <td class="hide">18</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">09:00</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-19">
                        <td class="hide">19</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-20">
                        <td class="hide">20</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">10:00</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-21">
                        <td class="hide">21</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-22">
                        <td class="hide">22</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">11:00</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-23">
                        <td class="hide">23</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-24"> 
                        <td class="hide">24</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">12:00</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-25">
                        <td class="hide">25</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-26">
                        <td class="hide">26</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">13:00</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-27">
                        <td class="hide">27</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-28">
                        <td class="hide">28</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">14:00</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-29">
                        <td class="hide">29</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-30">
                        <td class="hide">30</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">15:00</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-31">
                        <td class="hide">31</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-32">
                        <td class="hide">32</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">16:00</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-33">
                        <td class="hide">33</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-34">
                        <td class="hide">34</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">17:00</td> 
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-35">
                        <td class="hide">35</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-36">
                        <td class="hide">36</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">18:00</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-37">
                        <td class="hide">37</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-38">
                        <td class="hide">38</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">19:00</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-39">
                        <td class="hide">39</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-40">
                        <td class="hide">40</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">20:00</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-41">
                        <td class="hide">41</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-42">
                        <td class="hide">42</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">21:00</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-43">
                        <td class="hide">43</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-44">
                        <td class="hide">44</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">22:00</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-45">
                        <td class="hide">45</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-46">
                        <td class="hide">46</td>
                        <!-- Every other row echo an hour block -->
                        <td class="time" rowspan="2">23:00</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-47">
                        <td class="hide">47</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>

                    <tr id="units-48">
                        <td class="hide">48</td>
                        <!-- start polling days -->
                        <!-- finish echo a row for each of the 48 units -->
                    </tr>                   

                </tbody>
            </table>
</div> <!-- end .main-col -->
    </div> 
```

这是来自 radio1 目录的 JSON 文件，名为 schedule.php：

```
<?php

header('Content-Type: application/json; charset=utf-8');
$link = mysql_pconnect("localhost", "testing", "test") or die("Could not connect");
mysql_select_db("radio1") or die("Could not select database");

$arr = array();

$rs = mysql_query("SELECT * FROM schedule1");

while($obj = mysql_fetch_object($rs)) {
$arr[] = $obj;
}
echo '{"success":true,"error":"","data":{"schedule":['.json_encode($arr, $obj).']}}';
    ?> 
```

JSON 可以很好地显示为*单个文件*，但我无法模拟在 [此站点](http://radioplayer.bauerradio.com/schedule.php?callback=?&name=TFM)和[此](http://www.tfmradio.com/on-air/station-schedule/)站点上看到的效果。我正在尝试这样做：[错误消息显示在 php / JSON 中](http://radioplayer.bauerradio.com/schedule.php?callback=?&name=)，但遇到了一些麻烦。

我已经成功将 MySQL 数据转换为 JSON。

我正在使用受版权保护的材料，但***仅用于非商业、教育目的***，尽管我已经在某种程度上使用 JSON 工作（我几乎可以做基本的 json_encode）。

我怎样才能有效地解决这个问题？所有帮助将不胜感激。

我同时使用 WAMP 和 MAMP，一台装有 Windows 7 的机器，一台装有 Mac OS X 10.6.8 的机器，这是一个测试站点。

我希望我已经为您解释得足够好，我已经尝试自己学习这一点，但需要一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:25:09.000

要通过 json 报告错误，可以添加如下函数：

```
function reportError($message)
{
   die(json_encode(array('success'=>false, 'error'=>$message)));
} 
```

然后像这样修改你的代码：

```
$link = mysql_pconnect("localhost", "testing", "test") or reportError("Could not connect");
mysql_select_db("radio1") or reportError("Could not select database"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:47:51.890

尝试 mysql_fetch_assoc($rs) 而不是 mysql_fetch_object()，并且在 json_encode 中只使用一个参数...

```
$rs = mysql_query("SELECT * FROM schedule1");

while($obj = mysql_fetch_assoc($rs)) {
    $arr[] = $obj;
}
echo '{"success":true,"error":"","data":{"schedule":['.json_encode($arr).']}}'; 
```

# git - Git：origin/head/master 卡在分支上

> ID：13807077
> 
> 赞同：2
> 
> 时间：2012-12-10T18:37:24.843
> 
> 标签：git

今天我们的 cloudforge git 存储库遇到了一些问题。在获得支持票后，他们声称已经“重新同步”了它。

最重要的是，我们是一个在不同平台上拥有不同 git 版本的开发人员团队。

用户 Paul 尝试使用 TortoiseGit、git gui 和 git bash 的组合来提交/推送。令我惊讶的是，他似乎创建了一个分支并自己再次合并它。

但是现在 origin/head ， origin/master 似乎卡在分支而不是最新的。我很困惑。HEAD不应该在上面吗？

![在此处输入图像描述](../Images/5bcf3b66fdbf1ae35820066042ac6a60.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:37:42.200

好消息。我不知道如何在 windows 机器上设置设置，但告诉他确保推入`origin master`而不只是`master`.

这似乎已经自动解决了。我会反对这一点，并在必要时更新这个答案。

![在此处输入图像描述](../Images/825be67fd5293a7a3d4edec390046390.png)

# matlab - 3D 中两个向量的角平分线

> ID：13807078
> 
> 赞同：1
> 
> 时间：2012-12-10T18:37:31.870
> 
> 标签：matlab, math

我不知道如何计算 3D 中两个向量（由 3 个点定义）的角平分线。例如：我的观点是：

```
P1=[0 0 0];
p2=[26.94,-6.68,42.76];
P3=[7.2804  -11.1231   46.6817]; 
```

p2 是角平分线的起点。

![在此处输入图像描述](../Images/07358eb773af8a28852c5aec9562f753.png)

```
p1=[0 0 0];
p2=[26.94,-6.68,42.76];
p3=[7.2804  -11.1231   46.6817];

V1=[(p1(1)-p2(1)) (p1(2)-p2(2)) (p1(3)-p2(3))];
V2=[(p2(1)-p3(1)) (p2(2)-p3(2)) (p2(3)-p3(3))];

V1=V1/norm(V1);
V2=V2/norm(V2);

Bisector=V1+V2;
figure
hold on

plot3([p3(3),p2(3)],[p3(2),p2(2)],[p3(1),p2(1)],'Color','r','LineWidth',2)
plot3([p1(3),p2(3)],[p1(2),p2(2)],[p1(1),p2(1)],'Color','r','LineWidth',2)

plot3([p2(3),Bisector(3)],[p2(2),Bisector(2)],[p2(1),Bisector(1)],'Color','y','LineWidth',2) 
```

![在此处输入图像描述](../Images/41caa6219657856b6cd892de52b72737.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T18:46:53.533

标准化向量，然后将它们相加。合成向量平分其他两个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:20:57.507

您在上面的代码中有一些错误。这应该解决它。

```
V1=[(p1(1)-p2(1)) (p1(2)-p2(2)) (p1(3)-p2(3))];
**V2=[(p3(1)-p2(1)) (p3(2)-p2(2)) (p3(3)-p2(3))];**

V1=V1/norm(V1);
V2=V2/norm(V2);

Bisector=V1+V2;
figure
hold on

plot3([p3(3),p2(3)],[p3(2),p2(2)],[p3(1),p2(1)],'Color','r','LineWidth',2)
plot3([p1(3),p2(3)],[p1(2),p2(2)],[p1(1),p2(1)],'Color','r','LineWidth',2)

**plot3([p2(3),Bisector(3)+p2(3)],[p2(2),Bisector(2)+p2(2)],[p2(1),Bisector(1)+p2(1)],'Color','y','LineWidth',2)**
```

**注意粗体字**的两行。

第一个问题本质上是一个符号问题。你需要翻译你的向量，所以`p2`在原点。所以，得到`V1`和`V2,`你分别减去`p2`和。您在计算时执行此操作，但您正在计算而不是.`p1``p3``V1``V2=p2-p3``V2=p3-p2`

第二个问题是您的向量`Bisector`相对于放置在的原点进行平移`p2`。因此，您需要将其转换回原始坐标系。这只需添加`p2`到您的`Bisector`矢量以进行显示即可。这就是现在在最后一行中所做的。

# c# - 使用 SQL Server 2005 从路径加载文件的问题

> ID：13807079
> 
> 赞同：-1
> 
> 时间：2012-12-10T18:37:30.947
> 
> 标签：c#, .net, sql-server, xml, file-io

我已经完成了一个 .Net Web Service Client 来通过它发送文件并且它运行顺利；但是当我从 SQL Server 2005 的存储过程中使用该应用程序时，如下所示：

exec master.dbo.xp_cmdshell 'C:\folder\myapp user@domain.com Application "\192.168.1.200\folder\2012\12\file.xml"'

我收到此错误：

```
Unhandled Exception: System.UnauthorizedAccessException: Access to the path '\\192.168.1.200\folder\2012\12\file.xml' is denied.
at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath) 
NULL
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options)
   at System.IO.StreamReader..ctor(String path, Encoding encoding, Boolean detectEncodingFromByteOrderMarks, Int32 bufferSize)
   at System.IO.StreamReader..ctor(String path, Encoding encoding)
   at System.IO.File.InternalReadAllText(String path, Encoding encoding)
   at System.IO.File.ReadAllText(String path)
   at myapp.Program.Main(String[] args) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:43:26.843

```
Access to the path '\\192.168.1.200\folder\2012\12\file.xml' is denied. 
```

SQL-Server 的服务帐户没有访问此文件夹的权限。您可以尝试更改 SQL-Server 的帐户（用户），或将文件放在可以访问的位置。

# wcf - 如何让服务器的两个客户端传输文件

> ID：13807090
> 
> 赞同：1
> 
> 时间：2012-12-10T18:38:19.537
> 
> 标签：wcf, communication, file-transfer, channel

在 WCF 中，我究竟需要如何让服务器中的两个客户端（例如连接到某种聊天室的两个人）能够在数据不通过服务器本身的情况下相互传输文件？

有没有办法通过服务器将彼此的回调通道传递给彼此，以便他们可以互相调用可能包含文件传输方法的各自的回调方法？

我对此有点模糊。同样，如果可以避免，我不希望数据必须传输到服务器，而是直接在两个客户端之间传输。

编辑：

我已经从逻辑上弄清楚了我打算如何做到这一点。我有两个客户端连接到聊天服务器。想要发送文件的客户端使用不同的合约创建一个完全独立的 ServiceHost，并在服务器上执行一个方法，要求将文件发送给特定用户。然后服务器通过询问目标客户端是否愿意接受来响应。传递的信息是地址、绑定和合同，或者至少是地址和其他所有内容都是假设的，因为它们都保存在同一个程序集中。

当客户端接受时，他使用聊天服务器提供的信息连接到新服务。这在两个客户端之间创建了一个全新的连接，并从等式中删除了聊天服务器。

我现在遇到的问题是，我无法自动获取最初发出文件传输请求的客户端的 IP 地址，因此我无法将其传递给其他客户端以连接到他的服务。我已经尝试了描述的方法来使用 OperationContext 消息属性获取 IP 地址并提取 IP，但它没有提供我需要的 WAN IP 地址。

其他聊天服务如何做到这一点？他们是通过whatismyip地址或他们自己的网站等网站提出请求，首先拉取客户端的IP地址吗？

如果我无法确定 IP 地址，那么我将不得不让用户手动输入他自己的 IP 地址，这看起来很笨拙。

有任何想法吗？

# json - 如何使用 angularjs 处理来自 json 数据的自定义日期格式？

> ID：13807091
> 
> 赞同：0
> 
> 时间：2012-12-10T18:38:29.037
> 
> 标签：json, rest, date, angularjs

我有一个 angularjs 服务：

```
angular.module('myApp.services', ['ngResource'])
.factory('Scheduler', function ($resource) {
    return $resource('/api/scheduler/:id', {id:'@id'}, {
        'get' :{method:'GET', isArray:false},
        'save' :{method:'PUT'}
    });
}) 
```

它返回以下 json：

```
{
    'start': '08:00:00',
    'end': '21:30:00',
    'offset': 5
} 
```

angularjs 中是否有首选方法将 js 日期对象中的“开始日期”和“结束日期”转换为字符串，然后将其“保存”回 Web 服务？

某种之前被调用的函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:55:57.357

如果服务目前不支持`$resource`，请改用 $http。`$http`你可以拥有请求和响应转换器。

# java - 错误：java.util.ConcurrentModificationException

> ID：13807092
> 
> 赞同：0
> 
> 时间：2012-12-10T18:38:36.970
> 
> 标签：java, list, struts2, concurrentmodification, foreach

我有一个网格，用户从中选择行，当单击一行时，它的 id 将发送到我的操作类`AddBookToSession.java`，然后将列表返回到我的 jsp 页面`invoice.jsp`

`java.util.ConcurrentModificationException`当用户从我的网格中选择一行时， 我收到错误。

我读了这个[类似的问题](https://stackoverflow.com/questions/8189466/java-util-concurrentmodificationexception)，但我仍然无法解决我的问题。

我的问题是：为什么我收到`java.util.ConcurrentModificationException`错误以及如何解决这个问题。请帮我解决这个问题。

*控制台错误：*

```
 Dec 10, 2012 11:37:30 PM org.apache.catalina.core.ApplicationDispatcher invoke
   SEVERE: Servlet.service() for servlet jsp threw exception
   java.util.ConcurrentModificationException
    at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:819)
    at java.util.ArrayList$Itr.next(ArrayList.java:791)
    at org.apache.struts2.components.IteratorComponent.end(IteratorComponent.java:334)
    at org.apache.struts2.views.jsp.IteratorTag.doAfterBody(IteratorTag.java:87)
       -------------------
        ------------------ 
```

*发票.jsp*

```
 <s:if  test="#session['BOK'].size() > 0"> 
         <table width="100%" class="userTable" valign="top" border="0"> 
          <s:iterator value="#session.BOK" status="userStatus">
       <tr class="<s:if test="%{#userStatus.odd == true}">odd</s:if> <s:else>even</s:else>">
             <td width="80%"><s:property value="bookTitile" /></td>
                 <td align="right" width="20%">
                 <s:url id="cancelURL" action="RemovebooksFromSession" namespace="/admin/setups/secure/jspHomepage/bookstransaction">
                         <s:param name="bkid" value="%{id}"></s:param>
                  </s:url>
                <sj:a href="%{cancelURL}" targets="myAdvanceDivBoxx">Rem</sj:a></td>
        </tr>
         </s:iterator>
         </table> 
         </div>
     </s:if> 
```

*AddBookToSession.java*

```
 public String execute() 
    {  
        String bookid = request.getParameter("bid"); 
        String qnty=dao.getquantityById(Integer.parseInt(bookid));

        if(qnty.equals("0")||qnty.equals("")||qnty.equals("null")){
            return SUCCESS;
        } 
        Bookdetails book = dao.listBookDetailsById(Integer.parseInt(bookid));
        books = (ArrayList) session.get(BillTransactionBooksConstants.BOK);
        if ( books == null ) books = new ArrayList<Bookdetails>();
        boolean already_exists = false;
        for ( Bookdetails b : books ) 
        {
              if ( Integer.toString(b.getId()).equals(bookid))
            {
                already_exists = true; 
                break;
            }
        }
        if (book != null && !already_exists  ) 
        { 
            books.add(book);
            System.out.println("books size"+books.size()); 
            session.put(BillTransactionBooksConstants.BOK,books);
        }
        return SUCCESS;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:49:15.753

从根本上说，您正在修改一个对象，而其他一些对象取决于第一个对象的状态以保持不变。

当在某种集合对象上使用非修改安全的迭代器，然后修改集合时，这种情况最常见。

我的 JSP 太生疏了，无法浏览您的源代码，但我看到一些您似乎在使用迭代器的情况，而您的 JSP 中的那个看起来最可疑。

（我相信当您使用多线程以非线程安全的方式管理集合对象时也会发生此错误。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:55:52.167

页面可能在您的代码执行“books.add(book);”时刷新。在这种情况下，您将在其他人使用它的同时修改集合时遇到异常。

是否可以修改您的代码，以便您在 AddBookToSession 中修改的“书籍”是内部书籍列表的副本。

```
books = new ArrayList<Bookdetails>((ArrayList) session.get(BillTransactionBooksConstants.BOK);); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T08:08:38.230

异常堆栈跟踪指向`s:iterator`您的 jsp 中抛出异常的位置。这意味着，当该元素遍历图书列表时，另一段代码会从列表中添加或删除。这可能是您的 Java 代码，或其他一些代码（例如`RemovebooksFromSession`）。

查看您的代码并尝试确定是否有可能在构建您的 jsp 页面时运行其他代码。

您发布的代码无法为您提供更多帮助。

# iphone - Spotify iOS 搜索功能

> ID：13807093
> 
> 赞同：-2
> 
> 时间：2012-12-10T18:38:44.143
> 
> 标签：iphone, ios, xcode, ipad, spotify

我正处于为 iOS 创建自己的 spotify 应用程序的早期阶段，我希望能够在表格视图中搜索艺术家、专辑或歌曲等。谁能指出我正确的方向？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:03:17.357

在 iOS 上，您应该使用[CocoaLibSpotify](https://github.com/spotify/cocoalibspotify)。该`SPSearch`对象是您所需要的 - 它会为您返回与给定搜索匹配的一系列曲目或艺术家或专辑，您可以像填充其他任何内容一样使用它们填充 TableView。

# javascript - 重新排列 JavaScript 字符串组件

> ID：13807094
> 
> 赞同：-4
> 
> 时间：2012-12-10T18:38:44.003
> 
> 标签：javascript

我可以编写一个函数来接收由数字或由“|”分隔的“对”组成的字符串吗 字符并产生如下所示的对象？每对都有其两个组件在内部用逗号分隔。

例子：

```
objectify("a,dog|b,cat|z,rat")  -->  {a: "dog", b: "cat", z: "rat"}
objectify("one,uno|two,dos")    -->  {one: "uno", two: "dos"} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:41:49.123

```
function objectify(str) {
    var obj = {},
        arr = str.split('|');
    for (i=0; i<arr.length;i++) {
        var parts = arr[i].split(',');
        obj[parts[0]] = parts[1];
    }
    return obj;
} 
```

[**小提琴**](http://jsfiddle.net/zVp5A/)

创建一个空对象，拆分字符串`|`并遍历部分，再次拆分逗号，并将结果用作对象中的键/值对，并在完成后返回对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:42:47.140

```
function objectify (str) {
    var pairs = str.split("|"),
        res = {};
    for (var i=0; i<pairs.length; i++) {
        var parts = pairs[i].split(",");
        res[parts.shift()] = parts.join(",");
    }
    return res;
} 
```

查看[数组](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)和[字符串](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String)函数。

# c++ - C ++内联函数是否防止复制？

> ID：13807098
> 
> 赞同：3
> 
> 时间：2012-12-10T18:39:00.527
> 
> 标签：c++, inline

假设编译器实际上是内联`foo`的，这两个语句之间是否存在性能差异？

```
inline int foo (int val) {
  return val;
}

int main () {

  std::cout << foo(123) << std::endl;

  std::cout << 123 << std::endl;

  return 0; 
} 
```

让我们忽略移动语义和复制省略可能产生的任何影响。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T18:42:36.310

我的编译器（gcc 4.7.2）为这两个语句生成几乎相同的代码：

```
_main:
LFB1018:
        pushq   %rbx
LCFI0:
        movq    __ZSt4cout@GOTPCREL(%rip), %rbx

; std::cout << foo(123) << std::endl;
        movl    $123, %esi
        movq    %rbx, %rdi
        call    __ZNSolsEi
        movq    %rax, %rdi
        call    __ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_

; std::cout << 123 << std::endl;
        movq    %rbx, %rdi
        movl    $123, %esi
        call    __ZNSolsEi
        movq    %rax, %rdi
        call    __ZSt4endlIcSt11char_traitsIcEERSt13basic_ostreamIT_T0_ES6_

        xorl    %eax, %eax
        popq    %rbx
LCFI1:
        ret 
```

唯一的区别是前两条指令的顺序。我已经对它进行了实验，这种差异似乎与以下内容没有任何关系`foo()`：如果我将这两行重复两次，则只有四个语句中的最后一个语句的指令顺序颠倒了。这让我觉得这个工件可能与管道优化器或类似的东西有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T18:43:20.197

应该是完全一样的。

为确保确实如此，请使用`-S`gcc 中的标志生成汇编代码并手动比较这两行。

另外，请注意 inline 关键字只是对编译器的提示，编译器可能会选择忽略它。[这个问题](https://stackoverflow.com/questions/60830/what-is-wrong-with-using-inline-functions?rq=1)对使用内联有深入的讨论。

# c# - 从动态添加的文本框中获取值

> ID：13807100
> 
> 赞同：0
> 
> 时间：2012-12-10T18:38:59.817
> 
> 标签：c#, asp.net, dynamic

我的数据库中有两个表：`Question`和`Answers`. 一个问题因其性质而得到 1 个或多个答案。我试图动态添加答案文本框。用户可以根据需要添加任意数量的所需答案。为此，我在 div 中使用了面板：div1 获取 panel1，div2 获取 panel2 等等。

在面板中，我有动态添加的文本框，并给出了它们的 id 数字，例如 txtAnswer1 和 txtAnswer2。当我按下提交按钮时，我想打开这个 txtboxes 并获取它们的值但是如何？

我尝试了这个[链接](http://learning2code.net/Learn/2009/8/12/Adding-Controls-to-an-ASPNET-form-Dynamically.aspx)解决方案，但我做不到。

[http://learning2code.net/Learn/2009/8/12/Adding-Controls-to-an-ASPNET-form-Dynamically.aspx](http://learning2code.net/Learn/2009/8/12/Adding-Controls-to-an-ASPNET-form-Dynamically.aspx)

这是设计视图：

```
 <form id="form1" runat="server">
    <div>
        <asp:TextBox ID="txtCount" runat="server"></asp:TextBox>
        <asp:Button ID="btnAdd" runat="server" Text="Add" OnClick="btnAdd_Click" />
    </div>
    <div style="border: medium solid #000000;">
        <asp:Panel ID="pnlAns" runat="server"></asp:Panel>
    </div>

    <div style="border: medium solid #000099;">
        <asp:Panel ID="pnlJ" runat="server"></asp:Panel>
    </div>
    <div style="border: medium solid #000000;">
        <asp:Panel ID="pnlA" runat="server"></asp:Panel>
    </div>
    <div>
        <asp:Button ID="btnGetValues" runat="server" Text="Get Values" OnClick="btnGetValues_Click" />
        <br />
        <asp:Label ID="lblValues" runat="server" />
    </div>
</form> 
```

这是后面的代码：

```
protected void btnAdd_Click(object sender, EventArgs e)
{
    int count = Convert.ToInt32(txtCount.Text);
    for (int i = 0; i < count; i++)
    {
        TextBox txt = new TextBox { ID = "txtAns" + i.ToString() };
        pnlAns.Controls.Add(txt);
        TextBox txtA = new TextBox { ID = "txtPoint" + i.ToString() };
        pnlA.Controls.Add(txtA);
        TextBox txtJ = new TextBox { ID = "txtOther" + i.ToString() };
        pnlJ.Controls.Add(txtJ);
    }
} 
```

使用我的代码控件添加输入。

我想在按钮单击中获取输入值。

```
protected void btnGetValues_Click(object sender, EventArgs e)
{

} 
```

我的问题是如何？

如您所见，我有 3 个面板和 3 个不同的文本框。那就是我试图找出答案的地方。

我尝试在面板数组中添加面板，但仍然无法获取文本框值。:(

```
protected void btnGetValues_Click(object sender, EventArgs e)
{
    Panel[] pnls = new Panel[3] { pnlAns, pnlA, pnlJ };

    foreach (Panel pnlIn in pnls)
    {
        lblValues.Text = pnlIn.Controls.ToString();
    }
} 
```

我不知道我有什么问题，但是当我按下添加按钮时，我可以添加文本框，但它们只是 html 文本框。我的意思是他们是`<input name="txtOther0" type="text" id="txtOther0" />`。当我尝试运行您处理的代码异常并将我踢出 foreach 循环时。我猜输入没有服务器标签。如果这是问题，我怎样才能让它们成为'runat="server"'？

我是否必须添加文本框值 ViewState，如果它是。如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:52:46.840

尝试在您的答案文本框周围使用面板，并确保您拥有 runat="server" 并且您知道 ID。然后，您可以查看该面板的子控件，并查看该控件是否属于 Textbox 类型。如果是，则从 text 属性中获取答案。

伪代码：

```
panel pnl = findpanel("mypanel");
foreach (control ctrl in pnl.controls)
{
    if (ctrl is TextBox)
    {
        //get the text property value here
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:59:49.930

要从`TextBox`a中动态添加的值中检索值`Panel`，您需要遍历 as 中的所有`TextBox`控件`Panel`：

```
Control answerPanel = Page.FindControl("AnswerPanelID");
foreach( Control childControl in answerPanel.Controls )
{
    if( childControl is TextBox )
    {
        //Retrieve and store value from childControl.Text
    }
} 
```

使用这种方法，您不必担心按单个 ID 检索控件。如果要搜索具有特定 ID 的控件，请使用该`Page.FindControl()`方法。

使用您编辑的解释：

代码只需要一点点调整。您循环浏览一组面板控件，这是正确的。不正确的是您尝​​试获取值的方式。

```
lblValues.Text = pnlIn.Controls.ToString() 
```

不会工作。取而代之的是，它应该是：

```
protected void btnGetValues_Click(object sender, EventArgs e)
{
    Panel[] pnls = new Panel[3] { pnlAns, pnlA, pnlJ };
    ArrayList answers = new ArrayList();
    //Alternatively....
    System.Collections.Hashtable ht = new System.Collections.Hashtable();

    foreach (Panel pnlIn in pnls)
    {
        foreach( Control childControl in pnlIn.Controls )
        {
            if( childControl is TextBox )
            {
                TextBox box = (TextBox)childControl;
                //Retrieve and store value from childControl.Text
                answers.Add(box.Text);
                //Alternatively...
                ht.Add( box.ID, box.Text );
            }
        }
    }
} 
```

最后，您将拥有`ArrayList`（或`HashTable`，由 的 ID 索引`TextBox`），其中包含面板中所有文本框的值。如果您在面板中有问题和答案，则您的 if 语句将必须检查 ID 是否包含“Answer”。

# c - 如何识别输入是否结束？

> ID：13807101
> 
> 赞同：1
> 
> 时间：2012-12-10T18:39:03.433
> 
> 标签：c, scanf

我试图在一个循环中输入。我怎么知道输入何时停止？比如说我有一个`int input`，只要用户想要，我就会接受输入。但我没有在每次输入之前提示。我不是在问用户是否有更多的输入，我也不知道提前输入的数量。

如何停止接受输入？

这是我到目前为止所拥有的。

```
while(1){
    scanf("%d",&input);
    if(conditionFulfilled)
        index=0;

    if(index)
        printf("%d",input);
} 
```

在这里，只要不满足条件，我都会打印所有内容。但是一旦满足条件，我就会继续输入，但不要打印它们。我怎么知道输入何时停止？

我现在会尽量让自己更清楚。

我想要做的是，我希望用户继续输入数字，现在我想以相同的顺序打印这些数字，但是一旦用户输入了一个大于 50 的数字，我不想打印那个数字以及之后的任何数字.

此外，一旦达到上述条件，我不希望用户停止输入输入。另外，我可以每次询问用户是否要输入更多号码？我只希望他继续进入，然后一旦他完成。我应该得到所需的打印输出。

但我就是想不通，我怎么知道用户是否完成了所有的输入。

我在想我可以将输入存储为字符，因为 newLine 存储在字符中而不是整数输入中。即`scanf("%c",&input)`。将存储`\n`字符，但如果它`scanf("%d",&input)`会忽略所有换行符，现在我可以检查两个连续的换行符，这将停止它。

好吧，我不确定这是否是正确的方法？

另外，假设我输入`4`然后按回车键，现在 4 并且`enter`两者都在输入流上，现在我如何清除这个输入流中的 newLine 字符，并在我的变量中输入 4？我希望它现在更有意义？

编辑：我想上面的解决方案不会起作用，因为如果我接受输入，因为`char`我将无法处理`22`，因为它只会占用前 2 个并将另一个留在缓冲区中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:48:56.337

最好`getchar()`在`while`循环中使用并使用`CTRL+D`哪个`EOF`作为输入的终止符。（但请确保您有足够大小的缓冲区来存储输入）。

如果 input 小于 size ，你可以`realloc`为新的 size 。这样你可以节省空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:54:29.410

如果您很高兴只在输入类似于: 时采用前 2 个输入`20 20 foo 30`，那么只需执行以下操作：

```
while( scanf( "%d", &input ) == 1 ) 
```

但是，在任何合理的程序中，您都希望更优雅地处理无效输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:58:32.020

如果您希望用户执行以下操作：

```
5<enter>
16<enter>
3<enter>
... 
```

只要他们愿意，你***不***知道他们什么时候完成。我假设这是您正在谈论的情况，因为您正在循环单个输入。

在这种情况下，您必须通过终止序列（例如“输入 -1 停止”）或通过预先设置输入数量“输入 10 个值”来为用户设置结束状态。

但是，如果您想一次接受任意数量的值，例如：

```
5 16 3 ... <enter> 
```

然后，您可以将该值读入一个字符串，`scanf()`并在您的标记字符（本例中为空格）周围将其分开。如果你想这样做，你不需要循环。

* * *

因此，假设在您的代码中 conditionaFulfilled 是 的输入`0`，并且您想在他们输入 a 时中断`-1`：

```
while(1){
scanf("%d",&input);
if(input == 0)
  index=0;
else if(input == -1)
   break;  
if(index)
printf("%d",input);
} 
```

现在代码将继续输入和打印数字，直到它们输入 a `0`，此时它将继续输入数字，但在输入为 之前不会使用它们`-1`。

* * *

**根据您的编辑进行编辑**：****

 **`Well, I am not sure if it is the right way?`
真的没有“正确的方法”，这是你的程序，所以这取决于你。我的回答的第一部分解释了这一点，你必须定义你想如何接受你的输入。你想让他们一次输入一个数字吗？你想让它们都在一条线上吗？由你决定！

`Edit: I guess the above solution wont work, since if I am taking in the input as char I wont be able to process 22 since It will just take the first 2 and leave the other one in buffer only.`
不，您的代码将它们视为整数`%d`。如果你把它们当作字符`%c`，那么是的，你是正确的一个多位数字，你必须做一些特殊的工作才能得到：

如果用户输入`22<enter>` ，您必须循环获取字符直到换行，并且您必须根据需要移动数字：

```
2 * 10^1 + 2 * 10 ^0 = 22 
```

`Also, say if I enter 4 and then hit enter, now 4 and enter both are on the input stream, now how can I clear this input stream for the newLine character, and just take in 4 in my variable?`

如果您*只是*通过 读取数字`scanf("%d", &input)`，那么您不必担心换行符。

希望有帮助。**

# c# - 查找所有打开的 Excel 工作簿

> ID：13807102
> 
> 赞同：6
> 
> 时间：2012-12-10T18:39:08.350
> 
> 标签：c#, excel, office-interop

我正在尝试获取所有当前打开的 Excel 工作簿的列表，以便用户可以选择其中的哪一个来获取一些数据。

我试过这个：

```
List<string> excelList = new List<string>();
Process[] processList = Process.GetProcessesByName("excel");
foreach (Process p in processList)
{
 excelList.Add(p.MainWindowTitle);
 Console.WriteLine(p.MainWindowTitle);
} 
```

但这只会获取 Excel 的第一个打开实例和最近打开的实例，因此在这两者之间打开的任何工作簿都不在列表中。

我还开始探索[这个 SO question](https://stackoverflow.com/questions/393167/net-interop-find-all-instances-of-of-a-running-com-object-with-c-sharp)的答案中的[博客链接](http://blocko.blogspot.com/2006/10/driving-excel-and-powerpoint-with-c.html)中描述的解决方案，并尝试使用博客条目中建议的代码访问运行对象表：

```
IBindCtx bc;
IRunningObjectTable rot;
CreateBindCtx(0, out bc);
bc.GetRunningObjectTable(out rot); 
```

这里的问题是它`CreateBindCtx`实际上接受 a`UCOMIBindCTX`而不是`IBindCTX`，但每个[MSDN](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.ucomibindctx.aspx)`UCOMIBindCTX`已过时。

有没有更简单的方法来做我想做的事情：获取`Workbook`与所有打开的 Excel 书籍相对应的对象列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:07:06.267

好的，我找到了一种方法来做到这一点。描述该解决方案的博客似乎不再可用，但有一个[Google 缓存版本](http://webcache.googleusercontent.com/search?q=cache%3aLK_nLH602mgJ%3ablogs.officezealot.com/whitechapel/archive/2005/04/10/4514.aspx&hl=en&tbo=d&gl=us&strip=1)。

我稍微修改了代码，以便构造函数接受 MainWindowHandle，因为我正在遍历所有进程的句柄。

课程如下。我留下了一些 Andrew Whitechapel 的评论来解释正在发生的事情，因为这段代码超出了我目前对 Windows 操作系统管理的了解：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Runtime.InteropServices;
using Excel = Microsoft.Office.Interop.Excel;

namespace DTEExcel
{
    class ExcelApplicationRetriever
    {
        [DllImport("Oleacc.dll")]
        public static extern int AccessibleObjectFromWindow(
              int hwnd, uint dwObjectID, byte[] riid,
              ref Microsoft.Office.Interop.Excel.Window ptr);

        [DllImport("User32.dll")]
        public static extern int GetClassName(
              int hWnd, StringBuilder lpClassName, int nMaxCount);

        [DllImport("User32.dll")]
        public static extern bool EnumChildWindows(
              int hWndParent, EnumChildCallback lpEnumFunc,
              ref int lParam);

        public delegate bool EnumChildCallback(int hwnd, ref int lParam);
        private EnumChildCallback cb;
        public Excel.Application xl;

        public ExcelApplicationRetriever(int winHandle)
        {
            // We need to enumerate the child windows to find one that
            // supports accessibility. To do this, instantiate the
            // delegate and wrap the callback method in it, then call
            // EnumChildWindows, passing the delegate as the 2nd arg.
            if (winHandle != 0)
            {
                int hwndChild = 0;
                cb = new EnumChildCallback(EnumChildProc);
                EnumChildWindows(winHandle, cb, ref hwndChild);

                // If we found an accessible child window, call
                // AccessibleObjectFromWindow, passing the constant
                // OBJID_NATIVEOM (defined in winuser.h) and
                // IID_IDispatch - we want an IDispatch pointer
                // into the native object model.
                if (hwndChild != 0)
                {
                    const uint OBJID_NATIVEOM = 0xFFFFFFF0;
                    Guid IID_IDispatch = new Guid(
                         "{00020400-0000-0000-C000-000000000046}");
                    Excel.Window ptr = null;

                    int hr = AccessibleObjectFromWindow(
                          hwndChild, OBJID_NATIVEOM,
                         IID_IDispatch.ToByteArray(), ref ptr);
                    if (hr >= 0)
                    {
                        // If we successfully got a native OM
                        // IDispatch pointer, we can QI this for
                        // an Excel Application (using the implicit
                        // cast operator supplied in the PIA).
                        xl = ptr.Application;
                    }
                }
            }
        }

        public bool EnumChildProc(int hwndChild, ref int lParam)
        {
            StringBuilder buf = new StringBuilder(128);
            GetClassName(hwndChild, buf, 128);
            if (buf.ToString() == "EXCEL7")
            {
                lParam = hwndChild;
                return false;
            }
            return true;
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:53:29.600

此代码是使用最后一条评论中的资源（链接）和您提供的代码放在一起的。这应该拉入所有打开的工作簿名称。

```
using Excel = Microsoft.Office.Interop.Excel;        

[DllImport("User32")]
public static extern int GetClassName(
    int hWnd, StringBuilder lpClassName, int nMaxCount);

// Callback passed to EnumChildWindows to find any window with the
// registered classname "paneClassDC" - this is the class name of
// PowerPoint's accessible document window.
public bool EnumChildProc(int hwnd, ref int lParam)
{
    StringBuilder windowClass = new StringBuilder(128);
    GetClassName(hwnd, windowClass, 128);
    s += windowClass.ToString() + "\n";
    if (windowClass.ToString() == "EXCEL7")
    {
        lParam = hwnd;
    }
    return true;
}

public delegate bool EnumChildCallback(int hwnd, ref int lParam);

[DllImport("User32")]
public static extern bool EnumChildWindows(
    int hWndParent, EnumChildCallback lpEnumFunc, ref int lParam);

[DllImport("User32")]
public static extern int FindWindowEx(
    int hwndParent, int hwndChildAfter, string lpszClass,
    int missing);

// AccessibleObjectFromWindow gets the IDispatch pointer of an object
// that supports IAccessible, which allows us to get to the native OM.
[DllImport("Oleacc.dll")]
private static extern int AccessibleObjectFromWindow(
    int hwnd, uint dwObjectID,
    byte[] riid,
    ref Excel.Window ptr);

// Get the window handle for a running instance of PowerPoint.
internal List<String> GetAccessibleObject()
{

    List<String> workbookNames = new List<String>();
    try
    {
        // Walk the children of the desktop to find PowerPoint’s main
        // window.
        int hwnd = FindWindowEx(0, 0, "XLMAIN", 0);
        while(hwnd != 0)
        if (hwnd != 0)
        {
            // Walk the children of this window to see if any are
            // IAccessible.
            int hWndChild = 0;
            EnumChildCallback cb =
                new EnumChildCallback(EnumChildProc);
            EnumChildWindows(hwnd, cb, ref hWndChild);

            if (hWndChild != 0)
            {
                // OBJID_NATIVEOM gets us a pointer to the native 
                // object model.
                uint OBJID_NATIVEOM = 0xFFFFFFF0;
                Guid IID_IDispatch =
                    new Guid("{00020400-0000-0000-C000-000000000046}");
                Excel.Window ptr = null;
                int hr = AccessibleObjectFromWindow(
                    hWndChild, OBJID_NATIVEOM,
                    IID_IDispatch.ToByteArray(), ref ptr);
                if (hr >= 0)
                {
                    Excel.Application eApp = ptr.Application;
                    if (eApp != null)
                    {
                        foreach (Excel.Workbook wb in eApp.Workbooks)
                        {
                            workbookNames.Add(wb.FullName);
                        }
                        Marshal.ReleaseComObject(eApp);
                        GC.WaitForPendingFinalizers();
                        GC.Collect();
                    }
                }

                hwnd = FindWindowEx(0, hwnd, "XLMAIN", 0);
            }
        }
    }
    catch (Exception ex)
    {
        Debug.WriteLine(ex.ToString());
    }
    return workbookNames;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-18T20:09:54.137

```
public void closeOpenedFile(string file_name)
{
    //Excel Application Object
    Microsoft.Office.Interop.Excel.Application oExcelApp;
    //Get reference to Excel.Application from the ROT.
    if (Process.GetProcessesByName("EXCEL").Count() > 0)
    {
        oExcelApp = (Microsoft.Office.Interop.Excel.Application)System.Runtime.InteropServices.Marshal.GetActiveObject("Excel.Application");

        foreach (Microsoft.Office.Interop.Excel.Workbook WB in oExcelApp.Workbooks)
        {
            //MessageBox.Show(WB.FullName);
            if (WB.Name == file_name)
            {
                WB.Save();
                WB.Close();
                //oExcelApp.Quit();
            }
        }
    }
} 
```

# java - 在单个模型 Hibernate Spring 中将两个表连接到第三个表

> ID：13807103
> 
> 赞同：1
> 
> 时间：2012-12-10T18:39:15.650
> 
> 标签：java, spring, hibernate, jpa

我有两个表，我想将它们视为 Hibernate/Spring 中的单个模型类，但是它们唯一的关系可以通过第三个表建立。例如...

```
tableA {  
   id integer <PK>
   username varchar2(25 byte)
}
tableB {
   personID varchar2(15 byte) <PK>
   divisionID integer
   positionID integer
}
tableC {
   personID varchar2(10) <FK>
   username varchar2(25 byte)
} 
```

虽然简单地将 personID 添加为 tableA 中的列会非常好，但情况不允许。但是，我想在休眠中使用一种模型与这些表进行交互，例如下面的模型...

```
@Entity
@Table(name="tableA")
public class myTable {
   @Id
   @GeneratedValue
   private int id;
   private String username;
   @Formula("(select distinct tableC.personID from tableC where upper(tableC.username) = upper(THIS_.username) and tableC.personID is not null)")
   String personID;
   @Formula("(select distinct tableB.divisionID from tableB where tableB.personID = THIS_.personID)")
   int divisionID;
   @Formula("(select distinct tableB.oositionID from tableB where tableB.personID = THIS_.personID)")
   int positionID;

   //getters, setters, etc...
} 
```

我知道我在这里写它的方式是不可能的，我只是想传达这个想法。当我稍后去保存或更新数据库时，我希望 Hibernate 能够更新每个属性来自的相应表。

我已经探索过使用@Transient、@SecondaryTables 和其他一些方法，但我还没有找到一个很好的方法来完成这项工作。是否可以按照我想要的方式做到这一点？如果是这样，我应该使用什么方法/注释？如果不是，我应该采取什么替代方法？我对 Hibernate 和 Spring 比较陌生，所以请多多包涵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:45:16.917

我确信有办法做到这一点；我没有答案给你。

但是您的问题向我表明您没有正确考虑 Hibernate。这是一个 ORM 工具 -*对象*-关系映射。如果您仍然只考虑表和 SQL，将值加载到原语中，那么 Hibernate 不是正确的工具。

`SimpleJdbcTemplate`如果您没有将数据映射到的对象，我建议您只使用 Spring而不是 Hibernate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T07:12:10.607

看看这个[Using multiple tables in persistence](http://en.wikibooks.org/wiki/Java_Persistence/Tables#Multiple_tables)

# ruby-on-rails - 如何在 Rails 应用程序中显示 powerpoint？

> ID：13807105
> 
> 赞同：1
> 
> 时间：2012-12-10T18:39:17.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, powerpoint

我正在寻找一种方法让用户将 powerpoint 文件上传到我的网站（不是第三方演示网站，除非它是免费的并且他们有上传 api），然后我会在浏览器中显示演示文稿。是否有可以处理此问题或轻松将 powerpoint 演示文稿转换为图像的 rails gem？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:44:26.610

[您可以使用Scribd API](http://www.scribd.com/developers/platform)执行上述操作：

> Scribd API 是一个类似于 REST 的 API，具有用于上传、转换、查看、删除和搜索文档的方法。

# php - 根据 mySQL 数据库中的行数进行动态分页

> ID：13807106
> 
> 赞同：-1
> 
> 时间：2012-12-10T18:39:17.227
> 
> 标签：php, html, mysql, pagination

我正在尝试为我的 mySQL 数据库进行动态分页。每页结果为 20，页数（显示在底部）取决于`$totalPages`

我目前在`for-loop`. 有人可以帮我仔细检查一下吗？

```
$result = mysql_query("SELECT COUNT(0) FROM Spreadsheet");
$rows = mysql_fetch_array($result);

$total = $rows[0];
$totalPages = ceil($total/20);
$i=0;

$pages = "Pages :";

    echo $pages;

    for ($i; $i<$totalPages; $i++){
    echo "<a href=\"index.php?page='$i'rpp=20\">$i</a>";

    } 
```

结果应如下所示：

```
Pages: 1, 2, 3, 4, 5, etc.. 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:44:54.223

```
for ($i; $i<$totalPages; $i++){
   echo '<a href="index.php?page='.$i.'&rpp=20">['.$i.']</a>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:47:21.767

如果你删除了 rpp 那么它应该是

```
echo "<a href=\"index.php?page=".$i."\">".$i."</a>"; 
```

# php - 组织 CakePHP 代码

> ID：13807120
> 
> 赞同：0
> 
> 时间：2012-12-10T18:40:48.000
> 
> 标签：php, cakephp, refactoring

我在理解组件、实用程序和行为之间的区别时遇到了问题。我读了食谱，但它只对我有部分帮助。

例如——我想在上传时调整/裁剪图像。我将使用许多与不同模型和控制器/动作相关的不同形式。

显然我需要用**scale**、**resize**、**saveImage**和其他有用的方法编写一个类。我还需要能够从不同的地方使用这种方法。

我的问题是 - 放置此代码的正确位置在哪里？有人可以为我提供一些关于组件、实用程序和行为之间核心区别的简单示例吗？因为对我来说组件和实用程序看起来非常相似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:58:37.747

*   **行为**是适用于*模型*的逻辑包。
*   **组件**是适用于*控制器*的逻辑包。
*   **实用程序**是通用库，不一定适用于 MVC 的任何特定部分。

实用程序和行为/组件之间的主要区别在于实用*程序类不扩展核心 MVC 类，因此不会自动接收挂钩到其父类的请求周期*。例如，在一个组件中，您可以实现一个`beforeRender()`函数，该函数将在控制器呈现其布局/视图之前被调用，自动地，每次调用该控制器时。

此外，实用程序类必须在使用前实例化并分配给变量：`$myUtil = new MyUtility(); $myUtil->blah()`- 行为/组件/帮助程序在加载到类中时会被实例化，并且可以使用`$this->MyComponent->blah()`.

在您的情况下，图像处理逻辑很可能属于 Component 或 Utility 类，您可以选择以任何一种方式实现它。就个人而言，我会编写一个组件，因为您不太可能在控制器之外使用图像处理逻辑。

**编辑**：您可能还考虑查找和使用某人已经编写的现有组件，例如我在大约 2 分钟的 Google 搜索中找到了[ImageTool](https://github.com/raitisg/CakePHP-ImageTool-Component)、[Image Resizer](https://github.com/renobrant/Image-Resizer-Component-for-CakePHP2)、[Image Upload & Resizer](https://github.com/hunzinker/CakePHP-Image-Upload---Resize-Component)和[Thumbnail 。](https://github.com/tute/Thumbnail-component-for-CakePHP)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T18:51:32.687

行为是您放置应该跨多个模型重用的代码的地方组件是您放置将在多个控制器中使用的代码的地方，而助手是您放置将在多个视图中使用的代码的地方

这就是基本的崩溃。

由于控制器负责应用程序逻辑，因此将上传器/缩放器构建到组件中似乎是最有意义的。

如果您需要修改数据的访问方式或从数据库返回的方式，那将是一种行为（因为它会影响模型层）

如果您需要创建一些可重用的代码来生成 HTML 或某种类型的视图输出，那将是一个助手。

对于您上传、缩放和调整图像大小的示例。我会把它变成一个组件。例如，我有一个名为 UploadComponent.php 的组件，它可以上传、保存和创建缩略图。

我通过执行以下操作将此组件添加到我的控制器中：

```
 var components = array('Upload'); 
```

然后我可以通过执行以下操作在我的控制器中使用它：

```
$this->Upload->createThumbnail(200, 200); 
```

显然，如何实现组件的细节取决于您。

希望有帮助。

# c# - SharePoint 动态磁贴通知

> ID：13807124
> 
> 赞同：2
> 
> 时间：2012-12-10T18:41:25.503
> 
> 标签：c#, javascript, sharepoint, winjs, sharepoint-2013

我一直在搜索有关 SharePoint '13 工作流与 Windows 8 动态磁贴集成的一些资源，包括 MSDN、多个博客（例如[http://www.howtosp.com/blog/](http://www.howtosp.com/blog/)）。我找到了多种将动态磁贴编程到 SharePoint 和 SharePoint 到移动推送通知的来源（但没有具体说明这是否适用于 Win 8 Pro），我只是想知道我是否可以导致部分与活动的 Windows 8 Live Tile 交互的 SharePoint '13 工作流。例如，在工作流程中，如果步骤 3 暂停了给定的时间，则在图块上闪烁一条消息、一种颜色等。非常感谢任何帮助、指导和资源。谢谢。

亚历克斯

# php - kohana3.3：在 {第一个元素的标准} 时执行 find_all() 并在其后回显其余元素

> ID：13807127
> 
> 赞同：0
> 
> 时间：2012-12-10T18:41:34.920
> 
> 标签：php, foreach, while-loop, kohana, kohana-3

我需要做这个棘手的事情：以随机方式选择 10 个项目，一个项目用于真/假标准，其余 9 个项目回显：

```
$unique_items=array('bike', 'doll', 'carpet', 'postcard');

do {
   $items=ORM::factory('Shop')
     ->order_by(DB::expr('Rand()'))//this way I take 10 random rows from the table
     ->limit(10)
     ->find_all();
}while (in_array(first_item_from_ten_rows->name, $unique_items));

foreach ($items as $item){
   echo $item->name;//display 2nd, 3rd, ..., 10th items, without the first one
} 
```

我这里使用的php框架是Kohana3.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:07:35.450

我不确定这是否是您需要做的：

```
$first = TRUE
foreach ($items as $item) 
{
   if ($first)
   {
      $first = FALSE;
   }
   else
   {
      echo $item->name;
   }
} 
```

# jquery - 除非按下 esc，否则无法关闭 fancybox 2

> ID：13807131
> 
> 赞同：1
> 
> 时间：2012-12-10T18:41:49.217
> 
> 标签：jquery, fancybox

Fancybox 2 出现问题。我可以单击 Fancybox 打开的照片，但我可以单击图像到不同的图像上，它会打开。X 按钮不起作用，导航按钮也不会出现。我只能用 esc 键关闭 Fancybox。提前感谢您的帮助。

网站 [http://elainestyles.com/#/imagination](http://elainestyles.com/#/imagination)

我的代码..

```
 <!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1024" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>Elaine Styles</title>

    <meta name="description" content="impress.js is a presentation tool based on the power of CSS3 transforms and transitions in modern browsers and inspired by the idea behind prezi.com." />
    <meta name="author" content="Bartek Szopka" />

    <link href='http://fonts.googleapis.com/css?family=Duru+Sans' rel='stylesheet' type='text/css'>

    <link href="css/impress-demo.css" rel="stylesheet" />

    <link rel="shortcut icon" href="favicon.png" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />
    <link rel="stylesheet" href="fancybox/source/jquery.fancybox.css?v=2.1.3" type="text/css" media="screen" />
    <link rel="stylesheet" href="fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen" />
    <script src="js/vendor/modernizr-2.5.3.min.js"></script>
</head>

<body class="impress-not-supported">

<div class="fallback-message">
    <p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified version of this presentation.</p>
    <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>
</div>

<div id="impress">

    <div id="imagination" class="step" data-x="-1400" data-y="4700" data-rotate-x="80" data-scale="7">
        <div class="port">
            <div id="content" class="container pill clearfix">
                <a class="fancybox" rel="group3" href="img/elaineport/ASE.png">
                    <div class="box img3">
                    </div>
                </a>

                <a class="fancybox" rel="group4" href="img/elaineport/BusCard.jpg">
                    <div class="box img4">
                    </div>
                </a>

                <a class="fancybox" rel="group5" href="img/elaineport/DVhBanner1.jpg">
                    <div class="box img5">
                    </div>
                </a>

                <a class="fancybox" rel="group6" href="img/elaineport/KidsDashboardBanner.jpg">
                    <div class="box img6">
                    </div>
                </a>

                <a class="fancybox" rel="group7" href="img/elaineport/MVpvite.jpg">
                    <div class="box img7">
                    </div>
                </a>

                <a class="fancybox" rel="group8" href="img/elaineport/quilibleIphone.jpg">
                    <div class="box img8">
                    </div>
                </a>

                <a class="fancybox" rel="group8" href="img/elaineport/quilibleSmall.png">
                    <div class="box img9">
                    </div>
                </a>

                <a class="fancybox" rel="group9" href="img/elaineport/Sampleflyer1.jpg">
                    <div class="box img10">
                    </div>
                </a>

                <a class="fancybox" rel="group9" href="img/elaineport/sampleflyer2.jpg">
                    <div class="box img11">
                    </div>
                </a>

                <a class="fancybox" rel="group10" href="img/elaineport/weddingMenu.jpg">
                    <div class="box img12">
                    </div>
                </a>
            </div>
        </div>
    </div>
<div class="hint">
    <p>Use a spacebar or arrow keys to navigate</p>
</div>
<script>
if ("ontouchstart" in document.documentElement) { 
    document.querySelector(".hint").innerHTML = "<p>Tap on the left or right to navigate</p>";
}
</script>

<script src="js/impress.js"></script>
<script>impress().init();</script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.3.min.js"><\/script>')</script>

<script src="js/vendor/jquery.masonry.min.js"></script>
<script src="js/script.js"></script>
<script type="text/javascript" src="fancybox/source/jquery.fancybox.pack.js?v=2.1.3"></script>
<script type="text/javascript" src="fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>

</body>
</html> 
```

JS文件

```
$(document).ready(function() {

  $('#content').masonry({
   columnWidth: 220,
   itemSelector: '.box',
   isFitWidth: true,
   isResizable: false,
  }).imagesLoaded(function() {
   $('#content').masonry('reload');
   isAnimated: !Modernizr.csstransitions
  });

  $(".fancybox").fancybox();

}); 
```

# sql - 如何选择超过 12 个月的数据？

> ID：13807132
> 
> 赞同：3
> 
> 时间：2012-12-10T18:41:51.607
> 
> 标签：sql, oracle

我有一张如下表；

```
caravan_id, description, date_purchased, special_instructions, health&safety_check, notes 
```

`health&safety_check`是一个日期字段。

如何对该表中的数据执行 SQL 查询，以返回所有`health&safety_check`超过 12 个月的行。但如果可能的话，基于 12 个月，而不是今天的日期，例如 < 2011 年 10 月 12 日

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T05:52:11.927

```
select *
from t
where "health&safety_check" < add_months(sysdate, -12) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-10T18:45:13.673

就像是：

```
select *
from t
where add_months("health&safety_check", 12) < sysdate 
```

我假设您不想对当前日期进行*硬编码*，但对使用变量感到满意。

Jeff 在评论中提出了一个很好的观点（尽管在 Oracle 中，您可以在函数上创建索引，以便解决问题）。这很容易解决：

```
where "health&safety_check" <add_months(sysdate, -12) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T03:05:32.683

您可以使用此查询：

```
SELECT *
FROM table_name
WHERE `health&safety_check` < ADDDATE(NOW(), INTERVAL -12 MONTH) 
```

ADDDATE(NOW(), INTERVAL -12 MONTH) 表示该日期减去 12 个月，您可以使用其他日期字段或变量来更改 NOW()。

NOW() 表示今天。

# wikipedia - 获取维基百科文章的第一段（并且只有文本）返回不需要的结果

> ID：13807137
> 
> 赞同：7
> 
> 时间：2012-12-10T18:42:01.700
> 
> 标签：wikipedia, wikipedia-api, wikitext

我正在尝试检索 Wikipedia 文章的第一段文本，在此示例中为**UNIX**，但它返回给我一个不想要的输出。

对于我在 Wikipedia api 和 StackOverflow 上阅读的内容，这是进行调用的请求 URL：

> [http://en.wikipedia.org/w/api.php?format=php&action=query&titles=unix&redirects=1&prop=revisions&rvprop=content&rvsection=0&rvlimit=1](http://en.wikipedia.org/w/api.php?format=php&action=query&titles=unix&redirects=1&prop=revisions&rvprop=content&rvsection=0&rvlimit=1)

我的预期输出将是：

> Unix（正式商标为 UNIX，有时也写为 Unix in small caps）是一种多任务、多用户计算机操作系统，最初由贝尔实验室的一群 AT&T 员工于 1969 年开发，其中包括 Ken Thompson、Dennis Ritchie、Brian Kernighan、道格拉斯·麦克罗伊、迈克尔·莱斯克和乔·奥萨纳。[1] Unix 操作系统最初是用汇编语言开发的，但到 1973 年几乎完全用 C 重新编码，极大地促进了它的进一步开发和移植到其他硬件。今天的 Unix 系统演变分为多个分支，由 AT&T 以及各种商业供应商、大学（如加州大学伯克利分校的 BSD）和非营利组织随着时间的推移而开发。

我目前的结果：

```
{{Use dmy dates|date=August 2012}}
{{Infobox OS
|name               = Unix
|logo               = 
|screenshot         = [[File:Unix history-simple.svg|250px]]
|caption            = Evolution of Unix and Unix-like systems
|website            = [http://www.unix.org unix.org]
|developer          = [[Ken Thompson (computer programmer)|Ken Thompson]], [[Dennis Ritchie]], [[Brian Kernighan]], [[Douglas McIlroy]], and [[Joe Ossanna]] at [[Bell Labs]]
|source_model       = Historically [[Closed source software|closed source]], now some Unix projects ([[Berkeley Software Distribution|BSD]] family and [[Illumos]]) are [[open source]]d.
|frequently_updated = yes <!-- Release version update? Don't edit this page, just click on the version number! -->
|programmed_in      = [[C (programming language)|C]] 
|kernel_type        = [[Monolithic Kernel|Monolithic]]
|ui                 = [[Command-line interface]] & [[Graphical user interface|Graphical]] ([[X Window System]])
|language           = English 
|family             = Unix
|released           = {{start date and age|df=yes|1969}}
|license            = [[Proprietary software|Proprietary]]
|working_state      = Current 
}}

'''Unix''' (officially trademarked as '''UNIX''', sometimes also written as '''<span style="font-variant: small-caps;">Unix</span>''' in small caps) is a [[Computer multitasking|multitasking]], [[multi-user]] computer [[operating system]] originally developed in 1969 by a group of [[American Telephone & Telegraph|AT&T]] employees at [[Bell Labs]], including [[Ken Thompson]], [[Dennis Ritchie]], [[Brian Kernighan]], [[Douglas McIlroy]], [[Michael Lesk]] and [[Joe Ossanna]].<ref name=" Ritchie">{{cite journal
  | last = Ritchie
  | first = D.M.
  | authorlink = 
  | coauthors = Thompson, K.
  | title = The UNIX Time-Sharing System
  | journal = Bell System Tech. J.
  | volume = 57
  | issue = 6
  | pages = 1905-1929
  | publisher = American Tel. & Tel.
  | location = USA
  | date = July 1978
  | url = http://www.alcatel-lucent.com/bstj/vol57-1978/articles/bstj57-6-1905.pdf
  | issn = 
  | doi = 
  | id = 
  | accessdate = December 9, 2012}}</ref>  The Unix operating system was first developed in [[assembly language]], but by 1973 had been almost entirely recoded in [[C (programming language)|C]], greatly facilitating its further development and [[Software portability|porting]] to other hardware. Today's Unix system evolution is split into various branches, developed over time by AT&T as well as various commercial vendors, universities (such as [[University of California, Berkeley]]'s [[BSD]]), and [[non-profit]] organizations.

[[The Open Group]], an industry standards consortium, owns the UNIX trademark. Only systems fully compliant with and certified according to the [[Single UNIX Specification]] are qualified to use the trademark; others might be called ''Unix system-like'' or ''[[Unix-like]]'', although the Open Group disapproves<ref>[http://www.unix.org/questions_answers/faq.html#7a  What is a "Unix-like" operating system?] Unix.org FAQ</ref> of this term.  However, the term ''Unix'' is often used informally to denote any operating system that closely resembles the trademarked system.

During the late 1970s and early 1980s, the influence of Unix in academic circles led to large-scale adoption of Unix (particularly of the [[Berkeley Software Distribution|BSD]] variant, originating from the [[University of California, Berkeley]]) by commercial startups, the most notable of which are [[Solaris (operating system)|Solaris]], [[HP-UX]], [[Sequent Computer Systems|Sequent]], and [[AIX operating system|AIX]], as well as [[Darwin (operating system)|Darwin]], which forms the core set of components upon which [[Apple Inc.|Apple]]'s [[OS X]], [[Apple TV]], and [[IOS (Apple)|iOS]] are based.<ref>{{cite web|url=http://marketshare.hitslink.com/operating-system-market-share.aspx?qprid=8&qpcustomd=0 |title=Operating system market share |publisher=Marketshare.hitslink.com |date= |accessdate=2012-08-22}}</ref><ref>{{cite web|url=http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/OSX_Technology_Overview/SystemTechnology/SystemTechnology.html#//apple_ref/doc/uid/TP40001067-CH207-BCICAIFJ |title=Loading |publisher=Developer.apple.com |date= |accessdate=2012-08-22}}</ref> Today, in addition to certified Unix systems such as those already mentioned, [[Unix-like]] operating systems such as [[MINIX]], [[Linux]], and [[BSD]] descendants ([[FreeBSD]], [[NetBSD]], [[OpenBSD]], and [[DragonFly BSD]]) are commonly encountered. The term ''traditional Unix'' may be used to describe an operating system that has the characteristics of either [[Version 7 Unix]] or [[UNIX System V]]." 
```

检索文章的正确方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-22T06:32:30.873

如果您只想要纯文本，请使用[TextExtracts](https://www.mediawiki.org/wiki/Extension%3aTextExtracts#API)：[http ://en.wikipedia.org/w/api.php?format=json&action=query&prop=extracts&explaintext=1&titles=Unix](http://en.wikipedia.org/w/api.php?format=json&action=query&prop=extracts&explaintext=1&titles=Unix)

这将产生：`Unix is a multitasking, multi-user computer operating system that exists in many variants. The original Unix was developed at AT&T's Bell Labs research center by Ken Thompson, Dennis Ritchie, and others. From the power user's or programmer's perspective, Unix systems are characterized by a modular design that is sometimes called the "Unix philosophy," meaning the OS provides a set of simple tools that each perform a limited, well-defined function, with a unified filesystem as the main means of communication and a shell scripting and command language to combine the tools to perform complex workflows.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T11:49:06.250

我一直在用 Python 处理这个问题。第一个任务是获取想要的文本；之后，您需要解析 HTML 并删除所有无关信息。

以下函数将为您提供第 n 个文本部分（n=0 返回摘要）：

```
import requests

def getWikiSection(topic, n):
    url = 'http://en.wikipedia.org/w/api.php?action=parse&page=%s&format=json&prop=text&section=%s' % (topic, str(n))
    json_response = requests.get(url).json().items()
    if len(json_response) > 1 and json_response[1][0] == u'error':
        print json_response[1][1][u'info']
        return None
    return stripTags(json_response[0][1][u'text'][u'*']) 
```

快速演练：首先，我们为给定主题创建 URL；然后，我们获取 JSON 响应；如果我们查询了无效的部分或主题（即，该主题不存在页面，或者我们超出了页面的长度），我们会打印一个错误；否则，我们清理响应。

清理响应由最后一行的“stripTags”函数处理，该函数删除 HTML 标记。这里是：

```
from HTMLParser import HTMLParser

class MLStripper(HTMLParser):
    def __init__(self):
        self.reset()
        self.fed = []

    def handle_data(self, d):
        self.fed.append(d)

    def get_data(self):
        return ''.join(self.fed)

def stripTags(html):
    s = MLStripper()
    s.feed(html)
    return s.get_data() 
```

当然，这可以扩展为根据您的喜好解析文本。例如，我删除了如下引用：

```
import re

def removeReferences(s):
    return re.sub(r'\[[0-9]+\]', '', s) 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-29T11:26:27.533

试试[这个网址](http://en.wikipedia.org/w/api.php?action=parse&format=json&prop=text&section=all&page=pagename&redirects&callback=?)。

（注意：pagename 是您请求的页面）

但这会返回一堆 html 废话……您可以通过执行以下操作过滤 hml：

```
$.getJSON("http://en.wikipedia.org/w/api.php?"+"action=parse&format=json&prop=text&section=all&page=" + entry + "&redirects&callback=?", function(data)
    {   

        if (!data.error)
        {
            var markup = data.parse.text["*"];
            if (typeof markup !== "undefined")
            {
                $("#entry").text(entry).show();
                var blurb = $('<div id="articleText"></div>').html(markup);

                // remove links as they will not work
                blurb.find('a').each(function() { $(this).replaceWith($(this).html()); });

                // remove any references
                blurb.find('sup').remove();

                // remove cite error
                blurb.find('.mw-ext-cite-error').remove();
                $('#article').html($(blurb).find('p'));

                $("#article").append(link);
                // console.log(markup);
            }
        }
    }); 
```

你可以在这里阅读[更多](http://www.9bitstudios.com/2014/03/getting-data-from-the-wikipedia-api-using-jquery/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-23T22:19:46.733

我会检查[MobileFrontend Extension](http://www.mediawiki.org/wiki/Extension%3aMobileFrontend)，它至少会给你一些`<p>`工作。使用[http://en.wikipedia.org/w/api.php?format=json&action=mobileview&page=Unix§ions=0&prop=text|sections](http://en.wikipedia.org/w/api.php?format=json&action=mobileview&page=Unix&sections=0&prop=text|sections)给出

> {"mobileview":{"sections":[{"id":0,"text":"\nUnix\n\n
> \nUnix 和类 Unix 系统的演变\n\n\n\n公司/开发人员\nKen贝尔实验室的 Thompson、Dennis Ritchie、Brian Kernighan、Douglas McIlroy 和 Joe Ossanna\n\n\n使用\nC 和汇编语言编程\n\n\nOS 系列\nUnix\n\n\n工作状态\n当前\n\ n\n源代码模型\n历史上封闭源代码，现在一些 Unix 项目（BSD 家族和 Illumos）是开源的。\n\n\n初始版本\n1969 年 4 月 20 日；44 年前（1969 年 4 月 20 日）\n\n\ n可用语言\n英语\n\n\n内核类型\n单片机\n\n\n默认用户界面\n命令行界面和图形（X Window系统）\n\n\n许可证\n专有\n\n\n官方网站\nhttp://www.unix.org\">unix.org\n\n\n
> 
> **Unix**（正式商标为**UNIX**，有时也写成**Unix** in small caps）是一个多任务、多用户的计算机操作系统，最初由一群人于 1969 年开发
> 
> （剪断）

您必须接受它并以其他方式解析它（perl、bash 等），但此时您不妨放弃 API 并采取一些`curl`或`wget`行动，这样会很容易。

# c# - Windows RT 上 Environment.GetEnvironmentVariable("PROCESSOR_ARCHITECTURE") 和 OperatingSystem.Platform 的输出

> ID：13807142
> 
> 赞同：1
> 
> 时间：2012-12-10T18:42:18.143
> 
> 标签：c#, windows-8, cross-platform, arm, cpu-architecture

我正在编写一个跨平台的应用程序，我真的需要一些关于系统的基本信息。不仅仅是为了切换它（我可以使用编译变量，因为我在特定于平台的项目中链接了相同的代码）。

所以不要告诉我知道平台和架构信息是没有用的：
[Windows RT 和 c#](https://stackoverflow.com/questions/12631363/windows-rt-and-c-sharp)

任何人都可以向我提供此信息，因为我没有任何简单的方法可以自己获取它（我没有可以使用的模拟器/设备，我使用的是安装了 linux 的上网本，所以没有 VT -d 能力等）。

PS 请避免发布类似：“使用 qemu，使用 xxx，yyyy”等内容。考虑到有人可能也在寻找此信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:49:43.827

Surface RT 上“set”的输出

```
ALLUSERSPROFILE=C:\ProgramData
APPDATA=C:\Users\[用户]\AppData\Roaming
CommonProgramFiles=C:\Program Files\Common Files
计算机名=表面
ComSpec=C:\windows\system32\cmd.exe
FP_NO_HOST_CHECK=否
家庭驱动器=C：
HOMEPATH=\用户\
LOCALAPPDATA=C:\Users\[用户]\AppData\Local
登录服务器=\\MicrosoftAccount
NUMBER_OF_PROCESSORS=4
操作系统=Windows_NT
路径=C:\windows\system32;C:\windows;C:\windows\System32\Wbem;C:\windows\System32\WindowsPowerShell\v1.0\
PATHEXT=.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC
PROCESSOR_ARCHITECTURE=ARM
PROCESSOR_IDENTIFIER=ARM 系列 7 型号 C09 修订版 209，NVIDIA
处理器级别=3081
PROCESSOR_REVISION=0209
程序数据=C:\程序数据
ProgramFiles=C:\程序文件
提示=$P$G
PSModulePath=C:\windows\system32\WindowsPowerShell\v1.0\Modules\
公共=C:\用户\公共
SESSIONNAME=控制台
系统驱动器=C：
SystemRoot=C:\windows
TEMP=C:\Users\[用户]\AppData\Local\Temp
TMP=C:\Users\[用户]\AppData\Local\Temp
用户域=表面
USERDOMAIN_ROAMINGPROFILE=SURFACE
用户名=
USERPROFILE=C:\Users\[用户]
windir=C:\windows

```

好的，平台价值：

```
PS C:\Users\[user]> [system.environment]::OSVersion.Platform
Win32NT

```

请注意，这是来自桌面。对于沉浸式/地铁应用程序，您可能需要不同的 api。

# c# - 通过 C# 和 user32 最大化（全屏）进程的 MainWindow

> ID：13807145
> 
> 赞同：2
> 
> 时间：2012-12-10T18:42:37.513
> 
> 标签：c#, user32, maximize, showwindow

我在用：

```
private const int SW_SHOWMAXIMIZED = 3;
[DllImport("user32.dll")]
public static extern int ShowWindow(IntPtr hWnd, int nCmdShow); 
```

尝试最大化当前计算机上的另一个窗口。但是，这个“最大化”只会使窗口变成屏幕的大小，并没有真正全屏显示。

当我单击应用程序上的最大化按钮时，它将填满屏幕并变为无边框并且无法移动，除非您恢复它。

当我将最大化功能与 ShowWindow 一起使用时，不会发生这种情况。

还有其他方法吗？

# php - 显示一个用 PDO 编码的 SQL 字符串？

> ID：13807147
> 
> 赞同：0
> 
> 时间：2012-12-10T18:42:39.060
> 
> 标签：php, sql, pdo

是否可以使用这样的准备参数显示在 PDO 中编码的 SQL 字符串？：

```
$nom_client = $dbh->prepare("SELECT  client.IdClient,Nom_societe FROM client 
                                            LEFT JOIN intermediaire_has_client ON IdClient=intermediaire_has_client.Client_IdClient
                                            WHERE intermediaire_has_client.Intermediaire_IdIntermediaire=:id_inter");

$nom_client->bindValue(":id_inter",$_SESSION['num_agence'],PDO::PARAM_INT);
$nom_client->execute(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:46:59.790

如果您要求查看包含所有参数的最终“查询”，那么您将无法从您的 PHP 代码中获得您想要的内容。

准备好的语句的工作方式是将带有参数占位符的基于查询发送到 MySQL 并“准备好”。跟随对 MySQL 的调用只是传递参数本身。因此，其中包含参数的完整查询永远不会存在。

最好的办法是登录 MySQL 查询日志（您可能必须配置 MySQL 以记录所有查询），在那里您将能够看到查询的最终解释表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T18:44:45.797

SQL 字符串没有被“编码”。占位符不是复制粘贴插入。查询和值实际上是作为两个独立的部分发送到数据库的。数据库看到相同的“占位符查询”并分别获取值。

# java - 如何在休眠中删除具有复合主键的集合的元素？

> ID：13807153
> 
> 赞同：1
> 
> 时间：2012-12-10T18:43:08.963
> 
> 标签：java, hibernate, jpa, jboss6.x

我有以下实体：

```
@Embeddable
public class Noticia_i18nPK implements Serializable {

private static final long serialVersionUID = 4556976991711237055L;

private Noticia noticia;
private String codigoIdioma;

public Noticia_i18nPK() {}

public Noticia_i18nPK (Noticia noticia, String codigoIdioma) {
  this.noticia      = noticia;
  this.codigoIdioma = codigoIdioma;
}

@ManyToOne
    @JoinColumn(name="noticia_id")
@NotNull
public Noticia getNoticia() {
    return noticia;
}

public void setNoticia (Noticia noticia) {
    this.noticia = noticia;
}

@Column(name = "codigoidioma")
@NotNull
public String getCodigoIdioma() {
    return codigoIdioma;
}

public void setCodigoIdioma (String codigoIdioma) {
    this.codigoIdioma = codigoIdioma;
}

@Override
public int hashCode() {
    int result = 31;

    result += (codigoIdioma == null) ? 0 : codigoIdioma.hashCode();
    result += (noticia == null) ? 0 : noticia.getId().intValue();
    return result;
}

@Override
public boolean equals (Object obj) {
    if (this == obj)  return true;
    if (obj == null)  return false;

    if (getClass() != obj.getClass())
        return false;

    Noticia_i18nPK other = (Noticia_i18nPK) obj;
    if (codigoIdioma == null) {
        if (other.getCodigoIdioma() != null)
            return false;
    } else if (!codigoIdioma.equals (other.getCodigoIdioma()))
        return false;

    if (noticia == null) {
        if (other.getNoticia() != null)
            return false;
    } else if (noticia.getId().compareTo (other.getNoticia().getId()) != 0)
        return false;
    return true;
}
} 
```

国际化POJO：

```
 @Entity
 @Table(name = "Noticia_i18n")
 public class Noticia_i18n implements Serializable {

private static final long serialVersionUID = 9093075808608249854L;

private Noticia_i18nPK noticia_i18nPK;
private String descripcion;

@EmbeddedId
public Noticia_i18nPK getNoticia_i18nPK() {
    return noticia_i18nPK;
}

public void setNoticia_i18nPK (Noticia_i18nPK noticia_i18nPK) {
    this.noticia_i18nPK = noticia_i18nPK;
}

@Column(name="descripcion")
@Length(max=5000)
@NotNull
public String getDescripcion() {
    return descripcion;
}

public void setDescripcion (String descripcion) {
    this.descripcion = descripcion;
}

@Override
public int hashCode() {
    return noticia_i18nPK.hashCode();
}

@Override
public boolean equals (Object obj) {
    if (this == obj)  return true;
    if (obj == null)  return false;

    if (getClass() != obj.getClass())
        return false;

    Noticia_i18n other = (Noticia_i18n) obj;
    if (noticia_i18nPK == null) {
        if (other.getNoticia_i18nPK() != null)
            return false;
    } else if (!noticia_i18nPK.equals (other.getNoticia_i18nPK()))
        return false;

    return true;
}
} 
```

和 POJO：

```
@Entity
@Table(name="noticia")
@SequenceGenerator(
    name = "noticia_id_seq",
    sequenceName = "ef.noticia_id_seq",
    allocationSize=1)
public class Noticia extends AuctionsBaseEntity {

private static final long serialVersionUID = -5402495697859251461L;

private Long id;
private Date fecha;
private Set<Noticia_i18n> noticia_i18n;

@Id
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "noticia_id_seq")
@Column(name = "id")
public Long getId() {
    return id;
}
public void setId(Long id) {
    this.id = id;
}

public Date getFecha() {
    return fecha;
}
public void setFecha(Date fecha) {
    this.fecha = fecha;
}

@JoinColumn(name="noticia_id")
@OneToMany(cascade={CascadeType.ALL})
public Set<Noticia_i18n> getNoticia_i18n() {
    return noticia_i18n;
}

public Noticia_i18n getNoticia_i18n (String codigoIdioma) {
    getNoticia_i18n();

    if (!VacioHelper.esVacio (this.noticia_i18n)) {
        for (Noticia_i18n i18nActual : this.noticia_i18n) {
            if ((i18nActual.getNoticia_i18nPK() != null) &&
                (i18nActual.getNoticia_i18nPK().getCodigoIdioma().compareTo (codigoIdioma) == 0))
                return i18nActual;
        }
    }
    return null;
}

public void setNoticia_i18n (Set<Noticia_i18n> noticia_i18n) {
    this.noticia_i18n = noticia_i18n;
}

public void addNoticia_i18n (Noticia_i18n noticia_i18n) {
    if (noticia_i18n != null) {
        if (this.noticia_i18n == null)
            this.noticia_i18n = new HashSet<Noticia_i18n>();

        noticia_i18n.getNoticia_i18nPK().setNoticia (this);
        this.noticia_i18n.add (noticia_i18n);
    }
}
} 
```

问题是，如何删除 noticia_i18n 元素？例如，如果我得到一个包含三个**noticia_i18n**元素的通知，如下所示：

```
EntityManager em;
....
noticia = DaoFactory.getDefault().getNoticiaDao().findById (em, noticiaActual.getIdNoticia());
... 
```

如果我尝试删除一个**noticia_i18n**实体：

```
Noticia_i18n traduccionNoticia = noticia.getNoticia_i18n (noticiaActual.getCodigoIdioma());
DaoFactory.getDefault().getNoticia_i18nDao().remove (em, traduccionNoticia); 
```

我得到错误：

```
deleted entity passed to persist Noticia_i18n#<null> 
```

但是如果我添加代码（在**remove**之前）：

```
noticia.getNoticia_i18n().remove (traduccionNoticia); 
```

错误在于更新，因为 Hibernate 尝试使用空值 noticia_id 更新 Noticia_i18n。

问题是：如何删除这个集合的元素？类的映射需要进行哪些更改？

# c# - 如何在 WinRT 中将小数转换为任何货币？

> ID：13807154
> 
> 赞同：0
> 
> 时间：2012-12-10T18:43:13.403
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime

如何在 WinRT 中将十进制值转换为任何货币？实际上我正在做以下事情：

```
decimal d=2;
d.toSring("C"); 
```

这给了我 2,00 欧元，因为我来自欧盟。我怎样才能得到这个美元价值？我知道在 ASP 中它的工作原理是这样的：

```
decimal d=2;
d.toString("C",CultureInfo.getCulture("en-US")); 
```

但是函数**getCulture**在 WinRT 中不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:50:42.733

有关更多详细信息，请参见[此处](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.currentculture.aspx)和[此处](https://stackoverflow.com/questions/12106919/fundamental-change-in-how-to-specify-culture-in-a-windows-8-app)。

```
CultureInfo.CreateSpecificCulture("nl-NL"); 
```

# c++ - 在我的简单 C++ 代码中访问冲突写入位置

> ID：13807155
> 
> 赞同：0
> 
> 时间：2012-12-10T18:43:14.160
> 
> 标签：c++

这是我的代码：

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

struct car
{
    string name, model;
    int year;   
};

void search_car(int CarYear)
{
    cout<<"1";
    ifstream in;
    cout<<"2";
    car c1;
    cout<<"3";
    in.open("Cars.txt",ios::binary|ios::in);
    cout<<"4"<<endl;
    while(!in.eof())
    {
        cout<<" 5";
        in.read((char *) &c1, sizeof(car));
        cout<<" 6.Car Year: "<<c1.year<<endl;
        if(c1.year == CarYear)
        {
            cout<<" 7>>> ";
            cout<<c1.name<<" "<<c1.model<<" "<<c1.year;
            cout<<" <<<8"<<endl;
        }
    }
    cout<<" 9";
    in.close();
    cout<<" 10";    
}

void main()
{
    car c[100];
    int carNum, menuAct = 0, CarYear = -1, cycle = 1;
    ofstream out;
    while (cycle == 1)
    {
        //clrscr();
        cout<<endl<<endl<<"1.Enter New car"<<endl<<"2.Search"<<endl<<"3.Exit"<<endl;
        cin>>menuAct;
        cout<<"   Menu Action: "<<menuAct<<endl;
        if(menuAct == 1)
        {
            cout<<"Enter Num OF Cars: ";
            cin>>carNum;
            out.open("Cars.txt",ios::binary|ios::out|ios::app);
            for(int i = 0; i < carNum; i++)
            {
                cout<<"Enter Name OF Car: ";
                cin>>c[i].name;
                cout<<"Enter model OF Car: ";
                cin>>c[i].model;
                cout<<"Enter year OF Car: ";
                cin>>c[i].year;     
                out.write((char *) &c[i], sizeof(car));
            }
            out.close();
        }
        else if(menuAct == 2)
        {
            cout<<"Enter Car Year: ";
            cin>>CarYear;
            cout<<" 0";
            //cout<<" Y: "<<CarYear;
            search_car(CarYear);
            cout<<" 11";
            //menuAct = 0;
        }
        else if(menuAct == 3)
        {
            cycle = 0;
        }
    }   
} 
```

错误：

[http://s3.picofile.com/file/7580464836/cpp_err11.jpg](http://s3.picofile.com/file/7580464836/cpp_err11.jpg)

**发生了什么？** 我使用了一些 cout 来跟踪正在发生的事情，并且代码在 10 号处停止。

最后一辆车也打印了两次！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:08:51.960

我对你有问题并不感到惊讶！您从字面上保存结构的字节，然后当您从文件中读回它们时，您希望再次获得 std::string 。它根本不起作用。

问题是 car 结构不包含它引用的所有数据：std::string 成员实际上只是指向包含实际字符串数据的动态数组的指针。您将汽车结构写为原始字节，因此字符串永远不会归档。不可能从其中读出它们。

更糟糕的是，当您重新读取结构时，您将 std::string 中的指针设置为垃圾值。你不可能希望他们碰巧指向的内存包含你想要的东西。

您需要为 car 结构定义序列化函数，使用深层副本将其发送到外流，然后安全地读回。永远不要将原始指针值写入文件。

### 示例代码

```
ostream& operator <<(ostream& os, const car& c) {
    return os << c.name << endl << c.model << endl << c.year << endl;
}
istream& operator >>(istream& is, car& c) {
    is >> c.name;
    is >> c.model;
    is >> c.year;
    return is;
} 
```

更改`in.read((char *) &c1, sizeof(car));`为`in >> c1;`。

更改`out.write((char *) &c[i], sizeof(car));`为`out << c[i];`。

整洁多了！PS。`char*`作为一个很好的一般规则，在您了解它的作用以及字符串的处理方式之前，永远不要强制转换！

# php - 读取动态创建的字段

> ID：13807160
> 
> 赞同：1
> 
> 时间：2012-12-10T18:43:26.907
> 
> 标签：php, jquery, dynamic

我了解到如何使用[jquery append](http://docs.jquery.com/Manipulation/append)将输入字段动态添加到表单中。我的问题是：如何读取这些字段？例如：我想从我的访问者那里输入一个数字，我为每个数字创建一个输入，当我不知道字段名称和它们的数量时如何读取它？一个重要的问题是我如何命名它们。请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:49:14.087

如果没有确切地看到代码很难说，但可以说它类似于

`$('body').append('<input type="text" class="readMe">');`

您可以通过以下方式获取那些人的价值观：

```
$('.readMe').each(function(){
$(this).val();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T19:01:21.130

我们可以进行动态创建的命名和读取字段，这就是您的答案：

```
<div>
     <input type="radio" id="radio_1" name="radio1" value="1" /> 1<br />
</div> 
```

在 Js 中：

```
for(i=2;i<=8;i++){
    $("div")
        .append($("#radio_1")
        .clone().attr({"id":"radio_"+i,"value":i}))
        .append(" "+i+"<br />");
}
$(":radio").click(function() {
    var radioID = $(this).attr("id");
    alert("by selector (:radio): " + radioID);
});

$("input[name=radio1]").click(function() {
    var radioID2 = $(this).attr("id");
    alert("by groupname: " + radioID2);
}); 
```

您和评论员可以[在 jsfeedle中看到它](http://jsfiddle.net/eFkC7/3/)

# google-apps-script - 谷歌应用脚 本网络应用验证所有权

> ID：13807162
> 
> 赞同：2
> 
> 时间：2012-12-10T18:43:48.980
> 
> 标签：google-apps-script, chrome-web-store

几周前，我们在 Chrome 网上商店 (CWS) 中注册并发布了一个使用 UiApp 构建的网络应用程序，没有任何问题。这是该项目的链接，以防万一 [http://app.thexs.ca/xsMerge](http://app.thexs.ca/xsMerge)

现在，当我去编辑这个项目时，CWS 要求通过谷歌网站管理员工具对与这个网络应用程序关联的 Url 进行网站验证，如下所示： [https ://script.google.com/a/macros/thexs.ca/s/ AKfycbzJ3owOK0pzCLfLTNHBQXNSWWlPFwQm2cf5EzTGwgwr24BtY43W/exec](https://script.google.com/a/macros/thexs.ca/s/AKfycbzJ3owOK0pzCLfLTNHBQXNSWWlPFwQm2cf5EzTGwgwr24BtY43W/exec)

网站管理员工具中的此 URL 历史记录显示 31 天前“验证成功”，但也显示 2 天前“重新验证失败。我们找不到验证元标记”。

在这种情况下，我不知道如何进行所有权验证

问候， 福斯托

编辑 1： 以防万一这可以为这个问题带来更多启示，这里是 manifest.json 对于这个网络应用程序的样子：

```
{
  "name": "xsMerge",
  "description": "Merging your Contacts & Lists with Custom Documents, Web pages and Emails.",
  "version": "1.101",
  "manifest_version": 2,
  "icons": {
    "128": "xsMerge-128.png"
  },
  "app": {
    "urls": [
      "https://script.google.com/a/macros/thexs.ca/s/AKfycbzJ3owOK0pzCLfLTNHBQXNSWWlPFwQm2cf5EzTGwgwr24BtY43W/exec"
    ],
    "launch": {
      "web_url": "https://script.google.com/a/macros/thexs.ca/s/AKfycbzJ3owOK0pzCLfLTNHBQXNSWWlPFwQm2cf5EzTGwgwr24BtY43W/exec"
    }
  }
} 
```

# java - 使用 File 实例化 NPIOIFSFileSystem 对象的问题

> ID：13807167
> 
> 赞同：0
> 
> 时间：2012-12-10T18:44:04.813
> 
> 标签：java, apache-poi

首先，我在家里问这个问题=-远离所有来源；我明天会尝试更新。

本质上我是像这样实例化 NPOIFSFileSystem ：

```
NPOIFSFileSystem fs = new NPOIFSFileSystem(new File(this.getLocalFile())); 
```

getLocalFile() 方法将字符串返回到文件路径 - 我知道该文件存在于该位置。但是，实例化返回错误：

```
ArrayIndexOutOfBounds 
```

有没有人对此有任何想法？

有问题的文件是一个 XLS 文件，它确实包含阿拉伯字符，我想知道这是否会导致问题。

我以前确实使用过 POIFSFileSystem ，但有问题的 XLS 文件引起了一些问题，各种论坛建议移至 NPOIFSFileSystem

那么，有没有人见过这个？或者任何人都可以给我一些提示/指针吗？

如果需要进一步澄清，请询问，明天当我回来工作时（我们已经修复了我们的互联网连接），我会更新这个问题。

在此先感谢内森

**编辑 1** 这是完整的堆栈跟踪：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: -1
    at org.apache.poi.poifs.filesystem.BlockStore$ChainLoopDetector.claim(BlockStore.java:95)
    at org.apache.poi.poifs.filesystem.NPOIFSStream$StreamBlockByteBufferIterator.next(NPOIFSStream.java:212)
    at org.apache.poi.poifs.filesystem.NPOIFSStream$StreamBlockByteBufferIterator.next(NPOIFSStream.java:186)
    at org.apache.poi.poifs.property.NPropertyTable.buildProperties(NPropertyTable.java:88)
    at org.apache.poi.poifs.property.NPropertyTable.<init>(NPropertyTable.java:66)
    at org.apache.poi.poifs.filesystem.NPOIFSFileSystem.readCoreContents(NPOIFSFileSystem.java:379)
    at org.apache.poi.poifs.filesystem.NPOIFSFileSystem.<init>(NPOIFSFileSystem.java:202)
    at org.apache.poi.poifs.filesystem.NPOIFSFileSystem.<init>(NPOIFSFileSystem.java:163)
    at org.apache.poi.poifs.filesystem.NPOIFSFileSystem.<init>(NPOIFSFileSystem.java:145)
    at com.turnitin.datamap.parser.standard.XLSParser.defineParsableObject(XLSParser.java:67)
    at com.turnitin.datamap.parser.standard.XLSParser.setUp(XLSParser.java:56)
    at com.turnitin.datamap.parser.standard.XLSParser.<init>(XLSParser.java:46)
    at com.turnitin.datamap.controller.DataMapController.parseData(DataMapController.java:255)
    at com.turnitin.datamap.controller.DataMapController.processControl(DataMapController.java:162)
    at com.turnitin.datamap.controller.DataMapController.processStart(DataMapController.java:130)
    at com.turnitin.datamap.controller.DataMapController.main(DataMapController.java:61) 
```

我正在运行 POI3-8

我将升级到 3.9，然后再试一次，让你知道。

再次感谢内森

**编辑 2**

我已经更新到 3.9 并将很快再次测试 - 只是在测试之前等待其他一些项目完成。我会发回结果。

谢谢内森

**编辑 3** 同样奇怪的问题。这是我现在使用 POI 3.9 的堆栈跟踪：

```
 Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: -1
    at org.apache.poi.poifs.filesystem.BlockStore$ChainLoopDetector.claim(BlockStore.java:95)
    at org.apache.poi.poifs.filesystem.NPOIFSStream$StreamBlockByteBufferIterator.next(NPOIFSStream.java:212)
    at org.apache.poi.poifs.filesystem.NPOIFSStream$StreamBlockByteBufferIterator.next(NPOIFSStream.java:186)
    at org.apache.poi.poifs.property.NPropertyTable.buildProperties(NPropertyTable.java:88)
    at org.apache.poi.poifs.property.NPropertyTable.<init>(NPropertyTable.java:66)
    at org.apache.poi.poifs.filesystem.NPOIFSFileSystem.readCoreContents(NPOIFSFileSystem.java:379)
    at org.apache.poi.poifs.filesystem.NPOIFSFileSystem.<init>(NPOIFSFileSystem.java:202)
    at org.apache.poi.poifs.filesystem.NPOIFSFileSystem.<init>(NPOIFSFileSystem.java:163)
    at org.apache.poi.poifs.filesystem.NPOIFSFileSystem.<init>(NPOIFSFileSystem.java:145)
    at com.turnitin.datamap.parser.standard.XLSParser.defineParsableObject(XLSParser.java:67)
    at com.turnitin.datamap.parser.standard.XLSParser.setUp(XLSParser.java:56)
    at com.turnitin.datamap.parser.standard.XLSParser.<init>(XLSParser.java:46)
    at com.turnitin.datamap.controller.DataMapController.parseData(DataMapController.java:264)
    at com.turnitin.datamap.controller.DataMapController.processControl(DataMapController.java:162)
    at com.turnitin.datamap.controller.DataMapController.processStart(DataMapController.java:130)
    at com.turnitin.datamap.controller.DataMapController.main(DataMapController.java:61) 
```

谢谢内森

**编辑 4** 我已从 NPOIFSFileSystem 切换到 POIFSFileSystem：

```
FileInputStream fis = new FileInputStream(this.getFileToParse());
    POIFSFileSystem excelFile = new POIFSFileSystem(fis);
    Workbook wb = WorkbookFactory.create(excelFile); 
```

这给了我以下堆栈跟踪：

```
 java.io.IOException: block[ 1273 ] already removed - does your POIFS have circular or duplicate block references?
    at org.apache.poi.poifs.storage.BlockListImpl.remove(BlockListImpl.java:89)
    at org.apache.poi.poifs.storage.RawDataBlockList.remove(RawDataBlockList.java:34)
    at org.apache.poi.poifs.storage.BlockAllocationTableReader.fetchBlocks(BlockAllocationTableReader.java:221)
    at org.apache.poi.poifs.storage.BlockListImpl.fetchBlocks(BlockListImpl.java:123)
    at org.apache.poi.poifs.storage.RawDataBlockList.fetchBlocks(RawDataBlockList.java:34)
    at org.apache.poi.poifs.property.PropertyTable.<init>(PropertyTable.java:63)
    at org.apache.poi.poifs.filesystem.POIFSFileSystem.<init>(POIFSFileSystem.java:159)
    at com.turnitin.datamap.parser.standard.XLSParser.defineParsableObject(XLSParser.java:68)
    at com.turnitin.datamap.parser.standard.XLSParser.setUp(XLSParser.java:56)
    at com.turnitin.datamap.parser.standard.XLSParser.<init>(XLSParser.java:46)
    at com.turnitin.datamap.controller.DataMapController.parseData(DataMapController.java:264)
    at com.turnitin.datamap.controller.DataMapController.processControl(DataMapController.java:162)
    at com.turnitin.datamap.controller.DataMapController.processStart(DataMapController.java:130)
    at com.turnitin.datamap.controller.DataMapController.main(DataMapController.java:61) 
```

我知道该文件存在并且是有效的 XLS 文件。

我正在使用 Java 1.7 和 Poi 3.9。

应用程序从 /usr/java/data_map_tool 运行，文件从 /home/javaapp/data_map_files 下载并处理

该应用程序在作为相关目录所有者的 javaapp 用户下运行。

有一次，我将文件下载到了运行应用程序的目录中的一个目录中，并且该目录可以正常工作-但是，文件大小禁止将其用作文件存储。

有没有人对此有任何想法，因为我正用这个把头撞在墙上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:02:06.073

嗯，我破解了！正如建议的那样，问题出在原始源文件上。长话短说就是BOM。XSL 文件的开头有一个字节顺序标记。当我的 Java 应用程序使用 FileInputStream 打开它时，它会导致混乱。

所以，我刚刚更新了我的代码以打开文件

```
BOMInputStream(); 
```

来自 Apache commons io。

这已经解决了这个问题。

非常感谢内森

# c++ - 为什么用构造函数调用符号定义指向指针变量的指针是非法的？

> ID：13807168
> 
> 赞同：11
> 
> 时间：2012-12-10T18:44:14.910
> 
> 标签：c++

当我使用构造函数调用表示法（declare-）定义指向指针的指针（而不是赋值表示法 - 当然在运行时会做同样的事情；这只是一个约定），我得到一个编译器错误。我想知道为什么会这样。

```
struct  Foo 
{ /* ... */ };

int main(int argc, char** argv)
{
  Foo*  parFoo = new Foo[2];
  Foo** ppFoo(&parFoo); // invalid: C2059
  Foo** ppFoo = &parFoo; // OK

  delete[] parFoo;
} 
```

错误是 C2059 - 无效令牌，这并没有说太多。但是，这`&`不是问题（这意味着它可能不是运算符优先级错误）。如果我执行以下操作：

```
int main(int argc, char** argv)
{
  Foo*  parFoo = new Foo[2];
  Foo** ppFoo = &parFoo; // OK
  Foo** ppFoo2(ppFoo); // invalid: C2061

  delete[] parFoo;
} 
```

...然后我得到一个 C2061，这意味着这一次是`ppFoo`在错误位置的标识符。

什么语法规则导致了这种情况，即为什么不能使用构造函数调用符号来定义指向指针的指针，而只能使用“较少程度指向”类型？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T18:54:46.867

它看起来像有效的 C++。而且，正如其他人指出的那样，GCC 确实接受了它。根据您得到的编译器错误，它看起来像是 MSVC 解析器中的错误。

事实上，添加括号有助于它正确解析代码：

```
Foo*  parFoo = new Foo[2];
Foo (**ppFoo2)(&parFoo); // compiles in MSVC too 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T19:38:30.507

在 VS2005 中，代码可以简化为

```
int main() {
  int** ppFoo(0);
} 
```

它会产生相同的错误。显然这是编译器中的一个错误。

# javascript - 如何为移动设备检测和交付单独的 CSS 文件？

> ID：13807173
> 
> 赞同：0
> 
> 时间：2012-12-10T18:44:38.540
> 
> 标签：javascript, html, css, mobile

我正在尝试检测移动设备并加载单独的 CSS 文件（如果它是移动设备）。为什么我的代码不起作用？

```
 var isMobile = {
    Android: function() {
        return navigator.userAgent.match(/Android/i);
    },
    BlackBerry: function() {
        return navigator.userAgent.match(/BlackBerry/i);
    },
    iOS: function() {
        return navigator.userAgent.match(/iPhone|iPad|iPod/i);
    },
    Opera: function() {
        return navigator.userAgent.match(/Opera Mini/i);
    },
    Windows: function() {
        return navigator.userAgent.match(/IEMobile/i);
    },
    any: function() {
        return (isMobile.Android() || isMobile.BlackBerry() || isMobile.iOS() || isMobile.Opera() || isMobile.Windows());
    }
};

function getcss(cssfile){

    var loadcss = document.createElement('link')

    loadcss.rel = "stylesheet"

    loadcss.setAttribute("type", "text/css")

    loadcss.setAttribute("href", cssfile)

    document.getElementsByTagName("head")[0].appendChild(loadcss)

}

if(isMobile.any() == true)
// Defines the resolution range you're targeting (less than 800 pixels wide in this case)

{

getcss('cssclass.css')
// Defines the .css file you want to load for this range (800x600.css)

}

else 

{

getcss('css2menuPage.css') 
//This else statement has "if" condition. If none of the following criteria are met, load 1280x1024.css

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:18:09.177

@media 屏幕大小就像上面提到的布拉德。否则，您需要设置用户代理数据库。

@media screen and (max-width:960px) { h1, h2 { color:#990000; 字体大小：1.4em；} }

# c# - C# - 网络浏览器和 JScript

> ID：13807179
> 
> 赞同：1
> 
> 时间：2012-12-10T18:44:59.833
> 
> 标签：c#, download, webbrowser-control

我想在我的 C#-Program 中从 streamcloud 中提取下载 url。因此，我必须等待 10 秒钟，单击一个按钮，然后单击播放器。然后我可以从页面源中提取下载 url。

我的问题：

我有两种方法可以做到这一点：

1.  自动：我必须在 10 秒后模拟单击按钮。但我的 HtmlElement 始终为空。

2.  手动：我创建了一个带有 WebBrowser 控件的表单。但是这个控件没有显示例如按钮。我认为 WebBrowser 控件正在阻止所有 jscript 内容。有没有办法让 WebBrowser 显示所有内容？

还是有其他方法可以获取下载地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:16:13.027

如果您想在安装了浏览器（IE 或 Firefox）的机器上执行此操作，您可以使用任何框架进行自动化测试。[WatiN](http://watin.org)是一个很好的选择。

像这样的东西：

```
using (var browser = new IE("http://www.streamcloud.com/YOUR_VIDEO_URL"))
{
    browser.Button(Find.ByName("Play")).Click();
    // wait for 10 seconds, or better use some WatiN functionality like WaitUntilExists
    System.Threading.Thread.Sleep(10000);
    // extract URL
    var element = browser.Element(Find.ById("URL_CONTAINER_ID"));
    string videoUrl = element.Text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-01T16:14:12.527

只需使用 httpwebrequest 或 webclient：

```
public string ResolveStreamcloud(string url)
{
    var client = new WebClient();
    var reqParams = new NameValueCollection();

    var response = client.DownloadString(url);

    var regexObj = new Regex("<input.*?name=\"(.*?)\".*?value=\"(.*?)\">", RegexOptions.Singleline);
    var matchResults = regexObj.Match(response);
    while (matchResults.Success)
    {
        reqParams.Add(matchResults.Groups[1].Value, matchResults.Groups[2].Value);
        matchResults = matchResults.NextMatch();
    }

    Thread.Sleep(10500);

    byte[] responsebytes = client.UploadValues(url, "POST", reqParams);
    string responsebody = Encoding.UTF8.GetString(responsebytes);

    string resolved = Regex.Match(responsebody, "file: \"(.+?)\",", RegexOptions.Singleline).Groups[1].Value;

    if (!String.IsNullOrEmpty(resolved))
    {
        return resolved;
    }
    else
    {
        throw new Exception("File not found!");
    }

} 
```

# windows-8 - 如何检测 Windows 8 中的搜索是否已关闭？

> ID：13807180
> 
> 赞同：0
> 
> 时间：2012-12-10T18:45:06.470
> 
> 标签：windows-8, share, charms-bar

检测用户是否关闭了对我的应用程序的搜索是一种优雅的方法，所以如果他试图搜索我的应用程序，我可以通知他他已经关闭了搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:10:43.067

如果为您的应用关闭了搜索，您甚至不会收到 BeginSearch 的通知，因此基本上没有任何事件可以开始。

# java - 让 java 函数接受集合或数组

> ID：13807186
> 
> 赞同：12
> 
> 时间：2012-12-10T18:45:28.930
> 
> 标签：java, arrays, collections, function-declaration

我正在尝试编写一个函数，该函数需要一些字符串并对其进行处理。

我要做的唯一一件事就是对字符串进行循环。现在我最终得到了一个尴尬的结构

```
public void foo(String[] myStrings){
    foo(java.util.Arrays.asList(myStrings));
}

public void foo(Iterable<String> myStrings){
    for(String i : myStrings){
        bar(i);
    }
} 
```

感觉多余，因为

```
for(String i : myStrings){
    bar(i);
} 
```

对于 String[] 类型的 myStrings 来说，这将是完全有效的代码。

是否有一个我可以让 foo 接受的类同时允许集合和数组？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-10T18:48:30.953

请参阅[为什么数组不能分配给 Iterable？](https://stackoverflow.com/questions/1160081/why-is-an-array-not-assignable-to-iterable)

简短的回答：没有。据我了解，数组类型是合成代码，因此不实现`Iterable`或任何其他类型。您需要提供重载方法或要求客户端在`Arrays.asList`调用点调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T18:48:46.360

不幸的是 array 没有实现`Iterable`，尽管 for-each 循环在两者上都有效。

您只能接受`Iterable`，因为传递数组有点过时（数组的性能优势`ArrayList`可以忽略不计）。现有数组可以很容易地包装并转换为`List`using [`Arrays.asList(T... a)`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#asList%28T...%29)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T19:04:52.797

尽管数组可以在 for-each 循环中使用，但它们不实现`Iterable`. 只有两种可能性，要么重载你所说的方法，要么只提供可迭代的变体并强制客户端调用`Arrays.asList()`.

如果您还想提供数组重载，您可以将其签名从简单数组更改为可变参数：

```
public void foo(String... myStrings){
    foo(java.util.Arrays.asList(myStrings));
} 
```

在这种情况下，请注意原始数组和原始包装数组之间的不兼容：

```
static void foo(int... ints) {}
foo(new Integer[] {1, 2}); // compile error 
```

和：

```
static void foo(Integer... integers) {}
foo(new int[] { 1, 2 }); // compile error 
```

**最晦涩的部分，带有通用可变参数：**

```
static <T> T[] foo(T... ts) {
    return ts;
} 
```

如果您传递一个整数数组：

```
Integer[] integers = { 1, 2 };
System.out.println(Arrays.deepToString(foo(integers)));
> [1, 2] 
```

的值`ts`是具有 2 个元素的整数数组：`1`和`2`。

然而，如果你传递一个原始整数数组，就会发生一件有趣的事情：

```
int[] ints = { 1, 2 };
System.out.println(Arrays.deepToString(foo(ints)));
> [[1, 2]] 
```

`int[][]`在这种情况下，ts 的值是一个只有一个元素的 int 数组 ( ) 数组，也就是最初传递的数组。这样做的原因是 an`int`不是一个`Object`（自动装箱在这里没有帮助），而一个 int 数组是，所以`T`类型参数的值变成`int[]`.

# android - 安卓的java IDE

> ID：13807188
> 
> 赞同：0
> 
> 时间：2012-12-10T18:45:44.673
> 
> 标签：android, ide

我试图自己找到，但失败了，所以也许这里有人可以推荐一个用于 android 4 中基于 java 的项目的工具（不是用于 android 开发，但可以在 android 设备中运行）？

我找到了不错的编辑器 DroidEdit，但它只是编辑器，我看起来更像是 eclipse 或 intellij 的想法——带有自动完成、项目文件树等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:51:33.360

试试这个： -[旧 1.x JavaIDEdroid](https://play.google.com/store/apps/details?id=com.t_arn.JavaIDEdroid&feature=also_installed) - [AIDE - Android IDE - Java、C++](https://play.google.com/store/apps/details?id=com.aide.ui&hl=en)

由 SLaks 建议

# android - Android：如何为相同的设备英寸使用不同的布局资源？

> ID：13807192
> 
> 赞同：0
> 
> 时间：2012-12-10T18:46:10.593
> 
> 标签：android, layout, resources, version

我有一个主要为 10 英寸开发的应用程序。但是，我需要将其编码为 7 英寸。我有两个 7 英寸平板电脑：三星 P1000 和三星 Tab 2 P3100。他们分别使用不同的 Android 版本 - 2.x 和 4.0。使用 /res/layout-large 中的布局，非常适合 P1000，但对于 P3100 来说非常小。

所以我考虑创建一个名为 /res/layout-large-v8 的文件夹，专门用于 2.x 版本，而 /res/layout-large 将处理其他 7 英寸平板电脑。但它没有用。两款平板电脑都使用相同的 /res/layout-large-v8 xmls 文件。

任何想法如何使用 /res/layout-large 而不是 v8 来制作 P3100？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:57:09.863

尝试这个

```
res/layout/main_activity.xml  For handsets (smaller than 600dp available width)
res/layout-sw600dp/main_activity.xml For 7” tablets (600dp wide and bigger)
res/layout-sw720dp/main_activity.xml For 10” tablets (720dp wide and bigger) 
```

并参考这篇漂亮的文章[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:34:43.197

有效！现在，res/layout-large 是 7 英寸平板电脑的默认设置，因此 res/layout-large-v14 适用于 Android 4.0 或更高版本。

# url-rewriting - MVC 路由 - 相同的路由但显示不同的 URL

> ID：13807193
> 
> 赞同：0
> 
> 时间：2012-12-10T18:46:15.447
> 
> 标签：url-rewriting, asp.net-mvc-routing

我想将格式 A 的 URL 重写为格式 B。

*格式 A*

www.domain.com/Users/GenericAction?action=AddUser

*格式 B*

www.domain.com/Users/AddUser

我仍然需要路由到我的用户控制器的 GenericAction 操作。

```
public ActionResult GenericAction(string action)
{

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:55:57.793

路由在 global.asax 文件中完成。默认情况下，我认为它是 domain.com/controller/action/id

这是关于如何映射路线的一个很好的解释：http: [//www.codeproject.com/Articles/299531/Custom-routes-for-MVC-Application](http://www.codeproject.com/Articles/299531/Custom-routes-for-MVC-Application)

# opengl-4 - glGenerateMipmap 是如何工作的？

> ID：13807194
> 
> 赞同：4
> 
> 时间：2012-12-10T18:46:17.453
> 
> 标签：opengl-4

我用参数 level = 0 调用 glTexImage2D。然后我调用 glGenerateMipmap(GL_TEXTURE_2D)。GL_TEXTURE_BASE_LEVEL 和 GL_TEXTURE_MAX_LEVEL 会发生什么？我假设它们是这样自动设置的：

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_BASE_LEVEL, 0);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAX_LEVEL, mipmapsCount - 1); 
```

稍后我可以手动设置上述参数，例如降低最大级别。那正确吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T01:38:03.877

正如您提到的，mipmap 堆栈的 GL_TEXTURE_BASE_LEVEL 和 GL_TEXTURE_MAX_LEVEL 值是派生的。这些值定义了所谓的*纹理完整性*所需的 mipmap 级别范围。当您要求 OpenGL 使用 自动生成 mipmap 时`glGenerateMipmap`，会填充整个堆栈。如果您使用`glTextureStorage`指定级别数，则 GL_TEXTURE_MAX_LEVEL 设置为比调用中提供的最大级别少一。

您可以在构建 mipmap 堆栈后修改基本和最大级别也是正确的，但是如果您让 OpenGL 构建 mipmap 堆栈，我认为它不会给您带来太多好处。如果我没记错的话，你会在加载 mipmap 时修改基本和最大级别（通过重复调用`glTexImage*`和递增*level*参数），这样你就不需要加载整个 mipmap 堆栈（你可以这样做节省纹理内存，或者可能更好地控制更高级别的采样[即，堆栈中较小的 mipmap]）。您还可以使用 GL_TEXTURE_MIN_LOD 和 GL_TEXTURE_MAX_LOD 来控制在纹理中使用 mipmap 堆栈中的哪些 mipmap。这样做的原因是允许在纹理时异步加载 mipmap 级别。

# graph-databases - 仅当两条边都存在时，如何获取给定顶点的两种给定类型（即标签）的所有边？

> ID：13807202
> 
> 赞同：1
> 
> 时间：2012-12-10T18:47:06.503
> 
> 标签：graph-databases, gremlin

对于给定的顶点，只有当该顶点的两种边类型都存在时，我们如何才能获得两种不同类型（即标签）的所有出边？

例如，

```
g = TinkerGraphFactory.createTinkerGraph(); 
```

我想认识所有*创建了*一些软件并且*认识*某人的人。显然，我不能使用

```
g.V.out('created', 'knows') 
```

因为，这会给所有*创造*过东西或*认识*某人的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:08:52.537

我并没有打算以这种方式解决这个问题，但使用 and() 步骤似乎在这里工作得很好：

```
gremlin> g = TinkerGraphFactory.createTinkerGraph()
==>tinkergraph[vertices:6 edges:6]
gremlin> g.V.and(_().both("knows"),_().both("created"))
==>v[1]
==>v[4] 
```

要获得满足 AND 标准的顶点的边/路径，您可以执行以下操作：

```
gremlin> g.V.and(_().both("knows"),_().both("created")).bothE("created","knows").dedup
==>e[9][1-created->3]
==>e[7][1-knows->2]
==>e[8][1-knows->4]
==>e[10][4-created->5]
==>e[11][4-created->3] 
```

由于 Gremlin 的第一部分获得了具有“已知”和“已创建”边的顶点，因此您可以安全地抓取两个返回顶点的边并返回唯一的边。

# c++ - C++ 加法运算符

> ID：13807203
> 
> 赞同：0
> 
> 时间：2012-12-10T18:47:11.323
> 
> 标签：c++, operator-overloading

这是我将 2 个 Duration 对象以格式添加在一起的方法`(HH,MM,SS)`。

```
 inline ostream& operator<<(ostream& ostr, const Duration& d){
      return ostr << d.getHours() << ':' << d.getMinutes() << ':' << d.getSeconds();
    }

    Duration operator+ (const Duration& x, const Duration& y){
        if ( (x.getMinutes() + y.getMinutes() >= 60) && (x.getSeconds() + y.getSeconds() >= 60) ){
           Duration z( (x.getHours() + y.getHours() + 1), (x.getMinutes() + y.getMinutes() + 1 - 60), (x.getSeconds() + y.getSeconds() - 60) );
           return z;
        }
        else if (x.getSeconds() + y.getSeconds() >= 60){
           Duration z( (x.getHours() + y.getHours()), (x.getMinutes() + y.getMinutes() + 1), (x.getSeconds() + y.getSeconds() - 60) );
           return z;
        }
        else if (x.getMinutes() + y.getMinutes() >= 60){
           Duration z( (x.getHours() + y.getHours() + 1), (x.getMinutes() + y.getMinutes() - 60), (x.getSeconds() + y.getSeconds()) );
           return z;
        }
        else{
            Duration z( (x.getHours() + y.getHours()), (x.getMinutes() + y.getMinutes()), (x.getSeconds() + y.getSeconds()) );
            return z;
        }
    } 
```

在我的主要方法中，我有：

```
 Duration dTest4 (01,25,15);
  Duration result = dTest4+dTest4;
  cout << result << endl; 
```

不幸的是，当我运行程序时，我得到了这个错误：

```
 error LNK2019: unresolved external symbol "class std::basic_ostream<char,struct std::char_traits<char> > & __cdecl operator<<(class std::basic_ostream<char,struct std::char_traits<char> > &,class Duration const &)" (??6@YAAAV?$basic_ostream@DU?$char_traits@D@std@@@std@@AAV01@ABVDuration@@@Z) referenced in function _wmain 1>C:\Users\...exe : fatal error LNK1120: 1 unresolved externals 
```

我希望能够在单个实体中将两次相加。IE。小时加在一起，然后是分钟，然后是秒。因此`if-else`，当 2 组分钟超过一个小时的 60 分钟上限时要处理......

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:50:09.783

问题出在此处：`cout << result << endl;` 您尚未定义`std::ostream& operator<<`用于将`Duration`对象写入 ostream 的重载版本。这样的事情应该这样做：

```
std::ostream& operator<<(std::ostream& os, const Duration& rhs)
{ 
os << "Hours: <" << hours_ << ">, ";  
os << "Minutes: <" << minutes_ << ">, "; 
os << "Seconds: <" << seconds_ << ">"; 
return os; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:01:17.873

我猜流插入器是在`Duration`类的源文件中定义的，而不是在标题中；这将解释未定义的引用，因为它是内联的。如果是这种情况，请将内联定义移动到标题中。

加法也有一个问题：如果分钟和秒**都溢出会发生什么？**第一条`if`语句将捕获分钟溢出并返回一个`Duration`其秒数超出范围的对象。在不考虑溢出的情况下创建新对象可能更简单，然后检查几秒钟的溢出，如有必要，处理它，然后检查几分钟的溢出，如有必要，处理它。现在您知道为什么大多数日期/时间库使用整数类型来存储经过纪元的秒数​​（或其他），而不是像这样分解细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:50:00.773

您需要为 << 运算符创建方法。目前，cout 无法解析您的 Duration。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-10T18:52:19.163

问题在于这条线
`cout << result << endl;`

您试图在对象上使用 << 运算符，而您只重载了 + 运算符尝试： `cout << result.getHours() << endl;`

# php - PHP/JS 时钟不显示用户的时区，并且在更改时不显示秒数

> ID：13807205
> 
> 赞同：0
> 
> 时间：2012-12-10T18:47:12.087
> 
> 标签：php, javascript

我有一个时钟，我想在我的网站上使用它，它工作得非常好，因为它显示了时间，但我仍然需要它做两件事：

1.  我需要它来显示我的时区的时间，即服务器的时区。
2.  我需要时钟来保持实时。（即，显示秒，因为他们改变）

代码：

```
<script> 
function displayTime() { 
  document.getElementById( "servertime" ).innerHTML = '<?=date("h:i:s A");?>'; 
} 

var serverTime = window.setInterval( "displayTime()", 1200 ); 
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:52:16.230

[使用default-timezone-set](http://php.net/manual/en/function.date-default-timezone-set.php)设置您的时区。

要移动秒数，您必须对小时、分钟、秒使用 JavaScript 增量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:55:23.950

尝试这样的事情：

```
var serverTime = new Date();

function displayTime(){
    serverTime.setSeconds(serverTime.getSeconds()+1);
    document.getElementById("servertime").innerHTML = serverTime.getHours()+":"+serverTime.getMinutes()+":"+serverTime.getSeconds();
}

window.onload=function(){
    setInterval(displayTime, 1000)
} 
```

这将使用用户机器的时间。如果要设置某个时区，请在 PHP 配置文件中设置或在脚本开头设置，然后将值放入新的 Date javascript 函数中。就像是：

```
var serverTime = new Date('<?=date("m/d/Y H:i:s T", time())?>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:58:39.443

像这样的事情应该这样做

```
var startTime = (function () {
  var el = document.getElementById("servertime");
function displayTime() {
  var d = new Date();
      el.innerHTML = d.getHours() + ":" + d.getMinutes() + ":"+ d.getSeconds();
}
  window.setInterval(displayTime,300)
})() 
```

[JSBin](http://jsbin.com/efadoq/1/edit)示例

# regex - 正则表达式：查找括号之间的数字

> ID：13807207
> 
> 赞同：24
> 
> 时间：2012-12-10T18:47:14.763
> 
> 标签：regex

我需要一个正则表达式，它可以在下面找到粗体数字：

20（LBDD你好**312312**）土豆1651（98）

20（LBDD你好**312312**兔子）土豆1651（98）

20 ( **312312** ) 马铃薯 1651 (98)

((\d+)) 找到数字 98

括号里还有其他字符不知道怎么办

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-12-10T18:54:23.407

这仅匹配第一个捕获组中的**312312 ：**

```
^.*?\([^\d]*(\d+)[^\d]*\).*$ 
```

正则说明：

```
^        # Match the start of the line
.*?      # Non-greedy match anything
\(       # Upto the first opening bracket (escaped)
[^\d]*   # Match anything not a digit (zero or more)
(\d+)    # Match a digit string (one or more)
[^\d]*   # Match anything not a digit (zero or more)
\)       # Match closing bracket
.*       # Match the rest of the line
$        # Match the end of the line 
```

[在这里](http://rubular.com/r/ImZaRigMv5)看到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T18:52:35.777

以下正则表达式应该这样做

```
@"\([^\d]*(\d+)[^\d]*\)" 
```

括号表示捕获组，`\(`转义括号表示输入字符串中的实际括号。

注意：根据您使用正则表达式的语言，您可能必须转义转义字符`\`，所以要小心。

不过，我会小心这一点，正则表达式的教科书限制之一是它无法识别正确带括号的文本。

# jquery - 通过ajax提交部分视图

> ID：13807209
> 
> 赞同：1
> 
> 时间：2012-12-10T18:47:23.537
> 
> 标签：jquery, asp.net-mvc-4, partial-views

我有一个在模式弹出窗口中显示的部分视图（表单）。提交时，它将在数据库中创建一个新条目。这需要通过 ajax 调用来完成。如何在 ajax 调用中传递所有表单字段？我正在使用 MVC4。

我尝试了 $('form').serialize()，但这会导致错误无效 JSON 原语。我究竟做错了什么？

```
var dataToSend = $('form').serialize();
    $.ajax({
        url: urlForSaving,
        data: dataToSend,
        cache: false,
        type: 'POST',
        dataType: 'json',
        contentType: "application/json;charset=utf-8",
        success: function (data, status) {
        },
        error: function (xhr, ajaxOptions, thrownError) { alert('error') }
    }); 
```

控制器

```
 [HttpPost]
    public JsonResult Add(SomeModel model)
    {
        if (ModelState.IsValid)
        {
            RedirectToAction("Index");
        }

        return Json(new { 
        Success = false,
        Message = "Validation Errors"
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:58:35.713

您应该将字段值添加到对象，如下所示，然后将该对象传递给将在所需事件上调用的函数。

```
 var dataToSend = {
                    fieldname: $("FIELDCLASS OR ID").val();
                  };

  function tocall(){
       $.ajax({
                 url: urlForSaving,
                 data: JSON.stringify(obj:dataToSend),
                 cache: false,
                 type: 'POST',
                 dataType: 'json',
                 contentType: "application/json;charset=utf-8",
                 success: function (data, status) {
             },
                 error: function (xhr, ajaxOptions, thrownError) { alert('error') }
             });
                   }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T10:19:49.793

从 MVC3 及更高版本开始，我认为在局部视图中使用 Ajax.BeginForm 是一种理想的情况（与 Http.BeginForm 相对）。Ajax 版本会自动为您连接所有内容，包括通过 ajax 发布表单。

[MSDN Ajax.BeginForm](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxextensions.beginform%28v=vs.100%29.aspx)

# linux - Linux中的sem_post sem_wait函数

> ID：13807210
> 
> 赞同：0
> 
> 时间：2012-12-10T18:47:24.240
> 
> 标签：linux, linux-kernel, semaphore

我想在我的 linux（ubuntu 发行版）中编辑 sem_post() 和 sem_wait() 函数。但是我找不到函数的位置。我以为它在内核的 semaphore.c 上，但我找不到。我的linux是x86环境3.2.0版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:11:54.970

您无法编辑/查找这些函数的源代码，它们已在 pthread 库中预编译。

# ssis - 在 32 位机器上运行的 SSIS 包无法连接到 64 位 sql server

> ID：13807213
> 
> 赞同：0
> 
> 时间：2012-12-10T18:47:43.050
> 
> 标签：ssis

我的 SSIS 包在 32 位机器上运行并远程连接到 32 位但升级到 64 的 sql 服务器。升级后，当我运行 SSIS 时，它会因超时错误而出错。它无法连接到sql server。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:50:56.237

这可能有助于“在 64 位环境中运行 32 位 ssis”

[http://sqlblog.com/blogs/john_paul_cook/archive/2010/03/24/running-32-bit-ssis-in-a-64-bit-environment.aspx](http://sqlblog.com/blogs/john_paul_cook/archive/2010/03/24/running-32-bit-ssis-in-a-64-bit-environment.aspx)

# javascript - 管理内置对象的扩展

> ID：13807215
> 
> 赞同：1
> 
> 时间：2012-12-10T18:47:46.250
> 
> 标签：javascript, google-closure-compiler, google-closure

我正在开发一个代码大小至关重要的项目，并使用 Google Closure Compiler 的 ADVANCED_OPTIMIZATIONS 编译我的代码。我需要使用它们的原型扩展某些内置对象（例如日期和数字）。我想将这些扩展打包到一个可重用的库中，并让编译器只包含代码中实际使用的那些。

到目前为止，我想出的唯一方法是将每个都包装在一个“@defined”常量中，我可以单独将其切换为编译器标志。其他所有方式似乎要么包括所有这些扩展名，要么不包括所有这些扩展名。这有点笨拙，有没有更好的方法？

澄清：

**在库文件中**

```
Number.prototype.foo = function() { ... }

Number.prototype.bar = function() { ... }

Number.prototype.something = function() { ... } 
```

**在代码中**

```
function somefunc() {
   25.foo();
   ...
   41.foo();
} 
```

我不想要的是 Number.bar 和 Number.something 出现在编译的代码中，因为它们没有在主要源代码中使用。

# c# - 如何从 IDbConnection “继承” - 只需添加一个属性（DatabaseType）

> ID：13807217
> 
> 赞同：1
> 
> 时间：2012-12-10T18:48:20.813
> 
> 标签：c#, inheritance, idbconnection

你是怎么继承的`IDbConnection`？我想添加一个属性（`DatabaseType`例如 MS Access、SQL server、Paradox...）。据我所知`IDbConnection`是一个接口，因此我相信他们希望我实现整个接口继承链中的所有成员。这似乎是很多工作。添加一个属性的最佳方法是什么`IDbConnection`？

**更新** 我想要做的是这个。我有三种我经常使用的方法：ExecuteReader、ExecuteNonQuery、ExecuteNonQueryGetIdentity。它们被大量使用并具有参数（IDbConnection Conn、字符串 SQLString、object[] SQLParams）。我认为将 DatabaseType 添加到这三个方法和所有项目方法的最佳方法是“覆盖” IDbConnection，这样我只需更新项目中的一行代码。

我想知道 DatabaseType，因为在添加参数和构建 IDbCommand 时我会做一些不同的事情。专门用于日期时间。

例如：

```
public static System.Data.IDataReader ExecuteReader(System.Data.IDbConnection Conn, string SQL, object[] SQLParams)
// return IDataReader from connection, SQL string and Params. Params can be null. 
{
  using (var cmd = Conn.CreateCommand())
  {
    cmd.CommandText = SQL;
    AddParametersToCommand(cmd, SQLParams);   // add parameters to IDbCommand object if params not null
    return cmd.ExecuteReader();  
  }
}

private static readonly Regex regParameters = new Regex(@"@\w+", RegexOptions.Compiled);
public static void AddParametersToCommand(IDbCommand Cmd, object[] Parameters)
/* Creates and ads unique parameters to an IDbCommand object to the CommandText SQL string.
  * Tested types with SQL Update statement in MS Access/SQL Server: boolean, int, DateTime, text
  * Parameter names in CommandText must start with the '@' char and can be any unique word (letter or number).
  * E.g. calling code: cmd.CommandText = "Select * From SiteUser Where Site > @1 And User > @NewParam"
  * 
  * http://www.codeproject.com/Articles/15542/IDbDataParameter-error-in-NET  re: some DateTime issues
*/
{
  if (Parameters != null && Parameters.Length > 0)
  {
    MatchCollection cmdParams = regParameters.Matches(Cmd.CommandText);
    var paramNames = new List<String>();
    foreach (var el in cmdParams)
    {
      if (!paramNames.Contains(el.ToString()))   // only add unique parameter names
        paramNames.Add(el.ToString());
    }
    IDbDataParameter dp;
    var dbType = GetDatabaseType(Cmd.Connection);
    for (int n = 0; n < Parameters.Length; n++)
    {
      var param = Parameters[n];
      dp = Cmd.CreateParameter();
      dp.ParameterName = paramNames[n];
      TypeCode myTypeCode = Type.GetTypeCode(param.GetType());
      if (myTypeCode == TypeCode.DateTime)     // this workaround is needed for MS Access and SQL Server
      {
        if (dbType == DatabaseType.Access)
        {
          dp.DbType = DbType.DateTime;         // set dates as DbType.DateTime for MS Access and Paradox
          dp.Value = param.ToString();         // Convert.ToDateTime(param).ToString("yyyy-MM-dd hh:mm:ss"));         
          //Note: MS access cannot store years before December 30, 1899\. They will be stored for some other year.
          // for example. Jan 1 0001 will be stored as 2001.
        }
        else if (dbType == DatabaseType.MSSql)
        {
          dp.DbType = DbType.DateTime2;        // set dates as DbType.DateTime2 for SQL Server
          dp.Value = param.ToString();
        }
      }
      else
        dp.Value = param;
      Cmd.Parameters.Add(dp);
    } // for n
  } // if
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:11:19.637

`MyDbConnection`您可以使用属性创建新接口`DatabaseType`，但现有的`IDbConnection`实现都不会实现您的接口。

我认为您不应该关心`IDbConnection`您使用的是哪种实现（MS Access、SQL server、Paradox 等）。这就是我们有这个抽象和[`DbProviderFactory`](http://msdn.microsoft.com/ru-ru/library/system.data.common.dbproviderfactory.aspx)类的原因，它们完全是我们正在使用的数据库的抽象类型。

*顺便说一句*，您始终可以检查`IDbConnection`实例的类型以查看您正在使用哪种实现（如果您*真的*需要）。您的另一个选择（如果您*真的*需要该属性） - 在`IDbConnection`实例上创建装饰器：

```
public class MyDbConnection : IDbConnection
{
    private IDbConnection _connection;

    public MyDbConnection(IDbConnection connection)
    {
       _connection = connection;
    }

    // here goes your property
    public string DatabaseType { get; set; }

    public void Close()
    {
        _connection.Close();
    }

    public IDbTransaction BeginTransaction(IsolationLevel il)
    {
        return _connection.BeginTransaction(il);
    }

    // implement other IDbConnection members by delegating work to _connection
} 
```

您可以在任何地方使用此装饰器`IDbConnection`，而且您的属性也将可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:51:32.053

DbConnection 实现接口 IDbConnection。您可以扩展它（它必须实现所有接口方法）

# php - 如何在我的 Mac 上的不同目录中设置 PHP 的 PATH

> ID：13807218
> 
> 赞同：2
> 
> 时间：2012-12-10T18:48:21.427
> 
> 标签：php, macos, apache

我对如何做到这一点进行了一些研究，这就是我发现的。我需要更改这段代码：

```
<key>EnvironmentVariables</key>
<dict>
<key>PATH</key>
<string>/usr/bin:/bin:/usr/sbin:/sbin:/opt/local/bin</ string>
</dict> 
```

在`/System/Library/LaunchDaemons`.

我需要将 Apache 设置为指向`/usr/local/etc/php/5.4/php.ini`. 如何更改上述代码中的字符串，以便将 PHP 指向正确的 PHP 安装。它现在是 Homebrew 放置它的地方，因为 PHP 已经存在于我的硬盘上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:53:52.920

设置如下：

```
<string>/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/local/bin</ string> 
```

您的新 php 目录必须在开头，因此首先选择它。

根据[**this**](http://blog.arnaudlafon.com/Blog/Homebrew-repository-dedicated-to-PHP-and-PHP-5.3.10-installation)，您应该添加以下内容：

```
LoadModule php5_module /usr/local/php/5.4/libexec/apache2/libphp5.so 
```

到您的`/etc/apache2/httpd.conf`文件并重新启动apache。

# android - Android Droid X 上的像素化 /颗粒状背景图像

> ID：13807224
> 
> 赞同：1
> 
> 时间：2012-12-10T18:48:49.893
> 
> 标签：android, css, background-image, meta-tags, android-2.3-gingerbread

我在带有 2.3.4 的 Droid X 设备上遇到了以下问题（我还没有在其他移动设备上看到问题）。请参阅随附的屏幕截图。

您可以从第一个屏幕截图中看到，背景似乎是茅草/像素化的，可能以某种方式拉伸。第二个屏幕截图是背景应该如何出现。

令我困惑的是，茅草屋的外观仅在我第一次浏览页面或通过链接浏览其他页面时出现。但是，如果我通过刷新按钮刷新当前页面，则背景会在第二张图像中正确显示为干净的条纹外观。

我正在使用设备元视口标签将初始比例设置为 1。

另一位用户在这里提出了类似的问题：[Android 移动浏览器图像在刷新之前都是像素化](https://stackoverflow.com/questions/10905806/android-mobile-browser-images-are-pixelated-until-refresh)的，但他们的特定问题与我的有点不同，因为他们声称所有图像都是像素化/颗粒状的。然而，只有我的项目中的身体背景才会这样出现。

![无效的背景重复](../Images/a0099190afe113ab0c3001779c08b088.png) ![有效的背景重复](../Images/caf35d2b95778f2f0823ef76e88866d7.png)

# drupal - 我想从 drupal 7 的主菜单中创建一些选定菜单项的块？

> ID：13807226
> 
> 赞同：0
> 
> 时间：2012-12-10T18:48:55.513
> 
> 标签：drupal, drupal-blocks, drupal-navigation

我想从 drupal 7 的主菜单中创建一些选定菜单项的块？我不想将所有菜单链接放在一个块中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:16:04.423

你为什么不只用你想要的菜单链接创建一个新的（二级）菜单，然后使用[菜单块](http://drupal.org/project/menu_block)或其他东西来创建一个块呢？您是否有不想为此创建新菜单的原因？

# iphone - 更改副本，全选并定义按钮

> ID：13807230
> 
> 赞同：0
> 
> 时间：2012-12-10T18:49:19.107
> 
> 标签：iphone, objective-c, ios, xcode, ipad

如何更改内容并实现“复制、全选、定义”按钮的独特功能？

我需要更改这些按钮的文本和功能。我怎样才能做到这一点？我不知道要搜索什么。

谢谢

当我在 UITextView 上选择任何文本时显示这些按钮，并且我想更改这些按钮和功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:03:52.300

`UIMenuController`我认为你需要什么。在 Apple 的文档中查看。您可以创建自己的菜单项并为它们实现自己的功能。

# vb.net - 如何在.NET中显示函数的多个返回值

> ID：13807232
> 
> 赞同：1
> 
> 时间：2012-12-10T18:49:24.897
> 
> 标签：vb.net, visual-studio-2010, function, data-structures, return

我有以下结构

```
Public Structure Info_Diag_Data
    Public DataOne As String
    Public DataTwo As String
End Structure 
```

而这个函数使用了上面的类

```
Public Shared Function My_Function(ByVal RcvVal As Integer) As Info_Diag_Data

    Dim SendVal As Info_Diag_Data

    Select Case RcvVal
        Case 1
            SendVal.DataOne = "Red"
            SendVal.DataTwo = "Master"
        Case 2
            SendVal.DataOne = "Red"
            SendVal.DataTwo = "Teacher"
    End Select

    Return SendVal
End Function 
```

现在我知道我可以使用`My_Function(2)`

我的问题是如何在从函数中获取这两个返回值后显示这些数据。

就像我得到`DataOne`的一样，作为`DataTwo`回报。那我怎么能把它显示`MessageBox.Show(DataOne)`出来`MessageBox.Show(DataTwo)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T18:54:34.343

您需要将结果存储在一个`Info_Diag_Data`值中，然后您将能够通过该变量访问对象的各个成员，如下所示：

```
Dim data As Info_Diag_Data = My_Function(2)
MessageBox.Show(data.DataOne)
MessageBox.Show(data.DataTwo) 
```

# android - BluetoothSocket 超时或 readline 超时

> ID：13807236
> 
> 赞同：1
> 
> 时间：2012-12-10T18:49:44.780
> 
> 标签：android, bluetooth, timeout, inputstream, readline

我目前正在开发一个通过蓝牙与串行设备通信的应用程序。我以打开与蓝牙设备的连接的方式实现了它。它似乎连接良好。当它执行 reader.readline() 时，它似乎挂起。它永远不会回来。设备本身在响应时会返回以下内容。

RD,97,101,100,41613,3000,3,0,153,153,4120,161,4,0​​,97,102,103,220,20,493,4568,3 000,100,0,100,5,

这就是我所期待的。但是我需要让 reader.rea 超时

```
package com.clarke.android.smartflow;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.lang.reflect.Method;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.Set;
import java.util.TimerTask;
import java.util.concurrent.Callable;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.Future;
import java.util.concurrent.TimeUnit;

import org.apache.http.util.EncodingUtils;

import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.bluetooth.BluetoothSocket;
import android.os.Handler;
import android.os.Looper;
import android.util.Log;

import com.xyx.android.activity.Main;
import com.xyx.android.errors.ErrorService;
import com.xyx.android.events.EventDeviceDetail;

public class SmartFlowService {

    private static final String CLASSTAG = SmartFlowService.class.getSimpleName();
    private static final String DEVICE_NAME = "FireFlyBP"; //FireFlyBP-70D0

    private static BluetoothSocket bluetoothSocket;
    private static BufferedWriter writer = null;
    private static BufferedReader reader = null;
    private static BluetoothAdapter bluetoothAdapter;
    private static BluetoothDevice bluetoothDevice = null;      
    private static boolean isConnected = false;
    static Handler mSendHandler = new Handler(); 

    private InputStream mmInStream;

    //private final OutputStream mmOutStream;

    private static ArrayList<SmartFlowListener> listeners = new ArrayList<SmartFlowListener>();

    public static void addSmartFlowListener(SmartFlowListener listener) {
        listeners.add(listener);
    }

    public static void removeSmartFlowListener(SmartFlowListener listener) {
        listeners.remove(listener);
    }

    private static void fireSmartFlowEvent(EventDeviceDetail eventDeviceDetail) {
        SmartFlowEvent smartFlowEvent = new SmartFlowEvent(SmartFlowService.class, eventDeviceDetail);
        for (Iterator<SmartFlowListener> iterator = listeners.iterator(); iterator.hasNext(); ) {
            SmartFlowListener listener = iterator.next();
            listener.onSmartFlowEvent(smartFlowEvent);
        }
    }

    public static void connect() throws Exception {
        Log.d(Main.LOGTAG, CLASSTAG +" connect");

        bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        Set<BluetoothDevice> pairedDevices = bluetoothAdapter.getBondedDevices();
        for (Iterator<BluetoothDevice> iterator = pairedDevices.iterator(); iterator.hasNext(); ) {
            BluetoothDevice bd = iterator.next();
            Log.d(Main.LOGTAG, CLASSTAG +" found device "+ bd.getName());
            if (bd.getName().startsWith(DEVICE_NAME)) {
                Log.d(Main.LOGTAG, CLASSTAG +" using device "+ bd.getName() +" "+ bd.getBluetoothClass().toString());
                bluetoothDevice = bd;
            }
        }

        if (bluetoothDevice != null) { 
            //socket = bd.createRfcommSocketToServiceRecord(java.util.UUID.fromString("00001101-0000-1000-8000-00805F9B34FB"));
            Method m = bluetoothDevice.getClass().getMethod("createRfcommSocket", new Class[]{int.class}); 
            bluetoothSocket = (BluetoothSocket)m.invoke(bluetoothDevice, Integer.valueOf(1));
            bluetoothSocket.connect();
            isConnected = true;
        } else {
            throw new Exception("Could not find bluetooth device");
        }
    }

    public static String sendR() throws Exception {

        return send("R");
    }

    public static String sendS(Integer targetRate, Integer pcOffCode) throws Exception {
        StringBuffer sb = new StringBuffer();
        sb.append("S,");
        if (targetRate != null) {
            sb.append(targetRate);
            sb.append(",");
        }
        if (pcOffCode != null) {
            sb.append(pcOffCode);
        }
        sb.append("\r\n");
        return send(sb.toString());
    }

    public static String send(String request) throws Exception {
        Log.d(Main.LOGTAG, CLASSTAG +" send");
        String response = null;
        InputStream mmInStream;
        StringBuilder swriter = new StringBuilder();
        //int swriter = 0;

        try {
            connect();
            if (isConnected) {
                writer = new BufferedWriter(new OutputStreamWriter(bluetoothSocket.getOutputStream()));
                reader = new BufferedReader(new InputStreamReader(bluetoothSocket.getInputStream()));

                writer.write(request);
                writer.flush();

                response = reader.readLine();
                // Keep listening to the InputStream while connected
                fireSmartFlowEvent(new EventDeviceDetail(response));
                Log.d(Main.LOGTAG, CLASSTAG +" send "+ response);
                Log.d(Main.LOGTAG, CLASSTAG +" send "+ response);
                bluetoothSocket.close();
                isConnected=false;
            } else {
                throw new Exception("No Bluetooth connection");
            }                           
            //bluetoothSocket.close();

        } catch (Exception e) {
            Log.e(Main.LOGTAG, CLASSTAG +" send", e);
            fireSmartFlowEvent(new EventDeviceDetail(e));           
            isConnected = false; //force a reconnection retry
            throw e;
        }
        return response;
    }

    public static void close() {
        Log.d(Main.LOGTAG, CLASSTAG +" close");
        try
        {
            if (writer != null) { writer.close(); }
            if (reader != null) { reader.close(); }
            if (bluetoothSocket != null) { bluetoothSocket.close(); }
            isConnected = false;
        }
        catch (Throwable t)
        {
            Log.d(Main.LOGTAG, CLASSTAG +" close", t);
            ErrorService.log(t);
        }
    }
} 
```

# wordpress - 在 wordpress 中设置 cookie 以跟随会员脚本上的推荐链接

> ID：13807237
> 
> 赞同：1
> 
> 时间：2012-12-10T18:49:52.627
> 
> 标签：wordpress, cookies, referrals

我正在尝试在 wordpress 中设置一个 cookie 来跟踪推荐。该链接将以 domain.com/?ref_id 的形式出现，并且应该通过指向 domain.com/subfolder/?ref_id 的链接

我知道这应该很简单，所以请原谅我对此事的无知。谢谢， ，

约翰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T15:25:55.457

约翰，你想做类似于以下的事情：

```
$ref_id = $_GET['ref_id'];
$expire=time()+60*60*24*30;
setcookie("referral_id", $ref_id, $expire, '/', '.yourdomain.com'); 
```

不要忘记清理您从 $ref_id 中提取的查询字符串

# javascript - 在 VS 2012 中调试 javascript - localhost 缓存有旧代码

> ID：13807238
> 
> 赞同：2
> 
> 时间：2012-12-10T18:49:54.913
> 
> 标签：javascript, visual-studio-2012

我开始构建一个 PhoneGap 应用程序并决定使用 VS2012 作为编辑器/调试器，因为 Eclipse 和 XCode 不进行 javascript 调试（或者它们，也许我错过了一些东西）并且 VS2012 具有 js 的智能感知。将所有 html 和 js 文件复制到 VS2012 项目后，代码运行良好。但后来我进行了编辑，调试器现在不会在编辑行的断点处停止 - 出现错误消息“调试进程已加载此脚本文件的不同版本”。它还说“对于 Windows 应用商店应用程序，请使用‘调试刷新 Windows 应用程序’——但这不是 Windows 应用商店应用程序（反正还不是！）——代码似乎是从具有先前版本的本地主机缓存中运行的我的来源，即使在重新启动 PC 之后。知道该怎么做吗？在此先感谢....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T09:47:02.323

好的，解决了 - 只需从浏览器中执行 CTRL+F5 即可重新加载新代码。

# android - 应用程序关闭后保存 BluetoothDevice 对象

> ID：13807241
> 
> 赞同：5
> 
> 时间：2012-12-10T18:50:12.550
> 
> 标签：android, bluetooth, global-variables

我想保存我的应用程序连接到的最后一个蓝牙设备。如果以前有蓝牙连接，我根本不想提示用户。他们可以选择连接到新设备，但他们不需要这样做。如果他们选择不选择连接，他们会定期使用该应用程序，然后当需要蓝牙设备时，它将连接到最近的设备。

我尝试使用`Tudor Luca's`下面答案中提供的代码，但对象不会写入文件。我得到一个`NotSerializableException`. 我要保存的对象是一个`BluetoothDevice`用`import android.bluetooth.BluetoothDevice`.

这是我试图使蓝牙设备可序列化的方法：

```
import java.io.Serializable;
import android.bluetooth.BluetoothDevice;

public class SerializableObjects implements Serializable {
    private BluetoothDevice device;

    public SerializableObjects( BluetoothDevice device ) {
        this.device = device;
    }

    public BluetoothDevice getDevice() {
        return this.device;
    }
} 
```

LogCat 返回：

```
12-11 17:46:24.032: W/System.err(24641): java.io.NotSerializableException: android.bluetooth.BluetoothDevice
12-11 17:46:24.032: W/System.err(24641):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1535)
12-11 17:46:24.032: W/System.err(24641):    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1847)
12-11 17:46:24.032: W/System.err(24641):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689)
12-11 17:46:24.032: W/System.err(24641):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653)
12-11 17:46:24.032: W/System.err(24641):    at java.io.ObjectOutputStream.writeFieldValues(ObjectOutputStream.java:1143)
12-11 17:46:24.032: W/System.err(24641):    at java.io.ObjectOutputStream.defaultWriteObject(ObjectOutputStream.java:413)
12-11 17:46:24.032: W/System.err(24641):    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1241)
12-11 17:46:24.032: W/System.err(24641):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1575)
12-11 17:46:24.032: W/System.err(24641):    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1847)
12-11 17:46:24.032: W/System.err(24641):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689)
12-11 17:46:24.032: W/System.err(24641):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653)
12-11 17:46:24.032: W/System.err(24641):    at my.eti.commander.LocalObjects.writeObjectToFile(LocalObjects.java:29)
12-11 17:46:24.032: W/System.err(24641):    at my.eti.commander.MainMenu$1.handleMessage(MainMenu.java:460)
12-11 17:46:24.032: W/System.err(24641):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-11 17:46:24.036: W/System.err(24641):    at android.os.Looper.loop(Looper.java:130)
12-11 17:46:24.036: W/System.err(24641):    at android.app.ActivityThread.main(ActivityThread.java:3687)
12-11 17:46:24.036: W/System.err(24641):    at java.lang.reflect.Method.invokeNative(Native Method)
12-11 17:46:24.036: W/System.err(24641):    at java.lang.reflect.Method.invoke(Method.java:507)
12-11 17:46:24.036: W/System.err(24641):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
12-11 17:46:24.036: W/System.err(24641):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
12-11 17:46:24.036: W/System.err(24641):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:38:22.837

没有办法直接序列化 BluetoothDevice 类。即使您将其序列化，我认为您也无法在应用程序关闭后重新使用该对象。相反，我有一个帮助类来存储设备的地址。您可以保存设备地址和名称，稍后再阅读该信息。然后，您可以对绑定的设备执行发现/搜索并获取相应的设备。

这是我通常使用的辅助类

```
public class BluetoothState implements Serializable {
    public static final int STATE_NOT_CONNECTED = 1;
    public static final int STATE_CONNECTED = 1;

    public static final String filename = "btState.pref";

    public static int connectionState = STATE_NOT_CONNECTED;
    public static String deviceAddress = "00:00:00:00:00:00";
    public static String deviceName = "";

    public static void setConnectionState(boolean connected,BluetoothDevice device) {
        if(connected)
            connectionState = STATE_CONNECTED;
        else
            connectionState = STATE_NOT_CONNECTED;

        if(device != null) {
            deviceAddress = device.getAddress();
            deviceName = device.getName();
        }

    }

    public static void saveConnectionState(Context cxt) throws IOException {        
        FileOutputStream fos = cxt.openFileOutput(filename, Context.MODE_PRIVATE);
        ObjectOutputStream oos = new ObjectOutputStream(fos);       
        oos.writeInt(connectionState);
        oos.writeUTF(deviceAddress);
        oos.writeUTF(deviceName);
    }

    public static void loadConnectionState(Context cxt) throws IOException {        
        FileInputStream fis = cxt.openFileInput(filename);
        ObjectInputStream ois = new ObjectInputStream(fis);     
        connectionState = ois.readInt();
        deviceAddress = ois.readUTF();
        deviceName = ois.readUTF();
    }

    public static BluetoothDevice getDevice() {
        BluetoothAdapter btAdapter = BluetoothAdapter.getDefaultAdapter();
        if(!btAdapter.isEnabled())
            btAdapter.enable();

        Set<BluetoothDevice> pairedDevices = btAdapter.getBondedDevices();

        for(BluetoothDevice d : pairedDevices)
            if(d.getAddress().equalsIgnoreCase(deviceAddress))
                return d;

        return null;        
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:00:35.330

您可以将对象写入私有文件，然后从那里加载。你对你的对象唯一需要做的就是把它做成`implements Serializable`。

```
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;

import android.app.Activity;
import android.content.Context;

/**
 *
 * Writes/reads an object to/from a private local file
 * 
 *
 */
public class LocalObjects{

    /**
     * 
     * @param context
     * @param object
     * @param filename
     */
    public static void witeObjectToFile(Context context, Object object, String filename) {

        ObjectOutputStream objectOut = null;
        try {

            FileOutputStream fileOut = context.openFileOutput(filename, Activity.MODE_PRIVATE);
            objectOut = new ObjectOutputStream(fileOut);
            objectOut.writeObject(object);
            fileOut.getFD().sync();

        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (objectOut != null) {
                try {
                    objectOut.close();
                } catch (IOException e) {
                    // do nowt
                }
            }
        }
    }

    /**
     * 
     * @param context
     * @param filename
     * @return
     */
    public static Object readObjectFromFile(Context context, String filename) {

        ObjectInputStream objectIn = null;
        Object object = null;
        try {

            FileInputStream fileIn = context.getApplicationContext().openFileInput(filename);
            objectIn = new ObjectInputStream(fileIn);
            object = objectIn.readObject();

        } catch (FileNotFoundException e) {
            // Do nothing
        } catch (IOException e) {
            e.printStackTrace();
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } finally {
            if (objectIn != null) {
                try {
                    objectIn.close();
                } catch (IOException e) {
                    // do nowt
                }
            }
        }

        return object;
    }

} 
```

所以基本上你想要做的是获得最后配对的设备，对吧？这里的代码应该是这样的：

1.  您需要`BluetoothAdapter`所有蓝牙活动：

    `BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    if (mBluetoothAdapter == null) {
    //Then your device does not support Bluetooth
    }`

2.  确保蓝牙已启用

    `if (!mBluetoothAdapter.isEnabled()) { Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE); startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT); }`

3.  获取以前配对的设备

    `Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices(); // If there are paired devices if (pairedDevices.size() > 0) { // Loop through paired devices for (BluetoothDevice device : pairedDevices) { // Add the name and address to an array adapter to show in a ListView mArrayAdapter.add(device.getName() + "\n" + device.getAddress()); } }`

有关如何使用蓝牙连接的完整教程，请查看[此](http://developer.android.com/guide/topics/connectivity/bluetooth.html)

# backbone.js - 如何在 Backbone 中接收事件的链接属性？

> ID：13807243
> 
> 赞同：1
> 
> 时间：2012-12-10T18:50:29.367
> 
> 标签：backbone.js, backbone-events

我想在此链接的主干视图中接收属性。我不确定这是在 Backbone 中执行此操作的正确方法。也许这个链接的参数应该在视图渲染上设置？

`<a class="postDeleteLink" data-id="5" data-hash="Hgsda45f">Delete</a>`

我绑定事件的主干代码：

```
PostListView = Backbone.View.extend({
events: {
    "click .postDeleteLink": "deletePost"
},
deletePost: function(){
    //standart jquery way doesn't work, because "this" is already used by backbone
    var id = $(this).attr('data-id'); 
    var hash = $(this).attr('data-hash'); 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T18:56:12.667

您需要将事件传递给 deletePost 并通过 currentTarget 访问。

```
PostListView = Backbone.View.extend({
events: {
    "click .postDeleteLink": "deletePost"
},
deletePost: function(e){
    var id = $(e.currentTarget).attr('data-id'); 
    var hash = $(e.currentTarget).attr('data-hash'); 
} 
```

# umbraco - UMBRACO CMS - 在 Windows XP 上创建内容不会重定向到 IE6-8 上的新内容页面

> ID：13807244
> 
> 赞同：0
> 
> 时间：2012-12-10T18:50:33.580
> 
> 标签：umbraco

我今天可能在 Umbraco 4.8.1 中发现了一个奇怪的问题（这不是早期版本的问题，并且尚未测试过较新的版本）。

**重现步骤**

1.  在 Windows XP 上打开 Umbraco 管理系统 使用任何基于 Internet Explorer 的浏览器 - 这不是 Chrome、Firefox 或 Safari 的问题
2.  登录管理系统。
3.  导航到内容部分。
4.  单击内容并创建新的内容项并选择文档类型。
5.  单击创建。

**在这一点上，**我希望看到新创建的项目的仪表板。但实际发生的是创建对话框消失了，您仍然在同一个初始仪表板上，并且树没有更新。如果您单击树上的重新加载节点，那么新节点就在那里 - 您可以单击它，然后获得相同的新内容仪表板。

使用 windows xp 操作系统时，IE6、IE7 和 IE8 会出现此问题。当我使用 Windows 7 时，这不是问题，而且似乎工作正常。

我使用提琴手检查两台机器上的本地流量。在 Windows 7 版本上，我注意到对 create.aspx 的第二次调用？它重新调整了 200，然后对 editContent.aspx 等进行了后续调用 - 在 Windows XP 上发生了第二次调用，但后续的 editContent.aspx 永远不会被调用。它似乎确实创建了节点，但随后无法重定向或调用页面。

任何人都可以帮忙吗？建议是怎么回事？我尝试在没有太多帮助的情况下查看论坛和谷歌？

**请不要回复**告诉您的客户不要使用 Windows XP。 **请不要回复**你会在 umbraco 论坛上获得更好的运气 - 我已经在那里发布了：http: [//our.umbraco.org/forum/using/ui-questions/36841-Create-Content-does-not-重定向到新内容页面在 IE6-8-on-Windows-XP](http://our.umbraco.org/forum/using/ui-questions/36841-Create-Content-does-not-redirect-to-new-Content-Page-on-IE6-8-on-Windows-XP)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:57:49.447

经过一番调查，我找到了造成这种情况的原因。Umbraco 使用 javascript 文件 UmbracoClientManager.js 和一个名为 contentFrame 的函数 - 重定向主仪表板框架。

在 4.7.1 和以前的版本中，没有在重定向周围添加 setTimeout 闭包：

第 133 行 umbraco_client\Application\UmbracoClientManager（版本 4.8.1+）

```
var self = this;
window.setTimeout(function(){
  if (typeof self.mainWindow().right != "undefined") {
    self.mainWindow().right.location.href = strLocation;
  }
  else {
    self.mainWindow().location.href = strLocation; //set the current windows location  
          if the right frame doesn't exist int he current context
  }
},200); 
```

第 133 行 umbraco_client\Application\UmbracoClientManager（版本 4.7.1）——实际上是上面相同的代码

```
if (typeof this.mainWindow().right != "undefined") {
 this.mainWindow().right.location.href = strLocation;
  }
else {
  this.mainWindow().location.href = strLocation; //set the current windows location if the right frame doesn't exist int he current context
} 
```

因此，如果您重定向到的仪表板页面花费的时间超过 200 毫秒，那么它将不会显示，并且 javascript 函数将在 4.8.1 或更高版本中超时

因此，如果您的仪表板时间超过 200 毫秒，那么最好的办法就是将其提高到合适的值。

我在这里记录了这一点：http: [//issues.umbraco.org/issue/U4-1311](http://issues.umbraco.org/issue/U4-1311)

# html - 当并排包含两个图像时，Div 高度莫名其妙地高 5px

> ID：13807247
> 
> 赞同：3
> 
> 时间：2012-12-10T18:50:39.360
> 
> 标签：html, css, layout

我似乎无法弄清楚为什么当它包含两个图像时，为什么这个额外的 5px 会出现在我的 div 的底部。当它只包含一个图像时，它不会发生。我已经删除了所有其他标记和 css，但问题仍然存在。它也发生在 Chrome、Firefox 和 IE 上。

html:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
<head>
    <link rel="stylesheet/less" href="<?php echo THEMES_URI; ?>starter_digital/style.less" type="text/css">
    <script src="<?php echo THEMES_URI; ?>starter_digital/javascript/less-1.3.1.min.js" type="text/javascript"></script>
</head>

<body>
    <div id="social">
        <img src="<?php echo THEMES_URI; ?>starter_digital/images/facebook.png" />
    </div>

    <br />

    <div id="social">
        <img src="<?php echo THEMES_URI; ?>starter_digital/images/twitter.png" />
    </div>

    <br />

    <div id="social">
        <img src="<?php echo THEMES_URI; ?>starter_digital/images/facebook.png" />
        <img src="<?php echo THEMES_URI; ?>starter_digital/images/twitter.png" />
    </div>
</body>
</html> 
```

少/CSS：

```
#social {
  background-color: red;
} 
```

结果：

![Chrome 中的错误图片](../Images/870639b44abff31161d28812e32a0ae3.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T18:54:40.597

尝试添加：

```
#social img { display: block; float: left; margin-right: 5px; } 
```

或者

```
#social { line-height: 0; } 
```

到你的 CSS。由于 an`<img>`默认情况下是内联元素，因此它的高度计算方式与默认 line-height 值相关。

这是一个小提琴：http: [//jsfiddle.net/5Gs3Q/](http://jsfiddle.net/5Gs3Q/)

在内联元素上，line-height CSS 属性指定用于计算行框高度的高度。

在块级元素上，line-height 指定元素内行框的最小高度。

来源：[https ://developer.mozilla.org/en/CSS/line-height](https://developer.mozilla.org/en/CSS/line-height)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:58:57.807

我相信更改行高可能会解决问题。

```
#social {
   background-color: red;
   line-height:normal;
} 
```

# windows - 找出文件在 Windows PATH 中的位置

> ID：13807249
> 
> 赞同：0
> 
> 时间：2012-12-10T18:50:47.213
> 
> 标签：windows, shell

如何确定正在调用哪个文件命令？例如，当我调用“python”时，我想知道系统执行

C:/Python27/python.exe

（我在 Windows 上工作，如果这有什么不同的话。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T18:59:08.870

`WHERE`从命令行使用。对于您的具体示例：`where python.exe`

# c# - 在稍后传递到另一个表单之前存储值

> ID：13807253
> 
> 赞同：0
> 
> 时间：2012-12-10T18:50:59.143
> 
> 标签：c#, winforms, variables, store

我目前正在开发 C# Visual Studio Windows 应用程序。我在从一个表单（Form1）中获取文本框值并将其存储在一个变量中以供下一个表单（Form2）使用时遇到问题。我不想立即显示该值，因此我需要一种可以将值存储在后台并能够在以后使用它的方法。我该怎么做？

这种方法我试过了，但是没有用，谁能告诉我为什么？form2 中的返回值为空。

**Login.cs（登录页面）**

```
 public string uname;

    private void LoginButton_Click(object sender, EventArgs e)
    {
        string userName = this.LoginUsernameTextBox.Text;
        uname = userName;
    } 
```

**Form2.cs**

```
 private void CheckLoginUsername_Click(object sender, EventArgs e)
    {
    Login login = new Login();
    MessageBox.Show("The value of uname is:" + login.uname);
    } 
```

![在此处输入图像描述](../Images/967fd3766b069519b1dbe37753ed971b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:13:46.153

问题是`Form2`没有引用`Login`用户正在与之交互的同一个实例，您正在创建一个新实例（从不向用户显示它）然后从中获取一个值。

您还没有展示这些表单之间的交互程度（如果有，那么您错过了很多）。

它应该看起来像这样：

在表格 2 中：

```
private void Form1_Load(object sender, EventArgs e)
{
    Login loginForm = new Login ();

    loginForm.ShowDialog();

    string username = loginForm.UserName;
} 
```

那么登录表单应该是这样的：

```
public string UserName { get; private set; } 
```

这将允许您在内部设置值（提交/关闭表单时）并在外部读取它。

公开字段被认为是不好的做法；最好改用属性（这样，除其他外，您可以执行我在此处所做的操作并将设置器限制为私有）。

# php - Google Checkout API 回调的 POST 数据为空

> ID：13807254
> 
> 赞同：0
> 
> 时间：2012-12-10T18:51:00.717
> 
> 标签：php, api, google-checkout

我设置了以下脚本来测试通过 Google Checkout 支付的订单通知：

```
<?php
    mail('max@edison.com', 'google checkout order alert', json_encode($_POST));
?> 
```

我收到了电子邮件，但`$_POST`数组的值是空白的（换句话说，电子邮件的正文是简单的`[]`）。

我认为应该通过 POST 立即发送值是错误的吗？或者通知请求真的只是让我向 Google 请求最新订单详细信息的机会？即，我的上述脚本需要向 Google 请求订单详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:53:41.173

Google Checkout 回发请求是原始 JSON 帖子，而不是典型的 HTTP 帖子（这是填充`$_POST`数组所需的内容）。为了读取回发请求的内容，您必须获取原始的帖子正文和`json_decode`它。

这应该可以解决问题：`json_decode(file_get_contents('php://input'))`

# mysql - MySQL 在子查询中插入自动生成的列

> ID：13807257
> 
> 赞同：1
> 
> 时间：2012-12-10T18:51:07.213
> 
> 标签：mysql, sql, select, subquery

我正在使用完全不同的模式将数据从一个表导入另一个表。我可以将数据从一列导入到另一列，但是插入新行时会设置一个自动生成的列。该代码只是在表上执行 count()+100001，我试图在查询中复制它，但我遇到了问题。

这是我的查询：

```
insert into prospect(pid,pfirst,plast,paddress,pcity,pstate,pzip,eid,pdate,pnum,pprim)
  select custid,cfirst,clast,street,city,state,zip,csrid,lastvisit,
     (select count(pid)+100000 from prospect),celphone from customer limit 140000,1000; 
```

pnum 列（生成的列）应该是 100000、100001、100002 等，但它们最终都是 100000。我认为这是因为我只进行了一次插入，所以 count() 始终为 0 .

我将如何完成我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:57:00.600

尝试这个：

```
select count(pid) into @auto from prospect;
insert into prospect(pid,pfirst,plast,paddress,pcity,pstate,pzip,eid,pdate,pnum,pprim) 
select custid,cfirst,clast,street,city,state,zip,csrid,lastvisit,
     @auto:=@auto+1,celphone from customer limit 140000,1000; 
```

在第一个 select 语句中根据需要更改**@auto变量的值。**

# android - 页面转换期间 Jquery Mobile 页面调整大小

> ID：13807260
> 
> 赞同：7
> 
> 时间：2012-12-10T18:51:15.780
> 
> 标签：android, jquery, cordova, jquery-mobile, mobile

我正在使用 Jquery Mobile 和 Phonegap 开发一个应用程序。我遇到的问题是，当我进行页面转换时，传入的页面首先出现不正确（DOM 元素的位置不正确，大小也不正确），然后一旦转换完成，元素会调整大小并移动到正确的位置. （此外，移出的页面在移出之前也会出现错误）。我已经使用淡入淡出和幻灯片过渡对此进行了测试（我希望最终有幻灯片过渡）。

这是一个说明问题的 jsFiddle：http:
[//jsfiddle.net/fz7qs/2/](http://jsfiddle.net/fz7qs/2/)

我还使用 div 作为页面容器，以便整个页面不会立即转换，而只是页面容器 div。

我对几乎所有东西（高度、宽度、边距等）都使用 css 百分比，以便应用程序可以扩展到不同的设备尺寸。此外，我正在使用 javascript 来居中某些元素（在 pageshow 事件中触发）。我认为这些百分比是问题的一部分。我在桌面浏览器上构建了一个简单的测试（去掉了phonegap），并为页面容器设置了一个固定的高度。这似乎解决了问题，但是当我在手机上尝试时，问题仍然存在。

应用程序中的每个页面都使用 $.mobile.loadPage() 预加载到 DOM 中。我想如果我预加载它们，百分比高度将相对于父级（页面容器 div），并且过渡应该看起来正确。

进一步查看 Jquery Mobile，我发现在过渡期间，页面的高度被设置为空字符串。我试图注释掉这一行只是为了测试它是否适用于百分比高度。同样，它适用于我的桌面测试，但不适用于手机。

我在三星 Galaxy Nexus 上使用 Android phonegap（API 级别 8 - Android 2.2）进行测试。

有没有办法在页面转换之前应用 css 和 javascript 定位，同时保持基于百分比的值？

**索引.html**

```
<body>
    <!-- header on every page -->
    <div id="mainHeader">This is a header</div>

    <!-- page content -->
    <div id="pageContainer">
        <div data-role="page"></div>
    </div>
</body> 
```

**page1.html**

```
<body> 
    <div data-role="page" id="page1">
        <div class="subheader">
            <div class="backButton"></div>
            <div class="subheaderText">Settings</div>
            <div class="helpButton"></div>
        </div>
    </div>
</body> 
```

**相关的CSS**

```
#pageContainer {
    overflow: hidden;
    width: 100%;
    height: 86.772486772486772486772486772487%;
}

.ui-mobile [data-role="page"] {
    min-height: 0px !important;
    color: white;
    position: relative;
    width: 100%;
    height: 100%;
    background: #868a73;
}

.subheader {
    width: 100%;
    height: 10.16260162601626016260162601626%;
    background-color: #000;
    display: inline-block;
    text-align: center;
    position: relative;
}

.backButton {
    background: url("images/back_button.png");
    background-size: contain;
    background-repeat: no-repeat;
    display: inline-block;
    float: left;
    width: 8.888888888888888888888888888889%;
    height: 52%;
    margin-left: 5.555555555555555555555555555556%;
}

.subheaderText {
    color: #FFF;
    font-size: 2.45em;
    font-weight: bold;
    display: inline-block;
}

.helpButton {
    float: right;
    background: url("images/help_button.png");
    background-size: contain;
    background-repeat: no-repeat;
    display: inline-block;
    width: 8.888888888888888888888888888889%;
    height: 64%;
    right: 5.555555555555555555555555555556%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:53:29.940

首先，您可以使您的 html 看起来像 jquery 移动教程页面。你需要有像这样的html结构：

```
<div data-role="page">

    <div data-role="header">
        <h1>Page Title</h1>
    </div><!-- /header -->

    <div data-role="content">   
        <p>Page content goes here.</p>  
    </div><!-- /content -->

    <div data-role="footer">
        <h4>Page Footer</h4>
    </div><!-- /footer --> 
```

看看[jquery mobile page anatomy](http://jquerymobile.com/demos/1.2.0/docs/pages/page-anatomy.html)。

# mysql - sql函数查找和删除

> ID：13807261
> 
> 赞同：-2
> 
> 时间：2012-12-10T18:51:23.363
> 
> 标签：mysql, sql, oracle, plsql

我有以下几种情况，谁能告诉我如何删除 C 或 -1C 或 -2C 等。

我以不同的方式获取数据

```
Examples:  test1C : To extract as test1

           test1-1C :to extract as test1

           test1-2C : to extract as test1.
           testC1C : to extract as testC1
           testCC: to extract as testC 
```

我尝试了 substr 和 instr 函数，但无法竖起大拇指。在上面的例子中，预期的数据并不总是长度为“5”。数据会有所不同，但有时数据会附加“C”或“-1C”或“-2C”。

问候，

柴兔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:24:03.627

只是

```
regexp_replace(str, '-[^-]*|C$', '') 
```

例如

```
SQL> with data as (select 'test1C' str, 'test1' expected from dual
  2                union all
  3                select 'test1-1C', 'test1' from dual
  4                union all
  5                select 'test1-2C', 'test1' from dual
  6                union all
  7                select 'testC1C', 'testC1' from dual
  8                union all
  9                select 'testCC', 'testC' from dual)
 10  select str, expected, regexp_replace(str, '-[^-]*|C$', '') actual
 11  from data;

STR      EXPECT ACTUAL
-------- ------ ----------
test1C   test1  test1
test1-1C test1  test1
test1-2C test1  test1
testC1C  testC1 testC1
testCC   testC  testC

SQL> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:57:33.203

1.  select replace(column_name, 'C', '') from table_name - 这在 sybase 中工作正常
2.  select replace ((select replace(column_name, '-', '') from table_name), C,'')
3.  select replace((select replace(column_name, '-', '') from table_name), C,'')

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T18:57:33.807

如果您只是想提取前 5 个字符，那么 Substr 应该可以正常工作。即以上所有内容的 SUBSTR(Column_Name,1,5) 将为您提供“test1”。我错过了什么吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T19:01:32.363

为什么不只取前 5 个字符？

```
left(val, 5) 
```

让我猜测规则是：如果有连字符，则连字符之前的所有内容；如果有“C”，则表示“C”之前的所有内容；否则所有内容：

```
left(val, (case when locate('-', val) > 0 then locate('-', val) - 1
                when locate('C', val) > 0 then length(val) - locate('C', reverse(val)) - 1
                else length(val)
            end)) 
```

这是否适用于区分大小写 c 可能取决于您的整理顺序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T19:06:35.493

一种解决方案是创建临时表，将所有数据转储到其中。然后使用更新函数更新那里的值。步骤如下

1.  创建临时表
2.  将数据写入临时表
3.  更新临时表。根据需要更新列值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T19:07:40.910

这个查询呢？

```
select substring_index(substring_index('test1-2C', 'C', 1), '-', 1) 
```

* * *

**功能：**

```
create function mytrim(p_text varchar(100))
returns varchar(100)
begin
  set @text = reverse(p_text);
  set @l = locate('-', @text);
  if @l > 0 then
    return reverse(substring(@text, @l + 1));
  elseif locate('C', @text) > 0 then
    return reverse(substring(@text, 2));
  else
    return p_text;
  end if;
end 
```

# ruby-on-rails - 模型.find mongoid 2.x

> ID：13807265
> 
> 赞同：0
> 
> 时间：2012-12-10T18:51:33.567
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

在`mongoid 2.x`这个查询中可能吗？

```
User.find(username: "hyperrjas") 
```

我得到错误：

```
Mongoid::Errors::DocumentNotFound: Document not found for class User with id(s) {:username=> "hyperrjas"}. 
```

在 mongoid 3.x 中可以使用`Model.find_by(username: "hyperrjas")`

`mongoid 2.x`作为我使用的替代方案

```
Model.find_or_create_by(username: "hyperrjas") 
```

**但我的问题是，是否可以`Model.find(username: "hyperrjas")`与 mongoid 2.x 一起使用**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:51:34.810

使用 where 而不是 find 的方法。Find 请求一个 id。

欲了解更多信息：[http ://two.mongoid.org/docs/querying/criteria.html](http://two.mongoid.org/docs/querying/criteria.html)

（对于 mongoid 3.x：[http](http://mongoid.org/en/mongoid/docs/querying.html) ://mongoid.org/en/mongoid/docs/querying.html ）

# c# - 操作事件路由

> ID：13807266
> 
> 赞同：0
> 
> 时间：2012-12-10T18:51:48.623
> 
> 标签：c#, wpf, pixelsense

我需要以下指导。操作事件应该在视觉树上向上路由直到被处理？

我有以下内容：

```
Canvas canvas = new Canvas();
canvas.Width = 1920;
canvas.Height = 1200;
canvas.IsManipulationEnabled = true;
canvas.AddHandler(ManipulationStartingEvent, new EventHandler<ManipulationStartingEventArgs>(CanvasManipulationStarting), true); 

ScatterViewItem svi = new ScatterViewItem();
svi.AddHandler(ManipulationStartingEvent, new EventHandler<ManipulationStartingEventArgs>(SVIManipulationStarting), true);
svi.Content = canvas;

public void SVIManipulationStarting(object sender, ManipulationStartingEventArgs e)
{
   //e.Handled = true; //This fires if uncommented
}

public void CanvasManipulationStarting(object sender, ManipulationStartingEventArgs e)
{
     e.Handled = true; //This never fires regardless :( sob
} 
```

如果我单击画布，SVIManipulationStarting 会触发，但如果未注释，CanVasManipulationStarting 永远不会触发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T08:41:37.900

没有办法，如果我理解正确，`Canvas`如果你点击它就不会引发操作事件，并且`ScatterViewItem`（它是 的容器`Canvas`）引发了这个事件，特别是如果你在`Canvas`操作事件处理程序中处理它。

*   你确定你在点击画布吗？添加背景颜色以检查它。如果您`Canvas`没有颜色，则在您设置为`Background`之前无法点击`IsHitTestVisible``true`
*   尝试在`Canvas`不将其添加到您的`ScatterViewItem`（但添加到其他现有容器）的情况下操作您的。只是为了检查您`Canvas`在其他情况下的行为。

# android - android使用.der公钥验证文件的签名

> ID：13807267
> 
> 赞同：3
> 
> 时间：2012-12-10T18:52:01.100
> 
> 标签：android, openssl, rsa, digital-signature, sha1

我正在尝试验证文件的签名。我按照这些说明生成证书：

```
// generate a private key with size of 2048 bits
openssl genrsa -out private_key.pem 2048

// derive a public key from the above private key
openssl rsa -in private_key.pem -out public_key.pem -outform PEM -pubout

// iOS will not import PEM encoded data so it needs to be converted to DER encoded data
openssl rsa -pubin -inform PEM -outform DER -in public_key.pem -out public_key.der

// generate a self-signed certificate for testing
openssl req -new -x509 -key private_key.pem -out test_cert.pem -days 1095

// show the content of the original certificate
openssl x509 -in test_cert.pem -text -noout
// convert the certificate to DER format
openssl x509 -in test_cert.pem -outform der -out test_cert.der
// show the content of the new certificate
openssl x509 -in test_cert.der -inform der -text -noout 
```

我使用[此链接](https://web.archive.org/web/20160330194058/www.codealias.info/technotes/openssl_rsa_sign_and_verify_howto)上的示例来散列一些数据并验证一切都很好（我执行了步骤 2 - 5）。

现在我尝试将 .der 文件、签名文件和数据文件放入 Android 应用程序中，并且基本上再次验证一切正常。我没有收到任何错误，但我没有出错。下面是我编写的代码：

```
import android.app.Activity;
import android.os.Bundle;
import android.os.Environment;
import android.util.Base64;
import android.util.Log;
import android.widget.TextView;

import java.io.*;
import java.security.*;
import java.security.cert.CertificateFactory;
import java.security.cert.Certificate;

// Most of the below is taken from:
// http://www.herongyang.com/JDK/Digital-Signature-JcaVerify-Signature-Verification-Program.html
public class MyActivity extends Activity {

String input = Environment.getExternalStorageDirectory() + "/data.txt";
String signFile = Environment.getExternalStorageDirectory() + "/signature";
String signAlgo = "SHA1withRSA";
int keyFile = R.raw.test_cert_josh;
String TAG = "VERIFY";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView textView = (TextView) findViewById(R.id.textView);

    try {
        PublicKey pubKey = readPublicKey(keyFile);
        byte[] sign = readSignature(signFile);
        textView.setText(verify(input, signAlgo, sign, pubKey) + "");
    } catch (Exception e) {
        e.printStackTrace();
    }
}

PublicKey readPublicKey(int cert_id) throws Exception {
    InputStream in = MyActivity.this.getResources().openRawResource(cert_id);
    byte[] buff = new byte[4000];
    int bytesRead;
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    while((bytesRead = in.read(buff)) != -1) {
        out.write(buff, 0, bytesRead);
        Log.i(TAG, "bytes read: " + bytesRead);
    }

    byte[] publicKeyBytes = out.toByteArray();

    CertificateFactory cf = CertificateFactory.getInstance("X509");
    Certificate cert = cf.generateCertificate(new ByteArrayInputStream(publicKeyBytes));

    PublicKey pubKey = cert.getPublicKey();
    Log.i(TAG, "Public Key Info: ");
    Log.i(TAG, "Algorithm = " + pubKey.getAlgorithm());
    Log.i(TAG, "toString = " + pubKey.toString());
    return pubKey;
}

byte[] readSignature(String input) throws Exception {
    FileInputStream signStream = new FileInputStream(input);
    byte[] signBytes = new byte[signStream.available()];
    signStream.read(signBytes);
    signStream.close();
    return  signBytes;
}

boolean verify(String input, String algorithm, byte[] sign, PublicKey pubKey) throws Exception {
    Signature sg = Signature.getInstance(algorithm);
    sg.initVerify(pubKey);
    Log.i(TAG, "Signature Object Info: ");
    Log.i(TAG, "Algorithm = "+sg.getAlgorithm());
    Log.i(TAG, "Provider = "+sg.getProvider());

    FileInputStream in = new FileInputStream(input);
    byte[] buff = new byte[in.available()];
    in.read(buff);

    sg.update(buff);

    boolean ok = sg.verify(sign);
    Log.i(TAG, "Verify Processing Info: ");
    Log.i(TAG, "Verification result = "+ok);
    return ok;
}
} 
```

我读过的所有内容都表明我的代码是正确的。我认为关于获取公钥的部分是正确的，因为模数与实际 .der 文件中的模数匹配。

请帮忙！

**编辑：** 我认为这与我读取签名文件或数据文件的方式有关。我很确定我正确地获取了有关公钥的所有信息，因为我打印了有关它的其他信息并且它匹配到 openssl 输出

**根据 Nikolay 在下面的建议进行编辑** ，我尝试在 Android 应用程序中签署与我使用以下代码登录 openssl 的相同数据：

```
// testing code to sign it myself
// read the data file in
FileInputStream dataStream = new FileInputStream(input);
byte[] dataBytes = new byte[dataStream.available()];
dataStream.read(dataBytes);
dataStream.close();

// hash the data file, like i do with openssl
// per Nikolay's comments, this is not needed
MessageDigest digest = MessageDigest.getInstance("SHA-1");
// digest.update(dataBytes, 0, dataBytes.length);
// dataBytes = digest.digest();
Log.i(TAG, "data from file: " + new String(dataBytes));

// read the private key in
FileInputStream fis = new FileInputStream(Environment.getExternalStorageDirectory() + "/phaero/private_key.pem");
byte[] keyBytes = new byte[fis.available()];
fis.read(keyBytes);
fis.close();

// clean up the private key and decode it
String temp = new String(keyBytes);
Log.i(TAG, "private key: " + temp);
String privKeyPEM = temp.replace("-----BEGIN RSA PRIVATE KEY-----\n", "");
privKeyPEM = privKeyPEM.replace("-----END RSA PRIVATE KEY-----", "");
byte[] decoded = Base64.decode(privKeyPEM.getBytes(), Base64.DEFAULT);

// create the private key object from the private key data
PKCS8EncodedKeySpec private_spec = new PKCS8EncodedKeySpec(decoded);
KeyFactory kf = KeyFactory.getInstance("RSA");
PrivateKey privateKey =  kf.generatePrivate(private_spec);

// set up for signing
Signature signer = Signature.getInstance(signAlgo);
signer.initSign(privateKey);
signer.update(dataBytes, 0, dataBytes.length);

// sign, and hash again so i can compare against openssl output
byte[] signed = signer.sign();
digest.update(signed, 0, signed.length);
Log.i(TAG, new BigInteger(1, digest.digest()).toString(16)); 
```

快速说明：在 Jelly Bean 中使用上述代码，您必须在创建 KeyFactory 时指定“BC”。

然后我对签名结果进行哈希处理，看看它是否与使用 openssl 生成的签名文件的哈希值匹配，但它们不匹配。所以我不知道这意味着什么，但我知道这意味着什么！我假设在 openssl 中创建签名文件时需要指定某种附加选项？

**编辑：**

根据下面 Nikolay 的评论，我更新了我的测试代码以不签名，但是在 java 中创建的签名的哈希仍然与使用 openssl 创建的签名文件的哈希不匹配......不确定是什么问题，Java、OpenSSL 或我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T15:28:47.827

在@NikolayElenkov 的大量帮助之后，我终于弄清楚出了什么问题。尝试不同的谷歌搜索时，我偶然发现了[这个 stackoverflow 问题](https://stackoverflow.com/questions/9951559/difference-between-openssl-rsautl-and-dgst)，他说你可以运行两个不同的签名命令。当我创建所有签名时，我使用的是上面链接到的东西：

```
// create a hash
echo 'data to sign' > data.txt
openssl dgst -sha1 < data.txt > hash
// sign it
openssl rsautl -sign -inkey private.pem -keyform PEM -in hash  > signature
// verify it
openssl rsautl -verify -inkey public.pem -keyform PEM -pubin -in signature > verified
diff -s verified hash 
```

从我今天找到的帖子中，我尝试了：

```
openssl dgst -sha1 -sign privateKey.pem -out signature1 someInputFile 
```

正如那家伙所说，它创建了一个不同的签名文件。这是我需要的 Android 代码！所以，得到这个验证的答案是我需要改变我生成签名文件的方式！（如果没有@NikolayElenkov，我不会走到这一步，非常感谢！）

# iphone - 目标 c - 从远程服务器播放音频时显示缓冲进度

> ID：13807278
> 
> 赞同：7
> 
> 时间：2012-12-10T18:52:57.817
> 
> 标签：iphone, objective-c, ios, avaudioplayer, avplayer

我正在使用`AVPlayer`从远程服务器播放音频。

我想显示一个进度条，显示缓冲进度和“播放时间”进度，就像`MPMoviePlayerController`播放电影时一样。

是否`AVPlayer`有任何显示此信息的 UI 组件？如果没有，我怎样才能得到这个信息（缓冲状态）？

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-11T10:20:59.413

## AVPlayer 是否有任何显示此信息的 UI 组件？

不，AVPlayer 没有 UI 组件。

## 如果没有，我怎样才能得到这个信息（缓冲状态）？

你应该观察`AVPlayerItem.loadedTimeRanges`

```
[yourPlayerItem addObserver:self forKeyPath:@"loadedTimeRanges" options:NSKeyValueObservingOptionNew context:nil]; 
```

然后使用KVO观看

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object
                    change:(NSDictionary *)change context:(void *)context {
    if(object == player.currentItem && [keyPath isEqualToString:@"loadedTimeRanges"]){
        NSArray *timeRanges = (NSArray*)[change objectForKey:NSKeyValueChangeNewKey];
        if (timeRanges && [timeRanges count]) {
            CMTimeRange timerange=[[timeRanges objectAtIndex:0]CMTimeRangeValue];
        }
    }
 } 
```

`timerange.duration`是你所期望的。

而且您必须手动绘制缓冲区进度。

参考[这里](https://stackoverflow.com/questions/4495433/uislider-with-progressview-combined)。

# google-apps-script - ScriptDB 分组方式

> ID：13807284
> 
> 赞同：0
> 
> 时间：2012-12-10T18:53:40.367
> 
> 标签：google-apps-script

是否可以通过存储在数据库中的记录的任何数据对结果进行分组？我已经阅读了 google-apps-script 文档，但没有运气。

我有：

```
userLogActivity = {
  registry_type: "userLog",
  user_email: activeUser.getEmail(),
  user_loginId: activeUser.getUserLoginId(),
  user_urlAccess: activePage.getUrl(),
  user_date: currentDate.getTime()
}; 
```

我像这样检索这些记录：

```
var db = ScriptDb.getMyDb();
var results = db.query({}).sortBy("user_date", db.DESCENDING); 
```

但现在我需要按 user_date 分组。

一个 count() 函数也很容易......

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:19:27.427

ScriptDb 没有本机 groupBy，但您可以很容易地模仿它：

```
var results = db.query({}).sortBy("user_date", db.DESCENDING);
var grouped = {};
while (result.hasNext()) {
  var obj  = result.next();
  var key = obj.user_date; 
  grouped[key] = grouped[key] || [];
  grouped[key].push(obj);
} 
```

然而，计数是内置的。对于计数，只需替换`db.query({})`为`db.count({})`

# python - _ctypes._SimpleCData.__mul__() 方法在哪里实现？

> ID：13807287
> 
> 赞同：0
> 
> 时间：2012-12-10T18:53:50.673
> 
> 标签：python, ctypes

例如：

```
>>> ctypes.c_char * 2
<type '_ctypes.SimpleType'> 
```

该类型`c_char_Array_2`是由 中的`__mul__()`方法动态创建的`_ctypes._SimpleCData`，我想知道它是如何做到的，但是我找不到任何有关该`__mul__()`方法的源代码，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:25:17.647

如果你想看看 C 源代码实现`ctypes`，你可以在[这里](http://hg.python.org/cpython/file/tip/Modules/_ctypes)找到它。`ctypes`是用 C 实现的，所以你不会`__mul__`在任何`.py`文件中找到 的实现。

在 python 中这样的事情可以使用[metaclassing](http://en.wikibooks.org/wiki/Python_Programming/MetaClasses)来完成。
简单的例子：

```
class Spam(type):
    def spam(cls): print("spam:", cls.__name__)
    def __mul__(self, other):
        ' create a new class on the fly and return it '
        class Eggs(metaclass=Spam):
            def eggs(self): print("eggs" * other)
        return Eggs

class Ham(metaclass=Spam):
    def ham(self): print('ham')

print(Ham)                 # <class '__main__.Eggs'>
Ham.spam()                 # spam: Ham
Ham().ham()                # ham
# create new class:
TwoEggs = Ham * 2
print(TwoEggs)             # <class '__main__.Eggs'>
TwoEggs.spam()             # spam: Eggs
TwoEggs().eggs()           # eggseggs 
```

（pyhton3 语法，python2 使用`__metaclass__`属性而不是`metaclass`参数。）

# ms-access - 从列表框中获取值并复制到未绑定文本框的控制源

> ID：13807291
> 
> 赞同：0
> 
> 时间：2012-12-10T18:54:02.267
> 
> 标签：ms-access, vba, ms-access-2007

我有一个列表框，我想获取 onclick 的值并将其复制到 microsoft access 中列表框的控制源。

`SearchResults`是列表框的名称

`BookTitle`是文本框的名称

我已经尝试过这段代码，但它似乎不起作用：

```
Private Sub SearchResults_OnClick()

BookTitle.ControlSource = Forms!Edit!SearchResults.Column(2)

End Sub 
```

任何帮助都非常感谢谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:21:30.990

为什么要复制到控制源？它是一个字段的名称吗？如果没有，只需设置值：

```
Private Sub SearchResults_OnClick()

    Me.BookTitle = Me.SearchResults.Column(2)

End Sub 
```

不要忘记列是从零开始编号的。

编辑重新评论

很粗略。

列表框：

```
SELECT ID, Title FROM tbl_Books WHERE Title LIKE ... 
```

一小段代码：

```
Private Sub SearchResults_OnClick()
    'Save
    Me.Dirty=False
    'Find
    Me.Recordset.FindFirst "ID=" & Me.SearchResults
End Sub 
```

将合适的控制源添加到任何文本框，以便您可以编辑基础表中的数据。如果您愿意，可以隐藏文本框。

# ravendb - RavenDB - 我可以从不共享持久化 CLR 对象的应用程序创建/查询索引吗？

> ID：13807292
> 
> 赞同：0
> 
> 时间：2012-12-10T18:54:08.660
> 
> 标签：ravendb

[这篇](https://stackoverflow.com/questions/13270681/accessing-a-single-ravendb-from-different-applications)文章在某种程度上回答了这个问题（我稍后会包括答案），但我希望能得到更多的细节。

我们有许多应用程序，每个应用程序都需要以自己的方式访问/操作来自 Raven 的数据。数据仅通过主 Web 应用程序写入。其他应用程序包括批处理式任务、报告等。为了使这些中的每一个尽可能地分离，它们是单独的解决方案。

在这种情况下，我如何从报告应用程序中使用本地定义的类型在现有数据上创建索引？

来自链接问题的答案状态

> 只要您要反序列化的类的结构与数据的结构部分匹配，它就不会产生影响。
> 
> RavenDB 服务器根本不关心您在客户端使用什么类。如果您针对不同的平台，您当然可以共享一个 dll，甚至共享一个可移植的 dll。但是你是对的，没有必要。
> 
> 但是，您应该了解 Raven-Clr-Type 元数据值。RavenDB 客户端在存储原始文档时会设置此项。它被客户端消耗回来以协助反序列化，但它没有完全强制执行

这是我想要澄清的第一部分。服务器上文档的对象图和我的应用程序中的类型是否必须完全匹配？如果服务器上的 Click 文档是

```
{
  "Visit": {
    "Version": "0",
    "Domain": "www.mydomain.com",
    "Page": "/index",
    "QueryString": "",
    "IPAddress": "127.0.0.1",
    "Guid": "10cb6886-cb5c-46f8-94ed-4b0d45a5e9ca",
    "MetaData": {
      "Version": "1",
      "CreatedDate": "2012-11-09T15:11:03.5669038Z",
      "UpdatedDate": "2012-11-09T15:11:03.5669038Z",
      "DeletedDate": null
    }
  },
  "ResultId": "Results/1",
  "ProductCode": "280",
  "MetaData": {
    "Version": "1",
    "CreatedDate": "2012-11-09T15:14:26.1332596Z",
    "UpdatedDate": "2012-11-09T15:14:26.1332596Z",
    "DeletedDate": null
  }
} 
```

是否可以（如果可以，如何？）从我的应用程序创建一个 Map 索引，它定义 Click 类如下？

```
class Click
{
    public Guid Guid {get;set;}
    public int ProductCode {get;set;}
    public DateTime CreatedDate {get;set;}
} 
```

还是我的班级必须看起来像这样？（其中自定义类型被定义为上述文档中属性的子集，具有匹配的属性名称）

```
class Click
{
    public Visit Visit {get;set;}
    public int ProductCode {get;set;}
    public MetaData MetaData {get;set;}
} 
```

* * *

**更新**

从下面的答案开始，这是我设法开始工作的代码。

**指数**

```
public class Clicks_ByVisitGuidAndProductCode : AbstractIndexCreationTask
{
    public override IndexDefinition CreateIndexDefinition()
    {
        return new IndexDefinition
            {
                Map =
                    "from click in docs.Clicks select new {Guid = click.Visit.Guid, ProductCode = click.ProductCode, CreatedDate = click.MetaData.CreatedDate}",
                TransformResults =
                    "results.Select(click => new {Guid = click.Visit.Guid, ProductCode = click.ProductCode, CreatedDate = click.MetaData.CreatedDate})"
            };
    }
} 
```

**询问**

```
var query = _documentSession.Query<ReportClick, Clicks_ByVisitGuidAndProductCode>()
                            .Customize(x => x.WaitForNonStaleResultsAsOfNow())
                            .Where(x => x.CreatedDate >= start.Date && x.CreatedDate < end.Date); 
```

点击在哪里

```
public class Click
{
    public Guid Guid { get; set; }
    public int ProductCode { get; set; }
    public DateTime CreatedDate { get; set; }
} 
```

非常感谢@MattJohnson。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:22:15.170

该形状是部分匹配的，然后它将填充它可以填充的位置，因此您的第二个示例可以正常工作。

但是，您可以创建一个索引来预测您在第一个示例中显示的结果。您将根据实际要过滤或排序的任何内容进行映射，然后添加一个 TransformResults 部分：

```
TransformResults = (database, clicks) =>
    from click in clicks
    select new {
        click.Visit.Guid,
        click.ProductCode,
        click.MetaData.CreatedDate
    }; 
```

当您查询此索引时，它将以您在转换中指定的形状出现。这是一个称为“实时投影”的功能，您可以在[此处](http://ravendb.net/docs/client-api/querying/static-indexes/live-projections)阅读更多信息。（您不需要`.As()`打电话，只需使用`.Query<Click, YourIndex>()`它应该可以正常工作。）

另外——你用 MetaData 做什么是无关紧要的。Raven 将元数据与文档分开。[在此处](http://ravendb.net/docs/client-api/advanced/document-metadata)阅读有关元数据的更多信息。

看起来你有版本问题。如果您只是保留审计线索，您应该查看 Raven 的标准[版本控制包](http://ravendb.net/docs/server/bundles/versioning)。如果您有时间有效性问题，请考虑使用我的新[Temporal Versioning Bundle](https://github.com/mj1856/RavenDB-TemporalVersioning)。

# python - linalg.solve 使用什么样的求解算法？

> ID：13807297
> 
> 赞同：3
> 
> 时间：2012-12-10T18:54:31.217
> 
> 标签：python, numpy

只是好奇它是否使用高斯消除或其他等效方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T18:58:52.283

从[numpy 文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.linalg.solve.html)：

> solve 是 LAPACK 例程 dgesv 和 zgesv 的包装器，如果 a 是实值则使用前者，如果它是复值则使用后者。使用具有部分旋转和行交换的 LU 分解 [R40] 计算线性方程组的解。

[有关dgesv](http://www.netlib.org/lapack/double/dgesv.f)和[zgesv](http://www.netlib.org/lapack/complex16/zgesv.f)的更多详细信息

# c# - 如何 使用 C# 删除标签？

> ID：13807298
> 
> 赞同：0
> 
> 时间：2012-12-10T18:54:30.267
> 
> 标签：c#, asp.net, html

我有 html 模板，我等待将其附加到文本框问题是想问如何
从 html 文件中删除标签并添加换行 html 模板示例

```
PHONE/REMOTE SUPPORT TICKET<br>
<br>
Support Type:  PHONE / REMOTE ACCESS / EMAIL<br>
CSL#:<br>
Clients Name:<br>
Clients Phone#:<br>
Clients Email:<br>
<br>
<br>
Clients Issue:<br>
<br>
<br>
<br>
<br>
Issues Resolved:<br>
Follow-up Required:<br>
On-Site/Shop Service Required:<br>
Support Time:<br> 
```

C#：附加文本框 txtb_Description

```
 protected void lnkb_clientRMA_Click(object sender, EventArgs e)
    {

        String text = File.ReadAllText(Server.MapPath("WebTemplates/seagate_rma.html"));
        txtb_Description.Text = WebUtility.HtmlDecode(text);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T18:57:52.853

你可以使用替换

```
 string txt = WebUtility.HtmlDecode(text);
    txt = txt.Replace("<br>", Controlchars.NewLine);
    txt = txt.Replace("<br/>", Controlchars.NewLine);
    txtb_Description.Text = txt; 
```

或者，更复杂的正则表达式，取决于您的应用程序。

# javascript - 进入下拉框中的值作为一行

> ID：13807302
> 
> 赞同：0
> 
> 时间：2012-12-10T18:55:00.413
> 
> 标签：javascript

我有一个下拉框，它由 mySQL 数据库中的值填充，这是我用来填充下拉列表的脚本部分。

```
var details = JSON.parse(data);
console.log(details);
for ( i = 0; i < details.aaData.length; i++) {
console.log(details.aaData[i].id);
$('select#package-id option').append(details.aaData[i].id);
} 
```

这是HTML，

```
<select name="package" name="package-id" id="package-id">
        <option></option>
</select> 
```

但是下拉菜单显示的值为 1234 ，正如我所期望的那样，

1

2

3

4

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:16:19.417

尝试改变这个：

```
var details = JSON.parse(data);
console.log(details);
for ( i = 0; i < details.aaData.length; i++) {
console.log(details.aaData[i].id);
$('select#package-id option').append(details.aaData[i].id);
} 
```

对此：

```
var details = JSON.parse(data);
console.log(details);
for ( i = 0; i < details.aaData.length; i++) {
console.log(details.aaData[i].id);
$('select#package-id').append("<option value='"+details.aaData[i].id+"'>"+details.aaData[i].id+"</option>");
} 
```

现在看起来您可能正在空白选项中创建一堆选项。

# java - 将类从 WAR 移动到 JAR 时出现 NoClassDefFoundError

> ID：13807306
> 
> 赞同：0
> 
> 时间：2012-12-10T18:55:10.130
> 
> 标签：java, tomcat, servlets, quartz-scheduler

我正在尝试以一种允许我将 Quartz 作业动态添加到类路径的方式部署一个动态 Web 项目。这是我的想法。

'如果我从包含完全限定类路径的 XML 文件中读取配置，然后在类中使用 Class.forName() 从配置 XML 创建所述类的实例，那么我应该能够访问放置在 Tomcat 中的动态添加的类TOMCAT_HOME/lib 目录”。

在此更新之前，该应用程序运行良好，但我在战争中包含了这些新的外部化类。但是，我不能再这样做了，因为我：

1.  不想每次需要新工作时都重新部署战争。
2.  无法关闭服务器以添加新作业，因为有些作业需要连续运行。

但是，当我运行 class.forName() 方法时，我得到了 NoClassDefFoundError。我已经在 catalina.properties 中验证了 Tomcat 中的 lib 目录位于 common.loader 属性中。

我的问题是，如何让我的 WAR 类识别 Tomcat 公共库中 jar 中的类。有任何想法吗？谢谢。

添加：

@BalusC：我实际上已经开发了一个基于 Web 的管理屏幕，它允许用户编辑 XML 配置文件以添加新作业。但是，要添加的不仅仅是另一个作业实例，而是一个全新的作业，需要对这个新作业进行代码定义。我希望将它放入一个 jar 文件中，然后放入 tomcat lib 目录中，以便由 class.forName() 获取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:15:28.487

希望 Tomcat 不会自动重新加载您的上下文或在您的类加载器中自动加载 jar。它可能导致无法控制的行为。

如果不`WebAppClassLoader`通过`URLClassLoader`. 我会建议使用 jar 的绝对路径。由于一些黑暗的原因，我遇到了相对路径的问题。

如果您想知道 tomcat 的安装路径，例如 lib 目录，您可以使用`catalina.home`和`catalina.base`环境变量。

HIH

# ios - ViewController 到 NavigationController 并返回

> ID：13807310
> 
> 赞同：0
> 
> 时间：2012-12-10T18:55:32.237
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, uistoryboardsegue

我有一个问题，我不确定如何解决。目前我主要`UIViewController`有一些按钮。这是使用 app 创建的初始视图。在它上面，一个按钮调用 Storyboards segue 与 ViewController 上的样式 Modal ，它是`UINavigationController`. 之后，在`UINavigationController`via segues 中处理了一些其他视图控制器并返回 via `navigationController:popViewControllerAnimated`。我不知道如何从`UINavigationController`第一个返回`UIViewController`。我试过，当我在navigationctrl上的第一个时，

```
[self removeFromParentViewController]; 
```

然而，这只删除了视图，但似乎以`UINavigationController`某种方式保持活力，因为结果是黑屏。创建未连接的 segue 并从代码中调用它是可能的，但我不确定这是否是正确的方法。那会让导航控制器活着吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T09:00:24.303

你有什么理由使用`UIViewController`first 和 THEN a`UINavigationController`吗？

为什么不改变它，让它`UINavigationController`成为初始视图控制器，然后从那里驱动一切。

如果您希望第一个视图没有导航栏，那么您可以轻松隐藏它。

这样，您可以通过弹出和推入`UINavigationController`.

# c# - 在 C# 中实现一个硬币罐

> ID：13807313
> 
> 赞同：-6
> 
> 时间：2012-12-10T18:55:36.667
> 
> 标签：c#, oop, object

我有一个一般的面向对象编程问题。它来自一项作业，我已经写下了我的答案，但我怀疑它是教师正在寻找的。我正在寻找任何人关于使用什么 C# OOP 技术来正确实现该类的意见和建议。

**问题：** 在 C# 中实现一个硬币罐。硬币罐只接受美国硬币，容量为 32 液量盎司。此外，罐子有一个计数器来跟踪收集的总金额，并能够将计数重置为 0.00 美元

**我的代码：**

```
interface ICoinJar
{
    int coinage
    {
        get;
        set;
    }
    void resetcount();
}

static class USCoinTypes
{
 //Might want to make this a static array.
    public static readonly int US_CURRENCY_TYPE = 1;
    public static readonly int CURRENCY_AMOUNT = 0;
    public static readonly int CURRENCY_VOLUME = 1;
    public static readonly int MAX_VOLUME = 32;

    public enum CoinTypes
    {
        ONE_CENT = 0,
        FIVE_CENT,
        TEN_CENT,
        TWENTY_FIVE_CENT
    }

    public static readonly int[,] CoinInfo =
    {
        //amount, volume
        {1,5},
        {5,6},
        {10,3},
        {25,8}
    };

}

class USCoinJar : ICoinJar 
{

    // coinage in cents (NOT $)
    public int coinage { get; set; }
    public int volume { get; set; }

    public USCoinJar()
    {
    }

    //in Cents.
    //Could also make this accept an array for inserting multiple coins.
    public bool addcoins(int amount, int volume,  USCoinTypes.CoinTypes currencytype)
    {
        if (this.volume + volume > USCoinTypes.MAX_VOLUME)
            return false;
        coinage = coinage + amount;
        this.volume = this.volume + volume;
        return true;
    }

    public void resetcount()
    {
        coinage = 0;
        volume = 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:03:09.340

您的实施几乎没有问题：

*   您将硬币和音量都暴露为可写的，这意味着我可以说`coinage = 100000; volumne = 0;`，您的程序将继续执行，就好像没有任何问题一样。
*   您要求用户计算数量，不要让您的用户做您可以做的数学
*   您实际上并没有允许用户告诉您足够的信息来计算音量。如果我将 addcoins 称为 25 美分，这是否意味着 25 美分、25 美分、镍等？
*   值是什么`static readonly int`，为什么要将它们设为数组？
*   命名，除非你的教授另有说明，否则你应该遵循微软发布的[命名指南。](http://msdn.microsoft.com/en-us/library/xzf533w0%28v=vs.71%29.aspx)

我可以继续说下去，但希望这足以让您开始正确地了解您的真正需求是什么以及您将如何满足它们。

# sql - 查找重复出现相同两列值的行

> ID：13807314
> 
> 赞同：2
> 
> 时间：2012-12-10T18:55:38.377
> 
> 标签：sql, sql-server

给定 SQL-Server 中的表，例如：

```
Id INTEGER
A  VARCHAR(50)
B  VARCHAR(50)
-- Some other columns 
```

在 A 或 B 上没有索引的情况下，我希望找到 A 和 B 的唯一组合不止一次出现的行。

我正在使用查询

```
SELECT A+B, Count(A+B) FROM MyTable
GROUP BY A+B
HAVING COUNT(A+B) > 1 
```

**第一个问题**

有没有更省时的方法来做到这一点？（我无法向数据库添加索引）

**第二个问题**

当我尝试通过`,`在连接中包含 a 来获得输出的某些格式时：

```
SELECT A+','+B, Count(A+','+B) FROM MyTable
GROUP BY A+','+B
HAVING COUNT(A+','+B) > 1 
```

查询失败并出现错误

```
Column 'MyDB.dbo.MyTable.A' is invalid in the select list because it is not contained in either an aggregate function or the GROUP BY clause 
```

B 列也有类似的错误。

如何格式化输出以分隔两列？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T19:13:07.853

对我来说，这样写似乎更自然：

```
SELECT A, B, Count(*) FROM MyTable
GROUP BY A, B
HAVING COUNT(*) > 1 
```

这是最有效的方法（问题中的查询也是如此）。

与上述查询类似，您可以重写第二个查询：

```
SELECT A + ',' + B, Count(*) FROM MyTable
GROUP BY A, B
HAVING COUNT(*) > 1 
```

# ruby-on-rails - Rails：查找缺少 has_one 记录的模型

> ID：13807315
> 
> 赞同：0
> 
> 时间：2012-12-10T18:55:41.127
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

如果模型**User has_one Profile**，是否有一种简单的方法可以找到没有自定义查询（例如 NOT ）或在应用程序中处理它的所有没有个人资料的用户`User.where('profile_id IS NULL')`？

由于 Rails 已经知道 User 和 Profile 之间的关联，我不想重述它。我想保持这个干燥。模型之间的实际连接比这个简单的示例（使用键和类名）更复杂，并且将来可能会发生变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:51:28.423

正如@tadman 和@antonk 已经说过的，您可能想要使用`scope`：

```
scope :without_profile, where(profile_id: nil) 
```

编辑：回答@David Mauricio 的问题：您可以通过调用来使用它`User.without_profile`，以返回所有用户的AR 关联`nil` `:profile_id`。

@DriverDan：那我真的不确定你要什么。再问一个更详细的问题，我们可以尝试回答！

# javascript - 如何使用 JQuery 从表中删除一行

> ID：13807316
> 
> 赞同：0
> 
> 时间：2012-12-10T18:55:42.357
> 
> 标签：javascript, jquery, jquery-ui, jsp

我有一个表，其中只有一行包含 class='99999' 的列。（其他行的列具有不同的类，我无法为一行设置 id，因为该表是由 display:table 生成的） . 我正在尝试删除具有 class='99999' 的列的整行。看起来像这样的部分：

```
$("td.99999").first().parent().remove(); 
```

不管用。

这是html的样子：

```
<html>
<head>
<script type="text/javascript" src="/js/jquery-1.3.2/jquery-1.3.2.min.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        alert("I am here");
        $("td.99999").first().parent().remove();
    });
</script>
</head>

<table border="1">
    <tr >
        <th>category</th>
        <th>rank</th>
        <th>priority</th>
        <th>contact</th>
        <th>price</th>
        <th>tax</th>
        <th>total price</th>
        <th>shipping</th>
        <th>Net payment</th>
    </tr>
    <tr class="displaytagOddRow">
        <td class="99999">category 1</td>
        <td class="99999">99999</td>
        <td class="99999">something</td>
        <td class="99999">something</td>
        <td class="99999 alignRight">$3,433</td>
        <td class="99999 alignRight">$300</td>
        <td class="99999 alignRight">$3,733</td>
        <td class="99999 alignRight">$349</td>
        <td class="99999 alignRight">$4,082</td>
    </tr>
    <tr class="displaytagOddRow">
        <td class="3333">category 2</td>
        <td class="3333">3333</td>
        <td class="3333">something</td>
        <td class="3333">something</td>
        <td class="3333 alignRight">$3,433</td>
        <td class="3333 alignRight">$300</td>
        <td class="3333 alignRight">$3,733</td>
        <td class="3333 alignRight">$349</td>
        <td class="3333 alignRight">$4,082</td>
    </tr>
</table>
</html> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:09:49.917

您已在脚本标记中添加了对 jquery 文件的引用，并且在您编写代码的同一标记中。您必须将其放在另一个脚本标记中，如下所示：

```
 <script type="text/javascript">
           $(document).ready(function(){

                                         alert("I am here");
                 $("td.99999").first().parent().remove();

                                      });
     </script> 
```

将您的以下代码保留为

```
 <script type="text/javascript" src="/js/jquery-1.3.2/jquery-1.3.2.min.js"></script> 
```

它会正常工作...

# drop-down-menu - IE9（和 IE8）下拉悬停问题

> ID：13807318
> 
> 赞同：1
> 
> 时间：2012-12-10T18:55:48.303
> 
> 标签：drop-down-menu, internet-explorer-9

我花了很多时间研究这个主题，我没有找到解决我的特定问题的方法，即使我遇到了类似的问题，但他们的解决方案似乎不适合我。我遇到的问题在任何非 IE 浏览器中都不存在。当我将鼠标悬停在主链接上以查看下拉列表时，我正在构建的网站的主导航 (#mainNav)，链接的焦点似乎只在实际文本上。所以，当我尝试将鼠标向下移动列表时，它不会比主链接文本更远，然后手变回箭头并且菜单消失。这是一个 CSS3 菜单在所有浏览器中成功地在另一个站点上工作，并且似乎没有任何 IE 修复，所以我抓住了代码并决定将它用于这个站点。一切都很顺利，直到我在 IE 中检查它：/

这些是我查看的区域（在这种情况下通常是问题）：显示块（存在于所有“a”标签上）、删除边距和增加填充（没有帮助）、分配高度值（没有帮助），增加行高（不）。我在其他博客中读到，链接上没有背景颜色可能是一个问题（不），还读到使用透明的 1px 图像可以解决问题（不）。当我说“不”时，假设我正确地合并了修复程序。

我非常感谢帮助！

这是CSS：

```
/* //////// MAIN NAVIGATION //////// */

/* Reset */
#navMain,
#navMain ul,
#navMain li,
#navMain a {
    border:none;
    font-weight:normal;
    margin:0;
    outline:none;
    padding:0;
    z-index:1000;   
}

/* Menu */

#mainNav-wrap {
    width:100%;
    height:47px;
    float:left; 
    background:#00aeef;
    border-top:#014964 1px solid;
    box-shadow: 0px 2px 2px #999999;
}

#navMain {  
    /*height:40px;*/
    width:960px;
    position:relative;
    z-index:500;
    margin:0 auto;
    }

#navMain li {
    display:block;
    float:left;
    height:40px;
    list-style:none;
    /*padding:40px 8px 0 4px;*/
    position:relative;
    text-transform:uppercase;
    }

#navMain li li {
    text-transform:capitalize;  
}

/* Links */
#navMain li a {
    border-radius:5px;
    -moz-border-radius:5px;
    -webkit-border-radius:5px;
    color:#fff;
    display:block;
    font-size:18px;
    line-height:18px;
    font-family:'Raleway', sans-serif;
    padding:15px 19px;
    text-decoration:none;
    text-shadow:0px 1px 1px rgba(0,0,0,.1);
    transition:color .2s ease-in-out;
    -webkit-transition:color .2s ease-in-out;
    -moz-transition:color .2s ease-in-out;
    -ms-transition:color .2s ease-in-out;
    -o-transition:color .2s ease-in-out;
    }
    #navMain li:first-child a {border-left:none;}
    #navMain li:last-child a{border-right:none;}
    #navMain li:hover > a {background:#565454;color:#fff200;}

/* Sub Menu */
#navMain ul {
    background: #565454;
    border-radius: 0 5px 5px 5px;
    -moz-border-radius: 0 5px 5px 5px;
    -webkit-border-radius: 0 5px 5px 5px;
    position:absolute;
    left: 0;
    top: 46px;
    opacity: 0;
    filter: alpha(opacity = 0);
    transition: opacity .25s ease .1s;
    -moz-transition: opacity .25s ease .1s;
    -ms-transition: opacity .25s ease .1s;
    -o-transition: opacity .25s ease .1s;
    -webkit-transition: opacity .25s ease .1s;
    min-width:200px;
    }

    #navMain ul.electronics {
        min-width:350px;    
    }

    #navMain li:hover > ul {opacity:1;filter: alpha(opacity = 100);}

#navMain ul li {
    height:0;
    overflow:hidden;
    padding:0;
    transition: height .25s ease .1s;
    -moz-transition: height .25s ease .1s;
    -ms-transition: height .25s ease .1s;
    -o-transition: height .25s ease .1s;
    -webkit-transition: height .25s ease .1s;
    }
    #navMain li:hover > ul li {height:38px;overflow:visible;padding:0;}

#navMain ul li a {
    border:none;
    color:#fff;display:block;
    font-size:18px;
    margin:4px 4px;
    padding:8px 14px 8px 14px;
    white-space:nowrap;
    width:200px; /* Stretches Submenu */
    }
    #navMain ul li:last-child {margin-bottom:6px;}
    #navMain ul li:last-child a {border:none;padding:4px 14px 1px 14px;}
    #navMain ul li a:hover {background:none;}
    #navMain ul li span {white-space:nowrap;}

    .navMain_buffer {height:8px;}

/* ////////// MAIN CONTENT /////////// */ 
```

这是HTML：

```
<div id="mainNav-wrap">
<ul id="navMain">
          <li><a href="#" title="Electronics">ELECTRONICS</a>
                               <ul class="electronics">
                                <li><a href="#" title="HDTVs 19&quot;-32&quot;">HDTVs 19&quot;-32&quot;</a></li>
                                <li><a href="#" title="HDTVs 37&quot; and Up">HDTVs 37&quot; and Up</a></li>
                                <li><a href="#" title="Gaming Systems">Gaming Systems</a></li>
                                <li><a href="#" title="HOME THEATER">Home Theater</a></li>
                                <li><a href="#" title="Stereos and Home Theater Systems">Stereos and Home Theater Systems</a></li>
                                <li><a href="#" title="Digital Cameras and Camcorders">Digital Cameras and Camcorders</a></li>
                                <li><a href="#" title="Digital Cameras and Camcorders">Small Electronics</a></li>
                          </ul>
                   </li>
           <li><a href="#" title="Computers">Computers</a>
                               <ul>
                                <li><a href="#" title="Laptops">Laptops</a></li>
                                <li><a href="#" title="Tablets">Tablets</a></li>
                                <li><a href="#" title="Desktops">Desktops</a></li>
                                <li><a href="#" title="Computer Desks">Computer Desks</a></li>
                          </ul>
                   </li>
           <li><a href="#" title="Appliances">APPLIANCES</a>
                               <ul>
                                <li><a href="#" title="Washer and Dryers">Washer and Dryers</a></li>
                                <li><a href="#" title="Refrigerators">Refrigerators</a></li>
                                <li><a href="#" title="Freezers">Freezers</a></li>
                                <li><a href="#" title="Ranges">Ranges</a></li>
                          </ul>
                   </li>
           <li><a href="#" title="Bedrooms">Bedrooms</a>
                               <ul>
                                <li><a href="#" title="Bedroom Sets">Bedroom Sets</a></li>
                                <li><a href="#" title="Kid's Bedrooms">Kid's Bedrooms</a></li>
                                <li><a href="#" title="Mattresses">Mattresses</a></li>
                          </ul>
                   </li>

                    <li><a href="#" title="Dinning Rooms">Dinning Rooms</a></li>

                   <li><a href="#" title="Living Rooms">Living Rooms</a>
                               <ul>
                                <li><a href="#" title="Recliners">Recliners</a></li>
                                <li><a href="#" title="Sectionals">Sectionals</a></li>
                                <li><a href="#" title="Living Room Sets">Living Room Sets</a></li>
                                <li><a href="#" title="Accessories">Accessories</a></li>
                                </ul>
                   </li>
      </ul>
      </div><!-- /END main-nav-wrap --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:37:41.130

我有答案！事实证明，该元素需要 -1000 的 z-index。这导致了我的问题。所以这是需要在我的css中添加的：

```
html {
position:relative;
z-index:-1000;
} 
```

# python - 如何在 Python 中将 3-D 分散数据放入单元格中？

> ID：13807320
> 
> 赞同：1
> 
> 时间：2012-12-10T18:55:48.933
> 
> 标签：python, cells, networkx

我有 3 个 3-D 空间中一些分散数据的列表，例如：

X、Y、Z

每一个代表坐标，范围在一定的区间内，包含N个数据。但我的问题是找到一种方法将数据放入不应该相互重叠的确定大小的单元格中。所以我必须根据数据从一个单元到另一个单元的出现顺序应用 Networkx 来创建一个复杂的网络。

希望您能帮助我找到可以使用的工具或其他东西。

# regex - 完整路径中最多包含两个“a”字符的文件

> ID：13807325
> 
> 赞同：1
> 
> 时间：2012-12-10T18:55:58.237
> 
> 标签：regex, awk

我试图弄清楚如何使用 AWK 查找在其完整路径中最多包含两个“a”字符的文件。

以下是我到目前为止提出的，但它没有做这项工作。

```
BEGIN{}

{
if( match( $1, ".*[a].*[a].*[^a]+" ) )
print $1
}

END{} 
```

它从通过以下命令单独创建的名为“data”的文件中读取文件名及其完整路径。

```
find / -name '*' 
```

我应该修改什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T19:02:01.383

以下内容被认为太短而无法单独回答，但这就是我要写的全部内容：

```
^[^a]*(a[^a]*(a[^a]*)?)?$ 
```

顺便说一句，你不需要`awk`. `grep -E`可以正常工作。

但是现在想起来，如果要使用awk的话，下面的就更简单了：

```
awk '!/a.*a.*a/' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T19:21:13.403

You have three errors.

1.  You need to include the start-of-line and end-of-line patterns `^` and `$` otherwise an arbitrary prefix or suffix may contain some `a`s.
2.  You need to make the occurrences of `a` optional, by using parenthesis and `?`.
3.  `.*` can contain `a` so you need to use `[^a]` to match the non-a characters.

The result would be a regular expression like:

```
^([^a]*a)?([^a]*a)?[^a]*$ 
```

* * *

**Edit:**

As Ed points out in the comments below [his answer](https://stackoverflow.com/a/13808425/310165), if you pass the `--re-interval` flag to Awk, you can use intervals.

The expression would then be:

```
^([^a]*a){0,2}[^a]*$ 
```

This allows us say we want to find between 0 and 2 `a`s.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T20:11:35.580

正确的解决方案是这样的：

```
awk '!/(.*a){3}/' file 
```

或者如果您的 awk 不支持 RE 间隔，则使用其中任何一种：

```
awk 'gsub(/a/,"&") < 3' file
awk 'split($0,x,/a/) < 3' file 
```

因此，无论哪种情况，如果您想测试少于 17 个“a”，您只需将 3 更改为 17（例如）：

```
awk '!/(.*a){17}/' file 
```

而不是写：

```
awk '^[^a]*(a[^a]*(a[^a]*(a[^a]*(a[^a]*(a[^a]*(a[^a]*(a[^a]*(a[^a]*(a[^a]*(a[^a]*(a[^a]*(a[^a]*(a[^a]*(a[^a]*(a[^a]*(a[^a]*)?)?)?)?)?)?)?)?)?)?)?)?)?)?)?)?$' 
```

或类似的。

# events - 使用事件处理程序自定义代码的 Tridion 2011 工作流次要版本增量

> ID：13807328
> 
> 赞同：5
> 
> 时间：2012-12-10T18:56:05.917
> 
> 标签：events, workflow, version, tridion, tridion-2011

我们也有 Tridion 2011 和页面处理工作流程。我们在页面预保存上有事件处理程序。当用户保存页面时，会调用事件处理程序来修改页面元数据并启动工作流。因此，每次编辑器保存单击时，页面的次要版本都会变为 0.3。所以基本上： 0.1 - 页面保存的 Tridion 版本 0.2 - 为保存页面元数据而执行的事件处理程序代码，并且由于 Save() 调用，再次调用此代码以导致下一个次要版本 0.3 - 执行相同的事件处理程序代码。

我想要实现的是在每个用户保存点击时将次要版本保持为 0.1。

我尝试了 Pre Save Post Save、Pre Check in 和 Post Check in 并更改了执行顺序，即事件系统订阅调用的最后一个参数，但没有任何帮助。所以请。帮助 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T19:17:40.193

你为什么在你的活动中调用 Save() ？如果您在保存页面之前进行更改，那么它应该一次性存储所有内容，而无需调用 Save。

```
public PageEvent()
{
    EventSystem.Subscribe<Page, SaveEventArgs>(ChangePageTitle, EventPhases.Initiated);
}
private void ChangePageTitle(Page page, SaveEventArgs args, EventPhases phases)
{
    page.Title = "Nuno was here " + page.Title;
} 
```

这将更改页面标题，并且如您所见，我没有调用 Save，因为编辑器已经这样做了。

# javascript - 这三种模块模式在 JavaScript 中的实现有什么区别？

> ID：13807332
> 
> 赞同：15
> 
> 时间：2012-12-10T18:56:19.693
> 
> 标签：javascript, module-pattern

我已经看到以下三个代码块作为 JavaScript 模块模式的示例。有什么区别，为什么我会选择一种模式而不是另一种模式？

**模式 1**

```
function Person(firstName, lastName) {
    var firstName = firstName;
    var lastName = lastName;

    this.fullName = function () {
        return firstName + ' ' + lastName;
    };

    this.changeFirstName = function (name) {
        firstName = name;
    };
};

var jordan = new Person('Jordan', 'Parmer'); 
```

**模式 2**

```
function person (firstName, lastName) { 
    return {
        fullName: function () {
            return firstName + ' ' + lastName;
        },

        changeFirstName: function (name) {
            firstName = name;
        }
    };
};

var jordan = person('Jordan', 'Parmer'); 
```

**模式 3**

```
var person_factory = (function () {
    var firstName = '';
    var lastName = '';

    var module = function() {
        return {
            set_firstName: function (name) {
                               firstName = name;
                           },
            set_lastName: function (name) {
                              lastName = name;
                          },
            fullName: function () {
                          return firstName + ' ' + lastName;
                      }

        };
    };

    return module;
})();

var jordan = person_factory(); 
```

据我所知，JavaScript 社区似乎*普遍支持模式 3 是最好的。*和前两个有什么区别？在我看来，这三种模式都可以用来封装变量和函数。

注意：[这篇文章](https://stackoverflow.com/questions/7647019/what-are-the-differences-between-these-three-types-of-module-pattern)实际上并没有回答这个问题，我不认为它是重复的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T19:19:59.163

I don't consider them *module patterns* but more object instantiation patterns. Personally I wouldn't recommend any of your examples. Mainly because I think reassigning function arguments for anything else but method overloading is not good. Lets circle back and look at the two ways you can create Objects in JavaScript:

**Protoypes and the `new` operator**

This is the most common way to create Objects in JavaScript. It closely relates to Pattern 1 but attaches the function to the object prototype instead of creating a new one every time:

```
function Person(firstName, lastName) {
    this.firstName = firstName;
    this.lastName = lastName;
};

Person.prototype.fullName = function () {
    return this.firstName + ' ' + this.lastName;
};

Person.prototype.changeFirstName = function (name) {
    this.firstName = name;
};

var jordan = new Person('Jordan', 'Parmer');

jordan.changeFirstName('John'); 
```

**Object.create and factory function**

ECMAScript 5 introduced [Object.create](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create) which allows a different way of instantiating Objects. Instead of using the `new` operator you use `Object.create(obj)` to set the Prototype.

```
var Person =  {
    fullName : function () {
        return this.firstName + ' ' + this.lastName;
    },

    changeFirstName : function (name) {
        this.firstName = name;
    }
}

var jordan = Object.create(Person);
jordan.firstName = 'Jordan';
jordan.lastName = 'Parmer';

jordan.changeFirstName('John'); 
```

As you can see, you will have to assign your properties manually. This is why it makes sense to create a factory function that does the initial property assignment for you:

```
function createPerson(firstName, lastName) {
    var instance = Object.create(Person);
    instance.firstName = firstName;
    instance.lastName = lastName;
    return instance;
}

var jordan = createPerson('Jordan', 'Parmer'); 
```

As always with things like this I have to refer to [Understanding JavaScript OOP](https://github.com/SampaJS/Entendendo-Javascript-Orientado-a-Objetos/blob/master/endentendo-javascript-poo.md) which is one of the best articles on JavaScript object oriented programming.

I also want to point out my own little library called [UberProto](http://daffl.github.com/uberproto/) that I created after researching inheritance mechanisms in JavaScript. It provides the `Object.create` semantics as a more convenient wrapper:

```
var Person = Proto.extend({
    init : function(firstName, lastName) {
        this.firstName = firstName;
        this.lastName = lastName;
    },

    fullName : function () {
        return this.firstName + ' ' + this.lastName;
    },

    changeFirstName : function (name) {
        this.firstName = name;
    }
});

var jordan = Person.create('Jordan', 'Parmer'); 
```

In the end it is not really about what "the community" seems to favour but more about understanding what the language provides to achieve a certain task (in your case creating new obejcts). From there you can decide a lot better which way you prefer.

**Module patterns**

It seems as if there is some confusion with module patterns and object creation. Even if it looks similar, it has different responsibilities. Since JavaScript *only has function scope* modules are used to *encapsulate functionality* (and not accidentally create global variables or name clashes etc.). The most common way is to wrap your functionality in a self-executing function:

```
(function(window, undefined) {
})(this); 
```

Since it is just a function you might as well return something (your API) in the end

```
var Person = (function(window, undefined) {
    var MyPerson = function(firstName, lastName) {
        this.firstName = firstName;
        this.lastName = lastName;
    };

    MyPerson.prototype.fullName = function () {
        return this.firstName + ' ' + this.lastName;
    };

    MyPerson.prototype.changeFirstName = function (name) {
        this.firstName = name;
    };

    return MyPerson;
})(this); 
```

That's pretty much modules in JS are. They introduce a wrapping function (which is equivalent to a new scope in JavaScript) and (optionally) return an object which is the modules API.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T23:58:27.827

首先，正如@Daff 已经提到的，这些并不是所有的模块模式。让我们看看它们的区别：

## 模式 1 与模式 2

你可以省略无用的行

```
var firstName = firstName;
var lastName = lastName; 
```

从模式 1 开始。函数参数已经是局部范围的变量，正如您在模式 2 代码中看到的那样。

显然，功能非常相似。两者都在这两个局部变量上创建了一个闭包，只有（暴露`fullName`的）和`changeFirstName`函数可以访问。不同之处在于实例化时发生的情况。

*   在模式 2 中，您只需返回一个对象（字面量），它继承自`Object.prototype`.
*   在模式 1 中，您将[`new`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)与称为“构造函数”（并且也正确大写）的函数一起使用。这将创建一个继承自 的对象，`Person.prototype`您可以在其中放置所有实例将共享的其他方法或默认属性。

[构造函数模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#constructorpatternjavascript)还有其他变体。他们可能喜欢对象的 [public] 属性，并将所有方法放在原型上——你可以混合使用。有关模拟基于类的继承的工作原理，请参阅[此答案](https://stackoverflow.com/a/13418980/1048572)。

什么时候用什么？原型模式通常是首选，特别是如果您可能想要扩展所有`Person`实例的功能 - 甚至可能不是来自同一个模块。当然也有模式 1 的用例，尤其是对于不需要继承的单例。

## 模式 3

…现在实际上是[模块模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript)，使用闭包创建静态私有变量。您从闭包中导出的内容实际上是无关紧要的，它可以是任何结构/构造函数/对象文字 - 仍然是“模块模式”。

当然，你的模式 2 中的闭包可以被认为是使用“模块模式”，但它的目的是创建一个实例，所以我不会使用这个术语。更好的例子是 Revealing Prototype Pattern 或任何扩展现有对象的东西，使用模块模式的闭包 - 专注于代码模块化。

在您的情况下，模块导出一个构造函数，该函数返回一个对象以访问静态变量。玩它，你可以做到

```
var jordan = person_factory();
jordan.set_firstname("Jordan");
var pete = person_factory();
pete.set_firstname("Pete");
var guyFawkes = person_factory();
guyFawkes.set_lastname("Fawkes");

console.log(jordan.fullname()); // "Pete Fawkes" 
```

不确定这是否是预期的。如果是这样，获取访问器函数的额外构造函数对我来说似乎有点没用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T19:31:55.903

“哪个最好？” 这里不是一个真正有效的问题。
他们都做不同的事情，有不同的权衡，并提供不同的好处。
使用一个或另一个或全部三个（或不使用）归结为您选择如何设计程序。

模式 #1 是 JS 对“类”的传统看法。

它允许，在类 C 语言中`prototyping`真的*不*应该与它混淆。 原型设计更像是其他语言中的属性/方法。原型方法也无法***访问实例变量***（即：未附加到的变量）。`inheritance`
`public static`*`this`*

 *```
var MyClass = function (args) { this.thing = args; };
MyClass.prototype.static_public_property = "that";
MyClass.prototype.static_public_method   = function () { console.log(this.thing); };

var myInstance = new MyClass("bob");
myInstance.static_public_method(); 
```

模式 #2 创建单个对象的单个实例，没有隐式继承。

```
var MyConstructor = function (args) {
    var private_property = 123,
        private_method = function () { return private_property; },

        public_interface = {
            public_method : function () { return private_method(); },
            public_property : 456
        };

    return public_interface;
};

var myInstance = MyConstructor(789); 
```

没有继承，每个实例都会获得每个函数/变量的***新***副本。
如果您正在处理每页不会有数十万个实例的对象，那么这是非常可行的。

模式 #3 与模式 #2 类似，不同之处在于您正在构建一个构造函数并且可以包含等效的`private static`方法（您***必须***在 100% 的时间里传入参数，并且***如果***该函数旨在返回一个值，而不是直接修改对象或数组，因为这些道具/方法无法访问实例级数据/功能，尽管实例构造函数可以访问所有“静态”功能）。
这里的实际好处是内存占用更少，因为每个实例都有对这些函数的*引用*，而不是它们自己的*副本*。

```
var PrivateStaticConstructor = function (private_static_args) {
    var private_static_props = private_static_args,
        private_static_method = function (args) { return doStuff(args); },

        constructor_function = function (private_args) {
            var private_props = private_args,
                private_method = function (args) { return private_static_method(args); },
                public_prop = 123,
                public_method = function (args) { return private_method(args); },

                public_interface = {
                    public_prop   : public_prop,
                    public_method : public_method
                };

            return public_interface;
        };

    return constructor_function;
};

var InstanceConstructor = PrivateStaticConstructor(123),
    myInstance = InstanceConstructor(456); 
```

这些都在做非常不同的事情。*

# java - 如何使用java在谷歌应用程序中编写csv文件

> ID：13807336
> 
> 赞同：1
> 
> 时间：2012-12-10T18:56:31.730
> 
> 标签：java, google-app-engine, csv

我目前正在谷歌 appengine 上用 Java 完成一个项目。我有超过 2000 条记录

Appengine 不允许存储文件，因此无法使用任何磁盘上的表示对象。其中一些包括 File 类。

我想写入数据并将其导出到几个csv文件，用户下载它。

我如何在不使用任何 File 类的情况下做到这一点？我在文件处理方面不是很有经验，所以我希望你们能给我建议。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:05:27.557

只需使用 StringBuffer 在内存中生成 csv，然后用于`StringBuffer.toString().getBytes()`获取字节数组，然后可以将其发送到您的输出流。

例如，如果在 GAE 中使用 servlet：

```
protected void doGet(HttpServletRequest req, HttpServletResponse resp) {
  StringBuffer buffer = new StringBuffer();
  buffer.append("header1, header2, header3\n");
  buffer.append("row1column1, row1column2, row1column3\n");
  buffer.append("row2column1, row2column2, row2column3\n");
  // Add more CSV data to the buffer

  byte[] bytes = buffer.toString().getBytes();

  // This will suggest a filename for the browser to use
  resp.addHeader("Content-Disposition", "attachment; filename=\"myFile.csv\"");

  resp.getOutputStream().write(bytes, 0, bytes.length);
} 
```

有关[GAE Servlet的更多信息](https://developers.google.com/appengine/docs/java/runtime)

有关[内容处置的更多信息](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:05:15.520

您可以使用字节数组、字符串和流将数据存储在内存中。例如，

```
ByteArrayOutputStream csv = new ByteArrayOutputStream();
PrintStream printer = new PrintStream(csv);
printer.println("a;b;c");
printer.println("1;2;3");
printer.close();
csv.close(); 
```

然后在您的 Servlet 中，您可以将 csv.toByteArray() 作为流提供。这里给出了一些例子：[实现一个简单的文件下载 servlet](https://stackoverflow.com/questions/1442893/file-download-servlet)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T00:13:14.750

您可以在 Google App Engine中使用[OpenCSV库。](http://opencsv.sourceforge.net)

# javascript - Upload a binary file to S3 using AWS SDK for Node.js

> ID：13807339
> 
> 赞同：64
> 
> 时间：2012-12-10T18:57:00.340
> 
> 标签：javascript, node.js, amazon-s3, amazon-web-services

**Update:** For future reference, Amazon have now updated the documentation from what was there at time of asking. As per @Loren Segal's comment below:-

> We've corrected the docs in the latest preview release to document this parameter properly. Sorry about the mixup!

* * *

I'm trying out the developer preview of [the AWS SDK for Node.Js](http://aws.amazon.com/about-aws/whats-new/2012/12/04/introducing-the-aws-sdk-for-node-js/) and want to upload a zipped tarball to S3 using `putObject`.

According to [the documentation](http://docs.amazonwebservices.com/AWSJavaScriptSDK/latest/AWS/S3/Client.html#putObject-property), the `Body` parameter should be...

> Body - (Base64 Encoded Data)

...therefore, I'm trying out the following code...

```
var AWS = require('aws-sdk'),
    fs = require('fs');

// For dev purposes only
AWS.config.update({ accessKeyId: 'key', secretAccessKey: 'secret' });

// Read in the file, convert it to base64, store to S3
fs.readFile('myarchive.tgz', function (err, data) {
  if (err) { throw err; }

  var base64data = new Buffer(data, 'binary').toString('base64');

  var s3 = new AWS.S3();
  s3.client.putObject({
    Bucket: 'mybucketname',
    Key: 'myarchive.tgz',
    Body: base64data
  }).done(function (resp) {
    console.log('Successfully uploaded package.');
  });

}); 
```

Whilst I can then see the file in S3, if I download it and attempt to decompress it I get an error that the file is corrupted. Therefore it seems that my method for 'base64 encoded data' is off.

Can someone please help me to upload a binary file using `putObject`?

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-12-10T22:17:26.050

You don't need to convert the buffer to a base64 string. Just set body to data and it will work.

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-11-15T20:51:26.530

Here is a way to send a file using streams, which might be necessary for large files and will generally reduce memory overhead:

```
var AWS = require('aws-sdk'),
    fs = require('fs');

// For dev purposes only
AWS.config.update({ accessKeyId: 'key', secretAccessKey: 'secret' });

// Read in the file, convert it to base64, store to S3
var fileStream = fs.createReadStream('myarchive.tgz');
fileStream.on('error', function (err) {
  if (err) { throw err; }
});  
fileStream.on('open', function () {
  var s3 = new AWS.S3();
  s3.putObject({
    Bucket: 'mybucketname',
    Key: 'myarchive.tgz',
    Body: fileStream
  }, function (err) {
    if (err) { throw err; }
  });
}); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-12-21T18:17:41.067

I was able to upload my binary file this way.

```
var fileStream = fs.createReadStream("F:/directory/fileName.ext");
var putParams = {
    Bucket: s3bucket,
    Key: s3key,
    Body: fileStream
};
s3.putObject(putParams, function(putErr, putData){
    if(putErr){
        console.error(putErr);
    } else {
        console.log(putData);
    }
}); 
```

# graphics - 像素与多边形重叠：高效（扫描线型）算法

> ID：13807343
> 
> 赞同：3
> 
> 时间：2012-12-10T18:57:24.650
> 
> 标签：graphics, geometry, polygon, computational-geometry, scanline

问题说明：我有一个矩形且均匀间隔的像素图像，其顶点坐标为 (i,j), (i+1,j), (i, j+1), (i+1, j+1) [i= 0,...,m-1; j=0,...,n-1] 和具有顶点坐标 (x_1,y_1), ..., (x_n, y_n) 的多边形 P。现在我想有效地计算每个像素与 P 重叠的百分比。P 可以是非凸的，甚至是自相交的。

本质上，这是扫描线光栅化算法的“软”概括，可以有效地检查像素中心是否位于多边形内部/外部。

我可以想到以下方法：

(1) 对图像进行上采样（例如，10*10 倍），计算多边形内有多少个子像素中心，然后除以 100。问题：时间效率、内存效率、准确性。

(2) 使用扫描线算法在稍大的 (0.5,0.5) 平移网格上计算完全位于内部/外部的像素，创建“边界”像素列表，沿边缘逆时针行走，然后计算沿途所有像素的交叉区域。问题：需要微妙的编码，容易引入错误。

我的问题：有没有人遇到过这个问题，你知道第三种更好的方法吗？如果没有，您是否在 (1) 或 (2) 方面获得了更好的体验？我认为这个问题可能出现在抗锯齿的背景下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T11:45:38.987

进行精确的几何分析可能不会太困难。

首先处理那些被多边形部分覆盖的像素：您可以使用[光线追踪技术](http://www.cse.yorku.ca/~amana/research/grid.pdf)快速找到与多边形边缘相交的所有像素。然后，您可以使用[Cohen-Sutherland](http://en.wikipedia.org/wiki/Cohen%E2%80%93Sutherland_algorithm)算法有效地找到边缘和像素之间的交点，因此您可以计算该像素的覆盖区域。

请注意，您可以避免 Cohen-Sutherland 中涉及的两个裁剪操作之一，因为相邻像素将共享一个线段交点。例如 - 如果您有两个相邻的像素，`A`并且在点、和`B`处与线段相交，那么和将是相同的。剪辑时将片段传递到例程中应避免重复工作。`p->q``a1``a2``b1``b2``a2``b1``a2->q``B`

您必须特别处理包含多边形顶点的像素，但这也不应该太棘手：Cohen-Sutherland 也会在这里提供帮助。

自相交的多边形也会抛出一些特殊情况来处理 - 与两个或多个边缘相交的像素。我可以很容易地想象，在所有情况下准确处理这些可能会变得很棘手，所以我很想在这里做上采样方法。

一旦确定了这些边缘像素，您就可以执行标准扫描线来填充多边形的内部像素。

编辑：实际上，现在我想多了，你可以完全跳过 Cohen-Sutherland 步骤。链接论文中的算法可以很容易地扩展为返回片段和像素网格之间的交点。该段将在 处留下一个给定的像素`min( tMaxX, tMaxY )`。跟踪最后一个出口点以重新用作下一个像素的入口点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:22:21.880

我会做

1a）当像素部分重叠时上采样：

但不是整个图像，只有要检查的当前像素，或者当前扫描线中的所有像素（如果有帮助的话）。

比没有内存参数。

速度？高达 16x16 我认为速度不是问题。

# java - 是什么导致了 ArrayList 的 NoSuchElementException

> ID：13807344
> 
> 赞同：1
> 
> 时间：2012-12-10T18:57:25.790
> 
> 标签：java, nullpointerexception

我知道这里有很多关于 Java 中 NoSuchElementException 的线程，但我仍然无法弄清楚这里发生了什么

我正在尝试为传递依赖项 Kata 18 提出一个解决方案，该解决方案发布在[http://codekata.pragprog.com/2007/01/kata_eighteen_t.html](http://codekata.pragprog.com/2007/01/kata_eighteen_t.html)

dependencies_for 方法应该接受一个 char 项目并计算该项目的所有依赖项。当我尝试将元素添加到 finalDependencies ArrayList 时发生异常

这是我的 NullPointerException 发生的地方。我已经跟踪了所有这些数据结构，它们都没有 Null 值。我不明白是什么导致了我的异常。请看我的代码：

```
public class Test_Dependencies 
{
    public static void main(String[] args) {
             Dependencies Dep = new Dependencies();
             Dep.add_direct('A', "B C");
             Dep.add_direct('B', "C D");
             Dep.dependencies_for('A');

    }
}

public class Dependencies {
      HashMap dependenciesList;

public Dependencies()
{
    HashMap<Character, ArrayList> dependenciesList = new HashMap<Character, ArrayList>();
}

public void add_direct(char mainItem, String dependentItems)
{
  // code that works here   
}

public String dependencies_for(char item)
{

    ArrayList finalDependencies = new ArrayList<Character>();
    Character key = new Character(item);

    //get initial dependencies for the item and add them
    ArrayList processingDependencies = dependenciesList.get(key);
    Iterator itr = processingDependencies.iterator();

    while(itr.hasNext())
    {
        if(finalDependencies.contains(itr.next()) == false && itr.next() != key)
        {

            // NoSuchElement exception here
            finalDependencies.add(itr.next());

            // look again at each item in dependenciesList.  If it is in the list then add it to processingDependencies
            if(dependenciesList.containsKey(itr.next()) && !processingDependencies.contains(itr.next()))
            {
                processingDependencies.add(itr.next());

            }
        }

    }

    // turn finalDependencies into a string
    itr = finalDependencies.iterator();
    String allDependencies = "";
    while(itr.hasNext())
    {
        allDependencies = allDependencies + " " + itr.next();
    }

    return allDependencies;

}
} 
```

我有点困惑，因为 processingDependencies 和 finalDependencies ArrayLists 不为空。并且 processingDependencies arraylist 包含一个项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:07:15.247

你不能这样做：

```
while(itr.hasNext())
{
    if(finalDependencies.contains(itr.next()) == false && itr.next() != key)
    {
        // NoSuchElement exception here
        finalDependencies.add(itr.next());

        // stuff removed
    }
} 
```

您*必须*在每次调用 itr.next() 之前验证 iter.hasNext() 是否为真。当您到达 itr 中的最后一项，然后调用 itr.next()*三次*时会发生什么？

答案：[NoSuchElementException](http://docs.oracle.com/javase/7/docs/api/java/util/NoSuchElementException.html)。查看[迭代器](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html#next%28%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:04:57.913

你打了两次电话。第一个调用由匹配的 hasNext 调用“保护”。第二个不是。将 next 的结果保存到一个临时变量中并使用它，而不是直接使用该值，因为对 next 的每次调用都会尝试首先推进迭代器。在好的情况下，你会得到一个例外。在糟糕的情况下，事情似乎有效，但您的程序正在处理错误的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T19:08:11.050

问题在这里：

```
HashMap dependenciesList;
public Dependencies()
{
        HashMap<Character, ArrayList> dependenciesList = new HashMap<Character, ArrayList>();
} 
```

您声明了一个名为 dependenciesList 的 hashmap。然后您尝试实例化该列表，但您实际上所做的是创建一个名为相同事物的局部变量。它们是两个独立的变量。然后你尝试使用这里没有实例化的那个：

```
 ArrayList processingDependencies = dependenciesList.get(key); 
```

您需要做的是实例化第一个 dependenciesList 而不是创建一个新的

（我不是 java 的专业人士，但类似于`dependenciesList = new HashMap....()`而不是`HashMap<..> dependenciesList = new HashMap...()`）

# sql - 我的存储过程中有错误

> ID：13807348
> 
> 赞同：1
> 
> 时间：2012-12-10T18:57:44.457
> 
> 标签：sql, sql-server, tsql, dynamic-sql

我的存储过程有问题

```
ALTER PROCEDURE [dbo].[TIGER_CREATE_RUNTIME_TABLE](@NOMBRE_TABLA varchar(100))
AS
    DECLARE @SQLQUERY1 AS NVARCHAR(600)
BEGIN
    SET @SQLQUERY1 = 'CREATE TABLE '+@NOMBRE_TABLA + '(
    SEGMENTO varchar(200) NULL,
    TCNFOL varchar(200) NOT NULL,
    TCCOPL_A varchar(200) NULL,
    ID_LIN_NEG varchar(200) NULL,
    TIP_LIN varchar(200) NULL,
    MON_ID_MONEDA varchar(200) NULL,
    LINEAS_FACT varchar(200) NULL,
    CF_VOZ varchar(200) NULL,
    CF_DATOS varchar(200) NULL,
    ADIC_MINS varchar(200) NULL,
    ADIC_LDN varchar(200) NULL,
    ADIC_LDI varchar(200) NULL,
    ADIC_SMS varchar(200) NULL,
    PAQ_SMS varchar(200) NULL,
    ADIC_DATOS varchar(200) NULL,
    OTROS varchar(200) NULL,
    SUB_TOT varchar(200) NULL,
    PERIODO_ANALISIS varchar(200) NULL,
    PERIODO_ALTA varchar(200) NULL,
    CATEGORIA varchar(200) NULL,
    RUC varchar(200) NULL)'

    EXEC sp_ExecuteSql @SQLQUERY1
END 
```

如您所见，我使用的是动态 SQL，但执行时出现错误。

> *男士。102，第 15 级，状态 1，第 20 行
> 'varch' 附近的语法不正确。*

动态SQL有什么问题吗？谢谢一会儿。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T19:04:53.350

我会将您更改`@sqlquery1`为`varchar(max)`，我认为您在添加表名时达到了字符限制：

```
 DECLARE @SQLQUERY1 AS NVARCHAR(max) 
```

您将查询字符串的限制设置为 600，但是当您添加最多为`varchar(100)`您的表名时，您很可能会超过限制。

如果您只运行以下没有表名的 len 是 726 个字符：

```
DECLARE @SQLQUERY1 AS NVARCHAR(max)

SET @SQLQUERY1 = 'CREATE TABLE (
    SEGMENTO varchar(200) NULL,
    TCNFOL varchar(200) NOT NULL,
    TCCOPL_A varchar(200) NULL,
    ID_LIN_NEG varchar(200) NULL,
    TIP_LIN varchar(200) NULL,
    MON_ID_MONEDA varchar(200) NULL,
    LINEAS_FACT varchar(200) NULL,
    CF_VOZ varchar(200) NULL,
    CF_DATOS varchar(200) NULL,
    ADIC_MINS varchar(200) NULL,
    ADIC_LDN varchar(200) NULL,
    ADIC_LDI varchar(200) NULL,
    ADIC_SMS varchar(200) NULL,
    PAQ_SMS varchar(200) NULL,
    ADIC_DATOS varchar(200) NULL,
    OTROS varchar(200) NULL,
    SUB_TOT varchar(200) NULL,
    PERIODO_ANALISIS varchar(200) NULL,
    PERIODO_ALTA varchar(200) NULL,
    CATEGORIA varchar(200) NULL,
    RUC varchar(200) NULL)'

select LEN(@sqlquery1) 
```

如果您将查询字符串保留在`600`您的 create table 语句的长度处，则该语句将被截断并生成错误。

# python - python的pp模块上的PicklingError

> ID：13807349
> 
> 赞同：2
> 
> 时间：2012-12-10T18:57:46.570
> 
> 标签：python, module, pickle, parallel-python

我正在使用python的pp模块。我需要做的是并行运行“scipy.optimize”的“fmin”函数。我正在像这样导入 fmin：

```
from scipy.optimize import fmin 
```

接下来，我定义了一个执行 fmin 函数的函数，如下所示：

```
def fitting():
v = fmin(e, v0, args=(x,y),maxiter=10000, maxfun=10000)
return v 
```

为了使其并行运行，我正在使用：

```
job5 = job_server.submit(fitting, (e, v0, x, y,), (fitting,), ("scipy.optimize",))
v = job5() 
```

然后我在 job5 的模块中得到一个 PicklingError。我猜那是“scipy.optimize”。我也尝试过`import scipy.optimize as sth`，但 job_server.submit 不接受“sth”作为模块。有什么解决办法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-15T14:12:26.497

你不能`pp`很容易地做到这一点。但是，如果您使用`dill`并且其分支`pp`位于`pathos`(ie `pathos.pp`) 中，那么它在大多数情况下都有效。

查看优化包中的几个示例`mystic`，它使用 scipy 优化器的扩展提供并行和分布式优化。

例如，这适用于`pathos.multiprocessing`和`pathos.pp`： [https ://github.com/uqfoundation/mystic/blob/master/examples/buckshot_example06.py](https://github.com/uqfoundation/mystic/blob/master/examples/buckshot_example06.py)

上面的代码`fmin_powell`并行启动了几个实例，这可以为您提供具有最陡下降速度的伪全局优化。

在此处获取代码：[https ://github.com/uqfoundation](https://github.com/uqfoundation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T18:05:49.643

将`from scipy.optimize import fmin`import 行`fitting`直接放入函数中，不要再传入`submit`.

# c# - 整个 ToolTip 的背景色

> ID：13807354
> 
> 赞同：8
> 
> 时间：2012-12-10T18:58:12.827
> 
> 标签：c#, wpf, xaml, background, tooltip

有谁知道一个简单的 XAML 解决方案来改变整个背景`ToolTip`？

我做了以下事情：

```
<Image Height="16" Source="Images/Icons/Add2.png" Stretch="Fill" Width="16" Opacity="0.99" Grid.Column="0">
    <Image.ToolTip>
        <Grid Background="#000000">
             <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
             </Grid.RowDefinitions>
             <TextBlock Text="Header1" FontSize="15" Grid.Row="0"/>
             <TextBlock Text="Subitem" FontSize="12" Grid.Row="1"/>
         </Grid>
    </Image.ToolTip>
</Image> 
```

但结果看起来像这样：

![工具提示背景颜色](../Images/9e83c4ab560aedf8345536b72e51c81a.png)

有什么建议么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-10T19:07:36.733

问题是您真正要做的只是设置工具提示的内容，而不是工具提示本身。

因此，您需要设置工具提示的样式以实现此目的。如本文所示，有一些方法可以使用资源：

[WPF-将工具提示背景更改为透明](https://stackoverflow.com/questions/2314856/wpf-changing-tooltip-background-to-transparent)

或者您可以更改代码以使用显式工具提示包装该网格并设置其背景属性：

```
<Image.ToolTip>
    <ToolTip Background="Black">
        <Grid>
            ...
        </Grid>
    </ToolTip>
</Image.ToolTip> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-14T13:21:01.867

要设置工具提示背景，您可以覆盖父控件的工具提示样式。下面是您添加样式的代码。

```
<Image Height="16" Source="Images/Icons/Add2.png" Stretch="Fill" Width="16" Opacity="0.99" Grid.Column="0">
    <Image.Resources>
        <Style TargetType="ToolTip" BasedOn="{StaticResource {x:Type ToolTip}}">
            <Setter Property="Background" Value="#000000" />
        </Style>
    </Image.Resources>
    <Image.ToolTip>
        <Grid>
             <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
             </Grid.RowDefinitions>
             <TextBlock Text="Header1" FontSize="15" Grid.Row="0"/>
             <TextBlock Text="Subitem" FontSize="12" Grid.Row="1"/>
         </Grid>
    </Image.ToolTip>
</Image> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-20T05:18:52.083

**在 WPF 中更改或设置 DataGrid 中工具提示的背景/前景色**

1.  将 DataGrid 创建为“Grid1”并添加包含 ToolTip 和项目的 DataGridTextColumn。
2.  要更改工具提示的背景颜色，请在 DataGrid 资源中添加 Setter 属性

```
 <DataGrid x:Name="Grid1">
                 <DataGrid.Resources>
                   <Style TargetType="ToolTip">
                   <Setter Property="Background" Value="Black"></Setter>
                   <Setter Property="Foreground" Value="White"></Setter>
                   </Style>
                 </DataGrid.Resources>
             <DataGridTextColumn Header="ActionName" Binding={Binding ActionName}>
               <DataGridTextColumn.CellStyle>
                 <Setter Property="Control.ToolTip">
                   <Setter.Value>
                   <UniformGrid Columns="1">
                   <TextBlock Text="Action List" FontWeight="Bold"/>
                   <TextBlock Text="Cut"/>
                   <TextBlock Text="Copy"/>
                   <TextBlock Text="Delete"/>
                   </UniformGrid>
                  </Setter.Value>                                                
                 </Setter>             
               </DataGridTextColumn.CellStyle>
            </DataGridTextColumn>
         </DataGrid> 
```

# ruby-on-rails - JWPlayer 没有出现在 Rails 3.1 中

> ID：13807356
> 
> 赞同：0
> 
> 时间：2012-12-10T18:58:20.197
> 
> 标签：ruby-on-rails, jwplayer

我想使用 JWPlayer 来展示存储在我的网络服务器上的视频/音频。我已经下载了 JWPlayer 安装 zip 文件（包括 2 个 .js 文件和 1 个 .swf）

我已将 .js 文件放在 assets/javascript/jwplayer/*.js 下

在我的 application.html.erb 我有

```
<%= javascript_include_tag "application", "/assets/jwplayer" %> 
```

不幸的是，加载时我在 jwplayer.html5.js （第 1 行）上得到*jwplayer is not defined*错误。

是因为 .swf 文件吗？我把它放在 assets/ 目录下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T17:56:44.333

我刚刚更新了 jwplayer-rails gem。我仍在等待我的拉取请求通过。现在请按照[本](https://github.com/dutgriff/jwplayer-rails/blob/master/README.md)自述文件中的信息启动并运行它。[在此处](https://stackoverflow.com/questions/13825970)阅读有关我的答案的更多信息。

# sql - 复合键中的外键

> ID：13807368
> 
> 赞同：0
> 
> 时间：2012-12-10T18:58:50.517
> 
> 标签：sql, relational-algebra

假设我有一个表 Document，它看起来像这样：

```
 _______________________
|        Document       |
|-----------------------|
| DocumentId int PK     |
| (add't fields)        |
|_______________________| 
```

现在假设我有第二张桌子：

```
 _______________________
|    DocumentVersion    |
|-----------------------|
| DocumentId int PK, FK |
| VersionId int PK      |
| (add't fields)        |
|_______________________| 
```

最后，假设我希望创建第三个引用 DocumentVersion 的表，可能是对访问过每个版本的用户的审计（假设存在 User 表）：

```
 _______________________
|   VersionAccessLog    |
|-----------------------|
| DocumentId int PK, FK |
| VersionId int PK, FK  |
| UserId int PK, FK     |
| AccessTime DateTime PK|
|_______________________| 
```

也许不是最好的例子，但希望足以说明我的问题。

着眼于**VersionAccessLog**，我们有：

*   PK(DocumentId, VersionId, UserId, AccessTime)
*   FK(DocumentId, VersionId) 参考 DocumentVersion
*   FK(userId) 参考用户

现在我的问题是，我是否也应该在 VersionAccessLog 中创建一个**FK(DocumentId)**？乍一看，密钥似乎是多余的——引用完整性由 FK 强制执行到 DocumentVersion。但是，从关系代数的角度来看，**这个键是否存在？** 从实际的角度来看（如果需要，假设 SQL Server 2012），**包含或排除密钥是否有任何性能影响？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:20:27.840

包含附加键会对性能产生影响，因为数据库将在每次插入（子）或删除（父）时检查 FK。从实际的角度来看，我通常不包括额外的键，因为验证中确实没有任何价值，而且性能成本很低。

我会确保如果架构被更改并且 DocumentVersion 和 VersionAccessLog 之间的 FK 被删除，则在 VersionAccessLog 和 Document 之间添加 FK。唯一一次我可以看到添加它是如果使用了一些模式感知 DAO 库来反转 FK 的 Has-a 关系，并且值得包含它。

# php - 为 Codeigniter My_ciunit 控制器测试设置不同的输入

> ID：13807374
> 
> 赞同：1
> 
> 时间：2012-12-10T18:59:08.887
> 
> 标签：php, codeigniter, testing, phpunit

我知道如何设置和执行控制器以对其进行测试。

请参阅框架链接[https://bitbucket.org/kenjis/my-ciunit](https://bitbucket.org/kenjis/my-ciunit)

但是我如何定义给定的测试数据输入？当然我可以自己设置 $_GET 和 $_POST 但是输入库会重新解析这个吗？

我在谷歌找不到答案。我也想知道为什么 Codeigniter 测试的谷歌结果如此糟糕。

```
<?php

/**
  * @group Controller
  */

class SomeControllerTest extends CIUnit_TestCase
{
public function setUp()
{
    // Set the tested controller
    $this->CI = set_controller('welcome');
}

public function testWelcomeController()
{

    // Call the controllers method
    $this->CI->index();

    // Fetch the buffered output
    $out = output();
            $viewData = viewvars();

    // Check if the content is OK
    $this->assertSame(0, preg_match('/(error|notice)/i', $out));
}

    public function testInput(){

        //reset $_GET and $_POST?

        $this->CI->login();

        //assert valid login etc ...
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T01:19:15.130

是的，您需要在测试设置中或任何最有意义的地方手动设置 $_GET 和 $_POST 值，例如：

```
public function setUp()
{
    // Set the tested controller
    $this->CI = set_controller('welcome');
    // Set up the input values
    $_GET['parameter_1'] = 'Some String';
    $_GET['parameter_2'] = 123;
} 
```

# sql-server - 关于 SQL Server 中的空/空白数据库字段

> ID：13807379
> 
> 赞同：1
> 
> 时间：2012-12-10T18:59:29.180
> 
> 标签：sql-server, database

我很困惑，关于 Empty、Null 和非 Null 数据库字段值。我有一个选项卡，其中有几个字段包含空/空白数据，其中一些包含 NULL 数据，并包含实际数据。我很困惑Epmyt/Blank和Null数据之间的区别。

请帮我。

谢谢拉维克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:02:20.813

空或空白通常是指空字符串值，长度=0 个字符。Null 意味着没有价值，甚至不是空的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:46:56.897

NULL 是一个数据库指示符，它指定数据库中的值缺失或不确定。空字符串是长度为零的 varchar 字符串。

当您选择值时，它们可能相同也可能不同。例如，SQL Server Management Studio 将 NULL 值导出为“NULL”而不是空白字符串。

NULL 遵循一些非常基本的比较规则，许多人认为这些规则违反直觉。任何比较操作——除了`is null`——返回假。特别是，以下两个返回 false：

```
where NULL = NULL
where NULL <> NULL 
```

这也适用于具有 NULL 值的列因此，当`val`包含 NULL 值时，它们都返回 false：

```
where val = val
where val <> val 
```

空白/空字符串只是长度为 0 的可变长度字符串的值，通常表示为 ''。以下确实返回 true：

```
where '' = ''
where val = val                  -- given that val is '' 
```

一个复杂的问题是某些数据库将 NULL 值视为零长度字符串。甲骨文浮现在脑海中。但是，这不是符合 ANSI 的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:56:53.307

NULL 与空值的不同之处在于 NULL，您不确定该值是否为空。这对您的数据库有真正可衡量的影响。这里有些例子：

*   `LEN()`一个空的 varchar 字段的值为 0。一个`LEN()`NULL 字段的值仍然是 NULL……你不知道这个字段有多大。

*   与它们自身 ( ) 相比的两个空字段`'' = ''`为真。您不知道两个 NULL 字段是否相等，因此 ( `NULL = NULL`) 会导致 NULL。

*   `COALESCE('', ... )`空字段的结果为空字段。NULL 字段的`COALESCE(NULL, ... )`下降到下一个值。

这样的例子还有很多。NULL 并不*意味着*空。NULL 表示“我不知道”。

# javascript - 根据窗口高度添加 CSS

> ID：13807380
> 
> 赞同：0
> 
> 时间：2012-12-10T18:59:34.013
> 
> 标签：javascript, css

只要查看器使用大屏幕（超过 750 像素高），我就有一个看起来很棒的弹出窗口。我想添加一个 CSS 选择器来为在笔记本电脑上查看的人推送重要内容（并隐藏标题和可消耗的介绍信息）。我认为最简单的方法是将body标签提高-180 px。

我认为这对于我第一次接触 jQuery 来说是件好事，但我似乎无法让它发挥作用。我试过了：

```
if($(window).height() <= 650)
   $(body).css("margin-top","-180px"); 
```

并且

```
$(document).ready(function() {
    if ($(window).height() < 670) {
        $("body").css('margin-top', '-180px');
    }
    else {
        $("body").css('margin-top', '0px');
    }
});​ 
```

但似乎都不起作用。如何根据当前窗口高度更改主体样式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:03:29.727

只需使用媒体查询来提供不同的版本或样式：

```
@media only screen 
and (max-height: 650px) {
    /* Styles */
} 
```

# forms - Symfony2 FOSUserBundle 覆盖表单：forms_error(form) 在提交之前出现？

> ID：13807392
> 
> 赞同：0
> 
> 时间：2012-12-10T19:00:31.453
> 
> 标签：forms, symfony, overriding, twig

从模板单击此按钮时：

```
<form action="{{ path('fos_user_registration_register') }}" method="post">        
   <button class="btn btn-small btn-success" type="submit">S'inscrire</button>                     
</form> 
```

然后我访问我的`UserBundle/Resources/view/Registration/register/html.twig`（然后覆盖 FOSUSerBundle 默认表单）：

```
{% extends "FOSUserBundle::layout.html.twig" %}

{% block fos_user_content %}

<form action="{{ path('fos_user_registration_register') }}" {{ form_enctype(form) }} method="POST" class="fos_user_registration_register">
{{ form_rest(form) }}
<div>
    <input type="submit" value="{{ 'registration.submit'|trans({}, 'FOSUserBundle') }}" />
</div>
 </form>
     {% endblock fos_user_content %} 
```

由于某些原因，尽管我没有提交表单，但出现了所有验证消息（例如请输入用户名）！？

对此有何解释？

如何自定义 FOSUser 模板并重定向 error_message，而不使其出现或更改消息或显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:06:47.630

最后我覆盖了registration_content视图：

```
 <form action="/projet_etienne_auth/web/app_dev.php/register/"  method="POST"     class="fos_user_registration_register">
  {{ form_errors(form) }}
  {{ form_widget(form._token) }}
 <div>
<label for="fos_user_registration_form_username" class="required">Nom d&#039;utilisateur :</label>
<input type="text" id="fos_user_registration_form_username" name="fos_user_registration_form[username]" required="required" maxlength="255" pattern=".{2,}" /></div>
<div>
    <label for="fos_user_registration_form_email" class="required">Adresse e-mail :</label>
    <input type="email" id="fos_user_registration_form_email" name="fos_user_registration_form[email]" required="required" /></div>

<div>
    <label for="fos_user_registration_form_plainPassword_first" class="required">Mot de passe :</label>

    <input type="password" id="fos_user_registration_form_plainPassword_first" name="fos_user_registration_form[plainPassword][first]" required="required" />
</div>
<div><label for="fos_user_registration_form_plainPassword_second" class="required">Vérification :</label>
    <input type="password" id="fos_user_registration_form_plainPassword_second" name="fos_user_registration_form[plainPassword][second]" required="required" />
</div><div>
     <input type="submit" value="Enregistrer" /> 
```

# javascript - 不确定为什么在将字符串传递给函数时出现语法错误

> ID：13807396
> 
> 赞同：1
> 
> 时间：2012-12-10T19:00:51.570
> 
> 标签：javascript, firebug

当我将字符串传递`2cdfdfa2-3639-4aed-bf37-9fb7ba1c936c`给 javascript 函数时，在 Firebug 中出现语法错误。

在将代码插入 div 标记之前，我将代码放在变量中。当我按下 DeleteBookmarkFunction 时，我在控制台中将其打印出来。Firebug 说函数调用有语法错误：

```
<div onclick='DeleteBookmarkFunction('3fad79fb-ce54-4ceb-9b35-cfb50d5540de')'>
  <a class='remove'>Slett</a>
</div> 
```

我的一些代码：

```
var id=data[j].UniqueID;
src += "<div  id='" + data[j].UniqueID + "'></div>" ;

src += "<div onclick=\'DeleteBookmarkFunction  ( \'"
src += id;
src += "\' )\'>";
src += '<a class=\'remove\'>Slett</a></div>'; 
```

是什么导致 Firebug 报告错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:02:44.477

对属性使用双引号

```
<div onclick="DeleteBookmarkFunction  ( '3fad79fb-ce54-4ceb-9b35-cfb50d5540de' )"><a class="remove">Slett</a></div> 
```

# android - 扩大视图的点击区域

> ID：13807400
> 
> 赞同：1
> 
> 时间：2012-12-10T19:01:20.350
> 
> 标签：android

我在视图上有一个小按钮，我无法将其放大（推动者和振动器不希望它变大）。由于周围有其他视图，因此很难单击该按钮。在 androiddevcon III Dave 上，有人或其他人发表了关于扩展视图命中区域的演讲，但他没有在示例中包含代码。现在我试图弄清楚如何实际实现这一点。

如果在较大的矩形内发生单击，我想做的是触发 Button.onClick 事件。以下代码似乎在 2.3.4 模拟器中工作（很难说，因为模拟器没有我要测试的功能），但在运行 android 2.3.4 的摩托罗拉手机上根本没有。

```
 View view=findViewById(R.id.Header);
    view.setOnTouchListener(new OnTouchListener(){
    public boolean onTouch(View v, MotionEvent event) {
        Rect rect=new Rect();
        Button btn=(Button)findViewById(R.id.btn1);
        btn.getHitRect(rect);

        util.scaleRect(rect);
        if (rect.contains((int)event.getX(), (int)event.getY())){
            event.setLocation(rect.exactCenterX(), rect.exactCenterY());
            btn.dispatchTouchEvent(event);
            return true;
        }
        else{
           return false;
            }
    }
    }); 
```

# jquery - maps.google.com/maps/api/geocode/json 的 jquery ajax 获取失败

> ID：13807402
> 
> 赞同：0
> 
> 时间：2012-12-10T19:01:20.637
> 
> 标签：jquery, ajax

我可以在浏览器（firefox）中输入以下内容：[http](http://maps.google.com/maps/api/geocode/json?address=91505&sensor=false) ://maps.google.com/maps/api/geocode/json?address=91505&sensor=false并显示 json 数据。

当我尝试将其作为 jquery ajax 调用执行时，将执行错误部分：

$("#coZip").blur(function() {

```
var el = $(this);

$.ajax({
    url: "http://maps.google.com/maps/api/geocode/json",
    cache: false,
    dataType: "json",
    type: "GET",
    data: "address=" + el.val().substring(0,5)+"&sensor=false",
    success: function(result, success) {
        $("#coCity").val(result.results[0].address_components[1].short_name);
        $("#coState").val(result.results[0].address_components[3].short_name);          
    },
    error: function(result, success) {
        alert("zip error");
    },
}); 
```

});

我已经通过在警报窗口中显示数据字符串来验证数据字符串是“address=91505&sensor=false”，所以我不知道为什么这不起作用。另外我得到一个子字符串的原因是因为我使用了一个掩码插件，#coZip 的格式是 91505- *_ _。*我不在乎后缀，所以我将其删除。

我成功使用了这个 ajax 调用，它也返回了 json 数据：

```
$.ajax({
url: "http://zip.elevenbasetwo.com",
cache: false,
dataType: "json",
type: "GET",
data: "zip=" + el.val().substring(0,5),
success: function(result, success) {
    $("#coCity").val(result.city);
    $("#coState").val(result.state);            
},
error: function(result, success) {
    alert("zip error");
} 
```

});

我想使用第一个 ajax 调用，因为第二个调用返回邮政编码可以使用的许多城市之一，但谷歌网站返回正确的城市。（例如 90275）

# sql - 消息 8114，级别 16，状态 5，过程 sp_product_listing，第 0 行错误将数据类型 varchar 转换为 datetime

> ID：13807404
> 
> 赞同：-1
> 
> 时间：2012-12-10T19:01:25.463
> 
> 标签：sql, sql-server, datetime, error-handling, varchar

> **可能重复：**
> [SQL 消息 8114，级别 16，状态 5，过程 sp_product_listing，第 0 行错误将数据类型 varchar 转换为日期时间](https://stackoverflow.com/questions/9778381/sql-msg-8114-level-16-state-5-procedure-sp-product-listing-line-0-error-conv)

我看到这是前段时间在我学校另一个学期有人问的，哈哈。但他们得到的答案并没有真正让我满意。这是另一个问题的链接：[SQL Msg 8114, Level 16, State 5, Procedure sp_product_listing, Line 0 Error convert data type varchar to datetime](https://stackoverflow.com/questions/9778381/sql-msg-8114-level-16-state-5-procedure-sp-product-listing-line-0-error-conv)。

答案所说的大部分内容对我来说没有多大意义，因为我对 SQL 很陌生。如果我们能就此展开另一次讨论，那就太好了。尤其是减去最近在我的问题中发生的老师抨击......

以下语句成功完成，但是：

```
CREATE PROCEDURE sp_product_listing
(
     @product varchar(30),
     @month   datetime,
     @year    datetime
)
AS
  SELECT
     'product_name' = products.name,
     products.unit_price,
     products.quantity_in_stock,
     'supplier_name' = suppliers.name
  FROM
     suppliers
  INNER JOIN
     products ON suppliers.supplier_id = products.supplier_id
  INNER JOIN
     order_details ON products.product_id = order_details.product_id
  INNER JOIN
     orders ON order_details.order_id = orders.order_id
  WHERE
     products.name = @product 
     AND MONTH ('orders.order_date') = @month 
     AND YEAR ('orders.order_date') = @year;
GO 
```

当我尝试执行该过程时，我收到一条错误消息：

> *消息 8114，级别 16，状态 5，过程 sp_product_listing，第 0 行将
> 数据类型 varchar 转换为日期时间时出错。*

这是我执行存储过程的方式：

```
EXECUTE sp_product_listing @product = 'Jack%', @month = 'June', @year = 2001;
GO 
```

我尝试将这两种`datetime`数据类型更改为 varchars，但没有奏效，因为列本身`datetime`最初是数据类型。我不确定我在这里缺少什么？

更新：

这是[https://stackoverflow.com/users/1554034/valex](https://stackoverflow.com/users/1554034/valex)指导的最终解决方案。

```
CREATE PROCEDURE sp_product_listing
(
   @product  varchar(30),
   @month    int,
   @year     int
)
AS
   SELECT               
      'product_name' = products.name,
      products.unit_price,
      products.quantity_in_stock,
      'supplier_name' = suppliers.name
   FROM
      suppliers
   INNER JOIN
      products ON suppliers.supplier_id = products.supplier_id
   INNER JOIN 
      order_details ON products.product_id = order_details.product_id
   INNER JOIN 
      orders ON order_details.order_id = orders.order_id
   WHERE
      products.name LIKE @product 
      AND MONTH (orders.order_date) = @month 
      AND YEAR (orders.order_date) = @year;
  GO 
```

此外，对于仍在阅读的任何人，这是我的老师给我的解决方案，它给出了相同的结果。

```
CREATE PROCEDURE sp_product_listing
(
@product    varchar(30),
@month      varchar(10),
@year       char(4)
)
AS
    SELECT
       'product_name' = products.name,
       products.unit_price,
       products.quantity_in_stock,
       'supplier_name' = suppliers.name
    FROM
       suppliers
    INNER JOIN
       products ON suppliers.supplier_id = products.supplier_id
    INNER JOIN
       order_details ON products.product_id = order_details.product_id
    INNER JOIN
       orders ON order_details.order_id = orders.order_id
    WHERE   
       products.name LIKE @product 
       AND DATENAME(MONTH,orders.order_date) = @month 
       AND YEAR (orders.order_date) = @year;
   GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:11:18.630

这里似乎存在许多问题。

我假设该列`orders.order_date`的类型为`datetime`. 因此函数的结果`MONTH (orders.order_date)`将`YEAR (orders.order_date)`是整数。

这意味着如果你想要线条

```
MONTH (orders.order_date) = @month AND
YEAR (orders.order_date) = @year; 
```

为了有意义地工作，您的参数`@month`实际上`@year`应该是整数。

最重要的是，您似乎正在使用通配符传入@product，该通配符仅对 有意义`LIKE`，而不是`=`在 where 子句中。

最后，不确定为什么要`'orders.order_date'`在函数调用中引用 - 我认为引用没有必要。

我建议您进行此更改：

```
CREATE PROCEDURE    sp_product_listing
(
@product    varchar(30),
@month      int,
@year       int
)
AS
...
WHERE       products.name LIKE @product
...
            MONTH (orders.order_date) = @month AND
            YEAR (orders.order_date) = @year; 
```

并调用`EXEC`如下：

```
EXECUTE sp_product_listing @product = 'Jack%', @month = 6, @year = 2001;
GO 
```

尽管有上述情况，关于您得到的直接错误：

在过程定义中，它们被定义为 type `datetime`，这意味着在调用过程时，SQL 引擎将期望接收`datetime`它们的值。

除此之外，您正在运行的方式`EXEC`，您尝试将值传递给`@month`并且`@year`仅表示日期的月份和年份组件（分别），而 SQL 引擎期望有效（即完整）日期。

您得到的错误只是 SQL 引擎抱怨它无法将您的输入值解释`'June'`为有效的完整日期（尝试解释`2001`为有效的完整日期也是如此）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:13:28.843

您会收到此错误，因为 'June' 不是一个`DATEIME`值并且[MONTH](http://msdn.microsoft.com/en-us/library/ms187813.aspx)函数返回`int`。此外，如果您输入@product 作为 MASK（带有 '%'），您应该使用`LIKE`而不是`=`所以您应该将您的过程声明为：

```
CREATE PROCEDURE    sp_product_listing
(
@product    varchar(30),
@month      int,
@year       int
)

....
WHERE               products.name LIKE @product AND
.... 
```

并称它为

```
EXECUTE             sp_product_listing @product = 'Jack%', @month = 6, @year = 2001; 
```

# c# - 实体框架多对多通过包含对象

> ID：13807406
> 
> 赞同：15
> 
> 时间：2012-12-10T19:01:30.403
> 
> 标签：c#, asp.net-mvc, entity-framework

我很好奇是否可以通过包含对象映射中间表。

```
public class Subscriber : IEntity
{
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
    private ChannelList _subscribedList { get; set; }
    public int NumSubscribedChannels { get { return _subscribedList.Count(); } }
}

public class HelpChannel : IEntity
{
    [Key]
    public int Id { get; set; }
    public string name { get; set; }
    public string category { get; set; }
    public int group { get; set; }
} 
```

我需要一个订阅者表、频道表和一个中间表来将订阅者链接到他/她的频道。

是否可以将 ChannelList 对象中的列表映射到订阅者模型？

我认为这可能是不可能的，我只需要一个私有列表供 EF 映射。但我不确定 EF 是否会对私有变量执行此操作。会吗？

我希望这样做是因为如果它必须公开以维护封装。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-10T22:58:03.183

您可以在 EF 代码优先中映射私有属性。[这](http://blog.oneunicorn.com/2012/03/26/code-first-data-annotations-on-non-public-properties/)是一个很好的描述如何做到这一点。在您的情况下，它是关于`Subscriber._subscribedList`. 你不能做的是（在上下文的覆盖中`OnModelCreating`）：

```
modelBuilder.Entity<Subscriber>().HasMany(x => x._subscribedList); 
```

它不会编译，因为`_subscribedList`它是私有的。

您可以做的是在以下位置创建一个嵌套映射类`Subscriber`：

```
public class Subscriber : IEntity
{
    ...
    private ICollection<HelpChannel> _subscribedList { get; set; } // ICollection!

    public class SubscriberMapper : EntityTypeConfiguration<Subscriber>
    {
        public SubscriberMapper()
        {
            HasMany(s => s._subscribedList);
        }
    }
} 
```

并在`OnModelCreating`：

```
modelBuilder.Configurations.Add(new Subscriber.SubscriberMapping()); 
```

您可能希望将`_subscribedList`protected 设为虚拟，以允许延迟加载。但甚至可以使用以下方法进行预加载`Include`：

```
context.Subscribers.Include("_subscribedList"); 
```

# php - 覆盖 symfony 广播小部件

> ID：13807409
> 
> 赞同：3
> 
> 时间：2012-12-10T19:01:49.900
> 
> 标签：php, forms, symfony, symfony-2.1

默认无线电小部件创建以下结构：

```
<label>...</label>
<div id="...">
<div class="clearfix prettyradio labelright  blue">
<input type="radio" id="..._0" name="..." value="..." style="display: none;">
<a href="#" class=""></a>
...
</div> 
```

我找到了 radio_widget 块，但它本身只包含一个输入。所以我只能自定义这部分：

```
<input type="radio" id="..._0" name="..." value="1" style="display: none;"> 
```

但我不明白如何改变整个无线电选择领域的结构？

另外，有谁知道，为什么 symfony 将 display:none 添加到输入中？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T19:34:01.943

如果您使用[Radio Field Type](http://symfony.com/doc/2.0/reference/forms/types/radio.html)，您可以通过调用仅自定义块的`input`一部分，它显示的只是，`radio_widget``form_widget(form.yourField)`

```
{% block radio_widget %}
{% spaceless %}
    <input type="radio" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />
{% endspaceless %}
{% endblock radio_widget %} 
```

但是，如果您使用[Choice Field Type](http://symfony.com/doc/2.0/reference/forms/types/choice.html)来显示 Radio Fields `(expanded => true and multiple => false)`。然后，您必须覆盖该`choice_widget`块，该块为每个子元素调用`radio_widget`由全局包围的块`div`

你是怎么得到“显示：无”的？因为默认块中没有这样的样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-16T03:06:52.373

如果您特别想覆盖单个单选字段的呈现方式 - 即组中每个输入字段的呈现方式 - 使用以下公式作为块名称：

```
_<form name>_<field name>_entry_widget 
```

请注意这一点：`_entry`

如果您正在使用扩展的选择字段`..._entry_row`并且`..._entry_label`由于它们不用于单个选择而无法工作 - 至少对于单选按钮来说很好。

更一般地说，您可以使用以下代码找到很多关于 Symfony 打算在下一次调用`{{ form_widget(form) }}`函数调用期间使用哪个块：

```
{% for b in form.vars.block_prefixes %}
    {{ dump(b) }}
{% endfor %} 
```

或者您可能想`child`在某些情况下查看：

```
{% for b in child.vars.block_prefixes %}
    {{ dump(b) }}
{% endfor %} 
```

# java - Java/Android 绝对最快的方法来定期获取当前秒数 (0-59) 和/或毫秒 (0-999)

> ID：13807415
> 
> 赞同：1
> 
> 时间：2012-12-10T19:02:29.733
> 
> 标签：java, android

我`Runnable`每 100 毫秒在一个 Android 应用程序中执行一个 Java `ScheduledExecutorService`。作为`run()`块的一部分，我需要获取当前秒为 0-59 和毫秒为 0-999。两者都应该是当地时间，尽管 UTC 也是可行的。

**绝对最快**的方法是什么？不需要国际化/唯一日历。

目前我正在使用`Calendar`以下方式，但我认为它可以更快地使用`System.currentTimeMillis()`并进行一些数学运算，我将不胜感激任何输入。

```
Calendar calendar = Calendar.getInstance();
int seconds = calendar.get(Calendar.SECOND); 
```

如果它是相关的，这实际上是在一个 Android 应用程序中。

**编辑澄清**

将当前秒数设为 0-59（即相对于当前分钟数）是至关重要的，因此`System.currentTimeMillis()`会带来我上面提到的数学成本。我不确定的是，做这个数学 + 系统调用是否会比调用更快`Calendar`，或者是否有任何其他选项（如[Joda Time](http://joda-time.sourceforge.net/)）可能占用更少的空间。

作为参考，下面是我能想到的从 Unix 时间戳中获取秒 (0-59) 的最直接方法。

```
double seconds = Math.floor(((Math.floor(System.currentTimeMillis() / 1000) % 86400) % 3600) % 60); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T19:03:34.253

你不会找到*比*.`System.currentTimeMillis()`

也就是说，快速和正确不一定齐头并进。一如既往：考虑使用[Joda Time](http://joda-time.sourceforge.net/)。如果没有库，您将无法正确处理所有边缘情况。

# android - Android Tabhost 内容在平板电脑上冻结，但在模拟器中不冻结

> ID：13807421
> 
> 赞同：1
> 
> 时间：2012-12-10T19:03:14.127
> 
> 标签：android, android-emulator, android-tabhost, tablet

我这里发生了一些奇怪的事情！

我有一个 Tabhost，有 3 个标签。在我的模拟器中，它工作正常，来回运行。但在我的平板电脑（HP 触摸板和三星 Galaxy Tab 1）上它不起作用。我从 Tab 1 转到 Tab 2，但无法返回。当我转到 Tab 3 时，tab3 的内容冻结，我无法返回 tab1 或 tab2（或者......至少内容没有显示它应该显示的内容（以及它在模拟器中正确显示的内容）。

```
 public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
setContentView(R.layout.mainmenu);
TabHost mTabHost = (TabHost)findViewById(android.R.id.tabhost); 

    Intent tab1 = new Intent(this, tab1.class);

    TabHost.TabSpec tab1Spec = mTabHost.newTabSpec("tab1").setIndicator("tab1").setContent(tab1);
    mTabHost.addTab(tab1Spec);
// this 2 more times with my other tabs. 
```

谢谢你的帮助！我不知道我应该在哪里看，如果它（以某种方式）正确的事情:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:26:01.473

您可以使用 aLogcat ( [https://play.google.com/store/apps/details?id=org.jtb.alogcat](https://play.google.com/store/apps/details?id=org.jtb.alogcat) ) 查看是否没有收到任何错误。我猜你会看到一个出错的错误，可能是特定于设备的。

据我从您提供的代码中可以看出，它看起来应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T00:30:29.157

```
Intent i = new Intent().setClass(this, YourClass.class).addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

这是我正在寻找的代码行。不知何故，由于这个标志，它的工作方式有所不同。但无论如何，非常感谢你，对于 aLogCat。这将使我将来的一些事情变得更容易！

# java - java xpath 文本

> ID：13807425
> 
> 赞同：3
> 
> 时间：2012-12-10T19:03:29.907
> 
> 标签：java, xpath

我有点坚持使用 XPath 和/或 Java。我有如下 XML 文档结构：

```
<document>
  <text>
    <headline>This is the text's headline</headline>
    This is the text.
  </text>
 </document> 
```

我需要的是这个：

```
<document>
  <text>
    <headline>This is the text's headline</headline>
    <w>This</w>
    <w>is</w>
    <w>the</w>
    <w>text</w>
    <w>.</w>
  </text>
 </document> 
```

我怎么能改变文本节点的文本内容，同时保持标题节点不变？！（我正在使用 org.jdom2.xpath。）

鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:49:07.727

由于您需要清除文本内容`<text>`并设置（空）文本删除所有其他内容，您可以`<headline>`先克隆元素并在使用`setText()`. 然后继续进入你的循环并创建`<w>`元素。

至于 XPath，您可以选择`<heading>`元素

```
/document/text/heading 
```

和`<text>`元素的文本内容

```
/document/text/text() 
```

# scala - SBT Scaladoc 配置

> ID：13807427
> 
> 赞同：10
> 
> 时间：2012-12-10T19:03:35.557
> 
> 标签：scala, classpath, sbt, scaladoc, output-directory

我正在尝试在 SBT 中配置 Scaladoc，特别是标题、输出目录和类路径。

我设法通过将以下内容添加到 build.sbt 来定义标题：

```
scalacOptions in (Compile, doc) ++= Opts.doc.title("Scala-Tools") 
```

我不知道如何更改文档输出目录。

我也无法弄清楚如何将 jar 添加到类路径中。我想编辑类路径的原因是，当我引用它的类时，标准 Scala 库似乎没有被 scaladoc 拾取，即 [[scala.Option]] 导致警告“找不到任何要链接的成员对于“scala.Option”。

任何帮助，即使是以示例 SBT 配置的形式，也将不胜感激！

我正在使用 Scala 2.10-RC3 和 SBT 0.12.1。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T03:10:11.410

Scala 库位于类路径中，否则 scaladoc 会很快出现错误。您看到的警告意味着 scaladoc 不知道如何链接到 Option。为此，您需要使用2.10.1中的`-external-urls`选项或选项。`-doc-external-doc`即将发布的 2.10.1的输出`scaladoc -help`显示：

```
-doc-external-doc:<external-doc>  comma-separated list of classpath_entry_path#doc_URL pairs describing external dependencies.
-external-urls:<externalUrl(s)>   (deprecated) comma-separated list of package_names=doc_URL for external dependencies, where package names are ':'-separated 
```

在 2.10.1 发布之前的解决方案是使用`-external-uris`：

```
-external-urls:scala=http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/ 
```

# c - 退格字符不会将光标移回终端中的上一行

> ID：13807428
> 
> 赞同：1
> 
> 时间：2012-12-10T19:03:37.790
> 
> 标签：c, linux

我正在使用 Ubuntu 12.10，在制作程序时我观察到退格字符（'\b'）可以将光标移回终端内同一行的一个位置，但是当我希望它移回时不起作用上一行？

我如何使用 C 语言实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:05:53.203

这确实是关于终端行为的问题，而不是 C。除了“上移一行”然后“移到行尾”或类似内容之外，我不知道“退格到上一行”的任何简单方法. 在 Linux 上，`man console_codes`将为您提供标准终端转义的良好文档。所有相关终端都非常相似，如果您只想进行光标定位而不是花哨的颜色，您应该能够对代码进行硬编码。

正如彼得所说，如果您愿意，也可以使用像 ncurses 这样的高级库。这是否有意义在很大程度上取决于您正在做的事情的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:05:29.490

普通终端是面向行的，因此您必须采用更复杂的路径，例如使用 curses-library 并自己执行语义

# c# - 以管理员权限运行 cmd 命令

> ID：13807429
> 
> 赞同：19
> 
> 时间：2012-12-10T19:03:38.530
> 
> 标签：c#, winforms, c#-4.0

如何`**cd..**`在 Windows 窗体的幕后运行命令？（即用户看不到它）

谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-10T19:09:08.263

请参阅 System.Diagnostics.Process [http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)

**对于同样的问题，也有这样的答案：** [https ://stackoverflow.com/a/1469790/25882](https://stackoverflow.com/a/1469790/25882)

**例子：**

```
System.Diagnostics.Process process = new System.Diagnostics.Process();
System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
startInfo.FileName = "cmd.exe";
startInfo.Arguments = "/C copy /b Image1.jpg + Archive.rar Image2.jpg";
startInfo.Verb = "runas";
process.StartInfo = startInfo;
process.Start(); 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-10T19:34:11.617

您可以初始化一个新的`System.Diagnostics.ProcessStartInfo`，其中包含您的进程启动所需的信息，`WindowStyle`以及指示进程启动时要使用的窗口状态，可以是`Hidden`、或。在您的情况下，我们将设置为这样，将启动的进程将无法接收任何输入，也无法显示来自/向用户的输出。`Maximized``Minimized``Normal``Hidden`

**例子**

```
System.Diagnostics.ProcessStartInfo myProcessInfo = new System.Diagnostics.ProcessStartInfo(); //Initializes a new ProcessStartInfo of name myProcessInfo
myProcessInfo.FileName = Environment.ExpandEnvironmentVariables("%SystemRoot%") + @"\System32\cmd.exe"; //Sets the FileName property of myProcessInfo to %SystemRoot%\System32\cmd.exe where %SystemRoot% is a system variable which is expanded using Environment.ExpandEnvironmentVariables
myProcessInfo.Arguments = "cd.."; //Sets the arguments to cd..
myProcessInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden; //Sets the WindowStyle of myProcessInfo which indicates the window state to use when the process is started to Hidden
System.Diagnostics.Process.Start(myProcessInfo); //Starts the process based on myProcessInfo 
```

**截屏**

以下屏幕截图代表任务管理器，其中显示了由我们的应用程序启动的一个进程。但是，它的窗口是不可见的。

![该进程正在运行而不显示其窗口](../Images/4867dbafedc97281a86e77329be80009.png)

**注意**：即使您关闭应用程序，启动的进程也不会终止。

此外，要以管理员身份运行进程，您可以将`Verb`进程启动信息的属性设置为`runas`

**例子**

```
System.Diagnostics.ProcessStartInfo myProcessInfo = new System.Diagnostics.ProcessStartInfo(); //Initializes a new ProcessStartInfo of name myProcessInfo
myProcessInfo.FileName = Environment.ExpandEnvironmentVariables("%SystemRoot%") + @"\System32\cmd.exe"; //Sets the FileName property of myProcessInfo to %SystemRoot%\System32\cmd.exe where %SystemRoot% is a system variable which is expanded using Environment.ExpandEnvironmentVariables
myProcessInfo.Arguments = "cd.."; //Sets the arguments to cd..
myProcessInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden; //Sets the WindowStyle of myProcessInfo which indicates the window state to use when the process is started to Hidden
myProcessInfo.Verb = "runas"; //The process should start with elevated permissions
System.Diagnostics.Process.Start(myProcessInfo); //Starts the process based on myProcessInfo 
```

**注意**：如果您启用了用户帐户控制，如果尝试调用此进程的应用程序未以提升的权限运行，则可能会要求您首先允许该进程以提升的权限启动。

如果您想跳过提示，我认为您应该允许您的主应用程序以提升的权限启动。为此，您需要打开应用程序的清单并确保添加了以下行

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false"/> 
```

这只会告诉您的应用程序仅以提升的权限启动。因此，当您以管理员身份调用流程时，不会有任何提示，因为流程调用者是在管理员下执行的。

谢谢，
我希望你觉得这有帮助:)

# asp.net-mvc - Asp.Net：将字符串转换为长字符串

> ID：13807434
> 
> 赞同：0
> 
> 时间：2012-12-10T19:03:49.573
> 
> 标签：asp.net-mvc, razor

我正在尝试保留 google.maps.Geocoder() 获得的地理位置数据。从javascript中，我将值设置为html中的（实际上）隐藏元素（工作正常）：

```
document.getElementById("longitude").value = results[0].geometry.location.lng();
document.getElementById("latitude").value = results[0].geometry.location.lat(); 
```

从那里我想将值传递给控制器​​：

```
@Html.TextBoxFor(model => model.Longitude, new { id = "longitude", type = "number" })
@Html.TextBoxFor(model => model.Latitude, new { id = "latitude", type = "number"}) 
```

根据小数分隔符，我得到验证错误或经度和纬度的值未设置为模型。这两个属性都是**long**类型。

为什么 Asp.Net 不能自动解析这些值？我对 Asp.Net 很陌生，但我知道我可以：

*   编写我自己的 html-helper
*   将视图模型传递给我的控制器或
*   持久化字符串值

我应该选择哪种方式？

谢谢， 里科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:05:12.103

您会收到错误，因为`long`存储大的 64 位整数值（它实际上`Int64`在幕后），而不是浮点值。

如果您希望您的代码使用浮点值，您需要使用类似`float`or的东西`double`。

# ruby-on-rails - Rails：通过 API 自动创建和配置 SSL 证书

> ID：13807435
> 
> 赞同：2
> 
> 时间：2012-12-10T19:03:50.507
> 
> 标签：ruby-on-rails, ruby, api, ssl

我正在构建一个基于 Rails 的网站构建器作为实验，我想知道是否有一个 API 可以通过 API 为新网站自动购买和配置 SSL 证书。我相信我有一种方法来设置域和唯一 IP（尽管仍在努力），但没有看到设置 SSL 证书的好方法。

我找到了某种 SSL API——有人用过吗？[http://doc.rpc.gandi.net/cert/usage.html](http://doc.rpc.gandi.net/cert/usage.html)

# jboss - 通过 https 的 Spring 安全注销不起作用

> ID：13807438
> 
> 赞同：1
> 
> 时间：2012-12-10T19:04:02.453
> 
> 标签：jboss, spring-security

我有 Spring SEcurity 的基本配置。注销按钮在 HTTP 上工作得非常好，但在处理 HTTPS 时会出现问题。我的安全配置如下所示：

```
<http use-expressions="true" auto-config="false" entry-point-ref="http403EntryPoint"
      access-denied-page="/accessDenied">
    <intercept-url pattern="/**" access="hasRole('AA_ACCESS')" requires-channel="any"/>
    <custom-filter position="PRE_AUTH_FILTER" ref="siteminderFilter"/>
    <session-management>
        <concurrency-control max-sessions="1" expired-url="/sessionExpired"/>
    </session-management>
    <logout invalidate-session="true" delete-cookies="JSESSIONID"/>
</http> 
```

注销按钮：

```
<a href="<c:url value="${requestScope.pageContext.servletContext.contextPath}/j_spring_security_logout" />">Logout</a> 
```

正如我所说，一切都可以通过 HTTP 正常工作，但不能通过 HTTPS。

我收到错误 404 找不到页面。应用程序运行的端口是：JBoss AS 的 11501，而 HTTPS 是带有 jBoss 的 ajp 连接器的 Apache，apache 是 16000，ajp 8009。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:03:22.040

卢克泰勒是对的。这不是 Spring Securiry 的问题。记住孩子们，在你的同事之后检查每件事两次。就我而言，Apache VirtualHost 配置错误：

```
<VirtualHost *:11600>
    ServerName localhost
    DocumentRoot "/apache/htdocs/aa"
    SSLEngine on
    SSLCertificateFile "/apache/conf/server.crt"
    SSLCertificateKeyFile "/apache/conf/server.key"
    ProxyPass /admin ajp://localhost:8009/admin/ <--- HERE
    <Directory "/apache/htdocs/aa">
      DirectoryIndex index.html
      AllowOverride All
      Order allow,deny
      Allow from all
    </Directory>
    ErrorLog "logs/error_log"
    CustomLog "logs/access_log" common
    LogLevel debug
</VirtualHost> 
```

注意 ProxyPass 末尾的附加斜线，这就是问题所在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T09:06:05.310

不知道为什么它可以在 http 上运行，所以我不知道这是否会有所帮助，但您可以尝试`logout-success-url`在注销配置上进行设置，以防 404 错误是由于在注销完成后您被重定向的页面丢失所致。

[http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-logout](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-logout)

# sql - 使用外部映射进行验证

> ID：13807442
> 
> 赞同：1
> 
> 时间：2012-12-10T19:04:25.080
> 
> 标签：sql, vb.net, visual-studio-2008, linq-to-sql, mapping

我正在尝试使用外部映射来验证客户的 SQL Server 数据库。我想在我的开发计算机上创建映射文件并使用它来验证客户的服务器数据库是否包含所有字段、主键等。这可能吗，特别是如果我添加一个新表，我可以将映射文件与从客户服务器数据库中检索到的上下文？

# stylus - 手写笔中的-webkit-filter

> ID：13807449
> 
> 赞同：2
> 
> 时间：2012-12-10T19:05:08.197
> 
> 标签：stylus

任何机会在手写笔中使用它：

```
-webkit-filter: invert(); 
```

没有

```
@css{
    .something {
        -webkit-filter: invert();
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T15:50:04.493

问题似乎是[内置函数](http://learnboost.github.com/stylus/docs/bifs.html) `invert(color)`。我能想到的唯一解决方案（栏重命名 bif `invert`）是这样的：

```
.foo
  -webkit-filter unquote("invert()") 
```

# python - 读取使用 urllib2 检索的 Excel 对象

> ID：13807451
> 
> 赞同：4
> 
> 时间：2012-12-10T19:05:11.100
> 
> 标签：python, excel, urllib2, xlrd, xlwt

我正在使用 urllib2 获取 Excel 文件并保存到下面的响应中。我希望能够使用 xlrd 或类似方法处理这个 excel 文件。我在下面提供了一些信息，如果我可以提供更多信息，请告诉我。如何将响应对象转换为我可以玩的对象？

```
response = <addinfourl at 199999998 whose fp = <socket._fileobject object at 0x100001010>>

response.read() prints: '\xd0\xcf\x11\xe0...'

Headers:
Content-Type: application/vnd.ms-excel
Transfer-Encoding: chunked 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T19:11:46.007

使用`xlrd`, 并基于[其 API 文档](http://www.lexicon.net/sjmachin/xlrd.html)，您似乎可以使用类似于以下内容的内容：

```
book = xlrd.open_workbook(file_contents=response.read()) 
```

它似乎不支持读取`file`对象（IMO，这将是理想的），只接受`filename`本身或上述`file_contents`方法。

如果`file_contents`不存在或不起作用，您必须使用[`tempfile`](http://docs.python.org/2/library/tempfile.html)将响应写入临时文件并读取它。

# python - tkinter 的 IntVar() 和 .get()'ing 它

> ID：13807454
> 
> 赞同：2
> 
> 时间：2012-12-10T19:05:26.293
> 
> 标签：python, tkinter

我在这里需要一点帮助，我觉得我已经无休止地搜索并且无法纠正我的问题。

案子：

我有一个复选按钮，它的 on 值为 1，off 为 0，现在我想做一个动作，如果它打开，另一个如果它关闭。

我的代码是：

```
#==Checkbox==#

check = IntVar()
checkbox = Checkbutton(labelframe, text="Tillad mere end én linje", variable = check, onvalue=1, offvalue=0)
checkbox.pack(side = RIGHT)

...

def go():

        check.get()

        print(check)

        if(check == 0):

                print("off")

                w.delete(ALL)
                tegnefladen()
                update()

        else:

                print("on")
                update() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T19:09:43.680

您实际上并没有设置值。`check`是一个对象，它永远不会与 0 相同。基本上，你想比较`check.get()`. 试试这个：

```
def go():
        print(check.get())
        if(check.get() == 0):

                print("off")

                w.delete(ALL)
                tegnefladen()
                update()

        else:

                print("on")
                update() 
```

# c++ - 在 Metro 应用程序中使用 fopen 打开文件

> ID：13807467
> 
> 赞同：2
> 
> 时间：2012-12-10T19:06:19.923
> 
> 标签：c++, visual-c++, windows-8

我也尝试打开文件

```
const char *path = "C:/1/123.somebinaryfile";
FILE *f = fopen(path, "rb"); 
```

但我有错误“无法从文件中读取”。

我该如何解决？可能我必须在清单中添加一些声明吗？还是地铁应用程序只对图书馆有权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T09:59:29.560

可能适用于[CreateFile2](http://msdn.microsoft.com/en-us/library/windows/desktop/hh449422%28v=vs.85%29.aspx)的相同限制也适用于 fopen：

> 从 Windows 应用商店应用程序调用时，CreateFile2 被简化。只有 ApplicationData.LocalFolder 或 Package.InstalledLocation 目录中的文件或目录才能打开。也不支持打开命名管道或邮槽或创建加密文件 (FILE_ATTRIBUTE_ENCRYPTED)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:25:56.287

您遇到的问题来自这样一个事实，即现代 UI 应用程序不允许访问文件系统，除非用户使用文件选择器选择了文件，或者此类文件是应用程序包的一部分。

# css - 为什么图像路径没有在 scss 中解析？

> ID：13807470
> 
> 赞同：1
> 
> 时间：2012-12-10T19:06:42.863
> 
> 标签：css, heroku, ruby-on-rails-3.2, sass

在我的应用程序中，我有一个 scss 文件，它来自一个 gem，驻留在我的应用程序项目文件夹之外的 gem 文件夹中

在本地工作得很好，我有正确的图像路径，如下所示：（从 chrome 的元素检查器复制）

```
media="all"
.social-share-button-twitter {
display: inline-block;
width: 16px;
height: 16px;
background: url("/assets/sprites/social-share-button.png") 0px -48px no-repeat;
} 
```

但是，当我部署到 heroku 时，图像路径未解析，我得到以下结果：

```
media="all"
.social-share-button-twitter {
display: inline-block;
width: 16px;
height: 16px;
background: url(image-path("sprites/social-share-button.png")) 0px -48px no-repeat;
} 
```

注意上面的url，当然它不会指向png图像。

这是它在 scss 文件中的方式：

```
.social-share-button-baidu { display:inline-block; width: 16px; height: 16px; background: url(image-path('sprites/social-share-button.png')) 0px 0px no-repeat } 
```

知道为什么我在部署的应用程序中得到错误的路径吗？

如何强制 rails 使用另一个 scss 文件而不是 gem 文件夹中的文件？我试图在 application.css 中设置另一个文件，但是 rails 继续使用 gem 文件夹中的文件。

任何的想法 ？为什么它在本地运行良好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:21:02.040

如果它是 scss 而不是指南针，那么它会像这样（查看 sprites 文件夹与 scss 文件的比较位置）

```
.social-share-button-baidu 
{ 
   display:inline-block; 
   width: 16px; 
   height: 16px; 
   background: url(../sprites/social-share-button.png) 0px 0px no-repeat;
} 
```

../ 带你离开一个文件夹，你能从那里看到 sprites 文件夹吗？

# c - 如何从 C 中的串行（SPI）连接读取数据？

> ID：13807471
> 
> 赞同：1
> 
> 时间：2012-12-10T19:06:42.193
> 
> 标签：c, serial-port, linux-device-driver, spi

我正在尝试编写一个程序，该程序将安装在 Linux MCU（Raspberry Pi）上，该程序将读取来自另一个 MCU 的串行数据（我将自己构建的东西）。

我已经研究了如何做到这一点，并认为我有“大局”，但仍然缺少一些东西。一方面，我需要启用内核模块并让自己访问设备：

```
sudo modprobe spi_bcm2708
sudo chown `id -u`.`id -g` /dev/spidev0.* 
```

从那里我可以使用[这个著名](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob_plain;f=Documentation/spi/spidev_test.c)的 C 文件来测试 SPI 连接。

所以现在连接在那里，但我仍然需要从中读取串行数据。根据[这个 SO question](https://stackoverflow.com/questions/8600275/how-do-i-read-data-from-serial-port-in-linux-using-c)的答案，我只需要：

> ...打开相关端口进行读取，并用于`read()`获取数据。

然而，该答案中的代码片段似乎是通过设备驱动程序打开端口，而不是通过 SPI。

我的*理解*是我可以使用 SPI 从连接的 MCU 设备中读取数据，并且我*不需要*为该设备编写自己的设备驱动程序。这是真的？如果是这样，我将如何从 SPI 连接中读取数据，该代码与上面链接的问题的答案中的代码有何不同？

如果我的理解不正确，并且我确实“通过”了设备驱动程序，那么为什么我首先需要驱动程序？这不正是SPI希望规避的吗？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T07:07:11.070

> 我正在尝试编写一个程序，该程序将安装在 Linux MCU（Raspberry Pi）上，该程序将读取来自另一个 MCU 的串行数据（我将自己构建的东西）。

[ *MCU*不是正确使用的术语。Raspberry Pi 使用 SoC（片上系统）。微控制器将是比 SoC 更便宜、更简单的设备。如果要使用 TLA，请使用 SBC，单板计算机。]

[您滥用术语“串行端口”和“串行数据”。今天，由于 PC 的普及，“串口”已经专门指 EIA/RS-232 异步串行连接。SPI。USB。I2C、TWI、SATA*等*不应被称为“串行”连接，除非您解释它们是如何工作的。]

在 Linux 中，SPI 设备驱动程序通常实现为“平台驱动程序”而不是*字符驱动程序*。因此，这样的驱动程序没有文件操作或*fops*来执行*open()*、*read()*、*write()*或*close( )* . 这样的操作是针对目标设备的，平台设备连接到系统上。因此，平台设备`/dev`不像目标设备那样有设备节点。SPI与USB和PCI属于同一类；它们都是总线并且通常实现为平台驱动程序。

> 我的理解是我可以使用 SPI 从连接的 MCU 设备中读取数据，并且我不需要为该设备编写自己的设备驱动程序。这是真的？

答案取决于您使用的内核是否有一个 SPI 字符设备暴露给您的用户程序使用。但如果 SPI 驱动程序是平台驱动程序，则必须实现自定义 SBC 的设备驱动程序。此目标设备将需要一个节点`/dev`，分配主要和次要编号以及与这些编号关联的驱动程序。该驱动程序将利用 SPI 驱动程序提供的平台操作或使用 Linux SPI API 来执行传输。SPI 及其驱动程序只是在此处理器和目标设备之间传输数据的管道。像 SATA 和 PCI 一样，用户很少意识到这些将外围设备连接到计算机的（内部）总线。

`linux/drivers/spi/spi_bcm2708.c`是一个平台驱动程序。它没有支持/执行*open()*、*read()*、*write()*或*close()*操作的*fops 。*它将自己注册为 SPI 主机，因此其他（目标）驱动程序可以将 SPI API 用于其服务。

 ***IMO，您最好在 RPI 和您的自定义 SBC 之间实施 EIA/RS-232 链接。如果使用非规范（原始）传输，那么如果/当您转换/升级到 SPI 连接时，您编写的代码的 99% 可能是可重用的。没有流量控制的 3 线串行连接类似于 SPI 连接，但没有强加主/从层次结构、更简单的硬件接口和更长的电缆长度。

请注意，您可能无法使用您安装的任何电缆实现长 SPI 距离的快速传输速率。SPI 的 10 Mbps 速率通常在具有接地层和短走线的多层板上实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T19:25:33.490

在 Unix 上，一切都是文件

如果`spi_bcm2708`驱动程序安装正确，则应该有一个`/dev/whatever`设备文件（或几个用于以不同方式访问设备的文件）。

如果没有自动创建，您可以使用[mknod进行输入](http://linux.die.net/man/1/mknod)

用户空间代码只需像打开`/dev/whatever`任何其他常规文件一样打开文件并从中读取/写入数据。这就是 Unix 的全部意义所在。

编辑：这正是链接问题中的代码正在做的事情，它将终端`/dev/ttyS0`作为带有 open() 的文件打开并读取/写入它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T08:15:43.380

你找到[SPI 的 Linux 文档了](http://www.kernel.org/doc/Documentation/spi/)吗？

有几个很好的文档：spi-summary 和 spidev。

文件[spidev_fdx.c](http://www.kernel.org/doc/Documentation/spi/spidev_fdx.c)中也有示例，`read()`用于 SPI 设备。

但通常从 SPI 读取是由`ioctl()`函数处理的。***

# random - 追加多个div

> ID：13807474
> 
> 赞同：1
> 
> 时间：2012-12-10T19:06:59.507
> 
> 标签：random, append, bind

我想将多个圆圈添加到`body`并绑定一个函数，以便每个圆圈在点击时进行随机移动。我已经尝试过这样的事情：http: [//jsfiddle.net/Xw29r/375/](http://jsfiddle.net/Xw29r/375/)

```
$(function() {
$('.button1').click(function(){
    $('body').append('<div class="circles"> </div>')
    .bind('click',function() {
        var h = $('body').height()-100;
        var w = $('body').width()-100;

        var movh = Math.floor( Math.random() * h);
        var movw = Math.floor( Math.random() * w);
    $(this).animate({
     top: movh,
     left: movw
    }, 1000);
});
});
}); 
```

`$(this)`得到身体，但我怎样才能每次都得到附加的div？当我绑定`$(.circles)`班级时，所有圆圈都会被移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:12:30.603

您可以为不同的圈子使用不同的类，也可以通过 id 来识别您的圈子：div id="circle1"/ div id="circle2" / etc。

你有没有试过这个：[http](http://d3js.org/) ://d3js.org/ ？这是一个非常强大的库。D3》三圈教程： http: [//mbostock.github.com/d3/tutorial/circle.html](http://mbostock.github.com/d3/tutorial/circle.html)

# asp.net - 必须在另一个用户控件中使用 Telerik RadGrid 将数据绑定到用户控件？

> ID：13807475
> 
> 赞同：1
> 
> 时间：2012-12-10T19:06:59.907
> 
> 标签：asp.net, c#-4.0, telerik, plinqo

基本上，我创建了一个包含 Telerik RadGrid 的用户控件，在控件内部我还有另外两个控件，其中包含 Telerik RadGrid。我正在尝试将修改后的数据绑定回父用户控件内的用户控件。我已经检查过数据在编辑后是否正确，但是当再次绑定表单时，内部控件具有与首次加载表单相同的数据。我正在使用 RadWindow。同事建议它可以与 asp.net 表单控件一起使用，但是 Telerik 控件似乎存在问题。有没有一种简单的方法可以强制重新绑定控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:54:45.280

您可以调用一个[Rebind() 方法来强制执行此操作。](https://stackoverflow.com/questions/10044612/what-is-the-difference-between-radgrid-rebind-and-radgrid-mastertableview-rebi)此方法导致刷新并重新加载数据并调用 NeedDataSource。

# javascript - 用变量或另一个字符串替换字符串的一部分

> ID：13807481
> 
> 赞同：-2
> 
> 时间：2012-12-10T19:07:21.427
> 
> 标签：javascript, string

我知道这已经被问过很多次了，但是我是一个完全的 JS 初学者并且不理解任何答案，当我尝试运行上述解决方案时它们似乎不起作用。我想知道如何用变量或可能的另一个字符串替换字符串的一部分。

因此，如果我的代码如下所示：

```
var text = "Eam dicit fuisset volumus an, usu ea tibique consulatu scribentur.";
var otherString = "Random text"; 
```

...例如，如何将 text.substring[9, 20] 替换为 otherString。

请尽可能多地解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:08:41.913

```
text = text.replace(text.substring(9, 20), otherString); 
```

我们正在将文本设置为替换的文本。我不知道还能说什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:37:46.300

我对您的具体问题的解决方案是：

```
 text = text.slice (0,9) + otherString + text.slice (20); 
```

将变量的值替换为`text`的前 10 个字符，`text`然后是 的值，然后是第 20 个字符之后`otherString`的部分。`text`

# debugging - 需要帮助查找“对象不能为零”错误消息的原因

> ID：13807482
> 
> 赞同：-1
> 
> 时间：2012-12-10T19:07:24.373
> 
> 标签：debugging, xcode4.5, nszombies

在我的 iPad 应用程序 iOS 6.0 XCode 4.5 中，我在运行时收到以下消息：

> *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil”

我看了又看，但我没有看到它发生在哪里。我设置了 NSZombies，但在 Instruments 中没有得到任何有意义的东西。是否有工具或设置或至少可以告诉我发生这种情况的地方？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-11T21:53:43.737

我删除了与Magical Record有关的所有代码，下载了最新版本并重新安装了它..解决了问题！
感谢您的建议。

# c# - 构建后运行自动化验收测试的框架？

> ID：13807489
> 
> 赞同：3
> 
> 时间：2012-12-10T19:07:42.500
> 
> 标签：c#, .net, tfs, continuous-integration, acceptance-testing

在我当前的项目中，我们使用 TFS 构建服务器进行持续集成（构建 + 运行单元测试）。我们还有一组编写为 SpecFlow 功能的自动化验收测试。

但是，这些并未集成到持续集成工作流中。今天，应用程序是手动部署的，验收测试是手动调用的。

我们希望以脚本/控制台应用程序或某种现有 CI 工具的形式自动执行此操作。

这是我们希望定期执行的操作，例如每小时一次：

1.  询问 TFS 是否有任何新版本
2.  如果是：从 TFS 获取最新的成功构建
3.  将应用程序部署到我们的测试机
4.  针对已部署的构建执行 SpecFlow 测试
5.  收集结果并将其呈现在某种形式的网页上

是否有任何现有的工具或框架来解决这个问题？我已经阅读了有关现有 CI 服务器的信息，但它们似乎不符合我的描述。如果没有，关于如何以编程方式或使用命令行工具实现步骤 1、2 和 5 的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:35:31.813

In my humble opinion TFS is capable of doing everything that you listed without involving any additional tools. What you might need to do is to setup a Lab Environment and use specific Workflow build definition to achieve it. You need also Test controller and test agents. The easiest way might be to setup Standard Lab environment which might act in this way - Build - Deploy - Test workflow

Build got triggered, then got deployed into the lab environment (might be a bunch of either physical or VM machines with installed test agents on them and connected to the Test controller), after that all test are executed and the result is consolidated as a part of the build results.

Hope this helps a bit!

-Rado

# android - 如何在 Android 中创建自定义共享对话框

> ID：13807490
> 
> 赞同：3
> 
> 时间：2012-12-10T19:07:49.463
> 
> 标签：android, share, android-dialog

我正在使用从我的应用程序到社交媒体的共享选项。Android 默认共享对话框工作正常。我想自定义对话框，以便我可以重新排列共享对话框 UI，就像在 Flipboard android 应用程序中一样。任何人都可以指出如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-27T10:50:52.857

我遇到了这个问题。我在这个[答案](https://stackoverflow.com/a/4697761/6176003)中找到了解决方案，我希望它也能帮助你..

我将这篇文章的代码写在下面，以防将来不存在：

您必须使用自定义 ListAdapter 来添加您的图像。方法是继承 ArrayAdapter（AlertDialog 默认使用）。这是一个例子：

```
final Item[] items = {
    new Item("Email", android.R.drawable.ic_menu_add),
    new Item("Facebook", android.R.drawable.ic_menu_delete),
    new Item("...", 0),//no icon for this one
};

ListAdapter adapter = new ArrayAdapter<Item>(
    this,
    android.R.layout.select_dialog_item,
    android.R.id.text1,
    items){
        public View getView(int position, View convertView, ViewGroup parent) {
            //Use super class to create the View
            View v = super.getView(position, convertView, parent);
            TextView tv = (TextView)v.findViewById(android.R.id.text1);

            //Put the image on the TextView
            tv.setCompoundDrawablesWithIntrinsicBounds(items[position].icon, 0, 0, 0);

            //Add margin between image and text (support various screen densities)
            int dp5 = (int) (5 * getResources().getDisplayMetrics().density + 0.5f);
            tv.setCompoundDrawablePadding(dp5);

            return v;
        }
    };

new AlertDialog.Builder(this)
    .setTitle("Share Appliction")
    .setAdapter(adapter, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item) {
            //...
        }
    }).show(); 
```

这是项目类

```
public static class Item{
    public final String text;
    public final int icon;
    public Item(String text, Integer icon) {
        this.text = text;
        this.icon = icon;
    }
    @Override
    public String toString() {
        return text;
    }
} 
```

# c# - 数组声明中有逗号是什么意思？例如浮动[,]

> ID：13807493
> 
> 赞同：52
> 
> 时间：2012-12-10T19:08:08.413
> 
> 标签：c#, arrays, declaration

我在学习 C# 时尝试理解一些代码。我什至不明白我什至需要搜索谷歌才能到达这里，但代码如下：

```
float[,] heightAll = terData.GetHeights(0, 0, allWidth, allHeight); 
```

为什么数组声明在括号之间有一个逗号？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-10T19:09:07.043

那将是一个二维数组。您还可以指定更多维度：

[多维数组（C# 编程指南）](http://msdn.microsoft.com/en-us/library/2yd9wwz4.aspx)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-10T19:10:00.617

每个逗号为数组添加一个额外的维度 [,] = 2 维 [,,] = 3 维 ...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T19:09:29.883

该数组是多维的 - 在您的情况下是二维的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-10T19:09:43.567

这意味着它是一个多维数组。

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/aa288453%28v=vs.71%29.aspx)。

# c# - RS232通讯协议三菱FX3G PLC

> ID：13807495
> 
> 赞同：4
> 
> 时间：2012-12-10T19:08:12.327
> 
> 标签：c#, vb6, serial-port, plc

有人知道三菱FX3G PLC的RS232口通讯的通讯协议吗？

我搜索了三菱和谷歌的网站，但找不到要发送的命令的语法以获取 PLC 中特定寄存器的数据。

我发现了命令的以下部分：

*   BR = 位读取
*   BW = 位写入
*   WR = 字读取
*   WW = 字写入

我找不到我应该使用直电缆还是交叉电缆，甚至找不到我应该以哪个波特率进行通信（或其他设置，如数据位、停止位和奇偶校验）

有人对与 FX3G PLC 进行 RS232 通信有任何经验吗？

*   什么是波特率（和其他通信设置）？
*   命令的标题是如何建立的？
*   命令本身是如何建立的？
*   校验和是如何计算的？

（使用哪种编码语言或只是协议手册都没有关系）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T17:15:36.597

看看本手册是否对您没有帮助，[http://www.automationsystemsandcontrols.net.au/PDF%27s%20Mitsubishi/Manuals/FPLC/FX%20SERIES%20USER%27S%20MANUAL%20-%20Data%20Communication%20Edition .pdf](http://www.automationsystemsandcontrols.net.au/PDF%27s%20Mitsubishi/Manuals/FPLC/FX%20SERIES%20USER%27S%20MANUAL%20-%20Data%20Communication%20Edition.pdf)。手册列表也可在[http://www.automationsystemsandcontrols.net.au/Technical%20Mitsubishi.html](http://www.automationsystemsandcontrols.net.au/Technical%20Mitsubishi.html)获得。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T11:11:37.223

[我在这里](https://my.mitsubishi-automation.com/downloads_show.php?portal_id=1&doc_type=man&slang=2&sstr=FX3)找到了所需的文档

默认通信设置为波特率 9600、偶校验、7 个数据位、1 个停止位和无校验和

我将其更改为 19200 的波特率，无奇偶校验，8 个数据位，1 个停止位，并打开校验和：

![通讯参数](../Images/19f4f6edd36c5717caaa3019221475d9.png)

一个小的 VB6 项目：

```
'1 form with :
'    1 mscomm control : name=comFX
'    1 command button : name=cmdSend
'    1 textbox        : name=txtShow   multiline=true
Option Explicit

Private Declare Function GetTickCount Lib "kernel32" () As Long

Private mstrData As String
Private mblnBusy As Boolean

Private Sub Form_Load()
  With App
    Caption = .Title & " " & CStr(.Major) & "." & CStr(.Minor) & "." & CStr(.Revision)
  End With 'App
End Sub

Private Sub Form_Resize()
  Dim sngWidth As Single
  Dim sngTxtHeight As Single
  Dim sngCmdWidth As Single, sngCmdHeight As Single
  sngWidth = ScaleWidth
  sngCmdHeight = 315
  sngTxtHeight = ScaleHeight - sngCmdHeight
  txtShow.Move 0, 0, sngWidth, sngTxtHeight
  cmdSend.Move sngCmdWidth, sngTxtHeight, sngWidth, sngCmdHeight
End Sub

Private Sub cmdSend_Click()
  ReadReg "D8013", 7  'sec,min,hr,day,month,year,dayofweek
  ReadReg "R3310", 10 '10 data registers
End Sub

Private Sub ReadReg(strReg As String, intNr As Integer)
  Dim strCmd As String
  If NotBusy Then
    strCmd = "00FFWR0" & strReg & Right$("00" & Hex$(intNr), 2)
    strCmd = Chr$(5) & strCmd & GetSum(strCmd)
    With comFX
      If .PortOpen = False Then CommOpen
      .Output = strCmd
    End With 'comFX
    mblnBusy = True
  End If
End Sub

Private Sub CommOpen()
  With comFX
    If .PortOpen = True Then .PortOpen = False
    .CommPort = 1
    .Settings = "19200,N,8,1"
    .RThreshold = 1
    .PortOpen = True
  End With 'comFX
End Sub

Private Function NotBusy() As Boolean
  Dim lngTimeout As Long
  Dim blnResult As Boolean
  blnResult = True
  lngTimeout = GetTickCount + 1000 'timeout after being busy for 1 second
  Do While mblnBusy
    DoEvents
    If GetTickCount > lngTimeout Then
      blnResult = False
      Exit Do
    End If
  Loop
  NotBusy = blnResult
End Function

Private Sub comFX_OnComm()
  Dim strInput As String
  Select Case comFX.CommEvent
    Case comEvReceive
      strInput = comFX.Input
      mstrData = mstrData & strInput
      ProcessData
  End Select
End Sub

Private Sub ProcessData()
  'answer : ^02 00FF <data registers 4 characters per reg> ^03
  Dim lngStart As Long, lngEnd As Long
  Dim strHead As String, strSum As String
  Dim strEnd As String
  Dim strData As String
  lngStart = InStr(mstrData, Chr$(2))
  If lngStart > 0 Then
    strEnd = Chr$(3)
    lngEnd = InStr(lngStart, mstrData, strEnd)
    If lngEnd > 0 Then
      strHead = Mid$(mstrData, lngStart + 1, 4)
      If strHead = "00FF" Then
        strData = Mid$(mstrData, lngStart + 1, lngEnd - lngStart)
        strSum = Mid$(mstrData, lngEnd + 1, 2)
        If CheckSum(strData, strSum) Then
          mstrData = Mid$(mstrData, lngEnd + 3)
          ShowData Mid$(strData, 5, Len(strData) - 5)
          mblnBusy = False
        End If
      End If
    End If
  End If
End Sub

Private Function CheckSum(strData As String, strSum As String) As Boolean
  If strSum = GetSum(strData) Then
    CheckSum = True
  Else
    CheckSum = False
  End If
End Function

Private Function GetSum(strCmd As String) As String
  Dim intChar As Integer
  Dim lngSum As Long
  lngSum = 0
  For intChar = 1 To Len(strCmd)
    lngSum = lngSum + Asc(Mid$(strCmd, intChar, 1))
  Next intChar
  GetSum = Right$("00" + Hex$(lngSum), 2)
End Function

Private Sub ShowData(strData As String)
  txtShow.SelText = strData & vbCrLf
End Sub 
```

注意不要太快发送命令。每个 plc 周期一次（在我的情况下为 100 毫秒）似乎是极限。

此代码在 VB6 中，但同样适用于 C# 或任何其他语言。如果你想让我用 C# 做一个例子，请联系我。

# javascript - 在下划线 groupBy 之后加入或合并 json 对象

> ID：13807497
> 
> 赞同：0
> 
> 时间：2012-12-10T19:08:15.390
> 
> 标签：javascript, json, underscore.js

我在我当前的项目中使用 underscore.js，它有一个很好的`_.groupBy`方法。

这将我的数组以这种格式分组。

```
var obj1 ={
  '0':[{ ... json object...},{ ... json object...},{ ... json object...}],
  '1':[{ ... json object...},{ ... json object...},{ ... json object...}],
  '2':[{ ... json object...},{ ... json object...},{ ... json object...}]
}

var obj2 = {
  '0':[{ ... another json object...},{ ...another json object...}],
  '1':[{ ... another json object...},{ ...another json object...}],
  '2':[{ ... another json object...},{ ... another json object...}]
} 
```

现在我想加入/合并/扩展它们......但`_.extend`没有像我预期的那样工作。

我的预期结果是

```
{'0':[{ ... json object...},{ ... json object...},{ ... json object...},{ ... another json object...},{ ...another json object...}],
'1':[{ ... json object...},{ ... json object...},{ ... json object...},{ ... another json object...},{ ...another json object...}],
 '2':[{ ... json object...},{ ... json object...},{ ... json object...},{ ... another json object...},{ ... another json object...}]} 
```

基本上我需要根据 json 键来扩展数组`obj1`，`obj2`即使内部 json 对象不同。

基本上需要像json对象的sql连接操作......

所以任何帮助都会很棒......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T22:36:59.807

好吧，因为没有出现 underscore.js 特定的答案，所以这是一个通用的 JavaScript 答案：

要合并`obj2`到`obj1`，遍历`obj2`的条目并将这些数组附加到 上的等效数组`obj1`，如下所示：

```
var key, a1, a2;
for (key in obj2) {
  if (obj2.hasOwnProperty(key)) {
    a2 = obj2[key];
    a1 = obj1[key];
    if (a1) {
      a1.push.apply(a1, a2); // Tricky, see below
    }
    else {
      obj1[key] = a2;
    }
  }
} 
```

这合并`obj2`到，就地`obj1`修改的数组。如果相应的槽中没有数组`obj1`，它会重用`obj2`的数组。`obj1`

[实例](http://jsbin.com/ujeyuv/1)| [来源](http://jsbin.com/ujeyuv/1/edit)

关于那个“棘手”的位：

```
a1.push.apply(a1, a2); 
```

这样做是将元素从*追加*`a2`到`a1`. [我的博客上的详细信息](http://blog.niftysnippets.org/2011/05/appending-to-array.html)，但基本上，[`Array#push`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.4.4.7)将元素添加到数组的末尾，与您指定的参数一样多（例如，`a.push(1, 2, 3)`推送`1`、、`2`和`3`到数组上），并[`Function#apply`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.3.4.3)调用指定使用什么的函数`this`（第一个参数）以及作为数组（第二个参数）传递给它的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-26T15:33:11.840

我需要做类似的事情。加入两个对象，但确保两个 groupby 字段具有相同的名称，`san`. 我需要`score`从`some_scores`. 需要 _.each 来创建外连接。Map 使用您需要的名称/值创建最终对象：

```
 var x = _.chain(moves)
            .union(some_scores)    
            .groupBy('san')
            .each(function(o){ o.push({score:''}); })
            .map(function(o){return {san:o[0].san, to:o[0].to, score:o[1].score  }; })
            .value(); 
```

# python - 如何在linux中读取python中进程的内存？

> ID：13807498
> 
> 赞同：7
> 
> 时间：2012-12-10T19:08:20.147
> 
> 标签：python, linux, ptrace

我正在尝试使用 python 和 python ptrace 来读取外部进程的内存。我需要完全在 python 中工作，我一直在尝试读取和打印 linux 中进程的内存。

因此，例如，我尝试了以下代码，它不断给我 IO 错误：

```
proc_mem = open("/proc/%i/mem" % process.pid, "r")
print proc_mem.read()
proc_mem.close() 
```

大多数情况下，我只想反复转储进程的内存并寻找随时间的变化。如果这是正确的方法，那么我的问题是什么？或者有没有更合适的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:40:19.210

从 python 调用 shell 命令 - 子进程模块

```
import subprocess

# ps -ux | grep 1842 (Assuming 1842 is the process id. replace with process id you get)

p1 = subprocess.Popen(["ps", "-ux"], stdout=subprocess.PIPE)
p2 = subprocess.Popen(["grep", "1842"], stdin=p1.stdout, stdout=subprocess.PIPE)
p1.stdout.close()  # Allow p1 to receive a SIGPIPE if p2 exits.
output = p2.communicate()[0]
print output 
```

并通过输出解析以查看其内存利用率

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:56:02.823

> 大多数情况下，我只想反复转储进程的内存并寻找随时间的变化。如果这是正确的方法，那么我的问题是什么？或者有没有更合适的方法来做到这一点？

您可能对 gdb 的[反向调试](https://stackoverflow.com/questions/1470434/how-does-reverse-debugging-work)感兴趣，它记录了进程内存的所有更改。这是[教程](https://sourceware.org/gdb/wiki/ProcessRecord/Tutorial)（[谷歌缓存](https://google.com/#q=cache:sourceware.org/gdb/wiki/ProcessRecord/Tutorial)）。

如果您想使用原始录音工具，还有[Robert O'Callahan](http://robert.ocallahan.org/)的[Chronicle](https://code.google.com/p/chronicle-recorder/) / [Chronomancer](https://code.google.com/p/chronomancer/) [作品。](https://lwn.net/Articles/232769/)

# xml - xpath 在属性不存在时按属性选择

> ID：13807499
> 
> 赞同：56
> 
> 时间：2012-12-10T19:08:36.743
> 
> 标签：xml, xslt, xpath

简短的问题：我想选择所有不匹配属性（@type！='x'）但属性不存在（??）的节点。目前，我没有得到任何回报，因为其他节点根本没有属性。

背景：我有一些 XML。请注意，一个有 type="feature" 但所有其他人都没有“类型”属性。

```
<image type="feature"><description>X</description><url>media/designer_glass_tile_04.jpg</url><height></height><width/></image>
<image><description>Designer Glass 05</description><url>media/designer_glass_tile_05.jpg</url><height></height><width/></image>
<image><description>Designer Glass 06</description><url>media/designer_glass_tile_06.jpg</url><height></height><width/></image>
<image><description>Designer Glass 07</description><url>media/designer_glass_tile_07.jpg</url><height></height><width/></image>
<image><description>Designer Glass 08</description><url>media/designer_glass_tile_08.jpg</url><height></height><width/></image> 
```

和 XSL 样式：

```
 <div id="gallery">
            <div id="feature" >
                <xsl:apply-templates select="image[@type='feature']"/>
            </div>
            <div id="thumbs">
                <xsl:apply-templates select="image[@type!='feature']"/>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-12-10T19:30:30.080

以下代码将选择类型属性不存在的所有节点：

```
select="image[not(@type)]" 
```

在您的代码中添加此逻辑。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-10T19:55:24.280

尝试在谓词中使用`not()`而不是...`!=`

```
 <div id="gallery">
        <div id="feature" >
            <xsl:apply-templates select="image[@type='feature']"/>
        </div>
        <div id="thumbs">
            <xsl:apply-templates select="image[not(@type='feature')]"/>
        </div>
    </div> 
```

# c - 传递字符串数组 C

> ID：13807505
> 
> 赞同：1
> 
> 时间：2012-12-10T19:08:54.963
> 
> 标签：c, arrays, string, pointers

我在函数中有以下代码

```
char MenuOptions[7][200];
strcpy(MenuOptions[0], "Create New / Modify Existing Customer");
strcpy(MenuOptions[1], "Create New / Modify Existing Product");
strcpy(MenuOptions[2], "List All customers");
strcpy(MenuOptions[3], "List All Products");
strcpy(MenuOptions[4], "Batch Update of New Stock");
strcpy(MenuOptions[5], "Create Customer Order");
strcpy(MenuOptions[6], "View Last Order for Customer");
switch (displayMenu("Main Menu", MenuOptions, 7, TRUE)) {
etc.... 
```

和

```
char displayMenu(char *name, char *options[], int menuLength,
    enBoolean QuitEnabled) {

    int i;
    printf("%s: \n", name);
    for (i = 0; i < menuLength; i++) {
        printf("\t %d %s.\n", (i + 1), options[i]);
    }
    if (QuitEnabled == TRUE)
        printf("\t Q. Quit\n");
etc 
```

但是，一旦输入了 displayMenu 方法，MenuOptions 数组似乎就从内存中丢失了。我尝试通过 eclipse 中的表达式窗口查看 options[i] 是什么，它说它“超出范围”作为一个值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:16:25.493

`options`in的类型`displayMenu`必须是`char (*options)[200]`. 不是`char *options[]`。

除非它是`sizeof`. `_Alignof`，或一元运算`&`符，或者是用于在声明中初始化数组的字符串文字，“N-element array of”类型的*表达式*`T`将被转换（“decay”）为“pointer to `T`”类型的表达式。在这种情况下，`MenuOptions`是 200 个元素数组的 7 个元素数组`char`；根据上面的规则，它将衰减为“指向 200 元素数组的指针”类型的表达式`char`。

如所写，类型`options`为`char **`; `options[i]`为您提供指向数组基数之后的`i`第 ' 个指针，而不是' 的第*200 个元素数组*。 `char``i`*`char`*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:20:16.513

首先，在编译器中打开警告选项。您的编译器应该警告您存在类型不匹配。

`MenuOptions`是一个由 200 个数组组成的七个数组`char`。当`displayMenu`被调用并`MenuOptions`作为参数传递时，`MenuOptions`它会自动从数组转换为指向 200 个字符的七个数组中的第一个的指针。

在`displayMenu`中，`options`参数用 声明`char *options[]`。这意味着这`options`是一个指向 的指针数组`char`。在函数参数中，`[]`是特殊的；它建议将为此参数传递一个数组，但该数组实际上是通过其第一个参数的地址传递的。因此，这个声明说这`options`是一个指向某个数量的指针中的第一个的指针`char`。

因此，您正在传递一个指向 200 个字符的七个数组中的第一个的指针，但该函数希望接收一个指向`char`.

解决此问题的一种方法是更改​​ to 的`options`声明`char (*options)[200]`。这表示这`options`是一个指向 200 个字符的（第一个）数组的指针。

修复它的更好方法可能是更改 MenuOptions：

```
static const char *MenuOptions[] =
{
    "Create New / Modify Existing Customer",
    "Create New / Modify Existing Product",
    "List All customers",
    "List All Products",
    "Batch Update of New Stock",
    "Create Customer Order",
    "View Last Order for Customer",
}; 
```

（您不需要括号中的“7”，因为编译器会为您计算字符串。）

那么您不需要更改 的声明`options`，除了我添加了`const`：

```
char displayMenu(char *name, const char *options[], int menuLength,
    enBoolean QuitEnabled) {… 
```

现在：

*   `MenuOptions`是一个由七个指向字符串的指针组成的数组（char 数组）。它作为指向字符串指针的指针传递，并且`options`是指向字符串指针的指针，因此类型匹配。
*   `MenuOptions`不会占用比所需更多的空间。之前，它被定义为每个字符串 200 个字符。现在，每个字符串只占用它需要的空间（加上末尾的空字符和指向`MenuOptions`数组中字符串的指针）。
*   `const`添加以避免意外更改字符串。
*   `MenuOptions`被声明`static`，因此它在编译时被初始化，并且您不需要在运行时将字符串复制到其中。

最后，您可以将调用中的“7”替换`displayMenu`为`sizeof MenuOptions / sizeof *MenuOptions`。这将数组的大小除以数组元素的大小，得到数组中元素的数量。这比硬编码常量更可取，因为它消除了有人可能在不更改硬编码常量的情况下更改数组大小的可能性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T19:17:17.800

一种选择：

```
char displayMenu(char *name, char options[][200], int menuLength, enBoolean QuitEnabled) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T19:18:36.953

更改您的输入类型：

```
char displayMenu(char *name, char *options[], ... 
```

反映它是一个多维数组：

```
char displayMenu(char *name, char options[][200], ... 
```

其他可行的选项：

```
char displayMenu(char *name, char options[7][200], ...

char displayMenu(char *name, char (*options)[200], ... 
```

要点是当传递多维数组时，第一个维度之后的所有维度也需要传递。

# javascript - 如何针对影响另一个元素的悬停元素优化 jQuery 代码

> ID：13807508
> 
> 赞同：2
> 
> 时间：2012-12-10T19:09:07.850
> 
> 标签：javascript, jquery, css

我在这里拿起了一些代码（不记得链接），但我想看看它是否可以优化。我有一张桌子，第一行会有一张图片。在第二行中，当您将鼠标悬停在某些单元格上时，顶部的图像会发生变化。我的 JSFiddle 现在正在使用颜色。稍后我将交换图像。

这些行现在只有 3 个单元格，但是一旦我弄清楚了，它们可能会包含 12 个或单元格，所以当悬停在所有这些单元格上时，我需要显示不同的图像。

该代码有效，但我认为如果我得到多达 12 个单元格/框，它不会非常有效。如何优化这段代码？

```
// box 1
$('#whybox1').mouseover(function(){
    $('#whybox1').css('background-color', '#F7FE2E');
    $('#animalbox').css('background-color', '#F7FE2E');
});
$('#whybox1').mouseout(function(){
    $('#whybox1').css('background-color', '#d1e6f8');
    $('#animalbox').css('background-color', '#d1e6f8');
}); 
```

顺便说一句，我已经看到像这样使用 n:child 的实现，但是在我必须支持的旧浏览器上它会被破坏。

[http://jsfiddle.net/ccamcho/WfJvh/](http://jsfiddle.net/ccamacho/WfJvh/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:37:08.463

也许是这样的

[http://jsfiddle.net/WfJvh/5/](http://jsfiddle.net/WfJvh/5/)

这只是这样做的一种方式。这个想法是您添加`td`一些属性，该属性将保存一些信息（在本例中为颜色）并在悬停时使用该信息。

**Javascript：**

```
$(window).load(function(){
   $(document).ready(function(){
       $('table td').mouseover(function(){
           var color = $(this).attr('data-color');   
           $(this).css('background-color', color);
           $('#animalbox').css('background-color', color);
       });
       $('table td').mouseout(function(){
           $(this).css('background-color', '#d1e6f8');
           $('#animalbox').css('background-color', '#d1e6f8');
       });   
   });
});​ 
```

**html:**

```
<table>
<tr>
<td colspan="3" id="animalbox">Animal Box</td>
</tr>
<tr>
<td id="whybox1" data-color="red">1</td>
<td id="whybox2" data-color="blue">2</td>
<td id="whybox3" data-color="green">3</td>
</tr>
</table>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:30:50.707

```
<table>
<tr>
<td colspan="3" id="animalbox">Animal Box</td>
</tr>
<tr id="boxes">
<td class="box" data-hoverColor="#F7FE2E" id="whybox1">1</td>
<td class="box" data-hoverColor="#F6CEE3" id="whybox2">2</td>
<td class="box" data-hoverColor="#81F7BE" id="whybox3">3</td>
</tr>
</table>​

$('#boxes').on('mouseenter mouseleave', '.box', function(e) {
if (e.type === 'mouseenter') {
    console.log()
    $(this).css('background-color', $(this).data('hoverColor'));
    $('#animalbox').css('background-color', $(this).data('hoverColor'));
}
else {
    $(this).css('background-color', '#d1e6f8');
    $('#animalbox').css('background-color', '#d1e6f8');
}
}); 
```

JSfiddle：http: [//jsfiddle.net/WfJvh/4/](http://jsfiddle.net/WfJvh/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T19:33:10.103

您是否有理由需要使用`mouseover`and`mouseout`而不是 just `hover`？如果您不必担心 IE6，那么您可以`:hover`在 CSS 中使用来交换样式。

```
#whybox1:hover {
    background-color: #d1e6f8;
}
#whybox1:hover {
    background-color: #F7FE2E;
} 
```

如果您需要动态向表格添加图像并且它不能是背景图像，那么您需要使用 JS。我会建议这样的事情：

```
$('#whybox1').hover(function() {
    // this happens when you hover over the element
    $(this).addClass('hover');
},
function() {
    // this happens when you're no longer hovering over the element
    $(this).removeClass('hover');
}); 
```

只需添加一个类并在应用该类时修改元素样式，然后在悬停结束时删除该类。

即使您决定使用鼠标悬停/移出，它也不是低效的 - 是什么让您这么认为？除非您将这些事件附加到数百个（可能是数千个）元素，否则您不会看到性能问题。不管你怎么做，12 个表格单元格就可以了。如果有可能，我建议使用 CSS。

# grails - 如何在启动时禁用 grails 加载默认加载的某些插件？

> ID：13807509
> 
> 赞同：3
> 
> 时间：2012-12-10T19:09:09.777
> 
> 标签：grails, plugins, war

我不知道 grails 在启动时会加载一组默认插件。这在使用 run-app 以开发模式运行时并不明显。但是当我构建一个战争并将其放入应用服务器时，内存使用量变得非常高，我看到以下日志片段：

`31767 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [i18n] with version [2.1.0] loaded successfully 31770 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [logging] with version [2.1.0] loaded successfully 31771 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [core] with version [2.1.0] loaded successfully 32039 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [groovyPages] with version [2.1.0] loaded successfully 32053 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [urlMappings] with version [2.1.0] loaded successfully 32060 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [controllers] with version [2.1.0] loaded successfully 32076 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [domainClass] with version [2.1.0] loaded successfully 32079 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [dataSource] with version [2.1.0] loaded successfully 32547 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [cacheHeaders] with version [1.1.5] loaded successfully 32548 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [redis] with version [1.3.2] loaded successfully 32549 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [resources] with version [1.1.6] loaded successfully 32549 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [services] with version [2.1.0] loaded successfully 32551 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [servlets] with version [2.1.0] loaded successfully 32561 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [mimeTypes] with version [2.1.0] loaded successfully 32571 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [codecs] with version [2.1.0] loaded successfully 32579 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [filters] with version [2.1.0] loaded successfully 32579 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [validation] with version [2.1.0] loaded successfully 32583 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [scaffolding] with version [2.1.0] loaded successfully 32598 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [converters] with version [2.1.0] loaded successfully 32664 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [lesscssResources] with version [1.3.0] loaded successfully 32676 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [cachedResources] with version [1.0] loaded successfully 32684 [main] INFO org.codehaus.groovy.grails.plugins.DefaultGrailsPluginManager - Grails plug-in [zippedResources] with version [1.0] loaded successfully`

我如何禁用某些插件的加载，因为我不需要它们？比如说，脚手架插件和 domainClass 插件（这是一个没有 DB 连接的 HTML 5 应用程序）

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:02:37.453

因此，在通过另一种沟通方式与您联系后，我确认您希望删除：

1.  域类
2.  数据源
3.  验证
4.  脚手架

让我们从数据源开始。根据[这个线程](http://grails.1312388.n4.nabble.com/grails-app-with-no-datasource-td1335580.html)和[这个后续 JIRA](http://jira.grails.org/browse/GRAILS-1822)，可以简单地删除 DataSource.groovy （或删除 dataSource {} 的内容）以防止插件触发，但 Grails 项目负责人[Graeme Rocher](https://twitter.com/graemerocher)甚至表示如果您在 Web 服务之外没有持久层，您仍然需要一个内存数据源才能使应用程序正常运行。或者至少通过测试。

据我所知，删除不需要的插件的唯一方法是使用 grails.war.resources 回调（即，无法使用 Grail 内置的依赖管理功能来处理它）。按照[此链接](http://grails.1312388.n4.nabble.com/Remove-some-plugins-jar-td1347798.html)获取有关如何使用回调删除任意 jar 的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T23:29:03.373

这些插件应该在您的 application.properties 或 BuildConfig.groovy 中，具体取决于您如何设置插件。其中一些插件可能是您安装的插件的依赖项。

看起来你有资源插件以及一些插件来帮助一般的资源。（压缩、缓存、lesscss、cacheHeaders ...）您可能想要所有这些插件。

你也有 redis 你看到你没有在生产中使用的插件吗？如果你是，你总是可以有条件地在 BuildConfig 中的 plugins 闭包中加载它们，我们执行以下操作：

```
if (Environment.current in [Environment.DEVELOPMENT, Environment.TEST]) {
  compile ":build-test-data:2.0.2"
} 
```

您可能需要您看到的那些插件，因为它们可能内置在 grails 中。grails 的基础是相当大的内存占用。您可以有条件地添加您需要的插件，但您不能折腾所有东西。

# objective-c - NSString 到 uint8_t 不匹配

> ID：13807510
> 
> 赞同：0
> 
> 时间：2012-12-10T19:09:13.397
> 
> 标签：objective-c

我正在尝试将 NSString 转换为 uint8_t。我遇到的问题是 NSString 和生成的 uint8_t 变量不匹配。这是一些示例代码：

```
NSLog(@"Key now: %@", key);
NSData* keyData = [key dataUsingEncoding:NSUTF8StringEncoding];

const uint8_t *plainBuffer = (const uint8_t*)[data bytes];
size_t plainBufferSize = strlen((char *) plainBuffer);
NSLog(@"Plain buffer: %s", plainBuffer);

NSData* testData = [[NSData alloc] initWithBytes: plainBuffer length:plainBufferSize];
NSString* testString = [[NSString alloc] initWithData: testData encoding:   NSUTF8StringEncoding];
NSLog(@"Test string: %@", testString); 
```

示例输出：

```
Key now: 9iIWBpf5R6yu5pJ93l218RsMdWBLidXt
Plain buffer: 9iIWBpf5R6yu5pJ93l218RsMdWBLidXtMdWBLidXt
Test string: 9iIWBpf5R6yu5pJ93l218RsMdWBLidXtMdWBLidXt 
```

显然它的 NSData -> uint8_t 步骤出错了，但我不知道为什么！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:14:56.597

您`strlen()`用于获取`NSData*`. 那是行不通的。`NSData*`不是 NUL 终止的。所以你最终会得到垃圾。

不要使用`strlen()`. 只需直接询问`NSData*`其尺寸即可。

或者，根本不要使用`NSData*`，只要求`[key UTF8String]`. 这交还了一个以 NUL 结尾的`const char *`.

# jquery - 有没有办法用显示和隐藏的同一 div 中的图像显示/隐藏切换

> ID：13807513
> 
> 赞同：0
> 
> 时间：2012-12-10T19:09:31.197
> 
> 标签：jquery, toggle

我正在显示和隐藏一个包含文本的 div，以便能够看到后面的背景图像。在让我的 div 稍微移动并保持我的 div 在侧面可见方面，我得到了很大的帮助

```
$("#welcome").toggle(
   function() {
    var left = $(this).outerWidth() - 10 + "px";

    $(this).animate({ "margin-left": "+=" + left }, 500);
  $(this).onClick() },
   function() {
    var left = $(this).outerWidth() - 10 + "px";

    $(this).animate({ "margin-left": "-=" + left }, 500);
   }
 ); 
```

现在我希望我在 html 中的图像更改形式隐藏以显示...

```
<div id="welcomepicture"> 
<div id="welcome">
 Welcome  some really meaningful text here!

  <p class="arrowfull"><a href="#"> <img class="img-swap"  src="http://housing.ucsc.edu/guide/css/images/hide_off.png" alt="Click to view full image" title="Click to view full image" height="42" width="17"> </a></p> 
```

我不确定是否在 javascript 中放置 .onClick 图像交换？还是我写一个新的var？jquery 和 javascript 新手，感谢您的帮助

[http://jsfiddle.net/BeccaAlley/UfsS8/4/](http://jsfiddle.net/BeccaAlley/UfsS8/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:46:39.367

您可以在切换功能中更改图像的来源。最好的方法是将你的表演和你的隐藏放在一个图像中，并使用背景位置在它们之间移动。这样，您将只加载 1 个图像而不是 2 个。

```
$("#welcome").toggle(
    function() {
        var left = $(this).outerWidth() - 10 + "px";

        $(this).animate({ "margin-left": "+=" + left }, 500);
        $('.img-swap').attr('src','show.jpg');
    },
    function() {
        var left = $(this).outerWidth() - 10 + "px";

        $(this).animate({ "margin-left": "-=" + left }, 500);
        $('.img-swap').attr('src','hide.jpg');
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:29:31.110

如果您希望在单击“单击查看完整图像”时显示图像，您可以将以下代码添加到 js 文件的底部：

```
$('.img-swap').click(function(){
    $('#imageID').show();
}); 
```

在此代码中，您可以将 #imageID 更改为您要显示的图像的 id 的 id。如果您使用类来引用图像而不是 id，那么您当然会使用“。” 代替 '＃'。让我知道这是否有帮助，或者您是否正在寻找一些不同的东西。

# python - 在 R 或 Python 中列出具有相同值的 CSV 单元格？

> ID：13807514
> 
> 赞同：0
> 
> 时间：2012-12-10T19:09:34.563
> 
> 标签：python, r, excel

我有一个包含机构名称和地址的 CSV。如果我想要一串具有相同地址（特别是相同的邮政编码）的机构名称，我该如何在 R 或 Python 中做到这一点？无论哪种方式最有效都是可取的，但我仍在学习这两种方式。Google Refine 已经给了我每个邮政编码集群的数量，但我只需要知道哪些机构对应于这些邮政编码。

PS。是的，我知道邮政编码不好依赖；这样做的目的是为了说明这一点。

示例输入数据：

![在此处输入图像描述](../Images/01726acdfde7f8c7b729a3d226c850e8.png)

最终输出（稍后与 shapefile 合并）：

![在此处输入图像描述](../Images/75bfd602457f7d980b514d5b1feb8bcb.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T19:13:29.240

您应该能够构建一个字典：

```
import csv

from collections import defaultdict

agencies = defaultdict(list)

with open('file.csv', 'r') as handle:
    reader = csv.reader(handle)

    for row in reader:
        agencies[row[2]].append(row[0]) 
```

现在，`agencies`包含邮政编码到机构的映射。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T20:34:34.277

这是使用模拟数据的 R 解决方案的粗略草图：

```
set.seed(123)
dat <- data.frame(agency = sample(letters[1:15],100,replace = TRUE),
                  zipcode = sample(15,100,replace = TRUE))

head(dat)

#A base R solution
aggregate(dat$agency,
          by = list(dat$zipcode),
          FUN = function(x){paste(x,collapse = ",")})

#Or using the populat plyr package
library(plyr)
ddply(dat,
      .(zipcode),
      summarise,
      agencies = paste(agency,collapse = ",")) 
```

数据的屏幕截图通常不是最有用的展示方式。一个完整的、最小的可重复示例将允许更完整的答案，这些答案更直接有用。（并减少您提出的后续问题。）

# ruby-on-rails - 如何为主要依赖于经过身份验证的请求的服务构建 Web 应用程序和 API？

> ID：13807522
> 
> 赞同：1
> 
> 时间：2012-12-10T19:10:04.970
> 
> 标签：ruby-on-rails, json, api, authentication, oauth

我正在尝试建立一个视频协作平台。我希望以这样一种方式设计它，即有一个 API，我的网络应用程序就像一个“第三方”应用程序。

我认为它的工作方式是三个主要组件..

*   用 Ruby 编写的 JSON API
*   用 Ruby/Rails 编写的 Web 应用程序
*   Coffeescript 中的前端应用

我希望能够对“项目”等资源提出经过身份验证的请求

截至目前，我想象前端应用程序与 Rails 应用程序对话以获取经过身份验证的请求，然后前端应用程序使用该经过身份验证的请求来调用 API。

我对这个架构有几个问题。

1.  如果我打算稍后打开 API，我应该使用 OAuth 吗？
2.  如果是这样，请求流会是什么样子？

我只是问这些问题，因为 OAuth 看起来是标准，我只能在验证第三方应用程序以访问另一个应用程序中的资源方面看到它。

我想我主要是在寻找一些指导，因为我可以构建应用程序，但我不是安全专家。谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T21:22:43.547

**我可以告诉你我现在在我的项目中正在做什么：**

1.  导轨 API (JSON)；您可以使用 rails api gem、grape 或完整的 rails 框架。
2.  使用 AngularJs 的单页 web 应用程序（它可以是任何你觉得舒服的东西，比如骨干网、emberjs 等）

**我如何验证用户：**

1.  用户使用用户名和密码发布到**/login**
2.  Rails 部分对用户进行身份验证（通过用户名和密码），创建访问令牌（将其保存在表中，具有过期时间，例如 30 分钟）并将其返回给用户。
3.  来自客户端的每个请求（angularjs 部分）都使用 Token 身份验证标头传递，如下所示：**Authorization: Token token=[the token goes here]**
4.  rails api 用于令牌获取关联用户
5.  如果令牌已过期或无效，则返回 401（未授权）；一旦 angularjs 部分拦截了 401，它会将用户重定向到登录页面。
6.  如果请求通过身份验证，过期时间将重置为“现在”，所以我所说的 30 分钟就像 30 分钟不活动

您可以使用访问令牌做更多事情 - 您可以扮演管理员、用户等角色，并限制用户对资源的访问。

# jquery - 使用 jquery 加载 json 文件

> ID：13807523
> 
> 赞同：0
> 
> 时间：2012-12-10T19:10:07.047
> 
> 标签：jquery, html, json

这是我的jQuery代码

```
$("document").ready(function() {
        $.getJSON("http://bluewingholidays.com/results.json", function(data) {
            $("#div-my-table").text("<table>");
            $.each(data, function(i, item) {
                $("#div-my-table").append("<tr><td>" + item.EncoderName + "</td><td>" + item.EncoderStatus + "</td></tr>");
            });
            $("#div-my-table").append("</table>");
        });
    }); 
```

我想使用 html 表格将数据显示到网络中

```
<table id="div-my-table">
    <tr><td></td></tr>
     <tr><td></td></tr>
     <tr><td></td></tr>
</table> 
```

但什么也没发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:13:02.597

我立即看到的一个问题是您需要更改`$("document")`为`$(document)`. 您想传递文档对象而不是选择器。

```
$(document).ready(function(){... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:21:43.323

`append`不会`</table>`在 jQuery 中附加一些任意文本（尤其是 not ）！它附加了一个元素......您应该使用这样的代码：

```
// Content will contain the HTML code of your new table
var content = "";

$.each(data, function(i, item) {
    content += "<tr><td>" + item.EncoderName + "</td><td>" + item.EncoderStatus + "</td></tr>";
});   

// Set the HTML of your table to this new content
$("#div-my-table").html(content); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T19:31:34.437

这里有很多不同的问题。

首先，`$("document").ready(`应该是`$(document).ready(`。丢失引号。您想传递`document`对象，而不是选择器。

其次，如果此代码未在`bluewingholidays.com`. 这就是所谓的[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。

第三，这不是在 jQuery 中添加元素的方式。（注意：`.text`用于更改元素的文本，如果您将其发送为 HTML，它将被转义。）

当您在 jQuery 中附加 HTML 时，您不会先附加打开标记，然后附加关闭标记。jQuery 希望您发送完整的 HTML，而不是片段。

```
$(document).ready(function() {
    // This will only work if this code is on bluewingholidays.com
    $.getJSON("http://bluewingholidays.com/results.json", function(data) {
        $("#div-my-table").empty(); // this is already a table, so let's empty it
        $.each(data, function(i, item) {
            // You're appending HTML elements to other HTML elements
            // You are not appending text in the way you think
            $("#div-my-table").append("<tr><td>" + item.EncoderName + "</td><td>" + item.EncoderStatus + "</td></tr>");
        });
        // You append HTML elements, not strings, so you don't need this line
        //$("#div-my-table").append("</table>");
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T20:12:50.543

我假设您的表已经存在，所以这应该有效：

```
<table id="div-my-table">    </table> 
```

并在您的脚本处理返回的 JSON：

```
$.each(data.Properties, function(i, item) {
    $("#div-my-table").append("<tr><td>" + item.id + ":" + item.title +  "</td><td>" + item.price + "</td></tr>");
}); 
```

# plot - 绘制分位数回归线

> ID：13807527
> 
> 赞同：5
> 
> 时间：2012-12-10T19:10:13.983
> 
> 标签：plot, regression, stata, quantile

在Stata中，是否可以绘制分位数回归线？我知道可以将标准 OLS 回归线添加到散点图中，但我不清楚如何添加其他类型的回归线。

如果那不可能，是否可以绘制一条我以 mx+b 格式指定的线？然后我可以从分位数回归输出中获取斜率和截距项并手动绘制它们。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T15:17:24.873

是的。具体来说，您可以在模型拟合后保存拟合值，然后将这些预测值绘制为额外变量。通常，`twoway function`允许在给定公式的情况下绘制直线和曲线。鉴于第一种方法，我不会说明第二种方法。

```
 . sysuse auto
(1978 Automobile Data)

. gen gpm = 1/mpg

. qreg gpm weight

. predict predicted
(option xb assumed; fitted values)

. scatter gpm weight || line predicted weight, sort ytitle("1 / `: var label mpg'") legend(off) 

```

# javascript - 如何在 IE 中查看 JavaScript/JQuery 代码的错误消息？

> ID：13807532
> 
> 赞同：0
> 
> 时间：2012-12-10T19:10:51.590
> 
> 标签：javascript, jquery, internet-explorer, cross-browser

我是 javascript 新手，并且一直在工作以查看如何在 IE 上修复此错误：这是我昨天在这里提出的问题： [如何修复此 jquery 函数以在 IE 中工作？](https://stackoverflow.com/questions/13793717/how-to-fix-this-jquery-function-to-work-in-ie#comment18972102_13793717)

花了 20 多个小时后，我仍然不知道为什么它不能正确呈现我的部分页面。

至少我认为我可以找到一种方法来获取错误，以便我可以修复它们或为 IE 做一个单独的 javascript 文件，但没有运气。

如何查看脚本的错误消息？

我使用 F12 查看开发者控制台，但那里没有帮助，它甚至不会告诉我出了什么问题。

我正在使用 IE 8 和 9。

我知道这可能有很多问题，我提前感谢您的耐心帮助我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:20:18.410

您有无效的 HTML，包括该`head`部分中的许多不可见字符，这也阻止了[W3C HTML 验证器](http://validator.w3.org/)通过最初的几个错误。

当我将您的源代码复制到我的文本编辑器中时，我发现了一堆无效的不可见字符。您是否从网页之类的地方剪切/粘贴了 JavaScript？隐形人只出现在您自定义的书面脚本的前面，`<head>`而其他任何地方都没有。这当然可以解释很多，包括有关放错`</head>`标签的验证错误。返回编辑器并删除整个`<head></head>`部分中每一行的缩进，然后从头开始重新缩进每一行。

我还看到一个无效的结束标签，`</label6>`.

删除不可见字符，修复无效的 HTML，看看 IE 做了什么。

* * *

继续前进，给自己一个强大的文本编辑器，它可以让您看到不可见的字符，以便您可以删除它们并根据需要正确缩进。否则，我建议重新输入您的代码，而不是剪切和粘贴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:23:16.060

对于 JavaScript 错误，最好查看“控制台”选项卡以获取记录。

如果 IE 没有显示任何内容，也许您可​​以尝试使用 FireBug Lite，在之后添加以下脚本`<head>`（是的，把它作为第一件事，所以它首先加载而不是其他任何东西）。

`<script type="text/javascript" src="https://getfirebug.com/firebug-lite.js"></script>`

在旁注中，也许不是 JS 问题，是的关于在本地运行代码的问题。IE 有一些主要阻止客户端代码运行的策略。（还记得那些烦人的 ActiveX 提示吗？）。检查设置上的 Intranet 配置。

# sql - 从日志表中获取用户使用应用程序的持续时间

> ID：13807534
> 
> 赞同：0
> 
> 时间：2012-12-10T19:10:53.863
> 
> 标签：sql, sql-server, stored-procedures

我有一张表，我在其中记录登录/注销。架构和示例数据：[http ://sqlfiddle.com/#!2/e1b35/1](http://sqlfiddle.com/#!2/e1b35/1)

我需要创建存储过程，它将打印用户和日期的（注销登录）时间总和（用户在日期使用应用程序的持续时间）。在列类型中，I 代表登录和 O 注销。

输入参数：@username、@date。输出：时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:38:40.593

您需要识别彼此相关的所有登录组。我这样做的方法是找到与登录相关的注销。您正在处理日志数据，因此如果有多个登录但没有注销，请不要感到惊讶。

```
select l.*,
       (select min(l2.time) from logs l2 where l2.username = l.username and l2.type = 'O' and l2.time > l.time
       ) as logoutTime
from logs l
where l.type = 'I' 
```

现在，您可以使用用户名和 LogoutTime 作为一对聚合来获得您想要的：

```
select username, logoutTime, min(time) as StartTime, logouttime as EndTime,
       datediff(s, min(time), logoutTime) as TimeInSeconds
from (select l.*,
             (select min(l2.time) from logs l2 where l2.username = l.username and l2.type = 'O' and l2.time > l.time
             ) as logoutTime
      from logs l
      where l.type = 'I'
     ) l
group by username, logoutTime 
```

请注意，您将 SQL Server 指定为标记，但 SQL Fiddle 用于 MySQL；数据库中的日期函数往往不同。

而且，如果您使用的是 SQL Server 2012，还有一种更简单的方法。如果是这种情况，您应该指定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:02:38.057

这是 Gordon Linoff 的解决方案，修改后不包括最外层的聚合，并使用更清晰的别名，IMO

```
select username,time_in,time_out_min,
       datediff(s, time_in, time_out_min) as TimeInSeconds
from (
select i.username, i.time as time_in,
       (select min(o.time) as min_time_out
        from logs o 
        where o.username = i.username and 
        o.type = 'O' and 
        o.time > i.time
       ) as time_out_min
from logs i
where i.type = 'I'
  ) d; 
```

# php - PHP从URL抓取数据并插入数据库不起作用 - 语法错误

> ID：13807535
> 
> 赞同：0
> 
> 时间：2012-12-10T19:11:02.163
> 
> 标签：php, mysql

为班级做一个项目，但我似乎无法让它工作：

```
$account = $_GET['account'];
mysql_query("INSERT INTO my_bank (Account) VALUES ('"$accounts"')"); 
```

如果我将第二行更改为：

`mysql_query("INSERT INTO my_bank (Account) VALUES ('TEST')");`

然后它工作。我猜这是引用的问题，但我一直无法找到有效的方法。关于报价应该如何工作的任何保证后备？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:14:45.487

除了 Marc B 的回答之外，您还在 mySQL 语句中调用了错误的变量：

```
$account = $_GET['account'];
mysql_query("INSERT INTO my_bank (Account) VALUES ('"$accounts"')"); 
```

注意在你的声明`$account`中被定义和你的调用`$accounts`（注意's'）。

它应该是：

```
$account = $_GET['account'];
mysql_query("INSERT INTO my_bank (Account) VALUES ('$account')"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T19:12:27.120

基本的 PHP 语法：

```
mysql_query("INSERT INTO my_bank (Account) VALUES ('" . $accounts . "')");
or
mysql_query("INSERT INTO my_bank (Account) VALUES ('$accounts')"); 
```

并且由于您刚刚开始使用 PHP，因此您应该注意[SQL 注入攻击](http://bobby-tables.com)。添加一些攻击缓解代码（例如`mysql_real_escape_string()`）和一些评论说你为什么使用 m_r_e_s() 可能会从你的教授那里获得一些奖励积分。

# cuda - CUDA 采样 matrixMul 错误

> ID：13807537
> 
> 赞同：2
> 
> 时间：2012-12-10T19:11:09.183
> 
> 标签：cuda, sample

我对 cuda 很陌生，几周前才开始阅读有关并行编程和 cuda 的内容。安装 cuda 工具包后，我正在浏览 sdk 示例（随工具包的安装提供）并想尝试其中的一些。我`matrixMul`从 0_Simple 文件夹开始。该程序执行良好（我使用的是 Visual Studio 2010）。现在我想更改矩阵的大小并尝试使用更大的矩阵（例如 960X960 或 1024x1024）。在这种情况下，某些东西崩溃了（我得到黑屏，然后是消息：显示驱动程序停止响应并已恢复）。

我正在更改代码中的这两行（来自 main 函数）：

```
 dim3 dimsA(8*4*block_size, 8*4*block_size, 1);
    dim3 dimsB(8*4*block_size, 8*4*block_size, 1); 
```

在他们之前：

```
dim3 dimsA(5*2*block_size, 5*2*block_size, 1);
dim3 dimsB(5*2*block_size, 5*2*block_size, 1); 
```

有人可以指出我做错了什么。并且我是否应该在此示例中更改其他内容以使其正常工作。谢谢！

编辑：就像你们中的一些人建议的那样，我更改了超时值（0 不知何故对我不起作用，我将超时设置为 60），所以我的驱动程序不会崩溃，但我得到了大量错误列表，例如：... ……

```
Error! Matrix[409598]=6.40005159, ref=6.39999986 error term is > 1e-5
Error! Matrix[409599]=6.40005159, ref=6.39999986 error term is > 1e-5 
```

这是否与内存分配有关。我应该在那里进行更改吗？它们可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:04:20.683

I'd advise looking at the indexing used in the kernel (matrixMulCUDA) a bit closer - it sounds like you're writing to unallocated memory.

More specifically, is the only thing that you changed the dimsA and dimsB variables? Inside the kernel they use the thread and block index to access the data - did you also increase the data size accordingly? There is no bounds checking going on in the kernel, so if you just change the kernel launch configuration, but not the data, then odds are you're writing past your data into some other memory

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T23:28:36.667

您的新问题实际上只是 NVidia 示例中提供的严格公差。您的内核运行正常。它只是抱怨累积的错误大于他们为此示例设置的限制。这只是因为您正在做更多的数学运算，这些运算都在累积错误。如果您查看它给您的数字，您只会偏离参考答案大约 0.00005，这在大量单精度浮点数学之后并不罕见。你现在得到这些错误而不是默认矩阵大小的原因是原始矩阵更小，因此需要更少的操作来相乘。N x N 矩阵的矩阵乘法需要 N^3 次操作，

如果您查看 runTest() 函数的末尾附近，则会调用 computeGold() 来计算 CPU 上的参考答案。然后应该调用类似 shrCompareL2fe 的方法来比较结果。最后一个参数是公差。如果您增加此容差的大小（例如，增加到 1e-3 或 1e-4 而不是 1e-5），您应该消除这些错误消息。请注意，可能有几个这样的调用。我拥有的 SDK 示例版本有一个可选的 CUBLAS 实现，因此它也与黄金进行了比较。紧跟在“比较 CUDA matrixMul 和主机结果”的打印语句之后的那个是您想要更改的那个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T02:36:34.607

您是否在 Windows 中禁用了超时检测和恢复 (TDR)？完全有可能您的代码运行良好，但较大的矩阵导致内核执行超过 Windows 的超时，这导致 Windows 假定卡被锁定，因此它重置卡并为您提供与该卡相同的消息你描述。即使这不是您的问题，您也绝对希望在 Windows 中进行任何严肃的 CUDA 工作之前禁用它。默认情况下超时时间很短，因为正常的图形渲染每帧只需要几分之一秒。

请参阅 NVidia 论坛上描述 TDR 以及如何关闭它的帖子：

[WDDM TDR - NVidia devtalk 论坛](https://devtalk.nvidia.com/default/topic/459869/cuda-programming-and-performance/-quot-display-driver-stopped-responding-and-has-recovered-quot-wddm-timeout-detection-and-recovery-/)

特别是，您可能希望将键 HKLM\System\CurrentControlSet\Control\GraphicsDrivers\TdrLevel 设置为 0（检测已禁用）。

或者，您可以通过设置 HKLM\System\CurrentControlSet\Control\GraphicsDrivers\TdrDelay 来增加超时时间。它默认为 2 并以秒为单位指定。就个人而言，我发现在 CUDA 中工作时 TDR 总是很烦人，所以我只是将其完全关闭。IIRC，您需要重新启动系统才能使任何与 TDR 相关的更改生效。

# sorting - Solr 中的负提升

> ID：13807538
> 
> 赞同：4
> 
> 时间：2012-12-10T19:11:12.297
> 
> 标签：sorting, solr

我的索引中有一个“费用”字段。我想提升收费值不等于 0 的结果。我尝试为此使用 bq 参数，但没有成功。

```
&bq=charges:"0"^-1 
```

我尝试使用上述方法，但收到 400 错误报告。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T04:33:52.680

除了@harmstyler 的答案之外
，您还可以积极地提升非零值（如果费用是整数字段），例如

```
bq=charges:[1 TO *]^10 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-09-14T08:41:17.787

这是旧帖子，但没有完全更新，目前支持负提升。

下面来自 关于负提升的[Solr 文档：](https://lucene.apache.org/solr/guide/6_6/the-extended-dismax-query-parser.html#TheExtendedDisMaxQueryParser-Usingnegativeboost)

> 长期以来，“查询”对象级别一直支持负查询提升（导致匹配文档的负分）。现在 QueryParsers 也已更新以处理此问题。

部分`resulting in negative scores for matching documents`可能并不总是正确的，如下所述。

用法示例：考虑到您的收藏名称是`product_collection`并且您想埋葬（负提升）具有特定品牌的产品：

```
http://localhost:8983/solr/product_collection/select?q=shoes&bq=brand:puma^-2&defType=dismax 
```

此查询将被解析为：

```
"parsedquery_toString": "+((keyword:shoes)^1.0) () (brand:puma)^-2.0" 
```

在这种情况下，`-2`因子将乘以`(brand:puma)`匹配的 tf-idf 分数，从而导致包含`brand puma`.

但是，在 boost 查询中添加负因子并不意味着它总是会为文档产生负的最终分数。例如，如果文档`keyword:shoes`匹配的 tf-idf 分数是和结果的`3.0`tf-idf 分数，那么总体结果仍然是 1.5（正）。因此，**相应地使用负提升因子**。`brand:puma``-1.5`

 **我自己收藏的一个这样的例子：

> "\n3.4329534 = 总和：\n **6.151505 = 重量（关键字：5786 中的鞋子）** [SchemaSimilarity]，结果：\n 6.151505 = 分数（doc=5786,freq=1.0 = termFreq=1.0\n），产品的：\n 4.2804184 = idf，计算为 log(1 + (docCount - docFreq + 0.5) / (docFreq + 0.5)) 来自：\n 199.0 = docFreq\n 14417.0 = docCount\n 1.437127 = tfNorm，计算为 (freq * (k1 + 1)) / (freq + k1 * (1 - b + b * fieldLength / avgFieldLength)) 来自：\n 1.0 = termFreq=1.0\n 1.2 = 参数 k1\n 0.75 = 参数 b\n 7.7978773 = avgFieldLength\n 2.0 = fieldLength\n **-2.7185516 = weight(brand:puma in 5786)**[SchemaSimilarity]，结果：\n -2.7185516 = score(doc=5786,freq=1.0 = termFreq=1.0\n)，乘积：\n -2.0 = boost\n 1.3592758 = idf，计算为 log(1 + (docCount - docFreq + 0.5) / (docFreq + 0.5)) 来自：\n 3704.0 = docFreq\n 14422.0 = docCount\n 1.0 = tfNorm，计算为 (freq * (k1 + 1)) / (freq + k1) 从:\n 1.0 = termFreq=1.0\n 1.2 = 参数 k1\n 0.0 = 参数 b（字段省略规范）\n",

关键词得分：shoes = 6.151505

品牌得分：puma = -2.7185516

导致总分正分为 3.4329534

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-10T20:46:15.143

Solr 不支持负提升。但是，话虽如此，您可以用非常低的数字来提升您的内容，使其具有负面提升的效果。记住`^1`被认为是默认的提升。所以，`&bq=charges:"0"^1`是一样的`&bq=charges:"0"`。如果你想创造一个“负提升”试试`&bq=charges:"0"^0.8`。有关完整文档，请[查看本文](http://wiki.apache.org/solr/SolrRelevancyFAQ#How_do_I_give_a_negative_.28or_very_low.29_boost_to_documents_that_match_a_query.3F)。**

# sql - 如何使用 Where 条件从一个表中检索同一列两次

> ID：13807541
> 
> 赞同：-2
> 
> 时间：2012-12-10T19:11:17.093
> 
> 标签：sql, sql-server, tsql, pivot

我试图从一个表中检索一列两次，例如：

```
select M.Event_Name as 'Male',
       F.Event_Name as 'Female' 
from   Table1 M, Table1 F
where  M.Gender = 'M'
       and F.Gender = 'F'
       and F.Country = 12
       and M.Country = 12 
```

表1数据

```
ID    Event_Name   Gender  Country
1     Cricket      M       12
2     FootBall     M       13
3     BasketBall   M       12
4     Hockey       M       12
5     Tennis       M       13
6     Volly Ball   M       13
7     Cricket      F       13
8     FootBall     F       13
9     BasketBall   F       12
10    Hockey       F       13
11    Tennis       F       12
12    Volly Ball   F       12 
```

**我得到的是：**

```
Male           Female
Cricket        Tennis
Cricket        BasketBall
Cricket        Volly ball
BasketBall     Tennis
BasketBall     BasketBall
BasketBall     Volly ball
Hockey         Tennis
Hockey         BasketBall
Hockey         Volly ball 
```

**期待：**

```
Male          Female
Cricket       Tennis
BasketBall    BasketBall
Hockey        Volly ball 
```

帮帮我。。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:39:50.223

您应该能够使用这样的东西，其中包含`PIVOT`：

```
select M as Male, 
  F as Female
from
(
  select event_name, gender,
    row_number() over(partition by gender, country order by id) rn
  from yourtable
  where gender in ('M', 'F')
    and country = 12
) src
pivot
(
  max(event_name)
  for gender in (M, F)
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/7124d/6)

或者您可以使用带有`CASE`语句的聚合函数：

```
select 
  max(case when gender = 'M' then event_name end) male,
  max(case when gender = 'F' then event_name end) female
from
(
  select event_name, gender,
      row_number() over(partition by gender, country order by id) rn
  from yourtable 
  where gender in ('M', 'F')
    and country = 12
) src
group by rn 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/7124d/10)

两者都产生相同的结果：

```
|       MALE |     FEMALE |
---------------------------
|    Cricket | BasketBall |
| BasketBall |     Tennis |
|     Hockey | Volly Ball | 
```

# windows - 移动鼠标光标N像素的Windows命令脚本？

> ID：13807543
> 
> 赞同：16
> 
> 时间：2012-12-10T19:11:28.427
> 
> 标签：windows, batch-file

我正在尝试通过命令脚本找出如何将鼠标光标 N 像素移动到某个方向......，因为我无法在我的计算机上安装任何东西。

我基本上试图让屏幕永远保持活跃，直到我杀死脚本。

（是的，我一直在寻找一种通过命令脚本来完成它的方法......但找不到任何东西。我希望它是可能的。）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2016-03-18T22:42:39.043

使用批处理文件操作鼠标的最直接方法是使用

```
rundll32 user32.dll,SetCursorPos 
```

但这不是很有用 - 只是将鼠标设置为 0,0 位置。

检查[**mouse.bat**](https://github.com/npocmaka/batch.scripts/blob/master/hybrids/.net/c/mouse.bat) - 它是一个自编译的 C#/批处理文件，不需要外部工具，源代码可见且可编辑。

例子：

```
//clicks at the current position
call mouse click

//double clicks at the current position
call mouse doubleClick

//right clicks at the current position
call mouse rightClick

//returns the position of the cursor
call mouse position

//scrolls up the mouse wheel with 1500 units
call mouse scrollUp 150

//scrolls down with 100 postitions
call mouse scrollDown 100

 //relatively(from the current position) moves the mouse with 100 horizontal and 100 vertial postitions
call mouse moveBy 100x100

//absolute positioning
call mouse moveTo 100x100

//relative drag (lefclick and move)
call mouse dragBy 300x200

//absolute drag
call mouse dragTo 500x500 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-11-28T01:15:52.100

搜索**NirCmd**并将其安装在*C:\windows*中，然后执行以下操作：

```
nircmd setcursor 100 50
nircmd movecursor 10 10 
```

或其他点击命令等。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-12-13T19:53:11.290

（迟到的答案，但对其他人仍然有用）如果您只是想让您的计算机不入睡，“咖啡因”软件可以很好地做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-21T13:05:25.200

您可以尝试安装 AutoHotKey。它使控制鼠标非常简单。示例脚本：

```
#MaxThreadsPerHotkey 3

^g::
Toggle := !Toggle
Loop
{
    If (!Toggle)
        Break
    Click
    Sleep 1000 ; Make this number higher for slower clicks, lower for faster.
}
Return 
```

运行此示例的脚本后，按 control+g，它将每秒单击一次以保持屏幕唤醒。ctrl+g 再次停止。

安装在：[https ://www.autohotkey.com/](https://www.autohotkey.com/)

找到解决方案：[https ://autohotkey.com/boards/viewtopic.php?t=19846](https://autohotkey.com/boards/viewtopic.php?t=19846)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-02-03T04:36:52.317

尝试将睡眠模式设置为“无”，但如果您想移动鼠标甚至不触摸它，请下载 memz clean 并让“随机光标移动”变蓝。现在享受。（如果它不起作用，则必须禁用有效负载。尝试使用 shift+esc 启用/禁用有效负载。尝试使用 ctrl+shift+s 跳过一些时间，因为在几分钟内鼠标会抖动得更好。）

# c - 如何从 Libextractor 中获取元数据到结构中

> ID：13807544
> 
> 赞同：1
> 
> 时间：2012-12-10T19:11:42.060
> 
> 标签：c, metadata, extract

我想使用 Libextractor 来获取文件的关键字/元数据。它的基本示例是-

```
struct EXTRACTOR_PluginList *plugins
= EXTRACTOR_plugin_add_defaults (EXTRACTOR_OPTION_DEFAULT_POLICY);

EXTRACTOR_extract (plugins, argv[1],
                 NULL, 0, 
                 &EXTRACTOR_meta_data_print, stdout);
  EXTRACTOR_plugin_remove_all (plugins); 
```

但是，这会调用函数 EXTRACTOR_meta_data_print 将其“打印”到“stdout”。我正在寻找一种将这些信息传递给另一个函数的方法——即将它传递或存储在内存中以供进一步工作。我不清楚文档。对此有任何帮助或经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T01:14:16.903

我尝试安装 libextractor 并未能使其正常工作（它总是在调用时返回一个 NULL 插件指针`EXTRACTOR_plugin_add_defaults()`），所以我接下来要写的*不是 TESTED*：

来自：[http ://www.gnu.org/software/libextractor/manual/libextractor.html#Extracting](http://www.gnu.org/software/libextractor/manual/libextractor.html#Extracting)

```
Function Pointer: int
(*EXTRACTOR_MetaDataProcessor)(void *cls,
const char *plugin_name,
enum EXTRACTOR_MetaType type,
enum EXTRACTOR_MetaFormat format,
const char *data_mime_type,
const char *data,
size_t data_len) 
```

和

libextractor 为找到的每个元数据项调用的函数的类型。

```
cls
    closure (user-defined) 
plugin_name
    name of the plugin that produced this value;
    special values can be used (i.e. '<zlib>' for
    zlib being used in the main libextractor library
    and yielding meta data); 
type
    libextractor-type describing the meta data; 
format basic
    format information about data
data_mime_type
    mime-type of data (not of the original file);
    can be NULL (if mime-type is not known); 
data
    actual meta-data found 
data_len
    number of bytes in data

Return 0 to continue extracting, 1 to abort. 
```

所以你只需要编写你自己的函数，调用任何你想要的函数，并让这个声明如下：

```
int whateveryouwant(void *cls,
const char *plugin_name,
enum EXTRACTOR_MetaType type,
enum EXTRACTOR_MetaFormat format,
const char *data_mime_type,
const char *data,
size_t data_len)
{
    // Do your stuff here
    if(stop)
        return 1; // Stops
    else
        return 0; // Continues
} 
```

并通过以下方式调用它：

```
EXTRACTOR_extract (plugins, argv[1],
                   NULL, 0, 
                   &whateveryouwant,
                   NULL/* here be dragons */); 
```

如[http://www.gnu.org/software/libextractor/manual/libextractor.html#Generalities](http://www.gnu.org/software/libextractor/manual/libextractor.html#Generalities) “3.3 libextractor 库简介”中所述

[here be dragons]：这是一个留给用户使用的参数（即使这样说是多余的）。如文档中所定义：“对于找到的每个元数据项，GNU libextractor 将调用 'proc' 函数，将 'proc_cls' 作为第一个参数传递给 'proc'。”

其中“`proc`函数”是您添加的函数（`whateveryouwant()`此处）并且`proc_cls`是任意指针（可以是任何指针），您可以将数据传递给函数。就像示例中的指针一样`stdout`，为了打印到`stdout`. 话虽如此，我怀疑该函数写入 FILE* 而并非不可避免地写入`stdout`; 因此，如果您打开一个文件进行写入，并将其“文件描述符”作为 last`EXTRACTOR_extract()`的参数传递，您可能会以一个填充了您当前可以在屏幕上读取的信息的文件结束。这不是访问信息的正确方法，但是如果您正在寻找一种*快速而肮脏*的方法来测试某些行为或某些功能；可以做到这一点，直到你编写一个适当的函数。

祝你的代码好运！

# c# - 无法让 XPath 使用未命名的命名空间

> ID：13807546
> 
> 赞同：1
> 
> 时间：2012-12-10T19:11:53.923
> 
> 标签：c#, .net, xml, xpath

XML（片段）：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
<GetXMLResponse xmlns="http://sitecore.net/visual/">
<GetXMLResult>
<sitecore xmlns="">
<status>ok</status> 
```

代码（片段）：

```
XmlNamespaceManager nsManager = new XmlNamespaceManager(template.NameTable);
nsManager.AddNamespace("soap", "http://schemas.xmlsoap.org/soap/envelope/");
nsManager.PushScope();

XmlNode sitecoreRoot = template.SelectSingleNode("/soap:Envelope/soap:Body/*[namespace-uri()='http://sitecore.net/visual/' and local-name()='GetXMLResponse']", nsManager);

string status = sitecoreRoot.SelectSingleNode("/GetXMLResult/sitecore/status").Value; 
```

sitecoreRoot 元素返回正确的节点。然而，获取状态的 XPath 始终返回 null，即使 siteCoreRoot.OuterXMl 属性显示该元素存在。

我唯一能想到的是这条线：

```
<sitecore xmlns=""> 
```

正在抛弃 XPath

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:46:42.293

如果你只想要状态节点，你可以试试[这个 xml 库](https://github.com/ChuckSavage/XmlLib/)和下面的 XPath。

```
XElement root = XElement.Load(file); // or .Parse(string)
XElement status = root.XPathElement("//status"); 
```

该库为您处理命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:25:21.903

```
XmlNamespaceManager ns = new XmlNamespaceManager(cd.NameTable);
        ns.AddNamespace("sp", "http://schemas.xmlsoap.org/soap/envelope/");
        ns.AddNamespace("sc", "http://sitecore.net/visual/");
        XmlNode sitecoreRoot = cd.SelectSingleNode("//sp:Envelope/sp:Body/sc:GetXMLResponse/sc:GetXMLResult/sitecore/status", ns);
var status = sitecoreRoot.InnerText; 
```

可以帮助你吗？

# actionscript-3 - TextInput 组件的正则表达式：MM/DD/YY

> ID：13807551
> 
> 赞同：1
> 
> 时间：2012-12-10T19:12:11.020
> 
> 标签：actionscript-3, apache-flex

我对正则表达式很糟糕，但我相信在这种情况下我必须创建一个。

基本上，用户需要在 TextInput 中输入格式为 MM/DD/YYYY 的日期，我需要对其进行验证。

谁能给我指点那些我再也找不到的旧 Flex 正则表达式测试器的方向，好吗？

谢谢！

更新：

这是正则表达式，以防万一它会帮助某人：

```
var pattern:RegExp = /^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.](19|20)\d\d$/; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:58:31.293

格兰特斯金纳有正则表达式，我认为这就是你正在寻找的
[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)

正则表达式也很不错
[http://regexpal.com/](http://regexpal.com/)

`\d{2}/\d{2}/\d{4}` 对于 DD/DD/DDDD
`\d\d?/\d\d?/\d{4}` 对于 D/D/DDDD 和 DD/DD/DDDD

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T20:24:06.780

[您可以考虑使用 Flex DateValidator](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/validators/DateValidator.html)或 Flex 3 [DateField](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/DateField.html)控件，而不是使用正则表达式（非常好，但它们可能会变得混乱） 。这两种方法都将确保您最终得到一个有效的输入，而您几乎不需要付出任何努力。

在我链接到的页面底部有一个如何使用每个类的示例。

# c# - 如何创建允许我调用 ToSerializableDictionary(p => p.ID) 而不是 .ToDictionary(p => p.ID) 的扩展方法

> ID：13807552
> 
> 赞同：2
> 
> 时间：2012-12-10T19:12:09.623
> 
> 标签：c#, extension-methods

我想创建一个扩展方法，允许我调用`ToSerializableDictionary(p => p.ID)`而不是`.ToDictionary(p => p.ID)`在以下 LINQ 上下文中调用。虽然我不确定我应该为哪个类创建一个扩展方法来替换`ToDictionary<T>`.

```
response.attributes = (
    from granuleGroup in groups
    let granuleRow = granuleGroup.First().First()
    select new USDAttributes()
    {
        id = (int)granuleRow["id"],
        ...
        attributes =
        (
            ...
        ).ToDictionary(p => p.ID) <--** LINE IN QUESTION **
    }
).ToList(); 
```

我从[这里获取的](http://www.dacris.com/blog/2010/07/31/c-serializable-dictionary-a-working-example/)[SerializableDictionary 类](http://app.dacris.com/temp/SerializableDictionary.cs.txt)是为了让我可以在我的 web 服务中序列化字典对象以返回与 JSON 配合得很好的哈希表。

最初我为 IDictionary 创建了一个扩展方法，所以我可以做这样的事情：`...).ToDictionary(p => p.ID).ToSerializableDictionary();`但这完全失败了，因为这是我第一次创建扩展方法，我不知道我在做什么。

```
public static class CollectionExtensions
{

    public static SerializableDictionary<string, object> ToSerializableDictionary(this IDictionary<string,object> sequence)
    {

        SerializableDictionary<string, object> sDic = new SerializableDictionary<string, object>();

        foreach (var item in sequence)
        {

        }

        return sDic;

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T19:16:06.067

```
public static SerializableDictionary<TKey, T> ToSerializableDictionary<TKey, T>(this IEnumerable<T> seq, Func<T, TKey> keySelector)
{
    var dict = new SerializableDictionary<TKey, T>();
    foreach(T item in seq)
    {
        TKey key = keySelector(item);
        dict.Add(key, item);
    }

    return dict;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T19:18:36.877

实际上，您提供的类有一个方便的构造函数来执行此操作，因此您实际上可以这样做

```
attributes = new SerializableDictionary( (
        ...
    ).ToDictionary(p => p.ID) ); 
```

但是在这里您使用扩展方法（再次使用该构造函数）：

```
public static partial class Extension {
    public static SerializableDictionary<T, Q> ToSerializableDictionary(
        this IDictionary<T, Q> d) {

        return new SerializableDictionary(d);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T19:24:25.223

Lee 的回答是正确的答案，但只是为了提供另一种方法，您可以尝试这个稍微简洁的版本：

```
public static SerializableDictionary<TKey, T> ToSerializableDictionary<TKey, T>(this IEnumerable<T> seq, Func<T, TKey> keySelector)
{
    var dict = seq.ToDictionary(keySelector);

    //since SerializableDictionary can accept an IDictionary
    return new SerializableDictionary<TKey, T>(dict);

} 
```

然而，就我个人而言，我会考虑一种更简单的方法，并使用[JSON.Net](http://json.codeplex.com/)来完成这项任务——它工作得很好，使用起来非常简单，而且速度非常快。由于这些原因，我相信微软甚至已经转而在 MVC3（或者可能是 4？）中使用 JSON.Net。衷心推荐

# php - 推进，构建动态查询？

> ID：13807554
> 
> 赞同：0
> 
> 时间：2012-12-10T19:12:15.847
> 
> 标签：php, symfony, orm, propel

现在我正在使用以下方法：

```
$claims = ClaimQuery::create()
        ->leftJoinUser()
        ->withColumn('CONCAT(User.Firstname, " ", User.Lastname)', 'name')
        ->withColumn('User.Email', 'email')
        ->filterByArray($conditions)
        ->paginate($page = $page, $maxPerPage = $top); 
```

$conditions 是一个动态数组，由会话中的键值填充。

```
$_SESSION['filters']['claims'][$filter] = $value; 
```

$_SESSION['filters']['claims'] 是数组。然而，这并不够灵活，因为 filterByArray 似乎仅限于简单地将一列映射到一个值。

有没有办法以一种我可以使用数据库中的 created_at 列两次来设置小于和大于的方式使用 filterByArray 或者是否有更好的方法来动态构建查询，例如使用下面的条件？

```
$criteria = new Criteria();
$criteria->add(ClaimPeer::Status, $status); 
```

如果是这种情况，访问 paginate 方法的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:30:20.230

我想我在写这篇文章时有一个愚蠢的时刻。所需要的只是结束链，然后再恢复它：

```
$claims = ClaimQuery::create()
        ->leftJoinUser()
        ->withColumn('CONCAT(User.Firstname, " ", User.Lastname)', 'name')
        ->withColumn('User.Email', 'email')
        ->filterByArray($conditions);

// FOR EXAMPLE
if(someconditionhere){
    $claims = $claims
        ->where('CreatedAt >= ?', $date_start)
        ->where('CreatedAt <= ?', $date_end);
}

$claims = $claims->paginate($page = $page, $maxPerPage = $top); 
```

如果有人知道更清洁或更有效的解决方案，请告诉我。

# java - Play 框架是否包含电子邮件模板库或工具？

> ID：13807556
> 
> 赞同：1
> 
> 时间：2012-12-10T19:12:18.613
> 
> 标签：java, email, scala, playframework

我正在寻找为标准电子邮件创建模板 - 例如注册确认、状态更改通知和其他类型的电子邮件，这些电子邮件通常需要来自 Web 应用程序。

我正在开发的特定网络应用程序正在使用 Play 框架。我想知道 - 是否有标准库或工具，包含在 Play 框架中（或通常由那些依赖框架的人使用），用于编写和模板化这些类型的电子邮件？

[目前正在播放 2.1 RC 1]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:00:23.733

Werner Vesterås 写道，但删除了 :)

对于 Play 2.x，请查看 Joscha Feth 的 Play Authenticate - 它使用带有反射的多语言电子邮件模板，但是如果您不需要使用多种语言，您也可以使用简化的视图渲染，这类似于常见的结果构建，但是您只需使用`toString()`方法`render()`将其作为内容传递给邮件程序。

# request - 在 Kohana 3.3 中的控制器中实例化请求

> ID：13807561
> 
> 赞同：0
> 
> 时间：2012-12-10T19:12:29.207
> 
> 标签：request, kohana, kohana-3.3

在升级我自己的模块以使用最新的 Kohana (3.3) 时，我在我的场景中发现了故障。我在我的应用程序中使用模板驱动模式（我的控制器扩展了 Controller_Theme）。但是对于 AJAX 调用，我在 3.2 版中使用了单独的控制器，它只扩展了控制器。我必须在此控制器中实例化 Request 对象，以便通过 Rquest 对象中的 POST 或 GET 访问传递的变量。我在 __construct() 方法中做到了：

```
class Controller_Ajax extends Controller {

    public function __construct()
    {       
        $this->request = Request::current();    
    }

    public function action_myaction()
    {
        if($this->is_ajax())
        {
            $url = $this->request->post('url');
            $text = $this->request->post('text');
        }   
    }
} 
```

在 myaction() 方法中，我可以像这样访问发布的变量。但这在 Kohana 3.3 中不再起作用。我总是收到这个错误：

```
ErrorException [ Fatal Error ]: Call to a member function action() on a non-object
SYSPATH/classes/Kohana/Controller.php [ 73 ]
68  {
69      // Execute the "before action" method
70      $this->before();
71      
72      // Determine the action to use
73      $action = 'action_'.$this->request->action();
74 
75      // If the action doesn't exist, it's a 404
76      if ( ! method_exists($this, $action))
77      {
78          throw HTTP_Exception::factory(404, 
```

我确信我的路线设置正确。我没有发现从 3.2 到 3.3 的迁移文档中关于 Request 对象的任何更改。还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T09:00:02.670

默认情况下，请求和响应都在`Controller`类中初始化（参见下面的代码），因此不需要覆盖它的构造函数。尝试删除您的构造函数，如果这没有帮助，那么您的路由就搞砸了。

```
abstract class Kohana_Controller {

    /**
     * @var  Request  Request that created the controller
     */
    public $request;

    /**
     * @var  Response The response that will be returned from controller
     */
    public $response;

    /**
     * Creates a new controller instance. Each controller must be constructed
     * with the request object that created it.
     *
     * @param   Request   $request  Request that created the controller
     * @param   Response  $response The request's response
     * @return  void
     */
    public function __construct(Request $request, Response $response)
    {
        // Assign the request to the controller
        $this->request = $request;

        // Assign a response to the controller
        $this->response = $response;
    } 
```

# google-maps - 如何使用 Google Maps Store locator Utility Library 在侧面板中显示所有商店

> ID：13807566
> 
> 赞同：0
> 
> 时间：2012-12-10T19:12:53.050
> 
> 标签：google-maps, maps, sidebar

我正在使用谷歌地图商店定位器实用程序库来显示商店，我想知道如何在侧边栏面板中显示所有商店而不是固定数量的商店

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T20:09:10.860

我通过进入 store-locator.compiled.js 文件来完成此操作。搜索 10（这是默认值）并将其更改为 100。这让我有成长的空间。

# php - youtube 如何锁定浏览器的直接链接？

> ID：13807569
> 
> 赞同：2
> 
> 时间：2012-12-10T19:13:07.053
> 
> 标签：php, youtube, youtube-api

最近 youtube 改变了直接视频下载链接的工作方式（在 url_encoded_fmt_stream_map 中找到），现在有一个签名并且链接不起作用，除非提供正确的签名签名作为“sig”参数存在，所以你可以轻松地接受它并且构建链接，它将起作用，但是自从出现此签名以来，该链接也以某种方式锁定到用户的浏览器

这意味着如果我在服务器端探测“http://youtube.com/get_video_info”并构建带有签名的链接，然后在用户单击链接时将其打印为链接，则会打开一个黑色页面，但是如果我尝试在服务器端下载视频就可以了。这意味着该链接以某种方式被锁定并且属于打开“http://youtube.com/get_video_info”的用户

这种情况的问题是，为了流式传输视频，您必须首先将它们下载到您的服务器上

有谁知道链接是如何锁定到特定用户的，有没有办法解决？

例如，这个想法是-您在服务器端获取链接，然后将其提供给一些 Flash 播放器，而不是使用无铬播放器

这是一个带有 php 的代码示例：

```
<?

$video_id = $_GET['id']; //youtube video id

// geting the video info
$content = file_get_contents("http://youtube.com/get_video_info?video_id=".$video_id);
parse_str($content, $ytarr);

// getting the links
$links = explode(',',$ytarr['url_encoded_fmt_stream_map']);

// formats you would like to use
$formats = array(35,34,6,5);

//loop trough the links to find the one you need 
foreach($links  as $link){
     parse_str($link, $args);

     if(in_array($args['itag'],$formats)){

          //right link found since the links are in hi-to-low quality order 
          //the match will be the one with highest quality
          $video_url = $args['url'];

          // add signature to the link
          if($args['sig']){
            $video_url .= '&signature='.$args['sig'];
          }

          /*
          * What follows is three ways of proceeding with the link, 
          * note they are not supposed to work all together but one at a time
          */

          //download the video and output to browser
          @readfile($video_url); // this works fine
          exit;

          //show video as link
          echo '<a href="'.$video_url.'">link for '.$args['itag'].'</a>'; //this won't work
          exit;

          //redirect to video
          header("Location: $video_url"); // this won't work
          exit;
     }
}
?> 
```

# java - 如何从 jtextpane 获取行数

> ID：13807575
> 
> 赞同：9
> 
> 时间：2012-12-10T19:13:38.803
> 
> 标签：java, swing, jtextpane, word-wrap

有没有办法从充满文本的 jtextpane 中“提取”行数？如果有，如果某些行是由于文本换行，它会起作用吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-10T19:38:24.910

您可以使用[`Utilities.getRowStart`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/Utilities.html#getRowStart%28javax.swing.text.JTextComponent,%20int%29)来确定`JTextPane`给您结果的行的“开始” `lineCount`。当换行时，这也将起作用。

```
int totalCharacters = textPane.getText().length(); 
int lineCount = (totalCharacters == 0) ? 1 : 0;

try {
   int offset = totalCharacters; 
   while (offset > 0) {
      offset = Utilities.getRowStart(textPane, offset) - 1;
      lineCount++;
   }
} catch (BadLocationException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T19:18:09.553

如果将“行”定义为 JTextPane 文本中有多少`\n`个字符，则可以使用：

```
JTextPane p = yourJTextPane;
System.out.println(p.getText().split("\n").length); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-27T17:47:48.150

要跳转到选定的行，我使用了以下代码：

```
int rowSel = Integer.parseInt(tfGoLine.getText());

        int rowGo = 0;
        int lineCount = 0;
        int totalCharacters = rowSel <= 1 ? 0 : text.getText().length();

        try {
            int last = -1;
            for (int count = 0; count < totalCharacters; count++) {
                int offset = Utilities.getRowStart(text, count);

                if (last != offset) {
                    last = offset;
                    lineCount++;
                    rowGo = offset;

                    if (lineCount == rowSel) {
                        break;
                    }
                }
            }

        } catch (BadLocationException e) {
        }

        text.getCaret().setDot(rowGo);
        text.requestFocus(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-12T16:25:48.860

```
int rowCount =txtPane.getDocument().getDefaultRootElement().getElementCount(); 
```

# powershell - Powershell 和 FTP 上传和重命名

> ID：13807577
> 
> 赞同：2
> 
> 时间：2012-12-10T19:13:52.423
> 
> 标签：powershell, command-line, ftp

我有一个 powershell 脚本，它使用 system.net.webclient 将文件上传到 FTP 站点。他们现在要求我们使用临时名称上传文件，然后在上传后在 FTP 服务器上重命名。我怎样才能做到这一点？文件名是随机的并且很长 - 我应该包括几个步骤来将内容添加到文件并使用 FTP -s: 来运行它，还是有更清洁的方法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:32:47.543

你可以使用[WebRequest](http://msdn.microsoft.com/en-us/library/system.net.webrequestmethods.ftp.aspx)而不是Webclient，它既有`UploadFile`方法又有`Rename`方法。

# meteor - 判断 Meteor 是否正在运行的平台无关方式

> ID：13807581
> 
> 赞同：1
> 
> 时间：2012-12-10T19:14:21.433
> 
> 标签：meteor

问题真的说明了一切。我可以在已知位置设置一个页面，并确保 http 请求有效，但这感觉有点 hackey。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T23:03:09.333

`Meteor.status()`是一个客户端功能，它将帮助Meteor 上下文中的*各个客户端。*对于与平台无关的检查，最好的选择是使用位于 Meteor 环境之外的DDP客户**端**[。](https://stackoverflow.com/questions/10128430/documentation-or-code-details-on-meteors-ddp-pub-sub-protocol)（确实，Meteor 的人提出了 DDP 客户端，但其目的是作为[实时平台的协议](http://2012.realtimeconf.com/video/matt-debergalis)，而不是 Meteor 架构的紧密耦合部分）。

 **然后，在实践中，您需要连接 DDP 客户端并订阅服务器端发布，返回在您需要的上下文中定义“运行”的任何内容。这可能只是 mongo 文档的集合，也可能是基于发布函数中更复杂`set`和`unset` [方法调用的一些状态检查。](http://docs.meteor.com/#publish_set)

这是我发现的几个 DDP 客户端

*   [DDP客户端.NET](https://github.com/sonyarouje/DDPClient.NET)

*   [节点 ddp 客户端](https://github.com/oortcloud/node-ddp-client)

*   [ruby-ddp-客户端](https://github.com/tmeasday/ruby-ddp-client)

希望有帮助。**

# android - 无法让 SharedPreferences 保存在少数手机上

> ID：13807608
> 
> 赞同：1
> 
> 时间：2012-12-10T19:16:33.590
> 
> 标签：android

我有一部运行 android 2.2.1 的手机（Samsung GT-I9000）。保存到共享首选项失败：

```
Editor editor = ...;
if (!editor.commit()) {
    Log.e(TAG, "Nope!");
} 
```

我可以看到它吐出以下相关的日志语句：

```
12-10 14:06:03.919: E/ApplicationContext(4684): 
    Couldn't rename file
    /dbdata/databases/com.me.myapp/shared_prefs/com.me.prefs.xml to backup file
    /dbdata/databases/com.me.myapp/shared_prefs/com.me.prefs.xml.bak
12-10 14:06:03.919: E/MyApp(200): Nope! 
```

知道如何解决这个问题吗？这非常令人沮丧。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:13:38.250

如果您使用从 2.2 到 2.2.1 的三星 Galaxy S 设备。那么我们会在日志中查看路径，它试图保存到...`"/dbdata/databases/xx.xx.xx/shared_prefs/com.me.prefs.xml"`而不是`"/data/databases/com.me.myapp/shared_prefs/com.me.prefs.xml"`. 这是三星设备的问题。

您可以在 Android 当前未解决的问题列表中关注由dustin 发布的问题：

[http://code.google.com/p/android/issues/detail?id=14359](http://code.google.com/p/android/issues/detail?id=14359)

# user-interface - All files are red under IntelliJ project pane

> ID：13807610
> 
> 赞同：14
> 
> 时间：2012-12-10T19:16:50.100
> 
> 标签：user-interface, mercurial, intellij-idea

My project pane in IntelliJ has all files and folder in red color instead of the typical black. I can't find documentation on what does this color mean and how to fix whatever caused it so that it appears black again.

I notice that when I click on these files and folders, then choose Menu->VCS->Mercurial. It asks if I want to add them into source control. These files are already in Mercurial, perhaps this is a Mercurial problem?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T19:29:57.540

Refer to help: [File Status Highlights](http://www.jetbrains.com/idea/webhelp/file-status-highlights.html).

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-04-20T19:44:15.923

This can happen if there is an error with you VCS. To repair this:

1.  Navigate to `Settings` | `Version Control`
2.  Select the mapping(s)
3.  Click `[-]` icon or press `Delete` to remove the mapping or change the association to `None`

# extjs - 扩展 Ext.data.Store

> ID：13807612
> 
> 赞同：6
> 
> 时间：2012-12-10T19:17:06.217
> 
> 标签：extjs, extending, extending-classes

我正在尝试将我的 EXTJS 存储配置集中在我的应用程序中，但是，我似乎无法弄清楚如何实现这一点。我正在使用 ExtJS 4.1。

我有一个基础商店，我想保存所有重复的配置内容，然后我的更具体的商店来保存实际不同的东西。

```
Ext.define('My.store.Abstract', {
    extend: 'Ext.data.Store',
    autoload:false,
    proxy: {
        type: 'ajax', 
        reader: {  
            type: 'json',
            root: 'data',
            totalProperty: 'total',  
            successProperty: 'success', 
            messageProperty: 'message'  
        },
        writer: {  
            type: 'json',
            encode: true, 
            writeAllFields: true, 
            root: 'data',
            allowSingle: false 
        },
        simpleSortMode: true
    }
}); 
```

然后我想逐个商店提供商店特定的东西——

```
Ext.define('My.store.Products', {
    extend: 'My.store.Abstract',
    storeId: 'Products',
    model: 'My.model.Product',
    proxy: {
        api: {
            create: '/myurl/create',  
            read: '/myurl/index',
            update: '/myurl/update',  
            destroy: '/myurl/delete' 
        }
    }
}); 
```

我发现它根本没有表现。我相信它与代理有关，但我无法追踪它。

这样做的正确方法是什么？我不希望在我的应用程序的 350 多个存储中复制相同的配置内容（来自我的抽象存储）。到目前为止，这就是我所拥有的，我认为我正在尝试实现一个非常基本的概念......但无济于事。

我知道事情不起作用，就像 pageSize 一样基本，甚至是 autoLoad .. 因为它们根本没有被尊重。

我玩过构造函数，并调用父级。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T21:38:41.543

你不能那样做，因为你期望合并它不会做的对象。

相反，你会想看看这样的东西（未经测试）：

```
Ext.define('Base', {
    extend: 'Ext.data.Store',

    autoLoad: false,

    constructor: function(config) {
        // applyIf means only copy if it doesn't exist
        Ext.applyIf(config, {
            proxy: this.createProxy()
        });
        this.callParent([config]);
    },

    createProxy: function() {
        return {
            reader: {
                type: 'json',
                root: 'data',
                totalProperty: 'total',
                successProperty: 'success',
                messageProperty: 'message'
            },
            writer: {
                type: 'json',
                encode: true,
                writeAllFields: true,
                root: 'data',
                allowSingle: false
            },
            simpleSortMode: true
        }
    }
});

Ext.define('Sub', {
    extend: 'Base',

    createProxy: function(){
        var proxy = this.callParent();
        proxy.api = {
            create: 'create',
            update: 'update'
        };

        return proxy;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T14:11:14.297

这是另一种方式：

**基础商店（app/store/Base.js）：**

```
Ext.define('Admin3.store.Base', {
    extend: 'Ext.data.Store',
    autoLoad: true,
    autoSync: true
}); 
```

**基础代理（app/proxy/Base.js）：**

```
Ext.define('Admin3.proxy.Base', {
    extend: 'Ext.data.proxy.Ajax',
    alias: 'proxy.base',
    reader: {
        type: 'json',
        root: 'items',
        successProperty: 'success',
        messageProperty: 'message'
    },
    listeners: {
        exception: function(proxy, response, operation){
            console.log(response, operation);
            Ext.Msg.show({
                title: 'Remote Exception',
                msg: typeof operation.getError() === 'string' ? operation.getError() : operation.getError().statusText,
                icon: Ext.Msg.ERROR,
                buttons: Ext.Msg.OK
            });
        }
    }
}); 
```

**具体商店（app/store/Users.js）：**

```
Ext.define('Admin3.store.Users', {
    extend: 'Admin3.store.Base',
    model: 'Admin3.model.User',
    proxy: Ext.create('Admin3.proxy.Base', {
        api: {
            read: 'data/read.php',
            update: 'data/update.php'
        }
    })
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T18:46:13.660

我认为这里的其他答案可能比他们需要的要复杂一些。从 4.0.0 版开始，ExtJS 有一个[Ext.Object.merge() 方法](http://docs-origin.sencha.com/extjs/4.0.0/#!/api/Ext.Object-method-merge)，该方法将允许一种非常接近提问者尝试的方法。

使用提问者拥有的值，我会像这样定义我的“抽象”存储：

```
Ext.define("Ext.ux.data.Store", {
    extend: "Ext.data.Store",
    constructor: function(config) {
        var defaults = {
            autoload: false,
            proxy: {
                type: "ajax", 
                reader: {  
                    type: "json",
                    root: "data",
                    totalProperty: "total",  
                    successProperty: "success", 
                    messageProperty: "message"  
                },
                writer: {  
                    type: "json",
                    encode: true, 
                    writeAllFields: true, 
                    root: "data",
                    allowSingle: false 
                },
                simpleSortMode: true
            }
        };
        this.callParent([Ext.Object.merge({}, defaults, config)]);
    }
}); 
```

然后我会像这样创建我的具体商店：

```
Ext.create("Ext.ux.data.Store", {
    storeId: "ExampleStore",
    model: "ExampleModel",
    autoLoad: true, // This overrides the defaults
    proxy: {
        api: {
            read: "/example/read"  // This overrides the defaults
        }
    }
}); 
```

这种方法也适用于多个级别的组件。例如，您可以为只读存储建模：

```
Ext.define("Ext.ux.data.ReadonlyStore", {
    extend: "Ext.ux.data.Store",
    constructor: function(config) {
        var overrides = {
            proxy: {
                api: {
                    create: undefined,
                    update: undefined,
                    destroy: undefined
                }
            }
        }
        this.callParent([Ext.Object.merge({}, config, overrides)]);  // Note that the order of parameters changes here
    }
}); 
```

# cocoa - Mac Cocoa：如何区分 NSScrollWheel 事件是来自鼠标还是触控板？

> ID：13807616
> 
> 赞同：8
> 
> 时间：2012-12-10T19:17:15.023
> 
> 标签：cocoa, nsevent, trackpad

在我的应用程序中，我希望滚动发生，仅通过鼠标滚轮操作，而不是通过触控板上的两个手指手势。基本上，我试图确定 scrollWheelEvent 是否是从鼠标或触控板内部生成的 - (void)scrollWheel:(NSEvent *)theEvent 方法。据我目前所知，似乎没有直接的方法来实现这一点。

我尝试了在 -(void)beginGestureWithEvent:(NSEvent *)event; 内将布尔变量设置为 true 和 false 的解决方法；和 -(void)endGestureWithEvent:(NSEvent *)event; 但这不是解决方案，因为在调用 endGestureWithEvent: 方法之后，scrollWheel: 方法被多次调用。

这是我的代码：

```
 $BOOL fromTrackPad = NO;

    -(void)beginGestureWithEvent:(NSEvent *)event;
    {
        fromTrackPad = YES;    
    }

    -(void) endGestureWithEvent:(NSEvent *)event;
    {
        fromTrackPad = NO;    
    }

    - (void)scrollWheel:(NSEvent *)theEvent
    {
       if(!fromTrackPad)
       {
          //then do scrolling
       }
       else 
       {
         //then don't scroll
       }
    } 
```

我知道这是不标准的，但这是我的要求。有谁知道这样做的方法？谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-20T22:27:58.630

`-[NSEvent momentumPhase]`是解决方案。因此，在 beginGesture 和 endGesture 事件之间从触控板生成的事件返回除`NSEventPhaseNone`for以外的值，`-[NSEvent phase]`并且在 endGesture 事件之后生成的触控板事件返回除 for 以外的`NSEventPhaseNone`值`-[NSEvent momentumPhase]`。代码如下，

```
 - (void)scrollWheel:(NSEvent *)theEvent
    {
       if(([theEvent momentumPhase] != NSEventPhaseNone) || [theEvent phase] != NSEventPhaseNone))
       {
          //theEvent is from trackpad           
       }
       else 
       {
         //theEvent is from mouse
       }
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-02T18:39:53.580

您可以使用`[event hasPreciseScrollingDeltas]`来区分。它是在 OS X Lion 中添加的。它区分线滚动（鼠标滚轮）和像素滚动（触控板、魔术鼠标）事件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-12T12:52:53.747

我在 Swift 中的回答，但对于 Objective C 逻辑是一样的：

```
override func scrollWheel(with event: NSEvent) {
  if event.subtype == .mouseEvent {
    // mouse
  } else {
    // trackpad
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-18T15:24:05.743

@AProgrammer 给出的答案可能不可用。因为魔术鼠标产生的滚轮事件的相位值为：开始、改变和结束。并且由强大的鼠标生成的滚轮事件对于相位和动量相位都具有无值。所以该方法只能区分威力鼠标与魔术鼠标和触控板。

# c# - 为什么不调用此 C# 4.0 异步方法？

> ID：13807618
> 
> 赞同：5
> 
> 时间：2012-12-10T19:17:17.877
> 
> 标签：c#, asynchronous, action, begininvoke

我正在尝试编写一段非常简单的异步代码。我有一个不带任何参数的 void 方法，该方法将从 Windows 服务中调用。我想将它从异步中启动，这样服务就不必等待方法完成。

我创建了一个非常简单的测试应用程序，以确保我正确地进行了编码，但是没有调用异步方法。任何人都能够看到我做错了什么？顺便说一句，我使用的是 .NET 4.0，所以我不能使用 await（这会简单得多！）。

这是我的整个测试样本...

```
using System;
using System.Threading;

namespace AsyncCallback {
  internal class Program {
    private static void Main(string[] args) {
      Console.WriteLine(DateTime.Now.ToLocalTime().ToLongTimeString() + " - About to ask for stuff to be done");
      new Action(DoStuff).BeginInvoke(ar => StuffDone(), null);
      Console.WriteLine(DateTime.Now.ToLocalTime().ToLongTimeString() + " - Asked for stuff to be done");
    }

    private static void StuffDone() {
      Console.WriteLine(DateTime.Now.ToLocalTime().ToLongTimeString() + " - Stuff done");
    }

    private static void DoStuff() {
      Console.WriteLine(DateTime.Now.ToLocalTime().ToLongTimeString() + " - Starting to do stuff");
      Thread.Sleep(1000);
      Console.WriteLine(DateTime.Now.ToLocalTime().ToLongTimeString() + " - Ending doing stuff");
    }
  }
} 
```

谢谢你提供的所有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T19:21:19.883

您的程序在异步方法部署到`ThreadPool`. 让您的程序保持打开状态。也许`Console.ReadKey()`在年底`Main`？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T19:22:38.723

只要没有未完成执行的**前台线程，任何应用程序都将结束。**如果有任何后台线程，它们将不会使进程保持“活动”。

因为您在后台启动异步任务，并且没有任何东西保持前台线程运行，所以整个进程正在退出。

您要么需要在前台线程中运行您的异步任务（据我所知，这无法完成`BeginInvoke`，您需要`Thread`显式创建一个新线程）或执行其他操作来阻止主线程，直到它完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T19:26:13.847

你不是在等待完成，所以试试这样的

```
 Console.WriteLine(DateTime.Now.ToLocalTime().ToLongTimeString() + " - About to ask for stuff  to be done");
 var a = new Action(DoStuff);
 var iar = a.BeginInvoke(ar => StuffDone(), null);
 a.EndInvoke(iar);
 Console.WriteLine(DateTime.Now.ToLocalTime().ToLongTimeString() + " - Asked for stuff to be done"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T19:35:45.723

首先，您的回调不是正确的委托......它应该是

```
public delegate void AsyncCallback(IAsyncResult ar); 
```

而你的是

```
private static void StuffDone() 
```

只需将其更改为以下内容：

```
private static void StuffDone(IAsyncResult ar){} 
```

然后在您的回调中确保 Action 通过调用实际执行

```
EndInvoke 
```

在`AsyncState`

像这样：

```
private static void StuffDone(IAsyncResult ar)
{
    Action r = ar.AsyncState as Action;
    r.EndInvoke(ar);

    Console.WriteLine(DateTime.Now.ToLocalTime().ToLongTimeString() + " - Stuff done");
} 
```

您需要进行的另一项更改是，当您在主函数中实例化动作时，将动作本身作为`BeginInvoke`方法的“对象”参数传递，如下所示：

```
Action d = new Action(DoStuff);
d.BeginInvoke(StuffDone, d); 
```

这应该可以解决您的问题:)

# amazon-web-services - 如何查找 Amazon AMI 如何创建日期

> ID：13807619
> 
> 赞同：14
> 
> 时间：2012-12-10T19:17:23.547
> 
> 标签：amazon-web-services, amazon-ec2

有没有办法从 AWS 控制台或命令行找出 Amazon EC2 AMI 创建日期/时间？

注意：我不是在寻找实例创建，而是在何时创建特定的 AMI？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T22:44:31.453

自 2006 年以来，查询 AMI 的创建日期一直是一项请求功能。

当我在 2007-2009 年创建社区 AMI 时，我开始了在 AMI 名称/描述中包含创建日期的趋势（例如，20121210）。许多流行的 AMI 系列都采用了这种做法，因此您可能需要查看 AMI 的名称和描述以查找日期字符串。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-09T21:28:42.980

[来自 AWS 的“最新消息”：](http://aws.amazon.com/about-aws/whats-new/2015/04/search-and-sort-your-amazon-machine-images-ami-by-creation-date/)

> AMI 创建日期现在在 AWS 管理控制台上可用。您可以通过转至 EC2 控制台并在左侧导航菜单中选择 AMI 来找到此属性。您应该会在 AMI 页面上看到一个名为“创建日期”的新列

您还可以使用 AWS EC2 CLI 查看此“CreationDate”属性：

```
ec2 describe-images --image-ids ami-a3e0thy0 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-02-18T20:47:42.090

两种选择：

1) 您可以从 EC2 快照面板查看有关关联快照的信息，特别是“已启动”字段，它将告诉您快照开始的时间。我认为这非常接近，并且对于我的同事和我创建的 AMI 来说效果很好——对于私有 AMI 来说不是那么好。只需在“块设备”字段的 AMI 视图中找到快照 ID (snapshot-1234abcd)，然后在“快照”视图中查找该快照。

2) 如果您位于提供 AWS CloudTrail 的区域，您可能可以在 CloudTrail 日志中找到该信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-10T22:38:00.603

目前这是不可能的。不过，更好地跟踪 AMI 版本的能力是一项经常被要求的功能。预计 AWS 将很快发布该领域的一些增强功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-14T05:22:58.750

如果您想使用 CLI，但只需要图像 ID 和创建日期，您可以运行以下命令：

```
aws ec2 describe-images --image-ids ami-XXXXXXXX --query 'Images[*].[ImageId,CreationDate]' 
```

# batch-file - 包含未正确解释的路径的变量？

> ID：13807622
> 
> 赞同：0
> 
> 时间：2012-12-10T19:17:47.160
> 
> 标签：batch-file

我有以下代码：

```
@ECHO OFF

    IF EXIST comandosAEjecutar.tpl (DEL comandosAEjecutar.tpl)

    ECHO Procesando archivos a subir...
    FOR /f "tokens=1 delims=," %%g IN (config.tpl) DO ECHO open %%g>> comandosAEjecutar.tpl
    FOR /f "tokens=2 delims=," %%g IN (config.tpl) DO ECHO %%g>> comandosAEjecutar.tpl
    FOR /f "tokens=3 delims=," %%g IN (config.tpl) DO ECHO %%g>> comandosAEjecutar.tpl
    ECHO binary>> comandosAEjecutar.tpl
    FOR /f "tokens=4 delims=," %%g IN (config.tpl) DO ECHO cd %%g>> comandosAEjecutar.tpl
    FOR /f "tokens=5 delims=," %%p IN (config.tpl) DO @SET pathLocal=%%p

    FOR /r . %%g IN (%pathLocal%\*.txt %pathLocal%\*.zip) DO ECHO delete %%~nxg>> comandosAEjecutar.tpl
    FOR /r . %%g IN (%pathLocal%\*.txt %pathLocal%\*.zip) DO ECHO put %%~nxg>> comandosAEjecutar.tpl

    ECHO bye>> comandosAEjecutar.tpl

    ECHO Comienzo de la sesion FTP...

    FTP -i -s:"comandosAEjecutar.tpl"

    ECHO Finalizado.
    PAUSE
    EXIT 
```

实际问题在于以下几行：

```
 FOR /f "tokens=5 delims=," %%p IN (config.tpl) DO @SET pathLocal=%%p

    FOR /r . %%g IN (%pathLocal%\*.txt %pathLocal%\*.zip) DO ECHO delete %%~nxg>> comandosAEjecutar.tpl
    FOR /r . %%g IN (%pathLocal%\*.txt %pathLocal%\*.zip) DO ECHO put %%~nxg>> comandosAEjecutar.tpl 
```

我知道变量“pathLocal”设置正确，因为我做了一个 ECHO，它显示了正确的路径，例如：\\red\C\pc\pc.com\serv\down\bol

问题是以下两行没有将变量解释为路径，因为当我在该目录上有 .txt 和 .zip 文件时，它们没有产生任何结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:18:54.753

我相信您的问题是括号中的 pathlocal 变量，请尝试在 /r 之后移动它

```
FOR /r %pathLocal% %%g IN (*.txt *.zip) DO ECHO delete %%~nxg>> comandosAEjecutar.tpl
FOR /r %pathLocal% %%g IN (*.txt *.zip) DO ECHO put %%~nxg>> comandosAEjecutar.tpl 
```

# python - 使用python队列，加载到队列中有多少？

> ID：13807623
> 
> 赞同：0
> 
> 时间：2012-12-10T19:17:46.437
> 
> 标签：python, queue

我正在构建一个线程应用程序。我有数以百万计的工作要排队。我可以将它们全部放入队列中，然后一次将它们分发给大约 100 个线程吗？

# registration - Joomla注册新用户不起作用

> ID：13807624
> 
> 赞同：0
> 
> 时间：2012-12-10T19:17:48.290
> 
> 标签：registration, joomla2.5

我正在尝试创建新用户，但由于未知原因它不起作用。在插入注册所需的信息并单击提交后，将显示空白页面，在管理员面板中插入创建新用户所需的数据后，将显示此错误文本：

```
Notice: Use of undefined constant Mkrl - assumed 'Mkrl' in /home/shopping/public_html/libraries/phpmailer/phpmailer.php on line 2322

Notice: Use of undefined constant lkFxM4 - assumed 'lkFxM4' in /home/shopping/public_html/libraries/phpmailer/phpmailer.php on line 2323

Notice: Use of undefined constant qdco5Up - assumed 'qdco5Up' in /home/shopping/public_html/libraries/phpmailer/phpmailer.php on line 2323

Notice: Use of undefined constant kqoo_uwuw_ouok_qzzsy - assumed 'kqoo_uwuw_ouok_qzzsy' in /home/shopping/public_html/libraries/phpmailer/phpmailer.php on line 2324

Notice: Use of undefined constant well_wsgz_vwnw_mwrmy - assumed 'well_wsgz_vwnw_mwrmy' in /home/shopping/public_html/libraries/phpmailer/phpmailer.php on line 2324

Notice: Undefined index: EahdNfBKEH in /home/shopping/public_html/libraries/phpmailer/phpmailer.php on line 2325 
```

可能是什么问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:21:06.237

您的网站已被黑客入侵！

检查您的库/phpmailer/phpmailer.php。它应该包含不超过 1909 行。额外的行是恶意代码。

另外，检查您的 INSTALL.php。它也可能包含代码。

我还必须清理我的 /tmp 目录。

然后你应该通过这个清单[http://docs.joomla.org/Security_Checklist/You_have_been_hacked_or_defaced](http://docs.joomla.org/Security_Checklist/You_have_been_hacked_or_defaced)

# activeadmin - ActiveAdmin - 使用默认值过滤

> ID：13807625
> 
> 赞同：15
> 
> 时间：2012-12-10T19:17:49.110
> 
> 标签：activeadmin

想知道是否可以使用活动管理员使用默认值进行过滤？这将有助于为管理员用户预加载数据。

```
filter  :country, :default=>'US' 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-17T00:12:25.623

您可以通过定义 before_filter 来做到这一点

```
 before_filter :only => [:index] do
    if params['commit'].blank?
       #country_contains or country_eq .. or depending of your filter type
       params['q'] = {:country_eq => 'US'} 
    end
  end 
```

升级版：

在某些情况下，如果 params[:q] 为空或 params[:scope] 为空，您需要设置过滤器

所以这可能会更好

```
 before_filter :only => [:index] do
    if params['commit'].blank? && params['q'].blank? && params[:scope].blank?
       #country_contains or country_eq .. or depending of your filter type
       params['q'] = {:country_eq => 'US'} 
    end
  end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-04-29T13:47:55.727

改编后的 Fivells 回答可以正确使用范围和下载。感觉很hacky，但似乎可以完成这项工作。注释中的意图。

```
 before_filter only: :index do
    # when arriving through top navigation
    if params.keys == ["controller", "action"]
      extra_params = {"q" => {"country_eq" => "US"}}

      # make sure data is filtered and filters show correctly
      params.merge! extra_params

      # make sure downloads and scopes use the default filter
      request.query_parameters.merge! extra_params
    end
  end 
```

# javascript - 从 iFrame 获取内容，错误在哪里？

> ID：13807627
> 
> 赞同：0
> 
> 时间：2012-12-10T19:17:54.300
> 
> 标签：javascript, html, css, jsp, iframe

我想为同一域中的多个 URL 获取安全区域（Int​​ernet 区域/本地 Intranet）。我认为最好的解决方案是通过 iFrame 来解决这个问题。@Teemu。代码现在可以工作了。非常感谢你。但到目前为止有一个问题：它显示错误的文本。尽管该页面位于受信任区域（本地 Intranet）中，但他显示“不受信任”（Internet 区域）。知道为什么吗？

```
<html>
<head>
<script type="text/javascript">

function getZone() {
    var text = new Array();
    document.getElementsByClass('iframeNames');

var test;
for (var i = 0; i < document.frames.length; i++) {
try {
    test = document.frame[i].contentWindow.document;
    text[i] = "Trusted (Local Intranet)";
} catch (e) {
    text[i] =  "Untrusted (Internet Zone)";
}
} //end-for

    var showText = getElementsByClass("zone");
    for (var i = 0; i < showText.length; i++) {
        setText(showText[i], text[i]);
    };
} //end getZone()

function setText(showText, text) {
    showText.innerHTML = text;
} //end setText

if (document.getElementsByClassName) {
    getElementsByClass = function (classList, node) {
        return (node || document).getElementsByClassName(classList);
    };
}

</script>
</head>

<style type="text/css">
tr:nth-child(2n) {
    background-color: #ddd;
}
.format {
    background-color: #ffff;}

#formatierung {
margin-left: 10px;
margin-top: 30px;
font-family: Arial;
font-size: 13px;

}

</style>

<body>

<iframe src = "http://example.com" class = "iframeNames" width = "0" 
height ="0"></iframe>
<iframe src = "http://example.com/index/" class = "iframeNames" width = "0" 
height =  "0"></iframe>

<script type = "text/javascript">
window.onload = function() {

getZone();

};
</script>

<div id = "formatierung">

<table width = "100%">

<tr class = "format"><td><h2>System</h2></td><td><h2>Check Security-Zone</h2></td></tr>
<tr><td>example1</td><td class = "zone"></td></tr>
<tr><td>example2</td><td class = "zone"></td></tr>

</table>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T07:19:17.527

你可以试试这个：

```
var test;
for (var i = 0; i < document.frames.length; i++) {
    try {
        test = document.frames[i].document;
        text[i] = "Trusted (Local Intranet)";
    } catch (e) {
        text[i] =  "Untrusted (Internet Zone)";
    }
} 
```

使用此代码，您根本不需要`isTrustedIE()`。

就像我在之前的评论中所说的那样，`frames[]`是文档中“窗口”对象的集合。这段代码只是检查它是否可以`document`在`iframe`. 这是不可能的，当`iframe`'s 的内容是从跨域源加载时。

# excel - 如何根据excel中的其他单元格值更新单元格值

> ID：13807632
> 
> 赞同：0
> 
> 时间：2012-12-10T19:18:19.627
> 
> 标签：excel, vba

在随附的电子表格（销售分析报告）中，我想使用以下字段自动更新 H 列值。 ![在此处输入图像描述](../Images/9d9b3717db7b809bab5fd00752828831.png)

![在此处输入图像描述](../Images/8c7402626f900f5435536943fcb79c0f.png)

![在此处输入图像描述](../Images/8de868275fae56eff1b1be699ac2452f.png) **销售额：D 列**、**销售额：H 列**、**已收款项：D 列**和**已收款项：H 列**

您能否指导我如何通过宏（VBA 代码）来实现这一点（或者）我们也可以用一个简单的公式来实现这一点。

我已经用颜色突出显示了这个逻辑所需的所有单元格。

提前感谢您的宝贵时间并感谢您的帮助。

问候，纳里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:19:17.903

这里不需要 VBA，Narry。

`H1`在客户信息选项卡的单元格中输入此公式：

`=SUMIF(Sales!D:D,D1,Sales!H:H)-SUMIF('Payments Recieved'!D:D,D1,'Payments Recieved'!H:H)`

然后向下拖动以适应其他行。

您可以轻松地 google 'vlookup' 或查看 Excel 帮助以了解有关它的作用的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:29:54.853

我假设您希望将 H 列与 G 列和 F 列相乘。如果这是正确的，那么一个简单的公式将起作用。

H1型`=F1 * G1`

复制此单元格。选择 H 中需要公式的其余单元格，然后粘贴。

# c++ - #include 指令对 sql 有意义吗

> ID：13807634
> 
> 赞同：0
> 
> 时间：2012-12-10T19:18:28.337
> 
> 标签：c++, sql, directive

我知道 sql 不支持 #include 指令，但我找不到不支持的原因。我正在一个项目中工作，我可能需要添加这种支持，以便 sql 文件可以包含另一个。我可能错过了什么明显的事情吗？提前致谢。

问候，裴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:23:05.033

It is hard to imagine what `#include` would be used for.

*   Constant definitions?
*   Function definitions?
*   Error messages?

In all the 100+k lines of SQL code I have written, I have never had the urge to include anything else.

The closest I come is to copy and paste and then modify a previously written query or `create table`. I suppose if there were a macro parametrization scheme, I might devise a way to use includes, but mostly it would not be useful.

# android - 使用 phonegap 创建 android 时出现 Microsoft JScript 运行时错误

> ID：13807635
> 
> 赞同：0
> 
> 时间：2012-12-10T19:18:30.793
> 
> 标签：android, cordova

我正在尝试使用 Cordova 2.2.0 (PhoneGap) 在 Windows 上创建一个 Android 项目。但我收到一条消息“Microsoft JScript 运行时错误：'length' 为空或不是对象”。

您能否建议可能导致此错误的原因以及可能的修复方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:24:02.767

尝试查找 Android API 目标时，create.js 第 38 行中出现错误。

您需要启动 Android SDK Manager 来安装 Android API。您可以在命令提示符下键入 android 以启动 Android SDK Manager。然后选择一个 Android API 来安装这些包。

# html - CSS 按钮和缝合效果在 IE 中不起作用

> ID：13807644
> 
> 赞同：2
> 
> 时间：2012-12-10T19:19:32.280
> 
> 标签：html, css

[我的网站在这里](http://www.inside-guides.co.uk/brentwood/pages/index.html)使用 CSS 按钮，但它们在 IE 中不起作用，我无法弄清楚为什么它们应该如此。

这是CSS：

```
/* Buttons: Common Style */
.big, .medium, .small{display: block;
text-align: center;
cursor:pointer;
font-family: sansus webissimo;
font-weight:normal !important;
text-shadow: 0 1px 0 rgba(34, 34, 34, 0.8);
color: #ffffff;
border-radius: 15px;
box-shadow: 0 1px 2px rgba(0, 0, 0, 0.4), 0 1px 0 rgba(26, 26, 26, 0.8) inset;
-webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.4), 0 1px 0 rgba(255, 255, 255, 0.4) inset;
-moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.4), 0 1px 0 rgba(255, 255, 255, 0.4) inset;
}

/* Buttons: Sizes */
.big {width: 130px;padding:1px;font-size:25px;}
.medium {width: 80px;padding:3px;font-size:21px;}
.small {width: 68px;padding:3px;font-size:17px;}
.big:active, .medium:active, .small:active{box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2) inset, 0 1px 2px rgba(0, 0, 0, 0.1);outline: 0 none;} 
```

同样在 IE 中，我[对标题标题和框标题使用 css 拼接效果](http://www.inside-guides.co.uk/brentwood)，但是当边框半径不均匀时，即。'border-radius:6px' 则缝合效果仅在 IE 中不起作用。

这是CSS：

```
/* TITLE BORDERS */
h1, h2, #left-nav .quickjump h2, .right-nav .banners h3, #left-nav .banners h3, h3.twitter, #datepicker .ui-widget-header, #datepicker .ui-datepicker .ui-datepicker-header {margin-bottom:5px;font-family:'league gothic';font-size:26px;text-transform:uppercase;padding:0px 12px;
background: #7B6E80;
-moz-box-shadow: 0 0 0 2px #7B6E80, 1px 1px 3px 2px rgba(85, 85, 85, .5);
-webkit-box-shadow: 0 0 0 2px #7B6E80, 1px 1px 3px 2px rgba(85, 85, 85, .5);
box-shadow: 0 0 0 2px #7B6E80, 1px 1px 3px 2px rgba(85, 85, 85, .5);
color: white;
border: 1px dashed #ddd;
text-shadow: 0 1px 1px #222222;
border-radius: 6px 6px 0 0;
line-height: 1.3;
} 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:21:42.687

The stitching effect is partially created by box-shadow, a property not supported by IE<9

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:40:29.557

我做了很多研究并得出结论，它们只是 IE 错误，所以答案是没有答案。

同样对于 CSS 按钮，过滤器需要针对 IE 进行调整。

# python - 二级列表的“列表索引超出范围”/空值

> ID：13807646
> 
> 赞同：0
> 
> 时间：2012-12-10T19:19:36.413
> 
> 标签：python, list, null

我正在尝试向我的程序添加一个新部分，该部分在我们的服务器上搜索机器人并删除它们，但我遇到了一个停止显示的问题：每当程序进入第二部分（我已经添加） “readFirst”的输出是“[]”。当接下来的几行运行时，出于显而易见的原因，我得到一个“列表索引超出范围”错误。

我不知道为什么会发生这种情况，因为 readlines 变量不应该由程序的两个部分共享。

这是代码：

```
while runTimes >= 0:
#Cycles through .php files
openedProg = glob.glob('*.php')
openedProg = openedProg[currentPhp:currentPhp+1]
progInput = ''.join(openedProg)
if progInput != '':
    theBot = open(progInput,'r')

    #Singles out "$output" on this particular line and closes the process
    readFourthFromBottom = theBot.readlines()
    wholeLine = (readFourthFromBottom[-4])
    output = wholeLine[4:11]

    #Singles out "set_time_limit(0)"
    readFirst = theBot.readlines()
    print(readFirst)
    wholeLine2 = (readFirst[0])
    output2 = wholeLine2[7:24]
    print(output2)

    theBot.close()
if progInput == '':
    currentPhp = -1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:23:59.237

第一次执行 readlines() 时，您正在阅读所有行。

第二次调用 readlines 时，它从文件末尾开始，因此没有什么可读取的。

该`readFirst`变量毫无价值，您已经拥有名称不佳的`readFourthFromBottom`变量中的所有行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:25:18.843

`readlines()`一直读取到文件流的末尾，这意味着光标在文件末尾。真的，这里的问题是`readFourthFromBottom`变量名不准确。它应该是`all_lines`，因为它将包含列表中文件的所有行。那么你应该只使用它而不是尝试重新读取 to 中的行`readFirst`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T19:26:56.240

`readlines`将从 IO 对象中读取所有行。因此，任何后续尝试从文件中读取内容都会产生 EOF，因此第二次尝试`readlines`永远不会返回任何其他内容。

您可以在再次使用之前[寻找](http://docs.python.org/3/library/io.html#io.IOBase.seek)文件的开头`readlines`，或者更好的是，只需*重用*您读过的行。除非您修改`readFourthFromBottom`（顺便说一句，这是一个可怕的变量名），否则您没有理由*再次*阅读这些行。

# ruby-on-rails-3 - Twitter 引导日期时间选择器

> ID：13807649
> 
> 赞同：0
> 
> 时间：2012-12-10T19:19:44.823
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, datetimepicker

我正在尝试将[https://github.com/mgussekloo/my-bootstrap-datetimepicker](https://github.com/mgussekloo/my-bootstrap-datetimepicker)与 twitter bootstrap 一起使用，但它不起作用。我不知道它是如何无法工作的，因为我只是按照示例进行操作，没有进行自定义。

PS 出现以下错误：

未捕获的类型错误：对象 [object Object] 没有方法“datepicker”。

我不确定我是否做得对，所以这里是输入的代码：

```
<input type="text" class="data-datepicker-format" data-datepicker-format="dd/mm/yyyy" /> 
```

任何想法如何解决它？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:59:21.683

根据我们在另一个答案的评论中的讨论，问题似乎是您正在加载 Bootstrap DatePicker 和 jqueryUI DatePicker 库。

如果您确实需要使用 jqueryUI，则需要构建一个没有 DatePicker 的 jqueryUI 包。您可以在[jqueryUI 下载站点](http://jqueryui.com/download/)上执行此操作。

***编辑***：要清楚，您可以将 jquery 留在原处。只有 jquery **- UI**需要被删除，或者您需要一个不包括 DatePicker 的自定义 jqueryUI 包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:07:23.363

您是否忘记在脚本部分中包含 datepicker.js？

```
<script src="/path/to/datepicker.js" type="text/javascript"></script> 
```

确保在加载引导程序主库**之后**加载 datepicker.js，并且在加载调用 .datepicker() 的脚本**之前加载。**

# vba - 如何在 Excel 中禁用/重新启用宏？

> ID：13807651
> 
> 赞同：0
> 
> 时间：2012-12-10T19:19:54.963
> 
> 标签：vba, excel, visual-studio-macros

我一直在 Excel 文档上使用宏，它可以放大任何工作表中的图表。问题是，如果我想编辑图表，我必须点击它，触发缩放。

出于这个特殊原因，我需要禁用宏，并且想知道是否有一个易于访问的按钮或键盘快捷键来切换它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:43:43.330

在 XL 文件中：

1) 按`Alt+F11`

2) 转到 ThisWorkbook 模块并注释掉两个 subs 中的两行。

3) 保存并关闭文件，然后重新打开。

4）然后您可以编辑您心中的内容。

5）要重新打开缩放器，请取消注释行。您可能需要再次保存、关闭并重新打开

**注意**-> 请参阅原始帖子的评论以获取更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T15:15:04.493

如果您想要更多的控制权而不必不断地注释/取消注释宏，您可以在宏中添加类似这样的内容。确保将其放在顶部，在任何其他代码之前：

```
Dim mb As VbMsgBoxResult    'Declare a variable to hold the messagebox result
'Prompt the user:
mb = MsgBox("Would you like to edit this chart?", vbYesNo, "Edit Chart?")
If mb = vbYes Then
    Exit Sub   'If user wants to edit the chart, then exit this subroutine
    'a response of "No" will allow the sub to continue uninterrupted
End If 
```

如果没有确切地看到宏是如何被调用的，这可能需要一些调整，但它本质上只是一个提示，询问您是否希望宏（缩放）继续，或者您是否希望它终止，允许您访问图表对象编辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-12T23:09:18.993

从 Excel 2010* 开始，“开发人员”选项卡上实际上有一个选项，可让您像 ABC 一样简单地禁用宏。[设计模式可让您做到这一点！](http://i.stack.imgur.com/QINNn.png)

*甚至更早的版本。

# django - Django 和 facebook 登录：无法在回调中获取“代码”变量

> ID：13807652
> 
> 赞同：0
> 
> 时间：2012-12-10T19:19:56.233
> 
> 标签：django, facebook

这是我的观点.py

```
def facebook_login(request):
    f = FacebookAPI(client_id=FACEBOOK_APP_ID, client_secret=FACEBOOK_API_SECRET, redirect_uri=SITE_URL+'/login/facebook/')
    if request.GET.has_key('code'):
        code = request.GET.get('code')
        logger.debug(code)
    return HttpResponseRedirect('/') 
```

`code`变量在这里始终为空。当我尝试手动访问它时，它工作正常，我`code`以这种方式获得。 `https://graph.facebook.com/oauth/authorize?redirect_uri=http%3A%2F%2Ffoo.bar.net%2Flogin%2Ffacebook/&client_id=123456789`

我正在使用下一个[库](https://github.com/michaelhelmick/requests-facebook)来处理 FB API

不知道这里有什么问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:44:51.807

当然，我发现了这个问题，很蹩脚。修复如下：

```
def facebook_login(request):
    if request.GET.has_key('code'):
        code = request.GET.get('code')
        logger.debug(+code)
    else:
        redirect_url = 'https://facebook.com/dialog/oauth?client_id='+FACEBOOK_APP_ID+'&redirect_uri='+SITE_URL+'/login/facebook/'
        return HttpResponseRedirect(redirect_url)
    return HttpResponseRedirect('/login.html') 
```

# php - 页面集是什么意思？

> ID：13807655
> 
> 赞同：0
> 
> 时间：2012-12-10T19:20:04.137
> 
> 标签：php, javascript, html

问起来似乎很愚蠢，但我在互联网上找不到具体的解决方案。页面集是什么意思。当有人说，在 Pageset 中包含代码时，他们指的是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:29:14.910

> 一组用于应用程序执行控制的 Pages。PageSet 管理、存储、匹配和执行页面。

这就是我能找到的关于这个词的全部内容。基本上说如果说你有一个博客，你可以有一个页面集来修改条目，如添加、编辑、删除。这些操作中的每一个都将具有不同的页面和控件来运行该操作。一个页面集将是这些的组。

# ruby-on-rails - Rails: Complex polymorphic association

> ID：13807656
> 
> 赞同：0
> 
> 时间：2012-12-10T19:20:10.833
> 
> 标签：ruby-on-rails, ruby

I have a User model who has one Profession (Designer, Model, Photograph, ...). Each profession has specific attributes, so each profession has its own table.

Now in my User I would like to say that a User has_one :profession, where the profession is Photograph, Designer, or whatever else.

My first idea was to use the Profession model as a STI but if I do this I cannot have a table for each real profession...

How would you design this?

Thanks, Greg

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:25:47.593

我会将`has_one`关联翻转为 a`belongs_to`并使用多态关联。模型代码将是：

```
class User < ActiveRecord::Base
  belongs_to :profession, :polymorphic => true
end

# similar code for other professions
class Designer < ActiveRecord::Base
  has_one :user, :as => :profession
end 
```

迁移将如下所示：

```
change_table :users do |t|
  t.references :profession, :polymorphic => true
end 
```

# jquery - JQuery Mobile check if select menu is disabled

> ID：13807658
> 
> 赞同：0
> 
> 时间：2012-12-10T19:20:23.640
> 
> 标签：jquery, jquery-mobile

in JQuery Mobile how do I check if select menu (html select) is disabled or not?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:25:54.473

与常规选择相同的方式，这种方式：

```
$('#yourselect').is('[disabled]') //returns true or false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:26:05.393

只需使用[.prop()](http://api.jquery.com/prop/)来检查 disabled 属性

```
$('yourselect').prop('disabled') // <-- will return true or false 
```

# excel - Programming for "no data found"

> ID：13807662
> 
> 赞同：0
> 
> 时间：2012-12-10T19:20:32.983
> 
> 标签：excel, vba

New to VBA. I need to enter a number in text box and search spreadsheet for that number and then return the data in columns beside the found number in text boxes in form. I have done this but the question I have is how to write an exception if the number is not found?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:03:30.517

You can do this with a formula. Let's assume your number is in A1 and your list of numbers is in column D. You want the text in column E if you find the number in A1 within the list in Column D.

Normally you would just use `VLOOKUP()`.

```
=VLOOKUP(A1,D:E,2,FALSE) 
```

You can add a simple IF statement and `ISERROR()` to check if it succeeded in finding the number or not. Normally Excel will return "#N/A" if it was an error, but let's assume you want a message.

```
=IF(ISERROR(VLOOKUP(A1,D:E,2,FALSE)),"ERROR",VLOOKUP(A1,D:E,2,FALSE)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:34:54.443

像这样。*对工作表名称、范围名称、文本框名称等所做的假设。仅出于说明目的而向您展示如何去做*：

```
Sub FindNumber()

Dim myNum

myNum = TextBox1.Value

Dim rng as Range

Set rng = Sheets(1).Range("A1:A100").Find(myNum,lookat:xlWhole)

If Not rng is Nothing Then

    '[Rest of Code]

Else

   Msgbox myNum & "not found in Range"

End If

End Sub 
```

# apache - Rewrite rule is applying to existing directories

> ID：13807663
> 
> 赞同：0
> 
> 时间：2012-12-10T19:20:39.173
> 
> 标签：apache

In my apache site configuration file, I have the following. The rewrite rule works fine, but the rule is applying to existing directories which my rewrite conditions were supposed to fix. Here is my rewrite script:

```
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^([a-zA-Z0-9_]+)/?$ test.php?n=$1 [L] 
```

So `example.com/username` works great and uses `test.php`, but also when I enter an existing sub-directory that has an `index.php` file in it, aka, `example.com/myDirectory/` still uses test.php. Any idea what's wrong with my script? Thanks.

Below is a rewrite log for request `myDirectory` which is an existing directory:

```
(2) init rewrite engine with requested uri /myDirectory/
(1) pass through /myDirectory/
(3) [perdir /var/www/] strip per-dir prefix: /var/www/myDirectory/ -> myDirectory/
(3) [perdir /var/www/] applying pattern '^tag/([a-zA-Z0-9-]+)/?$' to uri 'myDirectory/'
(3) [perdir /var/www/] strip per-dir prefix: /var/www/myDirectory/ -> myDirectory/
(3) [perdir /var/www/] applying pattern '^([a-zA-Z0-9_]+)/?$' to uri 'myDirectory/'
(2) [perdir /var/www/] rewrite 'myDirectory/' -> 'test.php?n=myDirectory'
(3) split uri=test.php?n=myDirectory -> uri=test.php, args=n=myDirectory 
```

And here is the log for request `bananas` which is meant to use the rewrite (and does):

```
(2) init rewrite engine with requested uri /bananas
(1) pass through /bananas
(3) [perdir /var/www/] strip per-dir prefix: /var/www/bananas -> bananas
(3) [perdir /var/www/] applying pattern '^tag/([a-zA-Z0-9-]+)/?$' to uri 'bananas'
(3) [perdir /var/www/] strip per-dir prefix: /var/www/bananas -> bananas
(3) [perdir /var/www/] applying pattern '^([a-zA-Z0-9_]+)/?$' to uri 'bananas'
(2) [perdir /var/www/] rewrite 'bananas' -> 'test.php?n=bananas'
(3) split uri=test.php?n=bananas -> uri=test.php, args=n=bananas 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:03:43.353

所以，我应该发布我所有的代码。我在那里有第二个重写规则。所以它看起来像：

```
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^tag/([a-zA-Z0-9-]+)/?$ tag/index.php?t=$1 [L]
RewriteRule ^([a-zA-Z0-9_]+)/?$ test.php?n=$1 [L] 
```

我不知道的是，您必须在每条规则之前应用 RewriteCond。[我在这里找到了答案。](https://stackoverflow.com/questions/3277365/htaccess-seems-to-be-ignoring-rewritecond)

所以正确的做法是这样的：

```
RewriteEngine on
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^tag/([a-zA-Z0-9-]+)/?$ tag/index.php?t=$1 [L]
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule ^([a-zA-Z0-9_]+)/?$ test.php?n=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:50:51.580

看起来你在一个`<Directory>`块内有这些指令。如果我将这些规则逐字逐句放入我的本地 Apache 配置中：

```
<Directory "/srv/http">
        RewriteEngine On
        RewriteCond %{SCRIPT_FILENAME} !-d
        RewriteCond %{SCRIPT_FILENAME} !-f
        RewriteRule ^([a-zA-Z0-9_]+)/?$ test.php?n=$1 [L]
</Directory> 
```

并确保`RewriteLogLevel`为`>=`4：

```
RewriteLogLevel 4 
```

如果我请求，我会在日志中看到以下内容`/myDirectory`：

```
(2) init rewrite engine with requested uri /myDirectory/
(1) pass through /myDirectory/
(3) [perdir /srv/http/] strip per-dir prefix: /srv/http/myDirectory/ -> myDirectory/
(3) [perdir /srv/http/] applying pattern '^([a-zA-Z0-9_]+)/?$' to uri 'myDirectory/'
(4) [perdir /srv/http/] RewriteCond: input='/srv/http/myDirectory/' pattern='!-d' => not-matched
(1) [perdir /srv/http/] pass through /srv/http/myDirectory/ 
```

而如果我请求一个*不*存在的目录，我会得到类似的东西：

```
(2) init rewrite engine with requested uri /notmyDirectory/
(1) pass through /notmyDirectory/
(3) [perdir /srv/http/] add path info postfix: /srv/http/notmyDirectory -> /srv/http/notmyDirectory/
(3) [perdir /srv/http/] strip per-dir prefix: /srv/http/notmyDirectory/ -> notmyDirectory/
(3) [perdir /srv/http/] applying pattern '^([a-zA-Z0-9_]+)/?$' to uri 'notmyDirectory/'
(4) [perdir /srv/http/] RewriteCond: input='/srv/http/notmyDirectory' pattern='!-d' => matched
(4) [perdir /srv/http/] RewriteCond: input='/srv/http/notmyDirectory' pattern='!-f' => matched
(2) [perdir /srv/http/] rewrite 'notmyDirectory/' -> 'test.php?n=notmyDirectory' 
```

所以规则正在做你想要的。

尝试将速度提高`RewriteLogLevel`到 4（任何更低的都不会显示`RewriteCond`处理）。

# android - How to apply jelly bean apps themes for gingerbread apps?

> ID：13807666
> 
> 赞同：1
> 
> 时间：2012-12-10T19:20:56.510
> 
> 标签：android, styles, android-2.3-gingerbread, app-themes

In my new app, I want to use a common theme for jelly bean, ics and gingerbread phones. That is, my app should not look different in different platforms.

I have seen some app like 'fancy' which is using jelly bean like theme in gingerbread also.

I'm new to android.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:23:52.570

您可以使用[HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)库应用 Holo 主题。我在所有应用程序中都使用它，而且效果很好。

您必须将其添加为库项目才能使用它。如果您使用 Git，则可以将其添加为子模块。

# sql-server - Why can't I both index and include the same column in my index?

> ID：13807676
> 
> 赞同：3
> 
> 时间：2012-12-10T19:21:43.670
> 
> 标签：sql-server, sql-server-2008, indexing

Why can't I do something like the following? I want filters on this "common" column to be both fast and to also be able to return it without requiring a table scan.

```
CREATE NONCLUSTERED INDEX Ix_Foo
ON Foo (ForeignKeyID, ObjectID)
INCLUDE (ObjectID) 
```

When I do this, I get the error:

> *Cannot use duplicate column names in index. Column name 'ObjectID' listed more than once.*

I'd like this for queries such as this where I both want to return ObjectID as well as filter by it. The subquery here is an example of what I mean:

```
SELECT something FROM Bar
WHERE Bar.FooID IN
  (SELECT ObjectID FROM Foo WHERE ForeignKeyID=13 AND ObjectID IN (12, 13, 14, 15)) 
```

What am I conceptually missing?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T19:29:55.887

原因`ObjectId`已经作为键列包含在索引中，而您也试图将其作为非键列包含，这是不必要的。

```
CREATE NONCLUSTERED INDEX Ix_Foo
ON Foo (ForeignKeyID, ObjectID) 
```

这应该足以满足您的目的。

您通常需要包含非关键列，以便（引用[MSDN](http://msdn.microsoft.com/en-us/library/ms190806.aspx)）：

*   它们可以是不允许作为索引键列的数据类型。

*   在计算索引键列数或索引键大小时，数据库引擎不会考虑它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T20:37:22.563

Conceptually the leaf level in a non-filtered, non-clustered index in SQL Server has 1 row of data per row in the underlying table. The columns in the leaf level are the distinct columns from the following:

*   Columns that make up the index key. (So we can navigate the index)
*   A conceptual pointer to the corresponding row in the base table. (So we can get back to the corresponding row in the base table)

    *   For a heap, the pointer is the RID, or row identifier
    *   For a Clustered Index, the pointer is the key columns that make up the clustered index
*   Any included Columns (Extra columns stuck in for good measure)

For example:

```
CREATE TABLE t1 (id int not null, first_name varchar(20), last_name varchar(20))
CREATE CLUSTERED INDEX CIX_t1 on t1 (id)
CREATE INDEX IX_t1_a on t1 (first_name)
CREATE INDEX IX_t1_b on t1 (first_name) INCLUDE (id)
CREATE INDEX IX_t1_c on t1 (first_name) INCLUDE (id, last_name)
CREATE INDEX IX_t1_d on t1 (first_name, last_name)
CREATE INDEX IX_t1_e on t1 (first_name, id) 
```

The leaf level of IX_t1_a consists of (first_name, id)

The leaf level of IX_t1_b consists of (first_name, id)

The leaf level of IX_t1_c consists of (first_name, id, last_name)

The leaf level of IX_t1_d consists of (first_name, id, last_name)

The leaf level of IX_t1_e consists of (first_name, id)

Columns are never included twice. In the example above, indexes a,b,c are duplicates of each other. Likewise, indexes c and d are duplicates as well. (There are subtle differences in the non-leaf levels depending on the uniqueness of clustered and non-clustered indexes, but for which queries the index can be used for, they are identical.)

# javascript - How do I store a hash into a form input?

> ID：13807678
> 
> 赞同：4
> 
> 时间：2012-12-10T19:22:31.063
> 
> 标签：javascript, jquery

Say I have a hash and I want to enter it as a `val()`

```
$("#form_attribute").val( hash ) 
```

It gets stored as a string `"[Object, object]"`

How do I keep it as a hash and then allow the form to send this hash to my server?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T19:23:54.823

如果要将对象/值转换为 JSON 字符串，可以使用`JSON.stringify`以下方法：

```
$("#form_attribute").val(JSON.stringify(hash)) 
```

这是最新浏览器的内置方法，可将对象转换为表示它的 JSON 表示法。如果某个浏览器不支持它，可以在您的页面上包含几个 polyfill 以提供支持

* * *

**参考：**

*   `JSON.stringify`- [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)
*   `window.JSON`浏览器兼容性 - [http://caniuse.com/json](http://caniuse.com/json)
*   JSON3 polyfill - [http://bestiejs.github.com/json3/](http://bestiejs.github.com/json3/)
*   JSON2 polyfill - [https://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)
*   JSON2 vs JSON3 - [JSON polyfill：JSON 2 还是 JSON 3？](https://stackoverflow.com/questions/10963723/json-polyfill-json2-or-json3)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T19:24:43.510

您可以将其存储为 JSON 字符串：

```
$('#form_attribute').val(JSON.stringify(hash)); 
```

或者您可以将原始对象存储在数据属性中：

```
$('#form_attribute').data('hash', hash); 
```

# java - 在 java.lang.String 类型上找不到属性“someproperty”

> ID：13807683
> 
> 赞同：5
> 
> 时间：2012-12-10T19:23:03.267
> 
> 标签：java, jsp, servlets, javabeans

我收到此错误，我无法弄清楚问题可能出在哪里。“userid”列在数据库中并且在 bean 中。有谁有想法吗？

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /user.jsp     at line 24  

21:   
22:     <form method="POST" action="AdminServlet" name="frmAddUser">  
23:         User ID : <input type="text" readonly="readonly" name="userid"  
24:             value="<c:out value="${user.userid}" />" />   
Username : <input  
25:             type="text" name="firstName"  
26:             value="<c:out value="${user.firstName}" />" />   
LastName : <input  
27:             type="text" name="lastName"  

root cause   

javax.el.PropertyNotFoundException: Property 'userid' not found on type java.lang.String 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T19:31:40.553

例外基本上是告诉你那`${user}`是一个普通的`java.lang.String`。根据[javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)，它确实没有`getUserid()`表示`userid`属性的方法。

确保您`User`在所需范围内设置具体实例，而不是普通 vanilla `String`。由于您没有在问题中的任何地方显示您如何准备作用域变量，因此无法对此给出有针对性的答案，但它至少应该看起来像这样：

```
User user = userService.find(id);
request.setAttribute("user", user); // and thus not e.g. setAttribute("user", "user") or something. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:26:02.960

根据我的说法，应该是以下情况之一

*   数据类型与 bean 中对应的`userid`数据类型不匹配。它可能`integer`在数据库中。

*   该属性未在 bean 类中定义。名称可能不同，您必须推断它是`userid`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-09T16:52:33.160

你`<c:set var="user">${user}</c:set>`在jsp上做任何地方吗？

根据另一个问题的[响应 1](https://stackoverflow.com/questions/3576131/convert-integer-value-to-string-using-jstl-el)，当您在 JSP 中设置 var 时，JSP 会隐式转换为字符串。

# ruby-on-rails - GMaps4Rails 和 Turbolinks 在没有整页刷新的情况下无法加载

> ID：13807686
> 
> 赞同：12
> 
> 时间：2012-12-10T19:23:23.520
> 
> 标签：ruby-on-rails, google-maps-api-3, gmaps4rails

我正在使用 gmaps4rails 在“客户”显示页面上加载地图。我已经集成了 turbolinks 以使应用程序更加快速，但现在我遇到了一个问题，我必须使用地图刷新页面才能显示地图。我得到的只是一个空白的地图框。当我刷新页面时，地图正确显示。

我尝试添加 gem 'jquery-turbolinks'，但问题仍然存在。

鉴于：

```
<%= gmaps("map_options" => {:container_class => "map_container_renamed", "zoom" => 15, "auto_zoom" => false},"markers" => { "data" => @json }) %> 
```

在 application.js 中

```
//= require jquery
//= require turbolinks
//= require jquery.turbolinks
//= require jquery_ujs
//= require twitter/bootstrap
//= require_tree . 
```

[此处](https://gist.github.com/4254266)地图为空白的页面来源的要点。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-11T17:22:40.233

修复最终导致我需要加载整个页面才能刷新脚本。

添加

```
'data-no-turbolink' => true 
```

到地图页面的链接工作。

例如，如果我有一个客户的索引页面，并且我有一张客户在展示页面上所在位置的地图，那么转到展示页面的链接将采用如下格式：

```
<%= link_to 'View Client', client, class: "btn", 'data-no-turbolink' => true %> 
```

这将导致 html 和 javascript 的完全刷新，而不仅仅是更改的 html。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-19T02:19:12.760

## 技术背景

### 数据无涡轮链接

请注意，仅将属性添加`data-no-turbolink="true"`到链接会抑制该链接的 turbolinks。单击该链接会加载整个页面，而不是用 turbolinks 替换内容。

但是有几种方法可以在*不*抑制 turbolink 的情况下将 turbolink 与 gmaps4rails 一起使用。

### Turbolinks 回调

使用 turbolinks 的关键是使用提供的回调。在这种情况下，当 turbolinks 加载新页面时，必须告诉 gmaps4rails 执行地图加载。

一般来说，可以使用`$(document).on('page:load', function ... )`，例如[Railscast #390](http://railscasts.com/episodes/390-turbolinks)中所示。

### JavaScript 的同源策略

gmap4rails gem 包含的[google api 脚本从 google 静态服务器请求另一个脚本。](http://maps.google.com/maps/api/js?v=3.9&sensor=false&client=&key=&libraries=geometry&language=&hl=&region=)但是如果 api 被 turbolinks 动态包含，那么单源策略会阻止对 google 静态服务器的请求。

单源策略本身就是一个有用的东西。尽管有几种方法可以规避它，但这似乎不是一件自然的事情。相反，“正确的方法”是“证明”网页确实想要执行远程脚本（google api）并且远程脚本不是由恶意脚本请求的。这是通过在 html 树中包含直接请求 google api 的脚本标记来完成的。

在使用 turbolinks 时，只有在第一次请求时才能将 google api script 标签直接包含在 html 树中，因为所有以后的更改都是通过 turbolinks 动态注入到树中的。这意味着，当使用 turbolinks 时，即使在不显示地图的页面上也必须包含 google api。

## 解决方案 1（推荐）：为 gmaps4rails 使用 fork

我提出了一个拉取[请求](https://github.com/apneadiving/Google-Maps-for-Rails/pull/328)，希望为 gmaps4rails 添加 Turbolinks 支持。

### 演示

如果您愿意，请先看一下这个演示，它显示了 gmaps4rails 与 turbolinks 的使用：

*   [http://gmaps-turbolinks-demo.herokuapp.com/](http://gmaps-turbolinks-demo.herokuapp.com/)
*   [https://github.com/fiedl/gmaps4rails-turbolinks-demo](https://github.com/fiedl/gmaps4rails-turbolinks-demo)

### 如何在您的项目中使用它

您可以通过将 fork 添加到 Gemfile 来尝试一下并检查它是否适用于您的项目：

```
# Gemfile
# ...
gem 'turbolinks'
gem 'gmaps4rails', '~> 2.0.1', git: 'https://github.com/fiedl/Google-Maps-for-Rails.git'
# ... 
```

此外，您需要修改布局文件以将 api 包含在 html 头中：

```
<!-- app/views/layouts/application.html.erb -->
<html>
  <head>
    ...
    <%= stylesheet_link_tag    "application", :media => "all" %>
    <%= javascript_include_tag "application" %>
    <%= gmaps4rails_api_script_tags  #   <-- THIS IS NEW ----------------- %>
    <%= csrf_meta_tags %>
  </head>
  <body>
    ...
    <%= yield %>
    <%= yield :scripts %>
  </body>
</html> 
```

如果由于某种原因你不想使用这个 fork，我看到了两种使用 gmaps4rails 和 turbolinks 的替代方案：

## 解决方案 2：手动执行

基本上做与fork相同的事情（解决方案1），可以手动将api脚本添加到布局文件的头部。然后，当通过 turbolinks 加载页面时，可以使用 javascript 配置和激活地图。

这通常在 gmaps4rails wiki 中与 UJS 一起使用： [https ://github.com/apneadiving/Google-Maps-for-Rails/wiki/Using-with-UJS](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Using-with-UJS)

## 解决方案 3：手动包含 api 静态信息

如果您不想全局添加 api 脚本，有一种方法可以绕过单源策略并动态加载 api。

我为此准备了一个**要点**：[https ://gist.github.com/fiedl/6573175](https://gist.github.com/fiedl/6573175)

您必须添加一个执行两件事的 javascript 文件：

1.  加载[谷歌地图 api](http://maps.google.com/maps/api/js?v=3.9&sensor=false&client=&key=&libraries=geometry&language=&hl=&region=)本身。
2.  加载静态文件，该文件由 api 加载。

您可以通过在浏览器中打开[api 脚本](http://maps.google.com/maps/api/js?v=3.9&sensor=false&client=&key=&libraries=geometry&language=&hl=&region=)`getScript`并从底部的调用中复制 url 来找到静态文件的 url 。

**但是**：这样做会修复对您的语言环境的静态 api 请求，如果您的应用程序在国际上使用，这可能不是一件好事。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-07T01:16:26.553

在重新访问已经由 turbolinks 管理的页面时，我无法填充地图画布，尤其是在使用后退按钮时。我通过为 turbolinks 事件添加一个侦听器`page:load`来映射初始化来解决此问题。

**map.js.coffee**

```
google.maps.event.addDomListener(window, 'load', @_setup)
google.maps.event.addDomListener(window, 'page:load', @_setup) 
```

**应用程序.js.coffee**

```
//= require jquery
//= require jquery.turbolinks 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-28T06:17:49.053

正如可以在这个[Github 问题](https://github.com/apneadiving/Google-Maps-for-Rails/issues/390)中找到的那样，您可以将 google 脚本包含到您的所有页面中。这解决了 Turbolinks 不为新导航页面执行 gmaps4rails javascripts 的问题。

请注意，gmaps4rails gem 具有[javascript 依赖](https://github.com/apneadiving/Google-Maps-for-Rails/#requirements)项，即：

```
<script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script> 
```

您通常可以通过编辑将它们添加到所有页面中`app/views/layouts/application.html.erb`。

**应用程序.html.erb**

```
....
<head>
...
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>

  # insert the following two lines
  <script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
  <script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>

</head>
... 
```

另外，不要忘记通过编辑将源代码添加到您的资产管道`app/assets/javascripts/application.js`

**应用程序.js**

添加这个：

```
//= require gmaps/google 
```

现在，无需刷新页面即可加载地图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-02T10:50:41.360

我遇到了同样的问题，但我不想关闭 turbolinks，而且我无法正确处理 turbolink DOM 侦听器。

在修复另一个问题并重构我的 javascript 时，我偶然解决了这个问题。

这是我的functions.js

```
var init_map = function (allMarkers) {
handler = Gmaps.build('Google');
handler.buildMap({ provider: {maxZoom:17, minZoom:5}, internal: {id: 'map'}}, function(){
  markers = handler.addMarkers(allMarkers());
  handler.bounds.extendWith(markers);

   handler.fitMapToBounds();
});
};

var marker_check = function(){...};

var init_autocomplete = function () {...};

//function to call google maps functions

var init_google_api = function(function_name){
  $(document).ready(function(){
  google.maps.event.addDomListener(window, "load", function_name );
});
}; 
```

因为我也在使用 google places 库，所以我有几个可以用*init_google_api()调用的函数*

在我想要地图的每个视图中，我只需放置一个

```
<%= javascript_tag do %>
   init_google_api(init_map(marker_check));
<% end %> 
```

在视图的最后。修复了所有内容 + 保持代码干燥，因为想要不止一张地图等。

如果我没记错的话，这种方法绕过了 turbolink 问题，因为每次调用视图时，它都会执行 init_google_api 函数和作为参数传入的函数（这就是我使用函数表达式的原因）。所以每次调用函数时都会运行代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-03T00:56:43.483

您可以直接从谷歌地图 URL 使用回调

```
<script src="https://maps.googleapis.com/maps/api/js
 ?callback=yourInitFunction
 &key=&sensor=false"> 
```

但是请注意，您必须在调用此脚本之前定义您的 init 函数。

这是我如何进行的。我有一个助手可以生成 Gmaps 脚本标签，并回调正确的函数（+ 加载其他 gmaps 脚本）

```
# view/your_view.html.erb
<script>
function onGmapsInit() {
    // Your code here. You can also define this function in your assets/js directly.
}
</script>
<%= gmap_scripts(callback: 'onGmapsInit') %> 
```

还有我的帮手

```
# helpers/maps_helper.rb
module MapsHelper
  GMAPS_V3_URL = 'https://maps.googleapis.com/maps/api/js'

  def gmap_scripts(options = {})
    callback = options.delete(:callback)
    gmaps_v3_options = {
      src: "#{GMAPS_V3_URL}?#{callback ? "callback=#{callback}&" : ''}key=&sensor=false"
    }
    gmaps_utility_options = {
      src: '//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js'
    }
    capture do
      concat content_tag(:script, nil, gmaps_v3_options)
      concat content_tag(:script, nil, gmaps_utility_options)
    end
end 
```

什么 ？涡轮链接？有吃的吗？

我正在使用 Turbolinks 5，正如您在这段代码中看到的那样，您甚至不需要

`$(document).on('ready turbolinks:load')`

# xml-parsing - How to escape apostrophes when copying listview to sql table?

> ID：13807688
> 
> 赞同：0
> 
> 时间：2012-12-10T19:23:27.607
> 
> 标签：xml-parsing, apostrophe

I am a newbie programmer using VS2010 and coding in VB. I have a windows form application that parses multiple XML files and stores the data in a single table in SQL Server 08\. The app parses the XML with no problems, however, my issue is that when my INSERT query runs, it halts when it comes across a field that contains a single quote (i.e. CustomerName containing string "O'Leary, John"). Since the listview populates just fine with the single quotes left intact, I am assuming that the source of my problem is with my actual INSERT sql query. I have attempted to double the single quotes in order to escape it, but in doing so my query wont even execute and instead gives me an error message. Can anyone suggest a method for effectively escaping (or replacing) the single quotes in this string so that the data will write to my table? Keep in mind that I am parsing several thousand XML files using this app, so going into each XML file individually and 'correcting' the problematic string is not an option. Here is a sample of my code which is taking the data from my listview and attempting to load it into my table:

```
query1.CommandText = "INSERT INTO Cust_Tbl(CustomerID,CustomerName,SaleDate)
                      VALUES " & "('" & lvitem.subitems(0).Text & "','" _ 
                      & lvitem.subitem(1).Text & "','" & lvitem.subitems(2).Text & "')"
                      query1.ExecuteNonQuery() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:23:38.623

使用参数化查询，这将 a) 防止 SQL 注入黑客攻击 b) 自动处理撇号和命令字符

见[http://csharp-station.com/Tutorial/AdoDotNet/Lesson06](http://csharp-station.com/Tutorial/AdoDotNet/Lesson06)

虽然有很多教程

# c# - need to handle double and single quote in C# code behind

> ID：13807689
> 
> 赞同：-2
> 
> 时间：2012-12-10T19:23:38.557
> 
> 标签：c#, asp.net

I am trying to handle both double and single quote in my code behind , but none of them are working. Below is my code

```
private String _systemPath;

public String SystemPath
{
    get {

       // return _systemPath = _systemPath.Replace("'", "\'").Replace("\"", @"\\\""); 
       return  _systemPath = _systemPath.Replace("'", @"\'").Replace(@"\""", "\"");

    }
    set { _systemPath = value; }
} 
```

any help will be appreciated.

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-10T19:37:15.657

如果您想`\`在每个单引号或双引号之前添加一个，那么您确实很接近：

```
_systemPath.Replace("'", @"\'").Replace("\"", @"\"""); 
```

你所拥有的是相反的；您正在将所有转义双引号更改为非转义双引号。

# c++ - 指向同一个项目的两个映射迭代器是否保证相等？

> ID：13807690
> 
> 赞同：1
> 
> 时间：2012-12-10T19:23:41.817
> 
> 标签：c++, iterator, standard-library

我有一个`map`要插入新元素的对象。这样做之后，我想确保这个新插入的元素被插入**到末尾**。为此，我设计了以下方法：

```
map<T1,T2> m;
//populate m
auto ret_pair = m.insert({o1,o2}); //o1,o2 objects of types T1,T2

auto end = m.cend();
--end;
if (ret_pair.first != end) //<-- this worries me
  throw runtime_error("boom"); 
```

我比较两个迭代器的那一行让我担心，因为我不确定我是否可以依赖这些不同的迭代器是相同的，即使指向同一个东西。

你怎么看？为什么这（不）行得通？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:25:58.287

指向相同元素的迭代器比较相等。如果他们不这样做，标准库中的每个算法都会崩溃。

所以是的，你的代码很好。

# git - 使用多个 git 分支的合并

> ID：13807691
> 
> 赞同：2
> 
> 时间：2012-12-10T19:23:42.370
> 
> 标签：git, merge

我有 2 个分支，A 和 B，它们彼此不冲突，并且有 master 作为祖先。我想使用将两个分支合并到 AB 中的结果进行测试，但只对 A 或 B 进行代码更改。问题是每次我对 A 或 B 进行更改时，我都必须删除AB 和 remake it - 合并这些变化创造了一段非常丑陋的历史，让我觉得没有必要。我已经研究过 rebase，但是当涉及合并提交时它表现不佳。我缺少这个问题的简单解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:30:46.253

一种方法是使用[每个功能](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)工作流的分支：功能-a-分支、功能-b-分支和项目-qa 分支来集成 a 和 b。

project-qa 可以在共同祖先提交或开始新 sprint 的工作时分支 master。

在发生更改时将两个功能分支合并到其中并释放 qa 分支。发布时将 project-qa 合并到 master 中。

![在此处输入图像描述](../Images/5dc1f6152fe2f7dea23cba32e29fa0ab.png)

更多信息：

[http://codingsolutions.blogspot.ca/2011/07/using-branch-per-feature-cleanup-across.html](http://codingsolutions.blogspot.ca/2011/07/using-branch-per-feature-cleanup-across.html)

# javascript - 将两个选择框值绑定到单个剔除日期属性

> ID：13807693
> 
> 赞同：0
> 
> 时间：2012-12-10T19:23:46.533
> 
> 标签：javascript, html, binding, knockout.js

我有一个淘汰对象，其中包含一个名为**created**的属性。time Date 的这个属性包含事件的日期。然后在我的 html 表单中，我有两个选择框输入：第一个是小时，第二个是分钟。这些允许用户选择时间，然后应在创建的属性上设置所选值。以下是我的表单代码示例：

```
<form action="..." method="...">
    <select name="hours">
        <option value="8">8</option>
        <option value="9">9</option>
        ...
        <option value="22">22</option>
    </select>
    <select name="minutes">
        <option value="0">0</option>
        ...
        <option value="30">30</option>
    </select>

    ...
</form> 
```

这是一个非常简单的形式，但是我不明白如何将输入绑定到创建的值并仅更新属于每个输入的日期部分。基本上，当我选择第一个输入的选项时，我应该更新日期的小时数，而当我选择第二个输入的选项时，应该更新日期的分钟数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:55:11.130

我会通过将[计算的 observable](http://knockoutjs.com/documentation/computedObservables.html)添加到组合中并将选定的分钟和小时存储在它们的组成部分中来做到这一点。

这是一个稍微做作的示例，但显示了一般原则。这里的计算只是将小时和分钟的部分连接在一起，但大概*你*会实例化一个 Date 对象来代替你需要做的事情：

```
function TimeModel(options) {
    var self = this;

    self.hourOptions = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
    self.minuteOptions = [0, 15, 30, 45];

    self.selectedHour = ko.observable(options.hour || 0);
    self.selectedMinute = ko.observable(options.minute || 0);

    self.selectedDate = ko.computed(function() {
        return self.selectedHour() + ":" + self.selectedMinute();
    });
} 
```

然后我会将`hourOptions`and绑定`minuteOptions`到相应的选择框，一切都应该很好:)

检查这个小提琴的工作解决方案：http: [//jsfiddle.net/WickyNilliams/ejjHp/](http://jsfiddle.net/WickyNilliams/ejjHp/)

# php - 如何计算对象数组中某个键的特定数量

> ID：13807694
> 
> 赞同：1
> 
> 时间：2012-12-10T19:23:47.690
> 
> 标签：php, regex, arrays, count

我完全被这个难住了。我试图弄清楚我可以计算对象数组中特定键的出现次数。

这是数组：

```
Array 
(
[0] => stdClass Object
    (
        [id] => 1
        [user_id] => 1
        [group_id] => 1
        [cat_0] => foo
        [cat_1] => bar
        [cat_2] => 
        [cat_3] => 
    )
) 
```

您会看到 cat_ 出现了四次，但末尾的数字从 0 到 3 不等。这个数字可能会改变并且是动态的，所以我需要一种方法来弄清楚如何为“cat_”的 4 个键返回 4 的计数。有什么想法吗？或者一个好的方向来指出我？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:27:19.087

```
$count = 0;
foreach ($myObj as $key => $value) {
    if (strpos($key, 'cat_') === 0) {
        $count++;
    }
} 
```

你真的应该`'cat'`用子键制作一个数组，这更容易使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:34:40.727

这是一个单行选项

```
$catCount = count(preg_grep("/^cat_(\d)+$/", array_keys(get_object_vars($yourObj)))); 
```

[`preg_grep`](http://php.net/preg_grep)可以通过阵列扫描模式

参考：[https ://stackoverflow.com/a/1337711/138383](https://stackoverflow.com/a/1337711/138383)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T19:36:48.777

简单案例的伪代码：

```
for all keys:
1\. Get the key
2\. Apply regex to check if the key matches your prefix
3\. if yes ++1 your result 
```

如果您需要查找前缀未知的重复项，这意味着您可以拥有以下内容：

```
[random-prefix1_1] => v1
[random-prefix1_2] => v2
[random-prefix1_3] => v3
[random-prefix2_1] => v4
[random-prefix2_2] => v5 
```

然后您可以反向执行此操作，这意味着您可以搜索后缀 (_[0-9]+) 的键并将其删除，然后计算相同的键（按字母顺序排列并查找某个键与下一个键不同的时间）

如果前缀和后缀都不知道，那你就有问题了 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-05T07:33:07.667

您可以使用 for 循环形式的简单逻辑。下面的代码适用于数组，如果您想使用 obj ->

```
 $j =1 ;
    for ($i=0;$i<$j;$i++){ //note here we consider that cat_0 is always there and if not then check isset out of for loop cat_0 exist then only go inside loop
          echo 'O/P : '.$val['cat_'$i];
          if (isset($val['cat_'.(int)($i+1)])){
               $j++;
          }
    } 
```

最后 $j 包含最后一个值（总计）。这将适用于 n 个 cat_ 。

# objective-c - ObjC 运行时：伪造块 ivars

> ID：13807700
> 
> 赞同：0
> 
> 时间：2012-12-10T19:24:06.690
> 
> 标签：objective-c, runtime, block

我写了这段代码：

```
NSAlert *alert = [NSAlert new];
objc_setAssociatedObject(alert, @"block", aBlock, OBJC_ASSOCIATION_COPY_NONATOMIC);
if (![objc_getAssociatedObject(alert, @"block") isEqual:aBlock]) NSLog(@"failure"); 
```

where`aBlock`是`void (^)(NSAlert *)`传递给调用上述代码的函数的块。现在：如果块不包含任何外部`__block`变量，一切正常，但如果它试图设置一个这样的变量（例如，一个 external `__block NSString *string`）我得到`@"failure"`消息。我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:20:46.600

您的代码工作正常。一个块不一定等于它自己的副本——它是依赖于实现的。您可以将其简化为，`if (![aBlock isEqual:[aBlock copy]]) NSLog(@"Failure!")`并且应该得到相同的结果。

# java - 如何以编程方式获取有关 APNS 推送证书的信息？

> ID：13807702
> 
> 赞同：6
> 
> 时间：2012-12-10T19:24:14.847
> 
> 标签：java, iphone, ios, apple-push-notifications, x509certificate

是否有任何 java 库可以让我们找到 p12 证书是否是正确的 Apple 推送证书？

我使用 X509Certificate 类来检查其有效性，但没有找到有关证书类型的任何信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T06:02:33.177

我不确定是否真的可以将 APNS 证书与任何其他证书区分开来。

但是，要检查给定证书的*真实性*，即验证它是否可信，需要检查其*证书链*以确保它包含已知的可信证书。这通常是由[证书颁发机构](http://en.wikipedia.org/wiki/Certificate_authority)颁发的。

对于 APNS，根据[此](http://www.24100.net/2010/12/latest-apple-push-notification-certificate-changes-decrypted/)消息来源和[Apple 文档](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html)，链中需要来自“Entrust Secure CA”的证书。该证书应该是“众所周知的”并且可以（可能会轻微降低长期安全性）在应用程序的生命周期中通常被视为常量；然后，您的应用程序可以将其*已知*证书与相关证书的钥匙串中存在的证书进行比较。

最后：[Bouncy Castle](http://www.bouncycastle.org/)的加密库是 Java 扩展加密功能的事实上的标准实现，也可用于检查和/或[验证证书](http://www.nakov.com/blog/2009/12/01/x509-certificate-validation-in-java-build-and-verify-chain-and-verify-clr-with-bouncy-castle/)及其签名。

# mysql - MySQL函数仅在不使用传递的参数时才起作用？

> ID：13807703
> 
> 赞同：1
> 
> 时间：2012-12-10T19:24:17.780
> 
> 标签：mysql, function

我有一个问题，我的函数仅在我不使用传递的参数时才起作用。

这是我想要工作的代码：

```
DELIMITER $$

CREATE DEFINER=`root`@`%` FUNCTION `getTableColumns`(schemaName varchar(100), tableName varchar(100), omitColumns varchar(200)) RETURNS varchar(5000) CHARSET latin1
BEGIN
  DECLARE done INT DEFAULT 0;
  DECLARE res  VARCHAR(5000) DEFAULT "";

  DECLARE col  VARCHAR(200);
  DECLARE cur1 CURSOR FOR 
    select COLUMN_NAME from information_schema.columns 
    where table_schema = @schemaName AND table_name = @tableName AND FIND_IN_SET(COLUMN_NAME, @omitColumns) = 0 ORDER BY ORDINAL_POSITION;

  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
  OPEN cur1;
  REPEAT
       FETCH cur1 INTO col;
       IF NOT done THEN 
          set res = CONCAT(res,IF(LENGTH(res)>0,",",""),col);
       END IF;
    UNTIL done END REPEAT;
  CLOSE cur1;
  RETURN res;
END 
```

这是当我用文字字符串替换参数时起作用的代码：

```
DELIMITER $$

CREATE DEFINER=`root`@`%` FUNCTION `getTableColumns`(schemaName varchar(100), tableName varchar(100), omitColumns varchar(200)) RETURNS varchar(5000) CHARSET latin1
BEGIN
  DECLARE done INT DEFAULT 0;
  DECLARE res  VARCHAR(5000) DEFAULT "";

  DECLARE col  VARCHAR(200);
  DECLARE cur1 CURSOR FOR 
    select COLUMN_NAME from information_schema.columns 
    where table_schema = 'test' AND table_name = 'employees' ORDER BY ORDINAL_POSITION;
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
  OPEN cur1;
  REPEAT
       FETCH cur1 INTO col;
       IF NOT done THEN 
          set res = CONCAT(res,IF(LENGTH(res)>0,",",""),col);
       END IF;
    UNTIL done END REPEAT;
  CLOSE cur1;
  RETURN res;
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:29:01.297

试试这个：

```
DELIMITER $$

CREATE DEFINER=`root`@`%` FUNCTION `getTableColumns`(_schemaName varchar(100), _tableName varchar(100), _omitColumns varchar(200)) RETURNS varchar(5000) CHARSET latin1
BEGIN
  DECLARE done INT DEFAULT 0;
  DECLARE res  VARCHAR(5000) DEFAULT "";

  DECLARE col  VARCHAR(200);
  DECLARE cur1 CURSOR FOR 
    select COLUMN_NAME from information_schema.columns 
    where table_schema = _schemaName AND table_name = _tableName ORDER BY ORDINAL_POSITION;

  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;
  OPEN cur1;
  REPEAT
       FETCH cur1 INTO col;
       IF NOT done THEN 
          set res = CONCAT(res,IF(LENGTH(res)>0,",",""),col);
       END IF;
    UNTIL done END REPEAT;
  CLOSE cur1;
  RETURN res;
END 
```

# python - couchdbkit 比请求慢 10 倍？

> ID：13807706
> 
> 赞同：5
> 
> 时间：2012-12-10T19:24:24.673
> 
> 标签：python, couchdb, python-requests

我在玩 couchdb 和推荐的“couchdbkit”python 包。我觉得它有点慢，并决定做一些测量。如果我没有做错什么，那么使用流行的“请求”包比通过 couchdbkit 快 10 倍以上。为什么？

这是我使用的计时脚本：

```
from time import time as now
from pprint import pprint

class Timer:
    def __init__(self):
        self.current = now()

    def __call__(self, msg):
        snap = now()
        duration = snap - self.current
        self.current = snap
        pprint("%.3f duration -- %s" %(duration, msg))

def requests(num):
    t = Timer()

    import requests
    for i in range(num):
        r = requests.get("http://127.0.0.1:8001/releases/_design/access/_view/yieldlinks")
        assert r.status_code == 200
        r.json # make sure the json is there
    t("requests: %d" % (num,))

def couchdbkit(num):
    import couchdbkit

    t = Timer()
    server = couchdbkit.Server("http://127.0.0.1:8001")
    releases = server.get_db("releases")
    for x in range(num):
        for x in releases.view("access/yieldlinks"):
            pass
    t("couchdbkit: %d" %(num,))

num = 500
requests(num)
couchdbkit(num) 
```

要运行该示例，您可能需要修改视图 URL。我验证了这两个调用在服务器上导致完全相同的 GET 请求。所以这似乎真的与couchdbkit的内部工作有关？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T23:09:10.687

所以我终于找到了这个问题，它实际上和这个一样：

[CouchDB / MochiWeb：持久连接的负面影响](https://stackoverflow.com/questions/8992122/couchdb-mochiweb-negative-effect-of-persistent-connections)

简而言之，添加：

```
[httpd]
socket_options = [{nodelay, true}] 
```

解决了性能差异 - 事实上，couchdbkit/restkit 现在快了一点。

# hash - 将两个 ulong Hash 组合成新的 ulong Hash

> ID：13807708
> 
> 赞同：0
> 
> 时间：2012-12-10T19:24:30.233
> 
> 标签：hash, cryptography

我有两个字符串在不同的处理阶段被散列成一个 ulong（使用 Google 的 CityHash），现在必须将两个散列组合成一个新的散列，而不会显着增加散列冲突的风险。

我知道 XOR 有一些问题（例如 Value ^ 0 = Value），但鉴于两个输入值应该已经分布良好，我怀疑我可以像这样组合哈希

```
ulong hash = hash1 ^ hash2; // hash1 and hash2 are ulong hashes of strings 
```

这种方法是否有问题，或者是否有更好的方法不会增加显着的计算开销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:11:47.293

boost 库以一种相当简单的方式做到了这一点。

您可能需要计算 64 位的黄金数字。

计算将是：

```
ulong hash = hash1 ^ ( hash2 + 0x9e3779b9 + (hash1 << 6) + (hash1 >> 2); 
```

我相信数字 0x9e3779b9 是 2^32/phi。Phi 是黄金比例。除以无理数试图以确定的方式添加“随机性”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T00:56:47.407

根据@GregS 的评论和我自己的进一步阅读，我相信我并没有通过使用简单的 XOR 来严重降低哈希分布。

这似乎是最明智的方法。

# html - Web 表单到网络上的 Excel 工作表

> ID：13807712
> 
> 赞同：0
> 
> 时间：2012-12-10T19:24:45.523
> 
> 标签：html, windows, excel

有没有办法在无法访问 Internet 的 Windows 机器上的本地浏览器上使用 Web 表单（比如名称和地址文本字段）来更新网络上的 Excel 电子表格？

IE 我可以在本地 PC 上使用 GET 参数或其他东西执行 BAT 文件吗？

# javascript - tornadoweb 模板变量管道安全

> ID：13807715
> 
> 赞同：0
> 
> 时间：2012-12-10T19:24:54.677
> 
> 标签：javascript, templates, pipe, tornado

在我的后端处理程序中，我发送带有双引号的字符串，例如：

```
print '\"test\"'
self.render('test.html', test = '\"test\"') 
```

在模板 test.html 中，我将测试变量传递给 javascript，例如：

```
<script>
var test = {{ test }};
</script> 
```

但实际上浏览器生成的是：

```
<script>
var test = &quo t;test&quo t;;
</script> 
```

出现字符串引号而不是双引号 "

在 tornadoweb 中是否有类似于 Django 管道的东西，这应该可以解决问题：

```
<script>
var test = {{ test|safe }};
</script> 
```

或者也许还有另一种方法可以用双引号传递字符串（我在前端真的需要）？

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:29:20.107

好的，我自己找到的：

```
{% autoescape None %} 
```

# excel - 无法让 Worksheet_change 在 VBA 中工作

> ID：13807723
> 
> 赞同：1
> 
> 时间：2012-12-10T19:25:31.967
> 
> 标签：excel, vba

我已经阅读了许多以前类似的问题和答案，但仍然无法让我的代码正常工作。

我想根据其他一些单元格的背景颜色计算一些单元格的总和。特别是，仅当单元格 (x,z) 的颜色是所选颜色 (RGB(0, 176, 80)) 时，我才会在总和中包含一个单元格 (x,y)。

FIRST 总和计算正确，但是，当我修改 F1:G100 范围内的单元格时，我确实收到通知（“pd”），但目标单元格上没有发生任何更改。

此代码位于我希望进行更改的工作表中。

```
Private Sub Worksheet_Change(ByVal Target As Range)
If Not Intersect(Target, Target.Worksheet.Range("F1:G100")) Is Nothing Then
    Cells(11, 14).Value = Sum1()
    Cells(12, 14).Value = Sum2()
    MsgBox "pd"
End If
End Sub
'-----------------------------------------------------------------------
Public Function Sum1() As Double
Dim N As Long
Sum1 = 0

For N = 4 To 100
    colorBackground = Cells(N, 2).Interior.Color
    If colorBackground = RGB(0, 176, 80) Then
        Sum1= Sum1+ Cells(N, 6).Value
    End If
Next N      
End Function
'-----------------------------------------------------------------------
Public Function Sum2() As Double
Dim N As Long
Sum2 = 0

For N = 4 To 100
    colorBackground = Cells(N, 2).Interior.Color
    If colorBackground = RGB(0, 176, 80) Then
        Sum2= Sum2+ Cells(N, 7).Value
    End If
Next N 
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:06:21.107

这可能与问题无关，但是，我会告诉你我在上面的代码中不喜欢的地方是对 Cells 的赤裸（或不合格）使用。根据 Excel 对象模型的定义：

> 单元格：返回一个 Range 对象，该对象代表 ***活动工作表***上的所有单元格。（如果活动文档不是工作表，则此属性失败。）

因此，可能发生的情况是，当工作表不是活动工作表时会发生更改，然后事件处理程序使用“单元格”运行，指的是可能不是预期工作表的内容。

虽然很难想象用户如何在工作表不处于活动状态的情况下直接完成更改，但 VBA 代码肯定会导致非活动工作表发生变化，这确实会触发（非活动工作表的）Worksheet_Change 事件处理程序而不改变活动工作表的当前概念。

您可能会考虑将这些从 Cells（或 Application.Cells，在这种情况下同样糟糕）改为 Target.Parent.Cells（在 Sum1 和 Sum2 中，您必须将它们传递给 Target.Parent（或 Target））。

（由于 Sum1 和 Sum2 是公开的，因此无法判断，因此如果您使用 Sum1 或 Sum2 作为 UDF 并在此处被调用，那么我会让 UDF 成为通过 Application.ThisCell 恢复工作表的包装器或一些东西，然后调用另一个完成工作的函数（并且是私有的，因此不能称为 UDF）。）

# box2d - ofxbox2d 映射木偶（使用 ofxopenni）和碰撞检测

> ID：13807725
> 
> 赞同：1
> 
> 时间：2012-12-10T19:25:46.517
> 
> 标签：box2d, openni, openframeworks

我是一名仍在学习 openFrameworks 的研究生，我的 c++ 可能有点生疏……我以 sosolimited / kinectcharacter 项目为例来学习 kinect puppet 动力学——这很有意义。我想把它带到下一步，看看我是否可以添加碰撞检测作为交互机制。我一直在努力解决这个问题，花了几个星期来解决这个问题，我希望有经验的人提供意见！

上下文：对于每个身体部位，关节位置计算为中点，然后使用 ofRotate 函数旋转。这对于在关节处旋转四肢是有意义的。我在每个身体部位（乌鸦后面的白色矩形）后面映射了 ofxbox2drect 对象。

问题当我在 testApp.cpp 中调用此函数时，ofxBox2drect 对象（下落的原木）不会与旋转的肢体交互。这是因为我的身体部位的 ofxbox2drect 对象是在它们自己的旋转平移上（由关节位置偏移 + 从位置 0,0 旋转）。落下的原木不是这些翻译的一部分，所以它总是丢失四肢。

帮助 您对更好的方法有什么建议吗？如果有关于如何使用 box2d 和基于 kinect 的木偶的最佳实践，我将不胜感激！

代码 - 人偶身体部位

```
for (int i=0; i<user_generatorMain.GetNumberOfUsers(); i++) {

        int id = i+1;

        // check user being tracked
        if(!user_generatorMain.GetSkeletonCap().IsTracking(id)) {
            //printf("Not tracking this user: %d\n", id);
            return;
    }

    xn::SkeletonCapability pUserSkel = user_generatorMain.GetSkeletonCap();

    // doing an average of joints 1 and 2 here for situations like torso where there is no midpoint joint
    XnPoint3D position[3];
    XnSkeletonJointPosition jointPos[3];
    pUserSkel.GetSkeletonJointPosition(id, joints[0], jointPos[0]);
    pUserSkel.GetSkeletonJointPosition(id, joints[1], jointPos[1]);
    pUserSkel.GetSkeletonJointPosition(id, joints[2], jointPos[2]);

    position[0] = jointPos[0].position;
    position[1] = jointPos[1].position;
    position[2] = jointPos[2].position;

    // check accurate enough
    if(jointPos[0].fConfidence < 0.3f || jointPos[1].fConfidence < 0.3f || jointPos[2].fConfidence < 0.3f) {
        return;
    }

    depth_generatorMain.ConvertRealWorldToProjective(3, position, position);

    position[0].X = position[0].X*ofGetWidth()/640.0f;
    position[0].Y = position[0].Y*ofGetHeight()/480.0f;

    position[1].X = (position[1].X+position[2].X)*ofGetWidth()/(2.0*640.0f);
    position[1].Y = (position[1].Y+position[2].Y)*ofGetHeight()/(2.0*480.0f);

    XnPoint3D midPosition;
    midPosition.X = (position[0].X+position[1].X)/2;
    midPosition.Y = (position[0].Y+position[1].Y)/2;

    float angle = M_PI/2 + atan((position[1].Y-midPosition.Y)/(position[1].X-midPosition.X));
    if (position[1].X > position[0].X) angle -= M_PI;
    printf("%f %d %f %f %d %f %f\n", ofRadToDeg(angle), joints[0], position[0].X, position[0].Y, joints[1], position[1].X, position[1].Y);

    ofPushMatrix();

    float h = scale * abs(ofDist(position[0].X, position[0].Y, position[1].X, position[1].Y));
    float w = h * (float)img.width / (float)img.height;

    ofTranslate( midPosition.X, midPosition.Y );
    ofRotate(ofRadToDeg(angle), 0, 0, 1);

    b2dPart.setPhysics(0,0,0);
    b2dPart.setup(world->getWorld(), 0,0, w*.60, h*.60);
    b2dPart.draw(); // box2d rectangle object mapped to a body part
    img.draw(0, 0, layer, w, h); //limb image png for a body part

    ofPopMatrix(); 
```

# sql - 我如何告诉 Oracle，如果输出是单个数字，那么在它之前放一个空格？

> ID：13807728
> 
> 赞同：0
> 
> 时间：2012-12-10T19:25:48.123
> 
> 标签：sql, oracle

> **可能重复：**
> [如果我的号码是一位数，如何在我的号码前面添加一个空格？](https://stackoverflow.com/questions/13631642/how-do-i-add-a-space-in-front-of-my-number-if-it-is-a-single-digit)

我尝试了以下方法：

```
REGEXP_REPLACE(to_char(myArray(i).myValue), '\d{1}', ' ' || to_char(myArrzy(i).myValue)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:33:44.630

```
lpad (to_char(myArray(i).myValue), 2, ' ') 
```

[http://www.adp-gmbh.ch/ora/sql/rpad.html](http://www.adp-gmbh.ch/ora/sql/rpad.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:58:01.463

怎么样：

```
lpad(myArray(i).myValue,2) 
```

该数字将隐式转换，并且 ' ' 是`lpad`. [SQL小提琴在这里](http://www.sqlfiddle.com/#!4/d41d8/5141)

# r - 包“Rbbg”不可用（对于 R 版本 2.15.2）

> ID：13807729
> 
> 赞同：6
> 
> 时间：2012-12-10T19:25:49.717
> 
> 标签：r, bloomberg

我如何找出这个包适用于哪些版本的*R*？

```
> install.packages("Rbbg", repos = "http://r.findata.org")
Warning: unable to access index for repository http://r.findata.org/src/contrib
Warning message:
package 'Rbbg' is not available (for R version 2.15.2) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T19:33:39.637

您可以通过浏览[http://r.findata.org/的 bin 目录来查找](http://r.findata.org/)

你用的是Windows，对吧？

* * *

Rbbg 的源代码可在 github 上获取，网址为[https://github.com/johnlaing/blpwrapper](https://github.com/johnlaing/blpwrapper)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T11:07:46.960

这里非标准的部分问题是它默认寻找源代码，而不是二进制文件。

```
Warning in install.packages :
  unable to access index for repository http://r.findata.org/src/contrib 
```

[http://r.findata.org/src/](http://r.findata.org/src/)不存在，但[http://r.findata.org/bin](http://r.findata.org/bin)存在

# c# - 为什么我的 SharpZipLib ZipEntry.Comment 没有设置（或读取）？

> ID：13807733
> 
> 赞同：1
> 
> 时间：2012-12-10T19:26:00.027
> 
> 标签：c#, zip, sharpziplib

我一直在开发一个使用[SharpZipLib](https://github.com/icsharpcode/SharpZipLib)将文件添加到 zipfile 的工具，并带有针对`ZipEntry`存储我需要的元数据的注释。（我知道还有其他方法可以处理这些元数据，但如果可以避免的话，我想避免重新构建我的解决方案。）

用于将文件和元数据写入 zipfile 的 [略微简化] 代码如下：

```
public static void AddFileToZip(string path, Guid metadata)
{
    using (ZipFile zipFile = new ZipFile(__zipName))
    {
        zipFile.BeginUpdate();
        zipFile.Add(path);
        zipFile.CommitUpdate();
        zipFile.Close();
    }
    // Close and reopen the ZipFile so it can find the ZipEntry:
    using (ZipFile zipFile = new ZipFile(__zipName))
    {
        string cleanPath = ZipEntry.CleanName(path);
        zipFile.BeginUpdate();
        zipFile.GetEntry(cleanPath).Comment = metadata.ToString("N");
        zipFile.CommitUpdate();
        zipFile.Close();
    }
} 
```

对此的测试工具，然后读取：

```
[Test]
public void ArchiveCreationTests()
{
    // Hard-code some variables
    string testFile = @"C:\Users\owen.blacker\Pictures\Ddraig arian.png";
    Guid guid = Guid.NewGuid();

    MyClassName.AddFileToZip(testFile, guid);
    Assert.IsTrue(File.Exists(__zipName), "File does not exist: " + __zipName);

    string cleanName = ZipEntry.CleanName(testFile);
    ZipFile zipfile = new ZipFile(__zipName);
    Assert.GreaterOrEqual(
        zipfile.FindEntry(cleanName, true),
        0,
        "Cannot file ZipEntry " + cleanName);

    ZipEntry zipEntry = zipfile.GetEntry(cleanName);
    StringAssert.AreEqualIgnoringCase(
        guid.ToString("N"),
        zipEntry.Comment,
        "Cannot validate GUID comment.");
} 
```

现在我的 zipfile 正在创建中——它确实包含我的测试图像`Ddraig arian.png`——`ZipEntry`成功找到了，但`StringAssert`调用总是失败。我不完全确定它是因为没有被*写入*而失败，还是因为没有被*读取*而失败。

现在我知道您必须使用`ZipFile`/`ZipEntry`才能访问`ZipEntry.Comment`，因为[`ZipInputStream`不会让您`Comment`](http://community.sharpdevelop.net/forums/p/1893/11332.aspx)访问，但我*正在*使用`ZipFile`and `ZipEntry`，所以我不明白为什么它不起作用。

有没有人有任何想法？

[（稍微奇怪的 close-and-reopen in`AddFileToZip`是因为`ZipFile.GetEntry`调用总是失败，大概是因为`ZipEntry`尚未将其写入文件索引。是的，我的测试文件确实是一条[银龙](http://www.flickr.com/photos/owenblacker/48977062/)。）]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:19:51.153

是的，据我所知，这不会起作用。评论没有被写入，也不会给出库的当前迭代。

我根本没有使用过这个库，但是对源代码做了一些检查：

如果我们在源代码中查看[这里](https://github.com/icsharpcode/SharpZipLib/blob/master/src/Zip/ZipFile.cs#L1479)，我们可以看到它仅在 contentEdited 时运行更新。唔。我想知道是什么设置的？似乎是罪魁祸首。

环顾四周，我们发现一些注释掉的代码附有[以下可疑注释](https://github.com/icsharpcode/SharpZipLib/blob/master/src/Zip/ZipFile.cs#L1763)

```
/* Modify not yet ready for public consumption.
   Direct modification of an entry should not overwrite original data before its read. 
```

通常在源代码中搜索我们会发现在修改条目周围有很多半成品的碎片。

所以基本上我认为你要打的是一个半成品的图书馆，它不能做你想做的事。对不起。:-)

当你第一次添加文件时，一些额外的代码考古学告诉我没有办法写评论，唉。在您提交更新之前，可能通过以某种方式找出 ZipEntry 对象来破解某些东西，但是我是如何逃避的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T21:45:32.430

你能使用[DotNetZip](http://dotnetzip.codeplex.com/)吗？我发现大部分时间使用起来更容易，我能够让 ZipEntry 评论正常工作，见下文。

**使用 DotNetZip：**

```
using (ZipFile zip = new ZipFile(__zipName))
{
    string testFile = @"...";
    ZipEntry newEntry = zip.AddFile(testFile);
    newEntry.Comment = "test";
    zip.Save();
}
using (ZipFile zip = new ZipFile(__zipName))
{
    Console.WriteLine(zip[0].Comment);
} 
```

看来 SharpZipLib 不完全支持`ZipEntry.Comment`，请参阅@DRMacIver 那里的良好研究答案，我也尝试了多种方法但无法弄清楚（我可以设置评论并保存，但是当我再次阅读时它是空值）。

我不知道为什么它不起作用，但我猜这可能是因为标准 zifiles 不支持对文件的评论，整个 zip 文件只有一个评论。所以我想他们可能会扩展 zip 来支持它，也许他们从未完成它或从未测试过它。

无关，但我会提到我之前做过测试，SharpZipLib 能够实现稍微更好的压缩，但是 DotNetZip 的易用性仍然使它成为我更好的解决方案。

我没有尝试使用 SharpZipLib 来读取使用 DotNetZip 创建的带有工作注释的 zip 文件，以查看读取或写入是否有问题（我对此感到好奇）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-13T12:32:24.493

代码是公开的，只需要**在 File ZipFile.cs**行中进行更改（对我来说是 1810）

此示例适用于 IStaticDataSource ...其他方法更改其他方法:)

```
/// <summary>
/// Add a file entry with data.
/// </summary>
/// <param name="dataSource">The source of the data for this entry.</param>
/// <param name="entryName">The name to give to the entry.</param>
/// <param name="compressionMethod">The compression method to use.</param>
/// <param name="useUnicodeText">Ensure Unicode used for name/comments for this entry.</param>
/// <param name="comment">Comentario</param>
public void Add(IStaticDataSource dataSource, string entryName,
    CompressionMethod compressionMethod, bool useUnicodeText, string comment)
{
    if (dataSource == null)
    {
        throw new ArgumentNullException("dataSource");
    }

    if (entryName == null)
    {
        throw new ArgumentNullException("entryName");
    }

    CheckUpdating();

    ZipEntry entry = EntryFactory.MakeFileEntry(entryName, false);
    entry.IsUnicodeText = useUnicodeText;
    entry.CompressionMethod = compressionMethod;
    entry.Comment = comment;

    AddUpdate(new ZipUpdate(dataSource, entry));
} 
```

# controller - 如何创建游戏控制器属性表？

> ID：13807737
> 
> 赞同：1
> 
> 时间：2012-12-10T19:26:07.673
> 
> 标签：controller, directx, wdk

我想为我开发的操纵杆创建自定义属性表。[有关在http://msdn.microsoft.com/en-us/library/windows/hardware/ff538689(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff538689(v=vs.85).aspx)中找到的一些相关内容。但是这个文档是关于 WinME 和 NT 4.0 以及关于不推荐使用的东西，比如 dicpl.h。它还文档链接到 DirectX 驱动程序开发工具包 (DDK)。谷歌没有提供任何有用的信息。我想我也是旧的和过时的东西。

有什么想法或建议的同志吗？

# sql-server - SSDT“智能默认”值按类型

> ID：13807739
> 
> 赞同：7
> 
> 时间：2012-12-10T19:26:20.453
> 
> 标签：sql-server, sql-server-data-tools

SSDT 功能的一部分是能够通过临时的默认约束（称为“智能默认值”）用虚拟值填充不可为空的列。

通过反复试验，我发现了以下“智能默认”值：

```
---------------------------------------------------------------
| Type             | Smart Default Value                      |
---------------------------------------------------------------
| int              | 0                                        |
---------------------------------------------------------------
| uniqueidentifier | 00000000-0000-0000-0000-000000000000     |
---------------------------------------------------------------
| "string"         | ''                                       |
--------------------------------------------------------------- 
```

有谁知道每种类型是否存在“智能默认”值的资源？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-10-17T17:49:30.613

我也找不到官方文档。我根据对 SSDT 的试验整理了一个列表，并在[SSDT Default Values For Smart Defaults](http://www.sqldbpros.com/2013/10/ssdt-default-values-for-smart-defaults/ "智能默认值的 SSDT 默认值")上发布了它，但它包含在下面以供快速参考。（对不起 - 我可以做的最好的格式化）。

```
bigint              0
binary              0x00
bit                 0
char                empty string
date                1900-01-01
datetime            1900-01-01 00:00:00.000
datetime2           1900-01-01 00:00:00.0000000
datetimeoffset      1900-01-01 00:00:00.0000000 +00:00
decimal             0
float               0
hierarchyid         smart default not valid
image               0x
int                 0
money               0.00
nchar               empty string
ntext               empty string
numeric             0
nvarchar            empty string
real                0
smalldatetime       1900-01-01 00:00:00
smallint            0
smallmoney          0.00
sql_variant         smart default not valid
text                empty string
time                00:00:00.0000000
timestamp           null value not allowed
tinyint             0
uniqueidentifier    00000000-0000-0000-0000-000000000000
varbinary           0x
varchar             empty string
xml                 empty string 
```

# .htaccess - HTACCESS 重写 URL 错误

> ID：13807742
> 
> 赞同：0
> 
> 时间：2012-12-10T19:26:35.787
> 
> 标签：.htaccess

我正在开发一个项目并使用 .htaccess 重写 URL。

我的文件上传器将文件上传到名为“u”的目录。

例如，如果我上传“textfile.txt”，它将转到“u/textfile.txt”

我的问题是，我使用 htaccess 重写 URL，以便您可以访问：

`u/textfile`

它会显示 'u/textfile.txt' 的信息和该页面内文件的内容，唯一的事情是我收到 500 Internal Server Error。

这是我的 .htaccess 代码：

`RewriteRule ^u/(.*)(\.)(.*)$ u/$1(\.)$2 [L]`
`RewriteRule ^u/(.*)(\/?)$ upload.php?hash=$1 [L,NE]`

我想要的是：

人们能够去 - u/1.2 (1 = 文件名, 2 = 文件扩展名) u/1 (1 = 文件名)

任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:31:10.027

这条规则给你带来了问题和无限循环：

```
RewriteRule ^u/(.*)(\.)(.*)$ u/$1(\.)$2 [L] 
```

将其更改为：

```
RewriteRule ^u/([^.]+)/?$ /u/$1.txt [L,NC] 
```

# sharepoint - 我可以针对 SharePoint 2013 中的提供商托管数据编写工作流吗？

> ID：13807743
> 
> 赞同：1
> 
> 时间：2012-12-10T19:26:47.240
> 
> 标签：sharepoint, sharepoint-workflow, sharepoint-2013

我在 SharePoint 2013 中有提供程序托管的数据，而不是在 SharePoint 列表中。是否可以针对这些数据创建工作流？

# c# - Microsoft 是否有一个在 c# 中使用 UPnP 的 .net 类？

> ID：13807746
> 
> 赞同：2
> 
> 时间：2012-12-10T19:27:08.877
> 
> 标签：c#, .net, upnp, dhcp, mdns

我一直在寻找一种实现 UPnP 的方法。我需要它在 Windows Compact Environment 7 (WEC7) 上运行，但为了轻松测试它，我想建立一个使用普通笔记本电脑并使用 .net 框架和 C# 编码的实验室。我发现 NATUPNP.DLL 是 Microsoft 的一个支持 UPnP 的 COM 组件，但它的文档大约有 3 年的历史，我猜那里有更新的东西。我希望有人知道我可以使用的类的名称（希望由 Microsoft 直接创建和支持），它将在 C# 中与不是 COM 组件的 .net 框架一起使用。

如果您知道这样的课程，请告诉我。另外，请让我知道 Microsoft 为 WEC7 操作系统上的 UPnP 提供哪些支持。

谢谢，柯蒂斯

# java - 如何配置 Guice，它注入到我想要的绑定类中？

> ID：13807747
> 
> 赞同：1
> 
> 时间：2012-12-10T19:27:08.240
> 
> 标签：java, guice

我有以下情况：

```
public class User {

@Inject
private MusicInterface movie;

}

public interface MusicInterface {
public void getTitle();
} 
```

并有 Guice 配置类：

```
public class Module extends AbstractModule {

    @Override
    protected void configure() {

        bind(MusicInterface.class).annotatedWith(Names.named("rock")).to(RockMusic.class);
        bind(MusicInterface.class).annotatedWith(Names.named("pop")).to(PopMusic.class);
        bind(User.class).annotatedWith(Names.named("user1").to(User.class);
        bind(User.class).annotatedWith(Names.named("user2").to(User.class);
    }
} 
```

我的问题是：如何将我想要的音乐绑定注入用户类？

例如：

在我的主要我想用名为rock的注入类获得User1：

```
Injector injector = Guice.createInjector(new Module());

User user1 = injector.getInstance(Key.get(User.class,Names.named("user1"))); 
```

假设 user1 有属性 RockMusic.class，稍后我想用流行音乐来获取 user2：

```
User user2 = injector.getInstance(Key.get(User.class,Names.named("user2"))); 
```

并且此类将具有属性 PopMusic.class。

我怎样才能做到这一点？

我知道我可以在 User 类中使用注释 @Named(...) ，但在我的情况下它不是解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:43:16.183

It sounds like what you're trying to do is to bind different varieties of Music based on the annotation on the User. This is also called [the Robot Legs problem](http://code.google.com/p/google-guice/wiki/FrequentlyAskedQuestions#How_do_I_build_two_similar_but_slightly_different_trees_of_objec), except you can replace "Leg" with "User" and "Foot" with "Music". This is possible using [Private Modules](http://google-guice.googlecode.com/git/javadoc/com/google/inject/PrivateModule.html) in Guice, but you may find it easier to create a UserFactory instead. I'll show you both ways.

**First,** the [Private Module](http://google-guice.googlecode.com/git/javadoc/com/google/inject/PrivateModule.html) way. Private modules hide all of their bindings from the outside world, so you can expose certain ones without having the others conflict.

```
public class MyModule extends AbstractModule {
  @Override protected void configure() {
    install(privateModuleFor("user1", RockMusic.class));
    install(privateModuleFor("user2", PopMusic.class));
  }

  private static Module privateModuleFor(
      final String userName, final Class<? extends MusicInterface> musicClass) {
    return new PrivateModule() {
      @Override protected void configure() {
        // Bind the annotated user.
        bind(User.class).annotatedWith(Names.named(userName)).to(User.class);
        // Now bind the music class as if it's the only music class ever.
        bind(MusicInterface.class).to(musicClass);
        // The above two bindings are hidden, and available only in this module,
        // so Guice doesn't complain about two different competing
        // MusicInterfaces. In order to get access to the User binding
        // outside the module, expose it.
        expose(User.class).annotatedWith(Names.named(userName));
      }
    };
  }
} 
```

Now you can request a `@Named("user1") User` to get a User that likes rock music. Of course, you don't have to organize it like I did with the method: You can still bind the types of MusicInterface to names if you'd like, and then bind the annotation-less MusicInterface to `Key.get(MusicInterface.class, yourMusicTypeHere)` in your PrivateModule, but unless you need the named MusicInterfaces elsewhere you can probably skip that step.

**The other way** is to skip using Guice for this binding. Guice is a great solution, but for some complicated binding situations it can be more trouble than it's worth to set up. Your alternative is to create a lightweight UserFactory that picks the right type of Music for you. ([ImmutableMap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ImmutableMap.Builder.html) is from [Guava](https://code.google.com/p/guava-libraries/).)

```
public class UserFactory {
  private Map<String, Class<? extends MusicInterface>> musicMap =
      ImmutableMap.builder()
        .put("user1", RockMusic.class)    // You could also put instances here
        .put("user2", PopMusic.class)     // and skip using Guice entirely!
        .build();

  // Never inject Injector unless you don't know what you need until runtime,
  // which is exactly what is happening here.
  @Inject private Injector injector;
  @Inject private Provider<Dependency> someOtherUserDependency;

  public User createUser(String musicType) {
    Class<? extends MusicInterface> clazz = musicMap.get(musicType);
    return new User(injector.getInstance(clazz), someOtherUserDependency.get());
  }
} 
```

Now your User will be available by injecting `UserFactory` and calling `userFactory.create()`. Of course, maybe your User needs a dozen other injected dependencies. In that case, the first option looks good, or you may investigate [assisted injection](http://google-guice.googlecode.com/git/javadoc/com/google/inject/assistedinject/FactoryModuleBuilder.html). All of these are workable options, so you'll need to think about which one is the right combination of flexibility and readability for your situation.

Hope that helps!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:46:09.320

鉴于@Named 不是一个选项，我认为您也不能使用绑定注释。您可以向注射器索要它：

```
Injector injector = Guice.createInjector(new Module());
MusicInterface musicInterface = injector.getInstance(Key.get(String.class, Names.named("rock")) 
```

# python - 何时在 py 文件中使用 utf8 作为标头

> ID：13807748
> 
> 赞同：30
> 
> 时间：2012-12-10T19:27:15.757
> 
> 标签：python, utf-8

来自下载代码的一些源文件具有以下标头

```
# -*- coding: utf-8 -*- 
```

我知道 utf-8 编码是什么，但为什么需要它作为 python 源文件中的标头？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-10T19:30:41.020

无论您需要在不是来自 ascii 的代码字符中使用，例如：

```
ă 
```

口译员会抱怨他不理解那个字符。

通常在定义常量时会发生这种情况。

示例：添加到 x.py

```
print 'ă' 
```

然后启动一个python控制台

```
import x
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "x.py", line 1
 SyntaxError: Non-ASCII character '\xc4' in file x.py on line 1, 
   but no encoding declared;
   see http://www.python.org/peps/pep-0263.html for details 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-05-13T19:18:39.063

更直接的答案：

**在 Python 3+**中：您不需要声明。UTF-8 是默认值。确保文件以 UTF-8 编码。一些 Windows 编辑器默认没有它。声明它不会有什么坏处，一些编辑可能会使用它。

**在 Python 2**中：总是。默认值取决于操作系统。

请记住：这只是关于您的源代码文件。现在在第三个千年中，*字符串*类型不再存在。您必须注意*text*类型，即字节序列*和*编码。您仍然必须在所有输入和输出操作中定义您的编码。这些操作仍将取决于您的环境，因此最好遵循以下规则：*显式优于隐式*。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-10T20:38:00.327

始终使用 UTF-8 并确保您的编辑器也使用 UTF-8。如果您使用 Python 27，请像这样启动您的 Python 脚本：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
from __future__ import unicode_literals 
```

这是 Nick Johnson 关于 Python 和 UTF-8 的一篇很好的博客文章：

[http://blog.notdot.net/2010/07/Getting-unicode-right-in-Python](http://blog.notdot.net/2010/07/Getting-unicode-right-in-Python) 顺便说一句，这篇文章是在他可以使用之前写的：

```
from __future__ import unicode_literals 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-10T19:32:53.893

当您使用非 ASCII 字符时。例如，当我用挪威语评论我的来源时，如果 .py 中出现 ØÆÅ 字符，它会抱怨而不是“编译”。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-10T19:41:43.387

每当读取或写入文本时，编码就会发挥作用。总是。python 解释器必须将您的文件作为文本读取，才能理解它。唯一无需处理编码就可以逃脱的情况是您只使用 ASCII 范围内的字符。在这种情况下，解释器几乎可以使用世界上的任何编码，并且可以正确处理，因为几乎所有编码都将这些字符编码为相同的字节。

你不应该`coding: utf-8`仅仅因为你的文件中有超出 ascii 的字符就使用它，它甚至可能是有害的。这是 python 解释器的一个提示，告诉它你的文件是什么编码。除非你配置了你的文本编辑器，否则文本编辑器很可能不会将你的文件保存在 utf-8 中。所以现在你给 python 解释器的提示是错误的。

因此，当您的文件以 utf-8 编码时，您应该使用它。如果它是在 windows-1252 中编码的，你应该使用`coding: windows-1252`等等。

# asp.net-web-api - Web API 抽象参数

> ID：13807750
> 
> 赞同：0
> 
> 时间：2012-12-10T19:27:27.303
> 
> 标签：asp.net-web-api, abstract-class, json.net

请请请有人可以帮我完成下面的代码的实现。我按照[http://dotnetbyexample.blogspot.com/2012/02/json-deserialization-with-jsonnet-class.html](http://dotnetbyexample.blogspot.com/2012/02/json-deserialization-with-jsonnet-class.html)上的示例进行操作。这个示例在很多博客上都发布了。

我试图找到一种可重用的方法来处理 Web API 操作中的抽象参数。它在 Fiddler 中完美运行，但是当我尝试通过 HttpClient 调用 Get 时返回的 EntityNote 为空。我发现 ReadJson 方法从来没有被调用过，所以 Create 也从来没有被调用过。我想我不太了解 Web API 的流程，无法理解应该在哪里调用 ReadJson。

全球.asax.cs

```
config.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.LocalOnly;
config.Formatters.JsonFormatter.SerializerSettings.TypeNameHandling = TypeNameHandling.All;
config.Formatters.JsonFormatter.SerializerSettings.ReferenceLoopHandling = ReferenceLoopHandling.Ignore;
config.Formatters.JsonFormatter.SerializerSettings.Converters.Add(new JsonDeviceConverter()); 
```

链接中的转换器（没有人展示如何实现 WriteJson）

```
public abstract class JsonCreationConverter<T> : JsonConverter
{
    protected abstract T Create(Type objectType, JObject jsonObject);

    public override bool CanConvert(Type objectType)
    {
        return objectType.IsSubclassOf(typeof(T));
    }

    //This method never gets called
    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        var jsonObject = JObject.Load(reader);
        var target = Create(objectType, jsonObject);
        serializer.Populate(jsonObject.CreateReader(), target);
        return target;
    }

    //I just kinda guessed at this code
    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        if (this.CanConvert(value.GetType()))
        {
            serializer.Serialize(writer, value);
        }
    }
} 
```

EntityNote 是一个以 PortalProviderRefundNote 作为实现的抽象类。

```
public class JsonDeviceConverter : JsonCreationConverter<EntityNote>
{
    //This method never gets called, because ReadJson is never called
    protected override EntityNote Create(Type objectType, JObject jsonObject)
    {
        var typeName = jsonObject["EntityNote"].ToString();
        switch (typeName)
        {
            case "PortalProviderRefundNote":
                return new PortalProviderRefundNote() { EntityId = 1 };
            default: return null;
        }
    }
} 
```

HttpClient - 本教程使用 JsonConvert.DeserializeObject，但我无法弄清楚它如何适合这里...ReadAsAsync 完成此任务

```
//simplified **Suggested Edit**
this.jsonFormatter = new JsonMediaTypeFormatter();
jsonFormatter.SerializerSettings.TypeNameHandling = TypeNameHandling.All;
jsonFormatter.SerializerSettings.ReferenceLoopHandling = ReferenceLoopHandling.Ignore;
jsonFormatter.SerializerSettings.Converters.Add(new JsonDeviceConverter());

new HttpClient().GetAsync("http://localhost/api/EntityNotesController/").Result.Content.ReadAsAsync<EntityType>(new List<MediaTypeFormatter>(){ jsonFormatter }).Result; 
```

服务控制器

```
public EntityNote Get(int id)
{
    return new PortalProviderRefundNote() { EntityId = 1 };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:48:13.463

您还需要在客户端的 JsonMediaTypeFormatter 上更改相同的序列化程序设置：

```
var jsonFormatter = new JsonMediaTypeFormatter();
jsonFormatter.SerializerSettings.TypeNameHandling = TypeNameHandling.All;
jsonFormatter.SerializerSettings.ReferenceLoopHandling = ReferenceLoopHandling.Ignore;
jsonFormatter.SerializerSettings.Converters.Add(new JsonDeviceConverter());

response.Content.ReadAsAsync<EntityNote>(new MediaTypeFormatter() { jsonFormatter }).Result; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:20:47.953

我切换到 XML 并使用 KnownType 属性。这是开箱即用的。我很想知道是否有使用 JSON 的解决方案，但这已经足够好了。

# indexing - 如何删除 Pandas DataFrame 中的一行并重新标记索引？

> ID：13807758
> 
> 赞同：12
> 
> 时间：2012-12-10T19:28:39.860
> 
> 标签：indexing, pandas, delete-row

我正在将一个文件读入可能包含无效（即 NaN）行的 Pandas DataFrame。这是顺序数据，所以我让 row_id+1 引用 row_id。当我使用 frame.dropna() 时，我得到了所需的结构，但索引标签保持原来分配的状态。如何将索引标签重新分配为 0 到 N-1，其中 N 是 dropna() 之后的行数？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-10T19:57:30.937

使用[`pandas.DataFrame.reset_index()`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.reset_index.html#pandas.DataFrame.reset_index)，该选项`drop=True`将满足您的需求。

```
In [14]: df = pd.DataFrame(np.random.randn(5,4))

In [15]: df.ix[::3] = np.nan

In [16]: df
Out[16]:
          0         1         2         3
0       NaN       NaN       NaN       NaN
1  1.895803  0.532464  1.879883 -1.802606
2  0.078928  0.053323  0.672579 -1.188414
3       NaN       NaN       NaN       NaN
4 -0.766554 -0.419646 -0.606505 -0.162188

In [17]: df = df.dropna()

In [18]: df.reset_index(drop=True)
Out[18]:
          0         1         2         3
0  1.895803  0.532464  1.879883 -1.802606
1  0.078928  0.053323  0.672579 -1.188414
2 -0.766554 -0.419646 -0.606505 -0.162188 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-07-23T14:53:23.440

除了接受的答案：

您还应该使用`inplace=True`：

```
df.reset_index(drop=True, inplace=True) 
```

# c# - 进入webmethod函数之前的ajax回调

> ID：13807761
> 
> 赞同：1
> 
> 时间：2012-12-10T19:28:48.927
> 
> 标签：c#, jquery, asp.net, ajax

这是我的 Ajax 调用：

```
 $.ajax({
            type: "POST",
            url: "ProductDetail.aspx/AddCart",
            data: '{productId:' + 4 + ',productTypeId:' + 0 + ',quantity:' + 1 + '}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function () {
                alert('successful');
                refreshCart();
            },
            complete: function () {
                alert('Completed');
                refreshCart();
            }
        }); 
```

它给出警报（'已完成'），然后转到 webmethod 函数，但在我的服务器端代码完成后我需要它。你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:35:07.143

尝试改变这个：

```
complete: function () {
    alert('Completed');
    refreshCart();
} 
```

对此：

```
complete: function (result,stat) {
    alert(stat);
    refreshCart();
} 
```

看看你得到了什么。如果你得到任何形式的“错误”，你就知道你的问题是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:37:03.523

您的数据参数不包含有效的 json，并且您使用的是完整而不是错误。试试这个：

```
$.ajax({
    type: "POST",
    url: "ProductDetail.aspx/AddCart",
    data: '{"productId":' + 4 + ',"productTypeId":' + 0 + ',"quantity":' + 1 + '}',
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function() {
        alert('Successful');
        refreshCart();
    },
    error: function(jqxhr,status,message) {
        alert('Error: ' + message);
        refreshCart();
    }
});​ 
```

# javascript - 如何使用 id 数组在 jstree 中打开节点？

> ID：13807762
> 
> 赞同：0
> 
> 时间：2012-12-10T19:28:53.653
> 
> 标签：javascript, jstree

我正在使用 jstree javascript 插件，并且正在异步加载数据。我正在尝试对这棵树的数据进行搜索。我有一个 Web 服务，它根据搜索参数返回一个 id 数组。搜索前未加载树。当用户点击搜索时，根据返回的 id，我试图一一加载/打开树中与 id 对应的节点。

```
for(var i = 0; i < ids.length; i++){
     $("#tree").jstree("open_node", document.getElementById(ids[i]));
} 
```

但是，只有根节点正在加载。任何人都可以建议一个简单的函数来使用一组 id 一个一个地加载节点吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:57:21.240

如果未加载 jsTree，您可以在为 jsTree 构建数据时对要在加载时打开的节点使用“状态”=>“打开”。[请参阅下面的示例 - 从http://www.jstree.com/documentation/json_data](http://www.jstree.com/documentation/json_data)复制的代码

```
{
    "data" : "node_title",
    // omit `attr` if not needed; the `attr` object gets passed to the jQuery `attr` function
    "attr" : { "id" : "node_identificator", "some-other-attribute" : "attribute_value" },
    // `state` and `children` are only used for NON-leaf nodes
    "state" : "closed", // or "open", defaults to "closed"
    "children" : [ /* an array of child nodes objects */ ]
} 
```

# sql - 查询刷新时的参数值请求

> ID：13807767
> 
> 赞同：1
> 
> 时间：2012-12-10T19:29:08.913
> 
> 标签：sql, ms-access

我有一个 SQL 正在工作并从 MS-Access 返回我需要的信息，但是它一直要求我输入“Annual Accrual”和“Used”的参数值。

```
 SELECT SchedulingLog.UserID, SchedulingLog.Category AS Type, 
           Sum(SchedulingLog.Value) AS Used, SchedulingLog.Category, 
           qry_YearsOfService.[Annual Vac Days], [Annual Vac Days]+[Used] AS [Days Left]
    FROM   SchedulingLog INNER JOIN qry_YearsOfService ON 
           SchedulingLog.UserID = qry_YearsOfService.UserID
    GROUP BY SchedulingLog.UserID, SchedulingLog.Category, SchedulingLog.Category, 
             qry_YearsOfService.[Annual Vac Days], [Annual Vac Days]+[Used]
    HAVING (((SchedulingLog.Category) Like "Vac*")); 
```

我不想输入参数的选项，它应该只是计算。我错过了什么？

这是服务年限查询的 SQL

```
 SELECT Roster.UserID, Roster.[WM DOH], Round((Date()-[WM DOH])/365,2) AS YearsOfService, 
Max (tblAccrual.WeeksAccrual) AS [Annual Accrual], Roster.Schedule, 
[Annual Accrual]*[Schedule] AS [Annual Vac Days]
    FROM Roster, tblAccrual
    WHERE ((([tblAccrual]![Years])<Round((Date()-[WM DOH])/365,2)))
    GROUP BY Roster.UserID, Roster.[WM DOH], 
Round((Date()-[WM DOH])/365,2), Roster.Schedule, [Annual Accrual]*[Schedule]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T20:05:01.540

我认为这是`[Annual Accrual]`因为您`[Annual Accrual]*[Schedule]`在`group by`第一个查询的子句中有要求。试着把它拿出来。

出于`[Used]`同样的原因，正如您在第二个查询的子句中所`[Annual Vac Days]+[Used]`引用的那样。`group by`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T19:53:08.097

我想你可能有两个不同的问题。

该 SQL 中没有名为“Annual Accrual”的字段。也许它包含在`qry_YearsOfService`但拼写错误（？）。`qry_YearsOfService`如果找不到问题，请向我们展示 SQL 。

您的`GROUP BY`子句引用`[Used]`，它是在字段表达式列表中定义的别名。我怀疑 db 引擎将其解释为 中的参数，`GROUP BY`因为它对于允许您稍后在查询中使用字段别名非常严格。我认为你需要改变这一点。向我们展示简短的样本`SchedulingLog`，`qry_YearsOfService`如果你需要帮助来整理它。

除了这些问题，您的字段列表包括`SchedulingLog.Category`两次，第一次别名为`Type`，第二次未别名。我不明白那是什么意思。两次包含相同的字段可能不会产生问题，但是`Type`可能因为它是保留字。如果您将其保留为别名，请将其括在方括号中以确保安全。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T19:52:48.877

您没有在此查询中的任何地方使用“Annual Accrual”，因此必须从 qry_YearsOfService 或更进一步的嵌套查询中调用它。

至于“已使用”，请在 Group By 中更改对 Sum(SchedulingLog.Value) 的引用。

# command-line-interface - Windows XP - 使用 netsh 配置静态 IP 地址

> ID：13807768
> 
> 赞同：1
> 
> 时间：2012-12-10T19:29:10.487
> 
> 标签：command-line-interface, netsh, windows-xp-sp3

我在 Windows XP SP3 上执行以下命令时遇到问题。

```
netsh interface ip set address name="Local Area Connection 2" static 192.168.100.5 255.255.255.0 192.168.100.1 
```

我相当有信心这个命令是正确的，但是我收到了：

```
The syntax supplied for this command is not valid.  Check help for the correct syntax. 
```

此命令在 Windows 7 上运行良好，根据 Windows XP 提供的帮助，这是正确的语法。

有人有想法么？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:38:47.650

电脑是Windows XP SP3。

我得到与这个（意大利语）接口名称相同的错误：

> “Connessione alla rete locale (LAN) 3”

我发现了问题。

必须在网关之后指定参数 gwmetric。

这解决了我使用 NETSH int ip set address 的所有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T22:22:09.157

例子：

```
netsh interface ip set address name="Local Area Connection" static 1.2.3.4 255.255.255.0 2.3.4.5 gwmetric=1 
```

静态 IP 地址 ----- 子网掩码 ----- 默认网关 ------ 指标

# java - 我需要谷歌应用引擎中的 JPA 提供程序吗？

> ID：13807772
> 
> 赞同：2
> 
> 时间：2012-12-10T19:29:29.817
> 
> 标签：java, hibernate, google-app-engine, jpa-2.0

我正在使用 Google 应用引擎，我想使用它支持的 JPA 2。
据我了解（如果我错了，请纠正我）JPA 只是接口，所以，无论何时你想使用它，你都需要一个 JPA 提供程序（例如休眠），但是在入门教程中有没有任何提供程序的示例只是JPA。
那么，我真的需要 Hibernate（或任何其他提供者）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:54:46.780

Google 应用引擎使用 datanucleus 作为 JPA 提供程序。[请参阅他们在此处](https://developers.google.com/appengine/docs/java/datastore/jpa/overview-dn2#Setting_Up_JPA_2_0)`persistence.xml`显示的文件示例。我认为您不必将它与您的应用程序捆绑在一起，因为它可能是由 Google 加载的，但我不确定这一点。

# c# - C#中的指针三角形

> ID：13807773
> 
> 赞同：1
> 
> 时间：2012-12-10T19:29:30.417
> 
> 标签：c#, for-loop, geometry

我有一个简单的问题。我有这个 C# 代码：

```
static void Main(string[] args)
{
    int num1, i, j, x, y;
    Console.WriteLine("enter number");
    num1=int.Parse(Console.ReadLine());
    for (i=1; i<=num1; i++){
        for (j=1; j<i+1; j++) {
        Console.Write(i);

        }Console.Write("\n"); 
    }
     for (x=num1; x>=0; x--){
        for (y=0; y<x; y++) {
        Console.Write(x);

        }Console.Write("\n"); 
    }
    Console.ReadLine();
} 
```

![在此处输入图像描述](../Images/492388a87f0033e824ca4871a5acb428.png) 中间线重复两次

从数字中打印三角形。问题是中间线重复了两次。我的问题是我怎样才能改变循环，所以中间的行号会重复两次？希望得到帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:31:39.150

呃改变

```
for (x=num1; x>=0; x--){ 
```

到

```
for (x=num1-1; x>=0; x--){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T19:33:02.567

因为两个 for 循环都包含`num1`作为包含条件：

```
for (i=1; i<=num1; i++){
    // num1 is the last number in this loop
}
for (x=num1; x>=0; x--){
    // num1 is the first number in this loop
} 
```

将第一个循环更改为停止 BEFORE `num1`：

```
for (i=1; i<num1; i++){ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T19:45:14.023

```
Console.Write("enter number: ");
int num = Int32.Parse(Console.ReadLine());

Enumerable.Range(1, num)
          .Concat(Enumerable.Range(1, num - 1).Reverse())
          .Select(x => String.Join("", Enumerable.Repeat(x.ToString(),x)))
          .ToList()
          .ForEach(line => Console.WriteLine(line)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T19:32:57.013

```
 static void Main(string[] args)
{
    int num1, i, j, x, y;
    Console.WriteLine("enter number");
    num1=int.Parse(Console.ReadLine());
    for (i=1; i<num1; i++){
        for (j=1; j<i+1; j++) {
        Console.Write(i);

        }Console.Write("\n"); 
    }
     for (x=num1; x>=0; x--){
        for (y=0; y<x; y++) {
        Console.Write(x);

        }Console.Write("\n"); 
    }
    Console.ReadLine();
} 
```

# android - 适用于初学者的 Android 文本显示

> ID：13807778
> 
> 赞同：1
> 
> 时间：2012-12-10T19:29:41.540
> 
> 标签：android, textview

这是一个非常基本的问题，我知道，但我似乎无法自己弄清楚。虽然 Android 教程将帮助您制作一个练习应用程序，但它并不能真正告诉您您在做什么。（我已经成功完成了他们的教程。）我所有的搜索都提出了不那么新奇的问题而没有回答我的问题。所以这是我初学者的问题：

我想显示文本“Sup World”。我究竟做错了什么？我确定 null 是错误的，但我无法弄清楚实际应该存在什么。“这个”不起作用。并且其中有 null ， setContextView 不存在。

```
package com.evorlor.testcode;

import android.widget.TextView;

public class SupWorld {

    /**
     * @param args
     */
    public static void main(String[] args) {
        // TODO Auto-generated method stub

        String message = "Sup world.";

        TextView textView = new TextView(null);
        textView.setTextSize(40);
        textView.setText(message);

        setContentView(textView);

    }

} 
```

我的问题不在于上我的 SupWorld 课程，是吗？：

```
package com.evorlor.testcode;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Intent intent = new Intent(this, SupWorld.class);
        startActivity(intent);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:32:53.787

将您的代码更改为：

```
public class SupWorld extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

         String message = "Sup world.";

        TextView textView = new TextView(this);
        textView.setTextSize(40);
        textView.setText(message);

        setContentView(textView);

    }

} 
```

在 中声明上述活动类`AndroidManifest.xml`：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:label="@string/app_name"
        android:name=".MainActivity" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:label="@string/app_name"
        android:name=".SupWorld" >
    </activity>
</application> 
```

除此之外，您将看到一些在 android 中创建您的第一个应用程序的好教程，请参阅这些

[http://www.mkyong.com/android/android-activity-from-one-screen-to-another-screen/](http://www.mkyong.com/android/android-activity-from-one-screen-to-another-screen/)

[http://developer.android.com/training/basics/firstapp/index.html](http://developer.android.com/training/basics/firstapp/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:34:33.190

第一个答案**搜索这个简单的问题**

第二个答案：

```
 public class SupWorld extends Activity {

    /**
     * @param args
     */
    public void onCreate(Bundle l) {
        // TODO Auto-generated method stub
        super.onCreate(l);

        String message = "Sup world.";

        TextView textView = new TextView(this);
        textView.setTextSize(40);
        textView.setText(message);

        setContentView(textView);

    }

  } 
```

将此活动添加到清单并运行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T19:39:14.360

我认为最好解释它失败的原因，而不是给出答案。基本上这条线是你的罪魁祸首：

```
TextView textView = new TextView(null); 
```

查看 TextView 的构造函数时，您会发现它需要 Context。上下文在android中用于将内容附加到相应的应用程序中。在这种情况下，使用 TextView 需要 Context，因为此 TextView 属于此应用程序。

正确的方法是传递上下文：

```
TextView textView = new TextView(this); 
```

或者

```
TextView textView = new TextView(getApplicationContext()); 
```

附加相应的上下文后，它将起作用。null 不是一个有效的上下文，并且会抛出一个空指针异常 (NPE)。

尝试阅读有关[TextView](http://developer.android.com/reference/android/widget/TextView.html)的文档以了解更多信息。

## 还

`ρяσѕρєя K`如指出的那样，可能导致的其他错误是 Activity 未在您的 AndroidManifest.xml 中注册。这是必需的，以便应用程序知道在您尝试在其下注册的应用程序下注册该活动。

# java - 有没有办法进行http连接池？

> ID：13807785
> 
> 赞同：1
> 
> 时间：2012-12-10T19:30:10.120
> 
> 标签：java, httpconnection

java中是否有任何方法可以在不使用httpclient、http-commons等第三方api的情况下进行http连接池？

在我的情况下，我想打开一个带有特定 servlet 的 url 的连接，并且我的查询字符串发生了变化，但是每当我打开一个连接时，它就会打开一个新连接，就像我看到的那样做 'netstat -anp | grep portno' 我不想要？

```
String sendMessageUrl="http\://ip\:portno/contextpath/servlet/Servletname?parameter1\=&parameter2\=";
URL testURl=new URL(sendMessageUrl.replaceAll("&", name+"&")+surname);  
HttpURLConnection httpConnection=(HttpURLConnection)testURl.openConnection();
httpConnection.connect();
if(httpConnection.getResponseCode()==200)
{
   System.out.println("Success");
} 
```

这里只有参数 1 和参数 2 发生变化，只是整个 url 保持不变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:50:52.523

当创建这些对象的成本很高时，您可以将对象池化，例如创建数据库连接的成本很高，因此池化是有意义的。在不使用第三方框架的情况下，仍然可以池化 HTTP 连接，毕竟池只是以前创建的类实例的集合。

至少要创建一个管理 HTTP 连接池的类，您至少需要执行以下操作：

1.  从池中检索一个实例（正在使用的对象）
2.  将实例放回池中（不再使用的对象）
3.  游泳池大小

您可能还需要将以下功能视为可能值得在池中使用的功能：

1.  重新连接过时的实例
2.  最大空闲时间，记住一个空闲连接仍然在消耗资源
3.  在抛出异常之前连接可以使用的时间
4.  一种验证连接是否有效的方法，例如对于一个数据库连接，执行一个简单的 SQL

还有许多其他事情需要考虑，但是如果您自己构建它，这取决于您的确切要求。您应该尝试一下，如果遇到问题，请就您的具体问题向 SO 寻求帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:21:07.167

您可以使用[HttpURLConnection](http://docs.oracle.com/javase/6/docs/api/java/net/HttpURLConnection.html)的一部分`JDK`。它在底层使用 TCP 连接池

# excel - Excel 2010 VBA - 我正在尝试记录一个将移动两个数据透视表“项目”的宏

> ID：13807787
> 
> 赞同：1
> 
> 时间：2012-12-10T19:30:15.013
> 
> 标签：excel, vba

...从报告过滤器到图例字段，反之亦然，我收到一个错误...这是它在录制时创建的代码：

```
Sub ByPlant()
'
' ByPlant Macro
'

'
With ActiveSheet.PivotTables("PivotTable3").PivotFields("Sociedad")
    .Orientation = xlColumnField
    .Position = 2
End With
With ActiveSheet.PivotTables("PivotTable3").PivotFields("Proveedor")
    .Orientation = xlPageField
    .Position = 1
End With
End Sub 
```

当我尝试运行它时，它给了我这个：

> 运行时错误 1004 无法获取工作表类的数据透视表属性

它突出显示了这一行：

```
With ActiveSheet.PivotTables("PivotTable3").PivotFields("Sociedad") 
```

你们能帮忙吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:35:56.927

当数据透视表的名称不正确时，会引发运行时错误。尝试通过像这样限定工作表来修复它。

```
With Worksheets("Sheet1").PivotTables("PivotTable3").PivotFields("Sociedad") 
```

# jquery - 带有视频元素的基于 Web 的全屏幻灯片

> ID：13807788
> 
> 赞同：13
> 
> 时间：2012-12-10T19:30:21.230
> 
> 标签：jquery, html, html5-video, slideshow

我想开发基于 HTML 5 的幻灯片，其中包含全屏图像和视频。当几分钟没有用户活动时，这将是我们的一个信息亭上的某种屏幕保护程序。我们已经在全屏上实现了基于图像的幻灯片，所以这没有问题，但是现在我们还想添加视频自动播放功能，例如让我们说这是屏幕保护程序内容的顺序

*   图像.jpeg
*   image2.jpeg
*   视频剪辑.mp4
*   image3.jpeg
*   其他视频.mp4

在 jquery 脚本运行后，我们希望连续运行这些文件并显示图像几秒钟或自动启动视频并在播放视频完成后移至下一张幻灯片

有人可以建议如何做到这一点，如果有任何已经实现的 jQuery 插件，你可以提供链接吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-16T14:15:09.303

其实这很容易解决。在 JavaScript 的注释中找到所有解释。将所有内容都包裹在一个封闭中`$(document).ready(function () {});`，您就可以开始了。

**HTML**

```
<div id="canvas" class="canvas"></div> 
```

**CSS**

```
div.canvas {
    display:           table-cell;
    width:             1280px;
    height:            800px;
    background:        black;
    vertical-align:    middle;
}

div.canvas > video {
    display:           block;
    margin:            auto;
}

div.canvas > img {
    display:           block;
    margin:            auto;
} 
```

**JavaScript - 变量**

```
// array containing links to the content
var content = ['movie_1.m4v', 'movie_2.m4v', 'image_1.jpg', 'image_2.jpg'];
// element where anything will be played
var canvas = $('#canvas');
// duration an image is shown in ms (milliseconds)
var durationImage = 1000;
// basic source for image and video tag
var srcImage = '<img src="$" alt="">';
var srcVideo = '<video autoplay><source src="$" type="video/mp4"></source></video>';
// current position
var current = -1;
// regex for getting file extension (from http://stackoverflow.com/questions/680929/how-to-extract-extension-from-filename-string-in-javascript)
var regex = /(?:\.([^.]+))?$/; 
```

**JavaScript - 函数**

```
// method to play the next content element
function playNext() {
    // increase current element and set it to 0 if end is reached
    ++current;  
    if (content.length == current) {
        current = 0;
    }
    // get file and its extension and check whether it's valid
    var source      = null;
    var file        = content[current];
    var extension   = regex.exec(file)[1];
    if ('jpg' == extension) {
        source      = srcImage;
    }
    if ('m4v' == extension) {
        source      = srcVideo;
    }
    // if source seems valid
    if (null !== source) {
        // replace placeholder with the content and insert content into canvas
        source  = source.replace('$', file);
        canvas.html(source);
        // if content is an image play next after set duration
        if ('jpg' == extension) {
            setTimeout(function() { playNext(); }, durationImage);              
        }
        // if content is a video, bind 'onend' event handler to it, to play next
        if ('m4v' == extension) {
            canvas.find('video').bind("ended", function() {
                playNext();
            });
        }
    }
} 
```

**JavaScript - 最后：初始函数调用**

```
// show first (remember current = -1 from above :) )
playNext(); 
```

**演示**

[jsfiddle.net 上的演示](http://jsfiddle.net/ev7wb/)

关于演示的说明：由于提供的视频格式 ( *video/quicktime* )，演示仅在 Safari 中运行（也可能在 IE9 中运行）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T18:39:55.593

首先，我将从给您这个[**LINK**](http://msdn.microsoft.com/en-us/library/hh924822%28v=vs.85%29.aspx)开始。在这里你可以找到很多关于视频事件的有用信息（比如：结束、加载、播放等）。

此外，这里是小提琴/演示的[**链接（在 Chrome 上测试）。**](http://jsfiddle.net/Dim13i/Mgkw8/6/)

This is the html structure:

```
<section class="slideshow">
    <ul>
         <img src="" class="loader" />
         <div class="pause"></div>
         <li>img/video</li>
         <li>img/video</li>
         <li>img/video</li>
         <li>img/video</li>
         <li>img/video</li>
    </ul>
</section> 
```

We have a simple `<section>` which contains all of our images and video. I've also added a `GIF` loader to show that we are loading something at the beginning (there is no need to see the pictures loading slowly), and a `Pause` button.

The Css to set all the elements and their size:

```
.slideshow {
    width: 700px;
    height: 300px;
    background: #efefef;
    position: relative;
    background: white;
    box-shadow: 0px 0px 5px black;
    margin: 20px auto;
}

.slideshow ul {
    width: 100%;
    height: 100%;
    position: relative;
    list-style: none;
    overflow: hidden;
    display: none;
}

.slideshow ul li {
    position: absolute;
    left: 100%;
}

.slideshow ul li:first-child {
    left: 0%;
}

video {
    background: #434343;
}

.loader {
    width: 50px;
    height: 50px;
    position: absolute;
    left: 50%;
    top: 50%;
    margin-left: -25px;
    margin-top: -25px;
}

.pause {
    display: none;
    width: 50px;
    height: 50px;
    position: absolute;
    top: 50%;
    left: 50%;
    margin-left: -25px;
    margin-top: -25px;
    border-radius: 50%;
    background: rgba(0,0,0,.6);
    z-index: 100;
    line-height: 50px;
    text-align: center;
    font-size: 1.0em;
    font-weight: bold;
    color: white;
    cursor: pointer;
}​ 
```

And finally the Javascript/jQuery part:

```
// Some variables
var timer;
var sWidth = 400, sHeight = 200, border = 10;
var slideshowSet = false;
var video;
var videoSet = false;
var slidePause = false;
var $el;
var $currentEl = $('.slideshow').find('li').eq(0);

// On document ready
$(function() {
    // Set slideshow dimensions + border
    setSlideDimensions(sWidth, sHeight, border);

    // Show pause button
    $('.slideshow').hover(
        function(){
            if(slideshowSet) {
                $('.pause').stop().fadeIn(200);
            }
        },
        function() {
            if(slideshowSet) {
                $('.pause').fadeOut(200);
            }
        }
    );

    // Pause button
    $('.pause').click(function() {
         if($(this).text() == '| |') {
            // Pause slideshow
            slidePause = true;
            $(this).text('►');
            clearTimeout(timer);
            if($currentEl.find('video').size() == 1){
                video.pause();
            }
        } else {
            // Play slideshow
            $(this).text('| |');
            if($currentEl.find('video').size() == 1){
                video.play();
            } else {
                timer = setTimeout(slide, 2000);
            }
        }
    });
});

// Window ready (all images loaded, but not videos!!)
$(window).ready(function() {
    // Hide loader GIF
    $('.loader').fadeOut(200);

    // Show slideshow
    $('.slideshow ul').fadeIn(200);

    // Start slideshow
    timer = setTimeout(slide, 2000);
    slideshowSet = true;
});

// Function to slide
function slide() {
    videoSet = false;
    var $el = $('.slideshow').find('li');
    $el.eq(1).add($el.eq(0)).animate({'left': '-='+sWidth}, {queue: false, duration: 300, complete: function() {
        $el.eq(0).animate({'left': '100%'}, 0);
        if($(this).index() == 1){
            $('.slideshow ul').append($el.eq(0));
            $currentEl = $el.eq(1);

            // We chek if it's a video
            if($(this).find('video').size() == 1) {
                //If yes we set the variable
                video = $(this).find('video')[0];
                videoSets();

                // If video can play
                if (video.canPlayType) {
                     // Play video
                     video.play();
                } else {
                     // Error message
                     alert('No html5');
                }
            } else {
                // If not a video we set timeout to next slide
                timer = setTimeout(slide, 2000);
            }
        }
    }});
 }

 // Function to set all video events
 function videoSets(){
     if(!videoSet) {
         videoSet = true;
        // Video ended
        video.addEventListener("ended", function () {
            timer = setTimeout(slide, 2000);
        });

        // Video Playing
        video.addEventListener("playing", function () {
            clearTimeout(timer);
            if(slidePause) {
                $('.pause').text('| |');
                video.play();
                slidePause = false;
            }
        });
    }
}

// Function to set slideshow dimensions
function setSlideDimensions(w, h, b) {
    $('.slideshow').css({width: w, 'height': h, 'padding': b});
    $('.slideshow ul li img, .slideshow ul li video').css({width: w, 'height': h});
}
​ 
```

There is more work to do with the video events. I would preload all videos if possible (not too big) and then start the slideshow so to be sure that there are no "empty moments". If you have too many videos you could start loading the first ones (2/3) and then start the slideshow. By putting the attribute `preload` to your `<video>` tag they will start and keep loading once the document is loaded (normally).

Also in your `<video>` tag you can insert more than one video with all differents formats so that you expand its compatibility cross-browser.

If you have any other question feel free to ask. It may not be perfect as I did this for the first time! ;)

# html - 输入后的css隐藏范围

> ID：13807790
> 
> 赞同：0
> 
> 时间：2012-12-10T19:30:24.437
> 
> 标签：html, css, forms, hide

您好我正在尝试使用以下代码在输入字段后隐藏一个跨度：

```
 <style>
 input~span:after { opacity: 0;}
 </style>
 ...
 <input type="email" />
 <span>Test</span> 
```

但是跨度仍然显示在浏览器中但是如果我用萤火虫检查元素，它告诉我跨度有不透明度：0;

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:31:29.850

为什么`:after`？那是为了创建伪元素..

```
<style>
    input~span{ opacity: 0;}
</style> 
```

# jquery - jquery滚动到顶部动画

> ID：13807793
> 
> 赞同：2
> 
> 时间：2012-12-10T19:30:30.333
> 
> 标签：jquery

我试图在我的网站 [http://www.cmclove.org/bootstrap上实现滚动到顶部的动画](http://www.cmclove.org/bootstrap)

但每当我滚动到顶部并尝试向下滚动时，似乎该页面正在与我作斗争并且不想再向下滚动。

您可能需要做几次，或者尝试在动画完成后立即向下滚动

继承人的jQuery：

```
$(document).ready(function() {
    $(function() {

        /* set variables locally for increased performance */

        var scroll_timer;
        var displayed = false;
        var $message = $('#message a');
        var $window = $(window);
        var top = $(document.body).children(0).position().top;

        /* react to scroll event on window */
        $window.scroll(function(e) {

            window.clearTimeout(scroll_timer);
            e.preventDefault();
            scroll_timer = window.setTimeout(function(e) {
                if ($window.scrollTop() <= top) {
                    displayed = false;
                    $message.fadeOut(800);
                    e.preventDefault();

                }
                else if (displayed == false) {
                    displayed = true;
                    $message.stop(true, true).show(1000).click(function(e) {
                        $('html, body').animate({
                            scrollTop: 0
                        }, 'slow');
                        $message.fadeOut(1000);
                        e.preventDefault();

                    });
                }

            }, 100);
        });
    });
});​ 
```

继承人的html

```
 <a id="top"></a>

  <!--- all my html stuff -->

  <div id="message"><a href="#top"></a></div>
  </footer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:36:25.430

我知道发生了什么。每次“滚动到顶部”发生时，您都会绑定一个新的“点击”事件。而且由于它们加起来，每次滚动条多冻结 1 秒。因此，当您第一次滚动到顶部时，什么都不会冻结。下一次它冻结一秒钟，下一次冻结 2 秒钟等等。

我认为你需要：

```
$message.unbind('click'); 
```

就在之前：

```
$message.stop(true, true).show(1000).click(function(e) { 
```

IE：

```
else if (displayed == false) {
  displayed = true;
  $message.unbind('click');
  $message.stop(true, true).show(1000).click(function(e) {
  ... 
```

如果您不相信我，请通过执行几次“转到顶部”使其冻结，然后在 Firebug 控制台中编写以下代码：

```
$('#message a').unbind('click'); 
```

再试一次。您会看到冻结已经消失（直到您再次使用多个“click”事件绑定来累积它）。

干杯。

# c - 共享对象文件中库版本的意义是什么

> ID：13807799
> 
> 赞同：0
> 
> 时间：2012-12-10T19:30:55.010
> 
> 标签：c, shared-libraries

例如，当我们创建共享对象文件时，为什么要对其进行版本控制

```
/libnetsnmp.so.5.0.9 
libzebra.so -> libzebra.so.0.0.0
libzebra.so.0 -> libzebra.so.0.0.0 
```

仅仅创建“.so”文件还不够吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:44:53.260

可能需要使库的多个版本共存，将一个特定版本作为默认版本；或者一目了然地查看安装了哪个精确版本的库，并且符号链接让应用程序引用非版本化文件名（这很重要，否则您必须在每次小的库更新时重新编译应用程序）。

# c++ - Boost IO Stream 和 ZLib 加速

> ID：13807800
> 
> 赞同：5
> 
> 时间：2012-12-10T19:30:56.477
> 
> 标签：c++, performance, boost, zlib, boost-iostreams

我有一个使用 boost IOStreams 和过滤流缓冲区用 Zlib 压缩的大数据文件：

```
boost::iostreams::array_source uncompressedArray( reinterpret_cast< const char* >( &uncompressedData[0] ), uncompressedData.size() );

boost::iostreams::filtering_streambuf< boost::iostreams::output > out;
out.push( *m_compressor );
out.push( boost::iostreams::char_back_inserter( compressedData ) );
boost::iostreams::copy( uncompressedArray, out ); 
```

为了加快速度，我正在使用以下内容初始化 zlib 库：

```
boost::iostreams::zlib_params params;
params.level = boost::iostreams__zlib::best_speed;
params.mem_level = 9;

m_compressor.reset( new boost::iostreams::zlib_compressor( params, 131072 ) );
m_decompressor.reset( new boost::iostreams::zlib_decompressor( params, 131072 ) ); 
```

我的解压器是这样的：

```
boost::iostreams::array_source compressedArray( reinterpret_cast< const char* >( &compressedData[0] ), compressedData.size() );

boost::iostreams::filtering_streambuf< boost::iostreams::input > m_in;
m_in.push( *m_decompressor );
m_in.push( compressedArray );       
boost::iostreams::copy( m_in, boost::iostreams::char_back_inserter( uncompressedData ) ); 
```

我的问题是有什么方法可以加快膨胀（解压缩）操作？现在，压缩占用了我大约 83% 的数据访问时间，我真的需要加快速度。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T02:58:38.770

加快解压速度的唯一方法是使压缩后的数据更小，从而减少处理量。这意味着要花更多时间进行压缩，假设您不那么关心那一端的处理时间。所以你会选择最佳压缩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-14T17:54:38.727

至少在 Windows 上，我们使用 zlib C 接口测量了 20% 的改进。仔细分析后发现 boost::iostreams::filtering_streambuf 和 iostream 开销是主要区别。

# objective-c - Objective-C 中的 PDFKit

> ID：13807802
> 
> 赞同：0
> 
> 时间：2012-12-10T19:31:02.660
> 
> 标签：objective-c, ios5, pdf, xcode4.4

我正在尝试在 Objective-C 中安装 PDFKit 框架。我有 x-code 4.4.1 但无法在构建阶段看到 PDFKit 框架。该框架是否从 iOS 5 中终止？我想使用该框架来查看和注释 pdf。谁能告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:48:24.603

我不认为它曾经在 ios 中可用。为什么不在苹果的ios参考手册中搜索呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-04T00:24:50.683

PDFKit 现在可以在 iOS 11 上使用。请参考[这个](https://stackoverflow.com/questions/45378679/how-to-use-pdfkit-ios-11-to-open-pdf-file/45496353#45496353)关于 Objective-C 实现的答案

# ios - iOS：隐藏 MapView 但保留覆盖图像？

> ID：13807804
> 
> 赞同：2
> 
> 时间：2012-12-10T19:31:09.337
> 
> 标签：ios

我正在开发一个应用程序，我需要在 mapkit 上覆盖图像地图。因此，我没有显示 mapkit 的地图，而是显示了我的图像地图。因此，我只需要 mapkit 的坐标，而不需要地图本身。

我通过将我的图像地图添加为 mapkit 地图的过度来做到这一点。

现在，问题是当应用程序加载时，它首先呈现地图套件的地图，然后覆盖我的图像地图。我试图最小化地图的大小以提供无缝体验，但仍然如此。

我想知道我是否可以：

1-延迟地图套件地图的出现，直到加载叠加图像。

2-或将地图套件的地图设置为 alpha=0，同时保留其覆盖图像。

任何其他解决方案表示赞赏。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-11T07:50:10.987

我可以将mapview的背景发送到transperent

view.backgroundColor = [[UIColor blackColor] colorWithAlphaComponent:0];

# java - 呈现的 Java 表

> ID：13807806
> 
> 赞同：0
> 
> 时间：2012-12-10T19:31:09.513
> 
> 标签：java

我有一个 4 列的秋千桌。字符串、布尔值（复选框）、字符串、按钮。我将一个按钮传递给它，我得到了我知道会发生的按钮字符串。所以我开始设置一个自定义表格渲染器以使其渲染按钮，但我遇到了一个异常，我不确定它想告诉我什么。

这是我渲染的类：

```
JtableButtonRendereer implements TableCellRenderer {
@Override
public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
    JButton button = (JButton) value;
    if (isSelected) {
        button.setForeground(table.getSelectionForeground());
        button.setBackground(table.getSelectionBackground());
    } else {
        button.setForeground(table.getForeground());
        button.setBackground(UIManager.getColor("Button.background"));
    }
    return button;

}
} 
```

这就是我用来设置渲染器的

```
imageTable.getColumn("TwitterFeed").setCellRenderer(new JtableButtonRendereer()); 
```

这是我得到的错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.IllegalArgumentException: Identifier not found
    at javax.swing.table.DefaultTableColumnModel.getColumnIndex(DefaultTableColumnModel.java:282)
    at javax.swing.JTable.getColumn(JTable.java:2564)
    at javaapplication17.NewJFrame.jButton1ActionPerformed(NewJFrame.java:187)
    at javaapplication17.NewJFrame.access$000(NewJFrame.java:36)
    at javaapplication17.NewJFrame$1.actionPerformed(NewJFrame.java:60)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:696)
    at java.awt.EventQueue$4.run(EventQueue.java:694)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

错误来自我设置新渲染器的行。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:34:44.580

从堆栈跟踪看来，表中似乎没有标识符为“TwitterFeed”的列。请注意，这是区分大小写的检查。

# filesystems - sw目录参考

> ID：13807809
> 
> 赞同：0
> 
> 时间：2012-12-10T19:31:28.800
> 
> 标签：filesystems, directory

在[**此页面上**](http://github.com/mxcl/homebrew/wiki/Installation)，我注意到对`/sw`目录的引用。我想了解有关此目录的更多信息。例如，是`/sw`只有 Mac 的约定还是在其他系统上使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:18:15.213

`/sw`由[**Fink 项目**](http://finkproject.org/faq/general)使用。诚然，它不符合[**Filesystem Hierarchy Standard**](http://wikipedia.org/wiki/Filesystem_Hierarchy_Standard)。

# javascript - iOS Chrome 检测

> ID：13807810
> 
> 赞同：52
> 
> 时间：2012-12-10T19:31:29.257
> 
> 标签：javascript, ios, google-chrome, mobile

我使用 Javascript 代码

```
if( (Android|webOS|iPhone|iPad|iPod|BlackBerry).test(navigator.userAgent) ) {} 
```

用于移动设备检测，但未检测到 iOS 上的 Chrome。有没有办法检测它？谢谢。

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-12-10T19:48:11.210

根据[Google Developers](https://developers.google.com/chrome/mobile/docs/user-agent)，UA 字符串如下所示：

```
Mozilla/5.0 (iPhone; U; CPU iPhone OS 5_1_1 like Mac OS X; en) AppleWebKit/534.46.0 (KHTML, like Gecko) CriOS/19.0.1084.60 Mobile/9B206 Safari/7534.48.3 
```

它与 iOS Safari 的不同之处在于它表示`CriOS`而不是`Version`. 所以这：

```
if(navigator.userAgent.match('CriOS')) 
```

应该这样做。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-05-12T05:51:00.427

如果你想要简单的真/假答案：

```
if(/CriOS/i.test(navigator.userAgent) &&
/iphone|ipod|ipad/i.test(navigator.userAgent)){
    return true;
}else{
    return false;
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-10T19:35:20.763

也许，您可以尝试：

```
var os = navigator.platform; 
```

然后为您的结果相应地处理 os 变量。

您还可以遍历 navigator 对象的每个对象，以帮助您更熟悉这些对象：

```
<script type="text/javascript">
for(var i in navigator){
    document.write(i+"="+navigator[i]+'<br>');
}
</script> 
```

正如在这个anwser中发现的那样： [jQuery/Javascript to detect OS without a plugin?](https://stackoverflow.com/questions/7044944/jquery-javascript-to-detect-os-without-a-plugin)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2017-04-12T11:23:25.520

您可以使用 51Degrees 的基于云的免费解决方案来获取此信息。作为免费云服务的一部分，您可以访问 BrowserName 属性，其中包括适用于 iOs 的 Chrome。

您可以使用的一些示例代码如下。您可以通过此处的商店页面获取免费的云密钥[https://51degrees.com/products/store/rvdsfcatid/cloud-device-detection-7](https://51degrees.com/products/store/rvdsfcatid/cloud-device-detection-7)

```
<!DOCTYPE html>
<html>
<body>
<p id="id01"></p>
<script>
var xmlhttp = new XMLHttpRequest();
<!-- Insert Cloud key here. -->
var key = "Licence Key"
<!-- Receives UserAgent from clients connection. -->
var ua = window.navigator.userAgent;

<!-- Lists the properties required. -->
var url = ("https://cloud.51degrees.com/api/v1/"+key+"/match?user-agent="+ua+"&Values=\
    BrowserName");

<!-- Parses the JSON object from our cloud server and returns values. -->
xmlhttp.onreadystatechange = function(){
    if ( xmlhttp.readyState == 4 && xmlhttp.status == 200){
        var match = JSON.parse(xmlhttp.responseText);
        var text = ""
        document.getElementById("id01").innerHTML=\
        "UserAgent:"+ua+"</br>"+
        "BrowserName:"+match.Values.BrowserName;
    }
}       
<!-- Sends request to server. -->
xmlhttp.open("GET", url, true);
xmlhttp.send();     
</script>
</body>
</html> 
```

有关使用 JavaScript Cloud API 的更多信息，您可以在此处查看更多教程[https://51degrees.com/Developers/Documentation/APIs/Cloud-API/JavaScript-Cloud](https://51degrees.com/Developers/Documentation/APIs/Cloud-API/JavaScript-Cloud)

披露：我在 51Degrees 工作

# android - 为什么当它是我唯一可以用于所选 API 级别的方法时，它会说“已弃用”？

> ID：13807815
> 
> 赞同：8
> 
> 时间：2012-12-10T19:31:38.633
> 
> 标签：android, sdk

在我的 Android 清单中，它说：

```
<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="16" /> 
```

但是当我编写这段代码时，最后的 getNotification 让我警告说该方法已“弃用”：

```
Notification myNotification = new Notification.Builder(appContext)
.setContentTitle("SIC")
.setContentText(tickerText)
.setWhen(when)
.setDefaults(Notification.DEFAULT_SOUND)
.setAutoCancel(true)
.setContentIntent(contentIntent)
.getNotification(); // <-- warning here 
```

现在，问题是对于 API 级别 10，这是我正在开发的最低要求，getNotification 是唯一可以使用的。名为“build()”的较新方法适用于 API 级别 16。

那么为什么我会收到已弃用的警告，即使它是我唯一可以并且应该使用的警告呢？有人可能认为警告/文档应该适应 minSdkLevel，而不是 highets...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T19:39:48.837

> 那么为什么我会收到已弃用的警告，即使它是我唯一可以并且应该使用的警告呢？

因为您的构建目标是 API 级别 16 或更高，所以不推荐使用此方法。

> 有人可能认为警告/文档应该适应 minSdkLevel，而不是 highets

在那种情况下，一个是不正确的。弃用与 无关，与`minSdkVersion`Android 之外的标准 Java 无关（弃用存在和`minSdkVersion`不存在）。

此外，您应该使用 Android 支持包的版本`Notification.Builder`(称为`NotificationCompat.Builder`，因为 API 级别 10 中不存在本机版本，您的清单表明您正在尝试支持它。`build()`应该存在`NotificationCompat.Builder`并适用于您所需的所有 API 级别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T19:44:35.880

如果你想以“技术上正确”的方式来做，你会做类似的事情

```
Notification bldr = new Notification.Builder(appContext)
    .setContentTitle("SIC")
    .setContentText(tickerText)
    .setWhen(when)
    .setDefaults(Notification.DEFAULT_SOUND)
    .setAutoCancel(true)
    .setContentIntent(contentIntent);

Notification notif;
if (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN) {
    notif = bldr.getNotification() 
} else {
    notif = bldr.build();
} 
```

然后用 注释该方法`TargetApi(16)`。这就是您通常处理这些类型问题的方式。

在您的情况下，您应该只`NotificationCompat.Builder`在兼容性包中使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-10T22:16:46.437

这是一个如何使用**NotificationCompat**类创建通知的示例，所有 API 都支持

```
public static void createNotificacion(Context ctx) {
    try {
        int smallIcon = R.drawable.ic_launcher;
        Bitmap largeIcon = BitmapFactory.decodeResource(ctx.getResources(),R.drawable.ic_launcher);
        long when = System.currentTimeMillis();
        CharSequence contentTitle = "Jorgesys";
        CharSequence contentText = "Hello Stackoverflow!!!";
        Intent notificationIntent = new Intent();
        /*create new task for each notification with pending intent so we set Intent.FLAG_ACTIVITY_NEW_TASK */
        PendingIntent pendingIntent = PendingIntent.getActivity(ctx, 0, notificationIntent, Intent.FLAG_ACTIVITY_NEW_TASK);
        /*get the system service that manage notification NotificationManager*/
        NotificationManager notificationManager =(NotificationManager) ctx.getSystemService(Context.NOTIFICATION_SERVICE); 
        /*build the notification*/
        NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(ctx)
        .setWhen(when)
        .setContentText(contentText)
        .setContentTitle(contentTitle)
        .setSmallIcon(smallIcon)
        .setAutoCancel(true)
        .setTicker(contentTitle)
        .setLargeIcon(largeIcon)
        .setContentIntent(pendingIntent);
        /*sending notification to system. Here we use unique id (when)for making different each notification
         * if we use same id, then first notification replace by the last notification*/
        notificationManager.notify((int) when, notificationBuilder.build()); 
    } catch (Exception e) {
                Log.e("Notification Exception", e.getMessage());
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T19:34:43.910

我相信该警告与您使用较新的 SDK 构建的事实有关（由于您的 targetSDKVersion 更高）。因此，您实际上可以使用较新的方法，但在使用时需要小心，因为低于目标 API 级别但高于最低 API 级别的设备将无法使用较新的 API。您可以在使用较新的调用之前检查 API 级别，但可以安全地使用它们。

例如，如果您想在 minSDK 为 2.3 时使用 Android 4.1 方法，您可以执行以下操作：

```
if (Build.VERSION.SDK_INT > Build.VERSION_CODES.JELLY_BEAN) {
    // API Specific code here
} 
```

在这种情况下，警告无关紧要。您可以将 @SuppressWarnings("deprecation") 添加到类或方法中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-10T19:41:04.720

最好的办法是使用兼容性库并忘记这个问题：

[http://developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)

这样，您就可以享受通知的所有最新功能...

# html - nil:NilClass 的未定义方法名称

> ID：13807817
> 
> 赞同：0
> 
> 时间：2012-12-10T19:31:39.460
> 
> 标签：html, ruby-on-rails, ruby

我现在这个问题太久了，我找不到问题出在哪里，所以：

```
 Showing /home/alex/Desktop/personal/app/views/entries/list.html.erb where line #17 raised:

    undefined method `name' for nil:NilClass

Extracted source (around line #17):

14:   <% @entries.each do |entry| %>
15:   <tr>
16:   <td><%= link_to entry.title, :action => "show", :id => entry.id %></td>
17:   <td><%= link_to entry.category.name, :action => "list", :category_id => entry.category.id %></td>
18:   </tr>
19:   <% end %> 
20: 
```

我的 views/entries/list.html.erb 看起来像这样：

```
<html> 
  <head>
    <title>All Entries</title>
  </head>
  <body>

  <h1>Online Personal Collection- All Entries</h1>
  <table border="1">
  <tr>
  <td width="80%"><p align="center"><i><b>Entry</b></i></td> 
   <td width="20%"><p align="center"><i><b>Category</b></i></td>
  </tr>

  <% @entries.each do |entry| %>
  <tr>
  <td><%= link_to entry.title, :action => "show", :id => entry.id %></td>
  <td><%= link_to entry.category.name, :action => "list", :category_id => entry.category.id %></td>
  </tr>
  <% end %> 

  </table>
  <p><%= link_to "Create new entry", :action => "new" %></p>
   <br />
   <%=link_to "Back to Index", entries_path%>
   <br />
   <%=link_to "Back to Account Info", my_account_path%>
   <br />
   <h3>Enter keyword</h3>
<form action ="search" method="post">
<input name = "key" type="input" />
<input value="Send" type="submit"/>
</form>
</body> 
</html> 
```

模型是这样的：

```
class Entry < ActiveRecord::Base
  attr_accessible  :comments, :date, :description, :title, :category_id, :category_name
  belongs_to :category
after_create do |entry|
      logger.info "entry created: #{entry.title} #{entry.description}"
end
end

class Category < ActiveRecord::Base
  attr_accessible :name
  has_many :entries
end 
```

和 entry_controller ：

```
class EntriesController < ApplicationController
  # GET /entries
  # GET /entries.json
  def index

    @entries = Entry.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @entries }
    end
  end

  def list
      if params[ :category_id].nil?
                  @entries = Entry.find(:all)
          else
              @entries = Entry.find(:all ,
                                :conditions => ["category_id = ?" , params[ :category_id]])
                   params[ :category_id] = nil

      respond_to do |format|
      format.html # list.html.erb
      format.json { render json: @entry }
    end
  end
  end

  # GET /entries/1
  # GET /entries/1.json
  def show
    @entry = Entry.find(params[:id])
    @category = Category.find(:all)

   respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @entry }
    end
  end

  # GET /entries/new
  # GET /entries/new.json
  def new
    @entry = Entry.new
    @categories= Category.find(:all)

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @entry }
    end
  end

  # GET /entries/1/edit
  def edit
    @entry = Entry.find(params[:id])
    @categories = Category.find(:all)
  end

  # POST /entries
  # POST /entries.json
  def create
    @entry = Entry.new(params[:entry])
    respond_to do |format|
      if @entry.save
        format.html { redirect_to @entry, notice: 'Entry was successfully created.' }
        format.json { render json: @entry, status: :created, location: @entry }
      else
        format.html { render action: "new" }
        format.json { render json: @entry.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /entries/1
  # PUT /entries/1.json 
```

现在，如果有人发现问题并可以帮助我了解我做错了什么，我将不胜感激。谢谢！亚历克斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:40:21.660

你有一个没有类别的条目，所以`entry.category`是 nil，所以`entry.category.name`（在这种情况下）是`nil.name`，这是没有意义的。由于这个问题，避免在这样的关联上链接方法通常是一种好习惯。

Rails 有内置的委托，您可以使用它来防止这种情况：

```
class Entry < ActiveRecord::Base
  #...
  delegate :name, to: :category, prefix: :category, allow_nil: true
end 
```

这定义了`entry.category_name`实例方法。在您看来，如果该条目不存在任何类别，则不会出现任何内容。[您可以在此处](http://apidock.com/rails/Module/delegate)阅读有关委派方法和选项的更多信息。

**更新：**

因此，我忽略了您尝试链接到 nil 对象的事实，而当对象为 nil 时，您真正想要做的可能是根本不显示链接。有一种[`link_to_if`](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to_if)方法（我从未使用过，但可能对你有用）：

```
<%= link_to_if(entry.category, entry.category_name, :action => "list", :category_id => entry.category.id %> 
```

您仍然需要使用`category_name`委托方法，因为当第一个参数的计算结果为 false 时，会打印名称（没有链接）。

# asp.net-mvc-3 - ASP.NET 网页 Razor v2 中的 WebGrid 表单发布

> ID：13807820
> 
> 赞同：0
> 
> 时间：2012-12-10T19:31:47.050
> 
> 标签：asp.net-mvc-3, forms, razor, postback, webgrid

好的，典型问题：

*   我有一张包含 7884 条记录的表（现在——但会有很多……）
*   我想为管理员提供一种通过网络快速监控此表的方法。
*   我还需要让查看者能够指定一些过滤以进一步缩小结果范围，并且能够说明要从数据库中提取多少记录。

我正在介绍 ASP.NET Web 开发，因此我选择使用（更直接的）ASP.NET WebPages 框架。

我使用`System.Web.Helpers.WebGrid`来显示记录，我喜欢它自动实现分页的事实。

我正在使用 a`<form method="post">`来收集过滤参数，这样当表单回发时，我可以根据这些值调整我的查询。我还将这些值分配给表单字段，以便用户可以看到正在使用的发布参数。

但是，我注意到由 生成的页面链接`WebGrid`显示在页面页脚中，所有引用的当前页面 URL 都带有表单的查询片段*`?page=n`*。

所以，很明显，当页面被导航时，我收到一个没有我的页面表单数据的请求......

**您推荐什么模式来解决这个简单的问题并暂时缩短这些页面的开发时间？**

```
@{
    Layout = "~/_TablePageLayout.cshtml";
    Page.Title = "Wala-Wala";

    var headlinePattern = Request.Form["headlinePattern"];
    var _headlinePattern = headlinePattern;
    if (string.IsNullOrWhiteSpace(headlinePattern)) {
        _headlinePattern = "%";
        headlinePattern = string.Empty;
    }

    var maxCount = Request.Form["maxCount"];
    int? _maxCount = maxCount.TryConvert<int>();
    if (_maxCount == null || _maxCount < 0) {
        _maxCount = null;
        maxCount = string.Empty;
    }

    var database = Database.Open("Wala-Wala-DB");
    var query = _maxCount == null
        ? @"SELECT * FROM dbo.WalaWala WHERE Headline LIKE @1"
        : @"SELECT TOP(@0) * FROM dbo.WalaWala WHERE Headline LIKE @1";

    var dataSource = database.Query(query, _maxCount, _headlinePattern);

    var grid = new WebGrid(source: dataSource, rowsPerPage: 25, canPage: true);
    grid.SortColumn = "Id";
    grid.SortDirection = SortDirection.Descending;

    var rowStart = grid.PageIndex * @grid.RowsPerPage + 1;
    var rowEnd = grid.PageIndex * @grid.RowsPerPage + grid.Rows.Count;
}

<h1>@Page.Title</h1>

<form method="post">
<fieldset>
    <legend>Search</legend>
    <ol>
        <li>
            <label for="maxCount">Maximum:</label>
            <input type="text" id="maxCount" name="maxCount" value="@maxCount""/>
        </li>
        <li>
            <label for="headlinePattern">Headline Pattern:</label>
            <input type="text" id="headlinePattern" name="headlinePattern" value="@headlinePattern""/>
            <input type="submit" value="Search" />
        </li>
    </ol>
</fieldset>
</form>

<p>
    <b>@grid.TotalRowCount entries found. Showing results @rowStart to @rowEnd (page @(grid.PageIndex + 1)
        of @grid.PageCount).</b>
</p>

<div>
    @grid.GetHtml(
        tableStyle: "tableStyle",
        alternatingRowStyle: "alternatingRowStyle",
        mode: WebGridPagerModes.All,
        columns: new[] {
            grid.Column(columnName: "Id", style: "columnStyle"),
            grid.Column(columnName: "Headline", style: "columnStyle"),
            grid.Column(columnName: "DTS", style: "columnStyle"),
        }
    )
</div> 
```

![在此处输入图像描述](../Images/95c86214c510b3801051223d0974e2a2.png)

![在此处输入图像描述](../Images/53dfaa01b133b42e2c92ab078df5d7c1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:19:38.080

使用 jQuery 强制发布表单并防止点击链接发起 GET 请求。本文更详细地解释了如何做到这一点：http: [//www.mikesdotnetting.com/Article/180/Displaying-Search-Results-In-A-WebGrid](http://www.mikesdotnetting.com/Article/180/Displaying-Search-Results-In-A-WebGrid)

# php - ZF2 - 如何更改错误/404 响应页面？不仅仅是模板，而是设置一个新的 ViewModel

> ID：13807821
> 
> 赞同：5
> 
> 时间：2012-12-10T19:31:50.170
> 
> 标签：php, zend-framework2, http-status-code-404, zend-view, zend-framework-mvc

默认情况下，页面在`Application`module.config 数组中设置如下：

```
'template_map' => array(
    'error/404' => __DIR__ . '/../view/error/404.phtml' 
```

我想换页。我想要新`ViewModel`的充满变量的。这意味着仅仅改变模板是不够的：

```
'error/404' => __DIR__ . '/../view/error/my_new_404_template.phtml' 
```

但我不明白怎么做。我看不到请求到达`'error/404'`.

*   如何`ViewModel`为它创造新的？

*   如何将变量附加到它？

*   路线是怎么`'error/404'`来抓它的？

例如，我有这样一个`'error/404'`页面方法：

```
public function pageNotFoundAction() {

    $view = new ViewModel();

    $view->setTemplate('error/404');     // set my template

    $sm = $this->getServiceLocator()->get('SessionManager');
    $cont = new Container('SomeNamespace', $sm);

    $view->var1 = $cont->offsetGet('someValue1');   // the "error/404" template
    $view->var2 = $cont->offsetGet('someValue2');   //       is full of variables
    $view->var3 = $cont->offsetGet('someValue3');
    $view->var4 = "One more view variable";

    // And now I return it somewhere and want it to be called
    //    in case of "the page is not found"
    return $view;
} 
```

如何做出这样的改变？我无法获得他们创建的系统来处理诸如`'error/404'`. 请帮忙。

**更新 1**

更复杂的任务。如何有几个`'error/404'`页面？想问创建框架的人是否知道`'not_found_template'`不能有 `'error/404'`页面数组。怎么可能？如果我这样设置这个选项：

```
'template_map' => array(
    'error/404' => __DIR__ . '/../view/error/404.phtml',
    'my-page/one_more_error404' => __DIR__ . '/../view/my-page/my-page/one_more_error404.phtml',
    'other_page/second_404' => __DIR__ . '/../view/other-page/one_more_error404.phtml',

'not_found_template' => array(
    'error/404',
    'my-page/one_more_error404',
    'other-page/second_404',
); 
```

它抛出一个错误。`'not_found_template'`强迫你只有一个`'error/404'`模板？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-06T13:41:26.840

还有另一种方法。赶上`EVENT_DISPATCH_ERROR`并完全重建`viewModel`。Cavern 是那个布局 - 是一个 root `viewModel`，默认情况下附加到布局中的内容是另一个`viewModel`（子）。这些点在官方文档中描述得不是很清楚。

这是它在您的 中的样子`Module.php`：

```
public function onBootstrap(MvcEvent $event)
{
    $app = $event->getParam( 'application' );
    $eventManager = $app->getEventManager();

    /** attach Front layout for 404 errors */
    $eventManager->attach( MvcEvent::EVENT_DISPATCH_ERROR, function( MvcEvent $event ){

        /** here you can retrieve anything from your serviceManager */
        $serviceManager = $event->getApplication()->getServiceManager();
        $someVar = $serviceManager->get( 'Some\Factory' )->getSomeValue();

        /** here you redefine layout used to publish an error */
        $layout = $serviceManager->get( 'viewManager' )->getViewModel();
        $layout->setTemplate( 'layout/start' );

        /** here you redefine template used to the error exactly and pass custom variable into ViewModel */
        $viewModel = $event->getViewModel();
        $viewModel->setVariables( array( 'someVar' => $someVar ) )
                  ->setTemplate( 'error/404' );
    });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-15T11:21:59.113

我用它来管理 404 错误（我将我的网站从 spip 移动到基于 ZF2 的 cms）：

在模块 onBootstrap 函数中：

```
$eventManager->getSharedManager()->attach('*', MvcEvent::EVENT_DISPATCH_ERROR, array($this, 'onDispatchError'), -100); 
```

然后

```
public function onDispatchError(MvcEvent $event)
{
    $response = $event->getResponse();
    if ($response->getStatusCode() == 404) {
        $url = $event->getRouter()->assemble(array(), array('name' => 'index'));
        $requestUri = $event->getRequest()->getRequestUri();
        $response->getHeaders()->addHeaderLine('Location', "$url?url=$requestUri");
        $response->setStatusCode(200);
        $response->sendHeaders();
        $event->stopPropagation(true);
    } elseif($response->getStatusCode() == 500){
        //DO SOMETHING else?
        return;
     }
} 
```

在这段代码中，我们从不返回 404 错误，我们只是使用请求的 url 作为参数调用路由（在我的示例索引中）

我希望对你有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-09T12:33:33.387

首先是创建视图：

> 模块/您的应用程序/视图/您的应用程序/错误/index.phtml
> 
> 模块/Yourapplication/view/yourapplication/error/404.phtml

第二件事是在模块配置中注册视图：

在您的应用程序的 module.config.php 中

```
'view_manager' => array(
        //[...]
        'not_found_template'       => 'error/404',
        'exception_template'       => 'error/index',
        'template_map' => array(
        //[...]
        'error/404'   => __DIR__ . '/../view/yourapplication/error/404.phtml',
        'error/index' => __DIR__ . '/../view/yourapplication/error/index.phtml',
        ),
   // [...]
    ), 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-16T15:18:15.263

我不确定我是否遵循您要实现的目标，您能否举一个清楚的例子说明您要做什么？

如果您只是尝试向传递的视图模型添加变量，您甚至可以在控制器中执行此操作，请查看**AbstractActionController**

```
/**
 * Action called if matched action does not exist
 *
 * @return array
 */
public function notFoundAction()
{
    $response   = $this->response;
    $event      = $this->getEvent();
    $routeMatch = $event->getRouteMatch();
    $routeMatch->setParam('action', 'not-found');

    if ($response instanceof HttpResponse) {
        return $this->createHttpNotFoundModel($response);
    }
    return $this->createConsoleNotFoundModel($response);
}

/**
 * Create an HTTP view model representing a "not found" page
 *
 * @param  HttpResponse $response
 * @return ViewModel
 */
protected function createHttpNotFoundModel(HttpResponse $response)
{
    $response->setStatusCode(404);

    // Add in extra stuff from your ServiceLocator here...

    // $viewModel->setTemplate(..); 

    return new ViewModel(array(
        'content' => 'Page not found',
    ));
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-25T06:42:52.763

在`module.php`您还可以更改模板和布局。

```
function onBootstrap(EventInterface $e) {
  $app = $e->getApplication();
  $evt = $app->getEventManager();
  $evt->attach(MvcEvent::EVENT_DISPATCH_ERROR, array($this,'onDispatchError'), 100);    
}

function onDispatchError(MvcEvent $e) {
  $vm = $e->getViewModel();
  $vm->setTemplate('layout/blank');
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-24T08:13:44.567

或者更简单地说（在你想要的地方）：

```
/* @var \Zend\Mvc\View\Http\RouteNotFoundStrategy $strategy */
$strategy = $this->getServiceLocator()->get('HttpRouteNotFoundStrategy');
$strategy->setNotFoundTemplate('application/other/404');

$view = new ViewModel();
//$view->setTemplate('application/other/404');
return $view; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-17T12:39:13.990

您应该首先在 Module.php 中分离默认的 notfoundstrategy，如果出现 404，您应该从控制器返回一个新的视图模型。请看这篇文章： http: [//www.cagataygurturk.com/zf2-controller-specific-not-found-page/](http://www.cagataygurturk.com/zf2-controller-specific-not-found-page/)

# php - 头功能

> ID：13807826
> 
> 赞同：-1
> 
> 时间：2012-12-10T19:32:29.497
> 
> 标签：php, ajax, jquery-mobile, header

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我有一个用于检查用户名和密码的 PHP 文件。这部分工作正常，但成功登录后我想`header()`用来重定向到用户面板页面。这是我收到的记录错误：

> [2012 年 12 月 10 日 12:25:26] PHP 警告：无法修改标头信息 - 标头已由 /home2/jzperson 中的（输出开始于 /home2/jzperson/public_html/imes/php/login.php:10）发送/public_html/imes/php/login.php 在第 32 行

这是第 10 行：

```
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script> 
```

这是第 32 行：

```
header("Location: http://imes.jzpersonal.com/userpanel.html"); 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:35:23.740

`header`在您的呼叫到达第 32 行之前，您可能已经回显了一些输出。

见`header`函数说明：http: [//php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

> 请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 发送。使用 include 或 require 函数或其他文件访问函数读取代码并在调用 header() 之前输出空格或空行是一个非常常见的错误。使用单个 PHP/HTML 文件时也存在同样的问题。

## 澄清

为了澄清一点，重定向使用`header()`是通过在服务器响应中包含一个原始位置响应头字段来执行的。当接收方读取响应并看到该标头字段时，它会丢弃当前响应并向您提供的目的地发出另一个请求。

现在，标头始终位于服务器响应的顶部（头部）。这就是为什么它们被称为标题！如果您输出**任何**内容，PHP 将立即使用默认标题“为其添加前缀”，并且在此之后无法再添加任何内容。因此，稍后通过尝试在代码中设置另一个标头，您会收到错误：

> 无法修改标头信息 -**标头已发送**

通过在第 10 行输出 HTML，您不能再发出任何标题，因为它们已经发送（作为 HTML 输出的前缀）。

您可以在此处找到有关标头的更多信息：http: [//www.faqs.org/rfcs/rfc2616.html](http://www.faqs.org/rfcs/rfc2616.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T19:35:44.080

基本上，在将任何内容发送到浏览器之前（在 HTML 之前），您需要检查用户是否登录（并重定向）。那么，您的代码将如下所示：

```
<?php
...
if($loggedIn)
{
    header("Location: http://imes.jzpersonal.com/userpanel.html");
    exit();
}
?>
<html>
...
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T19:37:16.640

您正在尝试在标题语句之前写一些东西 在标题语句之前删除任何回显语句/html 内容。这应该够了吧

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T20:57:08.860

你也可以作弊，只使用输出缓冲——在脚本树的最开始使用 ob_start(); 开始捕获输出。您可以随心所欲地使用标题和设置 cookie 等。

在脚本树的最后一行使用 ob_end_flush(); 发送输出。如果您愿意，也可以使用 $buffer = ob_get_clean(); 将其抓取到变量中以进一步处理。

虽然它不是这样的解决方案，但它确实允许更灵活的编码环境，并且它将解决您的上述问题。

如果要发送 Location 标头，最好刷新并死掉：ob_start(); /* 很长的片段 */ header('Location: somepage.php'); ob_end_flush(); 死（）;

这将防止在发送位置更改后进行任何进一步的处理。

顺便说一句：当我谈到脚本树时，我指的是包含路径——比如把 ob_start(); 放入一个包含在其他任何内容之前的头文件和一个刷新（并在需要时处理）输出缓冲区的页脚文件。请记住，如上所述，位置更改后应该立即停止脚本。

会话可能还需要用一个标头 Location 后跟一个 die 来关闭 - 简单地使用它

```
ob_start();
/* very long snip */
header('Location: somepage.php');
ob_end_flush();
session_write_close();
die(); 
```

我在想知道为什么会话数据丢失了几个小时后发现了一个！请记住这一点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T19:35:36.410

`header();`如果已经将**任何内容**作为输出发送，则不能使用。这意味着 HTML。首先进行所有 PHP 处理，然后输出 HTML/JS。

# java - 是否可以在不使用 instanceof 和 getClass 的情况下覆盖 equals？

> ID：13807827
> 
> 赞同：2
> 
> 时间：2012-12-10T19:32:37.793
> 
> 标签：java, overriding, equals

我想在`equals(Object o)`不使用`instanceof`,`getClass()`和强制转换的情况下覆盖。这在 Java 中是否可行，如果可以，它是如何实现的？编辑：我也想用这个方法。例如：我想在 Cow 类中重写这个方法并用它来检查我的 Cow 是否在逻辑上等于其他 Cow？

谢谢大家的解答。我的主要问题是：如果我将 Car 作为其他类发送给我的奶牛或任何其他对象会发生什么。我如何检查 Object o 是否有方法`getName()`（假设我的 Cow 有这个方法）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:41:32.427

当然。

使`Cow`序列化，并确保其序列化形式是规范的（最坏的情况是通过实现`Externalizable`和手写您自己的规范序列化），然后在中执行以下操作`equals`：

1.  尝试序列化参数。如果失败，则返回 false。
2.  序列化`this`。
3.  比较两者的序列化字节。

由于串行形式包括一个标识类型的字符串，它包括区分不同类型实例所需的字节。

这并不容易，效率低下，可能是维护的噩梦，绝对不应该是您的首选，但它确实证明了 Java 代码有一些可用的语言技巧，可以在没有检查`instanceof`或`Class`相同性检查的情况下进行类型区分。

不过需要注意的是：串行形式不区分在不同类加载器中加载的同名类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:37:49.217

如果平等的标准仅限于使用只能从对象获得的信息，那当然是可能的。

`equals`这 / 似乎 / 不太可能......如果你只使用`Object`'s 方法，你为什么要压倒一切？但是，如果这适合您的设计，则没有什么可以阻止您这样做。

只需确保您维护[Javadocs 中定义的合同`equals()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)

# ios - iOS 中 Novocaine 上的多个音频和设置音量

> ID：13807828
> 
> 赞同：1
> 
> 时间：2012-12-10T19:32:41.073
> 
> 标签：ios, audio, core-audio, channels, novocaine

如何使用 Novocaine 播放多个音频并更改其音量？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T01:39:29.613

有一个类似的问题，我写了很长的回复

[在音频应用程序中使用 Novocaine](https://stackoverflow.com/questions/13291119/using-novocaine-in-an-audio-app/14047436#14047436)

基本上一次播放多个声音需要逐个采样混合各种声音。改变音量涉及将音频缓冲区中的样本乘以某个幅度值。也就是说，如果您希望输出的音量增加两倍，只需将每个样本乘以 2.0f。Accelerate 框架可以帮助您解决这个问题。

# c++ - 使用单个堆栈的后缀中缀不适用于大于 9 的数字

> ID：13807830
> 
> 赞同：0
> 
> 时间：2012-12-10T19:32:46.997
> 
> 标签：c++

我想将中缀转换为后缀表达式。

oki 我得到了它的工作，但我很难弄清楚如果你输入像 5 * 3 + -1.2 那么如果你想要负数，它就行不通了。这是我的代码：

```
void infix2postfix(char* infix, char* postfix){
     char *in,*post;
        Stack<char>Q;
        char n;
        in = &infix[0];
        post = &postfix[0];
        while(*in){
            while(*in == ' ' || *in == '\t'){
                in++;
            }
            if( isdigit(*in) || isalpha(*in) ){
                while( isdigit(*in) || isalpha(*in)){
                    *post = *in;
                    post++;
                    in++;
                }
            }
            if( *in == '(' ){
                Q.Push(*in);
                in++;
            }
            if( *in == ')'){
                n = Q.Pop();
                while( n != '(' ){
                    *post = n;
                    post++;
                    n = Q.Pop();
                }
                in++;
            }
            if( operand(*in) ){
                if(Q.IsEmpty())
                    Q.Push(*in);
                else{
                    n = Q.Pop();
                    while(priority(n) >= priority(*in)){
                        *post = n;
                        post++;
                        n = Q.Pop();
                    }
                    Q.Push(n);
                    Q.Push(*in);
                }
                in++;
            }
        }
        while(!Q.IsEmpty())
        {
            n = Q.Pop();
            *post = n;
            post++;

        }
        *post = '\0';
    } 
```

它有效，但我希望它与一元运算符一起使用，因此它会接受输入`4 * 5 + 4 + -1.2`，因此每个数字之间都有一个空格，除非它是负数 -1.2。我的代码也不适用于大于 9 的整数，如果我输入 10，那么它只会乘以 1*0。.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:42:46.017

如果遇到 a `-`，则必须检测它是运算符（减法）还是否定。

我建议你检查以前的符号。如果前一个符号是运算符，那么“-”可能是否定的。

# c# - 在面板上绘制一个矩形

> ID：13807840
> 
> 赞同：1
> 
> 时间：2012-12-10T19:33:22.727
> 
> 标签：c#, drawing

我需要在面板中绘制一个矩形。我事先不知道颜色，我在运行时获取颜色，我不知道如何将颜色设置为不固定值，其次 - 当我尝试绘制矩形时，它什么都不做。这是我应该绘制矩形的代码（实际上它在另一个项目中，但那只是以普通形式，而不是在面板中）

```
 Graphics g;  
    g = CreateGraphics();  
    Pen p;  
    Rectangle r;  
    p = new Pen(Brushes.Blue); 
    r = new Rectangle(1, 1, 578, 38);  
    g.DrawRectangle(p, r);` 
```

所以我需要用一个变量替换 (Brushes.Blue) 并且我需要在这个代码中设置的坐标的面板中绘制矩形..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:44:24.317

`Pen`使用[`Pen(Color)`](http://msdn.microsoft.com/en-us/library/ydkz9kas.aspx)构造函数而不是构造函数来构造你的`Pen(Brush)`。然后，一旦您知道了颜色，就可以定义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:44:21.073

`Paint`您应该在面板的情况下进行绘图。每当 windows 决定是时候重新绘制面板并且`PaintEventArgs`包含一个`Graphics`可以在其上绘制矩形的对象时，就会发生此事件。

是`Brush`一个抽象类，但您可以使用该`SolidBrush`对象在运行时创建自定义彩色画笔：

```
int red = 255;
int green = 0;
int blue = 0;
Brush myBrush = new SolidBrush(Color.FromArgb(red, green, blue)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T19:44:44.163

这个给你：

```
private Color _color;                 // save the color somewhere
private bool iKnowDaColor = false;    // this will be set to true when we know the color
public Form1() {
    InitializeComponents();

    // on invalidate we want to be able to draw the rectangle
    panel1.Paint += new PaintEventHandler(panel_Paint);
}

void panel_Paint(object sender, PaintEventArgs e) {
    // if we know the color paint the rectangle
    if(iKnowDaColor) {
        e.Graphics.DrawRectangle(new Pen(_color),
            1, 1, 578, 38);
    }
} 
```

当你知道颜色时：

```
_color = ...
iKnowDaColor = true;

// causes the panel to invalidate and our painting procedure to be called
panel.Invalidate(); 
```

我没有对此进行测试，但应该给你基本的想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T19:58:53.957

我认为这样做的更好方法是扩展 Panel 类并添加一些自定义 OnPaint 事件逻辑。

```
public class PanelRect : Panel
{
    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);

        using (Graphics g = e.Graphics)
        {
            Rectangle rect = ClientRectangle;
            rect.Location = new Point(20, 20);                  // specify rectangle relative position here (relative to parent container)
            rect.Size = new Size(30, 30);                       // specify rectangle size here

            using (Brush brush = new SolidBrush(Color.Aqua))    // specify color here and brush type here
            {
                g.FillRectangle(brush, rect);
            }
        }
    }
} 
```

PS这不是一个高级示例，但可能会对您有所帮助。您可以将大小、位置和颜色等移动到属性，以便您可以轻松地从设计师那里更改它们。

PSPS 如果您需要一个未填充的矩形，只需使用 Pen 对象而不是 Brush（您也可以将 FillRectangle 更改为更合适的东西）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T20:05:15.297

将以下代码放在适当的位置：

```
Graphics g = panel1.CreateGraphics();
int redInt=255, blueInt=255, greenInt=255; //255 is example, give it what u know
Pen p = new Pen(Color.FromArgb(redInt,blueInt,greenInt));
Rectangle r = new Rectangle(1, 1, 578, 38);
g.DrawRectangle(p, r); 
```

如果你想在其他地方绘制矩形，比如表格，你可以这样做`g = this.CreateGraphics`。

# c# - Linq 从多个表中选择相同的数据类型

> ID：13807843
> 
> 赞同：1
> 
> 时间：2012-12-10T19:33:33.127
> 
> 标签：c#, .net, linq

我想要实现的是来自多个表的字符串列表。我目前有一个简单的数据库结构，它有一个带有 2 个子表的 ParentTable（比如说 Child1 和 Child2）。Child1 和 Child2 都有一个名为 Name 的 nvarchar(50) 类型的列。目前，我可以执行多个查询来实现单个字符串列表：

```
var myList = new List<string>();
myList.AddRange(Child1.Select(c1 => c1.Name));
myList.AddRange(Child2.Select(c2 => c2.Name)); 
```

或者

```
var myList = new List<string>();
myList.AddRange(ParentTable.SelectMany(x => x.Child1.Select (c1 => c1.Name)));
myList.AddRange(ParentTable.SelectMany(x => x.Child2.Select (c2 => c2.Name))); 
```

我的最终问题是是否可以将其合并为 1 个查询，即使这意味着使用 Parent 表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:35:10.213

您只需要使用`Concat`运算符：

```
var results = Child1.Select(c1 => c1.Name)
              .Concat(Child2.Select(c2 => c2.Name)).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:44:48.890

您可以使用`Union`运算符，它还会为您删除重复项：

```
var q = Child1.Select(c1 => c1.Name).Union(Child2.Select(c2 => c.Name)).ToList(); 
```

# php - 处理 Google Checkout 订单通知，然后传递到我的购物车软件

> ID：13807846
> 
> 赞同：0
> 
> 时间：2012-12-10T19:33:47.653
> 
> 标签：php, curl, http-headers, google-checkout

我将 Big Commerce 用作现成的购物车产品。换句话说，我无权访问购物车的任何服务器端代码。为了将其与 Google Checkout 集成，它提供了以下 URL 以用作 Google Checkout 的 API 回调 URL：

`https://store.example.com/googlecheckout/xml.php`

但是，我需要提供自己的 API 回调 URL：`https://www.example.com/order/preprocess.php`

因此，想法是自己在第二个 URL 接收请求，对收到的数据做我需要做的事情，然后将原始请求传递到我的购物车，以便它可以收到新的 Google Checkout 订单的提醒. 这是我的代码：

```
 $rawPostData = file_get_contents("php://input");

$headers = array(

    'Content-Type: application/xml; charset=UTF-8',
    'HTTPS: on',
    'HTTP_USER_AGENT: Google Checkout Notification Agent 1.0',
    'HTTP_ACCEPT_ENCODING: gzip',
    'Authorization: Basic myBase64MerchantIdColonKey',
    'Accept: application/xml;charset=UTF-8'

);
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL,            "https://store.example.com/googlecheckout/xml.php" );
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1 );
    curl_setopt($ch, CURLOPT_POST,           1 );
    curl_setopt($ch, CURLOPT_POSTFIELDS,     $rawPostData ); 
    curl_setopt($ch, CURLOPT_HTTPHEADER,     $headers); 

    $result = curl_exec ($ch); 
```

我已经确认 $rawPostData 确实包含我期望的 XML 数据。但是，`$result`curl_exec 的`false`. 我使用的 curl 代码来自[RAW POST using cURL in PHP](https://stackoverflow.com/questions/871431/raw-post-using-curl-in-php?answertab=votes#tab-top)。

知道为什么`curl_exec`会失败吗？我需要在我的 curl 请求中包含来自 Google Checkout 的原始请求中的其他参数吗？如果是这样，我将如何找到这些？

# c++ - 在 Mingw 中打印堆栈跟踪

> ID：13807854
> 
> 赞同：4
> 
> 时间：2012-12-10T19:34:13.397
> 
> 标签：c++, mingw

我需要修改现有的 C 应用程序并在某个位置打印堆栈跟踪。我怎样才能做到这一点？

我无法编译此源：

```
#ifndef _GNU_SOURCE
#define _GNU_SOURCE
#endif
#ifndef __USE_GNU
#define __USE_GNU
#endif

#include <execinfo.h>
#include <signal.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ucontext.h>
#include <unistd.h>

int main(int argc, char ** argv)
{
 void *             array[50];
 void *             caller_address;
 char **            messages;

 int size = backtrace(array, 50);

 /* overwrite sigaction with caller's address */
 array[1] = caller_address;

 messages = backtrace_symbols(array, size);

 /* skip first stack frame (points here) */
 for (int i = 1; i < size && messages != NULL; ++i)
 {
  fprintf(stderr, "[bt]: (%d) %s\n", i, messages[i]);
 }

 free(messages);

} 
```

因为它缺少一些符号：

```
$ i586-mingw32msvc-gcc -rdynamic ./trace.cpp -I/usr/include/
i586-mingw32msvc-gcc: unrecognized option '-rdynamic'
./trace.cpp:39:2: warning: no newline at end of file
/tmp/cc6hCJtU.o:trace.cpp:(.text+0x26): undefined reference to `_backtrace'
/tmp/cc6hCJtU.o:trace.cpp:(.text+0x47): undefined reference to `_backtrace_symbols'
/tmp/cc6hCJtU.o:trace.cpp:(.text+0x67): undefined reference to `_stderr' 
```

我没有设法归档正确的 .a 文件。

以下答案，可以在stackoverflow上找到，实际上是不可用的：

*   libunwind 在交叉编译时导致编译错误：error: ucontext.h: No such file or directory
*   [http://www.codeproject.com/Articles/11132/Walking-the-callstack](http://www.codeproject.com/Articles/11132/Walking-the-callstack)不能在 MinGW 中编译
*   [http://www.mr-edd.co.uk/code/dbg](http://www.mr-edd.co.uk/code/dbg)也无法编译
*   [http://www.mr-edd.co.uk/code/stack_trace](http://www.mr-edd.co.uk/code/stack_trace)也无法编译并且有错误

有没有可行的解决方案？提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:29:16.257

您的 MinGW 工具链不支持 -rdynamic 标志，并且无法使用`backtrace()`或编译您的应用程序`backtrace_symbols()`

不确定您使用的是什么 MinGW，但我建议您从这里获得一个新的：http: [//mingw-w64.sourceforge.net/](http://mingw-w64.sourceforge.net/)

# simple-html-dom - SimpleHTMLDOM Parser 不拾取 img 标签

> ID：13807855
> 
> 赞同：1
> 
> 时间：2012-12-10T19:34:14.703
> 
> 标签：simple-html-dom

我一直在使用 SimpleHTMLDOM Parser (http://simplehtmldom.sourceforge.net/)，这是一个很棒的工具，但是，我遇到了从正文中收集 img 元素的问题。最好通过一个例子来说明这一点：

这是同一图像的 2 个 URL。我分别在这些 URL 上运行以下代码：

```
$html = $this->DOMParser->file_get_html($url);

foreach($html->find('img') as $element){
   print($element->src);
} 
```

[http://imageshack.us/photo/my-images/412/71banksy89789ll7.jpg/](http://imageshack.us/photo/my-images/412/71banksy89789ll7.jpg/)

（SHTMLD 在这里提取图像）

和

[http://imageshack.us/scaled/landing/412/71banksy89789ll7.jpg](http://imageshack.us/scaled/landing/412/71banksy89789ll7.jpg)

（SHTMLD 什么都没有）

我已经尝试了几天来弄清楚发生了什么，但这个例子中唯一的不同在于 html 标签。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:38:32.287

您的第二个 url 直接指向 jpeg 文件，而不是包含 img 标签的 html 页面。SimpleHTMLDOM Parser 只能解析 html 页面，因此当您向其提供图像文件而不是 html 页面时，它将无法工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:41:33.160

很简单，您的第二个 URL 不是 HTML，它是 Jpg！:)

# javascript - 用 Javascript 加密，用 PKCS#1 解密 PHP

> ID：13807856
> 
> 赞同：1
> 
> 时间：2012-12-10T19:34:27.327
> 
> 标签：javascript, php, rsa, phpseclib, jsbn

我试图使用 PKCS#1 在 Javascript/PHP 中进行加密/解密。我有以下变量：

```
e: Public exponent (for encryption)
d: Private exponent (for decryption)
n: modulus 
```

我正在使用这个 javascript 库来解密： [http://www-cs-students.stanford.edu/~tjw/jsbn/rsa.js](http://www-cs-students.stanford.edu/~tjw/jsbn/rsa.js) 像这样：

```
 var rsa = new RSAKey();

    rsa.setPublic(n, e);

    var cipherText = rsa.encrypt(plainText); 
```

要在 PHP 中解密，我使用 PHPSec 库：

问题1：如何将d和n转换为要在phpseclib中使用的私钥？

问题 2：如何将 Javascript 代码的输出转换为可与 phpseclib 一起使用的形式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:08:10.323

对于 javascript / PHP 互操作性，请查看以下内容：

[http://area51.phpbb.com/phpBB/viewtopic.php?f=84&t=33024&start=0](http://area51.phpbb.com/phpBB/viewtopic.php?f=84&t=33024&start=0)

它执行 PKCS#1 v2.1 RSAES-OAEP（应该提供比 PKCS#1 v2.1 RSASSA-PKCS1-v1_5 更好的安全性）。

$rsa->loadKey(array('e' => new Math_BigInteger('...', 256), 'n' => new Math_BigInteger('...', 256) ) );

如果这不起作用，请告诉我。

或者，你可以试试这个：

[http://www.frostjedi.com/phpbb3/viewtopic.php?p=331621#p331621](http://www.frostjedi.com/phpbb3/viewtopic.php?p=331621#p331621)

（见第二个代码块）

为了将 js 输出转换为 PHP 可以使用的格式...我链接到的概念证明是将输出传递给 char2hex()：

```
function char2hex(source)
{
   var hex = "";
   for (var i = 0; i < source.length; i+=1)
   {
      temp = source[i].toString(16);
      switch (temp.length)
      {
         case 1:
            temp = "0" + temp;
            break;
         case 0:
           temp = "00";
      }
      hex+= temp;
   }
   return hex;
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-15T12:59:33.690

我想你已经找到了解决问题的方法，但是对于那些仍在寻找解决方案的人来说，这里有一个在 Javascript 和 PHP 之间使用 RSA 的小例子（示例）：

```
<?php
$path = 'phpseclib';
set_include_path(get_include_path() . PATH_SEPARATOR . $path);
include_once('Crypt/RSA.php');

$rsa = new Crypt_RSA();
$rsa->setPublicKeyFormat(CRYPT_RSA_PUBLIC_FORMAT_RAW);
$key = $rsa->createKey(512);
$e = new Math_BigInteger($key['publickey']['e'], 10);
$e = $e->toHex();
$n = new Math_BigInteger($key['publickey']['n'], 10);
$n = $n->toHex();
function decrypt($msg, $key) {
    $rsa = new Crypt_RSA();
    $rsa->setEncryptionMode(CRYPT_RSA_ENCRYPTION_PKCS1);
    $rsa->loadKey($key, CRYPT_RSA_PRIVATE_FORMAT_PKCS1);
    $s = new Math_BigInteger($msg, 16);
    return $rsa->decrypt($s->toBytes());
}
?>
<script type="text/javascript" src="javascript/jsbn.js"></script>
<script type="text/javascript" src="javascript/prng4.js"></script>
<script type="text/javascript" src="javascript/rng.js"></script>
<script type="text/javascript" src="javascript/rsa.js"></script>
<script>
<?php
echo "var n='".$n."';";
echo "var e='".$e."';";
?>
function encrypt() {
    var rsa = new RSAKey();
    rsa.setPublic(n, e);
    document.getElementById('enc_text').value = rsa.encrypt(document.getElementById('plaintext').value);
}
</script>

Plain Text:<br/>
<input id='plaintext' name='plaintext' type="text" size="40"/><br/>
<input type="button" onclick="encrypt()" value="Encrypt"/><br/>
Encrypted Text:<br/>
<form action="" method="post">
<input id="enc_text" name='enc_text' type="text" size="40"/><br/>
<?php
echo '<input id="key" name="key" type="hidden" size="40" value="'.urlencode($key['privatekey']).'"/><br/>';
?>
<input name="submit" type="submit" value="Submit" size="10"/>
</form>
<?php
if(isset($_POST['submit']) && ($_POST['enc_text'] != 0)) {
echo decrypt($_POST['enc_text'], urldecode($_POST['key']));
}
?> 
```

如果您需要更多示例，请访问官方网站获取文档： http: [//phpseclib.sourceforge.net/new/rsa/examples.html](http://phpseclib.sourceforge.net/new/rsa/examples.html)

或者

[http://bestmike007.com/2011/08/secure-data-transmission-between-pure-php-and-javascript-using-rsa/](http://bestmike007.com/2011/08/secure-data-transmission-between-pure-php-and-javascript-using-rsa/)

# c++ - 合并排序整数数组

> ID：13807857
> 
> 赞同：0
> 
> 时间：2012-12-10T19:34:28.433
> 
> 标签：c++

谁能帮我解决这个练习问题：33 31 11 47 2 20 24 12 2 43。我试图弄清楚在合并排序的第一遍之后两个输出列表的内容是什么。

答案应该是：列表 1：33 11 47 12 列表 2：31 2 20 24 2 43

对我来说没有任何意义感觉我的印象是第一遍是它在中间将它分成两个列表的地方......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:54:35.827

33 31 11 47 2 20 24 12 起初，列表分为单独的元素，这样当形成单个吨列表时，每个元素都会与它旁边的元素进行比较。所以在第一次通过之后我们有

31 33 11 47 2 20 12 24
之后

11 31 33 47 2 12 20 24
然后

2 11 12 20 24 3133 37

# python - 从 vb.net 执行 python 脚本

> ID：13807860
> 
> 赞同：3
> 
> 时间：2012-12-10T14:47:13.943
> 
> 标签：python, .net, scripting, user-interface

如何从 VB.NET 代码中执行 python 脚本？

我想使用 VB.NET 为我的 python 脚本构建一个 GUI。这是为了能够为脚本的用户创建一个 GUI。

我找到了这个例子：

```
Shell(c:\Program Files\python 266\python.exe path\myPythonScript.py +
       " " + arg1 + " " + argN) 
```

但我想知道是否有更合适的方式来执行 python 脚本？

我还想了解如何处理此类设置中的错误。

非常感谢您的帮助！

谢谢，

梅里卢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T15:19:45.610

这就是我在 C# .Net 中的做法：

```
 protected override void OnClick()
    {
        System.Diagnostics.Process.Start("C:\\path\\to\\pyscript\\MyScriptHere.py");
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T15:26:29.157

在 VB 中，您还可以使用以下命令：

```
 shell( "d:\path\to\your\script.py arg1 arg2" ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T15:38:35.307

您可以从 .NET 中调用 python，但如果您想要这样做的唯一原因是因为您想为您的 Python 设计一个 GUI，那么为什么不让事情变得“更干净”并在 Python 中完成呢？您可以使用[TKInter](http://wiki.python.org/moin/TkInter)或[wxPython](http://www.wxpython.org/)来命名两个 GUI API。后者还有wxDesign，可以减轻GUI设计的负担。

除了我列出的两个之外， [此列表为您提供了更多用于 Python 中的 GUI 设计的选项。](http://docs.python.org/2/faq/gui.html)

另一方面，您没有说您正在开发什么需要 python，但如果它是用于 ArcGIS 或 GDAL（可能是两个最常见的 GIS 脚本环境），那么它们都具有 .NET API 和 Python。因此，您可以在 .NET 中完成*所有操作。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T15:35:06.160

就我而言，我希望 Python 脚本创建一个 csv 文件，然后使用 VB 宏从该 csv 文件中收集信息。当我向宏添加延迟时，此代码有效：

```
Shell ("C:\Python27\ArcGIS10.1\python.exe myPath\PythonScript.py arg1 arg2")
FourSecDly 
```

延迟允许 shell 进程在运行宏之前完成。延迟的代码是：

```
Public Function FourSecDly()
y = Timer + 4#
Do While Timer < y
DoEvents
Loop
End Function 
```

# python - 像在spss中一样在sql中制作数据透视表

> ID：13807870
> 
> 赞同：3
> 
> 时间：2012-12-10T19:34:50.603
> 
> 标签：python, postgresql, pivot-table, spss, plpython

我在 PostgreSQL 中有很多数据。但我需要像 SPSS 一样做一些数据透视表。例如，我有城市和州的表格。

```
 create table cities
(
    city integer,
    state integer
);
insert into cities(city,state) values (1,1);
insert into cities(city,state) values (2,2);
insert into cities(city,state) values (3,1);
insert into cities(city,state) values (4,1); 
```

实际上，在这张表中，我有 4 个城市和 2 个州。我想用百分比做数据透视表

```
city\state |state-1| state-2|
city1      |33%    |0%      |
city2      |0%     |100%    |
city3      |33%    |0%      |
city4      |33%    |0%      |
totalCount |3      |1       | 
```

我了解如何在这种特殊情况下使用 sql 来做到这一点。但我想要的只是使用一些存储函数将一个变量与另一个变量交叉（只需计算不同的值并通过“count（*）其中variable_in_column_names = 1等等）来划分它。我现在在看plpython。我的一些问题是：

1.  如何在没有形状适合输出列的数量和类型的临时表的情况下输出记录集。
2.  也许有可行的解决方案？

如我所见，输入将是表名、第一个变量的列名、第二个变量的列名。在函数体中进行大量查询（count(*)，遍历变量中的每个不同值并对其进行计数等等），然后返回一个带有百分比的表。

1.  实际上我在一个查询中没有很多行（大约 10k），并且可能是在原始 python 中做这些事情的最好方法，而不是 plpython？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T21:52:29.660

您可能想尝试一下[pandas](http://pandas.pydata.org)，它是一个出色的 Python 数据分析库。

查询 PostgreSQL 数据库：

```
import psycopg2
import pandas as pd
from pandas.io.sql import frame_query

conn_string = "host='localhost' dbname='mydb' user='postgres' password='password'"
conn = psycopg2.connect(conn_string)
df = frame_query('select * from cities', con=conn) 
```

`df`像这样的[DataFrame](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe)在哪里：

```
 city    state
0    1   1
1    2   2
2    3   1
3    4   1 
```

`pivot_table`然后，您可以使用并除以总数来创建数据透视表以获得百分比：

```
totals = df.groupby('state').size()
pivot = pd.pivot_table(df, rows='city', cols='state', aggfunc=len, fill_value=0) / totals 
```

给你结果：

```
state   1   2
city        
1    0.333333   0
2    0          1
3    0.333333   0
4    0.333333   0 
```

最后要获得您想要的布局，您只需要重命名索引和列，并附加总计：

```
totals_frame = pd.DataFrame(totals).T
totals_frame.index = ['totalCount']

pivot.index = ['city%i' % item for item in pivot.index]
final_result = pivot.append(totals_frame)
final_result.columns  = ['state-%i' % item for item in final_result.columns] 
```

给你：

```
 state-1     state-2
city1       0.333333    0
city2       0.000000    1
city3       0.333333    0
city4       0.333333    0
totalCount  3.000000    1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T23:21:40.110

查看 PostgreSQL 窗口函数。可能会给你一个非（pl）python 解决方案。 [http://blog.hashrocket.com/posts/sql-window-functions](http://blog.hashrocket.com/posts/sql-window-functions)

# node.js - 简单的字段查询？

> ID：13807873
> 
> 赞同：0
> 
> 时间：2012-12-10T19:35:05.550
> 
> 标签：node.js, couchdb, couchdb-nano

我正在使用 nano 通过 node.js 连接到 couchDB；我已经阅读了 couch.db 的基本文档并且大部分都理解了它，但是我在任何地方都没有看到简单的查询功能。我想做的就是（从我的服务器）从特定文档中获取字段的值。我该怎么做？

此外，在寻找这个问题的答案时，我遇到了一个网站，它说 html 页面可以直接向数据库发送 GET 以获取值；我认为数据库是安全的，那么这怎么可能呢？我想我在这里错过了一些大事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T02:00:01.440

通过 id 获取特定文档的最简单方法是使用 get 方法。这将返回文档本身：

```
var Nano = require('nano'),
    db = new Nano('http://admin:password@localhost:5984').use(yourDatabase),

db.get(yourDocumentId, function (err, yourDocument, headers) {
  return console.log(err || yourDocument);
  }); 
```

关于直接从 CouchDB 请求数据的网页的第二个问题：只要您在 CouchDB 中专门为最终用户登录，就可以安全地完成此操作。您的最终用户将登录到 CouchDB 并且 CouchDB 将返回一个 cookie，您的浏览器将在每个后续请求中将其发送给 CouchDB 作为一种身份验证方式。有关详细信息，请参阅[http://guide.couchdb.org/editions/1/en/security.html#cookies](http://guide.couchdb.org/editions/1/en/security.html#cookies)。

就我个人而言，我不会使用这种方法，因为它很容易将您的 UI 与您的数据耦合起来，从而使未来的更改变得更加困难。我建议在 express 中创建一个 REST api 并从您的 UI 中调用它。它将使您的 UI 代码更加专注于 UI 逻辑，而您的 api 实现则专注于处理 CouchDB 文档和视图操作。

# linq - 简单的 Linq to SQLIte 应用程序在 SubmitChanges() 上挂起

> ID：13807878
> 
> 赞同：1
> 
> 时间：2012-12-10T19:35:18.980
> 
> 标签：linq, sqlite, submitchanges, dblinq

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.SQLite;
using System.Data.Linq.Mapping;
using DbLinq.Data.Linq;

namespace LinqToSQLite
{
    class Program
    {
        static void Main(string[] args)
        {
            string connectionString = "DbLinqProvider=Sqlite;Data Source=db2.sqlite";

            DataContext db = new DataContext(connectionString);

            db.ExecuteCommand(Person.CreateCommand);
            Table<Person> table = db.GetTable<Person>();

            table.InsertOnSubmit(new Person { Name = "Alfred" });
            table.InsertOnSubmit(new Person { Name = "Brian" });
            table.InsertOnSubmit(new Person { Name = "Charles" });

            db.SubmitChanges();

            var query = from p in table select p;
            foreach (var p in query)
            {
                Console.WriteLine(p.ID + ". " + p.Name);
            }

            Console.WriteLine("Done");
            Console.ReadLine();
        }
    }

    [Table(Name = "Persons")]
    class Person
    {
        [Column(IsPrimaryKey = true, IsDbGenerated = true)]
        public int ID { get; set; }

        [Column]
        public string Name { get; set; }

        public static string CreateCommand = "CREATE TABLE IF NOT EXISTS Persons ( Id INTEGER PRIMARY KEY, Name TEXT )";
    }
} 
```

我创建了简单的应用程序，使用 dblinq 向 SQLite 提供 Linq，但它挂起`db.SubmitChanges()`。什么原因？我只是想在不使用 DbMetal.exe 的情况下创建简单的 dblinq 应用程序......没有错误，没有例外我一无所知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T07:07:19.283

问题出在 DataContext 和 connectonString 上，要修复它我必须更改...

```
string connectionString = "DbLinqProvider=Sqlite;Data Source=db2.sqlite;";
SQLiteConnection connection = new SQLiteConnection(connectionString);

DataContext db = new DataContext(connection); 
```

...或将**DbLinqConnectionType**添加到 connectionString ...

```
string connectionString = "DbLinqProvider=Sqlite;Data Source=db2.sqlite;";
connectionString += "DbLinqConnectionType=System.Data.SQLite.SQLiteConnection, System.Data.SQLite, Version=1.0.66.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139";

DataContext db = new DataContext(connectionString); 
```

# android - zip文件在android中下载

> ID：13807879
> 
> 赞同：4
> 
> 时间：2012-12-10T19:35:22.350
> 
> 标签：android, download

我有一个应用程序可以从下拉框（这是公共共享路径）下载 zip 文件内容。我使用 HttpURLConnection 编写了下载代码，但它没有按预期工作，而是下载了一小部分（下载 zip 文件后显示 31 kb 但其原始大小为 3mb）。我正在附加我的代码。请帮我解决这个问题。

```
 URL url = new URL("drop box public share url");
        //create the new connection
        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
        urlConnection.setAllowUserInteraction(false);
        urlConnection.setInstanceFollowRedirects(true);
        urlConnection.setConnectTimeout(5 * 1000);
        urlConnection.setRequestMethod("GET");
        urlConnection.setDoOutput(true);
        urlConnection.setDoInput(true);

        urlConnection.connect();
        File SDCardRoot = Environment.getExternalStorageDirectory();
        File file = new File(SDCardRoot,"/download/sample.zip");
        FileOutputStream fileOutput = new FileOutputStream(file);
        InputStream inputStream = urlConnection.getInputStream();
        int totalSize = urlConnection.getContentLength();
        int downloadedSize = 0;
        //create a buffer...
        byte[] buffer = new byte[1024];
        int bufferLength = 0; 
        while ( (bufferLength = inputStream.read(buffer)) > 0 ) {
                fileOutput.write(buffer, 0, bufferLength);
                                    downloadedSize += bufferLength;
                onProgressUpdate(downloadedSize, totalSize);

        }
        //close the output stream when done
        fileOutput.close();
        inputStream.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:21:06.130

似乎方法调用：

```
setDoOuput(true); 
```

使请求成为 POST（请参阅 [URLConnection.setDoOutput() 到底有什么影响？](https://stackoverflow.com/questions/8587913/what-exactly-does-urlconnection-setdooutput-affect)）

删除它似乎可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:44:51.743

尝试使用纯 URLConnection 而不是 HttpURLConnection。并查看输出。

# php - ZF2 - ServiceManager 和“感知”接口

> ID：13807884
> 
> 赞同：2
> 
> 时间：2012-12-10T19:35:31.553
> 
> 标签：php, zend-framework2

第一个 ZF2 应用程序，到达那里，但我认为在依赖注入和 ServiceManager 方面仍然缺少一两个想法。

目前我在编写一个新的数据库网关类时遇到了一个特殊问题。我不会注入数据库适配器，所以我实现了 AdapterAwareInterface。但是 setDbAdapter 方法从未在我的课堂上被调用过。我想知道是否有人会好心地查看我的代码并提出可能出了什么问题（或者我错过了什么！）。

所以，这是我实现 AdapterAwareInterface 的类。

```
<?php
namespace Foo\Database;
use Zend\Db\Adapter\Adapter;
use Zend\Db\Adapter\AdapterAwareInterface;
use Zend\Log\LoggerAwareInterface;
use Zend\Log\LoggerInterface;

class Gateway implements AdapterAwareInterface, LoggerAwareInterface
{
protected $logger = NULL;
protected $db = NULL;

public function setDbAdapter(Adapter $adapter)
{
    $this->db = $adapter;
} 

public function setLogger(LoggerInterface $logger)
{
    $this->logger = $logger;
} 
```

这是我的模块文件的摘录，显示了我如何配置我的服务管理器：

```
 public function getServiceConfig()
{
    return array(
        'factories' => array(
          ....
        ),
        'invokables' => array(
            'FooDatabaseGateway' => 'Foo\Database\Gateway',
        ),
        'abstract_factories' => array(
            'AbstractFeedParserFactory' => 'Bookmakers\Odds\Feeds\AbstractFeedParserFactory',
        ),
    );
} 
```

这就是我测试的方式：

```
gateway = $this->getServiceLocator()->get('FooDatabaseGateway'); 
```

这是我的全局配置的一部分：

```
return array(
  'db' => array(
    'driver'         => 'Pdo',
    'dsn'            => 'mysql:dbname=kickoff_manager;host=localhost',
    'username'       => '****',
    'password'       => '****',
    'driver_options' => array(
    PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''
  ),
  ),
  'service_manager' => array(
  'factories' => array(
      'Zend\Db\Adapter\Adapter'
              => 'Zend\Db\Adapter\AdapterServiceFactory',
  ),
),
); 
```

非常感谢您提供的任何帮助。

:wq

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T10:20:52.470

好吧，今天早上对这个问题有一双新的眼睛。我认为这是写答案..至少可以说它对我有用。如果有人想提出一种完全不同的更好的方法，那么请这样做:-)。

所以缺少的一点是`initializer`在我的服务管理器配置中使用一个在`setDbAdapter`任何实现`AdapterAwareInterface`. `getServiceConfig`因此，在我从文件中返回的数组中`Module.php`，我添加了以下条目：

```
public function getServiceConfig() {
  return array(
    'initializers' => array(
      'db' => function($service, $sm)
      {
        if ($service instanceof AdapterAwareInterface)
        {
          $service->setDbAdapter($sm->get('Zend\Db\Adapter\Adapter'));
        }
      }.... 
```

我认为我在学习 ZF2 时缺少的是有很多构建块可供使用，但你必须自己将它们组合在一起。

事情看起来不错，我很喜欢这个框架，但是还有很多东西要学，而且我仍然不相信使用服务器管理器注入而不是旧的构造函数注入！

:wq

# eclipse - 在 Tortoise SVN 或/和 Eclipse 中选择 FS 格式

> ID：13807886
> 
> 赞同：0
> 
> 时间：2012-12-10T19:35:38.340
> 
> 标签：eclipse, tortoisesvn

我使用 Tortoise SVN 对代码进行版本控制。我安装了最新版本（1.7.10）。我使用这个工具创建了本地存储库。

最近我安装了最后一个版本的 EasyEclipse for PHP (1.2.2.2)，当我尝试连接到存储库时，我收到了这个错误：

> 不支持的 FS
> 
> 格式 svn：预期的 FS 格式“2”；找到格式“4”

如何在 Tortoise 或 Eclipse 中指定正确的 FS 格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:34:33.503

When sharing a working copy between multiple Subversion clients, all must be at the same major.minor version number. EasyEclipse is looking for a working copy that has been created with a Subversion client earlier than 1.7, because it apparently bundles an older version of the libraries.

I know nothing about EasyEclipse but looking at their ["news" page](http://www.easyeclipse.org/site/news/index.html), it appears to be abandoned. You'll either need to roll back TortoiseSVN to a release of similar vintage (and dump/reload your repository, since it sounds like you're not using a Subversion server), or upgrade your PHP IDE to something that's actively being maintained and up to speed with current releases.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:05:25.963

真的你不能。

而且我建议根本不要使用 EasyEclipse，因为它期望 repo 的古老格式（2 是“pre-1.5”），而更新的版本（repo-formats）在不同领域有重大改进

# performance - “命中”如何影响 Lucene 搜索性能？

> ID：13807890
> 
> 赞同：0
> 
> 时间：2012-12-10T19:35:45.360
> 
> 标签：performance, lucene

Lucene 的搜索 API 接收“hitsPerPage”参数。看起来它对搜索性能有重大影响。例如，我尝试将其从 100 减少到 10，并且发现搜索时间减少了两倍。

可以吗？为什么会影响搜索性能？是否说明有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:37:19.767

`hitsPerPage`可以这么说，指定页面的大小。将其视为 Google 搜索结果：您可以指定在每个页面上获得的结果数量（“命中”）。

如果您只想要`hitsPerPage`点击，那很好，但如果您想要更多，您将不得不检索更多页面。

> 为什么它会影响搜索性能？

因为当您想要更小的页面时，Lucene 可以减少工作量（通过返回更少的匹配器文档）。更多点击意味着检索更多文档，这反过来意味着在更多文件中寻找更多位置。

# sql-server - 事实表分区：如何处理 ETL 中的更新？

> ID：13807892
> 
> 赞同：6
> 
> 时间：2012-12-10T19:35:51.773
> 
> 标签：sql-server, sql-server-2008, ssis, etl, partitioning

我们正在尝试为包含大约 400M 行的 Data Warehouse Fact 表实现表分区。我们的 ETL 从上一次加载开始向后 50 天从源系统获取数据（新行、修改行、基于源系统时间戳）。因此，在每个 ETL 周期中，都会有新行进入，还有旧行正在更新 Fact 表中的相应行。这个想法是将新行插入 Fact 表并更新修改的行。

分区列将是日期（int，YYYYMMDD），我们正在考虑按月分区。

就我而言，表分区将通过[快速分区切换操作简化我们的插入操作](http://technet.microsoft.com/en-us/library/ms191160.aspx)。我们可以拆分最近的分区以创建一个新的空闲分区，将新行加载到临时表中（使用日期约束，例如最近一个月），然后使用分区切换操作将新行“移动”到分区的事实表中. 但是我们如何处理修改后的行，这些行应该更新 Fact 表中的相应行？这些行可以包含上个月的数据。分区开关在这里有帮助吗？通常`INSERT`，`UPDATE`行由 ETL 工具（例如我们的案例中的 SSIS）或`MERGE`语句确定。在这种情况下，分区是如何工作的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T22:55:42.870

我会再看一下设计，并尝试弄清楚是否有办法绕过更新。以下是更新事实表的一些含义：

性能：更新是完全记录的事务。大事实表也有大量数据要读取和写入。

多维数据集：更新事实表需要重新处理受影响的分区。随着您的事实表继续增长，多维数据集处理时间也将继续增长。

预算：快速存储很昂贵。更新大型事实表将需要大量快速读写。

纯粹主义理论：您不应该更改事实表，除非初始值是错误的（即用户输入了 15,000 美元而不是 1,500 美元）。任何非错误情况都将更改最初记录的事务。

有什么变化？变化的部分真的是维度的属性吗？如果是这样，它们是否可以移动到一个维度并使用渐变维度类型任务处理更改？

另一种可能性，这可以通过抵消交易来实现吗？例子：

*初始发票金额为 10.00 美元。会计后来增加了 1.25 美元的税款，然后向客户收取了 11.25 美元的费用。不要将值更新为 $11.25，而是插入 $1.25 的记录。发票的总金额仍为 11.25 美元，您可以执行最少记录的插入而不是完全记录的更新来完成。*

更新事实表不仅在理论上是一个坏主意，而且随着事实表的增长，它变得非常昂贵且不可扩展。您将读取和写入更多数据，需要来自存储子系统的更多 IOPS。当您准备好进行分析时，多维数据集处理将引发更多问题。

您还必须不断向管理层证明为什么您需要为数据仓库提供如此多的 IOPS。对于不断变化的“事实”表，需要所有这些 IOPS 是否有商业价值/理由？

如果您找不到绕过事实表更新的方法，至少要建立一个截止点，将数据确定为只读。否则，您将永远无法扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T20:45:29.070

切换在这里没有帮助。

也许您可以在不同范围的行上使用多个线程同时执行更新。那可能会加快速度。注意不要触发锁升级，以便获得良好的并发性。

还要确保主要以聚集索引的升序更新行。这有助于磁盘 IO（这种技术可能不适用于多线程）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-01T18:39:27.150

更新事实记录的原因与事实中的非识别属性一样多。除非您计划“先删除”然后“插入”，否则您根本无法避免更新。您不能简单地说“将度量增量记录为新事实”。

# c++ - 探查器上没有符号信息

> ID：13807893
> 
> 赞同：0
> 
> 时间：2012-12-10T19:36:03.427
> 
> 标签：c++, visual-c++, g++, code-analyst

当我使用带有 -g 的 g++ 时，AMD CodeAnalyst 不显示符号信息，并且非常困倦的崩溃。但是，如果我在没有调试信息的情况下编译它，Very Sleepy 会运行，但当然没有符号。

我尝试使用 MSVC，它工作得很好，所有符号都在那里。但是我不想使用它。我想知道为什么 g++ 有这样的问题。

我使用 g++ 版本 4.7.2、VC10 MSVC 编译器、CodeAnalyst 3.4.1037.838、Very Sleepy 0.82。几乎所有东西都是最新的。

谢谢！

*编辑：*我创建了一个 hello world 项目

```
void hede()
{
    while(1);
}

int main() {
    cout << "!!!Hello World!!!" << endl; // prints !!!Hello World!!!
    hede();
    return 0;
} 
```

非常昏昏欲睡的崩溃和 CodeAnalyst 仍然没有符号。我怀疑这里有错误？ ![在此处输入图像描述](../Images/cb760cce4d0972ab538f5721d5250eb5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:16:33.590

您是否生成 .pdb 文件？见[http://www.bytetalk.net/2010/07/how-to-generate-seperate-g-symbol-file.html](http://www.bytetalk.net/2010/07/how-to-generate-seperate-g-symbol-file.html)

# javascript - 面向对象。表示如何与对象交互。Javascript 在这种情况下

> ID：13807895
> 
> 赞同：1
> 
> 时间：2012-12-10T19:36:20.543
> 
> 标签：javascript, oop

我正在创建一个井字游戏来玩 Javascript 中的 OO 代码，或者我应该说，伪面向对象。而且我很难理解对象的表示方式，在这种情况下，每个网格单元都是一个对象。您如何从单击单元格到告诉单元格对象在此处放置标记？

这是我的html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" dir="ltr">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
        <script type="text/javascript" src="scripts/tic-tac-toe.js"></script>
        <link rel="stylesheet" type="text/css" href="css/style.css" />
    </head>
    <body>
        <div id="grid"></div>
        </body>
</html> 
```

这是未完成的 javascript 页面：

```
var Grid = function() {
var cells = [];
// Todo: Finish 
const WINNING_COMBINATIONS = new Array();

this.setup = function() {
    for (var i = 0; i < 3; i++) {
        cells.push(new Array());
        for (var j = 0; j < 3; j++) {
            var new_cell = new Cell();
            cells[i].push(new_cell);
        }
    }

    var grid_div = document.getElementById("grid");
    var output = '';
    for (var i = 0; i < cells.length; i++) {
        for (var j = 0; j < cells.length; j++) {
            output += cells[i].placeCell();
        }
        output += "<br />"; 
    }
    grid_div.innerHTML = output;
}
} 
```

还有一个单元类，它有一个标记属性、一个输出属性（用于显示的内容）和一个 setMark 方法。因此，如果我单击由输出属性创建的单元格，我将如何引用被单击的单元格？

提前致谢。

# php - 上传 CodeIgniter 网站 bt cpanel

> ID：13807896
> 
> 赞同：0
> 
> 时间：2012-12-10T19:36:33.037
> 
> 标签：php, codeigniter, phpmyadmin, cpanel

我首先上传网站。

我使用过 php、phpmyadmin 和 CodeIgniter 框架工作

我已经上传了我的所有文件。它在我的机器上运行良好，但在这里它给出了错误

```
A Database Error Occurred

Unable to connect to your database server using the provided settings.

Filename: core/Loader.php

Line Number: 346 
```

我的数据库.php

```
$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'lakshr5e@localhost';
$db['default']['password'] = '';
$db['default']['database'] = 'lakshr5e_groupon';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

谁能帮我？？如果有人有任何教程的链接，请给我。提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:48:06.830

这正是它在锡上所说的 - 你的数据库设置是错误的，你正在寻找问题所在的正确位置。

很明显你没有设置数据库密码，但我假设你把它拿出来问这个问题。我的建议是联系您的托管服务提供商以确切了解您的数据库设置应该是什么。

检查您的错误日志以确认问题也可能值得。

可能只是您的用户名末尾不需要@localhost。

您不需要教程，您只需要输入正确的数据库设置，我敢打赌，问题出在其中之一：

```
$db['default']['username'] = 'lakshr5e@localhost';
$db['default']['password'] = '';
$db['default']['database'] = 'lakshr5e_groupon'; 
```

不在您不了解的设置之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T04:08:26.493

如果 cpanel 用户名**lakshr5e**那么您的数据库用户名**lakshr5e_(dbuser)**。您必须从 cpanel > mysql 数据库中添加具有数据库的用户，以授予不同类型的语句权限，例如 SELECT、UPDATE、INSERT 等。配置文件如下所示：

```
$db['default']['username'] = 'lakshr5e_dbuser';
$db['default']['password'] = 'yourdbpassword';
$db['default']['database'] = 'lakshr5e_groupon'; 
```

我希望这会对你有所帮助。

# php - Doctrine - PostgreSQL - 表/字段名中的大写和空格

> ID：13807902
> 
> 赞同：0
> 
> 时间：2012-12-10T19:37:03.003
> 
> 标签：php, sql, postgresql, pdo, doctrine-orm

Doctrine 2.3 和 PostgreSQL 的空格和大写字段/表名称存在问题

示例：（是的，我们正在努力摆脱这种情况）

```
SELECT "Field Name"
FROM "Table Name" 
```

我们也有两种格式的混合

```
SELECT "Field Name", another_field_name
FROM "Table Name", another_table_name 
```

使用学说时，我得到了 PDOException。查看错误时，我发现字段/表（名称）周围没有双引号，具有大写字母和空格。

有解决办法吗？解决方法？

这是 Doctrine 生成的示例

```
SELECT t0.TheId AS theid1, t0.Name AS name2, t0.User AS user3
FROM The Table t0 
WHERE t0.TheId = 1234 
```

这就是我需要的方式

```
SELECT t0."TheId" AS theid1, t0."Name" AS name2, t0."User" AS user3
FROM "The Table" t0 
WHERE t0."TheId" = 1234 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T19:42:36.640

您可能需要使用反引号让 Doctrine 知道它应该被引用：[引用保留字](http://docs.doctrine-project.org/en/latest/reference/basic-mapping.html#quoting-reserved-words)。例如：

```
<?php
/** @Column(name="`number`", type="integer") */
private $number; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-20T22:38:45.563

不幸的是，接受的答案在目前的情况下不起作用。反引号将不起作用，因为原则查询中的每一列都通过使用带有附加标识符的小写名称来获取别名。这个别名中会有空格，因此在传递给 postgres 时会产生 sql 错误。

唯一可以纠正的方法是在生成查询时在 Doctrine 本身中。

更新似乎这可能已在最新版本的学说2中得到纠正。它现在替换不可接受的字符。

# node.js - Socket.emit 不工作 Nodejs Socket.IO

> ID：13807904
> 
> 赞同：1
> 
> 时间：2012-12-10T19:37:11.147
> 
> 标签：node.js, socket.io

我只是想在单击按钮上从客户端向服务器发送一条简单的消息。

**编辑：** 当我的 index.jade 加载时，我使用以下代码并创建 socket.io 对象，然后将其转发给我`Menu_Contoller`，然后将套接字对象分配给`Menu_Model`.然后每当调用函数时`SendOptionSelectedToServer` ，`Menu_Model.js`我都会使用套接字对象的`Menu_Model`。这个函数中的值是正确的。只是不知道为什么它不是`emitting`。

**索引.jade**

```
script(src = '/socket.io/socket.io.js')
script(src = '/javascripts/Menu_Controller.js')
script(src = '/javascripts/Menu_Model.js')

script

var socket = io.connect('http://localhost:3000');
socket.emit('GameType','chutia');

var Menu_Control = Object.create(Menu_Controller);

Menu_Control.Init(socket); 
```

**Menu_Controller.js**

```
 var Menu_Controller = {

    Model : null,

    Init:function(socket)
    {
        this.Model = Object.create(Menu_Model);
        this.Model.Init(socket,this);
    },
    SendOptionSelectedToServer:function(option)    <-- called from a view menu which we don't have to care about because value in 'option' are correct.
    {
        this.Model.SendOptionSelectedToServer(option);
    }

}; 
```

**Menu_Model.js**

```
 var Menu_Model = {
    Socket     : null,
    Controller : null,

    Init:function(sock,controllerRef)
    {
        this.Socket = sock;
        this.Controller = controllerRef;
    },
    SendOptionSelectedToServer:function(option)
    {
        this.Socket.emit(option.type,option.ghostName);       <-- this line.
    }
}; 
```

这是我在**app.js**中的完整服务器端代码。

```
var express = require('express')
  , http    = require('http')
  , routes  = require('./routes')
  , io      = require('socket.io')
  , factory = require('./serverfactory.js');
var  app  = express();

var server = app.listen(3000);
io = io.listen(server);

io.sockets.on('connection',function(socket){

console.log('new user');                        <-- this is printed in the log.

socket.on('GameType',function(msg){
    console.log(msg);                           <-- but this is not.
});
});

//var app = module.exports = express.createServer();

// Configuration

app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
});

app.configure('development', function(){
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('production', function(){
  app.use(express.errorHandler());
});

// Routes
app.get('/', routes.index); 
```

当发生新连接时，它会写入`new user`日志。但是当从客户端使用调用时，`emit`它不会在控制台中写入任何消息。我已经检查了客户端的参数并且它们是正确的。`option.type`客户端将包含`GameType`.

为什么它不在客户端调用事件？

# mysql - MySQL语句在所有表中搜索一个特定列？

> ID：13807905
> 
> 赞同：1
> 
> 时间：2012-12-10T19:37:13.690
> 
> 标签：mysql, information-schema

我在 Linux 机器上使用 MySQL 中的命令行。

我以 root 身份登录。

我需要在某处的表中找到一个字段（在此架构中有 400 多个表）

字段称为“折扣”或“折扣”

我只需要找到该特定字段在哪个表中，如果它在多个表中，是否有该字段。

谢谢你们的帮助。

编辑所以数据库被称为 magento 并且表格在那里。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T19:40:03.110

尝试这个：

```
SELECT * FROM INFORMATION_SCHEMA.COLUMNS 
WHERE LOWER(COLUMN_NAME) = 'discount' or LOWER(COLUMN_NAME) = 'discounts'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:39:40.473

尝试这个：

```
SELECT * FROM information_schema.columns WHERE column_name = 'discounts' 
```

# debugging - Visual Studio 2012 无法调试非 x64 .net 应用程序：访问冲突

> ID：13807913
> 
> 赞同：5
> 
> 时间：2012-12-10T19:37:34.210
> 
> 标签：debugging, visual-studio-2012, access-violation, visual-studio-debugging

我从 Win7+VS2012 升级（全新安装）到 Win8+VS2012。

在那之后我遇到了一个问题：当我尝试使用处理器目标*AnyCPU*或*x86*运行任何项目时，vshost.exe 在构建并启动带有*Access Violation*的项目后立即崩溃。此行为不受更改项目类型（控制台、winforms、wpf）的影响。

但是，当我将架构更改为*x64*时，调试工作得很好。

如果我启动一个新创建的控制台应用程序，这是我在调试输出窗口中得到的输出：

```
'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll', Symbols loaded.
'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.HostingProcess.Utilities\11.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.HostingProcess.Utilities.dll', Symbols loaded.
'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Windows.Forms\v4.0_4.0.0.0__b77a5c561934e089\System.Windows.Forms.dll', Symbols loaded.
'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Drawing\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Drawing.dll', Symbols loaded.
'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System\v4.0_4.0.0.0__b77a5c561934e089\System.dll', Symbols loaded.
'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.HostingProcess.Utilities.Sync\11.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.HostingProcess.Utilities.Sync.dll', Symbols loaded.
'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.Debugger.Runtime\11.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.Debugger.Runtime.dll'
'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'e:\Users\SeriTools\Documents\Visual Studio 2012\Projects\ConsoleApplication2\ConsoleApplication2\bin\Debug\ConsoleApplication2.vshost.exe', Symbols loaded.
'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Core\v4.0_4.0.0.0__b77a5c561934e089\System.Core.dll', Symbols loaded.
'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Xml.Linq\v4.0_4.0.0.0__b77a5c561934e089\System.Xml.Linq.dll', Symbols loaded.
'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Data.DataSetExtensions\v4.0_4.0.0.0__b77a5c561934e089\System.Data.DataSetExtensions.dll', Symbols loaded.
'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\Microsoft.CSharp\v4.0_4.0.0.0__b03f5f7f11d50a3a\Microsoft.CSharp.dll', Symbols loaded.
'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_32\System.Data\v4.0_4.0.0.0__b77a5c561934e089\System.Data.dll', Symbols loaded.
'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Xml\v4.0_4.0.0.0__b77a5c561934e089\System.Xml.dll', Symbols loaded.
The thread 'vshost.NotifyLoad' (0x1068) has exited with code 0 (0x0).
The thread '<No Name>' (0x16c8) has exited with code 0 (0x0).
The thread '<No Name>' (0x1688) has exited with code 0 (0x0).
The thread 'vshost.LoadReference' (0x233c) has exited with code 0 (0x0).
'ConsoleApplication2.vshost.exe' (Managed (v4.0.30319)): Loaded 'e:\users\seritools\documents\visual studio 2012\Projects\ConsoleApplication2\ConsoleApplication2\bin\Debug\ConsoleApplication2.exe', Symbols loaded.
The program '[5088] ConsoleApplication2.vshost.exe: Program Trace' has exited with code 0 (0x0).
The program '[5088] ConsoleApplication2.vshost.exe: Managed (v4.0.30319)' has exited with code -1073741819 (0xc0000005) 'Access violation'. 
```

我试图解决的问题：

*   完全删除并重新安装 VS，检查是否不应用更新 1 更改任何内容
*   `devenv.exe /ResetSettings`并卸载所有插件/加载项
*   以管理员身份运行 VS

有人可以帮我解决这个问题吗？

# clang - 如何查找是否在 clang 中使用了 llvm-* 命令

> ID：13807916
> 
> 赞同：0
> 
> 时间：2012-12-10T19:37:47.077
> 
> 标签：clang

我的 Debian 系统上同时安装了 clang 和 gcc。我想尝试clang并给出以下命令。从输出来看，clang 似乎使用了更多的 gcc，而不仅仅是前端。在编译这个简单的程序时，如何确认 clang 确实使用了 llvm-as、llvm-ld 和其他 llvm 命令？我已经安装了大部分 llvm-* 命令。感谢您提供任何信息。

```
clang -v c.c
Debian clang version 3.0-6 (tags/RELEASE_30/final) (based on LLVM 3.0)
Target: x86_64-pc-linux-gnu
Thread model: posix
"/usr/bin/clang" -cc1 -triple x86_64-pc-linux-gnu -emit-obj -mrelax-all -disable-free
-disable-llvm-verifier -main-file-name c.c -mrelocation-model static -mdisable-fp-elim 
-masm-verbose -mconstructor-aliases -munwind-tables -target-cpu x86-64 -target-linker-
version 2.22 -momit-leaf-frame-pointer -v -resource-dir /usr/bin/../lib/clang/3.0 
-fmodule-cache-path /var/tmp/clang-module-cache -internal-isystem /usr/local/include 
-internal-isystem /usr/bin/../lib/clang/3.0/include -internal-externc-isystem 
/usr/include/x86_64-linux-gnu -internal-externc-isystem /usr/include -ferror-limit 19 
-fmessage-length 198 -fgnu-runtime -fobjc-runtime-has-arc -fobjc-runtime-has-weak 
-fobjc-fragile-abi -fdiagnostics-show-option -fcolor-diagnostics -o /tmp/c-MLrq5I.o -x 
c c.c
clang -cc1 version 3.0 based upon llvm 3.0 hosted on x86_64-pc-linux-gnu
ignoring nonexistent directory "/usr/bin/../lib/clang/3.0/include"
ignoring nonexistent directory "/usr/bin/../lib/clang/3.0/include"
ignoring duplicate directory "/usr/local/include"
ignoring duplicate directory "/usr/include/x86_64-linux-gnu"
ignoring duplicate directory "/usr/include/x86_64-linux-gnu"
ignoring duplicate directory "/usr/include/x86_64-linux-gnu"
ignoring duplicate directory "/usr/include"
#include "..." search starts here:
#include <...> search starts here:
/usr/local/include
/usr/include/x86_64-linux-gnu
/usr/include
/usr/include/clang/3.0/include/
/usr/lib/gcc/x86_64-linux-gnu/4.6/include/
/usr/lib/gcc/x86_64-linux-gnu/4.6/include-fixed/
End of search list.
"/usr/bin/ld" --eh-frame-hdr -m elf_x86_64 -dynamic-linker /lib64/ld-linux-x86-64.so.2 
-o a.out /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crt1.o /usr/lib
/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crti.o /usr/lib/gcc/x86_64-linux-
gnu/4.6/crtbegin.o -L/usr/lib/gcc/x86_64-linux-gnu/4.6 -L/usr/lib/gcc/x86_64-linux-
gnu/4.6/../../../x86_64-linux-gnu -L/lib/x86_64-linux-gnu -L/lib/../lib64 -L/usr
/lib/x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu 
-L/usr/lib/gcc/x86_64-linux-gnu/4.6/../../.. -L/lib/x86_64-linux-gnu -L/lib -L/usr
/lib/x86_64-linux-gnu -L/usr/lib /tmp/c-MLrq5I.o -lgcc --as-needed -lgcc_s --no-as-
needed -lc -lgcc --as-needed -lgcc_s --no-as-needed /usr/lib/gcc/x86_64-linux-gnu/4.6
/crtend.o /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/crtn.o 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:08:03.363

您可以传递`-###`给 clang 以查看它调用的所有程序。在大多数系统上，clang 直接链接到汇编程序库并在 cc1 进程中在进程内调用它，而不是向外部`as`程序发送。

# c - inet_pton() counterpart for link layer address

> ID：13807918
> 
> 赞同：1
> 
> 时间：2012-12-10T19:37:54.037
> 
> 标签：c, linux, sockets, networking, mac-address

I have two problems related to my implementation -

1.  I need a function which can convert a given link-layer address from text to standard format like we have a similar function at n/w layer for IP addresses `inet_pton()` which converts a given IP address from text to standard IPv4/IPv6 format.

2.  Is there any difference b/w Link-layer address and 48-bit mac address (in case of IPv6 specifically)?

    If no, then link layer address should always also be of 48 bit in length, if I am not wrong.

Thanks in advance. Please excuse if I am missing something trivial.

**EDIT :**

Ok.. I am clear on the difference b/w link layer address and ethernet mac address. There are several types of data link layer addresses, ethernet mac address is just one.

Now, this arises one more problem ... As i said in my first question I need to convert a link layer address given from command line to its standard form. The solution provided here will just work for ethernet mac address only.

Isn't there any standard function for the purpose ? What I would like to do is to create an application where user will enter values for different options present in ICMP router advertisement message as stated in `RFC 4861`.

```
Option Formats

Neighbor Discovery messages include zero or more options, some of
which may appear multiple times in the same message.  Options should
be padded when necessary to ensure that they end on their natural
64-bit boundaries.  All options are of the form:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     Type      |    Length     |              ...              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   ~                              ...                              ~
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

Fields:

  Type           8-bit identifier of the type of option.  The
                 options defined in this document are:

                       Option Name                             Type

                    Source Link-Layer Address                    1
                    Target Link-Layer Address                    2
                    Prefix Information                           3
                    Redirected Header                            4
                    MTU                                          5

  Length         8-bit unsigned integer.  The length of the option
                 (including the type and length fields) in units of
                 8 octets.  The value 0 is invalid.  Nodes MUST
                 silently discard an ND packet that contains an
                 option with length zero.

  4.6.1\. Source/Target Link-layer Address

  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |     Type      |    Length     |    Link-Layer Address ...
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Fields:

   Type
                 1 for Source Link-layer Address
                 2 for Target Link-layer Address

   Length         The length of the option (including the type and
                 length fields) in units of 8 octets.  For example,
                 the length for IEEE 802 addresses is 1
                 [IPv6-ETHER].

   Link-Layer Address
                 The variable length link-layer address.

                 The content and format of this field (including
                 byte and bit ordering) is expected to be specified
                 in specific documents that describe how IPv6
                 operates over different link layers.  For instance,
                 [IPv6-ETHER]. 
```

One more thing I am not quite handy with C++, can you please provide a C alternative ? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:08:50.303

Your first question, it's not that hard to write, and since MAC addresses are represented by a 6 byte array you don't need to take machine-dependency into account ( like endian-ness and stuff )

```
void str2MAC(string str,char* mac) {
    for(int i=0;i<5;i++) {
        string b = str.substr(0,str.find(':'));
        str = str.substr(str.find(':')+1);
        mac[i] = 0;
        for(int j=0;j<b.size();b++) {
            mac[i] *= 0x10;
            mac[i] += (b[j]>'9'?b[j]-'a'+10:b[j]-'0');
        }
    }
    mac[5] = 0;
    for(int i=0;i<str.size();i++) {
        mac[5] *= 0x10;
        mac[5] += (str[i]>'9'?str[i]-'a'+10:str[i]-'0');
    }
} 
```

About your second question, IP ( and IPv6 specifically) is a Network Layer protocol and is above the Link Layer, thus doesn't have to do anything with the Link Layer. If by Link Layer you mean Ethernet, yes Ethernet Address is always 48bits, but there are other Link Layer protocols presents which may use other formats.

# javascript - 将定时 jquery 函数放在动态创建的 div 上

> ID：13807919
> 
> 赞同：1
> 
> 时间：2012-12-10T19:37:56.163
> 
> 标签：javascript, jquery, javascript-events

`mouseEnters`当用户使用`<h1>`标签时，我创建了一个简单的小 div 。我用`prepend()`. 一旦动态创建了这个 div，有什么办法可以延迟淡出？让我们说 div 创建后 4 秒？一如既往地感谢任何帮助。谢谢大家，我检查了[这个以前的帖子](https://stackoverflow.com/questions/7827033/how-to-pass-a-javascript-function-in-a-dynamically-created-div)，但它没有帮助。

这就是我正在使用的。

```
 $('.sitename').mouseenter(function(){
    $(this).parent().prepend('<div class="mobile_pop">Available on All Mobile Devices</div>');
});//end mouseEnter 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:39:42.830

你可以这样做 ：

```
$('.sitename').mouseenter(function(){
    var $div = $('<div class="mobile_pop" style="display:none;">Available on All Mobile Devices</div>');
    $(this).parent().prepend($div);
    setTimeout(function(){$div.fadeIn()}, 4000);
}); 
```

`setTimeout`它只是在您创建的 div 中使用淡入淡出的函数注册。

[演示（将 div 简单地添加到 body 中）](http://jsfiddle.net/8qfrR/)

# android - 如何在 web 视图中重定向到应用程序内的 facebook 页面？

> ID：13807920
> 
> 赞同：0
> 
> 时间：2012-12-10T19:37:56.390
> 
> 标签：android, facebook

如何将用户导航到 Android 应用程序内的 facebook 粉丝页面？

我在 WebView 中尝试它。这个网址已经工作了 6 个月：

```
http://m.facebook.com/pages/OpenGuide/333501443347901 
```

现在它停止工作了，也许 facebook 的人改变了一些东西。（是的！！！我可以再次编码）

因此，以下内容不起作用：

```
apps.facebook.com/333501443347901
www.facebook.com/home.php?#!/pages/name-of-site-/333501443347901
http://m.facebook.com/pages/OpenGuide/333501443347901
http://m.facebook.com/333501443347901 
```

**那么链接 Facebook 页面的正确 URL 形式是什么？**

Vanity Url 方法：（facebook.com/username）不适用于粉丝页面，仅适用于个人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:09:17.463

[http://m.facebook.com/PAGE_ID](http://m.facebook.com/PAGE_ID)应该可以解决问题。

[http://m.facebook.com/333501443347901](http://m.facebook.com/333501443347901)对我来说很好用。

# java - 如何在 Apache CXF jax-rs (REST) 中提交 JSON 数据中的多个对象作为请求正文

> ID：13807921
> 
> 赞同：3
> 
> 时间：2012-12-10T19:38:18.510
> 
> 标签：java, apache, rest, cxf

我正在使用 Apache-CXF 创建 REST Web 服务并尝试对数据库中的名称进行操作。

服务器：这是我的方法，预计获取json数据。

```
@PUT
@Path("/name/")
@Consumes("multipart/mixed")
@Produces("application/json")   
public NameTO updateName(@Multipart (value = "accountIdentifier", 
type =  "application/json")AccountIdentifier accountIdentifier, 
@Multipart (value = "name", type = "application/json")NameTO nameTO)
{
//      do business logic over here
    return nameTO;
} 
```

客户端：我正在使用 firefox REST 插件提交请求：使用 REST 客户端，我发布了以下 json 作为请求正文：

```
{{  "accountIdentifier": {"accountNo":"12345","division":"10","portfolio":"OT","channel": "MB"}} ,
{"name": { "firstName" : "Test", "middleInitial" : "R", "lastName" : "Test123", "suffix" : "Mr", "fullName" : "Test Test123"}}} 
```

我在 Rest Client 中设置了以下内容类型：

内容类型：多部分/混合

我得到以下异常：

> 2012-12-10 14:23:54 WebApplicationExceptionMapper.java:toResponse [WARN] javax.ws.rs.WebApplicationException: org.apache.cxf.interceptor.Fault: 无法从消息中确定边界！

任何我可以将 Json Request 有效负载中的多个对象传递给 Rest Service 并且在服务端完成的更改的示例示例都会有所帮助。

# html - 相对定位误差在 FF 和 Chrome 中

> ID：13807922
> 
> 赞同：0
> 
> 时间：2012-12-10T19:38:21.027
> 
> 标签：html, css

我在这里遇到了一个非常奇怪的问题。我试图创建一个搜索栏，这就是它在 chrome 中的外观，这就是我想要的。

[![在铬](../Images/e63dad14c87a70598f6a164d709014aa.png)](https://i.stack.imgur.com/w7GUQ.png)

它在 Safari 中运行良好，这是所有涉及的 CSS 代码。

```
#input {
    height: 25px;
    padding-left: 5px;
    width: 70px;
}
#button {
    margin-left: -6px;
    height:27px;
    position: relative;
    top: -2px;
    padding-left: 5px;
} 
```

但是在 FireFox 的情况下，按钮会向上移动一点，这使它看起来很糟糕。这是它在 FireFox 中的外观。

[![在火狐中](../Images/a9ad9c3a7b077ee6242a4d3c2b0bac82.png)](https://i.stack.imgur.com/ZWKEE.png)

如果我删除该行，则 Firefox 中的此错误已修复，`top: -2px;`但随后在 Chrome 和 Safari 中出现类似问题。

我该如何解决 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:13:28.920

你可以用 jQuery 修复

**代码**

```
$(document).ready(function(){
    if($.browser.mozilla){
        $("#button").css("top", "-2px")
    }
}) 
```

如果您尚未添加 jQuery，请添加此脚本

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script> 
```

# php - 使用 Codeigniter 的复合视图？

> ID：13807924
> 
> 赞同：1
> 
> 时间：2012-12-10T19:38:28.527
> 
> 标签：php, codeigniter

对于我的 Codeigniter 站点，我首先为每个控制器情况创建一个视图。这是不切实际的，因为它需要返回每个代码来进行更改。所以我改变了方法并在带有可选字段的“默认”控制器上进行操作。然后我想我可以根据需要将特殊视图加载到其中。

我将这个视图与可选字段放在一起，其中字段为`$title`、`$search_bar`开/关等。但是，现在出现了内容区域。我能够使用以下方法将更多视图加载到此默认视图中：

```
 $data['content_views'][]='blocks/login';

        $this->load->view('default/a', $data); 
```

并在“默认”视图中：

```
if(isset($content_views)&& (is_array($content_views)))
    {
        foreach($content_views as $content_view)
        {
            $this->load->view(&$content_view);
        }
    } 
```

（而且效果很好）两个问题：

1.  我让事情变得复杂吗？这是一种公认​​的方式吗？还是我误解了视图的功能以及它们的工作原理？

2.  我想要一种方法来*混合*，`$content_view`即一段文本，然后是一个视图。我不太确定如何进行。假设我想要一条消息，然后是视图，然后是更多文本。此方法将只接受视图。

任何人都可以帮助我创建这种*灵活*的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:01:29.873

是的，我会说你让事情变得有点复杂。虽然我可能没有完全按照您的描述准确地知道如何回应，但我可以告诉您我是如何做到的：

首先，整个站点通过模板运行，因此页眉和页脚是容器文件，站点内所需的所有视图都呈现为页面类型视图 - 如文章页面、图库页面等。组件被加载并传递给以字符串形式查看：

```
$content['sidebar'] = $this->load->view('components/sidebar', $data, true); 
```

最后一个 true 表示渲染为字符串。

本质上，这意味着页面视图几乎是 html 与 php 回显必要的元素。没有视图调用其他视图，这就是我阅读您的示例的方式。

CI 逐步加载视图，因此您的控制器可以像这样输出：

```
$this->load->view('header', $header_data);

$view_data['sidebar'] = $this->load->view('components/sidebar', $sidebar_data, true);
$this->load->view('content', $view_data);

$this->load->view('footer', $footer_data); 
```

在内容视图中，像这样处理侧边栏：

```
<?php if(isset($sidebar)): ?>
<nav>
    <?php echo $sidebar; ?>
</nav>
<?php endif; ?> 
```

并且，假设您为每个视图填充这些数组，它将呈现页眉，然后是内容，然后是页脚。如果存在，还渲染侧边栏。

所以结合一切，我基本上是说你可以在你的控制器中逐步加载部分，将子视图作为字符串传递给任何有意义的部分。这使您的视图控制在它所属的控制器中，而不是在视图文件本身中。以我的经验，我不必编写一个如此复杂的网站，以至于如果网站规划得当，这种结构并不完全适合。

# java - 用Java继承两个类？

> ID：13807928
> 
> 赞同：1
> 
> 时间：2012-12-10T19:38:46.960
> 
> 标签：java, android, oop, design-patterns, multiple-inheritance

我创建了一个类来包含一个带有我的应用程序徽标的自定义标题栏。这很好用，除了对于我的大多数类，我需要能够继承该功能以及 ListActivity 的功能。该怎么办？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T19:48:57.073

您应该支持组合（和委托）而不是继承：

```
 public interface FirstClassInterface {
       void method1();
   }

   public interface SecondClassInterface {
       void method2();
   }

   public class FirstClass implements FirstClassInterface {
       // ...
   }

   public class SecondClass implements SecondClassInterface  {
       // ...
   }

   public class FirstAndSecondClass implements FirstClassInterface , SecondClassInterface       
    {
       private FirstClassInterface firstclass;
       private SecondClassInterface secondclass;

       public FirstAndSecondClass(FirstClassInterface firstclassinterface, SecondClassInterface   secondclassinterface) {
           this.firstclass= firstclassinterface;
           this.secondclass= secondclassinterface;
       }

       public void method1() {
           this.firstclass.method1();
       }

       public void method2() {
           this.secondclass.method2();
       }

       public static void main(String[] args) {
           FirstAndSecondClass t = new FirstAndSecondClass(new FirstClass(), new SecondClass());
           t.method1();
           t.method2();
       }
   } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T19:43:15.060

在 Java 中，您**不能**拥有：

```
class MyClass extends ClassA, ClassB { ... } 
```

根据您在做什么，可能会使用：

```
class ClassB extends ClassA { ... }

class MyClass extends ClassB { ... } 
```

# wordpress - Wordpress 管理员/插件表单提交约定

> ID：13807931
> 
> 赞同：2
> 
> 时间：2012-12-10T19:39:22.877
> 
> 标签：wordpress

我创建了一个插件，它为菜单添加了一个管理菜单页面。该页面包含一个表单。

我想知道的是处理表单提交的建议约定/方法是什么。

1.  我应该加载页面并检查 $_POST 吗？
2.  我应该加载单独的表单页面吗？

谢谢。

细节：背后的想法是：我想加载一个新页面并提交我的代码，但想遵循约定和功能的登录/规则。

（移至[wordpress.stackexchange.com](https://wordpress.stackexchange.com/questions/75707/wordpress-admin-plugin-form-submit-conventions)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:26:22.967

您可以在插件中使用表单页面，当您加载页面时，您可以像这样检查 $_POST

```
//At the page load
if( isset( $_POST["MyForm"]))
{
    action();
}

//The Form
<form name="MyForm" method="POST" action="">
</form> 
```

如果您已提交，要加载新页面，您有 2 个解决方案，在“action()”中，您通过 PHP 生成另一个页面，或者您重定向到您想要的另一个页面，但您必须将其注册到 Wordpress，除非您有拒绝访问。

我个人建议将您的页面生成到您的插件中。

# sql - 查询优化 - 连接算法

> ID：13807940
> 
> 赞同：3
> 
> 时间：2012-12-10T19:39:58.653
> 
> 标签：sql, query-optimization

我无法理解不同的连接算法（嵌套循环连接、合并连接、索引连接、哈希连接和其他变体）以及如何/何时使用它们。更具体地说，我被要求绘制一个查询树以最有效地执行以下查询：

```
SELECT E.Name
FROM Employee E, Department D, Works_On W, Project P
WHERE E.DNO = D.DNO and E.SSN = W.ESSN and P.PNUM = W.PNUM and
    P.Budget > 50 and E.Sex = 'M' and E.Hobby = 'Yodeling' and
    D.DName = 'Rational Mechanics'; 
```

如果需要，我可以提供架构；基本上，这四个表是

> 员工（SSN、姓名、DNO - 部门编号、薪水、性别）、
> 部门（DNO、DName、预算、位置、MGRSSN）、
> Works_On（ESSN、PNum - 项目编号）、
> 项目（PNum、PName、预算、位置、目标）。

我画了一个左深连接树，我不知道每个连接使用哪种算法。如果我能得到关于何时使用每种算法的解释或指向解释它的资源的指针，那将非常有帮助。

编辑：我不是在问如何在 sql 中指定不同的连接，只是关于一般的连接。此外，我没有被告知任何表都已编入索引，但我被告知我可以索引只是为了进行索引连接。我还获得了统计信息以启发式地制作查询树，我用它来制作树的结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:23:03.490

通常，您希望将其留给您的数据库系统来选择最佳查询执行计划，从而选择最佳连接算法。它取决于表的可用索引和统计数据（例如它们包含多少行以及一行包含多少不同的值）。此外，连接算法还取决于数据库系统特定的东西，例如实现了什么算法，数据是使用集群表还是索引组织表存储等。

只有当您的查询异常缓慢或已被确定为应用程序瓶颈时，您才会尝试影响执行计划。

根据可用信息，无法确定最佳执行计划。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T04:08:33.883

> msdn 是获取此信息的好资源。technet.microsoft.com/en-us/library/ms191426(v=sql.105).aspx

正是我所需要的。谢谢，泽夫！

# python - 是否有任何第三方工具可用于在 python 中执行词干提取

> ID：13807941
> 
> 赞同：-1
> 
> 时间：2012-12-10T19:39:59.470
> 
> 标签：python, nltk, stemming

我正在使用 Python NLTK 库在大型语料库上执行词干提取。我正在关注

```
text = [porter.stem(token) for token in text.split()] 
text = ' '.join(text) 
```

“文本”代表我文件的一行。我的文件中有数百万行，这个过程需要大量时间。我只想问有没有更好的方法来做这个操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:08:38.420

“百万”是多少，“巨大的时间”是多少？波特词干不是一个复杂的算法，应该相当快。我怀疑你是 I/O 受限而不是其他任何东西。仍然......可能会有一些改进，你可以勉强解决。

如果顺序不重要并且您不需要每个词干的每个副本，您可能会发现使用字典和/或集合来存储词干更简单（并且更节省内存）。这将使您避免需要对已经看过的词进行词干处理，这应该会提高性能，并且每个词干只存储一次。

例如：

```
seenwords = set()
seenstems = set()

for line in input_file:
    line = line.lower().split()
    seenstems.union(porter.stem(token) for token in line if token not in seenwords)
    seenwords.union(line) 
```

如果它们在同一行上，这可以不止一次地阻止单词，但对于后续行，它们将不再需要被阻止。您还可以一个一个地处理单词，这将避免在同一行中多次将它们词干，但是使用生成器表达式而不是`for`循环有一些速度优势。

# apache - 可选的尾部斜杠 mod_rewrite

> ID：13807944
> 
> 赞同：0
> 
> 时间：2012-12-10T19:40:10.473
> 
> 标签：apache, .htaccess, mod-rewrite

我有一个非常具体的问题。标题给出了许多其他有正确答案的问题，但是我不知道如何将其适应我自己的重写规则。

我的 .htaccess 看起来像这样：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^[^/]*/?$ index.php [NC,L]
RewriteCond %{REQUEST_URI} !(^/dev/zeroyear/$)
RewriteRule ^dev/zeroyear/([^/]+)/?([^/]*)/?([^/]*)/?([^/]*)/?$ /dev/zeroyear/index.php?var1=$1&var2=$2&var3=$3&var4=$4 [L,QSA] 
```

我希望以下 2 个 URL 重定向到同一页面：

```
http://timesheep.name/dev/zeroyear/news
http://timesheep.name/dev/zeroyear/news/ 
```

由于我放了问号，最后一个重写规则导致了 500，但日志什么也没说。如果我将其更改为：

```
RewriteRule ^dev/zeroyear/([^/]+)/([^/]*)/?([^/]*)/?([^/]*)/?$ /dev/zeroyear/index.php?var1=$1&var2=$2&var3=$3&var4=$4 [L,QSA] 
```

错误消失了，但[http://timesheep.name/dev/zeroyear/news](http://timesheep.name/dev/zeroyear/news)将返回 404。

我能做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:09:32.670

您混合了非贪婪匹配（会吃掉 optional`/`的）和 optional`/`的所有混合在一起。尝试将它们分成不同的匹配项：

```
RewriteCond %{REQUEST_URI} !(^/dev/zeroyear/$)
RewriteRule ^dev/zeroyear/([^/]+)/([^/]+)/([^/]+)/([^/]+?)/?$ /dev/zeroyear/index.php?var1=$1&var2=$2&var3=$3&var4=$4 [L,QSA]

RewriteCond %{REQUEST_URI} !(^/dev/zeroyear/$)
RewriteRule ^dev/zeroyear/([^/]+)/([^/]+)/([^/]+?)/?$ /dev/zeroyear/index.php?var1=$1&var2=$2&var3=$3 [L,QSA]

RewriteCond %{REQUEST_URI} !(^/dev/zeroyear/$)
RewriteRule ^dev/zeroyear/([^/]+)/([^/]+?)/?$ /dev/zeroyear/index.php?var1=$1&var2=$2 [L,QSA]

RewriteCond %{REQUEST_URI} !(^/dev/zeroyear/$)
RewriteRule ^dev/zeroyear/([^/]+?)/?$ /dev/zeroyear/index.php?var1=$1 [L,QSA] 
```

# c++ - 在图像光谱上应用陷波滤波器（OpenCV）

> ID：13807949
> 
> 赞同：1
> 
> 时间：2012-12-10T19:40:25.570
> 
> 标签：c++, opencv, filter, dft, spectrum

如何使用 OpenCV 2.4 和 C++ 在图像光谱上应用陷波滤波器？我想计算图像的 DFT，抑制某些频率并计算逆 dft。谁能告诉我一些示例代码如何在频率域中应用陷波滤波器？

编辑：

这是我尝试过的，但是频谱的象限不是按顺序排列的，因此频谱的原点不是图像的中心。这让我很难确定要抑制的频率。当交换象限以使原点为中心时，逆 DFT 显示错误的结果。谁能告诉我如何用交换的象限做逆 dft？

我不明白频率图像 filter1 和 filter2 中的列数（参见代码）。如果我在 for 循环中使用 filter1.cols 作为 u，我不会访问图像的右边框。Filter1 和 filter2 似乎有大约。5000 列，但源图像的分辨率为 1280x1024（灰度）。对此有什么想法吗？

对我的代码有任何进一步的评论吗？

```
 Mat img;
img=imread(filename,CV_LOAD_IMAGE_GRAYSCALE);

int M = getOptimalDFTSize( img.rows );
int N = getOptimalDFTSize( img.cols );
Mat padded;
copyMakeBorder(img, padded, 0, M - img.rows, 0, N - img.cols, BORDER_CONSTANT, Scalar::all(0));

Mat planes[] = {Mat_<float>(padded), Mat::zeros(padded.size(), CV_32F)};
Mat complexImg;
merge(planes, 2, complexImg);

dft(complexImg, complexImg,cv::DFT_SCALE|cv::DFT_COMPLEX_OUTPUT);

   split(complexImg, planes);

Mat filter1;
planes[0].copyTo(filter1);
Mat filter2;
planes[1].copyTo(filter2);

for( int i = 0; i < filter1.rows; ++i)
{
    for(int u=7;u<15;++u)
    {
        filter1.at<uchar>(i,u)=0;
        filter2.at<uchar>(i,u)=0;
    }

Mat inverse[] = {filter1,filter2};
Mat filterspec;
merge(inverse, 2, filterspec);

cv::Mat inverseTransform;
cv::dft(filterspec, inverseTransform,cv::DFT_INVERSE|cv::DFT_REAL_OUTPUT);

cv::Mat finalImage;
inverseTransform.convertTo(finalImage, CV_8U); 
```

# java - Hashmap 覆盖值

> ID：13807952
> 
> 赞同：1
> 
> 时间：2012-12-10T19:40:58.737
> 
> 标签：java, hashmap

嘿，我正在尝试为飞机创建一个 hashMap 存储。但是当我添加时，它只会打印出一个航班。谁能帮我这个。这是我的代码：

```
import java.util.Scanner;

public class MainApp 
{
    private Scanner keyboard = new Scanner(System.in);
    public static void main(String[] args)
    {
        new MainApp().start();  
    }

    public void start()
    {
        Airline aerLingus = new Airline("AerLingus");
        PlaneStore planeStore = new PlaneStore("Aer Lingus");

        Flight p1 = new Flight("Aer Lingus","A01", 150.5, 10.5, 500, Flight.AIRPLANETYPE.AIRBUS);
        Flight p2 = new Flight("Aer Lingus","B01", 50.3, 1.5, 91, Flight.AIRPLANETYPE.CORPORATE);
        Flight p3 = new Flight("Aer Lingus","C01", 12.2, -3.1, 56, Flight.AIRPLANETYPE.AIRBUS);

        Flight p4 = new Flight("Ryan Air","D01", 10.5, 1.5, 430, Flight.AIRPLANETYPE.PRIVATE);
        Flight p5 = new Flight("Ryan Air","E01", 0.3, 2.1, 101, Flight.AIRPLANETYPE.CORPORATE);
        Flight p6 = new Flight("Ryan Air","F01", 2.2, -3, 291, Flight.AIRPLANETYPE.AIRBUS);
        planeStore.addFlight("",p1);
        planeStore.addFlight("",p2);
        planeStore.addFlight("",p3);
        planeStore.print();

        aerLingus.add(planeStore);
        aerLingus.add(planeStore);
        aerLingus.add(planeStore);

        aerLingus.printPlane();
    }

}

import java.util.TreeMap;

public class PlaneStore 
{
    private String airlineName;
    private TreeMap<String,Flight> planeMap;

    public PlaneStore(String airlineName) 
    {
        this.airlineName = "";
        planeMap = new TreeMap<String,Flight>();
    }

    public String getAirlineName() {
        return airlineName;
    }

    public TreeMap<String, Flight> getFlightList() {
        return planeMap;
    }
    public void addFlight(String airline,Flight flight)
    {
        planeMap.put(airline, flight);
    }

    // ---------------------------------------------------------------------------------------
    // Name: Print.
    // ---------------------------------------------------------------------------------------
    public void print()
    {
        System.out.println("\n********Student's in the Company.********");
        for (Flight flight : planeMap.values()) {
            // System.out.println(employee); to print the toString of Employee
            // class
            // or:
            System.out.println("Airline:\t" + flight.getAirline());
            System.out.println("Flight Number:\t" + flight.getFlightNumber());
            System.out.println("Fuel Remaining:\t" + flight.getFuelRemaining());
        }

    }

}
public class Flight 
{
    private String airline;
    private String flightNumber;
    private double fuelRemaining;
    private double overdue;
    private int passengerNumber;
    private AIRPLANETYPE planeType;

    public enum AIRPLANETYPE
    {
        AIRBUS("1"), CORPORATE("2"), PRIVATE("3");

        private String planeName;

        private AIRPLANETYPE(String planeName)
        {
            this.planeName = planeName;
        }
    }

    public Flight(String airline, String flightNumber, double fuelRemaining,
            double overdue, int passengerNumber, AIRPLANETYPE planeType) 
    {
        super();
        this.airline = airline;
        this.flightNumber = flightNumber;
        this.fuelRemaining = fuelRemaining;
        this.overdue = overdue;
        this.passengerNumber = passengerNumber;
        this.planeType = planeType;
    }

    public String getAirline() {
        return airline;
    }

    public void setAirline(String airline) {
        this.airline = airline;
    }

    public String getFlightNumber() {
        return flightNumber;
    }

    public void setFlightNumber(String flightNumber) {
        this.flightNumber = flightNumber;
    }

    public double getFuelRemaining() {
        return fuelRemaining;
    }

    public void setFuelRemaining(double fuelRemaining) {
        this.fuelRemaining = fuelRemaining;
    }

    public double getOverdue() {
        return overdue;
    }

    public void setOverdue(double overdue) {
        this.overdue = overdue;
    }

    public int getPassengerNumber() {
        return passengerNumber;
    }

    public void setPassengerNumber(int passengerNumber) {
        this.passengerNumber = passengerNumber;
    }

    public AIRPLANETYPE getPlaneType() {
        return planeType;
    }

    public void setPlaneType(AIRPLANETYPE planeType) {
        this.planeType = planeType;
    }

    public String toString() 
    {
        return "Flight [airline=" + airline + ", flightNumber=" + flightNumber
                + ", fuelRemaining=" + fuelRemaining + ", overdue=" + overdue
                + ", passengerNumber=" + passengerNumber + ", planeType="
                + planeType + "]";
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T19:56:42.483

HashMap 是一种数据结构，您可以在其中存储键值对。密钥必须是唯一的。否则，您将覆盖具有相同键的值。

使用这种数据结构，您可以非常快速地添加和查找值，因为添加和查找值的复杂性是恒定的。但缺点是您只能添加一次密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:44:22.277

编辑以响应进一步的代码发布：

每次您这样做时，您都会`PlaneStore.addPlane()`提供一个空白键。Hashmap 仅在您为每个对象提供唯一键时才有用。否则每个平面都会覆盖前一个平面。这就是为什么当您打印时您只会看到一个对象。给每个飞机一个唯一的键，可能是一个尾号或相关的东西，你应该能够检索每个对象。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T19:42:51.867

您需要按如下方式定义您的哈希图：

```
Map<String, List<Flight>> map = new TreeMap<String, List<Flight>>(); 
```

然后对于每个航班名称，您需要创建一个新的航班列表，如下所示：

```
map.get("foo") = new ArrayList<Flight>();

map.get("foo").add(Flight); 
```

对于上面的代码，你需要防御，如果没有列表，你需要创建一个，否则你会得到一些异常。此外，确保每个飞行键只创建一个列表。

# objective-c - iOS 6：CoreAnimation：警告，删除了未提交 CATransaction 的线程

> ID：13807955
> 
> 赞同：4
> 
> 时间：2012-12-10T19:41:14.213
> 
> 标签：objective-c, xcode, ios6

我收到一个未提交的 CATransaction 警告，我无法缝合解决。我的应用程序运行良好，它正在做我期望的每件事，屏幕会尽快更新标签，一切看起来都很好。

```
 Dec 10 10:40:10 my-iPhone myAppName[5967] <Warning>: CoreAnimation: warning, deleted thread with uncommitted CATransaction; set CA_DEBUG_TRANSACTIONS=1 in environment to log backtraces. 
```

我设置 CA_DEBUG_TRANSACTIONS=1 并找到以下清单。

```
 Dec 10 10:43:45 my-iPhone myAppName[5994] <Warning>: CoreAnimation: warning, deleted thread with uncommitted CATransaction; created by:
    0   QuartzCore                          0x348fc65d <redacted> + 220
    1   QuartzCore                          0x348fc541 <redacted> + 224
    2   QuartzCore                          0x348fc325 <redacted> + 24
    3   QuartzCore                          0x34900489 <redacted> + 44
    4   QuartzCore                          0x34905091 <redacted> + 456
    5   QuartzCore                          0x34904ebf <redacted> + 42
    6   QuartzCore                          0x34904e91 <redacted> + 44
    7   myAppName                       0x000d9ec1 -[MainViewController updateProgress:] + 56
    8   Foundation                          0x3a75067d <redacted> + 972
    9   libsystem_c.dylib                   0x397d6311 <redacted> + 308
    10  libsystem_c.dylib                   0x397d61d8 thread_start + 8 
```

导致此警告的代码如下所示：

```
 - (void)updateProgress:(NSString*) myLabelString
    {
    //this is updating a UILabel on the main view
    [myLabel setText:myLabelString];

    } 
```

它是从我调用 performSelectorinBackground 的 for 循环中调用的：

```
for (;;) {
   // Do stuff here to set up the info for the string

    [self performSelectorInBackground:@selector(updateProgress:) withObject:myLabelString];
    usleep(100000);
    if (stopLoop == YES) {
    // do stuff before we exit for loop            
        break;
    }

} 
```

我已经尝试了几件事，主要是为了确保在退出选择器 "updateProgress" 之前完成对 myLable 的更新，唯一的效果是将时间 (+56) 更改为更大的数字。我也尝试过使用：

```
 [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1.0f];    
    // edit UILabel here    
    [UIView commitAnimations]; 
```

我在另一篇文章中尝试过这个，但由于我没有使用核心动画，编译器反对“CATransaction”作为未声明的标识符，我并不感到惊讶。

```
 [CATransaction begin];
      [CATransaction setDisableActions:YES];
      //
      [CATransaction commit]; 
```

关于如何确定标签更新是否完成的任何建议？正如我所说的应用程序正在运行，我只需要清除此警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T04:35:10.937

这个问题在开发者论坛上得到了回答。原来我在后台线程上做 UIKit 工作。

我改变了这一行：

```
 [self performSelectorInBackground:@selector(updateProgress:) withObject:myLabelString]; 
```

到：

```
 [self performSelectorOnMainThread:@selector(updateProgress:) withObject:myLabelString waitUntilDone:NO]; 
```

我也尝试将 WaitUntilDone 设置为 YES，这也有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T00:52:21.290

正如 Stephen 所描述的，另一种确保 UI 绘制发生在主线程上的方法是使用该函数`dispatch_async()`

```
// Perform all drawing/UI updates on the main thread.
dispatch_async(dispatch_get_main_queue(), ^{
    // Perform any drawing/UI updates here.
}); 
```

有关区别的相关帖子`dispatch_async()`，`performSelectorOnMainThread:withObjects:waitUntilDone:`请参阅[主队列上的 performSelectorOnMainThread 和 dispatch_async 之间的区别是什么？](https://stackoverflow.com/questions/9335434/whats-the-difference-between-performselectoronmainthread-and-dispatch-async-on-m)

# css - 计算色值关系

> ID：13807956
> 
> 赞同：6
> 
> 时间：2012-12-10T19:41:30.460
> 
> 标签：css, colors, sass, color-scheme

是否有可以计算两种颜色之间关系的网络应用程序？

我有一个现有的样式指南，其中包含已建立的十六进制值。我想将这些颜色添加为 sass 变量中的 hsla 值。我可以将每个颜色都添加为自变量，但我宁愿将所有颜色都基于一种基色。然后使用变化百分比来确定其他颜色。在这样做时，我可以改变主题并保持关系中的“正确”值。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-04-29T18:46:35.533

也许有点晚了，但我在搜索完全相同的功能时发现了这一点：

[http://ethanmuller.github.io/sass-color-function-generator-thing/](http://ethanmuller.github.io/sass-color-function-generator-thing/)

例如：SASS 函数中的输入颜色`#ff0000`和结果`#552222``darken( desaturate( #ff0000, 57 ), 27 )`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T22:56:09.623

有[http://sassme.arc90.com/](http://sassme.arc90.com/)，它与您所要求的相反，但可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T21:13:44.463

我最终做的是获取所有颜色的 hsla 值，然后手动计算两种颜色之间的百分比关系，并在“调整颜色”函数中使用结果是 sass。我相信有一种更快的方法，但这有效。

# javascript - 重复在 2D Canvas 上绘制图案的方法

> ID：13807961
> 
> 赞同：0
> 
> 时间：2012-12-10T19:41:47.870
> 
> 标签：javascript, canvas, 2d, html5-canvas

我有一个使用 context.fillRect() 方法绘制图像的方法。我希望重复绘制此图像，即沿 x 和 y 轴以平铺格式绘制，因为它的尺寸很小（长度为 15 像素）。

这是为了填充我的画布，宽度为 700 像素，高度为 500 像素。

这可以使用 context.createPattern() 方法来完成吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:51:53.213

使用的秘诀`context.createPattern`是`context.fillStyle`属性。

首先，创建模式，然后将模式分配给`context.fillStyle`，最后，`context.fillRect`用于绘制模式：

```
// assuming img is loaded...
var ptrn = ctx.createPattern(img,'repeat');
ctx.fillStyle = ptrn;
ctx.fillRect(0,0, canvas.width,canvas.height); 
```

[MDN 上](https://developer.mozilla.org/en-US/docs/Canvas_tutorial/Applying_styles_and_colors#A_createPattern_example)有一个完整的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-11T04:23:52.290

根据您对 apsillers 的回答，我建议您将所需的图案绘制到另一个画布元素上。然后，您可以将完成的绘图传递给`ctx.createPattern`.

```
var drawing = document.createElement('canvas');

//Do necessary drawing
//ctx.fillRect(etc)

var ptrn = ctx.createPattern(drawing,'repeat');
ctx.fillStyle = ptrn;
ctx.fillRect(0,0, canvas.width,canvas.height); 
```

[HTML5 Canvas - 重复 Canvas 元素作为模式](https://stackoverflow.com/questions/9101613/html5-canvas-repeat-canvas-element-as-a-pattern)

# c# - 在 ASP.NET Web API 中，如何逐个发送和接收记录集合

> ID：13807962
> 
> 赞同：0
> 
> 时间：2012-12-10T19:41:57.947
> 
> 标签：c#, asp.net-mvc, winforms, entity-framework, asp.net-web-api

我正在使用实体框架、ASP.NET Web API，并且有一个 WinForm 客户端将其数据发送到服务器或接收。

我知道如何获取一条记录以及如何一次获取一组记录，但可能有很多记录可能会导致问题。**那么如何才能在客户端一一获取新信息的集合呢？**

我想我可以先得到一个新 ID 的列表，然后一个一个地得到它们。有更好的方法吗？

有关实施此操作的任何信息都将很有用。

**编辑：**要清楚，我的意思是从客户端机器中的服务器而不是从数据库中的服务器中获取信息集合:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T20:13:08.837

分页就是答案。下面是使用 Entity Framework 和 MVC 使用 Skip and Take 进行分页的一个很好的链接。您基本上指定起始索引（或“跳过”），然后指定要获取（或“获取”）的记录数。像这样：

```
context.YOURDBSET.Skip(0).Take(10);  //Gets the first 10.
context.YOURDBSET.Skip(10).Take(10);  //Gets the next 10.
context.YOURDBSET.Skip(20).Take(10);  //Gets the next 10. 
```

等等等等等等

这是该链接：http: [//msdn.microsoft.com/en-us/magazine/gg650669.aspx](http://msdn.microsoft.com/en-us/magazine/gg650669.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:59:19.543

解决此问题的一种非常常见的方法是创建某种形式的分页。例如，第一次，只需从服务器获取前 50 条记录。然后根据某些条件（可能是用户触发，或根据时间自动，取决于您的应用程序）获取下一组数据，记录 51 - 100。

您可以通过触发获取各种数据页面的方式获得创意。例如，如果您需要以这种方式显示数据，您可以根据用户滚动鼠标滚轮来触发数据检索。最终这取决于你的情况，但我相信分页是答案。

您的页面大小可以是 5 条记录，也可以是 500 条记录，但思路是一样的。

# javascript - 正则表达式模式 - SyntaxError：无效的正则表达式标志 b

> ID：13807963
> 
> 赞同：0
> 
> 时间：2012-12-10T19:42:06.840
> 
> 标签：javascript, regex

我在 java 中创建了这个模式，现在我正在尝试在 javascript 中使用它。为什么我会收到此错误？

```
var pattern = /b(?=[A-Z\d]{9,10}\b)(?:[A-Z]*\d){0,2}[A-Z]*/b; 
```

`SyntaxError: invalid regular expression flag b`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:45:01.060

您是否尝试使用“单词边界”？那将是`\b`（注意斜线的方向）。

```
var pattern = /\b(?=[A-Z\d]{9,10}\b)(?:[A-Z]*\d){0,2}[A-Z]*\b/; 
```

您还需要`//`作为分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:43:41.903

javascript 正则表达式中没有“b”这样的标志。

这[是可用标志的列表](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)。

# networking - IPv6 标头优先级

> ID：13807964
> 
> 赞同：1
> 
> 时间：2012-12-10T19:42:06.887
> 
> 标签：networking, tcp, ip

从这个站点（http://www.ipv6.com/articles/general/IPv6-Header.htm），它说：

`Packet priority/Traffic class (8 bits) The 8-bit Priority field in the IPv6 header can assume different values to enable the source node to differentiate between the packets generated by it by associating different delivery priorities to them. This field is subsequently used by the originating node and the routers to identify the data packets that belong to the same traffic class and distinguish between packets with different priorities.`

我想知道，是否有可能真正“破解” TCP/IP 堆栈以便为您的数据包提供更高的优先级。您是否会在网络性能方面获得任何实质性收益。另外，如果可能，如何预防？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T02:06:33.063

是的，这是可能的，但这并不是真正的黑客行为。有一个标准的编程接口允许您的程序向堆栈指示它希望如何填充 Traffic Class 标头字段。

您是否会测量任何性能差异取决于处理数据包的网络。将 Traffic Class 字段视为网络的提示；关于您希望如何处理您的数据包的建议。网络可能会忽略它，甚至将其更改为不同的代码点。此外，“优先级”（也称为“优先级”）的概念作为对流量类别字段的解释已经退居到更丰富的每跳行为 (PHB) 集合中。

请参阅[IETF RFC 3542 用于 IPv6 的高级套接字应用程序接口 (API)](https://www.rfc-editor.org/rfc/rfc3542.txt)。特别是，请阅读第 4 节的第一部分，访问 IPv6 和扩展标头，以及第 6.5 节，指定/接收流量类别值。

下面是一个代码片段，它将`MY_TCLASS`在套接字上发送的所有数据包的 Traffic Class 字段设置为整数`sk`。

```
int tclass;
tclass = MY_TCLASS;
setsockopt(sk, IPPROTO_IPV6, IPV6_TCLASS, &tclass, sizeof(int)); 
```

相关阅读：

*   [IETF RFC 3493 IPv6 的基本套接字接口扩展](https://www.rfc-editor.org/rfc/rfc3493.txt)
    *   第 5 节讨论基本的套接字选项
*   [IETF RFC 2474 IPv4 和 IPv6 标头中区分服务字段（DS 字段）的定义](https://www.rfc-editor.org/rfc/rfc2474.txt)
    *   第 7.1 节讨论了盗窃和拒绝服务，从网络运营商的角度来看，这就是您要问的问题。
*   [IETF RFC 2475 差异化服务架构](https://www.rfc-editor.org/rfc/rfc2475.txt)
    *   第 2.1 节涵盖了一大堆术语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:33:45.880

我不明白这个问题。你不需要破解任何东西。提供了一个 API 用于在套接字上设置 TC。它有什么效果取决于介入路由器的合作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-12T16:11:41.830

源可以更改优先级，但路由器和网关可以根据数据包的类型更改优先级

# c# - 不同项目（程序集）之间的反射

> ID：13807966
> 
> 赞同：3
> 
> 时间：2012-12-10T19:42:12.933
> 
> 标签：c#, .net, reflection

有没有办法从给定的项目中创建包含在其他项目中的类的实例？

我通常使用`Assembly.GetExecutingAssembly().CreateInstance()`，但显然，此调用将返回 NULL，因为我指定的类保存在另一个项目中。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T19:46:38.560

如果你真的想使用反射来实现这一点，那么看看`Assembly.LoadFrom()`. [http://msdn.microsoft.com/en-us/library/system.reflection.assembly.loadfrom.aspx](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.loadfrom.aspx) 或者，正如有人指出的那样，您可以简单地使用项目引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:45:26.363

您可以查看 .net 激活器方法[http://msdn.microsoft.com/en-us/library/system.activator_methods.aspx](http://msdn.microsoft.com/en-us/library/system.activator_methods.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T19:48:00.903

如果您尝试进行反射，您可能希望使用 Assembly.LoadFrom() 从文件中加载程序集。

但是，如果您只是想在程序集中使用对象，请将程序集添加为对项目的引用（右键单击解决方案资源管理器中的项目，然后单击“添加引用”）。然后您可以简单地使用引用程序集中的所有公共对象。

# windows - 存储所有打印文档的可解析备份

> ID：13807967
> 
> 赞同：1
> 
> 时间：2012-12-10T19:42:23.250
> 
> 标签：windows, pdf, printing, backup, xps

我想要完成的是始终保留所有打印文档的可解析副本，并为每次打印执行辅助过程。

（即：能够解析所有文本、说明页面、矢量、图像等）。
可以立即或延迟处理文档（立即进行）。

随着格式的发展，任何 PDL 都可能适合，我最好的猜测是 XPS 可能是可解析格式的最佳选择，对其他格式的任何建议表示赞赏。

理想情况下，我不想弄乱用户与打印的交互（例如：打印设置页面；或创建一个虚拟打印机，它可以保存 XPS，然后将打印作业转发到物理打印机）。
由于用户可能不精通技术，无法正确设置/使用它和/或在以后搞砸该过程。

我此时正在寻找的内容：

*   关于打印过程和流程的文档（WDK、PDL，还有什么？）
*   如果可能的话，如何做到这一点；有没有现成的解决方案？
*   我应该看的任何方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:59:22.180

这只是答案的一部分，但有传言说您可以告诉 Windows 保留假脱机文档（右键单击打印机，选择“打印机属性”、“高级”、“保留打印的文档”）。

您可以启用此功能，然后创建一个计划任务（或系统服务等）来监视假脱机目录并将所有早于某个阈值的文件移动到更合适的位置以进行进一步处理。（年龄阈值是避免尝试移动当前正在写入的文件的合理方法。）

然后你必须找到一个程序来将 .spl 文件转换为你喜欢的任何格式，或者尝试[自己解释它](http://www.undocprint.org/formats/winspool/spl)。它看起来相当低级，但微软确实提供了一些关于[MS-EMF](http://msdn.microsoft.com/en-us/library/cc230514.aspx)和[MS-EMFSPOOL](http://msdn.microsoft.com/en-us/library/cc231034.aspx)格式的文档，这可能是一个开始。

# android - Android WebClient，通过WebResourceResponse返回图像资源-不显示图像

> ID：13807968
> 
> 赞同：6
> 
> 时间：2012-12-10T19:42:23.347
> 
> 标签：android, webview, webviewclient

我的 WebView 有一个简单的 WebViewClient 并覆盖 shouldInterceptRequest ：（不是实际代码）

```
public class WebViewClientBook extends WebViewClient
{
    @Override
    public WebResourceResponse shouldInterceptRequest(WebView view, String url)
    {
       File file = new File("pathToTheFile.jpeg");
       FileInputStream inputStream = new FileInputStream(file);

       return new WebResourceResponse("image/jpeg", "UTF-8", inputStream);
    }
} 
```

由于某种原因，WebClient 无法显示图像......我相信这可能与不正确的编码有关：UTF-8。

有什么建议可以用作替代品吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-18T22:44:10.073

你这样做是不对的。您有两种方法可以做到这一点，这取决于接收该图像的内容。

案例 1：您想要返回一个字节数组。在这种情况下，您应该使用 Javascript 对其进行处理并将其解析为字符串，并将其分配给 webView 上标签的 src 字段。

```
 File imagefile = new File(otherPath);
    FileInputStream fis = null;
    try {
        fis = new FileInputStream(imagefile);
        finall = fis;
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
    Bitmap bi = BitmapFactory.decodeStream(fis);
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
        //PNG OR THE FORMAT YOU WANT
    bi.compress(Bitmap.CompressFormat.PNG, 100, baos);

    byte[] data = baos.toByteArray();
    InputStream is = new ByteArrayInputStream(finaldata);
    return new WebResourceResponse("text/html", "UTF-8", is); 
```

案例 2：您解析 Activity 上的所有内容并传递完整的 html 代码，因此在 webView 中，您将使用该数据更新哪个 innerHTML 属性。

```
 File imagefile = new File(otherPath);
    FileInputStream fis = null;
    try {
        fis = new FileInputStream(imagefile);
        finall = fis;
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }
    Bitmap bi = BitmapFactory.decodeStream(fis);
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
        //PNG OR THE FORMAT YOU WANT
    bi.compress(Bitmap.CompressFormat.PNG, 100, baos);

    byte[] data = baos.toByteArray();
    String image64 = Base64.encodeToString(data, Base64.DEFAULT);
    String customHtml = "<html><body><h1>Hello, WebView</h1>" +
            "<h2><img src=\"data:image/jpeg;base64," + image64 + "\" /></img></h2></body></html>";
        InputStream is = new ByteArrayInputStream(finaldata);
    return new WebResourceResponse("text/html", "UTF-8", is); 
```

如果您只想加载图像，您可以随时执行`webView.loadData(String data, String mimeType, String encoding)`

希望它有帮助，我刚刚得到了我的工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T15:24:27.473

我有一个类似的问题，设置两个标志解决了我的问题：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
     getSettings().setAllowFileAccessFromFileURLs(true);
     getSettings().setAllowUniversalAccessFromFileURLs(true);
} 
```

# c# - ASP.NET ThreadPool.QueueUserWorkItem Common.Logging 到 NLog 崩溃 IIS - 错误还是只有我？

> ID：13807980
> 
> 赞同：1
> 
> 时间：2012-12-10T19:43:09.160
> 
> 标签：c#, asp.net-mvc, iis, crash, nlog

我有一个从 ASP.NET MVC4 网页启动的长时间运行的异步任务。控制器方法如下所示：

```
[HttpPost]
public ActionResult Index(IndexModel model)
{
    if (ModelState.IsValid)
    {
        try
        {
            model.NotificationRecipient = model.NotificationRecipient.Replace(';', ',');
            ImportConfiguration config = new ImportConfiguration()
            {
                BatchId = model.BatchId,
                ReportRecipients = model.NotificationRecipient.Split(',').Select(c => c.Trim())
            };
            System.Threading.ThreadPool.QueueUserWorkItem(foo => LaunchFileImporter(config, this.HttpContext.ApplicationInstance.Context));
            if (model.RunExport) ThreadPool.QueueUserWorkItem(foo => LaunchFileExporter());
            Log.InfoFormat("Queued the ImportProcessor to process invoices.  Send Notification: {0} Email Recipient: {1}",
                model.SendNotification, model.NotificationRecipient);
            TempData["message"] = "The import processor job has been started.";
            //return RedirectToAction("Index", "Home");
        }
        catch (Exception ex)
        {
            Log.Error("Failed to properly queue the invoice import job.", ex);
            ModelState.AddModelError("", ex.Message);
        }
    }

    var dirInfo = new System.IO.DirectoryInfo(dir);
    model.Files = dirInfo.EnumerateFiles("*.xml").OrderBy(x => x.Name.ToLower());

    return View(model);
} 
```

我的`LaunchFileImporter`方法如下所示：

```
private void LaunchFileImporter(ImportConfiguration config, System.Web.HttpContext context)
{
    //the semaphore prevents concurrent running of this process, which can cause contention.
    Log.Trace(t => t("submitter semaphore: {0}", (exporter == null) ? "NULL" : "present."));
    submitter.WaitOne();
    try
    {
        Log.Trace(t => t("Context: {0}", context));
        using (var processor = new ImportProcessor(context))
        {
            processor.OnFileProcessed += new InvoiceFileProcessing(InvoiceFileProcessingHandler);
            processor.OnInvoiceProcessed += new InvoiceSubmitted(InvoiceSubmittedHandler);
            processor.Execute(config);
        }
    }
    catch (Exception ex)
    {
        Log.Error("Failed in execution of the File Importer.", ex);
    }
    submitter.Release();
} 
```

我的 Logger 是一个 Common.Logging `private static readonly ILog`，并且是为 NLog 配置的。似乎接线正确；至少，我从中得到了相当多的日志。

事情是这样的：在我点击的那一刻`System.Threading.ThreadPool.QueueUserWorkItem`，应用程序池死亡螺旋变成了无声的死亡，重置应用程序池，重新加载会员提供程序，重新处理 web.config，整个 shebang ......没有 YSOD，网页上没有任何指示……一切都悄悄地爆发了。我得到的最后一个日志条目是`Queued the ImportProcessor to process invoices...`.

我应该注意页面会刷新。被`TempData["message"]`填充并显示在屏幕上，这让我相信问题发生在异步过程中......但几乎立即发生。由于缺少额外的日志，我假设记录器有问题。

所以我希望有人可以告诉我发生了什么，指出一些记录在案的问题，告诉我我是如何成为一个白痴，或者重现类似错误的东西。

谢谢！

***更新***

@RichardDeeming 指出上下文信息没有进入生成的线程，这似乎是问题的原因。我仍然没有弄清楚为什么这不起作用，也没有编写跟踪消息，但是一旦我捕获了我需要的上下文部分，`IPrincipal`, 并使用它而不是上下文对象，它就起作用了.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:50:37.220

你会得到一个`NullReferenceException`：

```
ThreadPool.QueueUserWorkItem(foo => LaunchFileImporter(config, HttpContext.ApplicationInstance.Context)); 
```

请求完成后将被`HttpContext`清理。由于异常是在后台线程上引发的，因此它将关闭整个`AppDomain`，导致您的应用程序重新启动。

您需要从控制器操作的上下文中捕获相关状态，并在`WaitCallback`委托中使用该状态：

```
IPrincipal user = Context.User;
ThreadPool.QueueUserWorkItem(foo => LaunchFileImporter(config, user));

// Or:
// ThreadPool.QueueUserWorkItem(state => LaunchFileImporter(config, (IPrincipal)state); 
```

# sql - 错误消息 4145，级别 15，状态 1，非布尔类型的表达式

> ID：13807983
> 
> 赞同：0
> 
> 时间：2012-12-10T19:43:15.640
> 
> 标签：sql, sql-server, syntax, error-handling, boolean

当我尝试执行此语句时，我收到此错误消息：

> *消息 4145，级别 15，状态 1，过程 tr_check_qty，第 8 行
> 在预期条件的上下文中指定的非布尔类型表达式，靠近“开始”*

我之前收到过此错误消息，但这次我不知道如何修复它。我什至让一个以编程为生的人看着这个，当他又累又忙的时候，他找不到我的语法问题。帮助！

```
CREATE TRIGGER tr_check_qty
ON order_details
FOR INSERT, UPDATE
AS
   IF (SELECT quantity_in_stock
       FROM products
       WHERE quantity_in_stock >= units_on_order)
   BEGIN
      PRINT 'Insert/Update Not Allowed: quantity_in_stock less than units_on_order.'
      ROLLBACK TRANSACTION
   END;
GO 
```

好的，所以我现在可以执行此语句：

```
CREATE TRIGGER      tr_check_qty
ON                  order_details
FOR INSERT, UPDATE
AS
IF EXISTS           (   SELECT      COUNT(inserted.order_id)
                    FROM        inserted
                    INNER JOIN  products ON products.product_id=inserted.product_id
                    WHERE       inserted.quantity>products.quantity_in_stock)
BEGIN
PRINT 'Insert/Update Not Allowed: quantity_in_stock less than units_on_order.'
ROLLBACK TRANSACTION
END;
GO 
```

但现在我收到了这个错误：

> 消息 245，级别 16，状态 1，行 1 将 varchar 值“数量”转换为数据类型 int 时转换失败。

当我尝试在触发器之后执行此语句时：

```
UPDATE order_details
SET quantity=30
WHERE order_id=10044 AND product_id=7;
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:48:34.950

你的`if`说法没有可比性。也许你的意思是这样的：

```
IF   EXISTS (   SELECT      quantity_in_stock
                FROM        products
                WHERE       quantity_in_stock >= units_on_order ) 
```

查看是否返回任何行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T19:49:45.793

我认为您也需要引用插入的行，就像[这里](http://www.java2s.com/Code/SQLServer/Trigger/DefinetriggerforInsertandUpdate.htm)

```
CREATE TRIGGER tr_check_qty
3>    ON order_details
4>    FOR INSERT, UPDATE
5> AS
6>    IF EXISTS
7>       (
8>        SELECT 'True'
9>        FROM Inserted i
10>        JOIN products p
11>          ON i.ID = p.ID
          WHERE       quantity_in_stock >= units_on_order
12>       )
13>    BEGIN
14>        PRINT 'Insert/Update Not Allowed: quantity_in_stock less than units_on_order.'
15>        ROLLBACK TRAN
16> END 
```

# php - PHP GD剥离后将ICC颜色配置文件添加到图像的脚本？

> ID：13807985
> 
> 赞同：4
> 
> 时间：2012-12-10T19:43:26.283
> 
> 标签：php, colors, gd, color-profile, color-management

我使用在线购物车出售我的摄影作品。该软件使用 GD 库动态调整图像大小和水印，当它这样做时，它会删除所有元数据，包括使图像在颜色管理的浏览器中正确显示所需的 ICC 颜色配置文件。我在这里说的是 sRGB。

有没有办法制作一个可以在 GD 转换之后运行的脚本，可以自动将 ICC 配置文件添加到图像中？在这一点上，我不认为 ImageMagick 是一种选择。

谢谢！

# ios - 在 MonoTouch 中生成并存储唯一的 id

> ID：13807988
> 
> 赞同：4
> 
> 时间：2012-12-10T19:43:53.303
> 
> 标签：ios, xamarin.ios, nsuserdefaults, uuid

我正在考虑使用 MonoTouch 将我的应用程序从标准 iOS Objective C 转换为 C#。

在我的 Objective C 代码中，我正在生成一个唯一标识符并将其保存到 NSUserDefaults 以验证和检查后续登录。这是我为此使用的方法：

```
- (NSString *) localUuid {
        NSString * ident = [[NSUserDefaults standardUserDefaults] objectForKey:UUID];
        if(!ident){
            CFUUIDRef uuidRef = CFUUIDCreate(NULL);
            CFStringRef uuidStringRef = CFUUIDCreateString(NULL, uuidRef);
            CFRelease(uuidRef);
            ident = [NSString stringWithString:(__bridge_transfer NSString *)uuidStringRef];
            [[NSUserDefaults standardUserDefaults] setObject:ident forKey:UUID];
            [[NSUserDefaults standardUserDefaults] synchronize];
        }
        return ident;

    } 
```

不过，我在使用 MonoTouch 获得类似于在 C# 中工作的问题时遇到了问题。

我还没有找到可用于 Mono 的 CFUUID_ 方法版本*。*
此外，虽然似乎有一个 NSUserDefaults.StandardUserDefaults.SetValueForKey 方法，但没有一个简单的 GetValueForKey 方法。

有没有比 Monotouch 更有经验的人知道更好的方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T20:26:15.773

`CFUUID`不受约束，因为使用 .NET 更容易`System.Guid`实现相同的目的。例如

```
var uuid = Guid.NewGuid ();
string s = uuid.ToString (); // if a string is preferred 
```

> 此外，虽然似乎有一个 NSUserDefaults.StandardUserDefaults.SetValueForKey 方法，但没有一个简单的 GetValueForKey 方法。

有一些安全类型的方法可以做到这一点，例如：

```
NSUserDefaults settings = NSUserDefaults.StandardUserDefaults;
settings.SetString (s, "key"); 
```

# java - CountDownTimer 问答游戏，NullPointer - Android (java)

> ID：13807991
> 
> 赞同：0
> 
> 时间：2012-12-10T19:44:00.817
> 
> 标签：java, android, nullpointerexception, countdowntimer

我的 onTick() 方法中的 2 行出现 NullPointer 错误。我是实现子类以及如何让这个计时器工作的新手。我刚刚搜索了 CountDownTimers 并尝试实现我发现的一个示例，因此它可能有点混乱。

在我实现计时器之前，该应用程序运行良好。我想要的是让计时器在此活动开始后立即启动，然后在单击或计时器用完后重新启动计时器并显示新问题。

先感谢您！

```
public class QuestionView extends Activity  {

    int correctAnswers = 0;
    int wrongAnswers = 0;

    int answer = 0;

    int i = 0;

    long startTime = 50000;
    long interval = 1000;
    long timeElapsed;

    boolean timerHasStarted = false;

    Button answer1;
    Button answer2;
    Button answer3;
    Button answer4;
    TextView question;
    TextView timer;
    TextView timeElapsedView;

    ArrayList<Question> queries;
    Timer cdTimer;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.questionviewmain);

        answer1 = (Button)findViewById(R.id.answer1);
        answer2 = (Button)findViewById(R.id.answer2);
        answer3 = (Button)findViewById(R.id.answer3);
        answer4 = (Button)findViewById(R.id.answer4);

        question = (TextView)findViewById(R.id.question);

        queries = getIntent().getParcelableArrayListExtra("queries");

        cdTimer = new Timer(startTime, interval);

        loadQuestion();
    }

    public void loadQuestion() {

        if(i == 9) {

            endQuiz();

        } else {

            if(!timerHasStarted) {
                cdTimer.start();
                timerHasStarted = true;
            } else {
                cdTimer.cancel();
                timerHasStarted = false;
            }

            answer = queries.get(i).getCorrectAnswer();

            question.setText(queries.get(i).getQuery());

            answer1.setText(queries.get(i).getA1());
            answer2.setText(queries.get(i).getA2());
            answer3.setText(queries.get(i).getA3());
            answer4.setText(queries.get(i).getA4());

            answer1.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    queries.get(i).setSelectedAnswer(0);
                    if(answer == 0) {
                        correctAnswers++;
                        nextQuestion();
                    } else {
                        wrongAnswers++;
                        nextQuestion();
                    }
                }
            });

            answer2.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    queries.get(i).setSelectedAnswer(1);
                    if(answer == 1) {
                        correctAnswers++;
                        nextQuestion();
                    } else {
                        wrongAnswers++;
                        nextQuestion();
                    }
                }
            });

            answer3.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    queries.get(i).setSelectedAnswer(2);
                    if(answer == 2) {
                        correctAnswers++;
                        nextQuestion();
                    } else {
                        wrongAnswers++;
                        nextQuestion();
                    }
                }
            });

            answer4.setOnClickListener(new OnClickListener() {
                public void onClick(View arg0) {
                    queries.get(i).setSelectedAnswer(3);
                    if(answer == 3) {
                        correctAnswers++;
                        nextQuestion();
                    } else {
                        wrongAnswers++;
                        nextQuestion();
                    }
                }
            });
        } 
    }

    public int getCorrectAnswers() { return correctAnswers; }
    public int getWrongAnswers() { return wrongAnswers; }

    public ArrayList<Question> getQueries() {
        return queries;
    }

    public void nextQuestion() {
        i++;
        loadQuestion();
    }

    public class Timer extends CountDownTimer {

        public Timer(long starttime, long interval) {
            super(startTime, interval);
        }

        @Override
        public void onFinish() {
            timer.setText("Time's up!");
            timeElapsedView.setText("Time Elapsed: " + String.valueOf(startTime));
        }

        @Override
        public void onTick(long millisUntilFinished) {
            timer.setText("Time remain: " + millisUntilFinished);
            timeElapsed = startTime - millisUntilFinished;
            timeElapsedView.setText("Time Elapsed: " + String.valueOf(timeElapsed));
        }
    }

    public void endQuiz() {
        Intent intent = new Intent(QuestionView.this, Results.class);
        intent.putExtra("correctAnswers", correctAnswers);
        intent.putExtra("wrongAnswers", wrongAnswers);
        intent.putParcelableArrayListExtra("queries", queries);
        startActivity(intent);
    }

} 
```

日志猫

```
12-05 07:32:06.142: E/AndroidRuntime(6264): FATAL EXCEPTION: main
12-05 07:32:06.142: E/AndroidRuntime(6264): java.lang.NullPointerException
12-05 07:32:06.142: E/AndroidRuntime(6264):     at com.example.test.QuestionView$Timer.onTick(QuestionView.java:164)
12-05 07:32:06.142: E/AndroidRuntime(6264):     at android.os.CountDownTimer$1.handleMessage(CountDownTimer.java:124)
12-05 07:32:06.142: E/AndroidRuntime(6264):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-05 07:32:06.142: E/AndroidRuntime(6264):     at android.os.Looper.loop(Looper.java:137)
12-05 07:32:06.142: E/AndroidRuntime(6264):     at android.app.ActivityThread.main(ActivityThread.java:4745)
12-05 07:32:06.142: E/AndroidRuntime(6264):     at java.lang.reflect.Method.invokeNative(Native Method)
12-05 07:32:06.142: E/AndroidRuntime(6264):     at java.lang.reflect.Method.invoke(Method.java:511)
12-05 07:32:06.142: E/AndroidRuntime(6264):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-05 07:32:06.142: E/AndroidRuntime(6264):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-05 07:32:06.142: E/AndroidRuntime(6264):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:48:35.300

这可能不是唯一的问题，但您还没有初始化`timer`或`timeElapsedView`.

你需要这样的东西`onCreate()`：

```
timer = (TextView) findViewById(R.id.timer);
timeElapsedView = (TextView) findViewById(R.id.timeelapsedView); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T19:49:25.357

我看不到您在哪里初始化 TextView

`timeElapsedView = (TextView) findViewById(R.id.idOfYourTextView)`

因此，当您尝试设置文本`finish()`并且`onTick()`没有设置文本时

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T19:49:35.107

计时器从不初始化。所以它是空的，所以你得到一个 NPE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T19:51:51.233

你也应该改变

```
public Timer(long starttime, long interval) {
            super(startTime, interval);
        } 
```

到

```
public Timer(long startTime, long interval) {
            super(startTime, interval);
        } 
```

# java - 即使在应用程序关闭后，Android Webview 也会继续执行 JavaScript

> ID：13807995
> 
> 赞同：2
> 
> 时间：2012-12-10T19:44:22.277
> 
> 标签：java, javascript, android, webview

我有一个 JS 脚本在 webview 中循环运行，理想情况下，当 webview 失焦或父应用程序关闭时，循环应该死掉。

有没有办法做到这一点。到目前为止，所需的结果适用于我的 Google Nexus 7 (4.0)，但不适用于我的 Kindle (2.2.3)