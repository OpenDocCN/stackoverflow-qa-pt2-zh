# StackOverflow 问答 12644000-12644999

# x11 - 如何添加缺少的 RANDR 扩展

> ID：12644001
> 
> 赞同：33
> 
> 时间：2012-09-28T16:37:10.297
> 
> 标签：x11, headless, xvfb, xrandr

我已经在我的无头服务器上设置了 xvfb 服务器，当我运行 DISPLAY=:99 firefox 时，我得到这个异常缺少 RANDR 扩展

他们中的许多人说要从 xorg.conf 文件中禁用一些 xinerna，但在我的情况下没有创建这个文件。

所以我正在寻找如何添加缺少的 RANDR 扩展。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-04-04T17:36:21.070

当我使用 xvfb 通过 selenium 无头运行 Firefox 时，我看到此错误消息。事实证明，这条消息对我来说是一个红鲱鱼。该消息只是一个警告，而不是错误。这不是 Firefox 无法正确启动的原因。

Firefox 没有为我启动的原因是它已更新到不再与我正在使用的 Selenium 驱动程序兼容的版本。我将 selenium 驱动程序升级到最新版本，Firefox 再次正常启动（即使有关于 RANDR 的警告消息）。

Firefox 的新版本通常只与一两个版本的 Selenium 兼容。偶尔发布的 Firefox 没有与**Selenium**兼容的版本。发生这种情况时，可能需要一两个星期才能发布新版本的 Selenium。因此，我现在保留一个已知可与我安装的 Selenium 版本一起使用的 Firefox 版本。除了由我的包管理器保持最新的 Firefox 版本外，我还安装了一个版本`/opt/`（例如`/opt/firefox31/`）。Selenium Java API 为要使用的 Firefox 二进制文件的位置提供一个参数。缺点是旧版本的 Firefox 存在已知的安全漏洞，不应该与不受信任的内容一起使用。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-02T15:34:08.387

首先，Xvfb 不会从 xorg.conf 读取配置。Xvfb 是 KDrive X 服务器的一个变体，并且像该系列的所有成员一样，从命令行获取其配置。

XRandR 和 Xinerama 确实是相互排斥的，但在 Xvfb 的情况下，首先没有 Xinerama。您可以通过至少使用以下命令行选项启动 Xvfb 来启用 XRandR 扩展

```
Xvfb +extension RANDR [further options] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-06T12:43:02.150

**我对Firefox 30** + **Selenium 2.49** + **Ubuntu 15.04**有同样的问题。

它在**Ubuntu 14**上运行良好，但在升级到**15.04**后，我在使用**Xfvb**`RANDR`启动 Firefox 时遇到了同样的警告和问题。

 **添加后`+extension RANDR`它再次工作。

```
$ vim /etc/init/xvfb.conf

#!upstart
description "Xvfb Server as a daemon"

start on filesystem and started networking
stop on shutdown

respawn

env XVFB=/usr/bin/Xvfb
env XVFBARGS=":10 -screen 1 1024x768x24 -ac +extension GLX +extension RANDR +render -noreset"
env PIDFILE=/var/run/xvfb.pid

exec start-stop-daemon --start --quiet --make-pidfile --pidfile $PIDFILE --exec $XVFB -- $XVFBARGS >> /var/log/xvfb.log 2>&1 
```**

# ruby-on-rails - 从 twitter-bootstrap 无线电数据切换中获取值

> ID：12644002
> 
> 赞同：2
> 
> 时间：2012-09-28T16:37:12.760
> 
> 标签：ruby-on-rails, forms, twitter-bootstrap, radio

我正在尝试从提交的 twitter-bootstrap data-toggle="buttons-radio" 中获取值，以及来自评论字段的评论，在 form_for 中使用 erb。我看过这些帖子，但我无法将这些点联系起来，可能是因为我不知道任何 javascript。

[Twitter引导单选按钮不起作用](https://stackoverflow.com/questions/11462434/twitter-bootstrap-radio-buttons-not-working)

[使用 twitter-bootstrap 在 btn-group 中定义值](https://stackoverflow.com/questions/9570368/define-value-in-btn-group-using-twitter-bootstrap)

[使用 Twitter Bootstrap 切换单选按钮，获取表单输入的简洁方式是什么？](https://stackoverflow.com/questions/11475069/with-twitter-bootstrap-toggle-radio-buttons-whats-the-clean-way-to-get-form-in)

```
<%= form_for @approval, :url => approve_path, :method => :put, :html => { :id => "other_version_form" }  do |f| %>
  <fieldset>
      <p>
      <b>Comments:</b><br>
      <%= f.text_area :comments, :size => "200x3" %>
    </p>

    <div class="btn-group" data-toggle="buttons-radio">
      <button type="button" class="btn btn-info" name="approval[version]" id="approval_version" value="<%= "#{@latest}" %>"><%= "#{@latest}" %></button>
      <% @versions.each do |v| %>
        <button type="button" class="btn btn-info" name="approval[version]" id="approval_version" value="<%= "#{v}" %>"><%= "#{v}" %></button>
      <% end %>
    </div>

    <div class="form-actions">
      <%= f.submit nil, :class => 'btn btn-primary' %>
      <%= link_to 'Cancel', approvals_path, :class => 'btn' %>
    </div>

  </fieldset>
<% end %> 
```

表单最终看起来像这样：

```
<form accept-charset="UTF-8" action="/approvals/approve/1394" class="edit_approval" id="other_version_form" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="_method" type="hidden" value="put" /><input name="authenticity_token" type="hidden" value="Q0848ftQQk8S2pWiSpkcozcRalk3qw8yZolZKQBx74s=" /></div>
  <fieldset>
    <p>
      <b>Comments:</b><br>
      <textarea cols="200" id="approval_comments" name="approval[comments]" rows="3"></textarea>
    </p>

    <div class="btn-group" data-toggle="buttons-radio">
      <button type="button" class="btn btn-info" name="approval[version]" id="approval_version" value="3.29.13">3.29.13</button>
      <button type="button" class="btn btn-info" name="approval[version]" id="approval_version" value="3.29.12">3.29.12</button>
      <button type="button" class="btn btn-info" name="approval[version]" id="approval_version" value="3.29.11">3.29.11</button>
      <button type="button" class="btn btn-info" name="approval[version]" id="approval_version" value="3.29.10">3.29.10</button>
      <button type="button" class="btn btn-info" name="approval[version]" id="approval_version" value="3.29.9">3.29.9</button>
    </div>
    <div class="form-actions">
      <input class="btn btn-primary" name="commit" type="submit" value="Update Approval" />
      <a href="/approvals" class="btn">Cancel</a>
    </div>
  </fieldset>
</form> 
```

但是当我提交表单并从控制器检查参数时，我只得到评论，我也需要选择的值来传递：

```
{"utf8"=>"✓", "_method"=>"put", "authenticity_token"=>"Q0848ftQQk8S2pWiSpkcozcRalk3qw8yZolZKQBx74s=", "approval"=>{"comments"=>"here is the deal"}, "commit"=>"Update Approval", "controller"=>"approvals", "action"=>"approve", "id"=>"1394"} 
```

谢谢。

```
===Tried http://dan.doezema.com/2012/03/twitter-bootstrap-radio-button-form-inputs/ ===
===ALL GOOD====
<script type="text/javascript">
jQuery(function($) {
    $('div.btn-group[data-toggle-name=*]').each(function(){
        var group   = $(this);
        var form    = group.parents('form').eq(0);
        var name    = group.attr('data-toggle-name');
        var hidden  = $('input[name="' + name + '"]', form);
        $('button', group).each(function(){
            var button = $(this);
            button.live('click', function(){
                hidden.val($(this).val());
            });
            if(button.val() == hidden.val()) {
                button.addClass('active');
            }
        });
    });
});
</script>
    <div class="btn-group" data-toggle-name="version" data-toggle="buttons-radio" >
      <button type="button" value="<%= "#{@latest}" %>" class="btn btn-info" data-toggle="button"><%= "#{@latest}" %></button>
      <% @versions.each do |v| %>
          <button type="button" value="<%= "#{v}" %>" class="btn btn-info" data-toggle="button"><%= "#{v}" %></button>
      <% end %>
    </div>
    <input type="hidden" name="version" value="0" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:02:59.050

尝试使用`<input type="radio"...`而不是`<button type="button"...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-19T00:42:08.907

我的回答基于[https://stackoverflow.com/a/16214643/1111662](https://stackoverflow.com/a/16214643/1111662)

在您**看来**（我使用 HAML 但如果需要转换为 ERB）

```
.btn-group{data:{toggle: "buttons-radio"}}
  %label.btn
    = f.radio_button :gender, "Male"
    Male
  %label.btn
    = f.radio_button :gender, "Female"
    Female 
```

在您**特定于视图的 javascript**中，例如`pages.js.coffee`（再次，我使用 CoffeeScript，但如果需要，转换为纯 JS JQuery）

```
$ ->
  $('.btn-group label.btn input[type=radio]')
    .hide()
    .filter(':checked').parent('.btn').addClass('active') 
```

JS 用于在视图加载时使按钮看起来“被选中”。它首先隐藏单选按钮，然后通过链接的 JQuery 语法将 Twitter Bootstrap 类“活动”添加到现在隐藏但仍选中的单选按钮。伪类`:checked`允许找到正确的单选按钮。

对于单个检查按钮

**查看 (HAML)**

```
.btn{data:{toggle: "buttons-radio"}}
  = f.check_box :public
  Public 
```

**JS（咖啡脚本）**

```
activateRadioButton = ($element) ->
  hiddenField = $element.children('input[type=hidden]')
  toggleInputValue hiddenField

toggleInputValue = ($input) ->
  switch $input.val()
    when "0" then $input.val('1')
    when "1" then $input.val('0') 

$ ->
  $('.btn input[type=checkbox]')
    .hide()
    .filter(':checked').parent('.btn').addClass('active') 
```

Rails 为检查按钮使用隐藏字段（请参阅[RubyOnRails API](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-check_box)），因此我们需要添加一个 onclick 处理程序来更改隐藏字段

**NB**使用 f.submit 而不是 submit_tag 使其工作

# perl - 如何调用在另一个包中声明的子例程，而不在子例程名称前加上其包名？

> ID：12644016
> 
> 赞同：2
> 
> 时间：2012-09-28T16:38:21.243
> 
> 标签：perl, namespaces, package, subroutine

我不完全确定这是可能的，但我想通过省略包名来简单地缩短我在另一个包中声明的调用的子例程的名称。

例如，我定义了一个模块：

```
package Package1;

use strict;
use warnings;

BEGIN 
{
  require Exporter;
  our @ISA = qw( Exporter );
  our @EXPORT_OK = qw( subroutine1 );
}

sub subroutine1
{
  print "Hello!$/";
}

return 1; 
```

我定义了一个驱动程序应用程序：

```
use strict;
use warnings;

use Package1;

&Package1::subroutine1; 
```

我似乎可以缩短调用的唯一方法`subroutine1`是制作如下别名：

```
*s1 = \&Package1::subroutine1;
&s1; 
```

我肯定是个傻瓜，在这里遗漏了一些东西。有没有更清洁的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T16:45:40.433

改变

```
use Package1; 
```

到

```
use Package1 qw( subroutine1 ); 
```

或改变

```
our @EXPORT_OK = qw( subroutine1 ); 
```

到

```
our @EXPORT = qw( subroutine1 ); 
```

我建议第一次更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T16:45:30.230

您已经在使用`Exporter`，这就是您实现此目的的方式。您需要做的就是将您的驱动程序应用程序代码更改为

```
use Package1 'subroutine1'; 
```

为了告诉`import`提供的方法`Exporter`将您的符号导出到调用包。

# java - 如何在 Eclipse 中调试下的变量或表达式视图中更改 Java 对象的字符串表示

> ID：12644017
> 
> 赞同：0
> 
> 时间：2012-09-28T16:38:24.000
> 
> 标签：java, eclipse

如何更改变量或表达式视图中的字符串表示对象？

![在此处输入图像描述](../Images/2a3384bda616012759bd464e90a3004b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T16:38:24.000

Eclipse 对此有特殊功能，即调用**Detail Formatter**

![在此处输入图像描述](../Images/0508abc52c744d7971653c3cd77dd196.png)

对于**org.w3c.dom.Node**接口需要添加以下代码：

```
if (this == null) return null;  

javax.xml.transform.TransformerFactory tf = javax.xml.transform.TransformerFactory.newInstance();   

javax.xml.transform.Transformer transformer = tf.newTransformer();  

transformer.setOutputProperty(javax.xml.transform.OutputKeys.METHOD, "xml");  
transformer.setOutputProperty(javax.xml.transform.OutputKeys.INDENT, "yes");  
transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "3");  

javax.xml.transform.dom.DOMSource source = new javax.xml.transform.dom.DOMSource(this);  
if (source == null) return "Corrupted XML document: " + this.toString();  

java.io.StringWriter os = new java.io.StringWriter();  
javax.xml.transform.stream.StreamResult result = new   javax.xml.transform.stream.StreamResult(os);  
transformer.transform(source,result);  

return os.toString (); 
```

# iphone - 通过 WLAN 从 iPhone 向 PC 发送 UDP 数据包

> ID：12644019
> 
> 赞同：0
> 
> 时间：2012-09-28T16:38:27.043
> 
> 标签：iphone, objective-c, sockets, udp, send

在阅读了几个教程后，我想出了以下代码：（使用著名的 GCDAsyncUdpSocket 类）

```
NSError *error = nil;

if (![mSocket connectToHost:@"192.168.1.111" onPort:9050 error:&error])
{
    NSLog(@"Error connecting: %@", [error description]);
}

usleep(100000);

NSString* str = @"teststring";
[mSocket sendData:[str dataUsingEncoding:NSUTF8StringEncoding] toHost:@"192.168.1.111" port:9050 withTimeout:-1 tag:1]; 
```

如果我在 iPhone 上运行此代码，一切似乎都很好（没有错误）。但是数据包永远不会到达我的电脑。

在我的 PC 上，一个 UDP 侦听器正在运行（与 Wireshark 一起）。两台设备都在同一个网络上，具有相同的子网和相似的 IP（我的 PC 是 192.168.1.111）。难道我做错了什么？希望是一个简单的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:38:39.423

方法

```
sendData:toHost:port:withTimeout:tag:
sendData:toAddress:withTimeout:tag: 
```

用于使用*未连接*的套接字发送消息，因此您不应调用`connectToHost`. 对于连接的主机，您可以使用

```
sendData:withTimeout:tag: 
```

# jquery - 需要帮助在jquery中实现圆形垂直滚动条

> ID：12644022
> 
> 赞同：1
> 
> 时间：2012-09-28T16:38:33.723
> 
> 标签：jquery, scroll

我有一个分组在表格中的项目列表，比如说 30，我想要做的是以下内容：

*   从底部到顶部自动垂直滚动，无需按钮单击或鼠标事件

这是我使用的代码：

```
 function scrolling(){
            $('#scrollup table').animate(
            { 
                top: '-=10'
            },
            1000,
            'linear',
            function(){

                      if($('#scrollup table  tr:last').offset().top<0){
                     $('#scrollup table  tr:first').remove();   
                    $('#scrollup table  tr:last').after('<tr>'+$('#scrollup table  tr:first').html()+'</tr>');
                }
            }
        );
        }
        $(document).ready(function(){
            setInterval('scrolling()',200)
        }); 
```

你能告诉我我错过了什么或问题出在哪里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:10:30.767

看看这段代码：

```
 function scrolling(){
        var table = $('#scrollup table');
        table.animate(
        { 
            top: '-=5'
        },
        200,
        'linear',
        function(){                
            if($('#scrollup table tr:first').height() <= -parseFloat(table.css("top"))){
                 $('#scrollup table').css("top", 0);
                 $('#scrollup table  tr:last').after($('#scrollup table tr:first').detach());
            }
        }
    );
    }
    $(document).ready(function(){
        setInterval('scrolling()',200)
    });​ 
```

它工作正常（[演示](http://jsfiddle.net/W9Jcm/1/)），但只有当所有行都具有相同的高度时才会好。我正在尝试找到适用于不同高度行的更好解决方案。基本上，您的代码的问题是您总是向上移动表格（使用`.animate`），但删除第一行并将其添加到表格的末尾（因此表格高度不会增加）

**更新** 代码以使用差异高度线。[演示](http://jsfiddle.net/W9Jcm/3/)

# html - 用于 HTML、ASP、INC 文件的 IIS 6.1 处理程序

> ID：12644027
> 
> 赞同：0
> 
> 时间：2012-09-28T16:38:58.683
> 
> 标签：html, asp-classic, include, iis-6, handlers

我有一个旧网站，其中正在使用 .HTML、.ASP 和 .INC 文件。问题是所有页面都有 IIS 未解析的 VBScript 代码，因此作为静态文本写在页面上。我想修复它。所有 .html 页面都包含用于脚本的 .ASP 和 .INC。

目前 IIS 处理程序如下：所有 .htm、.html、.inc 都有 IsapiModule 处理程序以及 ServerSideIncludeModule。这是我怀疑导致问题的原因。因此，现在如果我删除 ServerSideIncludeModule 处理程序并仅保留 IsapiModule，它会正确解析 VBScritpt，但包含 INC 的 HTML 页面不会打开，而是要求保存要下载的文件。我在这里想念什么？这在我的本地主机上运行良好，但不适用于生产。

我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:21:25.583

我们解决了这个问题并发布了解决方案，以便稍后阅读此内容的人可以尝试一下，如果有帮助的话..

我们在该网站的应用程序池中执行了“将启用 32 位应用程序设置为 False”，它解决了这个问题。执行此操作时未更改任何处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T04:55:13.610

客户端和服务器端代码存在问题。HTML 页面只能读取客户端代码，但不能读取服务器端代码。Asp 是一种服务器端语言，服务器可以读取写在 .asp 扩展文件上的 asp 代码。
所以我的建议是在 .asp 文件中尝试你的代码。浏览器将读取 HTML 代码并向您显示 HTML 输出，IIS 将读取服务器端代码（vb-script 代码）

# android - Android圆角布局错误

> ID：12644030
> 
> 赞同：4
> 
> 时间：2012-09-28T16:39:37.780
> 
> 标签：android, android-layout, layout, rounded-corners

我尝试创建具有透明度的非全屏 Activity 并使用此布局 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:id="@+id/containerPageContainer">

    <FrameLayout
        android:id="@+id/informationContainer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center" >

        <LinearLayout
            android:id="@+id/myContainer"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_gravity="center_horizontal"
            android:background="@drawable/rounder_corners"
            android:orientation="vertical"
            android:padding="10dp" >

        </LinearLayout>

    </FrameLayout>

</merge> 
```

对于圆角：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" android:padding="10dp">

    <solid android:color="#FFFFFFFF" />
    <corners android:radius="10dp" />

</shape> 
```

但是收到了这个结果，在角落、底部和顶部有缺陷：

![在此处输入图像描述](../Images/83fd01a0dcd8f7f01ec3c7d3db98f349.png)

请帮我解决它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T08:27:54.933

我找到了解决方案：

1) 在以下位置创建主题 XML `res/values/`：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
  <style name="Theme.Transparent" parent="android:Theme">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:backgroundDimEnabled">false</item>
  </style>
</resources> 
```

2）圆角样式`drawable/rounded_corners.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" android:padding="10dp">

    <solid android:color="#FFFFFFFF" />
    <corners android:radius="10dp" />

</shape> 
```

3）活动XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/qrCodeContainer"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center_horizontal"
        android:background="@drawable/rounder_corners"
        android:orientation="vertical"
        android:padding="15dp"
        android:layout_margin="6dp" >

    </RelativeLayout>

</RelativeLayout> 
```

4)`Activity`在项目清单 XML 中描述：

```
<activity
    android:name=".view.ViewCodeActivity"
    android:label="@string/app_name"
    android:theme="@style/Theme.Transparent">

</activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:21:05.980

如您所见，用形状覆盖 AlertDialog 主题视图并不是一个好主意。
你有教程：
[http ://darshangr.wordpress.com/2011/06/23/creating-a-transparent-view-in-android-login-screen-example/](http://darshangr.wordpress.com/2011/06/23/creating-a-transparent-view-in-android-login-screen-example/)

当然，您需要对其进行修改。而不是白色背景设置圆角的形状。

# java - 在Java中拖动鼠标旋转和缩放

> ID：12644031
> 
> 赞同：6
> 
> 时间：2012-09-28T16:39:39.150
> 
> 标签：java, rotation, geometry, scale, affinetransform

我正在尝试为 java 中的几何对象创建一个 Illustrator 样式选择框。

![选择框](../Images/62392a4dcb3760bf4c2890c0ca0a0b70.png)

When the object is selected a border is drawn and it's possible to drag the little rectangles to re-size the object. 我还希望能够通过拖动来旋转框。

到目前为止，我可以缩放盒子并且可以旋转盒子，但我不能同时做这两个。想象一下，盒子呈 45 度角。当您拖动角以沿 x 方向放大框时，由于角度的原因，这将增加框的宽度和高度。

我可以通过使用它来工作：

```
 dx = dx*cos(theta) - dy*sin(theta);
    dy = dy*cos(theta) + dx*sin(theta); 
```

但这仅在枢轴点位于左上角时才有效。我希望能够移动枢轴然后缩放和旋转。这个问题以前应该已经解决过很多次了。有没有办法可以使用仿射变换将鼠标绘制转换为旋转对象的坐标空间？我宁愿不必挖掘三角函数！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T00:50:25.253

你很幸运——Java2D 提供了一个[AffineTransform](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/geom/AffineTransform.html)类，它应该可以满足你的所有需求。

它可以处理旋转、缩放、剪切、翻转、平移等。

有一个[连接](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/geom/AffineTransform.html#concatenate%28java.awt.geom.AffineTransform%29)函数应该使您能够组合多个变换（正如 moonwave99 指出的那样，您需要以正确的顺序执行它们，因为仿射变换的组合不是可交换的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T17:25:24.177

尽管仍然无法移动枢轴点，但我自己几乎已经找到了答案。如果有帮助，这里是使用 JavaFX 2.2 的工作示例的完整代码。您可以通过拖动四角来缩放和旋转框：

```
public class SelectionBoxDemo extends Application {

public static void main(String[] args) {
    launch(args);
}

@Override
public void start(Stage arg0) throws Exception {
    Stage stage = new Stage ();

    // Root is the base pane in which we put everything
    Pane root = new Pane ();

    SelectionBox sb = new SelectionBox ();

    sb.setSize(100, 100);

    root.getChildren().add(sb);

    // Create a new scene
    Scene scene = new Scene (root);

    stage.setScene(scene);

    stage.setMinHeight(500);
    stage.setMinWidth(500);

    stage.show();
}

public static class SelectionBox extends Region {

    private enum Position {
        TopLeft, Top, TopRight, Right, BottomRight, Bottom, BottomLeft, Left; 
    }

    // Create the corners
    private Rectangle tr, tl, br, bl;

    // Create selection lines
    final private Line top, right, bottom, left;

    // Size of corner boxes
    private double cornerSize = 10;

    // Create a new rotate transform
    private final Rotate rotate = new Rotate();
    {
        getTransforms().add(rotate);
        rotate.setPivotX(cornerSize);
        rotate.setPivotY(cornerSize);
    }

    // Circle which is dragged to rotate the box
    private final Circle rotateCircle;

    // Variables to store mouse x and y
    private double x, y;

    public SelectionBox () {

        // Create the circle which can be dragged to rotate the box
        rotateCircle = new Circle(5);
        rotateCircle.setFill(Color.PINK);
        rotateCircle.setStroke(Color.rgb(0,0,0, 0.75));

        // Make it draggable
        rotateCircle.addEventHandler(MouseEvent.MOUSE_PRESSED, new EventHandler<MouseEvent>() {
            @Override public void handle(MouseEvent event) {
                setMouse(event.getSceneX(), event.getSceneY());
            }
        });

        // When it's dragged rotate the box
        rotateCircle.addEventHandler(MouseEvent.MOUSE_DRAGGED, new EventHandler<MouseEvent>() {
            @Override public void handle(MouseEvent event) {

                // Used to get the scene position of the corner of the box
                Transform localToScene = getLocalToSceneTransform();

                double x1 = getMouseX();
                double y1 = getMouseY();

                double x2 = event.getSceneX();
                double y2 = event.getSceneY();

                double px = rotate.getPivotX() + localToScene.getTx();
                double py = rotate.getPivotY() + localToScene.getTy();

                // Work out the angle rotated
                double th1 = clockAngle(x1, y1, px, py);
                double th2 = clockAngle(x2, y2, px, py);

                double angle = rotate.getAngle();

                angle += th2 - th1;

                // Rotate the rectangle
                rotate.setAngle(angle);

                setMouse(event.getSceneX(), event.getSceneY());
            }
        });

        // Build the corners
        tr = buildCorner (0,0, Position.TopRight);
        tl = buildCorner (0,0, Position.TopLeft);
        br = buildCorner (0,0, Position.BottomRight);
        bl = buildCorner (0,0, Position.BottomLeft);

        // Build the lines
        top = buildLine(0, 100, -100, 0);
        bottom = buildLine(0, 0, 0, 0);
        left = buildLine(0, 0, 0, 0);
        right = buildLine(0, 0, 0, 0);

        getChildren().addAll(top, bottom, left, right, tr, tl, br, bl, rotateCircle);

    }

    // Return the angle from 0 - 360 degrees
    public double clockAngle (double x, double y, double px, double py) {
        double dx = x - px;
        double dy = y - py;

        double angle = Math.abs(Math.toDegrees(Math.atan2(dy, dx)));

        if(dy < 0) {
            angle = 360 - angle;
        }

        return angle;
    }

    // Set the size of the selection box
    public void setSize (double width, double height) {
        tl.setX(0);
        tl.setY(0);

        tr.setX(width + cornerSize);
        tr.setY(0);

        bl.setX(0);
        bl.setY(height + cornerSize);

        br.setX(width + cornerSize);
        br.setY(height + cornerSize);

        setLine(top, cornerSize, cornerSize, width + cornerSize, cornerSize);
        setLine(bottom, cornerSize, height + cornerSize, width + cornerSize, height + cornerSize);
        setLine(right, width + cornerSize, cornerSize, width + cornerSize, height + cornerSize);
        setLine(left, cornerSize, cornerSize, cornerSize, height + cornerSize);

        top.setCursor(Cursor.V_RESIZE);
        bottom.setCursor(Cursor.V_RESIZE);
        left.setCursor(Cursor.H_RESIZE);
        right.setCursor(Cursor.H_RESIZE);

        tr.setCursor(Cursor.CROSSHAIR);
        tl.setCursor(Cursor.CROSSHAIR);
        br.setCursor(Cursor.CROSSHAIR);
        bl.setCursor(Cursor.CROSSHAIR);

        rotateCircle.setTranslateX(width + 2 * cornerSize + rotateCircle.getRadius());
        rotateCircle.setTranslateY(height + 2 * cornerSize + rotateCircle.getRadius());

    }

    // Set the start and end points of a line
    private void setLine (Line l, double x1, double y1, double x2, double y2) {
        l.setStartX(x1);
        l.setStartY(y1);
        l.setEndX(x2);
        l.setEndY(y2);
    }

    // Save mouse coordinates
    private void setMouse(double x, double y) {
        this.x = x;
        this.y = y;
    }

    private double getMouseX () {
        return x;
    }

    private double getMouseY () {
        return y;
    }

    // Selection box width
    public double w () {
        return Math.abs(bottom.getEndX() - bottom.getStartX());
    }

    // Selection box height
    public double h () {
        return Math.abs(right.getEndY() - right.getStartY());
    }

    // Build a corner of the rectangle
    private Rectangle buildCorner (double x, double y, final Position pos) {

        // Create the rectangle
        Rectangle r = new Rectangle();
        r.setX(x);
        r.setY(y);
        r.setWidth(cornerSize);
        r.setHeight(cornerSize);
        r.setStroke(Color.rgb(0,0,0,0.75));
        r.setFill(Color.rgb(0, 0, 0, 0.25));
        r.setStrokeWidth(1);

        r.setStrokeType(StrokeType.INSIDE);

        // Make it draggable
        r.addEventHandler(MouseEvent.MOUSE_PRESSED, new EventHandler<MouseEvent>() {
            @Override public void handle(MouseEvent event) {
                setMouse(event.getSceneX(), event.getSceneY());
            }
        });

        r.addEventHandler(MouseEvent.MOUSE_DRAGGED, new EventHandler<MouseEvent>() {
            @Override public void handle(MouseEvent event) {

                // Get the mouse deltas
                double dx = event.getSceneX() - getMouseX();
                double dy = event.getSceneY() - getMouseY();

                // Set save the current mouse value
                setMouse(event.getSceneX(), event.getSceneY());

                // Get the rotation angle in radians
                double tau = - Math.toRadians(rotate.getAngle());

                // Create variables for the sin and cosine
                double sinTau = Math.sin(tau);
                double cosTau = Math.cos(tau);

                // Perform a rotation on dx and dy to the object co-ordinate frame
                double dx_ = dx * cosTau - dy * sinTau;
                double dy_ = dy * cosTau + dx * sinTau;

                // Create a variable for the change in height of the box
                double dh = h();

                // Work out the new positions for the resize corners
                if(pos == Position.TopLeft) {
                    // Set the size based on the transformed dx and dy values
                    setSize(w() - dx_, h() - dy_);

                    // Move the shape 
                    setTranslateX(getTranslateX() + dx); 
                    setTranslateY(getTranslateY() + dy);
                }
                else if (pos == Position.TopRight) {

                    // This comes down to geometry - you need to know the 
                    // amount the height of the shape has increased
                    setSize(w() + dx_ , h() - dy_);

                    // Work out the delta height - that is then used to work out 
                    // the correct translations
                    dh = h() - dh;

                    setTranslateX (getTranslateX() - dh * sinTau);
                    setTranslateY (getTranslateY() - dh * cosTau);
                }
                else if (pos == Position.BottomRight) {
                    setSize(w() + dx_ , h() + dy_ );
                }
                else if (pos == Position.BottomLeft) {

                    setSize(w() - dx_, h() + dy_);

                    dh = h() - dh;

                    setTranslateX(getTranslateX() + dx - dh * sinTau );
                    setTranslateY(getTranslateY() + dy - dh * cosTau);
                }
            }
        });

        return r;
    }

    private Line buildLine (double x1, double y1, double x2, double y2) {
        Line l = new Line (x1, y1, x2, y2);

        l.setStroke(Color.rgb(0, 0, 0, 0.75));
        l.setStrokeWidth (0.5);

        return l;
    }

} 
```

}

# jsp - tomcat 6上的旧版jsp，生成的源上的jasper编译器错误

> ID：12644032
> 
> 赞同：0
> 
> 时间：2012-09-28T16:39:42.997
> 
> 标签：jsp, tomcat, centos

我正在迁移一个`spring`mvc 应用程序，该应用程序在 jsp 文件中包含大量 java 代码，当我在`tomcat 6.0.24`下运行它时`CentOS 5.x`，出现 jsp 编译错误。我在 Windows XP 下开发，相同的应用程序在 tomcat 上运行良好，`6.0.34`并且`jetty 8.`

我尝试使用 compilerSourceVM 和 compilerTargetVM 没有成功。

**catalina.out**

```
An error occurred at line: 18 in the generated java file
The type Collection is not generic; it cannot be parameterized with arguments <? extends E> 
```

**堆栈跟踪：**

```
 at org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:92)
    at org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330)
    at org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:439)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:334)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:312)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:299)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:589)
    at org.apache.jasper.servlet.JspServletWrapper.loadTagFile(JspServletWrapper.java:215)
    at org.apache.jasper.compiler.TagFileProcessor.loadTagFile(TagFileProcessor.java:625)
    at org.apache.jasper.compiler.TagFileProcessor.access$0(TagFileProcessor.java:564)
    at org.apache.jasper.compiler.TagFileProcessor$TagFileLoaderVisitor.visit(TagFileProcessor.java:686)
    at org.apache.jasper.compiler.Node$CustomTag.accept(Node.java:1530)
    at org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2361)
    at org.apache.jasper.compiler.Node$Visitor.visitBody(Node.java:2411)
    at org.apache.jasper.compiler.Node$Visitor.visit(Node.java:2417)
    at org.apache.jasper.compiler.Node$Root.accept(Node.java:495)
    at org.apache.jasper.compiler.Node$Nodes.visit(Node.java:2361)
    at org.apache.jasper.compiler.TagFileProcessor.loadTagFiles(TagFileProcessor.java:703) 
```

# portlet - 来自 Portlet 的门户 URL

> ID：12644033
> 
> 赞同：0
> 
> 时间：2012-09-28T16:39:43.597
> 
> 标签：portlet, websphere-portal, jsr286

是否可以使用 Portlet 2.0 API 从 Portlet获取 Portal 基本 URL（如[http://www.thisismyportal.com ）？](http://www.thisismyportal.com)

现在我打算手动构建它并连接`PorletRequest.getServerName()`,`PortletRequest.getServerPort()`和`PortletRequest.getContextPath()`; 但它似乎有点笨拙（而且没有`PortletRequest.getProtocol()`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:54:48.780

虽然笨拙，但它是构建 URL 的最安全方法；虽然没有`PortletRequest.getProtocol()`方法，但您可以使用该方法得出协议`PortletRequest.isSecure()`。

出于几个原因，我建议*不要*对基本 URL 使用外部配置。

首先，这将是您跨环境（测试、集成、生产等）维护的另一个配置项。几乎没有理由在配置中保留使用当前请求完全可重现的东西。

其次，在某些情况下，可能无法将特定 URL 指定为门户的“基本 URL”。例如，门户网站服务器与多个主机或多个主机别名相关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T09:32:47.813

我们在 Resource Environment Provider 中有这些配置属性，目的是生成外部 URL，以便在电子邮件中发送它们。这是一个特定的解决方案，对我们来说不是问题，因为我们还在那里存储了其他属性，所以我们知道它将在运行时可用。我不知道这是否适合您的需求。这取决于你的场景。另外，我们只在登录时使用 https，所以我们总是生成 http URL。

希望这可以帮助。

# ios - 通过 sqlite 查询 Core Data 数据库是否安全

> ID：12644034
> 
> 赞同：0
> 
> 时间：2012-09-28T16:39:45.813
> 
> 标签：ios, sqlite, core-data

可以使用 sqlite API 访问核心数据正在使用的数据库吗？我要查询的数据没有更新，它相对静态。但我需要使用联接，而不能使用 Core Data 来做到这一点。

是否安全或这样做有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:44:11.800

我只会在应用程序之外进行测试。您永远不知道架构何时会更改，这可能会破坏您的应用程序。

# java - 我必须在哪个目录中放置 testng.xml？

> ID：12644035
> 
> 赞同：8
> 
> 时间：2012-09-28T16:39:47.153
> 
> 标签：java, maven, testng

我正在做一个项目，我必须在其中执行自动化测试。为此，我正在使用 Testng 框架。

我`testng.xml`作为输入文件提供，某些方法会使用它，但是现在我的阅读器方法无法检测到该文件。

我在哪个目录中放置我的`testng.xml`文件.....以及是否有我必须制作的任何 Maven 规范`pom.xml`来检测该`testng.xml`文件是否存在并且他们必须阅读它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T20:49:48.417

> 我在哪个目录中放置我的 testng.xml 文件.....

我怀疑该`testng.xml`文件应该放在类路径的顶部。如果您使用的是 maven，那么它就是一个好地方`src/test/resources/testng.xml`。看这个例子：

> [如何在 Maven 中从 pom.xml 调用 testng.xml 文件](https://stackoverflow.com/questions/10533151/how-can-i-call-testng-xml-file-from-pom-xml-in-maven)
> 
> 我必须在 pom.xml 中制定任何 maven 规范来检测 testng.xml 文件是否存在并且他们必须阅读它。

我对此不是 100% 确定的。在查看上面的示例时，建议使用以下内容：

```
<plugin>
    <groupId>org.apache.maven.plugin</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.12</version>
    <configuration>
       <suiteXmlFiles>
           <suiteXmlFile>src/test/resources/testng.xml</suiteXmlFile>
       </suiteXmlFiles>
    </configuration> 
</plugin> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T01:26:31.047

只要在 maven-surefire-plugin 下的 maven pom.xml 中指定路径，放在哪里都没有关系

# xcode - 带有删除按钮的标签

> ID：12644036
> 
> 赞同：1
> 
> 时间：2012-09-28T16:39:50.567
> 
> 标签：xcode, cocoa-touch, uilabel

我有一个动态添加到视图中的 UIlabel。

我想要的是一个小的删除按钮（我有自定义图像）添加到标签的右上角，单击时应该基本上删除标签。

有人可以让我开始使用什么样的技巧来实现这一目标吗？事实上，我愿意使用任何其他控件代替标签。

提前非常感谢，普拉萨德。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:59:06.473

只需制作一个按钮，然后在按下按钮时：

```
- (IBAction)deleteLabelPressed:(id)sender {

[self.labelText setHidden:YES];

} 
```

# mongodb - GridFS 有版本限制吗？

> ID：12644044
> 
> 赞同：0
> 
> 时间：2012-09-28T16:40:16.793
> 
> 标签：mongodb, versioning, gridfs

在 mongodb GridFS 中，当您插入与现有文件同名的文件时，旧文件将成为新文件的先前版本。

我想知道我可以多次这样做并且有限制吗？

例如，我有一个文件`file.txt`，然后我插入另一个`file.txt`，现在我有两个版本的`file.txt`. 我现在插入第三个`file.txt`. 我现在有三个版本的文件吗？还是只有两个？我可以再插入`file.txt`和保留所有以前的版本多少次？

最后，我如何访问这些以前的版本或覆盖它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T18:48:52.357

版本数量没有内置限制，但可能是特定驱动程序可能会设置一些限制。

至于获得特定版本，您是否有机会使用特定的驱动程序？例如，我相信 pyMongo 有一个 get_version() api，它允许您指定文件的特定版本。

至于替换文件，如果你在 shell 中运行 mongofiles 实用程序，你可以指定 -r 来替换一个文档——比如 mongofiles -r put file.txt——这会让你只剩下这个版本的 file.txt . 特定驱动程序可能有不同的实现。

问候，

凯

# mysql - mysql从今天的过去/未来日期中选择最接近的结果

> ID：12644045
> 
> 赞同：1
> 
> 时间：2012-09-28T16:40:21.553
> 
> 标签：mysql

我确信这是一项常见的任务，尽管我看过的所有示例都不能帮助我解决这个问题。

我有 2 张桌子：

> 1.  `events`
> 2.  `schedules`带有事件的外键。`schedule_datetime_from`和_`schedule_datetime_until`

问：选择所有事件时，我还将如何根据今天的日期获取/加入第一个最接近的时间表？例如，只返回最相关的时间表。

注意：每个事件可能有多个时间表。时间表也可能是过去的。

例如`e.schedule_datetime_from >= NOW() OR schedule_datetime_until > NOW()`，将只返回未来的时间表，但我如何也返回过去的时间表。还是我需要使用 ORDER BY + LIMIT 1 来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T16:54:45.427

```
select e.*, s.*
from 
    events e
    inner join 
    schedules s on e.id = s.event_id
order by 
    abs(unix_timestamp(schedule_datetime_from) - unix_timestamp(now())))
limit 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-09T01:37:23.910

这对我有用：

SELECT * FROM table WHERE DATE(date_column) BETWEEN DATE(CURDATE()) AND DATE(CURDATE()+7);

这会给你一个星期的提醒！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T16:44:25.000

好吧，如果您想在日期之间选择一组事件，您可以使用

```
SELECT * FROM events WHERE date BETWEEN 'mm-dd-yyyy' AND 'mm-dd-yyyy' 
```

如果您想选择最近的日期，您可以添加

```
ORDER BY date DESC LIMIT 1 
```

# c# - 为什么我的 Tooltip 不显示其提示？

> ID：12644050
> 
> 赞同：1
> 
> 时间：2012-09-28T16:40:37.790
> 
> 标签：c#, winforms, tooltip, linklabel

我有一个 ShowAlways 属性设置为 true 的工具提示。

在我希望显示工具提示的控件上（在本例中为 LinkLabels），我看到有一个“ToolTip on `<name of my Tooltip`>”属性，它需要一个字符串。

但是，我的工具提示在 5 个 LinkLabel 之间共享，并且应该根据悬停在哪一个上而有所不同。

我确实有一个有效的共享点击事件：

```
private void linkLabelPlatypus1_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
{
    int Platypus = 1;
    LinkLabel ll = null;
    if (sender is LinkLabel)
    {
        ll = sender as LinkLabel;
    }
    if (null != ll)
    {
        if (ll.Name == linkLabelPlatypus2.Name)
        {
            Platypus = 2;
        } else if (ll.Name == linkLabelPlatypus3.Name)
        {
            Platypus = 3;
        } else if (ll.Name == linkLabelPlatypus4.Name)
        {
            Platypus = 4;
        } else if (ll.Name == linkLabelPlatypus5.Name)
        {
            Platypus = 5;
        }
        toolTipPlatypi.SetToolTip(ll, DuckbillData.GetPlatypusDataForToolTip(Platypus)); 
    }
} 
```

...但我希望工具提示也显示在悬停时，并且不需要用户单击标签。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T17:03:33.170

您只需要设置一次工具提示：

```
public Form1()
{
    InitializeComponent();

    toolTip1.SetToolTip(linkLabel1, "foo");
    toolTip1.SetToolTip(linkLabel2, "bar");
} 
```

完毕。

`MouseHover`在or处理程序中执行此`MouseEnter`操作将在每次事件触发时一遍又一遍地调用此函数。它会起作用，但它是不必要的复杂。

您只需要在表单上提供一个 ToolTip 即可为任意数量的组件提供提示，并且它可以同时连续地提供所有提示（即：您不必每次都更改或设置它）。每个组件只能有一个提示，但您可以在整个程序中随时更改它。 `ShowAlways`不一定是真的 - 它用于在不活动的表单上显示工具提示（即：将鼠标悬停在具有焦点的窗口后面的非活动窗口上，等等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T16:53:31.667

您应该为鼠标悬停编写一个事件处理程序，并在其中包含工具提示显示逻辑。

```
 private void Label1_MouseHover(object sender, System.EventArgs e) 
    {
       //display logic
    } 
```

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mousehover.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mousehover.aspx)

# ruby-on-rails - 如何在 Rails 夹具中使用二进制数据？

> ID：12644057
> 
> 赞同：2
> 
> 时间：2012-09-28T16:40:54.567
> 
> 标签：ruby-on-rails, binary, fixtures

假设您想测试您的全新`Picture`模型。可能您想测试您的自动转换是否有效。您如何将测试数据输入到您的夹具中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T16:40:54.567

为此`file_fixtures_extension.rb`，请在您的应用程序文件夹中创建一个文件，`config/initializers`其中包含以下代码：

```
require 'active_record/fixtures'

module FileFixtureExtension
  def file(file_name)
    File::open(Rails.root.join('test/fixtures/', file_name), 'rb') do |f|
      "!!binary \"#{Base64.strict_encode64(f.read)}\""
    end
  end
end

Fixture.extend FileFixtureExtension 
```

现在，您可以将文件中的二进制数据包含`test/fixtures/pictures/my-birthday.jpg`在您的设备中，如下所示：

```
first_picture:
  name: My Birthday
  filename: my-birthday.jpg
  content_type: image/jpeg
  file: <%=Fixture::file 'pictures/my-birthday.jpg' %> 
```

要进一步阅读 YAML 中的二进制数据，请查看[YAML 文档](http://yaml.org/type/binary.html "YAML™ 版本 1.1 的二进制数据语言独立类型")。

# css - 如何在 jQuery Mobile CSS 中拉伸背景图像以适应所有屏幕尺寸

> ID：12644059
> 
> 赞同：1
> 
> 时间：2012-09-28T16:41:01.653
> 
> 标签：css, jquery-mobile

我有一个网站，可以为手机和平板电脑提供不同的外形尺寸。我有一个我想要的主页背景图像，并希望该图像拉伸（可能扭曲）以适应可用区域。

做这个的最好方式是什么？

是否有一个很好的替代方案可以合理地适应完全不同的外形尺寸（即平板电脑/手机）而不会扭曲图像？

================================

# 更新

我利用了这段代码。

```
.transparent-background {
    background: transparent;
}

.background-image {
  background: url(app-background.jpg);
  background-repeat:none;
  background-position:center center;
  background-attachment:scroll;
  background-size:100% 100%;    
} 
```

我将透明背景作为一个类添加到 Page 和 Content 元素中，然后将背景图像类添加到页面元素中，这似乎可以解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:49:52.913

我想说你可以通过更改/修改 CSS 来做到这一点。

```
img {
  max-width: 100%;
} 
```

尝试更多地阅读这篇文章以获得更好的理解。

[http://www.alistapart.com/articles/fluid-images/](http://www.alistapart.com/articles/fluid-images/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T16:50:46.440

要回答您的第二个问题，您可以使用 @media 规则为不同的屏幕尺寸/设备指定不同的样式。例如：

```
@media all and (min-width: 750px) {

/*Any styles in here will only be applied to browsers(screens, etc) with a width > 750px */

} 
```

因此，您可以通过覆盖当前样式来根据屏幕大小拥有不同的背景图像/布局。即，您可能将更多高清图像设置为 div、图标等的背景以用于更大的屏幕。如果那有意义的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T16:43:49.840

你试过 CSS3 属性 background-size:cover;

[http://www.css3.info/preview/background-size/](http://www.css3.info/preview/background-size/)

> 如果使用了cover关键字，则对背景图片进行缩放，再次保留图片的原始比例/纵横比，这次要尽可能大，使背景定位区域完全被背景图片覆盖，即。图像宽度或高度都等于或超过背景定位区域。如此，再次取决于背景图像的比例是否与背景定位区域的比例匹配，背景图像的某些部分可能不在背景定位区域内。

它不兼容所有浏览器，但对设备应该没问题 -[兼容性](http://caniuse.com/#feat=background-img-opts)

# c++ - 函数返回期间出现奇怪的分段错误

> ID：12644062
> 
> 赞同：2
> 
> 时间：2012-09-28T16:41:14.750
> 
> 标签：c++, segmentation-fault

我在两台不同的机器上运行一个程序。一方面，它工作正常，没有问题。另一方面，它会导致分段错误。通过调试，我已经弄清楚故障发生在哪里，但我无法找出它发生的逻辑原因。

在一个函数中，我有以下代码：

```
pass_particles(particle_grid, particle_properties, input_data, coll_eros_track, collision_number_part, world, grid_rank_lookup, grid_locations);
cout<<"done passing particles"<<endl; 
```

函数 pass_particles 看起来像：

```
void pass_particles(map<int,map<int,Particle> > & particle_grid, std::vector<Particle_props> & particle_properties, User_input& input_data, data_tracking & coll_eros_track, vector<int> & collision_number_part, mpi::communicator & world, std::map<int,int> & grid_rank_lookup, map<int,std::vector<double> > & grid_locations)
{
     //cout<<"east-west"<<endl;
    //east-west exchange (x direction)
    map<int, vector<Particle> > particles_to_be_sent_east;
    map<int, vector<Particle> > particles_to_be_sent_west;
    vector<Particle> particles_received_east;
    vector<Particle> particles_received_west;
    int counter_x_sent=0;
    int counter_x_received=0;
    for(grid_iter=particle_grid.begin();grid_iter!=particle_grid.end();grid_iter++)
    {
        map<int,Particle>::iterator part_iter;
        for (part_iter=grid_iter->second.begin();part_iter!=grid_iter->second.end();)
        {
            if (particle_properties[part_iter->second.global_part_num()].particle_in_box()[grid_iter->first])
            {
                //decide if a particle has left the box...need to consider whether particle was already outside the box 
                if ((part_iter->second.position().x()<(grid_locations[grid_iter->first][0]) && part_iter->second.position().x()>(grid_locations[grid_iter->first-input_data.z_numboxes()][0]))
                    || (input_data.periodic_walls_x() && (grid_iter->first-floor(grid_iter->first/(input_data.xz_numboxes()))*input_data.xz_numboxes()<input_data.z_numboxes()) && (part_iter->second.position().x()>(grid_locations[input_data.total_boxes()-1][0]))))
                {
                    particles_to_be_sent_west[grid_iter->first].push_back(part_iter->second);
                    particle_properties[particle_grid[grid_iter->first][part_iter->first].global_part_num()].particle_in_box()[grid_iter->first]=false;
                    counter_sent++;
                    counter_x_sent++;
                }

                else if ((part_iter->second.position().x()>(grid_locations[grid_iter->first][1]) && part_iter->second.position().x()<(grid_locations[grid_iter->first+input_data.z_numboxes()][1]))
                    || (input_data.periodic_walls_x() && (grid_iter->first-floor(grid_iter->first/(input_data.xz_numboxes()))*input_data.xz_numboxes())>input_data.xz_numboxes()-input_data.z_numboxes()-1) && (part_iter->second.position().x()<(grid_locations[0][1])))
                {
                    particles_to_be_sent_east[grid_iter->first].push_back(part_iter->second);
                    particle_properties[particle_grid[grid_iter->first][part_iter->first].global_part_num()].particle_in_box()[grid_iter->first]=false;
                    counter_sent++;
                    counter_x_sent++;
                }

                //select particles in overlap areas to send to neighboring cells
                else if ((part_iter->second.position().x()>(grid_locations[grid_iter->first][0]) && part_iter->second.position().x()<(grid_locations[grid_iter->first][0]+input_data.diam_large())))
                {
                    particles_to_be_sent_west[grid_iter->first].push_back(part_iter->second);
                    counter_sent++;
                    counter_x_sent++;
                }

                else if ((part_iter->second.position().x()<(grid_locations[grid_iter->first][1]) && part_iter->second.position().x()>(grid_locations[grid_iter->first][1]-input_data.diam_large())))
                {
                    particles_to_be_sent_east[grid_iter->first].push_back(part_iter->second);
                    counter_sent++;
                    counter_x_sent++;
                }
                ++part_iter;
            }
            else if (particles_received_current[grid_iter->first].find(part_iter->first)!=particles_received_current[grid_iter->first].end())
            {
                if ((part_iter->second.position().x()>(grid_locations[grid_iter->first][0]) && part_iter->second.position().x()<(grid_locations[grid_iter->first][0]+input_data.diam_large())))
                {
                    particles_to_be_sent_west[grid_iter->first].push_back(part_iter->second);
                    counter_sent++;
                    counter_x_sent++;
                }

                else if ((part_iter->second.position().x()<(grid_locations[grid_iter->first][1]) && part_iter->second.position().x()>(grid_locations[grid_iter->first][1]-input_data.diam_large())))
                {
                    particles_to_be_sent_east[grid_iter->first].push_back(part_iter->second);
                    counter_sent++;
                    counter_x_sent++;
                }
                part_iter++;
            }
            else
            {
                particle_grid[grid_iter->first].erase(part_iter++);
                counter_removed++;
            }
        }
    }

    world.barrier();

    mpi::request reqs_x_send[particles_to_be_sent_west.size()+particles_to_be_sent_east.size()];
    vector<multimap<int,int> > box_sent_x_info;
    box_sent_x_info.resize(world.size());
    vector<multimap<int,int> > box_received_x_info;
    box_received_x_info.resize(world.size());
    int counter_x_reqs=0;
    //send particles
    for(grid_iter_vec=particles_to_be_sent_west.begin();grid_iter_vec!=particles_to_be_sent_west.end();grid_iter_vec++)
    {
        if (grid_iter_vec->second.size()!=0)
        {
            //send a particle. 50 will be "west" tag
            if (input_data.periodic_walls_x() && (grid_iter_vec->first-floor(grid_iter_vec->first/(input_data.xz_numboxes()))*input_data.xz_numboxes()<input_data.z_numboxes()))
            {
                reqs_x_send[counter_x_reqs++]=world.isend(grid_rank_lookup[grid_iter_vec->first + input_data.z_numboxes()*(input_data.x_numboxes()-1)], grid_iter_vec->first + input_data.z_numboxes()*(input_data.x_numboxes()-1), particles_to_be_sent_west[grid_iter_vec->first]);
                box_sent_x_info[grid_rank_lookup[grid_iter_vec->first + input_data.z_numboxes()*(input_data.x_numboxes()-1)]].insert(pair<int,int>(world.rank(), grid_iter_vec->first + input_data.z_numboxes()*(input_data.x_numboxes()-1)));
            }
            else if (!(grid_iter_vec->first-floor(grid_iter_vec->first/(input_data.xz_numboxes()))*input_data.xz_numboxes()<input_data.z_numboxes()))
            {
                reqs_x_send[counter_x_reqs++]=world.isend(grid_rank_lookup[grid_iter_vec->first - input_data.z_numboxes()], grid_iter_vec->first - input_data.z_numboxes(), particles_to_be_sent_west[grid_iter_vec->first]);
                box_sent_x_info[grid_rank_lookup[grid_iter_vec->first - input_data.z_numboxes()]].insert(pair<int,int>(world.rank(),grid_iter_vec->first - input_data.z_numboxes()));
            }
        }
    }

    for(grid_iter_vec=particles_to_be_sent_east.begin();grid_iter_vec!=particles_to_be_sent_east.end();grid_iter_vec++)
    {
        if (grid_iter_vec->second.size()!=0)
        {
            //send a particle. 60 will be "east" tag
            if (input_data.periodic_walls_x() && (grid_iter_vec->first-floor(grid_iter_vec->first/(input_data.xz_numboxes())*input_data.xz_numboxes())>input_data.xz_numboxes()-input_data.z_numboxes()-1))
            {
                reqs_x_send[counter_x_reqs++]=world.isend(grid_rank_lookup[grid_iter_vec->first - input_data.z_numboxes()*(input_data.x_numboxes()-1)], 2000000000-(grid_iter_vec->first - input_data.z_numboxes()*(input_data.x_numboxes()-1)), particles_to_be_sent_east[grid_iter_vec->first]);
                box_sent_x_info[grid_rank_lookup[grid_iter_vec->first - input_data.z_numboxes()*(input_data.x_numboxes()-1)]].insert(pair<int,int>(world.rank(),2000000000-(grid_iter_vec->first - input_data.z_numboxes()*(input_data.x_numboxes()-1))));
            }
            else if (!(grid_iter_vec->first-floor(grid_iter_vec->first/(input_data.xz_numboxes())*input_data.xz_numboxes())>input_data.xz_numboxes()-input_data.z_numboxes()-1))
            {
                reqs_x_send[counter_x_reqs++]=world.isend(grid_rank_lookup[grid_iter_vec->first + input_data.z_numboxes()], 2000000000-(grid_iter_vec->first + input_data.z_numboxes()), particles_to_be_sent_east[grid_iter_vec->first]);
                box_sent_x_info[grid_rank_lookup[grid_iter_vec->first + input_data.z_numboxes()]].insert(pair<int,int>(world.rank(), 2000000000-(grid_iter_vec->first + input_data.z_numboxes())));
            }
        }
    }

    counter=0;
    for (int i=0;i<world.size();i++)
    {
        //if (world.rank()!=i)
        //{
            reqs[counter++]=world.isend(i,1000000000,box_sent_x_info[i]);
            reqs[counter++]=world.irecv(i,1000000000,box_received_x_info[i]);
        //}
    }

    mpi::wait_all(reqs, reqs + world.size()*2);

    //receive particles
    //receive west particles
    for (int j=0;j<world.size();j++)
    {
        multimap<int,int>::iterator received_info_iter;
        for (received_info_iter=box_received_x_info[j].begin();received_info_iter!=box_received_x_info[j].end();received_info_iter++)
        {
            //receive the message
            if (received_info_iter->second<1000000000)
            {
                //receive the message
                world.recv(received_info_iter->first,received_info_iter->second,particles_received_west);
                //loop through all the received particles and add them to the particle_grid for this processor
                for (unsigned int i=0;i<particles_received_west.size();i++)
                {
                    particle_grid[received_info_iter->second].insert(pair<int,Particle>(particles_received_west[i].global_part_num(),particles_received_west[i]));

                    if(particles_received_west[i].position().x()>grid_locations[received_info_iter->second][0] && particles_received_west[i].position().x()<grid_locations[received_info_iter->second][1])
                    {
                        particle_properties[particles_received_west[i].global_part_num()].particle_in_box()[received_info_iter->second]=true;

                    }
                    counter_received++;
                    counter_x_received++;
                }
            }
            else
            {
                //receive the message
                world.recv(received_info_iter->first,received_info_iter->second,particles_received_east);
                //loop through all the received particles and add them to the particle_grid for this processor
                for (unsigned int i=0;i<particles_received_east.size();i++)
                {
                    particle_grid[2000000000-received_info_iter->second].insert(pair<int,Particle>(particles_received_east[i].global_part_num(),particles_received_east[i]));
                    if(particles_received_east[i].position().x()>grid_locations[2000000000-received_info_iter->second][0] && particles_received_east[i].position().x()<grid_locations[2000000000-received_info_iter->second][1])
                    {
                        particle_properties[particles_received_east[i].global_part_num()].particle_in_box()[2000000000-received_info_iter->second]=true;

                    }
                    counter_received++;
                    counter_x_received++;
                }
            }
        }
    }

    mpi::wait_all(reqs_y_send, reqs_y_send + particles_to_be_sent_bottom.size()+particles_to_be_sent_top.size());
    mpi::wait_all(reqs_z_send, reqs_z_send + particles_to_be_sent_south.size()+particles_to_be_sent_north.size());
    mpi::wait_all(reqs_x_send, reqs_x_send + particles_to_be_sent_west.size()+particles_to_be_sent_east.size());

    cout<<"x sent "<<counter_x_sent<<" and received "<<counter_x_received<<" from rank "<<world.rank()<<endl;

    cout<<"rank "<<world.rank()<<" sent "<<counter_sent<<" and received "<<counter_received<<" and removed "<<counter_removed<<endl;
    cout<<"done passing"<<endl;
} 
```

我只发布了一些代码（所以忽略一些变量可能看起来未定义的事实，因为它们在我没有发布的代码的一部分中）

当我运行代码（在它失败的机器上）时，我得到`done passing`但没有`done passing particles`

我不知道什么可能导致被调用函数的末尾和调用函数的下一行之间出现分段错误，以及为什么它会发生在一台机器上而不是另一台机器上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T17:39:01.103

如果你在函数的结尾和调用者的后续行之间崩溃了，你可能在局部变量的析构函数中崩溃了。您需要在调试器中运行程序以找出哪个对象的析构函数正在崩溃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T16:43:30.693

有几种可能性：

1.  您实际上正在返回，但 cout 由操作系统缓冲，因此您看不到“完成传递粒子”，因为应用程序首先崩溃。
2.  你有一些本地类，它的析构函数是段错误的。

尝试在调试器中运行它以找出它实际崩溃的位置。

编辑：

既然您提到您正在使用 gcc，请添加 -g 标志并使用 gdb 运行它。然后 Gdb 会准确地告诉你哪里出了问题（可能是一个空的取消引用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T23:01:50.377

以防万一以后有人回来。我更新到最新版本的 boost mpi（当时）1.50，这个问题就消失了。没有太多的解决方案，但它奏效了。

# asp.net-mvc - 如何获取运行时生成的 HTML 并根据 .ASP.Net 中的主机头和查找表控制图像

> ID：12644064
> 
> 赞同：2
> 
> 时间：2012-09-28T16:41:21.647
> 
> 标签：asp.net-mvc, content-management-system

每种类型的用户登录都有 3 个概念。图像由基于主机标头的查找表控制。我的意思是，有几个域名指向同一个 IP/Web 实例，并且该实例根据读取主机标头来提供内容。

我们现在所做的是将所有 HTML（不是代码）存储在主机头查找引用的表中。

有人可以指导我这个要求吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:04:51.880

可能有更好的方法来处理多租户，但让我们假设你不能改变任何一个。你想要的大概就是这个

```
string domain = HttpContext.Current.Request.ServerVariables["HTTP_HOST"]; 
```

您可以将其映射`domain`到客户 ID 并将其存储在用户的 cookie 中并基于此查找，必要时进行映射。或者直接使用域进行表查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:50:29.203

```
Request.Url.Host 
```

这将为您提供域名，例如：“www.example.com”。我建议存储包括“视图名称”和“域”在内的记录。然后，根据你的行动，我会想象这样的事情：

```
var record = db.HostRecords.Where(r => r.Domain == Request.Url.Host).FirstOrDefault();

var view = "Page.cshtml";

if (record != null){
    view = record.ViewName;
}

return View(view); 
```

# objective-c - ios tableviewcell 几个对象以编程方式一个单元格，以编程方式设置原型单元格，自定义表格视图单元格样式，

> ID：12644065
> 
> 赞同：0
> 
> 时间：2012-09-28T16:41:24.680
> 
> 标签：objective-c, ios, uitableview, prototype

你好，我使用 InterfaceBuilder 和故事板构建了这个 tableview 我使用自定义的单元格样式和 table view 的内容原型，这是图像： [自定义 tableview](http://i50.tinypic.com/23k421g.png)

但现在我需要以编程方式重做所有事情我尝试使用此代码在单元格中插入一个图像视图

```
UIImageView *imgView = [[UIImageView alloc] initWithFrame:
  CGRectMake(300, 0, 80, 80)];
imgView.image = [UIImage imageNamed:@"esquina_estrella.png"];
cell.imageView.image = imgView.image;` 
```

但图像保持静止，对 CGRectMake 无响应，感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:51:29.360

添加

```
imgView.clipsToBounds = YES; 
```

将图像的显示限制在图像视图的框架内。

此外，您正在将图像视图的图像添加到单元格的图像视图，这是一个不同的对象，而不使用您的图像视图及其框架。如果您只是使用图像，则实际上不需要图像视图。你想要的是

```
cell.imageView = imgView; 
```

或者

```
[cell.contentView addSubview:imgView]; 
```

如果您想准确地放置它并添加更多的图像视图，就像在您的屏幕截图中一样，后者将是更可取的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T11:06:22.557

将此代码用于单元格：

```
// Make your frame origin 0,0 as below done.
UIImageView *imgView = [[UIImageView alloc] initWithFrame:
CGRectMake(0, 0, 80, 80)];

imgView.image = [UIImage imageNamed:@"esquina_estrella.png"];

[cell addSubview:imgView];
[imgView release]; 
imgView = nil; 
```

# installation - 从 Windows Installer 访问松散文件

> ID：12644068
> 
> 赞同：0
> 
> 时间：2012-09-28T16:41:42.783
> 
> 标签：installation, zip

我已经构建了一个 .msi 安装程序，其中包含一些“松散文件”，即不在 .msi 中的文件
为简单起见，假设我有：

*   安装程序.msi
*   A文件.txt

如果从包含安装程序 + 松散文件的常规文件夹运行，它工作正常。

但如果它来自压缩文件夹 (Archive.zip)，Windows 会在运行 .msi 安装程序之前悄悄解压缩到 Temp 文件夹。然后安装程序找不到它正在寻找的松散文件，因为它是从 Temp 文件夹中的某个随机位置运行的。我收到一个错误：

**源文件未找到：**

**C:\Users\testing\AppData\Local\Temp\Temp1_Archive.zip\AFile.txt**

有什么方法可以构建可以确定解压到哪里的安装程序？或者以某种方式说松散文件与.msi 在同一个文件夹中？

# regex - 如何使用 egrep 列出与正则表达式匹配的单词？

> ID：12644074
> 
> 赞同：1
> 
> 时间：2012-09-28T16:42:06.607
> 
> 标签：regex, linux, unix, expression, grep

我需要使用 egrep 来计算包含与正则表达式匹配的字符串的单词。例如，我需要做类似“计算包含三个连续元音的单词数”（不完全是这样，但这就是它的要点）。

我已经想出了如何计算包含这些单词的行，但是当我添加 -w 标签时出现`egrep: illegal option -- w`错误。

这是我在上面的场景中用来计算行数的正则表达式，它似乎有效：

```
egrep -i -c '[aeiou][aeiou][aeiou]' full.html 
```

`-w`即使我在正则表达式周围添加 \b 标记，使用此命令的标记也会导致我上面列出的错误。例如：

```
egrep -i -c -w '\b.*[aeiou][aeiou][aeiou].*\b' full.html 
```

我究竟做错了什么？

编辑：我在终端的 Solaris 10 上运行它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-29T13:07:23.170

也可以使用这种方式来查找包含字符串的单词的计数

`grep --color -Eow '[aeiou][aeiou][aeiou]' filename | wc -l`

或者

`egrep -ow '[aeiou][aeiou][aeiou]' filename | wc -l`

o 仅打印匹配的。

w 为单词。

最后，它将显示单词的计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T21:03:20.940

您必须查阅您的 solaris 手册页以了解您的 egrep 是否支持任何/所有/某些类似 GNU 的扩展。

你的系统有 /usr/xpg4/bin 吗？如果是，请确保您的 MANPATH 包含 /usr/xpg4/man。该目录曾经有最新版本，没有添加 /opt/gnu install 之类的东西。

无论如何，您的正则表达式`'\b.*[aeiou][aeiou][aeiou].*\b'`在我看来是...

```
1 word-boundary
followed by any number of any chars (including blanks and vowels) 
followed by three vowels, 
followed by any number of any chars (including blanks and vowels), 
followed by 1 word-boundary. 
```

可能不是你真正想要的。

为了满足您对连续 3 个元音单词的需求并使用旧/方形正则表达式长手，请尝试

```
 egrep -i -c '[a-z]*[aeiou][aeiou][aeiou][a-z]*' full.html 
```

这就是说，匹配 chars [az] 任意数字（包括 none），在 3 个元音之前，后跟任意数量的 chars [az]（包括 none）。所以空格字符不会匹配 [az]。您正在使用 -i 忽略大小写，因此您不必使用`[A-Za-z]`. 显然，如果您发现您想将其视为单词字符的其他字符，也许是`'_'`char?，请将其添加到双方。

对不起，但我是从记忆中走出来的，我不在 Solaris 商店工作，也无法在那里进行测试。

**编辑**

另请注意，我当前系统上的 grep 手册页说

```
 -c, --count
          Suppress normal output; instead print a count of matching  lines
          for  each  input  file.  With the -v, --invert-match option (see
          below), count non-matching lines. 
```

请注意，这是匹配行数，而不是匹配数。

可能更容易使用

```
 awk '{for (i=1;i<=NF;i++){if ($i ~ /.*[aeiou][aeiou][aeiou].*/) cnt++};}; END{print "count="cnt}'file 
```

IHTH

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T16:48:57.127

我相信 egrep 不支持`\b`单词边界。尝试`\<`单词边界的开头和单词边界`\>`的结尾。

**编辑**
嗯...没关系。根据[手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?egrep) `\b`是支持的。

实际上，我认为答案是只有 grep 支持“-w”选项。我不认为 egrep 可以。 [http://ss64.com/bash/egrep.html](http://ss64.com/bash/egrep.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T16:56:05.913

哪个平台和哪个版本的 egrep？

-w 选项对我有用（CentOS 和带有 GNU egrep 的 Mac）——见下文。此外，`\b`按预期工作 - 见下文。

此外，我使用了不同的正则表达式 - 见下文。

```
$ grep --version
grep (GNU grep) 2.5.1

$ cat test.txt 
this and that iou and eai
not this aaih
not this haai

$ egrep -i -w '[aeiou]{3}' test.txt 
this and that iou and eai

# with no -w
egrep -i '\b[aeiou]{3}\b' test.txt
this and that iou and eai

# with neither -w nor {3}
$ egrep -i '\b[aeiou][aeiou][aeiou]\b' /tmp/test.txt 
this and that iou and eai

# using '\<' and '\>' works as well for word boundaries
$ egrep -i '\<[aeiou][aeiou][aeiou]\>' /tmp/test.txt 
this and that iou and eai 
```

# python-2.7 - 如何将python变量设置为true或false？

> ID：12644075
> 
> 赞同：42
> 
> 时间：2012-09-28T16:42:08.993
> 
> 标签：python-2.7, boolean, constants

我想将 Python 中的变量设置为 true 或 false。但是单词`true`and`false`被解释为未定义的变量：

```
#!/usr/bin/python
a = true; 
b = true;
if a == b:          
  print("same"); 
```

我得到的错误：

```
a = true
NameError: global name 'true' is not defined 
```

设置变量真或假的python语法是什么？

Python 2.7.3

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-09-28T16:46:40.317

首先要回答您的问题，您通过分配[`True`](http://docs.python.org/2/library/constants.html#True)或[`False`](http://docs.python.org/2/library/constants.html#False)将变量设置为 true 或 false：

```
myFirstVar = True
myOtherVar = False 
```

如果你的情况基本上是这样的：

```
if <condition>:
    var = True
else:
    var = False 
```

那么直接简单地分配条件的结果要容易得多：

```
var = <condition> 
```

在你的情况下：

```
match_var = a == b 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-28T16:43:21.020

```
match_var = a==b 
```

这应该绰绰有余

你不能在变量名中使用 - 因为它认为是`match`（减号）`var`

```
match=1
var=2

print match-var  #prints -1 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-28T16:44:07.197

Python 布尔关键字是`True`and `False`，注意大写字母。所以像这样：

```
a = True;
b = True;
match_var = True if a == b else False
print match_var; 
```

编译并运行时，将打印：

```
True 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-13T19:57:15.030

你必须使用大写 True and False 不是 true and false

# android - 对象颜色/宽度的无限撤消/重做系统

> ID：12644076
> 
> 赞同：0
> 
> 时间：2012-09-28T16:42:22.987
> 
> 标签：android, bitmap, android-canvas

我做了一个撤消/重做系统，但它忘记了宽度和颜色。它使用最后的颜色和宽度（最后的配置（在初始化时看到））绘制所有对象。

我需要关于如何保存颜色和宽度的建议。

这是链接： http: [//pastebin.com/jBVJya8a](http://pastebin.com/jBVJya8a)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:15:53.870

您可以为您的应用程序节省`color`和重量`SharedPreferences`。SharedPreferences 会在您再次运行应用程序时保存。这是一个教程链接

[http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

# c# - 如何创建通用事件引发方法

> ID：12644079
> 
> 赞同：7
> 
> 时间：2012-09-28T16:42:37.747
> 
> 标签：c#, asp.net, events, generics, event-handling

我有一组具有相同签名的事件。现在我想知道是否可以创建一个通用事件处理程序引发方法来为所有事件执行此操作？

*   这可以发送一个事件`<T>`吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T16:50:48.553

如果这都在一个类中，您可以创建一个方法来引发与它们中的任何一个一起使用的事件。例如，如果您的事件都是`EventHandler<T>`，您可以使用：

```
private void RaiseEvent<T>(EventHandler<T> eventHandler, T eventArgs)
{
    if (eventHandler != null)
    {
        eventHandler(this, eventArgs);
    } 
} 
```

然后您可以通过以下方式调用它：

```
this.RaiseEvent(this.MyEvent, new MyEventArgs("Foo")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-05T09:20:39.380

对于 Reed Copsey 回复的静态版本，我创建了一个静态类`Event`：

```
public static class Event
{
    public static bool Raise<T>(Object source, EventHandler<T> eventHandler, T eventArgs) where T : EventArgs
    {
        EventHandler<T> handler = eventHandler;
        if (handler != null)
        {
            handler(source, eventArgs);
            return true;
        }
        return false;
    }
} 
```

这也假设您的事件处理程序属于`EventHandler<T>`. 返回类型从`void`to更改为`bool`返回是否有任何事件的侦听器。很少使用，所以随时改回`void`.

**示例用法：**

```
public event EventHandler<FooArgs> FooHappend;

public void Foo()
{
    Event.Raise(this, FooHappend, new FooArgs("Hello World!");
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T16:44:48.557

看到[这个](http://msdn.microsoft.com/en-us/library/sx2bwtw7.aspx)。它描述了你想要什么。

您可以通过使用类型化委托并将其用于您的事件来创建类型化事件：

```
public delegate void myDel<T>(T stuff);

public event myDel<int> myEvent;

public doStuff()
{
    myDel(1);
} 
```

# c - 什么是先进先出的缓冲版本？

> ID：12644091
> 
> 赞同：1
> 
> 时间：2012-09-28T16:43:54.080
> 
> 标签：c, linux, ipc, named-pipes, file-descriptor

**背景**
我正在玩 FIFO，每次我尝试在我的 fifo 上写入时，它都会阻塞，直到有人正在读取 fd 的另一侧：

```
int fd;
char buffer[100] = {0};
char * myfifo = "/tmp/myfifo";    

mkfifo(myfifo, 0666);
printf("What would you like to send?\n");
fgets(buffer, 100, stdin);

if((fd = open(myfifo, O_WRONLY)) < 0)
    printf("Couldn't open the FIFO for writing!\n");
else {
    write(fd, buffer, strlen(buffer));
    close(fd); 
```

此代码有效，但在我读取`/tmp/myfifo`侧面并获取数据之前它会阻塞。当我这样更改代码时：

```
if((fd = open(myfifo, O_WRONLY | O_NONBLOCK)) < 0) 
```

然后打开失败并出现错误`No such device or address`，除非我有人坐在“读取”侧。

**分析** 根据手册[页](http://linux.die.net/man/7/fifo)`fifo()`：
`The kernel maintains exactly one pipe object for each FIFO special file that is opened by at least one process. The FIFO must be opened on both ends (reading and writing) before data can be passed. Normally, opening the FIFO blocks until the other end is opened also.`

所以这是预期的操作。

**问题**

根据我的实验和我正在阅读的内容......我必须**假设**FIFO 是一种非排队、非缓冲机制，并且仅在有进程等待数据时才有效。

是否有不同的通信机制可以在非阻塞缓冲庄园中工作，基本上是缓冲 FIFO，还是我必须为此制作自己的消息存储/通知系统？

**编辑**

我说我在“玩弄”，这在这里实际上非常具有描述性。我正在尝试了解各种 IPC 机制（FIFO、套接字和管道）的来龙去脉。我正在努力学习使用`select()`和理解什么可以用来唤醒调用 select 的睡眠进程。原因是它是我正在分析移植到新平台的通信驱动程序的一部分。
我将其从原始帖子中排除，因为它有点无关紧要。我只是想确保我能理解（目前）FIFO、如何使用它们、它们的限制以及其他 IPC 机制。因此，我最初的假设/问题是关于“更好”版本的 FIFO，它将存储数据并且可以在没有阻塞的情况下写入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:21:24.630

FIFO 不仅是缓冲的，而且基本上是 FIFO 的全部内容。FIFO 只不过是内核中的一个缓冲区。

**讨论：**内核有一个策略，它拒绝将数据写入缓冲区，除非进程打开 FIFO 以供读取。这种行为类似于管道和 TCP 连接，尽管如果没有读取器来读取管道或 TCP 连接，内核实际上会向写入过程发出信号，终止它（除非您安装了处理程序）。这种行为允许我们以我们期望的方式将命令串在一起，例如，

```
hexdump file.dat | head 
```

`hexdump`一旦`head`读取几行，程序就会被杀死。这就是我们 99% 的时间想要的，并且`hexdump`不需要任何特殊的代码来实现这一点。

**解决方案：**如果您描述有关您要解决的问题的更多背景信息，将会有所帮助。

1.  如果您想要一个客户端/服务器系统，其中服务器将客户端可以读取的消息排队，您可以使用 Unix 域套接字来实现这一点。Unix 域套接字类似于 FIFO，但在各种方面更灵活。（与其他类型的 IPC 相比，大多数数据库服务器更喜欢 Unix 域套接字。）

2.  如果您希望能够存储一个持久队列，应用程序可以独立地将消息入队和出队，那么您将需要使用普通文件。

不幸的是，“玩弄 FIFO”并没有什么可做的。如果您想在 IPC 方面进行一次很好的练习，请尝试编写一个使用 Unix 域套接字或 TCP（或同时使用两者，这并不难）的聊天服务器。您可以使用`telnet`or `nc`(netcat) 作为客户端。（确保您拥有 netcat 的“OpenBSD”版本。）

# jquery - 仅在视图中加载部分的网站

> ID：12644094
> 
> 赞同：0
> 
> 时间：2012-09-28T16:44:02.120
> 
> 标签：jquery, ajax, html, browser

我注意到一种趋势，即网站元素在立即显示之前不会加载。

我想对此做更深入的个人研究，但我不知道这个约定叫什么，这被证明是现代搜索引擎的一个限制。

一个例子是文章底部的 disqus 评论部分如何仅在用户向下滚动那么远之后加载。

这是 html5 技术包的一部分吗？是浏览器功能吗？它实际上是否通过不加载所有内容来消除服务器上的压力？为什么几年前没有这样做？

感谢您提供任何有用的见解

# c++ - Visual Studio C++ 外部依赖

> ID：12644100
> 
> 赞同：2
> 
> 时间：2012-09-28T16:44:10.710
> 
> 标签：c++, visual-studio-2010

在我的 Visual Studio 项目中，我有一个文件（比如称为 fh），我不再需要它并且可能已错误删除（只需在 Visual Studio 的解决方案资源管理器中按删除即可。

现在我观察到该文件显示在“外部依赖项”列表中并导致编译错误。

编译错误的原因如下（fh有一个我不需要的#include“xh”，因此被删除）。

所以问题是如何弄清楚“fh”是如何在“外部依赖项”中到达那里的，如果我可以删除它，编译错误就会消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T16:47:48.133

我有根据的猜测是您仍然有一个包含“fh”文件的文件

执行 ctrl+shift+f 并搜索 #include "fh" 并查看它是否存在于您的解决方案中的任何位置。

即使解决方案项目中不包含头文件，如果在某处引用它，它仍然会被编译到源代码中。

# c# - Outlook 删除我的新行（我已经尝试过所有提到的欺骗 Outlook 的方法）

> ID：12644106
> 
> 赞同：1
> 
> 时间：2012-09-28T16:44:24.780
> 
> 标签：c#, outlook

所以我有一个电子邮件正文，我需要使用我用 C# 编写的程序在 Outlook 中发送电子邮件。正文字符串中包含换行符。我已经尝试了一切以防止前景将它们过滤掉。我什至禁用了取出新行选项，它仍然可以。我已经尝试了我可以在网上找到的所有技巧。我已经尝试过 Enviroment.NewLine 和 \r\n 以及其他任何东西。这太令人沮丧了。有没有人解释？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:01:35.043

如果邮件以纯文本形式发送，最新版本的 Outlook 将删除它确定为邮件中无关换行符的任何内容，以提高可读性。只有具有 Outlook 客户端的最终用户才能覆盖此行为，并且可以逐个消息地执行此操作。

如果您想更好地控制邮件的布局和格式，那么您应该将邮件正文生成为 HTML 邮件而不是纯文本邮件。当然，这意味着您必须做更多的工作来创建要使用的消息布局，但这会产生非常好的演示文稿，并让您可以更好地控制垂直对齐等事情，这样您就无法可靠地完成仅使用纯文本。

# arrays - webgl drawElements：属性设置不正确（重复n次）

> ID：12644107
> 
> 赞同：4
> 
> 时间：2012-09-28T16:44:28.773
> 
> 标签：arrays, webgl

所以，我开始了一段相当瞬间的旅程，进入了可视化、3-d 编程的世界。我目前在 webgl 上投入了大量资金，在 JavaScript 和大多数面向 Web 的语言方面拥有相当深厚的背景，但这是我的第一个图形语言。

在尝试绘制我的第一个相当简单的形状时，我遇到了一个我似乎无法找到解决方案的错误。它在 chrome 中读取为：

WebGL：INVALID_OPERATION：drawElements：attribs 设置不正确（重复 n 次）

其中 n 是一个看似随机变化的数字。有问题的代码在这里：

```
var tessVertexPositionBuffer;
var tessVertexColorBuffer;
var tessVertexIndexBuffer;
function initBuffers () {
    tessVertexPositionBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, tessVertexPositionBuffer);
    var vertices = [
    //innerfront
        -1.0, 1.0, 1.0,
        1.0, 1.0, 1.0,
        1.0, -1.0, 1.0,
        -1.0, -1.0, 1.0,
    //innerleft
        -1.0, 1.0, 1.0,
        -1.0, -1.0, 1.0,
        -1.0, 1.0, -1.0,
        -1.0, -1.0, -1.0,
    //innerback
        -1.0, 1.0, -1.0,
        1.0, 1.0, -1.0,
        -1.0, -1.0, -1.0,
        1.0, -1.0, -1.0,
    //innerright
        1.0, 1.0, 1.0,
        1.0, -1.0, 1.0,
        1.0, 1.0, -1.0,
        1.0, -1.0, -1.0,

    //topfront
        -1.0, 1.0, 1.0,
        1.0, 1.0, 1.0,
        -2.0, 2.0, 2.0,
        2.0, 2.0, 2.0,
    //topleft
        -1.0, 1.0, 1.0,
        -2.0, 2.0, 2.0,
        -1.0, 1.0, -1.0,
        -2.0, 2.0, -2.0,
    //topback
        -1.0, 1.0, -1.0,
        1.0, 1.0, -1.0,
        -2.0, 2.0, -2.0,
        2.0, 2.0, -2.0,         
    //topright
        1.0, 1.0, 1.0,
        2.0, 2.0, 2.0,
        1.0, 1.0, -1.0,
        2.0, 2.0, -2.0,

    //outerfront
        -2.0, 2.0, 2.0,
        2.0, 2.0, 2.0,
        -2.0, -2.0, 2.0,
        2.0, -2.0, 2.0,
    //outerleft
        -2.0, 2.0, 2.0,
        -2.0, -2.0, 2.0,
        -2.0, 2.0, -2.0,
        -2.0, -2.0, -2.0,           
    //outerback
        -2.0, 2.0, -2.0,
        2.0, 2.0, -2.0,
        -2.0, -2.0, -2.0,
        2.0, -2.0, -2.0,
    //outerright
        2.0, 2.0, 2.0,
        2.0, -2.0, 2.0,
        2.0, 2.0, -2.0,
        2.0, -2.0, -2.0,            

    //bottomfront       
        2.0, 2.0, 2.0,
        -2.0, 2.0, 2.0,
        -2.0, -2.0, 2.0,
        2.0, -2.0, 2.0,
    //bottomleft
        -1.0, -1.0, 1.0,
        -2.0, -2.0, 2.0,
        -1.0, -1.0, -1.0,
        -2.0, -2.0, -2.0,
    //bottomback
        -1.0, -1.0, -1.0,
        1.0, -1.0, -1.0,
        -2.0, -2.0, -2.0,
        2.0, -2.0, -2.0,
    //bottomright
        1.0, -1.0, 1.0,
        2.0, -2.0, 2.0,
        1.0, -1.0, -1.0,
        2.0, -2.0, -2.0
    ];
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
    tessVertexPositionBuffer.itemSize = 3;
    tessVertexPositionBuffer.numItems = 64;

    tessVertexColorBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, tessVertexColorBuffer);
    var colors = [
        [0.7, 0.7, 0.7, 1.0], //all inner sides
        [0.7, 0.7, 0.7, 1.0], 
        [0.7, 0.7, 0.7, 1.0], 
        [0.7, 0.7, 0.7, 1.0], 

        [0.7, 0.0, 0.7, 1.0], //all top sides
        [0.7, 0.0, 0.7, 1.0], 
        [0.7, 0.0, 0.7, 1.0], 
        [0.7, 0.0, 0.7, 1.0], 

        [0.7, 0.7, 0.0, 1.0], //all outer sides
        [0.7, 0.7, 0.0, 1.0], 
        [0.7, 0.7, 0.0, 1.0], 
        [0.7, 0.7, 0.0, 1.0], 

        [0.0, 0.7, 0.7, 1.0], //all bottom sides
        [0.0, 0.7, 0.7, 1.0],
        [0.0, 0.7, 0.7, 1.0],
        [0.0, 0.7, 0.7, 1.0],
    ];
    var unpackedColors = [];
    for (var i in colors) {
        var color = colors[i];
        for (var j=0; j< 4; j++) {
            unpackedColors = unpackedColors.concat(color);
        }   
    }

    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(unpackedColors), gl.STATIC_DRAW);
    tessVertexColorBuffer.itemSize = 4;
    tessVertexColorBuffer.numItems = 64;

    tessVertexIndexBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, tessVertexIndexBuffer);
    var tessVertexIndices = [
        0, 1, 2,  0, 2, 3,
        4, 5, 6,  5, 6, 7,
        8, 9, 10,  9, 10, 11,
        12, 13, 14,  13, 14, 15,
        16, 17, 18,  17, 18, 19,
        20, 21, 22,  21, 22, 23,
        24, 25, 26,  25, 26, 27,
        28, 29, 30,  29, 30, 31,
        32, 33, 34,  33, 34, 35,
        36, 37, 38,  37, 38, 39,
        40, 41, 42,  41, 42, 43,
        44, 45, 46,  45, 46, 47,
        48, 49, 50,  48, 50, 51,
        52, 53, 54,  53, 54, 55,
        56, 57, 58,  57, 58, 59,
        60, 61, 62,  61, 62, 63
    ];  
    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(tessVertexIndices), gl.STATIC_DRAW);
    tessVertexIndexBuffer.itemSize = 1;
    tessVertexIndexBuffer.numItems = 96;
} 
```

缓冲区的实际绘制在这里：

```
 gl.bindBuffer(gl.ARRAY_BUFFER, tessVertexPositionBuffer);
    gl.vertexAttribPointer(shaderProgram.vetexPositionAttribute, tessVertexPositionBuffer.itemSize, gl.FLOAT, false, 0, 0);

    gl.bindBuffer(gl.ARRAY_BUFFER, tessVertexColorBuffer);
    gl.vertexAttribPointer(shaderProgram.vertexColorAttribute, tessVertexColorBuffer.itemSize, gl.FLOAT, false, 0, 0);

    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, tessVertexIndexBuffer);
    setMatrixUniforms();
    gl.drawElements(gl.TRIANGLES, tessVertexIndexBuffer.numItems, gl.UNSIGNED_SHORT, 0); 
```

现在，这是来自 learningwebgl 的相对逐字，我真的只是想画一个简单的形状。我相对确定我的问题在于我的缓冲区类型，因为老实说，我对它们了解不多（而且我发现的大多数关于 webGl 的文献要么是对语言或 HYPERSUPERPRO 品种有一般了解的新手）。

我已经多次检查了实际的顶点位置/颜色/索引，除非我对代码足够熟悉以至于我对简单的错误视而不见，否则我在那里找不到错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T23:46:08.373

看起来你的问题只是一个小错字。“实际绘制缓冲区”代码的第二行应该如下：

```
gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, tessVertexPositionBuffer.itemSize, gl.FLOAT, false, 0, 0); 
```

你错过了那条线上的第`r`一个`vertexPositionAttribute`。

我修改了第 4 课 LearningWebGL 教程以使用您的代码（带有固定的错字），我在[这里](http://antonpantev.com/so-related/attribsnotsetup/custom_lesson4.html)有一个链接。

如果您注意到在空间中完全相同的位置绘制了一个蓝色三角形和一个黄色三角形，这会导致一些闪烁。我不确定这是否是故意的。

# jsf - 对话框不会关闭primefaces

> ID：12644108
> 
> 赞同：2
> 
> 时间：2012-09-28T16:44:31.837
> 
> 标签：jsf, dialog, primefaces

我的一个页面上有一个对话框。它打开很好。如果您使用页面上的按钮，它会正常工作，它会关闭。但是，如果您尝试将“x”退出对话框，它将不会关闭。我相信这与我在对话框中有一个输入字段这一事实有关，但我不确定。如果这是一个骗局，我很抱歉，我找不到类似的帖子。

```
 <p:commandButton action="#{phoneListBean.debugger}"
            value="Merge Unqiue" onclick="mdlg.show();"
            update=":pmsg, :createNewPanel, :listform" />

        <p:dialog id="mdialog" header="Merge Unqiue" widgetVar="mdlg"
            appendToBody="true">
            <h:form id="mform">
                <h:panelGrid columns="2" cellpadding="5" id="m">
                    <h:outputLabel for="listName" value="Enter the List Name:" />
                    <p:inputText value="#{phoneListBean.mergeList.name}" id="listName" />

                    <p:commandButton action="#{phoneListBean.mergeUnique}"
                        value="Merge Unqiue" update=":pmsg, :listform"
                        onclick="mdlg.hide();" />
                </h:panelGrid>
            </h:form>

        </p:dialog> 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T18:09:12.630

您的问题是您不想使用`onclick`带有 Primefaces 按钮的属性来显示和隐藏对话框。在回发之前可能不会调用 click 事件，因为这些按钮未启用 Ajax。

相反，您应该使用`oncomplete`属性。这将通知 Javascript 事件仅在服务器回发发生后执行，这意味着`show()`将显示已更新的对话框内容，并且`hide()`仅在服务器端执行完成后才会发生。

# zend-framework2 - Zend Framework2 入门

> ID：12644112
> 
> 赞同：1
> 
> 时间：2012-09-28T16:44:49.757
> 
> 标签：zend-framework2

当我来到这里时，我正在阅读 zend framework2 入门教程：

![在此处输入图像描述](../Images/a270f16faaa924603626e43b2187a066.png)

我不知道如何执行此操作：这是页面的链接： http: [//framework.zend.com/manual/2.0/en/user-guide/skeleton-application.html](http://framework.zend.com/manual/2.0/en/user-guide/skeleton-application.html)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T10:36:29.023

我写了一篇关于如何在 Windows 环境中安装 Zend Framework 2 的整篇文章。它针对 Win7，但在 XP 上也非常相似（如果不相同）。

请阅读[我的博客“Zend Framework 2 Installation on Xampp for Windows”](http://samminds.com/2012/07/zend-framework-2-installation-on-xampp-for-windows/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-26T10:25:18.417

那么，开始使用 Zend Skeleton Application 的最佳方式是：

```
$cd my/project/dir 
$git clone git://github.com/zendframework/ZendSkeletonApplication.git --recursive
$cd ZendSkeletonApplication 
```

在您的项目根目录中，您将找到两个文件：**composer.json**和**composer.phar**。[你可以从官方的Getting Started](https://getcomposer.org/doc/00-intro.md)获得更多关于 composer 的信息。

composer.json 文件描述了项目的依赖关系：

```
{
    "require": {
        "php": ">=5.3.3",
        "zendframework/zendframework": "~2.4"
    }
} 
```

为了获取您需要从项目根目录执行的依赖项：

```
$composer.phar self-update
$composer.phar update 
```

最后，您可以在根目录下启动内部 PHP cli-server：

```
$php -S 0.0.0.0:8080 -t public/ public/index.php 
```

我希望这将帮助您安装和配置您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-29T14:18:51.413

Zend Framework 2 刚刚发布，它不是一个适合新手的框架。有几种不同的安装方法，您可以在[http://framework.zend.com/downloads上找到，或者](http://framework.zend.com/downloads)[在 Windows 中的 Xampp 中](https://stackoverflow.com/questions/11562617/installing-zend-framework-2-on-xampp-in-windows) 使用 XAMPP

但我有一种感觉，如果您此时遇到问题，那么 ZF2 不适合您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T17:55:30.510

如果您使用的是 Mac 或 Linux 机器，您可能会打开终端应用程序。导航到 zend 框架应用程序 (cd /path/to/app)，然后运行命令。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T18:38:49.433

如果您使用的是 Windows，请检查您的 php.exe 目录。并执行它。示例：C:\php\php.exe composer.phar 自我更新

如果你是 linux 用户，你已经知道答案了。

# c# - 解密 App.config 中的连接字符串

> ID：12644113
> 
> 赞同：2
> 
> 时间：2012-09-28T16:44:54.483
> 
> 标签：c#, .net

我有一个控制台应用程序，其中有一些加密的连接字符串，如下所示：

```
<connectionStrings configProtectionProvider="RsaProtectedConfigurationProvider">
    <EncryptedData Type="http://www.w3.org/2001/04/xmlenc#Element"
      xmlns="http://www.w3.org/2001/04/xmlenc#">
      <EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#tripledes-cbc" />
      <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
        <EncryptedKey xmlns="http://www.w3.org/2001/04/xmlenc#">
          <EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5" />
          <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
            <KeyName>Rsa Key</KeyName>
          </KeyInfo>
          <CipherData>
            <CipherValue>soemvalue here</CipherValue>
          </CipherData>
        </EncryptedKey>
      </KeyInfo>
      <CipherData>
        <CipherValue>some valye here</CipherValue>
      </CipherData>
    </EncryptedData>
  </connectionStrings> 
```

我尝试使用控制台应用程序访问连接字符串，如下所示：

```
var connectionString = ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString; 
```

我收到以下错误：

> 无法使用提供程序“RsaProtectedConfigurationProvider”解密。来自提供程序的错误消息：无法打开 RSA 密钥容器。

当我尝试从 app.config 访问相同的连接字符串而不解密时，它工作正常。加密有问题吗？我认为加密后我只需要以正常方式获取连接字符串，它就会自动解密。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T16:51:32.623

您需要在同一台机器上加密和解密，或者您需要导出/导入密钥。

见这篇文章：

[http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/d43a4bd7-7cc1-40cf-8269-82c92894df43/](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/d43a4bd7-7cc1-40cf-8269-82c92894df43/)

# c - 在标头中声明结构使其成为全局结构

> ID：12644115
> 
> 赞同：3
> 
> 时间：2012-09-28T16:45:12.023
> 
> 标签：c, header, struct, global

共有三个文件： source1.c source2.c header.h

这两个源文件包括标题。

这是标题的代码：

```
struct
{
    int a;
    int b
} x; 
```

现在发生的情况是该结构变为全局结构，两个源文件现在共享名为 x 的结构。为什么会这样？

我知道，如果您编写以下代码，它将生成两个全局变量。每个源文件一个。（他们不共享全局变量）

```
int x = 0; 
```

最后一段代码对我来说很有意义，但我真的不明白带有结构的那个..

编辑：
嗯，这里的每个人都认为我应该得到链接器错误。我当前的代码用于嵌入式系统（nxtOSEK）。稍后我将尝试将其转换为常规 C 程序。

编辑编辑：
我回来了常规 C 中的示例。正如您所看到的，不仅可以使用结构，还可以使用常规变量。

源1.c

```
#include "header.h"

int main(void)
{
    f();
    x = 1;
    f();
} 
```

源代码2.c

```
#include "header.h"

void f()
{
    printf("source2: %i\n", x);
} 
```

头文件.h

```
#include <stdio.h>

int x; 
```

输出

```
source2: 0
source2: 1 
```

请注意，不能声明 x 以使其正常工作，否则它会像这里的每个人所说的那样给出链接器错误。（我不知道为什么它适用于嵌入式系统..）

看起来我也误读了 Eric Postpischil 的答案，看起来是正确的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-28T17:16:12.873

在文件范围内具有初始化程序的对象标识符的外部声明是*定义*。声明`int x = 0;`是一个定义，因为`x`已初始化。

在文件范围内没有初始值设定项的对象标识符的外部声明是一个*暂定定义*。该声明`struct {…} x;`是一个暂定定义，因为`x`未初始化。

链接时的多个定义会导致错误。

链接时的多个暂定定义合并为一个定义，该定义初始化为零。

如果更改`int x = 0;`为`int x;`，则不会出现链接错误。如果您更改`struct {…} x;`为`struct {…} x = {0};`，您将收到链接错误。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-28T16:49:06.213

下面这段代码

```
struct
{
    int a;
    int b;
} x; 
```

声明一个没有标签`x`的类型`struct`变量。这对于您计划在单个编译单元中使用的静态结构是可以的，但如果您计划`struct`在多个 .c 文件中共享 a ，则不应该这样做。相反，您应该为您定义一个标签`struct`或为它创建一个标签，并使用语法`typedef`单独声明该类型的变量。`srtruct my_struct`

这是一个例子：

将此`struct`声明放在标题中：

```
struct a_and_b
{
    int a;
    int b;
}; 
```

将此变量声明放在 .c 文件中：

```
static struct a_and_b x; 
```

现在`x`不再是全局的：您可以在 .c 文件中访问它，但从外部看不到它。如果你想让它成为全局的，但要避免链接器错误，添加

```
extern struct a_and_b x; 
```

到标题，并`static`从 .c 文件中的声明中删除。

# sql - 如何获取通过sql给出的数据中的记录

> ID：12644122
> 
> 赞同：-2
> 
> 时间：2012-09-28T16:45:55.910
> 
> 标签：sql

```
URN New_Value       Old_Value   Insert_Timestamp
1   A               B           01:00
2   C               A           02:00
3   A               D           03:00
4   B               E           04:00
5   G               B           05:00
6   I               J           06:00 
```

我只需要提取 URN 1 到 6。因为所有其他 URN 都包含其中一个`new_value`或`old_value`已在其时间戳之前使用的时间戳。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T16:51:30.267

```
select t1.*
from MyTable t1
left outer join MyTable t2 on (t1.New_Value = t2.New_Value or t1.New_Value = t2.old_Value) 
    and t2.Insert_Timestamp < t1.Insert_Timestamp
left outer join MyTable t3 on (t1.Old_Value = t3.Old_Value or t1.Old_Value = t3.New_Value) 
    and t3.Insert_Timestamp < t1.Insert_Timestamp 
where t2.URN is null and t3.URN is null 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/a996b/3)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T17:17:37.080

尝试使用`not exists`子句代码：

```
select * from tab t
where not exists
(
  select * from tab t2
  where t2.Insert_Timestamp<t.Insert_Timestamp
  and (t.New_Value=t2.New_Value or t.Old_Value=t2.Old_Value or
       t.Old_Value=t2.New_Value or t.New_Value=t2.Old_Value )
) 
```

## [SQL 小提琴](http://sqlfiddle.com/#!3/874d3/1/0)演示

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T16:52:56.987

这种模式和要求的性能可能会很差，但是

```
SELECT *
FROM   YourTable T1
WHERE  NOT EXISTS (SELECT *
                   FROM   YourTable T2
                   WHERE  T2.Insert_Timestamp < T1.Insert_Timestamp
                          AND ( T2.New_Value IN ( T1.New_Value, T1.Old_Value )
                                 OR T2.Old_Value IN ( T1.New_Value, T1.Old_Value ) )) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T16:50:04.717

由于我不知道您使用的是什么数据库服务器，或者您的最终目标是什么，我可以想象一个通用的 SQL 语句可能会起作用。你可以使用这样的东西：

```
SELECT
 URN,
 New_Value,
 Old_Value,
 Insert_Timestamp
FROM
 table t
WHERE
 t.URN BETWEEN 1 AND 6 
```

# prolog - 如何在 SWI-Prolog 中声明常量？

> ID：12644124
> 
> 赞同：0
> 
> 时间：2012-09-28T16:46:04.030
> 
> 标签：prolog, constants

我在 prolog 中创建了一个基本的冒险游戏。玩家从 0 分开始，我希望分数随着玩家在游戏中的进展而增加。我该怎么做呢？

如果我的问题听起来很愚蠢，请原谅我，我只是 Prolog 的初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T20:41:00.507

您可以使用以下命令在运行时添加事实：

```
asserta(...)
assertz(...) 
```

`asserta`在顶部添加了一个事实，因此使用`cut`我认为您可以隐藏以前的值。

# c# - WCF 线程休眠

> ID：12644132
> 
> 赞同：4
> 
> 时间：2012-09-28T16:46:52.253
> 
> 标签：c#, wcf

我有一个为 WCF 服务启动主机的 Windows 服务。我有一个定义 ServiceContract 和 OperationContracts 的接口。有一个类实现了这个接口。`ServiceBehavior`属性`PerSession`是。据我了解，每个会话在 WCF 服务上都有自己的类实例。

```
[ServiceBehavior(InstanceContextMode = ServiceModel.InstanceContextMode.PerSession)]
public class WCFServiceImplementation : WCFServiceInterface
{

} 
```

现在`WCFServiceImplementation`我打电话给我的一些地方`Threading.Thread.Sleep(1000)`（有一些竞争条件）。我的问题 - 当线程处于睡眠状态时，其他客户端仍然可以调用该服务吗？我对线程不是很熟悉，每个类实例是否使用 WCF 服务在自己的单独线程上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T16:51:01.087

是的，其他客户端仍然可以调用该服务，因为它们将在其他会话中。

# css - 不在标签中的文本的 CSS 选择器

> ID：12644134
> 
> 赞同：3
> 
> 时间：2012-09-28T16:47:03.983
> 
> 标签：css, css-selectors

我想完全隐藏`.byline` **除**日期之外的所有内容。是否可以通过不修改标记的 CSS 来做到这一点？是否有一个 CSS 选择器可以让您定位不在标签中的内部文本？

```
<p class="byline">
    By <a rel="author" href="#">John Doe</a>
    on <time datetime="2012-10-10" pubdate>2012</time>
</p> 
```

这不起作用**b** /c 它隐藏`a`但不是其他文本：

```
.byline :not(time) { display:none } 
```

这不起作用**b** /c 它隐藏了所有内容：

```
.byline { display:none }
.byline time { display:inline } 
```

这**可行**，但不是理想的 b/c，那么您也必须处理隐藏空间：

```
.byline { visibility:hidden }
.byline time { visibility:visible } 
```

请参阅：[jsfiddle.net/pxxR7/](http://jsfiddle.net/pxxR7/)和[jsfiddle.net/pxxR7/1/](http://jsfiddle.net/pxxR7/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T16:48:35.877

CSS 只能选择元素，不能选择纯文本。这就是为什么`:not(time)`不起作用的原因（它只选择`a`）。

`display: none`和`display: inline`不工作的原因是因为`display: none`在容器上阻止它及其所有内容显示，即使您尝试将其设置为其他任何内容（另外，默认情况下`time`已经显示`inline`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T16:48:42.633

[@BoltClock](https://stackoverflow.com/users/106224/boltclock)当然是正确的，您不能选择文本，只能选择元素。但是，以下解决方法应该有效：

```
.byline {
    font-size: 0px;
    color: transparent;
}
.byline time {
    font-size: medium;
    color: black;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T16:54:42.830

你可以使用字体大小的[演示](http://jsbin.com/ocopiq/1/edit)

```
.byline {font-size:0px; }
.byline time {font-size:15px} 
```

# android - 具有支付处理功能的开放 API Android Card Swiper

> ID：12644135
> 
> 赞同：0
> 
> 时间：2012-09-28T16:47:08.280
> 
> 标签：android, payment, credit-card, payment-processing

我正在寻找一款与 Android 兼容的信用卡刷卡器，该刷卡器随附用于处理付款的软件。该软件必须具有开放的 API，以便我可以将其集成到我的应用程序中。有谁知道会做到这一点的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:55:14.430

一种选择是[Innerfence](http://www.innerfence.com/apps/credit-card-terminal/developer-api)。您可以使用他们单独出售的刷卡器，也可以手动输入 CC 编号。

Square 有一个开放的 API，但据我了解，他们几个月前就放弃了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T00:24:00.027

试试这个： http: [//paypal.com/here](http://paypal.com/here)

在 Paypal 的个人资料中 | 我的销售工具 | 即时付款通知 (IPN) 设置了一个交易后回调 URL，将交易放入您自己的数据库 - Paypal 将向您的 URL 发送一个 POST，其中包含他们可以共享的有关交易的所有信息（很多）。然后对您的应用程序进行编程以请求对该数据库的查询。我的经验是 IPN 回调在 2 秒内发生，因此您最多需要 4 秒从您的应用程序中查询您自己的数据库并获得您需要的有关交易的任何（合理）答案。

这样做还会使您的 PCI 合规性配置文件/状态保持在非常低的水平，并且您几乎没有任何合规性责任，这与您的应用程序实际上看到 CC 编号或 CVV 不同。

# c# - linq-to-sql group by 计数和自定义对象模型

> ID：12644136
> 
> 赞同：1
> 
> 时间：2012-09-28T16:47:15.910
> 
> 标签：c#, linq-to-sql

我正在寻找用按其键分组的 linq-to-sql 查询的计数来填充对象模型。

对象模型看起来有点像这样：

```
public class MyCountModel()
{
  int CountSomeByte1 { get; set; }
  int CountSomeByte2 { get; set; }
  int CountSomeByte3 { get; set; }
  int CountSomeByte4 { get; set; }
  int CountSomeByte5 { get; set; }
  int CountSomeByte6 { get; set; }
} 
```

这就是我的查询：

```
var TheQuery = from x in MyDC.TheTable
               where ListOfRecordIDs.Contains(x.RecordID) && x.SomeByte < 7
               group x by x.SomeByte into TheCount
               select new MyCountModel()
               {
                   CountSomeByte1 = TheCount.Where(TheCount => TheCount.Key == 1)
                                            .Select(TheCount).Count(),

                   CountSomeByte2 = TheCount.Where(TheCount => TheCount.Key == 2)
                                            .Select(TheCount).Count(),     
                   .....

                   CountSomeByte6 = TheCount.Where(TheCount => TheCount.Key == 6)
                                            .Select(TheCount).Count(), 

               }.Single(); 
```

`ListOfRecordIDs`是作为参数传入的 long 列表。所有 CountSomeByteN 都带有红色下划线。您如何使用组键映射到对象模型来计算分组元素？

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:58:10.197

您的范围变量在子查询中不正确：

```
 CountSomeByte6 = TheCount.Where(TheCount => TheCount.Key == 6)
                                        .Select(TheCount).Count(), 
```

在方法符号中，您不需要额外的选择：

```
CountSomeByte6 = TheCount.Where(theCount => theCount.Key == 6).Count(), 
```

如果您仍然想使用它：

```
CountSomeByte6 = TheCount.Where(theCount => theCount.Key == 6).Select(theCount => theCount).Count(), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T19:46:48.583

将`select`您组中的每个元素投影到相同的新创建`MyCountModel`的 s 上，而您只使用其中一个。这是我的做法：

```
var dict = MyDC.TheTable
    .Where(x => ListOfRecordIDs.Contains(x.RecordID) && x.SomeByte < 7)
    .GroupBy(x => x.SomeByte)
    .ToDictionary(grp => grp.Key, grp => grp.Count());

var result = new MyCountModel()
{
    CountSomeByte1 = dict[1];
    CountSomeByte2 = dict[2];
    CountSomeByte3 = dict[3];
    CountSomeByte4 = dict[4];
    CountSomeByte5 = dict[5];
    CountSomeByte6 = dict[6];
} 
```

编辑：这是在一个声明中做到这一点的一种方法。它使用一个名为 的扩展方法`Into`，它基本上作为`x.Into(f)`==工作`f(x)`。在这种情况下，它可以被看作是`Select`作用于整个可枚举而不是它的成员。我发现在这种情况下消除临时变量很方便，如果我要在一个语句中写这个，我可能会这样做：

```
public static U Into<T, U>(this T self, Func<T, U> func)
{
    return func(self);
}

var result = MyDC.TheTable
    .Where(x => ListOfRecordIDs.Contains(x.RecordID) && x.SomeByte < 7)
    .GroupBy(x => x.SomeByte)
    .ToDictionary(grp => grp.Key, grp => grp.Count())
    .Into(dict => new MyCountModel()
    {
        CountSomeByte1 = dict[1];
        CountSomeByte2 = dict[2];
        CountSomeByte3 = dict[3];
        CountSomeByte4 = dict[4];
        CountSomeByte5 = dict[5];
        CountSomeByte6 = dict[6];
    }); 
```

# wpf - 在 MVVM 中取消选择 ComboBoxItems

> ID：12644140
> 
> 赞同：6
> 
> 时间：2012-09-28T16:47:36.057
> 
> 标签：wpf, mvvm

我正在使用标准的 wpf/mvvm 应用程序，我将组合框绑定到 ViewModel 上的集合。

我需要能够从下拉列表中取消选择一个项目。意思是，用户应该能够选择一些东西，然后决定他们想要取消选择它（选择无）。问题是我的绑定集合中没有空元素

我最初的想法只是在集合中插入一个新项目，这将导致集合顶部有一个空项目。

虽然这是一个 hack，但它会影响在视图模型上使用该集合的所有代码。

例如，如果有人要写

```
_myCollection.Frist(o => o.Name == "foo") 
```

这将引发空引用异常。

可能的解决方法是：

```
_myCollection.Where(o => o != null).First(o => o.Name == "foo"); 
```

这将起作用，但无法确保该集合的任何未来使用不会导致任何中断。

什么是能够添加空项目以便用户取消选择的好模式/解决方案。（我也知道 CollectionView 结构，但对于如此简单的事情来说，这似乎有点过头了）

**更新**

接受@hbarck 的建议并实施了 CompositeCollection（快速概念证明）

```
 public CompositeCollection MyObjects {
        get {
            var col = new CompositeCollection();

            var cc1 = new CollectionContainer();
            cc1.Collection = _actualCollection;

            var cc2 = new CollectionContainer();
            cc2.Collection = new List<MyObject>() { null }; // PROBLEM

            col.Add(cc2);
            col.Add(cc1);
            return col;
        }
    } 
```

此代码适用于现有的绑定（包括 SelectedItem），这很棒。

这样做的一个问题是，**如果项目完全为空，则在选择它时永远不会调用 SelectedItem 设置器**。

如果我将这一行修改为：

```
 cc2.Collection = new List<MyObject>() { new MyObject() }; // PROBLEM 
```

调用了setter，但现在我选择的项目只是一个基本的初始化类而不是null..我可以在setter中添加一些代码来检查/重置，但这并不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T17:23:17.213

我认为最简单的方法是使用 CompositeCollection。只需将您的集合附加到另一个仅包含空项（null 或占位符对象，无论您需要什么）的集合，然后将 CompositeCollection 设置为 ComboBox 的 ItemsSource。这可能是它的目的。

**更新：**

事实证明这比我最初想象的要复杂，但实际上，我想出了这个解决方案：

```
<Window x:Class="ComboBoxFallbackValue"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:t="clr-namespace:TestWpfDataBinding"
    xmlns:s="clr-namespace:System;assembly=mscorlib"
    xmlns:w="clr-namespace:System.Windows;assembly=WindowsBase"
Title="ComboBoxFallbackValue" Height="300" Width="300">
<Window.Resources>
    <t:TestCollection x:Key="test"/>
    <CompositeCollection x:Key="MyItemsSource">
        <x:Static Member="t:TestCollection.NullItem"/>
        <CollectionContainer Collection="{Binding Source={StaticResource test}}"/>
    </CompositeCollection>
    <t:TestModel x:Key="model"/>
    <t:NullItemConverter x:Key="nullItemConverter"/>
</Window.Resources>
<StackPanel>
    <ComboBox x:Name="cbox" ItemsSource="{Binding Source={StaticResource MyItemsSource}}" IsEditable="true" IsReadOnly="True" Text="Select an Option" SelectedItem="{Binding Source={StaticResource model}, Path=TestItem, Converter={StaticResource nullItemConverter}, ConverterParameter={x:Static t:TestCollection.NullItem}}"/>
    <TextBlock Text="{Binding Source={StaticResource model}, Path=TestItem, TargetNullValue='Testitem is null'}"/>
</StackPanel> 
```

基本上，该模式是您声明用作项目的类的单例 NullInstance，并在设置 VM 属性时使用将这个实例转换为 null 的 Converter。转换器可以通用写，像这样（是VB，希望你不要介意）：

```
Public Class NullItemConverter
Implements IValueConverter

Public Function Convert(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.Convert
    If value Is Nothing Then
        Return parameter
    Else
        Return value
    End If
End Function

Public Function ConvertBack(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.ConvertBack
    If value Is parameter Then
        Return Nothing
    Else
        Return value
    End If
End Function 
```

结束类

由于您可以重用转换器，因此您可以在 XAML 中进行设置；在代码中唯一需要做的就是提供单例 NullItem。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T18:53:27.413

就个人而言，我倾向于在我绑定的集合中添加任何对象的“空”版本。因此，例如，如果您要绑定到字符串列表，那么在您的视图模型中，在集合的开头插入一个空字符串。如果您的模型具有数据集合，则将其与视图模型中的另一个集合一起包装。

模型：

```
public class Foo
{
    public List<string> MyList { get; set;}
} 
```

查看型号：

```
public class FooVM
{
    private readonly Foo _fooModel ;

    private readonly ObservableCollection<string> _col;
    public ObservableCollection<string> Col // Binds to the combobox as ItemsSource
    {
        get { return _col; }
    }

    public string SelectedString { get; set; } // Binds to the view

    public FooVM(Foo model)
    {
        _fooModel = model;
        _col= new ObservableCollection<string>(_fooModel.MyList);
        _col.Insert(0, string.Empty);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T17:05:22.563

您还可以扩展 ComboBox 以启用取消选择。添加一个或多个允许用户将 设置`SelectedItem`为空的钩子（例如，按下退出键）。

```
using System.Windows.Input;

public class NullableComboBox : ComboBox
{
    public NullableComboBox()
        : base()
    {
        this.KeyUp += new KeyEventHandler(NullableComboBox_KeyUp);

        var menuItem = new MenuItem();
        menuItem.Header = "Remove selection";
        menuItem.Command = new DelegateCommand(() => { this.SelectedItem = null; });
        this.ContextMenu = new ContextMenu();
        this.ContextMenu.Items.Add(menuItem);
    }

    void NullableComboBox_KeyUp(object sender, System.Windows.Input.KeyEventArgs e)
    {
        if (e.Key == Key.Escape || e.Key == Key.Delete) 
        {
            this.SelectedItem = null;
        }
    }
} 
```

**编辑**刚刚注意到 Florian GI 的评论，上下文菜单可能是另一个很好的取消选择钩子添加。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T17:04:07.457

一种选择是创建一个适配器集合，专门为需要初始“空”元素的消费者公开。您需要创建一个实现 IList（如果您想要与 ObservableCollection 相同的性能）和 INotifyCollectionChanged 的​​包装类。您需要在包装的集合上收听 INotifyCollectionChanged，然后重新广播事件，并将索引上移一。所有相关的列表方法也需要将索引移一。

```
public sealed class FirstEmptyAdapter<T> : IList<T>, IList, INotifyCollectionChanged
{
    public FirstEmptyCollection(ObservableCollection<T> wrapped)
    {
    }

    //Lots of adapter code goes here...
} 
```

如果你想避免 IList 方法，最低限度是实现 INotifyCollectionChanged 和`IEnumerable<T>`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T02:20:20.433

一种简单的方法是重新模板化组合框，以便当有一个项目选择时，框的右侧会出现一个小 X。单击清除所选项目。

这样做的好处是不会让您的 ViewModel 变得更复杂

# django - 在 django admin 中从 URL 预填充 DateTimeField

> ID：12644142
> 
> 赞同：3
> 
> 时间：2012-09-28T16:47:46.960
> 
> 标签：django, django-models, django-admin

如何`DateTimeField`在 django admin 中预填充来自 URL？

假设您的模型是：

```
class MyModel(models.Model):
    name = models.CharField(max_length=14)
    date = models.DateTimeField() 
```

然后，您可以通过将值作为 GET 参数传递给添加视图，使模型“添加”表单预填充值，例如：

```
/admin/app/mymodel/add/?name=Test 
```

这是一个非常酷的功能，但是您如何为 DateTimeField 实现此功能？

我尝试了许多可能的格式但没有成功。

**更新：**

这似乎是不可能的，因为 django admin 使用了`SplitDateTimeWidget`for `DateTimeField`。但是，如果您不介意使用不同的小部件并丢失日期选择器，则可以改用`DateTimeInput`小部件。

最快的方法是将其添加到您的`ModelAdmin`课程中：

```
formfield_overrides = {
    models.DateTimeField: {'widget': DateTimeInput},
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-10-01T10:38:25.643

首先定义序列化/反序列化格式：

```
DATETIME_FORMAT="%Y-%m-%d %H:%M:%S" 
```

然后，当您要打开管理 url 时使用它：

```
copiedArguments = {
   "fromDateTime": event.fromDateTime.strftime(DATETIME_FORMAT)
}
return HttpResponseRedirect(
            u"{}?{}".format(reverse('admin:events_event_add'), urllib.urlencode(copiedArguments))) 
```

最后但并非最不重要的一点是在模型管理员中提取日期时间：

```
def get_changeform_initial_data(self, request):
    initialData = super(EventAdmin, self).get_changeform_initial_data(request)
    initialData["fromDateTime"] = datetime.datetime.strptime(request.GET["fromDateTime"],DATETIME_FORMAT)
    return initialData 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T19:04:16.627

问题似乎与小部件有关。A`DateField`可以正常工作`?date=yyyy-mm-dd`，但 a`DateTimeField`使用`SplitDateTimeWidget`. 它不能有一个字符串作为初始值。

也许您可以提出一个补丁来`SplitDateTimeWidget`尝试转换字符串值，或者您可以更改 a 的管理员默认小部件`DateTimeField`（如果可能的话）。

# c# - 当它应该是 JSON 时从 Web 服务获取 XML

> ID：12644145
> 
> 赞同：0
> 
> 时间：2012-09-28T16:47:54.270
> 
> 标签：c#, asp.net, web-services

我是 ASP.NET/C# 的菜鸟。我正在尝试使用 Web 服务从数据库中返回 JSON 对象。我在创建循环引用的 Firebug 中遇到错误。堆栈跟踪采用 JSON 格式。当我直接在浏览器中查看 Web 服务时，由于某种奇怪的原因，它返回了有效的 XML。这是我的网络服务。

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public DataSet Posts() {
    string connString = System.Web.Configuration.WebConfigurationManager.ConnectionStrings["XXX"].ConnectionString;
    SqlConnection conn = new SqlConnection(connString);
    string sql = "SELECT * FROM Posts";
    SqlDataAdapter sda = new SqlDataAdapter(sql, conn);
    DataSet ds = new DataSet();
    sda.Fill(ds);
    return ds;
} 
```

我是 C# 新手，所以我不知道这是否正确编写。我想要的是 JSON 格式的数据集。我这样做正确吗？这是调用 Web 服务的 jQuery。

```
<script>
    $(function () {
         $.ajax({
            type: "POST",
            url: "WebServices/MessageBoard.asmx/Posts",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function(data) { console.log(data) },
            failure: function (msg) {
                //alert(msg);
            }
        });

    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:06:42.297

您获得 XML 的原因是`DataSet`序列化为 XML。但是，您可以使用[JSON.NET](http://json.codeplex.com/)将 XML 转换为 JSON。这是一个例子：

```
using System;
using System.Collections.Generic;
using System.Data;

using Newtonsoft.Json;

class Program
{
    static void Main(string[] args)
    {
        var dataSet = new DataSet();
        var dataTable = new DataTable();
        for (int i = 0; i < 5; i++) { dataTable.Columns.Add(string.Format("Column{0}", i), typeof(string)); }
        for (int i = 0; i < 5; i++)
        {
            var vals = new List<object>();
            for (int j = 0; j < 5; j++) { vals.Add(string.Format("Value {0}", j)); }
            dataTable.LoadDataRow(vals.ToArray(), true);
        }

        dataSet.Tables.Add(dataTable);
        dataSet.AcceptChanges();

        Console.WriteLine(JsonConvert.SerializeObject(dataSet));
    }
} 
```

# jquery - 获取选择器的元素路径

> ID：12644147
> 
> 赞同：8
> 
> 时间：2012-09-28T16:48:21.220
> 
> 标签：jquery, dom, xpath, element

遇到了麻烦，基本上试图创建一个可以用作选择器的变量。例如

```
$('a').click(function(){
   var selector = $(this).dompath();
}); 
```

**HTML：**

```
html
    body
        div
            div /div
        /div
       ul
         li
         li
       /ul
    div
        ul
           li
           li
           li hello world
        /ul
   /div
   body
html 
```

然后这将返回类似

```
path = html body div ul li:contains('hello world') 
```

然后我可以在选择器中使用它来选择这个 div 所以如果我喜欢

```
$(path).text() would return "hello world" 
```

非常感谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-03T19:53:59.557

也许是这样的：

```
function dompath( element )
{
    var path = '';
    for ( ; element && element.nodeType == 1; element = element.parentNode )
    {
        var inner = $(element).children().length == 0 ? $(element).text() : '';
        var eleSelector = element.tagName.toLowerCase() + 
           ((inner.length > 0) ? ':contains(\'' + inner + '\')' : '');
        path = ' ' + eleSelector + path;
    }
    return path;
} 
```

`:contains()`这修改了另一个问题的方法，只有当标签没有子标签时，才通过运算符添加标签的全文内容。

我用这种方法测试过：

```
$(document).ready(function(){
    $('#p').click(function() {
      console.log(dompath(this));
    });
}); 
```

反对这一点：

```
<html>
    <body>
        <div>
            <div> </div>
        </div>
       <ul>
         <li></li>
         <li></li>
       </ul>
       <div>
         <ul>
           <li id="p">hi</li>
           <li></li>
           <li id="p2">hello world</li>
        </ul>
       </div>
   <body>
<html> 
```

单击 p 的结果然后得到输出为：

> html body div ul li:contains('hi')

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-27T15:02:56.347

[@jcern 的精彩代码](https://stackoverflow.com/a/12715830/90674)的修改版。

特征：

*   如果元素有 id：仅显示`#elementId`
*   如果没有 id 存在：显示`element.className`
*   如果不存在类：显示附加`element`它`innerHtml`（如果有）
*   跳过`<body>`和`<html>`元素以缩短输出
*   不依赖 jQuery

```
function dompath(element) {
    var path = '',
    i, innerText, tag, selector, classes;

    for (i = 0; element && element.nodeType == 1; element = element.parentNode, i++) {
        innerText = element.childNodes.length === 0 ? element.innerHTML : '';
        tag = element.tagName.toLowerCase();
        classes = element.className;

        // Skip <html> and <body> tags
        if (tag === "html" || tag === "body")
            continue;

        if (element.id !== '') {
            // If element has an ID, use only the ID of the element
            selector = '#' + element.id;

            // To use this with jQuery, return a path once we have an ID
            // as it's no need to look for more parents afterwards.
            //return selector + ' ' + path;
        } else if (classes.length > 0) {
            // If element has classes, use the element tag with the class names appended
            selector = tag + '.' + classes.replace(/ /g , ".");
        } else {
            // If element has neither, print tag with containing text appended (if any)
            selector = tag + ((innerText.length > 0) ? ":contains('" + innerText + "')" : "");
        }

        path = ' ' + selector + path;
    }
    return path;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:25:04.383

这个请求有点傻，因为有更好的**方法**。

为元素分配一个唯一的 ID 以便以后快速引用它，或者如果已经分配了一个 ID，则使用它。

```
//
// generate a unique (enough) id for an element if necessary
//
function getUID(id) {
    if(window["uidCounter"]==null)
        window["uidCounter"]=0;
    return id||( (window["uidCounter"]++) + "_" + (new Date()).getTime() );
}
//
// use an #ID selector
//
$('a').click(function(){
   var uid = getUID( $(this).attr('id') );
   $(this).attr('id', uid);
   var selector = "#" + uid;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T20:02:04.410

您需要枚举要为其创建查询的元素的所有父级，并为每个父级添加一个选择器，例如父级的节点名称或包含测试的名称（如果该父级需要该测试）。如果需要此包含测试，唯一确定的方法可能是在每个步骤中针对当前父级应用当前查询并检查查询是否仅返回目标元素。然后添加包含测试，如果它匹配太多......

我为此编写了一个[Greasemonkey 脚本](http://userscripts.org/scripts/show/144991)。首先，它收集在另一棵树（“模板”）中查找目标元素所需的所有元素，然后将其转换为查询。但是，它使用属性（特别是 class/id/name ）而不是文本进行匹配，以及位置，如果属性不够唯一，因为我认为在大多数情况下，文本比结构更频繁地变化。

# c# - 将 HttpContext 中的主机注入服务层

> ID：12644149
> 
> 赞同：1
> 
> 时间：2012-09-28T16:48:27.577
> 
> 标签：c#, dependency-injection, structuremap, httpcontext, asp.net-web-api

我需要通过在我的 Web API 服务中的所有数据库调用上请求主机名来应用过滤。

此过滤的工作方式如下：

1.  根据请求的主机名查找要配置文件的站点
2.  将 Site.Id 应用于请求中进行的所有后续数据访问调用

本质上是一个全局过滤器，以便 API 服务返回的数据始终包含在主机中。

一种解决方案是将主机名作为参数传递给我的所有服务方法，如下所示：

```
public IEnumerable<Profiles> GetProfiles ()
{
 var host = HttpContext.Current.Request.ServerVariables["SERVER_NAME"];
 return profilesService.Get(host);
} 
```

但由于这是所有请求的一致规则，我想提出一种更优雅的方式来处理这个问题，所以我的服务调用只是 profileSerivce.Get();

我想我需要将一个 ISiteLocator 注入到我的服务层中，该层具有主机名，甚至更好的是已经从数据库中检索到的 Id，然后我可以应用。但是我正在努力解决如何以及在何处引用 HttpContext 以获取主机名，以及是否可以使用 StructureMap 生命周期对其进行优化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T09:34:10.250

> 我想我需要在我的服务层中注入一个 ISiteLocator

在我看来，您正朝着正确的方向前进。

> 我正在努力解决如何以及在何处可以引用 HttpContext

这其实很简单。`ISiteLocator`在您的业务层中定义并在`AspNetSiteLocator`您的 ASP.NET Web 应用程序中定义一个实现，最好靠近（或内部）您的[Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)。该实现可能如下所示：

```
public class AspNetSiteLocator : ISiteLocator
{
    private readonly ISiteRepository siteRepository;

    public AspNetSiteLocator(ISiteRepository siteRepository)
    {
        this.siteRepository = siteRepository;
    }

    Site ISiteLocator.GetCurrentSite()
    {
        return this.siteRepository.GetById(CurrentHostName);
    }

    private static string CurrentHostName
    {
        get
        {
           return HttpContext.Current.Request
               .ServerVariables["SERVER_NAME"];
        }
    }
} 
```

> 具有主机名甚至更好的 Id 已经从数据库中检索到

尝试以`ISiteLocator`对该定位器的消费者最方便的方式让您的返回数据。在我的示例中，我返回了一个`Site`实体（如果您的域中有这样的实体）。这可能比主机名或 Id 更方便，因为消费者可能不得不自己再次查询该站点。但是，也许 Id 是最方便的，但这取决于您自己找出来。

> [...] 如何使用 StructureMap 生命周期对此进行优化

上面的实现没有任何状态，所以它可以用任何生命周期注册；以单例为例。但是，每次调用`ISiteLocator.GetCurrentSite()`都会导致对 的新请求`ISiteRepository`，这可能会导致过多的开销。在这种情况下，您可能需要一个将 存储`Site`在私有字段中并始终返回该实例的实现。在这种情况下，您应该在“每个 Web 请求”的基础上注册该实现（因为`SERVER_NAME`在请求期间不会更改）。

# string - 如何使用 CreateFile() API 函数打开名为 .txt 的文件？

> ID：12644150
> 
> 赞同：2
> 
> 时间：2012-09-28T16:48:29.833
> 
> 标签：string, winapi, unicode, filenames, createfile

某些 Unicode 字符（如 ）的代码点占用超过 2 个字节。如何使用`CreateFile()`这些字符的 Win32 API 函数？

**WinBase.h**

```
WINBASEAPI
__out
HANDLE
WINAPI
CreateFileA(
    __in     LPCSTR lpFileName,
    __in     DWORD dwDesiredAccess,
    __in     DWORD dwShareMode,
    __in_opt LPSECURITY_ATTRIBUTES lpSecurityAttributes,
    __in     DWORD dwCreationDisposition,
    __in     DWORD dwFlagsAndAttributes,
    __in_opt HANDLE hTemplateFile
    );
WINBASEAPI
__out
HANDLE
WINAPI
CreateFileW(
    __in     LPCWSTR lpFileName,
    __in     DWORD dwDesiredAccess,
    __in     DWORD dwShareMode,
    __in_opt LPSECURITY_ATTRIBUTES lpSecurityAttributes,
    __in     DWORD dwCreationDisposition,
    __in     DWORD dwFlagsAndAttributes,
    __in_opt HANDLE hTemplateFile
    );
#ifdef UNICODE
#define CreateFile  CreateFileW
#else
#define CreateFile  CreateFileA
#endif // !UNICODE 
```

LPCSTR 和 LPCWSTR 在**WinNT.h**中定义为：

```
typedef __nullterminated CONST CHAR *LPCSTR, *PCSTR;
typedef __nullterminated CONST WCHAR *LPCWSTR, *PCWSTR; 
```

`CHAR`并`WCHAR`在**WinNT.h**中定义为：

```
typedef char CHAR;
#ifndef _MAC
typedef wchar_t WCHAR;    // wc,   16-bit UNICODE character
#else
// some Macintosh compilers don't define wchar_t in a convenient location, or define it as a char
typedef unsigned short WCHAR;    // wc,   16-bit UNICODE character
#endif 
```

`CreateFileA()`接受`LPCSTR`文件名，这些文件名在内部存储在 8 位数`char`组中。
`CreateFileW()`接受`LPCWSTR`文件名，这些文件名在内部存储在 16 位数`wchar_t`组中。

我在*C:\.txt*位置创建了一个文件。似乎无法使用 打开此文件`CreateFile()`，因为它包含 Unicode 代码点为 0x24B62 的字符，即使在 WCHAR 数组单元格中也不适合。

但该文件存在于我的硬盘中，Windows 正常管理它。如何通过 Win32 API 函数打开这个文件，就像 Windows 在内部一样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T16:52:17.393

此类字符由[UTF-16 代理对](http://en.wikipedia.org/wiki/UTF-16#Code_points_U.2B10000_to_U.2B10FFFF)表示。它需要两个宽字符元素来表示该代码点。因此，您只需要调用`CreateFile`传递必要的代理对。当然，您需要使用`CreateFile`.

大概您不会在代码中硬编码这样的文件名。在这种情况下，您将从文件对话框`FindFirstFile`等中获取它。这些 API 将为您提供文件的适当 UTF-16 编码缓冲区。

# php - 将关联数组插入mysql表

> ID：12644158
> 
> 赞同：2
> 
> 时间：2012-09-28T16:48:52.580
> 
> 标签：php, mysql, arrays

我需要将以下数组插入到具有列名称、标题、网址、徽标的 mysql 表中。我创建了表并编写了一个查询来传输数组。但它正在插入数组的最后一行并留下剩余的......请帮助我......这是我的数组

```
$con = mysql_connect("localhost","","");

if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("media", $con);

$featured = array();

$featured[] = array('name' => '', 'title' => '', 'url' => '', 'logo' => '');

$featured[] = array('name' => '', 'title' => '', 'url' => '', 'logo' => '');

$featured[] = array('name' => '', 'title' => '', 'url' => '', 'logo' => '');

$featured[] = array('name' => '', 'title' => '', 'url' => '', 'logo' => '');

 $sql  = "INSERT INTO featured";

   $sql .= " (`".implode("`, `", array_keys($featured))."`)";

   $sql .= " VALUES ('".implode("', '", $featured)."') ";

   $result = mysql_query($sql) or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T16:53:37.777

您需要遍历`$featured`数组：

```
$con = mysql_connect("localhost","","");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("media", $con);
$featured = array();
$featured[] = array('name' => '', 'title' => '', 'url' => '', 'logo' => '');
$featured[] = array('name' => '', 'title' => '', 'url' => '', 'logo' => '');
$featured[] = array('name' => '', 'title' => '', 'url' => '', 'logo' => '');
$featured[] = array('name' => '', 'title' => '', 'url' => '', 'logo' => '');

foreach ($featured as $array) {
    $sql  = "INSERT INTO featured";
    $sql .= " (`".implode("`, `", array_keys($array))."`)";
    $sql .= " VALUES ('".implode("', '", $array)."') ";
    $result = mysql_query($sql) or die(mysql_error());
} 
```

或者按照建议在一个查询中插入多条记录：

```
$sql  = "INSERT INTO featured";
$sql .= " (`".implode("`, `", array_keys($featured[0]))."`) VALUES"; // make sure that $featured contains the same number of key=>value pairs
foreach ($featured as $array) {
    $sql .= " ('".implode("', '", $array)."'),";
}
$sql = substr($sql,0,-1); // remove last comma
$result = mysql_query($sql) or die(mysql_error()); 
```

请阅读[SQL 注入](http://php.net/manual/en/security.database.sql-injection.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:01:22.073

您可以将`multiple insert`查询用作`INSERT INTO (column1, column2,...) VALUES ('row1a', 'row1b'..), ('row2a', 'row2b'..)...`

```
 $featured = array();
    $featured[] = array('name' => '', 'title' => '', 'url' => '', 'logo' => '');
    $featured[] = array('name' => '', 'title' => '', 'url' => '', 'logo' => '');
    $featured[] = array('name' => '', 'title' => '', 'url' => '', 'logo' => '');
    $featured[] = array('name' => '', 'title' => '', 'url' => '', 'logo' => '');

    $sql  = "INSERT INTO featured ";

   $sql .= " (`".implode("`, `", array_keys($featured))."`)";
   $sql .= " VALUES ";

  for( $i=0; $i < count($featured); $i++) {
    $sql .= "('". implode("', '", $featured[$i])."') "; 
    if( $i < (count($featured) - 1) )
      $sql .= ", ";
  } 
```

[在这里](http://codepad.org/g69iAiCN)查看它的实际应用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T17:05:10.500

正如 hakra 建议的那样，您可以通过对代码进行以下更改来使用一个 mysql 查询插入多行：

```
$featured[] = array('name' => '', 'title' => '', 'url' => '', 'logo' => '');
$featured[] = array('name' => '', 'title' => '', 'url' => '', 'logo' => '');
$featured[] = array('name' => '', 'title' => '', 'url' => '', 'logo' => '');
$featured[] = array('name' => '', 'title' => '', 'url' => '', 'logo' => '');

$sql  = "INSERT INTO featured";
$sql .= " (`".implode("`, `", array_keys($featured))."`)";
$sql .= " VALUES "; // moved parenthetical grouping to foreach loop below
foreach ($featured as $feature) {
    $sql .= "('".implode("', '", $featured)."'), "; // note comma after each parenthetical grouping
}
$sql = substr($sql, 0, -2); // we'll cut off the last ", " added to the string

$result = mysql_query($sql) or die(mysql_error()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T17:10:19.253

这是[PDO](http://php.net/manual/en/book.pdo.php)的工作！无论如何，您应该使用 PDO 或 mysqli 而不是 mysql_ ，但这是另一回事。

你想要做的是：

```
// ========================================================
// Define insert rows. Note the colon before each key name. 
// That's there because we'll be passing this to a PDOStatement as bound 
// parameters. Depending on the logic of your program there may be different 
// ways you want to handle this.
// ========================================================
$featured = array();
$featured[] = array(':name' => '', ':title' => '', ':url' => '', ':logo' => '');
$featured[] = array(':name' => '', ':title' => '', ':url' => '', ':logo' => '');
$featured[] = array(':name' => '', ':title' => '', ':url' => '', ':logo' => '');
$featured[] = array(':name' => '', ':title' => '', ':url' => '', ':logo' => '');

// ========================================================
// Create the PDO object. Define your query and prepare a statement. I use the 
// INSERT SET syntax rather than the INSERT VALUES syntax purely for readability. 
// Either will work with PDO. Also, most programmers don't set the query_str as a 
// separate variable as I do here. I find it improves readability.
// ========================================================
$db_obj = new PDO (/*connection params go here */); 
$query_str = "INSERT INTO featured SET
    name = :name, 
    title = :title, 
    url = :url, 
    logo = :logo"; 
$query_obj = $db_obj->query ($query); 

// ========================================================
// Loop through your rows in $featured and execute the SQL query, passing the
// new row of parameters each time.
// ========================================================
foreach ($featured as $row) {
    $query_obj->execute ($row);
} 
```

# navigation - 重新定义TYPO3中tt_news的页面浏览器的URL

> ID：12644161
> 
> 赞同：0
> 
> 时间：2012-09-28T16:49:02.393
> 
> 标签：navigation, uri, typo3, tt-news

在 TYPO3 项目的页面结构中，我有一个根页面和一个“主页”页面。我将根页面配置为显示“主页”的内容。在“家”中，我有带有页面浏览器的 tt_news 前端插件列表。

当用户在`/`（根页面）上时，pagebrowser-link 就像

*   `/4eb0456e49c1a9134638cf8d76b50406/?tx_ttnews%5Bpointer%5D=1`

但是当用户在`/home/`pagebrowser-link 上时

*   `/home/4eb0456e49c1a9134638cf8d76b50406/?tx_ttnews%5Bpointer%5D=1`

我需要两个页面上的链接都与`/home/`. 这可能吗？

我正在使用`CoolURI`，如果这很重要...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:31:26.310

将 rootpage 设置`/`为`home`（或反向）的快捷方式，而不是复制内容，这样链接应该始终指向，`/home`即使通过`/`

一般来说，在许多网站上显示相同的内容是错误的概念，可能会导致搜索引擎排名下降。

# ios - 圆角矩形框绘制-iOS

> ID：12644163
> 
> 赞同：1
> 
> 时间：2012-09-28T16:49:06.993
> 
> 标签：ios, uiview, uilabel, cgrect

如图所示，如何创建这个圆角矩形？另外我的第二个问题是如何获得多行，如何格式化以使其成为多行，如红色矩形所示？提前致谢！。

```
CGRect viewRect=CGRectMake(30,30,320,55);
UIView *myView=[[UIView alloc]initWithFrame:viewRect];
myView.backGroundColor=[UIColor whiteColor];
[self.view addSubview:myView]

UILabel *label=[[UILabel alloc]initwithFrame:CGRectMake(30,32,25,12)];
label.font=[UIFont fontWithName:"System" size:12];
label.textColor=[UIColor blackColor];
[self.view addSubview:label] 
```

![在此处输入图像描述](../Images/c02fd6aad493fdb2f58ff7b699ffd267.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:10:05.683

您提供的示例可能实现为`UITableView`. 地址单元格具有`UITableViewCellStyleValue2`样式，`textLabel`左侧（“地址”）和`detailTextLabel`右侧都有。

以下是格式化单元格的方法：

```
static NSString *CellIdentifier = @"MyCell"; 
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:CellIdentifier];
}
cell.textLabel.text = @"address";
cell.detailTextLabel.text = @"7200—7232 W Orem Dr\nHouston Texas 77085\nUnited States";
cell.detailTextLabel.numberOfLines = 3;
cell.detailTextLabel.lineBreakMode = UILineBreakModeWordWrap; 
```

您还必须相应地调整单元格的高度，因为它将高于默认值。

**资料来源：** [使用 UILabel 的多行 UITableViewCell](http://the-lost-beauty.blogspot.ca/2009/11/multi-line-uitableviewcell-using.html)（通过[类似的 Stack Overflow 问题](https://stackoverflow.com/questions/1888749/multi-line-uitableviewcell-using-uitableviewcellstylevalue2-style)）

# java - 在 Android 中获得“奇怪”的 RSS 结果

> ID：12644165
> 
> 赞同：1
> 
> 时间：2012-09-28T16:49:25.153
> 
> 标签：java, android, xml, parsing, rss

我不确定这是否是一个好问题，但我真的被这个阻止了。需要一些建议。

我正在开发一个 Android 应用程序，该应用程序的一部分是在 2 个不同的菜单中检索 2 个单独的 RSS 提要。

我对两个提要使用相同的代码，但两个提要都“奇怪”。

我使用的一些 url 很好，标题排列得很好，而我使用的其他 url，比如我需要的那些（一个来自 ReverbNation（显示时间表），一个来自 Facebook（墙提要）），最终得到显示全部“分裂”。

发生的情况是，当我将结果放入 ListView 并看到结果时，一些字符串已被拆分为单独的字符串/列表视图项，有些字符串甚至是空白并显示为空白列表视图项。

有人对我有什么建议吗？我知道这是一个模糊的问题，但我在这里碰壁了。

代码：

```
private class RSSHandler extends DefaultHandler
   {
        final int stateUnknown = 0;
        final int stateTitle = 1;
        final int stateLink = 2;
        int state = stateUnknown;

          @Override
          public void startDocument() throws SAXException {
           // TODO Auto-generated method stub
          }

          @Override
          public void endDocument() throws SAXException {
           // TODO Auto-generated method stub
          }

          @Override
          public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {

            localnames.add(localName);

           if (localName.equalsIgnoreCase("title"))
           {
               state = stateTitle;
           } else if (localName.equalsIgnoreCase("link")){
               state = stateLink;
           } else if (localName.equalsIgnoreCase("item")){
               Log.d("Tour", "item");
           }
           else
           {
               state = stateUnknown;
           }
      }

      @Override
      public void endElement(String uri, String localName, String qName)
        throws SAXException {
       // TODO Auto-generated method stub
       state = stateUnknown;
      }

      @Override
      public void characters(char[] ch, int start, int length)
        throws SAXException {
       // TODO Auto-generated method stub
       String strCharacters = new String(ch, start, length);

       xmlStrings.add(strCharacters);

       if (state == stateTitle)
       {
           item.add(strCharacters);

       } else if (state == stateLink)
       {
           itemLink.add(strCharacters);
       }
  } 
```

# python - FreeBSD 上 Python 中的 psutil 错误

> ID：12644167
> 
> 赞同：1
> 
> 时间：2012-09-28T16:49:28.880
> 
> 标签：python, module, freebsd, bsd

我正在尝试在我在 FreeBSD 系统上编写的 python 脚本中使用 psutil。在顶部我有：

```
import _psutil_bsd 
```

然后，当调用类似 process_iter 的东西时，我有：

```
for process in _psutil_bsd.process_iter():
  if process.name == 'name_I_care_about':
    specialProcess = process 
```

但是我收到以下错误：

```
for process in_psutil_bsd.process_iter():
AttributeError: 'module' object has no attribute 'process_iter' 
```

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T13:12:16.507

这不是 psutil 应该如何使用的。你为什么首先导入 _psutil_bsd ？你读过[文档](http://code.google.com/p/psutil/wiki/Documentation)吗？代码应该是：

```
import psutil
for p in psutil.process_iter():
    if p.name == 'name_I_care_about':
        ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:35:37.043

您可以`print list(_psutil_bsd)`获取模块中的符号列表。

# performance - max-age=0 对加载速度优化有什么影响？

> ID：12644168
> 
> 赞同：1
> 
> 时间：2012-09-28T16:49:37.220
> 
> 标签：performance, caching, browser-cache, pagespeed

在负载速度优化方面，日期是否`Cache-Control: max-age=0`有 `If-Modified-Since`问题？我的浏览器报告了 304，但由于“新鲜度生命周期”较短（不存在），Google 的 PageSpeed 和 YSlow 等工具将它们标记为问题。

我已经阅读了[这个问题](https://stackoverflow.com/questions/1046966/whats-the-difference-between-cache-control-max-age-0-and-no-cache)和一些链接的资源，但是，虽然有帮助，但我仍然不清楚加载速度的净效应（如果有的话）。

非常感谢。

# wordpress - 如何以我的方式显示页面 Wordpress

> ID：12644171
> 
> 赞同：0
> 
> 时间：2012-09-28T16:49:47.767
> 
> 标签：wordpress, navigation

我的导航有问题。我想显示我的所有页面及其子页面。我想在我得到的下拉菜单中显示孩子。在代码中，如果我硬编码meny，你可以看到它是如何工作的。现在我希望它与 wp_list_pages(); 所以我不必为每一页硬编码。

我想在我的 wordpress 网站中显示这样的页面

```
<div id="navigationContainer">
<ul id="navigation">

<li class="navLi">
<a href="" title="" class="navA">Start</a>
</li>

<li class="navLi dropdown">
<a href="" title="" class="navA">Page</a>
<ul>
<li><a href="" title="">Child</li>
</ul>
</li>

<li class="navLi dropdown">
<a href="" title="" class="navA">Parent</a>
<ul>
<li><a href="" title="">Child</a></li>
<li><a href="" title="">Child</a></li>
<li><a href="" title="">Child</a></li>
<li><a href="" title="">Child</a></li>
</ul>
</li>

<li class="navLi">
<a href="" title="" class="navA">Page</a>
</li>

</ul>
</div> 
```

现在谢谢。

// 埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:51:09.780

您可以`dropdown`通过将以下代码添加到您的 functions.php 文件来添加该类：

```
function add_parent_class( $css_class, $page, $depth, $args )
{
    if ( ! empty( $args['has_children'] ) )
        $css_class[] = 'dropdown';
    return $css_class;
}
add_filter( 'page_css_class', 'add_parent_class', 10, 4 ); 
```

# java - Eclipse 无法解析 maven 项目中的 akka 引用

> ID：12644173
> 
> 赞同：3
> 
> 时间：2012-09-28T16:50:00.720
> 
> 标签：java, eclipse, maven, akka

我正在尝试远程部署 pi 计算的 akka tutrials。我正在将 mvn 项目与 eclipse juno 一起使用。我已经能够为 Eclipse 安装 maven 插件并成功运行第一个 pi 计算。现在我正在尝试第二个涉及远程部署演员的 pi 教程。但是当我在 Eclipse IDE 中打开教程包时，系统似乎无法解析某些 akka 文件。我已经在 POM 中定义了依赖关系，但仍然 eclipse 和 maven 抱怨。当我在 Eclipse 中运行 maven compile 目标时，项目被编译但是当我尝试运行它时它给了我错误。以下是示例代码片段。

```
import akka.actor.UntypedActor; 
import akka.actor.ActorRef;
import akka.routing.CyclicIterator;
import akka.routing.InfiniteIterator;
import akka.routing.UntypedLoadBalancer;
eclipse complains that it cannot resolve the above importation 
```

这是 POM.XML 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
         http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <name>Akka.Remote.Cluster</name>
  <groupId>Akka-Remote_Cluster</groupId>
  <artifactId>Akka.Remote.Cluster</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>jar</packaging>
  <url>http://akka.io</url>

  <dependencies>
      <dependency>
            <groupId>com.typesafe.akka</groupId>
            <artifactId>akka-actor</artifactId>
            <version>2.0.3</version>
        </dependency> 
   <dependency>
  <groupId>com.typesafe.akka</groupId>
  <artifactId>akka-remote</artifactId>
  <version>2.0.3</version>
</dependency>          
</dependencies>

    <repositories>
        <repository>
            <id>typesafe</id>
            <name>Typesafe Repository</name>
            <url>http://repo.typesafe.com/typesafe/releases/</url>
        </repository>
    </repositories>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

这是来自eclipse的错误

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 

    at Akka_Remote_Cluster.Akka.Remote.Cluster.Pi.main(Pi.java:16) 
```

关于问题所在的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-06T21:14:33.793

我已经解决了删除和重新下载所需的 Maven 工件的类似问题。第一次下载不知何故坏了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:22:45.013

我认为您需要`config-0.3.1.jar`从 akka 发行版（在库中）手动导入

# udp - 1个端口上的UDP打孔？

> ID：12644176
> 
> 赞同：0
> 
> 时间：2012-09-28T16:50:17.257
> 
> 标签：udp, hole-punching

我想使用 UDP 为我们系统的用户发送推送通知，但我想知道它是否可以工作？

假设我有一台具有端口的服务器，假设 UDP:8888 打开并等待连接。我的问题是：

*   是否有可能让许多用户连接到它？（比如 HTTP 90 服务？）

*   如果是，在客户端连接后，我将获取他的 UDP 端口号和 IP 地址 > 我可以建立从服务器到客户端 UDP 端口的新连接并向他发送一些数据吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T05:48:16.207

1.  当您在端口 UDP:8888 说服务器时，它将能够接收来自多个客户端的连接

2.  使用 SO_REUSEADDR 重用相同的 UDP 端口。[在 UDP 中重用端口号](https://stackoverflow.com/questions/3755726/reusing-a-port-number-in-a-udp)

# jira - 是否可以在 JIRA 中搜索其父项在不同查询中找到的子任务列表？

> ID：12644178
> 
> 赞同：7
> 
> 时间：2012-09-28T16:50:22.763
> 
> 标签：jira, jql

我有一个过滤器可以根据某些条件返回一组父任务。

我可以将其用作一组问题来进一步搜索`filter = FilterName` 我希望能够做的是在父字段搜索中使用它，例如

`parent IN (filter = FilterName)`

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T16:14:19.927

IN 运算符需要一个以逗号分隔的列表。虽然我不确定仅使用内置 JQL 来检索您正在寻找的信息的方法，但之前已经提出过这个问题，并且基于使用插件接受了答案。

[筛选以显示已筛选的父任务列表的子任务](https://stackoverflow.com/questions/5153024/filter-to-show-sub-tasks-of-a-filtered-list-of-parent-tasks)

好消息是引用的[Craftforge JQL](https://plugins.atlassian.com/plugin/details/31601)插件是~~免费~~的。

更新：正如 Micky 在评论中提到的，这个插件从 2.0 版开始不再免费（2013 年 4 月 16 日）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T11:53:18.413

[免费的Script Runner](https://marketplace.atlassian.com/plugins/com.onresolve.jira.groovy.groovyrunner)插件中包含的[Scripted JQL Functions](https://jamieechlin.atlassian.net/wiki/display/GRV/Scripted+JQL+Functions)可以让您做您需要的事情。

例如：

```
issueFunction in subTasksOf("filter = FilterName") 
```

# eclipse - POM 中的错误（eclipse osgi）

> ID：12644181
> 
> 赞同：0
> 
> 时间：2012-09-28T16:50:47.140
> 
> 标签：eclipse, maven, m2eclipse

我已经收到这个 Maven 错误一段时间了：

```
Plugin execution not covered by lifecycle configuration: com.cerner.engineering:cerner-    osgi-plugin:3.1.1:generate-osgi-manifest (execution: default, phase: 
 compile) 
```

这是我的 pom 有问题的片段。

```
<execution>
    <goals>
        <goal>generate-osgi-manifest</goal>
        <goal>generate-test-osgi-manifest</goal>
    </goals>
</execution> 
```

有人见过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:05:52.383

您必须手动配置生命周期映射。生命周期映射是由 m2e 引入的，因此如果您在 Eclipse 中构建，Eclipse 知道如何处理您的 Maven 插件。看到[这个问题](https://stackoverflow.com/questions/6352208/how-to-solve-plugin-execution-not-covered-by-lifecycle-configuration-for-sprin)。

# iphone - 从一个视图导航到另一个视图时如何删除空白？

> ID：12644184
> 
> 赞同：0
> 
> 时间：2012-09-28T16:51:00.703
> 
> 标签：iphone, objective-c, ios

我在我的第一个视图-A 中隐藏了导航栏，并希望在其他视图-B 上显示它。但是当我从视图-B 回到视图-A 时，我在视图-B 上获得了一些空白区域，然后才进入视图-A。

我怎样才能停止获得那个空白？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:54:46.380

稍后在 view-B 消失后隐藏导航栏。您可以使用`setNavigationBarHidden:animated:`视图-A 的`viewDidAppear`方法。

# c - 这个K&R ch3的前任是错的？

> ID：12644192
> 
> 赞同：0
> 
> 时间：2012-09-28T16:51:54.477
> 
> 标签：c

像这样的代码，在第 44 页。

```
 `int binsearch(int x, int v[], int n)
{
    int low, high, mid;

    low = 0;
    high = n - 1;
    while(low <= high){
        mid = (high+low)/2;
        if(x < v[mid]){
            high = mid + 1;
        }else if(x > v[mid]){
            low = mid + 1;
        }else{
            return mid;
        }
        printf("mid is %d\n",mid);
    }

    return -1;
}

int main(void)
{
    int v[] = {2,3,4,7,8,23,54,65,76};
    int ret = binsearch(7, v, sizeof(v)/sizeof(int));

    printf("%d,ret is %d\n", sizeof(v),ret);
    return 0;
}` 

编译运行，结果死循环！所以行“低=中+ 1；” 应该取为“low = mid;”，对吗？thx。

            回答 #1

赞同：6

时间：2012-09-28T16:55:51.777

您发布的代码中的问题不是 的值`low`，而是在测试中设置的值`high`... 如果`x`小于`v[mid]`，那么新的索引值`high`应该是小于 1，不大于`mid`。因此，您要更改以下内容：

```
if(x < v[mid]){
    high = mid + 1; 
```

到：

```
if(x < v[mid]){
    high = mid - 1; 
```

您可以在这里看到一个工作示例：http: [//ideone.com/E6Ma8](http://ideone.com/E6Ma8)

```

# security - 安全性：公网FTP传输

> ID：12644194
> 
> 赞同：-1
> 
> 时间：2012-09-28T16:52:07.000
> 
> 标签：security, ftp

我听说过将 FTP 用户名和密码发送到服务器进行身份验证的方式存在安全问题。在公共网络上使用 FTP 是否安全？

特别是我将 Notepad++ 与 ftp 插件一起使用，该插件在保存时（通过 ftp）将文件与服务器同步。

在公共网络上（比如大学校园）并使用 FTP 连接到您的服务器是否不安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:34:13.820

FTP 协议以“明文”形式通过网络或互联网发送数据。这意味着任何观看 FTP 流量的人（执行此操作的工具是免费提供的）都可以看到正在发送的实际数据。这包括 FTP 登录名和密码。一旦他们看到这一点，他们就可以使用捕获的登录信息登录到该服务器并访问该服务器上的所有其余文件。

许多 FTP 工具还包括使用其他协议来加密登录名、密码以及与服务器发送或接收的数据的能力。这些是 SFTP 和 FTPS。[在http://en.wikipedia.org/wiki/File_Transfer_Protocol](http://en.wikipedia.org/wiki/File_Transfer_Protocol)上查看有关这些安全协议的一些附加信息，以及黑客如何使用 FTP 在[http://blog.goanywheremft.com/2012/12/04访问敏感数据/黑客文件传输/](http://blog.goanywheremft.com/2012/12/04/hacking-file-transfers/)。

我希望这有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:01:36.903

在大多数 FTP 客户端中，都可以选择添加安全层。检查此（http://en.wikipedia.org/wiki/Comparison_of_FTP_client_software）链接，比较一些 FTP 客户端和您的功能。

请参阅“协议支持”主题，尤其是 SFTP 和 FTPS 列。

# javascript - YUI3 对象和命名空间与模块

> ID：12644199
> 
> 赞同：1
> 
> 时间：2012-09-28T16:52:16.967
> 
> 标签：javascript, yui3

我无法理解如何在 YUI3 中命名和实例化对象。在下面的示例中，我创建了一个 YUI3 模块，在 YUI.use 方法中加载它并尝试通过命名空间实例化我的对象。但是这不起作用，有人可以指出原因吗？尝试实例化新对象时出现错误：“对象不是函数”。

**测试模块.js**

```
YUI.add('test-module', function(Y){ 
var TestModule = {
    url: '',        

    /* Example function */
    doExample: function(){          
        console.log("doExample called");        
        }
}
// expose this back to the Y object
Y.namespace('SANDBOX.Test').TestModule = TestModule;
}, 1.0, {requires:['node']}); 
```

**索引.html**

```
YUI({
    modules:{
        'test-module': {
            fullpath: 'js/test-module.js',
            requires: ['node']
        }
    }
}).use('test-module', function(Y){
    var testModule = new Y.SANDBOX.Test.TestModule(); //this throws the error
    testModule.doExample();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T17:46:08.597

您的代码中的问题（您说它引发异常）是您在普通对象上使用 new () 。这不是构造函数。

换行

```
var testModule = new Y.SANDBOX.Test.TestModule(); //this throws the error 
```

为了

```
var testModule = Y.SANDBOX.Test.TestModule; //this doesn't throw the error 
```

至于实例化对象，它与普通的 Javascript 没有什么不同：

```
var f = function(){
    //This is the constructor
}
f.prototype.myfunction = function(){
    //this is a function
} 
```

您还可以使用他们的基础对象来创建您自己的自定义对象。

```
var x = Y.Base.create('ClassIdentifier', |Base object to extend from|, [Extensions], {
    //content of the object, functions, etc
}, {
    ATTRS: {
        |attributes goes here|
    }
};
Y.namespace('mynamespcae').X = x; 
```

然后你可以这样做：

```
var xInstance = new Y.mynamespace.X(); 
```

请参阅[http://yuilibrary.com/yui/docs/base/](http://yuilibrary.com/yui/docs/base/)或更具体的创建：http: [//yuilibrary.com/yui/docs/base/#create](http://yuilibrary.com/yui/docs/base/#create)

# c# - ToolStrip 文本框颜色

> ID：12644202
> 
> 赞同：0
> 
> 时间：2012-09-28T16:52:30.383
> 
> 标签：c#, colors, textbox, toolstrip

我在我的 C# WinForms 项目中设置了一个 ToolStrip，并在其上添加了一个 TextBox。我只是好奇由于 ToolStrip 和 TextBox 的颜色，TextBox 几乎不可见是否正常。

我可以在它周围放置一个边框或更改 TextBox 的背景颜色，但这看起来很奇怪。

是否有一些我没有想到的属性，我可以设置它以使其更加突出但又不会显得格格不入？

截图补充：

![文本框](../Images/cae3999c4219ecff43684d9c86f4d411.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:38:55.917

一个非常轻的边框可能是最好的。如果您使用与工具条相同的颜色，您将不会真正注意到底部的边框，但它会使搜索框的顶部突出。您可能还想在它周围添加一个边距，或者在它内部添加更少的填充，这样它就不会填满整个高度。

# asymptotic-complexity - 按大 O 复杂度排序函数

> ID：12644205
> 
> 赞同：0
> 
> 时间：2012-09-28T16:52:35.930
> 
> 标签：asymptotic-complexity

我试图按照从低复杂度到高复杂度的大 O 复杂度来排序以下函数：`4^(log(N))`, `2N`, `3^100`, `log(log(N))`, `5N`, `N!`, `(log(N))^2`

这：

1.  `3^100`
2.  `log(log(N))`
3.  `2N`
4.  `5N`
5.  `(log(N))^2`
6.  `4^(log(N))`
7.  `N!`

我只是通过使用维基百科上给出的图表来解决这个问题。有没有办法验证答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:57:37.753

```
3^100 = O(1)
log log N = O(log log N)
(log N)^2 = O((log N)^2)
N, 2N, 5N = O(N)
4^logN = O(e^logN)
N! = o(N!) 
```

你只犯了一个小错误。这是正确的顺序。

# filepicker.io - 使用 Aviary 编辑后替换 Filepicker 文件

> ID：12644206
> 
> 赞同：0
> 
> 时间：2012-09-28T16:52:37.060
> 
> 标签：filepicker.io, aviary

我的页面上每个上传的缩略图旁边都有一个编辑按钮，单击该按钮会调用 Aviary 模式。当我在 Aviary 中保存编辑结果时，我想做的是替换 FP 上的原始文件。filepicker.saveAs 似乎不是正确的解决方案，因为我不想保存到新文件，我只想替换 FP 上的文件。“Saving Back”文档似乎不适用，因为它说要将完整文件发布到原始 URL。理想情况下，我只想有一个函数获取原始 URL 和新的 Aviary URL，并替换原始 URL 的内容。

目前这可能吗？谢谢！！！

我在这里粘贴了我的代码：

```
<script src='http://feather.aviary.com/js/feather.js'></script>
<script src="https://api.filepicker.io/v0/filepicker.js"></script>
<script type="text/javascript">
$(document).on('click', '.delete-image', function(e) {
  var image = $(this).closest('tr').attr('data-image');
  $('.modal-footer .btn-danger').remove();
  $('.modal-footer').append("<button class='delete-confirmed btn btn-danger' data-image='"+image+"'>Delete</button>");
  $('#myModal').modal('show');
  return false;
});

$(document).on('click', '.delete-confirmed', function(e) {
  e.preventDefault();
  var image = $(this).attr('data-image');
  var row = $("tr[data-image="+image+"]");
  $('#myModal').modal('hide');
  $.ajax({
    url: row.attr('data-link'),
    dataType: 'json',
    type: 'DELETE',
    success: function(data) {
      if (data.success) {
        row.hide();
        filepicker.revokeFile(row.attr('data-fplink'), function(success, message) {
          console.log(message);
        });
      }
    }
  });
  return false;
});

//Setup Aviary
var featherEditor = new Aviary.Feather({
    //Get an api key for Aviary at http://www.aviary.com/web-key
    apiKey: '<%= AVIARY_KEY %>',
    apiVersion: 2,
    appendTo: ''
});
//When the user clicks the button, import a file using Filepicker.io
$(document).on('click', '.edit-image', function(e) {
  var image = $(this).closest('tr').attr('data-image');
  var url = $(this).closest('tr').attr('data-fplink');
  $('#aviary').append("<img id='img-"+image+"'src='"+url+"'>");
  //Launching the Aviary Editor
  featherEditor.launch({
    image: 'img-'+image,
    url: url,
    onSave: function(imageID, newURL) {
      //Export the photo to the cloud using Filepicker.io!
      //filepicker.saveAs(newURL, 'image/png');
      console.log('savin it!');
    }
  });
});

filepicker.setKey('<%= FILEPICKER_KEY %>');
var conversions = { 'original': {},
                    'thumb': {
                    'w': 32,
                    'format': 'jpg'
                  },
};
$(document).on("click", "#upload-button", function() {
  filepicker.getFile(['image/*'], { 'multiple': true,
                                    'services': [filepicker.SERVICES.COMPUTER, filepicker.SERVICES.URL, filepicker.SERVICES.FLICKR, filepicker.SERVICES.DROPBOX, filepicker.SERVICES.IMAGE_SEARCH],
                                    'maxsize': 10000*1024,
                                    'conversions': conversions
                                  },
                                  function(images){
      $.each(images, function(i, image) {
        $.ajax({
          url: "<%= product_images_path(@product.id) %>",
          type: 'POST',
          data: {image: JSON.stringify(image)},
          dataType: 'json',
          success: function(data) {
            if (data.success) {
              $('.files').append('<tr><td><img src="'+image.data.conversions.thumb.url+'"</td></tr>')
            }
          }
        });
      });
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:10:02.673

您实际上也可以将 url 发布到文件选择器 url，例如

```
curl -X POST -d "url=https://www.filepicker.io/static/img/watermark.png"
    https://www.filepicker.io/api/file/gNw4qZUbRaKIhpy-f-b9 
```

或在javascript中

```
$.post(fpurl, {url: aviary_url}, function(response){console.log(response);}); 
```

# asp.net-mvc - 使用 Asp.Net MVC Razor 在另一个 html 标签属性中添加 html 标签

> ID：12644211
> 
> 赞同：-2
> 
> 时间：2012-09-28T16:53:10.627
> 
> 标签：asp.net-mvc

我想在另一个 html 标签属性中添加 html 标签，例如：

```
<p title="<strong class="cssClass">bold</strong>">
some text
</p> 
```

我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:01:35.483

仅使用编码：

```
<p title="@HttpUtility.HtmlEncode("<strong class=\"cssClass\">bold</strong>")"> 
some text 
</p> 
```

但您收到：

```
&lt;strong class=&quot;cssClass&quot;&gt;bold&lt;/strong&gt; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:02:29.547

在浏览器中，标题具有默认的默认行为，您无法以本机方式更改它。如果你想格式化 Title 属性来做一个时尚的工具提示，你可以使用一个 jQuery 插件来做到这一点。检查[此链接](http://www.1stwebdesigner.com/css/stylish-jquery-tooltip-plugins-webdesign/)。它显示了许多插件来完成这项工作。

# ios - 间歇性 NSArray 索引异常

> ID：12644212
> 
> 赞同：0
> 
> 时间：2012-09-28T16:53:26.613
> 
> 标签：ios, xcode, debugging

我每天至少发生一次崩溃，我似乎真的无法解决。它似乎随机发生在我身上，我无法追踪堆栈以了解它发生的原因。如果有人可以为我指出正确的方向，甚至可以向我展示一些关于如何正确跟踪完美值的在线文档和教程。我最了解的是，有些东西正试图访问数组中的索引，但我终其一生都无法弄清楚该数组是什么。我在下面的输出窗口中包含了信息：

```
2012-09-28 12:45:26.884 TestApp[1683:c07] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 0 beyond bounds for empty array'
*** First throw call stack:
(0x1bdd052 0x19ccd0a 0x1bc9db8 0x29522 0x23e76 0x22bed 0x21e36 0xdfee 0xdba8 0xd3cc 0x1bdee72 0x13339ef 0x1bb197f 0x1b14b73 0x1b14454 0x1b13db4 0x1b13ccb 0x2692879 0x269293e 0xa1ba9b 0x2ded 0x2d25)
terminate called throwing an exceptionCurrent language:  auto; currently objective-c
(gdb) bt
#0  0x98468a6a in __pthread_kill ()
#1  0x98554acf in pthread_kill ()
#2  0x9858b4f8 in abort ()
#3  0x021cbe78 in abort_message ()
#4  0x021c989e in default_terminate ()
#5  0x019ccf4b in _objc_terminate ()
#6  0x021c98de in safe_handler_caller ()
#7  0x021c9946 in std::terminate ()
#8  0x021cab3e in __cxa_rethrow ()
#9  0x019cce49 in objc_exception_rethrow ()
#10 0x01b13e10 in CFRunLoopRunSpecific ()
#11 0x01b13ccb in CFRunLoopRunInMode ()
#12 0x02692879 in GSEventRunModal ()
#13 0x0269293e in GSEventRun ()
#14 0x00a1ba9b in UIApplicationMain ()
#15 0x00002ded in main (argc=1, argv=0xbffff39c) at /Users/seb/Desktop/Development/main.m:14 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T18:05:20.717

您需要使用 Xcode 调试器：

*   点击工具栏中的断点按钮：

![断点按钮](../Images/5ef8e37a5ddef54f0e3d0800e7f083e1.png)

*   点击左侧窗格中的断点选项：

![在此处输入图像描述](../Images/49e9ea8f2a9893dbe6e8f3ef0d0919db.png)

*   点击左下方的“+”按钮，然后选择“添加异常断点”：

![在此处输入图像描述](../Images/d329503cd818fe4497743384b15a8d4d.png)

*   在呈现的视图中点击完成，您将看到如下内容（顶部已禁用）：

![在此处输入图像描述](../Images/bd53c74916d5125b41eeb552ee9fa5ea.png)

*   确保您的应用方案已启用 lldb：

![在此处输入图像描述](../Images/8d833a364ca4920e0a4ecb26f62ecc0a.png)

# android - 如何将单元格高度设置为 android TableLayout 中的宽度？

> ID：12644213
> 
> 赞同：1
> 
> 时间：2012-09-28T16:53:27.237
> 
> 标签：android, android-tablelayout

我有 TableLayout 如下：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:stretchColumns="1">

<TableRow>
  <Button
     android:id="@+id/b1"
     android:layout_width="0dip"
     android:layout_height="fill_parent"
     android:layout_weight="1"
     android:gravity="center" />
  <Button
     android:id="@+id/b2"
     android:layout_width="0dip"
     android:layout_height="wrap_content"
     android:layout_weight="1"
     android:gravity="center" />
  <Button
     android:id="@+id/b3"
     android:layout_width="0dip"
     android:layout_height="fill_parent"
     android:layout_weight="1"
     android:gravity="center" />
 </TableRow>
</TableLayout> 
```

每个 Button 具有相同的宽度。我希望这些按钮的高度与它们的宽度完全相同。我尝试通过以下方式以编程方式进行操作：

```
Button b1 = (Button) findViewById(R.id.b1);
b1.setHeight(b1.getWidth()); 
```

但它不起作用（它给了我 0 的值）。我想是因为当我这样做时（在 onCreate 方法中）按钮尚未设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T16:58:56.137

首先，您是对的，您得到的值为 0，因为当您尝试获取 button 时屏幕尚未绘制`width`。

如我所见，按照您的意愿进行操作的唯一可能性是在 XML 文件中为它们提供预先定义的值。

例如：

```
 <Button
     android:id="@+id/b1"
     android:layout_width="25dip"
     android:layout_height="25dip"
     android:gravity="center" /> 
```

以编程方式设置宽度和高度：

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);

btnWidth = metrics.heightPixels/3 - 50;//gap
btnHeight = btnWidth;

Button b1 = (Button) findViewById(R.id.b1);
b1.setHeight(btnWidth);
b1.setWidth(btnWidth); 
```

# atk4 - 如何不使用 Form->setModel() 将从 From 发布的数据保存到数据库中

> ID：12644215
> 
> 赞同：1
> 
> 时间：2012-09-28T16:53:31.423
> 
> 标签：atk4, php

我知道这是一个简单而蹩脚的问题，但仍然如此。

我有一个不应该显示所有模型字段的表单，而只显示其中的一些。这就是我不能使用 Form->setModel($m) 的原因，因为它会自动将所有字段添加到 Form 中。

所以我将模型添加到页面中，然后将表单添加到页面中，然后像这样使用 form->importFields：

```
$m = $p->add('Model_Example');
$f = $p->add('Form');
//$f->setModel($m); // can't use this because that'll import all model fields
$f->importFields($m,array('id','description'));
$f->addSubmit('Save'); 
```

在这种情况下我不明白的是 - 如何将这些数据保存在数据库中，因为 onSubmit 事件中的 $f->update() 将不起作用。基本上我尝试的任何方法都不起作用，因为 Form 没有关联的模型（带有 setModel）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:48:06.753

I have solution for mixed form. Add custom form fields in form init and manipulate with them by hooks ('afterLoad','beforeSave') In this case you can use setModel() method

```
$form->setModel('Some_Model',array('title','description'));

class Form_AddTask extends Form {
    function init(){
        parent::init();
        $this->r=$this->addField('autocomplete/basic','contact');
        $this->r->setModel('ContactEntity_My');
    }
    function setModel($model,$actual_fields=undefined){
        parent::setModel($model,$actual_fields);
        $this->model->addHook('afterLoad',array($this,'setContactId'));
        $this->model->addHook('beforeSave',array($this,'setContactEntityId'));
        return $this->model;
    }

    // set saved value for editing
    function setContactId() {
        $this->r->set($this->model->get('contact_entity_id'));
    }
    function setContactEntityId() {
        $this->model->set('contact_entity_id',$this->get('contact'));
    }
} 
```

There is a hook 'validate' as well in Form_Basic::submitted(), so you can add

```
 $this->addHook('validate',array($this,'validateCustomData')); 
```

and validate your data in Form::validateCustomData()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T11:36:20.703

这条路怎么样？

$your_form->setModel($model,array('name','email','age'));

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T19:15:00.553

为什么不在模型中将字段设置为隐藏？

IE：

类 Model_Example 扩展 Model_Table { public $table='assessment';

```
function init() {
    parent::init();

    $grant->addField('hidden_field')->hidden(true);
} 
```

}

接着：

```
$m = $p->add('Model_Example');
$f = $p->add('Form');
$f->setModel($m); 
```

# c - fgets 在 C 中不起作用（标准输入看起来已满）

> ID：12644227
> 
> 赞同：0
> 
> 时间：2012-09-28T16:54:08.323
> 
> 标签：c, buffer, stdin, fgets

这是我的代码，请看一下。我的菜单不断循环，不要求任何输入。我不知道为什么`fgets`不能按预期工作。

当我运行我的代码时，即使我摆脱了循环，它也会继续循环：

```
int main ()
{ 
    char input[3];
    char opt1;
    int flag=1,n;

    /*hrtime_t start, end;*/
    dlist_t lst;

    list_init (&lst);
    list_input (&lst);
    bubblesort (&lst);

    list_display(&lst);

    while(flag == 1)
    {
        printf("\nMain Menu\n");
        printf("-----------\n");
        printf("1\. Bubble Sort\n");
        printf("2\. Selection Sort\n");
        printf("3\. Quick sort\n");
        printf("4\. Merge Sort\n");
        printf("5\. Exit\n");

        printf("\nEnter your option[1-5]: ");

        fgets(input, 3, stdin);
        opt1 = input[0];

        /* If condition to display the main menu if user inputs enter */
        if(opt1 == '\n')
        {
            flag =1;
            continue;
        }

        n = strlen(input)-1;

        if(input[n] == '\n')
        {
            input[n] = '\0';
        } else {
            printf("\nInvalid input. ");
            printf("Please note that the maximum length of the input is 1.");
            readRestOfLine();
            flag =1;
            continue;
        }

        switch(opt1)
        {
            case '1':
                /*start = gethrtime();
                  bubbleSort(list);
                  end = gethrtime();*/
                printf("\nBubble Sorted List\n");
                break;
            case '2':
                /* start = gethrtime();
                   selectionSort(list);
                   end = gethrtime(); */
                printf("\nSelection Sorted List\n");
                break;
            case '3': 
                /*start = gethrtime();
                  quickSort(list, 0, list->list_len-1);
                  end = gethrtime(); */
                printf("\nQuick Sorted List\n");

                break;
            case '4':
                /*start = gethrtime();
                  list->head = mergeSort(list->head);
                  mergeSortReverse(list);
                  end = gethrtime(); */
                printf("\nMerge Sorted List\n");
                break;
            case '5':
                SNExit();
                list_free (&lst);
                printf("\n\n  ********* THANK YOU **********");
                return EXIT_SUCCESS;
            default :
                {
                    printf("\nPlease enter valid option\n");
                    break;
                }
        }
    }
    return EXIT_SUCCESS;
    return 0;
}

/****************************************************************************
 * Function readRestOfLine() is used for buffer clearing.
 ****************************************************************************/
void readRestOfLine()
{
    int c;

    /* Read until the end of the line or end-of-file. */
    while ((c = fgetc(stdin)) != '\n' && c != EOF)
        ;
    fflush(stdin);
    /* Clear the error and end-of-file flags. */
    clearerr(stdin);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:05:27.103

我不知道...我运行了您的代码，它对我来说效果很好，所以我不知道您是如何丢失输入的。你复制了完整的代码吗？

既然您只使用第一个字符，为什么还要将其读入缓冲区？也许通过简化输入，您可以避免错误，只需获取字符：

```
...
printf("4\. Merge Sort\n");
printf("5\. Exit\n");
printf("\nEnter your option[1-5]: ");
fflush(stdout);  
opt1=getchar();
getchar();  // Extra "getchar" call to get rid of the newline
... 
```

**编辑：**

让我们尝试简化您的问题以了解故障所在。尝试运行此代码：

```
int main()
{
  char input = '0';
  input = getchar();
  getchar();
  printf("%c\n", input);
  return 0;
} 
```

这是否在您的系统上编译/运行/工作？如果是这样，问题不在于您如何获取字符串/字符，而在于您的代码的其他内容。

# wso2 - Ubuntu Server 12.04 64 位上的 WSO2 Carbon 错误

> ID：12644228
> 
> 赞同：3
> 
> 时间：2012-09-28T16:54:13.830
> 
> 标签：wso2, ubuntu-12.04, wso2carbon, wso2dss

当我尝试运行 WSO2 Dataservices 或其他 WSO2 Carbon 服务器时，出现以下错误：

```
$ sudo sh /opt/wso2dataservices-2.6.3/bin/wso2server.sh start
Error: JAVA_HOME is not defined correctly.:
CARBON cannot execute java 
```

然后我检查 JAVA_HOME 变量：

```
$ echo $JAVA_HOME
/usr/lib/jvm/jdk1.6.0_35 
```

这是正确的道路。该机器已安装 Oracle Java JDK 1.6 64 位和 Ubuntu Server 12.04 64 位。

我真的很感谢你的回答。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T08:32:45.243

您正在以超级用户 (sudo) 身份运行服务器，这不是必需的。但是我认为您没有在超级用户环境中设置 JAVA_HOME。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-11T11:36:49.150

你可以像这样使用它

```
sudo JAVA_HOME=/usr/lib/jvm/java-7-oracle ./wso2server.sh 
```

# iphone - iOS 6 Facebook 发布过程以“remote_app_id 与存储的 id 不匹配”错误结束

> ID：12644229
> 
> 赞同：27
> 
> 时间：2012-09-28T16:54:16.497
> 
> 标签：iphone, objective-c, facebook

我正在尝试执行一个简单的发布程序：

```
- (IBAction)directPostClick:(id)sender {
    self.statusLabel.text = @"Waiting for authorization...";
    if (self.accountStore == nil) {
        self.accountStore = [[ACAccountStore alloc] init];
    }   
    ACAccountType * facebookAccountType = [self.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
    NSArray * permissions = @[@"publish_stream", @"user_checkins", @"publish_checkins", @"user_likes", @"user_videos"];
    NSDictionary * dict = @{ACFacebookAppIdKey : @"My app id here", ACFacebookPermissionsKey : permissions, ACFacebookAudienceKey : ACFacebookAudienceOnlyMe};
    [self.accountStore requestAccessToAccountsWithType:facebookAccountType options:dict completion:^(BOOL granted, NSError *error) {
        __block NSString * statusText = nil;
        if (granted) {
            statusText = @"Logged in";
            NSArray * accounts = [self.accountStore accountsWithAccountType:facebookAccountType];
            self.facebookAccount = [accounts lastObject];
            NSLog(@"account is: %@", self.facebookAccount);
            self.statusLabel.text = statusText;
            [self postToFeed];
        }
        else {
            self.statusLabel.text = @"Login failed";
            NSLog(@"error is: %@", error);
        }
    }];
} 
```

已编辑： *问题是当我单击 alertView 的 OK 按钮（不允许也不起作用）时，什么也没有发生！*- 这种行为现在随着这个 [iOS 6 Facebook 发布过程而改变，结果是“remote_app_id 与存储的 id 不匹配”](https://stackoverflow.com/questions/12671420/ios-6-facebook-posting-procedure-ends-up-with-remote-app-id-does-not-match-stor)所以不仅仅是“什么都没有发生”，我有一个错误“Facebook 服务器无法满足这个访问请求：remote_app_id 确实与存储的 ID 不匹配”

![在此处输入图像描述](../Images/6ffce6bb995e50d2aba769035035a7d9.png)

所以，似乎警报视图的点击处理程序什么都不做，我的完成处理程序永远不会被调用。我确实已经遇到了类似的问题：[iOS 6 Social integration - go to settings issue](https://stackoverflow.com/questions/12638132/ios-6-social-integration-go-to-settings-issue) 我认为这里也是同样的问题。你们怎么看？PS 我在 MAC mini、OS X 10.8.1 上运行最新的 xcode 4.5 (4G182) 并使用 iPhone 6.0 模拟器。

添加：根据 Bjorn 的请求添加该`postToFeed`方法，尽管它从未被调用：

```
- (void)postToFeed {
    NSDictionary * parameters = @{@"message" : @"Hello world!"};
    NSURL * feedUrl = [NSURL URLWithString:@"https://graph.facebook.com/me/feed"];
    SLRequest * request = [SLRequest requestForServiceType:SLServiceTypeFacebook requestMethod:SLRequestMethodPOST URL:feedUrl parameters:parameters];
    request.account = self.facebookAccount;
    [request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
        dispatch_async(dispatch_get_main_queue(), ^{
            self.statusLabel.text = @"Posted!";
        });
    }];
} 
```

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-10-02T08:58:38.500

在使用 Accounts Framework 和 Facebook 集成时，我也遇到了一些困难。这是我学到的东西以及我是如何让它发挥作用的。

**1\. 确保您在 Facebook 上正确**
设置了您的 App 您需要将您的 App 与 Facebook 的集成方式设置为**Native iOS App**，并在指定字段中输入您的 App 的 Bundle ID。（编辑：请注意捆绑 ID 区分大小写）您现在可以将 iTunes ID 设置为 0。启用*Facebook 登录*并将高级设置选项卡中的*App Type设置为***Native/Desktop**。*还将客户端中的 App Secret*
设置为**No**。

 ***如果这些选项中的一个或多个未正确设置，您很可能会收到错误消息`The Facebook server could not fulfill this access request: remote_app_id does not match stored id`。

（编辑：您还必须确保沙箱被禁用。）

**2\. 首次安装 Facebook 应用**
程序在 iOS（和 Mac OS X 也是）上通过原生 Facebook 集成首次安装应用程序时，您必须请求基本读取权限！没有其他的`email`,`user_birthday`和`user_location`在这里是允许的。使用`user_about_me`，根据 Facebook 文档，这也是基本的读取权限，但不起作用。如果您之前使用过 Facebook JavaScript SDK 或 Facebook PHP SDK，这会非常令人困惑，因为默认情况下它会要求您提供基本权限，而您无需执行任何操作。[Facebook 还更新了他们的文档，其中包含有关如何](https://developers.facebook.com/docs/howtos/ios-6/)在 iOS 6 上使用新 Facebook SDK的简短分步指南。

**3\. 请求额外权限**
重要的是要知道，您不能同时请求读取和写入权限。这也是经验丰富的 Facebook SDK 开发人员可能会感到困惑的地方。请求`read_stream`权限连同`publish_stream`权限会导致请求失败，导致报错*An app may not ask for read and write权限同时*。

[由于 Facebook 在Permission Reference](https://developers.facebook.com/docs/authentication/permissions/#extended_perms)中并没有真正区分读/写权限，因此您必须自己识别写权限。它们通常以 , 为前缀，`manage_*`或以 . 为后缀。`publish_*``create_*``*_management`

Facebook 也不建议在获得基本权限后立即请求额外权限。[文档](https://developers.facebook.com/docs/tutorial/iossdk/upgrading-from-3.0-to-3.1/)说“您现在需要单独（并按此顺序）请求读取和发布权限。很可能，您将在应用程序启动并且用户首次登录时请求个性化的读取权限。稍后，如果合适，您的当应用程序打算向 Facebook 发布数据时，它可以请求发布权限。[...] 分别请求这两种类型也大大提高了用户授予发布权限的机会，因为您的应用程序只会在需要的时候寻求它们它们，最有可能是当用户有更强烈的意图时。”。

**4\. 示例代码**
以下示例代码应该适用于 iOS 和 Mac OS X：

```
ACAccountType * facebookAccountType = [self.accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

// At first, we only ask for the basic read permission
NSArray * permissions = @[@"email"];

NSMutableDictionary *dict = [[NSMutableDictionary alloc] initWithObjectsAndKeys:@"My app id here", ACFacebookAppIdKey, permissions, ACFacebookPermissionsKey, ACFacebookAudienceOnlyMe, ACFacebookAudienceKey, nil];

[self.accountStore requestAccessToAccountsWithType:facebookAccountType options:dict completion:^(BOOL granted, NSError *error) {
    if (granted && error == nil) {
        /** 
        * The user granted us the basic read permission.
        * Now we can ask for more permissions
        **/
        NSArray *readPermissions = @[@"read_stream", @"read_friendlists"];
        [dict setObject:readPermissions forKey: ACFacebookPermissionsKey];

        [self.accountStore requestAccessToAccountsWithType:facebookAccountType options:dict completion:^(BOOL granted, NSError *error) {
            if(granted && error == nil) {
                /**
                * We now should have some read permission
                * Now we may ask for write permissions or
                    * do something else.
                **/
            } else {
                NSLog(@"error is: %@",[error description]);
            }
        }];
    } else {
        NSLog(@"error is: %@",[error description]);
    }
}]; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-11T08:00:34.183

如果您尝试从非开发人员用户的应用程序访问 facebook 帐户，请确保`sandbox mode`未激活。***

# android - 使用 dd (Android) 将文件打印到进程标准输出

> ID：12644233
> 
> 赞同：2
> 
> 时间：2012-09-28T16:54:29.373
> 
> 标签：android, shell, stdout, dd

我正在尝试通过以下方式获取 dd 的输出。这个想法是以编程方式捕获 dd 发送到“of”的任何内容。

```
//Process p;
// ...
p = Runtime.getRuntime().exec(new String[]{"su", "-c", "dd if=/dev/something of=stdout bs=1024"}); 
```

使用“cat /some_file”而不是“dd ...”命令**可以**按预期工作，但我希望它可以与 dd 一起使用。

我应该为标准输出使用什么，因为 /dev/stdout 在 Android 中不存在？

这甚至会起作用吗？

您可以假设该应用程序具有 root 权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:18:27.107

如果设备不是太大，您可以将其添加到文件中，然后将文件分类为粗壮...

```
//Process p; 
// ... 
p = Runtime.getRuntime().exec(new String[]{"su", "-c", "dd if=/dev/something of=/dev/mnt/sdcard/myfile bs=1024"}); 
p = Runtime.getRuntime().exec(new String[]{"cat", "/dev/mnt/sdcard/myfile"}); 
```

祝你好运

--已编辑--

我刚刚记得，如果您省略“of=”操作数，“dd”命令将写入标准输出。因此，您的代码更改为：

```
//Process p;  
// ...  
p = Runtime.getRuntime().exec(new String[]{"su", "-c", "dd if=/dev/something bs=1024"}); 
```

我已经对其进行了测试，并且可以正常工作。

# google-analytics - G Analytics：他们复制了我的网站并扭曲了我的分析数据

> ID：12644235
> 
> 赞同：0
> 
> 时间：2012-09-28T16:54:38.063
> 
> 标签：google-analytics, analytics

有人复制了我的网站，在源代码中，显然有 Analytics 代码来跟踪我的访问......所以现在 Analytics 数据被扭曲了，因为跟踪其他网站的访问就像我自己的网站一样......

我怎样才能禁止这个域？我应该向谷歌报告这个问题吗？我真的想惩罚这个网站..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T16:58:48.943

设置过滤器以排除他们正在使用的域。（或者只是用你的设置一个包含过滤器）

[谷歌分析配置文件过滤器](http://support.google.com/analytics/bin/answer.py?hl=en-us&answer=1033162)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T16:58:29.923

为您的域设置新的配置文件。对于该配置文件，您可以创建一个新过滤器以仅包含来自服务器 IP 地址的流量。

是的，您应该将问题报告给 Google，但是除了将您转移到新的房产 ID 之外，他们可能几乎无法解决该问题。

# algorithm - 在列表中查找共同名称的算法

> ID：12644236
> 
> 赞同：1
> 
> 时间：2012-09-28T16:54:40.443
> 
> 标签：algorithm, sorting

我一直在阅读 Robert Sedgewick 所著的 Algorithms 一书中的 Algorithms，并且我一直被困在一个锻炼问题上。这是问题：

每个给定 3 个`N`名称列表，找到一个算法来确定所有三个列表中是否有任何共同的名称。该算法必须具有 O(Nlog ^N ) 复杂度。您只能使用排序算法，并且您可以使用的唯一数据结构是堆栈和队列。

我想我可以使用 HashMap 来解决这个问题，但是这些问题限制了我们这样做。即使那样，它仍然不会具有 Nlog ^N的复杂性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T17:02:50.413

如果您对每个列表进行排序，那么您可以通过选择列表 A 的第一个名称将其与列表 B 中的第一个名称进行比较，如果该元素为 <对于列表A，弹出列表b元素并重复直到列表B> =列表A。如果找到匹配项，则在C上重复该过程。如果在C中找到匹配项也返回true，否则返回a中的下一个元素.

现在您必须在 n log n 时间内对所有列表进行排序。你可以用你最喜欢的排序算法来做，尽管你必须有一点创造性，只使用堆栈和队列。我可能会推荐合并排序

下面的伪代码有点混乱，因为我正在更改我正在迭代的列表

伪代码：假设 listA、b 和 c 是排序的队列，其中最小的名称位于队列的顶部。

```
eltB = listB.pop()
eltC = listC.pop()
for eltA in listA:
    while(eltB<=eltA):
        if eltB==eltA:                
            while(eltC<=eltB):
                if eltB==eltC:
                    return true
                if eltC<eltB:
                    eltC=listC.pop();
        eltB=listB.pop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T01:48:29.577

脚步：

1.  使用`O(N lgN)`排序算法对三个列表进行排序。
2.  从每个列表中弹出一项。
3.  如果您尝试从中弹出的任何列表为空，那么您就完成了，即不存在公共元素。
4.  否则，比较三个元素。
5.  如果元素相等，你就完成了——你找到了共同的元素。
6.  否则，保留三个元素中的最大值（恒定时间）并从丢弃两个元素的*相同列表中进行补充。*
7.  转到第 3 步。

第 1 步`O(N lgN)`执行，其余步骤执行`O(N)`，因此总体复杂性为`O(N lgN)`.

# objective-c - 如何完成这个 nslog 打印

> ID：12644247
> 
> 赞同：0
> 
> 时间：2012-09-28T16:55:11.843
> 
> 标签：objective-c, xcode

我试图完成这个方法很长一段时间，但我有点卡住了。我正在尝试将 slog 设置为 1,2,3,4,beep 而不是当前正在执行的操作 1,2,3,4,5,beep,6。我想知道如何执行这样的方法。我的代码还有更多，但我会将基本代码放上去。（ps）我做了很多尝试来解决这个问题，所以我发布了基本代码供大家理解。

```
-(IBAction)setmethod:(id)sender{
   for (int k=1;i<=20;k++){
       NSLog( @"%d",k);                
       if(k % 5 == 0) { NSLog( @"beep"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T16:59:03.773

您可以简单地将第一个 NSLog 移动到 else 案例：

```
for (int k=1;i<=20;k++){    
    if(k % 5 == 0) { 
       NSLog( @"beep");
    }
    else{
       NSLog( @"%d",k);                
    }
} 
```

# tabs - 隐藏容器时 Sound Manager 2 出现错误（选项卡）

> ID：12644248
> 
> 赞同：1
> 
> 时间：2012-09-28T16:55:12.513
> 
> 标签：tabs, soundmanager2

我成功地使用播放列表安装了带有多个 MP3 的 Sound Manager 2。这个播放列表包含在一个选项卡中（不是谈论浏览器选项卡，只是同一页面中的选项卡），我有一个外观错误。我也用SM2的360-ui播放器。这是场景：

1.  我显示包含播放列表的选项卡（默认隐藏）
2.  我发出第一个声音
3.  显示另一个标签
4.  第一个声音结束，所以第二个声音自动播放
5.  我显示包含播放列表的选项卡，并且播放器的外观不好。

请问有人可以帮我吗？

# c++ - 链接器错误：Boost 序列化库的静态链接

> ID：12644254
> 
> 赞同：0
> 
> 时间：2012-09-28T16:55:30.850
> 
> 标签：c++, boost, linker

我正在尝试将 Boost 序列化库链接到我的代码。但这似乎不起作用。

g++ serialize.cpp -L"/usr/local/lib/libboost_serialization.a"

错误 ：

/tmp/ccw7eX4A.o: 在函数`boost::archive::text_oarchive::text_oarchive(std::basic_ostream<char, std::char_traits<char> >&, unsigned int)': serializep.cpp:(.text._ZN5boost7archive13text_oarchiveC2ERSoj[_ZN5boost7archive13text_oarchiveC5ERSoj]+0x25): undefined reference to`boost::archive::text_oarchive_impl::text_oarchive_impl(std::basic_ostream >&, unsigned int)' ....collect2: ld 返回 1 个退出状态

但是当我链接为共享库 g++ serialize.cpp -lboost_serialization 时，它工作正常。

我在这里想念什么

PS：具有相同问题的其他 StackOverflow 帖子没有适用于上述错误的答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T03:33:15.107

> g++ serialize.cpp -L"/usr/local/lib/libboost_serialization.a"

这个命令行是*完全*错误的：`-L`标志告诉链接器在哪里寻找库；它不会*告诉*链接器使用您提供的库。试试这个：

```
g++ serialize.cpp /usr/local/lib/libboost_serialization.a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:40:40.250

由于我无法重现您的问题，所以我能做的最好是告诉您我通常如何针对 boost_serialization 进行静态编译：

```
 g++ myapp.cpp -o myapp -Wall -static -static-libgcc -I/usr/local/include -L/usr/local/lib -lboost_serialization -lpthread 
```

# c# - SHA1Managed.ComputeHash在不同的服务器上偶尔不同

> ID：12644257
> 
> 赞同：9
> 
> 时间：2012-09-28T16:55:46.947
> 
> 标签：c#, encoding, hash, sha1

**背景**（您可以跳过此部分）

我有大量数据（大约 3 mb）需要在数百台机器上保持最新。有些机器运行 C#，有些运行 Java。数据可能随时更改，需要在几分钟内传播给客户端。数据以 Json 格式从 4 个负载平衡服务器传送。这 4 台服务器运行带有 Mvc 3 和 C# 4.0 的 ASP.NET 4.0。

在 4 个服务器上运行的代码有一个散列算法，该算法对 Json 响应进行散列，然后将散列转换为字符串。这个哈希是给客户端的。然后，每隔几分钟，客户端会使用哈希 ping 服务器，如果哈希过期，则返回新的 Json 对象。如果散列仍然是当前的，则返回带有空正文的 304。

有时 4 个框生成的哈希值在各个框之间不一致，这意味着客户端不断下载数据（每个请求可能会访问不同的服务器）。

**代码片段**

这是用于生成哈希的代码。

```
internal static HashAlgorithm Hasher { get; set; }
...
Hasher = new SHA1Managed();
...
Convert.ToBase64String(Hasher.ComputeHash(Encoding.ASCII.GetBytes(jsonString))); 
```

为了尝试调试问题，我将其拆分如下：

```
Prehash = PreHashBuilder.ToString();
ASCIIBytes = Encoding.ASCII.GetBytes(Prehash);
HashedBytes = Hasher.ComputeHash(ASCIIBytes);
Hash = Convert.ToBase64String(HashedBytes); 
```

然后我添加了一条吐出上述值的路线，并使用 Beyond Compare 来比较差异。

字节数组被转换为字符串格式以供 BeyondCompare 使用，方法是使用：

```
private static string GetString(byte[] bytes)
{
    StringBuilder sb = new StringBuilder();
    foreach (byte b in bytes)
    {
        sb.Append(b);
    }
    return sb.ToString();
} 
```

如您所见，字节数组按字面意思显示为字节序列。它没有被“转换”。

**问题**

我发现 Prehash 和 ASCIIBytes 的值是相同的，但是 HashedBytes 的值是不同的——这意味着 Hash 也是不同的。

我在 4 个服务器上重启了 IIS 网站几次，当它们有不同的哈希值时，比较了 BeyondCompare 中的值。在任何情况下，都是“HashedBytes”值不同（SHA1Managed.ComputeHash(...) 的结果）

**问题**

我究竟做错了什么？ComputeHash 函数的输入是相同的。SHA1Managed 机器是否依赖？这不会因为 4 台机器有一半的时间具有相同的哈希值。

我搜索了 StackOverFlow 和 Bing，但找不到其他有此问题的人。我能找到的最接近的是编码有问题的人，但我想我已经证明编码不是问题。

**输出**

我希望不要因为时间太长而将所有内容都倾倒在这里，但这是我正在比较的转储的片段：

哈希：o1ZxBaVuU6OhE6De96wJXUvmz3M=
HashedBytes:163861135165110831631611916022224717299375230207115
ASCIIBytes:.... Prehash:...

当我比较不同服务器上的两个页面时，ASCII 字节是相同的，但 HashedBytes 不是。我用于字节的转储方法不进行任何转换，它只是按顺序转储每个字节。我可以用“。”分隔字节。我想。

**跟进** 我已更改 b.ToString(CultureInfo.InvariantCulture) 并将 HashAlgorithm 设为局部变量而不是静态属性。我正在等待代码部署到服务器。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-28T18:36:33.313

我一直在尝试复制这个问题，但是一旦我将 SHA1Managed 属性设置为局部变量而不是全局静态变量，我就无法这样做。

问题在于多线程。我的代码是线程安全的，除了我标记为静态的 SHA1Managed 类。我假设 SHA1Managed.ComputeHash 在下面是线程安全的，但如果标记为内部静态，显然它不是。

重复一遍，如果标记为内部静态，则 SHA1Managed.ComputeHash 不是线程安全的。

MSDN 状态：

```
Any public static (Shared in Visual Basic) members of this type are thread safe. Any instance members are not guaranteed to be thread safe. 
```

我不知道为什么内部静态的行为与公共静态不同。

我会将@pst 标记为答案并添加评论以澄清问题，但@pst 发表了评论，因此我无法将其标记为答案。

感谢您的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:56:30.120

问题是您的代码可能与前导 0 混淆，请使用以下数组作为字符串代码进行比较。它将产生可靠的结果，并且专门设计用于将字节数组转换为字符串，以便它们可以在机器之间传输。

```
using System.Runtime.Remoting.Metadata.W3cXsd2001;

public byte[] StringToBytes(string value)
{
    SoapHexBinary soapHexBinary = SoapHexBinary.Parse(value);
    return soapHexBinary.Value;
}

public string BytesToString(byte[] value)
{
    SoapHexBinary soapHexBinary = new SoapHexBinary(value);
    return soapHexBinary.ToString();
} 
```

此外，我建议您检查 JSON 是否存在细微差别，因为这会产生完全不同的散列。例如，某些文化将数字“一千六百点七”表示为`1,600.7`、`1 000.7`或什至`1 600,7`（请参阅[此 Wikipedia](http://en.wikipedia.org/wiki/Decimal_mark#Hindu.E2.80.93Arabic_numeral_system)页面）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T17:40:59.090

您的 GetString 方法可能会在不同文化的机器上产生不同的结果，因为 StringBuilder.Append(byte) 调用 byte.ToString(CultureInfo.CurrentCulture)。尝试

```
private static string GetString(byte[] bytes)
{
    StringBuilder sb = new StringBuilder();
    foreach (byte b in bytes)
    {
        sb.Append(b.ToString(CultureInfo.InvariantCulture));
    }
    return sb.ToString();
} 
```

但是使用不使用字节值的十进制字符串表示的方法会更好。

# c++ - 使用存根函数创建 C++ 对象文件库 (.lib)

> ID：12644263
> 
> 赞同：1
> 
> 时间：2012-09-28T16:56:17.880
> 
> 标签：c++, visual-studio-2010, dll

我正在尝试创建一个 .lib 文件以与外部 .dll 一起使用，以便我们可以针对它编译代码（VS2010）。在这个外部库函数中使用 __stdcall 声明，它们没有指定 __declspec(dllimport)。例子：

```
extern "C"
{
    int __stdcall exampleFunction(int firstArgument);
} 
```

我尝试了以下方法：

## 从 .def 创建 .lib

创建一个 .def 文件，如下所示：

```
EXPORTS
method_1
method_1@16    @1 ; ordinal from dumpbin
... 
```

然后从此创建 .lib

```
lib /MACHINE:x86 /def:my_def_file.def OUT:my_library.lib 
```

代码链接正常，但在首次从 dll 调用方法时抛出“特权指令”异常。

## 从 .obj 创建 .lib

如本[kb](http://support.microsoft.com/kb/131313)中所述，另一种可能性是创建一组存根函数，将它们编译成 .obj 文件并从中创建 .lib。然而，我什至无法让 kb 页面上的示例正常工作，例如

```
// my_library.cpp
extern "C" __declspec(dllexport) void _stdcall Function(void) {} 
```

当我在这个文件上运行所需的命令时：

```
CL /c /Ob0 my_library.cpp
lib /def:my_library.obj /MACHINE:x86 
```

然后打开 my_library.obj 确实显示字符串“_Function@0”，正如预期的那样，但 my_library.lib 没有显示任何痕迹。此外，在运行 lib 命令时，我会收到一些时髦的警告消息：

```
hasp_api.obj : warning LNK4017: L☺♥ statement not supported for the target platform; gnored
hasp_api.obj : warning LNK4017: ► statement not supported for the target platform; ignored 
```

我完全是为了和平与爱，但我有点卡住了，这让我发疯了，对上述任何一种方法的任何帮助都将不胜感激！

# java - Java游戏引擎，编写自己的脚本语言？

> ID：12644264
> 
> 赞同：1
> 
> 时间：2012-09-28T16:56:18.690
> 
> 标签：java, scripting

我打算用 Java 创建一个简单的 Visual Novel 游戏引擎。我以前为 Java 开发过，但我有其他语言的经验。我想做的是创建我自己的脚本语言，人们可以使用它与引擎一起使用脚本制作完整的游戏，因为我认为视觉小说足够简单。

我不知道的是，Java 适合制作这样的脚本语言吗？我想象的方式是，引擎读取游戏文件夹中的脚本文件，并接受输入并执行链接到某个功能或类似功能的每个命令。我不确定理论上这会有多困难。

正如您可能会说的那样，我是一个新手。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:01:03.323

听起来您需要一种特定于领域的语言 (DSL)。这是一篇关于[Java 中 DSL的文章](http://www.javaworld.com/javaworld/jw-06-2008/jw-06-dsls-in-java-1.html)

> DSL 是为特定任务定制的小型、富有表现力的编程语言。在这个由四部分组成的系列中，Venkat Subramaniam 介绍了 DSL 的概念，并最终向您展示了如何使用 Java 构建它们

还有一个关于 SO的[相关问题。](https://stackoverflow.com/questions/3305729/first-steps-with-dsl-on-java)

您可以使用[Scala 编写 DSL](http://www.scala-lang.org/node/1403)并在 JVM 上运行它们。但是我会警告你，如果没有 Scala 知识，这样做是一项（IMO）非平凡的任务。

或者，您可以将脚本语言的 Java 实现与[Java Scripting API](http://docs.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/index.html)一起使用。这将允许您使用现有语言并将其编译为字节码。优势在于您使用的是现有语言。缺点是它不是针对您的特定需求的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:02:25.043

1.  不要这样做。编写一门新语言非常复杂。设计语法、解析、错误报告、性能。

2.  它已经存在：[用 Java 创建元语言](https://stackoverflow.com/questions/7575085)

3.  首先考虑[groovy](/questions/tagged/groovy "显示标记为“groovy”的问题")、[lua](/questions/tagged/lua "显示标记为“lua”的问题")或[jruby](/questions/tagged/jruby "显示标记为“jruby”的问题")。人们会喜欢你使用熟悉的语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T17:01:58.070

虽然在技术上*可以*做到这一点，但我不知道 Java 是否是您最好的选择。虽然我不知道您项目的范围或目的，但我建议将[PyGame](http://www.pygame.org/news.html)作为游戏/脚本语言。（你说你有其他语言的经验，所以我假设切换到 Python 是可以的）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T17:10:29.657

我认为以上答案给出了很好的方向。
我想提供更多想法：
A. 提供一个 java“GAME API”，它可以通过 REST/SOAP Web 服务公开，并且可以
生成客户端类（例如，获取一个 WSDL，并从中生成客户端类）。

B. 将 API 作为 jar 文件提供，并让您的游戏实现将加载外部 jar 的文件类加载器，并使用开发人员将使用 API 开发的类。
[这](http://tips4java.wordpress.com/2008/12/09/file-class-loader/)是一个如何实现此类加载器的示例。

C、使用java提供的ScriptEngine，调用脚本。
请参阅[此处](http://www.java2s.com/Code/Java/JDK-6/RunningScriptswithJavaScriptEngine.htm)的示例，了解如何从 java 中调用 JavaScript 脚本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-03T16:01:33.757

这个问题很老，我参加聚会有点晚了（虽然这个问题还没有回答），但这是可能的。据我了解，这听起来像是[Just Another Framework](https://github.com/ThorbenKuck/Just-Another-Framework)的工作。完全披露：我是我所描述的框架的开发者。我有一个类似的问题，并编写了这个框架来重用这个系统，它适用于这类问题。

### TL;博士

如果您想要自己的、功能齐全、完美的语言，请不要使用 JAF。
使用 JAF，如果您只想创建一个简单的脚本部分，将部分代码解耦，或者如果您想在运行时评估“用户输入”脚本（就像在这个问题的主题中一样）。

> 我不知道的是，Java 适合制作这样的脚本语言吗？

您几乎可以使用所有编程语言来做到这一点。您应该考虑使用 Javascript 或 Lua 或 [...] 并将它们放入文件中，而不是创建自定义脚本语言。[Java 在这些语言中占有一席之地](https://www.oracle.com/technetwork/articles/dsl/languages-137862.html)。您还应该考虑从文件夹中读取 .java 或 .class 文件并将它们放入您的“游戏引擎”。但是，如果您想提供***自己的***语言并且**没有人**可以改变您的想法（这是*我的*问题），**JAF**可以帮助您。

**JAF**是一个框架，它允许您在 Java 中定义自定义脚本语言，可以在运行时进行评估和执行。你给解析器一些函数、规则以及原始脚本，结果是一组固定的指令（以消费者的形式），可以执行任意多次。

这绝不是另一种建立在 java 之上的语言！它旨在成为您语言的基础。它仅用于创建小零件。例如，某种逻辑应该可以在不停止应用程序的情况下互换。此逻辑应通过小脚本执行，并通过数据库或（如您的情况）从文件夹中的文件提供。

您可以使用解析器来解析用户创建的“原始脚本”。该解析器采用策略/命令模式形式的函数和规则，它们基本上定义了您的语言。解析后，返回一个“脚本”对象，可以根据需要执行多次。您还可以设置脚本的值，因此将此脚本连接到您的真实和正在运行的 java 代码。

然而，我真正喜欢的一点是，您可以通过规则和函数提供自定义脚本元素，它们基本上直接连接到 java。printline 函数就是一个例子。这调用 System.out.println();。正如我所说，这只是一个示例，但您可以想象您可以从您的函数和规则中调用任何现有代码。

如何使用它的一个（非常）简单的示例如下所示：

```
String rawScript = ... //your users script here

Parser parser = Parser.create(); // used to parse the script
parser.add(IOModule.getPackage()); // add packages of Functions and Rules

Script script;
try {
    script = parser.parse(rawScript); // Create the Script
}  catch (ParsingFailedException e) {
    // Handle an error while parsing the script
    // Do not continue, there is no script!
}

script.setValue("yourKey", /* Whatever should be available in your script */); // Inject outside variables for your Rules/Functions

try {
    script.run(); // Execute the script
} catch (ExecutionFailedException e) {
    // Handle an error at the scripts execution
} 
```

我不想写一本关于如何使用这个框架的书。看看[wiki](https://github.com/ThorbenKuck/Just-Another-Framework/wiki)，那里有更好的解释。

这样做的好处是，您可以通过提供解析原始脚本特定部分的简单命令来简单地定义自己的语言。它们只是“应用”；所有的魔法都隐藏在框架内。在[frameworks-wiki](https://github.com/ThorbenKuck/Just-Another-Framework/wiki/Script-World#functions)中对其进行了一些解释，但我不擅长解释。因此，您可以通过提供语言的构建块来创建自己的小型脚本语言，而无需深入了解理论计算机科学。

虽然它有一些问题。它目前与[JSR 223](https://www.jcp.org/en/jsr/detail?id=223)不兼容。此外，它（当然）比 playn java 慢。

# smtp - opa smtp 服务器使用情况

> ID：12644266
> 
> 赞同：0
> 
> 时间：2012-09-28T16:56:38.347
> 
> 标签：smtp, opa

我注意到 Opa API 有一个 SMTPServer 扩展。我不完全确定如何使用它。邮件解析的哪些功能是内置的，哪些必须写在处理程序中？我很欣赏这个扩展的“你好世界”风格的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T17:49:19.067

此代码段应该对您有所帮助。它是从[http://forum.opalang.org](http://forum.opalang.org) *回复电子邮件*功能的代码中提取的：

```
function convert_to_utf8(s, b) {
    match (Iconv.convert_to_utf8(s, b)) {
    case { some : s }: s
    default: log_error("..."); ""
    }
}

function raw_handler(to, content) {
    ...
    message = Mime.parse(content);
    match (message) {
    case { some : content }:
         content = Mime.get_text(content, convert_to_utf8);
         ....
    default: void
    ...
}

function handler(string from, list(string) to, string raw_content) {
    List.fold({
      function(to, acc) _ = raw_handler(to, raw_content); acc
      }, to, {success})
}

SmtpServer.start(0.0.0.0, 2525, {none}, handler) 
```

# qt - QT QBytearray 计数字符

> ID：12644268
> 
> 赞同：1
> 
> 时间：2012-09-28T16:56:54.810
> 
> 标签：qt, qstring, qbytearray

我如何计算 中的字符`QByteArray`，例如我有`QByteArray`并且我想知道这个数组中有多少个“*”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:14:30.673

从`QByteArray` [文档](http://qt-project.org/doc/qt-4.8/qbytearray.html)：

```
int QByteArray::count ( const char * str ) const

This is an overloaded function.

Returns the number of (potentially overlapping) occurrences of string str in the byte array. 
```

[数](http://qt-project.org/doc/qt-4.8/qbytearray.html#count-2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:04:44.383

您可以`QByteArray::indexOf(char ch, int from = 0) const`在循环内使用。

也许是这样：

```
int i = 0, counter = 0;

while((i = array.indexOf("*", i)) >= 0)
 counter++; 
```

# c# - XNA：将 Nuclex 屏幕添加到 GuiManager.screen 会中断 3d 渲染

> ID：12644270
> 
> 赞同：0
> 
> 时间：2012-09-28T16:57:05.807
> 
> 标签：c#, xna, xna-4.0

我正在尝试设置一个非常简单的 XNA 游戏，上面有 3d 地形和一些 2d GUI 对象。我选择了 Nuclex，因为它似乎是少数几个目前处于活动状态的 2d GUI 之一。

我的问题：在我的游戏中添加一个 Nuclex“屏幕”类会导致 3d 地形和在其上绘制的线条搞砸了——我有三层 3d 对象：地形、地形的线框轮廓和一些“路线” “拥抱地形。添加屏幕后，部分淹没在地形中的路线会完全显示在地形之上，并且线框网格会显得更粗。

这是我的 Game.Initialize 方法的结尾，按照 Nuclex GuiManager 页面上的示例进行操作：

```
 InputManager im = new InputManager();

    IGraphicsDeviceService igds = Nuclex.Graphics.GraphicsDeviceServiceHelper.MakeDummyGraphicsDeviceService(GraphicsDevice); 
    gui = new GuiManager(igds, im);
    gui.Initialize();

    Viewport vp = GraphicsDevice.Viewport; 
    Screen main_screen = new Screen(vp.Width, vp.Height);
    //main_screen.
    this.gui.Screen = main_screen; 
    main_screen.Desktop.Bounds = new UniRectangle(
        new UniScalar(0.1f, 0.0f), new UniScalar(0.1f, 0.0f), // x and y
        new UniScalar(0.8f, 0.0f), new UniScalar(0.8f, 0.0f) // width and height
    );

    LabelControl text = new LabelControl("hello");
    text.Bounds = new UniRectangle(10, 10, 200, 30);

    main_screen.Desktop.Children.Add(text);

    Components.Add(gui);

    base.Initialize(); 
```

那么，关于我做错了什么的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:25:36.650

是的，多亏了 catflier 为我指出了渲染状态的方向，我解决了这个问题： * 首先，“RenderState”是一个 XNA3 术语；XNA4 只允许在 GraphicsDevice 对象上直接使用一些状态标志。* 问题是 Nuclex 偷偷设置 GraphicsDevice.DepthStencilState 并留下它，而不是在使用后将其恢复到以前的值（淘气！！）。* 所以解决方案是，在你的 Draw 方法的顶部，像这样添加一行：

```
GraphicsDevice.DepthStencilState = DepthStencilState.Default; 
```

# javascript - 如何与具有背景的 HTML 元素下的 DOM 元素进行交互？

> ID：12644271
> 
> 赞同：2
> 
> 时间：2012-09-28T16:57:05.820
> 
> 标签：javascript, html, css, javascript-events

[我需要解决这个小提琴。](http://jsfiddle.net/stephenjwatkins/gv93D/6/)

我无法与另一个具有背景的 HTML 元素下的 DOM 元素进行交互。这是 HTML/CSS 101。但是，由于背景与 rgba 和 opacity CSS 属性相结合，这并不总是理想的效果。就像我的情况一样，我需要一个元素的背景始终位于所有其他元素之上。

老实说，我不知道从哪里开始解决这种情况。我希望有一个 CSS 解决方案可以让事件通过具有背景的元素传播。我怀疑它的存在。

我的另一个想法是使用 JavaScript 解决方案以某种方式强制将事件捕获到下面的元素，就好像顶部的元素甚至不存在一样。

**如何与具有背景的 HTML 元素下的 DOM 元素进行交互？**

*请注意，我需要它才能在所有现代浏览器中工作。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T17:06:16.647

我知道能够访问该链接的一种方法是将`#cursor-block`div 上的指针事件设置为无。

**[jsFiddle 示例](http://jsfiddle.net/j08691/gv93D/8/)**

```
#cursor-block {
    background: rgba(0, 0, 0, .075);
    position: absolute;
    top: 0;
    bottom: 0;
    width: 15px;
    z-index: 2;
    pointer-events: none;
} 
```

请注意，指针事件在 IE9 下不起作用。

# activemq - ActiveMQ 消息组 - ConcurrentModificationException

> ID：12644272
> 
> 赞同：2
> 
> 时间：2012-09-28T16:57:08.647
> 
> 标签：activemq, apache-camel

我正在使用带有 Kahadb 持久消息传递的 AMQ 5.6 的 AMQ 消息组，并定期在日志中看到此 WARN。我没有看到由此导致的任何特定错误，但我想知道这样做的副作用是什么，等等。

我的消费者是 maxConcurrentConsumers=5 的 Camel (2.9.2) 路由（使用 AMQ 连接池等）。我会尝试在某个时候将其归结为单元测试......现在，这是堆栈跟踪

```
Async error occurred: java.util.concurrent.ExecutionException: java.util.ConcurrentModificationException
java.util.concurrent.ExecutionException: java.util.ConcurrentModificationException
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
    at java.util.concurrent.FutureTask.get(FutureTask.java:83)
    at org.apache.activemq.broker.region.Queue.doMessageSend(Queue.java:785)
    at org.apache.activemq.broker.region.Queue.send(Queue.java:707)
    at org.apache.activemq.broker.region.AbstractRegion.send(AbstractRegion.java:407)
    at org.apache.activemq.broker.region.RegionBroker.send(RegionBroker.java:503)
    at org.apache.activemq.broker.jmx.ManagedRegionBroker.send(ManagedRegionBroker.java:305)
    at org.apache.activemq.broker.BrokerFilter.send(BrokerFilter.java:129)
    at org.apache.activemq.broker.CompositeDestinationBroker.send(CompositeDestinationBroker.java:96)
    at org.apache.activemq.broker.TransactionBroker.send(TransactionBroker.java:306)
    at org.apache.activemq.broker.MutableBrokerFilter.send(MutableBrokerFilter.java:135)
    at org.apache.activemq.broker.TransportConnection.processMessage(TransportConnection.java:453)
    at org.apache.activemq.command.ActiveMQMessage.visit(ActiveMQMessage.java:681)
    at org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:292)
    at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:150)
    at org.apache.activemq.transport.ResponseCorrelator.onCommand(ResponseCorrelator.java:116)
    at org.apache.activemq.transport.MutexTransport.onCommand(MutexTransport.java:50)
    at org.apache.activemq.transport.vm.VMTransport.iterate(VMTransport.java:231)
    at org.apache.activemq.thread.PooledTaskRunner.runTask(PooledTaskRunner.java:122)
    at org.apache.activemq.thread.PooledTaskRunner$1.run(PooledTaskRunner.java:43)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.util.ConcurrentModificationException
    at java.util.HashMap$HashIterator.nextEntry(HashMap.java:793)
    at java.util.HashMap$KeyIterator.next(HashMap.java:828)
    at org.apache.activemq.util.MarshallingSupport.marshalPrimitiveMap(MarshallingSupport.java:64)
    at org.apache.activemq.command.Message.beforeMarshall(Message.java:210)
    at org.apache.activemq.command.ActiveMQObjectMessage.beforeMarshall(ActiveMQObjectMessage.java:199)
    at org.apache.activemq.openwire.v6.MessageMarshaller.looseMarshal(MessageMarshaller.java:277)
    at org.apache.activemq.openwire.v6.ActiveMQMessageMarshaller.looseMarshal(ActiveMQMessageMarshaller.java:111)
    at org.apache.activemq.openwire.v6.ActiveMQObjectMessageMarshaller.looseMarshal(ActiveMQObjectMessageMarshaller.java:111)
    at org.apache.activemq.openwire.OpenWireFormat.marshal(OpenWireFormat.java:168)
    at org.apache.activemq.store.kahadb.KahaDBStore$KahaDBMessageStore.addMessage(KahaDBStore.java:429)
    at org.apache.activemq.store.kahadb.KahaDBStore$StoreQueueTask.run(KahaDBStore.java:1177) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:22:53.320

为此（[AMQ-4092](https://issues.apache.org/jira/browse/AMQ-4092)）记录了一个 JIRA，这听起来像是 KahaDB 和消息组组合的问题。设置 concurrentStoreAndDispatchQueues=false 可以解决问题（感谢 Gary Tully 的建议）

# mysql - 需要从 Drupal MySQL 数据库中删除未引用的行

> ID：12644281
> 
> 赞同：0
> 
> 时间：2012-09-28T16:58:11.987
> 
> 标签：mysql, drupal, sql-delete

我正在通过 cron 运行 PHP MySQL 命令脚本 (cleanup.php)，该脚本从 aggregator_item 表中删除重复的内容和 BS 内容（下表 2）。问题是随着时间的推移， aggregator_category_item 表（下面的表 1）包含太多未引用的行。

理想情况下，表 1 和表 2 应该具有**相同**的行数。

我需要一个 MySQL 命令 mysql_query()，它将删除 aggregator_category_item 表（表 1）中的所有行，以满足以下条件：

如果在 aggregator_category_item 表（表 2）中找不到 aggregator_category_item 表（表 1）中的**idd**编号，则从 aggregator_category_item 表（表 1）中删除这些未引用的行**。**我想将此 MySQL 删除命令添加到我当前的 MySQL 命令 cron 脚本中。

下面是 Drupal 数据库中的以下两个表：

```
Table 1: aggregator_category_item (145,000 rows)
-----------------------------------------------
iid        cid
6644403    2

Table 2: aggregator_item (8700 rows)
------------------------------------
iid      fid  title  link       author  description  timestamp
6644403  25   hello  http://...         hello there  1348243145 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:00:50.653

```
delete from aggregator_category_item
where iid not in (select iid from aggregator_item) 
```

# c# - 将 windows 图表形式转换为图片

> ID：12644288
> 
> 赞同：0
> 
> 时间：2012-09-28T16:58:50.470
> 
> 标签：c#, .net, windows, winforms, drawing

我发现[了这个](https://stackoverflow.com/questions/5981094/convert-windows-form-to-a-picture)类似的问题，我试图实施，但没有奏效。

如果有人想将图表另存为图像，我有一个创建图表的类并有第二个构造函数。但是，正在保存的图像只是表单背景，而不是图表。这是我的代码。

```
public ChartForm(String path)
    {
        InitializeComponent();
        SaveGraphAsImage(path);
    }

private void SaveChartAsImage(String path)
    {
        bmp = new Bitmap(this.Width, this.Height);
        this.DrawToBitmap(bmp, new Rectangle(0, 0, this.Width, this.Height));
        this.bmp.Save(path + this.Name, System.Drawing.Imaging.ImageFormat.Jpeg);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:51:00.763

我通过在图表填充数据后保存图表图像来解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:56:48.423

您不应该使用该`DrawToBitmap()`方法（这会在大控件上产生一些问题（*异常*）），因为`Chart`该类具有该[`SaveImage()`](http://msdn.microsoft.com/en-gb/library/dd456175.aspx)方法。

```
//using System.Drawing.Imaging;
myChartControl.SaveImage(path + this.Name, ImageFormat.Jpeg); 
```

# flash - Flex 3.4 - 设置一个 100% 或可调大小的 mx:Tree

> ID：12644294
> 
> 赞同：0
> 
> 时间：2012-09-28T16:58:58.107
> 
> 标签：flash, apache-flex

我正在尝试这样做：一个包含 3 个部分的小面板，一个带有一些标签（页眉）的上级面板，一个带有一些按钮（页脚）的下级面板，一个在中心带有 mx:Tree 的面板，这个面板可以调整大小（它是一个具有最小尺寸的插件）。

如何扩展 mx:Tree 的大小以使用此面板的其余可见区域？我不能使用 % 大小，有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T16:55:24.420

如果您的页眉和页脚长度是固定的，您可以将 Tree 的高度绑定到面板的高度：

```
<s:Panel id="upPanel"
    width="220" height="100"
    minHeight="80"
    minWidth="200"
    styleName="resizePanel"
    skinClass="flex.utils.spark.resize.ResizablePanelSkin"
    title="ResizablePanelSkin">
    <mx:Tree width="{upPanel.width - 1}" height="{upPanel.height - 70}">
        <mx:XMLListCollection id="MailBox">
            <fx:XMLList>
                <AA/>
                <BB>
                    <BB1/>
                </BB>
                <CC/>
            </fx:XMLList>
        </mx:XMLListCollection>
    </mx:Tree>
    <s:controlBarContent>
        <s:Button label="ControlBar Button"/>
    </s:controlBarContent>
</s:Panel> 
```

否则，您需要重新计算顶部和底部元素的高度并设置树的大小。

这是我放在网上的一个[演示](http://laissi.com/test/)，启用了查看源代码。

（我的演示就是基于[这个](http://flexdevtips.blogspot.com/2010/06/flex-4-spark-resizable-controls.html)）

# php - 在 PHP 中的浏览器窗口之间传递加密变量

> ID：12644300
> 
> 赞同：0
> 
> 时间：2012-09-28T16:59:24.930
> 
> 标签：php, session

我拼命地试图在浏览器窗口之间传递一个变量。我有一个 php 页面（test.php），它在新窗口中打开另一个页面（another.php）。我还有一些变量需要加密/解密并通过加密密码传递。我创建了一个这样的会话：

```
session_start();
$_SESSION['test'] = array(
    'var1' => $encryption_password, 
    'var2' => $some_encrypted_stuff
); 
```

但当然在新窗口中“测试”会话为 NULL。我尝试了不同的选择，但都失败了。我确实可以创建一个文件并在那里写入数据，但这对我来说似乎并不安全。

任何人都可以给我一个关于这个问题的工作示例吗？自己什么都找不到。

**更新**

好的，我的主要任务是在一个 php 文件中加密变量并在另一个文件中解密。有一个条件：加密密码不能被第二个 php 文件从初始存储位置读取 - 只能被第一个文件读取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:10:03.397

就我而言，将其写入文件可能不是一个好方法。您正在尝试实现变量检索，仅此而已。我不确定为什么您的测试变量为空。我只是尝试自己进行此测试，并且可以正常访问所有内容。您提供的代码应该将数据写入会话变量。首先，请确保您没有在第一个脚本稍后的某个地方终止会话。其次，双重和三重检查您的代码以访问会话变量。没有看到你的代码很难说，但在第二页上，我唯一的猜测是你要么拼错了对变量的访问权限，要么忘记了**重新开始会话！** 这是我的两个文件的代码：

## 第一页：

```
<?
session_start();
$_SESSION['test'] = array('var1' => "somevalue", 'var2' => "someothervalue");

?>
<a href='other.php'>Go</a> 
```

* * *

## 第二页：

```
<?
session_start();
var_dump($_SESSION['test']);
?> 
```

这对我来说很好——我把完整的会话变量吐出来了。试一试，如果您仍然遇到问题，请告诉我们（使用更多代码，以便我们更好地了解发生了什么）。祝你好运！

# java - 特定动作的动态对象与单例

> ID：12644301
> 
> 赞同：0
> 
> 时间：2012-09-28T16:59:26.017
> 
> 标签：java, singleton

我想知道这种设计是对是错还是两者兼而有之。
我有一个包含多个组件（对象）的应用程序，每个组件都有一个配置（标志、功能等）。在任何时候，我都想从对象中检索配置。
为此，我这样做了：

```
class ConfigRetriever {
    public String getConfigString() {
        String configString = "";   
        configString += "component 1 flag : "+component1.getFlag()+"\n";
        configString += "component 2 flag : "+component2.getFlag()+"\n";
        // ...
        return( configString );
    }
} 
```

在其他地方，当需要配置时：

```
class SomeClass {
    public void someMethod() {
        ConfigRetriever configRetriever = new ConfigRetriever(); 
        String configString = configRetriever.getConfigString();
            // Do some stuff with configString...
    }
} 
```

我是对象编程的新手，为一个特定的操作创建一个对象（ConfigRetriever）仍然感觉很奇怪（即使该对象能够做其他事情）。
我也考虑过单例模式，有这样的事情：

```
String configString = ConfigRetriever.getInstance().getConfigString(); 
```

这是一条简洁的线，但是由于对象一直保留在内存中直到应用程序结束，我真的不知道什么是对的，什么是错的。

我的设计可以更好吗？如何 ？为什么 ？

**更新**
感谢您的回答。我认为我的问题有点混乱，我错过了我所要求的重点。
整个配置和组件的故事在这里作为我正在处理的那种情况的一个例子。这是快速而肮脏的代码，我应该警告你。真正的问题是：“只创建一次（或有时）创建一个对象以访问其方法之一是否很好？” 好吧，阅读您的答案并再次考虑它，似乎正确的答案是“这取决于您的目标、课程、职责等......”
我想将信息存储在我的对象中吗？不能是静态方法。
使用永久记忆的单身人士是否有问题？大多数时候是这样，因为我认为您必须有充分的理由在内存中维护具有全局状态的对象。所以，大多数时候：没有单例。

最后，创建一个用于实例化对象的类是否有问题？不是，加油！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:22:55.497

我认为这里不需要单身。

为单个操作创建对象并不奇怪，但如果您经常调用该方法可能效率不高。我认为你能做的最好的就是使用[依赖注入](https://stackoverflow.com/questions/130794/what-is-dependency-injection)：

```
class SomeClass {
    private final ConfigRetriever retriever;
    public SomeClass(ConfigRetriever retriever) {
        this.retriever = retriever;
    }
    public void someMethod() {
        // use this.retriever here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:42:40.987

还没有人提到`static`方法。一个典型的 Java 模式是使用一个静态方法，您可以在没有类实例的情况下对其进行分类。就像是：

```
class ConfigRetriever {
   public static String getConfigString() {
      StringBuilder sb = new StringBuilder();
      sb.append("component 1 flag : ").append(component1.getFlag()).append('\n');
      sb.append("component 2 flag : ").append(component2.getFlag()).append('\n');
      // ...
      return sb.toString();
   }
} 
```

因此，这允许您执行以下操作：

```
// call the static method on the class, not on an instance
String configString = ConfigRetriever.getConfigString(); 
```

由于您没有实例，因此您无法将状态存储在`ConfigRetriever`. 我不确定`component1`和`component2`对象是从哪里来的。

*请注意*，我将您的`getConfigString()`方法转换为使用比在内部实际使用*多个*`StringBuilder()`类的方法*更*有效的类。`+=` *`StringBuilder`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T17:32:20.270

几个问题 -
A. 您的原始代码有一个返回名为 getConfigString 的 void 的方法 - 这应该被修复。
B. 另外，在 ConfigRetriever 类中，组件提供给什么地方也不清楚。
C. 您可以选择一些选项：

1\. 有 ConfigProvider 类层次结构，它将与您的组件层次结构相匹配 -
如果您有名为 ComputerComponent 的类，您将有一个匹配的 ComptuerConfigProider。
您可以考虑在 Component 类中使用 ConfigProider getConfigProvider 方法。

```
public abstract class Component {
   public abstract ConfigProvider getConfigProvider()'
} 
```

然后一个具体的类可能看起来像：

```
public class ComputerComponent extends Component {
   public ConfigProvider getConfigProvider() { 
       return new ComputerConfigProvider(this);
   }
} 
```

2\. 与第一个类似的解决方案，但只有一个 ConfigProvider 类，上面有添加配置组件的方法。
例如，假设 ConfigurationProvider 仅包含键和值的映射。
在这种情况下，您的代码可能如下所示：

```
public class ConfigProvider {

    private Map<String,String> internalMap = new HashMap<String,String>();
    public String getConfigProvider() {
      //Return a string representation of the internal map
    }

    public ConfigProvider addConfigElement(String key,String value) {
        map.put(key,value); 
        return this;
    }
}

public class ComputerComponent extends Component {
    private int memory;
    private String cpu;
    public ConfigProvider getConfigProvider() {
       ConfigProvider configProvider = new ConfigProvider();
       return configProvider.addConfigElement("memory",Integer.toString(memory)).
       addConfigElement("cpu",cpu);
    } } 
```

3\. 如果你仍然想使用单调
——因为你的配置依赖于组件状态，所以有一个配置提供者单调是错误的，除非你把 getConfigProvider 变成一个“无状态”的方法——

```
String getConfigString(Component component) 
```

但在这种情况下，您可能会考虑不使用单调，而只是使用静态方法，代码将如下所示：

```
public class ConfigurationProvider {
   public static String getConfigString(Component component) {
     StringBuilder sb = new StringBuilder();
     //Append the component values to the string builder
     return sb.toString();
   }
} 
```*

# tfs - TFS 文件夹浏览

> ID：12644302
> 
> 赞同：1
> 
> 时间：2012-09-28T16:59:28.853
> 
> 标签：tfs

我正在创建一个需要浏览文件夹到 TFS 的工具。换句话说，我希望用户能够在 TFS 的项目中选择一个文件夹。

我还找到了Jeff Bramwell 发布的[方法。](https://stackoverflow.com/questions/3413527/how-to-connect-with-tfs-and-get-list-of-projects-for-a-specific-user/12644066#12644066)它完成了大部分工作，但我希望能够允许用户在 TFS 中选择文件夹。

有人知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T04:54:44.387

有一个用于弹出对话框的内部 api，它不受支持，但您可以使用它。

[http://msmvps.com/blogs/molausson/archive/2010/10/21/browse-items-in-tfs-version-control-programmatically-reposted.aspx](http://msmvps.com/blogs/molausson/archive/2010/10/21/browse-items-in-tfs-version-control-programmatically-reposted.aspx)

# security - 如何安全地存储公钥/私钥

> ID：12644304
> 
> 赞同：6
> 
> 时间：2012-09-28T16:59:34.393
> 
> 标签：security, xamarin.ios, storage

希望在 iOS 设备上安全地存储公钥/私钥信息。我知道我想将它存储在 KeyChain 中，但是我不能 100% 确定我需要在`SecRecord`. 我打算做类似的事情：

```
// private key
SecKeyChain.Add(new SecRecord(SecKind.Key)
{
    Accessible = SecAccessible.AlwaysThisDeviceOnly,
    KeySizeInBits = 512,
    KeyClass = SecKeyClass.Private,
    CanSign = true,
    ValueData = privateKeyValue,
    Account = publicKeyValue
}); 
```

它将存储私钥，然后对公钥遵循类似的方法，将`Account`属性替换为用户唯一的值，例如用户名。但是，不确定这是否是使用它的正确方法。

有没有人有一个很好的例子来说明你将如何专门为钥匙做这件事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T19:33:57.937

决定采用以下方法：

```
// store public key
SecKeyChain.Add(new SecRecord(SecKind.Key)
{
    ApplicationLabel = userName,
    Accessible = SecAccessible.AlwaysThisDeviceOnly,
    KeySizeInBits = 512,
    KeyClass = SecKeyClass.Public,
    ValueData = NSData.FromString(publicKey)
});

// store private key
SecKeyChain.Add(new SecRecord(SecKind.Key)
{
    ApplicationLabel = publicKey,
    Accessible = SecAccessible.AlwaysThisDeviceOnly,
    KeySizeInBits = 512,
    KeyClass = SecKeyClass.Private,
    CanSign = true,
    ValueData = NSData.FromString(secretKey)
}); 
```

这意味着每个公钥都映射到一个单独的用户，每个私钥都映射到一个公钥，这允许我存储多个用户密钥（而不是只存储当前登录的用户）。

似乎工作正常，但是，仍然不能 100% 确定这是做这种事情的正确方法，所以一些澄清会很好。

# java - 正确回答时在gridview中的图像上设置刻度线

> ID：12644307
> 
> 赞同：1
> 
> 时间：2012-09-28T16:59:38.457
> 
> 标签：java, android, image, gridview

我正在尝试制作一个类似于徽标测验的应用程序，但不是猜测徽标，而是看到汽车的一部分，并且必须猜测它是哪辆车。我在网格视图中列出了汽车图片，当您单击它时，您可以输入您的答案。这一切都很好。当您给出正确答案时，它会保存到 SQLite 数据库中。所以现在我的问题是：如何在网格视图中显示刻度线或绿色轮廓等，仅在您正确回答的图片上？如果已正确回答图片，则在数据库中的“正确”列下插入带有“是”的字符串。这是我到目前为止所拥有的：

```
private void checkDB() {
    try{
        DbHelper entry = new DbHelper (Main.this);
        entry.openDataBase();
        Cursor c = entry.getInfo();
//Check everything at the "Correct" column
        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()){
            String correct = c.getString(1);

        if (correct.equals("YES")){
//If it has been answered correctly get it's id
            int id = c.getInt(0);
//Add the tick mark at the specific picture
            gridView.?????
        }
        else{

        }
            entry.close();
        }
    }
    catch(Exception e){

    }
} 
```

我真的没有编程经验，所以我希望你明白我的意思；）请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:21:36.277

我可以通过将位置设为最终位置并将 onClick 侦听器添加到 imageView 来获取单击图像的位置。

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
 ImageView imageView;
 if (convertView == null) {  
// if it's not recycled, initialize some attributes
imageView = new ImageView(mContext);
imageView.setLayoutParams(new GridView.LayoutParams(80, 80));
imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
imageView.setPadding(10, 8, 10, 8);
imageView.setOnClickListener(new View.OnClickListener() {

  @Override
  public void onClick(View view) {
    Log.d("onClick","position ["+position+"]");
  }

});
} 
 else 
{
 imageView = (ImageView) convertView;
}
imageView.setImageResource(mThumbIds[position]);
return imageView;
} 
```

# sql-server - 在 sys.database_files 中找不到数据库“mydatabase”的文件“mydatabase”。该文件不存在或已被删除

> ID：12644312
> 
> 赞同：5
> 
> 时间：2012-09-28T16:59:55.173
> 
> 标签：sql-server, sql-server-2008

`dbcc shrinkfile('mydatabase',113311)`失败并出现以下错误

在 sys.database_files 中找不到数据库“mydatabase”的文件“mydatabase”。该文件不存在或已被删除

它随机失败一次。我有执行的夜间任务`dbcc shrinkfile`。大多数时候工作正常。逻辑文件名等没有问题......我的逻辑文件名是'mydatabase'。我已使用以下查询验证了我的逻辑名称。

```
DBCC FILEHEADER (mydatabase)

select * from mydatabase.dbo.sysfiles 

Select * from master..sysaltfiles 
```

这真的很奇怪，因为我找不到任何根本原因。SQL 2008R2 SP2

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-18T08:46:17.203

我在 sql server 2012 中遇到了同样的问题。快速修复您可以使用文件 ID 而不是逻辑名称来缩小文件。其次检查 master_files 和 database_files 中的逻辑名称是什么。我在 master_files 中与在 database_files 中的不同。因此，您只需运行 alter database 重新设置文件的逻辑名称，然后它就可以正常工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-08T12:09:19.357

```
dbcc shrinkfile('mydatabase',113311) 
```

请注意，“mydatabase”应该是逻辑名称。

您可以从数据库属性窗口下的文件选项卡中找到逻辑名称。

[![在此处输入图像描述](../Images/05802fd2094803d2d0639802fec9d844.png)](https://i.stack.imgur.com/tdJ34.png) **笔记**

*   验证逻辑名称和数据库是否相同。否则它不会工作
*   这里我用红色标记了。数据库名和Logicalname不同。
*   **所以考虑逻辑名称并执行 .Database->properites->File**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-26T21:10:06.690

我尝试了以上所有方法，但仍然有问题。数据库被称为 clientdatabase 和日志文件 clientdatabase_log。

我设法通过重命名日志文件的逻辑名称来解决它：

```
USE [clientdatabase];
ALTER DATABASE clientdatabase MODIFY FILE 
(NAME = clientdatabase_log, NEWNAME = clientdatabase_log_1); 
```

运行脚本

```
USE [clientTdatawarehouse]
GO
DBCC SHRINKFILE (clientTDataWarehouse_log_1, 1024)
GO 
```

现在工作了。

我在这里写了一篇博客：

[https://hybriddbablog.com/answer-to-could-not-locate-file-xxx_log-for-database-xxx-in-sys-database_files/](https://hybriddbablog.com/answer-to-could-not-locate-file-xxx_log-for-database-xxx-in-sys-database_files)

# c++ - 文本呈现错误，每个字符都是一个白色矩形

> ID：12644313
> 
> 赞同：0
> 
> 时间：2012-09-28T16:59:58.537
> 
> 标签：c++, opengl, glsl, sfml, text-rendering

我想在我的 OpenGL 应用程序中显示一些文本，并且已经在使用 SFML 来创建窗口和上下文。我不想添加另一个库并尝试使用 SFML (2.0) 提供的文本呈现。

呈现的文本由白色矩形组成（矩形与它们应该大致显示的字符的高度相匹配）。

在我添加了一些方法以保持 OpenGL 状态与使用 SFML 文本之前的状态相同之后，其他所有内容都正确呈现。如果没有这些方法，则不会渲染任何内容，但会使用正确的颜色缓冲区清除颜色。

我使用 GLSL 进行纹理和照明（如果需要，可以提供源和屏幕截图）。

我使用的代码：

```
glClear( GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );
glLoadIdentity();

//rotations for looking around & moving the camera
glRotatef(camera.rotation[0], 1.0f, 0.0f, 0.0f);
glRotatef(camera.rotation[1], 0.0f, 1.0f, 0.0f);
glRotatef(camera.rotation[2], 0.0f, 0.0f, 1.0f);
glTranslatef( -5.0f+camera.translation[0], 
                    camera.translation[1], -7.5f+camera.translation[2]);

//set OpenGL light attributes
passPosition(GL_LIGHT0, spotLight);
passSpotDirection(GL_LIGHT0, spotLight);
passPosition(GL_LIGHT1, greenLight);
passPosition(GL_LIGHT2, redLight);
passPosition(GL_LIGHT3, blueLight);

glUseProgram( shaderProg.getId() );
renderMap();
glUseProgram(0);

window.pushGLStates();//supposed to prevent OpenGL & SFML conflicts 
window.draw(testText);
window.popGLStates();

err = glGetError();//doesn't report any errors
if(err != GL_NO_ERROR)
{
    std::cout << "ERROR: " << err << std::endl;
}

window.display(); 
```

文本实例是这样创建的：

```
sf::Font fontVera;

std::cout << fontVera.loadFromFile("./res/Vera.ttf") << std::endl;
//the font is existing, output for debugging purposes(and shows no error)

sf::Text testText("hasdfas", fontVera, 32);
testText.setPosition(10,10); 
```

我正在使用 3.3 兼容性配置文件上下文、3.3 GLSL 和 2.0 SFML（从源代码编译）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T13:33:40.967

我已将字体渲染切换为[ftgl](http://sourceforge.net/projects/ftgl/)，因为我没有找到任何方法来修复 SFML 的渲染错误。

我怀疑我会切换回来，因为 SFML-OpenGL 状态冲突似乎相当普遍：

[StackOverflow：SFML OpenGL 绘图文本](https://stackoverflow.com/questions/8367238/sfml-opengl-drawing-text?rq=1)

[SFML-Forums：使用 OpenGL 照明和 RenderWindow 的疯狂错误](http://en.sfml-dev.org/forums/index.php?topic=4822.msg31456#msg31456)

[SFML 论坛：glCullFace 使 SFML 失明](http://en.sfml-dev.org/forums/index.php?topic=4449.msg33722#msg33722)

# javascript - 如何防止 jQuery-UI 手风琴在鼠标悬停时选择错误的项目？

> ID：12644316
> 
> 赞同：0
> 
> 时间：2012-09-28T17:00:15.093
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-accordion

我正在使用[jquery-ui 手风琴](http://jqueryui.com/demos/accordion/)，它会在鼠标悬停而不是单击时打开一个部分，但是我注意到如果您将鼠标快速悬停在多个项目上，则被选中的项目是您的鼠标悬停的第一个项目，而不是最后一个。

您可以在[他们的演示页面](http://jqueryui.com/demos/accordion/mouseover.html)或[jsfiddle 上的演示副本上对此进行测试](http://jsfiddle.net/5ygUz/)：只需将鼠标悬停在最后一项上以使其展开，然后将鼠标快速移动到第一项，然后传递第三项和第二项。最终结果是第三个项目是打开的，尽管您的鼠标在第一个项目上。（你也可以反过来做，但最容易从下到上复制问题）

如何防止这种行为发生，以便打开的最后一个项目是鼠标经过的项目，而不是鼠标经过的第一个项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:15:22.237

jQuery UI 已经实现了`hoverIntent`手风琴选择的功能，以解决动画队列问题。他们使用的代码片段如下->

```
//on DOM ready
$(function() {
    $("#accordion").accordion({
    event: "click hoverintent"
);
});

var cfg = ($.hoverintent = {
sensitivity: 7,
interval: 100
});

$.event.special.hoverintent = {
setup: function() {
    $( this ).bind( "mouseover", jQuery.event.special.hoverintent.handler );
},
    teardown: function() {
    $( this ).unbind( "mouseover", jQuery.event.special.hoverintent.handler );
    },
    handler: function( event ) {
        var self = this,
    args = arguments,
    target = $( event.target ),
    cX, cY, pX, pY;

    function track( event ) {
        cX = event.pageX;
        cY = event.pageY;
    };
    pX = event.pageX;
    pY = event.pageY;
    function clear() {
        target
                    .unbind( "mousemove", track )
        .unbind( "mouseout", arguments.callee );
        clearTimeout( timeout );
    }
    function handler() {
        if ( ( Math.abs( pX - cX ) + Math.abs( pY - cY ) ) < cfg.sensitivity ) {
        clear();
        event.type = "hoverintent";
        // prevent accessing the original event since the new event
        // is fired asynchronously and the old event is no longer
        // usable (#6028)
        event.originalEvent = {};
        jQuery.event.handle.apply( self, args );
        } else {
        pX = cX;
        pY = cY;
        timeout = setTimeout( handler, cfg.interval );
        }
    }
    var timeout = setTimeout( handler, cfg.interval );
    target.mousemove( track ).mouseout( clear );
    return true;
    }
}; 
```

# .htaccess - mod_rewrite SSL 与其他规则活动

> ID：12644319
> 
> 赞同：0
> 
> 时间：2012-09-28T17:00:24.827
> 
> 标签：.htaccess, mod-rewrite, ssl

我的 mod_rewrite 到 SSL 时遇到问题，同时保持我的其他规则。我需要所有页面都在 SSL 上，但是通过添加规则它创建了一个重定向循环。

这是我到目前为止所拥有的：

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^domain.com$
RewriteRule (.*) https://www.domain.com/ [R=301]

RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}

RewriteBase /

# Sign up
RewriteRule ^sign-up/$ /register.php [NC] 
```

我在这里哪里出错了？我试过改变规则的顺序，但没有运气。

干杯， RJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T20:43:13.153

您需要使用以下`[L]`标志退出重写迭代：

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^domain.com$
RewriteRule (.*) https://www.domain.com/ [R=301,L]

RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

RewriteBase /

# Sign up
RewriteRule ^sign-up/$ /register.php [NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:32:36.777

我想通了。事实证明，这是由于 Web 服务器位于负载均衡器后面。

因此，需要一段时间才能找到，但如果其他人在负载均衡器后面的多台服务器上遇到类似问题，这就是您需要的：

```
RewriteCond %{HTTP:X-Forwarded-Proto} !https
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L] 
```

谢谢， RJ

# sql - 记录在 dm_exec_cached_plans 但不在 dm_exec_query_stats

> ID：12644320
> 
> 赞同：1
> 
> 时间：2012-09-28T17:00:41.533
> 
> 标签：sql, sql-server, sql-server-2008

我试图确定一个 proc 执行了多少次。

当我按计划句柄搜索时，我在 dm_exec_cached_plans 中找到了一条记录，但在 dm_exec_query_stats 中没有。我能找到的所有文档都表明，如果记录在 dm_exec_cached_plans 中，那么它应该始终在 dm_exec_query_stats 中有相应的记录。

有谁知道这是不正确的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:10:09.360

你在哪里读到的——如果一条记录在 dm_exec_cached_plans 中，那么它应该总是在 dm_exec_query_stats 中有相应的记录？
实际上`dm_exec_cached_plans`在计划缓存中对每个编译计划都有记录，并且`dm_exec_query_stats`在相应的缓存计划中可以对每个查询语句都有记录。`dm_exec_query_stats`对于缓存对象类型“Parse Tree”或“CLR Compiled Proc”的缓存计划或系统存储过程、即席查询、预准备语句等对象，可以为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T15:13:20.223

使用 sys.dm_exec_procedure_stats 怎么样？

请参阅[http://msdn.microsoft.com/en-us/library/cc280701%28v=sql.100%29.aspx](http://msdn.microsoft.com/en-us/library/cc280701%28v=sql.100%29.aspx)

# perl - 如何在 Perl 文件中写入当前时间戳？

> ID：12644322
> 
> 赞同：10
> 
> 时间：2012-09-28T17:00:46.293
> 
> 标签：perl

如何在 Perl 文件中写入当前时间戳？

我制作了一个名为的文件`myperl.pl`，它将打印当前时间戳。该文件如下所示：

```
#!/usr/local/bin/perl
@timeData = localtime(time);
print "@timeData\n"; 
```

现在我正在尝试将此文件的输出重定向到另一个文本文件。脚本如下：

```
#!/usr/local/bin/perl
@myscript = "/usr/bin/myperl.pl";
@myfile = "/usr/bin/output_for_myperl.txt";
perl "myscript" > "myfile\n"; 
```

运行此程序时，我遇到以下错误：

> perl sample_perl_script.pl
> String found where operator expected at sample_perl_script.pl line 4, near "perl "myscript""
> (你需要预先声明 perl吗？) sample_perl_script.pl line 4, near "perl "myscript"" 的
> 语法错误
> sample_perl_script.pl 由于编译错误而中止。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-28T19:57:42.703

另一个提示。如果你想控制时间戳的格式，我通常会抛出一个像下面这样的子程序。这将返回格式为“20120928 08:35:12”的标量。

```
sub getLoggingTime {

    my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst)=localtime(time);
    my $nice_timestamp = sprintf ( "%04d%02d%02d %02d:%02d:%02d",
                                   $year+1900,$mon+1,$mday,$hour,$min,$sec);
    return $nice_timestamp;
} 
```

然后将您的代码更改为：

```
my $timestamp = getLoggingTime(); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-28T17:08:54.010

您需要一个文件句柄来写入文件：

```
#!/usr/local/bin/perl

use strict;
use warnings;

my $timestamp = localtime(time);

open my $fh, '>', '/tmp/file'
   or die "Can't create /tmp/file: $!\n";

print $fh $timestamp;

close $fh; 
```

一些文档：[`open`](http://perldoc.perl.org/functions/open.html),[学习 Perl](http://shop.oreilly.com/product/9780596520113.do)

另一种解决方案是一个没有文件句柄的脚本，只是一个打印，然后在命令行上：

```
./script.pl > new_date_file 
```

# powershell - 用于比较字符串的 PowerShell 哈希表或数组

> ID：12644323
> 
> 赞同：0
> 
> 时间：2012-09-28T17:00:47.727
> 
> 标签：powershell

我试图从路径名的文本文件中找到在唯一目录中拆分的文件夹名称的频率。所以使用这个数据集我想要以下结果：

1.  数据

    *   C:\Project_1\Models\MapShedMaps\randomfilename.txt
    *   C:\Project_1\Models\MapShedMaps\randomfilename.txt
    *   C:\Project_1\Models\MapShedMaps\randomfilename.txt
    *   C:\Project_2\Models\MapShedMaps\randomfilename.txt
    *   C:\Project_3\Models\MapShedMaps\randomfilename.txt
    *   C:\Project_3\Models\MapShedMaps\randomfilename.txt
    *   C:\Project_3\Models\MapShedMaps\randomfilename.txt
2.  结果

    *   项目_1 = 1
    *   项目_2 = 1
    *   项目_3 = 1
    *   型号 = 3
    *   MapShedMaps = 3

我的第一个想法是使用 Get-Content 然后 ForEach-Object 将每个单词从路径中拆分出来，并将它们存储在一个保持计数的哈希表中。为了停止重复，我正在考虑一个数组或另一个哈希表来存储当前对象的路径……这一切都在那里分崩离析。我不确定存储路径的“父”成员的最佳方法是什么，以便知道它是否是一个独特的事件。任何关于如何做到这一点的建议都会很棒。

更新：

好的，我正在考虑类似于哈希表 $SAVE 并计算每个 unqiue 值，数组 $PREVIOUS 是管道中的最后一个对象，数组 $HAVESEEN 是从一开始就捕获管道。

因此，如果字符串损坏，第一个对象将是 C，下一个是 Project_1，C 移动到 $PREVIOUS 和 $HAVESEEN。我将尝试将其写下来，但我不确定如何在哈希表和数组之间传递所有这些内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:07:40.640

对于初学者，您可以通过对路径进行分组来获得前 3 个结果项，然后计算其他值：

```
PS> Get-Content .\file.txt | Group-Object -NoElement

Count Name
----- ----
    3 C:\Project_1\Models\MapShedMaps\randomfilename.txt
    1 C:\Project_2\Models\MapShedMaps\randomfilename.txt
    3 C:\Project_3\Models\MapShedMaps\randomfilename.txt 
```

# perl - 在 Perl 中，如何在子程序之间共享一个变量，使用严格？

> ID：12644327
> 
> 赞同：3
> 
> 时间：2012-09-28T17:01:03.297
> 
> 标签：perl, use-strict

如果我不这样做`use strict;`，以下代码可以正常工作并打印出“alice”：

```
assign_name();
print_name();

sub assign_name {
    $name = "alice";
}

sub print_name {
    print $name;
} 
```

但是，当我这样做时，`use strict;`我知道我必须在使用它之前声明变量。我在应该使用`our`而不是`my`声明全局变量的地方阅读。所以我有以下内容：

```
use strict;
use warnings;

assign_name();
print_name();

sub assign_name {
    our $name = "alice";
}

sub print_name {
    print $name;   # This is line 12.

} 
```

然后我收到以下错误：

```
Variable "$name" is not imported at test.pl line 12.
Global symbol "$name" requires explicit package name at test.pl line 12.
Execution of test.pl aborted due to compilation errors. 
```

请帮忙。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-28T17:07:31.127

只需声明两个潜艇都可以看到的变量。

```
use strict;
use warnings;

my $name;

assign_name();
print_name();

sub assign_name {
    $name = "alice";
}

sub print_name {
    print $name;
} 
```

（没有理由在`our`这里使用！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T22:16:48.730

我知道这超出了您的问题范围，ikegami 的回答很好地回答了它，但我认为还有更多要说的。如果您有旨在更改包范围变量的函数，那么您可能会更好地将这些变量重写为对象属性。在 Perl 中，我们可以使用[`Moose`](http://p3rl.org/Moose).

```
#!/usr/bin/env perl

use strict;
use warnings;

{ # proper use of scoping, h/t tchrist

  package Person;

  use Moose;
  use namespace::autoclean; # recommended

  has 'name' => ( is => 'rw', isa => 'Str', required => 1);

  __PACKAGE__->meta->make_immutable; # recommended

}

my $person = Person->new( name => 'Joel' );
$person->name( 'Adam' ); # change name

print $person->name . "\n"; 
```

在这个例子中，我们创建了一个`name`属性，我们可以在对象构造期间设置它，然后使用访问器方法更改或查看它。本来是全局的数据，在这种情况下是名称，然后包含在对象的内部数据中。这允许代码的不同部分重用相同的逻辑，而不必担心全局数据的状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T17:04:47.197

您应该声明全局变量 upper ：

```
use strict;
use warnings;

my $name;

assign_name();
print_name();

sub assign_name {
    $name = "alice";
}

sub print_name {
    print $name;   # This is line 12.
} 
```

# nhibernate - 如何在 NHibernate Queryover where 子句中进行 String.IsNullOrEmpty() 测试？

> ID：12644330
> 
> 赞同：6
> 
> 时间：2012-09-28T17:01:32.317
> 
> 标签：nhibernate, queryover

我今天遇到了一种情况，我们的遗留数据库中的一个*永远不*应该为空的字段......是空的。

我正在对这个数据库使用 NHibernate 3.2，受影响的查询是用 QueryOver 编写的。

我目前的查询是这个

```
 return Session
        .QueryOver<FacilityGroup>()
        .Where(fg => fg.Owner.Id == Token.OwnerId && 
                     fg.UserName == Token.UserName)
        .OrderBy(fg => fg.Code).Asc
        .TransformUsing(Transformers.DistinctRootEntity); 
```

我希望它是这样的：

```
 return Session
            .QueryOver<FacilityGroup>()
            .Where(fg => fg.Owner.Id == Token.OwnerId && 
                         fg.UserName == Token.UserName && 
                         !string.IsNullOrEmpty(fg.Code))                
            .OrderBy(fg => fg.Code).Asc
            .TransformUsing(Transformers.DistinctRootEntity); 
```

当我尝试这个时，我得到一个异常“无法识别的方法调用：System.String:Boolean IsNullOrEmpty(System.String)”

所以 NHibernate 不能翻译 string.IsNullOrEmpty。很公平。但是，当我尝试这个

```
 return Session
            .QueryOver<FacilityGroup>()
            .Where(fg => fg.Owner.Id == Token.OwnerId && 
                         fg.UserName == Token.UserName && 
                         !(fg.Code == null || fg.Code.Trim() == "" ))
            .OrderBy(fg => fg.Code).Asc
            .TransformUsing(Transformers.DistinctRootEntity); 
```

我得到一个 InvalidOperationException “从范围''引用的'Domain.Entities.FacilityGroup'类型的变量'fg'，但它没有定义”

有什么想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-28T18:52:21.137

好的...我想我问这个问题太早了。我想出了一个解决办法。

我能做的是通过 SQL 函数投影从 hql 调用“trim”函数。我最终把它写成 IQueryOver 扩展方法来保持它的灵活性。如果有人需要，我会在这里发布。

```
public static class QueriesExtentions
{
    public static IQueryOver<E, F> WhereStringIsNotNullOrEmpty<E, F>(this IQueryOver<E, F> query, Expression<Func<E, object>> propExpression)
    {
        var prop = Projections.Property(propExpression);
        var criteria = Restrictions.Or(Restrictions.IsNull(prop), Restrictions.Eq(Projections.SqlFunction("trim", NHibernateUtil.String, prop), ""));
        return query.Where(Restrictions.Not(criteria));
    }
} 
```

在这里它正在使用中

```
 return Session
        .QueryOver<FacilityGroup>()
        .Where(fg => fg.Owner.Id == Token.OwnerId && fg.UserName == Token.UserName )
        .WhereStringIsNotNullOrEmpty(fg => fg.Code)
        .OrderBy(fg => fg.Code).Asc
        .TransformUsing(Transformers.DistinctRootEntity); 
```

# java - 没有源代码的android应用程序中的方法覆盖率

> ID：12644335
> 
> 赞同：4
> 
> 时间：2012-09-28T17:01:41.747
> 
> 标签：java, android, function, testing, code-coverage

有人可以在没有源代码的情况下给我一个关于 android apk 中方法覆盖率的想法吗？听说有一个android特定版本的emma项目，可以通过instrumentation给出方法覆盖率信息。但是，如果我没有源代码，我该如何检测代码？

我的目标是了解如何在运行应用程序时获取有关在运行时调用了哪些方法的报告。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T02:43:11.060

您不需要 emma 来获取调用了哪些方法的报告。只是：

1.  启动 DDMS
2.  选择了设备
3.  选择流程
4.  按“开始方法分析”按钮（带有红色按钮的箭头）
5.  “停止方法分析”

你会得到这样的报告：

![在此处输入图像描述](../Images/2af36c802cb0116a5f5d0b0d05437bc1.png)

请参阅[http://developer.android.com/tools/debugging/debugging-tracing.html中的详细信息](http://developer.android.com/tools/debugging/debugging-tracing.html)

# c# - 具有通用工厂模式的 IRepository 模式

> ID：12644338
> 
> 赞同：1
> 
> 时间：2012-09-28T17:01:52.190
> 
> 标签：c#, generics, factory-pattern, irepository

我有以下 DBML 修改（我使用 Linq to SQL 作为 DAL）。

```
public interface ILinqSQLObject { }

// these are objects from SQL Server mapped into Linq to SQL
public partial class NEWDEBT : ILinqSQLObject { }
public partial class OLDDEBT : ILinqSQLObject { }
public partial class VIPDEBT : ILinqSQLObject { } 
```

有了它，我可以在其他区域更正确地操作我的 Linq 对象。

我刚刚完成了一个 IRepository 模式实现。

```
public interface IDebtManager<T>
    {
        IQueryable<T> GetAllDebts();
        IQueryable T GetSpecificDebt(System.Linq.Expressions.Expression<Func<T, bool>> predicate);
        void Insert(T debt);
        // other methods
    }

public class DebtManager<T> : IDebtManager<T> where T : class, ILinqSQLObject 
    {
        DebtContext conn = new DebtContext();
        protected System.Data.Linq.Table<T> table;

        public DebtManager()
        {
            table = conn.GetTable<T>();
        }

        public void Insert(T debt)
        {
            throw new NotImplementedException();
        }

        public IQueryable<T> GetSpecificDebt(System.Linq.Expressions.Expression<Func<T, bool>> predicate)
        {
            return table.Where(predicate);
        }

        public IQueryable<T> GetAllDebts()
        {
            return table;
        }
    } 
```

这完美无瑕。但是，有时我不知道在编译时我将使用哪个特定的表。为此，我尝试为我的 DebtManager 创建一个简单的通用工厂。

```
public static class DebtFactoryManager
{

    public static DebtManager<ILinqSQLObject> GetDebtManager(string debtType) 
    {
        switch (debtType)
        {
            case "New Client":
                return new DebtManager<NEWDEBT>();
            case "Old Client":
                return new DebtManager<OLDDEBT>();
            case "VIP Client":
                return new DebtManager<VIPDEBT>();
            default:
                return new DebtManager<NEWDEBT>();
        }

        return null;
    }

} 
```

但是它不起作用。它说我不能“隐式转换`DebtManager<NEWDEBT>`为`DebtManager<ILinqSQLObject>`”，但是如果 NEWDEBT 实现了 ILinqSQLObject，为什么编译器不能识别它？显然我在做一些错误，但我看不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:25:54.760

这个错误是由泛型不隐式支持协方差引起的；也就是说，将特定的泛型参数类型视为其基本类型之一。

解决这个问题的几种方法。首先，您可以定义泛型 DebtManager 继承自的非泛型 DebtManager 基类，并将其返回。其次，您可以定义一个 DebtManager 实现的通用接口；`out`通过在泛型类型参数之前使用关键字，可以将泛型接口定义为协变的。

**编辑：**让我们回到主要需求。在编译时，您可能不知道需要使用哪种类型的对象，因此您不知道需要哪个存储库。那么，我是否可以建议您使用一个 Repository-per-database，而不是一个 Repository-per-table 架构。DebtManager 对于任何 Linq to SQL 类型已经是通用的；那么为什么不让方法也通用，允许它们在调用之间是通用的呢？

```
public interface IRepository<T> where T:class, ILinqSqlObject
{
    IQueryable<TSpec> GetAllDebts<TSpec>() where TSpec : T;
    IQueryable<TSpec> GetSpecificDebt<TSpec>(System.Linq.Expressions.Expression<Func<TSpec, bool>> predicate) where TSpec : T;
    void Insert<TSpec>(TSpec debt) where TSpec:T;
    // other methods
}

interface IDebtObject : ILinqSqlObject

public interface IDebtManager:IRepository<IDebtObject> { }

public class DebtManager:IDebtManager
{
    DebtContext conn = new DebtContext();

    public DebtManager()
    {            
    }

    public void Insert<T>(T debt) where T:IDebtObject
    {
        throw new NotImplementedException();
    }

    public IQueryable<T> GetSpecificDebt(System.Linq.Expressions.Expression<Func<T, bool>> predicate) where T:IDebtObject
    {
        return conn.GetTable<T>().Where(predicate);
    }

    public IQueryable<T> GetAllDebts<T>() where T:IDebtObject
    {
        return conn.GetTable<T>();
    }

} 
```

# c# - 绑定后更改下拉列表的选定项

> ID：12644340
> 
> 赞同：1
> 
> 时间：2012-09-28T17:01:58.820
> 
> 标签：c#, asp.net

我在页面中有一个下拉列表，我将其与代码绑定

```
 Category catObj = new Category();
    dropCat.DataSource = catObj.GetAllCategory();
    dropCat.DataTextField = "Title";
    dropCat.DataValueField = "CategoryID";
    dropCat.DataBind(); 
```

我想用这个代码更改下拉列表的选定项目

```
dropCat.SelectedIndex = Convert.ToInt32(catObj.ParentId); 
```

但是此代码无法更改所选项目请帮助我谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T17:06:19.987

我假设您尝试按值而不是按索引进行选择，因为`catObj.ParentId`可能包含 CategoryId。如果我的假设是正确的，你需要这样做

```
dropCat.SelectedValue = catObj.ParentId.ToString(); 
```

[`DropDownList.SelectedIndex`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.dropdownlist.selectedindex%28v=vs.80%29.aspx)属性指的是 Items 集合中的位置，而不是关于项目的值。

# objective-c - 通过 mutableCopy 或 arrayWithArray 创建一个带有字面量的 NSMutableArray：

> ID：12644341
> 
> 赞同：13
> 
> 时间：2012-09-28T17:02:00.637
> 
> 标签：objective-c, cocoa, memory-management, objective-c-literals

> **可能重复：**
> [NSMutableDictionary 的字面创建效率是否低于类帮助方法？](https://stackoverflow.com/questions/12426786/is-literal-creation-of-an-nsmutabledictionary-less-efficient-than-the-class-help)

根据介绍 ObjectiveC 文字的 WWDC 视频，`NSMutableArray`可以像这样初始化 s：

```
[NSMutableArray arrayWithArray:@[]]; 
```

但是如果我们这样做呢：

```
[@[] mutableCopy]; 
```

我知道一个是初始化数组，另一个只是提供浅拷贝；因此内存管理是不同的。但是如果我们使用ARC，那么使用后者有什么缺点呢？它更贵吗？ARC 的处理方式可能不同，但我只是想知道 using`mutableCopy`是否“更糟”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T17:09:25.527

在前一种情况下，您最终会在当前自动释放池中添加两个对象：NSArray 文字和您从中创建的 NSMutableArray。在后者中，文字 NSArray 被添加到自动释放池中，但从中复制的 NSMutableArray 没有。所以第一种情况在性能方面*稍差*一些，因为清空自动释放池（例如在运行循环周期结束时）需要连续释放两个对象，而在第二种情况下，副本将与自动释放的文字。在实践中，时间差将是无限小的。

# visual-studio-2010 - 在 Visual Studio 2010 中配置 libjpeg

> ID：12644343
> 
> 赞同：5
> 
> 时间：2012-09-28T17:02:13.500
> 
> 标签：visual-studio-2010, libjpeg

我想在 VS10 中配置 libjpeg。我找到了这个指南 [http://www.leptonica.org/vs2008doc/building-image-libraries.html](http://www.leptonica.org/vs2008doc/building-image-libraries.html)并从同一个站点下载了图书馆的档案。问题是指南中提到了一些文件 jpeg.sln，但下载的存档中不存在此文件。如果有人可以帮助我，我会很高兴。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T18:25:30.813

包里有 jpeg.prj 吗？

通常，如果该文件夹中不存在具有相同基本名称的文件，则打开（双击）.prj 文件会自动创建一个 .sln 文件。

如果没有，请执行@HansPassant 建议的操作：运行`nmake -f makefile.vc setup-v10`以创建 jpeg.sln 文件。

**注意：** NMAKE 必须在您的执行路径中。如果不是，请转到**开始按钮**> `All Programs`> `Microsoft Visual Studio 10`> `Visual Studio Tools`>`Visual Studio Command Prompt (2010)`然后运行上述命令。

我刚试过。它`jpeg.sln`像魅力一样生成文件（以及其他必要的文件`jpeg.vcxproj`等）

```
Microsoft Visual Studio Solution File, Format Version 11.00
# Visual C++ Express 2010
Project("{8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}") = "jpeg", "jpeg.vcxproj", "{019DBD2A-273D-4BA4-BF86-B5EFE2ED76B1}"
EndProject
Global
    GlobalSection(SolutionConfigurationPlatforms) = preSolution
        Release|Win32 = Release|Win32
    EndGlobalSection
    GlobalSection(ProjectConfigurationPlatforms) = postSolution
        {019DBD2A-273D-4BA4-BF86-B5EFE2ED76B1}.Release|Win32.ActiveCfg = Release|Win32
        {019DBD2A-273D-4BA4-BF86-B5EFE2ED76B1}.Release|Win32.Build.0 = Release|Win32
    EndGlobalSection
    GlobalSection(SolutionProperties) = preSolution
        HideSolutionNode = FALSE
    EndGlobalSection
EndGlobal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-30T00:55:14.033

如果没有运气，使用 BMP 图像文件怎么样？我认为您可以在没有独立 JPEG 组库的情况下阅读 BMP 文件（详情请参阅[http://dlib.net/image_ex.cpp.html](http://dlib.net/image_ex.cpp.html)。）

如果您仍想使用 JPEG 文件，您可以考虑在代码中使用 OpenCV。首先在 OpenCV 函数中打开 JPG 并使用将其转换为 Dlib 格式

cv_image img(your_opencv_image);

（详情见[http://sourceforge.net/p/dclib/discussion/442518/thread/6ef452cc/](http://sourceforge.net/p/dclib/discussion/442518/thread/6ef452cc/)）

# php - SQL Where 语句匹配不同顺序的单词

> ID：12644346
> 
> 赞同：0
> 
> 时间：2012-09-28T17:02:45.823
> 
> 标签：php, mysql, sql, where-clause

我有以下mysql代码：

```
SELECT * FROM top_movies WHERE genre LIKE '%$genre%' 
```

$genre 是一个字符串，例如 'Comedy Drama'

数据库中的流派列有喜剧戏剧等字符串。

如果 $genre 是 Comedy Drama，它将匹配 Comedy Drama。但我也希望它与戏剧喜剧相匹配。

我怎样才能做到这一点？

谢谢。

注意：$genre 是一个动态变量，我不知道它包含多少个单词，以什么顺序或包含哪些单词。

注意 2：我使用的是 PHP，因此欢迎使用 PHP 进行任何操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T17:10:54.153

在 php 中，您应该将流派拆分为单词

`$genre = explode($genre," ")`

并且 $genre 变成和数组，每个元素包含一个单词

你应该做的广告

```
$query = ""
foreach $genre as $element
{
  if (strlen($query) > 1)
  {
    $query += "AND "
  }
  $query += "genre LIKE  %"+$element + "% "
}
$query = "SELECT * FROM top_movies WHERE " + $query 
```

这样，无论顺序如何，它都会搜索流派中的每个单独元素

# android - 将 TextView 左对齐到 EditText 内的文本？

> ID：12644347
> 
> 赞同：4
> 
> 时间：2012-09-28T17:02:47.900
> 
> 标签：android, android-layout, alignment

我想将 a 中的`TextView`文本与`EditText`它正下方的文本对齐。如果不使用填充技巧，这可能吗？

如果不是，这是因为它不鼓励吗？我可以看到它被劝阻，因为它可能会使用户混淆两个控件之间的区别。

![在此处输入图像描述](../Images/88b207d795818eb733e3a005a82ec330.png)

这是创建上述屏幕截图的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/text_view"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:text="Please align my first character" />

    <EditText
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/text_view"
        android:hint="To my first character" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:27:36.497

不，如果不使用填充或`layout_margin`. `EditText`有一个带边框和填充的背景，所以它的内容区域比`TextView`. 我认为在这种情况下使用填充是正常的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:22:07.623

我觉得你将不得不使用填充到`TextView`. 实际上，在我看来，第一个字符`TextView`和其中的第一个字符`EditView`没有完美对齐。它们也有不同的字体大小，所以它现在看起来很自然 - 或者可能只有一点填充，但不要太多。padding 的时候不要忘记考虑不同屏幕尺寸和分辨率的用户，所以请使用`dp`with you are doing padding with `android:layout_marginLeft`。例如：

```
<TextView
    android:id="@+id/text_view"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="5dp"
    android:text="Please align my first character" /> 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T17:15:29.560

实际上这可能会令人困惑，但您可以在 上添加一点偏移以`TextView`使其看起来更好。使用`android:layout_marginLeft`并选择一个符合您要求的值。希望这可以帮助。

# windows - 由于意外的文件锁定，导致 _lopen 文件打开错误的原因

> ID：12644349
> 
> 赞同：0
> 
> 时间：2012-09-28T17:02:58.303
> 
> 标签：windows, iis, iis-6, file-locking

我正在维护一个访问服务器上数据的桌面应用程序。多个用户可以访问相同的文件。我们有一个库，可以使用 _lopen（C 库函数）打开文件进行检索。我们总是以 SHARE_DENY_NONE 只读方式打开。为了提高性能，我们保持文件打开，直到用户退出应用程序。那是文件关闭的时候。但是，如果超过 20 分钟没有任何活动，我们将失去与服务器的连接。在这种情况下，我们启动连接并再次打开文件。假设连接丢失时调用了文件关闭操作，但没有证据表明调用了文件关闭。

不幸的是，用户每天会收到一两次错误消息，提示他们无法打开文件。我们认为这是因为文件被锁定，因为我们也无法在资源管理器中打开它。清除错误的唯一方法是调用 IISRESET，以便清除所有用于检索的文件句柄。但是，今天我们收到错误消息，这是一个通用文件打开错误，我们能够在资源管理器中打开文件并通过回收应用程序池来解决问题。

因为有些用户在没有做任何事情之前一启动应用程序就得到文件打开错误，我们认为这个问题一定是其他用户（或进程）锁定文件引起的。我们无法复制错误。

我已经查看了源代码以查看文件是如何打开的。我已经查看了 Process Explorer，我们的软件始终可以访问该文件。我查看了进程监视器并看到该文件已打开，允许其他用户进行读/写操作，并且该文件在应用程序关闭时关闭。我们从来没有在我们的开发服务器上收到错误，而只是在生产服务器上。该错误不依赖于大量用户，因为我们无法使用一个测试程序来复制它，该程序用 1000 个不同的用户打开文件 1000 次。此外，我们已经看到只有 9 个用户的错误。

我希望有人可以建议进行其他测试以尝试或可能出现此问题的其他原因。

# android - 自定义吐司：findViewById(R.id.toast) 上的错误

> ID：12644352
> 
> 赞同：0
> 
> 时间：2012-09-28T17:03:01.503
> 
> 标签：android, toast

我正在尝试制作自定义吐司，但收到以下错误：

> 找不到符号 (ViewGroup) findViewById(R.id.toast_root));

同时`findViewById()`可以在其他代码行中看到。我的错误是什么？

```
public class MyCustomToast extends Toast {

public MyCustomToast(Context context){
    super(context);
}

public static Toast customToast(Context context, CharSequence text, int duration) {

    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View layout = inflater.inflate(R.layout.toast_layout, (ViewGroup) findViewById(R.id.toast_root));

    ImageView image = (ImageView) layout.findViewById(R.id.toast_image);
    image.setImageResource(R.drawable.skipper_toast);

    TextView text_toast = (TextView) layout.findViewById(R.id.toast_text);
    text_toast.setText(text);

    Toast toast = new Toast(context);

    toast.setGravity(Gravity.TOP, 0, 0);
    toast.setDuration(duration);
    toast.setView(layout);
    toast.show();

    return toast;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:08:10.377

以下是您应该如何更改代码：

```
public class MyCustomToast extends Toast {

public MyCustomToast(Context context){
    super(context);
}

public static Toast customToast(Activity activity, CharSequence text, int duration) {

    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View layout = inflater.inflate(R.layout.toast_layout, (ViewGroup) activity.findViewById(R.id.toast_root));

    ImageView image = (ImageView) layout.findViewById(R.id.toast_image);
    image.setImageResource(R.drawable.skipper_toast);

    TextView text_toast = (TextView) layout.findViewById(R.id.toast_text);
    text_toast.setText(text);

    Toast toast = new Toast(context);

    toast.setGravity(Gravity.TOP, 0, 0);
    toast.setDuration(duration);
    toast.setView(layout);
    toast.show();

    return toast;
}
} 
```

希望这可以帮助。

# java - 从 rgb 整数到字节数组并返回的转换不起作用

> ID：12644353
> 
> 赞同：1
> 
> 时间：2012-09-28T17:03:19.663
> 
> 标签：java, image, rgba

我尝试通过操作 rgb 字节将数据保存在图像中。但是每次转换 rgb-byte[] 并返回不返回相同的值。在使用自己的位移方法之后，我使用了 Java Color 类，但似乎 alpha 通道存在错误。以下测试方法适用于颜色值，但 alpha 值每次都不同。

```
Random r = new Random();
int red = r.nextInt(255), green = r.nextInt(255), blue = r.nextInt(255), alpha = r.nextInt(255); 
Color one = new Color(red, green, blue, alpha);
Color two = new Color(one.getRGB());
System.out.println(one.getRed() + " " + one.getGreen() + " " + one.getBlue() + " " + one.getAlpha());
System.out.println(two.getRed() + " " + two.getGreen() + " " + two.getBlue() + " " + two.getAlpha()); 
```

我做错了什么还是Java中有错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:20:06.997

单参数`Color`构造函数忽略 alpha。使用两个参数的构造函数：

```
Color two = new Color(one.getRGB(), true); 
```

# c# - 默认登录 asp.net MVC3 重定向到错误的视图。这套在哪里？

> ID：12644355
> 
> 赞同：4
> 
> 时间：2012-09-28T17:03:23.977
> 
> 标签：c#, asp.net, asp.net-mvc-3, forms-authentication

当用户尝试访问需要授权的页面时，我遇到了重定向登录页面的问题。出于某种原因，它想指向：

```
http://domain.com/Account/Login 
```

当它应该重定向到：

```
http://domain.com/Account/LogOn 
```

我相信我已经在 web.config 文件中正确设置了它：

```
<authentication mode="Forms">
    <forms loginUrl="~/Account/LogOn" timeout="2880" />
</authentication> 
```

但由于某种原因，它仍然会错误地重定向。我还在整个解决方案中搜索了“登录”，但没有看到其他地方可以指定帐户/登录。

如何修复它以正确重定向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:18:43.187

在将可部署程序集与 MVC3 一起使用时，这似乎是一个已知问题。

[我在这里](https://stackoverflow.com/questions/6073445/mvc-forms-loginurl-is-incorrect)的答案中找到了解决方案。

# android - 将 ListView 置于按钮下方

> ID：12644360
> 
> 赞同：0
> 
> 时间：2012-09-28T17:03:49.517
> 
> 标签：android, xml, listview, button

我有一个出现在两个按钮后面的 ListView。我希望 ListView 填充按钮下方的区域。我已经尝试过此链接中的解决方案： [Android Layout with ListView and Buttons](https://stackoverflow.com/questions/2383847/android-layout-with-listview-and-buttons) and [Listview with button below not working proper](https://stackoverflow.com/questions/6349415/listview-with-button-below-not-working-properly)。但是，它不起作用。您能告诉我如何将 ListView 保持在按钮下方吗？

![在此处输入图像描述](../Images/1f605caa9ec19875ad31b5271cdad818.png)

这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1.0"
    >

    <ListView
        android:id="@+id/listview"
        android:layout_width="fill_parent"
           android:layout_below="@id/layoutButtons"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:weightSum=".50"  />

        <LinearLayout
 android:id="@+id/layoutButtons"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
           android:layout_weight="1.0" >

        <Button
            android:id="@+id/btnLogout"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight=".70"
            android:text="left" />

        <Button
            android:id="@+id/btnMessage"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight=".30"
            android:text="right" />
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:37:24.680

稍微修改了 Leoa 的答案：

```
<LinearLayout
    android:id="@+id/layoutButtons"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1.0" >

    <Button
        android:id="@+id/btnLogout"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".70"
        android:text="left" />

    <Button
        android:id="@+id/btnMessage"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".30"
        android:text="right" />
</LinearLayout>

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/layoutButtons"
    android:weightSum=".50" /> 
```

删除了

```
android:layout_alignParentTop="true" 
```

从 ListView 并将 ListView 的 id 更改为 @android:id/list。此外，ListView 必须放置在带有按钮的 LinearLayout 下方，否则您将无法在 ListView 中使用 android:layout_below。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:28:34.557

您可以在列表视图的标题中添加按钮：

**使用按钮listview_header.xml**创建布局

 **```
 <?xml version="1.0" encoding="utf-8"?>
   <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layoutButtons"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
       android:layout_weight="1.0" >

    <Button
        android:id="@+id/btnLogout"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".70"
        android:text="left" />

    <Button
        android:id="@+id/btnMessage"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=".30"
        android:text="right" />
</LinearLayout> 
```

声明视图：

```
 private ListView listView;
 private ViewGroup mListHeaderView; 
```

onCreateView()

```
 mListHeaderView = (ViewGroup)inflater.inflate(R.layout.listview_header,
 listView, false); 
```

onActivityCreated()

```
listView = this.getListView();
listViewTickets.addHeaderView(mListHeaderView,null,false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T17:11:42.650

尝试以下操作：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    >

        <LinearLayout
 android:id="@+id/layoutButtons"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
           android:orientation="horizontal" >

        <Button
            android:id="@+id/btnLogout"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight=".70"
            android:text="left" />

        <Button
            android:id="@+id/btnMessage"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight=".30"
            android:text="right" />
    </LinearLayout>

    <ListView
        android:id="@+id/listview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</RelativeLayout> 
```

希望这可以帮助。**

# java - 如何仅将文本字段的值放入变量中

> ID：12644361
> 
> 赞同：-1
> 
> 时间：2012-09-28T17:03:50.643
> 
> 标签：java, swing, awt, paintcomponent, graphic

您好，我正在尝试在 Java 中绘制对角线，但这不会像它应该的那样工作..

“值”变量每次都在 for 循环中更新，但它获取下一个值

例如，如果我插入一个 1，我会在控制台中使用 system.out.println(value) 得到这个：

> 2 4 8 16 32 64 128 256 512 1024 2048 4096 8192 16384 32768 65536 131072 262144 524288 1048576 2097152 4194304

但变量“值”必须包含我插入的值。我为此使用的代码你可以在下面找到

```
DrawLines line = new DrawLines();
int value = 0;
public void paintComponent(Graphics g) {

    super.paintComponent(g);

    int xPos = 0;
    int yPos = getHeight() - (getHeight() / 2);

    for(int aantalLines = 0; aantalLines < 10; aantalLines++ ) {
        line.drawLines(g, xPos, yPos + value, getWidth(), getHeight() - value );
        value += value;
        System.out.println(value);
        System.out.println(aantalLines);
    }

}

public void actionPerformed(ActionEvent e) {

    try {
        value = Integer.parseInt(tussenRuimte.getText());
        repaint();
    }
    catch(NumberFormatException err) {
        JOptionPane.showMessageDialog(null, "Number Format Error: Vul alles goed in s.v.p");
    }

} 
```

问题是它不能像这样工作..有人可以解释我做错了什么以及如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:11:39.080

不要`value`在 paintComponent 方法中更改 from 的值。相反，将其复制到 paintComponent 方法的另一个本地变量中，然后使用和更改*该*变量。这样，每次`paintComponent(...)`调用时，它都不会重新设置值所持有的 int。

例如，

```
public void paintComponent(Graphics g) {
    super.paintComponent(g);

    int xPos = 0;
    int yPos = getHeight() - (getHeight() / 2);
    int localValue = value;

    for(int aantalLines = 0; aantalLines < 10; aantalLines++ ) {
        line.drawLines(g, xPos, yPos + localValue, getWidth(), getHeight() - localValue );
        localValue += localValue;
        // System.out.println(value);
        // System.out.println(aantalLines);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:44:07.927

为什么要修改`value`while 你已经有一个循环变量的值：

```
for(int aantalLines = 0; aantalLines < 10; aantalLines++ ) {
  line.drawLines(g, xPos,       yPos +        ((aantalLines + 1) * value), 
                    getWidth(), getHeight() - ((aantalLines + 1) * value) );
} 
```

这应该归结为@Hovercraft 已经建议的内容。

如果这些解决方案都没有帮助，那么您可能在其他地方遇到了问题。

注意：不要更改`paint`, `paintComponent`, ... 方法中的状态。您无法控制调用它们的次数和时间

# windows - 在（linux）和（windows上的cygwin）中从ant调用bash脚本

> ID：12644370
> 
> 赞同：5
> 
> 时间：2012-09-28T17:04:28.707
> 
> 标签：windows, bash, unix, ant, cygwin

我有一个`bash`名为`bashScript.sh`.

我需要从windows(cygwin) 和 unix/linux 上`bashScript.sh`的脚本开始。`ant`

我该怎么做呢？

我已经尝试过这个，以及其他一些解决方案，使用环境变量但没有`env.OSTYPE`. 并使用...

```
 <exec executable="/bin/bash" failonerror="true">
        <arg value="bashScript.sh"/>
    </exec> 
```

...在 windows(cygwin) 上不起作用，因为 cygwin 无法找到`\bin\bash`.

谢谢，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-28T17:15:17.273

您可以使用不同的 s 创建两个`exec`任务`osfamily`。

像这样：

```
<exec dir="." executable="C:\Path\to\cygwin\bin\bash" osfamily="windows">
    <arg value="bashScript.sh"/>
</exec>
<exec dir="." executable="/bin/bash" osfamily="unix">
     <arg value="bashScript.sh"/>
</exec> 
```

# javascript - jQuery Deferred - 在运行时向 Deferred 合约添加回调

> ID：12644372
> 
> 赞同：1
> 
> 时间：2012-09-28T17:04:30.483
> 
> 标签：javascript, jquery, jquery-deferred

我需要向 jQuery 的 .when() 监控的函数添加未知数量的 .pipe() 调用（仅在运行时知道）。这些调用将基于另一个异步操作导致的 ajax 调用。请参阅下面的代码以获得更清晰的解释：

```
$.when(
    $.ajax({ 
        async: true,        
        success: function (data, textStatus, jqXhr) {
            console.log('Level 1')

            for(var i = 0; i < data.length; i++)
                jqXhr.pipe(
                    $.ajax({  
                        data: data[i],                                                              
                        async: true,        
                        success: function (data, textStatus, jqXhr) {
                            console.log('Level 2');
                        },       
                    })
                );
        },       
    }),
    $.ajax({
        async: true,        
        success: function (data, textStatus, jqXhr) {
            console.log('Level 3');
        },       
    })
).done(function(){ console.log('All done!'); }); 
```

基本上 Level 1 和 Level 3 需要并行执行。Level 2s都是基于Level 1的结果。而Level 1，所有的Level 2s和Level 3都需要在All done之前执行。

使用上面的代码不起作用，因为对 .pipe() 的调用不会影响 .when() 正在监视的内容。

可以用 jQuery 的 Deferred 框架做我想做的事吗？

谢谢你的帮助。

注意：早些时候，我问了一个非常相似的问题，但我意识到情况比我在那里说明的要复杂得多，我不想对现有答案造成混淆。

[原始问题](https://stackoverflow.com/questions/12643065/jquery-deferred-adding-a-callback-to-the-deferred-contract)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:03:27.830

它并没有那么复杂。如果您想并行执行所有级别 2 调用，只需在回调`$.when`内部`.pipe`调用并返回该延迟对象：

```
$.when(
    $.ajax({        
        // ...      
    }).pipe(function(data) {
        // concise way to make the Ajax calls for each value
        var deferreds = $.map(data, function(value) {
            return $.ajax({data: value, /*...*/});
        });
        return $.when.apply($, deferreds);
    }),
    $.ajax({        
        // ...       
    })
).done(function(){ console.log('All done!'); }); 
```

如果要按顺序执行它们，请`.pipe`再次使用：

```
$.when(
    $.ajax({        
        // ...      
    }).pipe(function(data) {
        // A "dummy" resolved deferred object 
        var deferred = (new $.Deferred()).resolve();
        $.each(data, function(value) {
            deferred = deferred.pipe(function() {
                return $.ajax({data: value, /*...*/});
            });
        });
        return deferred;
    }),
    $.ajax({        
        // ...       
    })
).done(function(){ console.log('All done!'); }); 
```

* * *

我不得不说，您应该将 Ajax 调用的数量保持在最低限度。

# mysql - 如何在MYSQL中使用随机值自动更新数据库字段

> ID：12644374
> 
> 赞同：0
> 
> 时间：2012-09-28T17:04:35.217
> 
> 标签：mysql, database

我了解如何用随机值填充字段，但我需要我的字段自动更新每个新列的随机值。出于某种原因，我无法弄清楚如何做到这一点。

顺便说一句，正如上面所说，这是针对 MySQL 中的数据库的。

感谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:07:30.987

您可以使用触发器在插入后更新特定列，如下所示：

```
DELIMITER |

CREATE TRIGGER randtrigger AFTER INSERT ON your_table
  FOR EACH ROW BEGIN
    UPDATE your_table SET some_column = rand()
    WHERE id = NEW.id;
  END;
|

DELIMITER ; 
```

# ms-access - Access VBA中的输入框不会显示

> ID：12644378
> 
> 赞同：1
> 
> 时间：2012-09-28T17:05:04.877
> 
> 标签：ms-access, vba

我在 Access VBA 中有一个子程序，我想从用户那里获得一些输入。我将代码放入输入框，但是当我运行它时，没有出现对话框供用户输入输入。

我有这样的事情：

```
Dim Test As String

Test = InputBox("Enter Stuff Here:") 
```

代码将运行良好，但没有任何反应。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:06:34.610

您是否可以运行代码，例如，将其发布到模块中，而不是表单模块中，然后运行（f5）它：

```
Sub MyInput()
Dim Test As String

Test = InputBox("Enter Stuff Here:")
End Sub 
```

顺便说一句，使用 MS Access 获取用户输入的最佳方式是表单。

# visual-studio-2010 - 字符串化预处理器运算符在什么条件下添加 _T？

> ID：12644383
> 
> 赞同：0
> 
> 时间：2012-09-28T17:05:20.200
> 
> 标签：visual-studio-2010, visual-c++, preprocessor, visual-studio-macros

以下代码无法在我的 VC++ 2010 项目中编译：

```
define MY_MAJOR_VERSION   20
define OLESTR_(str)       L##str
define MOLE( STR )        OLESTR_(#STR)
define MAKE_STR(STR)      MOLE(STR)

REGMAP_ENTRY(MAKE_STR(VERSION), MAKE_STR(MY_MAJOR_VERSION)) 
```

`VERSION`不是宏定义，只是文本。最后，我想要：

```
REGMAP_ENTRY(L"VERSION", L"20") 
```

但是当我在调试模式下编译时，我得到的是：

```
REGMAP_ENTRY(L"VERSION", LL"20") 
```

我认为这是一个项目设置，因为我在其他情况下在调试模式下使用过它，但从来没有遇到过这个问题。是否有 VC++ 2010 设置会导致字符串化运算符插入`L`or `_T`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:46:48.580

对我来说，这个（请注意，我改为`MAKE_STR`-`MAKE_OLESTR`我认为这是问题中发布的代码中的错字）：

```
#define MY_MAJOR_VERSION   20
#define OLESTR_(str)       L##str
#define MOLE( STR )        OLESTR_(#STR)
#define MAKE_OLESTR(STR)      MOLE(STR)

REGMAP_ENTRY(MAKE_OLESTR(VERSION), MAKE_OLESTR(MY_MAJOR_VERSION)) 
```

预处理（如 所示`cl /E test.c`）：

```
REGMAP_ENTRY(L"VERSION", L"20") 
```

这似乎是你想要的。

您可能想要发布可以使用命令行编译复制的内容。

# javascript - 禁用和重新启用按钮

> ID：12644387
> 
> 赞同：0
> 
> 时间：2012-09-28T17:05:44.683
> 
> 标签：javascript, button, timer, onclick, onmouseout

我的页面上有几个按钮，它们要么是“开始计时器”按钮，要么是“停止计时器”按钮，它们分别运行 startTimer 和 stopTimer 功能。

在 startTimer 函数期间，按钮的 onclick 从 startTimer 变为 stopTimer，反之亦然。

目前，一旦单击，该按钮将永久地一个接一个地运行这两个功能。

我希望它运行该功能，然后停止准备再次单击该按钮并运行相反的功能。

我一直在探索的一种方法是在按钮运行时禁用它，让功能检查启用的按钮，运行该功能，然后尝试创建一个事件以重新启用它。这是我挣扎的最后一点。

```
function startTimer(project) {
var url = document.URL + '?timer=start&id=' + project;
var buttonid = 'button' + project;
var button =  document.getElementById(buttonid);
var stopText = 'stopTimer(' + project + ')';
if(button.disabled == false){
    xmlhttp = new XMLHttpRequest();
    xmlhttp.open("GET",url,false);
    xmlhttp.send();
    var result = xmlhttp.responseText;

    if(result == 'ok'){
        button.disabled = true;
        button.setAttribute("class","btn btn-danger btn-mini");
        button.value = "Stop Timer";
        button.setAttribute("onclick", stopTimer(project));
    }
    else{
        alert("I couldn't start the timer.");
    }
} 
```

}

```
function stopTimer(project) {
var url = document.URL + '?timer=stop&id=' + project;
var buttonid = 'button' + project;
var button =  document.getElementById(buttonid);
var startText = 'startTimer(' + project + ')';

if(button.disabled == false){
    xmlhttp = new XMLHttpRequest();
    xmlhttp.open("GET",url,false);
    xmlhttp.send();
    var result = xmlhttp.responseText;

    if(result == 'ok'){
        button.disabled = true;
        button.setAttribute("class","btn btn-sucess btn-mini");
        button.value = "Start Timer";
        button.setAttribute("onclick", startTimer(project));
    }
    else{
        alert("I couldn't stop the timer.");
    }
} 
```

HTML/PHP：

```
<?php if(in_array($project[0], $started)){ ?> 
                    <td>
                        <input type="button" class="btn btn-danger btn-mini" value="Stop Timer" onClick="stopTimer(<?php echo $project[0]; ?>)" id="button<?php echo $project[0]; ?>" />
                    </td>
                    <?php } else { ?>
                    <td>
                        <input type="button" class="btn btn-success btn-mini" value="Start Timer" onClick="startTimer(<?php echo $project[0]; ?>)" id="button<?php echo $project[0]; ?>" />
                    </td>
                    <?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:47:23.650

*我建议创建一个函数 toggleTimer，并将按钮的单击绑定到该函数。因此，您只需相应地调整请求的 url，而不是使用按钮的 click 属性。*

/copypasta

# android - 我是否正确执行这些步骤来检查用户的应用内结算订阅？

> ID：12644390
> 
> 赞同：9
> 
> 时间：2012-09-28T17:05:54.140
> 
> 标签：android, google-api, in-app-billing, google-play, subscription

我正在制作一个销售应用内每月订阅的 Android 应用。在我深入研究之前，这个应该如何完成的大纲看起来是否正确？我正在使用 Google Play Android 开发者 API。

第一次安装应用程序时，在 sendBillingRequest() 中发送以下内容：

*   CHECK_BILLING_SUPPORTED。如果没有，请不要费心制作“购买”用户界面。
*   RESTORE_TRANSACTIONS。如果有交易，保存用户的购买令牌。

当用户进行购买时：

*   保存购买令牌。
*   将带有购买令牌的 GET 请求发送到 Google Play Developer API 以验证订阅。
    *   如果订阅有效，请保存订阅到期日期和开始日期。提供对购买数据的访问。
    *   如果订阅无效，请移除购买令牌。不提供对已购买数据的访问并绘制“未购买”版本的 UI。

每次启动应用程序时，请检查您是否保存了购买令牌。

如果购买令牌不存在：

*   不提供对已购买数据的访问并绘制“未购买”版本的 UI。

如果购买令牌存在，请检查到期日期和启动时间：

*   如果（过期）或（启动超过一个月前）
    *   将带有购买令牌的 GET 请求发送到 Google Play Developer API 以验证订阅。
    *   如果购买有效，请更新保存的到期日期和开始日期。提供对购买数据的访问。
    *   如果购买无效，请删除保存的购买令牌以及到期和启动数据。不提供访问和绘制“未购买”版本的 UI。
*   别的
    *   提供对购买数据的访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T17:03:48.133

我是。

我已经通过这种方式成功实现了应用内计费。

# ruby-on-rails-3 - Rails 3 web font (woff) mime 类型

> ID：12644391
> 
> 赞同：7
> 
> 时间：2012-09-28T17:06:12.310
> 
> 标签：ruby-on-rails-3, mime-types, webfonts, woff

我们从静态资源中提供一些网络字体 (.woff)，我想设置正确的 mime 类型 ( `application/x-font-woff`)。我试图这样做，`config/initializers/mime_types.rb`但没有效果：

```
Mime::Type.register "application/x-font-woff", :woff 
```

返回的 mime 类型仍然保留`application/octet-stream`。我什至尝试添加这一行（因为它是 rails 源中我可以找到字符串的唯一其他位置`"woff"`）：

```
Rack::Mime::MIME_TYPES[".woff"] = "application/x-font-woff" 
```

但它仍然没有帮助。如何正确设置网络字体的 mime 类型？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T20:28:14.250

在 Rack 将其 MIME 类型列表修复为正确之前`woff`，临时 hack 确实是您的`config/initializers/mime_types.rb`行：

```
# tell Rack (and Sprockets) about modern font MIME types:
Rack::Mime::MIME_TYPES['.woff'] = 'application/x-font-woff' 
```

但是，要使其真正生效，您必须擦除`tmp/cache`并重新启动服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:34:40.800

虽然我也没有想出一些黑客解决方案，但我几天前研究了这个（在我运行 WEBRick 的 Rails 3.2 开发服务器上，供参考），它是 Sprockets 在响应中设置了错误的 MIME 类型，可能是通过将选择权委托给 Rack，它对要为字体传递什么 MIME 类型有一个愚蠢的概念（从[这个 ravinggenious commit 开始](https://github.com/rack/rack/commit/469518f7d971ba99fc335cf546d605d2364c81aa)）。

[我在 Sprockets 上](https://github.com/sstephenson/sprockets/issues/366)提交了一张（详细的）票证，并[在 Rack](https://github.com/rack/rack/pull/435)上提交了一个拉取请求，希望它能够在上游得到修复，这是最有意义的地方，但还没有看到太多的行动。我大概也应该多关注一下ttf和eof，但是来晚了，当时没有想到。

（对其中任何一个发表评论可能会提高对问题的认识——一个问题不是问题，一堆人是值得解决的问题吗？:-)

# json - 将原始 JSON 加载到 Pig 中

> ID：12644392
> 
> 赞同：5
> 
> 时间：2012-09-28T17:06:13.223
> 
> 标签：json, hadoop, schema, apache-pig

我有一个文件，其中每一行都是一个 JSON 对象（实际上，它是 stackoverflow 的转储）。我想尽可能轻松地将其加载到 Apache Pig 中，但我无法弄清楚如何告诉 Pig 输入格式是什么。这是一个条目的示例，

```
{ 
"_id" : { "$oid" : "506492073401d91fa7fdffbe" }, 
"Body" : "....", 
"ViewCount" : 7351, 
"LastEditorDisplayName" : "Rich B", 
"Title" : ".....", 
"LastEditorUserId" : 140328, 
"LastActivityDate" : { "$date" : 1314819738077 }, 
"LastEditDate" : { "$date" : 1313882544213 }, 
"AnswerCount" : 12, "CommentCount" : 19, 
"AcceptedAnswerId" : 7, 
"Score" : 83, 
"PostTypeId" : "question", 
"OwnerUserId" : 8, 
"Tags" : [ "c#", "winforms" ], 
"CreationDate" : { "$date" : 1217540572667 }, 
"FavoriteCount" : 13, "Id" : 4, 
"ForumName" : "stackoverflow.com" 
} 
```

有没有一种方法可以将每行都是上述之一的文件加载到 Pig 中，而无需手动指定架构？或者也许是一种基于在所有对象中观察到的（可能是嵌套的）键自动生成模式的方法？如果我确实需要手动指定架构，架构字符串会是什么样子？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T22:35:32.370

快速简便的方法：使用 Twitter 的大象鸟项目。里面是一个名为`com.twitter.elephantbird.pig.load.JsonLoader`. 像这样直接使用时，

```
A = LOAD '/path/to/data.json' USING com.twitter.elephantbird.pig.load.JsonLoader() as (json:map[]);
B = FOREACH A GENERATE json#'fieldName' AS field_name; 
```

不会加载嵌套元素。但是，您可以通过将其更改为轻松修复（如果需要），

```
A = LOAD '/path/to/data.json' USING com.twitter.elephantbird.pig.load.JsonLoader('-nestedLoad') 
```

包含大象鸟很容易——只需使用 Maven（或等效的）依赖管理器将项目“elephant-bird”与组织“com.twitter.elephantbird”一起拉出，然后`register`在 pig 中发出常用命令

```
register 'lib/elephantbird.jar'; 
```

# perl - Perl hashref 打印键

> ID：12644402
> 
> 赞同：1
> 
> 时间：2012-09-28T17:07:08.710
> 
> 标签：perl, perl-data-structures

我有以下 hashref ：-

```
my $hashref = {'a'=>(1,2,3,4),
               'b'=>(5,6,7,8)}; 
```

然后我使用以下内容仅打印键（即“a”和“b”）：-

```
foreach (keys %$hashref){
   print "\n".$_."\n";
} 
```

这将打印以下输出：-

```
4

a

7

2

5 
```

尝试使用 Data::Dumper 打印数据结构 hashref 会得到以下输出：-

```
$VAR1 = {
          '4' => 'b',
          'a' => 1,
          '7' => 8,
          '2' => 3,
          '5' => 6
       }; 
```

我的问题是：-

1）如何打印正确的键，即'a'和'b'。2）为什么数据结构看起来像上面输出中的那个而不像：-

```
$VAR1 = {
           'a' => (1,2,3,4),
           'b' => (5,6,7,8)
        }; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T17:16:45.467

您定义的哈希错误。它解释了这一点：

```
'a'=>(1,2,3,4),
'b'=>(5,6,7,8) 
```

作为一个简单的 10 个元素的列表。（请记住，也可以使用简单列表声明散列，`=>`运算符是可选的。）相反，使用方括号将值转换为 arrayref 文字：

```
'a'=>[1,2,3,4],
'b'=>[5,6,7,8] 
```

哪个 Data::Dumper 应该调用：

```
$VAR1 = {
   'a' => [1,2,3,4],
   'b' => [5,6,7,8]
}; 
```

# c# - 适用于 Windows 8 的图形框架？单人游戏？OpenGL 和 Xaml/DirectX 混合？

> ID：12644404
> 
> 赞同：10
> 
> 时间：2012-09-28T17:07:08.447
> 
> 标签：c#, xaml, windows-8, microsoft-metro, winrt-xaml

我想为 Windows 8 开发一个游戏，但由于不支持 Xna，我真的不知道使用 MonoGame 之类的东西是否好——因为我认为，使用 MonoDevelop 没有任何意义使用 OpenGL，而 UI 前端使用 DirectX 运行。但是我的搜索和“apptivate.ms”，他们仍然强迫开发人员使用 MonoDevelop——但是为什么像微软这样的公司甚至会这样做呢？

而且我不喜欢用 DirectX 用 C++ 构建我的游戏，因为在我的情况下，它不是一个大游戏，而且我最喜欢的语言（也是我的工作语言）是 C#..

顺便说一句，用 OpenGL 或 C++ 编写这个游戏对我来说没什么大不了的，因为过去四年我在这两个方面有很多经验，但在这种情况下，我喜欢有一个“快速”和“保存”解决方案，如 C# 和图形框架。

所以......也许有人有这些问题的答案：

*   我应该将 MonoGame 与 Xaml / C# 一起使用，并且不担心 DirectX 和 OpenGL 的混合吗？
*   或者是否还有另一个我可以使用的 DirectX/游戏框架？
*   或者，我完全错了，Xaml 不需要 DirectX？或者我可以强制 MonoGame 使用 DirectX？
*   或者，另一点——像“System.Drawing”这样的东西对于具有一些漂亮阴影效果的太空射击游戏来说是否足够快（我认为，就我而言，我需要阴影和诸如绽放、模糊等之类的东西）？也许，微软添加了一个新的 2D 绘图库？（但我认为它仍然是 gdi+ ）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T22:38:34.220

如果您指的是 Windows 8 Metro（又名 Modern）或 Windows 8 Desktop，那么您的问题是模棱两可的，但我认为它是 Metro 版本。

如果您想在不使用商业解决方案的情况下使用 C# 为 Win8 Metro 开发游戏，您可以使用：

*   [SharpDX](http://sharpdx.org/)是用于 .NET 的低级 DirectX API 或即将推出的 SharpDX.Toolkit（查看网站上的最新消息），它是围绕 Direct3D11 的高级框架（具有类似 XNA 的 API，但具有完整的 Direct3D11 支持）。SharpDX 是唯一一个涵盖整个 DirectX API 的 C# 包装器，该 API 经认证可在 Windows 8 下工作。
*   [MonoGame](https://github.com/mono/MonoGame)使用 SharpDX 作为其 Metro 后端。我没有听说您需要为此使用 MonoDevelop，因为它正在与现有的 XNA 项目一起使用，而 VS 2012 应该可以正常工作。
*   [ANX](http://anxframework.codeplex.com/)也在其 Metro 后端使用 SharpDX。

关于前面的答案，如果假设 Win8 Modern，则不能使用 OpenTK，因为 OpenGL 不是 Microsoft App Store 的认证 API，并且 SlimDX 与 Windows 8 Metro 不兼容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T20:58:13.503

作品中有一个 OpenGL 到 DirectX 包装器，允许在 Windows 8 现代应用程序中使用 OpenGL。它还没有完成，但是如果您想要跨平台兼容性并且愿意只针对已实现的 OpenGL 子集（或者愿意自己实现其余部分并希望回馈），它可能就足够了。

[https://gl2dx.codeplex.com](http://gl2dx.codeplex.com)

更新：截至 2013 年 11 月，gl2dx 似乎已经死了，但是有一个类似的项目[ANGLE](http://code.google.com/p/angleproject/)，它在 DirectX 9 或 11 之上实现了大部分（如果不是全部）OpenGL ES 2.0 规范和 EGL 规范。这是Firefox 和 Google Chrome 在 Windows 上执行 WebGL 的方法。

[http://code.google.com/p/angleproject/](http://code.google.com/p/angleproject/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T17:11:08.590

如果你想使用 OpenGL 和 c#：

[http://www.opentk.com/](http://www.opentk.com/)

对于 DirectX 和 c#：

[http://www.slimdx.org/](http://www.slimdx.org/)

或者

[http://sharpdx.org/](http://sharpdx.org/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T22:27:40.433

GDI+ 超出了 Metro/Modern UI 应用程序的范围，如果您对一些公司感兴趣，他们希望制作像这样的替代 API：[http](http://www.moderncomponents.com/products/DrawingLibrary/) ://www.moderncomponents.com/products/DrawingLibrary/ ，它仍处于早期阶段，但看起来不错，可以帮助您创建一些简单的游戏。

# sql-server - 如何查看员工是否已登记领取福利？

> ID：12644405
> 
> 赞同：0
> 
> 时间：2012-09-28T17:07:13.607
> 
> 标签：sql-server, vb.net

我们有一个将 3 个参数 fname、lname、hiredate 传递到另一个页面的表单，用于检查个人是否是公司的员工。

下面的代码基于这 3 个参数进行验证。

```
Dim sqlstr As String = "SELECT fname,lname,hiredate (SELECT COUNT(*) FROM Comp WHERE comp.emp_ID = e.emp_ID) AS [exists], b.* FROM dbo.EMP e LEFT OUTER JOIN comp b ON e.emp_id=b.emp_id WHERE e.fname Like '%" & Request.QueryString("fname") & "%' And e.lname Like '%" & Request.QueryString("lname") & "%' And e.hiredate = '" & Request.QueryString("hiredate") & "'" 
```

如果检查确认此人确实是员工，则下一个代码会检查他/她是否有资格获得福利：

```
If myDS.Tables(0).Rows.Count > 0 Then

    Dim listOfBenefits = New List(Of String) ( { _
        "CT07B", "CT081", "CT083", "SG09A", "SG10", "SC11A", "SG23", "SG23A", "SG27" _
    })

    If Not listOfBenefits.Contains(txtBenefits.Text) Then
        blMsg.Text = "This employee is not eligible to receive any of the listed benefits yet."
    End If

End If 
```

到目前为止，这非常有效。

现在，我们正在尝试添加另一项检查，以验证特定员工是否已注册任何福利。

如果员工未注册任何福利，则无需检查他或她的资格。

另一方面，如果员工已经注册了一些福利，那么我们会检查他/她是否有资格获得上面列出的任何福利。

到目前为止，我的支票不起作用，因为确定员工是否注册了任何福利的支票被忽略了。

我究竟做错了什么？

这是更新的代码，其中包括检查福利注册。

```
 Dim sqlstr As String = "SELECT fname,lname,hiredate, (SELECT COUNT(*) FROM Comp WHERE comp.emp_ID = e.emp_ID) AS [exists], b.* FROM dbo.EMP e LEFT OUTER JOIN comp b ON e.emp_id=b.emp_id WHERE e.fname Like '%" & Request.QueryString("fname") & "%' And e.lname Like '%" & Request.QueryString("lname") & "%' And e.hiredate = '" & Request.QueryString("hiredate") & "'"

If myDS.Tables(0).Rows.Count > 0 Then

    ' Ok, this individual is an employee, let's check to see if s/he has registered for any benefits.
    benefitSQL = "SELECT fname, lname, (SELECT COUNT(*) FROM benefits WHERE benefits.emp_ID = e.emp_ID) AS [exists], b.* FROM dbo.EMP e LEFT OUTER JOIN benefits b ON e.emp_id=b.emp_id "

    If CInt(exists.Value) > 0 Then
        ' Then employee has some benefits. Now, check whether one of those benefits is on the list below. '

        Dim listOfBenefits = New List(Of String) ( { _
            "CT07B", "CT081", "CT083", "SG09A", "SG10", "SC11A", "SG23", "SG23A", "SG27" _
        } )

        If Not listOfBenefits.Contains(txtBenefits.Text) Then
            lblMsg.Text = "This employee is not eligible to receive any of the listed benefits yet."
        End If
    Else

        lblMsg.Text = "This employee has not registered for any benefits yet."   
    End If
 End If 
```

SQL，格式化：

```
SELECT
    fname,
    lname,
    hiredate,
    (
        SELECT
            COUNT(*)
        FROM
            Comp
        WHERE
            comp.emp_ID = e.emp_ID
    ) AS [exists],
    b.*
FROM
    dbo.EMP e
    LEFT OUTER JOIN comp b ON e.emp_id = b.emp_id
WHERE
    e.fname LIKE %@fname And e.lname LIKE %@lname%
    AND
    e.hiredate = @hiredate 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T21:25:15.960

您正在选择数据，但您希望受数据约束：

```
SELECT
    e.fname,
    e.lname,
    e.hiredate
FROM
    dbo.EMP e
WHERE
    e.fname LIKE %@fname And e.lname LIKE %@lname%
    AND
    e.hiredate = @hiredate
    AND
    EXISTS (
        SELECT
            1
        FROM
            Comp
        WHERE
            comp.emp_ID = e.emp_ID
    ) 
```

您还可以内部连接表：

```
SELECT
    e.fname,
    e.lname,
    e.hiredate,
    c.*
FROM
    dbo.EMP e
    INNER JOIN Comp c ON e.emp_ID = c.emp_ID
WHERE
    e.fname LIKE %@fname And e.lname LIKE %@lname%
    AND
    e.hiredate = @hiredate 
```

# php - php循环两个数组并比较数据

> ID：12644408
> 
> 赞同：0
> 
> 时间：2012-09-28T17:07:27.803
> 
> 标签：php, arrays, multidimensional-array

我尝试比较两个数组。第一个数组来自我的 csv 文件，第二个是 $a - 数组。我尝试获取 csv 数据并从 $a 数组数据中再添加一列，如果没有与 csv 第 2 列（ $line [1](http://www.sendspace.com/file/3gvzmz) ）中相同的值，然后显示“空”

现在它只显示数组中的第一个值-> a (102019) 其他值显示“空”；

看到一切都很好，但数组 a 不只循环一次，我错在哪里？请给我看……我今天花了一整天，但什么也没找到。

```
<?php
    ////////////////////////////////////////////////////////////

    $file_path="".$_SERVER["DOCUMENT_ROOT"]."/upload/111.csv";

    ////////////////////////////////////////////////////////////

    $a = array('102019','102401','102403','102027','102115','102402','102027');

    function get_array_from_csv($file,$delimiter) {
      if (($handle = fopen($file, "r")) !== FALSE) {
        $i = 0;
        while (($lineArray = fgetcsv($handle, 4000, $delimiter)) !== FALSE) {
          for ($j=0; $j<count($lineArray); $j++) {
            $data2DArray[$i][$j] = $lineArray[$j];
          }
          $i++;
        }
        fclose($handle);
      }
      return $data2DArray;
    }

    function search($a, $line) {
        foreach($a as $mas_value) {
            if (substr($line[1], 2) == $mas_value) {
              $file = $mas_value;
            } else {
              $file = 'empty';
            }
            return $file;
        }
    }

    $data = get_array_from_csv($file_path, ';');

    echo '<table>';
    foreach ($data as $line) {

      $file = search($a, $line);

      echo '<tr>
        <td>'.$line[0].'</td>
        <td>'.$line[1].'</td>
        <td>'.$line[2].'</td>
        <td>'.$line[3].'</td>
        <td>'.$line[4].'</td>
        <td>'.$line[5].'</td>
        <td>'.$file.'</td>
      </tr>';
    }    
    echo '</table>';

    ?> 
```

这是我的输出数据：

```
ALFA ROMEO  BP102401    156 LIM 4D  1997-   20,00       empty
    BP102402    156 SPORT WAGON     2000-   20,00       empty
    BP102403    156 SPORT WAGON ar ugunsdzeЕЎ.  2000-   20,00       empty
    BP102404    159 -SW     2006-   22,00       empty
AUDI    BP102023    A 1     2010-   22,00       empty
    BP102023    A 1 Sportback   2010-   22,00       empty
    BP102001    A 2     2000-2005   15,00       empty
    BP102010    A 2 German  2000-2005   15,00       empty
    BP102002    A 3 HB  1996-2003   20,00       empty
    BP102013    A 3 HB  2003-   20,00       empty
    BP102004    A 4 AVANT/Combi     1994-2001   20,00       empty
    BP102012    A 4 AVANT/Combi     2001-2007   20,00       empty
    BP102019    A 4 AVANT /Combi    2008-   20,00       102019
    BP102005    A 4 LIM/SED     2000-2008   20,00       empty
    BP102003    A 4 LIM/SED     1994-2001   20,00       empty
    BP102018    A 4 LIM/SED     2008-   22,00       empty
    BP102018    A 5     2007-   22,00       empty
    BP102022    A 5 SPORTBACK   2009-   25,00       empty
    BP102007    A 6 AVANT/Combi     1997-2005   20,00       empty
    BP102016    A 6 AVANT/Combi     2005-2011   25,00       empty
    BP102026    A 6 AVANT/Combi     2011-   25,00       empty
    BP102007    A 6 AVANT QUATTRO   1997-2005   20,00       empty
    BP102006    A 6 LIM/SED     1997-2004   22,00       empty
    BP102014    A 6 LIM/SED     2004-2011   25,00       empty
    BP102025    A 6 LIM/SED     2011-   25,00       empty
    BP102011    A 6 LIM German  1997-2004   22,00       empty
    BP102007    A 6 ALLOROAD QUATTRO    2000-   20,00       empty
    BP102024    A 7 SPORTBACK   2010-   25,00       empty
    BP102027    Q 3 with a tool set located in the trunk    2011-   22,00       empty
    BP102028    Q 3 with an irregular size spare tire (space saver, smaller than standard tires)    2011-   22,00       empty 
```

[数组中的所有值 - 与 $line 1](http://www.sendspace.com/file/3gvzmz)相比，必须在 csv 行中找到 a

[完整的 csv 在这里上传](http://www.sendspace.com/file/3gvzmz)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T17:26:43.313

尝试如下更改您的搜索功能

```
function search($a, $line) {
        $file = 'empty';
        foreach($a as $mas_value) {
            if (substr($line[1], 2) == $mas_value) {
              $file = $mas_value;
              break;
            }
        }
        return $file;
    } 
```

# sql-server-2008 - @@ERROR - 如何在 TSQL 中处理/评估？

> ID：12644414
> 
> 赞同：1
> 
> 时间：2012-09-28T17:07:38.247
> 
> 标签：sql-server-2008, tsql

此更新将失败，因为 ID 是身份

但我收到直接的错误消息。
我没有收到任何 PRINT 语句。

如何使用@@ERROR？
使用 SSMS。
你会称之为脚本还是查询？

```
PRINT   'start';
DECLARE @ErrorVal INT;
UPDATE IndenText SET ID = 7;
SELECT @ErrorVal = @@ERROR;
PRINT @ErrorVal;
IF @ErrorVal <> 0
BEGIN
    PRINT N'A error caught.';
END
PRINT 'done'; 
```

这对我也不起作用

```
PRINT   'start';
DECLARE @ErrorVal INT;
BEGIN TRY
    UPDATE IndenText SET ID = 7;
    SELECT @ErrorVal = @@ERROR;
    PRINT @ErrorVal;
END TRY
BEGIN CATCH
    IF @@ERROR <> 0
    BEGIN
        PRINT N'A error caught.' + @@ERROR;
    END
END CATCH
PRINT 'done'; 
```

我收到
消息 8102，级别 16，状态 1，第 4 行无法更新标识列“ID”。

正如马丁所说，这是一个编译错误。
创建了一个不会成为编译错误的约束。
并得到@@ERROR 来处理。

```
PRINT   'start';
DECLARE @ErrorVal INT;
DECLARE @newVal INT;
select  @newVal = -1;
BEGIN TRY
    update Twaste1 set ID = @newVal ;
    PRINT 'End Try';
END TRY
BEGIN CATCH
    Select @ErrorVal = @@ERROR;
    PRINT 'Begin Catch';
    IF @ErrorVal <> 0
    BEGIN
        PRINT CAST(@ErrorVal as varchar(30));
        PRINT N'A error caught.';
    END
END CATCH
PRINT 'done' 
```

;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:22:23.583

例如对于更新使用：

```
UPDATE HumanResources.EmployeePayHistory
SET PayFrequency = 4
WHERE BusinessEntityID = 1; 
```

IF @@ERROR = 547 PRINT N'发生检查约束冲突。'; 去

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:09:46.267

我建议[`TRY... CATCH`](http://msdn.microsoft.com/en-us/library/ms175976%28v=sql.105%29.aspx)改用。这将允许您捕获并检查引发的错误。

更新：

我相信 Martin 已经在他对原始问题的评论中解释了为什么这不起作用，但我将添加对 MSDN`TRY... CATCH`文章的引用：

> 以下类型的错误发生在与 TRY...CATCH 构造相同的执行级别时，不会由 CATCH 块处理：
> 
> *   编译错误，例如语法错误，阻止批处理运行。
> *   在语句级重新编译期间发生的错误，例如由于延迟名称解析而在编译后发生的对象名称解析错误。

# c# - 如何接收 UDP 并发请求？

> ID：12644417
> 
> 赞同：1
> 
> 时间：2012-09-28T17:07:44.730
> 
> 标签：c#, java, c, sockets, udp

我正在构建一个 UDP 服务器，它在单独的线程中处理每个传入请求。问题是，一个 UDP 客户端可能会使用多个线程同时发送多个请求。客户端上的每个线程都将等待来自服务器的响应。由于 UDP 是无连接的，因此客户端线程可能会收到不匹配的数据报。在这种情况下，是否有任何内置机制或模式可以帮助客户端线程获得匹配的响应？（例如，将每个请求从服务器发送到特定的 udp 端口​​！！？）我不想使用队列，因为它同时丢失了属性。如果没有，我想我们可以构建一个队列，将响应分派给适当的客户端线程。但是，如果我需要在同一台客户端机器上运行不同 JVM 中的多个客户端，并且每个客户端都会向同一台服务器发出请求，该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:18:47.110

为每个 udp 客户端使用单独的套接字。这样，您就有不同的 ip 和端口用于发送，并且将在相同的情况下接收响应，即发送请求的客户端只会收到它的响应（我认为这就是您的意思匹配）除非您共享，否则这应该自动完成线程之间的相同套接字并使用它向服务器发送消息，这似乎是个坏主意。

在将消息发送到服务器之前，您可以在客户端的源（发送方端口）中设置任何端口。服务器可以提取您的源端口并响应相同的端口

例如

```
Client 1 source port:10401 -> server:listening port:2000\.  Server responds to port 10401\. 

Client 2 source port:10402 -> server: listening port: 2000\. Server responds to port 10402. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:41:36.367

如果要进行并发连接，请进行多个连接。在客户端生成一个新的 UDP 连接，服务器将在它的末端打开一个新连接。在客户端上的 connection1 上发送的任何内容都会在服务器上的 connection1 上进行，在 connection2 上发送的任何内容都会在连接 2 上接收。

# git - 自动 git push 实用程序

> ID：12644418
> 
> 赞同：0
> 
> 时间：2012-09-28T17:07:47.353
> 
> 标签：git

我白天在台式机上处理许多 git repos，有时我会带着笔记本去其他地方工作，但我经常看到我无法继续，因为我工作的分支没有被推送到远程 repo，所以我无法在笔记本上获取最新版本。

有些人想通过在每次提交后用钩子推送来解决这个问题，但我不能这样做，它太慢了。

我想要一个实用程序，它可以进入我的每个仓库并推送所有分支。我可以在一天结束时运行该脚本，然后我确信我可以继续在笔记本上工作。

或者如果有人有不同的想法，欢迎您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:14:27.120

我使用 Dropbox 和 Google Drive 来托管我可能需要从不同计算机访问的本地存储库。这可以跨机器保留工作目录的准确状态。而且您不必担心在您的脚本无法自动推送的存储库中进行未提交的更改。

# selenium - 带有 Python 绑定的 Selenium 2 将无法正确安装

> ID：12644419
> 
> 赞同：0
> 
> 时间：2012-09-28T17:07:51.437
> 
> 标签：selenium, python-2.7

我已经在多台机器上安装了带有 Python 的 Selenium 2，但在一台机器上（Windows 7 64 位）我无法安装它。我认为我安装了 Pip 左右。它存在于我的脚本文件夹中。我按照说明制作了环境变量路径；C:\Python27\Scripts。我尝试安装 pip 设置工具，但它说在注册表中找不到 Python。我相信我安装了 Python（我知道我安装了 Pythion 只是不确定它是 32 还是 64 并且不确定如何检查。）对于 64 位，这是一个错误的举动。当我通过 pip install selenium 安装 Selenium 时，我得到一个 Importerror no entry load package？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:56:40.323

实际上我遇到了同样的问题尝试从该链接下载setuptools（setuptools-0.6c11.win32-py2.7.exe） [http://htpcbuild.com/htpc-software/python-setup-tools/python-setup- tools-install-guide/](http://htpcbuild.com/htpc-software/python-setup-tools/python-setup-tools-install-guide/) 并放置变量路径 ;c:\python27 。它对我有用

# r - Sublime Text 2 中的自动完成 R

> ID：12644420
> 
> 赞同：8
> 
> 时间：2012-09-28T17:07:56.097
> 
> 标签：r, autocomplete, sublimetext2, sublimetext

I am trying to find a package that would support Autocomplete of the R Syntax in Sublime Text 2 similar to the way Sublime supports for Python or Ruby. That is when start typing 'vec..." it prompts with "vector" in the pop up.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-29T02:09:11.627

是的，它存在。

将[R.sublime-completions](http://dl.dropbox.com/u/2223411/R.sublime-completions)拖到您的`~/Library/Application Support/Sublime Text 2/Packages/R`（或 Windows 中的等效文件夹）中。访问该文件夹的另一种方法是单击 Sublime Text > Preferences > Browse Packages...

另外，如果你打算使用 Sublime Text 2 for R，这里有一个[rtools](https://github.com/karthikram/rtools)的（无耻的）插件，它允许你将选择从 ST2 发送到 R。你可以通过 Package Control 安装。

# android - 蜂窝上的android动作模式关闭图标/按钮

> ID：12644429
> 
> 赞同：1
> 
> 时间：2012-09-28T17:08:57.227
> 
> 标签：android, android-actionbar

我正在尝试更改操作模式关闭按钮的图标。这在 JB 中运行良好，

```
 <item name="android:actionModeCloseDrawable">@drawable/ic_cab_close</item> 
```

但在 Honeycomb 中，它没有任何作用。在那里，我看到了不是我指定的绿色样式按钮覆盖和图标。

![在此处输入图像描述](../Images/aa9cd3d067557ad14e5cdc478af6126b.png)

作为测试，我也试过这个，

```
 <item name="android:actionModeCloseButtonStyle">@style/ActionModeCloseButton</item>
    ...
    <style name="ActionModeCloseButton" parent="android:style/Widget.Holo.ActionButton.CloseMode">
         <item name="android:background">@android:color/transparent</item>
    </style> 
```

这对 Honeycomb 没有影响，但在 JB 上可以按预期工作。

有任何想法吗？

# c# - Address of Reference Object Works in Immediate Window But Not in Compiled Code

> ID：12644430
> 
> 赞同：2
> 
> 时间：2012-09-28T17:09:03.747
> 
> 标签：c#, .net, clr

So I've seen this question a few times about getting the physical address of a reference object in C# and the general consensus seems to be that this isn't possible since you can't call `GCHandle.Alloc` with `GCHandleType.Pinned` which will allow you to get the address of the pinned object.

What I find strange though is that in the Visual Studio debugger I can drag the object from the locals window to the Memory debug window and see the address and memory for a reference object. I can even type in the immediate window `&obj` and get the actual address of the object (this address correctly corresponds to the one shown in the Memory window).

However why is it I can't make the same call in my compiled code...ie:

```
object someObject = new Object();
&obj; // Compiler Error: Cannot take the address of, get the size of, or declare a pointer to a managed type ('object') 
```

How is the Immediate\Memory Window allowed to get the address of managed types and even display the layout of memory but C# can't do any of this? Is there any way to get this actual address of a reference object in C#?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T17:29:31.707

The debugger has a great advantage over your own code. It can look at the process state while it is frozen with *no* code running. Getting the address of an object is thus not a problem, the garbage collector is not going to run to invalidate it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:26:51.967

The Carbage Collector handles the objects lifetime. It is also divided roughly into 3 'pieces' in memory, called gen0, gen1, gen2 (Generations).

In gen0 the fast living objects reside, where the allocated memory is small. The garbage collection is run frequently because there are many short lived objects there. If an object suvives gen0 it is moved to next gen.

When an object is garbaged collected all the other objects are re-arranged in memory, to keep the free memory space available.

But in gen2, where the biggest and long lived objects live, the memory is rarely re-arranged because it costs too much to move objects in gen2.

All this memory references and garbage collection is given to you for 'free' in a managed environment like C#.

Furthermore sometimes, optimizations are done, such as: "string interning".

# c# - 动态禁用页面

> ID：12644432
> 
> 赞同：0
> 
> 时间：2012-09-28T17:09:18.210
> 
> 标签：c#, asp.net

我有一个 aspx 页面，我想在 IF 条件下动态禁用该页面。在这里，**“禁用”一词是指当弹出窗口或 Radwindow 打开并且父页面被禁用并且用户在弹出窗口关闭之前无法对父页面执行任何操作时的完全相同的条件。**

对于 Ajax 或 Rad 控件，我可以将控件的 'Modal' 属性设置为 true 以禁用父页面。但是我需要的条件该怎么做。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:17:24.513

您可以通过使用 Javascript 或 JQuery 添加覆盖页面的 div 来实现*禁用*效果。

```
var documentHeight = $(document).height();
$("body").append("<div style='z-index: 100; background: lightgray; opacity: 0.5; width: 100%; height: " + documentHeight + "px; position: absolute; left: 0; top: 0;'></div>"); 
```

需要注意的是，这不是“安全的”，如果那是您所追求的（用户可以使用 Firebug 或类似工具“破解”禁用窗格）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:20:22.830

您可以使用 ModalPopupExtender，看看我的示例。我在我的所有网站中都使用了这个概念，并且适用于所有类型的浏览器。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="ConfirmDialogUserControl.ascx.cs"
    Inherits="GP.Solutions.UserControls.ConfirmDialogUserControl" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
<script type="text/javascript">

    var _source;
    var _popup;

    function ShowConfirmDialog(source, message) {
        this._source = source;
        this._popup = $find('mdlPopup');
        var displayDiv = document.getElementById('<%= ConfirmMessageDiv.ClientID %>');
        displayDiv.innerText = message;
        displayDiv.textContent = message;
        this._popup.show();
    }

    function ConfirmDialogOk() {
        this._popup.hide();

        __doPostBack(this._source.name, '');
    }

    function ConfirmDialogCancel() {
        this._popup.hide();
        this._source = null;
        this._popup = null;
    }

</script>

<asp:Panel ID="pnlModal" runat="server" CssClass="modalPopup" style="display:none;">
    <div class="modalHeader">
        <div id="DivImage" runat="server"> </div> 
        <asp:Label ID="TitleLabel" runat="server" Text="" CssClass="modalTitle"></asp:Label>
    </div>
    <asp:Panel ID="pnlControls" runat="server" CssClass="modalContent">
        <div id="ConfirmMessageDiv" runat="server"></div>
    </asp:Panel>
    <div class="modalControlsContainer">
        <asp:Button ID="btnConfirmDialogOk" runat="server" CssClass="modalButton" Text=""  />
        <asp:Button ID="btnConfirmDialogCancel" runat="server" CssClass="modalButton" Text="" />
    </div>
</asp:Panel>
<asp:ModalPopupExtender ID="ModalPopupExtender1" behaviorid="mdlPopup" runat="server" TargetControlID="pnlModal"
    PopupControlID="pnlModal" OkControlID="btnConfirmDialogOk" OnOkScript="ConfirmDialogOk();" CancelControlID="btnConfirmDialogCancel"
    OnCancelScript="ConfirmDialogCancel();" DynamicServicePath="" Enabled="True" BackgroundCssClass="modalBackground" DropShadow="true">
</asp:ModalPopupExtender> 
```

这是在这种情况下使用的 css 代码：

```
.modalBackground
{
  background-color:Black;
  filter:alpha(opacity=60);
  opacity:0.6;
}

.modalPopup
{
    background-color:White;
    border: 1px solid green;
    width:280px;
    padding: 10px 10px 10px 10px;
}

.modalPopupFullWidth
{
    background-color:White;
    border: 1px solid green;
    padding: 10px 10px 10px 10px;
}

.modalHeader
{
    width:auto;
    border: 1px solid silver;
    height:25px;
    background-color:#F2F2F2;
}

.modalTitle
{
    color:Black; 
    font-size: 11px;
    font-weight:bold;
    position:relative;
    left:30px;  
    top:-20px;
}

.modalImageInformation
{
    background-image: url('information.png'); 
    background-repeat: no-repeat; 
    width:26px;
    height:26px;
    border: 0;
}

.modalImageWarning
{
    background-image: url('warning.png'); 
    background-repeat: no-repeat; 
    width:26px;
    height:26px;
    border: 0;
}

.modalImageError
{
    background-image: url('error.png'); 
    background-repeat: no-repeat;
    width:26px;
    height:26px;
    border: 0;
}

.modalImageQuestion
{
    background-image: url('question.png'); 
    background-repeat: no-repeat; 
    width:26px;
    height:26px;
}

.modalImageSearch
{
    background-image: url('search.png'); 
    background-repeat: no-repeat; 
    width:26px;
    height:26px;
}

.modalContent
{
    padding-top:10px;
    padding-bottom:0px;
}

.modalControlsContainer
{
    margin-left:auto;
    margin-right:auto;
    text-align:center;
    padding-top:5px;
}

.modalButton
{
    background-image: url('button-113x28.png');
    background-color:transparent;
    width:113px;
    height:28px;
    border: 0px none transparent;
    color: White;
    font-size:11px;
    cursor:pointer;
    margin-top:10px;
    margin-left:auto;
    margin-right:auto;
    text-align:center;
}

.hidden { display: none; }

.unhidden { display: block; } 
```

# xpages - 如何在主题中设置应用程序布局属性？

> ID：12644434
> 
> 赞同：0
> 
> 时间：2012-09-28T17:09:24.183
> 
> 标签：xpages

我了解如何使用主题设置 style 和 styleClass 等属性，但如何在主题中设置 productLogo 等属性？

我试过了

```
<control>
    <name>ApplicationLayout</name>
    <property>
        <name>configuration.oneuiApplication.productLogo</name>
        <value>"/LogoSmall.JPG"</value>
    </property>
</control> 
```

和

```
<control>
    <name>ApplicationLayout</name>
    <property>
        <name>configuration.productLogo</name>
        <value>"/LogoSmall.JPG"</value>
    </property>
</control>

<control>
    <name>ApplicationLayout</name>
    <property>
        <name>productLogo</name>
        <value>"/LogoSmall.JPG"</value>
    </property>
</control> 
```

但似乎没有一个工作。

这可以做到吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T20:17:57.263

首先你需要确定组件的themeID。Tim Tripcony 写了一篇关于如何做到这一点的博客，请参阅[http://xmage.gbs.com/blog.nsf/d6plinks/TTRY-8RXAQ6](http://xmage.gbs.com/blog.nsf/d6plinks/TTRY-8RXAQ6) 当您知道主题 ID 时，您可以在自己的主题中使用

# c# - C#继承与虚函数混淆

> ID：12644436
> 
> 赞同：6
> 
> 时间：2012-09-28T17:09:26.213
> 
> 标签：c#, inheritance, virtual

今天我想出了一个有趣的问题。我注意到以下代码：

```
class A
{
    public A()
    {
        Print();
    }
    public virtual void Print()
    {
        Console.WriteLine("Print in A");
    }
}

class B : A
{
    public B()
    {
        Print();
    }

    public override void Print()
    {
        Console.WriteLine("Print in B");
    }
}

class Program
{
    static void Main(string[] args)
    {
        A a = new B();
    }
} 
```

印刷

```
Print in B
Print in B 
```

我想知道为什么它会打印两次“在 B 中打印”。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T17:12:23.590

> 我想知道为什么它会打印两次“在 B 中打印”。

您在同一个对象上调用了两次虚拟方法。该对象是`B`even during`A`的构造函数的一个实例，因此将调用被覆盖的方法。（我相信在 C++ 中，就多态性而言，对象仅在基类构造函数执行*后“成为”子类的实例。）*

请注意，这意味着从构造函数调用的重写方法将*在派生类的构造函数体有机会执行之前执行*。这是危险的。正是出于这个原因，您几乎不应该从构造函数中调用抽象或虚拟方法。

编辑：请注意，当您不提供另一个构造函数调用“链”到 using`: this(...)`或`: base(...)`在构造函数声明中时，它等效于 using `: base()`。So`B`的构造函数等价于：

```
public B() : base()
{
    Print();
} 
```

有关构造函数链接的更多信息，请参阅[我关于该主题的文章](http://www.yoda.arachsys.com/csharp/constructors.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T17:12:16.597

与 C++ 中构造函数中的虚函数调用仅限于类本身的定义不同，覆盖在 C# 的构造函数中得到完全尊重。这种做法不受欢迎，并且有充分的理由（[链接](https://stackoverflow.com/q/119506/335858)），但仍然允许：`A`的构造函数调用由 提供的覆盖`B`，产生您看到的输出。这是被覆盖的虚函数的正常行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T17:12:25.943

因为B覆盖的`Print`方法。你的变量`a`是 type`B`的，B 的`Print`方法是这样的：

```
public override void Print()
{
    Console.WriteLine("Print in B");
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-28T17:19:59.273

如果您不调用基类构造函数，则将隐式调用基类的默认构造函数 ( [MSDN](http://msdn.microsoft.com/en-us/library/ms173149.aspx) )。

如果您以这种方式定义 A 类构造函数，您将不会获得双重输出：

```
class A
{
    public A()
    {
        // does nothing
    }

    public A(object a)
    {
        Print();
    }
} 
```

它两次打印“Print in B”的原因是 Print() 在类 B 中被覆盖，因此 B.Print() 是两个构造函数都调用的。

我认为您可以强制在 A 构造函数中调用 A.Print() ，如下所示：

```
class A
{
    public A()
    {
        ((A)this).Print();
    }
} 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T17:12:29.390

因为你有一个 B 的实例，它覆盖了 Print，所以这个被覆盖的方法被调用了。此外，A 的 ctor 将运行，然后是 B 的，这就是它被打印两次的原因。

# php - PHP 加密和 Windows 解密

> ID：12644437
> 
> 赞同：14
> 
> 时间：2012-09-28T17:09:30.347
> 
> 标签：php, c++, encryption, aes

我卡住了。似乎PHP完成的AES加密无法在Windows中解密。

PHP代码：

```
$encrypted = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_128,"12345678", "test", MCRYPT_MODE_CBC)); 
```

Windows 代码：“s”具有从 base64 转换回来后由上述响应创建的字符串。

```
bool Decrypt(char* s,char* key,char* dest)
{
// Create the crypto provider context.
HCRYPTPROV hProvider = NULL;
if (!CryptAcquireContext(&hProvider,
    NULL,  // pszContainer = no named container
    MS_ENH_RSA_AES_PROV,  // pszProvider = default provider
    PROV_RSA_AES,
    0)) 
        return false;

// Construct the blob necessary for the key generation.
aes128keyBlob aes_blob128;

aes_blob128.header.bType = PLAINTEXTKEYBLOB;
aes_blob128.header.bVersion = CUR_BLOB_VERSION;
aes_blob128.header.reserved = 0;
aes_blob128.header.aiKeyAlg = CALG_AES_128;
aes_blob128.keySize = 16;
memcpy(aes_blob128.bytes, key, 16);

HCRYPTKEY hKey = NULL;
if (!CryptImportKey(hProvider,
    (BYTE*)(&aes_blob128),
    sizeof(aes_blob128),
    NULL,  // 
    0,     // 
    &hKey)) {

        ...
    }

// Set Mode
DWORD dwMode = CRYPT_MODE_CBC;
CryptSetKeyParam( hKey, KP_MODE, (BYTE*)&dwMode, 0 );

DWORD length = 16;
BOOL X = CryptDecrypt(hKey,
    NULL,  // hHash = no hash
    TRUE,  // Final
    0,
    (BYTE*)s,
    &length);
//int le = GetLastError();
memcpy(dest,s,16);

CryptDestroyKey(hKey);
CryptReleaseContext(hProvider, 0);
} 
```

有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T18:56:52.073

您提供的信息不足以肯定地说，但我认为您的问题是密钥长度。

在 PHP 代码中，您将**“12345678”**作为键传递。AES128 的密钥长度为 128 位或 16 字节。**如mcrypt_encrypt**文档中所述，PHP 用零字节填充剩余部分。

在 C++ 代码中，您只将指向密钥缓冲区的指针传递给 Decrypt 函数。但随后您将其中的 16 个字节复制到密钥 BLOB：

```
aes_blob128.keySize = 16;
memcpy(aes_blob128.bytes, key, 16); 
```

然后，如果你调用你的函数，如：

```
char dest[16];
bool result = Decrypt(string_from_php,"12345678",dest); 
```

**而不是在“12345678”**常量之后碰巧驻留在内存中的 8 个字节将被复制到密钥 blob 并作为实际密钥传递给**CryptImportKey 。**因此，C 和 PHP 代码中的密钥实际上是不同的，并且由于填充错误，解密将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T07:50:55.987

PHP MCRYPT 函数与 windows 解密函数有点不同。

`\0`因为 mcrypt 函数获取任意长度的密钥，并通过在密钥字符串的末尾添加将其转换为算法所需的长度。

请注意创建一个具有指定长度的密钥，以供双方算法加密。

在密钥上使用 md5，然后将其转换为算法所需的长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T13:04:55.197

**见以下网址**

[使用 AES / Rijndael 在 PHP 中加密，在 C# (WP7 / Silverlight) 中解密](https://stackoverflow.com/questions/11637905/encrypt-in-php-decrypt-in-c-sharp-wp7-silverlight-using-aes-rijndael)

[http://pumka.net/2009/12/16/rsa-encryption-cplusplus-delphi-cryptoapi-php-openssl-2/](http://pumka.net/2009/12/16/rsa-encryption-cplusplus-delphi-cryptoapi-php-openssl-2/)

[http://www.developer.nokia.com/Community/Wiki/Encrypt-Decrypt_contacts_database_entries_using_Symbian_C%2B%2B](http://www.developer.nokia.com/Community/Wiki/Encrypt-Decrypt_contacts_database_entries_using_Symbian_C%2B%2B)

**阅读**

我从 PHP 和 C# 中删除了 MD5 废话，它们现在可以正常工作。

以防万一您在这里寻找相同的答案，这里有一个示例代码。不要忘记制作自己的密钥和iv（虽然下面的那些可以工作，但不建议使用！）

**PHP：**

```
function encrypt128($message) {

    $vector = "0000000000000000";
    $key = "00000000000000000000000000000000";

    $block = mcrypt_get_block_size('rijndael_128', 'cbc');
    $pad = $block - (strlen($message) % $block);
    $message .= str_repeat(chr($pad), $pad);

    $cipher = mcrypt_module_open(MCRYPT_RIJNDAEL_128, '', 'cbc', '');
    mcrypt_generic_init($cipher, $key, $vector);
    $result = mcrypt_generic($cipher, $message);
    mcrypt_generic_deinit($cipher);

    return base64_encode($result);
} 
```

**C++**

**使用 Symbian C++ 加密-解密联系人数据库条目**

[http://www.developer.nokia.com/Community/Wiki/Encrypt-Decrypt_contacts_database_entries_using_Symbian_C%2B%2B](http://www.developer.nokia.com/Community/Wiki/Encrypt-Decrypt_contacts_database_entries_using_Symbian_C%2B%2B)

**需要的标头：**

```
#include <cntdb.h> // CContactDatabse, 
#include <cntitem.h> //CContactItem,CContactItemFieldSet 
```

[http://www.developer.nokia.com/Community/Wiki/Encrypt-Decrypt_contacts_database_entries_using_Symbian_C%2B%2B](http://www.developer.nokia.com/Community/Wiki/Encrypt-Decrypt_contacts_database_entries_using_Symbian_C%2B%2B)

**加密联系人字段**

```
void CEncryptContactContainer::EncryptAll()
{
    CContactDatabase *contactDB = CContactDatabase::OpenL();
    CleanupStack::PushL(contactDB);

    TContactIter iter(*contactDB);
    TContactItemId aContactId;

//Developer can take Heap based descriptor for large/unknown size of contact items.
    TBuf16<70> aValue; 

    const CContactIdArray* contactArray = contactDB->SortedItemsL();

    TInt cnt=contactArray->Count();

    for(TInt i=0;i<cnt;i++)
    {
        CContactItem* contactItem=NULL;

        contactItem= contactDB->OpenContactL((*contactArray)[i]);
        CleanupStack::PushL(contactItem);

        CContactItemFieldSet& fieldSet= contactItem->CardFields();
        TInt fieldCount=fieldSet.Count(); // This will give number of contact fields.

        for(TInt index=0; index < fieldCount; index++)
        {
            CContactItemField& field = fieldSet[index];
            const CContentType& type = field.ContentType();
            if(!(type.ContainsFieldType(KUidContactFieldBirthday)))
            {
                TPtrC name = contactItem->CardFields()[index].TextStorage()->Text();
                aValue.Copy(name);
                Encrypt(aValue); // Call real encyption here
                contactItem->CardFields()[index].TextStorage()->SetTextL(aValue);
            }
        } //Inner for loop ends here
        contactDB->CommitContactL(*contactItem);
        CleanupStack::PopAndDestroy(contactItem);
    } //Outer for loop ends here
    CleanupStack::PopAndDestroy(contactDB);
}

void CEncryptContactContainer:: Encrypt (TDes& aValue)
{
    for(TInt iCount=0; iCount< aValue.Length();iCount++)
    {
        aValue[iCount]+=3;
    }
} 
```

**解密联系人字段**

```
void CEncryptContactContainer::DecryptAll()
{
    CContactDatabase *contactDB = CContactDatabase::OpenL();
    CleanupStack::PushL(contactDB);

    TContactIter iter(*contactDB);
    TContactItemId aContactId;
    TBuf16<70> aValue;

    const CContactIdArray* contactArray = contactDB->SortedItemsL();

    TInt cnt=contactArray->Count();

    for(TInt i=0;i<cnt;i++)
    {
        CContactItem* contactItem=NULL;

        contactItem= contactDB->OpenContactL((*contactArray)[i]);
        CleanupStack::PushL(contactItem);

        CContactItemFieldSet& fieldSet= contactItem->CardFields();
        TInt fieldCount=fieldSet.Count(); // This will give number of contact fields.

        for(TInt index=0; index < fieldCount; index++)
        {
            CContactItemField& field = fieldSet[index];
            const CContentType& type = field.ContentType();
            if(!(type.ContainsFieldType(KUidContactFieldBirthday)))
            {
                TPtrC name = contactItem->CardFields()[index].TextStorage()->Text();
                aValue.Copy(name);
                Decrypt(aValue);
                contactItem->CardFields()[index].TextStorage()->SetTextL(aValue);
            }
        } //Inner for loop ends here
        contactDB->CommitContactL(*contactItem);
        CleanupStack::PopAndDestroy(contactItem);
    } //Outer for loop ends here
    CleanupStack::PopAndDestroy(contactDB);
}

void CEncryptContactContainer:: Decrypt (TDes& aValue)
{
    for(TInt iCount=0; iCount< aValue.Length();iCount++)
    {
        aValue[iCount]-=3;
    }
} 
```

**C＃：**

```
byte[] cripted = EncryptStringToBytes("Test", System.Text.Encoding.UTF8.GetBytes("00000000000000000000000000000000"), System.Text.Encoding.UTF8.GetBytes("0000000000000000")); 
```

# python - 未绑定的局部变量 Python 3.2

> ID：12644440
> 
> 赞同：0
> 
> 时间：2012-09-28T17:09:45.947
> 
> 标签：python, try-catch

这个错误是随机弹出的，我很确定这是因为 infoGotten 变量在 return 语句调用它之前没有初始化。让我感到困惑的部分是它是如何到达代码的那部分以首先产生该错误的。希望有人可以向我解释为什么会这样，因为我还没有弄清楚。我猜这是因为 try/except 语句，但我做了一些搜索并检查了手册中的 7.4 并且（无论如何对我来说）似乎我做的事情不正确。

```
breakLoop = 0
def get_item_info(linkParameters):
    global breakLoop
    nheaders = {'User-Agent' : 'Firefox/15.0.1'}
    purl = 'http://example.com/something.php'
    pd = linkParameters
    nreq = urllib.request.Request(purl, pd, nheaders)
    if breakLoop >= 4:
        return 'Request timed out {} times'.format(breakLoop)
    try:
        nresponse = urllib.request.urlopen(nreq)
    except urllib.error.URLError:
        breakLoop += 1
        get_item_info(pd)
    except urllib.error.HTTPError:
        breakLoop += 1
        get_item_info(pd)        
    else:
        infoGotten = nresponse.read()
    return infoGotten 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T17:13:41.630

您需要返回递归调用的结果，所以它应该`return get_item_info(pd)`在`except`子句中（我在下面结合）：

```
breakLoop = 0
def get_item_info(linkParameters):
    nheaders = {'User-Agent' : 'Firefox/15.0.1'}
    purl = 'http://example.com/something.php'
    pd = linkParameters
    nreq = urllib.request.Request(purl, pd, nheaders)
    if breakLoop >= 4:
        return 'Request timed out {} times'.format(breakLoop)
    try:
        nresponse = urllib.request.urlopen(nreq)
    except (urllib.error.URLError, urllib.error.HTTPError):
        breakLoop += 1
        return get_item_info(pd)
    else:   
        return nresponse.read() 
```

递归似乎是一种奇怪的重试方式，为什么不使用循环呢？以下似乎更清楚：

```
def get_item_info(linkParameters):
    nheaders = {'User-Agent' : 'Firefox/15.0.1'}
    purl = 'http://example.com/something.php'
    pd = linkParameters
    for i in range(5):
        nreq = urllib.request.Request(purl, pd, nheaders)
        try:
            nresponse = urllib.request.urlopen(nreq)
            return nresponse.read()
        except (urllib.error.URLError, urllib.error.HTTPError):
            pass
    return 'Request timed out 4 times' 
```

# android - Android 微调器监听器

> ID：12644444
> 
> 赞同：2
> 
> 时间：2012-09-28T17:10:05.383
> 
> 标签：android, button, spinner, listener

我在将侦听器添加到微调器时遇到问题。当我单击一些微调器的项目时，什么也没有发生。这是我的代码：

```
 Button button_marker= (Button) findViewById(R.id.button_markers);
    ArrayAdapter<CharSequence> adapter=ArrayAdapter.createFromResource(this, R.array.markers, android.R.layout.simple_spinner_item);
    spinner= new Spinner(this);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);    
    spinner.setAdapter(adapter);

    button_marker.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            spinner.performClick();
        }
    });

new AdapterView.OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            Log.e("klkl", "klkl");

        }

        public void onNothingSelected(AdapterView<?> arg0) {
            Log.e("klkl", "klkl");

        }
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T08:42:59.737

```
spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                 Log.e("klkl", "klkl");

            }

            public void onNothingSelected(AdapterView<?> arg0) {
                Log.e("klkl", "klkl");

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:33:54.747

尝试使用

```
spinner .OnItemSelectedListener() {

    public void onItemSelected(AdapterView<?> arg0, View arg1,
            int arg2, long arg3) {
        Log.e("klkl", "klkl");

    }

    public void onNothingSelected(AdapterView<?> arg0) {
        Log.e("klkl", "klkl");

    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T21:31:48.070

您的微调器执行点击，而不是项目选择。尝试这个：

```
spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
    public void onItemSelected(AdapterView<?> arg0, View arg1,
            int arg2, long arg3) {
        Log.e("klkl", "klkl");
    }
    public void onNothingSelected(AdapterView<?> arg0) {
        Log.e("klkl", "klkl");
    }
}); 
```

# jquery - 使用不同版本的 jQuery

> ID：12644446
> 
> 赞同：-2
> 
> 时间：2012-09-28T17:10:15.367
> 
> 标签：jquery, html, css, slimbox

我有这个在`<head>`

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script> 
```

这是从[我的问题中提取的一些淡入/淡出的文本](https://stackoverflow.com/questions/12611269/controlling-the-animation-of-fade-in-and-fade-out)

```
<script>
var $ticker = $('#ticker'); // save the static element
$ticker.children(':not(:first-child)').hide();

function tick(){
$ticker.children(':first-child').fadeOut(1000, function () {
    $(this).appendTo($ticker);
    $ticker.children().first().fadeIn(1000);
});
}
setInterval(tick, 6000);
</script> 
```

而不是我使用这个[slimbox](http://www.digitalia.be/software/slimbox2)

我的问题！

*   为什么我需要在 google 代码上参考 jquery 1.6.4 的在线链接？我可以下载 jquery.js 文件和最新的文件（我认为是 1.8.1 版），然后将其称为

    ```
    <script src="scripts/jquery.min.js"></script> 
    ```

*   slimbox 在设置中说“1。在包含 jQuery 库之后，将脚本包含在页面的标题中：”但我没有这样做，但我的灯箱仍然有效。是不是因为我已经参考过一次了，不需要再做一次？

    ```
    <script type="text/javascript" src="js/jquery.js"></script> 
    ```

*   我应该使用最新的 jQuery 吗？如果我这样做，两者（ticker 和 slimbox）都可以工作吗？

根据我的[问题](https://stackoverflow.com/questions/12134749/why-to-add-two-links-to-jquery-in-this-case)，我不应该使用两个 jquery 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:13:17.393

是的..您可以下载 jQuery 文件并将其也包含在您的页面中..

使用任何 CDN 托管的文件的最佳理由是它减少了您网站的带宽，因为该文件将被缓存，而不是在每次会话后单独加载它。

在这种情况下，即使未包含托管文件，它也可以工作，因为您已包含在项目中的副本。

确保您不包含同一文件的两个不同副本，这可能会导致冲突..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:14:35.410

不包括多个 jquery 版本是不好的并且会导致问题。包括它 1x 并完成它。您可以在本地包含`<script src="scripts/jquery.min.js"></script>`或使用 cdn `<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>`。如果您已经包含它，请跳过本教程中的该步骤。

编辑：

根据[维基百科](http://en.wikipedia.org/wiki/Content_delivery_network)：“内容交付网络 (CDN) 是部署在 Internet 中多个数据中心的大型分布式服务器系统”。基本上，您不需要下载文件并将其托管在您的服务器之外。别人为你做这件事。由于浏览器将限制每个域打开的连接数，因此您可以更快地将站点下载到客户端计算机，因为 CDN 位于单独的域中。在这种情况下，CDN 是链接`https://ajax.googleapis.com/....`。我相信您可以将 1.6.4 部分更改为 1.8.2，它应该链接到该版本。但是您应该查看谷歌托管库页面以获取更多信息：[https ://developers.google.com/speed/libraries/devguide](https://developers.google.com/speed/libraries/devguide)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T17:19:37.703

是的，你可以下载任何你喜欢的 jQuery 版本，并从你喜欢的任何地方包含它。然而，考虑到很多人已经从公共源加载了库，因此它已经在浏览器缓存中。

通常，较新版本中的大多数东西都是向后兼容的。有了基本的东西，升级到最新版本就可以了。

有许多不同的方法可以加载脚本，有些可以工作，有些不能。说明中描述的方法是在任何情况下都最有可能工作的方法。

通常，最新版本的库对大多数已知错误具有最佳功能和修复，但有时新版本也有以前版本没有的错误。在新的主要版本（如 1.8.0 或 2.0.0）出现一段时间并在野外进行测试之前，我会更加谨慎。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T17:21:01.220

1.  是的，你可以，但在大多数情况下，将它放在谷歌存储库中会更好
2.  是的，因为你已经做到了
3.  是的，除非存在任何不兼容问题，否则您应该使用它。你可以在两分钟内自己尝试一下

# javascript - 如何使用 Qtwebkit 调试 websocket

> ID：12644448
> 
> 赞同：0
> 
> 时间：2012-09-28T17:10:21.907
> 
> 标签：javascript, qt, sockets, websocket, qtwebkit

是否可以在使用 Qtwebkit 制作的应用程序中调试 websockets？

我已经激活了 Qtwebkit 调试器，但是我找不到像 Chrome 检查器中包含的名为“网络”并通过 websockets 过滤它的选项卡...

尽管如此，如果不能使用调试器，至少了解如何调试 websockets 的技术会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T06:47:18.007

我不具体了解 qtwebkit。但是[Wireshark](http://www.wireshark.org) 应该能够显示来自您机器上任何程序的 websocket 流量。（如果是通过 HTTPS，事情[就更复杂了](http://wiki.wireshark.org/SSL)。）

# vba - 以十六进制和十进制设置颜色表现不同

> ID：12644456
> 
> 赞同：12
> 
> 时间：2012-09-28T17:10:37.910
> 
> 标签：vba, excel

我正在尝试以下列方式设置橙色：

```
WorkSheet.Range("A1:A5").Interior.color = 49407 
```

和

```
WorkSheet.Range("A1:A5").Interior.color = &HC0FF 'Hex value of 49407 
```

这两个不应该完全等价吗？设置的颜色不同。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-30T15:48:23.293

不，这些值不相等：*`&HC0FF`*是 -16129，而是*`&HC0FF&`*49407。

VBA 是一种相当古老的语言，默认情况下使用 16 位整数。在这个时代，你几乎总是想要长而不是整数，但你必须向 VBA 索要它们。

`&HC0FF`是一个从十六进制定义一个 16 位常量的结构。因为当解释为 16 位值时，此值中的符号位被设置（开，负），因此转换为 -16129。我们可能会认为这很糟糕，但这不是一个错误！当您使用 -16129（作为有符号整数）时，在 32 位形式中，1 会传播到整个前 16 位，结果是蓝色值 255。

您真正想要的是一个 32 位十六进制常量：`&HC0FF&`. 最后的额外`&`内容告诉 VBA 这是一个 long 常量而不是 int。以 32 位解释，这是一个正值，因此给出您正在寻找的十进制等效值。

简而言之，要求带有尾随的长十六进制常量`&`。

顺便说一句，当使用十进制常量时，VBA 对 16 位的这种倾向也会对我们不利，例如在表达式 16000 * 16000 中，这将溢出 16 位算术。因此，有时也需要使用`&`十进制常量的尾随（或先将一个分配给 long）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-29T16:26:53.847

这会将您拥有的十六进制格式颜色转换为 Office 用于 RGB 颜色的 RGB Long：

```
Function HexToLongRGB(sHexVal As String) As Long
    Dim lRed As Long
    Dim lGreen As Long
    Dim lBlue As Long

    lRed = CLng("&H" & Left$(sHexVal, 2))
    lGreen = CLng("&H" & Mid$(sHexVal, 3, 2))
    lBlue = CLng("&H" & Right$(sHexVal, 2))

    HexToLongRGB = RGB(lRed, lGreen, lBlue)

End Function 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-28T18:42:12.677

我相信 Gimp 和 Johannes 的回答都忽略了关键问题。

计算机屏幕上的颜色是通过指定您需要多少红色、蓝色和绿色来定义的。对于这三种颜色中的每一种，您都可以指定一个介于 0 和 255 之间的数字。这三个数字通常通过连接三个单独的数字来指定为一个数字。使用 Html，您可以将颜色指定为 #RRGGBB，其中 RR、GG 和 BB 是十六进制数字，或者您可以将 RRBBGG 替换为等效的十进制数字。在 Excel 中，顺序是相反的，所以 &HBBGGRR 或十进制等效值。

49407 是 00C0FF 的十进制等效值，对于 Excel，它表示蓝色 = 0、绿色 = 192 和红色 = 255。

但是 &HC0FF 或 &H00C0FF 是 -16129 或 Blue = 255，Green = 192 和 Red = 255。这似乎是 &H 转换中的一个缺陷。我无论如何都找不到将 C0FF 转换为 49407 的方法。

如果您坚持使用 &H 转换，我能提供的最好的方法是：

```
 Range("A1:A5").Interior.color = &H01C0FF 
```

这是蓝色 = 1、绿色 = 192 和红色 = 255，我无法区分蓝色 = 0、绿色 = 192 和红色 = 255。

但我会推荐：

```
Range("A1:A5").Interior.color = RGB(255,192,0) 
```

因为 RGB 函数总是返回一个正数，你不必担心 Excel 的逆序。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-28T17:48:05.573

Colorcode 通常由三个值组成，RED、GREEN、BLUE。您的 Hexcode 缺少三者之一，而 excel 正在使用 FF 自动填充它。所以你的颜色 C0FF 被转换为 FFC0FF。

这是一个示例程序，因此您可以查看它的运行情况，制作一个新工作表并执行它。

```
' C0FF will be changed to be FFC0FF
Range("A1").Interior.Color = &HC0FF
Range("A1").Select
ActiveCell.FormulaR1C1 = Range("A1").Interior.Color
Range("A2").Select
ActiveCell.FormulaR1C1 = "=DEC2HEX(R[-1]C,6)"

' 49407 is actually 00C0FF
Range("B1").Interior.Color = 49407
Range("B1").Select
ActiveCell.FormulaR1C1 = Range("B1").Interior.Color
Range("B2").Select
ActiveCell.FormulaR1C1 = "=DEC2HEX(R[-1]C,6)"

' Use RGB to have better control over your results
' Switch the order when doing so: 00C0FF => 00 Blue C0 Green FF Red
Range("C1").Interior.Color = RGB(&HFF, &HC0, &H0)
Range("C1").Select
ActiveCell.FormulaR1C1 = Range("C1").Interior.Color
Range("C2").Select
ActiveCell.FormulaR1C1 = "=DEC2HEX(R[-1]C,6)" 
```

编辑：添加了第三个示例来说明按照不同答案中的建议切换颜色。

# jira - 在 Jira 中创建任务

> ID：12644457
> 
> 赞同：0
> 
> 时间：2012-09-28T17:10:51.280
> 
> 标签：jira, greenhopper

我买了 Jira、Greenhopper 和 Confluence，并且一直在使用他们的产品，但我不太擅长正确编写任务。

假设您的项目中有一项任务，您知道该任务由几个次要任务组成，那么您将为整个任务制作子任务。完成所有子任务后会发生什么？您是否也将整个任务拖过来（我的意思是父任务）？

你如何写你的任务？您是否像这样编写它们：“在数据库中创建客户表”？如果这个任务包括创建索引、约束等，你会写子任务吗？还是您以其他方式编写任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T08:08:14.427

作为万物管理，在这方面没有普遍的做法，但这里有一些我个人使用的指导方针，我们融入了我们的公司。

1.  摘要应描述问题。它不应包含描述问题类型的词：错误、功能、任务等。这就是“问题类型”属性的用途。例如：“重新检查网站是否有任何问题，解决权限问题”或“文本更正”。
2.  最好有 Priority、Due Date、Environment、Component/s、Affects Vers、Fix Vers 和 Labels 属性 - 对于您正在使用的属性，但请记住，定义的属性越多，问题包含的信息越多，它更具描述性并且更易于管理。
3.  描述字段应包含以正式方式描述的所有可用信息。

**子任务：**

这完全取决于您的组织，但我个人报告了 Greenhopper 中的一个错误，现在已解决：

“在 RapidBoard 的 Plan Perspective 中的 Master Task 中不显示子任务的估计”

“我们遇到了快速板冲刺的问题。我们的主问题***没有自己的估计，但是当您包含子任务时确实有估计。从随附的屏幕截图中可以看出，当我们包含此主问题时在下一个 sprint 中，我们看不到所有子问题的估计总和。它们根本没有显示出来。

所以对于子任务，我们现在使用这个新的（固定的）特性——主任务的估计是一个问题的所有估计的总和。我个人只在主人非常复杂的情况下分任务，但对于我的工作来说，这是每天的工作。

希望这会有所帮助，但这是我个人的看法。

# svn - 把树弄得一团糟，如何在没有合并的情况下返回？

> ID：12644461
> 
> 赞同：0
> 
> 时间：2012-09-28T17:11:17.883
> 
> 标签：svn, tortoisesvn

我不小心提交了分散在多个目录中的几个文件。好消息是还没有其他人向存储库提交任何内容。坏消息是我笨拙的尝试还原文件一直在挖我一个越来越深的洞。

我会在 Windows 资源管理器中右键单击该文件，执行 TortoiseSVN -> 显示日志，选择旧的、好的版本，右键单击，然后尝试将修订版保存到...，恢复到此修订版，并从此恢复更改修订。要么在我不想要的废话中还原合并，要么它似乎工作并且我提交但提交与正确的修订不匹配，或者提交抱怨文件冲突并让我合并提交，然后是我的手册合并被拒绝。

如果我很聪明，我会先来这里寻求建议，因为我找到了关于如何恢复的很好的干净说明，但我的黑客攻击似乎阻碍了系统。

正确的方法似乎是转到树的顶部，显示日志，选择引发我的问题的签入，然后“恢复此版本的更改”。但是，当我现在尝试这样做时，上师冥想了一会儿，然后告诉我它不能融合未来的变化。

我真的不想合并任何东西，我想拿起斧头砍掉废话。

我现在怎样才能回到过去？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T11:35:55.760

假设在你搞砸之前的最后一个正确的版本是 1234，而你现在是 1240 的版本。按照这个过程：

*   确保您的工作副本已更新到最新版本，并且不包含任何本地修改（使用TortoiseSVN 菜单中的*检查修改）*
*   单击工作副本根文件夹上的“显示日志”
*   找到修订版 1234。右键单击它，然后选择“恢复到此修订版”（而不是“恢复此修订版的更改”）。这将撤消自修订版 1234 以来从 1240 到 1235 的所有提交，并使您的工作副本与修订版 1234 一样。
*   提交，并带有消息“恢复自修订版 1234 以来我引入的所有混乱”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T23:23:49.390

部分问题是我的工作副本中的文件与 svn 树不同步。我通过以下方式清理它们：
a1）查找哪些文件与 svn 树不同步
a2）删除它们，
a3）进行更新以替换它们。

在那次清理之后，事情正常进行了。我再次尝试了恢复过程：
b1) 从树的顶部打开“显示日志”窗口，
b2) 选择第一个错误签入，
b3) 从右键单击上下文菜单中选择恢复此版本的更改。

那个时候一切顺利——我仔细验证了它。我用良好的修订对每个文件进行了比较，每次都得到二进制相等的结果。

c1) 我提交了恢复的文件。

然后我回到 Show Logs，选择好版本和顶级版本，比较文件，再次得到二进制等于。

现在一切都好。感谢大家的投入。

# c# - C# 检查 ConsoleKeyInfo.KeyChar 是否为数字

> ID：12644473
> 
> 赞同：6
> 
> 时间：2012-09-28T17:12:28.377
> 
> 标签：c#, input

```
ConsoleKeyInfo CKI = Console.ReadKey(true); 
```

CKI.KeyChar 是字符输入的 unicode 等效项所以如果我在控制台提示符中按“1”，CKI.KeyChar 将是 49，而不是值“1”。

如何获得值“1”？

我知道这是获取输入的一种迂回方式，但这是我老师想要的方式，所以我不能这样做。

编辑：我需要用户给出的值，因为我将不得不检查它是否小于 9

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-28T17:14:24.480

使用该[`.KeyChar`](http://msdn.microsoft.com/en-us/library/system.consolekeyinfo.keychar.aspx)属性并与 比较[`Char.IsNumber`](http://msdn.microsoft.com/en-us/library/system.char.isnumber.aspx)。

要获得等效的数字，您可以使用[`Int32.Parse`](http://msdn.microsoft.com/en-us/library/b3h1hf19.aspx)or [`Int32.TryParse`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)：

```
Int32 number;
if (Int32.TryParse(cki.KeyChar.ToString(), out number))
{
  Console.WriteLine("Number: {0}, Less than 9?: {1}", number, number < 9);
} 
```

* * *

### 测试应用：

```
using System;

namespace Test
{
    public static void Main()
{
    Console.WriteLine("Press CTRL+C to exit, otherwise press any key.");
    ConsoleKeyInfo cki;
    do
    {
        cki = Console.ReadKey(true);
        if (!Char.IsNumber(cki.KeyChar))
        {
            Console.WriteLine("Non-numeric input");
        }
        else
        {
            Int32 number;
            if (Int32.TryParse(cki.KeyChar.ToString(), out number))
            {
                Console.WriteLine("Number received: {0}; <9? {1}", number, number < 9);
            }
            else
            {
                Console.WriteLine("Unable to parse input");
            }
        }
    }
    while (cki.KeyChar != 27);
}
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-28T17:14:12.017

用这个：

```
char.IsDigit(CKI.KeyChar); 
```

如果您需要将其转换为数字，请使用以下命令：

```
int myNumber = int.Parse(CKI.KeyChar.ToString()) 
```

要检查它是否小于 9，请执行以下操作：

```
if (myNumber < 9)
{
     // Its less than 9\. Do Something
} else {
     // Its not less than 9\. Do something else
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T20:07:39.853

你可以用简单的方法来做（见下文），或者你可以使用枚举`ConsoleKey`来识别按下了哪个键——`ConsoleKey.D[0-9]`是普通的十进制数字键，还是`ConsoleKey.NumPad[0-9]`数字键盘键。可能想检查使用 enum 按下了哪些修饰符`ConsoleModifiers`。该枚举具有`Flags`属性，因此可以将值与按位或组合。例如，如果属性`ConsoleKeyInfo.Modifiers`是`ConsoleModifiers.Control|ConsoleModifiers.Alt`，则用户按下 [CTL] 和 [ALT] 键以及按下的任何其他键。

```
public static void Main( string[] args )
{

  Console.TreatControlCAsInput = true ;

  Console.Write("? ") ;
  while ( true )
  {
    ConsoleKeyInfo keystroke = Console.ReadKey() ;
    Console.WriteLine();

    if ( keystroke.Modifiers == ConsoleModifiers.Control && keystroke.Key == ConsoleKey.C ) break ;

    int decimalDigit = ((int)keystroke.KeyChar) - ((int)'0') ;
    if ( decimalDigit >= 0 && decimalDigit <= 9 )
    {
      Console.WriteLine("Decimal Digit {0}", decimalDigit ) ;
    }
    else
    {
      Console.WriteLine( "Not a decimal digit!" ) ;
    }
    Console.Write("? ") ;
  }

  return;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T17:16:17.937

49 只是一个ASCII码，所以你可以做得到`char c = (char) 49`实际的字符。

# apache - Mod重写，意外结果

> ID：12644475
> 
> 赞同：1
> 
> 时间：2012-09-28T17:12:44.477
> 
> 标签：apache, mod-rewrite, apache2

我们正在尝试使用以下内容将所有内容从一个域重定向到另一个域

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www\.example\.com$ [NC]
RewriteRule .? http://www.example2.com%{REQUEST_URI} [R=301,L] 
```

当我们访问[http://www.example.com/v2sc](http://www.example.com/v2sc)

我们被重定向到[http://www.example2.comv2sc](http://www.example2.comv2sc)

考虑到 www.example2.comv2sc 不是有效的主机名，我们希望被重定向到[http://www.example2.com/v2sc](http://www.example2.com/v2sc)

关于我们如何实现这一点的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:41:30.610

似乎您为此使用了 .htaccess 文件。在[这种情况下](http://wiki.apache.org/httpd/RewriteContext)，前导斜杠不存在，`%{REQUEST_URI}`因此您可以将其放回原处。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !=www.example.com
RewriteRule ^ http://www.example2.com/%{REQUEST_URI} [R=301] 
```

另请注意，仅当您无法编辑主服务器配置文件时才应使用此类解决方案。这样做可以让您使用[更](http://wiki.apache.org/httpd/CanonicalHostNames)简洁的虚拟主机和重定向指令组合，从而更快地运行。

# c++ - 具有离散允许宽度的自定义 Qt 小部件

> ID：12644476
> 
> 赞同：0
> 
> 时间：2012-09-28T17:12:51.710
> 
> 标签：c++, qt

我想在 QT 中创建一个自定义小部件，本质上是一个网格。我想允许调整这个小部件的大小，但前提是网格中的所有框都具有相同的宽度和高度。例如，如果网格是 30x20，那么小部件只需要能够具有除以 30 的宽度和除以 20 的高度。

我没有在尺寸政策中找到任何看起来像我正在尝试做的事情。

我知道 X11 确实支持这样的尺寸政策。再说一次，它还支持定义顶级窗口的纵横比范围，所以这并不一定意味着 Qt 也支持它:-)

我知道我可以捕捉到调整大小的信号，然后将给定的大小四舍五入。不过，我认为如果在更广泛的布局中使用这可能会产生不愉快的效果。例如，将其中两个放在另一个旁边可能会导致无限循环。

谢谢，
沙查尔

# c++ - wcsncpy_s 函数会导致缓冲区溢出吗？

> ID：12644478
> 
> 赞同：2
> 
> 时间：2012-09-28T17:13:12.957
> 
> 标签：c++, visual-c++, buffer-overflow

我试图了解 wcsncpy_s 函数的工作原理以及它如何防止缓冲区溢出。首先，根据 MSDN，此函数的参数含义如下：

strDest= 目标字符串。

numberOfElements= 目标字符串的大小。

strSource= 源字符串。

count= 要复制的字符数，或 _TRUNCATE。

现在考虑这段代码：

```
wchar_t a[5];
wcsncpy_s(a, 10, L"ABCDEFGHIJKLMNOPQRSTUVWXYZ", 9);

printf("%d\r\n", sizeof(a));//10
printf("%d\r\n", wcslen(a));//9
wprintf(L"%s", a);//ABCDEFGHI 
```

如果我理解这一切，“a”应该最多包含 4 个宽字符加上一个空终止符，现在包含 9 个宽字符。

现在，由于调试断言失败（VS 2005 编译器），以下代码将导致我的应用程序突然终止：

```
wchar_t a[5];
wcsncpy_s(a, 10, L"ABCDEFGHIJKLMNOPQRSTUVWXYZ", 10);

printf("%d\r\n", sizeof(a));
printf("%d\r\n", wcslen(a));
wprintf(L"%s", a); 
```

有人可以解释一下上面的代码以及 wcsncpy_s 应该如何防止缓冲区溢出吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T17:18:30.793

```
wcsncpy_s(a, 10, L"ABCDEFGHIJKLMNOPQRSTUVWXYZ", 9); 
```

你在对函数撒谎。你告诉它“`a`有足够的空间来存储 10 个字符”，而实际上它只有足够的空间来存储 5 个字符。该函数相信您正在向它提供有效信息（它怎么会知道您不是？）

请注意，虽然第二个代码片段出现运行时错误，但第一个代码片段同样错误。两者都写到数组的末尾`a`。

也就是说：您使用了错误的重载`wcsncpy_s`: 在编译 C++ 代码时，还有一个额外的`wcsncpy_s`重载，它是一个推断目标数组大小的模板。如果您要将呼叫更改为：

```
wcsncpy_s(a, L"ABCDEFGHIJKLMNOPQRSTUVWXYZ", 9); 
```

模板将推断出数组有五个元素并自动将其用作大小。这仅在目标是数组时有效；如果目标是指向数组中初始元素的指针，则它不起作用。

理想情况下，如果您使用 C++，最好完全避免 C 字符串操作：使用`std::wstring` 或其他一些字符串类型。如果您确实想使用这些处理 C 字符串的函数，至少使用`std::vector<wchar_t>`或`std::array<wchar_t, N>`代替原始数组：搞砸代码要困难得多。例如，

```
std::array<wchar_t, 5> a;
wcsncpy_s(a.data(), a.size(), L"ABCDEFGHIJKLMNOPQRSTUVWXYZ", 9); 
```

的代码`std::vector<wchar_t>`将是相同的。请注意，获取指向底层数组的指针和获取该数组的大小遵循相同的形式，因此编写代码很容易，也很容易检查代码是否正确（只需对调用进行简单的视觉检查）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T17:17:28.817

在这一行：

```
wcsncpy_s(a, 10, L"ABCDEFGHIJKLMNOPQRSTUVWXYZ", 9); 
```

您是在告诉函数 中的`10`字符有空间`a`，而实际上只有 . 的空间`5`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-28T17:24:11.967

wcsncpy_s 的定义是

```
errno_t wcsncpy_s(
wchar_t *strDest,
size_t numberOfElements,
const wchar_t *strSource,
size_t count 
); 
```

strDest 也是您写作的缓冲区。

numberOfElements 是 strDest 缓冲区中有多少元素。

strSource 是您正在读取的缓冲区

count 是 strSource 中要复制到 strDest 的元素数

所以在

```
wchar_t a[5];
wcsncpy_s(a, 10, L"ABCDEFGHIJKLMNOPQRSTUVWXYZ", 10); //ERROR

printf("%d\r\n", sizeof(a));
printf("%d\r\n", wcslen(a));
wprintf(L"%s", a); 
```

wchar_t 是 2 个字符宽。

问题是该函数最后会自动为您写入一个空终止符。这会导致溢出，因为它试图在末尾写一个。

wcsncpy_s 没有帮助您解决此错误，因为您告诉它 a 中有 10 个可用元素。实际上只有 5 个元素可用。

# css - 垂直对齐两个不同大小的 div，使较小的 div 居中

> ID：12644479
> 
> 赞同：0
> 
> 时间：2012-09-28T17:13:16.257
> 
> 标签：css

[http://jsfiddle.net/RaP2D/5/](http://jsfiddle.net/RaP2D/5/)

我一直在尝试弄清楚如何使“小文本”与“大文本”垂直对齐。我做了一些阅读，尝试了各种包装内容的示例，使用 display:table 等。

我宁愿不浮动元素，但如果这是最简单的方法，那么可以。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:15:49.350

添加规则`vertical-align:middle;`似乎`#OrdersEditTitle`可以做到。

**[jsFiddle 示例](http://jsfiddle.net/j08691/RaP2D/6/)**

```
#OrdersEditTitle {
    font-size: 24px;
    font-weight: bold;
    margin-bottom: 10px;
    margin-top: 5px;
    color: #2E6E9E;
    display: inline-block;
    vertical-align:middle;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:18:15.123

要么按照 j08691 所说的去做，要么将位置设置为相对，将顶部设置为`-5px`.

[jsFiddle](http://jsfiddle.net/RaP2D/7/)

```
#FiltersHaveChangedHighlight {
    display: inline-block;
    padding: 5px;
    position:relative;
    top:-5px;
    margin-left: 5px;
    font-size: 11px;
}
​ 
```

# ios - UIButton 类在作为子视图添加到 UIView 后无法识别选择器

> ID：12644481
> 
> 赞同：0
> 
> 时间：2012-09-28T17:13:36.430
> 
> 标签：ios, uibutton, gui-builder

我有一个 UIViewController 类，我试图在其中分配一个 UIButton 类。这是一个示例代码。

```
MyViewController.m 
- (void)viewDidLoad
{
CGRect frame = CGRectMake(companybuttonxOffset, companybuttonyOffset, buttonWidth, buttonHeight);
CustomButton *customButton = [[CustomButton alloc]initWithFrame:frame];
[self.view addSubview:customButton];
[super viewDidLoad];
}
CustomButton.h

#import <UIKit/UIKit.h>

@interface CustomButton : UIButton {
}
@property (nonatomic, assign) NSInteger toggle;
- (void)buttonPressed: (id)sender;
@end

CustomButton.m

#import "CustomButton.h"

@implementation CustomButton
@synthesize toggle;
- (id) initWithFrame:(CGRect)frame
{
if (self = [super initWithFrame:frame]) {
//custom button code
[self addTarget: self action: @selector(buttonPressed:) forControlEvents: UIControlEventTouchUpInside];

}
return self;
}
- (void)buttonPressed: (id)sender
{
    NSLog(@"buttonPressed !!!!!");
}
@end 
```

虽然按钮存在于我的视图控制器中，但如果我按下按钮，我会不断收到此错误 - -[UIButton buttonPressed:]: unrecognized selector sent to instance 0xb1dca50

根据我在搜索了很多答案后的理解是，当您在 IB 中对按钮进行子类化时，initWithFrame 永远不会被调用。相反，我应该使用 initWithCoder。这是正确的吗 ？如果是这样，那么我不知道 NSCoder 是什么，以及如何使用它。
我厌倦了为此寻找解决方案，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:35:44.537

虽然我同意您通常应该将所有目标都放在控制器层中，但请尝试一下：

```
- (id)initWithCoder:(NSCoder *)coder
{
    if (self = [super initWithCoder:coder])
    {
        [self customButtonInit];
    }

    return self;
}

- (id)initWithFrame:(CGRect)frame
{
    if (self = [super initWithFrame:frame])
    {
        [self customButtonInit];
    }

    return self;
}

- (void)customButtonInit
{
    [self addTarget: self action: @selector(buttonPressed:) forControlEvents: UIControlEventTouchUpInside];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:33:37.647

我猜在 IB 中，您没有将按钮的类更改为 CustomButton。因此，它仍然是一个 UIButton。

尽管如此，我在这里支持 rdelmar，这不是一个很好的设计。您的视图控制器应该处理事件，而不是按钮本身。

# ms-access - 如何在 VBA 中使用 FindRecord 方法？

> ID：12644482
> 
> 赞同：0
> 
> 时间：2012-09-28T17:13:39.843
> 
> 标签：ms-access, vba

我在创建的表单上有一个小型查询构建器，允许用户保存他们构建的查询。效果很好！然后我意识到他们可以使用相同的名称保存多个查询。不好。我正在做的是当他们构建查询并选择保存它时，我只是将 SQL 字符串添加到一个字段中的表中，并在另一个字段中添加他们选择的名称。很容易。所以现在我想我所要做的就是搜索名称字段并根据用户选择的名称检查它。我不知道为什么，但我似乎无法围绕它。我似乎无法让 FindRecord 工作。它返回一个布尔值吗？我就不能做这样的事吗...

```
If DoCmd.FindRecord(userNameVariable) = True Then
 msgbox("That name exists") 
Else
 msgbox(That name doesnt exist)
End If 
```

现在我看了一下，它没有给出任何查看位置，例如表和字段名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:41:48.473

DoCmd.FindRecord 返回使用该条件找到的第一条记录。如果您只想检查该名称是否已经存在，我认为有更好的方法来满足您的需求。

一种方法是构建一个类似的 SQL 字符串 `"SELECT [Name] FROM [Table] WHERE [Name] = '" & userNameVariable & "'"`，执行查询，然后测试记录集是否为空。代码看起来像

```
Dim rs as recordset
Dim strSQL as string
strSQL = "SELECT [Name] FROM [Table] WHERE [Name] = '" & userNameVariable & "'"
Set rs = CurrentDb.OpenRecordset(strSQL)
If rs.RecordCount > 0 Then 
   msgbox "This Query name already exists, please select another" 
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:46:03.940

根据[msdn](http://msdn.microsoft.com/en-us/library/office/ff835361.aspx)，它只是转到您搜索的数据。我不认为那是你需要的。

这就是我要做的（我不是说这是最好的方法，只是我会做的）。假设调用了表`TblName`并且保存保存名称的字段是`SQLName`：

```
If CurrentDb.OpenRecordset( _
    "Select count(*) from TblName where SQLName='" & SQLName & "';") _
    .Fields(0) > 0 Then
    'Do Something
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T21:59:38.777

保存的查询名称存储在不受支持的 MSysObjects 表中，因此您可以在本地数据库中查找该表以查找查询是否存在：

```
If IsNull(DLookup("name", "msysobjects", "name='" _
    & qryname & "' and type=5")) Then

    Set qdf = CurrentDb.CreateQueryDef(qryname, sSQL)
Else
   MsgBox qryname " already exists."
End If 
```

# android - 动作模式关闭按钮文本颜色

> ID：12644484
> 
> 赞同：11
> 
> 时间：2012-09-28T17:13:43.420
> 
> 标签：android, android-actionbar

我看到设置动作模式“完成”/“关闭”按钮的文本颜色。这是我尝试过的：

```
<item name="android:actionModeCloseButtonStyle">@style/ActionModeCloseButton</item>
....
<style name="ActionModeCloseButton" parent="android:style/Widget.Holo.ActionButton.CloseMode">
    <item name="android:textColor">@android:color/white</item>
</style> 
```

但是没有效果。

![在此处输入图像描述](../Images/a27b4e6523c32babd8ee99f8258d8f33.png)

请注意，在 JB 上，我将`ActionModeCloseButton`样式的父级设为常规全息主题就足够了。它在那里工作正常（甚至没有`textColor`设置）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-17T14:10:01.630

首先，文本视图“完成”仅在大型设备上可见。`action_mode_close_item.xml`在 Android 源代码中结帐。因此，`android:actionModeCloseButtonStyle`仅适用于包含视图，而不适用于 imageview 和 textview。

幸运的是，android 工程师使用可公开访问的属性来设置子视图的样式。

*   用于`android:actionMenuTextColor`更改为 TextView 的 textColor。
*   用于`android:actionModeCloseDrawable`更改 ImageView 的可绘制对象

例子：

```
<style name="MyTheme">
    <item name="android:actionMenuTextColor">#ff000000</item>
    <item name="android:actionModeCloseDrawable">@drawable/my_close_drawable</item>
</style> 
```

下面是 -folder 中的副本，您可以`action_mode_close_item.xml`在`layout-large`其中查看布局的构建方式。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/action_mode_close_button"
        android:focusable="true"
        android:clickable="true"
        android:paddingStart="8dip"
        style="?android:attr/actionModeCloseButtonStyle"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_marginEnd="16dip">
    <ImageView android:layout_width="48dip"
               android:layout_height="wrap_content"
               android:layout_gravity="center"
               android:scaleType="center"
               android:src="?android:attr/actionModeCloseDrawable" />
    <TextView android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_gravity="center"
              android:layout_marginStart="4dip"
              android:layout_marginEnd="16dip"
              android:textAppearance="?android:attr/textAppearanceSmall"
              android:textColor="?android:attr/actionMenuTextColor"
              android:textSize="12sp"
              android:textAllCaps="true"
              android:text="@string/action_mode_done" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T13:25:41.617

由于操作模式关闭按钮的布局没有为文本视图提供颜色属性，因此无法在自定义主题中设置此颜色。相反，我发现的唯一方法是在`onPrepareActionMode()`派生`ActionMode`类的方法中覆盖文本颜色：

```
@Override
public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
    new AsyncTask<Void, Void, Void>() {
        @Override
        protected Void doInBackground(Void... none) {
            try {
                Thread.sleep(100);
            } catch (InterruptedException e) {
            }
            return null;
        }

        @Override
        protected void onPostExecute(Void none) {
            if (activity != null) {
                LinearLayout layout = (LinearLayout) activity
                            .findViewById(R.id.abs__action_mode_close_button);

                if (layout == null) {
                    int id = Resources.getSystem().getIdentifier(
                                      "action_mode_close_button", "id", "android");
                    layout = (LinearLayout) activity.findViewById(id);
                }

                if (layout != null && layout.getChildCount() > 1) {
                    TextView label = (TextView) layout.getChildAt(1);
                    if (label != null) label.setTextColor(Color.RED);
                }
            }
        }
    }.execute();

    return false;
} 
```

在 Android 4.0 前后使用了两台设备。

# javascript - 谷歌身份验证javascript

> ID：12644486
> 
> 赞同：7
> 
> 时间：2012-09-28T17:13:58.907
> 
> 标签：javascript, google-api, google-api-client, google-authentication

我正在尝试在我们的网站上实现谷歌登录。我已阅读文档并在 apis 控制台上设置了一个应用程序。

我更喜欢注册对话框显示在弹出窗口中，并且在用户登录并接受我将获得 javascript 回调的权限后。根据文档，这个 api 也支持。所以我在文档的帮助下构建了以下内容;-)

*第一部分是异步加载 google 客户端脚本，并使用正确的 clientid 和 apikey 初始化脚本。*

```
$gp = new googlePlus('@Trustpilot.Web.Social.Google.ClientID', '@Trustpilot.Web.Social.Google.ApiKey');
(function () {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/client.js?onload=googlePlusClientLoad';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
})(); 
```

*下一部分是使用 google 客户端 api 的部分。加载 client.js 时调用 handleClientLoad()。该方法检查使用是否经过身份验证。如果用户是，我的想法是我想登录用户。如果用户尚未通过身份验证，则会有一个按钮，并且当单击 handleAuthClick() 时，它的基本功能与 handleClientLoad() 相同，但会出现一个弹出窗口，用户最常登录（使用谷歌帐户）并接受权限。登录后调用 handleAuthResult() 登录用户。*

```
function googlePlus(clientId, apiKey) {
    this.clientId = clientId;
    this.apiKey = apiKey;
    this.scopes = 'https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/userinfo.email';

    /// This method is called when the javascript is loaded async
    this.handleClientLoad = function() {
        gapi.client.setApiKey(this.apiKey);
        window.setTimeout(this.authorize(true), 1);
    };

this.handleAuthResult = function (authResult) {
    console.log(authResult);
    if (authResult && !authResult.error) {
        var token = gapi.auth.getToken();
        console.log(token);
    }
    else if (authResult && authResult.error) {
        alert(authResult.error);
    }
};

this.handleAuthClick = function(event) {
    this.authorize(false);
    return false;
};

this.makeApiCall = function() {
    gapi.client.load('plus', 'v1', function () {
        var request = gapi.client.plus.people.get({
            'userId': 'me'
        });
        request.execute(function (resp) {
            console.log(resp);
        });
    });
};

    this.authorize = function (immediate) {
        gapi.auth.authorize({ client_id: this.clientId, scope: this.scopes, immediate: immediate }, this.handleAuthResult());
        //gapi.auth.authorize({ client_id: this.clientId, scope: this.scopes, immediate: immediate }, this.handleAuthResult());
    };
}
var googlePlusClientLoad = function() {
    $gp.handleClientLoad();
}; 
```

**所以现在解决问题：**

1.  当调用 handleClientLoad 时，即使用户已经通过身份验证，用户也永远不会被验证。
2.  如果用户使用 handleAuthClick() 弹出窗口显示和登录，handleAuthResult() 的权限和回调工作。但是参数 authResult 总是什么都没有（应该是文档中的内容）。
3.  如果我多次尝试而不重新加载页面，我有时可以让 makeApiCall() 和 gapi.auth.getToken() 工作并获得我需要的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-26T06:31:51.783

您的代码中有两个问题：

*   API 密钥不是必需的，您可以将其删除。您通过 OAuth2 获得用户令牌就足够了。
*   中`authorize()`，`handleAuthResult`方法调用不正确，去掉函数名末尾的括号。您不想执行该函数，只需传递其引用即可。该`authorize`方法必须如下所示：

    `gapi.auth.authorize({ client_id: this.clientId, scope: this.scopes, immediate: immediate }, this.handleAuthResult);`

注意括号中的区别。

# java - 在系统上安装多个 JRE 时使用哪个 rt.jar？

> ID：12644487
> 
> 赞同：2
> 
> 时间：2012-09-28T17:14:00.920
> 
> 标签：java, runtime

在 Windows 系统上，假设您在那里安装了多个 JRE，并假设您通过显式指定 java.exe 的绝对路径来启动 java，并假设您不依赖任何环境变量，例如 JAVA_HOME，java.exe 将从它所在的目录树还是依赖于“官方”java安装程序创建的某些注册表设置？

换句话说，Java 用于查找其运行时的算法是什么？您不必在类路径上指定运行时，如果您尝试输出 System.getProperty("java.class.path") 的内容，则不会显示运行时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T17:20:45.830

如果您调用`C:\Some\Path\Java\jre\bin\java.exe`，那么它将使用`C:\Some\Path\Java\jre\lib\rt.jar`. 它基本上使用`..\lib\rt.jar`. 它不做任何花哨的解析或注册表查找，只是一个相对路径引用。

如果您需要从 Java 应用程序中查找该引用，您可以使用：

```
String javaPath = System.getProperty("java.home");
File rtJar = new File(javaPath, "lib/rt.jar"); 
```

# c# - 意外的 jQuery ajax json 响应

> ID：12644488
> 
> 赞同：1
> 
> 时间：2012-09-28T17:14:10.600
> 
> 标签：c#, asp.net, jquery

我在使用 jQuery (1.7.2) ajax 和 asp.net 时遇到了一些奇怪的问题。

在本地使用下面的代码时，这一切似乎都可以正常工作。ajax 触发良好，模态按预期弹出，div 向下滑动，我对结果非常满意。

但是，在我们的开发服务器上，我们遇到了一些奇怪的问题。我们开始点击错误函数。在错误函数中，返回文本不是我们的 JSON 时间戳，而是来自页面流中不同页面的 HTML。我们尝试过使用 .ajax 的参数，我们尝试过摆弄模态，我们尝试在我们的代码后面的方法中返回时间戳，我们尝试将我们的 dataType 更改为文本。这允许它触发模态，但是，Inf.innerHTML 最终只是在我们的页面流中显示了另一个页面的呈现。

我们花了很多时间尝试调试它，但我们仍然卡住了。任何想法将不胜感激。

jQuery：

```
$("#<%= Btn.ClientID %>").click(function() {
            $.ajax({
                async: true,
                type: "POST",
                url: "Page.aspx/Method",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(data) {
                    $("#Modal").modal({
                        closeClass: "Modal-Close",
                        escClose: false,
                        opacity: 35,
                        overlayCss: { backgroundColor: "#000" }
                    }); //end Modal
                    //timeStamp = data.d; //Timestamp elsewhere in the js
                }, //end success
                error: function(xhr, status, error) { alert("xhr: " + xhr.responseText + "\n\nstatus: " + status + "\n\nerror: " + error); }
            }); //end ajax
            return false;
        }); //end Btn.click

$(".Modal-Close").click(function() {
       ModalClose();
});

var timeStamp;

    function ModalClose() {
        var img = document.getElementById("imgP");
        var Inf = document.getElementById("Info");
        var Name = document.getElementById("<%=divName.ClientID %>").value;
        img.src = "difImg.png";
        Inf.innerHTML = "Sometext" + Name + ", MoreText.<br />" + timeStamp;
        var divO = document.getElementById("<%=divOut.ClientID %>");
        $(divO).slideDown();
    } 
```

C# 页面代码隐藏

```
[WebMethod(EnableSession = true)]
public static string Method()
{
    // Various magic
    return "{\"d\":\"" + DateTime.Now.ToString("MMMM dd, yyyy h:mm tt") + "\"}";
} 
```

# facebook - restFB - 无法发布到页面 - 只能发布到我的墙上

> ID：12644493
> 
> 赞同：0
> 
> 时间：2012-09-28T17:14:29.030
> 
> 标签：facebook, post, restfb

我创建了一个 Facebook 应用程序，我将使用它以编程方式将信息发布到 Facebook。我已经让它工作，所以我可以发布到我的墙上，但不是我希望它去的页面（我是 2 位管理员中的 1 位）。

这个帖子到我的页面就好了：

```
FacebookClient facebookClient = new DefaultFacebookClient("<ACCESS_TOKEN>"); 
FacebookType publishMessageResponse = facebookClient.publish("<MY_FB_NAME>/feed", FacebookType.class, Parameter.with("message", "Testing...")); 
```

但是如果我尝试发布该页面，则会收到错误消息：

com.restfb.exception.FacebookOAuthException: Received Facebook error response of type OAuthException: (#200) The user has not authorized the application to perform this action

代码是相同的，除了我用页面的 ID 替换我的名字：

```
FacebookClient facebookClient = new DefaultFacebookClient("<ACCESS_TOKEN>"); 
FacebookType publishMessageResponse = facebookClient.publish("<THE_PAGE_ID>/feed", FacebookType.class, Parameter.with("message", "Testing...")); 
```

该应用程序被列为该页面的应用程序之一。

谢谢你的帮助，弗兰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:51:00.270

你确定你有正确的 ( `publish_stream`)[权限](https://developers.facebook.com/docs/authentication/permissions/)吗？

您需要将其作为用户发布到他们自己的个人资料以外的地方。

# powershell - Copy-Item 不在目标位置保留文件名或扩展名

> ID：12644500
> 
> 赞同：0
> 
> 时间：2012-09-28T17:14:51.450
> 
> 标签：powershell, copy

我正在将 .MSI 文件复制到远程 PC。`copy-item`不在远程目标上保留文件名或扩展名。我以为`copy-item`会照原样复制文件？

剧本：

```
net use Q: \\remotePC\C$\Temp /user:USERID PSWD
copy-item C:\TEMP\installation.msi -Destination Q:\Temp
dir Q:\
net use Q: /delete 
```

复制后目标目录包含的内容是一个名为“Temp”的文件，没有扩展名。

```
 Directory: Q:\

Mode                LastWriteTime     Length Name
----                -------------     ------ ----
-a---          8/8/2012   3:57 PM   18900480 Temp 
```

如果我尝试在`copy-item`cmd 的目标中逐字指定文件名，则会收到以下错误：

```
net use Q: \\remotePC\C$\Temp /user:USERID PSWD
copy-item C:\TEMP\installation.msi -Destination Q:\Temp\installation.msi
dir Q:\
net use Q: /delete 
```

错误：

```
Copy-Item : Could not find a part of the path 'Q:\Temp\installation.msi'.
At P:\Powershell\CopyInstallFile\copyinstall.ps1:10 char:10
+ copy-item <<<<  C:\TEMP\installation.msi -Destination Q:\Temp\installation.msi
    + CategoryInfo          : NotSpecified: (:) [Copy-Item], DirectoryNotFound
   Exception
    + FullyQualifiedErrorId : System.IO.DirectoryNotFoundException,Microsoft.P
   owerShell.Commands.CopyItemCommand 
```

==================================================== ============== **编辑**- 如果我指定完整的网络路径，它会正确复制文件。显然`copy-item`不喜欢使用由`net use`

```
copy-item C:\TEMP\installation.msi \\remotePC\C$\Temp 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T18:00:19.080

您已映射`Q:`到另一台机器上的 c:\Temp 文件夹。这意味着它`Q:\`已经指向临时目录。只需复制到`Q:\`而不是`Q:\Temp`它应该可以工作。

```
copy-item C:\TEMP\installation.msi -Destination Q:\ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:50:12.527

好像`Q:\Temp`不存在。尝试`Temp`先创建文件夹，然后复制文件。

# database - 如何选择背靠背的条目？

> ID：12644506
> 
> 赞同：1
> 
> 时间：2012-09-28T17:15:07.127
> 
> 标签：database, sql-server-2008, tsql

我将如何选择`c_user_id`谁在 SQL Server 2008 数据库中创建了背靠背条目？

最好是那些做了超过 3 个背靠背条目的人，如下`pras.chla@gmail.com`所示（按`c_id desc`和`c_id`是一个身份列）

```
c_id    c_user_id             c_entry
1427    xermadr.asdf@me.com   155575
1426    pras.chla@gmail.com   155829
1425    pras.chla@gmail.com   155826
1424    pras.chla@gmail.com   155828
1423    pras.chla@gmail.com   155830
1422    sdfe.qqol@gmail.com   155559 
```

再次感谢 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T17:42:10.340

单程

```
SELECT DISTINCT c_user_id
FROM   tab t1
       CROSS APPLY (SELECT 1 AS C
                    FROM   (SELECT TOP 2 *
                            FROM   tab t2
                            WHERE  t2.c_id < t1.c_id
                            ORDER  BY t2.c_id DESC) T 
HAVING COUNT(c_user_id) = 2 AND COUNT(DISTINCT c_user_id) = 1 AND MIN(c_user_id) = t1.c_user_id) CA 
```

或其他

```
WITH T AS
(
SELECT *,
       ROW_NUMBER() OVER (order by c_id) -
       ROW_NUMBER() OVER (PARTITION BY c_user_id order by c_id) AS Grp
FROM   tab t1
)
SELECT DISTINCT c_user_id
FROM T
GROUP BY c_user_id, Grp
HAVING COUNT(*) >=3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:22:58.473

```
;WITH someUserTableWithOrderNumber as
(
SELECT ROW_NUMBER ( )  OVER (order by c_id) OrderNumber, 
    c_id, 
    c_user_id, 
    c_entry 
FROM someUserTable
)
SELECT DISTINCT a.c_user_id
FROM someUserTableWithOrderNumber a
JOIN someUserTableWithOrderNumber b on a.OrderNumber = b.OrderNumber + 1 AND a.c_user_id = b.c_user_id 
JOIN someUserTableWithOrderNumber c on b.OrderNumber = c.OrderNumber + 1 AND b.c_user_id = c.c_user_id 
JOIN someUserTableWithOrderNumber d on c.OrderNumber = d.OrderNumber + 1 AND c.c_user_id = d.c_user_id 
```

# excel - 条件格式，我可以命名它们吗

> ID：12644516
> 
> 赞同：1
> 
> 时间：2012-09-28T17:15:50.787
> 
> 标签：excel, excel-2010, vba

在这种情况下，如果我无法在逻辑上通过并将新的单元格范围添加到预定义的条件格式中，那么我将不得不格式化接近 1000 行。

在[MSDN](http://msdn.microsoft.com/en-us/library/office/ff821841.aspx)上阅读这篇文章后，上面写着索引或名称，显然有人变得懒惰，只是复制/粘贴信息。但是碰巧的是，名称可以与条件格式相关联吗？

如果不是，那么我如何控制读取格式的顺序？它们都是公式格式，没有一个是预制类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:43:03.677

您可以使用该`SetFirstPriority`方法对格式条件进行排序，也可以随时创建它们，每个条件都在前一个条件之后，如下面的代码所示。

```
Dim myRange As Range

Set myRange = Selection

With myRange

    'First condition
    .FormatConditions.Add Type:=xlExpression, Formula1:="=A6=125"
    With .FormatConditions(.FormatConditions.Count).Interior
        .PatternColorIndex = xlAutomatic
        .ThemeColor = xlThemeColorDark2
        .TintAndShade = -0.899960325937681
    End With
    .FormatConditions(.FormatConditions.Count).StopIfTrue = False

    'second condition
    .FormatConditions.Add Type:=xlExpression, Formula1:="=A6=250"
    With .FormatConditions(.FormatConditions.Count).Interior
        .PatternColorIndex = xlAutomatic
        .ThemeColor = xlThemeColorDark2
        .TintAndShade = -0.899960325937681
    End With
    .FormatConditions(.FormatConditions.Count).StopIfTrue = False

End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:27:32.933

**答案 #1**：我看不出有什么方法可以命名条件格式规则。

**答案 #2**：您可以控制应用条件格式的顺序。单击条件格式 | 管理规则。从那里，您可以使用向上/向下按钮在列表中上下移动规则。如果所选规则为“真”，您甚至可以标记复选框以停止处理规则。

**评论**：不知道你为什么标记这个`excel-vba`。你的问题似乎没有任何`VBA`元素。

# php - 如何显示上传到我的 ftp 文件夹的图像

> ID：12644521
> 
> 赞同：0
> 
> 时间：2012-09-28T17:16:43.700
> 
> 标签：php, html, image, ftp

我正在建立一个网站，我通过 PHP 脚本将图像上传到我的 ftp 文件夹。现在我想在我的 HTML 页面上显示这些图像。我正在考虑使用 PHP 并从我的 ftp 文件夹中获取所有图像的数组，然后使用图像视图显示它们。

请告诉我我是否以错误的方式执行此操作，以及是否有其他更好的选择。我正在阅读 ftp_nlist 和 ftp_rawlist 的 php 手册，但不明白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:26:04.200

好吧，这可能取决于您在那里有多少图像。可能最“正确”的方法是将文件名存储在数据库中。您可以扫描整个文件夹，但对于每一个请求，这可能会产生很多开销，而不是仅仅从数据库中获取它们。你是手动上传图片吗？向我们提供有关其工作原理的更多详细信息，我们可以更好地为您服务。如果您使用脚本上传图像（我有很多项目都是这种情况），那么您可以让脚本为您将这些文件路径插入数据库。如果没有，（您正在手动上传它们），或者确实没有大量文件，那么扫描文件夹不一定是一件坏事。我自己在较小的项目中使用过这种方法。

阅读文档中的 php readdir 函数（具有讽刺意味的是，它实际上很像 mysql_fetch_assoc）——这将为您提供一种无需设置数据库的绝佳方式。对于上传脚本处理它的方法，我推荐使用数据库。没有更多信息，很难说。祝你好运！

# algorithm - 生成这些序列的有效方法

> ID：12644524
> 
> 赞同：2
> 
> 时间：2012-09-28T17:16:48.333
> 
> 标签：algorithm, data-structures

**问题：** 我需要生成以下序列。我将矩阵的顺序作为输入。

**示例：**
我需要生成其元素的位置序列。

```
 (0,0),(0,1),(1,0),(1,1) ->for order 2
 (0,0),(0,1),(0,2),(1,0),(1,1),(1,2),(2,0),(2,1),(2,2) -> for order 3. 
```

我需要有为我做这件事的功能。当我调用此函数时，它应该即时为我计算。我不想将序列存储在内存中。

例如：

```
first_call - > return value (0,0)
second_call to function - > return value ( 0,1)
...and so on... 
```

您可以将这些值存储在一些全局变量中。

**PS：**
该函数必须是线程安全的，因为应用程序是多线程的。我知道这种情况没有任何区别。只是想传达整个问题。

**Precision：**
我已经尝试过我的解决方案，但我认为它很有效。我正在寻找一种有效的方法来做到这一点。你可以只提步骤。我不需要任何特定语言的实现。如果该问题需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:29:20.907

使用全局变量来存储您调用该函数的次数。调用它`t`。如果 order 是`order`，那么

f = ( `t`div `order`, `t`mod `order`)

其中`div`是整数除法（例如 5 `div`3 = 1），`mod`是模数（即除法的余数）。（例如 5 `mod`3 = 2）。

所以以Java为例：

```
public class MyCounter {

    private static int t = 0;

    public static int[] myFunction(int order) {
        return new int[] { t / order , t++ % order };
    }

    public static void main(String[] args) {
        int order = 3;
        for(int i=0; i<order*order; i++) {
            int[] k = myFunction(order);            
            System.out.println("("+k[0]+", "+k[1]+")");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:35:36.257

```
#define MATRIX_ORDER 3

void NextPosition(int aIndex, int& aRow, int& aColumn)
{
    if (aColumn == MATRIX_ORDER - 1)
    {
        aRow++;
        aColumn = 0;
    } else {
        aColumn++;
    }
}

void SomeFunction()
{
    int index = 0;
    int row = 0;
    int column = -1;

    while (index < (MATRIX_ORDER * MATRIX_ORDER))
    {
        NextPosition(index, row, column);
        printf("index: %d, row: %d, column: %d\n", index, row, column);
        index++;
    }
} 
```

输出：

```
index: 0, row: 0, column: 0
index: 1, row: 0, column: 1
index: 2, row: 0, column: 2
index: 3, row: 1, column: 0
index: 4, row: 1, column: 1
index: 5, row: 1, column: 2
index: 6, row: 2, column: 0
index: 7, row: 2, column: 1
index: 8, row: 2, column: 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T19:17:01.203

这是使用生成器的 Python 解决方案：

```
def sequence_gen(order=2):
    for i in range(order*order):
        yield divmod(i, order)

for val in sequence_gen(2):
    print(val)

#(0, 0)
#(0, 1)
#(1, 0)
#(1, 1)

for val in sequence_gen(3):
    print(val)

#(0, 0)
#(0, 1)
#(0, 2)
#(1, 0)
#(1, 1)
#(1, 2)
#(2, 0)
#(2, 1)
#(2, 2) 
```

# cassandra - 如何在 Cassandra 中查找列的大小

> ID：12644526
> 
> 赞同：2
> 
> 时间：2012-09-28T17:17:01.637
> 
> 标签：cassandra, command-line-interface, hector

我遇到了 Java 堆大小问题，所以想检查 cassandra 中列的大小。我正在将许多列读入内存中的 Java。

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T22:32:36.643

如果不检索列并直接检查大小，我认为没有任何内置方法可以做到这一点。

当最初写入值时，您需要将每列的大小存储在*另一列中。*

您可以在同一行中使用名称相似的列，因此您最终会得到与现在相同的行数，但每行的列数是原来的两倍）

```
row :  col1    col1size    col2    col2size
       <data>  <size>      <data>  <size> 
```

或另一行中的同名列，因此您最终会得到两倍的行数，但与现在的列数相同）。

```
row1       :  col1    col2
              <data>  <data>

row1sizes  :  col1    col2  
              <size>  <size> 
```

**更新**到地址注释：要在写入之前找到列的大小，客户端可以将对象序列化为字节数组，然后检查数组的大小：

```
 String s = "foo";
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ObjectOutputStream oos = new ObjectOutputStream(baos);
    oos.writeObject(s);
    System.out.println("Size="+baos.toByteArray().length); 
```

# extjs - Sencha Cmd v3 在实现 Bryntum 调度程序时构建错误

> ID：12644531
> 
> 赞同：0
> 
> 时间：2012-09-28T17:17:48.107
> 
> 标签：extjs

使用 Cmd 3.0.0.141，我已经成功地在该工作区中生成了一个工作区和一个 Ext 应用程序。应用程序正确构建，直到我尝试集成 Bryntum 调度程序，当我尝试构建时遇到错误：

“无法解决文件 ExtCalendar.view.Tree 的依赖关系 Sch.panel.SchedulerTree”

该应用程序在这一点上非常简单，使用 Ext.application 并遵循 MVC 模式，其中我有一个扩展“Sch.panel.SchedulerTree”的视图定义“ExtCalendar.view.Tree”。我也有扩展 Bryntum 的模型和商店类也是如此，所以我假设编译器也会跳过这些类，因为它看不到 Sch 命名空间。

我在 app.json 中添加了一个“js”路径，该路径指向“Sch.panel.SchedulerTree”来自的 bryntum js 文件。我尝试运行具有相同结果的“刷新”命令（无法解决...）。我已经使用“编译”手动重新生成了 bootstrap.js 文件，但 Sch 命名空间中的任何内容都不会添加到其中，尽管 Brytum lib 文件位于类路径中。

为了使用这样的库成功运行“构建”命令，我需要做什么？或者，我是否需要使用“编译”命令采取更精细的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T23:06:52.570

在 Sencha 论坛上好心人的帮助下，我能够解决我的构建问题。对我来说，解决方案涉及垫片。我在索引中添加了一个外部 shim.js 文件，其中包含尽可能多的 //@require 和 //@define 指令，以解决依赖问题。

据 Bryntum 的好心人说，一旦我从 Bryntum 调度程序的免费试用版升级，我将能够摆脱 shim 并简单地依赖指向 Bryntum src 的 sencha.cfg 类路径。

此外，顺便说一句，ExtJS 应用程序中不使用 app.json 文件，它包含在生成的文件中是 Cmd v3 的 build 141 中的一个错误。

有关更多详细信息，请参阅[此线程](http://www.sencha.com/forum/showthread.php?244300-Does-Cmd-v3-support-vendor-libraries)。

# php - 使用 PHP 流式上传数据

> ID：12644534
> 
> 赞同：0
> 
> 时间：2012-09-28T17:18:01.020
> 
> 标签：php, file-upload

我正在开发一个基本上充当用户和其他后端服务之间的层的系统。我需要支持的操作之一是文件上传。理想情况下，我希望上传的数据通过 PHP 实时流式传输到适当的后端服务。不幸的是，由于 PHP 处理多部分编码的 POST 请求的方式，我找不到实现这一点的方法。

有没有办法禁用 PHP 对多部分请求的自动处理（和/或阻塞）？有没有另一种方法可以实现我通过 PHP 获得这个数据流的目标？

# windows-8 - 用 HTML/CSS/JS 与 XAML/C# 编写的 Metro 应用程序之间的区别

> ID：12644535
> 
> 赞同：13
> 
> 时间：2012-09-28T17:18:01.723
> 
> 标签：windows-8, microsoft-metro, windows-runtime, winrt-xaml, winjs

使用 Web 开发技术编写的 Metro 应用程序与使用 XAML/C# 等编写的 Metro 应用程序有什么区别？Microsoft Metro API 是否为 Javascript 提供了钩子，而所有这些都是 C# 原生的？他们应该携手合作，还是由开发人员选择走哪条路线？

如果使用 JS（OpenGL 硬件功能除外），是否有某些功能无法实现？

我想知道的原因是要知道构建广泛的 Metro 应用程序需要哪些技术，这样当我到达某个点时，我不会被砖墙阻止，让我知道我使用了错误的技术。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-28T19:05:35.637

微软已经投入了大量的工作来使 Javascript 成为与 C# 相媲美的用于 WinRT 开发的一阶语言。Javascript 和 C# 都可以通过语言投影直接访问 WinRT API。也就是说，有一个特定于语言到底层 API 的唯一绑定。因此，两种语言都不比另一种更“本土化”。

您应该能够用任何一种语言编写等效的 Metro 应用程序。在高层次上，它确实归结为您更喜欢哪种语言/环境。

但是，有一些差异应该考虑到决定中。首先，WinRT 组件只能用 C# 或 C++ 编写。Javascript 只能使用这些组件。如果有创建可重用/可共享组件的意图，请记住这一点。

其次，虽然 Windows Phone 8 SDK 尚未发布，但有迹象表明 Windows Phone 8 应用程序只能用 C# 编写。如果打算为平板电脑和手机创建类似的应用程序，这可能是一个认真的考虑。

在 Metro 应用程序中比较两者的基于性能的研究并不多，因此很难说这是否会成为一个因素。

然后，还需要考虑第 3 方支持。C#/XAML 已经很成熟，并且有很多 3rd-party 支持。但类似地，Javascript 有很多可用的 3rd-party 库（例如 jQuery），它们大部分都可以被引入并在 Metro 应用程序中使用。我会给 C#/XAML 一点优势，但似乎支持对两者都有好处。

# android - 仅擦除应用程序数据

> ID：12644536
> 
> 赞同：2
> 
> 时间：2012-09-28T17:18:06.873
> 
> 标签：android, security, policy

我正在开发一个“安全”应用程序，我目前正在使用设备策略管理器。我可以成功擦除，但我希望仅擦除所有应用程序数据或擦除指定 App Ex 中的数据。：擦除 Kik Messenger 数据（对话、登录 ...）并保留所有应用程序（尤其是我的应用程序） 我不想完全恢复出厂设置或擦除 /Data/App/，有什么办法吗？此外，无论设备是否需要您给定解决方案的 root 访问权限（如果您有）。

# xcode - iphone 5 的 xcode 4.5 依赖问题

> ID：12644538
> 
> 赞同：3
> 
> 时间：2012-09-28T17:18:10.410
> 
> 标签：xcode, cocos2d-iphone, ios6

我正在尝试将我的项目构建到我的 iphone 5 并且我不断收到此警告 No architectures to compile for`(ONLY_ACTIVE_ARCH=YES, active arch=armv7s, VALID_ARCHS=armv6 armv7)` 有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-28T17:39:17.553

您收到此错误是因为您的活动架构是`armv7s`（armv7s 是 iPhone 5 的 A6 SoC 的架构）：

> 活动拱门=armv7s

但是此架构未在您的有效架构中列出：

> VALID_ARCHS=armv6 armv7

通过添加 armv7s 修改项目目标的“构建设置”中的“有效架构”（您最好删除 armv6，因为 Xcode 4.5 不再支持）：

![在此处输入图像描述](../Images/40a688e9c40c03188c3ab765ab26cef8.png)

您可能还需要更改“架构”属性：

![在此处输入图像描述](../Images/095898d2e1b0a472d7ea6bf4916ca37b.png)

并将“Build Active Architecture Only”设置为 NO（因此您的项目是为所有列出的架构构建的，包括 armv7，较旧的设备，例如 iPhone 4S，可以执行）：

![在此处输入图像描述](../Images/d5d5cfbe8fdce801c86de1e86f5a735d.png)

另外，请查看[此答案](https://stackoverflow.com/a/4270184/131183)。

# php - 如何使用 mysql_num_rows 加速这个查询？

> ID：12644541
> 
> 赞同：0
> 
> 时间：2012-09-28T17:18:25.670
> 
> 标签：php, mysql

所以我有2个数据库。一个在我的主要主机（论坛-站点）中，另一个用于其他信息。我使用其他数据库的原因是因为我的主机不允许远程连接。所以我现在被迫尝试这种方式。

我想简单地更好地编写这段代码。我说的更好，如果我想建立另一个连接，这是使用它的正确方法吗？如果可以优化，请告诉我如何。

```
$connection = mysql_connect("Host", "User", "Pass") or die(mysql_error());
mysql_select_db("DB", $connection);

$gs_kdq = mysql_query("SELECT SUM(Kills) AS g_killz, SUM(Deaths) AS g_deathz FROM Users", $connection);
$gs_kd = mysql_fetch_assoc($gs_kdq);

$gs_players = mysql_query("SELECT * FROM Users", $connection) or die(mysql_error());
$gs_Something0 = mysql_query("SELECT * FROM Something0", $connection) or die(mysql_error());
$gs_Something1 = mysql_query("SELECT * FROM Something1", $connection) or die(mysql_error());
$gs_Something2 = mysql_query("SELECT * FROM Something2", $connection) or die(mysql_error());

mysql_num_rows($gs_players);
mysql_num_rows($gs_Something0);
mysql_num_rows($gs_Something1);
mysql_num_rows($gs_Something2); 
```

由于（我认为）mysql_num_rows，论坛加载有点慢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T17:20:51.937

您正在读取表中的所有数据，只是为了了解它们有多大。SQL 有[一个更快的方法来做到这一点](https://dev.mysql.com/doc/refman/5.1/en/counting-rows.html)：

```
SELECT COUNT(*) FROM SomeTable 
```

这将返回一个包含该表中行数的结果（您可以添加一个`WHERE`子句，它将返回匹配的行数）。

# javascript - 尽管有同源策略，但不缩短短 URI

> ID：12644549
> 
> 赞同：0
> 
> 时间：2012-09-28T17:19:12.697
> 
> 标签：javascript, iframe, same-origin-policy, short-url

那个该死的 SOP 又来了。

所以，假设我有`"http://t.co/atyHdwLA"`（客户端，我们正在谈论），并且我想获得`"http://foo.com"`. 我有一个聪明的主意来构造一个不可见的 iframe，然后在重定向发生后等待一秒钟再查询它`contentWindow`的 's 。`location`但是 SOP 阻止我访问它。任何人都可以想到任何其他黑客来实现这一点，还是在浏览器中根本不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:21:46.260

使用[LongURL 之](http://longurl.org/tools)类的服务。或者[ExpandURL](http://expandurl.appspot.com/)，它有一个易于使用的 API。

将 ExpandURL 的 API 与 XHR 请求一起使用。

另外，看看[这篇关于 CORS 的文章。](https://developer.mozilla.org/en-US/docs/HTTP_access_control)如果他们的服务器不支持跨域请求，您可能必须使用自己的服务器才能使用此 API。

# c# - MSBuild Conditional 基于常量

> ID：12644552
> 
> 赞同：2
> 
> 时间：2012-09-28T17:19:31.183
> 
> 标签：c#, msbuild, mono

所以我正在尝试在 Mono 中构建一个 C# 项目。我想包含对 Mono 编译器定义`System.Deployment`的常量是否存在的条件的引用。`__MonoCS__`我不确定当 MSBuild 获得我的 .csproj 时是否已经定义了这些常量。

我想我可能必须添加一个 Mono 配置来定义一个 MONO 常量，然后我可以删除对的引用`System.Deployment`并使用命令有条件地编译我需要的行`#if MONO`……但如果我可以简单地添加`Condition="Defined(__MonoCS__)"`到有问题的线路并称之为好......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T22:17:04.990

我认为你不幸地让事情倒退了。编译器常量永远不会传回 MSBuild，调用链是 MSBuild -> Compiler -> Preprocessor。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T20:39:37.903

可悲的是，Mono 在 xbuild（MSBuild 等效）中有[这个错误](https://bugzilla.xamarin.com/show_bug.cgi?id=3010)，这使得定义这样的条件非常困难。

想尝试修复错误吗？应该很容易，但实际上我还没有时间尝试。

# android - 语言不会改变

> ID：12644558
> 
> 赞同：0
> 
> 时间：2012-09-28T17:20:03.873
> 
> 标签：android, locale

我正在尝试以编程方式设置我的应用程序的语言，但它只改变了我的一些字符串。我有值文件夹，其中是英文的默认字符串。然后我创建了 values-fr 并将每个字符串翻译成法语，所以现在我有（英语）默认值文件夹，其中有我的英语 strings.xml 和 values-fr 文件夹，其中有我的法语 strings.xml

这是我用来更改语言 onCreate 和 onResume 的代码：

```
String languageToLoad  = "fr"; // your language
Locale locale = new Locale(languageToLoad); 
Locale.setDefault(locale);
Configuration config = new Configuration();
config.locale = locale;
getBaseContext().getResources().updateConfiguration(config, 
getBaseContext().getResources().getDisplayMetrics()); 
```

但它只会更改一些字符串，例如我偏好的所有字符串都会更改，但主要活动中的字符串保持不变。知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T23:53:27.027

尝试这个：

```
Resources standardResources = getApplicationContext();
DisplayMetrics metrics = standardResources.getDisplayMetrics();
Configuration config = new Configuration(standardResources.getConfiguration());
config.locale = new Locale("fr") // change
standardResources.updateConfiguration(config, metrics); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-11T15:55:25.247

做这个：

```
Locale localeFR = new Locale("fr", "FR");
Resources res = getResources();
DisplayMetrics dm = res.getDisplayMetrics();
Configuration conf = res.getConfiguration();
conf.locale = localeFR;
res.updateConfiguration(conf, dm);
Intent refresh = new Intent(MyActivity.this, MyActivity.class);
startActivity(refresh);
finish(); 
```

为应用设置区域设置后，您需要重新启动 Activity 以使更改可见。

# redirect - x86 进程中的 Power Shell - 访问 64 位程序文件

> ID：12644561
> 
> 赞同：4
> 
> 时间：2012-09-28T17:20:19.150
> 
> 标签：redirect, powershell, program-files

我之前使用过[SysNative](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384187%28v=vs.85%29.aspx)来访问 64 位 system32 目录，但我似乎无法找到 Program Files 目录的等价物。我觉得我错过了一些简单的东西，但是如果我尝试做一些事情，例如：

```
$command = "${Env:ProgramFiles}\Company\executable.exe" 
```

然后`$command`最终成为 C:\Program Files (x86)\Company\executable.exe。

谁能指出我访问 64 位程序文件（来自 32 位 powershell）的正确方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T20:16:43.160

可能会短很多:)

```
$env:ProgramW6432 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:39:06.147

弄清楚了！

```
$programFiles = [System.Environment]::GetEnvironmentVariable("ProgramW6432") 
```

# javascript - jQuery onclick 放置器什么都不做

> ID：12644563
> 
> 赞同：2
> 
> 时间：2012-09-28T17:20:39.990
> 
> 标签：javascript, jquery, ajax

我的索引页面上有一个输入：

```
<input type="button" name="goReplaceAll" value="Go" id="allReplaceGo" style="cursor:hand;" /> 
```

以及来自 jquery 的 onclick 调用：

```
$(document).ready(function() {
        $('#allReplaceGo').click(replaceAll);
});
function replaceAll(){ alert('a'); } 
```

当我单击按钮时，什么也没有发生。当我在 HTML 中使用 onclick="replaceAll()" 时，我收到一个错误：Uncaught ReferenceError: replaceAll is not defined

我无法弄清楚这些错误之间的联系，或任何可能的原因。

该代码目前位于[http://www.texturepacker.net](http://www.texturepacker.net)

编辑：看起来我在 Firefox 和 Chrome 中得到了两个不同的结果，Chrome 在页面加载后 Firefox alert('a')'s 什么都不做。现在我只是很困惑？

编辑：在我的代码后面似乎有一个不相关的语法错误正在中断调用。现在在 dom 加载时调用 replaceAll()，我现在的问题是为什么没有在单击时启动 replaceAll() 而是在 dom 加载后，我是否遗漏了一些明显的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:28:08.550

看起来像这里的**语法错误**......

脚本文件中的第 196 行说

```
$(this).("src",tmpSrc); 
```

它应该是

```
$(this).attr("src",tmpSrc); 
```

修复它，它应该一切都好..

也在7号线

```
$('#allReplaceGo').live("click",replaceAll()); 
```

应该是

```
$('#allReplaceGo').live("click",replaceAll); 
```

同样从 1.7 版开始，不推荐使用**.live()**。尝试使用**.on()**代替

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-28T17:24:05.963

您的代码应如下所示

```
 $(document).ready(function() {
        $('#allReplaceGo').click(function(){
           replaceAll()
        });
    });
    function replaceAll(){ alert('a'); } 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-28T17:22:34.887

发生这种情况，可能是因为函数 replaceAll 在 jQuery 范围之外。尝试将她放在 $(document).ready 范围内。

# architecture - 去应用服务器？

> ID：12644566
> 
> 赞同：3
> 
> 时间：2012-09-28T17:20:44.607
> 
> 标签：architecture, go

是否有可能利用基于在 Go 平台的应用服务器上运行的模块化组件的设计？

是否存在使 Go 无法实现此设计的限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T18:42:52.203

没有什么类似于 Java 或 .NET 中可用的应用程序服务器但是有支持 Go 的 google AppEngine

没有办法像 Java 或 .NET 那样在 Go 中加载/卸载代码

您不能将 go 编译为将与另一个 Go 应用程序一起加载的库。

无论如何，您可以使用 Go 创建应用程序服务器。它将有多个进程并通过启动/停止进程来加载/卸载代码。

它还可以通过在模块中嵌入一些特定于服务器的代码来编译服务器上的代码。例如，这样的额外代码可以实现 AppServer 进程间通信。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-28T15:32:56.780

为此，XATMI 服务理念完美契合，将单独的可执行二进制文件作为无状态服务。应用服务器通过中间件管理它们的 IPC 通信，管理进程状态（保持所有进程正常运行），提供进程重新加载工具等。例如，我可以提到 Enduro/X ASG 项目（[https://github.com/ endurox-dev/endurox-go](https://github.com/endurox-dev/endurox-go)），它完成所有这些任务。它还提供分布式事务处理框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T21:28:45.693

据我了解，Go 的主要特点之一是它既不需要应用服务器，也不需要在运行时添加/加载代码。Go 已编译并（几乎）静态链接，可执行文件已准备好运行。

虽然所有这些模块在运行时看起来都很方便，但它有很多缺点，尤其是增加了部署和依赖的复杂性。

我怀疑 Go 社区是否会将模块系统视为“杠杆”。

# c# - 什么更快：if 语句或条件运算符？（C＃）

> ID：12644572
> 
> 赞同：1
> 
> 时间：2012-09-28T17:21:19.060
> 
> 标签：c#, if-statement, conditional-operator

简单的问题（我认为）：在 C# 中，哪些代码会执行得更快？

```
newSpeed = newSpeed > maxSpeed ? maxSpeed : newSpeed; 
```

或者

```
if (newSpeed > maxSpeed)
{
    newSpeed = maxSpeed;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T17:22:58.350

我猜第二个会更快，在某些情况下，因为它并不总是做分配，而第一个总是做分配。

例如，当 时`newSpeed <= maxSpeed`，不进行任何赋值，仅进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:03:27.810

正如justnS所说，您需要在编译时将三元运算符转换为if语句，但是如果您使用三元运算符，则需要一个if和一个else部分，而if语句没有else。因此，如果您将代码运行几百万或十亿次，也许会有明显的差异。但没关系，如果你构建一个正常的程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T17:23:53.170

在这种情况下，编译器采用三元行并创建一个 if 语句......所以它变成完全相同的东西。

链接： http: [//www.dotnetperls.com/ternary](http://www.dotnetperls.com/ternary)

# spring - 带有 OSGi 捆绑 uri 的骆驼 xquery 端点

> ID：12644574
> 
> 赞同：0
> 
> 时间：2012-09-28T17:21:26.043
> 
> 标签：spring, osgi, xquery, apache-camel, apache-karaf

我有一个启动 Camel (2.10.0) 上下文的 OSGi 包（部署到 Karaf 2.2.4）。Camel 上下文的路由构建器有一些 xquery 端点 URI，例如

```
"xquery:classpath:Dir1/Dir2/example.xq" 
```

当上下文尝试解析该 URI 时，它失败了，因为 Camel 包与 .xq 文件所在的类路径不同。所以，我创建了一个 url 扩展函数

```
"xquery:classpath:..." 
```

进入

```
"xquery:bundle://42.0:6/..." 
```

因为我在处理(Spring 3.1.1)时处理了捆绑 URI 和`OsgiBundleResourcePatternResolver`项目的早期版本。`ClassPathScanningCandidateComponentProvider`不幸的是，我似乎找不到让 Camel`XQueryComponent`使用我的`OsgiBundleResourcePatternResolver`.

1.  我会以正确的方式解决这个问题吗？有没有更简单的方法来做到这一点？
2.  如果我是，我如何确保`XQueryComponent`可以理解`bundle:`URI？
3.  另外，我是否可以确保任何骆驼组件都可以理解`bundle:`URI？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T16:44:44.017

具有上述 xquery 端点的 Camel 路由的应用程序需要导入 xq 文件所在的包，例如表示“Dir1.Dir2”的包。

所以在具有 OSGi 导入|导出的 META-INF/MANIFEST.MF 中。您应该有该给定包的导入。

并回答你的 3 个子弹

1.  不，见上
2.  您需要扩展此组件并为“捆绑包”添加您自己的逻辑
3.  不，不是，因为您需要向 camel-core/camel-core-osgi 添加逻辑。

此外，应用程序的捆绑包 ID 可以更改，因此不建议通过其 ID 引用捆绑包。并且您不能分配捆绑 ID，这是由 osgi 容器自行分配的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:44:40.840

感谢克劳斯的回答，我能够意识到我的 .xq 文件不在其 .jar 的正确目录中。

Dir1 位于其 .jar 文件的根目录中。虽然在非 OSGi Web 容器中运行应用程序运行良好，但 Karaf 似乎对资源应该在我的 .war 文件中的位置更加严格。我将 .xq 文件移到了，现在在代码使用时`WEB-INF/classes/Dir1/...`不再接收`FileNotFoundExceptions``xquery:classpath:Dir1/Dir2/example.xq`

# c - 在C中添加到链表的尾部

> ID：12644577
> 
> 赞同：0
> 
> 时间：2012-09-28T17:21:44.293
> 
> 标签：c, pointers, linked-list

我查看了其他问题，但没有一个回答我的问题。我正在尝试设置一个从尾部添加的单链表以进行课堂作业。

```
/** List node  **/
typedef struct node_type
{
   struct node_type *next;           /* Pointer to next node               */   
   void *objPtr;                     /* Pointer to associated object       */
} node_t;

/** List structure **/
typedef struct list_type
{
   node_t *head;                     /* Pointer to front of list           */
   node_t *tail;                     /* Pointer to end of list             */
} list_t;

list_t *newList() {
   list_t *list;
   list = (list_t *)malloc(sizeof(list_t));

   list -> head = NULL;
   list -> tail = NULL;
   return(list);
} 
```

这些是给我使用的结构。我的添加功能是这样的：

```
/** l_add -- add an object to the linked list **/
void l_add(list_t *list, void *objPtr) {
   node_t *newNode;
   newNode = (node_t *)malloc(sizeof(node_t));

   newNode -> objPtr = objPtr;
   newNode -> next = NULL;

   if ((list -> head == NULL) && (list -> tail == NULL)) {
   list -> head = newNode;
   list -> tail = newNode;
   } else {
   list -> tail -> next = newNode;
   list -> tail = newNode;

}
} 
```

我的迭代器相关函数是这样的：

```
iterator_t *newIterator(list_t *list) {

   iterator_t *itr;
   itr = (iterator_t *)malloc(sizeof(iterator_t));

   itr -> list = list;                    
   itr -> position = list -> head;

   return(itr); 
}

void *l_next(iterator_t *iter) {
  void *object;

   if ((iter -> position) == NULL) {
      return NULL;
      exit(0);
   } else {
      object = iter -> position -> next;
      iter -> position = iter -> position -> next;
}
  return  object; 

}

void l_begin(iterator_t *iter) {
    iter -> position = iter -> list -> head;
} 
```

当我编译它时它不会给我任何错误，我得到的值很大，我假设是内存而不是我应该接收的数据。我传递的第一个值是“5”，列表中的第一个数字会波动，但以百万为单位。我仍在尝试习惯指针，有谁知道我为什么要添加地址而不是值？

我使用它的代码：

```
 size = sizeof(data)/sizeof(int);
   for(index = 0; index < size; index++) {
      l_add(list1, &data[index]);
   }

   l_begin(iter1);
   ptr1 = l_next(iter1);
   fprintf(stdout, "First value=%d\n", *ptr1); 
```

而 list1 是：

```
int data[] = {5, 10, 15, 20, 25};
list_t *list1;
list1 = newList(); 
```

*更新为包括打印功能和我的迭代器。我不认为问题在那里，但它可能是。抱歉这么长的问题，我试图编辑它，所以没有那么多代码，所以希望一切都有意义，我没有搞砸我试图展示的内容。

大家差不多同时收到了，谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:28:05.867

您似乎没有取消引用 objPtr。这就是为什么你会得到很大的价值。

我假设 l_next 应该返回一个 node_type。在这种情况下，您需要：

```
fprintf(stdout, "First value=%d\n", *((int*)ptr1->objPtr)); 
```

要不更改 fprintf，请将 l_next 中的 object = 更改为：

```
object = iter -> position -> next -> objPtr; 
```

此外，您可能应该知道 l_next 实际上不会迭代。它不会改变 iter 中位置的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:29:12.253

您需要传入一个指向 5 值的指针。因此，不要在为整数集分配内存时传递“5”，然后将指针传递给内存分配：

```
int * newObject = (int *)malloc(sizeof(int));

*newObject = 5;

l_add(list, newObject); 
```

要检索它，您需要将对象取消引用为您实例化 5 值的任何类型。

好吧，现在您发布了其余代码，看起来您正在获取下一个节点结构，因为您的迭代器返回了对象而不是此处的实际对象：

```
object = iter -> position -> next; 
```

它应该是这样的：

```
object = iter -> position -> objPtr; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T17:45:25.690

你`l_next`的坏了；您正在返回`next`节点而不是对象。它应该是：

```
void *l_next(iterator_t *iter) {
  void *object;

   if ((iter -> position) == NULL) {
      return NULL;
      exit(0);
   } else {
      object = iter -> position -> objPtr;
      iter -> position = iter -> position -> next;
}
  return  object; 

} 
```

# java - catch 块中的多个语句

> ID：12644579
> 
> 赞同：1
> 
> 时间：2012-09-28T17:21:54.547
> 
> 标签：java, try-catch

我有一个非常简单的问题。我没有使用它，但我很想知道答案。只有当异常被捕获时，我们才能在 catch 块中执行多个语句吗？我的意思是在我下面的代码中，这两个语句都会被执行吗？让我添加一些代码片段以使其清楚..

我找到了这个链接，但没有给我问题的答案。 [链接点这里](http://www.java2s.com/Code/JavaAPI/java.sql/SQLExceptiongetErrorCode.htm)

我在某人提出的这个问题中找到了上面的链接，但它的代码非常模糊，很难理解。 [堆栈溢出链接](https://stackoverflow.com/questions/11765185/statements-within-catch-block-is-not-executing)

```
try {
    int x = doXProcess();
    int y = doYProcess();
} catch (Exception e) {
    System.out.println("Error related x: " x + e.printStackTrace());
    System.out.println("Error related y: " y + e.printStackTrace());
} 
```

感谢您的帮助和时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T17:23:24.923

您绝对可以在处理异常的代码块中执行几行。

但是，请注意您的代码无法编译。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T17:24:21.890

在一个`try`块中看到多个语句是很常见的。

如果第一行发生异常，则不执行第二行。执行在任何抛出异常的行停止；块中没有超过该点的行被执行——执行直接进入 catch 块。

如果从块中抛出异常`catch`，则执行再次停止在发生异常的行。从那里你去一个`finally`块，如果一个被定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T17:25:10.830

是的你可以。可以执行 N 条语句。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T17:25:12.520

是的，catch 块中的所有语句都会在捕获到异常时执行。

# javascript - Javascript - 正则表达式，现在该怎么办，这一切都是真的

> ID：12644587
> 
> 赞同：1
> 
> 时间：2012-09-28T17:22:27.853
> 
> 标签：javascript, regex

您好，我正在开发一个应该测试密码字段的 javascript。现在，如果没有任何要求没有得到满足，我可以得到密码字段并显示警报。然而，下一个问题在于，既然要求是真实的，那么该做什么。我写了一个真实的声明来检查它是否会单击表单上的按钮以输入密码，但到目前为止我似乎无法让它单击按钮。任何建议都将受到欢迎和赞赏。这是我现在拥有的代码。

```
var str= passwordFieldForm; 
var patt=/[a-z]/g; 
var patt2 = /[A-Z]/g;  
var patt3 = /[0-9]/g;  
var patt4 = /[~\!@#\$%\^&*_\-\+=`\|\\(\)\{\}\[\]:;"'<>,\.\?\/]/g;  

var result=patt.test(str); 
var result2=patt2.test(str); 
var result3=patt3.test(str); 
var result4=patt4.test(str); 

if (!result) 
  alert("Needs a lowercase letter"); 

if (!result2) 
  alert("Needs a Uppercase Letter");

if (!result3) 
  alert("Needs a Number.") ;

if (!result4) 
  alert("Needs a special character"); 

if (result) && (result2) && (result3) && (result4) == true 
  document.getElementById("kioskform:broswerPasswordSubmit").click(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:34:51.580

该[`if`](http://ecma-international.org/ecma-262/5.1/#sec-12.5)语句需要括号**之间**的表达式，即：

```
if (result && result2 && result3 && result4) {
  document.getElementById("kioskform:broswerPasswordSubmit").click(); 
} 
```

此外，无需明确将结果与`true`. 如果表达式的*计算*结果为`true`，则将执行其主体，就像您在单个`if`s 中使用的一样。

# c# - 在 64 位机器上运行 x86 编译代码时单精度算术中断

> ID：12644591
> 
> 赞同：7
> 
> 时间：2012-09-28T17:22:38.537
> 
> 标签：c#, floating-point, 64-bit, clr, single-precision

当您阅读[MSDN 时`System.Single`](http://msdn.microsoft.com/en-us/library/system.single.aspx)：

> `Single`符合二进制浮点运算的 IEC 60559:1989 (IEEE 754) 标准。

和 C# 语言规范：

> 和类型使用 32 位单精度`float`和`double`64 位双精度 IEEE 754 格式表示 [...]

然后：

> 该乘积是根据 IEEE 754 算术规则计算的。

`float`您很容易得到类型及其乘法符合 IEEE 754的印象。

**乘法是明确定义**的，这是 IEEE 754 的一部分。我的意思是当你有两个`float`实例时，只有一个`float`是他们的“正确”产品。不允许产品依赖于计算它的系统的某些“状态”或“设置”。

现在，考虑以下简单程序：

```
using System;

static class Program
{
  static void Main()
  {
    Console.WriteLine("Environment");
    Console.WriteLine(Environment.Is64BitOperatingSystem);
    Console.WriteLine(Environment.Is64BitProcess);
    bool isDebug = false;
#if DEBUG
    isDebug = true;
#endif
    Console.WriteLine(isDebug);
    Console.WriteLine();

    float a, b, product, whole;

    Console.WriteLine("case .58");
    a = 0.58f;
    b = 100f;
    product = a * b;
    whole = 58f;
    Console.WriteLine(whole == product);
    Console.WriteLine((a * b) == product);
    Console.WriteLine((float)(a * b) == product);
    Console.WriteLine((int)(a * b));
  }
} 
```

除了编写一些环境信息和编译配置外，程序只考虑两个`float`s（即`a`和`b`）及其乘积。最后四行是有趣的。**以下是使用Debug x86**（左）、**Release x86**（中）和**x64**（右）编译后在 64 位机器上运行的输出：

![调试 x86（左）、发布 x86（中）和 x64（右）](../Images/63c6b565016edea40c13368fd2461356.png)

我们得出结论，简单`float`操作的结果取决于构建配置。

之后的第一行是对两个s`"case .58"`的简单检查。`float`我们希望它独立于构建模式，但事实并非如此。我们希望接下来的两行是相同的，因为它不会改变任何将 a`float`转换为 a 的内容`float`。但他们不是。我们也希望他们能够阅读`"True↩ True"`，因为我们正在将产品`a*b`与自身进行比较。我们期望输出的最后一行独立于构建配置，但事实并非如此。

为了弄清楚正确的产品是什么，我们手动计算。`0.58`( )的二进制表示`a`为：

```
0 . 1(001 0100 0111 1010 1110 0)(001 0100 0111 1010 1110 0)... 
```

其中括号中的块是永远重复的周期。这个数字的单精度表示需要四舍五入为：

```
0 . 1(001 0100 0111 1010 1110 0)(001      (*) 
```

我们已经四舍五入（在本例中向下舍入）到最接近的可表示的`Single`. 现在，数字“一百”（`b`）是：

```
110 0100 .       (**) 
```

在二进制。计算数字的完整乘积`(*)`并`(**)`给出：

```
 11 1001 . 1111 1111 1111 1111 1110 0100 
```

四舍五入（在这种情况下向上舍入）到单精度给出

```
 11 1010 . 0000 0000 0000 0000 00 
```

我们四舍五入的地方是因为下一位是`1`，而不是`0`（四舍五入到最接近的）。所以我们得出结论，结果是`58f`根据 IEEE 的。根据 IEEE，这不是以任何方式*先验给出的*，例如`0.59f * 100f`小于`59f`和`0.60f * 100f`大于。`60f`

所以看起来 x64 版本的代码是正确的（上图中最右边的输出窗口）。

注意：如果这个问题的任何读者有一个旧的 32 位 CPU，听听上面程序在他们的架构上的输出会很有趣。

现在的问题：

1.  以上是bug吗？
2.  如果这不是一个错误，那么[C# 规范](http://msdn.microsoft.com/en-us/library/ms228593.aspx)中的哪个位置说运行时可以选择执行`float`具有额外精度的乘法然后“忘记”以再次摆脱该精度？
3.  将`float`表达式转换为类型如何`float`改变任何东西？
4.  `(a*b)`当它们在数学上（根据 IEEE）应该是等效的（根据 IEEE）时，看似无辜的操作（例如通过将一个拉出到一个临时局部变量）将一个表达式拆分为两个表达式会改变行为，这难道不是一个问题吗？程序员如何提前知道运行时是否选择保持`float`“人工”额外（64 位）精度？
5.  为什么允许在发布模式下编译的“优化”改变算术？

（这是在 .NET Framework 的 4.0 版本中完成的。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T17:30:47.357

我没有检查过你的算术，但我之前肯定见过类似的结果。除了调试模式会有所不同，分配给局部变量和实例变量也会有所不同。根据 C# 4 规范的第 4.1.6 节，这是合法的：

> 浮点运算可以以比运算结果类型更高的精度执行。例如，一些硬件架构支持“扩展”或“长双精度”浮点类型，其范围和精度比该`double`类型更大，并使用这种更高精度类型隐式执行所有浮点运算。*只有以过高的性能成本为代价，才能使这种硬件架构以较低的*精度执行浮点运算。C# 不需要一个实现来牺牲性能和精度，而是允许对所有浮点运算使用精度更高的类型。除了提供更精确的结果之外，这很少有任何可衡量的影响。[...]

我不能确定这是否是这里发生的事情，但我不会感到惊讶。

# mysql - 两个查询与一个查询的速度，但限制输出

> ID：12644593
> 
> 赞同：1
> 
> 时间：2012-09-28T17:22:42.780
> 
> 标签：mysql, sql

我正在运行一个查询，我需要知道表中的总行数，但只需要显示前 6 行。

`select count(*)`那么，运行并`select * ... limit 6`返回打印数据是否更快？或者，只是`select *`没有限制并在 while 循环中放置一个计数器来打印结果？对于后者，我显然可以使用 mysql_num_rows 来获得总数。

有问题的表将包含多达 100 万行，查询包括一个 where row = xxx 该列将被索引

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:27:39.790

使用[FOUND_ROWS()](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)。这是一个例子：

```
SELECT SQL_CALC_FOUND_ROWS * FROM tbl_name WHERE id > 100 LIMIT 10;
SELECT FOUND_ROWS(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:26:32.717

做两个查询。您的计数查询将使用索引，不必扫描整个表，只需扫描索引。第二个查询只需从表中读取 6 行。

# asp.net - 对绑定到自定义通用对象列表的 GridView 进行排序

> ID：12644594
> 
> 赞同：5
> 
> 时间：2012-09-28T17:22:44.327
> 
> 标签：asp.net, vb.net, sorting, gridview

我试图弄清楚如何使用绑定到自定义对象的通用列表的`GridView`多列（`String`、`DateTime`、等数据类型）对 a 进行排序。`Decimal`

**MyObject.vb**：

```
Public Property Id
Public Property Name
Public Property Date
Public Property Amount 
```

**MyObjects.aspx.vb**：

```
gridView.DataSource = GetMyObjects()
gridView.DataBind() 
```

***注意***：`GetMyObjects()`返回`List`一个`MyObject`

基本上，我需要能够单击网格的列标题进行排序和反向排序，并且还能够存储排序方向，`ViewState`以便每次单击列标题时方向都保持不变。

似乎我可能需要`MyObject`实现`IComparable`，但我不确定如何将它们组合在一起。

任何人都可以为此提出一个好的教程，或者指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-17T02:19:44.943

您需要启用排序 ( **[AllowSorting](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.allowsorting.aspx)** ) 并处理事件**[OnSorting](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.sorting.aspx)**。

***注意：示例代码使用 C#，但 VB 版本应该类似。***

创建您的**GridView**：

```
<asp:GridView ID="GridView1" runat="server" AllowSorting="True" OnSorting="GridView1_Sorting">
</asp:GridView> 
```

处理**OnSorting**：

```
protected void GridView1_Sorting(object sender, GridViewSortEventArgs e)
{
    GridView1.DataSource = GetObjects(e.SortDirection, e.SortExpression);
    GridView1.DataBind();
} 
```

**GetObjects**返回一个排序的`List<MyObject>`. 您必须在此处创建自己的排序逻辑，一种替代方法是使用[Dynamic Linq](https://stackoverflow.com/questions/41244/dynamic-linq-orderby)。如果您选择该路线，则**GetObjects**可以这样定义：（有更好的方法，但这足以说明理论）

```
private List<MyObject> GetObjects(SortDirection sd, string se)
{
    // Have we generated data before?
    if (SimulatedDB == null)
    {
        // Create a sample DB
        SimulatedDB = new List<MyObject>();
        var rnd = new Random();

        for (int i = 0; i < 20; i++)
        {
            var node = new MyObject();
            node.Id = i;
            node.Name = String.Format("Name {0}", i);
            node.CreationDate = DateTime.Now.AddDays(rnd.Next(100));
            node.Amount = (rnd.Next(1000) * rnd.NextDouble());

            SimulatedDB.Add(node);
        }
    }

    // Return sorted list
    if (sd == SortDirection.Ascending)
        return SimulatedDB.AsQueryable<MyObject>().OrderBy<MyObject>(se).ToList();
    else
        return SimulatedDB.AsQueryable<MyObject>().OrderByDescending<MyObject>(se).ToList();
} 
```

希望能帮助到你。

# excel - 将整个工作表内容复制到已打开的 Word 文档中

> ID：12644596
> 
> 赞同：0
> 
> 时间：2012-09-28T17:22:47.150
> 
> 标签：excel, vba, ms-word, worksheet, office-2007

我有两个部分工作的代码要放在一起。

我有一个标有“单词”的工作表，我想将其导出并自动保存在变量下。

```
Sub CreateNewWordDoc()

Dim wrdApp As Word.Application
Dim wrdDoc As Word.Document
Dim i As Integer
docname = Worksheets("input").Range("b10").Value

Data1 = Worksheets("word").Range("a1:d103").Value
Set wrdApp = CreateObject("Word.Application")
wrdApp.Visible = True
Set wrdDoc = wrdApp.Documents.Open("C:\Results\ResultsTemplate.doc")

'******THIS IS TO EDIT THE WORD DOCUMENT******
With Worksheets("word")
    CopyRangeToWord wdDoc, .Range("A1:d104")

'******THIS IS THE END TO EDIT THE WORD DOCUMENT*****

    If Dir("C:\Results\" & docname & ".doc") <> "" Then
        Kill "C:\Results\" & docname & ".doc"
    End If
    .SaveAs ("C:\Results\" & docname & ".doc")
    .Close ' close the document
End With
wrdApp.Quit ' close the Word application
Set wrdDoc = Nothing
Set wrdApp = Nothing
End Sub 
```

我最喜欢这个第一个。它将打开我的模板，其中包含这些生成的报告所需的所有官方资料（公司信息等），并将自动保存并使用正确的文件名关闭。但是，我找不到将工作表“单词”中的所有信息复制到文档正文中的方法。它正在保存一个空白文档。

在进行故障排除时，我遇到了以下代码：

```
Private Sub CopyRangeToWord(ByRef wdDoc As Word.Document, rng_to_copy As Range, Optional page_break As Boolean = True)
' Will copy the range given into the word document given.
Application.StatusBar = "Copying data from " & rng_to_copy.Parent.Name & "..."
rng_to_copy.Copy
wdDoc.Paragraphs(wdDoc.Paragraphs.Count).Range.InsertParagraphAfter
wdDoc.Paragraphs(wdDoc.Paragraphs.Count).Range.Paste
Application.CutCopyMode = False
wdDoc.Paragraphs(wdDoc.Paragraphs.Count).Range.InsertParagraphAfter
' insert page break after all worksheets except the last one
If page_break Then
    With wdDoc.Paragraphs(wdDoc.Paragraphs.Count).Range
        .InsertParagraphBefore
        .Collapse Direction:=wdCollapseEnd
        .InsertBreak Type:=wdPageBreak
    End With
End If

End Sub

Sub CopyWorksheetsToWord()

    Dim wdApp As Word.Application, wdDoc As Word.Document, ws As Worksheet
    Application.ScreenUpdating = False
    Application.StatusBar = "Creating new document..."
    Set wdApp = New Word.Application
    Set wdDoc = wdApp.Documents.Add
    docname = Worksheets("input").Range("b10").Value

    With Worksheets("word")
        CopyRangeToWord wdDoc, .Range("A1:d104")

    End With

    Set ws = Nothing
    Application.StatusBar = "Cleaning up..."
     'apply normal view
    With wdApp.ActiveWindow
        If .View.SplitSpecial = wdPaneNone Then
            .ActivePane.View.Type = wdNormalView
        Else
            .View.Type = wdNormalView
        End If
    End With

    Set wdDoc = Nothing
    wdApp.Visible = True
    Set wdApp = Nothing
    Application.StatusBar = False

End Sub 
```

这与第一个代码完全相反：它将打开一个新文档（不是模板），将完美复制所有数据，但不会以正确的文件名保存或关闭。

我猜测更新代码部分 1 以复制工作表内容会更容易，这也是我更喜欢的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:00:53.653

```
Private Sub CopyRangeToWord(ByRef wdDoc As Word.Document, rng_to_copy As Range, Optional page_break As Boolean = True)
' Will copy the range given into the word document given.
    Application.StatusBar = "Copying data from " & rng_to_copy.Parent.Name & "..."
    rng_to_copy.Copy
    wdDoc.Paragraphs(wdDoc.Paragraphs.Count).Range.InsertParagraphAfter
    wdDoc.Paragraphs(wdDoc.Paragraphs.Count).Range.Paste
    Application.CutCopyMode = False
    wdDoc.Paragraphs(wdDoc.Paragraphs.Count).Range.InsertParagraphAfter
    ' insert page break after all worksheets except the last one
    If page_break Then
        With wdDoc.Paragraphs(wdDoc.Paragraphs.Count).Range
            .InsertParagraphBefore
            .Collapse Direction:=wdCollapseEnd
            .InsertBreak Type:=wdPageBreak
        End With
    End If

End Sub

Sub CopyWorksheetsToWord()

Dim wdApp As Word.Application, wdDoc As Word.Document, ws As Worksheet
    Application.ScreenUpdating = False
    Application.StatusBar = "Creating new document..."
    Set wdApp = New Word.Application
    Set wdDoc = wdApp.Documents.Add
    docname = Worksheets("input").Range("b10").Value

    With Worksheets("word")
        CopyRangeToWord wdDoc, .Range("A1:d104")

    With wdDoc
    .SaveAs ("C:\Results\" & docname & ".doc")
    .Close
    End With

    End With

End Sub 
```

这有效：但不能从我的模板中打开。尽管如此 - 它将从一个工作表创建一个文档，并自动将其保存到具有定义单元格中引用的文件名的目录中。

# client - Netsuite 客户端脚本 - 动态添加字段

> ID：12644602
> 
> 赞同：0
> 
> 时间：2012-09-28T17:22:58.293
> 
> 标签：client, netsuite

在 Netsuite 中，是否可以有一个在字段更改中动态添加字段的客户端脚本？我的例子是你有一个数量字段并且一旦被选中，那个数量的字段来指定每个项目的数量信息（例如序列号）？

从我读过的内容来看，我没有看到任何允许这样做的东西，但我想确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-12T07:19:47.557

您不能使用客户端脚本自定义表单。您可以使用客户端脚本执行的唯一操作如下：

• 初始化表格

• 在字段中输入或更改值（输入之前和之后）

• 在一个字段中输入或更改一个值，该值源自另一个字段

• 选择子列表中的行项目

• 添加行项目（输入之前和之后）

• 保存表格

• 搜索另一条记录

• 加载、保存或删除记录

您可以使用用户事件向表单添加字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:56:36.783

您不能通过客户端脚本向表单添加字段。您需要在加载之前在用户事件脚本上添加该字段。但是，您可以添加一个隐藏的 NS 文本字段。然后，您的客户端脚本可能会提示输入每个序列号的列表。在您的用户事件脚本中，您可以为这些数字解析该字段。

# winforms - VS2010 无法调试 WinForm 应用

> ID：12644606
> 
> 赞同：1
> 
> 时间：2012-09-28T17:23:09.443
> 
> 标签：winforms, visual-studio-2010, debugging, target-framework

我正在家用 PC 上的 VS2010 上开发一个 winform 应用程序。为了在我大学的计算机上对其进行测试，我刚刚将其目标框架从 .NET Framework 4.0 客户端配置文件更改为 .NET Framework 2.0。（默认选择 .NET Framework 4.0 客户端配置文件）。在此之后，我在家用 PC 上运行（调试）我的应用程序，它运行缓慢，因此我决定将其目标框架更改为以前的框架。

更改目标框架后，我无法调试我的应用程序（按 F5 后“构建成功”显示在最左下角）。虽然我可以通过按 ctrl+F5 来运行我的应用程序，但无法调试。我已经重新启动了我的 VS 2010，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:42:54.400

检查 msdn 链接， http: [//msdn.microsoft.com/en-us/library/bb398202.aspx](http://msdn.microsoft.com/en-us/library/bb398202.aspx)

我认为，VS 2010 仅包含 .NET Framework 4。要针对早期版本的 .NET Framework，您需要安装适当的框架。如果将其更改为 Framework 2.0，则需要安装它才能正常工作。

让我们知道，如果这解决了。

干杯

# sqlite - sqlite3 创建视图语法错误

> ID：12644607
> 
> 赞同：1
> 
> 时间：2012-09-28T17:23:10.487
> 
> 标签：sqlite

我写了一段 sqlite3 查询如下：

```
CREATE TABLE appearances(
    char_id int,
    comic_id int
); 
CREATE VIEW co-actors AS 
    SELECT a1.char_id,
           a2.char_id 
    FROM appearances AS a1 
    LEFT JOIN appearances AS a2 ON a1.comic_id=a2.comic_id; 
```

它不断在命令外壳中的“_”附近显示语法错误。有人可以帮我更正查询吗？谢谢~

还有一个问题，如果我想从刚刚创建的视图中进行选择，我该如何引用该列，比如 a1.char_id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:04:21.190

更改`co-actors`为`co_actors` You are using a `-`where you should be using a `_`.

# android - 如何在android上为基于用户帐户的应用程序存储数据

> ID：12644615
> 
> 赞同：0
> 
> 时间：2012-09-28T17:23:54.067
> 
> 标签：android, sharedpreferences, profile, social, feed

我正在搜索如何为基于用户帐户的 android 应用程序存储数据，阅读帐户管理器的开发人员 android 以及如何创建自定义帐户类型以识别登录用户。

但无法理解在哪里存储用户个人资料的数据以及要在用户登录屏幕上显示的提要。它是否应该存储在网络服务器上并从存储在网络上的数据库中识别登录用户的数据。Android 应用程序是如何像社交应用程序一样设计的。提前感谢任何愿意阅读并回复的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:26:39.787

您可以使用`SharedPreferences`

检查这些链接：

[http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

[http://mobile.tutsplus.com/tutorials/android/android-application-preferences/](http://mobile.tutsplus.com/tutorials/android/android-application-preferences/)

# php - 数据现在没有被插入数据库

> ID：12644621
> 
> 赞同：0
> 
> 时间：2012-09-28T17:24:12.310
> 
> 标签：php, sql, database, mysqli

我在下面有一个 mysqli/php 代码，假设将数据插入到“会话”表中。现在它用于插入数据之前没有问题，我没有更改以下代码：

```
if($_SERVER['REQUEST_METHOD'] == 'POST')        
{        
    $time = str_replace(array(' Hrs ', ' Mins ', ' Secs'), 
               array(':', ':', ''), $_SESSION['durationChosen']);        
    for ($i = 1, $n = $_SESSION['sessionNum']; $i <= $n; ++$i) 
    {               
            $insertsql = "
      INSERT INTO Session
        (SessionId, SessionTime, 
         SessionDate, SessionWeight, 
         SessionDuration, TotalMarks, 
         ModuleId, TeacherId, Room)
      VALUES
        (?, ?, ?, ?, ?, ?, ?, ?, ?)
    ";
    if (!$insert = $mysqli->prepare($insertsql)) {
      // Handle errors with prepare operation here
    }        
        $sessid = $_SESSION['id'] . ($n == 1 ? '' : $i);
        $sessdate = date("Y-m-d", strtotime($_SESSION['dateChosen']));

        $insert->bind_param("sssssssss", $sessid, 
          $_SESSION['timeChosen'], $sessdate,
          $_SESSION['textWeight'], $time, $_SESSION['textMarks'],
          $_SESSION['module'], $teacherid, $_SESSION['rooms']);

        $insert->execute();

        if ($insert->errno) {
          // Handle query error here
        }        
        $insert->close();        
    } 
} 
```

就像我说的这段代码之前工作过，从那以后我没有更改代码中的任何内容。但我不记得是否因为我更改了数据库（phpmyadmin）中的表，它没有将数据插入数据库。

任何人都可以在之前检查表创建并说明您是否发现任何问题？问题可能出在其他包含 SessionId 作为外键的表上吗？

下面是使用 SHOW CREATE TABLE Session 创建表：

```
CREATE TABLE `Session` (
 `SessionId` varchar(10) NOT NULL,
 `SessionTime` time NOT NULL,
 `SessionDate` date NOT NULL,
 `SessionWeight` int(3) NOT NULL,
 `SessionDuration` time NOT NULL,
 `TotalMarks` int(5) NOT NULL,
 `FileId` varchar(10) DEFAULT NULL,
 `ModuleId` varchar(10) NOT NULL,
 `TeacherId` int(4) NOT NULL,
 `Room` varchar(10) NOT NULL,
 PRIMARY KEY (`SessionId`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:01:54.247

根据您提供给我们的信息，我们必须做出以下假设：

*   您的逻辑流程是正确的，我们正在 if 和 for 循环中进行
*   $_SESSION 变量包含您声明的所有键

有了这些假设，变量 $teacherId 没有被设置，所以它的值为空。在您的表创建语句中，TeacherID 列不接受空值，因此插入失败。

# ruby-on-rails-3 - 避免 ActiveRecord 中的数据库命中

> ID：12644624
> 
> 赞同：0
> 
> 时间：2012-09-28T17:24:30.680
> 
> 标签：ruby-on-rails-3, activerecord, instance-variables

当我将数据库查找分配给 Rails 中的实例变量时，为什么将来对该变量的请求也会访问数据库？这可以避免吗？

例如，我有 3 个模型：User、Resource、Opinion，使用 has_many :through on Opinion

```
@opinions = current_user.opinions # pulls in all of the user's opinions, which include respective resource ids 
```

1、直接调用resource_id并没有命中数据库：

```
@opinions.each do |opinion|
  opinion.resource_id  # does not hit the database (as expected)
end 
```

2\. 执行查询确实会命中数据库（即使已分配变量）：

```
@opinions.find_by_resource_id(1) # DOES hit the database 
```

为什么#2 会命中数据库？有没有办法在不访问数据库的情况下执行相同的查找？

该信息已包含在 @opinions 变量中，因此似乎不需要进行 db 调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T21:26:02.390

如果您不需要`@opinions`数组中的任何其他内容，我会将您的原始查询范围限定为仅包含具有该内容的意见`resource_id`

```
@opinions = current_user.opinions.where("resource_id = ?", resource_id) 
```

如果您已经拥有`@opinions`并且只想创建一个与特定键/值匹配的新对象数组：

```
@opinions_with_resource_id = @opinions.select { |opinion| opinion.resource_id == 1234 } 
```

查看[this other answer](https://stackoverflow.com/questions/10069993/rails-filtering-array-of-objects-by-attribute-value)以获得其他解释，或者如果您想将答案拆分为多个数组。

## 想法

***评论你的最后一段代码***

像您所说的方法`find_by_*`是动态查找器，用于`method_missing`访问数据库并查看 *.

***上一个答案的剩余评论***

如果此对象需要访问 Resource 模型上的数据，请不要忘记该`#includes()`方法，这将使您不必在以后运行其他查询。

```
@opinions = current_user.opinions.includes(:resources) 
```

请参阅[http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)

# java - 从 JPA 中的嵌入类中创建一个可嵌入类的字段瞬态

> ID：12644626
> 
> 赞同：2
> 
> 时间：2012-09-28T17:24:58.580
> 
> 标签：java, hibernate, jpa, orm, annotations

我有以下一组课程

```
@Embeddable
public class SharedClass {
    ...
    private String legacyField;
    ...
}

@Entity
public class LongStandingEntity {
    ...
    private SharedClass sharedClass;
    ...
} 
```

Where`legacyfield`将一些过时的数据存储在旧对象中，但不为新对象收集。但是我确实需要能够继续访问旧数据。

我正在创建一个新实体，它也利用`SharedClass`

```
@Entity
public class NewEntity {
    ...
    private SharedClass sharedClass;
    ...
} 
```

它不需要`legacyField`，我想避免在数据库中为它添加一列，同时保持映射为`LongStandingEntity`.

JPA注释可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:25:39.400

我不记得可以帮助您的特定注释。我还是宁愿在这种情况下采取设计方法。如果您有仅属于某个类的字段，请将它们分隔在另一个仅与旧数据相关联的可嵌入类中。

对我来说似乎是一种更清洁的方法，只是为了保持实体的明显区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-12T11:30:48.517

我发现的一种解决方法是用参数 insertable=false 和 updatable=false 覆盖关联。

```
@Entity
public class NewEntity {
    ...
    @Embedded
    @AssociationOverride(name = "legacyField", joinColumns = @JoinColumn(insertable = false, updatable = false))
    private SharedClass sharedClass;
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-14T16:39:41.377

我解决了以下问题

```
@Entity
public class NewEntity {
    ...
    @AttributeOverrides({
        @AttributeOverride(name = "legacyField", column =  @Column(insertable = false, updatable = false))
    })
    @Embedded
    private SharedClass sharedClass;
    ...
} 
```

更新但读取实体时出现错误：列 new_entity_.legacyField 在字符 1504 处不存在

所以问题没有解决

# android - Android JavaCV 从相机创建 IplImage 以与 ColorHistogram 一起使用

> ID：12644627
> 
> 赞同：2
> 
> 时间：2012-09-28T17:25:04.103
> 
> 标签：android, javacv

我在 Android 中使用 JavaCV。
在我的代码中，我创建了一个 ImageComparator（OpenCV CookBook 类
[http://code.google.com/p/javacv/source/browse/OpenCV2_Cookbook/src/opencv2_cookbook/chapter04/ImageComparator.scala?repo=examples http://code.google.com/p/javacv/source/browse/OpenCV2_Cookbook/src/opencv2_cookbook/chapter04/ImageComparator.scala?repo=examples](http://code.google.com/p/javacv/source/browse/OpenCV2_Cookbook/src/opencv2_cookbook/chapter04/ImageComparator.scala?repo=examples)
[http:// /code.google.com/p/javacv/wiki/OpenCV2_Cookbook_Examples_Chapter_4](http://code.google.com/p/javacv/wiki/OpenCV2_Cookbook_Examples_Chapter_4)）对象并使用该对象来比较图像。如果我使用 SD 卡中的文件，则比较器正在工作。

```
File referenceImageFile = new File(absPath1); // Read an image.    
IplImage reference = Util.loadOrExit(referenceImageFile,CV_LOAD_IMAGE_COLOR);    
comparator = new ImageComparator(reference);    
comparator = new ImageComparator(reference); 
```

但是从相机预览中，当我创建 IplImage 时它不起作用。在比较“分数”计算期间，我收到以下异常。

score = referenceComparator.compare(grayImage) / imageSize; java.lang.RuntimeException: /home/saudet/android/OpenCV-2.4.2/modules/core/src/convert.cpp:1196: 错误: (-215) i < src.channels() in function void cvSplit(const无效*，无效*，无效*，无效*，无效*）

对于 CameraPreview，我使用 FacePreview 中的代码来创建 IplImage。但它以灰度创建图像。

```
int f = SUBSAMPLING_FACTOR;
        if (grayImage == null || grayImage.width() != width / f
                || grayImage.height() != height / f) {
            grayImage = IplImage.create(width / f, height / f, IPL_DEPTH_8U, 1);
        }
        int imageWidth = grayImage.width();
        int imageHeight = grayImage.height();
        int dataStride = f * width;
        int imageStride = grayImage.widthStep();
        ByteBuffer imageBuffer = grayImage.getByteBuffer();
        for (int y = 0; y < imageHeight; y++) {
            int dataLine = y * dataStride;
            int imageLine = y * imageStride;
            for (int x = 0; x < imageWidth; x++) {
                imageBuffer.put(imageLine + x, data[dataLine + f * x]);
            }
        } 
```

如何从相机创建 Color IplImage 以与 ImageComparator 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:23:31.897

我还没有测试过，但是这样的东西应该可以工作：

```
IplImage yuvimage = IplImage.create(width, height * 3 / 2, IPL_DEPTH_8U, 2);
IplImage rgbimage = IplImage.create(width, height, IPL_DEPTH_8U, 3);
cvCvtColor(yuvimage, rgbimage, CV_YUV2BGR_NV21); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T10:31:52.953

下面的代码似乎工作正常。

```
 public void onPreviewFrame(final byte[] data, final Camera camera) {
            try {
                Camera.Size size = camera.getParameters().getPreviewSize();
                processImage(data, size.width, size.height);
                camera.addCallbackBuffer(data);
            } catch (RuntimeException e) {
                // The camera has probably just been released, ignore.
                Log.d("Exception", " " + e);
            }
        }
protected void processImage(byte[] data, int width, int height) {
        score.clear();

        // First, downsample our image
        int f = SUBSAMPLING_FACTOR;
        IplImage _4image = IplImage.create(width, height, IPL_DEPTH_8U, f);

        int[] _temp = new int[width * height];

        if (_4image != null) {
            decodeYUV420SP(_temp, data, width, height);
            _4image.getIntBuffer().put(_temp);
        }

         //bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
         //bitmap.copyPixelsFromBuffer(_4image.getByteBuffer());

        Log.d("CompareAndroid", "processImage");
        int imageSize = _4image.width() * _4image.height();
        Iterator<ImageComparator> iterator = reference_List.iterator();
        // Compute histogram match and normalize by image size.
        // 1 means perfect match.

    while(iterator.hasNext()){
        score.add(((ImageComparator) iterator.next()).compare(_4image) / imageSize);
    }
        Log.d("CompareImages", "Score Size "+score.size());
        postInvalidate();
    }

This code seems to be working fine.

    private void decodeYUV420SP(int[] rgb, byte[] yuv420sp, int width,
            int height) {
        int frameSize = width * height;
        for (int j = 0, yp = 0; j < height; j++) {
            int uvp = frameSize + (j >> 1) * width, u = 0, v = 0;
            for (int i = 0; i < width; i++, yp++) {
                int y = (0xff & ((int) yuv420sp[yp])) - 16;
                if (y < 0)
                    y = 0;
                if ((i & 1) == 0) {
                    v = (0xff & yuv420sp[uvp++]) - 128;
                    u = (0xff & yuv420sp[uvp++]) - 128;
                }
                int y1192 = 1192 * y;

                int r = (y1192 + 1634 * v);
                int g = (y1192 - 833 * v - 400 * u);
                int b = (y1192 + 2066 * u);

                if (r < 0)
                    r = 0;
                else if (r > 262143)
                    r = 262143;
                if (g < 0)
                    g = 0;
                else if (g > 262143)
                    g = 262143;
                if (b < 0)
                    b = 0;
                else if (b > 262143)
                    b = 262143;

      rgb[yp] = 0xff000000 | ((b << 6) & 0xff0000) | ((g >> 2) & 0xff00) | ((r >> 10) & 0xff);
            }
        }
    } 
```

# java - ListView 内部布局

> ID：12644628
> 
> 赞同：0
> 
> 时间：2012-09-28T17:25:04.760
> 
> 标签：java, android, arrays, string, listview

我需要一些帮助来在我拥有的布局中创建一个列表视图。我有正确创建它的 torubles。

这是我到目前为止得到的。

```
item.xml

   <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/listview"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/list_selector" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/gradient_bg"
        android:src="@drawable/gs3ultimate" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/label"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/thelistarray"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#555555" />

        <TextView
            android:id="@+id/summary"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/thelistarry_details"
            android:textColor="#555555"
            android:textSize="10dp" />

    </LinearLayout>

</LinearLayout>

</LinearLayout> 
```

现在它只是左侧的图像，然后是 2 个文本视图，现在我相信我需要 2 个字符串数组，一个用于标题，第二个用于详细信息。我认为图像是第三个。那正确吗？

```
 Here some java for my list view 
```

AndroidListViewActivity.java

```
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class AndroidListViewActivity extends ListActivity {
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);

    // storing string resources into Array
    String[] list_array = getResources().getStringArray(R.array.list_array);

    // Binding resources Array to ListAdapter
    this.setListAdapter(new ArrayAdapter<String>(this, R.layout.item, R.id.label, list_array));

    ListView lv = getListView();

    // listening to single list item on click
    lv.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> parent, View view,
          int position, long id) {

         }
       });
      }
   } 
```

我知道我的 java 缺少添加详细信息 list_array_details。而且我不知道如何添加它以便填充。我还没有为我的意图使用 onitemclick。但是我会确定哪个是点击以及要启动什么活动？例子。我单击列表项 b 并想要喜欢活动“b”，但是当我单击 a 时，它会启动活动“a”

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:43:38.803

为此，您需要一个自定义适配器来填充文本视图或多个文本视图以外的其他视图。

[在此处](http://codinglookseasy.blogspot.in/2012/07/custom-list-view.html)和[此处](http://docs.xamarin.com/android/recipes/Data/Adapters/Create_a_Custom_Adapter_for_Contacts)查看 customadapter

# iphone - 如何在 iPhone SDK 中录制音频

> ID：12644635
> 
> 赞同：1
> 
> 时间：2012-09-28T17:25:48.083
> 
> 标签：iphone, audio, record

> **可能重复：**
> [如何通过 iPhone 应用程序录制音频？](https://stackoverflow.com/questions/5602901/how-to-record-audio-through-an-iphone-app)

我想在 iphone 应用程序中录制音频 10 秒，然后如何在给定的时间限制内录制音频。

# java - 上一篇文章缺少代码，因此重新发布 - 新手 Java 代码。（Sams Java 24 小时内）

> ID：12644637
> 
> 赞同：-5
> 
> 时间：2012-09-28T17:25:51.360
> 
> 标签：java, applet

我正在按照上面提到的书中的指南进行操作，尽管下面的代码不起作用。它在第 12 行和第 15 行给了我一个错误。据我所知，代码与指南的代码完全匹配，所以任何人都可以看到我犯的任何明显错误吗？我正在使用netbeans。谢谢。

```
import java.awt.*;

public class HourFourThree extends javax.swing.JApplet {
    int number;

    public void init() {
        number = 225;
    }

   public void paint(Graphics screen) {
       Graphics2D screen2D = (Graphics2D) screen;
       screen2D.drawString("The square root of ") +
               number +
               " is " +
               Math.sqrt(number), 5, 50);
   } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:28:00.190

太多的括号：

```
screen2D.drawString("The square root of ") + 
```

改成：

```
screen2D.drawString("The square root of " + 
```

Netbeans 可能已经向您展示了无与伦比的paren。

# asp.net-mvc - MVC 编辑器/显示模板的官方“如何”？

> ID：12644640
> 
> 赞同：12
> 
> 时间：2012-09-28T17:26:01.953
> 
> 标签：asp.net-mvc, asp.net-mvc-3, mvc-editor-templates

我已经使用 MVC 编辑器和显示模板有一段时间了，但我意识到关于 MVC 编辑器/显示模板（Html.EditorFor() 和 Html.DisplayFor()）的官方文档似乎很少。我发现基本的[MSDN 文档](http://msdn.microsoft.com/en-us/library/ee834942%28v=vs.108%29.aspx)只显示了技术细节（它们本身并不是很有帮助），但我正在寻找更多的官方方法，有点像[这个例子](http://msdn.microsoft.com/en-us/library/gg508808%28VS.98%29.aspx)。

编辑器/显示模板是否更多的是事后的想法，并没有真正广泛地用于证明更深入的官方文档的合理性？

或者，我是不是瞎了，我要找的东西是存在的，只是还没找到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T18:20:50.280

官方文件？不知道任何副手，但我知道有很多例子。特别是，我喜欢*Phil Haack 关于模型绑定*到列表的讨论。它包含一个非常复杂的示例中的编辑器模板示例。那里也有源代码。

由于他是所有 MVC Wrox 书籍的合着者，我认为他是一个非常权威的来源：

[http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

这是另一篇类似的博客文章（非官方）：

[http://blogs.msdn.com/b/stuartleeks/archive/2010/03/30/collections-and-asp-net-mvc-templated-helpers-displayfor-editorfor.aspx](http://blogs.msdn.com/b/stuartleeks/archive/2010/03/30/collections-and-asp-net-mvc-templated-helpers-displayfor-editorfor.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-24T15:48:51.840

我找到的最好的文章是：

[http://www.growthwiththeweb.com/2012/12/aspnet-mvc-display-and-editor-templates.html](http://www.growingwiththeweb.com/2012/12/aspnet-mvc-display-and-editor-templates.html)

它解释了如何很好地创建`DisplayFor`和模板。`EditorFor`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T18:06:35.110

[ASP.NET MVC 在http://www.asp.net/mvc](http://www.asp.net/mvc)上有很多资料，有不同的例子。`EditorTemplates`并且`DisplayTemplates`是模型的特殊文件夹（例如此处[关于 ASP.NET MVC 的快速提示 – 编辑器模板](http://blogs.msdn.com/b/nunos/archive/2010/02/08/quick-tips-about-asp-net-mvc-editor-templates.aspx)），并且您询问的是`html helpers`，而不是模板。

# java - 下面的代码是什么意思？

> ID：12644642
> 
> 赞同：0
> 
> 时间：2012-09-28T17:26:04.870
> 
> 标签：java, android

```
public View getView(int position, View convertView, ViewGroup parent)
{   
    ImageView img;
    if (convertView == null) 
    {  // if it's not recycled, initialize some attributes
        img = new ImageView(mContext);
        img.setLayoutParams(new GridView.LayoutParams(85, 85));
        img.setScaleType(ImageView.ScaleType.CENTER_CROP);
        img.setPadding(8, 8, 8, 8);
    } 
    else
    {
        img = (ImageView) convertView;
    }

    img.setImageResource(mThumbId[position]);
    return img;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T17:32:54.617

这似乎是定义列表条目视图的`ListAdapter`or的一部分。`BaseAdapter`调用时，`position`是正在填充的项目的列表中的索引，`convertView`或者是要重用的旧视图，或者是 null（您必须在其中分配它）。

返回`ImageView`的 ,`img`是将添加到`ListView`,`GridView`或任何其他的视图`AdapterView`。

# html - DIV（css）上的悬停问题

> ID：12644647
> 
> 赞同：3
> 
> 时间：2012-09-28T17:26:32.540
> 
> 标签：html, css

我正在尝试使用 div 做一个非常简单的按钮。一切都很好，除了当鼠标光标移到按钮上时，文本应该变成黑色，背景颜色是白色......但是目前，我必须将鼠标光标放在文本上才能看到它变成黑色。

这是我的 CSS 代码：

```
.pledges_boutons {
    width: 157px;
    color: #fff;
    font-family: "Arial Black", Gadget, sans-serif;
    font-size: 11px;
    height: 18px;
    text-align: center;
    margin-right: 10px;
    margin-left: 10px;
    margin-top: 5px;
    margin-bottom: 5px;
    text-decoration: none;
    display: block;
    background-color: #868686;
    } 
```

和悬停：

```
.pledges_boutons:hover {
    color: #000;
    cursor: pointer;
    background-color: #fff;
}​ 
```

HTML：

```
<div class="pledges_boutons">
   <a href="http://www.google.com">Click here</a>
</div>​ 
```

这是我的[小提琴](http://jsfiddle.net/6JCWn/)

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T17:29:43.223

代替：

```
.pledges_boutons:hover { 
```

和：

```
.pledges_boutons:hover, .pledges_boutons:hover a { 
```

这样就可以了；-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T17:30:22.970

有多种方法可以处理这个问题，但本质上你需要提供一个足够具体的选择器来覆盖父级悬停时锚点的样式。

示例：http: [//jsfiddle.net/6JCWn/1/](http://jsfiddle.net/6JCWn/1/)

```
.pledges_boutons:hover a {
    color: #000;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T17:32:46.070

这是因为您专门将链接设置为白色：

```
.pledges_boutons a:link {
    text-decoration:none;
    color:#fff;
} 
```

该链接使用比以下更具体的选择器设置为白色：

```
.pledges_boutons:hover {
    color: #000;
    cursor: pointer;
    background-color: #fff;
}​ 
```

所以你想要做的就是把它改成

```
.pledges_boutons:hover,
.pledges_boutons:hover a {
    color: #000;
    cursor: pointer;
    background-color: #fff;
}​ 
```

一旦你这样做了，你可以直接删除它上面的规则，因为它会变得多余：

```
.pledges_boutons a:hover {
    color:#000;
    background-color:white;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-28T17:31:37.010

`ctrl`+`F5`清除浏览器页面缓存；浏览器缓存 css 文件。

# javascript - MooTools 中的 `Object.merge(...)` 和 `Object.append(...)` 有什么区别？

> ID：12644649
> 
> 赞同：2
> 
> 时间：2012-09-28T17:26:38.310
> 
> 标签：javascript, mootools

似乎是一个简单的问题，但是这两种方法的 MooTools 文档看起来是相同的。

这是文档中的代码：

```
var firstObj = {
    name: 'John',
    lastName: 'Doe'
};
var secondObj = {
    age: '20',
    sex: 'male',
    lastName: 'Dorian'
};
Object.append(firstObj, secondObj);
//firstObj is now: {name: 'John', lastName: 'Dorian', age: '20', sex: 'male'}; 
```

如果我更改`append`为`merge`，我会得到相同的结果。那么有什么区别呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T17:51:19.420

我能看到的唯一区别是它`append`采用两个参数，并且`merge`采用两个或多个参数。

### 编辑：

阅读方法的源代码，我看到了另一个不同之处。该`merge`方法将从其他对象克隆属性，而该`append`方法仅复制它们。

因此，如果您在某些对象中有一个对象或数组作为属性，则在使用后可以从原始对象访问这些对象`append`：

```
var firstObj = {
    name: 'John',
    lastName: [ 'Doe' ]
};
var secondObj = {
    age: '20',
    sex: 'male',
    lastName: [ 'Dorian' ]
};

//Object.merge(firstObj, secondObj);
Object.append(firstObj, secondObj);

console.log(firstObj.lastName[0]); // Dorian

secondObj.lastName[0] = 'McEnroe';

console.log(firstObj.lastName[0]); // McEnroe 
```

如果`merge`改为使用，则更改时数组项 in`furstObj.lastName`不会更改`secondObj.lastName`，因为它们不是同一个对象。

小提琴：http: [//jsfiddle.net/Guffa/PrsXj/](http://jsfiddle.net/Guffa/PrsXj/)

此外，`merge`当第二个参数是字符串时，该方法具有重载：

```
merge(obj, "name", obj2) 
```

那只会将属性复制`obj2.name`到`obj`，即与 基本相同`merge(obj, { name: obj2.name })`。

# database-design - 将没有模式的文件加载到数据库

> ID：12644653
> 
> 赞同：1
> 
> 时间：2012-09-28T17:26:58.557
> 
> 标签：database-design, file-upload, batch-file

我正在重新设计一个数据库，我对今天使用的一种我想替换的方法感到非常不舒服。

在不同时间从没有定义格式的 *.csv 文件加载大量数据。数量与不同的客户有关

所以方法是为每个新客户创建一个表并保持它不断加载。问题是不断为每个客户创建新表，并且它们不匹配并且难以管理和查询。

我已经考虑过创建一个表，其中包含所有数据和一些列来控制它们来自哪个客户/表，但我仍然认为这可能会创建一个太大的表，因为它更难管理或变慢尺寸。

关于加载非常规格式的文件，我是否可能缺少其他任何方法？非常规，我的意思是每个文件可以有不同的列（数量和格式）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:59:22.263

这是一个应用程序，我将使用数据库来管理 *.csv 文件，但我不会将 *.csv 文件放入数据库中。我用照片数据库做了类似的事情。

基本上，我会用一张表来管理 *.csv 文件。

```
CSV Files
---------
File ID
Customer ID
Template location on disk
CSV file location on disk 
```

文件 ID 是一个自动递增的整数。客户 ID 是一个指向客户表的整数。

磁盘上的模板位置是一个指向磁盘上模板位置的字符串。该模板是一个平面文件，按列顺序列出相应 CSV 文件中的列。模板文件的格式取决于您，尽管您的 CSV 引擎必须处理它。此模板是为没有列标题的 CSV 文件手动创建的，并且可以通过编程方式为具有列标题的 CSV 文件创建。

磁盘上的 CSV 文件位置是指向磁盘上 CSV 文件位置的字符串。

您可以在此表上有其他重要列，例如 CSV 文件收到的时间戳。我已将这些字段关闭以使解释更简单。

对于您要查询的每个 CSV 文件，您将从数据库中读取 CSV 文件行。然后您的 CSV 引擎将：

*   阅读模板
*   处理 CSV 文件
*   返回所需的结果，如果此模板不包含所需的列，则返回 null。

数据库将维护磁盘上模板和 *.csv 文件的索引。CSV 引擎将处理模板和 *.csv 文件，返回所需的信息。

# objective-c - init 方法中常用的基本 Objective-C 语法

> ID：12644657
> 
> 赞同：0
> 
> 时间：2012-09-28T17:27:18.697
> 
> 标签：objective-c, syntax, parentheses

> **可能重复：**
> [示例代码中的双括号](https://stackoverflow.com/questions/3323257/double-parentheses-in-sample-code)

通常，`init`Objective-C 类中的方法将具有以下行：

```
if ((self = [super init])) { ... 
```

我只是想知道是否需要额外的括号。以下行是否等效？

```
if (self = [super init]) { ... 
```

**编辑：**这确实是[示例代码中双括号的副本](https://stackoverflow.com/questions/3323257/double-parentheses-in-sample-code)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T17:29:04.080

它们不是必需的，但使用`((`并`))`说“是的，我的意思是分配，而不是比较”。

事实上，clang 会警告你不要在 if 条件下使用赋值，并建议使用双括号来明确。

一般来说，我认为这可能被认为是糟糕的编码风格，但这里有一个例外，因为这是 obj-c 中一种特殊的常用模式

# asp.net - 什么时候使用 FileUpload 控件上传文件？

> ID：12644658
> 
> 赞同：0
> 
> 时间：2012-09-28T17:27:20.877
> 
> 标签：asp.net, .net, file-upload

如果您将 asp:FileUpload 控件放在页面上，请浏览到文件，然后提交表单。提交表单时文件是否上传到服务器？

我已经看到了大量的文件上传示例，其中文件被传递到文件流并上传。

我不明白什么时候发生的。单击“上传”按钮后，代码将在服务器上执行。因此，FileUpload 控件使用 FileUpload.PostedFile（或 httpFileCollection）提供的文件（文件名？文件路径？）......是在提交表单时上传的吗？服务器如何访问客户端计算机上的文件，以便可以使用文件流上传文件。

我不明白。我一直在阅读文件流以块的形式传递（可以传递）数据 - 有助于绕过对文件大小等的限制，但是，正如我上面所说，文件何时/如何上传到服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:34:32.620

该`<asp:FileUpload>`控件呈现一个`<input type="file">`，并将表单的内容类型设置为`multipart/form-data`。

当浏览器用 提交 a`<form>`时`<input type="file">`，它会在 HTTP POST 中将整个文件发送到服务器（这是内容类型的一部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T22:37:05.663

当您单击上传时，将提交 html 表单并向服务器发送一个 post 请求。

它实际上并没有向您发送您可以直接存储的某种“文件”对象，只是以字节为单位的文件内容和一些元数据，如文件名。

在服务器上，您必须处理此请求：您必须将字节读入实际文件以正确存储它。

在您提到的示例中，这就是 HttpPostedFile 的用途。

# jquery - 追加下一页而不是在jquery mobile中重新加载

> ID：12644663
> 
> 赞同：0
> 
> 时间：2012-09-28T17:27:44.173
> 
> 标签：jquery, jquery-mobile, navigation, append

单击按钮时，jquery mobile 中默认和最常用的行为是隐藏/销毁当前页面并加载引用页面。

在一个项目中，我使用上滑过渡，我想保留整个当前页面，并在按下按钮后追加下一页。

我创建了这个小提琴用于说明（具有正常行为）：

[http://jsfiddle.net/HSmft/5/](http://jsfiddle.net/HSmft/5/)

有没有办法这样做？

因此，如果我按下后退按钮，只有最后一页应该被隐藏。应该总是可以向上滚动到已经访问过的页面。我很抱歉我的英语不好。希望大家理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T23:13:22.740

是的，您可以这样做，查看 jQM 的`hashListeningEnabled`选项，您需要将其关闭并自己处理。

基本上，当您导航到 jQM 中的页面时，它会使用 # 哈希之后的值跟踪 url 中的页面。现在有趣的是，浏览器将一个新的哈希计为一个新页面，即使从技术上讲您仍然在同一页面上——jQM 通常会轮询这个值，如果它发生变化，就会显示正确的页面。**当您按下浏览器时，它会记住最后一个哈希值，这是您想要的关键**

无论如何，您需要做的是，当用户向上滑动新内容时，您更改哈希值，这样当他们按下“返回”时，您可以处理它并带回以前的内容

# php - 设置基于 MySQL 值选择的下拉列表

> ID：12644666
> 
> 赞同：0
> 
> 时间：2012-09-28T17:28:00.053
> 
> 标签：php, mysql

> **可能重复：**
> [页面加载时已在下拉列表中选择了一个选项，并且还可以更改](https://stackoverflow.com/questions/12068830/an-option-already-selected-on-page-load-in-drop-down-list-and-also-changeble)

我有一个下拉列表：

```
<select name="province">
                <option value="Alberta">Alberta</option>
                <option value="British Columba">British Columba</option>
                <option value="Manitoba">Manitoba</option>
                <option value="New Brunswick">New Brunswick</option>
                <option value="Newfoundland">Newfoundland</option>
                <option value="N.W. Territories">N.W. Territories</option>
                <option value="Nova Scotia">Nova Scotia</option>
                <option value="Ontario">Ontario</option>
                <option value="Prince Edward Island">Prince Edward Island</option>
                <option value="Saskatchewan">Saskatchewan</option>
                <option value="Yukon Territory">Yukon Territory</option>
                <option value="Quebec">Quebec</option>
</select> 
```

该表单将选择提交到 MySQL 数据库。这是个人资料页面。当用户返回此配置文件页面以更改选择时，他的选择（从 MySQL 中获取）应显示为选中。任何想法如何实现这一目标？

IE。再次加载配置文件页面时，检查数据库，获取字段，将其与列表进行比较，然后选择该值作为选定值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T20:46:01.833

你有正确的逻辑，去做吧！

```
 <?php
        $province_array = array('Alberta', 'British Columba', ......, 'Quebec');

        echo '<select name="province">';
        //get the user's setting with user_id from DB. You should get this before this script.
        $sql = "SELECT user_province FROM the_table WHERE user_id=$user_id;";
        $query = mysql_query($sql, $the_connection) or die (mysql_error());
        if($row = mysql_fetch_assoc($query)) {
          $user_province = $row['user_province']; 
           foreach($province_array as $value) {
         if ($value == $user_province) { //if the province==the user's setting, make it default 
           echo '<option value="'.$value.'" selected="selected">'.$value.'</option>';
         } else { //else, echo it as regular
           echo '<option value="'.$value.'">'.$value.'</option>';
         }
       }
    }
    echo '</select>';
    ?> 
```

1.  建立与数据库的连接。
2.  确保您可以获得类似“user_id”的任何内容来区分不同的用户省与数据库。
3.  然后是样本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:57:52.683

这是我要做的：

在显示表单之前初始化变量。

```
if ($_SERVER['REQUEST_METHOD'] == "POST") {  // if we're getting info from the form
    $defaultProvince = $_POST['province'];    // set the province to the selected pulldown
} else {
    $defaultProvince = "";                   // otherwise default to an empty string
}

$provinces = ("Alberta",                     // set up the provinces array
              "British Columbia",
              "Manitoba",
              "New Brunswick",
              ....
              ); 
```

然后在表单显示例程中我会添加：

```
echo '<select name="province">\n';
foreach ($provinces as $province) {         // run through our array of provinces
    echo '   <option value="$province"';
    if ($province === $defaultProvince) {   // if the default province matches this particular array province
                                            // then we'll select it
         echo ' selected="selected"'        // xhtml 1.0 Strict/1.1 compliant
    }
    echo '>$province</option>\n';
}
echo '</select>\n'; 
```

# php - 检测 MYsql 表中的单词数量

> ID：12644669
> 
> 赞同：0
> 
> 时间：2012-09-28T17:28:27.577
> 
> 标签：php, mysql

我正在建立一个搜索引擎。当用户在我的引擎中输入他们的搜索时，我的脚本只检查语句中的单词，如果它们匹配关键字......返回结果。但是如果 iPad 被搜索，Apple 因为是更高的排名，在 Apple.com 的 iPad 官方网站之前返回怎么办。我已经开始使用全文搜索，但它仍然有点前卫。有任何想法吗？ 

```
$query = " SELECT * FROM scan WHERE ";

$terms = array_map('mysql_real_escape_string', $terms);
$i = 0; 
foreach ($terms as $each) {
    if ($i++ !== 0){
        $query .= " AND "; 
    }
    $query .= "Match(title, description, keywords, link) Against ('%{$each}%') ";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:33:35.310

在进行全文搜索时，您不需要在 where 子句中将每个关键字添加到其自己的“匹配”语句中。你可以说`Match(title, description, keywords, link) Against ('ipod apple')`。它将匹配“反对”部分中的每个单词并相应地对它们进行排名。您还可以进行[布尔匹配](http://dev.mysql.com/doc/refman/5.0/en/fulltext-boolean.html)，您可以使用诸如“+”（）之类的关键符号对特定单词进行加权`+SomeWord`，以使该单词在结果中是必需的，“-”（`-SomeWord`）使该单词在结果中不允许出现......等等。

# guava - 番石榴和 javafx

> ID：12644670
> 
> 赞同：2
> 
> 时间：2012-09-28T17:28:28.713
> 
> 标签：guava, google-apps, google-contacts-api

我正在编写一个 javafx 应用程序来检索谷歌联系人。

在使用 netbeans 清理和构建应用程序并在我的网络浏览器（firefox）中执行应用程序后，一切顺利，但是当应用程序位于不同的服务器中时，应用程序会抛出带有“com.google.common.collect”的“ClassCircularityError”。多组”。

此错误仅在应用程序尝试执行下一个代码时发生：

```
ContactFeed result = service.getFeed(url, ContactFeed.class); 
```

这是错误：

```
java.lang.ClassCircularityError: com/google/common/collect/Multisets
at com.google.common.collect.AbstractMultiset.iterator(AbstractMultiset.java:64)
at com.google.common.collect.ConcurrentHashMultiset.iterator(ConcurrentHashMultiset.java:57)
at com.google.gdata.client.SimpleCookieManager.getCookies(SimpleCookieManager.java:72)
at com.google.gdata.client.GoogleService.getCookies(GoogleService.java:530)
at com.google.gdata.client.http.GoogleGDataRequest$GoogleCookieHandler.get(GoogleGDataRequest.java:358)
at sun.net.www.protocol.http.HttpURLConnection.setCookieHeader(HttpURLConnection.java:1180)
at sun.net.www.protocol.http.HttpURLConnection.writeRequests(HttpURLConnection.java:612)
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1320)
at sun.net.www.protocol.http.HttpURLConnection.getHeaderFields(HttpURLConnection.java:2683)
at com.google.gdata.client.http.HttpGDataRequest.isOAuthProxyErrorResponse(HttpGDataRequest.java:566)
at com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:557)
at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:538)
at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:536)
at com.google.gdata.client.Service.getFeed(Service.java:1135)
at com.google.gdata.client.Service.getFeed(Service.java:1077)
at com.google.gdata.client.GoogleService.getFeed(GoogleService.java:676)
at com.google.gdata.client.Service.getFeed(Service.java:1034)
at mypackage.myApp.start(myApp.java:51)
at com.sun.javafx.applet.FXApplet2$1.run(FXApplet2.java:131)
at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:173)
at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:76) 
```

“com.google.common.collect.Multisets”在番石榴里面。

当一切都位于不同的服务器而不是我的本地计算机中时，我不知道为什么应用程序会失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T08:35:31.897

看起来您在类路径上有多个版本的 Guava 类，导致类加载期间出现错误。确保你的类路径中没有多个版本的 guava jar，或者 guava.jar 和 google-collections.jar（旧项目）。并检查 gdata 客户端 jar 是否嵌入了番石榴的副本。

# jdbc - 单击 JButton 以创建数据库时线程“AWT-EventQueue-0”java.lang.NullPointerException 中的异常

> ID：12644671
> 
> 赞同：0
> 
> 时间：2012-09-28T16:23:12.320
> 
> 标签：jdbc

我是 java 和 JDBC 用法的新手。我正在编写我的第一个连接到数据库的 Java 应用程序。但是当我单击执行数据库创建的 JButton 时出现此错误。但我得到这个错误：

```
 $run:Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at data.eceunnrecords.com.DBOptions.executeNonQuery(DBOptions.java:70)
at portal.eceunnrecords.com.CreateDatabase.createButtonActionPerformed(CreateDatabase.java:81)
at portal.eceunnrecords.com.CreateDatabase.access$000(CreateDatabase.java:13)
at portal.eceunnrecords.com.CreateDatabase$1.actionPerformed(CreateDatabase.java:42)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
at java.awt.Component.processMouseEvent(Component.java:6263)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3267)
at java.awt.Component.processEvent(Component.java:6028)
at java.awt.Container.processEvent(Container.java:2041)
at java.awt.Component.dispatchEventImpl(Component.java:4630)
at java.awt.Container.dispatchEventImpl(Container.java:2099)
at java.awt.Component.dispatchEvent(Component.java:4460)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4574)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168)
at java.awt.Container.dispatchEventImpl(Container.java:2085)
at java.awt.Window.dispatchEventImpl(Window.java:2475)
at java.awt.Component.dispatchEvent(Component.java:4460)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:599)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

这是我的代码：

```
 $/** To change this template, choose Tools | Templates
  * and open the template in the editor.
  */
  package portal.eceunnrecords.com;
  import portal.eceunnrecords.com.*;
  import data.eceunnrecords.com.*;

 /**
  *
  * @author OPTHINKERS
  */
  public class CreateDatabase extends javax.swing.JFrame {

/**
 * Creates new form CreateDatabase
 */
public CreateDatabase() {
    initComponents();
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    jLabel1 = new javax.swing.JLabel();
    createdbtf = new javax.swing.JTextField();
    createButton = new javax.swing.JButton();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jLabel1.setText("Database Name:");

    createButton.setText("Create");
    createButton.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            createButtonActionPerformed(evt);
        }
    });

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(78, 78, 78)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                .addComponent(createButton)
                .addGroup(layout.createSequentialGroup()
                    .addComponent(jLabel1)
                    .addGap(18, 18, 18)
                    .addComponent(createdbtf, javax.swing.GroupLayout.PREFERRED_SIZE, 80, javax.swing.GroupLayout.PREFERRED_SIZE)))
            .addContainerGap(144, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(110, 110, 110)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel1)
                .addComponent(createdbtf, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(18, 18, 18)
            .addComponent(createButton)
            .addContainerGap(129, Short.MAX_VALUE))
    );

    pack();
}// </editor-fold>                        

private void createButtonActionPerformed(java.awt.event.ActionEvent evt) {                                             
    // TODO add your handling code here:
    String query = "Create Table "+this.createdbtf.getText()+"(REG_NO VARCHAR (10)"
            + "NOT NULL PRIMARY KEY, SURNAME VARCHAR (45) NOT NULL, FIRSTNAME VARCHAR (45) "
            + "NOT NULL, MIDDLENAME VARCHAR (45) NOT NULL, LEVEL INT NOT NULL, STATE_OF_ORIGIN "
            + "VARCHAR (25) NOT NULL, PHONE_NO INT NOT NULL, EMAIL VARCHAR (50) NOT NULL);";
    DBOptions.executeNonQuery(query);
}                                            

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /*
     * Set the Nimbus look and feel
     */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /*
     * If Nimbus (introduced in Java SE 6) is not available, stay with the
     * default look and feel. For details see
     * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(CreateDatabase.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(CreateDatabase.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(CreateDatabase.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(CreateDatabase.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /*
     * Create and display the form
     */
    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new CreateDatabase().setVisible(true);
        }
    });
}
// Variables declaration - do not modify                     
private javax.swing.JButton createButton;
private javax.swing.JTextField createdbtf;
private javax.swing.JLabel jLabel1;
// End of variables declaration 
```

}

这是与我的数据库通信的 DBOptions 类：

```
 $package data.eceunnrecords.com;
  import java.sql.*;
  import javax.swing.*;

  public class DBOptions {
 /**
 * static variable con is used to hold the active connection information.
 */
 public static Connection con = null;
/**
 *This method is used to make a connection with the database
 * @param strHost holds host name or ip address
 * @param iPort holds port number
 * @param strDBName holds the database name
 * @param strUserName holds username to connect to server
 * @param strPassword holds password to connect to server
 * @return true for establishing connection and false for failure.
 */
public static boolean connect(String strHost, int iPort,String strDBName, String strUserName, String strPassword)
{
    try
    {
        //loading mysql jdbc driver
        Class.forName("com.mysql.jdbc.Driver");
        //connection string
        String url="jdbc:mysql://"+strHost+":"+iPort+"/"+strDBName;
        //establishing connection
        con=DriverManager.getConnection(url, strUserName,strPassword);
        return true; //successfully connected
    }
    catch(Exception e)
    {
        return false; //connection failed
    }
}
/**
 * This method is used to close the database connection
 * @param dbCon holds the active connection information
 */
public static void closeConnection(Connection dbCon)
{
    try
    {
        dbCon.close(); //close connection
    }
    catch(Exception e)
    {

    }
}
/**
 * This method is used to execute an sql non query
 * @param sqlString holds the sql non query to be executed
 * @return the number of rows affected
 */
public static int executeNonQuery(String sqlString)
{
    try
    {
        Statement stmt = con.createStatement();
        return stmt.executeUpdate(sqlString);
        //return the number of rows affected
    }
    catch(SQLException e)
    {
        //display error message
        //JOptionPane.showMessageDialog(null,  e.getMessage()+"\nPlease Try Again","Non Query Execution Failure", 1);
        return -1;
    }
}
/**
 * This method is used to execute an sql query
 * @param sqlQuery holds the sql query
 * @return the ResultSet if successful. Return null on failure
 */
public static ResultSet executeSQLQuery(String sqlQuery)
{
    try
    {
        Statement stmt = con.createStatement();
        return stmt.executeQuery(sqlQuery); //query successfully executed
    }
    catch(SQLException e)
    {
        //display error message
        //JOptionPane.showMessageDialog(null, e.getMessage()+"\nPlease Try Again","Query Execution Failure", 1);
        return null; //sql query execution failed
    }
} 
```

}

请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T20:07:19.780

似乎抛出 NullPointerException 的行是这一行：

```
 Statement stmt = con.createStatement(); 
```

如果这是抛出 NullPointerException，那么您的静态变量`con`必须是`null`.

我看不到您正在创建数据库连接功能的任何地方`connect()`。据我所知，您收到错误是因为您在未连接到数据库时尝试在数据库中创建表。

或者，也许您正在调用`connect()`一些您选择不与我们共享的代码。在这种情况下，我猜您无法连接到数据库。但是，您方法中的以下代码`connect()`对于找出问题所在非常无用：

```
catch(Exception e)
{
    return false; //connection failed
} 
```

您的数据库连接失败的原因有很多，但是默默地吞下所有异常使得找出问题所在变得异常困难。`e.printStackTrace();`在该`catch`块中添加一行（在该`return`行之前），这将打印出导致数据库连接失败的异常。

# objective-c - 结构如何通过值传递？

> ID：12644673
> 
> 赞同：3
> 
> 时间：2012-09-28T17:28:43.680
> 
> 标签：objective-c, parameter-passing, structure

*David Chisnall*的“ *Objective-C for Java Programmers，第 1 部分*”介绍说

 *> 与总是按引用传递的对象不同，结构通常按值传递。

我对 Objective-C（来自 C++）非常陌生，所以我很难理解这一点。在 C++ 中，我可以通过指针或引用传递结构，但不能通过值传递（可能是因为它非常低效）。

Objective-C 是如何做到这一点的？它真的以类似堆栈的方式一个一个地推动所有结构成员吗？

如果结构由大型/复杂的对象组成，会发生什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T17:32:00.547

是的，它会复制整个结构，并将这个传递给调用函数，所做的任何修改都不会影响原始结构。而缺点当然是因为速度慢，而且还要消耗两倍的空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T17:36:00.437

它将所有结构成员复制到堆栈中。请记住，结构中的复杂对象由指向它的指针存储，因此当您复制结构时，您拥有指向复杂类型的点的副本和副本。当然，指针的副本指向与原始对象相同的内存位置，因此您可以对原始对象执行操作。

当您拥有原始类型和原始复杂对象的副本时，这种方法会导致无法维护的混乱，即使您知道自己目前在做什么。*

# android - 包含拉丁字符的 URL 的 FileNotFoundException

> ID：12644684
> 
> 赞同：3
> 
> 时间：2012-09-28T17:29:36.250
> 
> 标签：android, url, character, latin

我在加载包含以下拉丁字符的图片时遇到问题：č、ć、š、đ、ž。该代码对其他链接完美无缺，但是当它到达这个或任何其他包含拉丁字符时：

```
InputStream input = null;
            try {
                URL url = new URL(http://www.novosti.rs/upload/thumbs/images/2012//09/28j/Supruga%20Gorana%20Savića_75x45.jpg);
                HttpURLConnection conn = (HttpURLConnection)url.openConnection();
                conn.setDoInput(true);
                conn.connect();
                input = conn.getInputStream();
                Bitmap myBitmap = BitmapFactory.decodeStream(input);
                conn.disconnect();
                return myBitmap;
            } catch (IOException e) {
                e.printStackTrace();
                return null;
            } finally {
                try {
                    input.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            } 
```

它抛出一个：

```
java.io.FileNotFoundException: http://www.novosti.rs/upload/thumbs/images/2012//09/28j/Supruga%20Gorana%20Savića_75x45.jpg 
```

尽管您可以尝试将链接复制到地址栏以查看它是否有效。那么我能做什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:54:18.887

尝试使用`URLEncoder.encode(String s, String charsetName)`which 将特殊字符转换为带`%`分隔符的数字形式。

请参阅[URLEncoder](http://developer.android.com/reference/java/net/URLEncoder.html)文档。

# mysql - 重组表结构或可能通过一个查询

> ID：12644686
> 
> 赞同：0
> 
> 时间：2012-09-28T17:29:56.530
> 
> 标签：mysql, sql

我有两张表，一张显示用户从各个商店购买的商品，另一张显示了谁买了什么的详细信息。

产品表 A 为：

```
prod_id
site_name
product 
```

用户的表 B 是：

```
user_id
prod_id 
```

我需要计算从某家商店购买的产品总数。我不能简单地从表 A 中计数，因为可能有多个用户购买了相同的产品，但为了保持数据整洁，我将其存储在上面。

我是否应该在表 B 中包含 site_name 以便更容易简单地计算它，还是可以在一个查询中完成？我宁愿不要为了几个查询而膨胀表，因为我认为这将是糟糕的数据库设计，但无法弄清楚如何进行计数。

是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:33:38.877

你使用一个连接：

```
SELECT COUNT(1)
FROM A JOIN B ON A.prod_id = B.prod_id
WHERE A.site_name = 'foo' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:40:22.210

```
select count(*)
from 
    A inner join B on A.prod_id = B.prod_id
where 
    site_name = 'the site name' 
    and 
    user_id = '1' 
```

# xcode - XCode Interface Builder：更改已放置对象的类

> ID：12644687
> 
> 赞同：19
> 
> 时间：2012-09-28T17:30:10.733
> 
> 标签：xcode, uiview, interface-builder

有没有办法做到这一点？我不仅要设置`Class Identity`而且要更改设计的类（因此对象属性应该更改）。

原因是我放置`UIView`了很多子视图。现在我想将其更改为`UITableViewCell`. 也许可以通过“破解”xib文件来完成？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-05-10T00:40:51.070

不幸的是，令人抓狂的是，在 InterfaceBuilder（我发现）中没有办法做到这一点。更改自定义类只是将自定义类添加到 UIView，而不是将 UIView 更改为您想要的类（例如，UITableViewCell），从而带来您想要的视图可能具有的所有属性。您可以在故事板的 XML 文件中看到这一点。

你想要，比如说，这个：

```
<label text="Label" lineBreakMode="tailTruncation" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" ... id="Flb-Qd-jpJ"> ... </label> 
```

而不是这个：

```
<view ... id="Flb-Qd-jpJ" customClass="UILabel"> ... </view> 
```

但是 Xcode 只给你后者；它正在更新视图的 customClass 属性，而不是更新整个元素。

如果你想要先验，你仍然可以得到它，但你必须自己编辑 xml 文件，保持元素的 id 相同。这是一篇很棒的博客文章，更详细地解释了这一点：http: [//codenetwaves.blogspot.com.br/2012/09/change-view-to-scrollview-in-xcode.html](http://codenetwaves.blogspot.com.br/2012/09/change-view-to-scrollview-in-xcode.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-28T18:42:28.797

在界面生成器中，您将打开第三个选项卡并找到自定义类。在那里您可以将 UIView 更改为 UITableViewCell

# mysql - 改进用于在表的所有列中搜索文本的 my sql 查询

> ID：12644693
> 
> 赞同：1
> 
> 时间：2012-09-28T17:31:24.850
> 
> 标签：mysql, sql, database, search

我必须实现用户在搜索字段中输入一些文本的功能，我需要查询并从表中提取与该文本相关的项目。在表中，我有接近 8 列面向用户和 4 列每当插入通过前端发生时，它们就会自动插入。

下面是我写的查询，它通过mysql客户端工作，

```
select SQL_CALC_FOUND_ROWS * 
from `database`.`ttable` 
WHERE testdatetime BETWEEN '2012/05/01' and '2012/09/27' 
and testimg IS NOT NULL 
and testtitle LIKE 't%' 
OR testname LIKE 't%' 
OR testaddr LIKE 't%'  
OR testph LIKE 't%' 
OR testoffs LIKE't%' 
OR testmaps LIKE 't%' 
OR testimg LIKE 't%' 
OR testdatetime LIKE 't%'  
order  by testdatetime desc; 
```

现在由于某种原因，这个查询对我来说看起来有点奇怪，因为我正在检查每一列的值，并想检查这是否是实现它的正确方法，或者 mysql 有一些内置的特性，这些特性比这个查询产生更好的结果。如果有人可以指出正确的方向。由于我尚未实现此功能，我不知道它在性能方面的表现如何，但我知道 Like 子句在操作中有点密集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:39:37.743

您最好使用全文搜索来进行字符串搜索，而不是类似语句。这样，您还可以找到搜索词的变体。[这是 MySQL http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)全文搜索的链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:37:06.477

MySQL 有一个内置功能可以做你想做的事。它被称为全文索引。这将比一堆类似的语句更有效。这里有一些东西可以帮助您入门。

[http://www.databasejournal.com/sqletc/article.php/1578331/Using-Fulltext-Indexes-in-MySQL---Part-1.htm](http://www.databasejournal.com/sqletc/article.php/1578331/Using-Fulltext-Indexes-in-MySQL---Part-1.htm)

# jakarta-ee - 带有导航规则 JSF 2.1 的 URL 中的双斜杠

> ID：12644695
> 
> 赞同：4
> 
> 时间：2012-09-28T17:31:26.890
> 
> 标签：jakarta-ee, jsf-2, migration

嗨，我对 JSF 2.1 中的导航规则有疑问。此配置适用于 JSF 1.2。在项目中使用了一些额外的库：JSF 2.1、RichFaces 4.2、Tomahawk、Spring 3.1、urlrewrite、acegi。

问题是：

我在浏览器 URL 中打开页面：localhost:8080/cat1/cat2，我看到 index.xhtml 页面。我正在填写表格并单击按钮，2 秒后我可以在 page.xhtml 上看到结果，一切正常，但浏览器中的 URL 有双斜杠。有 localhost:8080/cat1/cat2//index.xhtml 而不是 localhost:8080/cat1/cat2/page.xhtml 。

当我尝试单击 page.xhtml 上的某个链接时，由于 URL 中的双斜杠，我看到找不到页面。

在 page.xhtml 上，我再次有按钮计算，它调用相同的方法表单 bean。单击此按钮后响应正常，我的 URL 是 localhost:8080/cat1/cat2/page.xhtml 没有双斜杠。页面上的所有链接都有效。

当我输入 URL：localhost:8080/cat1/cat2/index.xhtml，然后单击按钮我可以看到我的 page.xhtml 但 URL 是 localhost:8080/cat1/cat2/ 并且页面上的所有链接都有效

我添加了这一行：

```
<from-action>#{bean.method}</from-action> 
```

但没有帮助

我的 index.html 上的按钮：

```
<h:commandButton action="#{bean.method}" value="" styleClass="method right" tabindex="8" /> 
```

行动：

```
public String method() {    
    // few instruction
    return "success";
} 
```

规则：

```
<navigation-rule>
    <from-view-id>/cat1/cat2/*</from-view-id>
    <navigation-case>
        <from-outcome>success</from-outcome>
        <to-view-id>/cat1/cat2/page.xhtml</to-view-id>
    </navigation-case>
    <!-- Here is more cases -->
</navigation-rule> 
```

有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T18:43:06.910

双重**`//`**是因为**`/`**您的欢迎文件中的开头，它应该是`index.xhtml`而不是`/index.xhtml`.

```
<welcome-file-list>
    <welcome-file>index.xhtml</welcome-file>
</welcome-file-list> 
```

在 JSF 2.0 中，您不必在 faces-config.xml 中显式编写导航规则。您可以只返回结果视图 ID。

因此，如果您在操作方法中返回“成功”，那么它将`success.xhtml`自动获取。

因此，只需返回“页面”，您就可以从`faces-config.xml`.

# mysql - 两个表中的数据分为两列

> ID：12644696
> 
> 赞同：0
> 
> 时间：2012-09-28T17:31:28.290
> 
> 标签：mysql, join, subquery

我有一张桌子，上面有描述建筑物状况的句子。这些句子有的属于“完成”的范畴，有的属于“准备”的范畴。我还有两张表（完整的，准备好的），其中包括建筑物 ID 和句子 ID。所以每栋建筑都用两张表来描述（完整的，准备好的）。我想创建一个查询，其结果将有两列-> 建筑物的描述。

```
-----------       -----------------------     ----------------------
 SENTENCES              COMPLETE                     PREPARING
-----------       -----------------------     ----------------------
ID  |  text       ID_HOUSE  | ID_SENTENCES     ID_HOUSE | ID_SENTENCES
-----------       ------------------------    ------------------------                
1   |  One            1     |       1               1   |       3
2   |  Two            1     |       2               2   |       1
3   |  Tree           2     |       2 
```

我想要这样的东西：（对于房子 1）

```
COMPLETE     |      PREPARING
------------------------------
   One       |         Tree
   Two       |         NULL 
```

我创建了这个，但它不起作用。

```
SELECT s.text AS complete, 
(
  SELECT s.text
  FROM sentences AS s
  LEFT JOIN preparing AS p ON s.id = p.id_sentences
  WHERE s.id_house = 1
) AS preparing
FROM sentences AS s
LEFT JOIN complete AS c ON s.id = c.sentences
WHERE s.id_house = 1 
```

这就是我得到的

> # 1242 - 子查询返回多于 1 行

**方案**

我试着做一个图表，但不幸的是我没有足够的声望点来上传，所以它隐藏在这里：。

[方案](http://www.theego.cz/scheme.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:56:09.340

这是真的，因为您使用左连接，所以您将获得不止一行，在 Complete 中，您有 2 个 ID 值为 1，左连接为您提供 Complete 中值为 1 的所有行。您真正想要的查询是什么，我没有'不太明白你的查询我的意思是你想要的输出。（还有什么是外键）

# php - PHP 中的 div 和 span 是如何工作的？

> ID：12644697
> 
> 赞同：-3
> 
> 时间：2012-09-28T17:31:31.027
> 
> 标签：php, include

我很难理解 INCLUDE 语句的工作原理。

例如，假设我有一个文件 index.htm 和一个文件 data.php

索引.htm

```
<div id="1">
contentcontentcontentcontent
</div>

<div id="2">
<?php include 'data.php' ?>
</div> 
```

所以我的问题是，div 2 是否包含整个 data.php？比如，如果 data.php 有自己的 div 和 span 怎么办？div 2 是否充当迷你页面（有点像框架），其内容仅显示在其 div 的参数中？

此外，如果我将 css 样式应用于 div 2 以使其在屏幕中心为 200x200 像素，这是否意味着 data.php 将准确显示在那里，并且仅在该 200x200 空间内显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:35:14.647

如果您的 data.php 文件仅输出 html 代码，那么该文件中的所有代码都将直接转储到 div 2 中。您可以说它“像一个框架”，但它真的不像一个框架，因为一个框架是一个单独的请求全部一起。在不知道你的 data.php 文件中有什么的情况下，很难 100% 确定会发生什么，但我可以肯定地说，如果 data.php 只吐出 html 内容，你会在 div 2 中看到它- 取决于 div 2 的样式，嗯？不要忘记那部分；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:38:40.933

php include 的重点是允许您将项目分成更小的部分并在适用的情况下重用代码。

> 所以我的问题是，div 2 是否包含整个 data.php？

是的，文件中的任何内容`data.php`都将放在`div#2`.

> 此外，如果我将 css 样式应用于 div 2 以使其在屏幕中心为 200x200 像素，这是否意味着 data.php 将准确显示在那里，并且仅在该 200x200 空间内显示？

是的，只要数据不会溢出您的容器。

使用包含的一个实际示例是分离用于创建菜单的 html。然后在您的每个页面中，您都可以包含菜单文件。现在，如果您需要更改菜单，您只需更新一个文件。

# apache - Jenkins 使用 mod_proxy 支持 Apache

> ID：12644701
> 
> 赞同：3
> 
> 时间：2012-09-28T17:31:37.310
> 
> 标签：apache, continuous-integration, jenkins, mod-proxy

我按照说明操作，在 Jenkins 前面使用 Apache 的反向代理不起作用。我已经设置了一个代理 Jenkins 的 Apache 虚拟主机配置：

# 阿帕奇虚拟主机

```
<VirtualHost *:8084>
    ServerAdmin emil@my_email.com
    ProxyRequests     Off
    ProxyPass         /jenkins  http://localhost:8084/jenkins
    ProxyPassReverse  /jenkins  http://localhost:8084/jenkins
    <Proxy http://localhost:8084/jenkins*>
      Order allow,deny
      Allow from all
     </Proxy>
    ProxyPreserveHost on
 </VirtualHost> 
```

虚拟主机已激活，没有错误。

您可以在此处查看我对 /etc/default/jenkins 所做的更改：

```
HTTP_PORT=8084
...
PREFIX=/jenkins
...
JENKINS_ARGS="--httpListenAddress=127.0.0.1 --webroot=/var/cache/jenkins/war --prefix=$PREFIX --httpPort=$HTTP_PORT --ajp13Port=$AJP_PORT" 
```

我正在跟踪 apache 日志和 jenkins，但是当我尝试访问 http://:8084/jenkins 时，我什么也没得到，没有页面。当我在没有--httpListenAddress=127.0.0.1的情况下启动Jenkins时，我打开http://:8084/jenkins成功，但是这是直接访问Jenkins，不通过Apache。

有什么想法可能是我的反向代理配置中的问题吗？这是相当标准的。

谢谢，

埃米尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:53:43.537

我忘记在 ports.conf 中添加“Listen 8084”指令，所以 Apache 没有在那里监听。无论如何，解决了，不应该在周五晚上进行设置。

# objective-c - 用字节填充 NSMutableData 会导致长度为零

> ID：12644703
> 
> 赞同：1
> 
> 时间：2012-09-28T17:32:00.797
> 
> 标签：objective-c, cocoa, nsmutabledata

像这样设置 NSMutableData 时：

```
NSMutableData* mRgb = [NSMutableData dataWithCapacity:3];
((char*)[mRgb mutableBytes])[0] = 10;
((char*)[mRgb mutableBytes])[1] = 90;
((char*)[mRgb mutableBytes])[2] = 160; 
```

我有长度仍然为0的问题：

```
int len = [mRgb length]; // Is 0! 
```

为什么呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T17:35:59.170

[`dataWithCapacity`](https://developer.apple.com/documentation/foundation/nsmutabledata/1547236-datawithcapacity)只是在内存中保留了那么多字节，并不意味着数据是那个大小。

这方面的一个例子是从互联网接收图像时。预先您不知道图像会有多大，因此只需创建一个容量为 1MB 的 Data 对象，这样您就不需要在收到更多数据时不断调整数据大小。

您要使用的是该[`dataWithLength`](https://developer.apple.com/documentation/foundation/nsmutabledata/1547233-datawithlength)方法，该方法从一开始就创建一个包含那么多字节的数据对象。或者您可以调用[`setLength:N`](https://developer.apple.com/documentation/foundation/nsmutabledata/1413333-length?language=objc)以更改正在使用的数据量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T17:36:08.707

[`dataWithCapacity:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSMutableData_Class/Reference/NSMutableData.html#//apple_ref/doc/uid/20000173-BGBCGHID)“......不一定立即分配请求的内存。可变数据对象根据需要分配额外的内存......”

使用[`dataWithLength:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSMutableData_Class/Reference/NSMutableData.html#//apple_ref/doc/uid/20000173-BGBBCEHG)，它分配并归零请求的数量。

# javascript - 如何从 FlexiGrid 获取值

> ID：12644704
> 
> 赞同：0
> 
> 时间：2012-09-28T17:32:17.340
> 
> 标签：javascript, jquery, flexigrid

我似乎找不到任何关于如何从 flexigrid 中获取单元格值的信息。

我正在尝试为每个选中的项目检索第三列的单元格值。（每行都有一个复选框）。

我有一个获取行 ID 的函数，但我无法让它为第三列工作。（因为它是一个 flexigrid，你可以重新排列东西，所以第三列不会总是第三列）

这是我的功能：

```
function getSelectedExhibitIDs() {
        var selectedExhibitsList = new Array;
        var exhibitNumber = new Array;
        var i = 0;
        $('.exhibitCheckBox:checked').each(function () {
            if ($(this)[0].id !== "checkAllExhibits") {
                selectedExhibitsList[i] = $(this)[0].id.split('_')[1];
                ++i;
            }
        });
        return selectedExhibitsList;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:40:49.117

看起来您根本没有尝试访问第三列..

```
$('.exhibitCheckBox:checked').each(function (i) {
   if ($(this)attr('id') !== "checkAllExhibits") {

        // This will take you to the parent tr in which the checked checkbox is
        var $tr = $(this).closest('tr');
        //Need to find the 3rd cell in the current row

        var third = $tr.find('watyouwant');

        // Next you need to find the 3rd cell you want and add it to a array
        selectedExhibitsList[i] = third.attr(id).split('_')[1];
    }
}); 
```

# android - Android画布改变一些像素颜色

> ID：12644705
> 
> 赞同：8
> 
> 时间：2012-09-28T17:32:18.493
> 
> 标签：android, android-canvas, draw, pixel

我一`Canvas`开始就有一个对象。我需要根据当前颜色更改某些像素的颜色。我怎样才能以适当的方式做到这一点？

细节：

我有自己的课程从`ImageView`. 在`onDraw(Canvas canvas)`方法中，我用第三方类绘制了一些东西，并且只有`Canvas`带有结果的对象。之后我需要根据当前颜色更改某些像素的颜色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T15:47:29.293

假设你有 `android.graphics.Canvas`对象被调用`canvas`并且`X`&`Y`是你想要改变像素的点，所以你去

称呼 ：

```
canvas.drawPoint(X, Y, paint); 
```

这是你如何初始化类的对象，`android.graphics.Paint`即绘画

```
Paint paint = new Paint();
paint.setStyle(Paint.Style.FILL);
paint.setColor(Color.WHITE); 
```

[在此链接](https://developer.android.com/reference/android/graphics/Paint.html)上搜索更多以更改不同位置的多个像素，有很多功能可以帮助您实现您想要的。好运 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T00:29:43.960

我建议查看[Faster way to set a (PNG) bitmap color 而不是逐像素设置](https://stackoverflow.com/questions/4251027/faster-way-to-set-a-png-bitmap-color-instead-of-pixel-by-pixel)。它具有逐像素获取和设置位图颜色的代码（在问题中），以及对逐像素方法的替代方法的建议（在答案中）。也可能有用：[Android 中 Bitmap 的方法 getPixels 的解释](https://stackoverflow.com/questions/4172917/explanation-of-the-method-getpixels-for-a-bitmap-in-android)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T19:52:21.323

可能有十几种方法可以做到这一点。如果您想使用 Canvas 方法，有一种方法可以绘制到 Bitmap 对象。然后，您可以将对象绘制到另一个 Canvas。Bitmap 对象也可能具有修改像素的功能。

位图还可以让您将副本复制到缓冲区中，如果您知道像素是如何存储的，那将是一种非常快速的图像处理方式。我不确定 Canvas 本身是否有

# database - 从数据库表中填充模型中的列表

> ID：12644710
> 
> 赞同：0
> 
> 时间：2012-09-28T17:32:31.187
> 
> 标签：database, asp.net-mvc-3

主题模型

```
 public class Subject : TObject
  {
     piblic string SubjectID   {get; set; } 
     public string FirstName   {get; set; }
     public string LastName    {get; set; }
     public bool   IsT         {get; set; }
     public DateTime EntryDate {get; set; }
     public List<Address> Addresses  {get; set; }
  } 
```

列表地址模型

```
 public class Addresses : TObject
  {
     public string SubjectID      {get; set; }
     public string Street1        {get; set; }
     public string City           {get; set; }
     public string State          {get; set; }
     public string Zip            {get; set; }
     public string Country        {get; set; }
  } 
```

我可以将数据库表读入包含除 LIST 之外的所有内容的主题模型，然后将第二个表读入地址模型，然后将模型添加到主题模型中的 LIST 中吗？基本上我需要从数据库中填写模型主题中的每个元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T20:56:59.760

Entity Framework 5.0 可以自动将集合设置为虚拟来处理这个问题。

# migration - 某些应用程序无法获得长寿命页面令牌

> ID：12644711
> 
> 赞同：-1
> 
> 时间：2012-09-28T17:32:32.450
> 
> 标签：migration, deprecated, access-token, facebook-access-token

Facebook 的 offline_access 弃用迁移计划于今年早些时候发布。然而，它被多次推迟到 10 月 3 日，大概是因为它有 bug 并且尚未完全实施。到目前为止，迁移仍然不完整且容易出错。

经过数月和数月的变更准备、更新我们的代码库以及反复（徒劳）尝试与 Facebook 合作后，这次失败的迁移将在一周内上线。

如错误报告 (http://developers.facebook.com/bugs/151056591697025) 中所述，对于我们的应用程序，无法获取长期页面访问令牌（使用 offline_access 权限的替代方法）。Facebook 似乎对这个问题给予了零关注。

如果 Facebook 继续无所作为，那么在 10 月 3 日，我们的应用程序（以及许多其他应用程序）将会崩溃。我们应该做什么？

* * *

更新

最确凿的证据表明某些事情不工作是以下工作流程：

1.  确认我们收到了用户的短期令牌。
2.  确认我们可以将该短期令牌转换为长期令牌。
3.  确认当这个长寿命令牌用于获取页面访问令牌时，它们会在 60 天后过期。

这是适当的工作流程，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:13:10.560

我相信我已经解决了这个问题（至少在我的场景中）。要使这项工作正常进行，需要做两件事：

1.  我们在服务器端成功获得了长期访问令牌。但是，我们无法使用客户端 API（通过 /me/accounts）中的长期令牌来获取未过期的页面访问令牌。这可能是因为客户端从未收到更新的长期访问令牌。

    无论如何，我们将“页面访问令牌获取”代码从客户端迁移到服务器端，这似乎已经解决了问题。（我想必须有一种方法可以在客户端执行此操作，但可能很难强制客户端 API 使用更新的长期访问令牌而不是短期访问令牌。）

2.  在我们从 Facebook 用户的帐户 (http://www.facebook.com/settings?tab=applications) 中完全删除我们的 Facebook 应用程序之前，我们的更改似乎没有任何效果（至少对我们现有的测试用户和测试应用程序）。

# grails - 如何在 Grails 中覆盖插件配置？

> ID：12644714
> 
> 赞同：1
> 
> 时间：2012-09-28T17:32:51.943
> 
> 标签：grails, plugins, configuration

我正在使用优秀的类图插件[https://github.com/trygvea/grails-class-diagram](https://github.com/trygvea/grails-class-diagram)，并希望覆盖此处设置的配置值 classSelection：[https ://github.com/trygvea/grails -class-diagram/blob/master/grails-app/conf/ClassDiagramConfig.groovy](https://github.com/trygvea/grails-class-diagram/blob/master/grails-app/conf/ClassDiagramConfig.groovy)在我的应用程序 Config.groovy 文件中。

以下似乎都不起作用：

```
grails.plugins.class-diagram.classDiagram.config.defaults.classSelection = "com.mypackage.*"
grails.plugins.class-diagram.config.preferences.defaults.classSelection = "com.mypackage.*"
grails.plugins.class-diagram.classDiagram.config.preferences.defaults.classSelection = "com.mypackage.*" 
```

我如何访问正确的命名空间以覆盖该值？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T13:37:19.480

Config 属性的名称是任意的，它们不必遵循任何特定的模式或约定，如包名称。

如果您只有一个要覆盖的属性，则可以使用“扁平化”语法：

```
classDiagram.preferences.defaults.classSelection = 'com.mypackage.*' 
```

如果要将多个属性组合在一起，还可以使用闭包语法（如示例 Config 文件中）声明 Config 属性：

```
classDiagram {
    preferences {
        defaults {
            classSelection = "com.mypackage.*"
            showAssociationNames = false
            showMethodReturnType = true
            showMethodSignature = false            
        }
    }
} 
```

请注意，Grails 插件系统不会自动`*Config.groovy`将插件中的文件加载到应用程序的配置中。插件开发人员可以设置一个插件来将默认`*Config.groovy`文件合并到应用程序的配置中，在这种情况下，应用程序中的属性通常`Config.groovy`会覆盖插件提供的配置属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:35:56.510

如果它们具有相同的名称，则在您中设置的属性`Config.groovy`将覆盖插件的 Config.groovy 属性。您正在为属性添加一个包，但这不是必需的。采用

```
classDiagram.preferences.defaults.classSelection = "com.mypackage.*" 
```

# java - Java BigDecimal 舍入错误

> ID：12644715
> 
> 赞同：1
> 
> 时间：2012-09-28T17:32:52.817
> 
> 标签：java, android, rounding, bigdecimal

我有以下用于在 Java 中舍入双精度值的函数：

```
public static double round(double d, int decimalPlace) {

    BigDecimal bd = new BigDecimal(Double.toString(d));
    bd = bd.setScale(decimalPlace, BigDecimal.ROUND_HALF_UP);
    return bd.doubleValue();
} 
```

作为输入，这个函数接收这些值：

```
double d = 7.3149999999999995;
int decimalPlace = 2 
```

但是，当函数返回时，返回的值是 7.31，而不是 7.32。我在文档上搜索以了解为什么 bd.SetScale 具有这种行为，但没有成功。

有人可以解释为什么会这样吗？非常感谢！！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T17:39:53.757

> 有人可以解释为什么会这样吗？

它遵守记录在案的行为:)来自[文档](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#setScale%28int,%20java.math.RoundingMode%29)：

> 如果通过操作缩小比例，则必须将未缩放的值除（而不是相乘），并且值可能会改变；在这种情况下，指定的舍入模式应用于除法。

对于[`RoundingMode.HALF_UP`](http://docs.oracle.com/javase/7/docs/api/java/math/RoundingMode.html#HALF_UP)：

> 舍入模式向“最近的邻居”舍入，除非两个邻居是等距的，在这种情况下向上舍入。

现在 7.3149999999999995与 7.31 和 7.32 的距离*并不*相等 - 它更接近 7.31，所以这就是结果。

只有当原始值恰好是 7.315（即两者之间的一半）时，才能看到`HALF_UP`和之间的差异。`HALF_DOWN`

顺便说一句，为了确保你得到你*期望*开始的数字，我建议使用`String`. 例如：

```
double d = 0.1;
BigDecimal bd = new BigDecimal(d); 
```

不一样：

```
BigDecimal bd = new BigDecimal("0.1"); 
```

从`double`to*转换通常*`BigDecimal`表明您有问题，并且您应该始终使用一种类型。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:40:21.720

ROUND_HALF_UP：舍入模式向“最近的邻居”舍入，除非两个邻居是等距的，在这种情况下向上舍入。

在您的示例中，最近的邻居是：7.31，因为 7.314 中的 4 比 10 更接近 0。为了证明这一点，请将 7.314... 更改为 7.315...。

查看不同的舍入模式以提供您想要的行为。*

# emacs - emacs的行重复代码

> ID：12644717
> 
> 赞同：2
> 
> 时间：2012-09-28T17:33:00.990
> 
> 标签：emacs, elisp

我正在尝试编写用于行重复的函数。我必须保持光标位置。这是 .emacs 文件中的代码：

```
(defun line-duplicate
  "line duplication."
  (setq position (point))       ;Store the original position of cursor               
  (global-set-key "\C-d" "\C-a\C-k\C-k\C-y\C-y")
  (goto-char position)            ;move the cursor to original position
)

(line-duplicate) 
```

但是，出现了一些错误。错误是什么？

**编辑**

刚刚发现了命令执行功能：

```
(defun line-duplicate ()
  (interactive)
  (setq position (point))
  (command-execute (kbd "C-a C-k C-k C-y C-y"))
  (goto-char position)
)

(global-set-key (kbd "C-d") 'line-duplicate) 
```

这奏效了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:37:29.247

`global-set-key`接受两个参数，`KEY`并且`COMMAND`. `COMMAND`不是键序列，它是一个函数（*通常它是一个命名交互式可调用函数的符号*，文档说）。您可能不想更改`C-d`调用函数时的行为，而是希望将函数绑定到键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:44:47.053

我猜你想将重复行绑定到`C-d`.

您可以编写以下函数：

```
(defun my:dublicate-line ()
  (interactive)
  (save-excursion
  (let ((begin (line-beginning-position)) (end (line-end-position)))
    (move-beginning-of-line 2)
    (insert (concat  (buffer-substring-no-properties begin end) "\n")))))

(global-set-key (kbd "C-d") 'my:dublicate-line) 
```

# string - 将字符串向量转换为赋值语句的右值

> ID：12644718
> 
> 赞同：0
> 
> 时间：2012-09-28T17:33:04.130
> 
> 标签：string, vector, rvalue

我想不出一种有效的方法来将字符串向量转换为赋值语句的右值。例如，我有一个包含三个元素“5”、“*”、“3”的向量，所以我需要一个赋值语句，它基本上等同于以下内容

```
int myInteger = 5 * 3; 
```

提前致谢;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T19:19:20.053

我假设您知道变量的顺序，或者可以确定变量的顺序以及运算符的顺序。我还假设，因为您使用的是向量，所以可以有多个变量（不是重点:)）。

鉴于此，您只需转换变量并编写逻辑以正确顺序应用运算符（由您的语言的运算符优先级指定）。

假设我们正在使用 Javascript（[请参见此处的优先级](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)）。为简单起见，我们将只处理乘法、除法、加法和减法运算符。

```
<script>
var foo = 5*4+16/2-3*2; //should be 22
var bar = ["5","*","4","+","16","/","2","-","3","*","2"];
var done = parseVec(bar); //should calculate to 22

//there are no vectors in javascript, so we'll go with an array to demonstrate
//all parsing assumes that values in the array are in decimal, not octal or hex
function parseVec (array) {
  var result, i, h, j, action;
  var newarray = [];

  //decision based on order of operations...all multiplication will happen 
  //first, then division, then addition, etc...
  if (array.indexOf("*") > 0 && array.indexOf("*") < (array.length-1)) {
    i = array.indexOf("*");
    action = "*";
  } else if (array.indexOf("/") > 0 && array.indexOf("*/") < (array.length-1)) {
    i = array.indexOf("/");
    action = "/";
  } else if (array.indexOf("+") > 0 && array.indexOf("+") < (array.length-1)) {
    i = array.indexOf("+");
    action = "+";
  } else if (array.indexOf("-") > 0 && array.indexOf("-") < (array.length-1)) {
    i = array.indexOf("-");
    action = "-";
  } else
    return useParseFloat(array[0]) ? parseFloat(array[0], 10) : parseInt(array[0], 10);

  //operate on the value preceding and following array[i]...
  h = useParseFloat(array[i-1]) ? parseFloat(array[i-1], 10) : parseInt(array[i-1], 10);
  j = useParseFloat(array[i+1]) ? parseFloat(array[i+1], 10) : parseInt(array[i+1], 10);
  switch (action)
  {
    case "*":
        result = h * j;
        break;
    case "/":
        result = h / j;
        break;
    case "+":
        result = h + j;
        break;
    case "-":
        result = h - j;
        break;
  }

  //recreate the array for recursion
  for(var i2 = 0; i2 < array.length; i2++)
  {
    if (i2 == i)
      newarray.push(result.toString());
    else if (i2 != (i-1) && i2 != (i+1))
      newarray.push(array[i2]);
  }
  return parseVec(newarray);
}

//should I parse this as an int or float?
function useParseFloat(val) {
  return (val.indexOf(".") >= 0 && val.indexOf(".") < (val.length-1)) ? true : false;
}
</script> 
```

您可以[在 JSBin 上运行此代码](http://jsbin.com/welcome/28287/edit)。

这应该让您对如何完成给定的任务有一个公平的想法。通过一些尝试和修改，您可以包括对大多数运算符和括号的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:39:48.037

您必须逐个元素解析。假设您知道您的向量将包含三个元素（字符串），因此您可以这样做：

```
vector<string> v = {"5","*", "3"};
int x, y;
char c;
stringstream(a);
string T = v[0]+v[1]+v[2];
a << T;
a >> x >> c >> y; 
```

现在你应该检查c中的操作并执行它。

# python - 具有来自 python 脚本的 bash 自动完成功能

> ID：12644724
> 
> 赞同：1
> 
> 时间：2012-09-28T17:33:37.163
> 
> 标签：python, bash, autocomplete

> **可能重复：**
> [Python argparse 和 bash 完成](https://stackoverflow.com/questions/8387924/python-argparse-and-bash-completion)

在 bash 提示符下（例如在 Ubuntu 系统上），如果您键入`service`然后按几次 Tab，您将获得所有可用服务的列表。

有没有办法用 python 脚本做同样的事情？因此，如果您有一个名为 music 的脚本，看起来像这样：

```
def dumbstuff():
    #plays pop music...

def rockingstuff():
    #Plays music that will scare your mother... 
```

在命令行上，您键入`music`几个选项​​卡，我希望看到输出：

```
dumbstuff
rockingstuff 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:22:09.950

你可以走这两条路。第一种方法是创建一个 bash 完成脚本并在您的 .bashrc 文件中引用它。您可以在此处查看示例：[可编程完成简介](http://tldp.org/LDP/abs/html/tabexpansion.html)。

您可以采用的另一种方法是使用 python 的[optcomplete](http://furius.ca/optcomplete/)库。您必须将其作为脚本的一部分。

您选择哪种方法取决于此应用程序是仅供个人使用还是分发。

# php - 为什么东西会在标签外回显？

> ID：12644729
> 
> 赞同：-1
> 
> 时间：2012-09-28T17:33:48.320
> 
> 标签：php, html, forms

所以我有一个方法可以根据你传入的属性数组创建一个文本元素，除了 value 属性之外，它都可以工作，本质上问题如下：

如果某个值（无论是函数、文本还是您拥有的东西）被“回显”出来，则该值显示在框外，但是如果返回该值，那么我们将在标签内获取该值。

**代码**

```
function textarea(array $attributes){

   if(isset($attributes['name'])){
       $this->name = 'name="'.$attributes['name'].'"';
   }

   if(isset($attributes['id'])){
       $this->id = 'id="'.$attributes['id'].'"';
   }

   if(isset($attributes['class'])){
       $this->class = 'class="'.$attributes['class'].'"';
   }else{
       $this->class = 'class="aisisTextElement"';
   }

   if(isset($attributes['rows'])){
       $this->rows = 'rows="'.$attributes['rows'].'"';
   }

   if(isset($attributes['cols'])){
       $this->cols = 'cols="'.$attributes['cols'].'"';
   }

   if(isset($attributes['value'])){
       $this->value = $attributes['value'];
   }

   if(isset($attributes['style'])){
       $this->style = 'style="'.$attributes['style'].'"';
   }

   $build_aisis_element = '<textarea ' 
                          .$this->id 
                          .$this->class 
                          .$this->name 
                          .$this->rows  
                          .$this->cols 
                          .$this->style
                          .'>'.$this->value . '</textarea>';                
   echo $build_aisis_element;
} 
```

例如：

如果此函数作为值传入：

```
function echo_me(){
    echo "hello"
} 
```

我的 html 看起来像：

```
hello
<textarea></textarea> 
```

然而

```
function return_me(){
    return "hello"
} 
```

我的html是：

```
<textarea>hello</textarea> 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T17:36:22.087

echo 命令将字符串输出到文档，而不是调用函数。

Return 获取字符串并将其传递回调用函数以对其进行处理。

# cmake - 使用 CMake 和 Gcov 进行编译和链接时出错

> ID：12644730
> 
> 赞同：4
> 
> 时间：2012-09-28T17:33:49.847
> 
> 标签：cmake

我在使用 gcov 获取覆盖信息时在编译和链接期间遇到以下错误

```
error: undefined reference to '__gcov_merge_add'
error: undefined reference to '__gcov_init' 
```

我将标志传递给 CMakeLists.txt，如下所示：

```
set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -fprofile-arcs -ftest-coverage")
set(CMAKE_EXE_LINKER_FLAGS
    "${CMAKE_EXE_LINKER_FLAGS} -fprofile-arcs -ftest-coverage") 
```

我是否必须在 CMakeLists.txt 中添加任何其他内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-02-27T09:47:05.000

设置编译器标志

```
add_compile_options(-g -O0 -fprofile-arcs -ftest-coverage) 
```

链接到 lgcov

```
target_link_libraries(
    <target-name>
    gcov
) 
```

或使用[CMake 模块](https://github.com/bilke/cmake-modules/blob/master/CodeCoverage.cmake)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T19:01:26.387

假设您只想覆盖 Debug 构建，您的标志应该是：

```
set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} -g -O0 -fprofile-arcs -ftest-coverage")
set(CMAKE_C_FLAGS_DEBUG "${CMAKE_C_FLAGS_DEBUG} -g -O0 -fprofile-arcs -ftest-coverage")
set(CMAKE_EXE_LINKER_FLAGS_DEBUG "${CMAKE_EXE_LINKER_FLAGS_DEBUG} -fprofile-arcs -ftest-coverage") 
```

有关详细信息，请参阅[http://cmake.org/Wiki/CTest/Coverage](http://cmake.org/Wiki/CTest/Coverage)和[http://cmake.org/Wiki/CTest/Coverage/Example](http://cmake.org/Wiki/CTest/Coverage/Example)

# java - 使用 ScreenUtils 将屏幕截图保存为 libgdx 中的图像

> ID：12644733
> 
> 赞同：5
> 
> 时间：2012-09-28T17:33:59.127
> 
> 标签：java, android, libgdx

我是`ScreenUtils.getFrameBufferPixels(...)`用来截取游戏画面的。我想将此方法返回的字节数组保存为文件中的图像。我正在使用 libGDX 并专注于 android。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-28T11:14:01.363

现在相当容易。Libgdx 提供了一个[示例](https://github.com/libgdx/libgdx/wiki/Taking-a-Screenshot)。

我必须添加一个语句才能使其正常工作。图像无法直接保存到`/screenshot1.png`。只需在前面加上`Gdx.files.getLocalStoragePath()`.

源代码：

```
public class ScreenshotFactory {

    private static int counter = 1;
    public static void saveScreenshot(){
        try{
            FileHandle fh;
            do{
                fh = new FileHandle(Gdx.files.getLocalStoragePath() + "screenshot" + counter++ + ".png");
            }while (fh.exists());
            Pixmap pixmap = getScreenshot(0, 0, Gdx.graphics.getWidth(), Gdx.graphics.getHeight(), false);
            PixmapIO.writePNG(fh, pixmap);
            pixmap.dispose();
        }catch (Exception e){           
        }
    }

    private static Pixmap getScreenshot(int x, int y, int w, int h, boolean yDown){
        final Pixmap pixmap = ScreenUtils.getFrameBufferPixmap(x, y, w, h);

        if (yDown) {
            // Flip the pixmap upside down
            ByteBuffer pixels = pixmap.getPixels();
            int numBytes = w * h * 4;
            byte[] lines = new byte[numBytes];
            int numBytesPerLine = w * 4;
            for (int i = 0; i < h; i++) {
                pixels.position((h - i - 1) * numBytesPerLine);
                pixels.get(lines, i * numBytesPerLine, numBytesPerLine);
            }
            pixels.clear();
            pixels.put(lines);
        }

        return pixmap;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T22:26:50.630

我对 libGDX 论坛成员提供的最小 .PNG 编码器很幸运：[http ://www.badlogicgames.com/forum/viewtopic.php?p=8358#p8358](http://www.badlogicgames.com/forum/viewtopic.php?p=8358#p8358)

请注意，生成的 PNG 没有经过优化，因为编码器非常简单（我离线使用 pngcrush 来显着减小它们的大小）。

我也有一些关于 alpha 通道的问题。底层屏幕颜色通过屏幕上的透明像素显示，但不会通过从屏幕上刮下的像素显示（因此这不是 PNG 编码器的真正故障）。如果您的背景是黑色的，那么只需确保 Alpha 通道的像素为 1.0（当然，除非您想要屏幕截图中的透明度）。

# php - 使用带有标头重定向的 session_start

> ID：12644734
> 
> 赞同：1
> 
> 时间：2012-09-28T17:34:18.427
> 
> 标签：php, header, session-variables

用户在第 1 页填写表格。表格通过 POST 提交到第 2 页。第 2 页使数据库插入，但需要插入存储在会话变量中的用户 ID，因此我需要启动会话以获取该会话变量，但这会阻止我在末尾使用标头重定向来停止重新提交。我不想将用户 ID 设置为第 1 页上的隐藏输入，因为这很容易被欺骗。我显然在做一些不符合最佳实践的事情，我应该怎么做？

```
 <?php
@session_start();
require_once '../Classes/Communication.php';
require_once '../Classes/Communication_db.php';
$noteDate=$_POST["noteDate"];
$noteContact = $_POST["noteContact"];
$note= $_POST["note"];
$custID = $_POST["custID"];

$comm = new Communication();
$comm->setCustomerID($custID);
$comm->setCommunicationDate(date("Y-m-d", strtotime($noteDate)));
$comm->setCustomerContactID($noteContact);
$comm->setNotes($note);
$comm->setUserID($_SESSION["userID"]);

Communication_db::saveCommunication($comm);

header("Location: ./index.php?action=newCustomer",303);

?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T17:38:53.593

去掉`<?php`标签前的空格。那个空格被发送出去，然后你就不能打电话了`header()`。

此外，您可以在更早的地方调用 session_start （或者图书馆正在这样做）。您只能调用一次。尝试这个：

```
if (!isset($_SESSION)) {
   session_start();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:38:59.567

session_start 不会阻止您设置任何标头，但是会在标头声明之前吐出任何输出，即使这只是一个 php 警告或通知。摆脱@Ray 注意到的空间，并修复可能在标题行之前生成任何类型输出的任何其他内容。

# c++ - C++ 正态分布

> ID：12644745
> 
> 赞同：1
> 
> 时间：2012-09-28T17:35:03.000
> 
> 标签：c++, statistics, distribution

> **可能重复：**
> [erf(x) 和 math.h](https://stackoverflow.com/questions/631629/erfx-and-math-h)
> [最好的 C++ 统计库？](https://stackoverflow.com/questions/746364/best-library-for-statistics-in-c)

我想知道是否有任何标准方法可以在 C++ 中实现累积正态分布函数。或者，是否有任何现有的库可以完成该任务？

任何人都可以推荐一个好的 C++ 统计库，如果有的话？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T17:37:16.300

您可以使用 erf 函数（包含在标准数学库[source](http://en.wikipedia.org/wiki/Error_function)中）来执行此操作。

```
CDF = 0.5 + 0.5 * erf(x/(sigma * sqrt(2.0))); 
```

sigma = 1.0 当然是正态分布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:43:04.197

Boost与标准一样好。更多提升[数学/统计](http://www.boost.org/doc/libs/1_42_0/libs/math/doc/sf_and_dist/html/index.html)。

累积正态分布的独立 C++ 实现的简单示例可[在此处获得](http://www.johndcook.com/cpp_phi.html)

# spring - 如何从 PageRequest 禁用计数查询以获取总页数？

> ID：12644749
> 
> 赞同：19
> 
> 时间：2012-09-28T17:35:26.730
> 
> 标签：spring, spring-data, spring-data-jpa

我们将 Spring Data 与 PageRequest 一起使用，并获得了大量数据。除了为获取总页数而执行的查询外，所有查询都以最佳方式执行。有没有办法禁用此功能，或者我们很可能必须实现自己的 Pageable？

[http://static.springsource.org/spring-data/data-commons/docs/1.3.2.RELEASE/api/org/springframework/data/domain/PageRequest.html](http://static.springsource.org/spring-data/data-commons/docs/1.3.2.RELEASE/api/org/springframework/data/domain/PageRequest.html)

[http://static.springsource.org/spring-data/data-commons/docs/1.3.2.RELEASE/api/org/springframework/data/domain/Pageable.html](http://static.springsource.org/spring-data/data-commons/docs/1.3.2.RELEASE/api/org/springframework/data/domain/Pageable.html)

**编辑：** 经过进一步分析，我认为解决此问题的唯一方法是不使用 Spring Data 并使用 EntityManager，因为它允许设置起始行和返回的记录数。我们只需要下一页是否可用，因此我们只需检索一条额外的记录。我们还需要一个动态查询，这在 Spring Data 中似乎是不可能的。

**编辑2：**似乎我只是没有等待足够长的时间来获得一些回应。多谢你们！！！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-29T12:36:27.300

实现这一点的方法是简单地使用`List`作为返回值。例如，对于这样定义的存储库：

```
interface CustomerRepository extends Repository<Customer, Long> {

  List<Customer> findByLastname(String lastname, Pageable pageable);
} 
```

查询执行引擎将应用提交的偏移量和页面大小，`Pageable`但不会触发额外的计数查询，因为我们不需要构造`Page`实例。这也记录在参考文档的[相关部分](https://docs.spring.io/spring-data/data-jpa/docs/current/reference/html/#repositories.special-parameters)中。

更新：如果您想要下一页/上一页`Page`但仍跳过计数查询，您可以将[`Slice`](https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/domain/Slice.html)其用作返回值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-07T17:27:44.980

我能够避免动态查询（使用 Spring Data Specifications）中的计数性能下降，并在几篇文章中指出了基本存储库解决方案。

```
public class ExtendedRepositoryImpl<T, ID extends Serializable> extends SimpleJpaRepository<T, ID> implements ExtendedRepository<T, ID> {

    private EntityManager entityManager;

    public ExtendedRepositoryImpl(JpaEntityInformation<T, ?> entityInformation, EntityManager entityManager) {
        super(entityInformation, entityManager);
        this.entityManager = entityManager;
    }

    @Override
    public List<T> find(Specification<T> specification, int offset, int limit, Sort sort) {
        TypedQuery<T> query = getQuery(specification, sort);
        query.setFirstResult(offset);
        query.setMaxResults(limit);
        return query.getResultList();
    }

} 
```

使用这种方法从 6M 记录数据集中检索 20 个记录切片的查询需要**几毫秒**。在 SQL 中运行相同的过滤查询。

使用类似的实现`Slice<T> find(Specification<T> specification, Pageable pageable)`需要 10 多秒。

类似的实现返回`Page<T> find(Specification<T> specification, Pageable pageable)`大约需要 15 秒。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-25T14:07:50.633

我最近有这样的要求，最新的**`spring-boot-starter-data-jpa`**库提供了开箱即用的解决方案。没有**`count`**特征分页可以使用**`org.springframework.data.domain.Slice`**界面来实现。

摘自[博客](https://attacomsian.com/blog/spring-data-jpa-pagination#spring-datas-slice-and-page)

> 根据您在应用程序中使用的数据库，它可能会随着项目数量的增加而变得昂贵。为了避免这种代价高昂的计数查询，您应该改为返回一个 Slice。与 Page 不同，Slice 只知道下一个 slice 是否可用。此信息足以遍历更大的结果集。Slice 和 Page 都是 Spring Data JPA 的一部分，其中 Page 只是 Slice 的一个子接口，带有几个附加方法。如果您不需要项目和页面的总数，则应该使用 Slice。

```
@Repository
public interface UserRepository extends CrudRepository<Employee, String> {

    Slice<Employee> getByEmployeeId(String employeeId, Pageable pageable);

} 
```

使用 Slice#hasNext 浏览更大结果集的示例代码片段。在 hasNext 方法返回 false 之前，请求的查询条件可能存在数据。

```
 int page = 0;
        int limit = 25;
        boolean hasNext;
        do {
            PageRequest pageRequest = PageRequest.of(page, limit );
            Slice<Employee> employeeSlice = employeeRepository.getByEmployeeId(sourceId, pageRequest);
            ++page;
            hasNext = employeeSlice .hasNext();
        } while (hasNext); 
```

# ios - 没有有效的“aps-environment”权利字符串

> ID：12644751
> 
> 赞同：8
> 
> 时间：2012-09-28T17:35:39.277
> 
> 标签：ios, apple-push-notifications

我在 Google 和 Stack Overflow 上搜索过，但我无法解决这个问题。

我的应用程序有一个 AdHoc 和 Appstore 配置文件，两者都在我的 X Code 控制台中给出错误“没有为应用程序找到有效的 'aps-environment' 权利字符串”，并且我无法发送推送通知。到目前为止，我采取的步骤是： - 在开发门户中编辑配置文件，下载新配置文件并检查 .mobliprovision 文件。成立

aps 环境：生产获取任务允许：假

我还是把它提交到了应用商店，它通过了验证，正在等待审核。当我在 iTunes Connect 门户中检查二进制详细信息时，我可以确定 aps-environment 也被列为“生产”

我可能做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-28T17:41:40.043

在从您使用的应用程序 ID 生成推送证书之后，您是否创建了配置文件？

您很可能首先创建了配置文件，然后生成了推送证书。

供将来参考 PushIO 有一个方便的分步指南来创建 PEM 文件，其中包括有关在生成 PEM 证书后重新生成配置文件的警告：

[http://docs.oracle.com/cloud/latest/marketingcs_gs/OMCFA/ios/distribution-pem/](http://docs.oracle.com/cloud/latest/marketingcs_gs/OMCFA/ios/distribution-pem/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-09T21:54:05.270

我花了几个小时才解决它。鉴于有人使用自定义脚本进行签名和打包，而其他人则使用 xcode 本身，因此只有一种方法可以检查您的应用程序中的内容。转储你的权利

`codesign --display --entitlements :- path/to/MyApp.app`

并检查`aps-environment`和`application-identifier`。

您还应该检查软管条目是否在您的配置文件中并且它们是否匹配

# c# - 使用外部事件中断 while 循环

> ID：12644752
> 
> 赞同：8
> 
> 时间：2012-09-28T17:35:41.530
> 
> 标签：c#, .net, while-loop, workflow-foundation, state-machine

我在 Windows 服务中有一个 while 循环，它运行了一些 x 次，并在从某个文件中读取它们后发起 x 个电话呼叫。现在，如果我想制作一个用户界面，它提供了一个停止电话的选项，即在 while 循环完成之前就中断它。我该怎么做？

假设我有一个函数。

```
DialCalls(x)
{
  for(int i= 0 ; i<x ; i++)
  {
    // Initiate call
  }
} 
```

可以有 2,3 个 DialCalls 函数同时在不同的线程中运行，因为我也在应用程序中进行了线程化。所以基本上什么是打破网页循环的最佳方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T17:40:13.167

使用[任务](http://msdn.microsoft.com/en-us/library/dd537609.aspx)取消（.net 4 中的新功能）：

```
[Fact]
public void StartAndCancel()
{
    var cancellationTokenSource = new CancellationTokenSource();
    var token = cancellationTokenSource.Token;
    var tasks = Enumerable.Repeat(0, 2)
                          .Select(i => Task.Run(() => Dial(token), token))
                          .ToArray(); // start dialing on two threads
    Thread.Sleep(200); // give the tasks time to start
    cancellationTokenSource.Cancel();
    Assert.Throws<AggregateException>(() => Task.WaitAll(tasks));
    Assert.True(tasks.All(t => t.Status == TaskStatus.Canceled));
}

public void Dial(CancellationToken token)
{
    while (true)
    {
        token.ThrowIfCancellationRequested();
        Console.WriteLine("Called from thread {0}", Thread.CurrentThread.ManagedThreadId);
        Thread.Sleep(50);
    }
} 
```

[http://blogs.msdn.com/b/csharpfaq/archive/2010/07/19/parallel-programming-task-cancellation.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2010/07/19/parallel-programming-task-cancellation.aspx) 该任务会吞下异常，因此需要进行一些清理，例如 IDisposable？ [关于任务异常](http://msdn.microsoft.com/en-us/library/dd997415.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T17:41:44.963

您可以在循环中编写 if 语句，以轮询外部事件的状态。

例如，您可以有一个标志：

`bool break_out = false;`

在您的外部事件中，您将 break_out 标志设置为 true：

`break_out = true;`

现在在您的循环中，您可以拥有：

```
DialCalls(x)
{
  for(int i= 0 ; i<x ; i++)
  {
    // Initiate call

    if (break_out) {
        break;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-28T17:43:04.913

创建一个支持取消的事件：

```
public event EventHandler<CancelEventArgs> Call; 
```

如果订阅者存在并取消它，请不要调用：

```
while (true)
{
    var e = new System.ComponentModel.CancelEventArgs();
    if (Call != null)
    {
        Call(this, e);
    }
    if (!e.Cancel)
    {
        // Initiate call
    }
    else
    {
        break;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T17:45:43.947

```
while (!_shouldStop) { /* work in progress */ } 
```

并且在`Stop()`应该在同一个工作类上的方法中，bool 变量必须设置为 true。

此外，如果有任何服务员（如[`AutoResetEvent`](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)），他们必须是`.Set();`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T17:43:14.120

通过使用一个变量来告诉何时中断。

```
private bool _cancel;

void DialCalls(...)
{
    for (int i=0; i<x; i++)
    {
        ...
        if (_cancel) break;
        ....
    }
}

private void SomeEventHandler(object sender, EventArgs e)
{
    _cancel = true;
} 
```

或者

```
for (int i=0; i<x && !_cancel; i++) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T17:43:19.283

有一个易变的全局变量

```
public static volatile bool stop;    
stop=False;

DialCalls(x)
{
  for(int i= 0 ; i<x && !stop ; i++)
  {
    // Initiate call
  }
}

On Button Click => stop =True; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-28T17:44:30.670

在服务上实现一个端点，该端点接受一个切换全局/静态布尔（或其他）变量的消息，并让内部循环在`DialCalls`每次迭代开始时检查所述变量。它不会打断当前正在进行的任何电话通话，但我敢打赌，您不希望该服务在通话过程中挂断，只是不要继续进行下一个通话。这也会中断所有线程；只需确保使变量本身是线程安全的（例如，使用`volatile`关键字）。

# matlab - 优化matlab for循环

> ID：12644758
> 
> 赞同：6
> 
> 时间：2012-09-28T17:35:58.700
> 
> 标签：matlab

我有一个代码的以下循环（计算直方图）。我正在用 Matlab 写作。由于我是 Matlab 的新手，所以我不知道有什么更快的方法可以做到这一点。我目前正在写

```
for i=1:size(b)
    a(b(i)) = a(b(i)) + 1;
end 
```

有没有更快的方法来做到这一点，最好是那些不需要 for 循环的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T17:40:29.247

您可以简单地将其矢量化`a(b) = a(b) + 1`。检查以下内容：

```
>> a = [1 2 3 4];
>> b = [2 4]; %# indices to modify. Be sure that they are in bounds.
>> a(b) = a(b) + 1

a =

     1     3     3     5 
```

如果您多次使用某些索引，那么`accumarray`将有如下帮助：

```
>> a = [1 2 3 4];
>> b = [2 4 2];
>> a = accumarray([1:numel(a) b].',[a ones(size(b))])'

a =

     1     4     3     5 
```

或者，您可以使用：

```
>> a = [1 2 3 4];
>> b = [2 4 2];
>> b = accumarray(b.',ones(size(b)));
>> a(nzIndex) = a(nzIndex) + b(nzIndex)'

a =

     1     4     3     5 
```

有关更多详细信息，请在此处查看[这个不错的答案。](https://stackoverflow.com/a/3955156/198428)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:43:45.103

如果两者`a`都是`b`向量，这应该有效。

```
a = 1:100;
b = 100:-1:1;

a(b) = a(b) + 1; 
```

# java - 数组列表声明

> ID：12644763
> 
> 赞同：1
> 
> 时间：2012-09-28T17:36:21.610
> 
> 标签：java, arraylist

> **可能重复：**
> [ArrayList 声明 Java](https://stackoverflow.com/questions/12321177/arraylist-declaration-java)

在 Java 中，为什么 ArrayList 经常使用 List 来声明？

```
List<String> strList1 = new ArrayList<String>();
ArrayList<String> strList2 = new ArrayList<String>(); 
```

我无法理解这两者之间的区别。这个比那个好吗？或有特定用途？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T17:36:52.343

该类`ArrayList`实现`List`接口。

声明接口类型的对象并使用该接口的实现来实例化它通常是一个好习惯。

这样，您可以在需要时更改实现，但声明的类型保持不变。这样，您可以避免修改太多代码，尤其是在将变量作为参数的方法中。该方法不断获取 a`List`作为参数，而不是某个实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T17:39:01.247

在 Java 中，接口中的 List，而 ArrayList 是实现该接口的几个类之一。第一种表示法的优点是您可以轻松更改使用的实现，而无需更改其余代码。例如，您可能稍后决定使用 Vector 而不是 ArrayList，因此您可以将代码更改为如下所示：

```
List<String> strList1 = new Vector<String>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T17:38:51.193

这里的想法是您正在设计界面而不是具体对象本身。从某种意义上说，接口更灵活，如果您愿意或需要，您可以稍后`strList1`换掉`LinkedList`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T17:39:01.110

**[Liscov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)**

> 可替代性是面向对象编程的一个原则。它指出，在计算机程序中，如果 S 是 T 的子类型，则类型 T 的对象可以用类型 S 的对象替换（即，类型 S 的对象可以替换类型 T 的对象）而不改变任何该程序的理想属性（正确性、执行的任务等）。

`ArrayList`是 的子类型`List`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-28T17:40:26.003

它对这个问题并不特别，但始终建议使用接口而不是类来保持引用，这使您可以随时更改实现。例如，您可以随时将其更改为链接列表

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-28T17:41:56.783

当您将代码绑定到接口时，您可以在需要时非常轻松地更改实现类。

如果您按具体类进行编码，则可以通过使您的代码绑定到该类来使用特定于该类的功能。未来的更换变得困难。

要更好地理解该功能，请考虑来自第三方的类。您不需要将您的代码依赖于任何特定的供应商。您可以随时将课程更改为其他供应商。两者都受界面约束，因此更改很容易。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-28T17:43:38.317

我认为基本上，以前的回复是说您可以将 List 向上转换为 ArrayList 或另一个也实现 List 接口的对象。

# database - 自动生成访问报告文件名

> ID：12644765
> 
> 赞同：0
> 
> 时间：2012-09-28T17:36:37.707
> 
> 标签：database, ms-access

在 Access 2007 中，我有一个为员工创建任务的数据库。表格中的任务信息输入到表单中，然后从 Outlook 以 pdf 格式发送。每个任务都有一个唯一的任务编号。现在我正在使用“SendObject”宏将报告（任务分配报告）作为 pdf 格式发送，并且文件以该名称保存。

有什么方法可以保存并发送到 Outlook 的 pdf 的名称具有以下生成的格式“Task Assignment FY13-###”，### 是表中的任务编号？

我愿意从宏中分离并使用 VBA，只是仍然不确定如何让名称自动生成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:40:28.110

您可以输出到，但您需要编写代码添加附件：

```
sName = "Task Assignment FY13-" & Me.TaskID
DoCmd.OutputTo acOutputReport, "MyReport", acFormatPDF, sName 
```

或者您可以在每次运行之前在代码中重命名报告。

# python - 2.类级别的django Manager？

> ID：12644766
> 
> 赞同：1
> 
> 时间：2012-09-28T17:36:43.740
> 
> 标签：python, django, django-models, django-managers

我想将模型的管理器写入模型类本身。

```
class Post(models.Model):
    title = models.CharField(max_length=50)
    slug = models.SlugField(max_length=50, blank=True, unique=True)
    body = models.TextField(blank=True)
    pub_date = models.DateTimeField(blank=True)
    mod_date = models.DateTimeField(blank=True)
    tags = models.ManyToManyField(Tag)

    class Meta:
        ordering = ['pub_date'] # Newest first

    class Manager(models.Manager):

        def by_slug(self, slug):
            slug = slug.strip().lower()
            return self.get(slug=slug)

    objects = Manager()

    def __unicode__(self):
        return self.title

    def save(self, *args, **kwargs):
        self.slug = self.slug or generate_slug(self.title)
        self.pub_date = self.pub_date or timezone.now()
        self.mod_date = timezone.now()
        return super(Post, self).save(*args, **kwargs) 
```

但我收到以下错误：

```
Traceback (most recent call last):
  File "C:\Users\niklas\Desktop\blog_project\manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "C:\Python27\lib\site-packages\django-1.4.1-py2.7.egg\django\core\management\__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "C:\Python27\lib\site-packages\django-1.4.1-py2.7.egg\django\core\management\__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Python27\lib\site-packages\django-1.4.1-py2.7.egg\django\core\management\base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "C:\Python27\lib\site-packages\django-1.4.1-py2.7.egg\django\core\management\base.py", line 231, in execute
    self.validate()
  File "C:\Python27\lib\site-packages\django-1.4.1-py2.7.egg\django\core\management\base.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
  File "C:\Python27\lib\site-packages\django-1.4.1-py2.7.egg\django\core\management\validation.py", line 30, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File "C:\Python27\lib\site-packages\django-1.4.1-py2.7.egg\django\db\models\loading.py", line 158, in get_app_errors
    self._populate()
  File "C:\Python27\lib\site-packages\django-1.4.1-py2.7.egg\django\db\models\loading.py", line 64, in _populate
    self.load_app(app_name, True)
  File "C:\Python27\lib\site-packages\django-1.4.1-py2.7.egg\django\db\models\loading.py", line 88, in load_app
    models = import_module('.models', app_name)
  File "C:\Python27\lib\site-packages\django-1.4.1-py2.7.egg\django\utils\importlib.py", line 35, in import_module
    __import__(name)
  File "C:\Users\niklas\Desktop\blog_project\blog\models.py", line 48, in <module>
    class Post(models.Model):
  File "C:\Python27\lib\site-packages\django-1.4.1-py2.7.egg\django\db\models\base.py", line 99, in __new__
    new_class.add_to_class(obj_name, obj)
  File "C:\Python27\lib\site-packages\django-1.4.1-py2.7.egg\django\db\models\base.py", line 219, in add_to_class
    value.contribute_to_class(cls, name)
TypeError: Error when calling the metaclass bases
    unbound method contribute_to_class() must be called with Manager instance as first argument (got ModelBase instance instead) 
```

你能告诉我为什么会发生这个错误以及我想要做的事情是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:45:46.900

看来你不能，这是Django的一个错误，你可以报告它:)

# java - 如何在编译时验证方法参数是否来自某个集合

> ID：12644768
> 
> 赞同：0
> 
> 时间：2012-09-28T17:36:51.667
> 
> 标签：java

我有一个采用字符串参数（上传）的方法，它只能有两个值：真或假。有没有办法在编译时检查是否将正确的值传递给此方法？我尝试使用枚举，但就运行时检查而言：

```
public static enum eTrueFalse {TRUE, FALSE};
...

public Result loadSDP(String sdpFile, String name, String upload){
    StringBuilder sbOptionalParameters = new StringBuilder();
    if (upload != null){
        if (isTrueFalse(upload)){
            sbOptionalParameters.append(" --upload ");
            sbOptionalParameters.append(upload);
        } else {
            throw new IllegalArgumentException("The 'upload' parameter takes only 'true' or 'false' value.  Cannot handle: "
                    + upload);
        }
    }
    ...
}

private boolean isTrueFalse(String st) {
    for(eTrueFalse tf : eTrueFalse.values()){
        if(tf.name().equalsIgnoreCase(st)){
            return true;
        }
    }
    return false;
} 
```

当然，这个问题也适用于具有超过 2 个预定义值的参数的方法。

我想在编译时进行检查，因为执行非常耗时。尽早完成检查会很棒。任何指针表示赞赏。

**编辑：** 上面的例子不是一个好例子，因为它可以很容易地用布尔（或布尔）解决，而我正在寻找一个更通用的解决方案。这是一个（希望）更好的例子。我有一个枚举：

```
public enum MEDIA_TYPE {XML, JSON}; 
```

以及采用它的方法：

```
public ClientResponse get(String address, String user,
        String password, MEDIA_TYPE mediaType) {
...
return webResource.queryParams(new 
        MultivaluedMapImpl()).accept(mediaType).get(ClientResponse.class); 
```

}

上面的问题是accept方法需要String，所以我需要将我的枚举转换为String。最好的方法是什么？切换语句？向枚举类添加构造函数和getter？其他？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T17:38:46.273

如果您希望在编译时进行检查，那么您需要使用类型系统——特别`boolean`是对于只能是`true`or的值`false`。

但是，如果您有代码调用具有 String 字段的此方法，则任何转换都`boolean`只会在运行时发生，因此您无法验证`Boolean.valueOf(str)`在编译时不会引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:11:41.253

如果上传变量只取真或假，实际上是一个布尔值。因此最好使用 Boolean 作为参数类，这将导致参数类的编译时类型检查。
当参数类仍然是字符串时，无法在编译时强制执行此类检查，因为字符串参数的值是在运行时评估的。

# java - Android Java 绘制多条线

> ID：12644771
> 
> 赞同：0
> 
> 时间：2012-09-28T17:37:12.683
> 
> 标签：java, android

我已经有了 DrawView，但一次只能画 1 条线。如果我再次尝试绘制最后一行删除，我该如何“保存”它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T21:01:13.407

onDraw 刷新整个画布。要打印多行，您可以将这些行存储在模型中（例如 Line 对象的集合）：

```
@Override
public void onDraw(Canvas canvas) {
    for (Line l : lines) {
        canvas.drawLine(l.x1, l.y1, l.x2, l.y2, paint);
    }
} 
```

# java - Swing around 对话框创建/销毁的多线程问题

> ID：12644778
> 
> 赞同：-2
> 
> 时间：2012-09-28T17:37:59.457
> 
> 标签：java, multithreading, swing, jdialog, event-dispatch-thread

> **可能的重复：**
> [Java 中的 SwingWorker](https://stackoverflow.com/questions/12641887/swingworker-in-java)

我有几个需要一起工作的类，但它们不是。

一方面，我有主要：

```
public class Main
{

 public static void main(String[] args)
 {

  SwingUtilities.invokeLater(new Runnable()
  {

   @Override
   public void run()
   {

   //JFrame dummy for JDialog errors
   modal = new JFrame();

   new PrimaryErrorDialog("Title", "Message", e, false);

    JFrame masterWindow = new JFrame();
     masterWindow.setVisible();
   }
  }
 }
} 
```

它创建 PrimaryErrorDialog 类：

```
private JDialog dialog = this;
private JTextArea text;
private JPanel buttonContainer;
private JButton sendErrorReportT, sendErrorReportF;

public PrimaryErrorDialog(String title, String message,
final Exception error, final boolean exit)
{
 super(Main.modal, title, true);

 //JButton for sending error report
 sendErrorReportT = new JButton("Send Error Report");
 sendErrorReportT.addActionListener(new ActionListener()
 {
  @Override
  public void actionPerformed(ActionEvent e)
  {
   dialog.dispose();

   dialog = new JDialog(Main.modal, "Sending...", true);

   Worker thread = new Worker(error);
   thread.start();

   JProgressBar progress = new JProgressBar();
   progress.setIndeterminate(true);

   dialog.add(progress);    
   dialog.pack();
   dialog.setVisible(true);
  }
 });

 //JButton for not sending error report
 sendErrorReportF = new JButton("Don't send error report");
 sendErrorReportF.addActionListener(new ActionListener()
 {
  @Override
  public void actionPerformed(ActionEvent e)
   {
    dialog.dispose();

    if (exit)
    {
     System.exit(0);
    }
   }
  });

 buttonContainer = new JPanel();
 buttonContainer.add(sendErrorReportT);
 buttonContainer.add(sendErrorReportF);

 add(text);
 add(buttonContainer);

 pack();
 setLocationRelativeTo(null);
 setVisible(true);
}

public void cleanUpAndContinue()
 {
  dialog.dispose();
  dialog = new JDialog(Main.modal, "title", true);
  dialog.add(/*Jbutton with listener that disposes this dialog*/)
  dialog.setVisible(true);
 } 
```

它调用扩展 Thread 的 Worker 类：

```
public class Worker extends Thread
{
    Exception e;

    public Worker(Exception error)
    {
        e = error;
    }

    @Override
    public void run()
    {
    //do something that takes time
     PrimaryErrorDialog.cleanUpAndContinue();
    } 
```

它返回到 PrimaryErrorDialog，然后它必须通知用户任务已完成，然后终止该对话框。

然后我们回到创建 masterWindow 的 main 。

所有这些代码都在创建 masterWindow 之前执行，因为该段在发生错误时运行（如果 LAF 不存在，.proprties 文件丢失等）...

这就是我创建虚拟 JFrame 的原因，所以 JDialog 可以附加到它，我不想让它成为 JFrame。

这段代码也稍后在程序中执行，对于“真正的”运行时错误，一些类只是有一点不同的参数和/或构造函数。

但是，这不起作用，我已经以百万种方式尝试过，我尝试使用 SwingWorker，似乎没有做我想做的事。通常甚至没有到达电子邮件代码，或者程序不等待对话框被释放......

而我想要什么？

发生错误。弹出对话框告诉我发生了错误并询问我是否要发送错误报告。我说不 - 对话框关闭，如果错误是致命的，则关闭整个程序。我说是的 - 对话框关闭，新的对话框打开，进度条不确定，而带有堆栈跟踪的电子邮件正在后台发送。电子邮件被发送，带有进度条的对话框关闭，并打开一个新的对话框，告诉我我的错误报告已发送。我按下 ok 并关闭对话框，如果错误是致命的，则删除整个程序，否则，继续从 Main 类离开的地方。

注意：任何类都可能发生错误，它不仅仅来自 Main...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T21:25:10.210

我没有读过你之前的问题，但是......

您遇到的基本问题是需要通知对话框（位于 EDT 内）后台线程已完成（并尽可能向用户提供反馈）。

这[在 Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)课程中有所介绍。

下面是一个简单的概念证明。个人，我通常会构建一个自定义面板并将其放在 a 上`JDialog`，但这只是一个概念证明。

```
public class TestSwingWorker {

    public static void main(String[] args) {

        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {

                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                final JDialog dialog = new JDialog((Frame)null, "Happy, Happy, Joy, Joy", true);
                // This is so I can get my demo to work, you won't need it...
                dialog.addWindowListener(new WindowAdapter() {

                    @Override
                    public void windowClosing(WindowEvent e) {
                        System.exit(0);
                    }

                });

                JPanel panel = new JPanel(new GridBagLayout());
                panel.setBorder(new EmptyBorder(8, 8, 8, 8));
                dialog.setContentPane(panel);

                // You'll need you own icon...
                JLabel lblIcon = new JLabel(new ImageIcon(getClass().getResource("/waiting-64.png")));
                JLabel lblMessage = new JLabel("<html>Hard and work here<br>Please wait...</html>");
                final JProgressBar progressBar = new JProgressBar();

                GridBagConstraints gbc = new GridBagConstraints();
                gbc.gridx = 0;
                gbc.gridy = 0;
                gbc.anchor = GridBagConstraints.NORTH;
                gbc.weighty = 1;
                gbc.insets = new Insets(2, 2, 2, 2);
                gbc.gridheight = GridBagConstraints.REMAINDER;
                dialog.add(lblIcon, gbc);

                gbc.gridheight = 1;
                gbc.gridx = 1;
                gbc.gridy = 0;
                gbc.anchor = GridBagConstraints.WEST;
                gbc.weighty = 0;
                gbc.weightx = 1;
                dialog.add(lblMessage, gbc);

                gbc.gridy = 1;
                gbc.anchor = GridBagConstraints.NORTH;
                gbc.weighty = 1;
                dialog.add(progressBar, gbc);

                dialog.pack();
                dialog.setLocationRelativeTo(null);

                MyWorker worker = new MyWorker();
                // Get notification back from the worker...
                worker.addPropertyChangeListener(new PropertyChangeListener() {

                    @Override
                    public void propertyChange(PropertyChangeEvent evt) {

                        MyWorker worker = (MyWorker) evt.getSource();
                        // Progress has been updated
                        if (evt.getPropertyName().equalsIgnoreCase("progress")) {

                            progressBar.setValue((Integer)evt.getNewValue());

                        // The state of the worker has changed...
                        } else if (evt.getPropertyName().equalsIgnoreCase("state")) {

                            if (worker.getState().equals(SwingWorker.StateValue.DONE)) {

                                dialog.dispose();

                            }

                        }

                    }
                });

                worker.execute();

                dialog.setVisible(true);

            }

        });

    }

    protected static class MyWorker extends SwingWorker<Object, Object> {

        @Override
        protected Object doInBackground() throws Exception {

            // My long running task...
            for (int index = 0; index < 100; index++) {

                // Change this to make it faster or slower...
                Thread.sleep(250);
                setProgress(index);

            }

            return null;

        }

    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T17:45:31.263

*   肮脏的黑客包裹`dialog.setVisible(true);`成`invokeLater()`

*   使用`SwingWorker`or`Runnable#Thread`代替 or 普通`Thread`

*   是否存在您忽略答案的问题，尤其是您之前问题的评论

*   Swing Gui 不关心 Thread 的输出，因为没有为 Event Dispatch Thread 实现通知器，你必须通过 invokeLater 来调用它，或者使用`SwingWorker`,

*   `SwingWorkers`方法`done`，`publish`并且`progress`可以正确通知 EDT

# c# - DataTable 事件和行状态

> ID：12644779
> 
> 赞同：1
> 
> 时间：2012-09-28T17:38:17.730
> 
> 标签：c#, ado.net

我允许我的用户在绑定到 DataTable 的 DataGridView 中添加/编辑/删除数据。这一切都很好。数据很好地更新回数据库。但是，我在 DataTable 中有一些我不想在 DataGridView 中显示的字段，例如 CreatedOn 和 CreatedBy。在更新到数据适配器之前，我需要根据行的状态将值写入这些列。在这种情况下，我是否应该在数据表中为 TableNewRow 和 RowChanged 连接一些事件处理程序，并在更新数据适配器和发生 AcceptChanges 之前以这种方式操作行列？

感谢您的任何想法。

瑞安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T18:38:15.127

这就是我想出来的，而且效果很好。在我将数据表传回我的数据访问类之后，我循环表中的行并检查 DataRowState。我根据 DataRowState 设置列值。

```
foreach (DataRow row in dt.Rows)
            {
            if (row.RowState == DataRowState.Added)
                {
                row["CreatedOn"] = DateTime.Now;
                row["CreatedBy"] = GlobalProp.UserName;
                row["ModifiedOn"] = DateTime.Now;
                row["ModifiedBy"] = GlobalProp.UserName;
                }
            else if (row.RowState == DataRowState.Modified)
                {
                row["ModifiedOn"] = DateTime.Now;
                row["ModifiedBy"] = GlobalProp.UserName;
                }
            } 
```

希望对其他人有所帮助！

R

# fullcalendar - WP 日历开始时间

> ID：12644781
> 
> 赞同：0
> 
> 时间：2012-09-28T17:38:27.960
> 
> 标签：fullcalendar

我想删除日历中事件的开始时间尝试了以下 .fc-view-month .fc-event-time{ display : none; }

和 .fc-event-time{ 显示：无；} 但是事件的时间仍然显示在日历中

我怎样才能删除开始时间，所以我只能让事件显示在日历上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T12:56:46.733

你放在哪里了`.fc-event-time{ display : none; }`？我将它粘贴到我正在使用的主题的 style.css 中，效果非常好！不再出现开始时间！

# windows-7 - 用于更改屏幕方向的 Powershell 脚本

> ID：12644786
> 
> 赞同：5
> 
> 时间：2012-09-28T15:18:38.923
> 
> 标签：windows-7, multiple-monitors, powershell, orientation, for-loop

我编写了一个脚本来将主屏幕方向更改为纵向。我的屏幕是 1920X1200 它运行并且没有报告错误。但屏幕没有像我预期的那样旋转。

该代码是从 Set-ScreenResolution (Andy Schneider) 修改的。
有人可以帮我看看吗？

一些参考网站：

1.  设置屏幕分辨率：http: [//gallery.technet.microsoft.com/ScriptCenter/2a631d72-206d-4036-a3f2-2e150f297515/](http://gallery.technet.microsoft.com/ScriptCenter/2a631d72-206d-4036-a3f2-2e150f297515/)

2.  更改或标识的 C 代码 (MSDN) 以编程方式更改屏幕方向：http: [//msdn.microsoft.com/en-us/library/ms812499.aspx](http://msdn.microsoft.com/en-us/library/ms812499.aspx)

我的代码：

```
Function Set-ScreenOrientation { 

$pinvokeCode = @" 

using System; 
using System.Runtime.InteropServices; 

namespace Resolution 
{ 

    [StructLayout(LayoutKind.Sequential)] 
    public struct DEVMODE1 
    { 
        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 32)] 
        public string dmDeviceName; 
        public short dmSpecVersion; 
        public short dmDriverVersion; 
        public short dmSize; 
        public short dmDriverExtra; 
        public int dmFields; 

        public short dmOrientation; 
        public short dmPaperSize; 
        public short dmPaperLength; 
        public short dmPaperWidth; 

        public short dmScale; 
        public short dmCopies; 
        public short dmDefaultSource; 
        public short dmPrintQuality; 
        public short dmColor; 
        public short dmDuplex; 
        public short dmYResolution; 
        public short dmTTOption; 
        public short dmCollate; 
        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 32)] 
        public string dmFormName; 

        [MarshalAs(UnmanagedType.U4)] 
        public short dmDisplayOrientation

        public short dmLogPixels; 
        public short dmBitsPerPel; 
        public int dmPelsWidth; 
        public int dmPelsHeight; 

        public int dmDisplayFlags; 
        public int dmDisplayFrequency; 

        public int dmICMMethod; 
        public int dmICMIntent; 
        public int dmMediaType; 
        public int dmDitherType; 
        public int dmReserved1; 
        public int dmReserved2; 

        public int dmPanningWidth; 
        public int dmPanningHeight; 
    }; 

    class User_32 
    { 
        [DllImport("user32.dll")] 
        public static extern int EnumDisplaySettings(string deviceName, int modeNum, ref DEVMODE1 devMode); 
        [DllImport("user32.dll")] 
        public static extern int ChangeDisplaySettings(ref DEVMODE1 devMode, int flags); 

        public const int ENUM_CURRENT_SETTINGS = -1; 
        public const int CDS_UPDATEREGISTRY = 0x01; 
        public const int CDS_TEST = 0x02; 
        public const int DISP_CHANGE_SUCCESSFUL = 0; 
        public const int DISP_CHANGE_RESTART = 1; 
        public const int DISP_CHANGE_FAILED = -1; 
    } 

    public class PrmaryScreenOrientation
    { 
        static public string ChangeOrientation() 
        { 

            DEVMODE1 dm = GetDevMode1(); 

            if (0 != User_32.EnumDisplaySettings(null, User_32.ENUM_CURRENT_SETTINGS, ref dm)) 
            { 
                dm.dmDisplayOrientation = DMDO_90
                dm.dmPelsWidth = 1200; 
                dm.dmPelsHeight = 1920; 

                int iRet = User_32.ChangeDisplaySettings(ref dm, User_32.CDS_TEST); 

                if (iRet == User_32.DISP_CHANGE_FAILED) 
                { 
                    return "Unable To Process Your Request. Sorry For This Inconvenience."; 
                } 
                else 
                { 
                    iRet = User_32.ChangeDisplaySettings(ref dm, User_32.CDS_UPDATEREGISTRY); 
                    switch (iRet) 
                    { 
                        case User_32.DISP_CHANGE_SUCCESSFUL: 
                            { 
                                return "Success"; 
                            } 
                        case User_32.DISP_CHANGE_RESTART: 
                            { 
                                return "You Need To Reboot For The Change To Happen.\n If You Feel Any Problem After Rebooting Your Machine\nThen Try To Change Resolution In Safe Mode."; 
                            } 
                        default: 
                            { 
                                return "Failed"; 
                            } 
                    } 

                } 

            } 
            else 
            { 
                return "Failed To Change."; 
            } 
        } 

        private static DEVMODE1 GetDevMode1() 
        { 
            DEVMODE1 dm = new DEVMODE1(); 
            dm.dmDeviceName = new String(new char[32]); 
            dm.dmFormName = new String(new char[32]); 
            dm.dmSize = (short)Marshal.SizeOf(dm); 
            return dm; 
        } 
    } 
} 

"@ 

Add-Type $pinvokeCode -ErrorAction SilentlyContinue 
[Resolution.PrmaryScreenOrientation]::ChangeOrientation() 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-21T22:41:51.217

```
Function Set-ScreenResolutionAndOrientation { 

<# 
    .Synopsis 
        Sets the Screen Resolution of the primary monitor 
    .Description 
        Uses Pinvoke and ChangeDisplaySettings Win32API to make the change 
    .Example 
        Set-ScreenResolutionAndOrientation         
#>

$pinvokeCode = @" 

using System; 
using System.Runtime.InteropServices; 

namespace Resolution 
{ 

    [StructLayout(LayoutKind.Sequential)] 
    public struct DEVMODE 
    { 
       [MarshalAs(UnmanagedType.ByValTStr,SizeConst=32)]
       public string dmDeviceName;

       public short  dmSpecVersion;
       public short  dmDriverVersion;
       public short  dmSize;
       public short  dmDriverExtra;
       public int    dmFields;
       public int    dmPositionX;
       public int    dmPositionY;
       public int    dmDisplayOrientation;
       public int    dmDisplayFixedOutput;
       public short  dmColor;
       public short  dmDuplex;
       public short  dmYResolution;
       public short  dmTTOption;
       public short  dmCollate;

       [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 32)]
       public string dmFormName;

       public short  dmLogPixels;
       public short  dmBitsPerPel;
       public int    dmPelsWidth;
       public int    dmPelsHeight;
       public int    dmDisplayFlags;
       public int    dmDisplayFrequency;
       public int    dmICMMethod;
       public int    dmICMIntent;
       public int    dmMediaType;
       public int    dmDitherType;
       public int    dmReserved1;
       public int    dmReserved2;
       public int    dmPanningWidth;
       public int    dmPanningHeight;
    }; 

    class NativeMethods 
    { 
        [DllImport("user32.dll")] 
        public static extern int EnumDisplaySettings(string deviceName, int modeNum, ref DEVMODE devMode); 
        [DllImport("user32.dll")] 
        public static extern int ChangeDisplaySettings(ref DEVMODE devMode, int flags); 

        public const int ENUM_CURRENT_SETTINGS = -1; 
        public const int CDS_UPDATEREGISTRY = 0x01; 
        public const int CDS_TEST = 0x02; 
        public const int DISP_CHANGE_SUCCESSFUL = 0; 
        public const int DISP_CHANGE_RESTART = 1; 
        public const int DISP_CHANGE_FAILED = -1;
        public const int DMDO_DEFAULT = 0;
        public const int DMDO_90 = 1;
        public const int DMDO_180 = 2;
        public const int DMDO_270 = 3;
    } 

    public class PrmaryScreenResolution 
    { 
        static public string ChangeResolution() 
        { 

            DEVMODE dm = GetDevMode(); 

            if (0 != NativeMethods.EnumDisplaySettings(null, NativeMethods.ENUM_CURRENT_SETTINGS, ref dm)) 
            {

                // swap width and height
                int temp = dm.dmPelsHeight;
                dm.dmPelsHeight = dm.dmPelsWidth;
                dm.dmPelsWidth = temp;

                // determine new orientation based on the current orientation
                switch(dm.dmDisplayOrientation)
                {
                    case NativeMethods.DMDO_DEFAULT:
                        dm.dmDisplayOrientation = NativeMethods.DMDO_270;
                        break;
                    case NativeMethods.DMDO_270:
                        dm.dmDisplayOrientation = NativeMethods.DMDO_180;
                        break;
                    case NativeMethods.DMDO_180:
                        dm.dmDisplayOrientation = NativeMethods.DMDO_90;
                        break;
                    case NativeMethods.DMDO_90:
                        dm.dmDisplayOrientation = NativeMethods.DMDO_DEFAULT;
                        break;
                    default:
                        // unknown orientation value
                        // add exception handling here
                        break;
                }

                int iRet = NativeMethods.ChangeDisplaySettings(ref dm, NativeMethods.CDS_TEST); 

                if (iRet == NativeMethods.DISP_CHANGE_FAILED) 
                { 
                    return "Unable To Process Your Request. Sorry For This Inconvenience."; 
                } 
                else 
                { 
                    iRet = NativeMethods.ChangeDisplaySettings(ref dm, NativeMethods.CDS_UPDATEREGISTRY); 
                    switch (iRet) 
                    { 
                        case NativeMethods.DISP_CHANGE_SUCCESSFUL: 
                            { 
                                return "Success"; 
                            } 
                        case NativeMethods.DISP_CHANGE_RESTART: 
                            { 
                                return "You Need To Reboot For The Change To Happen.\n If You Feel Any Problem After Rebooting Your Machine\nThen Try To Change Resolution In Safe Mode."; 
                            } 
                        default: 
                            { 
                                return "Failed To Change The Resolution"; 
                            } 
                    } 

                } 

            } 
            else 
            { 
                return "Failed To Change The Resolution."; 
            } 
        } 

        private static DEVMODE GetDevMode() 
        { 
            DEVMODE dm = new DEVMODE(); 
            dm.dmDeviceName = new String(new char[32]); 
            dm.dmFormName = new String(new char[32]); 
            dm.dmSize = (short)Marshal.SizeOf(dm); 
            return dm; 
        } 
    } 
} 

"@ 

Add-Type $pinvokeCode -ErrorAction SilentlyContinue 
[Resolution.PrmaryScreenResolution]::ChangeResolution() 
}

Set-ScreenResolutionAndOrientation 
```

# javascript - 使用 MySQL/Javascript 计算百分比

> ID：12644797
> 
> 赞同：3
> 
> 时间：2012-09-28T17:39:21.500
> 
> 标签：javascript, mysql, percentage

我正在尝试使用 Entrinsik 的 Informer 进行麻烦的 SQL 查询。我希望 Informer 对我的结果进行计算，以使用 javascript 计算百分比。但是，Informer 无法访问列中的数据（即百分比的总数），因此我需要我的 SQL 查询来为我生成此数据。结果当前如下所示：

```
refund_code    refund_amount    month_group
-----------    -------------    -----------
ref1               10           january
ref2               20           january
ref3               30           january
ref1               40           february
ref2               50           february
ref3               60           february 
```

我想要的是这样的：

```
refund_code    refund_amount    month_group    month_total  
-----------    -------------    -----------    -----------  
ref1               10           january                 60  
ref2               20           january                 60  
ref3               30           january                 60  
ref1               40           february               150  
ref2               50           february               150  
ref3               60           february               150 
```

我的查询如下：

```
SELECT mr.month_group,
    bd.transaction_code AS refund_code,
    SUM(bd.extended) AS refund_amount
FROM   billing_details AS bd
    LEFT JOIN monthly_ranges AS mr
        ON ( bd.entry_date BETWEEN mr.start_date AND mr.end_date )
WHERE  bd.transaction_code IN ( 'REFPRI', 'REFSEC', 'REFPT', 'REFREQPRI' )
    AND bd.entry_date >= '2012-01-05'
GROUP BY mr.month_group, bd.transaction_code
ORDER BY mr.month_group, bd.transaction_code 
```

生成每月总计表的第二个查询如下所示：

```
SELECT mr.month_group,
    SUM(bd.extended) AS refund_amount
FROM   billing_details AS bd
    LEFT JOIN monthly_ranges AS mr
        ON ( bd.entry_date BETWEEN mr.start_date AND mr.end_date )
WHERE  bd.transaction_code IN ( 'REFPRI', 'REFSEC', 'REFPT', 'REFREQPRI' )
    AND bd.entry_date >= '2012-01-05'
GROUP BY mr.month_group
ORDER BY mr.month_group 
```

那么有没有办法将两者结合起来呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:03:32.573

从技术上讲，您可以从字面上将两者作为子查询加入。

IE

```
SELECT m.refund_code, m.refund_amount, m.month_group, t.month_total
 FROM (your refund query above) m
 JOIN (your total query above) t
   ON m.month_group = t.month_group 
```

只需确保将“总查询”中的“refund_amount”重命名为“month_total”或类似名称。

# r - ggplot2 100% 饼图错误

> ID：12644798
> 
> 赞同：1
> 
> 时间：2012-09-28T17:39:29.680
> 
> 标签：r, ggplot2

我在 ggplot 中的饼图有问题。这是代码的示例。

```
library(ggplot2)
library(scales)

overtime.by.dow <- structure(list(dow = structure(c(2L, 2L, 3L, 3L, 4L, 4L, 5L, 
5L, 6L, 6L), .Label = c("Sun", "Mon", "Tue", "Wed", "Thu", "Fri", 
"Sat"), class = "factor"), Overtime = structure(c(1L, 2L, 1L, 
2L, 1L, 2L, 1L, 2L, 1L, 2L), .Label = c("FALSE", "TRUE"), class = "factor"), 
    Freq = c(2L, 48L, 0L, 51L, 0L, 50L, 0L, 50L, 44L, 6L), Percent = c(4, 
    96, 0, 100, 0, 100, 0, 100, 88, 12), Per.txt = c("2\n4%", 
    "48\n96%", "0\n0%", "51\n100%", "0\n0%", "50\n100%", "0\n0%", 
    "50\n100%", "44\n88%", "6\n12%"), txt.pos = c(2, 52, 0, 50, 
    0, 50, 0, 50, 44, 94), cumsum = c(4, 100, 0, 100, 0, 100, 
    0, 100, 88, 100)), .Names = c("dow", "Overtime", "Freq", 
"Percent", "Per.txt", "txt.pos", "cumsum"), row.names = c(2L, 
9L, 3L, 10L, 4L, 11L, 5L, 12L, 6L, 13L), class = "data.frame")

      ggplot(data =  overtime.by.dow,
             aes(x="",
                 y=Percent,
                 fill = Overtime)) +
      geom_bar(width = 1) +
      facet_wrap(~dow) +
      xlab('') +
      geom_text(aes(y = txt.pos, label = Per.txt)) +
      coord_polar(theta = "y") +
      scale_fill_manual(values = c('green', 'red')) 
```

我收到以下错误。我认为问题是因为我有一些 100% 的馅饼。代码将成为自动过程的一部分，100% 的馅饼很可能，我确实想展示它们。有没有什么技巧可以让你拥有 100% 的馅饼？

```
Error in lf$dist[idx] <- spiral_arc_length(lf$slope[idx], lf$tn1[idx],  : 
  NAs are not allowed in subscripted assignments 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T20:37:56.397

通过将小数加到零来解决问题

```
overtime.by.dow$Percent[overtime.by.dow$Percent == 0] <- 0.01 
```

# ruby-on-rails - jruby-head Python...ArgumentError：格式错误的版本号字符串 2.7.2+

> ID：12644805
> 
> 赞同：0
> 
> 时间：2012-09-28T17:39:54.510
> 
> 标签：ruby-on-rails, regex, jruby, therubyracer

jruby-head version.rb @ /.rvm/rubies/jruby-head/lib/ruby/shared/rubygems/version.rb 具有以下正则表达式：

```
VERSION_PATTERN = '[0-9]+(\.[0-9a-zA-Z]+)*' # :nodoc: 
```

由于末尾的加号，此 VERSION_PATTERN 未找到 pythons 版本：

```
2.7.2+ 
```

我试过修改：

```
/.rvm/rubies/jruby-head/lib/ruby/shared/rubygems/version.rb 
```

第 148 行至：

```
VERSION_PATTERN = '[0-9]+(\.[0-9a-zA-Z]+)*\+?' # :nodoc: 
```

匹配那个加号，但它不起作用。我想我的正则表达式错了。

使用 jruby 头：

```
% ruby --version
jruby 1.7.0.RC1 (1.9.3p203) 2012-09-26 4f2c44e on OpenJDK 64-Bit Server VM 1.6.0_24-b24 [linux-amd64]

% env |grep JRUBY
JRUBY_OPTS=-Xcext.enabled=true

% rvm list
rvm rubies

=> jruby-head [ x86_64 ]
ruby-1.9.2-p320 [ x86_64 ]
* ruby-1.9.3-p194 [ x86_64 ]

% python --version
  Python 2.7.2+

% gem install therubyracer
WARNING:  Error fetching data: bad response Internal Server Error 500 (http://production.s3.rubygems.org/latest_specs.4.8.gz)
Building native extensions.  This could take a while...
ERROR:  Error installing therubyracer:
ERROR: Failed to build gem native extension.

    /.rvm/rubies/jruby-head/bin/jruby extconf.rb

/.rvm/rubies/jruby-head/lib/ruby/shared/mkmf.rb:14: Use RbConfig instead of obsolete and deprecated Config.
Checking for Python...ArgumentError: Malformed version number string 2.7.2+
initialize at /.rvm/rubies/jruby-head/lib/ruby/shared/rubygems/version.rb:187 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T20:06:32.817

`therubyracer`与 jruby 不兼容。

请参阅此答案以获取替代方法：

[https://stackoverflow.com/a/8994291/498594](https://stackoverflow.com/a/8994291/498594)

# iphone - iTunes Artwork 文件的格式是什么？

> ID：12644815
> 
> 赞同：5
> 
> 时间：2012-09-28T17:40:30.340
> 
> 标签：iphone, itunes

我即将完成我的移动应用程序，现在我必须创建 iTunes Artwork 文件。在我下载以供参考的示例中，我看不到该文件的任何扩展名。

如何将我的 Vector 图像导出到 iTunes Artwork 文件中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T17:42:33.027

这是一个没有 .png 扩展名的 PNG 图像。

参考：http: [//developer.apple.com/library/ios/#qa/qa1686/_index.html](http://developer.apple.com/library/ios/#qa/qa1686/_index.html)

# visual-studio - Visual Studio .msi 作为 32 位而不是 64 位运行

> ID：12644816
> 
> 赞同：0
> 
> 时间：2012-09-28T17:40:32.727
> 
> 标签：visual-studio, installation, 64-bit, windows-installer

我正在使用 Visual Studio 为我的项目生成安装程序。我正在将解决方案编译为 Any CPU，并且我将安装程序中的目标平台设置为 x64。问题是当我运行安装程序时，它运行为 x86，而不是 x64。这是一个问题，因为我使用的 Add-In express 要求代码在安装时可执行，并且我访问了项目中的 64 位注册表。结果，程序安装成功，但仅在由于在 WOW6432Node 中查找注册表项而不是标准 64 位目录而引发大约 10 个错误之后。

如何使安装程序以 64 位而不是 32 位运行，或者这是不可能的。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T08:44:22.137

Visual Studio 始终生成 x86 兼容的安装项目。要访问 WOW6432Node 键，您需要创建一个自定义操作应用程序（为 ANYCPU 构建的 .exe 文件）并将其添加到安装项目的自定义操作编辑器中。在这种情况下，您的代码将默认在 x64 平台上作为 x64 应用程序运行。

# html - 为什么 Visual Studio 2010 / Expression Web 4 默认使用 XHTML？

> ID：12644818
> 
> 赞同：1
> 
> 时间：2012-09-28T17:40:40.347
> 
> 标签：html, visual-studio-2010

我想知道这个。为什么不是 HTML 4.x 甚至 5？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"> 
```

如果有的话，我真的应该使用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T08:55:31.677

我不确定 BoltClock 是否为 100%。HTML5 从一开始就很酷。它是下一个标准，不容忽视。但我敢肯定，直到 VS 2010 发布后，它才真正成为推荐标准。事实上，他们仍在努力，如果以下文章是正确的，估计要到 2014 年才能完成：

[http://en.wikipedia.org/wiki/HTML5](http://en.wikipedia.org/wiki/HTML5)

尽管如此，我还是建议下载 VS 的任何扩展以获得完整的 HTML5 CSS3 智能感知并使用它，这样您就可以熟悉它的漂亮功能，并且如果您愿意的话，可以在您的 Web 应用程序中使用它们。

ps 我强烈建议您利用 VS 2012 或它的 express 版本。是的，在我看来，界面很糟糕（与 2010 年的出色界面相比）。但是已添加的功能（例如 MVC4）（例如捆绑和缩小）非常酷！

看看这个！：

[http://msdn.microsoft.com/en-us/library/bb386063.aspx](http://msdn.microsoft.com/en-us/library/bb386063.aspx)

请参阅：ASP.NET 4.5 核心服务，了解我的兴奋之处。

@马丁史密斯。同意，您当然无需下载新版本的 VS 即可获得这些功能。我刚刚发现下载最新版本（对于那些倾向于的人）将为我们提供一个包含 .NET 4.5 的许多最新功能的组合包：)

不过，我很感激你把它说出来。因为如果没有它，我的答案肯定是不完整的。现在每个人都想放弃旧版本的 VS（尤其是仅仅 2 年），因为他们可以将这些包添加到他们现有的工作版本中。

这正是我喜欢 StackOverflow 的原因。可用的贡献者数组帮助我们全面了解可用的选项.. :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T16:54:05.567

我相信大家都同意为什么在 Visual Studio 2010 中没有选择 HTML5 作为网页的默认标准。随着 2010 版本的发布，甚至不支持 HTML5，在 SP1 中只实现了一些功能。

所以问题是为什么选择 XHTML 而不是 HTML 4.01（然后为什么选择不同版本的 XHTML 而不是其他版本）。

首先，这是一篇关于 XHTML 支持的 MSDN 文章的摘录（[http://msdn.microsoft.com/en-us/library/exc57y7e(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/exc57y7e(v=vs.100).aspx)）：

> 创建符合 XHTML 标准的网页有几个优点：
> 
> *   它保证页面中的元素格式正确。
>     
>     
> *   因为许多浏览器越来越倾向于支持 XHTML，所以创建符合 XHTML 标准的页面有助于确保您的页面在所有浏览器中呈现一致。
>     
>     
> *   使用 XHTML 有助于使页面更容易符合可访问性标准。
>     
>     
> *   XHTML 是可扩展的，允许定义新元素。
>     
>     
> *   对于网页由计算机处理而不是由用户阅读的情况，XHTML 页面更容易以编程方式阅读，并且可以使用转换来操作文档。

现在，您如何在不同版本的 XHTML（1.0 Transitional、1.0 Strict 和 1.1）之间进行选择？

XHTML 1.0 Transitional 和 Strict 之间的主要区别在于转向更多语义标记（仅包括结构元素，而不包括样式元素，如 <font> 或 <pre>）。Transitional 仍然支持这些元素和属性（如 <img> 宽度和高度），因为它是为向后兼容而设计的（因此名称为 Transitional），而 Strict 则不支持，并鼓励使用 CSS 而不是标记。

因此，这里的想法是，当您了解需要将样式 (CSS) 与标记 (HTML) 分开时，您可以使用 Strict。

但是为什么不选择 XHTML 1.1（VS 2010 也支持）而不是 XHTML 1.0 Strict？除了一些小的调整（删除 <a> 和 <map> 的“name”属性，删除“lang”属性以支持“xml:lang”和添加 ruby​​ 元素）没有重大特定标记的差异。XHTML 1.1 的主要缺点是它要求您将内容传输为“application/xhtml+xml”而不是“text/html”，并且浏览器对此的支持在早期版本中受到限制。

那么，为什么微软决定使用 XHTML 1.0 Transitional 作为他们的默认 DOCTYPE？

*   而不是 HTML，因为上面提到的所有优点都来自 MSDN 文章
*   而不是 XHTML 1.0 Strict 和 1.1，因为您总是希望 IDE 向后兼容，例如，如果他们使用 Strict，如果您打开带有 <font> 和 <pre> 的 XHTML 1.0 Transitional，您会得到很多错误，这是可以避免的。
*   在内部，这只是一个猜测，XHTML 解析速度稍快（因为 XML 解析通常比 HTML 快一点）。尽管对于用户来说差异并不明显，但对于像 Visual Studio 这样的大型程序来说，每一个小调整都很重要。

我只提到了 Visual Studio，但同样适用于 Expression。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:24:50.297

我认为默认 DOCTYPE 的选择可能是浏览器支持的问题。鉴于 XHTML 1.0 实际上是 HTML 4.01 的 XML 版本，并且在 XML 第一次成为“时尚”时开始了很长的故事（出于其他答案中已经说明的充分理由）。

引用 W3C 网站（旧页面但仍然有用）： [http ://www.w3.org/MarkUp/2004/xhtml-faq#need](http://www.w3.org/MarkUp/2004/xhtml-faq#need)

“XHTML 1.0 有三个版本：严格、过渡和框架集。所有这三个版本都刻意保持尽可能接近 HTML 4.01，因为 XML 允许。”

我发现以下帖子简单、简短且有趣，其中包含有关使用何种 doctype 的建议：

[http://techoctave.com/c7/posts/33-the-truth-about-cross-browser-development-and-3-secrets-to-better-compatibility](http://techoctave.com/c7/posts/33-the-truth-about-cross-browser-development-and-3-secrets-to-better-compatibility)

希望能帮助到你

马泰奥

# sql - SQL 到 Linq 的转换左外连接

> ID：12644819
> 
> 赞同：0
> 
> 时间：2012-09-28T17:40:43.797
> 
> 标签：sql, linq-to-sql

我正在尝试将此 SQL 语句转换为 LINQ

```
SELECT     
  a.UserId, b.Date, a.Value1
FROM         
  web.Table2 AS b
LEFT OUTER JOIN
  web.Table1 AS a 
ON 
  b.Date = a.CreateDate AND UserId = 1 
```

这就是我所拥有的不起作用：

```
Dim query = From a In ctx.Table1 _
        Group Join b In ctx.Table2 On b.Date Equals a.CreateDate Into group1 = Group
        From x In group1.DefaultIfEmpty() _
        Where ls.UserId = 1 _
        Select a.UserId, x.Date, a.Value1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:43:15.333

您的代码应该是（检查别名 b，您使用的是 x）

```
Dim query = From a In ctx.Table1 _
        Join b In ctx.Table2 _ 
        On b.Date Equals a.CreateDate Into group1 = Group _
        Where a.UserId = 1 _
        From b In group1.DefaultIfEmpty() _            
        Select a.UserId, b.Date, a.Value1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:59:12.390

您始终可以直接在 LINQ To SQL 中执行查询，例如：

```
IEnumerable<MyClass> results = db.ExecuteQuery<MyClass>(@"
    SELECT a.UserId, b.Date, a.Value1 
    FROM web.Table2 AS b 
    LEFT OUTER JOIN web.Table1 AS a ON b.Date = a.CreateDate 
        AND UserId = 1"); 
```

# linux - 实现一个过滤linux设备

> ID：12644820
> 
> 赞同：1
> 
> 时间：2012-09-28T17:40:44.437
> 
> 标签：linux, linux-device-driver, ioctl

我喜欢制作一个 linux 设备，它包装现有设备并允许查看任何调用。例如，`udev`可以配置为对原始设备软链接进行重命名，并且我的包装设备将就位。然后，它可以查看原始设备的任何使用情况，并记录某些呼叫。

问题是：在没有任何知识的情况下，是否有一种通用的方法来处理`ioctl`s、 s 等？`mmap`因此，包装器设备可以在不破坏其功能的情况下对任意设备进行外观。

# php - Jsonreststore 发布和删除

> ID：12644822
> 
> 赞同：1
> 
> 时间：2012-09-28T17:40:54.677
> 
> 标签：php, rest, dojo

我正在使用 DOJO jsonreststore 编写一个 PHP REST API，我知道很多已经在那里，但主要是为了更好地理解这个概念。为了检查结果，我将商店连接到数据网格，除了两件事之外的一切都在工作。

如果我从商店中删除一个项目，它会在数据网格中消失，但如果我在 store._index 中查看 firebug，则删除的项目仍然存在。这可能是因为该视图未更新？

其次是当我发布一个新项目并且后端返回新创建的项目 + 生成的 id 时。数据网格仅在没有我新生成的 ID 的情况下更新为新行。如果我在 store._index 中查看 firebug，我会看到一个带有我新创建的 ID 的项目，但仍然有一个带有客户端生成 ID 的项目。数据网格正在显示没有 id 生成的服务器端的对象。

但是卡在这里，有什么想法吗？

下面我贴了一些代码：

添加项目：

```
dojo.connect(dijit.byId("addLocation"), "onClick", function() { 
    var Location = locationStore.getConstructor();                  
    var location = new Location();

    location.name = "TESTLOC"
    location.description = "TESTDESC"
    location.company = "1"
    location.companyname = "TEST"

    locationStore.save();                   
});

if ($_SERVER['REQUEST_METHOD'] == "POST") {
    $putvars = json_decode(file_get_contents("php://input"));       
    $location = new Location();

    $location->setCompany($putvars->company);
    $location->setCompanyName($putvars->companyname);
    $location->setDescription($putvars->description);
    $location->setId(14);
    $location->setName($putvars->name);

    header("HTTP/1.0 201 Created", true, 201);
    header("Location: http://localhost/resttest/location/" . 14);
    echo $location->toJSON();
} 
```

删除项目：

```
dojo.connect(dijit.byId("deleteLocation"), "onClick", function() { 
    var location = locationGrid.getItem(0);

    locationStore.deleteItem(location);
    locationStore.save();
});

if ($_SERVER['REQUEST_METHOD'] == "DELETE") {
    $uri = explode("/",$_SERVER['REQUEST_URI']);        
    $locationId = $uri[count($uri)-1];

    header("HTTP/1.0 204 OK", true, 204);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T14:33:02.613

打错了：s reststore 现在按预期运行。

尽管如此，商店维护已删除/创建的项目的本地副本仍然很奇怪，也许是为了恢复。无论如何，它对我有用，所以我猜案子已经结案了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T21:04:58.073

尝试使用`remove(id)`and`add(object, options)`代替。JsonRest 存储遵循`CRUD`模式，它是**C** reate **R** read **U** pdate **D** elete 的缩写。但是，函数的映射方式不同，`add()`, `get()`, `delete()`(yay) 和`put()`(具有覆盖标志)。

尝试一些不同的方法。

### 删除

```
var id = getIdentity(locationGrid.getItem(0))
locationStore.delete(id); 
```

### 添加

```
var location = {
 name = "TESTLOC",
 description = "TESTDESC",
 company = "1",
 companyname = "TEST"
}
locationStore.add(location).then(
     function(response) {
     }
}); 
```

我记得，如果未提供客户端，则会创建一个通用 ID。考虑将 uniq ID 计算为顺序主 ID，并简单地将 1 添加到已知的最高身份。

否则，您将不得不读取`add`操作的响应（在 Deferred 回调中）并设置新创建项目的 ID。

# authentication - 在 LDAP 中存储站点密钥、忘记密码问题的标准方法？

> ID：12644825
> 
> 赞同：0
> 
> 时间：2012-09-28T17:41:06.943
> 
> 标签：authentication, ldap

是否有标准方法来存储（参考）站点密钥图像，或在 LDAP 中忘记密码安全问题？或者这些更好地存储在数据库中？

我是否应该将对这些功能的渴望视为 LDAP 不适合我的使用模式的标志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T23:16:56.007

eDirectory 内置了这些功能。我不相信任何其他 LDAP 服务器供应商有任何方法。

我们喜欢：[http](http://code.google.com/p/pwm/) ://code.google.com/p/pwm/ 它将与大多数 LDAP 实现一起工作，只需一点工作。

-吉姆

# python - 无法对 PyMongo 数据库进行身份验证

> ID：12644826
> 
> 赞同：3
> 
> 时间：2012-09-28T17:41:23.903
> 
> 标签：python, mongodb, pymongo

这是我用来尝试进行身份验证的代码：

```
# MongoDB connection
connection = Connection(f.config['MONGODB_HOST'], f.config['MONGODB_PORT'])
db = connection['MONGODB_DB']

# Try authenticating. This will only work in production. In development,
# MONGODB_USER and MONGODB_PASSWORD will raise KeyErrors.
try:
    db.authenticate(f.config['MONGODB_USER'], f.config['MONGODB_PASSWORD'])
except KeyError:
    f.logger.debug('KeyError: Not authenticating.')

# Temporary. This is just for testing purposes.
users = db.users 
user = users.find_one({'username': 'BrewerOnRails'}) 
```

我的配置是从名为 ProductionConfig 的对象加载的：

```
class Config(object):
    '''Default configuration object.'''
    DEBUG = False
    TESTING = False
    PORT = int(os.environ.get('PORT', 5000))

class ProductionConfig(Config):
    '''Configuration object specific to production environments.'''
    REDIS_URL = os.environ.get('REDISTOGO_URL')
    if REDIS_URL:
        url = urlparse.urlparse(REDIS_URL)
        REDIS_HOST = url.hostname
        REDIS_PORT = url.port
        REDIS_PASSWORD = url.password

    MONGOLAB_URI = os.environ.get('MONGOLAB_URI')
    if MONGOLAB_URI:
        url = urlparse.urlparse(MONGOLAB_URI)
        MONGODB_USER = url.username
        MONGODB_PASSWORD = url.password
        MONGODB_HOST = url.hostname
        MONGODB_PORT = url.port
        MONGODB_DB = url.path[1:] 
```

这是我不断收到的错误：

```
pymongo.errors.OperationFailure: database error: unauthorized db:MONGODB_DB lock type:-1 client:10.117.107.165 
```

OperationFailure 异常由 PyMongo 的 helpers.py 文件中的[_unpack_response](https://github.com/mongodb/mongo-python-driver/blob/master/pymongo/helpers.py#L78)函数引发，特别是第 103 和 104 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T02:53:01.367

这在我看来是错误的：

```
db = connection['MONGODB_DB'] 
```

也许你想要

```
db = connection[config['MONGODB_DB']] 
```

# apache - Ubuntu + SVN：无法打开请求的 SVN 文件系统

> ID：12644827
> 
> 赞同：10
> 
> 时间：2012-09-28T17:41:24.543
> 
> 标签：apache, svn, ubuntu, webdav

我知道这个问题已经被问过很多次了。我相信我理解答案，但我仍然没有运气。

我尝试了两种配置`one repo`，`multiple repos`对它们都有同样的问题。

因此，使用我感兴趣的配置：

```
<Location /svn>
  DAV svn
  #SVNPath /media/ssd/svn/test
  SVNParentPath /media/ssd/svn
  SVNListParentPath On
  AuthType Basic
  AuthName "Subversion Repository"
  AuthUserFile /etc/apache2/dav_svn.passwd
  Require valid-user
</Location> 
```

我的存储库

```
luso@bender:/media/ssd/svn$ ls -lart
total 16
drwx------ 7 luso     luso 4096 2012-09-15 16:20 ..
drwxr-sr-x 6 www-data svn  4096 2012-09-24 22:13 test
drwxrwsr-x 4 www-data svn  4096 2012-09-24 22:31 .
drwxr-sr-x 6 www-data svn  4096 2012-09-24 22:31 test2 
```

项目内部

```
luso@bender:/media/ssd/svn/test$ ls -lart
total 32
-rw-r--r-- 1 www-data svn  229 2012-09-24 22:13 README.txt
drwxr-sr-x 2 www-data svn 4096 2012-09-24 22:13 locks
drwxr-sr-x 2 www-data svn 4096 2012-09-24 22:13 hooks
drwxr-sr-x 2 www-data svn 4096 2012-09-24 22:13 conf
-r--r--r-- 1 www-data svn    2 2012-09-24 22:13 format
drwxr-sr-x 6 www-data svn 4096 2012-09-24 22:13 .
drwxrwsr-x 4 www-data svn 4096 2012-09-24 22:31 ..
drwxr-sr-x 6 www-data svn 4096 2012-09-24 22:40 db 
```

用户**luso**和**www-data**都在**svn 和 www-data 组**中。但是，当 /system/administration/users 和组时，如果我选择 www-data 用户，则会出现警告：This account is disabled ¿¿?? 如果我尝试启用它，它会要求我设置密码。我没做...

/media/ssd 是我的 /dev/sdc 驱动器（一个 ssd 驱动器）

我可以使用 file:// 协议

```
luso@bender:~$ svn co file:///media/ssd/svn/test test
A    test/.classpath
A    test/.project
A    test/target
A    test/target/test-my-app-0.0.1-SNAPSHOT.jar
...
... 
```

然而，

```
luso@bender:~$ svn co http://localhost/svn/test test and
luso@bender:~$ svn co http://localhost/svn/test/trunk test 
```

引导我：

```
Authentication realm: <http://localhost:80> Subversion Repository
Password for 'luso': 
svn: Could not open the requested SVN filesystem 
```

更确切地说

```
<D:error xmlns:D="DAV:" xmlns:m="http://apache.org/dav/xmlns" xmlns:C="svn:">
<C:error/>
<m:human-readable errcode="13">Could not open the requested SVN filesystem</m:human-readable>
</D:error> 
```

当然，如果我尝试通过网络浏览器访问，也会发生同样的情况......

如果我改变也会发生同样的情况

```
#SVNPath /media/ssd/svn/test
SVNParentPath /media/ssd/svn
SVNListParentPath On 
```

和：

```
SVNPath /media/ssd/svn/test
#SVNParentPath /media/ssd/svn
#SVNListParentPath On 
```

并重新加载/重新启动 apache2

此外，当尝试通过运行正常的 https:// 访问时也会发生同样的情况。

我读过一些表明 SELinux 有事可做的东西，但我不敢改变它。我真的不知道该怎么...

可能是某种与权限的冲突？/media/ssd 驱动器归 luso 所有...（不知道，只是猜测）

那么还有什么线索吗？

我正在运行 Ubuntu 10.04、Apache2 和 StackOverflow：D

谢谢你们。

**编辑：**根据 p_strand 的建议，我添加了一行

```
AuthzSVNAccessFile /etc/apache2/svn-policy-file 
```

在 dav_svn.conf 配置中

现在，如果我尝试`http://localhost/svn/test`它保持不变，如果我尝试`http://localhost/svn`我得到一个**403 Forbidden**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T17:56:59.733

```
luso@bender:/media/ssd/svn$ ls -lart
total 16
drwx------ 7 luso     luso 4096 2012-09-15 16:20 .. 
```

这可能是您的问题 - 虽然 www-data 用户可以访问存储库目录，但它们的父目录`/media/ssd`不是。它及其树上的所有父目录至少需要世界执行权限（`rwx--x--x`或 711）。www-data 用户不需要被允许*读取*这些目录，但它确实需要能够进入它们（这就是执行位对目录的含义）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-31T18:19:13.783

如果有人遇到类似问题，这是我的解决方案：我拥有 root 拥有的文件“/var/svn/format”，尽管设置了所有权限 (777)，apache 不想读取 root 拥有的文件。只需一个简单的`chown`命令即可解决问题。

# javascript - javascript和css中的树视图菜单？

> ID：12644828
> 
> 赞同：0
> 
> 时间：2012-09-28T17:41:27.037
> 
> 标签：javascript, jquery, html, css, ajax

我几乎完成了 css 来制作树形视图菜单。但问题是树只能在鼠标悬停时工作。我想通过单击链接打开和关闭树。

我的 HTML 是：

```
<div id="global-nav">
        <ul>
            <li><a href="#">One</a></li>
            <li><a href="#">Two</a></li>
            <li><a href="#">Three</a></li>
            <li><a href='#' class="sidemenu-sub-menu-header">Four</a>
            <ul>
                <li><a href="#">1.2 One</a></li>
                <li><a href="#">1.2 two</a></li>
            </ul></li>
        </ul>
</div> 
```

## 我的CSS：

```
.sidemenu-sub-menu-header { font-weight: bold; color: black;}

#global-nav {font-size: 17px; }
#global-nav ul li{padding: 2px 10px 2px 10px;}
#global-nav ul ul li{ display: none;}
#global-nav li:hover ul li { display: block; } 
```

我只需要一个小脚本来打开菜单并像切换栏一样关闭菜单。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:49:03.870

这对你有用：

```
$('#global-nav li a').click(function(){

   var nextUl = $(this).next('ul');

   if(nextUl[0] != undefined){
     nextUl.toggle(); //Alternate the visibility
   };

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T14:23:44.430

您可以使用此 jquery 插件轻松实现您想要的[http://bassistance.de/jquery-plugins/jquery-plugin-treeview/](http://bassistance.de/jquery-plugins/jquery-plugin-treeview/)

演示 [http://jquery.bassistance.de/treeview/demo/prerendered.html](http://jquery.bassistance.de/treeview/demo/prerendered.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T17:48:06.903

CSS 无法响应点击。最好使用 Jquery 切换功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-28T17:48:42.253

看看 javascript 的方便和（看似）广泛使用的 onclick 功能......！

# node.js - 如何将 NodeJS 测试包含到 Gradle 和 Hudson 中？

> ID：12644833
> 
> 赞同：6
> 
> 时间：2012-09-28T17:41:43.240
> 
> 标签：node.js, hudson, gradle, npm, hudson-plugins

我们是一家 Scala/Java 商店，我们使用 Gradle 进行构建，使用 Hudson 进行 CI。我们最近在 mocha 中编写了一些带有测试的 node.js 代码。有没有办法把它包含在我们的 gradle 工作流程和 Hudson 的设置中？我查看了[gradle-javascript-plugin](http://eriwen.github.com/gradle-js-plugin/)但我无法弄清楚如何通过它运行 npm test 或 npm install 并且不知道如何使其通过 gradle-build 或 gradle-test 命令运行并且还让 Hudson 拿起它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T21:40:28.210

我可以带你去那里，我也在这个任务的中游。确保您至少拥有 Gradle 1.2。

```
import org.gradle.plugins.javascript.coffeescript.CoffeeScriptCompile

apply plugin: 'coffeescript-base'

repositories {
  mavenCentral()
  maven {
    url 'http://repo.gradle.org/gradle/javascript-public'
  }
}

task compileCoffee(type: CoffeeScriptCompile){
  source fileTree('src')
  destinationDir file('lib')
} 
```

参考： http: [//gradle.1045684.n5.nabble.com/State-of-javascript-stuff-in-master-td5709818.html](http://gradle.1045684.n5.nabble.com/State-of-javascript-stuff-in-master-td5709818.html)

提供了一种编译我的咖啡脚本的方法，我现在可以根据提供 stdout/stderr 的 exec cmd 结果将 npm install cmd 添加到 groovy exec 请求和 barf 中

```
npm install
echo $?
0
npm install
npm ERR! install Couldn't read dependencies
npm ERR! Failed to parse json
npm ERR! Unexpected token }
npm ERR! File: /<>/package.json
npm ERR! Failed to parse package.json data.
npm ERR! package.json must be actual JSON, not just JavaScript.
npm ERR! 
npm ERR! This is not a bug in npm.
npm ERR! Tell the package author to fix their package.json file. JSON.parse

npm ERR! System Darwin 11.4.2
npm ERR! command "/usr/local/bin/node" "/usr/local/bin/npm" "install"
npm ERR! cwd /<>/
npm ERR! node -v v0.8.14
npm ERR! npm -v 1.1.65
npm ERR! file /<>/package.json
npm ERR! code EJSONPARSE
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /<>/npm-debug.log
npm ERR! not ok code 0
echo $?
1 
```

结果是：

```
task npmDependencies {
  def proc = 'npm install'.execute()
  proc.in.eachLine { line -> println line}
  proc.err.eachLine { line -> println 'ERROR: '+line }
  proc.waitFor()
  if (proc.exitValue()!=0){
    throw new RuntimeException('NPM dependency installation failed!')
  }
} 
```

至于 mocha 测试，我没有这方面的第一手知识，但我怀疑你可以类似地处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-06T02:26:11.333

如果你喜欢 docker，你可能会喜欢这个 gradle 插件： [https ://github.com/dimafeng/containerized-tasks](https://github.com/dimafeng/containerized-tasks)

主要思想是在 docker 容器中运行 npm 任务，该容器将在构建后立即丢弃（但 node_modules 将缓存在您的构建目录中）。所以你不需要在你的 hudson/jenkins/whatever-ci 上安装 npm 并管理它的版本。

这是一个简单的示例，说明它的外观：

```
plugins {
    id "com.dimafeng.containerizedTask" version "0.4.0"
}

npmContainerizedTask {
    sourcesDir = 'test-env/gulp'
    outputLevel = 'INFO' // ALL, DEBUG
    scriptBody = 'npm install\ngulp'
} 
```

其中，`sourcesDir`是一个目录，`package.json`其中`scriptBody`包含应在容器内执行的命令。

然后运行`./gradlew npmContainerizedTask`

# ruby - 使用 Ruby 执行命令行时如何转义竖线？

> ID：12644837
> 
> 赞同：8
> 
> 时间：2012-09-28T17:41:51.530
> 
> 标签：ruby, windows, cmd

我在 Windows 中有这个命令行输入：

```
dir /b | ruby -ne 'f=$_.chomp;File.read(f).each_line{|line| print f if line =~ /helloworld/};' 
```

这一行是查找当前目录下的所有文件`helloworld`。（我知道还有很多其他方法可以做到这一点，但这篇文章并没有关注那个）

我的问题是：

这一行给出了错误说法`line is not a valid command`。然后我意识到`|`在 Ruby 中作为块变量的大括号是 cmd 中的管道符号。我试图将整行更改为双引号并转义 | 签名但没有成功。我怎样才能逃脱竖线|？

**请不要回答其他方法来完成任务，例如使用 grep、find、sed 或 awk 等其他工具，或将块更改为 for 循环。**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-28T19:17:10.257

我找到[了这个 microsoft.com 页面](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/ntcmds_shelloverview.mspx?mfr=true)，其中包含以下有关管道和特殊字符的内容：

> 与号 (&)、竖线 (|) 和圆括号 ( ) 是特殊字符，当您将它们作为参数传递时，必须在它们前面加上转义字符 (^) 或引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T20:22:17.577

单引号似乎是你的问题。请改用双引号，因为它们是 Windows 所必需的（尽管 Unix 也可以理解）。

这在 Windows 中对我有用：

```
C:\tmp\ruby>echo helloworld > foo.txt

C:\tmp\ruby>dir /b | ruby -ne "f=$_.chomp;File.read(f).each_line{|line| print f if line =~ /helloworld/};"
foo.txt 
```

我知道您提到您尝试过双引号，但是如果您粘贴实际尝试过的内容，我可以查看是否有其他问题。

# python - 正则表达式“或”只返回一个匹配项

> ID：12644839
> 
> 赞同：-3
> 
> 时间：2012-09-28T17:41:56.347
> 
> 标签：python, regex

```
regex=re.compile(r"pattern_A(\d+)|pattern_B:(\d+)")
result=re.search(regex,string); 
```

我有字符串“pattern_A9123213”和“pattern_B490329402”，以及“没有匹配的字符串”
，结果将是 [('9123213','')],[('','490329402')] 或 [('',' ')] 我怎样才能只得到一个元素，如 ['9123213']、['490329402'] 和 ['']。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T20:30:41.507

最简单的方法是`r"(pattern_A|pattern_B:)(\d+)"`用作您的正则表达式，然后获取第二个匹配组 ( `re.search(regex,string).group(2)`)。这是有效的，因为您尝试抓取的组`\d+`在两侧是相同的模式 ( )。通常，您必须使用多个正则表达式来处理这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T20:18:24.000

re.compile 不返回列表。它返回一个已编译的正则表达式，其方法可用于对字符串进行操作。

# iphone - iOS：如何应用具有白色背景的自定义图像过滤器

> ID：12644841
> 
> 赞同：1
> 
> 时间：2012-09-28T17:42:04.363
> 
> 标签：iphone, ios

我想做这样的事情：

![在此处输入图像描述](../Images/d8d56e44da85e2145fdc1dc59e4ec7ff.png)

拍摄白色背景的图像，并仅在图像的其余部分应用黑色。

我怎样才能用 iOS 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T13:16:33.657

我做了类似的事情来创建条形按钮图像。Toy 创建一个上下文，将其涂成白色，使用 Quartz 函数将您的图像变成“蒙版”，然后将它们绘制到上下文中。如果这对您有用，请在下面发表评论，我会追踪我的链接。

# sql - 打开 SqlConnection 作为参数传递？

> ID：12644849
> 
> 赞同：0
> 
> 时间：2012-09-28T17:42:52.123
> 
> 标签：sql, vb.net, sqlconnection

我遇到了这段代码（不是我的），这让我有点奇怪。

```
Public Overridable Function Save(ByVal UpdateUserID As Integer) As Integer
    Dim conn As New SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings("mcle").ToString())

    Try
        conn.Open()
        Return Save(conn, UpdateUserID)
    Finally
        conn.Close()
    End Try
End Function

Public Overridable Function Save(ByVal conn As SqlConnection, ByVal UpdateUserID As Integer) As Integer
    If Me.activityID <> 0 Then
        Return SaveAct(conn, UpdateUserID)
    Else
        Return AddAct(conn, UpdateUserID)
    End If
End Function 
```

（供参考，SaveAct 和 AddAct 都是添加一堆参数和更新数据库的长函数）

现在，将打开的连接作为参数传递是否符合规定，或者这会导致问题吗？到目前为止还没有突破，只是想知道这里的最佳实践是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:46:58.837

传递一个打开的连接是完全可以做的......虽然通常我会反转它并使用一个函数来*返回*一个打开和准备好的连接到现有函数。所以它可能看起来像这样：

```
Public Overridable Function Save(ByVal UpdateUserID As Integer) As Integer
    Using cn As SqlConnection = GetConnection()
        If Me.activityID <> 0 Then
            Return SaveAct(conn, UpdateUserID)
        Else
            Return AddAct(conn, UpdateUserID)
        End If
    End Using
End Function 
```

此代码将是数据访问层的一部分，因此只有某些方法/类可以看到 GetConnection() 方法。

# git - 如何将 Heroku git 存储库重置为其初始状态？

> ID：12644855
> 
> 赞同：20
> 
> 时间：2012-09-28T17:43:06.133
> 
> 标签：git, heroku

我在 git 存储库中有一个 Web 应用程序。由于历史原因，Web 应用程序不在存储库的根目录中，它位于名为`website`. 除此之外还有一些其他文件夹，所以我得到了以下结构：

```
myApp
+- .git
+- otherFolder1
+- otherFolder2
+- otherFolder...
+- otherFolderN
+- website 
```

该网站在 Heroku 上运行。由于 Heroku 要求您的 Web 应用程序位于 git 存储库的根目录中，因此到目前为止，我使用了一个构建过程，该过程将`website`文件夹复制到具有自己的 git 存储库的完全不同的（外部）文件夹中。然后我能够从那里推到 Heroku，一切都很好。

现在，由于 git 包含该`subtree`命令，因此不再需要该命令，因为我可以直接从我的初始文件夹推送，而只是从`website`子文件夹推送，使用：

```
git subtree push --prefix=website heroku master 
```

基本上，这非常有效。我只有一个问题：由于之前对 Heroku 的提交来自一个完全不同的 git 存储库，因此两者的历史不匹配 - 所以 Heroku 检测到非快进推送，并拒绝`subtree`推送。

那么我该如何处理呢？

*   思路一：强制推送。试过了，但因为`git subtree push`没有`--force`选项（或类似的东西）而不起作用。
*   想法 2：清除 Heroku 的存储库并重新从头开始。

我很想采用想法 2，但我不知道如何实现这一目标。

我的第一种方法是运行 a `git push heroku :master`，但 Heroku 检测到这一点并拒绝它。

当然，我可以销毁应用程序并重新创建它，但是所有域分配和附加组件也都消失了，我想避免这种情况。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-15T18:10:58.030

您可以嵌套 git 命令来执行强制推送。

对于您的情况，命令将是：

```
git push heroku `git subtree split --prefix website master`:master --force 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-15T06:29:21.047

对于那些从 Yeoman（缺少）[部署指南来到这里的人，](http://yeoman.io/deployment.html) [X1011](https://github.com/X1011)开发了一个更好、更简单的[解决方案](https://github.com/X1011/git-directory-deploy)，我敦促大家让生活更轻松并使用它！

与已经很容易出现问题的子树方法相比，此脚本实际上在您的//分支上**保留了您的开发提交增量历史**-而且，您甚至不需要跟踪开发分支中的文件夹。`dist``build``release``dist`

设置过程可能看起来令人生畏，但相信我，事实并非如此。我花了不到 10 分钟的时间进行设置，而且它在第一次运行时就按承诺运行，即使在 Windows 机器上也是如此。

如果你想用 Grunt 自动化它，这很容易。我就是这样做的：

1.  首先将 X1011 下载`deploy.sh`到您的主项目文件夹。
2.  遵循简短的配置和设置指南。
3.  `grunt-shell`通过以下命令使用节点安装`npm install grunt-shell --save-dev`：（`--save-dev`将添加`grunt-shell`到项目的开发依赖项中，以防您还不知道）。你也可以使用`grunt-exec`，他们基本上做同样的事情，AFAIK。
4.  在`Gruntfile.js`中，将以下对象添加到`initConfig`：

### 添加到`initConfig`对象

```
 shell: {
        deployverbose: {
          command: 'sh deploy.sh -v',
          options: {
              stdout: true,
              stderr: true
          }
        },
        deploy: {
          command: 'sh deploy.sh',
          options: {
              stdout: true,
              stderr: true
          }
        }
    } 
```

5\. 注册一个新任务，或将其添加到您现有的`build`任务中（确保您声明了`target`参数）：

### 添加到现有的构建任务为`grunt build:deploy`

```
if (target && target.indexOf('deploy') > -1) {
  tasks.push('deploy');
} 
```

### 独立任务`grunt deploy`，也允许`--verbose`标志：

```
grunt.registerTask('deploy', 'standalone deploy command', function () {
  if (grunt.option.flags().indexOf('--verbose') > -1) {
    grunt.task.run('shell:deployverbose');
  } else {
    grunt.task.run('shell:deploy');
  }
}); 
```

# java - JavaFX FileChooser 选择文件和/或目录？

> ID：12644861
> 
> 赞同：15
> 
> 时间：2012-09-28T17:43:28.667
> 
> 标签：java, javafx

JavaFX 允许通过 FileChooser 选择文件并通过 DirectoryChooser 选择目录，但我如何允许它同时选择两者？

类似于 Swing 的 JFileChooser.FILES_AND_DIRECTORIES 选项。

目前我只是直接使用 JFileChooser ，但这并不是一个很好的视觉匹配：

```
JFileChooser chooser = new JFileChooser(".");
chooser.setMultiSelectionEnabled(true);
chooser.setFileSelectionMode(JFileChooser.FILES_AND_DIRECTORIES);
int ret = chooser.showOpenDialog(null);
if(ret == JFileChooser.APPROVE_OPTION) {
    File[] files = chooser.getSelectedFiles();
    ...
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-14T16:43:41.553

> JavaFX 允许通过 FileChooser 选择文件并通过 DirectoryChooser 选择目录，但我如何允许它同时选择两者？

JavaFX 2.2 或当前的 JavaFX 8 版本中没有此类功能。

* * *

在[RT-22621](https://bugs.openjdk.java.net/browse/JDK-8102208)中请求了 JavaFX 的 FILES_AND_DIRECTORIES 选择器。

由于无法修复，请求被拒绝，原因如下：

> Lubomir Nerad 添加了评论 - 2012 年 6 月 19 日上午 06:59 JavaFX 使用相应的本机对话框作为其文件和目录选择器。除非所有受支持平台上的本机文件对话框都可以提供此功能，否则我们将无法将其添加到 API。
> 
> Lubomir Nerad 添加了评论 - 2012 年 7 月 24 日上午 6:54 Window XP 和 Linux/GTK 上的平台对话框未提供请求的功能。

对于 Java 8，Windows XP 不再受支持，也许 Linux 将被增强以原生提供此类功能，以便 JavaFX 可以使用它，并且将来可能在 JavaFX 中提供此类功能。您可以对链接的 Jira 案例发表评论以注册您的兴趣。

# c# - 将查询部分与 Lucene 和数据库中的部分（MySQL）结合起来

> ID：12644864
> 
> 赞同：4
> 
> 时间：2012-09-28T17:43:42.867
> 
> 标签：c#, mysql, database, nhibernate, lucene.net

我有一个应用程序需要从文章列表中进行过滤和检索结果。对于数据库，我使用 MySQL，NHibernate 作为 ORM。该查询还基于关键字进行全文搜索，为此它使用 Lucene.Net。

我的问题是查询跨越“两个”域。例如，我可能需要获取所有包含关键字“交通管制”的文章，并且 PublishedOn < 2012-10-01。此外，查询使用分页，例如页面 #2，页面大小为 50。问题是我如何创建一个跨越 MySQL（对于 PublishedOn 部分）和 Lucene.Net 的查询来利用全文搜索能力。

如果我先在 MySQL 上进行搜索，我不能只得到前 50 个，因为结果可能会在 Lucene 中进一步过滤，我需要 50 作为我的页面大小。如果我从 Lucene.Net 开始，情况也是如此。此外，最好按照“相关性”进行排序，所以这是 Lucene 可以做的事情，而不是 MySQL。

我目前的方法是首先通过 MySQL 过滤，并检索匹配记录的所有主键。然后，我在 Lucene 中进行查询，使用术语查询将主键与结果列表相匹配。但是，Lucene 对于这样的查询非常慢，并且数据库可以包含超过 200,000 篇文章。在 Lucene 中进行这样的查询需要很长时间，而对于全文搜索来说却非常快。

有什么想法可以解决这样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T08:05:01.543

Lucene 不仅仅是关于全文搜索。您可以将 PublishedOn 属性添加到 Lucene 文档并执行如下查询：

```
Text:"traffic control" AND PublishedOn:[00000000 TO 20121001] 
```

查看[Lucene 语法文档](https://lucene.apache.org/core/3_6_0/queryparsersyntax.html)中的“范围搜索”部分。

# ios - 如何在 iOS Facebook SDK 3.1 中模拟过期的访问令牌？

> ID：12644871
> 
> 赞同：11
> 
> 时间：2012-09-28T17:44:11.973
> 
> 标签：ios, facebook

我想测试 Facebook 用户的访问令牌已过期并且我需要更新令牌的代码路径。我注意到访问令牌在创建 2 个月后过期。我不想等待 2 个月来测试该代码路径，所以我想要一种模拟这种到期的方法。如果我从未针对以下谜题测试这种情况，我担心我的代码会崩溃：

1.  目前在应用程序启动时，我打电话`[FBSession openActiveSessionWithReadPermissions:permArray allowLoginUI:NO completionHandler:someFunction]`以静默方式重新连接过去已经连接的 Facebook 用户。注意 allowLoginUI 是如何的。是否必须为 YES 才能允许用户重新登录并更新令牌，还是可以静默更新令牌？
2.  每次会话状态更改时都会触发任何 openActiveSession* 调用的完成处理程序。两个值得注意的状态是`FBSessionStateOpen`和`FBSessionStateOpenTokenExtended`。当令牌变为扩展时，状态机是保持令牌扩展状态，还是会进入扩展状态，然后立即进入打开状态？我需要知道状态转换，所以我不会运行我的处理程序两次。
3.  `[FBSession activeSession].accessToken`变成 nil 还是保留为旧的过期令牌？
4.  类似的`[FBSession activeSession].expirationDate`：它是零，旧的到期日期，还是自动成为新的到期日期？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-28T18:11:20.610

要使令牌过期，最简单的方法是在您的计算机上登录 FB，进入应用中心，单击“我的应用”，然后通过单击应用旁边的小 X 来删除您的应用。这将导致令牌“过期”。一旦发生这种情况，您将无法在没有用户交互的情况下自动更新令牌。您必须重新打开身份验证 UI，并且用户必须单击“允许”

关于您的问题：

1.  allowLoginUI 必须为 YES。如果令牌过期，用户必须先与 UI 交互，然后才能获得新令牌，并将其设置为 NO 将使其静默失败。

2.  我相信 TokenExtended 状态只会在扩展当前活动的令牌时发生。如果用户在 2 个月期限结束之前使用您的应用程序，FB SDK 将定期自动为您扩展令牌。但是，这与更新过期令牌不同。不过，这不是 100% 确定的，因为我还没有测试过这个状态。

3.  如果您的令牌过期，当您下次启动应用程序时，您应该在您的 AppDelegate 方法之一 (didFinishLaunching) 中调用 openActiveSession，这将触发状态为 Closed 或 LoginFailed 的完成处理程序。此时，您应该调用 [FBSession.activeSession closeAndClearTokenInformation]; 根据他们的教程，取消您的访问令牌。
4.  与#3 相同

# arrays - Pascal 将 int 读入数组

> ID：12644876
> 
> 赞同：0
> 
> 时间：2012-09-28T17:44:46.413
> 
> 标签：arrays, user-input, pascal

我刚刚在学校学习 Pascal，在我的作业中遇到了一个奇怪的问题。

我需要做的是创建两个数组，然后为第一个数组读取整数，直到读取 10 个数字或读取一个负数，然后使用相同的规则移动到第二个数组。

除了第二个数组中的第一个数字总是搞砸之外，我所有的工作都很好。-1 似乎总是被复制到数组 2 索引 1。

我不能放弃太多代码，因为这是一个任务，但它是这样的：

```
while input >= 0 and index < 10 do
    begin
    read(input);
    array1[index] := input;
        index++
    end;

input:= 0; //to reset it

another while loop but for list2... 
```

如果我输入 array1 1, 2, 3, -1 和 array2 1, 2, 3, 4, -1 我的输出将是这样的：

```
list 1: 1 list 2: -1
list 1: 2 list 2: 2
list 1: 3 list 2: 3
list 1: -1 list 2: 4 
```

这有意义吗？我只需要一点帮助来理解为什么会这样，我被困在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T05:09:23.760

*正如对您问题的评论所指出的那样，当几乎可以肯定问题出在您未*发布的代码上时，很难找到问题所在。话虽这么说，但是有一些明显的问题

1.  在“while”循环*之前*读取“input” 。进入'while'循环依赖于'input'的初始值；我想你假设它的初始值为 0，但它可能是一些带有负值的垃圾数字。
2.  'index++' 不是 Pascal 语法，而是 C。这应该是 'inc (index)'。
3.  而不是在第一个循环之后写'input：= 0'，这应该是'index：= 0'。

我想在第一个“while”循环之后的代码应该是

```
index:= 0;
readln (input);
while (input >= 0) and (index < 10) do
 begin
  inc (index);
  array2[index]:= input;
  readln (input) // there is no need for a semicolon before 'end'!
 end; 
```

# android - Android AdMob 垂直广告

> ID：12644878
> 
> 赞同：5
> 
> 时间：2012-09-28T17:45:01.293
> 
> 标签：android, admob

我的应用程序大多采用横向布局，常规的矩形广告与我的整体设计不太匹配。

是否可以使用 AdMob 创建垂直广告？我的意思是 Google 摩天大楼设计中的广告 (adsense) 如图所示，我希望我的添加是红色矩形的形状。

![在此处输入图像描述](../Images/a49308513c78c8eea211cbbb45b8863c.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-29T07:05:25.030

adView 上的 Android:rotation="90" 可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:16:41.777

AdMob 仅提供以下横幅格式：

> 320x50 标准横幅
> 
> 300x250 IAB 中矩形
> 
> 468x60 IAB 全尺寸横幅
> 
> 728x90 IAB 排行榜平板电脑

您可以修改显示广告的视图的大小，但文档说：

> 如果您的视图尺寸太小，则不会返回任何广告。

来源：[https ://developers.google.com/mobile-ads-sdk/docs/admob/intermediate](https://developers.google.com/mobile-ads-sdk/docs/admob/intermediate)

# excel - Excel 图表中的多个 Y 值

> ID：12644880
> 
> 赞同：-1
> 
> 时间：2012-09-28T17:45:13.150
> 
> 标签：excel, scatter-plot

我在 Excel 中的 B 列中有几个月前的传感器读数。A列有这些读数的时间戳......

例如，

```
A    B
000  0    
030  -4
100  2
 ...
1130  3
0000  6 
```

在几个月的过程中...

我想在 B 列与 A 列的 excel 中创建一个图表，其中 X 轴仅由 000、030、100、.... 1100、1130 组成，并且各种 Y 值是每个 X 值的每个实例我的数据。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T23:04:55.987

标准散点图不适合您吗？

![在此处输入图像描述](../Images/df52350b7ba6b28c576723ae61b145d0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T14:47:39.017

A 列中的值是否对应于 hmm 或 hhmm 格式的时间？将它们转换为 h:mm 格式的时间，如果时间跨越多天，也包括日期 (d/m/yy h:mm)。

在 XY 图（不是折线图）上绘制数据。对 X 轴使用自定义数字格式 hmm。

# c# - 更改后是否需要重新删除自定义组件？

> ID：12644882
> 
> 赞同：0
> 
> 时间：2012-09-28T17:45:22.230
> 
> 标签：c#, winforms, datagridview, custom-controls, toolbox

我正在使用从应用程序中的 DataGridView 派生的自定义控件。

如果我更改此自定义控件的源代码，是否需要从表单中删除我的控件，然后从工具箱中添加回它的重建版本？

我希望不会，因为那会很乏味 - 重置所有属性，连接事件等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:48:23.273

不，winforms 中的控件没有什么特别的魔力。每次创建表单时，它们都会像普通对象一样创建`mySuperControl1 = new MySuperControl();`。因此，您将始终获得最新的控件。即使在设计师。（最好在更改控件时关闭包含此控件的表单设计器。当它无法编译或由于某种原因其代码被破坏时，该控件可能会暂时不可用。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:47:39.110

显然没有必要，幸运的是。我注释掉了一些代码，果然，它没有执行，所以……好！

# jquery - 如果其他条件在第二次点击时不起作用

> ID：12644883
> 
> 赞同：0
> 
> 时间：2012-09-28T17:45:24.960
> 
> 标签：jquery, conditional, if-statement, conditional-statements

Jquery else 条件不起作用。当我`#webul li`第一次单击时背景位置更改为`0 144`但当我再次单击时没有任何反应。

```
$('.design-button').click(function() {
    $('#webul li ').not('.design').toggle(500)
    if($('.design-button').css("background-position", "0 0px")){
        $('.design-button').css("background-position", "0 144px")
    }
    else {
        $(".design-button").css("background-position", "0 0px")
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:48:49.950

```
if($('.design-button').css("background-position", "0 0px")){ 
```

始终为**真**..您不是在此处检查值，而是在分配它，这使得该语句始终为真..进行此更改

```
if($('.design-button').css("background-position") == "0 0px")){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:07:31.870

如果您不将 px 添加到属性中，您还会注意到它会失败。这应该有效。但是，根据预期的功能，您可以考虑将内部标识符更改为 $(this) 而不是 $('.design-button')

```
$('.design-button').click(function() {   
     $('#webul li ').not('.design').toggle(500);

    if($('.design-button').css("background-position") == "0px 0px"){         
        $('.design-button').css("background-position", "144px"); 
     } 
    else { 
         $('.design-button').css("background-position", "0px 0px");
    } 
}); 
```

[http://jsfiddle.net/kJ7Ew/3/](http://jsfiddle.net/kJ7Ew/3/)

# c# - 连接两台 PC 与他们的 IP 地址发送消息（不在内部网络中）

> ID：12644889
> 
> 赞同：-1
> 
> 时间：2012-09-28T17:46:05.700
> 
> 标签：c#, winforms, network-programming

我认为这是一个简单的问题，但是当我用谷歌搜索时我没有找到任何东西。

如何使用它们的 IP 地址将两个系统相互连接？对于内部网络 IP 地址，我可以使用套接字编程。但是如果他们的 IP 地址不在内部网络中怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:50:48.197

套接字编程是您使用 IP 进行通信的方式。他们是否在同一个“内部”网络上并不重要。如果您可以通过 IP 进行通信，那么 IP 不知道“内部”。

# php - PHP PDO 在事件完成后设置变量的数量

> ID：12644891
> 
> 赞同：0
> 
> 时间：2012-09-28T17:46:35.163
> 
> 标签：php, mysql, variables, pdo

我正在做一个项目，人们可以在这个项目中与其他人会面，比如社交网站。像这样工作：一个人在 facebook 中创建一个事件，并写下事件何时发生、事件的最大地点等，然后人们参加。

我的数据库中有一个`met_with`变量，我显示在用户的个人资料中，该变量的作用类似于，例如，当有人创建一个有 30 个位置的活动时，人们参加了该活动，但可能只有 15 人参加或 25 人，就像那样当用户参加那个活动时，他会见`fullfilled spots - 1`人。

但我面临的问题是，我想`met_with`在事件发生后设置变量，而不是在用户加入后，我已经使该`met_with`变量等于`maximum spot - 1`但正如我所说，它不能保证该事件将实现其最大值斑点。

我不想运行文件，`met_with`每天更新成员的变量，是否可以编写一个仅`met with`在事件发生后设置变量的函数。

这是我所做的：

```
// above of here, i query the db for the event, i make the $free_spots = $free_spots - 1 after user clicks attending, fetching and defining $max_spot, $free_spots exc. 

$met_with = $met_with + $max_spot - 1;
try{
$update_member_query = "UPDATE `members` SET  `met_with`=:met_with, `attended` = `attended` +1 WHERE     `id`=:userid";
$update_member_query_do = $db->prepare($update_member_query);
$update_member_query_do->bindParam(':userid', $userid, PDO::PARAM_INT);
$update_member_query_do->bindParam(':met_with', $met_with, PDO::PARAM_INT);
$update_member_query_do->execute() or die(print_r($update_member_query_do->errorInfo(), true));
}

catch(PDOException $e) {
$log->logError($e." - ".basename(__FILE__));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:57:56.583

我不完全确定我是否做对了，但这是我会做的：

*   设置每日 cronjob 来处理前一天（cronjobs 之间的时间段）完成的所有事件；
*   在那个 cronjob 中，循环遍历前一天完成的所有事件，计算所有参与者并将参与者的数量 - 1 添加到每个参与者。当然，相应地增加参与者`attended`人数。

底线：当用户在网站上执行任何操作时，我不会更新用户信息，而是安排它每天/定期运行。

# ruby-on-rails - 无法将数组转换为字符串 - 添加 标签

> ID：12644892
> 
> 赞同：0
> 
> 时间：2012-09-28T17:46:36.257
> 
> 标签：ruby-on-rails, ruby

我有以下控制器代码：

```
class NodesController < ApplicationController

  def index
    @nodes = Node.com_name_scope("27").find(:all, :conditions => ['COMPONENT_NAME LIKE ?', "#{params[:search]}%"])

    respond_to do |format|
      format.js {render :js => @nodes.map { |node|  "<li>#{node.COMPONENT_NAME}</li>"}}
    end
end 
```

当我做：

```
http://localhost/myproject/nodes.js 
```

我得到以下列表：

```
<li>Value A</li>
<li>Value B</li>
<li>Value C</li>
<li>Value D</li> 
```

我想`<ul>`在列表的开头和结尾插入一个标签，使其如下所示：

```
<ul>
<li>Value A</li>
<li>Value B</li>
<li>Value C</li>
<li>Value D</li>
</ul> 
```

但是当我这样做时：

```
format.js {render :js => "ul" + @nodes.map { |node|  "<li>#{node.COMPONENT_NAME}</li>"}+ "</ul>" } 
```

它给了我以下错误消息：

```
 TypeError in NodesController#index

can't convert Array into String 
```

我的问题是如何`<ul>`在列表的前面和末尾包含标签。

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:54:09.547

```
@nodes.map { |node|  "<li>#{node.COMPONENT_NAME}</li>"} 
```

返回一个字符串数组，您需要在将它们与字符串合并之前以某种方式加入它们。

```
format.js { render :js => "<ul>#{@nodes.map { |node|  "<li>#{node.COMPONENT_NAME}</li>"}.join}</ul>" } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:52:28.493

您需要将数组转换`@nodes.map { }`为字符串：

```
format.js { render :js => "<ul>" + (@nodes.map { |node|  "<li>#{node.COMPONENT_NAME}</li>"}).to_s + "</ul>" } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T17:55:49.337

以下示例应该有效：

```
respond_to do |format|
  format.js do
    mapped = @nodes.map { |node|  "<li>#{node.COMPONENT_NAME}</li>"}
    mapped.unshift "<ul>"
    mapped.push "</ul>"

    render :js => mapped
  end
end 
```

但请注意，您的代码看起来仍然很奇怪。你用 html-fragment 回应你的 :js 吗？

# c# - c# 中在 mysql 字符串中间创建换行符的正确语法是什么？

> ID：12644900
> 
> 赞同：6
> 
> 时间：2012-09-28T17:47:25.723
> 
> 标签：c#, mysql

> **可能重复：**
> [C# 中的多行字符串文字](https://stackoverflow.com/questions/1100260/multiline-string-literal-in-c-sharp)

我可能没有向 Google 提出正确的问题来找到我的答案。我只想保持我的代码整洁，而不是在一行上有一个很长的字符串。我想在不破坏字符串的情况下移至下一行。

```
cmd.CommandText = "UPDATE players SET firstname = CASE id WHEN 1 THEN 'Jamie' WHEN 2 THEN 'Steve' WHEN 3 THEN 'Paula' END WHERE id IN (1,2,3)"; 
```

例如，我想把它分成两行而不影响字符串。所有帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T17:50:43.297

我怀疑您想要的是使用`@`for 逐字字符串文字；逐字字符串的优点是不处理转义序列，并且它们可以跨越多行。

```
cmd.CommandText = @"UPDATE players 
                    SET firstname = 
                      CASE id 
                        WHEN 1 THEN 'Jamie' 
                        WHEN 2 THEN 'Steve' 
                        WHEN 3 THEN 'Paula' 
                      END 
                    WHERE id IN (1,2,3)"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-28T17:51:04.647

**`@`**在字符串前使用符号。它会告诉编译器字符串是多行的。

```
cmd.CommandText = @"UPDATE players 
                    SET firstname = CASE id 
                        WHEN 1 THEN 'Jamie' 
                        WHEN 2 THEN 'Steve' 
                        WHEN 3 THEN 'Paula' 
                        END WHERE id IN (1,2,3)"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-28T17:50:19.030

你可以`@`在你的字符串前面使用。这称为[逐字字符串文字](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)

```
cmd.CommandText = @"
 UPDATE players 
 SET firstname = CASE id 
                 WHEN 1 THEN 'Jamie' 
                 WHEN 2 THEN 'Steve' 
                 WHEN 3 THEN 'Paula' 
                 END 
 WHERE id IN (1,2,3)"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T17:50:13.663

像这样

```
cmd.CommandText = "UPDATE players SET firstname =" +
   " CASE id WHEN 1 THEN 'Jamie' WHEN 2 THEN 'Steve' WHEN 3" + 
   " THEN 'Paula' END WHERE id IN (1,2,3)"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T17:50:15.567

Simpley 连接您的字符串，如下所示：

```
cmd.CommandText = "UPDATE players SET firstname = CASE id WHEN 1 " 
cmd.CommandText +="THEN 'Jamie' WHEN 2 THEN 'Steve' WHEN 3 THEN 'Paula' END WHERE id IN (1,2,3)"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T17:50:15.780

它被称为串联：

```
cmd.CommandText = "UPDATE players SET firstname" +
    " = CASE id WHEN 1 THEN 'Jamie' WHEN 2 THEN 'Steve'" +
    " WHEN 3 THEN 'Paula' END WHERE id IN (1,2,3)"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-28T17:50:18.133

像这样？

```
cmd.CommandText = "text text" +
  "text text"; 
```

# python - 如何防止 PLY 中的表重新生成

> ID：12644902
> 
> 赞同：8
> 
> 时间：2012-09-28T17:47:48.283
> 
> 标签：python, parsing, ply

我在命令行应用程序中使用 PLY，我将其打包为 Python 鸡蛋，通过`pip`. 每次我从命令行运行脚本时，都会看到以下消息：

```
"Generating LALR tables" 
```

此外，parser.out 和 parsetab.py 文件被写入调用脚本的目录。是否有某种方法可以将这些文件与应用程序一起发送，以便它不会每次都重新生成表？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T22:28:18.127

采用

```
yacc.yacc(debug=0, write_tables=0) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T16:45:02.630

您想通过调用 lex 来使用[优化模式](http://www.dabeaz.com/ply/ply.html#ply_nn15)：

```
lexer = lex.lex(optimize=1) 
```

.

值得强调（[来自同一个链接](http://www.dabeaz.com/ply/ply.html#ply_nn15)）：

> 在随后的执行中，将简单地导入 lextab.py 来构建词法分析器。这种方法大大提高了词法分析器的启动时间，并且可以在 Python 的优化模式下工作。
> 
> 在优化模式下运行时，请务必注意 lex 禁用大多数错误检查。因此，**仅当您确定一切正常并且准备好开始发布生产代码时，才真正推荐这样做**。

*由于这是生产代码，这听起来正是您想要的。*

.

在研究这个问题时，我发现了一些[Yacc 的杂项注释](http://www.dabeaz.com/ply/ply.html#ply_nn36)：

> 由于 LALR 表的生成相对昂贵，因此如果可能的话，之前生成的表会被缓存和重用。重新生成表的决定是通过对所有语法规则和优先规则进行 MD5 校验和来确定的。只有在不匹配的情况下才会重新生成表。

深入研究`yacc`内部的函数`yacc.py`，我们看到优化忽略了以下代码段中的这种不匹配：

```
if optimize or (read_signature == signature):
    try:
        lr.bind_callables(pinfo.pdict)
        parser = LRParser(lr,pinfo.error_func)
        parse = parser.parse
        return parser 
```

*where`signature`与存储在`parsetab.py`(as `_lr_signature`) 中的校验和进行比较。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-07T03:55:44.413

我最终做的是关闭优化。我正在浏览 PLY 3.4 源代码，我在词法分析器代码中发现了这个小块：

```
# If in optimize mode, we write the lextab
if lextab and optimize:
    lexobj.writetab(lextab,outputdir)

return lexobj 
```

通过将构建词法分析器和解析器的代码更改为：

`self.lexer = lex.lex(module=self, optimize=False, debug=False, **kwargs)`

和

`self.lexer = lex.lex(module=self, optimize=False, debug=False, **kwargs)`

我避免了所有文件的写出。调试器将`.out`文件写入目录，Python 文件是`optimize`标志的结果。

虽然这暂时有效，但我不能说我对这种方法完全满意。据推测，有一些方法可以保持优化，同时保持工作目录干净，这将是一个更好的解决方案，可以带来更好的性能。如果其他人有更好的方法，我会更愿意接受。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-14T21:13:37.850

这是一个老问题，但是当我尝试使用 yacc 关键字参数将生成的解析器表放置在我的项目中的特定目录中时，我遇到了与 ply 类似的问题`outputdir`——它会将它们放置在那里，但每次都重新生成它们时间不管。我在 github 上找到[了这个补丁，它解决了再生问题，没有明显的不良影响。](https://github.com/dabeaz/ply/issues/31)基本上，它所做的只是修改类`read_table`上的方法`yacc`以采用额外的参数 -- `outputdir`-- 并在重新生成之前搜索那里的目录。为了使其工作，`read_table`（在方法中`yacc`）的唯一调用站点也需要修改以传递`outputdir`关键字参数。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-03T14:25:46.407

显然，在 ply.yacc 中有这样的论点：

```
def yacc(method='LALR', debug=yaccdebug, module=None, tabmodule=tab_module, start=None, 
     check_recursion=1, optimize=0, write_tables=1, debugfile=debug_file,outputdir='',
     debuglog=None, errorlog = None, picklefile=None): 
```

因此，您只需传递不同的错误日志和调试日志（使用 debug() 等不打印到 stdout/stderr 的方法）。你指定一个固定的输出目录。这就是你需要做的。

更新：我刚刚检查过，这是正确的设置：

```
yacc.yacc(
    debug=False,                         # do not create parser.out
    outputdir=r"c:\temp\aaa" # instruct to place parsetab here
) 
```

实际上你需要使用一个已经包含 parsetab.py 的输出目录。这不仅会消除消息，而且您的程序也不会写出 parsetab.py。它只会使用它。

# objective-c - 如何在部分 segue 之前保存数据？

> ID：12644903
> 
> 赞同：0
> 
> 时间：2012-09-28T17:47:48.890
> 
> 标签：objective-c, uinavigationcontroller, segue

（默认数据是X，动态数据是Y）当我segueway时如何保持我的数据Y？

当我在“seguewayed”视图上时，我按“返回”而不是“完成”，之前的数据 Y 设置为 X...我怎样才能保留这个数据 Y？

在prepareForSegue 中仅供参考，我将我的DATA Y 发送到destinationViewCtrlr。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T16:04:20.207

找到了解决方案，

```
- (void) viewDidDisappear:(BOOL)animated{
//whatever action i want to do before the view goes away
} 
```

# java - 由于 css 样式“显示：无；”导致 ElementNotVisibleException

> ID：12644908
> 
> 赞同：0
> 
> 时间：2012-09-28T17:48:16.867
> 
> 标签：java, selenium-webdriver

在 Firefox 中执行以下测试时，`org.openqa.selenium.ElementNotVisibleException: Element is not currently visible and so may not be interacted with`会抛出“”。原因似乎是在使用 Select 字段（变量 selectMarke）之前出现的弹出窗口（奇怪的是，在手动单击该站点时不会出现）。我尝试了几种在不同线程中列出的可能性，但没有奏效。原因似乎是弹出窗口。

我该如何解决这个问题？

```
 FirefoxProfile profile = new FirefoxProfile();
    profile.setEnableNativeEvents(true);
    WebDriver driver = new FirefoxDriver(profile);
    driver.manage().timeouts().implicitlyWait(16, TimeUnit.SECONDS);

    driver.get("http://www.autoscout24.de/");
    System.out.println("Page title is: " + driver.getTitle());
    WebElement pageWSuche = driver.findElement(By.linkText("Werkstattsuche"));
    pageWSuche.click();

    WebElement plzField = driver.findElement(By.id("cms-plz"));
    plzField.sendKeys("81243");

    WebElement findGarField = driver.findElement(By.cssSelector("span.buttonBob span input[value='Werkstätten finden']"));
    findGarField.click();

    WebElement navInspect = driver.findElement(By.linkText("Inspektion (mit Preis)"));
    navInspect.click();

    Select selectMarke = new Select(driver.findElement(By.cssSelector("select.inputL[name='MakeId']")));
    selectMarke.selectByVisibleText("BMW");

    driver.quit(); 
```

在同一域但在不同页面中执行以下类时，一切都很好，因为不会出现弹出窗口。

```
 FirefoxProfile profile = new FirefoxProfile();
    profile.setEnableNativeEvents(true);
    WebDriver driver = new FirefoxDriver(profile);
    driver.manage().timeouts().implicitlyWait(16, TimeUnit.SECONDS);

    driver.get("http://www.autoscout24.de/");
    WebElement element = driver.findElement(By.linkText("Fahrzeugsuche"));
    element.click();

    Select selectMarke = new Select(driver.findElement(By.cssSelector("select.inputFullWidth[name='make1']")));
    selectMarke.selectByVisibleText("BMW");
    Select selectModell = new Select(driver.findElement(By.cssSelector("select.inputFullWidth[name='model1']")));
    selectModell.selectByValue("15779");
    Select selectPriceTo = new Select(driver.findElement(By.cssSelector("select.inputFullWidth[name='priceto']")));
    selectPriceTo.selectByVisibleText("100.000");
    Select selectYearFrom = new Select(driver.findElement(By.cssSelector("select.inputFullWidth[name='yearfrom']")));
    selectYearFrom.selectByVisibleText("2006");
    Select selectKM = new Select(driver.findElement(By.cssSelector("select.inputFullWidth[name='mileageto']")));
    selectKM.selectByVisibleText("200.000");
    Select selectFuel = new Select(driver.findElement(By.cssSelector("select.inputFullWidth[name='fuel']")));
    selectFuel.selectByVisibleText("Diesel");
    WebElement location = driver.findElement(By.id("zipcode"));
    location.sendKeys("München");
    Select selectRadius = new Select(driver.findElement(By.cssSelector("select.inputFullWidth[name='zipradius']")));
    selectRadius.selectByVisibleText("200 km");

    WebElement searchBtn = driver.findElement(By.cssSelector("input[value$='Fahrzeuge']"));
    searchBtn.click();

    driver.quit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:06:03.913

这真的不应该发生。实际上，硒在判断元素是否可见方面非常聪明。以下代码直接从 Selenium 原子复制：

```
 // Any element with a display style equal to 'none' or that has an ancestor  
 // with display style equal to 'none' is not shown.  
 function displayed(e) {    
     if (bot.dom.getEffectiveStyle(e, 'display') == 'none') {      
         return false;    
     }        
     var parent = bot.dom.getParentElement(e);   
     return !parent || displayed(parent);  
 } 
```

这允许子元素覆盖父元素的`display:none`. 也许还有其他问题？

一种替代方法是使用 jquery 手动单击提交。`Autoscout24`提到了 jquery，所以它应该已经嵌入到页面中。然后你可以使用类似的东西

```
//searchBtn.click();
((JavascriptExecutor) driver).executeScript("$(arguments[0]).click();", searchBtn); 
```

这样，您可以绕过 selenium 对元素是否可见的检查。我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T17:25:19.493

我会用这样的方法来做到这一点，专为寻找元素上的 display:none 标志：

```
public Boolean elementIsDisplayed( By locator ) {   
    Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
        .withTimeout(30, TimeUnit.SECONDS)
        .pollingEvery(5, TimeUnit.SECONDS)
        .ignoring(NoSuchElementException.class, StaleElementReferenceException.class);
    WebElement foo = wait.until( 
         ExpectedConditions.visibilityOfElementLocated( locator );
    if ( foo == null ) return false;
    return true;
} 
```

# r - 在R中选择满足多个条件的数据框索引

> ID：12644912
> 
> 赞同：2
> 
> 时间：2012-09-28T17:48:25.817
> 
> 标签：r

我有一个数据框，我想制作满足多个条件的子集（或仅选择那些行），例如...

```
a <-data.frame(a=c("a","a","b","c","b","d"),b=c(1,2,3,4,2,3))
> a
  a b
1 a 1
2 a 2
3 b 3
4 c 4
5 b 2
6 d 3 
```

我想制作a == a|b 列和b = 2|3 列的子集。预期产出

```
 a b
1 a 2
2 b 3
3 b 2 
```

我可以为一种情况做

```
a[which(a[,"a"]=="a"),] 
```

但是是否可以在一行中包含所有多个条件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T17:54:17.297

`a[(a$a %in% c('a', 'b')) & (a$b %in% c(2, 3)), ]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-13T12:29:07.580

您可以尝试使用`dplyr`.

```
a <-data.frame(a=c("a","a","b","c","b","d"),b=c(1,2,3,4,2,3))

library(dplyr)
filter(a, (a == "a" | a == "b") & (b == 2 | b == 3)) 
```

输出：

```
 a b
1 a 2
2 b 3
3 b 2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T17:58:38.930

子集(a, (a %in% c('a', 'b')) & (b %in% 2:3))

# inno-setup - Inno Setup - 卸载注册表删除选项

> ID：12644913
> 
> 赞同：13
> 
> 时间：2012-09-28T17:48:26.477
> 
> 标签：inno-setup

我正在构建安装程序的程序使用注册表项来存储用户设置。现在，我将其设置为在卸载程序时删除所述注册表文件，但我希望能够为用户提供在卸载时保留或删除注册表文件的选项。

我不是最好的脚本编写者/程序员，所以答案越简单越好。

我的注册表/卸载当前看起来像这样。

```
 [Registry]
    Root: HKCU; Subkey: "Software\FFSPLIT Overlay Filter"; Flags: uninsdeletekey

    [UninstallDelete]  
    Type: filesandordirs; Name: "{app}\ffmpeg"
    Type: filesandordirs; Name: "{app}\OverlayData"
    Type: files; Name: "{app}\AForge.Controls.dll"
    Type: files; Name: "{app}\AForge.Imaging.dll"
    Type: files; Name: "{app}\AForge.Video.DirectShow.dll"
    Type: files; Name: "{app}\AForge.Video.dll"
    Type: files; Name: "{app}\AudioFilter.ax"
    Type: files; Name: "{app}\default.cfg"
    Type: files; Name: "{app}\DirectShowLib-2005.dll"
    Type: files; Name: "{app}\ffmpeg.exe"
    Type: files; Name: "{app}\FFSplit Overlay Filter.ax"
    Type: files; Name: "{app}\FFsplit.exe"
    Type: files; Name: "{app}\FFSplitOverlayManager.exe"
    Type: files; Name: "{app}\librtmp.dll"
    Type: files; Name: "{app}\msvcp100d.dll"
    Type: files; Name: "{app}\msvcr100d.dll"
    Type: files; Name: "{app}\NAudio.dll"
    Type: files; Name: "{app}\RegisterFilter.bat"
    Type: files; Name: "{app}\setting.cfg"
    Type: files; Name: "{app}\UNRegisterFilter.bat"
    Type: files; Name: "{app}\wavbuffer"
    Type: files; Name: "{app}\Micfilter.ax" 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-28T18:59:53.597

InnoSetup 没有任何条件卸载检查参数，因此您必须自己执行此操作。因此，您需要删除`uninsdeletekey`将自动删除注册表项的标志，并且在卸载过程结束时，您可以询问用户是否要删除该键（以某种有意义的消息方式）并手动删除该键。以下脚本在卸载后步骤执行此操作，即成功卸载应用程序的时间。您可以按照[`commented version`](https://stackoverflow.com/revisions/12645836/1)：

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program

#define FilterRegKey "Software\FFSPLIT Overlay Filter"

[Registry]
Root: HKCU; Subkey: "{#FilterRegKey}"

[Code]
procedure CurUninstallStepChanged(CurUninstallStep: TUninstallStep);
begin
  if CurUninstallStep = usPostUninstall then
  begin
    if RegKeyExists(HKEY_CURRENT_USER, '{#FilterRegKey}') then
      if MsgBox('Do you want to delete the overlay filter registry key ?',
        mbConfirmation, MB_YESNO) = IDYES
      then
        RegDeleteKeyIncludingSubkeys(HKEY_CURRENT_USER, '{#FilterRegKey}');
  end;
end; 
```

# php - CodeIgniter UPDATE 查询不起作用

> ID：12644914
> 
> 赞同：1
> 
> 时间：2012-09-28T17:48:39.237
> 
> 标签：php, codeigniter

`UPDATE`我对 CodeIgniter查询有疑问。

我的模型：

```
function update_order($id,$old_order){

    //Update The order
    $query = $this->db->query("SELECT * FROM cat WHERE `cat_order`='$old_order' ");
    $row =  $query->row();

    $this->db->query("UPDATE cat SET cat_order='".$row->cat_order."' WHERE id='".$id."' ");
    $this->db->query("UPDATE cat SET cat_order='$old_order' WHERE id ='".$row->id."' ");

} 
```

`SELECT`查询工作 100%，但两个查询`UPDATE`没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T18:45:54.143

好吧，让我们看看发生了什么（至少，我能理解的）；

1.  您从表`cat`中选择`cat_order`等于 2 ( `$old_older`) 的所有内容；
2.  返回的所有记录中，您只取一行（`$row = $query->row()`）；
3.  您更新返回的唯一行，即记录集中的第一行，将它的新值设置为前一个选择提取的相同值，（`$row->cat_order`），使用一个我不知道它来自哪里以及指向哪一行的 ID；
4.  **您更新第一个 select**返回的唯一行，由其 ID ( `$row->id`) 标识，并给出其`$old_older`值 ( `SET cat_order='$old_order'`)，在本例中为 2。

我的意思是，您的查询很好，但是您使用相同的值进行更新，这就是您看不到更改的原因。还是我忽略了一些明显的东西？

顺便说一句，你有注入孔；要么使用 Active Record，要么使用带有占位符的查询绑定：

```
$sql = "UPDATE table SET column = ? WHERE id = ?";
$this->db->query($sql, array($value, $id)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:07:00.403

只需使用 Active Record 更新它。它为您清理数据。不用担心 SQL 注入。

```
$this->db->where('id',$id); 
$this->db->set('cat_order',$row->cat_order);
$this->db->update('cat'); 
```

对第二个更新查询执行相同的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T17:54:09.857

id 很可能是主键，并且不能有引号：

```
$this->db->query(
  "UPDATE cat SET cat_order='".$row->cat_order."' WHERE id = " .$id );

$this->db->query(
  "UPDATE cat SET cat_order='$old_order' WHERE id = " . $row->id ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-01T14:23:15.057

检查您尝试更新的列是否存在于数据库结构中。

# jquery - 使用 jquery 旋转 div 并使用 jquery 添加 css 类

> ID：12644921
> 
> 赞同：0
> 
> 时间：2012-09-28T17:49:06.550
> 
> 标签：jquery, css, transform

我有一个 div，当您单击它时，我希望它旋转，然后当您再次单击它时，它会旋转回来，这是一个切换。我正在使用 CSS 转换执行此操作，并且还需要使用 jquery 添加类。我将类存储在 vars 中，然后尝试应用它们。这是我正在研究的 jfiddle，提前感谢您的帮助。

[http://jsfiddle.net/nzLUS/3/](http://jsfiddle.net/nzLUS/3/)

这是代码：

```
<div id="beffects_of_yoga_info" style="width:50px;height:50px;background:red;"></div> 
```

jQuery：

```
$(document).ready(function() {

var css_info_timing = {
"-webkit-transform": "all 1s ease;"
}
var css_info_rotate = {
"-webkit-transition": "rotate(150deg)"
}

$("#effects_of_yoga_info").css(css_info_timing);

$("#effects_of_yoga_info").click(function () {
$("#effects_of_yoga_info").toggleClass(css_info_rotate);
});
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T17:56:22.537

在这里您正在使用`toggleClass`，但实际上您是在尝试切换属性！

```
 $("#effects_of_yoga_info").toggleClass(css_info_rotate); 
```

* * *

首先，添加这个 css 类：

```
.rotated {
    -moz-transform:rotate(150deg);
    -webkit-transform:rotate(150deg);
    -o-transform:rotate(150deg);
    -ms-transform:rotate(150deg);
    transform:rotate(150deg);
    -moz-transition:all 1s ease;
    -webkit-transition:all 1s ease;
    -o-transition:all 1s ease;
    -ms-transition:all 1s ease;
    transition:all 1s ease;
}​ 
```

然后这个 jQuery 监听器：

```
$("#effects_of_yoga_info").click(function () {
    $("#effects_of_yoga_info").toggleClass('rotated');
}); 
```

[检查演示](http://jsfiddle.net/gionaf/dSTyG/)

* * *

## 编辑

由于您无权访问 CSS，请使用此代码动态添加规则：

```
$("<style type='text/css'>.rotated{-moz-transform:rotate(150deg);-webkit-transform:rotate(150deg);-o-transform:rotate(150deg);-ms-transform:rotate(150deg);transform:rotate(150deg);-moz-transition:all 1s ease;-webkit-transition:all 1s ease;-o-transition:all 1s ease;-ms-transition:all 1s ease;transition:all 1s ease}</style>").appendTo("head");

$("#effects_of_yoga_info").click(function () {
    $("#effects_of_yoga_info").toggleClass('rotated');
}); 
```

[另一个演示](http://jsfiddle.net/gionaf/wULr3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T18:02:49.593

尝试这样的事情

**HTML**

```
<div id="effects_of_yoga_info" style="width:50px;height:50px;background:red;"></div> 
```

**CSS**

```
#effects_of_yoga_info{
    -webkit-transition: all 1s
}
.css_info_rotate {
    -webkit-transform:rotate(150deg);
} 
```

**jQuery**

```
$(document).ready(function(){
$("#effects_of_yoga_info").click(function () {
        $("#effects_of_yoga_info").toggleClass('css_info_rotate');
    });
}) 
```

**演示** [http://jsfiddle.net/Nsryy/](http://jsfiddle.net/Nsryy/)

​</p>

# c - 即使 -lm 是编译标志，对“pow”的未定义引用也是如此。[C]

> ID：12644922
> 
> 赞同：7
> 
> 时间：2012-09-28T17:49:17.610
> 
> 标签：c, gcc, compiler-errors, cc

任何原因

```
cc -g -lm -DBLITZ_HOST_IS_LITTLE_ENDIAN 
```

使用代码会产生错误`math.h`？GCC 4.0.3 版（记录在案的工作版本）和 4.6.3 版（我当前的版本）之间是否可能存在差异？

`makefile`和`asm.c`@https [://gist.github.com/3801291](https://gist.github.com/3801291)

这是在 ubuntu 12.04 上

我的终端输出是要点中的注释。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T17:51:29.220

代替

```
cc -g -lm -DBLITZ_HOST_IS_LITTLE_ENDIAN foo.c 
```

尝试：

```
cc -g -DBLITZ_HOST_IS_LITTLE_ENDIAN foo.c -lm 
```

当链接器搜索库时，它会链接到包含先前未定义符号定义的模块。

如果链接器`-lm`在 之前搜索`foo.o`，则`pow()`尚未定义。相反，如果`foo.o`先出现，它会取消定义`pow()`，然后`-lm`可以解决。

* * *

**编辑：要在****您的**makefile中完成此建议，请进行以下更改：

```
CFLAGS=-g -DBLITZ_HOST_IS_LITTLE_ENDIAN
LDLIBS=-lm

...

asm: asm.c
        $(CC) $(CFLAGS) asm.c $(LDLIBS) -o asm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-08T16:02:11.837

我最近使用自动生成器（即[drone.io](https://drone.io/) ）遇到了这个问题。

问题是 Ubuntu 12.04 中的 gcc 默认与*-Wl,--as-needed*链接。就我而言，该项目使用的是自动工具，这意味着我懒得写任何东西来修改编译顺序。相反，*根据需要*修改标志可以解决问题。

```
-gabriel_LDFLAGS = $(GLIB2_LIBS) $(DBUS_LIBS) -lssh
+gabriel_LDFLAGS = -Wl,--no-as-needed $(GLIB2_LIBS) $(DBUS_LIBS) -lssh 
```

[有关完整信息，您可以查看https://bitbucket.org/kikeenrique/gabriel/commits/f08eefdca3f7bb90f48f5a6fbfc8839422572508](https://bitbucket.org/kikeenrique/gabriel/commits/f08eefdca3f7bb90f48f5a6fbfc8839422572508)中的修复提交

您可以在[应用修复](https://drone.io/bitbucket.org/kikeenrique/gabriel/3)[**之前**](https://drone.io/bitbucket.org/kikeenrique/gabriel/3)[查看有错误的日志，](https://drone.io/bitbucket.org/kikeenrique/gabriel/3)**也可以在应用修复后查看[没有](https://drone.io/bitbucket.org/kikeenrique/gabriel/4)[**错误**](https://drone.io/bitbucket.org/kikeenrique/gabriel/4)[的日志](https://drone.io/bitbucket.org/kikeenrique/gabriel/4)**。****

# c# - 无法隐藏文字

> ID：12644923
> 
> 赞同：-1
> 
> 时间：2012-09-28T17:49:25.600
> 
> 标签：c#, javascript, asp.net, sql

页面

```
<asp:UpdatePanel ID="asypnl" runat="server">
   <ContentTemplate>
      <asp:Wizard />
      <StartNavigationTemplate>
      </StartNavigationTemplate>
      <FinishNavigationTemplate>
      </FinishNavigationTemplate>
      <WizardSteps>
         <asp:WizardStep ID="WizardStep1" runat="server">
            <asp:Panel runat="server" ID="pnlGiftInfo">
               <td>
                  <asp:DropDownList ID="DropDownPayment" runat="server">
                     <asp:ListItem Selected="True" Value="0">Gift</asp:ListItem>
                     <asp:ListItem Value="1">Pledge</asp:ListItem>
                  </asp:DropDownList>
               </td>
            </asp:Panel>
         </asp:WizardStep>
      </WizardSteps>
      <asp:Panel runat="server" ID="pnlOutput">
         <%-- Content comes from the database OutputHtml Colunm--%>
      </asp:Panel>
   </ContentTemplate>
</asp:UpdatePanel> 
```

数据库列

```
<p>Thank you for your <span id "ddlGift">gift</span><span id "ddlPayment">payment</span> of
    {Amount} to the {Comm}
<script type="text/javascript" language="javascript">
        var p = document.getElementById("DropDownPayment");
        var eledropdownPayment = p.options[p.selectedIndex].value;
        var ddlGift = document.getElementById("ddlGift");
        var ddlPayment = document.getElementById("ddlPayment");
        if (eledropdownPayment == "0") {
            ddlGift.style.display = "block";
            ddlPayment.style.display = "none";
        } else {
            ddlGift.style.display = "none";
            ddlPayment.style.display = "block";
        }
</script> 
```

在向导 ctrl 中提交最后一步后，我将使用数据库内部构建的 Html 标记结构来显示结果。一切正常，除了数据库中的脚本没有执行，所以我可以看到两个跨度文本。我只想根据下拉选择选择跨度。我无法在 aspx 中编写脚本，因为这些跨度标签在页面加载事件中不存在，它们在完成向导 ctrl 中的 2 个步骤后进入输出面板。我需要一些方法来根据下拉选择显示 sapn...谢谢。抱歉，描述太长了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:22:41.887

最简单的解决方案是在设计时放置两个 span id，而不是从 db 中获取包含 span 标签的全文。从 db 中提取其他文本以及数量和其他详细信息并将其放置在适当的位置。

把它放在设计时谢谢你的giftpayment

来自 {Amount} 的 db 到 {Comm}

现在您可以在 javascript 中控制跨度，并且可以相应地使跨度可见/不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:59:10.400

如果我理解正确，您的 html+javascript 通过 ajax 来自数据库，在这种情况下，您可能需要稍微延迟 javascript 的执行，以便浏览器有时间将 html 内容加载到 DOM 中，您可以将您的调用中的 javascript 代码`setTimeout()`，如下所示：

```
 setTimeout(function() {
                var p = document.getElementById("DropDownPayment");              
                var eledropdownPayment = p.options[p.selectedIndex].value;              
                var ddlGift = document.getElementById("Gift");              
                var ddlPayment = document.getElementById("ddlSelectionPledge");              
                    if (eledropdownPayment == "0") 
                    {                  
                    ddlGift.style.display = "block";                  
                    ddlPayment.style.display = "none";              
                    } 
                    else 
                    {                  
                    ddlGift.style.display = "none";                  
                    ddlPayment.style.display = "block";              
                    }
             }, 300); //delay execution by 300 miliseconds 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T18:14:01.337

要执行脚本，您必须做的不仅仅是在页面中间添加这些脚本标签。最简单的选择是使用[RegisterClientScriptBlock](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.registerclientscriptblock.aspx)方法。在服务器端，您需要调用该方法并将脚本作为第二个参数传递。

另一种选择是在您的 javascript 中实际包含一个函数。元素内容设置好后，调用该函数。要点是代码不会自动执行。

# javascript - 无法通过 Chrome 扩展程序编辑响应标头

> ID：12644924
> 
> 赞同：1
> 
> 时间：2012-09-28T17:49:28.360
> 
> 标签：javascript, google-chrome, google-chrome-extension

只是无法编辑响应标头

```
chrome.webRequest.onHeadersReceived.addListener(function (details) {
for(i=0;i<details.responseHeaders.length;i++)
{
if(details.responseHeaders[i].name.toLocaleLowerCase()=='content-type')
{
alert(details.responseHeaders[i].name); //it works
details.responseHeaders[i].value='text/plain; charset=utf-8';
}
}
return {responseHeaders: details.responseHeaders};
}, {urls: ["<all_urls>"]}, ['responseHeaders']); 
```

它会提醒 Content-Type 但无法编辑值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T19:34:52.990

刚做了

```
chrome.webRequest.onHeadersReceived.addListener(function (details) {
    var yeniheaderlar =
        [{
            name : "Content-Security-Policy",
            value : "sil"
        }, {
            name : "Content-Security-Policy-Report-Only",
            value : "sil"
        }, {
            name : "X-Content-Security-Policy",
            value : "sil"
        }, {
            name : "X-WebKit-CSP",
            value : "sil"
        }, {
            name : "X-Frame-Options",
            value : "sil"
        }, {
            name : "X-XSS-Protection",
            value : "sil"
        }, {
            name : "Access-Control-Allow-Origin",
            value : "*"
        }, {
            name : "Access-Control-Allow-Methods",
            value : "POST, GET, OPTIONS, DELETE, PUT"
        }, {
            name : "Access-Control-Allow-Headers",
            value : "*"
        }
    ];
    for (z = 0; z < yeniheaderlar.length; z++) {
        var zamazingo = false;
        for (i = 0; i < details.responseHeaders.length; i++) {
            if (details.responseHeaders[i].name.toLowerCase() == yeniheaderlar[z].name.toLowerCase()) {
                if (yeniheaderlar[z].value == "sil") {
                    details.responseHeaders.splice(i, 1);
                } else {
                    details.responseHeaders[i].value = yeniheaderlar[z].value; ;
                }
                zamazingo = true;
            }
        }
        if (!zamazingo && (yeniheaderlar[z].value != 'sil')) {
            details.responseHeaders.push(yeniheaderlar[z]);
        }
    }
    return {
        responseHeaders : details.responseHeaders
    };
}, {
    urls : ["<all_urls>"],
    types : ["main_frame", "sub_frame", "stylesheet", "script", "image", "object", "xmlhttprequest", "other"]
},
    ["blocking", "responseHeaders"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T21:33:26.210

你试过`details.responseHeaders[i].name = 'text/plain; charset=utf-8';`吗？

# c# - DataTable DataView - 数据库中的位值

> ID：12644925
> 
> 赞同：0
> 
> 时间：2012-09-28T17:49:39.157
> 
> 标签：c#, datatable, bit, dataview

我已经在我的 C# 程序中将数据库表读入 DataTable 中，但是在将包含位值的列分配给布尔值时遇到了一些问题。

到目前为止，这是我的代码：

```
 // Load and Sort Users DataTable
        DataTable datatableUsers = UserMethods.GetUsers().Tables["Users"];
        datatableUsers.DefaultView.Sort = "Name";

        // Filter Based on Search Box
        datatableUsers.DefaultView.RowFilter = "Name LIKE '%" + user + "%' OR Username LIKE '%" + user + "%'"; ;  
        DataView dataviewUsers = datatableUsers.DefaultView;

        // Loop Through Rows and Add UsersGrid to FlowLayoutPael
        foreach (DataRowView datarowviewUsers in dataviewUsers)
        {
            var UsersGrid = new UsersGrid
            {
                ID = (int)datarowviewUsers["ID"],
                Username = datarowviewUsers["Username"].ToString(),
                User = datarowviewUsers["Name"].ToString(),
                Admin = datarowviewUsers["Administrator"].ToString(),
            };
            flowlayoutpanelUsers.Controls.Add(UsersGrid);
            UsersGrid.WasClicked += UsersGrid_WasClicked;
        } 
```

目前，我正在转换 Admin ToString 并在“True”上进行匹配，但这变得非常混乱，我更愿意将 Admin 设置为布尔类型。我需要做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T18:36:16.860

您可以使用内联 if 运算符。例如：

```
Admin = datarowviewUsers["Administrator"].ToString() == "True" ? true : false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T16:40:51.833

根据 deepee1 的回答，我认为它返回了一点价值。

```
Admin = datarowviewUsers["Administrator"].ToString() == "1" ? true : false; 
```

# css - 在 html5 文档类型中使用 target="_blank" 不再返回验证错误

> ID：12644926
> 
> 赞同：0
> 
> 时间：2012-09-28T17:49:42.540
> 
> 标签：css, validation, html

> **可能重复：**
> [在 HTML5 中可以使用 target=_blank 吗？](https://stackoverflow.com/questions/4198788/is-it-alright-use-to-target-blank-in-html5)

我有这个。

```
<a href="#foo" class="external" target="_blank" title="foo">www.foo.com</a> 
```

以前`target="_blank"`用于重新运行验证错误。如果我没记错的话，它曾经用 html5 之前的 doctypes 说明过时的错误。然而，在 html5 文档类型中，这不再是验证错误，而是使用了 javascript。

这是否意味着它不再被弃用并且我不再需要 javascript 来实现此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:55:41.130

是的。

> a 元素上的[target](http://dev.w3.org/html5/markup/a.html#a.attrs.target)属性在以前的 HTML 版本中已被弃用，但不再被弃用，因为它在 Web 应用程序中很有用，尤其是与[iframe](http://dev.w3.org/html5/markup/iframe.html#iframe)元素结合使用时。

[http://dev.w3.org/html5/markup/a.html](http://dev.w3.org/html5/markup/a.html)

# c# - Windows Azure 和保存设置

> ID：12644927
> 
> 赞同：2
> 
> 时间：2012-09-28T17:49:53.650
> 
> 标签：c#, azure, static, settings, cloud

如果有人能指出我正确的方向，我将不胜感激。

我正在尝试构建一个基于 Azure 的网站。我已经在使用 Blob 存储来存储大量照片。存储与站点全局配置相关的设置的最佳方式是什么？

例如，通过管理界面需要能够更改某些设置，例如“FooterCopyrightText”或“国家/地区”（带有区号列表等）。我不想将这些构建到 Web.Config 中，或者将其作为数据文件包含在 App_Data 中。

如果这是一个本地桌面应用程序，我可以简单地让它反序列化一个 XML 文件并将其作为静态变量存储在内存中，但这种方法不适用于 Azure 上的可扩展应用程序。

我的想法是做一些事情，比如将它存储在 Azure Blob 存储中，并缓存设置。

这是正确的方法吗？

感谢您的任何想法或指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:52:15.600

我们在我最近的项目中遇到了类似的问题，我们需要存储与我们发送的各种电子邮件相关联的 HTML。我们最终将文本存储在 Azure 表存储中，它提供了一种廉价且快速的方式来存储此类信息，这些信息可跨多个角色和网站在全球范围内访问。

这是一个让您入门的[演练。](http://blogs.msdn.com/b/jnak/archive/2008/10/28/walkthrough-simple-table-storage.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:56:24.150

您可以使用[Azure SQL](https://www.windowsazure.com/en-us/home/features/data-management/)来存储配置数据。它会为您提供关系数据（例如与特定国家/地区相关的区域代码），并且您不会产生任何查询成本，如果您需要为每个页面加载检索此配置，这可能会节省成本。或者罗伯特的方法同样好。这可能取决于数据类型和您的最佳访问模式。

使用[实体框架和代码优先迁移](http://msdn.microsoft.com/en-US/data/jj554735)，创建配置模型相对容易，然后随着需求的变化进行迁移。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T18:02:26.133

您可以使用 ServiceConfiguration.cscfg 文件。与 web.config 或 app.config 几乎相同，但您可以通过 Azure 管理控制台动态更改值。当然，您必须使用 RoleEnvironment.GetConfigurationSettingValue 而不是普通的 ConfigurationManager 类。

更新：这个链接有点旧，但看起来它仍然涵盖了使用 ServiceConfiguration.cscfg 文件需要知道的内容[http://www.codeproject.com/Articles/63977/Windows-Azure-Development-Deep-Dive -与-C一起工作](http://www.codeproject.com/Articles/63977/Windows-Azure-Development-Deep-Dive-Working-With-C)

# mysql - 我可以有一个 MYSQL 表，它可以自动从同一个数据库中的 2 个或多个表中获取信息吗？

> ID：12644930
> 
> 赞同：1
> 
> 时间：2012-09-28T17:50:07.973
> 
> 标签：mysql, join, report

我可以创建一个自动从现有表中提取所有数据的表吗？我知道有“UNION ALL”，但我想创建一个作为它自己的实体的表——而不仅仅是用于查询。

这是否仅在报告中可行，或者当我将新数据添加到现有表时，我可以让这个新表自动更新吗？

如果没有，有人可以推荐可以很好地做到这一点并在 OSX 上运行的好的报告生成软件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:53:05.113

这是您正在寻找的视图，而不是另一个表。它本质上是一个保存的`SELECT`查询。

```
CREATE VIEW {my_view}
AS
SELECT ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:53:10.420

听起来您想使用[View](http://en.wikipedia.org/wiki/View_%28database%29)。[下面](http://dev.mysql.com/doc/refman/5.0/en/create-view.html)介绍如何在 MySQL 中创建视图。视图允许您创建一个“虚拟”表，该表可以从其他数据库表中提取数据。然后您可以从视图中获取数据，就好像它是它自己的表一样（即使它是其他表的聚合）。对基础数据的任何更改也将导致视图被更新。

# android - 最快的安卓移动框架？

> ID：12644932
> 
> 赞同：1
> 
> 时间：2012-09-28T17:50:12.683
> 
> 标签：android, jquery, html, jquery-mobile, frameworks

我的任务是设计一些应用风格的网页，用于几乎最便宜的沃尔玛 Android 平板电脑上。我从 jQuery mobile 开始，但只有一个包含 4 个项目的列表视图需要 5-6 秒才能加载，而且不是连接。有更快的 Android 移动框架吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T17:54:26.640

我已经尝试过 jQuery Mobile，但也因为性能不佳而最终退出。

我了解到最好的方法是赤脚：在 Apache Cordova (Phonegap) 之上使用 jQuery（或 Zepto.js，它甚至更快）。对于 jQuery mobile 中的简单页面转换，我使用我自己的 js 东西：[https ://github.com/grobmeier/Roadcrew.js](https://github.com/grobmeier/Roadcrew.js)

这给了我一个非常快速的应用程序，即使我没有准备好小部件。为此，我使用了 Bootstrap 顺便说一句。当我的应用程序长大后，我可能会花钱请人为我创造更独特的 UX 体验。

# sql - 在 Netezza 中获取上个月的最后一天

> ID：12644940
> 
> 赞同：1
> 
> 时间：2012-09-28T17:50:26.627
> 
> 标签：sql, netezza

我想得到上个月的最后一天。

像这样的东西：

```
FunctionName(10.02.2011) Result should be 31.01.2011 
```

我们`oracle`可以使用这个问题[question](https://stackoverflow.com/questions/4957224/getting-last-day-of-previous-month-in-oracle-function)`last_day()`中建议的函数来做到这一点。是否有类似的功能可以在.`Netezza Database`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T18:53:12.990

`last_day()`存在于 Netezza 中（不确定我们使用的是哪个版本）

```
select extract(day from last_day(to_date('20121001','YYYYMMDD') - interval '1 month' ));
 DATE_PART 
-----------
        30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T03:52:40.627

对于 Netezza，它将使用 add_month() 和 last_day() 函数来获取结果。以“2013-01-01”为例。

`select last_day(add_month('2013-01-01',-1));`

结果：2013-12-31

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:12:21.963

选择提取（天（选择（last_day（to_char（current_timestamp，'dd/mm/yyyy'）））））

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T17:32:49.570

与 Gordon 的回答类似，我在 NZ 6 上对此进行了测试，它可以通过从当前日期中减去当前日期 # 来获得上个月的最后一天。您可以替换`current_timestamp`为您的日期字段。

```
select current_timestamp, current_timestamp - extract(day from current_timestamp) 
```

结果：

```
2012-10-05 13:35:05 2012-09-30 00:00:00 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T14:15:14.940

我没有可用的 Netezza，但以下方法可能有效：

```
select <date> - datepart('day', <date>) - 1 
```

这会从日期中减去该月的当前日期，然后再减去一天以返回上个月的最后一天。

你也可以这样做：

```
select date(current_Date) - datepart('day', current_Date) - 1 
```

当前日期。

# file - 为什么应用程序下载文件时命名为 .part？

> ID：12644944
> 
> 赞同：1
> 
> 时间：2012-09-28T17:50:57.410
> 
> 标签：file, download

例如，firefox - 当它下载一个文件时，它会下载它`myfile.jpg.part`而不是`myfile.jpg`我只是好奇它为什么这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:56:00.593

这是一个部分文件，它用于防止用户打开不完整的文件，因为这可能会导致意外行为。此外，它们包含一些允许浏览器暂停和恢复下载的元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:58:25.140

.PART 是部分下载文件的缩写。扩展名附加到不完整的文件中，这样程序就不会因为文件不完整而尝试打开它们并崩溃/冻结。下载完成后，额外的扩展程序将被删除，您就可以开始了。

# c++ - 求和 2D 矢量

> ID：12644947
> 
> 赞同：1
> 
> 时间：2012-09-28T17:51:02.310
> 
> 标签：c++, matlab, vector

我有一个 2D 向量，我需要计算块内所有元素的总和（是的 - 我之前已经问过这个问题，但是，我需要进一步的帮助）..

基本上，在 MATLAB 中我得到的结果是：0.4259，而在 C++ 中我得到的结果是：1270.91。

首先，我按照以下算法（IN MATLAB）将矩阵（1D）拆分为块（600x200）：

```
function f = block(v, N, M)
%   N = 30 msec (600 samples)
%   M = 10 msec (200 samples)

n = length(v);
maxblockstart = n - N + 1;
lastblockstart = maxblockstart - mod(maxblockstart-1 , M);

% Remove the semicolon to see the number of blocks
% numblocks = (lastblockstart-1)/M + 1
  numblocks = (lastblockstart-1)/M + 1;

f = zeros(numblocks,N);

for i = 1:numblocks
 for j = 1:N
   f(i,j) = v((i-1)*M+j);
end
end 
```

这在 C++ 中：

```
vector< vector<double> > Audio::something(vector<double>& theData, int N, int M)
{
int n = theData.size();
int maxblockstart = n - N;
int lastblockstart = maxblockstart - (maxblockstart % M);

int numblocks = (lastblockstart)/M + 1;
vector< vector<double> > subBlock;
vector<double> temp;
this->width = N;
this->height = numblocks;

subBlock.resize(600*187);
for(int i=0; (i < 600); i++)
{
    subBlock.push_back(vector<double>());
    for(int j=0; (j < 187); j++)
    {   
        subBlock[i].push_back(theData[i*N+j]);
    } 
}    
return subBlock; 
```

}

这对我来说看起来非常好，我看不出它有什么问题。

现在求和，在 MATLAB 中：

```
len = length(blocks);
n = sum(size(blocks)) - len;
min = n+1;
max = 0;

for i = 1:n
  currsum = abs(blocks(i,1:len));
end
f = currsum; 
```

在 C++ 中：

```
vector<double>     Audio::filter(vector<iniMatrix>&blocks, double sumThres, double ZeroThres)
{
int n = this->height;

int min = n+1;
int max = 0;
int length = blocks.size();
double currsum = 0;

for(int i=0; (i < 600); i++)
{
    for(int j=0; (j < 187); j++)
    {
        currsum += abs(blocks[j][i]);
        //currsum = currsum / 600;
        //cout << abs(blocks[0][j]) << endl;
        //cout << currsum << endl;
    }
}
cout << currsum; 
```

}

我似乎找不到哪里出错了。我正在按照算法精确到点，但不明白为什么数字如此之高。我在 MATLAB 中做了一些输出，发现了这个：

```
 Columns 1 through 10

    0.0013    0.0011    0.0010    0.0009    0.0012    0.0012    0.0012    0.0014    0.0016    
    0.0016

  Columns 11 through 20

    0.0017    0.0019    0.0018    0.0014    0.0011    0.0011    0.0012    0.0010    0.0010    
    0.0011

  Columns 21 through 30

    0.0011    0.0010    0.0009    0.0006    0.0005    0.0002    0.0003    0.0007    0.0008    
    0.0009 
```

.. 这一直持续到 600（计数/显示 9 个值）。

这是否意味着 MATLAB 仅将这些值（每列 9 个值）求和 600 次？

我真的很困惑，希望有人可以帮助我:)！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T20:04:00.870

您的 MATLAB 代码实际上并未执行求和。你的第一个线索应该是你的输出是一个向量而不是一个标量。您正在调用`abs()`每个包含 600 个值的块（这会产生另一个 600 个元素的向量），并且每次都用该向量覆盖 currsum。

我不知道为什么您的代码包含 sum(size(blocks))，但是对于总和，请尝试

```
f = sum(sum(abs(blocks))); 
```

其他注意事项：在 MATLAB 中，将每个窗口存储为列而不是行更为典型。如果您有信号处理工具箱，请使用该命令`buffer`从单个命令生成重叠窗口。然后，`sum`默认情况下，类似的命令将在列下运行，因此您可以调用一次并获取每个窗口的总和。

# asp.net - 发送电子邮件时如何插入换行符？

> ID：12644955
> 
> 赞同：2
> 
> 时间：2012-09-28T17:51:31.637
> 
> 标签：asp.net, email, blogengine.net, blog-engine

"\n" 或 "<br />" 都不起作用。我在通过电子邮件发送自定义表单的内容时尝试插入换行符：

```
protected void SubmitBtn_Click(object sender, EventArgs e)
{
    if (Page.IsValid)
    {
        StringBuilder mailBody = new StringBuilder();
        mailBody.Append("Company Name: " + companyText.Text.Trim() + "\n\n");
        mailBody.Append("Name: " + firstNameText.Text.Trim() + " " 
            + lastNameText.Text.Trim() + "\n\n");
        mailBody.Append("Email: " + emailText.Text.Trim() + "\n\n");

        if(!String.IsNullOrEmpty(tradeText.Text))
            mailBody.Append("Trade: " + tradeText.Text.Trim() + "\n\n");

            bool success = SendEmail(emailText.Text.Trim(), 
                companyText.Text.Trim(), "SubContractors Form Submission",
                    mailBody.ToString()); 
    }
}

private bool SendEmail(string email, string name, 
    string subject, string message)
{
    using (MailMessage mail = new MailMessage())
    {
        mail.From = new MailAddress(BlogSettings.Instance.Email, name);
        mail.ReplyTo = new MailAddress(email, name);

        mail.To.Add(BlogSettings.Instance.Email);
        mail.Subject = subject;
        mail.Body += message;

        if (Utils.SendMailMessage(mail).Length > 0)
        {
            return false;
        };
    }
    return true;
} 
```

**更新：**

我最终得到了 <br /> 的工作。它不起作用的原因是因为这是我从联系表格中获得的原始代码：

```
mail.Body += message.Replace("\n\n", "<br />"); 
```

`MailMessage.IsBodyHtml`在核心库代码中设置为 true。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T18:20:23.197

您可以使用：

*   使用默认[MailMessage.IsBodyHtml = False](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.isbodyhtml.aspx)模式时的[Environment.NewLine运算符；](http://msdn.microsoft.com/en-us/library/system.environment.newline.aspx)

*   [当MailMessage.IsBodyHtml](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.isbodyhtml.aspx)模式为**True**时，通过“br”标签实现换行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T17:53:12.440

您正在寻找`Environment.NewLine`.

```
mailBody.Append("Email: " + emailText.Text.Trim() + Environment.NewLine); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T17:58:34.180

我认为使用`AppendLine`而不是`Append`应该适用于你正在做的事情：

```
StringBuilder mailBody = new StringBuilder();

string company = companyText.Text.Trim();
string firstName = firstNameText.Text.Trim();
string lastName = lastNameText.Text.Trim();
string email = emailText.Text.Trim();
string trade = tradeText.Text.Trim();

mailBody.AppendFormat("Company Name: {0}", company).AppendLine();
mailBody.AppendFormat("Name: {0} {1}", firstName, lastName).AppendLine();
mailBody.AppendFormat("Email: {0}", email).AppendLine();

if(!string.IsNullOrEmpty(trade))
{
    mailBody.AppendFormat("Trade: {0}", trade).AppendLine();
}

bool success = SendEmail(email, company, "SubContractors Form Submission", 
    mailBody.ToString()); 
```

* * *

`AppendFormat()`为清楚起见添加

* * *

`.Trim()`在少数情况下创建变量以消除同一文本的多个ing

* * *

按照此处所述进行改编`AppendFormat().AppendLine()`以提高性能：[您何时使用 StringBuilder.AppendLine/string.Format 与 StringBuilder.AppendFormat？](https://stackoverflow.com/questions/349724/when-do-you-use-stringbuilder-appendline-string-format-vs-stringbuilder-appendf)

# android - Android 搜索对话框修改？

> ID：12644956
> 
> 赞同：0
> 
> 时间：2012-09-28T17:51:38.420
> 
> 标签：android, search-dialog

我的应用程序中有一个正常运行的搜索对话框。我的问题是：是否可以修改搜索对话框，以便在填充 ListView 时输入文本字段和搜索按钮（位于屏幕顶部）不会消失？所以我希望输入界面始终存在，直到我通过单击列表项离开搜索活动。更妙的是，软件键盘只能在输入界面被操作时出现吗？我正在创作的 2.2 中是否可以对 Android 搜索对话框进行这些调整？

![我希望这个搜索栏在 ListView 填充时不会消失](../Images/c3526890646c5b71bdd8513a667e4505.png)

我希望在填充 ListView 时保留搜索对话框中的这个搜索栏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T17:21:42.917

According to [Activity life cycle](http://developer.android.com/guide/components/activities.html) document:

> An activity can frequently transition in and out of the foreground—for example, `onPause()` is called when the device goes to sleep or when a dialog appears.

I guess that means that you cannot change the state of ListView until the Dialog is displayed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:55:11.353

是的，尝试使用如下线性布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

--------your search bar layout

<ListView
    android:id="@+id/list"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
     > 
```

如果您需要它作为警报对话框，只需将主题属性作为对话框应用于具有此布局的活动

# logging - 如何以编程方式更改 logback.xml 中的日志记录级别

> ID：12644958
> 
> 赞同：2
> 
> 时间：2012-09-28T17:52:04.897
> 
> 标签：logging, log4j, slf4j, logback

我想更改在我的 logback.xml 文件中设置的记录器的级别。我可以手动进行更改，但我想通过编写一段代码来完成。我对这些东西很感兴趣，这是我第一次从事日志记录。在这方面或 log4j 或任何此类指针上的任何帮助都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T18:34:57.213

您可以在程序中将日志记录级别设置为：

```
Logger root = (Logger)LoggerFactory.getLogger(Logger.ROOT_LOGGER_NAME);
root.setLevel(Level.INFO); 
```

检查[logback 手册](http://logback.qos.ch/manual/architecture.html#LoggerContext)
希望有帮助！

# python - PyQt如何在closeEvent中获取发件人（小部件）？

> ID：12644963
> 
> 赞同：3
> 
> 时间：2012-09-28T17:52:17.597
> 
> 标签：python, pyqt4, qdockwidget

我正在尝试为几个动态添加到 QMainWindow 的 dockWidgets 捕获 closeEvent。我不清楚如何确定哪个小部件已关闭。这是一个简化的示例：

```
class Example(QtGui.QMainWindow):

    def __init__(self):
        super(Example, self).__init__()

        self.leftDockWidget = QtGui.QDockWidget('pick tool', self)
        self.leftDockWidget.setWidget( QtGui.QLabel('a dock widget') )
        self.addDockWidget( QtCore.Qt.LeftDockWidgetArea, self.leftDockWidget )
        self.leftDockWidget.closeEvent = self.dockWidgetCloseEvent       
        self.show()

    def dockWidgetCloseEvent(self, event):
        print event
        # how to get sender widget ? 
```

event.sender() 似乎不存在..有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-28T18:10:28.027

实现您想要的一种方法是使用[事件过滤器](http://doc.qt.digia.com/4.8-snapshot/qobject.html#eventFilter)：

```
from PyQt4 import QtGui, QtCore

class Example(QtGui.QMainWindow):
    def __init__(self):
        super(Example, self).__init__()
        self.leftDockWidget = QtGui.QDockWidget('pick tool', self)
        self.leftDockWidget.setWidget(QtGui.QLabel('a dock widget'))
        self.addDockWidget(QtCore.Qt.LeftDockWidgetArea, self.leftDockWidget)
        self.leftDockWidget.installEventFilter(self)

    def eventFilter(self, source, event):
        if (event.type() == QtCore.QEvent.Close and
            isinstance(source, QtGui.QDockWidget)):
            print source.windowTitle()
        return super(Example, self).eventFilter(source, event)

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Example()
    window.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T07:10:11.213

```
def dockWidgetCloseEvent(self, event):
    self.sender() 
```

# html - 居中的 html 按钮链接

> ID：12644964
> 
> 赞同：0
> 
> 时间：2012-09-28T17:52:21.710
> 
> 标签：html

我对 HTML 知之甚少。几个小时以来，我一直在寻找和解决这个问题的答案。我正在尝试制作一个居中并链接到网站的 HTML 按钮。有人可以给我代码吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T18:17:07.763

将按钮代码放在中间`<div align='center'>buttoncode</div>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:08:43.367

制作居中并链接到网站的 HTML 按钮的最简单方法。

```
<center>
      <input type="button" value="Put Your Text Here" onClick="parent.location='http://www.google.com/'">
</center> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T18:16:40.560

```
<head>
    <script type="text/javascript">
      function DoIt(){
      window.open ('http:somewhere.net','_self',false);
      }
    </script>
</head>

<body>
  <center>
    <button onclick="DoIt ()">Put Some Text Here</button>
  </center>
</body> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-19T17:46:02.640

将代码放在中间

```
<center>

</center> 
```

为我工作！

# deepzoom - Deep Zoom Images 的 2008 和 2009 命名空间有区别吗？

> ID：12644965
> 
> 赞同：4
> 
> 时间：2012-09-28T17:52:23.683
> 
> 标签：deepzoom, seadragon

我注意到 Deep Zoom Composer 使用命名空间编写 DZI

```
http://schemas.microsoft.com/deepzoom/2009 
```

但是官方文档和唯一可用的架构是指

```
http://schemas.microsoft.com/deepzoom/2008 
```

XML 规定我不能将它们视为等价的，尽管它们看起来是等价的。那么有谁知道是否有区别甚至更好，可以指出一些文档吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T22:55:04.933

当时与 Seadragon 的项目经理交谈时，他认为唯一添加的东西是一个可选的额外标签，以支持 Microsoft 的[Smooth Streaming](http://www.iis.net/downloads/microsoft/smooth-streaming)服务器功能。如果您未使用平滑流式处理，则 2008 架构与 2009 架构相同。

# javascript - 是否可以有一个 keyCode 等于键？

> ID：12644967
> 
> 赞同：0
> 
> 时间：2012-09-28T17:52:24.347
> 
> 标签：javascript, jquery, jquery-ui, accessibility

我正在创建一个更易于访问的 jQuery UI 滑块版本，其中数字键分配给将滑块移动到不同位置的事件。我希望用户能够在键盘上使用两组数字。

> 数字 1 的示例“49”和“97”。

这是我正在使用的代码：

```
if(event.keyCode == "49")
{
$("#slider_feedback").html(mod3["rc" + clip + "_1"]);
$("#slider_feedback").show();
$(".ui-slider-handle").css("left", "0%");
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T17:55:53.483

为什么您不只是将两个条件都放在 IF 语句中，而是使用 OR 运算符：

```
if(event.keyCode == 49 || event.keyCode == 97)
{
$("#slider_feedback").html(mod3["rc" + clip + "_1"]);
$("#slider_feedback").show();
$(".ui-slider-handle").css("left", "0%");
} 
```

看一个Java script OPERATORS列表，稍微研究一下（JavaScript Assignment Operators直接连接到这个问题）：
[http ://www.w3schools.com/js/js_operators.asp](http://www.w3schools.com/js/js_operators.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:56:13.050

代替

```
if(event.keyCode == "49") 
```

必须

```
if(event.keyCode == '49' || event.keyCode == '97') 
```

或者

```
if(event.which== 49 || event.which== 97) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T17:58:27.410

我会像这样创建一个映射键码的数组：

```
var mapKeys = [
   49: 0,
   97: 0
]; 
```

然后，我只制作了一个脚本来处理按键。

```
$(document).bind('keypress', function(e) {
   if(mapKeys[e.keyCode] != undefined){
      $(".ui-slider-handle").css("left", mapKeys[e.keyCode] + "%");
   }
}); 
```

# mkmapview - 如何在 iOS6 上调整 MKAnnotationView 的大小？

> ID：12644970
> 
> 赞同：3
> 
> 时间：2012-09-28T17:52:31.330
> 
> 标签：mkmapview, mkannotationview

[Resize MKAnnotationView Image 当地图放大和缩小时？](https://stackoverflow.com/questions/8286711/resize-mkannotationview-image-when-map-zooms-in-and-out) 此方法在 iOS5 上成功，但在 iOS6 上失败。

我直接更改了 MKAnnotationView 的变换，没有运气。MKAnnotationView 只在瞬间调整大小（当在 MKMapView 内部进行 touch up 时，在 touch up 完成后，MKAnnotationView 将恢复原始大小）。

我的代码如下：

```
- (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated {
for (id <MKAnnotation>annotation in _mapView.annotations) {
    // if it's the user location, just return nil.
    if ([annotation isKindOfClass:[MKUserLocation class]])
        continue;

    // handle our custom annotations
    //
    if ([annotation isKindOfClass:[XPMKAnnotation class]])
    {
        // try to retrieve an existing pin view first
        MKAnnotationView *pinView = [_mapView viewForAnnotation:annotation];
        //resize the pin view
        double zoomLevel = [_mapView getZoomLevel];
        double scale = (1.0 * zoomLevel / 16) + 0.5;
        pinView.transform = CGAffineTransformMakeScale(scale, scale);
    }
    }
} 
```

我们可以在 iOS6 上调整 MKAnnotationView 的大小吗？有人知道任何方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T01:53:00.963

Apple 建议调整注释视图的 .image 属性的大小。在下面显示的情况下，我查看了在 viewforAnnotation 中设置的 UIImage 并将其重新缩放到 UIPinchGestureRecognizer 中的缩放级别

```
 UIImage *orangeImage = [UIImage imageNamed:@"Orange210.PNG"];
    CGRect resizeRect;
    //rescale image based on zoom level
    resizeRect.size.height = orangeImage.size.height * scale;
    resizeRect.size.width = orangeImage.size.width  * scale ;
    NSLog(@"height =  %f, width = %f, zoomLevel = %f", resizeRect.size.height, resizeRect.size.width,zoomLevel );
    resizeRect.origin = (CGPoint){0,0};
    UIGraphicsBeginImageContext(resizeRect.size);
    [orangeImage drawInRect:resizeRect];
    UIImage *resizedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    pinView.image = resizedImage; 
```

# html - 仅使用动态文本固定 div 宽度和垂直溢出

> ID：12644974
> 
> 赞同：0
> 
> 时间：2012-09-28T17:52:50.360
> 
> 标签：html, css

我使用基于组合框的 onchange 事件的函数将动态文本添加到选项卡（jquery ui 选项卡）。该脚本有效。问题是它只能水平生长。我不需要横向增长。即使我已经定义了最大宽度，它也不关心它并水平增长。

# 我需要垂直生长它。这意味着当它达到容器的最大宽度限制时开始追加到新行

```
from jquery UI(you can down load this)

<div id="myTabs"> 
        <ul>
            <li><a href="#a" id="tabok"><span style="background:#85E085; color:#000;  padding-top:0px; padding-bottom:0px;">OK</span></a></li>
            <li><a href="#b" id="tabdnt"><span style="background:#FFD6AD; color:#000;  padding-top:0px; padding-bottom:0px;">Not Sure</span></a></li>
            <li><a href="#c" id="tabdif"><span style="background:#FFB2B2; color:#000;  padding-top:0px; padding-bottom:0px;">Too Difficult</span></a></li>
        </ul>
        <div id="a" style="padding-top:0; margin-top:0; max-width:200px;" >
                </div>
        <div id="b"></div>
        <div id="c"></div>
    </div>
    <!--<script src="development-bundle/jquery-1.4.4.js"></script>-->
    <script src="jquery.ui.core.js"></script>
    <script src="jquery.ui.widget.js"></script>
    <script src="jquery.ui.tabs.js"></script>
    <script>
        (function($){
            $("#myTabs").tabs();
        })(jQuery);
    </script> 
```

==================================================== =========

我写的脚本

```
 newlink = document.createElement('a');

newlink.innerHTML = idname;
newlink.setAttribute('title', 'dsdsd');
newlink.setAttribute('href', '#'+idname);
newlink.setAttribute('class', 'k');
    $("#a").append(newlink);
    $(".k").css("padding-left","5px") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:47:51.553

尝试将 css 属性 white-space: normal 放在具有最大宽度的 div 中。这将使 div 尊重换行符。

# java - 在 Unix AIX 上运行 JAXB 时出现 IncompatibleClassChangeError

> ID：12644976
> 
> 赞同：2
> 
> 时间：2012-09-28T17:53:00.597
> 
> 标签：java, jaxb2

当我尝试在**AIX 机器**上运行我的项目时，我得到一个**java.lang.IncompatibleClassChangeError**。

 ***   **该项目使用JAXB API (2.0)**生成 XML 文件。
*   开发环境安装在**Windows XP**中，**使用JDK1.5.0**（与AIX机器的JDK相同）。
*   在开发环境中，该项目运行良好。但在 AIX 机器中它不起作用（抛出异常）。

这是我尝试运行项目时的堆栈跟踪：

```
........................./build.xml:176: java.lang.IncompatibleClassChangeError
at com.sun.xml.bind.v2.model.impl.ElementPropertyInfoImpl$1.size(ElementPropertyInfoImpl.java:82)
at java.util.AbstractList$Itr.hasNext(AbstractList.java:431)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:260)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:104)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getClassInfo(ModelBuilder.java:214)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:99)
at com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder.getClassInfo(RuntimeModelBuilder.java:85)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getTypeInfo(ModelBuilder.java:320)
at com.sun.xml.bind.v2.model.impl.RegistryInfoImpl.<init>(RegistryInfoImpl.java:103)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.addRegistry(ModelBuilder.java:362)
at com.sun.xml.bind.v2.model.impl.ModelBuilder.getTypeInfo(ModelBuilder.java:332)
at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:460)
at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:298)
at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:141)
at com.sun.xml.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1163)
at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:145)
at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:236)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:615)
at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:186)
at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:146)
at javax.xml.bind.ContextFinder.find(ContextFinder.java:348)
at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:446)
at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:409)
at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:313)
at gen.utils.Util.unmarshalling(Unknown Source)
at gen.utils.Util.mvtConfig(Unknown Source)
at gen.utils.Util.mvtGenConfig(Unknown Source)
at gen.start.StartGen.mvtGeneration(Unknown Source)
at gen.start.StartGen.start(Unknown Source)
at gen.start.StartGen.main(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:615)
at org.apache.tools.ant.taskdefs.ExecuteJava.run(ExecuteJava.java:217)
at org.apache.tools.ant.taskdefs.ExecuteJava.execute(ExecuteJava.java:152)
at org.apache.tools.ant.taskdefs.Java.run(Java.java:771)
at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:221)
at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:135)
at org.apache.tools.ant.taskdefs.Java.execute(Java.java:108)
at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:615)
at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
at org.apache.tools.ant.Task.perform(Task.java:348)
at org.apache.tools.ant.Target.execute(Target.java:390)
at org.apache.tools.ant.Target.performTasks(Target.java:411)
at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
at org.apache.tools.ant.Main.runBuild(Main.java:809)
at org.apache.tools.ant.Main.startAnt(Main.java:217)
at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109) 
```

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-04T22:04:00.960

检查 AIX 上的类路径并确保您使用的是兼容版本的 jaxb-api 和 jaxb-impl 库。当只有次要版本相差一个增量时（例如 2.2.5 与 2.2.6），我遇到了 IncompatibleClassChangeError。

要检查您使用的每个库的版本以及兼容性所需的内容，请查看位于每个 jar 文件中 META-INF 目录中的清单文件。jaxb-impl 清单声明（除了它自己的版本）规范版本，这是它需要的 jaxb-api jar 版本。从 v2.2.2 开始，jaxb-api 和 jaxb-impl 兼容实例的版本号不再匹配：例如 jaxb-impl v2.2.4 与 jaxb-api v2.2.3 兼容

我只有使用 JAXB 的 Sun 实现 (com.sun.xml.bind) 的经验，因此如果您使用不同的实现，这可能不适用。**

# .net - 创建 DX9 设备时如何传递多个设备 CreateFlags？

> ID：12644977
> 
> 赞同：0
> 
> 时间：2012-09-28T17:53:01.387
> 
> 标签：.net, graphics, bit-manipulation, direct3d, slimdx

我正在使用 SlimDX(DX9)，但我想它对于所有版本的 DX 都是一样的。我试图通过 CreateFlags.HardwareVertexProssesing 和 CreateFlags.Multithreaded，但我不知道如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T18:07:10.980

由于它们是标志，您应该能够使用位 OR 运算符组合它们。

```
CreateFlags.HardwareVertexProcessing | CreateFlags.Multithreaded 
```

**根据评论编辑**

假设 HardwareVertexProcessing = 0001 和多线程 = 0010

如果我们将这些 OR 在一起，我们会得到：

```
0001
0010 OR
----
0011 
```

但如果我们与这些，我们得到：

```
0001
0010 AND
----
0000 
```

[此链接](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators#.7C_%28Bitwise_OR%29)提供了更详细的信息。它来自 Mozilla 开发者网络。

# wordpress - Kaltura 的用于 Wordpress 的 All IN ONE Video 插件：是否有任何“如何使用”文档？

> ID：12644979
> 
> 赞同：0
> 
> 时间：2012-09-28T17:53:05.847
> 
> 标签：wordpress, video-streaming, video-capture, kaltura

Kaltura 的 Wordpress 插件看起来是一个很棒的工具。在编辑页面时将视频添加到页面似乎很有效。但是，一旦您查看该网站，该视频就不会显示。此外，帖子页面上有一个按钮，上面写着“添加视频评论”。它也不起作用。这就是我非常喜欢的工作。

我去过 Kaltura 网站，有大量的文档，但没有任何东西真正适用于这个 Wordpress 插件。对他们来说几乎是不存在的......

对此的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T13:02:38.837

好像您的安装有问题...您提到的功能应该在安装后才可以使用。

*   您使用的是 Kaltura.com 还是您自己托管的 Kaltura CE？
*   我们可以看到问题的任何公共 URL 吗？

# regex - 与正则表达式匹配的 Htaccess 重定向 url

> ID：12644984
> 
> 赞同：0
> 
> 时间：2012-09-28T17:53:17.093
> 
> 标签：regex, .htaccess, mod-rewrite, url-rewriting, rewrite

我正在尝试重定向任何符合以下条件的网址：

```
old-domain.com/marketplace/businesses/anything-here/ads/
old-domain.com/marketplace/businesses/anything-here/ads/anyhting-after-this-too
old-domain.com/marketplace/businesses/anything-here/ads/anyhting-after-this-too/anyhting-after-this-too/
etc... 
```

到

```
new-domain.com/deal/ 
```

这就是我的`.htaccess`文件的样子

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteBase /
    RewriteRule ^marketplace/businesses/([a-z0-9\-_]+)/ads/(.*) http://new-domain.com/deal/ [R=301,L]
</IfModule> 
```

我已经尝试了几种变体，包括交换`([a-z0-9\-_]+)`with`([A-Za-z0-9_-\s\.]+)`和`[a-zA-Z-_0-9]+)`其他组合，但我似乎无法让它工作。

还要注意我`anything-here`在网址中所说的位置，这意味着我希望能够匹配几乎所有可能存在的东西。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:26:05.863

问题是我有一个物理目录，`/marketplace/businesses/`其中包含一个`.htaccess`阻止它工作的文件。

我能够将它添加到该`.htaccess`文件中，它就像一个魅力。

感谢所有看过并尝试过的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:08:46.853

我认为这可能有效。（虽然没试过）

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^marketplace/businesses/(.*) http://new-domain.com/deal/$1 [NC] 
```

这将翻译这个

```
old-domain.com/marketplace/businesses/anything-here/ads/
old-domain.com/marketplace/businesses/anything-here/ads/anyhting-after-this-too
old-domain.com/marketplace/businesses/anything-here/ads/anyhting-after-this-too/anyhting-after-this-too/ 
```

对此

```
http://new-domain.com/deal/anything-here/ads/
http://new-domain.com/deal/anything-here/ads/anyhting-after-this-too
http://new-domain.com/deal/anything-here/ads/anyhting-after-this-too/anyhting-after-this-too/ 
```

或者像这样我想保持零件完好无损，试试这个

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^marketplace/businesses/([a-zA-Z0-9\-_]+)/ads/([a-zA-Z0-9\-_]+) http://new-domain.com/deal/$1/$2 [NC] 
```

这将被翻译成这个

```
http://new-domain.com/deal/anything-here/anyhting-after-this-too 
```

但我认为其他两个不会匹配正则表达式。

# vb.net - 使用 sql server 在 vb.net 中创建设置

> ID：12644987
> 
> 赞同：0
> 
> 时间：2012-09-28T17:53:43.877
> 
> 标签：vb.net, sql-server-2005, installation, remote-connections

是否有任何可能的方法来为我使用 sql server 作为后端在 vb.net 中编写的程序创建一个设置。我有一个创建数据库代码的模块，我还在 vb.net 中为我的项目创建了一个设置，但我希望此设置即使在没有安装 Visual Studio 和 sql server 的系统中也能正常运行。我尝试在没有两者的系统上运行它，但我得到的错误是 sql server 2005 在默认设置中不允许远程连接，我尝试更改一些设置，但似乎没有任何效果。是否需要有服务器来创建数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:29:50.197

当我编写需要在客户端安装 SQL Server 的程序时，我使用以下逻辑：

1.  [确定客户端计算机上是否安装了 SQL Server](https://stackoverflow.com/questions/2381055/check-if-sql-server-any-version-is-installed)

2.  如果未安装，我会提示用户下载它（或使用您的安装程序脚本为他们下载它。我使用 NSIS 安装程序）。确保根据您的要求（和客户端的操作系统）为用户安装适当的版本。我通常使用 SQL Sever 2008 R2 Express Edition，SP1。

然后我使用我的安装程序脚本命令执行 SQL 安装程序。在 NSIS 中，它是 ExecWait。在 VB.Net 你有这样的[东西](https://stackoverflow.com/questions/10261521/how-to-run-dos-cmd-command-prompt-commands-from-vb-net)。您必须通过命令行参数安装它。以下是命令行参数列表：http: [//msdn.microsoft.com/en-us/library/ms144259 (v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms144259(v=sql.100).aspx)

这是我使用的：

```
C:\PathToMySQLDownload\SQLEXPR.exe /QUIETSIMPLE /SkipRules=RebootRequiredCheck
/ACTION=install  /IACCEPTSQLSERVERLICENSETERMS=1 /FEATURES=SQL
/INSTANCENAME=MSSQLSERVER /SECURITYMODE=SQL /SAPWD=MySAPassword /NPENABLED=1 
/TCPENABLED=1 /SQLSVCACCOUNT="NETWORK SERVICE" /SQLSYSADMINACCOUNTS="NETWORK SERVICE"
/AGTSVCACCOUNT="NETWORK SERVICE" /ASSVCACCOUNT="NETWORK SERVICE"
/RSSVCACCOUNT="NETWORK SERVICE" /ISSVCAccount="NETWORK SERVICE"
/ASSYSADMINACCOUNTS="NETWORK SERVICE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T17:58:40.423

一点谷歌总是能解决问题......

要将 SQL Server 2005 配置为允许远程连接，您必须完成以下步骤：

1.) 在要从远程计算机连接的 SQL Server 实例上启用远程连接。

2.) 打开 SQL Server Browser 服务。

3.) 配置防火墙以允许与 SQL Server 和 SQL Server Browser 服务相关的网络流量。

[如何配置 Sql 2005 以允许远程连接](http://support.microsoft.com/kb/914277)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T23:48:30.217

您可以在安装项目的先决条件中包含 SQL Server Express。

当您构建安装项目时，它将从 C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Packages 中获取安装所需的包

然后，您可以修改 SQL Express 的 package.xml 文件，以更改安装时的配置方式。查找命令参数元素，然后打开混合模式身份验证添加 SECURITYMODE=SQL 以启用远程访问添加 DISABLENETWORKPROTOCOLS=0

（或者对于 SQL 2008 r2 它是 /tcpenabled=1 ）

当最终用户运行安装时，将首先安装 SQL Express，并使用您指定的选项。

# postgresql - 从某一点最近的地方

> ID：12644988
> 
> 赞同：9
> 
> 时间：2012-09-28T17:53:54.927
> 
> 标签：postgresql, postgis, postgresql-9.1

我有下表

```
create table places(lat_lng point, place_name varchar(50));

insert into places values (POINT(-126.4, 45.32), 'Food Bar'); 
```

获取所有接近特定纬度/经度的地方的查询应该是什么？

gis 已安装。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T04:37:31.280

如果你真的想使用 PostGIS：

```
create table places(
    lat_lng geography(Point,4326),
    place_name varchar(50)
);

-- Two ways to make a geography point
insert into places values (ST_MakePoint(-126.4, 45.32), 'Food Bar1');
insert into places values ('POINT(-126.4 45.32)', 'Food Bar2');

-- Spatial index
create index places_lat_lng_idx on places using gist(lat_lng); 
```

现在查找 1 公里（或 1000 米）内的所有地点：

```
select *, ST_Distance(lat_lng, ST_MakePoint(-126.4, 45.32)::geography)
from places
where ST_DWithin(lat_lng, ST_MakePoint(-126.4, 45.32)::geography, 1000)
order by ST_Distance(lat_lng, ST_MakePoint(-126.4, 45.32)::geography); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-28T18:09:29.863

```
select *
from places
where lat_lng <-> POINT(-125.4, 46.32) < 1
order by lat_lng <-> POINT(-125.4, 46.32) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-10T12:02:41.680

在位置字段上创建索引：

```
CREATE INDEX ON table_name USING GIST(location); 
```

GiST 索引能够优化“最近邻”搜索：

```
SELECT * FROM table_name ORDER BY location <-> point '(-74.013, 40.711)' LIMIT 10; 
```

**注意：**点的第一个元素是经度，第二个元素是纬度。

# javascript - 猫鼬分页

> ID：12644989
> 
> 赞同：2
> 
> 时间：2012-09-28T17:53:59.373
> 
> 标签：javascript, node.js, mongodb, express, mongoose

我正在尝试使用 MongoDB 和 Mongoose 为 REST 服务进行简单的分页。这就是我现在的做法。

如您所见，我在“下一个”变量上发送 0，但我只想在没有更多结果时发送零。当结果结束并且没有更多可以得到时，我怎么能得到？

```
 var user = User.find(
    {},
    {},
    {skip: skip, limit: limit},
    function(err, docs) {
        if (!err) {
            res.json({users: docs, next: 0} );
        } else {
            throw err;
        }
    }); 
```

谢谢！

PS：我正在使用 node.js 和 express。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:24:20.283

如果我的问题正确，您想发送剩余文档的数量以进行下一次查询，如果是这样，您可以使用 limit * 2 进行查询，但只返回“限制”文档，从 docs.length 中减去限制，您将获得数量下一个查询的剩余文档。

使用更高级的查询可能会有更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T19:02:27.203

尝试这个：

```
if ( !docs ) {
  res.json({users: [], next: 0});
} 
```

# frameworks - 实体框架代码优先：实体拆分

> ID：12644990
> 
> 赞同：0
> 
> 时间：2012-09-28T17:54:05.180
> 
> 标签：frameworks, entity

是否可以映射以下场景？

**数据表**

学生

+ ID：int PK
+ 名称：varchar(200)

课程

+ ID：int PK
+ StudentID：FK
+ CourseID：FK
+ EnrollmentDate：DateTime

培训班

+ ID：int PK
+ 名称：varchar(200)

我想将表格映射到下面的实体。

 `````
public class Student
{
    [Key]
    public int ID {get;set;}
    public string Name {get;set;}
    public virtual ICollection<Class> Classes {get;set;}
} 
````  ``````
public class Class
{
[Key]
public int ID {get;set;}
public Student Student {get;set;}
public DateTime EnrollmentDate {get;set;}
public string Name {get;set;} // this comes from the Courses data table
} 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T19:55:52.853

这应该是如何建立您需要的 FK 关系：

```
public class Student
{
   [Key]
   public int StudentId {get;set;}
   public string Name {get;set;}
}

public class Class
{
   [Key]
   public int ClassId {get;set;}
   public DateTime EnrollmentDate {get;set;}

   //foreign keys
   public int CourseId {get;set;}
   public string StudentId {get;set;} 

   //virtual constraint to link to referenced tables
   public virtual Course Course {get;set;}
   public virtual Student Student {get;set;}
}

public class Course
{
   [Key]
   public int CourseId {get;set;}
   public string CourseName {get;set;}
} 
```````