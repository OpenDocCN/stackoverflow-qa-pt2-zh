# StackOverflow 问答 15295000-15295999

# r - 忽略 tryCatch() 中的简单警告/错误

> ID：15295004
> 
> 赞同：10
> 
> 时间：2013-03-08T13:25:22.253
> 
> 标签：r, warnings, try-catch

我是`tryCatch()`. 然而，直到今天我才真正注意简单和常规警告/错误之间的区别，因此我真的不知道如何处理它们。

## 实际问题

我想知道的是如何告诉`tryCatch`（[参见帮助文件](http://stat.ethz.ch/R-manual/R-patched/library/base/html/conditions.html)）简单的警告是可以的，并且它应该返回结果`expr`而不是跳转到该`warning`部分。

下面你会发现一个可重现的例子

* * *

## 否`tryCatch`>> 无警告

```
require("forecast")
y   <- ts(c(6178, 7084, 8162, 8462, 9644, 10466, 10748, 9963, 8194, 6848, 7027, 7269, 6775, 7819, 8371, 9069, 10248, 11030, 10882, 10333, 9109, 7685, 7602, 8350, 7829, 8829, 9948, 10638, 11253, 11424, 11391, 10665, 9396, 7775, 7933, 8186, 7444, 8484, 9864, 10252, 12282, 11637, 11577, 12417, 9637, 8094, 9280, 8334, 7899, 9994, 10078, 10801, 12950, 12222, 12246, 13281, 10366, 8730, 9614, 8639, 8772, 10894, 10455, 11179, 10588, 10794, 12770, 13812, 10857, 9290, 10925, 9491, 8919, 11607, 8852, 12537, 14759, 13667, 13731, 15110, 12185, 10645, 12161, 10840, 10436, 13589, 13402, 13103, 14933, 14147, 14057, 16234, 12389, 11595, 12772))
out <- forecast::auto.arima(x=y)
> out
Series: y 
ARIMA(4,1,1)                    

Coefficients:
         ar1      ar2     ar3      ar4      ma1
      0.6768  -0.2142  0.5025  -0.7125  -0.8277
s.e.  0.0749   0.0889  0.0874   0.0735   0.0485

sigma^2 estimated as 915556:  log likelihood=-780.33
AIC=1572.65   AICc=1573.62   BIC=1587.91 
```

## `tryCatch`>> 简单警告

当我用 包装它时`tryCatch`，它会检测到一个简单的警告，该警告将导致我的`expr`块被“跳过”以支持该`warning`部分。因此该函数不返回估计结果，而是简单的警告。

```
mod <- tryCatch(
    out <- forecast::auto.arima(x=y),
    error=function(e) {
        print(e)
    },
    warning=function(w) {
        print(w)
    }
)

> mod 
<simpleWarning in kpss.test(x): p-value smaller than printed p-value> 
```

## 当前的解决方法

```
if (any(class(mod) == "simpleWarning")) {
    mod <- forecast::auto.arima(x=y)
}

> mod
Series: y 
ARIMA(4,1,1)                    

Coefficients:
         ar1      ar2     ar3      ar4      ma1
      0.6768  -0.2142  0.5025  -0.7125  -0.8277
s.e.  0.0749   0.0889  0.0874   0.0735   0.0485

sigma^2 estimated as 915556:  log likelihood=-780.33
AIC=1572.65   AICc=1573.62   BIC=1587.91 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-08T14:37:20.383

我认为您正在寻找 之间的区别`tryCatch`，后者捕获条件并从定义 tryCatch 的环境继续评估，与`withCallingHandlers`允许您“处理”条件，然后从条件发生的位置继续进行。看一下`warning`（或警告的帮助页面，但这不那么有趣），尤其是这些行

```
 withRestarts({
        .Internal(.signalCondition(cond, message, call))
        .Internal(.dfltWarn(message, call))
    }, muffleWarning = function() NULL) 
```

这表示 - 发出条件信号，但在发出条件信号的位置插入“重新启动”。那你就

```
withCallingHandlers({
    warning("curves ahead")
    2
}, warning = function(w) {
    ## what are you going to do with the warning?
    message("warning occurred: ", conditionMessage(w))
    invokeRestart("muffleWarning")
}) 
```

尽管`withCallingHandlers`经常与警告和`tryCatch`错误一起使用，但如果这是适当的操作，没有什么可以阻止人们“处理”错误或捕获警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:35:21.910

您可以回忆一下`forecast`该`warning`部分中的内容，如下所示：

```
mod <- tryCatch(
  out <- forecast::auto.arima(x=y),
  error=function(e) {
    print(e)
  },
  warning=function(w) {
    print(w)
    out <- forecast::auto.arima(x=y)
    return(out)
  }
) 
```

这将打印一个警告，但预测的结果现在存储在 mod 中。

```
<simpleWarning in kpss.test(x): p-value smaller than printed p-value>
> mod
Series: y 
ARIMA(4,1,1)                    

Coefficients:
         ar1      ar2     ar3      ar4      ma1
      0.6768  -0.2142  0.5025  -0.7125  -0.8277
s.e.  0.0749   0.0889  0.0874   0.0735   0.0485

sigma^2 estimated as 915556:  log likelihood=-780.33
AIC=1572.65   AICc=1573.62   BIC=1587.91 
```

# c++ - 如何控制 QGridLayout 中应该在 GUI 中绘制的小部件？

> ID：15295009
> 
> 赞同：0
> 
> 时间：2013-03-08T13:25:28.163
> 
> 标签：c++, qt

在我的应用程序中，我有一个`QGridLayout`涵盖大部分`Window`. 在其中，我添加了一系列`QLineEdit`&`QLabel`对象。目前，当`QLineEdit`对象数 > 500 &&`QLabel`对象 > 500 时，`GUI`速度非常慢，并且对于更大的值无法正常运行。而且大多数这些小部件在窗口中不可见，它们需要滚动才能查看。由于我`widgets`在`grid layout`（通过循环和循环后调用`repaint`）中添加了这么多，所以绘画需要很多时间。所以我有一个解决方案的想法，即使我`widgets`被添加到`Grid Layout`不是每个人都被画了。我想要一个`rectangle`里面所有`widgets`的东西都被画出来了**每当滚动窗口时，矩形的坐标就会更新**。但我不知道该怎么做。所以我想知道是否有可能做到这一点？如果可能，请添加一个小示例代码，以便我了解如何实现它。谢谢你。

**更新**：添加图像来描述情况。

```
Black Rectangle = QGridLayout say myGid.

Red Rectangle = Bounding Rectangle which is approximately same size as Main Window of my Application.

Green Rectangle = Widgets in myGrid. 
```

`Green Rectangle filled with yellow = Widgets shown in Main Window` *（仅应考虑调用这些小部件`repaint`）*，其余未填充的矩形是存在于`myGrid`但不考虑调用的小部件`repaint`。因此，当我在我的主应用程序中滚动时，坐标`red rectangle`会更新并且`widgets bounded by it are considered for repaint.` 我希望我让问题变得简单易懂。 ![在此处输入图像描述](../Images/551ee592af2e71a10455a3304964a96c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:57:52.603

我了解您不想丢弃您的代码。我会尝试其中一种，从最简单的开始：

*   您是使用 a[`QScrollArea`](http://qt-project.org/doc/qt-4.8/qscrollarea.html)还是使用滚动条模拟它？`QScrollArea`可能已经将绘制事件丢弃到视口之外的子小部件。在屏幕外组装网格。否则，每次添加新的小部件时，Qt 都会重新计算并重新绘制布局。（[这是一个完整的例子](https://gist.github.com/anonymous/fe8c343763db96ded195)。）

    ```
    QWidget* widget = new QWidget(); // This is an invisible widget.

    for (int i = 0; i < 100; i++) {
        for (int j = 0; j < 100; j++) {
            QLineEdit* lineEdit = new QLineEdit();
            lineEdit->setText(QString("I am the line edit at (%1, %2)").arg(i).arg(j));
            layout->addWidget(lineEdit, i, j);
            if (j % 10 == 0) {
                // Do not block the UI thread while the UI is being assembled.
                qApp->processEvents();
            }
        }
    }

    // The layout will be calculated only once, here:

    scrollArea->setWidget(widget);
    widget->show(); 
    ```

*   如果这不起作用，请创建一个引用可见矩形的[事件过滤器。](http://qt-project.org/doc/qt-4.8/qobject.html#installEventFilter)事件过滤是一种有用的技术，您可以在其中拦截针对一个或多个小部件的事件，并决定在处理之前是否应该丢弃它们。

    在您的情况下，当您拦截 a 时`QPaintEvent`，请检查目标小部件是否与可见矩形相交。如果是，则将事件传递给目标小部件。如果不是，则丢弃该事件。

    我不知道如何滚动 UI 的细节，所以我将计算可见矩形留给你。事件过滤器代码将是这样的。

    ```
     bool MyClass::eventFilter(QObject *obj, QEvent *event)
     {
        if (event->type() == QEvent::Paint) {
            if (QWidget* widget = qobject_cast<QWidget*>(object)) {
                QRect visibleRectangle = somehowGetVisibleRectangle();
                if (visibleRectangle.intersects(widget->geometry())) {
                    return false;
                } else {
                    // Returning true means "drop this event."
                    return true; 
                }
            }
        }

        // Assuming MyClass extends QWidget. Adjust as necessary.
        return QWidget::eventFilter(obj, event);
     } 
    ```

*   作为最后的手段，使用[`QGraphicsScene`](http://qt-project.org/doc/qt-4.8/qgraphicsscene.html)、[`QGraphicsWidget`](http://qt-project.org/doc/qt-4.8/qgraphicswidget.html)、[`QGraphicsGridLayout`](http://qt-project.org/doc/qt-4.8/qgraphicsgridlayout.html)和重新布局您的 UI [`QGraphicsView`](http://qt-project.org/doc/qt-4.8/qgraphicsview.html)。场景图可能更擅长丢弃不必要的 UI 重绘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:55:06.793

First of all. Are you sure you are solving your problem in the right way? Perhaps you will be happier with QTableWidget? Its cells can be editable and then QTableWidget will take care of creating and maintaining QLineEdit for the cell that is being edited.

# asp.net-mvc-4 - MVC4 会员资格：如何在注销时通知会员资格提供者？

> ID：15295010
> 
> 赞同：1
> 
> 时间：2013-03-08T13:25:29.833
> 
> 标签：asp.net-mvc-4, membership-provider, membership

我使用 VS2012“Internet 应用程序”模板创建了一个非常基本的 MVC 4 站点，并且我正在尝试实现一个自定义 MembershipProvider 类。

登录时，模板代码调用 WebSecurity.Login(...) 最终调用我的提供程序 ValidateUser 方法。

在注销时，模板代码调用 WebSecurity.Logout() 但据我所知，这不会调用我的会员提供程序上的任何方法。

我需要找到一种方法来通知我的身份验证后端用户已注销。

*   WebSecurity.Logout 到底是做什么的？
*   我应该如何通知会员提供商用户已注销？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T13:42:34.947

> *   WebSecurity.Logout 到底是做什么的？

它调用类`SignOut`上的方法`FormsAuthentication`来删除表单身份验证cookie。

> *   我应该如何通知会员提供商用户已注销？

了解用户是否登录或退出不是会员提供者的责任。您应该`[Authorize]`在控制器操作上使用该属性或调用`User.IsInRole("someRole")`来测试当前用户是否经过身份验证。

# grep - 使用先前 grep 的结果 grep 多个单词

> ID：15295011
> 
> 赞同：0
> 
> 时间：2013-03-08T13:25:32.740
> 
> 标签：grep, pipe

我有大量文件，我想在其中进行搜索。

我想找到所有单词 - 并且只有单词 - 被`X`. 我用后视和前瞻来做到这一点：

```
grep -rhoP "(?<=X)[a-zA-Z0-9_]*(?=X)" . 
```

现在我想知道之前的结果中是否有单词 - 带有完整的上下文 - 被`Y`. 我可以为一个特定的词做到这一点`abc`

```
grep -rP "(?<=Y)abc(?=Y)" . 
```

但是我怎样才能将这两个命令连接在一起呢？

更新

我有大量的 C 文件。我们所有的 api 函数首先在我们的许多 .h 文件之一中声明，并在我们的许多 .c 文件和内联 .h 文件之一中使用。

有些函数可能不能直接访问，而是通过函数指针访问，但事实证明这对开发来说是一个很大的障碍。为此，我们制作了一些宏 (`FP`和`CALL`)，以便能够轻松打开和关闭此要求。

```
FP(DoThis)
void DoThis(void); 
```

*   在要求*ON*的情况下，`FP`定义一个函数指针 - 在本例中为 for `DoThis`- 稍后可以通过 using 使用`CALL(DoThis)();`。
*   随着要求*OFF*，`FP`被扩展为空，并被`CALL(DoThis)`扩展为 just `DoThis`。

可以通过以下方式获取以这种方式创建函数指针的所有函数的列表：

```
grep -rhoP "(?<=FP\()[a-zA-Z0-9_]*(?=\))" . 
```

可以通过以下方式获取使用函数 DoThis 的函数指针的所有位置的列表：

```
grep -rP "(?<=CALL\()DoThis(?=\))" . 
```

现在我想要一个所有位置的列表，其中使用创建的任何函数的函数指针`FP`可以`CALL`被获取。因此，不知何故，我想将两个 grep 链接在一起，以便将第一个 grep 的每个结果提供给第二个，并将最终结果组合在一起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:29:51.103

也许这位好先生

```
grep -rho 'XY[a-zA-Z0-9_]*YX' . | sed 's/[XY]//g' 
```

# c# - 在动态面板上创建动态组合框

> ID：15295013
> 
> 赞同：0
> 
> 时间：2013-03-08T13:25:35.657
> 
> 标签：c#, winforms, visual-studio-2010

我正在尝试`comboboxes`在动态创建的对象上创建 4，`panel`但没有显示任何内容。我在这里缺少什么，这是我的代码：

```
public partial class Form1 : Form
    {
        ComboBox[] cmb;
        public Form1()
        {
            InitializeComponent();

        }

        Panel pnl;

        private void Form1_Load(object sender, EventArgs e)
        {
            panel();
            createCombo();
        }

        private void panel()
        {
            pnl= new Panel();
            pnl.Location = new Point(10, 10);
            pnl.BorderStyle = BorderStyle.FixedSingle;
            pnl.Size = new Size(200, 150);

            this.Controls.Add(pnl);
            createCombo();
        }

        private void createCombo()
        {

            for (int i = 0; i <= 3; ++i)
            {
                cmb[i] = new ComboBox();
                cmb[i].Text = "CodeCall!";
                cmb[i].Size = new Size(90, 00);
                cmb[i].Location = new Point(i+5, 0);
                pnl.Controls.Add(cmb[i]);
            }

        }
    } 
```

界面只显示面板：

![在此处输入图像描述](../Images/0eee57a7793808fb4f9d98a095d1dfbd.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T13:27:58.347

我最初认为问题是高度：

```
cmb[i].Size = new Size(90, 00); 
```

但是，事实证明您实际上*无法*设置 ComboBox 的高度。

* * *

*真正的*问题是`NullReferenceException`被吞没了（你必须在 64 位系统上）。您永远不会初始化`cmb`，因此它在`cmb[i] = new ComboBox()`被调用时为空。

请参阅[http://blog.adamjcooper.com/2011/05/why-is-my-exception-being-swallowed-in.html](http://blog.adamjcooper.com/2011/05/why-is-my-exception-being-swallowed-in.html)了解为什么会发生这种情况，但必须满足的条件是（引用）：

> 1.  您在 64 位版本的 Windows 上运行（您的应用程序是为 32 位还是 64 位构建的并不重要；只有操作系统的位深度）
> 2.  您正在构建一个 WinForms 应用程序
> 3.  您正在使用 Visual Studio 调试应用程序（使用异常捕获的默认选项）
> 4.  您的主窗体有一个 Load 事件处理程序
> 5.  在您的 Load 处理程序执行期间，发生异常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:37:24.463

如果您没有收到空引用异常，则经过测试并且代码可以正常工作。您需要实例化您的数组：

```
private void createCombo()
{
    cmb = new ComboBox[5];
    for (int i = 0; i <= 3; ++i)
    {
        cmb[i] = new ComboBox();
        cmb[i].Text = "CodeCall!";
        cmb[i].Size = new Size(90, 00);
        cmb[i].Location = new Point(i+5, 0);
        pnl.Controls.Add(cmb[i]);
     }
} 
```

对我来说，组合框毫无问题地出现。然而，它们几乎都出现在彼此之上，您需要以不同的方式设置 cmb[i].Location。另外，我个人会推荐这个而不是你正在做的事情：

```
private void createCombo()
{
    cmb = new ComboBox[5];
    int width = 90;
    int height = 25;
    int spacing = 5;
    for (int i = 0; i <= 3; ++i)
    {
        ComboBox newBox = new ComboBox();
        newBox.Text = "CodeCall!";
        newBox.Size = new Size(width, height);
        newBox.Location = new Point((i*width)+spacing, 0);
        cmb[i] = newBox;
        pnl.Controls.Add(newBox);
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:33:49.230

> 问题是高度：
> 
> cmb[i].Size = new Size(90, 00);

答案不包括确切答案。问题是你的身高是0。尝试例如：

```
cmb[i].Size = new Size(90, 90); 
```

# xml - Xquery 提取标签的开场声明

> ID：15295014
> 
> 赞同：1
> 
> 时间：2013-03-08T13:25:41.293
> 
> 标签：xml, xquery

我有以下 XML：

```
<RULES>
    <TRAP name="trap1" oid=".1.2.3">
      <VAR_LIST>
        <VAR name="var1" value=".1.2.3.1"/>
        <VAR name="var2" value=".1.2.3.2"/>
      </VAR_LIST>
    </TRAP>
    <TRAP name="trap2" oid=".1.2.4">
        ...
    </TRAP>
    ...
</RULES> 
```

我想生成扁平化摘要，所以我按如下方式遍历它：

```
for $trap in /RULES/TRAP
    for $var in $rule/VAR_LIST/VAR
       return (opening-tag-declaration($trap), opening-tag-declaration($var), "&#10;") 
```

我想得到以下输出，但我不知道如何只提取标签的开始声明......

```
<TRAP name="trap1" oid=".1.2.3> <VAR name="var1" value=".1.2.3.1"/>
<TRAP name="trap1" oid=".1.2.3> <VAR name="var2" value=".1.2.3.2"/>
<TRAP name="trap2" oid=".1.2.4> ...
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:01:59.423

这是定义的一种方法`opening-tag-declaration`（改编自FunctX 库中的[此函数）：](http://www.xqueryfunctions.com/xq/functx_remove-elements.html)

```
declare namespace example = "http://example.com";
declare function example:opening-tag-declaration 
    ( $elements as element()* ) as element()* {

    for $element in $elements
        return element
            {node-name($element)}
            {$element/@* }
}; 
```

它在结果元素中包括元素名称及其属性，但不包括子节点。使用 w3schools 的[books.xml](http://www.w3schools.com/xquery/books.xml)示例文件进行[演示。](http://www.zorba-xquery.com/html/demo#dY19u2nz0mqDFDTQWgWarJ9PVE8=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:07:58.283

这是我在[mgibsonbr](https://stackoverflow.com/users/520779/mgibsonbr)回答之前解决此问题的自定义方法：

```
declare function local:tag($node as node()) as xs:string {
    concat(substring-before(fn:serialize($node), ">"), ">")
}; 
```

# utf-8 - ELF 符号可以用 UTF8 表示吗？

> ID：15295028
> 
> 赞同：4
> 
> 时间：2013-03-08T13:26:37.237
> 
> 标签：utf-8, elf

ELF 表中的符号可以使用 UTF8 字符还是仅限于 ASCII？

注意：这不是我要解决的问题，而是我想知道的更多问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T05:34:53.847

ELF 字符串表使用以 NUL 结尾的字符串，因此您可以在其中存储 UTF-8 编码的符号名称。

也就是说，使用此类符号的工具需要支持 Unicode 才能正常工作。例如：

*   您的编程语言工具链是否正确地将指定的 Unicode“字符”分类为字母、数字或标点符号。
*   是否可以使用从右到左（或从上到下）编写的脚本。
*   您的系统是否正确呈现以复杂脚本（阿拉伯语、泰语等）编写的符号。
*   创建符号时是否可以混合来自不同脚本的字符。
*   对于那些必须产生排序输出的工具，排序是否按预期工作。

... ETC。

# django - 使用 URL 中的凭据登录 Django 管理员

> ID：15295031
> 
> 赞同：0
> 
> 时间：2013-03-08T13:26:42.540
> 
> 标签：django

我是 Django 的新手。基本上我正在寻找的是 - 我希望用户单击链接并登录到管理站点。参数可以在 URL 本身中传递吗？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:37:00.197

你可以在你的网站上写下你自己的观点，这将：

*   从您的 URL 获取凭据
*   *使用django.contrib.auth中的**身份验证*和*登录*功能对用户进行身份验证（请参阅[https://docs.djangoproject.com/en/dev/topics/auth/default/#auth-web-requests](https://docs.djangoproject.com/en/dev/topics/auth/default/#auth-web-requests)）
**   然后使用 django*重定向*功能将您的用户重定向到管理员 URL（请参阅[https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#redirect](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#redirect)）*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:36:37.963

使用 django 注册您的管理面板。 [https://docs.djangoproject.com/en/1.3/intro/tutorial02/#activate-the-admin-site](https://docs.djangoproject.com/en/1.3/intro/tutorial02/#activate-the-admin-site)

改变你的`urls.py` 喜欢

```
from django.conf.urls.defaults import patterns, include, url
    from django.contrib import admin
    admin.autodiscover()

    urlpatterns = patterns('',
        # Examples:
        # url(r'^$', 'mysite.views.home', name='home'),
        # url(r'^mysite/', include('mysite.foo.urls')),

        # Uncomment the admin/doc line below to enable admin documentation:
        # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

        # Uncomment the next line to enable the admin:
        url(r'^admin/', include(admin.site.urls)),
    ) 
```

将href设为`<a href = "www.yoursitename.com/admin/">Click</a>`

你完成了*

# jquery - 显示具有相同名称的隐藏 div

> ID：15295034
> 
> 赞同：0
> 
> 时间：2013-03-08T13:26:47.760
> 
> 标签：jquery, html

我有一个这样的菜单：

品牌1

*   意甲 1
*   意甲 2
*   意甲 3

品牌 2

*   意甲 1
*   意甲 2
*   意甲 3

该品牌在一个名为 catmerk 的 div 中，该 div 是另一个 div 与名为 divserie 的系列

因此，所有品牌的 div 都具有相同的名称
，如果我单击品牌名称 1，那么 jquery 是否有可能在品牌 div 下的 div caterie 中的所有内容都会切换。
所以如果我点击一个品牌名称，一切都会在一开始就关闭，它会显示该品牌的系列，而不是所有品牌的所有系列。
我希望你能理解我的弱英语。

```
<div id="categorie"><!-- een lijst met categorien -->    
    <div id="catmerk"><a href="#">Brand 1</a><br></div>  
    <div id="catserie">  Serienam1<br>
        Seriename2
        seriename 3
        seriename 4
    </div>
    <div id="catmerk"><a href="#">Brand 2</a><br></div>
    <div id="catserie">  Serienam1<br>
        Seriename2
        seriename 3
        seriename 4
    </div> 
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:49:32.757

首先，您的 html 中存在代码问题。ID 必须是唯一的，而类可以重复：

您的类别 html 应该是：

```
<div id="categorie">

<!-- een lijst met categorien -->
    <div class="catmerk">
        <a href="merk.php?id=26">Bette</a><br>
    </div>
    <div class="catserie">
        <a href="serie.php?id=24"> Bowl</a><br>
        <a href="serie.php?id=25">Aqua</a><br>
        <a href="serie.php?id=46"> Home</a><br>
        <a href="serie.php?id=62"> K.forty</a><br>
    </div>
    <div class="catmerk">
        <a href="merk.php?id=5">Bruynzeel</a><br>
    </div>
    <div class="catserie">
        <a href="serie.php?id=9"> Faro</a><br>
    </div>
    <div class="catmerk">
        <a href="merk.php?id=27">Burgbad</a><br>
    </div>
    <div class="catserie">
        <a href="serie.php?id=27"> Bel</a><br>
        <a href="serie.php?id=58"> Crono</a><br>
    </div>
    <div class="catmerk">
        <a href="merk.php?id=19">Cleopatra</a><br>
    </div>
    <div class="catserie">
        <a href="serie.php?id=11"> Premium Line</a><br>
    </div>
    <div class="catmerk">
        <a href="merk.php?id=28">Clou</a><br>
    </div>
    <div class="catserie">
        <a href="serie.php?id=26"> First</a><br>
    </div> 
```

现在在 javascript 部分，这是一个示例，它并不完全是您想要实现的，但至少它给出了方法的想法：

```
$(document).ready(function() {
  // here the id
  $("#catserie").on("click", function(event){
    // add here any action you need.

     all div here will hide    
     $("#categorie div").hide();

     // here all elements with class .catserie will show
     $(".catserie").show();

  });
}); 
```

一种方法是添加另一个类，例如隐藏。在您的类别上开设更多课程会有所帮助

贝特

因此您可以在 jQuery 中使用选择器“.category”，例如 $(".category") 选择所有类别。

您还可以为“过滤”添加一个类，以及一个隐藏 jQuery“隐藏”的内容

活动内容：

```
<div class="category catserie filtered"> 
```

隐藏内容

```
<div class="category catmerk hidden"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:44:59.273

看起来您想在单击类别时显示/隐藏类别。您可以使用 jqueryui 手风琴执行此操作，如下所示：

```
$("#categorie").accordion(); 
```

例如[http://jsfiddle.net/y6Rj8/](http://jsfiddle.net/y6Rj8/)

注意，我必须包括 jquery、jqueryui，并且我还必须调整 css 来设置类别 div 的宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:52:31.313

你所拥有的东西又短又脏

```
$(function(){
    $('div#catserie').hide();

    $('#categorie').on('click', '#catmerk', function(){
        $('div#catserie').hide();
        $(this).next().show();
    });
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/nNZB5/)

# algorithm - 有没有办法从文件中存储 gzip 的字典？

> ID：15295036
> 
> 赞同：8
> 
> 时间：2013-03-08T13:26:58.467
> 
> 标签：algorithm, unix, dictionary, compression, classification

我一直在对基于压缩的文本分类进行一些研究，并且试图找出一种存储由编码器（在训练文件上）构建的字典以用于在测试文件上“静态”运行的方法？这完全可以使用 UNIX 的 gzip 实用程序吗？

例如，我一直在使用 sport.txt 和 atheism.txt 的 2 个“类”文件，因此我想对这两个文件进行压缩并存储它们使用的字典。接下来，我想获取一个测试文件（未标记，可能是无神论或运动），并通过使用此 test.txt 上的预构建字典，我可以分析它在该字典/模型下的压缩程度。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T16:10:03.243

与 gzip 和 zlib 一样，deflate 编码器不会“构建”字典。他们只是使用之前的 32K 字节作为可能匹配从当前位置开始的字节串的来源。最后 32K 字节被称为“字典”，但这个名称可能会产生误导。

您可以使用[zlib](http://zlib.net/)来试验预设字典。请参阅`deflateSetDictionary()`和`inflateSetDictionary()`功能。在这种情况下，zlib 压缩以 32K 字节的“字典”作为初始值，该“字典”有效地在第一个字节被压​​缩为匹配源之前，但字典本身没有被压缩。启动只能改进前 32K 字节的压缩。在那之后，预设字典太远了，无法提供匹配。

gzip 不支持预设字典。

# jquery - Jquery，在选择选项上隐藏/显示

> ID：15295037
> 
> 赞同：0
> 
> 时间：2013-03-08T13:27:00.817
> 
> 标签：jquery

我正在尝试使用选择选项来显示其中有复选框但它不起作用的 <*div>。

这是我下面的脚本

**jQuery**

```
 $(document).ready(function() {
       $(".feeschedule1").hide();
       $(".feeschedule2").hide();
       $("#select").change(function(){
           var feeschedule1 = $(".feeschdule1");
           var feeschedule2 = $(".feeschdule2");
           var select = $("#select").val();

        if (select == $("#nd1f")){

            feeschedule1.show();
        }
        }else{

            feeschedule1.hide();
        }
        if (select == $("#nd2f")){

            feeschedule2.show();
        }
        }else{
            feeschedule2.hide();

        })

    }); 
```

**HTML**

```
<form action="" method="">
    <select id="select">
        <option id="nd1f" value="nd1fulltime">ND1 FULL TIME</option>
        <option id="nd2f" value="nd2fulltime">ND2 FULL TIME</option>
    </select>
    <div class="feeschedule1">
        <tr>
            <td><label for="schoolfees">SCHOOL FEES ND1 FULL TIME</label></td>
            <td><input type="checkbox" value="15000" ></td>
        </tr>
    </div>
    <div class="feeschedule2">
        <tr >
            <td ><label for="schoolfees">SCHOOL FEES ND2 FULL TIME</label></td>
            <td><input type="checkbox" value="15000" ></td>
        </tr>
    </div>
</form> 
```

它很好地隐藏了 <*div> 但在进行选择时不会显示它们。有什么我做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:42:28.793

可能有一种更动态的方式可以做到这一点。
我看到您有很多重复的代码，例如：

> if (select == $("#nd2f")){

你不想使用重复的`if`语句。更好的方法可能是使用：

```
<select class="select" onchange="javascript:myfunction(this.value)"> 
```

然后你的动态javascript：

```
options = [ 'nd1fulltime', 'nd2fulltime' ];
schedules = [ '.feeschedule1', '.feeschedule2' ];

function myfunction(choice) {
    for (i in options) {
        if (choice == options[i]) {
            $(schedules[i]).show();
        }
        else {
            $(schedules[i]).hide();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:34:42.957

我在您的代码中注意到的第一件事：

```
 if (select == $("#nd1f")) 
```

您尝试将 val 与元素进行比较，它不会匹配。

比看 if/else ：

```
if (select == $("#nd1f")){

    feeschedule1.show();
} // This is wrong !
}else{

    feeschedule1.hide();
} 
```

**您的代码中有很多错误，请在这个[fiddle](http://jsfiddle.net/soyuka/NXNuM/)中看到它已更正。**

要捕获选定的选项值，您必须执行以下操作：

```
 var select = $(this).find('option:checked').val(); 
```

你写道：

```
var feeschedule1 = $("feeschdule1"); 
```

它应该是

```
var $feeschedule1 = $(".feeschedule1"); 
```

最后一件事是`change`函数括号没有正确关闭。编码时，请注意缩进，它会限制此类错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:37:23.813

尝试这个：

```
 if (select == "nd1fulltime"){

         feeschedule1.show();
        }else{
        feeschedule1.hide();
        }
        if (select == "nd2fulltime"){

        feeschedule2.show();
        }else{
        feeschedule2.hide();

        }); 
```

通过 if (select == $("#nd1f")) 您正在与元素进行比较。您需要比较元素的值。

不`$("#nd1f")`应该匹配它的值......

# iframe - iframe 内的 Kendo UI 下拉菜单 - 滚动条不可见

> ID：15295040
> 
> 赞同：1
> 
> 时间：2013-03-08T13:27:16.580
> 
> 标签：iframe, drop-down-menu, scrollbar, kendo-ui

我在网页中有一个 Kendo UI Dropdown，此页面在另一个页面中使用 iframe 显示。该列表包含大约 100 个项目。

我看不到下拉列表的滚动条。整个列表显示在 iframe 内。[您可以在此处](http://i.stack.imgur.com/GZKQW.png)查看快照。

使用的剑道 UI 版本：2012.3.1114

注意：此问题出现在 IE9 和 Firefox 14 中。Chrome 按预期显示下拉菜单。此外，当页面在新窗口中单独加载时，下拉菜单也可以正常工作。

# javascript - JSLint 在计算平方时抱怨 * a

> ID：15295044
> 
> 赞同：4
> 
> 时间：2013-03-08T13:27:21.703
> 
> 标签：javascript, jslint

当我编写这段 Javascript 代码时：

```
var a = 2;
var aSquared = a * a; 
```

JSLint 标记`a * a`为一个*奇怪的任务*。它只标记产品，而不是任务（我使用的是 Netbeans 7.3）。

我知道我可以使用`Math.pow(a, 2)`，但是这种计算发生在紧密的迭代数值计算中，并且[差异是相关的](http://jsperf.com/math-pow-vs-product)。

用这种方式计算平方真的很奇怪吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:09:12.557

就个人而言，我会忽略它——这只是一个警告，你知道代码很好，所以......嗯。

但如果你真的想避免警告，你可以尝试用一些括号括起来：

```
var aSquared = (a * a); 
```

或者你可以用这样的东西替换你的代码：

```
function squared(a) { return a *= a; } 
```

# vb.net - 如何在 XAML 中使用泛型绑定到类

> ID：15295046
> 
> 赞同：1
> 
> 时间：2013-03-08T13:27:24.947
> 
> 标签：vb.net, xaml, generics, binding

我创建了一个像这样的简单类...

```
 Public Class Localizer(Of T)

        Public Shared ReadOnly Property DisplayName(ByVal propertyName As String) As String
            Get
               ...
            End Get
        End Property

    End Class 
```

我正在尝试在 XAML 中绑定它，就像这样......

```
Header="{x:Static loc:Localizer(Of AircraftReference).DisplayName [IsMilitary]}" 
```

但这一定不是正确的语法。这甚至可能是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:45:28.667

这里有两个问题。

1.  XAML 对泛型的支持[不完整](http://msdn.microsoft.com/en-us/library/ee956431.aspx)；我认为您不能在 XAML 中指定类型参数。

    但是，对于这个问题有一个简单的解决方法：

    ```
    Public Class Localizer(Of T)
        Public Shared ReadOnly Property DisplayName As String
            Get
               ...
            End Get
        End Property
    End Class

    Public Class AircraftReferenceLocalizer
        Inherits Localizer(Of AircraftReference)
    End Class 
    ```

    现在您可以使用：

    ```
    Header="{x:Static loc:AircraftReferenceLocalizer.DisplayName}" 
    ```

2.  [`x:Static`](http://msdn.microsoft.com/en-us/library/ms742135.aspx)不支持参数化属性，因此您不能传递字符串“IsMilitary”。恐怕您将不得不在没有`x:Static`. 描述您想要解决的问题并在新问题中寻求解决方案可能是有意义的。

# jquery - getJSON 和 Internet Explorer 9 返回一个 .js 文件？

> ID：15295048
> 
> 赞同：0
> 
> 时间：2013-03-08T13:27:34.237
> 
> 标签：jquery, json, internet-explorer, getjson

所以我制作了一个脚本，将数据从 facebook 墙上取出并发布到网站上。这个脚本在 Firefox 和 chrome 以及我的手机上运行良好，所以我猜也是 safari。不过，像往常一样，Internet Explorer 已决定对此进行取笑。

因此，我使用 getJSON 调用来访问 facebook URL 并返回数据。然后，我将我需要的部分数据放入 html 代码中，然后将其发送回并显示在网站上。我也希望能够在 Internet Explorer 上使用它。希望有人可以看看并发现如何修复它（或改进我的代码：D）。我不经常使用 Javascript / JQuery 并且可以用它做一些基本的事情，但是当涉及到解决这样的问题时，我很快就会迷失方向。生病在下面发布脚本。谢谢

**更新**

所以我在脚本中添加了一个错误回调来检查问题是什么，它在 Internet Explorer 中给出了 No Transport 错误，但在任何其他浏览器中都没有。有人知道解决这个问题吗？

```
var myNewData, myOldData;

function fbstream() {
  var restart_counter, url, time, date, html, post_count;
  url = "https://graph.facebook.com/xyz/posts?limit=7&access_token=121936661313114|YX63lMRU9wc8RDP8MMSs9keT3fQ";
  $.getJSON(url, function (json) {
    html = "<div class='fbfeed'>";
    if (json.data[0] === undefined && restart_counter < 5) {
      fbstream();
      restart_counter += 1;
    } else if (json.data[0] === undefined && restart_counter === 5) {
      $('.facebookfeed').html("Problem loading Facebook content");
    } else {
      post_count = 0;
      if (myNewData !== undefined) {
        myOldData = myNewData;
      }
      myNewData = json.data[0].id;
      if (myOldData !== myNewData || myOldData === undefined) {
        $.each(json.data, function (i, fb) {
        if (fb.message !== undefined) {
          post_count += 1;
          date = fb.created_time.substring(0, 10).split("-", 3).reverse().join("-", 3);
          time = fb.created_time.substring(11, 19);
          html += "<div class='fbpost'><div class='dateandtime'>" + date + " at " + time + "</div><div class='fbmsg'>" + fb.message + "</div>";
          if (fb.picture !== null) {
            html += "<div class='fbimg'><img src='" + fb.picture + "' class='center' /></div>";
          }
          html += "</div>";
          if (post_count === 3) {
            return false;
          }
        }
      });
      html += "</div>";
      $('.facebookfeed').html(html);
    }
  }
});
restart_counter = 0;
}
setInterval(function () {
  fbstream();
}, 300000); 
```

我试图尽可能地格式化它以使其可读。零件可能略有偏差。

正如标题所提到的，当我访问 getJSON 查询的 url 时，Internet Explorer 会返回一个名为 posts.js 的文件。在 Firefox 和 chrome 中，该 url 只是在带有一堆 json 数据的新页面中打开。

如果需要，我可以发布 json 数据的示例

这是 post.js 中要求的一个项目。还有更多，但我只是拿了一个作为参考

```
{
"data": [
  {
     "id": "3688793151660_5429280924451",
     "from": {
        "category": "Energy/utility",
        "name": "xyz",
        "id": "3688793151660"
     },
     "message": "And after !",
     "picture": "http://photos-h.ak.fbcdn.net/hphotos-ak-ash3/123.jpg",
     "link": "http://www.facebook.com/photo.php?fbid=282413452&set=a.368887806484148.88464.368879353151660&type=1&relevant_count=1",
     "icon": "http://static.ak.fbcdn.net/rsrc.php/v2/yz/r/StEh33hPvjk.gif",
     "privacy": {
        "value": ""
     },
     "type": "photo",
     "status_type": "added_photos",
     "object_id": "542928413452",
     "application": {
        "name": "Facebook for iPhone",
        "namespace": "fbiphone",
        "id": "66268379"
     },
     "created_time": "2013-03-07T15:24:00+0000",
     "updated_time": "2013-03-07T15:24:00+0000",
     "likes": {
        "data": [
           {
              "name": "removed",
              "id": "1000392350"
           },
           {
              "name": "removed",
              "id": "721372"
           }
        ],
        "count": 2
     },
     "comments": {
        "count": 0
     }
  },
  "paging": {
  "previous": "https://graph.facebook.com/3688793151660/posts?limit=7&access_token=121936661313114|YX63lMRU9wc8RDP8MMSs9keT3fQ&since=1362669840&__previous=1",
  "next": "https://graph.facebook.com/3688793151660/posts?limit=7&access_token=121936661313114|YX63lMRU9wc8RDP8MMSs9keT3fQ&until=1358410924"
   }
} 
```

格式有点乱，一些 ids/names 已被编辑/删除

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T23:36:33.037

问题已解决。

添加了以下代码行，这是我在谷歌搜索 Internet Explorer 中的“无传输”错误后在此站点上找到的

```
jQuery.support.cors = true; 
```

# php - 求 SUM 时查询执行速度

> ID：15295051
> 
> 赞同：0
> 
> 时间：2013-03-08T13:27:42.603
> 
> 标签：php, mysql

在数据库中，我有帐户详细信息表，其中包含基于以下查询的大约 300000 条记录我必须在表中显示报告，帐户名称和每年选择的公司价值，近 40 行和 13 列

我有疑问，

```
$sql = ("SELECT sum(value) as val FROM balancesheet where formula='$formulaid' and year='$year' and nse_code='$companyCode'"); 
```

根据年份、公司和公式，这里公式字段，假设公式为1+2+3表示，查询将在循环内执行3次，并再次与父循环继续

o/p：会像

```
 2012      2011     2000.........
account name1   15.00     16.08    47.55
account name2   15.00     16.08    47.55
....... 
```

所以打印几乎不需要 4 到 5 分钟。请帮助我如何改进查询的执行以更快地打印

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:29:11.757

如果这些列总是一起搜索，则在它们上定义一个索引，

```
ALTER TABLE balancesheet ADD INDEX (formula, year, nse_code) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:32:45.613

使用[EXPLAIN](http://dev.mysql.com/doc/refman/5.0/en/explain.html)找出引擎盖下发生的事情（Yanks 引擎盖）。然后您就可以创建适当的索引了。

可以通过表定义或通过[create index 创建索引](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)。[研究优化](http://dev.mysql.com/doc/refman/5.0/en/optimize-table.html)也很有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:29:14.477

在 where 字段上添加索引以提高速度。

# spring - 在没有 teamcity 的测试环境中部署本地 WAR

> ID：15295057
> 
> 赞同：0
> 
> 时间：2013-03-08T13:28:12.200
> 
> 标签：spring, hibernate, maven, teamcity, war

我有一个使用 Maven 和 Spring 和 Hibernate 构建的 JAVA 应用程序。每当将任何代码更改提交到 SVN 时，我的项目都会使用 TeamCity 生成新的 WAR。我需要找到使用 teamcity 的替代方法。即，我们需要能够在没有 teamCity 帮助的情况下将本地 WAR 部署到测试环境中（以便测试人员可以完成他们的工作）。我曾尝试用本地 WAR 替换 TeamCity WAR，但这不起作用。欢迎大家提出意见 。

# c# - Xpath 选择查询与 C# 中的相对顶级节点

> ID：15295062
> 
> 赞同：0
> 
> 时间：2013-03-08T13:28:32.273
> 
> 标签：c#, xml, xpath

我正在使用 xpath 在 C# 中查询我的 xml 文件。

这是我的xml文件

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<bookstore>

<book>
  <title lang="eng">Harry Potter</title>
  <price>29.99</price>
</book>

<book>
  <title lang="eng">Learning XML</title>
  <price>39.95</price>
</book>

</bookstore> 
```

我的 C# 代码是

```
XPathNavigator nav;
XPathDocument docNav;
XPathNodeIterator NodeIter;
String strExpression;

docNav = new XPathDocument(@"C:\\DCU\\XQUE.xml");

nav = docNav.CreateNavigator();
// This expression uses standard XPath syntax.

strExpression = "/bookstore[./book/price>35.00]";

NodeIter = nav.Select(strExpression);

while (NodeIter.MoveNext())
{
    Console.WriteLine("{0}", NodeIter.Current.OuterXml);
} 
```

但我想得到这样的输出，

```
<bookstore>
<book>
  <title lang="eng">Learning XML</title>
  <price>39.95</price>
</book>
</bookstore> 
```

我认为我的 xpath 查询行缺少任何东西，请带我一条出路..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:32:32.430

该表达式选择`<bookstore>`元素，因此输出将是整体`<bookstore>`（及其所有子`book`元素）。如果您想要特定的书籍，您需要使用不同的 XPath

```
strExpression = "/bookstore/book[price>35.00]"; 
```

这将只打印`<book>`匹配的元素，但没有周围的`<bookstore>`标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:13:20.717

您似乎误解了 XPath 选择的目的以及它可以做什么。XPath 不会为您创建一个全新的 XML 文档。获取 XML 输入并生成不同 XML 输出的典型选择是使用 XSLT。这将在你的情况下做到这一点：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="book[price &lt;= 35]" />
</xsl:stylesheet> 
```

如果您真的只想使用 C# 来执行此操作，您始终可以执行以下操作：

```
XPathNavigator nav;
XPathDocument docNav;
XPathNodeIterator NodeIter;
String strExpression;

docNav = new XPathDocument(@"C:\\DCU\\XQUE.xml");

nav = docNav.CreateNavigator();
// This expression uses standard XPath syntax.

strExpression = "/bookstore/book[price > 35.00]";

NodeIter = nav.Select(strExpression);

Console.WriteLine("<bookstore>");
while (NodeIter.MoveNext())
{
    Console.WriteLine("{0}", NodeIter.Current.OuterXml);
}
Console.WriteLine("</bookstore>"); 
```

# javascript - Javascript数字表单验证，仅数字字符问题

> ID：15295065
> 
> 赞同：-1
> 
> 时间：2013-03-08T13:28:34.913
> 
> 标签：javascript

我开始了一个新的 JavaScript 任务，它告诉我用一个字段和一个按钮来验证一个表单。每当我输入一个随机数时，都会出现一个警告框，并给出答案“数字大于/小于 10”。到目前为止一切顺利——我完成了那部分任务。问题出现了，当我输入字母时，警告框仍然出现。这怎么可能解决？

代码如下所示：

```
function validate(){
    x=document.myForm
    txt=x.myInput.value
    if (txt>=10)

    {
        alert("Number is bigger than 10")
        return true

    }

    else

    {
        alert("Number is smaller than 10")
        return false
    } 
```

}

```
<form name="myForm" onsubmit="return validate()">
Enter a number: 
<input type="text" name="myInput" size="20">
<input type="submit" value="Submit"> 
```

谢谢您的回答！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-08T13:33:06.843

您可以使用 parseInt。

```
txt = parseInt(x.myInput.value,10); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T13:38:07.237

您可以在代码中再添加一条 else if 语句，如下所示：

x=document.myForm.myInput.value;

```
else if(isNaN(x))

    {
        alert("Number cant be alphabet")
        return false
    } 
```

**以下是完整脚本**

```
<script>
            function validate(){
    x=document.myForm.myInput.value;

    if (x >=10)

    {
        alert("Number is bigger than 10")
        return true

    }

    else if(isNaN(x))

    {
        alert("Number cant be alphabet")
        return false
    }
    else

    {
        alert("Number is smaller than 10")
        return false
    }

}
    </script> 
```

# mysql - Mysql SQL 用于“替换除此之外的所有内容”其中 xxx

> ID：15295068
> 
> 赞同：4
> 
> 时间：2013-03-08T13:28:40.687
> 
> 标签：mysql, sql, regex, date, views

我在一个项目上有一个糟糕的数据库，他们使用了一个文本字段作为日期。

所以，我需要构建一个在一列中只有年份的视图。问题是我有任何标准格式的日期，例如：

*   01-01-2012
*   01.01.2012
*   01 01 2012
*   2012 年 1 月 1 日
*   01/2012
*   1/2012
*   2012
*   01.2012

有什么方法可以构建一个 SQL (MySQL) 来仅获取这 4 年的数字来构建一个视图？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T13:36:14.947

这真的取决于整个数据结构，您可以使用 REGEX 或[String 函数](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_right)。

例如，对于您的示例数据，右侧的最后 4 位数字是年份，因此使用

```
SELECT RIGHT(fieldname, 4) FROM table 
```

会工作。如果该模式不起作用，那么您必须使用 concat 并开始拆分它们或编写 REGEX 语句。

如果 RIGHT 可以工作，那么您可以执行 INSERT SELECT

```
INSERT INTO table (yearcolumn)
SELECT RIGHT(fieldname, 4) FROM table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:33:41.570

您可以使用[`REGEXP`](http://dev.mysql.com/doc/refman/5.6/en/regexp.html#operator_regexp)匹配来获取给定年份的行。不过，没有办法从正则表达式中获取捕获。但是，如果年份部分总是最后 4 位数字，请使用[`RIGHT()`](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_right). 否则，您将需要重新格式化客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T15:19:16.223

这也可能有所帮助。这是整个当年的 Oracle 查询。它可以很容易地转换为任何 SQL。它使用递归查询来构建年表。用您的 SQL 格式和系统日期版本替换 SYSDATE 和 Oracle 格式：

```
WITH data(r, start_date) AS 
(
 SELECT 1 r, TRUNC(SYSDATE, 'YEAR') start_date FROM dual -- start_date: 1/1/2013
  UNION ALL
 SELECT r+1, TRUNC(SYSDATE, 'YEAR')+r-1 FROM data WHERE r < 365 -- any number: end_date - start_date or get the number of days in your year your way...
)
SELECT start_date
     , TO_CHAR(start_date, 'YYYY')              curr_year  
     , TRUNC(start_date, 'IW')                  wk_starts   
     , TRUNC(start_date, 'IW') + 7 - 1/86400    wk_ends
     , TO_NUMBER (TO_CHAR (start_date, 'IW'))   ISO_wk# 
 FROM data
/

START_DATE    CURR_YEAR    WK_STARTS    WK_ENDS                 ISO_WK#
-----------------------------------------------------------------------
1/1/2013      2013        12/31/2012    1/6/2013 11:59:59 PM      1
1/1/2013      2013        12/31/2012    1/6/2013 11:59:59 PM      1
...
12/28/2013    2013        12/23/2013    12/29/2013 11:59:59 PM    52
12/29/2013    2013        12/23/2013    12/29/2013 11:59:59 PM    52
12/30/2013    2013        12/30/2013    1/5/2014 11:59:59 PM      1 
```

# google-app-engine - 使用 JDO 增强器在 Google Appengine 上对 Pojos 的运行时增强

> ID：15295071
> 
> 赞同：0
> 
> 时间：2013-03-08T13:28:47.397
> 
> 标签：google-app-engine, jdo, datanucleus

我正在使用 JDO，并希望在运行时在 Google Appengine 上动态增强 pojos。这篇[博](http://brainpicks.wordpress.com/2010/05/04/runtime-enhancement-with-jdo-and-datanucleus/)文最后提到了一些限制，这让我想知道它是否适用于 GAE？任何指针都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:48:07.397

但是您的意思是“运行时”还是通过 API？因为两者都在[DataNucleus 文档](http://www.datanucleus.org/products/accessplatform_3_1/enhancer.html)中得到了充分的介绍。我不知道 GAE 是否允许您指定 javaagent 之类的东西

# ruby - mina gem 通过网关部署

> ID：15295075
> 
> 赞同：3
> 
> 时间：2013-03-08T13:28:51.683
> 
> 标签：ruby, deployment, apache-mina

我正在使用 mina gem 进行部署。我必须通过网关才能连接到我的服务器。我知道 capistrano 可以做到这一点。

有人知道mina中的这个配置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-03T20:52:54.467

我不相信米娜支持这一点。当然，[源代码](https://github.com/nadarei/mina/blob/master/lib/mina/ssh_helpers.rb)并没有表明这样的选择。我正在尝试使用该`set :ssh_options, ''`语法，但 mina 附加`-t`到命令链的末尾，然后被发送到错误的服务器。考虑更改 mina 代码，但将网关连接转移到本地 ssh 客户端本身可能更简单，并且可能使用该`set :forward_agent, true`命令。为此，您需要在您的`~/.ssh/config`:

```
Host finaldestination.example.com
    ProxyCommand ssh user@gateway.example.com nc %h 22
    ForwardAgent yes 
```

使用我的本地主机作为网关进行测试似乎表明这是可行的。

希望这会有所帮助-尽管我意识到这并不是您要问的。:)

# facebook - 从全局页面获取 Facebook 页面的流

> ID：15295076
> 
> 赞同：2
> 
> 时间：2013-03-08T13:28:52.893
> 
> 标签：facebook, facebook-graph-api, facebook-fql, fql.multiquery

我对 Facebook api 有一点问题。

我正在做一个非常简单的 FQL 请求来获取这样的页面流：

```
SELECT post_id, type, likes, comments FROM stream WHERE source_id = X 
```

它工作得很好。但是，当我在可口可乐或星巴克等“大页面”上执行相同请求时，所有流帖子的“类型”、“点赞数”和“评论数”都是空的。

我真的不明白为什么。我正在考虑一个带有国家代码错误的“全球页面”，但我找不到这方面的信息。

任何的想法 ？

**编辑**：只需尝试另一个请求来获取页面全局子 ID，但看起来可口可乐和星巴克不使用全局页面系统。

```
starbucks?fields=global_brand_children.username,global_brand_parent_page 
```

那么，知道为什么我的第一个请求在获取流内容时返回空信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T11:21:26.017

“大页面”没有错。只是“巨大的页面”有很多来自粉丝的帖子和分享。实际上，该`stream`表提供了页面的所有活动。

流活动的`type`时间将是`null`内容来自用户的时间。当它来自页面所有者时，它将是一个 int。请参阅[https://developers.facebook.com/docs/reference/fql/stream/](https://developers.facebook.com/docs/reference/fql/stream/)`type`上的字段说明。

您可能会得到 a `null`as a的原因`like count`是您遇到了一个将`can_like`or`can_comment`字段设置为的帖子`false`。这些帖子不能被点赞或评论，因为它们出现在页面**之外**（即在用户时间线或特定网站上），并且它们的所有者不允许公开点赞或评论（即使公开可见）。如果您要在页面流中找到此类活动，是因为他们在消息或照片中**标记了该页面**。

* * *

**编辑**以回答您的第一条评论。

**问题：为什么以下查询不返回页面所有者的帖子：**

```
SELECT actor_id, message 
  FROM stream 
 WHERE source_id = 40796308305 
      AND actor_id = 40796308305 
```

让我们看看这个查询可以返回多少结果：

```
SELECT actor_id, message 
  FROM stream 
 WHERE source_id = 40796308305 
```

好的，[我们得到 17 个结果](https://developers.facebook.com/tools/explorer?fql=SELECT%20actor_id%20FROM%20stream%20WHERE%20source_id%20=%2040796308305)。为什么是17？我不知道。

When you add `AND actor_id = 40796308305` to your request, it will checks among these 17 results which ones have `40796308305` as an `actor_id`.

Answer? [None](https://developers.facebook.com/tools/explorer?fql=SELECT%20actor_id%20FROM%20stream%20WHERE%20source_id%20=%2040796308305%20AND%20actor_id%20=%2040796308305)!

Because it only checks the 17 first results, you'll have to indicate a `LIMIT`:

```
SELECT actor_id, message 
  FROM stream 
 WHERE source_id = 40796308305 
      AND actor_id = 40796308305 
 LIMIT 100 
```

And there you get [what you want](https://developers.facebook.com/tools/explorer?fql=SELECT%20actor_id,%20message%20FROM%20stream%20WHERE%20source_id%20=%2040796308305%20AND%20actor_id%20=%2040796308305%20LIMIT%20100).

This is one of the Facebook API's subtlety. Documented here: [https://developers.facebook.com/blog/post/478/](https://developers.facebook.com/blog/post/478/)

# jquery - jQuery，CSS更改HOVER段落内的标签

> ID：15295077
> 
> 赞同：0
> 
> 时间：2013-03-08T13:28:58.103
> 
> 标签：jquery, css, hover

使用 jQuery，我将鼠标悬停在一个段落上，让段落更改 BG 颜色并添加一个框阴影，很简单。然而，我想补充的是，当段落的 BG 颜色发生变化时（悬停时），`<strong>`只有该段落中的任何标签都会更改其 CSS 以增加重点。换句话说，默认的 CSS`<strong>`是关闭的（没有粗体）：

CSS：

```
p.bullets strong
{
    font-weight: 100;
} 
```

当同一段落悬停时，我只希望该段落的`strong`CSS 更改为：

```
p.bullets strong
{
    font-weight: 800;
} 
```

jQ改变BG颜色，添加阴影：

```
 $("p.bullets").hover(
    function() {
      $(this).css('background-color', 'rgba(255,255,255,1)')
  $(this).addClass('round_right boxShadow')
    }, function() {
      $(this).css('background-color', '')
       $(this).removeClass('boxShadow')
    }); 
```

HTML：

```
<p>We show parents and professionals <strong>dealing head-on</strong> with the issues that impact etc.</p> 
```

* * *

我遇到的问题是让 CSS 更改只影响一个段落。感谢所有帮助，感谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:36:17.023

我不明白你为什么要为此使用 jQuery。

在`P`悬停时更改背景

```
p.bullets:hover {
   background: #000;
   box-shadow:0 3px 5px rgba(0,0,0,0.1);
} 
```

要更改强标签，然后：

```
p.bullets:hover strong {
  font-weight: bold;
  color: #fff;
} 
```

只是一个例子。`p`为了支持旧浏览器，您可以包装`a`并更改 css 反映这一点。

```
<a href="javascript:void(0)">
  <p class="bullets">Some text <strong> more text </strong> </p>
</a>

a:hover p.bullets {
   background: #000;
   box-shadow:0 3px 5px rgba(0,0,0,0.1);
}

a:hover p.bullets strong {
  font-weight: bold;
  color: #fff;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:32:16.527

您的解决方案：而不是`$(this).css('background-color', '')`使用`$(this).find('strong').css('background-color', '')`.

一个提示：

使用类而不是直接使用带有 .addClass() 和 .removeClass() 的“css”的样式也更好。

```
p.bullets strong.hover
{
    background-color: rgba(255,255,255,1);
} 
```

然后使用它`.hover`：

```
$(this).find('strong').addClass('hover'); 
```

与 removeClass() 相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:37:01.960

您可以添加一个新的 css 规则来捕获您已经设置到段落的样式中的强标签（假设您只在此处使用它），否则也添加另一个类。前任。：

```
p.bullets.boxShadow strong {
   /* your desired tag appearance */
   font-weight: 800;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T13:42:07.777

如果您只想选择当前段落中的元素，请在选择器中添加上下文参数。

将此添加到悬停功能：

```
$("strong",this).css('font-weight','800') 
```

这对于悬停功能：

```
$("strong",this).css('font-weight','') 
```

# c# - 动态更改 ListView 中图像的路径

> ID：15295081
> 
> 赞同：3
> 
> 时间：2013-03-08T13:29:16.577
> 
> 标签：c#, wpf, listview

大家好，我是 WPF 新手，我使用列表视图呈现为网格视图。我有一个图像列，我通过绑定路径为其设置了一个值。现在的问题是我需要根据条件更改图像的路径。如果条件为真，我需要图像的路径不同。如果为假，我将其更改为另一条路径。这可以逐行完成吗？下面是我的列表视图。请帮忙

```
<ListView Name="LstGrd" Margin="0,105,0,138">
    <ListView.View>
        <GridView  >
            <GridViewColumn Header=" Name" Width="120" DisplayMemberBinding="{Binding Path=Name}" />
            <GridViewColumn Header=" Address" Width="250" DisplayMemberBinding="{Binding Path=Address}" />
            <GridViewColumn Header=" City" Width="50" DisplayMemberBinding="{Binding Path=City}" />
            <GridViewColumn Header=" State" Width="75" DisplayMemberBinding="{Binding Path=State}" />
            <GridViewColumn Header=" PostalCode" Width="75" DisplayMemberBinding="{Binding Path=PostalCode}" />
            <GridViewColumn>
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <Image Width="16" Name="Test" Height="16" Source="{Binding Path=ImagePath,Mode=TwoWay}"/>
                            <TextBlock Text="Status"/>
                        </StackPanel>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:03:59.900

如果我正确理解您的问题，如果某些情况发生变化，您想更改图像。我创建了一个您绑定到列表视图的类的虚拟版本，并添加了一个名为“IsSelected”的属性来显示这一点。

```
<ListView Name="LstGrd" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    <ListView.View>
        <GridView  >
            <GridViewColumn Header="">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <CheckBox IsChecked="{Binding IsSelected}" />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
            <GridViewColumn Header=" Name" Width="120" DisplayMemberBinding="{Binding Path=Name}" />
            <GridViewColumn Header=" Address" Width="250" DisplayMemberBinding="{Binding Path=Address}" />
            <GridViewColumn Header=" City" Width="50" DisplayMemberBinding="{Binding Path=City}" />
            <GridViewColumn Header=" State" Width="75" DisplayMemberBinding="{Binding Path=State}" />
            <GridViewColumn Header=" PostalCode" Width="75" DisplayMemberBinding="{Binding Path=PostalCode}" />
            <GridViewColumn>
                <GridViewColumn.CellTemplate>
                        <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <Image Width="16" Name="Test" Height="16" Source="{Binding Path=ImagePath,Mode=TwoWay}"/>
                            <TextBlock Text="Status"/>
                        </StackPanel>
                        <DataTemplate.Triggers>
                            <DataTrigger Binding="{Binding IsChecked}" Value="True">
                                <Setter Property="Source" Value="{Binding Path=ImagePath2}" TargetName="Test" />
                            </DataTrigger>
                        </DataTemplate.Triggers>
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
            </GridViewColumn>
        </GridView>
    </ListView.View>
</ListView> 
```

这里要注意的是我添加了一个列（这是可选的 - 我这样做是为了更容易演示）。然后，在您的 Image 列中，您需要添加一个`DataTrigger`来`DataTemplate`处理该属性更改。

这里只是数据模板：

```
<DataTemplate>
    <StackPanel Orientation="Horizontal">
        <Image Width="16" Name="Test" Height="16" Source="{Binding Path=ImagePath,Mode=TwoWay}"/>
         <TextBlock Text="Status"/>
    </StackPanel>
    <DataTemplate.Triggers>
        <DataTrigger Binding="{Binding IsChecked}" Value="True">
            <Setter Property="Source" 
                    Value="{Binding Path=ImagePath2}" 
                    TargetName="Test" />
         </DataTrigger>
    </DataTemplate.Triggers>
</DataTemplate> 
```

这比 Converter 具有优势，因为它是仅 XAML 的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:00:23.323

您应该使用转换器：

```
<Image Source="{Binding Path = ImagePath, Mode = TwoWay, Converter={StaticResource imageToValidatedImageConv}}" /> 
```

其中 imageToValidatedImageConv 是定义为的资源：`<local:ImageToValidatedImageConverter x:Key="imageToValidatedImageConv" />`

和你的转换器一个类，如：

```
public class ImageToValidatedImageConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            if()
            {
                //return image1 
            }
            else
            {
                //return image2
            }

        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            throw new Exception("Cant convert back");
        }
    } 
```

# android - 从 R.id 而不是 R.layout 膨胀线性布局

> ID：15295084
> 
> 赞同：0
> 
> 时间：2013-03-08T13:29:34.307
> 
> 标签：android, android-linearlayout, viewgroup, inflate

我要疯了。我有一个片段的布局。在里面我有一个带有 id 的 LinearLayout，例如 myLinearLayout。基本上，我想做以下事情：

```
LinearLayout newLayout = new LinearLayout(this);
LinearLayout layoutCopy = inflatefrom(R.id.myLinearLayout);
newLayout.addView(layoutCopy); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-11T21:29:59.010

试试这个：

```
View.inflate(Context, R.id, ViewGroup) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:34:25.480

您不能`Layout`从其膨胀 a `R.id`，但您可以`Layout`通过膨胀`R.layout`并使用返回的视图来检索`R.id`您需要的。

例如

```
LayoutInflater inflater = LayoutInflater.from(this);
View view = inflater.inflate(R.layout.mylayout, null);
LinearLayout layoutCopy = (LinearLayout)view.findViewById(R.id.myLinearLayout); 
```

检查错字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T07:07:35.307

实际上是黑带，这就是我解决它的方法，但是在将复制的布局添加到新布局时仍然出现错误。原因是我要复制的布局仍然有父级。这是一个完整的解决方案（layoutRoot 是一个位于 res/layout 中的 xml 布局，而 myLinearLayout 是文件 layoutRoot 内的一个 LinearLayout。layoutToPlaceCopiedLayout 是我想要放置复制布局的布局内的一个 LinearLayout）。

```
LinearLayout newLayout = (LinearLayout)findViewById(R.id.layoutToPlaceCopiedLayout)
LayoutInflater inflater = LayoutInflater.from(this);
LinearLayout layoutRootCopy = (LinearLayout)inflatefrom(R.layout.layoutRoot);
LinearLayout layoutCopy = (LinearLayout)layoutRootCopy.findViewById(R.id.myLinearLayout);
ViewGroup parent = (ViewGroup)layoutCopy.getParent();
int index = parent.indexOfChild(layoutCopy);
parent.removeView(layoutCopy);
newLayout.addView(layoutCopy, index); 
```

# ios - 如何处理Customcell contentview宽度动态变化取决于iOS中旋转设备屏幕时的数据内容

> ID：15295085
> 
> 赞同：0
> 
> 时间：2013-03-08T13:29:38.947
> 
> 标签：ios, objective-c, uitableview

我已经设置了 customcell `autoresizingMask`属性的内容视图，`UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleLeftMargin |UIViewAutoresizingFlexibleRightMargin;`它工作正常，但是当我旋转设备内容视图的屏幕时，宽度改变了，但是当我滚动表格时，contenview 的宽度发生了变化（它在委托方法 tableView 中计算大小：）`tableView cellForRowAtIndexPath: indexPath`。上述一个问题和第二个问题是在滚动之后从横向旋转回纵向形式，内容视图的宽度变小。

```
 preference* pref = [[preference alloc] init];
    [pref initialize];
    userInfo *mahesh=[pref getUserInfo];

    NSLog(@"index of cell******  %d",indexPath.section);

        static NSString *CellIdentifier = @"CustomCell2";
      imTextVO *temp=[masterArray objectAtIndex:(indexPath.section)];  
        CustomCell2  *cell1 =(CustomCell2 *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
       NSString *cellValue = [commonArray objectAtIndex:(indexPath.section)]; 

        if (cell1==nil)
        {
            cell1 = [[CustomCell2 alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

//            UIImageView *image=[[UIImageView alloc] init];
//            
//            [cell1.contentView addSubview:image];

    //    if (temp.type==2)
    //    {
            UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    //        button.frame=CGRectMake(110, 45, 100,40);
            [button addTarget:self action:@selector(viewAttachmentOfEvent:) forControlEvents:UIControlEventTouchUpInside];
            [button setTitle:@"View Attachment" forState:UIControlStateNormal];

            button.titleLabel.font=[UIFont systemFontOfSize:12.0f];
            button.titleLabel.textColor=[UIColor blackColor];
            button.autoresizingMask = UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleLeftMargin;
    //        [button setTag:(indexPath.section)];
             button.tag=22;
            [cell1.contentView addSubview:button];

    }

cell1.backgroundColor=[UIColor clearColor];

CGSize constraint1 = CGSizeMake(160+100-140, 20000.0f);
CGSize size1 = [[ArrayForActor objectAtIndex:indexPath.section] sizeWithFont:[UIFont systemFontOfSize:16.0f] constrainedToSize:constraint1 lineBreakMode:UILineBreakModeWordWrap];

CGSize constraint = CGSizeMake(160+100, 20000.0f);
CGSize size = [cellValue sizeWithFont:[UIFont systemFontOfSize:17.0f] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];

if (temp.type==2) {
    if ([temp.mobileNo isEqualToString:mahesh.mobileno])
    {

        if (size.width>(size1.width+180)) {
            cell1.ViewContainer.frame=CGRectMake(0,0,size.width+4 ,size1.height+50);
        }else{
            cell1.ViewContainer.frame=CGRectMake(0,0,size1.width+4+180 ,size1.height+50);
        }

        cell1.ViewContainer.backgroundColor=[UIColor yellowColor];

        cell1.dateText.frame=CGRectMake(cell1.ViewContainer.frame.size.width-140,cell1.ViewContainer.frame.origin.y ,135 ,20);

    }else{

        if (size.width>(size1.width+180)) {
            cell1.ViewContainer.frame=CGRectMake(self.view.frame.size.width-size.width+4,0,size.width+4 ,size1.height+50);
        }else{
            cell1.ViewContainer.frame=CGRectMake(self.view.frame.size.width-size1.width-180+4,0,size1.width+4+180 ,size1.height+50);
        }

        cell1.dateText.frame=CGRectMake(self.chatTable.frame.size.width-140,cell1.ViewContainer.frame.origin.y ,135 ,20);
         cell1.ViewContainer.backgroundColor=[UIColor greenColor];

    }

}else{
    if ([temp.mobileNo isEqualToString:mahesh.mobileno])
    {

        if (size.width>(size1.width+180)) {
            cell1.ViewContainer.frame=CGRectMake(0,0,size.width+4 ,size.height+4+size1.height+4);
        }else{
            cell1.ViewContainer.frame=CGRectMake(0,0,size1.width+4+180 ,size.height+4+size1.height+4);
        }
        cell1.ViewContainer.backgroundColor=[UIColor yellowColor];
        cell1.dateText.frame=CGRectMake(cell1.ViewContainer.frame.size.width-140,cell1.ViewContainer.frame.origin.y ,135 ,20);

    }else{

        if (size.width>(size1.width+180)) {
            cell1.ViewContainer.frame=CGRectMake(self.view.frame.size.width-size.width-4,0,size.width+4 ,size.height+4+size1.height+4);
        }else{
            cell1.ViewContainer.frame=CGRectMake(self.view.frame.size.width-size1.width-180-4,0,size1.width+4+180 ,size.height+4+size1.height+4);
        }

        cell1.dateText.frame=CGRectMake(self.chatTable.frame.size.width-140,cell1.ViewContainer.frame.origin.y ,135 ,20);

        cell1.ViewContainer.backgroundColor=[UIColor greenColor];

    }
}

cell1.actorLabel.frame=CGRectMake(cell1.ViewContainer.frame.origin.x+2,cell1.ViewContainer.frame.origin.y,size1.width+4,size1.height+4);
cell1.actorLabel.text=[ArrayForActor objectAtIndex:indexPath.section];

cell1.chatText.frame=CGRectMake(cell1.ViewContainer.frame.origin.x,cell1.actorLabel.frame.size.height-12, cell1.ViewContainer.frame.size.width,size.height+4+4);

UIButton *thisInviteButton = (UIButton*)[cell1.contentView viewWithTag:22];
thisInviteButton.hidden=YES;
if (temp.type==2) {
    thisInviteButton.hidden=NO;
    thisInviteButton.frame=CGRectMake((cell1.ViewContainer.frame.size.width/2)-50,size1.height, 100,40);
}else{

}

cell1.dateText.textAlignment=UITextAlignmentRight;
cell1.chatText.textAlignment = UITextAlignmentLeft;

    cell1.chatText.text= cellValue;

    cell1.selectionStyle=NO;
    NSTimeInterval interval=[temp.createdDate longLongValue];
    NSDate *currentTime=[NSDate dateWithTimeIntervalSince1970:interval/1000];

    NSLocale *gbLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_GB"];

    NSNumber *myDateInString=[NSNumber numberWithLongLong:[[NSDate date] timeIntervalSince1970]*1000];
    NSTimeInterval inte=[myDateInString longLongValue];
    NSDate *todayTime=[NSDate dateWithTimeIntervalSince1970:inte/1000];
NSString * todayString = [[todayTime description] substringToIndex:10];
    NSString *messageDate=[[currentTime description] substringToIndex:10];
    if ([todayString isEqualToString:messageDate]) {
        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
        NSString *formatString = [NSDateFormatter dateFormatFromTemplate:@"hh.mm" options:0
                                                                  locale:gbLocale];

        [dateFormatter setDateFormat:formatString];
        [dateFormatter setLocale:gbLocale];

       cell1.dateText.text=[NSString stringWithFormat:@"%@",[dateFormatter stringFromDate:currentTime]]; 

    }else {
        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
        NSString *formatString = [NSDateFormatter dateFormatFromTemplate:@"dMMMyy,hh.mm" options:0
                                                                  locale:gbLocale];

        [dateFormatter setDateFormat:formatString];
        [dateFormatter setLocale:gbLocale];
        cell1.dateText.text=[NSString stringWithFormat:@"%@",[dateFormatter stringFromDate:currentTime]];
    }

    return cell1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:40:03.970

我不会根据你的代码直接回答，我只是给你一些建议：

1.  `-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`尽可能保持清洁。如果您有繁重的计算要做，请在实际操作之前进行`[table reloadData]`。否则你会给你的用户一个糟糕的体验，因为他每次滚动`UITableView`，都会计算一些很重的东西。

2.  如果获取单元格最终大小的计算量很大（复杂`UITableViewCell`的有多个子项），请在重新加载表格之前执行这些计算。这里的重点是给用户一个良好的体验。

3.  保持你的代码注释，你会感谢自己，如果你几个月后拿起这个项目。

4.  通常，您可以通过 XIB 上的一些自动调整大小的魔法来实现您想要的大小。尽管如此，您仍然可以`self.interfaceOrientation`基于`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`.

5.  不要`UITableViewCell's`直接访问属性。而是创建一个名为 (for example..) 的方法`- (void)updateWithDictionary:(NSDictionary *)cellInformation`。通过这种方式，您可以解耦代码，创建更独立、更简洁的组件。在这种情况`cellInformation`下，您可以传递您的单元所需的所有数据。

# android - 访问节点开始内的数据

> ID：15295088
> 
> 赞同：0
> 
> 时间：2013-03-08T13:29:46.623
> 
> 标签：android, android-activity, nodes

我知道从下面的 xml 访问节点内的数据

```
<status_code>200</status_code> i.e i can get 200 
```

但是如何访问如下数据

```
<res **id="1b5499c4-87e9-11e2-a96d-5f61d0c04ee2_6554_1362744603"** name=""> </res> 
```

即我需要访问在`<res`???之后出现的 id 这怎么可能

# android - 如何修复 HARDWARE_TEST 权限错误？

> ID：15295089
> 
> 赞同：0
> 
> 时间：2013-03-08T13:29:49.250
> 
> 标签：android, android-permissions

我正在开发一个使用一些硬件部件（如相机或 Wi-Fi）的 android 应用程序，并且我在清单中使用 HARDWARE_TEST 权限：

```
<uses-permission android:name="android.permission.HARDWARE_TEST"> 
```

我从来没有遇到过任何问题，但是现在突然当我 eclipse 和 manifiest 文件时，这一行中显示了一个新错误：

“权限仅授予系统应用程序”

我必须修复它的唯一方法是删除这一行。

为什么会出现这个错误？？我该如何解决？谢谢

**编辑：**

我找到了解决方案并回答了我自己的问题：

我的问题出在 android:targetSdkVersion 中，manifiest 的值为 15，并且 proyect 构建目标已检查 API 级别 16（Android 4.1.2）

```
<uses-sdk
    android:minSdkVersion="2"
    android:targetSdkVersion="15" /> 
```

所以我已将 android:targetSdkVersion 值更改为 16，并且 Proyect 属性 > Android > “Proyect Buid Target”也检查了 16。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:31:33.527

Android Permissions有几种[权限保护级别：Normal、Dangerous、System 和 signatureOrSystem。](http://developer.android.com/guide/topics/manifest/permission-element.html)

signatureOrSystem 权限只能授予系统应用程序。对于签名级别的权限：

> 仅当请求应用程序使用与声明该权限的应用程序相同的证书签名时，系统才会授予该权限。如果证书匹配，系统会自动授予权限，无需通知用户或请求用户明确批准。

这是权限定义语法。

下面是 HARDWARE_TEST 权限的定义：

```
<!-- Allows access to hardware peripherals.  Intended only for hardware testing -->
<permission android:name="android.permission.HARDWARE_TEST"
    android:permissionGroup="android.permission-group.HARDWARE_CONTROLS"
    android:protectionLevel="signature"
    android:label="@string/permlab_hardware_test"
    android:description="@string/permdesc_hardware_test" /> 
```

它是Android 4.2中的签名权限，因此只能授予具有相同签名（由供应商签名）的应用程序。因此，您的应用程序无法请求该权限。

如果你想直接操作硬件，你可能需要一个有根设备。

# sql - Access XP 报告中的简单平均计算

> ID：15295095
> 
> 赞同：0
> 
> 时间：2013-03-08T13:30:34.557
> 
> 标签：sql, ms-access, report, average

我有一个用于评估呼叫的数据库，该数据库有些过时并且最初是在 Access XP 上创建的。评估后，这些电话将获得 5 分，该分数与其他数据（如日期、员工姓名等）一起输入到表格中。我设置了报告，因此当您输入员工姓名，然后输入日期期间的开始和日期期间的结束时，报告将生成并显示在这两个日期之间创建的条目。我试图在报告中包含一个部分，该部分显示所选期间员工的平均通话分数。我知道这可能很简单，但我很挣扎！干杯，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:48:32.900

如果您想对报表进行分组计算，您可以将它们放在组页眉/页脚或报表页眉/页脚（用于整个报表的计算）。

`=AVG([CallScore])`在这种情况下，在报表页脚中放置一个带有类似控件源的文本框应该可以工作。

此页面应解释有关在报告中使用聚合函数的更多信息：http: [//office.microsoft.com/en-gb/access-help/summing-in-reports-HA001122444.aspx](http://office.microsoft.com/en-gb/access-help/summing-in-reports-HA001122444.aspx)

# jquery - 为什么当我将图像放在 div 上时页面被重定向

> ID：15295101
> 
> 赞同：3
> 
> 时间：2013-03-08T13:30:46.563
> 
> 标签：jquery, html, drag-and-drop, ajax-upload

我正在使用`jquery 1.9`. 我在使用拖放实现上传图像时遇到问题，但是当我将图像拖放到 div 中时，它会重定向并在浏览器中打开图像我在[jsfiddle](http://jsfiddle.net/meUTg/2/)中实现了代码，请检查并告诉我为什么它被重定向

这是我的以下代码

```
$(document).on('ready',function(){
    jQuery.event.props.push('dataTransfer');
    $('.dropuploader').bind('drop', function(e){
        $(this).css({'box-shadow' : 'none', 'border' : '4px dashed rgba(0,0,0,0.2)'});
        alert("hello there");
        return false;
    });
    $('.dropuploader').bind('dragenter', function(e){
        $(this).css({'box-shadow' : 'inset 0px 0px 20px rgba(0, 0, 0, 0.1)', 'border' : '4px dashed #bb2b2b'});
        return false;
    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T05:24:45.307

您错过了`ondragover="return false"`使用以下 div html

```
<div class="dropuploader" ondragover="return false">Upload here</div>> 
```

代替

```
<div class="dropuploader">Upload here</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:01:17.433

您还需要添加 dragover 事件以使其工作。

例如：

```
$('.dropuploader').on('dragover', function (e) {
    e.stopPropagation();
    e.preventDefault();
}); 
```

看到这个jsfiddle：http: [//jsfiddle.net/jwa3q/](http://jsfiddle.net/jwa3q/)

关于拖动事件的更多信息可以在这里找到：[https ://developer.mozilla.org/en-US/docs/DragDrop/Drag_Operations](https://developer.mozilla.org/en-US/docs/DragDrop/Drag_Operations)

# vbscript - Vbs 乘法表

> ID：15295102
> 
> 赞同：0
> 
> 时间：2013-03-08T13:30:47.940
> 
> 标签：vbscript

我正在为我的编程课制作资源，它实际上是非常基本的脚本，我找到了这个网站并浏览了它，里面有很多关于脚本的有用的东西，但是我正在搜索的东西不在列表中，或者我没有使用正确的关键字问题是我的老师让我写一个Vbs来打印乘法表，我做了研究，这就是我现在的位置；

```
dim sum, arraynum(), arrayline1, count, arraynum2(), arrayline2, arraynum3(), arrayline3, arraynum4(), arrayline4, arraynum5(), arrayline5

count=1
sum=1
arrayline1=1

for count=1 to 5
    redim preserve arraynum(arrayline1)
    redim preserve arraynum2(arrayline2)
    redim preserve arraynum3(arrayline3)
    redim preserve arraynum4(arrayline4)
    redim preserve arraynum5(arrayline5)
    arraynum(arrayline1)=sum
    arraynum2(arrayline2)=sum*2
    arrayline2=arrayline2+1
    arraynum3(arrayline3)=sum*3
    arrayline3=arrayline3+1
    arraynum4(arrayline4)=sum*4
    arrayline4=arrayline3+1
    arraynum5(arrayline5)=sum*5
    arrayline5=arrayline5+1
    sum=sum+1
    arrayline1=arrayline1+1
next

wscript.echo join(arraynum) & vbcrlf & join(arraynum2) & vbcrlf & join(arraynum3) & vbcrlf & join
(arraynum4) & vbcrlf & join(arraynum5)

' Its printing like;
'   1 2 3 4 5
'   2 4 6 8 10
'   3 6 8 12 15
'   4 8 12 16 20
'   5 10 15 20 25 
```

如您所见，它们不在一条直线上，而且我无法通过输入来做到这一点在它们之间设置边界或者是否有可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:40:24.010

诀窍是将 leftpadding 应用于您正在打印的值：计算一个值包含的字符数，从固定数量中减去它们，并为该值添加相同数量的空格。这是一个将替换并左填充`vbTab`字符的示例。如果您`join`的数组使用 a`vbTab`而不是默认空间，则可以使用这样的函数。

因为这是一项家庭作业，所以我还添加了一些代码，这些代码可以递归地获取一个数字的倍数，从 0 开始。只是为了引发一些好奇心。我不建议只复制粘贴它，它不符合您的要求：“从 1 开始”。

```
dim multiple

' Get the numbers 0 to 5
for each multiple in split(getMultiples(1,5), vbTab)
    ' print the multiplication table for each of this numbers
    wscript.echo trim(TabToLpad(getMultiples(multiple, 5), 10))
next

' Does the calculation and returns a Tab delimited string of all multiples
function getMultiples(nr, amount)
    getMultiples = 0
     ' As long as the amount is larger then 0, get the next multiple
    if amount > getMultiples then getMultiples = getMultiples(nr, amount-1) & vbTab & (nr * amount)
End function

' Pads each value in a tab delimited string with the nrPadChars spaces. Returns a string.
function tabToLpad(str, nrPadChars)
    dim part
    for each part in split(str, vbTab)
        tabToLpad = tabToLpad & string(nrPadChars - len(part), " ") & part
    next
End Function 
```

# java - 在 Java 中获取屏幕配置

> ID：15295115
> 
> 赞同：0
> 
> 时间：2013-03-08T13:31:31.120
> 
> 标签：java, configuration, screen, awt

我正在尝试找到一种方法来了解用户正在使用哪种屏幕配置。

例如，他可能有 2 个水平放置的屏幕，或 2 个垂直放置，或者只是 1 个或什至 2 个水平放置的屏幕和 2 个垂直放置 (2x2)。

有没有办法抓住它？

到目前为止，我设法获得了用户拥有的屏幕数量。

```
int devices = g.getScreenDevices().length; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:50:54.990

你已经有不同的屏幕了。我想你的`g`领域是通过`GraphicsEnvironment#getLocalGraphicsEnvironment`. 然后，通过这样做，`g.getScreenDevices`您已经有了一个包含当前屏幕的数组（顺便说一句，您发布的代码行不应该编译）。

因此，要访问每个屏幕，您可以执行以下操作：

```
GraphicsDevice[] devices = g.getScreenDevices();

for(GraphicsDevice currentDevice : devices) {
    DisplayMode deviceDisplayMode = currentDevice.getDisplayMode();
    //From here onwards, use deviceDisplayMode.getWidth() and
    //deviceDisplayMode.getHeight()
} 
```

# java - 如何将数组列表的引用传递给数组？

> ID：15295116
> 
> 赞同：-4
> 
> 时间：2013-03-08T13:31:32.470
> 
> 标签：java, arrays, arraylist

如何将数组列表的引用传递给数组？

我有一个 Arraylist，但方法约束是我应该返回一个数组，并且我应该返回一个与方法签名中给我的引用相同的数组，我不能简单地不使用 The ArrayList，因为这需要代码中的很多变化。那么有没有快速的方法呢？？

```
public Skill[] getSkills() {
  if (skills.size() == 0) {
    return null;
  }
  Skill[] result = new Skill[skills.size()];
  result = skills.toArray(result);
  return result;
}

public void setSkills(Skill[] skills) {
  if (skills.length != 0) {
    for (int i = 0; i < skills.length; i++) {
      this.skills.add(i, skills[i]);
    }
  }
} 
```

Junit测试是：

```
@Test(timeout = 1000)
public void testGetSkills() {
  instance.setSkills(skills);
  assertSame("The returned skill array should be the same", instance.getSkills(), skills);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:33:15.770

> 如何将数组列表的引用传递给数组？

```
public T[] method() {
List<T> list=....; 
 //other ops
return list.toArray(new T[list.size()]);
} 
```

[**List#toArray(T..a)**](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#toArray%28T%5B%5D%29) 方法充当基于数组和基于集合的 API 之间的桥梁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:49:19.763

考虑 Ur 方法的参数如下

```
public Array method (Array signature)
{
ArrayList<object> ArrayList = new ArrayList<object>();

foreach(object test in ArrayList )
{
 if(test == signature)
{
    return test
}  
}
} 
```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:33:23.487

> 我有一个 Arraylist 但我应该返回一个数组的方法约束

你不能只做：

```
return list.toArray(new String[list.size()]); 
```

当然，假设您`ArrayList`是 Strings 在这里 -`String`用任何相关的类型替换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T13:35:57.350

你可以返回 list.toArray([list.size()]);

# entity-framework - 使用类库 EF 模型的 MVC 4 项目

> ID：15295119
> 
> 赞同：-1
> 
> 时间：2013-03-08T13:31:40.067
> 
> 标签：entity-framework, asp.net-mvc-4

**在我的 MVC 4 项目的Models 文件夹**中使用 EF 模型，我成功地使用名为**Prod**的编码类和控制器方法在剃刀视图中显示数据，如下所示：

```
public ActionResult Index()
{
    IEnumerable<Prod> Pr = from p in db.Products
                                    select new Prod
                                    {
                                        ProductId = p.ProductID, 
                                        ProductName = p.ProductName
                                    };
    return View(Pr); 
} 
```

现在我正在尝试使用类库中的模型而不是当前的模型来做同样的事情，所以我在我的解决方案中添加了一个新的类库，然后添加了一个使用相同连接字符串的模型，并映射相同的实体，然后在我的 MVC 项目中添加了对新类库的引用，并将下一个放在**MyController**和**Prod**类的顶部：

```
using MyClassLibrary; 
```

然后我删除了旧模型，现在当我尝试显示视图时，出现以下错误：

***无法加载指定的元数据资源。***

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:00:09.137

当您移动或重命名项目时，数据上下文 (.edmx) 位于实体框架连接字符串的元数据部分中，必须更改

你可以试试

```
connectionString="metadata=res://*/MyModel.csdl|res://*/MyModel.s‌​sdl|res://*/MyModel.msl; 
```

代替

```
connectionString="metadata=res://*/Models.MyModel.csdl|res://*/Models.MyModel.s‌​sdl|res://*/Models.MyModel.msl; 
```

或尝试删除您的上下文并重新创建它，然后检查它自动添加的连接字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:39:29.297

您需要将连接字符串放在 Mc4 Web 项目的 web.config 中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:47:26.540

您需要在连接字符串中提及数据源。

如果您没有使用任何其他 web.config 文件进行视图。使用您的通用 web.config 文件并上传带有新数据源名称、用户和密码的连接字符串。

# linux - Bash脚本：使用命令解析字符串而不执行它

> ID：15295120
> 
> 赞同：1
> 
> 时间：2013-03-08T13:31:39.983
> 
> 标签：linux, bash, shell

我有一个在 bash 中解析 xml 的脚本。我对其中一个元素有疑问，因为它包含一个字符串，其中包含一些命令：即：

```
/usr/bin/printf "%b" "*****  MONITORING  ***** \n\n Notification Type: Critical \n  Host:  &{INTERNETMANAGED_URL00.URL}   \n  Estado: &{INTERNETMANAGED_URL00.Status}    \n Time:    &{INTERNETMANAGED_URL00.Status_Timestamp}    Format: cyymmddhhmmssttt \n Contact to:APPSRV  "|/usr/bin/mail blabla@bla.com -c bllu@bluu.com -r "AAAAA" -s "**  MONITORING - Server URL -Critical  **" 
```

如何在不执行内部命令的情况下将该字符串设置为变量（并打印它）？我最终在我的输出中得到那个 printf 。

谢谢！

代码如下所示：

```
while read line
do

    if [[ $line == *"SITNAME"* ]] || [[ $line == *"TEXT"* ]] ; then
        flag=true
    fi

    if [ $flag= 'true' ]; then
        echo "$line"
        writeLine=$writeLine';'"$line"               
    fi

done < file.text

echo $writeLine >> report.out
writeLine=""
flag=false 
```

ECHO 上的输出

```
<![CDATA[/usr/bin/printf "%b" "***** MONITORING  ***** nn Notification Type: Critical n  Host:  &{INTERNETMANAGED_URL00.URL}   n  Stat: &{INTERNETMANAGED_URL00.Status}    n Time:    &{INTERNETMANAGED_URL00.Status_Timestamp}    Format: cyymmddhhmmssttt n Contact to:APPSRV  "|/usr/bin/mail mail@mail.com  -r "MONITORING" -s "**  MONITORING - Server URL -Critical  **"]]> 
```

文件输出

```
<![CDATA[/usr/bin/printf "%b" "***** MONITORING file1.txt readme.txt file.xml script.sh nn Notification Type: Critical n Host: &{INTERNETMANAGED_URL00.URL} n Stat: &{INTERNETMANAGED_URL00.Status} n Time: &{INTERNETMANAGED_URL00.Status_Timestamp} Format: cyymmddhhmmssttt n Contact to:APPSRV "|/usr/bin/mail mail@mail.com -r "MONITORING" -s "** MONITORING - Server URL -Critical **"]]> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:34:46.313

这有效：

writeLine="$writeLine"';'"$line"

...

回声“$writeLine”>>report.out

谢谢大家的时间！

# c# - 算术运算导致溢出 MySql DB 连接打开

> ID：15295123
> 
> 赞同：2
> 
> 时间：2013-03-08T13:31:48.903
> 
> 标签：c#, mysql, math, overflow, connector

我正在使用 MySql 连接器 6.6.4，当我调用 MySqlConnection 的 Open 方法时抛出异常：

算术溢出异常：

我收到此异常，无法理解为什么会发生，在此先感谢。

![在此处输入图像描述](../Images/7c3ef5b5189e6dc5c76adbf4d11e0bd4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:43:17.000

正如我在您的屏幕截图中看到的那样，在身份验证期间引发了异常。有一个线程[MySQL Bugs#66647](http://bugs.mysql.com/bug.php?id=66647#c388362)说它是连接器问题。

检查您是否在 MySQL 上使用了正确的连接器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-09T04:39:15.300

请确保您的 MySQL 驱动程序和 IIS（正在运行）使用相同的编译器平台（x86 或 x64）都必须匹配。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-08T13:40:14.270

您正在尝试保存大小小于给定值的值，请确保您将正确的输入传递给查询。

# android - Styles.xml 的 AlertDialog Holo 强调色

> ID：15295125
> 
> 赞同：1
> 
> 时间：2013-03-08T13:31:55.237
> 
> 标签：android, android-layout, android-widget

我使用 Android 操作栏样式生成器更改了 SherlockActionBar 的颜色。我还使用 Holo Colors Generator 更改了可能的内容，所有这些样式都有效。

但是当我在 PreferencesActivitiv 中获得一个 AlertDialog（更改设置）时，我仍然有蓝色的 Holo 口音。我找到了这个链接，它可以帮助我创建一个自定义的 AlertDialogs：

[如何更改 AlertDialog 标题的颜色及其下方线条的颜色](https://stackoverflow.com/questions/14439538/how-can-i-change-the-color-of-alertdialog-title-and-the-color-of-the-line-under/15285514#15285514)

但我不知道为主题中的对话框设置颜色的属性。使对话框在整个应用程序中保持一致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-12T19:39:21.677

有一个库可以完全满足您的需求：

[https://github.com/inmite/android-styled-dialogs](https://github.com/inmite/android-styled-dialogs)

# r - 将文本从多个连接附加到单个文件的最可靠方法是什么

> ID：15295126
> 
> 赞同：9
> 
> 时间：2013-03-08T13:32:00.097
> 
> 标签：r, file-io, foreach, parallel-processing

我已经看到很多关于[写入文件的](https://stackoverflow.com/q/10956170/1478381)[问题](https://stackoverflow.com/q/2470248/1478381)，但我想知道打开文本文件、附加一些数据然后在要从多个连接写入时再次关闭它的最可靠方法是什么（即并行计算情况），并且不能保证每个连接何时要写入文件。

例如，在下面的玩具示例中，它仅使用我桌面上的内核，它似乎工作正常，但我想知道如果写入时间变长并且写入文件的进程数增加，这种方法是否容易失败（尤其是在可能存在一些延迟的网络共享上）。

当可能有其他从属进程想要同时写入文件时，任何人都可以提出一种可靠、明确的方式来打开、写入然后关闭连接吗？

```
require(doParallel)
require(doRNG)

ncores <- 7
cl <- makeCluster( ncores , outfile = "" )
registerDoParallel( cl )

res <- foreach( j = 1:100 , .verbose = TRUE , .inorder= FALSE ) %dorng%{
    d <- matrix( rnorm( 1e3 , j ) , nrow = 1 )
    conn <- file( "~/output.txt" , open = "a" )
    write.table( d , conn , append = TRUE , col.names = FALSE )
    close( conn )
} 
```

我正在寻找*最好*的方法来做到这一点，或者是否有最好的方法。也许 R 并`foreach`自动处理我称之为 writelock 的问题？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T20:48:47.323

foreach 包不提供文件锁定机制，以防止多个工作人员同时写入同一个文件。这样做的结果将取决于您的操作系统和文件系统。当使用分布式文件系统（如 NFS）时，我会特别担心结果。

相反，我会更改您打开输出文件的方式以包含工作人员的进程 ID：

```
conn <- file( sprintf("~/output_%d.txt" , Sys.getpid()) , open = "a" ) 
```

如果需要，您可以在 foreach 循环返回后连接文件。

当然，如果您使用多台机器，您可能有两个具有相同进程 ID 的工作人员，因此您也可以在文件名中包含主机名`Sys.info()[['nodename']]`，例如使用 .

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T22:18:35.193

@didierc 提出的方法的一种变体是从组合函数编写矩阵：

```
conn <- file("~/output.txt", "w")
wtab <- function(conn, d) {
    write.table(d, conn, col.names=FALSE)
    conn
}

res <- foreach(j = 1:100, .init=conn, .combine='wtab') %dorng% {
    matrix( rnorm( 1e3 , j ) , nrow = 1 )
}

close(conn) 
```

当与 doSNOW 和 doMPI 等并行后端一起使用时，这种技术特别有用，它们可以在结果发送回主控时即时调用组合函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T14:02:12.240

您也许可以尝试类似的方法：

```
res <- foreach( j = 1:100 , .verbose = TRUE , .inorder= FALSE ) %dorng%{
    matrix( rnorm( 1e3 , j ) , nrow = 1 )
}

conn <- file("~/output.txt", open = "a")
apply(res, 1, function (x, output) {
    write.table( x , conn , append = TRUE , col.names = FALSE )
  }, conn)

close(conn) 
```

来源：[数据框中的 foreach 行](https://stackoverflow.com/questions/1699046/foreach-row-in-an-r-dataframe)

# apache-flex - Flex - 火花按钮粗体标签的一部分

> ID：15295129
> 
> 赞同：1
> 
> 时间：2013-03-08T13:32:15.673
> 
> 标签：apache-flex, button, fonts, toggle, bold

快速提问。

是否可以将火花按钮上的部分标签设为粗体？

我想要一个带有“地图开/关”标签的切换按钮。打开它会将“ON”部分设置为粗体。

如果按钮本身没有太多的返工，这可能吗？

谢谢 =)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:57:22.163

快速回答。

如果您愿意一次性使用自定义皮肤，则可以使用它。
它是这样的：

*   通过复制 spark.skins.spark.ToggleButtonSkin 为您的 ToggleButton 创建自定义外观
*   向下滚动到代码底部并找到 ID 为“labelDisplay”的标签
*   用这样的东西替换它：

.

```
<s:HGroup gap="1" horizontalCenter="0" verticalCenter="1"
          left="10" right="10" top="2" bottom="2" verticalAlign="middle">

    <s:Label id="labelDisplay" maxDisplayedLines="1"/>
    <s:Label text=" ON" maxDisplayedLines="1" 
             fontWeight.selectedStates="bold"/>
    <s:Label text="/" maxDisplayedLines="1"/>
    <s:Label text="OFF" maxDisplayedLines="1"
             fontWeight="bold" fontWeight.selectedStates="normal"/>
</s:HGroup> 
```

*   现在像这样分配您的自定义皮肤：

.

```
<s:ToggleButton label="Map" skinClass="path.to.skin.MyToggleButtonSkin"/> 
```

如您所见，标签的第一部分仍然可以在外部设置，但 ON/OFF 部分已被烘焙到皮肤中。这是为您提供快速解决方案的折衷方案。如果您希望它真正通用，那就更难了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:09:22.930

更灵活的案例 - 创建自定义 ToggleButton 皮肤并使用 RichText。如果您将在 mxml 中设置标签 - 使用 html 实体。参见示例：

主要应用：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Style>
        @namespace s "library://ns.adobe.com/flex/spark";
        @namespace mx "library://ns.adobe.com/flex/mx";

        s|ToggleButton
        {
            skinClass: ClassReference("skins.ToggleButtonSkinBold");
        }

    </fx:Style>

    <s:ToggleButton id="btn" label="Map &lt;span fontWeight='bold'&gt;ON&lt;/span&gt;"
                    change="{btn.label = 'Map &lt;span fontWeight=\'bold\'&gt;' +  ((btn.selected) ? 'OFF': 'ON') + '&lt;/span&gt;'}" 
                    width="200" height="50" />

</s:Application> 
```

在皮肤类中，使用 includeInLayout=false 禁用默认 labelDisplay 组件并添加富文本组件。

```
.. some code
    <!-- layer 8: text -->
    <!--- @copy spark.components.supportClasses.ButtonBase#labelDisplay -->
    <s:Label id="labelDisplay"
             includeInLayout="false" visible="false" />

    <s:VGroup width="100%" height="100%" horizontalAlign="center" verticalAlign="middle">
        <s:RichText id="labelDisplayRich" />    
    </s:VGroup>

</s:SparkButtonSkin> 
```

覆盖 commiteProperties 方法并更新皮肤脚本块中的富文本：

```
.. some code
         /**
         * @private
         */

        override protected function commitProperties():void
        {
            super.commitProperties();

            var tf:TextFlow = TextFlowUtil.importFromString(labelDisplay.text);

            if (tf.getText() != labelDisplayRich.textFlow.getText())
            {
                labelDisplayRich.textFlow = tf; 
            }

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:53:39.143

为此，您可以通过在 Adob​​e 中手动设计两个按钮来做到这一点，1 个带有 ON 粗体，1 个带有 OFF 粗体。并制作两个带有设计按钮的皮肤。

点击之后，动态切换皮肤。

```
if(toggle){
   myButton.setStyle("skinClass", onButtonSkin);
}else {
   myButton.setStyle("skinClass", offButtonSkin);
} 
```

在 mx 按钮中在 CSS 中添加两种样式并设置

```
myButton.setStyle("styleName", onButtonSkin); 
```

# instagram - 订阅 Instagram 实时 API 如何帮助我获取用户/媒体详细信息

> ID：15295131
> 
> 赞同：0
> 
> 时间：2013-03-08T13:32:21.523
> 
> 标签：instagram, real-time-updates

我已订阅 instagram 实时 api 以接收主题标签的 POST 更新，`#sudhir` 我可以通过这种方式获取服务器的更新：

```
{"changed_aspect":"media", "subscription_id":2935881, "object":"tag", "object_id":"sudhir", "time":1362748903} 
```

我在这些更新中找不到任何与用户相关或媒体相关的信息。我在**SO**中发现我们必须明确地点击他们的（instagram）端点来获取照片/用户信息，尽管订阅了端点。

1.  如果我们必须明确提出请求，那么订阅特定端点有什么用。？
2.  `{"changed_aspect":"media","subscription_id":2935881,"object":"tag","object_id":"nofilter","time":1362748903}`我们在 servlet 的请求正文中获得的这个 json 数据（）有什么用。?
3.  我们可以以任何方式使用这些数据来获取用户/媒体的实际数据吗？

任何帮助或建议将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:38:38.007

恐怕没什么用。一旦您掌握了这些信息，您就会知道 Instagram 端发生了一些变化。然后，您应该触发相应的请求。从您的示例来看，您似乎想要执行标记/最近/请求并过滤掉早于“时间”变量的任何内容。

不幸的是，这不是最简单的做事方式，但他们似乎已经决定，艰难的做事方式是必经之路。

# php - JSON 使用 PHP 获取选定的值

> ID：15295135
> 
> 赞同：0
> 
> 时间：2013-03-08T13:32:37.377
> 
> 标签：php, json

一直在通过stackoverflow寻找这个，所以我确实尝试过纠正这个问题。不知道我在这里做错了什么。有什么建议么？

```
 <?php
    $string = '{
    "status": "success",
    "th_size": "small",
    "users": [
        {
            "user_id": 159826,
            "username": "WillBeUsed",
            "online": true,
            "is_away": false,
            "access": "public",
            "render_info": {
                "profile_url": "/person1",
                "profile_image": "11e5a496f13366a0c4ce000403aa862",
                "language": "english",
                "chat": "ready"
            },
            "new": false,
            "back": false
        }
    ],
    "online_count": 1
}';
    $result = json_decode($string, true);

//echo $result['status']; // This works
echo $result->users[0]->render_info->profile_url; // This don't work
    ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T13:35:13.183

你看起来不够认真。PHP手册清楚地说明了以下参数`json_decode`：

```
mixed json_decode ( string $json [, bool $assoc = false [, int $depth = 512 [, int $options = 0 ]]] ); 
```

通过传递第二个参数，因为`true`你告诉它给你一个关联数组（不是对象），所以你需要像这样访问它：

```
$result['users'][0]['render_info']['profile_url']; 
```

# java - Java 网络 - 客户端和服务器

> ID：15295145
> 
> 赞同：0
> 
> 时间：2013-03-08T13:33:08.060
> 
> 标签：java, sockets, networking

我对 Java 很陌生，刚刚开始网络，所以我提前为任何愚蠢的问题道歉。我有一个基本游戏，其中玩家（或机器人）可以在地图上移动，直到找到物品并退出，但是使用网络我希望玩家和机器人能够同时在同一张地图上玩服务器。

我有 5 节课：

*   GameRules - 控制游戏逻辑/规则
*   地图 - 包含地图。
*   玩家 - 代表玩家。
*   Bot - 作为机器人玩游戏。
*   PlayGame - 通过 CLI 控制与游戏的交互。

我很确定 GameRules 和 Map 将在服务器端，而 PlayGame 将在客户端，但是我不确定 Bot 和 Player 类的位置？另外，我是将 GameRule 和 Map 合并到一个类中，还是在每个类中放置一个套接字？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T08:38:13.440

根据业务逻辑的复杂性和所需的同步时间，完全有可能将大部分内容保留在客户端级别，而只需将服务器用作更新的代理。想象一个 2 人在线国际象棋游戏。规则是如此的标准，而且时间只是来回的，所以这个游戏的“服务器”只需要从一个玩家到另一个玩家来回传递每一个动作。就像用插座代替祖父国际象棋比赛中的邮件一样。每个（客户端）方都确切地知道如何处理移动以及哪些新移动是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:40:15.067

客户端-服务器游戏中的大多数模型应该同时驻留在客户端和服务器上。

*   客户需要模型来可视化他们持有的数据；
*   服务器需要他们根据业务逻辑修改它们——然后将中间结果发送给客户端以更新他们的模型。服务器必须这样做，因为这就是它存在的原因：通过成为唯一可以改变游戏状态的节点来保持游戏状态的一致性。

您总是可以尝试将所有模型保留在客户端，但想象一下，当您想使用 N 个客户端制作游戏时，您会陷入什么样的编码恐惧。它们都必须具有一致的状态。让一个节点（服务器）做出决定，然后其他节点必须遵循指令要安全得多。

请注意，在更高级的实现中，例如实时游戏，客户端还实现了一些预测行为来隐藏客户端-服务器延迟，从而暂时改变游戏状态，但服务器命令总是会否决客户端的决定。您还可以以这样一种方式对客户端进行编码，即使他还没有收到来自服务器的先前“移动”的确认，他也始终能够继续玩 - 当某些移动时，您必须实现回滚/校正功能被服务器拒绝。

# android - 如何在imageview中添加点击功能？

> ID：15295146
> 
> 赞同：0
> 
> 时间：2013-03-08T13:33:09.927
> 
> 标签：android

如何`onClick`在图像视图中设置功能？

当用户单击图像时，它应该全屏显示在下一页上。

`onClick`以下是应添加功能的现有代码。

```
btnLO = new LinearLayout(MainActivity1.this);   
LinearLayout.LayoutParams paramsLO = new LinearLayout.LayoutParams(
    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
// button margins
paramsLO.setMargins(0, 0, 0, 0);

LinearLayout.LayoutParams paramsLO2 = new LinearLayout.LayoutParams(
    LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
// button margins
paramsLO2.setMargins(0, 20, 0, 0);
// button height/width *pixels*
btnLO.setOrientation(LinearLayout.VERTICAL);
btnLO.setBackgroundColor(5); // not working correctly

//buttons
for (i =0;i <reqdata.length;i++) {
    LinearLayout li=new LinearLayout(this);
    li.setOrientation(LinearLayout.HORIZONTAL);
    final Button b1 = new Button(MainActivity1.this);
    final ImageView imageView = new ImageView(MainActivity1.this);

    int width = 160;
    int height = 50;

    LinearLayout.LayoutParams parms = new LinearLayout.LayoutParams(
        width,height);
    parms.setMargins(0, 2, 0, 0);
    imageView.setLayoutParams(parms);

    li.addView(b1, paramsLO);        
    li.addView(imageView);
    btnLO.addView(li);

    b1.setText(reqdata[i].getSpinnerText());

    b1.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {               
            imageView1 = imageView;
            Intent pictureActionIntent = new  
            Intent(MediaStore.ACTION_IMAGE_CAPTURE); 

            pictureActionIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(new  
            File(SDCARD_ROOT_PATH + SAVE_PATH_IN_SDCARD,IMAGE_CAPTURE_NAME)));  

            startActivityForResult(pictureActionIntent,CAMERA_PICTURE);
            b1.setClickable(false);
        }   
    });    

}
final Button b2 = new Button(MainActivity1.this);

b2.setText("Submit");
b2.setWidth(150);
b2.setHeight(50);
b2.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {                            
        long visitID = dbConnector.saveVisit();
        for (i =0;i <reqdata.length;i++) {
            dbConnector.saveVisitDetail(listByte.get(i),visitID,Long.
            valueOf(reqdata[i].getValue()).longValue());
        }      
        Toast.makeText(getBaseContext(),  
        "Sucessful",Toast.LENGTH_SHORT).show();
        Intent intent = new Intent(MainActivity1.this, Main.class);     
        startActivity(intent);
        finish();
    }
}); 
btnLO.addView(b2, paramsLO2);
btnLO.setGravity(Gravity.CENTER| Gravity.CENTER_HORIZONTAL);
scroll.addView(btnLO);

this.addContentView(scroll, new LayoutParams());

@Override
protected void onActivityResult(int requestCode, int resultCode,
                                Intent imageReturnedIntent) {
    super.onActivityResult(requestCode, resultCode, imageReturnedIntent);
    if (imageReturnedIntent.getExtras() != null) {
        // here is the image from camera
        yourSelectedImage = (Bitmap)  
        imageReturnedIntent.getExtras().get("data");
        ByteArrayOutputStream outStr = new  
        ByteArrayOutputStream();                  

        yourSelectedImage.compress(CompressFormat.JPEG, 100, outStr);
        blob = outStr.toByteArray();
        yourSelectedImage =  BitmapFactory.decodeByteArray(blob, 0,
                                                           blob.length);
        imageView1.setImageBitmap(yourSelectedImage);
        listByte.add(blob);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:37:27.783

这是您可以添加点击图像视图的方法

```
imageview.setOnClickListener(new View.OnClickListener() 
     {
         public void onClick(View v) 
         {

         }

}); 
```

# sql-server - 如何使用 SQL Server Reporting Service 引用报表中的计算字段

> ID：15295148
> 
> 赞同：2
> 
> 时间：2013-03-08T13:33:16.327
> 
> 标签：sql-server, sql-server-2005, reportingservices-2005

我正在使用 SQL Server2005 报告服务编写报告。我有一个提供数据集的存储过程。

数据在报告中被分成组。每个组页脚都有一个函数（表达式），它是根据表中的字段计算的平均值（让我们将此值称为 X）。在数据的末尾，我希望报告有一个页脚，其中包括所有 X 值的总和。

请注意，我不想要列中所有字段的总和，但我想要组页脚中所有计算值的总和。这在 Excel 中真的很容易做到

这个问题似乎很简单，但我正在努力寻找答案。我会很感激任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T07:24:50.913

在搜索了 MS 论坛并进行了多次试验和错误之后，我的发现是这是此版本 BIDS 的限制。以下是解决方法：

1) 升级到更高版本的 BIDS。我没有调查我的问题是否会在以后的版本中得到解决，因为此时升级不是一个选项。

2) 向数据集添加一个新的计算字段。这不起作用，因为对于我的应用程序，计算字段需要不支持的聚合函数。

3) 最好的解决方案是在报表属性中添加一个 VB 代码函数，如下所示：

```
Dim Shared totalBalance
Dim Shared Cnt AS Integer

Public  Function AddTotal(ByVal balance ) 
                totalBalance = totalBalance + balance
                Cnt=Cnt+1
                return balance

End Function

Public Function GetTotal() 
                return totalBalance
End Function 
```

然后将组页脚中的代码引用为：`=Code.AddTotal(Avg(Fields!Amount.Value))`

并从报告页脚为：

```
=Code.GetTotal() 
```

此解决方案在组页脚中运行良好，但在报表末尾的报表页脚中，变量`Cnt`和`totalBalance`被重置为 0。

# iphone - 在IOS的闪屏上淡出多个图像

> ID：15295149
> 
> 赞同：0
> 
> 时间：2013-03-08T13:33:21.313
> 
> 标签：iphone, ios, ios5, uiimageview

我正在尝试为启动屏幕制作多个图像。我正在显示 3 个图像作为启动屏幕第一个是启动屏幕的默认图像，而不是使用 Ui-imageview 我在我的 Imageview 上显示第 2 个和第 3 个。

我想在更改启动画面时淡出图像。我尝试了 NSTimmer 解决方案，但它向我显示了直接的第三张图像和缅因屏幕，而不是在我尝试了这个解决方案之后，但它一次又一次地显示了我的第二张和第三张图像 2 次。任何帮助表示赞赏

已编辑/- Nikki 建议我一些解决方案，但我很困惑我在哪个地方取消隐藏我的第二个图像视图？这是我的代码

```
backgroundImageView = [[UIImageView alloc] initWithFrame:self.view.bounds];
backgroundImageView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
backgroundImageView.image=[UIImage imageNamed:@"SPLASHSCREEN-2.png"];
backgroundImageView2 = [[UIImageView alloc] initWithFrame:self.view.bounds];
backgroundImageView2.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
backgroundImageView2.image=[UIImage imageNamed:@"SPLASHSCREEN-3.png"];
[self.view addSubview:backgroundImageView];
[self.view addSubview:backgroundImageView2];
[backgroundImageView2 setHidden:YES];
[self performSelector:@selector(performTransition) withObject:nil afterDelay:1.0];

-(void)performTransition
   {
CATransition *animation3 = [CATransition animation];
[animation3 setDuration:3.0f];
[animation3 setType:kCATransitionReveal];
[animation3 setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
[[backgroundImageView layer] addAnimation:animation3 forKey:@"SwitchToView"];
[backgroundImageView setHidden:YES];
[backgroundImageView2 setHidden:NO];//No animation happen while changing the image view
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:24:55.653

您可以创建两个`ImageView`要在开始时显示并首先将它们设置为隐藏。只需编写代码以进行动画处理：

```
-(void)performTransition
{  
  CATransition *animation3 =  [CATransition animation];
  [animation3  setDuration:3.0f];
  [animation3  setType:kCATransitionReveal];
  [animation3  setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];
  [[backgroundImageView2  layer] addAnimation:animation3 forKey:@"SwitchToView"];
  [backgroundImageView  setHidden:YES];
  [backgroundImageView2  setHidden:NO];//No animation happen while changing the image view
} 
```

并设置 ImageView 将在取消隐藏时进行动画处理。可以通过更改 的值来更改动画类型`[animation3 setType:kCATransitionReveal];`。记得导入：`#import<QuartzCore/QuartzCore.h>`

为了用动画隐藏`ImageView`上一个并用动画显示下一个`ImageView`，您可以在函数内编写代码，并可以使用该函数调用该函数，`performSelector`并且可以添加所需的时间间隔。

# c# - 将 OData Queryable 与存储库一起使用？

> ID：15295153
> 
> 赞同：4
> 
> 时间：2013-03-08T13:33:43.870
> 
> 标签：c#, asp.net-web-api, odata, iqueryable

我有这个存储库方法：

```
public IQueryable<TModel> GetAll()
{
    using (var context = new DatabaseContext())
    {
        return context.Set<TModel>().AsQueryable();
    }
} 
```

`TModel`艺术家模型在哪里..无论如何

然后我在我的控制器中有这个动作：

```
// GET api/artist
[Queryable]
public IQueryable<ArtistModel> Get()
{
    return _repo.GetAll().AsQueryable();
} 
```

现在..如果我将存储库方法更改为返回一个列表并添加`.ToList`我的结果..那么这会很好用。但是，无论有什么 OData 查询。我仍然会首先执行“获取所有查询”。将它们变成一个列表，然后我会针对该列表执行我的 OData 查询。

这似乎完全错误..我想做的是确保在我尝试从数据库中获取数据的同时执行 OData 查询..所以我只得到与查询匹配的非常具体的结果..而不是一大堆随后被查询的数据..

现在我`DbContext`遇到了在使用之外处理的问题..但我仍然需要关闭`DbContext`一些地方，一些如何..

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:23:48.183

Web api 的可查询扩展的最新版本有点令人困惑，因为它与以前的版本有很大的不同。在新版本中，您需要显式启用可查询支持或使用新的查询选项类。[看到这个](http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api/supporting-odata-query-options)

编辑：一些代码，因为我现在在办公桌前

```
public IQueryable<TModel> GetAll(ODataQueryOptions opts)
    {
        var db = _repo.GetAll();
        return (IQueryable<TModel>) opts.ApplyTo(db);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T04:52:48.020

您可以通过几种方式启用可查询的 Web API，

1.  将`[Queryable]`属性放在您的操作上。您的操作可以返回其中之一 - `IEnumerable<T>`, `IQueryable<T>`,`HttpResponseMessage`内容为`ObjectContent<IQueryable<T>>`or `ObjectContent<IEnumerable<T>>`, `Task<IQueryable<T>>`, `Task<IEnumerable<T>>`,`Task<HttpResponseMessage>`具有与之前相同的限制。

2.  通过执行全局启用查询`configuration.EnableQuerySupport()`。这将启用查询所有返回`IQueryable<T>`.

3.  [如此处](http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api/supporting-odata-query-options)`ODataQueryOptions<T>`所述使用并自己手动应用查询。

关于`DbContext`处理问题，我们以一种懒惰的方式评估查询很晚 - 当格式化程序将响应写入流时。所以，你不应该`DbContext`在你的行动中处置。相反，将其与控制器一起处置，即覆盖控制器的`Dispose`方法并将其处置在那里。Web API 负责控制器的生命周期，并在请求完成处理时释放控制器。此外，您也可以使用`Request.RegisterForDispose`方法，在请求完成处理后处理任何资源。

# c# - RegisterAll 与注册上下文的能力在哪里（又名 Func )?

> ID：15295159
> 
> 赞同：7
> 
> 时间：2013-03-08T13:34:06.040
> 
> 标签：c#, .net, dependency-injection, ioc-container, simple-injector

我可以使用 instanceCreator 上下文（aka ）注册单个注册项`Func<T>`，但 RegisterAll 似乎没有相同的限额。

## TL;DR - 找到接受的答案并查看更新 2（或跳至此问题的更新 3）

这就是我想要做的：

```
container.RegisterAll<IFileWatcher>(
    new List<Func<IFileWatcher>>
    {
        () => new FileWatcher(
            @".\Triggers\TriggerWatch\SomeTrigger.txt",
            container.GetInstance<IFileSystem>()),
        () => new FileWatcher(
            @".\Triggers\TriggerWatch\SomeOtherTrigger.txt",
            container.GetInstance<IFileSystem>())
    }); 
```

我尝试根据[先前的 Stack Overflow 答案为多个注册](https://stackoverflow.com/a/13690062/18475)添加扩展，但似乎最后一个获胜：

```
public static class SimpleInjectorExtensions
{
    public static void RegisterAll<TService>(this Container container,
        IEnumerable<Func<TService>> instanceCreators) 
        where TService : class
    {           
        foreach (var instanceCreator in instanceCreators)
        {
            container.RegisterSingle(typeof(TService),instanceCreator);
        }

        container.RegisterAll<TService>(typeof (TService));
    }
} 
```

我也很好奇为什么首先需要`RegisterAll`存在。这是我使用过的 5 个依赖注入容器中的第一个。其他的只是允许您针对服务注册多种类型，然后通过调用`Resolve<IEnumerable<TService>>`(autofac) 或`GetAllInstances<TService>`(SimpleInjector 和 Ninject) 将它们全部加载。

## 更新

为了更清楚起见，我正在尝试构建一个项目列表，我可以将其传递给处理每个单独项目的复合材料。它遇到了与上述相同的问题，因为它属于一组任务，这些任务都被注册为基于调度、触发器和事件 (Rx) 运行。暂时删除所有寄存器并删除其他一些内容：

```
container.Register<ITask>(() => new FileWatchTask(
    container.GetInstance<IFileSystem>(),
    container.GetInstance<IMessageSubscriptionManagerService>(),
    configuration,
    container.GetAllInstances<IFileWatcher>())); 
```

你可以看到我正在抓取之前注册的文件观察者的所有实例。

**我需要知道的是这个问题的简单解决方法以及何时实施（或者如果没有，为什么不会实施）。鉴于 Simple Injector 设计的当前限制，我也将接受这是不可能的。我不能接受的是我需要改变和调整我的架构以满足工具的限制。**

## 更新 2

让我们谈谈 OCP（Open Closed Principle aka the O in SOLID）以及我在 SimpleInjector 在某些情况下如何打破这一特定原则的印象。

开闭原则就是这样，对扩展开放，对修改关闭。这意味着您可以在不更改其源代码的情况下更改实体的行为。

现在让我们转向一个相关的例子：

```
var tasks = container.GetAllInstances<ITask>();
foreach (var task in tasks.OrEmptyListIfNull())
{
  //registers the task with the scheduler, Rx Event Messaging, or another trigger of some sort  
  task.Initialize();
} 
```

注意那是多么干净。为了能够做到这一点，我需要能够注册接口的所有实例：

```
container.RegisterAll<ITask>( 
  new List<Func<ITask>>{
    () => new FileWatchTask(container.GetInstance<IFileSystem>(),container.GetInstance<IMessageSubscriptionManagerService>(),configuration,container.GetAllInstances<IFileWatcher>()),
    () => new DefaultFtpTask(container.GetInstance<IFtpClient>(),container.GetInstance<IFileSystem>()),
    () => new DefaultImportFilesTask(container.GetInstance<IFileSystem>())
  }
); 
```

对？所以这里的教训是，这很好并且符合 OCP。我可以通过添加或删除已注册的项目来更改任务运行器的行为。打开扩展，关闭修改。

现在让我们专注于尝试按照以下答案中建议的方式进行操作（**在第二次更新之前，最终回答了这个问题**），作者给人的印象是更好的设计。

让我们从维护者提到的良好注册设计开始。我得到的观点是我必须牺牲我的代码以某种方式使 ITask 更灵活地使用 SimpleInjector：

```
container.Register<ITask<SomeGeneric1>(() => new FileWatchTask(container.GetInstance<IFileSystem>(),container.GetInstance<IMessageSubscriptionManagerService>(),configuration,container.GetAllInstances<IFileWatcher>()));
container.Register<ITask<SomeGeneric2>(() => new DefaultFtpTask(container.GetInstance<IFtpClient>(),container.GetInstance<IFileSystem>()));
container.Register<ITask<SomeGeneric3>(() => new DefaultImportFilesTask(container.GetInstance<IFileSystem>())); 
```

现在让我们看看这如何改变我们的设计：

```
var task1 = container.GetInstances<ITask<SomeGeneric1>();
task1.Initialize();
var task2 = container.GetInstances<ITask<SomeGeneric2>();
task2.Initialize();
var task3 = container.GetInstances<ITask<SomeGeneric3>();
task3.Initialize(); 
```

哎哟。您可以看到每次我从容器注册中添加或删除项目时，我现在还需要更新另一段代码。一个更改的两个修改位置，我打破了多个设计问题。

你可能会说我为什么要向容器索要这个？好吧，这是在启动领域，但如果我不是，让我们探索一下。

所以我将使用构造函数注入来说明为什么这是不好的。首先让我们将我的示例视为构造注入。

```
public class SomeClass {
    public SomeClass(IEnumerable<ITask> tasks){}
} 
```

干净整洁。

现在，让我们切换回我对已接受答案观点的理解（同样在更新 2 之前）：

```
public class SomeClass {
    public SomeClass(ITask<Generic1> task1,
                     ITask<Generic2> task2,
                     ITask<Generic3> task3
                     ) {}
} 
```

哎哟。每次我必须编辑多个代码区域时，我们甚至都不要开始了解这个设计有多糟糕。

这里有什么教训？我不是世界上最聪明的人。我维护（或尝试维护:)）多个框架，并且我不会假装我比其他人了解更多或更好。我的设计感可能是有偏差的，或者我可能会以某种我还没有想到的未知方式限制其他人。我敢肯定，作者在提供设计建议时是善意的，但在某些情况下，它可能会让人讨厌（而且有点居高临下），尤其是对于我们这些知道自己在做什么的人来说。

## 更新 3

因此，维护者在更新 2 中回答了这个问题。我试图使用 RegisterAll，因为我没有想到我可以使用`Register<IEnumerable<T>>`（不幸的是文档没有指出这一点）。现在看起来很明显，但是当人们从其他 IoC 框架中跳出来时，他们背负着一些包袱，可能会错过设计中的这种令人敬畏的简化！我错过了，我的腰带下还有 4 个其他 DI 容器。希望他将其添加到文档中或更好地调用它。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-09T11:06:31.187

从您的第一个示例（使用`List<Func<IFileWatcher>>`）中，我了解到您想要注册一个临时文件观察器的集合。换句话说，每次迭代列表时，都应该创建一个新的文件观察程序实例。这当然与使用两个（单例）文件观察器（总是返回相同的实例）注册一个列表非常不同。但是，您的问题有些模棱两可，因为在扩展方法中，您似乎将它们注册为单例。对于我的其余答案，我假设您想要瞬态行为。

创建的常见用例`RegisterAll`是为一个公共接口注册一个实现列表。例如，具有多个`IEventHandler<CustomerMoved>`实现的应用程序都需要在引发`CustomerMoved`事件时触发。在这种情况下，您为`RegisterAll`方法提供`System.Type`实例列表，并且容器完全控制为您连接这些实现。由于容器控制着创建，因此集合被称为“容器控制”。

但是，仅将`RegisterAll`创建转发回容器，这意味着默认情况下列表会导致创建瞬态实例（因为未注册的具体类型被解析为瞬态）。这看起来很尴尬，但它允许您注册一个包含不同生活方式元素的列表，因为您可以使用选择的生活方式明确地注册每个项目。它还允许您提供`RegisterAll`with 抽象（例如`typeof(IService)`），这也可以，因为请求被转发回容器。

但是，您的用例有所不同。你想注册一个完全相同类型的元素列表，但每个元素都有不同的配置值。为了使事情变得更加困难，您似乎希望将它们注册为瞬态而不是单例。通过不传递`RegisterAll`类型列表，但`IEnumerable<TService>`容器不创建和自动连接这些类型，我们称其为“容器不受控制”集合。

长话短说：我们如何注册？有多种方法可以做到这一点，但我个人喜欢这种方法：

```
string[] triggers = new[]
{
    @".\Triggers\TriggerWatch\SomeTrigger.txt",
    @".\Triggers\TriggerWatch\SomeOtherTrigger.txt"
};

container.RegisterAll<IFileWatcher>(
    from trigger in triggers
    select new FileWatcher(trigger,
        container.GetInstance<IFileSystem>())
); 
```

在这里，我们使用该方法注册一个 LINQ 查询（只是一个`IEnumerable<T>`） 。`RegisterAll`每次有人解析 a`IEnumerable<IFileWatcher>`时，它都会返回相同的查询，但由于该查询的 select 包含 a `new FileWatcher`，因此在迭代时总是返回新实例。使用以下测试可以看到这种效果：

```
var watchers = container.GetAllInstances<IFileWatcher>();
var first1 = watchers.First();
var first2 = watchers.First();
Assert.AreNotEqual(first1, first2, "Should be different instances");
Assert.AreEqual(first1.Trigger, first2.Trigger); 
```

正如这个测试所示，我们解析了一次集合，但每次迭代它（`.First()`迭代集合）时，都会创建一个新实例，但两个实例具有相同的`@".\Triggers\TriggerWatch\SomeTrigger.txt"`值。

如您所见，没有任何限制可以阻止您有效地执行此操作。但是，您可能需要换一种方式思考。

> 我也很好奇为什么首先需要 RegisterAll 存在。

这是一个非常明确的设计决策。你是对的，大多数其他容器只允许你做一堆相同类型的注册，当被要求收集时，所有的注册都会被返回。这样做的问题是很容易意外地再次注册类型，这是我想要防止的。

此外，所有容器都有不同的行为，即在请求单个实例而不是请求集合时返回注册。有些人返回第一个注册，其他人返回最后一个。我也想防止这种歧义。

最后但同样重要的是，请注意，注册相同类型的项目集合通常应该是一个例外。根据我的经验，在 90% 的情况下，当开发人员想要注册同一抽象的多种类型时，他们的设计会存在一些歧义。通过明确注册集合，我希望能够突出这一点。

> 我不能接受的是我需要改变和调整我的架构以满足某些工具的限制。

我同意这一点。你的架构应该是领先的，而不是工具。您应该相应地选择您的工具。

但请注意，Simple Injector 有很多限制，其中大部分限制都是故意选择的，以刺激用户进行简洁的设计。例如，每次您在代码中违反[SOLID 原则](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)之一时，都会遇到问题。在保持代码灵活性、测试可读性和[Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot/)可维护性方面会遇到问题。这实际上适用于所有 DI 容器，但对于 Simple Injector 可能更是如此。这是经过深思熟虑的，如果开发人员对应用 SOLID 原则不感兴趣，并且想要一个在任何给定情况下都可以工作的 DI 容器，那么 Simple Injector 可能不是这项工作的最佳工具。例如，将 Simple Injector 应用于遗留代码库可能会令人生畏。

我希望这能给 Simple Injector 的设计一些观点。

**更新**

如果你需要单例，这更简单。您可以按如下方式注册它们：

```
var fs = new RealFileSystem();

container.RegisterSingle<IFileSystem>(fs);

container.RegisterAll<IFileWatcher>(
    new FileWatcher(@".\Triggers\TriggerWatch\SomeTrigger.txt", fs),
    new FileWatcher(@".\Triggers\TriggerWatch\SomeOtherTrigger.txt", fs)
); 
```

**更新 2**

您明确要求`RegisterAll<T>(Func<T>)`支持懒惰地创建一个集合。事实上，已经有了对此的支持，只需使用`RegisterSingle<IEnumerable<T>>(Func<IEnumerable<T>>)`，如您在此处看到的：

```
container.RegisterSingle<IEnumerable<IFileWatcher>>(() =>
{
    return
        from 
    var list = new List<IFileWatcher>
    {
        new FileWatcher(@".\Triggers\TriggerWatch\SomeTrigger.txt", container.GetInstance<IFileSystem>()),
        new FileWatcher(@".\Triggers\TriggerWatch\SomeOtherTrigger.txt", container.GetInstance<IFileSystem>())        
    };

    return list.AsReadOnly();
}); 
```

`RegisterAll<T>(IEnumerable<T>)`实际上，这是一个方便的重载，最终会调用`RegisterSingle<IEnumerable<T>>(collection)`.

请注意，我明确返回了一个只读列表。这是可选的，但它是一种额外的安全机制，可防止集合被任何应用程序代码更改。使用`RegisterAll<T>`集合时会自动包装在只读迭代器中。

using 的唯一问题`RegisterSingle<IEnumerable<T>>`是，当您调用`container.Verify()`. 但是，在您的情况下，这不是问题，因为当集合的元素无法初始化调用时，调用`GetInstance<IEnumerable<IFileWatcher>>`也会失败，并且调用`Verify()`.

**更新 3**

如果我给人的印象是我的意思是你的设计是错误的，我深表歉意。我没有办法知道这一点。由于您明确询问了为什么缺少某些功能，因此我已尽力解释其背后的基本原理。但是，这并不意味着我认为您的设计不好，因为我无法知道。

> 让我们切换回维护者对良好设计的看法

我不知道你为什么认为这是我对好的设计的看法？每次在`SomeClass`系统中添加任务时都需要更改构造函数，这绝对不是一个好的设计。我们可以放心地同意这一点。这打破了OCP。我永远不会建议任何人做这样的事情。除了具有许多参数的构造函数之外，至少是一种设计气味。Simple Injector 的下一个小版本甚至添加了关于具有太多依赖关系的类型的诊断警告，因为这通常表明 SRP 违规。但是再次看看 Simple Injector 如何通过提供指导来“帮助”开发人员。

不过，我确实提倡使用通用接口，这就是 Simple Injector 设计特别优化的情况。ITask 接口就是一个很好的例子。在这种情况下，`ITask<T>`通常将是对您希望执行的某些业务行为的抽象，并且`T`是一个[参数对象](http://sourcemaking.com/refactoring/introduce-parameter-object)，其中包含要执行的操作的所有参数（您可以将其视为带有消息处理程序的消息）。然而，这仅在消费者需要使用一组特定参数（特定版本）执行操作时才有用`T`，例如它想要执行`ITask<ShipOrder>`。由于您在不提供参数的情况下执行一批所有任务，因此基于此的设计`ITask<T>`可能会很尴尬。

但是让我们假设它是合适的。让我们假设这一点，所以我可以解释在这种情况下如何优化 Simple Injector。在本次更新结束时，我将向您展示 Simple Injector 如何仍然能够为您提供帮助，所以请屏住呼吸。在您的代码示例中，您按如下方式注册通用任务：

```
container.Register<ITask<SomeGeneric1>(() => new FileWatchTask(container.GetInstance<IFileSystem>(),container.GetInstance<IMessageSubscriptionManagerService>(),configuration,container.GetAllInstances<IFileWatcher>()));
container.Register<ITask<SomeGeneric2>(() => new DefaultFtpTask(container.GetInstance<IFtpClient>(),container.GetInstance<IFileSystem>()));
container.Register<ITask<SomeGeneric3>(() => new DefaultImportFilesTask(container.GetInstance<IFileSystem>())); 
```

这是在系统中注册所有任务的一种相当痛苦的方式，因为每次更改任务实现的构造函数时，都必须更改此代码。Simple Injector 允许您通过查看它们的构造函数来自动连接类型。换句话说，Simple Injector 允许您将此代码简化为以下内容：

```
container.Register<ITask<SomeGeneric1>, FileWatchTask>();
container.Register<ITask<SomeGeneric2>, DefaultFtpTask>();
container.Register<ITask<SomeGeneric3>, DefaultImportFilesTask>(); 
```

这已经更易于维护，带来更好的性能，并允许您稍后添加其他有趣的场景，例如基于上下文的注入（因为 Simple Injector 控制着整个对象图）。这是在 Simple Injector 中注册事物的建议方法（如果可能，请避免使用 Func）。

尽管如此，当拥有一个以任务为中心元素的架构时，您可能会定期添加新的任务实现。这将导致有几十个注册行，并且每次添加任务时都必须返回此代码添加一行。然而，Simple Injector 具有批量注册功能，可让您将其缩减为一行代码：

```
// using SimpleInjector.Extensions;
container.RegisterManyForOpenGeneric(typeof(ITask<>), typeof(ITask<>).Assembly); 
```

通过调用此行，容器将搜索`ITask<T>`位于接口程序集中的所有实现，并为您注册它们。由于这是在运行时使用反射完成的，因此在将新任务添加到系统时不必更改该行。

既然你在谈论 OCP，IMO Simple Injector 对 OCP 有很好的支持。在某些方面，它甚至击败了所有其他框架。当我想到 OCP 时，我特别想到了一种特定的模式：装饰器模式。装饰器模式是应用 OCP 时非常重要的模式。例如，不应通过更改某些业务逻辑本身来添加横切关注点，而最好通过使用装饰器包装类来添加。使用 Simple Injector，只需一行代码即可添加装饰器：

```
// using SimpleInjector.Extensions;
container.RegisterDecorator(typeof(ITask<>), typeof(TransactionTaskDecorator<>)); 
```

这确保了（瞬态）在解决所有实现时`TransactionTaskDecorator<T>`被包裹起来。`ITask<T>`这些装饰器集成在容器的管道中，这意味着它们可以拥有自己的依赖项，可以拥有初始化程序，并且可以拥有特定的生活方式。装饰器可以轻松堆叠：

```
container.RegisterDecorator(typeof(ITask<>), typeof(TransactionTaskDecorator<>));
container.RegisterDecorator(typeof(ITask<>), typeof(DeadlockRetryTaskDecorator<>)); 
```

这将所有任务包装在事务装饰器中，并将该事务装饰器再次包装在死锁重试装饰器中。你甚至可以有条件地应用装饰器：

```
container.RegisterDecorator(typeof(ITask<>), typeof(ValidationTaskDecorator<>),
    context => ShouldApplyValidator(context.ServiceType)); 
```

如果您的装饰器具有泛型类型约束，Simple Injector 将在泛型类型约束匹配时自动应用装饰器，您无需对此做任何事情。并且由于 Simple Injector 生成表达式树并将它们编译为委托，这都是一次性成本。这并不意味着它是免费的，但您只需支付一次，而不是每次解决。

没有其他 DI 库可以像 Simple Injector 那样简单灵活地添加装饰器。

所以这就是 Simple Injector 真正闪耀的地方，但这对你没有多大帮助:-)。在这种情况下，通用接口对您没有帮助，但即使在您的情况下，您也可以使您的注册更易于维护。如果您在系统中有许多任务实现（也就是说，远远多于三个），您可能能够自动化这样的事情：

```
var taskTypes = (
    from type in typeof(ITask).Assemby.GetTypes()
    where typeof(ITask).IsAssignableFrom(type)
    where !type.IsAbstract && !type.IsGenericTypeDefinition
    select type)
    .ToList();

// Register all as task types singleton
taskTypes.ForEach(type => container.Register(type, type, Lifestyle.Singleton));

// registers a list of all those (singleton) tasks.
container.RegisterAll<ITask>(taskTypes); 
```

或者，使用 Simple Injector 2.3 及更高版本，您可以将`Registration`实例直接传递到`RegisterAll`方法中：

```
var taskTypes =
    from type in typeof(ITask).Assemby.GetTypes()
    where typeof(ITask).IsAssignableFrom(type)
    where !type.IsAbstract && !type.IsGenericTypeDefinition
    select type;

// registers a list of all those (singleton) tasks.
container.RegisterAll(typeof(ITask),
    from type in taskTypes
    select Lifestyle.Singleton.CreateRegistration(type, type, container)); 
```

但是，这确实假设所有这些任务实现都有一个公共构造函数，并且所有构造函数参数都是可解析的（没有配置值，例如 int 和 string）。如果不是这种情况，有一些方法可以更改框架的默认行为，但是如果您想对此有所了解，最好将该讨论移至新的 SO 问题。

再次，如果我惹恼了你，我很抱歉，但我宁愿惹恼一些开发人员，也不愿错过帮助其他人的机会:-)

# javascript - 谷歌电视模拟器没有正确显示我的网站

> ID：15295160
> 
> 赞同：0
> 
> 时间：2013-03-08T13:34:06.687
> 
> 标签：javascript, android, web, android-emulator, google-tv

我做了一个网页来以 HTML5 显示不同的视频，并且网络工作。现在我想做一个谷歌电视应用程序并展示这个网络并使用它。我尝试使用 webView 组件，但带有 javascript 的部分不起作用并且像纯文本（$function ...）一样显示，其余部分没有任何格式显示。这是我的活动：

```
public class Test extends Activity {

WebView mWebView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.vid);
    mWebView = (WebView) findViewById(R.id.web);
    mWebView.getSettings().setJavaScriptEnabled(true);

    if (savedInstanceState != null) {
        mWebView.restoreState(savedInstanceState);
    } else {
        mWebView.loadUrl("http://192.168.2.103:8080/VirtualSTBJSF/vid.xhtml");
        mWebView.setWebViewClient(new verMiWeb());
    }

}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    mWebView.saveState(outState);
}

@Override
public void onStop() {
    super.onStop();
    mWebView.stopLoading();
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

    if (keyCode == KeyEvent.KEYCODE_BACK && mWebView.canGoBack()) {

        mWebView.goBack();

    }
    return super.onKeyDown(keyCode, event);
}
}

class verMiWeb extends WebViewClient {
@Override
public boolean shouldOverrideUrlLoading(WebView view, String url) {
    view.loadUrl(url);
    return true;
}

 } 
```

和布局：

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <WebView
            android:id="@+id/web"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            />

    </LinearLayout> 
```

任何想法？感谢您的回答。

# google-chrome-devtools - Chrome 开发工具 - 时间线 API

> ID：15295164
> 
> 赞同：2
> 
> 时间：2013-03-08T13:34:18.133
> 
> 标签：google-chrome-devtools

您知道是否可以通过某种 API 访问时间线？我想运行一些 JS 代码来开始记录事件，然后停止它并通过 post ajax 调用将 HAR 保存到我的数据库中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T07:41:27.977

您可以使用[chrome.debugger api 进行扩展](https://developer.chrome.com/stable/extensions/debugger.html)

或者

[远程调试协议](https://developers.google.com/chrome-developer-tools/docs/remote-debugging)

# java - 我可以以某种方式从新的 Java 程序运行以前编译的 Java 字节码吗？

> ID：15295169
> 
> 赞同：0
> 
> 时间：2013-03-08T13:34:32.337
> 
> 标签：java, bytecode

是否可以首先将一组 Java 源代码文件编译成字节码，然后运行该字节码——不是直接运行，而是通过向另一个 java 程序添加命令——这样这个新的 java 程序（在它的各种类/函数中）运行之前编译的java字节码？

如果这是可能的，那么执行此操作所需的命令是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T13:36:45.233

绝对 - 这就是图书馆的全部意义所在！它们通常作为 jar 文件分发，但您不必*使用*jar 文件来重用代码。

您需要做的就是确保它在编译时和执行时都在类路径中。

例如，创建以下文件：

**lib\p1\Hello.java**：

```
package p1;

public class Hello {
    public static void sayHi(String name) {
        System.out.println("Hi " + name + "!");
    }
} 
```

**app\p2\Greeter.java**：

```
package p2;

import p1.Hello;

public class Greeter {
    public static void main(String[] args) {
        Hello.sayHi(args[0]);
    }
} 
```

现在让我们编译我们的“库”：

```
$ cd lib
$ javac -d . p1/Hello.java
$ cd .. 
```

现在，通过将它添加到类路径中，我们可以在我们的“应用程序”中使用它：

```
$ javac -d . -cp ../lib p2/Greeter.java
$ java -cp .:../lib p2.Greeter Jon
Hi Jon! 
```

（这一切都适用于 Windows，只是在最后一行的联合类路径中使用“;”而不是“:”。*）*

# java - DOM 解析器 setExpandEntityReferences(false) 生成实体引用和扩展文本节点

> ID：15295170
> 
> 赞同：2
> 
> 时间：2013-03-08T13:34:36.640
> 
> 标签：java, xml, dom, xml-parsing

我想解析一个 XML 文档并使其表示尽可能接近源，特别是我想获得 ENTITY_REFERENCE 节点。但是我得到了 ENTITY_REFERENCE 节点，后跟一个 TEXT_NODE 代表实体引用的扩展。

```
import java.io.IOException;
import java.io.PrintWriter;
import java.io.StringReader;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.w3c.dom.Document;
import org.w3c.dom.ls.DOMImplementationLS;
import org.w3c.dom.ls.LSOutput;
import org.w3c.dom.ls.LSSerializer;
import org.xml.sax.EntityResolver;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

public class Main {

    public static void main(String[] args) throws Exception {
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        factory.setExpandEntityReferences(false);
        DocumentBuilder builder = factory.newDocumentBuilder();

        final String xml = new String(
                    "<?xml version=\"1.0\"?>" + 
                    "<!DOCTYPE simple SYSTEM \"simple.dtd\" [" + 
                    "<!ENTITY a \"abhijeet\">" + 
                    "]>" +
                    "<simple> &a;   </simple>");

        builder.setEntityResolver(new EntityResolver() {

            @Override
            public InputSource resolveEntity(String publicId, String systemId) throws SAXException, IOException {
                return new InputSource(new StringReader(""));
            }
        });
        Document document = builder.parse(new InputSource(new StringReader(xml)));

        final DOMImplementationLS domImplementationLS = (DOMImplementationLS) builder.getDOMImplementation();
        LSSerializer LSSerializer = domImplementationLS.createLSSerializer();
        LSOutput LSOutput = domImplementationLS.createLSOutput();
        LSOutput.setCharacterStream(new PrintWriter(System.out));
        LSSerializer.write(document, LSOutput);
    }

} 
```

如果你喜欢在这里运行代码：http: [//ideone.com/Rldi2S](http://ideone.com/Rldi2S)

热点结果：Java(TM) SE Runtime Environment (build 1.7.0_15-b03) Java(TM) SE Runtime Environment (build 1.7.0_17-b02) Java(TM) SE Runtime Environment (build 1.6.0_26-b03)

是一样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE simple SYSTEM "simple.dtd" [<!ENTITY a 'abhijeet'>
]>
<simple> &a;abhijeet   </simple> 
```

其中“&a;” 是实体引用节点，后跟它的扩展“abhijeet”文本节点。

我的预期是：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE simple SYSTEM "simple.dtd" [<!ENTITY a 'abhijeet'>
]>
<simple> &a;   </simple> 
```

**是我缺乏知识、代码中的错误还是解析器坏了？**

# javascript - JQuery：在“显示更多”附加 HTML 后重新应用 document.ready

> ID：15295171
> 
> 赞同：0
> 
> 时间：2013-03-08T13:34:37.410
> 
> 标签：javascript, jquery

我有一个显示搜索结果列表的页面。使用脚本 trunk8 将标题截断为 1 行。这在标题中激活，如下所示：

```
$(document).ready(function($){
    $('.resulttitle').trunk8({
      lines: 1
    });
}); 
```

这确保任何长标题只有一行并以`...`

页面底部是一个“显示更多”按钮，它通过在后台加载另一个页面来获取更多结果，该页面返回附加结果的 HTML 结果，然后附加到 div。

我的问题是附加到先前结果的新结果不会被截断，因为它们不存在于文档加载中。

如何让 trunk8 函数应用于这些附加结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:52:16.487

我想你正在做一个 AJAX 调用来获得额外的结果。然后你可以在成功获取项目并将它们添加到 div 后运行“trunk8”脚本。

```
$.get( your ajax call parameters ).done(function(data){
    //you add the items to the div here
    $('.resulttitle').trunk8({
    lines: 1
    });
}); 
```

# jquery - jQuery slideDown slideUp 点击

> ID：15295172
> 
> 赞同：0
> 
> 时间：2013-03-08T13:34:37.920
> 
> 标签：jquery, css, slidedown, slideup

我是 jQuery-CSS 新手，但我想将一个 div 移到另一个。我只是不知道该怎么做。

我想要实现的是向下滑动一个 div，但我不知道如何定位它或使用正确的属性。

这是我尝试过的：

```
$("#two").click(function () {
    $('#one').slideUp(500);
}); 
```

[http://jsfiddle.net/HUbHN/2/](http://jsfiddle.net/HUbHN/2/)

slideUp 效果很好，但我希望绿色条向下移动到红色。

我怎样才能实现这种行为？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:46:27.047

你需要这样的东西吗： **[样品](http://jsfiddle.net/HUbHN/3/)**

```
$("#two").click(function () {
  $('#one').slideUp(500, function(){
       $(this).insertAfter("#two").slideDown(500);
  });
}); 
```

这是修改后的版本：[Sample2](http://jsfiddle.net/HUbHN/4/)

```
$("#main").on('click', ' div:last', function () {
  $(this).prev().slideUp(500, function(){
      $(this).insertAfter($(this).next()).slideDown(500);
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:06:05.983

我在想你想要这样的东西 [http://jsfiddle.net/HUbHN/6/](http://jsfiddle.net/HUbHN/6/)

```
#main{
width: 400px;
height: 400px;
background-color: black;
position:relative;
}

 #one {
width: 150px;
height: 100px;
background-color: green;
position:relative;
}

#two {
width: 150px;
height: 150px;
background-color: red;
position:absolute;
top:100px;
}

//js

$("#two").click(function () {
$('#one').animate({'height': '10px', 'top': '99px'}, 1000);
}) 
```

# cakephp-2.1 - 鉴于cakephp，如何在html（标签）助手中使用文本助手的截断？

> ID：15295174
> 
> 赞同：0
> 
> 时间：2013-03-08T13:34:39.003
> 
> 标签：cakephp-2.1

echo $this->Html->tag('span',$user['User']['user_title'], array('class' => "nameOfUser");

### 在此标签中，我想将 user_title 截断为 20 个字符。那么我如何在 HTML 标签中使用截断？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T23:32:13.060

使用文本助手；[http://book.cakephp.org/2.0/en/core-libraries/helpers/text.html#texthelper](http://book.cakephp.org/2.0/en/core-libraries/helpers/text.html#texthelper)

```
echo $this->Html->tag('span',
    $this->Text->truncate($user['User']['user_title'], 20),
    array('class' => "nameOfUser")
); 
```

# java - 访问 Javascript 下拉列表中的列表

> ID：15295176
> 
> 赞同：0
> 
> 时间：2013-03-08T13:34:40.860
> 
> 标签：java, javascript, jsp

我试图访问 Javascript 下拉列表中的列表。所以我有一个名为的对象`System`（这是存储在下拉列表中的对象），它有一个`Collections`. 我是 Javascript 新手，不确定访问列表的正确语法应该是什么。

所以这是包含下拉列表的表单：

```
<form:form id="systemForm" method="post" action="/application/SystemSave" commandName="systemForm">
    <form:select path="uSelectedSystemId" id="uSystemId">
        <c:forEach var="system" items="${systemsList}">
            <form:option value="${system.id}" label="${system.name}" />
        </c:forEach>
    </form:select> 
</form:form> 
```

这是`System`对象的设置（来自Java）：

```
public class System {
    private Long id;
    private String name;
    private List<Collection> collections;
} 
```

这是`SystemForm`用于存储值的设置：

```
public class SystemForm {
private String fUpdateSystemName;
private String uSelectedSystemId;
    private List<Collection> uCollections;
} 
```

我想我需要在循环中存储值的某种隐藏字段，但我不确定正确的语法。我可以重新访问数据库并`Collections`根据数据获取所有内容，`systemID`但我认为这不是正确的做事方式，因为信息应该已经可用。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:37:19.110

尝试这个

```
 <form:form id="systemForm" method="post" action="/application/SystemSave" commandName="systemForm">
   <select  id="uSystemId">
        <c:forEach var="system" items="${systemsList}">
            <option value="${system.id}" label="${system.name}" />
        </c:forEach>
    </select> 
</form:form> 
```

我不知道这是否会满足您的要求。

# file - 不小心删除了 page.xml。我该如何取回它？

> ID：15295180
> 
> 赞同：3
> 
> 时间：2013-03-08T13:34:45.450
> 
> 标签：file, magento, layout, base

我不小心从我的目录中删除了文件 app/design/frontend/base/default/layout/page.xml。

我的理解是这是 Magento 附带的“默认”page.xml 文件。我怎样才能找回这个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:58:29.570

您可以从以下网址获取文件： [http ://svn.magentocommerce.com/source/branches/1.7/app/design/frontend/base/default/layout/page.xml](http://svn.magentocommerce.com/source/branches/1.7/app/design/frontend/base/default/layout/page.xml)

如果您有其他版本的 Magento，您可能需要调整 URL 中的版本。如果这不起作用，您也可以重新下载 Magento 并搜索包中的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T02:41:52.720

另一种方法是转到[www.magentocommerce.com/download](http://www.magentocommerce.com/download)，选择发布存档选项卡，获取您正在使用的版本的 .zip 存档并将其解压缩到临时文件夹中。然后，您将所有组成 Magento 的文件都存储在与您网站上完全相同的目录树中，非常容易检索。

就个人而言，我将当前版本、以前版本和下一个版本的档案保存在我的升级路径中。这样，如果我的自定义模板和模块中出现一些奇怪的代码，我总是可以轻松参考。

# java - Maven Surefire 2.13 无法在 Windows 上分叉

> ID：15295183
> 
> 赞同：3
> 
> 时间：2013-03-08T13:34:49.460
> 
> 标签：java, windows, maven

我有一个包含许多测试用例的项目，我使用 Maven surefire 插件 2.13 对其进行编译。当我设置`forkmode = none`一切正常时，但是当我省略该条目时，默认值`forkmode`变为`once`并且我的项目失败：

```
Forking command line: cmd.exe /X /C ""C:\Program Files\Java\jdk1.6.0_37\jre\bin\java" -jar G:\Gottware-server\core\math\target\surefire\surefirebooter
7758025909061587587.jar G:\Gottware-server\core\math\target\surefire\surefire8735550212668630533tmp G:\Gottware-server\core\math\target\surefire\suref
ire_08386349728753606434tmp"
The system cannot find the path specified. 
```

看起来这是一个操作系统问题，我使用的是 Windows 7。可能出了什么问题？很好奇的是，在成功构建之后，我也遇到了同样的错误：

```
[INFO] -----------------------------------------------
[INFO] BUILD SUCCESS
[INFO] -----------------------------------------------
[INFO] Total time: 15.504s
[INFO] Finished at: Fri Mar 08 15:08:54 CET 2013
[INFO] Final Memory: 13M/353M
[INFO] -----------------------------------------------
The system cannot find the path specified. 
```

事实上，我已经调试了我的 mvn.bat maven 的最后一行

```
cmd /C exit /B %ERROR_CODE% 
```

这根本不再起作用返回：

```
The system cannot find the path specified. 
```

我进一步调试：

```
U:\>cmd.exe
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.
The system cannot find the path specified. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:43:17.580

在您粘贴的行中，我看到一个双引号：

```
Forking command line: cmd.exe /X /C ""C:\Program
                                   ^^^^ 
```

也许您为 JAVA_HOME （或您定义 Java 路径的其他地方）设置了错误的值。这也可以解释为什么它不会在其他系统上失败：那里有一个不同的（并且正确的）JAVA_HOME。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T04:08:23.597

surefire 插件并不总是报告友好的错误。我可以考虑检查的几件事：

*   有多少磁盘空间可用`G:\Gottware-server\...`？您是否会遇到磁盘配额（在 NAS 共享上）或者您的笔记本电脑驱动器已满？
*   检查本地工件存储库的位置。你有没有达到配额/房间用完？
*   构建机器上有多少可用内存？您是否有足够的内存来在单独的 JVM 中运行测试，如果有，JVM 是否配置为具有足够的内存？您可以尝试使用该`<argLine>`属性来配置分叉 VM 的内存设置。（我还帮助了一些内存设置很大的人，`<argLine>`在运行 Eclipse 和多个浏览器窗口等时，他们的机器上的内存设置更多。在这种情况下，降低分叉 JVM 的内存设置解决了这个问题。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-10T01:56:07.370

我遇到了同样的错误，因为我在 cmd 启动时自动启动了一个 bat 文件（我猜是一些链接路径问题）。

我将引用这个答案来解释我的解决方案：[https ://superuser.com/questions/144347/is-there-windows-equivalent-to-the-bashrc-file-in-linux#answer-916478](https://superuser.com/questions/144347/is-there-windows-equivalent-to-the-bashrc-file-in-linux#answer-916478)

我的脚本被称为`bashrc.bat`，我把它放在我的`%USERPROFILE%`文件夹下。

在注册表编辑器 ( `regedit`) 中，我找到了以下条目：

```
HKEY_LOCAL_MACHINE\Software\Microsoft\Command Processor 
```

然后添加了一个名为 Autorun 的键，其值为 %USERPROFILE%\bashrc.bat

当我从注册表中删除此键时，再次启动 cmd 后，该行`The system cannot find the path specified.`不再显示，并且surefire可以恢复其活动。

# asp.net-mvc - iis 7 重定向 (?) 问题

> ID：15295185
> 
> 赞同：0
> 
> 时间：2013-03-08T13:34:57.987
> 
> 标签：asp.net-mvc, iis, iis-7

我有一个在这里运行的 mvc 应用程序：

```
sometestingdemo.bla.com/mvcapp 
```

在我们的测试服务器上。它通常在生产服务器的“顶级域级别”运行，如下所示：

```
bladibla.com 
```

mvc 生成的 html 包含如下代码：

```
<link href="/content/css/global/somecoolstyles.css" rel="stylesheet" type="text/css" /> 
```

这显然适用于生产服务器，但不适用于测试服务器。我有什么办法来解决这个问题（最好不要更改 mvc 代码——如果可能的话）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:44:55.073

`Url.Content()`帮助程序生成应用程序在 IIS 中托管的虚拟目录的根目录的相对路径。因此，如果在您的测试环境中，您将应用程序托管在`mvcapp`仍然会产生正确输出的虚拟目录上。

您正在使用 url 帮助程序，而不是将位置硬编码到此 CSS，不是吗？这是链接 CSS 文件的正确方法：

```
<link href="@Url.Content("~/content/css/global/somecoolstyles.css")" rel="stylesheet" type="text/css" /> 
```

当然，如果您使用的是 ASP.NET MVC 4（依赖于 Razor v2.0），您也可以将其简化为：

```
<link href="~/content/css/global/somecoolstyles.css" rel="stylesheet" type="text/css" /> 
```

这将隐式使用 url 帮助程序来生成正确的路径。

另一方面，如果您已将 url 硬编码到此 CSS 文件中，那么恐怕您在这里很受宠若惊。

# c# - 如何使用带有 c# 的 asp.net 在网页上绘制一个矩形？

> ID：15295193
> 
> 赞同：-6
> 
> 时间：2013-03-08T13:35:36.043
> 
> 标签：c#, asp.net, draw

是否可以在 C# 中的网站表单上绘制形状、线条和其他图形对象

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T13:37:51.580

这将在简单的 html 中绘制矩形。

```
<div style="width:500px;height:100px;border:1px solid #000;">This is a rectangle!</div> 
```

如果您想在 HTML5 中绘图，请按照[HTML5 中的 url Ractangle](http://www.w3schools.com/html/html5_canvas.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:36:34.297

也许是这样的：

```
<%@ Page Language="C#" ContentType="image/jpeg" %>
<%@ Import Namespace="System.Drawing" %>
<%@ Import Namespace="System.Drawing.Text" %>
<%@ Import Namespace="System.Drawing.Imaging" %>
<%@ Import Namespace="System.Drawing.Drawing2D" %>

<%

Response.Clear();
int height = 100;
int width = 200;
Random r = new Random();
int x = r.Next(75);

Bitmap bmp = new Bitmap(width, height, PixelFormat.Format24bppRgb);
Graphics g = Graphics.FromImage(bmp);

g.TextRenderingHint = TextRenderingHint.AntiAlias;
g.Clear(Color.Orange);
g.DrawRectangle(Pens.White, 1, 1, width-3, height-3);
g.DrawRectangle(Pens.Gray, 2, 2, width-3, height-3);
g.DrawRectangle(Pens.Black, 0, 0, width, height);
g.DrawString("The Code Project", new Font("Arial", 12, FontStyle.Italic), 
SystemBrushes.WindowText, new PointF(x,50) );

bmp.Save(Response.OutputStream, ImageFormat.Jpeg);
g.Dispose();
bmp.Dispose();
Response.End();

%> 
```

来源：

[源绘图 Web 图形](http://www.codeproject.com/Articles/1827/Web-Graphics-On-The-Fly-in-ASP-NET)

# algorithm - 我可以轻松跳过 Bresenham 线算法中的像素吗？

> ID：15295195
> 
> 赞同：0
> 
> 时间：2013-03-08T13:35:41.317
> 
> 标签：algorithm, optimization, graphics, bresenham

我有一个程序，它使用[Bresenham 的线算法](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)来扫描一行中的像素。这是读取像素而不是写入像素，在我的特定情况下，读取它们的成本很高。

但是，我可以确定不需要读取某些像素范围。它看起来像这样：

```
Normal scan of all pixels:

*start
 \
  \
   \
    \
     \
      *end

Scan without reading all pixels:

*start
 \
  \
        - At this point I know I can skip (for example) the next 100 pixels
          in the loop. Crucially, I can't know this until I reach the gap.
     \
      *end 
```

中间的间隙要快得多，因为我可以遍历像素而不读取它们。

但是，我可以以任何方式修改循环，直接在循环内向前跳转 100 个像素，直接在行算法中提前 100 步计算所需的值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:31:06.590

你的主循环看起来基本上是这样的：

```
 while (cnt > 0) // cnt is 1 + the biggest of abs(x2-x1) and abs(y2-y1)
  {
    ReadOrWritePixel(x, y);

    k += n; // n is the smallest of abs(x2-x1) and abs(y2-y1)
    if (k < m) // m is the biggest of abs(x2-x1) and abs(y2-y1)
    {
      // continuing a horizontal/vertical segment
      x += dx2; // dx2 = sgn(x2-x1) or 0
      y += dy2; // dy2 = sgn(y2-y1) or 0
    }
    else
    {
      // beginning a new horizontal/vertical segment
      k -= m;
      x += dx1; // dx1 = sgn(x2-x1)
      y += dy1; // dy1 = sgn(y2-y1)
    }

    cnt--;
  } 
```

因此，跳过一些 q 像素相当于进行以下调整（除非我在某处犯了错误）：

*   cnt [new] = cnt [old] - q
*   k[新]= (k[旧]+ n * q) % m
*   x[新]= x[旧]+ ((k[旧]+ n * q) / m) * dx1 + (q - ((k[旧]+ n * q) / m)) * dx2
*   y[新]= y[旧]+ ((k[旧]+ n * q) / m) * dy1 + (q - ((k[旧]+ n * q) / m)) * dy2

请注意，/ 和 % 是整数除法和模运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:08:20.310

*Bresenhams 中点算法通过将数字差*delta_x = (by-ay)、delta_y = (ax-bx)相加来计算点与从 (ax,ay)->(bx,by) 的理论线的“距离” 。

因此，如果要跳过 7 个像素，则必须添加 accum += 7*delta_x; 然后除以 delta_y 可以检查应该在 y 方向上移动多少像素并取余数 accum = accum % delta_y 一个应该能够继续在正确的位置。

好消息是该算法源于避免除法的必要性......

*免责声明*：任何告诉可能需要调整半增量。

# vb.net - 将节点添加到顶部

> ID：15295196
> 
> 赞同：1
> 
> 时间：2013-03-08T13:35:48.943
> 
> 标签：vb.net, winforms, treeview

每当我向 a 添加新项目（*root*或*child*）时`treeview`，它都会*附加*到列表中（到整个树的底部）。

有没有办法让我始终可以将新项目（即使是子节点）插入到列表的最顶部，或者设置插入项目的顺序？

**PS**我知道如何找到最高根，但是我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T13:55:17.510

而不是添加，尝试使用插入：

```
If TreeView1.Nodes.Count > 0 Then
  TreeView1.Nodes(0).Nodes.Insert(0, "First Child Node")
End If 
```

或对于根节点：

```
TreeView1.Nodes.Insert(0, "First Root Node") 
```

# jquery - 如何在 phantomJS 中执行 jQuery 承诺？

> ID：15295197
> 
> 赞同：9
> 
> 时间：2013-03-08T13:35:49.787
> 
> 标签：jquery, node.js, phantomjs

我正在尝试在服务器端使用 nodejs 和 phantomjs 来进行我们网站的 SEO。虽然 ajax 工作正常，但我无法执行我在代码中使用的自定义承诺。我如何让 phantomJS 等到承诺得到解决。以下是我编码的内容。

```
$('body').addClass('before-dom-ready');

$(function() {
    $('body').addClass('after-dom-ready');

    var dfrd = $.Deferred(),
            promise = dfrd.promise();

    setTimeout(function() {
        dfrd.resolve();
    }, 5000);

    promise.done(function() {
        $('body').addClass('promise-executed');
    });

}); 
```

phantomJS 添加了 'before-dom-ready' 和 'after-dom-ready' 类，但我无法在主体上获得 'promise-executed' 类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-28T18:59:26.997

PhantomJs 不会自动等待所有待处理脚本的结束。在 onload 事件上调用 WebPage#onLoadFinished。

至于大多数脚本，这里的想法是等到“某事”完成或为真。我强烈建议您测试[waitfor.js](https://github.com/ariya/phantomjs/blob/master/examples/waitfor.js)。在 PhantomJs 中理解这个例子非常重要。

我想你的例子就是一个例子，但让我提出一个答案。

**网页**

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.0.min.js"></script>
    <title>Test</title>
</head>
<body id="body">

    <script type="text/javascript">
        //alert('hello');
        $('body').addClass('before-dom-ready');

        $(function () {
            $('body').addClass('after-dom-ready');

            var dfrd = $.Deferred(),
                    promise = dfrd.promise();

            setTimeout(function () {
                dfrd.resolve();
            }, 5000);

            promise.done(function () {
                $('body').addClass('promise-executed');
                $('body').text('Hello World !');
            });

        });
    </script>
</body>
</html> 
```

**PhantomJs 脚本**

```
var page = require('webpage').create();
var system = require('system');

function waitFor(testFx, onReady, timeOutMillis) {
    var maxtimeOutMillis = timeOutMillis ? timeOutMillis : 10000, //< Default Max Timout is 10s
        start = new Date().getTime(),
        condition = false,
        interval = setInterval(function () {
            if ((new Date().getTime() - start < maxtimeOutMillis) && !condition) {
                // If not time-out yet and condition not yet fulfilled
                condition = (typeof (testFx) === "string" ? eval(testFx) : testFx()); //< defensive code
            } else {
                if (!condition) {
                    // If condition still not fulfilled (timeout but condition is 'false')
                    //console.log("'waitFor()' timeout");
                    typeof (onReady) === "string" ? eval(onReady) : onReady();
                    clearInterval(interval);
                    //phantom.exit(1);
                } else {
                    // Condition fulfilled (timeout and/or condition is 'true')
                    console.log("'waitFor()' finished in " + (new Date().getTime() - start) + "ms.");
                    typeof (onReady) === "string" ? eval(onReady) : onReady(); //< Do what it's supposed to do once the condition is fulfilled
                    clearInterval(interval); //< Stop this interval
                }
            }
        }, 500); //< repeat check every 500ms
};

if (system.args.length != 1) {
    console.log('invalid call');
    phantom.exit(1);
} else {
    //adapt url to your context
    page.open('http://localhost:9231/demo.html', function (status) {
        if (status !== 'success') {
            console.log('Unable to load the address!');
            phantom.exit();
        } else {
            waitFor(
                function () {
                    return page.evaluate(function () {
                        return $('body').hasClass('promise-executed');
                    }) > 0;
                },
                function () {
                    page.render('page.png');
                    phantom.exit();
                }, 10000);
        }
    });
} 
```

基本上，`waitFor`如果 body 有一个名为`'promise-executed'`.

# antlr4 - ANTLR 4：动态令牌

> ID：15295198
> 
> 赞同：6
> 
> 时间：2013-03-08T13:35:51.810
> 
> 标签：antlr4

鉴于：

```
grammar Hbs;

var: START_DELIM ID END_DELIM;

START_DELIM: '{{';

END_DELIM: '}}'; 
```

我想知道如何在运行时更改为例如`START_DELIM`和.`END_DELIM``<%``%>`

有谁知道如何在 ANTLR 4 中做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T19:55:17.113

有一种方法，但您需要将您的语法与目标语言联系起来（到目前为止，唯一的目标是 Java）。

这是一个快速演示（我包括一些评论来澄清事情）：

```
grammar T;

@lexer::members {

  // Some default values
  private String start = "<<";
  private String end = ">>";  

  public TLexer(CharStream input, String start, String end) {
    this(input);
    this.start = start;
    this.end = end;
  }

  boolean tryToken(String text) {

    // See if `text` is ahead in the CharStream.
    for(int i = 0; i < text.length(); i++) {

      if(_input.LA(i + 1) != text.charAt(i)) {

        // Nope, we didn't find `text`.
        return false;
      }
    }

    // Since we found the text, increase the CharStream's index.
    _input.seek(_input.index() + text.length() - 1);

    return true;
  }
}

parse
 : START ID END
 ;

START
 : {tryToken(start)}? . 
   // The `.` is needed because a lexer rule must match at least 1 char.
 ;

END
 : {tryToken(end)}? .
 ;

ID
 : [a-zA-Z]+
 ;

SPACE
 : [ \t\r\n] -> skip
 ; 
```

是`{ ... }?`语义谓词。见：[https ://github.com/antlr/antlr4/blob/master/doc/predicates.md](https://github.com/antlr/antlr4/blob/master/doc/predicates.md)

这是一个小测试类：

```
import org.antlr.v4.runtime.*;
import org.antlr.v4.runtime.tree.*;

public class Main {

  private static void test(TLexer lexer) throws Exception {
    TParser parser = new TParser(new CommonTokenStream(lexer));
    ParseTree tree = parser.parse();
    System.out.println(tree.toStringTree(parser));
  }

  public static void main(String[] args) throws Exception {

    // Test with the default START and END.
    test(new TLexer(new ANTLRInputStream("<< foo >>")));

    // Test with a custom START and END.
    test(new TLexer(new ANTLRInputStream("<? foo ?>"), "<?", "?>"));
  }
} 
```

运行演示如下：

## *尼克斯

```
java -jar antlr-4.0-complete.jar T.g4
javac -cp .:antlr-4.0-complete.jar *.java
java -cp .:antlr-4.0-complete.jar Main 
```

## 视窗

```
java -jar antlr-4.0-complete.jar T.g4
javac -cp .;antlr-4.0-complete.jar *.java
java -cp .;antlr-4.0-complete.jar Main 
```

您会看到以下内容被打印到控制台：

```
(parse << foo >>)
(parse <? foo ?>) 
```

# javascript - 防止来自 html 检查器的安全风险？

> ID：15295200
> 
> 赞同：3
> 
> 时间：2013-03-08T13:35:54.670
> 
> 标签：javascript, html, django

我最近在搞乱一个 django 本地服务器项目，我有一个像这样的输入

```
<form....{% csrf_token %}
....
<input type="text" value="foo" readonly />
....
</form> 
```

现在输入的值应该保持我想要的方式（“foo”），但是我使用了谷歌浏览器检查并且能够更改只读输入的值并将新值传递给服务器，从而保存了错误价值。

所以我有几个问题：

1.  防止此类安全风险的一般规则或心理检查表是什么？

2.  ~~我可以使用 JavaScript 控制台并像这样损坏数据吗？~~更新：是的。

3.  那么我基本上必须在服务器端进行所有检查吗？

4.  如果不是 3，那么受 html/js 检查器保护的客户端验证是什么？

编辑：

我从到目前为止的答案中猜测，3 是肯定的。所以我还应该为客户端安全/检查而烦恼吗？他们真的会让我更安全还是只是一种虚假的安全感（这很糟糕）？我是否应该进行客户端检查以可能在服务器端保存一些检查，这样我的性能可能会更好？ **基本上：我应该做多少客户端检查？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:42:35.640

为了安全起见，您不能在客户端回复 Javascript 或任何内容。只要确保您的服务器是安全的。

例如，您可以 telnet 到端口并将适当的数据发送到服务器。这将通过Javascript（或任何其他技术（在客户端）阻止和检查。

只需使用 Javascript 即可让用户在客户端上的体验更愉快、响应速度更快。请勿将其用于安全性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:43:59.380

1.  永远不要相信用户发送的数据（cookie、会话、HTTP 请求中的参数……）。用户发送的所有数据都可以修改。

2.  是的当然

3.  它还有待完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T13:54:34.400

问问自己为什么首先需要那个只读值。据推测，当用户第一次请求表单时，是您的代码生成了它。那么，当用户请求表单时，您的代码可以使用哪些表单，而当用户提交表单时该表单不可用？不应该有任何东西，这应该使您得出这样的结论，即该字段可以在提交时轻松生成，而根本不需要出现在表单中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T13:41:07.607

您的服务器代码必须是最终权威，它根本不能依赖客户端所做的验证质量。查看所有客户端，无论是 HTML 还是其他容易受到狡猾用户和错误编码人员影响的客户端。

# jquery - 如何通过 jquery $.post 传递完整表单 + 额外数据？

> ID：15295201
> 
> 赞同：1
> 
> 时间：2013-03-08T13:35:56.200
> 
> 标签：jquery, ajax, jquery-post

我通过 jquery $.post 将我的表单数据发送到某个 PHP 页面，但现在我想在这个发送的包中添加一些额外的数据。这是我的代码：

```
 $.post("/settings/filter", $("#filter_form").serialize() , function(data,status,xhr)
    {
            my_data = data;

    }) 
```

我试着把它改成

```
 $.post("/settings/filter", {$("#filter_form").serialize(), extra_variable:'extra1'} , function(data,status,xhr) 
```

但这是错误的，怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T13:40:30.180

您可以使用字符串连接

```
$("#filter_form").serialize() + '&extra_variable=extra1' 
```

这是因为`$("#filter_form").serialize()`返回一个字符串表示形式`params1=x&params2=y`，如果数据是字符串，那么 jQuery 将不再对数据进行任何处理。所以你需要做一个字符串连接来附加你需要的额外值。

# android - 如何使 Seekbar 不可触摸？

> ID：15295203
> 
> 赞同：1
> 
> 时间：2013-03-08T13:36:02.280
> 
> 标签：android, progress-bar, seekbar

我有一个场景，我必须使用进度条显示某个级别，但根据设计，这个进度条上也有一个拇指状的圆圈。

现在用户不应该通过触摸或使用按键来更改此条的值。

“拇指”在搜索栏中可用，但在进度栏中不可用，但搜索栏能够获取焦点和触摸事件，而这在我的情况下不应该发生。

因此，为了处理焦点并使我的搜索栏“foussable = false”和“focussableInTouchMode = false”，但我应该怎么做才能让它几乎像进度条一样不可触摸？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-24T10:34:36.653

另一种选择是调用 setOnTouchListener 并使用始终返回 false 的侦听器。请注意，此 UI 会让用户感到困惑，因为您希望搜索栏看起来像一个活动的，但不像活动的搜索栏。为了 UI 一致性，使用 setEnabled(false) 更加一致，并且颜色不同是有充分理由的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-24T10:08:40.650

您可以做的是，使用以下两个属性创建自定义搜索栏，然后调用 enable(false)

> android:progressDrawable="@drawable/progress_bar"
> 
> android:thumb="@android:color/transparent" // 使拇指不可见

然后调用运行时

> SeekBar.setEnabled(false)

并从 xml

> 机器人：启用=“假”

# jquery - jQuery 的 $.proxy vs var self - 保存 `this` 上下文的常用方法

> ID：15295217
> 
> 赞同：5
> 
> 时间：2013-03-08T13:36:46.843
> 
> 标签：jquery

保存上下文的常用方法是`this`什么？什么更快？你更喜欢什么？

1.  $.proxy(...)

    ```
    $('a').on('click', $.proxy(function() {
        this.close();
    }, this)); 
    ```

2.  自变量

    ```
    var self = this;

    $('a').on('click', function() {
        self.close();
    }); 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:38:13.570

让我们从修复您的代码开始。你有一个无用的函数声明，你可以使用`$.proxy`as

```
$('a').on('click', $.proxy(this.close, this)); 
```

现在，第二个解决方案基于`self`

*   只需要基本的javascript知识
*   不需要 jQuery
*   更具可读性，尤其是当您经常重用`self`变量时
*   快得多

这可能是它被更多使用的原因。

请注意，当您不必与 IE8 兼容时，您可以使用[bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)：

```
$('a').on('click', this.close.bind(this)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:44:34.597

两者都很常见。

这种情况下的速度无关紧要。如果点击的回调在 0.01 毫秒后开始，用户将不会注意到。或 0.1 毫秒。

对于重要的罕见情况，我希望变量方法稍微快一些，但您必须对其进行基准测试。

我的个人偏好会有所不同，具体取决于它的使用位置以及回调中的代码的作用。变量方法的一个优点是它适用于嵌套回调，而无需将其重新应用于每个级别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:41:39.387

选择第一个。不需要额外的变量。

# c# - Subscribing to the built-in topic "DCPSTopic" in DDS

> ID：15295220
> 
> 赞同：1
> 
> 时间：2013-03-08T13:36:51.890
> 
> 标签：c#, data-distribution-service

I am trying to create the simplest C# application that will allow me to get the topics currently available in the selected DDS domain. But I can't seem to make it work.

```
// Create the DDS Domain participant on domain ID 0
DDS.DomainParticipant participant =                          
             DDS.DomainParticipantFactory.get_instance().create_participant(
                    0,
                    DDS.DomainParticipantFactory.PARTICIPANT_QOS_DEFAULT,
                    null, /* Listener */
                    DDS.StatusMask.STATUS_MASK_NONE);
DDS.Subscriber sub = participant.get_builtin_subscriber();
DDS.DataReader reader1 = sub.lookup_datareader("DCPSTopic");
DDS.TopicBuiltinTopicDataDataReader builtinReader1 =  
                       (DDS.TopicBuiltinTopicDataDataReader)reader1;
DDS.TopicBuiltinTopicDataSeq topicSeq = new DDS.TopicBuiltinTopicDataSeq(10) ;
DDS.SampleInfoSeq infoSeq = new DDS.SampleInfoSeq(10);
builtinReader1.read(topicSeq, 
                    infoSeq, 
                    10, 
                    DDS.SampleStateKind.ANY_SAMPLE_STATE, 
                    DDS.ViewStateKind.ANY_VIEW_STATE,
                    DDS.InstanceStateKind.ANY_INSTANCE_STATE); 
```

When running the code above, I get a "Retcode_NoData" exception in the last line (builtinReader1.read(...)) even though both publishers and subscribers are running and posting in the same domain (domain 0). Do you have any idea about what could be wrong with my code?

By the way. I use RTI Connext 5.0 implementation of DDS.

Regards John

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:51:32.380

With RTI Connext, the `TopicBuiltinTopic` does not behave as one might expect. Check out the documentation of the [C# API DDS::TopicBuiltinTopicData Class Reference](http://community.rti.com/rti-doc/500/ndds.5.0.0/doc/html/api_dotnet/classDDS_1_1TopicBuiltinTopicData.html):

> Note: The `DDS_TopicBuiltinTopicData` built-in topic is meant to convey information about discovered Topics. This Topic's samples are not propagated in a separate packet on the wire. Instead, the data is sent as part of the information carried by other built-in topics (`DDS::PublicationBuiltinTopicData` and `DDS::SubscriptionBuiltinTopicData`). Therefore `TopicBuiltinTopicData` DataReaders will not receive any data.

What it basically says: because of the way discovery is implemented in Connext, you will not see any data in any `TopicBuiltinTopicData` DataReaders. This is what you observe in your code snippet.

Fortunately, it is still possible to get information about Topics on the bus. This has to happen via the PublicationBuiltinTopicData and SubscriptionBuiltinTopicData. If you look at the documentation of the [C# API DDS::PublicationBuiltinTopicData Class Reference](http://community.rti.com/rti-doc/500/ndds.5.0.0/doc/html/api_dotnet/classDDS_1_1PublicationBuiltinTopicData.html#), you can see that the data contains the string fields `topic_name` and `type_name`. Additionally, you can get information about the structure of the type, but that is more advanced and implementation specific.

* * *

Three remarks in case you plan to implement the reading of the Publication and Subscription builtin Topics. First, in stead of hardcoding the name of the built-in Topic, like you did with `"DCPSTopic"`, it is better to refer to the corresponding TypeSupport attribute, as in:

```
reader = sub.lookup_datareader(
             DDS.PublicationBuiltinTopicDataTypeSupport.PUBLICATION_TOPIC_NAME); 
```

Then it is good to know that with Connext, built-in DataReaders will not contain any samples about Publications or Subscriptions that live in the same DomainParticipant as the built-in Subscriber. In other words, you can only see other Participant's Entities, but not your own.

Finally, while playing around with you code, I noticed that the reading of the samples did not work unless I replaced the constructor invocations of the sequences as follows:

```
DDS.SampleInfoSeq infoSeq = new DDS.SampleInfoSeq(); 
```

in stead of

```
DDS.SampleInfoSeq infoSeq = new DDS.SampleInfoSeq(10); 
```

and similar for the data-sequence. I do not know why that is, but it should not have any practical implications.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T14:16:42.830

Rainier is right. Connext DDS does not propagate the Topics directly in the `TopicBuiltinTopicData`; rather it does it indirectly in the `PublicationBuitinTopicData` and `SubscriptionBuiltinTopicData`. This is permitted by the DDS Specification.

There is information on how to use the builtin Topics in this HOWTO titled [Detect the presence of DomainParticipants, DataWriters and DataReaders in the DDS Domain](http://community.rti.com/content/forum-topic/detect-presence-domainparticipants-datawriters-and-datareaders-dds-domain). The HOWTO includes some working example code. It is in Java instead of C# but it should be easy to map. The example there reads one Sample at a time so you do not need to deal with the sequence sytax.

The reason why you must use:

```
DDS.SampleInfoSeq infoSeq = new DDS.SampleInfoSeq(); 
```

Instead of:

```
DDS.SampleInfoSeq infoSeq = new DDS.SampleInfoSeq(10); 
```

Is that the read/take APIs that have two different behaviors depending on whether the passed sequences are "empty" (i.e. have a zero allocated/maximum length) or have an allocated length.

If the sequence is empty, which is what you get with the default constructor, then read/take behave as zero-copy API's. This means that the actual elements in the sequence are "loaned" from the ones already stored inside the middleware. For this reason the sequence that must be passed in has to be an "empty" sequence so that the middleware knows it is OK to replace the contents with references to the internal elements. After accessing the elements you must return the 'loaned elements' back to the middleware calling the `DataReader::return_loan` operation.

If the sequences are not empty. Then DDS will assume the elements are pre-allocated and will try to copy the data into the elements you passed. The problem with the code you showed is that

```
DDS.SampleInfoSeq infoSeq = new DDS.SampleInfoSeq(10); 
```

Allocates just the sequence itself. But not the elements. So the read/take call will fail when it tries to make the copy. If you wanted to use this non zero-copy API you have to follow the call with the allocation/assignment of each element, that is:

```
for (int i=0; i< 10; i++ ) {
    infoSeq.set_at(i, new DDS.SampleInfo());
} 
```

And the same would apply for the data sequence as well. If you do this you would not have to use the `DataReader::return_loan` operation. But there would be extra copies so it is less efficient.

You can find more information on how to use DDS Sequences in this HOWTO titled [Howto use OMG DDS Sequences in C++](http://community.rti.com/content/forum-topic/howto-use-omg-dds-sequences-c-rti-connext-dds). It is written with C++ examples but the principles apply to all the languages.

Regards, Gerardo

# c++ - C++ 运算符优先级

> ID：15295226
> 
> 赞同：-2
> 
> 时间：2013-03-08T13:37:16.677
> 
> 标签：c++, operators, operator-precedence

假设我们在分配给堆空间的内存指针列表上有一个迭代器（iter），如果我这样做的话

```
delete (*iter++) 
```

我的优先级是首先取消引用迭代器以获取内存地址然后释放空间然后递增迭代器以释放下一个元素，这是对的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T13:38:49.427

尽管[`++`具有比 更高的优先级`*`](http://en.cppreference.com/w/cpp/language/operator_precedence)，但后增量的副作用`++`是在*取消*引用运算符`*`使用了迭代器的值之后应用的。这是后增量或后缀的行为`++`（与前增量或前缀相反`++`）。此规则适用于迭代器以及“普通”指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T13:42:08.673

效果如您所写，但使用稍微不同的顺序实现：

1.  后增量具有最高优先级，因此首先对其进行评估。但是，它的返回值（由进一步的运算符处理）是增量`iter` **之前的值。**

2.  接下来评估取消引用，返回未递增值`iter`“指向”的指针。

3.  `delete`最后评估，并删除指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T13:45:49.587

*优先级*实际上是相反的，如果迭代器是类类型（带有重载运算符），这是对运算符函数的调用顺序：

*   调用递增运算符来递增迭代器。它在增量**之前**返回自身的副本。
*   在临时迭代器上调用解引用运算符并返回`iter`用于调用的列表项的值。
*   刚刚返回的指针被删除，即指向的对象被破坏，然后内存被释放。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T13:40:53.900

该行等效于：

```
delete (*(iter++)) 
```

但是由于后缀增量返回原始值，您仍然取消引用`iter`. 因此，如果`iter`指针指向一个动态分配的对象，`delete`就会销毁该对象。然后`iter`将左指针指向下一个指针。

# zend-framework2 - 在 ZF2 的下拉菜单中设置动态值

> ID：15295242
> 
> 赞同：-2
> 
> 时间：2013-03-08T13:38:00.293
> 
> 标签：zend-framework2

我正在使用 Zend Framework 2，我想了解如何将值添加到来自数据库的下拉列表中。

代码在这里：

```
$this->add(
    array(
        'name'   => 'role',
        'type'   => 'Zend\Form\Element\Select', 
        'option' => array(
            'label'        => 'Role',
            'value_option' => $roleData
        )
    )
); 
```

这里 $roleData 作为一个数组，数组的值如下：

```
Array ( [0] => Array ( [id] => 1 [cell] => admin ) [1] => Array ( [id] => 2 [cell] => member ) [2] => Array ( [id] => 3 [cell] => guest ) [3] => Array ( [id] => 4 [cell] => Admina1 ) [4] => Array ( [id] => 5 [cell] => Admina1 ) ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:08:17.110

尝试`'value_options'`代替`'value_option'`.

你的数组必须是以下结构：

```
$options = array(
    '1' => 'admin',
    '2' => 'member',
    '3' => 'guest',
    '4' => 'Admina1',
    '5' => 'Admina1'
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T15:16:03.207

```
$this->add(array(
    'name' => 'yesorno',
    'type'  => 'Zend\Form\Element\Select',
    'options' => array(
        'label'         => 'Yes or No Label',
        'value_options' => array(
            0 => 'No', 
            1 => 'Yes'
         )
    ),
)); 
```

# c# - 如何使用 ADO.NET / C# 进行涉及多个表的参数化查询？

> ID：15295247
> 
> 赞同：2
> 
> 时间：2013-03-08T13:38:24.023
> 
> 标签：c#, ado.net, sql-injection, parameterized

我想为 SQLquery 进行参数化查询，可以是这样的：

```
SELECT * FROM Table1 WHERE Col1 IN (SELECT Col2 FROM Table2 WHERE Col3 IN (1, 2, 3)); 
```

这些值来自 WS 接口，虽然我可以信任消费者，但我想安全地使用它并使用涉及 DbParameters 的参数化查询来防止 SQL 注入。怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T13:55:01.430

正如您所注意到的，关键点是使用参数。`IN`条款是出了名的问题，烦人。现在，如果您知道这些值都是整数（例如，您正在`int[]`为您的 C# 方法提供一个参数），那么您*几乎可以摆脱*以下情况：

```
cmd.CommandText = "SELECT * FROM Table1 WHERE Col1 IN (SELECT Col2 FROM Table2 WHERE Col3 IN ("
+ string.Join(",", values) + "))"; // please don't!!! 
```

这太可怕了，暗示了一种非常糟糕的做法（如果有人将它复制为字符串，那么您将陷入痛苦的世界），并且不能使用查询计划缓存。您*可以*执行以下操作：

```
var sb = new StringBuilder("SELECT * FROM Table1 WHERE Col1 IN (SELECT Col2 FROM Table2 WHERE Col3 IN (");
int idx = 0;
foreach(var val in values) {
    if(idx != 0) sb.Append(',');
    sb.Append("@p").Append(idx);
    cmd.Parameters.AddWithValue("@p" + idx, val);
    idx++
}
sb.Append("))");
cmd.CommandText = sb.ToString(); 
```

哪个更可取但很尴尬。

或者最简单：使用像[dapper](http://nuget.org/packages/Dapper)这样的工具，让*库*担心它：

```
var data = conn.Query<YourType>(
    "SELECT * FROM Table1 WHERE Col1 IN (SELECT Col2 FROM Table2 WHERE Col3 IN @values)",
    new { values }); 
```

在这里， *dapper*发现了用法并“做正确的事”。它还为您处理“0 值”的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:50:24.630

这是一个例子：

```
SqlCommand cmd = new SqlCommand("SELECT * FROM Table1 WHERE Col1 IN (SELECT Col2 FROM Table2 WHERE Col3 = @myparam", conn);

//define parameters used in command object
SqlParameter param  = new SqlParameter();
param.ParameterName = "@myparam";
param.Value         = "myvalue";

//add new parameter to command object
cmd.Parameters.Add(param);

// get data stream
reader = cmd.ExecuteReader(); 
```

查看此链接了解更多详情： [http ://csharp-station.com/Tutorial/AdoDotNet/Lesson06](http://csharp-station.com/Tutorial/AdoDotNet/Lesson06)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T13:53:40.213

这里的困难是参数化每个单独的 IN 子句，以便您可以传递可变数量的 ID。

查看这篇有用的文章，了解解决此问题的一种方法：http: [//www.mikesdotnetting.com/Article/116/Parameterized-IN-clauses-with-ADO.NET-and-LINQ](http://www.mikesdotnetting.com/Article/116/Parameterized-IN-clauses-with-ADO.NET-and-LINQ)

基本上，它涉及一些字符串操作来构建 IN 子句的参数化列表，因此对于具有 3 个 ID 的特定示例，您最终会得到一个如下所示的 SQL 语句：

```
select * from TABLE1 where COL1 in (select COL2 from TABLE2 where COL3 IN (@p1, @p2, @p3)); 
```

# c# - 将值分配给数组中的 int 时出现错误

> ID：15295249
> 
> 赞同：-7
> 
> 时间：2013-03-08T13:38:28.960
> 
> 标签：c#, .net

```
{
int num1 = backData[num4, num3 + num2, 0];

num1[0] += leftData[num4 + num, num3, 0];
} 
```

我收到一个错误，“无法使用 [] 将索引应用于 'int' 类型的表达式”。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:40:43.677

If `num1`is an `int`then 尝试使用`num1[0]`是没有意义的。这个怎么样：

```
num1 += leftData[num4 + num, num3, 0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:40:45.313

因为`num1`在单个`int`，而不是数组中。你的意思是：

```
{
    int num1 = backData[num4, num3 + num2, 0];

    num1 += leftData[num4 + num, num3, 0];
} 
```

但是我怀疑您希望`num1`成为对您在第一行中计算的数组位置的*引用。*如果是这种情况，只需直接分配它：

```
backData[num4, num3 + num2, 0] += leftData[num4 + num, num3, 0]; 
```

# asp.net - 组合框不识别第一个字符

> ID：15295250
> 
> 赞同：0
> 
> 时间：2013-03-08T13:38:36.147
> 
> 标签：asp.net, ajaxcontroltoolkit

我有一个非常奇怪的问题，只影响少数用户......

我有一个带有 AJAX 控件工具包组合框的 ASP.NET 站点。当这些用户尝试在组合框中键入时，他们键入的第一个字符通常无法识别。他们通常需要按两次键才能注册。

起初我认为这是他们的键盘的问题，所以我让其中一位用户尝试使用我的键盘。她能够复制这种行为。但是，当我尝试时，通常没问题。（我只能成功复制一次）

这是键盘问题，还是我可以查看其他内容？这里的标准浏览器是 IE9。

**编辑**

我已经能够可靠地复制“问题”......

当用户使用下拉列表然后开始输入时，*第一次击键会将焦点重新设置在文本框中。*这会产生第一次击键没有注册的错觉。我不想这么说，但这似乎是设计使然。有什么想法吗？

# c# - 将joined表导出到listView，匿名类型数据

> ID：15295255
> 
> 赞同：0
> 
> 时间：2013-03-08T13:38:58.700
> 
> 标签：c#, entity-framework, join, listbox

我加入了 3 个表，我想将数据导出到 ListView 我该怎么做？数据是匿名类型的列表，如何获取值以便将它们添加到 listView？

```
var results = (from a in db.CUSTOMERs
                       join b in db.ORDERs on a.CUSTOMERID equals b.CUSTOMERID
                       join c in db.ORDERDETAILS on b.ORDERID equals c.ORDERID
                       select new
                       {
                           a.CUSTOMERID,
                           a.NAME,
                           a.ADRESA,
                           b.ORDERID,
                           b.DATA,
                           b.VALOARE,
                           c.PRODUS,
                           valoare2 = c.VALOARE,
                           c.SERIAL
                       }).ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:50:13.060

您需要定义一个公共类来保存数据

```
public class modelData
{
    public string CUSTOMERID { get; set; }
    public string NAME { get; set; }
    public string ADRESA { get; set; }
    public string ORDERID { get; set; }
    public string DATA { get; set; }
    public string VALOARE { get; set; }
    public string PRODUS { get; set; }
    public string VALOARE2 { get; set; }
    public string SERIAL { get; set; }
};

var results = (
    from a in db.CUSTOMERs
    join b in db.ORDERs on a.CUSTOMERID equals b.CUSTOMERID
    join c in db.ORDERDETAILS on b.ORDERID equals c.ORDERID
    select new modelData
    {
       CUSTOMERID = a.CUSTOMERID,
       NAME = a.NAME,
       ADRESA = a.ADRESA,
       ORDERID = b.ORDERID,
       DATA = b.DATA,
       VALOARE = b.VALOARE,
       PRODUS = c.PRODUS,
       VALOARE2 = c.VALOARE,
       SERIAL = c.SERIAL
    })
    .ToList(); 
```

# php - jquery树视图复选框传递值

> ID：15295259
> 
> 赞同：1
> 
> 时间：2013-03-08T13:39:12.810
> 
> 标签：php, jquery

我正在使用 jeasyui 插件来实现树视图功能。[这是我使用http://www.jeasyui.com/tutorial/tree/tree4.php](http://www.jeasyui.com/tutorial/tree/tree4.php)的示例 这里我想在变量而不是 json 文件中传递 json 值。因为我动态获取 json 值并包含在我的变量中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:05:13.347

查看代码如果未设置 url，则返回 false，所以我认为您需要使用 url。

但作为替代方案，您可以将 url 选项指向生成数据的文件。

像这样的东西。

```
<tag url="http://yourdomain/yourpath/tree_data.php"> 
```

并在 php 文件中

```
<?php

echo json_encode($my_generated_data);

?> 
```

# windows - 关于没有 WM_PAINT 消息的绘图的问题

> ID：15295262
> 
> 赞同：0
> 
> 时间：2013-03-08T13:39:18.863
> 
> 标签：windows, drawing, message, gdi

在 MSDN 中，我读到了这个

> 在不使用 WM_PAINT 消息进行绘图时，应用程序通常不会使窗口无效。相反，它以一种可以轻松恢复窗口并删除绘图的方式进行绘制。

这是什么意思 ？因为我写了一个GIS程序，我想实现“放大”功能，鼠标左键向下移动鼠标绘制一个矩形，它正在绘制一个矩形但是矩形覆盖了地图，首先我认为是因为矩形是不透明的，那我用 AlphaBlend() 画一个透明的矩形，也是一样的。我应该怎么办 ？

![画一个矩形](../Images/57f5f76f68806d4f3b21c095023505e2.png)

```
LRESULT OnMouseMove(UINT nflags, CPoint point)
{
    if (m_bZoomInMode)
    {
        m_curScreenPoint.x = point.x;
        m_curScreenPoint.y = point.y;
        HDC hdc = GetDC();
        SelectObject(hdc, (HBRUSH)NULL_BRUSH);
        Rectangle(hdc, m_startScreenPoint.x, m_startScreenPoint.y, point.x, point.y);
        ReleaseDC(hdc);
        return 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:08:28.977

要绘制矩形，您可以绘制 4 条线。或者使用透明画笔——即使用画笔样式`BS_HOLLOW`。

另一个要解决的问题是，当用户移动鼠标时，缩放矩形会移动，您需要重新绘制下面的内容。执行以下操作：

1.  调用`InvalidateRect`为缩放矩形的先前位置传递一个矩形。
2.  要求`UpdateRect`强制绘制循环并绘制上一个缩放矩形下方的内容。
3.  绘制新的缩放矩形。

# c++ - Qt 线程优化

> ID：15295263
> 
> 赞同：0
> 
> 时间：2013-03-08T13:39:19.770
> 
> 标签：c++, multithreading, qt, optimization

我尝试使用 Qt 分析我的一个应用程序。我发现的结果似乎表明 Qt 是一个大线程用户。它似乎创建和销毁线程很多。这是其内存消耗的峰值。是真的吗？

因此，我尝试对“如何优化 Qt 应用程序”进行一些研究，但是，我目前还没有找到任何相关的东西。

所以我想知道是否有任何可以优化的 Qt 编程“通用方式”。我应该以特定方式使用线程吗？除了尊重 C++ 标准、编译器中的 -pedantic 选项等等，我还能做任何事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:13:48.877

一般来说，如果你创建和销毁线程很多，那么这可能不是一个很好的设计。假设您的线程执行相同（或类似）的事情，然后拥有一个固定的线程“池”，只要它需要运行，然后当您当前的代码破坏线程时就会放回池中。

或者，让线程永远运行，并通过一些合适的 IPC 为其提供数据。

我还要说，除非您正在做一些非常特别的事情，如果某件事需要不到四分之一秒的时间来完成，那么您不应该创建一个线程来执行此操作。这不是一个固定的规则。

线程本身不会使用那么多内存，但每个线程的堆栈可能会使用相当多的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:17:55.870

如果您经常创建和销毁 QThreads，请考虑使用[QThreadPool](http://doc-snapshot.qt-project.org/4.8/qthreadpool.html)或[QtConcurrent](http://qt-project.org/doc/qt-4.8/qtconcurrent.html)。这些将保留线程并按需提供服务。

如果您没有经常创建和销毁线程，那么您的问题就出在其他地方。

# sql - 如何访问果园内的其他数据库

> ID：15295266
> 
> 赞同：1
> 
> 时间：2013-03-08T13:39:26.970
> 
> 标签：sql, database-connection, orchardcms

我正在尝试访问外部数据库以在果园模块中显示数据我的第一次尝试出现以下错误。

发生了未处理的异常，请求被终止。请刷新页面。如果错误仍然存​​在，请返回

> 提供程序未返回 ProviderManifestToken 字符串。
> 
> System.Data.ProviderIncompatibleException：提供程序未返回 ProviderManifestToken 字符串。---> System.Data.SqlClient.SqlException：服务器“ML-52\SQLEXPRESS”上的 MSDTC 不可用。

如果有人这样做或有一个连接到外部数据库的简单模块，我只是在黑暗中刺伤，请分享。它会很受欢迎

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:32:12.927

围绕您的数据访问

```
using (TransactionScope scope = new TransactionScope(TransactionScopeOption.Suppress)) { 
```

# c++ - 如何在其他文件中使用 .mm 文件中的 c++ 类对象？

> ID：15295269
> 
> 赞同：0
> 
> 时间：2013-03-08T13:39:34.790
> 
> 标签：c++, iphone

我制作了两个 MathUtils.h 文件

```
#include "iostream" 
```

和 MathUtils.cpp

```
#include "MathUtils.h"

using namespace std;

//Box class .....................
class Box
{
private:
    double length;   // Length of a box
    double breadth;  // Breadth of a box
    double height;   // Height of a box
public:
    void setParameters(int l,int b,int h);
    int volume();
    int area();
};

void Box::setParameters(int l, int b, int h)
{
    length=l;
    breadth=b;
    height=h;
}

int Box::volume()
{
    return length*breadth*height;
}

int Box::area()
{
    return (2*(length*breadth) + 2*(breadth*height) + 2*(height*length));
}

//sphere class................
class Sphere
{
private:
    double pi=3.14;
    double r;
public:
    void setParameters(int radius);
    int volume();
    int area();
};

void Sphere::setParameters(int radius)
{
    r=radius;
}

int Sphere::volume()
{
    return (4/3)*pi*r*r;
}

int Sphere::area()
{
    return 4*pi*r*r;
} 
```

我们如何在我的项目中使用这个文件可以帮助我。我从来没有在我的项目中使用过 c++ 文件，所以我想知道我们如何在其他 viewController 文件中使用 Box 和 Sphere 类对象。谢谢！。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:42:21.947

您在 .h 文件中定义您的类。

对于您的示例，请移动：

```
class Box
{
private:
    double length;   // Length of a box
    double breadth;  // Breadth of a box
    double height;   // Height of a box
public:
    void setParameters(int l,int b,int h);
    int volume();
    int area();
};

class Sphere
{
private:
    double pi=3.14;
    double r;
public:
    void setParameters(int radius);
    int volume();
    int area();
}; 
```

到*mathutils.h*并添加`#include "mathutils.h"`到您的 viewController 文件中。您的 Box 成员函数应该仍然在`mathutils.c`

然后，您的视图控制器中的函数可以使用它：

```
{
  Box b;
  b.setParameters(1,2,3);
  int v = b.volume();
  int a = b.area();
} 
```

# android - 如何在 Android 上使用 GLPK 库

> ID：15295270
> 
> 赞同：1
> 
> 时间：2013-03-08T13:39:46.843
> 
> 标签：android, shared-libraries, linear-programming

我有一个必须在 android 应用程序中解决的线性编程问题。我使用[Apache Commons Math](http://commons.apache.org/proper/commons-math//)来解决它，但事实证明这给了我`double`值的结果。我需要得到`integer`值的结果。

经过一番搜索，结果发现**GLPK**库可用于**MILP**（混合整数线性规划），但它的 Java 实现有一个共享库，我不能在 android 设备上使用。

**有没有可能在安卓设备上使用这个库？**或者可能是其他一些可用于解决 Android 设备上的 MILP 问题的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T21:11:44.957

这可能是一个长镜头，但您是否考虑过使用**C#**和[**Mono 框架**](http://xamarin.com/monoforandroid)构建应用程序？[这里](http://yoyovicks.blog.free.fr/)有一个 GLPK 的 C# 包装器。不得不说我没用过。其他优秀的开源 MILP 求解器是 LP Solve (lpsolve.sourceforge.net/5.5/)。此求解器同时具有 Java 和 C# 包装器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T11:32:18.770

也许 GLPK 的 JavaScript 端口，称为[GLPK.js](https://github.com/hgourvest/glpk.js)，可以在这里使用？它完全在浏览器中运行，可以处理 MI(L)P 问题。还提供了一个非常好的[演示应用程序](http://www3.nd.edu/~jeff/mathprog/mathprog.html)，包括许多标准问题的示例。

# eclipse - Eclipse 3.8 - 防止在编辑器选项卡中截断文件名

> ID：15295271
> 
> 赞同：8
> 
> 时间：2013-03-08T13:39:50.210
> 
> 标签：eclipse, spring-tool-suite

我想要的似乎应该是一个简单的问题，但我一直在删除......

在 Eclipse 3.8 / STS 3.1 中，如何阻止 Eclipse 截断编辑器选项卡中的文件名。我不知道哪个标签是哪个。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T17:44:38.487

试试这个[解决方案](https://bugs.eclipse.org/bugs/show_bug.cgi?id=32789)。

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=32789](https://bugs.eclipse.org/bugs/show_bug.cgi?id=32789)。

我已经用 Eclipse Kepler 4.3 SR1 试过了

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-08T13:49:49.327

在`Window`->`Preferences`转到`General`->下`Editors`。
最后一点应该是“自动关闭编辑器”，你可以指定一个数字。

如果您选中此项，当达到给定数量的打开编辑器时，最近最少使用的编辑器将被关闭。这样，打开的编辑器就不会占用太多空间，并且减少了名称被截断的可能性。您可以随时使用++快速
搜索和打开资源，因此无需一直打开它们。`Ctrl``Shift``R`

当然不能保证总是显示完整的名称。如果没有足够的空间，你希望 Eclipse 做什么？

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2015-01-07T11:17:10.807

你需要设置eclipse Threme。

在窗口-> 首选项下转到常规-> 外观

主题：经典

# javascript - 对克隆元素进行 Jquery 验证

> ID：15295272
> 
> 赞同：0
> 
> 时间：2013-03-08T13:39:50.477
> 
> 标签：javascript, jquery, validation

我正在使用以下 JQuery 验证：

[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)

我有以下元素：

```
<div class="form-item">
  <label for="Reference_name" class="required">Name: <span class="required">*</span></label>                        
   <input name="Reference[name][]" class="form-input validate {validate:{required:true,minLength:2,messages:{required:'Your name is required',minLength:'Your name is too short'}}}" id="Reference_name" type="text">                                        
</div> 
```

我已经克隆了元素，但验证只出现在第一个元素上。我希望它也能针对第二个进行验证并显示错误消息标签。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:17:03.990

元素必须是唯一的

```
<label for="Reference_name" class="required">Name:<span class="required">*</span></label>            
<input type="text" id="Reference_name" name="Reference[Name]" id="Reference_name" required="required" maxlength="255" /> 
```

文件 Js

```
$(document).ready(function() {
 validate_form();
});     

function validate_form() {
    $("#id_of_your_form").validate({
    rules: {
        'Reference_name': {
            required:true,
            minlength: 2,                
            }
        },
    },
    messages: {
        'Reference_name': {
            required:"Your name is required",
            minLength:'Your name is too short'
        },           
    }

});
} 
```

如果你想比较两个字段 [http://docs.jquery.com/Plugins/Validation/Methods/equalTo#other](http://docs.jquery.com/Plugins/Validation/Methods/equalTo#other)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T19:33:22.447

将您的验证函数放在一个全局变量中，如下所示：

```
var validate_form_function = function(){
                if($(".app-form").length > 0){
                  $('.app-form').validate({
                    rules: {
                            comment_message: {
                                required: true,
                                minlength: 2
                            }
                    },

                    messages: {
                            comment_message: {
                                required: "Your message",
                                minlength: "Your message"
                            }
                    }
                  });
                }
            }; 
```

然后使用如下函数重新验证您的克隆表单： validate_form_function();

# java - nullpointerexception 无法启动活动

> ID：15295273
> 
> 赞同：0
> 
> 时间：2013-03-08T13:39:51.640
> 
> 标签：java, android, android-intent, nullpointerexception

当我尝试从我的主要活动开始第二个活动时，我不断收到 nullpointerexception 错误，我的主要活动代码如下：package com.cep.daredevil;

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.Toast;

public class MainActivity extends Activity {
public boolean filled = true;
EditText taskArray[] = new EditText[200];
EditText descArray[] = new EditText[200];
String taskArr[] = new String[200];
String descArr[] = new String[200];
int taskId[] = new int[200];
int descId[] = new int[200];
int n=0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    LinearLayout llayout = (LinearLayout)findViewById(R.id.llayout);

    Button addfield = new Button(this);
    addfield.setText("+");

    llayout.addView(addfield);

    addfield.setOnClickListener(new Button.OnClickListener()
    {
        public void onClick(View v)
        {
            addtask();
        }
    });

    for(int i=0;i<3;i++)
    {
        addtask();
    }
    LinearLayout blayout = (LinearLayout)findViewById(R.id.blayout);

    Button submit = new Button(this);
    submit.setText("Enter Dare");
    Button viewdare = new Button(this);
    viewdare.setText("View Dares");

    blayout.addView(submit);
    blayout.addView(viewdare);

    submit.setOnClickListener(new Button.OnClickListener()
    {
        public void onClick(View v)
        {
            inputdare(null);
        }
    });

    viewdare.setOnClickListener(new Button.OnClickListener()
    {
        public void onClick(View v)
        {
            listdare();
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

public void addtask()
{

    LinearLayout llayout = (LinearLayout)findViewById(R.id.llayout);
    taskArray[n] = new EditText(this);
    taskArray[n].setHint("Task Title");
    taskArray[n].setId(n+10000000);
    taskArray[n].setPadding(26,30,25,8);
    descArray[n] = new EditText(this);
    descArray[n].setHint("Task Description");
    descArray[n].setId(n+20000000);

    llayout.addView(taskArray[n]);
    llayout.addView(descArray[n]);
    n++;
}

public void inputdare(View v){
    EditText daretitle = (EditText)findViewById(R.id.title);

    String dare = daretitle.getText().toString();
    for (int i=0;i<n;i++)
    {
        if (taskArr[i] != null)
        {
            taskArr[i] = taskArray[i].getText().toString();
        }
        Integer id = taskArray[i].getId();
        if (id != null)
        {
            taskId[i] = id;
        }
    }

    Intent intent = new Intent(this, DisplayDares.class);
    Bundle bundle = new Bundle();
    bundle.putStringArray("TASKS", taskArr);
    bundle.putIntArray("TASKID", taskId);
    bundle.putBoolean("INPUT", true);
    intent.putExtras(bundle);
    startActivity(intent);
    }
}

public void listdare()
{
    Intent intent = new Intent(this, DisplayDares.class);
    Bundle bundle = new Bundle();
    bundle.putBoolean("INPUT", false);
    intent.putExtras(bundle);
        startActivity(intent);
    }
} 
```

似乎导致问题的功能在我的第二个活动中，在这里：

```
package com.cep.daredevil;

import android.app.Activity;
import android.os.Bundle;
import android.support.v4.app.NavUtils;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.LinearLayout;
import android.widget.TextView;

public class DisplayDares extends Activity {

public final static String PREFS = "Preferences";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.display_dare);      
    setupActionBar();

    Bundle bundle = getIntent().getExtras();
    Boolean input = bundle.getBoolean("INPUT");

    if (input == false){}
    else
    {
        int[] taskId = bundle.getIntArray("TASKID");
        final String[] taskArray = bundle.getStringArray("TASKS");

        LinearLayout layout = (LinearLayout)findViewById(R.id.layout);
        TextView test = (TextView)findViewById(taskId[0]);
        test.setText(taskArray[1]);

        layout.addView(test);
            }
        }
    } 
```

我得到的错误是：

```
03-08 13:32:18.053: E/AndroidRuntime(6873): FATAL EXCEPTION: main
03-08 13:32:18.053: E/AndroidRuntime(6873): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.cep.daredevil/com.cep.daredevil.DisplayDares}: java.lang.NullPointerException
03-08 13:32:18.053: E/AndroidRuntime(6873):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-08 13:32:18.053: E/AndroidRuntime(6873):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-08 13:32:18.053: E/AndroidRuntime(6873):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-08 13:32:18.053: E/AndroidRuntime(6873):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-08 13:32:18.053: E/AndroidRuntime(6873):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-08 13:32:18.053: E/AndroidRuntime(6873):     at android.os.Looper.loop(Looper.java:137)
03-08 13:32:18.053: E/AndroidRuntime(6873):     at android.app.ActivityThread.main(ActivityThread.java:5041)
03-08 13:32:18.053: E/AndroidRuntime(6873):     at java.lang.reflect.Method.invokeNative(Native Method)
03-08 13:32:18.053: E/AndroidRuntime(6873):     at java.lang.reflect.Method.invoke(Method.java:511)
03-08 13:32:18.053: E/AndroidRuntime(6873):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-08 13:32:18.053: E/AndroidRuntime(6873):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-08 13:32:18.053: E/AndroidRuntime(6873):     at dalvik.system.NativeStart.main(Native Method)
03-08 13:32:18.053: E/AndroidRuntime(6873): Caused by: java.lang.NullPointerException
03-08 13:32:18.053: E/AndroidRuntime(6873):     at com.cep.daredevil.DisplayDares.onCreate(DisplayDares.java:32)
03-08 13:32:18.053: E/AndroidRuntime(6873):     at android.app.Activity.performCreate(Activity.java:5104)
03-08 13:32:18.053: E/AndroidRuntime(6873):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-08 13:32:18.053: E/AndroidRuntime(6873):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T13:45:14.223

传递您的代码后，第 34 行似乎是：

`layout.addView(test);`

所以这一行产生了一个空指针异常

检查布局的 id 是否相同。

**小费：**

在您的错误堆栈跟踪中，您可以看到导致错误的原因：

```
03-08 13:32:18.053: E/AndroidRuntime(6873): Caused by: java.lang.NullPointerException
03-08 13:32:18.053: E/AndroidRuntime(6873):     at com.cep.daredevil.DisplayDares.onCreate(DisplayDares.java:34) 
```

**DisplayDares.java:34**

表示 DisplayDares.java 文件中的第 34 行。

您将看到它是以下行：

```
layout.addView(test); 
```

现在 test 不能为 NULL，因为它不会抛出该错误。所以布局必须。

# c# - Windows\System32\drivers\etc 和 GetDirectories

> ID：15295277
> 
> 赞同：2
> 
> 时间：2013-03-08T13:40:05.533
> 
> 标签：c#, io, directory

有谁知道“等”在目录枚举方面有什么特别之处，还有其他人喜欢它吗？如何绕过它不可见？

```
public class Foo
{
    [Test]
    public void Etc()
    {
        var etc = new DirectoryInfo(@"C:\Windows\System32\drivers\etc");
        Assert.True(etc.Exists);

        /* Expected: not <empty> But was:  <empty> */
        Assert.IsNotEmpty(etc.Parent.GetDirectories(etc.Name));
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T13:50:00.443

您在 64 位机器上将代码作为 32 位进程运行。你会看到[文件系统重定向器的效果](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa384187%28v=vs.85%29.aspx)

`C:\Windows\system32\drivers\etc`不被*重定向*（它被记录为免于重定向），`C:\windows\system32\drivers\etc`对于 32 位或 64 位进程也是如此。

但是当您升级到 时，如果您在 32 位进程中运行`C:\windows\system32\drivers`，您将被重定向到。`C:\Windows\SysWow64\drivers`并且该目录下没有`etc`目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:48:13.560

嗯...这可能是权限问题（可能是读取权限），但如果是这种情况，您可能会收到错误消息。

看看它是否显示使用`Directory.GetDirectories(@"C:\Windows\System32\drivers")`方法 on 。

这是[文档](http://msdn.microsoft.com/en-us/library/c1sez4sc.aspx)。

# iphone - 在 didReceiveRemoteNotifications 内部检查其他 UIRemoteNotifications 等待

> ID：15295278
> 
> 赞同：0
> 
> 时间：2013-03-08T13:40:05.820
> 
> 标签：iphone, ios, xcode, macos, apple-push-notifications

中`didReceiveRemoteNotification`，是否可以查看是否有其他/较旧的推送通知尚未响应？

我有一个场景，每个通知都包含不同的数据，除非您退出应用程序并为您的应用程序选择每个通知。您的应用程序将无法获取该数据。

我在想 iOS 必须将该信息存储在某个数组中，但无法通过 Google 找到任何内容。

请指教？最后机会沙龙将重写它以轮询服务器以获取通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:07:07.487

您不能保证您的应用会收到发送给它的任何推送通知。唯一的方法是它在收到消息时正在运行，或者通知用于启动您的应用程序。

我建议在您的服务器上实现一个 Web 服务，允许您的应用在运行时从这些通知中提取所需的数据。

# proxy - Java 和 Sip 代理

> ID：15295285
> 
> 赞同：1
> 
> 时间：2013-03-08T13:40:28.547
> 
> 标签：proxy, sip, sip-server

我试图实现 sip 重定向。为此，我使用 javax.servlet.sip.Proxy

```
SipFactory sipFactory = (SipFactory) getServletContext().getAttribute(SIP_FACTORY);
Proxy proxy = request.getProxy();
proxy.setParallel(false);
proxy.setRecordRoute(true);
ArrayList uris = new ArrayList();
SipURI uri2 = sipFactory.createSipURI("48505999666", "some_host");

uris.add(uri2);
proxy.proxyTo(uris); 
```

但是在 From 标题中，我在电话号码中获得了额外的前缀，而在我的手机上，我看不到谁在打电话。有没有办法修改 From 标题 displayName ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:01:29.450

当您说“附加前缀”时，您的意思是代理正在更改`From`标头的值吗？这听起来像是不正确的代理行为。UAC 发送什么，代理发送什么？

根据 JSR-289，`From`标头是系统标头，因此不能由代理修改。以额外的复杂性为代价，您可以改为实现背靠背用户代理 (b2bua)。

# python - Weasyprint GLib 错误

> ID：15295287
> 
> 赞同：1
> 
> 时间：2013-03-08T13:40:30.593
> 
> 标签：python, python-2.7, pdf-generation, glib

我安装了 WeasyPrint 和 Weasyprint 中列出的所有软件包 - 文档

我正在使用 Mac OS X 10.8.2 和 Python 2.7 并在我的 virtualenv 中安装了 Weasyprint 。

现在当我尝试： HTML(' [http://weasyprint.org/](http://weasyprint.org/) ').write_pdf('/tmp/weasyprint-website.pdf')

我在控制台中收到以下消息：

```
pydev debugger: starting
Ignored border-radius: 6px at 12:3, unknown property.
Ignored background: linear-gradient(#000, #111) at 59:3, invalid value.
Ignored box-shadow: 0 0 1em #888 at 65:3, unknown property.
Ignored text-shadow: 0 0 0.5em #444 at 77:3, unknown property.
Ignored transition: color 0.25s at 150:3, unknown property.
Ignored box-shadow: 0px 0px 2px #ddd at 167:3, unknown property.
Ignored border-radius: 0.2em at 168:3, unknown property.
Ignored text-shadow: 1px 1px 1px #111 at 171:3, unknown property.
Ignored transition: background 0.7s ease at 251:3, unknown property.
Ignored border-radius: 0.2em at 279:3, unknown property.
Ignored box-shadow: 0 0 2px #b7b7b7 at 280:3, unknown property.
Ignored background: url(img/content_haut.png) no-repeat top left,
url(img/bas.png) no-repeat bottom right at 301:3, invalid value.
Ignored border-radius: 0.2em at 305:3, unknown property.
Ignored transition: background-color 0.3s linear at 368:3, unknown property.
Ignored box-shadow: 0 0 5px #D60 at 373:3, unknown property.
Parse error at 7:1, unknown at-rule in stylesheet context: @font-face
Parse error at 12:1, unknown at-rule in stylesheet context: @font-face
Parse error at 17:1, unknown at-rule in stylesheet context: @font-face
Parse error at 22:1, unknown at-rule in stylesheet context: @font-face
Parse error at 26:1, unknown at-rule in stylesheet context: @font-face
Parse error at 31:1, unknown at-rule in stylesheet context: @font-face

(process:49474): GLib-GObject-CRITICAL **: gtype.c:2720: You forgot to call g_type_init()

(process:49474): GLib-CRITICAL **: void g_once_init_leave(volatile void *, gsize): assertion `result != 0' failed

(process:49474): GLib-GObject-CRITICAL **: gtype.c:2720: You forgot to call g_type_init()

(process:49474): GLib-CRITICAL **: void g_once_init_leave(volatile void *, gsize): assertion `result != 0' failed

(process:49474): GLib-GObject-CRITICAL **: gtype.c:2720: You forgot to call g_type_init()

(process:49474): GLib-GObject-CRITICAL **: gtype.c:2720: You forgot to call g_type_init() 
```

我用谷歌搜索了 GLib-GObject-CRITICAL 但没有找到解决方案，有人知道如何解决这个问题吗？我对 Python 比较陌生，所以如果您需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:50:24.060

这可能是 WeasyPrint 中的一个错误。请继续讨论问题跟踪器：[https ://github.com/Kozea/WeasyPrint/issues/41](https://github.com/Kozea/WeasyPrint/issues/41)

# odata - 以编程方式刷新 Sharepoint excel 工作簿的选项

> ID：15295296
> 
> 赞同：1
> 
> 时间：2013-03-08T13:40:57.810
> 
> 标签：odata

我们已经为我们的消费者设置了一种机制，可以根据特定的字段选择创建 oData 提要，并且我们编写了一个 excel 插件来将此 oData URL 转换为 excel 工作簿（或将此 oData 嵌入到 excel 中）。此外，创建的 excel 工作簿被上传到 sharepoint 农场。oData URL 可以安排定期刷新，我们正在寻找以编程方式刷新工作簿的选项。感谢您是否可以分享设置此类内容的经验。

- 谢谢，全科医生

# ruby-on-rails - Rails VERY slow in development using Ubuntu VVM

> ID：15295298
> 
> 赞同：2
> 
> 时间：2013-03-08T13:40:58.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3, development-environment, virtualbox, ubuntu-10.04

I have the following config

Ubuntu server 10.04 running on a VirtualBox VM (RAM and cpu usage are low) ruby 1.9.3 rails 3.2.12 webrick

If I do any of the things below the system seems to wait for about 15 seconds before executing the command - rake taks - rails s - navigating to a new page in the app

Things I have looked at - this is before the sprockets section, and does the same with rake, so at the moment I am not looking at things such as dev-tweaks - I have changed the webrick config.rb to have the line :DoNotReverseLookup => true - I have host entries for my host machine on the VM. ping is very fast between both machines - I have tried Thin and experienced the same issue. I haven't tried mongrel but am thinking I will see the same

But still it is excruciatingly slow.

Any thoughts?

Michael

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-19T13:49:16.833

If you're using VirtualBox shared folders (vboxfs), disk I/O is probably the issue. vboxfs is really slow, and Ruby on Rails does a lot of files operations in development mode (checking if any files changed etc.).

If you're not using Windows, sharing folders with NFS is the way to go.

Check this link: [http://meta.discourse.org/t/shared-folder-performance-on-vagrant/2443/14](http://meta.discourse.org/t/shared-folder-performance-on-vagrant/2443/14)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T15:13:57.593

I had this issue using VirtualBox shared folders. As soon as I switched to NFS, I couldn't really make a difference between running natively or in the VM. I imagine Rails autoloading in dev mode is the culprit here. See here on how to configure vagrant to use NFS: [https://coderwall.com/p/uaohzg](https://coderwall.com/p/uaohzg)

If you can't setup NFS properly (on OSX 10.7 I had to install NFS Manager to make it work), you can always script away and rsync your rails folder every time you modify files locally in your editor. You don't want to run rails on a VirtualBox shared folder.

# javascript - 在 JQuery 中使用丢弃对象中的方法

> ID：15295300
> 
> 赞同：0
> 
> 时间：2013-03-08T13:41:04.080
> 
> 标签：javascript, jquery, jquery-ui-droppable

我想使用拖放对象的方法。

```
function Controller(){
        $( "#container" ).droppable({
        drop: function( event, ui ) {
            var draggable = ui.draggable;
            alert( "Dropped:" + draggable.attr('id'));
            draggable.myMethod();

        }

}); 
```

你能解释一下为什么这不起作用吗？警报显示正确的对象被丢弃，但我无法使用该方法。

对象如下所示：

```
function Icon(name) {
var name = name;
this.myMethod = function() {
    alert("test")};
    this.getInfo = function() {  
    var dataname = this.getName();

    //BErtram
    $("#" + dataname).draggable({ revert: "valid" });
    //Bertram Ende

}
} 
```

**编辑：**

如果我以这种方式调用方法：

```
 drop: function( event, ui ) {
            var draggable = ui.draggable;
            alert(...);
            var ic = new Icon("asdsa");
            ic.myMethod();
        }, 
```

它有效，但我想在拖动的对象上使用方法，我必须进行某种类型转换吗？

**编辑：解决方法** 最后我使用了一种解决方法，使用 bool 来检查是否有成功的放置，如果 boolean ist 为真，则调用 draggable.stop 中的方法。boolean 的状态在 droppable 中在成功放置时设置为 true，在 draggable.start 中设置为 false。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:04:35.240

该`ui.draggable`值是包含在 jQuery 对象中的 DOM 元素。您需要一种机制将元素映射回`Icon`负责它的元素。

最简单的方法是使用`.data()`：

```
function Icon(name) {
    $('#' + name).data('self', this);
    ...
} 
```

然后在事件处理程序中检索该对象：

```
drop: function(event, ui) {
    var draggable = ui.draggable;
    var icon = draggable.data('self');
    icon.myMethod();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:46:59.870

问题是这是您创建`myMethod`的对象上的一个函数，但是它不是一个实例- 所以它没有方法。`Icon``ui.draggable``Icon``myMethod`

# android - Android使用2个listview链接在一起

> ID：15295303
> 
> 赞同：1
> 
> 时间：2013-03-08T13:41:13.863
> 
> 标签：android, android-layout, listview, android-arrayadapter

我对 android 很陌生，我目前正在阅读大量文档以了解如何开始。我在问这里之前尝试过搜索，但我找不到相关信息。

我的问题是在同一个活动中有 2 个列表视图。

带有类别列表的Listview **A。**

带有详细数据的**Listview B**（启动时显示的值基于 listviewA 的类别 1）

当单击 listviewA 的一项时，listViewB 的数据会更改以反映新的选择并显示新的详细信息数据列表。

有人可以给我正确的方向或指向涵盖该主题的教程的链接吗？抱歉，我目前无法发布任何代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:15:04.787

我不确定您尝试制作的布局类型是否对用户友好。如果您使用[ExpandableListView进行更改，它将为用户提供更丰富的 UI 体验。您可以](http://developer.android.com/reference/android/widget/ExpandableListView.html)[在此处](http://androidtrainningcenter.blogspot.in/2012/07/android-expandable-listview-simple.html)查看教程。使用它会给您机会通过交互吸引用户。

![在此处输入图像描述](../Images/4e464c4dfb01e3cba2ae77ce98e4fc4e.png)

无论如何，如果您确定要使用 ListView 则只需创建一个根目录并`LinearLayout`在`ListView`其中使用两个细节。根据您的要求提供两个布局（和）的高度。`ListView``TextView``ListView``TextView`

看看这个**[教程](http://www.nurne.com/2011/06/android-how-to-multiple-listviews-in_9533.html)**

2 列表视图：

```
<LinearLayout android:orientation="horizontal"
android:layout_width="fill_parent"
        android:layout_height="wrap_content">
    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:baselineAligned="false" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1" >

            <ListView
                android:id="@+id/listView1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" android:visibility="visible">
            </ListView>
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1" >

            <ListView
                android:id="@+id/listView2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" android:visibility="visible">
            </ListView>
        </LinearLayout>
    </LinearLayout> 
```

1 个列表视图 1 个文本视图：

```
<LinearLayout android:orientation="horizontal"
android:layout_width="fill_parent"
        android:layout_height="wrap_content">
    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:baselineAligned="false" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1" >

            <ListView
                android:id="@+id/listView1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" android:visibility="visible">
            </ListView>
        </LinearLayout>
            <TextView android:id="@+id/TextView1" android:text="details"/>
    </LinearLayout> 
```

**更新：**

请多解释一下你的问题。因为在你的场景中，列表视图之间的数据是相互连接的。比如说，如果**ListView A**是关于产品的，那么**ListView B**是关于 ProductDetails 的。所以你需要声明一个类变量说`ProductID`哪个是两个数据之间的公共实体，并在**ListView A**`setOnClickListener`的 getView() 中设置此变量，然后获取有关此的数据，并使用此查询的结果设置**ListView B**的适配器（可能是 SQL db 或RESTful 服务器）。如果您需要了解更多关于设置适配器的详细信息，请使用您尝试过的内容开始一个关于它的新问题。

 ****希望我有所帮助。如果这解决了您的问题，请将其标记为答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:24:39.470

我以前使用过这种策略，对我来说效果很好。使用线性布局来定位两个列表视图，填充“类别”列表视图并为其设置列表适配器。在这个列表视图上，我设置了一个 OnItemSelectedListener，它在激活时会在第二个“详细信息”视图上设置列表适配器。

根据您的确切需要，您可以替换详细列表视图的适配器，或者只是更改适配器查看的内容并告诉它刷新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T04:33:34.217

尝试这个：

通过 id (list_A) 获取 listview 后设置单击侦听器

```
list_A.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) {
              //here you can get click position from parameter position
             // and do somthing in Adapter_B and then call notifyDataSetChanged() for Adapter_B
              Adapter_B.notifyDataSetChanged(); 
            }
        }); 
```****

# client-server - 编写自己的 OPC

> ID：15295304
> 
> 赞同：2
> 
> 时间：2013-03-08T13:41:19.857
> 
> 标签：client-server, plc, opc

我对 OPC 的实施有一些疑问：

*   我可以为想要向服务器发送和接收实时数据的 PLC 编写自己的 OPC 服务器和 OPC 客户端吗？

    本科生有多容易？？！！

*   或者我可以为服务器使用免费软件（例如“ *MartikonOPC Explorer* ”）和客户端连接到 PLC 吗？
*   **我可以使用哪种编程语言？**

=======================================

审查 ：

*   PLC型号：台达

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-28T05:34:39.277

> 我可以为想要向服务器发送和接收实时数据的 PLC 编写自己的 OPC 服务器和 OPC 客户端吗？

是的，您可以，听起来好像您只需要 OPC DA 即读/写值。

> 本科生有多容易？？！！

这取决于，如果你想实现 OPCDA 3.0，那么你需要一些关于 COM 的知识，如果你以前没有使用过它，这可能会令人生畏。通常，当您创建 OPC 服务器时，您会使用来自某些供应商的框架，例如 Matrikon，但如果您的预算紧张，您可能需要自己完成所有工作。

> 或者我可以为服务器使用免费软件（例如“MartikonOPC Explorer”）和客户端连接到 PLC 吗？

您可以使用 Matrikon OPC 资源管理器连接到您的 OPC 服务器，但通常您希望将客户端代码嵌入到程序中并对值进行处理，资源管理器更多用于测试

> 我可以使用哪种编程语言？

对于服务器部分 C/C++，对于客户端部分你更灵活，任何支持 COM 的语言

或者，您可以实现一个 OPC UA 服务器，OPC UA 独立于平台并且几乎独立于语言。

[在opcfoundation.org](http://www.opcfoundation.org)上查看更多信息

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T14:09:09.967

根据您的技能，答案可以是肯定的，也可以是否定的。OPC 基金会持有标准，这些标准可供成员使用。

请记住，PLC 不使用 OPC 进行通信，OPC 服务器使用 PLC 制造商专有协议，以便能够使用 OPC 协议向客户端“提供”数据。

要正确回答这个问题，需要大量澄清，对于本科生来说有多容易取决于您学习的内容。

使用哪种编程语言，您可以找到任何语言，您的偏好是什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-14T07:40:32.157

Python是简单的方法并且可以做到。只创建全局通信模块（全局复用）。一些问题 ：

1-更多的PLC品牌使用BUFFER进行访问（台达不使用）。需要先注册后才能读取（所有EV值）。

2-全部在一个线程内（不仅仅是一个，每个节点线程）

3-您的分辨率为 1/10 秒（对于串行总线上的 modbus）

4-需要在 PLC 中编写一个强大的安全程序（否则会承担很大的风险！）

5-最少的通讯线路是2（二）（当失去一个，使用另一个）。

所有的编程语言都是婴儿。如果你吃得很多并且喜欢它，那么你就可以更快地进步。你可以做到！别忘了你有一个孩子！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T11:45:28.727

上次我检查 Delphi 是唯一一个同时拥有免费 OPC 客户端和 OPC 服务器示例的公司。我已经使用**[此](http://www.opcconnect.com/delphi.php)**页面中的资源制作了 OPC DA 2.04 服务器和客户端。

# android - facebook登录回调多次触发

> ID：15295305
> 
> 赞同：6
> 
> 时间：2013-03-08T13:41:22.677
> 
> 标签：android, facebook, android-facebook

我的应用程序有**分享**按钮来分享用户时间轴上的故事。我正在做的是，用户点击共享按钮，如果用户会话不存在应用程序强制使用 Facebook 登录用户。当用户这样做时，故事需要直接发布。这是我的代码。

**onCreate 方法**

```
 isShared = false;
    uiHelper = new UiLifecycleHelper(this, statusCallback);
    uiHelper.onCreate(savedInstanceState);
    Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);
    Session session = Session.getActiveSession();
    if (session == null) {

        if (savedInstanceState != null) {
            session = Session.restoreSession(this, null, statusCallback,
                    savedInstanceState);
        }
        if (session == null) {
            session = new Session(this);
        }
        Session.setActiveSession(session);
        if (session.getState().equals(SessionState.CREATED_TOKEN_LOADED)) {
            session.openForRead(new Session.OpenRequest(this)
                    .setCallback(statusCallback));
        }
    }       

    if (savedInstanceState != null) {
        pendingPublishReauthorization = savedInstanceState.getBoolean(
                PENDING_PUBLISH_KEY, false);
    }

    shareBtn.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {
            doPostStory();                              
        }
    }); 
```

剩下的代码是 -

```
 private void doPostStory() {
    Session session = Session.getActiveSession();
    if (!session.isOpened() && !session.isClosed()) {
        session.openForRead(new Session.OpenRequest(this)
                .setCallback(statusCallback));
    } else {
        isShared = true;
        Session.openActiveSession(this, true, statusCallback);
        publishStory();         
    }
}

private class SessionStatusCallback implements Session.StatusCallback {
    @Override
    public void call(Session session, SessionState state,
            Exception exception) {
        if(!isShared){
            updateView();
            isShared = true;
        }
    }
}

private void updateView() {
    Session session = Session.getActiveSession();
    if (session.isOpened()) {
        if(!isShared){
            publishStory();
        }
        Log.i("Session State callback", "Logged in");
    } else {
        Log.i("Session State Callback", "Logged Out");                      
    }
}   

@Override
public void onStart() {
    super.onStart();
    Session.getActiveSession().addCallback(statusCallback);
}

@Override
public void onStop() {
    super.onStop();
    Session.getActiveSession().removeCallback(statusCallback);
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Session.getActiveSession().onActivityResult(this, requestCode,
            resultCode, data);
    uiHelper.onActivityResult(requestCode, resultCode, data);
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    Session session = Session.getActiveSession();
    Session.saveSession(session, outState);
    outState.putBoolean(PENDING_PUBLISH_KEY, pendingPublishReauthorization);
    uiHelper.onSaveInstanceState(outState);
}

@Override
public void onPause() {
    super.onPause();
    uiHelper.onPause();
}

@Override
public void onResume() {
    super.onResume();
    uiHelper.onResume();
} 
```

publishStory() 的代码

```
 private void publishStory() {
    Session session = Session.getActiveSession();

    if (session != null) {

        // Check for publish permissions
        List<String> permissions = session.getPermissions();
        if (!isSubsetOf(PERMISSIONS, permissions)) {
            pendingPublishReauthorization = true;
            Session.NewPermissionsRequest newPermissionsRequest = new Session.NewPermissionsRequest(
                    this, PERMISSIONS);
            session.requestNewPublishPermissions(newPermissionsRequest);
            return;
        }

        Bundle postParams = new Bundle();
        postParams.putString("name", "Some");
        postParams.putString("caption",updateTitle);
        postParams.putString("description",updateText);
        postParams.putString("link","http://somedomain.com");
        postParams.putString("picture","someurl");

        Request.Callback callback = new Request.Callback() {
            public void onCompleted(Response response) {
                JSONObject graphResponse = response.getGraphObject()
                        .getInnerJSONObject();
                String postId = null;
                try {
                    postId = graphResponse.getString("id");
                } catch (JSONException e) {
                    Log.i("asd", "JSON error " + e.getMessage());
                }
                FacebookRequestError error = response.getError();
                if (error != null) {
                    Toast.makeText(UpdateDetails.this,
                            error.getErrorMessage(), Toast.LENGTH_SHORT)
                            .show();
                } else {
                    Toast.makeText(UpdateDetails.this, postId,
                            Toast.LENGTH_LONG).show();
                }
            }
        };

        Request request = new Request(session, "me/feed", postParams,
                HttpMethod.POST, callback);

        RequestAsyncTask task = new RequestAsyncTask(request);
        task.execute();
    } else {
        Log.i("Session Sate", "close");
    }

} 
```

代码确实在用户时间线上发布了故事。但它多次发布。这意味着，`statusCallback`被解雇多次。我尝试设置标志来检查故事帖子的状态。但是还是发了好几遍。

任何想法这段代码有什么问题？高度赞赏帮助。

PS：我不需要单独的登录按钮。我想要的是，用户点击分享按钮，如果登录它需要发布故事，否则登录用户，然后直接发布故事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-14T08:42:03.123

Create Facebook Session Object
Then Just Apply This in onCreate Method.

```
 Session.openActiveSession(this, true, new Session.StatusCallback() {

        // callback when session changes state
        @Override
        public void call(Session session, SessionState state,
                Exception exception) {
            if (session.isOpened()) {

                // make request to the /me API
                Request.newMeRequest(session,
                        new Request.GraphUserCallback() {

                            // callback after Graph API response with user
                            // object
                            @Override
                            public void onCompleted(GraphUser user,
                                    Response response) {
                                FacebookLoginActivity.this.progressDialog = ProgressDialog
                                        .show(YourActivity.this,
                                                "",
                                                "",
                                                true);
                                if (user != null) {

                                   Intent passIntent = new Intent(YourActivity.this,Second.class)
                                   startActivity(passIntent)
                                }
                            }
                        }).executeAsync();

            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T16:29:39.123

删除所有`publishStory()`调用。在你的回调中这样做：

```
public void call(Session session, SessionState state,
        Exception exception) {
    if(session != null && session.isOpened() && isShared){
       publishStory();
    }
} 
```

在您的`UpdateDetails`班级中声明`isShared`当`boolean isShared = false;` 用户点击共享按钮时使其变为真，例如：

```
shareBtn.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View arg0) {
        isShared = true;
        doPostStory();                              
    }
}); 
```

在你`publishStory`的 s`onComplete`中`isShared`作假。喜欢：

```
public void onCompleted(Response response) {
    isShared = false;
    ...................
    ...................
} 
```

希望这会有所帮助。

# java - 我如何定义这个泛型类来返回这种泛型对象？

> ID：15295309
> 
> 赞同：1
> 
> 时间：2013-03-08T13:41:41.320
> 
> 标签：java, generics

我有一个通用类如下：

```
class Holder<T>{  
    int type;  
    T value;  
} 
```

我有一个方法如下的类：

```
class SomeClass<T> {  
T insideValue;

??? process();  

} 
```

我需要从流程返回一个`Holder<T>`. 我怎样才能做到这一点？为了工作，我需要改变什么？我认为如果我这样做了：
`class SomeClass<Holder<T>> {`它会是一样的`class Holder<T>`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T13:43:47.767

很简单：

```
Holder<T> process(); 
```

封闭的泛型类型可以像其他类型一样使用（运行时除外）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T13:47:12.830

你可以使用这样的东西，

```
Holder<T> process(){

} 
```

# django - django 外键

> ID：15295310
> 
> 赞同：3
> 
> 时间：2013-03-08T13:41:41.857
> 
> 标签：django

我有以下内容`models.py`：

```
from django.db import models

class LabName(models.Model):
    labsname=models.CharField(max_length=30)
    def __unicode__(self):
     return self.labsname

class ComponentDescription(models.Model):
       lab_Title=models.ForeignKey('Labname')
       component_Name = models.CharField(max_length=30)
       description = models.CharField(max_length=20)
        purchased_Date = models.DateField()
       status = models.CharField(max_length=30)
       to_Do = models.CharField(max_length=30,blank=True) 
       remarks = models.CharField(max_length=30)

       def __unicode__(self):
           return self.component 
```

我有以下内容`admin.py`：

```
from django.contrib import admin
from Lab_inventory.models import ComponentDescription,LabName

class ComponentDescriptionAdmin(admin.ModelAdmin):
    list_display= ('lab_Title','component_Name','description','purchased_Date','status','to_Do','remarks')          
    list_filter=('lab_Title','status','purchased_Date')

admin.site.register(LabName)
admin.site.register(ComponentDescription,ComponentDescriptionAdmin) 
```

我想要的是显示组件描述下的字段以显示在实验室标题下（与每个实验室标题相关的字段应显示在该实验室名称下）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:50:31.617

您正在做什么`list_display`并`list_filter`与管理屏幕中显示的列表相关，其中列出了 LabName 对象的列表。

假设一个实体`LabName`具有一对多的`ComponentDescription`实体，您需要 Django[`InlineModelAdmin`](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#inlinemodeladmin-objects)来显示`ComponentDescription`属于`LabName`特定`LabName`实体的管理页面内的对象列表。代码将具有以下结构：

```
from django.contrib import admin
from Lab_inventory.models import ComponentDescription,LabName

class ComponentDescriptionInline(admin.TabularInline):
    model = ComponentDescription

class LabNameAdmin(admin.ModelAdmin):
    inlines = [
        ComponentDescriptionInline,
    ]

admin.site.register(LabName, LabNameAdmin) 
```

where`TabularInline`是泛型的子类`InlineModelAdmin`。

# excel - 当您使用“格式化单元格”选项更改单元格的格式时，不会触发任何 excel 事件

> ID：15295313
> 
> 赞同：0
> 
> 时间：2013-03-08T13:41:54.237
> 
> 标签：excel, office-interop, excel-2010, excel-interop, vba

谁能告诉我

1.  如果我已经在 Excel 中选择了一个单元格
2.  右键单击它
3.  转到格式单元格选项
4.  更改格式

那么哪个事件会被触发呢？

请注意，我不会通过此操作离开原始单元格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T15:39:47.290

准确地说，第 2 步会触发`Before_RightClick`事件，但其他步骤是无事件的。

# java - apache-tomcat 7.0 不解压.war？

> ID：15295316
> 
> 赞同：6
> 
> 时间：2013-03-08T13:42:01.277
> 
> 标签：java, tomcat

我想将我的应用程序部署到服务器，然后我可以像这样访问该应用程序：

```
http://10.10.10.10/index.jsp 
```

但不是

```
http://10.10.10.10/bar/index.jsp 
```

所以这是我在 server.xml 中的主机配置：

```
 <Host name="localhost"  appBase="webapps"
            unpackWARs="true" autoDeploy="true">
        <Context docBase="/home/foo/bar.war" reloadable="false" path=""/>
   </Host> 
```

但是，在我启动tomcat之后

> sh $CATALINA_HOME/bin/startup.sh

我发现tomcat没有解压$CATALINA_HOME/webapps中的war文件。然后我尝试删除 $CATALINA_HOME/webapps/ROOT 中的所有文件，但这没关系。那么以前有人遇到过这个问题吗？以及如何解决问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T14:15:36.673

Tomcat 7 不会将主机 appBase 外部的 WAR 文件解压到 appBase 中。

Tomcat 7 将从 WAR 运行您的应用程序。

# c++ - xcode - 为什么用重载的虚拟函数给出“隐藏”的警告

> ID：15295317
> 
> 赞同：1
> 
> 时间：2013-03-08T13:42:04.753
> 
> 标签：c++, warnings, virtual, hidden

我有一个基类，例如：

```
class A {
public:
  virtual void methodA(int) {}
  virtual void methodA(int, int, int) {}
}; 
```

xcode 发出隐藏方法A 的警告-一切sems 都按我的预期工作（从A 派生的类可以通过A 指针访问并使用其中一个方法A）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T13:52:35.697

我猜从`A`（假设它是`B`）派生的类之一仅覆盖`methodA()`. `methodA`在这种情况下，另一个重载*隐藏*在`B`. 例子：

```
class A {
public:
  virtual void methodA(int) {}
  virtual void methodA(int, int, int) {}
};

class B : public A {
public:
  virtual void methodA(int) {}
};

int main()
{
  A a;
  B b;
  A *pa = &b;
  a.methodA(7); //OK
  a.methodA(7, 7, 7); //OK
  pa->methodA(7);  //OK, calls B's implementation
  pa->methodA(7, 7, 7);  //OK, calls A's implementation
  b.methodA(7); //OK
  b.methodA(7, 7, 7);  //compile error - B's methodA only accepts one int, not three.
} 
```

解决方案是将`using`声明添加到`B`：

```
class B : public A {
public:
  using A::methodA;  //bring all overloads of methodA into B's scope
  virtual void methodA(int) {}
}; 
```

# linux - 屏幕远程分离时网络连接丢失

> ID：15295322
> 
> 赞同：0
> 
> 时间：2013-03-08T13:42:28.577
> 
> 标签：linux, shell, gnu-screen, secure-crt

我正在使用secureCRT ssh 到基于Linux 的服务器。
我使用“屏幕”命令来保持我的会话活跃。
但是当我使用两台 PC 时事情变得很奇怪，好吧，场景如下：

在 PC-A 上，启动一个名为“test”的新屏幕会话；
在 PC-B 上，键入 `screen -D -r test`

希望，我希望看到“测试”会话在 PC-A 上分离，然后重新连接到 PC-B。
这行得通，但是当 PC-A 被 PC-B 远程分离时，PC-A 失去了与服务器的连接。
只需重新连接就可以了，当然，但我仍然想知道为什么 PC-A 失去了连接。

这是PC-A的命令日志

```
[@PC-A ~]$ screen           

[remote power detached]
Screen session of test
ended.

Press Ctrl+C to cancel or Enter to reconnect immediately.
Reconnecting in 1 seconds...

Last login: Fri Mar  8 21:16:50 2013 from 10.129.215.167
[@PC-A ~]$ _ 
```

这是我的 .screenrc 文件：

```
#se the startup message
startup_message off
term xterm
##set a biger buffer
defscrollback 4096
#statusbar
hardstatus alwayslastline
shell zsh
shelltitle "$|zsh"
hardstatus alwayslastline "%{=b}%{Y}%-w%{.BW}%10>%n*%t%{-}%+w%< %=%{kG}(F5)New (F6)Kill (F7)Rename (F8)Next           %C%A %D, %Y-%m-%d    "
vbell off

## w to show the window list
bind w windowlist -b
bind ^w windowlist -b
##initial apps to run
screen
select 0

attrcolor u "-u B"
sessionname test
autodetach off

#shot-key bindings
bindkey -k k5 screen 
bindkey -k k6 kill 
bindkey -k k7 title 
bindkey -k k8 next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:46:14.373

`screen`默认启动时`multiuser`设置为`off`. 这意味着当用户登录时，它会将前一个用户踢出。把它改成你的`.screenrc`，你应该没问题。

[http://linux.die.net/man/1/screen](http://linux.die.net/man/1/screen)（搜索多用户）。

# android - android中自定义视图的Inflate方法异常

> ID：15295337
> 
> 赞同：0
> 
> 时间：2013-03-08T13:43:00.123
> 
> 标签：android

我正在为 android 编写自定义控件，我对下一个问题感到困惑：当我尝试调用`View.inflate()`静态方法时（请看下面的代码），我得到了运行时异常`android.view.InflateException`。有我的观点的代码

```
public class NavigationView extends RelativeLayout implements NewRadioConst {
      private TextView centerLabel;
      private Context context;
      private Typeface font;
      private ImageView leftArrow;
      private TextView leftLabel;
      private View leftWrapper;
      private ImageView rightArrow;
      private TextView rightLabel;
      private View rightWrapper;

      public NavigationView(Context paramContext)
      {
        this(paramContext, null);
      }

      public NavigationView(Context paramContext, AttributeSet paramAttributeSet)
      {
        this(paramContext, paramAttributeSet, 0);
      }

      public NavigationView(Context paramContext, AttributeSet paramAttributeSet, int paramInt)
      {
        super(paramContext, paramAttributeSet, paramInt);
        this.context = paramContext;
        View.inflate(context, R.id.navView1, this);  //this line take the exception
      }

} 
```

这是我尝试膨胀的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/navView1" >
    <FrameLayout android:id="@+id/centerWrapper" android:layout_centerInParent="true" style="@style/WrapContent">
        <ImageView android:layout_gravity="center" android:id="@+id/centerBg" android:layout_width="90.0dip" android:layout_height="30.0dip" android:src="@drawable/center_bg" />
        <TextView android:layout_gravity="center" android:id="@+id/centerLabel" android:text="@string/music" style="@style/TextLabel" />
    </FrameLayout>
    <LinearLayout android:id="@+id/leftWrapper" android:clickable="true" android:layout_centerVertical="true" style="@style/WrapContent">
        <TextView android:textSize="12.0dip" android:layout_gravity="center_vertical" android:id="@+id/leftLabel" android:layout_marginLeft="8.0dip" android:text="@string/info" android:singleLine="true" style="@style/TextLabel" />
        <ImageView android:layout_gravity="center_vertical" android:id="@+id/leftArrow" android:layout_width="50.0dip" android:layout_height="30.0dip" android:src="@drawable/left_arrow" />
    </LinearLayout>
    <LinearLayout android:id="@+id/rightWrapper" android:clickable="true" android:layout_centerVertical="true" style="@style/WrapContent">
        <ImageView android:layout_gravity="center_vertical" android:id="@+id/rightArrow" android:layout_width="50.0dip" android:layout_height="30.0dip" android:src="@drawable/right_arrow" />
        <TextView android:textSize="12.0dip" android:layout_gravity="center_vertical" android:id="@+id/rightLabel" android:layout_marginRight="8.0dip" android:text="@string/news" android:singleLine="true" style="@style/TextLabel" />
    </LinearLayout>

</RelativeLayout> 
```

这是logcat

```
03-08 11:37:00.585: E/AndroidRuntime(2374): FATAL EXCEPTION: main
03-08 11:37:00.585: E/AndroidRuntime(2374): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.groupab.newradio/com.groupab.newradio.MusicActivity}: android.view.InflateException: Binary XML file line #13: Error inflating class com.groupab.newradio.view.NavigationView
03-08 11:37:00.585: E/AndroidRuntime(2374):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at android.os.Looper.loop(Looper.java:123)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at android.app.ActivityThread.main(ActivityThread.java:3683)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at java.lang.reflect.Method.invokeNative(Native Method)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at java.lang.reflect.Method.invoke(Method.java:507)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at dalvik.system.NativeStart.main(Native Method)
03-08 11:37:00.585: E/AndroidRuntime(2374): Caused by: android.view.InflateException: Binary XML file line #13: Error inflating class com.groupab.newradio.view.NavigationView
03-08 11:37:00.585: E/AndroidRuntime(2374):     at android.view.LayoutInflater.createView(LayoutInflater.java:518)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at android.app.Activity.setContentView(Activity.java:1657)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at com.polontech.android.newradio.MusicActivity.onCreate(MusicActivity.java:12)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
03-08 11:37:00.585: E/AndroidRuntime(2374):     ... 11 more
03-08 11:37:00.585: E/AndroidRuntime(2374): Caused by: java.lang.reflect.InvocationTargetException
03-08 11:37:00.585: E/AndroidRuntime(2374):     at java.lang.reflect.Constructor.constructNative(Native Method)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at android.view.LayoutInflater.createView(LayoutInflater.java:505)
03-08 11:37:00.585: E/AndroidRuntime(2374):     ... 21 more
03-08 11:37:00.585: E/AndroidRuntime(2374): Caused by: java.lang.RuntimeException: native typeface cannot be made
03-08 11:37:00.585: E/AndroidRuntime(2374):     at android.graphics.Typeface.<init>(Typeface.java:147)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at android.graphics.Typeface.createFromAsset(Typeface.java:121)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at com.groupab.newradio.view.NavigationView.<init>(NavigationView.java:41)
03-08 11:37:00.585: E/AndroidRuntime(2374):     at com.groupab.newradio.view.NavigationView.<init>(NavigationView.java:33)
03-08 11:37:00.585: E/AndroidRuntime(2374):     ... 24 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:08:47.707

inflate 方法需要以下形式的布局 id：R.layout.XXX。我将从顶级元素中删除 id 标识符 navView1 并改为引用 xml 布局文件的名称。因此，如果您将 xml 布局文件命名为 navView1，您将简单地引用为 R.layout.navView1。

# java - Android 确定给定日期/时间是否在设备上的 DST 下

> ID：15295343
> 
> 赞同：4
> 
> 时间：2013-03-08T13:43:13.990
> 
> 标签：java, android

给定设备中的当前用户设置，是否可以确定给定的日期/时间是否处于夏令时？我不是在问手机当前是否有夏令时。我需要知道使用手机中当前设置的给定（未来）日期是否会在 DST 下。我可以使用 Date()、Calendar() 或 Joda。我也很好奇课程/方法如何处理歧义，例如本周日凌晨 2:30（北美）。那个时间不会存在，因为我们会跳过它。同样，在秋天，当我们后退时，凌晨 1:30 会发生两次。第一个凌晨 1:30 不是在 DST 下，但第二个是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-10T05:40:48.383

确定纪元时间是否在给定时区的 DST 中很容易。

```
public static boolean isInDst(TimeZone tz, Date time)
{
    Calendar calendar = Calendar.getInstance(tz);
    calendar.setTime(time);
    // or supply a configured calendar with TZ as argument instead

    return calendar.get(Calendar.DST_OFFSET) != 0;
} 
```

就 API 而言，将本地时间转换为纪元看起来很容易

```
 Calendar calendar = Calendar.getInstance(tz);
    calendar.set(year, month, date, hourOfDay, minute);
    Date epoch = calendar.getTime(); 
```

但由于模棱两可和差距值而变得棘手。

我编写了一个实用程序来测试模棱两可的值和间隙值，目的是使用仅限 Java 的 API（没有 Joda-Time 等），但请非常仔细地阅读 javadoc 评论，以仅在未来使用它。此外，我不会在很长一段时间内使用它，因为地方当局会不断更改 DST 规则。我在南澳大利亚（南半球 +9:30/+10:30）、纽约和豪勋爵岛（夏令时半小时！+10:30/+11:00）测试了这个实用程序，但是时间很棘手，所以使用它需要您自担风险。

```
/**
 * Utility method to help handle Day Light Savings transitions. It
 * calculates possible time values the parameters could mean and returns all
 * possible values.
 * 
 * This method should ONLY be used for detecting ambiguous times in the
 * future, and not in the past. This method WILL fail to detect ambiguous
 * times in the past when the time zone would observe DST at the specified
 * time, but no longer does for current and future times. It also can fail
 * to detect ambiguous time in the past if at the specified time the DST
 * offset was different from the latest DST offset.
 * 
 * This method can fail to detect potentially ambiguous times if the
 * calendar uses leap seconds and leap second(s) are added/removed during
 * DST transition.
 * 
 * @param calendar
 *            the calendar to use, must have the correct time zone set. This
 *            calendar will be set, do not rely on the value set in the
 *            calendar after this method returns.
 * @param year
 * @param month
 * @param dayOfMonth
 *            zero based month index as used by {@link Calendar} object.
 * @param hourOfDay
 * @param minute
 * @return Array of {@link Date} objects with each element set to possible
 *         time the parameters could mean or null if the parameters are not
 *         possible, e.g. fall into the missing hour during DST transition,
 *         or complete garbage. One element array means there is only one
 *         non-ambiguous time the parameters can mean, that is, there is no
 *         DST transition at this time. Two element array means the
 *         parameters are ambiguous and could mean one of the two values. At
 *         this time more than two elements can not be returned, but
 *         calendars are strange things and this limit should not be relied
 *         upon.
 * @throws IllegalArgumentException
 *             if setting the specified values to the calendar throws same
 *             exception {@link Calendar#set(int, int, int, int, int)} or if
 *             invalid values are found but are not due to DST transition
 *             gap.
 */
public static Date[] getPossibleTimes(
        Calendar calendar,
        int year, int month, int dayOfMonth, int hourOfDay, int minute)
        throws IllegalArgumentException
{
    calendar.clear();
    try
    {
        // if calendar is set to non-lenient then setting time in the gap
        // due to DST transition will throw exception
        calendar.set(
                year,
                month,
                dayOfMonth,
                hourOfDay,
                minute
                );
    }
    catch (IllegalArgumentException ex)
    {
        if (calendar.isLenient())
        {
            throw ex;
        }
        return null;
    }

    // if validated fields do not match input values
    // this can be when set hour is missing due to DST transition
    // in which case calendar adjusts that hours and returns values
    // different to what was set
    if (
            calendar.get(Calendar.YEAR) != year
            || calendar.get(Calendar.MONTH) != month
            || calendar.get(Calendar.DAY_OF_MONTH) != dayOfMonth
            || calendar.get(Calendar.HOUR_OF_DAY) != hourOfDay
            || calendar.get(Calendar.MINUTE) != minute
            )
    {
        // the values are not possible.
        return null;
    }

    Date value1 = calendar.getTime();

    int dstSavings = calendar.getTimeZone().getDSTSavings();
    if (dstSavings == 0)
    {
        return new Date[] { value1 };
    }

    // subtract DST offset
    calendar.add(Calendar.MILLISECOND, - dstSavings);

    // check if the resulting time fields are same as initial times
    // this could happen due to DST transition, and makes the input time ambiguous
    if (
            calendar.get(Calendar.YEAR) == year
            && calendar.get(Calendar.MONTH) == month
            && calendar.get(Calendar.DAY_OF_MONTH) == dayOfMonth
            && calendar.get(Calendar.HOUR_OF_DAY) == hourOfDay
            && calendar.get(Calendar.MINUTE) == minute
            )
    {
        Date value2 = calendar.getTime();
        return new Date[] { value2, value1, };
    }

    // checking with added DST offset does not seem to be necessary,
    // but time zones are confusing things, checking anyway.

    // reset
    calendar.setTime(value1);

    // add DST offset
    calendar.add(Calendar.MILLISECOND, dstSavings);

    // same check for ambiguous time
    if (
            calendar.get(Calendar.YEAR) == year
            && calendar.get(Calendar.MONTH) == month
            && calendar.get(Calendar.DAY_OF_MONTH) == dayOfMonth
            && calendar.get(Calendar.HOUR_OF_DAY) == hourOfDay
            && calendar.get(Calendar.MINUTE) == minute
            )
    {
        Date value2 = calendar.getTime();
        return new Date[] { value1, value2, };
    }

    return new Date[] { value1, };
} 
```

只是为了显示一些测试结果，这里是测试方法：

```
public static void test2()
{
    TimeZone tz = TimeZone.getTimeZone("America/New_York");

    System.out.format("id=%s\n", tz.getID());
    System.out.format("display=%s\n", tz.getDisplayName());
    System.out.format("raw offset=%f hours\n", tz.getRawOffset() / 1000f / 60f / 60f);
    System.out.format("dstSaving=%f minutes\n", tz.getDSTSavings() / 1000f / 60f);
    System.out.format("observesDST=%b\n", tz.observesDaylightTime());

    System.out.format("\n");

    // Time Tuple class simply holds local time, month is zero based as per Calendar
    TimeTuple [] testTimes = new TimeTuple[]{
            new TimeTuple(2014, 2, 9, 1, 59), // Non-ambiguous standard NY
            new TimeTuple(2014, 2, 9, 2, 00), // GAP NY
            new TimeTuple(2014, 2, 9, 2, 59), // GAP NY
            new TimeTuple(2014, 2, 9, 3, 00), // Non-ambiguous DST NY
            new TimeTuple(2014, 10, 2, 0, 59), // Non-ambiguous DST NY
            new TimeTuple(2014, 10, 2, 1, 00), // Ambiguous DST in NY
            new TimeTuple(2014, 10, 2, 1, 59), // Ambiguous DST in NY
            new TimeTuple(2014, 10, 2, 2, 00), // Non-ambiguous standard NY
    };

    Calendar calendar = GregorianCalendar.getInstance(tz);
    Date[] possibleTimeValues = null;
    for (TimeTuple tt: testTimes)
    {
        possibleTimeValues = getPossibleTimes(
                calendar,
                tt.year, // year
                tt.month, // zero based month
                tt.dayOfMonth, // date
                tt.hourOfDay, // hours
                tt.minute // minutes
                );
        printTimeAmbiguouity(calendar, possibleTimeValues, tt);
    }
}

static DateFormat TZ_FORMAT = new SimpleDateFormat("Z zzzz");

static DateFormat DATE_FORMAT = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.S Z zzzz");

public static void printTimeAmbiguouity(Calendar calendar, Date[] possibleTimeValues, TimeTuple tt)
{
    TZ_FORMAT.setTimeZone(calendar.getTimeZone());
    DATE_FORMAT.setTimeZone(calendar.getTimeZone());

    System.out.format("\tinput local time   %s ----- ", tt.toString());

    if (possibleTimeValues == null)
    {
        System.out.format("Impossible/invalid/DST_gap\n");

        calendar.set(tt.year, tt.month, tt.dayOfMonth, tt.hourOfDay, tt.minute);
        Date adjustedTime = calendar.getTime();
        calendar.add(Calendar.HOUR, -6);
        Date limitTime = calendar.getTime();
        Date preTranstionTime = getPreviousTransition(calendar, adjustedTime, limitTime);
        Date postTranstionTime = new Date(preTranstionTime.getTime() + 1);

        System.out.format(
                "\tadjusted           %s\n\ttranstion   from   %s\n\t              to   %s\n",
                DATE_FORMAT.format(adjustedTime),
                DATE_FORMAT.format(preTranstionTime),
                DATE_FORMAT.format(postTranstionTime));
    }
    else if (possibleTimeValues.length == 1)
    {
        System.out.format("NonAmbiguous Valid\n");
        System.out.format("\ttimezone           %s\n", TZ_FORMAT.format(possibleTimeValues[0]));
    }
    else
    {
        System.out.format("Ambiguous\n");
        for (Date time: possibleTimeValues)
        {
            System.out.format("\tpossible value     %s\n", TZ_FORMAT.format(time));
        }
    }
    System.out.format("\n");
} 
```

我不包括 getPreviousTransition() 方法，因为我认为代码更不适合生产。

测试输出：

```
id=America/New_York
display=Eastern Standard Time
raw offset=-5.000000 hours
dstSaving=60.000000 minutes
observesDST=true

input local time   2014-02-09 01:59 ----- NonAmbiguous Valid
timezone           -0500 Eastern Standard Time

input local time   2014-02-09 02:00 ----- Impossible/invalid/DST_gap
adjusted           2014-03-09 03:00:00.0 -0400 Eastern Daylight Time
transtion   from   2014-03-09 01:59:59.999 -0500 Eastern Standard Time
              to   2014-03-09 03:00:00.0 -0400 Eastern Daylight Time

input local time   2014-02-09 02:59 ----- Impossible/invalid/DST_gap
adjusted           2014-03-09 03:59:00.0 -0400 Eastern Daylight Time
transtion   from   2014-03-09 01:59:59.999 -0500 Eastern Standard Time
              to   2014-03-09 03:00:00.0 -0400 Eastern Daylight Time

input local time   2014-02-09 03:00 ----- NonAmbiguous Valid
timezone           -0400 Eastern Daylight Time

input local time   2014-10-02 00:59 ----- NonAmbiguous Valid
timezone           -0400 Eastern Daylight Time

input local time   2014-10-02 01:00 ----- Ambiguous
possible value     -0400 Eastern Daylight Time
possible value     -0500 Eastern Standard Time

input local time   2014-10-02 01:59 ----- Ambiguous
possible value     -0400 Eastern Daylight Time
possible value     -0500 Eastern Standard Time

input local time   2014-10-02 02:00 ----- NonAmbiguous Valid
timezone           -0500 Eastern Standard Time 
```

# php - 为什么构造函数不发送数组来查看？

> ID：15295349
> 
> 赞同：0
> 
> 时间：2013-03-08T13:43:36.137
> 
> 标签：php, codeigniter

我的**admin.php**控制器中有这样的东西：

```
function __construct()
{
    parent::__construct();
    if (!$this->session->userdata('logged_in_admin') )
    {
        redirect('admin/login');
    }
    $this->load->model('mdl_admin');
    $data['my_test_variable'] = "This is test!";
}

public function index()
{
    $data['header'] = "Home";
    $this->load->view('admin_frontpage', $data);
} 
```

在我看来：

```
<?php echo $header; ?>
<?php echo $my_test_variable; ?> 
```

但只有**标头**变量被回显。即使发送到视图文件的 $data 数组也包含**my_test_variable**。

这是为什么？

我究竟做错了什么？

即使我尝试例如：

```
 $this->data['my_test_variable'] = "This is test!"; 
```

它不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:47:43.790

但是`$data`发送到视图的数组也不包含`my_test_variable`。在`index()`函数中，您在将其发送到视图时并未设置该值。

In `__construct()`,`$data`是仅在`__construct()`函数内可见的局部变量。如果您想在函数之外访问它，也许在`index()`函数中，一种选择是将其设为实例属性。

例如`$data['my_test_variable']`，您可以使用`$this->data['my_test_variable']`, then, in `index()`, again 代替 , 代替`$data`, 您可以使用`$this->data`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:09:03.287

通过视图传递您的数据

```
 function __construct()
      {
           parent::__construct();
            if (!$this->session->userdata('logged_in_admin') )
            {
              redirect('admin/login');
            }
           $this->load->model('mdl_admin');

         }

       public function index()
         {
             $data['header'] = "Home";
             $data['my_test_variable'] = "This is test!";
             $this->load->view('admin_frontpage', $data);
         } 
```

试试这个....

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T13:47:25.260

首先，您在 PHP 中隐式创建变量——这是不好的做法。您不应该在不存在的变量中设置数组键。启用正确的错误报告设置后，这将给您带来问题。

所以，首先，让我们解决这个问题：

```
function __construct() {
    parent::__construct();

    if (!$this->session->userdata('logged_in_admin')) {
        redirect('admin/login');
    }

    $this->load->model('mdl_admin');

    $data = array();
    $data['my_test_variable'] = "This is test!";
}

public function index() {
    $data = array();
    $data['header'] = "Home";
    $this->load->view('admin_frontpage', $data);
} 
```

而且，在这样做时，我认为您现在应该能够看到您的问题。`__construct()`和方法使用不同的`index()`堆栈执行。这意味着您*在*其中一个声明的变量对另一个不可用。为了使这项工作，您必须做的是利用您正在创建的类的实例变量，如下所示：

```
class MyView {
    protected $data = array();

    function __construct() {
        parent::__construct();

        if (!$this->session->userdata('logged_in_admin')) {
            redirect('admin/login');
        }

        $this->load->model('mdl_admin');
        $this->data['my_test_variable'] = "This is test!";
    }

    public function index() {
        $this->data['header'] = "Home";
        $this->load->view('admin_frontpage', $this->data);
    }
} 
```

现在你应该得到你所追求的

# asp.net - silverlight文件上传和asp.net文件上传控制的区别？

> ID：15295350
> 
> 赞同：0
> 
> 时间：2013-03-08T13:43:39.473
> 
> 标签：asp.net, silverlight, file-upload, azure, silverlight-4.0

我正在尝试上传大小超过 30 mb 的大文件，如果我使用 silverlight 文件上传控件上传，将 30 mb 文件上传到服务器几乎不需要一分钟，如果我尝试使用 asp.net 文件上传上传相同的文件控件或telerik rad上传控件将文件上传到天蓝色存储需要永远，我可以知道这两个控件之间有什么区别，silverlight控件有什么特别之处，上传速度如此之快？

我尝试asp.net文件上传的原因是我需要在文件上传完成后立即发送一封邮件，其中包含文件名和文件位置，我可以通过在后面的代码中捕获文件名来在asp.net代码中执行此操作，怎么能我使用银灯文件上传控件实现了这个功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:59:34.243

您是否查看过控件的正确配置？一些控件具有诸如按块发送数据的配置。按块发送数据可能会影响服务器对客户端的请求/响应时间，反之亦然。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T13:56:21.957

As per my knowledge in Silverlight you can uploaded file on server by WCF service. In WCF service where you just uploaded file content data in bytes format. While you using uploading web page at that time other control like textbox, dropdown etc that's carry viewstate. So uploading your file content with that data are also uploaded on server, so it will affect for uploading speed by web form.

# php - 递归PHP函数未返回预期值

> ID：15295353
> 
> 赞同：0
> 
> 时间：2013-03-08T13:43:44.653
> 
> 标签：php, function, recursion, return

我正在尝试创建一个函数，该函数将为存储在数据库中的每个用户创建一个唯一的用户名。

我的计划是通过连接名字和姓氏来创建一个用户名，然后检查是否使用了这个用户名。如果不只是将其存储在数据库中，并且如果是，则在其末尾添加一个数字。

例如，如果使用 ConnorAtherton，该函数接下来会检查 ConnorAtherton1、ConnorAtherton2，直到找到唯一的用户名。

这是函数（我添加了一些用于调试的回显语句）

```
 function createUserName($username, $counter){

        global $fname, $lname;

        echo "\t\t\tUsername at Start - " . $username . "\n";

        // connect to database
        require($_SERVER['DOCUMENT_ROOT'] . "/inc/db.connect.php");

        $stmt = $conn->prepare('SELECT * FROM users WHERE username = ?');
        $stmt->bind_param('s', $username); 
        $stmt->execute();
        $stmt->store_result();

        echo "\t\t\tUsername before loop - " . $username . "\n";

            if( $stmt->num_rows > 0){

                //construct original name and try again
                $username = ucfirst($fname) . ucfirst($lname) . $counter;
                $counter++;
                createUserName($username, $counter);

            }

            echo "\t\t\tUsername after loop - " . $username . "\n\n";

            return $username;
    } 
```

这是它返回到控制台的内容

```
 Username at Start - ConnorAtherton
    Username before loop - ConnorAtherton
    Username at Start - ConnorAtherton1
    Username before loop - ConnorAtherton1
    Username at Start - ConnorAtherton2
    Username before loop - ConnorAtherton2
    Username after loop - ConnorAtherton2

    Username after loop - ConnorAtherton1 
```

它在循环（ConnorAtherton2）开始后返回正确的值，但我不知道为什么循环后会有第二个值。

它返回 ConnorAtherton1，我需要它返回 ConnorAtherton2。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T13:47:55.087

代码按预期执行。您所看到的只是从递归调用中展开的堆栈。

您应该通过返回递归调用的结果来修改函数以在递归调用后退出

```
 //...
    $counter++;
    return createUserName($username, $counter);
 }
 //... Rest of fn omitted 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:54:27.263

您可以在不使用递归的情况下更轻松地实现您想要的。基本逻辑如下所示：

```
$counter = '';
do {
    $username = ucfirst($fname) . ucfirst($lname) . ($counter++);
} while(!doesNameExist($username)); 
```

您只需要实现该`doesNameExist()`方法。`true`如果名称已经存在，您可以在那里进行数据库查询并返回。

该`($counter++)`部分将在第一次迭代时附加一个空字符串（`++`后缀在评估值*后增加变量）。*

# r - 操作后将二进制文件写入不同的目录？

> ID：15295357
> 
> 赞同：1
> 
> 时间：2013-03-08T13:44:06.967
> 
> 标签：r

我在一个名为list1的文件夹中有4个文件作为矩阵586 * 1383，在另一个名为list2的文件夹中有4个文件作为矩阵（list1和flist2具有相同的尺寸）。

我想根据文件夹 list2 中的文件过滤文件夹 list1 中的文件。因此，只要文件夹 list1 像素中的相应文件的值大于 1000，我就想用 NA 替换文件夹 list2 中的文件中的值。

:这里是要下载的文件：

1-我尝试了这个循环，但是当我写结果时，我得到了一些奇怪的东西，这意味着我的循环不正确，结果是大小为 1kb 的文件而不是矩阵（正确的大小应该是 3166kb）。我很感激得到任何帮助我的循环更正了。

```
dir1<- list.files("C:\\list1", "*.img", full.names = TRUE)
dir2<- list.files("C:\\list2", "*.img", full.names = TRUE)
 results<- list()
for (.files in seq_along(dir1)){
      list1 <- readBin(dir1[.files], numeric(), size = 4, n = 1383*586, signed = TRUE)   
      list2 <- readBin(dir2[.files], integer(), size = 2, n = 1383*586, signed = TRUE)                  
      results[[length(results) + 1L]]<- list1[list2 > 1000] <- NA}

     for (i in seq_along(results)){
     fileName <- sprintf("C:\\NewFile%03d.bin", i)
     writeBin(as.double(results[[i]]), fileName, size = 4)} 
```

2-谁能告诉我什么代码错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:04:27.733

正如我上面评论的那样，问题出在以下行：

```
results[[length(results) + 1L]]<- list1[list2 > 1000] <- NA 
```

此行分配`NA`给`list1[list2 > 1000]` **和** `results[[length(results) + 1L]]`。我会将它们分成两行，如下所示：

```
list1[list2 > 1000] <- NA
results[[length(results) + 1L]] <- list1 
```

另外，提个建议。让您的列表每次都“增长”是不明智的。由于您已经知道列表的大小，因此最好在for 循环`results` **之前分配它们。**因为，如果不是，每次您分配`results[[length(results) + 1]]`时，它都会复制整个对象以创建另一个元素，并且随着列表变长，它会非常慢。所以，要实现它就像：

```
results <- vector("list", length(dir1)) # create list with required size ( values set to NULL)
> length(results)
# [1] 4

for( i in seq_along(dir1)) {
    # load list1
    # load list2
    # assign NA
    results[[i]] <- list1 # assign using index i, all values of i exists, 
                          # as they are already assigned.
} 
```

# java - 如何使用 Cassandra 数据库对用户进行身份验证

> ID：15295360
> 
> 赞同：0
> 
> 时间：2013-03-08T13:44:17.417
> 
> 标签：java, cassandra, hector

我想创建一种对用户进行身份验证的方法。在 mysql 我做：

```
SELECT user_id FROM customers WHERE `username` = 'the_username' AND `password` = 'the_password' 
```

如果查询未返回空结果集，则用户已获得授权。Cassandra 希望我预先知道行键 (user_id)。如何检查列族中的所有行是否存在我不知道行键的用户名和密码。

我正在使用 Hector api 连接到 Cassandra 1.2.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:06:51.063

一些可能的解决方案：

1.  使用用户名作为行键
2.  在用户名上创建二级索引

我会用第一个。如果用户名是唯一的（我假设），则不需要 user_id

# c++ - C++ 的 STL 的 unary_function（在 gcc 4.7.x 中实现）可以有虚函数吗？

> ID：15295361
> 
> 赞同：0
> 
> 时间：2013-03-08T13:44:20.650
> 
> 标签：c++, stl, unary-function

`binder2nd`源自`unary_function`。

以下代码段不起作用：

```
greater<int> g;

    //greater is derived from binary_function

//bind2nd returns binder2nd object and binder2nd is derived from unary_function

const unary_function<int,bool> &greater_than_0 = bind2nd(g, 0);

    // base class reference type holding reference to derived class object

remove_if(lst.begin(), lst.end(), greater_than_0);
    //does not work 
```

而以下代码片段有效：

```
greater<int> g;

const binder2nd< greater<int> > &greater_than_0 = bind2nd(g, 0);

remove_if(lst.begin(), lst.end(), greater_than_0); 
```

`unary_function`在第一个代码片段中使用虚拟虚函数是否会有所帮助。这可以改善 STL 的使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:01:20.070

`unary_function`是一种方便的类型，它向派生类添加了几个 typedef。它**不是**多态的；如果您编写的代码在类定义中通过名称提及它而不是作为基类，那么您几乎可以肯定犯了一个错误。

# wordpress - 从 RewriteRule 中排除文件夹/目录

> ID：15295366
> 
> 赞同：8
> 
> 时间：2013-03-08T13:44:37.787
> 
> 标签：wordpress, .htaccess, mod-rewrite

我有一个非常标准的 WordPress .htaccess，其中包含以下 URL 重写

```
# BEGIN WordPress 
<IfModule mod_rewrite.c>  
RewriteEngine On  
RewriteBase /  
RewriteRule ^index\.php$ - [L]  
RewriteCond %{REQUEST_FILENAME} !-f  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteRule . /index.php [L]  
</IfModule> 
# END WordPress 
```

WordPress 安装在我的域根目录中。我在子文件夹中有一些其他脚本，例如 /opencart 这些子文件夹包含它们自己的 .htaccess 文件。

不幸的是，WordPress 似乎有时会劫持其中一些脚本的重写。

当遇到特定子文件夹（例如 opencart）时，我如何要求 mod_rewrite 忽略 WordPress 重写规则，并使用这些子文件夹中的 .htaccess 中定义的规则？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-08T15:39:15.087

您可以尝试用这个替换完整的 WP 规则集：

```
# BEGIN WordPress
RewriteEngine On
RewriteBase /
RewriteRule ^index.php$ - [L]

# Include in the next line all folders to exclude
RewriteCond %{REQUEST_URI}  !(folder1|folder2|folder3) [NC]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
# END WordPress 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-10-14T03:52:10.657

在站点根目录的 .htaccess 文件中，在 WordPress .htaccess 指令上方添加以下内容：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} ^/subdirectoryname1/(.*)$ [OR]
RewriteCond %{REQUEST_URI} ^/subdirectoryname2/(.*)$ [OR]
RewriteRule ^.*$ - [L]
</IfModule> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-22T04:17:12.857

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]

RewriteRule ^/(folder1)/(.*) /folder1/$2 [R]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule . /index.php [L,R]

</IfModule>

# END WordPress 
```

# asp.net - 如何使用 VB.Net 自动填充 Word 文档

> ID：15295368
> 
> 赞同：0
> 
> 时间：2013-03-08T13:44:41.010
> 
> 标签：asp.net, vb.net, ms-word, ms-office

我想创建一个 Microsoft Word 模板，我可以让 VB.net 项目使用数据库值自动填充特定字段。我的问题是如何最好地使用 Word 来解决这个问题。我应该创建模板并添加字段、书签或其他内容吗？我查看了字段，但没有看到创建自定义字段名称的方法。理想情况下，我想创建一组模板，这些模板具有我的应用程序可以识别和填写的相同“字段”名称。任何建议都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T10:07:26.357

我建议您按照 MSDN 上的指南进行操作：

[http://social.msdn.microsoft.com/Forums/en/vbide/thread/1558f560-8ae6-413a-bbc4-aa8d5d912aac](http://social.msdn.microsoft.com/Forums/en/vbide/thread/1558f560-8ae6-413a-bbc4-aa8d5d912aac)

本质上，您将创建一个带有占位符的文档，然后使用 VB 打开文档并替换这些占位符。

# javascript - 检测是否有人在看 firebug/chrome 控制台？

> ID：15295369
> 
> 赞同：0
> 
> 时间：2013-03-08T13:44:45.043
> 
> 标签：javascript, debugging, browser

我想和几个朋友开个玩笑。因为我不想在每个页面都多打几次服务器，所以我希望代码短路，所以只有当这个人有 firebug 或 chrome 控制台时才会执行。

有没有办法检测他们是否正在使用控制台？

如果你很好奇，因为[除非在控制台中才能看到这个笑话](https://github.com/escusado/console.meme/blob/master/README.md)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:00:27.717

我认为你需要的是：

```
 if (typeof window.console != 'undefined') {
     // Console is available. Do something.
 } 
```

# node.js - 有没有办法从生成的 NACHA 文件自动向银行支付 NACHA 批处理文件？

> ID：15295370
> 
> 赞同：0
> 
> 时间：2013-03-08T13:44:53.360
> 
> 标签：node.js, payment

有没有办法从生成的 NACHA 文件自动向银行支付 NACHA 批处理文件？

我想将客户的银行信息输入系统，然后获取该信息并生成付款给

我的帐户有一个批处理文件。

这怎么能用 node.js 来完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-06-14T03:08:05.970

任何使用过多种数据格式并熟悉 NACHA（或 ACH）文件格式的人都知道它很糟糕。这是一个固定宽度的文件，行与行不一致，几乎无法使用。美国的银行需要与美联储等组织一起使用这种格式，但精通技术的银行不会要求其客户使用这种格式。

您可能会询问您的银行是否接受 NACHA 格式文件以外的文件格式。例如，我们的银行接受 NACHA、XML、EDI820、ISO20022、.CSV、固定宽度和更易于使用的分隔文件。我们还会在这些付款开始后向系统提供有关这些付款状态的信息。

对于自动化部分，绝对。文件可以使用 PGP 自动加密，通过 SFTP 传输。同样，一些银行也会通过 SFTP 向您发送文件，或者拥有一个服务器，您可以在其中提取数据。有许多免费的开源应用程序可以帮助您完成此任务。WinSCP 和 Cleopatra 是两个广泛使用的应用程序，它们可以保证数据的安全并将其送到需要的地方。

如果您的银行家无法为您提供这些功能，或者您正在寻找技术娴熟的银行，请随时致电我们的资金管理部门，电话 913-563-5600 并要求他们安排与 IT 的技术通话工作人员，我们可以帮助您的团队指明正确的方向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-13T14:43:55.043

**更新**

我已经开源了一个名为 nACH2 的 ACH 文件生成库

[https://github.com/glenselle/nACH2](https://github.com/glenselle/nACH2)

* * *

这已经有一段时间了，但是对于任何感兴趣的人，有一个名为[nacha](https://github.com/bitfloor/nacha)的 NPM 模块可以满足您的需求。它是由比特币交易公司 Bitfloor 制作的，该公司最近在遭到黑客攻击后关门大吉。它仍然在他们幽灵般的 Github 帐户上，我联系了写它的人。他说他已经在生产中使用了几个月，没有出现任何问题。但是......他会建议投入一些工作来添加更多测试，使模块更具可扩展性，并且只是测试它以确保它生成正确的文件。我已经看过它，我可能会尝试为我正在工作的公司重新编写 NPM 模块，然后将其开源，以便其他人可以受益。同时，您可以查看用于生成 ACH NACHA 文件的 NPM 模块。

# javascript - javascript改变元素背景

> ID：15295381
> 
> 赞同：3
> 
> 时间：2013-03-08T13:45:31.400
> 
> 标签：javascript

这是 HTML

```
<p>texjksdgfjl sdjfg sjdfg</p>
<p>&nbsp;</p>
<p>texjksdgfjl sdjfg sjdfg</p>
<p>&nbsp;</p>
<p>texjksdgfjl sdjfg sjdfg</p> 
```

这是 JavaScript

```
var d = document.getElementsByTagName("p"); 

for (var i=0;i<d.length;i++)
{ 
    var text = d[i].textContent;

    if (text.length===1){
        d[i].style.background ='blue';
    }
    else {
        d[i].setAttribute("backgroundColor", "red");
    }
} 
```

（显然）我可以做我想做的事 - 包含一些文本的 p 元素的不同背景，而不是生成为 < p > & nbsp; 的 p 元素。</p>

但是为什么 setAttribute 不起作用？我一定错过了一些非常简单的东西，但对于我的生活，我无法想象它是什么。请纯 JS，没有 jQuery，没有 MooTools，没有其他库。

这是测试小提琴：[在此处输入链接描述](http://jsfiddle.net/flish/3Lze5/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T13:51:07.180

好吧，该`setAttribute`功能并没有像您认为的那样做。

如果您检查 jsfiddle 中的元素，您会看到：

```
... <p backgroundcolor="red" ...> 
```

这*绝对*不是你想要的。你想要的是这样的：

```
setAttribute("style", "background-color: red;"); 
```

所以它会变成

```
... <p style="background-color: red;" ...> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T13:48:27.587

`backgroundColor`不是 HTML 元素的属性。您可以使用`bgcolor`，但使用 CSS 会更好。

您可以像这样向节点添加一个类：

`d[i].className += " myClass";`

然后设置一个CSS规则

```
.myClass
{
  backgroundColor: "red"

} 
```

或者，如果您坚持将其硬连线到您可以使用的 DOM

```
d[i].style.backgroundColor =  "red" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:49:47.253

Assming Page 而不是您的元素，您可以阅读以下教程以通过 javascript 更改背景：

[http://codeforbrowser.com/blog/changeing-background-color-using-javascript-and-jquery/](http://codeforbrowser.com/blog/changing-background-color-using-javascript-and-jquery/)

```
<script type="text/javascript">
        function changebackground() {
            var colors = ["#0099cc","#c0c0c0","#587b2e",
"#990000","#000000","#1C8200","#987baa","#464646",
"#AA8971","#1987FC","#99081E"];

            setInterval(function() {
                var bodybgarrayno = Math.floor(Math.random() * colors.length);
                var selectedcolor = colors[bodybgarrayno];
                document.body.style.background = selectedcolor;
            }, 3000);
        }
        </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T13:49:59.263

你必须这样做：

```
var d = document.getElementsByTagName("p"); 

for (var i=0;i<d.length;i++)
{ 
    var text = d[i].textContent;

    if (text.length===1){
        d[i].style.background ='blue';
    }
    else {
        d[i].style.background ='red';
    }
} 
```

或者

```
var d = document.getElementsByTagName("p"); 

for (var i=0;i<d.length;i++)
{ 
    var text = d[i].textContent;

    if (text.length===1){
        d[i].style.background ='blue';
    }
    else {
        d[i].setAttribute("style", "background-color:red;");
    }
} 
```

[http://jsfiddle.net/3Lze5/6/](http://jsfiddle.net/3Lze5/6/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T13:51:35.743

采用：

```
d[i].style.setProperty("background", "red"); 
```

代替

```
d[i].setAttribute("backgroundColor", "red"); 
```

# javascript - 将 SVG 解析为 Raphael Javascript

> ID：15295383
> 
> 赞同：1
> 
> 时间：2013-03-08T13:45:41.270
> 
> 标签：javascript, svg, raphael

好吧，我知道有些人已经问过这个问题了。然而，这些问题已经存在大约两年了，我查看了他们建议的库的链接，但它们都不能满足我的需要。我已经在谷歌上广泛搜索，试图获得一些帮助，并找到了一些好东西，但仍然没有做我需要他们做的事情。

我目前正在使用[这个插件](https://github.com/crccheck/raphael-svg-import-classic)。除了它不支持包含图像填充的 svg 对象（例如矩形或圆形）之外，这非常有效。我收到了一篇关于你不应该在 SVG 中使用图像的精彩讲座。我知道。如果有人可以帮助我弄清楚如何让这个插件与图像填充一起工作，或者可能将我指向一个这样做的方向，那就太好了。如果不好，还是谢谢。

# php - Joomla，如何禁用“Flash Uploader”

> ID：15295384
> 
> 赞同：0
> 
> 时间：2013-03-08T13:45:46.387
> 
> 标签：php, flash, joomla, uploader

请大师们，我是joomla的新手。如何在**1.5.0 版本**中禁用“Flash Uploader” ？

似乎全局配置中不存在此选项！

您能否建议我使用任何 PHP 行来解决它？太感谢了。

![在此处输入图像描述](../Images/d2e27744f63726c23c54ce4969bf7103.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:05:25.453

Joomla 1.5.26 没有可用的选项，并且永远不必禁用**flash 上传**器。如果您不想使用**Flash 上传**器，那么您限制用户在您的 Joomla 1.5.0 中使用它。为此，这里是导航：

全局配置 -> 系统选项卡 -> 在媒体设置下 -> 禁用**限制上传**

![在此处输入图像描述](../Images/ed963486df8d252c113c24c7532e16f1.png)

# php - Facebook 应用程序选项卡中的动态网址

> ID：15295387
> 
> 赞同：1
> 
> 时间：2013-03-08T13:45:55.327
> 
> 标签：php, facebook, facebook-iframe

我是 facebook 应用程序的新手，我正在尝试将我的 php 应用程序的第一个应用程序创建为 iframe，我已经使用

[http://developer.facebook.com](http://developer.facebook.com)。

但在页面标签网址中，我需要一些动态网址，例如： 我想设置网址，例如：

[http://mydomain.com/index.php?r=site/index&user_id=some_dynamic_value](http://mydomain.com/index.php?r=site/index&user_id=some_dynamic_value)

如何为标签网址设置此动态网址，有人可以建议我吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:31:08.227

如果您想根据使用此应用程序的页面在页面选项卡上显示不同的内容。这是我的一个简单应用程序的代码...

```
 <?php
    include_once 'facebook.php';
    include_once 'class/database.class.php';
    $db = new Database();
    $app_id = "$your_app_id";
    $app_secret = "$your_app_secret_key";
    $facebook = new Facebook(array(
    'appId' => $app_id,
    'secret' => $app_secret,
    'cookie' => true
    ));
    ?>
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
      <!-- Header content -->
    </head>
    <body>
    <!-- Your body Content Here -->   
    <div>
    <div>
    <?php
    $signed_request = $facebook->getSignedRequest();

    $page_id = $signed_request["page"]["id"];
    $app_id = $signed_request["page"]["id"];
    $page_admin = $signed_request["page"]["admin"];
    $like_status = $signed_request["page"]["liked"];
    $country = $signed_request["user"]["country"];
    $locale = $signed_request["user"]["locale"];

    if($page_id){
        $sql="select * from coupon where page_id=" . $page_id . "";
        $result=$db->fetch_all_array($sql);
        $heading=$result[0]['heading'];
        $desc=$result[0]['desc'];
        $img=$result[0]['img']; 
    ?>
    <h1><?php echo $heading?></h1>
    <img src="<?php echo $img; ?>">
    <p><?php echo $desc; 
    }
    ?></p>
    </div>
    </div> 
    </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:58:18.320

我认为你在这里有一个错误：

```
$page_id = $signed_request["page"]["id"];
$app_id = $signed_request["page"]["id"]; 
```

# javascript - 无法通过 JS 或 jQuery 设置规则“指针事件”？

> ID：15295393
> 
> 赞同：6
> 
> 时间：2013-03-08T13:46:23.833
> 
> 标签：javascript, jquery, css

我必须在运行时操纵与元素的交互，使其不可见且“不可交互”。可以完成第二个的规则是“指针事件：无”

问题是它无法从 JS 或 jQuery 中识别出来……为什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-08T13:50:24.640

我不认为我理解这个问题，但是（使用 jQuery）

```
$( document.body ).css( 'pointer-events', 'none' ); 
```

可以很好地支持浏览器（忽略任何指针事件）。但是，如果您*删除/隐藏*元素，如果您将其隐藏，指针事件当然也将不再起作用

```
display: none 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-28T22:04:43.577

您可以使用 css`pointer-events: none;`来允许事件通过。此外，就像 1j01 评论的那样，jquery 将接受 camelCase 来解决名称中的破折号问题：

```
$('.my-class').css({pointerEvents: "none"}) 
```

# android - 错误 - 类均衡器 - 方法 getBand() 和 getBandFreqRange(short band)

> ID：15295398
> 
> 赞同：1
> 
> 时间：2013-03-08T13:46:36.977
> 
> 标签：android, equalizer

我不知道我能做些什么来解决这些问题。我正在实现一个 MediaPlayer + Equalizer 应用程序。我的 MediaPlayer 工作正常，但是，我的均衡器有问题：它的某些方法不起作用。

```
public class MainActivity extends Activity {

    private MediaPlayer mediaPlayer;
    private Equalizer equalizer;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mediaPlayer = new MediaPlayer();
        try {
            mediaPlayer.setDataSource("/sdcard/titanium.mp3");
            mediaPlayer.prepare();
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SecurityException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        mediaPlayer.start();

        equalizer = new Equalizer(0, 0);
        equalizer.setEnabled(true);

        int minEQLevel = equalizer.getBandLevelRange()[0];
        int maxEQLevel = equalizer.getBandLevelRange()[1];

        Log.i("kkk", "Valor de minEQLevel" + minEQLevel);
        Log.i("kkk", "Valor de maxEQLevel" + maxEQLevel);

        short numberOfBand = equalizer.getNumberOfBands();
        Log.i("kkk", "Número de bandas = "+numberOfBand);

            /******From here to down the methods don't work *****/

        try {
                    short band = equalizer.getBand(Integer.valueOf(50000));
            Log.i("kkk", "getBand() = "+band);
            short band = 0;
            //int menor = equalizer.getBandFreqRange(band)[0];
            //int maior = equalizer.getBandFreqRange(band)[1];
            //Log.i("kkk", "Menor = "+menor);
            //Log.i("kkk", "Maior = "+maior);
        } catch (IllegalArgumentException e) {
            Log.i("kkk", "Bad parameter value");
        } catch (UnsupportedOperationException e) {
            Log.i("kkk", "get parameter() rejected");
        } catch (IllegalStateException e) {
            Log.i("kkk", "get parameter() called in wrong state");
        }

    }

} 
```

以下方法正常工作： getBandLevelRange(); getNumberOfBands();

以下方法不起作用。我收到消息错误：参数值错误。获取带（）；getBandFreqRange(); 最后一个被评论，但当它不是也不起作用时。

在 getBand() 方法中，我已经尝试了几个参数值，例如：50000、1000000。AudioFx 库示例中支持的频率。

为什么这些方法不起作用？？？我原谅设置什么了吗？？？

tks。

# c - 用字符串切换

> ID：15295400
> 
> 赞同：0
> 
> 时间：2013-03-08T13:46:45.137
> 
> 标签：c, switch-statement, case-statement

不知何故，我的 switch 语句没有经过我的任何案例，但它不应该合二为一吗？（我使用[https://stackoverflow.com/a/4014981/960086](https://stackoverflow.com/a/4014981/960086)作为参考）。

没有输出，之后应用程序被阻塞。

```
#include <stdio.h>

#include <stdlib.h>

#define BADKEY -1
#define string1 1
#define string2 2
#define string3 3
#define string4 4
char *x = "string1";

typedef struct {char *key; int val; } t_symstruct;

static t_symstruct lookuptable[] = {
    { "string1", string1 }, { "string2", string2 }, { "string3", string3 }, { "string4", string4 }
};

#define NKEYS (sizeof(lookuptable)/sizeof(t_symstruct))

int keyfromstring(char *key) {
    int i;
    for (i=0; i < NKEYS; i++) {
        t_symstruct *sym = lookuptable + i;
        printf("before: \n");
        if (strcmp(sym->key, key) == 0) { //creates the ERROR
            printf("inside: \n");
            return sym->val;
        }
        printf("after: \n");
    }
    return BADKEY;
}

void newFunction(char *uselessVariable) {
    printf("keyfromstring(x): %i \n", keyfromstring(x));
            switch(keyfromstring(x))      {
                case string1:
                   printf("string1\n");
                   break;
            case string2:
                   printf("string2\n");
                   break;
            case string3:
                   printf("string3\n");
                   break;
            case string4:
                   printf("string4\n");
                   break;
           case BADKEY:
                printf("Case: BADKEY \n");
                break;
        }
}

int main(int argc, char** argv) {
    newFunction(line);
    return (EXIT_SUCCESS);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T14:14:54.093

*   您`lookuptable[]`在“string1”之后有一个空格，这与其他条目不一致。我有一种感觉，你不想要这个。
*   您`keyfromstring()`的增量`sym`错误（这会导致段错误）。用。。。来代替：

* * *

```
int keyfromstring(char *key)
{
    int i;
    for (i=0; i < NKEYS; i++) {
        t_symstruct *sym = lookuptable + i;
        if (strcmp(sym->key, key) == 0)
            return sym->val;
    }
    return BADKEY;
} 
```

或者

```
int keyfromstring(char *key)
{
    int i;
    for (i=0; i < NKEYS; i++) {
        if (strcmp(lookuptable[i].key, key) == 0)
            return lookuptable[i].val;
    }
    return BADKEY;
} 
```

* * *

*   把你的`printf("Case: nothing happen\n");`里面一个`default`.

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-08T13:49:48.293

你不能那样做。`switch`适用于整数（常量），而您的字符串不是其中的任何一个。此外，看[这里](https://stackoverflow.com/questions/4480788/c-c-switch-case-with-string)，因为这个话题已经讨论过了。

# jmeter - 我可以让 jMeter 用户“点击”生成的链接吗？

> ID：15295403
> 
> 赞同：4
> 
> 时间：2013-03-08T13:46:47.710
> 
> 标签：jmeter

我正在研究 jmeter 的可能性，它看起来很棒。但是，我的测试脚本应该能够做的一件事是搜索一些值，然后单击随机生成的链接。所以我需要自动化的是：

*   在搜索框中输入值（我可以通过在第二页中使用正确的 GET url 来执行此操作，但我该如何执行 5000 次？）

*   单击列出的结果之一。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:11:22.623

这可以使用 CSV 数据集来完成，它会加载一个 CSV 文件，并将内容提供给您选择的变量：

[http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config](http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config)

之后，您可以使用正则表达式提取器从生成的 HTML 中提取所需的 URL，然后点击这些链接：

[http://jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor](http://jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T08:38:59.230

您可以在第二部分使用 HTML 链接解析器（单击其中一个结果）：

[http://jmeter.apache.org/usermanual/component_reference.html#HTML_Link_Parser](http://jmeter.apache.org/usermanual/component_reference.html#HTML_Link_Parser)

有关在与您的问题类似的上下文中使用链接解析器的示例，请参阅[http://theworkaholic.blogspot.co.at/2009/11/randomly-clicking-links-in-jmeter.html 。](http://theworkaholic.blogspot.co.at/2009/11/randomly-clicking-links-in-jmeter.html)

# java - Android 的代理类使用 SOAP Web 服务？

> ID：15295405
> 
> 赞同：1
> 
> 时间：2013-03-08T13:47:10.630
> 
> 标签：java, android, soap, wsdl

我想在**android 应用程序中连接到****SAOP Web 服务**(WFC) 。因此我想**生成和使用 classes**。在这个项目上设置了 SOAP - 所以我们不能使用 REST 服务。

 ****嘿，现在是 2013 年，除了使用 kSoap 方法并进行 xml 解析之外别无他法。必须有更方便的方法来做到这一点（对于非常大的 Web 服务！）（Apache Axis 或 Android 上的 Jax-WS？）

*最先进的方法是什么？*****

# android - 关闭软键盘时重新创建列表视图中的动态控件

> ID：15295408
> 
> 赞同：3
> 
> 时间：2013-03-08T13:47:21.067
> 
> 标签：android, android-listview, adapter, listadapter, baseadapter

这是我对我的应用程序的要求。
1\. 我需要在列表视图中显示项目列表，每个项目都有一个文本框和一个按钮。
2.每次运行应用程序时，项目的数量都不同。
3.单击按钮时，我需要阅读文本框内容并需要执行一些任务。
4.我在Adapter的“getView”中创建了动态文本框和按钮。

**问题**
1\. 问题是在我在列表项的文本框中输入数据并关闭软键盘后，列表项的所有文本框都会重新创建，并且我丢失了我输入的数据。
2\. 除了获取视图功能，还有其他方法可以创建动态文本框吗？
下面是我的代码片段

```
public class ImageAdaspter extends BaseAdapter {
    private Context mContextL;

    public ImageAdaspter(Context contextP) {
        mContextL = contextP;
    }

    public int getCount() {
        return lis.GetLength();
    }

    public Object getItem(int PositionP) {
        return PositionP;
    }

    public long getItemId(int PositionP) {
        return PositionP;
    }

    public View getView(int PositionP, View ConvertViewP, ViewGroup ParentP) {

        RelativeLayout TheRelativelayoutL = new RelativeLayout(getApplicationContext());

        TextView textview1 = new TextView(mContextL);
        textview1.setText("HI");
        textview1.setSingleLine(true);
        textview1.setId(2);

        EditText textBox1 = new EditText(mContextL);
        textBox1.setEms(3);
        textBox1.setId(4);

        Button btn1 = new Button(mContextL);
        btn1.setText("Process");
        btn1.setTextSize(10);
        btn1.setBackgroundColor(Color.parseColor("#FFFFFF"));
        btn1.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                // Do stuff
                Toast.makeText(getApplicationContext(), "Sample Message", Toast.LENGTH_SHORT).show();
            }
        });

        TheRelativelayoutL.addView(textview1);
        TheRelativelayoutL.addView(textBox1);
        TheRelativelayoutL.addView(btn1);
        return TheRelativelayoutL;
    }
} 
```

# php - PHP重新排序数组

> ID：15295410
> 
> 赞同：0
> 
> 时间：2013-03-08T13:47:22.513
> 
> 标签：php, math, logic

我有一个默认数组：

```
array( 1=>1,2 =>2, 3=>3, 4=>4, 5=>5, 6=>6, 7=>7, 8=>8, 9=>9 ) 
```

现在可以进行操作，例如将数字更改为：

```
array( 1=>1, 2=>1, 3=>3, 4=>1, 5=>1, 6=>6, 7=>7, 8=>8, 9=>9 )
--> changed the value of key 1, 2, 4 and 5 
```

在此之后我需要以下结果

```
array( 1=>1, 2=1, 3=>2, 4=>1, 5=>1, 6=>3, 7=>4, 8=>5, 9=>6  )
--> changed the value of key 3, 6, 7, 8, 9 in the right order that no number is missing like the operation has done above. 
```

它是一个 3x3 网格。位置 1 是 1，位置 2 是 2，依此类推。现在数据库可以设置位置 1、2、4、5 与 1 相同并受到威胁。因此数据库发送：1、1、3、1、1、6、7、8、9。现在来自位置的字段3 是 3，但应该是来自 2 的字段。来自 6 的字段现在必须是字段 3，依此类推。

注意：该操作能够更改数组中的每个值。例如键 4、5、7、8 的值

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:47:11.013

创建一个变量，您将在其中存储最大数量。如果你然后迭代，检查数组中的数字是否低于最大值，如果是，那么你什么都不做，如果它大于最大值，那么你把它放在第三个数组中并增加最大值。

```
$max = 0; // maximum value
$array3 = array(); // output array

foreach($array2 as $key=>$element){ // iterate for all elements
  if($array2[$key] > $max){
    $max++;
    $array3[$key] = $max;
    }
  else
    $array3[$key]=1; // *
} // end foreach 
```

在标有`// *`它的行中，每次都放 1。您可能需要搜索该值是否曾经是一次，因为它不需要始终为 1。例如，您可以使用类似`array_search`.

# sql - SQL JOIN WHERE 在其他表的字符串中

> ID：15295411
> 
> 赞同：1
> 
> 时间：2013-03-08T13:47:24.957
> 
> 标签：sql, join

我需要将两个表连接在一起，其中第二个表具有字符串中的第一个表。

例如

```
Table1 has ID1, ID2, Lang_id, User, Text.

Table2 has ID_a, User, List_ID2. 
```

此外，它`List_ID2`是逗号分隔的，所以我必须确保在所有情况下都能得到它，所以如果它是唯一的数字，或者是字符串的开头、中间或结尾。但不要截断值，即（10 不是 100 - '10'0）

额外的踢球者是那`Lang_id`是语言，`Place`我也必须把它分开。

我的语言很好，我无法`ID_a`进入我的结果

IE

```
TABLE 1
ID1 ID2 Lang_id User    Text
1   2   1   bob Me
1   2   2   bob Mich
1   2   3   bob Mi
2   1   1   bob You
2   1   2   bob Du
2   1   3   bob usted
3   1   1   tim You
3   1   2   tim Dich
3   1   3   tim le
4   3   1   tim Hello
4   3   2   tim Hallo
4   3   3   tim ihola

TABLE 2
ID_a    User    List_ID2
100 bob 1, 2
200 tim 1, 3

RESULTS
ID_a    ID1 ID2 English German  Spanish
100 1   1   You Du  usted
100 2   2   Me  Mich    Mi
200 3   1   You Dich    le
200 4   3   Hello   Hallo   ihola 
```

我的陈述看起来有点像这样：

```
SELECT DISTINCT main.ID1, main.ID2, ID_a
  (SELECT Text
   FROM table1 AS a
   WHERE lang_id = 1
     AND main.ID1 = a.ID1
     AND main.ID2 = a.ID2) AS English,
  (SELECT Text
   FROM table1 AS b
   WHERE lang_id = 2
     AND main.ID1 = b.ID1
     AND main.ID2 = b.ID2) AS German,
  (SELECT Text
   FROM table1 AS c
   WHERE lang_id = 3
     AND main.ID1 = c.ID1
     AND main.ID2 = c.ID2) AS Spanish,
FROM table1 AS main
LEFT OUTER JOIN table2 ON table2.User = main.User
AND (table2.List_ID2 LIKE STR(ID2)
OR table2.List_ID2 LIKE (ID2 + ',%')
OR table2.List_ID2 LIKE ('%,' + ID2 + ',%')
OR table2.List_ID2 LIKE ('%,' + ID2) 
```

第一部分工作正常（语言是分开的），但我无法从 table2 获取 ID，我尝试了几种不同的方法，上面返回没有错误，但有很多 NULL 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:22:19.373

在这里找到答案： [SQL STR() 函数相等](https://stackoverflow.com/questions/8609822/sql-str-function-equality)

我需要指定 STR() 的长度

# sql - 不同列中的不同行 SQL

> ID：15295416
> 
> 赞同：4
> 
> 时间：2013-03-08T13:47:38.867
> 
> 标签：sql, pivot

我正在研究一条 SQL 语句，它将数据库中的不同行放入不同的列中。

数据库1：

```
id  | name
1   | Shoe
2   | Jacket 
```

数据库2：

```
id |  type  | image
1  |  0     | image_1_1.jpg
1  |  1     | image_1_2.jpg
1  |  2     | image_1_3.jpg
2  |  0     | image_2_1.jpg 
```

输出应该是

```
id  | name   | image0        |  image1         | image2
1   | Shoe   | image_1_1.jpg |  image_1_2.jpg  | image_1_3.jpg
2   | Jacket | image_2_1.jpg |                 | 
```

image0 是 type = 0 的地方 image1 是 type = 1 等的地方

我已经尝试了几种方法，但我无法做到正确。

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:51:40.810

这种类型的数据转换称为数据*透视*。一些数据库具有可以将行转换为列的数据透视函数。

如果您没有数据透视函数，那么您还可以使用带有`CASE`表达式的聚合函数来获取结果：

```
select t1.id,
  t1.name,
  max(case when t2.`type` = 0 then t2.image else '' end) Image0,
  max(case when t2.`type` = 1 then t2.image else '' end) Image1,
  max(case when t2.`type` = 2 then t2.image else '' end) Image2
from table1 t1
inner join table2 t2
  on t1.id = t2.id
group by t1.id,  t1.name 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/911e5/5)

# asp.net - 防止呈现用户控件

> ID：15295422
> 
> 赞同：1
> 
> 时间：2013-03-08T13:47:59.070
> 
> 标签：asp.net, user-controls, render, loadcontrol

在我们的 asp.net webforms 应用程序中，我们将用户控件动态加载到占位符中。为了在回发中保留更改，我们的页面生命周期比平时要复杂一些。为了成功加载我们的视图状态，我们总是在 pageInit 中恢复之前的控制结构。只有这样我们才能清除占位符并将新控件加载到其中。

不幸的是，这意味着旧用户控件和新用户控件的整个生命周期，包括旧模块的整个 .ascx 标记文件的服务器端处理。

现在我的问题是：是否有可能最小化旧模块的服务器端处理，因为它永远不会被发送回客户端（即它的服务器端渲染是完全没有必要的）。我理想地想要实现的是用户控件的一种“轻量级”加载，当它的唯一目的是恢复 vewstate 信息而不会到达客户端时。

练习的目标是性能优化。

任何提示，想法或建议表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T23:08:09.750

通过简单地检查控件是否可见（[http://msdn.microsoft.com/en-us/library/system.web.ui.control.visible.aspx） ，我已经解决了在动态添加控件的 webcontrol 生命周期事件中运行的代码-](http://msdn.microsoft.com/en-us/library/system.web.ui.control.visible.aspx)-)

```
protected void Page_Load(object sender, EventArgs e)
{
    if (this.Visible) 
    {
       //Your code here
    }
} 
```

如果您有任何方法不是由页面生命周期事件触发，而是必须由用户操作触发，例如 -

```
protected void Button1_Click(object sender, EventArgs e)
{
   //Do something
} 
```

这可以安全地保持原样，直到将控件添加到页面并触发操作后，方法代码才会运行。

尽管可见性检查感觉不是特别优雅，但它可能是处理动态加载控件上的自动连接事件的最佳方式。

# python - 比较字典值时遇到问题

> ID：15295426
> 
> 赞同：-1
> 
> 时间：2013-03-08T13:48:02.940
> 
> 标签：python, python-2.7

我是编码新手，我无法让这个功能正常工作。

```
def isValidWord(word, hand, wordList):
    """
    Returns True if word is in the wordList and is entirely
    composed of letters in the hand. Otherwise, returns False.

    Does not mutate hand or wordList.

    word: string
    hand: dictionary (string -> int)
    wordList: list of lowercase strings
    """
    wordDic = {}
    if word not in wordList:    
        return False   
    for letter in word:
        if letter in wordDic:
            wordDic[letter] += 1
        else:
            wordDic[letter] =  1
    if wordDic[letter] > hand[letter]: # 
        return False
    return True 
```

我想要做的是与字典值比较一个字母在 wordDic 中出现的次数以及它在手中出现的次数。但我不断收到“TypeError：列表索引必须是整数，而不是 str”。有人可以解释我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:51:20.590

你的问题肯定是这一行：

```
if wordDic[letter] > hand[letter]: 
```

问题是您用来索引您`letter`的字符 ( ) （显然是 a ，而不是您期望的 a ）。`str``hand``list``dict`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:51:45.263

问题是`hand`（可能）是一个列表，而不是字典，并且您正尝试使用`letter`which is a来访问它`str`。列表不能使用字符串进行索引，因此`TypeError`.

有关更多信息，请参阅列表上的[Python 文档](http://docs.python.org/2/tutorial/introduction.html#lists)。

* * *

`hand`绝对是一个列表。测试代码：

```
>>> l = [1,2]
>>> l['a']
Traceback (most recent call last):
  File "<pyshell#1>", line 1, in <module>
    l['a']
TypeError: list indices must be integers, not str 
```

# php - php正则表达式如何删除重复的字符并使每个字符在字符串中唯一

> ID：15295430
> 
> 赞同：3
> 
> 时间：2013-03-08T13:48:16.857
> 
> 标签：php, regex

应该如何使用`preg_replace()`将字符串从“aabbaacc”替换为“abc”？

目前，我的代码使用 `str_split()`then `array_unique()`then `implode()`。我认为`preg_replace()`也可以实现这一点，但我不知道如何。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:11:17.823

似乎对我有用的正则表达式是`/(.)(?=.*?\1)/`. 请在此处自行测试：

[http://regexpal.com/](http://regexpal.com/)

我还测试了`preg_replace('/(.)(?=.*?\1)/', '', 'aaabbbabc')`它返回预期的`abc`.

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:59:15.443

试试这个

```
$string = 'dbbaabbbaac';

$new = preg_replace_callback( array("/(.)\\1+/"),function($M){print_r($M);return $M[1];}, $string  );
$new = preg_replace_callback( array('/(.)(.?\\1)/i','/(.)(.*?\\1)/i'),function($M){return $M[1].trim($M[2],$M[1]);}, $new  );
echo $new."\n"; 
```

输出

```
dbac 
```

或者这个没有正则表达式

```
$value="aabbaacc";
for($i=0;$i<strlen($value);$i++){
    $out[$value[$i]]=$value[$i];
}
echo implode("",$out); 
```

输出：

```
abc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:08:26.463

这是我得到的最接近的。但是，它基本上是以下内容的副本： [如何删除重复字符并仅在 Perl 中保留唯一字符？](https://stackoverflow.com/questions/2582940/how-do-i-remove-duplicate-characters-and-keep-the-unique-one-only-in-perl)

```
<?php
    $string = 'aabbaacc';

    $new = preg_replace( '/(.)(?=.*?\1)/i','', $string  );

    echo $new;
?> 
```

不幸的是，它不会使字符串保持相同的顺序。我不知道这对你是否重要。

# python - 如何在 Pandas DataFrame 上计算滚动累积乘积

> ID：15295434
> 
> 赞同：13
> 
> 时间：2013-03-08T13:48:36.763
> 
> 标签：python, pandas, time-series, finance

我在 pandas DataFrame 中有一个时间序列的回报、滚动 beta 和滚动 alpha。如何计算 DataFrame 的 alpha 列的滚动年化 alpha？（我想做相当于 =PRODUCT(1+[trailing 12 months])-1 in excel）

```
 SPX Index BBOEGEUS Index    Beta      Alpha
2006-07-31   0.005086    0.001910    1.177977   -0.004081
2006-08-31   0.021274    0.028854    1.167670    0.004012
2006-09-30   0.024566    0.009769    1.101618   -0.017293
2006-10-31   0.031508    0.030692    1.060355   -0.002717
2006-11-30   0.016467    0.031720    1.127585    0.013153 
```

我很惊讶地发现，pandas 中没有为此内置“滚动”功能，但我希望有人可以提供一个功能，然后我可以使用 pd.rolling_apply 将其应用于 df['Alpha'] 列。

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2019-07-11T09:00:55.507

`rolling_apply`已在 pandas 中删除并被更通用的 [窗口方法](https://pandas.pydata.org/pandas-docs/stable/user_guide/computation.html#window-functions)（例如[`rolling()`](https://pandas.pydata.org/pandas-docs/stable/reference/window.html#standard-moving-window-functions)等）取代

```
# Both agg and apply will give you the same answer
(1+df).rolling(window=12).agg(np.prod) - 1
# BUT apply(raw=True) will be much FASTER!
(1+df).rolling(window=12).apply(np.prod, raw=True) - 1 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-08T14:34:55.707

这会吗？

```
import pandas as pd
import numpy as np

# your DataFrame; df = ...

pd.rolling_apply(df, 12, lambda x: np.prod(1 + x) - 1) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-06-25T21:06:58.850

如果您将 +/-1 移出 ，它会更快一些`df`，如下所示：

```
cumprod = (1.+df).rolling(window=12).agg(lambda x : x.prod()) -1 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2020-07-13T02:10:59.177

rolling_apply 已弃用，因此效果最好：

> (1 + df).cumprod() - 1

# oauth - 无法从 DotNetOpenAuth 工作 ExchangeUserCredentialForToken

> ID：15295437
> 
> 赞同：1
> 
> 时间：2013-03-08T13:48:43.030
> 
> 标签：oauth, oauth-2.0, dotnetopenauth, google-oauth, windows-live

我正在使用 DotNetOpenAuth 对用户进行身份验证，但无法使其正常工作。这是我的代码：

```
public string AuthenticateUser(
     string key, string secret, string user, string password,
     AuthorizationServerDescription serviceDescription)
{
    UserAgentClient agent = new UserAgentClient(
        serviceDescription,
        key,
        secret);

    IAuthorizationState authState = mConsumer.ExchangeUserCredentialForToken(
        user,
        password,
        GetScope());

    if (authState != null)
    {
        return authState.Token;
    }
} 
```

我正在尝试针对*Google*和*WindowsLive*进行身份验证，但在这两种情况下都没有成功。

## 谷歌

这些是用于访问 Google OAuth 服务的配置参数：

```
 AuthorizationEndpoint = new Uri("https://accounts.google.com/o/oauth2/auth")
        TokenEndpoint = new Uri("https://accounts.google.com/o/oauth2/token")
        ProtocolVersion = ProtocolVersion.V20
        State = "/profile"
        Scope = "https://www.googleapis.com/auth/userinfo.email" 
```

获得的错误：

```
---------------------------
Error
---------------------------
Error occurred while sending a direct message or getting the response.
---------------------------
OK   
--------------------------- 
```

## 视窗直播

这些是用于访问 Windows Live Outh 服务的参数：

```
 TokenEndpoint = new Uri("https://oauth.live.com/token"),
        AuthorizationEndpoint = new Uri("https://oauth.live.com/authorize")
        ProtocolVersion = ProtocolVersion.V20
        State = null
        Scope = "wl.signin" 
```

获得的错误：

```
---------------------------
Error
---------------------------
Unexpected response Content-Type text/html
---------------------------
OK   
--------------------------- 
```

我还`ClientCredentialApplicator`以各种方式测试了使用：

*   网络凭证
*   没有秘密
*   后置参数

难道我做错了什么？有人可以给我看一个工作的例子`ExchangeUserCredentisForToken`吗？

预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:46:33.340

资源所有者凭据授予仅在授权服务器允许时才有效。我相信谷歌和微软都故意不支持这一点，因为他们不希望第三方应用程序直接获取用户凭据。

# c# - 我应该对“延迟关键”线程使用线程亲和性吗？

> ID：15295438
> 
> 赞同：4
> 
> 时间：2013-03-08T13:48:45.517
> 
> 标签：c#, multithreading, low-latency

在我的 HFT 交易应用程序中，我有几个地方可以从网络接收数据。在大多数情况下，这只是一个只接收和处理数据的线程。以下是此类处理的一部分：

```
 public Reciver(IPAddress mcastGroup, int mcastPort, IPAddress ipSource)
    {

        thread = new Thread(ReceiveData);

        s = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
        s.ReceiveBufferSize = ReceiveBufferSize;

        var ipPort = new IPEndPoint(LISTEN_INTERFACE/* IPAddress.Any*/, mcastPort);
        s.Bind(ipPort);

        option = new byte[12];
        Buffer.BlockCopy(mcastGroup.GetAddressBytes(), 0, option, 0, 4);
        Buffer.BlockCopy(ipSource.GetAddressBytes(), 0, option, 4, 4);
        Buffer.BlockCopy(/*IPAddress.Any.GetAddressBytes()*/LISTEN_INTERFACE.GetAddressBytes(), 0, option, 8, 4);
    }

    public void ReceiveData()
    {
        byte[] byteIn = new byte[4096];
        while (needReceive)
        {
            if (IsConnected)
            {
                int count = 0;
                try
                {
                    count = s.Receive(byteIn);
                }
                catch (Exception e6)
                {
                    Console.WriteLine(e6.Message);
                    Log.Push(LogItemType.Error, e6.Message);
                    return;
                }
                if (count > 0)
                {
                    OnNewMessage(new NewMessageEventArgs(byteIn, count));
                }
            }
        }
    } 
```

该线程一旦创建就永远有效。我只是想知道我是否应该将此线程配置为在某些核心上运行？由于我需要最低延迟，我想避免上下文切换。由于我想避免上下文切换，我最好在同一个处理器内核上运行同一个线程，对吧？

考虑到我需要最低延迟是正确的：

*   为大部分“长时间运行”线程设置“线程亲和力”会更好吗？
*   从上面的示例中为线程设置“线程亲和力”会更好吗？

如果这很重要，我现在将上面的代码重写为 c++，以便稍后移植到 Linux，但是我认为我的问题更多是关于硬件而不是语言或操作系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:17:13.833

我认为具有尽可能少延迟的算法是将您的线程固定到一个核心并将它们设置为实时优先级（或任何最高优先级）。

这将导致操作系统驱逐碰巧使用该内核的任何其他线程。

希望当您的线程被安排在那里时，CPU 缓存仍将包含有用的数据。出于这个原因，我喜欢固定到核心的想法。

您可能应该将整个过程设置为高优先级，并尽量减少您盒子上的其他活动。还要关闭未使用的硬件，因为它可能会产生中断。将您的 NIC 中断修复到不同的 CPU 内核（一些更好的 NIC 可以做到这一点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:52:35.940

> 由于我想避免上下文切换，我最好在同一个处理器内核上运行同一个线程，对吧？

不会。将关联设置到一个 CPU 不一定可以避免上下文切换。您无法控制上下文切换，它们掌握在操作系统线程调度程序的手中。它们发生在线程量子（时间片）已经过去或更高优先级的线程中断您的线程时。

您所说的延迟，我认为是网络或内存延迟，根本无法通过设置线程亲和性来避免。内存延迟可以通过使您的代码缓存友好来避免（例如，它都可以在 L1 - L2 缓存中）。网络延迟实际上只是任何网络的一部分，而不是我怀疑您可以做很多事情的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T14:18:54.147

由于托尼狮子已经回答了你的问题，我想谈谈你的评论：

> “为什么不对我的代码设置线程亲和性？为什么我的示例中的线程需要在内核之间传输？”

您的线程不会传播到任何地方。

当 OS 线程调度程序决定给您的线程一段执行时间时，就会发生上下文切换。然后为您的线程准备好环境，例如将 CPU 寄存器设置为正确的值等。这称为上下文切换。

因此，无论线程亲和性如何，都必须完成相同的 CPU 设置工作，无论是线程运行时在前一个切片中使用的 CPU/内核还是另一个。此时，您的计算机拥有比编译时更多的信息来正确执行此操作。

您似乎相信线程以某种方式驻留在 CPU 上，但事实并非如此。您使用的是逻辑线程，可能有数百甚至数千个。常见的 CPU，OTOH，每个内核通常有 1 或 2 个硬件线程，并且您的逻辑线程在每次调度时都会映射到其中之一，即使操作系统总是选择相同的硬件线程。

编辑：看来你已经选择了你想听到的答案，我不喜欢关于答案的长时间讨论线程，所以我会把它放在这里。

*   你应该尝试测量它。我相信你会失望的
*   在高优先级线程上运行一些线程可能很容易弄乱其他进程
*   您担心上下文切换延迟，但是您没有 GC 线程会冻结您的线程的问题吗？顺便说一句，您的 GC 线程将在哪个内核上运行？:)
*   如果您的最高优先级线程阻塞 GC 线程怎么办？内存泄漏？你知道那个线程的优先级是什么，所以你确定它会起作用吗？
*   真的，如果微秒很重要，为什么不使用 C 或手动优化组装？
*   正如有人建议的那样，如果你想控制这方面的执行，你应该使用 RTOS
*   您的数据通过数据中心的传输速度似乎不太可能比在一台机器上设置线程上下文的速度慢 4-5 倍，但谁知道...

# android - Sqlite 异常，语法错误

> ID：15295445
> 
> 赞同：3
> 
> 时间：2013-03-08T13:49:03.030
> 
> 标签：android, sqlite, syntax-error

我还在学习 Android 开发，而且我在创建 sqlite 数据库表时遇到了问题。这是我的代码的一部分：

`

```
private static final String CREATE_ADS_PICTURE = "CREATE TABLE "
        + AdsBDD.TABLE_ADS_PICTURE + "(" + AdsBDD.ID_PICS
        + " INTEGER PRIMARY KEY AUTOINCREMENT ," + AdsBDD.AD_ID
        + " INTEGER NOT NULL," + AdsBDD.PICTURE + " TEXT," + AdsBDD.FOLDER
        + " TEXT," + AdsBDD.ORDER_NO + " INTEGER NOT NULL);";

private static final String CREATE_AGENCES = "CREATE TABLE "
        + AgencesBDD.TABLE_AGENCES + "(" + AgencesBDD.ID
        + " INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL," + AgencesBDD.GROUP
        + " INTEGER," + AgencesBDD.USERNAME + " TEXT," + AgencesBDD.EMAIL
        + " TEXT," + AgencesBDD.CONTACT_NAME + " TEXT,"
        + AgencesBDD.REGISTRATION_DATE + " TEXT," + AgencesBDD.ACTIVATION
        + " TEXT," + AgencesBDD.ACTIVE + " INTEGER," + AgencesBDD.STORE
        + " INTEGER," + AgencesBDD.STORE_BANNER + " TEXT,"
        + AgencesBDD.RATING + " REAL," + AgencesBDD.LANGUAGE + " TEXT,"
        + AgencesBDD.IDENTITY + " TEXT," + AgencesBDD.ADDRESS + " TEXT,"
        + AgencesBDD.PHONE + " TEXT," + AgencesBDD.COMPANY + " TEXT,"
        + AgencesBDD.WEBPAGE + " TEXT," + AgencesBDD.CODE_POSTAL + " TEXT,"
        + AgencesBDD.JE_SUIS_UN + " TEXT," + AgencesBDD.VILLE + " TEXT,"
        + AgencesBDD.VIDEO + " TEXT);";

    @Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(CREATE_ADS_PICTURE);
    db.execSQL(CREATE_AGENCES);
}

   public class AgencesBDD {
public static final String TABLE_AGENCES = "agences";

public static final String ID = "id";
public static final String GROUP = "group";
public static final String USERNAME = "username";
public static final String EMAIL = "email";
public static final String CONTACT_NAME = "contact_name";
public static final String REGISTRATION_DATE = "registration_date";
public static final String ACTIVATION = "activation";
public static final String ACTIVE = "active";
public static final String STORE = "store";
public static final String STORE_BANNER = "store_banner";
public static final String RATING = "rating";
public static final String LANGUAGE = "language";
public static final String IDENTITY = "identity";
public static final String ADDRESS = "address";
public static final String PHONE = "phone";
public static final String COMPANY = "company";
public static final String WEBPAGE = "webpage";
public static final String CODE_POSTAL = "code_postal";
public static final String JE_SUIS_UN = "je_suis_un";
public static final String VILLE = "ville";
public static final String VIDEO = "video"; 
```

` 所以问题是 Sqlite 为表 AGENCES 抛出此异常，但表 AD_PICTURE 工作正常：

```
03-08 14:36:01.892: E/AndroidRuntime(10822): FATAL EXCEPTION: main
03-08 14:36:01.892: E/AndroidRuntime(10822): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.infonetdiffusion.immohabitation/com.infonetdiffusion.immohabitation.FragmentBaseActivity}: android.database.sqlite.SQLiteException: near "group": syntax error (code 1): , while compiling: CREATE TABLE agences(id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,group INTEGER,username TEXT,email TEXT,contact_name TEXT,registration_date TEXT,activation TEXT,active INTEGER,store INTEGER,store_banner TEXT,rating REAL,language TEXT,identity TEXT,address TEXT,phone TEXT,company TEXT,webpage TEXT,code_postal TEXT,je_suis_un TEXT,ville TEXT,video TEXT); 
```

它应该很容易修复，但我找不到我错的地方......任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T13:55:27.037

您正在使用 sqlite 关键字作为列名，即限制为`group` [sqliteKeyword](http://www.sqlite.org/lang_keywords.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:57:39.900

删除`NOT NULL`列`id`。

[在这里](http://www.sqlite.org/lang_createtable.html "Documentation on create table")阅读

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:58:14.163

这两种情况是不等价的！请注意，第一种情况下的主键没有`NOT NULL`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T13:59:14.673

创建表代理（id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, **group** INTEGER,username TEXT,email TEXT,contact_name TEXT,registration_date TEXT,activation TEXT,active INTEGER,store INTEGER,store_banner TEXT,rating REAL,language TEXT,identity TEXT,address TEXT ,电话TEXT,公司TEXT,网页TEXT,code_postal TEXT,je_suis_un TEXT,ville TEXT,视频TEXT);

**group** 是sql中的关键字，不能作为列名，将**group**改成sql中不能作为关键字的其他字符串

# xpages - XPages 打开视图并在编辑模式下打开 XPage

> ID：15295451
> 
> 赞同：-3
> 
> 时间：2013-03-08T13:49:34.737
> 
> 标签：xpages

我已经告诉使用 XPage 打开视图，但是如何在编辑模式下打开该 XPage？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T06:39:26.783

我建议您购买并阅读 Mastering XPages 这本书，以了解在 XPages 中处理视图和文档的基础知识。本书包含的材料准确地描述了您正在寻找的内容（如何在阅读和编辑模式下打开 XPage）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T16:54:24.363

我假设您的问题与用于从视图打开所选文档的 XPage 相关，而不是与视图本身有关，因为无法定义 XPage 来启动视图或使视图处于“编辑模式” ...

1.  在为 XPage 指定文档数据源时，可以将默认操作定义为“编辑文档”或“打开文档”。这将设置数据源的“动作”属性
2.  XPage 本身有一个“只读”属性，可以设置为特定值或计算。这与特定的数据源无关。
3.  可以将面板容器控件添加到 XPage 并设置面板的“只读”属性。这将允许面板内的所有控件呈现为可编辑或只读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T16:21:55.237

视图和 xpages 不能处于编辑模式，只有文档数据源可以处于编辑模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-06T14:00:33.867

除了 Peter 提到的只读属性之外：自定义控件有可能获得自己的数据源，而来自父级（例如 xpage）的控件处于编辑模式。这是我在将控件绑定到数据字段时经常犯的错误。

# android - 让android屏幕每秒改变一次颜色

> ID：15295452
> 
> 赞同：0
> 
> 时间：2013-03-08T13:49:34.920
> 
> 标签：android, graphics, 2d

我是 android 的初学者，手头有一些 java。我只完成了制作我的第一个应用程序教程。

接下来我想制作一个应用程序来使用简单的 2D 图形

首先，我想找到一种在无限循环中在两种颜色（红色和绿色）之间闪烁屏幕的方法

```
wait int seconds;
make screen red;
wait int seconds;
make screen green;

loop forever; 
```

任何人都可以向我指出可能有帮助的教程或源代码吗？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:08:04.303

您如何制作一个充满屏幕的布局，让我们称之为`llayout`。

把它放在代码中：

```
static final int[] COLORS = {0xff0000, 0x00ff00};
static final int WAITTIME = 1000;
int currentColor = 0;

public void onCreate(Bundle b) {
    setContentView(R.layout.mylayout);
    final LinearLayout llayout = (LinearLayout) findViewById(R.id.llayout);
    new Thread() {
        public void run() {
            while(true) {
                Thread.sleep(WAITTIME);
                currentColor++;
                if (currentColor > COLORS.length)
                    currentColor = 0;
                YourActivity.this.runOnUiThread(new Runnable() {
                    public void run() {
                        llayout.setBackgroundColor(COLORS[currentColor]);
                    }
                });
            }
        }
    }.start();
} 
```

这应该有效。使用此代码，您可以向数组添加其他颜色`COLORS`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T14:17:16.970

感谢您的输入，此代码似乎可以正常工作

```
package biz.consett.mydraw;

import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.view.View;

/* Flash the screen between red and green each second */
public class MainActivity extends Activity {
    final static int INTERVAL = 1000; // 1000=1sec   
    private static View myView = null;
    boolean whichColor = true;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        myView = (View) findViewById(R.id.my_view);
        myView.setBackgroundColor(Color.RED);// set initial colour
        new Thread(new Runnable() {
            public void run() {
                while (true) {
                    try {
                        Thread.sleep(INTERVAL);
                    } 
                    catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                    updateColor();
                    whichColor = !whichColor;
                }
            }
        }).start();
    }

    private void updateColor() {
        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                if (whichColor) 
                    myView.setBackgroundColor(Color.RED);
                else 
                    myView.setBackgroundColor(Color.GREEN);
            }
        });
    }
} 
```

***布局，activity_main.xml：***

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<View

android:id="@+id/my_view"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

</View>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:06:58.907

摘自[这篇](https://stackoverflow.com/questions/6242268/repeat-a-task-with-a-time-delay/6242292#6242292)文章并针对您的案例进行了编辑：

```
private int m_interval = 1000; // 1 second by default, can be changed later
private Handler m_handler;
private Layout mYourMainLayout //dont know what type of layout you use
private boolean which;

@Override
protected void onCreate(Bundle bundle)
{
  ...
  mYourMainLayout = (Layout) this.findViewById(R.id.yourMainLayout);
  m_handler = new Handler();
}

Runnable m_colorChanger = new Runnable()
{
     @Override 
     public void run() {
if(which){
         mYourMainLayout.setBackgroundColor(Color.GREEN)
         }
else {
   mYourMainLayout.setBackgroundColor(Color.RED)
    }
which=!which
          m_handler.postDelayed( m_colorChanger, m_interval);
     }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T14:12:29.870

你已经有了很多解决方案，但只是添加我自己的......

你需要一个计时器

```
@Override
protected void onCreate(Bundle bundle)
{
   ...
   Timer timer = new Timer();
   TimerTask updateColor = new SwitchColorTask();
   timer.scheduleAtFixedRate(updateColor, 100, 100);
   ...
} 
```

定时器任务。

```
private boolean colorSwitched;
class SwitchColorTask extends TimerTask {
   public void run() {
       LinearLayout main = (LinearLayout)findViewById(R.id.main);
       if(colorSwitched){
          main.setBackgroundColor (Color.GREEN)
       }
       else{
          main.setBackgroundColor (Color.RED)
       }           
       colorSwitched=!colorSwitched
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T15:28:34.617

此代码实现了颜色数组并且工作正常 - 非常感谢。
（使用相同的清单和布局）包 biz.consett.mydraw；

```
import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.view.View;

/* 
 * Simple use of Android Thread
 * Flash the screen between an array of colours at an interval 
 * 
 */

public class MainActivity extends Activity

static final int[] COLORS =
{AColor.RED,  AColor.BLUE, AColor.GREEN};// colour array
// Colour Red Green Blue 
// Index [0] [1] [2]

private int currentColor = 0;

private View MYVIEW = null;
//boolean whichColor = true;

final int interval = 100; // 0.6 second static final?

@Override
public void onCreate(Bundle savedInstanceState)
{

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    MYVIEW = (View) findViewById(R.id.my_view);

    MYVIEW.setBackgroundColor(Color.RED);// set initial colour

    new Thread(new Runnable()
    {

        // @Override
        public void run()
        {

            while (true)
            {
                try
                {
                    Thread.sleep(interval); // sleep for interval

                } 

                catch (InterruptedException e)
                {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                    updateColor();

            } // end of  while true loop

        }// end of run

    }).start(); // end of runnable

} // end of onCreate bundle

private void updateColor()
{

    runOnUiThread(new Runnable()
    {

        @Override
        public void run()
        {

            if (currentColor > COLORS.length - 1)
            { 
                currentColor = 0;

            }
            MYVIEW.setBackgroundColor(COLORS[currentColor]);

            currentColor++;

        }// end of run
    });

}
}// -------------END OF MainActivity extends Activity-----------------------

package biz.consett.mydraw;

public class AColor
{

final static int RED = 0xFFFF0000; // hex alpha_R_G_B 
final static int GREEN = 0xFF00FF00;
final static int BLUE = 0xFF0000FF; 
final static int PURPLE = 0xFFAA00AA;
} 
```

# c# - 是否可以将 C# 中的方法参数包装为没有 lambda 表达式的函数？

> ID：15295453
> 
> 赞同：0
> 
> 时间：2013-03-08T13:49:35.103
> 
> 标签：c#, func

假设我有一个具有以下签名的方法：

```
public void MyMethod(Func<int> expression)
{
    // Does work
} 
```

我称这个方法如下：

```
int intProperty = 7;
MyMethod(() => intProperty); 
```

他们是不是我可以在不使用 lambda 的情况下调用此方法？所以我希望它看起来像这样：

```
MyMethod(intProperty); 
```

方法签名是否必须更改对我来说并不重要——我有点指望它。我尝试这样做的原因是，当初始属性作为我需要能够访问的函数传入时，您可以检查有关初始属性的其他信息。

我不相信在 MyMethod 中使用反射在这里会起作用，因为我想要有关原始参数的信息。它们是从函数中获取信息的方法，例如它的名称，这是我希望能够检索的。我已经能够做到这一点。因此，在上面的示例中，MyMethod 将能够判断传入的属性名称为 intProperty。

注意：这是一个简化的示例。我很清楚，如果这就是我想要的，我可以直接通过房产。但我想要有关 Func 在此处捕获的原始属性的其他信息，例如其原始名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:58:52.847

您不能为属性执行此操作，但您可以为类似属性的 getter 方法执行此操作。从 C#3.0 开始，您可以使用[*方法组*](https://stackoverflow.com/q/886822/335858)隐式构建委托：

```
public void MyMethod(Func<int> expression) {
    // Does work
}
public int GetProperty() {
    return 123;
}
pubic void Test() {
    MyMethod(GetProperty /* NO PARENTHESES HERE!!! */);
} 
```

删除方法名称后的括号会将调用表达式转换为方法组。不幸的是，这意味着属性没有可比的语法，因为访问属性不需要括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:55:28.783

**Using expressions**

You mentioned that it doesn't matter if the method signature has to change. So why not change the method signature to:

```
public void MyMethod<T>(T source, Expression<Func<T, int>> expression)
{
    // Evaluate expression
}

MyMethod(this, x => x.property); 
```

I won't go into too much detail here on parsing expression trees, but for more information, see this question on SO:

[Retrieving Property name from lambda expression](https://stackoverflow.com/questions/671968/retrieving-property-name-from-lambda-expression)

**Using reflection**

You can use reflection to get information about the property as well. Drop the `source` parameter if you don't need to get the actual value of the property.

```
public void MyMethod(object source, string propertyName)
{
    var pi = source.GetType().GetProperty(propertyName);
    if (pi == null)
    {
        throw new Exception("property not found");
    }

    MyMethod(source, pi);
}

public void MyMethod(object source, PropertyInfo property)
{
    // Evaluate property
}

MyMethod(this, "Property"); 
```

# jquery - 我如何进行实时预览？

> ID：15295454
> 
> 赞同：-1
> 
> 时间：2013-03-08T13:49:35.793
> 
> 标签：jquery

我想要实时预览功能。谁能给我代码。我正在使用引导程序进行样式设置。我曾尝试使用 keyup() 进行实时预览，但我不明白它有什么问题。

```
<div class="control-group">
    <label class="control-label" for="question">Question</label>
        <div class="controls">
            <input class="input-xxlarge" type="text" name="question" id="question" required="true" placeholder="write your question"><span class="preview"></span>
        </div>
    </div> 
```

这是我用于实时预览的 jquery。

```
<script type="text/javascript">
         /* <![CDATA[ */

        $('.input-xxlarge').keyup(function(){
            var input-xxlarge = $(this).val();
            $("preview").html(input-xxlarge);
            {return false;}
        });

    /* ]]> */
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:08:59.010

我建议您使用`id`而不是`class`es 来完成这项工作。

```
<div class="control-group">
    <label class="control-label" for="question">Question</label>
    <div class="controls">
        <input class="input-xxlarge" type="text" name="question" id="question"
        required="true" placeholder="write your question" /> <span class="preview"></span>

    </div>
</div> 
```

和

```
$('.input-xxlarge').keyup(function () {
    var impt = $(this).val();
    $(".preview").html(impt);
}); 
```

工作得很好。这是[fiddle](http://jsfiddle.net/D7L3n/)的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:10:21.657

你不应该使用“-”作为变量名

```
$(document).ready(function(){
      $('.input-xxlarge').keyup(function(){
            var inputxxlarge = $(this).val();
            $(".preview").html(inputxxlarge);
            {return false;}
        });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T14:13:01.300

试试这个我猜你想要的？？

[http://jsfiddle.net/8ajQF/2](http://jsfiddle.net/8ajQF/2)

```
$(document).ready(function(){
  $("input").keypress(function(){
     var sac = $(this).val();
    $("span").text(sac);
  });
}); 
```

# iphone - imageWithContentsOfFile 不适用于 iPhone 5

> ID：15295461
> 
> 赞同：1
> 
> 时间：2013-03-08T13:49:51.000
> 
> 标签：iphone, ios6, uiimage, iphone-5

我正在为 iPhone 4 和 iPhone 5 兼容性制作应用程序。为了设置图像，我使用了以下代码： `[UIColor colorWithPatternImage: [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"aaaa" ofType:@"png"]]]`

1.  它适用于 iPhone 4 模拟器和设备，但不适用于 iPhone5 模拟器。我还没有 iPhone 5。谁能告诉我，它可以在 iPhone 5 设备上使用吗？

2.  如果我为要用于 iPhone 5 的图像使用不同的名称，并且我没有用图像名称写 @2x，那么在`[UIColor colorWithPatternImage: [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"aaaa" ofType:@"png"]]]`iPhone 5 模拟器上可以正常工作。任何人都可以告诉我，它也适用于 iPhone 5 设备吗？

3.  或者有没有其他方法可以在 iPhone 5 上使用`[UIColor colorWithPatternImage: [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"aaaa" ofType:@"png"]]]`.

请建议。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:47:52.897

是的。这也适用于 iPhone 5 设备。只需复制具有不同名称的图像。

```
if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone)
{
    CGSize result = [[UIScreen mainScreen] bounds].size;
    if(result.height == 568)
    {
        // iPhone 5
        [appConfig setLogoURL:[NSString stringWithFormat:@"%@%@", @"file://localhost", [[NSBundle mainBundle] pathForResource:@"header5" ofType:@"png"]]];
    }
    else {
        [appConfig setLogoURL:[NSString stringWithFormat:@"%@%@", @"file://localhost", [[NSBundle mainBundle] pathForResource:@"header" ofType:@"png"]]];
    }
}
else {
        [appConfig setLogoURL:[NSString stringWithFormat:@"%@%@", @"file://localhost", [[NSBundle mainBundle] pathForResource:@"header" ofType:@"png"]]];
} 
```

# php - 如何获取到 xml 的链接列表？

> ID：15295462
> 
> 赞同：-1
> 
> 时间：2013-03-08T13:49:51.260
> 
> 标签：php, html, dom, xml-parsing

**XML 文件：**

```
<urlset>
    <url>
         <loc>http://example.com/.../</loc>
         <lastmod>0000-00-00</lastmod>
         <priority>0</priority>
    </url>
    <url>
         <loc>http://example.com/...</loc>
         <lastmod>0000-00-00</lastmod>
         <priority>0</priority>
    </url>
</urlset> 
```

如何获取到 xml 的链接列表？（谷歌翻译）

```
foreach ($html->find('?????') as $element) {
    echo $element->src;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:39:42.193

我假设您想要一个所有“loc”元素的列表。

```
$simpleObj = simplexml_load_string($xml);
$loc = $simpleObj->xpath('//loc');

foreach($loc as $url){
    echo $url;
} 
```

# c# - 从后面的 asp.net 代码中计算带有名称前缀的 html 表单输入

> ID：15295466
> 
> 赞同：0
> 
> 时间：2013-03-08T13:50:04.627
> 
> 标签：c#, asp.net, html

我一直在寻找类似的东西，但没有运气。这就是我所拥有的：

```
<input type="checkbox" id="category_1" name="category_1" />
<input type="checkbox" id="category_2" name="category_2" />
<input type="checkbox" id="category_3" name="category_3" />
and so on... 
```

**问题**

如何`category_`在 asp.net 代码后面获取带有前缀的复选框的数量？

**编辑**我想要实现的示例：

```
for(int i = 1; i <= TOTAL_NUMBER_OF_CHECKBOXES; i++){} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:36:03.827

```
var categoryInputKeys = Request.Form.AllKeys.Where(x=> x.StartsWith("category_")).ToList(); 
```

获取密钥后，您可以像这样使用它们

```
Request.Form[categoryInputKeys[0]] 
```

编辑：仅仅计算它们就足够了；

```
var categoryInputCount = Request.Form.AllKeys.Where(x=>x.StartsWith("category_")).ToList().Count; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:16:30.170

添加属性`runat="server"`，然后您可以在后面的代码中获得访问控制

# python - Excel 大数据计算 (PCA...)

> ID：15295468
> 
> 赞同：1
> 
> 时间：2013-03-08T13:50:07.477
> 
> 标签：python, r, excel, pca

为了实习，我必须对存储在 excel 中的数据进行一些计算。我应该汇总市场数据（超过 15 年的 50 项资产）并对汇总数据进行主成分分析。

目前我在工作表中有市场数据，我将其保存为表格分隔的文本（如 csv，但使用表格而不是逗号）。然后我用 R 阅读它并使用一些强大的包来做 PCA。最后，使用 RI 创建另一个表格分隔文本并通过 excel 阅读。我现在在 excel 中有数据和结果，我可以绘制我想要的一切。

问题是该过程对我的同事来说不够自动化。正如他们所说，他们想要一个在单击时启动 PCA 的 excel 按钮。

我尝试安装一些允许在 excel 中直接使用 R 函数的 Excel 包（Rexcel）。它不起作用（服务器问题）并且没有很好的记录。所以我试图找到其他方法直接在excel中进行大计算。似乎有同一种包可以在 Excel 中使用 Python。我还听说过其他与 excel 兼容的强大语言。问题是我无法在我的计算机上安装我想要的东西（是的，我必须为我想要安装的每个包都打电话给 IT 人员......），所以我已经花了 2/3 天来尝试 R 解决方案. 这也是为什么我正在寻找一个简单的解决方案，我的同事不会有 2/3 天的时间来安装一些 excel 包来使用我的宏......

所以我在这里问：直接在 excel 中使用其他语言的工具进行 PCA 的最简单方法是什么？

提前谢谢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:52:05.650

您可以使用非常方便的可执行文件`Rscript`自动启动您的 R 脚本。

在 VBA 中，您创建一个宏，您可以在其中键入如下内容：

```
 retVal = Shell(MY_RSCRIPT_BAT, vbNormalFocus)  ## vba code here 
```

我假设您可以从按钮调用 VBA 宏。

您的 MY_RSCRIPT_BAT 是 .bat 文件，您可以在其中键入以下内容：

```
@echo off
C:
PATH R_PATH;%path%
cd DEMO_PATH
Rscript your_pca_script.R 
exit 
```

# selenium-webdriver - 如何禁用在 seleniumlibrary/robotframework 上加载外部 url

> ID：15295471
> 
> 赞同：5
> 
> 时间：2013-03-08T13:50:17.133
> 
> 标签：selenium-webdriver, robotframework

我开始使用 Seleniumlibrary 测试（使用机器人框架运行），并且由于我们的网站有广告和指标等，每次我运行测试时，这些 URL 都会被加载。

有没有办法告诉 selenium/robotframework 不加载某些类型的 URL 或阻止它加载外部资源（即不是来自本地主机的所有内容）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T15:38:11.863

你可以用[browsermob-proxy](http://opensource.webmetrics.com/browsermob-proxy/)做到这一点。安装后，您只需设置代理并设置黑名单。

```
ProxyServer server = new ProxyServer(9000)
server.start();
final DesiredCapabilities capabilities = new DesiredCapabilities();
capabilities.setCapability(CapabilityType.PROXY, server.seleniumProxy());
//Send a 200 for all requests to the facebook cdn
server.blacklistRequests("http://.*\\.fbcdn.net/.*", 200); 
//Finish setting up your driver
WebDriver driver = new SomeDriverImpl(capabilities); 
```

我相信以下内容将适用于[这个 python 包装器](http://oss.theautomatedtester.co.uk/browsermob-proxy-py/)（正则表达式可能略有不同）：

```
from browsermobproxy import Server
server = Server("path/to/browsermob-proxy")
server.start()
proxy = server.create_proxy()
proxy.blacklist('http://.*\\.fbcdn.net/.*', 200)
from selenium import webdriver
profile  = webdriver.FirefoxProfile()
profile.set_proxy(proxy.selenium_proxy())
driver = webdriver.Firefox(firefox_profile=profile)
...
proxy.stop()
driver.quit() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-05T13:54:25.160

现在可以在 Chrome 中分两行完成：

```
driver.execute_cdp_cmd('Network.setBlockedURLs', {"urls": ["www.baidu.com"]})
driver.execute_cdp_cmd('Network.enable', {}) 
```

# iphone - 控制函数的执行

> ID：15295472
> 
> 赞同：0
> 
> 时间：2013-03-08T13:50:23.117
> 
> 标签：iphone, ios

我的 UIButton 有一个调用函数的操作。例如：

```
-(void)function:(id)sender{
    // execute some code here
} 
```

*   当我单击 UIButton 时，此功能将启动
*   如果我再次单击，并且该功能未完成 - 我想停止该功能，然后再次调用它
*   如果函数已经完成，只需再次调用该函数

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:27:24.943

基本上，您可以使用 ivar 来指示该函数尚未完成执行。就像是：

```
 BOOL isFinished;

    -(void)function:(id)sender{

            if(!isFinished) {
                // stop your process
                // start it again
                // and indicate that it's running (isFinished is still false)
            }
            else {
                isFinished = NO;
                // just start your process
            }
        } 
```

当您的功能/流程完成后，`isFinished = YES;`从那里设置。

# android - 在 Android CalendarView 中更改指定日期的颜色

> ID：15295481
> 
> 赞同：4
> 
> 时间：2013-03-08T13:50:47.930
> 
> 标签：android, android-layout, android-xml, android-custom-view, calendarview

我正在尝试更改 Android 的 CalendarView 中特定日期的文本颜色以标记有事件的日期。

我目前正在尝试通过复制 Android 的 CalendarView.java 并在相关位置注入我自己的代码来做到这一点，但我对其他解决方案持开放态度。

到目前为止，我已经将源 CalendarView.java 文件复制到我的项目中，`adt-bundle-windows-x86\sdk\sources\android-14\android\widget`并且我正试图让它在我的项目中工作，但是 R.styleable 存在很多问题，例如

```
TypedArray attributesArray = context.obtainStyledAttributes(attrs, R.styleable.CalendarView,
                R.attr.calendarViewStyle, 0);
        mShowWeekNumber = attributesArray.getBoolean(R.styleable.CalendarView_showWeekNumber,
                DEFAULT_SHOW_WEEK_NUMBER); 
```

mContext 似乎也缺少一个声明。我已经复制了 calendar_view.xml`adt-bundle-windows-x86\sdk\platforms\android-15\data\res\layout`

以下是出现的错误：

```
Description Resource    Path    Location    Type 
styleable cannot be resolved or is not a field  CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 369    Java Problem

styleable cannot be resolved or is not a field  CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 368    Java Problem

styleable cannot be resolved or is not a field  CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 374    Java Problem

styleable cannot be resolved or is not a field  CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 371    Java Problem

styleable cannot be resolved or is not a field  CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 362    Java Problem

styleable cannot be resolved or is not a field  CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 359    Java Problem

styleable cannot be resolved or is not a field  CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 366    Java Problem

styleable cannot be resolved or is not a field  CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 364    Java Problem

calendar_view cannot be resolved or is not a field  CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 400    Java Problem

mContext cannot be resolved CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 398    Java Problem

mContext cannot be resolved to a variable   CalendarView.java    /LoginActivity/src/uk/ac/bris/newtouch/newplan line 1095   Java Problem

com.android.internal.R cannot be resolved to a variable CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 404    Java Problem

list cannot be resolved or is not a field   CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 403    Java Problem

mContext cannot be resolved to a variable   CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 739    Java Problem

com.android.internal.R cannot be resolved to a variable CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 376    Java Problem

TextAppearance_Small cannot be resolved or is not a field   CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 374    Java Problem

com.android.internal.R cannot be resolved to a variable CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 405    Java Problem

styleable cannot be resolved or is not a field  CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 382    Java Problem

mContext cannot be resolved to a variable   CalendarView.java    /LoginActivity/src/uk/ac/bris/newtouch/newplan line 1035   Java Problem

styleable cannot be resolved or is not a field  CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 378    Java Problem

mContext cannot be resolved to a variable   CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 1034   Java Problem

error: Error: Resource is not public. (at 'id' with value '@+android:id/month_name').   calendar_view.xml   /LoginActivity/res/layout   line 25 Android AAPT Problem

styleable cannot be resolved or is not a field  CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 346    Java Problem

LocaleData cannot be resolved   CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 347    Java Problem

styleable cannot be resolved or is not a field  CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 348    Java Problem

styleable cannot be resolved or is not a field  CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 352    Java Problem

error: Error: Resource is not public. (at 'id' with value '@+android:id/day_names').    calendar_view.xml   /LoginActivity/res/layout   line 33 Android AAPT Problem

styleable cannot be resolved or is not a field  CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 342    Java Problem

calendarViewStyle cannot be resolved or is not a field  CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 343    Java Problem

styleable cannot be resolved or is not a field  CalendarView.java   /LoginActivity/src/uk/ac/bris/newtouch/newplan  line 344    Java Problem 
```

# ruby-on-rails - Resque 远程工作

> ID：15295486
> 
> 赞同：0
> 
> 时间：2013-03-08T13:51:04.777
> 
> 标签：ruby-on-rails, redis, resque

所以我有两台服务器。

服务器 A：有 redis、ruby + resque gem + rake gem 服务器 B：有 ruby​​ on rails + resque gem

从服务器 BI 将作业排队到服务器 A 上的 Redis。服务器 A 接收作业：

```
*** Found job on test
*** got: (Job{test} | TestQueue | [])
*** Running before_fork hooks with [(Job{test} | TestQueue | [])]
*** resque-1.23.1: Forked 10388 at 1362750385
*** Failed to start worker : #<NameError: uninitialized constant TestQueue> 
```

所以我认为工作需要在服务器 A 上运行。所以我把工作移到了那里。但是，当我从服务器 BI 入队时，得到以下信息：

```
rails console
Loading development environment (Rails 3.2.12)
irb(main):001:0>  Resque.enqueue(TestQueue)
NameError: uninitialized constant TestQueue 
```

我让它工作的唯一方法是当我在两台服务器上都有工作时，但这远非理想。

如何解决远程排队工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T06:53:41.213

`resque-remote`是用于远程排队作业的 gem。

如果`Resque.inline`为真，则作业将排入您当前的队列。

来源：[https ://github.com/localshred/resque-remote](https://github.com/localshred/resque-remote)

# mysql - 每组最多选择 x 行

> ID：15295489
> 
> 赞同：0
> 
> 时间：2013-03-08T13:51:11.850
> 
> 标签：mysql, sql, group-by, greatest-n-per-group

有一张桌子：

```
id | name       | job      | rank
01   john         teacher    4
02   mark         teacher    2
03   phil         plummer    1
04   dave         teacher    7
05   jim          plummer    9
06   bill         plummer    2 
```

如何选择最多 2 行的每个作业（如果可能，按每个组中的排名 ASC 排序，以便选择每个组的最低两个排名）。我要寻找的结果是：

```
02 mark teacher 2
01 john teacher 4
03 phil plummer 1
06 bill plummer 2 
```

这基本上按工作分组，限制为 2 并按等级排序。我一直在尝试使用 GROUP BY 和 LEFT JOIN，但我就是不知道该怎么做。使用 GROUPING BY 作业创建作业“临时列表”时，如何多次加入该作业？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T13:54:05.750

```
SELECT  id, name, job, rank
FROM    TableName a
WHERE 
        (
           SELECT   COUNT(*) 
           FROM     TableName as f
           WHERE    f.job = a.job AND 
                    f.rank <= a.rank
        ) <= 2; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/4fa15/2)

# java - OpenEdge 10.1C 在 JDBC 中将 datetimetz 作为非标准字符串返回

> ID：15295494
> 
> 赞同：4
> 
> 时间：2013-03-08T13:51:28.173
> 
> 标签：java, jdbc, openedge

我正在尝试访问代表`datetimetz`ABL 类型的数据库字段。我试过`ResultSet.getTimestamp(int)`哪个应该是正确的，尽管司机抱怨`[DataDirect][OpenEdge JDBC Driver]Value can not be converted to requested type.`。

`ResultSet`我已经尝试了所有没有工作的日期和时间获取器。调用`ResultSet.getObject(int)`返回 a`String`表示该值，但是该值是一种非标准格式，它实际上有一个怪癖，因此很难用 a 解析`SimpleDateFormat`，这种格式看起来像“ `2013-03-08 21:55:10:903 + 11:00`”。

从这个古怪的日期开始，由于时区限定符后面的空格，它不能用格式字符串干净地解析`+/-`，我不得不求助于以下丑陋的方法：

```
String r = rs.getString(col);
if (r == null) {
    return null;
}
DateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss:SSSXXX",
                                     Locale.getDefault());
try {
    return df.parse(r.substring(0, 23)
                  + r.substring(24, 25)
                  + r.substring(26));
} catch (ParseException ex) {
    return null;
} 
```

我正在使用 OpenEdge 10.1.C04

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-08T07:09:30.517

遗憾的是，不支持检索 TIMESTAMP WITH TIME ZONE 值作为时间戳

# maven - 从 maven 迁移到 gradle：WAR 构建任务的“gradle build”失败

> ID：15295495
> 
> 赞同：0
> 
> 时间：2013-03-08T13:51:28.257
> 
> 标签：maven, dependencies, war, gradle

我正在尝试将 pom.xml 配置重写为 gradle 脚本。pom 中有关依赖的部分如下所示：

```
<dependencies>
    <!-- Spring -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${org.springframework-version}</version>
        <exclusions>
            <!-- Exclude Commons Logging in favor of SLF4j -->
            <exclusion>
                <groupId>commons-logging</groupId>
                <artifactId>commons-logging</artifactId>
             </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${org.springframework-version}</version>
    </dependency> 
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>

    <!-- Spring security -->    
    <dependency> 
        <groupId>org.springframework.security</groupId>  
        <artifactId>spring-security-core</artifactId>  
        <version>${spring.security.version}</version> 
    </dependency> 
    <dependency>  
        <groupId>org.springframework.security</groupId>  
        <artifactId>spring-security-ldap</artifactId>  
        <version>${spring.security.version}</version>  
    </dependency>  
    <dependency>  
        <groupId>org.springframework.security</groupId>  
        <artifactId>spring-security-config</artifactId>  
        <version>${spring.security.version}</version>  
    </dependency> 
    <dependency> 
          <groupId>org.springframework.security</groupId>  
          <artifactId>spring-security-web</artifactId>  
          <version>${spring.security.version}</version> 
    </dependency> 
    <dependency>
         <groupId>org.springframework.security</groupId>  
         <artifactId>spring-security-taglibs</artifactId>  
        <version>${spring.security.version}</version> 
    </dependency> 
    <dependency> 
        <groupId>org.springframework.security</groupId>  
        <artifactId>spring-security-acl</artifactId> 
        <version>${spring.security.version}</version> 
    </dependency>

    <!-- Tiles dependancies -->
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-api</artifactId>
        <version>2.1.4</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-core</artifactId>
        <version>2.1.4</version>
    </dependency>
    <dependency>
        <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-jsp</artifactId>
        <version>2.1.4</version>
    </dependency>
    <dependency>
    <groupId>org.apache.tiles</groupId>
        <artifactId>tiles-servlet</artifactId>
        <version>2.1.4</version>
    </dependency>

    <!-- AspectJ -->
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>${org.aspectj-version}</version>
    </dependency>

    <!-- MySQL database driver -->
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.19</version>
    </dependency>

    <!-- PostgreSQL database driver -->
    <dependency>
        <groupId>postgresql</groupId>
        <artifactId>postgresql</artifactId>
        <version>9.1-901.jdbc4</version>
    </dependency>

    <!-- Required by databases -->
    <dependency> 
        <groupId>org.apache.derby</groupId> 
         <artifactId>derbyclient</artifactId> 
        <version>10.9.1.0</version> 
    </dependency> 
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>

    <!-- Logging -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>${org.slf4j-version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>jcl-over-slf4j</artifactId>
        <version>${org.slf4j-version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>${org.slf4j-version}</version>
        <scope>runtime</scope>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.15</version>
        <exclusions>
            <exclusion>
                <groupId>javax.mail</groupId>
                <artifactId>mail</artifactId>
            </exclusion>
            <exclusion>
                <groupId>javax.jms</groupId>
                <artifactId>jms</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.jdmk</groupId>
                <artifactId>jmxtools</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.jmx</groupId>
                <artifactId>jmxri</artifactId>
            </exclusion>
        </exclusions>
        <scope>runtime</scope>
    </dependency>

    <!-- @Inject -->
    <dependency>
        <groupId>javax.inject</groupId>
        <artifactId>javax.inject</artifactId>
        <version>1</version>
    </dependency>

    <!-- Servlet -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <!-- Validation -->
    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
    </dependency>

    <!-- Hibernate -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.1.7.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.3.0.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
        <version>1.0.1.Final</version>
    </dependency>

    <!-- DOM4j -->
    <dependency>
        <groupId>dom4j</groupId>
        <artifactId>dom4j</artifactId>
        <version>1.6.1</version>
    </dependency>

     <!-- Commons -->        
    <dependency>
        <groupId>commons-beanutils</groupId>
        <artifactId>commons-beanutils</artifactId>
        <version>1.8.3</version>
    </dependency>
    <dependency>
        <groupId>commons-collections</groupId>
        <artifactId>commons-collections</artifactId>
        <version>3.2.1</version>
    </dependency>
    <dependency>
        <groupId>commons-digester</groupId>
        <artifactId>commons-digester</artifactId>
        <version>2.1</version>
    </dependency>
    <dependency>
         <groupId>commons-fileupload</groupId>
         <artifactId>commons-fileupload</artifactId>
         <version>1.2.2</version>
    </dependency>
    <dependency>
      <groupId>commons-io</groupId>
      <artifactId>commons-io</artifactId>
      <version>2.3</version>
    </dependency>
    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.6</version>
    </dependency>
    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.1.1</version>
    </dependency>

     <!-- Language recognizer required by Spring -->
    <dependency>
        <groupId>antlr</groupId>
        <artifactId>antlr</artifactId>
        <version>2.7.7</version>
    </dependency>

    <!-- Test -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.7</version>
        <scope>test</scope>
    </dependency>        
</dependencies> 
```

目前负责依赖的部分 gradle 脚本如下所示：

```
//----------------------------------------------------------------------------
//                    SERVER'S DEPENDENCIES' CONFIGURATION
//----------------------------------------------------------------------------

configure(serverProjects) {
    repositories {
        mavenCentral()
        maven { url 'http://repository.jboss.org/nexus/content/groups/public' }
    }
}

// Spring Framework:
def springVersion = '3.1.0.RELEASE'
def springContext = "org.springframework:spring-context:${springVersion}"
def springMVC     = "org.springframework:spring-webmvc:${springVersion}"
def springAOP     = "org.springframework:spring-aop:${springVersion}"
def springORM     = "org.springframework:spring-orm:${springVersion}"
def springJDBC    = "org.springframework:spring-jdbc:${springVersion}"

// Spring Security:
def springSecurityVersion = '3.1.2.RELEASE'
def springSecurityCore    = "org.springframework.security:spring-security-core:${springSecurityVersion}"
def springSecurityLDAP    = "org.springframework.security:spring-security-ldap:${springSecurityVersion}"
def springSecurityConfig  = "org.springframework.security:spring-security-config:${springSecurityVersion}"
def springSecurityWeb     = "org.springframework.security:spring-security-web:${springSecurityVersion}"
def springSecurityTaglibs = "org.springframework.security:spring-security-taglibs:${springSecurityVersion}"
def springSecurityACL     = "org.springframework.security:spring-security-acl:${springSecurityVersion}"

// Tiles:
def tilesVersion = '2.1.4'
def tilesCore    = "org.apache.tiles:tiles-core:${tilesVersion}"
def tilesAPI     = "org.apache.tiles:tiles-api:${tilesVersion}"
def tilesJSP     = "org.apache.tiles:tiles-jsp:${tilesVersion}"

// AspectJ:
def aspectJVersion = '1.6.9'
def aspectJ        = "org.aspectj:aspectjrt:${aspectJVersion}"

// Databases:
def apacheDerbyVersion = '10.9.1.0'
def apacheDerby        = "org.apache.derby:derbyclient:${apacheDerbyVersion}"

def mySQLVersion = '5.1.19'
def mySQL        = "mysql:mysql-connector-java:${mySQLVersion}"

def postgreSQLVersion = '9.1-901.jdbc4'
def postgreSQL        = "postgresql:postgresql:${postgreSQLVersion}"

// Logging:
def slf4jVersion = '1.5.10'
def slf4jAPI     = "org.slf4j:slf4j-api:${slf4jVersion}"
def slf4jJCL     = "org.slf4j:jcl-over-slf4j:${slf4jVersion}"
def slf4jLog4J   = "org.slf4j:slf4j-log4j12:${slf4jVersion}"

def log4JVersion = '1.2.15'
def log4J        = "log4j:log4j:${log4JVersion}"

// Javax:
def javaxServletAPIVersion = '2.5'
def javaxServletAPI        = "javax.servlet:servlet-api:${javaxServletAPIVersion}"

def javaxJspApiVersion     = '2.1'
def javaxJspApi            = "javax.servlet.jsp:jsp-api:${javaxJspApiVersion}"

def javaxJSTLVersion       = '1.2'
def javaxJSTL              = "javax.servlet:jstl:${javaxJSTLVersion}"

def javaxInjectVersion     = '1'
def javaxInject            = "javax.inject:javax.inject:${javaxInjectVersion}"

def javaxValidationVersion = '1.0.0.GA'
def javaxValidation        = "javax.validation:validation-api:${javaxValidationVersion}"

// Hibernate:
def hibernateCoreVersion      = '4.1.7.Final'
def hibernateCore             = "org.hibernate:hibernate-core:${hibernateCoreVersion}"

def hibernateValidatorVersion = '4.3.0.Final'
def hibernateValidator        = "org.hibernate:hibernate-validator:${hibernateValidatorVersion}"

def hibernateJPAVersion       = '1.0.1.Final'
def hibernateJPA              = "org.hibernate.javax.persistence:hibernate-jpa-2.0-api:${hibernateJPAVersion}"

// dom4j:
def dom4JVersion = '1.6.1'
def dom4J        = "dom4j:dom4j:${dom4JVersion}"

// antlr:
def antlrVersion = '2.7.7'
def antlr        = "antlr:antlr:${antlrVersion}"

// commons:
def commonsBeanUtilsVersion   = '1.8.3'
def commonsBeanUtils          = "commons-beanutils:commons-beanutils:${commonsBeanUtilsVersion}"

def commonsCollectionsVersion = '3.2.1'
def commonsCollections        = "commons-collections:commons-collections:${commonsCollectionsVersion}"

def commonsDigesterVersion    = '2.1'
def commonsDigester           = "commons-digester:commons-digester:${commonsDigesterVersion}"

def commonsFileUploadVersion  = '1.2.2'
def commonsFileUpload         = "commons-fileupload:commons-fileupload:${commonsFileUploadVersion}"

def commonsIOVersion          = '2.3'
def commonsIO                 = "commons-io:commons-io:${commonsIOVersion}"

def commonsLangVersion        = '2.6'
def commonsLang               = "commons-lang:commons-lang:${commonsLangVersion}"

def commonsLoggingVersion     = '1.1.1'
def commonsLogging            = "commons-logging:commons-logging:${commonsLoggingVersion}"

// JUnit4:
def jUnitVersion = '4.7'
def jUnit        = "junit:junit:${jUnitVersion}"

project(':WARProject') {
    dependencies {
        // Spring Framework:
        compile(springContext) {
            exclude group: 'commons-logging', module: 'commons-logging'
        }
        compile(
            springMVC,    springAOP,    springORM,     springJDBC
        )

        // Spring Security:
        compile(
            springSecurityCore,    springSecurityLDAP,        springSecurityConfig,
            springSecurityWeb,    springSecurityTaglibs,    springSecurityACL
        )

        // Tiles:
        compile(
            tilesCore, tilesAPI, tilesJSP
        )

        // AspectJ:
        compile(aspectJ)

        // Databases:
        compile(
            apacheDerby, mySQL, postgreSQL
        )

        // Logging:
        compile(slf4jAPI)
        runtime(
            slf4jJCL, slf4jLog4J
        )
        runtime(log4J) {
            exclude group: 'javax.mail',   module: 'mail'
            exclude group: 'javax.jms',    module: 'jms'
            exclude group: 'com.sun.jdmk', module: 'jmxtools'
            exclude group: 'com.sun.jmx',  module: 'jmxri'
        }

        // Javax:
        compile(
            javaxInject,        javaxValidation,        javaxJSTL
        )
        providedCompile(
            javaxServletAPI,    javaxJspApi
        )

        // Hibernate:
        compile(
            hibernateCore, hibernateValidator, hibernateJPA
        )

        // dom4j:
        compile(dom4J)

        // antlr:
        compile(antlr)

        // commons:
        compile(
            commonsBeanUtils,    commonsCollections,    commonsDigester,
            commonsFileUpload,    commonsIO,            commonsLang,
            commonsLogging
        )

        // JUnit:
        testCompile(
            jUnit
        )
    }
} 
```

当我尝试构建 WAR 文件时，我收到`org.apache.log4j.Logger`包不存在的信息。如果我替换`runtime`为`compile`我收到错误`Artifact 'javax.jms:jms:1.1@jar' not found`，好像`exclude`子句被完全忽略了。

`providedRuntime`分别与和`providedCompile`具有相同的结果。`runtime``compile`

我应该如何修改脚本以成功构建 WAR 文件？

编辑：

`gradle :WARProject:dependencies`显示：

```
...
+--- org.slf4j:slf4j-log4j12:1.5.10 [default]
|    +--- org.slf4j:slf4j-api:1.5.10 [compile,runtime,master] (*)
|    \--- log4j:log4j:1.2.15 [compile,runtime,master]
|         +--- javax.mail:mail:1.4 [compile,master,runtime]
|         |    \--- javax.activation:activation:1.1 [compile,master,runtime]
|         +--- javax.jms:jms:1.1 [compile,master,runtime]
|         +--- com.sun.jdmk:jmxtools:1.2.1 [compile,master,runtime]
|         \--- com.sun.jmx:jmxri:1.2.1 [compile,master,runtime] 
```

这意味着 gradle 没有排除这些依赖项（它是 javax.jms:jms 唯一出现的地方）。我尝试`@jar`在定义的末尾添加，以及添加`transitive = false`排除块 - 没有结果。我还应该尝试什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T00:48:34.393

实际上 1.2.15 版的 log4j 缺少 maven 的许可问题依赖项。并且推荐使用 log4j 的 1.2.16 版本。

尝试：

```
def log4JVersion = '1.2.15'
def log4J        = "log4j:log4j:${log4JVersion}" 
```

=>

```
def log4JVersion = '1.2.16'
def log4J        = "log4j:log4j:${log4JVersion}" 
```

或者，如果您在 gradle 文件中不需要它们，则可以排除 jmx 和 jdmk。我看到您在 pom 中排除它们，但是，gradle 文件中缺少排除声明。

试试添加这个：

```
configurations {
   all*.exclude group: 'javax.jms', module: 'jms'
   all*.exclude group: 'com.sun.jdmk', module: 'jmxtools'
   all*.exclude group: 'com.sun.jmx', module: 'jmxri'
   published
} 
```

干杯!

# android - 检测设备带宽的更好方法 [Android]

> ID：15295499
> 
> 赞同：0
> 
> 时间：2013-03-08T13:51:41.463
> 
> 标签：android, bandwidth

我正在编写一个网络应用程序，它使用 HTTP 协议从服务器下载多个文件。

我想检测客户端到服务器的网络带宽，我在使用完美/正确的带宽计算方式之间感到困惑。

**1.**在我的应用程序中，我正在从远程服务器下载多个不同大小的文件。那么我可以使用这个文件下载（和下载的字节）过程来计算带宽吗？我正在使用的公式`contantLength / ((downloadEnd-downloadStart)* 1000))`

**或者**

**2.**我是否应该下载一个不同的临时文件（假设为 50 KB）而不管我的其他下载只是为了计算带宽然后计算带宽？

哪种方法将提供可靠的带宽检测以及哪种方法是有效的。

*注意：*
我不想检测我是否连接到互联网，也不想检测 WIFI 速度，只想知道检测带宽的正确方法。

# java - 分布式系统中的参与者（Akka）和代理（JADE）有什么区别？

> ID：15295504
> 
> 赞同：9
> 
> 时间：2013-03-08T13:51:59.570
> 
> 标签：java, akka, agents-jade

**Akka**演员和**Jade**代理人的概念有什么实质性区别吗？

据我所知，两者都通过创建独立实体（具有系统逻辑块）来实现系统分发，这些实体可以通过在它们之间发送消息来进行通信。

是否有其他因素使它们不同（如性能或预期目的）？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-08T21:43:24.567

我以前不知道 JADE，而且我是 Akka 技术负责人，所以对我的回答持保留态度。

浏览他们的网站（可能应该在一个小得多的屏幕上查看），看起来他们的代理做了演员的串行消息处理部分，但他们缺乏监督，因此容错，他们似乎鼓励阻止或轮询，而 Akka 的演员是完全事件驱动的，因此消耗更少的资源（线程）。查看程序员指南，似乎该概念主要是为 GUI 开发的用例而开发的，而 Akka 角色并不具体，可用于对任何类型的计算或交互进行建模。

我在肤浅的搜索中偶然发现的一个非常大的区别是为代理和演员提供的接口的大小：这可能是 Akka 的抽象更简单，因此更强大。

在主机之间移动代理的能力看起来很有趣，我们仍然必须实现它（参见[路线图](https://docs.google.com/document/d/18W9-fKs55wiFNjXL9q50PYOnR7-nnsImzJqHOPPbM4E/pub)）。

如果我没有在 JADE 方面遗漏一些东西，那么 Akka 对反应式编程的支持要好得多，它具有完全非阻塞的 actor，ask 模式与[可组合的 Futures](http://doc.akka.io/docs/akka/snapshot/java/futures.html)相结合（即不是来自 java.util.concurrent 的阻塞模式，而是具有转换方法用于异步组合）、[STM 支持](http://doc.akka.io/docs/akka/snapshot/java/stm.html)等。

我不知道 JADE 是如何做到的，但是在 Akka 中，您可以通过更改配置来弹性地扩展和扩展您的演员，请参阅[routing](http://doc.akka.io/docs/akka/snapshot/java/routing.html)。

最后但并非最不重要的一点是 Akka 中的[集群](http://doc.akka.io/docs/akka/snapshot/cluster/index.html)支持，我在 JADE 中找不到相应的功能，但我也没有深入挖掘。

我刚刚注意到的一件事：Akka 不需要登录即可试用；-)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-08-23T23:29:30.783

我知道这个问题已经有几年的历史了，但是为了完整起见（对于那些寻找有关该主题的信息的人，例如我自己），我想在与罗纳德（Ronald）相反的位置添加一个观点（知道比 Akka 更好的 JADE）。我不是 JADE 的贡献者，但（几年前）使用它并研究过（很多）移动软件代理。

软件代理范式已经存在很多年了，对该主题的一个很好的介绍是[Jeffrey M. Bradshaw 的论文](http://agents.umbc.edu/introduction/01-Bradshaw.pdf)。它比普通演员有更多的概念。

我不会对范式进行介绍（感兴趣的可以参考论文），但是在不了解它的情况下比较框架似乎不公平。顺便提一下，JADE 实现了很多（不是全部，自从我上次检查以来）范式的概念，不仅有可以与参与者比较的部分，而且还有[BDI 模型](https://en.wikipedia.org/wiki/Belief%E2%80%93desire%E2%80%93intention_software_model)、本体等概念。还有 JADE实现了包含几个部分的[FIPA 规范。](http://www.fipa.org/about/index.html)

就像我说的，自从我上次检查 JADE 实现以来已经有好几年了，所以我不会逐点进行技术比较。就像 Ronald 所说，JADE 没有实现像反应式或弹性伸缩这样的概念，但必须考虑到这些概念在今天广泛存在，但在很多年前（当 JADE 开始时）并不太流行。我想澄清的是，JADE 确实具有容错性、可扩展性和非阻塞的工作方式（可能在网站上并不清楚）。《[使用 JADE 开发多代理系统](http://www.wiley.com/WileyCDA/WileyTitle/productCd-0470057475.html)》一书很好地介绍了该框架。

总而言之，如果演员模型足以满足您的要求，我会选择 Akka，因为它比 JADE 更干净（可能更苗条）和更现代。如果您需要/想要一些与（移动）软件代理相关的更高级/特定功能，JADE 是更广泛使用的框架+平台（或者至少在我研究时是这样）。

只是我的两分钱！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-09T10:17:51.917

一年后又一次......我可以确认故障转移是 Jade 的关键，仅提及一些机制：备份平台、虚拟复制代理的概念、无状态中介容器（处理断开连接和 ip 更改）、持久性消息传递。Wade 增加了容错能力：http: [//jade.tilab.com/wade/doc/WADE-User-Guide.pdf](http://jade.tilab.com/wade/doc/WADE-User-Guide.pdf)。

Jade 并不主要针对 GUI 开发。

我想提到的 Jade 的另一个强大功能是代理不需要开放端口来进行网络双向通信，只有平台和备份需要开放端口。

此外，STM（有限状态机）是 Jade 中的重要组成部分，FIPA 会话模型是使用 STM 实现的。Jade 代理与其说是发送和接收消息，不如说是在工作流中执行对话。

Jade 中不支持集群，但 Wade 提供了可配置的代理池，其中分布式代理池负责处理特定任务。

至于 Elastic scaling 和 Jade 已经做了一些研究，我不知道它的状态。也许在 jvm 级别解决弹性缩放问题会更好。

Jade 和 Akka 中需要注意的一个主题是基于分布式消息的解决方案中的安全性（身份、身份验证、授权）。

Concluding this: Jade is far more powerful and feature rich then a first glance reveals. Jade needs modernization.

It would be interesting to investigate how Akka and Jade can mutually benefit, the AkkaAgent.

# java - 我的 LinkedBlockingQueue 实现是否需要同步？

> ID：15295506
> 
> 赞同：0
> 
> 时间：2013-03-08T13:52:10.617
> 
> 标签：java, synchronization

首先，我使用搜索并找到了与此问题相关的 n 个主题。不幸的是，他们没有帮助我，所以这将是 n++ 主题:)

情况：我将有很少的工作线程（同一个类，只有很多重复项）（我们称它们为 WT）和一个结果写入线程（RT）。

WT 会将对象添加到队列中，而 RT 将获取它们。由于会有很多 WT 不会有任何内存问题（独立于最大队列大小）？这些操作会互相等待完成吗？

此外，据我所知， BlockingQueue 很慢，所以也许我应该离开它并在同步块中使用普通队列？或者我应该通过使用 SynchronizedQueue 来考虑我自己？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:56:13.603

`LinkedBlockingQueue` is designed to handle multiple threads writing to the same queue. From the [documentation](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html):

> `BlockingQueue` implementations are thread-safe. All queuing methods achieve their effects atomically using internal locks or other forms of concurrency control. However, the bulk `Collection` operations `addAll`, `containsAll`, `retainAll` and `removeAll` are not necessarily performed atomically unless specified otherwise in an implementation.

Therefore, you are quite safe (unless you expect the bulk operations to be atomic).

Of course, if thread A and thread B are writing to the same queue, the order of A's items relative to B's items will be indeterminate unless you synchronize A and B.

As to the choice of queue implementation, go with the simplest that does the job, and then profile. This will give you accurate data on where the bottlenecks are so you won't have to guess.

# model - 如何在删除相应的模型对象时可靠地删除其EditParts是孤儿的连接图形？

> ID：15295509
> 
> 赞同：1
> 
> 时间：2013-03-08T13:52:18.323
> 
> 标签：model, refresh, listener, eclipse-emf, eclipse-gef

假设以下简化的 EMF 模型结构：

```
 Graph
   /   \
Node   Edge 
```

在我的 GEF 编辑器中，`EditPart`s 的组织方式如下。

**GraphEditPart**（图 = FreeformLayer）摘录

```
@Override
protected List<EObject> getModelChildren() {
  List<EObject> childrenList = new ArrayList<EObject>();
  Graph graph = (Graph) getModel();
  childrenList.addAll(graph.getNodes());
  return childrenList;
} 
```

**NodeEditPart**（图=扩展`Figure`）摘录（*还显示了如何`Edges`获取`Node`源或目标*）

```
@Override
protected List<Edge> getModelSourceConnections() {
  Node node = (Node) getModel();
  Graph graph = node.getGraph();
  String nodeId = node.getId();
  List<Edge> sourceList = new ArrayList<Edge>();
  if (graph != null)
  sourceList.addAll(graph.getOutEdges(nodeId));
  return sourceList;
}

@Override
protected List<Edge> getModelTargetConnections() {
  // Same principle as getModelSourceConnections
} 
```

**编辑器类**摘录（以防万一）

```
@Override
protected void initializeGraphicalViewer() {
  super.initializeGraphicalViewer();
  GraphicalViewer viewer = getGraphicalViewer();
  viewer.setContents(graph);
  ScalableFreeformRootEditPart root = (ScalableFreeformRootEditPart) viewer.getRootEditPart();
  ConnectionLayer connLayer = (ConnectionLayer) root.getLayer(LayerConstants.CONNECTION_LAYER);
  GraphicalEditPart contentEditPart = (GraphicalEditPart) root.getContents();
  ShortestPathConnectionRouter shortestPathConnectionRouter = new ShortestPathConnectionRouter(contentEditPart.getFigure());
  connLayer.setConnectionRouter(shortestPathConnectionRouter);
} 
```

所有`EditPart`s 都有自己的适配器（扩展`org.eclipse.emf.ecore.util.EContentAdapter`或实现`org.eclipse.emf.common.notify.Adapter`）。

这导致了一个`EditPart`结构，其中`NodeEditPart`s 是 的孩子`GraphEditPart`，**`EdgeEditPart`s 是孤儿**，即它们没有`parent`。`Edge`因此，每当添加或删除 s时，我都难以刷新数字。

当我通过在中进行昂贵的迭代*添加*一个时，我已经设法使更新工作（通知为新创建的必须在（）上注册：`Edge``GraphAdapter``Edge``Graph``newEdge.setGraph(graph)`

```
if (notification.getOldValue() == null && notification.getNewValue() instanceof Edge) {     
  for (Object ep : getChildren()) {
    if (ep instanceof NodeEditPart) { // There are in fact other EditParts as well
      Graph graph = (Graph) getModel();
      NodeEditPart nep = (NodeEditPart) ep;
      Node n = (Node) nep.getModel();
    if (graph.getOutEdges(n.getSId()).contains(notification.getNewValue()) || graph.getInEdges(n.getSId()).contains(notification.getNewValue()))
      nep.refresh();
} 
```

[**注意：**如果 - 顺便说一句 - 你能想到任何更好的方法，请随时用你的解决方案来打我！]

# 问题

删除模型对象时，我无法可靠地`Edge`从编辑器中删除图形！`Edge`有时有效，有时无效。

我想不可靠性可能与以下事实有关：**（a）**我的现实生活模型具有三层抽象，以及**（b）**不同`Adapter`的 EMF 并不总是能识别相同时间顺序的变化（？）。

`execute()`from`EdgeDeleteCommand`简单的调用`edge.setGraph(null)`，这会触发 EMF 自行清理（即，未连接到图的模型元素从模型中删除）。

当相应的模型对象是孤儿时，如何`Edge`在删除相应的模型对象时可靠地删除 s 的数字？`EditPart`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:12:46.247

只需让源模型对象和目标模型对象知道它们的某些内容发生了变化，并让它们`Adapter`处理刷新。假设下面**`EdgeDeleteCommand`**的`execute()`方法。

```
@Override
public void execute() {
  graph = edge.getGraph();
  source = edge.getSource();
  target = edge.getTarget();

  edge.setGraph(null);
  source.eNotify(new NotificationImpl(Notification.REMOVE, edge, null));
  target.eNotify(new NotificationImpl(Notification.REMOVE, edge, null));
} 
```

最后两行代码通知源和目标模型元素对象`edge`已“从它们中”移除。这实际上是一条*虚假*的通知消息，因为`edge`它从来都不是`source`or的孩子`target`。但是，`Adapter`附加到源和目标的 s**`NodeEditPart`**会注册这一点，并且可以做出如下反应。

```
@Override
public void notifyChanged(Notification notification) {
  switch (notification.getEventType()) {
  case Notification.REMOVE:
    refresh();
    break;

  default:
    break;
  }
} 
```

该`NodeEditPart.refresh()`方法将调用`getModelSourceConnections()`and `getModelTargetConnections()`“on its way”，这将返回`Edge`每个 s 的列表，其中已删除的`edge` **不再**包含在其中。

# search - 根据搜索工具栏的输入过滤 jqgrid 中的数据

> ID：15295512
> 
> 赞同：0
> 
> 时间：2013-03-08T13:52:31.680
> 
> 标签：search, dynamic, jqgrid, toolbar

当用户在 jqgrid 的搜索工具栏中键入内容时，jqgrid 是否可以自动搜索记录并根据用户在 jqgrid 中的输入显示它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:06:12.617

您只需根据搜索字段的按键事件触发搜索事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:33:14.953

你可以`searchOnEnter: false`在init filterToolbar上设置。例如：

```
$(element).filterToolbar({ searchOnEnter: false, defaultSearch: 'cn', ignoreCase: true }); 
```

# jquery - Jquery在ajax加载的内容上选择最后一个

> ID：15295513
> 
> 赞同：0
> 
> 时间：2013-03-08T13:52:33.060
> 
> 标签：jquery

我正在尝试在 jquery 中选择引导程序“well”的最后一个 ID。

这有效，但不适用于加载 ajax 的井，请参阅下面的尝试，有什么建议吗？

```
var newest = $('.well:last').attr('id');
setInterval(function() {
console.log(newest);
    $.ajax({
    type: 'POST',
    url: 'ajax/getNew.php',
    data: "id="+newest+"&session=<?php echo $sesh; ?>",
    cache: false,
    success: function(html) {
        $("#convo").append(html);
        newest = $(html).filter('.well:last').attr('id');
    }
    });
}, 3000); 
```

通过成功的 ajax 结果添加新井后，var latest 未定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:56:44.460

可能没有根元素。这就是为什么它不起作用。您可以尝试以下代码和选择器：

```
rootedHtml = "<div>"+html+"</div>";
newest = $(rootedHtml).find('.well[id]:last');
var id = newest.attr(id); 
```

还请检查这个小提琴：http: [//jsfiddle.net/qyEJu/](http://jsfiddle.net/qyEJu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:30:58.117

尝试：

```
newest = $("#convo").find('.well:last').prop('id'); 
```

或者：

```
newest = $("#convo").find('.well').last().prop('id'); 
```

# ssrs-2008 - SSRS 数据集渲染

> ID：15295514
> 
> 赞同：0
> 
> 时间：2013-03-08T13:52:33.467
> 
> 标签：ssrs-2008, reporting-services

我创建了一个存储过程，它的列可以更改名称并且列数也会波动。有没有办法根据结果集在 SSRS 中自动生成报告。我主要关心的是从 3 列输出到 10 列。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T03:23:51.920

您可以使用 Column Visibility 结合您为控制流定义的一些参数来切换列的可见性。与组一样，按列移位比按行移位要困难一些。另一个想法是研究列分组。在 SSRS 中，您可以使用列组模拟 PIVOT 命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:31:18.640

您可以使用矩阵，它将显示生成时的列数。
在 DATA 中包含（从 DATASETS 中拖动）您的数据，并在列中包含字段（动态列）。
希望这对您有所帮助。

# servicebus - 模拟服务总线的瞬态错误

> ID：15295519
> 
> 赞同：1
> 
> 时间：2013-03-08T13:52:43.843
> 
> 标签：servicebus

我正在编写一个将使用 Azure 服务总线的应用程序。对于本地开发，我使用 Windows Server 服务总线来提供相同的服务（使用的代码是相同的）。

我想编写应用程序以在发送或接收消息时容忍瞬时错误。为此，我希望能够测试故障处理代码是否可以处理在执行各种操作期间本地服务总线实例突然不可用的情况。

理想情况下，我想围绕这些场景编写一些自动化集成测试，但我很欣赏这实际上可能无法实现。

我可以做些什么来模拟本地服务总线上的瞬态错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T06:45:06.607

一件简单的事情是调用 stop-sbservice（影响一个节点）或 stop-sbfarm（影响整个场）cmdlet。这将让您在本地模拟服务总线中断。然后，您可以调用 start-sbservice 或 start-sbfarm 来恢复服务并验证您的代码是否正确恢复。这种方法还具有额外的好处，您可以控制服务何时返回（与仅使进程崩溃相比）。[此页面](http://msdn.microsoft.com/en-us/library/windowsazure/jj200653%28v=azure.10%29.aspx)包含有关可用 cmdlet 的信息。

如果这还不够，我过去使用的另一种方法是关闭网络接口，或者，如果服务器在另一台机器上，则在用于与服务总线通信的端口上设置防火墙。

# java - 这个简单的 EMF 模型有什么问题？

> ID：15295521
> 
> 赞同：0
> 
> 时间：2013-03-08T13:52:49.930
> 
> 标签：java, model, eclipse-emf

这个模型有什么问题：

```
/** @model abstract="true" */
public interface ContainedObject {
   /** @model */
   public Container getContainer();
}

/** @model abstract="true" */
public interface Container extends ContainedObject { }

/* @model */
public interface Category extends Container {
   /** @model containment="true" opposite="container" */
   public List<Category> getCategories();   
   /** @model containment="true" opposite="container" */
   public List<Variable> getVariables();
}

/** @model */
public interface Variable extends ContainedObject { } 
```

我想要包含的对象和它的容器之间的双向性。对于上面的 java，当我尝试创建 .genmodel 时收到以下错误消息：

```
the opposite 'container' already has attribute 'categories' of 'Category' 
as its opposite 
```

这个模型有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:10:07.217

*相反*的关系必须是*1:1*的关系。这是 - 据我所知 - 不可能有两个引用指向同一个相反的引用。当使用 Ecore 编辑器而不是带注释的 Java 类创建 EMF 模型时，这一点更加清楚。

在您的情况下，您可以拥有一个`List<ContainedObject> containedObjects`并创建两个额外的 getter 方法`getVariables()`和`getCategories()`，从该公共列表中过滤相应的元素，或者您可以创建两个`container`引用，一个 for`categories`和一个 for `variables`。

或者，您可以删除显式引用`container`并仅使用.`eContainer``eContents``EObject`

# go - Go - 什么是真正的 multipart.File？

> ID：15295522
> 
> 赞同：5
> 
> 时间：2013-03-08T13:52:50.320
> 
> 标签：go

在[文档](http://golang.org/pkg/mime/multipart/#File)中据说

> 如果存储在磁盘上，文件的底层具体类型将是 *os.File。

在这种情况下，一切都很清楚。伟大的。但是，如果不是，如果文件存储在内存中，会发生什么？

我的实际问题是我正在尝试获取通过 html 表单获得的存储在内存中的不同文件的大小，但我不能使用 os.Stat 来执行 fileInfo.Size() 因为我没有位置文件，只是它的名字。

```
fhs := req.MultipartForm.File["files"]
for _, fileHeader := range fhs {
    file, _ := fileHeader.Open()
    log.Println(len(file)) // Gives an error because is of type multipart.File
    fileInfo, err  := os.Stat(fileHeader.Filename) // Gives an error because it´s just the name, not the complete path

    // Here I would do things with the file
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T13:18:09.550

您可以利用 multipart.File 实现 io.Seeker 的事实来查找其大小。

```
cur, err := file.Seek(0, 1)
size, err := file.Seek(0, 2)
_, err := file.Seek(cur, 0) 
```

第一行查找文件的当前偏移量。第二个搜索到文件的末尾并返回它相对于文件开头的位置。这是文件的大小。第三个寻求我们在尝试找到大小之前的偏移量。

[您可以在此处](http://golang.org/pkg/io/#Seeker)阅读有关 seek 方法的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T15:11:19.933

如果你调用`parseMultipartForm(0)`它会将整个文件写入磁盘而不是在内存中存储任何内容，`f, _ := FormFile("file")`然后你可以使用`fi, _ := f.(*os.File).Stat()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T20:44:54.630

根据您要对数据执行的操作，最好的办法可能是使用 ioutil.ReadAll 将文件读入字节片。（无论如何，您最终可能希望将数据作为字节切片。）一旦完成，您就可以使用 len 找到长度。

# joomla - 组件工具栏上的 Joomla 上传按钮

> ID：15295525
> 
> 赞同：0
> 
> 时间：2013-03-08T13:52:58.677
> 
> 标签：joomla, joomla2.5, jtoolbar

在我的自定义组件中，我使用以下代码来弹出媒体管理器：

```
JToolBarHelper::media_manager('directory', 'Upload'); 
```

“目录”显然设置了单击按钮时将出现的默认目录，它确实如此，但是当我上传图像时，它会上传到标准`"images"`文件夹而不是`images/directory`.

我环顾了谷歌，大多数页面都说这是 Joomla 1.5 中的一个错误，我认为它已在 Joomla 2.5 中修复。还有另一种方法可以让默认目录正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:52:47.060

media_manager 使用 folder= 和您传递的目录调用。但它需要您的图像文件夹下方的路径。

所以如果你的文件夹是

```
/images/uploaddir 
```

你会调用它

```
JToolBarHelper::media_manager('uploaddir', 'Upload'); 
```

# java - 当类型未知时，如何迭代 Iterable 对象？

> ID：15295526
> 
> 赞同：5
> 
> 时间：2013-03-08T13:53:05.093
> 
> 标签：java, algorithm, iterable

对于家庭作业，我需要实现自己的 PriorityQueue 和 PriorityQueueSort。我使用泛型让它在没有排序功能的情况下工作，但现在我被困在这里..

```
public static void PriorityQueueSort(Iterable<?> list, 
    PriorityQueue<?,?> pq) {
  if (!pq.isEmpty()) {
    throw new IllegalArgumentException("Non-Empty PriorityQueue");
  }

  for (Object obj : list) {

  }
} 
```

我需要传入一个列表和一个空的 PriorityQueue，所以我对如何做到这一点的最佳猜测就在上面。我应该如何解决这个问题，以便我可以遍历具有未知类型的列表，并将该列表中具有正确类型的每个元素添加到优先级队列中？

* * *

编辑：

由于确定我没有提供足够的信息，因此这里有一些详细信息。

我有一个自定义 PriorityQueue 类和一个自定义 Entry 类，该类包含 K 类型的键和 V 类型的值。

我需要能够获取具有任何类型 T 的任何可迭代列表并遍历它，获取每个项目并将其添加到最初为空的 PriorityQueue 作为具有空值的键。然后我需要在我的 PriorityQueue 上不断调用 removeMin() 并将其按顺序添加回同一个列表对象中。

```
public class PriorityQueue<K extends Comparable<? super K>,V> {

  private Entry<K,V> _head;
  private Entry<K,V> _tail;
  private int _size;

  public PriorityQueue() {
    this._head = null;
    this._tail = null;
    this._size = 0;
  }

  public int size() {
    return _size;
  }

  public boolean isEmpty() {
    return (size() == 0);
  }

  public Entry<K,V> min() {
    if (_head == null) {
      return null;
    }
    Entry<K,V> current = _head;
    Entry<K,V> min = _head;;

    while (current != null) {
      if (current.compareTo(min) < 0) {
        min = current;
      }
      current = current.getNext();
    }
    return min;
  }

  public Entry<K,V> insert(K k, V x) {
    Entry<K,V> temp = new Entry<K,V>(k,x);
    if (_tail == null) {
      _tail = temp;
      _head = temp;
    }
    else {
      _tail.setNext(temp);
      temp.setPrev(_tail);
      _tail = temp;
    }
    return temp;
  }

  public Entry<K,V> removeMin() {
    Entry<K,V> smallest = min();
    smallest.getPrev().setNext(smallest.getNext());
    smallest.getNext().setPrev(smallest.getPrev());

    return smallest;
  }

  public String toString() {
    return null;
  }

  public static <K> void PriorityQueueSort(Iterable<? extends K> list,
        PriorityQueue<? super K, ?> queue) {

      for (K item : list) {
          queue.insert(item, null);
      }

      list.clear();
  }

  public static void main(String[] args) {
    PriorityQueue<Integer, Integer> pq = 
        new PriorityQueue<Integer, Integer>();

    pq.insert(4, 2);
    pq.insert(5, 1);

    System.out.println(pq.min().toString());
  }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T13:55:23.503

What you've got at the moment doesn't make sense in terms of the method signature - it would let you pass in a `List<Button>` and a `PriorityQueue<String>` for example.

I suspect you actually want something like:

```
public static <T> void prioritySortQueue(Iterable<? extends T> iterable,
    PriorityQueue<? super T> queue) {

    for (T item : iterable) {
        queue.add(item);
    }
} 
```

Note that the variance here just gives more flexibility - you could have a `List<Circle>` but a `PriorityQueue<Shape>` for example, and it's still type-safe.

EDIT: Now that we have more details, I think you want something like this:

```
public static <K> void prioritySortQueue(Iterable<? extends K> iterable,
    PriorityQueue<? super K, ?> queue) {

    for (T item : iterable) {
        queue.put(item, null);
    }
} 
```

(Assuming you have a `put` method. We still don't know what your `PriorityQueue` class looks like.)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T13:54:19.733

您需要使方法通用，以便您可以引用类型：

```
public static <T> void PriorityQueueSort(Iterable<T> list, 
PriorityQueue<?,T> pq) { 
```

# objective-c - 将浮点数舍入到预定列表中最接近的值？

> ID：15295528
> 
> 赞同：0
> 
> 时间：2013-03-08T13:53:18.267
> 
> 标签：objective-c, numbers, rounding, nearest-neighbor

我的显示器上有一个 UI 对象的有效尺寸列表（背景图像按我想要的方式平铺的值），我想依次获取每个对象的高度并将其四舍五入到下一个最大值在那个设置列表中。例如，如果列表包含`49`, `83`, `114`, `148`, 和`179`，如果我通过了，`1`我会得到`49`，如果我通过了，`30`我会得到`49`，如果我通过了，`50`我会得到`83`，等等。显然我要写一个单独的方法来返回一个有效大小并依次在每个对象上调用它。

我是一个相当新的程序员，正在努力寻找一种有效的方法来做到这一点。我的想法是运行一个`while`循环，将值加一，直到它等于设定值之一，然后返回该设定值。这应该可行，因为不涉及小数，但我怀疑这是否是最安全的方式。有没有比循环更有效的方法？如果有人想提供示例代码或我可以使用的对象，我正在为 iPhone 使用 Objective-C。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:09:18.653

循环是正确的方法，但循环遍历值数组，直到找到适合的值。这样，如果有 5 个有效尺寸，您最多只能通过循环 5 次。我写了一个使用 NSInteger 作为类型的简短示例：

```
- (NSInteger)findValidSize:(NSInteger)aSize
{
    // create a NSArray containing NSNumber objects
    NSArray* validSizes = @[ @49, @83, @114, @148, @179 ];

    for (NSNumber* validSize in validSizes) {
        if (aSize <= [validSize integerValue]) {
            return [validSize integerValue];     // found it
        }
    }

    // nothing valid was found, now what? return the last valid size?
    return [[validSizes lastObject] integerValue];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:20:23.783

你可以这样做：

```
-(NSInteger)nearestNumberTo:(NSInteger)number{
    NSArray *array=@[@(49), @(83), @(114), @(148), @(179)];
    NSInteger nearest=[array[0]integerValue];
    /*
    for (NSInteger index=0; index<array.count; index++) {
        if ([array[index]integerValue]>=number){
            nearest=[array[index]integerValue];
            break;
        }
    }
    */
    for (NSNumber *num in array) {
        if ([num integerValue]>=number){
            nearest=[num integerValue];
            break;
        }
    }
    return nearest;
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification{
    //49, 83, 114, 148, and 179
    NSInteger minimum=[self nearestNumberTo:86];
    NSLog(@"%ld",minimum);

} 
```

# dynamics-crm-2011 - 如何从实体对象中获取查找字段值？

> ID：15295529
> 
> 赞同：1
> 
> 时间：2013-03-08T13:53:20.057
> 
> 标签：dynamics-crm-2011, dynamics-crm, dynamics-crm-online

我有一个“参与者”列表，它是一个实体。在该实体中，存在一个查找。如何获取 Id,LogicalName 值？我是这样尝试的。但是`ContId`是`undefined`

```
function GetTrips(contactId) {
    debugger;
    var participant = RetrieveCrmRecords("new_participant", null, null, null, null, null);
    for (var i = 0; i < participant.results.length; i++) {
        var ContId = participant.results[i].new_TripPerticipants.Id;
       //===================
    } 
```

从中`RetrieveCrmRecords`我得到以下结果：这`new_TripParticipants`是查找字段。

![在此处输入图像描述](../Images/79431e5d9dc73fc1a9e6c70e576cabeb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T00:36:43.973

Your code has a spelling typo. Use

```
var ContId = participant.results[i].new_TripParticipants.Id; 
```

# ruby-on-rails - Rails 一小时后延迟工作开始？

> ID：15295532
> 
> 赞同：-1
> 
> 时间：2013-03-08T13:53:30.790
> 
> 标签：ruby-on-rails, ruby, delayed-job

我正在使用delayed_job gem。

我可以开始延迟工作`videofile.delay.convert_and_upload_audio_on_cdn`，但是一小时后开始延迟工作的代码是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T13:56:21.410

Try with something like this:

```
handle_asynchronously :in_the_future, :run_at => Proc.new { 1.hour.from_now } 
```

[https://github.com/collectiveidea/delayed_job](https://github.com/collectiveidea/delayed_job)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:59:25.613

从另一个问题的示例中，查看以下内容：

```
foursquare.checkins.delay({:run_at => @time.minutes.from_now}).add(:venueId => @venue_id, :broadcast => "private") 
```

在你的情况下，它会是这样的。

```
videofile.delay({run_at: Time.now+1.hour}).convert_and_upload_audio_on_cdn 
```

我自己没有使用过这种语法，但根据另一个答案，我认为它应该可以工作。

# python - 我的 API 没有显示在资源管理器中，日志只显示 500

> ID：15295533
> 
> 赞同：3
> 
> 时间：2013-03-08T13:53:31.647
> 
> 标签：python, google-cloud-endpoints

正如标题所示，我的 API 在资源管理器中不可见，我的所有日​​志显示如下：

```
INFO     2013-03-08 13:39:08,182 dev_appserver.py:723] Internal redirection to http://127.0.0.1:8080/_ah/spi/BackendService.getApiConfigs
INFO     2013-03-08 13:39:08,198 dev_appserver.py:3104] "GET /_ah/api/discovery/v1/apis HTTP/1.1" 500 - 
```

我的 app.yaml 文件中的相关处理程序如下所示：

```
13 # Endpoint handlers
14 - url: /_ah/spi/.*
15   script: main.app 
```

我的 main.py 代码如下：

```
from google.appengine.ext import endpoints
from protorpc import messages

class   Location(messages.Message):
    reg_id = messages.StringField(1)
    phone_number = messages.StringField(2)
    latitude = messages.StringField(3)
    longitude = messages.StringField(4)

@endpoints.api(name='locations', version='v1', description='Location API for where are you app')
class LocationApi(remote.Service):
    @endpoints.method(Location, Location, name='location.insert', path='location', http_method='POST')
    def insert(self, request):
        return request

app = endpoints.api_server([LocationApi]) 
```

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:50:56.790

请检查以下内容：

1.  正如您应该能够从日志中看到的那样，您遇到了导入错误。在`main.py`添加这个

    ```
    from protorpc import remote 
    ```

2.  从[文档](https://developers.google.com/appengine/docs/python/endpoints/create_api#allowed-clients-and-audiences)中：

    > **注意：**如果您想使用 Google API Explorer 测试经过身份验证的 API 调用，您还必须提供其客户端 ID，该 ID 可通过 Endpoints 库以`endpoints.API_EXPLORER_CLIENT_ID`.

3.  再次检查您的日志以确保代码实际运行。由于引发了 Python 异常，您得到了 500，并且您的代码可能存在其他问题，尽管它看起来不像您发布的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T19:46:14.847

现在，我在其他处理程序之前列出了端点处理程序。

这有效：

```
handlers:
# Endpoint handler
- url: /_ah/spi/.*
  script: endpoints.app

# Page handlers
- url: /.*
  script: home.app 
```

这不起作用：

```
handlers:
# Page handlers
- url: /.*
  script: home.app

# Endpoint handler
- url: /_ah/spi/.*
  script: endpoints.app 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-02-26T23:46:41.233

问题是您的 python 文件找不到以下内容的导入：

```
from protorpc import remote 
```

因此，使用终端，跳过 GUI，导航到 appengine sdk 目录并将您的项目放在那里。对于 mac，它是：

```
/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/ 
```

# c# - .NET Toolkit for Rally REST API 文档已弃用？

> ID：15295535
> 
> 赞同：1
> 
> 时间：2013-03-08T13:53:33.953
> 
> 标签：c#, rally

我开始使用 Rally .NET API，以便开发一个插件来将用户故事导入 Enterprise Architect。

我从以下页面中的示例开始：http: [//developer.help.rallydev.com/rest-api-net](http://developer.help.rallydev.com/rest-api-net)。

例如，在最后一个中，我收到了以下错误：

```
//Create an item
DynamicJsonObject toCreate = new DynamicJsonObject();
toCreate["Name"] = "My Defect";
CreateResult createResult = restApi.Create("defect", toCreate); 
```

> 错误 1 ​​方法 'Create' 没有重载需要 2 个参数

```
//Delete the item
OperationResult deleteResult = restApi.Delete(createResult.Reference); 
```

> 错误 2 方法“删除”没有重载需要 1 个参数

但是[这里](https://docs.rallydev.com/restapinet/html/AllMembers_T_Rally_RestApi_RallyRestApi.htm)的文档与示例不同。

总而言之，我想知道任何好的信息来源来学习这个 Rally API 以及第一页示例中创建和删除的正确实现。

提前致谢，

佩德罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:58:22.570

很抱歉造成混淆 - 在 .NET REST DLL（版本 1.0.15）的最新版本中，Create 和 Delete 方法都略有变化 - 它们现在需要 Workspace Ref：

```
 String workspaceRef = "/workspace/12345678910";
 DynamicJsonObject toCreate = new DynamicJsonObject();
 toCreate["Name"] = "My Defect";
 CreateResult createResult = restApi.Create(workspaceRef, "defect", toCreate); 
```

删除应如下所示：

```
 OperationResult deleteResult = restApi.Delete(workspaceRef, createResult.Reference); 
```

或这个：

```
 myDefectObjectID = "12345678911";
 OperationResult deleteResult = restApi.Delete(workspaceRef, "Defect", myDefectObjectID); 
```

我们将努力尽快更新文档。感谢您指出了这一点！

# asp.net - 在 Asp.Net 中无法连接到远程 MySql 服务器

> ID：15295541
> 
> 赞同：2
> 
> 时间：2013-03-08T13:53:48.400
> 
> 标签：asp.net, mysql, web-applications

我需要通过 asp.net 连接到 MYSQL 数据库。我正在使用 MySQL 连接器与数据库建立连接，但在执行此操作时出现此错误：![在此处输入图像描述](../Images/e18429b097370998bd1b817f857a41b2.png)

```
不再支持使用旧密码进行身份验证，请使用 4.1 样式的密码。

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T14:13:31.590

从 MySQL 4.1 及更高版本开始，它们使用与早期版本不兼容的新协议。这就是为什么当您将服务器从早期版本升级到 4.1 或更高版本时，您会收到身份验证错误消息。

如果您需要在版本 4.1 之前和之后使用两个客户端连接到数据库，则必须存储两个密码。一种是旧方式，一种是新方式。

您可以使用以下方法将用户密码设置为新方式：

```
SET PASSWORD for <username> = PASSWORD('new password')
SET PASSWORD FOR 'steve'@'10.15.2.67' = PASSWORD('my secure password'); 
```

如果需要，您还可以使用以下方法将密码设置为旧方式：

```
SET PASSWORD for <username> = OLD_PASSWORD('new password')
SET PASSWORD FOR 'steve'@'10.15.2.67' = OLD_PASSWORD('my secure password'); 
```

[MySQL手册](http://dev.mysql.com/doc/refman/5.0/en/set-password.html)中有一个很棒的页面，它将详细说明该过程

如果服务器版本高于 4.1，您实际上可以使用旧密码方法，但**不建议这样做**。

为此，您可以使用[--old-passwords](http://dev.mysql.com/doc/refman/4.1/en/server-options.html#option_mysqld_old-passwords)选项启动服务器。

因此，服务器已更新并且您使用的是旧客户端 - 或者您已更新您的客户端（现在使用新密码系统）并且您连接到低于 4.1 的服务器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-11T10:27:03.130

好的，但是如果您没有权限这样做，仅仅是因为您处于共享托管环境中：

```
SET PASSWORD for <username> = OLD_PASSWORD('new password')
SET PASSWORD FOR 'steve'@'10.15.2.67' = OLD_PASSWORD('my secure password'); 
```

你能做什么？我还没有找到解决方法，我的托管服务提供商在没有警告的情况下更改了 mysql 配置……也没有给出解决方案。

未完成的解决方案 您可以强制 web.config 使用旧的连接器。它似乎有效，但发生了 mysql 错误......所以我认为连接器中的某处存在错误。

# jakarta-ee - 使用 arquillian 测试 REST Web 服务

> ID：15295542
> 
> 赞同：1
> 
> 时间：2013-03-08T13:53:53.020
> 
> 标签：jakarta-ee, jboss-arquillian, glassfish-embedded

我们想使用 arquillian 测试我们的 REST API。

我们使用 glassfish 进行生产和 arquillian。

我们已经对我们公开的一些 JMS 队列进行了 arquillian 测试，而且效果很好，所以我们至少有一些基础知识是正确的。当我们开始使用该设置进行 REST 测试时，在我们在 REST URL 上发送的第一个 HTTP GET 时，我们得到了异常： `com.sun.jersey.api.container.ContainerException: No WebApplication provider is present.`

这是我们的 ShrinkWrap 设置：

```
 public static WebArchive createTestArchive() {
    return ShrinkWrap.create(WebArchive.class, "test.war") // Create jar
            .addPackages(true, "<our packages, plus some dependencies>") //, "com.ocpsoft.pretty")
            .addAsWebInfResource(EmptyAsset.INSTANCE, "beans.xml") // b
            .setWebXML("WEB-INF/web.xml")
            .addAsWebInfResource("WEB-INF/faces-config.xml")
            //.addAsWebInfResource(new StringAsset("<faces-config version=\"2.0\"/>"), "faces-config.xml")
            .addAsResource("META-INF/test-persistence.xml", "META-INF/persistence.xml");

} 
```

我认为我们的 web.xml 是相关的：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>    
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
    <context-param>
        <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
        <param-value>.xhtml</param-value>
    </context-param>

    <!-- Pretty faces config -->

    <filter>
        <filter-name>Pretty Filter</filter-name>
        <filter-class>com.ocpsoft.pretty.PrettyFilter</filter-class>
        <async-supported>true</async-supported>
    </filter>

    <filter-mapping>
        <filter-name>Pretty Filter</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>FORWARD</dispatcher>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>ERROR</dispatcher>
        <dispatcher>ASYNC</dispatcher>
    </filter-mapping>

    <!-- disable annotation scanning by the PrettyFaces module -->
    <context-param>
        <param-name>com.ocpsoft.pretty.BASE_PACKAGES</param-name>
        <param-value>none</param-value>
    </context-param>

</web-app> 
```

**编辑：**由于这个问题，我现在已更改为 glassfish-embedded 3.1.1，并根据新的错误消息更新了问题。我们使用 glassfish 3.1.2 进行主要操作。

另请注意，我们首先收到警告：

```
WARNING: Could not instantiate service class org.glassfish.osgicdi.impl.OSGiServiceExtension
java.lang.NoClassDefFoundError: org/osgi/framework/ServiceException
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:449) 
```

[..]

```
Caused by: java.lang.ClassNotFoundException: org.osgi.framework.ServiceException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354) 
```

（但似乎忽略该警告是安全的，请参阅此及其链接到的错误：[http://www.java.net/forum/topic/glassfish/glassfish/could-not-instantiate-service-class-orgglassfishosgicdiimplosgiserviceextension？力=217](http://www.java.net/forum/topic/glassfish/glassfish/could-not-instantiate-service-class-orgglassfishosgicdiimplosgiserviceextension?force=217) )

然后是错误：

```
SEVERE: WebModule[/test]StandardWrapper.Throwable
com.sun.jersey.api.container.ContainerException: No WebApplication provider is present
    at com.sun.jersey.spi.container.WebApplicationFactory.createWebApplication(WebApplicationFactory.java:69)
    at com.sun.jersey.spi.container.servlet.ServletContainer.create(ServletContainer.java:391)
    at com.sun.jersey.spi.container.servlet.ServletContainer$InternalWebComponent.create(ServletContainer.java:306) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:01:19.950

好的，在 Gab 的评论的帮助下（如果没有那个提示，我永远不会成功！），我解决了这个问题。该评论使我专注于软件包的版本，我意识到我们用于生产的 glassfish 3.1.2 使用 jersey 1.11，而 glassfish-embedded 3.1.1，我们现在用于测试（因为没有 3.1 .2 在撰写本文时），使用球衣 1.8。

因此，我在 pom.xml 的 TEST 部分添加了以下依赖项：

```
 <!-- glassfish 3.1 ships with jersey 1.8, hence the version here. -->
 <dependency>
     <groupId>com.sun.jersey</groupId>
     <artifactId>jersey-server</artifactId>
     <version>1.8</version>
     <scope>provided</scope>
  </dependency>
  <dependency>
     <groupId>com.sun.jersey.contribs</groupId>
     <artifactId>jersey-multipart</artifactId>
     <version>1.8</version>
  </dependency> 
  <dependency>
     <groupId>com.sun.jersey</groupId>
     <artifactId>jersey-json</artifactId>
     <version>1.8</version>
  </dependency> 
```

我在 pom.xml 的主要部分中将依赖项留给 jersey，指向 jersey 1.11。

现在问题解决了。

我希望我们能针对此类问题获得更好的错误消息！

# javascript - 了解跨域的东西和 AJAX

> ID：15295543
> 
> 赞同：1
> 
> 时间：2013-03-08T13:54:00.650
> 
> 标签：javascript, ajax, xss, same-origin-policy

我对与跨域相关的两件事有点困惑。

假设我有 2 个域；mydomain.com 和 otherdomain.com

现在在 mydomain.com 上，可以从 otherdomain.com 访问的所有内容是什么？我的意思是我们可以有

```
<img src="otherdomain.com/xyz.jpg"> 
```

同样，我们可以在 iframe src 中直接使用 otherdomain.com 吗？默认情况下允许什么？可以做些什么来阻止 otherdomain.com 的用户访问？

第二部分与 JavaScript/AJAX 有关。在脚本相关的东西中默认阻止其他域的东西吗？使用 AJAX，我可以默认向 otherdomain.com 发出请求吗？是否允许？如果不允许，如何从 otherdomain.com 获得响应？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:56:02.790

Read [Wikipedia](http://en.wikipedia.org/wiki/Same_origin_policy).

You cannot read from another domain (unless it allows you to).

You can display or execute content from another domain (eg, using an image, frame, or script tag), but you can't read it directly from your code.
Thus, you cannot send an AJAX request to another domain, and you cannot read the contents of an image, frame, or script tag that was loaded from another domain.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:05:25.867

> 可以从 otherdomain.com 访问的所有内容是什么？我的意思是我们可以有`<img src="otherdomain.com/xyz.jpg">`

您需要区分“显示”和“访问”。[您可以包含图像，但由于同源策略 (SOP)](http://en.wikipedia.org/wiki/Same_origin_policy)的原因，您无法访问它的数据。

> 同样我们可以在iframe src中直接使用otherdomain.com吗？默认情况下允许什么？

您可以包含可以链接的所有内容，从样式表、脚本、图像到通过框架的整个页面。从其他域执行脚本实际上是一种获取数据的标准方法，称为[JSONP](http://en.wikipedia.org/wiki/JSONP)；并且包括来自第三方 CDN 的资源也很常见。

> 可以采取哪些措施来阻止 otherdomain.com 的用户访问？

您可以使用[`X-FRAME-OPTIONS`-header](https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options)来防止通过框架包含，大多数浏览器都应该尊重这一点。

您可以尝试避免使用错误的`REFERER`标头回答请求（发送 404 内容），但这不是一种可靠的方法，因为 REFERER 经常被浏览器禁用或被防火墙阻止。

> 第二部分与 JavaScript/AJAX 有关。在脚本相关的东西中默认阻止其他域的东西吗？使用 AJAX，我可以默认向 otherdomain.com 发出请求吗？是否允许？

不，对数据的访问被阻止。[您可以发送请求，但除非发送CORS 标头](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)以明确允许，否则您的脚本将无法获得响应。

> 如果不允许，如何从 otherdomain.com 获得响应？

您可以在 mydomain.com 上使用[代理。](http://en.wikipedia.org/wiki/Proxy_server)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:09:19.713

> 我们能有吗`<img src="otherdomain.com/xyz.jpg">`

是的，我们可以拥有这个和任何其他资源，如图像、视频和音频文件、zip、pdf ......

> 我们可以直接在 iframe src 中使用 otherdomain.com 吗？
> 
> 我可以默认向 otherdomain.com 发出请求吗？是否允许？

不，出于安全原因

> 如果不允许，如何从 otherdomain.com 获得响应？

如果你拥有 otherdomain.com，你可以使用 jsonp 和一些 php 的东西。

```
http://remysharp.com/2007/10/08/what-is-jsonp/ 
```

# c++ - 推回地图容器

> ID：15295545
> 
> 赞同：3
> 
> 时间：2013-03-08T13:54:07.863
> 
> 标签：c++, map, vector, containers, push-back

我们得到了这张地图：

```
std::map <int, int> values; 
```

此函数是否与 Vector 的 push_back 函数相同：

```
void PushBack(int value)
{
  values[values.size()] = value;
} 
```

由于 size 返回容器的大小，我认为它是正确的，根据以下情况它是： index 0 = 200 index 1 = 150 你想推回 100，values.size() 将返回 2，对吗？那么，它会像正常的 push_back 一样进入索引 2，对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T13:56:49.050

The whole point of maps is to lookup and store data based on a key that uniquely represents that data.

If you're doing this there's no point in using a map; you should choose another data structure that more appropriately addresses the design needs of the application.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:11:04.837

地图和矢量非常不同。

**您提出的实际问题的简短版本：**

如果您在自定义地图上所做的只是基于键查找已经存在的键（运算符 []）和您的 push_back，那么它可能就像只使用矢量运算符 [] 和 push_back 的矢量的低效替代品，是的。

**提供一些背景的长版本可能不是您真正想要的：**

地图没有索引，它有一个*key*。地图通常实现为红黑树。这样的数据结构允许基于键的有效查找。您通常关心特定元素的键，键本身携带重要信息。键通常是不连续的，并且映射不会为映射中未使用的键分配空间。

向量是一个连续的内存块。这允许有效的索引访问。索引与键不同：您通常不关心特定元素获得哪个索引，您获得的索引取决于插入顺序（它们的键与映射中的插入顺序无关），向量中的索引始终是整数值，并且不能有非连续索引。

如果您在地图中所做的只是您自己的自定义 push_back，那么在某些情况下它可能看起来像一个向量，而在其他情况下它可能不会以其他方式（例如迭代器失效）。

由于您实际上并不关心示例中添加的元素的键，因此选择地图是没有意义的。向量中的索引查找会更快，并且内存开销会更小（尽管如果分配了很多对象，最终可能会出现内存碎片问题，但这是一个单独的主题）。

最后，如果您不知道要使用哪个容器类，则可以从 vector 和 list 开始。了解这两者之间的区别，以及何时应该使用它们中的任何一个，然后继续使用更高级、更专业的容器，例如 map、set、它们的“multi”变体和“unordered”变体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T13:55:51.933

Unless you only use the map in a very special way, it won't be correct. Consider this scenario:

```
std::map<int, int> values;

values[1] = 42;
PushBack(7); 
```

`values` now holds just one element, `7`, at index `1`.

The question is, of course, if you need 'push back', why use a map in the first place.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T13:57:58.957

如果您愿意，请`push_back`考虑使用`std::vector`. map 是一个关联数组，用于通过指定类型的键进行快速查找。它们的设计目的不是像 vector 那样做 push_back 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T14:02:50.507

很难说你想要达到什么，以及为什么你尝试使用地图而不是矢量，但更好的方法可能是：

```
void PushBack(int value)
{
   int idx = 0;
   if( values.size() ) idx = values.rbegin()->first + 1;
   values[idx] = value;
} 
```

# javascript - 当 window.width 调整大小但不调整高度时执行功能

> ID：15295553
> 
> 赞同：0
> 
> 时间：2013-03-08T13:54:32.153
> 
> 标签：javascript, jquery, html

我正在开发一个响应式网站，并且我有一些标签可以在小屏幕上从标签变为手风琴。这是我目前的做法：

```
var myGlobalVariable = {};

$(window).resize(function(e) {
    duringResize();
    myGlobalVariable.windowWidth = window.innerWidth;
});

function widthHasChanged() {
    return window.innerWidth !== myGlobalVariable.windowWidth;
}

function duringResize() {
    if(widthHasChanged()) {
        if(Modernizr.mq('all and (min-width:1000px)')) {
            /* Do stuff for tabs */
        } else {
            /* Do stuff for accordion */
        }
    }
} 
```

我对此不满意，因为我不得不使用全局变量来存储浏览器窗口的最后一个宽度，以检查宽度是否发生了变化。

我要这样做的原因是因为在手机上时，当标签在手风琴模式下，单击一个实际上会使文档更高以适应标签内容。出于某种原因，这被归类为调整大小，即使“窗口”在移动设备上的大小仍然相同。这意味着即使宽度没有改变，我的标签/手风琴代码也会被调用，这把事情搞砸了。

有什么我遗漏的，还是这是实现这一目标的唯一方法？欢迎使用 jQuery 和 vanilla javascript 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:05:18.623

没有特定事件可以绑定到窗口宽度更改。您的解决方案对我来说看起来不错。

我能想到的唯一另一种方法是在计时器内定期检查 $(window).width 。我认为总的来说，单个全局变量更可取:)

# asp.net - 选中时 OnCheckedChanged 不拾取功能

> ID：15295558
> 
> 赞同：0
> 
> 时间：2013-03-08T13:54:41.653
> 
> 标签：asp.net

使用中继器，它显示一个列表，其中包括一个复选框字段。单击复选框时，我希望该函数运行并显示标签....尝试调试它但似乎无法启动，使用断点不会获取该函数

//后面的代码

```
 protected void chkMyCheck_CheckedChanged(object sender, EventArgs e)
    {
        label.Text = "Button Clicked";
    } 
```

aspx：

```
<asp:Repeater id="rptSelectedUtilities" runat="server">
            <HeaderTemplate>
                <table class="detailstable FadeOutOnEdit">
                    <tr>   
                        <th style="width:200px;">Utility</th>    
                        <th style="width:200px;">Contacted</th>   
                        <th style="width:200px;">Comment</th>    
                    </tr>
            </HeaderTemplate>
            <ItemTemplate>
                    <tr>
                        <th style="width:200px;"><%# Eval("Name") %></th>
                        <th style="width:200px;"><asp:CheckBox ID="chkMyCheck" AutoPostBack="true" runat="server" OnCheckedChanged="chkMyCheck_CheckedChanged" Checked='<%# Convert.ToBoolean(Eval("Checked")) %>'/></th>   
                        <th style="width:200px;"><%# Eval("Comment") %></th>  
                    </tr>
            </ItemTemplate>
            <FooterTemplate>
                </table>
            </FooterTemplate>
        </asp:Repeater>

        <asp:Label id="labelTableEmpty" runat="server" Text="There are currently no items in this table." />

        <asp:Label ID ="label" runat="server" /> 
```

关于为什么单击复选框时代码不进入 chkMyCheck_CheckedChanged 函数的任何想法？，页面确实重新刷新，因此它会自动回发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:43:15.447

您是否在 !IsPostBack 中绑定中继器？？？

为了

```
void page_load()
{

if(!IsPostBack)
{
//BindRepeater method??? 
}
} 
```

[查看](https://stackoverflow.com/questions/11590528/in-a-asprepeater-i-use-aspcheckbox-but-the-oncheckedchanged-doesnt-fire)

# python - python, encryption of any size code with a smaller key

> ID：15295559
> 
> 赞同：0
> 
> 时间：2013-03-08T13:54:49.370
> 
> 标签：python, encryption

So I'm trying to work to create a program which can take two inputs such as

```
encrypt('12345','12') 
```

and it will return

```
'33557' 
```

where the code ('12345') and been incremented by the key ('12'), working from right to left.

I have already created one which will work for when the code and key are both 8 long, but I cannot work out how to do this should the code be allowed to be any size, possibly with nested for statments?

Here is the one i did early so you can see better what i am trying to do

```
def code_block(char,charBlock):
    if len(char) == 8 and len(charBlock) == 8:    #Check to make sure both are 8 didgets.
        c = char
        cB = charBlock
        line = ""
        for i in range(0,8):
            getDidget = code_char2(front(c),front(cB))
            c = last(c)
            cB = str(last(cB))
            line =line + getDidget
        print(line)
    else:
        print("Make sure two inputs are 8 didgets long")

def front(word):
    return word[:+1]

def last(word):
    return word[+1:] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:27:50.600

在 Python 3.2 上测试的一些代码：

```
from decimal import Decimal
import itertools

def encrypt(numbers_as_text, code):
    key = itertools.cycle(code[::-1])

    num = Decimal(numbers_as_text)

    power = 1
    for _ in numbers_as_text:
        num += power * int(next(key))
        power *= Decimal(10)

    return num

if __name__ == "__main__":
    print(encrypt('12345','12')) 
```

一些解释：

*   `code[::-1]`是反转字符串的一种很酷的方法。[从这里偷来的](https://stackoverflow.com/a/12336158/923794)
*   [`itertools.cycle`无休止地重复你的钥匙](http://docs.python.org/3.2/library/itertools.html)。所以变量`key`现在包含一个生成器，它产生`2`, `1`, `2`, `1`, `2`, `1`, 等等
*   [`Decimal`是一种可以处理任意精度数的数据类型](http://docs.python.org/3/library/decimal.html)。实际上 Python 3 的整数就足够了，因为它们可以处理任意位数的整数。将类型名称作为函数`Decimal()`调用，调用该类型的[构造](https://stackoverflow.com/a/8986413/923794)函数，从而创建该类型的新对象。构造`Decimal()`函数可以处理一个参数，然后将其转换为 Decimal 对象。在示例中，`numbers_as_text`字符串和整数`10`都[`Decimal`通过其构造函数](http://docs.python.org/3/library/decimal.html#decimal-objects)转换为类型。
*   `power`是一个变量，以我们处理的每个数字（从右数）`1`相乘。`10`它基本上是一个指针，指向我们需要`num`在当前循环迭代中修改的地方
*   `for`循环标头确保我们对给定输入文本中的每个数字进行一次迭代。我们也可以使用类似的东西，`for index in range(len(numbers_as_text))`但这太复杂了

当然，如果你想对文本进行编码，这种方法是行不通的。但由于这不在您的问题规范中，因此这是一个专注于处理整数的函数。

# sql - delete all rows from parent and its direct and indirect child tables in sql server

> ID：15295562
> 
> 赞同：0
> 
> 时间：2013-03-08T13:55:07.793
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

I want to delete records of child table and its parent table however there is a catch in this, I have to delete the indirect child of that parent table too.

Let’s take an example to understand more on the problem:

*   My Database is very structural and I have specific names associated with some prefix like for Employee data all tables will start with `Emplyee*` tables.

*   Each module is having same prefix set of tables. I have almost 20 sets of table for which I have to delete data based on type provided means if Employer is provided, I need to delete data of employer and its employees and its products selected by employees.

*   `Employer_Details` has an `ID` (PK) which is reference in all `Employer_*` tables and also in `Employee_MainTable`. `Employee_MainTable` has an `employee_ID` (PK) which is referenced in all `Employee_*` table same with product.

So when I pass Employer as table name and column name as ID to proc, it should delete all data from tables (Employer, Employee and Product) based above condition. If I pass Employee, then it should delete data from `Employee_*` and `Product_*` tables.

I have started a bit but want some expert comment to make it easy. I do not want to mention tables name instead of that I just need some dynamic query which will get all tables based on reference with one more column order number so that I will delete according to order number.

We **don't have cascade delete** as these tables are existing and we can't change them. I want to get this by using **Information_Schema.Tables** means dynamic.

Hope it’s not too complicated!! Thanks!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:01:02.053

如果父母有关系，您可以使用级联删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:31:41.503

如果您的表没有直接关系，那么您只需要编写一个过程来根据传入的信息删除您需要的内容

```
DECLARE @TableType varchar(30)

BEGIN
    IF(@TableType = 'Employer')
    BEGIN
        DELETE FROM MyTable1 WHERE ID = 1234;
        DELETE FROM MyTable2 WHERE ID = 1234;
    END

    IF(@TableType = 'Employee')
    BEGIN
        DELETE FROM MyTable3 WHERE Employee_ID = 1234;
        DELETE FROM MyTable4 WHERE Employee_ID = 1234;    
    END
END 
```

# php - PHP在开始时写一个文本文件

> ID：15295564
> 
> 赞同：1
> 
> 时间：2013-03-08T13:55:17.993
> 
> 标签：php, text-files, fwrite

所以我们在课堂上制作了一种日志。有一个输入框和一个按钮。每次按下按钮时，PHP 都会写入文本文件并打印当前日志。现在文本出现在底部，我们需要让文本出现在顶部。现在我们将如何做到这一点？

我们尝试与很多同学一起这样做，但这一切都导致了奇怪的行为。（比如文本打印不止一次，等等）

非常感谢！

编辑：对不起，这是代码：

```
<html lang="en">
<head>
    <title>php script</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <form name="orderform" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">  
    <input type="text" name="text"/>
    <input type="submit" value="Submit" />
    <?php
        //Basic variables
        echo("<br/>");
        $myFile = "log.txt";
        $logfile = fopen($myFile,'r+');
        $theData = fread($logfile,filesize($myFile));

        //Cookie stuff so the username is rememberd.
        $username = $_COOKIE['gebruikerscookie'];;
        if(isset($_POST['username'])){
            $gebruiker = $_POST['username'];
            if($_COOKIE['gebruikerscookie'] == $gebruiker){
                $username = $_COOKIE['gebruikerscookie'];
                echo("Welcome back");
            }else{
                setcookie("gebruikerscookie", $gebruiker);
                $username = $_COOKIE['gebruikerscookie'];
                echo("Welcome dude!");
            }           
        }

        //Checks if theres something inside 
        if(isset($_POST['text'])){
            $message = "<br/>". $username ." : " . $_POST['text'];
            fwrite($logfile, $message ,strlen($message));
        }
        echo($theData);
    ?>
    </form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T13:58:04.960

检查`fopen`模式手册：[http ://www.php.net/manual/en/function.fopen.php](http://www.php.net/manual/en/function.fopen.php)

尝试`'r+' Open for reading and writing; place the file pointer at the beginning of the file.`

尽管没有任何代码，但这很难回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:01:21.917

```
<?php
$contentToWrite = "Put your log content here \n";
$contentToWrite .= file_get_contents('filename.log');
file_put_contents('filename.log', $file_data);
?> 
```

这将在您的当前内容之后添加文件的先前内容并写入您的文件。

如果您有任何疑问，请回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T15:46:43.300

你只是错过了

```
fclose(); 
```

我假设，因为不关闭文件句柄会导致很多像这样的奇怪错误。

所以

```
$myFile = "log.txt";
$logfile = fopen($myFile,'r+');
........
//Checks if theres something inside 
if(isset($_POST['text'])){
   $message = "<br/>". $username ." : " . $_POST['text'];
   fwrite($logfile, $message ,strlen($message));
}
fclose($logfile); // close it outside the if-condition!
echo($theData); 
```

应该做的伎俩

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-08T13:58:52.507

```
$log = file('log.txt');
krsort($log);
foreach($log as $line) echo "$line<br>\n"; 
```

# web-essentials - Web essentials - Run on build events

> ID：15295568
> 
> 赞同：8
> 
> 时间：2013-03-08T13:55:41.217
> 
> 标签：web-essentials

I am working on a project using Web Essentials to bundle and minify script files.

It works perfectly well and Web Essentials run when I save changes the to script files. We are currently several developers on the project and we face a problem every time we get changes from our source control (TFS). Changes to the script files does not trigger Web Essentials to run, unless we manually edit and save a script file. Since we have a few projects, we currently have to do this for every project.

**Is it possible to trigger Web Essentials to run on builds (build events)?**

I noticed that the bundle files include an attribute called 'runOnBuild'. This is set to true, but does not seem to do the trick.

I am also open for suggestions on alternative approaches (trigger via TypeScript compiler, etc.)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T11:52:13.453

在 Web Essentials 的源代码中，我发现[Web Essentials](https://github.com/madskristensen/WebEssentials2012/tree/master/packages)使用[AjaxMin](http://www.nuget.org/packages/AjaxMin)。可以根据这个线程为AjaxMin创建一个构建任务：[AjaxMin Build Task to minify all js to separate folder](https://stackoverflow.com/questions/17146832/ajaxmin-build-task-to-minify-all-js-to-separate-folder)

# ruby-on-rails - best_in_place - use updated value back in view

> ID：15295571
> 
> 赞同：9
> 
> 时间：2013-03-08T13:56:05.580
> 
> 标签：ruby-on-rails, best-in-place

I have an idea and a problem I can't seem to find answer or solution to. Some info if required later or helpful:

*   Rails version 3.2.9
*   best_in_place (git://github.com/straydogstudio/best_in_place.git)
*   Ruby 1.9.3p327

Ok, so i have settings page where i can update individual setting by editing them with use of best_in_place gem. Works fine. Happy with that.

Some of the settings are interconnected, meaning, i have to sum or subtract them. As a helpful tip for the user, in my view, right beside the in place form for that settings there is also a calculated value.

Now, of course, I would like to see this value be update along with the attribute itself. I can't find a way to do that.

If i do it with the :data => it works, but i get the old and not the new value, so my view is always "1 step behind".

i have also tried with update.js.erb and _test.html.erb partial, but javascript file doesn't work. It is like it doesn't exist. I have double, triple checked where to put it and it is OK (app/views/controller/_partial.html.erb)

So. Pretty straightforward question would be; how can i access an updated value and use it back in view to update calculations. I personally think I should go with the partial and js file - but I have no clue why JS file isn't picked up. Any idea on that?

If there are any other options, i would more than appreciate the hint.

Thanks!

--EDIT (code added)

view:

```
<td>
  <%= best_in_place @s,:pay_after_bonus, :display_with => :number_to_percentage, :type => :input, :nil => "Klikni tu za spremembo!", :cancel_button=> "Prekliči" %>
  Cena: <span id="test"><%= number_to_currency(@s.family_member_price - ((@s.pay_after_bonus * @s.family_member_price)/100)) %></span>
</td> 
```

settings_controller.rb:

```
def update
  @s = Setting.find(params[:id])

  respond_to do |format|
    @s.update_attributes params[:setting]
   @s.create_activity :update, :params => { :setting => params[:setting].keys.first }, owner: current_user
   format.json { respond_with_bip(@s) }
   format.js
 end
end 
```

update.js.erb:

```
$( "#test" ).html( "<%= escape_javascript( render( :partial => "update") ) %>" ); 
```

_update.html.erb:

```
<strong>Test</strong> 
```

-- EDIT 2:

OK, apparently it is possible to do something like I want this way:

```
$('.best_in_place[data-attribute="model_attribute"]').bind(
"ajax:success", function(event, data) {
    // function that will update whatever
}); 
```

in combination with

```
// respond to json request with
render :json => {"model" => @model} 
```

&

```
"ajax:success", function(event, data) {
var result = $.parseJSON(data);
// from here the result var will be accessible with all the data returned by the controller.
// result.model is your object - use result.model.attribute  to get specific values...
} 
```

But here it ends for me. I don't know how to use render :json => {"model" => @model} in my case, as it has to be done in combination with format.json { respond_with_bip(@s) }.

Where do I put render in controller? Currently I get 500 internal server errors trying to do this as a response.

I have found this solution [here](https://github.com/bernat/best_in_place/issues/66).

Thanks!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-11T20:49:15.880

在 ajax 回调中，您可以发出另一个请求以获取所需的部分：

```
$('.best_in_place.myclass').bind("ajax:success", function () {
  $.getScript("http://www.someurl.com");
}); 
```

然后在动作中渲染一个 JS 文件（例如：show.js.erb），在其中将目标元素替换为渲染结果：

```
$("#div-<%= @div.id %>").replaceWith("<%= escape_javascript(render(partial: 'some/partial', :layout => false)) %>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T22:07:03.693

您可以使用 jQuery 为刚刚更改的最佳元素解析 dom，并从那里获取更新的值。例如，你有这个代码（haml）

```
= best_in_place @user, :name, :classes => 'name-edit' 
```

然后你的回调看起来像这样 (coffeescript)

```
$('.name-edit').on 'ajax:success', (event, data, status, xhr) ->
  newValue = $('.name-edit').html # could also use .attr() here
  $('.some-other-widget').html(newValue) # again could also set .attr here 
```

您甚至可以跳过使用 jQuery 查找新值。在回调处理程序的上下文中，“this”表示调用的元素，所以你可以这样做

```
$('.name-edit').on 'ajax:success', (event, data, status, xhr) ->
  $('.some-other-widget').html this.innerHTML 
```

并以这种方式将新值传递给另一个小部件。我的猜测是 ajax 处理程序返回的事件也有 currentTarget，这也是触发 ajax 请求的小部件。我对所有这一切的唯一担心是您的成功处理程序以某种方式击败了最佳处理程序，并且您在更新之前获得了小部件。在我的测试中，这从未发生过。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T17:09:06.693

我刚刚回答了这样一个问题：

[在这里回答](https://stackoverflow.com/questions/15469050/in-place-editing-with-rails-jquery-and-best-in-place-gem/15954768#15954768)

但不仅仅是插入您需要的值，而是使用您需要的总和。

# iphone - UIView定位相关问题（iOS）

> ID：15295573
> 
> 赞同：0
> 
> 时间：2013-03-08T13:56:07.847
> 
> 标签：iphone, ios, xcode, uiview, uikit

我有一堆问题：

1.  如何定位 UIView 使其位于要添加到的视图的底部？
2.  如何将子视图添加到视图中，使其位于超级视图的角落并留有小间隙（例如，如果我想要一个“x”十字符号来关闭某些东西）
3.  它们是用于轻松 UIView 定位（和旋转）的实用程序类吗？

任何参考资料、开源教程等都将受到欢迎！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:22:59.027

(a) 如何定位 UIView 使其位于要添加到的视图的底部？

好的，假设您想定位`button`为视图底部的子视图`form`，您可以通过从按钮的高度中减去按钮的高度来计算`origin.y`子视图的`button``form`

```
CGRect buttonFrame = button.frame;
buttonFrame.origin.y = form.bounds.size.height - buttonFrame.size.height;
button.frame = buttonFrame;
[form addSubview:button]; 
```

您也可以更改原点水平位置。你想要它在左下角`form`吗？

```
buttonFrame.origin.x = 0; 
```

还是在右边`form`？

```
buttonFrame.origin.x = form.bounds.size.width - buttonFrame.size.width; 
```

还是在中间（水平）`form`？

```
buttonFrame.origin.x = (form.bounds.size.width - buttonFrame.size.width) / 2; 
```

或另一种使用方式`CGRectGetMidX`（在[CGGeometry 实用方法](https://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html)中找到）：

```
buttonFrame.origin.x = CGRectGetMidX(form.bounds) - buttonFrame.size.width/2; 
```

当父视图的大小发生变化时，自动调整大小处理调整框架。但是您仍然必须先定位它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:33:41.313

```
int xOffset = 20;
int yOffset = 20;
CGRect BottomRight_NewFrame = CGRectMake((superview.frame.size.width - subview.frame.size.width-xOffset), (superview.frame.size.height - subview.frame.size.height-yOffset), subview.frame.size.width, subview.frame.size.height);
subview.frame = BottomFrame; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:58:47.690

您可以使用 iOS 6 的新 Autolayout 功能或 Interface Builder 中的旧 Struts & Springs 来实现此目的。

本教程解释了这两个： http: [//msmvps.com/blogs/kevinmcneish/archive/2012/12/10/tutorial-ios-6-auto-layout-versus-springs-and-struts.aspx](http://msmvps.com/blogs/kevinmcneish/archive/2012/12/10/tutorial-ios-6-auto-layout-versus-springs-and-struts.aspx)

或者您可以以编程方式设置自动调整大小的掩码。这里解释得很好： [UIView autoresizingMask - Interface Builder to Code - Programmatically create struts and springs - Swift or Objective-C](https://stackoverflow.com/questions/10468389/uiview-autoresizingmask-interface-builder-to-code-programmatically-create-st)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T14:16:42.003

设置框架很容易，例如（未经测试的代码）

```
subview.frame = CGRectMake((superview.frame.origin.x - subview.frame.origin.size.width/2)-20, (superview.view.frame.origin.y - subview.frame.origin.size.height/2)-20, subview.view.frame.size.width, subview.view.frame.size.height); 
```

如果你会做很多这样的事情，那么创建一个实用程序类或方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T14:22:26.277

如果超级视图的大小发生变化，自动布局将帮助您定位视图并保持这些位置。如果超级视图不会改变，你真的不需要弄乱约束——你可以设置子视图的位置 appropra

如果您将视图添加`viewB`到视图`viewA`：

a) 定位`viewB`，使其底部边缘对应于`viewA`：

```
viewB.frame.origin.y = viewA.bounds.size.height - viewB.bounds.size.height; 
```

b）你没有说哪个角落，但这只是做数学的问题。例如，viewA 的坐标系中的右上角`viewA`是 at `{viewA.bounds.size.x, 0}`。如果要放在`viewB`那里，请将其原点设置为：

```
{viewA.bounds.size.x-viewB.bounds.size.x, 0} 
```

如果要添加边距，可以将其添加到计算中：

```
int margin = 10;
{viewA.bounds.size.x-viewB.bounds.size.x-margin, margin} 
```

d) 使用 NSLayoutConstraint 以编程方式访问自动布局系统的约束。有一种很好的[视觉格式语言](http://www.techotopia.com/index.php/Understanding_the_iOS_6_Auto_Layout_Visual_Format_Language#Visual_Language_Format_Examples)，因此对于您的问题 (a)，您可以将约束设置为`viewA`：

```
V:|-[viewB]-0-| 
```

`V`表示您在垂直方向上工作，'表示父视图（即）`|`的边缘（顶部和底部，多亏了） ，意味着其父视图与底部之间的距离应为 0。`V``viewA``0``viewB`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-08T14:08:40.323

您可以在 iOS6 中设置约束，但如果您想在较旧的操作系统上工作，您需要手动定位它们。数学。

# c# - 获取空引用异常调用存储过程

> ID：15295577
> 
> 赞同：1
> 
> 时间：2013-03-08T13:56:21.427
> 
> 标签：c#, asp.net, nullreferenceexception

我运行生成数据表的代码。从这个数据表中，我收集了 State & CRID。我使用这些信息来运行代码以获取 PRID。问题是，每次我运行这个，我都会得到一个空引用异常。我尝试在运行代码之前声明 int PRID = 0；但是，我每次都以 0 作为我的答案。我已经使用相同的参数在 SQLServer 2008 中执行了代码，并且得到了正确的结果。
我无法确定为什么此代码运行不正确。

```
 public int GetPRID(int RRID, string State, int PCID)
    {
        try
        {

            SQLCON = new SqlConnection(connectionString);
            SQLCON.Open();
            SQLCmd = new SqlCommand("spGetPRID", SQLCON);
            SQLCmd.CommandType = CommandType.StoredProcedure;
            SQLCmd.Parameters.Add("@RRID", SqlDbType.Int).Value = RRID;
            SQLCmd.Parameters.Add("@State", SqlDbType.VarChar).Value = State;
            SQLCmd.Parameters.Add("@PCID", SqlDbType.Int).Value = PCID;

            int PRID = (Int32)SQLCmd.ExecuteScalar();
            return PRID;
        }
        catch(Exception ex)
        {
            HttpContext.Current.Response.Redirect("~/ErrorRedirect.aspx?" + ex.Message, false);
            return 0;
        }
        finally
        {
            SQLCON.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:00:40.903

这条线在这里有问题

```
 int PRID = (Int32)SQLCmd.ExecuteScalar(); 
```

当然我不知道你的存储过程的结果，但是[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)可以返回 NULL，如果是这种情况，转换到 Int32 将失败并出现错误`null reference exception`

[MSDN 说](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

> 返回结果集中第一行的第一列，如果结果集为空，则返回空引用（在 Visual Basic 中为 Nothing）

因此，如果有可能将 null 作为返回值，那么正确的方法是

```
 object result = SQLCmd.ExecuteScalar();
  if(result != null)
      PRID = Convert.ToInt32(result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:01:38.090

如果没有返回值， from memory`SQLCmd.ExecuteScalar()`将返回 null，这会给你一个 null 引用异常。如果返回了一个值，但该值为数据库空值，它将返回 BDNull.value，这也会失败，因为它无法转换为 int32。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:12:17.327

我发现了这个问题。它不在我的 C# 代码中 - 它在 SQL 本身中。我将@PRID 声明为int，并要求它返回@PRID。

一旦我删除它，它工作正常。谢谢大家的贡献。

# c++ - 在 C++ 应用程序中安全地增长内存映射文件

> ID：15295579
> 
> 赞同：3
> 
> 时间：2013-03-08T13:56:26.237
> 
> 标签：c++, winapi, visual-studio-2008, shared-memory, visual-c++-6

我有一个最初在 Visual C++ 6.0 中构建的古老 C++ 应用程序，它使用一个非常复杂的共享内存 DLL 在大约 8 个 EXE 和 DLL 之间共享数据，这些 EXE 和 DLL 都有一个值池，可以用一个或两个带有字符串的字典替换键和值的记录。该应用程序是多线程和多进程的。有三个主要的可执行文件读取和写入共享内存区域，其中几个可执行文件具有 3 个或更多线程，这些线程读取/写入或“排队”信息到这个池化内存区域。大约有几百个地方，结构化异常处理 (SEH)用于过滤异常，`__try`并`__except`尝试通过调整共享内存的大小来处理访问冲突，这些共享内存位于由名为的类管理的段中`CGMMF`这意味着可增长的内存映射文件。

此处显示了最显着的细节，因为我找不到有关所使用技术的任何有凝聚力的文档来源，或者它的安全性和适用性。实验上我发现这个库在 1998 年在单核系统上运行得不是很好，它在运行 windows XP 的单核虚拟机上有点工作，在现代 2+ ghz multi 上它根本不工作- 2013 年的核心 Windows 7 64 位系统。我正在尝试修复或更换它。

```
#define ResAddrSpace(pvAddress, dwSize)  \
   (m_hFileMapRes = CreateFileMapping(HFILE_PAGEFILE, &m_SecAttr,             \
      PAGE_READWRITE| SEC_RESERVE, 0, dwSize, m_szRegionName),                    \
   (m_hFileMapRes == NULL) ? NULL :                                     \
      MapViewOfFileEx(m_hFileMapRes, FILE_MAP_ALL_ACCESS, 0, 0, dwSize, 0))

void CGmmf::Create(void)
{
    DWORD dwMaxRgnSize;
    if (Gsinf.dwAllocationGranularity == 0) 
    {
        GetSystemInfo(&Gsinf);
    }
    m_dwFileSizeMax = RoundUp(m_dwFileSizeMax, Gsinf.dwAllocationGranularity);
    m_dwFileGrowInc = RoundUp(m_dwFileGrowInc, Gsinf.dwAllocationGranularity);
    dwMaxRgnSize = m_dwFileSizeMax + m_dwOverrunBuf;
    m_pbFile = (PBYTE)ResAddrSpace(NULL, dwMaxRgnSize);
        Adjust(m_dwFileSizeNow);
}

void CGmmf::Adjust(IN DWORD dwDiskFileNow) 
{
    int nThreadPriority;

    __try 
    {
        //
        // Boost our thread's priority so that another thread is 
        // less likely to use the same address space while 
        //  we're changing it.
        //
        nThreadPriority = GetThreadPriority(GetCurrentThread());
        SetThreadPriority(GetCurrentThread(), THREAD_PRIORITY_TIME_CRITICAL);

        //
        // Restore the contents with the properly adjusted lengths
        //
        Construct(dwDiskFileNow);
    }
    __finally 
    {       
        //
        // Make sure that we always restore our priority class and thread 
        // priority so that we do not continue to adversely affect other 
        // threads in the system.
        //

        SetThreadPriority(GetCurrentThread(), nThreadPriority);
    }
}

void CGmmf::Construct(IN DWORD dwDiskFileNow) 
{
    DWORD dwDiskFileNew = RoundUp(dwDiskFileNow, m_dwFileGrowInc),
          dwStatus = ERROR_SUCCESS;

    PBYTE pbTemp;

    if (dwDiskFileNew > 0) 
    {
        //
        // Grow the MMF by creating a new file-mapping object.
        //
            // use VirtualAlloc() here to commit
        // the requested memory: VirtualAlloc will not fail
        // even if the memory block is already committed:

        pbTemp = (PBYTE)VirtualAlloc(m_pbFile,dwDiskFileNew,MEM_COMMIT,PAGE_READWRITE);

        if(NULL == pbTemp)
        {
            LogError(GetLastError(), MEM_CREATE_MMF, m_szRegionName);

            // 
            //  File-mapping could not be created, the disk is 
            //  probably full.
            //
            RaiseException(EXCEPTION_GMMF_DISKFULL, 
                           EXCEPTION_NONCONTINUABLE, 
                           0, 
                           NULL);
        }

        // 
        //  Check to see if our region has been corrupted 
        //  by another thread.
        //
        if (pbTemp != m_pbFile)
        {
            RaiseException(EXCEPTION_GMMF_CORRUPTEDRGN, 
                           EXCEPTION_NONCONTINUABLE, 
                           0, 
                           NULL);
        }
    }
} 
```

到目前为止，我替换它的选项包括尝试用`DCOM`（进程外 COM）和`COM`（进程内 COM）替换所有共享内存，以适应内存映射文件的位置，并使用同步来手动防止并发问题/mutex/criticalsection 或其他适当的线程安全结构。

我想知道是否已经有一些线程安全的内存字典类型可以替换所有这些类型。即使在上面的代码片段中，它还不到这个古老的 shared-memory-library-for-visual-C++-6 代码的 1%，也有一些事情让我不寒而栗。例如，提高线程优先级作为避免死锁、竞争条件和一般损坏的策略。也许这曾经使这段代码在 33 mhz 的 80486 CPU 上停止崩溃。*不寒而栗。*

我有代码在 Visual C++ 6.0 中构建和运行，它的一个分支也在 Visual C++ 2008 中运行，我可能会在 Visual C++ 2010 中运行它。我可以使用什么来给我字典语义，跨进程共享内存，并且稳定可靠？

**更新**“字典”是指 Python 中已知的字典数据类型，在某些地方也称为“键/值存储”，而在其他地方（如在 C++ 标准库中），它被称为`std::map`. 讨论此问题的 Boost 文档在[此处。](http://www.boost.org/doc/libs/1_53_0/doc/html/interprocess/managed_memory_segments.html#interprocess.managed_memory_segments.managed_mapped_files)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:05:46.193

听起来您应该看看[Boost Interprocess](http://www.boost.org/doc/libs/release/doc/html/interprocess.html)。您可以使用它`std::map`在共享内存中拥有 -like 对象等等。自从我上次使用它已经有好几年了，所以不能详细说明，但是库文档很好并且有大量的例子，它应该让你在 30 分钟内完成。

# android - Button in Fragment's ListView item Interface Definition?

> ID：15295581
> 
> 赞同：2
> 
> 时间：2013-03-08T13:56:29.600
> 
> 标签：android, listview, button, interface, fragment

In my app, I have an activity that has two fragments in actionbar tabs navigation mode, just like the android developer site example.

in my first fragment I have a listview (which has it's own adapter ) and each item of the listview has a button called +1\. I want to refresh the second fragment that shows the items in listview in first fragment that their +1 button's clicked.

I know i have to use interfaces. but I cant figure how to use them. where do I have to define the interface? how to use it? and how to access it from the activity to refresh the second fragment?

a quick help would be great. thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T14:32:40.140

如果你想要它在列表项上单击

片段 A：

```
public class FragmentA extends ListFragment {

OnItemSelectedListener mListener;

...
// Container Activity must implement this interface
public interface OnItemSelectedListener {
    public void onItemSelected(int position);
}
...

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    try {
        mListener = (OnItemSelectedListener) activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString() + " must implement OnItemSelectedListener");
    }
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {

    mCallback.onItemSelected(position);

    }   
} 
```

容器活动：

```
public class ContainerActivity extends FragmentActivity 
    implements FragmentA.OnItemSelectedListener
{

//...

public void onItemSelected(int Position/*pass anything which u want*/) 
    {

        SecondFragment second_fragment = (SecondFragment) getSupportFragmentManager().findFragmentById(R.id.fragmentB);

        if(second_fragment !=null)
        {
            second_fragment.UpdateUI(Position); 
        }

    }

 } 
```

第二个片段：

```
public class SecondFragment extends Fragment {

    ...
    public void UpdateUI(Position)
    {

    }

} 
```

希望这可以帮助。单击每个列表项中的按钮可能有点困难，但请尝试相同的方法。可能您必须编写接口声明并调用自定义适配器。

# design-patterns - Exporting data files - which pattern to use

> ID：15295582
> 
> 赞同：0
> 
> 时间：2013-03-08T13:56:30.527
> 
> 标签：design-patterns, export

I'm going to implement a data export system (downloading files from a website). The system shall provide following things:

*   different data formats: xls, csv, etc.
*   different report types (basic report, advanced report, report detailed on xxx,yyy, etc.)
*   different time concerning the data
*   different user accounts

Which design pattern shall be used for such system? I was thinking about Abstract Factory, Factory Method and Builder patterns, but I'm not sure which one suits better here. I'd appreciate short explanation or simple model structure.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T02:19:48.753

您不会为系统选择设计模式；*您为系统中*的特定设计问题选择设计模式。此外，有时最好不要试图强迫某些东西成为某种设计模式。如果您遵循良好的[OOP](http://javarevisited.blogspot.com/2012/03/10-object-oriented-design-principles.html)原则和[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)，设计模式自然会从您的代码中出现。

从上面列出的要求来看，您确实想先设计*系统*。之后，一旦开始需要编写代码，就可以考虑针对特定问题的设计模式。例如，您需要对不同类型的数据执行相同的操作。为此，您将使用多态性。如果您需要检查各种类型并且只有一种类型执行某些操作，那么您可能会考虑类似责任链设计模式。

但是你还没有，至少没有你的问题中的苗条要求。

# asp.net-mvc-4 - 两个部分视图，将数据发布到导致问题的操作

> ID：15295583
> 
> 赞同：0
> 
> 时间：2013-03-08T13:56:31.320
> 
> 标签：asp.net-mvc-4, partial-views

我正在为一个项目使用 MVC 4。我的一个观点有两个部分观点：

```
<div id="fPassword">
      @Html.Partial("_ForgotPassword",new UserForgotPasswordModel())
</div>
<div id="aLink">
      @Html.Partial("_ActivationLink", new UserActivationLinkModel())
</div> 
```

部分观点如下：

```
@model Me2Everyone.Web.UI.Models.User.UserForgotPasswordModel
@using (Html.BeginForm("ForgotPassword", "Home", FormMethod.Post, new { id = "personal-form" }))
{
<table width="100%" cellspacing="0" cellpadding="0" border="0" style="padding: 0px 0 20px 0;">
    <tbody>
        <tr>
            <td width="375">
                <div class="text-problem">
                    @Html.EditorFor(model => model.Email)
                </div>
            </td>
            <td width="80" valign="bottom">
                <input type="submit" value="Send" />
            </td>
        </tr>
    </tbody>
</table>
} 
```

第二个和上面几乎一样，唯一的区别是Form的模型类型和动作方法。

在 Home Controller 中，ForgotPassword 操作如下：

```
[HttpPost]
public ActionResult ForgotPassword(UserForgotPasswordModel model)
{
    if (ModelState.IsValid)
    {
        // Search email in database.
        if(emailNotFound)
        {
            model.ErrorMessage = "Email not found.";
        }
    }
    else
    {
         model.ErrorMessage = "Email address not found.";
    }
    return PartialView("_ForgotPassword", model);
} 
```

现在，当我将数据发布到服务器时，它返回的部分视图是独立的，而不是在主视图中，所以我在网上环顾四周，发现我需要为它发送 ajax 调用，所以我像在父视图中那样做作为：

```
<script type="text/javascript">
    $(function () {
        $("form").submit(function () {
            if ($(this).valid()) {
                var dataToSend = { model: { Email: $("#Email").val() } };
                var serializedForm = $(this).serialize();
                var isForgotPassword = true;
                if ($(this).attr('action').indexOf("ForgotPassword") < 0)
                    isForgotPassword = false;
                $.ajax({
                url: $(this).attr('action'),
                data: serializedForm,
                type: 'POST',
                success: function (data, textStatus, request) {
                    if (isForgotPassword == true)
                        $("#fPassword").html(data);
                    else
                        $("#aLink").html(data);
                },
                error: function (xhr, ajaxOptions, thrownError)
                {
                    alert('error')
                }
            });
            return false;
        }
    });
}); 
```

而且在我的父母看来，我有：

```
@if(Model.ErrorMessage != "")
{
     <script type="text/javascript">
          alert(@Model.ErrorMessage);
     </script>
} 
```

问题是当我提供一个有效的电子邮件地址时，它可以正常工作，但是当我提供数据库中不存在的电子邮件地址时，我收到未找到电子邮件的警报，但是当我再次单击提交按钮时，会创建部分视图在浏览器中独立而不是在父视图中。

我尝试将我的父视图更改为：

```
 <div id="fPassword">
      @{Html.RenderAction("ForgotPassword");}
 </div>
 <div id="aLink">
       @{Html.RenderAction("ActivationLink");}
</div> 
```

但它仍然不起作用，有什么想法或帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:05:44.987

代替：

```
$("form").submit(function () { 
```

和：

```
$(document).on('submit', 'form', function () { 
```

这将确保您的提交处理程序以*生动*的方式注册。这意味着在您使用来自 AJAX 调用的内容刷新 DOM 后，您注册的提交处理程序将继续与这个新表单相关联。您可以在文档中阅读有关该[`.on()`](http://api.jquery.com/on/)方法的更多信息。替换了已`.on()`弃用（甚至在 jQuery 1.9 中删除）的[`.live()`](http://api.jquery.com/live/)方法，它允许您完成相同的任务。在该`.live()`方法被弃用后，他们引入了[`.delegate()`](http://api.jquery.com/delegate/)具有相同语义的方法。因此，根据您使用的 jQuery 版本，您应该选择正确的方法。

# asp.net - 在网站中包含 Gravatar

> ID：15295588
> 
> 赞同：2
> 
> 时间：2013-03-08T13:56:44.023
> 
> 标签：asp.net, gravatar

我正在建立一个网站，其中用户有个人资料，个人资料有个人资料图片。个人资料图片图像需要保存在我的本地存储中。有没有我可以使用其他服务（例如***Gravatar***）来处理我网站中的个人资料图片。这样我就不需要在我的站点文件夹中维护用户图像以节省空间等。我只会要求用户链接到***Gravatar***个人资料并在我的网站个人资料中使用他们的个人资料图像。我正在用 ASP.NET 开发我的网站，请指导是否有任何其他服务也可以帮助我实现这一目标。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:00:07.097

[AjaxControlToolkit](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Default.aspx)内置了Gravatar[支持](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Gravatar/Gravatar.aspx)。

```
<ajaxToolkit:Gravatar runat="server"
    Email="test@superexpert.com"
    Size="200"
    Rating="R"
    DefaultImageBehavior="Identicon"
    DefaultImage="http://tinyurl.com/3bpsaac" /> 
```

当然，这也可以通过编程方式设置......

此外，如果您的网站提供 OAuth 登录（如 Facebook、LinkedIn 等），您也可以使用它们的 API 引用这些个人资料图像。例如，Facebook 看起来像：

```
<asp:Image ImageUrl="http://graph.facebook.com/[fbid]/picture?type=large"
    ToolTip="Facebook Avatar"
    Width="180"
    Height="180" /> 
```

*替换`[fbid]`为他们的 facebook id。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:34:52.830

你不需要询问他们的 Gravatar，也不需要任何特别的东西来获得它（除了用户的电子邮件地址）。从[他们的文档中](http://en.gravatar.com/site/implement/hash/)：

> Gravatar 上的所有 URL 均基于使用电子邮件地址的哈希值...。为确保哈希值一致且准确，应采取以下步骤创建哈希值：
> 
> 1.  修剪电子邮件地址的前导和尾随空格
> 2.  强制所有字符小写
> 3.  md5 散列最终字符串

因此，如果您`<asp:Image ID="_grav" runat="server" />`的页面上有，从最基本的意义上说，它只是：

```
string email = "yourEmail.CoolSite.net "; //this would be the email you have on file for them
string hashedEmail = FormsAuthentication.HashPasswordForStoringInConfigFile(email.Trim().ToLower(), "MD5").ToLower();
_grav.ImageUrl = String.Format("http://www.gravatar.com/avatar/{0}", hashedEmail); 
```

您可以使用许多其他参数（大小、如果不存在 gravatar 时的默认图像等），它们只是对该 ImageUrl 的查询字符串添加。阅读[图像请求](http://en.gravatar.com/site/implement/images/)。

# android - android中信用卡支付网关的实现

> ID：15295590
> 
> 赞同：2
> 
> 时间：2013-03-08T13:56:46.263
> 
> 标签：android, payment-gateway, payment

我想在我的 android 应用程序中添加支付网关以购买某些东西并在付款完成后允许。

现在的问题是我已经阅读了一些谷歌播放不支持某些支付网关的地方，他们拒绝了该应用程序。

谁能告诉我我可以在我的应用程序中实现的正确支付网关，这是 google play 允许的。

谷歌自己也提供这样的东西吗？

请告诉我

谢谢亚格内什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:04:00.283

是的，有，它叫做**Google Play In-app Billing**。

In-app Billing 是一项 Google Play 服务，可让您从应用程序内部销售数字内容。您可以使用该服务销售范围广泛的内容，包括媒体文件或照片等可下载内容、游戏关卡或药水等虚拟内容、高级服务和功能等。您可以使用应用内结算来销售产品

*   标准应用内商品（一次性计费），或
*   订阅，（定期，自动计费）

查看[Google Play 应用内结算](http://developer.android.com/google/play/billing/index.html)

# twitter-bootstrap - Twitter Bootstrap. Active menu item marking

> ID：15295592
> 
> 赞同：3
> 
> 时间：2013-03-08T13:56:49.717
> 
> 标签：twitter-bootstrap, menu, menuitem

I use standart twitter bootstrap menu:

```
<ul class="nav nav-pills">
<li><a href="#">...</a></li>
<li><a href="#">...</a></li>
</ul> 
```

How to mark active menu item?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T13:59:28.110

您只需要在您的 li 中添加“活动”，例如：

```
<li class="active">
    <a href="#"></a> 
</li> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T13:58:31.757

添加一个类`active`到`li`

[http://twitter.github.com/bootstrap/components.html#navbar](http://twitter.github.com/bootstrap/components.html#navbar)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-15T15:17:34.183

```
 var storedListItem = sessionStorage.getItem('selectedListItem');
        $("ul.nav > li > a:eq("+(storedListItem)+")").addClass("active");
        $("ul.nav > li").on("click",function(){
            var index = $(this).index('ul.nav > li');
            var selectedListItem = index;
            sessionStorage.setItem('selectedListItem', JSON.stringify(selectedListItem));
        }); 
```

# node.js - Node.js can't read XHR2 FormData data

> ID：15295596
> 
> 赞同：3
> 
> 时间：2013-03-08T13:57:06.223
> 
> 标签：node.js, file-upload, xmlhttprequest, form-data

In client I use XHR2 `Formdata` to upload file in ajax:

```
var send = function (file) {
        var xhr = new XMLHttpRequest();
        xhr.file = file; 
        xhr.open('post', '/upload', true);
        xhr.send(file);     
}

var fd = new FormData();
fd.append('image', _file); // the _file is my file 

xhr.send(fd); 
```

in node.js server:

```
app.configure(function(){
    app.use(express.bodyParser({
        uploadDir: "public/images",
        keepExtensions: true,
        limit: 10000000, /* 10M  10*1000*1000 */  
        defer: true 
    }));
    app.use(express.static(__dirname + "/public"));
});

app.post("/upload", function (req, res) {
    console.log(req.files);
    console.log(req.body);

    res.send("ok");
}) 
```

the strange thing is, the file could upload successfully, it can't log the `req.files` and `req.body` information, they are all empty object

so how can I get the upload file's information, like the save path, size or name?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T07:01:14.743

我尝试删除“defer：true”配置，它对我有用。

# loops - 循环内循环（更详细）

> ID：15295597
> 
> 赞同：0
> 
> 时间：2013-03-08T13:57:06.533
> 
> 标签：loops, tcl, frame, distance

我有一个 229 个残基蛋白质，我需要从残基 1-12 的质心（单独）测量到每个其他原子，从残基 13 开始，我也需要每个帧。到目前为止我有这个

```
set pro [atomselect top "resid 1 and not water and not ion"] 
set atom [atomselect top "index 207"] 
set nf [molinfo top get numframes] 
set outfile [open test207.dat w] 
for {set i 0} {$i < $nf} {incr i} { 
    puts "frame $i of $nf" 
    $pro frame $i 
    $atom frame $i 
    set com1 [measure center $pro weight mass] 
    set com2 [measure center $atom weight mass] 
    set distance [veclength [vecsub $com1 $com2]] 
    puts $outfile "$i $distance" 
} 
```

这在一定程度上可以测量残基 13 的第一个原子与所有帧的残基 1 的 com 之间的距离，但我不确定如何放置第二个循环，该循环将为每个原子循环，而不是运行脚本数千次（每次更改原子数）导致数千个文件。

有没有办法在同一个脚本中循环每个原子和每个帧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:03:54.590

通常这是你放置两个循环的方式......

```
for (set j 0} {$j < $..} {incr j} {
   for {set i 0} {$i < $nf} {incr i} { 

   };   # inner loop ends
};      # outer loop ends 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:51:43.000

这是你想做的事情吗？

```
for {set resid 1} {$resid < 10} {incr resid} {
    set atomkey [format "resid %d and not water and not ion" $resid]
    puts $atomkey

    set filename [format "test%d.dat" $resid]
    set outfile [open $filename w] 

    # Do stuff
    close $outfile

} 
```

这导致`atomkey`并`filename`构建了嵌入其中的残差值。因此，这种技术将允许您创建密钥字符串和文件名。如果您不能使用 for 循环生成值，那么您还可以查看 foreach 循环：

```
foreach resid [list 1 2 4 6 7 99 12] {
    set atomkey [format "resid %d and not water and not ion" $resid]
    puts $atomkey
} 
```

您可以仅使用 set 构建复合值，但我喜欢使用格式，因为我本质上是一名 C 程序员。

```
set atomkey "resid $resid and.." 
```

# c# - Visual Studio Web 窗体应用程序加载错误

> ID：15295599
> 
> 赞同：0
> 
> 时间：2013-03-08T13:57:14.050
> 
> 标签：c#, asp.net, visual-studio-2012

我最近尝试开始学习 C# 和 ASP.NET。我已经安装了 Microsoft Visual Studio 2012 并尝试遵循一些关于创建 Web 表单应用程序的教程。不幸的是，当我创建一个新的 Web 表单应用程序项目时，Visual Studio 屏幕和解决方案资源管理器没有像其他 Youtube 教程那样加载，我的书表明它们应该加载。

*   当我“全部保存”时，我没有得到要创建的 Form1.cs、Program.cs 或 Form1.Designer.cs 文件。
*   此外，我没有出现 Form1.CS 窗口，因此我可以将工具箱中的对象拖到表单中。相反，我只是得到一个带有代码的 default.aspx 选项卡。

我在 YouTube 上发布了一个快速视频来说明这一点，以更详细地描述这一点。我做错了什么，还是我的 Visual Studio 工作不正常？我在此之前安装了 Visual Studio 2010，但尝试卸载它并安装 2012。

[http://www.youtube.com/watch?v=xHXkcCnmHnk](http://www.youtube.com/watch?v=xHXkcCnmHnk)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:29:40.890

您可能正在查看 Winform 教程，为此您需要获取 [Visual Studio Express 2012 for Windows Desktop](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-desktop)

# regex - 超级基本的正则表达式

> ID：15295603
> 
> 赞同：-1
> 
> 时间：2013-03-08T13:57:24.740
> 
> 标签：regex

我正在使用这些：

```
.*cq.*
.*conquest.* 
```

第一个匹配任何单词/短语/句子/等。里面有字母“cq”。第二个做同样的事情，只是为了“征服”这个词。这些正则表达式是否正确？

另外，如何将这两个正则表达式结合起来，这样我就没有两个条目了？

谢谢你，我很抱歉超级菜鸟问题！:o

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:00:49.710

组合很简单

```
(cq|conquest) 
```

将匹配这 2 个出现中的 1 个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:01:16.560

如果通过“组合”您的意思是匹配包含其中任何一个的每个条目：

```
.*(cq|conquest).* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:02:39.670

甚至可以使用

```
c(q|onquest) 
```

应该做的伎俩

# javascript - 如何从父数组视图显示子对象视图

> ID：15295608
> 
> 赞同：0
> 
> 时间：2013-03-08T13:57:40.250
> 
> 标签：javascript, ember.js

我有以下显示产品列表的内容。当我单击产品时，我只想查看产品信息。

我设法让产品信息出现的唯一方法是在父产品模板上使用`{{outlet}}`or `{{render}}`，这不是我想要的。

```
var App = Ember.Application.create();

App.ApplicationController = Ember.Controller.extend({

});

App.ProductsController = Ember.ArrayController.extend({
    sortProperties: ['id']
});

App.Router.map(function () {
    this.resource('products', function () {
        this.resource('product', { path: ':product_id' });
    });
});

App.ProductsRoute = Ember.Route.extend({
    model: function () {
        return App.Products.find();
    }
});

// Models
App.Store = DS.Store.extend({
    revision: 11,
    adapter: 'DS.FixtureAdapter'
});

App.Products = DS.Model.extend({
    title: DS.attr('string'),
    artist: DS.attr('string'),
    image: DS.attr('string'),
    price: DS.attr('number'),
    url: DS.attr('string')
});

App.Products.FIXTURES = [
    {
        id: 1,
        title: 'The Door',
        artist: 'Religious Knives',
        image: 'http://ecx.images-amazon.com/images/I/51og8BkN8jL._SS250_.jpg',
        large_image: 'http://ecx.images-amazon.com/images/I/51og8BkN8jL._SS500_.jpg',
        price: 9.98,
        url: 'http://www.amazon.com/Door-Religious-Knives/dp/B001FGW0UQ/?tag=quirkey-20'
    },
    //etc etc
];

-------------MARKUP------------

<script type="text/x-handlebars" data-template-name="products">
                    <span>{{ controller.model.length }} item(s) in stock</span>
                    <div>
                    {{#each product in controller.model}}
                        <div class="item">
                            <div class="item-image">
                                {{#linkTo "product" product}}
                                    <img {{bindAttr src="product.image" alt="product.title"}}>
                                {{/linkTo}}
                            </div>
                            <div class="item-artist">{{product.artist}}</div>
                            <div class="item-title">{{product.title}}</div>
                            <div class="item-price">${{product.price}}</div>
                        </div>
                    </div>
                    {{/each}}

                  {{render product}}
            </script>

            <script type="text/x-handlebars" data-template-name="product">

                    <div class="item-detail">
                        <div class="item-image">
                            <img {{bindAttr src="large_image" alt="title"}} />
                        </div>
                        <div class="item-info">
                            <div class="item-artist">{{artist}}</div>
                            <div class="item-title">{{title}}</div>
                            <div class="item-price">${{price}}</div>
                            <div class="item-form">

                                <p>
                                    <label>Quantity:</label>
                                    <input type="text" size="2" data-bind="value: quantity" />
                                </p>
                                <p>
                                    <button data-bind="click: $parent.addItem">Add to Cart</button>
                                </p>

                            </div>
                            <div class="item-link"><a {{bindAttr href="url"}}">Buy this item on Amazon</a></div>
                            <div class="back-link"><a href="#/">&laquo; Back to Items</a></div>
                        </div>
                    </div>

            </script> 
```

**更新：这种作品：**

问题是当从产品返回产品时，产品不再列出

```
App.ProductsRoute = Ember.Route.extend({
    model: function () {
        return App.Products.find();
    }
});

App.ProductRoute = Ember.Route.extend({
    model: function (params) {
        return App.Products.find(params.product_id);
    },
    renderTemplate: function () {
        this.render('product', {   // the template to render
            into: 'application',                // the template to render into
            outlet: 'main',       // the name of the outlet in that template
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:07:47.553

您可以将路由器映射更改为以下内容：

```
App.Router.map(function () {
    this.route('products');
    this.route('product', { path: 'product/:product_id' });
}); 
```

还可以考虑使用索引路由，在页面加载时将您转移到特定位置：

```
App.IndexRoute = Em.Route.extend({
    redirect: function() {
        this.transitionTo('products');
    }
}); 
```

小提琴：http: [//jsfiddle.net/schawaska/d2FtF/](http://jsfiddle.net/schawaska/d2FtF/)

运行：http: [//jsfiddle.net/schawaska/d2FtF/show](http://jsfiddle.net/schawaska/d2FtF/show)

# php - 如何用 preg_replace regEx 替换整个 div

> ID：15295615
> 
> 赞同：3
> 
> 时间：2013-03-08T13:58:01.273
> 
> 标签：php, html, regex, preg-replace

我不明白如何在 PHP preg_replace 中用另一个 div 替换一个 div

```
$string ='
  <div id="myid">this has to be replaced</div>
  <p>here is something</p>
  <div id="any">any text not to be replaced</div>
'; 
```

如果我做

```
$string = preg_replace('/<div id=\"myid\">.*<\/div>/','anything',$string); 
```

它不起作用，我不明白为什么？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T14:03:08.730

由于您`regex` [的工作正常](http://regexr.com?3427l)，我怀疑您没有将返回值分配`preg_replace`给任何变量。

```
$string = preg_replace('/<div id=\"myid\">.*<\/div>/','anything',$string); 
```

应该管用。

* * *

编辑问题后：

正如[@Felix Kling](https://stackoverflow.com/users/218196/felix-kling)提到的那样，`.*`它是贪婪的，这意味着它匹配所有内容，直到最后一场比赛。您可以使用非贪婪量词（即。`.*?`）。以下[应该有效](http://codepad.viper-7.com/QfPqS6)：

```
$string = preg_replace('/<div id=\"myid\">.*?<\/div>/','anything',$string); 
```

# mysql - 如何获得单行计数？

> ID：15295618
> 
> 赞同：2
> 
> 时间：2013-03-08T13:58:07.300
> 
> 标签：mysql, sql, pivot

我只是想了解mysql

```
 mysql> SELECT species, sex, COUNT(*) FROM pet
        -> WHERE species = 'dog' OR species = 'cat'
        -> GROUP BY species, sex;

+---------+------+----------+
| species | sex  | COUNT(*) |
+---------+------+----------+
| cat     | f    |        1 |
| cat     | m    |        1 |
| dog     | f    |        1 |
| dog     | m    |        2 |
+---------+------+----------+ 
```

有可能得到吗？

```
+---------+-----------+-------------+
| species | malecount | femalecount |
+---------+-----------+-------------+
| cat     | 1         |       1     |
| dog     | 1         |       2     |
+---------+-----------+-------------+ 
```

在单个查询中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T13:59:06.227

这是 中最短的答案`MySQL`。

```
SELECT  species,
        SUM(sex = 'm') maleCount,
        SUM(sex = 'f') femaleCount
FROM    pet
GROUP   BY species 
```

MySQL 还支持内联`IF`语句：

```
SELECT  species,
        SUM(IF(sex = 'm',1,0)) maleCount,
        SUM(IF(sex = 'f',1,0)) femaleCount
FROM    pet
GROUP   BY species 
```

* * *

您还可以使用`CASE`which 适用于几乎 RDBMS：

```
SELECT  species,
        SUM(CASE WHEN sex = 'm' THEN 1 ELSE 0 END) maleCount,
        SUM(CASE WHEN sex = 'f' THEN 1 ELSE 0 END) femaleCount
FROM    pet
GROUP   BY species 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-08T13:59:29.580

您可以使用带有`CASE`表达式的*聚合*函数将数据从行转换为列：

```
select species,
  sum(case when sex = 'm' then 1 else 0 end) maleCount,
  sum(case when sex = 'f' then 1 else 0 end) femaleCount
from pet
group by species 
```

# outlook - 未加载已部署的 Outlook 插件

> ID：15295622
> 
> 赞同：1
> 
> 时间：2013-03-08T13:58:14.863
> 
> 标签：outlook, add-in

我无法让我的 Outlook 插件在 OL2007 的发布模式下工作（调试效果很好）。我创建了一个 ClickOnce 安装程序，使用自定义证书对其进行签名并构建了安装程序。

然后安装后，当我启动 Outlook 2007 时，它不会加载并且根本没有任何通知。我查看了插件部分，我在“非活动插件”中找到了我的插件。我查看 COM 插件，发现它未选中（检查它没有帮助），通知“未加载”（没有其他）。

我已经尝试过的事情：

1.  围绕我的启动例程加上消息输出的 try/catch 块：没有显示
2.  新的自定义签名证书：没用
3.  APPDATA\MS\Outlook\extend.dat 已删除：无济于事
4.  regedit setting "LoadBehaviour" 3：总是这样，我不用改
5.  VSTO_SUPPRESSDISPLAYALERTS = 0：无济于事，不显示任何内容
6.  VSTO_LOGALERTS = 1：这里一样，没有记录
7.  Fusion Logging：没有任何内容发布到输出目录中

我没有得到任何信息是什么导致我的插件无法加载。这让我快疯了。谁能指出我的解决方案，或者至少我仍然可以尝试解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:52:05.323

该问题显然是由于 GUID 和设置产品密钥之间的差异而发生的。更改设置产品密钥以匹配 GUID 使插件能够再次抱怨错误，因此我可以继续调试。

很奇怪，在这种情况下没有抛出任何错误。

# php - 只需要 pdf 时的 PHP 文件下载，包括 .php 文件

> ID：15295623
> 
> 赞同：0
> 
> 时间：2013-03-08T13:58:15.020
> 
> 标签：php, pdf, readfile

```
<?php

$file = $_GET['name'];

$path = './curr/'.$file.'.pdf'; // the file made available for download via this PHP file
$mm_type="application/pdf"; // modify accordingly to the file type of $path, but in most cases no need to do so

header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-Type: " . $mm_type);
header("Content-Length: " .(string)(filesize($path)) );
header('Content-Disposition: attachment; filename="'.basename($path).'"');
header("Content-Transfer-Encoding: binary\n");

readfile($path); // outputs the content of the file

?> 
```

这是file.php 中的一段代码。我指的是使用以下文件的文件：

```
<a href="file.php?name=First File">File 1</a> 
```

目的是点击链接，`./curr/First File.pdf`应该下载。我确实得到了下载，但在检查时，它是在文件中嵌入了 pdf 的网页。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:14:22.627

如果您只想加载 PDF，上面的代码就是要执行的所有代码。

删除所有周围的菜单、页眉或页脚。确保`readfile()`在调用此链接时，除了来自 PDF 的任何 HTML 或任何其他输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:00:37.220

尝试将内容类型更改为：

```
header("Content-Type: application/force-download"); 
```

# r - 在 R 中获取文件名

> ID：15295626
> 
> 赞同：0
> 
> 时间：2013-03-08T13:58:21.113
> 
> 标签：r, hadoop, hdfs

我正在尝试获取放置在 Hadoop HDFS 中的所有文件名。我发现的只是用于列出文件的 bash 命令

```
hadoop fs -ls 
```

有什么办法可以让它们进入R。请指导我谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:50:43.297

```
setpw("/directory/of/choice")
list.files() 
```

结果是当前工作目录中文件名的字符向量

但在我看来，hadoop 很特别。所以也许这适用于你的情况

```
system("hadoop fs -ls", intern=T) 
```

结果再次是文件名的字符向量，假设“hadoop fs -ls”实际上在系统控制台中返回类似于“ls”的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T16:50:02.897

查看[RHadoop 项目](https://github.com/RevolutionAnalytics/RHadoop/wiki)。特别是您需要列出文件的包是 rhdfs。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-14T04:40:24.340

认为人们可能会发现这个答案很有用，这里是使用 rhdfs 将特定 hdfs 文件夹中的文件名获取到 R 中的代码。

代码：

```
# Load required library and set hadoop environment
library(rhdfs)
Sys.setenv("HADOOP_CMD"="/opt/cloudera/parcels/CDH/bin/hadoop")

# Initialise
hdfs.init()

# Extract files names from a given hdfs folder to a data frame
files <- as.data.frame(hdfs.ls('/')) 
```

输出：

```
> files #Print data frame

  permission   owner      group   size          modtime          file
1 -rw-r--r-- manohar supergroup 204632 2015-01-13 22:45 /LICENSES.txt
2 drwxr-xr-x manohar supergroup      0 2014-12-20 19:51           /SA
3 drwxr-xr-x manohar supergroup      0 2015-01-10 18:16           /in 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T07:44:17.043

我使用了 Rhipe 的命令`rhlist("/")`，它返回了数据框。

# .net - Windows Azure 获取 InstanceInputEndpoint 的外部 dns

> ID：15295628
> 
> 赞同：1
> 
> 时间：2013-03-08T13:58:28.880
> 
> 标签：.net, azure

对于我们的服务，我们使用 Azure InstanceInputEndpoints 直接连接到实例。我们可以通过以下方式找到外部端口号：

```
RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["end-point-name"].PublicIPEndpoint.Port 
```

我们需要一种方法来找到外部 DNS 名称或 IP 地址，这些名称可用于通过负载均衡器连接到此实例，但我们如何才能找到呢？我们需要生产和登台环境的正确名称。我们更喜欢获取 DNS 名称，例如

```
our-service.cloudapp.net 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:21:03.660

由于 Azure DNS 不支持反向查找，因此无法从任何类型的 DNS 查找中获取 DNS 名称。并且服务名称不会保存在服务运行时中。

获取 DNS 名称的唯一方法是使用托管服务中的服务管理 API。[在http://blogs.msdn.com/b/clouddeployments/archive/2010/05/12/making-calls-to-the-service-management-api-from-a-service-running-in](http://blogs.msdn.com/b/clouddeployments/archive/2010/05/12/making-calls-to-the-service-management-api-from-a-service-running-in-windows-azure.aspx)有一个例子[-windows-azure.aspx](http://blogs.msdn.com/b/clouddeployments/archive/2010/05/12/making-calls-to-the-service-management-api-from-a-service-running-in-windows-azure.aspx)，但它有点旧。如果你环顾四周，会有更新的例子。

几个建议：

1.  为什么需要 DNS 名称？为什么不直接使用从 IP 端点获得的 IP 地址？
2.  为什么要使用 cloudapp.net 域名开头？您应该注册自己的域名（即 www.myapp.com）并将其设置为您的 cloudapp.net URL 的 CNAME。然后您可以调用 www.myapp.com: 以便从端点集合中获取的只是端口号。

# sqlite - Greendao，创建非增量（用户定义）主键

> ID：15295630
> 
> 赞同：2
> 
> 时间：2013-03-08T13:58:29.640
> 
> 标签：sqlite, greendao

是否可以在 Greendao 中创建非增量**主键**。
这样我每次插入数据时都可以指定值。
架构是：

```
 private static void addTargetNew(Schema schema){
         Entity target = schema.addEntity("Target");
         target.addStringProperty("TARGET_ID").unique();
     } 
```

删除查询：

```
 List<Target> tList = tDao.queryBuilder().where(Properties.TARGET_ID.eq(id)).list();
    if(tList != null){
        Target t = tList.get(0);
        tDao.delete(t);
    } 
```

其中 id 的数据类型是字符串。

同样，在投票、报告之前，您可能会遇到关于这个问题的地狱问题，**请**说明原因并给我一个解释的机会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:07:36.357

不，[文档](http://greendao-orm.com/documentation/modelling-entities/)说：

> …实体必须有一个 long 或 Long 属性作为它们的主键

# html - 在背景图像的右上角覆盖文本

> ID：15295635
> 
> 赞同：0
> 
> 时间：2013-03-08T13:58:44.090
> 
> 标签：html, css

我想知道如何实现我们在链接中看到的通知计数（如下图所示）

![在此处输入图像描述](../Images/2b14ec1955778f4188819dd3634a8074.png)

我尝试过实现类似的解决方案，使用具有背景图像的 Span，然后使用标签。

大致，

```
<span class="message-icon" title="Unread Message" style="display: inline-block"></span><span style="background-color: red"><sup><b>5</b></sup></span> 
```

这与linkedin网站上的内容相去甚远。

是否已经有成熟的解决方案可用？或任何想法如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:04:33.787

看看这个： http: [//jsfiddle.net/D3VVv/1/](http://jsfiddle.net/D3VVv/1/) 来自这篇文章：[如何将 10x10px 图像叠加在另一个图像之上？](https://stackoverflow.com/questions/3393045/how-can-i-overlay-an-10x10px-image-on-top-of-another-image)

如果你让包含消息图标的 div 与消息图标 + 通知图标一样大，那么你可以使用定位将通知图标定位在该 div 的右上角`absolute`。如小提琴所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:05:56.923

有几种方式，这里以绝对定位为例：

[http://jsfiddle.net/e2Zs4/](http://jsfiddle.net/e2Zs4/)

**HTML**

```
<div class="con">

<img src="http://www.pictures-of-kittens-and-cats.com/images/cute-kitten-pictures-002-small.jpg" />

<img class ="number" src="http://www.privatefly.com/export/PrivateFly/.content/images/services/red_numbers_4.gif " />

</div> 
```

**CSS**

```
.con { width:100px; height:100px; position:relative; }
.number { position:absolute; top:10px; right:10px; } 
```

# php - PHP Soap 客户端调用 CPU 使用率

> ID：15295639
> 
> 赞同：1
> 
> 时间：2013-03-08T13:58:51.977
> 
> 标签：php, performance, web-services, zend-framework, soap

我已经为这个问题苦苦挣扎了几个月，所以我决定寻求帮助。在我们当前的项目中，我们使用多个 Web 服务与外部服务器进行通信。其中一个处理大量数据，soap call 需要很长时间。某些方法调用最多需要 5-10 秒。

我们可以处理这样的时间，问题出在别处。我们正在使用非常强大的机器来托管我们的应用程序（专用，6 个氙气处理器，16 gb ram 内存）。当我们调用外部 WS 并且服务器监听响应时，CPU 使用峰值非常大。

我在一些较弱的机器上进行了测试，看起来这样的进程可以使用高达 100% 的单核使用率，这显然对性能影响很大。

我们的应用程序基于 PHP Zend-Framework（版本 1）。作为 Soap 客户端，我们使用 Zend_Soap_Client。

我很感激任何关于如何优化它的建议。先感谢您

编辑：

1.  部分代码 - 我完全忘记了我们已经实现了用 Curl 替换 php SoapClient 请求以处理超时的修改（两种方法都会出现问题）。这是我们客户的一部分：

    ```
    try {

    $this->client = new SoapExt_Client($this->config->wsdl,
                  array(
                      'cache_wsdl' => WSDL_CACHE_BOTH,
                      'encoding' => $this->config->encoding,
                      'soap_version' => SOAP_1_1,
                      'classmap' => array(
                          [...]
                      ),
                      'features' => SOAP_SINGLE_ELEMENT_ARRAYS
                  )
    );
     $this->client->__setTimeout((int) $this->config->timeout);
    } catch (Exception $exc) {
    throw new My_Exception_System(My_Codes::ERROR_WS_CONNECTION_FAILED, array(__CLASS__));
    } 
    ```

和方法调用：

```
$result = $this->client->$methodName($params); 
```

所以基本上这是一个简单的肥皂电话。当脚本等待远程服务器回复时，CPU 使用率会出现峰值。

1.  网络服务器托管在 .NET WCF 服务上。我们的客户端应用程序托管在 PHP 上（在 Apache 和 IIS 上测试）。
2.  不，我没有使用任何调试工具。以上所有评论均基于我们的日志和性能监控。
3.  是的，WSDL 中有几个导入。
4.  再想一想——关于大量数据的部分可能会产生误导。我们收到的数据不会扩展 50 KB。此外，耗时最长的操作不会返回大量数据，而是网络服务器处理时间的问题。

# php - 获取数据库首字母的值

> ID：15295644
> 
> 赞同：-1
> 
> 时间：2013-03-08T13:59:01.040
> 
> 标签：php, letter

在我的 mysql 数据库中，我有表 'class' 和列 'classname' 包含：`Andree,adele,Beta,Alfa`

如何通过 php 代码获取 'classname' 中首字母为 'a' 或 'A' 的所有名称？我尝试了很多方法来做到这一点，但他们没有给出正确的结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:04:19.587

`SELECT classname FROM class WHERE classname LIKE 'a%'`

您将在 PHP 代码中的某处使用与此类似的查询……我们需要您的 PHP 示例来为您提供更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:02:49.240

请参阅php 文档中的[substr](http://php.net/manual/fr/function.substr.php)。

```
$firstLetter = substr($string, 0, 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:05:12.790

```
$result = mysql_query("SELECT classname FROM `class` WHERE classname LIKE 'a%'"); 
```

请注意，LIKE 不区分大小写。

# android - 如何将用户创建的对象保存到 android 中的存储空间？

> ID：15295650
> 
> 赞同：1
> 
> 时间：2013-03-08T13:59:14.823
> 
> 标签：android, save, storage

在我的应用程序中，我有用户自己创建的抽认卡对象。用户可以根据需要创建任意数量的抽认卡，但是当他们退出应用程序并返回时，他们需要能够看到他们之前创建的抽认卡并能够删除它们。我设置了它，以便他们可以创建/删除，但如果他们退出应用程序，他们将自动删除。保存抽认卡信息的最佳方法是什么？它目前至少有 3 个字符串，标题、正面和背面。

我看了一些，但不确定如何在 android 开发者网站上的保存选项中包含所有三个字符串。

例如共享首选项，看起来您只能保存某些设置，但它允许用户更改这些设置。内部/外部存储虽然非常不同，但会引发相同的问题，如何拥有无限数量的对象，尤其是如何分别保存所有三个字符串。

这是内部存储，如下所示。

```
String FILENAME = "hello_file"; 
String string = "hello world!";  
FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE); 
fos.write(string.getBytes()); 
fos.close(); 
```

我看不到如何保存多个对象或 3 个不同的字符串。

有人看到我的问题的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:06:04.847

SharedPreferences 似乎是您实现它的最简单方法，我认为您误解了它们的用法，或者将名称与“首选项”屏幕混淆了，因为您可以使用 SharedPreferences 方法来保存任何内容（嗯，任何基本数据类型）坚持不懈。

例如，我使用它来保存我的应用程序的 JSON 数据（就将用户的抽认卡保存在 JSONArray 中而言，这可能是一种不错的方式）。

```
/**
 * Retrieves data from sharedpreferences
 * @param c the application context
 * @param pref the preference to be retrieved
 * @return the stored JSON-formatted String containing the data 
 */
public static String getStoredJSONData(Context c, String pref) {
    if (c != null) {
        SharedPreferences sPrefs = c.getSharedPreferences("AppPreferences", Context.MODE_PRIVATE);
        return sPrefs.getString(pref, null);
    }
    return null;
}

/**
 * Stores the most recent data into sharedpreferences
 * @param c the application context
 * @param pref the preference to be stored
 * @param policyData the data to be stored
 */
public static void setStoredJSONData(Context c, String pref, String policyData) {
    if (c != null) {
        SharedPreferences sPrefs = c.getSharedPreferences("AppPreferences", Context.MODE_PRIVATE);
        SharedPreferences.Editor editor = sPrefs.edit();
        editor.putString(pref, policyData);
        editor.commit();
    }
} 
```

其中字符串 'pref' 是用于引用该特定数据的标记，例如：“taylor.matt.data1”将引用一段数据，可用于从 SharedPreferences 检索或存储它

# python - pyparsing：如何获取令牌位置？

> ID：15295651
> 
> 赞同：3
> 
> 时间：2013-03-08T13:59:15.160
> 
> 标签：python, pyparsing

我有一个简单的`pyparsing`语法，可以匹配用空格分隔的数字：

```
from pyparsing import *
NUMBER = Word( nums )
STATEMENT = ZeroOrMore( NUMBER )
print( STATEMENT.parseString( "1 2 34" ) ) 
```

给定`1 2 34`测试字符串，它返回 3 个已解析标记的字符串。但是如何在原始字符串中找到每个标记的位置？我需要它来突出显示“某种”语法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T17:28:32.403

将此解析操作添加到 NUMBER：

```
NUMBER.setParseAction(lambda locn,tokens: (locn,tokens[0])) 
```

解析动作可以传递为给定表达式解析的标记、解析的位置和原始字符串。您可以`setParseAction`使用以下任何签名将函数传递给：

```
fn()
fn(tokens)
fn(locn,tokens)
fn(srctring,locn,tokens) 
```

根据您的需要，您只需要位置和解析的令牌。

添加此解析操作后，您的解析结果现在如下所示：

```
[(0, '1'), (2, '2'), (4, '34')] 
```

**编辑：**

自从我对这篇文章的最初回答以来，我已经添加了 pyparsing`locatedExpr`助手，它将给出特定表达式的开始和结束位置。现在这可以简单地写成：

```
NUMBER = locatedExpr(Word(nums)) 
```

这是完整的脚本/输出：

```
>>> from pyparsing import *
... NUMBER = locatedExpr(Word( nums ))
... STATEMENT = ZeroOrMore( NUMBER )
... print( STATEMENT.parseString( "1 2 34" ).dump() )

[[0, '1', 1], [2, '2', 3], [4, '34', 6]]
[0]:
  [0, '1', 1]
  - locn_end: 1
  - locn_start: 0
  - value: '1'
[1]:
  [2, '2', 3]
  - locn_end: 3
  - locn_start: 2
  - value: '2'
[2]:
  [4, '34', 6]
  - locn_end: 6
  - locn_start: 4
  - value: '34' 
```

# android - 从 Activity 恢复 IntentService

> ID：15295655
> 
> 赞同：0
> 
> 时间：2013-03-08T13:59:24.223
> 
> 标签：android, android-service, intentservice

我的背景中有一个`IntentService`已经启动并运行的。现在我想从我的活动中恢复这项服务，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:13:39.720

根据[Android Developer Site](http://developer.android.com/guide/components/services.html)，这是不可能的。

> 这是 Service 的一个子类，它使用一个工作线程来处理所有的启动请求，一次一个。如果您不要求您的服务同时处理多个请求，这是最佳选择。您需要做的就是实现 onHandleIntent()，它接收每个启动请求的意图，以便您可以进行后台工作。

**为了使下载管理器让 IntentService 通知有关失败下载的某些内容（例如，通过 Messenger），因此您可以稍后在 Internet 访问返回时将该文件排入队列**

# .net - 带有自定义模板的 WPF 按钮只能在内容上按下

> ID：15295663
> 
> 赞同：1
> 
> 时间：2013-03-08T13:59:39.400
> 
> 标签：.net, wpf, button

我有一个按钮样式+模板如下：

```
<Style x:Key="ButtonStyle" TargetType="RepeatButton">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="RepeatButton">
                <Border Background="{DynamicResource {x:Static SystemColors.ControlColor}}" VerticalAlignment="Stretch" HorizontalAlignment="Stretch">            
                    <Path Data="{Binding Content, RelativeSource={RelativeSource TemplatedParent}}">
                        <Path.Fill>
                            <SolidColorBrush x:Name="PathBrush" Color="{x:Static SystemColors.ControlDarkColor}" />
                        </Path.Fill>
                    </Path>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

该按钮的使用方式如下：

```
<RepeatButton Style="{StaticResource ButtonStyle}" Content="M 0 4 L 8 4 L 4 0 Z" /> 
```

但是，只有当鼠标在路径上时才能按下按钮，而不是在整个按钮上。当鼠标在按钮上但不在路径上时，如何让按钮被按下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T15:34:17.420

那是因为`Border`您的元素的背景属性`ControlTemplate`设置不正确。它期望`Brush`并且您提供`Color`. 由于它是 DynamicResource，所以根本没有设置画笔。所以它对 Click 不可见。只需提供刷子。

这应该可以解决问题:)

```
<Border Background="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"> 
```

# java - 防止 SuggestBox 中的无效用户输入？

> ID：15295671
> 
> 赞同：0
> 
> 时间：2013-03-08T14:00:12.633
> 
> 标签：java, gwt

我已经使用 GWT`SuggestBox`获取用户输入并`suggestions`在弹出窗口中显示。

```
SuggestBox suggestBox = new SuggestBox(myData, new TextArea()); 
```

如何防止用户将`TextArea`不存在建议的字符放入其中？

我认为`SuggestBox`检查已放入的文本，`TextArea`然后显示建议。但是我怎么能防止不再匹配的字符呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T09:16:45.540

如果你真的需要

```
 TextArea area = new TextArea();
             area.addKeyDownHandler(new KeyDownHandler() {

                @Override
                public void onKeyDown(KeyDownEvent event) {
                    if(event.getNativeKeyCode()==13 ||....){//Add remaining key codes which you dont want.For example i added enter key which keycode is 13.Remove that and add your key codes there. 
                        event.preventDefault();
                 }  
                }
            }); 
```

进而

```
SuggestBox suggestBox = new SuggestBox(myData,area); 
```

# node.js - 未捕获的类型错误：无法调用 null 的方法“onClose”

> ID：15295672
> 
> 赞同：6
> 
> 时间：2013-03-08T14:00:18.423
> 
> 标签：node.js, iis, socket.io, chat

我正在开发 node.js 聊天应用程序，我在 Windows 的 IIS 上托管了 node.js。我的意图是将 node.js 包含在 Asp.net mvc 中，正如[Jon Galloway](http://weblogs.asp.net/jgalloway/archive/2011/10/26/using-node-js-in-an-asp-net-mvc-application-with-iisnode.aspx)解释的那样，用于在 asp.net Web 应用程序中执行聊天（文本、音频、视频）。

我的安装详细信息：
iisnode.js - iisnode-full-iis7-v0.2.3-x86
node.js - node-v0.8.19-x86
express.js 版本 - 3.1.0
socket.io 版本 -
Windows 7 32 上的0.9.13带有 IIS 8.0 express 的位系统

我已在 IIS 上成功托管 node.js，并运行示例

但是当我开始编写socket.io时，我被卡住了..

当我开始使用客户端浏览器连接到服务器时，客户端浏览器出现错误
提示 Uncaught TypeError: Cannot call method 'onClose' of null socket.io.js:1771

在我的服务器应用程序 iam 中使用 socket.io 配置作为

```
io.configure(function () {
    io.set('transports', [    
           'xhr-polling'
         , 'jsonp-polling'
      ]);
        io.set("polling duration", 10); 
        if (process.env.IISNODE_VERSION) {
            io.set('resource', 'node/socket.io'); 
        }
    }); 
```

这个问题是否与我正在使用的版本（express 和 socket.io node.js）有关，或者在我的 coading 中，关于这个问题的任何想法请帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T03:24:33.487

我认为是因为您没有在客户端 socket.io 配置中设置资源路径。

```
socket = io.connect('http://myurl/node/socket.io', { resource : 'node/socket.io' }) 
```

# iphone - iOS 状态栏随机出现

> ID：15295674
> 
> 赞同：1
> 
> 时间：2013-03-08T14:00:20.617
> 
> 标签：iphone, ios, cocoa-touch

我有一个带有隐藏状态栏的 ViewController。

在`viewWillAppear`我用这个：

```
[[UIApplication sharedApplication]setStatusBarHidden:YES] 
```

我的问题是，过了一会儿状态栏才出现。我找不到原因。

谢谢

# c++ - 将二维向量转换为二维数组

> ID：15295677
> 
> 赞同：7
> 
> 时间：2013-03-08T14:00:29.460
> 
> 标签：c++, arrays, vector

自从我上次访问数组以来已经有一段时间了（我最近一直在使用向量），我需要将 2D 向量转换回 2D 数组，因为我使用的库接受了`double array`该数组的访问器类型的参数是`foo[i][j]`例如。

这是我的代码：

```
double** setupHMM(vector<vector<double> > &vals, int N, int M)
{
  double** temp;
  temp = new double[N][M];

 for(unsigned i=0; (i < N); i++)
 {
    for(unsigned j=0; (j < M); j++)
    {
        temp[i][j] = vals[i][j];
    }
 }
} 
```

有了这个，我得到`error: ‘M’ cannot appear in a constant-expression`

我还尝试了以下方法：

```
double** setupHMM(vector<vector<double> > &vals, int N, int M)
{
   double** temp;

   for(unsigned i=0; (i < N); i++)
   { 
      temp[i] = new double[N];
      for(unsigned j=0; (j < M); j++)
      {
          temp[j] = new double[M];
          temp[i][j] = vals[i][j];
      } 
   }
 } 
```

但是，这会产生分段错误 11。

任何人都可以提出任何建议，或者将向量转换为二维数组的更好方法..

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T14:04:00.357

你很亲密。它应该是：

```
double** setupHMM(vector<vector<double> > &vals, int N, int M)
{
   double** temp;
   temp = new double*[N];
   for(unsigned i=0; (i < N); i++)
   { 
      temp[i] = new double[M];
      for(unsigned j=0; (j < M); j++)
      {
          temp[i][j] = vals[i][j];
      } 
   }
 } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-08T14:04:50.787

双指针 ( `double**`) 不能转换为二维数组。

```
double** temp;
temp = new double[N][M];  //invalid

double** temp;
temp = new double(*)[M]; 
```

认为由于一维数组*衰减*为指针，因此二维数组将衰减为双指针，这是一个常见的误解。这不是真的。衰减只发生在单个指针上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T14:04:40.637

代替

```
temp[i] = new double[N]; 
```

和

```
temp = new double*[N]; 
```

在第二个代码中，并将其移出循环

# java - 如何在不使用 try catch 块的情况下捕获“抛出异常”？

> ID：15295682
> 
> 赞同：2
> 
> 时间：2013-03-08T14:00:54.983
> 
> 标签：java, design-patterns, try-catch

我有一个实现以下接口的基类，在其上声明的方法抛出基本异常类型`Exception`。

有许多扩展基类的具体类，**我不想在所有这些类中添加一个`try-catch`块**。有`throws`没有不添加的方法来处理`try-catch`？

**界面**

```
public interface IReportFactory {   
    public Object GetDataFromDB(Connection conn,HashMap<String,String> map) throws  Exception;        
    public Object  GetJSONString(HashMap<String,String> map) throws Exception;
} 
```

**基类**

```
public abstract class BaseReport implements IReportFactory{        
    public Connection conn;
    public String acctId = FactoryReport.getAcctId();

    ------ I WANT TO CATCH EXCEPTION HERE    ------
    ------ WHICH ACCURS IN OTHER CLASSES WHICH EXTENDS FROM THIS CLASSES -----

} 
```

**具体类的例子（有30个）**

```
public class GeneralRevenue extends BaseReport {
    private final Logger logger = Logger.getLogger(GeneralRevenue.class);

     public GeneralRevenue(Connection _conn) {  
        this.conn = _conn;
    }

    @Override
    public Object GetJSONString(HashMap<String,String> params) throws Exception {

        //codes 
        return jObj.toString();
    }

    @Override
    public Object GetDataFromDB(Connection conn,HashMap params) throws Exception {

        //codes 
        return RevenueList;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T14:03:03.077

仅仅因为您正在扩展接口并不意味着您必须添加`throws Exception`，因此可以将您的实现类声明为比接口抛出更少的异常。你只是不能让实现抛出比接口更广泛的异常。

因此，您可以在没有 throws 子句的情况下定义您的方法，例如：

```
public Object GetJSONString(HashMap<String,String> params) { 
```

如果抛出任何已检查的异常，您可以将其作为未检查的异常重新抛出。

如果你想捕捉子类抛出的异常，你必须重新排列你的代码，让超类调用子类的方法，否则超类没有机会捕捉任何东西。您可能会考虑使用策略是否有意义（这可以让您包装对策略的调用，并可能减少您必须做的继承量）。

经常发生的事情是开发人员使用继承作为他们首选的扩展方式，并且（因为我们总是很匆忙）没有太多考虑将关注点分开，结果是代码复杂且不灵活。沿着不同的责任线将其分解可能有助于降低复杂性，并且可能有助于解决抛出异常的情况，因为不同的部分会更好地集中注意力并且可以抛出更少广泛的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:11:18.480

为什么不创建一个自定义**RuntimeException**并将其扔到基类的 try catch 块中？

```
public class GeneralRevenue extends BaseReport {
private final Logger logger = Logger.getLogger(GeneralRevenue.class);

 public GeneralRevenue(Connection _conn) {  
    this.conn = _conn;
}

@Override
public Object GetJSONString(HashMap<String,String> params) throws MyException {
    try{
    //codes 
    }catch(Exception e) {
     throw new MyException();
    }

    return jObj.toString();
}
}

class MyException extends RuntimeException {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:12:14.610

如果您抛出 RuntimeException，则无需添加 throws 声明。因此，例如，您可以创建自己的 RuntimeException，例如

```
 class NewException extends RuntimeException{

  } 
```

然后，当您将 RuntimeException 添加到您的 BaseClass 时，所有其他方法都不必声明将调用这些方法的 throws。

[http://docs.oracle.com/javase/6/docs/api/java/lang/RuntimeException.html](http://docs.oracle.com/javase/6/docs/api/java/lang/RuntimeException.html)

# android - 是否可以删除 Android Google Maps API v.2 中的标记？

> ID：15295687
> 
> 赞同：0
> 
> 时间：2013-03-08T14:01:14.563
> 
> 标签：android, google-maps

我想使用 Google Maps API v.2 开发一个 android 应用程序是否可以删除 Google 放置的默认标记，例如公共汽车标记。

很抱歉这个基本问题，但这是我第一次开发安卓应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:45:10.643

> 是否可以删除谷歌放置的默认标记，例如公共汽车标记。

没有默认标记。您看到的任何“标记”都是地图图块的一部分，无法删除。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-30T20:22:03.050

你的目标是什么？你不使用它们，你不需要删除它们！！！在地图中，您必须将 POI 显示为标记。否则没有意义。

您可以用透明的drawable替换图标... :)

# php - 如何通过相同的键对值求和并按其他键分组

> ID：15295691
> 
> 赞同：0
> 
> 时间：2013-03-08T14:01:24.157
> 
> 标签：php, multidimensional-array, sum, grouping

我想按相同的参考编号对产品求和，但我有第三个参数，例如尺寸（...、24、26mm、...），**只有**当它们具有相同的尺寸时，我才能对这些值求和。我试过这个：[按特定值对多维数组进行分组？](https://stackoverflow.com/questions/2189626/group-a-multidimensional-array-by-a-particular-value)但是如何对值求和？我的数组如下所示：

```
Array
(
    [0] => Array
        (
            [0] => 2
            [1] => 790180X
            [2] => 26mm
        )
    [1] => Array
        (
            [0] => 4
            [1] => 762182Z
        )
    [2] => Array
        (
            [0] => 2
            [1] => 072182X
        )
    [3] => Array
        (
            [0] => 4
            [1] => 660122Y
        )
    [4] => Array
        (
            [0] => 2
            [1] => 790180X
            [2] => 24mm
        )
    [5] => Array
        (
            [0] => 1
            [1] => 225160Y
        )
    [6] => Array
        (
            [0] => 1
            [1] => 244160Y
        )
    [7] => Array
        (
            [0] => 1
            [1] => 225160Y
        )
    [8] => Array
        (
            [0] => 8
            [1] => 954120Y
        )
    [9] => Array
        (
            [0] => 3
            [1] => 072182X
        )
) 
```

我想要这样的事情：

```
Array
(
    [0] => Array
        (
        [0] => 2
        [1] => 790180X
        [2] => 26mm
        )

    [1] => Array
        (
        [0] => 2
        [1] => 790180X
        [2] => 24mm
        )

    [2] => Array
        (
        [0] => 4
        [1] => 762182Z
        )

    [3] => Array
        (
        [0] => 5
        [1] => 072182X
        )

    [4] => Array
        (
        [0] => 4
        [1] => 660122Y
        )

    [5] => Array
        (
        [0] => 2
        [1] => 225160Y
        )

    [6] => Array
        (
        [0] => 1
        [1] => 244160Y
        )

    [7] => Array
        (
        [0] => 8
        [1] => 954120Y
        )
) 
```

简短版本的数组：

```
Array               =>  TO =>       Array
(                                   (
    [0] => 2:790180X:26mm           [0] => 2:790180X:26mm
    [1] => 4:762182Z                [1] => 2:790180X:24mm
    [2] => 2:072182X                [2] => 4:762182Z
    [3] => 4:660122Y                [3] => 5:072182X
    [4] => 2:790180X:24mm           [4] => 4:660122Y
    [5] => 1:225160Y                [5] => 2:225160Y
    [6] => 1:244160Y                [6] => 1:244160Y
    [7] => 1:225160Y                [7] => 8:954120Y
    [8] => 8:954120Y                )
    [9] => 3:072182X
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:04:19.030

只需将各种“分组”字段用作新数组中的键，将其汇总到一个新数组中：

```
$sums = array();
foreach ($yourarray as $element) {
    $sums[$element['dimension1']][$element['dimension2']]++;
} 
```

对于您需要“分组”的每个维度，您向 $sums 数组添加一个键。

# ios - Facebook POST 使用 iOS 应用中的 Graph API

> ID：15295692
> 
> 赞同：0
> 
> 时间：2013-03-08T14:01:25.950
> 
> 标签：ios, objective-c, facebook-graph-api

我已经在我的 iOS 应用程序中成功实现了 FBGraphAPI。在这里，登录后，安装了 FB 应用程序（我之前创建并在我的代码中提供了应用程序 ID），我可以使用应用程序名称在墙上发布文本或其他内容（图像、文件等）。就像下面一样，

MY_PROFILE_NAME

大约一小时前通过 APP_NAME。

现在，我想用 MY_PROFILE_NAME 和 APP_NAME 发布同样的 2，但不在我的墙上。我想把它贴在另一面特定的墙上。这意味着无论谁使用他们的 ID 通过我的应用程序登录并进行 POST，都将被发布在特定的预定义墙上。

不知道有没有可能？？？LZ，帮帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:11:45.277

你不能了。Facebook 删除了通过 Graph API 向朋友墙发帖的功能：

[https://developers.facebook.com/roadmap/completed-changes/#february-2013](https://developers.facebook.com/roadmap/completed-changes/#february-2013)

> **移除通过 Graph API 向朋友墙发帖的功能**
> 
> 我们将删除通过 Graph API 向用户朋友的墙发帖的功能。具体来说，针对 [user_id]/feed 的 [user_id] 与会话用户不同的帖子，或 target_id 用户与会话用户不同的 stream.publish 调用将失败。如果您想允许人们发布到他们朋友的时间线，请调用提要对话框。通过用户提及标签或动作标签包含朋友的故事将显示在朋友的时间线上（假设朋友批准标签）。有关详细信息，请参阅此博客文章。

# sql-server - SQL 服务器无法连接

> ID：15295695
> 
> 赞同：0
> 
> 时间：2013-03-08T14:01:33.720
> 
> 标签：sql-server, asp.net-mvc-4, entity-framework-4.1, c#-5.0, sql-server-2012-express

我正在开发一个 Asp.net MVC4 应用程序，其中我使用 SimpleMemberShip 提供程序进行授权，并且我在同一台机器上使用数据库 MSSQL Server 2012。当我打开 SQL Server Management Studio 并使用 Windows 身份验证和 sql server 身份验证连接到数据库时，这两种方式都已连接。

但是当我在应用程序中使用正确的凭据指定连接字符串时，应用程序仍然无法连接到数据库。

我已经重新启动了系统，但它并没有解决问题。

我已经打开了 SQl 服务器的配置工具，并为 sql 客户端和服务器启用了 TCP\IP 和 namepipe 客户端协议，并重新启动了所有 sql server 相关服务。

但问题仍然存在，我确信连接字符串是 100% 正确的。我从过去 5 小时开始摸不着头脑，但无法找到问题所在。

请告诉我可能的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:44:54.930

我会检查防火墙。如果您有防火墙（默认窗口或使用某些 AV），则暂时禁用它并查看它是否有效。

# css - 制作图像以适合其父尺寸

> ID：15295697
> 
> 赞同：58
> 
> 时间：2013-03-08T14:01:42.097
> 
> 标签：css, html, image

我有一些大尺寸的照片，我想将它们设置为父母的尺寸。如果一次父尺寸是 1200x800，我想将照片尺寸设置为 1200x800，但我也想查看**整个**图像。如果我的父尺寸是 500x300，我希望图像是 500x300 等等。

这甚至可能吗？我想根据它的父尺寸缩小或扩大它。

谢谢！

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-03-08T14:04:46.070

您想要的 css 属性是`max-width`：

**CSS**

```
img {
    max-width:100%;
} 
```

您可以在图像周围添加一个容器并设置`overflow:hidden`为防止图像变得大于定义的宽度/高度。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-08T14:04:20.210

使用这段 css 来缩放你的图像：

```
img {
    max-width: 100%;
    max-height: 100%;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-08T14:04:57.247

我可能很天真，但这不就是这么简单吗？

```
img {
    width:100%;
    height:100%;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-08T14:04:39.867

在图片标签中试试这个

```
<img src="url.jpg" width="100%" height="100%" /> 
```

或者将元素的背景设置为图像并执行相同操作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-03-17T06:24:53.903

如果**图像大于**您必须设置的父容器：

```
img {
    max-width: 100%;
} 
```

如果您的**图像较小**，则必须设置

```
img {
    min-width: 100%;
} 
```

否则它将保持原来的宽度和高度。

（高度默认设置为*自动*）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-08T14:05:43.403

尝试使用 max-width 属性，这可能会在早期版本的 IE 中出现错误

```
#custom img {
    max-width: 100%;
    max-height: 100%;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-07-16T13:14:27.047

一般来说，记住这一点可能会有所帮助：

1：轨道不是容器。

2：网格区域不是容器。

3：嵌套元素不是容器**，除非你这样声明它。**

诸如*max-width: 100%、object-fit: contains*等声明描述了元素（例如 img）在其**容器**内的行为- 而不是在它恰好放置的轨道或区域内。而不是在标记它所在的位置，嵌套在其容器内。例如之后

HTML：

```
<div class="myContainer">
    <div class="myTopRow">
        <img src="myPic.jpg">
    </div>
    <div class="myBottomRow">
        <span class="mySubText">Your subtext here.</span>
    </div>
</div>

CSS:
.myContainer {
    display: grid;
    grid-template-rows:  [row1Start] 1fr [row1End row2Start] 1fr [row2End];
    grid-template-columns: [col1Start] 1fr [col1End];
}

.myTopRow {
    grid-rows: row1Start / row1End;
    grid-columns: col1Start / col1End;    
}

.myBottomRow {
    grid-rows: row2Start / row2End;
    grid-columns: col1Start / col2End;
}

.myTopRow img {
    max-width: 100%;
    max-height: 100%;
    object-fit: cover;
} 
```

你已经制作了一个由一列和两行组成的网格。顶行中的图像似乎会溢出到第二行，与该行的跨越文本发生冲突。实际上没有溢出 - 图像不包含在顶行中（它没有被声明为容器，但“仅仅是”一个跨越轨道的区域）。在它的实际容器（整个两行盒子）中，图像被完美地包含。

# php - Blob 存储 - 连接字符串不起作用 php

> ID：15295698
> 
> 赞同：2
> 
> 时间：2013-03-08T14:01:46.767
> 
> 标签：php, azure, azure-blob-storage

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T15:32:25.510

In Azure there is a difference between a *Storage Account* and a *container*.

A Storage Account is a collection of containers - theoretically only limited by the storage limit within an Azure account.

In your question you do not appear to be creating the container "mycontainer" within your Storage Account. This would explain the "The specified container does not exist" exception - until you explicitly create a container, it does not exist.

You can check that your container exists from within the Azure Portal - within a Storage Account you will see a link to containers - under that link is a list of all the containers for that Storage Account.

* * *

If the container is missing, you need to create it - from the tutorial you linked, this line of code needs to be executed at least once:

```
$blobRestProxy->createContainer("mycontainer", $createContainerOptions); 
```

# html5-canvas - 为什么我的画布绘图区这么小？

> ID：15295704
> 
> 赞同：1
> 
> 时间：2013-03-08T14:02:20.850
> 
> 标签：html5-canvas, enyo

我正在创建一个基于画布的 enyo 控件。它应该捕获鼠标或手指事件，并将它们绘制到上面。但是，当我在该画布上绘制时，它只会绘制到它的一小部分。

查看那个[jsfiddle](http://jsfiddle.net/AFqvD/2/)，因为它包含所有相关代码。

```
enyo.kind({
  name: "SignatureControl",
  kind: "enyo.Canvas",

  recording: false,
  points: [],

  handlers: {
    ondown: "startRecord",
    onmove: "record",
    onup: "stopRecord"
  },

  startRecord: function(inSender, inEvent) {
    this.recording = true;

    if(node = this.hasNode()) {
      this.points.push({
        x: inEvent.clientX - node.offsetLeft,
        y: inEvent.clientY - node.offsetTop,
        d: false,
        p: 1
      });
    }
    this.update();
  },

  stopRecord: function() {
    this.recording = false;
  },

  record: function(inSender, inEvent) {
    if( this.recording ) {
    if(node = this.hasNode()) {
      this.points.push({
        x: inEvent.clientX - node.offsetLeft,
        y: inEvent.clientY - node.offsetTop,
        d: true,
        p: 1
      });
    }
      this.update();
    }
  },

  update: function() {
        var canvas = this.hasNode();
        if (canvas.getContext) {
            var ctx = canvas.getContext('2d');
      this.log(ctx.canvas.width);

      ctx.lineJoin = "round";
      ctx.lineWidth = 1;

      var i = this.points.length - 1; 

      ctx.strokeStyle = "rgba(0,0,0," + this.points[i].p + ")";
      ctx.beginPath();
      if(this.points[i].d && i){
        ctx.moveTo(this.points[i-1].x, this.points[i-1].y);
      }else{
        ctx.moveTo(this.points[i].x-1, this.points[i].y);
      }
      ctx.lineTo(this.points[i].x, this.points[i].y);
      ctx.closePath();
      ctx.stroke();
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T22:36:23.473

您只能在画布上使用高度/宽度属性，不能通过 CSS 调整大小。看看这个更新的小提琴[http://jsfiddle.net/AFqvD/4/](http://jsfiddle.net/AFqvD/4/)

相关部分是：

```
{kind: "SignatureControl", attributes: {height: 150, width: 300}} 
```

# xaml - 宽度的 DoubleAnimation 不收缩

> ID：15295705
> 
> 赞同：0
> 
> 时间：2013-03-08T14:02:30.383
> 
> 标签：xaml, animation

我正在做 Canvas 的 Width 属性的 DoubleAnimation。我想将画布缩小到大小的 1/5。

```
var widthAnimation = new DoubleAnimation();
widthAnimation.Duration = new TimeSpan(0,0,1);
StoryBoard.SetTarget(widthAnimation, Canvas1);
StoryBoard.SetTargetProperty(widthAnimation, new PropertyPath("Width"));
widthAnimation.From = Canvas1.Width;
widthAnimation.To = Canvas1.Width * .2;

StoryBoard stb = new StoryBoard();
stb.Children.Add(widthAnimation);
stb.Begin(); 
```

不知何故，上面的动画并没有将尺寸缩小到 1/5。相反，它扩大了画布。任何线索为什么动画会做一些有趣的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T05:35:19.600

画布被包裹在一个视图框中。Viewbox 的大小是固定的，而其中的画布缩小了。文字展开了。不知道为什么。但是，我通过将动画应用到 Viewbox 而不是 Canvas 解决了这个问题。现在一切正常。

# python - 用win32com和python只擦除excel的一部分

> ID：15295706
> 
> 赞同：0
> 
> 时间：2013-03-08T14:02:31.757
> 
> 标签：python, excel, python-2.7, win32com

我有3个参数。

startLine、starColumn 和宽度（此处为 2、8、3）

![擅长](../Images/36adc739eed17bb398d23c20adad01db.png)

如何擦除所选区域而不在每个单元格中写入空白？（这里只有 30 行，但可能有 10 000 行）

现在我成功地计算了行数，但我无法找到如何选择和删除一个区域

```
self.startLine = 2
self.startColumn = 8
self.width = 8

self.xl = client.Dispatch("Excel.Application")
self.xl.Visible = 1
self.xl.ScreenUpdating = False
self.worksheet = self.xl.Workbooks.Open("c:\test.xls")
sheet = self.xl.Sheets("data")

#Count the number of line of the record
nb = 0
while sheet.Cells(start_line + nb, self.startColumn).Value is not None:
    nb += 1

#must select from StartLine,startColumn to startcolum+width,nb
#and then erase

self.worksheet.Save() 
```

ps：代码有效，由于复制/传递错误，我可能忘记了某些部分，实际上，excel文件的处理是由几个相互继承的类管理的

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:14:37.253

我通常做的是在 Excel 中记录宏，而不是尝试在 Python 中重新破解 VB。对于删除内容，我得到了这样的东西，将其转换为 Python 应该不难：

```
Range("H5:J26").Select
Selection.ClearContents 
```

在 Python 中，它应该类似于：

```
self.xl.Range("H5:J26").Select()
self.xl.Selection.ClearContents() 
```

工作示例：

```
from win32com.client.gencache import EnsureDispatch

exc = EnsureDispatch("Excel.Application")
exc.Visible = 1
exc.Workbooks.Open(r"f:\Python\Examples\test.xls")
exc.Sheets("data").Select()
exc.Range("H5:J26").Select()
exc.Selection.ClearContents() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-09T16:50:08.620

这对我有用

```
xl = EnsureDispatch('Excel.Application') 
wb2=xl.Workbooks.Open(file)
ws=wb2.Worksheets("data")

ws.Range("A12:B20").ClearContents() 
```

# compatibility - RGBA 是否与 css inline 一起用于时事通讯

> ID：15295713
> 
> 赞同：3
> 
> 时间：2013-03-08T14:02:52.127
> 
> 标签：compatibility, opacity, background-color, newsletter, rgba

我正在创建一个时事通讯，并且有一些颜色我希望有一些透明度。那么，是否可以使用 RGBA 作为背景色？

它与所有电子邮件阅读器兼容吗？

例子：

```
<table cellspacing="0" cellpadding="0"> 
    <tr> 
     <td> 
      <hr height="1px" width="320px" style="border:none;background-color: rgba(235, 173, 21, 0.3);"></hr> 
     </td> 
   </tr> 
</table> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T17:59:47.630

无法在电子邮件中始终如一地使用 RGBA。电子邮件设计的众多怪癖之一是它识别 CSS 和旧式 HTML 标记中的颜色声明的方式。

这些工作：

*   bgcolor=“#770000”
*   样式=“颜色：#770000；”
*   样式=“背景颜色：#770000;”</li>

不要使用这些：

*   样式=“颜色：红色；”</li>
*   style="color: rgba(215, 40, 40, 0.9);"</li>
*   样式=“颜色：#700；”</li>

所有速记、颜色名称、3 位 HEX 代码和 RGBA 值在所有电子邮件客户端中的工作方式不一致。

你会注意到我使用了 bgcolor 标签。您应该使用这种旧式方法来设置所有和元素的背景 - 就像其他旧式声明（如宽度和边框）一样。

关于 Gmail 的简短说明（不确定此后是否已解决）：

Gmail 有一个怪癖，它会忽略超链接中的#000000（黑色）和#FFFFFF（白色）。改用 #000001 和 #FFFFF9 作为解决方法。

# python - 如何在运行时确定的类型的 GAE 数据存储中创建实体？

> ID：15295714
> 
> 赞同：0
> 
> 时间：2013-03-08T14:02:52.807
> 
> 标签：python, google-app-engine, google-cloud-datastore

我有一个 URL 路由，它捕获将为其创建实体的模型的名称。（例如`'/New<model>/'`）现在，我将模型名称作为字符串。如何获取该字符串并使用它来创建此模型的新实体以放入数据存储区？

我正在为 GAE 构建一个自定义管理界面，能够注册新模型并根据注册模型动态构建表单。我需要一种方法来获取管理员用户提交的发布数据，并使用正确的模型将其放入数据存储区，该模型将在表单发布到的 URL 中。我目前正在构建一个处理程序来处理进入该 URL 方案的请求，但遇到了这个障碍。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:05:20.240

虽然您可以访问模型类

```
globals()[modelname] 
```

如果模型类是在模块级别定义的，正如@TimHoffman 在评论中指出的那样，允许（可能是恶意的）用户任意访问您的全局变量通常不是一个好主意。

由于您正在动态生成模型类，因此更安全的方法是将这些模型类保存在字典中：

```
model = { 'MyModel': MyModelClass, ... } 
```

然后给定字符串名称`modelname`，您可以使用

```
model[modelname] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T21:32:08.253

我没有使用全局变量来获取我的类构造函数。相反，我创建了一个指向当前模块的变量，并使用 getattr 来捕获我的类构造函数。这是我的处理程序，以防其他人想看到我做了什么。

```
class NewThingHandler(BaseRequestHandler):
    def get(self, thing):
        self.redirect('/admin/')
    def post(self, thing):
        this_module = sys.modules[__name__]
        ThisModel = getattr(this_module, thing)
        arguments = {}
        for property in ThisModel.properties().keys():
            if type(ThisModel._properties[property]) is db.DateProperty:
                this_date = map(int, self.request.get(property).split('/'))
                this_date = datetime.date(this_date[2], this_date[0], this_date[1])
                arguments[property] = this_date
                continue
            arguments[property] = self.request.get(property)

        new_thing = ThisModel(**arguments)
        new_thing.put()
        self.redirect('/admin/') 
```

`thing`从 URL 中捕获。

# javascript - Chrome 中带有 getElementByTagName 的 NamedItem 方法不起作用？

> ID：15295717
> 
> 赞同：0
> 
> 时间：2013-03-08T14:03:02.520
> 
> 标签：javascript, google-chrome

我在javascript中有这段代码：

```
var prop="author";
var optele = theform.getElementsByTagName("input");
alert(optele[prop]); 
```

但在 Chrome 中，即使我确定“作者”标签存在，它也会返回**“未定义” 。**相反，在 IE 和 Firefox 中运行良好。

但我注意到在 IE 和 Firefox 的 optele var 中有一个“namedItem”方法，但在 Chrome 中没有。

有人可以帮我在 Chrome 上运行类似的代码语法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T14:14:05.717

那是因为 IE 和 FF 返回[`HTMLCollection` *^([MDN])*](https://developer.mozilla.org/en-US/docs/DOM/HTMLCollection)而不是[`NodeList` *^([MDN])*](https://developer.mozilla.org/en-US/docs/DOM/NodeList)。`NodeList`没有办法按名称或 ID 提取元素（[`namedItem`方法*^([MDN])*](https://developer.mozilla.org/en-US/docs/DOM/HTMLCollection#Methods)所做的）。

解决方案是不使用此功能，而是遍历节点并比较`name`属性。或者，您可以使用[`document.getElementsByName` *^([MDN])*](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)。

从 MDN[`getElementsByTagName`文档](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName)：

> **注意：**虽然 W3C 规范说`elements`是 a ，但此方法在 Gecko 和 Internet Explorer 中都`NodeList`返回 a 。`HTMLCollection`Opera 返回 a `NodeList`，但`namedItem`实现了一个方法，这使得它类似于 a `HTMLCollection`。截至 2012 年 1 月，仅在 WebKit 浏览器中返回值是纯`NodeList`. 有关详细信息，请参阅[错误 14869](https://bugzilla.mozilla.org/show_bug.cgi?id=14869)。

# nosql - 用于存储大量记录的 Couchbase 模式

> ID：15295725
> 
> 赞同：1
> 
> 时间：2013-03-08T14:03:28.290
> 
> 标签：nosql, couchbase

有一个非常流行的 Couchbase + Hadoop 串联用于日志文件处理的例子。

Hadoop 用于 MapReduce 作业和存储日志文件，而 Couchbase 用于存储和查询（Hadoop 作业的）结果。

如果我想查询特定的日志文件怎么办。Hadoop 不擅长这一点。
什么是最好的选择？Couchbase 适合某种用例还是有更好的选择？在 Couchbase 中这个目标有什么限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:36:22.333

这可能是一个不错的选择，但您必须记住 Couchbase 将密钥保存在内存中（这允许服务器对所有操作设置/获取/删除非常快......）

因此，这很大程度上取决于您在全球拥有的条目数量。

我们经常看到 Hadoop+Couchbase 这对夫妇的原因是让 Hadoop 自己处理“大数据”，使用 Couchbase 提供对这些数据的子集（可能非常大）的快速访问。

# php - 在不丢失纵横比的情况下将图像放入特定大小的盒子中？

> ID：15295737
> 
> 赞同：2
> 
> 时间：2013-03-08T14:04:01.227
> 
> 标签：php, html, image, wordpress

如何获取已输入 Wordpress 的图像并将其放入特定大小的 div 中而不会丢失其纵横比？

div 是 104px x 104px，但用户可以在 Wordpress 中输入任意大小的图像。

我正在使用以下内容将 Wordpress 中的图像插入页面：

```
<img border="0" src="<?php the_sub_field('logo'); ?>" alt="<?php the_sub_field('text'); ?>" /> 
```

我没有设置宽度或高度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:12:48.870

这与 WordPress、PHP 或任何其他服务器端程序或编程语言无关。

```
<img style="max-width: 100%;" border="0" src="<?php the_sub_field('logo'); ?>" alt="<?php the_sub_field('text'); ?>" /> 
```

只要您设置`max-width`并且没有其他宽度或高度，图像将不会大于包含元素并且不会丢失纵横比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-08T14:44:04.890

只设置一个参数，即高度或宽度。你永远不会失去该图像的纵横比。您可以设置容器的宽度并将图像宽度设置为 100%，也可以直接为图像添加宽度，但不要同时设置两个参数以获得正确的纵横比。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:39:43.333

使用[http://phpthumb.sourceforge.net/](http://phpthumb.sourceforge.net/)

在这里你有很多恶魔如何使用它

[http://phpthumb.sourceforge.net/demo/demo/phpThumb.demo.demo.php](http://phpthumb.sourceforge.net/demo/demo/phpThumb.demo.demo.php)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-08T14:09:32.070

将图像 CSS`max-width`和`max-height`值设置为周围 div的`width`和值。`height`

```
<div style="width: 104px; height: 104px;">
    <img style="max-width: 104px; max-height: 104px;" src="myimage.jpg">
</div> 
```

我对 Wordpress 不熟悉，但是无论您在哪里可以更改这些 CSS 值，都可以这样做，它会适合 div。

# extjs - 如何在 SenchaTouch CSS.swapStyleSheet 中包含 CSS.js

> ID：15295741
> 
> 赞同：2
> 
> 时间：2013-03-08T14:04:16.643
> 
> 标签：extjs, sencha-touch, sencha-touch-2

如何在我的 Sencha Touch 应用程序中包含 CSS.js。我需要使用。CSS.swapStyleSheet

我应该在 app.js 中引用这个文件吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:57:19.680

只需将 CSS.js 文件放入 app/util/ 并编辑您的 app.js，如下所示：

```
Ext.Loader.setPath({
  'Ext': 'touch/src',
  ...
  'Ext.util.CSS': './app/util/CSS.js' <-- Add this line
}); 
```

然后在需要的地方使用 util

```
require: [
  'Ext.util.CSS'
] 
```

**更新**

为了安全和避免冲突，您应该重命名 util，以防 Sencha 决定实际添加`Ext.util.CSS`到框架中。

例如，重命名它`YOUR_APP.util.CSS`

然后你不必添加任何东西`Ext.Loader.setPath()`，你需要`YOUR_APP.util.CSS`

# ruby - 跟踪 Mongo DB 中的数据版本

> ID：15295746
> 
> 赞同：1
> 
> 时间：2013-03-08T14:04:30.073
> 
> 标签：ruby, mongodb

我需要从 MongoDB 返回一个 JSON 数据。我使用 Ruby 作为我的后端。对于客户端，我需要提供一个 data_version 字符串，以便他们知道数据是否已更改，以决定是同步还是从他们的存储中加载。

有没有办法自动增加这个？或者有什么好的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:07:16.500

当您使用 MongoDB 时，您可以在文档中添加时间戳。这增加了两个字段：`created_at`和`updated_at`。您可以使用该`updated_at`字段的值来做您想做的事。

# c# - ModelValidationException：名称“AnonymousUID”不能用于“CodeFirstDatabaseSchema.AnonymousUID”类型

> ID：15295747
> 
> 赞同：3
> 
> 时间：2013-03-08T14:04:30.367
> 
> 标签：c#, .net, entity-framework, orm

我正在使用*实体框架*对现有数据库进行建模。其中一个数据库表包含与表同名的列*AnonymousUID*。

我使用[Entity Framework Power Tools](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)功能*Reverse Engineer Code First*来生成模型类和映射。逆向工程过程会自动重命名`AnonymousUID`类成员（为`AnonymousUID1`）以避免成员名称与类名称相同。因此生成的模型类如下所示：

```
public partial class AnonymousUID
{
    public string UID { get; set; }
    public string AnonymousUID1 { get; set; }
} 
```

并且 EF 映射构造函数是这样实现的：

```
public AnonymousUIDMap()
{
    // Primary Key
    this.HasKey(t => t.UID);

    // Properties
    this.Property(t => t.UID).IsRequired().HasMaxLength(64);
    this.Property(t => t.AnonymousUID1).IsRequired().HasMaxLength(64);

    // Table & Column Mappings
    this.ToTable("AnonymousUID");
    this.Property(t => t.UID).HasColumnName("UID");
    this.Property(t => t.AnonymousUID1).HasColumnName("AnonymousUID");
} 
```

数据库上下文类是这样实现的：

```
public partial class MyDbContext : DbContext
{
    // Constructors...

    public DbSet<AnonymousUID> AnonymousUIDs { get; set; }
    ...

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new AnonymousUIDMap());
        ...
    }
} 
```

这一切都很好，并且代码构建没有问题。但是当我尝试访问数据库的任意内容时：

```
using (var context = new MyDbContext())
{
    var foos = from foo in context.Foos select foo;
    ...
} 
```

尽管如此，仍会引发以下异常：

```
System.Data.Entity.ModelConfiguration.ModelValidationException : 
One or more validation errors were detected during model generation:

\tAnonymousUID: Name: Name 'AnonymousUID' cannot be used in type
CodeFirstDatabaseSchema.AnonymousUID'. Member names cannot be the 
same as their enclosing type. 
```

显然在 中进行了一些额外的映射构建`CodeFirstDatabaseSchema`，并且此过程*无法*避免类/成员名称冲突。

*   为什么会出现这个错误？毕竟，逆向工程程序设法规避了命名问题。
*   在不修改已建立数据库的架构的情况下，有什么方法可以避免引发此异常？

我在 .NET Framework 4 项目中使用来自 Nuget 的 Entity Framework 6.0（预发行版）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T14:13:58.820

正如我在上面的评论中猜到的，将列名更改为以小写“a”开头

```
...HasColumnName("anonymousUID"); 
```

希望这是一个预发布缺陷，并在 RTM 中得到修复；-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:20:32.383

您显示的代码是您使用该`AnonymousUID`名称的唯一地方吗？你`DbSet`在生成的名字是什么`DbContext`？

我构建了一个测试应用程序，没有收到任何错误，这里是完整的：

```
 public partial class AnonymousUID 
    {
        [Key]
        public int UID { get; set; }
        public string AnonymousUID1 { get; set; }
    }

    public class Model : DbContext
    {
        public DbSet<AnonymousUID> AnonymousUIDs { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<AnonymousUID>()
                        .Property(a => a.AnonymousUID1)
                        .HasColumnName("AnonymousUID");

            modelBuilder.Entity<AnonymousUID>()
                .ToTable("AnonymousUID");
        }
    }
    class Program
    {
        static void Main(string[] args)
        {
            var model = new Model();

            var a = new AnonymousUID();

            a.AnonymousUID1 = "hello world";
            model.AnonymousUIDs.Add(a);
            model.SaveChanges();

            var applications = model.AnonymousUIDs.ToList();

            Console.WriteLine(applications.Count);
            Console.ReadLine();
        }
    } 
```

创建了这个数据库：

![在此处输入图像描述](../Images/6b5e70d50f03dc53bdc5ab7292f76bbd.png)

它能够创建、插入并显示表的计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-02T02:22:05.180

我有一个类似的问题，但我无法重命名该列，因为它会破坏遗留代码。Power Tools 生成的类型名称都是小写的。我改变了冲突类型的大小写，它起作用了。

我怀疑 CodeFirstDatabaseSchema 正在维护小写的属性名称，但我不确定。我所知道的是，将我的小写类型名称更改为正确大写的类型名称可以修复它。我希望这对某人有帮助。

# java - 如何制作 Java 桌面应用程序的快捷方式？

> ID：15295750
> 
> 赞同：2
> 
> 时间：2013-03-08T14:04:33.783
> 
> 标签：java, icons, desktop-shortcut

我使用 Eclipse 制作了一个 Java 桌面应用程序（使用 JDBC 和 Swing）。我想为这个应用程序创建一个快捷方式（一个图标）。双击图标时，应用程序将运行。

怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T14:44:34.513

部署应用程序。使用[Java Web 开始](https://stackoverflow.com/tags/java-web-start/info)。它不仅有一个简单的系统来为应用程序安装桌面和菜单项快捷方式（在支持的操作系统上）。*带有图标，*还提供了[`IntegrationService`](http://docs.oracle.com/javase/7/docs/jre/api/javaws/jnlp/javax/jnlp/IntegrationService.html)允许以编程方式检查/安装快捷方式的功能。

有关更多详细信息，请参阅[此答案](https://stackoverflow.com/questions/11323510/how-to-run-java-programs-by-clicking-on-their-icon-on-windows/11323662#11323662)。右侧的 2 个图标（JotPad 和 StarZoom）由 JWS 安装。

![](../Images/3c59a7150ccbe64641b45391650d1e08.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:06:04.160

使快捷方式/图标执行您的应用程序：

```
java -jar yourApplication.jar org.example.your.MainClass 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-22T10:59:01.730

如果它是一个 Web 应用程序 - 转到桌面 + 右键单击​​ + 选择新选项 + 选择快捷方式选项 + 在位置字段中指定您的路径 + 单击下一步 + 输入快捷方式名称 + 完成。

因此，现在您可以将您的应用程序视为桌面快捷方式，如果您单击它，它将自动一键加载您的 Web 应用程序。然后您可以更改属性中的快捷方式图标。

谢谢你。

# java - XML 资源中的变量 - 将值从父级传递给子级

> ID：15295753
> 
> 赞同：14
> 
> 时间：2013-03-08T14:04:41.007
> 
> 标签：java, android, xml, android-layout

我正在尝试重用原始形状并使用这些声明性 XML 元素组成我的大部分用户界面。

### 如何制作一个可变的Android属性？

但我不想为每个属性值及其排列创建单独的 XML 文件，并且在此过程中重复大部分工作。

例如，我希望这个形状的消费者能够定义 android:radius 值？

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient
            android:startColor="#449def"
            android:endColor="#2f6699"
            android:angle="270"/>
    <stroke
            android:width="1dp"
            android:color="#2f6699"/>
    <corners
            android:radius="3dp"/>
</shape> 
```

### 从消费 XML 父级设置属性？

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@drawable/shape_box_round_blue_uniform" />
    <!-- How to set the corner radius here? -->
    <item android:drawable="@drawable/shape_box_round_blue" />
</selector> 
```

### 解决方案？

*   如果可能的话，我不想使用任何 Java 代码隐藏/避免创建自定义控件/类的需要
*   使用维度资源可能是一条富有成效的途径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T18:47:57.033

你可以创建

> 样式属性

，我认为这是您正在寻找的。它们基本上是可变属性。例如，你可以在你的 theme.xml 中使用它

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <!-- You can define attributes here -->
    <attr name="button_radius" format="reference" />
</resources> 
```

它定义了一个变量引用，称为： button_radius 这可以在样式中使用，或者在布局 xml 文件中使用：

```
<!-- You can use them like so: -->
<style name="MyApp.Theme1" parent="android:Theme.Holo.Light">
    <item name="button_radius">12</item>
</style>

<style name="MyApp.Theme2" parent="android:Theme.Holo.Light">
    <item name="button_radius">36</item>
</style> 
```

这样，通过更改主题，您可以为半径使用不同的值。下面是一个未经测试的示例，说明如何更改形状可绘制对象：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <gradient
        android:startColor="#449def"
        android:endColor="#2f6699"
        android:angle="270"/>
    <stroke
        android:width="1dp"
        android:color="#2f6699"/>
    <corners
        android:radius="?button_radius"/> <!-- NOTE the ?button_radius-->
</shape> 
```

用户可以简单地应用不同的样式来使用不同的属性。我不知道这个示例是否完整地回答了您的问题，但是您可以通过在主题中声明属性来做很多事情。这些属性是动态引用。有关可能性的更多信息，[请参阅本文](http://janrain.com/blog/introduction-to-android-theme-customization/)

# php - PHP - 为什么我不能从多维数组的第二个元素访问数据/

> ID：15295766
> 
> 赞同：-4
> 
> 时间：2013-03-08T14:05:12.780
> 
> 标签：php, arrays, parsing, syntax, multidimensional-array

我无法通过谷歌搜索在线找到任何有用的示例或帮助，解决方案应该很简单，但结果不是我所期望的。

我有 3 个数组 - 列出几个：

```
$A = array(1,0,1,1,1,0,1,1,1);
$B = array(1,1,1,0,1,0,1,0,1);
$C = array(1,1,1,0,1,0,1,1,1,0,1); 
```

然后我想创建一个元素所在的数组`[0]`-`[2]`引用上面提到的 3 个数组中的每一个。对此的声明是：

```
$LETTERS= array($A,$B,$C); 
```

我正在尝试`$A[x]`使用以下代码获取元素：

```
$LETTERS[0][0]; 
```

但问题是它输出：`Array[0]`而不是`1`

如果我回`$A[0]`显输出将`1`如预期的那样。

那么我做错了什么？我认为保留字 &| 没有问题 使用大写字母作为变量，有吗？

如何访问这个二维数组中的数据？

提前感谢您的帮助。

* * *

**编辑**
问题是我试图用这段代码回显输出：

```
echo "element [0][0]: $LETTERS[0][0]"; 
```

出于某种原因，这行不通。我需要保留除实际变量之外的所有内容。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:07:25.773

您需要重新检查您的代码。

```
echo $LETTERS[0][0]; 
```

输出 1

编辑的问题答案

```
echo "element [0][0]: {$LETTERS[0][0]}"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T14:07:32.897

在这里工作：

```
php > $A = array(1,0,1,1,1,0,1,1,1);                                        
php > $B = array(1,1,1,0,1,0,1,0,1);
php > $C = array(1,1,1,0,1,0,1,1,1,0,1);
php > $LETTERS= array($A,$B,$C);
php > echo $LETTERS[0][0];
1 
```

好的，鉴于您的编辑... PHP 的解释器并不贪婪。当您将该多维数组嵌入到字符串中时，它不会引入多个数组维度。例如

```
echo "$arr[0][0]" 
```

被视为

```
echo "$arr[0]", "[0]"
      ^^^^--arrray
                 ^^^-random string 
```

这样做会`echo $array`强制数组进入字符串上下文，但 PHP 不会转储数组的内容，它只会打印出来`Array`，这就是你得到`Array[0]`.

要强制 PHP 查看整个数组引用，您需要使用以下`{}`符号：

```
echo "{$arr[0][0]}"; 
```

这将正确处理额外的数组维度。

顺便说一句，这对于字符串中的对象也很有用，例如

```
echo "$obj->attribute->attribute" 
```

最好写成

```
echo "{$obj->attribute->attribute}" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T14:08:22.243

该代码工作正常。现场演示[在这里](http://codepad.org/GAaHplEy)。

**编辑**：在您的版本之后，正确的方法是：

`echo "element [0][0]: {$LETTERS[0][0]}";`

这样 PHP 将正确扩展您的变量。

# javascript - 带通配符的主干事件

> ID：15295768
> 
> 赞同：7
> 
> 时间：2013-03-08T14:05:14.007
> 
> 标签：javascript, backbone.js

有没有办法监听命名空间的所有事件。所以当我听这样的事件时：

```
app.vent.on('notification(:id)', function(type){console.lof(type)}) 
```

它会监听所有这样的事件：

```
app.vent.trigger('notification:info')
app.vent.trigger('notification:error')
app.vent.trigger('notification:success') 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T14:10:21.550

不会。Backbone 通常会触发一般`eventName`事件以及`eventName:specifier`事件。这方面的一个例子是`Model.change`，它允许您监听所有更改，以及对单个字段的更改：

```
model.on('change', this.onAnyPropertyChanged);
model.on('change:name', this.onNamePropertyChanged); 
```

在您的代码中遵循此模式，您可以按如下方式触发您的事件：

```
app.vent.trigger('notification', 'info');
app.vent.trigger('notification:info'); 
```

并听听一般事件：

```
app.vent.on('notification', function(type){ 
  console.log(type);  //-> "info"
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T14:26:41.843

正如[在这个答案](https://stackoverflow.com/a/15295885/184883)中提到的，不可能用通配符来监听事件。但正如你所听到的那样，`all`这将起作用：

```
vent.on('all', function(evenName, options) {
  var type = evenName.split(/notification:/)[1];
  if (type) {
    console.log(type, options);
  }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-08T11:39:00.323

我写了这个助手：

```
export default class EventsHelper {
  static triggerNamespacedEvent(eventBus, event, args) {
    event.split(':').reduce((previous, current) => {
      eventBus.trigger(previous, current);
      return `${previous}:${current}`;
    });
    eventBus.trigger(event, args);
  }
} 
```

要在您的视图中使用它，您将执行以下操作：

```
actionOne(argsOne){
    EventsHelper.triggerNamespacedEvent(this, 'click:chart:one', argsOne);
}

actionTwo(argsTwo){
    EventsHelper.triggerNamespacedEvent(this, 'click:chart:two', argsTwo);
} 
```

要收听这些事件，您将执行以下操作：

```
//Listen for all clicks
this.listenTo(view, 'click', (args) => {
    console.log(`clicked something: ${args}`); //output: clicked something: chart 
});

//Listen for all chart clicks
this.listenTo(view, 'click:chart', (args) => {
    console.log(`clicked chart: ${args}`); //output: clicked chart: one 
});

//Listen for fully qualified event
this.listenTo(view, 'click:chart:two', (args) => {
    console.log(`clicked chart two: ${args}`); //output: clicked chart two: evtArgs 
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-23T16:58:05.240

警告：监听自定义事件的事件命名空间可能不再起作用。例如，这*不起作用*：

```
 @listenTo @app, 'session', -> console.log ".listenTo `session` triggered"
  @listenTo @app, 'session:login_success', -> console.log ".listenTo `session:login_success` triggered"

  @app.on 'session', -> console.log ".on `session` triggered"
  @app.on 'session:login_success', -> console.log ".on `session:login_success` triggered" 
```

如果我在 上触发 'session:login_success'，则`@app`只会触发两个特定事件，而不是命名空间之一。

相关github问题：[https ://github.com/documentcloud/backbone/issues/2558](https://github.com/documentcloud/backbone/issues/2558)

# iis - 为 IIRF.ini (IIS6) 寻找正确的 .htaccess 重写

> ID：15295776
> 
> 赞同：1
> 
> 时间：2013-03-08T14:05:28.293
> 
> 标签：iis, mod-rewrite, rewrite, ini

我在使用 Windows 托管时遇到了一些问题。我们正在使用 PHP，需要一个 mod_rewrite。

然而 windows 不支持 .htaccess。我们确实有 IIRF。

有人可以帮我把这个 .htaccess 翻译成一个工作的 IIRF.ini 文件吗？

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /new/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /new/index.php [L]
</IfModule> 
```

会摇滚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-22T22:30:03.883

尝试这个：

```
RewriteCond %{REQUEST_FILENAME} !-f<br>
RewriteCond %{REQUEST_FILENAME} !-d<br>
RewriteRule /. /new/index.php [L,QSA] 
```

它适用于 Windows Server 2003、IIS 6、IIRF 2.1 和 Wordpress 3.8。

# c# - OnPaintBackground多次执行C#？

> ID：15295788
> 
> 赞同：0
> 
> 时间：2013-03-08T14:06:06.670
> 
> 标签：c#, winforms, user-controls, panels

我创建了一个用户控件，将屏幕分成矩形，但我的控件正在执行`OnPaintBackground`很多次，而它应该只执行一次，请帮助我，因为只执行一次非常重要，因为屏幕开始闪烁很多。

```
public partial class Schedual : UserControl
{
    int days;

    public int Days
    {
        get { return days; }
        set
        {
            days = value;
            change = true;
            Invalidate(true);
        }
    }

    int periods;

    public int Periods
    {
        get { return periods; }
        set
        {
            periods = value;
            change = true;
            Invalidate(true);
        }
    }

    Brush brush;

    bool change = false;

    List<Panel> panels;

    public Schedual()
    {
        InitializeComponent();
        this.ResumeLayout(true);
        this.days = 1;
        this.periods = 1;
        brush = Brushes.White;
        change = false;
     }

    protected override void OnPaint(PaintEventArgs e)
    {
        //stuff ....... or base.OnPaint(e);
    }

    protected override void OnPaintBackground(PaintEventArgs e)
    {
        Graphics g = e.Graphics;
        var h = this.Height / days;
        var w = this.Width / periods;
        for (int i = 0; i < days; i++)
        {
            for (int j = 0; j <= periods; j++)
            {
                g.FillRectangle(brush, j * w, i * h, w, h);
                if (change)
                {
                    AddPanel(j * w, i * h, w, h);
                }
                g.DrawLine(Pens.Black, 0, i * h, this.Right, i * h); //draw the horizantle lines
                g.DrawLine(Pens.Black, j * w, 0, this.Bottom, j * w); //draw the verical lines
            }
        }
        change = false;
    }

} 
```

**输出**是一遍又一遍地绘制背景时屏幕闪烁很多......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T15:11:32.507

双缓冲...

在此处查看更多信息 - [http://msdn.microsoft.com/en-us/library/3t7htc9c.aspx](http://msdn.microsoft.com/en-us/library/3t7htc9c.aspx)

# mysql - 实体框架和 MySQL 不能在实时服务器上运行

> ID：15295789
> 
> 赞同：0
> 
> 时间：2013-03-08T14:06:06.657
> 
> 标签：mysql, asp.net-mvc, asp.net-mvc-4

我有一个使用 EF 5.0 和 MySQL 作为数据库的 ASP.NET MVC4 站点。在我的开发 PC 上一切正常，但是当我使用 IIS7 为我的 Windows 2008 Web Server SP2 构建站点时，我收到以下错误...

`Access denied for user 'root'@'::1' (using password: NO)`

现在，令人困惑的是，这个问题是通过在连接字符串（我有）中提供密码来解决的，所以我不知道为什么我仍然会收到这个错误。

我的 web.config 中的连接字符串是：

> metadata=res:// */MyModel.csdl|res://* /MyModel.ssdl|res://*/MyModel.msl;provider=MySql.Data.MySqlClient;provider connection string="server=localhost;user id=根；密码=1234；持久安全信息=真；端口=3307；数据库=MyDb"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:15:59.547

尝试将连接字符串更改为

metadata=res:///MyModel.csdl|res:///MyModel.ssdl|res://*/MyModel.msl;provider=MySql.Data.MySqlClient;provider connection string="server=localhost;user id=根；密码=1234；持久安全信息=真；端口=3307；数据库=MyDb"

您的连接字符串没有关闭“

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:40:50.447

我设法解决了这个问题......奇怪的是，'localhost' 适用于与数据库的常规 MySQL 连接（我在没有 EF 的 ASP.NET 网站中使用它）。

但是现在使用 EF，似乎专门将 127.0.0.1 作为服务器而不是 localhost 解决了这个问题。

确实很奇怪！

# mysql - MySql、产品的可选类别、子类别和子子类别

> ID：15295791
> 
> 赞同：1
> 
> 时间：2013-03-08T14:06:14.080
> 
> 标签：mysql, database

假设数据库有一个成员表。在每个成员添加他们可以创建的产品和他们自己的类别之前，然后是一个子类别，甚至是一个子子类别。他们添加的产品可能只属于一个类别，但另一个可能属于子子类别。我正在尝试考虑最有效的方法。我知道下面的例子可能不正确，但希望能解释我的想法。

```
Member 
MemberID  Name  
-----------------------
Member_Category
CategoryID, MemberID, CategoryName
------------------------------------
Member_SubCategory
SubCategoryID, CategoryID, SubCategoryName
---------------------------------
Member_SubSubCategory
SubSubCategoryID, SubCategoryID, SubSubCategoryName
----------------------------
Product
ProductID, MemberID, CategoryID, SubCategoryID, SubSubCategoryID, ProductName, Cost 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:51:55.080

首先，产品应该只有一个“categoryID”列，没有 subs。

如果产品可以同时属于多个类别，最好将其放在单独的表“products2categies”中，其中包含“productID”和“columnID”列。

其次，有不同的方法可以在数据库中实现树形结构。我会给你最简单的。在“categories”表中创建这个结构：“categoryID”、“category_name”和“parentID”列。前两个是不言自明的，第三个指向父类。如果这是一个主要类别，则使 'parentID' = 0。

有关 DB 中树结构的更多信息，请参阅[在关系数据库中存储树结构的已知方法是什么？](https://stackoverflow.com/questions/3362669/what-is-the-best-way-to-store-a-tree-structure-in-a-relational-db)

```
Member 
MemberID  Name  
-----------------------
Member_Category
CategoryID, MemberID, CategoryName, ParentID
------------------------------------
Product
ProductID, MemberID, CategoryID, ProductName, Cost 
```

# jquery - jQuery jsonp 没有按预期工作

> ID：15295793
> 
> 赞同：0
> 
> 时间：2013-03-08T14:06:17.037
> 
> 标签：jquery, jsonp

我正在尝试使用 jQuery 实现 jsonp，但它不起作用我确实在[jsonp 中看到了带有 jquery的示例](https://stackoverflow.com/questions/2681466/jsonp-with-jquery)

但在我的情况下，它总是在进行 ajax 调用，我`&callback=?`在最后附加

我构造相对网址，如

```
var url="/pbs/getTraits.do"+ $('#pbstraits').serialize()+"&callback=?";

$.getJSON(url, null, function(data){
        document.getElementById("msg").innerHTML = data.message;
    }); 
```

这是正确的做法吗？

此外，当我与 url 一起发送查询参数时，我必须编码这是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:50:08.277

jQuery`=?` *在查询字符串中*查找。
您的 URL 没有查询字符串。（它没有`?`）

相反，你应该写

```
$.getJSON("/pbs/getTraits.do?callback=?"", $('#pbstraits').serialize(), ...); 
```

# winapi - 使用winapi获取数据

> ID：15295794
> 
> 赞同：0
> 
> 时间：2013-03-08T14:06:17.403
> 
> 标签：winapi, visual-c++, httprequest

我在谷歌上找到了这段代码并做了一些调整。就这样没有问题。但是，我在输出文件的开头有很多空行来。我不知道我怎么能摆脱这个。

我尝试从 php 获取数据。

```
$echo "hello file"; 
```

和 C++

```
int main()
{

HINTERNET connect = InternetOpen("MyBrowser",0 ,0, 0, 0);

   if(!connect){
      cout<<"Connection Failed or Syntax error";
      return 0;
   }

HINTERNET OpenAddress = InternetOpenUrl(connect, http://www.myurl.com/winapi.php", 0, 0, 0, 0);

  if ( !OpenAddress )
   {
      DWORD ErrorNum = GetLastError();
      cout<<"Failed to open URL \nError No: "<<ErrorNum;
      InternetCloseHandle(connect);
      return 0;
   }

   char DataReceived[4096];
   DWORD NumberOfBytesRead = 0;
    ofstream data;
    data.open("output.txt");

   while(InternetReadFile(OpenAddress, DataReceived, 4096, 
        &NumberOfBytesRead) && NumberOfBytesRead) {        
        DataReceived[NumberOfBytesRead]='\x00';
        data<< DataReceived;    
}

     system( "pause" );
} 
```

在文件开头的空行太多了。如何删除它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T20:45:35.800

如果`InternetReadFile()`实际读取 4096 个字节，则会出现缓冲区溢出。您不需要空终止缓冲区，只需使用`write()`方法而不是`<<`运算符将缓冲区按原样写入实际读取的字节数：

```
int main()
{
    HINTERNET connect = InternetOpen("MyBrowser",0 ,0, 0, 0);
    if (!connect)
    {
       cout << "Connection Failed or Syntax error";
       return 0;
    }

    HINTERNET OpenAddress = InternetOpenUrl(connect, "http://www.myurl.com/winapi.php", 0, 0, 0, 0);
    if (!OpenAddress)
    {
        DWORD ErrorNum = GetLastError();
        cout << "Failed to open URL" << endl << " Error No: " << ErrorNum;
        InternetCloseHandle(connect);
        return 0;
    }

    ofstream data("output.txt");
    if (!data)
    {
        cout << "Failed to open txt file";
        InternetCloseHandle(OpenAddress);
        InternetCloseHandle(connect);
        return 0;
    }

    char DataReceived[4096];
    DWORD NumberOfBytesRead = 0;

    do
    {
        if (!InternetReadFile(OpenAddress, DataReceived, 4096, &NumberOfBytesRead))
        {
            DWORD ErrorNum = GetLastError();
            cout << "Failed to read from URL" << endl << " Error No: " << ErrorNum;
            InternetCloseHandle(OpenAddress);
            InternetCloseHandle(connect);
            return 0;
        }

        if (NumberOfBytesRead == 0)
            break;

        data.write(DataReceived, NumberOfBytesRead);    
    }
    while (true);

    cout << "Finished reading from URL";
    system( "pause" );

    return 0;
} 
```

话虽如此，如果您仍然看到文件中出现额外的行，则使用数据包嗅探器检查 PHP 实际传输的数据，并确保它没有发送额外的空白行。如果是，那么您需要解决 PHP 端的问题，而不是客户端。

# c# - 在桌面应用程序上没有得到与 Windows 服务相同的结果

> ID：15295798
> 
> 赞同：0
> 
> 时间：2013-03-08T14:06:36.270
> 
> 标签：c#, sql-server, service

我在这里遇到了一个奇怪的问题。我在桌面应用程序上执行与在 mi Service App 上完全相同的代码，但结果不同。

我正在调用一个查询 SQL 数据库的方法。`DataTable.Rows.Count`使用我的桌面应用程序检查属性时，我得到 600 行。当我对服务执行该操作时，我得到 0 行。我没有任何异常，只有 0 行。

这是代码：

```
 public static DataTable GetAlarmas()
    {
        try
        {
            string query = "P_Get_Alarmas";

            resultado = SqlHelper.ExecuteDataset(ConnectionString, CommandType.StoredProcedure, query);

            Log.Log.LogError(resultado.Tables[0].Rows.Count.ToString());
        }
        catch (Exception ex)
        {
            Log.Log.LogError(ex.ToString());
        }
        return resultado.Tables[0];
    } 
```

我已经这样做了很长时间，而且我以前从未遇到过这个问题。有任何想法吗？

这是程序代码：

```
ALTER PROCEDURE [dbo].[P_Get_Alarmas]
AS
SELECT
    Al.ID_Registro AS 'ID',
    '50' +
    '11' +
    ' ' +
    '18' +
    STUFF(CAST(Ab.id AS VARCHAR),1,0, REPLICATE('0',4- LEN(CAST(Ab.id AS VARCHAR)))) +
    --'E350' +
    Ev.codigoEvento +
    '01' +
    STUFF(CAST(Desc_Zona AS VARCHAR),1,0, REPLICATE('0',3- LEN(CAST(Desc_Zona AS VARCHAR))))+
    '[DC4]'
    AS 'ALARMA'

FROM AlarmReceptor Al 
INNER JOIN Abonados Ab ON Al.Numero_Abonado = Ab.nroAbonado
INNER JOIN Eventos Ev ON Al.Desc_Evento = Ev.descEvento
WHERE Al.informado IS NULL
ORDER BY Al.ID_Registro 
```

# c++ - 如何在“纯”ISO C++ 中制作支持 GUI 的桌面应用程序

> ID：15295800
> 
> 赞同：1
> 
> 时间：2013-03-08T14:06:41.303
> 
> 标签：c++, desktop

我正在尝试制作我的第一个桌面应用程序，但我无法理解 C++/CLI。经过几个小时的反复试验，在我看来它与 C++ 无关（我可能错了）。我很难让函数、类等工作，并且无法理解发生了什么。所以，我决定暂时放弃它。

请告诉我是否可以仅使用我的 Dev C++ 编译器在“纯”C++ 中制作支持 GUI 的桌面应用程序。是的，使用 Visual Studio 可能是一个更好的主意，但我想稍后再使用它。现在，请告诉我是否可以在“纯”C++ 中做到这一点，如果可以，如何（即任何书籍、教程或一些特定的学习路径）。

是的，该应用程序仅用于我的学习目的。因此，可以放心地忽略跨平台兼容性等问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:11:07.747

[Qt](http://qt.digia.com/)可能是目前最好的 C++ GUI 框架。它确实包括不是 100% C++ 的语言扩展，但它非常接近。还有一些教程可以帮助您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:13:24.260

如果您坚持使用 Windows，一些更受欢迎的选择是：

1.  微软[MFC](http://msdn.microsoft.com/en-us/library/d06h2x6e%28v=vs.80%29.aspx)。不适合胆小的人...

2.  [qt](http://qt-project.org)。然而，这也不是严格意义上的 ISO C++，因为它需要一个特殊的预编译步骤。但是它带有一个非常完整的库，是跨平台的并且被广泛采用。文档非常好，学习曲线不是很陡峭。

3.  [wxWidgets](http://www.wxwidgets.org)。仅限跨平台、流行和标准 C++。然而，严重依赖于预处理器和使用它的代码往往会变得丑陋......（这是我个人的看法......）

4.  [GTK+](http://www.gtk.org/)，它是纯 C。有一个相当不错的 C++ 包装器，称为[gtkmm](http://gtkmm.org)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:11:17.980

标准 C++ 不附带 gui。您可以使用某些库在 C++ 中创建 gui，例如：

Qt WxWidgets

我希望这有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T14:13:52.333

首先，C++/CLI 不是 C++，它是微软的“.net 看起来像 C++”的语言。忽略它，它在到达时几乎已经死了。

我不确定你所说的“纯 ISO C++”是什么意思，如果你的意思是你想使用 C++ 创建一个没有任何特殊语言功能（例如 C++/CLI）的 GUI 应用程序，那么你现在会关注[Qt](http://qt.digia.com/)。它确实相当不错，可能是当今最好的 C++ GUI 系统。您还可以下载可以帮助您的 QtCreator IDE。（它也是开源的，您的应用程序也可以在移动设备和 Linux 上运行！）

如果你想要一些仅限 Windows 的东西，那么你可以编写旧的 MFC 应用程序（用于桌面），或者如果你想成为最前沿的东西，那么编写 WinRT 应用程序。本机操作系统 GUI 功能在这两个系统中都可用。

# iphone - 一些 iphone sip 应用程序用来与仅 UDP 的 sip 服务器通信的技巧是什么？

> ID：15295803
> 
> 赞同：4
> 
> 时间：2013-03-08T14:06:52.207
> 
> 标签：iphone, ios, sip, voip, sip-server

有一些 ios sip 应用程序能够与仅 UDP 的 SIP 服务器进行通信。

据我所知，iOS 只允许 TCP 连接在后台保持打开状态，但大多数 SIP 提供商只支持 UDP。

我注意到 iOS 应用程序 3CXPhone 有一个“NAT 辅助模式”，它能够在后台与仅 UDP 的 3CX Phone 系统保持通信。有人知道他们使用什么技巧吗？我正在开发一个 SIP 应用程序，我必须使其适用于仅 UDP 的 SIP 提供商。

我知道在 SO 的后台有多个关于 UDP 套接字的问题，但没有一个问题有有用的答案，或者那里提出的解决方案不再有效（从 iOS 6 开始）。

到目前为止，我知道 2 种可能的解决方案： 1\. 使用一些 GPS 事件，并在这些事件期间也保持套接字通信。之后尝试欺骗苹果并在商店中获取您的应用程序。2.在中间使用SIP代理（B2BUA）。但是在 3CXPhone “NAT 助手模式”中，我没有看到任何 sip 代理配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T12:27:56.940

如果你真的需要一个 UDP 套接字，你将需要一些东西：

*   `UIRequiresPersistentWiFi`：确保 iOS 连接到 Wi-Fi 并且在一段时间后不会将其关闭（我假设您也想要 Wi-Fi，如果不只是忽略这个）
*   在后台循环播放空音频以保持应用程序处于活动状态。
*   有一个每十秒左右弹出一次的计时器，并向服务器发送一条小的（例如crlf）消息。

最后一步是保持 UDP 连接在网络中打开。如果你不经常发送任何东西，网络中的某个人（例如路由器）会关闭它。

空的音频文件是确保您可以在短时间内（十秒计时器）在后台执行某些操作的唯一方法。

写完所有内容后：这将消耗大量电池。用户不会让您的应用长时间运行。

大多数现代 SIP 服务器都支持 TCP。你真的应该把时间花在 TCP 解决方案上。您的用户不会接受 UDP。

# c# - 在我的内部使用其他表达式

> ID：15295804
> 
> 赞同：1
> 
> 时间：2013-03-08T14:06:52.783
> 
> 标签：c#, asp.net, expressionbuilder

我已经创建了我可以使用 C# 代码的自定义表达式生成器，但我想做这样的事情，怎么做：

```
<%$ Code: long.Parse(appSettings:FolderId) %> 
```

这是我目前使用的，但上面的示例更漂亮：

```
<%$ Code: long.Parse(ConfigurationManager.AppSettings["FolderId"]) %> 
```

# jquery - jQuery 选择器：选择一个已知元素的子元素

> ID：15295805
> 
> 赞同：0
> 
> 时间：2013-03-08T14:06:52.797
> 
> 标签：jquery, find, selector, frame, parent-child

我在选择具有我知道的 ID 的特定 textarea 元素时遇到问题。最糟糕的是，我必须处理的 HTML 页面包含两个具有此 ID 的文本区域。我知道这是不对的，但我无法控制那部分。

因此，在该页面中，我有两个主要元素：`<div id="left_column">`并且`<div id="right_column">`都包含一个元素`<textarea id="CPR_DESCRIPTION">`

在 left 和 right_columns div 及其各自的`#CPR_DESCRIPTION`子 textarea 之间有大量其他元素，它们在每一侧都相似。

我希望分别选择这两个`#CPR_DESCRIPTION`文本区域（因为我必须将 's 的内容添加`#left_column`到`#CPR_DESCRIPTION`' `#right_column`s 中）但到目前为止我所有的尝试都失败了。

我试过了：

```
$('#left_column textarea#CPR_DESCRIPTION');

$('#left_column, textarea#CPR_DESCRIPTION');

$('#left_column').find('textarea#CPR_DESCRIPTION'); 
```

值得注意的是，我设法以`#left_column`div 的形式检索，但在检索时`#CPR_DESCRIPTION`，没有成功。另请注意，`#CPR_DESCRIPTION`它不是`#left_column`.

这是所要求的HTML的相关部分（为可怕的东西做好准备）：

```
<div id="left_column">
  <div id="property">
    <div class="body>
      <div class="inner">
        <iframe id="property">
          <html>
            <body class="dialog">
              <div id="G360Layout">
                <form id="fieldsForm">
                  <div id="mainContainer">
                    <div id="container_2">
                      <div id="fields_container">
                        <div id="container_Description">
                          <div id="component_188">
                            <table>
                              <tbody>
                                <tr>
                                  <td>
                                    <textarea id="CPR_DESCRIPTION" name="CPR_DESCRIPTION">
                                      egeezezez
                                    </textarea>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </body>
          </html>
        </iframe>
      </div>
    </div>
  </div>
</div> 
```

所以这是我必须处理的怪物，正如你所看到的，已经有重复的 ID，最糟糕的部分是`#right_column`完全相同。

这是我的 jQuery：

```
function doOnLoadLayoutDescription() {

alert("inside doOnLoadLayoutDescription");

var leftColumn = $('#left_column');
//alert("leftColumn.length="+leftColumn.length);
//var description = $('textarea#CPR_DESCRIPTION');
//var description = leftColumn.find('textarea#CPR_DESCRIPTION');
var description = $('#left_column').find('textarea[id=CPR_DESCRIPTION]');
alert("description.length="+description.length);
if(description.val()) {

    alert("inside description.val()");

    var text = description.val();

    alert(text);

    var rightColumn = $('#right_column');
    var readOnlyDescription = rightColumn .find('textarea#CPR_DESCRIPTION');
    if (readOnlyDescription.length) {

        alert("inside readOnlyDescription.length");

        readOnlyDescription.val(text);

        alert("switch done");

        }
    }
    alert("ouside doOnLoadLayoutDescription");
} 
```

注意：我稍微改变了这个问题，因为我说它是一个 div 但它是一个文本区域，即使没有太大变化，现在纠正这个问题可能是个好主意。

注意 2：此 HTML 页面是从一个 .jsp 页面生成的，该页面是称为 Case360 的案例管理系统的一部分，该系统并不为人所知。由于 .jsp 的所有内容都是通过拖放式布局构建器生成的，因此它解释了为什么这个 HTML 几乎不可能舒适地阅读。

**编辑** 我认为我发现了问题：我放弃的脚本实际上被包裹在 iframe 元素内，因此只在该框架内搜索，因此找不到我的 #left_column 元素。我已经尝试将它放在 iframe 之外，以获得整个页面的范围，不仅是框架，而且我的表单的调用另一个脚本的脚本现在找不到它。为了正常工作，我需要找到一种摆脱框架的方法。我现在正在努力。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:16:08.093

由于 jQuery 可能不允许重复的 ID 选择器（因为它不应该），试试这个：

```
$('#left_column').find('textarea[id=CPR_DESCRIPTION]'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:19:37.363

ID 必须是唯一的，所以就`$("#CPR_DESCRIPTION")`可以正常工作。

但是，在一般情况下，您应该[`.find()`](http://api.jquery.com/find/)像这样使用：

```
$(somelement).find(".selector"); 
```

但是，如果您知道第一个元素的选择器，则可以使用简单的后代选择器：

```
$("#someelement .selector") // any level deep
$("#someelement>.selector") // only first-level children 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:55:45.957

最后，我能够完成这项工作。因此，正如我在 EDIT 下的问题中解释的那样，主要问题是我的脚本被包裹在`<iframe>`元素中。这使得`#CPR_DESCRIPTION`使用简单的`$('#CPR_DESCRIPTION')`. 剩下的问题是能否进入第二个`<iframe>`找到第二个`#CPR_DESCRIPTION`。为了做到这一点，我奇迹般地在一个旧项目的一些黑暗地方找到了一个可以完成这项工作的函数。不过我不太了解（是的，我知道这不好）。但这是该函数的代码：

```
function getFrameElement(fFrames, sName) {
    var frame = null;
    var retFrameEle = null;
    var i = 0;
    for (i=(fFrames.length-1) ; i > -1 ; i--) {
        var fFrame = fFrames[i];
        if (fFrame.name == sName) {
            retFrameEle = fFrame;
            break;
        }
        if (fFrame.id == sName) {
            retFrameEle = fFrame;
            break;
        }
        retFrameEle = getFrameElement(fFrame.frames, sName);
        if (retFrameEle != null) break;
        }
    return retFrameEle;
} 
```

我只是这样调用这个函数：`getFrameElement(top.frames, "doc_content")`“doc_content”是我正在寻找的框架的`id`和。`name`

请注意，这是用基本 javascript 编写的，这意味着我需要继续使用基本 javascript 并简单地使用

```
getFrameElement(top.frames, "doc_content").document.getElementById("CPR_DESCRIPTION"); 
```

找到了第二个`#CPR_DESCRIPTION`文本区域。

感谢所有帮助过的人：）

# ruby-on-rails - ActiveAdmin：如何设置 HTTP 基本身份验证？

> ID：15295807
> 
> 赞同：8
> 
> 时间：2013-03-08T14:06:57.440
> 
> 标签：ruby-on-rails, activeadmin, rack-middleware

我想为 ActiveAdmin 设置基本身份验证，该内部设计解决方案不适用于我的情况。为此，我希望能够在将中间件捆绑到我的应用程序之前将中间件添加到 ActiveAdmin 引擎。我设法做的是：

```
ActiveAdmin::Engine.configure do |config|
  config.middleware.use Rack::Auth::Basic do |username, password|
    username == 'admin' && password == 'root'
  end  
end 
```

但显然这并不能使它起作用，因为我的活动管理路由仍然不受保护。我怎样才能有效地做到这一点？不，我不想通过基本身份验证来保护我的整个网站。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-11T18:57:12.247

这里有一些想法：

```
# app/controllers/application_controller.rb

class ApplicationController < ActionController::Base

  # ...
  http_basic_authenticate_with :name => "frodo", :password => "thering", :if => :admin_controller?

  def admin_controller?
    self.class < ActiveAdmin::BaseController
  end 
```

或者，monkeypatching 版本

```
# config/initializers/active_admin.rb

# somewhere outside the setup block

class ActiveAdmin::BaseController
  http_basic_authenticate_with :name => "frodo", :password => "thering"
end 
```

如果只想保护特定资源，可以使用控制器块：

```
# app/admin/users.rb

ActiveAdmin.register Users do
  controller do
    http_basic_authenticate_with :name => "frodo", :password => "thering"
  end

  # ...
end 
```

我希望能够在`config/initializers/active_admin.rb`设置块中以这种方式扩展控制器，但这对我不起作用：

```
# app/admin/users.rb

ActiveAdmin.setup do |config|
  config.controller do
    http_basic_authenticate_with :name => "frodo", :password => "thering"
  end

  # ...
end 
```

不过，您可以尝试一下，因为它可能是 ActiveAdmin 版本的东西（我可以发誓我在某处看到了文档......）

祝你好运，我希望这会有所帮助。

*更新：更多选择：*

在那之前我没有意识到 :before_filter 在 activeadmin 配置中占用了一个块。

```
# config/initializers/active_admin.rb

ActiveAdmin.setup do |config|
  # ...
  config.before_filter do
    authenticate_or_request_with_http_basic("Whatever") do |name, password|
      name == "frodo" && password == "thering"
    end
  end
end 
```

而且……还有一个想法。听起来您并不热衷于向 application_controller 添加任何内容，但此版本不像上面的第一个版本那样有条件：

```
# app/controllers/application_controller.rb

class ApplicationController < ActionController::Base

  def authenticate_admin
    authenticate_or_request_with_http_basic("Whatever") do |name, password|
      name == "frodo" && password == "thering"
    end
  end
end

# config/initializers/active_admin.rb

ActiveAdmin.setup do |config|
  # ...
  config.authentication_method = :authenticate_admin
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-04T20:44:00.257

如果你只是想保护 ActiveAdmin 的管理区域，那么你应该试试这个：

```
# app/admin/dashboard.rb
controller do
  http_basic_authenticate_with :name => "mega-admin", :password => "supersecret"
end 
```

这就像一个魅力;-)

玩得开心

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-04T21:05:44.217

另一个解决方案是：

```
 # app/controllers/application_controller.rb
  protected
  def authenticate
    authenticate_or_request_with_http_basic do |username, password|
      username == "admin" && password == "superpassword"
    end
  end

# config/initializers/active_admin.rb
config.before_filter :authenticate 
```

此解决方案的最大优点是，您可以调用

**before_filter ：认证**

在您想要保护的每个区域。

# python - Django模型表单保存，'int'对象没有属性'save'

> ID：15295809
> 
> 赞同：1
> 
> 时间：2013-03-08T14:07:01.990
> 
> 标签：python, django

我有这个错误：

> 'int' 对象没有属性 'save'

```
class Profile(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=255)
    tel = models.CharField(max_length=255) 
```

视图.py：

```
def add_profile(request):
    user = request.user.id
    form = ProfileForm()
    if request.method == "POST":
        form = ProfileForm(request.POST)
        if form.is_valid():
            user.save()
            form.save()
            return HttpResponseRedirect('/profile/')
    return render_to_response('profile.html',{'form':form},context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:26:29.860

```
def add_profile(request):
    save_user = Profile(user=request.user)
    form = ProfileForm()
    if request.method == "POST":
        form = ProfileForm(request.POST, instance=save_user)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect('/profile/')
    return render_to_response('profile.html',{'form':form},context_instance=RequestContext(request)) 
```

# c# - 将类添加到当前程序集中

> ID：15295812
> 
> 赞同：2
> 
> 时间：2013-03-08T14:07:14.130
> 
> 标签：c#, .net-assembly, activator, roslyn

我的应用程序中有一个当前程序集，我想将外部 cs 文件中的一个类添加到该程序集中。有可能做到吗？我想像插件一样使用它。现在我正在尝试使用：

```
System.Reflection.Assembly assembly = System.Reflection.Assembly.GetExecutingAssembly(); 
```

和激活器，但没有成功。我的应用程序正在使用 Roslyn，所以也许它可以做到。任何想法将不胜感激。

编辑：它的下一个问题是：我可以使用外部文件（带有类的cs文件）从这个文件中获取实例，但是类的构造函数需要从当前组装中引用sceneManager。那么是否可以向 Roslyn 发送类似的引用并从中获取类的实例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T14:08:44.567

您不能修改已加载的现有程序集。

相反，您可以将代码编译为新程序集（使用 Roslyn、CodeDOM、Sigil 或类似库）并使用反射加载该程序集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T14:10:33.033

'.cs' 文件本身就是*text*。如果不通过某种途径编译它，你就无法对它做*任何事情。*但是不可以：您不能在运行时将额外的类添加到程序集中。您*可以*通过或类似方法在运行时编译代码`CSharpCodeProvider`，并加载生成的程序集。不过，这很麻烦。根据上下文，如果您需要在运行时从脚本中做很多事情，像 Iron Python 这样的工具可能更可取。

# ios - 应用程序状态保存/恢复

> ID：15295814
> 
> 赞同：2
> 
> 时间：2013-03-08T14:07:16.773
> 
> 标签：ios, app-store, appstore-approval, application-state, state-restoration

我想知道应用程序状态保存/恢复是强制性的还是可选的，以使应用程序获得 App Store 的批准？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:13:00.963

不，这不对。您可以查看 AppStore 指南，只要您的应用符合这些指南就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:21:21.287

这不是强制性的，尽管他们可能会抱怨您的应用没有提供足够的用户体验，无法在 AppStore 上发布。但别担心，这不太可能。

# go - 无法理解如何在多个文件中编译 go 代码

> ID：15295819
> 
> 赞同：3
> 
> 时间：2013-03-08T14:07:32.900
> 
> 标签：go

好的，Go 的主要卖点是其易于编译和出色的工具链，但作为一个 Go 新手，我真的迷路了，无法理解关于这一点的文档。

我在两个文件中有一个堆栈玩具示例（一个用于类型定义和方法，称为`stack.go`，一个用于主程序，称为`main.go`），两者都在我的`GOPATH/src/stacker`目录中。

1.  每个文件应该如何命名？它有什么重要性吗？至少有一个约定吗？强制命名？
2.  包名应该是什么？我知道他们应该使用相同的包名，但是哪一个呢？是`stacker`吗？
3.  在`main.go`，我应该如何使用`import`指令来导入`stack.go`？

我尝试了很多组合，直到现在都没有工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T14:21:15.187

1.  您可以随意命名文件，但请注意特殊后缀，如`_test`和`_<arch>`( `_darwin`、`_unix`等)。另请注意，前缀为`.`或`_`不会编译到包中的文件！
2.  建议您将包命名为文件所在的文件夹，尽管在声明中以不同的方式命名包是可能的（但令人困惑）`package mypkg`
3.  如果`stack.go`与 位于同一文件夹/包中`main.go`，则无需导入。中的所有内容都已在`stack.go`中可用`main.go`，因为它在同一个包中。

如果`stacker`应该编译成可执行文件，你应该使用`package main`.

# php - 为什么 $this->data 没有发送到视图，但 $data 在 CodeIgniter 中？

> ID：15295820
> 
> 赞同：0
> 
> 时间：2013-03-08T14:07:33.033
> 
> 标签：php, codeigniter

这是发送数据以在 CodeIgniter 中查看：

```
 public function index()
    {           
        $data['header'] = "Home";
        $this->load->view('admin_frontpage', $data);
    } 
```

这不是：

```
 public function index()
    {
        $this->data['header'] = "Home";
        $this->load->view('admin_frontpage', $this->data);
    } 
```

为什么？

在我的视图文件中，我尝试回显：

```
 <?php echo $header; ?> 
```

但只有在使用 $data 时才会回显。在控制器中使用 $this->data 时，没有任何内容回显。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:10:29.573

很可能`$this->data`没有定义。

你需要在你的类中定义一个数据成员

```
private $data; 
```

并用

```
$this->data = array(); 
```

或一次全部

```
private $data = array(); 
```

有关详细信息，请参阅[类和对象](http://www.php.net/manual/en/language.oop5.php)和[属性](http://www.php.net/manual/en/language.oop5.properties.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:13:16.817

`$this->data`未在您的控制器中定义。请记住，当前页面不记得 $data 数组的名称。每个变量都被实例化为一个单独的变量，就像当你将数据数组传递给' `admin_frontpage`'时，数组被剥离并且数组的每个元素都被实例化为一个变量（即`$this->data['header']`变成`$header`）

# android - 在Android中关闭对话框后无法触发任何事件

> ID：15295821
> 
> 赞同：0
> 
> 时间：2013-03-08T14:07:33.800
> 
> 标签：android, dialog

我有一个名为 ConvertActivity 的活动，它有一个按钮，它调用 SetPrecisionActivity 对话框。显示对话框后，用户按下关闭按钮后，不会调用 ConvertActivity 的 onResume() 或 onRestart()。返回ConvertActivity后需要做一些处理。

转换活动.java

```
public class ConvertActivity extends Activity {
private int callingActivity;
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.convert_layout);

 } 

public void onClick(View view) {
switch (view.getId()) {
case R.id.setprecision:
    // show the precision screen
    SetPrecisionActivity.app_launched(this);
    break;
}
  }
} 
```

转换布局

```
 <TableLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:shrinkColumns="*"  
android:stretchColumns="*"
android:padding="15dp"
android:background="#ffffff">
    <Button
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_span="1"
    android:gravity="center_horizontal"
    android:drawableTop="@drawable/setprecision"
    android:onClick="onClick"
    android:background="@null"
    android:id="@+id/setprecision"
    android:textSize="12sp"
    android:textColor="#000000"
    android:text="@string/csetprecisionh" />
</TableRow> 
```

setprecisionActivity.java（将显示为对话框）

```
 public class SetPrecisionActivity {
  private static Spinner spinnerp;

  public static void app_launched(Activity mContext) {
    SharedPreferences prefs = mContext.getSharedPreferences("helloapp", 0);
    SharedPreferences.Editor editor = prefs.edit();
    showPrecisionDialog(mContext, editor);
    editor.commit();
}   

public static void showPrecisionDialog(final Activity mContext, final SharedPreferences.Editor editor) {
    final Dialog dialog = new Dialog(mContext);
    dialog.setTitle("Set precision ");

   // Inflate the popup_layout.xml
   LinearLayout viewGroup = (LinearLayout) mContext.findViewById(R.id.popupprecision);
   LayoutInflater layoutInflater = (LayoutInflater) mContext
     .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
   final View layout = layoutInflater.inflate(R.layout.setprecision_layout, viewGroup);

   // Getting a reference to Close button, and close the popup when clicked.
   Button close = (Button) layout.findViewById(R.id.close);
   close.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            dialog.dismiss();
        }
    });

    dialog.setContentView(layout);        
    dialog.show();        
}
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:10:24.283

当您打开另一个 Activity 时，您的 ConvertActivity 不会暂停或销毁，它只是“坐”在那里。查看 startActivityForResult 方法并等待结果，例如，请参见[此处。](https://stackoverflow.com/questions/10407159/android-how-to-manage-start-activity-for-result)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T10:38:12.487

要在关闭对话框时触发事件，您需要一个“关闭时”侦听器。这里已经回答了：[当 Android Dialog 被解除时，你能触发一个事件吗？](https://stackoverflow.com/questions/6203720/can-you-fire-an-event-when-android-dialog-is-dismissed)

# wix - WiX 在 msi 中安装 C++ 可再发行组件

> ID：15295825
> 
> 赞同：3
> 
> 时间：2013-03-08T14:07:38.343
> 
> 标签：wix, windows-installer

继上一个问题之后，[为什么我的 WiX 自定义操作会引发 System.IO.FileNotFoundException？](https://stackoverflow.com/questions/15246037/why-does-my-wix-custom-action-throw-a-system-io-filenotfoundexception)，我现在正在尝试将 C++ 分发包安装为我的 msi 的一部分。

我按照文档中的示例进行了操作；[http://wix.sourceforge.net/manual-wix3/install_vcredist.htm](http://wix.sourceforge.net/manual-wix3/install_vcredist.htm)

```
<DirectoryRef Id="TARGETDIR">
      <Merge Id="VC_Redist" SourceFile="$(env.ProgramFiles)\Common Files\Merge Modules\Microsoft_VC100_CRT_x86.msm" DiskId="1" Language="0"/>
    </DirectoryRef>

    <Feature Id="Complete" Level="1" Title="$(var.NVRProduct) $(var.NVRVersion)" Description="Everything" Display="expand">
      <Feature Id="VC_Redist" Title="Visual C++ Runtime" AllowAdvertise="no" Display="hidden" Level="1">
        <MergeRef Id="VC_Redist"/>
      </Feature>      
    </Feature> 
```

这没用。未安装 C++ 发行版，随后我的 msi 由于缺少 C++ 发行版而引发错误，并自行卸载。

这似乎与这个问题相同，没有真正回答。 [带有 WIX 的 C++ 可再发行包](https://stackoverflow.com/questions/11262209/c-redistributable-package-with-wix)

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:03:13.383

我将回答我自己的问题，因为在进一步调查后我发现了许多问题。

首先，VC++ 合并模块的安装确实有效！

我不认为这是因为我仍然收到错误，并且如果手动安装它，我无法在添加删除程序中看到 VC++ 运行时的条目。

但是，通过将安装更改为仅将可分发文件和应用程序安装到我收到错误的位置，我可以看到实际上正在安装 VC++ dll。我现在看到的错误是因为该程序也需要 ATL 可再发行组件。（正如我通过使用 Dependency Walker 发现的那样）。该错误导致 msi 失败，并且 VC++ dll 与我的其他应用程序 dll 一起被卸载！

一旦我按照帮助文件中的示例使用机制提供了 VC++ 和 ATL 可分发文件，一切都很好。

我还使用了静态链接的 SQLite dll，因为即使安装了可分发文件，从自定义操作对 SQLite 的初始调用也失败了。我认为这一定是由于安装顺序问题。然而，使用静态链接版本在开发人员之间引起了一定程度的讨论，大约有 50-50 的人赞成使用它，强烈反对使用它。

但是，安装现在可以正常工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:46:07.617

听起来您的自定义操作要么在 InstallFiles 操作之前安排，要么不延迟，或两者兼而有之。您不提供自定义操作定义，但确保您的`CustomAction`元素已将`Execute`属性设置为`'deferred'`并确保您的`Custom`元素在`InstallExecuteSequence`schedule`After='InstallFiles'`中。

或者，您可以考虑将 CRT 静态链接到您的自定义操作中。我始终推荐此选项，因为它使您的自定义操作独立，从而大大增加了自定义操作始终有效的机会（包括在安装、修复、卸载和修补期间）。

# javascript - HTML 中的 DOS 样式输入

> ID：15295829
> 
> 赞同：1
> 
> 时间：2013-03-08T14:07:57.463
> 
> 标签：javascript, jquery, html, forms, input

我想模拟他在 HTML 中输入 DOS 程序的旧习惯。将其视为订单。首先，我有一堆用于输入姓名、地址等的表单字段。

之后我有几个产品组。每个组只有两个字段。一个用于产品，另一个用于数量。现在，如果产品字段不为空，我希望通过表单为特定组设置一组新的两个输入字段。如果您输入一个产品，您就有机会输入另一个产品。输入非，你很快就会在下一组中标记自己。

现在我正在考虑并寻找最有效的解决方案，该解决方案提供了在此表单内无需使用鼠标即可最快地输入数据的方式。我可以完全自由地使用 jquery、html5 或其他任何东西。但我绝对想要这种输入方式，Turbo Pascal 给了我一个小循环和一些 ReadLn 命令。

欢迎所有建议

- 编辑

开始编码：基本形式如下所示

```
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Testform for a DOS-like behavior</title>
</head>
<body>
<pre>
<?php print_r($_POST); ?>
</pre>
<form action="testform.php" method="post" id="formmail">
    <fieldset id="person">
        <legend>Person</legend>
        <label for="name">Name:</label>
        <input type="text" name="name" id="name" value="">
        <br>
        <label for="email">E-Mail:</label>
        <input type="text" name="email" id="email" value="">
        <br>
        <label for="phone">Phone:</label>
        <input type="text" name="phone" id="phone" value="">
    </fieldset>
    <fieldset id="productgroup1">
        <legend>Product Group 1</legend>
        Product: <input type="text" name="product[1][]">
        Qty: <input type="text" name="qty[1][]">
    </fieldset>
    <input class="button" type="submit" value="Submit">
</form>
</body>
</html> 
```

***更新

发现小提琴的力量我做了这个：http: [//jsfiddle.net/zarquon42/HcbfH/](http://jsfiddle.net/zarquon42/HcbfH/)

这基本上就是我想要的。这让我很惊讶。现在我将看看它是否也适用于具有多组输入字段的上下文。

***下次更新

一些 jquery 更短：http: [//jsfiddle.net/zarquon42/NdD7v/](http://jsfiddle.net/zarquon42/NdD7v/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:11:19.603

也许您可以使用 JQuery 终端仿真器插件？

[http://terminal.jcubic.pl/](http://terminal.jcubic.pl/)

希望这可以帮助！

# algorithm - TSP-Variant，可能的算法？

> ID：15295830
> 
> 赞同：0
> 
> 时间：2013-03-08T14:07:58.327
> 
> 标签：algorithm, graph, traveling-salesman, approximation, np-hard

经典的旅行商问题 (TSP) 定义之一是：

给定一个三角不等式成立的加权完全无向图，返回一条总权重最小的哈密顿路径。

在我的情况下，我不想要哈密顿路径，我需要两个众所周知的顶点之间的路径。所以公式是：

给定一个加权完全无向图，其中三角不等式成立，并且两个称为源和目标的特殊顶点返回一个最小加权路径，该路径恰好访问所有节点一次，并从源开始并结束到目的地。

我记得哈密顿路径是无向图中的路径，它只访问每个顶点一次。

对于原始问题，Christodes 算法是一个很好的近似值（最好解决方案的 3/2），是否可以针对我的情况进行修改？或者你知道另一种方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:18:27.430

将一条边（= 道路）从目标节点添加到成本为 0 的源节点，您就有了一个 TSP（尽管三角不等式不成立）。

《追逐旅行推销员》一书中简要提到了这种技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:40:38.167

为什么不使用 dijkstra 算法，并在每个节点上额外记录路径信息。即，在从源到该特定顶点的最短路径中传递的顶点列表。

到达终点时停止。那么你的路径将是

**当前边 + 当前边的起始顶点的路径**。

当前边缘是引导您到达目的地的最后一个边缘。

# perl - 从单独的列表中选择文本文件中的数据 - perl 或 unix

> ID：15295831
> 
> 赞同：1
> 
> 时间：2013-03-08T14:08:03.893
> 
> 标签：perl, unix, text-processing, csv

我有一个巨大的制表符分隔文件，如下所示：

> contig04733 contig00012 77
> contig00546 contig01344 12
> contig08943 contig00001 14
> contig00765 contig03125 88
> 等

我有一个单独的制表符分隔文件，其中只有这些重叠群对的一个子集，如下所示：

> contig04733 contig00012
> contig08943 contig00001
> 等

我想将第一个文件中与第二个文件中列出的行对应的行提取到一个新文件中。在这个特定的数据集中，我认为在两个文件中每对的哪一种方式应该是相同的。但也想知道是否说：

> 文件1 contig08943 contig00001 14

但在file2中

> contig00001 contig08943

我仍然想要这种组合，是否也可以为此编写脚本？

我的代码如下。

```
use strict;
use warnings;

#open the contig pairs list
open (PAIRS, "$ARGV[0]") or die "Error opening the input file with contig pairs";

#hash to store contig IDs - I think?!
my $pairs;

#read through the pairs list and read into memory?
while(<PAIRS>){
    chomp $_; #get rid of ending whitepace
    $pairs->{$_} = 1;
}
close(PAIRS);

#open data file
open(DATA, "$ARGV[1]") or die "Error opening the sequence pairs file\n";
while(<DATA>){
    chomp $_;
    my ($contigs, $identity) = split("\t", $_);
    if (defined $pairs->{$contigs}) {
        print STDOUT "$_\n";
    }
}
close(DATA); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:48:05.510

将下面没有运行注释的代码拼凑在一起，以获得一个工作程序。我们从典型的正面内容开始，`perl`如果您犯了常见错误，这些内容会指示给您有用的警告。

```
#! /usr/bin/env perl

use strict;
use warnings; 
```

在必要时向用户展示如何正确调用您的程序总是一个不错的选择。

```
die "Usage: $0 master subset\n" unless @ARGV == 2; 
```

使用`read_subset`，程序读取命令行中命名的*第二个文件。*因为您的问题表明您不关心订单，*例如*，

```
contig00001 contig08943
```

相当于

```
contig08943 contig00001
```

代码同时增加`$subset{$p1}{$p2}`和`$subset{$p2}{$p1}`。

```
sub read_subset {
  my($path) = @_;

  my %subset;
  open my $fh, "<", $path or die "$0: open $path: $!";
  while (<$fh>) {
    chomp;
    my($p1,$p2) = split /\t/;
    ++$subset{$p1}{$p2};
    ++$subset{$p2}{$p1};
  }

  %subset;
} 
```

在 Perl 程序中，使用散列来标记您的程序观察到的事件是非常常见的。事实上，Perl 常见问题解答中的许多示例都使用了名为 的哈希`%seen`，如“我*见过*这个”。</p>

通过用 删除第二个命令行参数`pop`，只留下主文件，让程序使用 . 轻松读取所有输入行`while (<>) { ... }`。填充后，代码将`%subset`每一行拆分为字段并跳过任何未标记为已看到的行。通过此过滤器的所有内容都打印在标准输出上。

```
my %subset = read_subset pop @ARGV;
while (<>) {
  my($f1,$f2) = split /\t/;
  next unless $subset{$f1}{$f2};
  print;
} 
```

例如：

```
$猫文件1
contig04733 contig00012 77
contig00546 contig01344 12
contig08943 contig00001 14
contig00765 contig03125 88

$猫文件2
contig04733 contig00012
contig00001 contig08943

$ perl 提取子集文件 1 文件 2
contig04733 contig00012 77
contig08943 contig00001 14
```

要创建包含所选子集的新输出，请将标准输出重定向为

```
$ perl 提取子集文件 1 文件 2 >我的子集
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T16:48:09.603

尝试使用基于两个键的散列哈希（拆分后）

```
use strict;
use warnings;

#open the contig pairs list
open (PAIRS, "$ARGV[0]") or die "Error opening the input file with contig pairs";

#hash to store contig IDs - I think?!
#my $pairs;

#read through the pairs list and read into memory?
my %all_configs;
while(<PAIRS>){
    chomp $_; #get rid of ending whitepace
    my @parts = split("\t", $_); #split into ['contig04733', 'contig00012', 77]
    #store the entire row as a hash of hashes
    $all_configs{$parts[0]}{$parts[1]} = $_;
    #$pairs->{$_} = 1; 
}
close(PAIRS);

#open data file
open(DATA, "$ARGV[1]") or die "Error opening the sequence pairs file\n";
while(<DATA>){
    chomp $_;
    my ($contigs, $identity) = split("\t", $_);
    #see if we find a row, one way, or the other
    my $found_row = $all_configs{$contigs}{$identity} 
        || $all_configs{$identity}{$contigs};
    #if found, the split, and handle each part    
    if ($found_row) {
        my @parts = split("\t", $found_row);
        #same sequence as in first file
        my $modified_row  = $parts[0]."\t".$parts[1].(sqrt($parts[2]/100));
        #if you want to keep the same sequence as found in second file
        my $modified_row  = $contigs."\t".$identity.(sqrt($parts[2]/100));

        print STDOUT $found_row."\n"; #or
        print STDOUT $modified_row."\n";
    }
}
close(DATA); 
```

# dart - 如何在 Dart SDK 0.4+ 中使用 setInterval/setTimeout

> ID：15295834
> 
> 赞同：34
> 
> 时间：2013-03-08T14:08:13.067
> 
> 标签：dart, dart-html

我意识到在当前的 Dart SDK 版本 0.4.1.0_r19425 中，诸如`setTimeout`, `setInterval`,之类的方法不再是类的一部分，`clearTimeout`它们都移到了. 现在有没有关于如何使用它们的文档？每次我想使用它们时都需要创建一个新实例吗？`clearInterval`[`Window`](http://api.dartlang.org/docs/releases/latest/dart_html/Window.html)[`WorkerContext`](http://api.dartlang.org/docs/releases/latest/dart_html/WorkerContext.html)
`WorkerContext`

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-03-08T16:29:44.747

除了 Chris 提到的 Timer 之外，还有一个[基于 Future 的](http://blog.chromium.org/2013/03/new-asynchronous-apis-for-dart.html)API：

```
var future = new Future.delayed(const Duration(milliseconds: 10), doStuffCallback); 
```

目前还没有直接支持取消 Future 回调，但这很好用：

```
var future = new Future.delayed(const Duration(milliseconds: 10));
var subscription = future.asStream().listen(doStuffCallback);
// ...
subscription.cancel(); 
```

希望很快就会有[Timer.repeating 的 Stream 版本](http://dartbug.com/8477)。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2020-04-12T13:37:46.463

您可以使用：

**1) 设置间隔**

```
_timer = new Timer.periodic(const Duration(seconds: 2), functionBack);

Where: `functionBack(Timer timer) {
  print('again');
} 
```

**2) 设置超时**

```
_timer = Timer(Duration(seconds: 5), () => print('done'));

Where _time is type Time 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-08T14:34:31.207

[来自小组的](https://groups.google.com/a/dartlang.org/forum/?fromgroups=#!topic/misc/9h7pxLbv5fU)这篇文章（2013 年 2 月 14 日）。

```
// Old Version
window.setTimeout(() { doStuff(); }, 0);

// New Version
import 'dart:async';
Timer.run(doStuffCallback); 
```

另一个例子（从同一个帖子复制）

```
// Old version: 
var id = window.setTimeout(doStuffCallback, 10);
.... some time later....
window.clearTimeout(id);

id = window.setInterval(doStuffCallback, 1000);
window.clearInterval(id);

// New version:
var timer = new Timer(const Duration(milliseconds: 10), doStuffCallback);
... some time later ---
timer.cancel();

timer = new Timer.repeating(const Duration(seconds: 1), doStuffCallback);
timer.cancel(); 
```

具体来说，它们现在是库中`Timer`类的一部分`dart:async`（而不是`WorkerContext`似乎是 IndexedDb 特定的）。 [API文档在这里](http://api.dartlang.org/docs/releases/latest/dart_async/Timer.html)

# c# - System.Drawing 不存在

> ID：15295845
> 
> 赞同：0
> 
> 时间：2013-03-08T14:08:32.953
> 
> 标签：c#, windows-phone-7

我正在 Windows Phone 7.1 上开发，但找不到 System.Drawing，例如在此代码中

```
public static System.Drawing.Bitmap sfondo_panorama 
{
    get 
    {
        object obj = ResourceManager.GetObject("sfondo_panorama", resourceCulture);
        return ((System.Drawing.Bitmap)(obj));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:14:28.900

我不认为 System.Drawing 在 WP7 中可用，我不确定您要做什么，但请尝试`System.Windows.Media`和`System.Windows.Media.Imaging`.

# android - 当 GoogleMap v2 中的（自定义）信息窗口在 Android 上消失时收到通知

> ID：15295847
> 
> 赞同：2
> 
> 时间：2013-03-08T14:08:35.897
> 
> 标签：android, google-maps-android-api-2

当（自定义）信息窗口消失（=关闭）时，是否有机会发现？

通常，当单击另一个标记或在地图上单击标记之间的空间时，信息窗口会消失。到目前为止，我只看到有机会自己检查用户点击（触摸）的位置。但也许有一些技巧？

**背景：**

当显示信息窗口时，我正在交换标记位图。由于我希望信息窗口替换标记，因此会显示一个 1x1 透明像素标记。信息窗口消失后，我想再次放回原始标记。为此，我需要知道信息窗口何时消失。不幸的是，它没有事件监听器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:45:32.380

当前版本没有这样的回调。也许在[gmaps-api-issues](http://code.google.com/p/gmaps-api-issues/issues/list?can=2&q=apitype=Android2)上为 OnInfoWindowVisibilityChangeListener 添加功能请求是个好主意。

这也将涵盖我放在那里的问题：[http](http://code.google.com/p/gmaps-api-issues/issues/detail?id=5127) ://code.google.com/p/gmaps-api-issues/issues/detail?id=5127 。

# mysql - 内连接：Mysql 打印的行数多于可用行数（相同的多行）

> ID：15295850
> 
> 赞同：2
> 
> 时间：2013-03-08T14:08:43.223
> 
> 标签：mysql, sql, join, rows

我必须要加入的表（`hmmscan1`和`arath_scan`）。它们都显示相同的列名，并且`arath_scan`是一个较小的表，包含在`hmmscan1`. 现在我只想选择`hmmscan1`某个列 ( `domain_name`) 的条目`hmmscan1`并`arath_scan`同意。

我使用了以下命令：

```
SELECT h.auto_inc, 
       h.query_prot_id, 
       h.taxon_schema, 
       h.domain_name 
FROM   hmmscan1 AS h 
       INNER JOIN arath_scan 
               ON h.domain_name = arath_scan.domain_name; 
```

结果是我得到的行数超过了可用的行数`hmmscan1`，而我实际上想减少这些行数。所以我得到了 500.000 行而不是 ~10.000 行，其中包含许多多个条目。

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:10:12.130

你需要一个`group by`。试试这个

```
 select h.auto_inc,h.query_prot_id,h.taxon_schema, h.domain_name 
    from hmmscan1 as h 
    inner join arath_scan on h.domain_name=arath_scan.domain_name
    GROUP BY h.domain_name; 
```

**或**按您想要区分的任何列分组。作为`h.query_prot_id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:55:59.223

解决此特定问题的另一种方法：

从 arath_scan a、hmmscan1 h 中选择不同的 h.query_prot_id、h.taxon_schema、h.prot_id、h.domain_name 其中 a.query_prot_id = h.query_prot_id 和 a.domain_name = h.domain_name；

我不得不在 where 子句中使用 distinct 选项和两个限制。

# wordpress - 如何过滤用户列表中的views_edit？

> ID：15295853
> 
> 赞同：9
> 
> 时间：2013-03-08T14:08:48.793
> 
> 标签：wordpress

以下是仪表板中用户列表的屏幕截图。我想自定义突出显示的部分：

![在此处输入图像描述](../Images/8ea5d30b9f94be60f369865edc0e95b2.png)

[我知道如何使用此WordPress Answer](https://wordpress.stackexchange.com/questions/19418/how-to-add-a-quicklink-to-the-posts-admin-publishedscheduledtrash-menu/52075#52075)中解释的方法在帖子列表中执行此操作。

我尝试使用过滤器**`views_edit-user`**，但没有任何反应。我也试过用谷歌搜索，但似乎这个过滤器没有文档或者不是真正的 WordPress 过滤器。

如何使用`add_action`or自定义该管理部分`add_filter`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-08T20:56:04.450

该屏幕的钩子基于`'views_' . $this->screen->id`，所以它应该是：

```
add_filter( 'views_users', 'modify_views_users_so_15295853' );

function modify_views_users_so_15295853( $views ) 
{
    // Manipulate $views

    return $views;
} 
```

`$views`在我的系统中的内容是：

```
Array
(
    [all] => <a href='users.php' class="current">All <span class="count">(7)</span></a>
    [administrator] => <a href='users.php?role=administrator'>Administrator <span class="count">(1)</span></a>
    [editor] => <a href='users.php?role=editor'>Editor <span class="count">(1)</span></a>
    [subscriber] => <a href='users.php?role=subscriber'>Subscriber <span class="count">(5)</span></a>
) 
```

# php - Highchart ajax 请求

> ID：15295854
> 
> 赞同：0
> 
> 时间：2013-03-08T14:08:53.497
> 
> 标签：php, jquery, json, highcharts

在网上搜索后，我决定最后问这个问题。

我目前正在使用 PHPExcel 访问 xlsx 数据，我也在使用 jQuery Highcharts；两者单独使用时都有效。我发现了几种使用不同 XHR 方法的 highcharts 的方法。我想知道的是是否可以使用以下代码。我可以得到结果，从 PHP 发回的 JSON 包含 10 个我可以在控制台中看到的对象。我的问题在于数据。输出将最后一个 JSON 对象插入 xAxis 上的第一个插槽并跳过前 9 个，

```
$(function () {                     
    var chart;
    $(document).ready(function() {
        chart1 = new Highcharts.Chart({

            chart: {
                renderTo: 'container',
                zoomType: 'xy'
            },
            title: {
                text: 'Market Size & Trading Report'
            },
            subtitle: {
                text: 'Source: Some Source'
            },
            xAxis: [{
                categories: [],

            }],
            yAxis: [{ // Primary yAxis
                labels: {
                    formatter: function() {
                        return this.value +'m';
                    },
                    style: {
                        color: '#000'
                    }
                },
                title: {
                    text: 'Market Size',
                    style: {
                        color: '#000'
                    }
                }
            }, { // Secondary yAxis
                title: {
                    text: 'Percent',
                      style: {
                        color: '#4572A7'
                    }
                },
            labels: {
                formatter: function() {
                    return this.value +' %';
                },
                style: {
                    color: '#4572A7'
                }
            },
            opposite: true
        }],
        tooltip: {
            formatter: function() {
                return ''+
                    this.x +': '+ this.y +
                    (this.series.name == 'Percent' ? ' %' : 'm');
            }
        },
        legend: {
            layout: 'vertical',
            align: 'left',
            x: 200,
            verticalAlign: 'top',
            y: 50,
            floating: true,
            backgroundColor: '#FFFFFF'
        },
        series: [{
            name: 'Market Size',
            color: '#4572A7',
            type: 'column',
            yAxis: 0,
            data: [6.7,7.0,6.8,6.6,6.4,6.8,6.5,6.3,6.3,6.4]

        }, {
            name: 'P Market Size',
            color: '#89A54E',
            type: 'spline',
            yAxis: 1,
            data: [9, 8.4, 8.3,8.1,8.6,8.8,8.7,8.4,8.9,8.6]
        },{
            name: 'D Market Size',
            color: '#FFCC00',
            type: 'spline',
            yAxis: 1,
            data: [1.7,1.7,1.8,1.8,2.0,1.8,1.7,1.7,1.7,1.71]
        }]
    });

    $.ajax({
                type: "GET",
                dataType: "json",
                url: 'http://devtest.localhost/screen-tests/excelReader/Tests/marketSizeandShareGraph.php',
                success: function (data) {
                var i;
                        $.each(data, function (k, v) {

                                chart1.xAxis[0].setCategories([v.heading]) ;

                        } );
                        }
                        } );

}); 
```

});

你有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:21:49.957

我认为您需要一次设置所有类别。像这样的东西：

```
var myCategories = [];
$.each(data, function (k, v) {
    myCategories.push(v.heading);
}
char1.xAxis[0].setCategories(myCategories); 
```

每次调用 setCategories 也会导致图表重新绘制，所以调用一次比较好。

# javascript - 动态更新 nivo 滑块参数

> ID：15295857
> 
> 赞同：0
> 
> 时间：2013-03-08T14:09:02.643
> 
> 标签：javascript, jquery, plugins, nivo-slider

我们想要动态更新 nivo 滑块以获取转换类型、暂停时间等。我们正在调用链接的点击事件的函数。这是函数：

```
function fnSetPauseTime(navType) {
    var getSec = $('#setSliderTime').val();
    getSec = (getSec) * 1000;

    var sliderId = $('#' + IdParent).children().attr('id');
    $('#' + sliderId).attr('pauseTime', getSec);
    var transType = $('#changeTrans').val();
    //var transType = $('.controlNav').is('checked');
    var getSec = $('#setSliderTime').val();
    slideShow(sliderId, getSec, transType, navType);
} 
```

这是调用上述函数的点击事件

```
$('.controlNav').click(function () {
    var navType = $(this).val();
    if (navType == 'thumbNav') {
        navType = 'true';
    } else {
        navType = 'false';
    }
    fnSetPauseTime(navType);
    //slideShow(sliderId, '');
}); 
```

这是**nivo-slider.js**文件中的默认幻灯片功能。

```
function slideShow(sliderId, getSec, transType, navType) {
  $('#' + sliderId).nivoSlider({
    effect: 'random',
    slices: 15,
    boxCols: 8,
    boxRows: 4,
    animSpeed: 500,
    pauseTime: 3000,
    startSlide: 0,
    directionNav: navType,
    controlNav: navType,
    controlNavThumbs: navType,
    pauseOnHover: true,
    manualAdvance: false,
    prevText: 'Prev',
    nextText: 'Next',
    randomStart: false,
    beforeChange: function () {},
    afterChange: function () {},
    slideshowEnd: function () {},
    lastSlide: function () {},
    afterLoad: function () {}
  });
} 
```

**问题：**我们既不能动态更新参数，也没有得到任何错误。它在文件加载时起作用（即第一次）。不确定是什么错误，或者我们做错了。请建议解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:48:55.493

只需在初始化滑块之前销毁节点并替换它。

```
//Save the DOM node before a slider is binded to it
var slider = $('#' + sliderId).clone();

function slideShow(sliderId, getSec, transType, navType) {
   var newSlider = slider.clone(),
   var oldSlider = $('#' + sliderId);
   oldSlider.after(newSlider);
   oldSlider.remove();

   newSlider.nivoSlider({
      ...
   }   
} 
```

# java - Spring3 与 Tapestry 5.3

> ID：15295866
> 
> 赞同：1
> 
> 时间：2013-03-08T14:09:22.523
> 
> 标签：java, spring, spring-mvc, tapestry

我目前正在尝试将 Spring3 与 Tapestry 5.3 进行比较。自 2003 年以来，我一直是 Tapestry 用户，所以我倾向于有偏见，只是因为我没有使用 Spring 的经验。我看到 Spring 已被大多数编写 Java 应用程序的公司广泛采用，因此它迫使我为我的新 Web 应用程序研究它。我当前的目标是构建一个非常丰富的 javascript 应用程序，只需少量配置和大量可用组件。我对 Tapestry5 最大的抱怨是它被设计为与 Prototype 库一起使用。

有人可以向我提供 Spring3 的正面和负面影响，以及为什么一家公司会选择在 Spring3 中构建而不是 Tapestry5 吗？我搜索了谷歌，似乎我发现的唯一比较都是过时的。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T14:38:47.727

我必须为我工作的公司做一个小的概念验证。我查看了 Spring MVC 3 和 Tapestry 5。

对于那些没有使用 Tapestry 的人来说，它有非常好的 UI 流约定，例如。按下按钮或跟随链接。您的 Page 类中的所有内容都是 ThreadLocal 也很好，因此您不必担心该级别的并发性。

另一方面，我不喜欢 Tapestry 对 Ajax 的支持。它有自己的标签用于执行 ajax 操作（区域等），但很难做到

```
$.ajax({
  url: "tapestry_page",
  success: function(result) {
    // do something with json result
  }
}); 
```

因为[Tapestry 接受的返回类型](http://tapestry.apache.org/page-navigation.html)。你说你的项目将是丰富的 javascript，这可能意味着很多 ajax。仅出于这个原因，我会选择Spring。您可以只注释您的`@Controller`方法，`@ResponseBody`并且您返回的任何内容都将直接写入响应的正文。这对于直接编写 json 或 xml 很有用（在大多数情况下，它是由 Jackson 或 JAXB 自动生成的）。

对于 Spring，最大的好处是它是一个非常成熟的项目，所以你需要的一切，可能有人在你之前需要它，并且有可用的解决方案（Tapestry 并非如此，但 Spring 存在更多文档）。

Spring 的一些负面影响：它与 Servlet 的方式非常紧密地耦合，`doGet`并且`doPost`表单处理之类的事情不像[Tapestry 的表单生命周期](http://tapestry.apache.org/forms-and-validation.html)那样紧密地完成。如果您正在执行大量同步操作，Tapestry 的 Page 概念非常好，并且可能是要走的路。

我不确定 Tapestry 是否已经达到了可以在没有 xml 的情况下配置整个应用程序的地步，但是 Spring 做到了。这对你来说可能是一个优势。

我的 2 美分。

# mvvm - 使用 MVVM 和 Prism 4.0 在多个视图模型之间进行通信

> ID：15295868
> 
> 赞同：0
> 
> 时间：2013-03-08T14:09:24.380
> 
> 标签：mvvm, prism-4, wpf-4.0

我正在尝试确定多个视图模型通信机制的最佳方法（例如：视图模型 A 和视图模型 B 是松散耦合的。现在我想将一个值从 A 传递给我的视图模型 B。我不想要使用 EvenAggregator 并且模型是独立的）。

事件聚合器是可用的选项之一，但是由于安全性（由于其全局行为），我试图避免将其用于正常通信。

我在我的应用程序中使用了一个控制器，并且可以轻松地在两个视图模型之间路由数据。MVVM & Prism 4.0 中的控制器是一个好方法吗？

如果没有，那么有人可以建议或指导我采用更好的方法吗？

# ruby-on-rails - 模板缺少导轨

> ID：15295869
> 
> 赞同：-2
> 
> 时间：2013-03-08T14:09:27.657
> 
> 标签：ruby-on-rails

如何在我的控制器上的 ruby​​ 中解决此错误“模板丢失”

```
class SayController < ApplicationController
  def hello
    @title = "Ruby on Rails"
    @website = "www.9lessons.info"
  end
end 
```

我的html页面是

```
<html>
  <head>
   <title><%= @title %></title>
  </head>
  <body>
    <h1>Welcome to <%= @website %></h1>
    Addition : <%= 100 + 300 %>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-08T14:22:31.540

您的 def 方法名称需要与您的视图名称匹配。

IE

```
def index
end 
```

必须是 index.html.erb

```
def hello
end 
```

将是 hello.html.erb

```
def world 
end 
```

将是 world.html.erb

如果不是，您将得到一个缺少的模板，因为它正在寻找该特定名称。

# emacs - 如何在 emacs list-package 中添加 sml 模式？

> ID：15295872
> 
> 赞同：2
> 
> 时间：2013-03-08T14:09:33.947
> 
> 标签：emacs, sml

我想为 Emacs 使用 sml 模式！
所以我安装了

1.  emacs-24.2-bin-i386
    一切正常，我可以看到 emacs 并且可以运行它）
2.  smlnj.msi
    当我尝试`(run-->sml & type:1+1; => val it=2:int)`时也可以

如果我运行 emacs `M`- `x`list-packages 我可以看到包。
但是没有sml-mode！

我怎样才能添加它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:35:16.943

我`list-packages`想说 sml 模式是“可用的”？这意味着它可以安装，但尚未安装。将点移动到 sml-mode 行，点击`RET`，然后在出现的窗口中单击“安装”按钮。在那之后，`list-packages`应该说它是“安装”的。

[或者，您可以从GNU ELPA 存档网站](http://elpa.gnu.org/packages/sml-mode.html)下载最新版本并使用`M-x package-install-file`.

# c++ - 可变参数模板基类呼叫转移

> ID：15295874
> 
> 赞同：8
> 
> 时间：2013-03-08T14:09:41.340
> 
> 标签：c++, templates, c++11, variadic-templates

在 11 之前的 C++ 中，我有这样的事情：

```
template<class T,class U,class V>
struct Foo : T,U,V {

  bool init() {

    if(!T::init() || !U::init() || !V::init())
      return false;

    // do local init and return true/false
  }
}; 
```

我想将其转换为 C++11 可变参数语法以获得灵活长度参数列表的好处。我理解使用递归解包模板 arg 列表的概念，但我只是看不到语法正确。这是我尝试过的：

```
template<typename... Features>
struct Foo : Features... {

  template<typename F,typename... G>
  bool recinit(F& arg,G&& ...args) {

    if(!F::init())
      return false;

    return recinit<F,G...>(args...);
  }

  bool init() {
    // how to call recinit() from here?
  }
}; 
```

我希望基类 init() 函数的调用顺序是从左到右的，但这并不重要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T14:17:57.330

这应该有效：

```
template<typename F, typename... T>
    struct recinit;

template<typename F>
    struct recinit<F> {
        static bool tinit(F *) {
            return true;
        }
    };
template<typename F, typename T, typename... G>
    struct recinit<F, T, G...> {
        static bool tinit(F *ptr)  {
            if (!ptr->T::init())
                return false;
            return recinit<F, G...>::tinit(ptr);
        }
    };

template<typename... Features>
struct Foo : Features... {

    bool init() {
        bool res = recinit<Foo, Features...>::tinit(this);
        //use res wisely
    }
}; 
```

您的问题是您不能编写函数的部分特化，只能编写类/结构。并且辅助结构必须在外部，`Foo`否则它将从封闭结构中获取模板参数，那将很糟糕。

你没有说，但我假设这`init`是一个非静态成员函数。如果是这样的话，这些`args`论点就没有什么意义了：它们都应该是`this`！所以只要过去一次，避免争论中的包装。我尝试将`this`其作为 a传递，`void*`但这可能会很麻烦，所以我只是在其中添加了一个额外的模板参数`recinit`will be `Foo`。

而且，每次您执行一个递归步骤时，请记住删除一个参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T14:18:55.403

也许你可以尝试这样的事情：

```
template<typename... Features>
struct Foo : Features...
{
    bool init()
    {
        // Courtesy of Xeo :-)
        auto il = {(static_cast<bool (Foo::*)()>(&Features::init))...};
        return std::all_of(il.begin(), il.end(), 
            [this] (bool (Foo::*f)()) { return (this->*f)(); }
            );
    }
}; 
```

这是使用可变参数模板的另一种更详细的版本：

```
template<typename... Features>
struct Foo : Features...
{
    bool init()
    {
        return combine_and((&Features::init)...);
    }

private:

    bool combine_and()
    {
        return true;
    }

    template<typename F>
    bool combine_and(F f)
    {
        return (this->*f)();
    }

    template<typename F1, typename... Fs>
    bool combine_and(F1 f1, Fs... fs)
    {
        return ((this->*f1)() && combine_and(fs...));
    }
}; 
```

无论您选择哪种解决方案，您都可以这样使用它：

```
#include <iostream>

using namespace std;

struct A { bool init() { cout << "Hello " << endl; return true; } };
struct B { bool init() { cout << "Template " << endl; return true; } };
struct C { bool init() { cout << "World!" << endl; return true; } };

int main()
{
    Foo<A, B, C> f;
    bool res = f.init(); // Prints "Hello Template World!"
    cout << res; // Prints 1
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T14:38:26.010

您的代码有两个问题。首先，相当平凡：

```
return recinit<F,G...>(args...); 
```

你已经处理了`F`，把它从参数列表中去掉。

```
return recinit<G...>(args...); 
```

（此外，您可能应该完美地转发论点。）

其次，代码不会编译，因为您的递归在运行时有一个锚点，*但在编译时没有*。也就是说，编译器将尝试`G`无限解压缩参数包。为了防止这种情况，您需要为空模板参数列表*专门化该函数。*

# correlation - 没有右边界的 web_reg_save_param_ex() 的 loadrunner 切割

> ID：15295877
> 
> 赞同：0
> 
> 时间：2013-03-08T14:09:51.317
> 
> 标签：correlation, loadrunner

使用 FireBug 嗅探相关候选者我通常有这个响应头：

```
Response Headersview source

Cache-Control   no-cache, no-store

Content-Length  0

Date    Fri, 08 Mar 2013 13:22:37 GMT

Expires Thu, 01 Jan 1970 00:00:00 GMT

Location http://c24jbs300014.test.local:8080/something/someotherthing/171330/considertakingadump?24

Pragma  no-cache

Server  Apache-Coyote/1.1 
```

在上面的响应标头中，我将值 24 关联起来，如下所示：

```
 web_reg_save_param_ex(

            "ParamName=correlationID",

            "LB=considertakingadump?",

            "RB=",

            SEARCH_FILTERS,

            "Scope=Headers",

            LAST); 
```

它被拾起，它可以像这样在脚本中关联：

```
 web_submit_data("submitit", 

            "Action=http://c29jbsl00015.test.local:8080/something/treatment/{someothercorrelatedvalue}/someotherstuff?{correlationID}-1.IBehaviorListener.0-tabbedPanel-content-panels-0-panel-tableBody-somepoint-0-somepoint-somepoint-somepoint", 

            "Method=POST", 

            "RecContentType=text/xml", 

            "Referer=http://c29jbsl00015.test.local:8080/something/treatment/{someothercorrelatedvalue}/someotherstuff?9", 

            "Snapshot=t63.inf", 

            "Mode=HTTP", 

            ITEMDATA, 

            "Name=valgtBeslutning", "Value=0", ENDITEM, 

            LAST); 
```

但是，当查看日志（扩展为参数替换）时，我发现很多响应是构造 URL 的一部分，如下所示：

```
Action.c(618): Redirecting "http://c29jbsl00015.test.local:8080/something/treatment/171334/considerit?24&10Content-Length:+0HTTP/1.1+200+OKServer:+Apache-Coyote/1.1Date:+Fri,+08+Mar+2013+13:27:35+GMTExpires:+Thu,+01+Jan+1970+00:00:00+GMTPragma:+no-cacheCache-Control:+no-cache,+no-storeContent-Type:+text/html%3Bcharset=UTF-8Transfer-Encoding:+chunked-1.ILinkListener-nesteContent-Length:+0HTTP/1.1+200+OKServer:+Apache-Coyote/1.1Date:+Fri,+08+Mar+2013+13:27:35+GMTExpires:+Thu,+01+Jan+1970+00:00:00+GMTPragma:+no-cacheCache-Control:+no-cache,+no-storeContent-Type:+text/html%3BcharsetContent-Length: 0HTTP/1.1 200 OKServer: Apache-Coyote/1.1Date: Fri, 08 Mar 2013 13:27:35 GMTExpires: Thu, 01 Jan 1970 00:00:00 GMTPragma: no-cacheCache-Control: no-cache, no-storeContent-Type: text/html;charset=UTF-8Transfer-Encoding: chunked-1.IBehaviorListener.0-tabbedPanel-content-panels-0-panel-tableBody-kontrollpunkter-0-kontrollpunkt-beslutningForm-valgtBeslutning" (redirection depth is 0)   [MsgId: MMSG-26694] 
```

我的服务器响应中没有正确的边界是造成这种情况的原因。

有没有办法说，即“将右边界设置为换行符 (\n)”或类似于在我的 web_reg_save_param() 中截断这个长而无用的信息的东西？在我的服务器响应中的数字 24 之后？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:41:17.867

是的，您可以使用不可见的控制字符，例如 \r,\n,\t, .... 作为左边界条件或右边界条件。

如果您有一个始终以“location”开头的可变内容行，以您需要最后两个字符的“\n”结尾，那么您始终可以捕获整行，然后使用 C 的标准字符串处理功能来提取行的最后两个字符，例如玩“将指针移动”到字符串的最后两个字符的游戏

```
&lr_eval_string("{My_captured_long_line}")[strlen(lr_eval_string("{My_captured_long_line}")) -2] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T05:59:18.130

为什么不使用 SaveLen

web_reg_save_param_ex(

```
 "ParamName=correlationID",

        "LB=considertakingadump?",

        "RB=",

                      "savelen=2",

        SEARCH_FILTERS,

        "Scope=Headers",

        LAST); 
```

# asp.net - 无效的视图状态，字符串中的 Hack Attempt -1

> ID：15295878
> 
> 赞同：0
> 
> 时间：2013-03-08T14:09:52.477
> 
> 标签：asp.net, iis, webforms, viewstate

更新，问题是：我可以在它到达 Global.asax 之前阻止 -1' 的表单字符串值吗？

因此，我们在 Global.asax 中相当一致地得到这些错误。这是一种基于表单的 bot hack 尝试，它试图传递无效的表单值。保持不变的一件事是表单值之一是“-1”。如果我能阻止它，那我就没事了。但是，我无法在页面上阻止它，因为 Global.asax 首先收到错误并导致页面错误。如何检查此字符串并停止处理？

```
Error Message: System.FormatException: Invalid length for a Base-64 char array. at System.Convert.FromBase64String(String s) at System.Web.UI.ObjectStateFormatter.Deserialize(String inputString) at System.Web.UI.ObjectStateFormatter.System.Web.UI.IStateFormatter.Deserialize(String serializedState) at System.Web.UI.Util.DeserializeWithAssert(IStateFormatter formatter, String serializedState) at System.Web.UI.HiddenFieldPageStatePersister.Load()

Form Values: 
advsearch:1
keywords:
ctl00$footer1$ddlcurrency:1
ctl00$cpmaincontent$ddlcategory:170
ctl00$cpmaincontent$ddlsubcategory:0
ctl00$cpmaincontent$ddlsortby:0
ctl00$ucfooter$ddlcurrency:1
__viewstate:/...
__eventvalidation:/...
ctl00$footer1$sitepath:1
ctl00$ucheader$hdnsplitedval:1
ctl00$ucheader$txtsearch:1
ctl00$ucheader$btnsearch:search
ctl00$cpmaincontent$txtkeyword:1
ctl00$cpmaincontent$btnsearch:1
ctl00$cpmaincontent$uccolleft$hfcatname:1
ctl00$cpmaincontent$uccolleft$hfsubcatname:0
ctl00$ucfooter$sitepath:-1'<-------- 
```

# meteor - 如何使用 MongoLab 远程连接或 RockMongo 连接到我的 Meteor 生产数据库？

> ID：15295881
> 
> 赞同：1
> 
> 时间：2013-03-08T14:10:05.310
> 
> 标签：meteor

“meteor mongo --url”生成的URL只工作1分钟，我怀疑这些服务需要稍后重新连接。片刻之后，我在 MongoLab 中收到以下错误：

![在此处输入图像描述](../Images/f10154110d3ea4275833a472b8844b0e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T09:03:42.367

对于 Meteor.com 托管的应用程序，您可以简单地使用：

```
meteor mongo <your-meteor-app's-sub-domain>.meteor.com 
```

或者，如果您有一个域（cname）设置指向您的流星应用程序，您可以使用该域，如果您使用密码进行部署，那么您将被要求输入该密码。

注意：Meteor 现在有开发者账户，所以授权将通过它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T18:02:26.963

mongodb 进程从 10gen 运行原始 mongodb，meteor 所做的`meteor mongo --url`只是为您提供它用来以 URI 形式连接到它的内容。

您可能想要检查您的服务器是否有其他可能阻止连接的进程，例如防火墙。

您没有提供有关您的设置的太多信息，但是如果您在通常的端口 3000 上访问您的流星项目，`meteor run`使用端口 3002 连接到它，而不是屏幕截图中的 27107。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-17T14:03:21.210

对于 Meteor.com 托管的应用程序，您可以简单地使用：

```
meteor mongo --url <your-meteor-app's-sub-domain>.meteor.com 
```

它会给你一个具有以下格式的 URL：

```
mongodb://<user>:<pass>@<server adress>:<port>/<database> 
```

例如，在 Robomongo 中，您需要拆分字符串并将它们粘贴到相应的字段中。

但是，您只能使用该 URL 一分钟，之后该 URL 不正确，您将无法连接。

# php - ical文件是否必须有结束日期？

> ID：15295887
> 
> 赞同：3
> 
> 时间：2013-03-08T14:10:23.270
> 
> 标签：php, icalendar

我目前正在用 php 编写一个 .ics 文件。我想知道是否`VEVENT`总是需要有一个结束日期？

比如……这是允许的吗？

```
BEGIN:VEVENT
UID:d3f760e29fa3f482199f8ed0663d5cf7@mydomain.com
DTSTAMP:20130308T140833Z
DTSTART:20130404T053000Z
DTEND:
SUMMARY:Title of the entry
DESCRIPTION:Something something something …
END:VEVENT 
```

或者这个……</p>

```
 BEGIN:VEVENT
 UID:d3f760e29fa3f482199f8ed0663d5cf7@mydomain.com
 DTSTAMP:20130308T140833Z
 DTSTART:20130404T053000Z
 SUMMARY:Title of the entry
 DESCRIPTION:Something something something …
 END:VEVENT 
```

感谢您的帮助和提示。

*我只是问这个，因为有些事件是开放式的，我不知道何时设置结束日期？*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T08:29:22.447

规范中更精确的部分是：[3.6.1。](https://www.rfc-editor.org/rfc/rfc5545#section-3.6.1)声明的[事件组件](https://www.rfc-editor.org/rfc/rfc5545#section-3.6.1)

> 对于“VEVENT”日历组件指定具有 DATE 值类型但没有“DTEND”或“DURATION”属性的“DTSTART”属性的情况，事件的持续时间被视为一天。对于“VEVENT”日历组件指定具有 DATE-TIME 值类型但没有“DTEND”属性的“DTSTART”属性的情况，事件在“DTSTART”属性指定的相同日历日期和时间结束。

在您的情况下，当您希望从现在开始并且看不到结束的事件时，规范中没有规定。

# c++ - 一维数组衰减为指针，但二维数组不这样做，为什么？

> ID：15295897
> 
> 赞同：8
> 
> 时间：2013-03-08T14:11:07.797
> 
> 标签：c++, c, pointers

有人可以向我解释为什么从技术上讲二维数组实际上并没有衰减到，`int**`而当你有一个一维数组时，你确实会得到指针衰减到`int*`（如果你有数组`int`）。

我知道指针衰减是什么，但我不明白为什么二维数组没有表现出这种衰减？

对于刚接触 C 或 C++ 的人来说，这是一个常见的困惑，但我发现自己也经常被它绊倒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T14:14:13.423

它们有不同的内存布局。二维数组是一块连续的内存，`int**`而是一个指针数组。使用 2D 数组，到某个位置的偏移量计算为`rownum * collength + colnum`（或反之亦然，具体取决于您如何标记行/列）。这不适用于`int**`，它实际上会产生两次内存读取；首先获取列指针，然后从该内存的偏移处读取数据。

顺便说一句，这种不同的布局是为什么您必须在接受二维数组的函数中声明数组维度（除了最左边的）；否则编译器不可能生成代码来计算偏移量。

下面是一张内存布局图的尝试`int**`。左列是一个连续的指针数组，其中每个指针都包含一块连续的内存与数据的地址。请注意，每列中的数据不必具有相同的长度（尽管这对于代码的可读性可能不一定是一件好事）：

```
int **array; 
int i, j;
int cntr = 1;
array = malloc( 3 * sizeof( int* ));
for ( i = 0; i < 3; i++ ) {
   array[i] = malloc( 4 * sizeof( int ));
   for ( j = 0; j < 4; j++ )
      array[i][j] = cntr++;
   } 
```

给出这样的东西：

```
array ==> |addr1|  ==>  [1,2,3,4]
          |addr2|  ==>  [5,6,7,8]
          |addr3|  ==>  [9,10,11,12] 
```

相比之下，这就是布局的样子`int[3][4]`。括号仅显示每列数据的逻辑中断。整数值在内存中是连续的：

```
int array[3][4];
int i, j;
int cntr = 1;
for ( i = 0; i < 3; i++ )
   for ( j = 0; j < 4; j++ )
      array[i][j] = cntr++; 
```

给出这样的东西：

```
array ==> [1,2,3,4][5,6,7,8][9,10,11,12] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T14:39:39.053

模式是“N-element array of `T`”类型的表达式将被转换为“pointer to `T`”类型的表达式。如果`T`是一个数组类型，那么你会得到一个指向数组的指针。给定一个像这样的声明

```
T arr[M][N]; 
```

该表达式`arr`的类型为“N 元素数组的 M 元素数组`T`”。除非它是 、 或 一元运算符的操作数`sizeof`，`_Alignof`否则`&`它将被转换为“指向 N 元素数组的指针`T`”或类型的表达式`T (*)[N]`。

如有疑问，用英文写出类型，如“四元素数组五元素数组六元素数组`int`”，然后将第一个“n元素数组”替换为“指针”，给出“指向`int`“：”的 6 元素数组的 5 元素数组的指针

```
Declaration                Expression          Type              Decays to
-----------                ----------          ----              ---------
int arr[4][5][6];                 arr          int [4][5][6]     int (*)[5][6]
                               arr[i]          int [5][6]        int (*)[6]
                            arr[i][j]          int [6]           int *
                                 &arr          int (*)[4][5][6]  n/a 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-08T14:34:45.240

将二维数组转换为指向其第一个元素的指针的结果是指针，而不是数组。由于它不是数组，因此不会进一步转换。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-08T14:14:35.623

它确实腐烂。类型为“T 数组”的表达式衰减为指向其第一个元素的指针。对于 的二维数组`T`，第一个元素的类型为`T`。所以：

```
int arr[5]; 
```

在大多数情况下，`arr`具有“指向`int`”的类型。现在将**相同**的规则应用于二维数组：

```
int arr2[5][5]; 
```

在这里，`arr2`具有类型“指向 5 数组的指针`int`”。请注意，此对象的类型**不是**“数组`T`”，因此它不会进一步衰减。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-08T14:13:52.603

人们可能会认为 if `int* i`==`int i[5]`比`int** i`==是常见的错误，`int i[5][5]`但由于两个原因，它并非如此。首先，an`int**`是[指向指针的指针](http://www.eskimo.com/~scs/cclass/int/sx8.html)，与数组的布局方式无关，其次，2D 数组实际上是内部的 1D 数组，它的作用是将第二个数组并排放置。

这意味着在`[2][2]`内部数组中正在创建一个数组，`[4]`当您尝试访问时，它将`[0][0]`被翻译成`[0]`，`[0][1]`将被翻译成`[1]`，`[1][0]`将被翻译成`[2]`并将`[1][1]`被翻译成`[3]`

例子：

```
#include <iostream>

void Print(int* i, int element)
{
    std::cout << i[element] << std::endl;
}

int main()
{
    int i[5][5];

    i[2][2] = 125;

    Print((i[0]), 12);
} 
```

这将打印 125，因为我设置`[2][2]`为 125，这将被视为等于，`12`因为第一个`[0]`将占据 0-4，`[1]`将占据 5-10，依此类推。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-08T14:15:01.557

二维数组是数组*的数组*。

`T`在大多数情况下，“数组”被转换为“指针” `T`，因此“数组`T[N]`”被转换为“指针`T[N]`”。

由于一个内存表示

```
int arr[M][N]; 
```

完全不同于

```
int **dptr = malloc(M*sizeof *dptr);
for(int i = 0; i < M; ++i) {
    dptr[i] = malloc(N*sizeof *dptr[i]); 
```

an`int[M][N]`甚至不能转换为`int**`.

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-08T14:14:57.760

二维数组是一个连续的内存块。将其作为二维数组访问时，您需要行长才能从列跳到列。指向指针的指针正是如此。如果第一个指针是指向第二维数组的指针数组，它可以模拟 2D 数组，但它与 2D 数组的连续内存块完全不同。

# php - wordpress 简码查询

> ID：15295900
> 
> 赞同：1
> 
> 时间：2013-03-08T14:11:13.363
> 
> 标签：php, wordpress

我是系统管理员，对php知之甚少，希望能在这里得到帮助。

我的 wordpress 博客中有以下简码

```
$wp_query = new WP_Query(array(
        'post_type' => array('page'),
        'showposts' => $limit,
        'orderby' => $orderby,
        'order' => $order
)); 
```

目前这个短代码列出了所有页面，有一种方法可以在数组特定的页面 ID 中设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:31:15.427

你应该试试这个

```
$wp_query = new WP_Query(
array(
    'post_type' => array('page'),
    'post__in' => array( 2, 5, 12, 14, 20 ),
    'showposts' => $limit,
    'orderby' => $orderby,
    'order' => $order 
```

如果您需要更多帮助，可以[在 wp_query 文档中搜索](http://codex.wordpress.org/Class_Reference/WP_Query#Post_.26_Page_Parameters)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:16:51.337

尝试这个

```
 $include = array(1,3,8,98,13);
 $wp_query = new WP_Query(
        array(
            'post_type' => array('page'),
            'showposts' => $limit,
             'post__in'=>$include,
            'orderby' => $orderby,
            'order' => $order)); 
```

where`$include`是您希望包含的页面数组。

# ruby-on-rails - 在 rails 中将数据导出到 csv (railscasts #362)

> ID：15295901
> 
> 赞同：1
> 
> 时间：2013-03-08T14:11:13.440
> 
> 标签：ruby-on-rails, csv, railscasts

SO中有很多关于rails中的csv导出的问题，但我没有找到解决我的问题的问题。我正在尝试在我的 rails 应用程序中导出模型的所有实例，并且我正在关注[Ryan Bates 的 RailsCast #362](http://railscasts.com/episodes/362-exporting-csv-and-excel)，但现在我遇到了生成的 CSV 的问题。

这是我在模型控制器中的索引操作（`@bookstore`在另一个操作中设置，在 a 中使用`before_filter`）：

```
def index
  @books = @bookstore.books
  respond_to do |format|
    format.html
    format.csv { render text: @books.to_csv }
  end
end 
```

我在 Book Class ( `book.rb`) 中有这个方法：

```
def self.to_csv
  CSV.generate do |csv|
    csv << column_names
    all.each do |book|
      csv << book.attributes.values_at(*column_names)
    end
  end
end 
```

问题是当我尝试打开 /bookstores/1/books.csv 我得到这个：

`#<Book:0x007f7f755252a0>,#<Book:0x007f7f75524c38>,#<Book:0x007f7f755245f8>,#<Book:0x007f7f75523fe0>,#<Book:0x007f7f75523978>,#<Book:0x007f7f75523130>,#<Book:0x007f7f755227d0>,#<Book:0x007f7f75522190>,#<Book:0x007f7f75521b78>,#<Book:0x007f7f7552c2f8>`

我不知道出了什么问题，并且对 Ruby On Rails 几乎没有经验。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T04:06:59.270

我遇到了同样的问题。我发现我的类方法 to_csv 甚至没有被调用。我可以删除它并获得相同的输出。

我通过重新启动服务器“解决”了这个问题。在那之后， to_csv 开始被正确调用，并且事情正常进行。

railscast 第 362 集确实提到了重新启动服务器，但没有明确说明代码在您这样做之前将无法工作。

> 一旦我们重新启动服务器以便它获取 csv 库，我们应该能够查看我们的 CSV 数据。

[railscast 第 362 集] [http://railscasts.com/episodes/362-exporting-csv-and-excel](http://railscasts.com/episodes/362-exporting-csv-and-excel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:21:43.190

在 railscast 中，它说：

```
format.csv { send_data @products.to_csv } 
```

你为什么不这样做？

如果这不起作用，您能否尝试`@books`使用以下代码收集您的对象？我很感兴趣它是否会有所作为：

```
Book.where(:bookstore_id => @bookstore.id) 
```

它不应该，但你似乎以某种方式得到了一系列，`@books.each {|b| array << b.to_s}`我很好奇为什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-10T18:38:12.513

有同样的问题，按照这个评论，它现在可以工作了

[http://railscasts.com/episodes/362-exporting-csv-and-excel?view=comments#comment_162272](http://railscasts.com/episodes/362-exporting-csv-and-excel?view=comments#comment_162272)

# c# - 如何在 DataTemplate 中进行元素到元素绑定

> ID：15295908
> 
> 赞同：1
> 
> 时间：2013-03-08T14:11:24.707
> 
> 标签：c#, xaml, windows-8, windows-store-apps, callisto

我有一个名为 FlipView 的控件

> 图像翻转视图

它位于其父 FlipView 的 DataTemplete 下，名为

> 翻转视图

我有一个控件，它是名为 imageFlipView 的兄弟控件

> 图像指标

现在，imageIndicator 需要 Element-to-Element 绑定，但不能在 DataTemplate 中工作。这是代码

```
 <FlipView
            x:Name="flipView"
            AutomationProperties.AutomationId="ItemsFlipView"
            AutomationProperties.Name="Item Details"
            TabIndex="1"
            Grid.RowSpan="2"
            ItemsSource="{Binding Source={StaticResource itemsViewSource}}">

            <FlipView.ItemContainerStyle>
                <Style TargetType="FlipViewItem">
                    <Setter Property="Margin" Value="0,137,0,0"/>
                </Style>
            </FlipView.ItemContainerStyle>

            <FlipView.ItemTemplate>
                <DataTemplate>
                    <UserControl Loaded="StartLayoutUpdates" Unloaded="StopLayoutUpdates">
                        <ScrollViewer x:Name="scrollViewer" Style="{StaticResource HorizontalScrollViewerStyle}" Grid.Row="1">
                                <StackPanel Orientation="Vertical" Grid.Column="0" Loaded="StackPanel_Loaded_1">
                                    <TextBlock FontSize="30" FontFamily=" Tahoma" FontWeight="Normal" Text="{Binding Title}" TextWrapping="Wrap"/>
                                    <FlipView x:Name="imageFlip" Loaded="imageFlip_Loaded_1" Visibility="Visible" Margin="0,0,0,10" VerticalAlignment="Top" Height="515" >
                                        <Image x:Name="image1" Width="400" HorizontalAlignment="Left" Margin="0,0,0,10" Stretch="Uniform" Source="{Binding ImagePath1}" VerticalAlignment="Top"/>
                                        <Image x:Name="image2" Width="350" HorizontalAlignment="Left" Margin="0,0,0,10" Stretch="Uniform" Source="{Binding ImagePath1}" VerticalAlignment="Top"/>
                                        <Image x:Name="image3" Width="300" HorizontalAlignment="Left" Margin="0,0,0,10" Stretch="Uniform" Source="{Binding ImagePath1}" VerticalAlignment="Top"/>
                                        <Image x:Name="image4" Width="250" HorizontalAlignment="Left" Margin="0,0,0,10" Stretch="Uniform" Source="{Binding ImagePath1}" VerticalAlignment="Top"/>
                                    </FlipView>
                                    <callisto:FlipViewIndicator x:Name="imageIndicator" FlipView="{Binding ElementName=imageFlip}"/>
                                </StackPanel>
                        </ScrollViewer>
                    </UserControl>
                </DataTemplate>
            </FlipView.ItemTemplate>
        </FlipView> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T21:29:01.533

答案很简单。你的第二个`FlipView`应该来自另一个`ObservableList`，就像第一个一样`FlipView`。不同之处在于第二个项目源必须在数据类中。

# jquery - Jquery DOM 操作 - 改变跨度

> ID：15295909
> 
> 赞同：0
> 
> 时间：2013-03-08T14:11:26.843
> 
> 标签：jquery, html

我有以下 HTML：

```
<div id="open_19" class="smile">
      <span><img src="http://localhost:3000/frontent_images/smiley.png"> </span>
      <span id="sum_19" class="value">12</span>
 </div> 
```

当用户单击该 id 时，第一个 span 应将其 src 更改为另一个图像 (smiley_light.png)。我在达到那个跨度来改变它的价值时遇到了问题。

如果我使用：

```
jQuery('.smile span img').mouseover(function(){
//jQuery(this).attr('src','/frontent_images/smiley_light.png'); 
```

});

它有效，但我需要直接控制它，因为我需要以编程方式更改该跨度。

我尝试了以下方法，它只添加了另一个跨度而不是覆盖现有的跨度：

```
$("#open_" + mainid[1]).next("span").attr('src','/frontent_images/smiley_light.png'); 
```

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:23:21.627

如果您捕获的点击在 div 上，您可以这样做：

```
$("#open_19").click(function(){
  $("img", this).attr("src", "/frontent_images/smiley_light.png");
}); 
```

这样，您只捕获触发点击事件的元素内的 img 元素。

顺便说一句，这条线：

```
$("#open_" + mainid[1]).next("span").attr('src','/frontent_images/smiley_light.png'); 
```

您正在尝试选择与您的 div 处于同一级别的 span 元素。在你的 html 中你没有那个。此外，span 元素没有 src 属性。

[这是该代码的 JSFiddle](http://jsfiddle.net/jVAme/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:16:57.917

```
jQuery('.smile span img').mouseover(function(el){
   jQuery(el).attr('src','/frontent_images/smiley_light.png');
}); 
```

不确定这是否有效，但尝试将元素传递给函数并稍后使用它而不是“this”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:19:09.997

您所做的将为您单击的 div 创建一个新的跨度兄弟。. . . . 尝试将 next() 更改为 children() 并使用伪选择器 'span:first'

```
 $("#open_" + mainid[1]).children("span:first").attr('src','/frontent_images/smiley_light.png'); 
```

# android - 如何获取子活动以扩展 MapActivity

> ID：15295912
> 
> 赞同：1
> 
> 时间：2013-03-08T14:11:43.033
> 
> 标签：android, google-maps, extend, mapactivity, subactivity

所以我有 a`MainActivity`和 a`SubActivity`并且我想要`SubActivity`扩展 a `MapActivity`。但是程序不允许我这样做。它说`MapActivity cannot be resolved to a type`。如何让 SubActivity 扩展 MapActivity？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:16:28.000

检查您的构建路径，您需要 Google API，它包含您需要的“maps.jar”；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:14:43.607

`Google Map API`是一个单独的 SDK。在包管理器中选择它或将项目的构建目标设置为 Google API。

# charts - 如何格式化人力车图上的 Y 轴值

> ID：15295914
> 
> 赞同：5
> 
> 时间：2013-03-08T14:11:45.857
> 
> 标签：charts, d3.js, rickshaw

我想使用 [http://code.shutterstock.com/rickshaw/的 Javascript 图表](http://code.shutterstock.com/rickshaw/)

我让它为一个例外工作，当我的值小于 0.00000100 时，y 轴值以科学格式显示，例如 2e-7 表示值 0.00000020

如何让它显示 0.00000020 而不是 2e-7 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-07T22:07:09.847

我没用过人力车，但是看主页上的这个例子：

```
var y_axis = new Rickshaw.Graph.Axis.Y( {
        graph: graph,
        orientation: 'left',
        tickFormat: Rickshaw.Fixtures.Number.formatKMBT,
        element: document.getElementById('y_axis'),
} ); 
```

看起来您可以将函数传递给 tickFormat。在这种情况下[formatKMBT](https://github.com/shutterstock/rickshaw/blob/master/src/js/Rickshaw.Fixtures.Number.js)被传递，它看起来像这样：

```
Rickshaw.Fixtures.Number.formatKMBT = function(y) {
    var abs_y = Math.abs(y);
    if (abs_y >= 1000000000000)   { return y / 1000000000000 + "T" }
    else if (abs_y >= 1000000000) { return y / 1000000000 + "B" }
    else if (abs_y >= 1000000)    { return y / 1000000 + "M" }
    else if (abs_y >= 1000)       { return y / 1000 + "K" } 
    ...ect 
```

从这里，您可以使用 d3 内置的[数字格式化程序](https://github.com/mbostock/d3/wiki/Formatting)或自己滚动。例如：

```
function yAxisFormat(d){ return d.toFixed(8); } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-03T05:54:06.910

这是一个例子：

```
var yAxis = new Rickshaw.Graph.Axis.Y( {
            graph: graph,
            tickFormat: function(y){return y.toPrecision(3)}
        } ); 
```

你可以在那里放任何你想要的功能。

# vbscript - objselection.font.name 更改为 calibri

> ID：15295916
> 
> 赞同：3
> 
> 时间：2013-03-08T14:11:55.113
> 
> 标签：vbscript, rtf, outlook-2007, word-2007, signatures

我遇到了一个让我头疼的问题。我已经构建了一个 VBScript 签名创建脚本来从 AD 中提取用户信息并将其用作我们所有用户的签名。它工作得很好，我很满意。除了一个问题。我已经搜索并且 - 虽然我发现[其他人有同样的问题](http://social.technet.microsoft.com/forums/en-US/officesetupdeploylegacy/thread/1b00c4d5-fb18-4b82-95ee-33447b130f66)- 我无法找到任何解决方案。

* * *

首先，关于脚本的一些背景：

该脚本设置为使用以下对象来配置签名，根据[此处](http://msdn.microsoft.com/en-us/library/office/ff822704.aspx)的 Microsoft 文章。

```
Word.Application.EmailOptions.EmailSignature.EmailSignatureEntries 
```

然后，在整个脚本中，我必须多次更改字体。为此，我使用这样的行：

```
objSelection.Font.Name = "Times New Roman" 
```

这对我和我们的大多数用户来说都很好。但是，我的一位技术人员之前已将他在 Word 中的默认字体更改为 Times New Roman。当我为他运行脚本时，应该是 TNR 的行反而显示为 Calibri。当我们运行 Office 2007 时，Word 中的原始默认字体是 Calibri。我测试了在我自己的 PC 和另一台 PC 上更改默认字体，并且两次都能够复制该问题。

我之前链接到的 technet 海报指出，原始文档的所有字体都是正确的。只有当“EmailSignatureEntries”将其保存为 RTF 和 HTML 以用作签名时，字体才被混淆。

我真的很难过。任何帮助，将不胜感激！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-17T07:10:08.963

在为我的公司创建一个新的、自动填充广告的签名时，我偶然发现了同样的问题。从我在互联网上发现的内容以及还建议的内容来看，当使用与 Word 在其 Normal.dot(m) 中的相同字体制作签名时，就会出现问题。

例如; 我的公司希望 Arial 10 作为 Word、Excel 和 Outlook 中的默认字体。所以当然我修改了所有需要的文件并安排了一个 GPO 来完成这个。一切正常，Word 等将 Arial 作为默认字体。

现在，当我运行我的 signature.vbs 脚本时，该脚本还指出字体应该是 Arial，结果总是奇怪的是 Calibri 作为字体。我玩了一会儿，发现我可以使用除 Arial 之外的任何其他字体，它会工作，除了 Arial。

这让我发疯了 2 天，然后它击中了我；- 如果我在用户配置文件中放置一个临时 normal.dot(m)（使用 Calibri 作为默认字体），然后使用 VBS 创建签名，然后在配置文件中放置正确的 Normal.dot(m)，该怎么办？

事实证明，这成功了。因此，我取出 Normal.dot(m) 的文件放置 GPO，并将临时副本、运行 vbs、最终副本集成到我的批处理脚本中，该脚本也触发了 signature.vbs。

这是我的批处理代码，您可能必须根据自己的需要进行调整，但它提供了基本概念。我已经添加了评论的英文翻译，所以你不必学习荷兰语:)

希望这可以帮助您和仍在寻找“解决方案”的任何人。

```
@echo off
REM Verwijder alle default word templates in het userprofile (niet meer via GPO)
REM Remove all default Word templates in the userprofile (no longer through GPO)
DEL /F /Q %userprofile%\AppData\Roaming\Microsoft\Sjablonen\Normal.dotm
DEL /F /Q %userprofile%\AppData\Roaming\Microsoft\Templates\Normal.dotm
DEL /F /Q %userprofile%\AppData\Roaming\Microsoft\Sjablonen\NormalEmail.dotm
DEL /F /Q %userprofile%\AppData\Roaming\Microsoft\Templates\NormalEmail.dotm

REM Check of het Handtekeningscript al gelopen heeft, zoja ga over tot plaatsen juiste normal.dotm
REM Check if the signaturescript already ran, if so copy the proper normal.dotm
IF EXIST %homeshare%\pvfsig.txt goto copynormal

REM Plaats een tijdelijke Normal.dotm ivm een conversie issue als je default Arial hebt (wordt Calibri)
REM Copy a temporary Normal.dotm in the profile so the conversion problem with the Default font won't occur.
COPY /Y /Z \\pvf\netlogon\Scripts\huisstijl\normal_met_calibri\Normal.dotm %userprofile%\AppData\Roaming\Microsoft\Sjablonen\Normal.dotm
COPY /Y /Z \\pvf\netlogon\Scripts\huisstijl\normal_met_calibri\Normal.dotm %userprofile%\AppData\Roaming\Microsoft\Templates\Normal.dotm
COPY /Y /Z \\pvf\netlogon\Scripts\huisstijl\normal_met_calibri\NormalEmail.dotm %userprofile%\AppData\Roaming\Microsoft\Sjablonen\NormalEmail.dotm
COPY /Y /Z \\pvf\netlogon\Scripts\huisstijl\normal_met_calibri\NormalEmail.dotm %userprofile%\AppData\Roaming\Microsoft\Templates\NormalEmail.dotm

REM Start Handtekening VBS script om de handtekening te genereren
REM Start signature VBS script to generate the signature
cscript \\pvf\netlogon\scripts\huisstijl\outlooksig_new.vbs

REM Verwijder tijdelijke Normal.dotm bestanden
REM Remove the temporary Normal.dotm files
DEL /F /Q %userprofile%\AppData\Roaming\Microsoft\Sjablonen\Normal.dotm
DEL /F /Q %userprofile%\AppData\Roaming\Microsoft\Templates\Normal.dotm
DEL /F /Q %userprofile%\AppData\Roaming\Microsoft\Sjablonen\NormalEmail.dotm
DEL /F /Q %userprofile%\AppData\Roaming\Microsoft\Templates\NormalEmail.dotm

REM Creeer een check bestand op de Homedirectory v/d gebruiker
REM Create a checkfile in the users homedirectory
echo pvf standaard handtekening is aangemaakt > %homeshare%\pvfsig.txt

REM Kopieeren van juiste normal.dotm bestanden (met Arial)
REM Copy the proper normal.dotm files into place
:copynormal
COPY /Y /Z \\pvf\netlogon\Scripts\huisstijl\normal_pvf_huisstijl\Normal.dotm %userprofile%\AppData\Roaming\Microsoft\Sjablonen\Normal.dotm
COPY /Y /Z \\pvf\netlogon\Scripts\huisstijl\normal_pvf_huisstijl\Normal.dotm %userprofile%\AppData\Roaming\Microsoft\Templates\Normal.dotm
COPY /Y /Z \\pvf\netlogon\Scripts\huisstijl\normal_pvf_huisstijl\NormalEmail.dotm %userprofile%\AppData\Roaming\Microsoft\Sjablonen\NormalEmail.dotm
COPY /Y /Z \\pvf\netlogon\Scripts\huisstijl\normal_pvf_huisstijl\NormalEmail.dotm %userprofile%\AppData\Roaming\Microsoft\Templates\NormalEmail.dotm

:end
EXIT 
```

# sas - SAS - 无论输入数据集如何都创建数据集

> ID：15295917
> 
> 赞同：3
> 
> 时间：2013-03-08T14:12:07.090
> 
> 标签：sas

我真的不知道如何表达我的问题，但它就在这里。即使输入数据集丢失或不存在，我想知道是否可以在 SAS 中创建所需的数据集。

因此，如果您查看下面的代码，即使虚拟输入数据集不存在，我也想创建具有指定属性的测试数据集。这可能吗？

提前致谢。

```
Data test;  
 set dummy;
 label subjid = "Subject ID" 
      name   = "Name"
      age    = "Age";
Run; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T15:35:51.520

检查数据集是否存在，如果存在则运行数据步骤，如果不存在则创建一个空数据集。首先创建一个空版本的虚拟数据集可能更容易，然后根据第一个是否存在从一个或另一个读取。

```
%macro ds_create(dsn);
%if %sysfunc(exist(&dsn.)) %then %do;
    data test;
    set &dsn.;
    run;
%end;
%else %do;
    data test;
    attrib 
        subjid  length=$20  label="Subject ID"
        name    length=$20  label="Name"
        age     length=8   label="Age";
    stop;
    run;
%end;
%mend ds_create;

%ds_create(dummy); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T16:47:21.600

PROC APPEND 是这里的另一个解决方案。您确实需要定义可变长度和/或格式。

```
Data test;
label subjid = "Subject ID" 
      name   = "Name"
      age    = "Age";
length subjID 8 name $20 age 3;
stop;
Run;

proc append base=dummy data=test force;
run; 
```

这会将零行附加到 Dummy，并在需要时创建它。如果您尝试获取标签，更好的方法是在此步骤之后在 PROC DATASETS 中执行此操作（因为如果 DUMMY 已经存在，我认为不会应用标签）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T16:02:16.503

基思的回答很好。创建测试表的另一种方法：

```
proc sql;
create table test 
    ( subjid char(20) label="Subject ID" 
        ,name char(20) label="Name"
        ,age num label="Age"
    );
quit; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-07T09:33:06.827

```
data TEST;
  attrib SUBJID  length=$20  label="Subject ID"
         NAME    length=$20  label="Name"
         AGE     length=8    label="Age";
  %sysfunc(ifc(%sysfunc(exist(DUMMY)), set DUMMY, stop));
run; 
```

# java - 是否从 Spring 3.2.1 中删除了 RequestMapping

> ID：15295919
> 
> 赞同：0
> 
> 时间：2013-03-08T14:12:12.163
> 
> 标签：java, spring, spring-mvc

RequestMapping 是否从 Spring 3.2.1 中删除。

我正在开发一个新项目并尝试使用 Spring 3.2.1 ...但是我的 IDEA 和 Maven 在 Spring 中找不到 RequestMapping .. 下面是我的控制器：

```
package org.sample.jquery.controller;

import org.apache.log4j.Logger;
import org.springframework.stereotype.Controller;
import org.springframework.web.servlet.ModelAndView;
import static org.apache.log4j.Logger.getLogger;

@Controller
@RequestMapping("/request")
public class RequestController {

    private static final Logger LOGGER = getLogger(RequestController.class);

    @RequestMapping(method = RequestMethod.GET)
    public ModelAndView displayRequestPage() {

        return new ModelAndView("input");

    }

} 
```

这是我的 pom.xml.... 看起来 RequestMapping 已从 Spring 3.2.1 中删除

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>jQueryExamples</groupId>
    <artifactId>jQueryExamples</artifactId>
    <packaging>war</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>jQueryExamples Maven Webapp</name>
    <url>http://maven.apache.org</url>

    <developers>
        <developer>
            ...
        </developer>
    </developers>

    <properties>
        <java-version>1.7</java-version>
        <springframework-version>3.2.1.RELEASE</springframework-version>
        <org.slf4j-version>1.6.6</org.slf4j-version>
    </properties>

    <dependencies>

        <!--  the following is for spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${springframework-version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${springframework-version}</version>
            <exclusions>
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

        <!--  This is for logging with log4j -->
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>

        <!-- this is for junit testing -->

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
    <build>
        <finalName>jQueryExamples</finalName>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:16:44.027

它应该在

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-web</artifactId>
    <version>${springframework-version}</version>
</dependency> 
```

3.2.1 中有一个错误，[在 3.2.2 中修复](https://jira.springsource.org/browse/SPR-10218)，其中`spring-webmvc`依赖项没有引入`spring-web`and `spring-context`，因此您必须手动声明依赖项。

它是`org.springframework.web.bind.annotation.RequestMapping;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:53:05.153

这是由已针对 3.2.2 修复的 3.2.1 中的问题引起的： [https ://jira.springsource.org/browse/SPR-10218](https://jira.springsource.org/browse/SPR-10218)

也就是说，由于您使用的是@RequestMapping，因此您的 pom 应该包含对 spring-web 的依赖，而不是依赖从 spring-webmvc 到 spring-web 的传递依赖。因此，我建议在任何情况下都添加该依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:19:21.420

[根据 JavaDoc： http](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/) ://static.springsource.org/spring/docs/3.2.x/javadoc-api/，RequestMapping 注释似乎是 Spring 3.2.1 的一部分

也许您需要将 Spring MVC 库添加到您的项目中？

# c# - 如何将 xaml 中的值分配给不可绑定的属性

> ID：15295924
> 
> 赞同：2
> 
> 时间：2013-03-08T14:12:32.810
> 
> 标签：c#, wpf, xaml, mvvm

我如何将以下代码编写为 XAML

假设我们有这段代码

```
 var myValue = someMethodeReturn(); // the return will fit

        // could also be an other nonbindable property
        var myTextBlock = new TextBlock();
        myTextBlock.Inlines = myValue; 
```

你将如何转换

```
 var myValue = someMethodeReturn(); 
```

和

```
myTextBlock.Inlines = myValue; 
```

仅作为**XAML**

第一部分肯定看起来像，第二部分看起来像 `???={Binding myProperty}` ，`<TextBlock.Inlines><???/></TextBlock.Inlines>` 但`???`会是什么样子？

视觉结果应该是这样的（如果你执行你的解决方案）

```
 <TextBlock  HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="LightGray" TextWrapping="WrapWithOverflow" >
        <TextBlock.Inlines>
            <Run>meine sehr sehr sehr sehr sehr sehr sehr sehr sehr sehr sehr  lange run 1</Run>
            <Run Foreground="Green" FontFamily='Palatino Linotype' Typography.Variants='Superscript'>meine run2</Run>
            <Run>meine sehr sehr sehr sehr sehr sehr sehr sehr sehr sehr sehr  lange run</Run>
            <Run Foreground="LimeGreen" Background="Yellow">meine run3</Run>
            <Run>meine sehr sehr sehr sehr sehr sehr sehr sehr sehr sehr sehr  lange run</Run>
        </TextBlock.Inlines>
    </TextBlock> 
```

我在 Tages`ItemsControl`之间进行了测试，`TextBlock.Inlines`但它默认返回 TextBlocks，我无法设置`Run`或`InLine`作为`ItemTemplate`

我想我只需要一个`Control`返回 a`List<Inline>`但我不知道哪个`Control`能够做到这一点

任何建议，将不胜感激

# 我尝试了以下想法

**第一的**

```
<TextBlock  HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="LightGray" TextWrapping="WrapWithOverflow" >
    <TextBlock.Inlines>
        <ContentControl Content="{Binding myBinding}"/>
    </TextBlock.Inlines>
</TextBlock> 
```

仅返回“（Auflistung）”作为文本

**第二**

```
 <TextBlock  HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="LightGray" TextWrapping="WrapWithOverflow" >
        <TextBlock.Inlines>
            <ItemsControl ItemsSource="{Binding myBinding}"/>
        </TextBlock.Inlines>
    </TextBlock> 
```

返回一个包含在 a 中的 TextBox 列表`ContenPresenter`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:42:45.033

要添加字符串值，您可以使用

```
myTextBlock.Inlines.Add(new Run(myValue)); 
```

如果 myValue 是一个数组循环并添加多个运行元素

运行类的 Msdn 文档[http://msdn.microsoft.com/en-us/library/system.windows.documents.run.aspx](http://msdn.microsoft.com/en-us/library/system.windows.documents.run.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:35:23.193

我的想法是使用 ItemsControl 并将 ItemPanel 设置为 WrapPanel，然后为每个项目插入 TextBlocks 或 ContentPresenters。原来那些 TextBlocks 不会像我预期的那样包装得很好：

![在此处输入图像描述](../Images/bd233b714223a85ebe0a421243102765.png)

好吧，您至少有一个 ViewModel，那么在将文本项提交到源集合之前如何将它们通过绞肉机？之后看起来很正确：

![在此处输入图像描述](../Images/ea3f881d8a13ca3f8512f0341db38038.png)

现在，如果它**感觉**也不错；）！也许你可以使用其中的一些，至少。

视图模型：

```
public class ViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    private ObservableCollection<MyRunModel> _myRuns = new ObservableCollection<MyRunModel>();
    public ObservableCollection<MyRunModel> MyRuns { get { return _myRuns; } set { _myRuns = value; OnPropertyChanged("MyRuns"); } }

    public ViewModel()
    {
        List<MyRunModel> runs = new List<MyRunModel>();
        runs.Add(new MyRunModel() { Text = "Meine sehr sehr sehr sehr sehr sehr sehr sehr sehr sehr sehr lange run1" });
        runs.Add(new MyRunModel() { Text = "Meine run2", Foreground = ForegroundDescription.HighlightDark });
        runs.Add(new MyRunModel() { Text = "Meine sehr sehr sehr sehr sehr sehr sehr sehr sehr sehr sehr lange run3" });
        runs.Add(new MyRunModel() { Text = "Meine run4", Foreground = ForegroundDescription.HighlightLight, Background = BackgroundDescription.Highlight });
        runs.Add(new MyRunModel() { Text = "Meine sehr sehr sehr sehr sehr sehr sehr sehr sehr sehr sehr lange run5" });

        CommitMyRuns(runs);
    }

    /// <summary>
    /// Splits up every run into words (delimited by space), and adds the parts 
    /// to the collection that can be bound to the UI. Retains formatting information.
    /// </summary>
    /// <param name="runs"></param>
    private void CommitMyRuns(List<MyRunModel> runs)
    {
        int runCount = runs.Count;
        for (int i = 0; i < runCount; i++)
        {
            string[] parts = runs[i].Text.Split(' ');
            int partCount = parts.Length;
            for (int j = 0; j < partCount; j++)
            {
                bool isLast = j == parts.Length - 1;
                MyRunModel run = new MyRunModel()
                {
                    Text = parts[j] + (isLast ? string.Empty : " "),  // add space that was lost in split
                    Foreground = runs[i].Foreground, // keep formatting
                    Background = runs[i].Background
                };
                MyRuns.Add(run);
            }
            MyRuns.Add(new MyRunModel() { Text = " " }); // add a space after each of the original runs (unformatted)
        }
    }

}
public class MyRunModel
{
    public string Text { get; set; }
    // do not use UI types (e.g. Brush) directly in viewmodel
    public ForegroundDescription Foreground { get; set; }
    public BackgroundDescription Background { get; set; }
}

public enum ForegroundDescription
{
    None = 0,
    HighlightDark,
    HighlightLight
}

public enum BackgroundDescription
{
    None = 0,
    Highlight
} 
```

xml:

```
<Window.DataContext>
    <local:ViewModel />
</Window.DataContext>

<Window.Resources>
    <SolidColorBrush x:Key="ForegroundHighlightDarkBrush" Color="Green" />
    <SolidColorBrush x:Key="ForegroundHighlightLightBrush" Color="LimeGreen" />
    <SolidColorBrush x:Key="BackgroundHighlightBrush" Color="Yellow" />
</Window.Resources>

<Grid>
    <TextBlock>
        <TextBlock.Inlines>
            <ItemsControl ItemsSource="{Binding MyRuns}" HorizontalContentAlignment="Stretch">
                <ItemsControl.ItemTemplate>
                    <DataTemplate DataType="{x:Type local:MyRunModel}">
                        <TextBlock x:Name="presenter" TextWrapping="Wrap" Text="{Binding Text}"/>
                        <DataTemplate.Triggers>
                            <DataTrigger Binding="{Binding Foreground}" Value="HighlightDark">
                                <Setter TargetName="presenter" Property="TextElement.Foreground" Value="{StaticResource ForegroundHighlightDarkBrush}" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Foreground}" Value="HighlightLight">
                                <Setter TargetName="presenter" Property="TextElement.Foreground" Value="{StaticResource ForegroundHighlightLightBrush}" />
                            </DataTrigger>
                            <DataTrigger Binding="{Binding Background}" Value="Highlight">
                                <Setter TargetName="presenter" Property="TextElement.Background" Value="{StaticResource BackgroundHighlightBrush}" />
                            </DataTrigger>
                        </DataTemplate.Triggers>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl>
        </TextBlock.Inlines>
    </TextBlock>
</Grid> 
```

子类化文本框以使内联可绑定可能是一种可能性。看到[这个答案](https://stackoverflow.com/a/5488319/385995)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T23:09:53.710

创建可绑定`Inlines`的附加属性，如下所示：

**可绑定的.cs**

```
using System.Collections.Generic;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;

namespace WpfApplication
{
    public static class Bindable
    {
        public static readonly DependencyProperty InlinesProperty = DependencyProperty.RegisterAttached("Inlines", typeof(IEnumerable<Inline>), typeof(Bindable), new PropertyMetadata(OnInlinesChanged));

        private static void OnInlinesChanged(DependencyObject source, DependencyPropertyChangedEventArgs e)
        {
            var textBlock = source as TextBlock;

            if (textBlock != null)
            {
                textBlock.Inlines.Clear();
                var inlines = e.NewValue as IEnumerable<Inline>;
                if (inlines != null)
                    textBlock.Inlines.AddRange(inlines);
            }
        }

        [AttachedPropertyBrowsableForType(typeof(TextBlock))]
        public static IEnumerable<Inline> GetInlines(this TextBlock textBlock)
        {
            return (IEnumerable<Inline>)textBlock.GetValue(InlinesProperty);
        }

        public static void SetInlines(this TextBlock textBlock, IEnumerable<Inline> inlines)
        {
            textBlock.SetValue(InlinesProperty, inlines);
        }
    }
} 
```

并像这样使用它：

**MyViewModel.cs**

```
using System.Collections.Generic;
using System.Windows;
using System.Windows.Documents;
using System.Windows.Media;

namespace WpfApplication
{
    public class MyViewModel
    {
        // This is against MVVM principle - to contain views (Inlines) in view model, but I don't want to complicate by creating ViewModel class for each Inline derived class.
        public IEnumerable<Inline> Inlines { get; private set; }

        public MyViewModel()
        {
            this.Inlines = new Inline[]
            {
                new Run("meine sehr sehr sehr sehr sehr sehr sehr sehr sehr sehr sehr  lange run 1"),
                new Run("meine run2") { Foreground = Brushes.Green, Typography = { Variants = FontVariants.Superscript } },
                new Run("meine sehr sehr sehr sehr sehr sehr sehr sehr sehr sehr sehr  lange run"),
                new Run("meine run3") { Foreground = Brushes.LimeGreen, Background = Brushes.Yellow },
                new Run("meine sehr sehr sehr sehr sehr sehr sehr sehr sehr sehr sehr  lange run")
            };
        }
    }
} 
```

**主窗口.xaml**

```
<Window x:Class="WpfApplication.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication">
    <Window.DataContext>
        <local:MyViewModel/>
    </Window.DataContext>
    <TextBlock local:Bindable.Inlines="{Binding Inlines}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Background="LightGray" TextWrapping="WrapWithOverflow"/>
</Window> 
```

# css - 背景图像 css 无法在 IE7 和 8 中显示

> ID：15295928
> 
> 赞同：2
> 
> 时间：2013-03-08T14:12:51.243
> 
> 标签：css, internet-explorer-8, internet-explorer-7

出于某种原因，我在 IE 7 和 IE8 中显示背景图像时遇到问题。在 IE9 和更现代的浏览器中，它可以工作并输出以下内容：

![正确的图像](../Images/dcce6e41cb75ed9966d3b594fa45f35f.png)

（CSS 在 Login 周围生成灰色边框元素）

但是在 IE7 和 IE8 中，我得到的只是以下内容：

![IE8 和 7 显示](../Images/6ca1d495258ddfc39fb7d7041bee2d9f.png)

我不记得与我制作的交叉兼容的其他网站有这个问题，但我现在再次尝试避免使用图像来节省页面加载时间。

我的CSS如下：

```
#contentright .panel {
   background-image: url("/incl/images/bg_panel200.gif");
   background-repeat: no-repeat;
}

#contentright .panelbottom {
background-image: url("/incl/images/bg_panelbottom200.gif");
background-position: center top;
background-repeat: no-repeat;
} 
```

我做了一个快速的谷歌搜索，一些以前的 Stack Overflow 答案建议将 CSS 修改为以下格式：

```
 background: url('/incl/images/bg_panelbottom200.gif') no-repeat center top; 
```

但是，这似乎也不起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:25:37.143

您需要指定`height`div 背景的类型才能在旧版本的 IE 中显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:35:23.227

尝试使用`display:block`元素并设置`width`和`height`也使用`border:none; background-color:transparent`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:43:08.507

由于这是我的第一个响应式设计，我不得不使用媒体查询来根据屏幕/视口大小调整 css。似乎只有 "media="'screen'" 和 "media='print'" 声明在 IE7 和 IE8 中有效，这意味着我的 : 声明不起作用。这就是我的背景图像不显示的原因，因为 IE7 和8 不理解这个声明，因此忽略它。感谢其他有效答案的家伙，但它们是我已经知道并尝试过的东西。

# android - 使用 jsoup 在 div 类中选择一个 div 类

> ID：15295929
> 
> 赞同：0
> 
> 时间：2013-03-08T14:12:53.620
> 
> 标签：android, jsoup, html

```
<div class="main-banner">
<div class="row" style="height:298px;">

<div class="row" style="margin-top:40px;">
    <div class="seven columns">
        some other data,div and css blocks....
        </div>
    </div>

</div>

</div>
</div> 
```

要选择我可以使用的顶部 div

```
 Element title = doc.select("div.productTitle").first(); 
```

1.  我需要选择第 4 个 div（class='seven columns'）并在 a 中显示数据`webview`，那么它的语法是什么？

2.  在另一个内部级别 div 中，有一些`<select> <options>` 对。我怎样才能将它用于`Array`using `jsoup`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:30:25.553

我不清楚你的问题。你可以再详细一点吗？你知道如何选择一个 div，那你为什么不呢？

```
Elements div = doc.select("div.ClassName"); 
```

如果你有一个看起来像这样的结构，并且想要选择第四个：

```
<div class="row">
    <div>Number one!</div>
    <div>Number two!</div>
    <div>Number three!</div>
    <div>Number four!</div>
    <div>Number five!</div>
</div> 
```

您可以使用：

```
Element fourthDiv = doc.select("div.row div:eq(4)"); 
```

这样你就可以很容易地嵌套选择！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:44:17.540

您可以使用**[try.jsoup.org](http://try.jsoup.org/)**来帮助测试和调试您的 HTML 和选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T12:30:02.607

使用这个网站来获取你的语法[http://jsoup.org/cookbook/extracting-data/selector-syntax](http://jsoup.org/cookbook/extracting-data/selector-syntax)如果你没有得到你的结果，让我知道..这是一个例子，如何使用 jsoup mto pasre data

```
 public class ListShow extends Activity {
String url;
String DetailText;
TextView tv1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    tv1 = (TextView) findViewById(R.id.textView1);

    try {
        Document doc = Jsoup.connect("http://www.srmcem.ac.in")
                .timeout(10000).get();

        Elements link = doc
                .select(".sidebar > ul > li > div > marquee > a[href]");
        String url1 = "";
        String text = "";
        String detail = "";
        for (Element element : link) {
            text = element.text();

            if (element != null) {
                url1 = element.absUrl("href");
            }
            detail += text + "\n" + url1 + "\n\n";
        }

        DetailText = detail.toString();
    } catch (Exception e) {
        // TODO: handle exception
    }
    tv1.setText(DetailText);

}
} 
```

# c++ - 转换向量 为 const unsigned char*

> ID：15295930
> 
> 赞同：1
> 
> 时间：2013-03-08T14:12:58.030
> 
> 标签：c++, opencv, casting, char, base64

我正在尝试创建一个应用程序，其中 OpenCV 中的 Mat 图像使用`cv::imencode`base64 字符串进行编码。为此，我必须将 a 转换`vector<unsigned char>`为 a `const unsigned char*`。

我怎样才能做到这一点？

```
vector<unsigned char> buffer;

vector<int> compression_params;
compression_params.push_back(CV_IMWRITE_PXM_BINARY);
compression_params.push_back(0);

if(!cv::imencode(".ppm", desc, buffer, compression_params)){
    printf("Image encoding failed");
}

// This generates a error
string output = base64_encode(buffer.data(), buffer.size());
printf("Output: %s", output.c_str()); 
```

这是我得到的错误：`EXC_BAD_ACCESS (code=1, address=0x2ffd7000)`

# 更新

* * *

现在它不再产生任何错误，但是在转换的某个地方出现了问题；解码后的输出与输入不一样，它主要由A字符组成。这是当前脚本：

```
vector<unsigned char> buffer;

vector<int> compression_params;
compression_params.push_back(CV_IMWRITE_PXM_BINARY);
compression_params.push_back(1);

if(!cv::imencode(".pgm", desc, buffer, compression_params)){
    printf("Image encoding failed");
}

string output = base64_encode(buffer.data(), buffer.size());
printf("Output: %s", output.c_str()); 
```

*我不认为这应该是另一个问题，因为我的猜测是 vector 到 const unsigned char 之间的转换会弄乱结果；[base64_encode](http://www.adp-gmbh.ch/cpp/common/base64.html)上次工作。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:48:32.633

一个主要问题是：

```
const char* s = base64_encode(reinterpret_cast<const unsigned char*>(buffer.data()), buffer.size()).c_str(); 
```

在这里，`base64_encode`函数返回一个`std::string`. 然后调用该`c_str()`方法，该方法返回一个指向底层缓冲区的指针。但是，`std::string`then 立即超出范围，给您留下一个悬空的指针。

此外，根本不需要 reinterpret_cast。由于悬空指针，您遇到了未定义的行为，这与演员表无关。

你应该把它改成

```
std::string s = base64_encode(buffer.data(), buffer.size()); 
```

# c# - 将输出限制为最新记录，如何？

> ID：15295931
> 
> 赞同：0
> 
> 时间：2013-03-08T14:13:00.583
> 
> 标签：c#, vb.net

概念性问题：我在后台有一项服务不时向我输出一些对象，所以我想在 GUI 中向用户显示输出。我应该使用哪个控件？Listview，因为每个处理的项目一行就可以了，还是文本框输出？

我应该在哪里保留服务中的对象？在队列中？但是我怎样才能轻松地将它绑定到控件以便删除最旧的控件（FIFO）？任何优雅的想法如何最好地实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T05:55:00.737

我只是添加了我的解决方案，效果很好：

```
public class SlidingBuffer<T> : IEnumerable<T>
{
private readonly Queue<T> _queue;

public int QueueMax { get; private set; }

public SlidingBuffer(int maxCount)
{
    QueueMax = maxCount;
    _queue = new Queue<T>(maxCount);
}

public void Add(T item)
{
    if (_queue.Count >= QueueMax)
    {
        _queue.Dequeue();
    }
    _queue.Enqueue(item);
}

public IEnumerator<T> GetEnumerator()
{
    return _queue.GetEnumerator();
}

IEnumerator IEnumerable.GetEnumerator()
{
    return GetEnumerator();
}
} 
```

和项目的类

```
public class SlidingItem
{
public SlidingItem(string text, int number)
{
    Text = text;
    Number = number;
    TimeStamp = DateTime.Now;
    Id = ++ItemsProcessed;
}

private static int _itemsProcessed;

public int ItemsProcessed
{
    get { return _itemsProcessed; }
    set { _itemsProcessed = value; }
}

public int Id { get; set; }

public string Text { get; set; }

public int Number { get; set; }

public DateTime TimeStamp { get; set; }

public string ShowMembers()
{
    return string.Format("{0}\t{1}\t{2}\t{3}", TimeStamp.ToString("G", CultureInfo.CurrentCulture), Number, Text, Id);
}

public override string ToString()
{
    return ShowMembers();
}
} 
```

最后绑定到一个ListBox：

```
BindingSource bindingSource = new BindingSource();
bindingSource.DataSource = _controller.SlidingBuffer;
listBoxOutput.DataSource = bindingSource;
listBoxOutput.DisplayMember = "ShowMembers"; 
```

# html - HTML & CSS 3 在锚点或使用位置使其“正确”具有不同的含义？

> ID：15295934
> 
> 赞同：2
> 
> 时间：2013-03-08T14:13:06.983
> 
> 标签：html, css, seo, css-position

**编辑：**
如果不是日期，我需要描述怎么办？（比我应该使用段落，并且验证段落不能在锚中，因为段落是块级）
**编辑结束**

我相信你看标题没有明白我想要什么。
我不确定如何写一句话来总结我的问题。

所以，这是我的问题：
我的锚里面有 3 个不同的东西 > 图标、标题和日期。每个都在不同的跨度。
我不知道它是否是正确的方法。

```
<ul id="m-items">
    <li>
        <a href="/post.php?name=ahf-_" class="m-item-header clear">
            <span class="m-item-icon"></span>
            <span class="m-item-title">ah%f#-$%^&amp;()_!</span>
            <span class="m-item-date">17 Feb 2013</span>
        </a>
    </li>
    <li>
        <a href="/post.php?name=d-3" class="m-item-header clear">
            <span class="m-item-icon"></span>
            <span class="m-item-title">d-3</span>
            <span class="m-item-date">16 Feb 2013</span>
        </a>
    </li>
</ul> 
```

[上面代码的完整jsfiddle](http://jsfiddle.net/FeMZN/)

我有另一种方法，我认为这是正确的方法，但我不确定......
我的第二种方法是使用带有两个元素的 div，anchor 和另一个包含文本的 div。
每个都将处于绝对位置。

```
<ul id="m-items">
    <li>
        <div class="m-item-header">
            <a href="/post.php?name=ahf-_"></a>
            <div class="m-item-header-content clear">
                <div class="m-item-icon"></div>
                <div class="m-item-title">ah%f#-$%^&amp;()_!</div>
                <div class="m-item-date">17 Feb 2013</div>
            </div>
        </div>
    </li>
    <li>
        <div class="m-item-header">
            <a href="/post.php?name=d-3"></a>
            <div class="m-item-header-content clear">
                <div class="m-item-icon"></div>
                <span class="m-item-title">d-3</span>
                <span class="m-item-date">16 Feb 2013</span>
            </div>
        </div>
    </li>
</ul> 
```

[上面代码的完整jsfiddle](http://jsfiddle.net/eeXyB/1/)

我想知道哪种方法是正确的以及为什么（对于 SEO 和 HTML 本身）。

**编辑：**
如果不是日期，我需要描述怎么办？（比我应该使用段落，并且验证段落不能在锚中，因为段落是块级）
**编辑结束**

~谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T14:19:43.453

这几乎取决于你的口味。

由于以下原因，我更喜欢第一个：

*   更少的标记 -> 更好的概览和可维护性以及更小的文件大小
*   没有绝对定位 - 应尽可能避免（代码的性能和健壮性）
*   语义上更清晰 - 元素属于链接（如果您的标记是这种情况）

从 SEO 的角度来看，第一个解决方案显然更好，因为元素和链接之间的相关性很明确，而第二个代码示例则不是这样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T14:20:20.623

不确定 SEO 的含义是什么（如果确实有的话），但两者对您的网站行为有不同的含义。

第二个示例中的那个锚标记将是不可点击的。如果其中没有某种内容，它对用户来说将显得毫无意义，并且您试图实现的导航方面（如指向另一个页面的 href 所证明的那样）将不起作用。

**编辑**

这就是我没有先看小提琴的结果。是的，以上是错误的，您通过将锚点叠加在其他内容上来实现这一点。我同意上面的海报，将您的内容包裹在锚元素中在语义上是正确的，这就是我的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:21:06.317

两者都不是*正确的*，但两者都不是*错误*的。从可用性的角度来看，我强烈支持第一个，因为项目数据都包含在链接中，因此更易于导航。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T14:26:18.960

出于 SEO 目的以及最佳实践使用锚标签以及您试图实现的第二个是“错误的”，因为 div 和两个跨度不包含在锚标签中。

也就是说，您绝对应该使用第一个，因为它在语义上更清晰易读，我以最小的努力理解那里发生的事情。除此之外，跨度都包含在锚标记内，这对于 SEO 和 HTML 的正确使用在语法上都是正确的。

除了使用 UL 和 LI 并使您的图标替代“项目符号”点之外，我想不出另一种方法来做到这一点。

# regex - 我如何排除或包含某些行

> ID：15295936
> 
> 赞同：0
> 
> 时间：2013-03-08T14:13:11.363
> 
> 标签：regex, expect, cisco

这是 cisco 命令的输出`SWEs-elmPCI-A-01#show cdp neighbors`

```
Capability Codes: R - Router, T - Trans Bridge, B - Source Route Bridge
                  S - Switch, H - Host, I - IGMP, r - Repeater, P - Phone,
                  D - Remote, C - CVTA, M - Two-port Mac Relay

Device ID        Local Intrfce     Holdtme    Capability  Platform  Port ID
SWEx-elmPCI-A-02.lssh.com
                 Gig 2/0/1         137             R S I  WS-C3750X Gig 1/0/1
SWEx-elmPCI-A-02.lssh.com
                 Gig 2/0/1         138             R S I  WS-C3750X Gig 1/0/1

SWEa-elmPCI-02   Gig 1/0/4         169               T    AIR-LAP12 Gig 0
SWEa-elmPCI-01   Gig 1/0/9         170               T    AIR-LAP11 Gig 0 
```

我怎样才能得到只包含行`SWEx-elmPCI-A-02.lssh.com`及其详细信息的行`Gig 2/0/1 137 R S I WS-C3750X Gig 1/0/1`

`Gig 2/0/1 137 R S I WS-C3750X Gig 1/0/1` 注意： and`Gig 2/0/1 138 R S I WS-C3750X Gig 1/0/1`和`S - Switch, H - Host, I - IGMP, r - Repeater, P - Phone,` and之前有空格`D - Remote, C - CVTA, M - Two-port Mac Relay`

**我可以使用 expect 或 ciso 正则表达式。我正在使用 expect 脚本在 cisco 上执行一些任务，所以我也可以在那里使用一些命令（如包含、排除）或在我的预期代码中。我只需要搜索 SWEx 及其对应的像 Gig 1/0/4 这样的条目，以便我可以将 Gig 和 1/0/4 放入某个变量中，并将其用于每个 SWEx.. 行**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:22:13.473

像下面这样的东西应该可以工作：

```
/^(SWEx-elmPCI-A-02\.lssh\.com)\s+(.*?)\s{2,}(\d+)\s+(.*?)\s{2,}([^\s]+)\s+(.*?)$/gsm 
```

将创建 6 个组：

1.  设备ID
2.  本地接口
3.  保持时间
4.  能力
5.  平台
6.  端口号

* * *

## [演示](http://regex101.com/r/eI6kH5)

* * *

## 火柴

**比赛 1**

1.  `SWEx-elmPCI-A-02.lssh.com`
2.  `Gig 2/0/1`
3.  `137`
4.  `R S I`
5.  `WS-C3750X`
6.  `Gig 1/0/1`

**比赛 2**

1.  `SWEx-elmPCI-A-02.lssh.com`
2.  `Gig 2/0/1`
3.  `138`
4.  `R S I`
5.  `WS-C3750X`
6.  `Gig 1/0/1`

# c++ - 是否可以让程序每次开始都使用 md5 散列更改？

> ID：15295939
> 
> 赞同：0
> 
> 时间：2013-03-08T14:13:23.563
> 
> 标签：c++, winapi, md5

每次打开都能自动更改他自己的md5哈希的简单程序？有一个像“WinMD5”这样的程序可以扫描程序的 md5 哈希。我的问题是我们是否可以在每次打开程序时更改它。我知道如果我们添加一些简单的东西/或删除一些。我们可以重新合作，堆放程序，然后我们得到一个新的 md5 哈希。但是如果我们只用几行代码就能做到这一点，程序就会自动改变。这将会非常棒 ！有什么改变吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:30:10.343

它可以做到，但不是微不足道的。您需要打开程序的可执行文件，了解文件的内部结构（[Portable Executable](http://en.wikipedia.org/wiki/Portable_Executable)，PE），并在其中更改一些不会影响程序执行的内容。ELF 二进制格式（在 Linux 中使用）支持所有类型的注释和符号以及不直接影响程序执行的额外字段，可能 PE 文件也有它们可以使用。您还可以使用您在程序中专门为此目的创建的一些静态全局变量，因为该变量的初始值存储在可执行文件中，位于程序的数据段上。

微小的变化足以完全改变 MD5 哈希值（MD5 就是这样设计的）。因此，每次执行程序时在 .exe 文件中增加一些 4 字节计数器就足够了（重复执行哈希需要 2³² 次）。使用 8 个字节使得在人类生存期内不可能重复。

正如我所说，这并非微不足道，但也不是某些人可能认为的那么困难或不可能。注意运行程序的用户必须有修改二进制可执行文件的权限（也许Windows会要求管理员权限？我不知道，我不是Windows人）。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:32:56.973

打开文件或执行文件对其内容没有影响。在 Windows 下（但不是在 Unix 下），可以获得可执行文件的全名。如果您知道有无意义字节的地方，您可以打开文件并修改它们。（例如，COFF 格式有一个四字节的时间戳，您可以将其设置为几乎任何东西。或者您可以在构建程序时创建许多无用的符号，并修改它们的名称。）

当然，这假设用户没有写保护可执行文件。但是，我认为这种情况很少发生，除非在开发环境中。

# python - 列表/数组表示[]和{}有什么区别？

> ID：15295940
> 
> 赞同：1
> 
> 时间：2013-03-08T14:13:23.973
> 
> 标签：python, python-2.7, python-3.x

和有什么区别：

```
dictionary = [] 
```

和

```
dictionary = {} 
```

假设字典有字符串内容？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T14:13:51.623

在第一种情况下，您正在制作 a`list`而另一种情况下，您正在制作`dict`. `list`对象是[序列](http://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)，而`dict`对象是[映射](http://docs.python.org/2/library/stdtypes.html#mapping-types-dict)。看看[python 类型](http://docs.python.org/2/library/stdtypes.html#built-in-types)页面。

基本上，将“映射”顺序整数（从 0 开始）列出到某个对象。这样，它们的行为更像是其他语言中的动态数组。事实上，Cpython 将它们实现为 C 中的过度分配数组。

`dict`将可散列键映射到对象。它们是使用哈希表实现的。

* * *

另请注意，从 python2.7 开始，您也可以使用`{}`来创建另一种（基本）类型的集合。审查：

```
[] #empty list
{} #empty dict
set() #empty set

[1] #list with one element
{'foo':1} #dict with 1 element
{1} #set with 1 element

[1, 2] #list with 2 elements
{'foo':1, 'bar':2} #dict with 2 elements
{1, 2} #set with 2 elements. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:10:05.350

在 python 2.x 上

```
>>> type([])
<type 'list'>
>>> type({})
<type 'dict'>
>>> 
```

在 python 3.x 上

```
>>> type([])
<class 'list'>
>>> type({})
<class 'dict'>
>>> 
```

# asp.net - Ranet Olap 枢轴网格

> ID：15295943
> 
> 赞同：0
> 
> 时间：2013-03-08T14:13:27.723
> 
> 标签：asp.net, silverlight, pivot, olap, pivotviewer

我想使用 Ranet Olap PIVOT GRID 的单元格编辑回写功能（[Ranet Olap PIVOT GRID 回写](http://www.galantis.com/ranet/writeback.html)）。他们没有为此提供适当的文档。如果有人对此控件有任何经验，请帮助我。

提前致谢。里约若泽。

去回答...

1.  创建写回分区 a) 启动 SQL Server Business Intelligence Development Studio (BIDS) b) 在 SQL Server BIDS 中打开数据库 Adventure Works (File -> Open -> Analysis Services Database...) c) 在树解决方案资源管理器中选择多维数据集 Adventure Works d) 在选项卡上选择度量组销售目标 e) 为她创建写回分区 (调用本地菜单写回设置...) f) 处理多维数据集 Adventure Works

接下来，运行 Ranet OLAP Sample Web Application 并传递设置：

1.  设置连接字符串 a) 点击选项卡 [Configurations] 并设置 OLAPConnectionString 例如：Provider=MSOLAP.4;Data Source=server\sql2008r2;Catalog=Adventure Works DW;

2.  设置 Mdx 查询 a) 单击选项卡 [Mdx 查询] 并复制

    SELECT HIERARCHIZE([Date].[Calendar].[Calendar Quarter].Members) DIMENSION PROPERTIES PARENT_UNIQUE_NAME, HIERARCHY_UNIQUE_NAME, CUSTOM_ROLLUP, UNARY_OPERATOR, KEY0 ON 0, HIERARCHIZE(CrossJoin([Employee].[Employees].[(All)].成员，[Sales Territory].[Sales Territory].Levels(0).Members)) DIMENSION PROPERTIES PARENT_UNIQUE_NAME, HIERARCHY_UNIQUE_NAME, CUSTOM_ROLLUP, UNARY_OPERATOR, KEY0 ON 1 FROM [Adventure Works] WHERE ([Measures].[Sales Amount Quota])单元格属性 BACK_COLOR、CELL_ORDINAL、FORE_COLOR、FONT_NAME、FONT_SIZE、FONT_FLAGS、FORMAT_STRING、VALUE、FORMATTED_VALUE、UPDATEABLE、ACTION_TYPE

3.  设置更新脚本 a) 单击选项卡 [Mdx 更新脚本] 并复制

    UPDATE CUBE [Adventure Works] SET ( [Measures].[Sales Amount Quota] ,<%[Date].[Calendar]%> ,<%[Employee].[Employees]%> ,<%[Sales Territory].[销售区域]%> ) = <%newValue%>

在 <%[Dimension].[Hierarchy]%> - 表格可见部分的单元格坐标。如果您删除行或列的层次结构 - 它应该从更新脚本中删除。不可见层次结构的坐标由明确定义或由任何算法定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:01:39.470

设置示例在 PDF 文档[Ranet OLAP：Editing data in the pivot grid](http://www.galantis.com/download?did=114)

该文档包括以下部分：

1.  为 Adventure Works 数据库设置 Writeback 分区
2.  设置 MDX 查询和更新脚本
3.  在透视网格中编辑数据
4.  代码示例

Silverlight 使用Ranet OLAP 2.5 版本。

# c++ - C++中稀疏矩阵的转置

> ID：15295944
> 
> 赞同：1
> 
> 时间：2013-03-08T14:13:31.367
> 
> 标签：c++, sparse-matrix

我对 C++ 很陌生。在这里，我试图找出稀疏矩阵的转置。这是代码：

```
#include<iostream>
using namespace std;
class transposeM{
    int m1[20][20],m2[20][20],i,j,row,column,t;
public:
    void read(){
        t=0;
        cout<<"Enter the number of row: \n";
        cin>>row;
        cout<<"enter the number of column: \n";
        cin>>column;

        for(i=0;i<row;i++){
            for(j=0;j<column;j++){
                cin>>m1[i][j];

                if(m1[i][j]){
                    t++;
//                  cout<<"first t is:"<<t;
                //if non zero
                            m2[t][0]=i+1;
                            m2[t][1]=j+1;
                            m2[t][2]=m1[i][j];

                }

            }
        }

        m2[0][0]=row;
        m2[0][1]=column;
        m2[0][2]=t;
    }

    void displaysp(){
cout<<"sparse matrix is: \n";
        for(i=0;i<=t;i++){
            for(j=0;j<3;j++){
                cout<<m2[i][j]<<" ";
            }
            cout<<"\n";
        }
    }

    void transpose(){
        int transpose[20][3];

                        transpose[0][0]=m2[0][0];
                        transpose[0][1]=m2[0][1];
                        transpose[0][2]=m2[0][2];
        cout<<"Transpose is: \n";
        int q=1;
        for(i=1;i<=column;i++){
            for(int p=1;p<=t;p++){
                if(m2[p][1]==i){
                    transpose[q][0]=m2[p][0];
                    transpose[q][1]=m2[p][1];
                    transpose[q][2]=m2[p][2];
                    q++;

                }
            }
        }

        for(i=0;i<=column;i++){
            for(j=0;j<3;j++){
                cout<<transpose[i][j]<<" ";
            }
            cout<<"\n";
        }

    }
    void display(){
        for(i=0;i<row;i++){
                for(j=0;j<column;j++){
                    cout<<m1[i][j]<<" ";

                }
                cout<<"\n";
            }

    }
};
int main(int argc,char ** argv){
    transposeM obj;
    obj.read();
    obj.display();
    obj.displaysp();
    obj.transpose();
    return 0;
} 
```

输出：

```
Enter the number of row: 
2
enter the number of column: 
2
0
1
2
0
0 1 
2 0 
sparse matrix is: 
2 2 2 
1 2 1 
2 1 2 
Transpose is: 
2 2 2 
2 1 2 
1 2 1 
```

但是出了点问题；读取矩阵并将其转换为稀疏矩阵就可以了。但是找出转置有一些逻辑错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T14:20:11.630

转置的简单代码片段是：（`transpose`将是 的转置`m2`）

```
for(i=0;i<column;i++) {
    for(j=0;j<row;j++) {
       transpose[i][j] = m2[j][i];
    }
} 
```

你有不必要的复杂的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:20:20.253

可以为您节省一些麻烦并帮助简化问题的方法是，当您转置矩阵时，您可以在您的情况下切换`row`和`column`索引`i`和`j`。因此，您可以编写一种`display()`方法并设置转置标志或参数，例如：

```
void displaysp()
{
    // m is the number of rows in matrix
    // n is the number of columns in matrix
    unsigned int tmpM=m, tmpN=n ; 

    if( transposeFlag )
    {
       tmpM = n ;
       tmpN = m ;
    }         

    for(unsigned i=0;i<tmpM;i++)
     {
        for(unsigned j=0;j<tmpN;j++)
        {
            if( transposeFlag )
            {
                cout<<m2[j][i]<<" ";
            }
            else
            {
               cout<<m2[i][j]<<" ";
            }
        }
        cout<<"\n";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:58:13.107

问题已解决，我贴出代码：

```
#include<iostream>
using namespace std;
class transposeM{
    int m1[20][20],m2[20][20],i,j,row,column,t;
public:
    void read(){
        t=0;
        cout<<"Enter the number of row: \n";
        cin>>row;
        cout<<"enter the number of column: \n";
        cin>>column;

        for(i=0;i<row;i++){
            for(j=0;j<column;j++){
                cin>>m1[i][j];

                if(m1[i][j]){
                    t++;
                            m2[t][0]=i+1;
                            m2[t][1]=j+1;
                            m2[t][2]=m1[i][j];

                }

            }
        }

        m2[0][0]=row;
        m2[0][1]=column;
        m2[0][2]=t;
    }

    void displaysp(){
cout<<"sparse matrix is: \n";
        for(i=0;i<=t;i++){
            for(j=0;j<3;j++){
                cout<<m2[i][j]<<" ";
            }
            cout<<"\n";
        }
    }

    void transpose(){
        int transpose[20][3];

                        transpose[0][0]=m2[0][1];
                        transpose[0][1]=m2[0][0];
                        transpose[0][2]=m2[0][2];
        cout<<"Transpose is: \n";
        int q=1;
        for(i=1;i<=column;i++){
            for(int p=1;p<=t;p++){
                if(m2[p][2]==i){
                    transpose[q][0]=m2[p][1];
                    transpose[q][1]=m2[p][0];
                    transpose[q][2]=m2[p][2];
                    q++;

                }
            }
        }

        for(i=0;i<=column;i++){
            for(j=0;j<3;j++){
                cout<<transpose[i][j]<<" ";
            }
            cout<<"\n";
        }

    }
    void display(){
        for(i=0;i<row;i++){
                for(j=0;j<column;j++){
                    cout<<m1[i][j]<<" ";

                }
                cout<<"\n";
            }

    }
};
int main(int argc,char ** argv){
    transposeM obj;
    obj.read();
    obj.display();
    obj.displaysp();
    obj.transpose();
    return 0;
} 
```

输出：

```
Enter the number of row: 
2
enter the number of column: 
3
0
1
2
0
0
2
0 1 2 
0 0 2 
sparse matrix is: 
2 3 3 
1 2 1 
1 3 2 
2 3 2 
Transpose is: 
3 2 3 
2 1 1 
3 1 2 
3 2 2 
```

# css - 简单的 css - 段落中的文本超出了框

> ID：15295948
> 
> 赞同：1
> 
> 时间：2013-03-08T14:13:46.840
> 
> 标签：css

我已经为段落元素设置了宽度和高度，但文本仍在框外而不是填充元素。示例：

```
<!DOCTYPE html>
<head>
<style>
p {  height: 500px;
     width: 800px;
  }
</style>
</head>
<body>

<p>
                            tekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekstteksttekst    
</p>
</body>
</html> 
```

如何使该文本留在 p 元素框中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T14:15:38.600

元素中文本的问题`<p>`在于它是一个巨大的单词，所以你应该使用类似的东西：`word-wrap: break-word;`这应该使它适合......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T14:16:58.027

你可以使用这种风格：

```
p {
  overflow-x: scroll;
} 
```

这不会像[@darkajax 的解决方案](https://stackoverflow.com/a/15295995/782609)那样破坏单词，而是添加一个水平滚动条。

# php - 用于从 Android 录制和传输音频的设计

> ID：15295957
> 
> 赞同：0
> 
> 时间：2013-03-08T14:13:59.787
> 
> 标签：php, android, mysql, audio, android-mediarecorder

我有两个 Android 设备（电话 A 和电话 B）和一个带有 MySQL 数据库的服务器。我想通过服务器使用麦克风从电话 A 向电话 B 发送音频消息。

一种想法是：

*   使用电话 A 的麦克风
*   将音频录制到 SD 卡中的文件中
*   获取此文件的字节并作为简单的文本消息发送到服务器
*   服务器将此数据存储在数据库中
*   电话 B 将轮询服务器并接收此数据
*   然后将字节写入新文件
*   然后用 MediaPlayer 播放

    1.  这个对吗？
    2.  字节有特殊字符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:17:04.927

您需要在电话 A 上捕获音频，并将其作为二进制数据发送到服务器。您可以使用简单的 POST 请求来执行此操作。

服务器应该将它存储到一个文件，而不是数据库——数据库应该只包含文件名和路径，加上一个 id。

电话 B 轮询/获取有关文件的推送通知。服务器使用 ID 从数据库中获取文件名并用于`passthru`提供文件。

# regex - 获取内容-多个替换

> ID：15295958
> 
> 赞同：1
> 
> 时间：2013-03-08T14:14:00.273
> 
> 标签：regex, powershell

起初：对不起我的英语不好。

问题：

1.  我有一个 .csv 文件，其中包含 30 个用户的名称、电子邮件地址等
2.  我有一个 hmtl（或 rtf 或 txt），其中包含名称 (NameOfUser) 和电子邮件地址 (EmailUser) 的占位符（文档中的某个位置，有时是多个）。
3.  我想为我想要的每个用户名/电子邮件阅读 csv 文件：a）用`NameOfUser`csv 文件的 $User.Username 条目替换 Word b）用 csv 文件的`EmailUser`$User.Email 条目替换 Word c ) 将包含新内容的新文件写入 \UNC\Username\New-html-file.htm

我的问题：如果我只更改一件事，姓名或电子邮件地址，则输出有效。如果我将第二个 -replace 放入 foreach-object 部分，则输出会导致错误。我必须更改 5 个不同的条目，并希望我可以在一个获取内容中修复它 | ..... 步。

脚本的一部分：

```
$userfile = import-csv \\the-fileserver\User.csv
foreach ($User in $Userfile) {

   Get-Content \\the-fileserver\File.htm | foreach-object { 
            $_ -replace 'Username', $User.Name 
            $_ -replace 'email-adresse', $User.Email

             } | set-content -path $NewHTMFile 
```

问题：每行在 $NewHTMFile 中出现 2 次（或更多等于 -replace 条目）：(

在此先感谢丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:19:43.023

尝试

```
...
Get-Content \\the-fileserver\File.htm | foreach-object { 
            $_ -replace 'Username', $User.Name -replace 'email-adresse', $User.Email }
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T14:41:16.373

未经测试，但我认为这应该有效，并避免在磁盘驱动器中进行一些咀嚼：

```
$userfile = import-csv \\the-fileserver\User.csv
$HTML = Get-Content '\\the-fileserver\File.htm'

foreach ($User in $Userfile)
  {
    $HTML -replace 'Username', $User.Name -replace 'email-adresse', $User.Email |
     set-content -path $NewHTMFile
  } 
```

# jquery - jQuery .on() 委托 mouseenter 和 mouseleave

> ID：15295960
> 
> 赞同：19
> 
> 时间：2013-03-08T14:14:04.377
> 
> 标签：jquery

[使用.on()](http://api.jquery.com/on/)委托多个事件的最佳方式是什么？

这是一个委托事件的语法：

```
$(document).on('mouseeenter','.foo', function(){}); 
```

这是多个事件的语法（未委托）：

```
$('.foo').on({
    mouseenter: function(){
        //stuff
    },
    mouseleave: function(){
        //stuff
    }
}); 
```

我想知道是否有更简洁的方法可以做到这一点：

```
$(document).on('mouseenter', '.foo', function(){})
           .on('mouseleave', '.foo', function(){}); 
```

如果我必须那样做，这没什么大不了的，我对它比什么都好奇。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-08T14:15:40.020

```
$(document).on({
    mouseenter: function(){
        //stuff
    },
    mouseleave: function(){
        //stuff
    }
}, '.foo'); 
```

# javascript - dojo/request/iframe 是如何工作的？

> ID：15295964
> 
> 赞同：1
> 
> 时间：2013-03-08T14:14:10.113
> 
> 标签：javascript, iframe, dojo

我在整个 Javascript/Dojo 世界中慢慢变得更好。但是，我对整个 dojo/request/iframe 业务感到困惑。我知道在 Javascript 中，出于安全原因，您只能连接到源服务器。这是给定的。然而，当人们开始考虑“使用 iframe 来解决这个问题”时，我会非常迷茫。

Dojo/resources/blank.html：

*   包含`<html><head><script>isLoaded = true;</script></head><body></body></html>`
*   需要由拥有您的应用程序的同一台服务器托管。因此，如果您使用 CDN 中的 dojo，您需要将这个 blank.html 文件保存在应用程序所在的同一台服务器上

该页面[http://livedocs.dojotoolkit.org/dojo/request/iframe](http://livedocs.dojotoolkit.org/dojo/request/iframe)解释了关于 iframe 的内容：

*   在发起调用页面的服务器以外的服务器上调用服务（跨域请求）。请注意，在这种情况下，无法读取响应正文：您可以发送数据，但无法获得任何回复。如果您需要访问返回数据，请参阅 dojo/request/script。

*   从表单上传文件（例如文件输入控件）。正常的 XHR 机制无法访问文件选择标签引用的文件数据作为安全措施。dojo/request/iframe 可以通过 IFrame 代理这些调用，从而仍然可以以异步方式进行文件上传。

一个空的 HTML 页面如何帮助我解决这个问题？（嗯，设置一个全局变量“isLoaded”...？）

此外，在上述两点解释您无法检索响应之后，文档继续：

*   发出请求以检索某些 XML 的示例如下所示：

所以……你*能*找回来吗？

我想我需要退后一步，真正理解整个“使用 iframe 绕过跨域请求”以及真正理解“正常 XHR 机制”（什么机制？）无法访问数据引用的问题选择标签（什么选择标签？请求正文中的数据不是吗？）可以通过 iFrame 代理这些调用（您的意思是设置 isLoaded 的单个空文件？！？）

我很困惑……迷路了。有人可以给我一点方向吗？

谢谢...

默克。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T17:36:02.260

好吧，我不知道该`blank.html`页面，但是我理解您问题的第二部分。据我所知，大多数（所有）浏览器都拒绝来自 XHR/JavaScript 的跨域请求，并且由于安全原因，它们也不能从文件上传表单元素发送数据。如果可能的话，黑客可以（通过注入一些 JavaScript）做一些可怕的事情，比如将数据发送到其他域或读取上传的文件。

要解决此问题，您可以使用 iframe。iframe 可以加载跨域页面，但问题是如果它是跨域请求，您不能简单地访问 iframe 的内容。但是，使用 JavaScript，您可以设置 iframe 的来源，因此您可以通过 iframe 发送数据。

文件也是一样，你不能直接发送它，但你可以通过 iframe 发送它们，因为你可以操纵 iframe 的作用（和发送数据）。

所以 TL;DR：浏览器会阻止您可以使用 JavaScript 执行的某些操作，例如：

*   通过 XHR 跨域发送数据
*   通过 XHR 读取文件数据
*   读取跨域的 iframe 数据

因此，您可以执行以下操作：

*   通过 iframe 发送跨域数据
*   通过 iframe 读取文件数据
*   读取不是跨域的 iframe

因此，只要不是跨域请求，您确实可以使用 iframe dojo 模块读取文件。

我希望我解释得足够好，可以理解。

# c# - 从 DataGrid 单元格复制文本

> ID：15295968
> 
> 赞同：7
> 
> 时间：2013-03-08T14:14:14.600
> 
> 标签：c#, wpf, mvvm, datagrid

我希望能够从 DataGrid Cell 中复制文本。

1.  第一个可能的解决方案可能是设置`SelectionUnit`为，`Cell`但这不是我的选择，因为我需要选择`FullRow`
2.  第二种可能的方法是`DataGridTemplateColumn`使用 readonly `TextBox`。但是样式有问题。我之前的问题：[DatagridCell 样式被 TextBox 样式覆盖](https://stackoverflow.com/q/15007273/1456174)。我需要为行中的文本提供非常明亮的颜色，但在所选行中非常暗。
3.  三是在 DataGrid 上设置 IsReadOnly="False" 并`EditingElementStyle`提供`DataGridTextColumn`

    ```
    <Style x:Key="EditingStyle" TargetType="{x:Type TextBox}">
    <Setter Property="IsReadOnly" Value="True"/>
    </Style>
    ...  
    <DataGridTextColumn ... EditingElementStyle="{DynamicResource EditingStyle}"/> 
    ```

    [但是，当内部文本框设置为只读时，WPF Datagrid Text Column 允许输入一个字符文本，](https://connect.microsoft.com/VisualStudio/feedback/details/624239/wpf-datagrid-text-column-allows-one-character-text-enter-when-the-internal-text-box-is-set-to-read-only)这是一个非常可怕的错误。

你知道一些不同的解决方案吗？或解决方法？谢谢你。

**编辑**

我注意到[*Extended WPF Toolkit*](http://wpftoolkit.codeplex.com/wikipage?title=DataGrid&referringTitle=Home)没有这个**错误**`DataGrid`，但它似乎有不同的结构，我无法应用我的 DataGrid 样式。[](http://wpftoolkit.codeplex.com/wikipage?title=DataGrid&referringTitle=Home)

 ***我注意到使用 ReadOnly TextBox 作为 DataGridColumn 的 EditingElementStyle 会带来更多问题。当您使用**OneWay**绑定时，无法将单元格设置为**Editing state**。例如，让用户覆盖DataGrid 中显示的某些实体的**ID**是不可接受的。所以它必须以某种方式只读或至少是**OneWay**绑定。

目前我对此根本没有解决方案。有没有其他方法可以让用户在选择并突出显示行时从单元格中复制？我没有注意到其他解决方案吗？谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T15:20:05.447

你可以做一些肮脏的事情来获取当前的单元格。在您的 xaml 中添加

```
<DataGrid GotFocus="DataGrid_GotFocus" KeyDown="DataGrid_KeyDown"> 
```

并在代码隐藏中

```
private void DataGrid_GotFocus(object sender, RoutedEventArgs e)
{
    if(e.OriginalSource is DataGridCell)
        _currentCell = (DataGridCell) e.OriginalSource;
}

private void DataGrid_KeyDown(object sender, KeyEventArgs e)
{
    if(e.Key == Key.C && (e.SystemKey == Key.LeftCtrl || e.SystemKey == Key.RightCtrl))
    {
         //Transform content here, like
         Clipboard.SetText(_currentCell.Content);
    }
} 
```

应该这样做，因为`GotFocus`每次在数据网格本身中更改选择时都会执行。***

# javascript - 顺序执行事件监听器，然后按回车键提交表单

> ID：15295972
> 
> 赞同：0
> 
> 时间：2013-03-08T14:14:31.753
> 
> 标签：javascript, html, google-maps-api-3

我有一个事件监听器和一个表单。当用户按下回车键时，两者都会启动。我想要的是当用户按下回车键时，第一个事件侦听器应该执行，然后是表单提交。那么该怎么做呢？

```
 google.maps.event.addListener(autocomplete, 'place_changed', function() {

    // fires when enter key is pressed
     infowindow.close();
      marker.setVisible(false);
      input.className = '';
      var place = autocomplete.getPlace();
      if (!place.geometry) {
        // Inform the user that the place was not found and return.
        input.className = 'notfound';
        return;
      }
    }

    and

    <form action="xyz.php" method="post">
    //submits when enter key is pressed
    <div id="searchWrapper" style="width:940px;margin-bottom:10px">

        <input name="txtSearch" type="text" id="txtSearch" class="search focus" placeholder="Where do you need parking?" value=<?php echo '"'.$str.'"'; ?> />

        <input class="dates search search-date" style="height:30px;background-image:url('images/sprite-master.png') ;background-position:-480px 0px; cursor:pointer;width:110px;" name="txtSearchStartDate" type="text" id="txtSearchStartDate" placeholder="today" enddate="txtSearchEndDate" />
        <input name="txtSearchEndDate" type="text" id="txtSearchEndDate" class="dates search search-date" placeholder="(optional)" />
        <input type="submit" value="  Search" id="btnSearch" class="btn btn-primary" />
         <input name="city" id="city" type="hidden" value="">
       <input name="state" id="state" type="hidden" value="">
       <input name="country" id="country" type="hidden" value="">
          <input name="lat" id="lat" type="hidden" value="">
       <input name="long" id="long" type="hidden" value="">
    </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:01:52.790

停止表单 onsubmit 函数提交表单，检查是否在`place_changed`事件中给出了位置。如果是，请手动提交表单，否则更改输入的类名。

```
var form = document.getElementById("searchForm"), // I assume the form tag has the ID searchForm
    input = document.getElementById("txtSearch"),
    autocomplete = new google.maps.places.Autocomplete(input);

form.onsubmit = function(event) {
    // stop the form from submitting
    event.preventDefault();
};

google.maps.event.addListener(autocomplete, 'place_changed', function() {
    input.className = '';
    var place = autocomplete.getPlace();
    if (!place.geometry) {
        // Inform the user that the place was not found and return.
        input.className = 'notfound';
    } else {
        input.className = '';
        // this won't fire the onsubmit function
        form.submit();
    }
}); 
```

# php - php查询中的会话

> ID：15295986
> 
> 赞同：-3
> 
> 时间：2013-03-08T14:15:02.987
> 
> 标签：php, session

假设我有一个登录页面 login.php，如果用户登录，那么他应该被重定向到 userpanel.php。如何在两个页面上使用会话，这样只有经过验证的会话用户才能看到第二页而没有其他人可以看到那个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:19:41.070

您需要在第一页开始一个会话并设置一个变量（取决于数据库或某种身份验证：

```
session_start();
...
// if authenticated, set this variable
$_SESSION['loggedin'] = TRUE; 
```

然后在第二页检查变量是否存在：

```
session_start()
if ($_SESSION['loggedin'] == TRUE) {
   // Do stuff
} else {
   header("Location: http://example.com/login.php");
   exit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:00:08.757

如上所述，在您的 login.php 页面中设置会话。成功登录后，我们设置会话以便脚本知道。

**登录.php**

```
session_start();
....
$_SESSION['loggedin'] == TRUE; 
```

为了简单起见并避免在每个文件中重复自己，您应该编写一个函数来检查用户是否已登录。

**用户面板.php**

```
session_start();
requireLogin();

.. all the other stuff you want to do.. 
```

该函数可以保存在您包含在每个页面中的通用文件中，并且可以很简单：

```
function requireLogin(){
    if($_SESSION['loggedin'] !== TRUE){
        header('Location: login.php');
    }
} 
```

尽管您可以扩展它以检查其他级别的身份验证；如果用户是管理员、已登录、版主等。

# c# - 获取当年的月份列表，但当前月份之前的月份

> ID：15295989
> 
> 赞同：-3
> 
> 时间：2013-03-08T14:15:22.213
> 
> 标签：c#, asp.net, c#-4.0, .net-4.0

如何获取当年月份的列表，但该列表应该只有当前月份之前的月份。

就像现在是 2013 年 3 月，那么列表应该包含 2013 年 1 月和 2013 年 2 月。当 4 月开始时，它应该有 1 月、2 月、3 月。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T14:18:51.633

```
Enumerable.Range(1, DateTime.Today.Month - 1)
    .Select(m => new DateTime(DateTime.Today.Year, m, 1))
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T14:18:00.873

也许：

```
var today = DateTime.Today;
var beforeMonths = Enumerable.Range(1, 12)
            .Where(i => i < today.Month)
            .Select(i => new DateTime(today.Year, i, 1))
            .ToList(); 
```

[**演示**](http://ideone.com/EzDlUu)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T14:19:13.783

除了一月份的结果返回一个空列表（这可能是你想要的）之外，你可以使用：

```
Enumerable.Range(1,DateTime.Today.Month - 1)
          .Select(i => new DateTime(DateTime.Today.Year,i,1)); 
```

或者如果您希望字符串表示使用

```
Enumerable.Range(1,DateTime.Today.Month - 1)
          .Select(i => new DateTime(DateTime.Today.Year,i,1)
                           .ToString("MMM yyyy")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T14:26:56.630

试试这个：

```
 var x = new[]
        {"Jan", "Feb", "Mar", 
         "Apr", "May", "Jun", 
         "Jul", "Aug", "Sep", 
         "Oct", "Nov", "Dec"}.Take
         (DateTime.Today.Month-1); 
```

或者如果你想要一个具体的清单，

```
 var x = new[]
        {"Jan", "Feb", "Mar", 
         "Apr", "May", "Jun", 
         "Jul", "Aug", "Sep", 
         "Oct", "Nov", "Dec"}.Take
         (DateTime.Today.Month-1).ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T14:21:38.340

这会给你一个月

```
 static void Main(string[] args)
    {
        var months =
            Enumerable.Range(1, DateTime.Now.Month-1).Select(
                p => new DateTime(DateTime.Now.Year, p, 1));

        foreach(var month in months)
            Console.WriteLine(month.ToString("MMM yyyy"));

        Console.ReadLine();
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T14:28:50.670

你得到当前月份

```
DateTime.Today.Month; 
```

三月是3。

然后你可以从 0 循环到 DateTime.Today.Month 增加月份。

```
List<DateTime> months = new List<DateTime>();

for (int i = 0; i < DateTime.Now.Month; ++i)
{
     months.Add(new DateTime(DateTime.Now.Year, i, 1));
} 
```

# android - 每个活动的新应用程序 Android

> ID：15295992
> 
> 赞同：0
> 
> 时间：2013-03-08T14:15:29.810
> 
> 标签：android, android-activity

我不明白为什么我的应用程序将每个活动都创建为应用程序？ ![应用](../Images/732a1018eec76ec9fff889a16314f4e4.png)

这会是配置错误吗？需要帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T14:18:23.600

从 AndroidManifest.xml 中的 MainActivity 以外的其他 Activity 中删除它

```
<intent-filter>
    <action android:name="android.intent.action.MAIN"  />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T14:19:21.990

您可能还没有像这样在您的清单中设置启动器活动：

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Theme.Sherlock.Light" >
    <activity
        android:name="com.example.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:19:43.650

在您的清单中查看。我认为您只需通过更改活动名称来复制粘贴每个活动的活动标签。从中删除启动器属性。

# android - Android NDK：本地引用表溢出

> ID：15295997
> 
> 赞同：2
> 
> 时间：2013-03-08T14:15:40.553
> 
> 标签：android, android-ndk

我有以下崩溃

```
03-08 19:08:30.734: E/dalvikvm(3821): JNI ERROR (app bug): local reference table overflow (max=512)
03-08 19:08:30.734: W/dalvikvm(3821): JNI local reference table (0x58ca9a48) dump:
03-08 19:08:30.734: W/dalvikvm(3821):   Last 10 entries (of 512):
03-08 19:08:30.734: W/dalvikvm(3821):       511: 0x415005a0 java.lang.Class<android.util.Log>
03-08 19:08:30.734: W/dalvikvm(3821):       510: 0x41cd9688 byte[] (8 elements)
03-08 19:08:30.734: W/dalvikvm(3821):       509: 0x41cc9410 java.lang.Class<ob.android.Stream>
03-08 19:08:30.734: W/dalvikvm(3821):       508: 0x41cd9668 byte[] (8 elements)
03-08 19:08:30.734: W/dalvikvm(3821):       507: 0x41cc9410 java.lang.Class<ob.android.Stream>
03-08 19:08:30.734: W/dalvikvm(3821):       506: 0x41cd9648 byte[] (8 elements)
03-08 19:08:30.734: W/dalvikvm(3821):       505: 0x41cc9410 java.lang.Class<ob.android.Stream>
03-08 19:08:30.742: W/dalvikvm(3821):       504: 0x41cd9628 byte[] (8 elements)
03-08 19:08:30.742: W/dalvikvm(3821):       503: 0x41cc9410 java.lang.Class<ob.android.Stream>
03-08 19:08:30.742: W/dalvikvm(3821):       502: 0x41cd9608 byte[] (8 elements)
03-08 19:08:30.742: W/dalvikvm(3821):   Summary:
03-08 19:08:30.742: W/dalvikvm(3821):       256 of java.lang.Class (5 unique instances)
03-08 19:08:30.742: W/dalvikvm(3821):         2 of java.lang.String (2 unique instances)
03-08 19:08:30.742: W/dalvikvm(3821):       252 of byte[] (8 elements) (252 unique instances)
03-08 19:08:30.742: W/dalvikvm(3821):         1 of java.lang.String[] (2 elements)
03-08 19:08:30.742: W/dalvikvm(3821):         1 of ob.android.Stream
03-08 19:08:30.742: E/dalvikvm(3821): Failed adding to JNI local ref table (has 512 entries)
03-08 19:08:30.742: I/dalvikvm(3821): "main" prio=5 tid=1 RUNNABLE
03-08 19:08:30.742: I/dalvikvm(3821):   | group="main" sCount=0 dsCount=0 obj=0x414f6508 self=0x40fc5a60
03-08 19:08:30.742: I/dalvikvm(3821):   | sysTid=3821 nice=0 sched=0/0 cgrp=apps handle=1075121968
03-08 19:08:30.742: I/dalvikvm(3821):   | schedstat=( 795410159 854705788 2161 ) utm=46 stm=32 core=0
03-08 19:08:30.742: I/dalvikvm(3821):   at android.util.Log.println_native(Native Method)
03-08 19:08:30.742: I/dalvikvm(3821):   at android.util.Log.v(Log.java:119)
03-08 19:08:30.742: I/dalvikvm(3821):   at ob.android.Stream.onResponse(Stream.java:57)
03-08 19:08:30.742: I/dalvikvm(3821):   at ob.android.Stream.stream(Native Method)
03-08 19:08:30.742: I/dalvikvm(3821):   at ob.android.Stream.<init>(Stream.java:30)
03-08 19:08:30.742: I/dalvikvm(3821):   at ob.android.MainActivity.startRecording(MainActivity.java:194)
03-08 19:08:30.742: I/dalvikvm(3821):   at ob.android.MainActivity.access$0(MainActivity.java:192)
03-08 19:08:30.742: I/dalvikvm(3821):   at ob.android.MainActivity$3.doAction(MainActivity.java:120)
03-08 19:08:30.742: I/dalvikvm(3821):   at ob.android.view.ViewFactory$1.onClick(ViewFactory.java:41)
03-08 19:08:30.742: I/dalvikvm(3821):   at android.view.View.performClick(View.java:4222)
03-08 19:08:30.742: I/dalvikvm(3821):   at android.widget.CompoundButton.performClick(CompoundButton.java:100)
03-08 19:08:30.742: I/dalvikvm(3821):   at android.view.View$PerformClick.run(View.java:17273)
03-08 19:08:30.750: I/dalvikvm(3821):   at android.os.Handler.handleCallback(Handler.java:615)
03-08 19:08:30.750: I/dalvikvm(3821):   at android.os.Handler.dispatchMessage(Handler.java:92)
03-08 19:08:30.750: I/dalvikvm(3821):   at android.os.Looper.loop(Looper.java:137)
03-08 19:08:30.750: I/dalvikvm(3821):   at android.app.ActivityThread.main(ActivityThread.java:4895)
03-08 19:08:30.750: I/dalvikvm(3821):   at java.lang.reflect.Method.invokeNative(Native Method)
03-08 19:08:30.750: I/dalvikvm(3821):   at java.lang.reflect.Method.invoke(Method.java:511)
03-08 19:08:30.750: I/dalvikvm(3821):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:994)
03-08 19:08:30.750: I/dalvikvm(3821):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:761)
03-08 19:08:30.750: I/dalvikvm(3821):   at dalvik.system.NativeStart.main(Native Method)
03-08 19:08:30.750: E/dalvikvm(3821): VM aborting
03-08 19:08:30.750: A/libc(3821): Fatal signal 11 (SIGSEGV) at 0xdeadd00d (code=1), thread 3821 (ob.android) 
```

以下代码被连续调用，您认为应用程序突然崩溃可能是什么问题。我希望它平稳连续地运行。

```
SPropRecord* propRec = parseSPropParameterSets(fSubsession.fmtp_spropparametersets(), propNum);
     __android_log_print(ANDROID_LOG_VERBOSE, "RTSP", "Frame: %c", propRec->sPropBytes);
     jmethodID mid;
     jclass handlerClass = env9->FindClass("ob/android/Stream");
     if (handlerClass == NULL) {
         __android_log_print(ANDROID_LOG_VERBOSE, "RTSP-Error", "Class");
     }
     mid = env9->GetStaticMethodID(handlerClass, "onResponse", "([B)V");
     if (mid == NULL) {
         __android_log_print(ANDROID_LOG_VERBOSE, "RTSP-Error", "Method");
     }

     jbyteArray jbArray = env9->NewByteArray((int)propRec->sPropLength);
     env9->SetByteArrayRegion(jbArray, 0, (int)propRec->sPropLength, (jbyte*)propRec->sPropBytes);

     //jobject theClass = env9->FindClass("ob/android/Stream");

     env9->CallStaticVoidMethod(handlerClass, mid, jbArray);
     env9->DeleteLocalRef(jbArray); 
```

我正在发布 jbArray 引用，还有什么我应该发布的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T15:06:00.703

你应该释放 handlerClass。实际上，您不需要每次都调用 FindClass，因为只需调用一次 GetStaticMethodID(handlerClass, "onResponse", "([B)V") 并在后续迭代中重用方法 id 就足够了。